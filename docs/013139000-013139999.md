# StackOverflow 问答 13139000-13139999

# javascript - 什么是更有效的编程方式来做到这一点

> ID：13139003
> 
> 赞同：0
> 
> 时间：2012-10-30T12:28:48.800
> 
> 标签：javascript, jquery, html, performance

我已经建立了一个简单的手风琴式侧面菜单，看着它，它的功能相当沉重。如果有的话，我可以学习哪些方法来减少代码量和执行时间？

我主要是问这个作为一个学习点。

```
$('#one').css("height", "22");
$('#dtwo').css("height", "22"); 
$('#three').css("height", "22");   
    $('#t1').click(function() {
      if ($('#one').hasClass("extended")) {
        $('#one').stop(true, true).animate({height: '22px'},500);
        $('#one').removeClass("extended");
        $('#a1').stop(true, true).animate({opacity: '1'},500);
      } else {
        $('#one').animate({height: '120' + 'px'},500);
        $('#one').addClass("extended");
        $('#a1').animate({opacity: '0'},300);
      }
});

$('#t2').click(function() {
      if ($('#dtwo').hasClass("extended")) {
        $('#dtwo').stop(true, true).animate({height: '22px'},500);
        $('#dtwo').removeClass("extended");
        $('#a2').stop(true, true).animate({opacity: '1'},500);
      } else {
        var height = 0;
        $(this).closest("div").children().each(function(){
           height += $(this).outerHeight(true);
        });
        $('#dtwo').animate({height: height + 5 + 'px'},500);
        $('#dtwo').addClass("extended");
        $('#a2').animate({opacity: '0'},300);
      }
});

 $('#t3').click(function() {
      if ($('#three').hasClass("extended")) {
        $('#three').stop(true, true).animate({height: '22px'},500);
        $('#three').removeClass("extended");
        $('#a3').stop(true, true).animate({opacity: '1'},500);
      } else {
        $('#three').animate({height: '270px'},500);
        $('#three').addClass("extended");
        $('#a3').animate({opacity: '0'},300);
      }
});

 $('#a1').click(function() {
      if ($('#one').hasClass("extended")) {
        $('#one').stop(true, true).animate({height: '22px'},500);
        $('#one').removeClass("extended");
        $('#a1').stop(true, true).animate({opacity: '1'},500);
      } else {
        $('#one').animate({height: '120px'},500);
        $('#one').addClass("extended");
        $('#a1').animate({opacity: '0'},300);
      }
});

$('#a2').click(function() {
      if ($('#dtwo').hasClass("extended")) {
        $('#dtwo').stop(true, true).animate({height: '22px'},500);
        $('#dtwo').removeClass("extended");
        $('#a2').stop(true, true).animate({opacity: '1'},500);
      } else {
        $('#dtwo').animate({height: '120px'},500);
        $('#dtwo').addClass("extended");
        $('#a2').animate({opacity: '0'},300);
      }
});

 $('#a3').click(function() {
      if ($('#three').hasClass("extended")) {
        $('#three').stop(true, true).animate({height: '22px'},500);
        $('#three').removeClass("extended");
        $('#a3').stop(true, true).animate({opacity: '1'},500);
      } else {
        $('#three').animate({height: '270px'},500);
        $('#three').addClass("extended");
        $('#a3').animate({opacity: '0'},300);
      }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:31:43.617

您将通过创建一个可用于每个单击事件处理程序的回调函数来摆脱大部分代码，因为它们是相同的，除了选择器。这样你就不需要重复很多代码。它变得更容易维护，更不容易出错并且占用更少的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:31:19.733

缓存元素，例如：

```
 if ($('#one').hasClass("extended")) {
    $('#one').stop(true, true).animate({height: '22px'},500);
    $('#one').removeClass("extended"); 
```

改成：

```
var one = $('#one');
  if (one.hasClass("extended")) {
    one.stop(true, true).animate({height: '22px'},500);
    one.removeClass("extended");
....
... 
```

另一个提示是变量名称。不要命名元素`one,two, t1, a2`
给元素和变量起有意义的名字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:46:02.053

为了避免使用特定 ID 重复相同的代码，要学习的最重要的事情是将通用类名添加到小部件或模块的不同组件中。

这使您能够运行 saem 代码来处理页面中小部件的多个实例

简化示例，因为我看不到您的标记以知道每个 ID 代表什么

```
$('.myMainWidgetClass').click(function(){
      var $thisWidget=$(this) ; /* store this instance of widget */
       /* remove active class on all the other main widgets*/
      $('.myMainWidgetClass.activeClass').removeClass('activeClass'); 
      /* add the active class to this instance*/
      $thisWidget.addClass('activeClass');  

     /* use find() to target elements only in this instance*/
      $thisWidget.find('.someSubClass').css('color','blue');
     /* to affect previous or next main widget assuming they are next element in page*/
      $thisWidget.prev().doSOmthing();/* or next()`

     /* get the index of this widget compared to all the same widgets in page*/         
       var thisIndex= $('.myMainWidgetClass').index(this) 

}) 
```

一旦你开始使用这些概念，就有很多方法可以基于遍历、索引等来定位选择器，以编写更通用的代码

# android - Android如何检测地图中物体或障碍物是否在我身后（或前面）

> ID：13139007
> 
> 赞同：2
> 
> 时间：2012-10-30T12:28:52.360
> 
> 标签：android, google-maps, geolocation

我想检测地图中是否有物体在我身后或前面。当然，我可以获得我的位置，并且我有对象位置和行进方向（方位）。我想知道如何检查是在我前面还是在我后面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:29:53.700

我用了一个距离技巧。如果我和障碍物之间的距离增加，那么它肯定在我身后。在减少，它在我面前。

# castle-windsor - 覆盖成员时违反继承安全规则：'Castle.MicroKernel.DefaultKernel.InitializeLifetimeService()

> ID：13139008
> 
> 赞同：3
> 
> 时间：2012-10-30T12:28:53.560
> 
> 标签：castle-windsor

我有一个在开发机器上运行良好的 asp.net 4.0 网站。当我尝试访问托管在外部 Web 服务器上的相同服务时，出现以下错误

服务器在处理请求时遇到错误。异常消息是“覆盖成员时违反了继承安全规则：'Castle.MicroKernel.DefaultKernel.InitializeLifetimeService()'。覆盖方法的安全可访问性必须与被覆盖方法的安全可访问性相匹配。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：...

我正在使用城堡温莎 2.5 我尝试使用更高版本的城堡温莎，但无济于事。有人可以建议我如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-26T15:11:26.527

尝试添加到 web.config 文件的 system.web 部分。它在 GoDaddy 托管网站上为我工作。

```
<system.web>
  <trust level="Full" />
</system.web> 
```

# jvm - 控制执行速度

> ID：13139018
> 
> 赞同：1
> 
> 时间：2012-10-30T12:29:38.630
> 
> 标签：jvm, interpreter, bytecode

我正在考虑制作一个“编程游戏”，即每个玩家编写一个程序来控制他们的“机器人”，然后让这些程序相互竞争，看看谁赢了（根据“赢”的某种定义）。

为了公平起见，每个机器人程序都应该以相同的速度执行，因此使用本机预编译的 C/C++ 代码似乎是不可能的。

我可以想到 3 个选项，但不确定 2 个：

1.  **使用在 VM 中运行的语言**- 这意味着机器人是用 Java 编写并编译为 JVM 字节码。然后每个机器人都有一个JVM，我需要控制JVM“时钟”或控制执行速度的任何东西。
    ***问题：***可以控制JVM“时钟”，告诉它运行*X*个时钟周期的代码吗？
2.  **使用脚本语言**- 机器人应该用 JS 或 Python 或其他语言编写。
    ***问题：***同上——速度可以控制吗？
3.  **使用我自己的简化语言**-
    ***问题：***我正在编写游戏，而不是编译器。这意味着任何玩游戏的人都必须学习另一种语言，这意味着没有人会玩。

* * *

所以基本上，我想问题是我可以控制 JVM 或某些语言解释器的执行速度（理论上不是 - 在实践中）？还是有其他我没有想到的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:34:08.220

JVM 不是实时的，我怀疑你的操作系统也不是。依赖 JVM 和/或进程交互是行不通的，因为您受制于操作系统调度、JVM 线程调度等。

如果您想协调多个线程，那么您应该查看 JVM 线程模型，特别是如何使用[锁](http://tutorials.jenkov.com/java-concurrency/locks.html)来协调 2 个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:16:37.407

一种选择是编写您自己的 JVM，您可以使用它来运行每个程序中固定数量的字节码指令。字节码更容易消化人类可读的源代码，因此您可以通过相对较少的实现工作摆脱困境，而您的用户可以使用任何可以生成 Java 字节码的编程语言进行编程。

如果您设置一些限制，例如“无线程”和“无尝试/捕获”，它会变得更容易。您将需要实现一些核心语言功能`java.lang.*`以及一些特定于域的 I/O 功能，但对于 JRE 的其余大部分（例如`java.util.*`），您应该能够从现有 JRE 实现中执行字节码（如果您分发游戏引擎，则模数法律约束）。

与在现成的优化 JVM 上运行相比，预计速度会降低 10 倍到 100 倍（取决于您的实现技术）。

**或者**，在调试模式下运行现有的 JVM，单步执行参赛程序，让您的游戏[假装是调试器](http://en.wikipedia.org/wiki/Java_Platform_Debugger_Architecture)。我不确定这是否比自己编写一个简单的 JVM 更容易或更难。

# android - Android程序 - 收到Skype消息时做出反应？

> ID：13139019
> 
> 赞同：1
> 
> 时间：2012-10-30T12:29:38.770
> 
> 标签：android, service, skype

当我收到来自 Skype 应用程序的消息时，我正在制作一个需要做某事的 android 程序。我的 Skype 将被登录，这将是一项等待某人向我发送消息的服务或活动，当它发送消息时它会播放一首歌曲。有谁知道如何从代码方面判断我是否收到了来自 Skype 应用程序的消息？

如果没有办法做到这一点，我如何让服务扫描通知栏以查找包含文本“skype”的通知并在收到通知时立即做出反应？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:37:21.213

如果Skype在消息接收时广播意图（如果有，请查看Skype的decumentation），您可能只是在您的应用程序中接收它（通过广播接收器）并做一些事情。如果没有，可能仍有办法窥探状态栏：

[检测新的 Android 通知](https://stackoverflow.com/questions/9367196/detect-a-new-android-notification/9632076#9632076)

用于 Skype 通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:36:12.750

一般来说“不”。在未修改的系统上无法做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:36:58.363

您不能直接干预其他应用程序的事件和/或处理。只有**Skype**本身提供了开放接口（如*Service Binding*、*Broadcast*等）以允许第三方集成时才有可能。但据我所知，我认为使用 Skype 自己的应用程序是不可能的。

但是，如果您使用 Skype 的[SDK](https://developer.skype.com/)并提供自己的 Messenger 服务实现，那么您当然是负责人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:40:23.780

根据 Skype 开发者论坛中的这篇[文章](http://devforum.skype.com/t5/Developer-Corner/Skype-Android-app-development-Are-there-any-public-broadcast/td-p/8822)，该应用程序不发送广播事件（这是以编程方式通知传入消息的常用方式）。

# java-me - 如何访问手机的RMS？

> ID：13139028
> 
> 赞同：0
> 
> 时间：2012-10-30T12:30:16.510
> 
> 标签：java-me

我为手机创建了一个 T9 应用程序更新程序，但我无法访问手机的 RMS。所以我无法更新手机的 T9 RMS。请问我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:45:32.693

您无法从标准 JavaME 访问 T9 字典。T9 由系统软件处理。当您在 MIDlet 中添加 TextField 时，是系统软件调用了 T9 功能。您无法从 JavaME 中控制它。

它需要一个特殊的 API 才能访问/编辑 T9 字典，我认为不存在这样的 API。（如果是这样，它只会存在于极少数手机上）。

# c# - 反序列化 C# JSON 字符串的痛苦

> ID：13139033
> 
> 赞同：0
> 
> 时间：2012-10-30T12:30:26.040
> 
> 标签：c#, json, asp.net-mvc-3, deserialization

我正在尝试通过包含一些 JSON 的隐藏文本字段将一些数据发布到我的 MVC 3 控制器。我有通过字符串课程列表传入的 JSON。任何人都知道为什么这不起作用？

我所做的只是从 JSON 字符串中生成一个字节 []，将其写入 MemoryStream，然后反序列化该流——或者，尝试这样做。BookCourse bc 总是以空属性结束。

这是我将使用的 JSON 之类的东西：

```
[{"coursesection":"1234","netlogon":"jsmith","label":"CRSE-1313 Generic Course Titling ~ Joe Smith"}] 
```

这是要反序列化的对象：

```
using System.Runtime.Serialization;

namespace xxxx.Models
{
    [DataContract]
    public class BookCourse
    {
        [DataMember]
        public string coursesection { get; set; }

        [DataMember]
        public string netlogon { get; set; }

        [DataMember]
        public string label { get; set; }
    }
} 
```

最后，执行它的控制器动作代码——

```
var byteArray = Encoding.ASCII.GetBytes(coursesList);

// Deserialize byte array to data type
var stream = new MemoryStream();
stream.Write(byteArray, 0, byteArray.Length);
var crs = new DataContractJsonSerializer(typeof(BookCourse));
stream.Position = 0;

// Read stream to object
ad.CourseSectionIDs = new List<int>();
try
{
    var bc = (BookCourse) crs.ReadObject(stream);
    while (bc.coursesection != null)
    {
        cs.AssociateCourseBook(bc.netlogon, bc.coursesection, ad.ISBN);
        bc = (BookCourse)crs.ReadObject(stream);
    }
}
catch (System.Runtime.Serialization.SerializationException e)
{
    // Is this best practice for handling "none"?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:57:38.923

您的 JSON 字符串表示 BookCourse 的集合，而不是单个 BookCourse。所以调整你的代码：

```
var serializer = new DataContractJsonSerializer(typeof(BookCourse[])); 
```

进而：

```
var bookCourses = (BookCourse[])crs.ReadObject(stream); 
```

或者，如果您想使用单个 BookCourse，您将需要更改 JSON 字符串并删除代表集合的环绕方括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:03:24.240

Darin 是正确的，如果您想在合同级别上进行更改，这里就是更改。

```
[DataContract]
public class BookCourse
{
    [DataMember]
    public string coursesection { get; set; }

    [DataMember]
    public string netlogon { get; set; }

    [DataMember]
    public string label { get; set; }
}

[DataContract]
public class BookCourceCollection
{
    [DataMember]
    public List<BookCourse> Collection;

    public static BookCourceCollection ReturnCollection(string jsonString)
    {
        MemoryStream ms;
        BookCourceCollection collection;

        using (ms = new MemoryStream(Encoding.UTF8.GetBytes(jsonString)))
        {
            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(BookCourceCollection));
            collection = ser.ReadObject(ms) as BookCourceCollection;
        }

        return collection;
    }

} 
```

用法：

```
 string jsonString = "Your JSON string from the front end";

var bookCourceObject = BookCourseCollection.ReturnCollection(jsonString);
foreach (BookCourse bookCourse in bookCourceObject.Collection)
{
    cs.AssociateCourseBook(bookCourse.netlogon, bookCourse.coursesection, bookCourse.ISBN);
} 
```

# python - 在 ubuntu 12.04 下使用 cx-freeze 将 Python 脚本转换为 Windows exe 文件

> ID：13139038
> 
> 赞同：2
> 
> 时间：2012-10-30T12:30:50.093
> 
> 标签：python, windows, exe, ubuntu-12.04, cx-freeze

我想从 Python 脚本在 Ubuntu 12.04 中创建 Windows exe 文件。

```
apt-get install cx-freeze
cd ~/.app/
ls
app.py 
```

如何创建 app.py 脚本的 Windows XP、Vista、7 可执行文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T14:47:37.900

PyInstaller 仅支持将 Linux 上的 Python 代码冻结为 Windows 可执行文件，后来被删除。可悲的是，目前似乎唯一的解决方案是安装 wine，然后在 wine 中您将安装 windows 版本的 python。从这里您应该能够将脚本冻结为 Windows 的 .exe。

# java - 重启计时器失败

> ID：13139042
> 
> 赞同：0
> 
> 时间：2012-10-30T12:31:22.897
> 
> 标签：java, timertask

当我收到 KeepAlive 时，我想重新启动我的计时器，问题是有时它不会重新启动，而是创建一个新的，所以，最后计时器达到了限制：

```
public class KeepAliveTimer {

long macAddress;
Timer timer;
String ip;  

public KeepAliveTimer(long mac, String ipAddress){
    this.macAddress = mac;
    this.ip = ipAddress;

    timer = new Timer();

    TimerTask timerTask = new TimerTask() {

        @Override
        public void run() {

            timerFinished();

        }
    };

    timer.schedule(timerTask, 10*60*1000);
}

public void update() {

    TimerTask timerTask = new TimerTask() {

        @Override
        public void run() {
            timerFinished();

        }
    };
    timer.cancel();
    timer.purge();
    timer = new Timer();
    timer.schedule(timerTask, 10*60*1000);
}

public void timerFinished() {

    //tasks
}

} 
```

对象 KeepAliveTimer 在收到第一个 keepAlive 时创建并由后续更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:40:35.740

您不应该取消整个计时器，而应该只取消`TimerTask`. 这就是我编写代码的方式：

```
public class KeepAliveTimer {
  final Timer timer = new Timer();
  final long macAddress;
  final String ip;
  volatile TimerTask timerTask;

  public KeepAliveTimer(long mac, String ipAddress) {
    this.macAddress = mac;
    this.ip = ipAddress;
  }
  public void update() {
    if (timerTask != null) timerTask.cancel();
    timer.schedule(timerTask(), 10 * 60 * 1000);
  }
  private TimerTask timerTask() {
    return timerTask = new TimerTask() {
      @Override public void run() { timerFinished(); }
    };
  }
  public void timerFinished() {
    // tasks
  }
} 
```

请注意，我不会在构造函数中复制调度。你应该初始化

```
new KeepAliveTimer(mac, ip).update(); 
```

# c# - 如何将 UserControl.ascx 的代码隐藏类放在另一个库中

> ID：13139043
> 
> 赞同：2
> 
> 时间：2012-10-30T12:31:24.573
> 
> 标签：c#, asp.net, user-controls, code-behind, ascx

我有一个 UserControl.ascx 并希望这个 ascx 使用（引用）**另一个库（项目）**中的代码隐藏。所以在`@control`指令中我做了以下

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="..\CodeBehinds\ucBehind1.cs" %> 
```

但是当运行页面时我看到了错误

```
Parser Error Message: Cannot use a leading .. to exit above the top directory. 
```

有没有办法实现它？

[GitHub 示例项目](https://github.com/Ewerton/UserControlsCodeBehind)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:09:10.197

在您的示例中，从 UserControl1.ascx 中删除继承

在 usercontrol1.ascx.cs 中，取消注释所有代码。

改变

```
public partial class UserControl1 : System.Web.UI.UserControl 
```

至

```
public partial class UserControl1 : otherClassInAnotherProject 
```

otherClassInAnotherProject 最终应该继承自 System.Web.UI.UserControl

# kohana - Kohana Auth模块登录系统

> ID：13139048
> 
> 赞同：0
> 
> 时间：2012-10-30T12:31:50.123
> 
> 标签：kohana, kohana-3, kohana-orm, kohana-3.2, kohana-auth

我最近开始在一家使用`Kohana`模块`Auto-modeler`和`k0stache`模块的公司工作。我目前正在制作一个登录系统，但我可以找到一些关于将 与`Auth`结合使用`Auto-modeler`的体面信息`k0stache`。我查看了`Kohana`,`k0stache`和`Auto-modeler`文档

你们中的任何人都可以帮助我或告诉我要采取什么步骤。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:23:10.573

有很多Auth教程，很多。试试这个[演示应用程序](http://github.com/ddrake/kohana_demo/blob/master/README.markdown)。这是一个完整的演示应用程序，包含您需要的一切。享受。

# php - 无法通过 Facebook 登录

> ID：13139049
> 
> 赞同：-2
> 
> 时间：2012-10-30T12:32:01.303
> 
> 标签：php, facebook, api, login

这是API调用和通过Facebook登录的代码。问题是当它重定向到 Facebook 时，它没有登录。我的代码的哪一部分是错误的，我该如何解决？

```
require 'facebook/facebook.php';
require 'config/fbconfig.php';
require 'config/functions.php';
$url = $_REQUEST['lasturl'];

$facebook = new Facebook(array(
   'appId' => APP_ID,
          'secret' => APP_SECRET,
          'cookie' => true
    ));

$session = $facebook->getSession();

if (!empty($session)) {
    # Active session, let's try getting the user id (getUser()) and user info (api->('/me'))
try {
    $uid = $facebook->getUser();
    $user = $facebook->api('/me');
} catch (Exception $e) {

}

    if (!empty($user)) {
        # User info ok? Let's print it (Here we will be adding the login and registering routines)
       // echo '<pre>';
        //print_r($user);
       // echo '</pre><br/>';
        $username = $user['name'];
        $user = new User();
        $userdata = $user->checkUser($uid, 'facebook', $username);
        if(!empty($userdata)){
            session_start();
            $_SESSION['id'] = $userdata['id'];
            $_SESSION['oauth_id'] = $uid;

            $_SESSION['username'] = $userdata['username'];
            $_SESSION['oauth_provider'] = $userdata['oauth_provider'];
            header("Location: ".$url);
        }
    } else {
        # For testing purposes, if there was an error, let's kill the script
        die("There was an error.");
    }
} else {
    # There's no active session, let's generate one
    $login_url = $facebook->getLoginUrl();
    header("Location: " . $login_url);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:53:03.613

试试下面的代码：`$session = $facebook->getSession();`不工作

```
 $facebook = new Facebook(array(
       'appId' => APP_ID,
              'secret' => APP_SECRET,
              'cookie' => true
        ));

     $uid = $facebook->getUser();

    if ($uid) {
        # Active session, let's try getting the user id (getUser()) and user info (api->('/me'))
    try {

        $user = $facebook->api('/me');
    } catch (Exception $e) {

    }

        if ($uid) {
            # User info ok? Let's print it (Here we will be adding the login and registering routines)
           // echo '<pre>';
            //print_r($user);
           // echo '</pre><br/>';
            $username = $user['name'];
            $user = new User();
            $userdata = $user->checkUser($uid, 'facebook', $username);
            if(!empty($userdata)){
                session_start();
                $_SESSION['id'] = $userdata['id'];
                $_SESSION['oauth_id'] = $uid;

                $_SESSION['username'] = $userdata['username'];
                $_SESSION['oauth_provider'] = $userdata['oauth_provider'];
                header("Location: ".$url);
            }
        } else {
            # For testing purposes, if there was an error, let's kill the script
            die("There was an error.");
        }
    } else {
        # There's no active session, let's generate one
        $login_url = $facebook->getLoginUrl();
        header("Location: " . $login_url);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:42:44.427

实际上代码很好，获取登录凭据应该可以正常工作。但问题就在这里。

```
if (!empty($user)) 
```

我认为您应该在通过 API 调用获取用户信息之前将其放在首位。如果函数 getUser 返回一个 ID，那么您不需要获取当前会话来获取用户信息。

# database - 我的数据库命名会有什么问题吗？

> ID：13139052
> 
> 赞同：0
> 
> 时间：2012-10-30T12:32:17.123
> 
> 标签：database, database-design

今天我开始一个项目并设计我的数据库，这是我的设计文档的内容。

```
user    
id          int
name        string

account 
id          int
gold        int
silver      int

accountdetails  
id          int
content     *

role
id          int
name        string
sex         char
portrait    string
figure      string
level       int
exp         int
speed       int
actionpoint int
skillid     int

roleskill   
roleid      int
id          int

roleskillD  
id          int
effect      string
name        string
image       string
level       int 
```

我使用最懒惰的方式来命名字段和表。我想这不会给我带来麻烦。

我发现我可以毫不费力地阅读这些名字：

```
accountdetails
actionpoint
skillid
roleskill 
```

等我不喜欢在数据库中使用大小写或_。

如果你觉得事情不顺利，请给我你的指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:38:21.407

数据库通常是*共享*资源。您应该对其进行设计，以便每个人都可以轻松使用。

请记住，您的标识符可能会变得更长，并且某些类型的数据库（例如 Oracle）将以大写形式存储对象名称。 `CUSTOMERCONTACTADDRESSID`比 更难阅读`CUSTOMER_CONTACT_ADDRESS_ID`。

# visual-studio-2010 - Visual Studio 2010 Office 开发 C# 中 VBA 宏的替代方案是什么？

> ID：13139055
> 
> 赞同：0
> 
> 时间：2012-10-30T12:32:32.210
> 
> 标签：visual-studio-2010, c#-4.0

Visual Studio 2010 Office 开发 C# 中 VBA 宏的替代方法是什么？

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:52:38.780

你想要的是Visual Studio 中的[Office 开发](http://msdn.microsoft.com/en-us/library/d2tx7z6d%28v=vs.100%29.aspx)（以前是 Visual Studio Tools for Office）

# exception - 线程“主”java.lang.NoClassDefFoundError 中的异常：java/sql/SQLClientInfoException

> ID：13139057
> 
> 赞同：1
> 
> 时间：2012-10-30T12:32:41.140
> 
> 标签：exception

在安装 opengts 时 - 一直在运行 initdb 一个 java 工具。最初面对 mysql 的类未找到错误。修复了这个问题，后来一直面临 SQLClientException 的“classnotfoundexception”。我相信它应该是 rt.jar 的一部分。但是通过在类路径中添加上面的jar，并没有解决问题。请帮忙指点一下。

谢谢，

\workspace_vilas\OpenGTS_2.4.5\OpenGTS_2.4.5\otherlibs\mysql-connector-java-5.1.22-bin.jar;C:\workspace_vilas\OpenGTS_2.4.5\OpenGTS_2.4.5\otherlibs\rt.jar;C:\workspace_vilas \javamail1_4_4\javamail-1.4.4\mail.jar;"C:\Program Files\Java\jdk1.6.0\jre\lib\ext\mysql-connector-java-5.1.22-bin.jar";"C: \Program Files\Java\jdk1.6.0\jre\lib\ext\rt.jar"; org.opengts.db.DBConfig -conf:"C:\workspace_vilas\OpenGTS_2.4.5\OpenGTS_2.4.5\default.conf" -log.file.enable:false -initTables "rootUser=root" "rootPass="Version: 2.4 .5 线程“main”中的异常 java.lang.NoClassDefFoundError: java/sql/SQLClientInfoException at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:164) at com.mysql .jdbc.ConnectionImpl.(ConnectionImpl.java:292) 在 com.mysql。

```
 at org.opengts.dbtools.DBConnection.createStatement(DBConnection.java:71 
```

6) 在 org.opengts.dbtools.dbtools.DBConnection.executeUpdate(DBConnection.爪哇：908）

```
 at org.opengts.dbtools.DBConnection.executeUpdate(DBConnection.java:889)

    at org.opengts.dbtools.DBProvider.createDatabase(DBProvider.java:1422)
    at org.opengts.dbtools.DBAdmin.execCommands(DBAdmin.java:809)
    at org.opengts.db.DBConfig._main(DBConfig.java:1246)
    at org.opengts.db.DBConfig.main(DBConfig.java:1361) 
```

# api - 如何为任何个人资料呈现 twitter 小部件？

> ID：13139058
> 
> 赞同：2
> 
> 时间：2012-10-30T12:32:44.340
> 
> 标签：api, twitter, widget, feed, profile

我们的网站有许多公司简介。每个个人资料都有自己的带有 twitter 提要的块。

所以最近，它的工作原理非常简单：

```
<div style="text-align: center;" id="twtr-profile-widget"></div>
<script src="http://widgets.twimg.com/j/1/widget.js"></script>
<link href="http://widgets.twimg.com/j/1/widget.css" type="text/css" rel="stylesheet">
<script>
  new TWTR.Widget({
  // Some variables
  }).render().setProfile('<?php print $profile ?>').start();
</script> 
```

但是现在，在 Twitter 的 API 发生变化之后，我无法做到这一点。现在代码如下所示：

```
<a class="twitter-timeline" data-widget-id="<?php print $widget_id ?>"></a>
<script>
  !function(d,s,id){
    var js,fjs=d.getElementsByTagName(s)[0];
    if(!d.getElementById(id)){
      js=d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
</script> 
```

现在我们必须使用**widget-id**而不是**Profile name**。这意味着我们必须为每个公司生成单独的小部件或询问他们！

屁股的痛苦是他们必须将我们的网站添加到小部件的白名单中。

所以我的问题是，**如何为任何个人资料呈现 twitter 小部件？**

# ruby-1.9.2 - 如何在 ruby 1.9.2 中将包含逗号的字符串转换为数组？

> ID：13139060
> 
> 赞同：1
> 
> 时间：2012-10-30T12:32:55.470
> 
> 标签：ruby-1.9.2

我有一个如下的字符串

```
 "\"123\",\"Columbia, Gem Of The Ocean\"" 
```

我想把它转换成数组，我应该得到如下输出

```
["123","Columbia, Gem Of The Ocean"] 
```

但是当我在字符串上使用逗号分割方法时，我得到如下输出

```
 ["\"123\"", "\"Columbia", " Gem Of The Ocean\""] 
```

它正在分裂“哥伦比亚，海洋中的宝石”，`","`但我不希望那样。

有一个`parse_line method of csv`但不起作用`ruby 1.9.2.`

请提出一些解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:37:49.950

您的描述与预期结果不匹配。您不想用（所有）逗号分隔它。您想提取被双引号包围的部分。

```
string.scan(/".*?"/) 
```

如果你不想要报价，那么

```
string.scan(/"(.*?)"/).flatten(1) 
```

# xml - 使用 XSLT（xml 和 xaml 语法）创建 Windows Phone 页面

> ID：13139064
> 
> 赞同：1
> 
> 时间：2012-10-30T12:33:12.143
> 
> 标签：xml, xaml, xslt, windows-phone

我必须使用 XSLT 从 XML 创建 Windows Phone 页面。这是 windows phone 页面中第一行的外观：

```
<phone:PhoneApplicationPage
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:RssPhoneApp_ViewModels="clr-namespace:RssPhoneApp.ViewModels" 
x:Class="RssPhoneApp.MainPage"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True"> 
```

而且我不知道如何在 phone:PhoneApplicationPage 和**xmlns**属性中使用**“phone”前缀进行管理。**我不知道这应该如何工作。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:33:01.437

我建议只是阅读 XSL，因为那里有大量的开发人员资源。[这是一篇讨论如何在 XSL 中处理名称空间的文章](http://www.xml.com/pub/a/2001/04/04/trxml/index.html)。

> 只需在样式表中声明并使用您需要的命名空间，XSLT 处理器就会
> 
> *   将该命名空间声明放在结果文档的文档元素的开始标记中，并且
>     
>     
> *   将该命名空间的前缀放在该命名空间中任何结果树元素的标签中。**

# python - 在python中重新加载模块

> ID：13139066
> 
> 赞同：4
> 
> 时间：2012-10-30T12:33:26.160
> 
> 标签：python, module, reload

当我使用字典`MyClass`从文件中导入类时，我会这样做`myModule.py``myModules`

```
from myModules.myModule import MyClass 
```

更改文件后如何重新加载此模块`myModue.py`？以下是一些误判：

```
reload(MyClass) # TypeError: reload() argument must be module
reload(myModule) # NameError: name 'myModule' is not defined
reload(myModules.myModule)  # NameError: name 'myModules' is not defined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:39:42.250

您必须有一个模块才能重新加载。当您使用`from foo import bar`, unless`bar`是一个模块时（在您的情况下，它看起来不是），您将不得不使用另一个 import 语句。

```
from myModules.myModule import myClass
# this will cause myModule.py to be evaluated.  only myClass is in scope

from myModules import myModule
# since myModule has already been imported, myModule.py is not evaluated again. 
# but now myModule is in scope.

reload(myModule)
# this will cause myModule.py to be evaluated again. 
```

如果由于某种原因，您不想要两个导入，那么已经导入的模块也可以在`sys.modules`

# php - 警告：session_start()

> ID：13139070
> 
> 赞同：-3
> 
> 时间：2012-10-30T12:33:31.970
> 
> 标签：php, warnings

使用我的 login.php 文件时收到警告。帮我删除这个警告......----

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已在 /home/fundumob/public_html/app_create 中发送（输出开始于 /home/fundumob/public_html/app_create/index.php:35） /login.php 在第 1 行

```
 <?php session_start();?>
 <?php 
 include("lib/config.php");

 if(isset($_POST["tb_login"]))
 {
 $myusername=$_POST['log_email'];
 $myuser_password=$_POST['log_password']; 

 if(!empty($myusername) && !empty($myuser_password))  
  {
 $sql="SELECT * FROM act_member WHERE   password='$myuser_password' and               
  email='$myusername'";
$result=mysql_query($sql);
 // Mysql_num_row is counting table row
 $count=mysql_num_rows($result);
 // If result matched $myusername and $mypassword, table row must be 1 row
 if($count==1){
 $rows=mysql_fetch_row($result);
 $_SESSION['user_id']= $rows[0];
 $_SESSION['mem_id']=$rows[1];
 $_SESSION['fname']=$rows[2];
 $_SESSION['lname']=$rows[3];
 header("location:profile.php");    }
 else { 

echo "sorry you entered wrong password or email id";
}

 }
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:37:00.000

尝试这个：

您忘记在标头声明后添加 exit() ...

```
<?php 

session_start();
include("lib/config.php");

if(isset($_POST["tb_login"])){

    $myusername=$_POST['log_email'];
    $myuser_password=$_POST['log_password']; 

    if(!empty($myusername) && !empty($myuser_password)){
        $sql="SELECT * FROM act_member WHERE   password='".$myuser_password."' and               
        email='".$myusername."'";
        $result=mysql_query($sql);
        // Mysql_num_row is counting table row
        $count=mysql_num_rows($result);
        // If result matched $myusername and $mypassword, table row must be 1 row

        if($count==1){

            $rows=mysql_fetch_row($result);
            $_SESSION['user_id']= $rows[0];
            $_SESSION['mem_id']=$rows[1];
            $_SESSION['fname']=$rows[2];
            $_SESSION['lname']=$rows[3];
            header("Location: profile.php");    
            exit(); // <-------------------- add this else the page will not redirect and you will get a header error
        }
        else { 
            echo "sorry you entered wrong password or email id";
        }

    }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:38:40.440

您不能在此处使用 session_start()，如警告中所写，/home/fundumob/public_html/app_create/index.php:35 中已经输出了一些内容

核实

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:39:46.530

如果您包含上面的任何其他文件`<?php session_start();?>`，请确保`<?php session_start();?>`存在于第一行的最顶层文件中。可能是您的 config.php 或您包含的其他文件。

# c# - 鼠标滚轮滚动工具条菜单项

> ID：13139074
> 
> 赞同：3
> 
> 时间：2012-10-30T12:33:36.160
> 
> 标签：c#, winforms, scroll, toolstripitem, toolstripmenu

我有一些包含许多菜单项的菜单。鼠标滚轮不会滚动它们。我必须使用键盘箭头或单击顶部和底部的箭头。是否可以使用鼠标滚轮滚动工具条菜单项？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-09T22:22:53.920

您可以使用此类在应用程序范围内启用它：

```
public class DropDownMenuScrollWheelHandler : System.Windows.Forms.IMessageFilter
{
    private static DropDownMenuScrollWheelHandler Instance;
    public static void Enable(bool enabled)
    {
        if (enabled)
        {
            if (Instance == null)
            {
                Instance = new DropDownMenuScrollWheelHandler();
                Application.AddMessageFilter(Instance);
            }
        }
        else
        {
            if (Instance != null)
            {
                Application.RemoveMessageFilter(Instance);
                Instance = null;
            }
        }
    }
    private IntPtr activeHwnd;
    private ToolStripDropDown activeMenu;

    public bool PreFilterMessage(ref Message m)
    {
        if (m.Msg == 0x200 && activeHwnd != m.HWnd) // WM_MOUSEMOVE
        {
            activeHwnd = m.HWnd;
            this.activeMenu = Control.FromHandle(m.HWnd) as ToolStripDropDown;
        }
        else if (m.Msg == 0x20A && this.activeMenu != null) // WM_MOUSEWHEEL
        {
            int delta = (short)(ushort)(((uint)(ulong)m.WParam) >> 16);
            handleDelta(this.activeMenu, delta);
            return true;
        }
        return false;
    }

    private static readonly Action<ToolStrip, int> ScrollInternal
        = (Action<ToolStrip, int>)Delegate.CreateDelegate(typeof(Action<ToolStrip, int>),
            typeof(ToolStrip).GetMethod("ScrollInternal",
                System.Reflection.BindingFlags.NonPublic
                | System.Reflection.BindingFlags.Instance));

    private void handleDelta(ToolStripDropDown ts, int delta)
    {
        if (ts.Items.Count == 0)
            return;
        var firstItem = ts.Items[0];
        var lastItem = ts.Items[ts.Items.Count - 1];
        if (lastItem.Bounds.Bottom < ts.Height && firstItem.Bounds.Top > 0)
            return;
        delta = delta / -4;
        if (delta < 0 && firstItem.Bounds.Top - delta > 9)
        {
            delta = firstItem.Bounds.Top - 9;
        }
        else if (delta > 0 && delta > lastItem.Bounds.Bottom - ts.Height + 9)
        {
            delta = lastItem.Bounds.Bottom - owner.Height + 9;
        }
        if (delta != 0)
            ScrollInternal(ts, delta);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T18:37:22.707

一个可行的解决方案：

1.  在表单的事件中注册您的`MouseWheel`表单`DropDownClosed`事件和您的根事件`MenuStripItem`（此处为 rootItem）`Load`

    ```
     this.MouseWheel += Form3_MouseWheel;
        rootItem.DropDownOpened += rootItem_DropDownOpened;
        rootItem.DropDownClosed += rootItem_DropDownClosed; 
    ```

2.  添加`Keyboard`模拟按键的类的代码

    ```
    public static class Keyboard
    {
        [DllImport("user32.dll")]
        static extern uint keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);

        const byte VK_UP = 0x26; // Arrow Up key
        const byte VK_DOWN = 0x28; // Arrow Down key

        const int KEYEVENTF_EXTENDEDKEY = 0x0001; //Key down flag, the key is going to be pressed
        const int KEYEVENTF_KEYUP = 0x0002; //Key up flag, the key is going to be released

        public static void KeyDown()
        {
            keybd_event(VK_DOWN, 0, KEYEVENTF_EXTENDEDKEY, 0);
            keybd_event(VK_DOWN, 0, KEYEVENTF_KEYUP, 0);
        }

        public static void KeyUp()
        {
            keybd_event(VK_UP, 0, KEYEVENTF_EXTENDEDKEY, 0);
            keybd_event(VK_UP, 0, KEYEVENTF_KEYUP, 0);
        }
    } 
    ```

3.  添加`DropDownOpened`, `DropDownClosed`,`MouseWheel`事件的代码：

    ```
    bool IsMenuStripOpen  = false;

    void rootItem_DropDownOpened(object sender, EventArgs e)
    {
        IsMenuStripOpen = true;
    }

    void rootItem_DropDownClosed(object sender, EventArgs e)
    {
        IsMenuStripOpen = false;
    }

    void Form3_MouseWheel(object sender, MouseEventArgs e)
    {
        if (IsMenuStripOpen)
        {
            if (e.Delta > 0)
            {
                Keyboard.KeyUp();
            }
            else
            {
                Keyboard.KeyDown();
            }
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-05T07:27:07.537

这非常简单地使用上下文菜单的**子菜单**( )：`ToolStripMenuItem`

假设使用 a `form1`(or `UserControl`) 和 a `contextMenuStrip1`：

```
private void form1_Load( object sender , EventArgs e )
{
    //this.MouseWheel -= When_MouseWheel;
    this.MouseWheel += When_MouseWheel;
}
void When_MouseWheel( object sender , MouseEventArgs e )
{
    if ( this.contextMenuStrip1.IsDropDown ) {
         //this.Focus();
         if ( e.Delta > 0 ) SendKeys.SendWait( "{UP}" );
         else SendKeys.SendWait( "{DOWN}" );         
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-10T13:30:14.770

我修改了 Mohsen Afshin 的答案以单击向上/向下箭头，而不是发送向上/向下按键。我的应用程序有一个`ContextMenuStrip`叫做`menu`. 这是代码。

在初始化中：

```
 menu.VisibleChanged += (s, e) =>
    {
        if (menu.Visible)
        {
            MouseWheel += ScrollMenu;
            menu.MouseWheel += ScrollMenu;
        }
        else
        {
            MouseWheel -= ScrollMenu;
            menu.MouseWheel -= ScrollMenu;
        }
    }; 
```

滚动菜单功能：

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
private static extern void mouse_event(uint dwFlags, uint dx, uint dy, uint cButtons, uint dwExtraInfo);

private void ScrollMenu(object sender, MouseEventArgs e)
{
    Point origin = Cursor.Position;
    int clicks;

    if (e.Delta < 0)
    {
        Cursor.Position = menu.PointToScreen(new Point(menu.DisplayRectangle.Left + 5, menu.DisplayRectangle.Bottom + 5));
        clicks = e.Delta / -40;
    }
    else
    {
        Cursor.Position = menu.PointToScreen(new Point(menu.DisplayRectangle.Left + 5, menu.DisplayRectangle.Top - 5));
        clicks = e.Delta / 40;
    }

    for (int i = 0; i < clicks; i++)
        mouse_event(0x0006, 0, 0, 0, 0);//Left mouse button up and down on cursor position
    Cursor.Position = origin;
} 
```

我无法获得`mouse_event`单击特定位置的功能，因此我移动了光标，单击，然后将光标移回。它似乎不是最干净的，但它确实有效。

# php - .NET 服务器上的 PHP 配置 - URL 重定向

> ID：13139075
> 
> 赞同：1
> 
> 时间：2012-10-30T12:33:37.307
> 
> 标签：php, .net, url-rewriting, umbraco, forwarding

我有一个带有博客的服务器，现在的配置是一团糟。

它是一个运行 umbraco 的 .NET 服务器，并且该博客由其中的 wordpress 托管。您可以想象 umbraco 的 web.config 似乎覆盖了 PHP 设置。

我想要的是从“blog.mydomain.com”访问的博客“www.mydomain.com/blog”。我已经在 blog.mydomain.com 上添加了一条 A 记录，并等待看看这是否可行，但我不确定我是否还需要一些 301 重定向？

更重要的是，所有博客链接都崩溃了，因为 mydomain/blog/ 没有转到 index.php（Umbraco 使 default.aspx 成为默认页面，即使 index.php 在 IIS 上被列为默认页面）。

是否有重写规则将博客文件夹中的所有空斜杠默认为 index.php？

我发现这有点前途，但只适用于父文件夹：我需要一些适用于博客所有子文件夹的东西

```
<urlrewritingnet xmlns="http://www.urlrewriting.net/schemas/config/2006/07">
    <rewrites>
<add name="gotoindex"
               redirect="Domain"
               ignoreCase="true" rewriteUrlParameter="IncludeQueryStringForRewrite"
               virtualUrl="http://mysitename/"
               redirectMode="Permanent"
               destinationUrl="http://mysitename/index.php" />
        </rewrites>
</urlrewritingnet> 
```

我也希望保留查询字符串。目前链接看起来像这样：[http://mydomain.com/blog/?m=201208](http://mydomain.com/blog/?m=201208) 理想情况下我希望转发到[http://mydomain.com/blog/index.php?m=201208](http://mydomain.com/blog/index.php?m=201208)

非常感谢任何帮助。真的迷路了！！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:13:11.633

我已经解决了。

关键是要做到这一点：

```
<add key="umbracoReservedPaths" value="~/umbraco,~/install/, /blog/" /> 
```

通过向 web.config 添加例外，博客文件夹不再绑定 umbraco 配置，并且 PHP 的 IIS 设置开始工作！

此规则还修复了从 blog.mydomain.com 到 www.mydomain.com/blog 的重定向

将此键添加到 UrlRewriting.config

```
<add name="blogfix" virtualUrl="^http\://blog.mydomain.co.uk/(.*)"
                    rewriteUrlParameter="ExcludeFromClientQueryString"
                    destinationUrl="http://www.mydomain.co.uk/blog/$1"
                    redirect="Domain"
                    redirectMode="Permanent"
                    ignoreCase="true" /> 
```

# performance - OpenGL 视口分辨率和性能

> ID：13139080
> 
> 赞同：0
> 
> 时间：2012-10-30T12:34:03.673
> 
> 标签：performance, opengl, window, resolution, viewport

我想允许用户通过降低分辨率来调整窗口模式性能，而不改变必须保持固定的实际窗口的大小。如果我用 glViewport 改变它，它实际上会处理更少的片段，还是纯粹的视觉转换？假设我在我的着色器中进行了早期深度测试，如果这很重要的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:39:48.347

如果将视口设置为窗口大小的子集，则将绘制更少的片段。问题是您是否真的希望您的渲染只覆盖窗口的一部分？

您通常做的是渲染到具有较低分辨率的[帧缓冲区对象 (FBO) 。](http://www.opengl.org/wiki/Framebuffer_Object)作为最后一步，您将 FBO blit 到默认帧缓冲区（将结果缩放到进程中的窗口大小）。

当您渲染到 FBO 时，您必须将 glViewport 设置为 FBO 的分辨率。

# asp.net-mvc - MVC，实体框架，外键数据不显示创建新项目

> ID：13139081
> 
> 赞同：2
> 
> 时间：2012-10-30T12:34:05.683
> 
> 标签：asp.net-mvc

使用 MVC4 和 EF5 代码优先。参考具有外键的行创建新数据记录时遇到问题。列出创建的条目一切看起来都很好：

```
@foreach (var item in Model) {
   @Html.DisplayFor(modelItem => item.Location.name)
   @Html.DisplayFor(modelItem => item.Action.name)
   ... 
```

创建引用无法显示外部内容（名称）的新记录：

```
 ...
    @Html.LabelFor(model => model.locationID)
    @Html.DisplayFor(model => model.Location.name)

    @Html.LabelFor(model => model.actionID)
    @Html.DisplayFor(model => model.Action.name)
    ... 
```

外键正确填写在控制器中（参见简单示例）

```
 public ActionResult Create()
    {
        Timerecord tm = new Timerecord();

        tm.currentTime = DateTime.Now;
        tm.locationID = 1;
        tm.actionID = 5;

        ViewData.Model = tm;
        return View();
    } 
```

并且该记录已在数据库中正确创建。只是名称不会显示在视图上。我是否必须在创建期间自己获取关联的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:31:11.030

`SaveChanges()`我在您的代码中没有看到任何调用。您需要调用它以使外键属性加载导航属性。或者，就像您在问题末尾所说的那样，明确加载它们。

# java - JAVA 的 JSP 和 HTML 解析器

> ID：13139083
> 
> 赞同：4
> 
> 时间：2012-10-30T12:34:10.053
> 
> 标签：java, parsing, jsp, jsoup, jericho-html-parser

我一直在使用 Jsoup 来解析我的 HTML 文件，到目前为止它做得很好。但是，它无法解析任何服务器标签（ <% ... %> ）。我决定扩展它，但我找不到一种简单的方法来扩展它的[Parser](http://jsoup.org/apidocs/org/jsoup/parser/Parser.html)和所有那些私有/包级别的类（即 TreeBuilder、TransitionState ......等）......

所以我开始研究[Jericho](http://jericho.htmlparser.net/docs/index.html)，因为它声称它可以解析服务器标签 - 但是，它的文档太差了，我什至无法轻松入门。并且似乎它的 API 不像 Jsoup 提供的那样友好 - 提取一些节点并移动它并不是那么直接......

我想知道以前是否有人遇到过类似的情况以及如何解决？简而言之，我只想用Java解析JSP文件。（嗯..请不要让我自己实现一个；p）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:15:46.200

最后我得到一个解决方法：将服务器代码块放在 HTML 注释块中，以便 1）服务器代码可以正确执行；2) Jsoup 可以将整个块作为 HTML 注释节点进行处理，而无需触及内部的任何内容。

例如

```
<!--
<%@ page language="java" errorPage="/error.jsp" pageEncoding="UTF-8" contentType="text/html;charset=UTF-8" %>
<%@ page import="com.systemcrossed.groupbuystart.webapp.display.DisplayHelper" %>
<%@ page import="com.systemcrossed.groupbuystart.webapp.util.JsonUtil" %>
<%@ page import="org.apache.commons.lang.StringEscapeUtils" %>
<%@ include file="/_sys/pages/public/incl/jspCommon.jsp" %>
-->
<!--<%
    // Java code here
%>-->
<html>
<head>
    ... html stuff 
```

现在对我来说效果很好！希望遇到同样问题的朋友能得到帮助！;)

# django - 覆盖 Django 模型中的 get_FIELD_display 方法

> ID：13139084
> 
> 赞同：1
> 
> 时间：2012-10-30T12:34:10.770
> 
> 标签：django

假设我`field`在模型中调用了一个字段，其中一个`choices`参数定义了该方法要返回的值`get_field_display`。

我需要该`get_field_display`方法根据另一个字段返回不同的值。有什么办法可以覆盖`get_field_display`吗？

这不起作用：

```
def get_field_display(self):
    if self.other_field == 1:
        return 'Other value'

    return super.get_field_display(self) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:09:05.773

您不能调用`super`，因为该函数不是由父类而是由`ModelBase`元类定义的。试试这个：

```
def get_field_display(self):

    if self.other_field == 1:
        value = 'Other value'
    else:
        field_object = self._meta.get_field('field')
        value = self._get_FIELD_display(field_object)

    return value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-14T15:43:50.870

您可以做的是在同一模型中创建不同的功能，然后对其进行修补。例如，在 admin.py 中，您可以执行以下操作：

`ClassName.get_field_display = ClassName.get_patched_field_display`

这不是很“好”，但它对我有用。

# r - 写入制表符分隔的文件或 csv 文件

> ID：13139085
> 
> 赞同：3
> 
> 时间：2012-10-30T12:34:15.340
> 
> 标签：r, export, csv

我有一个 RMA 规范化数据（来自 CEL 文件）并且想将它写入一个可以在 excel 中打开但有一些问题的文件。

```
library(affy)
cel <- ReadAffy()
pre<-rma(cel)
write.table(pre, file="norm.txt", sep="\t")
write.table(pre, file="norma.txt") 
```

输出在使用上述命令编写的文本文件中按行排列，因此当导出到 excel 时，格式错误，并且由于最大行数用完，许多信息被截断。输出看起来以下方式：

```
GSM 133971.CEL 5.85302 3.54678 6.57648 9.45634
GSM 133972.CEL 4.65784 3.64578 3.54213 7.89566
GSM 133973.CEL 6.78543 3.54623 2.54345 7.89767 
```

如何以正确的格式将其从 R 中的 CEL 文件写入记事本或 excel？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:22:17.413

您需要使用该`exprs`函数从标准化探针中提取值。就像是：

```
write.csv(exprs(pre), file="output.csv", row.names=FALSE) 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:52:04.633

我不完全清楚问题是什么，“正确格式”是什么意思？Excel 将难以处理巨大的表格，并且在 R 中使用 Bioconductor 进行分析可能是一种更好的方法，然后您可以将较小的结果或汇总表导出到 Excel。

不过，如果您希望按列写入文件，您可以尝试：

```
write.csv(t(pre),file="norm.txt") 
```

但是excel（至少曾经）允许比列多得多的行。

# signalr - Signalr：从 PersistentConnection 接收消息是如何在内部工作的？

> ID：13139093
> 
> 赞同：1
> 
> 时间：2012-10-30T12:34:32.437
> 
> 标签：signalr

我想知道 SignalR 客户端在建立连接后如何从服务器接收消息？`Connection.Send(message)`我的意思是，调用方法后，客户端内部会发生什么？

通过阅读 .NET 客户端代码，我发现`public event Action<string> Received`在`Connection`类中负责接收消息，但我找不到它是如何实现的。我需要知道它在内部是如何工作的，因为我想在 Java 上编写自己的客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T17:27:42.197

您可以在 github 上阅读 signalR 的完整来源：[https ://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

特别是，您可以在 [https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.Core/PersistentConnection.cs找到 PersistentConnection 的来源](https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.Core/PersistentConnection.cs)

# android - 多种 MIME 类型的意图过滤器

> ID：13139094
> 
> 赞同：3
> 
> 时间：2012-10-30T12:34:47.507
> 
> 标签：android, android-intent, android-activity, android-manifest, intentfilter

我的问题是如何`Activity`在 Manifest 文件中正确指定处理不同的 MIME 类型。我正在尝试创建一个`Activity`可以处理不同档案的文件，因此我将其添加到清单中，如下所示：

```
<activity
    android:name=".activity.ArchiveActivity"
    android:label="@string/title_activity_archive" >
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />

        <category android:name="android.intent.category.DEFAULT" />

        <data android:mimeType="application/zip" />
        <data android:mimeType="application/gzip" />
        <data android:mimeType="application/x-tar" />
        <data android:mimeType="application/java-archive" />
    </intent-filter>
</activity> 
```

不幸的是，这只适用于 .zip 文件。例如，当我尝试从另一个应用程序打开 .jar 存档时，它告诉我它无法找到合适的应用程序。提前致谢。

**编辑**事实证明，Android 无法理解最后三种 MIME 类型，因此我认为无法使用 Intents 在 Android 中打开 .jar 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T14:02:39.900

尝试这样的事情：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="application/zip" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="application/gzip" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="application/x-tar" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="application/java-archive" />
</intent-filter> 
```

# php - 更新值等于的值

> ID：13139099
> 
> 赞同：0
> 
> 时间：2012-10-30T12:35:04.450
> 
> 标签：php, mysql

目前正在接触 MYSQL 和 PHP，但仍然非常初学者。谁能指出我在这里做错了什么：

```
UPDATE mage_catalog_product_entity_text 
SET value=" . $row['value2'] . " 
WHERE value = " . $row['value']; 
```

我正在尝试将 value 设置为 value 等于其当前值的另一个变量。所以 value2 是我正在更新的内容，而 value 只是“测试”

我得到的错误是：

```
Unknown column 'test' in 'where clause' 
```

编辑：回显整个查询返回相同的错误，所以我决定发布我的整个代码，其中根本没有提到“测试”：

```
<?php // instead of <?

mysql_connect ("localhost","cpsdev_mage1","D******"); 
mysql_select_db ("cpsdev_mage1"); 

$sql = "select value from mage_catalog_product_entity_text WHERE Attribute_id = 64"; 
    $result = mysql_query ($sql) or die($myQuery."<br/><br/>".mysql_error()); 

while($row = mysql_fetch_array($result,MYSQL_ASSOC))
{
$lines = file('/media/dev/' . $row['value']);
echo "UPDATE mage_catalog_product_entity_text SET value=" . $lines . "WHERE value = '"     . $row['value']; . "'";
}

?> 
```

我在数据库中的行是： Attribute_id Value 64 Data 109 一些其他数据

编辑：已解决-我的错误是在建议的编辑中进入错误的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:40:35.883

在 SQL 中，字符串值用单引号字符分隔。

要在 SQL 中执行此类操作：

```
 UPDATE mage_catalog_product_entity_text 
    SET value= 'new'
    WHERE value = 'old' 
```

...在 PHP 中：

```
$sql = "UPDATE mage_catalog_product_entity_text " .
       " SET value= '" . $row['value2'] . 
       "' WHERE value = '" . $row['value'] . "'"; 
```

请注意在每个子句中添加了两个额外的单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:37:18.770

错误消息清楚地表明您尝试使用的表没有任何名为的**列**`test`。我建议`echo()`查询看看它到底是什么样子。此外，您的查询使用了不正确的语法，因为必须引用字符串值：

```
WHERE value='" . $row['value'] . "'"; 
```

甚至更好：

```
$query = sprintf(  "UPDATE `mage_catalog_product_entity_text` "
                 . "SET `value`='%s' WHERE `value`='%s'",
                   $row['value2'], $row['value']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:38:14.037

毫无疑问，您正在尝试检查该值是否为`test`. 引用您的字符串以执行此操作：

```
SET value='" . $row['value2'] . "'
WHERE value = '" . $row['value']; . "' 
```

但是你真的应该参数化你的查询，如果没有，转义你的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:39:04.870

我猜，您的专栏`value`是文本专栏。然后，您必须将 where 值括在引号中：

```
UPDATE mage_catalog_product_entity_text 
SET value='" . $row['value2'] . "'
WHERE value = '" . $row['value'] . "'"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T12:40:24.313

检查您是否正确引用。假设您的查询在双引号内：

```
$query = "UPDATE mage_catalog_product_entity_text" .
         "SET value='" . $row['value'] . "'" .
         "WHERE value = '" . $row['value2'] . "';"; 
```

（点只是连接字符串）

对于您编辑中的“回声”：

```
echo "UPDATE mage_catalog_product_entity_text SET value='$lines' WHERE value = '" . $row['value'] . "'"; 
```

那将是正确的格式，因为您使用双引号，标准变量 $lines 不需要在外面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T12:48:11.640

请查看准备好的查询（mysqli/pdo）。如果您的任何一个“值”的内容包含 SQL 代码并且会像普通 SQL 一样执行，那么您试图实现的目标可能是灾难性的。尤其要考虑用户提交的值。否则，请务必将 mysql_real_escape 与正确引用值结合使用。

# prolog - 对于了解 prolog 的人来说，这是一个简单的错误。没有句号导致错误

> ID：13139102
> 
> 赞同：2
> 
> 时间：2012-10-30T12:35:16.493
> 
> 标签：prolog

```
likes(a,b).
likes(b,d).
likes(c,e).
likes(d,f).
likes(e,h).

likes_trans(X,Y) :- likes(X,Z),likes_trans(Z,Y).
likes_trans(X,Y) :- likes(X,Y).
listfriends(X,R) :- findall(Y,likes_trans(X,Y),R).
likes_both(X,Y,R) := listfriends(X,P), listfriends(Y,S), member(R,P), member(S,P). 
```

为什么最后一行“likes_both”给我错误（加载文件时）

> 句号正文中的句号？无法重新定义

非常感谢任何建议，我知道我在这里遗漏了一些基本的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:42:17.190

看起来`:=`最后一行的应该替换为`:-`

```
likes_both(X,Y,R) :- listfriends(X,P), listfriends(Y,S), member(R,P), member(S,P).
/*  Here ---------^^ */ 
```

# php - 在 php 应用程序中对用户进行身份验证的最佳和安全方式

> ID：13139105
> 
> 赞同：0
> 
> 时间：2012-10-30T12:35:36.990
> 
> 标签：php, mysql, authentication

我需要知道我在 php 应用程序中使用的用户身份验证代码有多安全。

这是我的登录检查功能

```
// Is Login
//*********************************************************************************
public function isLogin()
{
    $validation = new Validation();

    if(!$validation->isEmpty($_SESSION["AdminId"]) && !$validation->isEmpty($_SESSION["AdminUsername"]) && !$validation->isEmpty($_SESSION["AdminName"]))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

我有一个身份验证文件，我从每个用户帐户页面的顶部调用它，如下所示

```
if (!$admin->isLogin())
{
    header("Location: index.php?type=warning&msg=" .urlencode(ADMIN_INVALID_LOGIN));
    exit();
} 
```

例如 Adminusername 的会话值是管理员的实际用户名，adminname 是管理员的字母名称，adminid 是 mysql 表中的记录 id，例如 $_SESSION["Adminusername"] = administrator 虽然我在加密后存储了这个值它。

我需要知道这是一种仅存储值并检查它们的安全方法，还是我需要某种高级功能以使其更安全，例如盐或时间检查等。

我会很感激你的建议和反馈。如果可能，您的身份验证代码/类。

提前致谢。阿马尔迪普·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:51:17.613

使用 session regenerate id 在每个请求中获取一个新 ID，这样你就可以防止会话劫持 .. 阅读本手册： http: [//php.net/manual/en/function.session-regenerate-id.php](http://php.net/manual/en/function.session-regenerate-id.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:22:46.713

> 我在加密后存储这个值

我不明白......你为什么要加密你的AdministratorName？

您肯定知道，用户不能随心所欲地操纵他的会话，因为会话位于服务器端，您的代码决定将什么写入会话数据。我认为，加盐​​或时间检查不会提高您的安全级别。

因为 HTTP 是无状态的，所以每个会话都由一个 id 标识，它主要保存在客户端的 cookie 中。您对该服务器的每个请求都包含此 SID，因为这是您的服务器可以识别访问者的唯一方式。

如果您使用 HTTP-Transport，您的数据（也包括您的 SID）将通过 Internet 发送而无需加密。因此，黑客可以读取您的 SessionID 并接管您的 Session（其中包含登录的用户数据）。为防止这种情况，您可以强制登录用户使用 HTTPS 连接。

如果您有可能将所有页面切换为仅限 https，请执行此操作。如果您必须在 http 和 https 之间切换（例如只有在用户登录时才使用 https），那么保证安全性变得非常困难！

# iphone - 调用 Popover 时使主视图变暗

> ID：13139106
> 
> 赞同：1
> 
> 时间：2012-10-30T12:35:46.523
> 
> 标签：iphone, objective-c, ios, xcode

有一个基本形式，按下按钮调用方法`performSegueWithIdentifier`，显示弹出窗口。在弹出框处于活动状态之前，如何使主视图窗口变黑（变暗）？

我尝试像这样使用库[SVProgressHUD](http://github.com/samvermette/SVProgressHUD) ：

```
- (IBAction)publishButtonAction:(id)sender {
    [SVProgressHUD showWithMaskType:SVProgressHUDMaskTypeBlack];
    [self performSegueWithIdentifier:@"fbshareSigue" sender:self];
    [SVProgressHUD dismiss];
} 
```

获得一瞬间 - 直到有一个弹出窗口。

如果我尝试这个，我必须在哪里插入这个代码？：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([[segue identifier] isEqualToString:@"fbshareSigue"]) {
        OFAFBShareViewController *svc = (OFAFBShareViewController *) [segue destinationViewController];
        UIStoryboardPopoverSegue *popoverSegue = (UIStoryboardPopoverSegue *)segue;
        svc.postBlock = self.postInitBlock;
        [svc setClosePopWindow:[popoverSegue popoverController]];
    }
}

    - (IBAction)publishButtonAction:(id)sender {
        UIView *dimView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
        dimView.backgroundColor = [UIColor blackColor];
        dimView.alpha = 0.5f;
        dimView.tag = 1111;
        dimView.userInteractionEnabled = NO;
        [self.view addSubview:dimView];

        [self performSegueWithIdentifier:@"fbshareSigue" sender:self];
}

  /* This code should be put in the other method where you are removing the popup.. Because it will remove the dim view. here is the wrong place for this code*/  

 /* for (UIView *view in [self.view subviews]) {
        if (view.tag == 1111) {
            [view removeFromSuperview];
        }
    }*/ 
```

昏暗的不行...

=====================

我有 View`OFAResultViewController`调用 Popover ( `OFAFBShareViewController`)：

```
...
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([[segue identifier] isEqualToString:@"fbshareSigue"]) {
        OFAFBShareViewController *svc = (OFAFBShareViewController *) [segue destinationViewController];
        UIStoryboardPopoverSegue *popoverSegue = (UIStoryboardPopoverSegue *)segue;
        svc.postBlock = self.postInitBlock;
        [svc setClosePopWindow:[popoverSegue popoverController]];
    }
}

- (IBAction)publishButtonAction:(id)sender {
    UIView *dimView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    dimView.backgroundColor = [UIColor blackColor];
    dimView.alpha = 0.5f;
    dimView.tag = 1111;
    dimView.userInteractionEnabled = NO;
    [self.view addSubview:dimView];
    [self performSegueWithIdentifier:@"fbshareSigue" sender:self];    
}
... 
```

在`OFAFBShareViewController`我试图关闭昏暗的视图：

```
...
- (IBAction)cancelButtonAction:(id)sender {
    [closePopWindow dismissPopoverAnimated:YES];
    for (UIView *view in [self.view subviews]) {
            if (view.tag == 1111) {
                [view removeFromSuperview];
            }
}
... 
```

但是又不行了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:07:49.877

当您显示弹出窗口时，您可以使用以下代码。

在 OFAFBShareViewController 中

```
- (void) loadView
{
       [super loadView]; 
       UIView *dimView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
        dimView.backgroundColor = [UIColor blackColor];
        dimView.alpha = 0.5f;
        dimView.tag = 1111;
        dimView.userInteractionEnabled = NO;
        [self.view addSubview:dimView];
} 
```

删除弹出窗口后，使用标签从超级视图中删除此视图。

iOS 5.0 之后还引入了公共 API 方法：

==================================================== ====

要删除视图，您可以使用以下代码：

```
 for (UIView *view in [self.view subviews]) {
                if ([view.tag == 1111]) {
                    [view removeFromSuperview];
                }
            } 
```

保留您的 Remove Dim View 代码不变。`super.view`只能再次更改`self.view`。

那它会为你工作。

希望这对你有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T18:37:39.003

创建弹出框时，在当前视图中添加一个暗淡的视图，并将当前视图添加为弹出框控制器的 UIPopoverControllerDelegate：

1.  添加dimView：

    ```
    let dimView = UIView(frame: view.frame)
    view.addSubview(dimView)
    dimView.backgroundColor = UIColor.blackColor()
    dimView.alpha = 0.5
    dimView.tag = 1234
    dimView.userInteractionEnabled = false
    view.addSubview(dimView) 
    ```

2.  添加原始视图作为 popoverController 的委托：

    ```
    popoverViewController!.delegate = self 
    ```

然后，为了在 popover 关闭时移除 dimView，将当前视图设置为实现 UIPopoverControllerDelegate，并实现 popoverControllerDidDismissPopover 函数。在此函数中，删除 dimView：

```
extension MyOriginViewController: UIPopoverControllerDelegate {

    func popoverControllerDidDismissPopover(popoverController: UIPopoverController) {
        for subView in view.subviews {
            if subView.tag == 1234 {
                 subView.removeFromSuperview()
            }
        }
    }
} 
```

# vba - 是否可以在用户的 主目录中为 VBA 中的共享库指定一个位置（在 Office for Mac 中）？

> ID：13139109
> 
> 赞同：6
> 
> 时间：2012-10-30T12:36:01.330
> 
> 标签：vba, ms-office

我目前正在使用类似于以下的 VBA 代码来指定共享库的位置，以用于从 Office 应用程序到桌面应用程序的通信（传递字符串）。VBA 代码/宏需要存在于加载项 (.ppa) 中。

```
Private Declare Sub sharedLibPassString CDecl Lib "/Users/myUserName/Library/Application Support/myCompanyName/MySharedLib.dylib" Alias "PassString" (ByVal aString As String) 
```

在来自 VBA 宏的代码中，我可以执行以下操作。

```
Call sharedLibPassString(myString) 
```

我的通信正常，但我想`/Users/myUserName/`用当前用户的主目录替换该部分。通常在 Mac 上，您会指定`~/Library/Application Support/...`，但`~/`语法不起作用，会产生“找不到文件”运行时错误。

我发现使用以下环境变量方法可以获得我`~/`需要的位置：

```
Environ("HOME") 
```

但是，我看不出有一种方法可以使这部分`CDecl Lib`陈述成为可能，因为据我所知，`Environ`它是在运行时评估的。

`~/`有没有办法在 VBA的用户主目录（）中指定共享库的位置？

* * *

以下是关于我的环境/方法的一些说明：

*   我使用的是 Mac，但我相信如果有解决方案，它会在 PC 上类似。
*   我认为这无关紧要，但我使用的 Office 应用程序是 PowerPoint (2011)。
*   我尝试访问应用程序支持目录中的区域而不是共享库的默认位置的原因是因为我希望桌面应用程序将共享库放置在没有安装程序的位置，并且不需要用户或管理员的权限。如果有更好的解决方案或位置来完成相同的任务，这也将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:53:17.690

我没有Mac，所以这是一个不完整的答案，我不知道它是否会有所帮助，但这是一些想法。

我知道在 Windows 上，VB 不会加载外部库，直到您第一次尝试调用用它声明的函数，如果您在声明语句中仅指定文件名，它将使用系统路径来查找它。一旦我做了你正在做的同样的事情，从动态路径加载一个库，只指定一个文件名，然后在加载它之前进行系统 API 调用以将当前工作目录设置为库的目录。更改 PATH 环境变量也可能有效。

第二个想法：您可以将路径硬编码到 /tmp 目录中的文件名；然后在加载之前自动将所需的库复制到该位置。注意文件正在被另一个进程使用，但这只是一个错误，如果它与您想要的文件版本不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:33:12.707

很抱歉给了一个很长的回应，我只是想确保我解释得很好。

从这个页面[（声明声明的剖析）](http://msdn.microsoft.com/en-us/library/office/aa671659.aspx)我们读到

> Lib 关键字指定哪个 DLL 包含该函数。请注意，DLL 的名称包含在Declare 语句中的**字符串中。**（重点补充）

从实验来看，如果我尝试提供除字符串常量之外的任何内容，VBE 会责骂我。

我知道的唯一解决方法需要在运行时重写字符串常量。

这是一个如何做到这一点的示例：假设您的 delaration 声明位于当前项目的 Module1 中，并且您故意在模块顶部以这种格式编写声明：

```
Private Declare Sub sharedLibPassString CDecl Lib _
"/Users/myUserName/Library/Application Support/myCompanyName/MySharedLib.dylib" _
Alias "PassString" (ByVal aString As String) 
```

您可以通过代码访问该模块（需要开发人员宏设置下列出的信任中心中的 VBA 权限）：

```
Dim myModule
set myModule = ActivePresentation.VBProject.VBComponents("Module1").CodeModule 
```

获得 CodeModule 后，可以直接替换第 2 行：

```
myModule.ReplaceLine 2, Environ("HOME") & " _" 
```

**任务完成！**

如果你这样做，你将需要在尝试调用你声明的 sub 之前更新路径。执行中必须有一个中断，以使 VBA 能够识别更改。此外，您将无法在中断模式下修改代码。

现在，如果我这样做，我想确保我替换了正确的行，而不是破坏代码。您可以通过调用它来检查第二行的内容，`myModule.Lines(2,1)`这将返回该行的字符串值。

但是，这是一个更强大的解决方案，它将找到正确的行，然后替换它（假设 myModule 已经按上面列出的方式定义）：

```
Dim SL As Long, EL As Long, SC As Long, EC As Long
Dim Found As Boolean
SL = 1     ' Start on line 1
SC = 1     ' Start on Column 1
EL = 99999 ' Search until the 99999th line
EC = 999   ' Search until the 999th column
With myModule
    'If found, the correct line will be be placed in the variable SL
    'Broke search string into two pieces so that I won't accidentally find it.
    Found = .Find("/Users/myUserName/Library/Application Support/myCompanyName/" & _
             "MySharedLib.dylib", SL, SC, EL, EC, True, False, False)
    If Found = True Then
        'Replace the line with the line you want, second paramater should be a string of the value.
        .ReplaceLine SL, Environ("HOME") & " _"
    End If
End With 
```

# java - webdriver 在关闭 iframe 弹出窗口时挂起

> ID：13139111
> 
> 赞同：0
> 
> 时间：2012-10-30T12:36:08.803
> 
> 标签：java, html, iframe, selenium, webdriver

我有一个通过 iFrame 创建弹出窗口的页面。

*   我使用 switchTo().frame("LookupWindow") 切换到弹出窗口。
*   然后我成功输入了一些文本并查找了一个值
*   找到值后，我单击它（仍在弹出窗口中）
*   弹出窗口现在关闭（因为我点击了弹出窗口中的值）

这都是预期的行为并且工作正常。但是，代码在单击该值的语句之后挂起（这反过来又关闭了窗口）。它永远等待，根本不报告错误。

想法？解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:57:56.510

首先你需要使用

switchTo().window("LookupWindow") 将控件切换到弹出窗口。

关闭后，您需要使用以下命令切换回主/上一个窗口。

```
driver.switchTo.defaultContent(); 
```

请参阅这篇[文章](http://santoshsarmajv.blogspot.in/2012/04/how-to-switch-control-to-pop-up-window.html)以了解有关如何在窗口之间切换控件的更多信息。

# java - 从 Tomcat 7 到 Weblogic 10.3.5 的战争部署不起作用

> ID：13139116
> 
> 赞同：1
> 
> 时间：2012-10-30T12:36:18.720
> 
> 标签：java, web-applications, servlets, weblogic, weblogic-10.x

我正在尝试将战争文件部署到 Weblogic 10.3.5 中，但它现在可以正常工作。在 Tomcat 7 中成功部署了相同的文件，并且应用程序运行正常。

但是，当我尝试使用部署计划的默认设置等在 Weblogic 中部署它时，它会在我拥有的 ServletContextListener 实现中引发 NullPointerException 错误。我的问题是：我是否需要更改应用程序中的某些内容，例如添加 weblogic.xml 文件？我需要别的东西吗？

我注意到，如果我将我的部署指向包含爆炸战争内容的文件夹，应用程序运行时会出现一些错误，但至少主屏幕可以正常打开（它是基于小程序的应用程序）。

**更新

这是我尝试启动应用程序时遇到的异常。

```
####<Oct 29, 2012 5:27:12 AM PDT> <Warning> <HTTP> <ip-0A2E9E72> <AdminServer> 
<[STANDBY] ExecuteThread: '4' for queue: 'weblogic.kernel.Default (self-tuning)'> 
<<WLS Kernel>> <> <> <1351513632838> <BEA-101162> 
<User defined listener artemispm.web.ui.gwt.server.A7WebStartupListener failed: 
java.lang.NullPointerException.java.lang.NullPointerException
at java.util.Hashtable.put(Hashtable.java:394)
at java.util.Properties.setProperty(Properties.java:143)
at java.lang.System.setProperty(System.java:729) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:32:11.260

好的，我弄清楚了问题所在。当我尝试调用时，Weblogic 返回 null

```
String path = servletContextEvent.getServletContext().getRealPath("/"); 
```

然后我试图将该路径变量添加到系统属性中，并且根据 java 文档，当我们尝试将空值添加到 HashMap 时，它会抛出 NullPointerException。

因此，为了使 Web 应用程序能够检索真实路径，我们需要从 Weblogic 的域中配置一个属性。我去了 Weblogic 的控制台，然后单击域名 -> Web 应用程序选项卡。找到 Archived Real Path Enabled 选项并检查它。您需要重新启动服务器。

谢谢大家，

乔

# html - CSS - 停用顶部 div

> ID：13139124
> 
> 赞同：1
> 
> 时间：2012-10-30T12:36:54.023
> 
> 标签：html, css, rotation

如何停用顶部 DIV 以便我可以选择它下面的内容？

检查我在这里做了什么：http: [//jsfiddle.net/zE5Ze/2/](http://jsfiddle.net/zE5Ze/2/)

```
#triangle_w {
    width: 1000px;
    height: 178px;
    overflow: hidden;
    position: fixed;
    left: -24px;
    top: -82px;
    /*outline: 1px solid pink;*/

    -moz-transform: rotate(-10deg);
    -webkit-transform: rotate(-10deg);
}
#triangle {
    width: 961px;
    height: 176px;
    background: url('http://i.imgur.com/FTGa2.png') no-repeat;
    position: absolute;
    left: 10px;
    bottom: -80px;
    /*outline: 1px solid red;*/

    -moz-transform: rotate(10deg);
    -webkit-transform: rotate(10deg);
}
#triangle #menu {
    -moz-transform: rotate(-10deg);
    -webkit-transform: rotate(-10deg);
    /*outline: 1px solid red;*/
} 
```

没有旋转： http: [//jsfiddle.net/zE5Ze/5/](http://jsfiddle.net/zE5Ze/5/) 如您所见，红色轮廓内的区域不可选择。

有没有办法做到这一点而不必摆弄 CSS 旋转？我想停用三角形，只保留菜单和拇指活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:38:48.013

### 简单的。给一个`z-index`。

```
#triangle #menu a {z-index: 5;} 
```

### 小提琴：http: [//jsfiddle.net/zE5Ze/3/](http://jsfiddle.net/zE5Ze/3/)

或者设置一个**`width`**！

```
#triangle_w {width: 100px;} 
```

### 小提琴：http: [//jsfiddle.net/zE5Ze/4/](http://jsfiddle.net/zE5Ze/4/)

# ruby - 如何跟踪变量何时初始化并最终销毁

> ID：13139130
> 
> 赞同：0
> 
> 时间：2012-10-30T12:37:02.263
> 
> 标签：ruby

大概我有一个实例变量`@foo`

它设置在内部`def initialize`，因此我可以跟踪它何时初始化。

但是，我还需要跟踪它何时被破坏。

这有什么“钩子”吗？就像`method_defined`或`included?`

像`instance_variable_destroyed foo`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:52:35.530

你基本上钩住了垃圾收集器。您需要使用define_finalizer。

```
define_finalizer(@foo, proc {|id| puts "Destroyed #{id}"}) 
```

# c# - 一个通用的测试数据构建器——它会掩盖模式的美吗？

> ID：13139131
> 
> 赞同：1
> 
> 时间：2012-10-30T12:37:05.527
> 
> 标签：c#, unit-testing, design-patterns, moq

我已经为单元测试制作了一个通用数据构建器，因为我厌倦了一次又一次地实现构造函数和 Build 方法。这是否掩盖了图案的美丽（我真的很喜欢）？

这是我的通用构建器（在 C# 中使用 Moq 构建）：

```
public class GenericMockBuilder<T> where T: class
{
    private readonly Mock<T> _objectMock = new Mock<T>(); 

    protected Mock<T> ObjectMock
    {
        get { return _objectMock; }
    }

    public T Build()
    {
        return _objectMock.Object; 
    }
} 
```

这是一个示例接口及其继承通用接口的具体构建器：

```
public interface IFoo
{
    int Bar();
}

public class FooBuilder: GenericMockBuilder<IFoo>
{
    public FooBuilder WithBar(int barValue)
    {
        base.ObjectMock.Setup(x => x.Bar()).Returns(barValue);
        return this;
    }

} 
```

构建器将像这样构造一个 foo 模拟：

```
 IFoo fooMock = new FooBuilder().WithBar(12).Build(); 
```

我很想听听意见和改进建议。

**编辑（添加了 Eventraising 示例）：**

```
public class FooBuilderWithEvent: GenericMockBuilder<IFoo>
{

    public FooBuilderWithEvent RaiseEvent(FooEventArgs fooEventArgs)
    {
        base.ObjectMock.Raise(m => m.FooEvent += null, fooEventArgs); 
        return this; 
    }

} 
```

Building Mock and raise 事件如下所示：

```
 FooBuilderWithEvent fooBuilderWithEvent = new FooBuilderWithEvent(); 
        IFoo fooMock = fooBuilderWithEvent.Build();

        //Create testobject and prepare for event here

        fooBuilderWithEvent.RaiseEvent(new FooEventArgs()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:44:57.123

*优点*

*   漂亮的特定领域的流畅界面

*缺点*

*   另一个没有人熟悉的界面（我和我认为许多其他开发人员在使用 Moq 标准流畅界面的模拟设置中没有看到任何复杂的东西）
*   为每个模拟接口创建构建器类（是的，您只能为复杂的模拟创建构建器，但是使用两个不同的模拟接口可能会使开发人员感到困惑）
*   为每个模拟成员创建设置方法

不知道您为什么要求 Moq 示例，因为您已经在构建器中拥有了所有这些代码：

```
var mock = new Mock<IFoo>();
mock.Setup(foo => foo.Bar()).Returns(42); 
```

如果您对 lambda 和`mock.Object`调用感到困惑，请尝试 RhinoMocks：

```
Exect.Call(foo.Bar()).Return(42); 
```

另外我有一个问题 -*你将如何*只使用模拟对象实例来引发事件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:06:24.910

必须在模拟框架上构建外观表明它不适合您。为什么不尝试另一个。我个人已从 Moq 切换到 NSubstitute：

你自己的例子：

```
IFoo fooMock = Substitute.For<IFoo>();
fooMock.WithBar(12).Returns(10); 
```

或者，如果您只想检查该方法是否被调用：

```
//arrange
IFoo fooMock = Substitute.For<IFoo>(); 

//act
fooMock.WithBar(12);

//assert
fooMock.Received().WithBar(12); 
```

# git - 为什么使用 cygwin 时 git svn clone 失败？

> ID：13139133
> 
> 赞同：3
> 
> 时间：2012-10-30T12:37:15.667
> 
> 标签：git, svn, version-control, cygwin, git-svn

```
 git svn clone https://192.168.11.115/svn/xx/test/
Initialized empty Git repository in /cygdrive/d/xx/test/.git/
Can't load '/usr/lib/perl5/vendor_perl/5.14/i686-cygwin-threads-64int/auto/SVN/_Core/_Core.dll' for module SVN::_Core: No such file or directory at /usr/lib/perl5/5.14/i686-cygwin-threads-64int/DynaLoader.pm line 190.
 at /usr/lib/perl5/vendor_perl/5.14/i686-cygwin-threads-64int/SVN/Base.pm line 59
BEGIN failed--compilation aborted at /usr/lib/perl5/vendor_perl/5.14/i686-cygwin-threads-64int/SVN/Core.pm line 5.
Compilation failed in require at /usr/lib/git-core/git-svn line 41. 
```

这令人困惑……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:43:28.733

这可能是因为在[这个线程](http://cygwin.com/ml/cygwin/2009-12/msg00511.html)中，您没有安装 sqlite3。

```
$ cygcheck -l libsqlite3_0
/usr/bin/cygsqlite3-0.dll 
```

> > 我不确定为什么您的系统中缺少此功能。
> > `subversion-perl`取决于颠覆，这取决于`libsqlite3_0`.
> 
> `libsqlite3_0`不安装任何dll，`sqlite3`包安装dll。
> 这也解决了其他人报告的 svn 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T08:01:15.537

我认为你的 subversion-perl 包的版本与你的 subversion 包的版本不匹配。

我遇到了同样的问题，因为我使用的是 subversion 1.7 并且 git-svn 安装了 subversion-perl 1.8 作为依赖项。将 subversion-perl 降级到 1.7 解决了这个问题。

# ireport - 子报表未显示在主 Jasper 报表 ireport 中

> ID：13139137
> 
> 赞同：1
> 
> 时间：2012-10-30T12:37:30.123
> 
> 标签：ireport

我只是生成了 1 个主报表和 1 个子报表，问题是当我预览子报表时它正确显示所有字段但是当我预览主报表时子报表字段未显示在主报表中。

任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:02:01.560

在我看来，您没有指定任何连接表达式。常用的连接表达式是
`$P{REPORT_CONNECTION}`。
这指示 ireport 也将主报表的数据源视为子报表的数据源。希望这可以帮助。

# http - Flash 范围如何帮助在 JSF2.0 中实现 PostRedirectGet (PRG) 模式

> ID：13139139
> 
> 赞同：4
> 
> 时间：2012-10-30T12:37:32.667
> 
> 标签：http, redirect, post, jsf-2, get

我正在阅读[关于 JSF 中 PRG 模式的 Balusc 博客，](http://balusc.blogspot.in/2007/03/post-redirect-get-pattern.html)其中提到：

> 本文针对 JSF 1.2。对于 JSF 2.0，使用新的 Flash 范围可以更轻松地实现这一点。

我想知道`flash`范围如何帮助我们实现同样的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:15:40.600

在渲染响应阶段之前调用[`Flash#setKeepMessages()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/Flash.html#setKeepMessages%28boolean%29)以`true`指示 JSF 将人脸消息存储在 flash 范围内，并将`faces-redirect=true`查询字符串参数添加到结果以执行重定向。

```
public String submit() {
    // ...

    FacesContext context = FacesContext.getCurrentInstance();
    context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Success!", null));
    context.getExternalContext().getFlash().setKeepMessages(true);
    return "nextpage?faces-redirect-true";
} 
```

这样就不需要一个阶段监听器，它从面部上下文中收集面部消息并将它们存储在重定向之前的会话中，并在 firstnext 请求时将它们从会话中删除，并在重定向后将它们重新添加到面部上下文中。

闪光范围的工作方式大致相同。消息通过唯一标识符存储在会话中，该标识符又作为 cookie 在响应中传递，并且这些消息（和 cookie）在第一个下一个请求中从会话中删除，该请求已将 cookie 传回（即，毕竟，这是一个更健壮的实现，尽管最终用户在*完全相同*的时刻在同一个会话上发送 2 个 HTTP 请求的可能性很小——或者它必须是一个机器人）。

# sql - SQL Server 2008 计算错误

> ID：13139140
> 
> 赞同：0
> 
> 时间：2012-10-30T12:37:36.727
> 
> 标签：sql, sql-server, sql-server-2008

这是我正在运行的查询

```
Select (100/18)*18 
```

我得到的答案是 90。我已经尝试将每个数字也声明为小数，并且我得到了值`100.0008`，但是当我用变量作为浮点数进行计算时，答案在“100”处是正确的，所以有人知道为什么 SQL 计算像这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T12:42:16.720

因为它会首先取消括号

所以

```
Select (100/18)*18 
```

will (100/18) = 5.555555 但它假设两个数字都是 int 所以它将结果转换为 int 所以它会返回 5

所以现在`5*18 = 90`

如果您想要正确的结果，请改为执行此操作`Select (100*18)/18`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:52:30.807

为了得到想要的结果，你应该尝试这样的事情：

```
Select CEILING((100/18.0)*18) 
```

当你这样做时，

```
Select (100/18)*18 
```

sql server 将运算视为整数除法，并将 select 100/18 as 5 instaed of 5.55555....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:51:41.447

尝试表达 numders ac 十进制数

```
SELECT (100.0/18)*18 
```

和

```
SELECT ROUND((100.0/18)*18,2) 
```

...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:42:53.367

你可以试试这个

```
select abs(18*100/18) 
```

# excel - 在excel中显示xslt格式的数据

> ID：13139145
> 
> 赞同：0
> 
> 时间：2012-10-30T12:37:50.453
> 
> 标签：excel, xslt

我编写了一个测试代码，它从 XML 文件 (Data.xml) 读取数据并使用 XSLT 文件 (XSLTFile1.xslt) 过滤掉所需的记录并相应地对其进行格式化。此输出保存在另一个 output.xml 文件中。到目前为止，它工作正常。现在我想要的是在 excel 表中按原样显示这个输出。到目前为止，我能够将这些数据作为一个整体转储到 Excel 工作表中，但我想指定一些约束： • 我希望如果我有红色输​​出，则 Excel 单元格颜色也应该是红色的。• 我想指定一个像 G12 或 (12:7) 这样的单元格位置，我想在其中显示该数据。

```
DataSet dataSet = new DataSet();
dataSet.ReadXml("Data.xml");

System.IO.FileStream fs = new System.IO.FileStream(
"Customers.htm", System.IO.FileMode.Create);

//Create an XmlTextWriter for the FileStream.
System.Xml.XmlTextWriter xtw = new System.Xml.XmlTextWriter(
fs, System.Text.Encoding.Unicode);

//Transform the XML using the stylesheet.
XmlDataDocument xmlDoc = new XmlDataDocument(dataSet);
System.Xml.Xsl.XslTransform xslTran = new System.Xml.Xsl.XslTransform();
xslTran.Load("XSLTFile1.xslt");
xslTran.Transform(xmlDoc, null, xtw);

//Open the HTML file in Excel.
Microsoft.Office.Interop.Excel.Application oExcel = Globals.ThisAddIn.Application;
oExcel.Visible = true;
oExcel.UserControl = true;
Workbooks oBooks = oExcel.Workbooks;
object oOpt = System.Reflection.Missing.Value;
oBooks.Open("customers.htm", oOpt, oOpt, oOpt,
oOpt, oOpt, oOpt, oOpt, oOpt, oOpt, oOpt, oOpt,
oOpt, oOpt, oOpt); 
```

输出文件数据：

# iphone - 使用 ARM 程序集进行 Iphone 开发的利弊？

> ID：13139147
> 
> 赞同：1
> 
> 时间：2012-10-30T12:38:01.920
> 
> 标签：iphone, ios, assembly, arm

我正在试验`ARM`汇编语言，在此期间，我经常在代码中使用内联汇编块，`Objective-C`用于我的第一个 iOS 6 小型宠物项目。在此期间，我想知道：

1.  在大型商业 iOS 项目中使用 ARM 程序集是否合理？
2.  我可以用它优化一些瓶颈并超过编译器吗？
3.  在 iOS 上使用汇编语言的一些常见准则或最佳实践是什么：矢量化、[NEON](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489e/CJAJIIGG.html)、`SIMD`媒体优化（图像缩小等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:55:00.700

iPhone 只是一台小型计算机，因此使用汇编程序的权衡与使用任何其他机器完全相同。

一般的答案必须是不，你不想使用汇编程序。

话虽如此，但手动调整的非常低级别的代码可能会更快。确保您使用 Instruments 来正确识别您的瓶颈，并且在开始之前您已经使用更高级别的技术调整了您的代码。

在有意义的地方使用特殊的硬件功能，但请记住，您不需要使用汇编程序来获得其中大多数的好处。

# java - 从 Scala 程序生成 PGP 签名

> ID：13139149
> 
> 赞同：2
> 
> 时间：2012-10-30T12:38:07.753
> 
> 标签：java, scala, input, gnupg

我正在编写一个小的 Scala 脚本来为当前目录中的所有文件生成 PGP 签名。这是我写的：

```
object PGPSign {
    def main(args: Array[String]) {
    signFilesInDirectory(new java.io.File("."))
  }

  def signFilesInDirectory(dir: java.io.File) {
    if(!dir.exists())
      throw new java.io.FileNotFoundException
    if(!dir.isDirectory())
      throw new RuntimeException("Expecting directory")
    println("Signing files in: " + dir.getAbsolutePath())
    for{ file <- dir.listFiles 
      if !file.isDirectory //ignoring directories
      val fileName = file.getName()
      if !fileName.startsWith(".") //ignoring hidden files
    } { 
      ("gpg -ab " + fileName).!!
    }
  }
} 
```

在控制台中，该命令`gpg -ab FILE_NAME`将要求输入密码。当我执行我的 scala 脚本时，我在调用外部命令时遇到了这个异常：

```
gpg: cannot open tty `/dev/tty': Device not configured
Exception in thread "main" java.lang.RuntimeException: Nonzero exit value: 2
at scala.sys.package$.error(package.scala:27)
at scala.sys.process.ProcessBuilderImpl$AbstractBuilder.slurp(ProcessBuilderImpl.scala:131)
at scala.sys.process.ProcessBuilderImpl$AbstractBuilder.$bang$bang(ProcessBuilderImpl.scala:101)
at PGPSign$$anonfun$signFilesInDirectory$3.apply(PGPSign.scala:25)
at PGPSign$$anonfun$signFilesInDirectory$3.apply(PGPSign.scala:20)
at scala.collection.TraversableLike$WithFilter$$anonfun$foreach$1.apply(TraversableLike.scala:743)
at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:34)
at scala.collection.mutable.ArrayOps.foreach(ArrayOps.scala:38)
at scala.collection.TraversableLike$WithFilter.foreach(TraversableLike.scala:742)
at PGPSign$.signFilesInDirectory(PGPSign.scala:20)
at PGPSign$.main(PGPSign.scala:11)
at PGPSign.main(PGPSign.scala) 
```

我认为这与外部命令（在本例中为 gpg）请求一些输入这一事实有关。如果这是造成问题的原因（？），从 Scala 执行时，使任何外部命令（请求任意数量的输入）工作的最简单的通用方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:55:10.590

gpg 期望能够读取/写入 tty，除非 gpg 从交互式 shell 启动，否则该 tty 不可用。您应该使用该`--no-tty`选项来禁用此行为。此外，您可能需要批处理模式，启用`--batch`.

# extjs4 - 按 ID 选择 TreePanel 节点

> ID：13139150
> 
> 赞同：1
> 
> 时间：2012-10-30T12:38:09.313
> 
> 标签：extjs4

在 ExtJS 4.1 中，我通过它的 ID 选择一个 TreePanel 节点，如下所示：

```
var n = myTreePanel.getStore().getNodeById(id);
myTreePanel.selectPath(n.getPath()); 
```

.. 对于这样一个简单的操作，这似乎需要大量输入。有没有更简洁的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:25:23.380

我不相信有更简洁的方式来编写框架内置的代码。您始终可以编写自己的方法并将其添加到 Tree 类。

```
Ext.tree.Panel.addMembers({
    selectPathById: function(id){
        var me = this,
            node = me.getStore().getNodeById(id);
        if(node){
            me.selectPath(node.getPath());
        }
    }
});

/* Later, in your own code */
myTreePanel.selectPathById(id); 
```

# matlab - MATLAB中拟合高斯的最大值

> ID：13139151
> 
> 赞同：0
> 
> 时间：2012-10-30T12:38:13.857
> 
> 标签：matlab, max, curve-fitting, gaussian

我需要找到我已经拟合的最大高斯，下面是我的示例代码（忽略它对高斯的拟合非常糟糕的事实，它们只是我在变量托盘中随意使用的两个备用矩阵）

```
x=[10;2;6;1;7;5;3;4;8;9];
z1=[0;0;0;0;0;6;7;8;9;10];
cf1=fit(x,z1,'gauss1');
plot(x,z1,'.k')
hold on
plot(cf1,'r') 
```

你们能给我的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:45:04.397

这是非常基本的数学。看看输出

```
>> cf1

cf1 = 
     General model Gauss1:
     cf1(x) =  a1*exp(-((x-b1)/c1)^2)
     Coefficients (with 95% confidence bounds):
       a1 =       5.187  (-0.4711, 10.85)
       b1 =       6.834  (-0.768, 14.44)
       c1 =       5.945  (-8.833, 20.72) 
```

现在，借助[有关 Gaussians 的维基百科文章](http://en.wikipedia.org/wiki/Normal_distribution)，找到最大值很容易：

```
maximum_x = cf1.b1;
maximum_y = cf1.a1; 
```

对于您用来拟合相同函数的任何其他工具，同样如此——分别定义最大值的系数和`a1`位置。`b1``y``x`

# ruby-on-rails - 数字目录的正则表达式

> ID：13139157
> 
> 赞同：1
> 
> 时间：2012-10-30T12:38:32.853
> 
> 标签：ruby-on-rails, ruby, regex

我有这样的模板：

```
<h1>asd</h1>
...
<h1>asd</h1>
...
    <h2>asd</h2>
    ...
    <h2>asd</h2>
    ... 
```

如何将其转换为

```
<h1>1\. asd</h1>
...
<h1>2\. asd</h1>
...
    <h2>2.1\. asd</h2>
    ...
    <h2>2.2\. asd</h2>
    ... 
```

在 ruby​​ 1.8.7 中使用正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:00:47.843

使用可安装在 Ruby 1.8.7 上的 oniguruma，

```
string =<<X
<h1>asd</h1>
...
<h1>asd</h1>
...
    <h2>asd</h2>
    ...
    <h2>asd</h2>
    ...
X

puts string.gsub(/(?<=<h1>).*?(?=<h1>|\z)/m).with_index{|s, i|
  s = s.gsub(/(?<=<h2>).*?(?=<h2>|\z)/m).with_index{|s, j|
    "#{i+1}.#{j+1}. #{s}"
  }
  "#{i+1}. #{s}"
}

#=>
# <h1>1\. asd</h1>
# ...
# <h1>2\. asd</h1>
# ...
#     <h2>2.1\. asd</h2>
#     ...
#     <h2>2.2\. asd</h2>
#     ... 
```

# regex - 如何用正则表达式替换句子中引号内的点

> ID：13139162
> 
> 赞同：0
> 
> 时间：2012-10-30T12:38:47.260
> 
> 标签：regex

可以说有这样的事情

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。`"Vestibulum interdum dolor nec sapien blandit a suscipit arcu fermentum. Nullam lacinia ipsum vitae enim consequat iaculis quis in augue. Phasellus fermentum congue blandit. Donec laoreet, ipsum et vestibulum vulputate, risus augue commodo nisi, vel hendrerit sem justo sed mauris."`Phasellus ut nunc neque，id varius nunc。在 enim lectus、blandit et dictum at、molestie in nunc。Vivamus eu ligula sed augue pretium tincidunt sat amet ac nisl。`"Morbi eu elit diam, sed tristique nunc."`

变成这样

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。`"Vestibulum interdum dolor nec sapien blandit a suscipit arcu fermentum[dot] Nullam lacinia ipsum vitae enim consequat iaculis quis in augue[dot] Phasellus fermentum congue blandit[dot] Donec laoreet, ipsum et vestibulum vulputate, risus augue commodo nisi, vel hendrerit sem justo sed mauris[dot]"`Phasellus ut nunc neque，id varius nunc。在 enim lectus、blandit et dictum at、molestie in nunc。Vivamus eu ligula sed augue pretium tincidunt sat amet ac nisl。`"Morbi eu elit diam, sed tristique nunc[dot]"`

我以某种方式找到了一个正则表达式来选择所有“{sentence}”`"(.)+?"`或使用它们

`regex('"(.)+?"','[sentence]')`

但是我们可以做一些类似替换组内的点的事情吗？所以我可以得到上面例子的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:04:33.607

我不确定正则表达式是否能够自行满足您的需求。

您应该实现一个替换嵌套点的算法，直到字符串不再包含嵌套点。

例如在 PHP 中：

```
$string = 'He asked "Please." while she answered "No. Or maybe yes."';
var_dump($string);
while(preg_match('/"[^"]*\.[^"]*"/', $string)) {
    $string = preg_replace('/("[^"]*)\.([^"]*")/', '$1[dot]$2', $string);
}
var_dump($string); 
```

打印：

```
string 'He asked "Please." while she answered "No. Or maybe yes."' (length=57)
string 'He asked "Please[dot]" while she answered "No[dot] Or maybe yes[dot]"' (length=69) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:05:38.753

这就是我会做的。

```
echo
preg_replace_callback('~(?<!\\\)"(.+?)((?<!\\\)")~',
/*
Pattern:
--------
(?<!\\\)"       a double quote not preceded by a backward (escaping) slash
(.+?)           anything (with min 1 char.) between condition above and below
((?<!\\\)")     a double quote not preceded by a backward (escaping) slash
*/
// for anything that matches the above pattern
// the following function is called
create_function('$m',
'return preg_replace("~\.~","[dot]",$m[0]);'),
// which replaces each dot with [dot] and returns the match
$str); 
```

**编辑：**在评论中添加了解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:52:02.977

试试这个 `(\"[^\.]*)\.([^\"]*)`：`\1[dot]\2`

在我的编辑器中运行良好，但有时使用 $ 而不是 \ 代替（例如在 php 中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:27:25.830

使用 Javascript，我只需做一个基本的替换：

```
str = str.replace(/".+?"/g,function(m) {
    return m.replace(/\./g,'[dot]');
}); 
```

# regex - 无法弄清楚这个 perl 字符串替换

> ID：13139168
> 
> 赞同：0
> 
> 时间：2012-10-30T12:39:13.963
> 
> 标签：regex, perl

我想转换每次出现的`"\\192.168.0.2\"`with`"q:\"`

到目前为止，我想出了：

```
perl -i.bak -pe 's/\\\\192.168.0.2\\/q:\\/' report.txt 
```

这不会更改文件中的任何内容。我可以使用一些指导！谢谢

示例：处理的文件类型 2012 年 10 月 29 日上午 9:08:58 \\192.168.0.2\reports\report.xls

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:42:31.393

```
perl -i.bak -pe "s/\\\\192\.168\.0\.2\\/q:\\/" report.txt 
```

注意双引号

# magento - CSV 不会在 Magento 中导出

> ID：13139169
> 
> 赞同：1
> 
> 时间：2012-10-30T12:39:19.817
> 
> 标签：magento, csv

我在 WebController.php 中设置了以下代码

```
/**
* Export order grid to CSV format
*/
public function exportCsvAction()
{
    $fileName = sprintf('stores-%s.csv', date('Ymd'));
    $grid = $this->getLayout()->createBlock('adminhtml/web_web_grid');
    $this->_prepareDownloadResponse($fileName, $grid->getCsvFile());
} 
```

我不知道导致 CSV 无法导出的问题是什么。

显示以下错误 -

```
Fatal error: Call to a member function getCsvFile() on a non-object in
/var/www/projects/tmp/storelocator/app/code/local/Company/Web/controllers/Adminhtml/WebController.php
on line 0 
```

请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:43:18.243

这一行：

```
$grid = $this->getLayout()->createBlock('adminhtml/web_web_grid'); 
```

返回空值。该错误清楚地告诉您：

> 致命错误：在非对象上调用成员函数 getCsvFile()

你确定这个'adminhtml/web_web_grid'与一个块有关吗？

adminhtml 模块`Web/Web/Grid.php`的文件夹中是否有文件夹/文件？`Block`

例如，如果您没有重载 Mage_Adminhtml 模块，您应该`Mage_Adminhtml_Block_Web_Web_Grid`在文件夹中命名一个类`app/code/local/Mage/Adminhtml/Block/Web/Web/Grid.php`，这就是`createBlock('adminhtml/web_web_grid')`正在搜索的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:55:44.680

Please make sure that you calling right block(Block must be extended by Mage_Adminhtml_Block_Widget_Grid or it might be grid like) then use your code

You might test by following code by putting in action (its magento core code)..........

```
$fileName   = 'customer.csv';
$content    = $this->getLayout()->createBlock('adminhtml/customer_grid')->getCsvFile();
$this->_prepareDownloadResponse($fileName, $content); 
```

# f# - F# 中的预处理器指令缩进是否敏感？

> ID：13139178
> 
> 赞同：5
> 
> 时间：2012-10-30T12:40:04.367
> 
> 标签：f#

FSI 版本：11.0.50727.1

所以我正在编写一个 F# shell 脚本，我遇到了一些让我吃惊的东西。

当我这样做时：

```
#if INTERACTIVE
    #r "System.Data.dll"
    #r "FSharp.Data.TypeProviders.dll"
    #r "System.Data.Linq.dll"
#endif

open System 
```

将块粘贴到 FSI 时出现 FS0010 错误。但如果我没有缩进这些`#r`行，则不会出现 FS0010 错误。我只是有点惊讶预处理器行对缩进敏感。这是编译器问题还是这里有其他工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:00:42.547

*我认为规范和文档在这个主题上非常不清楚，但是规范在词法预处理器指令*和*编译器指令*之间做出了显着区别（参见[§12.4](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335819004%C2%A8)）：

> *编译器指令*是非嵌套模块或命名空间声明组中的声明，格式如下：
> 
> ```
> # id string ... string 
> ```
> 
> *词法预处理器指令* 、`#if`和`#else`类似于编译器指令`#endif`。`#indent "off"`有关`#if`, `#else`,的详细信息`#endif`，请参阅第 3.3 节。该`#indent "off"`指令在§18.4 中描述。

我的解释是，在运行主编译之前，*词法预处理器指令*实际上是由一些预处理器处理的，因此缩进对这些指令无关紧要。

另一方面，诸如`#r`,`#load`等指令`#time`稍后由编译器处理，因此它们需要匹配通常的 F# 缩进指南。

正如@unwind 所说，[文档](http://msdn.microsoft.com/en-us/library/dd233195.aspx)指出“缩进对于预处理器指令并不重要”，但我认为这仅适用于该文档页面上列出的预处理器指令（它们是*词法预处理器指令*而不是*编译器指令*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:42:43.220

根据[文档](http://msdn.microsoft.com/en-us/library/dd233195.aspx)，它必须是其他东西在起作用：

> 缩进对于预处理器指令并不重要。

# android - android、iphone、pc 有什么独特的价值吗？

> ID：13139179
> 
> 赞同：0
> 
> 时间：2012-10-30T12:40:11.327
> 
> 标签：android, iphone, macos

> **可能重复：**
> [Android 设备的唯一 ID](https://stackoverflow.com/questions/4468248/unique-id-of-android-device)

AFAIK，峨眉号，mac地址可以通过一些黑客工作来改变。我需要在每个设备上找到一个无法替换、无法编辑的唯一值。有什么价值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:45:05.050

尝试这个。

```
String android_id = Secure.getString(getContentResolver(), Secure.ANDROID_ID); 
```

**注意：模拟器将返回一个 NULL 值，因此如果您尝试在模拟器环境中使用此值，您的应用程序将会崩溃。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:25:31.970

对于 Mac OSX，您可以使用命令行：

`ioreg -rd1 -c IOPlatformExpertDevice | awk '/IOPlatformUUID/ { split($0, line, "\""); printf("%s\n", line[4]); }'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:43:10.177

对于带有 SIM 卡的手机或设备，您可以依赖 ICCID，它基本上是 SIM 的序列号。我从来没有听说过破解 ICCID 的方法，所以你可以相信它。

Android 允许您通过以下方式获取 ICCID：http: [//developer.android.com/reference/android/telephony/TelephonyManager.html#getSimSerialNumber%28%29](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getSimSerialNumber%28%29)

另一个选项是 IMSI（对应于订阅号），也可以在 android 上使用。

# c# - 如何以编程方式设置系统音量？

> ID：13139181
> 
> 赞同：60
> 
> 时间：2012-10-30T12:40:19.443
> 
> 标签：c#, .net, audio

如何使用 C# 应用程序更改 Windows 系统音量？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2016-11-01T14:18:10.320

我参加聚会有点晚了，但如果您现在正在寻找一个可用的 nuget 包（[AudioSwitcher.AudioApi.CoreAudio](https://www.nuget.org/packages/AudioSwitcher.AudioApi.CoreAudio/)），它可以简化音频交互。安装它然后它很简单：

```
CoreAudioDevice defaultPlaybackDevice = new CoreAudioController().DefaultPlaybackDevice;
Debug.WriteLine("Current Volume:" + defaultPlaybackDevice.Volume);
defaultPlaybackDevice.Volume = 80; 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-10-30T12:56:35.490

Here is the code:

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace Test
{
    public class Test
    {
        private const int APPCOMMAND_VOLUME_MUTE = 0x80000;
        private const int APPCOMMAND_VOLUME_UP = 0xA0000;
        private const int APPCOMMAND_VOLUME_DOWN = 0x90000;
        private const int WM_APPCOMMAND = 0x319;

        [DllImport("user32.dll")]
        public static extern IntPtr SendMessageW(IntPtr hWnd, int Msg,
            IntPtr wParam, IntPtr lParam);

        private void Mute()
        {
            SendMessageW(this.Handle, WM_APPCOMMAND, this.Handle,
                (IntPtr)APPCOMMAND_VOLUME_MUTE);
        }

        private void VolDown()
        {
            SendMessageW(this.Handle, WM_APPCOMMAND, this.Handle,
                (IntPtr)APPCOMMAND_VOLUME_DOWN);
        }

        private void VolUp()
        {
            SendMessageW(this.Handle, WM_APPCOMMAND, this.Handle,
                (IntPtr)APPCOMMAND_VOLUME_UP);
        }
    }
} 
```

Found on [dotnetcurry](https://www.dotnetcurry.com/ShowArticle.aspx?ID=431)

When using WPF you need to use `new WindowInteropHelper(this).Handle` instead of `this.Handle` *(thanks Alex Beals)*

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-30T12:55:40.063

如果其他答案中提供的教程过于复杂，您可以使用[keybd_event 函数尝试这样的实现](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304%28v=vs.85%29.aspx)

```
[DllImport("user32.dll")]
static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, int dwExtraInfo); 
```

**用法：**

```
keybd_event((byte)Keys.VolumeUp, 0, 0, 0); // increase volume
keybd_event((byte)Keys.VolumeDown, 0, 0, 0); // decrease volume 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-02-26T19:40:45.267

如果您希望使用 Core Audio API 将其设置为精确值：

```
using CoreAudioApi;

public class SystemVolumeConfigurator
{
        private readonly MMDeviceEnumerator _deviceEnumerator = new MMDeviceEnumerator();
        private readonly MMDevice _playbackDevice;

        public SystemVolumeConfigurator()
        {
            _playbackDevice = _deviceEnumerator.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);
        }

        public int GetVolume()
        {
            return (int)(_playbackDevice.AudioEndpointVolume.MasterVolumeLevelScalar * 100);
        }

        public void SetVolume(int volumeLevel)
        {
            if (volumeLevel < 0 || volumeLevel > 100)
                throw new ArgumentException("Volume must be between 0 and 100!");

            _playbackDevice.AudioEndpointVolume.MasterVolumeLevelScalar = volumeLevel / 100.0f;
        }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-22T09:17:35.963

您可以将此库[https://gist.github.com/sverrirs/d099b34b7f72bb4fb386](https://gist.github.com/sverrirs/d099b34b7f72bb4fb386)添加到您的项目中并像这样更改音量；

```
VideoPlayerController.AudioManager.SetMasterVolume(100); 
```

该库还包括更改应用程序音量、静音、获取当前音量级别等选项。命名空间称为“视频播放器控制器”，但我在 Windows 窗体应用程序中使用它来更改系统音量，它工作正常，所以“视频" 部分是任意的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-18T13:39:06.980

我的代码有点不同，但仍在使用 CoreAudio

下载了 pkg：nuget install AudioSwitcher.AudioApi.CoreAudio -Version 3.0.0.1

```
using AudioSwitcher.AudioApi.CoreAudio;
public partial class MainWindow : Window
{
public MainWindow()
{

InitializeComponent();

CoreAudioDevice defaultPlaybackDevice = new CoreAudioController().DefaultPlaybackDevice;

double vol = defaultPlaybackDevice.Volume;

defaultPlaybackDevice.Volume = defaultPlaybackDevice.Volume - 5.0;

defaultPlaybackDevice.Volume = defaultPlaybackDevice.Volume + 5.0;
}
} 
```

# c# - c#中的数组排序

> ID：13139184
> 
> 赞同：-11
> 
> 时间：2012-10-30T12:40:28.243
> 
> 标签：c#

我想对数组列表进行排序以找出相同的姓氏，它应该使用 c# 按字母顺序排列。

```
string[] iniArray = { "M Facci", "D Thornton", "B Luke", "S Tofani"}; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:42:55.320

```
string[] iniArray = { "M Facci", "D Thornton", "B Luke", "S Tofani", "T Luke" };
var sortedArray = iniArray.OrderBy(r => r.Split(' ').Last()).ToArray(); 
```

或（礼貌@killercam）

```
var sortedArray = iniArray.OrderBy(r => r.Split().Last()).ToArray(); 
```

*假设字符串中只有名字和姓氏，那么也存在一个姓氏。*

要显示结果数组：

```
foreach (string str in sortedArray)
{
    Console.WriteLine(str);
} 
```

输出将是：

```
M Facci
B Luke
T Luke
D Thornton
S Tofani 
```

# javascript - 从另一个js文件调用一个js函数？

> ID：13139185
> 
> 赞同：1
> 
> 时间：2012-10-30T12:40:28.843
> 
> 标签：javascript

我有两个 .js 文件（A，B）。我想将 B.js 的函数调用到 A.js 文件中。我怎么能完成。

**A.js：**

```
function validation(){
  alert("validating...");
} 
```

**B.js：**

```
function login(){
  // i want to call validation() of file A.js here. How can it possible
  validation();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:43:53.653

将 a.js 文件包含到 b.js

```
function includeJs(ajsfilepath) {
    var js = document.createElement("script");

    js.type = "text/javascript";
    js.src = jsFilePath;

    document.body.appendChild(js);
}

includeJs("/path/a.js"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:48:39.980

如果您不想使用脚本来动态包含 javascript 文件，可以在 html 文件中添加以下行：

```
<script src="A.js" type="text/javascript"></script>
<script src="B.js" type="text/javascript"></script> 
```

然后，它应该工作。

# javascript - 如何保持html表格布局固定

> ID：13139188
> 
> 赞同：0
> 
> 时间：2012-10-30T12:40:33.063
> 
> 标签：javascript, jquery, html, css

我遇到了 HTML 表格布局问题。我创建了一个 HTML 表单并使用 HTML table 布局表单：

```
 <form id="form1">
    <table class="ui-widget">
        <tbody>
            <tr>
                <td>
                    <label for="CreateName">Name</label>
                </td>
                <td>
                    <input type="text" id="CreateName" name="Name" />
                </td>
            </tr>
            <tr>
                <td>
                    <label for="CreateDate">Date</label>
                </td>
                <td>
                    <input type="text" id="CreateDate" name="Date" />
                </td>
            </tr>
            .. 
            ...
        </tbody>
    </table>     
   </form> 
```

我在表单字段上插入了 jquery 验证。现在我的问题是当显示验证错误时，整个表格布局都会受到影响。我用了 ：

```
 table-layout: fixed; 
```

但它仍然无法正常工作。我怎样才能摆脱这个问题？

# sql - SQL 设置表 1 COL A = 表 2 COL B 如果表 1 COL C = 表 2 COL D

> ID：13139189
> 
> 赞同：1
> 
> 时间：2012-10-30T12:40:34.450
> 
> 标签：sql, sql-server-2008, tsql

我有两张桌子

**表格1**

```
REF1 REF2
     A
     B
     C 
```

**表2**

```
UPN Filename
1   A
2   B
3   C 
```

我想在 SQL 中做的是这个

> 如果 Table1 REF2 = Table2 Filename 然后设置 Table1 REF1 = Table2 UPN

这是我做的sql

```
UPDATE    Table1
SET       REF1 = Table2.UPN
FROM      Table1 INNER JOIN Table2 
ON        Table1.REF2 = Table2.FileName 
```

所有这一切都是取 table2 的第 1 行中的第一个值并将其放在 table1 下的每一行中`REF1`

例如，这就是我得到的

**表格1**

```
REF1 REF2
1    A
1    B
1    C 
```

这就是我要的

**表格1**

```
REF1 REF2
1    A
2    B
3    C 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:53:04.783

要在 SQL Server 中执行此操作，语法如下：

```
UPDATE t1
SET t1.REF1 = t2.UPN
FROM Table1 AS t1
INNER JOIN Table2 t2 ON t1.REF2 = t2.FileName 
```

# python - 从模板调用 Django 视图

> ID：13139192
> 
> 赞同：1
> 
> 时间：2012-10-30T12:40:41.863
> 
> 标签：python, django, templates, view

我想从 Django 模板调用 Django 视图。有标签可以做到这一点吗？

例如，我想创建一个管理我的登录表单的视图。所以基本上，这个视图将仅用于将 Django 表单发送到 html 模板。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:47:49.277

如果您只为登录用户执行此操作，您应该阅读[django 中的身份验证用户，](https://docs.djangoproject.com/en/dev/topics/auth/#module-django.contrib.auth)它向您展示了如何编写用于登录用户的表单。

如果要将表单中填写的数据发送到 django 视图，只需将`action`表单的属性设置为映射到视图的 URL：

```
<form method="POST" action="/user-login">
  {% csrf_token %} 
```

如果您使用`POST`，则需要`{% csrf_token %}`在 HTML 表单中包含；你应该阅读[关于 csrf 的文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)。

* * *

如果您想直接从模板中调用某些功能，请编写一个[自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)，它允许您执行任意代码并将结果放入任何模板中（或将它们添加到模板上下文中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:46:44.670

将 url 映射到该视图。从模板重定向到该网址。

# notifications - iphone中本地通知的自定义声音，但使用内置声音

> ID：13139194
> 
> 赞同：1
> 
> 时间：2012-10-30T12:40:48.593
> 
> 标签：notifications, local, audio

我正在设置本地通知，并且正在使用：

```
// other code to setup myNotifyAlarm (omitted)
myNotifyAlarm.soundName = @"Glass.aiff";
[app scheduleLocalNotification:myNotifyAlarm]; 
```

（在许多站点中找到的代码作为如何设置本地通知的示例。）

但是我在 Settings->Sounds->Text-Tone 而不是 Glass.aiff 中设置了声音。我试图用 .caf 声音（来自[http://iphonedevwiki.net/index.php/AudioServices](http://iphonedevwiki.net/index.php/AudioServices)）替换 @"Glass.aiff"，但也没有运气。

我不想包含“我自己的”声音，iPhone（和其他 iDevices）有很多我可以使用的内置声音。问题是如何？（我想给用户一个选项，为每个通知警报选择不同的声音（我的应用程序有 4 种“类型”），所以我需要一种改变声音的方法......比如个性化的通知铃声）

# javascript - 为什么Javascript引擎每次调用函数都需要创建一个Activation Object？

> ID：13139200
> 
> 赞同：4
> 
> 时间：2012-10-30T12:41:06.300
> 
> 标签：javascript, function, scope

总结作用域链的概念：

加载网页后，Javascript 会定位函数定义并为每个定义创建一个所谓的**变量对象**。每个 VO 都必须引用每个局部变量（或全局变量），因此从第一个祖先的函数开始，直到全局上下文。每个函数的作用域链都存储在名为：Scope 的函数属性中。

此外，当调用函数时，会创建一个新对象：一个**Activation Object**。

这是什么？：

它就像一个变量对象（实际上它是一个 VO），负责引用所有函数内部的变量对象，包括“参数”对象和形式参数。

当然，由函数祖先的变量对象+函数的激活对象组成的链中的每一个**至少**将所有变量映射到`undefined`first。然后，只要执行进行，它就会通过更新其值（对应于引用的变量）来进化。

但是，我注意到激活对象与变量对象不同，仅仅是因为它包含**参数**对象，并且这一事实将阻止它在函数被调用之前被创建。

所以，我想知道为什么构建 Javascript 引擎的人没有**在函数的定义步骤**中分配每个激活对象。因此，当调用函数时，无需创建自己的特定激活对象，因为它已经存在。引擎只会在函数执行结束时清除相应的参数对象，以便下次调用该对象时不会产生副作用。

它可能会提高性能吗？事实上，在每次调用时重新创建一个完整的激活对象可能会消耗......或者这个提议有问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T12:49:28.903

激活对象表示函数**调用**的上下文。每个调用都必须有自己的对象。它们允许关闭等。

将其视为类似于为调用 C 或 C++ 函数而分配的堆栈帧。

*编辑*——这是一个示例函数：

```
function makeCounter( count ) {
  return function() {
    return count++;
  };
} 
```

现在，我可以用它制作一个计数器功能：

```
var counter1 = makeCounter(1);
alert(counter1()); // alerts "1"
alert(counter1()); // alerts "2" 
```

如果我再做一个呢？

```
var counter100 = makeCounter(100);
alert(counter100()); // alerts "100" 
```

如果两个调用`makeCounter()`共享一个`arguments`实例，当我随后调用“counter1()”时会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-18T09:50:36.540

You can't have a single Activation Object per function, reused across invocations, because there may be multiple invocations of a function in progress at any given time. One obvious example of this is recursion.

Perhaps you could have, say, 1 eagerly-allocated AO for each function, so at least the *first* call would be able to use it, but I imagine that kind of mechanism would just complicate the concept for, at best, a nominal performance gain (while also trading off memory).

# mysql - mysql查询时间戳错误

> ID：13139202
> 
> 赞同：0
> 
> 时间：2012-10-30T12:41:10.403
> 
> 标签：mysql

我希望下面的错误是自我解释的。我想将 event_time 与一些 cart_time 进行比较。我知道通常当我们想要这样的任何操作时，我们需要使用`in`，但是对于时间戳如何比较它

```
 mysql> SELECT bsid
        FROM access_aug15
        WHERE event_time < (SELECT cart_time 
                            FROM chat_final 
                            WHERE bsid in (SELECT bsid  
                                           FROM access_aug15
                                           WHERE eventid="11"
                                           AND current_page not like  '%cart%'));

 ERROR 1242 (21000): Subquery returns more than 1 row 
```

编辑：表结构 access_aug15

```
 +-------------------+--------------+------+-----+---------+-------+
  | Field             | Type         | Null | Key | Default | Extra |
  +-------------------+--------------+------+-----+---------+-------+
  | vid               | varchar(200) | YES  |     | NULL    |       |
  | bsid              | varchar(200) | YES  | MUL | NULL    |       |
  | event_time        | datetime     | YES  | MUL | NULL    |       |
  | eventid           | varchar(10)  | YES  | MUL | NULL    |       |
  | current_page      | mediumtext   | YES  |     | NULL    |       |
  | departmentid      | varchar(100) | YES  | MUL | NULL    |       |
  | form_id           | varchar(100) | YES  |     | NULL    |       |
  | form_name         | varchar(100) | YES  |     | NULL    |       |
  | page_title        | varchar(200) | YES  |     | NULL    |       |
  | report_date       | datetime     | YES  | MUL | NULL    |       |
  +-------------------+--------------+------+-----+---------+-------+ 
```

表 2：chat_final

```
 +-------------------+--------------+------+-----+---------+-------+
  | Field             | Type         | Null | Key | Default | Extra |
  +-------------------+--------------+------+-----+---------+-------+
  | bsid              | varchar(200) | YES  | MUL | NULL    |       |
  | chat_time         | datetime     | YES  |     | NULL    |       |
  | cart_time         | datetime     | YES  |     | NULL    |       |
  | customerid        | varchar(100) | YES  |     | NULL    |       |
  | detail            | longtext     | YES  |     | NULL    |       |
  | chat_type         | varchar(5)   | YES  |     | NULL    |       |
  +-------------------+--------------+------+-----+---------+-------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:43:57.063

在您的查询子查询（在另一个查询中查询）应该只返回一个结果。但它返回不止一行。您需要修改您的子查询。请提供表结构和一些数据...然后我会给你正确的查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:45:28.063

```
select bsid from access_aug15 where event_time <(select cart_time from chat_final 
 where bsid in (select bsid from access_aug15 
 where eventid="11"  and current_page not like  '%cart%' 
 LIMIT 1) 
 LIMIT 1); 
```

# c# - 使用 C# 读取和写入 Excel 的最快方法

> ID：13139213
> 
> 赞同：0
> 
> 时间：2012-10-30T12:42:22.003
> 
> 标签：c#, excel, interop, openxml

> **可能重复：**
> [将大量数据从 C# 导出到 excel 的最佳/最快方法是什么](https://stackoverflow.com/questions/7844466/what-is-the-best-fastest-way-to-export-large-set-of-data-from-c-sharp-to-excel)

我正在创建一个具有以下功能的 Web 应用程序：

1.  假设管理员将一些数据存储在预定义的 Excel 模板文件中。他将访问管理页面并上传此 Excel。应用程序读取此 Excel 并相应地更新数据库中的数据。

2.  存储在数据库中的数据必须显示给任何访问 ViewDetails 页面的用户。现在，数据应该在屏幕上显示给用户，并且必须提供下载到 Excel 选项。此外，用户可以选择过滤数据和排序数据。

假设行数为 10000+，每行大约有 10-15 列文本/数字数据。

我目前的想法是使用Interop.Excel 对象来读取Excel 模板并上传数据库中的数据。对于阅读，我通常将所有数据提取到 DataTable 中，然后根据需要显示。我计划使用 DataView 进行排序和过滤。但是，我从来没有使用过这么大的数据，我不确定使用上述方法的性能。

我的问题是，实现我的要求的最好和最快的方法是什么？我在某处读到，将这么多数据写入 Excel 文件大约需要 2-3 分钟。

我还遇到了 OpenXML：“Open XML 是一种用于文字处理文档、演示文稿和电子表格的开放标准，可以由不同平台上的多个应用程序自由实现。”

我可以使用它来更好地实现需求还是有其他方法？我最近开始开发 C# Web 应用程序，并且第一次使用 Excel 电子表格，所以如果有任何我不知道的明显答案，请多多包涵。提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:24:17.880

我建议使用 epplus 加载和保存 excel 文件。它非常快速且用途广泛。特别是加载它很容易：

```
 Try
            Dim existingFile As New FileInfo(path)

            Using ExcelPackage As New ExcelPackage(existingFile)
                Dim Wsht As ExcelWorksheet = Nothing

                Try
                    Wsht = ExcelPackage.Workbook.Worksheets(1)

                Catch ex As Exception

                End Try

                Dim tbl As New DataTable
                Dim hasHeader = True
                For i = 1 To Wsht.Dimension.End.Column
                    tbl.Columns.Add()
'this is very "dumb" if you need better column names just iterate over the file and get them
                Next

                Dim startRow = 1 '1 due to the excel quirk
                For rowNum = startRow To Wsht.Dimension.End.Row
                    Dim wsRow = Wsht.Cells(rowNum, 1, rowNum, Wsht.Dimension.End.Column)
                    Dim row = tbl.NewRow
                    For Each cell In wsRow
                        row(cell.Start.Column - 1) = cell.Text
                    Next
                    tbl.Rows.Add(row)
                Next
'do something with the tbl datatable

            End Using
        Catch ex As Exception

        End Try 
```

缺点：目前只支持 xlsx 文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:39:10.490

这完全取决于您拥有多少数据、您想要做什么（例如，生成具有完整格式的 Excel 工作表）以及您的预算。

我认为 Excel 互操作是一个坏主意。它非常容易出错，尤其是在服务器上。实际上，我永远不会在服务器上运行互操作，因为 Office 应用程序是为交互而构建的，而不是在服务器上运行多实例。

我成功使用的两种方法是 OpenXML（但这很难使用）和商业 Aspose Cells 库。后者速度极快，几乎支持所有 Excel 特性和功能。您可以在[http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx)阅读更多相关信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:46:30.153

就我个人而言，我会看看 codeplex，有几个项目可以完全按照您的意愿进行操作。Excel 文件是开放的 xml 格式，但它会变得非常多毛且非常烦人。然后你也可以使用 com 但这也很烦人。

[http://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)

快速数据生成——可以在不到 10 秒的时间内生成包含 500,000 个唯一字符串单元的新工作簿。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:04:39.817

您应该尝试多种选择：对它们进行计时，看看哪种方法最适合您的情况。一种选择是您提到的互操作。另一种是使用带有[JET SQL 命令的](http://www.devguru.com/technologies/jetsql/home.asp)[OLE DB 连接](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection%28v=vs.100%29.aspx)。请注意，格式很容易弄乱；例如，工作表名称必须与每次上传保持一致，因为在编写 JET SQL 查询时，这将成为“表名”。通读这些[StackOverflow 提示](https://stackoverflow.com/questions/694422/beginner-tutorials-for-excel-programming-in-c-sharp)。

# prolog - 谓词 next_board/3

> ID：13139214
> 
> 赞同：0
> 
> 时间：2012-10-30T12:42:23.950
> 
> 标签：prolog

我想为井字游戏编写一个谓词，为给定的玩家和棋盘生成可能的后继棋盘配置。输入此输入后：

```
 next_board([[x,o,x],[x,x,o],[o,e,e]],x,N). 
```

输出应显示如下：

```
 N=[[x,o,x],[x,x,o],[o,e,e]];
 N=[[x,o,x],[x,e,o],[o,x,e]];
 N=[[x,o,x],[x,e,o],[o,e,x]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:21:29.840

要生成可能的后续板，您基本上必须`e`用您的播放器芯片“替换”单个空单元格（标有 ）。

乍一看，您可能很想使用[select/4](http://www.swi-prolog.org/pldoc/doc_for?object=select/4)，但它会用您的播放器筹码替换一行中的每个空单元格。所以，你最好使用`append/3`这样的谓词：

```
next_board(Board, Player, NextBoard):-
  append(Head, [Row|Tail], Board),  % Take a single row from the board
  append(RowHead, [e|RowTail], Row), % Take a single empty cell
  append(RowHead, [Player|RowTail], NRow), % and replace it with your player chip
  append(Head, [NRow|Tail], NextBoard). % Now build a next possible board 
```

您不妨制作递归过程来实现相同的逻辑，而无需使用`append/3`.

# c# - UserDefinedProperty 的 Name 属性中允许的字符

> ID：13139216
> 
> 赞同：1
> 
> 时间：2012-10-30T12:42:32.033
> 
> 标签：c#, outlook, vsto, outlook-addin, outlook-2010

我在 Outlook 2010 的文件夹级别添加了一个自定义属性。`MAPIFolder`（和`Folder`）对象有一个名为的属性`UserDefinedProperties`，可以在其中添加自定义属性，但问题是这些属性并不意味着与它们一起存储值。作为一个黑客，我通过用等号分隔两者来将属性值存储在名称中，例如我会添加一个`UserDefinedProperty`类似于`Name`“MyProperty = 123”的东西。

现在的问题是，有时我的属性值包含`Name`. 例如，我有一个值为“America/New_York”的属性。中不允许使用这两个字符（斜杠和下划线）`Name`，因此出现异常。

我在这里需要的是在文件夹级别存储属性值的更好方法，或者`Name`是对象属性中允许的字符列表`UserDefinedProperty`，以便我可以进行某种替换。

我正在使用 C#、.NET Fx 4.0 和 VSTO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:55:59.297

我的错。我没有完全阅读异常消息。它明确提到了非法字符。这些都是：

**方括号：** [ 和 ]
**下划线**：_
**磅**：#

如果有人对存储文件夹级别属性有更好的想法，请在此处发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:52:50.620

您应该[`StorageItem`](http://msdn.microsoft.com/en-us/library/bb206770%28v=office.12%29.aspx)用于管理文件夹级状态。[`StorageItems`](http://msdn.microsoft.com/en-us/library/bb176404%28v=office.12%29.aspx)从用户视图中隐藏，并允许您使用 Exchange 邮箱项目保持状态。

### `StorageItem`通过使用`MessageClass`密钥保持文件夹状态

```
Outlook.StorageItem folderState = folder.GetStorage("IPM.Storage.MyCustomStore", Outlook.OlStorageIdentifierType.olIdentifyByMessageClass);
if (folderState.Size == 0) // no state exists
{ // save state
  folderState.UserProperties.Add("CustomKey1", Outlook.OlUserPropertyType.olText).Value = "America/New_York";
  folderState.Save();
}
else // state exists
{ // read state
  string propVal = folderState.UserProperties["CustomKey1"].Value;
} 
```

您可以在上面的示例中[使用](http://msdn.microsoft.com/en-us/library/bb206773%28v=office.12%29.aspx)[作为键](http://msdn.microsoft.com/en-us/library/bb206773%28v=office.12%29.aspx)或使用作为键来管理`StorageItems`文件夹。[`Subject`](http://msdn.microsoft.com/en-us/library/bb206773%28v=office.12%29.aspx)`MessageClass`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T11:08:46.223

根据例外，名称不能包含特殊字符。但是财产的价值可以：

```
Outlook.Folder folder = Application.GetNamespace("MAPI").Folders[1] as Outlook.Folder;
                Outlook.StorageItem storageItem = folder.GetStorage("ABCDE", Outlook.OlStorageIdentifierType.olIdentifyBySubject);
Outlook.UserProperty property = null;
foreach (Outlook.UserProperty p in storageItem.UserProperties)
{
    if (p.Name == "PropertyName")
        property = p;
}
if (property == null)
{
    property = storageItem.UserProperties.Add("PropertyName", Outlook.OlUserPropertyType.olText, false,                                                                Outlook.OlDisplayType.olUser);
                }
property.Value = "my_value_can_contain[brackets]";
storageItem.Save(); 
```

# mysql - 在 mysql 中跟踪缓慢的批量插入查询

> ID：13139224
> 
> 赞同：0
> 
> 时间：2012-10-30T12:43:00.397
> 
> 标签：mysql, performance, configuration, batch-insert

我有一个程序在某些时候会在 MySQL 表中执行数千次插入。这些插入被事务包围。当我使用生产数据（复制的 prod.db）在开发机器上运行代码时，需要几分钟才能完成。当我在生产中运行它时，它运行了 30 多分钟。

dev 和 prod 服务器都运行 MySQL 5.1（具有次要版本差异，5.1.64 与 prod 中的 5.1.41）。服务器是一台功能强大的机器，具有 12 个内核、16GB RAM、快速磁盘等（与我微不足道的开发计算机相比）。唯一的区别是生产机器也是 MySQL 复制主机。但是，我写入的特定模式不会被复制。

我倾向于将问题放在`my.cnf`配置值上，但任何其他想法都会有所帮助。我还注意到，虽然没有复制特定的模式，但它也没有在 binlog 中被忽略（`binlog-ignore-db = <db-name>`在本`[mysqld]`节中），所以这也是我想研究的。

在配置值中我应该注意哪些其他危险信号以提高数千次插入规模事务的速度？我还应该在哪里提高批量插入性能？谢谢。

### 编辑 - 执行此操作的代码（非常简化）

在红宝石中，使用`mysql2`适配器：

```
inserts = []

# a loop that generates INSERT statements

...
inserts << insert_stmt
...

# end loop

begin
  connection.query("BEGIN;")
  inserts.each { |q| connection.query(q) }
  connection.query("COMMIT;")
rescue
  connection.query("ROLLBACK;")
end 
```

# java - 获取时间的未来日期

> ID：13139230
> 
> 赞同：2
> 
> 时间：2012-10-30T12:43:23.870
> 
> 标签：java

我有一个 24 小时格式的时间“14:00:00”。对于这个日期，我想生成日期，例如如果当前时间小于 14:00:00，则为今天的日期，否则为第二天的日期。

所以对于“14:00:00”如果当前日期时间是“30-10-2012 13:00:00”而不是我想要的 30-10-2012 否则如果当前日期时间是“30-10-2012 15:00”： 00" 比我想要的 31-10-2012

我尝试了这种给出今天日期的方法

```
public static String GetTodayDateTimeStamp(String time)
{
    String toReturn = "";

    DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    Date date = new Date();
    String toDayDate = dateFormat.format(date);

    toReturn = toDayDate + " " + time;

    return toReturn;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:56:24.383

创建新`Date`对象时，将为其分配当前时间。如果您使用实例创建其中两个对象并将小时设置为 14 并将分钟、秒（和毫秒，如果必须的话）设置为 0，`Calendar`您将拥有两个必须比较的日期：

```
Date now = new Date();
Date today14pm = new Date();
Calendar calendar = Calendar.getInstance();
calendar.setTime(today14PM);
calendar.set(Calendar.HOUR_OF_DAY, 14);
calendar.set(Calendar.MINUTES, 0);
calendar.set(Calendar.SECONDS, 0);
calendar.set(Calendar.MILLISECONDS, 0);
today14pm = Calendar.getTime();

if(now.after(today14pm)) {
    //Generate tomorrow's date    
} else {
    //Generate today's date
} 
```

以防万一，您可能希望将`lenient`日历的属性设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:45:57.203

您可以将十个小时添加到当前日期并获取年、月、日部分。

编辑：一个更通用的答案。

1.  获取时间部分并添加 1 秒。让它成为“t”。

2.  然后从当前日期中减去它并在结果中添加 1 天。让它成为“d”。

3.  然后得到“d”的年、月、日部分。

例如，让时间为 10:00:00 而不是 14:00:00。所以如果你从“今天 10:00:01”中减去它，你会得到“今天 00:00:01”。然后添加 1 天（或 24 小时），得到“明天 00:00:01”。

# datetime - 将 14 位日期字符串转换为 DateTime (SQL Server)

> ID：13139233
> 
> 赞同：0
> 
> 时间：2012-10-30T12:43:36.910
> 
> 标签：datetime

我正在尝试将文本文件日期字符串解析为 C# DateTime，然后将其插入 SQL Server。

我不断收到此错误：

> 错误：SqlDateTime 溢出。必须介于 1753 年 1 月 1 日上午 12:00:00 和 9999 年 12 月 31 日晚上 11:59:59 之间。

我猜它不喜欢 YYYY-MM-DD 格式？我在 SQL 中的数据类型是 datetime2(7)

我要转换的字符串是这种格式：

20121030123010

(2012-10-30 12:30:10)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:40:20.190

通过使用 SQL Server GETDATE() 中的默认值解决了这个问题

# c++ - 使用 typedef 和匿名类定义与传统类定义的等价性

> ID：13139235
> 
> 赞同：2
> 
> 时间：2012-10-30T12:43:39.310
> 
> 标签：c++, typedef, anonymous-class

> **可能重复：**
> [C++ 中“struct”和“typedef struct”之间的区别？](https://stackoverflow.com/questions/612328/difference-between-struct-and-typedef-struct-in-c)

[这个问题](https://stackoverflow.com/questions/13138605/why-class-int-i-is-not-fully-standard-conformant)的答案让我想知道以下几点：

我假设定义一个类如下：

```
typedef class {int i;} C; 
```

将完全等同于以传统方式定义它：

```
class C
{
   int i;
}; 
```

这个假设正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:53:41.873

在这个孤立的例子中，它们在功能上是相同的，至少从外部来看是相同的。

但是也有区别。特别是一个实例，您不能以这种方式声明 a`struct`或 a的构造函数`class`，仅仅因为`class`未命名。同样，您不能声明任何涉及类名的函数。这里有些例子：

```
typedef class
{
public:
  Gizmo() : n_(42) {}; // NOT OK
  ~Gizmo();
  Gizmo& operator<<(int n);    
private:
  int n_;
} Gizmo; 
```

您也不能转发声明匿名类：

```
class Gizmo; 
```

在 C++ 中，我从未见过`typedef`使用匿名`struct`或 a`class`比简单地声明命名的 a`class`或a 更可取的情况。`struct`在某些情况下，传统方法绝对是首选。这个故事的寓意是：不要`typedef class {} Name;`在 C++ 中使用。它什么也没有给你买，却让你付出了一些代价。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:46:51.880

从实际的角度来看是的，因为标准说 (9.1/5)

> 命名类类型或其 cv 限定版本的 typedef-name (7.1.3) 也是 > 类名。如果在需要类名的地方使用命名 cv 限定类类型的 typedef-name，则忽略 cv 限定符。

7.1/3 说：

> 使用 typedef 说明符声明的名称成为 typedef-name。在其声明的范围内，typedef-name 在语法上等同于关键字，并以第 8 节中描述的方式命名与标识符相关联的类型。因此 typedef-name 是另一种类型的同义词。

从理论上讲不是，因为您可以（实际上我看到人们已经拥有）根据使用的版本起草有效或无效的程序，因为 7.1/3 继续从我切断它的地方说：

> typedef-name 不会像类声明 (9.1) 或枚举声明那样引入新类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T12:49:45.253

我相信这是一个重复的问题（找不到），但如果不是，请注意编译：

```
class C
{
   int i;
};
void C() {}

class C x; 
```

虽然这不会：

```
typedef class
{
   int i;
} C;
void C() {}

C x; 
```

名称空间不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:49:41.513

它们不是等价的。尤其，

```
int main()
{
    class C c;
} 
```

只会编译两个定义之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T12:54:26.473

这是另一个区别：后者可以前向声明，前者不能。

# java - 发生异常时如何继续批量插入

> ID：13139236
> 
> 赞同：6
> 
> 时间：2012-10-30T12:43:42.763
> 
> 标签：java, hibernate, exception, jpa, try-catch

我在休眠中使用 jpa 我想在数据库中插入 100 条记录，假设我在第 50 条记录插入中得到异常 JDBC 批量更新我需要处理异常并且我需要将剩余的记录保存到数据库。

代码：

```
 private List<TempCustomers> tempCustomer =new ArrayList<TempCustomers>();

    public String migrateCustomers() {

      TempCustomers temp = null;
        for(DoTempCustomers tempCustomers:doTempCustomers){

              try {
                temp=new TempCustomers();
                BeanUtils.copyProperties(temp, tempCustomers);
                        tempCustomer.add(temp);
                    entityManager.persist(temp);

              }catch (Exception e) {
                  tempCustomer.add(temp);
                  entityManager.persist(temp);
                  log.info("Exception ..."+e);
                  return "null";
              }
        }

        return "null";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:46:25.343

在第二种情况下，请删除该行...

entityManager.persist(temp);

如您所知，这会引发异常。将其保留在列表中以供您进一步分析。最好放入任何队列（ActiveMQ）由您决定。

最好的解决方案是：

在持久化之前验证所有数据......以尽量减少异常。运行时的事情需要你再次重新处理，这应该是手动的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:06:49.167

纳根德拉。

RAS 先生所说的是正确的。

例如，您要持久化 100 个实体，并且在第 50 个实体中发生异常持久化。您有异常处理程序，它将为您处理这种情况。它会跳过当前一个并处理下一个。

需要注意的事项如下：

1-您的异常处理应该在循环中，希望您已经拥有它。

2- 对于例外情况，您可以将实体保存在不同的列表中，以便进一步分析错误详细信息。在异常捕获块中执行此操作。

3-我不确定您是否使用事务管理器，事务需要小心。

--

# linux - 如何从解析内部命令中转义单引号？

> ID：13139237
> 
> 赞同：0
> 
> 时间：2012-10-30T12:43:42.667
> 
> 标签：linux, bash, shell

我必须以脚本中的特定用户身份启动底部的命令。参数 $vmargs 需要使用单引号 ('$vmargs')。我被困在这里，因为它总是被解析。vmargs 参数中有一些 java 选项。

```
 su synesty -c "screen -dmS appscreen ./eclipse -vmargs 
                -DAPP_ENV=$automatey_note  $vmargs" 
```

希望任何人都可以提供帮助。

更新：对不起，我看到我的问题不清楚。必须求解参数。

```
 '-DencryptorCredentials=currentPass|oldPass|1 -Xms512m -Xmx2048m 
 -DLOGGING_HOME=configuration/ -Djava.io.tmpdir=/tmp -Dorg.osgi.service.http.port=8081
 -Declipse.ignoreApp=true -Dosgi.noShutdown=true -Xdebug         
 -Xnoagent
 -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n 
 -Djava.net.preferIPv4Stack=true -DapplyDbMigrations=true -XX:MaxPermSize=128m     
 -XX:-HeapDumpOnOutOfMemoryError ' 
```

就是这些东西，我需要单引号，否则 shell 不会将其识别为参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:54:01.530

只需将单引号放在`$vmargs`. 它仍将被扩展，因为整个内容都在双引号中。

```
su synesty -c "screen -dmS appscreen ./eclipse -vmargs -DAPP_ENV=$automatey_note '$vmargs'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:54:18.513

如果您想传递`$vmargs`给`su synesty`未更改的内容，请“转义”将按原样保留字符串的美元：-

`su synesty -c "screen -dmS appscreen ./eclipse -vmargs -DAPP_ENV=$automatey_note \$vmargs"`

# java - 在#list 迭代器中验证@spring.formInput

> ID：13139239
> 
> 赞同：0
> 
> 时间：2012-10-30T12:43:55.993
> 
> 标签：java, spring, validation, freemarker

我有一个 freemarker 页面，我需要从条目列表中发布一个条目。

为了克服 spring.formInput 和 freemarker 列表的问题（[请参阅问题here](https://stackoverflow.com/questions/8006163/spring-forminput-in-list-iterator)），我以以下方式构造 html 表单：

```
<#list entries as entry>
    <@form.form method="POST" commandName="receiver">
        <@spring.formInput "entries.entry[${entry_index}].name"/>
        <@spring.formInput "entries.entry[${entry_index}].value"/>
    </@form.form>
</#list> 
```

我的控制器看起来像这样：

```
@RequestMapping(method=POST, params="save") 
public String save(@ModelAttribute(value="entries") @Valid Entries entries, BindingResult result, Model model){
    /*notice, we always get the last item in the list, since the entries  "carries" the index of the form through, and  creates
     * null-object in the first n places
    */ 
    int index = entries.size()-1;
    Entry entry = entries.get(index);
    if (!result.hasErrors()) {
        formService.save(entry);
    }

    return "";
} 
```

不幸的是，每当我发布一个条目而不是列表中的第一个条目时，@Valid 注释都会导致错误。

发生这种情况是因为 spring 自动使用 null 值填充我的列表，直到当前索引。

*   我更愿意发布条目而不是条目，但我认为这不能做到。
*   或者，如何停止对列表中的前 n-1 个条目进行验证？
*   或者，我可以以某种方式测试列表（索引）中的哪个对象导致错误，这样我就可以避免前 n-1 个条目中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:50:58.113

几个月前我也遇到过类似的问题。但是我在使用**LazyList**时遇到了问题。也许你会在这个[问题](https://stackoverflow.com/questions/10614718/how-to-validate-dynamically-generated-fields-server-side)中找到你的答案。希望这对您有所帮助。

# wkhtmltopdf - wkhtmltopdf - 禁用分页

> ID：13139245
> 
> 赞同：8
> 
> 时间：2012-10-30T12:44:09.523
> 
> 标签：wkhtmltopdf

我正在尝试将谷歌地图嵌入到横向 PDF 中，但不知何故，wkhtmltopdf 总是将地图分成两部分，尽管地图很容易放在一页上。

我认为问题在于，地图是用瓷砖构建的。瓷砖比地图大并被切断，但 wkhtmltopdf 似乎忽略了这一点，并认为切断的瓷砖也必须适合页面......

这是一些重现此问题的示例代码：

```
<html>
    <head>
        <script src="https://maps.google.com/maps/api/js?sensor=false"></script>
        <script>
            window.onload = function(){                     
                var fenway = new google.maps.LatLng(47.188563,8.480487);
                var gmap = new google.maps.Map(document.getElementById("map"),{
                    center: fenway,
                    zoom: 14,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    disableDefaultUI: true
                });

                var marker = new google.maps.Marker({
                    position: fenway,
                    map:gmap
                });         

                google.maps.event.addListener(gmap,"tilesloaded",function(){
                    window.status = "ready";
                });
            }
        </script>
    </head>
    <body>
        <div id="map" style="width:1500px;height:800px"></div>
    </body>
</html> 
```

以及将其转换为 PDF 的命令：

`wkhtmltopdf --window-status ready --orientation landscape map.html map.pdf`

顺便说一句，我正在使用最新版本的 wkhtmltopdf ......

是否有可能使地图在没有剪切的情况下填满页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T16:36:51.343

您可以使用`--page-width`和`--page-height`选项来`wkhtmltopdf`指定与页面具有相同纵横比的大小。您可能仍然需要将其与在正文上指定宽度和高度相结合，但如果您想用内容完全填充输出 PDF，它会很有用。

`--page-width`作为参考，和选项接受的 'UnitReal' 接受`--page-height`带有单位的浮点值：

```
(none) == mm
mm
cm == 10mm
m  == 1000mm
didot
inch
in == inch
pica
pc == pica
cicero
pixel
px == pixel
point
pt == point 
```

但请注意，它们**必须**使用相同的单位指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:00:27.883

它并没有真正禁用分页符，但设置正文高度确实会在一页上呈现您的地图。

```
<body style="height:1000px;">
    <div id="map" style="width:1500px;height:800px;"></div>
</body> 
```

# jenkins - Jenkins 使用 Sonar Runner 触发声纳分析

> ID：13139246
> 
> 赞同：0
> 
> 时间：2012-10-30T12:44:14.257
> 
> 标签：jenkins, sonarqube, jenkins-plugins, sonar-runner

我想 jenkins 用 Sonar Runner 触发声纳分析，但我收到一条错误消息，我该怎么办，有什么问题，请帮助我，谢谢。（我安装了 jenkins、sonar 和 sonar runner）

错误详情；（来自詹金斯）

```
[workspace] $ "C:\Program Files (x86)\Jenkins\tools\Sonar_Runner\Sonar_Runner_2.0\bin\sonar-    runner.bat" "-Dsonar.projectBaseDir=C:\Program Files (x86)\Jenkins\jobs\E-Power\workspace" -    Dsonar.fxcop.assemblyDependencyDirectories=/bin/Debug -Dsonar.dotnet.version=4.0 -    Dsources=C:/Users/eazakli/Desktop/sonar-runner-2.0/sonar-runner-2.0/test -Dsonar.language=cs -    Dsonar.stylecop.mode=skip -Dsonar.gendarme.mode=skip -Dsonar.projectVersion=1.0 -    Dsonar.gendarme.assemblies=build\DmgTech*.* -Dsonar.projectKey=EA:TESTEA -Dsonar.gallio.mode=skip -    Dsonar.dotnet.4.0.sdk.directory=C:/WIndows/Microsoft.NET/Framework/v4.0.30319 "-    Dsonar.fxcop.installDirectory=C:/Program Files/Microsoft FxCop 1.36" -Dsonar.projectName=E-POWER
C:\Program Files (x86)\Jenkins\tools\Sonar_Runner\Sonar_Runner_2.0
Runner configuration file: C:\Program Files (x86)\Jenkins\tools\Sonar_Runner\Sonar_Runner_2.0    \conf\sonar-runner.properties
Project configuration file: C:\Program Files (x86)\Jenkins\jobs\E-Power\workspace\sonar-    project.properties
Runner version: 2.0
Java version: 1.6.0_35, vendor: Sun Microsystems Inc.
OS name: "Windows 7", version: "6.1", arch: "x86"
Default locale: "tr_TR", source code encoding: "windows-1254" (analysis is platform dependent)
Server: http://localhost:9000
Work directory: C:\Program Files (x86)\Jenkins\jobs\E-Power\workspace\.sonar
14:33:54.737 [main] WARN  o.s.r.i.batch.SonarProjectBuilder - /!\ The 'sources' property is     deprecated and is replaced by 'sonar.sources'. Don't forget to update your files.
14:33:56.420 WARN  .c.p.DefaultDatabase - H2 database should be used for evaluation purpose only
14:33:56.421 INFO      o.s.c.p.Database - Create JDBC datasource to url     jdbc:h2:tcp://localhost/sonar
Total time: 8.119s
Final Memory: 2M/15M
Exception in thread "main" org.sonar.runner.RunnerException:     org.picocontainer.PicoLifecycleException: PicoLifecycleException: method 'public     org.sonar.core.persistence.MyBatis org.sonar.core.persistence.MyBatis.start()',     instance 'org.sonar.core.persistence.MyBatis@1a4ded3, org.apache.ibatis.builder.BuilderException:     Error resolving class . Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'Integer'.  Cause:     java.lang.ClassNotFoundException: Cannot find class: Integer
at org.sonar.runner.Runner.delegateExecution(Runner.java:288)
at org.sonar.runner.Runner.execute(Runner.java:151)
at org.sonar.runner.Main.execute(Main.java:84)
at org.sonar.runner.Main.main(Main.java:56)
Caused by: org.picocontainer.PicoLifecycleException: PicoLifecycleException: method 'public     org.sonar.core.persistence.MyBatis org.sonar.core.persistence.MyBatis.start()',     instance 'org.sonar.core.persistence.MyBatis@1a4ded3, org.apache.ibatis.builder.BuilderException:     Error resolving class . Cause:     org.apache.ibatis.type.TypeException: Could not resolve type alias 'Integer'.  Cause:     java.lang.ClassNotFoundException: Cannot find class: Integer
at org.picocontainer.monitors.NullComponentMonitor.lifecycleInvocationFailed    (NullComponentMonitor.java:77)
at     org.picocontainer.lifecycle.ReflectionLifecycleStrategy.monitorAndThrowReflectionLifecycleException    (ReflectionLifecycleStrategy.java:132)
at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod    (ReflectionLifecycleStrategy.java:115)
at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89)
at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84)
at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169)
at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132)
at org.picocontainer.behaviors.Stored.start(Stored.java:110)
at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter    (DefaultPicoContainer.java:1009)
at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoContainer.java:1002)
at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.java:760)
at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:70)
at org.sonar.batch.bootstrap.Module.start(Module.java:82)
at org.sonar.batch.Batch.execute(Batch.java:104)
at org.sonar.runner.internal.batch.Launcher.executeBatch(Launcher.java:69)
at org.sonar.runner.internal.batch.Launcher.execute(Launcher.java:61)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.sonar.runner.Runner.delegateExecution(Runner.java:285)
... 3 more
Caused by: org.apache.ibatis.builder.BuilderException: Error resolving class . Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'Integer'.  Cause: java.lang.ClassNotFoundException: Cannot find class: Integer
at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:94)
at org.apache.ibatis.builder.xml.XMLStatementBuilder.parseStatementNode(XMLStatementBuilder.java:83)
at org.apache.ibatis.builder.xml.XMLMapperBuilder.buildStatementFromContext(XMLMapperBuilder.java:128)
at org.apache.ibatis.builder.xml.XMLMapperBuilder.buildStatementFromContext(XMLMapperBuilder.java:121)
at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:111)
at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:88)
at org.sonar.core.persistence.MyBatis.loadMapper(MyBatis.java:177)
at org.sonar.core.persistence.MyBatis.loadMappers(MyBatis.java:154)
at org.sonar.core.persistence.MyBatis.start(MyBatis.java:121)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110)
... 21 more
Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias 'Integer'.  Cause: java.lang.ClassNotFoundException: Cannot find class: Integer
at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:109)
at org.apache.ibatis.builder.BaseBuilder.resolveAlias(BaseBuilder.java:115)
at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:92)
... 34 more
Caused by: java.lang.ClassNotFoundException: Cannot find class: Integer
at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:188)
at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:87)
at org.apache.ibatis.io.Resources.classForName(Resources.java:250)
at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:105)
... 36 more
Finished: SUCCESS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:18:40.200

下面的错误往往说明你的Java环境安装不正确：

```
java.lang.ClassNotFoundException: Cannot find class: Integer 
```

你应该看看这个方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T07:45:13.850

这是与几乎相同的错误相关的[堆栈溢出线程。](https://stackoverflow.com/questions/10515599/sonar-3-0-installation-error)

解决方案是@Erkut Evirgen 给出的“将 Java 附加参数添加到*conf/wrapper.conf ”*

```
wrapper.java.additional.3=-Duser.language=en 
```

# google-chrome-extension - 有没有办法使用 Chrome 扩展程序查询或修改单个标签的历史记录？

> ID：13139249
> 
> 赞同：1
> 
> 时间：2012-10-30T12:44:28.513
> 
> 标签：google-chrome-extension

我正在查看有关 的[Chrome 扩展 API 文档`chrome.history`](http://developer.chrome.com/extensions/history.html)，但似乎找不到查询或修改*单个选项卡*历史记录的方法。也就是说，一个选项卡的后退/前进菜单内容。文档中的所有内容似乎都将 Chrome 的历史视为一种大型混合物。

那么，有没有办法逐个标签地查询或修改 Chrome 历史记录？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:14:27.783

那没有。Jasper 的建议是有效的，注入[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)将允许访问选项卡的历史记录。

# r - 在 R 中使用循环创建和处理多个列

> ID：13139256
> 
> 赞同：3
> 
> 时间：2012-10-30T12:44:57.360
> 
> 标签：r, loops

我对 R 很陌生，我想学习如何编写循环来创建和处理多个列。

我在 R 中导入了一个包含 23 个变量的数据的表。对于所有这些变量，我想计算人均值乘以 1000，然后将数据写入新表或与旧数据在同一个表中。

因此，对于这一列，我的操作如下所示：

```
<i>agriculture<-cbind(agriculture,"Total_value_per_capita"=agriculture$Total/agriculture$Total.Population*1000)</i> 
```

现在我要问如何在 23 个变量的循环中执行此操作，这样我就不必编写 23 行类似的代码。

我认为该解决方案可能看起来与粘贴在此线程中的代码非常相似：

[循环在 R 中创建多个矩阵（可能使用粘贴）](https://stackoverflow.com/questions/4893232/loop-to-create-several-matrix-in-r-maybe-using-paste)

但我没有让它在我的代码上工作。

所以任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:22:22.567

我总是倾向于使用适当的 *ply 函数而不是 R 中的循环。在这种情况下`sapply`，可能是你的朋友：

```
df <- data.frame( a=sample(10), b=sample(10), c=sample(10) )
df.per.capita <– as.data.frame(
  sapply(
    df[ colnames(df) != "c" ], function(x){ x/df$c *1000 }
  )
) 
```

对于更复杂的情况，您绝对应该看一下`plyr`包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:33:31.147

这可以使用`sweep`函数来完成。使用比斯特菲尔德的数据生成但设置种子可以获得相同的结果

```
set.seed(001)
df <- data.frame( a=sample(10), b=sample(10), c=sample(10) )
per.capita <- sweep(df[,colnames(df) != "c"], 1, STATS=df$c, FUN='/')*1000
per.capita
           a          b
1   300.0000   300.0000
2  2000.0000  1000.0000
3   833.3333  1000.0000
4  7000.0000 10000.0000
5   222.2222   555.5556
6  1000.0000   875.0000
7  1285.7143  1142.8571
8  1200.0000   800.0000
9  3333.3333   333.3333
10  250.0000  2250.0000 
```

与比斯特菲尔德的结果比较：

```
all.equal(df.per.capita, per.capita)
[1] TRUE 
```

# xslt - 或条件在 xlst 中不起作用

> ID：13139257
> 
> 赞同：3
> 
> 时间：2012-10-30T12:44:59.810
> 
> 标签：xslt

```
<xsl:when test="person/id!=127 or 112" > 
```

或条件在上述示例中不起作用。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:46:46.797

您的语法错误，它应该是`and`，而不是`or`。试试这个：

```
<xsl:when test="person/id!=127 and person/id!=112" > 
```

如果你放在那里，无论 ID 的值是什么`or`，你的条件都将是，因为没有数字可以同时等于 127 和 112。`true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:47:54.933

试试 <xsl:when test="person/id!=127 and person/id!=112">

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:50:03.587

**使用**：

```
 not(person/id= 127 or person/id = 112) 
```

**尽量避免使用`!=`XPath 运算符**，因为当它的一个或两个参数是节点集 9 或 XPath 2.0 中的序列时，它的语义不直观（并且很少有用）。

**当你有很长的列表要比较时，这种表达方式可能更方便高效**：

```
not(contains('|101|105|108|112|123|127|', concat('|', person/id, '|')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:51:38.170

我不是 xslt 开发人员，以前从未使用过它。但是，似乎缺少测试语句。xslt 解析器应该如何处理 112？没有为它提供任何条件。

# java - Java Webservice-亚马逊云

> ID：13139263
> 
> 赞同：0
> 
> 时间：2012-10-30T12:45:07.907
> 
> 标签：java, amazon-web-services

我已经用 JAVA 开发了一个 Web 服务，现在我需要在 Amazon 云 (EC2) 上部署该服务。在这方面要遵循哪些基本步骤？我对亚马逊云术语真的很陌生，一些初学者级别的链接和/或示例将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T23:27:33.377

Amazon Web Services 的一大优点是提供了许多不同级别的服务……如果您想要完全不干涉的管理体验，那么[AWS Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk)可能是您的一个很好的起点。AWS Elastic Beanstalk 为您提供了可用于多个开发环境的托管容器环境。您所要做的就是将您的应用程序放入其中，Elastic Beanstalk 会处理设置负载均衡器、自动缩放规则、监控、警报等。Elastic Beanstalk 是为 Web 应用程序量身定制的，但是一些 Web 服务框架（如 Apache Axis）可以直接工作通过 Tomcat 等 servlet 容器，这使得它们非常适合 Elastic Beanstalk。

如果您想了解更多细节，那么直接使用 Elastic Beanstalk 为您编排的服务是您的下一个选择（例如：Amazon EC2、AutoScaling、Amazon Elastic Load Balancing 等）

Amazon EC2 用户指南中的[入门部分](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html)是开始学习基本 EC2 概念的好地方。按照该指南，您应该可以在几分钟内登录到您自己的 EC2 实例！

# java - 使用 JSP 从 Java 返回 CSS 类样式

> ID：13139264
> 
> 赞同：1
> 
> 时间：2012-10-30T12:45:20.213
> 
> 标签：java, jsp

我是 JSP 的新手，所以对于这个问题，我真的只是想知道我是否对 JSP 的工作原理有正确的认识。但无论如何，我正在开发这个网络应用程序，我需要用一些值填充一个表格，并将它们中的一些涂成绿色，一些涂成红色，一些涂成灰色。它们的颜色由支持每行所有值的 Java 对象确定。所以这是我的想法：

```
<td class="<%detail.getClassStyle()%>"><%= detail.getStatus() %></td> 
```

我希望在方法返回后会变成这样：

```
<td class="red">Down</td> 
```

但它不起作用。在网页的源代码类中只说 class=""。那么我错过了 JSP 的工作原理吗？不管我是不是，有人可以提出一个如何获得我想要的结果的想法吗？

编辑：还有一个额外的类属性 getClassStyle() 返回，它表示单元格所在的列。类似： td class="detail red">Down 所以简单地把它涂成红色并不是我想做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:49:15.033

好吧，您在帖子中遗漏了`=`，但我不确定这只是这里的错字还是在您的实际 JSP 中。

其次，正如 Pointy 在他的评论中提到的那样，scriptlet 语法是邪恶的。利用：

`<td class="${detail.classStyle}">${detail.status}</td>`

现在我不确定您的对象是如何在 java 端设置的，但想象一下您需要确保设置了一些接线，以便尝试访问`detail.whatever`调用正确的 getter ( `detail.getWhatever()`)。

# ruby-on-rails - Rails - 在特定类别下查找模型

> ID：13139269
> 
> 赞同：1
> 
> 时间：2012-10-30T12:45:35.570
> 
> 标签：ruby-on-rails, ruby

我有一个`Business`模型：belongs_to`Category`

类别的示例层次结构：

*   根
    *   餐厅
        *   寿司
        *   比萨
        *   中国人
        *   法语
        *   意大利语

我正在使用`acts_as_tree`层次`Category`结构。

如何`Businesses`在餐厅类别下找到所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:03:51.320

如果您想在树状层次结构中获取节点的所有后代，您有两种选择：

1.  使用经典`acts_as_tree`，预加载所选类别，启动级联查询以检索所有子代、孙代等，直到您只获得叶子（没有更多子代的节点）。这种方法和听起来一样好。

2.  使用更高级的树表示，例如嵌套集或闭包树。在这些表示下，您只需一个查询即可获得特定节点的所有后代。

然后在Businesses中获取收集的类别和查询：

```
Business.where(:category => categories) 
```

* * *

**（技术解释：嵌套集）**

在嵌套集表示下，每个节点都有两个索引，分配方式如下：想象每个节点是一个有两个窗户的房子，东和西，树就像一条分叉的道路，所有孩子或多或少都到他们父母的北边。所以你从根房子的东边开始，在你遇到的窗户上放一个序号。你从不穿过任何马路，你只被允许绕过没有进一步通往北方的道路的房屋。最后你会再次回到根屋，并在西窗上放一个号码。

分配的数字将具有以下属性：

*   所有东窗都有偶数，所有西窗都有奇数（前提是你从 0 开始）
*   每个房子的delta（东西数之差）总是1 + 后代房子的数量
*   任何 H 宫的所有子孙宫都将其东、西编号严格包含在 H 自己的编号之间
*   反之亦然，所有数字严格包含在 H 的数字之间的房子实际上都是 H 的后代
*   如果两所房子不是另一所房子的祖先（所以一个人的名字包含在另一个房子之间），那么它们是完全分开的，也就是说，一个房子的两个数字都严格小于另一个房子的两个数字。

因此，虽然在树中插入一个新元素的成本很高（它需要更新许多索引），但检索整个后代（所有子代、孙代......）非常容易，只需选取“东”和“西”数字介于您选择的类别的东和西之间。您实际上可以做得更好，但这并不重要。

像[https://github.com/collectiveidea/awesome_nested_set](https://github.com/collectiveidea/awesome_nested_set)这样的库将为您管理所有这些，您只需调用

```
categories = @category.self_and_descendants.to_a 
```

* * *

**（技术解释：闭包树）**

这种方法需要一个附件表，您可以在其中存储`child->parent`关系的传递闭包（请参阅[http://en.wikipedia.org/wiki/Reflexive_transitive_closure#P_closures_of_binary_relations](http://en.wikipedia.org/wiki/Reflexive_transitive_closure#P_closures_of_binary_relations)）

该表将包含所有祖先-后代对，因此您可以以智能方式加入该表以获得几乎任何层次结构的切片。

同样，像[https://github.com/mceachen/closure_tree](https://github.com/mceachen/closure_tree)这样的库将为您完成艰苦的工作，您将能够做到

```
categories = @category.self_and_descendants.to_a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:50:26.690

你能不能只做这样的事情：

```
Category.find_by_name("Restaurants").businesses 
```

**编辑：**

没有意识到您也想要餐厅子类别中的企业，呵呵。

对于多个层次结构，您首先需要获取所有类别，然后遍历每个类别，找到业务，然后将它们连接在一起

```
class Company < ActiveRecord::Base

  ...

  def all_children
    all = []
    self.children.each do |c|
      all << c
      root_cs = c.all_children.flatten
      all << root_cs unless root_cs.empty?
    end
    return all.flatten
  end
end 
```

然后你可以打电话：

```
root_category = Category.find_by_name("Restaurants")
categories = root_category.all_children
businesses = categories.map{ |c| c.businesses }.flatten 
```

这应该会返回您的企业列表。虽然看起来不太好，但我觉得应该有一个更优化的方法。

希望无论如何它应该给你一些思考的食物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:48:57.623

```
category = Category.find_by_name("Restaurants") 
```

那么对于业务

```
category.business 
```

如果你想要孩子喜欢（寿司、比萨、中餐……）那么

```
category.childrens 
```

要查找所有类别，请在 category.rb 中添加以下方法

```
 def all_children
    all = []
    self.children.each do |category|
      all << category
      root_children = category.all_children.flatten
      all << root_children unless root_children.empty?
    end
    return all.flatten
  end 
```

然后使用

```
@category.all_children 
```

已编辑 查找餐厅类别和餐厅所有子类别的企业。

```
Business.where("category_id = ? OR category_id in (?)", category.id, category.all_children.map(&:id)) 
```

# python - Django 高级查询

> ID：13139270
> 
> 赞同：2
> 
> 时间：2012-10-30T12:45:35.593
> 
> 标签：python, sql, django

我正在使用 Django ORM 来处理我的数据库查询。我有以下数据库表：

*   资源
*   资源池
*   resource_pool_elem
*   预订

以及以下型号：

```
class Resource(models.Model):

    name = models.CharField(max_length=200)

class Reservation(models.Model):
    pass

class ResourcePool(models.Model):

    reservation = models.ForeignKey(Reservation, related_name="pools", db_column="reservation")
    resources = models.ManyToManyField(Resource, through="ResourcePoolElem")
    mode = models.IntegerField()

class ResourcePoolElem(models.Model):

    resPool = models.ForeignKey(ResourcePool)
    resource = models.ForeignKey(Resource) 
```

目前，我需要查询一组预留中使用的资源。我使用以下查询：

```
resourcesNames = []
reservations = []
resources = models.Resource.objects.filter(
    name__in=resourcesNames, resPool__reservation__in=reservations).all() 
```

我认为它与类似于此的 sql 查询匹配：

```
select *
from resource r join resource_pool rp join resource_pool_elem rpe join reservation reserv 
where r.id = rpe.resource and  
  rpe.pool = rp.id and
  reserv.id = rp.reservation and
  r.name in (resourcesNames[0], ..., resourcesNames[n-1])
  reserv.id in (reservations[0], ..., reservations[n-1]) 
```

现在，我想为这个查询添加一个限制。每个池可能有一个独占模式布尔标志。将有一个额外的输入列表，其中包含每个池的请求的独占标志，如果独占 = true 或独占标志为假的池的资源，我只想查询独占标志与请求的独占标志匹配的池的资源。我可以使用 Python 构建 SQL 查询，代码类似于：

```
query = "select * 
    from resource r join resource_pool rp join resource_pool_elem rep
    join reservation reserv 
    where r.id = rpe.resource and  
    rpe.pool = rp.id and 
    reserv.id = rp.reservation and 
    reserv.id in (reservations[0], ..., reservations[n-1]) and ("
for i in resourcesNames[0:len(resourcesNames)]
    if i > 0:
        query += " or "
    query += "r.name = " + resourcesNames[i]
    if (exclusive[i])      
        query += " and p.mode == 0"
query += ")" 
```

有没有办法在 Django 查询中表达这个 sql 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:18:10.637

也许你可以用[Q 对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)做到这一点。我在您的示例中遇到了一些问题，但让我们用一个更简单的模型来看看它。

```
class Garage(models.Model):
    name     = models.CharField()

class Vehicle(models.Model):
    wheels   = models.IntegerField()
    gears    = models.IntegerField()
    garage   = models.ForeignKey(Garage) 
```

假设您想在车库中获得所有“多轮”车辆（例如所有摩托车和汽车，但没有独轮车），但对于汽车，您只想要那些配备 CVT 变速器的车辆，这意味着它们只有一个齿轮。（这是怎么出现的，不知道，但请耐心等待...... ;）以下内容应该给你：

```
from django.db.models import Q
garage = Garage.objects.all()[0]
query = Vehicle.objects.filter(Q(garage=garage))
query = query.filter(Q(wheels=2) | (Q(wheels=4) & Q(gears=1))) 
```

鉴于以下可用数据：

```
for v in Vehicle.objects.filter(garage=garage):
    print 'Wheels: {}, Gears: {}'.format(v.wheels, v.gears)

Wheels: 1, Gears: 1
Wheels: 2, Gears: 4
Wheels: 2, Gears: 5
Wheels: 4, Gears: 1
Wheels: 4, Gears: 5 
```

运行查询将为我们提供：

```
for v in query:
    print 'Wheels: {}, Gears: {}'.format(v.wheels, v.gears)

Wheels: 2, Gears: 4
Wheels: 2, Gears: 5
Wheels: 4, Gears: 1 
```

最后，为了适应您的情况，您可能可以使用以下内容：

```
query = models.Resource.objects.filter(Q(resPool__reservation__in=reservations))
query = query.filter(Q(name__in(resourcesNames))
query = query.filter(Q(resPool__exclusive=True) & Q(resPool__mode=0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T11:41:06.600

例如，您可以使用 django 游标进行查询

查看文档： [https ://docs.djangoproject.com/en/dev/topics/db/sql/](https://docs.djangoproject.com/en/dev/topics/db/sql/)

```
from django.db import connection

def my_custom_sql(self):
    cursor = connection.cursor()

    cursor.execute("UPDATE bar SET foo = 1 WHERE baz = %s", [self.baz])

    cursor.execute("SELECT foo FROM bar WHERE baz = %s", [self.baz])
    row = cursor.fetchone()

    return row 
```

# entity-framework - 复制一个大的数据库模式，首先在 EF 代码中创建一个新的数据库

> ID：13139274
> 
> 赞同：0
> 
> 时间：2012-10-30T12:45:51.043
> 
> 标签：entity-framework, ef-code-first

我有一个带有上下文的代码优先数据库，我需要从中创建一个使用该数据的新数据库，但修改它说 5% 的字段，然后再添加 20 个表。此迁移将是一个常规的日常过程，其中创建了许多新 Db（来自许多源 DB）。

做到这一点的最佳方法是什么.. 现在我使用一种相当可怕的方法，该方法一个接一个地复制一个表（对字段使用值映射器），然后做一些父补丁？它很可怕，因为它缓慢但更糟糕的顺序取决于关系，多对多是一种痛苦。（此外，如果原始表缺少 id，我必须匹配 id）

我想过使用 SQL 查询，但这对于这样的操作也有点困难（特别是因为目标使用不同的类名进行继承），如果某些 Db 迁移到 Oracle，这可能是一个问题。

忽略外键的蛮力副本将是理想的。

有任何想法吗 ？记住这是一个 50 表的数据库。

# entity-framework - 这是 MSDTC 配置问题吗？

> ID：13139275
> 
> 赞同：1
> 
> 时间：2012-10-30T12:45:52.617
> 
> 标签：entity-framework, ado.net, windows-server-2008, windows-server-2003, msdtc

看来我遇到了与 Microsoft 分布式事务协调器 (MSDTC) 相关的问题。

**设想**

我正在使用 TransactionScope，并且在单个范围内它会访问不同服务器上的两个不同数据库（例如，运行 Windows Server 2003 的**DB_A和运行 Windows Server 2008 的****DB_B**）。一个数据库使用 Entity Framework 4.0 访问，另一个使用普通的 ADO.NET API。

当我从我的开发机器（运行 WinXP）运行应用程序时，它会准确地提交和回滚两个连接。但是，当我运行部署在另一台服务器上的应用程序（例如运行 Windows Server 2003 的**WAS_A**）时，它会正确提交，但如果出现异常，则不会回滚两台服务器上的数据库活动。

我认为这将是**WAS_A**上的 MSDTC 配置问题。所以我去了 MSDTC -> 安全配置并检查了所有可用的选项（就像我之前在其他机器上所做的那样）。但我仍然面临同样的问题。

寻找您的专家意见。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:34:45.607

我相信您需要研究[Enable Transaction Flow](http://msdn.microsoft.com/en-us/library/ms733116%28v=vs.85%29.aspx)。具体来说，看看一个可能会出错而另一个如何完成，如[TransactionScope 和 WCF Services](http://www.stevefenton.co.uk/Content/Blog/Date/200911/Blog/TransactionScope-and-WCF-Services/)中所述：

> 第二个 WCF 服务调用中的错误没有回滚在之前的 WCF 服务调用中所做的更改...为了在您的客户端中创建环境事务并确保它被您的 WCF 服务使用...

然后文章详细介绍了以下步骤：

*   配置您的绑定`transactionFlow`
*   装饰你的界面`[TransactionFlow(TransactionFlowOption)]`
*   装饰你的方法`[OperationBehavior(TransactionScopeRequired)]`
*   `Transaction Binding`可选择使用*更新您的连接字符串

*注意：我认为这是可选的。

# java - JFrame 主题和外观

> ID：13139283
> 
> 赞同：6
> 
> 时间：2012-10-30T12:46:27.387
> 
> 标签：java, swing, jframe, look-and-feel

我有一个摇摆应用程序。下面是一个小屏幕截图。 ![在此处输入图像描述](../Images/2903f8c8fbf8a862ba58c6e93aff93f7.png)

操作系统：赢 7

令人恼火的是主题。我尝试了其他几个屏幕，但它们都有这样的外观。例如，Eclipse 和 Netbeans 具有更好的 UI。FileChooser 和 Frame 很一般，很讨人喜欢。我怎么会有这样的主题。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-30T12:48:15.940

在您的程序中创建任何与 UI 相关的内容之前，将外观更改为 Windows：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T12:49:15.413

看起来您正在使用金属外观和感觉。尝试使用您可能感兴趣的其他外观。

有关详细信息，请参阅[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T12:49:23.947

这将为您提供您想知道的一切

[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

`UIManager.getSystemLookAndFeelClassName()`将为您提供最适合其运行的操作系统

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-14T11:19:27.147

有许多外观和感觉包，例如：

> 1)J纹身
> 
> 2)蓝光
> 
> 3）乔西
> 
> 4)宁录
> 
> 5）奥约哈
> 
> 6)小拉夫

....ETC

你必须阅读以前的类型

# mysql - 在 MySQL 中的一段时间内获取 0 个计数值

> ID：13139285
> 
> 赞同：0
> 
> 时间：2012-10-30T12:46:34.367
> 
> 标签：mysql

我一直在寻找关于 SO 的答案，但我没有解决我的问题。我有两张桌子，`profiles`存储`profiles_visitors`第一张的访客。

我想知道用户在过去 15 天内有多少访问者，所以我写了这个：

```
SELECT COUNT(pv.id) AS `count`, DATE(FROM_UNIXTIME(pv.created_at)) AS `date`
FROM profiles p
LEFT JOIN profiles_visitors pv ON pv.profiles_id=p.id
WHERE p.users_id='50' AND pv.created_at >= (CURDATE() - INTERVAL 15 day)
GROUP BY DATE(FROM_UNIXTIME(pv.created_at)) 
```

查询结果：

```
+-------+-------------------+
| count | date              |
+-------+-------------------+
| 2     | 2012-10-26        |
+-------+-------------------+
| 3     | 2012-10-29        |
+-------+-------------------+ 
```

期望的结果：

```
+-------+-------------------+
| count | date              |
+-------+-------------------+
| 0     | 2012-10-15        |
+-------+-------------------+
.......... 0s here ..........
+-------+-------------------+
| 0     | 2012-10-25        |
+-------+-------------------+
| 2     | 2012-10-26        |
+-------+-------------------+
| 0     | 2012-10-27        |
+-------+-------------------+
| 0     | 2012-10-28        |
+-------+-------------------+
| 3     | 2012-10-29        |
+-------+-------------------+
| 0     | 2012-10-30        |
+-------+-------------------+ 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:48:55.767

使用`profiles`行数而不是`profile_vistors`（因为如果没有访问，则 profile_vistors 表中没有行）作为：

```
 SELECT COUNT(p.id) AS 'count' 
```

此外，如果您愿意，您可以使用`DATEDIFF`以下功能：

```
 DATEDIFF(CURDATE(), pv.created_at) <=15 
```

# android - 在我的 Android PreferencesScreen 上链接到市场

> ID：13139292
> 
> 赞同：0
> 
> 时间：2012-10-30T12:46:53.283
> 
> 标签：android, xml, hyperlink, android-preferences

1）当用户选择以下项目时，我想在我的偏好屏幕上创建一个链接（例如：//market.android.com/details?id=com.myAPP）：

```
<PreferenceScreen
        android:key="linkToMarket"
        android:summary="Click here to give an opinion about this app."
        android:title="Give my opinion" >
</PreferenceScreen> 
```

我怎样才能做到这一点 ？

2) 我想在我的偏好屏幕中打印一些文本。我应该使用什么对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:51:04.253

1) 要为您的应用启动 Play 商店页面，请使用以下代码行。您可能希望将其放在您的 .onClick 方法中`Preference`。

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=your.package.name"))); 
```

2）我猜你只是想在`Preference`这里使用。有关如何布局首选项屏幕的更多详细信息，请查看[http://developer.android.com/guide/topics/ui/settings.html](http://developer.android.com/guide/topics/ui/settings.html)。

# sed - Sed/Awk - 删除 ldif 转储中的空格/连接行

> ID：13139294
> 
> 赞同：6
> 
> 时间：2012-10-30T12:46:57.407
> 
> 标签：sed, awk, ldif

我的 ldif 文件中有一些条目使我的转储不利于下次导入。

```
sambaPasswordHistory: 712BC301C488FD2651BEF5AA11899950547B9ED3C059FF83CE39049B
 BAEECB31692629A94A3C1F4737E3EA854C001704793DB9A67EB977563CE601DF98E7E23C2851F
 082D3D695C8655378629DCCDAF125ACA63141B361190ABC750AF403FDEF000000000000000000
 00000000000000000000000000000000000000000000000000000000000000000000000000000
 00000000000000000000000000000000000000000000000000000000000000000000000000000
 00000000000000000000000000000000000000000000000000000000000000000000000000000
 00000000000000000000000000000000000000000000000000000000000000000000000000000
 00000000000000000000000000000000000000000000000000000000000000000000000000000
 00000000000000000000000000000000000000000000000000000000000000000000000000000
 00000000000000000000000000000000000000000000000000000000000000000000000000000
 00000000000000000000000000000000000000000000000000000000000000000000000000000
 00000000000000000000000000000000000000000000000000000000000000000000000000000
 000000000000000000000000000000000000000000000000000000000
homeDirectory: /home_nfs/ 
```

如何使用 sed/awk/etc 将其更改为

```
sambaPasswordHistory: 712BC301C488FD2651BEF5AA11899950547B9ED3C059FF83CE39049BBAEECB31692629A94A3C1F4737E3EA854C001704793DB9A67EB977563CE601DF98E7E23C2851F082D3D695C8655378629DCCDAF125ACA63141B361190ABC750AF403FDEF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
homeDirectory: /home_nfs/ 
```

又名将所有内容放在一行中

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T13:02:28.240

一种使用方式`GNU sed`：

```
sed -n 'H; ${ x; s/\n//; s/\n //g; p}' file.txt 
```

结果：

```
sambaPasswordHistory: 712BC301C488FD2651BEF5AA11899950547B9ED3C059FF83CE39049BBAEECB31692629A94A3C1F4737E3EA854C001704793DB9A67EB977563CE601DF98E7E23C2851F082D3D695C8655378629DCCDAF125ACA63141B361190ABC750AF403FDEF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
homeDirectory: /home_nfs/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:01:00.050

```
$ cat file
sambaPasswordHistory: abc
 def
 12345
 67
homeDirectory: /home_nfs/
$
$ awk 'NR>1 && !sub(/^ /,""){print s; s=""} {s = s $0} END{print s}' file
sambaPasswordHistory: abcdef1234567
homeDirectory: /home_nfs/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:58:17.123

这可能对您有用（GNU sed）：

```
sed ':a;N;s/\n //;ta;P;D' file 
```

打开两行窗口。删除一个换行符后跟一个空格并重复该模式失败。最后打印第一行，如果模式空间中还有第二行，重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:52:06.623

使用 sed 的一种方法：

```
sed ':a;$!N;s/\n //;ta'  file 
```

sed 加入（N）除最后一行（$！）之外的每一行。加入后，将删除后跟空格（\n）的换行符。'ta' 是循环到分支 'a' 直到替换失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T13:29:15.047

如果 的唯一出现`\n`，即换行符后跟空格，是需要加入行的地方，你可以这样使用[**`bbe`**](http://bbe-.sourceforge.net/)：

```
<file bbe -e 's/\n //' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T15:47:16.980

另一种解决方案：

```
awk 'ORS="";!/home/{$1=$1; print}{RS="\n"}END{print "\n" $0 "\n"}' file 
```

# spring-mvc - 将列表从 jsp 传递到控制器

> ID：13139297
> 
> 赞同：1
> 
> 时间：2012-10-30T12:47:08.387
> 
> 标签：spring-mvc

我想将对象列表从 jsp 发送到控制器。

实际上我有用户实体，它与地址实体有一对多的关系。我的jsp如下：

```
<div class="label"><b>First Name :</b></div>
                    <div class="leftSide"><input type="text" name="firstName" class="textBox" style="width:250px;" /></div>
                    <div class="clr ht5"></div>

                    <div class="label"><b>Company :</b></div>
                    <div class="leftSide"><input type="text" name="company" class="textBox" style="width:250px;" /></div>
                    <div class="clr ht5"></div>
                 </div>
                 <div class="rightHalfColumn">
                    <div class="label"><b>Last Name :</b></div>
                    <div class="leftSide"><input type="text" name="lastName" class="textBox" style="width:250px;" /></div>
                    <div class="clr ht5"></div>

                    <div class="label"><b>Email Address :</b></div>
                    <div class="leftSide"><input type="text" name="email" class="textBox" style="width:250px;" /></div>
                    <div class="clr ht5"></div>

                    Address 1
                    <div class="label"><b>Address 1 :</b></div>
                    <div class="leftSide"><input type="text" name="address1" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>City :</b></div>
                    <div class="leftSide"><input type="text" name="city" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>Zipcode :</b></div>
                    <div class="leftSide"><input type="text" name="zipcode" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>Address 2 :</b></div>
                    <div class="leftSide"><input type="text" name="address2" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>State :</b></div>
                    <div class="leftSide"><input type="text" name="state" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>Phone :</b></div>
                    <div class="leftSide"><input type="text" name="phone" class="textBox" style="width:250px;" /></div>

                    Address 2
                    <div class="label"><b>Address 1 :</b></div>
                    <div class="leftSide"><input type="text" name="address1" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>City :</b></div>
                    <div class="leftSide"><input type="text" name="city" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>Zipcode :</b></div>
                    <div class="leftSide"><input type="text" name="zipcode" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>Address 2 :</b></div>
                    <div class="leftSide"><input type="text" name="address2" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>State :</b></div>
                    <div class="leftSide"><input type="text" name="state" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>Phone :</b></div>
                    <div class="leftSide"><input type="text" name="phone" class="textBox" style="width:250px;" /></div>

                    Address 3
                    <div class="label"><b>Address 1 :</b></div>
                    <div class="leftSide"><input type="text" name="address1" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>City :</b></div>
                    <div class="leftSide"><input type="text" name="city" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>Zipcode :</b></div>
                    <div class="leftSide"><input type="text" name="zipcode" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>Address 2 :</b></div>
                    <div class="leftSide"><input type="text" name="address2" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>State :</b></div>
                    <div class="leftSide"><input type="text" name="state" class="textBox" style="width:250px;" /></div>

                    <div class="label"><b>Phone :</b></div>
                    <div class="leftSide"><input type="text" name="phone" class="textBox" style="width:250px;" /></div> 
```

这里我有三个地址。地址 1、地址 2 和地址 3

现在我得到了用户信息，`@ModelAttribut("user") User user`但我没有得到地址列表`user.getAddress();`。它返回地址列表的“[]”空值。我如何从 jsp 到控制器中获取此地址对象列表。

任何人都可以帮助我吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:28:45.307

It described in documentation, just read [section about nesting properties](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#beans-beans-conventions).

For provided case you need to set field names properly:

*   `user.address[0].city`
*   `user.address[1].city`
*   `user.address[2].city`

This code will set cities for 3 address of user. Do similar transformation with other fields.

# app-store - 应用商店评论抓取不再起作用

> ID：13139300
> 
> 赞同：2
> 
> 时间：2012-10-30T12:47:24.903
> 
> 标签：app-store, web-scraping, itunes

像许多其他人一样，我使用[http://blogs.oreilly.com/iphone/2008/08/scraping-appstore-reviews.html](http://blogs.oreilly.com/iphone/2008/08/scraping-appstore-reviews.html)上的一般准则（以及评论）来构建脚本来抓取应用商店评论。“史蒂夫”在 2011 年 5 月 8 日发表的评论中的详细信息已经为我工作了几周，显然从那时起已经为很多人工作了。

但就在几天前，突然之间，这不再有效。我知道 Apple 正在慢慢弃用旧版本的 iTunes，因此这些访问它们的方法也是如此。但是检索这些信息的新方法是什么？

所以为了记录我正在使用：

*   URL = [http://ax.phobos.apple.com.edgesuite.net/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=](http://ax.phobos.apple.com.edgesuite.net/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=) &pageNumber=0&sortOrdering=2&type=Purple+Software
*   用户代理 = iTunes/9.2（Macintosh；U；PPC Mac OS X 10.6）
*   X-Apple-店面：

这最近有效，但现在不再有效。

成功的测试是这个测试请求（针对美国的 Netflix 应用程序）应该从命令行运行： curl -A "iTunes/9.2 (Macintosh; U; PPC Mac OS X 10.6)" -H "X-Apple -店面：143441-1" 'http://ax.phobos.apple.com.edgesuite.net/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=284222807&pageNumber=0&sortOrdering=2&type=Purple+Software'

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T12:11:42.760

替换`http://ax.phobos.apple.com.edgesuite.net`为`https://itunes.apple.com`我工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:20:13.370

该 URL 源自使用类似 wireshark 的东西来检查一个非常旧版本的 iTunes 发出的 HTTP 请求。对于可能使用 HTTPS 的较新版本的 iTunes，需要重做此检查。

# php - 如何在 PHP 中设置不同时区的时间设置？

> ID：13139301
> 
> 赞同：0
> 
> 时间：2012-10-30T12:47:31.283
> 
> 标签：php, time, timezone, setting

我用 PHP 做了一个项目，预计将在我的国家伊朗境内运行，其时区为 UTC+3:30。我在我的代码中插入了以下行：

```
date_default_timezone_set('Asia/Tehran'); 
```

但现在，我认为它可能会被来自不同国家的其他人使用。作为该项目的一部分，如果该项目包含用户登录日志，我必须将时间设置为与他们的国家时区相匹配。
我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:07:29.783

以下是设置时区的方法：

```
<?php
session_start();
if(!isset($_SESSION['timezone']))
{
    if(!isset($_REQUEST['offset']))
    {
    ?>
    <script>
    var d = new Date()
    var offset= -d.getTimezoneOffset()/60;
    location.href = "<?php echo $_SERVER['PHP_SELF']; ?>?offset="+offset;
    </script>
    <?php    
    }
    else
    {
        $zonelist = array('Kwajalein' => -12.00, 'Pacific/Midway' => -11.00, 'Pacific/Honolulu' => -10.00, 'America/Anchorage' => -9.00, 'America/Los_Angeles' => -8.00, 'America/Denver' => -7.00, 'America/Tegucigalpa' => -6.00, 'America/New_York' => -5.00, 'America/Caracas' => -4.30, 'America/Halifax' => -4.00, 'America/St_Johns' => -3.30, 'America/Argentina/Buenos_Aires' => -3.00, 'America/Sao_Paulo' => -3.00, 'Atlantic/South_Georgia' => -2.00, 'Atlantic/Azores' => -1.00, 'Europe/Dublin' => 0, 'Europe/Belgrade' => 1.00, 'Europe/Minsk' => 2.00, 'Asia/Kuwait' => 3.00, 'Asia/Tehran' => 3.30, 'Asia/Muscat' => 4.00, 'Asia/Yekaterinburg' => 5.00, 'Asia/Kolkata' => 5.30, 'Asia/Katmandu' => 5.45, 'Asia/Dhaka' => 6.00, 'Asia/Rangoon' => 6.30, 'Asia/Krasnoyarsk' => 7.00, 'Asia/Brunei' => 8.00, 'Asia/Seoul' => 9.00, 'Australia/Darwin' => 9.30, 'Australia/Canberra' => 10.00, 'Asia/Magadan' => 11.00, 'Pacific/Fiji' => 12.00, 'Pacific/Tongatapu' => 13.00);
        $index = array_keys($zonelist, $_REQUEST['offset']);
        $_SESSION['timezone'] = $index[0];
    }
}
date_default_timezone_set($_SESSION['timezone']);

//rest of your code goes here
?> 
```

[**资源**](http://php.net/manual/en/function.date-default-timezone-set.php)

但我建议不要这样做。最好将 GMT（或您的时区）设置为默认值，并在显示时根据每个用户的当前时区更改日志中的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T20:27:02.487

尝试这个：

```
<?php
$fmt = new IntlDateFormatter("fa_IR@calendar=persian", IntlDateFormatter::FULL, IntlDateFormatter::FULL, 'Asia/Tehran', IntlDateFormatter::TRADITIONAL);
echo $fmt->format(time());
?> 
```

# javascript - 如何在 Windows 7 上运行脚本编辑器

> ID：13139305
> 
> 赞同：3
> 
> 时间：2012-10-30T12:47:45.533
> 
> 标签：javascript, windows-7, batch-file, editor

我正在尝试在 Windows XP 上运行脚本编辑器，**但无法连接到 localhost:7261**。故障排除部分也有同样的[问题](https://github.com/scripted-editor/scripted/wiki/FAQ)。建议是延迟运行脚本以启动节点。我在 bin/scripted.bat 中使用以下批处理脚本延迟了它

```
start /MIN cmd /c node %rootdir%\server\scripted.js^>^>scripted.log
timeout /t 30
start "" "http://localhost:7261/editor.html?%patharg%" 
```

我得到同样的错误**无法连接到 localhost:7261**。

如何配置脚本以在节点完成运行后运行？

我使用脚本版本 0.2.0 和节点版本 0.8.0-x86。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:44:50.023

Often times the browser starts before the node server is running - just wait a second and press refresh.

If that fails, you'll find node isn't running. So you either don't have nodeJS installed, it's not on your `PATH` or it's not a new enough version.

Also, check scripted.log in the same folder as you ran `scr` from.

# perl - DBD::SQLite 问题与已安装文件系统上的 I/O 错误有关

> ID：13139309
> 
> 赞同：3
> 
> 时间：2012-10-30T12:48:00.603
> 
> 标签：perl, sqlite

考虑以下 Perl 代码：

```
#!/usr/env/ perl
use strict;
use warnings;
use DBI;

my $filename = 'moo.sqlite';
my $dbh = DBI->connect("dbi:SQLite:dbname=$filename","","");
my $sql = 'INSERT into moo values (1)';
my $sth = $dbh->prepare( $sql );
my $rv = $sth->execute();
print $rv; 
```

运行时产生此错误：

```
DBD::SQLite::db prepare failed: disk I/O error at test.pl line 16.
Can't call method "execute" on an undefined value at test.pl line 18. 
```

SQLite 文件位于 SMBFS/CIFS 网络安装共享上。

我已经进行了一些跟踪，并且似乎在尝试对文件进行锁定时发生了故障：

```
open("moo.sqlite\0", 0x202, 0x1A4)       = 3 0
fcntl(0x3, 0x1, 0x0)         = 0 0
fcntl(0x3, 0x2, 0x1)         = 0 0 
```

虽然我知道网络锁定是有问题的，但在交互式运行“sqlite3”二进制文件时不会出现同样的问题吗？目前，当我这样做时，我可以毫无问题地处理文件。

这是 DBI 造成的吗？

供您参考：

*   操作系统 OS X 10.6.8
*   SQLite 版本 3.7.13
*   Perl 5.12.4
*   DBI 1.622
*   DBD::SQLite 1.37

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:41:53.887

> SQLite 允许多个进程一次打开数据库文件，并允许多个进程一次读取数据库。当任何进程想要写入时，它必须在其更新期间锁定整个数据库文件。但这通常只需要几毫秒。其他流程只是等待作者完成，然后继续他们的业务。其他嵌入式 SQL 数据库引擎通常只允许单个进程一次连接到数据库。

你可以试试这个，它可能会有所帮助：

```
my $dbh = DBI->connect("dbi:SQLite:dbname=$filename","","", "", "", {
  sqlite_use_immediate_transaction => 1,
}); 
```

问题是 CIFS 驱动程序可以配置为支持/允许锁定。如果该部分配置不正确，锁定将不起作用。

您可以尝试更改 samba 中的锁定设置：http: [//oreilly.com/openbook/samba/book/ch05_05.html](http://oreilly.com/openbook/samba/book/ch05_05.html)

尝试的最佳人选：“fake oplocks = yes”

如果它不起作用，您可以尝试在 Windows 机器上设置 ODBC 数据源并通过它访问数据库。

# jquery - Jquery Datatable TableTools 打开pdf选项

> ID：13139310
> 
> 赞同：0
> 
> 时间：2012-10-30T12:48:03.530
> 
> 标签：jquery, datatables, tabletools

我如何保存 pdf/excel 文件（在任何默认位置），而不是像当前 tabletool 那样通过另存为 dailog 框提示用户。

# php - 在 MySql 查询中将字符串日期与另一个字符串日期进行比较

> ID：13139318
> 
> 赞同：3
> 
> 时间：2012-10-30T12:48:26.337
> 
> 标签：php, mysql, sql, date

我正在尝试从日期所在的 MySql 服务器获取条目`> date_begin and < date_end`

我的问题是表列“ `date`”设置为`VARCHAR`，我正在比较的字符串也直接来自`<input type="text"/>`

mysql 表和文本框中的日期格式（字符串/varchar）将是`DD.MM.YYYY`

我的问题是，如果我这样做

（PHP代码）

```
 $query = "SELECT * FROM table WHERE date>='" . $dateBegin . "' AND date<='" . $dateEnd . "'"; 
```

结果将是完全随机的。

我知道为什么会发生这种情况，所以问题是：我如何比较它以获得正确的结果？

感谢所有可以提供帮助的人

**更新 ：**

现在我已经尝试了这个解决方案，但它也不起作用。

```
$query = "SELECT * FROM artikel WHERE STR_TO_DATE(datum, '%d.%m.%Y')>=STR_TO_DATE('" . $_REQUEST['dateTo'] . "', '%d.%m.%Y')" . "' AND STR_TO_DATE(datum, '%d.%m.%Y')<=STR_TO_DATE('" . $_REQUEST['dateTo'] . "', '%d.%m.%Y')"; 
```

`$_REQUEST['dateFrom']`and`$_REQUEST['dateTo']`来自 2 个文本框，输入是这样的字符串`"05.06.2005"`。

在 db-table 'artikel'（文章的德语）中，'datum'（日期的德语）列中的值是具有相同格式（“05.06.2005”）的 VARCHAR。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T12:50:19.560

始终将日期与日期、整数与整数等进行比较。

使用 MySQL，您可以使用这些`str_to_date`函数来指定如何处理您的字符串日期。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

例如，如果您的日期列名为“mydate”：-

```
SELECT * from table
where STR_TO_DATE(mydate, '%m/%d/%Y') >= STR_TO_DATE('04/31/2004', '%m/%d/%Y')
... 
```

并始终确保您正在验证来自用户的任何字符串输入，以避免 SQL 注入攻击。

**编辑**：正如 Dems 上面指出的那样，这是次优的，因为日期值应作为日期值存储在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:50:36.097

你可以在之间使用

```
"SELECT * FROM table WHERE date between'" . $dateBegin . " AND " . $dateEnd . "'"; 
```

# apache - 如何在子域中的反向代理后面运行 PrimeFaces？

> ID：13139319
> 
> 赞同：9
> 
> 时间：2012-10-30T12:48:27.773
> 
> 标签：apache, jsf-2, primefaces, subdomain, reverse-proxy

我已经使用 PrimeFaces 构建了一个应用程序，并希望在 apache 反向代理后面运行它。

我的目标网址如下所示`http://myserverurl.org:8080/myapplication/`。

我想通过这样的子域访问应用程序`http://myapplication.myserverurl.org`。

我在 apache 中配置了一个 VirtualHost：

```
<VirtualHost *:80>
    ServerName myapplication.myserverurl.org
    ProxyPass / http://myserverurl.org:8080/myapplication/
    ProxyPassReverse / http://myserverurl.org:8080/myapplication/
</VirtualHost> 
```

效果不太好。我可以看到 JSF 页面，但没有应用 CSS 等。我可以看到第一个请求被正确重定向，但以下请求（加载 jQuery、CSS 等）没有。

他们试图访问一个`http://myapplication.myserverurl.org/myapplication/faces/javax.faces.resource/primefaces.js?ln=primefaces`明显错误的网址。它们不能再次包含**/myapplication/**路径，因为代理已经重定向到该路径。

我该如何解决这个问题？这是 PrimeFaces 问题还是我的反向代理配置有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T20:01:12.153

使用（或不使用）AJP 与解决此特定问题无关。

Primefaces 在内部使用上下文路径变量来包含 CSS 和 Javascript 资源。即使使用 AJP，您最终也会得到：

/unwantedAppContext/javax.faces.resource/jquery/jquery.js.jsf?ln=primefaces

你可以做些什么来解决这个添加另一个代理传递来处理不需要的上下文。这可能不是最好的解决方案，但它确实有效。

```
<VirtualHost *:80>

    ServerName myapplication.myserverurl.org

    ProxyPass /myapplication/ http://myserverurl.org:8080/myapplication/
    ProxyPassReverse /myapplication/ http://myserverurl.org:8080/myapplication/

    ProxyPass / http://myserverurl.org:8080/myapplication/
    ProxyPassReverse / http://myserverurl.org:8080/myapplication/
</VirtualHost> 
```

通行证的顺序很重要。

[icefaces 论坛http://www.icesoft.org/JForum/posts/list/4433.page#sthash.h1qSqiYg.dpbs](http://www.icesoft.org/JForum/posts/list/4433.page#sthash.h1qSqiYg.dpbs)也报告了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T12:56:41.957

考虑使用mod_proxy_html 模块中的[ProxyHTMLURLMap](http://httpd.apache.org/docs/current/mod/mod_proxy_html.html#proxyhtmlurlmap)指令。此模块操作输出 HTML 链接以指向正确的位置。在你的情况下，所有的链接都`http://myapplication.myserverurl.org/`需要改回/，即

```
ProxyHTMLURLMap http://myapplication.myserverurl.org/ / 
```

这样，您可以修改任何指向错误位置的回调链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:53:21.650

根据应用服务器的不同，它可能会有所不同，但作为主要规则，您应该使用 AJP 进行代理。
第一步是根据操作系统启用 ajp 模块。Ubuntu 看起来像这样。

```
sudo a2enmod proxy proxy_ajp 
```

第 2 步，将 apache conf 中的代理定义更改为：

```
ProxyPass / ajp://localhost:8009/myapplication
ProxyPassReverse / ajp://localhost:8009/myapplication 
```

第 3 步是在应用程序服务器上启用它。同样，它取决于您使用的那个。Tomcat 在 server.xml 中有一个注释掉的部分。Glassfish 在管理控制台中有一个复选框和一个 asadmin 命令（但我不记得了）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-20T09:05:34.740

jjhavokk 的答案有效，但对于图形，您需要通过 request.contextPath 引用它们

```
<img src="#{request.contextPath}/resources/yourfolder/yourpng.png" /> 
```

将它放在 webapp/resources/yourfolder/yourpng.png 使用我的 .css 文件，这不是必需的

```
h:outputStylesheet name="css/screen.css" 
```

在 webapp/resources/css

# jquery - jQueryUI 按钮集样式问题

> ID：13139321
> 
> 赞同：0
> 
> 时间：2012-10-30T12:48:34.567
> 
> 标签：jquery

我正在做一个按钮组，这是正常的，[照片](http://s11.postimage.org/sieamntpv/buttonset2.png)

所以，在应用了一些 UI 样式之后，我得到了按钮样式，但是请检查下一张[图片](http://s13.postimage.org/lx8rmiw3b/buttonset1.png)……一个奇怪的按钮点出现在左侧。（如果我点击它，按钮集会激活按钮 #3）

我不得不说这个奇怪的小按钮只出现在 Chrome 中，如果我使用 IE 浏览它，它是 100% 没问题的。

按钮集的代码非常简单，

**//JS**

```
$(document).ready(function () {
        $("#radio").buttonset();
    }); 
```

**//HTML**

```
<div id="radio" align="center">
    <input type="radio" id="radio1" runat="server" value="BtnNextCaseClick" name="radio" checked="true"/><label for="radio1" style="width: 109px; margin-right:-.9em">Siguiente Caso</label>
    <input type="radio" id="radio2" runat="server" value="CloseCaseAndBandeja" name="radio" /><label for="radio2" style="margin-right:-.9em">Terminar Caso y Cerrar Bandeja</label>
    <input type="radio" id="radio3" runat="server" value="CloseBandeja" name="radio"/><label for="radio3" style="width: 109px">Cerrar Bandeja</label>
</div> 
```

关于如何消除该样式错误的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:44:36.043

### 尝试这个

```
#radio .ui-helper-hidden-accessible { display: none; } 
```

### 解释

我在我的项目中观察到 buttonset() 工作原理的一部分是它在基础无线电输入上设置了“ui-helper-hidden-accessible”类，然后应该会导致无线电输入按照样式隐藏在 jQuery UI CSS 样式表中为 'ui-helper-hidden-accessible' 定义。

但是，IMO，正如您的 Chrome 案例和我的 IE 案例所证明的那样，在我看来，“ui-helper-hidden-accessible”的 jQuery UI CSS 样式不足以在所有情况下隐藏无线电输入. 所以我的回答是将这个简短的 jQuery UI hack 添加到项目的样式表中并完成它。毕竟，我们确实希望隐藏真正的无线电输入，因为我们需要按钮。毕竟，我们确实希望无线电输入仍然存在，因为这就是一切在幕后工作的方式——按钮集只是前端的一个层。

hack 样式在针对 ui-helper-hidden-accessible 类之前针对 buttonset 容器（在您的情况下是 #radio），以便将 hack 的应用限制在我们知道它是必要且有效的地方——即所以它不会破坏您网站的其他部分、其他 jQuery UI 组件等。

请注意，您没有提及您的 jQuery UI 版本，因此我不能 100% 确定您的情况。我在 jQuery UI 1.8.17 上开发了这个 hack，它将 ui-helper-hidden-accessible 定义为

```
.ui-helper-hidden-accessible 
{ 
    position: absolute !important;  
    clip: rect(1px 1px 1px 1px); 
    clip: rect(1px,1px,1px,1px); 
} 
```

# javascript - iOS文本框`.focus（）`没有聚焦

> ID：13139325
> 
> 赞同：3
> 
> 时间：2012-10-30T12:48:45.063
> 
> 标签：javascript, ios, web

我有以下内容，用于在单击 div 时将焦点设置到文本框。这在桌面和 android 上运行良好，但在 iOS（4、5 或 6）中不起作用。网上有很多关于此类问题的评论，但没有一个能解决我的问题。

```
$("#div").bind("click", function () {
    document.getElementById("textbox").focus();
}); 
```

我如何让它在 iOS 上工作？

# data-binding - 使用 Webparts 在 sharepoint 2010 中的 SPgridview 中编辑、删除、更新操作

> ID：13139326
> 
> 赞同：2
> 
> 时间：2012-10-30T12:48:45.803
> 
> 标签：data-binding, sharepoint-2010, spgridview

我的 SharePoint 网站中有一个列表，名称为“Empdetails”并包含列（EmpName 字符串、Empaddress 字符串）。

我必须使用编辑、删除、更新功能将列表数据绑定到 SpGridview。

我能够成功地将列表数据绑定到 gridview，但我无法为 gridview 提供编辑、删除、更新功能。

代码：

```
private void binddata()
{
    SPWeb mySite = SPContext.Current.Web;
    SPList myList = mySite.Lists["Empdetails"];
    SPListItemCollection items = myList.Items;

    //Here we will make a datatable and we will put our list data to the data table
    DataTable table=new DataTable();
    table.Columns.Add("EmpName", typeof(string));
     table.Columns.Add("Empaddress", typeof(string));    

    // Create rows for each splistitem
    DataRow row;
    foreach (SPListItem result in items)
    {
        row = table.Rows.Add();
        row["EmpName"] = result["EmpName"].ToString();
        row["Empaddress"] = result["Empaddress"].ToString();

    }
    //binding data to gridview
    GridView1.DataSource = table.DefaultView;
    GridView1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T12:02:09.613

protected void Page_Load(object sender, EventArgs e) { if (!IsPostBack) { Bindata(); } }

```
 public void Bindata()
    {
        SPWeb web = SPContext.Current.Web;
        SPList list = web.Lists["VisualWebpart"];

        DataTable dt = new DataTable();
        dt.Columns.Add("Title", typeof(string));

        foreach (SPListItem item in list.Items)
        {
            DataRow dr = dt.NewRow();
            dr["Title"] = item["Title"].ToString();
            dt.Rows.Add(dr);
        }

        GridView1.DataSource = dt;
        GridView1.DataBind();
    }

    protected void grd_Insert(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Insert")
        {
            SPWeb currentWeb = SPContext.Current.Web;
            SPList lst = currentWeb.Lists["VisualWebpart"];
            SPListItemCollection myColl = lst.Items;
            TextBox txtTitle = (TextBox)GridView1.FooterRow.FindControl("txtTitle");
            SPListItem item = myColl.Add();
            item["Title"] = txtTitle.Text;

            item.Update();
            txtTitle.Text = "";
            Bindata();
         }

    }

    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
    {

        GridView1.EditIndex = e.NewEditIndex;
        Bindata();
     }

    protected void GridView1_Cancel(object sender, GridViewCancelEditEventArgs e)
    {

        GridView1.EditIndex = -1;
        Bindata();
    }

    protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {

        GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
        int Title = row.DataItemIndex;

        SPWeb currentWeb = SPContext.Current.Web;
        SPList lst = currentWeb.Lists["VisualWebpart"];
        SPListItemCollection myColl = lst.Items;
        int itemcount = myColl.Count;

        for (int i = 0; i <= itemcount-1; i++)
        {
            SPListItem item = myColl[i];
            if (Title==i)
            {
                myColl.Delete(i);
            }
        }

        Bindata();

    }

    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
        int Title = row.DataItemIndex;

        SPWeb currentWeb = SPContext.Current.Web;
        SPList lst = currentWeb.Lists["VisualWebpart"];
        SPListItemCollection myColl = lst.Items;
        int itemcount = myColl.Count;
        TextBox txtTit = (TextBox)GridView1.Rows[e.RowIndex].FindControl("txtTit");

        string d = txtTit.Text;

        for (int i = 0; i <= itemcount - 1; i++)
        {
            SPListItem item = myColl[i];
            if (Title == i)
            {
                item["Title"] = d;
                item.Update();

            }
        }
        GridView1.EditIndex = -1;
        Bindata();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:05:17.750

您将需要编写所有用于更新和删除的代码。它不是自动提供的。

就个人而言，我建议使用指向数据表视图的现成列表视图 Web 部件，而不是尝试创建我自己的。

但是，如果您必须编写自定义代码，您上面的代码可能可以从此简化：

```
DataTable table = new DataTable();
table.Columns.Add("EmpName", typeof(string));
table.Columns.Add("Empaddress", typeof(string));    
DataRow row;
foreach (SPListItem result in items)
{
    row = table.Rows.Add();
    row["EmpName"] = result["EmpName"].ToString();
    row["Empaddress"] = result["Empaddress"].ToString();
} 
```

对此：

```
DataTable table = items.GetDataTable(); 
```

# java - 关于java中的正则表达式

> ID：13139337
> 
> 赞同：0
> 
> 时间：2012-10-30T12:49:22.513
> 
> 标签：java, regex

我有一个字符串如下。

```
 $x:Test( (x==5 || y==4) && ( (r==9 || t==10) && ( n>=2 || t<=4))) demo program 
```

在上面的字符串中，左右括号的数量将根据条件进行更改。

我的要求是每当我遇到最后一个右括号时，就需要连接下面的字符串。

```
 from "stream" 
```

所以结果如下。

```
$x:Test( (x==5 || y==4) && ( (r==9 || t==10) && ( n>=2 || t<=4))) from "stream" demo program 
```

为了实现这一点，我正在尝试使用 java 中的以下代码。

```
Pattern pattern = Pattern.compile(".*?\\.Event\\(([^\\(]*?|\\([^\\)]*?\\))*\\)");

if(line.matches(".*\\.Test(.*).*")){
    line = pattern.matcher(line).replaceAll("$0 from  \""+"stream"+"\""+" ");                 
} 
```

但是如果左右括号的数量超过 5 ，上面的代码就不起作用。

需要指针来实现所需的结果我的意思是我需要任何数量的左右括号的通用解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T12:53:01.927

为什么要使用正则表达式？只需使用简单的`String`类方法 -[`String#lastIndexOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf%28int%29)并[`String#substring`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)解决问题： -

```
String str = "$x:Test( (x==5 || y==4) && ( (r==9 || t==10) && " + 
             "( n>=2 || t<=4))) demo program";

int index = str.lastIndexOf(")");
str = str.substring(0, index + 1) + " from \"stream\"" + 
      str.substring(index + 1); 
```

`Regexp`是一种非常强大的语言，但对于这样的事情实际上并不需要，您可以确定需要在哪里拆分字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:55:30.533

要在最右边的括号之后获得它，您可以`replaceFirst()`像这样使用：

```
String data = "   $x:Test( (x==5 || y==4) && ( (r==9 || t==10) && ( n>=2 || t<=4))) demo program ";
data = data.replaceFirst("^(.*\\))([^)]*)$", "$1 from \"stream\"$2"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:57:47.967

.* 在正则表达式中是贪婪的，因此搜索`^(.*\))(.*)`并替换为`$1 from \"stream\"$2`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:53:59.093

你可以使用[String.lastIndexOf()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#lastIndexOf%28int%29)吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T12:56:18.690

You may want to use `lastIndexOf()` and `substring()` functions as below:

```
String text = 
  "$x:Test( (x==5 || y==4) && ( (r==9 || t==10) && ( n>=2 || t<=4))) demo program";

int lastIndex = text.lastIndexOf(")");
String updatedText = 
        text.substring(0,lastIndex)+" from \"stream\""+text.substring(lastIndex+1); 
```

**EDIT:** use `replaceAll` to replace all occurrences of `)))` with `))) from "stream"` as below:

```
 String text = 
  "$x:Test( (x==5 || y==4) && ( (r==9 || t==10) && ( n>=2 || t<=4))) demo program";

 String updatedText = text.replaceAll("\\)\\)\\)", "\\)\\)\\) from \"stream\""); 
```

# ios - ios通话不可用

> ID：13139348
> 
> 赞同：0
> 
> 时间：2012-10-30T12:49:54.930
> 
> 标签：ios, ipad, call, ipod

我怎么知道我不能从设备拨打电话？例如电子邮件：`[MFMailComposeViewController canSendMail]` 有什么可以打电话的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:52:30.780

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"tel:+123456"]]) {
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:15:14.443

这可用于调用：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:12125551212"]]; 
```

请参考此链接了解更多信息：

[iPhoneURLScheme 参考](https://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)

# php - 使用 PHP/MySQL 将 +1 添加到最后一个条目（自动增量）

> ID：13139349
> 
> 赞同：0
> 
> 时间：2012-10-30T12:49:56.000
> 
> 标签：php, mysql, auto-increment

> **可能重复：**
> [如何填写自动增量字段中的“漏洞”？](https://stackoverflow.com/questions/1841104/how-to-fill-in-the-holes-in-auto-incremenet-fields)

我们目前在一个表中使用自动增量，其中条目不断地来来去去。问题在于，最终自动增量 id 会变得很大，因为这就是自动增量的工作方式。

我们希望它始终将 +1 添加到最后一个条目。

例如：
我们有 4 个条目，id 4 被删除。下一个添加的条目应该得到 id 4，而不是 5。

我不确定以前是否有人问过这个问题。但是在搜索之后，我只能找到关于如何获得下一个自增数的解决方案，这根本不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:55:59.690

**您不应该**这样做，因为 auto_increment 以这种方式设计是有充分理由的（例如，如果您有备份并且当它包含已重写的旧删除 id 时想要恢复它，您该怎么做？）

但要回答你的问题：你必须使用

```
ALTER TABLE `table` AUTO_INCREMENT = MAX(id)+1; 
```

删除后，可以触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:54:04.973

如果你真的想这样做（我个人鼓励你使用自动增量），你需要执行一个事务来获取最后一个 ID 并插入新行，设置它的 ID 根据另一个递增它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T12:56:28.010

这样做不是一个好主意，ID 应该始终保持唯一，无论记录是存在还是被删除。

但是，如果你真的想这样做，你可以用类似的东西来做到这一点

```
select max(id) + 1 of bla; 
```

但是您需要正确的事务级别，因为如果您不这样做，则可能会出现重复的 ID。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-30T12:55:02.733

您可以选择最大 id 值并增加它。

```
SELECT MAX(`id`)+1 as `new id` FROM `table`; 
```

如果你有 5 个条目并且第 3 个被删除，这仍然会让你 6 作为下一个 id。

# javascript - 使用 Jquery 在悬停时交换回图像

> ID：13139357
> 
> 赞同：1
> 
> 时间：2012-10-30T12:50:26.500
> 
> 标签：javascript, jquery, html

我有这个 HTML 代码：

```
<a href="#"><img class="swap" src="/Static/Images/Meny_normal_01.png"  alt="" /></a> 
```

这是我的 Jquery 代码，它的作用是当我将鼠标悬停在我的 img 上时，它会切换到另一个 img，但我想悬停一下，然后它会切换回旧的 img。

```
$(document).ready(function () {
    $('.swap').hover(function () {
        $(this).attr('src', '/Static/Images/Meny_hover_01.png');
    });
}); 
```

将不胜感激任何形式的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:54:40.700

[.hover()](http://api.jquery.com/hover/)将两个处理程序绑定到匹配的元素，在鼠标指针进入和离开元素时执行。

```
$(".swap").hover(
  function () {
    $(this).attr('src', '/Static/Images/Meny_hover_01.png');
  },
  function () {
    $(this).attr('src', '/Static/Images/Meny_normal_01.png');
  }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:55:20.190

您可以将 2 个处理程序传递给悬停 - 如下所示：

```
$(document).ready(function () {
    $('.swap').hover(function () {
        $(this).attr('src', '/Static/Images/Meny_hover_01.png');
    },
    function () {
        $(this).attr('src', '/Static/Images/Meny_normal_01.png');
    }
    );
}); 
```

看看：[http](http://api.jquery.com/hover/) ://api.jquery.com/hover/了解更多信息

或类似的项目：[jquery change image on mouse rollover](https://stackoverflow.com/questions/13058912/jquery-change-image-on-mouse-rollover)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:54:22.267

```
$(".swap").hover(function() {
    $(this).attr("src", function(i, val) {
        return val.indexOf("hover") == -1
          ? val.replace("normal", "hover")
          : val.replace("hover", "normal");
    });
}); 
```

**演示：http:** [//jsfiddle.net/UJR8M/](http://jsfiddle.net/UJR8M/)

# plone - 在 Plone 4.3 中开发 grok 风格的敏捷插件

> ID：13139358
> 
> 赞同：2
> 
> 时间：2012-10-30T12:50:28.737
> 
> 标签：plone, setuptools, buildout, dexterity, grok

根据：

*   [http://plone.org/products/dexterity/documentation/how-to/install](http://plone.org/products/dexterity/documentation/how-to/install)

要在**Plone 4.3中使用****grok 风格的**声明，必须通过带有**setuptools**额外要求的 buildout安装**Dexterity**：grok 和关系（参考plone.app.dexterity 的 setup.py 中的定义）。但是，想要代表最终用户执行此配置的附加开发人员应该怎么做呢？******`extras_require`******

 ******使用我的[collective.project](https://github.com/collective/collective.project)插件，我`extras_require`从plone.app.dexterity 复制了：

```
setup(
    author='Alex Clark',
    author_email='aclark@aclark.net',
    description='Demo app: project management with dexterity content types.',
    entry_points={
        'z3c.autoinclude.plugin': 'target = plone',
    },
    extras_require = {
        'test': [
            'plone.app.testing',
            'unittest2'
            ],
        'grok': [
            'five.grok',
            'plone.directives.dexterity',
            'plone.directives.form >=1.1dev',
            ],
        'relations': [
            'plone.app.relationfield',
            'plone.app.intid',
            'z3c.relationfield',
            ]
    }, 
```

这允许最终用户简单地通过添加到鸡蛋列表来安装collective.project，例如

```
[plone]
recipe = plone.recipe.zope2instance
eggs =
  Pillow
  Plone
  collective.project 
```

这是一个合理的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T00:22:08.450

不它不是。不要`extras_require`从 plone.app.dexterity 复制，它没有帮助（尽管可能包括 extras_require 作为 install_requires 会起作用，但这会破坏 extras_require 的目的）

但是，您可以使用与 Buildout`extras_require`在**setup.py**中指定的类似语法：

```
install_requires=[
    'setuptools',
    'plone.app.dexterity[grok]',
], 
```******

# html - 为什么有时父元素的高度为 0px？

> ID：13139359
> 
> 赞同：2
> 
> 时间：2012-10-30T12:50:28.780
> 
> 标签：html, css

几周前我开始使用 HTML 和 CSS，这种情况发生了好几次，我不知道为什么。

有时我将背景应用于父元素，在其上包含一些内容，但父元素`height`的保留`0`而不是子元素的接收`height`。有时确实如此（我认为这应该是正确的行为，不是吗？）

我的词汇表选择器得到`0`高度。因此我的背景颜色不显示。

```
.glossarySelector {
  background: #EFEFEF; 
}

<div class="glossarySelector">
  <ul>
    <li><a href="#">A</a></li>
    <li><a href="#">B</a></li>
    <li><a href="#">C</a></li>
    <li><a href="#">D</a></li>
    <li><a href="#">E</a></li>
  </ul>
</div> 
```

为什么？

[你可以在这里](http://jsfiddle.net/gTKNk/3/)看到完整的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:59:36.460

编辑：这个 SO 答案提供了几种解决此问题的方法，每种方法都有其优点和缺点：[https ://stackoverflow.com/a/1633170/388916](https://stackoverflow.com/a/1633170/388916)

* * *

当一个元素没有子元素或者子元素从页面流中使用`position: absolute`或浮动移除时，它是完全平坦的（0px 高度）。由于列表元素都有， *glossarySelector*`float: left`内没有更多元素来扩展它的高度。

 *我看到您创建了一个名为“clearFix”的类。*只需在glossarySelector* div 中添加一个具有该类的div 即可修复浮动问题：

```
<div class="glossarySelector">
    <ul>
        <li><a href="#">A</a></li>
        <li><a href="#">B</a></li>
        <li><a href="#">C</a></li>
        <li><a href="#">D</a></li>
        <li><a href="#">E</a></li>
    </ul>
    <div class="clearFix"></div>
</div> 
```

小提琴：http: [//jsfiddle.net/gTKNk/12/](http://jsfiddle.net/gTKNk/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:59:10.090

您可以在词汇表选择器上使用“clearfix”。

```
.glossarySelector
{
     background: #000;
     overflow: hidden;
} 
```

请参阅[我可以使用哪些“clearfix”方法？](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)用于替代 clearfix 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:03:06.537

“溢出：隐藏”是解决此问题的技巧。希望这可以帮助。

```
.glossarySelector
    {
    background-color: #ff0000;
    overflow:hidden;
    } 
```

[这里](http://jsfiddle.net/gTKNk/18/)的例子。

[这个答案](https://stackoverflow.com/a/1633170/948445)解释了有关清除修复的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:05:44.830

那是因为`float: left`列表项上有一个`<li>`

你可以这样做：

```
.glossarySelector {
  background: #EFEFEF;
  overflow: hidden;
} 
```

或[添加一个clearfix](http://www.webtoolkit.info/css-clearfix.html)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-30T13:02:35.887

div 的默认显示模式是“块”，在所有情况下都不会环绕它的内容。你应该添加`display: inline-block;`

在您的代码中，由于 ul 元素，列表仍将在右侧重叠`left: 30px`，但如果您将其替换为`margin-left:30px;`or`padding-left:30px;`它将正常工作；）*

# javascript - 格式化从脏数据存储中获取的值

> ID：13139365
> 
> 赞同：0
> 
> 时间：2012-10-30T12:50:54.080
> 
> 标签：javascript, node.js, node-dirty

是否可以格式化从脏中获取的数据？例如，将 83647 格式化为 83,647。对于未格式化的数据，我有以下代码：

```
db.on('load', function() {
  db.set('john', {completed: '83647'});
  console.log('John's completed tasks are: %s', db.get('john').completed);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:33:14.890

[Numeral.js](http://numeraljs.com/)是您正在寻找的东西..

例子：

```
numeral(12345).format('0,0'); // -> 12,345 
```

# c# - c# linq 在数据表上查询以选择所有具有重复项的最小值

> ID：13139366
> 
> 赞同：1
> 
> 时间：2012-10-30T12:50:57.047
> 
> 标签：c#, linq, datatable

我有一个数据表，如：

```
ChNo     ChData
1         0.1
1         0.2
2         0.0
1         0.1
2         0.2
1         0.1
1         0.1
2         0.0 
```

对于基于 chNO 的最小值，我编写了如下查询

```
var minLPData = from minData in loadProfileData.AsEnumerable()
                                orderby minData["ChNo"]
                                group minData by minData["ChNo"] into g                                
                                select new
                                {
                                    ChNo = g.Key,
                                    ChData = g.CopyToDataTable().Compute("Min(ChData)", string.Empty)
                                }; 
```

但结果我越来越喜欢

```
ChNo     ChData
1         0.0
2         0.0 
```

我想要基于 ChNo 的所有最小值，包括重复项

```
ChNo     ChData
1         0.1
1         0.1
1         0.1
1         0.1
2         0.0
2         0.0 
```

什么变化让我得到目标表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:39:48.277

据我了解，您需要：

1.  按渠道对元素进行分组
2.  找到每个通道的最小值
3.  查找所有具有此值的元素

所以，我们开始：

```
var minLPData =
    from data in loadProfileData.AsEnumerable()
    group data by data["ChNo"] into gData
    orderby gData.Key
    let minValue = gData.Min(d => d["ChData"])
    select new
        {
            ChNo = gData.key,
            ChData = gData.Where(d => d["ChData"] == minValue).ToList()
        }; 
```

这将为您提供任何匿名类型的枚举。然后，您可以将其转换为字典。匿名类型中的 ChData 成员是一个与初始数据类型相同的列表，但如果要对其进行转换，可以进行 Select。

与您的代码相比，这里的主要区别是在 ChData 成员的构造中使用 Where() 子句（以及使用 let 子句来计算最小值）。

编辑：如果您想要一个级别的值列表（而不是列表列表），您可以使用 SelectMany：

```
var plainList = minLPData.SelectMany(g => g.ChData.Select(d => new { ChNo = g.key, ChData = d["ChData"] })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:57:57.120

```
IEnumerable<DataRow> lowestChNoRows = loadProfileData.AsEnumerable()
            .GroupBy(r => r.Field<double>("ChNo"))
            .OrderBy(g => g.Key)
            .First(); 
```

如果你想要一个`DataTable`具有最低值行的新的：

```
DataTable tblLowestChNoRows = lowestChNoRows.CopyToDataTable(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:02:39.700

你为什么要分组？在我看来，您只想要所有列表的最小值。

```
var list = loadProfileData.AsEnumerable().ToList();

// Get the minimum value
var minValue = list.Min(v => v["ChData"]);

// Get all elements that have the same value than the minimum value
// Order them by ChNo
var minimums = list.Where(v => v["ChData"] == minValue).OrderBy(v => v["ChNo"]); 
```

然后，您可以根据需要转换此列表，例如：

```
var minLPData = minimums.Select(v => new { ChNo = v["ChNo"], ChData = v["ChData"] }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:18:43.380

```
// Prepare the data
var table = new DataTable();    

// The type must be specified explicitly,
// otherwise it will be string
table.Columns.Add("ChNo", typeof(int));
table.Columns.Add("ChData", typeof(double));

new[]
{
    new {Key = 1, Data = 0.0},
    new {Key = 1, Data = 0.1},
    new {Key = 2, Data = 0.0},
    new {Key = 1, Data = 0.0},
    new {Key = 2, Data = 0.1},
    new {Key = 1, Data = 0.0},
    new {Key = 1, Data = 0.0},
    new {Key = 2, Data = 0.0},
}
.ToList().ForEach(p => table.Rows.Add(p.Key, p.Data));

// Make a projection, so it is easier to work with
var data = table.AsEnumerable().Select(p => 
    new { Key = p["ChNo"], Data = p["ChData"] }).ToArray();

var minValues = data.GroupBy(p => p.Key)
    .ToDictionary(p => p.Key, p => p.Min(i => i.Data));

var res = data.Where(p => minValues[p.Key] == p.Data)
    .OrderBy(p => p.Key)
    .ToArray(); 
```

![结果](../Images/2cfc38f3b7890e30dd76c7c244bbbe8c.png)

# ios - ios在继承uitableviewcell时遇到异常

> ID：13139367
> 
> 赞同：0
> 
> 时间：2012-10-30T12:51:00.200
> 
> 标签：ios, uitableview, key-value-coding

我正在尝试为 UITableview 构建一个自定义单元格。我采取的方法是

*   子类化`UITableViewCell`并创建了我自己的自定义类，其中包含 UI 组件（标签、图像等）的成员

*   创建了一个笔尖并将其类更改为我的自定义类。

这是我班级的代码

**头文件**

```
#import <UIKit/UIKit.h>

@interface ActivePoolViewCustomCell : UITableViewCell{
    UILabel* lblDate;
}
@property (nonatomic, retain)IBOutlet UILabel* lblDate;
@end 
```

**实施文件**

```
#import "ActivePoolViewCustomCell.h"

@implementation ActivePoolViewCustomCell
@synthesize lblDate;
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

然后我创建了一个 nib 并将其类更改为 ActivePoolViewCustomCell 并将 UILabel 连接到 lblDate 插座。

现在，我面临的问题是，当我执行以下代码来加载 nib

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"ActivePoolCell";

    ActivePoolViewCustomCell* cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        // Load the top-level objects from the custom cell XIB.
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ActivePoolViewCustomCell" owner:self options:nil];
        // Grab a pointer to the first object (presumably the custom cell, as that's all the XIB should contain).
        cell = (ActivePoolViewCustomCell*)[topLevelObjects objectAtIndex:0];
        cell.lblDate.text = @"abcd";
    }
    return cell;
} 
```

我收到以下错误

2012-10-30 18:13:56.451 Cda[637:f803] *** **由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键值编码关键 lblDate。**

经过一番挣扎，我无法理解这个问题的原因。这里有什么问题 ？还是这个概念本身是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:06:41.610

我终于把它整理出来了。问题是，我将 ActivePoolViewCustomCell 类应用于我的自定义单元格笔尖的文件所有者，我应该将其应用于单元格本身。

这个视频帮助我解决了这个问题

[http://www.youtube.com/watch?v=d_kO-J3DYvc](http://www.youtube.com/watch?v=d_kO-J3DYvc)

# android - Froyo 上的动画列表帧持续时间错误

> ID：13139372
> 
> 赞同：0
> 
> 时间：2012-10-30T12:51:20.517
> 
> 标签：android, android-animation, android-2.2-froyo

在我的应用程序中，我使用了一个闪烁的播放暂停按钮`animation-list`，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false">
    <item android:drawable="@drawable/play_pause" android:duration="750" />
    <item android:drawable="@drawable/play_pause_play" android:duration="750" />
</animation-list> 
```

两者都是`play_pause`PNG`play_pause_play`文件。此动画`@drawable/play_pause_ready`在 a 中使用（as ）`level-list`：

```
<?xml version="1.0" encoding="utf-8"?>
<level-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:maxLevel="1" android:drawable="@drawable/play_pause_pause" />
    <item android:maxLevel="2" android:drawable="@drawable/play_pause_play" />
    <item android:maxLevel="3" android:drawable="@drawable/play_pause" />
    <item android:maxLevel="10" android:drawable="@drawable/play_pause_ready" />
</level-list> 
```

而 the`level-list`又被用作 a 中的复合可绘制对象`TextView`。如果它是相关的，操作它的代码如下所示：

```
private void updatePlayPauseButton(...) {
    if (getView() != null) {
        LevelListDrawable ld = (LevelListDrawable) timeField.getCompoundDrawables()[2];
        ld.setLevel(...);
        Drawable child = ld.getCurrent();
        if (child instanceof AnimationDrawable) {
            AnimationDrawable ad = (AnimationDrawable) child;
            ad.start();
        }
    }
} 
```

并从 onStart() 和其他地方调用（在响应按钮按下时调用行为是相同的）。

在 ICS 和 Jellybean 上，一切正常，但在运行 Froyo 的 HTC Desire 上，动画显示错误。动画的第一帧显示大致正确的持续时间（750 毫秒），但第二帧显示的时间很短，不超过 20 毫秒。

这看起来很像 Froyo 中的一个错误，但我在 Internet 上找不到任何关于它的信息。以前有没有人遇到过这个问题，如果有，是否有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T09:13:51.597

我在 Android 2.2 上遇到了类似的问题`animation-list`，3.2
解决了`AnimationDrawable.setCallback()`

```
void startAnimation(ImageView iv) {
    final AnimationDrawable ad = (AnimationDrawable) iv.getDrawable();
    ad.setCallback(iv);
    ad.setVisible(true, true);
    iv.post(new Runnable() {
        @Override public void run() {
            ad.start();
        }
    });
} 
```

# asp.net - IIS 应用程序 - 一些 Url 应该需要客户端 ssl 证书，而其他不需要它

> ID：13139373
> 
> 赞同：3
> 
> 时间：2012-10-30T12:51:29.827
> 
> 标签：asp.net, authentication, iis, ssl, client-certificates

我有一个 IIS7 托管的 asp .Net 应用程序（用 c# 编写）。

有些应用程序 URL 需要使用客户端证书访问，有些则必须在没有它的情况下访问。

这不是 [此 SA 问题](https://stackoverflow.com/questions/5701389/ssl-client-cert-authentication-for-only-some-urls)的重复，因为将应用程序设置为所有 URL 的“接受客户端证书”会导致某些浏览器 (Android) 向用户显示一个对话框以选择客户端证书，即使它实际上并不需要对于这些特定的网址。

因此，我需要 2 组 Urls（为简单起见，假设为 2 Urls）- 一组 IIS**需要**SSL 证书，一组 url**不需要**证书。

有什么方法可以在 IIS 中实现这一点，还是我必须将我的应用程序分成 2 个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:46:29.137

最终解决了它

1.  在我的应用程序下为不需要协商客户端证书的 URL 创建一个虚拟目录。
2.  将虚拟目录的 ssl 设置中的客户端证书设置更改为“忽略”。
3.  虚拟目录指向我的应用程序
4.  由于 web 配置现在被读取两次（一次用于虚拟目录，一次用于应用程序），需要使某些设置具有幂等性（意思是 - 在添加某些 web.config 设置之前添加删除）。
5.  主应用 ssl 客户端证书设置保持在“接受”状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:57:01.587

In MVC there is an attribute you can add to your controller methods such as:

```
 [RequireHttps]
public ActionResult PageOne() {
     return this.View();
}

 public ActionResult PageTwo() {
    return this.View(); } 
```

The first would require SSL, the second would not.

In WebForms you could create a httpModule that checks the url in the ApplicationBeginRequest method and redirects to the SSL page if required, but this would need to be on a page by page basis.

I do not think you can do this in IIS. Hopefully this points you in the right direction.

# groovy - Groovy - 使用迭代器添加地图条目

> ID：13139376
> 
> 赞同：9
> 
> 时间：2012-10-30T12:51:37.857
> 
> 标签：groovy, map

请解释一下，为什么这不起作用（JDK7 上的 Groovy 2.0.5）。我只想从列表中添加一些地图条目。

```
def map = new HashMap<String,String>()
map << ["key":"value"]

def list = ["a","b","c"]
list.each {
    map << [it:"value"]
}
println map
println map.a
println map.containsKey("a")

/*
[key:value, a:value, b:value, c:value]
null        <- ?
false       <- ?
*/ 
```

它也不适用于：

```
map << ["$it":"value"] 
```

但它正在与：

```
map << [(""+it):"value"] 
```

？？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T13:00:43.093

这个

```
map << [it:"value"] 
```

只需使用一个名为`it`. 如果你用括号括起来：

```
map << [(it):"value"] 
```

它可以按您的意愿工作...

如果你这样做：

```
map << ["$it":"value"] 
```

然后，您可以看到您有一个`GStringImpl`: 作为键而不是`java.lang.String`

```
println map.keySet()*.getClass().name
// prints [GStringImpl, GStringImpl, String, GStringImpl ] 
```

（为简洁起见省略了包名）

然后，您尝试使用字符串查找 GString 键，但失败（请参阅[此页面上的](http://groovy.codehaus.org/Strings+and+GString)*“GStrings 不是字符串”*部分）

这有效：

```
map << [(""+it):"value"] 
```

因为它只是创建一个字符串（通过附加`it`到空字符串）

无论如何......长话短说，使用`[(it):'value']`

# jquery - 如何制作加速的自定义 EaseOut 功能？

> ID：13139381
> 
> 赞同：1
> 
> 时间：2012-10-30T12:51:48.153
> 
> 标签：jquery, jquery-animate, easing

我有一个鼠标悬停功能，它基本上会导致 div 向上/向下移动。这使用了一个间隔计时器，并进行了动画处理以使其更平滑。

如何使动画加快每个间隔以匹配最终缓出速度？基本上，当您将鼠标悬停时，它应该会越来越快，但仍会保持流畅的动画效果。

```
function StartAnimation() {
        var oldMarginTop = $('#MyDiv').outerHeight(true) - $('#MyDiv').innerHeight();
        var newMarginTop = oldMarginTop + 100;
        $('#MyDiv').animate({ marginTop: newMarginTop }, 500, 'linear');
    }
}

$('#SomeObject').bind('mouseenter', function () {
    this.iid = setInterval(function () {
        StartAnimation();
    }, 500);
}).bind('mouseleave', function () {
    this.iid && clearInterval(this.iid);
    //FinishAnimation();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:07:39.750

我认为你不需要间隔。

我认为，您所描述的是`easeIn`您可以使用[此 jQuery 插件](http://gsgd.co.uk/sandbox/jquery/easing/)（以及各种替代缓动函数）获得的内容。该页面还包含一个演示，允许您测试每个缓动函数，以找到最适合您要求的缓动函数。

然后，您应该能够使用您直接选择的函数作为调用的参数`jQuery.animate`。

# javascript - Javascript 浏览器兼容性

> ID：13139383
> 
> 赞同：2
> 
> 时间：2012-10-30T12:51:56.860
> 
> 标签：javascript, css, internet-explorer, firefox, google-chrome

谁能告诉我应该使用哪些属性而不是这些属性（我已用于 Internet Explorer）在 chrome 或 firefox 中工作：

为了改变元素的可见性：

```
obj.style.visibility = 'visible/hidden'; 
```

获取元素：

```
document.getElementById("id"); 
```

将字符串值写入元素：

```
obj.innerHTML = "...."; 
```

要设置或检索对象的左侧位置：

```
obj.style.posLeft/posTop = ...; 
```

或者有人可以推荐一些关于浏览器兼容性的文章吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T12:54:06.707

`obj.style.posLeft/posTop`应该是`obj.style.left/top`，并且它们的值必须始终包含一个单位。除此之外，您展示的片段应该适用于所有浏览器。此外，这些定位属性仅适用于非“静态”定位的元素，即带有`position: absolute`或`position: relative`的元素`position: fixed`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:57:37.907

都支持。您可以在 w3c 查看支持的浏览器。例如对于 posLeft [http://www.w3schools.com/js/js_htmldom.asp](http://www.w3schools.com/js/js_htmldom.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:06:10.787

上面的答案是正确的，但我想补充一点，你最好使用任何流行的 javascript 框架来避免这样的事情：

```
window.screenY, window.screenX (for Firefox)
window.screenTop, window.screenLeft (for IE and Opera) 
```

以及您稍后会遇到的其他差异

附言。[http://caniuse.com/](http://caniuse.com/)也不错

# ruby - Ruby堆栈级别太深异常不是来自递归无限循环

> ID：13139384
> 
> 赞同：10
> 
> 时间：2012-10-30T12:51:56.763
> 
> 标签：ruby, stack, stack-level

**编辑：（已解决）实际上它可能是因为无限循环而引发的**

我正在编码，在添加了一个方法后我得到了这个：

```
user_name@the_computer:/media/ECC3-C3B0/Prog/mts/src/mts$ rake test --trace
** Invoke test (first_time)
** Execute test
/home/user_name/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36: stack level too deep (SystemStackError)
rake aborted!
Command failed with status (1): [/home/user_name/.rvm/rubies/ruby-1.9.3-p19...]
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:82:in `ruby'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/testtask.rb:99:in `block (2 levels) in define'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:60:in `verbose'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/testtask.rb:98:in `block in define'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/user_name/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/home/user_name/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/home/user_name/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => test 
```

我很确定不涉及无限递归循环。

该代码现在以某种方式进行了宝石化，但我也直接运行 ruby​​ 文件时遇到了错误。

感谢您对如何（获取一些信息，运行一些测试）解决问题的任何帮助，如果可能的话，无需重写整个事情......

# 环境 ：

*   ruby 1.9.3p194 / rails 3.2.8，通过 rvm 安装
*   此阶段的程序仅使用 rails 字符串屈折函数
*   操作系统：linux kubuntu i386
*   记忆4GO
*   'ulimit -s' : 8192（堆栈大小以 kB 为单位）

# 我尝试失败的方法：

*   删除了最初引发异常的代码块，但在运行时稍后仍会引发异常
*   使用命令行“ulimit -s 20000”、“ulimit -s unlimited”设置堆栈大小。同样的错误，显然在同一个地方（这让我认为堆栈大小实际上并没有改变）
*   降级到 ruby​​1.9.2 / rails3.1.3，得到同样的信息
*   Windows下同样的错误

# 应用上下文：

我正在编写一个大量使用 ruby​​ mixins 的应用程序。

此外，我创建了一堆生成 mixin 的类（实例/类方法模块将被其他类包含）。

所以总而言之，我最终得到了相当多的生成命名模块和一些自定义生成的代码，以及具有许多祖先的类。

但是，当我编写位于这个库之上的程序时，这最终应该会为我在 as$ 中节省相当多的痛苦（无论如何这是计划）。

# 我使用的资源：

*   [如何增加 ruby​​ 应用程序的堆栈大小。递归应用程序获取：堆栈级别太深（SystemStackError）](https://stackoverflow.com/questions/242617/how-to-increase-stack-size-for-a-ruby-app-recursive-app-getting-stack-level-to)
*   [http://dalibornasevic.com/posts/5-ruby-stack-level-too-deep-systemstackerror](http://dalibornasevic.com/posts/5-ruby-stack-level-too-deep-systemstackerror)

**编辑：在某些代码可用于显示/测试之前，让我们将我的问题抽象到这一点：除了经典的程序执行树太深场景（交叉手指很清楚，意味着什么......）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:34:14.313

> 除了经典的程序执行树太深场景之外，是否还有其他情况会导致堆栈级别太深异常？

是的。由于堆栈不是以深度为单位，而是以字节为单位，因此存储在堆栈中的任何内容都会更快地填满它：

```
def recurse(depth=0)
  recurse depth+1
rescue SystemStackError
  depth
end
=> nil
recurse
=> 8717

def recurse(depth=0)
  a,b,c = 1,2,3
  recurse depth+1
rescue SystemStackError
  depth
end
=> nil
recurse
=> 7264

def recurse(depth=0)
  a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z = *(0..25)
  recurse depth+1
rescue SystemStackError
  depth
end
=> nil
recurse
=> 3187 
```

在这个例子中，一个只有一个变量的函数在失败之前可以进行数千次调用，而再添加三个变量几乎没有什么作用；但是再添加 26 个变量会使堆栈大小膨胀到只有大约 3000 个级别可用的程度。

当然，这在一定程度上取决于 ruby​​ 的实现，以及它运行的系统。但我相信它会始终作为一般规则成立。

但是，我仍然认为递归可能是您的问题，因为在较小的调用链长度上发生这种情况所需的变量数量是巨大的。

# objective-c - Objective-c 正确委派

> ID：13139391
> 
> 赞同：0
> 
> 时间：2012-10-30T12:52:21.147
> 
> 标签：objective-c, ios, cocoa-touch

我是objective-c的新手，也许我还没有非常清楚地了解委托的概念，但我希望通过使用它来做到这一点。我正在尝试在我的应用程序中实施委托。

想法是我有`TableViewController`用于`NSMutableArray`初始化`TableView`的类。我需要从我的`DropDown`班级重新初始化这个数组。我尝试使用委托来做到这一点，但还没有做到，也许它有问题。我可以通过对象传递`TableViewController`给`DropDown`班级并编辑表格。但我想使用委托来完成它。

这是我的`TableViewController.h`

```
@protocol TableViewControllerdelegate;
@interface TableViewController : UIViewController<UITableViewDataSource,UITableViewDelegate,MFMessageComposeViewControllerDelegate>
{
    ControllerType controllerType;
}

@property (retain, nonatomic) IBOutlet UITableView *tableView;
@property (retain, nonatomic) NSMutableArray *dataArray;
@property (retain, nonatomic) NSArray *imageArray;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andType:(ControllerType)type;
- (void)sendSMS: (NSString *) sms;

@end; 
```

这是我的`DropDown.h`

```
#import "TableViewController.h"
@interface DropDownExample : UITableViewController <VPPDropDownDelegate, UIActionSheetDelegate> {
@private
    VPPDropDown *_dropDownSelection;
    VPPDropDown *_dropDownSelection1;
    VPPDropDown *_dropDownSelection2;
    VPPDropDown *_dropDownSelection3;
    VPPDropDown *_dropDownSelection4;
    VPPDropDown *_dropDownDisclosure;
    VPPDropDown *_msg;
    VPPDropDown *_dropDownCustom;

    NSIndexPath *_ipToDeselect;
}
+ (bool) uncheck:(UITableViewCell *) cell andData:(NSString *) data;
- (void)reloadData;
@end 
```

这就是我尝试编辑我的 tableview 对象数组的方式

```
 TableViewController *newControll = (TableViewController*)[UIApplication sharedApplication].delegate;
            NSMutableArray *arrayWithInfo = [[NSMutableArray alloc] initWithObjects:AMLocalizedString(@"Status", nil),AMLocalizedString(@"Call", nil),AMLocalizedString(@"Location", nil),AMLocalizedString(@"Control", nil),AMLocalizedString(@"Sim", nil),AMLocalizedString(@"Object", nil),AMLocalizedString(@"Info", nil),nil];
            newControll.dataArray = arrayWithInfo;
            [arrayWithInfo release];
            [newControll.tableView reloadData]; 
```

我让它运行，但它`'-[AppDelegate setDataArray:]: unrecognized selector sent to instance` 在达到此代码后运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:28:29.090

好的，我不确定我是否做对了，但它最终让我明白了代表团是什么以及我为什么需要它。希望您在阅读我的场景后也能理解。

## 历史

以前，在我的 UITabBar 应用程序中，我想显示一个覆盖在我的视图控制器顶部的自定义表单视图，以输入姓名和电子邮件。

后来我还需要在另一个选项卡上的另一个视图控制器顶部显示相同的自定义叠加层。

当时我并不真正知道委托是做什么的，所以我用来解决这个问题的第一个方法是 NSNotificationCenter。我将相同的代码复制到我的第二个视图控制器并将其连接到按钮按下事件。

在另一个选项卡上按下第二个视图控制器上的按钮时，它肯定会显示我的自定义叠加层，就像我的第一个视图控制器一样。

然而，这就是问题开始的地方。

## 问题

我需要关闭我的自定义表单视图。所以使用 NSNotificationCenter，我发布了一个通知，通知的侦听器回调方法被告知关闭我的自定义视图。

问题是，使用 NSNotificationCenter，我的第一个选项卡和第二个选项卡中的所有侦听器都响应了发布的通知，因此，它不仅关闭了覆盖在我的第二个视图控制器之上的自定义表单视图，还关闭了我的所有自定义视图，无论自定义视图是从哪里打开的。

我想要的是当我点击“X”按钮关闭我的自定义表单视图时，我只希望它为自定义视图的单个实例关闭它，而不是我打开的所有其他实例。

## 解决方案：委托

这就是我最终点击的地方 - 委托。

使用委托，我告诉我的自定义表单视图的每个实例委托是谁，如果我要点击“X”按钮关闭我的自定义视图，它只会为打开的单个实例关闭它，所有其他视图控制器保持不变。

## 一些代码

对，到一些代码。

不确定这是否是最好的方法（如果我错了，请纠正我），但这就是我的做法：

```
// ------------------------------------------------------------
// Custom Form class .h file
// ------------------------------------------------------------

@protocol MyCustomFormDelegate <NSObject>

// if you don't put a @optional before any method, then they become required
// in other words, you must implement these methods
-(void)sendButtonPressed;
-(void)closeButtonPressed;

// example: these two methods here does not need to be implemented
@optional
-(void)optionalMethod1;
-(void)optioinalMethod2;

@end

@interface MyCustomFormView : UIView
{
    ...
    id<MyCustomFormDelegate> delegate;
}

...
@property (nonatomic, retain) id<MyCustomFormDelegate> delegate;

@end

// ------------------------------------------------------------
// Custom Form class .m file
// ------------------------------------------------------------

...

@implementation TruckPickerView

@synthesize delegate;

-(id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    if(self)
    {
        ...

        [btnSend addTarget:self selector:@selector(sendEmail) forControlEvent:UIControlEventTouchUpInside];

        ...

        [btnClose addTarget:self selector:@selector(closeForm) forControlEvent:UIControlEventTouchUpInside];
    }

    return self;
}

-(void)sendEmail
{
    // code sends email

    ...

    // ------------------------------------------------------------
    // tell the delegate to execute the delegate callback method
    //
    // note: the implementation will be defined in the 
    // view controller (see below)
    // ------------------------------------------------------------
    [delegate sendButtonPressed];
}

-(void)closeForm
{
    // ------------------------------------------------------------
    // tell the delegate to execute the delgate callback method
    //
    // note: the implementation will be defined in the 
    // view controller (see below)
    // ------------------------------------------------------------
    [delegate closeButtonPressed];
}

// ------------------------------------------------------------
// view controller .h file
// ------------------------------------------------------------

#import "MyCustomFormView.h"

// conform to our delegate protocol
@interface MyViewController <MyCustomFormDelegate>
{
    ...

    // create a single instance of our custom view
    MyCustomFormView *customForm;
}

@property (nonatomic, retain) MyCustomFormView *customForm;

// ------------------------------------------------------------
// view controller .m file
// ------------------------------------------------------------

@synthesize customForm;

-(void)viewDidLoad
{
    customForm = [[MyCustomFormView alloc] initWithFrame:....];

    // tell our custom form this view controller is the delegate
    customForm.delegate = self;

    // only show the custom form when user tap on the designated button
    customForm.hidden = YES;

    [self.view addSubview:customForm];
}

-(void)dealloc
{
    ...
    [customForm release];
    [super dealloc];
}

// helper method to show and hide the custom form
-(void)showForm
{
    customForm.hidden = NO;
}

-(void)hideForm
{
    customForm.hidden = YES;
}

// ------------------------------------------------------------
// implement the two defined required delegate methods
// ------------------------------------------------------------
-(void)sendButtonPressed
{
    ...

    // email has been sent, do something then close 
    // the custom form view afterwards

    ...

    [self hideForm];
}

-(void)closeButtonPressed
{
    // Don't send email, just close the custom form view 
    [self hideForm];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:03:55.770

您收到该错误，因为（如错误所述）您正在向`setDataArray:`您的应用委托（AppDelegate 类）发送消息。

```
[UIApplication sharedApplication].delegate; 
```

这将返回您的应用程序的委托。有几种方法可以找出哪个类是您的应用程序的委托，但通常它被称为 AppDelegate （如您的情况）并且它`UIApplicationDelegate`也在实现协议。

您不能简单地将其转换为完全不同的类。如果您的应用程序委托具有 ivar 或类型的属性，`TableViewController`您必须使用访问器来获取它。如果它是一个属性，您可以使用点表示法。如果它是 ivar，您可以实现返回 ivar 的 getter 方法，或者将其设为属性。

```
// assuming your app delegate has a TableViewController property called myTableViewController.
AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
TableViewController *tableViewController = appDelegate.myTableViewController; 
```

这将修复错误，但您对委托模式的使用也是错误的。我看不到您在哪里使用任何自定义委托。你转发声明一个`TableViewControllerdelegate`协议，但我没有看到它的任何声明，或者我没有看到你试图在哪里使用它。

# android - 在 android 源代码中构建特定模块

> ID：13139394
> 
> 赞同：32
> 
> 时间：2012-10-30T12:52:27.887
> 
> 标签：android, android-source

我正在研究从 source.android.com 下载的 android 源代码。

完整构建后，我浏览了这个网站[http://elinux.org/Android_Build_System](http://elinux.org/Android_Build_System)，它解释了 android 构建系统。

当我对外部/webkit 代码进行更改并使用

`make -j4 libwebcore`它编译了相应的文件并更新了 libwebcore.so，它为我节省了很多时间。同样的事情也适用于应用程序，也适用于构建 apk。

当我在框架中进行更改并给出命令时出现问题，因为 `make -j4 framework` 它没有编译相应的文件。谁能帮我！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-31T09:27:12.110

该文件夹`frameworks`包含很多东西，您必须更具体地告诉 make 构建什么。

例如，我在： `frameworks/base/cmds/input/src/com/android/commands/input/Input.java`. 现在相应的`Android.mk`文件位于： `frameworks/base/cmds/input/Android.mk`，其中包含一行：`LOCAL_MODULE := input`。

因此，从源代码构建的模块被调用`input`，所以我调用：

```
$ make input 
```

重建该特定模块。

作为奖励信息，您可以使用`mmm`帮助程序，并且可以指定要构建的模块的路径，如下所示：

```
$ mmm frameworks/base/cmds/input 
```

或使用`mm`which 只是在您当前的工作目录中构建模块：

```
$ cd frameworks/base/cmds/input
$ mm 
```

我通常`mmm`用作我的首选工具。

* * *

**更新**

哦，我知道您可能正在专门谈论名为的模块`framework`

我只是试图修改: `frameworks/base/core/java/android/app/Dialog.java`，然后做一个: `make framework`。

这似乎重新编译框架就好了。您在运行之前究竟是在哪个文件中进行更改`make framework`？

* * *

**回应您的评论**

我只是尝试修改`frameworks/base/core/java/android/webkit/WebView.java`. `mmm frameworks/base`以及`make framework`对我来说非常好。

如果它对您不起作用，您能否使用有关您正在构建的 android 版本、您正在输入的确切命令以及您看到的输出的附加信息来更新您的问题？

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-04-29T05:56:54.373

以下是对`mm`,和其他通过获取文件`mmm`提供的便利功能的更完整描述：`build/envsetup.sh`

从您的 shell调用`. build/envsetup.sh`以将以下函数添加到您的环境中：

```
 lunch:   lunch <product_name>-<build_variant>
   tapas:   tapas [<App1> <App2> ...] [arm|x86|mips|armv5] [eng|userdebug|user]
   croot:   Changes directory to the top of the tree.
   m:       Makes from the top of the tree.
   mm:      Builds all of the modules in the current directory, but not their dependencies.
   mmm:     Builds all of the modules in the supplied directories, but not their dependencies.
            To limit the modules being built use the syntax: mmm dir/:target1,target2.
   mma:     Builds all of the modules in the current directory, and their dependencies.
   mmma:    Builds all of the modules in the supplied directories, and their dependencies.
   cgrep:   Greps on all local C/C++ files.
   jgrep:   Greps on all local Java files.
   resgrep: Greps on all local res/*.xml files.
   godir:   Go to the directory containing a file. 
```

请检查[build/envsetup.sh](https://cs.android.com/android/platform/superproject/+/master:build/make/envsetup.sh?q=envsetup.sh&ss=android)文件的注释以查看完整的函数列表。

# c# - 如何修复 System.BadImageFormat 异常？

> ID：13139395
> 
> 赞同：0
> 
> 时间：2012-10-30T12:52:28.707
> 
> 标签：c#, visual-studio-2010, asp.net-4.0, asp.net-3.5

我在 .net 框架版本 3.5 中有一个 Visual Studio 2010 窗口服务应用程序，但我需要在我的服务中使用一个在 .net 框架版本 4.0 中构建的 dll。所以我已将我的版本升级到 4.0，但在安装我的服务时我我有 system.BadImageFormatException。如何解决这个问题。请提出一些解决方案。

这是我收到的错误消息

初始化安装时出现错误 1001.Exception：System.BadImageFormatExceptio：无法加载文件或程序集“file://C:.....exe”或更多或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:56:54.383

The application and the DLL (including all dependencies of each) must all be either 32-bit or 64-bit. Most likely, the binaries you are using are not. To fix the problem build or otherwise obtain access to the correct binaries.

If this is not the problem, the "remarks" section of the [documentation](http://msdn.microsoft.com/en-us/library/system.badimageformatexception.aspx) lists all the reasons that can cause this exception to be thrown, including solutions for each.

# php - Instagram API 中为 foreach() 提供的参数无效

> ID：13139398
> 
> 赞同：1
> 
> 时间：2012-10-30T12:52:31.760
> 
> 标签：php, instagram

我将这种结构用于 Instagram：

```
<?php
        // Supply a user id and an access token
        $userid = "--user--";
        $accessToken = "--token--";

        // Gets our data
        function fetchData($url){
             $ch = curl_init();
             curl_setopt($ch, CURLOPT_URL, $url);
             curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
             curl_setopt($ch, CURLOPT_TIMEOUT, 20);
             $result = curl_exec($ch);
             curl_close($ch); 
             return $result;
        }

        // Pulls and parses data.
        $result = fetchData("https://api.instagram.com/v1/users/--user--/media/recent/?access_token=--token--");
        $result = json_decode($result);
    ?>

    <?php foreach ($result->data as $post): ?>
        <!-- Renders images. @Options (thumbnail,low_resoulution, high_resolution) -->
        <a class="group" rel="group1" href="<?= $post->images->standard_resolution->url ?>"><img src="<?= $post->images->thumbnail->url ?>"></a>
    <?php endforeach ?> 
```

但是这个打印：

警告：在第 40 行的 /home/mysite/index.php 中为 foreach() 提供了无效参数

40.行：

```
<?php foreach ($result->data as $post): ?> 
```

这个结构有什么问题？

这个结构是[http://www.blueprintinteractive.com/blog/how-instagram-api-fancybox-simplified](http://www.blueprintinteractive.com/blog/how-instagram-api-fancybox-simplified)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:59:12.493

好的，只是为了检查-在您的代码中，您有`$userid = "--user--"`and `$accessToken = "--token--"`，然后在 URL 中，您有`--user--`并且`--token--`再次-您将它们替换为`$userid`and `$accessToken`？如果不是，问题可能只是 Instagram 正在返回一个错误，进而导致您的代码失败。

如果您考虑了上述情况但仍然一无所获，则`$result->data`在循环 ( `var_dump($result->data)`) 之前打印 的值并查看变量包含的内容。

如果上面没有显示任何内容，请尝试`var_dump($result)`- 可能`json_decode()`失败并将显示`false`。

如果`$result->data`是一个数组，只是你没有数据（如果没有结果，我不确定 Instagram 会返回什么），在`foreach()`循环之前添加一个检查以查看数组是否为空。

```
<!-- This will output the contents of '$result->data' - let us know what it is -->
<?php var_dump($result->data)`) ?>

<?php if(!empty($result->data)): ?>
    <?php foreach ($result->data as $post): ?>
        <!-- Renders images. @Options (thumbnail,low_resoulution, high_resolution) -->
        <a class="group" rel="group1" href="<?= $post->images->standard_resolution->url ?>"><img src="<?= $post->images->thumbnail->url ?>"></a>
    <?php endforeach ?>
<?php endif ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-27T01:47:32.227

```
<?php
        // Supply a user id and an access token
        $userid = "*****";
        $accessToken = "*********";

        // Gets our data
        function fetchData($url){
             $ch = curl_init();
             curl_setopt($ch, CURLOPT_URL, $url);
             curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
             curl_setopt($ch, CURLOPT_TIMEOUT, 20);
             $result = curl_exec($ch);
             curl_close($ch); 
             return $result;
        }

        // Pulls and parses data.
        $result = fetchData("https://api.instagram.com/v1/users/$userid/media/recent/?access_token=$accessToken");
        $result = json_decode($result);
    ?>

<?php if(!empty($result->data)): ?>
    <?php foreach ($result->data as $post): ?>
        <!-- Renders images. @Options (thumbnail,low_resoulution, high_resolution) -->
        <a class="group" rel="group1" href="<?= $post->images->standard_resolution->url ?>"><img src="<?= $post->images->thumbnail->url ?>"></a>
    <?php endforeach ?>
<?php endif ?> 
```

在它工作的在线编译器上尝试了这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T16:11:27.907

```
<?php foreach ($result->data as $post): ?>
    <!-- Renders images. @Options (thumbnail,low_resoulution, high_resolution) -->
    <a class="group" rel="group1" href="<?= $post->images->standard_resolution->url ?>"><img src="<?= $post->images->thumbnail->url ?>"></a>
<?php endforeach ?> 
```

这是错误的语法将其替换为：

```
<?php foreach ($result->data as $post){ ?>
    <!-- Renders images. @Options (thumbnail,low_resoulution, high_resolution) -->
    <a class="group" rel="group1" href="<?= $post->images->standard_resolution->url ?>"><img src="<?= $post->images->thumbnail->url ?>"></a>
<?php } ?> 
```

# open-source - 开源库存管理桌面应用程序

> ID：13139400
> 
> 赞同：0
> 
> 时间：2012-10-30T12:52:35.957
> 
> 标签：open-source, desktop, inventory, inventory-management

我是 .Net 开发人员，我必须制作一个库存管理系统。所以，我正在寻找 C#/VB.Net 中的开源库存管理系统。

.Net 是我的首选，但我也可以考虑其他选项。

所以，我的问题是：1-谁能给我一个好的开源桌面库存软件的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:54:10.840

我会开始看 codeplex.com

[http://www.codeplex.com/site/search?query=Inventory&sortBy=Relevance&licenses=|&ac=3](http://www.codeplex.com/site/search?query=Inventory&sortBy=Relevance&licenses=|&ac=3)

# java - Java抽象方法的动态实现

> ID：13139401
> 
> 赞同：1
> 
> 时间：2012-10-30T12:52:37.317
> 
> 标签：java, dynamic, runtime

我正在尝试在 Java 中执行以下操作：

我有一个字符串集合（介于 1 到 10 000 之间），每个字符串包含一个类的相同抽象方法的不同方法体（它们是用 Java 代码编写的）。例如：

```
string1= "int a=1;" 
string2="System.out.println(\"HelloWorld\");"
... 
```

每个字符串都可以是以下抽象方法的实现：

```
abstract class FOO{
    public abstract void doSomething();
} 
```

对于每个字符串，我想生成一个 FOO 实例来使用。

我不太确定最好的方法是什么：我在网上搜索并提出了以下建议：

*   使用 java 6 编译器 API 生成 .class 文件并加载它们
*   使用像 cglib 这样的字节码操作库来修改编译代码

还有其他建议吗，因为这些看起来有点复杂（至少对我自己而言）......

谢谢你的帮助

编辑：

我可能在我的问题上走错路了。这是我最终想要实现的目标：

我有一个代表树中节点的接口

```
public  interface Node{
    public <T> void process(T input); 
```

/* ... 与我的问题无关的其他方法 ...*/ }

当您向节点提供 T 的实例时，它会对其执行某些操作（有些可能需要访问 Node 的其他方法），并将其传递给子节点。

问题是（程序的规范）：程序从文本文件中读取并构建节点，包括该方法主体（主体在 java 中）。然后它构建树并返回它。

我的印象是，要做到这一点，我必须以某种方式为文本文件中提供的每个方法生成 Node 的实现。我可能是错的，但可能有更好的方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:56:49.797

Perhaps what you want is [BeanShell](http://www.beanshell.org/)

> BeanShell is a small, free, embeddable Java source interpreter with object scripting language features, written in Java. BeanShell dynamically executes standard Java syntax and extends it with common scripting conveniences such as loose types, commands, and method closures like those in Perl and JavaScript.
> 
> You can use BeanShell interactively for Java experimentation and debugging as well as to extend your applications in new ways. Scripting Java lends itself to a wide variety of applications including rapid prototyping, user scripting extension, rules engines, configuration, testing, dynamic deployment, embedded systems, and even Java education.
> 
> BeanShell is small and embeddable, so you can call BeanShell from your Java applications to execute Java code dynamically at run-time or to provide extensibility in your applications. Alternatively, you can use standalone BeanShell scripts to manipulate Java applications; working with Java objects and APIs dynamically. Since BeanShell is written in Java and runs in the same VM as your application, you can freely pass references to "live" objects into scripts and return them as results.
> 
> In short, BeanShell is dynamically interpreted Java, plus a scripting language and flexible environment all rolled into one clean package.
> 
> Summary of features
> 
> *   Dynamic execution of the full Java syntax, Java code fragments, as well as loosely typed Java and additional scripting conveniences.
> *   Transparent access to all Java objects and APIs.
> *   Runs in four modes: Command Line, Console, Applet, Remote Session Server.
> *   Can work in security constrained environments without a classloader or bytecode generation for most features.
> *   The interpreter is small ~150K jar file.
> *   Pure Java.
> *   It's Free!!

* * *

An alternative is to use a library I wrote which wraps the Compiler API so that it compiles in memory and loads into the current ClassLoader (by default)

[http://sourceforge.net/projects/essence/files/Essence%20Java%20Config.%20Files/Essence%20JCF%201.02/](http://sourceforge.net/projects/essence/files/Essence%20Java%20Config.%20Files/Essence%20JCF%201.02/)

[http://vanillajava.blogspot.co.uk/2010/11/more-uses-for-dynamic-code-in-java.html](http://vanillajava.blogspot.co.uk/2010/11/more-uses-for-dynamic-code-in-java.html)

```
// this writes the file to disk only when debugging is enabled.
CachedCompiler cc = CompilerUtils.DEBUGGING ?
        new CachedCompiler(new File(parent, "src/test/java"), new File(parent, "target/compiled")) :
        CompilerUtils.CACHED_COMPILER;

String text = "generated test " + new Date();
Class fooBarTeeClass = cc.loadFromJava("eg.FooBarTee", "package eg;\n" +
    '\n' +
    "import eg.components.BarImpl;\n" +
    "import eg.components.TeeImpl;\n" +
    "import eg.components.Foo;\n" +
    '\n' +
    "public class FooBarTee{\n" +
    "    public final String name;\n" +
    "    public final TeeImpl tee;\n" +
    "    public final BarImpl bar;\n" +
    "    public final BarImpl copy;\n" +
    "    public final Foo foo;\n" +
    '\n' +
    "    public FooBarTee(String name) {\n" +
    "        // when viewing this file, ensure it is synchronised with the copy on disk.\n" +
    "        System.out.println(\"" + text + "\");\n" +
    "        this.name = name;\n" +
    '\n' +
    "        tee = new TeeImpl(\"test\");\n" +
    '\n' +
    "        bar = new BarImpl(tee, 55);\n" +
    '\n' +
    "        copy = new BarImpl(tee, 555);\n" +
    '\n' +
    "        // you should see the current date here after synchronisation.\n" +
    "        foo = new Foo(bar, copy, \"" + text + "\", 5);\n" +
    "    }\n" +
    '\n' +
    "    public void start() {\n" +
    "    }\n" +
    '\n' +
    "    public void stop() {\n" +
    "    }\n" +
    '\n' +
    "    public void close() {\n" +
    "        stop();\n" +
    '\n' +
    "    }\n" +
    "}\n");

// add a debug break point here and step into this method.
FooBarTee fooBarTee = new FooBarTee("test foo bar tee");
Foo foo = fooBarTee.foo;
assertNotNull(foo);
assertEquals(text, foo.s); 
```

# c# - 有没有办法以比 Jpeg 更低的分辨率保存位图？要更改分辨率手册？

> ID：13139403
> 
> 赞同：0
> 
> 时间：2012-10-30T12:52:53.227
> 
> 标签：c#

我有这个代码：

```
int ISampleGrabberCB.BufferCB(double sampleTime, IntPtr pBuffer, int bufferLen)
        {

            if (Form1.ExtractAutomatic == true)
            {
                using (var bitmap = new Bitmap(_width, _height, _width * 3, PixelFormat.Format24bppRgb, pBuffer))
                {
                    if (!this.Secondpass)
                    {
                        long[] HistogramValues = Form1.GetHistogram(bitmap);
                        Form1.Histograms.Add(HistogramValues);
                        long t = Form1.GetTopLumAmount(HistogramValues, 1000);
                        Form1.averagesTest.Add(t);

                    }
                    else
                    {

                        if (_frameId > 0)
                        {
                            double t = Form1.averagesTest[_frameId] / 1000.0 - Form1.averagesTest[_frameId - 1] / 1000.0;
                            w.WriteLine("averagesTest >>>  " + t);
                            if (_frameId == 1049)
                            {
                                w.Close();
                            }
                            if (Form1.averagesTest[_frameId] / 1000.0 - Form1.averagesTest[_frameId - 1] / 1000.0 > 60.0)                                {
                                count = 6;
                            }

                            if (count > 0)
                            {
                                bitmap.RotateFlip(RotateFlipType.Rotate180FlipX);
                                bitmap.Save(Path.Combine(_outFolder, _frameId.ToString("D6") + ".jpg"),ImageFormat.Jpeg);
                                count --;
                            } 
```

在此之前我将位图保存为位图 .bmp 现在我将其更改为 Jpeg .jpg 但无论如何可以将 jpg 更改为以较低的分辨率保存？也许以某种方式手动更改？

```
bitmap.Save(Path.Combine(_outFolder, _frameId.ToString("D6") + ".jpg"),ImageFormat.Jpeg); 
```

而是将其保存为 jpeg 可能会将其保存为 jpeg 但分辨率要低得多。原因是我想显示每个位图直方图，并同时在图片框中显示它自己的图像/帧，但是如果我能够以较低的分辨率保存它，那么保存过程会更快。

因为我想检查直方图，所以我不介意在这种情况下图像/帧是否会以低分辨率显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:08:40.267

分辨率对保存的图像文件完全没有影响。它是一个*参考*编号，它指示图像在创建图像的设备上的大小（以英寸为单位）。

当您在分辨率完全不同的设备上显示图像时，这一点变得很重要。一个很好的例子是您在机器上的绘图程序中创建的图像。然后在纸上打印。

例如，在您的绘图程序中，您将创建一个 1600 x 900 像素的图像，它填满了笔记本电脑的整个屏幕，全部为 14 英寸。如果您随后在分辨率为 600 点/英寸的打印机上打印它，那么相同的图像将是 1600/600 x 900/600 = 2.7 x 1.5 英寸。它变成了纸上的邮票。

为避免这种情况，图像已*重新缩放*，因此在纸上也需要 14 英寸。图像中的分辨率参考编号允许重新缩放。您的绘图程序记录了显示器的分辨率，例如每英寸 120 点。当您打印它并看到打印机具有每英寸 600 点的分辨率时，您知道您需要将图像打印 5 倍大才能在纸上获得相同的尺寸。

要使图像更快地保存，您需要将其缩小。以像素为单位。Bitmap(Image, Size) 构造函数是一种简单的方法。

# ios - 在没有应用程序源代码的情况下使用 Instruments 测试 iOS 应用程序

> ID：13139410
> 
> 赞同：1
> 
> 时间：2012-10-30T12:53:02.587
> 
> 标签：ios, ipad, ui-automation, xcode-instruments

> **可能重复：**
> [在没有应用程序源代码的情况下使用 Instruments 测试 iOS 应用程序](https://stackoverflow.com/questions/12045621/using-instruments-to-test-an-ios-app-without-having-source-code-to-the-applicati)

我想通过 XCode Instruments 工具为原生和 Web iOS 应用程序（在 iPad 设备或 iPad 模拟器上）进行 UI 自动化测试。没有应用程序源代码。在这种情况下，如何将 Instruments Automation 模板与真实设备和模拟器一起使用？

详细信息：我可以选择产品>配置文件为仪器选择目标，同时打开一些XCode项目，但在有源代码的情况下很有用。也许我必须创建一些特定的项目来运行模拟器并留在主页上？但是从仪器中，我既不能选择真实设备（它已列出，但已禁用 - 用浅灰色着色）也不能选择模拟器（它提示从 Mac 书中选择一些应用程序）。是否有可能在没有源代码的情况下通过 Instruments 在 iOS 模拟器上进行 UI 自动化测试？

我需要让 iOS 模拟器/真实设备准备好为其编写 UI 自动化测试。

# php - 在apache中验证目录结构

> ID：13139411
> 
> 赞同：0
> 
> 时间：2012-10-30T12:53:03.320
> 
> 标签：php, apache

我想知道我们如何通过脚本验证 apache 中的目录结构。

注意：如果他固定到目录结构，则验证用户意味着询问他的登录密码是否被授权。

意思是：[https](https://stackoverflow.com/posts/13139411) ://stackoverflow.com/posts/13139411 假设用户在浏览器中输入这个然后存在结构应该要求身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:10:02.710

假设您正在谈论[这种身份验证](http://httpd.apache.org/docs/2.2/howto/auth.html)（并且您正在使用 Apache），您需要设置用户，`htpasswd`然后配置您的 .htaccess 文件以进行基本身份验证。

看看上面链接上的[Getting it working部分。](http://httpd.apache.org/docs/2.2/howto/auth.html#gettingitworking)

# windows - CreateToolhelp32Snapshot 无法位于 kernel32.dll 错误消息中

> ID：13139414
> 
> 赞同：0
> 
> 时间：2012-10-30T12:53:15.810
> 
> 标签：windows, winapi, kernel32

在 Windows NT 机器（版本 4.0 SP6）中启动我的应用程序时，我收到以下错误消息并且应用程序没有启动。但是，相同的应用程序在 Windows XP 上启动并且运行良好。

消息内容如下：

***“无法在动态链接库 KERNEL32.dll 中找到程序入口点 CreateToolhelp32Snapshot”***

任何想法/修复？请帮忙

谢谢，

纳扬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:04:53.223

从参考页面[`CreateToolhelp32Snapshot()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx)：

*   支持的最低客户端 | Windows XP [仅限桌面应用程序]
*   支持的最低服务器 | Windows Server 2003 [仅限桌面应用程序]

因此该功能在 NT 上不可用。一种可能的替代方法是与[`EnumProcesses()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629%28v=vs.85%29.aspx)结合使用`OpenProcess()`。请参阅示例[枚举所有进程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682623%28v=vs.85%29.aspx)。

# jquery - jQuery.append、类型输入和 Windows Store App (HTML/CSS/JS)

> ID：13139418
> 
> 赞同：3
> 
> 时间：2012-10-30T12:53:38.500
> 
> 标签：jquery, winjs, windows-store-apps, jsrender

我有这个 Window Store 应用程序，我想在其中动态添加一些标记，我的问题可以归结为：

在职的

```
$('.some-element').append('<input type="radio"><label>Test</label>'); 
```

不工作

```
$('.some-element').append('<input type="radio" name="test"><label>Test</label>); 
```

Visual Studio 告诉我：

> JavaScript 运行时错误：无法添加动态内容。脚本试图注入可能不安全的动态内容或先前动态修改的元素。例如，使用 innerHTML 属性添加脚本或格式错误的 HTML 将生成此异常。使用 toStaticHTML 方法过滤动态内容，或使用 createElement 等方法显式创建元素和属性。

并指向 jQuery 的 append 实现中的一行：

```
append: function() {
        return this.domManip(arguments, true, function( elem ) {
            if ( this.nodeType === 1 || this.nodeType === 11 ) {
                this.appendChild( elem ); // Here!
            }
        });
    } 
```

有谁知道是否有办法解决这个问题？（我需要 jQuery，因为我想使用 JsRender 作为我的模板引擎）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:32:29.640

您正在使用主机强制安全功能。当您从字符串创建元素时，Win8 HTML 主机不喜欢它；在这种情况下，特别是当您将 name="" 属性放在输入元素上时，它不喜欢它。你可以设置id而不是名称吗？

有关被认为是安全的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/hh465388.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465388.aspx)。

错误消息实际上为您提供了两个选项来解决该错误：

1.  使用 toStaticHTML 方法过滤动态内容
2.  显式创建元素和属性

使用 toStaticHTML 看起来像这样：

```
 $('.some-element').append(toStaticHTML('<input type="radio" name="test"><label>Test</label>')); 
```

但这将导致创建的 HTML 看起来可能与您传入的字符串不同；toStaticHTML 将删除被认为不安全的元素和属性。

第二种选择是直接使用 DOM API 而不是 jQuery 来创建有问题的元素，您已经说过这是不行的。

还有第三种选择，尽管它可能不会让您通过商店验证过程：

```
MSApp.execUnsafeLocalFunction(function() {
    $('.some-element').append('<input type="radio" name="test"><label>Test</label>');
}); 
```

这将暂时禁用不安全的 html 检查。***除非您进行了安全分析，否则不要这样做***。特别是，不要使用从 XHR 获得的字符串并使用它来创建 DOM，这是获取应用程序和用户机器 pwnd 的邀请。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T17:29:16.087

也许你可以使用

```
WinJS.Utilities.setInnerHTMLUnsafe(divName, '<input type="radio"><label>Test</label>'); 
```

# liferay - Liferay 主题删除 css

> ID：13139427
> 
> 赞同：1
> 
> 时间：2012-10-30T12:54:13.593
> 
> 标签：liferay, liferay-theme

我在 Liferay 中创建了新主题，现在我想从 Liferay 的欢迎页面中删除所有默认 css，但我想在管理面板中保留这个默认 css。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:21:10.913

由于您创建了一个新主题，请在欢迎页面上应用该新主题。新主题应该包含所有具有您想要的自定义外观的 css 类。

例如，如果欢迎页面有登录 portlet，那么请更新登录 portlet 中使用的 css 类，并在主题中具有您想要的外观。

管理面板不会有你的主题，它有默认的控制面板主题。

# ios - 检测 iOS 设备类型

> ID：13139430
> 
> 赞同：9
> 
> 时间：2012-10-30T12:54:23.580
> 
> 标签：ios, objective-c, iphone, ipad

在我的应用程序（用 Objective-C 编写）中，我如何检测设备是 iPhone、iPad 还是 iPhone5？

```
if([[UIDevice currentDevice]userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    // [iphone] or [itouch]
} else {
    // [ipad]
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-30T13:00:56.813

您可以在以下条件下轻松检测 iphone、iphone5 和 iPad（但不是 iTouch！iTouch 被视为使用此代码的 iPhone！）：-

```
 if([[UIDevice currentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPhone)
 {
     if ([[UIScreen mainScreen] bounds].size.height == 568)
     {

     }
     else
     {
         //iphone 3.5 inch screen
     }
 }
 else
 {
        //[ipad]
 } 
```

**更新**

您还可以使用 MACRO 或定义变量来检查 iPhone5、iPhone4 或 iPad，如 Bellow：-

```
#define isiPhone5  ([[UIScreen mainScreen] bounds].size.height == 568)?TRUE:FALSE
#define isiPhone  (UI_USER_INTERFACE_IDIOM() == 0)?TRUE:FALSE 
```

**例子：-**

```
if(isiPhone)
     {
         if (isiPhone5)
         {

         }
         else
         {
             //iphone 3.5 inch screen
         }
     }
     else
     {
            //[ipad]
     } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T12:59:03.940

请检查以下代码：

**UIDevice_enhanced.h**

```
@interface UIDevice (Enhanced)

typedef enum {
    kUnknownPlatform = 0,
    kiPhone1G,
    kiPhone3G,
    kiPhone3GS,
    kiPhone4,
    kiPhone4Verizon,
    kiPhone4S,
    kiPhone5GSM,
    kiPhone5CDMA,
    kiPhone5CGSM,
    kiPhone5CCDMA,
    kiPhone5SGSM,
    kiPhone5SCDMA,
    kiPhone6,
    kiPhone6P,
    kiPhone6S,
    kiPhone6SP,
    kiPodTouch1G,
    kiPodTouch2G,
    kiPodTouch3G,
    kiPodTouch4G,
    kiPodTouch5G,
    kiPad,
    kiPad2Wifi,
    kiPad2GSM,
    kiPad2CMDA,
    kiPad3Wifi,
    kiPad3GSM,
    kiPad3CMDA,
    kiPad4Wifi,
    kiPad4GSM,
    kiPad4CMDA,
    kiPadAirWifi,
    kiPadAirCellular,
    kiPadMiniWifi,
    kiPadMiniGSM,
    kiPadMiniCDMA,
    kiPadMini2GWifi,
    kiPadMini2GCellular,
    kSimulator
} PlatformType;

- (NSString *) platformName;
- (PlatformType) platform;

@end 
```

**UIDevice_enhanced.m**

```
#import "UIDevice_enhanced.h"
#include <sys/utsname.h>

@interface UIDevice (Enhanced)
- (NSString *) platformCode;
@end 

@implementation UIDevice (Enhanced)

// Utility method (private)
- (NSString*) platformCode {
    struct utsname systemInfo;
    uname(&systemInfo);
    NSString* platform =  [NSString stringWithCString:systemInfo.machine encoding:NSUTF8StringEncoding];

    return platform;
}

// Public method to use
- (NSString*) platformName {
    NSString* platform = [self platformCode];

        if ([platform isEqualToString:@"iPhone1,1"])    return @"iPhone 1G";
if ([platform isEqualToString:@"iPhone1,2"])    return @"iPhone 3G";
if ([platform isEqualToString:@"iPhone2,1"])    return @"iPhone 3GS";
if ([platform isEqualToString:@"iPhone3,1"])    return @"iPhone 4";
if ([platform isEqualToString:@"iPhone3,3"])    return @"Verizon iPhone 4";
if ([platform isEqualToString:@"iPhone4,1"])    return @"iPhone 4S";
if ([platform isEqualToString:@"iPhone5,1"])    return @"iPhone 5 (GSM)";
if ([platform isEqualToString:@"iPhone5,2"])    return @"iPhone 5 (GSM+CDMA)";
if ([platform isEqualToString:@"iPhone5,3"])    return @"iPhone 5c (GSM)";
if ([platform isEqualToString:@"iPhone5,4"])    return @"iPhone 5c (GSM+CDMA)";
if ([platform isEqualToString:@"iPhone6,1"])    return @"iPhone 5s (GSM)";
if ([platform isEqualToString:@"iPhone6,2"])    return @"iPhone 5s (GSM+CDMA)";
if ([platform isEqualToString:@"iPhone7,1"])    return @"iPhone 6 Plus";
if ([platform isEqualToString:@"iPhone7,2"])    return @"iPhone 6";
if ([platform isEqualToString:@"iPhone8,2"])    return @"iPhone 6s Plus";
if ([platform isEqualToString:@"iPhone8,1"])    return @"iPhone 6s";

if ([platform isEqualToString:@"iPod1,1"])      return @"iPod Touch 1G";
if ([platform isEqualToString:@"iPod2,1"])      return @"iPod Touch 2G";
if ([platform isEqualToString:@"iPod3,1"])      return @"iPod Touch 3G";
if ([platform isEqualToString:@"iPod4,1"])      return @"iPod Touch 4G";
if ([platform isEqualToString:@"iPod5,1"])      return @"iPod Touch 5G";

if ([platform isEqualToString:@"iPad1,1"])      return @"iPad";
if ([platform isEqualToString:@"iPad2,1"])      return @"iPad 2 (WiFi)";
if ([platform isEqualToString:@"iPad2,2"])      return @"iPad 2 (GSM)";
if ([platform isEqualToString:@"iPad2,3"])      return @"iPad 2 (CDMA)";
if ([platform isEqualToString:@"iPad2,4"])      return @"iPad 2 (WiFi)";
if ([platform isEqualToString:@"iPad2,5"])      return @"iPad Mini (WiFi)";
if ([platform isEqualToString:@"iPad2,6"])      return @"iPad Mini (GSM)";
if ([platform isEqualToString:@"iPad2,7"])      return @"iPad Mini (GSM+CDMA)";
if ([platform isEqualToString:@"iPad3,1"])      return @"iPad 3 (WiFi)";
if ([platform isEqualToString:@"iPad3,2"])      return @"iPad 3 (GSM+CDMA)";
if ([platform isEqualToString:@"iPad3,3"])      return @"iPad 3 (GSM)";
if ([platform isEqualToString:@"iPad3,4"])      return @"iPad 4 (WiFi)";
if ([platform isEqualToString:@"iPad3,5"])      return @"iPad 4 (GSM)";
if ([platform isEqualToString:@"iPad3,6"])      return @"iPad 4 (GSM+CDMA)";
if ([platform isEqualToString:@"iPad4,1"])      return @"iPad Air (WiFi)";
if ([platform isEqualToString:@"iPad4,2"])      return @"iPad Air (Cellular)";
if ([platform isEqualToString:@"iPad4,4"])      return @"iPad mini 2G (WiFi)";
if ([platform isEqualToString:@"iPad4,5"])      return @"iPad mini 2G (Cellular)";

if ([platform isEqualToString:@"i386"])         return @"Simulator";
if ([platform isEqualToString:@"x86_64"])       return @"Simulator";

return platform;
}

// Public method to use
- (PlatformType) platform {
    NSString *platform = [self platformCode];
    if ([platform isEqualToString:@"iPhone1,1"])    return kiPhone1G;
    if ([platform isEqualToString:@"iPhone1,2"])    return kiPhone3G;
    if ([platform isEqualToString:@"iPhone2,1"])    return kiPhone3GS;
    if ([platform isEqualToString:@"iPhone3,1"])    return kiPhone4;
    if ([platform isEqualToString:@"iPhone3,2"])    return kiPhone4Verizon;
    if ([platform isEqualToString:@"iPhone4,1"])    return kiPhone4S;
    if ([platform isEqualToString:@"iPhone5,1"])    return kiPhone5GSM;
    if ([platform isEqualToString:@"iPhone5,2"])    return kiPhone5CDMA;
    if ([platform isEqualToString:@"iPhone5,3"])    return kiPhone5CGSM;
    if ([platform isEqualToString:@"iPhone5,4"])    return kiPhone5CCDMA;
    if ([platform isEqualToString:@"iPhone6,1"])    return kiPhone5SGSM;
    if ([platform isEqualToString:@"iPhone6,2"])    return kiPhone5SCDMA;
    if ([platform isEqualToString:@"iPhone7,1"])    return kiPhone6P;
    if ([platform isEqualToString:@"iPhone7,2"])    return kiPhone6;
    if ([platform isEqualToString:@"iPhone8,2"])    return kiPhone6SP;
    if ([platform isEqualToString:@"iPhone8,1"])    return kiPhone6S;

    if ([platform isEqualToString:@"iPod1,1"])      return kiPodTouch1G;
    if ([platform isEqualToString:@"iPod2,1"])      return kiPodTouch2G;
    if ([platform isEqualToString:@"iPod3,1"])      return kiPodTouch3G;
    if ([platform isEqualToString:@"iPod4,1"])      return kiPodTouch4G;
    if ([platform isEqualToString:@"iPod5,1"])      return kiPodTouch5G;

    if ([platform isEqualToString:@"iPad1,1"])      return kiPad;
    if ([platform isEqualToString:@"iPad2,1"])      return kiPad2Wifi;
    if ([platform isEqualToString:@"iPad2,2"])      return kiPad2GSM;
    if ([platform isEqualToString:@"iPad2,3"])      return kiPad2CMDA;
    if ([platform isEqualToString:@"iPad2,4"])      return kiPad2Wifi;
    if ([platform isEqualToString:@"iPad2,5"])      return kiPadMiniWifi;
    if ([platform isEqualToString:@"iPad2,6"])      return kiPadMiniGSM;
    if ([platform isEqualToString:@"iPad2,7"])      return kiPadMiniCDMA;
    if ([platform isEqualToString:@"iPad3,1"])      return kiPad3Wifi;
    if ([platform isEqualToString:@"iPad3,2"])      return kiPad3CDMA;
    if ([platform isEqualToString:@"iPad3,3"])      return kiPad3GSM;
    if ([platform isEqualToString:@"iPad3,4"])      return kiPad4Wifi;
    if ([platform isEqualToString:@"iPad3,5"])      return kiPad4GSM;
    if ([platform isEqualToString:@"iPad3,6"])      return kiPad4CDMA;
    if ([platform isEqualToString:@"iPad4,1"])      return kiPadAirWifi;
    if ([platform isEqualToString:@"iPad4,2"])      return kiPadAirCellular;
    if ([platform isEqualToString:@"iPad4,4"])      return kiPadMini2GWifi;
    if ([platform isEqualToString:@"iPad4,5"])      return kiPadMini2GCellular;

    if ([platform isEqualToString:@"i386"])         return kSimulator;
    if ([platform isEqualToString:@"x86_64"])       return kSimulator;

    return kUnknownPlatform;
}

@end 
```

希望这对你有用...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T05:19:40.647

```
if ([[UIDevice currentDevice].model hasPrefix:@"iPhone"]) {//iPhone... (not iTouch or iPad) 
```

```
if ([[UIDevice currentDevice].model hasPrefix:@"iPad"]) {//iPad... 
```

```
if (([[UIDevice currentDevice].model hasPrefix:@"iPhone"]) && ([UIScreen mainScreen]bounds].size.height == 568)) {//iPhone5... 
```

而且，仅供参考... iTouch 是这样的：

```
if ([[UIDevice currentDevice].model hasPrefix:@"iPod"]) {//iTouch 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-17T08:57:13.207

```
- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle {
if ([[ UIScreen mainScreen ] bounds ].size.height == 568 ) {
nibName = [NSString stringWithFormat:@"%@_568", nibName];

}

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
nibName = [NSString stringWithFormat:@"%@_iPad", nibName]; {

}

if (self = [super initWithNibName:nibName bundle:nibBundle]) {
}

return self;
} 
```

第一条语句检查您拥有的设备是否有 iPhone 5 屏幕。

第二个检查您使用 iPad 的天气。

第三个返回 iPhone 4s 和之前的正常 xib。

**请注意，要完成这项工作，您必须创建 3 个不同的 XIB，它们都具有不同的后缀。**

视图控制器.xib

ViewController_568.xib

ViewController_iPad.xib

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-17T08:49:56.093

这里有一堆常量，您可以粘贴在 PCH 文件中并在整个应用程序中使用，它们为您提供了许多可以测试的不同内容。（这里的宽屏是指 iPhone 5 “更高”的屏幕）

```
#ifndef IS_WIDESCREEN
#define IS_WIDESCREEN   (fabs((double)[[UIScreen mainScreen] bounds].size.height - (double)568) < DBL_EPSILON)
#endif

#ifndef IS_IPHONE
#define IS_IPHONE       ([[[UIDevice currentDevice] model] isEqualToString:@"iPhone"])
#endif

#ifndef IS_IPOD
#define IS_IPOD         ([[[UIDevice currentDevice] model] isEqualToString:@"iPod touch"])
#endif

#ifndef IS_IPAD
#define IS_IPAD         ([[[UIDevice currentDevice] model] isEqualToString:@"iPad"])
#endif

#ifndef IS_IPHONE5
#define IS_IPHONE5      (IS_WIDESCREEN && IS_IPHONE)
#endif

#ifndef IS_IPOD5
#define IS_IPOD5        (IS_WIDESCREEN && IS_IPOD)
#endif 
```

你可以像这样使用它：

```
if(IS_IPHONE5){
    // load iPhone5 code/nibs
}

if(IS_WIDESCREEN){
    // load 4" screen stuff here
} 
```

# function - 这些功能有什么区别

> ID：13139449
> 
> 赞同：8
> 
> 时间：2012-10-30T12:55:16.040
> 
> 标签：function, f#, currying

这些功能完全一样吗？也就是说，第一种和第二种语法只是最后一种语法的方便简写吗？或者是否存在一些理论上或实践上的差异，如果有，那是什么？

`let f1 a b = a + b`

`let f2 a = (fun b -> a + b)`

`let f3 = (fun a -> (fun b -> a + b) )`

例如，它们对我来说似乎相同`f1 5`，`f2 5`并且`f3 5`似乎返回相同的值。只是检查我没有在这里做出无效的假设。换句话说，我希望得到一个基于知识的答案，而不是说“是的，我相信它们是一样的”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T13:05:46.327

您的假设是正确的，在这种情况下，功能完全相同。

您可以通过检查生成的 IL 代码（如 Craig 所演示的那样）看到这一点，您还可以通过查看 F# 编译器推断的类型来看到这一点。在这两种情况下，您都会看到`int -> int -> int`. F# 语言将其视为一个接受`int`和返回的函数，`int -> int`但实际上它被编译为具有多个参数的方法（为了提高效率）。

如果您`fun`紧跟`let .. =`其后编写，则编译器会将其转换为标准函数。但是，如果您在返回函数之前进行一些计算，您可以编写稍微不同的代码：

```
let f1 a b = printfn "hi"; a + b
let f2 a = printfn "hi"; (fun b -> a + b) 
```

现在这两个函数非常不同，因为第二个函数在你只给它一个参数时打印“hi”（然后它返回一个你可以调用的函数）：

```
> let f = f2 1;;
hi                      // The body is called, prints 
val f : (int -> int)    // and returns function

> f 2;;                 // This runs the body of 'fun'
val it : int = 3        // which performs the additiion 
```

您可以使用 编写相同的代码`f1`，但第一个命令将创建一个新函数，第二个命令将打印“hi”并进行添加。

在这种情况下，生成的 IL 代码`f2`会有所不同。它将是一个*返回函数*（类型为`FSharpFunc<int, int>`）的函数。F# 显示的类型也不同 - 它将`int -> (int -> int)`代替`int -> int -> int`. 您可以以完全相同的方式使用这两种类型的值，但它暗示您给第一种类型一个参数时可能会产生一些效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T13:05:37.883

这是 IL 的`f1`：

```
.method public static int32  f1(int32 a,
                                int32 b) cil managed
{
  .custom instance void [FSharp.Core]Microsoft.FSharp.Core.CompilationArgumentCountsAttribute::.ctor(int32[]) = ( 01 00 02 00 00 00 01 00 00 00 01 00 00 00 00 00 ) 
  // Code size       5 (0x5)
  .maxstack  4
  IL_0000:  nop
  IL_0001:  ldarg.0
  IL_0002:  ldarg.1
  IL_0003:  add
  IL_0004:  ret
} // end of method Program::f1 
```

...对于 f2：

```
.method public static int32  f2(int32 a,
                                int32 b) cil managed
{
  .custom instance void [FSharp.Core]Microsoft.FSharp.Core.CompilationArgumentCountsAttribute::.ctor(int32[]) = ( 01 00 02 00 00 00 01 00 00 00 01 00 00 00 00 00 ) 
  // Code size       5 (0x5)
  .maxstack  4
  IL_0000:  nop
  IL_0001:  ldarg.0
  IL_0002:  ldarg.1
  IL_0003:  add
  IL_0004:  ret
} // end of method Program::f2 
```

如您所见，它本质上是相同的，所以是的，它们是相同的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-30T13:09:52.747

两个功能是一样的。它们可以被认为是语法糖

```
let f = fun a -> fun b -> a + b 
```

实际差别不大。`f1`强调函数返回一个值，同时`f2`返回一个闭包，而闭包又产生一个值。使用在创建组合器（例如[解析器组合](http://en.wikipedia.org/wiki/Parser_combinator)`f2`器）时更具吸引力。

附带说明一下，F# 中的函数不相等，因此`f1 5`它们`f2 5`是不同的值，但它们在相同的输入上产生相同的输出。

# php - 在 PHP 更新数据库中打开文本文件

> ID：13139456
> 
> 赞同：-1
> 
> 时间：2012-10-30T12:55:30.220
> 
> 标签：php, mysql

好的，这将是我今天在这里的最后一篇文章，已经向你们询问了很多关于为什么我的糟糕代码不起作用的问题 :)

我正在尝试运行查询以使用文本文档内容更新列的所有值。我的数据库如下所示：

```
Attribute_id | value
64 | Data.txt
109 | other data
64 | Data2.txt
109 | other data 
```

如果您查看我的脚本，您可以看到我正在尝试做什么，现在我正在回应查询，最终结果在这里：[http ://dev.central-pet-supplies.co.uk/test.php](http://dev.central-pet-supplies.co.uk/test.php)

它返回 UPDATE mage_catalog_product_entity_text SET value= 'Array' WHERE value = '13685.txt' 但是数组应该是文本文件的内容

这是脚本：

```
<?php

mysql_connect ("localhost","cpsdev_mage1","********"); 
mysql_select_db ("cpsdev_mage1"); 

$sql = "select value from mage_catalog_product_entity_text WHERE Attribute_id = 64"; 
$result = mysql_query ($sql) or die($myQuery."<br/><br/>".mysql_error()); 

while($row = mysql_fetch_array($result,MYSQL_ASSOC))
{
$lines = file('http://dev.central-pet-supplies.co.uk/media/import/' . $row['value']);
$query3 = "UPDATE mage_catalog_product_entity_text " . " SET value= '" . $lines .  "'         WHERE value = '" . $row['value'] . "'";
echo $query3 ."<br>";
}

?> 
```

编辑：将文件更改为 file_get_contents 并且现在可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:01:55.807

您没有显示`$lines`来自哪里，但它是我假设文本文件中的行的数组。使用类似`file_get_contents`的方法将文本文件的内容作为单个字符串获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:01:15.330

[`file()`](http://php.net/file)读入整个文件，每行作为数组中的一个新条目。既然你不想要那样，你可以[`implode()`](http://php.net/implode)通过把这些线连接在一起使用

```
$lines = implode( "\n", $lines); 
```

后：

```
$lines = file('http://dev.central-pet-supplies.co.uk/media/import/' . $row['value']); 
```

或者，通过使用[`file_get_contents()`](http://php.net/file_get_contents)instead of [`file()`](http://php.net/file)，它将整个文件的内容作为字符串而不是数组返回：

```
$lines = file_get_contents( 'http://dev.central-pet-supplies.co.uk/media/import/' . $row['value']); 
```

# opengl - Background image in OpenGL

> ID：13139460
> 
> 赞同：1
> 
> 时间：2012-10-30T12:55:43.590
> 
> 标签：opengl, background, glut, freeglut

I'm doing a 3D asteroids game in windows (using OpenGL and GLUT) where you move in space through a bunch of obstacles and survive. I'm looking for a way to set an image background against the boring bg color options. I'm new to OpenGL and all i can think of is to texture map a sphere and set it to a ridiculously large radius. What is the standard way of setting image bg in a 3d game?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:09:22.880

标准方法是绘制两个纹理映射三角形，其坐标为 x,y = +-1, z=0, w=1，其中相机和透视矩阵都设置为单位矩阵。

当然，在“空间”游戏的上下文中，人们可能希望背景旋转，自然的选择是使用立方体贴图渲染立方体（可能显示星系）。由于在背景渲染期间关闭了深度缓冲，因此立方体甚至不必“无限”大。一个单位立方体就可以了，因为没有办法知道相机离物体有多近。

# objective-c - How to convert a Json String into a NSArray?

> ID：13139462
> 
> 赞同：5
> 
> 时间：2012-10-30T12:55:53.680
> 
> 标签：objective-c, ios, json, cocoa-touch, restkit

I am currently trying to convert the JSON Representation of some Objects into an *NSArray*. I used **RestKit** to get the Response through our API and now I want to convert the *RKResponse* into an Array of Objects. How can I do this ?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-30T13:01:05.883

```
 NSData* data = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
    NSArray *values = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];  // if you are expecting  the JSON string to be in form of array else use NSDictionary instead 
```

上面的代码适用于 iOS 5 及更高版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:01:59.440

尝试导入 RestKit/RKJSONParserJSONKit.h。然后使用 try 方法 objectFromString:error:。获取 NSDictionary 表示。从 NSDictionary 你可以得到数组。

# css - SVG Images only loading when visited directly

> ID：13139467
> 
> 赞同：2
> 
> 时间：2012-10-30T12:56:07.153
> 
> 标签：css, svg, loading

I am coding a mobile site and using SVG's for the icons, however Some of the icons only display when visited directly, The only thing I can think is that the image request is failing first time round...

I have tried preloading them with no luck any ideas?

The code is below: (NOTE: the css duplicates, i.e. background size, position etc... will be different for each that's why they are being replicated.)

```
<div class="profileItems">
 <a class="shuffleProfileItem" href="javascript:{}" data-loc="shuffle">
  Shuffle Feeds
  <span></span>
 </a>
 <a class="notificationsProfileItem" href="javascript:{}" data-loc="notifications">
  Notifications
  <span></span>
 </a>
 <a class="neighborhoodsProfileItem" href="javascript:{}" data-loc="neighborhoods">
  Neighborhoods
  <span></span>
 </a>
 <a class="interestsProfileItem" href="javascript:{}" data-loc="interests">
  Interests
  <span></span>
 </a>
 <a class="messagesProfileItem" href="javascript:{}" data-loc="messages">
  Messages
  <span></span>
 </a>
 <a class="photosProfileItem" href="javascript:{}" data-loc="photos">
  Photos
  <span></span>
 </a>
 <a class="neighborsProfileItem" href="javascript:{}" data-loc="neighbors">
  Neighbors
  <span></span>
 </a>
 <a class="friendsProfileItem" href="javascript:{}" data-loc="friends">
  Friends
  <span></span>
 </a>
 <a class="settingsProfileItem" href="javascript:{}" data-loc="settings">
  Settings
  <span></span>
 </a>
</div><!-- End profile items --> 
```

CSS:

```
.profileItems a {
  display:block;
  background:#F2F2F2;
  margin:0 0 0.1em 0;
  padding:1em 1em 1em 2.8em;
  color:#595959;
  font-weight:bold;
  font-size:0.8em;
  opacity:0;
}
.profileItems a span {
 display:block;
 background:url(svg/goArrow.svg) no-repeat;
 background-size:1em;
 float:right;
 height:1.5em;
 width:1em;
 margin:-0.1em 0 0 0;
}
.shuffleProfileItem, .notificationsProfileItem, .neighborhoodsProfileItem,
.interestsProfileItem, .messagesProfileItem, .photosProfileItem,
.neighborsProfileItem, .friendsProfileItem, .settingsProfileItem {
 background-repeat:no-repeat!important;
 background-size:1.8em;
 background-position:0.5em!important;
}
.shuffleProfileItem {
 background-image:url(svg/feeds.svg)!important;
}
.notificationsProfileItem {
 background-image:url(svg/holla.svg)!important;
}
.neighborhoodsProfileItem {
 background-image:url(svg/neighborhoods.svg)!important;
}
.interestsProfileItem {
 background-image:url(svg/interests.svg)!important;
}
.messagesProfileItem {
 background-image:url(svg/message.svg)!important;
}
.photosProfileItem {
 background-image:url(svg/photo.svg)!important;
}
.neighborsProfileItem {
 background-image:url(svg/neighbors.svg)!important;
}
.friendsProfileItem {
 background-image:url(svg/friends.svg)!important;
}
.settingsProfileItem {
 background-image:url(svg/settings.svg)!important;
} 
```

Thanks in advance!

preview of what's happening: ![enter image description here](../Images/6c0126fc512f09bfc416020965578777.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T11:49:26.633

尝试[不同的方法](http://www.sitepoint.com/add-svg-to-web-page/)将 SVG 注入您的页面。

或者您可以将 svg 转换为 png 并将它们用作后备 - [http://callmenick.com/2014/04/02/svg-fallback-with-png/](http://callmenick.com/2014/04/02/svg-fallback-with-png/)。并以这种方式包含带有fallbaks的svg -

```
<img src="svg/icon.svg" onerror="this.src='fallbackPng/icon.png'">; 
```

# perl - extract a substring of 11 characters from a line using sed,awk or perl

> ID：13139469
> 
> 赞同：0
> 
> 时间：2012-10-30T12:56:14.770
> 
> 标签：perl, shell, sed, awk

I have a file with many lines, in each line there is either substring

```
whatever_blablablalsfjlsdjf;asdfjlds;f/watch?v=yPrg-JN50sw&amp,whatever_blabla 
```

or

```
whatever_blablabla"/watch?v=yPrg-JN50sw&amp" class=whatever_blablablavwhate 
```

I want to extract a substring, like the "yPrg-JN50s" above

the matching pattern is the 11 characters after the string "/watch?="

how to extract the substring

I hope it is sed, awk in one line if not, a pn line perl script is also ok

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:03:13.947

你可以做

```
grep -oP '(?<=/watch\?v=).{11}' 
```

如果你`grep`知道 Perl 正则表达式，或者

```
sed 's/.*\/watch?v=\(.\{11\}\).*/\1/g' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T13:05:18.853

```
$ cat file
/watch?v=yPrg-JN50sw&amp
"/watch?v=yPrg-JN50sw&amp" class=
$
$ awk 'match($0,/\/watch\?v=/) { print substr($0,RSTART+RLENGTH,11) }' file
yPrg-JN50sw
yPrg-JN50sw 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T15:57:31.177

只需通过shell的参数扩展，提取“watch?v=”后的11个字符：

```
while IFS= read -r line; do
    tmp=${line##*watch?v=}
    echo ${tmp:0:11}
done < filename 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T13:07:13.367

您可以使用 sed 删除无关信息：

```
sed 's/[^=]\+=//; s/&.*$//' file 
```

或者使用 awk 和合理的字段分隔符：

```
awk -F '[=&]' '{print $2}' file 
```

内容`file`：

```
cat <<EOF > file
/watch?v=yPrg-JN50sw&amp
"/watch?v=yPrg-JN50sw&amp" class=
EOF 
```

输出：

```
yPrg-JN50sw
yPrg-JN50sw 
```

### 编辑以适应评论中提到的新要求

```
cat <<EOF > file
<div id="" yt-grid-box "><div class="yt-lockup-thumbnail"><a href="/watch?v=0_NfNAL3Ffc" class="ux-thumb-wrap yt-uix-sessionlink yt-uix-contextlink contains-addto result-item-thumb" data-sessionlink="ved=CAMQwBs%3D&amp;ei=CPTsy8bhqLMCFRR0fAodowXbww%3D%3D"><span class="video-thumb ux-thumb yt-thumb-default-185 "><span class="yt-thumb-clip"><span class="yt-thumb-clip-inner"><img src="//i1.ytimg.com/vi/0_NfNAL3Ffc/mqdefault.jpg" alt="Miniature" width="185" ><span class="vertical-align"></span></span></span></span><span class="video-time">5:15</span> 
EOF 
```

将 awk 与合理的记录分隔符一起使用：

```
awk -v RS='[=&"]' '/watch/ { getline; print }' file 
```

请注意，您应该为此类任务使用适当的 XML 解析器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T13:05:55.397

```
grep --perl-regexp --only-matching --regexp="(?<=/watch\\?=)([^&]{0,11})" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T13:08:52.670

假设您的行具有您引用的格式，这应该有效。

```
awk '{print substr($0,10,11)}' 
```

编辑：从另一个答案的评论中，我猜你的行比这更长更复杂，在这种情况下需要更全面的东西：

```
gawk '{if(match($0, "/watch\\?v=(\\w+)",a)) print a[1]}' 
```

# c# - 从 C# 中的 XML 数据库字符串中获取 XML 值

> ID：13139475
> 
> 赞同：2
> 
> 时间：2012-10-30T12:56:31.053
> 
> 标签：c#, xml, xpath, linq-to-xml

我正在尝试获取存储在我的数据库中但似乎无法使其工作的 xml 片段的值。他们都回来了... xml看起来像这样：

```
<fields>
<field id="EmployeeID">1002240002</field>
<field id="JobType">Web Manager</field>
<field id="CompanyCode">R6297C</field>
</fields> 
```

我的代码，来自数据库的字符串如下。

```
string xml = "<fields><field id=\"EmployeeID\">1002240002</field><field id=\"JobType\">Web Manager</field><field id=\"CompanyCode\"> R6297C </field></fields>";

XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(xml);

var n = xmlDoc.GetElementById("EmployeeID ");

                if (n != null)
                { 
                    var employeeId = xmlDoc.GetElementById("EmployeeID ").InnerText;
                } 
```

对此有什么帮助吗？我知道我在这里遗漏了一些简单的东西......谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:00:09.537

您可以使用以下 XPath 查询

```
string xpath = "field[@id='EmployeeID']";
XmlNode fieldNode = xmlDoc.DocumentElement.SelectSingleNode(xpath);
var id = Int32.Parse(fieldNode.InnerText); 
```

或 Linq 到 Xml

```
var id = (from f in xdoc.Descendants()
          where (string)f.Attribute("id") == "EmployeeID"
          select (int)f).Single(); 
```

或者使用流畅的界面

```
var id = xdoc.Descendants()
             .Where(f => (string)f.Attribute("id") == "EmployeeID")
             .Select(f => (int)f)
             .Single(); 
```

*顺便说一句*，xdoc 是`XDocument`类的一个实例：

```
var xdoc = new XDocument(xml); 
```

# ios - NSString to JSON string

> ID：13139483
> 
> 赞同：3
> 
> 时间：2012-10-30T12:56:55.030
> 
> 标签：ios, json, cocoa-touch, nsstring

I have a `NSString` with below format .Currently it is not a valid JSON string .I want to change it as a JSON string and store it in an `NSArray`. This is my `NSString.`

```
[, {"Agent":" Visitor", "Time":"03:18 AM", "Message":"Msg from : file:///Users/satheesanop/Desktop/something.htmlIP Address : 182.72.139.142Country : IndiaCity : MadrasRegionName : Tamil N?duBrowser : Chrome 22OS : Mac", }, {"Agent":" agent name", "Time":"03:21 AM", "Message":"Thank you for contacting us.How may i help you ?", }, {"Agent":" Visitor", "Time":"03:22 AM", "Message":"Some message.", }] 
```

Any help is appreciated .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T13:24:40.850

您需要转换`NSString`为`NSData`使用`dataUsingEncoding:`方法。

然后使用该`JSONObjectWithData`方法并将其添加到数组中。

```
NSArray *arrayJson = [NSArray arrayWithObjects:[NSJSONSerialization JSONObjectWithData:data options:0 error:nil],nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:22:17.280

弄清楚了 ..

```
Mystr = [Mystr stringByReplacingOccurrencesOfString:@"[,"  withString:@"["];
Mystr = [Mystr stringByReplacingOccurrencesOfString:@", }" withString:@"}"]; 
```

谢谢大家。

# python - Color on a scatter graph Python Matplotlib

> ID：13139484
> 
> 赞同：1
> 
> 时间：2012-10-30T12:56:57.103
> 
> 标签：python, matplotlib, scatter

I have two variables I want to plot on a scatter graph. I want one variable to be displayed in blue and the other in red. I only just started using Python, and I am rather confused.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:05:05.600

`scatter`接受一个`color`允许您设置点颜色的参数（很难猜到）。

```
x = linspace(0,10)
y1 = randn(50)
y2 = randn(50)+10

scatter(x, y1, color='red')
scatter(x, y2, color='blue') 
```

![例子](../Images/fdbf0b4df3d325a08f8d3bc41c566c52.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:01:38.153

```
import numpy as np
import matplotlib.pyplot as plt
x = np.arange(10)
y = x
z = x*2
plt.scatter(x,y,c="r")
plt.scatter(x,z,c="b")
plt.show() 
```

阅读[本文](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.scatter)和 matplotlib 文档。

# ms-access - Read data from mde database

> ID：13139485
> 
> 赞同：4
> 
> 时间：2012-10-30T12:56:59.403
> 
> 标签：ms-access

Ive got an mde file and all i need is to get data from tables of this file in any format... I've tried everything that I could find on the internet or get by myself, but nothing helps. When I am using standard tools for extracting data in access it says to me, that I have something running operations on that database( I think there is some kind of a macro or something else, that starts when I open this file).

If you have any info on how to get data from this file I will be SO thankfull!

Thaks again for your attention and I really sorry for my bad english(doing my best to learn speaking it better).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:35:02.663

您可以尝试一些技巧：

*   打开文件时按 SHIFT 可禁用 autoExec 宏。

*   以防万一文件损坏，请尝试压缩并修复它（之前制作备份副本！）。
    您可以使用[命令行选项](http://support.microsoft.com/kb/209207) `/compact`来执行压缩和修复，而无需先打开文件。

*   您可以创建一个新数据库并从另一个数据库创建[链接表。](http://www.techonthenet.com/access/tables/link_table.php)
    您可以选择复制整个表（您可能需要将其重命名`.mde`为`.mdb`，以便在对话框中看到它，要求链接到的文件）。

# c# - C# shorten datatable function

> ID：13139486
> 
> 赞同：1
> 
> 时间：2012-10-30T12:57:00.537
> 
> 标签：c#, winforms, datatable

Using MS Visual Studio 2012 Express, Using C#.NET 4.0.

Hi guys, This I believe is a simple one.

I've been rushing a program at the request of my boss, But now it turns out that I have a lot more free time on it.

So I'm going through the code trying to make it more compact, cleaner etc.

I have this one function.....

```
public void RunMonth()
{
    //** top 10 listings*********************//            
    SetTxtBox1(DateTime.Now.ToString() + " ==== END OF MONTH REPORTS starting.........\r\n");
    SetTxtBox1(" **************************************************************************************\r\n");
    try
    {
        VRMtableDESC = querys.TopVRM("DESC");
        SetTxtBox1(DateTime.Now.ToString() + " ==== VRM Top has been loaded\r\n");
    }
    catch
    {
        SetTxtBox1(DateTime.Now.ToString() + " ==== VRM Top has FAILED\r\n");
    }
} 
```

"VRMtableDESC" is a datatable, one of around 18 datatables. for each datatable this try statement is run.

Now as you can tell this currently is repeated 18 times for every table. instead i would like to loop into the tables instead and fill them with there data.

is there a way to do this? i would need some sort of collection for the datatables and the query.function calls too as far as I'm aware.

So far i have hit a blank so im hoping there is something im missing.

Thanks in Advance

::::UPDATE:::: Ok so I have this set up so far....

```
 foreach (DataTable tbl in MyDataSet.Tables)
 {
     tbl.TableName.Equals(querys.TopVRM(""));
 } 
```

the equals method needs to be dynamic in its method selection too.... any ideas?

::UPDATE(31/10/12)::

Hi again, Im getting an error, the common error " object not sent to instance of object"

it apears on the merge in the foreach loop.

I have debugged my query call and looks fine.

```
 var tables = new SortedDictionary<string, Func<DataTable>>()
        {
            {"VRMtableDESC",  () => querys.TopVRM("DESC")},
            {"VRMtableASC",   () => querys.BotVRM("ASC")},
            {"SpectableDESC", () => querys.TopSpec("DESC")},
            {"SpectableASC",  () => querys.botSpec("ASC")},
            {"ParttableDESC", () => querys.TopPart("DESC")},
            {"ParttableASC", () => querys.BotPart("ASC")},
            {"MantableDESC",  () => querys.TopManual("DESC")},
            {"MantableASC",   () => querys.BotMan("ASC")}, //why is this first to run?????
            {"UsersLockedTbl",() => querys.UserLocked()},
            {"NewUsersTbl",   () => querys.NewUsers()},

            {"VRMtotaltblTOP",   () => querys.VRMtotalTOP("")},
            {"PARTtotaltblTOP",  () => querys.PARTtotalTOP("")},
            {"SPECtotaltblTOP",  () => querys.SPECtotalTOP("")},
            {"MANtotaltblTOP",   () => querys.MANtotalTOP("")},
            {"VRMtotaltblBOT",   () => querys.VRMtotalBOT("")},
            {"PARTtotaltblBOT",  () => querys.PARTtotalBOT("")},
            {"SPECtotaltblBOT",  () => querys.SPECtotalBOT("")},
            {"MANtotaltblBOT",   () => querys.MANtotalBOT("")},
        };

        foreach(var kvp in tables)
        {
            try
            {
                MyDataSet.Tables[kvp.Key].Merge(kvp.Value());//error occurs here
                SetTxtBox1(String.Format("{0} ==== {1} has been Loaded\r\n", DateTime.Now.ToString(), kvp.Key));
            }catch(Exception e)
            {
                SetTxtBox1(String.Format("{0} ==== {1} has FAILED\r\n", DateTime.Now.ToString(), kvp.Key));
                MessageBox.Show("error:::" + e);
            }
        }
        AutoRunApp(); 
```

any help would be great.

UPDATE::

heres my query call from the "bunchofquerys" class

```
 public DataTable BotMan(string order)
    {

            SqlConnection conn = new SqlConnection(myConnString32);
            SqlCommand vrm = new SqlCommand();
            //BindingSource bindme = new BindingSource();
            SqlDataAdapter adapt1 = new SqlDataAdapter(vrm);
           // DataSet dataSet1 = new DataSet();
            DataTable table1 = new DataTable();
            try
            {
            vrm.Connection = conn;
            vrm.CommandType = CommandType.StoredProcedure;
            if (order.Equals("DESC"))
            {
                vrm.CommandText = "dbo.TopManual";
            }
            vrm.CommandText = "dbo.BotManual";
            vrm.CommandTimeout = 360;

            vrm.Parameters.AddWithValue("@OrderBy", order);
            adapt1.Fill(table1);
            return table1;
        }
        catch (Exception e)
        {
            MessageBox.Show("eeror::zomg:::  " + e);

        }
        return table1;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:25:49.057

你说你已经有一个`DataSet`. 填写所有表格的一种简单方法是使用[`Merge`](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx).

在此示例中，我在表名（中的表名`DataSet`）和相应的查询函数（假设它们返回`DataTable`具有相似模式的 a，并且您`DataSet`的名称为 named `ds`）之间创建了一个映射。

`Key`用于从 中查询适当`DataTable`的`DataSet`，然后该方法`Merge`用于“填充” `DataTable`。

```
var tables = new SortedDictionary<string, Func<DataTable>>() //or use List of Tuples... 
{
    {"VRM_TOP",    () => querys.TopVRM("DESC")},
    {"FooBar_TOP", () => querys.FooBar("DESC")},
    {"Something",  () => querys.Something("ASC")},
};

foreach(var kvp in tables)
    ds.Tables[kvp.Key].Merge(kvp.Value()); 
```

你可以反过来做，遍历你的每个表，`DataSet`并通过表的`TableName`.

现在可以轻松地将您的`try/catch`块添加到`foreach`循环中。

```
foreach(var kvp in tables)
{
    try
    {
        ds.Tables[kvp.Key].Merge(kvp.Value());
        SetTxtBox1(String.Format("{0} ==== {1} has ben loaded\r\n", DateTime.Now, kvp.Key));
    }
    ...
} 
```

# php - Blinking a LED through a Web application

> ID：13139489
> 
> 赞同：4
> 
> 时间：2012-10-30T12:57:13.780
> 
> 标签：php, linux, web, embedded

I'm doing some experiments with some Linux-based embedded systems (Beaglebone, FriendlyARM mini6410, Embest Devkit 8000). I would like to write a web application using some kind of web technology PHP, Javascript,...whatever it is, whose purpose is just to blink a LED. I have to do this in order to see if I'm able to control some hardware resources through a Web application. I know that for the Beaglebone I can use node.js and bonescript but I would like to devise a solution that I can easily bring on other targets (with no or limited modifications to the application) since I have to replicate this on different embedded targets. I know that I have to go through sysfs in order to be able to control hardware resources from a user space application. I could do this in PHP (through sysfs I can drive a led just by opening and reading/writing files) or I could write a C CGI application wich does the same...But my question is, what are the other options? I would like to identify different possibilities for designing the web application in order to chose the proper one.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:25:35.110

写一个小cgi。它甚至可以用 shell 来完成，你可以在其中向 sysfs 发送命令

你可以做类似的东西

```
#!/bin/sh

#this will parse the sent parameters
eval $(echo "$QUERY_STRING"|awk -F'&' '{for(i=1;i<=NF;i++){print $i}}')

# this has to be set to whatever you want
GPIO=22

echo $GPIO > /sys/class/gpio/export
echo "out" /sys/class/gpio/gpio$GPIO/direction
echo 1 /sys/class/gpio/gpio$GPIO/value

cat << EOF
Content-Type: text/html

<!DOCTYPE html>
<html>
<body>
<h1>pin on</h1>
</body>
</html>
EOF 
```

最后，您需要确保您有权在 sysfs 上进行写入，并且网络服务器已配置为使用 shell 作为 cgi 的解释器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:08:02.987

我写了一个名为“php-gpio”的小库：[https ://github.com/ronanguilloux/php-gpio](https://github.com/ronanguilloux/php-gpio)

我想这可能有助于实现这种目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:33:35.500

好吧，如果我这样做，我可能会选择套接字通信。也许是串行的硬件（可能没有以太网/wifi端口）。如果设备可以通过抽象通信层来互换，那么我可能会启用对两者的支持，以便服务器可以使用套接字或串行连接策略。大多数所有语言都支持一种或另一种方式。

# html - Primefaces dataTable with rowspan

> ID：13139490
> 
> 赞同：14
> 
> 时间：2012-10-30T12:57:19.420
> 
> 标签：html, jsf, primefaces

I'm quite new with JSF primefaces 3.1\. I try to build a "complex" table and I cannot find a good solution using dataTable (I need a sorting component).

I would like to build a table equivalent to the following HTML representation, using a basic POJO like that:

```
String field1
String field2
List<String> fields3 // 3 items
String field4

<table border="1">
<tr>
    <td rowspan="3">col1</td>
    <td rowspan="3">col2</td>
    <td>col3.1</td>
    <td rowspan="3">col4</td>
</tr>
<tr>
    <td>col3.2</td>
</tr>
<tr>
    <td>col3.3</td>
</tr>       
</table> 
```

I give maybe too little information, so if you need it, please tell me :) I hope that my question is clear.

Thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:25:08.113

自定义网格的可靠且灵活的解决方案是将 <c:forEach> 与 Primefaces <p:panelGrid> 一起使用：

```
<html ... xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:p="http://primefaces.org/ui">
    <p:panelGrid>
        <p:row>
            <p:column styleClass="ui-state-default" colspan="2"><!-- header -->
                <h:outputText value="Some Header"/>
            </p:column>
            ...
        </p:row>
        <p:row><!-- other header row -->
            ...
        </p:row>
        <c:forEach items="#{list}" var="element">
            <p:row>
                <p:column styleClass="ui-state-default" rowspan="#{list.sublist.someSizeExpression}"><!-- left rowspan -->
                    <h:outputText value="#{element.name}"/>
                </p:column>
                <c:forEach items="#{element.sublist}" var="subelement">
                    <p:column>
                        <h:selectBooleanCheckbox/>
                    </p:column>
                </c:forEach>
            </p:row>
        </c:forEach>
    </p:panelGrid>
</html> 
```

它看起来不错，Command-Buttons 和 AJAX 在 Head 和 Cells 中都可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:25:38.443

我遇到了同样的问题：primefaces（或richfaces）只为页眉和页脚提供行跨度。

然后我尝试使用 icefaces`ace:datatable`组件，它通过在你想要“rowspanable”的列中仅添加一个属性来运行 : `ace:column`: `groupBy="#{bean.field}"`。

您像往常一样提供行列表，该组件会在生成的 html 表中自动生成所有行跨度（我认为是通过自动检测等于值的邻域）。

它与 primefaces 组件一起运行：此时我在 icefaces 数据表单元格中有 primefaces outputlabel，而这个 icefaces 数据表位于 primefaces 面板内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:00:27.960

因为你在标签中提到`primefaces`。我建议您使用[p:panelGrid](http://www.primefaces.org/showcase-labs/ui/panelGrid.jsf)

```
<p:panelGrid>  

    <p:row>  
        <p:column rowspan="3"/>  
        <p:column rowspan="3"/>  
        <p:column rowspan="1"/>  
        <p:column rowspan="3"/>  
    </p:row>  

    <p:row>  
        <p:column/>
    </p:row>  

    <p:row>  
        <p:column/>  
    </p:row>  

</p:panelGrid> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-04T15:41:46.290

我会看看 RichFaces 数据表。对于复杂的布局，我发现它比 PrimeFaces 表更灵活。

您可以使用

```
 <rich:collapsibleSubTable
     value="#{bean.getData()}"
     var="line"
     id="subTable"
     rowKeyVar="rowKey"
     width="100%">
<rich:column width="40" rendered="#{rowKey eq 0}" rowspan="#{line.firstColRowSpan}">
    #{line.country}
    </rich:column>
    <rich:column rendered="#{line.index eq 0}" rowspan="#{line.secondColRowSpan}">
       #{line.state}
    </rich:column>
    <rich:column>
    #{line.city}
    </rich:column>
</rich:subtable> 
```

因此，如果您的线路数据如下所示：

```
US CA San Francisco 0 (index) 6 (firstColRowSpan) 3 (secondColRowSpan)
US CA LA 1 6 3
US CA Jose 2 6 3
US TX Huston 0 6 2
US TX Dallas 1 6 2
US AZ Phoenix 0 6 1
UK Surrey Guildford 0 1 1 
```

该表将显示

```
US  CA     San Francisco
           LA
           Jose
    TX     Huston
           Dallas
    AZ     Phoenix 
UK  Surrey Guildford 
```

重要的是，如果您在其中一个 rowspan 列中有按钮/链接等，那么您也要在其中添加 render="#{rowKey eq 0}" ！

# objective-c - 使用 Cocoa/Objective-C 创建幻灯片类型的视频

> ID：13139494
> 
> 赞同：1
> 
> 时间：2012-10-30T12:57:22.003
> 
> 标签：objective-c, cocoa, video, slideshow

好的，这就是我想要做的：

*   获取一些图像
*   一个接一个（使用一些固定的时间间隔）
*   将结果导出为视频（格式无关紧要）

关于我将如何去做的任何想法？任何指向我的参考都将非常受欢迎......

# java - Android中多色列表的列表选择器

> ID：13139496
> 
> 赞同：1
> 
> 时间：2012-10-30T12:57:36.100
> 
> 标签：java, android, android-layout, android-ui

我的 android 应用程序中有一个列表。列表项是自定义对象，根据自定义对象属性，将决定列表项颜色。

现在的问题是，当我为此类列表选择任何项目时，不会显示列表选择器。

我该如何解决这个问题？要设置列表项颜色，我在适配器中使用以下方法。

`convertView.setBackgroundColor(Color.LTGRAY`)

这是设置颜色的正确方法吗？如果不是我还能用什么。

提前致谢。

斯瓦普尼尔·达拉尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:15:55.847

您可以通过两种方式解决此问题：

`1`.为itemview编写一个选择器，在**按下状态下**将背景设置为透明，然后将选择器设置为itemview的背景。

```
<item android:state_enabled="true"
      android:state_pressed="false"
      android:drawable="@color/gray" />

<item android:state_enabled="true" 
      android:state_pressed="true"
      android:drawable="@color/transparent" /> 
```

`2`.去掉listselector，只需为itemview写一个选择器，用不同的状态你想要的颜色，并将其设置为itemview的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:58:18.263

我得到了这个问题的解决方案，

我为应用程序中的不同对象创建了不同的 xml 文件。因此，在适配器的 getView 中，根据条件我们可以加载任一 xml。

例子：

```
`if(true) {
    convertView.setBackgroundResource(R.drawable.firstxml);
 }
 else {
    convertView.setBackgroundResource(R.drawable.secondxml);
 }` 
```

在这些 xmls 中，我们可以根据需要指定颜色。

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_enabled="false"
        android:drawable="@color/transperent"/>    
    <item
        android:state_pressed="true" 
        android:state_enabled="true"
        android:drawable="@drawable/listview_selector" />
</selector> 
```

谢谢，

斯瓦普尼尔·达拉尔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:02:58.673

请添加您的 getView 方法代码，以便我们更好地帮助您。我们犯的一个常见错误是我们并不总是为列表视图中的每个项目创建新视图以加载不同的布局列表项目。

例如，相同项目列表的常用方法：

```
if(view == null)
{
    vi = inflater.inflate(R.layout.fb_list_row, parent, false);
} 
```

而对于不同的对象列表视图项目，您需要像这样删除 if 语句；

```
vi = inflater.inflate(R.layout.fb_list_row, parent, false); 
```

然后对每个列表项进行更改..

希望这会有所帮助。否则放一些更多的代码。

# c# - 如何使用 C# 从 XML 加载特定节点

> ID：13139499
> 
> 赞同：2
> 
> 时间：2012-10-30T12:57:37.907
> 
> 标签：c#, xml, xml-parsing

我想从以下 XML 中获得负载

```
<t:RequestSecurityTokenResponse xmlns:t="http://schemas.xmlsoap.org/ws/2005/02/trust">
  <t:RequestedSecurityToken>
    <Assertion ID="_a2baec61-1e5a-4f7e-8cc4-44ca3cb82a44" IssueInstant="2012-10-30T11:56:19.211Z" Version="2.0" xmlns="urn:oasis:names:tc:SAML:2.0:assertion">
      <Issuer>https://vidizmo1-ac.accesscontrol.windows.net/</Issuer>
      <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
          <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
          <ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
          <ds:Reference URI="#_a2baec61-1e5a-4f7e-8cc4-44ca3cb82a44">
            <ds:Transforms>
              <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
              <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
            </ds:Transforms>
            <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
            <ds:DigestValue>XsW696+Y/CkArU5a8zvqeEckl+rpgiv0lEEs2PDx3Hw=</ds:DigestValue>
          </ds:Reference>
        </ds:SignedInfo>

      </ds:Signature>

      **<AttributeStatement>
        <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress">
          <AttributeValue>farooqtest11@gmail.com</AttributeValue>
          </Attribute>
          <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name">
            <AttributeValue>farooq test</AttributeValue>
          </Attribute>
          <Attribute Name="http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider">
            <AttributeValue>Google</AttributeValue>
          </Attribute>
        </AttributeStatement>**

    </Assertion>
  </t:RequestedSecurityToken>
  <t:TokenType>urn:oasis:names:tc:SAML:2.0:assertion</t:TokenType>
  <t:RequestType>http://schemas.xmlsoap.org/ws/2005/02/trust/Issue</t:RequestType>
  <t:KeyType>http://schemas.xmlsoap.org/ws/2005/05/identity/NoProofKey</t:KeyType>
</t:RequestSecurityTokenResponse> 
```

我的代码是：

```
 string xml = @"C:\Users\baseer.haider\Documents\visual studio 2010\Projects\CheckReadXML\CheckReadXML\ACS.xml";
            XmlDocument acsXml = new XmlDocument();
            acsXml.Load(xml);
            XmlNodeList acsNode = acsXml.DocumentElement.SelectNodes("//AttributeStatement//Attribute");

            foreach (XmlNode node in acsNode)
            {
                if (node.Attributes["Name"] != null)
                {
                    if (node.Attributes["Name"].Value == "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress")
                    {
                        var innerNode = node.SelectSingleNode("//AttributeValue");
                        Console.WriteLine(innerNode.InnerText);
                    }

                } 
```

我想从以下 XML 加载节点，但我无法加载它，因为当我使用此代码选择该节点时 XmlNodeList acsNode =`acsXml.DocumentElement.SelectNodes("//AttributeStatement//Attribute");`

acsNode 为空。任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:04:51.103

使用 Linq2Xml 更容易。

```
XDocument xDoc = XDocument.Load(fileName);
XNamespace ns = "urn:oasis:names:tc:SAML:2.0:assertion";

var attvals = xDoc.Descendants(ns + "AttributeValue")
                  .Select(x => x.Value)
                  .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:06:14.827

使用**LINQ2XML**

```
XElement doc = XElement.Load("yourStream.xml");
XNamespace t="http://schemas.xmlsoap.org/ws/2005/02/trust";
XNamespace a="urn:oasis:names:tc:SAML:2.0:assertion";

var lstElmVal=doc.Descendants(t+"RequestedSecurityToken")
.Descendants(t+"Assertion")
.Element(a+"AttributeStatement")
.Elements(a+"Attribute")
.Where(x=>x.Attribute("Name").Value=="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress")
.Select(y=>y.Value);

//lstElmVal now contains your required data 
```

# java - Spring MVC + 安全性。@Secured + @RequestMapping

> ID：13139503
> 
> 赞同：1
> 
> 时间：2012-10-30T12:57:48.690
> 
> 标签：java, spring-mvc, spring-security

我有以下控制器：

```
@Controller
@RequestMapping("/api")
public class APIProvider {
    @Secured(value = {"isAuthenticated()"})
    @RequestMapping(value="/secure/{app}/{query}", method=RequestMethod.GET)
    @ResponseBody
    public ResponseEntity<String> getList(HttpServletRequest request,
        @PathVariable("app") String app,
        @PathVariable("query") String query) {
        //....DO SMTH
    }
} 
```

尝试访问所需的 URL 时，我得到“找不到页面”。

删除`@Secured`注释，解决问题。所以请求映射是正确的。同样对于`@Secured`注释，我在 security-config.xml 中添加了以下指令：

```
<security:global-method-security secured-annotations="enabled"/> 
```

谁能帮我一起做`@Secured`+`@RequestMapping`工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:11:52.040

在您的 security.xml 文件中，在*<security:global-method-securitysecured-annotations="enabled"/>*之后添加以下行：

```
<http use-expressions="true">
    <intercept-url pattern="/api/secure/**" access="isFullyAuthenticated() />
</http> 
```

这将确保，如果用户完全通过身份验证，您的所有 /api/secure 请求都将得到服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:14:34.350

试试这个`@Secured("IS_AUTHENTICATED_FULLY")`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T07:27:55.743

我认为您还需要包含安全表达式处理程序。

```
<security:global-method-security pre-post-annotations="enabled" >
    <security:expression-handler ref="expressionHandler"/>
</security:global-method-security>

<beans:bean id="expressionHandler"   class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHa ndler">
    <beans:property name="permissionEvaluator" ref="permissionEvaluator"/>
</beans:bean> 
```

# java - 我需要同步吗？

> ID：13139508
> 
> 赞同：0
> 
> 时间：2012-10-30T12:58:01.497
> 
> 标签：java, user-interface, synchronization

我需要添加某种同步吗？我创建了另一个线程来管理与服务器的 TCP 通信。流程是这样的：

```
private void sendLetterButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                 
try {
// TODO add your handling code here:
   session.getCurrentMatch().guessALetter(this.letterTextField.getText());
} catch (Exception ex) {
    JOptionPane.showMessageDialog(this, "Please insert one letter only");
}}

public void guessALetter(String l) throws Exception {
    DataPacket dp = new DataPacket();
    Communicator c = new Communicator(p, session);
    c.start();
}

public class Communicator extends Thread {

private Packet packet;
private Session session;

public Communicator(Packet p, Session s) {
    this.session = s;
    this.packet = p;
}

public void run() {
    System.out.println("Communicator: "+Thread.currentThread());
    Socket socket = session.getClientSocket();
    ObjectOutputStream out = session.getOut();
    ObjectInputStream in = session.getIn();

    ResponsePacket reply;

    try {

        out.writeObject(this.packet);
        out.flush();

        reply = (ResponsePacket) in.readObject();
        System.out.println("Received" + reply.getCurrentWordView() + reply.getCurrentWordView());

        session.getCurrentMatch().setLastReply(reply);

        session.getCurrentMatch().manageResponsePacket(reply);

    } catch (ClassNotFoundException ex) {
        Logger.getLogger(Communicator.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(Communicator.class.getName()).log(Level.SEVERE, null, ex);
    }finally{

    }}}

public void manageResponsePacket(ResponsePacket reply) {

    this.setLastReply(reply);

    if (reply.isGameMode()) {
        setWordView(reply.getCurrentWordView());
        setCounter(reply.getFailedAttemptsCounter());

        setChanged();
        notifyObservers(EventEnum.GAMERESPONSE);
    } else if (reply.isGameOverMode()) {
    }
} 
```

如您所见，第二个线程是更新 gui 的线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:02:49.093

如果`manageResponsePacket()`更新 swing/awt GUI，你就有问题了。您只能在 EDT 上更新 swing/awt GUI。用于使用`SwingUtilities.invokeLater()`ResponsePacket 更新 GUI。

# ajax - 为什么我在尝试使用 uploadify 上传时收到 HTTP 错误

> ID：13139509
> 
> 赞同：2
> 
> 时间：2012-10-30T12:58:05.800
> 
> 标签：ajax, codeigniter, jquery, uploadify

我选择gallerycms 来构建自己的画廊，但是当我尝试将其作为模块放入我的codeigniter cms 时，我收到此错误HTTP 错误。我不知道为什么我会看到这个错误，虽然我正在复制所有控制器、模型、视图、核心文件，但我仍然收到这个错误。

注意：uploadify 与 Gallerycms 配合良好，但是当我想将其作为模块添加到我的 cms 中时，我收到此错误：

![错误捕获](../Images/05be695d6d0d1846991b7ca8279fba21.png)

![来自 Chrome 控制台的错误](../Images/2ec4e0c81cd0402fa1bc8e61a46ebc29.png) 萤火虫代码

```
<script type="text/javascript">
$(document).ready(function() {
$('.btn-group > a').tooltip();
$('#upload-btn').hide();
$('#new-images').hide();
$('a.img-fancy').fancybox();
$('.image-delete-btn').click(function() {
deleteUrl = $(this).attr('action');
});
$('#image-modal').on('show', function() {
$('#image-modal-delete-btn').attr('href', deleteUrl);
});
$("#sortable").sortable({
handle : '.drag-handle',
update : function () {
var order = $('#sortable').sortable('serialize', { key : 'order_num[]' });
$.ajax({
url : 'http://localhost/gallery/album/reorder?' + order,
type : 'GET',
cache : false,
success : function(response) {
$('#reorder-feedback').show();
$('#reorder-feedback').html('<a class="close" data-dismiss="alert">x</a><strong>Changed image order successfully.</strong>');
},
error : function(jqXHR, textStatus, errorThrown) {
alert('An error occured when ordering the images.');
}
});
}
});
$( "#sortable" ).disableSelection();
$('#file_upload').uploadify({
'uploader' : 'http://localhost/gallery/webroot/flash/uploadify.swf',
'script' : 'http://localhost/gallery/api/upload/3',
'cancelImg' : 'http://localhost/gallery/webroot/images/cancel.png',
'folder' : '/webroot/uploads',
'auto' : false,
'multi' : true,
'fileExt' : '*.jpg;*.jpeg;*.gif;*.png',
'fileDesc' : 'Image files',
'sizeLimit' : 2097152, // 2MB
'wmode' : 'opaque',
'onSelect' : function(event, ID, fileObj) {
$('#upload-btn').show();
},
'onCancel' : function(event, ID, fileObj) {
$('#upload-btn').hide();
},
'onError' : function(event, ID, fileObj, errorObj) {
},
'onComplete' : function(event, ID, fileObj, response, data) {
var fileName = response;
$('#upload-btn').hide();
$('#new-images').show();
$.ajax({
url : 'http://localhost/gallery/album/resize/3/' + response,
type : 'POST',
cache : false,
success : function(response) {
if (response !== 'failure') {
var new_image = '<li><img src="http://localhost/gallery/webroot/uploads/' + response + '" /><br />' + response + '</li>';
$('#new-image-list').append(new_image);
} else {
var fail_message = '<li>Thumbnail creation failed for: ' + fileObj.name + '</li>';
$('#new-image-list').append(fail_message);
}
},
error : function(jqXHR, textStatus, errorThrown) {
alert('Error occurred when generating thumbnails.');
}
});
}
});
});
</script> 
```

api控制器

/** * 处理图片上传。* * @param 类型 $album_id */

```
 public function upload($album_id)
  {
    $config = array();
    $config['upload_path']    = './webroot/uploads/';
    $config['allowed_types']  = 'gif|jpg|png';
    $config['max_size']       = '2048'; // 2MB
    $config['remove_spaces']  = TRUE;
    $config['encrypt_name']   = TRUE;
    $config['overwrite']      = FALSE;
    $this->load->library('upload', $config);
    if ( ! $this->upload->do_upload('Filedata'))
    {
      header('HTTP/1.1 500 Internal Server Error');
      exit();
    }
    else
    {
      $upload_info = $this->upload->data();

      $album_config = $this->config_model->get_by_album_id($album_id);

      // Insert file information into database
      $now = date('Y-m-d H:i:s');
      $order_num = $this->image_model->get_last_order_num($album_id);
      if (empty($order_num))
      {
        $order_num = 0;
      }
      $order_num++;
      $image_data = array(
      'album_id'       => $album_id,
      'uuid'           => $this->create_uuid(),
      'name'           => $upload_info['file_name'],
      'order_num'      => $order_num,
      'caption'        => '',
      'raw_name'       => $upload_info['raw_name'],
      'file_type'      => $upload_info['file_type'],
      'file_name'      => $upload_info['file_name'],
      'file_ext'       => $upload_info['file_ext'],
      'file_size'      => $upload_info['file_size'],
      'path'           => $config['upload_path'],
      'full_path'      => $upload_info['full_path'],
      'published'      => $album_config->auto_publish,
      'created_at'     => $now,
      'updated_at'     => $now,
      );

      $image_id = $this->image_model->create($image_data);

      $this->album_model->update(array('updated_at' => $now), $album_id);

      echo $image_id;
    }
  }

} 
```

视图/images.php

```
<?php
$includes = array(
    'js' => array('jquery-ui-1.8.18.custom.min.js', 'swfobject.js', 'jquery.uploadify.v2.1.4.min.js', 'fancybox/jquery.fancybox-1.3.4.pack.js'), 
    'css' => array('uploadify.css', 'fancybox/jquery.fancybox-1.3.4.css'));
?>
<?php $this->load->view('album/inc/header', $includes); ?>

<?php if (isset($flash)): ?>
<div class="alert alert-success"><a class="close" data-dismiss="alert">x</a><strong><?php echo $flash; ?></strong></div>
<?php endif; ?>

<div class="w100" style="margin-bottom: 10px;">

  <ul class="pager">
    <li class="previous">
        <a href="<?php echo base_url('album'); ?>">&larr; Back to albums</a>
    </li>
  </ul>
  <div class="well">
    <h4 style="margin-bottom: 10px;">Upload images for album: <?php echo $album->name; ?></h4>
    <input id="file_upload" type="file" name="file_upload" />
    <p id="upload-btn" style="margin:10px 0;">
      <a href="javascript:$('#file_upload').uploadifyUpload()" class="btn btn-primary btn-large">Upload Files</a>
    </p>
    <div id="new-images">
      <h4>Uploaded Images</h4>
      <p><a class="btn" href="<?php echo site_url("album/images/$album->id"); ?>" style="margin: 10px 0;"><i class="icon-refresh"></i> Refresh</a></p>
      <ul id="new-image-list"></ul>
      <div class="clear"></div>
    </div>
  </div>
</div>

<div id="reorder-feedback" class="alert alert-success" style="display: none;"></div>

<span class="left w75">
  <?php 
  $total_file_size = 0;
  $total_images = 0;
  $img_url = '';
  ?>
  <?php if (isset($images)): ?>
  <ul id="sortable">
    <?php foreach ($images as $image): ?>
    <?php 
    $total_file_size += $image->file_size; 
    $total_images++;
    $img_url = base_url() . 'webroot/uploads/' . $image->file_name;
    ?>
    <li id="image_<?php echo $image->id; ?>" class="ui-state-default" style="height: <?php echo $config->thumb_height + 10; ?>px">
      <div class="drag-handle" style="height: <?php echo $config->thumb_height + 5; ?>px"></div>
      <div class="image-container">
        <a class="album-images img-fancy thumbnail" href="<?php echo $img_url; ?>" title="<?php echo $image->caption; ?>">
          <img src="<?php echo base_url() . 'webroot/uploads/' . $image->raw_name . '_thumb' . $image->file_ext . '?r=' . rand(); ?>" alt="<?php echo $image->caption; ?>" />
        </a>
      </div>
      <div class="info" style="left: <?php echo $config->thumb_width + 50; ?>px">
        File name: <?php echo $image->name; ?><br />
        Caption: 
          <?php if (empty($image->caption)): ?>
            <a href="<?php echo site_url("image/edit/$album->id/$image->id"); ?>">Create one</a>
          <?php else: ?>
            <?php echo $image->caption; ?> 
          <?php endif; ?>
          <br />
        <?php /* Comments: <?php echo $image->comments; ?><br /> */ ?>
        File size: <?php echo $image->file_size; ?> KB<br />
      </div>
      <div class="btn-group">
        <a href="<?php echo $img_url; ?>" class="btn img-fancy" rel="tooltip" data-original-title="Preview"><i class="icon-zoom-in"></i></a>
        <a href="<?php echo site_url("image/download/$image->id"); ?>" class="btn" title="Download" rel="tooltip" data-original-title="Download"><i class="icon-download-alt"></i></a>
        <a href="<?php echo site_url("image/edit/$album->id/$image->id"); ?>" class="btn" title="Edit" rel="tooltip" data-original-title="Edit"><i class="icon-pencil"></i></a>
        <?php /* <a href="<?php echo site_url("image/comments/$album->id/$image->id"); ?>" class="btn" title="Comments" rel="tooltip" data-original-title="Comments"><i class="icon-comment"></i></a> */ ?>
        <?php if ($image->published == 1): ?>
        <a href="<?php echo site_url("image/unpublish/$album->id/$image->id"); ?>" class="btn btn-success" title="Published" rel="tooltip" data-original-title="Published"><i class="icon-ok icon-white"></i></a>
        <?php else: ?>
        <a href="<?php echo site_url("image/publish/$album->id/$image->id"); ?>" class="btn" title="Unpublished" rel="tooltip" data-original-title="Unpublished"><i class="icon-ok"></i></a>
        <?php endif; ?>
        <a href="#image-modal" class="btn btn-danger image-delete-btn" title="Delete" rel="tooltip" action="<?php echo site_url("image/remove/$album->id/$image->id"); ?>" data-toggle="modal" data-original-title="Delete"><i class="icon-remove icon-white"></i></a>
      </div>
    </li>
    <?php endforeach; ?>
  </ul>
  <?php endif; ?>
</span>
<span class="right w20">
  <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header"><?php echo $album->name; ?></li>
      <li><a href="<?php echo site_url("album/edit/$album->id"); ?>"><i class="icon-pencil"></i>Rename</a></li>
      <li><a href="<?php echo site_url("album/configure/$album->id"); ?>"><i class="icon-cog"></i>Configure</a></li>
      <li class="nav-header">Info</li>
      <li>Images: <?php echo $total_images; ?></li>
      <li>Album file size: <?php echo round($total_file_size / 1024, 2); ?> MB</li>
    </ul>
  </div>
</span>
<div class="clear"></div>

<div class="modal hide fade" id="image-modal">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Delete Image</h3>
  </div>
  <div class="modal-body">
    <p><strong>Are you sure you want to delete this image?</strong></p>
  </div>
  <div class="modal-footer">
    <a id="image-modal-delete-btn" href="#" class="btn btn-danger">Delete</a>
    <a href="#" class="btn" data-dismiss="modal">Cancel</a>
  </div>
</div>

<script type="text/javascript">
$(document).ready(function() {
  $('.btn-group > a').tooltip();
  $('#upload-btn').hide();
  $('#new-images').hide();

  $('a.img-fancy').fancybox();

  $('.image-delete-btn').click(function() {
    deleteUrl = $(this).attr('action');
  });

  $('#image-modal').on('show', function() {
    $('#image-modal-delete-btn').attr('href', deleteUrl);
  });

  $("#sortable").sortable({
    handle : '.drag-handle',
    update : function () { 
      var order = $('#sortable').sortable('serialize', { key : 'order_num[]' }); 
      $.ajax({
        url          : '<?php echo base_url(); ?>album/reorder?' + order,
        type         : 'GET',
        cache        : false,
        success      : function(response) {
          $('#reorder-feedback').show();
          $('#reorder-feedback').html('<a class="close" data-dismiss="alert">x</a><strong>Changed image order successfully.</strong>');
        },
        error        : function(jqXHR, textStatus, errorThrown) {
          alert('An error occured when ordering the images.');
        }
      });
    }
  });

  $( "#sortable" ).disableSelection();

  $('#file_upload').uploadify({
    'uploader'       : '<?php echo base_url(); ?>webroot/flash/uploadify.swf',
    'script'         : '<?php echo base_url(); ?>album/api/upload/<?php echo $album->id;  ?>',
    'cancelImg'      : '<?php echo base_url(); ?>webroot/images/cancel.png',
    'folder'         : '/webroot/uploads',
    'auto'           : false,
    'multi'          : true,
    'fileExt'        : '*.jpg;*.jpeg;*.gif;*.png',
    'fileDesc'       : 'Image files',
    'sizeLimit'      : 2097152, // 2MB
    'wmode'          : 'opaque',
    'onSelect'       : function(event, ID, fileObj) {
      $('#upload-btn').show();
    },
    'onCancel'       : function(event, ID, fileObj) {
      $('#upload-btn').hide();
    },
    'onError'        : function(event, ID, fileObj, errorObj) {

    },
    'onComplete'     : function(event, ID, fileObj, response, data) {
      var fileName = response;
      $('#upload-btn').hide();
      $('#new-images').show();
      $.ajax({
        url          : '<?php echo base_url(); ?>album/resize/<?php echo $album->id; ?>/' + response,
        type         : 'POST',
        cache        : false,
        success      : function(response) {
          if (response !== 'failure') {
            var new_image = '<li><img src="<?php echo base_url(); ?>webroot/uploads/' + response + '" /><br />' + response + '</li>';
            $('#new-image-list').append(new_image);
          } else {
            var fail_message = '<li>Thumbnail creation failed for: ' + fileObj.name + '</li>';
            $('#new-image-list').append(fail_message);
          }
        },
        error        : function(jqXHR, textStatus, errorThrown) {
          alert('Error occurred when generating thumbnails.');
        }
      });
    }
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:46:24.293

我不确定这是否有帮助。

我之前遇到过同样的问题，然后我意识到当我将文件上传到服务器时，我以root用户身份登录，所以文件所有者是root。解决方案是删除所有上传的文件，然后使用其他用户再次上传。

现在它运作良好。

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:09:55.247

文件扩展名的问题，所以我替换了这段代码

```
$config['allowed_types']  = 'gif|jpg|png'; 
```

和

```
 $config['allowed_types']  = '*'; 
```

然后我从 jquery 代码中只选择了我喜欢的扩展名

```
'fileExt' : '*.jpg;*.jpeg;*.gif;*.png', 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T16:27:41.200

您可以在 application/config/mimes.php 中修改 mime

改变：

```
'jpeg'  =>  array('image/jpeg', 'image/pjpeg'),
'jpg'   =>  array('image/jpeg', 'image/pjpeg'),
'jpe'   =>  array('image/jpeg', 'image/pjpeg'),
'png'   =>  array('image/png',  'image/x-png'), 
```

到

```
'jpeg'  =>  array('image/jpeg', 'image/pjpeg', 'application/octet-stream'),
'jpg'   =>  array('image/jpeg', 'image/pjpeg', 'application/octet-stream'),
'jpe'   =>  array('image/jpeg', 'image/pjpeg', 'application/octet-stream'),
'png'   =>  array('image/png',  'image/x-png', 'application/octet-stream'), 
```

它应该工作:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T13:29:35.933

您没有向我们提供详细的错误信息。HTTP 错误可能意味着很多事情。

**1\. 检查您的 Firebug 控制台或 Chrome 控制台中的 Ajax POST 并查看它返回的内容。2\. 确保上传保存到的文件夹是可写的（CHMOD 权限）。**

**引起我注意的一件事是：**

> ```
> $config['upload_path']    = './webroot/uploads/'; 
> ```

看起来你已经复制粘贴了这个，确保你给它一个正确的上传路径。

# java - 扩展类在 Eclipse 中完美编译，但在 cmd 中不完美

> ID：13139514
> 
> 赞同：1
> 
> 时间：2012-10-30T12:58:25.610
> 
> 标签：java, eclipse, cmd, classpath

我的程序由扩展其他类的类组成。问题是，当我尝试在**cmd**中编译它们时，系统显示**“找不到符号”**。一些讨论类似问题的站点提到包括 CLASSPATH 中的源文件夹。我按照他们说的做了，但仍然出现同样的错误。但是，它在 Eclipse 中运行顺畅。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:02:30.047

确保首先编译顶级类。如果您尝试编译扩展其他类的类，并且您没有`.class`为该类编译文件，您将收到该错误。

```
package pkg1;
class A { }

package pkg2;
import pkg1.A;
class B extends A { } 
```

对于上面的代码，你应该先编译`.java`包含你的文件`class A`才能让你的`.java`文件包含`class B`编译。此外，在您的类路径中设置包含您`class files`的路径。

在 Eclipse 中，它之所以有效，是因为它会在您保存类时自动编译它们。

**笔记： -**

如果您的类在某些包下，请使用以下命令编译您的 java 文件： - `javac -d . A.java`。这将为包名称创建一个文件夹，并自动将类文件放入该文件夹中。然后你的 B 班就可以找到它

# python - web2py：如何为网格实现多个过滤器？

> ID：13139517
> 
> 赞同：2
> 
> 时间：2012-10-30T12:58:51.827
> 
> 标签：python, web2py

任何人都可以提供有关为网格实现多个过滤器的好方法的建议吗？我有兴趣按照以下 Webgrid 图像中显示的内容做一些事情：

**[网络网格](http://web2pyslices.com/main/static/share/images/webgrid.jpg)**

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:47:39.130

您可以将某些链接组上的参数设置为控制器，然后在控制器上处理该参数，为此，设置一个不同的查询以使用它：

```
grid=SQLFORM.grid(query) 
```

您可以使用参数放入查询或使用不同的查询类型......并将其从视图发送到控制器......

Web2py 为您提供了获得任何东西的广泛自由...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:43:59.040

对于其他对此感兴趣的人，web2py google group 最终提供了一个非常[好的解决方案。](https://groups.google.com/forum/?fromgroups=#!searchin/web2py/filter/web2py/oH7eMYNHt6Y/ocAkNK2h2KoJ)

# java - 另存为 DialogueBox 在 servlet response.setHeader 中不起作用

> ID：13139519
> 
> 赞同：1
> 
> 时间：2012-10-30T12:58:54.747
> 
> 标签：java, jquery, excel, servlets, dialog

我通过单击按钮将 jqgrid 中显示的数据导出到 .excel 文件中。这是我的导出到excel按钮的代码点击..

```
 $('#excel').click(function(){
            var fromdate=$('#fromdate').val();
            var todate=$('#todate').val();
            if(fromdate && todate)
            {
                var URL='excel?fromdate='+$('#fromdate').val()+'&todate='+$('#todate').val();
                $.ajax({
                   url:URL,
                   type:'GET',
                   success:function(data){
                       alert('Exported To Excel');
                   }

                });
            }
        }); 
```

现在这个按钮将指向 servlet 的 excel.java 页面。下面是我的 exceljava 页面代码。现在根据我的需要，当用户单击导出到 excel 按钮时，应该会弹出一个 openwith 并保存为对话框，这使用户能够提供所需的命名并保存到所需的位置但是这段代码没有发生。请指出我的错误..

excel.java

```
 try {

    response.setHeader("Content-Type", "application/vnd.ms-excel");
    response.setHeader("Content-Disposition","attachment; filename=excel.xls");

    String datum1 = request.getParameter("fromdate");
    String datum2 = request.getParameter("todate");
    SimpleDateFormat sdfSource = new SimpleDateFormat("dd-MM-yyyy");
    Date date = sdfSource.parse(datum1);
    Date date2 = sdfSource.parse(datum2);
    SimpleDateFormat sdfDestination = new SimpleDateFormat("yyyy-MM-dd");
    datum1 = sdfDestination.format(date);
    System.out.println(datum1);
    datum2 = sdfDestination.format(date2);
    System.out.println(datum2);

    HSSFWorkbook hwb = new HSSFWorkbook();
    HSSFSheet sheet = hwb.createSheet("CallBillingSystem");

    HSSFRow rowhead = sheet.createRow((short) 0);
    rowhead.createCell((short) 0).setCellValue("calldate");
    rowhead.createCell((short) 1).setCellValue("src");
    rowhead.createCell((short) 2).setCellValue("dst");
    rowhead.createCell((short) 3).setCellValue("dstchannel");
    rowhead.createCell((short) 4).setCellValue("lastapp");
    rowhead.createCell((short) 5).setCellValue("duration");
    rowhead.createCell((short) 6).setCellValue("disposition");
    rowhead.createCell((short) 7).setCellValue("amaflags");
    rowhead.createCell((short) 8).setCellValue("cdrcost");

    String strQuery = "";
    ResultSet rs = null;

    conexion conexiondb = new conexion();
    conexiondb.Conectar();

    strQuery = "SELECT * FROM cdrcost where date(calldate) between '" + datum1 + "' and '" + datum2 + "'";

     //strQuery = "SELECT * FROM cdrcost where date(calldate) between '2011-09-01' and '2012-01-01'";

    rs = conexiondb.Consulta(strQuery);
    int i = 1;
    while (rs.next()) {
        HSSFRow row = sheet.createRow((short) i);
        row.createCell((short) 0).setCellValue(rs.getString("calldate"));
        row.createCell((short) 1).setCellValue(rs.getString("src"));
        row.createCell((short) 2).setCellValue(rs.getString("dst"));
        row.createCell((short) 3).setCellValue(rs.getString("dstchannel"));
        row.createCell((short) 4).setCellValue(rs.getString("lastapp"));
        row.createCell((short) 5).setCellValue(rs.getString("duration"));
        row.createCell((short) 6).setCellValue(rs.getString("disposition"));
        row.createCell((short) 7).setCellValue(rs.getString("amaflags"));
        row.createCell((short) 8).setCellValue(rs.getString("cdrcost"));
        i++;
    }
    FileOutputStream fileOut = new FileOutputStream(filename);
    hwb.write(fileOut);     
    hwb.write(response.getOutputStream());
    System.out.println("Your excel file has been generated!");
    FileOut.close();
} catch (Exception ex) {
    System.out.println(ex);

}

} 
```

# javascript - JavaScript 从函数中获取变量

> ID：13139522
> 
> 赞同：5
> 
> 时间：2012-10-30T12:58:58.920
> 
> 标签：javascript, jquery, function, variables

我不是 JavaScript 方面的专业人士，我已经看到在互联网上搜索了很长时间。

我在从另一个函数获取变量时遇到问题。我的代码如下所示：

```
var variabeltje;
$.post('js/ajax/handle_time.php', {'time': $(this).find('input').val()},
  function(data) {
    alert(data);
    variabeltje=data;
  }
);
alert(window.variabeltje); 
```

变量`variabeltje`必须从数据中获取信息。当我将警报放在下面`variabeltje=data`时它正在工作，但我需要在函数之后使用数据变量。

编辑：

我已经把它改成了人们所说的，我现在有这个：

```
 var XHR = $.post('js/ajax/handle_time.php', {time: $(this).find('input').val()});
                XHR.done(function(data) {
                    console.log(data); 
                    getData(data);
                }); 

                function getData(data) {
                if(data == 'true') {
                    alert(data);
                    $(this).unbind('keypress');
                    $(this).html($(this).find('input').val());
                }
                } 
```

但是现在 $(this) 没有传递给函数。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:11:02.807

由于它是异步的，因此数据仅在 ajax 调用完成后才可用，因此您必须修改代码以使用它并等到 ajax 完成后才能完成您的工作：

```
var XHR = $.post('js/ajax/handle_time.php', {time: $(this).find('input').val()});

XHR.done(function(data) {
    console.log(data);
}); 
```

或在其他功能中：

```
function XHR(time){
   return $.post('js/ajax/handle_time.php', {time: time});
}

function doStuff(element) {
    XHR($(element).find('input').val()).done(function(data) {
        console.log(data);
    });
} 
```

**编辑：**

根据您的编辑，看起来这是一个范围问题：

```
var self = this,
    XHR = $.post('js/ajax/handle_time.php', {time: $(self).find('input').val()});

XHR.done(function(data) {
    console.log(data); 
    getData(data);
}); 

function getData(data) {
    if(data == 'true') { //normally you'd try to pass true as a boolean, not string
      alert(data);
      $(self).unbind('keypress').html($(self).find('input').val());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:01:48.513

这是因为 $.post 方法是异步运行的。

请在 SO 上查看[这个问题。](https://stackoverflow.com/questions/5821380/how-to-make-a-jquery-post-request-synchronous)

编辑：您可以更改代码并将 post 方法之后的部分放在成功触发的匿名函数的主体内。如下：

```
$.post('js/ajax/handle_time.php', {'time': $(this).find('input').val()},
  function(data) {
    alert(data);
    variabeltje=data;
    alert(window.variabeltje); // or whatever function you need to call, call it here...
  }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:01:31.640

问题是该`post`方法是异步执行的。也就是说，一个帖子被发送到服务器，但执行流程仍在继续，因此您的警报正在尝试访问一个由于帖子尚未返回而未设置的值。

[`ajax`](http://api.jquery.com/jQuery.ajax/)如果您需要同步执行，您可以使用方法。

# grails - 在视图上访问时，传递给视图的 Grails 控制器数据为空？

> ID：13139528
> 
> 赞同：2
> 
> 时间：2012-10-30T12:59:18.857
> 
> 标签：grails, controller, null, viewdata

我有一个包含一些控制器、视图和布局的应用程序。我基本上是在尝试将一些数据从控制器传递到视图。有问题的视图使用布局文件夹中名为 main.gsp 的布局。所以我使用下面的代码来尝试将数据传递给视图：

```
def index = {

        String test = "Testing"
                println(test)
        render(view:"index", name: test)
    } 
```

然后在视图上看起来像这样：

```
<html>

<head>
    <title>My App</title>
    <meta name="layout" content="main" />
</head>

<body>

        <h1>${name}</h1>
....... 
```

然后当我运行应用程序时，我可以看到打印数据很好但是没有数据传递给视图，这是因为使用了布局吗？如果是这样，我该如何解决？我是否改为访问元对象？提前致谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:03:42.517

试试这个：

```
def index = {
    String test = "Testing"
    println(test)
    [name: test]
} 
```

这将按照惯例呈现您的`index`视图。

从您的控制器中，您必须将`model`（地图）传递给您的视图。

现在您可以在视图中使用返回地图的元素：

```
<h1>${name}</h1> 
```

有关更多信息，请参阅[文档](http://grails.org/doc/2.1.0/ref/Controllers/render.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:09:48.667

来自 aiolos 的示例是正确的，但是当您确实需要对模型中的某些数据使用方法 render() 时，您必须这样调用它：

```
render( view:'index', model: [ 'name':test ] ) 
```

# android - 从数据库中读取数据并在 android 的 GridView 中显示

> ID：13139531
> 
> 赞同：4
> 
> 时间：2012-10-30T12:59:25.143
> 
> 标签：android, database, grid

我们如何从数据库中读取数据并在 android 的网格中显示它们？我看到这样的代码：

```
public class DataAdapter extends BaseAdapter
{
    Context mContext;
    private String [] id = {"S001","S002","S003","S004","S005","S006","S007"};
    private String [] name={"Rohit","Rahul","Ravi","Amit","Arun","Anil","Kashif"};
    private LayoutInflater mInflater;
    public DataAdapter(Context c)
    {
        mContext=c;
        mInflater = LayoutInflater.from(c);
    }

    public int getCount()
    {
        return id.length;
    }

    public Object getItem(int position)
    {
        return position;
    }

    public long getItemId(int position)
    {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent)
    {
        ViewHolder holder=null;
        // convertView=null;
        if(convertView==null)
        {
            convertView = mInflater.inflate(R.layout.customgrid,
                                                                    parent,false);
            holder = new ViewHolder();
            holder.txtId=(TextView)convertView.findViewById(R.id.txtId);
            holder.txtId.setPadding(100, 10,10 , 10);
            holder.txtName=(TextView)convertView.findViewById(R.id.txtName);
            holder.txtName.setPadding(100, 10, 10, 10);

            if(position==0)
            {                             
                convertView.setTag(holder);
            }
        }
        else
        {
            holder = (ViewHolder) convertView.getTag();
        }
        // holder.txtId.setText(id[position]);
        holder.txtId.setText(id[position]);
        holder.txtName.setText(name[position]);
        return convertView;
    }

    static class ViewHolder
    {
        TextView txtId;
        TextView txtName;
    }
}

//------------main---------------------------------------------

public class GridViewDataActivity extends Activity {
    EditText name;
    GridView gridview;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        gridview = (GridView) findViewById(R.id.gridview);  
        gridview.setAdapter(new DataAdapter(this));
    }
} 
```

我想以同样的方式显示来自 sqlite DB 的数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T14:33:05.430

您好，这只是您需要的演示样本。请检查它可能对你有帮助。

![在此处输入图像描述](../Images/fcabf529029c07003a88f854d2b863bb.png)

您的主要活动课程

```
package com.Sqlite_grid_view;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.GridView;
import android.widget.TextView;
import android.widget.Toast;

public class AndroidSQLiteTutorialActivity extends Activity {
    private GridView gridView;
    public static ArrayList<String> ArrayofName = new ArrayList<String>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        DatabaseHandler db = new DatabaseHandler(this);

        /**
         * CRUD Operations
         * */
        // Inserting Contacts
        Log.d("Insert: ", "Inserting ..");
        db.addContact(new Contact("Ravi", "91"));
        db.addContact(new Contact("Srinivas", "99"));
        db.addContact(new Contact("Tommy", "95"));
        db.addContact(new Contact("Karthik", "93"));

        // Reading all contacts
        Log.d("Reading: ", "Reading all contacts..");
        List<Contact> contacts = db.getAllContacts();       

        for (Contact cn : contacts) {
            String log = "Id: "+cn.getID()+" ,Name: " + cn.getName() + " ,Phone: " + cn.getPhoneNumber();
                // Writing Contacts to log
        Log.d("Name: ", log);

        }

        db.getAllContacts();

        gridView = (GridView) findViewById(R.id.gridView1);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, ArrayofName);

        gridView.setAdapter(adapter);

        gridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
               Toast.makeText(getApplicationContext(),
                ((TextView) v).getText(), Toast.LENGTH_SHORT).show();
            }
        });
    }
} 
```

联系java类

```
package com.Sqlite_grid_view;

import java.util.ArrayList;

public class Contact {

    //private variables
    int _id;
    String _name;
    String _phone_number;

    // Empty constructor
    public Contact(){

    }
    // constructor
    public Contact(int id, String name, String _phone_number){
        this._id = id;
        this._name = name;
        this._phone_number = _phone_number;
    }

    // constructor
    public Contact(String name, String _phone_number){
        this._name = name;
        this._phone_number = _phone_number;
    }
    // getting ID
    public int getID(){
        return this._id;
    }

    // setting id
    public void setID(int id){
        this._id = id;
    }

    // getting name
    public String getName(){
        return this._name;
    }

    // setting name
    public void setName(String name){
        this._name = name;
    }

    // getting phone number
    public String getPhoneNumber(){
        return this._phone_number;
    }

    // setting phone number
    public void setPhoneNumber(String phone_number){
        this._phone_number = phone_number;
    }
} 
```

数据库助手类：

```
package com.Sqlite_grid_view;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "contactsManager";

    // Contacts table name
    private static final String TABLE_CONTACTS = "contacts";

    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_PH_NO = "phone_number";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_PH_NO + " TEXT" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

        // Create tables again
        onCreate(db);
    }

    /**
     * All CRUD(Create, Read, Update, Delete) Operations
     */

    // Adding new contact
    void addContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName()); // Contact Name
        values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone

        // Inserting Row
        db.insert(TABLE_CONTACTS, null, values);
        db.close(); // Closing database connection
    }

    // Getting single contact
    Contact getContact(int id) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
                KEY_NAME, KEY_PH_NO }, KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2));
        // return contact
        return contact;
    }

    // Getting All Contacts
    public List<Contact> getAllContacts() {
        List<Contact> contactList = new ArrayList<Contact>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Contact contact = new Contact();
                contact.setID(Integer.parseInt(cursor.getString(0)));
                contact.setName(cursor.getString(1));
                contact.setPhoneNumber(cursor.getString(2));

                String name = cursor.getString(1) +"\n"+ cursor.getString(2);
                AndroidSQLiteTutorialActivity.ArrayofName.add(name);
                // Adding contact to list
                contactList.add(contact);
            } while (cursor.moveToNext());
        }

        // return contact list
        return contactList;
    }

    // Updating single contact
    public int updateContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName());
        values.put(KEY_PH_NO, contact.getPhoneNumber());

        // updating row
        return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getID()) });
    }

    // Deleting single contact
    public void deleteContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getID()) });
        db.close();
    }

    // Getting contacts Count
    public int getContactsCount() {
        String countQuery = "SELECT  * FROM " + TABLE_CONTACTS;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();

        // return count
        return cursor.getCount();
    }

} 
```

带有网格视图的布局文件：main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <GridView android:layout_height="wrap_content" android:id="@+id/gridView1"
        android:layout_width="match_parent" android:numColumns="3"></GridView>
</LinearLayout> 
```

最后你的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.Sqlite_grid_view"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="4" />

    <application
        android:icon="@drawable/icon"
        android:label="sqlite test" >
        <activity
            android:label="@string/app_name"
            android:name=".AndroidSQLiteTutorialActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

好运！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:01:31.847

您应该使用[`CursorLoader`](http://developer.android.com/reference/android/content/CursorLoader.html)和[`SimpleCursorAdapter`](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)。这是做这类事情的最有效方式。

您可以在此处阅读有关加载程序的使用情况，并[在](http://developer.android.com/guide/topics/ui/layout/listview.html)[此处](http://developer.android.com/guide/components/loaders.html)查看一些简单的示例。

您可能遇到的唯一困难是默认`CursorLoader`只能从 查询游标`ContentProvider`，但您可以使用[此](https://stackoverflow.com/questions/7182485/usage-cursorloader-without-contentprovider)问题`SimpleCursorLoader`中提到的

# sql-server - Sql server 登录名在 .net 角色中无法正常工作

> ID：13139532
> 
> 赞同：3
> 
> 时间：2012-10-30T12:59:28.367
> 
> 标签：sql-server, sharepoint, iis

我创建了一个新的 sql 登录名，用于在 sharepoint 中配置基于表单的身份验证。我创建了名为**FBAUser**的登录名，但是如果我将该用户添加到 IIS 管理器的 .net 角色中，则显示登录失败。 ![在此处输入图像描述](../Images/b5665b955979ff8a7872a1c0e9ad808c.png) ![在此处输入图像描述](../Images/9bf9a44a80bad91b89864d0b7e009eb6.png)

为什么会出现这个问题。在 sql server 中创建新登录后，如果我尝试使用该凭据登录也不会发生。我将服务器的属性检查为**“Sql和Windows身份验证模式”**，如下所示。 ![在此处输入图像描述](../Images/3f3dbd243339ba4df19d6b38d14a2166.png)

任何人都可以为我提供这个解决方案！

# algorithm - 根据位置计算层次结构中元素的唯一整数标识符

> ID：13139536
> 
> 赞同：2
> 
> 时间：2012-10-30T12:59:41.027
> 
> 标签：algorithm

我们有这样的层次结构：

```
- 1 ( identifier = 100 )
  - 1 (101)
  - 2 (102)
  - 3 (103)
    - 1 (1031)
    - 2 (1032)
    - 3 (1033)
  - 4 (104)
    - 1 (1041)
    - 2 (1042)
    - 3 (1043)
  -901 (1001)
- 2 (200)
  - 1 (201)
  - 2 (202)
- 10 (1000)
  - 1 (1001) 
```

要求的特性：

*   每个节点的标识符应该是唯一的。
*   标识符应根据元素的级别相应增加
*   标识符应该是整数类型。
*   每个元素的计数器在每个新级别/父元素处重置

正如您在元素 1.901 和 10.1 的示例中看到的那样，当前的实现不起作用。我们尝试了下一个解决方案：

*   将每个级别乘以数字。
*   仅将第一级乘以一个数字并添加每个子级

如果标识符是字符串，它会变得更加容易，在这种情况下，我们可以使用下一种方式：“level1.level2.level3...”，所以对于 1 -> 1，它将是“1.1”，依此类推。但这是最不需要的步骤。

那么，您能否建议任何可用于此处生成所需标识符的算法？

**更新**修复了示例。PS我知道这是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:12:15.130

你太沉迷于十进制数字了。

1.  选择一个`X`代表节点内子节点最大数量的值，或者任何大于您认为方便使用的数字。
2.  放弃对十进制数字的坚持，并将所有标识符表示为以 base 表示的整数`X`。
3.  将标识符编码为基数中的整数，`X`其中第一个数字表示节点树的顶层，第二个数字表示第二级，依此类推。

所以，如果你很幸运并且合理的值`X`是 16，你可以使用整数的十六进制表示。如果 36 是一个不错的值，请使用任何字母数字字符作为数字。

**编辑**

正如 Rafael 所指出的，如果无法定义节点可以拥有的子节点数量的上限，那么这种方法就会失效。根据我的经验，这在实践中不太可能成为一个严重的问题。

如果 的值`X`很大，`863`那么我建议明显的实现是设置`X = 1000`和使用 3 个十进制数字组来表示 base 中的每个数字`1000`。这样，标识符`12.245.1`将表示为`12245001`.

现在我们进入了alestanis的回答已经涵盖的领域

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:44:25.367

首先，您的示例是错误的（100 映射到标识符 10000），但这并不意味着它有效。这就是为什么:

```
- 1 (100)
  -1 (101)
  ...
  -100 (200)
- 2 (200) 
```

您需要一个工作示例确实是**将每个级别乘以一个数字 N**或者说相同，**为每个级别保留 X 个数字**。在您的情况下，您选择了`N = 100`，因此使示例正常工作所需的额外约束是**每个级别不能超过`N-1`children**。

如果您强制执行此约束，则元素 1.100 将是非法的，从而消除了重复的标识符。

使用`N = 100`（或`X = 2`）可以产生：

```
- 1 (01)
  - 1 (0101)
    - 1 (010101)
    ...
    - 3 (010103)
  ...
  - 99 (0199)
  - 100 is ILLEGAL
- 2 (02)
- 42 (42)
  - 42 (4242) 
```

那么“问题”将是**明智地****选择`X`**，以便在不限制用户的情况下最大限度地减少所需数字的数量。例如，如果您知道您永远不会添加超过 450 个孩子，请选择`X=3`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:08:59.640

这个问题有一个简单但内存成本高的解决方案：

每个节点位置可以很容易地表示为整数 i(1), i(2), ..., i(n) 的唯一有限序列：

*   节点 1 = [1]
*   节点 1.1 = [1, 1]
*   节点 7.2.42 = [7, 2, 42]

因此，问题可以表示为如何将每个有限的整数序列映射到唯一的整数。这可以使用素数来完成

*   p(1) = 2
*   p(2) = 3
*   p(3) = 5
*   ...

只需乘以素数 p(n) 的 i(n):th 次方。结果整数的唯一性由素数分解的唯一性保证。参见维基百科： [http ://en.wikipedia.org/wiki/Integer_factorization](http://en.wikipedia.org/wiki/Integer_factorization)

例子：

*   节点 1：2^ **1** = 2
*   节点 1.1：2^ **1** * 3^ **1** = 6
*   节点 7.2.42 : 2^ **7** * 3^ **2** * 5^ **42** = (巨大的数字！)

* * *

## 另一种可能的解决方案

从节点的字符串表示开始（例如“7.2.42”）。使用八进制数进行节点编号。使用“8”（八进制的第一个未使用的数字）来分隔级别而不是“.”。将结果字符串用作十进制整数。

例子：

*   节点 1：1
*   节点 1.1：181
*   节点 1.2：182
*   节点 1.3：183
*   节点 7.7.7：78787
*   节点 8 : 10
*   节点 8.1：1081
*   节点 8.2：1082
*   节点 8.9：10811
*   节点 8.9.1：1081181
*   节点 8.9.2：1081182

# parameters - 批量覆盖 goto 的脚本参数

> ID：13139537
> 
> 赞同：2
> 
> 时间：2012-10-30T12:59:45.003
> 
> 标签：parameters, batch-file, goto

我一直在努力使用来自 for 循环中提出的其他问题之一的技术来获取文件的父目录。我已经让它大部分工作了，除了我认为因为我的脚本已经接受了 1 个参数，这是为多个文件位置运行所需的，我需要保留它。我的 getparentdir goto 需要某种方式来操作参数。我必须为同一个父目录中的多个目录文件执行此操作。任何帮助都会很棒。

当我运行它时，它似乎更喜欢脚本的参数，而不是发送到的内容，`GOTO`所以什么都没有完成。

```
setlocal ENABLEDELAYEDEXPANSION

for /D %%f in (F:\Falcon\Inbound\%1\*) do (

    for %%g in ("%%f\*.PDF") do (
      set ParentDir="%%g"
      echo !ParentDir!
      set ParentDir=%ParentDir: =:%
      set ParentDir=%ParentDir:\= %

      :getparentdir
      if "%~1" EQU "" goto :cont
      Set ParentDir=%~1
      shift
      goto :getparentdir
      call :getparentdir

      :cont 
      set ParentDir=%ParentDir::= %
      echo ParentDir is !ParentDir!

    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:38:02.373

我无法弄清楚你想要做什么。但是我看到您问题中的代码存在许多问题。

1）您在 DO() 块中设置 ParentDir，并正确使用延迟扩展来 ECHO 刚刚设置的值。但是稍后在同一代码块中，您错误地恢复为正常扩展以执行搜索和替换。您需要在整个代码块中使用延迟扩展。例如：
`set ParentDir=!ParentDir: =:!`。

2) 你有 CALL 跟随 GOTO。当然，CALL 永远无法执行，因为 GOTO 会绕过它。这可能也是如此。

3) 您尝试在 FOR 循环中转到 GOTO。这将立即中断循环，并且逻辑很可能不是您想要的 - 循环永远不会处理超过 1 个 PDF 文件。此外，您正在尝试 GOTO 带括号的 DO 代码块中的标签。通常，您不应将标签放在代码块中。有关 IF 语句代码块的类似问题的讨论，请参阅[（Windows 批处理）Goto inside if block 的行为非常奇怪](https://stackoverflow.com/q/8481558/1012053)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:33:27.933

刚刚意识到如果你只是给外部 for 循环一个值

```
 for /D %%f in (F:\Falcon\Inbound\%1\*) do (

      SET ParentDir = %%~nf

      for %%g in ("%%f\*.PDF") do (

         rem - Do Code here
      )
   ) 
```

在需要 for 循环时，这将同样有效。突然清晰。

# jquery - 如何使用 #top 之类的锚 id 锚定到页面的绝对顶部

> ID：13139538
> 
> 赞同：5
> 
> 时间：2012-10-30T12:59:48.390
> 
> 标签：jquery, css, html, anchor

我的页面顶部有一个固定位置的工具栏，并且有指向#top 和#bottom 的锚点。

问题是，我知道只是 href="#" 会将查看者带到页面最顶部的绝对开头，但是，由于有一个 jQuery 脚本，我需要它是“#top”。当我在body标签之后放置#top的div时，锚点只会将我带到页面内容的开头，而不是实际的顶部。这样做的问题是工具栏由于 z-index 而在它上面铺垫，所以看起来它实际上并没有把你带到顶部。

有什么方法可以让 href="#top" 与指向页面顶部的 href="#" 具有相同的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:23:10.890

实际上`#top`已经被浏览器用来滚动到顶部..（*就像`#`*）。

因此，如果您**没有**和元素，`id="top"`那么它将按您的意愿工作..

演示在[http://jsfiddle.net/gaby/AkAeD/1/](http://jsfiddle.net/gaby/AkAeD/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:02:22.840

```
$('a[href="#top"]').on('click', function(e) {
    e.preventDefault();
    $('body, html').scrollTop(0);
}); 
```

# css - CSS 在不知道宽度和高度的情况下垂直和水平对齐 div

> ID：13139539
> 
> 赞同：1
> 
> 时间：2012-10-30T13:00:00.230
> 
> 标签：css

如何在不知道其宽度和高度的情况下垂直和水平对齐 div？

例子：

```
<body style="padding:0px; margin:0px;"> 
    <div id="FancyOverlay" style="  position:fixed; width:100%; height:100%; background-color:green;">
        <div id="Grandparents" style="position:absolute; left:50%; z-index:1;">
            <div id="Parent" style="position: relative; left:-50%; padding:10px; border:1px solid black;">
                <img id="fancyImage" src="https://appharbor.com/assets/images/stackoverflow-logo.png"></img>
            </div>
        </div>
    </div>
</body> 
```

测试此代码，以便您可以看到我正在尝试做什么。#Parent 需要位于屏幕中央。我已经将它水平对齐，但我无法让它垂直工作。

顺便说一句：我不知道图像的宽度和高度，这只是一个例子。

# django - django-allauth: Accessing "socialaccount_set.all" from within a view

> ID：13139543
> 
> 赞同：2
> 
> 时间：2012-10-30T13:00:08.410
> 
> 标签：django, django-allauth

From this post: [How can I get the user's facebook id with django-allauth?](https://stackoverflow.com/questions/12222021/how-can-i-get-the-users-facebook-id-with-django-allauth) there is a simple way of accessing extra information from a user's social account within a template (e.g. looking at the entries in {{ user.socialaccount_set.all.0.extra_data }}).

I would like to grab this information in a view, rather than the template, ideally looping through all connected social accounts, and grabbing the more desirable information from each, and then passing only that information to the template.

Does anyone know how to access socialaccount_set.all from within a view?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-28T08:20:36.200

我知道这个问题发布已经一年多了，但我在任何地方都找不到答案。

这就是我最终的做法，以防将来对任何人有所帮助：

```
#views.py

user.socialaccount_set.all()[0].extra_data 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-05T22:01:33.550

这是在视图中访问为用户存储的任何信息的替代方法：

```
from allauth.socialaccount.models import SocialAccount

social_info = SocialAccount.objects.filter(user=request.user)
fb_id = SocialAccount.objects.filter(user=request.user, provider='facebook')[0].uid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-14T09:20:59.267

继续上面的回答，或许可以尝试使用：

```
SocialAccount.objects.filter(user=request.user)[0].extra_data['email'] 
```

它将获取电子邮件帐户的额外数据。希望这有帮助:)

# android - 打开选项菜单时出现 IllegalStateException

> ID：13139547
> 
> 赞同：1
> 
> 时间：2012-10-30T13:00:16.697
> 
> 标签：android, illegalstateexception, android-optionsmenu

在我的一个活动中，选项菜单出现了一个奇怪的行为：当用户从活动中导航离开（但没有完成）并再次返回然后调用选项菜单时，应用程序崩溃并显示`IllegalStateException`. 只有在离开活动之前已经显示菜单时才会抛出异常。似乎不是我的代码导致了这种情况。活动是一个`ListActivity`。首先，我认为我`Adpater`可能会导致这种情况，但异常来自创建选项菜单（面板）的内部。

更奇怪的是，这并不是在所有设备上都发生。目前我只能在装有 Android 4.0.3 的 HTC Sensation 上重现这一点。

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
    at android.view.ViewGroup.addViewInner(ViewGroup.java:3345)
    at android.view.ViewGroup.addView(ViewGroup.java:3216)
    at android.view.ViewGroup.addView(ViewGroup.java:3196)
    at com.android.internal.policy.impl.PhoneWindow.openPanel(PhoneWindow.java:614)
    at com.android.internal.policy.impl.PhoneWindow.onKeyUpPanel(PhoneWindow.java:884)
    at com.android.internal.policy.impl.PhoneWindow.onKeyUp(PhoneWindow.java:1557)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1884)
    at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3407)
    at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3380)
    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2523)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:154)
    at android.app.ActivityThread.main(ActivityThread.java:4945)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

创建选项菜单看起来很基本（和我的所有其他活动一样，这不会造成任何问题）：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.message_thread, menu);
    return true;
 }

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);

    MenuItem item = menu.findItem(R.id.menuItemToContacts);
    // enable/disable some items ...

    return true;
} 
```

对应的 menu.xml 如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menuItemSettings"
        android:icon="@drawable/ic_menu_einstellungen"
        android:title="@string/settings">
    </item>
    <!-- some more elements in the exact same style -->
</menu> 
```

我已经尝试了很多（尤其是在创建和准备菜单方面）。最大的问题是，我无法在任何地方捕捉到异常，因为它是从一些`View`.

**非常感谢提示和可能的工作轮次！！1！**

* * *

在我的`Adapter`我实际上做了一些视图的东西，但我认为我在添加视图时很小心。此外，该异常不包括对我的类的任何跟踪，因此我怀疑它是否真的是导致此问题的适配器。

```
private class ViewHolder {
    public LinearLayout stateList;
    // more view elements
}

private class ChildContainer {

    public void bind(ViewHolder holder) {
        // prepare listeners and save reference to holder
    }

   /**
     * Populates the view
     */
    private void fillStateLists() {
       // ...
       if (convertView == null) {
        try {
            this.holder.stateList.addView(view);
        } catch (IllegalStateException e) {
            if (view.getParent() instanceof ViewGroup) {
                ((ViewGroup) view.getParent()).removeView(view);
            }
            this.holder.stateList.addView(view);
        }
        }
    }
} 
```

My在s`ViewHolder`中被调用：`Adapter``bindView()`

```
final ViewHolder holder = (ViewHolder) view.getTag();
final long viewID = getItemId(cursor.getPosition());
final ChildContainer child = this.childContainers.get(viewID);
child.bind(holder); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:03:14.040

我认为创建选项菜单没有任何问题。它可以在适配器代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:46:53.247

由于某些（愚蠢的）原因`onSaveInstanceState`被调用`onStop`以保存列表视图的滚动位置。另外`onRestoreInstanceState`被叫进来`onStart`。

查看超级实现会发现视图层次结构状态得到保存和恢复。额外的调用可能会导致无效状态，特别是对于选项面板，当再次需要面板时，一切都崩溃了。

删除这些调用并确保保存我的状态仅在修复问题时发生`onSaveInstanceState`并分别恢复`onRestoreInstanceState`。

永远不要破坏 Activity 生命周期！;-)

# c# - 仅在 64 位可执行文件上出现“缺少参数值”异常

> ID：13139548
> 
> 赞同：2
> 
> 时间：2012-10-30T13:00:17.007
> 
> 标签：c#, visual-studio-2010, crystal-reports, 32bit-64bit

我有一个使用 Crystal Reports (13.0.2000.0) 用 C# (Visual Studio 2010) 编写的应用程序

当我为 x86 平台编译代码时，一切正常。为 64 位编译的相同代码在 Export() to PDF 上失败。

我通过以下方式分配参数：

ListReport.AddParameter("p_UserObjectID", objectId.ToString());

ListReport.ApplyParameters();

我正在使用的库：

```
CrystalDecisions.CrystalReports.Engine (13.0.2000.0)
CrystalDecisions.ReportSource (13.0.2000.0)
CrystalDecisions.Shared (13.0.2000.0) 
```

堆栈跟踪：

```
<CrystalDecisions.CrystalReports.Engine.ParameterFieldCurrentValueException>

  <Message>Missing parameter values.</Message>

  <StackTrace>
    <Frame>CrystalDecisions.ReportAppServer.ConvertDotNetToErom.ThrowDotNetException(Exception e)</Frame>

    <Frame>CrystalDecisions.ReportSource.EromReportSourceBase.ExportToStream(ExportRequestContext reqContext)</Frame>

    <Frame>CrystalDecisions.CrystalReports.Engine.FormatEngine.ExportToStream(ExportRequestContext reqContext)</Frame>

    <Frame>CrystalDecisions.CrystalReports.Engine.FormatEngine.Export(ExportRequestContext reqContext)</Frame>

    <Frame>CrystalDecisions.CrystalReports.Engine.ReportDocument.Export(ExportOptions options)</Frame>

    <Frame>Fsm.Business.BLReport.CRWFunctions.CRWExport(ReportDocument CRWRpt, CrwExportOptions crwExportOpt, String filename)</Frame>

  </StackTrace>

  <System.Runtime.InteropServices.COMException>

    <Message>Missing parameter values.</Message>

    <StackTrace>

      <Frame>CrystalDecisions.ReportAppServer.Controllers.ReportSourceClass.Export(ExportOptions pExportOptions, RequestContext pRequestContext)</Frame>

      <Frame>CrystalDecisions.ReportSource.EromReportSourceBase.ExportToStream(ExportRequestContext reqContext)</Frame>

    </StackTrace>

  </System.Runtime.InteropServices.COMException>

</CrystalDecisions.CrystalReports.Engine.ParameterFieldCurrentValueException> 
```

任何想法/线索/提示我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-13T20:54:09.750

该报告具有应为其提供值的参数。

代码在导出时失败，因为报告无法填充参数值。

从这里提取：[https ://archive.sap.com/discussions/thread/3228829](https://archive.sap.com/discussions/thread/3228829)

# c#-4.0 - Outlook 已开始传输此消息。在 Microsoft.Office.Interop.Outlook._MailItem.get_UserProperties()

> ID：13139549
> 
> 赞同：4
> 
> 时间：2012-10-30T13:00:26.380
> 
> 标签：c#-4.0, outlook

我正在解析 Outlook 文件夹并访问我已定义的用户属性，但有时会出现此错误 - Outlook 已开始传输此消息。在`Microsoft.Office.Interop.Outlook.MailItem.get_UserProperties()`. 真想请高手给点建议。

# c++ - Vera ++ TCL 规则：列出所有局部变量

> ID：13139556
> 
> 赞同：3
> 
> 时间：2012-10-30T13:00:44.463
> 
> 标签：c++, tcl, vera++

我正在尝试为 vera++ 静态分析器编写规则。由于我在这里没有找到 vera++ 的组，并且 vera++ 使用 TCL 来实现其分析规则，所以我发布到 TCL 论坛。我曾在 vera++inspirel.com/vera/ce/doc/tclapi.html 上工作过，但由于我不太了解 TCL，所以我希望得到进一步的建议。

由于我是 TCL 编程的初学者，但想知道 TCL 程序列出 C++ 源代码文件中所有局部变量的方法？我的意思是什么方法以及如何实现？

我面临的问题是在解析 C++ 源代码文件以检测局部变量声明时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:04:32.517

使用 vera++ 规则解析本地（或任何其他）变量定义非常复杂，但当然可行。基本的 C++ 解析和标记化由 vera++ 完成。

基本方法是将 vera++ 的`getTokens`函数与一个检查已完成 C++ 语句的小型状态机结合使用。您需要收集标记（并且可能是它们的值，因为稍后您需要变量名来设置列表）并将它们连接起来，直到您有完整的语句。如果您有完整的语句，您可以使用正则表达式来检查它是否是变量定义并从子匹配中提取变量名称。此外，您需要记住您是否在`{}`块内以了解它是否是局部变量定义。

您可以在 vera++ 的规则 T019 中找到一个构建简单状态机的示例，以将标记收集到语句中，该规则检查完整的花括号代码块，作为起点。

我已经使用 vera++ 解析了变量定义（以检查各种命名约定），但遗憾的是无法发布完整的代码，因为它是我雇主的专有工作。但我可以给你一个片段，显示我用来检查变量声明的正则表达式：

```
set isVar false
if [regexp {\s+((extern\s+)?(static\s+|mutable\s+|register\s+|volatile\s+)?(const\s+)?)?((identifier#[^#]+#\s+colon_colon\s+)*identifier#[^#]+#)\s+(star\s+|const\s+|and\s+|less.*greater\s+|greater\s+)*(identifier#[^#]+#\s+colon_colon\s+)*identifier#([^#]+)#(\s+leftbracket.*rightbracket)?(\s+assign)?.*semicolon$} $statement m s1 s2 s3 s4 s5 s6 s7 s8 s9 s10] {
    set locVarname $s9
    set isVar true
    set currentMatch $m
} elseif [regexp {\s+((extern\s+)?(static\s+|mutable\s+|register\s+|volatile\s+)?(const\s+)?)?(char\s+|int\s+|short\s+|long\s+|void\s+|bool\s+|double\s+|float\s+|unsigned\s+|and\s+|star\s+|unsigned\s+)+(identifier#[^#]+#\s+colon_colon)*\s+identifier#([^#]+)#(\s+leftbracket.*rightbracket)?(\s+assign)?.*semicolon$} $statement m s1 s2 s3 s4 s5 s6 s7 s8] {
    set locVarname $s7
    set isVar true
    set currentMatch $m
} 
```

`$statement`包含前面提到的完整语句。请注意，我将令牌值连接到`identifier`令牌使用`identifier#<value>#`并使用正则表达式组来提取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:30:56.613

不幸的是，我认为您严重低估了任务的复杂性。问题是你无法对 C++ 文件的内容进行任何*猜测*（无论有多么受过教育），除非你真的按照 C++ 标准中的定义对其进行了*解析*，而且[这样做非常困难](http://www.drdobbs.com/cpp/c-compilation-speed/228701711)。

现在应该很明显，使用什么编程语言来实现这种解析的问题实际上并不那么重要。您当然可以在 Tcl 中实现这一点，但是问题并不具体，因为以当前形式正确回答它实际上相当于发布现成的解析器代码。

# mysql - MYSQL：使用 order by 子句提高查询性能

> ID：13139559
> 
> 赞同：1
> 
> 时间：2012-10-30T13:00:47.583
> 
> 标签：mysql, mysql-workbench

我有两张表，其中包含用户的日常活动。我有两个加入这些表并从该表中选择前十名。

表 1：**构建日志**

```
+----------------+------------------------+------+-----+---------+----------------+
| Field          | Type                   | Null | Key | Default | Extra          |
+----------------+------------------------+------+-----+---------+----------------+
| NAME           | varchar(50)            | YES  |     | NULL    |                |
| ID             | int(11)                | NO   | PRI | NULL    | auto_increment |
| DATE_AND_TIME  | datetime               | YES  |     | NULL    |                |
| COMMENT        | mediumtext             | YES  |     | NULL    |                |
+----------------+------------------------+------+-----+---------+----------------+ 
```

**行数**：276186

表 2：**报告**

```
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| r_id          | int(10)      | NO   | PRI | NULL    | auto_increment |
| id            | int(15)      | YES  | UNI | NULL    |                |
| label         | varchar(200) | YES  |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+ 
```

**行数**：134058

如果我只使用这两个表的连接查询，使用`id`它会很快。

**查询 1**：

```
select  buildlog.id,reports.label from buildlog join reports on reports.id = buildlog.id limit 10\G 
```

**查询时间**：10 行集合（0.01 秒）

如果我添加 order by 以获取最新的 10 个构建 ID，则标记执行需要 1 到 2 分钟。

**查询 2**：

```
select  buildlog.id,reports.label from buildlog join reports on reports.id = buildlog.id order by buildlog.id desc limit 10\G 
```

查询时间：`10 rows in set (0.98 sec)`

按列排序是主键`buildlog.id`。那么，它已经被索引了，为什么执行这个查询需要更多时间？. 谁能建议我如何优化它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:44:10.477

```
SELECT  * FROM (
    SELECT
      buildlog.id,
      reports.label
    FROM
      buildlog
    JOIN
      reports
    ON
      reports.id = buildlog.id
) AS myval_new
ORDER BY id DESC limit 10 
```

速度变慢是因为它可能选择在进行连接之前进行排序。在外部查询中执行 order by 会强制它仅对所选项目进行排序。

# asp.net - 使用线程获取数据

> ID：13139566
> 
> 赞同：1
> 
> 时间：2012-10-30T13:01:08.100
> 
> 标签：asp.net, mysql, multithreading

在 和 的项目中`asp.net`，`mysql`我们需要来自 4 个不同数据库的数据。为此，我们使用主线程，并依次获取每个数据表并对其进行处理。现在我们需要对其进行优化，我们假设我们可以通过使用线程来获取数据表来节省时间。

我假设的主要问题是，我们如何让主线程等待所有线程完成？
任何想法？
谢谢。

# ruby-on-rails-3 - 导入 csv 文件后，在我的 sqlite db 表中创建了额外的行

> ID：13139567
> 
> 赞同：2
> 
> 时间：2012-10-30T13:01:11.593
> 
> 标签：ruby-on-rails-3, csv, import, sqlite, rake-task

我正在通过 rake 任务将 17 个 csv 文件导入我的应用程序。其他文件将正常导入并且不会创建额外的行，但由于某种原因，该文件在我的数据库中创建了大约 60 个空行。我尝试导入的信息运行良好，并且以应有的方式与其适当的表相关联。因此，如果您要使用该应用程序，一切都会正常运行，但会弄乱我的桌子。

例如，我将 2 行导入到表中，并且在创建这两行之后，紧随其后的是 58 个空白行。有没有人对我如何使用条件语句来防止这种情况发生有任何建议，请具体说明我在这方面还是比较新的。谢谢

这是我的代码：

```
require 'csv'

namespace :import_mat_lists_csv do

task :create_mat_lists => :environment do
    puts "Import Material List"

    csv_text = File.read('c:/rails/thumb/costrecovery/lib/csv_import/mat_lists.csv')
    csv = CSV.parse(csv_text, :headers => true)
    csv.each_with_index do |row,index|
        row = row.to_hash.with_indifferent_access
        MatList.create!(row.to_hash.symbolize_keys)
        matlist = MatList.last
        if @report_incident_hash.key?(matlist.report_nr)
            matlist.incident_id = "#{@report_incident_hash[matlist.report_nr]}"
        end

        #matlist.timesheet_id = @timesheet_id_array[index]
        matlist.save
    end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:39:47.963

有几种方法可以解决这个问题，但也许最简单的方法是添加：

```
unless row.join.blank? 
```

您的代码将显示为：

```
csv.each_with_index do |row,index|
  unless row.join.blank?
    row = row.to_hash.with_indifferent_access
    MatList.create!(row.to_hash.symbolize_keys)
    matlist = MatList.last

    if @report_incident_hash.key?(matlist.report_nr)
      matlist.incident_id = "#{@report_incident_hash[matlist.report_nr]}"
    end

    #matlist.timesheet_id = @timesheet_id_array[index]
    matlist.save
  end
end 
```

# java - 将反斜杠字符分配给 java String

> ID：13139570
> 
> 赞同：3
> 
> 时间：2012-10-30T13:01:20.817
> 
> 标签：java, android, gson

我正在尝试从一个对象创建一个 JSOn 字符串。我的对象有一个字段，它保存这种格式的日期时间 \/Date(1351598400000+0100)/ 我将其存储为字符串。

这是我如何将此值存储到对象

```
sess.setTS_StartTime("\\\\/Date("+String.valueOf(appDeleg.getSessionDate())+"000+0100)"+"\\/"); 
```

我期待这将返回上面提到的所需格式。但是，当使用 Google gson 库转换为 JSON 时，我得到了我存储的确切字符串。它不识别任何转义序列。

这就是我在转换后的 json 字符串中返回的响应

```
\\\\/Date(1351684800000+0100)\\/ 
```

我怎样才能正确地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:40:58.283

gson 会自动转义字符串的 json 相关字符。

无需手动转义。

# iphone - 如何知道数据是否准备好

> ID：13139571
> 
> 赞同：1
> 
> 时间：2012-10-30T13:01:30.800
> 
> 标签：iphone, delegates, restkit

我正在使用 RestKit 框架来解析来自 Web 服务的 JSON 数据。发送请求 URL 后，数据将自动下载，并可在 RestKit 的委托方法之一中使用。我将其编写为可重用的包装类，以便在需要时创建此类的实例，并仅传递要下载的 URL，其余过程将由该类完成。现在，我有一个问题，实例如何知道下载后数据可以使用？我怎样才能做到这一点？NSNotification 还是委托？任何编码示例或建议都可能有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:58:59.087

我发现在 RestKit 中处理回调最方便的方法是使用完成块。你可以绕过这个完成块来实现你想要做的事情。

这是一个如何创建完成块并将其传递的示例。

```
-(void)startRequest {

    RKRequestDidLoadResponseBlock block = ^(RKResponse *response) {

        //your completion code
    };

    [self sendRequestWithCompletionBlock:block];
}

-(void)sendRequestWithCompletionBlock:(RKRequestDidLoadResponseBlock)completionBlock {

    RKRequest *request = [RKRequest requestWithURL:[NSURL URLWithString:@"www.google.com"]];
    //configure request;
    request.onDidLoadResponse = completionBlock;

} 
```

# php - 保护 REST API 和 Slim 框架

> ID：13139576
> 
> 赞同：18
> 
> 时间：2012-10-30T13:01:38.427
> 
> 标签：php, api, rest, slim

我对 REST API 还很陌生，我意识到已经发布了很多问题。然而，仔细阅读这些实际上让我对如何处理这个问题更加困惑。

我使用[Slim Framework](http://www.slimframework.com/)创建了一个 REST API ，我只是用它来传输数据。我不会使用用户登录或身份验证，所以我相信为了保护这一点，我只需要一个使用公钥和私钥的系统，但我不确定。

如果有人对正确/最安全的方法或任何很棒的教程/资源有见解。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-30T19:33:57.863

您可以使用 SSL 加密传输中的数据。

但 SSL 只是加密；服务器端 ssl 不对客户端进行身份验证，也不进行授权。您可以将**授权**视为回答问题*是允许呼叫者做他要求的事情吗？*. **建立调用者身份的身份验证**或身份验证通常是进行授权的必要第一步。有时你不需要“整个身份”——你只需要确定一个特定的方面。例如，自动洗手间门不需要知道*谁*你是，但只有当你是男性或女性才能确定身份。同样，有些服务不在乎你是谁；如果您从特定网络（IP 白名单）呼叫或携带特殊令牌，他们将允许访问。

为了让服务器区分授权和未授权的呼叫，您有一些选择：

*   IP 白名单。如果您知道将调用您的服务的应用程序或代理的 IP 地址，您可以在您的服务实现中指定它。该服务可以检查传入请求的 IP 并拒绝那些不在白名单上的请求。这是一种基于调用者地址的“隐式”授权。

*   应用程序在每次调用中提供的秘密令牌。您说您不想进行身份验证，但这是一种身份验证形式。您可以将其称为“不记名令牌”。任何持有此令牌的人都会获得授权。在您的服务器中，您将检查令牌的值并拒绝任何与已知值不匹配的调用。这很像 IP 白名单，除了令牌是显式传递的，并且与网络地址没有任何关系。

*   令牌+密钥对。这就像一个用户名/密码，但它可以用来验证应用程序。使用它来提供应用程序本身的身份。如上所述检查服务端。

*   用户名/密码。对应用程序的用户进行身份验证。

您可能希望将这些组合起来以产生您想要的解决方案。换句话说，客户端请求需要来自正确的 I 地址，并且需要具有应用程序的令牌/密钥和用户的用户名/密码，才能被视为“授权”。

# java - Java `final` 类和模拟

> ID：13139581
> 
> 赞同：9
> 
> 时间：2012-10-30T13:01:50.737
> 
> 标签：java, unit-testing, maven, mocking, mockito

我正在开发一个编程游戏，玩家可以访问一个抽象类并将其扩展以控制机器人的行为。因为它是一个编程游戏，所以我试图保护我的游戏基础设施，这样玩家就不会弄乱游戏，而不仅仅是我给他们的课程；为此，我制作了大部分课程`final`，但现在我无法在单元测试中模拟它们（mockito + testNG）。

所以我想知道，我该如何解决这个问题？有没有办法让类非最终测试，然后`final`在构建周期的后期以某种方式自动“-ize”它们（我正在使用 maven，以防它与答案相关）。我不想添加另一个外部库或更改我的模拟库。
如果不可能，那么还有第二个问题：**让课堂`final`真的安全吗？**我看到了一些可以`final`从字节码中删除分类器的库，这让我认为`final`如果可以从已经编译的类中删除它，那可能就没用了

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T13:06:25.773

首先，你不能通过将事情声明为“最终”来阻止人们弄乱你的游戏。有一些反射技巧和整个代码生成库，只是稍微有点不方便克服这个问题。

所以，输掉决赛，然后你可以使用 jmock 或任何你喜欢的库来制作模拟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:21:17.363

您始终可以使用委托而不是继承。

```
public interface Foo {
    // ...
}

public final class FooImpl implements Foo {
    // ...
}

public class MockFooImpl implements Foo {
    private FooImpl delegate;
    // ...
} 
```

但是，在 API 中包含抽象类是个坏主意。界面会更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T16:30:34.270

您最终可以尝试应用自动重构工具，例如[Jackpot 3](https://bitbucket.org/jlahoda/jackpot30)或[RefactoringNG](http://kenai.com/projects/refactoringng/pages/Home)。我从未测试过它们，但如果采用重构的方式，它们完全有能力做你想做的事。

另一种方法是使用允许模拟决赛和静力学的 Powermock（即使很难，我也不喜欢模拟静力学，因为它表明你的设计有问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:07:17.523

IMO，类被标记为 final 以使其对象不可变。如果你想控制一个类的行为，你将类中的方法标记为私有的，这样它们就不能被覆盖。如果您让它们受到保护，那么有人可以扩展您的类，覆盖这些受保护的方法并将扩展类的实例传递给期望您的类对象作为参数的 API，从而引发修改的行为。因此，您可以将不想公开的方法标记为私有。

您只留下保护/公共方法方面的扩展点，这些方法可以被使用这些类的客户端覆盖以实现自定义行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T16:43:00.633

制作大多数类`final`是一种很好的做法，因为它们通常不是为通过子类化扩展而设计的。我所知道的所有关于 API 设计的书籍都推荐这样做（“Effective Java”、“Practical API Design”、“API Design for C++”）。这有几个原因是有益的，包括 API 设计者意图的表达、API 的安全演进和死代码的预防（例如，一个好的 IDE 将检测一个`final`方法何时不使用其参数之一，或者从不抛出子句中列出的检查异常`throws`——这对于非最终方法是不可能的）。

至于模拟上述类，您只需要使用适当的模拟工具，例如[JMockit](http://code.google.com/p/jmockit)（我开发它正是因为我想在不牺牲某些 OO/API 设计实践的情况下编写单元测试）。

# php - 我们如何在我们的网站中实施 SCORM

> ID：13139582
> 
> 赞同：3
> 
> 时间：2012-10-30T13:01:52.303
> 
> 标签：php, xml, joomla, scorm, scorm2004

我必须`SCORM`在我的一个项目中实施概念。但我不知道`SCORM`，所以我需要你们的帮助。

**概念：**

*   创建`SCORM`包含视频、音频、pdf 的文件。
*   我必须将此 SCORM 文件上传到您的网站。
*   上传时，我从该 SCORM 文件中获取了上述所有数据（视频、音频、PDF）并将其保存到数据库中。
*   然后我必须向用户显示所有数据（视频、音频、PDF）。

但我不知道`SCORM`。我也提到了谷歌，但我没有得到任何解决方案。所以请帮我实现这个功能。

你们有任何示例`SCORM`文件，请附在此处。因为我必须参考文件。

如果有任何有用的答案真的很感激。

# macos - 保存文件（沙箱）时出现权限错误

> ID：13139587
> 
> 赞同：5
> 
> 时间：2012-10-30T13:02:24.100
> 
> 标签：macos, cocoa, save, appstore-sandbox

我正在尝试将文件保存到沙盒应用程序 [OS X] 中的路径，但到目前为止，几乎每次尝试保存时都会出错。错误是..

```
Error saving: Error Domain=NSCocoaErrorDomain Code=513 "You don’t have permission to save the file “test.txt” in the folder “Testing”." UserInfo=0x1001f5e70 {NSFilePath=/Users/Seb/Desktop/Testing/test.txt, NSUnderlyingError=0x1001f5d70 "The operation couldn’t be completed. Operation not permitted"} 
```

我已将我的权利的“用户选择的文件”设置为“读/写访问”。

我的代码..

```
NSString *saveLoc = [NSString stringWithFormat:@"%@/%@.txt",[[NSURL URLWithString:[[NSUserDefaults standardUserDefaults] valueForKey:@"saveURL"]] path],self.theWindow.title];
NSURL *saveURL = [NSURL fileURLWithPath:saveLoc];

NSLog(@"Saving to: %@",saveLoc);

NSError *err = nil;
[self.textView.string writeToURL:saveURL atomically:YES encoding:NSUTF8StringEncoding error:&err];

if (err) {
    NSLog(@"Error saving: %@",err);
    [[NSAlert alertWithError:err] beginSheetModalForWindow:self.theWindow
                                                       modalDelegate:nil
                                                      didEndSelector:NULL
                                                         contextInfo:nil];
} 
```

我究竟做错了什么？如何保存文件？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T14:39:04.777

为了在沙箱之外读/写文件，您必须让用户访问该文件或上述目录之一。可以通过使用`NSOpenPanel`或`NSSavePanel`拖放来获得访问权限。

应用程序终止后，对这些文件/目录的访问将丢失。

为了获得对用户选择的文件/目录的永久访问权限，您必须使用[Security-Scoped Bookmarks](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW16)。

# c# - array List 根据文件扩展名排序

> ID：13139595
> 
> 赞同：3
> 
> 时间：2012-10-30T13:02:45.710
> 
> 标签：c#, arraylist

我在数组列表中有一些文件名就像数组列表中的**“Form.frm，Form1.frm，Form2.frm，Module.bas，Module23.bas”** 我想将第一项作为**“.bas”**文件如何我可以使用数组列表来制作它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:06:49.673

首先，我建议改用强类型`List<T>`。您可以使用`Path.GetExtension`和 Linq 的`Enumerable.OrderBy`：

```
List<String> files = new List<String>(){ "Form2.frm","Module.bas","Module23.bas" };
var ordered = files.OrderBy(fn => Path.GetExtension(fn)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:13:05.240

我了解您想通过扩展程序订购商品，可以通过以下方式完成：

```
 List<string> fileNames = new List<string>();
        fileNames.Add("Form.frm");
        fileNames.Add("Form1.frm");
        fileNames.Add("Form2.frm");
        fileNames.Add("Module.bas");
        fileNames.Add("Module23.bas");

        var ordered = fileNames.OrderBy(p => Path.GetExtension(p)); 
```

# ruby-on-rails - 使用 Carrierwave 和 Formtastic 上传 Rails 3 文件

> ID：13139597
> 
> 赞同：3
> 
> 时间：2012-10-30T13:02:46.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, formtastic

我有一个带有很多照片的产品。关系是这样的：

产品.rb

```
class Product < ActiveRecord::Base
  has_many :photos, :dependent => :destroy
  attr_accessible :translations_attributes, :active, :category_id, :photos
  accepts_nested_attributes_for :translations, :photos 
```

照片.rb

```
class Photo < ActiveRecord::Base
  attr_accessible :photo, :product_id
  belongs_to :attachable
  mount_uploader :photo, PhotoUploader 
```

表格如下所示：

```
form(:html => { :multipart => true }) do |f|
f.inputs "Details" do
  f.input :active
  f.input :category, :include_blank => false
end

f.inputs "Photos" do
    f.input :photos, :as => :file
end

f.buttons 
```

结尾

问题是在创建/更新带有附加文件的产品时出现此错误：

```
undefined method `each' for #<ActionDispatch::Http::UploadedFile:0x007f93c8549828> 
```

[我在这里](https://stackoverflow.com/questions/10955501/rails-3-polymorphic-association-with-carrierwave-and-simple-form)发现了一个同样错误的问题，但即使尝试他们的解决方案仍然有同样的问题。

我正在使用 Friendly_Id、ActiveAdmin、Globalize3，也许它可能与它们有一些关系，这是我使用 Rails 的第一个项目，现在我不知道可能是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:41:59.050

您的问题是您在`photos`模型中声明为 has_many 关联，并将其声明为视图中的单个文件输入。许多或一个，任你选择:)

您可能想要做的是在您的产品表单中将照片作为嵌套模型 - 如下所示：

```
semantic_form_for @product do |f|
  f.semantic_fields_for :photos do |ff|
    ff.input :photo, as: :file 
```

遍历产品中的每张照片，并为每张照片显示一个文件输入字段。

# standards - content.opf URL 中的路径是标准编码的吗？

> ID：13139600
> 
> 赞同：2
> 
> 时间：2012-10-30T13:02:51.207
> 
> 标签：standards, epub

在处理**EPUB**文件时，我遇到了在一些 epub 书籍中将**xhtml 文件的路径**写入**content.opf URL 编码**的问题。
例如，路径“abcá.xhtml”被写入 content.opf 中`href="abc%C3%A1.xhtml"`（%C3%A1 是字符 'á' 的 url 编码表示）。

我在任何地方都找不到有关此的任何信息。这在 EPUB 标准中吗？有问题的 EPUB 文件是使用 Adob​​e InDesign 生成的。

**更新：我用Calibre E-book viewer**测试了 epub，结果如下：

*   文件名中的特殊字符，content.opf 中的 URL 编码路径（abcá.xhtml 和`href="abc%C3%A1.xhtml"`）：Calibre 可以毫无问题地打开 epub。
*   文件名中的特殊字符，特殊字符直接用UTF-8（abcá.xhtml和）写入content.opf中的路径`href="abcá.xhtml"`：Calibre打开epub没有问题。
*   文件名包含一个恰好是 URL 可解码的字符串，并且相同的字符串被写入 content.opf（abc%C3%A1.xhtml 和`href="abc%C3%A1.xhtml"`）：*Calibre 无法打开 epub 并显示错误消息。*

所以我猜想 Calibre在尝试打开文件之前会对*content.opf 中的每个路径进行 URL 解码，这可能会导致像上一个这样的奇怪边缘情况。*
然而，这似乎是一个非常罕见的情况，所以我想我将通过 URL 解码以相同的方式处理路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:47:05.790

看起来这可能是 InDesign 做的一件坏事。[OPF 规范](http://idpf.org/epub/20/spec/OPF_2.0.1_draft.htm)中的两个相关段落：

来自第**1.3.4 节：与 Unicode 的关系**

> 阅读系统必须正确解析所有 UTF-8 和 UTF-16 字符（根据 XML 的要求）。阅读系统可能拒绝显示某些字符，但必须能够以某种方式发出信号表明存在不可显示的字符。阅读系统不能仅仅将 Unicode 字符显示为 8 位字符。

以及第**1.4 节的一致性**

> 1.4.1.1：封装一致性
> 
> 每个符合标准的 OPF 包文档必须满足以下必要条件：
> 
> *   它是格式良好的 XML 文档（在 XML 1.0 中定义）；和
> *   它以 UTF-8 或 UTF-16 编码；和
> *   ...

我的阅读是阅读系统需要能够解析`href="abcá.xhtml"`，所以这就是 InDesign 应该放在 .opf 文件中的内容。

# xml - 从左侧导航 Magento 中删除类别

> ID：13139601
> 
> 赞同：1
> 
> 时间：2012-10-30T13:02:56.743
> 
> 标签：xml, magento, navigation

我想从magento的左侧导航中删除一个类别，但是我希望它保留在主导航top.phtml中。到目前为止，我能想到的唯一方法是在 local.xml 中使用一些 XML 像这样：

```
 <reference name="catalog.leftnav">
        <action method="unsetChild"><alias>Item to remove</alias></action>
    </reference> 
```

但是我不知道要取消设置的项目的别名。类别名称为：

从美国在线商店购买

& 网址是：

从我们在线商店购买

如果有人能帮忙，那就太棒了，我刚刚完全失去了情节。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-01T09:32:47.357

这是一个非常古老的问题，但它可以帮助任何像我一样拥有相同东西的人。

要从侧边栏中删除类别列表，您可以修改 xml 文件，如下所示。

# 从分层导航中删除：

`local.xml`如果主题有这样的文件，请在文件中添加以下代码：

```
<catalog_category_layered>
     <reference name="catalog.leftnav">           
        <action method="unsetChild">
            <child>category_filter</child>
        </action>
    </reference>
</catalog_category_layered> 
```

`catalog.xml`如果文件`local.xml`不存在，请在文件中添加以下代码：

```
<block type="catalog/layer_view" name="catalog.leftnav" after="currency" template="catalog/layer/view.phtml">
    <action method="unsetChild">
        <child>category_filter</child>
    </action>       
</block> 
```

# 从类别默认页面中删除：

`local.xml`如果主题有这样的文件，请在文件中添加以下代码：

```
<reference name="catalog.leftnav" >       
    <action method="unsetChild">
         <child>category_filter</child>
    </action>
</reference> 
```

`catalog.xml`如果文件`local.xml`不存在，请在文件中添加以下代码：

```
 <block type="catalog/navigation" name="catalog.leftnav" after="currency" template="catalog/navigation/left.phtml">
   <action method="unsetChild">
         <child>category_filter</child>
    </action>
 </block> 
```

# 从目录搜索页面中删除：

`local.xml`如果主题有这样的文件，请在文件中添加以下代码：

```
<catalogsearch_result_index>
   <reference name="catalog.leftnav">           
        <action method="unsetChild">
            <child>category_filter</child>
        </action>
    </reference>
</catalogsearch_result_index> 
```

`catalogsearch.xml`如果文件`local.xml`不存在，请在文件中添加以下代码：

```
<block type="catalogsearch/layer" name="catalogsearch.leftnav" after="currency" template="catalog/layer/view.phtml">
      <action method="unsetChild">
            <child>category_filter</child>
        </action>
</block> 
```

**注意：**如果您已在管理员中启用缓存，请清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:58:25.747

在这种情况下，通过 XML 取消设置对您没有帮助，只会禁用整个块，即完整的左侧导航。

没有办法（开箱即用）禁用顶部导航而不是左侧导航上的单个类别。

您可以采取一些方法，尽管有些方法对于您所需要的我猜想有些过分，但一种简单的肮脏方法是：

您始终可以将 Mage_Catalog_Block_Navigation 复制到本地命名空间（app/code/local/Mage/Catalog/Block/Navigation.php）

然后您可以重命名它 (Navigationleft.php) 并根据需要进行更改。然后，您将更改 XML 语句以将此新块用于左侧导航

```
<reference name="left">
        <block type="catalog/navigationleft" 
               name="catalog.leftnav" 
               after="currency" 
               template="catalog/navigation/left.phtml"
         />
</reference> 
```

您总是可以向目录实体添加一个新属性并修改导航以在显示项目时使用此 (show_on_left_nav) 以及 is_active，尽管这可能有点矫枉过正:)

# c# - 如何将转发器与另一个 C# 类的属性绑定？

> ID：13139613
> 
> 赞同：1
> 
> 时间：2012-10-30T13:03:28.517
> 
> 标签：c#, asp.net, repeater, webusercontrol

我在 Web 用户控件中有一个中继器。我需要将它与另一个 C# 类（比如 abc.cs）的属性绑定。谁能告诉我如何将转发器与另一个 C# 类的属性绑定？

注意：我在 webusercontrol.cs 文件中没有属性。它们已被放置并设置在另一个 C# 类中。

例如

```
 <asp:Label ID="lblCloseDate" Text='<%#Eval("Property Reference") %>' runat="server" /> 
```

谢谢你。

# c# - DataGrid 列标题未与数据对齐

> ID：13139615
> 
> 赞同：5
> 
> 时间：2012-10-30T13:03:34.227
> 
> 标签：c#, .net, wpf, xaml, mvvm

我有一个 DataGrid，就 DataGrids 而言它非常简单。由于某种原因，标题与其余数据未对齐，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/88a4e60a7a48128358843efdeb1c9794.png)

我已经搜索了互联网，但似乎找不到解决方案。这是我的 DataGrid 代码：

```
Grid>
        <DataGrid Name="dgAttributes" 
                  ItemsSource="{Binding itemsSource}" 
                  AutoGenerateColumns="False" 
                  CanUserAddRows="False" 
                  CanUserDeleteRows="False" 
                  CanUserReorderColumns="False" 
                  CanUserResizeColumns="False" 
                  CanUserResizeRows="False"
                  CanUserSortColumns="False"
                  >
            <DataGrid.Columns>
                <DataGridTextColumn Width="Auto" IsReadOnly="True" Binding="{Binding Field}" Header="Fields"/>
                <DataGridComboBoxColumn  Width="95" IsReadOnly="False" Header="Order" ItemsSource="{Binding Source={StaticResource SortOrderProvider}}" SelectedItemBinding="{Binding SortBy, Mode=TwoWay}"/>
                <DataGridCheckBoxColumn Width="Auto" IsReadOnly="False" Binding="{Binding GroupBy}" Header="Group By"/>
                <DataGridComboBoxColumn Width="85" IsReadOnly="False" Header="Aggregate" ItemsSource="{Binding Source={StaticResource AggregateProvider}}" SelectedItemBinding="{Binding AggregateBy, Mode=TwoWay}"/>
                <DataGridTextColumn Width="Auto" IsReadOnly="False" Binding="{Binding Having}" Header="Having"/>
                <DataGridTextColumn Width="Auto" IsReadOnly="False" Binding="{Binding DisplayOrder}" Header="Display Order"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid> 
```

值得一提的是，当我单击其中一个组合框单元格时，标题会正确对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:49:45.240

你肯定有一些风格或隐藏数据网格**左上角** `Select All`按钮的东西。因此，列向左移动了一点。

使用此线程来获取该按钮`DataGrid.OnLoad`并检查其`Visibility`属性。

[全选按钮 WPF DataGrid](https://stackoverflow.com/questions/2817921/select-all-button-wpf-datagrid)

如果其折叠/隐藏，请将可见性设置为`Visbility.Visible`。或检查其`Width`为零并设置适当`Width`的 .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-23T05:54:16.383

最后我打败了这个问题[在这里找到解决方案](http://elashi.blogspot.com/2014/03/unaligned-column-header-with-data.html)。

抱歉，我没有注意到您没有覆盖 DataGrid 控件模板。恐怕，您必须定义一个控件模板才能纠正 DataGrid 行为。

PS：我有 .NET Framework 4.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T11:22:30.437

我发现只需将**HeadersVisiblity**设置为**“Column”**就可以了 - 请参阅下面的 XAML。
比掌握它更容易`SelectAll Button`...

```
<DataGrid x:Name="myGrid" HeadersVisibility="Column"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:09:07.833

您可以使用 DataGrid Like 的属性，还可以为 Row 定义特定的 css 类

```
HeaderStyle-HorizontalAlign=""
HeaderStyle-CssClass="" 
```

# xaml - 在 WinRT 中绑定到对象

> ID：13139617
> 
> 赞同：1
> 
> 时间：2012-10-30T13:03:41.237
> 
> 标签：xaml, data-binding, windows-8, windows-runtime

我正在寻找一种在 Windows 8 应用程序中实现以下目标的方法：

```
<TextBlock Text="{Binding ., Converter={StaticResource MyConverter}, ConverterParameter=x}" /> 
```

`TextBlock`是在 a的a 中`DataTemplate`，但由于某种原因，绑定到 。似乎在 WinRT 中不起作用（绑定错误显示：），而在 WPF/Silverlight/Windows Phone 上同样适用。`ItemTemplate``ListView``Error: BindingExpression path error: '.' property not found`

我正在尝试这样做，因为我想将整个绑定对象（不仅仅是单个属性）传递给转换器以输出依赖于对象多个值的字符串。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:55:50.867

尝试以下方法来绑定整个对象。

```
<TextBlock Text="{Binding Converter={StaticResource MyConverter}" /> 
```

如果您不指定路径（显式或隐式），它将绑定到整个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:36:13.310

既然你说你正在使用转换器，我认为这会更合适

```
<TextBlock Text="{Binding propertName, Converter={StaticResource ConverterKey}}" /> 
```

您还需要引用您编写的转换器

```
<converter:ConverterClass x:Key="ConverterKey" Component="YourConverter" /> 
```

# gps - 使用地图和很多坐标

> ID：13139619
> 
> 赞同：0
> 
> 时间：2012-10-30T13:03:46.090
> 
> 标签：gps, maps, coordinates, openstreetmap

我必须开发一个有地图的应用程序（谷歌或 OpenStreet 等）。

为了创建它，我有大约一百万个 GPS 坐标点，我必须通过它绘制一条轨迹（路径）。我正在使用**Gmap.Net**，但是当应用于大量点时，地图非常慢。

我恳求您对哪个组件更好用的建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:36:23.633

您需要尝试在地图上进行缓存。

还要看看计算百万分，可能还有其他影响您的加载时间的事情。

DB，错误的逻辑等

也试试看这个。

[http://greatmaps.codeplex.com/discussions/245963](http://greatmaps.codeplex.com/discussions/245963)

# c - 使用无符号字符循环

> ID：13139621
> 
> 赞同：7
> 
> 时间：2012-10-30T13:03:50.560
> 
> 标签：c, loops

`i`如果必须是一个，那么在不进入无限循环的情况下执行类似于此的操作的优雅方法是什么`unsigned char`？

```
for (unsigned char i = 0; i < 256; ++i) {
    printf("%d\n", i); 
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-30T13:06:08.193

```
unsigned char i = 0;
do {
    printf("%u\n",i);
}while(++i != 0); 
```

在循环测试中进行增量并针对包装值进行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:16:35.810

作为一般经验法则：如果您的迭代器变量需要保存 0 到“Uxxx_MAX”之间的所有值，那么您为算法选择了一个太窄的类型。

您应该考虑`uint16_t`改用。

在很多情况下，您*不能*使用大的 int 类型来代替 unsigned char。所以让我问你，你的应用程序是为 8 位 MCU 编写的实时嵌入式系统，你发现这个循环本身就是性能瓶颈吗？

*   如果是，则编写一个不知名的循环，`uint8_t`并将其作为迭代器的类型，并注释您这样做的原因。
*   如果否，则使用`uint16_t`或更大的整数类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:53:06.127

将支票放在正文之后和增量之前

```
for (unsigned char i = 0; ; ++i) {
    printf("%d\n", i); 
    if(i==255)
        break;
} 
```

但是你不妨做一会儿：

```
unsigned char i = 0;
while( ) {
    printf("%d\n", i); 
    if(i==255)
        break;
    ++i;
} 
```

甚至推动检查：

```
for (unsigned char i = 0; i++ < 255; ) {
    printf("%d\n", i); 
} 
```

所有这些在增量之前检查 255，而不是之后检查零，所以如果变量是 CHAR 或一些当前限制为 256 但可以更改的宏，这些仍然可以工作，因为它们不依赖溢出. `int`在那里替换它仍然有效。

# android - android.support.v4.app.FragmentPagerAdapter getItem(int position) 被调用两次？

> ID：13139622
> 
> 赞同：4
> 
> 时间：2012-10-30T13:03:50.800
> 
> 标签：android

我有一个包含片段的视图寻呼机。当片段寻呼适配器第一次被实例化时，必须实现的 getItem(int position) 方法被调用两次，这在片段中造成了麻烦，因为我正在根据位置获取数据。例如，一个 LOG 打印显示它首先是位置 0，然后是位置 1。

任何想法为什么会发生这种情况？

我在这里遵循示例：[http ://wptrafficanalyzer.in/blog/implementing-horizo​​ntal-view-swiping-using-viewpager-and-fragmentpageradapter-in-android/](http://wptrafficanalyzer.in/blog/implementing-horizontal-view-swiping-using-viewpager-and-fragmentpageradapter-in-android/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T13:17:00.400

调用将`getItem(int position)`片段加载（附加）到其在片段寻呼机中的位置。默认情况下，不仅加载可见片段，还加载下一个和上一个。因此，当您滚动到第二个“页面”时，您会看到它将加载第三个。当您转到第 3 个时，它将卸载第 1 个片段，并加载第 4 个片段。当您返回第二个片段时，它将再次加载第一个片段。等等。

# java - 尝试将 Datastore 数据保存在 csv 文件中

> ID：13139625
> 
> 赞同：0
> 
> 时间：2012-10-30T13:04:04.333
> 
> 标签：java, google-app-engine, servlets

在我使用 Google App Engine 的应用程序中，在 servlet 中我正在编写我的逻辑，我将数据以实体的形式保存在数据存储中。

*我正在尝试将数据保存在 csv 文件中......对此上下文的任何输入将不胜感激。*

```
 String name = request.getParameter("name");
    request.setAttribute("name", name);
    Key key=KeyFactory.createKey("name_param",name);
    String email = request.getParameter("email");
    request.setAttribute("email", email);
    String date = request.getParameter("date");
    request.setAttribute("date", date);

    Entity entity=new Entity("key", key);
    entity.setProperty("parameter",name);
    entity.setProperty("email",email);
    entity.setProperty("date", date);

    DatastoreService datastore= DatastoreServiceFactory.getDatastoreService();
    datastore.put(entity); 
```

对此有任何想法..如何将其保存在 csv 文件中..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:12:40.097

如果您尝试在应用引擎中保存文件，则必须使用 blobstore、谷歌云服务或谷歌驱动器。Blobstore 是应用引擎的一部分。从 blobstore 下载 csv 文件很容易。

# google-chrome - 是否可以自动更新在 chrome 网上商店发布的 chrome 扩展？

> ID：13139627
> 
> 赞同：12
> 
> 时间：2012-10-30T13:04:06.090
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

文档对此非常不清楚。我知道如果您自己托管扩展程序，您可以通过增加版本号来自动更新您的扩展程序。但是我不知道您是否可以在仍发布到 chrome 网上商店的同时自行托管。

我不敢相信谷歌会让你通过网络界面手动更新你的扩展。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T13:47:39.040

当您发布到 Chrome 网上应用店 (CWS) 时，CWS 会托管您的扩展程序，并且您会失去对[update_url](http://developer.chrome.com/extensions/autoupdate.html)属性的控制`manifest.json`（它被 CWS 特定链接覆盖）。当您决定使 CWS 托管扩展的新版本可用时，您只需将其（具有更高版本号）上传到 CWS（通过[开发人员仪表板](https://chrome.google.com/webstore/developer/dashboard)）。之后，您只需等待 Chrome 自动更新功能完成所有工作。

每个 Chrome 浏览器都在后台执行，无需用户直接许可，在 CWS（或其他地方，如果扩展程序是自托管的）中执行例行检查，以确保所有扩展程序都是最新的。如果任何扩展程序（或应用程序）的新版本可用，Chrome 会执行自动更新（如果[扩展程序的权限没有增加](http://developer.chrome.com/extensions/permission_warnings.html)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-05T10:28:02.233

现在有一种方法可以使用[Webstore API以编程方式（自 2014 年](https://developer.chrome.com/webstore/using_webstore_api#uploadexisitng)[3 月](http://blog.chromium.org/2014/03/new-monetization-and-publishing-options_11.html)起）更新托管在 CWS 中的扩展。

注册 API 并通过 OAuth 2.0 授权后，您可以[推送](https://developer.chrome.com/webstore/webstore_api/items/update)现有项目的更新：

```
curl \
-H "Authorization: Bearer $TOKEN"  \
-H "x-goog-api-version: 2" \
-X PUT \
-T $FILE_NAME \
-v \
https://www.googleapis.com/upload/chromewebstore/v1.1/items/$APP_ID 
```

文件不清楚这是否会产生草稿；无论如何，[也可以](https://developer.chrome.com/webstore/webstore_api/items/publish)通过 API 发布。

请注意，它仍将接受自动审核检查，因此实际更新只有在完成后（通常不到一个小时）才能获得。

# python - 如何更改 matplotlib 中轴对象刻度的字体大小

> ID：13139630
> 
> 赞同：29
> 
> 时间：2012-10-30T13:04:25.963
> 
> 标签：python, matplotlib, axis, subplot

我有一个图，我将子图添加到（插图）。我用过：

```
fig = plt.figure()
ax = fig.add_subplot(111)
subA = fig.add_axes([0.4,0.14,0.2,0.2]) 
```

我现在想更改子图的`xtick`字体大小。我尝试了一些天真的方法，例如

```
subA.get_xaxis().get_xticks().set_fontsize(10) 
```

没有任何运气。

那我该怎么做呢？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-09-03T00:14:51.973

利用：

```
subA.tick_params(labelsize=6) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-30T14:29:36.650

```
fig = plt.figure()
ax = fig.add_subplot(111)
plt.xticks([0.4,0.14,0.2,0.2], fontsize = 50) # work on current fig
plt.show() 
```

[x/yticks 与matplotlib.text](http://matplotlib.org/api/artist_api.html#matplotlib.text.Text)具有相同的属性

# c++ - 使用 libxml2 sax 解析器获取值错误

> ID：13139632
> 
> 赞同：1
> 
> 时间：2012-10-30T13:04:32.687
> 
> 标签：c++, sax, libxml2

我正在尝试使用 libxml2 的 sax 接口解析 xml 文件。有时效果很好，但后来我更改了 xml 中的 2 行顺序（它当然仍然有效），并且某些值在解析后变得无效。我将 startElementNsSAX2Func 用于 startElement，它有一个参数 const xmlChar ** 属性，用于存储当前元素的属性。

在我的 startElement 方法的开头，我创建了一个简单的对象来处理属性这是该类的代码：

```
class XMLElementAttributes {
public:
  static const int AttributeArrayWidth = 5;
  static const int LocalNameIndex = 0;
  static const int PrefixIndex = 1;
  static const int URIIndex = 2;
  static const int ValueIndex = 3;
  static const int EndIndex = 4;

  XMLElementAttributes( int nb_attributes, const xmlChar **attributes) :
  nb_attributes(nb_attributes),
  attributes(attributes){
  }

  xmlChar* getLocalName( int index ) const {
    return (xmlChar*)attributes[ AttributeArrayWidth * index + LocalNameIndex];
  }

  xmlChar* getValue( int index ) const{
      return (xmlChar*)std::string(attributes[ AttributeArrayWidth * index + ValueIndex],attributes[ AttributeArrayWidth * index + EndIndex]).c_str(); 
  }

  int getLength() const{
    return nb_attributes;
  }

private:
  int nb_attributes;
  const xmlChar ** attributes;
}; 
```

（xmlChar 是 Typedef 无符号字符 xmlChar）

然后如果我需要存储一个属性的值，我用这个 staic 方法克隆它（我也尝试使用 libxml2 的 xmlStrdup，结果是一样的）：

```
xmlChar* cloneXMLString(const xmlChar* const source) {
    xmlChar* result;
    int len=0;
    std::cout<<"source"<<std::endl;
    while (source[len] != '\0'){
        std::cout<<(void*)&source[len] << ": " << source[len] <<std::endl;
        len++;
    }
    std::cout<<std::endl;
    std::cout<<"result, "<<std::endl;
    result = new xmlChar[len+1];
    for (int i=0; i<len; i++){
        result[i] = source[i];
        std::cout<<(void *)&source[i] << ": "<< source[i] << std::endl;
    }
    std::cout<<std::endl;
    result[len] = '\0';
    return result;
} 
```

它的工作率为 99%，但有时最后的结果与源代码没有任何相似之处。这是一个示例输出（输入是 abcdef，并且 \0 终止）：

```
source
0x7fdb7402cde8: a
0x7fdb7402cde9: b
0x7fdb7402cdea: c
0x7fdb7402cdeb: d
0x7fdb7402cdec: e
0x7fdb7402cded: f

result, 
0x7fdb7402cde8: !
0x7fdb7402cde9: 
0x7fdb7402cdea: 
0x7fdb7402cdeb: 
0x7fdb7402cdec: x
0x7fdb7402cded: 
```

我这样称呼它：

```
xmlChar* value = cloneXMLString(attributes.getValue(index)); 
```

因此，虽然源地址没有改变，但它的值却改变了。xml文件的解析继续没有问题，克隆后的下一个值再次生效。

如果 xml 文件未更改，则错误始终位于相同的元素和参数处。如果我在 xml 中更改一些东西，例如：

```
<somenodes a="arg1" b="arg2">
  <node c="abc" d="def" />
  <node c="ghi" d="jkl" />
</somenodes> 
```

至

```
<somenodes a="arg1" b="arg2">
  <node c="ghi" d="jkl" />
  <node c="abc" d="def" />
</somenodes> 
```

错误出现在其他地方，或者它消失并且解析工作正常。什么可能导致这种情况？

编辑：

我的开始元素方法：

```
void MyParser::startElement( void * ctx,
        const xmlChar * localName,
        const xmlChar * prefix,
        const xmlChar * URI,
        int nb_namespaces,
        const xmlChar ** namespaces,
        int nb_attributes,
        int nb_defaulted,
        const xmlChar ** attrs ){

    XMLElementAttributes attributes ( nb_attributes, attrs );

    switch ( state ) {
    case Somestate:
       if ( xmlStrcmp( localName, StrN("SomeName").xmlCharForm() ) == 0) {
         someVar = new SomeObject(attributes);
       } 
    break;

    ...

    }
} 
```

StrN 从 char* 创建 xmlChar。someVar 是 MyParser 类中的静态字段（startElement 也是静态的）。在 SomeObject 的构造函数中，我尝试获取如下属性的值：

```
class SomeObject {
    public:
    SomeObject( XMLElementAttributes &attributes){
        for (int i=0; i< attributes.getLength(); i++) {
            xmlChar* name = attributes.getLocalName(i);
            if ( xmlStrcmp( name, StrN("somename").xmlCharForm()) == 0 ) {
                somename = cloneXMLString(attributes.getValue(i));
            }
            ...
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:16:18.313

很明显 source 没有指向有效的内存。这可能是因为内存已被释放，也可能是因为它指向在已退出的函数中声明的堆栈内存。

这样的内存可能会以不可预知的方式被覆盖，这就是您在这里看到的。

需要查看更多上下文，特别是您如何调用`cloneXMLString`以及传递给此函数的内存的来源，以获得更详细的答案。

# ruby - 如何找出给定年份每个月的第二个星期一的日期？

> ID：13139640
> 
> 赞同：0
> 
> 时间：2012-10-30T13:04:55.467
> 
> 标签：ruby

我的客户每个月的第二个星期一都有一个活动。

我需要在日历中用红色标记它们。

我如何“干净地”找出那个星期一的日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:32:35.640

这是我的版本。

如果每月的第八个是星期一，那么它是第二个星期一。如果不是周一，那么距离下周一还有多少天？

```
oct_2012 = Date.new 2012, 10, 8
oct_2012.wday   # => 1, We're done!

nov_2012 = Date.new 2012, 11, 8
nov_2012.wday   # => 4
nov_2012 + (8 - nov_2012.wday)  # => 2012-11-12 
```

这有帮助吗？

## 编辑

更简单的版本：只需添加并完成。即使月份从星期一开始，此算法也有效。

```
oct_2012 = Date.new 2012, 10, 1
oct_2012 + (8 - oct_2012.wday)  # => 2012-10-08

nov_2012 = Date.new 2012, 11, 1
nov_2012 + (8 - nov_2012.wday)  # => 2012-11-12 
```

一条规则就完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:38:29.217

你的第二个星期一总是在每个月的 8 号和 14 号之间。

# assembly - 我可以为不同的 ARM 处理器（Cortex、Tegra 等）使用相同的 ARM 程序集吗？

> ID：13139641
> 
> 赞同：4
> 
> 时间：2012-10-30T13:05:02.623
> 
> 标签：assembly, arm, cpu-architecture, instruction-set

我对所有类型的 ARM 是否通用 ARM 程序集感兴趣？例如，如果我在`ARM`汇编中编写一些函数，它会在 Cortex、Nvidia Tegra、Qualcomm 等上同样工作吗？我可以在不同的 ARM 处理器（如 x86-64 程序集）上使用相同的指令集或`SIMD`引擎吗？`NEON`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:32:24.357

您在一句话中列出了Cortex，Nvidia Tegra和Qualcomm，这是一种混合概念-Cortex是ARM开发的CPU内核系列的名称，而Tegra命名为使用ARM CPU的片上系统，例如Tegra 2/3芯片使用 Cortex-A9 内核。

对您来说重要的是每个目标芯片支持的指令集，这又取决于所使用的 ARM 内核。[现有 ARM 内核的概述](http://en.wikipedia.org/wiki/List_of_ARM_microprocessor_cores)可能是一个很好的起点。此外，来自 ARM 页面的[这张图表提供了一个很棒的快速概览。](https://web.archive.org/web/20120907231529/https://www.arm.com/images/roadmap/Processor_Overview_Architecture_Feb2012.jpg)

另一个需要检查的好文档是[ARM 架构参考手册 ARMv7-A 和 ARMv7-R 版本](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0406c/index.html)（您需要注册一个免费帐户才能访问它）。

截至 NEON，根据 ARM 网页，[Cortex-A7](http://www.arm.com/products/processors/cortex-a/cortex-a7.php)、[Cortex-A8](http://www.arm.com/products/processors/cortex-a/cortex-a8.php)和[Cortex-A15](http://www.arm.com/products/processors/cortex-a/cortex-a15.php)内核默认配备 NEON，而对于[Cortex-A5](http://www.arm.com/products/processors/cortex-a/cortex-a5.php)和[Cortex-A9](http://www.arm.com/products/processors/cortex-a/cortex-a9.php)，它是可选功能（即芯片制造商决定是否包含它） . 同样，在这种情况下，您必须查阅芯片的数据表以检查是否支持 NEON。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:18:51.267

只有一个 NEON 指令集（到目前为止）。任何支持它的 ARM 处理器都能够运行相同的代码。并非所有 ARM CPU 都支持 NEON。Android 提供了一个函数来测试它的存在，而 WindowsRT 需要它。基本 ARM 指令集有多个版本。您列出的所有最新版本的处理器都支持最新发布的版本 (ARMv7A)。此级别包含两个指令集：

1.  ARM 32 位指令
2.  Thumb2 16 位指令

如果允许使用其中一个/两个，则取决于操作系统。例如，WindowsRT 将只允许代码在 Thumb2 模式下执行。

换句话说，ARM 的世界没有英特尔那么分散。没有 NEON 版本 2、3、4、4.1 等。

正如评论中提到的，有一个 ARMv8 64 位指令集，但尚未在消费类硬件中提供。

# android - 在 Android 中发现活动变化时的幻灯片动画

> ID：13139643
> 
> 赞同：0
> 
> 时间：2012-10-30T13:05:05.393
> 
> 标签：android, animation

嗨，我在这样的活动变化时应用动画。

```
Intent i;
        i = new Intent(MainActivity.this, DemoActi.class);
        startActivity(i);
        overridePendingTransition(R.anim.push_left_in, R.anim.push_left_out); 
```

动画文件夹中的 xml 文件 push_left_in

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

<translate
    android:duration="1500"
    android:fromXDelta="-100%"
    android:interpolator="@android:anim/anticipate_overshoot_interpolator"
    android:toXDelta="0%" />

</set> 
```

动画文件夹中的 xml 文件 push_left_out

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

<translate
    android:duration="1500"
    android:fromXDelta="0%"
    android:interpolator="@android:anim/anticipate_overshoot_interpolator"
    android:toXDelta="100%" />

</set> 
```

问题是，我发现像 MainActivity 这样的动画从左到右移动，而 DemoActi 像火车集装箱一样加入它后面。但我需要像 DemoActi 这样的动画被 MainActivity 覆盖并在完成时发现它。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:29:38.980

只需将 demoview 放在详细视图上并在其上应用动画,,,,

```
 splash.clearAnimation();
    splash.startAnimation(bottomDownAnimation);
    splash.setVisibility(View.INVISIBLE); 
```

# android - 重新连接蓝牙设备时服务发现失败

> ID：13139644
> 
> 赞同：1
> 
> 时间：2012-10-30T13:05:12.563
> 
> 标签：android, bluetooth

我正在尝试将蓝牙设备与我的 android 应用程序连接。到目前为止它工作正常。

现在的问题是当我的设备超出范围时，我显示一个对话框并要求用户重新连接或不重新连接。

有时我可以重新连接设备，有时我会出错，即

```
Service Discovery Failed 
```

我真的不知道为什么会这样

```
private class ConnectThread extends Thread {

           public ConnectThread() {

           try {

            bluetoothSocket = bluetoothDevice.createRfcommSocketToServiceRecord(UUID);

        } catch (IOException e) {

              System.out.println("IO EXCEPTION" + e.getMessage() +"");

        }
      }

        public void run() {

           bluetoothAdapter.cancelDiscovery();

        try {
               // I AM GETTING ERROR HERE
               bluetoothSocket.connect();

        } catch (IOException connectException) {

        Log.d("Exception : ConnectThread -> Run" , connectException.getMessage()+"");

        try {

              bluetoothSocket.close();

         } catch (IOException e) {

        // TODO Auto-generated catch block

          e.printStackTrace();

       }

        return;

      }

     }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:46:48.090

根据经验，今天实际上遇到了同样的问题，

如果我推测，我会说您的其他设备在断开连接（链接丢失）时不会立即检测到它已断开连接（如果我记得的话，它可能需要长达 30 秒），或者它只是表现不佳。

因此，它不会在 SDP 上重新发布服务（不会再次打开套接字），因此当 Android 启动连接（作为客户端）时，您的服务器会失败 - 没有打开的套接字。

您应该发布其他设备日志。并尝试使用不同的其他设备 - 但相同的 Android 手机和代码！

再次，只是一个猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T17:44:36.270

我有同样的问题; 我的解决方案可能特定于我正在使用的设备，但我发现通过在与套接字的最后一次通信和 socket.close() 之间将线程休眠 1000 毫秒，它会成功重新启动。

# mysql - 删除两列中都不存在的记录

> ID：13139645
> 
> 赞同：1
> 
> 时间：2012-10-30T13:05:14.160
> 
> 标签：mysql

我需要从**ent**表中删除表**值中****ent_id**或**ent_id_val**列中都不存在的记录

 **耳鼻喉科

```
+--------+
| ent_id |
+--------+
|      1 |
|      2 |
|      3 |
+--------+ 
```

价值

```
+--------+------------+
| ent_id | ent_id_val |
+--------+------------+
|      1 |       NULL |
|   NULL |          2 |
+--------+------------+ 
```

ent_id 可以在值表中的 ent_id 和 ent_id_val 列中。在上面的示例中，我希望删除记录 ent_id = 3。下面是我的尝试，它确实删除了一些，但我想知道为什么它没有完全删除？**我在ent**表中仍有记录，但未在**值**表中使用。

```
DELETE e.* 
FROM ent e 
LEFT JOIN value v1 on e.ent_id = v1.ent_id 
LEFT JOIN value v2 on v2.ent_id_val = e.ent_id
WHERE v1.ent_id is null and v2.ent_id_val is null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:06:37.573

```
DELETE a  
FROM  ent a
      LEFT JOIN value b
         ON   a.ent_ID = b.ent_ID
      LEFT JOIN value c
         ON   a.ent_ID = c.ent_id_val
WHERE b.ent_ID IS NULL AND c.ent_id_val IS NULL; 
```

*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/3899e/1)

或者

 ~~~~```
DELETE a FROM ent a
        LEFT JOIN 
        (
            SELECT ent_ID FROM value
            UNION
            SELECT ent_id_val AS ent_ID FROM value
        ) b ON a.ent_ID = b.ent_ID
WHERE   b.ent_ID IS NULL 
```~~  ~~*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/dcb06/1)~~~~**

# hl7 - HL7传输引擎

> ID：13139649
> 
> 赞同：1
> 
> 时间：2012-10-30T13:05:21.663
> 
> 标签：hl7

我正在开发一个基于 Web 的 EMAR 应用程序，我们正在 DotNet 中构建它。我需要使用基于 Web 的 EMAR 对 Pharmacy Software 进行操作。如果我错了，请纠正我，我想我需要制作一个与 Pharmacy Software 和我的基于 Web 的 EMAR 通信的传输引擎。这是我的基本要求。现在让我解释一下我必须实现的目标。

在我的 EMAR 中有设施，那里有患者（居民）。现在，如果居民药房在其自己的软件中添加或编辑任何药物，那么它应该会自动出现在基于 Web 的 EMAR 的药物配置文件中。

从最近几天开始，我正在对此进行一些研究。我找到了提供此功能的“Mirth Corp”（[http://www.mirthcorp.com/products/mirth-connect](http://www.mirthcorp.com/products/mirth-connect)）和“IGUANA”（[http://www.interfaceware.com/iguana.html](http://www.interfaceware.com/iguana.html)）。但不确定他们如何帮助我。

谁能在这里帮助我如何满足这个要求？

谢谢

拉胡尔 K

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:17:52.697

我们正在使用[WSO2 ESB](http://wso2.com/products/enterprise-service-bus/)将 HL7 消息（用于患者数据的 ADT 消息）从一个系统传输到另一个系统。由于它是 ESB，因此您可以通过 WebService、FTP、本地文件等不同的传输方式以任何其他格式（XML、文本）转换 HL7（基于文件或通过 TCP-IP）。WSO2 是一个非常简单的 ESB，完全免费和开源。只需下载并创建一个代理（获取数据），对其进行转换（如果需要）并将其发送到您的应用程序。

-- 我与 WSO2 无关，所以这只是我的看法 ---

当然，您也可以使用其他 ESB，例如 Mirth。或者在这里您可以看到[一些开源 ES](http://architects.dzone.com/news/top-open-source-esbs) B 的列表。但是您需要检查它们是否包含 HL7 适配器​​。

如果您不想使用任何 ESB，可以使用带有[HAPI 库](http://hl7api.sourceforge.net/)的 HL7 的 Java 实现。然后你可以用它做任何你想做的事情。

# java - 如何在虚拟环境中使用 django-pipeline？

> ID：13139651
> 
> 赞同：1
> 
> 时间：2012-10-30T13:05:23.410
> 
> 标签：java, django, virtualenv, ubuntu-12.04, yui-compressor

我已经成功使用 django-pipeline 几个月了。现在我第一次在一个干净的系统上安装了 virtual-env。一切都已相应设置，所有 pip 安装均在我的环境中完成。

`python manage.py collectstatic`

现在，当我收集静态文件时出现错误，它说

```
File "/vc/cb-env/local/lib/python2.7/site-packages/pipeline/compressors/__init__.py", line 247, in execute_command
    raise CompressorError(error)
pipeline.compressors.CompressorError: [warning] /usr/bin/yui-compressor: No java runtime was found
[warning] /usr/bin/yui-compressor: No JAVA_CMD set for run_java, falling back to JAVA_CMD = java 
```

即使之前安装了 yui-compressor 和最新的 java：

```
sudo add-apt-repository ppa:webupd8team/java -y
sudo apt-get update
sudo apt-get install oracle-java7-installer -y
sudo apt-get install yui-compressor -y 
```

从外观上看，因为我以 root 身份安装了 java，所以我的环境似乎找不到它。我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T23:12:20.650

不是直接的解决方案，但经过一些研究并与 django-pipeline 的制造商交谈后，似乎 Yui-Compressor 无论如何都已被[弃用](http://www.yuiblog.com/blog/2012/10/16/state-of-yui-compressor/)并被 Yuglify 取代。

因此，最好保持 django settings.py 原样，并简单地安装 Yuglify。

```
sudo apt-get install npm
(switch your virtualenv's environment)
npm install yuglify 
```

settings.py 只需要更改一行：

```
PIPELINE_YUI_BINARY = '/vc/{your-project-env}/site/{your-project}/node_modules/yuglify/bin/yuglify' 
```

就是这样，它的工作原理。

**更新：**

在最新版本中，`django-pipeline`您不能再将 YUI 二进制文件设置为 Yuglify。您已经明确声明了 yuglify 二进制文件。但除此之外没有任何改变：

```
PIPELINE_YUGLIFY_BINARY = "/vc/{yourproject-env}/node_modules/yuglify/bin/yuglify" 
```

# c# - Visual Studio - 不处于调试模式时单步执行

> ID：13139654
> 
> 赞同：0
> 
> 时间：2012-10-30T13:05:42.437
> 
> 标签：c#, visual-studio

我正在查看大量其他人的代码（所有类库），这对我来说非常复杂。原因之一是以前的开发人员有很多很多嵌套的方法（如果存在这样的术语）。例如

```
string = DoThis(CheckThat(WasThisRight(DontForgetTo(AhYouNearlyDidntDo("")ToString().ToLower().Replace("this", "that").ExtensionMethodChaosBegins(); 
```

现在，我可以用鼠标选择方法并点击，`F``12`但它的效率低于只需按下`F``11`（出于几个原因）。

那么，是否可以在不处于调试模式但处于设计模式时单步执行代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:27:37.073

我想您可能会发现[Debugger Canvas](http://msdn.microsoft.com/en-us/devlabs/debuggercanvas.aspx)很有用。它以自己的小气泡显示函数，并从左到右直观地显示您正在使用的代码的调用堆栈

它甚至在 MSDN 中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:08:28.440

在调试模式下执行此操作可能更容易。请记住，还有`F10`用于跨过您不想踏入的线路，以及`Shift`+`F11`如果您踏入了您想摆脱的东西。

你已经知道`F12`去声明，但还要记住`Shift`+`F12`它将显示使用该成员的所有位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:14:28.110

在这种情况下，Resharper 的重构工具可能是天赐之物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:22:58.170

您可以通过使用`f12`“跳转到”被调用的方法来对代码进行空运行。要在点击“返回”时跳回调用方法，可以使用`ctrl+minus`. 这允许您在遍历源代码时手动模拟堆栈。

（请注意，ctrl+minus 实际上会在保存状态堆栈中跳转光标位置，因此，如果您在调用的方法中移动光标过多，最终会出现多个堆叠状态，您必须在实际执行之前循环遍历这些状态返回调用函数）

# jsf-2 - PrimeFaces f:setPropertyAction 与 dataTable 仅在选择一行后才有效

> ID：13139655
> 
> 赞同：1
> 
> 时间：2012-10-30T13:05:43.330
> 
> 标签：jsf-2, primefaces

这是我的问题：

*   支持豆是`@SessionScoped`
*   我有一个`p:dataTable`with *selectionMode*设置为 single 和*selection* `#{bean.selectedCar}`
*   表中的第一列是*更新*对话框的命令链接：detailDialog，*oncomplete*显示对话框并具有必须清除 bean 中的某些属性的*actionListener*
*   `f:setPropertyListener`有一个价值`#{item}`和目标`#{bean.selectedCar}`

我希望用户能够单击该链接，并且对话框将在该行上显示该对象的信息，但它仅在首先选择了 dataTable 中的一行时才有效。如果没有选择行并且用户单击 commandLink NULL 被传递给`bean.selectedCar`并且页面挂起。

作为一种解决方法，我希望至少能够预先选择 dataTable 中的第一行，并希望这可以解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:16:37.470

`f:setPropertyListener`您可以在命令链接中重新使用您的：

```
<p:commandLink value="show" 
               actionListener="#{bean.doSomething}" 
               oncomplete="dialog.show()">
    <f:setPropertyListener value="#{item}" target="#{bean.selectedCar}"/>
</p:commandLink> 
```

或者（因为我们正在遍历数据表）您可以将当前`#{item}`对象传递给您的`<p:commandLink.../>`：

```
<p:commandLink value="Show" 
               action="#{bean.selectThisCar(item)}" 
               oncomplete="dialog.show()"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:55:09.790

感谢@akoskm 的回答。第一个变体是我用于按钮的变体。我的问题是（作为第二个选项）此方法与 dataTable 中的选择选项冲突。`selection="#{bean.selectedCar}"`从`p:dateTable`参数中删除是我的问题的解决方案。谢谢您的帮助。

# amazon-ec2 - 在 Amazon EC2 上连接 rabbitmq 集群时出错

> ID：13139657
> 
> 赞同：4
> 
> 时间：2012-10-30T13:05:45.253
> 
> 标签：amazon-ec2, rabbitmq

我在连接亚马逊 EC2 上的两个 RabbitMQ 节点时遇到了一些困难。这两个节点是使用 puppet 控制的，这是我的 rabbit.config 文件：

```
[
  {mnesia, [{dump_log_write_threshold, 1000}]},
  {rabbit, [
        {tcp_listeners, [5672]},
            {kernel, [{inet_dist_listen_min, 55700},{inet_dist_listen_max, 55800}]} ,
        {cluster_nodes, ['rabbit@server1', 'rabbit@server2']}
        ]
    }
]. 
```

我相信集群连接的权限端口是开放的。我能够在 5672 和 4369 上从 server2 远程登录到 server1。

我在两台服务器上都有相同的 /var/lib/rabbitmq/.erlang.cookie。

当我 net_admin:ping 另一个节点时，从 erlang 命令行我得到了回击。

但是，当我在任何节点上运行 cluster_status 时，它们看起来并不像彼此了解。执行 stop_app, reset,rabbitmqctl cluster rabbit@server1 我总是收到以下错误：错误：{no_running_cluster_nodes...

有没有人解决过类似的问题，或者知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T05:34:53.067

就像 Ivan 建议的那样，您可以先检查服务器正在侦听的端口，然后将这些 TCP 规则添加到服务器的安全组中。这是很好的第一步。

```
netstat -plten | grep beam 
```

返回以下内容（如果服务器仍在运行而不是 stop_app）

```
tcp        0      0 0.0.0.0:37419               0.0.0.0:*                   LISTEN      498        118739     15519/beam          
tcp        0      0 0.0.0.0:15672               0.0.0.0:*                   LISTEN      498        119032     15519/beam          
tcp        0      0 0.0.0.0:55672               0.0.0.0:*                   LISTEN      498        119029     15519/beam          
tcp        0      0 :::5672                     :::*                        LISTEN      498        119018     15519/beam 
```

注意 amqp 和 web 服务器的公共端口`5672` `15672` `55672`，另一个端口是集群正在侦听的端口。检查您的其他实例并确保您的范围包括它们，然后重试它会起作用。

安全组 > 入站 > TCP 规则： `30000-65535`安全组允许`sg-XXXXXX`并重复往复安全组，不要忘记“应用规则”。

2.  接下来确保您共享 /var/lib/rabbitmq/.erlang.cookie （只需从一台服务器复制到所有其他服务器并重新启动实例）

3.  然后在你的命令行上：

    `[root@ip-172-31-27-150 ~]# rabbitmqctl stop_app Stopping node 'rabbit@ip-172-31-27-150' ... ...done.`

    `[root@ip-172-31-27-150 ~]# rabbitmqctl reset Resetting node 'rabbit@ip-172-31-27-150' ... ...done.`

    `[root@ip-172-31-27-150 ~]# rabbitmqctl join_cluster rabbit@ip-172-31-28-79 Clustering node 'rabbit@ip-172-31-27-150' with 'rabbit@ip-172-31-28-79' ... ...done.`

4.  最后，不要忘记重新启动您的实例`rabbitmqctl start_app`

这在 5 个 EC2 实例上对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T23:36:35.143

55700和55800之间的端口你打开了吗？

尝试检查以了解 RabbitMQ 侦听的其他端口：

> netstat -plten | grep 梁

我会仔细检查cookie...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:56:03.173

感谢您的回答，我所做的是删除此目录的内容，除了 .erlang.cookie （ rm -R /var/lib/rabbitmq/ ）。并且集群连接成功。干杯!

# spring - Spring REST JUnit 4

> ID：13139662
> 
> 赞同：1
> 
> 时间：2012-10-30T13:05:56.670
> 
> 标签：spring, rest, spring-mvc, junit

我有一个带有多个 spring bean 依赖项（自动装配服务）的 spring 控制器。每个服务也很少有 spring bean 依赖项（自动装配的 daos）。比如控制器登录方法：

```
@Controller
@RequestMapping("/")
public class ClientAccessController extends BaseController {

    @Autowired
    IFileService fileService;

    @Autowired
    MidTierService midTierService;

    /**
     * Used to handle client login requests
     * Works as a proxy to MID tier server
     *
     * @param request LoginRequest(userLogin, userPassword, compId, installGuid)
     * @return LoginResponse (token)
     * @throws Exception
     */
    @RequestMapping(method = RequestMethod.POST, value = "/login", headers = "Content-   type=application/json")
    public ResponseEntity<LoginResponse> login(@RequestBody LoginRequest request) throws Exception {

        log.info("LOGIN REQUEST [ " + request.toString() + " ]");

        String token = midTierService.authenticateNativeClient(request.getLogin(), request.getPassword(), request.getGuId(),
                request.getCompid().toString());
        LoginResponse response = new LoginResponse(token);

        HttpHeaders httpHeaders = new HttpHeaders();
        httpHeaders.setContentType(MediaType.APPLICATION_JSON);

        ResponseEntity<LoginResponse> responseEntity = new ResponseEntity<>(response, HttpStatus.OK);

        log.info("LOGIN RESPONSE [ " + response.toString());

        return responseEntity;
    } 
```

我正在尝试仅为 controller 编写 JUnit 测试`ClienAccessController`。但是当我在测试类中自动装配时`ClientAccessController`，spring 会尝试为所有控制器依赖项和所有嵌套依赖项（daos 等）创建 bean，但我真的不需要 em，只有`MidTierService`. 那么我应该怎么做才能排除嵌套的bean初始化并只使用我在测试类中需要的东西呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:09:21.650

Spring 允许成员的方式不止一种`@Autowired`。对我来说（从可测试性的角度来看）首选的方法是`@Autowired`构造函数。所以我会为此创建一个构造函数`ClientAccessController`，如下所示：

```
@Autowired
public ClientAccessController(final IFileService fileService, final MidTierService midTierService) {
    this.fileService = fileService;
    this.midTierService = midTierService;
} 
```

如果您的自动装配有点复杂（因为它使用`@Qualifier`或`@Value`），则可以使用参数注释来完成更多操作。

```
@Autowired
public ClientAccessController(@Qualifier("myFileService") final IFileService fileService,
       @Qualifier("myMidTierService") final MidTierService midTierService) {
    this.fileService = fileService;
    this.midTierService = midTierService;
} 
```

这样，您可以轻松地使用模拟对象或存根设置此类以进行测试。

```
@Test
public void testClientAccessController() {
    final IFileService mockFileService = Mockito.mock(IFileService.class);
    final MidTierService mockMidTierService = Mockito.mock(MidTierService.class);
    final ClientAccessController controller = new ClientAccessController(mockFileService, mockMidTierService);
    //test it
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:01:28.740

我没有创建一个将所有依赖项作为参数的构造函数，而是为每个依赖项创建了一个 set 方法。这样，我可以在测试中模拟这些依赖项，并使用 setter 注入它们。所以测试最终会是这样的：

```
@Test
public void testClientAccessController() {
    final IFileService mockFileService = Mockito.mock(IFileService.class);
    final MidTierService mockMidTierService = Mockito.mock(MidTierService.class);
    final ClientAccessController controller = new ClientAccessController();

    controller.setFileService(mockFileService);
    controller.setMidTierService(mockMidTierService);
    //test it
} 
```

我还建议您创建这些设置器，`protected`并将测试用例与您正在测试的类放在同一个包中。

# python - 用字符串更改列表名称

> ID：13139666
> 
> 赞同：-2
> 
> 时间：2012-10-30T13:06:08.817
> 
> 标签：python, global-variables

（另一个初学者问题）

我需要从几个 txt 文件中提取几个包含值的列表（每个文件中有两个列表）。我做了一个函数来提取我需要的值，但我不知道如何命名列表，以便它们包含原始文件的名称。例如：

文件名+' *'+测量文件名+'* '+日期

第一个问题是这些名称是字符串，我不知道如何将它们转换为列表的名称。

第二个问题是在函数中执行此操作，名称不是全局的，以后我无法访问列表。如果我在变量名前面写 global，我会得到一个错误。

```
def open_catch_down ():

    file = raw_input('Give the name of the file:')

    infile = open(file,'r')
    lines = infile.readlines()
    infile.close()

    global dates
    global values
    dates = []
    values = []

    import datetime

    for line in lines[1:]:
        words = line.split()
        year = int(words[0])
        month = int(words[1])
        day = int(words[2])
        hour = int(words[3])
        minute = int(words[4])
        second = int(words[5])
        date = datetime.datetime(year,month,day,hour,minute,second)
        dates.append(date)
        value = float(words[6])
        values.append(value)  

    vars()[file + '_' + 'values'] = values

open_catch_down ()

print vars()[file + '_' + 'values'] 
```

然后我得到错误：

```
print vars()[file + '_' + 'values'] 
```

类型错误：+ 不支持的操作数类型：'type' 和 'str'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:37:17.547

首先，您的使用`vars`是错误的，没有参数它只会返回`locals`不可写的字典。你可以`globals`改用。

现在对于您的例外...该`file`变量不在您的 print 语句的范围内：

```
def open_catch_down():
    file = raw_input(...) #this variable is local to the function
    [...]

print file                #here, file references the built-in file type 
```

由于`file`是用于文件处理的pythons内置类型的名称，`file`print语句中引用了这个类，这导致了错误。如果你命名变量`filename`而不是`file`（你应该这样做，因为隐藏内置名称总是一个坏主意），你会得到一个`UnboundLocalError`. 您的示例最简单的解决方案是让您的函数返回文件名并将其保存在外部范围中：

```
def open_catch_down():
    filename = raw_input(...) #your file name

    #... rest of the code

    return filename

filename = open_catch_down()
print filename 
```

# javascript - Sharepoint 2010 + swf + 交互

> ID：13139668
> 
> 赞同：-2
> 
> 时间：2012-10-30T13:06:14.173
> 
> 标签：javascript, sharepoint, flash

我对actionscript 3很陌生。

我在 Flash 动画的末尾创建了 5 个按钮，我将在共享点站点中添加这些按钮。我需要通过单击 5 个按钮打开一个共享点列表/表单（不在新页面中），共享点人员给了我指向这些表单的链接，但说我需要通过 javascript 代码将链接传递到该站点。我不知道该怎么做，因为我是设计师而不是程序员，我不知道该怎么做。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:19:24.367

我认为您需要的是：

```
/Lists/<LISTNAME>/NewForm.aspx?RootFolder=%2FLists%2F<LISTNAME>&IsDlg=1 
```

格雷茨赫克勒

# javascript - 使用动态 js 画布在保持比例的同时调整图像大小

> ID：13139671
> 
> 赞同：1
> 
> 时间：2012-10-30T13:06:28.153
> 
> 标签：javascript, image, html, html5-canvas, kineticjs

我在我的应用程序中使用它：

[http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)

使用锚来调整图像大小..

我想要的是调整图像大小并保持其比例。我不希望它伸展我能够使用这种和平的代码来实现这一点。:..

```
 if(width) {
        image.setSize(width);
      } 
```

但这搞砸了锚点..任何人都尝试过这样的事情..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T20:56:37.143

我知道这是一个非常古老的帖子，但我需要实现这个确切的东西，并且发现公认的答案有很大的缺陷 - 例如，左侧的两个拖动手柄移动整个图像并且其行为与图像编辑程序非常不同。我正在发布我的解决方案，以防有人像我一样从谷歌搜索中偶然发现这个问题。

```
// Update the positions of handles during drag.
// This needs to happen so the dimension calculation can use the
// handle positions to determine the new width/height.
switch (activeHandleName) {
    case "topLeft":
        topRight.setY(activeHandle.getY());
        bottomLeft.setX(activeHandle.getX());
        break;
    case "topRight":
        topLeft.setY(activeHandle.getY());
        bottomRight.setX(activeHandle.getX());
        break;
    case "bottomRight":
        bottomLeft.setY(activeHandle.getY());
        topRight.setX(activeHandle.getX());
        break;
    case "bottomLeft":
        bottomRight.setY(activeHandle.getY());
        topLeft.setX(activeHandle.getX());
        break;
}

// Calculate new dimensions. Height is simply the dy of the handles.
// Width is increased/decreased by a factor of how much the height changed.
newHeight = bottomLeft.getY() - topLeft.getY();
newWidth = image.getWidth() * newHeight / image.getHeight();

// Move the image to adjust for the new dimensions.
// The position calculation changes depending on where it is anchored.
// ie. When dragging on the right, it is anchored to the top left,
//     when dragging on the left, it is anchored to the top right.
if(activeHandleName === "topRight" || activeHandleName === "bottomRight") {
    image.setPosition(topLeft.getX(), topLeft.getY());
} else if(activeHandleName === "topLeft" || activeHandleName === "bottomLeft") {
    image.setPosition(topRight.getX() - newWidth, topRight.getY());
}

imageX = image.getX();
imageY = image.getY();

// Update handle positions to reflect new image dimensions
topLeft.setPosition(imageX, imageY);
topRight.setPosition(imageX + newWidth, imageY);
bottomRight.setPosition(imageX + newWidth, imageY + newHeight);
bottomLeft.setPosition(imageX, imageY + newHeight);

// Set the image's size to the newly calculated dimensions
if(newWidth && newHeight) {
     image.setSize(newWidth, newHeight);
} 
```

JSBin 中修改的 KineticJS 示例：http: [//jsbin.com/iyimuy/1/edit](http://jsbin.com/iyimuy/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:47:04.783

换行：

```
var width = topRight.attrs.x - topLeft.attrs.x;
var height = bottomLeft.attrs.y - topLeft.attrs.y;
if(width && height) {
    image.setSize(width, height);
} 
```

到：

```
var height = bottomLeft.attrs.y - topLeft.attrs.y;
var width = image.getWidth()*height/image.getHeight();

topRight.attrs.x = topLeft.attrs.x + width;
topRight.attrs.y = topLeft.attrs.y;
bottomRight.attrs.x = topLeft.attrs.x + width;
bottomRight.attrs.y = topLeft.attrs.y + height;

if(width && height) {
    image.setSize(width, height);
} 
```

[例子](http://jsbin.com/asejis/1/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-03T05:30:56.010

这是：[JSFIDDLE](http://jsfiddle.net/phpdeveloperrahul/58YPu/1/)

JS：

```
function update(group, activeHandle) {
        var topLeft = group.get(".topLeft")[0],
            topRight = group.get(".topRight")[0],
            bottomRight = group.get(".bottomRight")[0],
            bottomLeft = group.get(".bottomLeft")[0],
            image = group.get(".image")[0],
            activeHandleName = activeHandle.getName(),
            newWidth,
            newHeight,
            minWidth = 32,
            minHeight = 32,
            oldX,
            oldY,
            imageX,
            imageY;

        // Update the positions of handles during drag.
        // This needs to happen so the dimension calculation can use the
        // handle positions to determine the new width/height.
        switch (activeHandleName) {
            case "topLeft":
                oldY = topRight.getY();
                oldX = bottomLeft.getX();
                topRight.setY(activeHandle.getY());
                bottomLeft.setX(activeHandle.getX());
                break;
            case "topRight":
                oldY = topLeft.getY();
                oldX = bottomRight.getX();
                topLeft.setY(activeHandle.getY());
                bottomRight.setX(activeHandle.getX());
                break;
            case "bottomRight":
                oldY = bottomLeft.getY();
                oldX = topRight.getX();
                bottomLeft.setY(activeHandle.getY());
                topRight.setX(activeHandle.getX());
                break;
            case "bottomLeft":
                oldY = bottomRight.getY();
                oldX = topLeft.getX();
                bottomRight.setY(activeHandle.getY());
                topLeft.setX(activeHandle.getX());
                break;
        }

        // Calculate new dimensions. Height is simply the dy of the handles.
        // Width is increased/decreased by a factor of how much the height changed.
        newHeight = bottomLeft.getY() - topLeft.getY();
        newWidth = image.getWidth() * newHeight / image.getHeight();

        // It's too small: move the active handle back to the old position
        if( newWidth < minWidth || newHeight < minHeight ){
          activeHandle.setY(oldY);
          activeHandle.setX(oldX);
          switch (activeHandleName) {
            case "topLeft":
                topRight.setY(oldY);
                bottomLeft.setX(oldX);
                break;
            case "topRight":
                topLeft.setY(oldY);
                bottomRight.setX(oldX);
                break;
            case "bottomRight":
                bottomLeft.setY(oldY);
                topRight.setX(oldX);
                break;
            case "bottomLeft":
                bottomRight.setY(oldY);
                topLeft.setX(oldX);
                break;
          }
        }

        newHeight = bottomLeft.getY() - topLeft.getY();
        //comment the below line and uncomment the line below tha line to allow free resize of the images because the below line preserves the scale and aspect ratio
        newWidth = image.getWidth() * newHeight / image.getHeight();//for restricted resizing
        //newWidth = topRight.getX() - topLeft.getX();//for free resizing

        // Move the image to adjust for the new dimensions.
        // The position calculation changes depending on where it is anchored.
        // ie. When dragging on the right, it is anchored to the top left,
        //     when dragging on the left, it is anchored to the top right.
        if(activeHandleName === "topRight" || activeHandleName === "bottomRight") {
            image.setPosition(topLeft.getX(), topLeft.getY());
        } else if(activeHandleName === "topLeft" || activeHandleName === "bottomLeft") {
            image.setPosition(topRight.getX() - newWidth, topRight.getY());
        }

        imageX = image.getX();
        imageY = image.getY();

        // Update handle positions to reflect new image dimensions
        topLeft.setPosition(imageX, imageY);
        topRight.setPosition(imageX + newWidth, imageY);
        bottomRight.setPosition(imageX + newWidth, imageY + newHeight);
        bottomLeft.setPosition(imageX, imageY + newHeight);

        // Set the image's size to the newly calculated dimensions
        if(newWidth && newHeight) {
            image.setSize(newWidth, newHeight);
        }
      }
      function addAnchor(group, x, y, name) {
        var stage = group.getStage();
        var layer = group.getLayer();

        var anchor = new Kinetic.Circle({
          x: x,
          y: y,
          stroke: "#666",
          fill: "#ddd",
          strokeWidth: 2,
          radius: 8,
          name: name,
          draggable: true
        });

        anchor.on("dragmove", function() {
          update(group, this);
          layer.draw();
        });
        anchor.on("mousedown touchstart", function() {
          group.setDraggable(false);
          this.moveToTop();
        });
        anchor.on("dragend", function() {
          group.setDraggable(true);
          layer.draw();
        });
        // add hover styling
        anchor.on("mouseover", function() {
          var layer = this.getLayer();
          document.body.style.cursor = "pointer";
          this.setStrokeWidth(4);
          layer.draw();
        });
        anchor.on("mouseout", function() {
          var layer = this.getLayer();
          document.body.style.cursor = "default";
          this.setStrokeWidth(2);
          layer.draw();
        });

        group.add(anchor);
      }
      function loadImages(sources, callback) {
        var images = {};
        var loadedImages = 0;
        var numImages = 0;
        for(var src in sources) {
          numImages++;
        }
        for(var src in sources) {
          images[src] = new Image();
          images[src].onload = function() {
            if(++loadedImages >= numImages) {
              callback(images);
            }
          };
          images[src].src = sources[src];
        }
      }
      function initStage(images) {
        var stage = new Kinetic.Stage({
          container: "container",
          width: 578,
          height: 400
        });
        var darthVaderGroup = new Kinetic.Group({
          x: 270,
          y: 100,
          draggable: true
        });
        var yodaGroup = new Kinetic.Group({
          x: 100,
          y: 110,
          draggable: true
        });
        var layer = new Kinetic.Layer();

        /*
         * go ahead and add the groups
         * to the layer and the layer to the
         * stage so that the groups have knowledge
         * of its layer and stage
         */
        layer.add(darthVaderGroup);
        layer.add(yodaGroup);
        stage.add(layer);

        // darth vader
        var darthVaderImg = new Kinetic.Image({
          x: 0,
          y: 0,
          image: images.darthVader,
          width: 200,
          height: 138,
          name: "image"
        });

        darthVaderGroup.add(darthVaderImg);
        addAnchor(darthVaderGroup, 0, 0, "topLeft");
        addAnchor(darthVaderGroup, 200, 0, "topRight");
        addAnchor(darthVaderGroup, 200, 138, "bottomRight");
        addAnchor(darthVaderGroup, 0, 138, "bottomLeft");

        darthVaderGroup.on("dragstart", function() {
          this.moveToTop();
        });
        // yoda
        var yodaImg = new Kinetic.Image({
          x: 0,
          y: 0,
          image: images.yoda,
          width: 93,
          height: 104,
          name: "image"
        });

        yodaGroup.add(yodaImg);
        addAnchor(yodaGroup, 0, 0, "topLeft");
        addAnchor(yodaGroup, 93, 0, "topRight");
        addAnchor(yodaGroup, 93, 104, "bottomRight");
        addAnchor(yodaGroup, 0, 104, "bottomLeft");

        yodaGroup.on("dragstart", function() {
          this.moveToTop();
        });

        stage.draw();
      }

      var sources = {
        darthVader: 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg',
        yoda: 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg'
      };
      loadImages(sources, initStage); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T10:59:59.623

我知道这不是问题，但是当锚超出图像 0 大小时，我已经浪费了很多时间来尝试解决问题，这会引发 javasacript 错误：

```
IndexSizeError: Index or size is negative or greater than the allowed amount 
```

我所做的是将 Math.abs 添加到图像大小计算公式中：

```
newHeight = Math.abs(bottomLeft.getY() - topLeft.getY()); 
newWidth = Math.abs(image.getWidth() * newHeight / image.getHeight()); 
```

它适用于两个底部锚点，但不适用于顶部锚点，我刚刚移除了顶部锚点，这对我的项目来说是足够好的解决方案......

希望这对某人有帮助！

# javascript - 嵌套 ajax 调用时抛出“Security Err: Dom Exception”

> ID：13139673
> 
> 赞同：1
> 
> 时间：2012-10-30T13:06:41.560
> 
> 标签：javascript, jquery, ajax, cross-domain

这就是问题所在。我正在通过 javascript/jquery 中的 ajax 调用提取 gmail 联系人，如下所示：

```
function getUserInfo() {
  var xml_parse = "";
  $.ajax({
    url: SCOPE + '?max-results=9999&access_token=' + acToken
    data: null,
    success: function (resp) {
      xml_parse = $.parseXML(resp);
      callGmailHelperWebService(xml_parse);
    },
    dataType: "jsonp"
   });
 }

 function callGmailHelperWebService(xml_parse) {
   GmailHelperService.ConvertXMLToList(xml_parse, onSuccess, onFailed, null);
 } 
```

因此，如您所见，如果初始 ajax 调用成功，我将调用一个函数，该函数调用位于保存服务器上的 Web 服务作为我的项目（实际上，它是项目的一部分）。

我的 Web 服务 (GmailHelperService) 连接正确，因为我绝对可以在其他地方调用它（例如，在这个 ajax 调用之后）。但是，当我尝试在 ajax 调用的“成功”部分调用它时，出现以下错误：

> 未捕获的错误：SECURITY_ERR：DOM 异常 18

我的理论是这与跨域问题有关，但我不明白为什么。我当然不知道如何解决这个问题。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:18:53.957

JSONP 是一种数据传输方法，涉及以这种格式发送数据：

```
callback({"foo":"bar"}); 
```

如您所见，这不是 xml。它是 JSON 封装在一个回调方法中，当请求完成加载时将被执行，从而允许它是跨域的，因为它可以使用`<script>`标签来请求。

您不能简单地将 dataType 更改为 JSONP 并返回 xml，期望它能够正常工作。XML != JSONP。例如，您可以在 jsonp 中返回 XML，`callback({"xml","... xml string here "})`但请注意引号，所有 json 键和值必须用双引号括起来，内引号需要适当处理。

如果您的请求是相同的域请求（相同的协议、相同的子域、相同的域和相同的端口），那么您可以在返回 XML 时将 dataType 更改为“XML”。否则，您需要设置一个代理脚本来为您获取 xml，或者让您的网络服务返回 JSONP。

例如，以下 url 都被认为是跨域的。

```
http://example.com
http://www.example.com
https://example.com
https://www.example.com
http://example.com:8080 
```

上述所有 url 都将被视为跨域，即使它们位于同一服务器上。

# amazon-ec2 - aws - 一个小型 ec2 可以服务多少用户

> ID：13139679
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:06:51.797
> 
> 标签：amazon-ec2, amazon-web-services, cloud

如果您采用平均动态网站，那么一个小型 ec2 实例可以同时服务的峰值用户数是多少。请不要发送“这取决于...”的答案，我需要一些最粗略的估计。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:42:37.667

这得看情况！:) 我相信您可以使用像 nginx 这样的高性能网络服务器来提供大量静态图像。但是，如果您拥有完整的 Java 企业堆栈，您将只能为少数用户提供服务。

这其中有很多因素，你至少不能给出最粗略的估计。需要考虑的一些要点是您的应用程序、它所做的处理、它需要多少资源、您的服务器基础设施......太多的变量无法给出正确的答案。

因此我建议如下：开发一套可比较的测试工具。尝试尽可能接近地模拟用户的负载模式（例如，可以重放 Apache 访问日志）。衡量您将能够处理多少请求。调整你的配置，再次测量。更换服务器，再次测量。这是获得任何结果的唯一方法。

工具包括[Siege](http://www.joedog.org/siege-home/)、[multi-mechanize](http://code.google.com/p/multi-mechanize/)、[ab](http://httpd.apache.org/docs/2.2/programs/ab.html)等等。

# javascript - 如何获取拖动元素的 ID 并在放置时绑定？

> ID：13139681
> 
> 赞同：0
> 
> 时间：2012-10-30T13:06:54.403
> 
> 标签：javascript, jquery

大家好，我怎样才能获得拖动元素的 ID 并绑定我要放置元素的 id 这里是我为拖放所做的事情

```
 var i = 1;
       var z = 1;
       $(document).ready(function () {
           $("button[id='columnadd']").click(function () {
               // create the element
               var domElement = $('<div id="shoppingCart' + i++ + '" class="shoppingCart"><h2 class="ui-widget-header">Add Menu Items Here <img src="../Images/delete.png" id="shoppingCart' + z++ + '" style="float: right; cursor:pointer;" onclick="removecolumn(this.id)"/></h2><aside class="ui-widget-content" id="droppable"><ol><li class="placeholder">Add your items here</li></ol></aside></div>');
               var holder = "#columnholder";
               $("#columnholder").append(domElement);
               //$(this).after(domElement);

               // at this point you have domElement in your page

               // make it droppable
               domElement.find("ol").droppable({
                   activeClass: "ui-state-default",
                   accept: '.small_box li',
                   greedy: true,
                   drop: function (event, ui) {                          
                       makeItDroppableToo(event, ui, this);                                             
                   }
               });
           });

           function makeItDroppableToo(e, ui, obj) {                  
               $(obj).find(".placeholder").remove();
               var id = this.id;
               alert(id);
               var placeholder = $("<ol><li>Add Sub Menu here</li></ol>");
               $("<li></li>").append('<a  draggable="true" droppable=true>' + ui.draggable.text() + '</a>').append(placeholder).appendTo($(obj));

               // this is the same as the previous one
               placeholder.droppable({
                   greedy: true,
                   // put options here
                   drop: function (event, ui) {
                       makeItDroppableToo(event, ui, this);
                   }
               });
           }

           $(".small_box li" ).draggable({
               appendTo: "body",
               helper: "clone"
           });
       }); 
```

这是我拖动的 html

```
 <div class="top-header"><span class="heading">Menu Builder</span><button id="preview" onclick="savemenu()" >Save</button><button id="columnadd" >Add Column</button></div>
<div id="columnholder" class="column-holder"></div>
<div class="clear"></div>
<div class="menu-items">    
<aside class="small_box">
     <div class="menu-item-header"><h4>BRANDS</h4></div>
      <ul>
             <li id ="1"><a id ="1001" class="" href="#">Brand1</a></li>
            <li id ="2"><a id ="1002" href="#">Brand2</a></li>
            <li id ="3"><a id ="1003" href="#">Brand3</a></li>
            <li id ="4"><a id ="1004" href="#">Brand4</a></li>
            <li id ="5"><a id ="1005" class="" href="#">Brand5</a></li>
            <li id ="6"><a id ="1006" href="#">Brand6</a></li>
            <li id ="7"><a id ="1007" href="#">Brand7</a></li>
            <li id ="8"><a id ="1008" href="#">Brand8</a></li>
     </ul>
    </aside> 
```

在这里我将拖动元素，当我这样做时，我想获取 id，当我在这里绑定拖动的元素时

```
 $("<li></li>").append('<a  draggable="true" droppable=true>' + ui.draggable.text() + '</a>').append(placeholder).appendTo($(obj)); 
```

我想将该ID绑定到，谁能告诉我我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:10:59.720

在放置处理程序中，您可以使用`ui.draggable.attr('id')`来获取被拖动元素的 id。

IE

```
...
drop: function(ev, ui) {

   /*
   // get id of dragged element   
   var draggedID = ui.draggable.attr('id');

   // bind it
   #('#'+draggedID).bind(...); // bind your events here
   */

   // why get the id, when you can bind it directly
   // will work with elements without an id too (credit to Rory McCrossan)
   ui.draggable.bind(...);
},
... 
```

# android - 未向 AndroidManifest.xml 注册的广播接收器

> ID：13139682
> 
> 赞同：1
> 
> 时间：2012-10-30T13:06:56.867
> 
> 标签：android, broadcastreceiver

我在注册广播接收器时遇到问题。

当我使用 registerReceiver 注册它时它可以工作：

```
registerReceiver(new NotifReceiver(), new IntentFilter(NotifReceiver.POST_NOTIF)); 
```

但不适用于 AndroidManifest.xml ：

```
 <receiver
        android:name=".receiver.NotifReceiver"
        android:enabled="true"
        android:exported="false" >
        <intent-filter>
            <action android:name=".receiver.NotifReceiver.POST_NOTIF" />
        </intent-filter>
    </receiver> 
```

NotifReceiver.java：

```
public class NotifReceiver extends BroadcastReceiver {

    public static final String POST_NOTIF = "POST_NOTIF";

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(POST_NOTIF)) {
            Log.d("debug", "action received");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:17:40.357

根据[Google Guidelines 关于 action 标签](http://developer.android.com/guide/topics/manifest/action-element.html)。

> 最好使用包名作为前缀，以确保唯一性。

然后您应该将您的操作声明为：

```
public static final String POST_NOTIF = "com.my.package.POST_NOTIF"; 
```

并在您的清单中引用为：

```
<intent-filter>
     <action android:name="com.my.package.POST_NOTIF" />
</intent-filter> 
```

注意，`android:name`只需要匹配`POST_NOTIF`静态字符串的值。

但是为了避免与其他应用程序发生冲突，您应该为您用作操作的字符串设置一个唯一值。这就是为什么谷歌建议在你的包裹前加上前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:18:08.610

尝试在 Manifest.xml 中更改以下两行：

```
1\. android:name=".receiver.NotifReceiver"
2\. <action android:name=".receiver.NotifReceiver.POST_NOTIF"/> 
```

到

```
1\. android:name="*full.pkg.name*.receiver.NotifReceiver"
2\. <action android:name="*full.pkg.name*.receiver.NotifReceiver.POST_NOTIF"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:17:47.020

`<action android:name=".receiver.NotifReceiver.POST_NOTIF" />`
用这个 代替 `<action android:name="POST_NOTIF" />`

# javascript - 将动画引导到正确的位置

> ID：13139683
> 
> 赞同：0
> 
> 时间：2012-10-30T13:07:00.453
> 
> 标签：javascript, jquery

在我的文字游戏中，有一个带有 3 个字母单词的网格。

游戏的目的是通过单击侧面的相应字母来拼写单词。

当网格中的某个区域被突出显示时，它会向用户指示要拼写的单词。用户单击网格一侧的字母，它们应该移动到突出显示的区域。

我最近在以下代码中将“下拉框”更改为 div，现在动画将字母带到网格的顶角，然后再将其带到正确的位置。

```
 var row = '<tr>';
    var spaceAvailInRow = numLetters;
    while (spaceAvailInRow) {
        var word = getWordToFitIn(spaceAvailInRow, unusedShuffledWords);
        guesses[word] = [];
        spaceAvailInRow -= word.length;

        for (var k = 0; k < word.length; ++k) {
            row += '<td data-letter="' + word[k] + '" data-word="' + word + '"><div class="drop-box"></div></td>';
        }
    }
    row += '</tr>';

    tbl.append(row);
}

$(".container").append(tbl); 
```

有人能告诉我为什么动画已经坏了，现在我改变了这个吗？

小提琴：http: [//jsfiddle.net/7Y7A5/27/](http://jsfiddle.net/7Y7A5/27/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:30:29.633

问题是`position()`获取元素相对于其（偏移）父元素的位置 - 在您的情况下，每个`drop-box`div 相对于其包含定位在 0,0 处`td`。您需要的是包含`td`'s `position()`，而不是`drop-box`'s 。

我已经改变了一些东西，可以在这里看到小提琴：http: [//jsfiddle.net/mHDkV/1/](http://jsfiddle.net/mHDkV/1/)

我已将`targetPos`变量更改为引用 parent 的位置，并将类`td`也应用于该位置。看看 jsFiddle 中的代码——希望它是有意义的。`occupied``td`

# php - 在横幅旋转器代码中添加指向我的横幅图像的链接

> ID：13139684
> 
> 赞同：1
> 
> 时间：2012-10-30T13:07:03.120
> 
> 标签：php, hyperlink, rotator

我已经搜索过，但我发现的结果对我的情况没有用。

我有这段代码在我的页面上显示旋转横幅。它从文件夹中提取图像，我可以通过管理员添加更多图像。我想让这些图像可点击，以便它们可以将您带到我网站上的页面。我不知道 PHP，但我可以很好地复制粘贴并且有一些逻辑。如果您可以修改现有代码以使其正常工作，我将不胜感激。

谢谢

```
<div class="baner">
            <div class="baner_icon">
            </div>
            <div id="rotator">
                <ul>
                    <?php 
                    $baners = TopBaners::model()->recently()->findAll();
                    $i = 0;
                      foreach ($baners as $value) {
                        if ($i == 0) {
                            ?><li class="show"><img src="/i/<?php echo $value->file ?>" width="999" height="300px" alt="IMG"></li><?PHP
                        } else {
                            ?><li><img src="/i/<?php echo $value->file ?>" height="300px" width="999" alt="IMG"></li><?PHP
                        }
                        $i++;
                      }
                ?>
                </ul>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:11:23.347

```
 <div class="baner">
        <div class="baner_icon">
        </div>
        <div id="rotator">
            <ul>
                <?php 
                $baners = TopBaners::model()->recently()->findAll();
                $i = 0;
                  foreach ($baners as $value) {
                    if ($i == 0) {
                        ?><a href = "YOUR LINK"><li class="show"><img src="/i/<?php echo $value->file ?>" width="999" height="300px" alt="IMG"></li></a><?PHP
                    } else {
                        ?><a href = "YOUR LINK"><li><img src="/i/<?php echo $value->file ?>" height="300px" width="999" alt="IMG"></li></a><?PHP
                    }
                    $i++;
                  }
            ?>
            </ul>
        </div>
    </div> 
```

# javascript - 试图在 javascript 不良实践中模仿接口/抽象类

> ID：13139685
> 
> 赞同：13
> 
> 时间：2012-10-30T13:07:07.257
> 
> 标签：javascript, oop, node.js

我正在用 Node.js 编写一些代码，这些代码让我觉得使用策略模式结构更好。来自 .Net 我将创建其余部分所基于的接口并从那里移动，在 JavaScript 中这不是那么明确。

我理解作为一种原型语言 JavaScript 没有接口继承的概念，所以我不确定我所做的是否是一种气味，因为我似乎找不到参考，除了一篇试图推断接口的博客文章通过使用一个基抽象类来强制继承类实现该函数（当它抛出时）。

**我的基类**

```
QueryStrategy = function () {

};

QueryStrategy.prototype.create = function(){
throw new Error("Not Implemented");
}

module.exports = QueryStrategy; 
```

**实施1**

```
var util = require('util');
var QueryStrategy = require('./queryStrategy');

SelectQueryStrategy = function (query) {
    this.parameters = query.parameters || [];
    this.entity = query.entity || '';
};

util.inherits(SelectQueryStrategy, QueryStrategy);

SelectQueryStrategy.prototype.create = function () {
    var self = this,
        params = self.parameters,
        paramList = self.parameters.length >= 1 ? '' : '*';

    for (var i = 0; i < params.length; i++) {
        var suffix = i === (params.length - 1) ? '' : ', ';
        paramList = paramList + params[i].key + suffix;
    }

    return util.format("SELECT %s FROM %s", paramList, self.entity);
};

module.exports = SelectQueryStrategy; 
```

目前，该基础没有任何共享功能或属性。共享功能将会出现，属性，因为原型链搜索我没有看到添加“共享”属性的意义，因为它们被创建的实例覆盖（如果这是错误的，请告诉我）。

这是一种可接受的方法，还是在这种情况下我应该忽略继承。可能会有一些类型检查，如果您可以将类型推断为一个（即它们必须都是 Type QueryStrategy），那么它会更容易，但我不希望我的 .Net 偏见在这里接管。

**替代方法**

首先，我不是想在这里卖书，我只是用我拥有的书阅读了很多关于这个主题的书，但想在应得的地方给予赞扬。

根据这几条评论，可以正确地说类型推断在这里不会有任何区别，可能应该留给 Duck Typing 来检查，并且可能试图插入一些未在语言不是最好的方法。我已经阅读了关于接口的 Addy Osmani Javascript 模式，虽然我的实现不一样，虽然接口使用是可以接受的，但可能不需要。

保留策略方法可能更简单，但使用不同的实现，在 Stoyan Stefanov 的 Javascript 模式中概述的一种实现，您有一个实现，并且基于某种形式的配置，您知道要使用哪种策略。

**伪样本**

```
QueryBuilder = function () {
   this.types = [];
}

QueryBuilder.prototype.create = function (type, query) {
    var strategy = types[type];
    strategy.create(query);
};

QueryBuilder.types.Select = {

    create: function (query) {
        params = query.parameters,
        paramList = query.parameters.length >= 1 ? '' : '*';

        for (var i = 0; i < params.length; i++) {
            var suffix = i === (params.length - 1) ? '' : ', ';
            paramList = paramList + params[i].key + suffix;
        }

        return util.format("SELECT %s FROM %s", paramList, query.entity);
    }
}; 
```

这可能是一种更简洁的方法，我要确定的一件事是我是否应该向原型添加类型，但我想在这种简单的情况下不需要它，但在更复杂的情况下，你可以有一个许多策略和一个文件可能需要抽象出来。

这是一种更容易接受的方法吗？

**我最终得到了什么**

我环顾四周，试图了解更多关于 Duck 打字、优点和缺点等的信息，并尝试根据收到的一些评论和回答来简化我的设计。我坚持采用类似策略的方法，因为每个策略都定义了相同的功能，本质上封装了实现中的不同之处，并为它们提供了一个通用的合同，以便获得更好的条款。

改变的一件事是基类/接口，正如正确指出的那样，它没有做任何建设性的事情被删除了，每个策略都是独立的（因此在模式的经典表示中不是 100%）它们，如前所述，它们只是定义相同的创建函数.

从嵌套的 if 和 switch 曾经所属的地方开始，已被单个 switch 替换，该 switch 根据请求的查询类型决定使用哪种查询策略。稍后可以将其重新分解为工厂，但现在它达到了它的目的：

```
Query.prototype.generate = function () {

var self = this,
    strategy = undefined;

switch (this.queryType) {
    case "SELECT":
        strategy = new Select(self);
        break;
    case "INSERT":
        strategy = new Insert(self);
        break;
    case "UPDATE":
        strategy = new Update(self);
        break;
    case "DELETE":
        strategy = new Delete(self);
        break;
}

return strategy.create();
}; 
```

每个策略都经过独立测试，我觉得这更容易维护，就好像某事失败了，它会在一个地方失败，并且基于单元测试的调查会更容易。显然有一个权衡，更多的文件，和一个稍微复杂的结构......我们将看看会发生什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T13:23:55.460

这是一种可以接受的方法，但它不会以任何方式真正使您受益，并且可能会使这段代码更难以维护。策略模式实际上只对具有静态类型的语言有用。正如另一位评论者提到的，您可以查看 TypeScript。

在 JavaScript 中，您将更多地依赖“Duck Typing”……如果它看起来像鸭子，闻起来像鸭子，那么它可能就是一只鸭子。

[http://en.wikipedia.org/wiki/Duck_typing](http://en.wikipedia.org/wiki/Duck_typing)

# r - 如何在 R 中组合两个等价图（格）？

> ID：13139687
> 
> 赞同：0
> 
> 时间：2012-10-30T13:07:13.880
> 
> 标签：r, graphics, lattice, equivalence

我想为以下晶格图形添加两个等价图。`plot()`我对该函数的常用技巧`par(mfcol=c(1,2))`不适用于这些基于格的图。尽管我似乎无法从解决方案中提取所需的信息，但我查看了相关帖子。如何组合以下等价图，使它们在输出中彼此相邻（并排）？或者，换句话说，晶格等价于`par(mfcol=c(1,2))`什么？

```
require(equivalence)

# Simplified data for equivalence plot 1
a = c(2,4,6,8,10,12,14,16,18)
b = c(1,3,5,7,9,11,13,15,17)
mydata1 = data.frame(a,b)

equivalence.xyplot(mydata1$b ~ mydata1$a,
                   alpha=0.05, b0.ii=0.25, b1.ii=0.25)

# Simplified data for equivalence plot 2
x = c(1,4,8,2,3,4,6,5,9)
y = c(2,4,7,3,3,4,7,5,9)
mydata2 = data.frame(x,y)

equivalence.xyplot(mydata2$y ~ mydata2$x,
                   alpha=0.05, b0.ii=0.25, b1.ii=0.25) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:55:01.823

从@mplourde 评论中的[链接](https://stackoverflow.com/questions/2540129/lattice-multiple-plots-in-one-window)，对代码的以下更改将图表排列到我的规范中：

```
require(equivalence)

# Simplified data for equivalence plot 1
a = c(2,4,6,8,10,12,14,16,18)
b = c(1,3,5,7,9,11,13,15,17)
mydata1 = data.frame(a,b)

px1 = equivalence.xyplot(mydata1$b ~ mydata1$a,
                   alpha=0.05, b0.ii=0.25, b1.ii=0.25)

# Simplified data for equivalence plot 2
x = c(1,4,8,2,3,4,6,5,9)
y = c(2,4,7,3,3,4,7,5,9)
mydata2 = data.frame(x,y)

px2 = equivalence.xyplot(mydata2$y ~ mydata2$x,
                   alpha=0.05, b0.ii=0.25, b1.ii=0.25)

print(px1, position=c(0, 0.5, .5, 1), more=TRUE)
print(px2, position=c(0.5, 0.5, 1, 1)) 
```

![在此处输入图像描述](../Images/b8027f10657514b144fb1a8a4f93e435.png)

# c# - BackgroundWorker 的 IsBusy 是否与“IsAlive”相同？

> ID：13139691
> 
> 赞同：7
> 
> 时间：2012-10-30T13:07:29.530
> 
> 标签：c#, winforms, .net-4.0, backgroundworker, watchdog

我正在尝试找出一种方法来验证 BackgroundWorker 线程是否处于活动状态（即仍在运行。该线程本质上是作为一个简单的无限循环实现的：

```
while (AllConditionsMet())
{
  DoSomeMagic();
  Thread.Sleep(10000);
} 
```

`IsAlive()`到目前为止，我发现的最接近的是[IsBusy](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.isbusy%28v=vs.100%29.aspx)属性，但考虑到我的线程大部分时间是 Sleep()，我不确定这是否能完成这项工作。

我可以指望[IsBusy](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.isbusy%28v=vs.100%29.aspx)做：

```
if (!myWorker.IsBusy)
  RestartWorker(); 
```

还是我在找麻烦？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T13:49:16.533

`BackgroundWorker.IsBusy`只要 DoWork 事件处理程序正忙**且**RunWorkerCompleted 事件处理程序尚未运行，则为真。请注意后一个子句，该属性不会**告诉**您循环是否处于活动状态。

此外，您的第二个片段中有一个相当讨厌的竞争条件。IsBusy 在语句中可能为真，`if()`但在一纳秒后为假。那种每月举行一次的比赛。代码的意图很难从代码片段中理解，因此很难给出解决方法。考虑总是创建一个永远不会竞争的新 BGW 对象。还有助于摆脱该循环，一个线程休眠 10 秒正在浪费非常昂贵的系统资源而无所事事。它搞砸了线程池调度程序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T13:26:08.093

为确保 Backgroundworker 真正停止，您可以手动将其杀死。设置`yourBackgroundWorker.WorkerSupportsCancellation = true;`。然后简单地停止Backgroundworker：

```
yourBackgroundWorker.CancelAsync(); 
```

仍然`isBusy`应该足以检测您的`BackgroundWorker`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T13:11:39.963

从[文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.isbusy.aspx)：

> **true**，如果 BackgroundWorker 正在运行异步操作；否则，**false**。

不管你是否让工作线程休眠，它仍然*在做*一些事情，所以使用`IsBusy`应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-12T03:36:15.460

创建一个布尔变量，每当backgroundworker开始运行时将变量设置为true，在backgroundworker完成后将布尔变量设置为false。检查布尔变量状态，它可以显示后台工作程序是否仍在运行或不准确。

# perl - 在没有 CGI 的情况下运行像 php 这样的 perl 脚本

> ID：13139693
> 
> 赞同：3
> 
> 时间：2012-10-30T13:07:42.213
> 
> 标签：perl, apache, module, cgi

是否可以在不使用 CGI 的情况下在 Web 服务器中运行 Perl 脚本？
我的意思是，就像 php 脚本（运行任何没有`#!/path/to/interpreter`行的 .pl 文件）。
如果是，如何？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:12:22.473

看看[PSGI/Plack](http://plackperl.org/)。它是没有 CGI 的 Perl <--> web 服务器。

> PSGI 是 Perl Web 应用程序和 Web 服务器之间的接口，而 Plack 是一个 Perl 模块和工具包，其中包含 PSGI 中间件、帮助程序和 Web 服务器适配器。
> 
> PSGI 和 Plack 的灵感来自 Python 的 WSGI 和 Ruby 的 Rack。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T13:08:55.373

是的，使用`Action`指令：

```
AddHandler perl-files .pl
Action perl-files /path/to/perl/interpreter 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T13:11:31.793

是的。如果您使用的是 Apache，执行此操作的规范方法是使用[mod_perl](http://perl.apache.org/products/apache-modules.html)。

注意：mod_perl 不仅仅是 Apache 的 Perl 处理程序；它提供了一个标准接口（和许多辅助函数）来与网络服务器通信。

# python - Neo4j - Cypher 读写返回查询

> ID：13139696
> 
> 赞同：0
> 
> 时间：2012-10-30T13:07:57.963
> 
> 标签：python, node.js, neo4j, read-write, cypher

我对 neo4j 还很陌生。我玩过 cypher 和 REST API。我希望能够沿着某个路径创建一个叶节点，考虑这些节点是某些类型的事件。在运行时我不知道此事件将附加到的节点的 ID。我需要进行查找，然后获取节点的 id，然后创建我的新节点。

因此，在运行时，我希望我可以使用 cypher 进行 MATCH 以获取我可以将事件附加到的节点并创建新节点以及 MATCH 返回的现有节点的关系。所以我遇到了密码备忘单，它有一个读写返回查询，我认为这很合适。但是文档中没有太多提及它，或者我可能不是超级谷歌！

有人可以告诉我这（读写返回）是否是正确/有效的方法？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:39:13.237

是的。这是一个很好的方法。这是`CREATE`Cypher 中工作原理的优点之一。您还可以选择使用`create unique`which 同时创建 rel/node。就像是：

```
start n=node(1)
create unique n-[:event]->(event {prop:"val"})
return n, event; 
```

或没有`create unique`：

```
start n=node(1)
create (event {prop:"val"}), n-[:event]->event
return n, event; 
```

# primefaces - Primefaces 在单击按钮时显示动画

> ID：13139702
> 
> 赞同：7
> 
> 时间：2012-10-30T13:08:26.023
> 
> 标签：primefaces

我在 primefaces 中有以下按钮和面板：

```
<p:commandButton value="Submit"
    ajax="true" actionListener="#{myBean.search}" update="resultPanel" oncomplete="panelwv.show();">
</p:commandButton>

<p:panel widgetVar="panelwv" visible="false" closable="true"
    toggleable="true" id="resultPanel"> 
```

我希望在 myBean.search 执行时，屏幕上会出现一个动画。有什么帮助吗？谢谢！！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-30T13:15:02.773

您可以使用[Primefaces AJAX - 状态 - 声明式](http://www.primefaces.org/showcase/ui/ajax/status.xhtml)

> Ajax 状态是通知用户有关 ajax 交互的全局指示器。默认情况下，ajax 请求会触发 ajaxStatus 组件，将 global 设置为 false 会禁用此行为。

也看看其他例子[Primefaces AJAX - 状态](http://www.primefaces.org/showcase/ui/ajax/status.xhtml)

只需将一些漂亮的图像放在`h:graphicImage`

您可以使用[Ajaxload - Ajax 加载 gif 生成器生成一个](http://ajaxload.info/)

# php - PHP中的多线程、多卷曲爬虫

> ID：13139704
> 
> 赞同：7
> 
> 时间：2012-10-30T13:08:27.130
> 
> 标签：php, curl, parallel-processing, fork, fsockopen

**大家好再一次！**

我们需要一些帮助来开发和实现多卷曲功能到我们的爬虫中。我们有大量“要扫描的链接”，我们用 Foreach 循环抛出它们。

让我们使用一些伪代码来理解逻辑：

```
 1) While ($links_to_be_scanned > 0).
    2) Foreach ($links_to_be_scanned as $link_to_be_scanned).
    3) Scan_the_link() and run some other functions.
    4) Extract the new links from the xdom.
    5) Push the new links into $links_to_be_scanned.
    5) Push the current link into $links_already_scanned.
    6) Remove the current link from $links_to_be_scanned. 
```

**现在，我们需要定义最大并行连接数，并能够为每个链接并行运行此过程。**

我知道我们将不得不创建一个 $links_being_scanned 或某种队列。

老实说，我真的不确定如何解决这个问题，**如果有人可以提供一些片段或想法来解决它，将不胜感激。**

**提前致谢！克里斯;**

扩展：

我刚刚意识到这不是多卷曲本身的棘手部分，而是请求后每个链接完成的操作量。

即使在 muticurl 之后，我最终还是必须找到一种方法来并行运行所有这些操作。下面描述的整个算法必须并行运行。

所以现在重新考虑，我们必须做这样的事情：

```
 While (There's links to be scanned)
  Foreach ($Link_to_scann as $link)
  If (There's less than 10 scanners running)
  Launch_a_new_scanner($link)
  Remove the link from $links_to_be_scanned array
  Push the link into $links_on_queue array
  Endif; 
```

**每个扫描仪都会这样做（这应该并行运行）：**

```
 Create an object with the given link
  Send a curl request to the given link
  Create a dom and an Xdom with the response body
  Perform other operations over the response body
  Remove the link from the $links_on_queue array
  Push the link into the $links_already_scanned array 
```

**我假设我们可以使用扫描仪算法创建一个新的 PHP 文件，并为每个并行进程使用 pcntl_fork()？**

因为即使使用多卷曲，我最终也不得不等待其他进程的常规 foreach 结构循环。

我想我必须使用 fsockopen 或 pcntl_fork 来解决这个问题。

**建议、评论、部分解决方案，甚至是“祝你好运”都将不胜感激！**

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T18:05:43.530

> **免责声明：**这个答案链接了我参与的一个开源项目。那里。你已经被警告过了。

Artax [HTTP 客户端](https://github.com/rdlowrey/Artax)是一个基于套接字的 HTTP 库，它（除其他外）在发出多个异步 HTTP 请求时提供对与各个主机的并发打开套接字连接数的自定义控制。

限制并发连接数很容易实现。考虑：

```
<?php

use Artax\Client, Artax\Response;

require dirname(__DIR__) . '/autoload.php';

$client = new Client;

// Defaults to max of 8 concurrent connections per host
$client->setOption('maxConnectionsPerHost', 2);

$requests = array(
    'so-home'    => 'http://stackoverflow.com',
    'so-php'     => 'http://stackoverflow.com/questions/tagged/php',
    'so-python'  => 'http://stackoverflow.com/questions/tagged/python',
    'so-http'    => 'http://stackoverflow.com/questions/tagged/http',
    'so-html'    => 'http://stackoverflow.com/questions/tagged/html',
    'so-css'     => 'http://stackoverflow.com/questions/tagged/css',
    'so-js'      => 'http://stackoverflow.com/questions/tagged/javascript'
);

$onResponse = function($requestKey, Response $r) {
    echo $requestKey, ' :: ', $r->getStatus();
};

$onError = function($requestKey, Exception $e) {
    echo $requestKey, ' :: ', $e->getMessage();
}

$client->requestMulti($requests, $onResponse, $onError); 
```

*重要提示*：在上面的示例中，方法是**异步**`Client::requestMulti`发出所有指定的请求。因为每个主机的并发限制设置为，所以客户端将为前两个请求打开新连接，然后为其他请求重用这些相同的套接字，将请求排队，直到两个套接字中的一个可用。**`2`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:26:14.343

你可以试试这样的东西，还没有检查过，但你应该明白

```
$request_pool = array();

function CreateHandle($url) {
    $handle = curl_init($url);

    // set curl options here

    return $handle;
}

function Process($data) {
    global $request_pool;

    // do something with data

    array_push($request_pool , CreateHandle($some_new_url));
}

function RunMulti() {
    global $request_pool;

    $multi_handle = curl_multi_init();

    $active_request_pool = array();

    $running = 0;
    $active_request_count = 0;
    $active_request_max = 10; // adjust as necessary
    do {
        $waiting_request_count = count($request_pool);
        while(($active_request_count < $active_request_max) && ($waiting_request_count > 0)) {
            $request = array_shift($request_pool);
            curl_multi_add_handle($multi_handle , $request);
            $active_request_pool[(int)$request] = $request;

            $waiting_request_count--;
            $active_request_count++;
        }

        curl_multi_exec($multi_handle , $running);
        curl_multi_select($multi_handle);
        while($info = curl_multi_info_read($multi_handle)) {
            $curl_handle = $info['handle'];
            call_user_func('Process' , curl_multi_getcontent($curl_handle));
            curl_multi_remove_handle($multi_handle , $curl_handle);
            curl_close($curl_handle);
            $active_request_count--;
        }

    } while($active_request_count > 0 || $waiting_request_count > 0);

    curl_multi_close($multi_handle);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:56:39.900

You should look for some more robust solution to your problem. [RabbitMQ](http://www.rabbitmq.com/) is a very good solution I used. There is also [Gearman](http://gearman.org/) but I think it is your choice.

I prefer RabbitMQ.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:12:52.307

我将与您分享我用来从某个网站收集电子邮件地址的代码。您可以对其进行修改以满足您的需要。那里的相对 URL 存在一些问题。而且我在这里不使用 CURL。

```
<?php
error_reporting(E_ALL);
$home   = 'http://kharkov-reklama.com.ua/jborudovanie/';
$writer = new RWriter('C:\parser_13-09-2012_05.txt');
set_time_limit(0);
ini_set('memory_limit', '512M');

function scan_page($home, $full_url, &$writer) {

    static $done = array();
    $done[] = $full_url;

    // Scan only internal links. Do not scan all the internet!))
    if (strpos($full_url, $home) === false) {
        return false;
    }
    $html = @file_get_contents($full_url);
    if (empty($html) || (strpos($html, '<body') === false && strpos($html, '<BODY') === false)) {
        return false;
    }

    echo $full_url . '<br />';

    preg_match_all('/([A-Za-z0-9_\-]+\.)*[A-Za-z0-9_\-]+@([A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]\.)+[A-Za-z]{2,4}/', $html, $emails);

    if (!empty($emails) && is_array($emails)) {
        foreach ($emails as $email_group) {
            if (is_array($email_group)) {
                foreach ($email_group as $email) {
                    if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
                        $writer->write($email);
                    }
                }
            }
        }
    }

    $regexp = "<a\s[^>]*href=(\"??)([^\" >]*?)\\1[^>]*>(.*)<\/a>";
    preg_match_all("/$regexp/siU", $html, $matches, PREG_SET_ORDER);
    if (is_array($matches)) {
        foreach($matches as $match) {
            if (!empty($match[2]) && is_scalar($match[2])) {
                $url = $match[2];
                if (!filter_var($url, FILTER_VALIDATE_URL)) {
                    $url = $home . $url;
                }
                if (!in_array($url, $done)) {
                    scan_page($home, $url, $writer);
                }
            }
        }
    }
}

class RWriter {
    private $_fh = null;

    private $_written = array();

    public function __construct($fname) {
        $this->_fh = fopen($fname, 'w+');
    }

    public function write($line) {
        if (in_array($line, $this->_written)) {
            return;
        }
        $this->_written[] = $line;
        echo $line . '<br />';
        fwrite($this->_fh, "{$line}\r\n");
    }

    public function __destruct() {
        fclose($this->_fh);
    }
}

scan_page($home, 'http://kharkov-reklama.com.ua/jborudovanie/', $writer); 
```**

# django - “错误：靠近“文档”：语法错误” - sqlite3/Django

> ID：13139706
> 
> 赞同：1
> 
> 时间：2012-10-30T13:08:29.970
> 
> 标签：django, sqlite

我正在尝试 Django 书中的第 6 章。

在将某些字段更改为空白=True 和 null=True 后，我们被告知使用 dbshel​​l 更新表。

当我输入：python manage.py dbshel​​l，出现如下错误：

```
C:\Users\Rafa\Documents\Python\book>python manage.py dbshell
Error: near: "Documents": syntax error. 
```

我尝试在我的书目录中安装 sqlite3.exe 并直接从那里运行。每当我尝试运行命令时，我仍然会遇到相同的错误。例如，曾经在 sqlite3 shell 上（打开可执行文件）：

```
sqlite>ALTER TABLE books_book ALTER COLUMN publication_date DROP NOT NULL;
Error: near "ALTER": syntax error. 
```

我知道命令可能是错误的，但我可以尝试任何方法，它总是会指出相同的错误并在“”中显示命令的第一个单词。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:20:58.310

SQLite的[支持](http://www.sqlite.org/lang_altertable.html)[非常有限`ALTER TABLE`](http://www.sqlite.org/lang_altertable.html)。

您必须删除并重新创建表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:23:06.873

正如错误消息所暗示的那样，某处存在语法错误。您应该检查（或在此处发布）描述`Documents`类的部分是否存在一些语法错误:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:08:45.840

我现在意识到 Django 不能很好地支持数据库迁移。一旦您进行了初始迁移并设置了原始表，就不可能仅使用 Django 添加或修改字段。您需要像 South 这样的数据库迁移模式。

# batch-file - 使用批处理文件在目录下递归删除所有特定类型（扩展名）的文件

> ID：13139719
> 
> 赞同：101
> 
> 时间：2012-10-30T13:09:05.163
> 
> 标签：batch-file, cmd

我需要删除 dir1 和 dir2 中的所有 .jpg 和 .txt 文件（例如）。

我尝试的是：

```
@echo off
FOR %%p IN (C:\testFolder D:\testFolder) DO FOR %%t IN (*.jpg *.txt) DO del /s %%p\%%t 
```

在某些目录中它有效；在其他人中没有。

例如，这没有做任何事情：

```
@echo off
FOR %%p IN (C:\Users\vexe\Pictures\sample) DO FOR %%t IN (*.jpg) DO del /s %%p\%%t 
```

我在第二个片段中缺少什么？为什么它不起作用？

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2012-10-30T13:12:34.023

`del`您可以在命令中使用通配符，并`/S`以递归方式执行此操作。

`del /S *.jpg`

## 附录

@BmyGuest 询问为什么一个被否决的答案 ( `del /s c:\*.blaawbg`) 与我的答案有什么不同。

跑步和跑步有**很大**区别。第一个命令*从当前位置*执行，而第二个命令*在整个驱动器上*执行。`del /S *.jpg``del /S C:\*.jpg`

 **在您使用第二个命令删除`jpg`文件的情况下，某些应用程序可能会停止工作，您最终会丢失所有家庭照片。这非常烦人，但您的计算机仍然可以运行。

但是，如果您正在处理某个项目，并且想要删除 中的所有`dll`文件`myProject\dll`，并运行以下批处理文件：

```
@echo off

REM This short script will only remove dlls from my project... or will it?

cd \myProject\dll
del /S /Q C:\*.dll 
```

然后，您最终会从驱动器中删除所有`dll`文件。`C:\`您的所有应用程序都停止工作，您的计算机变得无用，并且在下一次重新启动时，您被传送到第四维度，您将永远被卡住。

`%windir%`如果可以避免的话，这里的教训是不要直接在驱动器的根目录（或任何其他可能危险的位置，例如 ）运行此类命令。始终尽可能在本地运行它们。

## 附录 2

通配符方法将尝试匹配所有文件名，它们的 8.3 格式和它们的“长名称”格式。例如，`*.dll`将匹配`project.dll` *and* `project.dllold`，这可能会令人惊讶。有关更多详细信息，请参阅[SU 上的此答案。](https://superuser.com/a/238930/275094)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-05-02T12:40:19.693

您可以使用它来删除文件夹和子文件夹中的所有文件：

```
DEL "C:\Folder\*.*" /S /Q 
```

或使用它仅删除某些文件类型：

```
DEL "C:\Folder\*.mp4" /S /Q 
DEL "C:\Folder\*.dat" /S /Q 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-02T16:11:57.790

前段时间我写了一个批处理脚本，允许您选择要删除的文件扩展名。该脚本将在它所在的文件夹以及具有该扩展名的任何文件的所有子文件夹中查找并将其删除。

```
@ECHO OFF
CLS

SET found=0
ECHO Enter the file extension you want to delete...
SET /p ext="> "

IF EXIST *.%ext% (           rem Check if there are any in the current folder :)
  DEL *.%ext%
  SET found=1
)
FOR /D /R %%G IN ("*") DO (  rem Iterate through all subfolders
  IF EXIST %%G CD %%G
  IF EXIST *.%ext% (
    DEL *.%ext%
    SET found=1
  )
)

IF %found%==1 (
  ECHO.
  ECHO Deleted all .%ext% files.
  ECHO.
) ELSE (
  ECHO.
  ECHO There were no .%ext% files.
  ECHO Nothing has been deleted.
  ECHO.
)

PAUSE
EXIT 
```

希望这对任何想要它的人有用:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-01T08:03:34.013

我没有足够的声誉来添加评论，所以我发布了这个作为答案。但是对于这个命令的原始问题：

```
@echo off
FOR %%p IN (C:\Users\vexe\Pictures\sample) DO FOR %%t IN (*.jpg) DO del /s %%p\%%t 
```

第一个 For 缺少递归语法，它应该是：

```
@echo off
FOR /R %%p IN (C:\Users\vexe\Pictures\sample) DO FOR %%t IN (*.jpg) DO del /s %%p\%%t 
```

你可以这样做：

```
FOR %%p IN (C:\Users\0300092544\Downloads\Ces_Sce_600) DO @ECHO %%p 
```

显示实际输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-16T00:27:06.550

就是这个：

```
@echo off

:: del_ext
call :del_ext "*.txt"
call :del_ext "*.png"
call :del_ext "*.jpg"

:: funcion del_ext
@echo off
pause
goto:eof
:del_ext
 set del_ext=%1
 del /f /q "folder_path\%del_ext%"
goto:eof 
```

pd：将文件夹路径替换为您的文件夹

* * *

## 回答 #6

> 赞同：-11
> 
> 时间：2015-04-23T01:53:56.337

如果您尝试删除 C: 驱动器中的某些 .extensions，请使用此 cmd：

```
del /s c:\*.blaawbg 
```

我有一个客户感染了加密病毒，我需要找到所有垃圾文件并删除它们。**

# php - 确定测试矩阵结果的有效方法

> ID：13139723
> 
> 赞同：0
> 
> 时间：2012-10-30T13:09:13.163
> 
> 标签：php, validation, matrix, implementation

相关问题：

*   [矩阵组合逻辑](https://stackoverflow.com/questions/13531987/matrix-combination-logic)
*   [笛卡尔积会是最好的方法吗](https://stackoverflow.com/questions/13282688/would-cartesian-product-be-the-best-approach-for-this)

我有 25 个验证，每个验证都返回一个布尔值（ true 它通过， false 它失败）。

每个验证都可以与所有其他验证组合以形成验证测试组合矩阵。

子集验证的特定组合也将具有通过/失败规则。

这是一个简短的例子：

```
 V1 | V2 | V3 | V4 | V5
M1:  T |  T |  T |  T |  T   <-- For this Matrix row it would PASS
M2:  F |  T |  T |  F |  T   <-- For this Matrix row it would FAIL  
M3:  F |  F |  T |  T |  T   <-- For this Matrix row it would PASS
M4:  T |  F |  F |  F |  F   <-- For this Matrix row it would PASS
M5:  T |  T |  F |  F |  F   <-- For this Matrix row it would FAIL 
```

我只关心垂直用于值的水平验证测试

我知道所有测试并将每个测试的结果存储在数据库中。我知道所有验证测试子集的所有组合矩阵。

我的问题是：

运行 Matrix 的最佳方式是什么？

我是否存储矩阵验证的每个通过或失败测试的每个排列？然后我在哪里存储矩阵组合？

我认为这样做的唯一方法是存储 25 个测试的所有验证组合（是的 625 个条目），并在同一记录中添加我期望这些验证的矩阵结果。

像这样的一些东西

```
 V1 | V2 | V3 | V4 | V5 | MR ( Matrix Results )
M1:  T |  T |  T |  T |  T | P   <-- For this Matrix row it would PASS
M2:  F |  T |  T |  F |  T | F   <-- For this Matrix row it would FAIL  
M3:  F |  F |  T |  T |  T | P   <-- For this Matrix row it would PASS
M4:  T |  F |  F |  F |  F | P   <-- For this Matrix row it would PASS
M5:  T |  T |  F |  F |  F | F   <-- For this Matrix row it would FAIL 
```

我只是觉得可能有一个我没有看到的更优化的解决方案，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:46:42.827

这是我会做的方式。首先在数组中定义矩阵图：

```
$map = array( 'TTTTT' => TRUE, 'FTTFT' => FALSE, 'FFTTT' => TRUE ); 
```

显然，该数组中会有更多元素，但你明白了。我不知道您的表/列名称，但接下来 CONCAT v1-v5 并作为字符串拉取。然后，只需在映射数组中找到该键：

```
$sql = "SELECT CONCAT(v1,v2,v3,v4,v5) AS matrix FROM `validation` WHERE `user`= '$user'";
$result = $mysqli->query( $sql );
$user_matrix = array();
while( $row = $result->fetch_assoc() ) $user_matrix[] = $map[ $row['matrix'] ]; 
```

现在你在 $user_matrix 数组中得到了结果

# sql-server - 大表上的 SELECT 查询

> ID：13139725
> 
> 赞同：0
> 
> 时间：2012-10-30T13:09:19.590
> 
> 标签：sql-server, tsql, stored-procedures

我需要审查/重构针对表（10+ 百万行）的现有存储过程。存储过程签名不能轻易更改，如下所示。

存储过程接受两个由管道分隔的字符串，并使用 SQL 函数 ( `SplitDelimitedVarChar`) 将字符串拆分为临时表，然后在实际选择中使用该临时表。*数组*字符串中的字符串数量范围从 1 到数千。

`DateValue`和`TimeValue`列包含行中时间戳的`int`表示。

我的问题是，如果这是一个好的（最好的？）解决方案，或者是否可以做得更好，是否有人有任何想法。主要问题是它是否可以针对速度进行优化？

由于只能通过此存储过程访问表，因此索引与`WHERE`列不聚集，并包括所有`SELECT`列。

感谢您的任何建议或指点。

```
CREATE PROCEDURE [dbo].[spdata_Get_Ana]
@beginTime INT,
@endTime INT,
@subscribers VARCHAR(MAX),
@exchanges VARCHAR(MAX) = '1:',
@beginDateValue int, 
@endDateValue int,
@target int = 1
AS  
BEGIN
SET NOCOUNT ON;

CREATE TABLE #exch (Item Varchar(20) COLLATE database_default)
INSERT INTO #exch
SELECT Item FROM [SplitDelimitedVarChar] (@exchanges, '|') ORDER BY Item
CREATE CLUSTERED INDEX idx ON #exch (Item)

CREATE TABLE #subs (Item Varchar(20) COLLATE database_default)
INSERT INTO #subs
SELECT Item FROM [SplitDelimitedVarChar] (@subscribers, '|') ORDER BY Item
CREATE CLUSTERED INDEX idx ON #subs (Item)

SELECT 
   [Id]
  ,'' AS 'Name'
  ,[NameId]
  ,[Level]
  ,[Ne]
  ,[CallId]
  ,[Bg]
  ,[DateTime]
  ,[TimeStamp]
  ,[LogOwnerSnb]
  ,[TypeOfLog]
  ,[AbsenceCode]
  ,[AnswerTime]
  ,[CallForwardingReason]
  ,[CallForwardingToNumber]
  ,[CallTransferTime]
  ,[CallTransferReason]
  ,[SeizedSubscriberType]
  ,[SeizedSubscriberTime]
  ,[SeizedSubscriberNumber]
  ,[CalledSubscriberService]
  ,[InSubscriberType]
  ,[InSubscriberNumber]
  ,[CallDirection]
  ,[SubscriberService]
  ,[ClearingCause]
  ,[ClearingCauseTime]
  ,[OnHookTime]
  ,[OutAnswerSubType]
  ,[OutAnswerTime]
  ,[OutAnswerSubNum]
  ,[RingingStartedTime]
  ,[ReroutedToNumber]
  ,[InitiatedService]
  ,[B26]
FROM [dbo].[data_centrex_Ana] AS A
WHERE
    (A.[DateValue] BETWEEN @beginDateValue AND @endDateValue)
AND
    EXISTS(SELECT [Item] FROM #exch WHERE [Item] = A.[Level])
AND
    (A.[TimeValue] BETWEEN @beginTime AND @endTime)
AND
(
   (@target = 1 AND EXISTS(SELECT [Item] FROM #subs WHERE [Item] = A.[LogOwnerSnb]))
   OR
   (@target = 2 AND EXISTS(SELECT [Item] FROM #subs WHERE [Item] = A.[Bg]))
)
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:22:27.460

怀疑在索引中包含选择列有什么好处。
它只是一个大索引。

尝试加入

```
SELECT [Id]  
FROM [dbo].[data_centrex_Ana] AS A 
JOIN #exch   
 ON [Item] = A.[Level] 
JOIN #subs    
  ON (@target = 1 AND [Item] = A.[LogOwnerSnb])   
  OR (@target = 2 AND [Item] = A.[Bg]) 
WHERE
     (A.[DateValue] BETWEEN @beginDateValue AND @endDateValue) 
AND  (A.[TimeValue] BETWEEN @beginTime AND @endTime) 
```

# android - 适用于 Android 3.0 的新 Facebook SDK - 延长令牌过期时间

> ID：13139730
> 
> 赞同：0
> 
> 时间：2012-10-30T13:09:37.393
> 
> 标签：android, facebook, facebook-android-sdk

是否需要或可以在新 SDK 中延长 Token 过期时间？

在旧的 SDK 中调用了一个方法，**`extendAccessTokenIfNeeded()`**但在新的 SDK 中只有一个类似的方法（按名称）调用**`internalRefreshToken()`**，并且 DOCS 说 - 不要使用此方法。

那么如何使用新的 SDK 处理扩展令牌场景呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:06:07.610

如果您通过 Request 类发出请求，那么令牌将自动为您扩展，因此实际上不需要显式扩展令牌。

# php - 如何在 PHP/MySQL 中生成夹具列表？

> ID：13139732
> 
> 赞同：4
> 
> 时间：2012-10-30T13:09:43.380
> 
> 标签：php, mysql

我正在尝试为足球联赛生成赛程表。我已经成功地生成了实际的赛程表，没有任何问题，但现在我正在尝试生成要进行比赛的“周”。这只需要“1 到 n”，没有其他日期信息，只需一周数字。

我在 MySQL 中创建的表如下：

```
Home     Away GameID WeekID
Team 2  Team 1  1      0
Team 3  Team 1  2      0
Team 3  Team 2  3      0
Team 4  Team 1  4      0
Team 4  Team 2  5      0  
Team 4  Team 3  6      0
Team 1  Team 2  7      0
Team 1  Team 3  8      0
Team 2  Team 3  9      0
Team 1  Team 4  10     0
Team 2  Team 4  11     0
Team 3  Team 4  12     0 
```

每支球队都必须打主场和客场比赛，因此在某些比赛中会出现重复。但是，我需要做的是为游戏分配一个周数，并且一个团队每周只能玩一次。

我要创建的是：

```
Home     Away GameID WeekID
Team 2  Team 1  1      1
Team 3  Team 1  2      2
Team 3  Team 2  3      3
Team 4  Team 1  4      4
Team 4  Team 2  5      5 
Team 4  Team 3  6      6
Team 1  Team 2  7      6
Team 1  Team 3  8      5
Team 2  Team 3  9      4
Team 1  Team 4  10     3
Team 2  Team 4  11     2
Team 3  Team 4  12     1 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:13:43.420

以下解决方案*有效*，但我认为对于不是 2 的幂的团队数量来说，它不能尽可能高效地完成日程安排。此外，对于所有情况，代码的效率都是 n^2 [可能是 n^3？]，所以我希望你不需要一次安排超过几百个团队。:P

```
<?php
$teams = $_GET['t'];
$games = array();   //2D array tracking which week teams will be playing
$weeks = array();   //2D array tracking which teams are playing in a given week

// initialize
for( $i=0; $i<$teams; $i++ ) {
    $games[$i] = array();
    for( $j=0; $j<$teams; $j++ ) {
        if( $i == $j ) { $games[$i][$j] = -1; } //you can't play with yourself ;D
        else { $games[$i][$j] = NULL; }
    }
}

// do the work
for( $w=1, $noblanks=false; !$noblanks; $w++) {
    if( !isset($weeks[$w]) ) { $weeks[$w] = array(); }
    $noblanks = true;   //begin assuming there are no blank spots in the matrix
    for( $i=0; $i<$teams; $i++ ) {
        for( $j=0; $j<$teams; $j++ ) {
            if( $i == $j ) { continue; }    //you can't play with yourself ;D
            if( is_null($games[$i][$j]) ) {
                if( !isset($weeks[$w][$i]) && !isset($weeks[$w][$j]) ) {
                    $games[$i][$j] = $w;    //game between team i and j in week w
                    $weeks[$w][$i] = true;  //mark that team i has game in week w
                    $weeks[$w][$j] = true;  //mark that team j has game in week w
                } else { $noblanks = false; } //this cell is blank, and will be left blank.
            }
        }
    }
}

// display
echo '<pre>';
foreach($games as $row) {
    foreach($row as $col) {
        printf('%4d', is_null($col) ? -2 : $col);
    }
    echo "\n";
}
printf("%d teams in %d weeks\n", $teams, count($weeks));
echo '</pre>'; 
```

样本输出：

```
 -1   1   2   3
   4  -1   3   2
   5   6  -1   1
   6   5   4  -1
4 teams in 6 weeks

  -1   1   2   3   4   5   6
   7  -1   3   2   5   4   8
   8   6  -1   1   7   9   4
   9  10   5  -1   6   7  11
  10   9  11   8  -1   1   2
  11  12  10  13   3  -1  14
  12  13  15  16  17  18  -1
7 teams in 18 weeks 
```

## 编辑

我已经找到了一种对所有情况都更“高效”的方法，除非团队数量是 2 的幂。基本上需要的周数变为`2 * number_of_teams`.

使用我的“[纸笔](https://twitter.com/Sammitch/status/263405415889526785)”方法，我注意到在矩阵上沿对角线排列数字非常理想，在回家的路上，我想到了一种方法，您可以只输入 2 个团队 ID，以及团队数量和它会让你回到那场比赛应该举行的那一周。

```
<?php

function getweek($home, $away, $num_teams) {
    if($home == $away) { return -1; }
    $week = $home+$away-2;
    if( $week > ($num_teams) ) {
        $week = $week-$num_teams;
    }
    if( $home>$away ) {
        $week += $num_teams;
    }
    return $week;
}

$teams = $_GET['t'];
$games = array();   //2D array tracking which week teams will be playing

// do the work
for( $i=1; $i<=$teams; $i++ ) {
    $games[$i] = array();
    for( $j=1; $j<=$teams; $j++ ) {
        $games[$i][$j] = getweek($i, $j, $teams);
    }
}

// display
echo '<pre>';
$max=0;
foreach($games as $row) {
    foreach($row as $col) {
        printf('%4d', is_null($col) ? -2 : $col);
        if( $col > $max ) { $max=$col; }
    }
    echo "\n";
}
printf("%d teams in %d weeks, %.2f weeks per team\n", $teams, $max, $max/$teams);
echo '</pre>'; 
```

示例输出：

```
 -1   1   2   3
   5  -1   3   4
   6   7  -1   1
   7   8   5  -1
4 teams in 8 weeks, 2.00 weeks per team

  -1   1   2   3   4   5   6
   8  -1   3   4   5   6   7
   9  10  -1   5   6   7   1
  10  11  12  -1   7   1   2
  11  12  13  14  -1   2   3
  12  13  14   8   9  -1   4
  13  14   8   9  10  11  -1
7 teams in 14 weeks, 2.00 weeks per team 
```

## 编辑（2013 年 4 月）

我已经修改了该`getWeek()`功能以适用于任意数量的团队。请参阅下面的新功能。约万

```
function getWeek($home, $away, $num_teams) {
    if($home == $away){
        return -1;
    }
    $week = $home+$away-2;
    if($week >= $num_teams){
        $week = $week-$num_teams+1;
    }
    if($home>$away){
        $week += $num_teams-1;
    }

    return $week;
} 
```

# asp.net - 为在 Windows Server 2008 Standard 上运行 IIS 7 的站点应用单点登录

> ID：13139733
> 
> 赞同：0
> 
> 时间：2012-10-30T13:09:45.647
> 
> 标签：asp.net, windows, iis, windows-authentication

如何使我的 Intranet 站点在 Windows Server 2008 上的 IIS 7 上部署时实现单点登录？

我知道在 IIS 6 或 Windows 7/Windows Server 2008 中，我可以在 IIS 中为我​​的站点右键单击“Windows 身份验证”，它会显示提供程序，我可以在其中选择“NTLM”。但是，对于 IIS 7 和 Windows Server 2008 Standard，情况并非如此。“提供者”选项并不完全存在。

我想要的是 - 如果我的用户从同一个域中访问，他们应该自动进行身份验证，并且不应该出现登录提示

谢谢

尼尔曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:31:25.363

1) 打开 IIS，单击您的 IIS 站点。2) 双击身份验证图标 3) 启用基本身份验证并单击编辑进行设置。

# macos - 在 OS X 中全屏使用 OpenGL 的稳定 60hz 帧速率是否可能？

> ID：13139734
> 
> 赞同：4
> 
> 时间：2012-10-30T13:09:47.143
> 
> 标签：macos, opengl, vsync

我正在尝试编写一个应用程序来全屏显示视频，该视频需要尽可能流畅。

我的 OpenGL 代码与垂直刷新同步同步，并且大部分时间播放流畅且 CPU 使用率低。

但是，有时会有轻微的口吃。

为了简化测试并消除潜在的延迟源，我编写了一个简单的渲染循环，它只创建一个全屏、清除帧并交换缓冲区。

我对缓冲区交换时间进行了计时（使用 mach_absolute_time() ）并打印了 15 到 18 毫秒范围之外的时间。

下面显示了一个示例运行（报告时间以秒为单位，帧时间以毫秒为单位）：

```
at time:0.903594 ->  frame time:06.943 ms
at time:1.941287 ->  frame time:20.801 ms
at time:1.956124 ->  frame time:14.725 ms
at time:1.969766 ->  frame time:13.533 ms
at time:4.059608 ->  frame time:23.808 ms
at time:4.068953 ->  frame time:09.255 ms
at time:6.090000 ->  frame time:55.086 ms
at time:6.090681 ->  frame time:00.210 ms
at time:6.101372 ->  frame time:10.659 ms
at time:9.684669 ->  frame time:18.014 ms
at time:15.032867 -> frame time:18.463 ms
at time:15.047580 -> frame time:14.618 ms
at time:17.028749 -> frame time:65.096 ms
at time:17.028962 -> frame time:00.108 ms
at time:17.037022 -> frame time:08.034 ms
at time:17.049193 -> frame time:12.069 ms
at time:17.063416 -> frame time:14.130 ms 
```

在测试时没有其他应用程序从 XCode 运行 appart。测试在运行 OS X 10.7.5 的 Macbook Pro 5,1 上运行。

切换图形（这台笔记本电脑有 Nvidia 9600 和 9400），从外接显示器或笔记本电脑屏幕运行没有区别。

为了排除底层 API 之间的差异，我使用 SDL、Glfw、Cinder 和 SFML 等图形框架尝试了相同的代码。最后，我还尝试了官方 Apple OpenGL 全屏示例的计时。它们的行为或多或少都相同，尽管 Glfw 似乎更稳定一些。

使用 SCHED_FIFO 策略将绘图线程优先级提高到最大值似乎可以改善一点，但效果不大。

我开始认为不可能从 OpenGL 获得稳定的 60hz 帧速率，或者如果是，那么它没有正确记录。

有没有人能够在 OS X 中为全屏 OpenGL 应用程序获得稳定的 60hz 显示速率？如何？

**编辑：**我注意到从终端运行测试极大地改善了时间。从 XCode 运行会产生更多的波动，我正在使用这些数字来得出我的结论。无论如何，我似乎仍然在同一台机器上的 Windows 7 下获得更稳定的行为。但电流波动在容许要求之内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:14:38.983

1.  如果视口是一个小窗口而不是整个屏幕，这个测试会发生什么？如果行为与 100x100 窗口相同，那么您可以假设这不是 GPU 性能问题。

2.  你在打电话给 GLFinish() 吗？如果不是这样，图形驱动程序几乎可以随时将结果自由地输出到屏幕上。结果可能是您观察到的性能峰值。

3.  您使用的计时器的分辨率是多少？我在尝试在 Windows 中对自己的代码进行基准测试时遇到了类似的问题 - 标准 Windows 计时器的分辨率很糟糕（~ 19 毫秒），所以我不得不切换到更高分辨率的计时器。

# facebook - Facebook 错误地抱怨正文中的元标记

> ID：13139737
> 
> 赞同：2
> 
> 时间：2012-10-30T13:10:00.623
> 
> 标签：facebook, facebook-like, meta-tags

我正在尝试实现一个赞按钮，但元标记存在一些问题。Facebook 调试器抱怨我有“正文中的元标记”，[http://developers.facebook.com/tools/debug/og/object](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Filovemymk.se) ?q=http%3A%2F%2Filovemymk.se ，即使我没有吨。并且拒绝识别任何元信息。

我还在 Open Graph Checker 上检查页面， http: [//ogp.spypixel.com/Pogo/checker/index.php?url=http%3A%2F%2Filovemymk.se](http://ogp.spypixel.com/Pogo/checker/index.php?url=http%3A%2F%2Filovemymk.se)，它完全没有给我任何错误所有信息都正确获取。

Facebook 需要更改哪些内容才能正确获取我的元数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:18:08.127

[这](http://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Filovemymk.se%2F)就是调试器在您的网址上看到的内容。我可以看到一个`<p>`标签，您在其中保留了元标签。我认为这个`<p>`标签是让调试器看到它​​的原因`<body>`。您应该尝试`<p>`从元标记之前删除标记。并将元标记明确地保留在`<head>`标记中。

# java - 没有这样的文件或目录 Eclipse Java Mac OSX

> ID：13139738
> 
> 赞同：1
> 
> 时间：2012-10-30T13:10:01.373
> 
> 标签：java, eclipse, macos, filenotfoundexception

每次运行 OpenGL 程序并尝试设置纹理时，我都会收到此错误：

```
Unable to read texture file: java.io.FileNotFoundException: bricks.gif (No such file or directory) 
```

我在同一个文件夹中有文件bricks.gif，它也显示在Eclipse 中，但我不知道发生了什么。我也尝试清洁和刷新，但没有。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:28:58.897

解决您的问题的两个想法：

1.  绝对引用bricks.gif，添加完整路径。（例如 /Users/abc/workspace/bricks.gif）

2.  当 Eclipse 启动您的应用程序时，根目录将是您的项目文件夹。

想想 Eclipse Package Explorer 中的以下布局：

```
projectname
   -src
   -bin
   -...
   -bricks.gif 
```

您可以使用路径“./bricks.gif”以相对方式引用该文件。您可以使用以下代码获取指向bricks.gif 的文件对象：

```
File bricks = new File("./bricks.gif"); 
```

或者

```
File bricks = new File("bricks.gif"); 
```

干杯

# ruby-on-rails - 保持耙工作：工作运行

> ID：13139739
> 
> 赞同：1
> 
> 时间：2012-10-30T13:10:04.970
> 
> 标签：ruby-on-rails, ruby

我正在使用delayed_job 来运行作业，cronjob 每分钟都会添加新作业。

目前我有一个问题，即当前以 'nohup rake jobs:work &' 手动启动的 rake jobs:work 任务随机退出。

虽然上帝似乎是某些人的解决方案，但额外的内存开销相当烦人，我更喜欢可以通过部署脚本（Capistrano）重新启动的更简单的解决方案。

是否有一些 bash/Ruby 魔法来实现这一点，或者我注定要在我的服务器上运行一个监控服务，并使用一些可怕的黑客来允许该站点部署的非私有帐户能够重新启动它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:01:29.683

我建议你使用`foreman`. 它允许您使用 启动任意数量的开发工作`foreman run`，然后将您的配置（每种类型的进程数、限制等）导出为新贵脚本，以使它们可供 Ubuntu 的新贵使用（为什么在操作系统已经有这是免费的？？）。

配置文件`Procfile`也与 Heroku 用于进程配置的文件完全相同，因此只需一个文件，您就可以涵盖三个进程管理系统。

# matlab - matlab怎么画地球仪？

> ID：13139741
> 
> 赞同：5
> 
> 时间：2012-10-30T13:10:10.573
> 
> 标签：matlab, geometry, surf

如何在matlab中绘制地球圈？

我的意思是球体上离散化点的方式`Geosphere`（Geosphere 是，例如在 3Ds Max 中）。

在下图中，显示为`Sphere`（左侧）和`Geosphere`（右侧） ![在此处输入图像描述](../Images/c921ce6f6210563f7033bec08a87659c.png)

在 Matlab 中有一个函数`sphere`，它给出了这样的结果： ![在此处输入图像描述](../Images/13e54b8ac5ff4808bce5c7befed4221b.png)

我需要得到这样的地圈图像。我有一个矩阵 Nx3，其中包含 Geosphere 的每个点的 xyz 坐标。

**更新：**

我只在显示（绘制）地球圈时遇到了问题，因为我已经有了数据 - 每个点的 xyz 坐标。这就是为什么`Gunther Struyf`我的回答对我有帮助，我接受了。

这是我用这种显示方式得到的：（Geosphere of factor = 6, N=362） ![在此处输入图像描述](../Images/974a16c1c89b46d2675affdffd205e0d.png)

如何获得地圈的 3d 点？我使用免费库[SPHERE_GRID](http://people.sc.fsu.edu/~jburkardt/m_src/sphere_grid/sphere_grid.html)来获取 3d 球体的点。（在库中有不同的离散化方式）。

另外，为了计算 Geosphere 的点，感谢`@Rody Oldenhuis`下面的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:22:18.310

如果您已经掌握了要点，我认为您可以使用与[此处](https://stackoverflow.com/a/12853620/1162609)相同的解决方案：

```
tri = convhull(xyz);
trisurf(tri,xyz(:,1),xyz(:,2),xyz(:,3)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T13:35:06.687

我在这里有一个函数，它能够生成任意精度的球体三角剖分。这是我基于`buildsphere`Giaccari Luigi 的一个功能，可悲的是，他已经完全从互联网上消失了（连同这个功能）。

所以，我会把它贴在这里，并在我的文件交换帐户上。一旦获得批准，我将用链接替换此代码。

请注意，我的计算机上有一些预先生成的模型，此功能依赖于这些模型。您必须先删除该部分，然后才能运行它。

要绘制生成的球体：请参阅 Gunther Struyf 的答案。

```
function [p, t] = TriSphere(N, R)
% TRISPHERE: Returns the triangulated model of a sphere using the
% icosaedron subdivision method.
%
% INPUT:
% N (integer number) indicates the number of subdivisions,
%   it can assumes values between 0-inf. The greater N the better will look
%   the surface but the more time will be spent in surface costruction and
%   more triangles will be put in the output model.
%
% OUTPUT:
% In p (nx3) and t(mx3) we can find points and triangles indexes
% of the model. The sphere is supposed to be of unit radius and centered in
% (0,0,0). To obtain spheres centered in different location, or with
% different radius, is just necessary a traslation and a scaling
% trasformation. These operation are not perfomed by this code beacuse it is
% extrimely convinient, in order of time perfomances, to do this operation
% out of the function avoiding to call the costruction step each time.
%
% NOTE:
% This function is more efficient than the matlab command sphere in
% terms of dimension fo the model/ accuracy of recostruction. This due to
% well traingulated model that requires a minor number of patches for the
% same geometrical recostruction accuracy. Possible improvement are possible
% in time execution and model subdivision flexibilty.
%
% EXAMPLE:
%
%  N=5;
%
%  [p,t] = TriSphere(N);
%
%  figure(1) axis equal hold on trisurf(t,p(:,1),p(:,2),p(:,3)); axis vis3d
%  view(3)

% Author: Giaccari Luigi Created:25/04/2009%
% For info/bugs/questions/suggestions : giaccariluigi@msn.com
% ORIGINAL NAME: BUILDSPHERE
%
% Adjusted by Rody Oldenhuis (speed/readability)

    % error traps
    error(nargchk(1,1,nargin));
    error(nargoutchk(1,2,nargout));
    if ~isscalar(N)
        error('Buildsphere:N_mustbe_scalar',...
            'Input N must be a scalar.');
    end    
    if round(N) ~= N
        error('Buildsphere:N_mustbe_scalar',...
            'Input N must be an integer value.');
    end

    % Coordinates have been taken from Jon Leech' files

    % Twelve vertices of icosahedron on unit sphere
    tau = 0.8506508083520400; % t   = (1+sqrt(5))/2, tau = t/sqrt(1+t^2)
    one = 0.5257311121191336; % one = 1/sqrt(1+t^2)  (unit sphere)    
    p = [
        +tau  +one  +0     % ZA
        -tau  +one  +0     % ZB
        -tau  -one  +0     % ZC
        +tau  -one  +0     % ZD
        +one  +0    +tau   % YA
        +one  +0    -tau   % YB
        -one  +0    -tau   % YC
        -one  +0    +tau   % YD
        +0    +tau  +one   % XA
        +0    -tau  +one   % XB
        +0    -tau  -one   % XC
        +0    +tau  -one]; % XD

    % Structure for unit icosahedron
    t = [  
         5  8  9 
         5 10  8 
         6 12  7 
         6  7 11 
         1  4  5 
         1  6  4 
         3  2  8 
         3  7  2 
         9 12  1 
         9  2 12 
        10  4 11 
        10 11  3 
         9  1  5 
        12  6  1 
         5  4 10 
         6 11  4 
         8  2  9 
         7 12  2 
         8 10  3 
         7  3 11 ];

    % possible quick exit
    if N == 0, return, end

    % load pre-generated trispheres (up to 8 now...)
    if N <= 8
        S = load(['TriSphere', num2str(N), '.mat'],'pts','idx');
        p = S.pts; t = S.idx; 
        if nargin == 2, p = p*R; end
        return
    else
        % if even more is requested (why on Earth would you?!), make sure to START 
        % from the maximum pre-loadable trisphere
        S = load('TriSphere8.mat','pts','idx');
        p = S.pts; t = S.idx; clear S; N0 = 10;
    end

    % how many triangles/vertices do we have? 
    nt = size(t,1); np = size(p,1); totp = np;    
    % calculate the final number of points    
    for ii=N0:N, totp = 4*totp - 6; end    
    % initialize points array
    p = [p; zeros(totp-12, 3)];

    % determine the appropriate class for the triangulation indices
    numbits   = 2^ceil(log(log(totp+1)/log(2))/log(2));
    castToInt = ['uint',num2str(numbits)];

    % issue warning when required
    if numbits > 64
        warning('TriSphere:too_many_notes',...
            ['Given number of iterations would require a %s class to accurately ',...
            'represent the triangulation indices. Using double instead; Expect ',...
            'strange results!']);
        castToInt = @double;
    else
        castToInt = str2func(castToInt);
    end

    % refine icosahedron N times
    for ii = N0:N
        % initialize inner loop
        told  = t;
        t = zeros(nt*4, 3);
        % Use sparse. Yes, its slower in a loop, but for N = 6 the size is
        % already ~10,000x10,000, growing by a factor of 4 with every
        % increasing N; its simply too memory intensive to use zeros().
        peMap = sparse(np,np); 
        ct    = 1;        
        % loop trough all old triangles        
        for j = 1:nt

            % some helper variables
            p1 = told(j,1);
            p2 = told(j,2);
            p3 = told(j,3);
            x1 = p(p1,1); x2 = p(p2,1); x3 = p(p3,1);
            y1 = p(p1,2); y2 = p(p2,2); y3 = p(p3,2);
            z1 = p(p1,3); z2 = p(p2,3); z3 = p(p3,3);

            % first edge
            % -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

            % preserve triangle orientation
            if p1 < p2, p1m = p1; p2m = p2; else p2m = p1; p1m = p2; end

            % If the point does not exist yet, calculate the new point            
            p4 = peMap(p1m,p2m);
            if p4 == 0
                np = np+1;
                p4 = np;
                peMap(p1m,p2m) = np;%#ok
                p(np,1) = (x1+x2)/2;
                p(np,2) = (y1+y2)/2; 
                p(np,3) = (z1+z2)/2;
            end

            % second edge
            % -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

            % preserve triangle orientation
            if p2 < p3; p2m = p2; p3m = p3; else p2m = p3; p3m = p2; end

            % If the point does not exist yet, calculate the new point
            p5 = peMap(p2m,p3m);
            if p5 == 0
                np = np+1;
                p5 = np;
                peMap(p2m,p3m) = np;%#ok
                p(np,1) = (x2+x3)/2; 
                p(np,2) = (y2+y3)/2; 
                p(np,3) = (z2+z3)/2;
            end

            % third edge
            % -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

            % preserve triangle orientation
            if p1 < p3; p1m = p1; p3m = p3; else p3m = p1; p1m = p3; end

            % If the point does not exist yet, calculate the new point            
            p6 = peMap(p1m,p3m);
            if p6 == 0
                np = np+1;
                p6 = np;
                peMap(p1m,p3m) = np;%#ok
                p(np,1) = (x1+x3)/2; 
                p(np,2) = (y1+y3)/2;
                p(np,3) = (z1+z3)/2;                
            end

            % allocate new triangles
            %   refine indexing
            %          p1
            %          /\
            %         /t1\
            %      p6/____\p4
            %       /\    /\
            %      /t4\t2/t3\
            %     /____\/____\
            %    p3    p5     p2            
            t(ct,1) = p1; t(ct,2) = p4; t(ct,3) = p6; ct = ct+1;            
            t(ct,1) = p4; t(ct,2) = p5; t(ct,3) = p6; ct = ct+1;
            t(ct,1) = p4; t(ct,2) = p2; t(ct,3) = p5; ct = ct+1;            
            t(ct,1) = p6; t(ct,2) = p5; t(ct,3) = p3; ct = ct+1;

        end % end subloop
        % update number of triangles
        nt = ct-1;         
    end % end main loop

    % normalize all points to 1 (or R)
    p = bsxfun(@rdivide, p, sqrt(sum(p.^2,2)));
    if (nargin == 2), p = p*R; end
    % convert t to proper integer class
    t = castToInt(t);    

end % funciton TriSphere 
```

# mysql - SQL 对于给定的主键，我想添加匹配的数据

> ID：13139742
> 
> 赞同：1
> 
> 时间：2012-10-30T13:10:23.253
> 
> 标签：mysql, primary-key

我正在从其他表在 mySQL 中创建一个表，

在我的表中，我已将 MemberID 标识为主键。如何从与 MemberID 匹配的其他表中导入数据。

例如

我的表：

MemberID 年龄

4 12
5 23
6 45

我想添加与 MemberID 匹配的眼睛颜色：

MemberID 眼睛颜色

6 绿色
4 蓝色
5 棕色

我对 mySQL 很陌生，所以如果这是一个基本问题，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:35:03.233

您可以使用`UPDATE`with `JOIN`（在新表中添加新列之后）：

```
Update Table1 t1
  JOIN Eye ey
    ON t1.MemberID = ey.MemberID
SET    t1.EyeColor = ey.`Eye Color`; 
```

## [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/f7529/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:28:57.797

首先，您必须为您的表命名。

让我们假设第一个表称为表 1，第二个表称为表 2。

然后你可以做类似的事情

```
SELECT t1.MemberID, t1.Age, t2.EyeColor FROM table1 t1, table2 t2 WHERE t1.MemberID = t2.MemberID; 
```

# recursion - 方案将变量传递给可变参数函数

> ID：13139747
> 
> 赞同：4
> 
> 时间：2012-10-30T13:10:38.940
> 
> 标签：recursion, scheme

我有以下可变参数函数`(define doSomething (lambda (x . rest) ...`。通过使用数字调用该函数，例如：（`(doSomething 1 2 3 4 5)`因此该调用`x`将是`1`并且`rest`将是`(2 3 4 5)`）。

当我尝试递归调用该函数并将第二个数字 ( `2`)`x`和`rest`as 时，`(3 4 5)`我以某种方式接收`rest`参数作为 list: 的列表`((3 4 5))`。

这就是我目前尝试再次调用该函数的方式： `(+ x (doSomething (car rest) (cdr rest)))`

值得一提的是，我正在使用`Pretty Big`. 请指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:28:02.310

因此，在您的第一次通话中，您可以混合和匹配其余的内容

```
(doSomething 1 2 3 4 5)   ; x = 1  rest = '(2 3 4 5) 
```

在您随后的通话中，您最终会得到

```
(doSomething (car rest) (cdr rest))   ; x=2  rest = '((3 4 5)) 
```

因为`rest`是一个可变参数，所以它会在第一个参数之后获取所有内容，并使其成为一个`rest`为您调用的列表，因此是双重列表。您可能想要使用`apply`或其他东西，例如：

```
(define doSomething (lambda (x . rest) 
                      (display x) 
                      (if (not (null? rest))
                        (apply doSomething rest)
                        #f))) 
```

# php - XAMP 服务器邮件功能

> ID：13139748
> 
> 赞同：0
> 
> 时间：2012-10-30T13:10:41.167
> 
> 标签：php, xampp

我想在 php.ini 中设置 Apache Server 的邮件功能，以便它可以发送电子邮件。我已经将邮件功能设置如下

```
[mail function]
; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury
 SMTP = localhost
 smtp_port = 25

; For Win32 only.
http://php.net/sendmail-from
sendmail_from = noreply@myserver.com

; XAMPP IMPORTANT NOTE (1): If XAMPP is installed in a base directory with spaces (e.g.     c:\program filesC:\xampp) fakemail and mailtodisk do not work correctly.
; XAMPP IMPORTANT NOTE (2): In this case please copy the sendmail or mailtodisk folder in your root folder (e.g. C:\sendmail) and use this for sendmail_path.  

; XAMPP: Comment out this if you want to work with fakemail for forwarding to your mailbox (sendmail.exe in the sendmail folder)
sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t"

; XAMPP: Comment out this if you want to work with mailToDisk, It writes all mails in the C:\xampp\mailoutput folder
sendmail_path = "C:\xampp\mailtodisk\mailtodisk.exe"

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = Off

; Log all mail() calls including the full path of the script, line #, to address and headers
mail.log = "C:\xampp\php\logs\php_mail.log" 
```

但它不起作用。谁能告诉我我应该做些什么更正才能正常工作。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:17:53.773

看起来您正在使用 mailtodisk.exe。您应该查看邮件输出文件夹。

请注意，在我的 XAMPP 安装中，mailoutput**不是**mailtodisk README 文件所说的位置。查看 xampp/tmp/mailtodisk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:18:51.697

XAMPP 没有附带 SMTP 服务器，因此您必须安装一个。

请注意注释“XAMPP：如果您想使用像 Mercury 这样的 SMTP 服务器，请将其注释掉”

[水星Win32](http://www.pmail.com/overviews/ovw_mercwin.htm)

# html - Chrome VS Firefox 1 px 的链接不同

> ID：13139755
> 
> 赞同：3
> 
> 时间：2012-10-30T13:10:54.707
> 
> 标签：html, css, google-chrome, firefox, browser

大家好，我怎样才能修复 Chrome 和 Firefox 的一个像素差异？我的菜单链接在 Chrome 中显示正确，但在 Firefox 中，我的菜单链接比 Chrome 小 1 px

这是CSS：

```
ul#menu {
    padding: 0 0 2px;
    position: relative;
    margin: 0;
    margin-top:-3px;
    margin-left:7px;
    float:left;
    height:34px;
    display: inline-block; 
}

ul#menu li {
    text-align: center;
    display: inline;
    list-style: none;
    font-family: 'Museo300Regular';
    font-size:15px;
    font-style:normal;
    line-height: 1;
}

ul#menu li a {
    background-image:url(../../images2/images/menu_bg_normal.jpg); 
    background-repeat: repeat;
    padding:5px 23px 6px 23px; /*üst sol alt sağ */
    font-weight: normal;
    text-decoration: none;
    line-height: 2.8em;
    background-color: #e8eef4;
    color: #FEFEFF;
    cursor:pointer; 
}

.deneme 
{
    width:964px;
    margin-left:auto;
    margin-right:auto;
} 
```

这是HTML部分：

```
<div class="deneme">
    <ul id="menu">         
     <li><a>Başkan</a></li>
     <li><a>Meclis</a></li>
     <li><a>Enc&#252;men</a></li>
     <li><a>Kurumsal</a></li>
     <li><a>Maltepe</a></li>
     <li><a>Etkinlikler</a></li>
     <li><a>İhaleler</a></li>
     <li><a>E-Belediye</a></li>
     <li><a id="link">Linkler</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:38:33.350

编辑 3：添加图像以证明高度相同...

大视野

![在此处输入图像描述](../Images/a5ec89c15d8491af4b29af1becffe30f.png)

关闭细节：

![在此处输入图像描述](../Images/f7cd73e5aa7593d81bbdb3b25a01d2a5.png)

编辑 2：这与您的第一个代码相同，并且在 Chrome 和 Firefox 中呈现相同：http: [//jsfiddle.net/qavB6/4/](http://jsfiddle.net/qavB6/4/)

添加

```
ul#menu li {
/*...*/
display: inline-block;
margin-top: 4px;
} 
```

和`line-height: 35px;`到`ul#menu li a {`。

享受...

编辑：

将 line-height 设置为特定值，它在 Firefox 和 Chrome 上以相同的方式呈现。

[http://jsfiddle.net/qavB6/3/](http://jsfiddle.net/qavB6/3/)

我不知道为什么，但深入挖掘我发现该设置`line-height: 38px;`或`line-height: 37px;` 不会更改 Chrome 中的行高，而它在 Firefox 上会更改。

您可以在 Chrome 中看到 and 或 between and 之间的差异`36px`，`37px`但`38px`看`39px`不到 and 之间`37px`的差异`38px`。这就是奇怪行为开始的地方......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:15:22.867

此代码仅针对带有 CSS 的 Firefox

```
<style type="text/css">
@-moz-document url-prefix() {
h1 {
    color: red;
}
}
</style> 
```

使用此代码分隔 Firefox 的 css，添加您的代码而不是 h1 以实现像素完美。

# excel - 在excel中打印出现

> ID：13139760
> 
> 赞同：0
> 
> 时间：2012-10-30T13:11:05.503
> 
> 标签：excel, excel-formula

可以说我有数据

```
2011
2012
2011
2012
2013
2013
2011
2012 
```

那么我想要的是

```
2011     1
2012     1
2011     2
2012     2
2013     1
2013     2
2011     3
2012     3 
```

有什么想法可以完成吗？

请注意，我只想使用 Excel 公式来完成这项工作。没有宏没有枢轴没有编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:15:38.717

我建议您使用以下公式：

```
B1=COUNTIF(A$1:A1,A1) 
```

就是这样。

粘贴此公式，它将创建包含计数的列。

# c# - 用于 Windows 8 开发的 Metro 与 WPF？

> ID：13139761
> 
> 赞同：7
> 
> 时间：2012-10-30T13:11:10.000
> 
> 标签：c#, wpf, windows-8, microsoft-metro

我试图了解 Windows 8 开发的未来。我的理解是，开发 Metro 应用程序将意味着它们仅限于 Windows 8。

但是那里有一些技术，请参阅[How to build a Metro App in WPF](https://stackoverflow.com/questions/6391888/how-to-build-a-metro-app-in-wpf)，这意味着 WPF 可用于制作具有 Metro 外观和感觉的东西。

那么我是否理解可以开发 WPF 应用程序 - 并在 Windows 7 上运行 - 但也可以在 Windows 8 上运行？如果只有 Metro 应用程序可以从 Windows 8 的新开始屏幕运行，这是否意味着传统风格的应用程序仍然可以通过桌面模式运行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:13:46.797

“正常”的 Windows 应用程序仍然可以在桌面模式下正常运行。事实上，如果您有这样的应用程序，它可能会像在 Windows 7 上一样运行，并且您真的不需要感到有压力来创建 Windows 应用商店应用程序（以前称为 Metro）。

不过，您链接到的问题完全是另一回事。它用于在 WPF 中创建 Zune 或 Github Windows 客户端等应用程序。它们具有某种类似于 Metro 的美感，但它们实际上并不是 Windows 应用商店应用程序。尽管大多数关键概念相似或相同，但您不能使用 WPF 创建后者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:13:55.417

Metro 只是设计语言。

传统的 WPF 可以在 Windows 7 和 Windows 8 桌面上运行。这些不能在 Windows RT 设备上运行。

现代应用程序，即 Windows 8/RT 应用程序或 Windows Store 应用程序不能使用 WPF 编写，只能在 Windows 8 和 Windows RT 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:14:07.530

Metro 不仅仅是一个 GUI。它能够访问提供常见功能（如网络摄像头访问）的[Windows 运行时。](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)

但是，使用 WPF，您可以“模拟” Metro 视觉层。但它们将是传统的桌面应用程序，将在 Windows 8 的桌面模式下运行。

我建议开发 2 个 GUI 层（地铁和桌面）。

# java - 适用于 MacOS 10.8 的 rxtxSerial.dll

> ID：13139765
> 
> 赞同：5
> 
> 时间：2012-10-30T13:11:24.757
> 
> 标签：java, osx-mountain-lion, zigbee

我目前正在开发一个 ZigBee 项目，我正在使用 Mountain Lion (10.8) 和 Eclipse IDE 在 Mac 上进行编程。要通过 USB 使用我的 Zigbee 模块进行串行通信，我需要这个 rxtxSerial.dll。我现在只有 Windows 兼容版本。

有人可以向我提供必要的链接吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T08:41:53.023

编辑2

使用截至 2012 年 11 月 15 日（OSX 10.8.2）的所有最新更新，我需要通过自制软件（http://mxcl.github.com/homebrew/）安装 glibtool，然后才能执行以下程序。

安装和配置自制软件就可以了

```
brew install libtool 
```

从一个终端。然后如下所述进行。

/编辑2

编辑

因此，我设法在 OS X Mountain Lion (10.8.2) 和 XCode（从 App Store 免费）上为我自己编译了它。

下载[rxtx-2.2pre2.zip](http://rxtx.qbang.org/wiki/index.php/Download)并解压。编辑提取目录中的“配置”文件并更改以下行：

```
JAVAINCLUDEDIR=$JPATH/../../../Headers 
```

至

```
JAVAINCLUDEDIR=/System/Library/Frameworks/JavaVM.framework/Versions/A/Headers 
```

然后通过做配置

> 。/配置

使用工作目录中的终端。

现在您的工作目录中将有一个名为“Makefile”的文件，您需要编辑此文件中的行：

```
LIBTOOLC = $(GLIBTOOL) --mode=compile $(CC) $(INCLUDES) $(CPPFLAGS) $(CFLAGS) $(VERBOSE_IOEXCEPTIONS) -c 
```

至

```
LIBTOOLC = $(GLIBTOOL) --tag=CC --mode=compile $(CC) $(INCLUDES) $(CPPFLAGS) $(CFLAGS) $(VERBOSE_IOEXCEPTIONS) -c 
```

然后运行

> 制作

现在，您的工作目录中有 RXTXcomm.jar，工作目录/i386-apple-darwin12.2.0 中有 librxtxSerial.jnilib

这些是您需要的文件。

要与他们合作，您可能需要做

> sudo mkdir /var/lock
> 
> 须藤 chmod 777 /var/lock

这种方法对我有用。

PS。如果你相信我，你可以从[这里](http://dl.dropbox.com/u/7099879/librxtxSerial.jnilib)和[这里](http://dl.dropbox.com/u/7099879/RXTXcomm.jar)得到这些文件。

聚苯乙烯。你可能会得到：

> 警告：RXTX 版本不匹配 Jar 版本 = RXTX-2.2-20081207 Cloudhopper Build rxtx.cloudhopper.net 本机 lib 版本 = RXTX-2.2pre2

但它应该仍然有效。

/编辑

我也在尝试在 ML 上使用 rxtx，虽然我还没有取得任何成功，但我确实找到了这个链接。 [英特尔 Mac OS X 上的 Java 6 和 librxtxSerial.jnilib](http://blog.iharder.net/2009/08/18/rxtx-java-6-and-librxtxserial-jnilib-on-intel-mac-os-x/) 尽管它没有提及 ML，但其中一条评论指出，只要稍微调整一下，它就可以与 Lion 一起使用。

如果我让它在这里工作，我会报告。

# java - ClassNotFoundException org.apache.mahout.math.VectorWritable

> ID：13139774
> 
> 赞同：1
> 
> 时间：2012-10-30T13:11:53.113
> 
> 标签：java, hadoop, mahout

我正在尝试将 csv 文件转换为序列文件，以便我可以在数据中训练和运行分类器。我有一个我编译的作业 java 文件，然后 jar 到 mahout 作业 jar 中。当我尝试`hadoop jar`在 mahout jar 中工作时，我得到一个`java.lang.ClassNotFoundException: org.apache.mahout.math.VectorWritable`. 我不知道为什么会这样，因为如果我查看 mahout jar，那个类确实存在。

这是我正在做的步骤

```
#get new copy of mahout jar
rm iris.jar
cp /home/stephen/home/libs/mahout-distribution-0.7/core/target/mahout-core-0.7-job.jar iris.jar    
javac -cp :/home/stephen/home/libs/hadoop-1.0.4/hadoop-core-1.0.4.jar:/home/stephen/home/libs/mahout-distribution-0.7/core/target/mahout-core-0.7-job.jar -d bin/ src/edu/iris/seq/CsvToSequenceFile.java    
jar ufv iris.jar -C bin .    
hadoop jar iris.jar edu.iris.seq.CsvToSequenceFile iris-data iris-seq 
```

这就是我的java文件的样子

```
public class CsvToSequenceFile {

public static void main(String[] args) throws IOException,
        InterruptedException, ClassNotFoundException {

    String inputPath = args[0];
    String outputPath = args[1];

    Configuration conf = new Configuration();
    Job job = new Job(conf);
    job.setJobName("Csv to SequenceFile");
    job.setJarByClass(Mapper.class);

    job.setMapperClass(Mapper.class);
    job.setReducerClass(Reducer.class);

    job.setNumReduceTasks(0);

    job.setOutputKeyClass(LongWritable.class);
    job.setOutputValueClass(VectorWritable.class);

    job.setOutputFormatClass(SequenceFileOutputFormat.class);
    job.setInputFormatClass(TextInputFormat.class);

    TextInputFormat.addInputPath(job, new Path(inputPath));
    SequenceFileOutputFormat.setOutputPath(job, new Path(outputPath));

    // submit and wait for completion
    job.waitForCompletion(true);
} 
```

}

这是命令行中的错误

```
2/10/30 10:43:32 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/10/30 10:43:33 INFO input.FileInputFormat: Total input paths to process : 1
12/10/30 10:43:33 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/10/30 10:43:33 WARN snappy.LoadSnappy: Snappy native library not loaded
12/10/30 10:43:34 INFO mapred.JobClient: Running job: job_201210300947_0005
12/10/30 10:43:35 INFO mapred.JobClient:  map 0% reduce 0%
12/10/30 10:43:50 INFO mapred.JobClient: Task Id : attempt_201210300947_0005_m_000000_0, Status : FAILED
java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: org.apache.mahout.math.VectorWritable
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:899)
    at org.apache.hadoop.mapred.JobConf.getOutputValueClass(JobConf.java:929)
    at org.apache.hadoop.mapreduce.JobContext.getOutputValueClass(JobContext.java:145)
    at org.apache.hadoop.mapreduce.lib.output.SequenceFileOutputFormat.getRecordWriter(SequenceFileOutputFormat.java:61)
    at org.apache.hadoop.mapred.MapTask$NewDirectOutputCollector.<init>(MapTask.java:628)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:753)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: org.apache.mahout.math.VectorWritable
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:867)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:891)
    ... 11 more 
```

任何想法如何解决这个问题，或者我什至试图正确地完成这个过程？我是 hadoop 和 mahout 的新手，所以如果我正在做一些困难的事情，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:56:33.163

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:46:11.127

尝试明确指定类路径，而不是`hadoop jar iris.jar edu.iris.seq.CsvToSequenceFile iris-data iris-seq`尝试类似`java -cp ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-21T14:32:37.383

在创建 jar (map/reduce) 时，创建具有依赖项的 jar。

与参考。对于 maven，您可以在 pom.xml 中添加以下代码并编译代码 << mvn clean package assembly:single >> 。这将在目标文件夹中创建具有依赖关系的 jar，并且创建的 jar 可能看起来像 <>-1.0-SNAPSHOT-jar-with-dependencies.jar

```
<build>
<plugins>
<plugin>
<artifactId>maven-assembly-plugin</artifactId>
<configuration>
<descriptorRefs>
<descriptorRef>jar-with-dependencies</descriptorRef>
</descriptorRefs>
<executions>
<execution>
<phase>package</phase>
<goals>
<goal>single</goal>
</goals>
</execution>
</executions>
</configuration>
</plugin>
</plugins>
</build> 
```

希望这能回答你的疑问。

# ruby - Rspec：可以在课堂上进行 should_receive 吗？

> ID：13139778
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:12:13.847
> 
> 标签：ruby, rspec

问题在标题中。例如，我有一个类：

```
class A
  def self.something
    p 'Something'
  end

  def call_something
    self.class.something
  end
end 
```

我想写一个测试，一个`instance a`on`class A`方法调用：`a.call_something`实际上会调用`A.something`. 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:42:22.667

试试看怎么样？我想这行得通

```
describe '#call_something' do
  it 'calls something in classA' do
    a = ClassA.new
    ClassA.should_receive(:something)
    a.call_something
  end
end 
```

# java - 将mp3导入android eclipse正在中断

> ID：13139790
> 
> 赞同：0
> 
> 时间：2012-10-30T13:12:44.987
> 
> 标签：java, android, eclipse, mp3

我的问题是我正在从 Eclipse 将 mp3 导入到我的 android 项目中，这导致它崩溃。但是，如果我删除该文件（错误消失）并使用我以前在以前的项目中使用过的 mp3 文件，它不会出现编译错误。那么，这与mp3文件有关吗？也许它是一个 .WMA 文件，它被转换为一个 mp3 文件。因此，既然它不是真正的 mp3，它会导致 eclipse 中断吗？

有人知道修复、导入、插件或其他任何可以允许多个音乐文件被我的 android 应用程序接受的东西吗？

还有一件事，我将它导入到 Res/raw 路径中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:16:40.110

解决我的问题的是我从音乐文件名中去掉了所有大写字母和空格，它解决了这个问题。

感谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T01:17:55.020

Make sure file name is clean and

*   Doesn't start with number
*   Doesn't contain spaces
*   Doesn't include special characters except '-'

Capital letters are OK.

# java - Glassfish 服务器不适用于 JDK 8

> ID：13139794
> 
> 赞同：6
> 
> 时间：2012-10-30T13:13:06.833
> 
> 标签：java, glassfish, java-8

我在带有 NetBeans 的 Web 项目中使用带有 lambda 的 jdk 8，但是当将它部署到 glassfish 时，它向我显示了这个错误：

```
java.lang.RuntimeException: Uncompilable source code - Erroneous tree type: <any> 
```

这是由包含 lambda 表达式的代码行引起的。

我尝试更改 glassfish 设置以使用 jdk 8，但我还没有让它工作。

有什么办法让它工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-24T11:39:06.890

在使用 GlassFish 4 和 JDK 8 时，我观察到了各种奇怪的行为。似乎在使用 Java 1.8 中引入的新语法时，使用新功能的类将`ArrayIndexOutOfBoundsException`在启动期间触发一个类似这样的内容：

```
 Exception while visiting
 martinandersson/com/malivechat/ejb/events/EventService.class of size
 7094

 java.lang.ArrayIndexOutOfBoundsException: 25966
   at org.objectweb.asm.ClassReader.readClass(ClassReader.java:2015)
   at org.objectweb.asm.ClassReader.accept(ClassReader.java:469)
   at org.objectweb.asm.ClassReader.accept(ClassReader.java:425)
   at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:362)
   at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.handleEntry(ReadableArchiveScannerAdapter.java:165)
   at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.onSelectedEntries(ReadableArchiveScannerAdapter.java:127)
   at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:347)
   at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:67)
   at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:306)
   at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:295)
   at java.util.concurrent.FutureTask.run(FutureTask.java:266)
   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
   at java.lang.Thread.run(Thread.java:744) 
```

有时，GlassFish 正在检查的类在“崩溃”中幸存下来，并且可以在应用程序中正确使用，有时则不能。崩溃的类有时会阻碍您的应用程序的部署。GlassFish 抱怨无法找到或实例化所需类型的 bean。有时，崩溃的类不会阻碍部署的成功，但是当他被使用时，类会以某种方式失败。例如，注入 bean 的资源将失败，您的应用程序将不可避免地抛出`NullPointerException`.

除了 GlassFish 不支持 JDK 1.8 之外，Java 本身似乎每次我尝试构建我的项目时都会崩溃，而且我的 JavaFX 应用程序有时会断电，而且他制作的各种组件非常有问题也。因此，生产代码绝对应该暂时不要升级到 Java 1.8。

## 更新

我也遇到了**EclipseLink 2.5.2-M1**的严重问题。我的一个实体类在 Java 1.7 中完美运行，然后我在其中添加了一些简洁的 JDK 8 语法。之后，EclipseLink 拒绝让实体类成为 JPA 关系的目标。EclipseLink 说实体类是“非实体”类型。一旦我将 JDK 8 的糖改写成遗留的 1.7 代码，一切都恢复正常了。

## 2014-07-03 更新

**GlassFish 4.0.1-b05**与 Java 1.8 代码只有一个问题：JPA 实体类。这意味着有问题的是*EclipseLink*。但我可以确认 Java 1.8 代码在 EJB:s 和 CDI 托管 bean 中工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T17:04:04.707

我尝试使用 JDK8 运行 GlassFish，但也无法启动。

提交了一个 JIRA 问题[GLASSFISH-19263](http://java.net/jira/browse/GLASSFISH-19263)用于跟踪目的。

# database - 规范化 - 外键重复

> ID：13139796
> 
> 赞同：3
> 
> 时间：2012-10-30T13:13:23.187
> 
> 标签：database, foreign-key-relationship, database-normalization

规范化数据时是否可以在同一个表中重复使用外键？

例如，一家快递公司有一个订单表格和一个客户表格，订单表格将记录从哪个客户取货（Customer_ID），并且还会有一列用于将其交付给哪个客户（也是 Customer_ID）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:35:24.217

It is perfectly acceptable; the two indexes will be maintained separately. The two relationships can be used separately...

```
select item, name, address from orders inner join customers on orders.sender = customers.id where orders.id = 5;
select name, address from orders inner join customers on orders.recipient = customers.id where orders.id = 5; 
```

or together (with care)

```
select item, name as sender_name, address as sender_address, recipients.name as as recipient_name, recipients.address as recipient_address from orders inner join customers on orders.sender = customers.id inner join customers as recipients on orders.recipient = recipients.id; 
```

*Do* be careful with cascade deletes ;)

# add - 每秒添加点

> ID：13139798
> 
> 赞同：1
> 
> 时间：2012-10-30T13:13:39.480
> 
> 标签：add, processing, seconds

我是处理新手，但我基本上是想获得这种效果：

等待。

（1秒后）

等待..

（1秒后）

等待...

（1秒后）

等待....

（然后重置）

等待。

作为文本（）；

任何想法我将如何能够实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T03:05:36.190

改用millis()，它计算自程序启动以来的时间，以毫秒为单位。这里有一个简单的反例：

再次编辑代码以获得更好的示例

```
PFont font;
String time = "000";
int initialTime;
int interval = 1000;
int fontSize;

void setup()
{
  size(300, 300);
  fontSize = 40;
  font = createFont("Arial", fontSize);
  background(255);
  fill(0);
  smooth();
  noStroke();
  textFont(font);
  initialTime = millis();
}

void draw()
{
  background(255);

  // if current time minus lastStored bigger than interval 
  if (millis() - initialTime > interval){

    // increment time as an int and back to string again
    time = nf(int(time) + 1, 3);

    // reset counter
    initialTime = millis();
  }

  // just  cosmetic using the counter ...
  if (int(time) % 5 != 0) {
    fill(210);
  }else{
    fill(170, 100, 100);
  }

  ellipse(width/2, height/2, 120, 120);

  fill(255);
  ellipse(width/2, height/2, 100, 100);

  //display time
  fill(0);
  text(time, width/2 - textWidth(time)/2, height/2 + fontSize/2.8 );
} 
```

# javascript - jQuery 延迟对象和 AJAX 调用

> ID：13139804
> 
> 赞同：1
> 
> 时间：2012-10-30T13:14:04.573
> 
> 标签：javascript, jquery, jquery-deferred, deferred-execution

我处于需要使用多个 AJAX 调用创建表的情况。我发出一个 ajax 请求并获得一个带有元素数组的 JSON 对象（比如说 5 个）。通过 for 循环运行它，并在每个 ajax 请求的响应中使用来自当前循环元素和当前 ajax 调用的部分数据创建一行，然后将其添加到表中的一行中。（对不起我的语法不好）

我想知道如何使用延迟对象来实现这一点？如果我的理解是正确的，这应该更简单地使用延迟对象来实现？正确的？

### 我目前的实现

```
$.ajax{
    //options
    success : function(data){

    // add col1, col2, col3 from first ajax call
        $(data).each(function(i,e){

            // make ajax request based on inputs from current loop element
            $.ajax({
                //options
                success: function(data) {
                    // add col5, col6 from first ajax call
                    // add col7, col8 from current loop element
                    // add <tr> to the table
                }
            });

        });

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:38:45.403

是否要等到所有 ajax 调用都返回后再更新 DOM？如果您不需要这样做，那么您无需使用 $.Deferred 即可。只需在每个“成功”回调中更新 DOM。

如果您确实想等到所有呼叫都返回，那么您可以执行以下操作：

```
var promises = [];

$(data).each(function(i,e){

  // make ajax request based on inputs from current loop element
  promises.push($.ajax({ 
    // stuff 
  }));

});

$.when(promises).done(function() {
  // Update the DOM
}); 
```

我还没有尝试过，所以可能存在语法错误，但想法是 ajax 调用返回一个“承诺”。这本质上是一个承诺，在未来的某个时候，它将履行其职责。因此，您将所有的 Promise 推送到一个数组中，然后您可以使用 $.when 函数在所有 Promise 都满足时执行一些代码。

# python - 将颜色图添加到 add_collection（3d 图中的表面）

> ID：13139805
> 
> 赞同：5
> 
> 时间：2012-10-30T13:14:06.273
> 
> 标签：python, 3d, matplotlib, color-mapping

我正在制作一个 3 面金字塔 我已经使用 add_collection3d(Poly3DCollection

但我想添加一个基于 z 轴的颜色图，使顶部为红色，并逐渐变为蓝色，但细节无关紧要。我尝试了 cmap 选项，但这确实改变了颜色。

我在一侧添加了一个脚本来说明问题。

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np
from mpl_toolkits.mplot3d.art3d import Poly3DCollection

fig = plt.figure()
ax = Axes3D(fig)

#Pyramid side 1
xp1 = [1.1184,2.46,2.46]
yp1 = [0.5592, 1.23,2.73]
zp1 = [-1.5,0,-1.5]
verts1= [zip(xp1,yp1,zp1)]

cmhot = plt.cm.get_cmap("hot")
ax.add_collection3d(Poly3DCollection(verts1,cmap=cmhot))

ax.set_xlim(0,5)
ax.set_ylim(0,5)
ax.set_zlim(-2.5,5)
plt.show() 
```

为什么这不起作用？

提前谢谢了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-07-10T10:58:42.927

You have to convert zip into list format

```
list(zip(xp1,yp1,zp1)) 
```

# javascript - 按偶数和奇数对数组进行排序

> ID：13139811
> 
> 赞同：1
> 
> 时间：2012-10-30T13:14:29.813
> 
> 标签：javascript, jquery

使用javascript`sort()`方法，我正在尝试对列表进行排序，但排序包含一组偶数和奇数。

我尝试的代码在小列表中运行良好，但如果列表变大，它不会让我得到正确的结果。这是我的代码。

```
var n = [10,20,21,4,5,6,7,99,0,12,13];
//var n = [10,20,0,12];
n.sort(function(a,b){
 if (a % 2 !=b % 2 ){
   return a%2;
  }else {
    return a - b; 
  }
}); 
```

上面的代码根据接受的结果给了我这样的答案-`[0, 4, 6, 10, 12, 20, 5, 7, 13, 21, 99]`第二个答案是：-`[0, 10, 12, 20]`

使用此列表可以正常工作，但如果我更改为此列表

```
var n = [10,20,21,4,5,6,7,99,0,12,13,10,20,21,4,5,6,7,99,0,12,13,10,20,21,4,5,6,7,99,0,12,13,10,20,21,4,5,6,7,99,0,12,13]; 
```

但是在这种情况下，结果是这样的，这是不正确的。

像这样给我答案

`[0, 0, 0, 0, 4, 4, 4, 4, 6, 6, 6, 6, 10, 10, 10, 10, 12, 5, 12, 5, 12, 5, 20, 20, 20, 20, 5, 12, 7, 7, 7, 7, 13, 13, 13, 13, 21, 21, 21, 21, 99, 99, 99, 99]`它是奇数和偶数的混合。

它给了我不正确的结果。任何建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T13:22:28.813

最短的：

```
n.sort(function(a, b) {
    return a % 2 - b % 2 || a - b;
}); 
```

为了使其适用于负数，我们可以添加[`Math.abs()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/abs)：

```
n.sort(function(a, b) {
    return Math.abs(a % 2) - Math.abs(b % 2) || a - b;
}); 
```

甚至更紧凑的变体使用[*按位 AND*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators#.26_%28Bitwise_AND%29)：

```
n.sort(function(a, b) {
    return (a & 1) - (b & 1) || a - b;
}); 
```

最紧凑的版本（ES6）：

```
n.sort((a, b) => (a & 1) - (b & 1) || a - b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:20:09.307

更改代码如下：

```
n.sort(function(a,b){
 if (a % 2 != b % 2 ){
   return a%2;
  }else {
      return (a - b) > 0 ? 1 : -1; 
  }
}); 
```

工作样本在[这里](http://jsfiddle.net/7vv7C/)。

编辑：

```
n.sort(function(a,b){
 if (a % 2 != b % 2 ){
     return a%2 == 0 ? -1 : 1; // this is the fix :)
  }else {
      return (a - b) > 0 ? 1 : -1; 
  }
}); 
```

编辑 2：我修改了负数的代码。请参阅[工作样本](http://jsfiddle.net/7vv7C/)。

```
n.sort(function(a,b){
 if (a % 2 != b % 2 ){
   return Math.abs(a)%2;
  }else {
      return a > b ? 1 : -1; 
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:57:11.600

My try:

[fiddle](http://jsfiddle.net/6jMZV/2/)

```
var n = [10,20,21,4,5,6,7,99,0,-12,12,13,-45,10,20,21,-13,4,5,6,7,99,0,12,13,10,-99,20,21,4,5,6,7,99,0,12,13,10,20,21,4,5,6,7,99,-15,-18,0,12,13];

function sort(a, b) {
    if (!(a % 2) && !(b % 2)) {
        return a > b ? 1 : -1;
    }
    if ((a % 2) && (b % 2)) {
        return a > b ? 1 : -1;
    }
    if ((a % 2) && !(b % 2)) {
        return 1;
    }
    return -1;
}
console.log(n.sort(sort));​ 
```

# c# - 使用 LINQ Min 方法构建表达式树 - 引发 ArgumentException

> ID：13139814
> 
> 赞同：1
> 
> 时间：2012-10-30T13:14:56.877
> 
> 标签：c#, reflection, lambda, expression-trees

```
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;
using System.Reflection;

namespace Test_console_application
{
    class Program
    {
        static void Main(string[] args)
        {
            var parentPropertyName = "Measurements";
            var parentPropertyType = typeof (Measurement);
            var propertyName = "Data";

            var parameterExp = Expression.Parameter(typeof(Inverter), "type");
            var propertyExp = Expression.Property(parameterExp, parentPropertyName);

            var method = typeof(Enumerable).GetMethods(BindingFlags.Static | BindingFlags.Public)
                .Single(x => x.ToString() == "Double Min[TSource](System.Collections.Generic.IEnumerable`1[TSource], System.Func`2[TSource,System.Double])")
                .MakeGenericMethod(parentPropertyType);

            var minParameterExp = Expression.Parameter(parentPropertyType, "type2");
            var minPropertyExp = Expression.Property(minParameterExp, propertyName);
            var minMethodExp = Expression.Call(method, propertyExp, minPropertyExp);            
        }
    }

    public class Inverter
    {
        public IList<Measurement> Measurements { get; set; }
    }

    public class Measurement
    {
        public double Data { get; set; }
    }
} 
```

当我运行此代码时，我得到一个 ArgumentException：

> “System.Double”类型的表达式不能用于“System.Func `2[Test_console_application.Measurement,System.Double]' of method 'Double Min[Measurement](System.Collections.Generic.IEnumerable`1[Test_console_application.Measurement]、System.Func`2[Test_console_application.Measurement,System.Double]) 类型的参数

我明白它的意思，但我只是认为我就是用 minPropertyExp 做的。
我不知道我需要改变什么——有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:21:42.587

您不应将属性表达式作为 Func 传递。你应该传递一个方法。

你做了类似的事情：

```
Measurements.Min(type2.Data) 
```

代替

```
Measurements.Min(x => x.Data) 
```

* * *

来自 Morten Holmgaard 的评论

```
var minMethod = Expression.Lambda(minPropertyExp, minParameterExp);
var minMethodExp = Expression.Call(method, propertyExp, minMethod); 
```

# xml - 如何验证节点值并根据条件记录该值？

> ID：13139817
> 
> 赞同：0
> 
> 时间：2012-10-30T13:15:07.707
> 
> 标签：xml, powershell, powershell-2.0

我有具有以下结构的 xml 文件。

```
 <NodeData>
      <XPath>//VersionInfo/VersionList[Name = "FileCopy"]</XPath>
      <Node>
        <VersionList xmlns="">
          <Name>Core_FileCopy</Name>
          <Version>10.21.1.3</Version>
        </VersionList>
      </Node>
    </NodeData> 
```

我正在获取值版本和名称并将它们存储在日志文件中。

```
 $FileList= Get-Childitem -path "Z:\XmlFiles" -Include "*.xml" -recurse | ?{$_.GetType() -ne [System.IO.DirectoryInfo]} 
    $LikeArray = @("10.21.*","10.20.*","10.11.*")

    Foreach ( $File in $Filelist ) { 

        "Processing file $File.FullName"
        $xmldata= [xml] (Get-content $File.FullName);  
        $VersionLists = $xmldata.SelectNodes("//VersionList")    # Get the versionlist node

        # If it has VersionList node
        If ( $VersionLists -ne $null) {

            Foreach ($VersionList in $VersionLists) { 
$VersionList | Select Version | Where-Object {$_ -notlike $LikeArray }
            }

        }
    } 
```

但是只有在没有版本号的情况下，我才需要存储名称和版本

> ("10.21\. *","10.20.* ","10.11.*)。

我已经修改了我的条件，但它仍然显示所有版本号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:35:06.640

看看这是否符合您的要求。

```
$FileList= Get-Childitem -path "Z:\XmlFiles" -Include "*.xml" -recurse | ?{$_.GetType() -ne [System.IO.DirectoryInfo]} 
$LikeArray = @("10.21","10.20","10.11")
Foreach ( $File in $Filelist ) { 
        "Processing file $File.FullName"
        $xmldata= [xml] (Get-content $File.FullName);  
        $VersionLists = $xmldata.SelectNodes("//VersionList")    # Get the versionlist node
        Foreach ($VersionList in $VersionLists) { 
         if ( $LikeArray -notcontains $VersionList.Version.substring(0,5)) {
                    $VersionList | select Name, Version 
               }
        }
} 
```

# regex - 从任何正则表达式生成上下文无关语法的算法

> ID：13139821
> 
> 赞同：5
> 
> 时间：2012-10-30T13:15:24.727
> 
> 标签：regex, algorithm, nlp, context-free-grammar, computation-theory

任何人都可以为我概述一个可以将任何给定的正则表达式转换为等效的 CFG 规则集的算法吗？

我知道如何处理诸如 (a|b)* 之类的基本内容：

```
S -> a A
S -> a B
S -> b A
S -> b B
A -> a A
A -> a B
A -> epsilon
B -> b A
B -> b B
B -> epsilon
S -> epsilon (end of string) 
```

但是，我在将其形式化为适当的算法时遇到了一些问题，尤其是对于可以具有许多嵌套操作的更复杂的表达式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T13:38:36.527

如果您只是从理论角度谈论正则表达式，则有以下三种构造：

```
ab       # concatenation
a|b      # alternation
a*       # repetition or Kleene closure 
```

然后你可以做什么：

*   创建规则`S -> (fullRegex)`
*   为每个重复的术语`(x)*`创建`fullRegex`一个规则`X -> x X`，`X -> ε`然后替换`(x)*`为`X`。
*   为每个交替`(a|b|c)`创建规则`Y -> a`，`Y -> b`然后`Y -> c`替换`(a|b|c)`为`Y`

只需递归地重复此操作（注意 all`x,` `a`和`b`仍然`c`可以是复杂的正则表达式）。请注意，您当然必须为每个步骤使用唯一标识符。

这应该足够了。这肯定不会给出最优雅或最有效的语法，但这就是规范化的目的（它应该在一个单独的步骤中完成，并且有[明确定义的步骤](http://en.wikipedia.org/wiki/Chomsky_normal_form#Converting_a_grammar_to_Chomsky_Normal_Form)来做到这一点）。

一个例子：`a(b|cd*(e|f)*)*`

```
S -> a(b|cd*(e|f)*)*

S -> a X1; X1 -> (b|cd*(e|f)*) X1; X1 -> ε

S -> a X1; X1 -> Y1 X1; X1 -> ε; Y1 -> b; Y1 -> cd*(e|f)*

S -> a X1; X1 -> Y1 X1; X1 -> ε; Y1 -> b; Y1 -> c X2 (e|f)*; X2 -> d X2; X2 -> ε

... and a few more of those steps, until you end up with:

S  -> a X1
X1 -> Y1 X1
X1 -> ε
Y1 -> b
Y1 -> c X2 X3
X2 -> d X2
X2 -> ε
X3 -> Y2 X3
X3 -> ε
Y2 -> e
Y2 -> f 
```

# apple-push-notifications - Java APNS 收到致命警报：certificate_unknown

> ID：13139822
> 
> 赞同：0
> 
> 时间：2012-10-30T13:15:28.623
> 
> 标签：apple-push-notifications, apns-sharp, apns-php, moonapns

我正在尝试使用 APNS 发送推送通知。我使用不同的配置文件（针对不同的 Apple 帐户）生成了不同的应用程序集。例如：我有使用 Apple Profile X 开发的应用程序 ABC，以及使用相同 Profile X 的提供者证书的 APNS 代码。当我使用此证书发送推送通知时，它们会正确传递到应用程序。

但是，当我使用使用 Apple Profile Y 生成的提供商证书时，它不会将消息传递给使用 Profile X 开发的应用程序。

我想知道，如果我想向在我的服务器中注册的任何应用程序发送通知以获取推送通知，我应该使用什么样的提供商证书？

是否有任何通用提供商证书可以向任何应用程序发送消息？

在交叉证书场景中测试时出现以下异常：

```
Caused by: javax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_unknown
       at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
       at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:136)
       at com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1586)
       at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:865)
       at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1029)
       at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:677)
       at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
       at 
```

我确信我使用的证书是正确的，因为它适用于相同配置文件的应用程序。

如果需要，请要求更多说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:11:10.120

您不能使用一个证书将 APNS 发送到多个应用程序。您不能使用为一个应用生成的证书将 APNS 发送到另一个应用。它与单个应用程序绑定的每个证书只能用于向该应用程序发送推送通知。除此之外，您可以为每个应用程序生成一个用于沙盒环境的证书和一个用于生产环境的证书。您不能使用沙盒证书将 APNS 发送到使用生产证书或其他方式构建的应用程序。

# c# - 如何隐藏 LayoutPanel / LayoutDocument 的选项卡标题？

> ID：13139824
> 
> 赞同：1
> 
> 时间：2012-10-30T13:15:37.907
> 
> 标签：c#, .net, tabitem, avalondock

大家，早安！

我在一个项目中使用 AvalonDock，最后我遇到了一个问题：

在我的项目中开发的某些页面中，我有使用标准文本块的自定义标题。在某些页面中，特别是，我在页面左侧锚定了一个 LayoutAnchorable，在右侧锚定了一个 LayoutDocument。

对于 LayoutDocument，标题是空的，因为我在这个页面上已经有了标题。这会导致此 LayoutDocument 选项卡的 TabItem（标题）仍然显示为空值。由于我想在所有页面上保留我的标题，我想知道是否有我如何隐藏或删除这个空白的 tabItem，即标题。我的一个尝试是修改页面的边距，我得到了她的熬夜页面。但是这个 LayoutDocument TabItem 向下重新调整，保持可见。

我知道这不是 AvalonDock 的问题，是原始设计的不同行为。文档的标签标题并不是要隐藏的，但我认为对于那些想要拥有自己的标题页的人来说会很有趣。此致。

古斯塔沃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:49:32.270

在 2.0 之前的 AvalonDock 版本中，有一个属性可以满足您的需求。它是`DocumentPane.ShowHeader`

在 2.0 中，您要么必须重写整个 DockingManager Style，要么修改 AvalonDock。

我在问题跟踪器中为此创建了一个问题，并附上了一个补丁，您可以下载该补丁以再次使用。

此补丁是针对先前版本制作的，如果将其应用于当前版本，可能需要进行一些调整。此外，它不处理此后发布的新主题。

[http://avalondock.codeplex.com/workitem/15626](http://avalondock.codeplex.com/workitem/15626)

修补：

```
Index: AvalonDock/AvalonDock.Theme.VS2010/Theme.xaml
===================================================================
--- AvalonDock/AvalonDock.Theme.VS2010/Theme.xaml   (revision 96146)
+++ AvalonDock/AvalonDock.Theme.VS2010/Theme.xaml   (working copy)
@@ -93,7 +93,9 @@
                         </Grid.RowDefinitions>
                         <!--Following border is required to catch mouse events-->
                         <Border Background="Transparent" Grid.RowSpan="2"/>
-                        <Grid  Panel.ZIndex="1">
+                        <Grid Grid.Row="0" 
+                              Visibility="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type avalonDockControls:LayoutDocumentPaneControl}}, Path=Model.ShowHeader, Converter={StaticResource BoolToVisibilityConverter}}"  
+                              Panel.ZIndex="1">
                             <Grid.ColumnDefinitions>
                                 <ColumnDefinition/>
                                 <ColumnDefinition Width="Auto"/>
Index: AvalonDock/AvalonDock.Themes.Aero/Theme.xaml
===================================================================
--- AvalonDock/AvalonDock.Themes.Aero/Theme.xaml    (revision 96146)
+++ AvalonDock/AvalonDock.Themes.Aero/Theme.xaml    (working copy)
@@ -38,7 +38,9 @@
                         </Grid.RowDefinitions>
                         <!--Following border is required to catch mouse events-->
                         <Border Background="Transparent" Grid.RowSpan="2"/>
-                        <Grid  Panel.ZIndex="1" >
+                        <Grid Grid.Row="0"
+                              Visibility="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type avalonDockControls:LayoutDocumentPaneControl}}, Path=Model.ShowHeader, Converter={StaticResource BoolToVisibilityConverter}}"
+                              Panel.ZIndex="1" >
                             <Grid.ColumnDefinitions>
                                 <ColumnDefinition/>
                                 <ColumnDefinition Width="Auto"/>
Index: AvalonDock/AvalonDock/Layout/LayoutDocumentPane.cs
===================================================================
--- AvalonDock/AvalonDock/Layout/LayoutDocumentPane.cs  (revision 96146)
+++ AvalonDock/AvalonDock/Layout/LayoutDocumentPane.cs  (working copy)
@@ -49,6 +49,27 @@
             return true;
         }

+        #region ShowHeader
+        private bool _showHeader = true;
+
+        public bool ShowHeader
+        {
+            get
+            {
+                return _showHeader;
+            }
+            set
+            {
+                if (value != _showHeader)
+                {
+                    this._showHeader = value;
+                    RaisePropertyChanged("ShowHeader");
+                }
+            }
+        }
+
+        #endregion
+
         #region SelectedContentIndex

         private int _selectedIndex = -1;
Index: AvalonDock/AvalonDock/Themes/generic.xaml
===================================================================
--- AvalonDock/AvalonDock/Themes/generic.xaml   (revision 96146)
+++ AvalonDock/AvalonDock/Themes/generic.xaml   (working copy)
@@ -28,7 +28,9 @@
                         </Grid.RowDefinitions>
                         <!--Following border is required to catch mouse events-->
                         <Border Background="Transparent" Grid.RowSpan="2"/>
-                        <Grid  Panel.ZIndex="1">
+                        <Grid Grid.Row="0"
+                              Visibility="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type avalonDockControls:LayoutDocumentPaneControl}}, Path=Model.ShowHeader, Converter={StaticResource BoolToVisibilityConverter}}"
+                              Panel.ZIndex="1">
                             <Grid.ColumnDefinitions>
                                 <ColumnDefinition/>
                                 <ColumnDefinition Width="Auto"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T11:52:45.103

在当前版本中，您可以添加此代码来隐藏文档的标题：

```
<xcad:DockingManager.DocumentTitleTemplate>
    <DataTemplate>
        <Grid/>
    </DataTemplate>
</xcad:DockingManager.DocumentTitleTemplate> 
```

# google-chrome - Chrome中的透明圆形边框

> ID：13139827
> 
> 赞同：5
> 
> 时间：2012-10-30T13:15:54.117
> 
> 标签：google-chrome, border, transparent

我必须使 div 的圆形边框透明。这是代码

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Test</title>
    <style>

    body
    {
        background-color: green;
    }

    #demobtn
    {
        height: 10%;
        width: 18%;
        left: 50%;
        top: 50%;
        border: solid;
        border-width: 4px;
        border-color: rgba(0, 0, 0, 0.5);
        -webkit-border-radius: 18% / 50%;
        border-radius: 18% / 50%;
        background-color: white;
        -webkit-background-clip: content;
        background-clip: content-box;
        margin: 0.25%;
        padding: 0%;
        position: relative;
    }

    </style>
</head>
<body>
    <div id="demoBtn"></div>
</body> 
```

它在 Firefox 中完美运行，而 Chrome 不能以正确的方式管理角落的透明度。这是结果：

![在此处输入图像描述](../Images/487ac87b7e6eda2840256ef5e94ac2c7.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:00:11.317

嗯。我不太确定。但是你也许可以做一个模仿同样事情的双 div。

```
# HTML
<div id="lightbox-border">
    <div id="lightbox">
        Content here.
    </div>
</div>​

# CSS
body {
    margin:50px;
    background-color:green;
}

#lightbox-border {
    background: rgba(0, 0, 0, 0.3);
    padding: 20px; /* This is somewhat the border */
    border-radius: 15px;
}

#lightbox {
    background-color: white;

    border-radius: 10px;
    padding: 15px;
}
​ 
```

我在这里做了一个小提琴[http://jsfiddle.net/index/2K5GK/](http://jsfiddle.net/index/2K5GK/)

# java - 将 PDF 打印到网络打印机

> ID：13139828
> 
> 赞同：0
> 
> 时间：2012-10-30T13:15:55.457
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中未映射的网络打印机上打印 PDF？](https://stackoverflow.com/questions/6441063/how-to-print-a-pdf-on-an-unmapped-network-printer-in-java)

我知道打印机 ip 地址，并且打印机在网络中。如何将 JAVA 中的 PDF 文档打印到该打印机。请发送示例代码。

我真的很感谢你在这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:27:33.747

您应该尝试 PDF 渲染器。这将帮助您打印 PDF 文档。

您可以在其中找到 PDF-Renderer 类的来源：http: [//java.net/projects/pdf-renderer/sources/svn/content/trunk/src/com/sun/pdfview/PDFRenderer.java ?rev=140](http://java.net/projects/pdf-renderer/sources/svn/content/trunk/src/com/sun/pdfview/PDFRenderer.java?rev=140)

有人问过类似的问题。这个有代码： [Java PDF Viewer](https://stackoverflow.com/questions/4437910/java-pdf-viewer)

对于代码： [http ://www.idrsolutions.com/how-to-print-pdf-files-in-java/](http://www.idrsolutions.com/how-to-print-pdf-files-in-java/)

最后一件事。至少自己做一些工作。不要每次都这样。展示一些作品，以便我们知道您在寻找什么。你不看规则吗？

# javascript - 根据 Fragment ID 调用 javascript 函数

> ID：13139834
> 
> 赞同：0
> 
> 时间：2012-10-30T13:16:20.213
> 
> 标签：javascript, function, web, fragment-identifier

请不要问我为什么要这样做，我只想知道当且仅当存在特定片段 ID 时是否可以调用 javascript 函数。谢谢 ：）

（是的，这与我之前的问题相关联，但它太不相似了，无法附加到它上面）如果这是不可能的，是否还有另一种基于 URL 调用 javascript 函数的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:18:37.157

是的。当然是的。您可以获取片段，检查其值，然后在匹配时调用函数。

```
if (window.location.hash == "#myfragment") {
    myFunction();
} 
```

# ruby-on-rails-3 - rails 自定义验证器似乎不起作用

> ID：13139839
> 
> 赞同：0
> 
> 时间：2012-10-30T13:16:36.643
> 
> 标签：ruby-on-rails-3, model, relationship, validation

我写了一个自定义验证器，它位于 lib/readiness_for_completion_validator.rb 中：

```
class DisruptionTimeValidator < ActiveModel::Validator
  def validate(record)
    # if record.timeline.events[0].event_time > record.timeline.events[1].event_time 
    if true 
      record.errors[:Outage] << " end time needs to be after outage begin time" 
    end
  end
end 
```

问题是，如果我用“if true”代替注释掉的行，我永远无法触发它。

我在rails控制台中测试了这个条件，它完全按照我想要的方式工作，但它在验证器中永远不会评估为真......

任何帮助将不胜感激，我花了很多时间研究这个，这让我发疯:(

我有一个包含许多事件的时间线。人们可以根据事件调整 event_time，但每个时间线包含两个需要连续发生的特殊事件。

请在下面找到我在 app/models/event.rb 中的内容：

```
class Event < ActiveRecord::Base
  attr_accessible :event_description, :event_time, :timeline_id

  belongs_to :timeline

  validates :event_description, :length => { :in => 10..255 }

  validates_with DisruptionTimeValidator, :on => :update

end 
```

（我搞砸了 :on 但没有任何区别）

任何帮助将不胜感激，

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:57:07.920

我想通了......我的验证器是正确的，我通过在我的控制器中对事件进行排序然后保存时间线来搞砸事情......所以当新事件被添加时，事件 [0] 和事件 [1] 正在获取被其他事件取代...

# r - 在 r 中粘贴、按和 data.table

> ID：13139848
> 
> 赞同：7
> 
> 时间：2012-10-30T13:17:13.427
> 
> 标签：r, data.table

我正在尝试从重塑的数据集中粘贴字符串。我正在使用 data.table 包如下：

```
m<-data.frame(x=rep(c("a","b"),20),y=factor(sample(letters,40,replace=T)))
DT<-data.table(m)
setkey(DT,x)
DT[,paste(y,sep=","),by=x] 
```

然而，这只给出了一个与原始帧完全相同的新帧，除了变量名。我希望输出是两个连接的向量，其中变量粘贴在一起。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T14:05:47.633

为了完整起见，官方回答：

如果您改用`paste(y,collapse=",")`它，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-12T10:05:06.187

该`toString(y)`函数产生的结果与 相同`paste(y, collapse = ", ")`，我用它来代替较长的粘贴版本。所以

```
DT[, toString(y), by = x] 
```

会产生结果

```
#   x                                                         V1
#1: a v, o, q, p, t, c, y, d, n, r, o, k, v, r, t, n, e, f, g, u
#2: b y, j, t, l, w, r, s, w, b, x, h, j, o, k, a, c, r, c, b, e 
```

这与粘贴相同

```
DT[, paste(y, collapse = ", "), by = x] 
```

# javascript - 这是三进制还是按位？

> ID：13139851
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:17:21.150
> 
> 标签：javascript

谁能解释一下这条线是如何工作的。

```
 a & 3 || (b, c) 
```

第一部分是否翻译为：

```
 a = a & 3; 
```

或者那是一个三元代码，如果返回真 b，否则 c？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:20:05.683

我认为第一部分是按位和 3。如果这是真的，请返回。

否则，它将`c`基于逗号运算符返回。

```
if (a & 3 != false)
   return a & 3;
else
   return c; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:22:09.780

那不是三元运算符。工作方式`a || b`是`a`被评估，如果`a`强制返回`true`则`a`返回，否则`b`被评估并返回。`&`是按位与。表达式的第二部分意义不大，但我相信它会返回`c`.

所以意思是：“如果按位和 3 不是 0 则返回那个，否则返回 c”。从这个意义上说，它的行为确实有点像三元运算符......并且`a`保持不变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T13:22:50.877

如果二进制写入的最后两位之一`a`是“1”，则返回`a&3`。

相反，`a & 3`是 0，所以返回`(b, c)`，即`c`。

它的作用似乎很清楚，但我无法想象为什么......

如果 a 是正整数，则可以写为

```
a%4||c 
```

这清楚地表明了操作的周期性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T13:20:41.353

（术语说明：在`1 + 2`中，1 和 2 是“操作数”，+ 是“运算符”）

该表达式 ( `&`) 中的第一个运算符是按位“和”：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)

第二个运算符 ( `||`) 是一个逻辑“或”，如果第一个操作数为真（如果它通过`if`检查），则返回第一个操作数，否则返回第二个操作数。

第三个 ( `,`) 是逗号运算符，它只返回第二个操作数。

`a`所以，用简单的英语：取with的按位“与” `3`（二进制为 11），这意味着结果值将是 0、1、2 或 3 之一，具体取决于`a`. 如果它不为零，则返回该值。否则，返回`c`，但`b`也将被评估。

例如，如果`a`是 2，那么`a & 3`将是 10 & 11 == 10（因为 1 & 1 == 1 和 0 & 1 == 0），即 2 和真（唯一的假数是 0 或 0.0），所以这将是整个表达式的返回值，`b`甚至`c`不会被评估。另一方面，如果`a`是 4，那么`a & 3`将是 100 & 11 == 000，这是假的，所以`(b, c)`将被评估，结果将`c`是返回值。

# castle-windsor - Castle Windsor 对基于程序集清单的依赖项有什么要求？

> ID：13139852
> 
> 赞同：2
> 
> 时间：2012-10-30T13:17:22.473
> 
> 标签：castle-windsor, castle

更新：我没有提到，我使用的是 Castle 版本 2.5.1.0（有许多依赖项意味着我们没有使用更新的东西）

我一直在使用许多利用 Castle Windsor 的框架，并且很幸运。在某些情况下，由于缺少一些参考，我遇到了尝试从 AppConfig 安装时遇到异常的情况。据我所知，当我执行`container.Install(Configuration.FromAppConfig());`Castle 之类的操作时，会加载配置文件中注册的所有组件。从每个包含已注册组件的程序集中，我相信 Castle 将检查该程序集的清单，然后加载这些程序集，并以这种方式继续，直到加载所有必需的程序集。

这导致了我遇到的问题。我使用单元测试编写了一些代码。代码使用 Configuration.FromAppConfig() 方法加载多个组件。然后在需要时按名称解析组件。单元测试工作正常。当我在 MVC 控制器中调用此代码时，我开始在调用 Configuration.FromAppConfig() 时遇到错误。这是一些示例代码：

这是一个简化版本，但说明了问题：

```
public interface IAuthorizer2
{
    string Url { get; set; }
}

public class Foo : IAuthorizer2
{
    public string Url { get; set; }
} 
```

这是 web.config 中的组件：

```
 <component id="MessageManagerAdmins" service="MsmqManager.Areas.MessageManager.Controllers.IAuthorizer2"
type="MsmqManager.Areas.MessageManager.Controllers.Foo"/> 
```

在我的控制器操作中，我调用：

```
var container = new WindsorContainer();
container.Install(Configuration.FromAppConfig()); 
```

我得到以下异常：（为了完整起见，我将整个内容包括在内）

```
 Could not load file or assembly 'Spatial4n.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=9f9456e1ca16d45e' or one of its dependencies. The system cannot find the file specified.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileNotFoundException: Could not load file or assembly 'Spatial4n.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=9f9456e1ca16d45e' or one of its dependencies. The system cannot find the file specified.

Source Error: 

Line 100:        {
Line 101:            var container = new WindsorContainer();
Line 102:            container.Install(Configuration.FromAppConfig());

Source File: c:\Prj\AA\Source\Development\Web\MessageManager\Source\MessageManager\Areas\MessageManager\Controllers\MessageController.cs    Line: 102 

Assembly Load Trace: The following information can be helpful to determine why the assembly 'Spatial4n.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=9f9456e1ca16d45e' could not be loaded.

=== Pre-bind state information ===
LOG: User = ARCHSTONE\tstappaa
LOG: DisplayName = Spatial4n.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=9f9456e1ca16d45e
 (Fully-specified)
LOG: Appbase = file:///C:/Prj/AA/Source/Development/Web/AssociatePortal/Source/AssociatePortal/
LOG: Initial PrivatePath = C:\Prj\AA\Source\Development\Web\AssociatePortal\Source\AssociatePortal\bin
Calling assembly : Lucene.Net.Contrib.Spatial, Version=2.9.1.2, Culture=neutral, PublicKeyToken=85089178b9ac3181.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Prj\AA\Source\Development\Web\AssociatePortal\Source\AssociatePortal\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: Spatial4n.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=9f9456e1ca16d45e
LOG: The same bind was seen before, and was failed with hr = 0x80070002. 
```

它正在寻找 Spatial4n.Core 程序集。我以前从未听说过这个大会。我将其追溯到：该站点使用 RavenDB Raven.Database 程序集引用 Spatial4n.Core。

我可以理解为什么 Castle 会尝试解析由于解析组件而可能调用的所有程序集。但是，如果您查看我正在使用的接口/类的定义，这里没有任何依赖关系。我知道我可以下载 Spatial4n.Core 程序集的副本，以及所需的所有其他程序集，但我想了解如何正确配置容器以避免此问题。

我的问题：

*   有没有更好的方法来填充容器/注册组件，以便我可以按类型和名称解析它们（即 container.Resolve("componentName"))
*   有没有办法告诉 Castle 不要解决所有可能的程序集引用？
*   我在城堡项目网站和其他地方做了很多搜索。我还没有找到任何有关 Castle 如何解析这些程序集引用的信息。它主要是关于配置容器的更基本的功能。您能否推荐更深入的文档，我可以在其中了解更多信息？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:05:03.753

这不完全是 Windsor 的行为，而是 System.Reflection。加载程序集时，不会加载依赖项，但是由于您使用的是“AllTypes”，这意味着将加载包括私有类型在内的每个类型（通过反射），并提示加载程序解决依赖项。

避免这种情况的方法是使用显式注册 Component.For<> 等...

WRT 按名称解析，默认使用完整的类型名称作为键（命名空间+类型名称）

文档薄弱，但源代码并不太复杂。还有很多博客文章。

高温高压

# java - 使用 SWIG 将 char * 类型结构的成员转换为 Java 中的 java.lang.Object

> ID：13139855
> 
> 赞同：2
> 
> 时间：2012-10-30T13:17:25.300
> 
> 标签：java, swig

我正在尝试将 char * 类型结构的成员转换为 Java 生成类中的 java.lang.Object 。我想这样做是因为我想将整数和字符串类型的对象传递给它。有可能这样做吗？

例如我有以下结构：

```
typedef struct Foo
{
    int type;
    char * data;
} Foo; 
```

`type`成员用于确定成员的数据类型-`data`整数或字符串。

在生成的 Foo 结构的 Java 类中，我想要一个 set 方法（用于`data`成员），我可以在其上传递 String 和 Integer 类型的参数。在将 String 和 Integer 对象传递给 set 方法之前，我可以将它们转换为一些方便的数据类型，例如 byte[]。我只想设置方法而不是获取方法。然后在 C 代码中，我必须根据`type`成员使用传递的 Integer 或 String 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:05:35.790

没有办法直接做你被要求做的事情。这是因为在 Java 中，您不能将 java.lang.Object 强制转换为 int、Integer 或 String。

也就是说，您可能需要做的是将字节数组传递给 Java，并在 Java 世界中实现一些“反序列化”函数，该函数 - 根据类型字段 - 从该字节数组生成 int 或 String 。

我不知道通过 JNI 传递字节数组的实际含义。但我认为这应该留给另一个问题。

# php - 如何在底部打开网页并自动滚动到顶部，以便向用户显示所有内容？

> ID：13139861
> 
> 赞同：-3
> 
> 时间：2012-10-30T13:17:41.413
> 
> 标签：php, jquery, dreamweaver

我有一个很长的 div 容器，其中包含所有必要的数据。在我让他/她浏览页面之前，我想向打开它的用户显示所有内容。

更准确地说，我想让我的网站在底部打开，然后自动滚动到顶部，以便快速显示所有数据的概览。

关于如何做的任何想法？

如果我需要 PHP 或 Jquery，请说明将代码放在哪里，我是新手。谢谢！

我试图用锚来做到这一点，但它们只是跳到某个点——这不是我需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:22:11.200

这听起来不是一个好主意，但这取决于你！

```
$(function() {
    $(window).scrollTop(window.scrollHeight).animate({scrollTop : 0 } , 1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:20:52.633

好吧，如果您已经从页面底部开始。

```
 $("html, body").animate({ scrollTop: 0 }, "slow"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:29:58.650

如果你想滚动到一个特定的 div...使用像[ScrollTo这样的插件](http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html)

# delphi - 如何使用 Delphi 读取 Windows 事件日志的内容

> ID：13139865
> 
> 赞同：2
> 
> 时间：2012-10-30T13:17:53.680
> 
> 标签：delphi

是否有允许您读取 Windows 事件日志的类或函数。这是您打开 **eventvwr.msc**时看到的日志。理想情况下选择一个特定的日志（在我的例子中是**Windows Log下的****Applications**日志），并在日期和来源上放置过滤器。

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:13:37.140

您可以使用[`Win32_NTLogEvent`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394226%28v=vs.85%29.aspx)WMI 类来读取 Windows 日志的内容。

试试这个样本

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils,
  ActiveX,
  ComObj,
  Variants;

procedure  GetLogEvents;
const
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject   : OLEVariant;
  oEnum         : IEnumvariant;
  iValue        : LongWord;
begin;
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer('localhost', 'root\CIMV2', '', '');
  FWbemObjectSet:= FWMIService.ExecQuery('SELECT Category,ComputerName,EventCode,Message,RecordNumber FROM Win32_NTLogEvent  Where Logfile="System"','WQL',wbemFlagForwardOnly);
  oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  while oEnum.Next(1, FWbemObject, iValue) = 0 do
  begin
    Writeln(Format('Category          %s',[String(FWbemObject.Category)]));
    Writeln(Format('Computer Name     %s',[String(FWbemObject.ComputerName)]));
    Writeln(Format('EventCode         %d',[Integer(FWbemObject.EventCode)]));
    Writeln(Format('Message           %s',[String(FWbemObject.Message)]));
    Writeln(Format('RecordNumber      %d',[Integer(FWbemObject.RecordNumber)]));
    FWbemObject:=Unassigned;
  end;
end;

begin
 try
    CoInitialize(nil);
    try
      GetLogEvents;
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

有关更多示例，请尝试此博客条目[`WMI Tasks using Delphi – Event Logs`](http://theroadtodelphi.wordpress.com/2011/10/27/wmi-tasks-using-delphi-%E2%80%93-event-logs/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T17:51:42.113

使用该[`ReadEventLog()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363674.aspx)函数读取事件日志。有关示例，请参见 MSDN：

[查询事件信息](http://msdn.microsoft.com/en-us/library/windows/desktop/bb427356.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T13:52:19.320

[JVCL](http://sourceforge.net/projects/jvcl/)包含一个名为的组件`JvNTEventLog`，它可以打开和操作 Windows 事件日志。**

# c# - MSCRM Dll ILMerge

> ID：13139866
> 
> 赞同：1
> 
> 时间：2012-10-30T13:17:59.517
> 
> 标签：c#, c#-4.0, dynamics-crm, dynamics-crm-4, ilmerge

我可以将（ILMerge）.net 框架版本 4.0 dll 与 3.5 合并吗？

我需要 3.5 中的合并版本 dll，因为我的 mscrm 4.0 插件仅支持 3.5 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:50:08.830

.NET 4.0 和 .NET 3.5 在不同版本的 CLR 上运行。3.5 构建在 2.0 CLR 之上，.NET 4.0 在 4.0 CLR 上运行。因此，您将无法合并两者。CRM 2011 在使用 CRM 2011 SDK 时支持 .NET 4.0 代码，在使用 CRM 4 SDK 时支持 .NET 3.5 代码（为了向后兼容）。如果您正在使用 CRM 2011，我建议您将代码转换为 .NET 4.0，如果您正在为 CRM 4 编写代码，我建议您坚持使用 .NET 3.5。

也许如果您提供更多关于您为什么要这样做的信息，我可以提供更好的答案。

# arm - PLD指令的使用

> ID：13139872
> 
> 赞同：5
> 
> 时间：2012-10-30T13:18:13.287
> 
> 标签：arm, cpu-cache, mmu, cortex-a8

我对 ARM cortex A8 中 PLD 指令的使用有一些疑问。当我在循环内使用指令时，可能会出现超出范围的内存访问。我怀疑这是否会导致分段错误。我在[ARM 手册中读到，其中指出](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0338g/Chdfgbii.html)

> 由于所有级别的高速缓存都将 PLD 指令作为任何其他加载指令来处理，因此 PLD 指令遵循标准的数据依赖规则和逐出程序。在 PLD 执行的任何阶段，如果发生地址转换错误、高速缓存命中或中止，PLD 指令将被忽略。

因此，如果进行了越界内存访问，相应的 PLD 指令是否会被忽略是我的疑问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:33:39.717

PLD 指令不会产生分段错误。如果 PLD 要求内存系统访问一个不存在的内存区域，它会被忽略。

来自 ARM

> > Preload 指令是提示，因此实现可以将它们视为 NOP，而不会影响设备的功能行为。**这些指令不会产生同步数据中止异常**，但内存系统操作可能会在异常情况下产生异步中止。
> > 
> > ...
> > 
> > 但是，由于这些内存系统提示之一而执行的内存操作可能会触发异步事件，从而影响处理器的执行。可能触发的异步事件的示例是异步中止和中断。

# c# - 如何使用 SSRS 表达式

> ID：13139874
> 
> 赞同：0
> 
> 时间：2012-10-30T13:18:14.283
> 
> 标签：c#, regex, html-encode

我正在使用表达式替换文本，如下所示：

```
RegularExpressions.Regex.Replace("&nbsp;&nbsp;&nbsp;&lt;Test&gt;", @"&(.|\n)*?;", " "); 
```

这给出了结果 `Test` 但我想要`result <Test>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:30:42.350

为什么不简单地这样做呢？

```
string result = HttpUtility.HtmlDecode(input).Trim(); 
```

`Trim`如果您想保留这些空间，请忽略。

# haskell - 从 Haskell 的核心中删除带有重复分支的“案例”

> ID：13139875
> 
> 赞同：12
> 
> 时间：2012-10-30T13:18:18.747
> 
> 标签：haskell, core, repa

我有一段 Haskell 代码，如下所示：

```
fst . f $ (Z :. i `div` 2) 
```

`Z`并`:.`取自[Repa](http://hackage.haskell.org/package/repa-3.2.2.2)库，定义如下：

```
data Z = Z deriving (Show, Read, Eq, Ord)
infixl 3 :. 
data tail :. head = !tail :. !head deriving (Show, Read, Eq, Ord) 
```

表达式 right`$`定义了一个数组索引，而 while`f`是一个接受该索引并返回一对的函数。这编译为以下核心：

```
case f_a2pC
       (case ># x_s32E 0 of _ {
          False ->
            case <# x_s32E 0 of _ {
              False -> :. Z (I# (quotInt# x_s32E 2));
              True -> :. Z (I# (-# (quotInt# (+# x_s32E 1) 2) 1))
            };
          True ->
            case <# x_s32E 0 of _ {
              False -> :. Z (I# (quotInt# x_s32E 2));
              True -> :. Z (I# (-# (quotInt# (+# x_s32E 1) 2) 1))
            }
        })
of _ { (x1_a2Cv, _) ->
x1_a2Cv
} 
```

对我来说，中间 case 语句（带有 as scrutinee 的语句）似乎很明显（也许是错误的`># x_s32E 0`）是多余的，因为两个分支是相同的。我能做些什么来摆脱它吗？我使用 Repa 文档中推荐的 GHC 选项编译我的代码：-O2 -Odph -fno-liberate-case -funfolding-use-threshold1000 -funfolding-keeness-factor1000

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T14:16:13.157

事实上，这两个分支`case ># x_s32E 0 of`是相同的，因此这`case`是多余的。在两个分支变得相同之后，似乎`case`没有运行相同分支的 -elimination - 可能值得一个错误报告。[这个](http://hackage.haskell.org/trac/ghc/ticket/7360)可能是相关的，但由于为负除数生成的核心很好，我提交了一个[新的错误](http://hackage.haskell.org/trac/ghc/ticket/7378)。

使用更简单的`quot`- 如果`i`不能合法地否定 - 直接映射到机器除法运算符使代码更简单，因此不需要为此生成分支。

# jquery - jquery动画高度向上

> ID：13139876
> 
> 赞同：0
> 
> 时间：2012-10-30T13:18:32.317
> 
> 标签：jquery, jquery-animate

因此，当用户向下滚动到页面的某个部分时，我希望 div 向上动画（从底部到顶部）。

问题是我只能让它从上到下制作动画，我想相反的会很容易，显然不是。

```
$(document).scroll(function() {    
    var scroll = $(window).scrollTop();

    if (scroll >= 1700) {
        $(".usersuk").animate( 
            { height:"400px" }, 
            { queue: false, duration: 1000 }
        );
    } 
    else {
        $(".usersuk").animate( 
            { height:"0px" }, 
            { queue: false, duration: 1000 }
        );
    }
}); 
```

另外，有没有比使用 var scroll 更好的方法来为用户可见的东西制作动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:11:16.117

好的，从下到上制作动画，这很容易。您所要做的就是将父容器设置为 position: relative 并将动画容器设置为 position: absolute 和 BOTTOM: 0。它当然会留在父 DIV 的底部。您可以对动画容器内的对象使用一些“溢出：隐藏”来微调动画。

最后，如果真的想在“sight”（窗口中的元素）上触发事件，则需要考虑滚动位置、窗​​口高度、对象位置和对象高度。这很容易，但如果你习惯插件，你可以检查“ [inview plugin](https://github.com/protonet/jquery.inview) ”。我已经用过那个插件了，而且效果很好。希望这可以帮助

# asp.net-mvc-3 - 空引用 MVC3

> ID：13139881
> 
> 赞同：0
> 
> 时间：2012-10-30T13:18:53.677
> 
> 标签：asp.net-mvc-3, reference, null

我的 MVC3 homecontroller 的 Index 方法中有以下代码。我正在尝试的是，从我的资源文件 (.resx) 中获取值并在视图中显示它们。

```
private ResourceManager rm = null;
private ResourcesTexts text;

public ActionResult Index()
{
  text = new ResourcesTexts();
  rm = new ResourceManager("Credit.SiteResources", Assembly.GetExecutingAssembly());
  var res = rm.GetResourceSet(CultureInfo.CurrentCulture, true, true);

foreach (DictionaryEntry resource in res)
{
  if (resource.Key.ToString().Count() == 14)
    {
     string x = resource.Value.ToString();
    text.myList.Add(x);
    }
}

return View(text);
} 
```

调试时出现空引用错误。

有什么帮助吗？

在我看来，我正在尝试这样的事情。

```
@foreach(var x in Model.myList.Item)
{
    <p>@x</p>
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:33:39.853

试试这个：

```
text = new ResourcesTexts();
text.myList = new List<string>(); 
```

或者

`ResourcesTexts`在构造函数中创建列表

# javascript - 如何检索 GET 请求内容的 flashvars？

> ID：13139886
> 
> 赞同：2
> 
> 时间：2012-10-30T13:18:58.843
> 
> 标签：javascript, ruby-on-rails, httprequest, rails-admin

我想将自定义按钮添加到特定模型的 rails_admin 新/编辑页面。

此按钮应将获取请求的内容解析为自定义 URL。

我使用这样的 JQuery 方法发现的当前问题：

```
$('#your_button_id').click(function () {
  $.get('your_url', function(data) {
    //$('.result').html(data); - sample
    //Do whatever you want
    alert('Load was performed.');
  });
}); 
```

是它不加载 flashvars 属性。

我想知道是否还有其他替代方法可以检索包含 flashvars 的全部内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:48:59.107

我不确定您是否只想获取 URL 或对获取请求的响应，所以：

如果你想要网址：

```
$('#your_button_id').click(function () {
  var sPageURL = window.location.search.substring(1);
  //manipulate the url in sPageURL
}); 
```

如果你想要 url 的内容：

```
$('#your_button_id').click(function () {
  $.get('your_url', function(data) {
    //$('.result').html(data); - sample
    //Do whatever you want
    alert('Load was performed.');
  });
}); 
```

参考：

*   [jQuery 加载](http://api.jquery.com/load/)
*   [jQuery 获取](http://api.jquery.com/jQuery.get/)

# freebsd - 来自 FreeBSD 的函数 fallocate() & splice()

> ID：13139888
> 
> 赞同：2
> 
> 时间：2012-10-30T13:19:19.390
> 
> 标签：freebsd, splice

我需要在大文件中间实现添加和删除块 - “打孔”我在 FreeBSD 下`fallocate()`找不到模拟函数。`splice()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:48:23.553

FreeBSD[`posix_fallocate(2)`](http://www.freebsd.org/cgi/man.cgi?query=posix_fallocate&sektion=2&manpath=FreeBSD%208.3-RELEASE)自 8.3 以来就有，但没有`splice()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T19:48:53.260

Roland 对 posix_fallocate() 的看法是正确的。顺便说一句，即使在这里的 Linux 系统（RHEL-5.7）上我也找不到 fallocate()，所以即使在 Linux 上你也真的不想依赖它的存在。

至于 splice()，似乎没有。在 FreeBSD 上最接近的是 sendfile() ——但仅当目标是*socket*时。

# php - 将变量添加到简单的 xml 调用的末尾

> ID：13139889
> 
> 赞同：0
> 
> 时间：2012-10-30T13:19:21.793
> 
> 标签：php, xmlhttprequest

好的，下面是我的代码，调用外部 xml 文件并以 xml 格式返回一些信息，现在如果我手动将值添加到 url 字符串的末尾，这可以完美地工作，但是只要我用变量 $ 替换值reg 它不返回任何结果。

```
$reg = $_POST['reg'];
$file = 'http://testsite.mywebsite.co.uk/app.xml?apikey=*******************&vid=TEST&vrm=$reg';
if(!$xml = simplexml_load_file($file))
 exit('Failed to open '.$file);
print_r($xml); 
```

任何建议将不胜感激，因为我不明白为什么它不起作用，我什至尝试用引号括起来，但仍然没有。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:21:02.600

如果您希望 PHP 解析字符串中的变量，请使用双引号：

```
$file = "http://testsite.mywebsite.co.uk/app.xml?apikey=*******************&vid=TEST&vrm=$reg"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:22:54.320

```
$reg = $_POST['reg'];
$file = 'http://testsite.mywebsite.co.uk/app.xml?pikey=*******************&vid=TEST&vrm='.$reg;
echo "Filename: " . $file; // < --- added this so that you can check the filename is correct
if(!$xml = simplexml_load_file($file)){
 exit('Failed to open '.$file);
}
print_r($xml); 
```

# php - Jquery 使用 utf-8 提交表单

> ID：13139893
> 
> 赞同：0
> 
> 时间：2012-10-30T13:19:48.143
> 
> 标签：php, jquery, html, mysql, ajax

我需要帮助提交表单。

这是我的代码

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>

    <script type="text/javascript">  
  $(document).ready(function(){  
    $("#form").submit(function(event) {  

        /* stop form from submitting normally */  
        event.preventDefault();   

        $.post( \'clase/app/add_meniu.php\', $("#form").serialize(),  
          function( data ) {  
              $("#status").append(data);  
          }  
        );  
      });  
  });  
</script> 
```

这是html

```
<form id="form" method="post" accept-charset="UTF-8" >
         <fieldset>
<p>
        <label>Denumire</label>
        <input class="text-input small-input" type="text" name="text"   maxlength="200" value="">
    </p>
<p>
        <label>Link</label>
        <input class="text-input small-input" type="text" name="link"  maxlength="200" value="">
    </p> 
```

这是 add_meniu.php 代码

```
 require_once('../core/db.php');
$text=$_POST['text'];
    $link=$_POST['link'];
    $limba=$_POST['limba'];
echo'<div class="notification success png_bg">
                <a href="#" class="close"><img src="resources/images/icons/cross_grey_small.png" title="Close this notification" alt="close" /></a>
                <div>
                    Meniul '.$text.' a fost adaugat cu succes
                </div>
            </div>';

$query = "Insert into Meniu (Denumire,Link,ID_Limba)  VALUES ('".$text."','".$link."','".$limba."')";
$result = mysql_query($query)
or die("query failed: " . mysql_error()); 
```

问题是，当我从外部文件“add_meniu.php”插入信息时，在数据库中它不会使用 UTF-8 插入它。我有我的页面、表单和 mysql 表 utf-8，你能给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:38:30.867

首先，强烈建议您检查您的 PHP 文件是否为没有 BOM 的 UTF-8 格式，您可以使用[Notepad++](http://notepad-plus-plus.org/)轻松查看并在必要时进行转换。

我建议检查的其他要点：

**HTML**

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

**PHP**

```
ini_set( 'default_charset', 'UTF-8' );
mb_internal_encoding('UTF-8'); 
```

**MySQL**

```
mysql_query("SET NAMES 'utf8'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:30:30.810

如果您说的是插入到 mysql 数据库中的数据，则必须设置 mysql 将如何显示数据。

在 php 文件中设置数据库连接后使用以下查询：

```
mysql_query("SET NAMES 'utf8'"); 
```

这是在每个连接上完成的，因为它相对于数据库会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:26:45.257

很可能，它是你的数据库。

```
mysql_query("SET NAMES utf8"); 
```

# ruby - 检测方法调用

> ID：13139899
> 
> 赞同：2
> 
> 时间：2012-10-30T13:20:10.010
> 
> 标签：ruby, metaprogramming

我正在尝试在 ruby​​ 中实现惰性方法执行。假设我有一个类有两个方法，调用后不应该立即执行

```
class Foo
  lazy_evaluate :bar, :baz

  def bar(string)
    puts string
  end

  def baz(hash)
    puts hash.inspect
  end
end

f = Foo.new
f.bar('hello world') => nil
f.baz(hello: :world) => nil

f.run_lazy_methods =>
'hello world'
'{:hello=>:world}' 
```

我不想在我的 gem [http://pastie.org/5137463中使用它](http://pastie.org/5137463)

我想知道如何实现这种行为

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:50:29.910

使用委托对象，将调用的方法记录到堆栈上，然后在委托上重放它们。

```
class LazyObject
  def initialize(delegate)
    @invocations = []
    @delegate    = delegate
  end

  def bar(*args, &block)
    @invocations << {
      method: :bar,
      args:   args,
      block:  block
    }
  end

  def baz(*args, &block)
    @invocations << {
      method: :baz,
      args:   args,
      block:  block
    }
  end

  def run_lazy_methods
    @invocations.each do |inv|
      @delegate.send(
        inv[:method],
        *inv[:args],
        &inv[:block]
      )
    end
  end
end

obj = LazyObject.new(RealObject.new)
obj.bar(hello: :world)
obj.baz("Hello World")
obj.run_lazy_methods 
```

您可以使用 更好地编写上述`method_missing`内容，但我想说明一下；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:09:22.110

我发现很难`lazy_evaluate`在相应的方法定义之前允许。当您将其放在相应的定义之后时，我的实现就可以工作。

准备部分是：

```
class Foo
  def initialize
    @queue = []
  end
  def run_lazy_methods
    @queue.each{|proc| proc.call}
  end
  def self.lazy_evaluate *methods
    methods.each do |method|
      alias :"old_#{method}" :"#{method}"
      define_method method do |*args, &pr|
        @queue.push(->{send(:"old_#{method}", *args, &pr)})
      end
    end
  end
end 
```

然后，当您定义方法并调用`lazy_evaluate`时，它们会变得懒惰。

```
class Foo
  def bar(string)
    puts string
  end
  def baz(hash)
    puts hash.inspect
  end

  lazy_evaluate :bar, :baz
end 
```

你会得到预期的结果。

```
f = Foo.new
f.bar('hello world')
f.baz(hello: :world)
f.run_lazy_methods 
```

# arrays - 帕斯卡：按数字读取输入数字

> ID：13139905
> 
> 赞同：2
> 
> 时间：2012-10-30T13:20:41.907
> 
> 标签：arrays, integer, permutation, pascal

简单的问题，但奇怪的是我还没有找到任何简单的解决方案：我想将输入“1234”（不带引号）存储到数组中，以便每个数字作为整数存储到单独的位置（即 array[1] 将等于 1 等）。

顺便说一句（它可能会有所帮助，或者可能对不同的解决方案提出建议），我正在处理一些简单的排列操作（字典顺序等），所以我想单独操作这些数字。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:29:14.623

```
Var
s           :String;
myArray : Array[1..20] of Boolean;
code    :integer
Begin
s := "1234";
For i := 1 to length(s) do
 Begin
  Val(s[i], myArray[i], code);
 End;
End. 
```

# c# - 通过 IEnumerable 扩展方法进行 C# LINQ 调试

> ID：13139908
> 
> 赞同：4
> 
> 时间：2012-10-30T13:20:44.917
> 
> 标签：c#, linq, debugging

我正在尝试逐步执行以下我称为 DumpIt 的 IEnumerable 扩展方法。调试器不会单步执行它。如何让调试器单步执行此扩展方法？

我的单元测试：

```
[Test]
        public void TestDumpIt()
        {
            var words =
                new string[] {"   KOOKABURRA", "Frogmouth", "kingfisher   ", "loon", "merganser"};

            var result = words
                .DumpIt(d => "original: " + d)
                .Select(word => word.Trim())
                .DumpIt(d => "trimmed: " + d)
                .Select(word => word.ToLower())
                .DumpIt(d => "lower cased: " + d)
                .Where(word => word.StartsWith("k"))
                .DumpIt(d => "starts with k: " + d)
                .OrderBy(word => word)
                .DumpIt(d => "orderd: " + d);
        } 
```

扩展方法：

```
public static IEnumerable<T> DumpIt<T>(this IEnumerable<T> input,
    Func<T, string> toString
    )
{
    foreach (var item in input)
    {
        Output.ActivePane.Activate();
        Output.ActivePane.OutputString(
            ShowWhiteSpace ? '[' + toString(item) + ']' : toString(item));

        yield return item;
    }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T13:48:49.140

使用时`yield`，您正在使用延迟执行。您正在使用的其他 LINQ 方法也使用延迟执行。`result`在您开始枚举in之前，实际上不会调用 DumpIt 方法`TestDumpIt`。如果你想看到代码被调用，你需要枚举可枚举的。例如，您可以`result.ToList()`在末尾添加一个来强制枚举。

# iphone - 在文本字段上崩溃单击 iOS 6.0 和 xcode 4.5

> ID：13139912
> 
> 赞同：1
> 
> 时间：2012-10-30T13:20:56.657
> 
> 标签：iphone, objective-c, ios, uitextfield, uitextview

我制作了一个关于图片评级的应用程序。它在 iOS 5 上运行良好。今天，我已经开始更新整个代码并使其与 iPhone 5 兼容。一些 XIB 已经更新，但现在每当我点击 uitextfield 时我都会崩溃，但所有 uibutton 操作都运行良好。我刚刚将 XIB 更改为 iPhone Retina 4.0 显示屏。如果有人对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:01:36.030

只需确保UITextField**的“自动更正”、“自动大写”和“检查拼写”**属性在代码中设置为其默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:57:18.980

在单击文本字段时执行的代码中放置一个断点并查看它在哪里崩溃。然后，您可以在此处发布代码以获取想法。

# php - 在 codeigniter 中出现此错误

> ID：13139914
> 
> 赞同：-5
> 
> 时间：2012-10-30T13:21:03.280
> 
> 标签：php, arrays, codeigniter

> ## 遇到 PHP 错误
> 
> **严重性：**警告
> 
> **消息：** `in_array()`期望参数 2 是数组，给定的布尔值
> 
> **文件名：** models/main_model.php
> 
> **行号：** 1386

第 1386 行是：

```
$pcode_id=$this->get_postcode_id($value);
$myarr=unserialize($in_search);
if(in_array($pcode_id,$myarr)) // line 1386
{
    return $myarr;
}
else
{
    return false;
} 
```

结果仍然显示，但出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:25:20.943

显然 $myarr 在某些时候不是一个数组......你可以 var_dump($myarr); 并运行你的代码，看看它在什么时候不是一个数组。

但是你应该在尝试 in_array 之前先检查 $myarr 是否是一个数组。

```
if (is_array($myarr) && in_array($pcode_id, $myarr)) {
  return $myarr;
}
else {
  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:24:00.283

您的`myarr`变量不是数组。这意味着您在方法中抛出的字符串`unserialize`实际上不是`serialized array`

# cordova - PhoneGap 和 JQ Mobile：链接外部页面的特定部分

> ID：13139922
> 
> 赞同：0
> 
> 时间：2012-10-30T13:21:24.317
> 
> 标签：cordova, jquery-mobile

我有两个页面，它们是 index.html（有几个部分，如#home 和 #level）和 collection.html（#collection）。当我在 collection.html 中时，我需要导航回 index.html#level 部分，它说“发生网络错误”。有时它工作，有时发生错误......

**集合.html**

```
<a href="index.html#level" rel="external" data-role="button" data-icon="back" >Back</a> 
```

我正在使用带有phonegap的Jquery mobile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:17:43.810

Jquery Mobile 覆盖了标准`#anchor`行为。当导航到 时`#anchor`，它期望有一个带有 Id 的页面 DOM 元素`anchor`，并将转换到该页面。如果你想要一个更标准的行为，你可以`data-ajax="false"`在你`<a>`的禁用标准 ajax 导航模型（不推荐）。更多信息可[在此处获得](http://jquerymobile.com/demos/1.0.1/docs/pages/page-links.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:31:59.400

要注意的一件事是在某些设备上，路径区分大小写。在模拟器中运行时，您不会注意到它。确保你正确地将你的hrefs 设置为文件名的那些。

# mongodb - MongoDB 是否可以进行此文本搜索（加扰文本 = 英文单词）

> ID：13139923
> 
> 赞同：0
> 
> 时间：2012-10-30T13:21:28.870
> 
> 标签：mongodb, mongodb-query

我正在寻找如何使用此条件或参数在 Mongodb 上构建查询的方法。

*例如，输入文本是“rtab”，会产生“brats”、“bart”等。*

我不知道这种搜索方法的术语是否有任何我希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:34:18.240

它本身不是受支持的，但您可以通过构建一个索引来实现这一点，该索引采用输入词“brats”和“brats”，对它们进行排序，使它们成为“abrst”和“abrs”，并构建一个包含以下内容的查找索引：

```
stem: "abrst", matches: ["brats"]
stem: "abrt",  matches: ["brat", "bart"] 
```

然后，在搜索“brat”时，对其中的字母进行排序，得到“abrt”，然后执行搜索：

```
db.lookups.find({stem: /^abrt/}) 
```

返回的所有文档都应包含以您输入的单词开头的单词。这应该工作，虽然它是相当基本的。像 Solr 索引器这样的基于特殊的搜索引擎可能会做得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:18:37.117

您在这里遇到的最大问题是您的单词拼写错误。

词干不会解决它。词干只会将“树”转换为“树”等。没有语言库（可靠的）可以为您解决这个问题。

这实际上是搜索技术中的一个黑点。Google 在其应用程序（电子邮件等）中使用从各种来源收集的单词的搜索索引来形成字典，以在自动完成模式下为您（希望）在搜索框中提供正确的拼写，但是除非搜索，否则他们不会自动更正您的单词术语很像一个更流行的短语。

Mongo 中没有任何功能，无论是通过`$where`MR 还是基于数组的单词集都允许这样做。

您可以通过以下方式解决此问题：该单词`abrt`类似于`bart`您放置单词列表并在另一个索引上查询类似单词的列表（例如 geoNear 类型的单词命令）以搜索相似但不准确的结果. 这基本上复制了其他人的做法，它不是一门精确的科学，但在大多数情况下都应该有效。

通过对单词进行排序来解决这个问题的主要问题是，有时您有数百种拼写错误的组合，因此它可能无法很好地扩展。

至于使用 Mongo 进行全文搜索，此链接非常有用：[http](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo) ://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo并详细描述了您需要考虑的事项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:33:11.907

我认为使用 MongoDB 查询语言的传统语法是不可能的。唯一可以做到的方法是使用 $where 参数。该参数采用 Javascript 函数，该函数为集合中的每个文档执行（作为“this”变量），并根据查询是否应返回它返回 true 或 false。

此功能记录在这里：[http ://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-%7B%7B%24where%7D%7DClausesandFunctionsinQueries](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-%7B%7B%24where%7D%7DClausesandFunctionsinQueries)

请注意， $where 非常非常慢。当您的用例需要性能时，我认为您无法使用 MongoDB 做到这一点。

**安全警告：**当这是应用程序的一部分时，您将不得不从用户提供的字符串中按程序生成 Javascript 代码。你必须小心他不允许用户注入任何脚本代码。

# wordpress - 使用 RSS 提要的类别列表

> ID：13139924
> 
> 赞同：0
> 
> 时间：2012-10-30T13:21:28.543
> 
> 标签：wordpress, rss, categories

花了很多时间来搜索我的任务的解决方案，但我找不到它。所以我有 2 个站点，第一个是介绍公司，第二个是公司博客，它们安装在不同的数据库上，所以我需要从博客中获取最新的帖子、评论、蚂蚁类别。帖子和评论是通过使用 RSS 提要完成的，但主要问题是类别。如何从第二个站点获取第一个站点中的所有类别列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:05:13.573

To achieve this recipe, simply paste the following code anywhere on your theme. It will

output a list of your categories with a link to the category rss feed.

```
<?php wp_list_categories('feed_image=http://www.myblog.com/image.gif&feed=XML Feed&optioncount=1&children=0'); ?> 
```

The two parameters used here are:

feed_image: The url of the image to display as a link to your feed.

feed: The feed format

# flash - ActionScript - 显示框架，然后执行 fscommand("exec"

> ID：13139927
> 
> 赞同：0
> 
> 时间：2012-10-30T13:21:30.173
> 
> 标签：flash, actionscript, actionscript-2

我从来没有为 ActionScript 或 flash 开发过，也许这是一个简单的问题。

我在 Flash 中创建了一个菜单（自动运行 CD-ROM 中的投影仪），用户可以在其中选择要安装的程序。

在最后一帧中，我**试图**显示如下消息：“*谢谢，您的安装将在几秒钟后开始。等待程序加载。* ”。

安装程序加载，然后闪存菜单关闭。没关系。

我在框架的动作中插入了这段代码：

```
fscommand("exec", "MyInstallationProgram.Exe");
fscommand("quit"); 
```

它可以工作，但框架不渲染，我想在程序加载时显示框架。我该怎么做？

我正在使用 ActionScript 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:17:47.727

调用`fscommand('quit')`是在您的对话有机会显示之前关闭应用程序。

据我所知，没有简单的方法可以与所选程序已安装的启动器应用程序进行通信。因此，您最好的选择可能是几秒钟后自动退出：

```
// Add to frame with dialogue
stop();

setInterval(function(){
    fscommand('quit');
}, 5000); // Automatically quit after 5 seconds 
```

或者，您可以将`fscommand('quit')`调用添加到对话框下的“关闭”按钮的处理程序。

# android - BlackBerry API 相当于 Android 的 Toast？

> ID：13139930
> 
> 赞同：4
> 
> 时间：2012-10-30T13:21:40.807
> 
> 标签：android, blackberry, java-me

我需要与 BlackBerry 应用程序中的 Android Toast 消息类似的行为。对于硬编码的短时间间隔，消息必须显示在屏幕上。如果用户界面在特定时间段内停止，那很好。但是消息不应期望用户的交互会像在 Blackberry 的 Dialog.alert() 中那样将其关闭，而是应该自动关闭。这在黑莓上是否已经存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:49:52.563

您可以尝试使用 BlackBerry`Status`类。在此处查看[API 文档](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/component/Status.html#show%28java.lang.String,%20net.rim.device.api.system.Bitmap,%20int%29)

像这样的东西：

```
// show a status message for 5 seconds (5000 msec)
Status.show("Hello Toast", Bitmap.getPredefinedBitmap(Bitmap.INFORMATION), 5000); 
```

![在此处输入图像描述](../Images/a4ec28df1a72491edb588837e7e698b9.png)

它会比 Android Toast 更大，更具侵入性，但黑莓用户之前已经见过这些。一般来说，在为另一个平台编写应用程序时，最好不要尝试完全模拟一个平台。坚持该平台的用户所习惯的。这应该足够接近。

如果它不是您想要的，您可能需要实现自己的`Field`或`Manager`子类来获得您需要的大小、外观和感觉。

# c# - PRISM 4 + MVVM + WPF + InteractionRequest for Dialogs with details

> ID：13139934
> 
> 赞同：0
> 
> 时间：2012-10-30T13:21:48.340
> 
> 标签：c#, wpf, mvvm, prism, prism-4

我目前正在开发一个在 WPF 4 应用程序中使用 PRISM 4 + MVVM 的项目。
我一直在阅读，`InteractionRequest`关于如何实现它的信息似乎很少，因此对话框是一个可设置样式的用户控件，并且其中包含`textbox`其他控件。
我找到的所有示例都只是带有文本的对话窗口。

我要做的是`listview`，当用户选择一个项目时，它会打开一个对话框，他们可以在其中编辑详细信息并保存或取消。

这是 WPF 的正确方法吗？我应该做其他事情`InteractionRequest`吗？
我通常做 Web 应用程序，所以 WPF 对我来说有点新。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:22:21.003

我正在使用对话服务和交互请求。

对于必须在整个应用程序中显示且具有相同外观和感觉的常见对话框，对话服务更适合。例如，OpenFileDialog、颜色选择器、打印、错误消息等。

对于特定于特定视图的简单用户交互，交互请求可能会更好。例如，假设一个视图有一个按钮，该按钮绑定到视图模型中的命令。该命令允许用户在选项 A、B、C 之间进行选择，然后使用该选项执行某些功能。ViewModel 可能会启动一个它希望用户从 A、B、C 中选择的 InteractionRequest。视图可以处理该事件并提供一个简单的模板来描述如何向用户显示这些选项 A、B、C。因此，您保持 UI 和业务逻辑的分离。在这种情况下，从视图代码中实现这种自定义交互似乎更好，因为它简单且特定于该视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:32:24.173

我只是使用[对话服务](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)来完成这种工作。

在您的视图模型中，您只需调用

```
 var result = this.uiDialogService.ShowDialog("Dialogwindow title goes here, eg Edit Details", detailViewmodel); 
```

就这样 ：）

编辑：

您可以根据需要设置 UserControl 的样式

```
<DataTemplate DataType="{x:Type local:DetailViewModel}" >
    <view:DetailsView/>
</DataTemplate> 
```

# java - 一个实体类映射几张表

> ID：13139935
> 
> 赞同：1
> 
> 时间：2012-10-30T13:21:52.803
> 
> 标签：java, hibernate, jpa, orm

我的项目中有一张非常重要的表格 - 强制表格。它有几列，但在这种情况下，最重要的是主键。

```
Mandatory
1\. id (Long Primary Key)
... 
```

现在我必须添加两个新表 - 附加表和额外表。它们都只有两列。在附加中，两者都是主键。如您所见，其中之一也是外键。

```
Additional
1\. mandatory_id (Long Primary Key FK -> Mandatory.id)
2\. description (Varchar(512) Primary Key) 
```

在 Extra table 中，主键也是外键。

```
Extra
1\. mandatory_id (Long Primary Key FK -> Mandatory.id)
2\. text (Varchar(512) 
```

我正在考虑如何在我的项目中使用 Hibernate 实现它。

我已经以这种方式声明了它们（这里没有 getter、setter 等），`MandatoryEntity`类：

```
@Entity
@Table(name = "mandatory")
public class MandatoryEntity {

    @OneToMany
    @JoinColumn(name = "mandatory_id")
    protected List<AdditionalEntity> additonals;

    @OneToOne
    @JoinColumn(name = "mandatory_id")
    protected ExtraEntity extra;
} 
```

`AdditionalEntity`班级：

```
@Entity
@Table(name = "additional")
public class AdditionalEntity {

    @EmbeddedId
    private AdditionalPK id;

    @ManyToOne(fetch = FetchType.LAZY)
    @Fetch(value = FetchMode.JOIN)
    @JoinColumn(name = "mandatory_id", nullable = false, insertable = false, updatable = false)
    protected MandatoryEntity mandatory;
} 
```

`AdditionalPK`班级：

```
@Embeddable
public class AdditionalPK {

    @Column(name = "mandatory_id")
    private Long mandatoryId;

    @Column(name = "description")
    private String description;
} 
```

`ExtraEntity`班级：

```
@Entity
@Table(name = "extra")
public class ExtraEntity {

    @Id
    @Column(name = "mandatory_id")
    private Long id;

    @OneToOne 
    @PrimaryKeyJoinColumn
    protected MandatoryEntity mandatory

    @Column(name = "text")
    protected String text;
} 
```

此时我正在使用的笔记本电脑坏了，所以我有时间考虑一下。我在 JPA 规范`@SecondaryTables`注释中找到了。我可以在我的情况下使用这个注释吗？这些只是两个表，每个表只有两列。第一个有复合主键，第二个没有。

也许还有另一种方法可以在一个表中实现这些表`MandatoryEntity`？没有两个新实体：`AdditionalEntity`和`ExtraEntity`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:53:43.050

首先，让我重新表述一下我从您的要求中理解的内容。

1.  您有一个主要实体（必填）
2.  您有两个其他实体指定强制实体的附加信息。其中

    一个。可以指定多个附加信息（ManyToOne）

    湾。可以指定一个额外信息（OneToOne）

通常这是一个非常基本的用例。您必须在这里决定的一件事是您是否需要双向映射或单向映射（仅通过强制实体访问）就足够了。我希望单向映射对于您的用例来说是一个不错的选择，因为 Mandatory 似乎是您的根实体。在您的代码中，您尝试对双向关系进行建模，但忘记指定相反的关系。这实际上会导致两个独立的关系。您应该像这样指定双向关系的目标：

```
 @Entity
@Table(name = "mandatory")
public class MandatoryEntity {
    // you need a mapped by to mark the relation as bidirectional
    @OneToMany(mappedBy = "mandatory")
    protected List additonals;
    @OneToOne
    protected ExtraEntity extra;
}

@Entity
@Table(name = "additional")
public class AdditionalEntity {
    @EmbeddedId
    private AdditionalPK id;
    @ManyToOne(fetch = FetchType.LAZY)
    protected MandatoryEntity mandatory;
} 您还指定了许多示例中不需要的附加映射信息，这使得一切看起来都太复杂了。另外，您为什么要使用嵌入式密钥？我认为自动生成的密钥也适合您。我对您的模型的建议如下：

```
 @Entity
@Table(name = "mandatory")
public class MandatoryEntity {
    @Id
    @GeneratedValue(strategy =  GenerationType.AUTO)
    private Long id;
// you need a mapped by to mark the relation as bidirectional
    @OneToMany(mappedBy = "mandatory")
    protected List additonals;
    @OneToOne
    protected ExtraEntity extra;
}
@Entity
@Table(name = "additional")
public class AdditionalEntity {
    @Id
    @GeneratedValue(strategy =  GenerationType.AUTO)
    private Long id;
    @ManyToOne(fetch = FetchType.LAZY)
    protected MandatoryEntity mandatory;
}
@Entity
@Table(name = "extra")
public class ExtraEntity {
    // you might also not use auto-value here and set the id to the id of the owning
    // mandatory entity
    @Id
    @GeneratedValue(strategy =  GenerationType.AUTO)
    private Long id;
    @Column(name = "text")
    protected String text;
} 
```

如果我遗漏了一些要求并且我提出的映射不适用于您的情况，那么请添加有关您的要求的更多信息，我们可以进一步讨论。

```

# php - 无法获取 IF $_GET[video] = 编辑，显示表单

> ID：13139936
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:22:01.027
> 
> 标签：php, mysql, variables, if-statement, get

我似乎无法弄清楚这一点。我正在尝试从结果中获取 row[video] 值，如果数据库中有一个视频条目并且它不为空，则显示一个链接，显示 Edit Video Link with a href= of edit_media.php?video=edit （这是这个页面）。如果用户单击此链接，页面将使用包含 video=edit 的 URL 重新加载，并触发变量 videoEdit 为 TRUE，这应显示一个表单输入框，该框显示数据库中的当前值。

但是，它似乎不起作用，由于某种原因，我什至在单击编辑视频链接之前就看到了表单输入框（网址没有视频=编辑）。当我单击“修改视频链接”并且网址确实包含视频 = 编辑时，我会看到一个文本框，其中包含“视频”字样。我不确定为什么。我在这段代码之前有正确的 MYSQL 查询，但我没有在这里包含它。我怎样才能得到这个工作？

```
 // if the user clicked edit video link
if ($_GET['video'] = EDIT) {
$videoEdit = TRUE
}

while ($row = mysql_fetch_array($result, mysql_assoc)) {
$video = $row['video'];
}

if ($videoEdit = TRUE) {
echo '<form action="edit_media.php" method="post">
<p>Video Link: <input type="text" name="serial" size="25" maxlength="100" value=';
       if (isset($video))
            echo $video;
            ' /></p><p><input type="submit" name="submit" value="Submit Video" /></p>               <input type="hidden" name="submitted" value="TRUE" />
        </form>';
} 
```

它接着说：

```
if ($video != "") {
echo '<iframe width="420" height="315" src=' . $video . ' frameborder="0" allowfullscreen></iframe> | <a href=edit_media.php?video=EDIT>Modify Video Link</a>';
} else {
echo "Video Not Present | <a href=edit_media.php?video=EDIT>Add a Video</a>";
} 
```

你能帮我制作这个脚本吗>？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:24:10.603

在您的两个 if 语句中，您错过了“=”您的代码正确：

```
if ($_GET['video'] == EDIT) {
$videoEdit = TRUE
}

while ($row = mysql_fetch_array($result, mysql_assoc)) {
$video = $row['video'];
}

if ($videoEdit == TRUE) {
echo '<form action="edit_media.php" method="post">
<p>Video Link: <input type="text" name="serial" size="25" maxlength="100" value=';
       if (isset($video))
            echo $video;
            ' /></p><p><input type="submit" name="submit" value="Submit Video" /></p>               <input type="hidden" name="submitted" value="TRUE" />
        </form>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:24:26.993

此行使用了错误的比较运算符：

`if ($videoEdit = TRUE) {`

它应该是

`if ($videoEdit == TRUE) {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:27:46.797

试试这个 if ($_GET['video'] == "EDIT") { $videoEdit = TRUE }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:31:53.267

这是将 EDIT 分配给变量，而不是检查其值。

```
if ($_GET['video'] = EDIT) 
```

尝试养成以相反顺序编写常量检查的习惯：

```
if (EDIT == $_GET['video']) 
```

这样，如果您再次删除“=”，代码将根本无法编译，您将立即收到警告。

出于同样的原因，请注意`if ($a == $b)`比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T13:23:52.680

首先你需要一个比较，而不是分配：

```
if ($_GET['video'] ==  'EDIT') {
     $videoEdit = TRUE;
 } 
```

和

```
if ($videoEdit == TRUE) { 
```

还需要清理视频的打印：

```
echo '<form action="edit_media.php" method="post">
      <p>Video Link: <input type="text" name="serial" size="25" maxlength="100" value=';
if (isset($video)){
        echo $video;
}
echo ' /></p><p><input type="submit" name="submit" value="Submit Video"/></p>'.
     '<input type="hidden" name="submitted" value="TRUE" /> </form>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T13:26:09.790

这里有很多语法错误......我建议做一些学习......这是我能看到的......

另外，在您研究时...查看 PDO 或 Doctrine，不推荐使用 mysql。

```
if ($_GET['video'] == 'EDIT') { // <<--- invalid syntax
$videoEdit = TRUE; // <--- missing semicolon
}

while ($row = mysql_fetch_array($result)) { // <-- not sure
$video = $row['video'];
}

if ($videoEdit) { // <-- boolean comparison
echo '<form action="edit_media.php" method="post">
<p>Video Link: <input type="text" name="serial" size="25" maxlength="100" value=';
       if (isset($video))
            echo $video;
            ' /></p><p><input type="submit" name="submit" value="Submit Video" /></p>               <input type="hidden" name="submitted" value="TRUE" />
        </form>';
} 
```

这是一个很好的资源：[http ://www.php.net/manual/en/](http://www.php.net/manual/en/)

# c# - 将当前日期时间存储为字符串变量

> ID：13139948
> 
> 赞同：-3
> 
> 时间：2012-10-30T13:22:27.153
> 
> 标签：c#, parsing, datetime

我试图在单击完成按钮时将当前时间存储到一个字符串变量中，然后我可以通过一个方法给它一个结束日期。

我认为它可以使用以下代码工作：

```
string endDate = null;
DateTime dt = DateTime.ParseExact(endDate, "ddMMyyyy", CultureInfo.InvariantCulture);
dt.ToString("yyyyMMdd"); 
```

但是，当程序运行并调试代码时，我收到此错误。

> 字符串引用未设置为字符串的实例。参数名称：s

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:24:37.917

编辑：正如评论中所指出的，您还将 endDate 的空值传递给 ParseExact() 方法。我对你在这里想要完成的事情感到困惑。如果您只是想在单击按钮时获取当前 DateTime 的字符串值，您需要做的就是：

```
string currentDate = DateTime.Now.ToString("yyyyMMdd"); 
```

除非我错过了您要执行的操作，否则根本不需要解析字符串。

您没有将 dt.ToString() 调用的值分配给变量。尝试使用

```
endDate = dt.ToString("yyyyMMdd"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:24:44.690

`dt.ToString("yyyyMMdd");`返回一个字符串。您需要将其分配给字符串变量。它不会将 dt 更改为字符串。

我想你想要的是：

```
endDate = dt.ToString("yyyyMMdd"); 
```

# python - 使用 python 和 xlrd 读取工作簿属性

> ID：13139949
> 
> 赞同：4
> 
> 时间：2012-10-30T13:22:33.447
> 
> 标签：python, xlrd

有没有办法使用 xlrd 读取 excel 文件属性？我指的不是单元格表示属性，而是一般工作簿属性。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:17:19.680

除了用户名（最后一个保存工作表的人），由 open_workbook 返回的 Book 实例似乎没有任何属性。

我递归地转储了这本书（如果是 xlrd.BaseObject，则转储它的**字典**）并且无法以这种方式找到任何东西。测试文件肯定有作者、公司和一些自定义元数据。

FWIW：LibreOffice 似乎也无法找到作者和公司（或不显示它们），但它确实在属性中显示了自定义元数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-24T20:51:59.353

我找不到使用 xlrd 执行此操作的方法，但如果您只需要读取 .xlsx 文件，则可以将它们视为 Zipfile 并读取属性 XML 文件。您可以通过将 .xlsx 扩展名更改为 .zip 并在 Windows 上打开文件来看到这一点。下面是读取自定义属性的示例。

```
from lxml import etree as ET
import zipfile    

def get_custom_properties(filename):
    zip = zipfile.ZipFile(filename)
    props = zip.open('docProps/custom.xml')
    text = props.read()
    xml = ET.fromstring(text)
    # Works on my example document, but I don't know if every 
    # child node will always have exactly one nested node
    return {
        child.attrib['name']: child[0].text
        for child in xml
    } 
```

# c# - 使用 MS Access 的 C# 参数化 OLEDB 查询

> ID：13139950
> 
> 赞同：1
> 
> 时间：2012-10-30T13:22:40.513
> 
> 标签：c#, database, parameters, oledb

好的，我确实有一个在数据库中插入数据的 OLEDB 函数。好吧，我知道如何使用 OLEDB 执行 SQL 的常用方法，但我在这里要做的是对查询字符串中的每个数据进行参数化。

现在我在谷歌工作了将近 3 个小时，只知道如何在 OLEDB 中进行参数化查询，但他们都没有和我一起工作。

现在终于我的查询在下面的代码中似乎工作正常，但仍然出现错误

**我的功能代码：**

```
private bool dbInsert(int [] inputNumbers, DateTime datetime){
                try {
                    String sql = "INSERT INTO 655(1stNum, 2ndNum, 3rdNum, 4thNum, 5thNum, 6thNum, datedraw) VALUES(?, ?, ?, ?, ?, ? ,?)";
                    OleDbCommand dbcmd = new OleDbCommand(sql, app.oleDbConn());
                    dbcmd.Connection.Open();
                    dbcmd.Parameters.Add("?",OleDbType.Numeric).Value = inputNumbers[0];
                    dbcmd.Parameters.Add("?",OleDbType.Numeric).Value = inputNumbers[1];
                    dbcmd.Parameters.Add("?",OleDbType.Numeric).Value = inputNumbers[2];
                    dbcmd.Parameters.Add("?",OleDbType.Numeric).Value = inputNumbers[3];
                    dbcmd.Parameters.Add("?",OleDbType.Numeric).Value = inputNumbers[4];
                    dbcmd.Parameters.Add("?",OleDbType.Numeric).Value = inputNumbers[5];
                    dbcmd.Parameters.Add("?",OleDbType.DBTimeStamp).Value = datetime;
                    dbcmd.ExecuteNonQuery();
                    dbcmd.Connection.Close();

                }catch(OleDbException ex){
                    showPrompt("Error reading the database",Color.Red);
                    Console.WriteLine(ex.ToString());
                }
                return true;
            } 
```

**这是控制台中显示的错误日志：**

> System.Data.OleDb.OleDbException：标准表达式中的数据类型不匹配。在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr) 在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult) 在 System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult) 在 System.Data。 System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior 行为，字符串方法) 中的 OleDb.OleDbCommand.ExecuteCommand(CommandBehavior 行为，Object& executeResult) System.Data.OleDb.OleDbCommand.ExecuteNonQuery()

我的访问数据库文件中我的列的数据类型是从 1stNum 到 6thNum的**数字和 datedraw 中的****日期/时间**，当然 ID 是**AutoNumber**

参数化查询实现中是否有任何错误？请帮我。

**更新**

*   我在 Access 文件中将 nums 的**OleDBType**更改为**Numeric**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-28T07:09:44.843

我要检查的一件事是类型：OleDbType.DBTimeStamp

如果我记得，TimeStamp 是一种特殊的类型，它不容易与 DateTime 类型兼容。

请注意，OleDb 可以使用命名参数：请参阅[MS 访问、命名参数和列名](https://stackoverflow.com/questions/4857940/ms-access-named-parameters-and-column-names/20811933#20811933)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:27:36.383

您需要在值周围加上单引号，如下所示：

```
String sql = 
    "INSERT INTO 655(1stNum, 2ndNum, 3rdNum, 4thNum, 5thNum, 6thNum, datedraw)
    VALUES('?', '?', '?', '?', '?', '?' ,'?')"; 
```

另外，您是否尝试过插入一个实整数而不是`"?"`？**

# java - 如何在特定条件下拆分字符串

> ID：13139951
> 
> 赞同：6
> 
> 时间：2012-10-30T13:22:42.473
> 
> 标签：java

我有一个以下字符串

> 书籍/eh/grayL88/WilliamsMC88:::M。Howard Williams::PA Massey::Jim A. Crammond:::Benchmarking Prolog for Database Applications。

我应该如何使用或换句话说使用什么，以便最终我可以得到

> M. Howard Williams - 数据库应用程序的基准测试 Prolog。
> 
> PA Massey -- 数据库应用程序的基准测试 Prolog。
> 
> Jim A. Crammond - 数据库应用程序的基准测试 Prolog。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:29:13.710

## 第一种方式：

*   您可以先在`:::`. 这将为您提供一个长度为 3 的数组。您会对数组的`2nd`和`3rd`元素感兴趣。
*   然后将`2nd element`您的数组拆分为`::`. 这将为您提供一个包含`each name`.
*   使用第一个数组的迭代`2nd array`并打印每个名称。`3rd element`

    ```
    String str = "books/eh/grayL88/WilliamsMC88:::M. Howard Williams::" + 
                 "P. A. Massey::Jim A. Crammond:::Benchmarking Prolog for " + 
                 "Database Applications.";

    String[] arr = str.split(":::");
    String[] innerArr = arr[1].split("::");

    for (String name: innerArr) {
        System.out.println(name + " -- " + arr[2]);
    } 
    ```

**输出**： -

> M. Howard Williams - 数据库应用程序的基准测试 Prolog。
> PA Massey -- 数据库应用程序的基准测试 Prolog。
> Jim A.Crammond - 数据库应用程序的基准测试 Prolog。

* * *

## 第二种方式：

或者，您可以拆分`:::?`. 这将在`::`or上拆分`:::`，这将仅在您的第一个数组中获取每个单独的元素（仅适用于`3`名称。更多信息，您应该最好使用第一个）

```
 String[] arr = str.split(":::?");

    System.out.println(arr[1] + " - " + arr[4]);
    System.out.println(arr[2] + " - " + arr[4]);
    System.out.println(arr[3] + " - " + arr[4]); 
```

**输出**： -

> M. Howard Williams - 数据库应用程序的基准测试 Prolog。
> PA Massey - 数据库应用程序的基准测试 Prolog。
> Jim A. Crammond - 数据库应用程序的基准测试 Prolog。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:30:47.220

你可以尝试这样的事情：

```
String s = "books/eh/grayL88/WilliamsMC88:::M. Howard Williams::P. A. Massey::Jim A. Crammond:::Benchmarking Prolog for Database Applications.";

String split[] = s.split(":::");
String end = split[split.length - 1];

String[] names = split[1].split("::");

for (String name : names)
    System.out.println(name + " -- " + end); 
```

* * *

输出：

> M. Howard Williams - 数据库应用程序的基准测试 Prolog。
> PA Massey -- 数据库应用程序的基准测试 Prolog。
> Jim A. Crammond - 数据库应用程序的基准测试 Prolog。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:43:33.557

尝试以下方式：（伪代码......）

```
myString.remove("(.*/)+[^:]*:{3}");
lastString = myString.split(":::").takeLast();
array names = myString.split("([^:]*)+");
result = "";

for (i=0;i<name.size();result+=names[i++]+" -- "+lastString+"\n");

// do whatever with "result"... 
```

没有免费赠品，从来没有...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:47:35.803

使用 StringTokenizer。例如：

```
StringTokenizer tokenizer = new StringTokenizer(str, "://");
while (tokenizer.hasMoreTokens()) {
   String token = tokenizer.nextToken();
   // ... and do whatever you like with the token
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T13:49:31.480

```
String str = "books/eh/grayL88/WilliamsMC88:::M. Howard Williams::P. A. Massey::" +
        "Jim A. Crammond:::Benchmarking Prolog for Database Applications.";
        String split[]=str.split(":::");
        String names[] = split[1].split("::");
        String sentence = split[2];
        for(String name : names){
            System.out.println(name + " -- " +sentence);
        } 
```

**输出 ：**

M. Howard Williams - 数据库应用程序的基准测试 Prolog。
PA Massey -- 数据库应用程序的基准测试 Prolog。
Jim A. Crammond - 数据库应用程序的基准测试 Prolog。

# selenium - Selenium WebDriver 和加载的图像

> ID：13139953
> 
> 赞同：1
> 
> 时间：2012-10-30T13:22:51.857
> 
> 标签：selenium, selenium-webdriver

我使用 selenium webdriver 进行自动化测试。我开发了一个测试，它可以导航到包含许多图像的页面。我想保存由 webbrowser 下载的图像数据。我只能调用相同的 url 地址，但存在问题，因为图像是动态生成的。目标是保存没有另一个http请求的网页中显示的图像数据。

你能帮我或给我任何建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:03:38.217

您应该考虑创建一个位于 Selenium 和远程服务器之间的自定义代理。这样您就可以截取您喜欢的任何内容并将其保存到磁盘。

您正在使用哪些绑定？对于 java，设置代理非常简单 - [http://seleniumhq.org/docs/04_webdriver_advanced.jsp#using-a-proxy](http://seleniumhq.org/docs/04_webdriver_advanced.jsp#using-a-proxy)

绝望的选择：

*   第二种最不痛苦的方法是使用 Selenium 对整个页面进行快照。一旦你有了它，你就可以裁剪出你关心的图像。非常脆弱，非常hacky。
*   您还可以使用 JavaScript 攻击页面。AFAIK，JS 不可能刮取图像位。因此，您必须在 img url 中进行 AJAX，然后手动设置 IMG 内容。但这实际上只是构建代理的一种极其尴尬的方式。

# objective-c - 我怎样才能使这段代码更有效率（目标 C）？

> ID：13139957
> 
> 赞同：0
> 
> 时间：2012-10-30T13:22:58.060
> 
> 标签：objective-c, ios

我刚刚开始使用 Objective-C，并创建了一个我想改进的 iOS 程序。在其中，我有两个代码块：

```
if ([stringTest isEqualToString:@"apple"]){
    numTest=0;
}else if (([stringTest isEqualToString:@"orange"])||([stringTest isEqualToString:@"lemon"])){
    numTest=1;
}else if ([stringTest isEqualToString:@"pumpkin"]){
    numTest=2;   // and so on... 
```

然后反过来：

```
 if (numTest==0){
        stringTest=@"apple";
    } else if (numTest==1){
        stringTest=@"orange/lemon";
    } else if (numTest==2){
        stringTest=@"pumpkin";  // and so on... 
```

由于这些列表实际上涉及更多项目，我相信有更好的方法来做到这一点。任何建议将不胜感激。谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:28:19.267

我建议设置将字符串映射到数字和数字到字符串的 NSDictionaries。使用新的对象字面量语法：

```
NSDictionary* numberLookup = @{@"apple": @0, @"orange", @1, @"lemon", @2, @"pumpkin": @3};
numTest = [numberLookup objectForKey:stringTest];

NSDictionary* stringLookup = @{@0, @"apple", @1, "orange/lemon", .....
stringTest = [stringLookup objectForKey:numTest]; 
```

NSDictionary 的字面语法是`@{key: value, ...}`. 注意在数值之前使用@符号；NSDictionary 期望所有的键和值都是对象。`@1`相当于`[NSNumber numberWithInt:1]`。并且字典文字语法类似于`[NSDictionary dictionaryWithObjectsAndKeys:@0, @"apple", ..., nil]`.

### 编辑：从第一个字典生成第二个字典

```
// Map strings to numbers
NSDictionary* numberLookup = @{@"apple": @0, ...};

// Map numbers to strings
NSMutableDictionary* stringLookup = [NSMutableDictionary dictionaryWithCapacity:numberLookup.count];
for (str in numberLookup) {
    id num = [numberLookup objectForKey:str];
    if ([stringLookup objectForKey:num]) {
        NSString* currentStr = [stringLookup objectForKey:num];
        [stringLookup setObject:[NSString stringWithFormat:@"%@/%@", currentStr, str] forKey:num]
    } else {
        [stringLookup setObject:str forKey:num];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:09:01.830

对于获取字符串的数字，@esker 是正确的，`NSDictionary`应该使用 an。然而，这个字典应该只生成一次，假设它被多次使用：

```
static NSDictionary *numberForFruit = nil;
if (!numberForFruit) {
    NSUInteger numberOfStrings = 4;
    NSMutableDictionary *mutableNumberForFruit = [NSMutableDictionary dictionaryWithCapacity:numberOfStrings];
    #define addNumberForFruitToMutableNumberForFruit(number,fruit) [mutableNumberForFruit setObject:[NSNumber numberWithInt:number] forKey:@#fruit];
    addNumberForFruitToMutableNumberForFruit(0, apple);
    addNumberForFruitToMutableNumberForFruit(1, orange);
    addNumberForFruitToMutableNumberForFruit(1, lemon);
    addNumberForFruitToMutableNumberForFruit(2, pumpkin);
    numberForFruit = [mutableNumberForFruit copy];
} 
```

然而，换个方向，使用 switch 语句会好得多：

```
switch (numTest) {
    case 0: {
        strings = @[@"Apple"];
    } break;
    case 1: {
        strings = @[@"Orange", @"Lemon"];
    } break;
    case 2: {
        strings = @[@"Pumpkin"];
    } break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:41:10.120

不确定您将其用于什么，但我想如果您的数字是连续的，您也可以使用枚举：

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{
    enum fruits 
    { 
        apple = 0, 
        banana, 
        orange 
    };

    NSLog(@"Apple is: %d", apple);
    NSLog(@"Banana is: %d", banana);
    NSLog(@"Orange is: %d", orange);

    return 0;
} 
```

输出将是：

```
2012-10-30 21:40:45.758 TestEnum[1274:403] Apple is: 0
2012-10-30 21:40:45.761 TestEnum[1274:403] Banana is: 1
2012-10-30 21:40:45.762 TestEnum[1274:403] Orange is: 2 
```

请注意，您指定枚举标签的顺序很重要。在这种情况下，我告诉“apple”从 0 开始。

我可以很好地告诉“apple”从 5 开始，如果我这样做，“banana”将变为 6 而不是 1，因为枚举是连续的，下一个标签将采用前一个标签的 +1 值。

抱歉，我不知道标签的技术名称是什么，我称它们为标签：P

# c# - Webforms 模型绑定和复杂类型

> ID：13139959
> 
> 赞同：0
> 
> 时间：2012-10-30T13:23:04.693
> 
> 标签：c#, webforms, model-binding

我有一个 webforms 项目，我在 ASP.NET 4.5 上使用新的模型绑定。我的页面上有一个强类型的 FormView，其中包含一个 DropDownList，它允许用户选择一个相关的实体（想想产品-> 类别）。

有没有办法设置它，以便在我的 InsertMethod 上，我可以直接访问相关实体（例如 Product.Category）？我需要检查相关实体的一些验证规则，我发现这样做的唯一方法是设置我的 DropDownList 以返回相关记录的 Id，然后从数据库中获取它。这似乎相当低效。

编辑：该死的，没人啊！？好吧，这就是您作为新技术的早期采用者所获得的！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:49:14.500

我在 MVC 上遇到了同样的问题，我找到的最佳解决方案是在我的模型上使用 ForeignKey 数据注释，这样我就可以只插入相关对象的 ID 并稍后检索对象。这是一个例子：

```
public class Product {
    public int ProductId { get; set; }
    public string Name { get; set; }
    // Add this field so I can add the entity to the database using 
    // category id only, no need to instantiate the object
    public int CategoryId { get; set; }

    // Map this reference to the field above using the ForeignKey annotation
    [ForeignKey("CategoryId")]
    public virtual Category Category { get; set; }
}

public class Category {
    public int CategoryId { get; set; }
    public string Name { get; set; }
} 
```

现在，自从我上次使用 WebForms 已经很久了，所以我真的不知道如何将类别列表绑定到 DropDownList，可能是这样的：

```
<asp:DropDownList ID="CategoryId" SelectMethod="GetCategories" runat="server" /> 
```

也许当您在 Create 或 Update 方法上恢复您的产品时，它会带有正确归因的 CategoryId 属性，然后您所要做的就是保存 EF 的上下文。祝你好运。

# java - Java命令行中的嵌套系统属性

> ID：13139960
> 
> 赞同：0
> 
> 时间：2012-10-30T13:23:06.177
> 
> 标签：java, command-line-arguments, system-properties

有没有办法在 Java 命令行中嵌套系统属性？例如，指定如下内容：

`java -DworkingDir=/tmp -DconfigFile=${workingDir}/someFile.config`.

我的目标是为 Eclipse 中的 Tomcat 启动配置使用类似的东西（Tomcat 修补以使用 SLF4J/Logback 进行日志记录）：

```
-Dcatalina.base="C:\data\workspaces\EclipseWorkspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0" 
-Dlogback.configurationFile="${catalina.base}\conf\logback.groovy"`. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:41:33.847

当然，只要确保您正确阅读并替换它，例如：

`java -DworkingDir="/tmp" -DconfigFile="${workingDir}/someFile.config"`

```
Properties props = System.getProperties(); 
String wDir = props.getProperty("workingDir");
String configFile = props.getProperty("configFile").replace("${workingDir}", wDir);
System.out.println(configFile); 
```

你明白了……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:58:37.883

没有办法让扩展透明地发生......在Java中。但你可以这样做：

```
$ workingDir=/tmp
$ java -DworkingDir=${workingDir} -DconfigFile=${workingDir}/someFile.config. 
```

换句话说，在调用 Java 之前让 shell 进行扩展。（Windows 批处理文件中的语法会有所不同......但想法是相同的。）

* * *

顺便说一句，如果你运行这样的命令：

```
$ java -DworkingDir=/tmp -DconfigFile=${workingDir}/someFile.config 
```

POSIX shell 将解释`${workingDir}`为 shell 变量扩展。如果没有`workingDir`定义变量，这将扩展为空......所以您需要使用引用来获取`${workingDir}`实际的 Java 属性值；例如

```
$ java -DworkingDir=/tmp -DconfigFile=\${workingDir}/someFile.config 
```

# c# - 无法从数据库中成功删除记录

> ID：13139963
> 
> 赞同：1
> 
> 时间：2012-10-30T13:23:14.647
> 
> 标签：c#, javascript, asp.net, entity-framework, typescript

难道我做错了什么？一切似乎都很好，但记录并没有从数据库中删除：

C＃

```
 @{
    WebSecurity.RequireAuthenticatedUser();

    myModel.OSFEntities database = new myModel.OSFEntities();

    var productInformation = Request["Pi"];

    int productId = Convert.ToInt32(productInformation.Substring(0, productInformation.LastIndexOf("-")));
    string productType = productInformation.Substring(productInformation.LastIndexOf("-", productInformation.Length)).Replace("-", String.Empty);
    var userId = WebSecurity.CurrentUserId;
    DateTime date = DateTime.Now;
    int quantity = 1;
    string quoteId = "";

    if (Request["Action"] == "Remove")
    {
        if (Session["QuoteId"] != null)
        {
            quoteId = (String)Session["QuoteId"];

            myModel.Quote quotes = database.Quotes.FirstOrDefault(
                q => q.UserId == userId && q.QuoteId == quoteId && q.ProductId == productId && q.ProductType == productType);

            database.Quotes.DeleteObject(quotes);
            database.SaveChanges();
        }
    }
} 
```

打字稿：

```
function RemoveProductFromCart(e) {
    // Remove from their Cart.
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
            if (xhr.status == 200) {
                // The data is now stored in the responseText.
                // Change value in textbox to 0 so user knows it's been
                // removed from their cart.
                var el = <HTMLInputElement>document.getElementById(e.id + "-TB");
                if (el != null) {
                    el.value = "0";
                }
            }

            else {
                // Server responded with a different response code.
                alert(xhr.statusText);
            }

        }
    }

    var parameters = "Pi=" + encodeURIComponent(e.id) + "&" + "Action=Remove";

    xhr.open("POST", "../Cart.cshtml");
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.setRequestHeader("Content-length", parameters.length.toString());
    xhr.setRequestHeader("Connection", "close");
    xhr.send(parameters);

    return e.id;
} 
```

在使用开发工具进行调试时`F12`，我看到：

![在此处输入图像描述](../Images/0adacd4858ac45328b0f9c7f9fbfbb9d.png)

...这让我相信我的 C# 代码有问题。为什么它不会从数据库中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:25:00.863

我有几个建议。

在这些情况下，很可能其中一个请求项与您认为的不完全相同，因此操作或报价 ID 都可能包含惊喜。您可以使用断点检查那些。

下一个要检查的项目是`myModel.Quote quotes`包含匹配的报价对象。即使 id 是正确的（例如它没有链接到当前用户，或者产品类型不同等），您那里的过滤器之一也可能会排除它。

我注意到你正在使用...

```
database.Quotes.DeleteObject(quotes);
database.SaveChanges(); 
```

即你使用`Quotes`第一个，而不是第二个：`SaveChanges`and`DeleteObject`调用不应该放在同一个上下文中吗？

# asp.net - 使用浏览器文件向搜索爬虫隐藏第 3 方控件未按预期工作

> ID：13139965
> 
> 赞同：1
> 
> 时间：2012-10-30T13:23:26.257
> 
> 标签：asp.net, sharepoint, control-adapter

我在 asp.net 应用程序中使用需要一些浏览器功能（尤其是 JavaScript）的 3 方 Web 控件。

该控件正在检查浏览器是否具有所需的功能，如果没有则抛出异常。

导航到使用此控件的页面时这是可以的，但是当机器人索引页面时，会引发错误（因为爬虫的用户代理没有提供所需的功能）。

由于我无法控制控件的实例化方式/时间，因此我试图将控件短路以避免检查。为此，我创建了一个自定义浏览器文件，并将其放入`APP_Browsers`文件夹中：

```
<?xml version="1.0" encoding="utf-8"?>
<browsers>
    <browser refID="Default">
        <controlAdapters>
            <adapter controlType="Microsoft.SharePoint.WebControls.Gantt, Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c"
                     adapterType="myNS.MyAdapter, MyAssembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=c02e9cbf6dab9cb0" />
        </controlAdapters>
    </browser>
</browsers> 
```

（是的，这是一个共享点控件，但我想它超出了范围）

这是适配器的代码：

```
namespace myNS
{
    public class MyAdapter: ControlAdapter
    {
        protected override void OnLoad(EventArgs e)
        {
            System.Diagnostics.Debugger.Break();
            var context = HttpContext.Current;
            if (context != null)
            {
                var browser = context.Request.Browser;
                if (!browser.Crawler)
                {
                    base.OnLoad(e); // 
                }
            }
        }

        protected override void Render(System.Web.UI.HtmlTextWriter writer)
        {
            System.Diagnostics.Debugger.Break();
            var context = HttpContext.Current;
            if (context != null)
            {
                var browser = context.Request.Browser;
                if (!browser.Crawler)
                {
                    this.Control.RenderControl(writer);
                }
            }
        }
    }
} 
```

不幸的是，这不起作用。我没有错误消息，但似乎从未调用过代码（该`Break()`方法未触发期望调试器窗口）。手动附加调试器并不好。

如何确保我的浏览器文件被实际使用并且正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:31:14.970

嗯...不确定是否理解，但是一旦我修改了“compat.browser”文件（不是我的），它就开始工作了。

奇怪的

# html - 更改特定列表项属性

> ID：13139967
> 
> 赞同：1
> 
> 时间：2012-10-30T13:23:40.527
> 
> 标签：html, css, selector

我正在尝试更改列表项主页的背景，以确保它即使在未悬停时也具有悬停属性。即使我使用类提到过它，文本也不会改变。

HTML：

```
 <div id="header">
     <img id="logo" src="images/logo.jpg">
     <ul>
     <li> <a href="#">CONTACT</a> </li>
     <li> <a href="#">GALLERY</a> </li>
     <li> <a href="#">EVENTS</a> </li>
     <li> <a href="#" class="currentpage">HOME </a> </li>
     </ul>          
     </div> 
```

CSS：

```
 #header ul {
        padding-top:1em;
          }

       #header ul li a.currentpage {
        color:white !important;
        background-color: #F96E5B !important;
       }

       #header ul li a {
        text-decoration: none;
        color:#676767;
        font-family: 'Oswald', sans-serif;
        font-size: 1em;
        float:right;
        line-height: 3em;
        padding-right: 1em;
        padding-left:1em;
           }

          #header ul li a:hover{
      background-color: #F96E5B;
          } 
```

[http://ashwin931996.webege.com](http://ashwin931996.webege.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:28:31.230

从您发布的页面/链接查看您的代码后，您似乎想要更改您提供的项目的 a 标签背景颜色`id="selected"`

您要定位的 css 是：

```
#header ul li a#selected {background:red /* or whatever color you want it */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:29:42.753

试试这个代码

```
<li>
<a  class="one" href="#">CONTACT</a>
</li>
<li>
<a class="two" href="#">GALLERY</a>
</li  class="one">
<li>
<a class="three" href="#">EVENTS</a>
</li>
<li>
<a class="four" href="#">HOME </a>
</li> 
```

css

```
#header ul li a.one:hover
{background-color: #F96E99;
color: white;}
#header ul li a.two:hover
{background-color: #F96E22;
color: white;}
#header ul li a.three:hover
{background-color: #F96Eaa;
color: white;}
#header ul li a.four:hover
{background-color: #F96E55;
color: white;} 
```

演示；[http://jsfiddle.net/PbMg2/1/](http://jsfiddle.net/PbMg2/1/)

您需要提及单独的类悬停功能。我希望这对你有帮助。

# mysql - MySQL根据日期间隔返回N行

> ID：13139968
> 
> 赞同：0
> 
> 时间：2012-10-30T13:23:41.980
> 
> 标签：mysql

我需要创建一个查询以基于日期间隔返回 N 行。这很简单，但我不能：/

基本查询：

```
SELECT
  f.many_fields
FROM
  tb_foo f
WHERE
  f.id_foo = 14 
```

此查询根据我的 ID 返回 1 行。但是，我在“2012-10-30”处设置了“2012-10-10”之类的日期间隔来应用于此查询，最后基本查询将根据日期间隔的差异返回 20 行。

可以做到这一点吗？

```
SELECT
  f.many_fields,
  bar.*
FROM
  tb_foo f,
  (SELECT x FROM dual limit DATEDIFF('2012-10-10','2012-10-30')) bar
WHERE
  f.id_foo = 14 
```

真实查询：

```
SELECT
  m.id_matricula,
  a.nome
FROM
  tb_matricula m
    inner join tb_aluno a on (a.id_aluno = m.id_matricula)
WHERE
  m.id_matricula = 14 
```

开始日期 = 2012-10-10 结束日期 = 2012-10-30

我将在 iReport 上使用此结果，根据此日期之间的差异构建一个包含行数的网格。

基于 Google 搜索的示例：

```
SELECT
    CONCAT( dt.d ,'-' ,days.d ) AS dates
FROM
    (
        SELECT
            CONCAT( a1 ,b1 ) AS d
        FROM
            (
                SELECT
                    '0' AS a1
            UNION ALL SELECT
                    '1'
            UNION ALL SELECT
                    '2'
            UNION ALL SELECT
                    '3'
            ) a JOIN(
                SELECT
                    '0' AS b1
            UNION ALL SELECT
                    '1'
            UNION ALL SELECT
                    '2'
            UNION ALL SELECT
                    '3'
            UNION ALL SELECT
                    '4'
            UNION ALL SELECT
                    '5'
            UNION ALL SELECT
                    '6'
            UNION ALL SELECT
                    '7'
            UNION ALL SELECT
                    '8'
            UNION ALL SELECT
                    '9'
            ) b
        WHERE
            CONVERT(
                CONCAT( a1 ,b1 ) ,
                UNSIGNED
            ) <=(
                SELECT
                    DAY(
                        CONCAT( '2012-10' ,'-01' ) + INTERVAL 1 MONTH - INTERVAL 1 DAY
                    )
            )
            AND CONCAT( a1 ,b1 ) <> '00'
    ) days JOIN(
        SELECT
            '2012-10' AS d
    ) dt
 HAVING
    dates BETWEEN '2012-10-02' AND '2012-10-05'
ORDER BY
    dates
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:28:55.500

我找到了解决方案。使用子查询我可以根据日期间隔返回许多行，这与主查询没有任何关系。所以我有这个：

```
SELECT
    datas. * ,
    m.id_matricula ,
    p.nome
FROM
    tb_matricula m INNER JOIN tb_aluno a
        ON(
        a.id_aluno = m.id_aluno
    ) INNER JOIN tb_perfil p
        ON(
        p.id_perfil = a.id_perfil
    ) ,
    (
        SELECT
            CONCAT( dt.d ,'-' ,days.d ) AS dates
        FROM
            (
                SELECT
                    CONCAT( a1 ,b1 ) AS d
                FROM
                    (
                        SELECT
                            '0' AS a1
                    UNION ALL SELECT
                            '1'
                    UNION ALL SELECT
                            '2'
                    UNION ALL SELECT
                            '3'
                    ) a JOIN(
                        SELECT
                            '0' AS b1
                    UNION ALL SELECT
                            '1'
                    UNION ALL SELECT
                            '2'
                    UNION ALL SELECT
                            '3'
                    UNION ALL SELECT
                            '4'
                    UNION ALL SELECT
                            '5'
                    UNION ALL SELECT
                            '6'
                    UNION ALL SELECT
                            '7'
                    UNION ALL SELECT
                            '8'
                    UNION ALL SELECT
                            '9'
                    ) b
                WHERE
                    CONVERT(
                        CONCAT( a1 ,b1 ) ,
                        UNSIGNED
                    ) <=(
                        SELECT
                            DAY(
                                CONCAT( '2012-02' ,'-01' ) + INTERVAL 1 MONTH - INTERVAL 1 DAY
                            )
                    )
                    AND CONCAT( a1 ,b1 ) <> '00'
            ) days JOIN(
                SELECT
                    '2012-02' AS d
            ) dt
    UNION ALL SELECT
            CONCAT( dt.d ,'-' ,days.d ) AS dates
        FROM
            (
                SELECT
                    CONCAT( a1 ,b1 ) AS d
                FROM
                    (
                        SELECT
                            '0' AS a1
                    UNION ALL SELECT
                            '1'
                    UNION ALL SELECT
                            '2'
                    UNION ALL SELECT
                            '3'
                    ) a JOIN(
                        SELECT
                            '0' AS b1
                    UNION ALL SELECT
                            '1'
                    UNION ALL SELECT
                            '2'
                    UNION ALL SELECT
                            '3'
                    UNION ALL SELECT
                            '4'
                    UNION ALL SELECT
                            '5'
                    UNION ALL SELECT
                            '6'
                    UNION ALL SELECT
                            '7'
                    UNION ALL SELECT
                            '8'
                    UNION ALL SELECT
                            '9'
                    ) b
                WHERE
                    CONVERT(
                        CONCAT( a1 ,b1 ) ,
                        UNSIGNED
                    ) <=(
                        SELECT
                            DAY(
                                CONCAT( '2012-03' ,'-01' ) + INTERVAL 1 MONTH - INTERVAL 1 DAY
                            )
                    )
                    AND CONCAT( a1 ,b1 ) <> '00'
            ) days JOIN(
                SELECT
                    '2012-03' AS d
            ) dt
        ORDER BY
            dates
    ) datas
WHERE
    m.id_matricula = 42
    and
    datas.dates BETWEEN '2012-02-25' AND '2012-03-05'; 
```

为 ID = 42 和 3 天的日期差异运行此语句，我有：

```
DATES,          ID_MATRICULA, NOME
2012-02-25  42        R ANDRE F DOMINGOS
2012-02-26  42        R ANDRE F DOMINGOS
2012-02-27  42        R ANDRE F DOMINGOS 
```

# haskell - 在 Haskell 中对 3 个参数进行柯里化

> ID：13139969
> 
> 赞同：8
> 
> 时间：2012-10-30T13:23:44.100
> 
> 标签：haskell, pointfree

我在使用一个函数来删除 Haskell 中的三个参数时遇到了麻烦。

免责声明：不是课程作业，今天有人向我提出了这个问题，这一直困扰着我。

我们得到的自定义类型/功能是（只能记住类型）

```
type MyThing
  = (Char, String)
type MyThings
  = [MyThing]

funcA :: MyThings -> String -> String
funcB :: MyThings -> String -> Int -> String 
```

我们开始：

```
funcB as str n = iterate (funcA as) str !! n 
```

并将其减少如下：

```
funcB as str n = iterate (funcA as) str !! n
funcB as str = (!!) . (iterate (funcA as)) str
funcB as = (!!) . (iterate (funcA as))
funcB as = (!!) . (iterate . funcA) as 
```

然后，卡住了。我们只是不知道如何避免使用最后一个参数。我知道我以前在某个地方看到过类似的情况，并且有一个解决方案。

希望一些 Haskell 天才能指出我为什么是个白痴……

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T20:25:32.117

您需要的只是运算符部分的以下三个“定律”：

```
(a `op` b) = (a `op`) b = (`op` b) a = op a b
          (1)          (2)          (3) 
```

使操作数进入运算符附近的空闲槽。

这`(.)`意味着：`(a . b) = (a .) b = (. b) a = (.) a b`。所以，

```
f (g x) y !! n      
= (!!) (f (g x) y) n              by (3) 
= ((!!) . f (g x)) y n
= ((!!) . (f . g) x) y n
= ((!!) .) ((f . g) x) y n        by (1)
= (((!!) .) . (f . g)) x y n
= (((!!) .) . f . g) x y n 
```

你应该只做你觉得舒服的无点转换，这样得到的表达式*对你来说仍然是可读的*——事实上，比原来的*更清晰。*“pointfree”工具有时会产生不可读的结果。

停在中间是完全可以的。如果您手动完成它太难了，那么您可能也很难阅读它。

`((a .) . b) x y = (a .) (b x) y = (a . b x) y = a (b x y)`是一种*常见的模式*，您将很快学会立即识别。所以上面的表达式可以很容易地读回

```
(!!) ((f . g) x y) n = f (g x) y !! n 
```

考虑到这`(.)`是关联的：

```
(a . b . c) = ((a . b) . c) = (a . (b . c)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T13:27:46.233

```
funcB = ((!!) .) . iterate . funcA 
```

我想你做了所有的努力，只剩下一小步了。

您确实可以使用[pointfree](http://hackage.haskell.org/package/pointfree)自动执行此操作。请参阅[HaskellWiki 页面](http://www.haskell.org/haskellwiki/Pointfree)

正如它在[github 自述](https://github.com/benmachine/pointfree)文件中所说，一旦你安装了它，你可以编辑你的`ghci.conf`or`.ghci`文件

```
:def pf \str -> return $ ":! pointfree \"" ++ str ++ "\"" 
```

然后在 ghci 中键入

```
:pf funcB as = (!!) . (iterate . funcA) as 
```

甚至

```
:pf funcB as str n = iterate (funcA as) str !! n 
```

你得到

```
funcB = ((!!) .) . iterate . funcA 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-30T17:45:22.680

*对我*来说，关键的观察是中缀运算符可以写成前缀：

```
funcB as = (!!) . (iterate . funcA) as
funcB as = (.) (!!) ((iterate . funcA) as) 
```

一旦你到达这里，你就有一半的机会认识到这是一个组合，`(.) (!!)`作为第一个参数和`iterate . funcA`第二个参数：

```
funcB as = (  ((.) (!!)) . (iterate . funcA)  ) as 
```

现在很清楚如何简化这一点；在那之后，关于如何编写它有很多审美选择。例如，我们可能会观察到它`(.)`是关联的，因此我们可以去掉一些括号；`((.) (!!))`同样，如果您认为这样更易读，我们可以使用运算符部分来合并难看的部分。

```
funcB = (  ((.) (!!)) . (iterate . funcA)  )
funcB = (.) (!!) . iterate . funcA -- uncontroversial parenthesis removal
funcB = ((!!) .) . iterate . funcA -- possibly controversial section rewrite 
```

顺便说一句，我不认为你推导的开头是正确的。您得出了正确的结论，但中间步骤不正确。更正后，它应该如下所示：

```
funcB as str n = iterate (funcA as) str !! n
funcB as str n = (!!) (iterate (funcA as) str) n
funcB as str = (!!) (iterate (funcA as) str)
funcB as = (!!) . iterate (funcA as) 
```

# android - 覆盖android ICS中的Home键

> ID：13139970
> 
> 赞同：2
> 
> 时间：2012-10-30T13:23:44.753
> 
> 标签：android, home-button

我需要在我的应用程序中覆盖 HOME 键。我使用了[这篇文章](http://nisha113a5.blogspot.ro/2012/01/intercept-home-key-android.html)中的代码，但它不适用于 android 4.X。您知道完成此任务的其他解决方法吗？我在本机电话应用程序（在 android 2.2 上）中看了一点，但我找不到覆盖 HOME 按钮的代码在哪里，但我在所有项目中搜索了文本“TYPE_KEYGUARD”，而我的 ide 不能找到任何东西，这让我觉得还有另一种方法可以抑制 HOME 键。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:29:07.407

在 ICS 即 Android 4+ 之后，出于安全原因，已删除了 HomeButton 的覆盖，以便在应用程序被证明是恶意软件的情况下允许用户退出。

另外，不让用户离开应用程序并不是一个很好的做法。但是，如果您的应用程序需要，您可以将活动声明为**Launcher**，这样当按下 HomeButton 时，它会简单地重新启动您的应用程序并自行保持在那里（用户只会注意到屏幕上的轻微闪烁）。

**编辑＃1：**这是[另一种解决方法](https://stackoverflow.com/questions/10077675/disable-home-button-in-android-ics-4-0)，更适合您的需求。

**编辑＃2：**刚刚遇到[这个。](http://dharmendra4android.blogspot.in/2012/05/override-home-button-in-android.html)没有测试过。但看起来有点前途无量。不确定它是否会起作用，但你可以试一试。

# wcf - 在 WCF 中添加端点

> ID：13139972
> 
> 赞同：1
> 
> 时间：2012-10-30T13:23:53.690
> 
> 标签：wcf

我有一项服务，它适用于这样的 URL`http://localhost:1253/NotificationProducer`

然后我尝试在服务器端添加一个端点，它将像这样监听 URL：`http://localhost:1253/NotificationProducer/1`

BasemanagerReference 是`http://localhost:1253/NotificationProducer`

```
ServiceHost svcHost = new ServiceHost(typeof(NotificationProducer), new Uri( BaseResources.baseManagerReference ));

svcHost.AddServiceEndpoint(typeof(INotificationProducer),
                           new WSHttpBinding(),
                           new Uri(BaseResources.baseManagerReference),
                           new Uri(BaseResources.baseManagerReference+"/"+id));

List<string> endpointslist = new List<string>();

foreach (var endpoint in svcHost.Description.Endpoints)
{
    .Add(endpoint.Address.Uri.AbsoluteUri);
} 
```

但是在所有这些操作之后，我的端点列表仅包含`http://localhost:1253/NotificationProducer` 并且当我以编程方式将客户端中的端点地址更改为`http://localhost:1253/NotificationProducer/1`我捕获到一个错误时，它告诉我，该地址上没有侦听器。

那么如何正确添加端点或侦听器？抱歉，我是 WCF 的新手，没有使用这些功能，也没有在 msdn 上找到答案。

# c# - WebGrid 不在页面之间保持选中状态

> ID：13139975
> 
> 赞同：0
> 
> 时间：2012-10-30T13:23:59.283
> 
> 标签：c#, razor, webgrid

我有一个运行良好的网络网格

```
@{
                    var DB = Database.Open("CHAVI");
                    var grid = new WebGrid(DB.Query("SELECT [FileTrackingTag], FileID FROM (SELECT [FileTrackingTag], FileID, ROW_NUMBER() OVER (PARTITION BY [FileTrackingTag] ORDER BY FileID) rn FROM [dbo].[MasterSequence]) t WHERE rn=1 ORDER BY [FileTrackingTag]"));
                    @grid.GetHtml(
                        tableStyle: "webgrid",
                        columns: grid.Columns(
                            grid.Column(header: "Assign? ", style: "labelcolumn",
                                    format:
                                        @<text><input class="check-box" id="assignChkBx" name="assignChkBx" type="checkbox" value="@item.FileTrackingTag" /></text>),
                            grid.Column("FileTrackingTag", "FileTrackingTag")
                            )
                    )
                 } 
```

但是，当我在 WebGrid 上的不同选项卡之间切换时选中多个框时，只有当前选项卡上的那些会被发送过来（它仍然是同一个网页，它只是在 webgrid 的条目中切换）

有没有办法将它们保留在 webgrid 选项卡之间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:48:18.053

我不知道有任何内置方法可以完成您所说的内容。WebGrid 分页仅通过选择需要在给定时间显示的数据来工作。如果您查看为网页生成的 HTML，您会发现那里只有“当前”项目。

由于其他页面的数据甚至不在您的网页中，MVC 无法知道它们。您最好的选择实际上是在您的控制器上创建一个操作，并在页面在网格上更改时发布当前项目。您会将这些发布的项目存储在一些临时存储中（缓存、TempData 等）。然后，当用户单击 Save 时，您需要保存发布到 Save 方法的项目和临时存储集合中的项目。

在一路走下去之前，我会仔细检查最终用户，确保这是他们真正想要和期望的。正确实施需要大量的工作，当您更新他们实际上无法在屏幕上看到的记录时，它可能会得出一些结论。其他选项是禁用分页并使用不同的控件，或者使用某种类型的向导流程来明确您在每个“页面”之后保存结果。

# javascript - 是否可以在函数中定义 Jasmine 规范并仍然将 beforeEach 应用于它？

> ID：13139977
> 
> 赞同：8
> 
> 时间：2012-10-30T13:24:02.373
> 
> 标签：javascript, unit-testing, jasmine

我有很多几乎相同的测试。为了 DRY 和可扫描性，我想将测试抽象为一个函数，然后用几个参数调用该函数。然后该函数将调用`it`该规范并将其添加到套件中。

它似乎工作，除了规范没有以与其他规范相同的方式运行，并且`beforeEach`没有在公共函数中定义的规范之前调用。

```
define(['modules/MyModule','jasmine/jasmine'], function(MyModule) {

    describe('myModule', function() {

        function commonTests(params) {
            it('should pass this test OK', function() {
                expect(true).toBe(true);
            });

            it('should fail because module is undefined', function() {
                expect(module[params.method]()).toBe('whatever');
            });
        }

        var module;

        beforeEach(function() {
            module = new MyModule();
        });

        describe('#function1', function() {
            commonTests({
                method: 'function1'
            });
        });

        describe('#function2', function() {
            commonTests({
                method: 'function2'
            });
        });

    });

}); 
```

有什么办法可以做到这一点并保持 and 的功能`beforeEach`吗`afterEach`？

**更新：**

看来我的例子错了，对不起。这是失败的情况：

```
define(['modules/MyModule'], function(MyModule) {

    function commonTests(params) {
        it('will fail because params.module is undefined', function() {
            expect(typeof params.module).toBe('object');
            expect(typeof params.module[params.method]).toBe('function');
        });

        it('has a few tests in here', function() {
            expect(true).toBe(true);
        });
    }

    describe('MyModule', function() {

        var module;

        beforeEach(function() {
            module = new MyModule();
        });

        describe('#function1', function() {
            commonTests({
                module: module,
                method: 'function1'
            });
        });

        describe('#function2', function() {
            commonTests({
                module: module,
                method: 'function2'
            });
        });

    });
}); 
```

我认为它失败了，因为值`module`被保留为调用的一部分，而不是像第一个示例`commonTests`中那样始终使用当前值。`module`当我到达那里时，我会发布我的解决方案......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:39:29.857

感谢 Andreas 指出我的第一个示例确实有效！我使用的最终解决方案非常相似：

```
define(['modules/MyModule'], function(MyModule) {

    var module;

    function commonTests(params) {
        it('will not fail because module is shared', function() {
            expect(typeof module).toBe('object');
            expect(typeof module[params.method]).toBe('function');
        });

        it('has a few tests in here', function() {
            expect(true).toBe(true);
        });
    }

    describe('MyModule', function() {

        beforeEach(function() {
            module = new MyModule();
        });

        describe('#function1', function() {
            commonTests({
                method: 'function1'
            });
        });

        describe('#function2', function() {
            commonTests({
                method: 'function2'
            });
        });

    });
}); 
```

尽管如果您需要能够`module`作为参数传递给`commonTests`您，则必须采用稍微不同的方法并为每个`it`块具有不同的功能：

```
define(['modules/MyModule'], function(MyModule) {

    var module;

    function commonTest1(params) {
        expect(typeof module).toBe('object');
        expect(typeof module[params.method]).toBe('function');
    }

    function commonTest2(params) {
        expect(true).toBe(true);
    }

    describe('MyModule', function() {

        beforeEach(function() {
            module = new MyModule();
        });

        describe('#function1', function() {

            it('will not fail because module is shared', function() {
                commonTest1({ method: 'function1' });
            });

            it('has a few tests in here', function() {
                commonTest2({ method: 'function1' });
            });

        });

        describe('#function2', function() {

            it('will not fail because module is shared', function() {
                commonTest1({ method: 'function2' });
            });

            it('has a few tests in here', function() {
                commonTest2({ method: 'function2' });
            });

        });

    });
}); 
```

这样，包含公共测试的函数的执行将延迟到 beforeEach 运行其回调之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T22:11:24.980

是的，这种情况对我们来说很好。我们使用 chutzpah 在我们的门控签入中运行测试，如果没有这些`afterEach`功能，我们的测试将失败。

但这`define`条线看起来像`require.js`。我们有几个问题......我想这`MyModule`是`undefined`或没有按预期定义。您是否尝试在`beforeEach`方法中设置断点以查看它是否被调用以及`MyModule`具有什么值？你怎么称呼测试？

当我在没有该`define`行的情况下运行您的代码时，该`beforeEach`函数被称为 4x - 正如预期的那样。顺便说一句，我使用 chutzpah.console.exe 来调用测试。

编辑：

是的，现在我可以在我的电脑上重现这个问题了。这对我来说更清楚。一开始`module`是未定义的，因为每个变量首先是未定义的。`beforeEach`然后你使用和注册你的功能在茉莉花中`describe`。Jasmine 从评估开始

```
function() {
    commonTests({
        module: module,
        method: 'function1'
    });
} 
```

这是传递给第一个`describe`。在这一行，`module: module`JS 复制了对新对象属性的*引用*和到目前为止的this 引用。当回调被调用时，它会将 的引用更改为正确的值，但错误的引用已被复制...`var module``module``undefined``beforeEach``var module`

我试图移到`var module`上面`function commonTests`并在测试中使用该变量，而不是`params.module`它们按预期通过。我不知道这是否是您环境中的一个选项，但我希望它有所帮助。

问候，安德烈亚斯

# html - 在 flash/html 中同步两个定时器

> ID：13139979
> 
> 赞同：0
> 
> 时间：2012-10-30T13:24:06.890
> 
> 标签：html, flash

我正在建立一个带有两个倒数计时器的简单网站。问题是它们不同步。当网页加载时，一个计时器明显领先于另一个。这是使用的html

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css" media="screen">

    #flashContent { width:100%; height:100%; }

    </style>
</head>

<body >

<div id="flashContent" align="center" >

        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="400" height="250" id="Timer" align="middle">
            <param name="movie" value="Timer.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
            <param name="play" value="true" />
            <param name="loop" value="true" />
            <param name="wmode" value="transparent" />
            <param name="scale" value="showall" />
            <param name="menu" value="true" />
            <param name="devicefont" value="false" />
            <param name="salign" value="" />
            <param name="allowScriptAccess" value="sameDomain" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="Timer.swf" width="400" height="250">
                <param name="movie" value="Timer.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="transparent" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
            <!--<![endif]-->
                <a href="http://www.adobe.com/go/getflash">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                </a>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object>

        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="400" height="250" id="Timer" align="middle">
            <param name="movie" value="Timer.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
            <param name="play" value="true" />
            <param name="loop" value="true" />
            <param name="wmode" value="transparent" />
            <param name="scale" value="showall" />
            <param name="menu" value="true" />
            <param name="devicefont" value="false" />
            <param name="salign" value="" />
            <param name="allowScriptAccess" value="sameDomain" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="Timer.swf" width="400" height="250">
                <param name="movie" value="Timer.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="transparent" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
            <!--<![endif]-->
                <a href="http://www.adobe.com/go/getflash">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                </a>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object>

        </div>

</body> 
```

我在 Flash vid 中使用了两层。一个有背景元素（包括计时器的动态文本），一个只有这段代码：

停止（）;

var countDownTimer:Timer = new Timer(10);

countDownTimer.addEventListener(TimerEvent.TIMER, updateTimer);

countDownTimer.start();

函数更新定时器（事件：定时器事件）：无效{

```
var today:Date = new Date();
var destination:Date = new Date(2012,10,9,18,0,0,0);

if(destination.getTime()-today.getTime() < 0 ){

    Time_txt.text = "00:00:00:00";
    Title_txt.text = "It's Double Time!";

}else{

var daysLeft = Math.floor((destination.getTime()-today.getTime())/(1000*60*60*24));
var hoursLeft = Math.floor(((destination.getTime()-today.getTime())/(1000*60*60))-daysLeft*24);
var minutesLeft = Math.floor(((destination.getTime()-today.getTime())/(1000*60))-daysLeft*24*60-hoursLeft*60);
var secondsLeft = Math.floor(((destination.getTime()-today.getTime())/(1000))-daysLeft*24*60*60-hoursLeft*60*60-minutesLeft*60);

var days:String = new String(daysLeft);
var hours:String = new String(hoursLeft);
var minutes:String = new String(minutesLeft);
var seconds:String = new String(secondsLeft);

if(days.length < 2) days = "0" + days;
if(hours.length < 2) hours = "0" + hours;
if(minutes.length < 2) minutes = "0" + minutes;
if(seconds.length < 2) seconds = "0" + seconds;

var time:String = days +":"+ hours+":"+minutes+":"+seconds;

Time_txt.text = time;
Title_txt.text = "Jazz awaits in...";
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:21:27.670

使用 LocalConnection（下面的链接）在两个文件之间创建连接。运行计时器...然后在您的 updateTime() 方法中，将计时器文本通过连接传递到另一个 swf。快！

localConnection.send("myConnection", "updateMethodName", time);

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html)

# ios - 可访问性更改时，MKNetworkKit 操作不会恢复/完成

> ID：13139988
> 
> 赞同：6
> 
> 时间：2012-10-30T13:24:41.443
> 
> 标签：ios, network-programming, mknetworkkit, mknetworkengine

我是新来的`MKNetworkKit`，但我已经能够将它添加到我的项目中，并且除了处理可达性更改外，它运行良好。

情况如下：

1.  我禁用 WiFi 并运行应用程序。
2.  即使没有可达性，我通过从我的子类`POST`创建一个来请求（使用）一些数据。在请求数据之前，该操作被设置为可冻结（根据[Mugunth Kumar 的文档](http://blog.mugunthkumar.com/products/ios-framework-introducing-mknetworkkit/#Freezing_operations)）。`MKNetworkOperation``MKNetworkEngine`
3.  启用 WiFi 后，调用`checkAndRestoreFrozenOperations`in`MKNetworkEngine`并检测到有一个挂起的操作（创建的没有可达性的操作），它试图入队。
4.  在那之后，我的`onCompletion`块永远不会被调用。

关于冻结操作+可达性有什么我不明白的`MKNetworkKit`吗？冻结是否仅适用于请求开始后可达性发生变化的操作？或者我应该实现自己的*可达性更改*块？

这是我的`MKNetworkEngine`子类中创建操作并启动请求的代码。请注意，不相关的代码已被禁止。

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:@"value" forKey:@"param"];
MKNetworkOperation *op = [self operationWithPath:MYPATH
                                          params:params
                                      httpMethod:@"POST"];
[op setFreezable:YES];

[op onCompletion:^(MKNetworkOperation *completedOperation) {
   // ...
   // Here is where I process response and send the result to my completion block
   // It's called when WiFi is available, but not called otherwise.
   // ...
} onError:^(NSError *error) {
   // It's called when WiFi is available, but not called otherwise.
    DLog(@"Some error");
}];

[self enqueueOperation:op];

return op; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T04:42:58.677

这是两个独立的问题：恢复与完成。

1.  **resume：**冻结/解冻机制仅在启用缓存时有效

    您必须在 AppDelegate -didFinishLaunchingWithOptions 中调用 -useCache：

    ```
    self.networkEngine = [[MKNetworkEngine alloc] init ...];
    [self.networkEngine useCache]; // <- Add this line 
    ```

2.  **complete：**网络状态改变时（即Unfreeze后）*不*调用完成回调

    然而，如果你采取行动 (1.) 并在 MKNetworkOperation.m **-checkAndRestoreFrozenOperations**中放置一个断点：

    ```
    [self enqueueOperation:pendingOperation] 
    ```

    你会发现它是在网络连接恢复时调用的，而**pendingOperation** *就是*你的等待POST。然而，由于一个新的 MKNetworkOperation 已经被实例化（并且到那时完成块可能不再存在）你的`onCompletion`块永远不会被调用。一种可能的解决方法是使用通知而不是回调。

3.  **完整修复：**比 (2) 更强大的跨启动方法是`^{}`用 NSNotifications 替换块回调。尽早注册您的听众，就像在您的 AppDelegate 中一样。以下是使 MKNetworkKit 通知精通所需的最小更改：

    **3a。**在 MKNetworkOperation.h 中插入通知常量

    ```
    #define MKNetworkOperationCompletionNotification @"MKNetworkOperationCompletionNotification"
    #define MKNetworkOperationErrorNotification @"MKNetworkOperationErrorNotification" 
    ```

    **3b。**在 MKNetworkOperation.m -operationSucceeded 中广播成功通知（注意我使用 postNotificationOnMainThread 以便可以从主线程收听所述通知并更改 UI；请参阅[主线程上的 NSOperation 和 NSNotificationCenter](https://stackoverflow.com/questions/1973106/nsoperation-and-nsnotificationcenter-on-the-main-thread)）：

    ```
    -(void) operationSucceeded {
        NSDictionary * aUserInfo = [NSDictionary dictionaryWithObjectsAndKeys:
            self, NSStringFromClass([MKNetworkOperation class]),
            nil];
        NSNotification * notification = [NSNotification notificationWithName:MKNetworkOperationCompletionNotification
            object:nil
            userInfo:aUserInfo];
        [[NSNotificationCenter defaultCenter] postNotificationOnMainThread:notification];
        ... 
    ```

    **3c。**在 MKNetworkOperation.m -operationFailedWithError 中广播失败通知

    ```
    -(void) operationFailedWithError:(NSError*) error {
        self.error = error;
        NSDictionary * aUserInfo = [NSDictionary dictionaryWithObjectsAndKeys:
            self,   NSStringFromClass([MKNetworkOperation class]),
            error,  NSStringFromClass([NSError class]),
            nil];
        NSNotification * notification = [NSNotification notificationWithName:MKNetworkOperationErrorNotification
            object:nil
            userInfo:aUserInfo];

        [[NSNotificationCenter defaultCenter] postNotificationOnMainThread:notification];
        ... 
    ```

    **3d。**注册一个相当持久的对象，例如 AppDelegate，作为侦听器（不要忘记取消注册）：

    ```
     // Listen to POST changes
        NSNotificationCenter *defaultCenter = [NSNotificationCenter defaultCenter];
        [defaultCenter addObserver:self
            selector:@selector(mkNetworkOperationCompletionNotification:)
            name:MKNetworkOperationCompletionNotification
            object:nil];
        [defaultCenter addObserver:self
            selector:@selector(mkNetworkOperationErrorNotification:)
            name:MKNetworkOperationErrorNotification
            object:nil]; 
    ```

    **3e。**监听器的示例代码如下：

    ```
    - (void)mkNetworkOperationCompletionNotification:(NSNotification*)notification {
        MKNetworkOperation *operation = [[notification userInfo]
            objectForKey:NSStringFromClass([MKNetworkOperation class])];
        NSLog(@"operationSucceeded: %@", [operation responseString]);
    }

    - (void)mkNetworkOperationErrorNotification:(NSNotification*)notification {
        NSError * error = [[notification userInfo] objectForKey:NSStringFromClass([NSError class])];
        NSLog(@"operationFailedWithError: %@", [error localizedDescription]);
    } 
    ```

这样做，你就完成了。X。

（*已编辑以删除先前答案中对 MKNetworkOperation.h 的不必要的建议更改，并添加了第 3 段以展示如何克服 ^{} 限制。*）

# android - GCMRegistrar getRegistrationId 返回空 ID

> ID：13139998
> 
> 赞同：11
> 
> 时间：2012-10-30T13:25:16.670
> 
> 标签：android, google-cloud-messaging

> **可能重复：**
> [Android GCM：GCMRegistrar 提供空注册 ID](https://stackoverflow.com/questions/11341305/android-gcm-gcmregistrar-gives-empty-registration-id)

我已经按照[编写服务器端应用程序](http://developer.android.com/guide/google/gcm/gs.html#server-app)在我的应用程序中实现 GCM，但是

```
 final String regId = GCMRegistrar.getRegistrationId(this); 
```

返回空。每时每刻。

我正确放置了所有权限。

有代码：

```
 public void registerPush(){

  GCMRegistrar.checkDevice(this);
  GCMRegistrar.checkManifest(this);
  final String regId = GCMRegistrar.getRegistrationId(this);
  REG_ID = regId;
  if (regId.equals("")) {
   GCMRegistrar.register(this, this.getString(R.string.SENDER_ID));
  } else {
   if (GCMRegistrar.isRegisteredOnServer(this)) {
    // Skips registration.
   } else {
    // Try to register again, but not in the UI thread.
    // It's also necessary to cancel the thread onDestroy(),
    // hence the use of AsyncTask instead of a raw thread.
    final Context context = this;
    mRegisterTask = new AsyncTask<Void, Void, Void>() {
     @Override
     protected Void doInBackground(Void... params) {
      boolean registered = forceRegister(context, regId);
      // At this point all attempts to register with the app
      // server failed, so we need to unregister the device
      // from GCM - the app will try to register again when
      // it is restarted. Note that GCM will send an
      // unregistered callback upon completion, but
      // GCMIntentService.onUnregistered() will ignore it.

      if (!registered) {
       GCMRegistrar.unregister(context);
      }
      return null;
     }

     @Override
     protected void onPostExecute(Void result) {
      mRegisterTask = null;
     }

    };
    mRegisterTask.execute(null, null, null);
   }
  }
 } 
```

谢谢您的帮助！

**编辑：**清单.xml

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

<permission
    android:name="package.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="package.permission.C2D_MESSAGE" />

<application>
      <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="package" />
        </intent-filter>
    </receiver>

    <service android:name="package.GCMIntentService" />

</application> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-31T00:50:07.653

为我解决的问题是设备卡在 WAKE LOCK 中。

长话短说，日志指出了它试图在这里找到我的服务的事实：

> IntentService 类：com.myapppackage.GCMIntentService

我希望它指向这里：

> IntentService 类：com.myapppackage.gcm.GCMIntentService

所以我扩展了广播接收器如下：

```
package com.myapppackage.gcm;

import android.content.Context;

public class GCMBroadcastReceiver extends
        com.google.android.gcm.GCMBroadcastReceiver {

    @Override
    protected String getGCMIntentServiceClassName(Context context) {

        return "com.myapppackage.gcm.GCMIntentService";
    }
} 
```

然后我更新了清单以反映更改：

```
<receiver 
    android:name="com.myapppackage.gcm.GCMBroadcastReceiver" 
    android:permission="com.google.android.c2dm.permission.SEND" >
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
        <category android:name="com.myapppackage" />
    </intent-filter>
</receiver> 
```

这在此处的文档中进行了解释（第 5 点）：

> [http://developer.android.com/guide/google/gcm/gs.html#android-app](http://developer.android.com/guide/google/gcm/gs.html#android-app)
> 
> 此意图服务将由 GCMBroadcastReceiver（由 GCM 库提供）调用，如下一步所示。它必须是 com.google.android.gcm.GCMBaseIntentService 的子类，必须包含公共构造函数，并且应该命名为 my_app_package.GCMIntentService（除非您使用覆盖用于命名服务的方法的 GCMBroadcastReceiver 的子类）。

我能说什么，我是金牛座，我喜欢妥善整理我的东西！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:49:25.030

你在打电话

```
final String regId = GCMRegistrar.getRegistrationId(this); 
```

前

```
GCMRegistrar.register(this, this.getString(R.string.SENDER_ID)); 
```

第一次运行应用程序时它尚未注册。

还要检查 GCMIntentService 类是否有一个空的构造函数：

```
public class GCMIntentService extends GCMBaseIntentService {

    public GCMIntentService() {
        super(SENDER_ID);
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {       
        Log.i("GCMIntentService", "Device registered: regId = " + registrationId);
    }
} 
```

并且也放`SENDER_ID`为`public static final String SENDER_ID = "YOUR_GOOGLE_PROYECT_ID";`.

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:43:35.967

当您安装应用程序时，Registraion id 将在第一次为空。所以请在此处将字符串 regestraionId 设为**静态**并在 GCMIntentService.java 上进行更改

```
@Override
protected void onRegistered(Context context, String registrationId) {
    Log.i(TAG, "Device registered: regId = " + registrationId);
    yourcallingactivity.regId = registrationId;
    CommonUtilities.displayMessage(context, getString(R.string.gcm_registered));
    ServerUtilities.register(context, registrationId);

} 
```

# c# - 获取当前当地时间

> ID：13139999
> 
> 赞同：0
> 
> 时间：2012-10-30T13:25:18.493
> 
> 标签：c#, android, datetime, xamarin.android

当用户进行预订时，我有在服务器中执行的代码。该代码获取当前的通用时间。

现在我可以根据时区更改时间吗？目前我想使用澳大利亚的时间，即使服务器在美国。

我该怎么做。

我目前的代码是：

```
booking.CreateDateTime = DateTime.Now.ToUniversalTime(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:29:17.313

您可以使用`TimeZoneInfo`

```
DateTime hwTime = new DateTime(2007, 02, 01, 08, 00, 00);
try
{
   TimeZoneInfo hwZone = TimeZoneInfo.FindSystemTimeZoneById("Hawaiian Standard Time");
   Console.WriteLine("{0} {1} is {2} local time.", 
           hwTime, 
           hwZone.IsDaylightSavingTime(hwTime) ? hwZone.DaylightName : hwZone.StandardName, 
           TimeZoneInfo.ConvertTime(hwTime, hwZone, TimeZoneInfo.Local));
}
catch (TimeZoneNotFoundException)
{
   Console.WriteLine("The registry does not define the Hawaiian Standard Time zone.");
}                           
catch (InvalidTimeZoneException)
{
   Console.WriteLine("Registry data on the Hawaiian STandard Time zone has been corrupted.");
} 
```

但我也建议使用具有很多功能和支持的[Noda Time](http://code.google.com/p/noda-time/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:33:48.817

无论在哪里进行预订，我都会亲自将日期作为 UTC 存储在服务器上。当您在客户端上显示此预订时，只需将 UTC 转换回本地时间。

或者，如果您想在不实际在澳大利亚的情况下将时间视为澳大利亚时间..

```
 TimeZoneInfo tzi = TimeZoneInfo.FindSystemTimeZoneById("AUS Eastern Standard Time");
        DateTime UKTime = DateTime.Now;
        Console.WriteLine("United Kingdom Time {0}", UKTime);
        DateTime CurrentUTC = UKTime.ToUniversalTime();
        Console.WriteLine("UTC Time {0}", UKTime);
        DateTime OzzieTime = TimeZoneInfo.ConvertTimeFromUtc(CurrentUTC, tzi);
        Console.WriteLine("Ozzie Time {0}",OzzieTime);
        Console.ReadLine(); 
```

哪个产生...

```
United Kingdom Time 31/10/2012 00:30:10
UTC Time 31/10/2012 00:30:10
Ozzie Time 31/10/2012 11:30:10 
```