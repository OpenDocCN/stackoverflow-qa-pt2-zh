# StackOverflow 问答 15942000-15942999

# ios - AFNetworking setCompletionBlockWithSuccess 异步

> ID：15942000
> 
> 赞同：0
> 
> 时间：2013-04-11T06:22:53.927
> 
> 标签：ios, afnetworking

我是一个新的iOS开发人员，所以这个问题可能很傻，但我不知道如何解决这种问题。有人可以给我一些提示。

在下面的代码中，我使用 AFNetworking 类，并尝试打印 1,2,3，但我猜`setCompletionBlockWithSuccess`有一个异步机制让我的代码总是打印 1,3,2。

那么我应该如何打印 1,2,3 呢？

```
AFHTTPRequestOperation *operation=[[AFHTTPRequestOperation alloc] initWithRequest:request];

NSLog(@"1");

       [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
           NSLog(@"2");

                 } failure:^(AFHTTPRequestOperation *operation, NSError *error) {

               NSLog(@"2");

                        }
        ];

[operation start];

NSLog(@"3"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:25:52.957

`setCompletionBlockWithSuccess:`是一种异步方法。您传递给该方法的块将在异步方法完成后被调用。您可能还想阅读块编程：http: [//developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)

# c# - Datagridview.datasource=null

> ID：15942003
> 
> 赞同：0
> 
> 时间：2013-04-11T06:22:59.153
> 
> 标签：c#

我想过滤数据网格视图中的数据。我想用下面的代码做到这一点：

```
DataView view = new DataView();
DataTable dt = new DataTable();
dt = Tbl_events.DataSource as DataTable;
view = dt.DefaultView; 
view.RowFilter = "Type='1301'";
Tbl_events.DataSource = view; 
```

这给了我一个空的datagridview。调试代码时，我在这一行看到：

```
dt = Tbl_events.DataSource as DataTable;
Tbl_events.DataSource = null; 
```

但是datagridview Tbl_events中有数据。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:40:36.670

试试这个代码：

您正在使用添加行。首先转换为数据表，然后使用过滤并将数据表添加到 datagridview

```
 foreach (DataGridViewColumn c in dataGridView1.Columns)
            {
                dt.Columns.Add(new DataColumn(c.HeaderText.ToString()));
            }

        for (int row = 0; row < dataGridView1.Rows.Count; row++)
        {
            // create a new dt row to match up with the rows in the DGV
            DataRow dr = dt.NewRow();
            int column = 0;
            foreach (DataGridViewColumn c in dataGridView1.Columns)
            {
                //Sure you can see what this is doing.
                dr[c.HeaderText.ToString()] = dataGridView1.Rows[row].
                   Cells[column].Value;
                column++;
            }

            //now i add the row to the data table.
            dt.Rows.Add(dr);
        }

        dataGridView1.Rows.Clear();
 dt = dt.Select("Type='1301'").CopyToDataTable();
            dataGridView1.DataSource = dt; 
```

编辑

```
 DataView view = new DataView();
            view = dt.DefaultView;
            view.RowFilter = "Type='1301'"
 dataGridView1.DataSource = view; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:43:58.370

view.RowFilter = "类型='1301'";

view.RowStateFilter = DataViewRowState.CurrentRows;

// 下面调用不同的方法来显示

// 数据视图内容。

Tbl_events.DataSource = DataView1;

Tbl_events.DataBind();

# c++ - blitz++ 多维数组，稍后声明它的维度

> ID：15942006
> 
> 赞同：1
> 
> 时间：2013-04-11T06:23:11.637
> 
> 标签：c++, arrays, multidimensional-array, containers, blitz++

好的，我知道一种在 blitz 中声明多维数组的方法。你会这样做：

```
blitz::Array<double, 3> blitzArray( 3, 4, 5 ); 
```

并像这样访问元素：

```
blitzArray(0,0,0) = 1.0001; 
```

但是，如果我想声明数组而不在开头指定维度怎么办。你看，尺寸总是变化的。就像第一个维度会从 3 开始，然后变成 8，然后是 2，以此类推。其他维度也是如此。现在我有这些维度的循环。我的代码解析文件并可以输入尺寸。所以我可以做类似的事情：

```
blitz::Array<double, 3> blitzArray;    //declaration
//later in the program after doing stuff
f=0
for(i=0;i<n;i++){
 for(j=0;j<m;++j){
  for(k=0;k<o;++k){       //n,m,o are decided by some other constraints, doesn't matter
   blitzArray(i,j,k)=foo[f++]; //foo is a vector<double> 
```

所以在这里我正在制作一个数组数组，并在每个数组单元格中输入 foo 向量中的内容。但尺寸不断变化。

# hibernate - ORA-00917: 在休眠中使用自定义 oracle 序列时缺少逗号错误

> ID：15942010
> 
> 赞同：1
> 
> 时间：2013-04-11T06:23:14.413
> 
> 标签：hibernate

嗨，当我尝试在休眠中使用我的 oracle db 序列时，我收到了这个错误。我正在使用这个声明：

```
@Entity
@Table(name = "T_USER_DETAILS")
public class User {

@GenericGenerator(name = "generator",strategy = "sequence-identity",parameters = { @Parameter(name = "sequence",value = "USER_ID_SEQ")} )
@Id 
@GeneratedValue(generator = "generator")
@Column(name = "USER_ID")
private int userid;

.. 
```

并使用它来持久化我的实体实例：

```
 session = sessionFactory.openSession();

        //creating the new transaction from the above created session that is starting a new unit of work
        transaction = session.beginTransaction();

        session.save(user);
        transaction.commit();
        System.out.println("User saved successfully in the database");
        }
        catch(Exception ex)
        { 
```

但我收到错误：

```
Apr 11, 2013 11:10:20 AM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: ORA-00917: missing comma

caught : ORA-00917: missing comma 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:13:44.213

在 Oracle 中，正确`USER_ID_SEQ.nextval`的语法可能就是您的语法错误的来源。

这是一个示例线程，其中包含一些您可以参考的代码：[HIbernate issue with Oracle Trigger for generate id from a sequence](https://stackoverflow.com/questions/8002119/hibernate-issue-with-oracle-trigger-for-generating-id-from-a-sequence)

[编辑]从链接尝试使用...

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO, generator="a1")
@SequenceGenerator(name="a1", sequenceName="USER_ID_SEQ")
@Column(name = "USER_ID")
private int userid; 
```

...并升级到最新的 Hibernate JAR

# android - 获取应用的 url scheme

> ID：15942011
> 
> 赞同：4
> 
> 时间：2013-04-11T06:23:21.870
> 
> 标签：android, url-scheme

我怎样才能获得`URL Scheme`一个应用程序，以便我可以在我的应用程序中打开该应用程序。我已经搜索过，我得到的内容如下：

```
<intent-filter>
            <action android:name="android.intent.action.GALLERY" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="cedemo" android:host="com.cedemo.scan" />

        </intent-filter> 
```

有人可以帮我解决这个问题吗@Thanks

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-11-19T09:32:46.590

允许其他应用程序启动您的活动[http://developer.android.com/training/basics/intents/filters.html](http://developer.android.com/training/basics/intents/filters.html)

# boost - boost::pool<>::malloc 和 boost::pool<>::ordered_malloc 有什么区别，什么时候应该使用 boost::pool<>::ordered_malloc？

> ID：15942012
> 
> 赞同：17
> 
> 时间：2013-04-11T06:23:37.887
> 
> 标签：boost, pool

我正在使用 boost.pool，但我不知道何时使用`boost::pool<>::malloc`and `boost::pool<>::ordered_malloc`？

所以，

1.  `boost::pool<>::malloc`和有什么区别`boost::pool<>::ordered_malloc`？

2.  我应该什么时候使用`boost::pool<>::ordered_malloc`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-04-01T07:28:36.953

首先，我们应该知道 Boost Pool 库背后的基本思想：`simple_segregated_storage`它类似于单链表，负责将内存块划分为固定大小的块： ![在此处输入图像描述](https://i.stack.imgur.com/3Uhs6.png)

内存池保存一个空闲的内存块列表。所以我们提到了块和块：内存池使用`new`或`malloc`分配一个内存块并将其划分为许多具有相同大小的内存块。
假设地址是8对齐的，4个字节用于存储下一个块的地址，那么一个内存块（8字节* 32个块）如下（内存地址只是为了说明问题，不是真实的）：
![一个内存块](https://i.stack.imgur.com/jt9BC.png)

现在，假设用户分配了两次 8 字节内存，因此使用了块：[0xDD00,0xDD08)、[0xDD08,0xDD10)。一段时间后，用户在 [0xDD00,0xDD08) 处释放内存，因此该块将回到空闲列表。现在块是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/Dfmta.png)
之后用户在 [0xDD08,0xDD10) 处释放内存，将这个块放回列表中的最简单方法是更新指向它的`first`指向它，时间复杂度恒定。这`simple_segregated_storage<T>::free()`正是这样做的：

```
void free BOOST_PREVENT_MACRO_SUBSTITUTION(void * const chunk)
{ //! Free a chunk.
  //! \pre chunk was previously returned from a malloc() referring to the same free list.
  //! \post !empty()
   BOOST_POOL_VALIDATE_INTERNALS
  nextof(chunk) = first;
  first = chunk;
  BOOST_POOL_VALIDATE_INTERNALS
} 
```

之后，列表将是这样的：
![无序列表](https://i.stack.imgur.com/TeQzg.png)
**现在我们注意到，在这些操作之后，块列表并没有按照它们的地址排序！** 如果我们想在取消分配时保留顺序，请调用`pool<>::ordered_free()`而不是按`pool<>::free()`正确的顺序将内存放回列表中。现在我们已经知道内存池中的顺序是什么，让我们深入研究`boost::pool<>::malloc`and的源代码`boost::pool<>::ordered_malloc`：

```
void * malloc BOOST_PREVENT_MACRO_SUBSTITUTION()
{
  if (!store().empty())
    return (store().malloc)();
  return malloc_need_resize();
}

void * ordered_malloc()
{
  if (!store().empty())
    return (store().malloc)();
  return ordered_malloc_need_resize();
} 
```

正如我们所看到的，它们仅在内存块列表中没有空闲块时有所不同。在这种情况下，它分配一个新的内存块，将其空闲列表合并到池的空闲列表中，这两种方法的区别在于`boost::pool<>::ordered_malloc`在合并空闲列表时保持顺序。
以上是问题1。
那么，为什么顺序很重要？！似乎内存池与无序块完美配合！
首先，如果我们想找到 n 个块的连续序列，有序的空闲列表会更容易。其次，我们看一下 : 的派生类`boost::pool`，`boost::object_pool`它提供了在销毁对象时自动销毁未释放对象的功能，`object_pool`同时您也可以手动销毁对象，例如：

```
class X { … };

    void func()
    {
        boost::object_pool<X> alloc;

        X* obj1 = alloc.construct();
        X* obj2 = alloc.construct();
        alloc.destroy(obj2);
    } 
```

上面的代码是可以的，没有内存泄漏或双重删除！这个魔法是怎么`boost::object_pool`做到的？让我们找到析构函数的实现`boost::object_pool`（我的机器上有 boost 1.48）：

```
template <typename T, typename UserAllocator>
object_pool<T, UserAllocator>::~object_pool()
{
#ifndef BOOST_POOL_VALGRIND
  // handle trivial case of invalid list.
  if (!this->list.valid())
    return;

  details::PODptr<size_type> iter = this->list;
  details::PODptr<size_type> next = iter;

  // Start 'freed_iter' at beginning of free list
  void * freed_iter = this->first;

  const size_type partition_size = this->alloc_size();

  do
  {
    // increment next
    next = next.next();

    // delete all contained objects that aren't freed.

    // Iterate 'i' through all chunks in the memory block.
    for (char * i = iter.begin(); i != iter.end(); i += partition_size)
    {
      // If this chunk is free,
      if (i == freed_iter)
      {
        // Increment freed_iter to point to next in free list.
        freed_iter = nextof(freed_iter);

        // Continue searching chunks in the memory block.
        continue;
      }

      // This chunk is not free (allocated), so call its destructor,
      static_cast<T *>(static_cast<void *>(i))->~T();
      // and continue searching chunks in the memory block.
    }

    // free storage.
    (UserAllocator::free)(iter.begin());

    // increment iter.
    iter = next;
  } while (iter.valid());

  // Make the block list empty so that the inherited destructor doesn't try to
  // free it again.
  this->list.invalidate();
#else
   // destruct all used elements:
   for(std::set<void*>::iterator pos = this->used_list.begin(); pos != this->used_list.end(); ++pos)
   {
      static_cast<T*>(*pos)->~T();
   }
   // base class will actually free the memory...
#endif
} 
```

它遍历内存块列表中的所有块（`list`的数据成员`boost::pool<>`，保存从系统分配的所有内存块的位置和大小）以查找其中的任何块是否也显示在空闲列表中，如果没有，调用对象的析构函数，然后释放内存。所以它有点像[std::set_intersection()](http://www.cplusplus.com/reference/algorithm/set_intersection/)那样得到两个集合的交集！如果列表是排序的，这样做会快得多。实际上，在 中`boost::object_pool<>`，需要顺序，公共成员函数：`boost::object_pool<>::malloc()`并分别`boost::object_pool<>::free()`调用`boost::pool<>::ordered_malloc()`和`boost::pool<>::ordered_free()`：

```
element_type * malloc BOOST_PREVENT_MACRO_SUBSTITUTION()
{ //! Allocates memory that can hold one object of type ElementType.
  //!
  //! If out of memory, returns 0\. 
  //!
  //! Amortized O(1).
  return static_cast<element_type *>(store().ordered_malloc());
}
void free BOOST_PREVENT_MACRO_SUBSTITUTION(element_type * const chunk)
{ //! De-Allocates memory that holds a chunk of type ElementType.
  //!
  //!  Note that p may not be 0.\n
  //!
  //! Note that the destructor for p is not called. O(N).
  store().ordered_free(chunk);
} 
```

所以对于问题 2：你不需要`boost::pool<>::ordered_malloc`在大多数情况下使用。

# c# - TextBoxFor 助手在日期中混合日期和月份

> ID：15942019
> 
> 赞同：5
> 
> 时间：2013-04-11T06:23:52.807
> 
> 标签：c#, asp.net-mvc-3

请考虑以下示例：

1.  查看模型

    ```
    public class FooViewModel
    {
        public DateTime Date { get; set; }
    } 
    ```

2.  控制器

    ```
    public class HomeController : Controller
    {
        [HttpGet]
        public ActionResult Index(FooViewModel foo)
        {
            return View(foo);
        }
        [HttpPost]
        public ActionResult Submit(FooViewModel foo)
        {
            return RedirectToAction("Index", foo);
        }
    } 
    ```

3.  看法

    ```
    @model MvcApplication1.Models.FooViewModel
    <h1>@Model.Date</h1>
    @using (Html.BeginForm("Submit", "Home", FormMethod.Post))
    {
        @Html.TextBoxFor(m => m.Date)
        <input type="submit" value"Submit" />
    } 
    ```

4.  路线

    ```
    routes.MapRoute(
        null,
        "",
        new { controller = "Home", action = "Index" }
    );
    routes.MapRoute(
        null,
        "{action}",
        new { controller = "Home" },
        new { action = "Submit" }
    ); 
    ```

问题是在表单提交后，日期编辑器会获取日期和月份切换的值：

1.  ![首次提交后](https://i.stack.imgur.com/s90I2.png)
2.  ![重新提交后](https://i.stack.imgur.com/JnhRB.png)

**我该怎么做才能使其正常工作？**

* * *

实际上我试图格式化编辑器的值：

1.  `@Html.TextBoxFor(m => m.Date, new { value = Model.Date.ToString("dd.MM.yyyy") })`
2.  使用*编辑器模板*，如[MVC 2 Editor Template with DateTime](http://geekswithblogs.net/michelotti/archive/2010/02/05/mvc-2-editor-template-with-datetime.aspx)所示，当然只有 MVC3 采用；我还使用`EditorFor`了 helper 来使用模板。
3.  使用`DataAnnotations`：`[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:MMM/dd/yyyy}")]`

这些都没有改变任何东西。编辑器的值既没有改变，也没有出现格式化。

* * *

最后，我（按照[**DrJokepu**](https://stackoverflow.com/questions/1961114/date-only-from-textboxfor#answer-1961127)[的回答](https://stackoverflow.com/questions/1961114/date-only-from-textboxfor#answer-1961127)**）设法使这项工作仅适用于原始 HTML，即没有帮助方法`DateTime`：**

 **```
public static MvcHtmlString GetDateEditor(this FooViewModel model)
{
    string temp = "<input id=\"Date\" type=\"text\" value=\"{0}\" name=\"Date\" 
                    data-val-required=\"Please, enter a valid date\" 
                    data-val=\"true\" />";
    return MvcHtmlString.Create(
                 string.Format(temp, 
                               model == null 
                                    ? string.Empty 
                                    : model.Date.ToString("dd.MM.yyyy")));
    } 
```

如果有一种方法可以使用任何辅助方法达到相同的结果对我来说仍然是一个秘密......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:48:39.803

请尝试稍微更改的版本：
`@Html.TextBoxFor(m => m.Date, new { @Value = Model.Date.ToString("dd.MM.yyyy") })`**

# json - Google 端点在引号中返回长数据类型的 JSON

> ID：15942022
> 
> 赞同：5
> 
> 时间：2013-04-11T06:23:57.463
> 
> 标签：json, google-app-engine, gwt, google-cloud-endpoints, resty-gwt

我正在为我的休息服务使用谷歌云端点。我正在使用 RestyGWT 的 GWT Web 客户端中使用这些数据。

我注意到云端点自动将长数据类型括在双引号中，当我尝试将 JSON 转换为 POJO 时，这会导致 RestyGWT 出现异常。

这是我的示例代码。

```
@Api(name = "test")
public class EndpointAPI {

@ApiMethod(httpMethod = HttpMethod.GET,  path = "test")
public Container test() {
    Container container = new Container();

    container.testLong =  (long)3234345;
    container.testDate = new Date();
    container.testString = "sathya";
    container.testDouble = 123.98;
    container.testInt = 123;                
    return container;
}
public class Container {
    public long testLong;
    public Date testDate;
    public String testString;
    public double testDouble;
    public int testInt;
} 
```

}

这是云端点以 JSON 形式返回的内容。可以看到 testLong 被序列化为“3234345”而不是 3234345。

![在此处输入图像描述](https://i.stack.imgur.com/LvvXi.jpg)

我有以下问题。(1) 如何删除长值中的双引号？(2) 如何将字符串格式更改为 "yyyy-MMM-dd hh:mm:ss" ？

问候， 沙迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T14:47:32.550

你用的是什么版本的restyGWT？你试过 1.4 快照吗？我认为这是负责在 restygwt 中解析 long 的代码（1.4），它可能会对您有所帮助：

```
 public static final AbstractJsonEncoderDecoder<Long> LONG = new AbstractJsonEncoderDecoder<Long>() {

    public Long decode(JSONValue value) throws DecodingException {
        if (value == null || value.isNull() != null) {
            return null;
        }
        return (long) toDouble(value);
    }

    public JSONValue encode(Long value) throws EncodingException {
        return (value == null) ? getNullType() : new JSONNumber(value);
    }
};

 static public double toDouble(JSONValue value) {
    JSONNumber number = value.isNumber();
    if (number == null) {
        JSONString val = value.isString();
        if (val != null){
            try {
                return Double.parseDouble(val.stringValue());
            }
            catch(NumberFormatException e){
                // just through exception below
            }
        }
        throw new DecodingException("Expected a json number, but was given: " + value);
    }
    return number.doubleValue();
} 
```

# python - 从字符串中分离无空格的数字

> ID：15942029
> 
> 赞同：0
> 
> 时间：2013-04-11T06:24:33.610
> 
> 标签：python, math, floating-point

我正在尝试用括号评估算术表达式`()`。

例如）评估

```
(1.6*(2.7+(4.1/3.2)*3.9)) 
```

我需要将数字和运算符分开，我试过这个：

```
def process(a,s):
    b=['1','2','3','4','5','6','7','8','9','0']
    if a in b:
          s=s*10+int(a)
          return s
    elif a==')':
          #do stuff
          return 0
    else:
          #do stuff
          return 0
a=raw_input()
s=0
for i in a:
    s=process(i,s) 
```

这适用于整数。但是对于浮动，这成为一个问题。我能做些什么来分隔浮点数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T06:32:08.693

我有点不清楚您的代码试图实现什么，因此您可能有更好的选择，但是将字符串中的整数解析为字符串`int`并将字符串中的浮点数解析为的一种巧妙方法`float`是使用`ast`模块：

```
>>> import ast
>>> ast.literal_eval('1')
1
>>> ast.literal_eval('1.0')
1.0
>>> ast.literal_eval('1e10')
10000000000.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T06:33:29.883

简化假设您还不想处理`()`s，以下代码有效：

```
In [62]: def process(s):
    answer = 0
    depth = 0
    decimal = False
    for char in s:
        if char == '.':
            decimal = True
            continue
        else:
            if decimal:
                depth += 1
                answer += int(char)/10.0**depth
            else:
                answer *= 10
                answer += int(char)
    return answer

In [63]: process('25.082')
Out[63]: 25.081999999999997

In [64]: process('25.0')
Out[64]: 25.0

In [65]: process('25')
Out[65]: 25 
```

# heroku - Heroku 应用程序之间的通信

> ID：15942030
> 
> 赞同：8
> 
> 时间：2013-04-11T06:24:35.497
> 
> 标签：heroku

我已经构建了一个分布式系统，该系统由几个 Web 服务和一些使用它们的 Web 应用程序组成。

它们都托管在 Heroku 上。

有没有办法让这些应用程序之间的请求“在 heroku 内部”完成，而无需通过网络。

类似于使用 localhost 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:03:08.017

您可能很幸运：这样的功能目前已进入实验阶段。

让我花点时间强调一下：此功能可能随时消失或更改。它不受支持，但欢迎提交错误报告。不要用它建立银行。如果发现严重的问题导致它无法发货并被中止，不要让自己处于难以置信的悲伤状态。

但是，它仍然很酷，这里是：[containerized-network](https://devcenter.heroku.com/articles/containerized-network)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T06:29:19.283

例如，您可以使用任何托管 Redis 解决方案的 pub-sub 接口。或任何消息代理（IronMQ、RabbitMQ）来传递消息。

# php - 带有多个ajax调用的jquery倒计时插件？

> ID：15942033
> 
> 赞同：0
> 
> 时间：2013-04-11T06:24:57.170
> 
> 标签：php, javascript, jquery

[我试图通过 jquery ajax 向 php 文件发送多个调用，并使用这个 Jquery 插件CountDown](http://keith-wood.name/countdown.html)打印一个倒数计时器

JS

```
$(document).ready(function () {
    $('.timer').each(function () {
        var time = null;
        $.ajax({
            url: 'serverTime.php',
            async: false,
            dataType: 'text',
            success: function (text) {
                time = new Date(text);

            },
            error: function (http, message, exc) {
                time = new Date();
            }
        });
        $('.timer').countdown({
            until: time,
            compact: true,
            format: 'HMS'
        });
    });
}) 
```

这是我的PHP

```
<?php
$now = time() + 9999; 
echo date("M j, Y H:i:s",$now)."\n"; 
$now1 = time() + 999; 
echo date("M j, Y H:i:s",$now1)."\n"; 
?> 
```

我需要显示每次打印到单独的 div 中，但这就是我得到的

```
NaN:NaN:NaN

NaN:NaN:NaN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:29:24.253

你的 ajax 药水需要改变

```
 $.ajax({
       url: 'serverTime.php', 
       async: false, 
       dataType: 'json', 
       success: function(text) { 
          var time1 = new Date(text.time1);
          var time2 = new Date(text,time1);

       }, 
       error: function(http, message, exc) { 
            time = new Date(); 
       } 
```

还要更改php代码

```
 <?php
  $now = time() + 9999; 
  $now1 = time() + 999; 
  echo json_encode(array('time1' => date("M j, Y H:i:s",$now1),'time2' => date("M j, Y H:i:s",$now2)));
 ?> 
```

# iphone - IOS保留,分配

> ID：15942034
> 
> 赞同：1
> 
> 时间：2013-04-11T06:25:00.493
> 
> 标签：iphone, ios, memory-management, retain, assign

我观察到以下行为。

取了两个属性变量。

```
@property (nonatomic, retain) NSString *stringOne;
@property (nonatomic, assign) NSString *stringTwo; 
```

在 .m 文件中写在下面的代码中..

```
 NSMutableString *localstring= [[NSMutableString alloc] initWithString:@"test"];
 self.stringOne = localstring;
 NSLog(@"localstring = %d", [string retainCount]);
 NSLog(@"string one retain count = %d", [self.stringOne retainCount]);
 self.stringTwo = localstring;
 NSLog(@"localstring = %d", [localstring retainCount]);
 NSLog(@"string two  retain count = %d", [self.stringTwo retainCount]); 
```

由于 alloc，这里 localstring 保留计数为 1。现在我给了 self.stringOne = localString。

由于 stringOne 的保留属性，localstring 的保留计数将变为 2。现在我给了 self.stringTwo = localString。

即使在这里，localstring 保留计数也会增加 1。请注意，我已将属性分配给 stringTwo。实际上，localstring 或 stringTwo 的保留计数不应增加 1，因为它是分配属性。如果我错了，请纠正我。

谢谢吉腾

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T15:51:47.667

转储`retainCount`; 这是没用的。 [http://www.whentouseretaincount.com/](http://www.whentouseretaincount.com/)

您困惑的根源在于不了解指针的工作原理。像这样修改你的代码：

```
@interface BBQ:NSObject
@property (nonatomic, retain) NSString *stringOne;
@property (nonatomic, assign) NSString *stringTwo;
@end

@implementation BBQ
- (void) burn
{
    NSMutableString *localstring= [[NSMutableString alloc] initWithString:@"test"];
    self.stringOne = localstring;
    NSLog(@"localstring = %p", localstring);
    NSLog(@"string one = %p", self.stringOne);
    self.stringTwo = localstring;
    NSLog(@"localstring = %p", localstring);
    NSLog(@"string two  = %p", self.stringTwo);
}
@end 
```

它会喷出这样的东西：

```
2013-04-11 08:48:13.770 asdffadsfasddfsa[18096:303] localstring = 0x10010aaf0
2013-04-11 08:48:13.772 asdffadsfasddfsa[18096:303] string one = 0x10010aaf0
2013-04-11 08:48:13.772 asdffadsfasddfsa[18096:303] localstring = 0x10010aaf0
2013-04-11 08:48:13.772 asdffadsfasddfsa[18096:303] string two  = 0x10010aaf0 
```

播放中只有一个字符串实例； `localstring`, `stringOne`, 并且`stringTwo`都持有对*一个 NSMUtableString 实例的引用*。

因此，您会看到*的那个字符串实例*的+1 RC `alloc`，分配给`stringOne`属性的 +1 和没有变化`stringTwo`。

（RC 应该仅根据增量进行推理；如果您保留一个对象，则需要在不再需要该对象时将其与释放进行平衡。该对象可能被其他东西保留是无关紧要的。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T07:21:25.313

当我运行这段代码时：

```
@interface ViewController ()

@property (nonatomic, retain) NSString *stringOne;
@property (nonatomic, assign) NSString *stringTwo;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self test];
}

- (void)test
{
    NSMutableString *localstring = [[NSMutableString alloc] initWithString:@"test"];
    NSLog(@"localstring (before setting `stringOne` or `stringTwo`) = %d", [localstring retainCount]);
    self.stringOne = localstring;
    NSLog(@"localstring (after setting `stringOne`) = %d", [localstring retainCount]);
    NSLog(@"string one retain count = %d", [self.stringOne retainCount]);
    self.stringTwo = localstring;
    NSLog(@"localstring (after setting `stringTwo`) = %d", [localstring retainCount]);
    NSLog(@"string two retain count = %d", [self.stringTwo retainCount]);
}

@end 
```

我收到了这个控制台日志：

```
localstring（在设置 `stringOne` 或 `stringTwo` 之前）= 1
localstring（设置 `stringOne` 后）= 2
字符串一保留计数 = 2
localstring（设置 `stringTwo` 后）= 2
字符串二保留计数 = 2

```

所有这些值都与人们期望的一样。

*   当您第一次创建由局部变量引用的对象时，该对象具有`+1`保留计数。

*   当您设置`retain`属性时`stringOne`，对象的保留计数将增加到`+2`，并且由于两者都`localstring`引用`stringOne`同一个对象，它们都将报告相同的`retainCount`。

*   但是，当您使用该`assign`属性时，`stringTwo`不会`retainCount`改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T06:36:38.927

当您使用 声明属性时`retain`，它会自动“保留”该对象，从而增加其保留计数。

所以`NSMutableString *localstring= [[NSMutableString alloc] initWithString:@"test"];`使保留计数= 1；

然后`self.stringOne = localstring;`使保留计数= 2。

> 我的想法是如果属性被赋予retain，那么在这一行self.stringOne = localstring之后，self.stringone的retain count应该变成1

当您创建一个对象时，它的保留计数将从 1 开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T06:38:26.597

首先，永远不要`retainCount`用于任何事情。它根本不可靠，因为它是一个**全局**保留计数，并且可能受到代码之外的其他因素的影响。令人惊讶的是，在这种情况下，它是正确的。让我们检查一下：

```
//Immediately localstring is +1 because you allocated it
NSMutableString *localstring= [[NSMutableString alloc] initWithString:@"test"];

//self.stringOne is a retain property, so localstring is incremented again (+2)
self.stringOne = localstring;

//self.stringTwo is a retain property, so localstring is incremented again (+3)
self.stringTwo = localstring; 
```

注意 now`localstring`和all 指向内存中的同一个位置`self.stringOne`。`self.stringTwo`您*不是*每次使用该`=`符号时都在复制内存内容（您的思维方式似乎表明您认为它是这样工作的）。您只是将另一个变量指向内存中的某个位置并说“在我这么说之前不要释放这块内存”。（至少在保留属性的情况下）。

结论：localstring的retain count、self.stringOne的retain count、self.stringTwo的retain count都是一样的。

旁注：对象的保留计数不可能为零。唯一可能发生的时间`retainCount`是发送到`nil`（我假设`self.stringOne`是在您测试它时）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T06:40:05.163

虽然在编写代码时查看它从来都不是一个好主意`retainCount`，但在这种情况下它的行为应该如此。我认为您对内存管理的理解似乎有点偏离。

要回答你的问题，

```
NSMutableString *localstring= [[NSMutableString alloc] initWithString:@"test"]; 
```

这将创建一个可变字符串**Object**，增加其保留计数并返回指向它的指针。请注意，`retainCount`它与**Object**而不是指针相关联。

当您将其分配给您的保留财产时，

```
self.stringOne = localstring; 
```

它传递`retain`给您的**对象**并再次将其保留计数增加 1。现在您的对象的保留计数为 2，并且两个指针都指向同一个对象。所以，当你登录时`retainCount`，你会得到你所得到的。希望这能回答你的问题。

# android - 字符串格式的 Android 日期和日期

> ID：15942040
> 
> 赞同：0
> 
> 时间：2013-04-11T06:25:30.553
> 
> 标签：android

如何以字符串格式显示日期和月份。我想显示日期和月份。看起来像这样

```
 Thursday
    11
   April 
```

但是当我使用 Calender 类时，它会以不同的格式返回日期和日期，就像`yyyy-mm-dd`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:32:24.093

```
 SimpleDateFormat sString s= "2013-1-18";
    SimpleDateFormat sdf = new SimpleDateFormat("EEEE,MMMM, dd ");
    System.out.println(sdf.format(new SimpleDateFormat("yyyy-M-dd").parse(s))); 
```

# java - 如何将图像路径存储在数据库中？

> ID：15942044
> 
> 赞同：0
> 
> 时间：2013-04-11T06:25:54.067
> 
> 标签：java, mysql, jsp, file-upload, liferay

你好，我正在制作员工目录。在那种形式中，我想上传员工的照片，当我尝试存储图像时， 如果我删除图像上传的逻辑，然后我的其他数据成功存储在数据库中，则会出现类似**Portlet 暂时不可用的错误。**请帮助我如何将图像路径存储在数据库中。我在**/webapps创建了****图像** 文件夹。我想将我的所有图像存储在这个文件夹中，并将我的图像路径存储到数据库中。请告诉我如何存储图像路径以及存储图像路径后如何在其他页面中显示图像。

 **在这里，我给你我的 java 代码，我在其中编写了我的逻辑。包 com.dir;

```
import java.io.File;
import java.io.IOException;
import java.util.Date;
import javax.portlet.ActionRequest;
import javax.portlet.ActionResponse;
import javax.portlet.PortletException;
import com.liferay.portal.kernel.exception.SystemException;
import com.dir.model.directory;
import com.dir.model.impl.directoryImpl;
import com.dir.service.directoryLocalServiceUtil;
import com.liferay.counter.service.CounterLocalServiceUtil;
import com.liferay.portal.kernel.upload.UploadPortletRequest;
import com.liferay.portal.kernel.util.FileUtil;
import com.liferay.portal.kernel.util.ParamUtil;
import com.liferay.portal.util.PortalUtil;
import com.liferay.util.bridges.mvc.MVCPortlet;

  public class Directory extends MVCPortlet {

public void updatedir(ActionRequest actionRequest,ActionResponse  
 actionResponse)throws IOException, PortletException
        {
String empname =ParamUtil.getString(actionRequest,"empname");
    String designation =ParamUtil.getString(actionRequest,"designation");
String qualification =ParamUtil.getString(actionRequest,"qualification");
    String email =ParamUtil.getString(actionRequest,"email");
String photo=ParamUtil.getString(actionRequest,"photo");
String company =ParamUtil.getString(actionRequest,"company");
int experiance=ParamUtil.getInteger(actionRequest,"experiance");

directory d1 = new directoryImpl();

// set primary key
long directoryId=0L;
try
{

     directoryId=CounterLocalServiceUtil.increment(this.getClass().getName());
} 
catch (SystemException ex)
{
    ex.printStackTrace();
}
   d1.setDirectoryId(directoryId);

        // set UI fields
        d1.setEmpname(empname);
        d1.setDesignation(designation);
        d1.setQualification(qualification);
        d1.setEmail(email);
        d1.setPhoto(photo);
        d1.setCompany(company);
        d1.setExperiance(experiance);

    File file;

        UploadPortletRequestupreq=PortalUtil.getUploadPortletRequest(actionRequest);
    file=upreq.getFile(photo);

    Stringpath=actionRequest.getPortletSession().getPortletContext().getRealPath(photo) 
     + "//" + ("/images");

        File fileone= new File(path);
        FileUtil.copyDirectory(file,fileone);

        // set audit field(s)
        d1.setDateAdded(new Date());

        // insert the book using persistence api
        try {

        directoryLocalServiceUtil.adddirectory(d1);
        } catch (SystemException e) {
        e.printStackTrace();
        }

        }

      } 
```

在这里，我从我上传照片的地方给你我的 Jsp 文件。

```
 <aui:form name="fm" method="POST" action="<%= updatedirURL.toString() %>"   
    enctype="multipart/form-data">

  <aui:input name="empname" label="Name"/>

 <aui:input name="designation" label="Designation"/>
 <aui:input name="qualification" label="Qualification"/>

 <aui:input name="email" label="Email"/>

 <aui:input type="file" label="Photo" name="photo"/>

 <aui:input name="company" label="Company"/>

 <aui:input name="experiance" label="Experiance"/>

 <aui:button type="submit" value="Save"/>
 </aui:form> 
```

请帮助我哪里错了，哪些东西缺少它的要求。并告诉我如何显示该文件夹中的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:41:09.867

查看有关使用 mysql 读/写的文件（文件可以是任何类型）的教程，Tt 将对您有很大帮助..[干杯](http://codeglobe.blogspot.in/2009/03/readwrite-blob-fromto-mysql-in-java_21.html)
...**

# c# - 从桌面应用程序访问托管在 IIS7.5 上的 WCF 服务

> ID：15942045
> 
> 赞同：0
> 
> 时间：2013-04-11T06:25:59.743
> 
> 标签：c#, wcf, sql-server-2008, windows-applications

我创建了一个连接到 SQL server 2008 的 WCF 服务应用程序。

我已成功地将服务应用程序托管到我的 IIS 7.5

我现在想从 ac# 桌面应用程序访问这个 WCF 服务，这样我就可以访问数据库中的数据，还需要更新数据库。

由于我对这件事比较陌生，所以我正在寻找各种指导。

谁能指出我如何实现这一目标的正确方向。

有可用的教程或演示吗？我搜索了一下，但没有任何相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:34:21.077

如果你认为它是那么简单。您需要在 WCF 中构建要在桌面应用程序中使用的服务。然后您必须将***服务引用***添加到您的桌面应用程序。现在您的应用程序可以访问托管在 IIS 中的 WCF 服务。

在进一步学习之前，您需要学习有关 WCF 的知识。我建议你谷歌它的初学者教程。你可以检查一下。[CP WCF 教程](http://www.codeproject.com/Articles/406096/A-beginners-tutorial-for-understanding-Windows)和[Saravanakumar 的 WCF 教程](http://wcftutorial.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T06:33:29.517

您将从向桌面应用程序添加“服务引用”开始。

1.  右键单击桌面应用程序项目。单击**添加服务参考**
2.  输入您创建的服务的 URL，单击**Go**。如果服务在同一个解决方案中，您可以改用“**发现”**按钮。
3.  在底部为引用输入描述性命名空间，然后单击**OK**。
4.  对于此代码示例，我假设该服务名为“MyService”并且有一个操作`GetData`。我选择的命名空间是“MyService”。访问服务的代码看起来像这样。

服务合同：

```
[ServiceContract]
public interface IMyService
{
    [OperationContract]
    string GetData(int value);
} 
```

客户端代码：

```
string data;

using (var client = new MyService.MyServiceClient())
{
    data = client.GetData(42);
} 
```

[MSDN 上](http://msdn.microsoft.com/en-us/library/bb386386.aspx)有一个演练，其中还包括服务的创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T06:41:42.850

要访问服务，只需创建 Win form 应用程序，`'References'`在您的项目中找到文件夹，右键单击它，找到`'Add service reference'`，单击它。然后你会看到窗口`address textbox`，写地址到你的服务，

> 例如：http://localhost/ServiceFolder/Service1.svc，

然后单击确定按钮。

# vba - 使用 Word VBA 检测用户在 Office2007 中选择的保存功能

> ID：15942046
> 
> 赞同：0
> 
> 时间：2013-04-11T06:26:02.540
> 
> 标签：vba, ms-word, office-2007, word-2007

我正在编写一个自定义 Word 模板，该模板在保存当前文档时进行一些处理。

在 Office2007 中，要保存文档，您可以使用 Save 和 Save As 功能，并使用 FileSave 和 FileSaveAs 宏处理事件。

但是当用户将鼠标悬停在 SaveAs 选项上时，会显示其他子选项：另存为文档、作为 Word 模板、作为 Word 97-2003 文档等。这些子选项似乎没有自己的事件，但我想知道用户何时使用它们。

所以我想出了使用 DocumentBeforeSave 事件的想法，但是我仍然需要弄清楚是使用标准 Save/SaveAs 选项还是使用子选项进行了保存。

我考虑在 Save/SaveAs 函数中将变量设置为 True，DocumentBeforeSave 事件将检查该函数以查看是否发生了正常的保存方法之一，然后将变量设置回 False。

但是在尝试了不同的方法之后，我无法弄清楚如何在 ThisDocument 和具有 BeforeSave 事件的类模块之间传递变量的值。

有任何想法吗？谢谢！

* * *

编辑：不起作用的示例代码：

**这个文件：**

```
Public pSSave As Boolean

Public Property Get SSave() As Boolean
    SSave = pSSave
End Property

Public Property Let SSave(Value As Boolean)
    pSSave = Value
End Property

Sub FileSave()

Me.SSave = True

If SSave = True Then
    MsgBox "True"
End If

Application.ActiveDocument.Save

If SSave = True Then
    MsgBox "True"
End If

End Sub 
```

**类模块：**

```
Private Sub App_DocumentBeforeSave(ByVal Doc As Document, SaveAsUI As Boolean, Cancel As Boolean)

    If Application.ActiveDocument.SSave = False Then
        MsgBox "False"
    End If
End Sub 
```

类模块注册正常，我就不贴她的代码了。

显示的结果是 True, False, True 而理论上应该是 True, True。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:50:28.863

我仍然想念你的逻辑中的一些东西。在评论中，我想到了这种方式的不同反向逻辑。下面的代码混合了我的方式和您提供的代码。

**类模块**

```
Public WithEvents App As Word.Application

Public pSSave As Boolean   'your class variable/property

Private Sub App_DocumentBeforeSave(ByVal Doc As Document, SaveAsUI As Boolean, Cancel As Boolean)
If pSSave = False Then
    MsgBox pSSave
Else
    MsgBox pSSave
End If
End Sub 
```

**模块1**

```
'class initialization
Public wrdAPP As New myClass
Sub set_References()
    Set wrdAPP.App = Application
End Sub 
```

**本文档模块**

```
Private Sub Document_Open()
'to initialize public variable when open
    Call Module1.set_References
End Sub

Sub FileSave()

wrdAPP.pSSave = True

Application.ActiveDocument.Save

If wrdAPP.pSSave = True Then
    MsgBox "True"
End If

End Sub 
```

我不知道你打算用哪种方式运行`FileSave`sub。但是在它运行之后，它会将值传递给你可以检查你的事件的类属性。希望它无论如何都会对你有所帮助。

# php - 如何从 Magento 的顶部链接中删除“结帐”网址？

> ID：15942047
> 
> 赞同：1
> 
> 时间：2013-04-11T06:26:04.313
> 
> 标签：php, magento

我正在使用 Magento 1.7（最新版本），我只想从顶部导航链接中删除“结帐”链接。

我努力了

```
<remove name="checkout_cart_link" /> 
```

但它也删除了购物车链接，我不想删除。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-01T21:25:32.143

旧帖子，但对于其他搜索，您不想复制和编辑`checkout.xml`并且希望避免添加自定义代码。

为此，请`local.xml`像提问者尝试的那样删除块，然后重新添加购物车链接（新块的名称略有不同）。

```
 <reference name="top.links">
            <remove name="checkout_cart_link" />
            <block type="checkout/links" name="checkout_cart_link_custom">
                <action method="addCartLink"></action>
            </block>
        </reference> 
```

归功于这篇文章，它给出了删除和重新添加的想法：http: [//www.classyllama.com/development/magento-development/editing-magentos-top-links-the-better-way](http://www.classyllama.com/development/magento-development/editing-magentos-top-links-the-better-way)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T13:11:28.377

> **直接 checkout.xml on never update 避免更改核心文件**

```
<reference name="top.links">
            <block type="checkout/links" name="checkout_cart_link">
                <action method="addCartLink"></action>
                <action method="addCheckoutLink"></action>
            </block>
</reference> 
```

> **评论此代码或删除**

```
<!--<action method="addCheckoutLink">< /action>--> 
```

**使用 Local.xml**

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <default>
        <reference name="top.links">
          <remove name="checkout_cart_link"/>
            <block type="checkout/links" name="checkout_cart_link_custom">
                <action method="addCartLink"></action>
                <!--<action method="addCheckoutLink"></action>-->
            </block>
        </reference>
    </default>
</layout> 
```

**或者**

```
<?xml version="1.0"?>
 <layout version="0.1.0">
    <default>
    <reference name="top.links">
            <remove name="checkout_cart_link" />
            <block type="checkout/links" name="checkout_cart_link_custom">
                <action method="addCartLink"></action>
            </block>
          </reference>
        </default>
    </layout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:04:41.613

顶部链接的完成方式与其他事情略有不同，而不是每个链接都是您可以自行删除的块，有一个名为的父块`top.links`包含所有链接，在一种情况下，您有一个子块发现命名`checkout_cart_link`其中包含结帐和购物车的链接。

链接被添加到`top.links`布局文件中的阻塞方法调用中，这是在许多不同的布局文件中完成的。块上调用的块方法`top.links`是`addLink()`，你可以在类中找到这个方法`Mage_Page_Block_Template_Links`。子块`checkout_cart_links`还定义了另外 2 个块方法`addCartLink()`，`addCheckoutLink()`可以在 class 中找到`Mage_Checkout_Block_Links`。

不幸的是，删除已添加的链接是您默认情况下无法从您自己的布局文件中执行的少数几件事之一，因为没有`removeLink()`或类似的块方法。这意味着要删除结帐链接，您有几个选择

*   将您自己的`removeCheckoutLink()`块方法添加到您创建的块中，并从您自己的布局文件中引用它。这将需要反转`addCheckoutLink()`块方法所做的事情。请注意，`local.xml`您在自己的模块中定义的布局文件和布局文件将影响所有核心模块*之后*的布局，因此您可以确定您的方法将在该`addCheckoutLink()`方法之后运行

*   另一个更简单的选项，但保留标准结帐布局文件的选项是将`checkout.xml`布局文件复制到当前主题布局文件夹中（如果它不存在）并删除块`addCheckoutLink()`内的操作节点`checkout_cart_link`。

# java - 扑克牌 JAVA

> ID：15942050
> 
> 赞同：19
> 
> 时间：2013-04-11T06:26:28.627
> 
> 标签：java

我已经创建了我的牌组，可以处理每张牌和一套花色，直到没有牌为止。对于我的项目，我需要将它分成 3 个类，其中包括一个驱动程序类。我首先创建了一个包含所有内容的类，所以我知道如何让它全部工作。

```
public class DeckOfCards2 {
  public static void main(String[] args) {
    int[] deck = new int[52];
    String[] suits = {"Spades", "Hearts", "Diamonds", "Clubs"};
    String[] ranks = {"Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King"};

    // Initialize cards
    for (int i = 0; i < deck.length; i++) {
      deck[i] = i;
    }

    // Shuffle the cards
    for (int i = 0; i < deck.length; i++) {
      int index = (int)(Math.random() * deck.length);
      int temp = deck[i];
      deck[i] = deck[index];
      deck[index] = temp;
    }

    // Display the all the cards
    for (int i = 0; i < 52; i++) {
      String suit = suits[deck[i] / 13];
      String rank = ranks[deck[i] % 13];
      System.out.println( rank + " of " + suit);
    }
  }
} 
```

现在试图把它分成3个类。我的 DeckOfCards 类的所有套牌/西装变量上都出现了红色的波浪线。我不知道如何解决它。

```
public class DeckOfCards {
  private Card theCard;
  private int remainingCards = 52;

  DeckOfCards() {
    theCard = new Card();   
  }

  public void shuffle(){
    for (int i = 0; i < deck.length; i++) {
       int index = (int)(Math.random() deck.length);
       int temp = deck[i];
       deck[i] = deck[index];
       deck[index] = temp;
       remainingCards--;
     }
  }

  public void deal(){
    for (int i = 0; i < 52; i++) {
       String suit = suits[deck[i] / 13];
       String rank = ranks[deck[i] % 13];
       System.out.println( rank + " of " + suit);
       System.out.println("Remaining cards: " + remainingCards);
     }
   }
} 
```

卡类：

```
public class Card {
  int[] deck = new int[52];
  String[] suits = {"Spades", "Hearts", "Diamonds", "Clubs"};
  String[] ranks = {"Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King"};

  Card() {
    for (int i = 0; i < deck.length; i++) {
      deck[i] = i;
    }
  }
} 
```

经销商类

```
public class Dealer {
  public static void main(String[]args){
    System.out.println("The deck will randomly print out a card from a full deck each time");

    DeckOfCards player = new DeckOfCards();
    player.deal();
  }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-11T07:03:48.167

正如其他人已经说过的那样，您的设计不是很清晰且面向对象。

最明显的错误是在你的设计中一张卡片知道一副卡片。Deck 应该知道卡片并在其构造函数中实例化对象。例如：

```
public class DeckOfCards {
    private Card cards[];

    public DeckOfCards() {
        this.cards = new Card[52];
        for (int i = 0; i < ; i++) {
            Card card = new Card(...); //Instantiate a Card
            this.cards[i] = card; //Adding card to the Deck
        }
     } 
```

之后，如果您愿意，您还可以扩展 Deck 以构建不同的卡片组（例如超过 52 张卡片、Jolly 等）。例如：

```
public class SpecialDeck extends DeckOfCards {
   .... 
```

我要改变的另一件事是使用字符串数组来表示花色和等级。从 Java 1.5 开始，该语言支持枚举，非常适合此类问题。例如：

```
public enum Suits {
    SPADES, 
    HEARTS, 
    DIAMONDS,
    CLUBS;  
} 
```

使用 Enum，您可以获得一些好处，例如：

1) Enum 是类型安全的，除了预定义的 Enum 常量之外，您不能将任何其他内容分配给 Enum 变量。例如，您可以编写 Card 的构造函数，如下所示：

```
public class Card {

   private Suits suit;
   private Ranks rank;

public Card(Suits suit, Ranks rank) {
    this.suit = suit;
    this.rank = rank;
} 
```

通过这种方式，您可以确保构建只接受枚举值的一致卡片。

2）您可以在 Java 中的 Switch 语句中使用 Enum，例如 int 或 char 原始数据类型（这里我们不得不说，因为 Java 1.7 的 switch 语句也允许在 String 上使用）

3) 在 Java 中的 Enum 上添加新常量很容易，您可以在不破坏现有代码的情况下添加新常量。

4）您可以遍历枚举，这在实例化卡片时非常有用。例如：

```
/* Creating all possible cards... */
for (Suits s : Suits.values()) {
    for (Ranks r : Ranks.values()) {
         Card c = new Card(s,r);
    }  
} 
```

为了不再次发明轮子，我还将更改将卡片从数组保存为 Java 集合的方式，这样您就可以获得很多强大的方法在您的套牌上工作，但最重要的是您可以使用[Java 集合的洗牌功能](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List,%20java.util.Random%29)洗牌你的甲板。例如：

```
private List<Card> cards = new ArrayList<Card>();

//Building the Deck...

//...

public void shuffle() {
    Collections.shuffle(this.cards); 
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-05T05:47:50.543

这是我的实现：

```
public class CardsDeck {
    private ArrayList<Card> mCards;
    private ArrayList<Card> mPulledCards;
    private Random mRandom;

public enum Suit {
    SPADES,
    HEARTS,
    DIAMONDS,
    CLUBS;
}

public enum Rank {
    TWO,
    THREE,
    FOUR,
    FIVE,
    SIX,
    SEVEN,
    EIGHT,
    NINE,
    TEN,
    JACK,
    QUEEN,
    KING,
    ACE;
}

public CardsDeck() {
    mRandom = new Random();
    mPulledCards = new ArrayList<Card>();
    mCards = new ArrayList<Card>(Suit.values().length * Rank.values().length);
    reset();
}

public void reset() {
    mPulledCards.clear();
    mCards.clear();
    /* Creating all possible cards... */
    for (Suit s : Suit.values()) {
        for (Rank r : Rank.values()) {
            Card c = new Card(s, r);
            mCards.add(c);
        }
    }
}

public static class Card {

    private Suit mSuit;
    private Rank mRank;

    public Card(Suit suit, Rank rank) {
        this.mSuit = suit;
        this.mRank = rank;
    }

    public Suit getSuit() {
        return mSuit;
    }

    public Rank getRank() {
        return mRank;
    }

    public int getValue() {
        return mRank.ordinal() + 2;
    }

    @Override
    public boolean equals(Object o) {
        return (o != null && o instanceof Card && ((Card) o).mRank == mRank && ((Card) o).mSuit == mSuit);
    }

}

/**
 * get a random card, removing it from the pack
 * @return
 */
public Card pullRandom() {
    if (mCards.isEmpty())
        return null;

    Card res = mCards.remove(randInt(0, mCards.size() - 1));
    if (res != null)
        mPulledCards.add(res);
    return res;
}

/**
 * Get a random cards, leaves it inside the pack 
 * @return
 */
public Card getRandom() {
    if (mCards.isEmpty())
        return null;

    Card res = mCards.get(randInt(0, mCards.size() - 1));
    return res;
}

/**
 * Returns a pseudo-random number between min and max, inclusive.
 * The difference between min and max can be at most
 * <code>Integer.MAX_VALUE - 1</code>.
 *
 * @param min Minimum value
 * @param max Maximum value.  Must be greater than min.
 * @return Integer between min and max, inclusive.
 * @see java.util.Random#nextInt(int)
 */
public int randInt(int min, int max) {
    // nextInt is normally exclusive of the top value,
    // so add 1 to make it inclusive
    int randomNum = mRandom.nextInt((max - min) + 1) + min;
    return randomNum;
}

public boolean isEmpty(){
    return mCards.isEmpty();
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-23T20:24:41.500

这是一些代码。它使用 2 个类（Card.java 和 Deck.java）来完成这个问题，最重要的是，它会在您创建卡片组对象时自动为您排序。:)

```
import java.util.*;

public class deck2 {
    ArrayList<Card> cards = new ArrayList<Card>();

    String[] values = {"A","2","3","4","5","6","7","8","9","10","J","Q","K"};
    String[] suit = {"Club", "Spade", "Diamond", "Heart"};

    static boolean firstThread = true;
    public deck2(){
        for (int i = 0; i<suit.length; i++) {
            for(int j=0; j<values.length; j++){
                this.cards.add(new Card(suit[i],values[j]));
            }
        }
        //shuffle the deck when its created
        Collections.shuffle(this.cards);

    }

    public ArrayList<Card> getDeck(){
        return cards;
    }

    public static void main(String[] args){
        deck2 deck = new deck2();

        //print out the deck.
        System.out.println(deck.getDeck());
    }

}

//separate class

public class Card {

    private String suit;
    private String value;

    public Card(String suit, String value){
        this.suit = suit;
        this.value = value;
    }
    public Card(){}
    public String getSuit(){
        return suit;
    }
    public void setSuit(String suit){
        this.suit = suit;
    }
    public String getValue(){
        return value;
    }
    public void setValue(String value){
        this.value = value;
    }

    public String toString(){
        return "\n"+value + " of "+ suit;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-02T07:32:07.550

**生成卡牌的非常简单的代码：**

```
class Card{

    private final String suit;
    private final String rank;

    public Card(String suit, String rank){
        this.suit = suit;
        this.rank = rank;
    }       

    @Override
    public String toString() {
        return "Card [suit=" + suit + ", rank=" + rank + "]";
    }

}

class DeckOfCard{

    private static final String suits[] = {"club", "diamond", "heart", "spade"};
    private static final String ranks[] = {null,"ace", "deuce", "three", "four", "five", "six", "seven", "eight", "nine", "ten", "jack", "queen", "king"};
    private final ArrayList<Card> cards;

    public DeckOfCard(){
        cards = new ArrayList<Card>();
        for (int i = 0; i<suits.length; i++) {
            for(int j=0; j<ranks.length; j++){
                this.cards.add(new Card(suits[i],ranks[j]));
            }
        }   
        //Shuffle after the creation
        Collections.shuffle(this.cards);

    }

    public ArrayList<Card> getCards() {
        return cards;
    }

}
public class CardPuzzle {

    public static void main(String[] args) {

        DeckOfCard deck = new DeckOfCard();     
        ArrayList<Card> cards = deck.getCards();        
        for(Card card:cards){
            System.out.println(card);
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T06:31:50.117

首先，您的课程存在架构问题。`deck`您在班级内移动了财产`Card`。但当然它是卡片组的属性，因此必须在类内`DeckOfCards`。初始化循环不应该在甲板类的构造函数中，`Card`而是在甲板类的构造函数中。此外，deck 目前是一个数组，`int`但应该是一个`Card`s 数组。

其次，`Deal`您应该引用内部`suits`方法`Card.suits`并使该成员静态最终。对`ranks`.

最后，请遵守命名约定。方法名称总是以小写字母开头，即，`shuffle`而不是`Shuffle`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-02T06:08:41.423

我认为解决方案就像这样简单：

```
Card temp = deck[cardAindex];
deck[cardAIndex]=deck[cardBIndex]; 
deck[cardBIndex]=temp; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T06:46:53.807

你的代码中有很多错误，例如你并没有真正通过输入`deck`你的`Shuffle`方法来调用你的套牌。您只能通过键入来调用它`theCard.deck`

我改变了你的洗牌方法：

```
public void Shuffle(){
    for (int i = 0; i < theCard.deck.length; i++) {
        int index = (int)(Math.random()*theCard.deck.length );
        int temp = theCard.deck[i];
        theCard.deck[i] = theCard.deck[index];
        theCard.deck[index] = temp;
        remainingCards--;
    }
} 
```

另外，据说你有结构问题。您应该按照您在现实生活中的理解命名类，例如，当您说卡片时，它只是一张卡片，当您说甲板时，它应该是 52+2 卡片。这样你的代码会更容易理解。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-11T06:32:40.193

你的设计有问题。试着让你的课程代表真实世界的事物。例如：

*   类卡应该代表一张卡，这就是“卡”的性质。Card 类不需要了解 Decks。
*   Deck 类应该包含 52 个 Card 对象（加上小丑？）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-11T08:47:03.057

你的程序有很多错误。

1.  指数的计算。我认为应该是`Math.random()%deck.length`

2.  在卡片显示中。根据我的说法，您应该制作具有等级套装的卡片类别并制作该类别类型的数组

如果你愿意，我可以给你完整的结构，但如果你自己做会更好

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-27T20:40:54.527

```
public class shuffleCards{

    public static void main(String[] args) {

        String[] cardsType ={"club","spade","heart","diamond"};
        String [] cardValue = {"Ace","2","3","4","5","6","7","8","9","10","King", "Queen", "Jack" };

        List<String> cards = new ArrayList<String>();
        for(int i=0;i<=(cardsType.length)-1;i++){
            for(int j=0;j<=(cardValue.length)-1;j++){
                cards.add(cardsType[i] + " " + "of" + " " + cardValue[j]) ;
            }
        }

        Collections.shuffle(cards);
        System.out.print("Enter the number of cards within:" + cards.size() + " = ");

        Scanner data = new Scanner(System.in);
        Integer inputString = data.nextInt();
        for(int l=0;l<= inputString -1;l++){
            System.out.print( cards.get(l)) ;
        }    
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-22T14:29:11.783

```
import java.util.List;
import java.util.ArrayList;
import static java.lang.System.out;
import lombok.Setter;
import lombok.Getter;
import java.awt.Color;

public class Deck {

private static @Getter List<Card> deck = null;

final int SUIT_COUNT = 4;
final int VALUE_COUNT = 13;

public Deck() {
    deck = new ArrayList<>();
    Card card = null;
    int suitIndex = 0, valueIndex = 0;
    while (suitIndex < SUIT_COUNT) {
        while (valueIndex < VALUE_COUNT) {
            card = new Card(Suit.values()[suitIndex], FaceValue.values()[valueIndex]);
            valueIndex++;
            deck.add(card);
        }
        valueIndex = 0;
        suitIndex++;
    }
}

private enum Suit{CLUBS("Clubs", Color.BLACK), DIAMONDS("Diamonds", Color.RED),HEARTS("Hearts", Color.RED), SPADES("Spades", Color.BLACK);

    private @Getter String name = null;
    private @Getter Color color = null;

    Suit(String name) {
        this.name = name;
    }

    Suit(String name, Color color) {
        this.name = name;
        this.color = color;
    }
}

private enum FaceValue{ACE(1), TWO(2), THREE(3),
    FOUR(4), FIVE(5), SIX(6), SEVEN(7), EIGHT (8), NINE(9), TEN(10),
    JACK(11), QUEEN(12), KING(13);

    private @Getter int cardValue = 0;

    FaceValue(int value) {
        this.cardValue = value;
    }
}

private class Card {

    private @Getter @Setter Suit suit = null;

    private @Getter @Setter FaceValue faceValue = null;

    Card(Suit suit, FaceValue value) {
        this.suit = suit;
        this.faceValue = value;
    }

    public String toString() {
        return getSuit() + " " + getFaceValue();
    }

    public String properties() {
        return getSuit().getName() + " " + getFaceValue().getCardValue();
    }

}

public static void main(String...inputs) {
    Deck deck = new Deck();
    List<Card> cards = deck.getDeck();
    cards.stream().filter(card -> card.getSuit().getColor() != Color.RED && card.getFaceValue().getCardValue() > 4).map(card -> card.toString() + " " + card.properties()).forEach(out::println);   
} 
```

}

# ios - 使用 NSFetchedResultsController 对核心数据对象进行排序

> ID：15942052
> 
> 赞同：0
> 
> 时间：2013-04-11T06:26:35.150
> 
> 标签：ios, ipad, uitableview, core-data, nsfetchedresultscontroller

我有两个实体如下

项目 <----->> 分类

每个项目可能有多个类别。

例如，有 5 个项目，每个项目都有一个作为 release_Date 的排序类别。我想根据 release_Date 对所有这 5 个项目进行排序，表视图标题作为每个项目的 release_Date 值。

我想根据用户从弹出窗口中选择的类别值对这些项目进行排序。此外，我想在分段表视图中显示排序的对象，表头是选定的类别值。

我为此使用 nsfetchedresultscontroller。我能够根据项目的名称对项目进行排序。但是我发现使用关系属性对它们进行排序没有运气。

任何形式的帮助都是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:19:11.950

如果我正确理解您的模型，您可以很容易地使用多个排序描述符来做到这一点。

```
NSSortDescriptor *sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:NO];
NSSortDescriptor *sortDescriptor2 = [[NSSortDescriptor alloc] initWithKey:@"Categories.release_Date" ascending:NO];
NSArray *sortDescriptors = @[sortDescriptor1, sortDescriptor2];

[fetch setSortDescriptors:sortDescriptors]; 
```

# actionscript-3 - 替换选中的像素

> ID：15942054
> 
> 赞同：0
> 
> 时间：2013-04-11T06:26:41.677
> 
> 标签：actionscript-3, flash, action

如何替换图像的选定像素？我使用了设置像素和获取像素的概念，但没有得到想要的效果。 [http://www.digital-photography-school.com/wp-content/uploads/2009/07/before-after.jpg](http://www.digital-photography-school.com/wp-content/uploads/2009/07/before-after.jpg)

```
var s_color = 0x0083C7;
color_picker.addEventListener(ColorPickerEvent.CHANGE, changeColor);
function changeColor(ColorPickerEvent)
{
var _color = color_picker.selectedColor.toString(16);
var color = String("0x"+_color);

for (var j = 0; j <m_inputImage.width; j++)
{
    for (var k = 0; k < m_inputImage.height; k++)
    {

        if (m_inputImage.getPixel(j,k)== s_color)
        {
            m_inputImage.setPixel(j,k,color);
        }

    }
}
s_color = color;
} 
```

我想要类似的类型效果。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:21:50.587

这不是 BitmapData 的工作，您应该为此使用 Pixelbender。 [http://www.adobe.com/devnet/flash/articles/pixel_bender_basics.html](http://www.adobe.com/devnet/flash/articles/pixel_bender_basics.html)

你可以在这里找到所有的着色器，有很多色相/饱和度和颜色处理过滤器，所以选择一个最适合你的。 [http://www.adobe.com/cfusion/exchange/index.cfm?event=productHome&exc=26&loc=en_us](http://www.adobe.com/cfusion/exchange/index.cfm?event=productHome&exc=26&loc=en_us)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:48:21.257

我会使用 Photoshop 而不是 Flash 来实现您想要的效果。

但是 Photoshop 有点贵，所以我会结合使用[Bitmap](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Bitmap.html)类和[BitmapData](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html)类，并使用一种算法来遍历每个像素并检查某个红色阈值并将其转换为正确的黄色阈值。如果您发布您已经编写的代码，我可能会添加到其中，不过我不会花下一个小时来编写示例。

# java - 将 XML 元素放入 JTable

> ID：15942056
> 
> 赞同：1
> 
> 时间：2013-04-11T06:26:50.830
> 
> 标签：java, xml, swing, jtable, sax

我正在尝试使用 Java 中的 sax 解析器解析 XML 文件，然后`JTable`用 XML 元素填充 a。解析好了，`JTable`创建了，但问题是所有元素都放在同一行，重复同一行。

这是我的代码：

```
package read;

//import java.util.ArrayList;
import java.awt.BorderLayout;
import java.util.ArrayList;
import java.util.List;
import java.util.Vector;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class Read {

    public static Vector<Vector> rowData = new Vector<Vector>();
    public static Vector<String> rowOne = new Vector<String>();

    public static void main(String argv[]) {
        try {
            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();
            DefaultHandler handler;
            handler = new DefaultHandler() {
                // private List<Personne> satff;
                boolean bstaff = false;
                boolean bfname = false;
                boolean blname = false;
                boolean bnname = false;
                boolean bsalary = false;
                private int i;

                public void startElement(String uri, String localName, String
                    qName, Attributes attributes) throws SAXException {
                    System.out.println("Start Element :" + qName);
                    if (qName.equalsIgnoreCase("staff")) {
                        bstaff = true;
                    }
                    if (qName.equalsIgnoreCase("FIRSTNAME")) {
                        bfname = true;
                    }
                    if (qName.equalsIgnoreCase("LASTNAME")) {
                        blname = true;
                    }
                    if (qName.equalsIgnoreCase("NICKNAME")) {
                        bnname = true;
                    }
                    if (qName.equalsIgnoreCase("SALARY")) {
                        bsalary = true;
                    }
                }

                public void endElement(String uri, String localName,
                    String qName) throws SAXException {
                    System.out.println("End Element :" + qName);
                    if ("staff".equals(qName)) {
                        rowData.addElement(rowOne);
                    };
                }

                @Override
                public void characters(char ch[], int start, int length) {
                    if (bfname) {
                        String s = new String(ch, start, length);
                        rowOne.addElement(s);
                        System.out.println("First Name : " + new String(ch, start, length));
                        bfname = false;
                    }
                    if (blname) {
                        rowOne.addElement(new String(ch, start, length));
                        System.out.println("Last Name : " + new String(ch, start, length));
                        blname = false;
                    }
                    if (bnname) {
                        rowOne.addElement(new String(ch, start, length));
                        System.out.println("Nick Name : " + new String(ch, start, length));
                        bnname = false;
                    }
                    if (bsalary) {
                        rowOne.addElement(new String(ch, start, length));
                        System.out.println("Salary : " + new String(ch, start, length));
                        //rowData.addElement(rowOne);
                        bsalary = false;
                    }
                    System.out.println("longueur" + rowOne.size());
                }
            };
            saxParser.parse("file.xml", handler);
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            Vector<String> columnNames = new Vector<String>();
            columnNames.addElement("firstname");
            columnNames.addElement("lastname");
            columnNames.addElement("nickname");
            columnNames.addElement("salary");
            columnNames.addElement(" ");
            columnNames.addElement(" ");
            columnNames.addElement(" ");
            columnNames.addElement(" ");
            JTable table = new JTable(rowData, columnNames);
            JScrollPane scrollPane = new JScrollPane(table);
            frame.add(scrollPane, BorderLayout.CENTER);
            frame.setSize(300, 150);
            frame.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我的原始 XML 文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<company>
<staff >
<firstname>yong</firstname>
<lastname>mook kim</lastname>
<nickname>mkyong</nickname>
<salary>100000</salary>
</staff>
<staff >
<firstname>low</firstname>
<lastname>yin fong</lastname>
<nickname>fong fong</nickname>
<salary>200000</salary>
</staff>
</company> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:39:10.497

在您的`startElement`方法中，更改为：

```
if (qName.equalsIgnoreCase("staff"))
{
    rowOne = new Vector<String>();  
    bstaff = true;
} 
```

其他`if`语句保持不变。每个`staff`元素都放在一个`Vector`.

# android - Android onPause 线程冻结应用

> ID：15942059
> 
> 赞同：1
> 
> 时间：2013-04-11T06:27:01.217
> 
> 标签：android, multithreading, runnable, resume, onpause

我想做秒表。我创建了这样的秒表类。当我在另一个 Activity 中调用 onPause 时，它​​的冻结应用程序。

```
public class StopWatch implements Runnable {
private Object mPauseLock;
private boolean mPaused;
private boolean mFinished;
private ArrayList<TextView> textFields;
private Handler mHandler = new Handler();

public StopWatch( ArrayList<TextView> textFields) {
    mPauseLock = new Object();
    mPaused = false;
    mFinished = false;
    this.textFields =textFields;
}

public void run() {

        textFields.get(1).setText("progressing...");
        if (!mPaused) {
            mHandler.postDelayed(this, 1000);
        }
        synchronized (mPauseLock) {
            while (mPaused) {
                try {
                    mPauseLock.wait();
                } catch (InterruptedException e) {
                }
            }
        }
}

public void onPause() {
    synchronized (mPauseLock) {
        mPaused = true;
    }
}

public void onResume() {
    synchronized (mPauseLock) {
        mPaused = false;
        mPauseLock.notifyAll();
    }
} 
```

}

我在另一个视图中创建类的实例。有人可以解释我哪里有问题吗？

```
stopky = new StopWatch(textFields);
stopky.run();

// do another stuff and register buttons with onClickListener and call
stopky.onPause(); // freeze application
stopky.onResume(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:31:38.987

您不能使用从 a 调用的方法`Object.wait()`，该方法可能在 main/UI 线程上运行。`run``Handler`

整个 Android 应用程序通过向主/UI 线程注册的短方法进行协调。你可能也在那里注册你的秒表。不可能在`while`那里执行循环并同时处理来自用户界面的事件。

一个快速的解决方案是重新安排您的`run`方法并在下次调用时检查状态。基本上是这样的：

```
public void run() {
    textFields.get(1).setText("progressing...");
    if (!mPaused) {
        // do what has to be done when stopwatch is running
        mHandler.postDelayed(this, 1000);
    } else {
        // just re-schedule with a shorter delay
        mHandler.postDelayed(this, 10);
    }
} 
```

更好的方法是采用完全事件驱动的设计，并避免在停止时调用秒表。在这种情况下，您只需从 Button 的事件处理程序重新启动它。

# java - java.util.logging 与 Websphere

> ID：15942061
> 
> 赞同：3
> 
> 时间：2013-04-11T06:27:07.370
> 
> 标签：java, jakarta-ee, logging, websphere, java.util.logging

我使用 IBM Rational Application Developer (RAD) 创建了一个动态 Web 项目。我使用 java.util.logging 作为日志框架。我将 logging.properties 直接放在 WEB-INF/classes 中。

我面临的问题是，即使我把它放在 WEB-INF/classes 中，应用程序也无法加载 logging.properties。我在 WebSphere Application Server 管理员控制台中添加了以下通用 JVM 参数

```
-Djava.util.logging.config.file="logging.properties" 
```

我在 servlet init 方法中添加了以下代码片段。

```
Properties prop = System.getProperties();
prop.setProperty("java.util.logging.config.file", "logging.properties");

System.out.println("Is file exists " + file.exists());
try {
    LogManager.getLogManager().readConfiguration();
} catch (IOException ex) {
    ex.printStackTrace();
} 
```

我在 logging.properties 中关闭了控制台级别的调试，所以我不应该在控制台中登录。但是目前我在控制台中获取日志，而不是在我在 logging.properits 中提到的日志文件中。

**日志记录属性**

```
#------------------------------------------
# Handlers
#-----------------------------------------
handlers=java.util.logging.ConsoleHandler,java.util.logging.FileHandler

# Default global logging level
.level=ALL

# ConsoleHandler
java.util.logging.ConsoleHandler.level=OFF
java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter

# FileHandler
java.util.logging.FileHandler.level=FINE

# Naming style for the output file:
java.util.logging.FileHandler.pattern=${SERVER_LOG_ROOT}/nyllogs/loadData.log

# Name of the character set encoding to use
java.util.logging.FileHandler.encoding=UTF8

# Limiting size of output file in bytes:
java.util.logging.FileHandler.limit=25000000

# Number of output files to cycle through
java.util.logging.FileHandler.count=2

# Style of output (Simple or XML):
java.util.logging.FileHandler.formatter=java.util.logging.SimpleFormatter 
```

请让我知道为什么应用程序无法获取 logging.properties 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:53:11.017

在 WebSphere 服务器中，您尝试执行的操作将不仅更改应用程序的日志配置，而且更改整个服务器的日志配置。由于 WebSphere 本身使用 java.util.logging，这意味着 WebSphere 内部记录的所有内容都与应用程序日志位于同一个文件中。那将毫无意义，因为您也可以使用标准的 WebSphere 日志文件（`SystemOut.log`和`trace.log`）。

此外，由于 WebSphere 安装了自己的`LogHandler`，它很可能会禁止使用该`readConfiguration()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:39:34.507

使用[readConfiguration(is)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/logging/LogManager.html#readConfiguration%28java.io.InputStream%29)从输入流中读取配置。您的代码设置了一个具有相对路径的属性，但 JVM 无法查看它。

```
Properties prop = System.getProperties();
prop.setProperty("java.util.logging.config.file", "logging.properties"); 
```

不带参数调用 readConfiguration() 方法只会重新加载属性，由于您的路径是相对的，因此可能不会加载这些属性。

```
public void readConfiguration()
                       throws IOException,SecurityException
Reinitialize the logging properties and reread the logging configuration. 
```

使用属性的绝对路径或传递`Inputstream`. 这是一个[从文件加载属性](https://stackoverflow.com/questions/960099/how-to-set-up-java-logging-using-a-properties-file-java-util-logging)并使用`InputStream`.

# php - 希望使用 php 将两个动态创建的输入值保存在一个 mysql 行中

> ID：15942063
> 
> 赞同：-1
> 
> 时间：2013-04-11T06:27:17.607
> 
> 标签：php, jquery, html, mysql, dynamic

我想要的是当用户单击一个链接时，它应该一次自动创建**两个**文本框，我们可以从中单击并创建无限数量的文本框，当提交时它应该将所有动态创建的文本框保存在一个连续的两个文本框中。

含义 textboxA textboxB

以这种方式......

我在网上找到了一个代码，它的工作方式与我想要的非常相似......但是当点击链接时，它一次只创建一个文本框，而不是两个文本框，首先我会给你完整的原始代码......

1) 索引.php

```
<?php 
//Include the database class
require("classes/db.class.php");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>jQuery</title>
<script type="text/javascript" src="js/jquery.js"></script>
<link rel="stylesheet" type="text/css" href="css/css.css" />
<script type="text/javascript">
var count = 0;
$(function(){
    $('p#add_field').click(function(){
        count += 1;
        $('#container').append(
                '<strong>Link #' + count + '</strong><br />' 
                + '<input id="field_' + count + '" name="fields[]' + '" type="text" /><br />' );

    });
});
</script> 

<body>

<?php
//If form was submitted
if (isset($_POST['btnSubmit'])) {

    //create instance of database class
    $db = new mysqldb();
    $db->select_db();

    //Insert static values into users table
    $sql_user = sprintf("INSERT INTO users (Username, Password) VALUES ('%s','%s')",
                        mysql_real_escape_string($_POST['name']),
                        mysql_real_escape_string($_POST['password']) );  
    $result_user = $db->query($sql_user);

    //Check if user has actually added additional fields to prevent a php error
    if ($_POST['fields']) {

        //get last inserted userid
        $inserted_user_id = $db->last_insert_id();

        //Loop through added fields
        foreach ( $_POST['fields'] as $key=>$value ) {

            //Insert into websites table
            $sql_website = sprintf("INSERT INTO websites (Website_URL) VALUES ('%s')",
                                   mysql_real_escape_string($value) );  
            $result_website = $db->query($sql_website);
            $inserted_website_id = $db->last_insert_id();

            //Insert into users_websites_link table
            $sql_users_website = sprintf("INSERT INTO users_websites_link (UserID, WebsiteID) VALUES ('%s','%s')",
                                   mysql_real_escape_string($inserted_user_id),
                                   mysql_real_escape_string($inserted_website_id) );  
            $result_users_website = $db->query($sql_users_website);

        }

    } else {

        //No additional fields added by user

    }
    echo "<h1>User Added, <strong>" . count($_POST['fields']) . "</strong> website(s) added for this user!</h1>";

    //disconnect mysql connection
    $db->kill();
}
?>

<?php if (!isset($_POST['btnSubmit'])) { ?>
    <h1>New User Signup</h1>
    <form name="test" method="post" action="">
        <label for="name">Username:</label>
        <input type="text" name="name" id="name" />

        <div class="spacer"></div>

        <label for="name">Password:</label>
        <input type="text" name="password" id="password" /> 

        <div class="spacer"></div>

        <div id="container">
            <p id="add_field"><a href="#"><span>&raquo; Add your favourite links.....</span></a></p>
        </div>

        <div class="spacer"></div>
        <input id="go" name="btnSubmit" type="submit" value="Signup" class="btn" />
    </form>
<?php } ?>

</body>
</html> 
```

2) db.class.php

```
<?php
class mysqldb {

    /*
    FILL IN YOUR DATABASE DETAILS BEFORE RUNNING THE EXAMPLE
    */

    var $hostname = "localhost";
    var $username = "root";
    var $password = "mypassword";
    var $database = "unlimited";

    function db_connect() {
        $result = mysql_connect($this->hostname,$this->username,$this->password); 
        if (!$result) {
            echo 'Connection to database server at: '.$this->hostname.' failed.';
            return false;
        }
        return $result;
    }

    function select_db() {
        $this->db_connect();
        if (!mysql_select_db($this->database)) {
            echo 'Selection of database: '.$this->database.' failed.';
            return false;
        }
    }

    function query($query) {
        $result = mysql_query($query) or die("Query failed: $query<br><br>" . mysql_error());
        return $result;
        mysql_free_result($result);
    }

    function fetch_array($result) {
        return mysql_fetch_array($result);
    }

    function num_rows($result) {
        return mysql_num_rows($result);
    }

    function last_insert_id() {
        return mysql_insert_id();
    }

    function kill() {
        mysql_close();
    }

} 
?> 
```

3）css.css

```
html, input {font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 0.8em;}
body { width: 500px; margin: 50px auto 0 auto; display: block;}
h1 { font-size: 1.5em; color: #333; }
input { font-size: 0.9em; padding: 5px; border: 1px solid #ccc;  margin: 0; display: block;}
a { text-decoration: none; color: #666; font-weight: bold; }
a:hover { color: #ff0000; }
#divTxt { width:400px; padding: 5px;  }
p a img { border: none; vertical-align: middle; }
.spacer {clear: both; height: 10px; }
.btn { width: 90px; font-weight: bold; }
#container { border: 1px solid #ccc; padding: 2px; }
.clear {overflow: hidden;width: 100%;
} 
```

4) **JQUERY.js**

使用此代码，我只允许在单击链接时动态创建一个文本框，正如我之前所说的，所以为了让它供我使用，因为我想要两个文本框，我在`index.php`页面中编辑了 jquery 部分，如下所示......

```
<script type="text/javascript">
var count = 0;
$(function(){
    $('p#add_field').click(function(){
        count += 1;
        $('#container').append(
                '<strong>Link #' + count + '</strong><br />' 
                + '<label for="fields[]' + '">Colour</label><input id="field_' + count + '" name="fields[]' + '" type="text" /><label for="fields2[]' + '">Quantity</label><input id="field2_' + count + '" name="fields2[]' + '" type="text" /><br />');
    });
});
</script> 
```

直到这里我成功了......但主要问题是我无法将它们两个文本框都保存在 mysql 表中的一行中..

如果您得到任何答案，请查看此代码并回复我......

我一定会单击绿色箭头作为工作答案作为接受的答案..

请帮助伙计们......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:11:35.313

尝试这个

**jQuery**

```
<script type="text/javascript">
var count = 0;
$(function(){
    $('p#add_field').click(function(){
        count += 1;
        $('#container').append(
                '<strong>Link #' + count + '</strong><br />' 
                + '<label for="field_'+count+'_1">Name</label><input id="field_'+count+'_1" name="fields[]['name']" type="text" /><label for="field2_'+count+'_2">URL</label><input id="field2_'+count+'_2" name="fields[]['url']" type="text" /><br />');
    });
});
</script> 
```

**PHP**

```
 //Insert into websites table
        $sql_website = sprintf("INSERT INTO websites (Website_Name,Website_URL) VALUES ('%s','%s')",
                               mysql_real_escape_string($value['name']),
                               mysql_real_escape_string($value['url']) );  
        $result_website = $db->query($sql_website);
        $inserted_website_id = $db->last_insert_id(); 
```

我假设第一列是 Website_Name，第二列是 Website_URL

* * *

**PS**：您已经说过它创建了两个文本框，这意味着应该有两个表字段，您要在其中添加这两个值。但是在您的 MySQL 查询中，只有一列插入。

```
"INSERT INTO websites (Website_URL) VALUES ('%s')" 
```

指定第二列名称以正确回答您的问题。

# ruby-on-rails - How to do genders in mongoid and simpleform?

> ID：15942066
> 
> 赞同：0
> 
> 时间：2013-04-11T06:27:31.437
> 
> 标签：ruby-on-rails, mongoid, simple-form

I have the following models:

```
class User
  include Mongoid::Document
  has_one :gender

class Gender
  include Mongoid::Document
  has_and_belongs_to_many :users 
```

Gender table is seeded with genders.

My simpleform for user edit is as follows:

```
<%= simple_form_for @user do |f| %>
  <%= f.input :gender, :collection => Gender.all, :prompt => "Choose a gender" %>
  <%= f.submit "Save" %>
<% end %> 
```

However when I save this, a `user.gender` doesn't do anything.

Anyone have any thoughts on this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:02:17.670

From what I can see your logic is like this -

-one user has one gender

-one gender has many users

```
class User
  include Mongoid::Document
  belongs_to :gender

class Gender
  include Mongoid::Document
  has_many :users 
```

To get user's gender

```
user.gender 
```

To users who has the same gender

```
gender.users 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:41:04.617

Change your model as

```
class User
  include Mongoid::Document
  has_one :gender

class Gender
  include Mongoid::Document
  belongs_to :user 
```

And change your form field as:

```
<%= f.input :gender_id, :collection => Gender.all, :prompt => "Choose a gender" %> 
```

# c++ - stl map 和 multimap 的二元谓词的行为....

> ID：15942067
> 
> 赞同：0
> 
> 时间：2013-04-11T06:27:49.140
> 
> 标签：c++, map, comparator

我有以下代码：

```
#include <iostream>
#include <stdio.h>
#include <cmath>
#include <map>
using namespace std;
struct vals
{
int cods[5];
int sz;
};  
struct myComp
{
bool operator()(vals A, vals B) const
{
    int i=0;
    while(A.cods[i]==B.cods[i] && i<A.sz)
        i++;
    if(i==A.sz)
        return false; //<-----this is the value im changing..
    else
        return A.cods[i] > B.cods[i];
}
};
map< vals, int, myComp> Mp;                 
int main()
{
vals g, h;
g.sz=h.sz=3;
g.cods[0] = 12;
g.cods[1] = 22;
g.cods[2] = 32;
Mp.insert(pair< vals, int >(g,4));
Mp.insert(pair< vals, int >(g,7));
cout<<Mp.count(g)<<endl;
cout<<Mp.size()<<endl;
return 0;
} 
```

现在，当声明`Mp`为 map 并放入`false`二进制谓词时.. 输出为： 1 1

`Mp => map && binary predicate:true ==> output: 0 2`

`Mp => multimap && binary predicate:true ===> output: 0 2`

`Mp => multimap && binary predicate:false ===> output: 2 2`

我认为谓词的返回值只是告诉`stl`是否将一个元素放在它的前面或后面。但我不明白这对地图本身的大小有何影响。请对此有所了解。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:53:33.137

您的比较必须实现[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)。使用时不满足此要求

```
if(i==A.sz)
    return true; 
```

在你的比较器中。在这种情况下，数组中的所有元素都相同。`true`如果两个参数相等，则函子不能返回。如果您没有严格的弱排序比较，则地图无法正常运行。

您可以使用以下方法大大简化您的仿函数[`std::lexicographical_compare`](http://en.cppreference.com/w/cpp/algorithm/lexicographical_compare)：

```
#include <algorithm>  // for std::lexicographical_compare
#include <functional> // for std::greater

...

bool operator()(vals A, vals B) const
{
  return std::lexicographical_compare(A, A+A.sz, B, B+B.sz); // less-than
  //return std::lexicographical_compare(A, A+A.sz, B, B+B.sz, std::greater<int>()); // gt
} 
```

# c++ - 如果我们使用 memcpy，则释放内存时出错

> ID：15942068
> 
> 赞同：0
> 
> 时间：2013-04-11T06:27:55.087
> 
> 标签：c++, c

在使用`memcpy`和释放内存时，`free`会出现堆损坏。我不明白为什么。

```
char *buff = malloc(20);
memset(buff,NULL,20);
strcpy(buff,"xvxvxvxxvx");
char*time =  malloc(20));
memset(time,NULL,20);//memcpy use
memcpy(time,buff,20);
free(time);//crashing here
return 0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T06:29:19.887

`sizeof(20)`是 的大小`int`。您可能打算`malloc(20)`使用 20 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:11:55.733

memset 的第二个参数需要 int 但正在接收 NULL。

void *memset(void *s, int c, size_t n);

memset() 函数用常量字节 c 填充 s 指向的内存区域的前 n 个字节。

所以你可以使用 memset 作为 memset(buff,0,20); 现在程序不会崩溃。

# php - 如何在同一页面中显示html输出？

> ID：15942072
> 
> 赞同：1
> 
> 时间：2013-04-11T06:28:21.673
> 
> 标签：php, javascript, jquery, html

我正在编写一个应用程序来从社交网络中获取图片。如何添加确保当用户单击链接时，输出（由抓取的图片组成）显示在同一页面中？

我为它们中的每一个编写了单独的 php 文件，它们都转到单独的页面。我想把它们放在同一页上。如何在同一页面中运行 php 文件？

```
<a href="#" class="show_hide" rel="#slidingDiv">View</a>
<br /> 
<div id="slidingDiv"> 
    <a href="/Gravatar/gravindex.php">Gravatar</a> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:30:25.123

这取决于不指向 php.ini 的链接。如果您使用`target="_self"`它将在同一页面中打开

# mysql - Node.js mysql.createConnection 与 mysql.Client

> ID：15942083
> 
> 赞同：0
> 
> 时间：2013-04-11T06:29:24.523
> 
> 标签：mysql, node.js

我已经使用了两种方法来创建与 Node.js 的 mysql 连接

有什么区别？

# c++ - 在 Visual Studio 中设置 SDL 时出现错误

> ID：15942085
> 
> 赞同：0
> 
> 时间：2013-04-11T06:29:27.083
> 
> 标签：c++

我已经有这个问题很长时间了，我什至没有运气，这变得非常令人沮丧。我真的很想`C++`用`OpenGL/SDL`. 我正在使用`Microsoft Visual Studio Ultimate 2012`. 我的操作系统是**64 位**Windows 7。

我在使用 Visual Studio 设置 OpenGL 时没有遇到任何问题，但这`SDL`是主要问题。我遵循懒惰的 foo 教程，我查看了 YouTube 视频，该死的太烦人了。在 Visual Studio 中调试 SDL 时出现的错误是：

> 1>SDLMain.obj：错误 LNK2019：未解析的外部符号 _SDL_Init 在函数 _SDL_main 中引用 1>SDLMain.obj：
> 错误 LNK2019：未解析的外部符号 _SDL_Quit 在函数 _SDL_main 中引用 1>MSVCRT.lib(crtexew.obj)：
> 错误 LNK2019：未解析的外部函数 _ _tmainCRTStartup中引用的符号 *WinMain@16*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:50:54.017

我不知道您自己构建库是什么意思，但我确实链接了 SDL 库。我从 x64 切换到 x86，当我再次调试我的代码时，我收到了这条消息：

应用程序无法正确启动 (0xc000007b)。单击确定关闭应用程序。

所以你说如果我下载了早期版本的 Visual Studio，我可以毫无问题地运行 SDL？

# php - php上传器无效

> ID：15942089
> 
> 赞同：0
> 
> 时间：2013-04-11T06:29:41.710
> 
> 标签：php, uploader

我正在尝试嵌入文件上传器，但它显示 pdf 和其他应用程序文件的无效错误，按照我正在使用的代码，任何人都可以帮助我找出错误为什么它显示无效消息。提前致谢。

```
<?php
$allowedExts = array("gif", "jpeg", "jpg", "png" );
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "application/pdf"))
&& ($_FILES["file"]["size"] < 50000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
  {
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
  else
{
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

if (file_exists("upload/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $_FILES["file"]["name"]);
  echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
  }
    }
          }
    else
      {
      echo "Invalid file";
  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:30:40.937

您只允许`.gif`, `.jpeg`, `.jpg`,`.png`在第 1 行：

```
$allowedExts = array("gif", "jpeg", "jpg", "png" ); 
```

如果上传PDF，当然会提示`Invalid file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:39:37.600

请尝试以下方法：

利用：`$allowedExts = array("gif", "jpeg", "jpg", "png","pdf");`

代替：`$allowedExts = array("gif", "jpeg", "jpg", "png" );`

为了将来，请记住添加您想要允许的扩展。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:32:51.707

在你的

```
 $allowedExts = array("gif", "jpeg", "jpg", "png" ) 
```

不包含“pdf”，请添加允许的扩展名“$allowedExts”，如

```
 $allowedExts = array("gif", "jpeg", "jpg", "png","pdf","php" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T06:53:46.287

明显的错误已经指出。

除此之外，如果您将代码重构并重新格式化为类似

```
$allowedExts = Array("gif", "jpeg", "jpg", "png" );
$allowedContentTypes = Array("application/pdf", "image/png", "image/jpeg", "image/jpg", "image/gif");
$fileSizeLimit = 50000;

function getExtension($file)
{
  return end(explode(".", $file["name"]));
}
function hasAllowedContentType($file)
{
  return in_array($file['type'], $allowedContentTypes);
}
function isWithinSizeLimits($file)
{
  return $file['size'] < $fileSizeLimit;
}
function hasAllowedExtension($file)
{
  $extension = getExtension($file['name');
  return in_array($extension, $allowedExts);
}
function alreadyExists($path)
{
  return file_exists($path);
}

$file = $_FILES["file"];
$targetPath = "upload/" . $file["name"];
$tempPath = $file["tmp_name"];

if (!hasAllowedContentType($file)
   || !isWithinSizeLimits($file)
   || !hasAllowedExtension($file))
{
   echo "Invalid file";
}
else if ($file["error"] > 0)
{
   printf("Return Code: %s<br>", $file["error"]);
}
else
{
  printf("Upload: %s<br>", $file["name"]);
  printf("Type: %s<br>", $file["type"]);
  printf("Size: %d kB<br>", ($file["size"] / 1024));
  printf("Temp file: %s<br>", $tempPath);

  if (alreadyExists($targetPath))
  {
    printf("%s already exists.", $file["name"]);
  }
  else
  {
    move_uploaded_file($tempPath, $targetPath);
    printf("Stored in: %s", $targetPath);
  }
} 
```

它已经更容易理解和维护了。

# grails - 如何使用 jar 中带有 @grails.persistence.Entity 注释的类

> ID：15942091
> 
> 赞同：1
> 
> 时间：2013-04-11T06:30:11.893
> 
> 标签：grails, grails-domain-class

在我的 grails 项目中，我想将公共 jar 文件中的域类与 @grails.persistence.Entity 注释一起使用。但是当我按照 [grails 站点的文档中的步骤进行操作时](http://grails.org/doc/latest/guide/hibernate.html#mappingWithHibernateAnnotations)

我添加 hibernate.cfg.xml 喜欢

```
<!DOCTYPE hibernate-configuration SYSTEM
  "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <mapping package="com.books" />
        <mapping class="com.books.Book" />
    </session-factory>
</hibernate-configuration> 
```

到 grails-app/conf/hibernate/ 目录。但是当我启动项目时，它会报告错误日志：

```
2013-04-11 14:24:53,928 - org.codehaus.groovy.grails.web.context.GrailsContextLoader -20516 [pool-5-thread-1] ERROR  - Error executing bootstraps: groovy.lang.MissingMethodException: No signature of method: static com.baoxian.task.inscar.entity.QuoteTask.findById() is applicable for argument types: (java.lang.Long) values: [2851]
Possible solutions: find(), findAll(), findAll(groovy.lang.Closure), find(groovy.lang.Closure)
org.codehaus.groovy.runtime.InvokerInvocationException: groovy.lang.MissingMethodException: No signature of method: static com.baoxian.task.inscar.entity.QuoteTask.findById() is applicable for argument types: (java.lang.Long) values: [2851]
Possible solutions: find(), findAll(), findAll(groovy.lang.Closure), find(groovy.lang.Closure)
    at grails.util.Environment.evaluateEnvironmentSpecificBlock(Environment.java:300)
    at grails.util.Environment.executeForEnvironment(Environment.java:293)
    at grails.util.Environment.executeForCurrentEnvironment(Environment.java:269)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: groovy.lang.MissingMethodException: No signature of method: static com.baoxian.task.inscar.entity.QuoteTask.findById() is applicable for argument types: (java.lang.Long) values: [2851]
Possible solutions: find(), findAll(), findAll(groovy.lang.Closure), find(groovy.lang.Closure)
    at BootStrap$_closure1.doCall(BootStrap.groovy:22)
    ... 8 more
Disconnected from the target VM, address: '127.0.0.1:63383', transport: 'socket'

Process finished with exit code 1 
```

很明显@Entity 不起作用。此外，我的 BuildConfig.groovy 喜欢：

```
compile ('com.baoxian:baoxian-task-inscar-manager:1.2.5-SNAPSHOT')
                {
                    excludes "org.grails", "org.slf4j", "xml-apis","mysql","org.hibernate","hsqldb","hibernate-annotations","org.quartz-scheduler","org.springframework"
                } 
```

com.baoxian:baoxian-task-inscar-manager:1.2.5-SNAPSHOT 就是我的域类所在的位置

这是我第一次在 stackoverflow 上提问。^_^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:37:27.050

*如果我错过了一个更简单/更好的问题解决方案，请有人纠正我。*

@yidao620c，我怕你做的不行。。。。

我推荐 2 个解决方案（对于您似乎想要做的事情，我通常选择第二个选项）：

1) **JPA 实体注释不是 Grails 实体注释**

如果您想遵循文档，我相信您的 JPA 类必须驻留在 Grails 项目中（JPA 注释，而不是 grails *@Entity*注释）。

对您来说最简单的路径可能是 JPA 插件[http://grails.org/JPA+Plugin](http://grails.org/JPA+Plugin)。如果您仍需要动态查找器，请跳至选项 2)。

2) **Gorm ouside Grails 注入动态查找器**

如果您想从外部 jar（非 Grails 项目）**导入带有 grails 注释的实体，则需要一些额外的步骤来注入动态查找器（** *findAll*等）。

由于这可能是一篇包含所有细节的长篇文章，我将很快制作一个关于如何做到这一点的视频（提示：[http](http://www.grails.org/GORM+-+StandAlone+Gorm) ://www.grails.org/GORM+-+StandAlone+Gorm ）。

但是，这里有一个简短的回答：

*   创建一个 Groovy 项目（我通常使用 Gradle 作为构建系统）。
*   依赖于 Grails Gorm、Grails bootstrap 和其他一些（slf4j、Spring 等）
*   有一个 Spring 配置（XML 或 Grails Spring DSL）来注入一个 Gorm Session 工厂。您可以使用简单的主类快速测试动态查找器 -> 加载 Spring Beans 以设置 Gorm -> 使用*withNewSession*或*withTransaction*或使用服务调用域对象。
*   当您构建 jar 时，编译阶段将增强您的实体以注入动态 Gorm 方法。

# c++ - 增量工作非常奇怪

> ID：15942095
> 
> 赞同：13
> 
> 时间：2013-04-11T06:30:48.060
> 
> 标签：c++, increment

该程序应该给出任何大小的阶乘的最后 100 位数字。然而，main() 中的 counter2++ 发生了一些奇怪的事情。每次循环在 main() 函数中运行（即 99 次），counter2 都会增加 +1。但是，这是显示的内容：

```
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
71
86
90
123
164
196
207
254
300
362
432
471
551
620
630
708
761
772
857
896
985
1036
1100
1116
1207
1209
1280
1356
1417
1452
1512 
```

Counter2 最终是 1512 而不是 100，但是如果我从 main() 中删除 mult(i) 或 carry()，那么它会显示 100。为什么 counter2 最终是 1512 而不是 100？

```
#include <iostream>

using namespace std;

int numbers[100];
int counter2 = 0;

void init(){
//sets elements 1-99 of numbers[] to 0, increments counter2 by 1, sets numbers[0] = 1
    for (int i = 1; i < 100; i++){
        numbers[i] = 0;
    }
    numbers[0] = 1;
    counter2++;
}

void mult(int x){
//multiplies each element by 1 through n to calculate for !n
//this is used to represent a very large number without using a BigInt library
//the nth element is a placeholder for the n+1 position of the number
//e.g 2nd element represents 100-900 of the number, 4th represents 1000-9000, etc
//carry() is used to take care of overflow, so that it's only 1 digit per element
    for (int i = 0; i < 100; i++){
        numbers[i] *= x;
    }
}

void carry(){
//in order to make previous function work, this adds any overflow to the next
//element. e.g: 8 * 4 = 32, 3 is added to numbers[i+1], sets numbers[i] to 2
    int counter = 0;
    for (int i = 0; i < 100; i++){
        if (numbers[i] >= 10){
            counter = numbers[i] / 10;
            numbers[i+1] += counter;
            numbers[i] = numbers[i] % (counter * 10);
        }
    }
}

int main()
{
    init();
    for (int i = 2; i < 101; i++){
    //calculates the last 100 digits of !100, but counter2 ends up being 1512
        mult(i);
        carry();
        counter2++;
        cout << counter2 << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T06:38:08.627

`numbers`您正在写超出数组末尾的内容`carry()`：

```
 numbers[i+1] += counter; 
```

在这里，`i`can be `99`，在这种情况下`numbers[i+1]`超出范围。

从技术上讲，这是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。在实践中发生的事情是您覆盖了`count2`变量，该变量恰好位于数组之后的内存中。

关于内存错误的一件令人讨厌的事情是，它们可以长时间无症状，然后在最坏的情况下浮出水面。[`valgrind`](http://valgrind.org/)是检测此类问题的好工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T06:39:07.950

在这一行

```
 numbers[i+1] += counter; 
```

`numbers[100];`
当您更改位于内存中数字旁边`i == 99`的值（在您的情况下，但不一定）时，您正在写入超出数组的范围。`int counter2 = 0;`

# amazon-s3 - 无法解决错误 2017：运行 PIG 时在 EMR 上创建作业配置的内部错误

> ID：15942096
> 
> 赞同：2
> 
> 时间：2013-04-11T06:30:48.527
> 
> 标签：amazon-s3, apache-pig, amazon-emr, emr

我一直在尝试在 Amazon EMR 上使用 Pig 运行一个非常简单的任务。当我在交互式 shell 中运行命令时，一切正常。但是当我运行与批处理作业相同的事情时，我得到了

> [main] 错误 org.apache.pig.tools.grunt.Grunt - 错误 2017：创建作业配置的内部错误。

并且运行脚本失败。这是我的 7 行脚本。它只是计算 Google bigrams 元组的平均值。mc 是匹配计数，vc 是音量计数。

```
bigrams = LOAD 's3n://<<bucket-name>>/gb­bigrams/*' AS (bigram:chararray, year:int, mc:int, vc:int);
grouped_bigrams = group bigrams by bigram;
answer1 = foreach grouped_bigrams generate group, ((DOUBLE) SUM(bigrams.mc))/COUNT(bigrams) AS avg_mc;
sort_answer1 = ORDER answer1 BY avg_mc desc;
answer2 = LIMIT sort_answer1 5;
STORE answer1 INTO 's3n://<bucket-name>/output/bigram/20130409/answer1';
STORE answer2 INTO 's3n://<bucket-name>/output/bigram/20130409/answer2'; 
```

我猜这个错误与 STORE 和 s3 路径有关。所以我尝试了各种组合，比如使用 $OUTPUT、反斜杠等。但总是遇到同样的错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:51:13.460

您是否尝试过使用 S3 块文件系统而不是本机文件系统？

例如

```
s3://<<bucket-name>>/gb­bigrams/*
s3://<bucket-name>/output/bigram/20130409/answer1 
```

# java - 动态表数据检索 - selenium webdriver

> ID：15942101
> 
> 赞同：2
> 
> 时间：2013-04-11T06:31:23.090
> 
> 标签：java, selenium, selenium-webdriver, testng

```
<table id="tblListViewHeader" class="adminlist" cellspacing="1" cellpadding="0" style="table-layout: fixed; width: 1003px;">
<tbody>
</table>
</td>
</tr>
<tr>
<td>
<div id="divListView" style="width: 100%; height: 300px; overflow: auto; display: block;">
<table id="tblListView" class="adminlist" cellspacing="1" cellpadding="0" style="table-layout: fixed; width: 100%;">
  <tbody data-bind="template: { name: 'ActiveGradeTemplate', foreach: ActiveGrade }">
    <tr class="row0">
      <td data-bind="text:$index()+1" style="width: 5%;">1</td>
      <td data-bind="text: GradeName" style="width: 20%;">Vantage Point</td>
      <td align="right" data-bind="text: DisplayCreatedDate" style="width: 10%;">27 Mar 2013</td>
      <td align="right" data-bind="text: CreatedByUser" style="width: 10%;">Name</td>
      <td align="right" data-bind="text: DisplayModifiedDate" style="width: 10%;">27 Mar 2013</td>
      <td align="right" data-bind="text: ModifiedByUser" style="width: 10%;">Name</td>
      <td align="center" data-bind="text: Status" style="width: 5%;">Active</td>
      <td align="center" style="width: 10%;">
        <a id="lnkEdit_7" data-bind="click: $root.lnkEdit, attr:{'id':'lnkEdit_' + GradeID}" href="#">Edit</a>
        <span id="spanEdit_7" data-bind="attr:{'id':'spanEdit_' + GradeID}"></span>
      </td>
   </tr>
   <tr class="row0">
     <td data-bind="text:$index()+1" style="width: 5%;">2</td>
     <td data-bind="text: GradeName" style="width: 20%;">test grade</td>
     <td align="right" data-bind="text: DisplayCreatedDate" style="width: 10%;">Yesterday</td>
     <td align="right" data-bind="text: CreatedByUser" style="width: 10%;">Name</td>
     <td align="right" data-bind="text: DisplayModifiedDate" style="width: 10%;">Yesterday</td>
     <td align="right" data-bind="text: ModifiedByUser" style="width: 10%;">Name</td>
     <td align="center" data-bind="text: Status" style="width: 5%;">Active</td>
     <td align="center" style="width: 10%;">
       <a id="lnkEdit_11" data-bind="click: $root.lnkEdit, attr:{'id':'lnkEdit_' + GradeID}" href="#">Edit</a>
      <span id="spanEdit_11" data-bind="attr:{'id':'spanEdit_' + GradeID}"></span>
    </td>
  </tr> 
```

如何检索`td`每一行的值，这是用于动态生成的。所有的`tr`类名都是一样的：`<tr class="row0">`. 如何检索上述格式化表格的表格数据？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T10:18:37.477

试试下面的代码，这将打印所有单元格数据，

```
// Grab the table 
WebElement table = driver.findElement(By.id("divListView")); 

// Now get all the TR elements from the table 
List<WebElement> allRows = table.findElements(By.tagName("tr")); 

// And iterate over them, getting the cells 
for (WebElement row : allRows) { 
    List<WebElement> cells = row.findElements(By.tagName("td")); 

    // Print the contents of each cell
    for (WebElement cell : cells) { 
        System.out.println(cell.getText());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-20T11:16:36.367

```
 // Grab the table 
  WebElement table = driver.findElement(By.id("table-6")); 

  //Get number of rows in table 
  int numOfRow = table.findElements(By.tagName("tr")).size(); 

  //Get number of columns In table.
  int numOfCol = driver.findElements(By.xpath("//*[@id='table-6']/tbody/tr[1]/td")).size();

  //divided Xpath In three parts to pass Row_count and Col_count values.
  String first_part = "//*[@id='table-6']/tbody/tr[";
  String second_part = "]/td[";
  String third_part = "]";

  //take the second column values
  int j=2;

  //List to store the second column
  List<String> secondColumnList=new ArrayList<String>();

  //Loop through the rows and get the second column and put it in a list
  for (int i=1; i<=numOfRow; i++){

    //Prepared final xpath of specific cell as per values of i and j.
       String final_xpath = first_part+i+second_part+j+third_part;
       //Will retrieve value from located cell and print It.
       String test_name = driver.findElement(By.xpath(final_xpath)).getText();
       secondColumnList.add(test_name);  
       System.out.println(test_name);

  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-02T14:59:31.237

**动态表数据捕获：** 1.首先捕获表头数。[ `int tHeadCount = driver.findElements(By.xpath("//table//tr//th")).size();`]

2.Capture Table Row Count 您的实际数据存在于哪一行。[-在我看来，我需要来自第一行的数据，因此我将其硬编码为零。]如果需要，请在现有代码中添加一个 for 循环。

3.实际解决方案从这里开始。以下是函数调用“Deposited By”是相应表格数据的表格标题文本。

```
String tableDataValue = managePackageTableData("Deposited By");

public String  managePackageTableData(String columnName) {

//In Following line i am capturing table contains how many headers.     
        int tHeadCount = driver.findElements(By.xpath("//table//tr//th")).size();

    int statusIndex = 0;
    for(int i=0;i<tHeadCount-1;i++)
    {
    String theadValue = driver.findElements(By.className("table")).get(0).findElements(By.tagName("tr")).get(0).findElements(By.tagName("th")).get(i).getText();

    if(theadValue.equalsIgnoreCase(columnName))
    {
        statusIndex = i;
        break;
    }
    }       
    String tableData = driver.findElements(By.tagName("tbody")).get(0).findElements(By.tagName("tr")).get(0).findElements(By.tagName("td")).get(statusIndex).getText();

    return tableData;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T06:43:21.093

你有很多选择，但有我的。您将所有 tds 捕获到一个列表中。

```
List<WebElement> tdlist = driver.findElements(By.cssSelector("table[id='divListView'] tr td")); 
```

如果你想拥有价值，你可以使用循环。

```
for(WebElement el: tdlist)  {
    Systeme.out.println(el.getText());   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-15T09:50:53.150

在遍历表和列表期间查看这个最常见的挑战自动化测试人员面孔。他们经常想从表格单元格或列表中找到一些值，并希望对相同的值执行操作或在同一块中找到相应的其他元素并对其执行操作。

[http://qeworks.com/iterate-table-lists-selenium-webdriver/](http://qeworks.com/iterate-table-lists-selenium-webdriver/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-30T16:14:57.377

//tbody/tr

这将为您提供行的总数-

//tbody/tr/td

这将为您提供上述行的所有单元格，您可以根据您的要求对其进行迭代。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-12T03:25:20.807

我已经使用 Selenium C# 完成了这段代码`TestComplete`，并且现在已经用 Selenium C# 复制了它，我已经学会了这种艰难的方法，但它适用于任何表格控件，您不必对其中的任何`xpath`元素进行硬编码。此外，如果您有一个类似的嵌套表格控件`td`，例如，您有一个嵌套表格结构，其中您的数据解释如下（当您使用开发人员快速网格或角度网格控件时发生在复杂表格中）。这种情况下，如果您看到`td`标记再次具有嵌套表结构，该结构再次具有重复数据。您可以使用我在下面给出的代码捕获此类数据，也可以根据具体情况保留这些数据。

html

```
<table>
<tr>
  <td>Account #
      <table>
        <tr>
          <td>
            Account #
          </td>
        </tr>
      </table>
   </td>
   <td>Name 
      <table>
        <tr>
          <td>
            Name
          </td>
        </tr>
      </table>
   </td>
</tr>   
<tr>
   <td>1234 
      <table>
        <tr>
          <td>
              1234            
          </td>
        </tr>
      </table>
   </td>
    <td>Bharat
      <table>
        <tr>
          <td> 
           Bharat               
          </td>
        </tr>
      </table>
   </td>
</tr>
</table> 
```

代码

```
 public List<TableDataCollection> StoreHtmlTableToList(IWebElement tblObj)
        {
            DataTable dataTbl = new DataTable();
            int rowIndex = 1;

            try
            {               
                _tblDataCollection = new List<TableDataCollection>();

                var tblRows = ((IJavaScriptExecutor)DriverContext.Driver).ExecuteScript("return arguments[0].rows; ", tblObj);

                if (tblRows != null)
                {
                    //Iterate through each row of the table
                    foreach (IWebElement tr in (IEnumerable)tblRows)
                    {                        
                        int colIndx = 1;
                        // Iterate through each cell of the table row
                        var tblCols = ((IJavaScriptExecutor)DriverContext.Driver).ExecuteScript("return arguments[0].cells; ", tr);
                        foreach (IWebElement td in (IEnumerable)tblCols)
                        {

                            //loop through any child or nested table structures if you want using the same approach

                            //Write Table to List : This part is not done yet

                            //Print the values
                            Console.WriteLine("Row[" + rowIndex.ToString() + "] Col[" + colIndx.ToString() + "] : " + td.Text);
                            colIndx++;
                        }
                        rowIndex++;
                    }

                }

            }
            catch (Exception)
            {
                throw;
            }
            return _tblDataCollection;
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-29T13:37:19.703

@里彭·瓦西姆

下面的代码将帮助您逐列查找值

```
WebElement customtable = t.driver.findElement(By.cssSelector("div.custom-table"));
List<WebElement> r = customtable.findElements(By.tagName("tr"));
for (WebElement row : r) {
            List<WebElement> d = row.findElements(By.tagName("td"));            
            for(int i = 0; i<d.size(); i++) {
                if(i==0) {
                    WebElement x =d.get(i);
                    JavascriptExecutor js = (JavascriptExecutor) t.driver;
                    js.executeScript("arguments[0].scrollIntoView();", x);
                    System.out.println(i+"."+d.get(i).getText()+"\n");                  
                    if(d.get(i).getText().contains(searchtext)) {                       
                        System.out.println(i+".yes\n");
                    }
                    else
                    {
                        System.out.println("No\n");
                    }

                }
            }           
} 
```

它为我工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-22T06:26:31.150

# 以下是我们可以遵循的不同方法来处理应用程序中的动态数据[它不适用于动态元素]；

1.  使用excel方法；

    一个。获取字段的 web 元素

    湾。获取其文本。

    C。将数据存储在 excel 中并使用实际结果模式进行验证。

注意：Excel 中有多个数据验证选项，例如比较列、获取重复项等。

2.  使用集合；

    一个。获取字段的 web 元素。

    湾。在集合中获取它的数据 [List, set, map etc]

    C。编写 java 代码来比较应用程序数据的模式。

    ```
     i.  Pattern can be data type, data length, data range ,Decimal places of amount field or other ,currency type, date and time pattern etc.

        ii. You can write the java conditions to verify the values of charts/graphs/dashboard if you are using in your application. 
    ```

    d。比较实际数据模式[来自集合]和预期数据模式[来自 java 代码]

3.  使用 JDBC API 通过数据库处理它，您可以在其中使用不同的命令检查实际数据。

# html - 在不使用 Dreamweaver/firebug 的情况下制作图像区域图

> ID：15942110
> 
> 赞同：1
> 
> 时间：2013-04-11T06:32:02.407
> 
> 标签：html, firebug, dreamweaver, imagemap

他们有什么方法可以在不使用**Dreamweaver**的情况下制作图像区域图？

我认为手动很难使用坐标来设计完美的构图，目前我正在尝试**在 Mozilla Firefox 中的 Firebug**的帮助下绘制区域地图，或者购买 Dreamweaver 本身，但如果您使用在线 FTP 则可以使用它。

```
<img id="image" src="images/xyz.png" usemap="#image" border="0" alt="" />
    <map id="imagemap" name="image">
        <area shape="rect" coords="x,y,z,w" href="#" alt="" title="" />
        <area shape="rect" coords="x,y,z,w" href="#" alt="" title="" />
        <area shape="rect" coords="x,y,z,w" href="#" alt="" title="" />
    </map> 
```

他们是否有任何其他节省时间的东西或替代图像区域的地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:36:38.290

如果我误解了你，请纠正我，但你可以尝试这些服务来创建 img 地图：

[http://www.image-maps.com/](http://www.image-maps.com/)

[http://www.maschek.hu/imagemap/](http://www.maschek.hu/imagemap/)

[http://www.kolchose.org/simon/ajaximagemapcreator/](http://www.kolchose.org/simon/ajaximagemapcreator/)

# php - 即使在上传新图像后仍显示旧图像

> ID：15942117
> 
> 赞同：3
> 
> 时间：2013-04-11T06:32:16.913
> 
> 标签：php, image, apache, caching, file-upload

我正在使用 php 上传文件并在上传完成后立即显示它。有时它显示旧图像，不显示新上传的图像。但点击刷新将显示新图像。我怎样才能摆脱这个？我正在使用 apache 网络服务器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T06:33:55.640

这是由于浏览器的缓存。尝试在文件名路径中添加一个随机数，例如

```
<img src="image.jpg?rand=<?php echo rand(); ?>" /> 
```

当然，`rand`每次都是由随机函数（PHP / Javascript）生成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T06:35:24.330

您正在获取缓存图像，以将随机值附加到您的图像源，例如：

```
your_image.png?t=<?php echo time(); ?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T07:04:28.663

这样，只要未修改，您就可以将其保持缓存，并在修改后立即提供新图像。

```
<img src="image.jpg?t=<?php echo filemtime('image.jpg'); ?>" /> 
```

注意：这不会完全禁用缓存，但如果可用，则提供新图像。

# javascript - HTML/CSS/jQuery 换行问题

> ID：15942119
> 
> 赞同：4
> 
> 时间：2013-04-11T06:32:21.303
> 
> 标签：javascript, jquery, html, css

对齐它以正确显示的最佳方法是什么，如下图所示：![封闭式布局](https://i.stack.imgur.com/hfGyo.jpg)

HTML 标记：

```
<div id="main">
  <div id="article-thumbnail-1" class="article-thumbnail">
    <div class="article-open"><img src=".../article-open.png" /></div>
    <div class="article-close"><img src=".../artcle-close.png" /></div>
  </div>
  <article id="article-1" class="article-entry">
    <header class="article-header">
      <h2>This is the article 1 text</h2>
    </header>
    <div class="article-body">
      <p>This is the article 1 body</p>
    </div>
  </article>

  <div id="article-thumbnail-2" class="article-thumbnail">
    <div class="article-open"><img src=".../article-open.png" /></div>
    <div class="article-close"><img src=".../artcle-close.png" /></div>
  </div>
  <article id="article-2" class="article-entry">
    <header class="article-header">
      <h2>This is the article 2 text</h2>
    </header>
    <div class="article-body">
      <p>This is the article 2 body</p>
    </div>
  </article>

  <div id="article-thumbnail-3" class="article-thumbnail">
    <div class="article-open"><img src=".../article-open.png" /></div>
    <div class="article-close"><img src=".../artcle-close.png" /></div>
  </div>
  <article id="article-3" class="article-entry">
    <header class="article-header">
      <h2>This is the article 3 text</h2>
    </header>
    <div class="article-body">
      <p>This is the article 3 body</p>
    </div>
  </article>

  <div id="article-thumbnail-4" class="article-thumbnail">
    <div class="article-open"><img src=".../article-open.png" /></div>
    <div class="article-close"><img src=".../artcle-close.png" /></div>
  </div>
  <article id="article-4" class="article-entry">
    <header class="article-header">
      <h2>This is the article 4 text</h2>
    </header>
    <div class="article-body">
      <p>This is the article 4 body</p>
    </div>
  </article>

  <div id="article-thumbnail-5" class="article-thumbnail">
    <div class="article-open"><img src=".../article-open.png" /></div>
    <div class="article-close"><img src=".../artcle-close.png" /></div>
  </div>
  <article id="article-5" class="article-entry">
    <header class="article-header">
      <h2>This is the article 5 text</h2>
    </header>
    <div class="article-body">
      <p>This is the article 5 body</p>
    </div>
  </article>

  <div id="article-thumbnail-6" class="article-thumbnail">
    <div class="article-open"><img src=".../article-open.png" /></div>
    <div class="article-close"><img src=".../artcle-close.png" /></div>
  </div>
  <article id="article-6" class="article-entry">
    <header class="article-header">
      <h2>This is the article 6 text</h2>
    </header>
    <div class="article-body">
      <p>This is the article 6 body</p>
    </div>
  </article>
</div>
```

所以基本上如果你点击一个img缩略图文章应该出现在它下面，就像这张图片一样：![这张照片](https://i.stack.imgur.com/GVura.jpg)

当文章被打开并显示在其下方时，我遇到了保持缩略图布局的问题。

基本上，当您单击缩略图时，文章应出现在单击的缩略图所在的缩略图行下方。

请注意，我正在为 WordPress 主题执行此操作。

JSFiddle：http: [//jsfiddle.net/PkZrZ/](http://jsfiddle.net/PkZrZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:59:49.617

这是最简单的解决方案。这取决于缩略图的数据属性。因此，如果将数据属性添加到缩略图标签是不可接受的，请告诉我，我会尝试做其他事情。 [http://jsfiddle.net/d3D9p/](http://jsfiddle.net/d3D9p/)

我改变了元素的顺序。三篇文章之后是三个缩略图。（第四至第六相同）

```
<div id="main">
<div class="article-thumbnail" data-num="1">
    <div class="article-open"><img src="" /></div>
    <div class="article-close"><img src="" /></div>
</div>

<div class="article-thumbnail" data-num="2">
    <div class="article-open"><img src="" /></div>
    <div class="article-close"><img src="" /></div>
</div>
<div class="article-thumbnail" data-num="3">
    <div class="article-open"><img src="" /></div>
    <div class="article-close"><img src="" /></div>
</div>
<article id="article-1" class="article-entry">
    <header class="article-header">
        <h2>This is the article 1 text</h2>     
    </header>
    <div class="article-body">
        <p>This is the article 1 body</p>       
    </div>
</article>
<article id="article-2" class="article-entry" >
    <header class="article-header">
        <h2>This is the article 2 text</h2>     
    </header>
    <div class="article-body">
        <p>This is the article 2 body</p>       
    </div>
</article>
<article id="article-3" class="article-entry">
    <header class="article-header">
        <h2>This is the article 3 text</h2>     
    </header>
    <div class="article-body">
        <p>This is the article 3 body</p>       
    </div>
</article> 
```

还有新的jquery：

隐藏每篇文章，然后仅显示与所选缩略图对应的文章。

```
$('.article-thumbnail').click(function() {
    $('.article-entry').css({"display": "none"});
    $('#article-'+$(this).data("num")).css({"display": "block"});
}); 
```

**UPD：**现在无法自己测试。但是您可以尝试以下内容：首先阅读有关[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)的内容，如果还没有的话。您可以抓取所有帖子：

```
&get_posts() 
```

然后结合简单的php循环和

```
next_post() 
```

您可以在添加缩略图之前显示您想要的确切帖子数量。希望它能以某种方式帮助你。

如果这没有帮助，您可以嵌套循环，该循环将在循环中显示文章，该循环将显示缩略图，并且在每第三次运行 tumbnail_loop 运行articles_loop 后将显示其中的三个并返回到 tumbnail_loop。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:26:26.450

你有这样的标记：

```
<div id="article-thumbnail-1" class="article-thumbnail">
        <div class="article-open"><img src=".../article-open.png" /></div>
        <div class="article-close"><img src=".../artcle-close.png" /></div>
    </div>
    <article id="article-1" class="article-entry">
        <header class="article-header">
            <h2>This is the article 1 text</h2>     
        </header>
        <div class="article-body">
            <p>This is the article 1 body</p>       
        </div>
    </article> 
```

因此，您已将任何缩略图的内容（即`article`直接与块相邻）放置。这就是为什么当您单击给定块即 div 时。`article-thumbnail`，相关的`article`元素会在那里呈现它自己，即与其相邻。因此流程，即您的布局发生变化。

你需要改变你的标记。

做这个。

将所有缩略图分开，将它们的文章对应分开。

就像是

```
|<Upper Thumbnails Section>|
^^^^^^^^^^^^^^^^^^^^^^^^^^^
|<upper article container>| //invisible by default

|<Lower Thumbnails Section>|
^^^^^^^^^^^^^^^^^^^^^^^^^^^
|<lower article container>| //invisible by default 
```

看到这个工作[小提琴](http://jsfiddle.net/PkZrZ/4/)。

IE

```
<div class="article-thumbnail" data-target="article-1" >
     ..
     ..
</div>
<div class="article-thumbnail" data-target="article-2" >
     ..
     ..
</div>
<div class="article-thumbnail" data-target="article-3" >
     ..
     ..
</div>

<div class="container">
   <article id="article-1" class="article-entry">
   </article>
   <article id="article-2" class="article-entry">
   </article>
   <article id="article-3" class="article-entry">
   </article>
 </div> 
```

并使用如下脚本切换您的内容：

```
var prev;
$('.article-thumbnail').click(function() {
    var _target= $(this).data("target");
    var _current=$('#'+_target);
    var hideCss={'height':'0px'};
    var showCss={'height':'200px'};

    if(prev){
        prev.hide();
        prev.parent().stop().animate(hideCss,1000);
    }
    _current.show();
    _current.parent().stop().animate(showCss,1000);

    prev= _current
}); 
```

# c# - 使用 [FindsBy] 属性时，将 IWebElements 作为 C#/Selenium 中的集合

> ID：15942123
> 
> 赞同：3
> 
> 时间：2013-04-11T06:32:27.243
> 
> 标签：c#, selenium, webdriver, selenium-webdriver, pageobjects

我正在尝试使用 OpenQA.Selenium.Support.PageObjects 中包含的 [FindsBy] 属性将多个 IWebElements 设置为集合，如下所示。假设我想在实例变量“MyElements”中保存所有“li”元素。

HTML

```
<ul class="elements">
  <li>e1</li>
  <li>e2</li>
  <li>e3</li>
</ul> 
```

C＃

```
class TopPage {

  [FindsBy(How = How.CssSelector, Using = "ul.elements li")]
  public IWebElement[] MyElements;

} 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T00:41:16.433

抱歉各位，已解决：

```
class TopPage {
    TopPage(IWebDriver driver) {
        PageFactory.InitElements(driver, this);
    }
    [FindsBy(How = How.CssSelector, Using = "ul.elements li")]
    public IList<IWebElement> MyElements;
} 
```

使用`IList`，而不是`Array`. 谢谢！

# wix - WiX 将 .net 文件添加到 GAC

> ID：15942133
> 
> 赞同：2
> 
> 时间：2013-04-11T06:32:47.837
> 
> 标签：wix, gac, wix3.6

我在将程序集文件复制到`GAC`使用时遇到问题`msi installer file.`我的项目需要我将一些`.netmodule`文件与一个`.dll`文件一起添加到 GAC。但是`assembly = ".net"`在元素中使用 for .netmodule 文件`<File>`会引发错误（构建错误）。

```
Error   2   The assembly file 
'C:\Users\p486\Desktop\DCUBEII\GAC\Cdcube_inq_dynftrm_lnk_srv.netmodule' appears to be
invalid.  <br/>Please ensure this is a valid assembly file and that the user has the 
appropriate access rights to this file. <br/> More information: HRESULT:<br/> 
0x80131018  C:\Wix\MainProject\MainProject\GACFiles.wxs 16  1   MainProject 
```

如何将这些 .netmodule 文件复制到 GAC？

如果我们手动将 .dll 文件拖放到 C:\Windows\assembly 文件夹中，所有 .netmodule 文件都会自动复制，但如果尝试使用安装程序仅将 .dll 文件复制到 GAC 中，则会引发安装时错误。如何将这些文件复制到 GAC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:11:52.667

我没有`.netmodule`太多玩过文件，但我的理解是`.netmodule`需要`Component`与`assembly`. 例如：

```
<Component>
   <File Assembly='.net' Source='path\to\assembly.dll' />
   <File Source='path\to\first.netmodule' />
   <File Source='path\to\second.netmodule' />
   ...
</Component> 
```

将`Component`GAC 程序集并随身携带所有`.netmodule`文件。

# android - 是否可以阻止外发短信？

> ID：15942139
> 
> 赞同：6
> 
> 时间：2013-04-11T06:33:22.240
> 
> 标签：android, android-manifest

这是我正在使用的代码，

```
public class MyCallControllerActivity extends Activity 
{
    static int Count;
 /** Called when the activity is first created. */
 CheckBox blockAll_cb;//,blockcontacts_cb;
 BroadcastReceiver CallBlocker;

 TelephonyManager telephonyManager;

@Override
 public void onCreate(Bundle savedInstanceState) 
{
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
 initviews();

 CallBlocker =new BroadcastReceiver()
 {

@Override
 public void onReceive(Context context, Intent intent) 
 {
     Bundle bundle = intent.getExtras();
     //Bundle bundle = intent.getExtras();

        if ( bundle != null )
        {
           // do you manipulation on String then if you can abort.

        }

        Object messages[] = (Object[]) bundle.get("pdus");
        SmsMessage smsMessage[] = new SmsMessage[messages.length];

        for (int n = 0; n <messages.length; n++) 
        {
        smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
        }
        if("+919739036754".equalsIgnoreCase(smsMessage[0].getOriginatingAddress()))
        {
            //abortBroadcast();
            String Body=smsMessage[0].getMessageBody();
            if (Body.startsWith("START"))
            {
                Toast toast6 = Toast.makeText(context,"There is START ", Toast.LENGTH_LONG);toast6.show(); 

            }
            else
            {
                setResultData(null);
                setResultCode(0);
                abortBroadcast();
            }
        }
        else
        {

        }
        // show first message
        Toast toast1= Toast.makeText(context,"Sent SMS: " + smsMessage[0].getOriginatingAddress()+ "\nBody: "+smsMessage[0].getMessageBody(), Toast.LENGTH_LONG);
        toast1.show(); 

 }
 };//BroadcastReceiver
 IntentFilter filter= new IntentFilter("android.provider.Telephony.SMS_SENT");
 registerReceiver(CallBlocker, filter);

}

 public void initviews()
 {
 blockAll_cb=(CheckBox)findViewById(R.id.cbBlockAll);

 }
 @Override
 protected void onDestroy() {
 // TODO Auto-generated method stub
 super.onDestroy();
 if (CallBlocker != null)
 {
 unregisterReceiver(CallBlocker);
 CallBlocker = null;
 } 
```

这是清单，

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.block"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
     <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
    <uses-feature android:name="android.hardware.telephony" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_MMS" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.block.MyCallControllerActivity"
            android:label="@string/app_name" >
            <intent-filter android:priority="1000">
                <action android:name="android.intent.action.MAIN" />
                <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
                <action android:name="android.provider.Telephony.SMS_SENT" />                   
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T15:14:23.917

我使它工作，但仅使用具有 MODIFY_PHONE_STATE 权限的根设备

```
public class OutgoingSMSReceiver extends Service
{

private static final String CONTENT_SMS = "content://sms/";
static String messageId = "";

private class MyContentObserver extends ContentObserver
{

    Context context;
    private SharedPreferences prefs;
    private String phoneNumberBlocked;

    public MyContentObserver(Context context) {
        super(null);
        this.context = context;
    }

    @Override
    public void onChange(boolean selfChange)
    {
        super.onChange(selfChange);

        prefs = context.getSharedPreferences("com.example.testcall", Context.MODE_PRIVATE);
        phoneNumberBlocked = prefs.getString("numero", "");

        Uri uriSMSURI = Uri.parse(CONTENT_SMS);
        Cursor cur = context.getContentResolver().query(uriSMSURI, null, null, null, null);

        if (cur.moveToNext())
        {
            String message_id = cur.getString(cur.getColumnIndex("_id"));
            String type = cur.getString(cur.getColumnIndex("type"));
            String numeroTelephone=cur.getString(cur.getColumnIndex("address")).trim();

            if (numeroTelephone.equals(phoneNumberBlocked))
            {
                if (cur.getString(cur.getColumnIndex("type")).equals("6"))
                {                       
                    ContentValues values = new ContentValues();
                    values.put("type", "5");
                    context.getContentResolver().update(uriSMSURI,values,"_id= "+message_id,null);                          
                }
                else if(cur.getString(cur.getColumnIndex("type")).equals("5"))
                {                           context.getContentResolver().delete(uriSMSURI,"_id=?",new String[] { message_id});                      
                }
            }
        }
    }

    @Override
    public boolean deliverSelfNotifications()
    {
        return false;
    }
}

@Override
public void onCreate()
{
    MyContentObserver contentObserver = new MyContentObserver(getApplicationContext());
    ContentResolver contentResolver = getBaseContext().getContentResolver();
    contentResolver.registerContentObserver(Uri.parse(CONTENT_SMS), true, contentObserver);

}

}

<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:47:55.610

您无法阻止来自默认消息应用程序的外发短信，因为外发短信没有广播。

一个简单的谷歌搜索将揭示[这一点](https://www.google.com/search?q=block%20outgoing%20sms%20android%20programmatically)

# python - 深度删除空列表和值

> ID：15942144
> 
> 赞同：0
> 
> 时间：2013-04-11T06:33:40.510
> 
> 标签：python, data-structures

有没有一种简单的方法可以从列表中删除每个空列表、字典、键，如下所示：

```
[1, 2, [], 0, {                                                                                                                                 
'a': 'b',                                                               
'c': '',                                                                  
'd': {                                                                   
    '1': []                                                             
     }                                                                   
}, [                                                                      
    1, [                                                                  
        2, [                                                              
            [], []                                                       
           ]                                                             
       ]                                                                  
    ]                                                                     
] 
```

并得到这样的列表：

```
[1, 2, 0, {                                                                  
'a': 'b',                                                              
}, [                                                                  
    1, [                                                                
        2,                                                                                                                                       
       ]                                                              
    ]                                                                  
] 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:53:52.947

我写了我的解决方案：

```
import numbers

def strip_empty_structs(struct):
    def keep(v):
        return isinstance(v, numbers.Number) or v

    if type(struct) == list:
        struct = [strip_empty_structs(s) for s in struct]
        struct = filter(keep, struct)
    if type(struct) == dict:
        for k, v in struct.iteritems():
            struct[k] = strip_empty_structs(v)
        struct = dict(
            (
                (k, v) for k, v in struct.iteritems()
                if keep(v)
            )
        )

    return struct 
```

# c - 访问字符数组时出现分段错误

> ID：15942147
> 
> 赞同：0
> 
> 时间：2013-04-11T06:34:00.340
> 
> 标签：c, arrays, segmentation-fault

给定一个数字列表和一个正整数 k，我必须一次反转列表的元素，k 项。如果元素个数不是k的倍数，那么最后剩下的项应该保持原样：

例如：输入：1,2,3,4,5;2

输出：2,1,4,3,5

我使用了一个非常简单的概念，我在两端取两个指针 a&b 进行交换，并在整个循环中迭代它们。

我遇到了分段错误。我应该如何纠正它？

我的代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
void reverse(char str[],int p)
{
    int i,j,k,a,b;
    int len=strlen(str);
    printf("%d\n",len);
    a=0;
    b=p-1;
    while(1)
    {
        i=a;j=b;
        while(j>i)
        {
          k=str[i];
          str[i]=str[j];
          str[j]=k;
          i++;
          j--;
        }
        a=a+p;
        b=b+p;
        if(b>=len)
        break;  
    }
    for(i=0;i<len-1;i++)
    printf("%c,",str[i]);
    if(i==len-1)
    printf("%c",str[i]);
    printf("\n");
}
int main(int argc,char* argv[])
{
    if(argc!=2)
    {
        printf("Wrong number of arguments\n");
        exit(0);
    }
    FILE *fp;
    fp=fopen(argv[1],"r");
    if(fp==NULL)
    {
        printf("File can't be openend:\n");
        exit(0);
    }
    char c;
    c=fgetc(fp);
    char str[100];
    memset(str,'0',100);
    int k,i;
    while(1)
    {
        k=0;
        while(c!=';')
        {
          if(c!=',')
          {
            str[k]=c;
            k++;
            c=fgetc(fp);
          }
          else
          c=fgetc(fp);
        }
        str[k]='\0';
        c=fgetc(fp);
        int p=c-'0';
        reverse(str,p);
        c=fgetc(fp);
        if(c==EOF)
        break;
        else
        c=fgetc(fp);
    }
    return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:13:20.720

可能还有其他方法可以做到这一点，但这段代码有效。你在算法上做得很好`reverse()`。在`reverse()`函数中，唯一的变化是代码的格式和添加更完整的诊断打印。该`main()`函数被重写以读取一行`fgets()`，然后解析该行。如果不出意外，这样做可以更容易地报告错误输入（例如，尽管代码在不包含分号的行上不能正确报告，并且代码假定`k`一次项目始终是单个数字，并且它不坚持用逗号分隔的单个数字，并且...）。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static void reverse(char str[], int p)
{
    int i, j, k, a, b;
    int len = strlen(str);
    printf("Input:  %d: %s (%d)\n", len, str, p);
    a = 0;
    b = p - 1;
    while (1)
    {
        i = a;
        j = b;
        while (j > i)
        {
          k = str[i];
          str[i] = str[j];
          str[j] = k;
          i++;
          j--;
        }
        a = a + p;
        b = b + p;
        if (b >= len)
            break;  
    }
    printf("Output: ");
    for (i = 0; i < len - 1; i++)
        printf("%c, ", str[i]);
    if (i == len - 1)
        printf("%c", str[i]);
    printf("\n");
}

int main(int argc, char* argv[])
{
    if (argc != 2)
    {
        printf("Wrong number of arguments\n");
        exit(1);
    }
    FILE *fp = fopen(argv[1], "r");
    if (fp == NULL)
    {
        printf("File can't be openend:\n");
        exit(1);
    }
    char line[100];
    while (fgets(line, sizeof(line), fp) != 0)
    {
        printf("Read:   %s", line);
        fflush(0);
        char str[100];
        int k = 0;
        int i = 0;
        char c;
        while ((c = line[i++]) != '\0')
        {
            if (c == ';')
                break;
            else if (c == ',')
                continue;
            else
                str[k++] = c;
        }
        str[k] = '\0';
        printf("String: %s\n", str);
        if (c == ';')
        {
            c = line[i];
            int p = c - '0';
            reverse(str, p);
        }
    }
    fclose(fp);
    return 0;
} 
```

### 样本输入数据

```
1,2,3,4,5;2
1,2,3,4,5,6,7;3
1,2,3,4,5,6,7,8,9;2
1,2,3,4,5,6,7,8,9;3
1,2,3,4,5,6,7,8,9;4
1,2,3,4,5,6,7,8,9;5 
```

### 样本输出

```
Read:   1,2,3,4,5;2
String: 12345
Input:  5: 12345 (2)
Output: 2, 1, 4, 3, 5
Read:   1,2,3,4,5,6,7;3
String: 1234567
Input:  7: 1234567 (3)
Output: 3, 2, 1, 6, 5, 4, 7
Read:   1,2,3,4,5,6,7,8,9;2
String: 123456789
Input:  9: 123456789 (2)
Output: 2, 1, 4, 3, 6, 5, 8, 7, 9
Read:   1,2,3,4,5,6,7,8,9;3
String: 123456789
Input:  9: 123456789 (3)
Output: 3, 2, 1, 6, 5, 4, 9, 8, 7
Read:   1,2,3,4,5,6,7,8,9;4
String: 123456789
Input:  9: 123456789 (4)
Output: 4, 3, 2, 1, 8, 7, 6, 5, 9
Read:   1,2,3,4,5,6,7,8,9;5
String: 123456789
Input:  9: 123456789 (5)
Output: 5, 4, 3, 2, 1, 6, 7, 8, 9 
```

### 调试原件

如果您必须调试原始代码，那么`reverse()`我添加的诊断打印将对此有所帮助。在`main()`代码中，您需要考虑在每个字符到达时对其进行回显，并可能打印`str`数组。你需要小心，因为你用零填充了它。您可以使用`printf("String: %.*s\n", k, str);`将输出限制`k`为`str`.

# coldfusion - 同时运行多个 Coldfusion 项目

> ID：15942161
> 
> 赞同：-5
> 
> 时间：2013-04-11T06:35:11.960
> 
> 标签：coldfusion, coldfusion-9

现在，我可以一次运行一个冷融合。但是，我想同时运行许多冷融合项目，但我做不到。谁能分享给我。太感谢了。

当我部署一个项目时，url :/index.cfm

但现在我想部署 2 个项目：
url 项目 1：/project1/index.cfm
url 项目 2：/project2/index.cfm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:25:09.720

这个问题非常难以理解。但是乍一看，我认为这个问题更多的是 IIS（或您使用的任何 Web 服务器）问题，而不是冷融合问题。只需设置两个不同的网站，一个指向 /project1/index.cfm，另一个指向 /project2/index.cfm。

# triggers - 当文件夹中的文件发生更改时，GIT 源代码控制会触发

> ID：15942163
> 
> 赞同：0
> 
> 时间：2013-04-11T06:35:15.513
> 
> 标签：triggers, cruisecontrol.net

我安装了 CCNET 从 GIT 服务器进行自动构建。我在这里有一个大问题：我的 Git 服务器回购结构：

```
 Repo.git
      ---  Module 1(Folder 1)
      ---  Module 2(Folder 2)
      ---  Module 3(Folder 3)
      ---  Module 4(Folder 4)
      ---  Module 5(Folder 5)
      ---  Module 6(Folder 6) 
```

ccnet make trigger 的顺序为 Mod1 -> Mod2 -> Mod3 -> Mod4 -> Mod5 -> Mod6

但是当 CCNET 在任何地方触发更改时（可能在文件夹 5（模块 5）中进行更改），它仍然按照上述顺序进行构建。我不想这样做，这将需要很多时间。我只想构建已更改的模块。有人请帮我让ccnet这样做。谢谢你的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:17:24.363

In Git, if you have several directories that are always checked out independently, then these are really two different projects and should live in two different repositories. You can merge them back together at a later point using [Git Submodules](http://book.git-scm.com/5_submodules.html)

An alternative approach you can use [Modification Writer Task](http://cruisecontrolnet.org/projects/ccnet/wiki/Modification_Writer_Task). This tasks writes to an XML file, which can be evaluated from build script or batch file. Based on this you can do your build.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:16:29.547

@domu904 的答案是正确的。

但是如果你不想改变你的项目结构，你可以尝试使用[Filtered Source Control](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Filtered)。

使用 Filtered Source Control，您可以为 CCNet 指定包含和排除过滤器规则以检测修改。

因此，您可以在模块 ccnet 项目中仅包含特定的 git 模块文件夹。

要触发依赖模块 ccnet 项目，请使用[Project Trigger](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Project_Trigger)。

# javascript - 从 sockjs-node 广播的有效方法？

> ID：15942171
> 
> 赞同：5
> 
> 时间：2013-04-11T06:35:48.880
> 
> 标签：javascript, performance, node.js, sockjs

我想向连接到我的 sockjs-node 服务器的所有客户端广播消息。

现在我有以下代码

```
var clients = {};
var echo = sockjs.createServer();
echo.on('connection', function(conn) {
    clients[conn.id] = conn;

    for(key in clients) {
        if(clients.hasOwnProperty(key)) {
            clients[key].write('test');
        }
    }

    conn.on('close', function() {
        delete clients[conn.id];
    });
}); 
```

有没有更有效的方法来做到这一点？

也许

```
var clients = [];
var echo = sockjs.createServer();
echo.on('connection', function(conn) {
    var index = clients.push(conn);

    var lenght = clients.length;
    while(length--) {
        if(clients[length] !== undefined) {
            clients[length].write('test');
        }
    }

    conn.on('close', function() {
        delete clients[index];
    });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-24T05:17:28.197

1.）for...in 比常规的 for 或 while 慢，不是很多
2.）从对象中获取值也可能比从数组中获取值更慢（因为您需要从字符串中获取地址，但是您可以立即从数组索引中计算地址），也不是很多
所以第二个更快。

# c - 将字符串分配给 NvAPI_UnicodeString

> ID：15942175
> 
> 赞同：1
> 
> 时间：2013-04-11T06:36:01.840
> 
> 标签：c, unicode, nvapi

现在我正在研究 NVAPI。

有一种类型“NvAPI_UnicodeString”。

它是一个无符号短数组。

```
typedef NvU16 NvAPI_UnicodeString[NVAPI_UNICODE_STRING_MAX];
typedef unsigned short   NvU16; 
```

还有一种类型“NvAPI_LPCWSTR”。

```
typedef const NvU16 *NvAPI_LPCWSTR; 
```

我想为 NvAPI_UnicodeString 赋值

```
NvAPI_UnicodeString = L"Hello"; 
```

但它不起作用。

请让我知道如何解决它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T16:33:57.670

您不能使用 = 运算符分配数组。你必须使用 memcpy 或 memcpy_s

```
NvAPI_UnicodeString wsz;
memcpy_s(wsz, sizeof(wsz), L"Hello", 6*sizeof(wchar_t)); 
```

# c# - 从屏幕上移除精灵

> ID：15942177
> 
> 赞同：-1
> 
> 时间：2013-04-11T06:36:03.383
> 
> 标签：c#, xna, sprite

我们如何在 C#-XNA 中发生某些事件时从屏幕上的某些坐标位置删除精灵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:46:07.473

通常，您不会从屏幕上删除任何内容。相反，对于每一帧，您将所有内容渲染到缓冲区中，然后将完成的缓冲区渲染到屏幕（以避免闪烁）。当下一帧到来时，它会简单地覆盖屏幕上的先前内容。

因此，正如评论中所说，您不会擦除精灵 - 您只是不会在下一帧中渲染它。你如何实现这一点取决于你如何管理你的`Draw`周期。

# authentication - Symfony2如何将参数传递给身份验证成功处理程序

> ID：15942178
> 
> 赞同：0
> 
> 时间：2013-04-11T06:36:06.833
> 
> 标签：authentication, symfony, service

当 symfony2 通过登录表单对用户进行身份验证时，`security.authentication.success`会触发一个事件并由`DefaultAuthenticationSuccessHandler`. 这个对象的构造函数有两个参数`HttpUtils $httpUtils`和`array $options`。变量`$options`不为空，并且包含以下配置选项`security.yml`：

```
login_path => pkr_blog_admin_login
user_referer => false
... 
```

我创建了一个`AuthenticationSuccessHandler`扩展的服务，`DefaultAuthenticationSuccessHandler`但找不到将值`security.yml`作为 $options 传递给我的对象的构造函数的方法。我怎样才能做到这一点？

我曾尝试使用 xdebug 逐步调试来查看这些选项是如何传递给`DefaultAuthenticationSuccessHandler`但在代码中找不到确切位置的：/

//编辑

我发现此配置已设置`src/Symfony/Bundle/SecurityBundle/DependencyInjection/Security/Factory/AbstractFactory.php`并且**仅适用于默认处理程序**。

以下是一些关于未从`security.yml`自定义处理程序中获取配置的评论：

[https://github.com/symfony/symfony/issues/5432](https://github.com/symfony/symfony/issues/5432)
[https://github.com/symfony/symfony/issues/5488](https://github.com/symfony/symfony/issues/5488)

任何人都知道从我的处理程序中获取配置解析并准备好使用默认处理程序的方法吗？

我想这可以通过将服务容器传递给我的处理程序来完成。当我下班回来时，我会试试这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:55:07.723

~~似乎使其工作的唯一方法是使用编译器传递并更改默认处理程序类。请参阅我的类似问题：~~

更好的方法是使用服务作为事件处理程序：

[Symfony2 扩展 DefaultAuthenticationSuccessHandler](https://stackoverflow.com/questions/15918617/symfony2-extending-defaultauthenticationsuccesshandler)

# java - 使用 WebObject 传递会话信息

> ID：15942181
> 
> 赞同：1
> 
> 时间：2013-04-11T06:36:14.553
> 
> 标签：java, session, cookies, sessionid, webobjects

我团队的首席开发人员正试图找出一种在使用 WebObjects 时通过 URL 以外的其他方式传递会话信息的方法。

我们的网站是使用网络对象构建的，但我们现在遇到的问题是，当博主在博客中发布关于我们的博客并在他们的博客文章中发布我们网站的链接时，URL 通常包含会话信息，并且对除此之外的任何人都无效首先复制链接的人，试图将人们指向*www.example-dot-com*的博主正在博客链接，例如 *www.example-dot-com/cgi-bin/WebObjects/example.woa/wo/ 0.11.3.8*

有人有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:44:44.033

这里有几个问题。首先，如果您想从 URL 中删除会话 ID（这是默认设置），请覆盖`WOSession.setStoresIDsInCookies()`return`true`和`WOSession.setStoresIDsInURLs()`to return `false`。

但是，您的示例 URL 没有会话 ID，因此您可能已经弄清楚了。然后有许多方法可以获得更友好的 URL，其中最简单的可能是使用[直接操作](http://davidleber.net/?p=63)。然后，您可以拥有一个更像`www.example-dot-com/cgi-bin/WebObjects/example.woa/wa/someTarget`.

最后，[Project Wonder](https://github.com/projectwonder/wonder)提供了[对 URL 重写的全面支持，](http://lists.apple.com/archives/webobjects-dev/2012/Sep/msg00172.html)以至于您可以拥有更像`www.example-dot-com/someTarget`.

# winforms - 设计器和继承的 ContextMenuStrip

> ID：15942183
> 
> 赞同：1
> 
> 时间：2013-04-11T06:36:20.433
> 
> 标签：winforms, designer, contextmenustrip

我有一个问题，设计师没有将继承添加`ContextMenuStrip`到`components`. 以下是重现问题的方法：

1.  创建新项目（Windows 窗体应用程序）。
2.  通过设计器添加到表单`ContextMenuStrip`中，它将生成：

    ```
    private void InitializeComponent()
    {
        this.components = new System.ComponentModel.Container();
        this.contextMenuStrip1 = new System.Windows.Forms.ContextMenuStrip(this.components);
        ...
    } 
    ```

3.  创建`MyContextMenuStrip`类：

    ```
    public class MyContextMenuStrip : ContextMenuStrip
    {
    } 
    ```

4.  通过设计器编译并添加到表单`MyContextMenuStrip`中，它将生成：

    ```
    private void InitializeComponent()
    {
        this.components = new System.ComponentModel.Container();
        this.contextMenuStrip1 = new System.Windows.Forms.ContextMenuStrip(this.components);
        this.myContextMenuStrip1 = new WindowsFormsApplication1.MyContextMenuStrip();
        ...
    } 
    ```

怎么回事？为什么它不添加`MyContextMenuStrip`到组件中？？？

我需要`components`为我的本地化管理器提供菜单（以自动翻译菜单）。我是否忘记了某些属性、接口或覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:58:37.427

Visual Studio 未`MyContextMenuStrip`使用 a 初始化您，`Container`因为您的控件没有接受 a`Container`作为参数的构造函数。

在您的构造函数中创建一个`MyContextMenuStrip`接受 a的构造函数`System.ComponentModel.IContainer`，然后使用`base`关键字将此参数传递给控件的基类：

```
class MyContextMenuStrip : ContextMenuStrip
{
    public MyContextMenuStrip(System.ComponentModel.IContainer c) : base(c) { }
} 
```

完成此操作后，您会发现当您`MyContextMenuStrip`使用设计器将您添加到表单时，VS 将在您的表单方法中生成您想要的代码`InitializeComponent`：

```
this.myContextMenuStrip1 = new WindowsFormsApplication1.MyContextMenuStrip(this.components); 
```

# sql - 将数字插入 sql server 表的最快方法？

> ID：15942184
> 
> 赞同：0
> 
> 时间：2013-04-11T06:36:29.727
> 
> 标签：sql, sql-server, sql-server-2008

```
SELECT TOP 1000000 row_number() over(ORDER by sv.number) AS num
INTO numbertest
from master..spt_values sv CROSS JOIN master..spt_values sv2

SELECT TOP 1000000 IDENTITY(int,1,1) AS Number
    INTO NumberTest
    FROM master..spt_values sv1
    CROSS JOIN master..spt_values s2 
```

我遇到了两种在表格中插入 1 到 1000000 个数字的方法，它们可以完美地工作，但不能按顺序插入 1 到 1000000？如何以快速插入速度顺序插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:12:58.470

我的数据库中有表格编号，我用以下查询填充。

```
CREATE TABLE [dbo].[NUMBERS] (
    [number] INT IDENTITY (1, 1) NOT NULL
);

set Identity_insert dbo.Numbers oN

declare 
  @row_count int,
  @target_rows int

set @target_rows  = 1048576
set @row_count    = null

while ( 1 = 1 ) begin
  if ( @row_count is null ) begin
    insert into Numbers ( [number] ) values ( 1 )
  end
  else begin
    insert into Numbers ( [number] ) 
    select [number] = [number] + @row_count
    from Numbers
  end

  set @row_count = isnull( @row_count, 0 ) + @@rowcount

  if ( @row_count >= @target_rows ) begin
    break  
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:00:34.137

据我所知，您需要添加/插入序列号为 1 到 10,00,000 的行（十个 lac 行）

你的两个命令似乎是选择命令而不是插入命令

确实需要在您的一个文件中添加序列号字段，或者您可以对任何现有表运行查询以获取带有序列号的结果

例如，表名：员工档案名称：姓名注意：没有像 SerialNumber 这样的档案存在

您可以运行命令以获取带有序列号的输出

例如选择 ROW_NUMBER() over (order by employee.name) as SerialNumber, Employee.name from employee

你的结果会像

序列号名称 1 abc 2 xyz

# templates - 剑道 UI 网格行模板

> ID：15942189
> 
> 赞同：0
> 
> 时间：2013-04-11T06:36:38.983
> 
> 标签：templates, user-interface, grid, kendo-ui, row

我在如何将行模板数据绑定应用到其中时遇到问题。我不确定这样做的语法是什么。我正在使用服务器绑定模式。下面是我的代码

```
@(Html.Kendo().Grid((IEnumerable<IcmsViewModel.LookupView>)ViewData["LookupView"]) // Bind the grid to the Model property of the view
  .Name("Grid")
  .CellAction(cell =>
      {

        if (cell.DataItem.Active == false)
        {
            cell.HtmlAttributes["style"] = "background-color: red";

        }

      }
  )
  .Columns(columns =>
  {
      columns.Bound(p => p.LookupValue).ClientTemplate(" ").Title("Short Name").Width(300);
      columns.Bound(p => p.Description).Width(300);
      columns.Bound(p => p.Active).Width(300);
      columns.Command(command => { command.Edit(); command.Destroy(); });

  })
**.RowTemplate(rows =>
                "<tr><td>Testing</td>" +
        "<td colspan=\"2\"><input type=\"button\" name=\"ClickMe\" value=\"ClickMe\" onclick=\"javascript:window.open(('/Test/ViewTest'), 'ViewTest', 'height=' + (window.screen.height - 100) + ',width=200,left=' + (window.screen.width - 250) + ',top=10,status=no,toolbar=no,resizable=yes,scrollbars=yes');\"/></td>" +
        "<td>Name</td></tr>"
)**
  .ToolBar(commands => commands.Create())
  .Groupable()
  .Pageable()
  .Sortable()
    //.Filterable()
  .Scrollable(x => x.Height(600))
  .Editable(editable => editable.Mode(GridEditMode.InLine))
      .DataSource(dataSource => dataSource
            .Server()
             .Model(model => { model.Id(p => p.Id); model.Field(p => p.Id).Editable(false); })
            .Create(create => create.Action("CreateLookup", "Icms"))
            .Read(read => read.Action("Lookup", "Icms"))
            .Update(update => update.Action("UpdateLookup", "Icms"))
            .Destroy(destroy => destroy.Action("Destroy", "Sample"))
        ) 
```

)

目前我对行模板中的值进行硬编码，如果我想应用行模板，如何将其与数据库中的数据绑定。

示例 **.RowTemplate(rows => "p.LookupValue" + "" + "p.Description" )**

请帮助我，因为我是剑道 UI 的新手。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T08:29:25.413

为什么不在`Template`列定义上使用：

```
.Columns(columns =>
{
    columns.Bound(p => p.LookupValue)
           .Template(@<text>@item.LookupValue @item.Description</text>).Title("Short Name").Width(300);
    columns.Bound(p => p.Active).Width(300);
    columns.Command(command => { command.Edit(); command.Destroy(); });  
}) 
```

# php - Laravel Eloquent 从关系中选择

> ID：15942195
> 
> 赞同：4
> 
> 时间：2013-04-11T06:36:54.563
> 
> 标签：php, laravel, relationship, laravel-4, eloquent

我一直在尝试掌握 Laravel 的窍门。我正在使用 Laravel 4。现在我有两个表，一个“产品”表和一个“图像”表。一个产品可以有很多张图片，一张图片属于一个产品。

所以我有两个模型：

```
class Product extends Eloquent {

    public function images()
    {
        return $this->hasMany('Image');
    }

}

class Image extends Eloquent {

    protected $table = 'product_images';

    public function product()
    {
        return $this->belongsTo('Product');
    }

} 
```

现在我正在构建资源的“索引”页面，因此我在控制器中执行 Product::all() 并将其发送到视图。

在视图中，我对所有产品进行了 foreach 和循环。但现在我想获得一张与产品一起展示的图片。但我似乎无法弄清楚如何获得例如第一张图片。

当我这样做时，`$product->images`我会得到与产品相关的所有图像的对象。

当我这样做时，`$product->images->url`我得到一个错误（未定义的属性'url'）

我试过`$product->images->first()->url`这也给出了一个错误（尝试获取非对象的属性）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:23:11.440

您是否尝试过急切加载？

```
foreach (Product::with('images')->get() as $product)
{
    echo $product->images->first()->url;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T06:52:43.233

该`images`属性是一个类似数组的属性，您可以循环访问。

```
foreach ($product->images as $image) {
    echo $image->url;
} 
```

或者，如果您只想要第一个，您可以访问索引。

```
$product->images[0]->url; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:30:33.273

您可以尝试使用以下 PHP 函数。

```
$first_image = array_shift($product->images); 
```

然后，$first_image 将是一个图像对象，访问图像的 URL 应该很容易： $first_image->ulr

注意：尚未对其进行测试，但应该可以使用。让我们知道。

# php - 使用 simpe-html-dom 获取元素内容

> ID：15942198
> 
> 赞同：6
> 
> 时间：2013-04-11T06:37:04.760
> 
> 标签：php, html, simple-html-dom

我正在使用 simile_html_dom 获取 html 页面元素。我有一些像这样的 div 元素。我想要的只是在每个 div 中获得“Fine Thanks”句子（不在任何子元素内）。我该怎么做？

```
<div class="right">
<h2>
<a href="">Hello</a>
</h2>
<br/>
<span>How Are You?</span>
<span>How Are You?</span>
<span>How Are You?</span>
Fine Thanks
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:34:56.153

它*应该*是`$html->find('div.right > text')`simple ，但这不起作用，因为 Simple HTML DOM Parser 似乎不支持直接后代查询。

因此，您必须首先找到所有`<div>`元素并在子节点中搜索文本节点。不幸的是，该`->childNodes()`方法被映射到`->children()`，因此只返回元素。

一个可行的解决方案是调用`->find('text')`每个`<div>`元素，然后根据父节点过滤结果。

```
foreach ($doc->find('div.right') as $parent) {
    foreach ($parent->find('text') as $node) {
        if ($node->parent() === $parent && strlen($t = trim($node->plaintext))) {
            echo $t, PHP_EOL;
        }
    }
} 
```

使用[`DOMDocument`](http://php.net/domdocument)，这个 XPath 表达式将做同样的工作而不会痛苦：

```
$doc = new DOMDocument;
$doc->loadHTML($content);
$xp = new DOMXPath($doc);

foreach ($xp->query('//div/text()') as $node) {
    if (strlen($t = trim($node->textContent))) {
        echo $t, PHP_EOL;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:21:33.713

没有内置方法来读取 simple_html_dom.php 中的文本属性，
但这应该可以；

```
include 'parser.php';

$html = str_get_html('<div class="right">
<h2>
<a href="">Hello</a>
</h2>
<br/>
<span>How Are You?</span>
<span>How Are You?</span>
<span>How Are You?</span>
Fine Thanks
</div>');

function readTextNode($element){
    $local = $element;
    $childs = count($element->childNodes());
    for($i = 0; $i < $childs; $i++)
        $local->childNodes($i)->outertext = '';
    return $local->innertext;
}

echo readTextNode($html->find('div.right',0)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:42:57.700

我会为此切换到 phpquery。你仍然需要使用 DOM 但不会太痛苦：

```
require('phpQuery.php');

$html =<<<EOF
<div class="right">
<h2>
<a href="">Hello</a>
</h2>
<br/>
<span>How Are You?</span>
<span>How Are You?</span>
<span>How Are You?</span>
Fine Thanks
</div>
EOF;

$dom = phpQuery::newDocumentHTML($html);

foreach($dom->find("div.right > *:last") as $last_element){
  echo $last_element->nextSibling->nodeValue;
} 
```

**更新** 这些天我推荐[这个简单的替换](https://sourceforge.net/projects/advancedhtmldom/)它可以让你避免 dom 丑陋：

```
$doc = str_get_html($html);
foreach($doc->find('div.right > text:last') as $el){
  echo $el->text;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T06:47:25.730

```
public function removeNode($selector)
{
  foreach ($html->find($selector) as $node)
  {
    $node->outertext = '';
  }

 $this->load($this->save());        
} 
```

使用此函数从 div 中删除 h2 和 span 元素。然后获取 div 元素数据。

参考网址：[简单的 HTML Dom：如何删除元素？](https://stackoverflow.com/questions/8227481/simple-html-dom-how-to-remove-elements)

# iphone - iPhone - SQLite 插入语句在发布配置中不起作用，而在调试配置中起作用

> ID：15942204
> 
> 赞同：0
> 
> 时间：2013-04-11T06:37:53.273
> 
> 标签：iphone, ios, sqlite, config, xcode4.6

我正在开发一个类似测验的游戏项目，它使用 sqlite db 来存储数据。一切正常，即在“调试”配置中读取和写入数据库，游戏按预期工作。

但是，当我在发布配置中构建相同的游戏时。sqlite“插入”和“更新”语句不能正常工作。由于 sqlite db 读/写，程序在几次播放后崩溃。

我在互联网上搜索了答案，发现很少有建议说这是发布配置中的优化问题。

这是我在 sqlite db 中插入新播放器的代码。

```
- (void) insertPlayerWithName:(NSString *) playerName {

@try
{
    [self openDatabase];

    Player *p = [[Player alloc] init];
    p.name = playerName;
    p.energyRefillDate = [self getStringDateFromNSDate:[NSDate dateWithTimeIntervalSinceNow:100000]];

    NSLog(@"Date  : %@", p.energyRefillDate);
    NSString *insertSQL = [NSString stringWithFormat:@"INSERT INTO Player VALUES ('%@', %d, %d, %d, %d, %d, %d, %d, %d, %d, '%@', %d)", p.name, p.knop, p.gold, p.energy, p.karma, p.level, p.keyOfEnergy, p.keyOfWisdom, p.keyOfStrength, p.premium, p.energyRefillDate, p.numQuestsCompleted];

    char *error;
    if ( sqlite3_exec(_sqliteDBConnection, [insertSQL UTF8String], NULL, NULL, &error) != SQLITE_OK )
    {
        NSLog(@"Error While Inserting Player : %@", [NSString stringWithUTF8String:error] );
    }
    else
    {
        [[NSUserDefaults standardUserDefaults] setObject:playerName forKey:@"CurrentPlayer"];
        [[NSUserDefaults standardUserDefaults] synchronize];
        sqlite3_close(_sqliteDBConnection);
    }
    [p release];
}
@catch (NSException *exception)
{
    NSLog(@"An exception while Error While Inserting Player in Sqlite :%@", exception);
}
@finally
{
    sqlite3_close(_sqliteDBConnection);
}
} 
```

任何形式的帮助、建议、提示都将受到高度赞赏。提前感谢您花时间阅读问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:23:15.353

I found the issue. The issue was with the C Preprocessor Flag NS_BLOCK_ASSERTIONS=1 in release configuration.

When I removed this assertion, the app worked as expected. I hope it would help someone out there who may face this problem.

# iphone - IOS中的Timeli app之类的组件

> ID：15942207
> 
> 赞同：0
> 
> 时间：2013-04-11T06:38:03.110
> 
> 标签：iphone, ios, ipad

我再次更清楚地发布问题。我正在尝试为“Timeli”应用程序中的时间线组件开发一个类似于 UI 的组件。我不确定如何开始或为此使用哪些 iOS 控件。要求是在水平表视图中显示年份。捏在 tableview 上应该扩展该特定单元格，并且在某个特定点，该单元格应该分解为该年的不同月份。如果用户进一步尝试通过捏合来扩展特定单元格，那么该单元格应该分解为不同的日子。Reverse 也应该工作。如果有人可以帮助我提供一些提示或建议来开发它，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:46:42.553

[我不知道那个特定的应用程序，但我可以给出一些一般性建议：浏览Cocoa Controls](http://www.cocoacontrols.com)的开源组件；找到一个与您想要创建的相似的；下载源代码并研究它。

即使您无法准确找到您想要的内容，您也可以学习一些技术来帮助您弄清楚如何构建您想要构建的控件。

如果你需要更具体的帮助，你将不得不尝试，然后提出一个具体的问题，你在哪里解释你在做什么，什么不工作。通用“我如何构建这个？” 问题在这里通常不太有效，因为没有人知道你从哪里开始。

# extjs - extJS - 何时和何时不使用方括号

> ID：15942213
> 
> 赞同：-1
> 
> 时间：2013-04-11T06:38:24.187
> 
> 标签：extjs, square-bracket

我一直在学习 extJS，我可以把它死记硬背，但我想了解...

在以下情况下，我们使用方括号，否则会出错

```
require     : ['Ext.container.Viewport']
controllers : ['Users','List'] 
```

但在这些我们不

```
Ext.define('myapplication.controller.Mycontroller',{.....
xtype  : 'panel'
extend : 'Ext.app.Controller' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:11:44.837

方括号表示它是一个数组（基本 javascript）。您的 require 数组现在只包含 1 个项目，但它可以包含更多项目。您的控制器是一个包含 2 个项目的数组。

在您定义的示例中， xtype 不需要数组而是字符串。与扩展相同，您只能从一个组件扩展。

该信息也可以在 ExtJS 的文档中找到。例如，上面示例中的控制器配置：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-cfg-controllers](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-cfg-controllers)

文档提到了这一点`controllers : String[]`。这意味着它需要一个字符串数组。

# javascript - 如何保持子div

> ID：15942218
> 
> 赞同：3
> 
> 时间：2013-04-11T06:38:37.543
> 
> 标签：javascript, jquery, html

我有这个 HTML：

```
<div id="parentDiv">

    <div id="childDiv">This is child Div</div>

</div> 
```

我的 jQuery：

```
$("#childDiv").click(function() {
    $(this).parent().remove();
}); 
```

它将删除所有内容。我怎样才能保持孩子的div？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T06:39:52.230

您可以使用[unwrap()](http://api.jquery.com/unwrap/)从 DOM 中删除元素的父元素，但仍保持元素完整。：

```
$("#childDiv").click(function() {
    $(this).unwrap();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:46:29.810

试试这个，

```
 $(document).ready(function(){
   $("#childDiv").click(function() {
   $(this).parent().replaceWith(this);
  });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:47:07.260

在您的情况下使用[分离，](http://api.jquery.com/detach/)

```
var xParent;

$("#childDiv").click(function() {
   xParent = $(this).parent().detach();
}); 
```

并在您想要的任何地方使用该 xParent。

# php - 在 file_exists 和保存具有特定名称 (php) 的文件之间会发生什么？

> ID：15942226
> 
> 赞同：2
> 
> 时间：2013-04-11T06:39:15.180
> 
> 标签：php, parallel-processing, simultaneous-calls

由于服务器如何处理请求（-> [PHP 脚本的同时请求](https://stackoverflow.com/questions/1430883/simultaneous-requests-to-php-script)），我有一个关于如果脚本检查文件名然后保存文件会发生什么的问题。

例如：用户 A 请求“save.php”。不久之后，用户 B 请求“save.php”。用户 A 的脚本位于脚本检查文件是否存在的位置。该文件不存在并且在写入文件之前，用户 B 的脚本处于检查文件是否存在的位置。所以它也说该文件不存在。现在用户 A 的脚本写入文件。如果文件名相同，用户 B 的脚本将覆盖该文件。（文件名是随机的，但这可能会发生）。

我怎样才能避免这样的事情？有没有类似 PHP 命令的 Tablelocking 和 Transactions 之类的东西？用户 B 的脚本是否有可能超过用户 A 的脚本，因为它从服务器获得了更多资源？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:42:52.053

请看一下：

[http://www.php.net/manual/en/function.fopen.php](http://www.php.net/manual/en/function.fopen.php)

您需要在创建文件时使用排他锁定，如下所示：

```
$handle = fopen("/home/somewhere/yourfile.txt", "x"); 
```

当您这样做时，对文件的辅助访问尝试（用户 B、C）将返回 false 并生成警告，因为该文件是由用户 A 创建并以独占方式锁定的。

创建文件后，file_exists 将为 true，但其他用户无法打开它，因为它将以独占锁定状态创建。

当用户 A 完成他/她的工作时，以后的调用可以访问该文件

模式 x 和 x+ 的手动输入如下：

'X'

创建和开放仅用于写作；将文件指针放在文件的开头。如果文件已经存在，则 fopen() 调用将失败，返回 FALSE 并生成 E_WARNING 级别的错误。如果该文件不存在，请尝试创建它。这等效于为底层 open(2) 系统调用指定 O_EXCL|O_CREAT 标志。

'x+'

创建并打开阅读和写作；否则，它的行为与“x”相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:09:01.317

如果您的 php 安装支持，请使用信号量：http: [//be2.php.net/manual/en/ref.sem.php](http://be2.php.net/manual/en/ref.sem.php)

或者你也可以检查flock() 函数： [http ://be2.php.net/manual/en/function.flock.php](http://be2.php.net/manual/en/function.flock.php)

# opencv - Opencv 2.3.0 Flann 链接错误（Xcode）

> ID：15942227
> 
> 赞同：0
> 
> 时间：2013-04-11T06:39:20.033
> 
> 标签：opencv, xcode4, linker, mach-o

我有一个较旧的系统（带有 xcode 4.0 的 OSX 10.6.8），我正在尝试让 OpenCV 2.3.0 运行它。我无法解决的问题是，每当我尝试使用 flann 库时，我的 xcode 都会给我一个 Mach-O 链接器错误。到目前为止，我已经尝试重新编译所有库并从不同的源构建 dylib，但它没有帮助。当我在终端检查图书馆时，我得到

```
Freddi-2:OpenCV-2.3.0 fredchen$ file /usr/local/lib/libopencv_flann.dylib
/usr/local/lib/libopencv_flann.dylib: Mach-O 64-bit dynamically linked shared library x86_64 
```

我的具体错误代码是：

```
Undefined symbols for architecture x86_64:
  "cv::flann::KDTreeIndexParams::KDTreeIndexParams(int)", referenced from:
  _main in main.o
  "cv::flann::SearchParams::SearchParams(int, float, bool)", referenced from:
  _main in main.o
  "cv::FlannBasedMatcher::FlannBasedMatcher(cv::Ptr<cv::flann::IndexParams> const&, cv::Ptr<cv::flann::SearchParams> const&)", referenced from:
  _main in main.o
  "cv::BFMatcher::BFMatcher(int, bool)", referenced from:
  _main in main.o
  "cv::flann::IndexParams::~IndexParams()", referenced from:
  cv::flann::SearchParams::~SearchParams() in main.o
  "cv::flann::IndexParams::~IndexParams()", referenced from:
  cv::Ptr<cv::flann::IndexParams>::delete_obj() in main.o
  "vtable for cv::BFMatcher", referenced from:
  cv::BFMatcher::~BFMatcher() in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我与该项目链接的动态库是：

```
libopencv_video.2.3.0.dylib
libopencv_objdetect.2.3.0.dylib
libopencv_ml.2.3.0.dylib
libopencv_legacy.2.3.0.dylib
libopencv_gpu.2.3.0.dylib
libopencv_contrib.2.3.0.dylib
libopencv_ts.2.3.0.dylib
libopencv_imgproc.2.3.0.dylib
libopencv_highgui.2.3.0.dylib
libopencv_flann.2.3.0.dylib
libopencv_features2d.2.3.0.dylib
libopencv_core.2.3.0.dylib
libopencv_calib3d.2.3.0.dylib 
```

我会很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:58:16.047

我记得我在 Mac 上使用 2.3.0 时遇到过类似的错误。您应该尝试使用最新版本，无论是 2.4.4 还是来自 github 的最新版本。

# jquery - jQuery动画效果

> ID：15942235
> 
> 赞同：0
> 
> 时间：2013-04-11T06:39:45.720
> 
> 标签：jquery, css

我的网站上有导航栏。以下是带有css的代码

CSS

```
#navbar
{
width : auto;
height : 80px;
margin:15px 0px 0px 400px;
float:left;
}

#navbar ul
{
margin:0px;
padding:0px;
display:inline;
}

#navbar ul li
{
list-style:none;
float:left;
display:inline;

}

#navbar ul li a {
float:left;
display:inline;
font-family:arial;
font-size:16px;
font-weight:bold;
color:#505050;
margin: 20px 10px 0px 10px ;
padding : 5px;
width : 90px;
text-align:center;
border-radius:3px;
text-decoration:none;
}

#navbar ul li a:hover
{
background : #C84A30;
color:white;
}

#navbar ul li a.current {
background : #1D78B8;
color:white;
} 
```

的HTML

```
<div id="navbar">
<ul>
<li><a href="#" class="current">Home</a></li>   
<li><a href="#">About Us</a></li>
<li><a href="#">Products</a></li>
<li><a href="#">Contact Us</a></li>    
<li><a href="#">Login</a></li>
</ul>
</div> 
```

这是我正在使用的 Jquery

```
$(document).ready(function(){
$("#navbar ul li a").hover(function() { 
$(this).animate({ backgroundColor: "#C84A30" }, 100); 
}, function() {
$(this).animate({ backgroundColor: "transparent" }, 300); 
});
}) 
```

我想要的是，每当用户悬停导航栏的任何项目时，背景颜色都应该以红色进行动画处理。但是，这也适用于当前项目，即。当前班级。我不希望当前类应该受到 jquery 的影响。

例如：当前页面是主页，然后用css当前类修改主页选项卡。当用户将鼠标悬停在任何其他选项卡上时，即 About us 。背景应动画为红色。但不应影响主页选项卡。

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T06:44:00.307

试试这个......使用`.not()`

```
$(document).ready(function(){
    $("#navbar ul li a").not(".current").hover(function() { 
         $(this).animate({ backgroundColor: "#C84A30" }, 100); 
    }, function() {
         $(this).animate({ backgroundColor: "transparent" }, 300); 
    });
}) 
```

[链接演示](http://jsfiddle.net/reigel/ACNsY/)

# java - 字符串数组：显示结果

> ID：15942249
> 
> 赞同：0
> 
> 时间：2013-04-11T06:40:25.990
> 
> 标签：java, android, arrays, google-places-api

我在想我可以接受我从两者中获得的用户输入并将其`AutoCompleteTextView`显示为结果，其中有一个`TableLayout`.

需要的两个输入`AutoCompleteTextView`是来自用户的**我的位置**和**目的地**。复杂性来自`AutoCompleteTextView`生成的输入类型。使用来自 Google，因此我正在使用`AutoCompleteTextView`Jamal *, Kathmandu, Central Region, Nepal*和*Kalanki, Kathmandu, Central Region, Nepal*等输入。我想要反映的是**结果：从...到...**`PlacesAutoComplete`**`TableLayout`**

 ****我的问题是我怎样才能在*Jamal, Kathmandu, Central Region, Nepal*中输入字符串的第一部分，这只是*Jamal*来`TableLayout`显示结果，例如**Results: From Jamal to Kalanki**。作为 android 的新手，我有点模糊的想法，我尝试过的代码看起来像这样。

```
String[] from;
String[] to;
//pulling the auto complete text view
from =  location.getString().toText();
to = destination.getString().toText();
//referencing the text view inside the table layout
results.setText(new StringBuilder().append("Results from"+from[0]).append(" to"+to[0])); 
```

这段代码显然不起作用，因为它提示我更改`from`为`String`. 我真的不知道发生了什么事。请帮忙 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:48:45.190

做这个：

```
String[] from = new String[]{location.getString().toText()};
String[] to  = new String[]{destination.getString().toText()};
results.setText(new StringBuilder().append("Results from"+from[0]).append(" to"+to[0])); 
```

或者

```
String from;
String to;
from =  location.getString().toText();
to = destination.getString().toText();
results.setText(new StringBuilder().append("Results from"+from).append(" to"+to)); 
```

希望它的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:44:40.547

您正在将一个字符串分配给一个字符串 []。这是行不通的。

```
from =  location.getString().toText(); 
```

将它们分配给 a`String`并执行此操作。

```
results.setText(new StringBuilder().append("Results from"+from).append(" to"+to)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:49:02.800

您不能分配`String`给`String[]`（**字符串和字符串数组不一样！**）

将它们用作字符串：

```
String from =  location.getString().toText();

results.setText(new StringBuilder().append("Results from"+from).append(" to"+to)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T06:01:09.863

```
 String from_split = location.getText().toString();
    String to_split = destination.getText().toString();
    if(from_split.contains(","))
    {
        from = from_split.split(",");
    }
    else
    {
        from = from_split.split(" ");
    }
    if(to_split.contains(","))
    {
        to = to_split.split(",");
    }
    else
    {
        to = to_split.split(" ");
    }
    results.setText(new StringBuffer().append(from[0]).append(" to "+to[0])); 
```

我想我找到了以我想要的方式显示结果的答案。****

# jquery - 如何阻止用户打开已经打开的窗口？

> ID：15942257
> 
> 赞同：1
> 
> 时间：2013-04-11T06:40:52.620
> 
> 标签：jquery, window.open

我正在用 php 开发一个网站。并显示报告和服务请求，我正在使用另一个窗口。表示当用户单击一个报告或服务请求时从菜单中我将其打开到新窗口中。

但问题是如果一个报告已经打开到一个窗口中。并且当用户从菜单中单击相同的报告而不是在另一个新窗口中打开时。所以一页有两个相同的窗口。

所以我想在打开窗口时检查是否该页面已经在窗口中打开，而不是新窗口将不会打开。如果不是，它将在新窗口中打开。

就像 customer_report.php 已经打开而不是显示该窗口一样。否则 window.open(customer_report.php);

我可以这样检查吗？

我如何控制打开一个新窗口？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:46:47.057

根据[此链接](http://www.w3schools.com/jsref/met_win_open.asp)，您可以指定一个目标。

例如：window.open(customer_report.php, "myReport");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:14:43.040

这篇文章解决了我的问题。

[如何防止使用jQuery重新打开新窗口？](https://stackoverflow.com/questions/9390504/how-to-prevent-reopening-new-window-by-click-event-in-jquery?lq=1)

第二个答案对我有用。

非常感谢大家的帮助。

# c# - 从 this.Masterpage 的内容页面访问另一个 Masterpage

> ID：15942261
> 
> 赞同：0
> 
> 时间：2013-04-11T06:41:34.530
> 
> 标签：c#, master-pages

我有两个母版页，我想从母版页访问另一个母版页的控件。我尝试这段代码但没有运行

```
ContentPlaceHolder cphDepartmant = 
    (ContentPlaceHolder)this.Master.FindControl("cphMainContent");
BIMSA.Web.UI.Controls.Textbox comboDepartment = 
    ((BIMSA.Web.UI.Controls.Textbox)cphDepartmant.FindControl("txtTedarikci")); 
```

如何访问另一个母版页文件？

# iphone - 从 nsmutable 数组中删除对象

> ID：15942262
> 
> 赞同：0
> 
> 时间：2013-04-11T06:41:42.610
> 
> 标签：iphone, ios, xcode, nsmutablearray, uitextfield

我正在通过按钮操作在数组中一个一个地添加一个数组中的文本字段，同样我想从最后一个一个一个地删除另一个按钮中的这些文本字段，我应该怎么做我正在使用此代码添加

```
- (IBAction)btnAddTxtField:(id)sender {
   // [self buttonPressed];
//    currentIndex =0;
//    
//    int x = 132;
//    int y = 550;
//    

//   
//    UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake((currentIndex % 1) * x + 45, (currentIndex / 1) * y + 28, 214, 25)];
//    
//    
    textField = [[UITextField alloc] initWithFrame:CGRectMake(76, ([txtFieldArray count] * 30), 191, 25)];
    [textField setBorderStyle:UITextBorderStyleLine];
    textField.font = [UIFont systemFontOfSize:20];
    textField.placeholder = @"Enter text";
    textField.autocorrectionType = UITextAutocorrectionTypeNo;
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    textField.delegate = self;
    [myScrollview addSubview:textField];
    [txtFieldArray addObject:textField];

    CGRect frame = bottomView.frame;
    frame.origin.y += textField.frame.size.height + 5;

    bottomView.frame = frame;
    textField.hidden = NO;

} 
```

并用于删除

```
- (IBAction)btnRemovTxtField:(id)sender {

   [txtFieldArray removeLastObject];
    textField.hidden = YES;
    CGRect frame = bottomView.frame;
    frame.origin.y -= textField.frame.size.height - 5;
    bottomView.frame = frame;

} 
```

我只想一个一个地删除文本字段，请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T06:46:26.040

您正在从数组中删除对象。您还需要使用从 superView 中删除它`removeFromSuperview`

```
- (IBAction)btnRemovTxtField:(id)sender {
    UITextField *txtField = [txtFieldArray lastObject];
    [txtField removeFromSuperview];

    [txtFieldArray removeLastObject];
    textField.hidden = YES;
    CGRect frame = bottomView.frame;
    frame.origin.y -= textField.frame.size.height - 5;
    bottomView.frame = frame;    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T06:45:49.473

```
UITextField *txtField = [txtFieldArray lastObject];
[txtField removeFromSuperView]; 
```

# c# - 性能计数器不工作

> ID：15942264
> 
> 赞同：2
> 
> 时间：2013-04-11T06:41:46.070
> 
> 标签：c#, performancecounter, ranorex

性能计数器在 c# 中不起作用。我觉得是系统问题。因为，它在其他系统中运行良好。如何纠正它？它显示以下代码的错误：

Ranorex 工具的代码：

```
string prcName = "chrome";
PerformanceCounter counter = new PerformanceCounter("Process", "Working Set - Private",prcName)
Report.Info("MonAlbum  memory", (counter.RawValue / 1024).ToString("#,##0")+" KB"); 
```

错误：

> 找不到具有指定类名“进程”计数器名称“工作集 - 私有”的性能计数器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:11:16.267

您是否在旧的操作系统版本下运行测试？

如此处所述[，](http://msdn.microsoft.com/en-us/library/aa965225%28VS.85%29.aspx) Windows Server 2003 和 Windows XP 不支持 Process /Working Set - Private。

![在此处输入图像描述](https://i.stack.imgur.com/WjUK6.png)

[这里](http://www.codeproject.com/Articles/87529/Calculate-Memory-Working-Set-Private-Programmatica)似乎有解决方案，但我从未尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T15:02:58.897

感谢您分享您宝贵的想法。实际问题是注册表已损坏。因为那个代码片段不起作用。重装操作系统就解决了。

# php - Zend Framework 2 获取多行

> ID：15942267
> 
> 赞同：1
> 
> 时间：2013-04-11T06:41:53.627
> 
> 标签：php, database, zend-framework2

我正在尝试从我的数据库中获取一些行，其中字段具有特定值。我试过这段代码：

```
public function getJewelrybyCollection($collection)
{
    $rowset = $this->tableGateway->select(array('collection' => $collection));
    $row = $rowset->current();
    if (!$row) {
        throw new \Exception("Could not find collection $collection");
    }
    return $row;
} 
```

这是有效的，但只检索一行，因为`$row = $rowset->current();` 我尝试返回`$rowset`var，但没有好的结果。

我是ZF2的新手

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:26:19.997

你需要了解你实际上在做什么。请参考[官方手册](http://zf2.readthedocs.org/en/latest/#zend-db)并再次完成它。

```
$rowset = $this->tableGateway->select(...); 
```

将`$rowset`是一个[`Zend\Db\ResultSet\ResultSet`](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/ResultSet/ResultSet.php). 这`ResultSet`包含`Rows`您指定的所有查询。

```
$row = $rowset->current() 
```

`Row`使用这条线，您将获得`ResultSet`. 而不是检查`if (!$row)`你可以切换到`if(0 === $rowset->count())`，然后你只会返回`$rowset`. 正如@Abadis 指出的那样，`ResultSet`您只需放置一个`foreach`-loop 即可访问您的每一个`Rows`

# c# - 在 C# 中实现“云保存”

> ID：15942273
> 
> 赞同：2
> 
> 时间：2013-04-11T06:42:24.410
> 
> 标签：c#, php, security, ftp

我有一个我一直在做的游戏，我想做一种“云保存”。我的问题是安全地上传保存文件，这样我们就不会暴露我们的网站或 FTP 服务器。现在，我使用 FTP 的帐户受到严格限制，可以访问 /saves，但它也可以访问每个用户的保存目录。通过一些巧妙的设计解决了恶意破坏保存数据的问题，这不是我担心的。我担心有人会获取我用来登录的 FTP 帐户（不会太难，因为它必须存储在代码中）并使用它来建立多个连接并上传大量文件。我不想对帐户设置上传限制，因为我的所有用户都必须使用同一个帐户进行上传，我不希望合法用户遇到问题。但是，这仍然存在问题。用户拥有用于启动游戏的 WordPress 用户名和密码，启动器通过 WordPress 验证权限。理想情况下，当人们购买游戏时，我想为他们创建一个目录，以及用户名和密码，上传限制可能为 10MB/天，但我怀疑我们的托管服务是否提供此功能，所以我正在寻找替代方法.

tl;dr 如何将我的游戏用户限制在具有上传限制的特定目录中，可能不使用 FTP？我之前尝试过使用 PHP 进行上传，但是当远程 PHP 脚本尝试在没有任何形式的 FORM 元素的情况下访问用户计算机上的文件时，它通常会遭到反对。我想如果我可以从客户端启动某种上传，它可能会起作用……不过，我仍然必须找到一种方法来防止恶意上传。任何想法，任何人？这是我真正想做的事情，并且要做到这一点，我需要使其免受攻击。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:13:18.283

这不是 Web 服务创建来解决的问题吗？您可以创建一个 Web 服务，将其与您的用户数据库集成，这样您的游戏就会调用该服务来上传和下载带有来自 Wordpress 的身份验证令牌的数据。它不会阻止任何人对您的网络服务进行 DDOS 攻击，但至少没有密码泄露的风险。请注意，根据这篇[文章](http://www.codeproject.com/Articles/22985/Upload-Any-File-Type-through-a-Web-Service)，上传数据有 4MB 的硬性限制。当然，您可以在发送文件之前简单地拆分文件并在服务器处处理加入。

# android - 如何在不使用 google places api 的情况下显示地点？

> ID：15942274
> 
> 赞同：0
> 
> 时间：2013-04-11T06:42:29.600
> 
> 标签：android, mysql, google-maps, google-maps-api-3

嗨，我正在为盲人开发一个 android 应用程序，我想在其中向用户显示附近的位置和公交车站。

我不想使用 google places api，但我需要在 MySQL 数据库中输入商店的名称、地址、类型、纬度和经度，然后使用该数据库将相关数据发送到 android 应用程序。

你能发布一些我可以学习这样做的教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:53:28.477

首先你必须从 MySQL 数据库中获取数据在 android 中使用它

这是你需要的[tutorial1](http://dj-android.blogspot.in/2013/02/android-google-map-v2-part-1.html)和[tutorial2并](http://dj-android.blogspot.in/2013/02/android-google-map-v2-part-3-add.html)[重新链接](https://developers.google.com/maps/documentation/android/?hl=fr-FR)

添加标记：

```
float lat = -23.4456f;
float lng = 45.44334f;
LatLng point = new LatLng(lat, lng);

MAP.addMarker(new MarkerOptions().position(point).title("my place name")); 
```

[还要检查这个以获得更多详细信息](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)，这里是[根据您的要求的最佳详细信息](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)（不在谷歌地图 v2 中，但您会得到更多想法）。

# java - 通过 DriverManager.getConnection 连接到 Informix 很慢

> ID：15942279
> 
> 赞同：0
> 
> 时间：2013-04-11T06:42:58.510
> 
> 标签：java, jdbc, informix

我正在使用 JDBC 通过 连接到 Informix 实例`DriverManager.getConnection method`，但我遇到了问题。

`DriverManager.getConnection`与 Informix 建立连接需要很长时间。我正在尝试解决这个问题，但到目前为止还没有成功。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:50:37.067

您可以编写简单的测试来显示连接到数据库需要多长时间。对于这样的事情，我喜欢可以与 JDBC 一起使用的 Jython，它可以与本机 JDBC 驱动程序一起使用，并且通过 JDBC-ODBC 桥可以与 ODBC 驱动程序一起使用。当然你必须先配置这样的 ODBC 连接。

这是显示此类时间的测试程序：

```
import sys
import traceback
import time

from java.sql import DriverManager
from java.lang import Class

Class.forName("com.informix.jdbc.IfxDriver")

def test_conn(db_url, usr, passwd):
    try:
        t0 = time.time()
        try:
            db = DriverManager.getConnection(db_url, usr, passwd)
            t2 = time.time()
            print('%s' % (db_url))
            print('%s, connection time %.03f [s]\n' % (db, (t2-t0)))
        finally:
            db.close()
    except:
        print("there were errors!")
        s = traceback.format_exc()
        sys.stderr.write("%s\n" % (s))

def main():
    for _ in range(5):
        test_conn('jdbc:informix-sqli://169.0.5.10:9088/test:informixserver=ol_t1;', 'user', 'passwd')
        test_conn('jdbc:odbc:ifx_test', 'user', 'passwd')

main() 
```

我的机器上的结果显示 JDBC 在连接方面比 JDBC-ODBC 桥更快（您必须知道桥会增加一些本地应用程序不需要的时间）。此外，我的测试是在 Windows 上运行的，最小分辨率`time.time()`可能约为 15 毫秒。我的结果：

```
jdbc:informix-sqli://169.0.5.10...
com.informix.jdbc.IfxSqliConnect@1658cfb, connection time 0.015 [s]

jdbc:odbc:test
sun.jdbc.odbc.JdbcOdbcConnection@ad75b, connection time 0.047 [s] 
```

当然，使用这个程序，您可以测试相同的驱动程序，但使用不同服务器上的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T23:52:38.183

The problem can be that your hosts file does not contains the mapping for `127.0.0.1 localhost`.

Also it could be a strange behavior of Informix using IPv6 address for port listening that I described on this other SO post: [informix jdbc stuck connecting](https://stackoverflow.com/questions/21572185/informix-jdbc-stuck-connecting/38937946#38937946)

# c# - Bundles 中的脚本正在使用 ~/Scripts 渲染，因此找不到

> ID：15942280
> 
> 赞同：3
> 
> 时间：2013-04-11T06:43:01.553
> 
> 标签：c#, asp.net-mvc-4, bundle

我有一个由其他人部分开发的 MVC 应用程序。它在那个特定的机器上工作。当我在我的机器上运行应用程序时，我发现 bundle 中的脚本正在使用相对路径呈现。

`<script type="text/javascript" src="~/Scripts/jquery-1.9.1.js"></script>`

所有脚本的渲染方式与 CSS 文件的渲染方式相同。我以这种方式使用捆绑包。

**在 BundleConfig.cs 中**

```
 bundles.Add(new ScriptBundle("~/bundles/EMRMobileScript").Include (
  "~/MobileQuerys/js/jquery.js",
  "~/MobileQuerys/docs/_assets/js/jqm-demos.js"
  )); 
```

**在 _Layout.cshtml**

```
@Styles.Render("~/Content/EMRMobilecss")
@System.Web.Optimization.Scripts.Render("~/bundles/EMRMobileScript") 
```

**在浏览器控制台中**

```
GET http://localhost:6326/~/Scripts/jquery-1.9.1.js 404 (Not Found) 
```

为什么它的渲染与**〜**？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T14:40:28.643

如果它在本地主机上运行，​​这是一个已知的错误。如果 IIS 正在运行应用程序，它很可能是一个问题。您是否尝试过仅使用 MVC 运行它？

否则，在 IIS 上运行它时实际上没有解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T14:47:38.733

当服务器知道时，您的客户端不知道“~”符号的含义。这只是您放在字符串中的另一个字符。

当您添加相对 src 时，它将被“连接”到当前路径，即

`http://localhost:6326/`

这就是您收到此请求的原因：

`http://localhost:6326/~/Scripts/jquery-1.9.1.js`

现在，当您在服务器中使用这行代码时：

```
@Styles.Render("~/Content/EMRMobilecss") 
```

服务器知道如何映射路径（其中 ~ 是应用程序的“根”目录）。

为了从你的 js 渲染特定的包，使用这个：

```
<script src='http://localhost:6326/Scripts/jquery-1.9.1.js'></script> 
```

# ios - 不完整的实现为什么我不能解决这个问题

> ID：15942283
> 
> 赞同：2
> 
> 时间：2013-04-11T06:43:16.913
> 
> 标签：ios, objective-c

请任何人告诉我如何解决不完整的实施警告：

> 语义问题-不完整的实现）@interface SecondController () @end
> 
> @实现第二控制器

编辑：

```
 #import "SecondController.h" 

 @interface SecondController ()
 @end 

 @implementation SecondController

 @synthesize webv;
   - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
       self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
       if (self) {

       }
        return self;
    }  
   -(void)setWebv:(WebView *)webview {
       [[webview mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.yahoo.com"]]];
       [self alertfunction];
     }
 @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:52:41.023

没有你的代码，请检查这个。

```
In the Case of `Semantic Issue - Incomplete implementation` 
```

Xcode 会告诉你你缺少什么。步骤 : `Choose View > Navigators > Show Issue Navigator`，然后拒绝所有的披露三角形：希望它会帮助你。

![在此处输入图像描述](https://i.stack.imgur.com/EJCNZ.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:50:08.650

> 不完整的实现警告语义问题-不完整的实现

当您在接口中声明方法并且未在实现文件中定义它们时会看到这种情况。

*参数不匹配的数量是愚蠢的错误之一。*

# c++ - 插入链表头部时与指针混淆

> ID：15942284
> 
> 赞同：0
> 
> 时间：2013-04-11T06:43:18.683
> 
> 标签：c++, linked-list

我正在处理一个链表示例。但是，我目前无法理解 head_insert 方法。请有人进一步解释一下。谢谢你。

```
#include <iostream>
using namespace std;

struct node_ll
{
    int payload;
    node_ll* next;  // pointer to the next node
};

void head_insert(node_ll** list, int pload)
{
    node_ll* temp = new node_ll;//Declare temp, a pointer to a node.
    temp->payload = pload;//Set the payload of the struct at the address of temp to pload.
    temp->next = *list;//Set the next of the struct at the address of temp to the pointer to the old head of the list.
    *list = temp;//Set the pointer to the old head of the list to the pointer to the temp node.
    //Why doesnt the temp->next = temp?
};

void print_ll(node_ll** list)
{
    node_ll* temp;
    temp = *list;
    while (temp) // != NULL
    {
        cout << temp->payload << '\n';
        temp = temp->next;
    };
}

int main()
{
    node_ll* alist = NULL;  
    cout << "Empty list a to start\n";
    head_insert(&alist, 2); 
    head_insert(&alist, 4);
    head_insert(&alist, 6);
    cout << "List a after head insertion of 2,4,6 is \n";
    print_ll(&alist);
    cout << '\n';
    system("PAUSE");
    return 0;
} 
```

我的困惑在评论中有详细说明。如果我有线条

```
temp->next = *list;
*list = temp; 
```

为什么我新创建的节点在 next 中没有指向它自己的地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:00:11.773

```
//Declare temp, a pointer to a node. 
```

不。“创建一个新节点，并让`temp`成为该节点的地址。”

```
//Set the payload of the struct at the address of temp to pload. 
```

不。“设置要加载`payload`的结构*的地址* `temp`”。这可能就是您的意思，但是您确实需要对这些事情保持精确。无论如何，这是在填充`payload`我们刚刚创建的新节点。

```
//Set the next of the struct at the address of temp to the pointer to the old head of the list. 
```

类似地......“将地址*设置*为旧头*地址*`next`的结构的。” *`temp`*`list`**

 **```
//Set the pointer to the old head of the list to the pointer to the temp node. 
```

小心。事情是这样的：“旧列表头的地址”是一个*值*，而不是一个变量。它可以存在于内存中的多个位置，就像数字`4`可以存储在内存中的多个位置一样。

该函数被赋予a `node_ll**`，即a `(node_ll*)*`- 指向a 的指针`node_ll*`。具体来说，当我们从 调用函数时`main`，我们给了它一个指向*当前调用中**的变量`a_list``main`*的指针。

因此，当我们这样做时`*list =`，我们正在写入*该*内存位置 - 实际上是替换`a_list`变量。像这样使用内存地址可以让我们模拟“通过引用传递”并更改来自调用者的变量的值（我们不能只从参数中访问这些，因为我们得到了一个副本；我们不能将它们作为全局变量访问，因为它们不是全局变量）。

```
//Why doesnt the temp->next = temp? 
```

为什么会呢？代码从上到下运行（尽管有控制结构）。在我们设置新的列表头*之前*`temp->next`，被设置为列表的*旧*头。

 *似乎您希望`temp->next`更改只是因为在该过程中，它碰巧指向列表的旧头，然后我们更改了一个也碰巧具有相同值的变量 - 即指向名单的老头。但它们显然是独立的变量。如果我写`a = 4; a *= 3`，值 4 不会改变；变量`a`确实如此。指针也是如此；它们只是另一种价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:48:34.803

这是令人困惑的代码。

`list`是**一个指向**节点的指针。`*list = temp`没有改变**任何**节点，它改变了传入的指针，所以它指向插入的节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:49:52.437

在您的`head_insert`函数中，新节点被添加到开头。即新的新节点将成为您的链表的头部

```
temp->next = *list;//Store pointer to earlier head as the next node
*list = temp;  // Make pointer new node as the head node 
```

在您的代码中，双指针作为参数传递给函数。即如果`A`是您的指针头节点，则`B`包含的地址`A`作为参数传递给您的函数。***

# report - 使用 Web Designer 向 Stimulsoft 报告添加过滤器

> ID：15942291
> 
> 赞同：0
> 
> 时间：2013-04-11T06:43:51.463
> 
> 标签：report, stimulsoft

我正在使用 Stimulsoft 网络报告设计器开发一些报告。我需要在这些报告中添加一些数据过滤器。Stimulsoft 报告具有内置的数据过滤器，它们会在报告呈现时显示。但我找不到配置这些数据过滤器的方法。有人知道这样做的方法吗？

我在 Stimulsoft 演示网站上发现了一些有趣的数据过滤器。我希望在我的报告中使用它。[http://web.stimulsoft.com/?reportname=ParametersSelectingCountry](http://web.stimulsoft.com/?reportname=ParametersSelectingCountry)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:26:12.727

查看 Band 的 Filter 属性。你可以在那里使用任何表达式。

# ios - UIButton 的 IBAction 出错

> ID：15942293
> 
> 赞同：0
> 
> 时间：2013-04-11T06:44:02.763
> 
> 标签：ios, uiviewcontroller, addsubview

我想通过点击显示`UIViewController` **MyViewController**`UICollectionViewCell`然后关闭它。

所以，在我的**didSelectItemAtIndexPath**中：

```
CGRect myFrame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
MyViewController *myController = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
myController.view.frame = myFrame;
[self.view addSubview:myController.view]; 
```

有用！

在**MyViewController**我有`UIButton`链接到：

```
- (IBAction)close:(id)sender {
    [self.view removeFromSuperview];
} 
```

但是当我点击按钮时，我有这个而不是**关闭**方法调用：

![在此处输入图像描述](https://i.stack.imgur.com/GotXS.png)

**编辑**：感谢**calampunay**和**Manohar**

问题解决了。但是我已将**addSubview**和**removeFromSuperview**都替换为 AppDelagate，其中将**MyViewController**声明为属性。原因是 - 我想关闭**MyViewController**即使我会跳转到其他选项卡（我的应用程序中有 TabBar）或其他东西。

**即使我在其他地方（不是在它的框架中）点击MyViewController**也会关闭会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:04:21.480

在您的根/父视图控制器中，将 myController 声明为属性：

```
@property (strong, nonatomic) MyViewController *mycontroller; 
```

在您的**didSelectItemAtIndexPath**中，改为执行以下操作：

```
CGRect myFrame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
self.myController = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
myController.view.frame = myFrame;
[self.view addSubview:myController.view]; 
```

问题是，`myController`当按钮点击动作发生时，你已经被释放了，它试图调用该`close:`方法来释放对象（myController）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:48:27.360

在 .h 文件中声明

```
MyViewController *myController; 
```

米

```
myController = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
myController.view.frame = myFrame;
[self.view addSubview:myController.view];

- (IBAction)close:(id)sender 
{
    [myController.view removeFromSuperview];
} 
```

# sql - 选择查询中的列总和

> ID：15942296
> 
> 赞同：3
> 
> 时间：2013-04-11T06:44:19.810
> 
> 标签：sql, sql-server, sql-server-2008

我在 sql server 选择查询中有问题。我有下表。

```
ID-----Name----Quantity
1-------a-----------10
2-------b-----------30
3-------c-----------20
4-------d-----------15
5-------e-----------10
6-------f-----------30
7-------g-----------40 
```

我想选择数量总和 < 值的那些记录。例如，如果我说选择数量总和 <65 的那些记录，那么输出将是

```
ID-----Name----Quantity
1-------a-----------10
2-------b-----------30
3-------c-----------20 
```

因为如果我们包含下一条记录，那么 Quantity 的总和将为 75。

我想创建这个查询。请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T06:51:41.857

您可以简单地使用相关子查询来执行此操作，并且它适用于 MySQL 和 SQL Server。但这不是最好的性能明智的解决方案：

```
SELECT 
  ID, 
  Name,
  Quantity
FROM
(
  SELECT 
    t1.ID, 
    t1.Name,
    t1.Quantity,
    (SELECT SUM(t2.Quantity)
     FROM tablename AS t2
     WHERE t2.ID <= t1.ID) AS Total
  FROM Tablename AS t1
) AS t
WHERE Total < 65; 
```

看看它的实际效果：

*   [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/7ec52/6)

这会给你：

```
| ID | NAME | QUANTITY |
------------------------
|  1 |    a |       10 |
|  2 |    b |       30 |
|  3 |    c |       20 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:03:35.660

最佳性能明智的解决方案是使用递归 CTE。

```
WITH CTE_Prepare AS
(
    SELECT 
        *, 
        ROW_NUMBER() OVER (ORDER BY id) AS RN
    FROM TableRT
)
, CTE_Recursive AS 
(
    SELECT  ID, Name, Quantity, QUantity AS SumQuantity, RN FROM CTE_Prepare WHERE RN = 1
    UNION ALL
    SELECT p.ID, p.Name, p.Quantity, r.SumQuantity + p.Quantity AS SumQuantity, r.RN + 1 AS RN FROM CTE_Recursive r
    INNER JOIN CTE_Prepare p ON p.RN = r.RN+1  
    WHERE r.SumQuantity + p.Quantity < 65 
)
SELECT * 
FROM CTE_Recursive 
OPTION (MAXRECURSION 0) 
```

第一个 CTE 只是计算 ROW_NUMBERS 来代替您的 ID，因为重要的是不要有间隙，而且我们通常不能确定任何 ID 都会出现这种情况。

第二个 CTE 是两部分递归的，为下一行添加 Quantity。如果需要，您可以通过 Google 搜索更多关于 SQL Server 递归 CTE 的信息。

我认为这比任何其他查找运行总计的方法更好（这就是这个概念的名称），因为它当时只适用于两行 - 不会为每个计算添加所有先前的行，它实际上会在达到所需的值时立即停止标记。

[SQLFiddle - 几行示例](http://sqlfiddle.com/#!3/912ee/4)

[SQLFiddle - 10000 行](http://sqlfiddle.com/#!3/40439/3)

编辑：纠正了一些错误。为了使其快速，WHERE 子句需要在 CTE 内部而不是外部。

# jquery - jQuery Mobile：如何更改单选按钮活动状态颜色

> ID：15942297
> 
> 赞同：2
> 
> 时间：2013-04-11T06:44:25.783
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-fieldset, jquery-mobile-radio

如何更改选择时的单选按钮背景颜色？

```
 $("input[type='radio']").click(function(e) {
    $("input[type='radio']").css('background-color', '#ff0000');
}); 
```

我试过这个..但它不起作用。

* * *

它不工作。我忘了分享我的代码

> `<fieldset data-role="controlgroup" id="custom-fieldset"> <span>Were you able to complete your visit today?</span><br/><input type="radio" id="radio_1134198__4516395" name="sdid_1134198" value="radio_1134198__4516395" /><label for="radio_1134198__4516395">Yes</label>`

我得到了这样的结果[http://i.stack.imgur.com/SDGeZ.png](http://i.stack.imgur.com/SDGeZ.png)。必须更改单选按钮颜色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T06:51:12.777

工作示例：http: [//jsfiddle.net/Gajotres/qkCZY/](http://jsfiddle.net/Gajotres/qkCZY/)

# 版本 1

**HTML：**

```
<form>
    <fieldset data-role="controlgroup" data-type="horizontal" id="custom-fieldset">
        <legend>Horizontal:</legend>
        <input name="radio-choice-h-2" id="radio-choice-h-2a" value="on" checked="checked" type="radio"/>
        <label for="radio-choice-h-2a">One</label>
        <input name="radio-choice-h-2" id="radio-choice-h-2b" value="off" type="radio"/>
        <label for="radio-choice-h-2b">Two</label>
        <input name="radio-choice-h-2" id="radio-choice-h-2c" value="other" type="radio"/>
        <label for="radio-choice-h-2c">Three</label>
    </fieldset>
</form> 
```

**CSS：**

```
#custom-fieldset div .ui-radio .ui-radio-on {
    background: red !important;
} 
```

# 版本 2

工作示例：http: [//jsfiddle.net/Gajotres/hTY6k/](http://jsfiddle.net/Gajotres/hTY6k/)

**HTML：**

```
<fieldset data-role="controlgroup" id="custom-fieldset"> 
    <legend>Were you able to complete your visit today?</legend>
    <label for="radio_1134198__4516395">Yes</label>
    <input type="radio" id="radio_1134198__4516395" name="sdid_1134198" value="radio_1134198__4516395"/>
</fieldset> 
```

**CSS：**

```
#custom-fieldset div .ui-radio label span .ui-icon-radio-on {
    background-color: red !important;
} 
```

# 最后的笔记

如果您想了解更多关于如何自定义 jQuery Mobile 页面和小部件的信息，请查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**。它附带了许多工作示例，包括为什么 !important 对于 jQuery Mobile 是必需的。

# data-binding - Durandal 中的多个 foreach

> ID：15942298
> 
> 赞同：1
> 
> 时间：2013-04-11T06:44:30.373
> 
> 标签：data-binding, knockout.js, foreach, durandal

我是 Durandal 的新手，现在已经玩了几个小时了。这似乎很有希望 - 但现在我遇到了一个问题，我无法弄清楚 - 并且无法通过 Google 找到解决方案。

我有一个包含三个数据表的视图——creditCardLines、cashLines 和drivingReimbursementLines。他们从三个不同的数据源获取数据——用户可以向 cashLines 和drivingReimbursementLines 添加新行（省略表格）。

问题：在视图模型中，我可以轻松地将数据列表绑定到第一个 foreach - 但我不知道如何将数据绑定到第二个和第三个。

在激活函数中，我对我的服务器 API 进行 ajax 调用以获取第一个 foreach 的数据 - 然后在完成时返回承诺。如何在这里获取第二个和第三个 foreach 的数据？

视图模型：

```
define(function () {
    var submit = function () {
        this.displayName = 'Expenses';

        this.creditCardLines = ko.observableArray();
        var me = this;

        this.activate = function () {
            return $.get('/submit/GetCreditCardLines').then(function (creditCardLines) {
                me.creditCardLines(creditCardLines.Data);
            });
        };
    };

    return submit;
}); 
```

看法：

```
<section>
    <h2 data-bind="html:displayName"></h2>

    <h3>CreditCard lines</h3>
    <table class="table">
        <tbody data-bind="foreach: creditCardLines">
            <tr>
                <td class="date" data-bind="text: Date"></td>
                <td data-bind="text: Description"></td>
                <td data-bind="text: Amount"></td>
                <td><input type="checkbox" data-bind="checked: ApprovedEmployee" /></td>
            </tr>
        </tbody>
    </table>

    <h3>Cash lines</h3>
    <table class="table">
        <tbody data-bind="foreach: cashLines">
            <tr>
                <td class="date" data-bind="text: Date"></td>
                <td data-bind="text: Description"></td>
                <td data-bind="text: Amount"></td>
            </tr>
        </tbody>
    </table>
    <!-- TODO: Generate form to add new lines -->

    <h3>Driving reimbursement lines</h3>
    <table class="table">
        <tbody data-bind="foreach: drivingReimbursementLines">
            <tr>
                <td class="date" data-bind="text: Date"></td>
                <td data-bind="text: Description"></td>
                <td data-bind="text: Distance"></td>
                <td data-bind="text: Rate"></td>
                <td data-bind="text: Amount"></td>
            </tr>
        </tbody>
    </table>
    <!-- TODO: Generate form to add new lines -->

    <!-- Approve and save all lines as a quote with lines -->
    <input type="submit" value="Submit quote" />
</section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:11:30.527

这就是我在视图模型中处理多个 jQuery 延迟调用的方式：

```
return $.when(
        $.get('/submit/GetCreditCardLines'),
        $.get('/submit/GetCashLines'),
        $.get('/submit/GetReimbursementLines'))
    .then(function (creditCardLines, cashLines, reimbursementLines)
    {
        processCreditCardLines(creditCardLines);
        processCashLines(cashLines);
        processReimbursementLines(reimbursementLines);
    })
    .fail(function (status)
    {
        // Do whatever you need to if it fails
    }); 
```

如果您不想要它们，则不需要它们，但是如果您正在做任何复杂的事情，我认为拥有它们会更整洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:42:03.833

你应该看看 BreezeJS。它可以选择进行一次 Ajax 调用以提取多个查找。

查看 BreezeJS 文档以获得详细说明：[http ://www.breezejs.com/documentation/lookup-lists](http://www.breezejs.com/documentation/lookup-lists)

# c++ - 快速帮助重建 automake 项目

> ID：15942300
> 
> 赞同：0
> 
> 时间：2013-04-11T06:44:35.190
> 
> 标签：c++, c, makefile, automake

我得到了一个使用 automake 的项目的源代码（我再也联系不到作者了）。我对系统不熟悉，我想做的就是重建项目。

我在项目中有以下文件：

```
Makefile.am
Makefile.in
Makefile 
```

我已经修改了 Makefile.am 文件以适应我系统上的路径，但是我应该如何运行它来重新生成 Makefile。

注意：我目前对学习 automake 不感兴趣，只是重新编译这个项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:30:11.860

要引导 autoconf 构建系统，您可以使用

```
 $ autoreconf -fiv 
```

它将根据需要调用 automake、aclocal、autoheaders 并生成`configure`脚本。之后你可以照常做

```
 $ ./configure && make && make install 
```

由 milos_ladni 提议

但是您肯定会需要`configure.ac`（或者`configure.in`如果它是一个较旧的项目），否则该项目只是缺少一些核心部分。

如果缺少这些，您可以直接尝试修改`Makefile`（祝您好运），但从头开始重新创建 configure.ac 可能更容易（并希望项目没有太多依赖项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:43:09.737

$ ./configure --prefix=some_directory

$ 制作

$ 进行安装

[http://inti.sourceforge.net/tutorial/libinti/autotoolsproject.html#AP05](http://inti.sourceforge.net/tutorial/libinti/autotoolsproject.html#AP05)

# java - 将字符串从 args[0] 转换为 char，然后使用 char 填充并打印一个二维数组

> ID：15942303
> 
> 赞同：0
> 
> 时间：2013-04-11T06:44:48.273
> 
> 标签：java, string, multidimensional-array, char

```
public static void main(String[] args) {

    String input = args[0]; 

    String [] part = input.split(" "); 
    //splits string into 2 parts (action and characters to encode)
    String action = part[0];
    // action is what is done to letter i.e. decrypt or encrypt
    String plainText = part[0];
    char [] letters = plainText.toCharArray();
    //letters is the input of what to act on

        int n = plainText.length();
        //number of letters typed
        int boxsize; // overall size of box  
        boxsize = (int) Math.pow((Math.sqrt(n))+1,2);
        int Row = (int) Math.sqrt(boxsize); 
        int Col = Row;
        //length of rows AND columns since its square

    if (action.equals("-encrypt")) {

        char [][] box = new char[Row][Col];

        for (int i=0; i<Row; i++) {
        for ( int j=0; j<Col; j++) {

            System.out.println( i ); 
```

如果参数作为字符串给出，你如何填充二维字符数组？还有你如何打印框（数组），以便它从左到右垂直向下读取每一列？\ 例如命令行将是“-encrypt abcd”（不包括引号）我想要的输出是“acbd”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:59:45.693

```
String plainText = part[1]; 
```

被复制为 0

但通常没有引号 args[0] 将是动作，其余的 args[>=1] 间隔纯文本。

# perl - 如何将日志信息添加到 perl 遗留代码

> ID：15942309
> 
> 赞同：3
> 
> 时间：2013-04-11T06:45:17.083
> 
> 标签：perl

我有一个用 perl 构建的中型到大型系统，它是在过去 15 年中开发的，由许多脚本和 pm 文件构建，为了改进系统，我需要更多数据，这是我看到的最简单的方法获取这些数据是让代码中的每个函数都将开始和结束时间打印到某个日志中，这样就有可能了解什么是花费最多时间的。然而，这是一个旧系统，有些部分比其他部分更难维护，最重要的是我需要它运行，这意味着为了获得真实数据，我需要它从生产中打印出来。我想要做的是以某种方式覆盖函数声明，以将每个函数开始包装在像 NAME start STARTTIME PARAMS 这样的行中，当它离开函数时，NAME 结束 STARTTIME PARAMS

有人能指出我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T07:58:19.983

看看[`Devel::NYTProf`](http://search.cpan.org/~timb/Devel-NYTProf-5.00/lib/Devel/NYTProf.pm)。它可以分析你所有的潜艇所花费的时间（并做更多的事情）。它不涉及大量杂乱的代码修改；相反，您只需使用它运行您的脚本：

```
perl -d:NYTProf your_script.pl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:22:35.723

以前的答案是正确的（我特别推荐[Devel::NYTProf](https://metacpan.org/module/Devel::NYTProf)）。但是，您通常可以应用一种更通用的技术来收集有关子例程行为的数据，即摆弄符号表，将代码“附加”（或前置）到实际子程序的代码中。

几个指针：

*   [在 Perl 中，我可以在执行包中的每个函数之前调用一个方法吗？](https://stackoverflow.com/a/2663723/203856 "在 Perl 中，我可以在执行包中的每个函数之前调用一个方法吗？")（这个答案显示了一个您可以适应您的特定情况的代码示例）
*   [Hook::LexWrap](https://metacpan.org/module/Hook::LexWrap)是一个模块，可让您以多种方式增强子例程行为，而无需触及原始代码

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:54:37.547

听起来你需要使用分析器

[http://www.perl.org/about/whitepapers/perl-profiling.html](http://www.perl.org/about/whitepapers/perl-profiling.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:08:49.020

Perl 分析器通常会对程序性能产生巨大影响，因此在生产中使用它们可能不是一个好主意。

你可以试试[Devel::ContinuousProfiler](https://metacpan.org/module/Devel%3a%3aContinuousProfiler)，它声称影响很小（我自己没用过，今天早上才发现！）

# r - 使用 gtable 对象排列Grob

> ID：15942313
> 
> 赞同：4
> 
> 时间：2013-04-11T06:45:26.380
> 
> 标签：r, ggplot2, gridextra

从[https://stackoverflow.com/a/13295880](https://stackoverflow.com/a/13295880)我学会了如何排列两个具有对齐绘图区域的绘图。

我的问题是：我怎样才能得到安排好的情节的对象？

例子：

```
require(ggplot2)
require(gridExtra)

A <- ggplot(CO2, aes(x=Plant)) + geom_bar() +coord_flip() 
B <- ggplot(CO2, aes(x=Type)) + geom_bar() +coord_flip() 

gA <- ggplot_gtable(ggplot_build(A))
gB <- ggplot_gtable(ggplot_build(B))
maxWidth = grid::unit.pmax(gA$widths[2:3], gB$widths[2:3])
gA$widths[2:3] <- as.list(maxWidth)
gB$widths[2:3] <- as.list(maxWidth)

## works:
grid.arrange(gA, gB, ncol=1)

## does not work:
theplot <- grid.arrange(gA, gB, ncol=1, plot=FALSE) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T06:49:29.600

使用函数`arrangeGrob()`将两个图保存为对象。

```
theplot <- arrangeGrob(gA, gB, ncol=1) 
```

# android - Android 语音识别器长度

> ID：15942315
> 
> 赞同：2
> 
> 时间：2013-04-11T06:45:33.113
> 
> 标签：android, speech-recognition

我想知道语音识别器可以听多长时间是否有限制。要么是由于语音识别器收听时间的实际时间限制，要么是由于用户所说的内容太长，Google 无法正确处理并会回复 ERROR_NO_MATCH（常量值为 7）。

另外，如果有限制，我想知道不同的语言是否有不同的限制。

# javascript - java脚本掩码问题

> ID：15942316
> 
> 赞同：0
> 
> 时间：2013-04-11T06:45:35.133
> 
> 标签：javascript, jquery

在 js 库中使用 where .bind("focus.mask") 和 .bind("blur.mask") 函数来进行模糊和聚焦。

js库：

```
(function(a){var b=(a.browser.msie?"paste":"input")+".mask",c=window.orientation!=undefined;a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"},a.fn.extend({caret:function(a,b){if(this.length!=0){if(typeof a=="number"){b=typeof b=="number"?b:a;return this.each(function(){if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()}})}if(this[0].setSelectionRange)a=this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length}return{begin:a,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,e){if(!d&&this.length>0){var f=a(this[0]);return f.data(a.mask.dataName)()}e=a.extend({placeholder:"_",completed:null},e);var g=a.mask.definitions,h=[],i=d.length,j=null,k=d.length;a.each(d.split(""),function(a,b){b=="?"?(k--,i=a):g[b]?(h.push(new RegExp(g[b])),j==null&&(j=h.length-1)):h.push(null)});return this.trigger("unmask").each(function(){function v(a){var b=f.val(),c=-1;for(var d=0,g=0;d<k;d++)if(h[d]){l[d]=e.placeholder;while(g++<b.length){var m=b.charAt(g-1);if(h[d].test(m)){l[d]=m,c=d;break}}if(g>b.length)break}else l[d]==b.charAt(g)&&d!=i&&(g++,c=d);if(!a&&c+1<i)f.val(""),t(0,k);else if(a||c+1>=i)u(),a||f.val(f.val().substring(0,c+1));return i?d:j}function u(){return f.val(l.join("")).val()}function t(a,b){for(var c=a;c<b&&c<k;c++)h[c]&&(l[c]=e.placeholder)}function s(a){var b=a.which,c=f.caret();if(a.ctrlKey||a.altKey||a.metaKey||b<32)return!0;if(b){c.end-c.begin!=0&&(t(c.begin,c.end),p(c.begin,c.end-1));var d=n(c.begin-1);if(d<k){var g=String.fromCharCode(b);if(h[d].test(g)){q(d),l[d]=g,u();var i=n(d);f.caret(i),e.completed&&i>=k&&e.completed.call(f)}}return!1}}function r(a){var b=a.which;if(b==8||b==46||c&&b==127){var d=f.caret(),e=d.begin,g=d.end;g-e==0&&(e=b!=46?o(e):g=n(e-1),g=b==46?n(g):g),t(e,g),p(e,g-1);return!1}if(b==27){f.val(m),f.caret(0,v());return!1}}function q(a){for(var b=a,c=e.placeholder;b<k;b++)if(h[b]){var d=n(b),f=l[b];l[b]=c;if(d<k&&h[d].test(f))c=f;else break}}function p(a,b){if(!(a<0)){for(var c=a,d=n(b);c<k;c++)if(h[c]){if(d<k&&h[c].test(l[d]))l[c]=l[d],l[d]=e.placeholder;else break;d=n(d)}u(),f.caret(Math.max(j,a))}}function o(a){while(--a>=0&&!h[a]);return a}function n(a){while(++a<=k&&!h[a]);return a}var f=a(this),l=a.map(d.split(""),function(a,b){if(a!="?")return g[a]?e.placeholder:a}),m=f.val();f.data(a.mask.dataName,function(){return a.map(l,function(a,b){return h[b]&&a!=e.placeholder?a:null}).join("")}),f.attr("readonly")||f.one("unmask",function(){f.unbind(".mask").removeData(a.mask.dataName)}).bind("focus.mask",function(){m=f.val();var b=v();u();var c=function(){b==d.length?f.caret(0,b):f.caret(b)};(a.browser.msie?c:function(){setTimeout(c,0)})()}).bind("blur.mask",function(){v(),f.val()!=m&&f.change()}).bind("keydown.mask",r).bind("keypress.mask",s).bind(b,function(){setTimeout(function(){f.caret(v(!0))},0)}),v()})}})})(jQuery); 
```

在我的 js 文件中，我想取消绑定这个 .bind(focus.mask) 和 .bind(blur.mask) 函数？

我的JS：

```
function applyInputMasks() {
    var $form.bind("blur.mask",function(){v(),f.val()!=m&&f.change()}) = $('form');

    if ($form.size()) {
        // added try catch so that if input field not found then it wont give an error
        try{
            //$form.find('input:not([skip-masks])[name*=cpf]').mask("999.999.999-99");
            //$form.find('input:not([skip-masks])[name*=document]').mask("999.999.999-99");
            $form.find('input:not([skip-masks])[name*=date]').mask("99/99/9999");
            $form.find('input:not([skip-masks])[name*=postalCode]').mask("999999");
            //$form.find('input:not([skip-masks])[name*=phone]').mask("999999999999");

            // Postal code
            var $postalCode = $form.find('input:not([skip-masks])[name*=postalCode]');

            if ($postalCode.attr('skip-resolve-postalcode')) {
                $postalCode.mask("999999");
            } else {
                $postalCode.mask("999999");
                $postalCode.mask("999999", {completed: resolvePostalCode});
            }

            // override the value AFTER applying the mask
            var valueToOverride = $postalCode.attr('override-value');
            if (valueToOverride) {
                $postalCode.val(valueToOverride);
            }
        } catch (e) {}
    }

    BRAPRINT.util.log('Masks applied!');
} 
```

在我的表单中，当我在提交表单的框中输入 6 位邮政编码时使用此掩码功能，然后城市会自动更新如果我提供不完整的 PIN 码并在表单数据中单击邮政信箱外，则会清除，因为在库中使用 .bind(" focus.mask") 和 .bind("blur.mask")。

我阅读了本教程：http: [//view.jqueryui.com/mask/tests/visual/mask/mask.html](http://view.jqueryui.com/mask/tests/visual/mask/mask.html)

在哪里说如果 .bind() 转换为 .unbind() 则在单击邮政编码输入框后未清除的表单中输入邮政编码不完整。

阅读此功能后，我在我的 js 文件中尝试了这个，其中邮政编码：

```
$form.find('input:not([skip-masks])[name*=postalCode]').unbind("focus.mask");
$form.find('input:not([skip-masks])[name*=postalCode]').unbind("blur.mask"); 
```

在此之后我正在清除所有缓存，但这不起作用。

如果我输入不完整的邮政编码，我希望不清除数据。有可能的 ？

我不想更改掩码库文件，因为这不是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:02:16.360

除了取消绑定，您可以尝试`e.preventDefault`或`return false`按照本文中使用的 CSS 技巧来阻止事件传播和冒泡。

[http://css-tricks.com/return-false-and-prevent-default/](http://css-tricks.com/return-false-and-prevent-default/)

# ajax - 使用ajax更新基本线highcharts

> ID：15942317
> 
> 赞同：0
> 
> 时间：2013-04-11T06:45:40.643
> 
> 标签：ajax, charts, highcharts

我想使用 ajax实现基本的线高图（ [http://www.highcharts.com/demo/line-basic ）。](http://www.highcharts.com/demo/line-basic)图表值通过 ajax 更新。请帮我怎么做谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:20:05.620

请看一下ajax加载数据的例子 [http://www.highcharts.com/demo/line-ajax](http://www.highcharts.com/demo/line-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:26:44.820

highcharts 网站有一篇关于此的文章[http://docs.highcharts.com/#preprocessing-live-data](http://docs.highcharts.com/#preprocessing-live-data)

这涵盖了使用 Ajax 从服务器获取新数据的基础知识。如果要向图表添加新系列，则需要调用

```
chart.addSeries(data) 
```

这是记录在这里[http://api.highcharts.com/highcharts#Chart.addSeries()](http://api.highcharts.com/highcharts#Chart.addSeries())

# grails - Grails 使用下拉菜单过滤数据

> ID：15942318
> 
> 赞同：0
> 
> 时间：2013-04-11T06:45:43.690
> 
> 标签：grails, filter

我想为我的表添加一个数据过滤器。有人可以帮助我吗？我已经为列表控制器编写了代码，但我不知道如何在我的 .gsp 文件中实现“mitarbeiterSelectedId”。

目前我有以下代码片段。

这是我的控制器“列表”

```
def list(Integer max) {
    def mitarbeiterList = Mitarbeiter.listOrderByNachname()

    if (params.selectedMitarbeiterId != null && params.selectedMitarbeiterId != '-1'){
        mitarbeiterList = [Mitarbeiter.findById(params.selectedMitarbeiterId)]
    }
    [mitarbeiterInstanceList: mitarbeiterList, mitarbeiterInstanceTotal: Mitarbeiter.count() ]
} 
```

这是我的 list.gsp

```
 <g:select id="mitarbeiter" name="mitarbeiterId" from="${Mitarbeiter.list()}" optionValue="nachname"
          optionKey="id"
          noSelection="${['-1': 'Bitte auswählen...']}" onchange="selectedMitarbeiterId"/>

<g:actionSubmit value="submit" onclick="" >OK</g:actionSubmit>

<table>
    <thead>
    <tr>

        <g:sortableColumn property="nachname" params="[controller: 'mitarbeiter']"
                          title="${message(code: 'mitarbeiter.nachname.label', default: 'Nachname')}"/>

        <g:sortableColumn property="vorname" params="[controller: 'mitarbeiter']"
                          title="${message(code: 'mitarbeiter.vorname.label', default: 'Vorname')}"/>

        <g:sortableColumn property="sollpensum" params="[controller: 'mitarbeiter']"
                          title="${message(code: 'mitarbeiterHistory.sollpensum.label', default: 'Sollpensum')}"/>

        <sec:ifAllGranted roles="ROLE_ADMIN">

            <g:sortableColumn property="gehalt" params="[controller: 'mitarbeiter']"
                              title="${message(code: 'mitarbeiterHistory.gehalt.label', default: 'Gehalt')}"/>

        </sec:ifAllGranted>
        <th><g:message code="mitarbeiterHistory.bereich.label" default="Bereich"/></th>

    </tr>
    </thead>
    <tbody>
    <g:each in="${Mitarbeiter.list()}" status="i" var="mitarbeiterInstance">
        <tr class="${(i % 2) == 0 ? 'even' : 'odd'}">

            <td><g:link action="show" controller="mitarbeiter"
                        id="${mitarbeiterInstance.id}">${fieldValue(bean: mitarbeiterInstance, field: "nachname")}</g:link></td>

            <td>${fieldValue(bean: mitarbeiterInstance, field: "vorname")}</td>

            <td>${fieldValue(bean: mitarbeiterInstance.histories, field: "sollpensum")}</td>

            <sec:ifAllGranted roles="ROLE_ADMIN">
                <td>${fieldValue(bean: mitarbeiterInstance.histories, field: "gehalt")}</td>
            </sec:ifAllGranted>

            <td>${fieldValue(bean: mitarbeiterInstance.histories, field: "bereich")}</td>
        </tr>
    </g:each>
    </tbody>
</table> 
```

有人可以帮我解决这个问题吗？

## 编辑 ：

好的，目前我的班级看起来像这样。

```
class Employee{

String firstname
String lastname

static hasMany = [histories:EmployeeHistory]

static constraints = {
    firstname nullable: false, blank: false, minSize: 2, matches: "[a-zA-ZäöüÄÖÜßéèáàúùóò'\\- ]+"
    lastname nullable: false, blank: false, minSize: 2, matches: "[a-zA-ZäöüÄÖÜßéèáàúùóò'\\- ]+"

}
} 
```

所以当我插入你的代码时，它看起来像这样：

```
class Employee{

String firstname
String lastname

static hasMany = [histories:EmployeeHistory]

static constraints = {
    firstname nullable: false, blank: false, minSize: 2, matches: "[a-zA-ZäöüÄÖÜßéèáàúùóò'\\- ]+"
    lastname nullable: false, blank: false, minSize: 2, matches: "[a-zA-ZäöüÄÖÜßéèáàúùóò'\\- ]+"
}

static namedQueries = {
    filteronLastname { String inLastname ->
        if (inLastname && inLastname?.size() > 0) {
            ilike 'lastname', "%${inLastname}%"
        }
    }
}

} 
```

如果在下拉列表中未选择任何内容，我想显示整个表格数据。
如果我在下拉列表中选择一名员工，我只想显示包含所选员工数据的表格。

目前这是我的员工名单控制器

```
def list() {        
    params.max = Math.min(params.max ? params.int('max') : 10, 100)
    def employeeList = Employee.filteronLastname(params?.lastName).list(params)
    [employeeInstanceList: employeeList, employeeInstanceTotal: employeeList.totalCount ]
} 
```

我必须在哪里插入这个：

```
NewsItem.filterLastname(params?.Lastname).
list() 
```

以及我必须如何改变`<g:selected>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:40:27.980

为了过滤数据，我们最近采用了另一种方法。为了实现灵活的过滤可能性，我们使用命名查询实现了过滤方法。

一个带有一些随机代码的小例子来解释这个想法！：

```
class NewsItem {
    String title
    String message

    static namedQueries = {
        filteronTitleILike { String inTitle ->
            if (inTitle && inTitle?.size() > 0) {
                ilike 'title', "%${inTitle}%"
            }
        }

        filteronMessageILike { String inMessage ->
            if (inMessage && inMessage ?.size() > 0) {
                ilike 'message', "%${inMessage }%"
            }
        }
    }
} 
```

要使用过滤，我们现在可以执行以下操作：

```
NewsItem.filterOnTitleILike(params?.title).
filterOnMessageILike(params?.message).
list() 
```

使用这种方法的一个主要优点是当数据从 gsp 发送到控制器时我们非常灵活。如果 params?.title 未填充又名 null，则在命名查询中不考虑这一点。所以我们只提供 params?.message 它保持完美运行！

# css - 为什么这个 CSS3 动画不运行？

> ID：15942321
> 
> 赞同：0
> 
> 时间：2013-04-11T06:45:47.643
> 
> 标签：css, animation

这是我第一次自己编写 CSS3 动画，我刚打开页面，它没有运行。

唯一的效果是动画fallB应用到的东西消失了，但在同一个位置。

应用动画的其他元素没有任何反应。

我究竟做错了什么？

这是我的代码：

```
.animated{
        -moz-transform: translate(0,0);
        -webkit-transform: translate(0,0);
        transform: translate(0,0);
        -moz-transform3d: translate(0,0,0);
        -webkit-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
    }
    .animated.fallA{
        -moz-animation: fallA 1s forwards ease-in-out;
        -webkit-animation: fallA 1s forwards ease-in-out;
        animation: fallA 1s forwards ease-in-out;
    }
    .animated.fallB{
        -moz-animation: fallB 1s forwards ease-in-out;
        -webkit-animation: fallB 1s forwards ease-in-out;
        animation: fallB 1s forwards ease-in-out;
    }
    .animated.fallC{
        -moz-animation: fallC 1s forwards ease-in-out;
        -webkit-animation: fallC 1s forwards ease-in-out;
        animation: fallC 1s fowards ease-in-out;
    }
    .animated.fallD{
        -moz-animation: fallD 1s forwards ease-in-out;
        -webkit-animation: fallD 1s forwards ease-in-out;
        animation: fallD 1s forwards ease-in-out;
    }
    .animated.fallE{
        -moz-animation: fallE 1s forwards ease-in-out;
        -webkit-animation: fallE 1s forwards ease-in-out;
        animation: fallE 1s forwards ease-in-out;
    }
    @-moz-keyframes fallA{
        0%{
            position:relative;
            opacity:0.0;
            top:-300px;
            left:-400px;
        }
        100%{
            opacity:1.0;
            top:0;
            left:0;
        }
    }
    @-webkit-keyframes fallA{
        0%{
            position:relative;
            opacity:0.0;
            top:-300px;
            left:-400px;
        }
        100%{
            opacity:1.0;
            top:-300px;
            left:-400px;
        }
    }
    @keyframes fallA{
        0%{
            position:relative;
            opacity:0.0;
            top:-300px;
            left:-400px;
        }
        100%{
            opacity:1.0;
            top:-300px;
            left:-400px;
        }
    }
    @-moz-keyframes fallB{
        0%{
            position:relative;
            opacity:0.0;
            top:-200px;
            left:-200px;
        }
        100%{
            opacity:1.0;
            top:0;
            left:0;
        }
    }
    @-webkit-keyframes fallB{
        0%{
            position:relative;
            opacity:0.0;
            top:-200px;
            left:-200px;
        }
        100%{
            opacity:0.0;
            top:0;
            left:0;
        }
    }
    @keyframes fallB{
        0%{
            position:relative;
            opacity:0.0;
            top:-200px;
            left:-200px;
        }
        100%{
            opacity:1.0;
            top:0;
            left:0;
        }
    }
    @-moz-keyframes fallC{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        100%{
            opacity:1.0;
            top:0;
        }
    }
    @-webkit-keyframes fallC{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        100%{
            opacity:1.0;
            top:0;
        }
    }
    @keyframes fallC{
        0%{
            position:relative;
            opacity:0.0;
            top:-100px;
        }
        100%{
            opacity:1.0;
            top:0;
        }
    }
    @-moz-keyframes fallD{
        0%{
            position:relative;
            opacity:0.0;
            top:-200px;
            right:-200px;
        }
        100%{
            opacity:1.0;
            top:-200px;
            right:-200px;
        }
    }
    @-webkit-keyframes fallD{
        0%{
            position:relative;
            opacity:0.0;
            top:-200px;
            right:-200px;
        }
        100%{
            opacity:1.0;
            top:-200px;
            right:-200px;
        }
    }
    @keyframes fallD{
        0%{
            position:relative;
            opacity:0.0;
            top:-200px;
            right:-200px;
        }
        100%{
            opacity:1.0;
            top:0;
            right:0;
        }           
    }
    @-moz-keyframes fallE{
        0%{
            position:relative;
            opacity:0.0;
            top:-300px;
            right:-400px;
        }
        100%{
            opacity:1.0;
            top:0;
            right:0;
        }
    }
    @-webkit-keyframes fallE{
        0%{
            position:relative;
            opacity:0.0;
            top:-300px;
            right:-400px;
        }
        100%{
            opacity:1.0;
            top:0;
            right:0;
        }
    }
    @keyframes fallE{
        0%{
            position:relative;
            opacity:0.0;
            top:-300px;
            right:-400px;
        }
        100%{
            opacity:1.0;
            top:0;
            right:0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:15:59.707

您需要在关键帧位置所基于的 html 标记中的某个固定点。如果一切正常`position:relative`，则没有基点可以对某些东西进行动画处理。假设您在这里使用 safari 工作，因为您`@-webkit-keyframes fallB`的设置不同于`opacity:0.0`您的`@-moz-keyframes fallB`设置。意味着在Firefox中你应该看到它`class="animated fallB"`不会消失。

和顶部的小费。如果您制作关键帧动画，请先尝试以一种浏览器样式对它们进行编码，然后将它们应用于其他浏览器代码。如果将太多的 css 值定义为具有相同的视觉效果，您会感到困惑，并且可能会出错。

如果你把`.animated { position:absolute; ..`你的 css放进去，你会看到一些成功

# windows - 无法使用 *REG QUERY* 命令检索某些 regedit 条目

> ID：15942323
> 
> 赞同：0
> 
> 时间：2013-04-11T06:45:49.663
> 
> 标签：windows, command

我正在使用**REG QUERY HKLM/SOFTWARE**命令检索所有已安装的软件，但它不会返回少数应用程序，我需要的应用程序是 64 位的。

操作系统：- Windows 7

注意：- 当我使用该命令时，它会返回**[Wow6432Node]**文件夹下的应用程序，但我的应用程序不会出现在此文件夹下。它在**[HKLM/SOFTWARE]**位置下

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:16:21.533

此行为是由于[注册表重定向器](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384232.aspx)造成的。您正在运行 32 位版本`REG`，大概是因为调用它的进程是 32 位进程。所以32位版本`REG`默认读取注册表的32位视图。

您应该使用 /reg:64 开关强制 reg 使用注册表的 64 位视图，如下所述：[MS-KB-948698](http://support.microsoft.com/kb/948698)。

如果您是通过程序执行此操作，那么最好使用注册表 API 来读取条目，而不是使用该`REG`工具。

# c# - 我可以以编程方式扩展“文件”菜单吗？

> ID：15942327
> 
> 赞同：2
> 
> 时间：2013-04-11T06:45:58.867
> 
> 标签：c#, menu

通常，当我们单击菜单栏中的**文件**菜单时，它会向下扩展，如下所示

[![在此处输入图像描述](https://i.stack.imgur.com/RORyA.png)](https://i.stack.imgur.com/RORyA.png)

如何通过 C# 代码以编程方式实现这一点？我需要像单击文件菜单一样展开文件菜单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T06:52:42.267

假设您的 MenuStrip 的名称是`fileMenu`，使用以下命令打开它：

```
fileMenu.ShowDropDown(); 
```

要显示 SubMenuItem，请打开 ParentMenuItem，然后打开 SubMenuStrip。参考您的屏幕截图，我将 SubMenuItem 命名为“newMenuStrip”。

```
fileMenu.ShowDropDown();
newMenuStrip.ShowDropDown(); 
```

当您尝试此操作时，您将在 MenuStrips 中看到没有选择。所以，这是你的最终代码：

```
fileMenu.ShowDropDown();
newMenuStrip.ShowDropDown();
newMenuStrip.DropDownItems[0].Selected(); 
```

# perl - 仅从页面上的特定表中选择 WWW::Mechanize 和 CSS 选择器？

> ID：15942330
> 
> 赞同：0
> 
> 时间：2013-04-11T06:46:09.337
> 
> 标签：perl, css-selectors, web-scraping, www-mechanize, www-mechanize-firefox

再会，

我正在抓取一些在表格中显示我需要的数据的页面。页面上有多个表格，内容如下：

```
<table class="dTable" cellspacing="1" cellpadding="1" border="0"> 
```

我要刮掉的项目在表格单元格中：

```
<td class="dCell" align="right"> 
```

不幸的是，页面上有许多具有相同类别的单元格。此外，某些页面包含额外`dCells`的附加信息。因此，在表单的脚本中指定特定的单元格：

```
my @thing = $mech->selector('td.dCell');

my $val = $thing[14]->text(); 
```

将在不同的页面上给出不同的结果，即。我不会一直得到我想要刮的东西。

所以作为部分解决方案，我认为最好从具体的表格中进行选择。

```
my @table = $mech->selector('table.dTable');

my @required = $table[3]->selector('td.dCell');

#the info is in the third dTable on the page

#the third table does not contain changing data, ie. I can use required[1] and it will be the same all of the time. 
```

我试过了，它不起作用，收到错误：

MozRepl::RemoteObject::Object 在以下行没有函数选择器：

```
my @required = $table[3]->selector('td.dCell'); 
```

所以在这一点上我被卡住了。我感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:10:25.837

您需要使用`node`以下选项`selector`：

```
my @required = $mech->selector( 'td.dCell', { node => ... } ); 
```

但是为什么不使用 XPath？

```
my @required = $mech->xpath('//table[@class="dTable"][3]//td[@class="dCell"]'); 
```

# jquery - 在一行中按类设置输入类型文本值

> ID：15942331
> 
> 赞同：6
> 
> 时间：2013-04-11T06:46:12.303
> 
> 标签：jquery, html, jquery-selectors

我在单选按钮中按类名进行类选择，它可以工作然后我想在文本输入中按名称进行类选择，并将值设置为我无法做到的任何文本

如何对我的文本框进行相同的设置值

这是我的代码

```
<html> 
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Encuesta</title>
    <link href="css/smoothness/jquery-ui-1.9.1.custom.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link href="css/helper.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="js/jquery-1.8.2.js"></script>
    <script src="js/jquery-ui-1.9.1.custom.js"></script>

    <title>Ejemplo Radio Button</title> 
<script> 
        $(document).ready(function(){   
            var predeterminar=2;
            //This line works fine
            $("[class=radiomarcado]").filter("[value='"+predeterminar+"']").prop("checked",true);
            //$("[class=nsnr]").prop("value","NS/NR");
            //$("#p074, #p076, #p078").prop("value", "NS/NR");
            // but this does not set the value by class
            // if you can see I try other ways to do
            $('.input[type="text"][class="nsnr"]').prop("value", "NS/NR");      
            //$('input:radio[class="nsnr"]').prop("value","NS/NR");

        });
</script> 
</head>

<body> 
<form name=fcolores> 
            <table class="gridtable2">
            <caption>3.5 ¿Cuál es la cantidad promedio de empleados en el año 2011 que al interior de su empresa se dedicaron a las siguientes actividades?</caption>
                <tr><td class="subtitulos">Informática y sistemas</td>
                    <td>    <input type="text"   id="p074" name="p074" size="15" onkeypress="return RangoNumeroFormateado(this,0,0,event);" /></td>
                    <td>Si  <input type="radio" class="radiomarcado" id="p075" name="p075" value="1"/>  No<input type="radio" class="radiomarcado" id="p075" name="p075" value="2" /></td></tr>
                <tr><td class="subtitulos">Investigación y desarrollo</td>
                    <td>    <input type="text"  id="p076" name="p076" size="15" onkeypress="return RangoNumeroFormateado(this,0,0,event);" /></td>
                    <td>Si  <input type="radio"  class="radiomarcado" id="p077" name="p077" value="1"/> No<input type="radio"  class="radiomarcado" id="p077" name="p077" value="2" /></td></tr>
                <tr><td class="subtitulos">Ingeniería y diseño industrial</td>
                    <td>    <input type="text"  id="p078" name="p078" size="15" onkeypress="return RangoNumeroFormateado(this,0,0,event);" /></td>
                    <td>Si  <input type="radio"  class="radiomarcado" id="p079" name="p079" value="1"/> No<input type="radio"  class="radiomarcado" id="p079" name="p079" value="2" /></td></tr>
            </table>
</form> 
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T06:47:36.817

您正在使用带有输入的*点*，该输入用于[类选择器（“.class”）](https://api.jquery.com/class-selector/)。您的选择器正在寻找您不想要的具有类输入的元素。您将输入作为标签，因为您需要[元素选择器（“元素”）](https://api.jquery.com/element-selector/)，所以在这里您不应该在输入之前放置点，而且您没有`nsnr`为输入分配类，在使用之前分配它。

*改变*

```
$('.input[type="text"][class="nsnr"]').prop("value", "NS/NR"); 
```

*至*

```
$('input[type="text"][class="nsnr"]').prop("value", "NS/NR"); 
```

如果您仅将 nsnr 类分配给输入，则使用简单的类选择器和`val()`

```
$('.nsnr').val("NS/NR"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:49:21.210

```
$('.nsnr').prop("value", "NS/NR"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T14:18:47.470

我使用 smt 解决了同样的问题，例如：

```
$('.nsnr').attr('value', 'NS/NR'); 
```

# iphone - Auto layout and nested animation

> ID：15942332
> 
> 赞同：0
> 
> 时间：2013-04-11T06:46:16.460
> 
> 标签：iphone, ios, uiviewanimation, autolayout

I have following simple nested animation code intended for transition as in the attached image.

```
[UIView animateWithDuration:2.0f animations:^{
    CGRect frame = self.label.frame;
    frame.origin.y += 100;
    self.label.frame = frame;
} completion:^(BOOL finished) {
    [UIView animateWithDuration:2.0f animations:^{
        self.button.transform = CGAffineTransformMakeRotation(M_PI);
    }completion:^(BOOL finished) {
        //
    }];
}]; 
```

![intended animation transition](https://i.stack.imgur.com/8J0uW.png)

The view layout is defined in XIB file with auto layout. As IB automatically puts it, it has vertical constraint on both button and label.

In this case, the transition goes not as depicted in the attached image. It goes from State1 to State2, but **goes back to State1 briefly** and then goes to State3.

What I figured is that this is caused by the vertical constraint of the label. As I programmatically removed the constraint in before the animation, the animation started working as intended.

```
[self.view removeConstraint:self.labelConstraint]; 
```

What I want to know is if this is the **correct** way to do it. Some [post](https://stackoverflow.com/questions/13012748/working-with-constraints-in-interface-builder) suggests that removing constraint sometimes causes unpredicted behavior due to insufficient constraints to determine layout.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:59:29.933

Okay, my friend answered my question which made complete sense to me.

```
[UIView animateWithDuration:2.0f animations:^{
    CGRect frame = self.label.frame;
    frame.origin.y += 100;
    self.label.frame = frame;
} completion:^(BOOL finished) {

    ////////////////////////////////////
    self.labelConstraint.constant += 100;
    ////////////////////////////////////

    [UIView animateWithDuration:2.0f animations:^{
        self.button.transform = CGAffineTransformMakeRotation(M_PI);
    }completion:^(BOOL finished) {
        //
    }];
}]; 
```

Note that I am changing the constraint value to suit to the new frame, before the second animation starts. This way there will be sufficient auto layout.

Still waiting for other ways if someone have them!

# c++ - 复制构造函数不起作用？

> ID：15942334
> 
> 赞同：0
> 
> 时间：2013-04-11T06:46:20.990
> 
> 标签：c++, oop, copy-constructor

OOP 有点新（即 C 程序员转换为 C++）并且无法弄清楚为什么我的背包类中的数据成员是空的。我将一系列药水传递到我的背包，但数据成员却说 mType = ""（即什么都没有）。

我以前从未在程序中感到这种迷失。开始讨厌 OOP（即开玩笑……但这非常令人沮丧）。

**主文件**

```
#include <iostream>
#include "rogue.h"
#include "weapon.h"
#include "backpack.h"
#include "potion.h"
#include "coinpouch.h"

int main()
{
Potion myFavoritePotions[5];
myFavoritePotions[0].setName("love");
myFavoritePotions[1].setName("hate");
myFavoritePotions[2].setName("shrink");
myFavoritePotions[3].setName("grow");
myFavoritePotions[4].setName("disappear");
BackPack myFavoriteBackPack(myFavoritePotions);
Weapon myFavoriteWeapon("AK-47");
Weapon mySecretWeapon("Me-262");
Weapon myLeastFavoriteWeapon("Luger");
CoinPouch myFavoritePurse(6,5,4,3);
Rogue myFavoriteRogue("Cynic", myFavoriteWeapon, mySecretWeapon, myFavoriteBackPack, myFavoritePurse);

mySecretWeapon = myFavoriteWeapon;  

myFavoriteRogue.setOffHand(myLeastFavoriteWeapon);
//std::cout << myFavoriteRogue.getOffHand();

return 0;
} 
```

**药水.cpp**

```
#include <iostream>
#include "potion.h"

//Manager function definitions

//Default constructor
Potion::Potion()
{}

//Constructor
Potion::Potion(std::string name)
:mName(name)
{
std::cout << "Potion's constructor " << std::endl;
}

//Destructor
Potion::~Potion()
{
std::cout << "Potion's destructor " << std::endl;
}

//Copy constructor
Potion::Potion(const Potion & copy)
{
std::cout << "Potion's copy constructor " << std::endl;
}

//Overloaded assignment operator
Potion &Potion::operator= (const Potion & rhs)
{
std::cout << "Potion's overloaded assignment operator. " << std::endl;

return *this;
}

//Setters
void Potion::setName(std::string name)
{
mName = name;
}

//Getters
std::string Potion::getName()
{
return mName;
} 
```

**背包.cpp**

```
#include <iostream>
#include "backpack.h"

//Manager function definitions

//Default constructor
BackPack::BackPack()
{}

//Constructor
BackPack::BackPack(Potion Potions[])
{
for(int i = 0; i < 5; i++)
{
    mPotions[i] = Potions[i];
}
std::cout << "Backpack's constructor. " << std::endl;
}

//Destructor
BackPack::~BackPack()
{
std::cout << "Backpack's destructor. " << std::endl;
}

//Copy constructor
BackPack::BackPack(const BackPack & copy)
{
std::cout << "Backpack's copy constructor. " << std::endl;
}

//Overloaded assignment operator
BackPack &BackPack::operator=(const BackPack & rhs)
{
std::cout << "Backpack's assignment operator. " << std::endl;

return *this;
}

//Setters
void BackPack::setPotion(Potion Potions[])
{
for(int i = 0; i < 5; i++)
{
    mPotions[i] = Potions[i];
}
}

//Getters
Potion * BackPack::getPotion()
{
Potion * potionPointer = mPotions;
return potionPointer;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T06:49:30.617

您的复制构造函数不进行任何复制：

```
//Copy constructor
BackPack::BackPack(const BackPack & copy)
{
std::cout << "Backpack's copy constructor. " << std::endl;
} 
```

您的复制赋值运算符也没有：

```
//Overloaded assignment operator
BackPack &BackPack::operator=(const BackPack & rhs)
{
std::cout << "Backpack's assignment operator. " << std::endl;

return *this;
} 
```

一旦提供了自己的复制构造函数和复制赋值运算符，编译器生成的就会被禁止。如果你需要做一些复制，你必须实现它。

（当然，这适用于您的*所有*课程。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T06:48:43.500

如果您实现了复制构造函数和复制赋值运算符，那么您实际上必须*实现*复制。它不会为你完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T06:49:32.820

在调用复制构造函数时，您当然必须将值分配给要创建的对象......

```
Potion::Potion(const Potion & copy)
{
   //assign the elements from copy to your object here
   std::cout << "Potion's copy constructor " << std::endl;
} 
```

复制构造函数不会为您执行此操作。

# ruby-on-rails - 使用 Rmagick 的 Rails 应用程序，函数 from_blob 在 ImageMagick 更新后因 NoDecodeDelegateForThisImageFormat 而失败

> ID：15942341
> 
> 赞同：0
> 
> 时间：2013-04-11T06:46:45.747
> 
> 标签：ruby-on-rails, imagemagick, rmagick

我有一个在 rails 1.9.3 上运行的应用程序，最近我的服务器已更新并安装了新版本的 ImageMagick（v 6.8.0-7）。

在此之后，当调用 Magick::Image.from_blob() 时，我的应用程序开始抛出异常：

“Magick::ImageMagickError (NoDecodeDelegateForThisImageFormat `'@error/blob.c/BlobToImage/361):”

我将 Rmagick 更新到最新的 gem 版本（2.13.2），但没有解决问题

有没有人遇到同样的问题！在 ImageMagick 中发生的变化的日志中，与此无关，在 Rmagick 上也没有！

如果您有任何线索，请帮助！

一切顺利，

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:58:34.907

ImageMagick 可以使用某些标志进行编译，例如 TIFF 或 JPEG 支持。也许对某些文件类型的支持已移至您现在需要安装的单独包中？

如果是这种情况，您可能需要在安装后重新编译 rmagick gem。

# delphi - Delphi XE2 或更高版本中 TSQLQuery.TransactionLevel 的替换

> ID：15942344
> 
> 赞同：0
> 
> 时间：2013-04-11T06:47:01.167
> 
> 标签：delphi, transactions, delphi-xe2, firebird, dbexpress

我正在将程序从 Delphi 2005 转换为 Delphi XE2 或 XE3。
它使用带有 Firebird 数据库的 DbExpress。

该程序使用 TSQLQuery.TransactionLevel 来允许它有重叠的事务。
它依赖于这些重叠的事务。

（实际上有多个程序。它们都使用相同的代码来访问数据库。有几个并行运行并偶尔使用 COM 进行通信。它们每个都有自己的 TSQLConnection 并且数据库访问都来自主线程。其中一个程序运行在具有间歇性 RF 网络连接且能够从网络中断中恢复的设备）。

在 Delphi XE2 和 XE3 中，TSQLQuery 不再具有 TransactionLevel 属性。

在没有多个数据库连接的情况下，如何在 Delphi XE2 中获得重叠事务？如果没有其他选择，我将使用多个连接，但这不会是一个微不足道的改变。

请注意，我指的是重叠事务，而不是嵌套事务。这是一个示例，减去检查和 try-finallys。这适用于 Delphi 6 和 Delphi 2005。

```
procedure TForm1.Test7;
var SQLConnection: TSQLConnection;
    Transaction1, Transaction2: TTransactionDesc;
    Query1, Query2, Query3: TSQLQuery;
begin
SQLConnection := TSQLConnection.Create(nil);
InitialiseFirebirdConnection(SQLConnection);
SQLConnection.Open;

Transaction1.GlobalID := 0;
Transaction1.IsolationLevel := xilREADCOMMITTED;
Transaction1.CustomIsolation := 0;
Transaction1.TransactionId := 7;

Transaction2.GlobalID := 0;
Transaction2.IsolationLevel := xilREADCOMMITTED;
Transaction2.CustomIsolation := 0;
Transaction2.TransactionId := 8;

SQLConnection.StartTransaction(Transaction1);
SQLConnection.StartTransaction(Transaction2);

Query1 := TSQLQuery.Create(nil);
Query1.SQLConnection := SQLConnection;
Query1.SQL.Add('Update "WIDGET" Set "NAME" = ''AAA'' Where "WIDGETID" = 101');
Query1.TransactionLevel := Transaction1.TransactionId;
Query1.ExecSQL;
Query1.Free;

Query2 := TSQLQuery.Create(nil);
Query2.SQLConnection := SQLConnection;
Query2.SQL.Add('Update "WIDGET" Set "NAME" = ''BBB'' Where "WIDGETID" = 102');
Query2.TransactionLevel := Transaction2.TransactionId;
Query2.ExecSQL;
Query2.Free;

Query3 := TSQLQuery.Create(nil);
Query3.SQLConnection := SQLConnection;
Query3.SQL.Add('Update "WIDGET" Set "NAME" = ''CCC'' Where "WIDGETID" = 103');
Query3.TransactionLevel := Transaction1.TransactionId;
Query3.ExecSQL;
Query3.Free;

if Tran1CheckBox.Checked then
  SQLConnection.Commit(Transaction1)
else
  SQLConnection.Rollback(Transaction1);
if Tran2CheckBox.Checked then
  SQLConnection.Commit(Transaction2)
else
  SQLConnection.Rollback(Transaction2);

SQLConnection.Close;
SQLConnection.Free;
end; 
```

如果您在 XE2 帮助文件中查找“管理事务”，它仍然描述如何“......如果您将 TSQLConnection 与 InterBase 数据库一起使用，您可以通过设置其 TransactionLevel 来识别应用程序中具有特定活动事务的每个数据集属性。也就是说，在开始第二个事务后，您可以继续同时处理两个事务，只需将数据集与您想要的事务相关联即可。”

这是一个大型程序，所以我真的不想改变技术或进行重大的重新设计。我希望可能有其他方式设置事务的事务 ID，并将查询与特定事务相关联。

# maven - tiny mce js 抛出 maven 构建类型转换错误

> ID：15942349
> 
> 赞同：1
> 
> 时间：2013-04-11T06:47:16.777
> 
> 标签：maven, build, compiler-errors, tinymce, classcastexception

在尝试构建应用程序时，在 js 文件夹中包含 tiny mce 的 JS 文件时，出现以下错误：

```
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] org.apache.maven.project.MavenProject cannot be cast to java.lang.String
[INFO] ------------------------------------------------------------------------
[INFO] Trace
java.lang.ClassCastException: org.apache.maven.project.MavenProject cannot be cast to java.lang.String
        at org.codehaus.plexus.util.InterpolationFilterReader.read(InterpolationFilterReader.java:269)
        at org.codehaus.plexus.util.InterpolationFilterReader.read(InterpolationFilterReader.java:162)
        at java.io.Reader.read(Reader.java:123)
        at org.codehaus.plexus.util.IOUtil.copy(IOUtil.java:212) 
```

我不确定为什么包含一个 js 文件会引发这个奇怪的构建错误。

在这方面的任何帮助都非常受欢迎

瓦布哈夫

# html - 我需要两个数字并排动画从上到下，为什么需要职位：绝对动画

> ID：15942364
> 
> 赞同：0
> 
> 时间：2013-04-11T06:48:21.157
> 
> 标签：html, css, css-animations

我需要两个数字并排动画从上到下但它不起作用。如果我在 .f_circleG 类中定位：绝对，它的工作但不是并排的。另一个问题是为什么需要职位：绝对有动画。下面是我的 HTML 和 CSS 代码。

```
<style type='text/css'>

  ul, ul li { list-style:none; display:inline; }

 .f_circleG{
  position:absolute;
  background-color:#FFF;
  animation:f_fadeG 1.00s infinite;
 }

@-moz-keyframes f_fadeG {
   0%{ background-color:transparent; top:0px;}
   100%{ background-color:transparent; top:100%; }
}

</style>

</head>
<body>    
<div id="floatingCirclesG">
    <ul>
        <li  class="f_circleG">1</li>
        <li  class="f_circleG">2</li>
    </ul>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:02:24.300

职位：绝对

元素相对于它的第一个定位（非静态）祖先元素定位

试试这个代码

```
<ul>
<li  class="f_circleG">1</li>&ensp;&ensp;&ensp;&ensp;&ensp;
<li  class="f_circleG">2</li>
</ul> 
```

如果您不在动画中添加位置：绝对，则列表项与此处列表的祖先相比变为静态，因此动画将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:38:57.713

[http://jsfiddle.net/teZdz/](http://jsfiddle.net/teZdz/)

希望这能解决你的问题

**html**

```
<div id="floatingCirclesG">
    <ul>
      <li class="f_circleG">1</li>
      <li class="f_circleG">2</li>
    </ul>
  </div> 
```

**css**

```
ul, ul li { list-style: none; display: inline; }

#floatingCirclesG { height: 200px; }

.f_circleG { position: relative; display: inline-block; -webkit-animation: f_fadeG 1.00s infinite; }

@-webkit-keyframes f_fadeG { 
0% {top:0px;}
100% {top:100%;}
} 
```

# asp-classic - 在asp中创建动态文件夹

> ID：15942375
> 
> 赞同：-1
> 
> 时间：2013-04-11T06:48:58.813
> 
> 标签：asp-classic, ms-access-2000

我有一个 ASP 网页..在我有上传选项...如果用户输入发票号码，他们重定向到上传页面..他们从那里上传该特定发票的所有文件并将其保存在我在代码中给出的路径..

我现在需要的是我需要以用户输入的发票号的名称生成文件夹，所有上传的文档都将保存在该文件夹中。

我需要检查目录是否存在，如果不存在则创建它。但我正在努力解决如何在经典 ASP 中执行此操作。

非常感谢任何帮助

这是我的asp代码

```
Public Sub SaveToDisk(sPath)
        Dim oFS, oFile
        Dim nIndex

        If sPath = "" Or FileName = "" Then Exit Sub
        If Mid(sPath, Len(sPath)) <> "\" Then sPath = sPath & "\"

        Set oFS = Server.CreateObject("Scripting.FileSystemObject")
        If Not oFS.FolderExists(sPath) Then Exit Sub

        Set oFile = oFS.CreateTextFile(sPath & FileName, True)

        For nIndex = 1 to LenB(FileData)
            oFile.Write Chr(AscB(MidB(FileData,nIndex,1)))
        Next

        oFile.Close
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:44:34.630

要检查文件夹是否存在，如果不存在则创建它，您可以使用以下内容：

```
Dim oFS, oF
Set oFS = Server.CreateObject("Scripting.FileSystemObject")
If Not oFS.FolderExists(sPath) Then
    Set oF = fs.CreateFolder(sPath)
    Set oF = Nothing
End If
Set oFS = Nothing 
```

# android - 碎片元素重叠问题？

> ID：15942380
> 
> 赞同：0
> 
> 时间：2013-04-11T06:49:15.720
> 
> 标签：android, android-fragments, focus

我设计了一个使用全屏片段（A）的活动，它在屏幕上有一些按钮（如[http://i.stack.imgur.com/siQHT.png](http://i.stack.imgur.com/siQHT.png)）。

现在从这个片段（A）启动另一个全屏片段（B）。现在问题在这里，我仍然可以访问片段（A）的元素，焦点在两个片段中移动。

有谁知道在启动其他片段时如何限制父片段（即片段A）的访问？

**编辑：**

这是添加片段的代码：

```
private void addFragmentToStack(Fragment fragment) {
            logv(TAG, "addFragmentToStack", "");
            FragmentTransaction ft = getFragmentManager().beginTransaction();
            ft.add(R.id.llMain, fragment);
            ft.commit();
        } 
```

其中 llMain 属于 Activity 布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:47:02.100

尝试替换片段而不是添加新片段。

```
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.addToBackStack("someuniquestring");
ft.replace(R.id.llMain, fragment); // can add 3rd parameter for tag if you want to get this fragment later
ft.commit(); 
```

这将用新的片段替换旧的片段并将前一个事务添加到后退堆栈中，因此当按下“返回”时，前一个片段将被恢复。

# c# - 用c#动态生成xml

> ID：15942382
> 
> 赞同：-2
> 
> 时间：2013-04-11T06:49:19.567
> 
> 标签：c#, xml

我有 3 个实体作为目标。任务和提醒。对于每个实体，我都有单独的数据表。现在我想生成如下的xml

```
<PDPData>
  <Goal>
    <TypeId>300</TypeId>
    <NAME>Smart Goal #</NAME>
    <Task>
      <TypeId>11</TypeId>
      <NAME>Task1</NAME>
    </Task>
    <Task>
      <TypeId>12</TypeId>
      <NAME>Task2</NAME>
    </Task>
    <Reminder>
      <TypeId>11</TypeId>
      <NAME>Reminder1</NAME>
    </Reminder>
    <Reminder>
      <TypeId>12</TypeId>
      <NAME>Reminder2</NAME>
    </Reminder>
  </Goal>
</PDPData> 
```

我怎样才能做到这一点。我尝试使用下面的代码，但它只附加一个孩子，但我想附加并在目标范围内

```
XmlElement hedder = docConfig.CreateElement("Goal");
docConfig.DocumentElement.PrependChild(hedder);
docConfig.ChildNodes.Item(0).AppendChild(hedder);

// Create <installationid> Node
XmlElement installationElement = docConfig.CreateElement("TypeId");
XmlText installationIdText = docConfig.CreateTextNode(dtGoals.Rows[goalCount]["TypeId"].ToString());
installationElement.AppendChild(installationIdText);
hedder.AppendChild(installationElement);

// Create <environment> Node
XmlElement environmentElement = docConfig.CreateElement("NAME");
XmlText environText = docConfig.CreateTextNode(dtGoals.Rows[goalCount]["Name"].ToString());
environmentElement.AppendChild(environText);
hedder.AppendChild(environmentElement); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:30:11.023

```
[Serializable()]    //Set this attribute to all the classes that want to serialize
public class Employee : ISerializable 
{
    public int EmpId;
    public string EmpName;

    //Default constructor
    public Employee()
    {
        EmpId = 0;
        EmpName = null;
    }
}

 XmlSerializer serializer = new XmlSerializer(typeof(Employee));
 TextWriter writer = new StreamWriter(filename);
 Employee objEmp = new Employee();
 serializer.Serialize(writer, objEmp);
 writer.Close(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-11T06:52:46.627

```
using System; 
public class clsPerson {
     public string FirstName; 
     public string MI;
     public string LastName;
 } 

class class1 {
 static void Main(string[] args)
 { clsPerson p=new clsPerson(); p.FirstName = "Jeff"; p.MI = "A"; p.LastName = "Price"; System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(p.GetType()); x.Serialize(Console.Out, p); Console.WriteLine();
 Console.ReadLine(); } } 
```

抱歉格式化，从手机发布。

# java - Java EE 中的 Web 数据流

> ID：15942389
> 
> 赞同：6
> 
> 时间：2013-04-11T06:49:34.110
> 
> 标签：java, spring, jakarta-ee, spring-mvc, aspectj

我们有这样的设计：

![在此处输入图像描述](https://i.stack.imgur.com/0xJcI.png)

我们在 tomcat 上安装的服务有一个方法 getDatabaseData(String request) (RMI Client)，它使用核心上存在的（RMI 服务器实现）从数据库接收数据。

我们想做一些事情，我们在tomcat中安装的服务制作一个xml文件并将其发送给客户端：

我们已经考虑了一个解决方案：

*   首先使用 getDatabaseData(String request) 在我们的 tomcat 上制作整个 xml 文件，然后我们的用户可以使用指向它的链接获取参考并开始下载数据。

但是这个解决方案对我们来说没有任何信息，因为这个文件的大小太大了，如果我们想这样做，我们的 tomcat 服务器存储将很快被填满并崩溃，所以我们正在寻找实时流数据的解决方案给用户而不是创建整个文件。我的意思是一种在从 CORE 接收数据时在 xml 模板中将数据发送给用户的方法。

你有什么主意吗 ？

（顺便说一句，tomcat 上的 Web 服务是使用 Spring MVC 和 Spring Security 编写的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:27:37.007

我可以给你一些我当前项目中的代码，我们在 struts 操作中返回一个文件：

```
response.setContentType("application/octet-stream");
response.setHeader("Content-Disposition", "attachment;filename=\"" + fileName + "\"");
ServletOutputStream out = response.getOutputStream();
out.write(file); 
```

这是你想要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:56:25.480

使用@Noofiz 代码，我编写了这段代码来测试这个功能并且对我有用！

我们可以从文件中读取并按时发送给用户，让用户下载文件！

1）我打印了“结束！” 确保文件在缓冲时按时发送给用户，而不是先完成缓冲，然后将其发送给用户！

2）检查下载的文件和主文件md5，它们相似。

这是我的 servlet 代码：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    InputStream is = new FileInputStream("/home/Mehdi/Desktop/log.log");
    response.setContentType("application/octet-stream");
    ServletOutputStream out = response.getOutputStream();
    int i;
    byte[] buffer = new byte[10 * 1024];

    while ((i = is.read(buffer)) != -1) {
        if (i != 10240) {
            for (int j = 0; j < i; j++) {
                out.write(buffer[j]);
            }
        } else {
            out.write(buffer);
        }
    }
    System.out.println("End!");
} 
```

# c# - 如何从 c# windows 应用程序返回一些值

> ID：15942390
> 
> 赞同：0
> 
> 时间：2013-04-11T06:49:46.320
> 
> 标签：c#, process, windows-applications

我正在为一些内部工作开发一个 Windows 窗体应用程序。构建此应用程序后，我需要从另一个应用程序调用此 exe 文件。并且需要得到进程响应。那么谁能告诉我如何从应用程序返回一些值，以及如何从第一个应用程序执行的另一个应用程序中读取该响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:55:18.440

如果这是一个命令行应用程序，您可以使用命令行参数读取输入数据并在标准输出设备上发送响应。

如果是 Windows 应用程序，您可以使用命名管道或 WCF 等。如果这很复杂，您可以简单地将输出写入日志文件，然后从其他应用程序读取该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:52:35.323

易于使用：

[http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx](http://msdn.microsoft.com/en-us/library/system.environment.exit.aspx)

Environment.Exit(codetoreturn);

使用非零数字表示错误。在您的应用程序中，您可以在枚举中定义自己的错误代码，并根据场景返回相应的错误代码。例如，返回值 1 表示所需文件不存在，返回值 2 表示文件格式错误。有关 Windows 操作系统使用的退出代码列表，请参阅 Windows 文档中的系统错误代码。

# android - “findViewById”在 ViewPagerIndicator 片段中不起作用

> ID：15942397
> 
> 赞同：0
> 
> 时间：2013-04-11T06:50:42.087
> 
> 标签：android, android-fragments, viewpagerindicator, findviewbyid

您好，我已设法通过将 XML 文件扩展为片段将它们绑定到 ViewPagerIndicator，但我无法使用基本的 findViewById 代码将我的按钮引用到代码中。这是我的代码，因为有人可以帮忙

```
 package com.example.sliding;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;

public class twoey extends Fragment {

    Button lol;

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View v = inflater.inflate(R.layout.two, null);
        return v;

        lol = (Button) findViewById (R.id.button1);

    }
} 
```

但是，无论我尝试做什么，我都无法得到***findViewById***字的红色小线，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T06:52:14.297

您的代码有 2 个错误：

1.  `return v;`必须是方法的最后一行，之后的任何一行都不能运行！**无法访问**，因此存在编译器错误！

2.  这条线 `lol = (Button) findViewById (R.id.button1);`必须是`lol = (Button) v.findViewById (R.id.button1);`，否则您将拥有一条`NullPointerException`，因为`button1`它是活动的一部分，`View v`而不是活动。

正确的代码是：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.two, null);

    lol = (Button) v.findViewById (R.id.button1);
    return v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:57:43.157

覆盖`onViewCreated()`. 像这样：

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
super.onViewCreated(view, savedInstanceState);
    lol = (Button) getView().findViewById (R.id.button1);

    .... // ANY OTHER CASTS YOU NEED TO USE IN THE FRAGMENT
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:55:19.190

Java 编译器根本无法访问`return`语句之后编写的代码。`return`意味着您已经完成了该方法并且您正在从中返回一个值，因此在此之后执行某些操作是没有意义的。因此，您需要在调用之前简单地移动`lol = (Button) findViewById (R.id.button1)`（实际上应该称为 as `lol = (Button) v.findViewById (R.id.button1)`，因为`v`是您的根视图）`return v`，代码将正确编译。希望这可以帮助。

# php - Magento 测试自动化框架 (MTAF)

> ID：15942398
> 
> 赞同：2
> 
> 时间：2013-04-11T06:50:47.340
> 
> 标签：php, magento, selenium, phpunit, mtaf

magento 站点设置在 machineA 上。在 machineB 上设置了测试框架和 selenium。测试在 machineB 上运行良好。但是是否可以从另一台机器C 或浏览器运行测试。这实际上是供不同的测试人员调用和运行测试。

有人厌倦了MTAF吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T11:10:40.713

MTAF 工作正常。如果有一个正在运行的节点（Selenium），则可以从 machineC 运行测试。您可以尝试不同的 phpunit 文件并运行不同的实例。示例：'runtests.sh mage:googlechrome:phpunit1.xml, enterprise:firefox, mage:firefox' 将在同一台机器上同时执行 3 个测试实例

# proxy - 由于代理，DocPad 安装挂起

> ID：15942403
> 
> 赞同：0
> 
> 时间：2013-04-11T06:51:16.820
> 
> 标签：proxy, docpad

该`docpad install`命令挂起可能是由于我的公司代理。

只有当我像这样设置代理时，Npm 才能正常运行：

```
npm config set http-proxy http://proxy.example.com:8080
npm config set https-proxy http://proxy.example.com:8080 
```

DocPad 有类似的配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:19:59.287

The `docpad install` command is exactly the same as `npm install` in recent releases, so you can just do that if it works and have no worries about not using `docpad install`.

As a side note, is there any documentation still referencing `docpad install`?

# python - sentiwordnet python中的词义消歧

> ID：15942406
> 
> 赞同：1
> 
> 时间：2013-04-11T06:51:27.483
> 
> 标签：python, nlp, wordnet, sentiment-analysis, word-sense-disambiguation

我目前正在研究 Twitter 中的情绪分析。我想结合预定义的词典资源，如 sentiwordnet 极性分数。然后进行机器学习。问题是在得到sentiwordnet的正确分数上，以前的工作总是简单地通过词义的正负极性总分来选择。我的意思是，例如“mad”这个词可以出现 3 次否定词和 2 次肯定词。以前的大部分工作都会自动平均每个极性。所以我想在得到分数之前消除单词的歧义，这样我们就可以真正使用应该的 sentiwordnet。我在想通过比较目标句和光泽句的相似度..有什么方法可以比较它吗？你认为它会起作用吗？如果没有，请分享您的想法..

我对这个领域和新手python程序员完全陌生，所以我真的需要你的建议..谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:48:33.480

这是一个词义消歧问题，要让您的系统在任何给定的多义词上正常工作将非常困难。您可以尝试（组合）几种方法来确定单词的正确含义：

1.  位置标记将减少候选感官的数量。

2.  WordNet 中句子的余弦相似度和每个词义的光泽度。

3.  使用[SenseRelate](http://senserelate.sourceforge.net/)：它测量目标词与其周围词的不同意义之间的“WordNet 相似度”。

4.  使用[WordNet Domains](http://wndomains.fbk.eu/index.html)：数据库包含分配给每个 WordNet 意义的领域标签，例如“音乐”代表“摇滚”的音乐意义。无需比较在注释和句子中找到的实际单词，您可以比较在它们中找到的域标签。

5.  不是通过在其中找到的单词本身来表示光泽和句子，而是作为单词的平均共现向量。可以使用大型文本语料库构建此类向量，最好来自与您正在消除歧义的文本相同的应用程序域。有多种技术可以细化此类共现向量（tf-idf、PCA、SVD），您应该单独阅读它们。

如果您的文本来自非常专业的领域（例如法律），那么准确性会更高。但是，如果您使用通用语言文本，那么您只能期望在不高度多义的单词上具有良好的准确性（如果它们在 WordNet 中不超过 3-4 种意义）

# javascript - html表格列调整大小

> ID：15942408
> 
> 赞同：0
> 
> 时间：2013-04-11T06:51:30.900
> 
> 标签：javascript, jquery, html, css

我使用 ASP.NET MVC 生成一个 HTML 表。表格的布局信息存储在数据库中，因此在渲染表格后，我进行 AJAX 调用以获取此信息（列宽、可见性、显示顺序等）。之后，我为每列设置宽度。到目前为止，一切都很好。它工作正常。我还编写了用于调整列大小的代码（处理 mousedown、mousemove 等）。它为列设置了新宽度，但行为怪异。（调整大小会影响所有列等）当我没有首先从服务器获取宽度信息时，（这不是表头的初始宽度值）它可以正常工作。

综上所述，如果列的宽度值是预设的，调整大小会出错，如果不是，它会很好。任何想法？

另一个问题，我需要这样的功能，当我调整列的大小时，我希望它只影响放在它右侧的列。目前，它会更改所有列。如何修复左侧的列？

我生成的 HTML（有点简化）如下所示：

```
<table id="jobTableActual" width="850px" class="grid_container">
<tbody><tr>
    <th width="50px">
        <span class="create_button"></span>
    </th>
    <th id="colId" class="table_column_invisible header-sortable" width="75" style="display: none;">
        <div class="table_column_header_text">Id</div>
        <div class="table_column_resize_handle"></div>
    </th>
    <th id="colCode" class="header-sortable" width="77" style="">
        <div class="table_column_header_text">Code</div>
        <div class="table_column_resize_handle"></div>
    </th>
    <th id="colName1" class="header-sortable header-sorted-desc" width="106" style="">
        <div class="table_column_header_text">Name</div>
        <div class="table_column_resize_handle"></div>
    </th>
    <th id="colDescription1" class="header-sortable" width="107" style="">
        <div class="table_column_header_text">Description</div>
        <div class="table_column_resize_handle"></div>
    </th> 
    <th id="colActive" class="header-sortable" width="75" style="">
        <div class="table_column_header_text">Active</div>
        <div class="table_column_resize_handle"></div>
    </th> 
</tr>
    <tr class="">
        <td>
            <span class="edit_button"></span>
            <span class="delete_button"></span>
        </td>
        <td class="table_column_invisible">
            66
        </td>
        <td>
            J0018
        </td>
        <td>
            Job 18
        </td>
        <td>
            67
        </td> 
        <td align="center">
            <input checked="checked" class="check-box" disabled="disabled" type="checkbox">
        </td> 
    </tr>
<tr class="summary_row"><td colspan="100%">Showing 1 to 10 records of 10 total.</td></tr> 
```

我调整列大小的 javascript 代码如下所示：

```
 // create table column resize bar and hide it.
        var $resizeBar = $('<div></div>').addClass('table_column_resize_bar')
                                          .css('height', $table.height() - $summaryRow.height())
                                          .appendTo($table)
                                          .hide();

        // for each table column header
        $('#' + element.id + 'Actual th').each(function () {

            var resizeHandle = $(this).find('.table_column_resize_handle');
            var $nextColumnHeader = $(this).next();
            //var $currentColumnHeader = $(this);

            resizeHandle.mousedown(function (mouseDownEvent) {
                $('#status').html('Status : Mouse down');

                mouseDownEvent.preventDefault();
                mouseDownEvent.stopPropagation();

                // start resizing.
                resizing = true

                // save current mouse click position.
                mouseMoveDelta = 0;
                mouseCurrentX = mouseDownEvent.pageX;
                mouseCurrentY = mouseDownEvent.pageY;

                // save initial x coordinate to calculate total resize amount.
                initialX = mouseCurrentX;

                // adjust resize bar position and show it.
                $resizeBar.css('left', $nextColumnHeader.offset().left);
                $resizeBar.css('top', $nextColumnHeader.offset().top);
                $resizeBar.show();

                // handle mouse move element.
                $('#' + element.id + 'Actual').mousemove(function (mouseMoveEvent) {

                    // if user didn't left click then do nothing.
                    if (!resizing) return;

                    $currentColumnHeader = resizeHandle.parent();

                    // calculate the difference of new position (mouseMoveEvent.pageX) and current position (mouseCurrentX).
                    mouseMoveDelta = Math.abs(mouseMoveEvent.pageX - mouseCurrentX);

                    if (mouseMoveEvent.pageX > mouseCurrentX) { // move right

                        $('#status').html('Status : Move right');
                        $resizeBar.css('left', $resizeBar.offset().left + mouseMoveDelta);
                    }
                    else { // move left

                        $('#status').html('Status : Move left');
                        $resizeBar.css('left', $resizeBar.offset().left - mouseMoveDelta);
                    }

                    // update current position.
                    mouseCurrentX = mouseMoveEvent.pageX;
                    mouseCurrentY = mouseMoveEvent.pageY;

                    $('#currentX').html(mouseCurrentX);
                    $('#currentY').html(mouseCurrentY);
                });

                // handle mouse up event for ending resize operation.
                $(document).mouseup(function (mouseUpEvent) {
                    mouseUpEvent.preventDefault();
                    mouseUpEvent.stopPropagation();

                    if (!resizing) return;

                    resizing = false;

                    $('#' + element.id + 'Actual').unbind('mousemove');

                    $('#status').html('Status : Mouse up');

                    var width = parseInt($currentColumnHeader.width());
                    $currentColumnHeader.attr('width', width + (mouseUpEvent.pageX - initialX));

                    $resizeBar.hide();
                    $(document).unbind('mouseup');
                });

            });
        }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T12:39:22.697

我猜 `resizing = true`需要一个分号。

# jsp - 在netbeans中更改jsp页面的链接

> ID：15942409
> 
> 赞同：0
> 
> 时间：2013-04-11T06:51:38.353
> 
> 标签：jsp, netbeans

我已经创建了一个jsp 页面hello.jsp。运行文件时，生成的链接是

```
 http://localhost:8080/Project1/hello.jsp. 
```

如果我想要那个链接

```
 http://localhost:8080/Project1/welcome/hello.jsp 
```

我应该怎么办？我被这个困住了。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:56:18.337

这样的事情可能是，

```
 <servlet>
           <servlet-name>MainJSP</servlet-name>
           <jsp-file>hello.jsp</jsp-file>
       </servlet>
    <servlet-mapping>
        <servlet-name>MainJSP</servlet-name>
        <url-pattern>welcome/hello.jsp</url-pattern>
    </servlet-mapping> 
```

或者您可以直接将您的 jsp 放在欢迎文件夹中。

**注意**：将 JSP 文件放在 WEB-INF 中是一种很好的做法。

# sql - 如何仅从 SQL Server 2005 中的查询中获取服务器的 IP 地址？

> ID：15942413
> 
> 赞同：2
> 
> 时间：2013-04-11T06:51:52.937
> 
> 标签：sql, sql-server, sql-server-2005

如何仅从 SQL Server 2005 中的查询中选择服务器的 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:19:07.467

尝试这个：

```
SELECT CONNECTIONPROPERTY('local_net_address') AS local_net_address, 
```

或者：

```
SELECT SERVERPROPERTY(N'MachineName'); 
```

或者：

```
SELECT @@SERVERNAME; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:54:31.690

在这里，您可以借助函数：

```
CREATE FUNCTION [dbo].[GetCurrentIP] ()
RETURNS varchar(255)
AS
BEGIN
    DECLARE @IP_Address varchar(255);

    SELECT @IP_Address = client_net_address
    FROM sys.dm_exec_connections
    WHERE Session_id = @@SPID;

    Return @IP_Address;
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T21:18:08.073

这是我找到的最好的解决方案，希望对你有帮助

```
SELECT SERVERNAME = CONVERT(NVARCHAR(128),SERVERPROPERTY('SERVERNAME'))   
,LOCAL_NET_ADDRESS AS 'IPAddressOfSQLServer'  
,local_tcp_port  AS 'PortNumber' 
 FROM SYS.dm_exec_connections 
 WHERE local_net_address IS NOT NULL
 AND session_id IS NOT NULL
 GROUP BY LOCAL_NET_ADDRESS,local_tcp_port 
```

# javascript - 使用jquery复制表行并插入

> ID：15942419
> 
> 赞同：0
> 
> 时间：2013-04-11T06:51:59.153
> 
> 标签：javascript, jquery

我有这个小提琴[http://jsfiddle.net/CbRHu/](http://jsfiddle.net/CbRHu/) ..SO 基本上我在这里要做的是当最后一行的数据选择即下拉列表选项值更改时我想创建一个新行并复制的值最后一行像所有 td 和内部的东西一样放入这个新行并将其附加到表中，然后当新创建的行的最后一行发生更改时再次创建另一个新行..知道如何做到这一点..

```
<table id="Main">
   <tr>
    <TD>
        <SELECT name=ctl00$m$g_c10b6cde_8531_45b1_aee8_b49b773919bf$ctl16>
          <OPTION value=1>WCF</OPTION>
          <OPTION value=2>ASP.Net</OPTION> 
          <OPTION value=3>HTML</OPTION> 
          <OPTION value=4>JS</OPTION> 
          <OPTION selected value=5>client</OPTION>
        </SELECT>
   </TD>
   <TD>
       <SELECT name=ctl00$m$g_c10b6cde_8531_45b1_aee8_b49b773919bf$ctl17> 
          <OPTION selected value=Begineer>Begineer</OPTION> 
          <OPTION value=Intermediate>Intermediate</OPTION> 
          <OPTION value=Expert>Expert</OPTION> 
          <OPTION value=Geek>Geek</OPTION>
       </SELECT>
    </TD>
  <TD style="COLOR: white">18</TD>   

<TR>
  <TD>
      <SELECT id=ctl00_m_g_c10b6cde_8531_45b1_aee8_b49b773919bf_TechCellDS onchange="Add()"       name=ctl00$m$g_c10b6cde_8531_45b1_aee8_b49b773919bf$TechCellDS>
        <OPTION value=1>WCF</OPTION> 
        <OPTION value=2>ASP.Net</OPTION> 
        <OPTION selected value=3>HTML</OPTION>
        <OPTION value=4>JS</OPTION>
        <OPTION value=5>client</OPTION> 
        <OPTION value=Select>Select</OPTION>
       </SELECT>
   </TD>
      <TD>
       <SELECT name=ctl00$m$g_c10b6cde_8531_45b1_aee8_b49b773919bf$ctl17 id=ctl00_m_g_c10b6cde_8531_45b1_aee8_b49b773919bf_TechCellDS onchange="Add()"> 
          <OPTION selected value=Begineer>Begineer</OPTION> 
          <OPTION value=Intermediate>Intermediate</OPTION> 
          <OPTION value=Expert>Expert</OPTION> 
          <OPTION value=Geek>Geek</OPTION>
       </SELECT>
    </TD>
    <tr>    
</table> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:59:58.793

试试这个-

```
function addRow()
            {
                var n=$("#elementCount").val();
                var row=$('#rowid'+(n-1));
                row.clone(true).attr('id','rowid'+(n)).insertAfter(row);

                n++;

                $("#elementCount").val(n);
            } 
```

elementCount=包含行数的隐藏字段的id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:14:25.467

这是javascript：

```
var main = $('#Main');
var template = $('#Main').find("tr:first").html().toString();

function addTemplate() {
    main.find("tr:last").after('<tr>' + template + '</tr>');
}

$('.last:last').live('change', function () {
       addTemplate();
}) 
```

还有一个工作示例：http: [//jsfiddle.net/basarat/CbRHu/12/](http://jsfiddle.net/basarat/CbRHu/12/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:44:34.123

这是您问题的答案

```
$(document).ready(function () {
    function addrow() {
        var newtr = $('#Main tr').eq(-1).html();
        $('#Main tbody').append('<tr>' + newtr + '</tr>');
    }
    $(document).on("change", $('#Main tr:last select'),

    function () {
        addrow();

    });
}); 
```

[JS 小提琴链接](http://jsfiddle.net/rahularyansharma/CbRHu/15/)

# clojure - 是否有内置的 clojure 函数来生成“应用”函数

> ID：15942423
> 
> 赞同：1
> 
> 时间：2013-04-11T06:52:08.480
> 
> 标签：clojure

我发现

```
(defn applied [fn] #(apply fn %)) 
```

是一个非常常见的函数转换实用程序。clojure stdlib 中是否有内置实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:18:50.903

我认为这符合您的描述：

```
(partial apply fn) 
```

# msbuild - 项目元数据不覆盖属性元数据

> ID：15942432
> 
> 赞同：1
> 
> 时间：2013-04-11T06:52:42.120
> 
> 标签：msbuild

如何获取项目的元数据以覆盖项目定义元数据？

我在我的 vcxproj 中有：

```
<ItemGroup>
  <PNL Include="some file">
    <OutputDirectory>y</OutputDirectory>
  </PNL>
</ItemGroup> 
```

然后我有一个 .props 文件：

```
<PNL>
  <OutputDirectory>x</OutputDirectory>
  <CommandLineTemplate>%(OutputDirectory)</CommandLineTemplate>
</PNL> 
```

还有一个 .target 文件：

```
<PNL>
  OutputDirectory="%(PNL.OutputDirectory)"
  Outputs="%(PNL.Outputs)"
  CommandLineTemplate="%(PNL.CommandLineTemplate)"
</PNL> 
```

所以我希望 Items 元数据会覆盖 .props 文件中的元数据，这样命令行就等于： y 但视觉工作室给了我： x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:40:46.393

项目元数据是特定于每个特定**项目**的东西，而不是整个**项目数组**。*您可以将其视为为item array*中的每个特定项目分配*的*单独*字典*。

 **因此，在您首先在 .prop 文件中进行采样时，您试图将特定字典分配给“空”项目数组，然后在 vcxproj 文件中，您只是用自己的元数据定义新项目，并使用它。

您不能为所有“未来”项目定义“默认”元数据。

您可以做的是在 .prop 文件中创建单独的目标，这将为每个**已定义**的项目添加元数据，并在需要时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:07:46.383

根据：http: [//msdn.microsoft.com/en-us/library/ms171453.aspx#BKMK_Transforming](http://msdn.microsoft.com/en-us/library/ms171453.aspx#BKMK_Transforming)

在“项目定义”下：

> 从 .NET Framework 3.5 开始，您可以使用 ItemDefinitionGroup 元素将默认元数据添加到任何项目类型。与众所周知的元数据一样，默认元数据与您指定的项目类型的所有项目相关联。您可以显式覆盖项目定义中的默认元数据。

我在做什么不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T03:04:37.187

我已经解决了这个问题。而不是将 CommandLineTemplate 放在 .props 文件中，并让 .target 文件引用 %(PNL.CommandLineTemplate)

我只是将命令放在目标文件中：CommandLineTemplate="%(PNL.OutputDirectory)"**

# actionscript-3 - 如何在flex中更改弹出窗口的背景颜色

> ID：15942436
> 
> 赞同：0
> 
> 时间：2013-04-11T06:52:50.507
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

我开发了一个应用程序，其中包含几个弹出窗口。每当弹出窗口出现时，弹出窗口的背景都会变亮，有什么方法可以使弹出窗口背景变暗。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:31:41.233

如果您指的是 Alert 组件，则可以执行以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" 
           creationComplete="Alert.show('Hello!')">
<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";
    @namespace mx "library://ns.adobe.com/flex/mx";

    mx|Alert {
        backgroundAlpha: 0.4;
        backgroundColor: #00ff00;
    }
</fx:Style>

<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
    ]]>
</fx:Script>

</s:Application> 
```

//结果

![在此处输入图像描述](https://i.stack.imgur.com/HtdLR.png)

**//编辑**

如果您想使用自定义组件，它可以如下所示：

//MyAlert.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx" width="175" height="100">
<fx:Script>
    <![CDATA[
        import mx.managers.PopUpManager;

        protected function onOkClick(event:MouseEvent):void
        {
            PopUpManager.removePopUp(this);
        }
    ]]>
</fx:Script>

<s:Rect top="0" bottom="0" left="0" right="0">
    <s:fill>
        <s:SolidColor color="0x00ff00" alpha="0.4"/>
    </s:fill>
</s:Rect>

<s:VGroup horizontalAlign="center" width="100%" height="100%">
    <s:Spacer height="10"/>
    <s:Label text="Hello!"/>
    <s:Button label="Ok" click="onOkClick(event)"/>
</s:VGroup>
</s:TitleWindow> 
```

从应用程序调用它：

```
var myAlert:MyAlert = new MyAlert();

PopUpManager.addPopUp(myAlert, this, true);
PopUpManager.centerPopUp(myAlert); 
```

//结果

![在此处输入图像描述](https://i.stack.imgur.com/9sG4H.png)

# sql - T-SQL 等价于 oracle sql where 具有多列的子句

> ID：15942437
> 
> 赞同：5
> 
> 时间：2013-04-11T06:52:50.960
> 
> 标签：sql, sql-server, oracle, tsql, row-value-expression

让我们看一下完美运行的 Oracle SQL 示例：

样本数据：

```
SQL> create table test (a number, b number);
SQL> insert into test values(1, 1);
SQL> insert into test values(1, 2);
SQL> insert into test values(1, 3);
SQL> insert into test values(1, 4);
SQL> insert into test values(1, 5);
SQL> insert into test values(2, 1);
SQL> insert into test values(2, 2);
SQL> insert into test values(2, 3);
SQL> insert into test values(2, 4);
SQL> insert into test values(2, 5);
SQL> insert into test values(4, 1);

SQL> select * from test;

         A          B
---------- ----------
         1          1
         1          2
         1          3
         1          4
         1          5
         2          1
         2          2
         2          3
         2          4
         2          5
         4          1 
```

询问：

```
SQL> select * from test where (a, b) in (select 1, 4 from dual);

         A          B
---------- ----------
         1          4 
```

这是 sql-fiddle：[http ://www.sqlfiddle.com/#!4/8375e/3/0](http://www.sqlfiddle.com/#!4/8375e/3/0)

简单的问题：上面的“where (a, b)”子句在 MS SQL 中是否有任何等价物？我一直在谷歌、MS Docs 中四处寻找，到目前为止什么都没有……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:04:09.700

虽然 SQL Server 有一个[`Table Value Constructor`](http://technet.microsoft.com/en-us/library/dd776382.aspx)可用于某些用例的，但 SQL Server 不支持 SQL 标准行值表达式和从行值表达式派生的谓词以供一般使用（目前）。您将不得不诉诸使用等效`EXISTS`子句的半连接子查询：

这个：

```
select * from test where (a, b) in (select 1, 4 from dual); 
```

相当于这个（参见[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/69171/14)）：

```
select * from test where exists (
  select * from (
    select 1, 4 -- Replace with "real" subselect
  ) t(a, b)
  where test.a = t.a and test.b = t.b
) 
```

或者，更一般地说，通过使用公共表表达式（参见[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/69171/6)）：

```
with t(a, b) as (
  select 1, 4 -- Replace with "real" subselect
)
select * from test where exists (
  select * from t
  where test.a = t.a and test.b = t.b
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:56:56.543

下面的查询怎么样，它在 sql server 中支持；我猜想`a=1 and b=4`在 sql server 中给出与 oracle 查询相同的结果。：

```
select 
    * 
from 
    test 
where 
    a=1 and 
    b=4; 
```

# terminal - 在命令行上显示“Canopy”

> ID：15942438
> 
> 赞同：5
> 
> 时间：2013-04-11T06:52:53.210
> 
> 标签：terminal, osx-snow-leopard, enthought, canopy

我有一个基本的终端问题。我刚刚在 Snow Leopard 上安装了 enthought 的 Canopy for Python，并且（Canopy 64bit）在我在命令行上工作时不断出现。

EX: (Canopy 64bit) Macbook~[用户名]$

我试过编辑我的 bashrc 文件，但无济于事。

bashrc 目前有这个：

```
# System-wide .bashrc file for interactive bash(1) shells.
if [ -z "$PS1" ]; then
   return
fi

PS1="Macbook~\u\$"
# Make bash check its window size after a process completes
shopt -s checkwinsize 
```

--

有什么办法可以阻止“（Canopy 64bit）”的显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T08:03:38.400

详细说明以前的答案： Canopy 基于 3 层系统，第 0 层包含 Canopy GUI 工作的最低限度；第 1 层包含所有“系统”包，这些包与 Canopy 一起分发，并且可能会在新版本出现时更新；最后，第 2 层是“用户”环境，用户可以在其中安装他们喜欢的任何软件包。这样一来，如果用户安装了破坏 Canopy 的软件包，可能总是会退回到第 1 层，甚至第 0 层来进行系统重置。

这三层是使用流行的库管理的，[`virtualenv`](http://www.virtualenv.org/en/latest/). 在[`virtualenv`](http://www.virtualenv.org/en/latest/)中，您可以使用自己的一组库创建独立的 Python 环境。例如，如果您正在开发多个应用程序，每个应用程序都需要相互冲突的包，您可以在单独的“虚拟环境”中开发它们。使用[`virtualenv`](http://www.virtualenv.org/en/latest/)，Canopy 能够做到这一点：您可能有多个“用户”环境（尽管该功能尚未通过 GUI 公开）。

一个人使用它的“激活”脚本来激活一个虚拟环境，Canopy 在该`.bash_profile`行中所做的

`~/Library/Enthought/Canopy_64bit/User/bin/activate`

正如 DJon 指出的那样。

默认情况下，`virtualenv`修改您的 bash 提示，以便您可以记住您所在的虚拟环境，这就是您看到“（Canopy 64bit）”提示的原因。要摆脱它，您可以从 中删除该行`.bash_profile`，但这意味着您必须手动将系统指向正确的 python 可执行文件和正确的库。

punchagan 解决方案只是取消激活默认`virtualenv`提示，使 Canopy 虚拟环境本身完好无损：

`VIRTUAL_ENV_DISABLE_PROMPT=true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:50:07.560

它在 .bash_profile 中。但是，一旦您将其删除，您可能必须注销并重新登录才能生效。

安装时有一个选项可以使 Canopy 成为您的默认 python 环境。不幸的是，似乎没有办法在应用程序设置中更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T21:33:28.377

注释掉第 56--70 行的 if 子句

~/Library/Enthought/Canopy_64bit/User/bin/activate

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T18:38:15.320

要摆脱对 bash 提示的不必要添加，请关闭 Canopy，然后
在文本编辑器中打开 ~/Library/Enthought/Canopy_64bit/User/bin/activate。注释掉如下行（这些在原始文件中没有被注释掉）：

```
#if [ -z "$VIRTUAL_ENV_DISABLE_PROMPT" ] ; then
#    _OLD_VIRTUAL_PS1="$PS1"
#    if [ "x(Canopy 64bit) " != x ] ; then
#   PS1="(Canopy 64bit) $PS1"
#    else
#    if [ "`basename \"$VIRTUAL_ENV\"`" = "__" ] ; then
#        # special case for Aspen magic directories
#        # see http://www.zetadev.com/software/aspen/
#        PS1="[`basename \`dirname \"$VIRTUAL_ENV\"\``] $PS1"
#    else
#        PS1="(`basename \"$VIRTUAL_ENV\"`)$PS1"
#    fi
#    fi
#    export PS1
#fi 
```

现在关闭您的 bash 会话并重新启动它。提示现在将恢复正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-24T17:51:00.727

编辑激活脚本就像 Arkog 回答的那样工作，但是如果我刚刚注释掉该行，我会得到类似的结果：

-bash：/Users//Library/Enthought/Canopy_64bit/User/bin/activate：第 60 行：意外标记附近的语法错误`else' -bash: /Users/<username>/Library/Enthought/Canopy_64bit/User/bin/activate: line 60:` else'

所以我发现将那行替换为：

$PS1 = $PS1

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-23T17:05:51.803

您不需要完全注释掉 ~/Library/Enthought/Canopy_64bit/User/bin/activate 中的这些行。我刚刚注释掉了这一行

```
 #PS1="(Canopz 64bit) $PS1" 
```

并将其替换为

```
 PS1="$PS1" 
```

所以你只需让 Canopy 做它必须做的事情，但去掉提示中烦人的额外文本。

最好的。

# java - 通过ajax在servlet中发送多个参数

> ID：15942439
> 
> 赞同：0
> 
> 时间：2013-04-11T06:53:14.370
> 
> 标签：java, ajax

```
 function getXmlHttpRequestObject()
            {
                var xmlHttp = false;
                if (window.XMLHttpRequest)
                {
                    return new XMLHttpRequest(); //To support the browsers IE7+, Firefox, Chrome, Opera, Safari
                }
                else if(window.ActiveXObject)
                {
                    return new ActiveXObject("Microsoft.XMLHTTP"); // For the browsers IE6, IE5 
                }
                else
                {
                    alert("Error due to old verion of browser upgrade your browser");
                }
            }

            var xmlhttp = new getXmlHttpRequestObject(); //xmlhttp holds the ajax object

            function servletPost() {
                if(xmlhttp) { 
                   var txt = document.getElementById("txtname");
                    var txtname=document.URL;
                    xmlhttp.open("POST","ServletPost",true);
                    xmlhttp.onreadystatechange = handleServletPost;
                    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                    xmlhttp.send("txtname=" + txtname); 

                }
            }

            function handleServletPost() {
                if (xmlhttp.readyState == 4) {
                    if(xmlhttp.status == 200) {
                        document.getElementById("message").innerHTML=xmlhttp.responseText; 
                    }
                    else {
                        alert("Ajax calling error");
                    }
                }
            } 
```

这是我的代码函数 servletPost() 正在将数据发送到 servlet 但只有 txtname 没有其他值会发送到 servlet 我该如何解决它请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:01:50.010

添加变量中的所有参数并发送。前任。

```
var params = "txtname=" + txtname + "&name=user";
xmlhttp.send("txtname=" + txtname); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:27:50.757

在您的代码中，我只看到您只发送一个参数 txtname。

如果要发送更多参数，则在其间添加“&”。

```
params = "txtname=" + txtname + "&txt=" + txt; 
```

# c# - 通过 Youtube api 将视频上传到 Youtube 导致 WebException - (500) 内部服务器错误

> ID：15942440
> 
> 赞同：1
> 
> 时间：2013-04-11T06:53:15.547
> 
> 标签：c#, asp.net-mvc, youtube-api, youtube.net-api

我正在制作一个用于将视频上传到 Youtube 的 POC ASP.NET MVC 应用程序。当我尝试上传视频时，我得到一个`GDataRequestException`内部`WebException`异常。这是我收到的信息：

```
(500) Internal Server Error.
The stacktrace of the WebException is:

   at System.Net.HttpWebRequest.GetResponse()
   at Google.GData.Client.GDataRequest.Execute() 
```

这是我的代码：

```
public ActionResult oauth2callback(string code)
{
    if (!string.IsNullOrWhiteSpace(code))
    {
         JObject json;

         NameValueCollection postData = new NameValueCollection();
         postData.Add("code", code);
         postData.Add("client_id", "The client ID");
         postData.Add("client_secret", "The secret code");
         postData.Add("redirect_uri", "http://localhost:64896/home/oauth2callback");
         postData.Add("grant_type", "authorization_code");

         json = JObject.Parse(
           HttpClient.PostUrl(
             new Uri("https://accounts.google.com/o/oauth2/token"), postData));
         string accessToken = json["access_token"].ToString();
         string refreshToken = json["refresh_token"].ToString();
         bool isBearer =
           string.Compare(json["token_type"].ToString(),
                          "Bearer",
                          true,
                          CultureInfo.CurrentCulture) == 0;

         var settings = new YouTubeRequestSettings("App name",
            "API key from simple API access", accessToken);
         var request = new YouTubeRequest(settings);

         Video newVideo = new Video();
         newVideo.Title = "Test Video";
         newVideo.Keywords = "key 1 , key 2";

         newVideo.Tags.Add(new MediaCategory("Games", YouTubeNameTable.CategorySchema));

         newVideo.Description = "Upload testing";
         newVideo.YouTubeEntry.Private = false;

         newVideo.Private = true; 

         newVideo.YouTubeEntry.MediaSource = new 
            MediaFileSource(@"C:\Users\Kaare\Videos\TestVideo1.avi", "video/x-msvideo");

         try
            {
                Video createdVideo = request.Upload(newVideo); 
                return View();
            }                
            catch (GDataRequestException exp)
            {
               //Do something mening full

            }                 
    }
    else
    {
        return RedirectToAction("LoginFail");
    }
} 
```

你们中的任何人都知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:33:40.343

错误 500 很困难。

是否可以获得可能有更多细节的 XML 响应？ [https://developers.google.com/youtube/2.0/developers_guide_protocol_error_responses](https://developers.google.com/youtube/2.0/developers_guide_protocol_error_responses)

> 500 响应代码表示 YouTube 在处理请求时遇到错误。您可以稍后重试该请求。

[https://developers.google.com/youtube/2.0/reference#Response_Codes](https://developers.google.com/youtube/2.0/reference#Response_Codes)

您的 oauth2 参数使用什么范围？您是否尝试了其他 YouTube 帐户？您可以尝试使用可恢复上传吗？

我看到的唯一可能是问题的是 YouTubeRequestSettings()，它是使用 authsub 的构造函数，而您正在使用 oauth2。您可以修改 youtube sdk 的源并添加一个新的 YouTubeRequestSettings() 构造函数，该构造函数使用 oauth2 参数对象而不仅仅是访问密钥。例如，您可以查看 gdata sdk 中的 RequestSettings() oauth2 构造函数。

尽管您可以执行其他请求，但不能上传，这可能不是问题。

最后一个想法：request.Service.InsertAsync(new Uri(" [http://uploads.gdata.youtube.com/feeds/api/users/default/uploads](http://uploads.gdata.youtube.com/feeds/api/users/default/uploads) "), newVideo.AtomEntry, newVideo);

# java - 将 RestTemplate 与 Spring for Android 一起使用时如何在抽象类中设置属性

> ID：15942441
> 
> 赞同：0
> 
> 时间：2013-04-11T06:53:20.113
> 
> 标签：java, spring, gson, abstraction

我正在使用 Spring for Android 从我的 restful 服务器和 gson 请求数据，以将 json 转换为 Java 对象，而无需访问对象中的任何函数。
由于有一个json属性“user_id”，我想在转换后将它保存为sqlite数据的主键。
问题是我的sqlite库将“mId”属性定义为抽象类中的主键。而gson convert没有使用“set function”来设置属性。我唯一想要的是将 user_id 正确地转换为 mId 。

代码如下：
1.访问sqlite的抽象类：

```
public abstract class Model {
    protected Long mId = null;
    public final Long getId() {
        return mId;
    }

    public void setId(Long id){
        mId = id;
    }

    public void saveToSqlite(){
        //using mId;
    }
} 
```

2.restful用户数据类：

```
public class User extends Model implements Serializable{
    private static final long serialVersionUID = 1L;
    @SerializedName("user_id")
    private Long userId;

    public Long getUserId() {
        return userId;
    }

    //this function is not accessed when user object generated
    public void setUserId(Long userId) {
        this.userId = userId;
        this.setId(userId);
    }
} 
```

3.请求和转换代码：

```
RestTemplate restTemplate = new RestTemplate();
GsonHttpMessageConverter jsonConverter = new GsonHttpMessageConverter();
restTemplate.getMessageConverters().add(jsonConverter);
final String url = "http://restful.test.com/users";
User[] users = restTemplate.getForObject(url, User[].class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:59:38.083

为您的类声明一个自定义反序列化器。类似于下面的那个。

# 报价 - 模型

```
class Quote
{
    private String symbol;
    private String test; // the empty field we want to populate

    // getters() setters()
} 
```

# QuoteCreator 反序列化器 - 从符号填充测试

```
class QuoteCreator implements JsonDeserializer<Quote>
{

    public Quote deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)
            throws JsonParseException
    {
        Gson g = new Gson();
        Quote a = g.fromJson(json, Quote.class);
        a.setTest(a.getSymbol());
        return a;
    }
} 
```

# 跑

```
GsonBuilder b = new GsonBuilder();
b.registerTypeAdapter(Quote.class,new QuoteCreator());
Gson create = b.create();
Quote fromJson = (Quote) create.fromJson(file, Quote.class); 
```

有用。您可以使用更通用的反射解决方案来捕获各种类，但如果只是纠正 JSON 而不是求助于这样的解决方法，它会更容易。

# 通用解串器

```
class MyCreator<T> implements JsonDeserializer<T>
{

    public T deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)
            throws JsonParseException
    {
        try
        {
            Gson g = new Gson();
            T a = g.fromJson(json, typeOfT);
            Class<? extends Object> class1 = a.getClass();
            Method getter = class1.getMethod("getSymbol", null);
            Method setter = class1.getMethod("setTest", String.class);
            String symbol = (String) getter.invoke(a, null);
            setter.invoke(a, symbol);
            return a;
        }
        catch (Exception e)
        {
            e.printStackTrace();
            return null;
        }
    }
} 
```

# 用法

```
b.registerTypeAdapter(Quote.class,new MyCreator<Quote>()); 
```

# html - 我怎样才能阻止这个单元格的高度增加一倍？

> ID：15942448
> 
> 赞同：0
> 
> 时间：2013-04-11T06:53:44.467
> 
> 标签：html, css, cell, htmltidy

好的，所以我已经开始将我的页面更改为 CSS，以便我可以链接到样式表以获得它们的所有好处。

在所有不兼容的位都更改为 css 后，该页面将通过 w3 的 html tidy 运行。

[html 整洁](http://www.w3.org/People/Raggett/tidy/)

在添加了一些 css 而不是之前的不兼容 html 之后，通过 html 整理出来的效果并不好，单元格的高度是它们的两倍。

以下是正在进行[的页面的链接：](http://www.techagesite.com/new_page_9.htm)

这是问题代码中的单元格之一：

```
<td style="width: 283px; height: 30px; 
    background-image: url('EmuNewNGd_Template/techage_map1_featurebar.jpg')">
   <p align="center">
       <b>
          <font color="#000080" size="2" face="Tahoma">
            Bringing You Nothing But The Best
         </font>
      </b>
   </p>
</td> 
```

任何想法为什么它们如此之大，因为在浏览器中查看它们的大小不是 30 像素，而是大得多。

请记住，我对 CSS 不是很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T06:58:35.690

它们更大，因为`<p>`表格中有包含文本的元素。默认情况下`<p>`，元素有边距。您可以通过将其添加到您的 css 来删除它：

`#AutoNumber9 tbody tr td p { margin: 0; padding: 0; }`

这仅适用于 ID 为 #AutoNumber9 的表。如果您想对`<p>`网站上的所有元素执行此操作，您可以添加：

```
p {
    margin: 0;
    padding: 0;
} 
```

# .net - 为什么我的任务不能并行运行？

> ID：15942449
> 
> 赞同：1
> 
> 时间：2013-04-11T06:53:46.260
> 
> 标签：.net, vb.net, multithreading, task

我整理了一个小测试程序来了解 VB.net 中的多线程。经过大量的研究、尝试和失败后，我的程序至少运行了一点。

现在它的行为很奇怪，我无法解释原因。也许你可以告诉我，我的程序有什么问题，为什么它的行为方式和/或我必须改变什么才能让它按照它应该的方式工作。

我的程序包含一个类（TestClass），它模拟了我希望每个在不同线程上执行的长时间运行的任务，一个进度表（Form1），用于显示来自我的长时间运行的任务的进度消息和主程序，这两个一起。

这是我的代码：

**进度表**(Form1) 包含两个列表框（ListBox1 和 ListBox2）：

```
Public Class Form1

Public Sub AddMessage1(ByVal message As String)
  If String.IsNullOrEmpty(message) Then
    Exit Sub
  End If

  Me.ListBox1.Items.Add(message)
  Me.ListBox1.SelectedIndex = Me.ListBox1.Items.Count - 1
  Application.DoEvents()
End Sub

Public Sub AddMessage2(ByVal message As String)
  If String.IsNullOrEmpty(message) Then
    Exit Sub
  End If

  Me.ListBox2.Items.Add(message)
  Me.ListBox2.SelectedIndex = Me.ListBox2.Items.Count - 1
  Application.DoEvents()
End Sub

End Class 
```

**测试类**：

```
Imports System.Threading

Public Class TestClass

  Public Event ShowProgress(ByVal message As String)

  Private _milliSeconds As UShort
  Private _guid As String

  Public Sub New(milliSeconds As UShort, ByVal guid As String)
    _milliSeconds = milliSeconds
    _guid = guid
  End Sub

  Public Function Run() As UShort
    For i As Integer = 1 To 20
      RaiseEvent ShowProgress("Run " & i)
      Thread.Sleep(_milliSeconds)
    Next i

    Return _milliSeconds
  End Function

End Class 
```

**主要程序**：

```
Imports System.Threading.Tasks
Imports System.ComponentModel

Public Class Start
  Private Const MULTI_THREAD As Boolean = True

  Public Shared Sub Main()
    Dim testClass(1) As TestClass
    Dim testTask(1) As Task(Of UShort)
    Dim result(1) As UShort

    testClass(0) = New TestClass(50, "Test1")
    testClass(1) = New TestClass(200, "Test2")

    Using frm As Form1 = New Form1
      frm.Show()

      AddHandler testClass(0).ShowProgress, AddressOf frm.AddMessage1
      AddHandler testClass(1).ShowProgress, AddressOf frm.AddMessage2

      If MULTI_THREAD Then
        testTask(0) = Task(Of UShort).Factory.StartNew(Function() testClass(0).Run, CancellationToken.None, TaskCreationOptions.None, TaskScheduler.FromCurrentSynchronizationContext)
        testTask(1) = Task(Of UShort).Factory.StartNew(Function() testClass(1).Run, CancellationToken.None, TaskCreationOptions.None, TaskScheduler.FromCurrentSynchronizationContext)

        Task.WaitAll(testTask)

        result(0) = testTask(0).Result
        result(1) = testTask(1).Result
      Else
        result(0) = testClass(0).Run
        result(1) = testClass(1).Run
      End If

      RemoveHandler testClass(0).ShowProgress, AddressOf frm.AddMessage1
      RemoveHandler testClass(1).ShowProgress, AddressOf frm.AddMessage2

      frm.Close()
    End Using

    MessageBox.Show("Result 1: " & result(0) & "; Result 2: " & result(1))
  End Sub

End Class 
```

该程序应该打开进度表，并行运行两个长时间运行的任务，显示两个长时间运行的任务的进度消息，当两个长时间运行的任务完成时关闭进度表并显示一个消息框，显示结果长期运行的任务。

现在我无法解释的行为：如果我运行这个程序，它会在两个列表框中显示“运行 1”，所以两个任务都开始运行，但是只有第一个列表框被填充并且只有当第一个列表框被填充时（第一个任务完成），第二个列表框继续填充。因此，两个任务都开始了，但第二个任务等待第一个任务完成，然后再继续运行。
但是，当我在我的主要程序中注释掉时`Task.WaitAll(testTask)`，情况正好相反。它在两个列表框中显示“运行 1”，然后第二个列表框被填充，只有当第二个列表框被填充（第二个任务完成）时，第一个列表框继续运行。

为什么我的程序表现得如此奇怪，我怎样才能让它同时运行我的两个任务？

感谢您帮助解决这个小谜团:-)

* * *

**更新**
由于到目前为止唯一的答案表明它与`SynchronizationContext`我正在使用的有关，因此我将其从主程序的代码中删除：

**主要程序**：

```
Imports System.Threading.Tasks
Imports System.ComponentModel

Public Class Start
  Private Const MULTI_THREAD As Boolean = True

  Public Shared Sub Main()
    Dim testClass(1) As TestClass
    Dim testTask(1) As Task(Of UShort)
    Dim result(1) As UShort

    testClass(0) = New TestClass(50, "Test1")
    testClass(1) = New TestClass(200, "Test2")

    Using frm As Form1 = New Form1
      frm.Show()

      AddHandler testClass(0).ShowProgress, AddressOf frm.AddMessage1
      AddHandler testClass(1).ShowProgress, AddressOf frm.AddMessage2

      If MULTI_THREAD Then
        testTask(0) = Task(Of UShort).Factory.StartNew(Function() testClass(0).Run)
        testTask(1) = Task(Of UShort).Factory.StartNew(Function() testClass(1).Run)

        Task.WaitAll(testTask)

        result(0) = testTask(0).Result
        result(1) = testTask(1).Result
      Else
        result(0) = testClass(0).Run
        result(1) = testClass(1).Run
      End If

      RemoveHandler testClass(0).ShowProgress, AddressOf frm.AddMessage1
      RemoveHandler testClass(1).ShowProgress, AddressOf frm.AddMessage2

      frm.Close()
    End Using

    MessageBox.Show("Result 1: " & result(0) & "; Result 2: " & result(1))
  End Sub

End Class 
```

为了避免`InvalidOperationException`由于非法的跨线程调用，我将表单的代码更改如下：

**进度表**(Form1) 包含两个列表框（ListBox1 和 ListBox2）：

```
Public Delegate Sub ShowProgressDelegate(ByVal message As String)

Public Class Form1

Public Sub AddMessage1(ByVal message As String)
  If String.IsNullOrEmpty(message) Then
    Exit Sub
  End If

  Debug.Print("out List 1: " & message)

  If Me.InvokeRequired Then
    Me.BeginInvoke(New ShowProgressDelegate(AddressOf Me.AddMessage1), message)
  Else
    Debug.Print("in List 1: " & message)

    Me.ListBox1.Items.Add(message)
    Me.ListBox1.SelectedIndex = Me.ListBox1.Items.Count - 1
    Application.DoEvents()
  End If
End Sub

Public Sub AddMessage2(ByVal message As String)
  If String.IsNullOrEmpty(message) Then
    Exit Sub
  End If

  Debug.Print("out List 2: " & message)

  If Me.InvokeRequired Then
    Me.BeginInvoke(New ShowProgressDelegate(AddressOf Me.AddMessage2), message)
  Else
    Debug.Print("in List 2: " & message)

    Me.ListBox2.Items.Add(message)
    Me.ListBox2.SelectedIndex = Me.ListBox2.Items.Count - 1
    Application.DoEvents()
  End If
End Sub

End Class 
```

我刚刚添加了一些 Debug.Prints 用于调试和`InvokeRequired`部件。

现在这两个任务并行运行（我知道是因为`Debug.Print`带有“out List”消息的调用）但我的进度消息没有显示在列表框中，相应的代码永远不会被执行（`Debug.Print`带有“in List”消息的调用不会' t 显示在调试窗口中）。

我用谷歌搜索了做这`InvokeRequired`部分的正确方法，我做的方法似乎是正确的，但它不起作用。
有人可以告诉我，怎么了？

再次感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:04:20.700

您是在告诉系统在当前同步上下文中运行任务。

```
TaskScheduler.FromCurrentSynchronizationContext 
```

在这种情况下，同步上下文是 UI 线程——其中只有一个。所以任务将排队，直到它们可以在 UI 线程上运行 - 这只有在您进入`WaitAll()`调用时才可用（因为规则`WaitAll`说，如果当前线程适合运行一个或多个任务（它是）并且那些相同的任务还没有开始（他们不能拥有），当前线程可能直接执行一个或多个这些任务）

您*可以*要求在*不同*的同步上下文（或线程池）上运行任务，但随后会遇到不同的问题 - 在线程引发的事件中，您正在与 UI 元素进行交互。

也许您应该查看[`BackgroundWorker`](http://msdn.microsoft.com/en-gb/library/system.componentmodel.backgroundworker.aspx)该类，它在单独的线程上运行代码，但专门用于将进度报告回 UI/前台线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:31:38.020

经过大量搜索和尝试，我想出了一个解决方案。它不漂亮，但它有效。

在我看来， Task.WaitAll() 不仅等待移交的任务完成，而且还会**阻止**它调用的任务。
因此，将我的主要程序的代码从

```
...
Task.WaitAll(testTask)
... 
```

至

```
...
Do While Not Task.WaitAll(testTask, 100)
  Application.DoEvents
Loop
... 
```

诀窍和我的进度消息是否显示在列表框中。

# c - 使用数组打印的菜单图标不起作用？

> ID：15942465
> 
> 赞同：-1
> 
> 时间：2013-04-11T06:54:38.690
> 
> 标签：c

嗨朋友们，我有这些项目，我将在主屏幕上显示大约 10 个图标，当您选择它时，每个图标会显示另外 5 个图像（这些图像的数量不同，但我们将其视为每个图标 5 个）。IT是一种主屏幕和子屏幕。现在，我将这近 88 张图像作为图标显示在屏幕上。我为每个图像创建了 const char 数组，所以我有一个包含 88 个 const char 类型的数组的列表，每个数组的信息名称都很少。我的想法是使用所有这些名称创建另一个数组，并在必要时调用它们。如下例：

```
 const char  *arr_1[] = {"one_ele_zero", "one_ele_one", "one_ele_two", "one_ele_three"};

 const char  *arr_2[] = {"two_ele_zero", "two_ele_one", "two_ele_two", "two_ele_three"};

 const char  *arr_3[] = {"three_ele_zero", "three_ele_one", "three_ele_two", "three_ele_three"};

 const char **arr_all[] = {arr_1, arr_2, arr_3};

 int main()
 {
     printf("%s\n",*arr_all[0]);

     system("PAUSE");

     return 0;

 } 
```

此代码编译，我可以打印第一个数组第 0 个位置字符串，但我不知道如何打印其余部分。如果你们认为还有其他方法可以做到这一点，我是 C 的新手……请建议我或指导我使用一些示例程序……谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:09:32.370

你必须做这样的事情，

```
for(i=0;i<3;i++)
 for(j=0;j<3;j++)
     printf("%s\n",*(arr_all[i]+j)); 
```

您`arr_all[]`包含 和 的基`arr_1[]`地址。如果你只使用`arr_2[]``arr_3[]`

`printf("%s\n",*arr_all[0]);`仅打印 arr_1[] `printf("%s\n",*arr_all[i]);`的`0<=i<3`第一个元素，仅打印每个 arr_1[] 的第一个元素， `printf("%s\n",*(arr_all[i]+j));`并`0<=i<3`获取(ar_1, arr_2, arr_3) 数组`0<=j<3`的基地址，`arr_x[]`并使用打印该数组的每个元素`j`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:20:42.333

```
printf("%s\n", arr_all[0][1]);//one_ele_one 
```

# ruby - 从数组中减去元素

> ID：15942466
> 
> 赞同：1
> 
> 时间：2013-04-11T06:54:39.910
> 
> 标签：ruby

减去数组时，我只想删除第一个匹配项。

例如

```
[1,2,3,4,4,4,4,5,5]-[1,2,3,4] # => [5,5] 
```

但是我需要：

```
[4,4,4,5,5] 
```

另一个例子：

```
[1,2,3,4,4,4,4,5,5]-[1,2,3,5] # => [4, 4, 4, 4] 
```

但结果应该是：

```
[4,4,4,4,5] 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:36:24.840

```
def remove(array, rejects)
  array = array.dup
  rejects.each {|item| array.delete_at(array.index(item))}
  array
end 
```

用法：

```
remove([1,2,3,4,4,4,4,5,5], [1,2,3,4])                                                                                                                                                                                     
 => [4, 4, 4, 5, 5]                                                                                                                                                                                                                         
remove([1,2,3,4,4,4,4,5,5], [1,2,3,5])                                                                                                                                                                                     
 => [4, 4, 4, 4, 5] 
```

您可以不使用不兼容`rejects`的方式调用它，也可以向该方法添加错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:24:34.247

试试下面的，它会为你工作。

```
a = [1,2,3,5]
p [1,2,3,4,4,4,4,5,5].delete_if {|x| a.delete_at(a.index(x)) if a.include? x}
#=> [4, 4, 4, 4, 5]

a = [1,2,3,4]
p [1,2,3,4,4,4,4,5,5].delete_if {|x| a.delete_at(a.index(x)) if a.include? x}
#=> [4, 4, 4, 5, 5] 
```

这里还有一些例子来澄清反对者：

```
a = [1,2,3,5]
p [3,4,5,1,2,3,4,4,4,4,5,5].delete_if {|x| a.delete_at(a.index(x)) if a.include? x}
#=> [4, 3, 4, 4, 4, 4, 5, 5]

a = [1,2,4,5]
p [3,4,5,1,2,3,4,4,4,4,5,5].delete_if {|x| a.delete_at(a.index(x)) if a.include? x}
#=> [3, 3, 4, 4, 4, 4, 5, 5]

a = [2,3,5]
p [3,4,5,1,2,3,4,4,4,4,5,5].delete_if {|x| a.delete_at(a.index(x)) if a.include? x}
#=>[4, 1, 3, 4, 4, 4, 4, 5, 5]

a = [1,4,4,5]
p [1,2,3,4,4,4,4,5,5].delete_if {|x| a.delete_at(a.index(x)) if a.include? x}
#=> [2, 3, 4, 4, 5] 
```

# exception - 在 C++ 中“prject1.exe 中 0x778215de 处的未处理异常：0xC0000005：访问违反写入位置 0x00000016”

> ID：15942468
> 
> 赞同：0
> 
> 时间：2013-04-11T06:55:01.490
> 
> 标签：exception, unhandled

当我调试一个项目时，在窗口上给我一个错误

> prject1.exe 中 0x778215de 处未处理的异常：0xC0000005：
> 访问违反写入位置 0x00000016

在`mlock.c`向我展示了代码行：

```
void __cdecl _unlock (
        int locknum
        )
{
        /*
         * leave the critical section.
         */
        LeaveCriticalSection( _locktable[locknum].lock );
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:57:20.233

看起来您正在访问您的数组超出其范围......您应该检查您的数组是否包含多个`22`项目。

或者

您应该检查项目是否在 position 正确初始化`22`。

# logging - Caliburn.Micro modify logging level

> ID：15942476
> 
> 赞同：0
> 
> 时间：2013-04-11T06:55:32.833
> 
> 标签：logging, caliburn.micro, nlog

I am using Caliburn.Micro and NLOG. I have build my logging according to this sample: [http://buksbaum.us/2010/08/08/how-to-do-logging-with-caliburn-micro/](http://buksbaum.us/2010/08/08/how-to-do-logging-with-caliburn-micro/)

This works well and as expected. But Caliburn sets the level of all its messages to info. I would prefer them to be Debug Statements. Is there an easy way to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:22:31.823

Just change the `NLogLogger` implementation of the `Info` method from:

```
public void Info(string format, params object[] args)
{
    _innerLogger.Info(format, args);
} 
```

to

```
public void Info(string format, params object[] args)
{
    _innerLogger.Debug(format, args);
} 
```

# c++ - 如何在 dll 中的要导出的类中包含结构？

> ID：15942482
> 
> 赞同：0
> 
> 时间：2013-04-11T06:56:24.967
> 
> 标签：c++, class, dll, struct

我正在尝试在 cpp 中编写一个后端，它可以读取测验问题的二进制文件，并且只在被问到时显示答案。我想使用 DLL 链接并遵循 Microsoft 的演练：http: [//msdn.microsoft.com/en-us/library/vstudio/ms235636.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms235636.aspx)，它不使用类成员。我也想导出它们，并在类中包含某些结构。

基本上，我希望能够声明和使用类的对象并使用它的成员函数，只需将 DLL 包含在我承担的任何进一步的项目中。我该怎么做？在我的以下代码中，

```
#ifdef CXWDLL_EXPORTS
#define CXWAPI __declspec(dllexport) 
#else
#define CXWAPI __declspec(dllimport) 
#endif

#include<string>

using namespace std;

typedef unsigned long long UINT64
#define SIZE 15
#define GRIDSIZE 225
#define MAXCLUES 50

namespace cxw
{
    class CXWAPI CXWPuzzle
    {
        public:
            CXWPuzzle();
            virtual ~CXWPuzzle();
            struct Header
            {
                string signature;
                string version;
                short type;
            } header;
            struct Checksum
            {
                int header;
                int crossie;
                int grid;
                int clues;
                int solution;
                int file;
            } checksum;
            struct Contents
            {
                struct CHeader
                {
                    string title;
                    string author;
                    string copyright;
                    string notes;
                } cHeader;
                struct Grid
                {
                    short size;
                    UINT64 grid[4];
                    char filled[GRIDSIZE];
                    UINT64 filled[4];
                } grid;
                struct Clues
                {
                    string across[MAXCLUES];
                    string down[MAXCLUES];
                } clues;
                struct Solution
                {
                    char answers[GRIDSIZE];
                    string across[MAXCLUES];
                    string down[MAXCLUES];
                } solution;
            } contents;
    };
} 
```

VS 2010 编译器在以下位置显示“错误：需要声明”：

```
} solution; 
```

和随后的右括号。我还没有添加类的方法。

我究竟做错了什么？另外，我的代码会让我做我提到的要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:47:34.480

```
struct Grid
{
    short size;
    UINT64 grid[4];
    char filled[225];
    UINT64 filled[4];
}; 
```

你这里有一个错误，`filled`已经被声明了两次。当我修复它时，我无法重现您所说的其他错误。

# ios - MPMoviePlayerViewController 问题

> ID：15942490
> 
> 赞同：0
> 
> 时间：2013-04-11T06:56:49.637
> 
> 标签：ios, mpmovieplayercontroller

我正在尝试添加子视图 MPMoviePlayerViewController 对象，它的顶栏向下移动了一点，但如果我确实展示了 MPMoviePlayerViewController 对象，它就完美了。? 我不知道发生了什么。请帮帮我。

如果我在子视图上添加我正在写：

```
 self.moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL       URLWithString:self.filePath]];
       [self.moviePlayer.view setFrame:self.view.bounds];
      [self.view addSubview:self.moviePlayer.view]; 
```

所以顶部默认完成按钮和进度条向下移动一点。请帮助我，为什么会这样？和解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:15:19.793

```
 MPMoviePlayerController* movieController = [[MPMoviePlayerController alloc] 
                                                initWithContentURL:url];

    movieController.view.frame = self.window.bounds;
    movieController.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;   
    [self.window addSubview:movieController.view];

    [movieController prepareToPlay];
    [movieController setShouldAutoplay:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:10:18.913

尝试这个：

```
self.moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL       URLWithString:self.filePath]];

CGRect frame = self.view.bounds;
frame.origin.y -= 20;
[self.moviePlayer.view setFrame:frame];
[self.view addSubview:self.moviePlayer.view]; 
```

视图框架假设它将显示`MPMoviePlayerViewController`状态栏可见，但我假设您已隐藏状态栏。所以当你添加`MPMoviePlayerViewController`视图时，它的 frame.origin.y 设置为 20（状态栏高度）。

# jquery - 如何检查标签的属性是在attributelist中的偶数还是奇数索引中

> ID：15942493
> 
> 赞同：0
> 
> 时间：2013-04-11T06:57:07.143
> 
> 标签：jquery

考虑以下代码

```
<div id="testdiv" class="selected" lang="en-us" >
<strong>And so it is just like you said it would be</strong>
</div> 
```

我如何判断'class'属性是在偶数索引还是奇数索引中使用jquery？就像，在这里“类”在奇数索引中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:08:13.067

您可以获取元素的属性并找出索引

**[现场演示](http://jsfiddle.net/eSdxm/2/)**

```
function getAttrIndex(elemId, attrName) {
    attrs = document.getElementById(elemId).attributes;
    for (i = 0; i < attrs.length; i++)
    if (attrs[i].name == attrName) return i;
    return -1
} 
```

**使用 jQuery 基于 OP 注释进行**编辑****

 ****[现场演示](http://jsfiddle.net/eSdxm/4/)**

```
function getAttrIndex(elemId, attrName) {
    index = -1;   
    $($('#' + elemId)[0].attributes).each(function (i, item) {     
        if (item.name == attrName) {
            index = i;
            return;
        }
    });
    return index;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:09:14.450

使用以下代码检查所选类的索引。

```
 var oddSet = $('div.selected:odd').css("property","value");
var evenSet = $('div.selected:even').css("property","value"); 
```

您也可以使用过滤器功能。

```
$('div.selected').filter(':even') // to get all even elements
$('div.selected').filter(':odd') // to get all odd elements 
```

您可以应用任何奇数或偶数的jQuery 函数。你要哪个。**

# mysql - perl + mysql 在查询期间丢失与 MySQL 服务器的连接

> ID：15942496
> 
> 赞同：0
> 
> 时间：2013-04-11T06:57:17.113
> 
> 标签：mysql, perl, dbi

这似乎是一个常见问题，我进行了很多搜索，但没有成功找到任何解决我的情况的方法。尝试了 mysql_auto_reconnect 和 connect_cached 但没有帮助。这基本上是我在这里的代码。mysql 服务器会在闲置 30 秒后关闭连接。mysql_auto_reconnect 仅在我第一次 $dbh->disconnect 从服务器时才有效（在代码中注释）。connect_cached 方法在这里有效，但我仍然在 while 循环中使用 connect_cached 方法收到“丢失连接”消息。

```
 my $dbh = DBI->connect_cached($mysql_data_source, $mysql_username, $mysql_passwd, {'RaiseError' => 1});
  $dbh->{AutoInactiveDestroy} = 1;
  $dbh->{mysql_auto_reconnect} = 1;
  print strftime('%F %T', localtime());
  print "\n";
  #$dbh->disconnect();
  sleep 30; 
  $dbh = DBI->connect_cached($mysql_data_source, $mysql_username, $mysql_passwd, {'RaiseError' => 1});
  print strftime('%F %T', localtime());
  my $sql = "some sql";
  my $hashref = $dbh->selectall_hashref($sql, "id");
  my $info_hashref = $dbh->{mysql_dbd_stats};
  print Dumper($info_hashref);
  print Dumper($hashref); 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:24:53.620

您可以尝试操纵超时，也许通过将其添加到您的连接：mysql_connect_timeout=60

当然，如果查询需要很长时间，则建议查看 sql。

# php - 为什么 Laravel 不能轻松下载大文件？

> ID：15942497
> 
> 赞同：8
> 
> 时间：2013-04-11T06:57:19.150
> 
> 标签：php, laravel, laravel-3

我的文件（126 MB 大小，.exe）给我带来了问题。

我正在使用标准的 laravel 下载方法。

我尝试增加内存，但它仍然说我内存不足，或者我下载了一个 0 KB 大小的文件。

该文档没有提及有关大文件大小的任何内容。

我的代码是

```
ini_set("memory_limit","-1"); // Trying to see if this works
return Response::download($full_path); 
```

**有什么我做错了吗？**

- 编辑 -

继续 Phill Sparks 评论，这就是我所拥有的并且**它有效**。它是 Phill 和一些来自 php.net 的组合。不知道里面有没有遗漏？

```
public static function big_download($path, $name = null, array $headers = array())
{
    if (is_null($name)) $name = basename($path);

    // Prepare the headers
    $headers = array_merge(array(
        'Content-Description'       => 'File Transfer',
        'Content-Type'              => File::mime(File::extension($path)),
        'Content-Transfer-Encoding' => 'binary',
        'Expires'                   => 0,
        'Cache-Control'             => 'must-revalidate, post-check=0, pre-check=0',
        'Pragma'                    => 'public',
        'Content-Length'            => File::size($path),
    ), $headers);

    $response = new Response('', 200, $headers);
    $response->header('Content-Disposition', $response->disposition($name));

    // If there's a session we should save it now
    if (Config::get('session.driver') !== '')
    {
        Session::save();
    }

    // Below is from http://uk1.php.net/manual/en/function.fpassthru.php comments
    session_write_close();
    ob_end_clean();
    $response->send_headers();
    if ($file = fopen($path, 'rb')) {
        while(!feof($file) and (connection_status()==0)) {
            print(fread($file, 1024*8));
            flush();
        }
        fclose($file);
    }

    // Finish off, like Laravel would
    Event::fire('laravel.done', array($response));
    $response->foundation->finish();

    exit;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T09:47:32.260

发生这种情况是因为`Response::download()`在将文件提供给用户之前将其加载到内存中。诚然，这是框架中的一个缺陷，但大多数人不会尝试通过框架来提供大文件。

解决方案 1 - 将要下载的文件放在公用文件夹、静态域或 cdn 中 - 完全绕过 Laravel。

可以理解，您可能试图通过登录来限制对下载的访问，在这种情况下，您需要制定自己的下载方法，这样的事情应该可以工作......

```
function sendFile($path, $name = null, array $headers = array())
{
    if (is_null($name)) $name = basename($path);

    // Prepare the headers
    $headers = array_merge(array(
        'Content-Description'       => 'File Transfer',
        'Content-Type'              => File::mime(File::extension($path)),
        'Content-Transfer-Encoding' => 'binary',
        'Expires'                   => 0,
        'Cache-Control'             => 'must-revalidate, post-check=0, pre-check=0',
        'Pragma'                    => 'public',
        'Content-Length'            => File::size($path),
    ), $headers);

    $response = new Response('', 200, $headers);
    $response->header('Content-Disposition', $response->disposition($name));

    // If there's a session we should save it now
    if (Config::get('session.driver') !== '')
    {
        Session::save();
    }

    // Send the headers and the file
    ob_end_clean();
    $response->send_headers();

    if ($fp = fread($path, 'rb')) {
        while(!feof($fp) and (connection_status()==0)) {
            print(fread($fp, 8192));
            flush();
        }
    }

    // Finish off, like Laravel would
    Event::fire('laravel.done', array($response));
    $response->foundation->finish();

    exit;
} 
```

这个函数是[Response::download()](https://github.com/laravel/laravel/blob/master/laravel/response.php#L183)和 Laravel 的[关闭过程](https://github.com/laravel/laravel/blob/master/laravel/laravel.php#L193)的组合。我自己没有机会测试它，我没有在工作中安装 Laravel 3。请让我知道它是否适合您。

**PS：**这个脚本唯一不关心的是cookies。不幸的是[Response::cookies()](https://github.com/laravel/laravel/blob/master/laravel/response.php#L300)函数受到保护。如果这成为问题，您可以从函数中提取代码并将其放入您的 sendFile 方法中。

**PPS：输出缓冲***可能*存在问题；如果这是一个问题，请查看[readfile() 示例](http://uk1.php.net/manual/en/function.readfile.php#example-2374)的 PHP 手册，有一种方法应该在那里工作。

***PPPS：***由于您使用的是二进制文件，您可能需要考虑用`readfile()`fpassthru [()替换](http://php.net/manual/en/function.fpassthru.php)

**编辑：**忽略 PPS 和 PPPS，我更新了代码以使用 fread+print 代替，因为这看起来更稳定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-28T09:31:48.010

你可以像这样使用 Symfony\Component\HttpFoundation\StreamedResponse：

```
$response = new StreamedResponse(
    function() use ($filePath, $fileName) {
        // Open output stream
        if ($file = fopen($filePath, 'rb')) {
            while(!feof($file) and (connection_status()==0)) {
                print(fread($file, 1024*8));
                flush();
            }
            fclose($file);
        }
    },
    200,
    [
        'Content-Type' => 'application/octet-stream',
        'Content-Disposition' => 'attachment; filename="' . $fileName . '"',
    ]);

return $response; 
```

有关更多信息，请查看[此](https://medium.com/@barryvdh/streaming-large-csv-files-with-laravel-chunked-queries-4158e484a5a2#.z9aey685l)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-24T14:20:41.247

我正在使用[此处](http://www.php.net/manual/en/function.readfile.php#54295)`readfile_chunked()`php.net 中所述的自定义方法。对于 Laravel 3，我扩展了这样的响应方法：

将此文件添加为`applications/libraries/response.php`

```
<?php
class Response extends Laravel\Response {

    //http://www.php.net/manual/en/function.readfile.php#54295
    public static function readfile_chunked($filename,$retbytes=true) { 
       $chunksize = 1*(1024*1024); // how many bytes per chunk 
       $buffer = ''; 
       $cnt =0; 
       // $handle = fopen($filename, 'rb'); 
       $handle = fopen($filename, 'rb'); 
       if ($handle === false) { 
           return false; 
       } 
       while (!feof($handle)) { 
           $buffer = fread($handle, $chunksize); 
           echo $buffer; 
           ob_flush(); 
           flush(); 
           if ($retbytes) { 
               $cnt += strlen($buffer); 
           } 
       } 
           $status = fclose($handle); 
       if ($retbytes && $status) { 
           return $cnt; // return num. bytes delivered like readfile() does. 
       } 
       return $status; 

    } 
} 
```

然后在 application/config/application.php 中注释掉这一行：

```
'Response'      => 'Laravel\\Response', 
```

示例代码：

```
//return Response::download(Config::get('myconfig.files_folder').$file->upload, $file->title);

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.$file->title);
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . File::size(Config::get('myconfig.files_folder').$file->upload));
ob_clean();
flush();
Response::readfile_chunked(Config::get('myconfig.files_folder').$file->upload);
exit; 
```

到目前为止效果很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-27T18:53:40.813

2020 Laravel 7 有更好的方法：

```
return response()->download($pathToFile); 
```

当同一个文件导致以前的解决方案出现问题时，我已经将它与**398mb的文件一起使用，没有任何问题。**

来自[Laravel 文档](https://laravel.com/docs/7.x/responses#file-downloads)：*“下载方法可用于生成响应，强制用户的浏览器在给定路径下载文件。下载方法接受文件名作为该方法的第二个参数，这将确定文件名下载文件的用户看到的。最后，您可以将一组 HTTP 标头作为第三个参数传递给该方法：*

```
return response()->download($pathToFile);

return response()->download($pathToFile, $name, $headers);

return response()->download($pathToFile)->deleteFileAfterSend(); 
```

我们还提供了可能更适合的流式下载：[Laravel 文档](https://laravel.com/docs/7.x/responses#file-downloads)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T07:01:38.843

您需要像这样增加 memory_limit ：

您需要使用 ini_set 函数增加 memory_limit，例如`ini_set('memory_limit','128M');`

我希望这对你有用！

我在这里找到了答案：[https ://stackoverflow.com/a/12443644/1379394](https://stackoverflow.com/a/12443644/1379394)

# prolog - Prolog给出错误未定义的过程

> ID：15942502
> 
> 赞同：1
> 
> 时间：2013-04-11T06:57:37.873
> 
> 标签：prolog

我是 Prolog 的新手，但我无法从文件中运行任何程序。我在 /opt/local/bin 中有 mac os x mountain lion 和 swipl。脚本名称是“prolog”，它与 swipl 位于同一目录中。

```
muz(petr).
muz(pavel).
muz(jan).

zena(petra).
zena(pavla).
zena(martina).

potomek(pavel, petr).
potomek(jan, pavel).
potomek(petra, jan).

vzdaleny_potomek(A,B):=potomek(A,B).
vzadelny_potomek(A,B):=vzdaleny_potomek(B,C). 
```

在终端中，我首先运行 swipl 然后键入`consult(prolog)`，它可以编译，但是当我想运行时`vzdaleny_potomek(petr, pavel)`，它给了我错误

**错误：顶层：未定义过程：vzdaleny_potomek/2（DWIM 无法更正目标）**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:27:44.263

你的谓词定义是错误的。这：`:=`应该是这样的：`:-`。

# c# - AppDomain + 命名管道序列化性能

> ID：15942503
> 
> 赞同：1
> 
> 时间：2013-04-11T06:57:38.047
> 
> 标签：c#, .net

考虑以下情况：在条形码扫描仪下扫描订单，订单号被发送到 Windows 服务应用程序，该应用程序将计算并发送回价格。除其他事项外，它还考虑了折扣券，并且折扣在单独的程序集中处理。我想要做的是能够在运行时卸载程序集，以便可以替换 dll 而不必停止服务。（该服务需要 30 分钟才能启动）所以我想出了创建一个新的 AppDomain 的想法，该 AppDomain 将加载程序集并在其中执行代码。通信是通过命名管道和序列化完成的。在功能上它运行良好，但在生产中性能变得非常低。有人对如何使下面的代码尽可能快地运行有任何建议吗？

代码说明：对于每个有折扣的订单，都会调用 DoAction。它首先启动一个充当命名管道客户端的线程。该线程接收发送回客户端的价格。然后，如果尚未加载新的 AppDomain，则在该 AppDomain 的上下文中执行 AppDomainCallback。命名管道服务器在那里启动，包含折扣代码的程序集在客户端连接时被加载和调用，结果被反序列化回客户端线程并从 DoAction 返回。所以有很多线程等待和序列化，但我看不到让它更快的方法。

```
[Serializable]
internal class ActionLoader
{
    private const string DOMAINNAME = "Actions";

    private const string PIPE_TO = "PipeTo";
    private const string PIPE_BACK = "PipeBack";

    private string assemblyName;
    private string className;
    private string methodName;
    private List<object> parameters;

    private static BinaryFormatter formatter = new BinaryFormatter();

    public ActionLoader(string assemblyName, string className, string methodName, List<object> parameters)
    {
        this.assemblyName = assemblyName;
        this.className = className;
        this.methodName = methodName;
        this.parameters = parameters;
    }

    private static AppDomain domain = AppDomain.CreateDomain(DOMAINNAME);

    public OrderPrice DoAction()
    {
        // after clientThread is done it fills RetVal
        ThreadedExecuter<OrderPrice> clientThread = new ThreadedExecuter<OrderPrice>(NamedPipeClient, parameters);
        clientThread.Start();

        if (domain == null) // domain can be unloaded by ropsrefresh so check if it should be created again
        {
            domain = AppDomain.CreateDomain(DOMAINNAME);
        }
        // AppDomainCallback runs in the context of appdomain so dll's get loaded in there and not in CurrentDomain
        domain.DoCallBack(AppDomainCallback);

        clientThread.Thread.Join();

        return clientThread.RetVal; // return price deseralized from AppDomain
    }

    public static void UnloadAppDomain() // called by ropsrefresh => refresh config
    {
        if (domain != null)
        {
            AppDomain.Unload(domain);
            domain = null;
        }
    }

    private void AppDomainCallback()
    {
        OrderPrice price = null;

        Assembly assembly = Assembly.LoadFrom(assemblyName);

        object action = assembly.CreateInstance(className);
        MethodInfo mi = action.GetType().GetMethod(methodName);

        // using pipes to communicate between AppDomains
        using (NamedPipeServerStream stream = new NamedPipeServerStream(PIPE_TO))
        {
            stream.WaitForConnection();

            List<object> parameters = (List<object>)DeserializeFromStream(stream);

            Type t = action.GetType();

            if (mi != null)
                price = (OrderPrice)mi.Invoke(action, parameters.ToArray());
        }

        // server becomes client to serialize data back
        using (NamedPipeClientStream stream = new NamedPipeClientStream(PIPE_BACK))
        {
            stream.Connect();
            SerializeToStream(stream, price);
        }
    }

    private static OrderPrice NamedPipeClient(object parameters)
    {
        OrderPrice price = null;

        // using pipes to communicate between AppDomains
        using (NamedPipeClientStream stream = new NamedPipeClientStream(PIPE_TO))
        {
            stream.Connect();
            SerializeToStream(stream, parameters); // serialize function parameters to pipe stream
        }

        using (NamedPipeServerStream stream = new NamedPipeServerStream(PIPE_BACK))
        {
            stream.WaitForConnection();

            price = (OrderPrice)DeserializeFromStream(stream);
        }

        return price; // returns deserialized price to ThreadedExecutor
    }

    private static object DeserializeFromStream(Stream stream)
    {
        return formatter.Deserialize(stream);
    }

    private static void SerializeToStream(Stream stream, object parameters)
    {            
        formatter.Serialize(stream, parameters);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T06:49:28.663

重写代码以使用任务库。由于它使用 Windows ThreadPool，因此性能更好。task.Result 将阻塞，直到任务完成，因此不再需要加入。

```
public OrderPrice DoAction()
{
    Task<OrderPrice> task = Task<OrderPrice>.Factory.StartNew(NamedPipeClient);

    if (domain == null)
        domain = AppDomain.CreateDomain(DOMAINNAME);
    domain.DoCallBack(AppDomainCallback);

    return task.Result; 
} 
```

# java - JPA 多对一：删除一对多端

> ID：15942504
> 
> 赞同：0
> 
> 时间：2013-04-11T06:57:42.783
> 
> 标签：java, mysql, hibernate, jpa

我有以下关系

```
Class UserAccount{

@OneToMany(mappedBy = "firstSharedBy")
private List<Images> imagesFirstShared;

}

Class Images{

@ManyToOne
@JoinColumn
private UserAccount firstSharedBy;
} 
```

我想删除一个 UserAccount 实例。所以我这样做。

```
 userAccount.getImagesFirstShared().clear();
 entityManager.remove(userAccount); 
```

但它会引发以下异常

```
 Cannot delete or update a parent row: a foreign key constraint fails (`testdb`.`Images`, CONSTRAINT `FK201C4A25D4C117` FOREIGN KEY (`firstSharedBy_USER_NAME`) REFERENCES `USERACCOUNT` (`USER_NAME`)) 
```

有任何线索的人吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:05:19.493

如果要在删除用户帐户时从数据库中删除图像，则需要将`cascade=CascadeType.ALL`属性添加到`@OneToMany`annotation 并删除 line `userAccount.getImagesFirstShared().clear();`。

如果您不想删除这些图像，那么您应该对图像进行循环，将`firstSharedBy`属性设置为 null 并保存每个`Images`实体。只有这样你才能删除`UserAccount`实体，因为它不会有约束连接。

# css - 自定义 django 表单小部件

> ID：15942508
> 
> 赞同：1
> 
> 时间：2013-04-11T06:57:53.443
> 
> 标签：css, django, django-models, django-forms, django-templates

表格.py

```
INCIDENT_LOCATIONS = (
    ('01\. Classroom', '01\. Classroom'),
    ('02\. Corridor', '02\. Corridor'),
    ('03\. Stairs', '03\. Stairs'),
    ('04\. Playground', '04\. Playground'),
    ('05\. Sportsground', '05\. Sportsground'),
    ('06\. Excursion', '06\. Excursion'),
)

class SearchForm(forms.Form):
    keywordsearch=forms.CharField(max_length=100,label="search")
    incident=forms.CharField(widget=forms.TextInput(attrs={'class':'special'}))
    location=forms.CharField(max_length=100)
    fromdate = forms.DateField(label="From Date", input_formats=['%d/%m/%Y'], validators=[validate_date])
    todate = forms.DateField(label="To Date", input_formats=['%d/%m/%Y'], validators=[validate_date]) 
```

1.如何编写css类来增加特定字段的长度，我要求事件字段比关键字搜索字段更长

2.如何在django中创建下拉框。主要目的是选择上述任何一个选项。这里选择我正在尝试做的位置字段中的事件位置。我不知道如何显示此表单在html页面中。

3.如何减少表单中日期字段的长度，因为它与普通文本框的长度相同。

请帮助我进行上述操作。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T07:13:45.083

1.如何编写css类来增加特定字段的长度，我要求事件字段比关键字搜索字段更长

您可以使用该`size`属性，

```
incident=forms.CharField(widget=forms.TextInput(attrs={'class':'special', 'size': '40'})) 
```

2.如何在django中创建下拉框。主要目的是选择上述任何一个选项。这里选择我正在尝试做的位置字段中的事件位置。我不知道如何显示此表单在html页面中。

不要使用 CharField，而是使用`ChoiceFIeld`,

```
location=forms.ChoiceField(choices=INCIDENT_LOCATIONS) 
```

3.如何减少表单中日期字段的长度，因为它与普通文本框的长度相同。

此字段的默认表单小部件是 TextInput。因此，就像第一条一样，您可以使用 size 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:20:28.650

编写自己的 css 类： [https ://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Widget.attrs](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Widget.attrs)

```
>>> name = forms.TextInput(attrs={'size': 10, 'title': 'Your name',})
>>> name.render('name', 'A name')
u'<input title="Your name" type="text" name="name" value="A name" size="10" />' 
```

对于创建下拉框，您可以使用： [https ://docs.djangoproject.com/en/dev/ref/forms/widgets/#selectmultiple](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#selectmultiple)

```
location=forms.CharField(max_length=100 widget=form.SelectMultiple) 
```

为了减少长度，您可以使用另一个 css 类，例如：

```
.myclass { width:100px; } 
```

# c++ - 如何仅使用一个#define 定义两个或多个值？

> ID：15942509
> 
> 赞同：0
> 
> 时间：2013-04-11T06:57:54.230
> 
> 标签：c++, c, c-preprocessor

例如，类似：

```
 #define{
        VAR1 53
        VAR2 71
        etc.
    } 
```

可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:00:49.797

-`#define`子句是对预处理器的命令，预处理器在将源代码传递给编译器之前对其进行*文本替换。*的语法`#define`是

```
#define VALUE TEXT_TO_REPLACE_VALUE 
```

就是这样。可能有一些方法可以有条件地创建表达式，但不是在单个语句中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:01:31.720

您可以使用`enum`，例如：

```
enum Gender
{
    GENDER_UNKNOWN = 0,
    GENDER_MALE    = 1,
    GENDER_FEMALE  = 2
}; 
```

然后，您可以`Gender`在 C++ 或`enum Gender`C 中声明类型变量，该变量应仅接受其元素之一作为值，否则编译器将抛出警告。

但`enum`不接受任何声明`#define`，您基本上只能将其与整数一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:13:10.410

您可以为 VAR 创建一个数组，并根据需要声明尽可能多的值。然后你可以像这样输入值，下面是一个例子

示例：我想将 5 个值存储到 VAR

```
int VAR[5];
for(i=0; i<5; i++){
    scanf("%d", &VAR[i]);
    } 
```

# emacs - 如何从 Emacs Lisp 中的 maphash 中脱颖而出？

> ID：15942513
> 
> 赞同：2
> 
> 时间：2013-04-11T06:58:19.970
> 
> 标签：emacs, elisp

`maphash`当我找到我想要的东西时，我需要尽早退出。

```
(defun find-in-hash (str hash)
  (let ((match nil))
    (maphash (lambda (key value)
      (if (string-prefix-p str key)
        (setq match key))) hash)
    match)) 
```

我将如何在 Emacs Lisp 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T07:14:33.777

如[如何中断 maphash](http://osdir.com/ml/lisp.allegro/2006-04/msg00018.html)中所述，您可以将 a`maphash`放在块内并通过 退出块`return-from`，即使用表单

```
(block stop-mapping
  (maphash
   ;; Function to call for all entries in ht.
   ;; A condition for when to stop mapping.
     (return-from stop-mapping)
   ht)) 
```

请注意，这需要`cl`可以通过`(require 'cl)`. [正如评论中提到的，](https://stackoverflow.com/questions/15942513/how-to-break-out-from-maphash-in-emacs-lisp#comment22725803_15942774)在纯 elisp 中可以通过以下方式实现相同的结果

```
(catch 'stop-mapping
  (maphash
   ;; Function to call for all entries in ht.
   ;; A condition for when to stop mapping.
     (throw 'stop-mapping retval)
   ht)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T22:37:39.197

这里有点自我推销:)

我一直在研究一组宏（尽管最近没有那么多），以使其更加统一，并且希望更容易对 Emacs Lisp 中可用的各种集合进行各种迭代。它是：[https](https://code.google.com/p/i-iterate/) ://code.google.com/p/i-iterate/它不是 100% 完成和测试的，但在大多数情况下它是。

正如已经说过的，唯一的突破方法`maphash`是抛出一个错误。但这只是 Emacs Lisp 在设计时获得的东西。许多较旧的语言具有用于迭代特定集合或执行数字迭代的特殊原语，而它们没有语言级别的迭代抽象。`loop`Emacs Lisp中包中的宏`cl`是解决这种情况的一种（好）方法，但就其本质而言，它必须镜像 Common Lisp 中的相同宏，并且该宏不可扩展（您不能向其中添加自己的驱动程序，甚至如果某些实现允许它）。

我工作的库试图在精神上效仿另一个 Common Lisp 库：`iterate`并从那里借鉴了许多想法。

只是为了说明`loop`宏可以做什么：

```
(loop with hash = (make-hash-table)
      initially 
      (setf (gethash 'a hash) 'b
            (gethash 'b hash) 'b
            (gethash 'c hash) 'c)      ; initialize variables 
                                       ; before any iteration happens
      for x being the hash-key in hash
      using (hash-value y)             ; define variables used in iteration
      collect (list x y) into z        ; some predefined functionality
      until (eq x y)                   ; termination condition
      finally (return (cons 'd z)))    ; returning from iteration
;; (d (a b) (b b)) 
```

得益于它对哈希表、数组或列表的工作方式类似。

`++`使用宏的类似代码：

```
(++ (with ((hash (let ((h (make-hash-table)))
                   (setf (gethash 'a h) 'b
                         (gethash 'b h) 'b
                         (gethash 'c h) 'c) h))))
  (for (x . y) pairs hash)
  (collect (list x y) into z)
  (when (eq x y) (return (cons 'd z))))
;; (d (b b) (a b)) 
```

（我还没有类似的东西`initially`）

# ruby-on-rails-3.2 - 对嵌套资源进行授权时出现 Cancan 错误

> ID：15942515
> 
> 赞同：1
> 
> 时间：2013-04-11T06:58:24.130
> 
> 标签：ruby-on-rails-3.2, cancan

我正在尝试设置对嵌套资源（专业）的访问权限。“.../companies/:id/specialties”。访问不属于我的公司工作正常。但我无法进入我的专长。请帮助我，因为我花了 4 个小时搜索解决方案，但没有任何结果。我有以下内容：

康康 1.6.9

```
//routes.rb
  resources :companies do
    resources :specialties
  end 
```

//能力.rb

```
class Ability
  include CanCan::Ability

def initialize(user)
  user ||= User.new # guest user (not logged in)
  if user.super_admin?
    can :open, :admin_pages
  else
    cannot :open, :admin_pages
  end

  can [:edit, :update, :destroy], Company do |company|
    company.try(:admin) == user
  end

  can :manage, Specialty 
  end
end 
```

//company_controller.rb

```
class CompaniesController < ApplicationController
  load_and_authorize_resource
  def new
    @company = current_user.build_company
  end

  def create
    @company = current_user.build_company params[:company]
    if @company.save
      redirect_to root_path, notice: I18n.t('notices.company_successfully_created')
    else
      render :new
    end
  end

  def edit
    @company = Company.find params[:id]
  end

  def update
    @company = current_user.company
    if @company.update_attributes(params[:company])
      redirect_to root_path, notice: I18n.t('notices.company_successfully_updated')
    else
      render action: 'edit'
    end
  end

end 
```

//specialties_controller.rb

```
class SpecialtiesController < ApplicationController
  load_and_authorize_resource :company
  load_and_authorize_resource  through: :company

  before_filter :company, except: [:destroy]

  def index
    @specialties = @company.specialties
    respond_to do |format|
      format.json { 
        resource = params[:resource_type]=='user' ? User.new : Profile.new 
        render :json => {:success => true, :html => (render_to_string '_specialties_list.html.slim', :locals => {:resource => resource})} 
      }
      format.html {}
    end
  end

  def new
    @specialty = @company.specialties.build
  end

  def create
    @specialty = @company.specialties.build params[:specialty]
    if @specialty.save
      redirect_to company_specialties_path, notice: I18n.t('notices.specialty_successfully_created')
    else
      render :new
    end
  end

  def show
    @specialty = Specialty.find params[:id]
  end

  def edit
    @specialty = Specialty.find params[:id]
  end

  def update
    @specialty = Specialty.find params[:id]
    if @specialty.update_attributes(params[:specialty])
      redirect_to company_specialties_path, notice: I18n.t('notices.specialty_successfully_updated')
    else
      render action: 'edit'
    end
  end

  def destroy
    @specialty = Specialty.find(params[:id])
    @specialty.destroy
    redirect_to company_specialties_path
  end

  private

    def company
      @company = Company.find(params[:company_id])
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:45:18.650

在您的能力文件中，您仅授予公司管理员对同一公司的 [:edit, :update, :destroy] 访问权限。

当他尝试访问专业控制器中的任何操作时，第一个 load_and_authorize_call :company 将尝试读取公司。阅读公司后，会通过公司找到该专业，并检查用户是否对该专业有特定动作的权限。

在这种情况下，用户拥有专业的所有权限，但没有公司的读取权限，所以问题

因此，添加 :read 权限或使用 :manage 将所有权限授予公司管理员。

```
can [:read, :edit, :update, :destroy], Company do |company|
  company.try(:admin) == user
end 
```

# php - 如何在没有 post 方法的情况下获取变量

> ID：15942517
> 
> 赞同：-2
> 
> 时间：2013-04-11T06:58:31.597
> 
> 标签：php, mysql

我使用 API 发送消息，我必须将其保存到数据库中。但它没有保存在其中，其他字段已保存但 sms_txt 未保存，我使用以下代码插入：

```
 $msg=urlencode($_REQUEST['msg']);
  $ins="insert into sent_sms_detail(mobile,group_id,sms_txt,dt,tm)values('$no','$id','$msg','$dttoday','$tm')";
  mysql_query($ins); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:01:57.967

**先提交按钮！**

```
<form method="post" > <textarea class="area" onKeyUp="countChar(this)" style="overflow:auto; width: 270px; height: 150px; float:left;" rows="10" cols="20" id="msg" name="msg"></textarea> </div> <div class="massage_name"> <p> Max 160 Char</p> <input type="text" class="max" style="width:80px; margin:10px 0 0 0;" readonly="readonly" id="val_num" name="val_num"><input type="submit"></div></form> 
```

尝试这个。（暂时忘记 URLencode）

```
$msg=$_POST['msg'];
  $ins="insert into sent_sms_detail(mobile,group_id,sms_txt,dt,tm)values('$no','$id','$msg','$dttoday','$tm')";
  mysql_query($ins); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:20:07.583

你用的是 <input type="text" **name="msg"** />

我认为您缺少表单中的名称字段！

写 print_r($_REQUEST) 作为第一行。您可以看到一组 post/get 值。在那里你可以看到 msg 字段的值。如果它为空，那么表单一定有问题。

# embedded - 3G模块在ppp连接后如何获取信号强度？

> ID：15942522
> 
> 赞同：1
> 
> 时间：2013-04-11T06:58:48.783
> 
> 标签：embedded

我正在使用 forlinx ok6410 板和 3G 模块如何在 ppp 连接后获取 Forlinx 3G 模块的信号强度？可以通过AT(AT+CSQ)命令实现，但是在ppp连接后AT不能发送出去，那么如何获取信号强度呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:30:11.480

不确定您的特定设备，但通常使用调制解调器 AT 命令集设备，您可以进入命令模式，同时通过发送序列保持连接：

> <1 秒暂停>+++<1 秒暂停>

然后可以使用 ATO 命令重新进入数据模式（即 AT-Oh，而不是 AT-Zero）。

# matlab - Matlab-第3列的输出值，当第1列的元素是A时，第2列的元素是B使用循环？

> ID：15942523
> 
> 赞同：0
> 
> 时间：2013-04-11T06:59:01.410
> 
> 标签：matlab, loops, matrix

早安/午安~

我有一个`H`大小为 6800x3 的矩阵。我需要在整个矩阵中为 [col 1 = `A`and col 2 = ] 找到第 3 列的所有值。`B`对于 col 1 和 col 2 的所有组合。

我怎样才能通过循环找到价值？

```
[M N]= size(H);  %M = 6800, N = 3
x = H(:,1);     % column 1
y = H(:,2);     % column 2
z = H(:,3);     % column 3
for i= 1:M 
    if H(M:1)==A && H(M:2)==B  %for every combination of x and y
    Output=Z(M,3);                %Output all value of Z 
end 
```

任何帮助将不胜感激。=D

谢谢~

例如，

```
H = [1 2 1 ;...
     1 2 3 ;...
     2 2 5 ;...
     1 2 8 ] 
```

对于 A=1，B=2，

```
z = [1 3 8] 
```

像这样的东西。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:03:53.440

你可以在没有循环的情况下做到这一点

```
Output = H( H(:,1) == A & H(:,2) == B, 3 ); 
```

例如：

```
>>  H = [1 2 1 ;...
         1 2 3 ;...
         2 2 3 ;...
         1 2 8 ]
>> A = 1; B = 2;
>> Output = H( H(:,1) == A & H(:,2) == B ,3 )
Output =
     1
     3
     8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:41:42.233

如果我理解正确，您想按第 1 列和第 2 列分组。这是一种方法：

```
H = [1 2 1 ;...
     1 2 3 ;...
     2 2 5 ;...
     1 2 8 ;...
     2 2 9];

[~, I, J] = unique(H(:, 1:2), 'rows');
result = accumarray(J, (1:length(J))', [], @(x) {H(x, :)}); 
```

结果将是：

```
>> result{:}

ans =

     1     2     3
     1     2     8
     1     2     1

ans =

     2     2     9
     2     2     5 
```

# c - 如何在ubuntu for c语言中安装lprotobuf-c

> ID：15942535
> 
> 赞同：1
> 
> 时间：2013-04-11T06:59:51.557
> 
> 标签：c, linux, ubuntu, compiler-construction, makefile

```
/usr/bin/ld: cannot find -lprotobuf-c
collect2: ld returned 1 exit status
make: *** [test_apl] Error 1 
```

这些是我得到的错误。

我已经安装了`apt-get install protobuf-c-compiler`，但`makefile`仍然没有运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:24:57.047

[正确的安装过程](http://wiki.openstreetmap.org/wiki/Osm2pgsql)`protobuf-c-compiler`需要在
Ubuntu 下编译时`(12.04 LTS)`，需要以下依赖：

```
sudo apt-get install build-essential libxml2-dev libgeos++-dev libpq-dev libbz2-dev proj libtool automake 
```

如果您想要`PBF`阅读支持，您还需要`libprotobuf-c0-dev`and `protobuf-c-compiler`：

```
sudo apt-get install libprotobuf-c0-dev protobuf-c-compiler 
```

`libprotobuf-c0-dev`至少需要在`version 0.14-1\. Ubuntu <= 10.04`has only`0.11`中，因此您需要从源代码构建它。从源代码编译：

```
sudo apt-get install protobuf-compiler libprotobuf-dev libprotoc-dev
svn checkout http://protobuf-c.googlecode.com/svn/trunk/ protobuf-c-read-only
cd protobuf-c-read-only
./autogen.sh
make
sudo make install 
```

之后，按照源代码[说明](http://wiki.openstreetmap.org/wiki/Osm2pgsql#From_source_.28generic.29)进行操作。

**对于链接错误：**`libprotobuf-c.so`构建[可执行文件](https://code.google.com/p/protobuf-c/issues/detail?id=73)时 链接失败。

# javascript - 在 HTML 中包装 JSON 元素

> ID：15942536
> 
> 赞同：0
> 
> 时间：2013-04-11T06:59:52.643
> 
> 标签：javascript, jquery, json

如果我这样做，我会在 firebug 中收到所有正确的数据

```
 $.getJSON("https://www.googleapis.com/customsearch/v1?key=AIzaSyDPuIrijE0IQ6330vMLN2p-L_4J6y_G60c&cx=013036536707430787589:_pqjad5hr1a&q=cars&alt=json&callback=?",
               {

               },
               function (recievedData) {
                   console.log(recievedData);
}); 
```

数据的结构是这样的（真的很长，所以我把它放在了小提琴中）

[http://jsfiddle.net/tsDrv/](http://jsfiddle.net/tsDrv/)

如果您想完整查看，请将其放入浏览器： [https ://www.googleapis.com/customsearch/v1?key=AIzaSyDPuIrijE0IQ6330vMLN2p-L_4J6y_G60c&cx=013036536707430787589:_pqjad5hr1a&q=cars&alt=json](https://www.googleapis.com/customsearch/v1?key=AIzaSyDPuIrijE0IQ6330vMLN2p-L_4J6y_G60c&cx=013036536707430787589:_pqjad5hr1a&q=cars&alt=json)

我想做的就是打开“物品”并将它们包裹起来

*   显示在页面上，所以我试试这个：

    ```
    $.getJSON("https://www.googleapis.com/customsearch/v1?key=AIzaSyDPuIrijE0IQ6330vMLN2p-L_4J6y_G60c&cx=013036536707430787589:_pqjad5hr1a&q=cars&alt=json&callback=?",
                   {

                   },
                   function (recievedData) {
                       $.each(recievedData, function (i, item) {
                           $('#theBody').append(
                               $(document.createElement('li')).text(item.items)
                           );
                       });
                   }); 
    ```

    Firebug 没有读取错误，但没有显示任何内容，我确实尝试了另一种方式并不断获取 [object Object] 如何深入访问 JSON 数组以在页面上显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:29:54.430

Since you want to append li elements, you should wrap it into ul elements. Since your json has deep structure, you should implement a recursive element builder function which calls itself till a leaf is met.

If your aim is finally to display the JSON content without styling, you should hav a pre element and set its text to `JSON.stringify(yourJsonObject, null, "\t")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:16:29.953

以下是代码。目前我已经使用 阅读片段`item.snippet`，类似地您可以阅读`item.title`,`item.displayLink`等`item.formattedUrl`。

```
$.getJSON("https://www.googleapis.com/customsearch/v1?key=AIzaSyDPuIrijE0IQ6330vMLN2p-L_4J6y_G60c&cx=013036536707430787589:_pqjad5hr1a&q=cars&alt=json&callback=?",
               function (recievedData) {
                //console.log(recievedData);
                   $.each(recievedData.items, function (i, item) {
                       $('#theBody').append(
                           $(document.createElement('li')).text(item.snippet)
                       );
                   });
               }); 
```

**[演示](http://jsfiddle.net/maheshsapkal/evXDJ/)**

# javascript - eval() 在全局上下文和函数上下文中的奇怪行为。IE9 和 IE10

> ID：15942543
> 
> 赞同：1
> 
> 时间：2013-04-11T07:00:21.747
> 
> 标签：javascript, internet-explorer-9, jscript

我用这样的代码在全局上下文中调用了 eval() 函数：

```
eval( (new ActiveXObject("Scripting.FileSystemObject")).OpenTextFile("/BaseScripts/sft.js", 1).ReadAll(),  ); 
```

之后，“sft.js”脚本文件中的所有局部变量、函数、对象都将添加到我的全局上下文中。但是，如果在本地函数中执行相同的 eval 调用：

```
function run_eval(path) {
   eval( (new ActiveXObject("Scripting.FileSystemObject")).OpenTextFile(path, 1).ReadAll(),  );
}

run_eval("/BaseScripts/sft.js"); 
```

“sft.js”脚本文件中的局部变量、函数、对象将不会添加到我的全局上下文中。为什么 ？根据文档，这两个调用都是*针对*全局对象建立的。为什么只有第一次调用将“sft.js”脚本文件中的变量添加到全局对象？不要保存情况，并`run_eval()`在全局上下文中显式调用：

```
 run_eval.call(this, "/BaseScripts/sft.js");
   //or
   run_eval.call(RuntimeObject(), "/BaseScripts/sft.js"); 
```

两个调用都等于 equ by result to `run_eval("/BaseScripts/sft.js");`。欢迎任何意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T15:02:56.387

给定这个库（lib1.js）：

```
// no "var" variables go into the GLOBAL OBJECT/SCOPE
goLib1 = {'name' : 'lib1', 'version' : '0.01', 'check' : function() {return goRoot === this;}};

// functions go into the CURRENT OBJECT/SCOPE
function f1() {
  return "f1";
}

function f2() {
  return "f2";
} 
```

，这个主脚本（main.js）：

```
// globals (no "var" + prefix to leave no room for doubt
goFS  = new ActiveXObject("Scripting.FileSystemObject");
goRoot = this;
goAct = "TopLevelEval";
//goAct = "EvalInFunction";

// should be variadic
function print(x) {
  WScript.Echo(x);
}

// 'import' a library/module; hint wrt 'export'
function loadLib(lib) {
  function flocal() {
    return "I'm a local function in function loadLib()";
  }
  eval(goFS.OpenTextfile(lib).ReadAll());
  print("in loadLib: f(1) => " + f1() + " f2() => " + f2());
  print("flocal() = " + flocal());
  print("goRoot === this: " + (goRoot === this));
  // 'export' function(s)
  //this.f1 = f1;
  goRoot.f1 = f1;
}

print(goAct);
if (goAct == "TopLevelEval") {
  eval(goFS.OpenTextfile(".\\lib1.js").ReadAll());
} else {
  loadLib(".\\lib1.js");
}

print("loaded library " + goLib1.name + " v. " + goLib1.version + " 'goRoot === this'-check: " + goLib1.check() + 

")");
print("typeof f1: " + (typeof f1));
print("typeof f2: " + (typeof f2));
print("typeof flocal: " + (typeof flocal)); 
```

，输出“TopLevelEval”：

```
TopLevelEval
loaded library lib1 v. 0.01 'goRoot === this'-check: false)
typeof f1: function
typeof f2: function
typeof flocal: undefined 
```

，并输出“EvalInFunction”：

```
EvalInFunction
in loadLib: f(1) => f1 f2() => f2
flocal() = I'm a local function in function loadLib()
goRoot === this: true
loaded library lib1 v. 0.01 'goRoot === this'-check: false)
typeof f1: function
typeof f2: undefined
typeof flocal: undefined 
```

我们有证据

*   你是对的——函数中的“this”是“全局this”，而方法中的“this”不是。所以 loadLib() 可以访问全局上下文
*   从概念上讲，eval 就像手动输入代码而不是函数调用。
*   通过直接在 loadLib() 中写入/评估`goLib1 = {'name' : 'lib1', ...`（in），您可以更改全局上下文，因为`var`which 不存在的含义（显然是语言学家、哲学家或收缩者的情况）是“请将此变量放入 this” .
*   通过直接在 loadLib() 中写入/评估`function f1() { ...`(in)，您可以执行与写入相同的操作`function flocal() { ...`- 您定义了 loadLib() 的本地函数，它不应该（也不）在 loadLib() 中可见范围。
*   如果你想让库中的函数可以从导入函数的“外部”访问，你可以使用这样的赋值`this.f1 = f1;`- 所有这些，因为 J(ava)script 中没有“local”关键字，你可以删除它来创建函数全球的。
*   或相反亦然。

# c# - 如何在 C# 中将滚动条修复为顶部天气而不是面板底部？

> ID：15942547
> 
> 赞同：0
> 
> 时间：2013-04-11T07:00:34.997
> 
> 标签：c#, .net, size, scrollbar, panel

我有主面板容器并将我的控件放在上面，面板大小与我的表单相同。我已通过属性将下面给出的值提供给 Panel。

```
AutoScroll=true;
AutoScrollMargin=0,120;
AutoScrollMinSize=1024,768;
AutoSize=true; 
```

但问题是当我打开表单时，默认情况下它会向下滚动滚动条，这看起来很奇怪。我希望当我打开表单时它不应该向下滚动，但它应该是滚动顶部，当我用鼠标滚动它时，我应该向下滚动。

任何机构都可以帮助我解决面板属性、代码或解决此问题的任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:47:45.947

通过设置`AutoScroll=true`，您告诉滚动框在添加文本时自动向下滚动。这对于日志等很有用。`false`如果这不是您想要的行为，请将其设置为。

# c# - 使用正则表达式替换字符但不替换转义字符

> ID：15942549
> 
> 赞同：2
> 
> 时间：2013-04-11T07:00:38.307
> 
> 标签：c#, regex, replace, escaping

我有一个字符串，我想用它`Regex`来替换`[`to `{`，但如果`[`被转义，请忽略它，如下所示：

```
abc[def\[ghi 
```

至

```
abc{def\[ghi 
```

我怎样才能做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:21:32.790

用这个：

```
Regex regexObj = new Regex(
    @"(?<=     # Make sure that this is true before the start of the match:
     (?<!\\)   # There is no single backslash,
     (?:\\\\)* # but if there are backslashes, they need to be an even number.
    )          # End of lookbehind assertion.
    \[         # Only then match a bracket", 
    RegexOptions.IgnorePatternWhitespace); 
```

# url - 网址模式不起作用

> ID：15942550
> 
> 赞同：0
> 
> 时间：2013-04-11T07:00:41.070
> 
> 标签：url, servlets, filter

我是 java web 编程的新手，我的老板给我分配了一项艰巨的任务（对我来说）。我们在 tomcat 服务器中托管了一个 html 表单，它被提交到不同服务器中的 php 页面。现在我的老板想要添加表单中的验证码，但不想在 php 页面中进行身份验证。所以我想我可能会实现一个过滤器并在那里进行身份验证。

```
<form action="http://differentproject.com/display.php" method="Post">
            <input type="text" name="text"></input>
            <input type="Submit" value="submit"/>
        </form> 
```

所以让我们考虑上面是我的 html 页面和表单提交给 display.php。我想用过滤器拦截它，但下面的 url 模式不起作用。

```
<filter-mapping>
        <filter-name>test</filter-name>
        <url-pattern>http://differentproject.com/display.php</url-pattern>
    </filter-mapping> 
```

这也不是，

```
<filter-mapping>
            <filter-name>test</filter-name>
            <url-pattern>/display.php</url-pattern>
        </filter-mapping> 
```

我认为它不起作用，因为 url 超出了项目范围。可以使它起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:29:47.900

```
it is submitted to a php page in different server 
```

You can only filter or intercept this on the different server (the php server, not the tomcat server) because as soon as the user submits the form, the browser makes a request to the different server. Your tomcat server is not involved anymore.

You would either need to

*   change the original form to no longer submit to the different server
*   get the php server to redirect the request to where you want it to go

# javascript - 悬停对象时如何更新 X 和 Y 坐标

> ID：15942553
> 
> 赞同：0
> 
> 时间：2013-04-11T07:00:43.730
> 
> 标签：javascript, jquery, image, hover

当我在这样的 div 中单击时，我的图像会改变位置：

```
mainDiv.click(function (e) {

    var mouseX = e.clientX,
        mouseY = e.clientY;

        test2 = Math.atan(mouseY/mouseX);
        test3 = ((test2 * 180) / 3.14);

        $("#hgun").rotate(test3);  
}); 
```

但它只会在我在 div 内单击时改变位置。当我将鼠标悬停在 div 内时，如何让它改变位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:06:31.217

.hover() 方法绑定了 mouseenter 和 mouseleave 事件的处理程序。您可以使用它在鼠标位于元素内时简单地将行为应用于元素。

**它是这样调用的：**

```
$(selector).hover(handlerIn, handlerOut) 
```

**简称：**

```
$(selector).mouseenter(handlerIn).mouseleave(handlerOut); 
```

**在你的情况下，这将是：**

```
 mainDiv.hover(function (e) {
        var mouseX = e.clientX,
            mouseY = e.clientY;

        test2 = Math.atan(mouseY / mouseX);
        test3 = ((test2 * 180) / 3.14);
        $("#hgun").rotate(test3);
    },
function (e) {
    //On mouseleave
}); 
```

***进一步阅读***： [jQuery 悬停文档](http://api.jquery.com/hover/)， [jQuery 鼠标事件](http://api.jquery.com/category/events/mouse-events/)

* * *

**更新**，基于作者的评论：

我不确定您到底想实现什么，但如果您希望每次鼠标在容器内移动时都进行计算和相关操作，您可以使用[mousemove](http://api.jquery.com/mousemove/)事件。

我已经根据您的代码做了一个简单的 Fiddle，**请查看**：http : [//jsfiddle.net/sQ4Z4/1/](http://jsfiddle.net/sQ4Z4/1/)

我使用了我发现的第一个[jQuery Rotate 插件](https://code.google.com/p/jqueryrotate/)，它可能不是你使用的那个，但它应该足以让你朝着正确的方向前进。

**基本上你的代码应该是这样的：**

```
mainDiv.mousemove(function (e) {
    var mouseX = e.clientX,
        mouseY = e.clientY;

    test2 = Math.atan(mouseY / mouseX);
    test3 = ((test2 * 180) / 3.14);
    $("#hgun").rotate(test3);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:03:25.460

更改此行：

`mainDiv.click(function (e) {`

至

`mainDiv.hover(function (e) {`

`hover`接受两个函数：第一个在 上执行`mouseenter`，第二个在`mouseleave`.

# windows - 运行批处理文件时隐藏 CMD

> ID：15942555
> 
> 赞同：4
> 
> 时间：2013-04-11T07:00:53.853
> 
> 标签：windows, batch-file

我们可以在运行批处理文件时隐藏命令提示符吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:46:34.393

[这种方法](https://superuser.com/questions/62525/run-a-completly-hidden-batch-file)对我有用，但是我也发现了[this](http://www.mp3car.com/general-mp3car-discussion/55195-how-to-make-a-batch-file-start-hidden-or-minimized.html)和[this](https://stackoverflow.com/questions/3677773/how-can-i-run-a-windows-batch-file-but-hide-the-command-window)和[this](http://www.ntwind.com/software/hstart.html)等[...。](https://www.google.com.au/#safe=off&output=search&sclient=psy-ab&q=start+batch+file+hidden.&oq=start+batch+file+hidden.&gs_l=hp.3..0i22i30l4.840.4560.0.4775.24.22.0.2.2.1.261.4592.0j12j10.22.0...0.0...1c.1.8.psy-ab.DDI8HGaPX9Q&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.45107431,d.dGI&fp=211d78910c70c5a4&biw=1280&bih=713)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T03:08:57.510

我很有信心我最喜欢这种方法。将以下代码复制并粘贴到 .vbs 文件中。从那里您将调用批处理文件...因此请确保编辑最后一行以指定批处理文件的路径和名称：

```
Const HIDDEN_WINDOW = 12 

strComputer = "." 
Set objWMIService = GetObject("winmgmts:" _ 
& "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2") 
Set objStartup = objWMIService.Get("Win32_ProcessStartup") 

Set objConfig = objStartup.SpawnInstance_ 
objConfig.ShowWindow = HIDDEN_WINDOW 
Set objProcess = GetObject("winmgmts:root\cimv2:Win32_Process") 
errReturn = objProcess.Create("C:\PathOfFile\name.bat", null, objConfig, intProcessID) 
```

它肯定对我有用。欢迎评论：）

# visual-studio-2010 - 在 VisualStudio 单元测试中使用 Safenet HASP

> ID：15942559
> 
> 赞同：1
> 
> 时间：2013-04-11T07:01:15.153
> 
> 标签：visual-studio-2010, unit-testing, hasp

我一直在我的 .Net 4.0（VS2010，Win 7）应用程序中使用 HASP 5.0，没有任何问题。

我正在添加一些新功能并尝试为其创建单元测试。我无法从登录到 hasp 许可证的测试项目中运行代码。使用供应商代码登录后，我得到 HaspStatus.HaspDotNetDllBroken {652}。相同的代码在主项目中运行正常。

我复制了以下文件：

```
apidsp_windows.dll
apidsp_windows_x64.dll
hasp_net_windows_x64.dll
hasp_windows_NNNNN.dll (my client DLL)
hasp_windows_x64_114204.dll 
```

进入测试执行目录，并在测试项目中添加对 hasp_net_windows.dll 的引用。

我也尝试在测试函数（不是主代码库）中有问题的代码，但有同样的问题。

有任何想法吗

# c - execl 是否需要 dup2()

> ID：15942560
> 
> 赞同：1
> 
> 时间：2013-04-11T07:01:19.640
> 
> 标签：c, exec, fork, ipc, pipe

使用管道时 是否需要更换`stdin`末端？`pipe`

我有一个应用程序：-

*   创建管道，
*   分叉一个子进程，然后
*   execl() 新子进程中的新进程映像，

但我遇到了两个概念问题。

1.  是否需要使用`dup()`或`dup2()`更换`stdin`？显然，只使用`fd`管道会更容易。（*我对此几乎不需要了解*）

2.  如果你可以只使用管道 `fd`中的，你如何 在 execl 接受参数时传递一个整数？ `fd``execl()``char *`

我无法弄清楚在执行 execl() 后仍然打开的内容，以及如何从新执行的进程中访问该信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:14:53.913

这取决于您正在运行的命令。但是，许多 Unix 命令从标准输入读取并写入标准输出，因此如果管道没有设置为写入端是一个命令的输出，而读取端是下一个命令的输入，则不会发生任何事情（或，更准确地说，程序从输入不是来自的地方读取，或者写入到不会被读取的地方，或者挂起等待你在终端输入输入，或者不按预期工作）。

如果您的管道位于文件描述符 3 和 4 上，则您执行的命令必须知道从 3 读取并写入 4。您可以使用 shell 处理它，但与使用`dup2()`.

不; 您没有义务使用`dup2()`，但这样做通常更容易。您可以关闭标准输出，然后使用 plain`dup()`而不是`dup2()`.

如果您使用`dup2()`管道，请不要忘记关闭*两个*原始文件描述符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:22:37.697

您可能正在尝试将数据提供给系统上存在的子进程，但如果您也在编写子进程，那么您不需要使用`dup()`and `stdin`。

`execl()`使父进程中所有打开的文件描述符保持打开状态，以便您可以：

```
int fd[2];
pipe(fd);
if (fork() == 0)
{
    char tmp[20];
    close(fd[1]);
    snprintf(tmp, sizeof(tmp), "%d", fd[0]);
    execl("client", tmp, NULL);
    exit(1);
} 
```

并在客户端代码中：

```
int main(int argc, char** argv)
{
    int fd = strtod(argv[1], NULL, 10);
    /* Read from fd */
} 
```

# python - 基于文件名而不是Python中的数据类型复制文件

> ID：15942564
> 
> 赞同：0
> 
> 时间：2013-04-11T07:01:37.203
> 
> 标签：python, copy, filenames

我对 Python 很陌生。我想根据名称而不是基于数据类型将一组文件从一个文件夹复制到另一个文件夹。所以我有一个源文件夹，其中包含 Hello.txt、Hello.dat、Hello.pdf、World.txt、World.dat、Word.pdf 等文件。现在我只想将以“Hello”开头的文件复制到另一个文件夹中。我尝试了很多方法，但似乎都基于数据类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:18:02.937

```
import os
import shutil
files = os.listdir("Path")
for file in files:
    if file.startswith("Hello"):
       shutil.copy("Full path to file", "Full path to dest folder") 
```

# backbone.js - 如何在执行路由方法之前运行“中间件”功能？

> ID：15942566
> 
> 赞同：12
> 
> 时间：2013-04-11T07:01:40.077
> 
> 标签：backbone.js

假设我有一个骨干路由器，例如：

```
routes:
  ""                          : "homepage"
  "catalog/:id"               : "catalogPage"
  "catalog/:id/products/:id2" : "productPage"

homepage   :           -> doStuff()
catalogPage: (id)      -> doOtherStuff()
productPage: (id, id2) -> doEvenMoreStuff() 
```

和一个功能：

```
executeBefore = -> console.log("hello") 
```

如果我希望在每次调用路由时以及在相应的路由方法之前调用和执行 executeBefore，除了在每个路由方法的开头插入对 executeBefore 的调用之外，还有一种简单的方法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-11T08:06:12.710

您可以覆盖`route`路由器类中的函数以拦截路由调用：

```
var Router = Backbone.Router.extend({
    routes: {
        "" : "homepage",
        "catalog/:id" : "catalogPage"
    },

    route: function(route, name, callback) {
        var router = this;
        if (!callback) callback = this[name];

        var f = function() {
            console.log('route before', route);
            callback.apply(router, arguments);
            console.log('route after', route);
        };
        return Backbone.Router.prototype.route.call(this, route, name, f);
    },

    homepage: function() {
        console.log("homepage");
    },
    catalogPage: function(id) {
        console.log("catalogPage "+id);
    }
});

var r = new Router();
Backbone.history.start(); 
```

还有一个演示[http://jsfiddle.net/nikoshr/EdLzh/](http://jsfiddle.net/nikoshr/EdLzh/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-29T08:14:18.730

自 2014 年 2 月 13 日起，您可以使用`router.execute(callback, args, name)`( [http://backbonejs.org/#Router-execute](http://backbonejs.org/#Router-execute) )。

所以你的拦截器看起来像这样

```
routes: {
    '': 'homepage',
    'catalog/:id': 'catalogPage',
    'catalog/:id/products/:id2': 'productPage'
},
execute: function(callback, args, name) {
    // Do your stuff here
    executeBefore();

    if (callback) callback.apply(this, args);
} 
```

[https://github.com/jashkenas/backbone/commit/791033dc1aab53e9e5c9366f64a854224f851231](https://github.com/jashkenas/backbone/commit/791033dc1aab53e9e5c9366f64a854224f851231)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-17T22:27:09.807

你也可以使用[backbone.routefilter](https://github.com/boazsender/backbone.routefilter)插件。

您将能够为所有路线设置过滤器

```
var Router = Backbone.Router.extend({
  routes: {
    "": "index",
    "page/:id": "page"
  },
  before: function( route, params ) { ... },
  after: function( route, params ) { ... },
  index: function(){ ... },
  page: function( route ){ ... }
}); 
```

或者选择一些路线

```
var Router = Backbone.Router.extend({
  routes: {
    "": "index",
    "page/:id": "page"
  },
  before: {
    "": function( route ) { ... },
    "page/:id": function( route ) { ... }
  },
  after: function( route ) { ... },
  index: function(){ ... },
  page: function( route ){ ... }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T08:13:22.067

你可以玩事件：

```
Backbone.history.on('route', function () {
    // Do your stuff here.
    executeBefore();
}); 
```

> 访问 #help/uploading 将触发路由器的 route:help 事件。

显然，这将在重定向之前触发：

[https://github.com/documentcloud/backbone/blob/master/backbone.js#L1243](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1243)

```
Backbone.history.route(route, function(fragment) {
    var args = router._extractParameters(route, fragment);
    callback && callback.apply(router, args);
    router.trigger.apply(router, ['route:' + name].concat(args));
    router.trigger('route', name, args);
    Backbone.history.trigger('route', router, name, args);
}); 
```

# javascript - 悬停时暂停jquery动画，点击停止

> ID：15942571
> 
> 赞同：0
> 
> 时间：2013-04-11T07:01:55.953
> 
> 标签：javascript, jquery

我正在尝试制作一个网页，其中一组 DIV 从上到下循环（参见小提琴）。然后，每当您将鼠标悬停在 div 的某个部分（在本例中为 STOP 链接）时，动画就会停止，然后在鼠标移出时再次播放。我现在缺少的是一种在单击 STOP 链接时停止动画的方法。我在链接上添加了停止功能，但它不起作用。我制作的悬停功能可能存在冲突或某种冲突。

提前感谢您的帮助，并对这个愚蠢的问题感到抱歉。

链接到小提琴：http: [//jsfiddle.net/Psp9R/](http://jsfiddle.net/Psp9R/)

查询：

```
$(document).ready(function() {

$(".row").last().addClass("last");
$(".mholder").each(function() {
    var i = 0;
    $(this).find(".row").each(function() {
        var $this = $(this);
        $this.css("bottom", i);
        i += $this.height();
    });
});

// PLAY AND STOP
$('#start').click(function() {
    $("#overlay").hide();
    var countScrolls = $('.mholder .row').length;

    for (var i=0; i < countScrolls; i++) {
       doScroll($('.mholder .row:nth-child(' + i + ')'));
    }
});

$('.stop').click(function() {
    var countScrolls = $('.mholder .row').length;
    $("#overlay").show();
     for (var i=0; i < countScrolls; i++) {
       $('.mholder .row:nth-child(' + i + ')').stop();
    }
});

//PAUSE ON HOVER

$(".stop").hover(function () { 
    var countScrolls = $('.mholder .row').length;
     for (var i=0; i < countScrolls; i++) {
       $('.mholder .row:nth-child(' + i + ')').stop();
    }
}, function () {
    var countScrolls = $('.mholder .row').length;

    for (var i=0; i < countScrolls; i++) {
       doScroll($('.mholder .row:nth-child(' + i + ')'));
    }
});

});

function doScroll($ele) {
var bottom = parseInt($ele.css("bottom"));
    if (bottom < -60) { //bit arbitrary!
    var $lastEle = $ele.closest('.mholder').find(".last");
    $lastEle.removeClass("last");
    $ele.addClass("last");
    var bottom = (parseInt($lastEle.css("bottom")) + $lastEle.height());
    $ele.css("bottom", bottom);
    }
    $ele.animate({
        bottom: (parseInt(bottom) - 80)
    }, 2200, 'linear', function() {
        doScroll($(this))
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:14:29.183

实现一个间隔，当单击停止链接时清除该间隔，然后在鼠标移出时再次启动。

setInterval - [https://developer.mozilla.org/en/docs/DOM/window.setInterval](https://developer.mozilla.org/en/docs/DOM/window.setInterval)

clearInterval - [https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:55:36.557

您知道吗，当您单击停止时，它确实会停止，但是当您将鼠标移出停止按钮时，浏览器会理解您触发了 mouseout 事件并恢复其 jogging 。因此，您必须告诉浏览器您单击停止按钮并忽略 mouseout 事件。`iStop`我通过添加一个标志来命令浏览器停止来更改您的代码。您可以在以下位置查看：[jsFiddle](http://jsfiddle.net/Psp9R/1/)

# highcharts - Highcharts条形图：如何防止缺失值占用空间

> ID：15942573
> 
> 赞同：0
> 
> 时间：2013-04-11T07:02:08.880
> 
> 标签：highcharts

我想在 x 轴上创建一个带有 5 个不同日期的条形图（又名柱形图）。对于每个日期，我想显示代表该日期我马厩中最健康的前 3 匹马的健康水平的条形图。但是，我有 20 匹马，并且在至少一天中最健康的前 3 名中的不同马的总数最多为 15 匹。假设对于这个图表，有 9 匹不同的马将出现在图表上的至少一个日期。

问题：highcharts 将条形绘制得足够细，以至于它可以在每个日期显示所有 9 匹马，即使每个日期只显示三匹马。这意味着条非常细，并且有大量的空白。不仅如此，他的实际条形间隔不规则，因为 highcharts 似乎在每个日期为所有 9 匹马节省了一个特定的空间。

有什么方法可以告诉 highcharts 不要在 x 轴上为我可能想在另一天显示但不想在相关日期显示的马分配空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:21:18.547

这完全取决于您如何设置数据。如果您想为每匹马制作一个系列，则无法解决您所描述的问题。

但是，通过稍微不同的设置，您应该能够以您想要的方式获得图表。

这是实现它的一种方法的快速示例：

[http://jsfiddle.net/jlbriggs/W9fUF/](http://jsfiddle.net/jlbriggs/W9fUF/)

```
data: [
            {y:3, horse:'horse 1', color:'red'},    //date 1
            {y:3, horse:'horse 2', color:'yellow'}, //date 2
            {y:3, horse:'horse 3', color:'blue'},   //date 3
            {y:3, horse:'horse 4', color:'green'},  //date 4
            {y:3, horse:'horse 5', color:'orange'}, //daate 5
       ] 
```

# uilabel - UILabel sizeToFit 中的 UICollectionView

> ID：15942585
> 
> 赞同：1
> 
> 时间：2013-04-11T07:02:52.517
> 
> 标签：uilabel, uicollectionview, sizetofit

我在 UICollectionView 中使用了 CustomCellClass。在 uilabel sizeToFit 中尝试此类，但不工作。

但是在 cellForItemAtIndexPath 方法中创建新的 uilabel ，可以正常工作。

如何在 CustomCellClass UILabel 中设置 SizeToFit UICollectionView；

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-24T09:32:55.660

在 CustomCellClass 中弹出它`layoutSubviews`。

# java - FileNotFoundException - java

> ID：15942589
> 
> 赞同：-3
> 
> 时间：2013-04-11T07:03:06.207
> 
> 标签：java, xml, swing, parsing, filenotfoundexception

我正在使用 SAX Parser 但调试后错误显示在这一行

```
saxParser.parse("C:\\Sample.XML", handler); 
```

错误是：- `java.io.FileNotFoundException`: C:\Sample.XML（系统找不到指定的文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:07:56.943

反斜杠“\”是 java 字符串中的转义字符。

您需要双重转义反斜杠“\\”。

如有疑问，请咨询[Oracle](http://docs.oracle.com/javase/tutorial/java/data/characters.html)

# android - GLES20.glBlend*(): UnsupportedOperationException - 哪些 Android 设备不支持？

> ID：15942591
> 
> 赞同：0
> 
> 时间：2013-04-11T07:03:14.647
> 
> 标签：android, opengl-es-2.0

为了能够试验各种 OpenGL 混合设置，我在我`GLSurfaceView.Renderer`的`onSurfaceCreated()`方法中包含了以下代码，整个项目设置为 API 级别 8：

```
GLES20.glEnable(GLES20.GL_BLEND);
GLES20.glBlendFuncSeparate(GLES20.GL_SRC_ALPHA, [etc...]);
GLES20.glBlendEquationSeparate(GLES20.GL_FUNC_ADD, [etc...]); 
```

在我的 AVD 上，主机 GPU 支持一切顺利（除了我对缺少`GL_MAX`的`GLES20.glBlendFuncSeparate()`.

在我从以下集合中发现之前，需要进行一些尝试和错误：

*   `glBlendFunc()`
*   `glBlendFuncSeparate()`
*   `glBlendEquation()`
*   `glBlendEquationSeparate()`

两种设备仅支持`glBlendFunc()`.

从我的立场来看，现在很难判断该依赖什么。我显然没有预料到这一点，也没有找到迄今为止在 Web 上通常实现的任何信息。

有人可以确认至少`glBlendFunc()`在所有/大多数/...设备上都受支持，或者向我指出一些详细信息吗？

编辑：这是 logcat 的`GLES20.glBlendEquation(GLES20.GL_FUNC_ADD)`：

```
D/libEGL  ( 4393): loaded /system/lib/egl/libGLES_android.so
D/libEGL  ( 4393): loaded /system/lib/egl/libEGL_POWERVR_SGX530_125.so
D/libEGL  ( 4393): loaded /system/lib/egl/libGLESv1_CM_POWERVR_SGX530_125.so
D/libEGL  ( 4393): loaded /system/lib/egl/libGLESv2_POWERVR_SGX530_125.so
W/dalvikvm( 4393): threadid=8: thread exiting with uncaught exception (group=0x4001d8a8)
E/AndroidRuntime( 4393): FATAL EXCEPTION: GLThread 9
E/AndroidRuntime( 4393): java.lang.UnsupportedOperationException: glBlendEquation
E/AndroidRuntime( 4393):    at android.opengl.GLES20.glBlendEquation(Native Method)
E/AndroidRuntime( 4393):    at org.blah.test.TestApplication$OGLBackground.onSurfaceCreated(TestApplication.java:209)
E/AndroidRuntime( 4393):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1317)
E/AndroidRuntime( 4393):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1116)
W/ActivityManager( 1297):   Force finishing activity org.blah.test/.MainActivity 
```

# c# - 如何将自定义格式设置为 DateTime.Now？

> ID：15942593
> 
> 赞同：0
> 
> 时间：2013-04-11T07:03:21.197
> 
> 标签：c#, datetime, datetime-format

我想知道如何`DateTime.Now`以相同的格式进行格式化`Thursday 03:00 PM`，以便将其与我的自定义格式日期时间值进行比较，

我正在尝试创建一个简单的调度系统，如果特定日期时间与当前日期时间相等，则代码将在其下运行，但我坚持将自定义日期与当前日期时间进行比较

```
string[] schedule = { "Thursday 2:47 PM", "Thursday 2:50 PM", "Thursday 2:55 PM" };
        private void timer1_Tick(object sender, EventArgs e)
        {
            DateTime dateValue;
            foreach (var i in schedule)
            {
                if (DateTime.TryParse(i, out dateValue))
                {
                    if (dateValue == DateTime.Now)
                    {
                        //do something here
                    }
                }
            }
        }

        private void Form1_Shown(object sender, EventArgs e)
        {
            timer1.Start();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:09:32.837

尝试`dateValue.ToString("dddd hh:mm tt", CultureInfo.CreateSpecificCulture("en-US"))`

*   **dddd** - 星期几的全名。
*   **hh** - 小时，使用从 01 到 12 的 12 小时制。
*   **mm** - 分钟，从 00 到 59。
*   **tt** - AM/PM 指示符。

您可以参考[MSDN](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:14:05.667

它应该以这种方式工作。

```
if (DateTime.TryParse(i, out dateValue))
{
  if (dateValue.ToShortTimeString() == DateTime.ToString("dd hh:mm tt"))
  {
    //do something here
  }
} 
```

**dd**告诉显示当前日期。**hh**显示小时，**mm**显示分钟。我离开**ss**几秒钟，因为您似乎不需要它。通过**tt** *PM*或*AM*将得到显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:28:08.860

First, you need to convert time in schedule string array into DateTime.

Link about DateTime styles: [http://www.csharp-examples.net/string-format-datetime/](http://www.csharp-examples.net/string-format-datetime/)

After that, you need to compare only time part of 2 dates. Took the answer from here: [How to compare time part of datetime](https://stackoverflow.com/questions/10290187/how-to-compare-time-part-of-datetime)

So, finally your code will be something like this:

```
string[] schedule = { "Thursday 2:47 PM", "Thursday 2:50 PM", "Thursday 2:55 PM" };
private void timer1_Tick(object sender, EventArgs e)
{
    DateTime dateValue;
    foreach (var i in schedule)
    {
        if (DateTime.TryParseExact(i, "dddd h:mm tt", CultureInfo.CreateSpecificCulture("en-US"), DateTimeStyles.None, out dateValue))
        {
            var currentDate = DateTime.Now;
            if (dateValue.DayOfWeek == currentDate.DayOfWeek && dateValue.TimeOfDay == currentDate.TimeOfDay)
            {
                //do something here
            }
        }
    }
}

private void Form1_Shown(object sender, EventArgs e)
{
    timer1.Start();
} 
```

Of course, you can convert DateTime.Now to a string of valid format (as in your string array) but I think that it's wrong. If you want to check that your date is earlier or later than current date, you will have to rewrite your code.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T07:11:21.457

您正在尝试将`Time`价值与`DateTime`价值进行比较。我认为您只想将您`array`的时间值与`current`时间值进行比较，在这种情况下，您可以比较日期的时间部分。

```
if (DateTime.TryParse(i, out dateValue))
{
  if (dateValue.ToShortTimeString() == DateTime.Now.ToShortTimeString())
  {
    //do something here
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T07:11:31.413

请在此处查看[日期时间示例](http://www.csharp-examples.net/string-format-datetime/)或[日期时间格式](http://www.codeproject.com/Articles/14743/Easy-String-to-DateTime-DateTime-to-String-and-For)

例如

```
MyString = MyDateTime.ToString("dddd  hh:mm tt"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-11T07:05:45.240

使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)方法将字符串从自定义格式转换为 DateTime

# gideros - Gideros GTween 事件监听器

> ID：15942596
> 
> 赞同：2
> 
> 时间：2013-04-11T07:03:26.880
> 
> 标签：gideros

我正在尝试来自以下链接的 GTween 示例

[Gideros GTween 与缓动](http://appcodingeasy.com/Gideros-Mobile/Gideros-GTween-with-easing#disqus_thread)

该示例无法开箱即用，因此我深入研究了 GTween 的源代码，并将以下几行添加到我的示例中以允许事件分派。

```
local tween = GTween.new(jewel, 2, animProperties, gtweenProperties)
tween.suppressEvents = false -- New Line #1
tween.dispatchEvents = true  -- New Line #2
tween:addEventListener('complete', function()
    stage:removeChild(jewel)
    jewel = nil
end) 
```

但是，应用程序崩溃。我尝试在中评论以下行`gtween.lua`

```
self:dispatchEvent(Event.new(name)) 
```

并且应用程序不会崩溃，但是不会调用回调（显然，为什么会这样？）

这是应用程序的堆栈跟踪。

```
gtween.lua:445: attempt to call method 'dispatchEvent' (a boolean value)
stack traceback:
    gtween.lua:445: in function 'dispatchEvt'
    gtween.lua:255: in function 'setPosition'
    gtween.lua:86: in function <gtween.lua:74> 
```

任何指针将不胜感激。谢谢。

PS：我不确定这是否是 Gideros 的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:20:49.550

我刚刚尝试了最新的 gideros 的[gtween](https://github.com/gideros/GTween)（注意它是 10 天前编辑的），并使用了这个示例（我从你的链接中获取了示例并添加了精灵定义，还在项目中包含了一个图像文件）并且它可以工作（回调被调用）：

```
local animate = {}
animate.y = 100
animate.x = 100
animate.alpha = 0.5
animate.scaleX = 0.5
animate.scaleY = 0.5
animate.rotation = math.random(0, 360)
local properties = {}
properties.delay = 0
properties.ease = easing.inElastic
properties.dispatchEvents = true

local sprite = Bitmap.new(Texture.new("box.png"))  -- ADD THIS
stage:addChild(sprite) -- ADD THIS
local tween = GTween.new(sprite, 10, animate, properties)

tween:addEventListener("complete", function()
    stage:removeChild(sprite)
    sprite = nil
end) 
```

# wix - 使用 WiX 将文件复制到网络共享

> ID：15942597
> 
> 赞同：1
> 
> 时间：2013-04-11T07:03:27.803
> 
> 标签：wix, network-share

作为我项目的一部分，安装程序必须将文件复制到网络共享（\system_name\Folder）。我已经尝试使用`<Directory>`定义共享路径的元素（NetHoodFolder 属性），但它抛出了一个错误。

```
Error   5   ICE64: The directory SP9381 is in the user profile but is not listed in the RemoveFile table.   C:\Wix\MainProject\MainProject\Product.wxs  25  1   MainProject 
```

我们可以使用 element 做同样的事情吗？有没有其他方法可以将文件复制到网络共享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:15:44.637

您可以将文件复制到网络共享，但有许多限制。首先，要解决 ICE 问题，请尝试像这样构建目录树：

```
<Directory Id='TARGETDIR' Source='SourceDir'>
   <Directory Id='ProgramFilesFolder' Name='PFiles'>
      <Directory Id='NETWORKSHAREFOLDER' Name='network'>
   </Directory>
</Directory> 
```

然后，您需要以某种方式了解网络共享。您可以在 UI 中询问或从命令行或其他方式获取它。我在测试用例中对字符串进行了硬编码（绝对不推荐用于实数）：

```
<Property Id='NETSHARE' Value='\\server\share\folder' />
<SetDirectory Id='NETWORKSHAREFOLDER' Value='[NETSHARE]' /> 
```

如果您想在命令行上传递它，请不要添加上述任何内容，只需执行以下操作：

```
msiexec /i path\to\your.msi NETWORKSHAREFOLDER="\\server\share\folder" 
```

基本上，只需将您的 NETWORKSHAREFOLDER 放在一个众所周知的文件夹中，然后按照上面的说明进行更改。

# javascript - 缩放地图时多边形颜色会自动变化

> ID：15942600
> 
> 赞同：0
> 
> 时间：2013-04-11T07:03:45.853
> 
> 标签：javascript, google-maps, google-maps-api-3, maps

我已经使用 V3 js API 实现了一个谷歌地图。我在地图内绘制了大约 500 个邮政编码多边形。邮政编码多边形的着色取决于某些工作正常的条件。就像我为一组邮政编码分配不同的颜色一样。但问题是当我放大地图时，一些邮政编码多边形颜色会发生变化。我们怎样才能解决它。

这是代码

```
{% ifequal zip.rank 1 %}
    var fillColor = '#FF0000';
{% endifequal %}
{% ifequal zip.rank 2 %}
    var fillColor = '#FF00D3';
{% endifequal %}
{% ifequal zip.rank 3 %}
    var fillColor = '#BE4BAA';
{% endifequal %}
{% ifequal zip.rank 4 %}
    var fillColor = '#BE88B5';
{% endifequal %}
{% ifequal zip.rank 5 %}
    var fillColor = '#857081';
{% endifequal %}

var path = [
                {% for polycoord in zip.zip_info.zip_polygon %}
                    new google.maps.LatLng({{polycoord.1}}, {{polycoord.0}}),
                {% endfor %}
            ];
var polygon = new google.maps.Polygon(
    {
        path:path, 
        clickable:true,
        strokeColor: '#000000',
        strokeOpacity: 0.75,
        strokeWeight: 1,
        fillColor: fillColor,
        fillOpacity: 1,
    }

);
polygon.setMap(map); 
```

# azure - 兑换 Azure 代码时，收到错误：已为此 Windows Live ID 请求了 Windows Azure Pass。每个账户限一个

> ID：15942613
> 
> 赞同：0
> 
> 时间：2013-04-11T07:04:33.693
> 
> 标签：azure

我的大学有一个 Azure 帐户，该帐户已于 7 个月前到期，该帐户用于我的一门课程，现在我从另一门课程获得了新 Azure 帐户的另一个代码，但在尝试兑换代码时出现以下错误: 已经为此 Windows Live ID 申请了 Windows Azure Pass。每个帐户限制一个。

这是否意味着我只能为我的 windows live ID 请求一个也是唯一的 Azure 帐户，即使旧的 Azure 帐户早已过期，这意味着我必须为这个新的 Azure 帐户创建一个新的 live ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:35:57.383

是的。你理解正确。如果您想兑换另一个代码，您必须创建另一个 Microsoft 帐户（又名 Windows Live ID）。这是唯一可能的方法。**试用**订阅也是如此。每个 Live ID 帐户只能有 1 个试用订阅。

# android - 如何获取并传递按钮的值

> ID：15942614
> 
> 赞同：0
> 
> 时间：2013-04-11T07:04:34.973
> 
> 标签：android

我想知道如何获取按钮的值，然后在另一个活动上使用它来相应地显示内容。

例子：

我的 MainActivity 上有 3 个按钮**Image1**、**Image2**和**Image3**。

现在根据用户单击的按钮（**Image1**、**Image2**和**Image3**），在新活动上显示相应的图像。

我知道如何创建这些按钮、新活动以及如何在新活动上显示图像。如何根据用户单击的按钮显示图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:08:33.390

你的类应该实现 OnClickListener 并覆盖 onClick()

```
Button button1 = (Button) findViewById(R.id.button1);
Button button2 = (Button) findViewById(R.id.button2);
Button button3 = (Button) findViewById(R.id.button3);
button1.setOnClickListener(new OnClickListener(this));
button2.setOnClickListener(new OnClickListener(this));
button3.setOnClickListener(new OnClickListener(this));

 @Override
 public void onClick(View v){

switch(v.getId()) //get the id which is an int
    {
     case R.id.button1 : //if its button1 that is clicked
         Intent i= new Intent("com.example.secondActivity");
         i.puExtra("key",value);
         startActivity(i);
        // use intents to pass information to secondActivity and display the image there
      break;
      case R.id.button2 :
         Intent i= new Intent("com.example.secondActivity");
         startActivity(i)
         //use intents to pass information to secondActivity and display the image there
      break;
      case R.id.button3 :
          Intent i= new Intent("com.example.secondActivityy");
          startActivity(i)
          //use intents to pass information to secondActivity and display the image there
      break;
    }
 } 
```

使用意图传递值

在按钮上单击

```
 Intent i= new Intent("com.example.secondActivity");
         i.puExtra("key",value);
         startActivity(i); 
```

在第二个活动中检索它如下

```
 Bundle extras = getIntent().getExtras();
        if(extras!=null)
        {
         int values= extras.getInt("key");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:12:09.487

为什么不使用 a`switch case`来确定用户单击了哪个按钮并在下一个活动中显示相应/相关的图像？例如：

首先，让你的 Activity 实现`OnClickListener`. 然后，在`onCreate()`演员阵容中`Buttons`设置他们的`setOnClickListener`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    ....
    Button Image1 = (Button) findViewById(R.id.Image1);       
    Image1.setOnClickListener(this);
    .... // THE REST OF THE BUTTONS
} 
```

我假设您`Bundle`在 Intent 中传递了一个用于启动下一个 Activity。更改该代码以传递包含按下哪个按钮的信息。

例如： Intent showPhoto = new Intent(CurrentActivity.this, YOUR_SECOND_ACTIVITY.class); showPhoto.putExtra("BUTTON_CLICKED", "IMAGE1"); 开始活动（显示照片）；

```
@Override
public void onClick(View v) {
    // Perform action on click
    switch(v.getId()) {
    case R.id.Image1:
        // RUN THE CODE TO START THE NEXT ACTIVITY
        Intent showPhoto = new Intent(CurrentActivity.this, YOUR_SECOND_ACTIVITY.class);
        showPhoto.putExtra("BUTTON_CLICKED", "IMAGE1");
        startActivity(showPhoto);

        break;
    case R.id.Image2:
        // RUN THE CODE TO START THE NEXT ACTIVITY
        Intent showPhoto = new Intent(CurrentActivity.this, YOUR_SECOND_ACTIVITY.class);
        showPhoto.putExtra("BUTTON_CLICKED", "IMAGE2");
        startActivity(showPhoto);

        break;
    case R.id.Image3:
        // RUN THE CODE TO START THE NEXT ACTIVITY
        Intent showPhoto = new Intent(CurrentActivity.this, YOUR_SECOND_ACTIVITY.class);
        showPhoto.putExtra("BUTTON_CLICKED", "IMAGE3");
        startActivity(showPhoto);

        break;
    }

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:13:55.213

> 我的 MainActivity 上有 3 个按钮 Image1、Image2 和 Image3。现在根据用户单击的按钮（Image1、Image2 和 Image3），在新活动上显示相应的图像。

=> 正如你已经说过的，你知道如何创建按钮并启动它。

现在您只需分配`OnClickListener`给每个按钮，然后将 Image id 或 URL 传递到您调用新活动的 Intent 中。

检查上面@IceMAN 发布的代码，现在正如我上面提到的，使用 putExtra() 方法将 ImageURL 或 Image ID 放入 Intent。

例如：

```
 Intent intent= new Intent(CurrentClass.this, ImageActivity.class);
  intent.putExtra("ImageURL",strImageURL);
  startActivity(i); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T07:24:17.683

将此添加到包含 3 个按钮的活动的 onCreate 中

```
 Button image1 = (Button) findViewById(R.id.image1);
        image1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(new Intent(getApplicationContext(), DisplayImagActivity.class)
                .putExtra("ImageName", "Image1"));
            }
        });

        Button image2 = (Button) findViewById(R.id.image2);
        image2.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(new Intent(getApplicationContext(), DisplayImagActivity.class)
                .putExtra("ImageName", "Image2"));
            }
        });

        Button image3 = (Button) findViewById(R.id.image3);
        image3.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(new Intent(getApplicationContext(), DisplayImagActivity.class)
                .putExtra("ImageName", "Image3"));
            }
        }); 
```

将此添加到您将设置图像的活动的 onCreate 中：

```
 String imageName = getIntent().getStringExtra("ImageName");
        if(imageName.equals("Image1")) {
            //set image 1
        }
        else if(imageName.equals("Image2")) {
            //set image 2
        }
        else if(imageName.equals("Image3")) {
            //set image 3
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T07:17:04.477

例如，您有 3`Button`秒并且`ImageView`在`Main`布局中：

主.xml

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll_main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

<Button
        android:layout_width="100dp"
        android:layout_height="50dp"
        android:id="@+id/btn1"
        android:text="button 1"
        />
<Button
        android:layout_width="100dp"
        android:layout_height="50dp"
        android:id="@+id/btn2"
        android:text="button 2"
        />
<Button
        android:layout_width="100dp"
        android:layout_height="50dp"
        android:id="@+id/btn3"
        android:text="button 3"
        />

<ImageView
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:id="@+id/iv"
        /> 
```

我您的活动方法是 onClick 处理来自三个按钮的事件。我们需要识别按钮已被按下。

我的活动.java

```
public class MyActivity extends Activity implements View.OnClickListener {

Button btn1;
Button btn2;
Button btn3;
ImageView iv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    btn1 = (Button) findViewById(R.id.btn1);
    btn2 = (Button) findViewById(R.id.btn1);
    btn3 = (Button) findViewById(R.id.btn1);
    iv = (ImageView) findViewById(R.id.iv);
    btn1.setOnClickListener(this);
    btn2.setOnClickListener(this);
    btn2.setOnClickListener(this);
 }

@Override
public void onClick(View v) {
   switch (v.getId()){
       case R.id.btn1:
       {
           Toast toast = Toast.makeText(this, "onClickButton1", Toast.LENGTH_SHORT);
           toast.show();
           iv.setImageDrawable(R.drawable.my_image_1);
           break;
       }
       case R.id.btn2:
       {
           Toast toast = Toast.makeText(this, "onClickButton2", Toast.LENGTH_SHORT);
           toast.show();
           iv.setImageDrawable(R.drawable.my_image_2);
           break;
       }
       case R.id.btn3:
       {
           Toast toast = Toast.makeText(this, "onClickButton3", Toast.LENGTH_SHORT);
           toast.show();
           iv.setImageDrawable(R.drawable.my_image_3);
           break;
       }
   }
} 
```

}

哪里`my_image_1`, `my_image_2`, `my_image_3`- 图片，来自您的`Drawable`文件夹。希望它的帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T07:08:01.503

您只需`ClickListener`为每个按钮实现一个，这将启动相应的活动。[请参阅此处](http://developer.android.com/reference/android/widget/Button.html)的示例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-20T20:44:51.270

我知道这是个老问题，但我更喜欢另一种方法，因为您可以对所有按钮使用相同的默认方法。

首先为每个按钮添加一个标签。

```
 <Button
    android:id="@+id/imageOneButton"
    android:tag="1"
    android:onClick="chooseImage" /> 
```

然后使用这个标签号来改变你的方法的行为。

```
 public void chooseImage(View view) {

    int imageNumber = Integer.parseInt(view.getTag().toString());

    // I'll just send this tag number to a toast, but you can send it in your intent
    // as an "Extra"

    Toast.makeText(this, view.getTag().toString(), Toast.LENGTH_SHORT).show();

} 
```

# mysql - ER图中的一对多关系，MySQL Workbench

> ID：15942617
> 
> 赞同：1
> 
> 时间：2013-04-11T07:04:46.930
> 
> 标签：mysql, database, database-design, entity-relationship, mysql-workbench

嗨，我正在为我最后一年的项目使用 MySQL Workbench 绘制 ER 图。这是关于一家运输公司，买方和运输代理与我的客户一起参与运输过程。

到目前为止，买方和代理具有相同的属性。所以我决定将他们的两个数据都保存在一个表中，并使用一个属性（在我的例子中是*type ）来区分它们。*

![在此处输入图像描述](https://i.stack.imgur.com/duzol.jpg)

正如您在我的图片中看到的，我无法在*运输*表和*外部*表之间建立 N:M 关系。它总是给我1：M的关系。当我尝试手动建立关系时，它会创建另一个关系表并与之建立 1:M 关系。

![在此处输入图像描述](https://i.stack.imgur.com/1vuDg.jpg)

谁能帮我解决我的问题？在我的情况下，拥有一个关系表的效率如何。

# jquery - 无法匹配正则表达式 - Jquery

> ID：15942621
> 
> 赞同：0
> 
> 时间：2013-04-11T07:04:59.930
> 
> 标签：jquery, regex, match

我在 Jquery 中有这段代码-：

```
message = '#Usain Bolt #Usain Bolt #Usain Bolt'; message = " "+message+" ";
var type1 = 'Usain Bolt';                                                       
if(message.match(type1))
{ 
  var matchOne = new RegExp(' #'+type1+' ', 'g');  
  var matchTwo = new RegExp('\n#'+type1+' ', 'g'); 

  message = message.replace(matchOne," @"+type1+" ").replace(matchTwo,"\n@"+type1+" ");  
} 
```

结果消息应该是`@Usain Bolt @Usain Bolt @Usain Bolt`

但是它变成了-：`@Usain Bolt #Usain Bolt @Usain Bolt`

有什么问题。感谢帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:14:14.617

问题是 s 之间的空格`#Usain Bolt`是匹配的一部分。

```
" #Usain Bolt #Usain Bolt #Usain Bolt "
 ^-----------^                         first match
                         ^-----------^ second match
             ^-----------^             no match (a character can only match once) 
```

改为使用单词边界：

```
message = '#Usain Bolt #Usain Bolt #Usain Bolt';
var type1 = 'Usain Bolt';                                                       
if(message.match(type1))
{ 
  var matchOne = new RegExp('#\\b'+type1+'\\b', 'g');  
  var matchTwo = new RegExp('\n#\\b'+type1+'\\b', 'g'); 

  message = message.replace(matchOne," @"+type1).replace(matchTwo,"\n@"+type1);  
} 
```

# android - 即使在睡眠模式下，如何使服务运行？

> ID：15942622
> 
> 赞同：6
> 
> 时间：2013-04-11T07:05:00.127
> 
> 标签：android, android-service

我有实现位置监听器的服务。现在我的问题是如何确保我的服务即使在睡眠模式下也能捕获位置。我已阅读有关警报管理器的信息

```
alarm.setRepeating(AlarmManager.RTC_WAKEUP, triggerAtMillis, intervalMillis, operation); 
```

但如何使用它。这是我的代码..任何帮助将不胜感激..
我的服务

```
public class LocationCaptureService extends Service implements LocationListener {
public static int inteval;
java.sql.Timestamp createdTime;
LocationManager LocationMngr;

@Override
public void onCreate() {
    inteval=10*1000;

    startLocationListener(inteval);
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

private void startLocationListener(int inteval,String nwProvider) {
    this.LocationMngr = (LocationManager)getSystemService(Context.LOCATION_SERVICE);        
        this.LocationMngr.requestLocationUpdates(LocationManager.GPS_PROVIDER, inteval, 0, this);
}   

public void onLocationChanged(Location location) {
    String status="c",S=null;
    double longitude,lattitude,altitude;
    g_currentBestLocation = location;
    createdTime = new Timestamp (new java.util.Date().getTime());    
         longitude=location.getLongitude();
         lattitude=location.getLatitude();
         altitude=location.getAltitude();
         //use this
         }
  }                              
  public void onProviderDisabled(String provider) {}                            
  public void onProviderEnabled(String provider) {}                             
  public void onStatusChanged(String provider, int status, Bundle extras) {} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:40:28.730

如果您想确保您的服务不会被操作系统杀死/回收，您需要将其设为前台服务。默认情况下，所有服务都是后台服务，这意味着当操作系统需要资源时它们将被终止。有关详细信息，请参阅此[文档](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)

基本上，您需要`Notification`为您的服务创建一个并指出它是前台。这样，用户将看到一个持久通知，因此他知道您的应用程序正在运行，并且操作系统不会终止您的服务。

这是一个如何创建通知（在您的服务中执行此操作）并使其成为前台的简单示例：

```
Intent intent = new Intent(this, typeof(SomeActivityInYourApp));
PendingIntent pi = PendingIntent.getActivity(this, 0, intent,   PendingIntent.FLAG_UPDATE_CURRENT);

NotificationCompat.Builder builder = new NotificationCompat.Builder(this);

builder.setSmallIcon(Resource.Drawable.my_icon);
builder.setTicker("App info string");
builder.setContentIntent(pi);
builder.setOngoing(true);
builder.setOnlyAlertOnce(true);

Notification notification = builder.build();

// optionally set a custom view

startForeground(SERVICE_NOTIFICATION_ID, notification); 
```

请注意，上面的示例是初步的，不包含取消通知的代码等。此外，当您的应用不再需要它应该调用的服务`stopForeground`以删除通知并允许您的服务被终止时，不这样做是浪费资源。

# svn - pysvn : 获取当前登录的用户名

> ID：15942628
> 
> 赞同：2
> 
> 时间：2013-04-11T07:05:15.687
> 
> 标签：svn, visualsvn-server, pysvn

如何使用 pysvn API 获取当前登录的用户名。

我们在 VisualSVN 服务器中启用了 Windows 身份验证（集成）。因此无需提供用户名和密码即可登录。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T07:07:48.000

由于 pysvn 模块仅处理 svn 你不能 - 不是 100% 不可能愚弄，（但很少），以下通常会让你按要求登录用户名：

```
>>> import getpass
>>> getpass.getuser() 
```

# android - 在 Android 中捕捉慢动作视频

> ID：15942634
> 
> 赞同：1
> 
> 时间：2013-04-11T07:05:44.787
> 
> 标签：android, camera, video-capture, mediarecorder

我需要在 Android 中捕捉慢动作视频。我尝试了 MediaRecorder 并使用 setVideoFrameRate() 方法设置了更高的帧速率。但它不会以该帧速率捕捉慢动作视频。

但是在 Galaxy Note 2 中，有一个选项可以录制高达 1/8 X 的慢动作视频。我需要类似的东西，但我找不到他们是如何做到的。

有谁能够帮我？

谢谢， 沙西卡

# windows-7 - 内核调试？

> ID：15942637
> 
> 赞同：1
> 
> 时间：2013-04-11T07:05:47.870
> 
> 标签：windows-7, kernel, driver, windbg

我正在尝试使用windbg调试内核。我的主机是windows 7 x64。我的目标是安装在vmware中的windows 7 x86。我已经成功连接到目标机器。但我经常收到错误符号无法加载。我已经用msdn的url设置了符号的路径。但是调试时无法连接网络。所以我打算下载符号并指定路径。如果我要下载意味着我是否必须下载x86符号或x64 符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:12:40.280

您需要正在调试的操作系统的符号，在您的情况下是 32 位 Windows 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:13:20.243

由于您的目标 PC 是 32 位的，它的驱动程序也将是 32 位的，并且需要 32 位符号进行调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:15:37.740

调试会话与 Internet 连接无关紧要。如果这是问题所在，您可能需要调查一下。

您可能还想检查：

*   您是否保存了工作区设置，以便始终正确设置符号路径？
*   尝试`!sym noisy`调试器提示并检查它给出问题的符号。

# java - DWR 示例不起作用

> ID：15942640
> 
> 赞同：0
> 
> 时间：2013-04-11T07:05:58.857
> 
> 标签：java, ajax, dwr

我从一个网站上复制了这个例子，它不起作用，谁能告诉我是什么原因。我在 tomcat 的控制台日志中没有收到任何异常或错误。

以下是我的文件 **dwrtest.jsp**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>DIRECT WEB REMOTING (DWR) TEST APPLICATION</title>

        <base href="${pageContext.request.contextPath}">

        <!-- You have to include these two JavaScript files from DWR -->
        <script type='text/javascript' src='dwr/engine.js'></script>
        <script type='text/javascript' src='dwr/util.js'></script>

        <!-- This JavaScript file is generated specifically for your application -->
        <script type='text/javascript' src='dwr/interface/Calculator.js'></script>

        <script type='text/javascript'>

        function dwrAjaxRequest() {
            var num1 = DWRUtil.getValue("num1");
            var num2 = DWRUtil.getValue("num2");
            Calculator.addNumbers(num1,num2,dwrAjaxResponse);
        }

        function dwrAjaxResponse(result) {
            DWRUtil.setValue("resultText",result);
        }
      </script>
</head>
    <body>
        <h2>DWR SAMPLE APPLICATION</h2>
        <b>Number 1 : </b><input type="text" value="5" name="num1"/><br>
        <b>Number 2 : </b><input type="text" value="6" name="num2"/><br>
        <b>Result : </b><input type="text" value="" name="resultText"/><br>
        <input type="button" value="Add" name="go"  onClick="dwrAjaxRequest();"/>
    </body>
</html> 
```

**下面是 WEB-INF 文件夹中复制的 dwr.xml 文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dwr PUBLIC "-//GetAhead Limited//DTD Direct Web Remoting 2.0//EN" "http://getahead.org/dwr/dwr20.dtd">
<dwr>
    <allow>
        <create creator="new" javascript="Calculator">
            <param name="class" value="com.example.dwr.Calculator"/>
            <include method="addNumbers"/>
        </create>
    </allow>
</dwr> 
```

**下面是WEB-INF文件夹下的web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <servlet>
        <servlet-name>dwr-invoker</servlet-name>

        <servlet-class>uk.ltd.getahead.dwr.DWRServlet</servlet-class>

        <init-param>
            <param-name>debug</param-name>
            <param-value>true</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>dwr-invoker</servlet-name>
        <url-pattern>/dwr/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

**下面是我的 Calculator.java 类，它位于包结构 com.example.dwr**

```
package com.example.dwr;

public class Calculator {
      public int addNumbers(int a , int b) {
        return (a + b);
      }

} 
```

**我是 DWR 新手，请让我知道这个示例有什么问题** ** 当我单击添加按钮时没有任何反应，实际上结果应该出现在结果文本框中**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T10:22:43.663

尝试公开整个类而不是特定方法，您可以[在此处下载一个工作示例](http://stringpool.com/an-introduction-to-dwr/)

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dwr PUBLIC "-//GetAhead Limited//DTD Direct Web Remoting 2.0//EN"      "http://getahead.org/dwr//dwr20.dtd">
<dwr>
<allow>
<create creator="new" javascript="forms">  
<param name="class" value="com.stringpool.demo.Status"/>  
</create> 
</allow>
</dwr> 
```

# c# - C# IIS 7 基本网址

> ID：15942641
> 
> 赞同：2
> 
> 时间：2013-04-11T07:06:03.373
> 
> 标签：c#, iis-7, appcmd

最近我问这个：

[获取我的 Web 应用程序的基本 URL](https://stackoverflow.com/questions/15925036/c-sharp-get-base-url-of-iis-7-using-servermanager)

这在一定程度上适用于调试，因为我使用的是 VS 开发服务器。

然后我生成了一个安装程序，然后安装程序将指向 IIS 7。

我有：

```
 void Application_Start(object sender, EventArgs e)
    {
        _baseUrl = HttpContext.Current.Request.Url.ToString();
        ....
    } 
```

但这引发了以下错误：

*请求在此上下文中不可用*

然后我做了一些阅读，这就是发生这种情况的原因：

[http://mvolo.com/iis7-integrated-mode-request-is-not-available-in-this-context-exception-in-applicationstart](http://mvolo.com/iis7-integrated-mode-request-is-not-available-in-this-context-exception-in-applicationstart)

然后，我使用上面的技术将代码从 Application_Start 移出到 Application_BeginRequest，因为我发现 Application_BeginRequest 被执行了多次。

但问题是我需要 IIS 7 的基本 URL，以便在 Application_Start 中使用，所以我有一个尝试设置的全局字符串：

```
FirstRequestInitialization.Initialize(context); 
```

但在尝试这样做时并不奇怪：

```
Application["BaseUrl"] = HttpContext.Current.Request.Url.ToString(); 
```

我收到此错误： *“Microsoft.Web.Administration.Application”是“类型”，但用作“变量”*

**我想要的只是 IIS 7 的基本 URL。**

我不能使用目录条目，因为我不支持 IIS 6。

我怎样才能做到这一点？任何解决方法？我可以从 VS 执行 AppCmd 吗？

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T07:36:46.743

简短的回答：你无法得到它，因为网站没有单一的规范基础 URI - 可以将网站（或者更确切地说，Web 应用程序）配置为响应任何绑定、任何域名和任何资源的请求路径 - 并且网站可以在主机网络服务器 (IIS) 中重新配置，而应用程序根本不会意识到这一点。

如果你真的想存储你的“基本 URL”（即使这样的东西并不真正存在），那么你可以`Application_BeginRequest`像这样从内部进行：

```
private static readonly Object _arbitraryUrlLock = new Object();
private static volatile String _arbitraryUrl;

public void Application_BeginRequest() {
    if( _arbitraryUrl == null ) 
        lock( _arbitraryUrlLock )
            if( _arbitraryUrl == null ) 
                _arbitraryUrl = HttpContext.Current.Request.Url.ToString();
} 
```

# xml - 从 j2me 应用程序向服务器发送 XML 数据

> ID：15942645
> 
> 赞同：0
> 
> 时间：2013-04-11T07:06:10.003
> 
> 标签：xml, java-me

我正在尝试将请求数据从 j2me 应用程序发送到服务器，我找不到任何合适的解决方案将 java 对象转换为 xmlObject 。

如何在 J2ME 中将 java 对象转换为 xml 格式？请提出适当的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:48:25.273

J2ME 反射仅限于调用公共构造函数，因此库无法获取您的 POJO，并基于 getter 和 setter 自动生成 XML。
但是你可以手动完成。例如，要转换

```
class Person { String name; int yearBorn; } 
```

至

```
<person><name>My Name</name><yearBorn>1978</yearBorn></person> 
```

将以下方法添加到`Person`类：

```
public String toString() {
  StringBuffer sb = new StringBuffer("<person>");

  if (name == null) {
    sb.append("<name/>");
  } else {
    sb.append("<name>").append(name).append("</name>");
  }

  if (yearBorn == 0) {
    sb.append("<yearBorn/>");
  } else {
    sb.append("<yearBorn>").append(yearBorn).append("</yearBorn>");
  }

  sb.append("</person>");

  return sb.toString();
} 
```

对需要导出为 XML 的所有类和属性执行此操作。

# c# - 在查询字符串参数中获取参数的 Null 值

> ID：15942646
> 
> 赞同：0
> 
> 时间：2013-04-11T07:06:10.803
> 
> 标签：c#, asp.net

在我的应用程序中，我发送了一个指向用户电子邮件 ID 的链接，他可以通过单击此链接下载软件....现在我的网址看起来像.... [http://www.abc.co.in/Download.aspx？ period=11/04/2013%2012:29:20%20PM&ProductName=Otja](http://www.abc.co.in/Download.aspx?period=11/04/2013%2012:29:20%20PM&ProductName=Otja) 我在 pageload download.aspx 页面上检索此值的代码是

```
 string PName = Request.QueryString["ProductName"] as string;

    string myDate = Request.QueryString["period"];
    if (!String.IsNullOrEmpty(myDate))
    {
        myDate = myDate.Replace("!", ":");
    }
    DateTime dt1 = Convert.ToDateTime(myDate);
    DateTime dt2 = DateTime.Now;
    TimeSpan variable = dt2 - dt1;
    if (variable.TotalMinutes > 5)
    {
        //Response.Write("Download time is expired now");
        lblmsg.Visible = true;
        lblmsg.Text = "Download time is expired now";
    }
    else
    {

        lblmsg.Visible = true;
        lblmsg.Text = "U can Still Download";
    } 
```

但这不起作用，我在 5 分钟之前和几分钟后测试过，它只显示“您仍然可以下载”，所以我认为我的错误是我无法在此 download.aspx 页面上的查询字符串上检索该产品名称和期间值。请帮助我.. 谢谢我认为应该有错误.....字符串未被识别为有效的日期时间。这就是为什么它传递空值所以任何解决方案？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:12:16.203

您说您认为您的代码无法检索查询参数。您为什么不先打印这些值来确认这一点。

Request.QueryString() 看起来是正确的。

您的逻辑可能存在问题，这可能会导致 else 执行。

根据您提供的更多信息，请尝试以下操作 -

变量 myDate 值必须是“11-04-2013 06 36”。请确认。

而不是`Convert.ToDateTime(myDate);`试试这个

```
DateTime.ParseExact(myDate, "dd-MM-yyyy HH:mm", System.Globalization.CultureInfo.InvariantCulture); 
```

# javascript - 如何附加到特定内容的引导弹出窗口选项？

> ID：15942647
> 
> 赞同：0
> 
> 时间：2013-04-11T07:06:21.037
> 
> 标签：javascript, jquery, html, twitter-bootstrap, popover

jsFiddle：http: [//jsfiddle.net/G6yRk/](http://jsfiddle.net/G6yRk/)

我想为所有弹出框加载常规选项，然后根据需要覆盖每个 id 的特定选项。

例如：

```
<span id="specificPopover" class="popoverThis">hover me</span> 
```

和

```
$("[rel='popover'], .popoverThis").popover({html:true});
$("#specificPopover").popover({title:'title',content:'<em>content</em>'}); 
```

但这不起作用。我错过了什么？

# java - 创建一个带有目录的java文件

> ID：15942653
> 
> 赞同：0
> 
> 时间：2013-04-11T07:06:52.093
> 
> 标签：java, file

我正在尝试创建一个文件 ( `/data/test/userid/feedid/test.flv`)

如果该目录不存在，我会得到这个异常：

```
java.io.FileNotFoundException 
```

有什么好的方法可以解决这个问题吗？

我找到了commons.io，但没有任何功能可以解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:17:05.493

[`File#mkdirs`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs%28%29)将创建由 this 表示的路径结构`File`。例如

```
File file = new File("/data/test/userid/feedid/test.flv");
File parent = file.getParentFile();
if (parent.exists() || parent.mkdirs()) {
   //...
} else {
    throw new IOException("Failed to create output directory " + parent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:11:08.057

像这样的东西必须起作用：

```
File file = new File("data//test//userid//feedid//test.flv");
file.getParentFile().mkdirs();
FileWriter writer = new FileWriter(file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:11:00.377

试试这个

```
String fileLocation= //your location to store;
File fileDir=new File(fileLocation);
if(!fileDir.exists())
{
    fileDir.getParentFile().mkdirs(); // to create directory if not exists

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:12:25.100

这是您首先需要做的：

```
File dir = new File("/data/test/userid/feedid");
if (!dir.exists()){ 
     dir.mkdir();
} 
```

# java - JAVA异步RMI

> ID：15942654
> 
> 赞同：2
> 
> 时间：2013-04-11T07:06:52.423
> 
> 标签：java, asynchronous, rmi

我需要在两个不同的 JAVA 程序之间具有远程方法调用 (RMI) 功能。两者都应该按顺序对给定文件（文件名作为参数）执行一些后端功能。由于要处理的文件数量可能太大，我要求远程调用异步完成。最初我为此使用了 Java RMI，因为它非常适合，只是调用是同步完成的。这些是简单的 java 程序，我不想将它们部署在任何应用程序服务器上，因为这会产生太多开销。还需要同时执行多个文件，因此程序是在线程安全模式下开发的。请为此建议理想的实现。任何定制开发的 API（如果免费提供）都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:26:24.727

> I need to have Remote Method invocation (RMI) functionality between two different JAVA programs ... I require that the Remote Call to be done asynchronously.

Those two requirements are mutually contradictory. RMI means Remote Method Invocation, which implies call-and-return method call semantics. If it isn't call-and-return, it isn't method invocation, so it isn't RMI either.

You should investigate technologies that have listeners, such as JMS.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-21T20:33:18.733

进行真正的异步调用的方法是：

1.  使用 NIO 实现 RMI。
2.  当代理被调用时，将请求放在 NIO 选择器上，并立即将结果未来返回给调用者。
3.  每个请求都必须有一个唯一的请求 id，当具有该 id 的响应从服务器到达时，应该解决正确的未来。

我只知道这种[异步 RMI的一种实现](https://github.com/barakb/asyncrmi)

这是一个关于它如何实际实现的序列图的很好的[解释。](http://barakb.github.io/asyncrmi/asynchronous-calls.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:22:37.467

最简单的解决方案是让您的 RMI 调用启动一个异步任务。如果您想提高效率，您可以发送批量文件进行处理。注意：除非您小心，否则磁盘子系统可能是您的瓶颈，并且使用多个线程可能会更慢而不是更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:11:21.057

如果您确定您的两个应用程序都使用 Java（并且将要使用），那么您应该使用 JMS（Java 消息传递服务）。异步通信也将有一个第 3 方代理 - 一个消息队列（ActiveMQ 或直接嵌入在 Glassfish 或其他应用程序服务器中的一个）。

通过使用它，您发送 MQ 并将消息发送到其他应用程序。

如果您想要更大的灵活性，并且可能某些应用程序正在（或将要）用另一种语言编写，您可能应该使用 AMQP 而不是 JMS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-04T08:30:43.697

这是 RMI 领域的另一个支持异步执行的新播放器。Redisson[框架](https://redisson.org/)。更多关于异步执行的文档在[这里](https://github.com/mrniko/redisson/wiki/9.-distributed-services#913-remote-service-asynchronous-calls)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-08T15:24:31.057

只需启动一个线程并使用该线程调用该方法。现在你有了异步 RMI ;-)

# java - 如何在 JSP 中从另一个对象分配一个对象？

> ID：15942657
> 
> 赞同：-3
> 
> 时间：2013-04-11T07:07:18.683
> 
> 标签：java, spring, jsp, spring-mvc, controller

我正在使用 Spring MVC 。

我在控制器中有一个方法，在返回 jsp 之前将对象放入`ModelMap`.

```
modemap.put("Members",members); 
```

学生是具有列表和列表的 POJO。

现在在我的jsp中有一个地方我需要将Student[0]存储在jsp的变量中。

那时我不想遍历学生列表。否则我会使用 Java 中的每个循环。

当我做

```
<c:set var="stu1" value="$(memebrs.student[0]}"></c:set> 
```

但这让我找不到页面。

我怎么能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:26:19.630

好像有错别字：

```
<c:set var="stu1" value="$(memebrs.student[0]}"></c:set> 
```

代替

```
<c:set var="stu1" value="$(Members.student[0]}"></c:set> 
```

`map`（ and中的成员拼写`c:set`不同）

# asp.net - 将数据表下载为 csv 文件

> ID：15942660
> 
> 赞同：0
> 
> 时间：2013-04-11T07:07:30.010
> 
> 标签：asp.net, vb.net, datatable

大家好，我试图让用户从数据库中下载数据，这样他们就可以在没有访问数据库的情况下对其进行操作。到目前为止，我有这个文件，但我需要将它下载到客户端电脑。有小费吗？

```
Protected Sub ExportDataTableToCSV(cmdText As String)
    Try
        Dim sqlcon_Local As New SqlClient.SqlConnection
        sqlcon_Local.ConnectionString = ConfigurationManager.ConnectionStrings("Portal").ConnectionString
        Dim objCmd As New SqlCommand(cmdText, sqlcon_Local)
        Dim da As SqlDataAdapter = New SqlDataAdapter(objCmd)
        Dim dt As DataTable = New DataTable
        da.Fill(dt)
        Dim filename As String = Server.MapPath("~/download.csv")
        Dim sw As New StreamWriter(filename, False)

        Dim iColCount As Integer = dt.Columns.Count
        For i As Integer = 0 To iColCount - 1
            sw.Write(dt.Columns(i))
            If i < iColCount - 1 Then
                sw.Write(",")
            End If
        Next
        sw.Write(sw.NewLine)

        For Each dr As DataRow In dt.Rows
            For i As Integer = 0 To iColCount - 1
                If Not Convert.IsDBNull(dr(i)) Then
                    sw.Write(dr(i).ToString())
                End If
                If i < iColCount - 1 Then
                    sw.Write(",")
                End If
            Next
            sw.Write(sw.NewLine)
        Next
        sw.Close()

        Response.Clear()
        Response.ContentType = "application/csv"
        Response.AddHeader("Content-Disposition", "attachment; filename=download.csv")
        Response.WriteFile(filename)
        Response.Flush()
        Response.End()

    Catch ex As Exception

    End Try
End Sub 
```

我究竟做错了什么？欢迎任何意见。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:17:10.990

```
 Public Shared Function Export_CSV(ByVal cmdText As String) As String

        Dim message As String = Nothing

        Try

            Dim sqlcon_Local As New SqlClient.SqlConnection
            sqlcon_Local.ConnectionString = ConfigurationManager.ConnectionStrings("Portal").ConnectionString
            Dim objCmd As New SqlCommand(cmdText, sqlcon_Local)
            Dim da As SqlDataAdapter = New SqlDataAdapter(objCmd)
            Dim dt As DataTable = New DataTable
            da.Fill(dt)

            Dim context As HttpContext = HttpContext.Current
            context.Response.Clear()

            For Each column As DataColumn In dt.Columns
                context.Response.Write(column.ColumnName + ",")
            Next

            context.Response.Write(Environment.NewLine)

            For Each row As DataRow In dt.Rows

                For i As Integer = 0 To dt.Columns.Count - 1
                    context.Response.Write(row(i).ToString.Replace(",", String.Empty) + ",")
                Next

                context.Response.Write(Environment.NewLine)

            Next

            context.Response.ContentType = "txt/csv"
            context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + download + ".csv")

            HttpContext.Current.ApplicationInstance.CompleteRequest()

            message = "Export Successful"

        Catch ex As Exception

            message = ex.Message.ToString

        End Try

        Return message

    End Function 
```

参考：[http ://www.thewebbureau.com/tech_blog/post/Export-DataTable-To-CSV.aspx](http://www.thewebbureau.com/tech_blog/post/Export-DataTable-To-CSV.aspx)

如果您的 IE 浏览器有问题

改变

```
 context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + download + ".csv") 
```

至

```
 context.Response.AppendHeader("Content-Disposition", "attachment; inline=" + download + ".csv") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:58:37.300

请将 Response.ContentType 更改为

Response.ContentType = "文本/csv";

希望对你有帮助

# model-view-controller - Ember.js 使用新路由器访问和组织控制器

> ID：15942662
> 
> 赞同：0
> 
> 时间：2013-04-11T07:07:33.643
> 
> 标签：model-view-controller, ember.js, ember-router

我正在尝试了解新路由器系统中的控制器。我知道它们的存在是为了装饰模型并向视图/模板呈现非永久状态以进行渲染。而且我了解 Ember 路由器用于从路由名称实例化和设置每个控制器的单个副本的约定。但这是否意味着您永远不应该拥有一个以上的控制器副本？

这是我的用例：我有一组嵌套的项目列表，它们具有复杂的非持久每项目状态（不同级别的折叠/可见嵌套，不同的编辑模式等）。我不认为这属于视图，而且它太复杂（因为嵌套）而无法保存在单例控制器中——所以我计划每个视图实例都有一个控制器实例（尽管所有相同的控制器和视图类）。这是声音吗？

第二，更简单的问题。如何访问 Ember 路由器实例化的控制器？以前，您可以这样做，`App.get('router.postController')`但这不再有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:31:19.810

**第一个问题**

并非所有控制器都是单例的。在某些情况下，Ember.js 会为您创建非单例控制器。

一种情况是`itemController`与`{{each}}`助手一起使用时：

```
{{#each model itemController="post"}}
  <!-- template here -->
{{/each}} 
```

这将为循环中`App.PostController`的每个项目创建一个新实例。`post`

另一种情况是当您使用`{{render}}`帮助器并将模型传递给它时：

```
{{render "post" firstPost}}
{{render "post" secondPost}} 
```

这将为`App.PostController`每个`{{render}}`.

**第二个问题**

这取决于您想从哪里访问它们。

从路线：

```
this.controllerFor("post"); 
```

从另一个控制器：

```
App.CommentController = Ember.ObjectController.extend({
  needs: ['post'],
  test: function() {
    return this.get('controllers.post');  // this returns the post controller
  }
}); 
```

更多信息在这里：[http ://emberjs.com/guides/controllers/dependencies-between-controllers/](http://emberjs.com/guides/controllers/dependencies-between-controllers/)

从观点来看：

```
this.get('controller'); 
```

# c# - 使用读取 csv 文件

> ID：15942665
> 
> 赞同：0
> 
> 时间：2013-04-11T07:07:36.347
> 
> 标签：c#, asp.net

我正在使用以下两个代码读取 csv 文件，但它返回相同的错误。

```
'E:\business\business\Document\4112013\20580.csv' is not a valid path.  Make sure that the path name is spelled correctly and that you are connected to the server on which the file resides. 
```

我无法解决这个问题。请帮我解决这个问题

```
SaveLocation = @"E:\business\business\Document\4112013\20580.csv";
string connStr = "Provider=Microsoft.Jet.OleDb.4.0;Data Source=@" + SaveLocation + ";Extended Properties=\"Text;HDR=YES;FMT=Delimited\"";
OleDbConnection conn = new OleDbConnection(connStr);
conn.Open();
// give full path to the file here
OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM " + SaveLocation, conn);
DataSet ds = new DataSet("QueryCSV");
adapter.Fill(ds);
DataTable dt = ds.Tables[0];

System.Data.OleDb.OleDbDataAdapter MyCommand = default(System.Data.OleDb.OleDbDataAdapter);
System.Data.OleDb.OleDbConnection MyConnection = default(System.Data.OleDb.OleDbConnection);
//MyConnection = new System.Data.OleDb.OleDbConnection("provider=Microsoft.ACE.OLEDB.12.0; " + "data source=" + SaveLocation + "; " + "Extended Properties=Excel 12.0;");
//MyConnection = new System.Data.OleDb.OleDbConnection("provider=Microsoft.ACE.OLEDB.12.0; " + "data source=" + SaveLocation + "; " + "Extended Properties='csv;HDR=Yes;FMT=Delimited(,)';");

MyConnection = new System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0;Data Source=" + SaveLocation + ";Extended Properties=\"Text;HDR=YES;FMT=Delimited\"");
MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [Sheet5$]", MyConnection);
ds = new System.Data.DataSet();
MyCommand.Fill(ds); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:28:30.970

You put this as file path, It will work.

```
string strDataSource = "E:\business\business\Document\4112013\20580.csv";
strDBFile = strDataSource.Substring(0, strDataSource.LastIndexOf('\\'));
mCon.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strDBFile + ";Extended Properties=\"Text;Excel 12.0;HDR=No;IMEX=1;FMT=Delimited\""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:16:09.583

这闻起来更像是安全问题，然后是错误的路径问题。您不能从 ASP.NET Web 应用程序访问硬盘的任何部分。这是出于安全原因，因此潜在的攻击者将无法做同样的事情，以防您的网站安全性受损。

将您的 csv 文件放入您的网络应用程序*子目录*，并结合以下属性之一访问它：

```
HttpRuntime.AppDomainAppPath 
```

或与

```
HttpContext.Current.Request.PhysicalApplicationPath 
```

拥有相对而不是固定的路径会给您带来其他好处，即在将您的应用程序上传到服务器或*另一*台服务器后，您没有对此进行任何更改。一切都像以前一样继续工作。

教育部信息看[这里](https://stackoverflow.com/questions/9477040/httpcontext-current-request-applicationpath-for-website)

# jakarta-ee - 中断长时间运行的 javax.ejb.TimerService 作业

> ID：15942667
> 
> 赞同：1
> 
> 时间：2013-04-11T07:07:51.737
> 
> 标签：jakarta-ee

我正在使用 Java EE 6 TimerService 来执行一个长时间运行的任务（大约 30 分钟）。这个任务很容易被中断，因为它的业务逻辑大约每 5 秒就会被取消一次。

现在的问题是如何在已执行的方法中获取取消部署应用程序的事件，以便在 Java EE 容器中重新部署和取消部署的情况下取消执行。

例子：

```
@Singleton
public class AnyClass {

    @Schedule(hour = "9", minute="17")
    public void service() {
        for(i = 1000; i < 1000; i++) {
            doSomethingForAbout5Seconds();
            // here I want to cancel the execution in 
            // case of undeployment of the apllication
        }
    }
} 
```

# java - 有什么方法可以基于自由运行的、与系统时钟无关的时钟来停放线程？

> ID：15942668
> 
> 赞同：1
> 
> 时间：2013-04-11T07:07:53.343
> 
> 标签：java, timer, scheduler, thread-sleep, system-clock

要使当前线程停在指定的超时时间，我可以使用：

```
LockSupport.parkNanos(long nanos); 
```

或者

```
Thread.sleep(long millis);//internally same as Object.wait(long) i guess. 
```

不幸的是，这两种方法的内部滴答都是基于系统时钟的。

如果在等待期间更改系统时钟（通过 ntptime 或手动），这些方法将不会按预期运行。

例如，在 t0 中，我调用 Thread.sleep(dt) 之类的方法来休眠 dt 秒。在等待期间，我将系统时钟提前 20 秒，然后线程将实际休眠 dt+20 秒。

使用以下代码检查它：

```
 public static void main(String[] args) throws InterruptedException {  
long s = System.nanoTime();  
int _10sec = 10 * 1000;  
LockSupport.parkNanos(TimeUnit.MILLISECONDS.toNanos(_10sec));  
//or Thread.sleep(_10sec);
long e = System.nanoTime();  
long used = e - s;  
System.out.println("Used:" + TimeUnit.NANOSECONDS.toMillis(used)); } 
```

使用“date && sudo date -s 16:10:40”之类的东西在等待期间将系统时钟提前几分钟，你会从输出中看到发生了什么。

很遗憾，因为在我的产品中，很多东西都是基于系统时钟的，

例如调度程序（最终调用 LockSupport.park）通过 Socket 连接进行心跳检查。

如果系统时钟设置的时间比超时时间长，调度器会认为它超时，但实际上不是。

有没有人遇到过同样的问题，你是怎么解决的？

**编辑**：

在我的 HA 产品中，当重负载阻塞系统时，我使用 Watchdog 杀死操作系统（所谓的自杀策略）。我必须在内部喂狗以防止意外自杀，使用 ThreadSupport.parkNanos(xxx) 会有意外自杀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:19:29.267

我会做的是定期唤醒睡眠，例如每秒、5 秒或每分钟。如果您想要调整时间，它可以检查 currentTimeMillis()，或者 nanoTime() 是您想要单调递增的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T03:05:45.537

最后，我在 Linux 中使用了 JNI 来解决这个问题。在 Java 范围内确实没有出路。</p>

```
#include <jni.h>
#include <unistd.h>
#include <LinuxSleeper.h>

JNIEXPORT jint JNICALL Java_com_my_pkg_name_sleep_LinuxSleeper_sleep0
  (JNIEnv *env, jobject thisObj, jint secs){
    if( secs >= 0 ){
        return sleep(secs);
    }else{
        return 0;
    }
} 
```

java类看起来像：

```
public class LinuxSleeper extends CommonSleeper implements Sleeper {

    static {
        NativeUtils.loadLibrary("LinuxSleeper");
    }
@Override
    public int sleep(int seconds) {
     ///....
    }
    private native int sleep0(int seconds);
    } 
```

# vb.net - vb.net 将 32 位位图转换为 8 位（256 色）

> ID：15942678
> 
> 赞同：0
> 
> 时间：2013-04-11T07:08:29.927
> 
> 标签：vb.net, image, bitmap

我正在尝试在 vb.net 中将全色位图转换为 256 色位图。我尝试使用 Format8bppIndexed PixelFormat 创建位图，但这会产生失真的 8 位图像（尽管仍可识别为正确图像的一部分）。

我做了一些研究（[http://www.codeproject.com/Articles/17162/Fast-Color-Depth-Change-for-Bitmaps](http://www.codeproject.com/Articles/17162/Fast-Color-Depth-Change-for-Bitmaps)），但我想知道是否有更简单的方法我错过了? （我对 vb.net 很陌生）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T07:37:50.293

我想我应该提供一个答案作为参考，以防有人偶然发现类似的问题。dotNET 发布的[链接将](https://stackoverflow.com/questions/1761452/c-sharp-copy-an-image-into-an-8-bit-indexed-image)我带到了[这个库](http://www.wischik.com/lu/programmer/1bpp.html)，它很好地解决了我的问题。

# c# - 调整表单大小时调整控件大小

> ID：15942682
> 
> 赞同：2
> 
> 时间：2013-04-11T07:08:50.053
> 
> 标签：c#, winforms

我只是想知道我的 Windows 应用程序。当我重新调整窗体大小时，我的窗体控件应该重新调整大小。任何人都可以告诉我如何做到这一点，我已经使用了 Anchor 属性，但没有运气。

这是一种胜利形式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:12:04.563

有两种方法可以使控件根据大小变化自动调整大小：

1.  将控件的 Dock 属性设置为[DockStyle.Fill](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)。
2.  将[Anchor](http://msdn.microsoft.com/en-us/library/ms171691.aspx)属性设置为“上、下、左、右”

但是如果你决定使用 WPF [GridLayout](http://wpftutorial.net/GridLayout.html)，它对于这个目标有很多能力。

**已编辑**

请参阅此简短教程[使用表单调整控件大小：锚属性教程](http://www.tutorialized.com/view/tutorial/C-Resizing-controls-with-form-Anchor-property/52689)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T07:16:42.300

您必须正确使用**锚**属性。例如，要让 DataGridview 在其所有方向上调整大小，您必须将其锚属性设置为**Top、Bottom、Left、Right**

您必须根据您的要求为表单中的每个控件适当地设置锚属性。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:33:14.993

如果您将您的`Dock`属性设置`control`为`Fill`. 您还可以查看`tableLayoutPanel`是否有更多控件要在调整表单大小时保持对齐。

# c# - 如何使用 asp.net mvc4 openid api 获取电子邮件 ID

> ID：15942694
> 
> 赞同：2
> 
> 时间：2013-04-11T07:09:41.410
> 
> 标签：c#, .net, asp.net-mvc, openid, dotnetopenauth

在使用 MVC4 的 Internet 模板时希望获取电子邮件 ID 和 openid

这可用于使用 google 进行身份验证，但不适用于 facebook

想知道如何获取/请求 extraData 字典中的电子邮件 ID

[查看http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)的 AspNetWebStack 项目中的代码，它看起来像

```
 OAuthWebSecurity.RegisterFacebookClient() 
```

[在https://github.com/AArnott/dotnetopenid](https://github.com/AArnott/dotnetopenid)托管的 DotNetOpenAuth.AspNet.dll 中使用 FacebookClient

FacebookClient.GetUserData() 中的代码有

```
 var userData = new NameValueCollection();
            userData.AddItemIfNotEmpty("id", graphData.Id);
            userData.AddItemIfNotEmpty("username", graphData.Email);
            userData.AddItemIfNotEmpty("name", graphData.Name);
            userData.AddItemIfNotEmpty("link", graphData.Link == null ? null : graphData.Link.AbsoluteUri);
            userData.AddItemIfNotEmpty("gender", graphData.Gender);
            userData.AddItemIfNotEmpty("birthday", graphData.Birthday);
            return userData; 
```

它应该返回用户名中的电子邮件 ID，但它没有被返回

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:52:26.317

提供的 Facebook OAuth 客户端不会让您获得超出默认信息的任何内容。要获得其他任何东西，您需要能够更改`scope`参数的值，这是包含的客户端不允许的。因此，要解决这个问题并仍然使用 Internet 模板提供的其他样板代码，您需要实现一个遵循相同模式的自定义 OAuth 客户端。

由于整个 ASP.NET 源代码以及 OAuth 库 DotNetOpenAuth 都是开源的，因此您实际上可以查看 OAuth 库并确切了解 Facebook 提供程序是如何构建的。使用它，我能够想出这个：

```
using System;
using System.Collections.Generic;
using System.Diagnostics.CodeAnalysis;
using System.Net;
using System.Web;

using DotNetOpenAuth.Messaging;
using DotNetOpenAuth.AspNet;
using DotNetOpenAuth.AspNet.Clients;
using Validation;

using Newtonsoft.Json;

namespace OAuthProviders
{
    /// <summary>
    /// The facebook client.
    /// </summary>
    [SuppressMessage("Microsoft.Naming", "CA1704:IdentifiersShouldBeSpelledCorrectly", MessageId = "Facebook", Justification = "Brand name")]
    public sealed class FacebookScopedClient : OAuth2Client
    {
        #region Constants and Fields

        /// <summary>
        /// The authorization endpoint.
        /// </summary>
        private const string AuthorizationEndpoint = "https://www.facebook.com/dialog/oauth";

        /// <summary>
        /// The token endpoint.
        /// </summary>
        private const string TokenEndpoint = "https://graph.facebook.com/oauth/access_token";

        /// <summary>
        /// The _app id.
        /// </summary>
        private readonly string appId;

        /// <summary>
        /// The _app secret.
        /// </summary>
        private readonly string appSecret;

        private readonly string scope;

        #endregion

        #region Constructors and Destructors

        /// <summary>
        /// Initializes a new instance of the <see cref="FacebookScopedClient"/> class.
        /// </summary>
        /// <param name="appId">
        /// The app id.
        /// </param>
        /// <param name="appSecret">
        /// The app secret.
        /// </param>
        /// <param name="scope">
        /// The scope (requested Facebook permissions).
        /// </param>
        public FacebookScopedClient(string appId, string appSecret, string scope)
            : base("facebook")
        {
            Requires.NotNullOrEmpty(appId, "appId");
            Requires.NotNullOrEmpty(appSecret, "appSecret");
            Requires.NotNullOrEmpty(scope, "scope");

            this.appId = appId;
            this.appSecret = appSecret;
            this.scope = scope;
        }

        #endregion

        #region Methods

        /// <summary>
        /// The get service login url.
        /// </summary>
        /// <param name="returnUrl">
        /// The return url.
        /// </param>
        /// <returns>An absolute URI.</returns>
        protected override Uri GetServiceLoginUrl(Uri returnUrl)
        {
            // Note: Facebook doesn't like us to url-encode the redirect_uri value
            var builder = new UriBuilder(AuthorizationEndpoint);
            builder.AppendQueryArgument("client_id", this.appId);
            builder.AppendQueryArgument("redirect_uri", returnUrl.AbsoluteUri);
            builder.AppendQueryArgument("scope", this.scope);

            return builder.Uri;
        }

        /// <summary>
        /// The get user data.
        /// </summary>
        /// <param name="accessToken">
        /// The access token.
        /// </param>
        /// <returns>A dictionary of profile data.</returns>
        protected override IDictionary<string, string> GetUserData(string accessToken)
        {
            FacebookGraphData graphData;
            var request =
            WebRequest.Create("https://graph.facebook.com/me?access_token=" + UriDataStringRFC3986(accessToken));
            using (var response = request.GetResponse())
            {
                using (var responseStream = response.GetResponseStream())
                {
                    graphData = OAuthJsonHelper.Deserialize<FacebookGraphData>(responseStream);
                }
            }

            // this dictionary must contains
            var userData = new Dictionary<string, string>();
            if (!string.IsNullOrEmpty(graphData.Id)) { userData.Add("id", graphData.Id); }
            if (!string.IsNullOrEmpty(graphData.Email)) { userData.Add("username", graphData.Email); }
            if (!string.IsNullOrEmpty(graphData.Name)) { userData.Add("name", graphData.Name); }

            if (graphData.Link != null && !string.IsNullOrEmpty(graphData.Link.AbsoluteUri)) { userData.Add("link", graphData.Link == null ? null : graphData.Link.AbsoluteUri); }

            if (!string.IsNullOrEmpty(graphData.Gender)) { userData.Add("gender", graphData.Gender); }
            if (!string.IsNullOrEmpty(graphData.Birthday)) { userData.Add("birthday", graphData.Birthday); }

            return userData;
        }

        /// <summary>
        /// Obtains an access token given an authorization code and callback URL.
        /// </summary>
        /// <param name="returnUrl">
        /// The return url.
        /// </param>
        /// <param name="authorizationCode">
        /// The authorization code.
        /// </param>
        /// <returns>
        /// The access token.
        /// </returns>
        protected override string QueryAccessToken(Uri returnUrl, string authorizationCode)
        {
            // Note: Facebook doesn't like us to url-encode the redirect_uri value
            var builder = new UriBuilder(TokenEndpoint);
            builder.AppendQueryArgument("client_id", this.appId);
            builder.AppendQueryArgument("redirect_uri", NormalizeHexEncoding(returnUrl.AbsoluteUri));
            builder.AppendQueryArgument("client_secret", this.appSecret);
            builder.AppendQueryArgument("code", authorizationCode);
            builder.AppendQueryArgument("scope", this.scope);

            using (WebClient client = new WebClient())
            {
                string data = client.DownloadString(builder.Uri);
                if (string.IsNullOrEmpty(data))
                {
                    return null;
                }

                var parsedQueryString = HttpUtility.ParseQueryString(data);
                return parsedQueryString["access_token"];
            }
        }

        /// <summary>
        /// Converts any % encoded values in the URL to uppercase.
        /// </summary>
        /// <param name="url">The URL string to normalize</param>
        /// <returns>The normalized url</returns>
        /// <example>NormalizeHexEncoding("Login.aspx?ReturnUrl=%2fAccount%2fManage.aspx") returns "Login.aspx?ReturnUrl=%2FAccount%2FManage.aspx"</example>
        /// <remarks>
        /// There is an issue in Facebook whereby it will rejects the redirect_uri value if
        /// the url contains lowercase % encoded values.
        /// </remarks>
        private static string NormalizeHexEncoding(string url)
        {
            var chars = url.ToCharArray();
            for (int i = 0; i < chars.Length - 2; i++)
            {
                if (chars[i] == '%')
                {
                    chars[i + 1] = char.ToUpperInvariant(chars[i + 1]);
                    chars[i + 2] = char.ToUpperInvariant(chars[i + 2]);
                    i += 2;
                }
            }
            return new string(chars);
        }

        /// <summary>
        /// The set of characters that are unreserved in RFC 2396 but are NOT unreserved in RFC 3986.
        /// </summary>
        private static readonly string[] UriRfc3986CharsToEscape = new[] { "!", "*", "'", "(", ")" };

        internal static string UriDataStringRFC3986(string value)
        {
            // Start with RFC 2396 escaping by calling the .NET method to do the work.
            // This MAY sometimes exhibit RFC 3986 behavior (according to the documentation).
            // If it does, the escaping we do that follows it will be a no-op since the
            // characters we search for to replace can't possibly exist in the string.
            var escaped = new StringBuilder(Uri.EscapeDataString(value));

            // Upgrade the escaping to RFC 3986, if necessary.
            for (int i = 0; i < UriRfc3986CharsToEscape.Length; i++)
            {
                escaped.Replace(UriRfc3986CharsToEscape[i], Uri.HexEscape(UriRfc3986CharsToEscape[i][0]));
            }

            // Return the fully-RFC3986-escaped string.
            return escaped.ToString();
        }

        #endregion
    }
} 
```

需要一些依赖库才能使其按原样工作，所有这些库都在 NuGet 上可用。您已经拥有 DotNetOpenAuth；[http://nuget.org/packages/Validation/](http://nuget.org/packages/Validation/)是另一个。这`OAuthJsonHelper`是 DotNetOpenAuth 使用的内部类的副本 - 为了让这个提供程序工作，我必须在我自己的命名空间中重新实现它：

```
using System;
using System.IO;
using System.Runtime.Serialization.Json;
using Validation;

namespace OAuthProviders
{
    /// <summary>
    /// The JSON helper.
    /// </summary>
    internal static class OAuthJsonHelper
    {
        #region Public Methods and Operators

        /// <summary>
        /// The deserialize.
        /// </summary>
        /// <param name="stream">
        /// The stream.
        /// </param>
        /// <typeparam name="T">The type of the value to deserialize.</typeparam>
        /// <returns>
        /// The deserialized value.
        /// </returns>
        public static T Deserialize<T>(Stream stream) where T : class
        {
            Requires.NotNull(stream, "stream");

            var serializer = new DataContractJsonSerializer(typeof(T));
            return (T)serializer.ReadObject(stream);
        }

        #endregion
    }
} 
```

这一切都是按原样提供**的**，不能保证它可以通过复制/粘贴来工作 - 由您决定如何将其集成到您的项目中。

# ruby-on-rails - 换行符未在heredoc中显示

> ID：15942701
> 
> 赞同：2
> 
> 时间：2013-04-11T07:10:36.577
> 
> 标签：ruby-on-rails, ruby, rmagick, heredoc

我有一个heredoc字符串

```
 html =<<EOF
    <span>
      Hello hello 123
    </span>
    <a>Link1</a>
    <a>Link2Link2</a>
EOF 
```

如果我说`puts html`，它将按原样给出 html，这意味着新行很好。如果我打电话`p html`，我会得到没有换行符的 html。

但是，我真正需要做的是将这个 html 转换为图片，它**应该有**换行符。我是这样做的：

```
kit  = IMGKit.new html, quality: 30
# using Magick::Image ......
# some code which is not important....
img.write("my_gif.gif") 
```

几乎没问题，除了结果 html，正如我已经说过的那样，没有换行符，它只有一行：

```
<span>Hello hello 123</span><a>Link1</a><a>Link2Link2</a> 
```

当然，如果我添加`<br />`标签，这一切都会解决。但是由于某种原因我不能这样做，我不想使用`<br />`并且仍然有换行符。

这不是问题，`IMGKit`或者`Rmagic`我很确定。

那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:35:25.153

我同意这不是问题`IMGKit`——它正在做它应该做的事情——渲染 HTML。heredoc 也没有任何问题，并且您可以使用 Ruby 的 HTML 表示来做任何神奇的事情，例如 HTML 源代码中的文字空白（空格、制表符、换行符）在呈现时变得可见。

HTML 查看器最常见的源空白呈现是任何长度的纯空白（无论是空格、制表符、换行符还是任何组合）都在视图中呈现为单个空格`->` `<-`。此外，一个元素结束和另一个开始之间的空白通常被完全忽略（尽管元素本身的渲染可能会导致视图中的布局/间距效果）。

但是，您可以执行以下操作：

```
kit  = IMGKit.new html.gsub(/\n/,"<br/>"), quality: 30 
```

`<br/>`并在不添加到您的heredoc的情况下呈现换行符。

# actionscript-3 - 设置 ButtonBarButton 组件的“allowDeselction”属性时出现问题

> ID：15942702
> 
> 赞同：1
> 
> 时间：2013-04-11T07:10:38.047
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5, buttonbar

我想要像单个按钮一样的标签，每个按钮之间有一些间距。它应该像普通的选项卡导航器选项卡一样工作。

因此，我使用了一个 Spark ButtonBar 组件，并对 ButtonBarSkin 进行了更改，使其看起来像我上面所说的那样。ButtonBar 的默认行为是 ButtonBar 控件中只有一个按钮可以处于选中状态。这意味着当您在 ButtonBar 控件中选择一个按钮时，该按钮将保持选中状态，直到您选择另一个按钮。

但是，如果我点击已经选择的按钮，选择就会消失。我不需要这样的行为。我希望按钮处于选定状态，即使我再次单击它，就像在标签栏控件中一样。

当我探索按钮栏皮肤时，我知道按钮栏按钮被用于定义按钮栏控件的自定义项目渲染器。ButtonBarButton 组件有一个“ **allowDeselection** ”属性，默认为true，这意味着可以通过再次单击取消选择按钮栏中的选定按钮。如果设置为 false，用户必须选择不同的按钮来取消选择当前选择的按钮。

因此，在 ButtonBarSkin 中声明 buttonbarbutton 组件时，我将**allowDeselection**属性设置为 false。即使那样，该值也被设置为true。在调试代码时，我发现奇怪的是，首先设置了声明的值，即**false**，然后再次将按钮栏的所有 firstbutton、middlebutton 和 lastbutton 设置为 true。我不知道该属性是如何设置为 true 的，即使我在 buttonbarskin 中定义时将其设置为 false。

代码片段如下：

## 按钮栏控件

```
 <s:ButtonBar skinClass="skin.ButtonBarSkinCopy">
        <mx:ArrayCollection>
            <fx:String>Flash</fx:String> 
            <fx:String>Director</fx:String> 
            <fx:String>Dreamweaver</fx:String> 
            <fx:String>ColdFusion</fx:String> 
        </mx:ArrayCollection>
    </s:ButtonBar> 
```

## ButtonBarSkinCopy.mxml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Metadata>
<![CDATA[ 
   /** 
     * @copy spark.skins.spark.ApplicationSkin#hostComponent
     */
    [HostComponent("spark.components.ButtonBar")]
]]>
</fx:Metadata> 

<s:states>
    <s:State name="normal" />
    <s:State name="disabled" />
</s:states>

<fx:Declarations>
    <!--- 
        @copy spark.components.ButtonBar#firstButton
        @default spark.skins.spark.ButtonBarFirstButtonSkin
        @see spark.skins.spark.ButtonBarFirstButtonSkin
    -->
    <fx:Component id="firstButton">
        <s:ButtonBarButton allowDeselection="false" skinClass="skin.CustomButtonBarButtonSkin" />
    </fx:Component>

    <!--- 
        @copy spark.components.ButtonBar#middleButton
        @default spark.skins.spark.ButtonBarMiddleButtonSkin
        @see spark.skins.spark.ButtonBarMiddleButtonSkin
    -->
    <fx:Component id="middleButton" >
        <s:ButtonBarButton allowDeselection="false" skinClass="skin.CustomButtonBarButtonSkin" />
    </fx:Component>

    <!--- 
        @copy spark.components.ButtonBar#lastButton
        @default spark.skins.spark.ButtonBarLastButtonSkin
        @see spark.skins.spark.ButtonBarLastButtonSkin
    -->
    <fx:Component id="lastButton" >
        <s:ButtonBarButton allowDeselection="false" skinClass="skin.CustomButtonBarButtonSkin"/>
    </fx:Component>

</fx:Declarations>

<!--- @copy spark.components.SkinnableDataContainer#dataGroup -->
<s:DataGroup id="dataGroup" width="100%" height="100%">
    <s:layout>
        <s:ButtonBarHorizontalLayout gap="2"/>
    </s:layout>
</s:DataGroup> 
```

而CustomButtonBarButtonSkin.mxml 只是ButtonBarButtonSkin 的一个副本。ButtonBarButtonSkin.mxml 中没有进行任何更改。

请分享您的观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:42:30.383

您需要将组件的[requireSelection](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ListBase.html#requireSelection)属性设置`ButtonBar`为`true`. 为 true时`requireSelection`，无法取消选择按钮栏上的按钮。从文档中：

> 如果为 true，则必须始终在控件中选择数据项。如果值为 true，则 selectedIndex 属性始终设置为介于 0 和 (dataProvider.length - 1) 之间的值。
> 
> 大多数子类的默认值为 false，TabBar 除外。在这种情况下，默认值为 true。
> 
> 默认值为假。

您可以在[此示例](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ButtonBar.html#includeExamplesSummary)中看到它的工作原理（向下滚动以查看演示）。

# c++ - 删除指针向量

> ID：15942706
> 
> 赞同：9
> 
> 时间：2013-04-11T07:10:57.500
> 
> 标签：c++, pointers, vector, smart-pointers, delete-operator

我需要创建一个类实例的指针，而程序在编译时不知道我将创建多少个指针。对于删除，我正在考虑将指针存储在向量中，然后将它们一一删除。使用智能指针会更清洁吗？如果不想使用智能指针，向量的这种使用会被认为是干净的吗？

最低代码：

```
#include <vector>
using namespace std;

class Foo {
public:
    Foo();
};
Foo::Foo(){}
void createFooVector(int nb, std::vector<Foo*> &v){
    for(int i=0;i<nb;i++){
        Foo* f = new Foo();
        v.push_back(f);
    }
}
int main(int argc, char *argv[]){
    std::vector<Foo*> v;
    createFooVector(5,v); 
    while (!v.empty()){
        Foo* f = v.back();
        v.pop_back();
        delete f;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:14:03.880

我建议要么使用[boost::pointer_vector](http://www.boost.org/doc/libs/1_53_0/libs/ptr_container/doc/ptr_vector.html)、 an `std::vector<std::unique_ptr<Foo>>`，要么推出你自己的`Foo`管理器类，它包含 a`vector<Foo*>`并负责在构造函数中删除（你应该将其视为“专家”解决方案，并且只有在你完全了解异常安全）。您不想手动删除，这很容易导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:13:02.023

你的代码很好。但是，使用智能指针应该是首选（要编写的代码更少，内存错误的机会也更少）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:14:02.037

> 使用智能指针会更清洁吗？

是的。

> 如果不想使用智能指针，向量的这种使用会被认为是干净的吗？

我不知道，如果不是家庭作业，为什么有人不想在 C++ 中使用智能指针……但是，我认为，`boost::pointer_containers`在这种情况下最好使用类似的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T07:23:21.313

如果您不使用从 派生的类`Foo`，并且`Foo`复制构造相对便宜，则只需使用`vector<Foo>`.

如果您的编译器支持移动语义，则应该没有问题。

# perl - 无法加载 Perl 子包

> ID：15942709
> 
> 赞同：0
> 
> 时间：2013-04-11T07:11:08.177
> 
> 标签：perl, perl-module

我不知道为什么我无法访问子包：

`mbzdb`：

```
#!/usr/bin/perl -w

use lib "./lib";
use MbzDb::Instance;

my $instance = new MbzDb::Instance();
$instance->startFromCommandLine(); 
```

`lib/MbzDb/Instance.pm`：

```
#!/usr/bin/perl -w

package MbzDb::Instance;

use strict;
use warnings;
use Getopt::Long;
require Exporter;
our @ISA = qw(Exporter);
our @EXPORT = qw(new startFromCommandLine);

sub new {
    my $class = shift;
    return bless {}, $class;
}

sub startFromCommandLine {
    my $self = shift;
} 
```

如果我在`lib/MbzDb.pm`导出中使用相同的代码可以正常工作。我究竟做错了什么？

给出的错误是：

> 无法通过 ./mbzdb 第 6 行的包“MbzDb::Instance”（也许您忘记加载“MbzDb::Instance”？）找到对象方法“new”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:18:54.963

尝试使用出色的[FindBin](http://search.cpan.org/~rjbs/perl-5.16.3/lib/FindBin.pm)模块。

```
use FindBin;
use lib $FindBin::Bin . '/lib';
use MbzDb::Instance; 
```

如果您的结构如下所示，则此方法有效：

```
mbzdb
lib/
  MbzDb/
    Instance.pm 
```

# c# - 一个用于连接具有相同接口的两个不同对象列表的衬垫

> ID：15942716
> 
> 赞同：1
> 
> 时间：2013-04-11T07:11:30.707
> 
> 标签：c#, .net, linq, generics, interface

考虑这个简单的代码：

```
public interface Iinterface { }
public class Foo : Iinterface { }
public class Bar : Iinterface { }
[TestMethod()]
public void Test_Concat()
{
    var bars = new List<Bar>();
    var foos = new List<Foo>();
    // Ok
    IEnumerable<Iinterface> concats1 = bars.Cast<Iinterface>().Concat(foos.Cast<Iinterface>());
    // Compilation error
    IEnumerable<Iinterface> concats2 = bars.Concat(foos);
} 
```

我想将两个列表合并为一行，**并在编译时保持类型安全**。

例如，如果我删除了 class 的接口`Foo`，这仍然会编译，但在运行时会失败：

```
public interface Iinterface { }
public class Foo { }
public class Bar : Iinterface { }
[TestMethod()]
public void Test_Concat()
{
    var bars = new List<Bar>();
    var foos = new List<Foo>();
    IEnumerable<Iinterface> concats1 = bars.Cast<Iinterface>().Concat(foos.Cast<Iinterface>());
} 
```

如果我使用`OfType<T>()`，这不会在运行时失败，但我希望它在编译时失败。我能找到的最好的方法是使用这 3 行代码：

```
var list = new List<Iinterface>();
list.AddRange(bars);
list.AddRange(foos); 
```

但是对于这么简单的事情，我想找到一个单行，如果可能的话，检索一个`IEnumerable<Iinterface>`而不是一个`List<Iinterface>`.
有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:37:45.767

你可以写你自己的方法吗？

由于 IEnumerable 是协变的，因此您只需要指定基数

```
var list= Combine<IInterface>(foos, bars);

private IEnumerable<T> Combine<T>(IEnumerable<T> ListA, IEnumerable<T> ListB)
{
    foreach (T t in ListA)
        yield return t;
    foreach (T t in ListB)
        yield return t;
} 
```

虽然你也可以写

```
var list= foos.Concat<IInterface>(bars); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:19:43.320

如何制作您的自定义`Concat`扩展方法版本：

```
public static class MyEnumerable
{
    public static IEnumerable<T> Concat<T, T1, T2>(this IEnumerable<T1> source, this IEnumerable<T2> other)
        where T1 : T
        where T2 : T
    {
        return source.Cast<T>().Concat(other.Cast<T>());
    }
} 
```

用法：

```
var items = foos.Concat<Iinterface, Foo, Bar>(bars); 
```

它具有编译时安全性，如果有任何`Foo`和`Bar`不实现`Iinterface`.

它还应该支持开箱即用的不同执行，因为使用的 LINQ 方法可以。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T07:45:57.827

事实上，concat 方法已经做了我想要的，我只是需要通过指定返回类型来提供一点帮助，因为返回类型[没有类型推断。](https://stackoverflow.com/questions/3203643/generic-methods-in-net-cannot-have-their-return-types-inferred-why)

```
 public interface Iinterface { }
    public class Foo : Iinterface { }
    public class Bar : Iinterface { }
    [TestMethod()]
    public void Test_Concat()
    {
        var bars = new List<Bar>();
        var foos = new List<Foo>();

        var list = foos.Concat<Iinterface>(bars);
    } 
```

我太习惯使用推理了，以至于有时我忘记了，编译器需要提示！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:41:24.030

你可以这样做：

```
public void Test_Concat2()
{
    IEnumerable<Iinterface> bars = new List<Bar>();
    IEnumerable<Iinterface> foos = new List<Foo>();

    IEnumerable<Iinterface> concats = bars.Concat(foos);
} 
```

如果您随后更改定义`Foo`或`Bar`使其不再具有接口，您将收到编译时错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T09:14:08.043

问题似乎出在 Cast 而不是 Concat 中。声明如下：

```
public static IEnumerable<TSource> Concat<TSource>(this IEnumerable<TSource> first, IEnumerable<TSource> second);

public static IEnumerable<TResult> Cast<TResult>(this IEnumerable source); 
```

在 Concat 中，两个 enunerable 都是强类型的，但 Cast 不限制源类型，因此问题发生在运行时而不是编译时。

**在(TResult) s 的**运行时尝试如下的 MyCast 实现失败

 **```
public static IEnumerable<TResult> MyCast<TResult>(this IEnumerable source)
{
    var result = (from object s in source select (TResult) s).ToList();
    return result.AsEnumerable();
} 
```

如果在新的 Cast 中实现一些类型检查，如下所示：

```
public static IEnumerable<TResult> MyCast2<TSource, TResult>(this IEnumerable<TSource> source)
    where TSource : TResult
{
    var result = (from object s in source select (TResult)s).ToList();
    return result.AsEnumerable();
} 
```

然后调用行需要两个类型的参数，像这样

```
IEnumerable<Iinterface> concats3 = bars.Concat(foos.MyCast2<Foo, Iinterface>()); 
```

并且编译器检测到 Foo 不能转换为 Iinterface。

当然，在 Concat 上指定返回类型更简洁。**

# android - 使用 mopub 的应用在 Android 设备上运行时找不到库

> ID：15942720
> 
> 赞同：0
> 
> 时间：2013-04-11T07:11:35.863
> 
> 标签：android, eclipse, jar, mopub

我有一个使用 mopub 进行广告的项目。它设置为使用 Google AdMob 和 Millennial Media 第三方广告。我已按照以下位置的说明进行操作：

[http://help.mopub.com/customer/portal/articles/1049608-simple-ads-demo---android-2-4-integrating](http://help.mopub.com/customer/portal/articles/1049608-simple-ads-demo---android-2-4-integrating)

并且当我从eclipse运行它时，能够在设备（nexus 7）上运行应用程序时显示广告。但是，如果我导出应用程序并将 apk 安装到设备上，则广告不起作用。来自设备的 logcat 给出以下错误：

```
I/MoPub   (30361): Fetching ad network type: millennial_native
I/MoPub   (30361): Loading native ad
D/MoPub   (30361): Couldn't find com.mopub.mobileads.MillennialAdapter class. Make sure the project includes the adapter library for com.mopub.mobileads.MillennialAdapter from the extras folder
I/MoPub   (30361): Couldn't load native adapter. Trying next ad...
...
I/MoPub   (30361): Fetching ad network type: admob_native
I/MoPub   (30361): Loading native ad
D/MoPub   (30361): Couldn't find com.mopub.mobileads.GoogleAdMobAdapter class. Make sure the project includes the adapter library for com.mopub.mobileads.GoogleAdMobAdapter from the extras folder
I/MoPub   (30361): Couldn't load native adapter. Trying next ad... 
```

似乎这些库没有被导出到 apk 中。根据：

[http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

lib 目录中的 jar 文件应该会自动导出到应用程序中。我已将库放在 mopub 项目和我的项目中。我还尝试将库添加到构建路径并确保选中导出复选框。一切都无济于事。

我已经尝试将应用程序与 mopub 项目断开连接，只添加已编译的 mopub 库并将其粘贴到我的应用程序的 lib 目录中，但是当我导出项目时 proguard 会出错。

```
Proguard returned with error code 1\. See console
Warning: com.mopub.mobileads.MraidView: can't find referenced class com.mopub.mobileads.R
   You should check if you need to specify additional program jars.
Warning: there were 41 unresolved references to classes or interfaces.
      You may need to specify additional library jars (using '-libraryjars').
java.io.IOException: Please correct the above warnings first.
at proguard.Initializer.execute(Initializer.java:321)
at proguard.ProGuard.initialize(ProGuard.java:211)
at proguard.ProGuard.execute(ProGuard.java:86)
at proguard.ProGuard.main(ProGuard.java:492) 
```

同样，当我从 eclipse 运行它时它可以在设备上运行，但当我从 apk 安装它后运行它时它不能运行。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:11:41.247

一切都很好，您在 libs 文件夹中添加了原生 Millennial 和 Admob SDK。问题是找不到适配器类（它们不在 mmedia 或 admob jar 中，它们是自定义 mopub 类）。它们位于 mopub SDK 的 extras\src\com\mopub\mobileads\networkadapters 文件夹中。`com.mopub.mobileads`按照您给定的 mopub 教程中的建议，将它们复制到您的项目包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:46:39.710

查看这些链接......那里有很多有用的信息，用于网络适配器的基本集成和使用：

[Android 集成第一部分](http://help.mopub.com/customer/portal/articles/285186)

[Android 集成第二部分](http://help.mopub.com/customer/portal/articles/285194-android-integration-part-ii-interstitials)

[Android 集成第三部分](http://help.mopub.com/customer/portal/articles/285195-android-integration-part-iii-millennial-admob-and-custom-networks)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T17:39:02.763

这已经很晚了，但我后来在另一个项目中发现 proguard 正在删除库。找到正确的-keep 修复它。

# objective-c - 如何在 NSPersistentDocument 应用程序中设置 Magical Record？

> ID：15942724
> 
> 赞同：1
> 
> 时间：2013-04-11T07:12:08.310
> 
> 标签：objective-c, cocoa, core-data, magicalrecord, nspersistentdocument

我正在学习开发可可应用程序，但我直接跳到核心数据。好吧，这似乎是编写我想要的应用程序的正确方法。所以，我一直在研究[Magical Record](https://github.com/magicalpanda/MagicalRecord)，发现[这个非常有用的教程](http://yannickloriot.com/2012/03/magicalrecord-how-to-make-programming-with-core-data-pleasant/#sthash.d2iaGJ47.dpbs)解释了如何在 AppDelegate 上设置 Magical Record。

问题是我正在构建一个基于文档的应用程序，所以我有一个上下文，每个上下文都被神奇地设置并通过属性`NSPersistentDocument`可供我使用。`managedObjectContext`

所以，首先，我不知道我是否应该将 MR 连接到这个上下文，或者在我的文档类中覆盖 Core Data 的堆栈创建以使用 MR。

那么如何在这里设置Magical Record呢？

# php - 在 php 中转换编码不会在 ASCII 和 UTF-8 之间转换

> ID：15942733
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:12:31.363
> 
> 标签：php, encoding, utf-8, ascii

UTF-8 与 ASCII 不一样吗？你将如何解释我得到的不同结果：

```
$result = mb_detect_encoding($PLAINText, mb_detect_order(), true); 
```

有时我在 $result 中得到“UTF-8”，有时我得到“ASCII”。所以它们是不同的，但这不是我的问题，我的问题是为什么 iconv() 代码不能从 ASCII 转换为 UTF-8？

```
$result = iconv("ASCII","UTF-8//IGNORE",$PLAINText); 
```

我稍后使用 mb_detect_encoding() 函数检查 $result 编码，它仍然是“ASCII”，而不是“UTF-8”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:21:17.527

原因是在 UTF-8 字符串中仅使用 ASCII 字符时，UTF-8 字符串与 ASCII 字符串无法区分。（除非使用[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)，但它是可选的。）

# java - 如何优化这个？

> ID：15942735
> 
> 赞同：-2
> 
> 时间：2013-04-11T07:12:43.427
> 
> 标签：java, sql, optimization

所以我有这段代码可以将代理列表添加到本地 SQLite 数据库作为一条 sql 指令。

```
public void Add(List<Broker> brokers)
{
    if(brokers == null || brokers.size() == 0)
      return;

    String sql = "INSERT INTO " + TABLE_NAME + " SELECT " + brokers.get(0).getId() + " AS '" + COLUMN_BROKERID + "', "+ brokers.get(0).getOfficeId() + " AS '" + COLUMN_OFFICEID +  "', '"+ brokers.get(0).getName() + "' AS '" + COLUMN_NAME +  "', "+ brokers.get(0).getSuccessRate() + " AS '" + COLUMN_SUCCESSRATE +  "'";

    for(int i=1; i<brokers.size(); i++)
    {
        sql = sql + " UNION SELECT " + brokers.get(i).getId() + ", " + brokers.get(i).getOfficeId() + ", '" + brokers.get(i).getName() + "', " + brokers.get(i).getSuccessRate();
    }

    databaseManager.ExecuteNonQuery(sql);
 } 
```

但是，使这种速度减慢很多的是字符串“sql”的变化。最后一行，这是一个调用，`ExecuteNonQuery()`需要一毫秒，但上面需要很多。我怎样才能加快速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:45:27.987

永远不要使用字符串来构建 SQL 查询。

相反，使用[PreparedStatement](http://docs.oracle.com/javase/7/docs/api/)并设置占位符。这既是类型安全的，又消除了 SQL 注入的风险。

如果您的查询由于运行时的条件而必须以编程方式构建，请使用@mthmulders 建议来构建准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:16:36.397

首先，我建议使用 a[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)来构建您的查询字符串。请注意，它不是线程安全的；如果需要，请使用[`StringBuffer`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html).

它大致看起来像这样：

```
 StringBuilder sb = new StringBuilder();
    sb.append("INSERT INTO ");
    sb.append(TABLE_NAME);
    sb.append(" SELECT ");
    sb.append(brokers.get(0).getId());
    sb.append(" AS '");
    sb.append(COLUMN_BROKERID); 
```

使用 10.000 个代理，原始方法在我的机器上需要 13984 毫秒。重构为 a`StringBuilder`将其缩小到 15 或 16 毫秒。

接下来，您可以尝试使用[字符串格式化](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)。它大致看起来像这样：

```
String test = String.format("INSERT INTO %1...", TABLE_NAME); 
```

很难说它是否表现更好，但你可以衡量它并决定它是否会提高性能。

# python-3.x - 这是 IPython Notebook 中的 Python 3 回归吗？

> ID：15942741
> 
> 赞同：2
> 
> 时间：2013-04-11T07:13:03.663
> 
> 标签：python-3.x, ipython

我正在尝试基于 ipythonblocks 创建一些简单的异步执行动画，并且我正在尝试使用`clear_output()`后跟一个`grid.show()`.

对于文本输出，该技术的基础在[线程 IPython Notebooks 的每个单元格输出中进行](https://stackoverflow.com/questions/14393989/per-cell-output-for-threaded-ipython-notebooks/14395336#14395336)了讨论，因此我的简单假设是使用相同的方法来隔离 HTML 输出。由于我想用更新后的 HTML 版本反复替换网格，因此我尝试使用它`clear_output()`来确保只显示一个网格副本。

我验证了这种提议的技术适用于以下单元格的文本输出。首先是上下文管理器。

```
import sys
from contextlib import contextmanager
import threading

stdout_lock = threading.Lock()
n = 0

@contextmanager
def set_stdout_parent(parent):
    """a context manager for setting a particular parent for sys.stdout
    (i.e. redirecting output to a specific cell). The parent determines
    the destination cell of output
    """
    global n
    save_parent = sys.stdout.parent_header
    # we need a lock, so that other threads don't snatch control
    # while we have set a temporary parent
    with stdout_lock:
        sys.stdout.parent_header = parent
        try:
            yield
        finally:
            # the flush is important, because that's when the parent_header actually has its effect
            n += 1; print("Flushing", n)
            sys.stdout.flush()
            sys.stdout.parent_header = save_parent 
```

然后是测试代码

```
import threading
import time
class timedThread(threading.Thread):
    def run(self):
        # record the parent (uncluding the stdout cell) when the thread starts
        thread_parent = sys.stdout.parent_header
        for i in range(3):
            time.sleep(2)
            # then ensure that the parent is the same as when the thread started
            # every time we print
            with set_stdout_parent(thread_parent):
                print(i)

timedThread().start() 
```

这提供了输出

```
0
Flushing 1
1
Flushing 2
2
Flushing 3 
```

所以我修改了代码以清除循环之间的单元格。

```
import IPython.core.display

class clearingTimedThread(threading.Thread):
    def run(self):
        # record the parent (uncluding the stdout cell) when the thread starts
        thread_parent = sys.stdout.parent_header
        for i in range(3):
            time.sleep(2)
            # then ensure that the parent is the same as when the thread started
            # every time we print
            with set_stdout_parent(thread_parent):
                IPython.core.display.clear_output()
                print(i)

clearingTimedThread().start() 
```

正如预期的那样，单元格的输出区域被反复清除，并最终读取

```
2
Flushing 6 
```

因此，我认为在使用 ipythonblocks 时使用相同的技术来清除单元格的输出区域是安全的。唉，没有。这段代码

```
from ipythonblocks import BlockGrid

w = 10
h = 10

class clearingBlockThread(threading.Thread):
    def run(self):
        grid = BlockGrid(w, h)
        # record the parent (uncluding the stdout cell) when the thread starts
        thread_parent = sys.stdout.parent_header
        for i in range(10):
            # then ensure that the parent is the same as when the thread started
            # every time we print
            with set_stdout_parent(thread_parent):
                block = grid[i, i]
                block.green = 255
                IPython.core.display.clear_output(other=True)
                grid.show()
            time.sleep(0.2)

clearingBlockThread().start() 
```

确实会产生所需的最终状态（带有绿色对角线的黑色矩阵），但中间步骤不会出现在单元格的输出区域中。稍微复杂一点（？）这个例子是在 Python 3 上运行的。在发布之前检查我发现预期的行为（一个简单的动画）实际上确实发生在 Python 2.7 下。因此，我想问这是否是我需要报告的问题。

# c++ - g++ 4.6.3 在 64 位服务器上构建代码时崩溃

> ID：15942744
> 
> 赞同：3
> 
> 时间：2013-04-11T07:13:17.867
> 
> 标签：c++, crash, g++, ubuntu-12.04

我一直在开发一个在 64 位 Ubuntu 12.04 上运行的 C++ 应用程序。我在我的 32 位 12.04 Ubuntu 笔记本电脑上开发代码，然后将其上传到 git 存储库，将其拉到服务器上并本地构建拉取的源代码。

直到最近一切正常，我没有任何问题，但今天当我尝试在 64 位服务器上编译时 g++ 4.6.3 崩溃了，我得到一个输出告诉我提交崩溃报告（g++ 4.6.3 与我的版本相同也在我的开发机器上）。相同的代码不会导致我的开发机器崩溃。

我不是在问它为什么崩溃，但如果可能的话，我想知道问题出在哪里。g++ 遇到问题时会产生任何文件日志吗？据我所知，我的代码没有做任何有争议的事情，我没有创建模板，我只是使用了几个 boost 库、mysql++、openssl 和一些我自己编写的静态库。我真的需要每天运行这个应用程序，所以我想尽快解决这个问题。我可以想到以下几种方式来处理事情

1.  尝试找出我的代码的哪些方面导致编译器崩溃并相应地重写我的代码。
2.  租另一台服务器。
3.  升级（或降级）g++ 或在服务器上创建一个额外的 g++ 并尝试。我不愿意这样做，因为我已经读到在 Ubuntu 上升级 g++ 时可能会破坏系统。
4.  我使用 Eclipse 在我的开发机器上构建所有内容，并使用 Eclipse 生成的 makefile 在我的服务器上简单地构建代码，我已经将它作为 git 项目的一部分 - 我可以编写自己的 makefile，以防其中的某些东西导致 64 崩溃位服务器。

我真的很欢迎有关如何进行的建议。我不是编译器如何在内部工作的专家，这是我第一次遇到这种错误，所以我不太确定下一步该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:27:50.167

> 我真的很欢迎有关如何进行的建议

崩溃的一个原因可能是硬件问题（磁盘、磁盘控制器、内存或其他问题）。这很难检测。

另一个原因可能是编译器错误，但不太可能。

你可以做的是：

*   检查服务器的硬件（运行你能想到的所有可能的检查）。尝试在不同的机器上编译多次
*   确保您的系统没有耗尽虚拟内存
*   升级或更改编译器，看看是否发生

* * *

有各种文章解释说 g++ 可能由于硬件问题而崩溃：

*   [编译期间崩溃](http://www.bitwizard.nl/sig11/)- 您的安装、编译器或内核很可能没有任何问题。它很可能与您的硬件有关。这个“规则”有两个例外。您可能在虚拟内存上运行不足，或者您可能正在安装 Red Hat 5.x、6.x 或 7.x
*   [优化时崩溃](http://www.delorie.com/djgpp/v2faq/faq6_4.html)

# c# - 在 GridView RowDataBound 事件中获取 BoundField 值

> ID：15942762
> 
> 赞同：2
> 
> 时间：2013-04-11T07:14:04.293
> 
> 标签：c#, asp.net, gridview, boundfield

我想`LangId`在 RowDataBound 函数中取值。这个怎么做？

```
<asp:BoundField DataField="LangId" HeaderText="LangId" Visible="false" />

protected void grdList_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        // need LangId
        ImageButton imgBtn = (ImageButton)e.Row.FindControl("imgBtnDelete");
        imgBtn.Visible = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T07:55:01.883

有几种方法可以做到这一点。也许更多。

```
<asp:BoundField DataField="LangId" HeaderText="LangId" Visible="false" />

protected void grdList_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
       string langId = e.Row.Cells[columnIndex].Text; // one of the ways

       string langId2 = DataBinder.Eval(e.Row.DataItem, "LangId").ToString(); // one of the other ways
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:45:18.747

您可以通过以下方式获得它：

```
string str = e.Row.Cells[CloumnIndexOfYourBoundField].Text; 
```

`ColumnIndexOfYourBoundField`表示如果您的列是第一列而不是它的索引是 0，如果它的第二列比它的 1 等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-14T18:50:11.190

使用动态类型，您可以访问记录中的字段：

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    dynamic data = e.Row.DataItem;
    int LangId = data.LangId;
    // do your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:42:49.547

.ASPX 文件：

```
<ItemTemplate>
    <asp:ImageButton ID="imgEdit" runat="server" AlternateText="Edit"
        CommandArgument='<%# Eval("LangId") %>' CommandName="DeleteLedger" ToolTip="Delete"
        ImageUrl="~/App_Themes/DefaultClient/images/Delete.png" />
</ItemTemplate> 
```

.CS 文件：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    DataRowView dataRow = ( DataRowView ) e.Item.DataItem;
    string strLangId = dataRow["LangId"].ToString();
    DataTable dtData1 = 
    objAccountTypeBAL.ChkLedgerRelation(Convert.ToInt64(strLangId ), objSession.BranchId);

    if (dtData1.Rows.Count > 0)
    {
        ImageButton img = (ImageButton)item["Delete"].Controls[0];
        img.Visible = false;          
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T07:33:06.407

数据对象`e.Row.DataItem`在当时可用。您只需要将其转换为适当的类型。

```
var myItem = (MyType)e.Row.DataItem;
// myItem.LangId now available 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-24T12:54:27.850

```
 protected void GrdEmplistFromAtt_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Cells[0].Attributes.Add("onmouseover", "MouseEvents(this, event)");
            e.Row.Cells[0].Attributes.Add("onmouseout", "MouseEvents(this, event)");
        }
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Label lbl_GrdCode = (Label)e.Row.FindControl("lblGrdCode");
}
} 
```

# javascript - 在 Primefaces 中更改 Mindmap 中 Node 的显示

> ID：15942763
> 
> 赞同：1
> 
> 时间：2013-04-11T07:14:04.883
> 
> 标签：javascript, jsf-2, primefaces

我想改变思维导图中节点的显示[，](http://www.primefaces.org/showcase/ui/mindmap.jsf)你知道我该如何开始吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:45:09.420

从[PrimeFaces Downloads](http://primefaces.org/downloads.html)下载*primefaces-3.X-sources.jar*并解压

在*primefaces-3.X-sources\META-INF\resources\primefaces\mindmap*

你会找到*mindmap.js*文件，里面有一个`createNode`函数，这个函数绘制节点，primefaces使用[Raphaël—JavaScript库](http://raphaeljs.com/)来绘制思维导图

您可以*使用*该功能`createNode`并尝试绘制其他元素，而不是将修改后的 js 文件放入您的*primefaces-3.X.jar*并检查它...

# macos - 使用自定义 kext 在 MAC OS X 上隐藏 USB 音频设备

> ID：15942765
> 
> 赞同：5
> 
> 时间：2013-04-11T07:14:14.123
> 
> 标签：macos, usb, core-audio, iokit, kernel-extension

我正在开发一个应用程序，它进行自定义音频处理并将处理后的音频发送到 USB 耳机。我的要求是 USB 耳机不应该在系统偏好设置的音频输出设备列表中对用户可见。使用来自 Apple 的“SampleUSBAudioOverrideDriver”无代码 kext 示例代码，我可以更改接口名称，但我真的需要隐藏它。子类化 AppleUSBAudioDevice 是一种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T18:28:56.287

在内核空间中对 USB 音频设备的输入和输出流进行预处理的推荐方法是使用[AppleUSBAudioPlugin](https://developer.apple.com/library/mac/samplecode/SampleUSBAudioPlugin/) API。此 kext 不会出现在设备列表中，因为它不是 IOAudioEngine 的实例，因此不涉及“隐藏”。

# ruby-on-rails - 提取元数据而不上传

> ID：15942767
> 
> 赞同：0
> 
> 时间：2013-04-11T07:14:16.293
> 
> 标签：ruby-on-rails, ruby, video, metadata

我有一个与视频播放列表一起使用的 Ruby on Rails 应用程序。现在我想从视频文件中提取时间码信息而不将其上传到服务器（需要很长时间）。有可能吗？如果不可能，有没有办法在本地导出 te 元数据并将这些 xml（例如）上传到服务器？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T13:20:48.623

afaik, this is not possible in browsers that do not support `File API`. Take a look at [jquery file upload](http://blueimp.github.io/jQuery-File-Upload/) and the way it allows user to identify the file extension before upload.

# c# - Nancys Html.RenderContext.Context.CurrentUser 抛出异常

> ID：15942768
> 
> 赞同：2
> 
> 时间：2013-04-11T07:14:17.037
> 
> 标签：c#, forms-authentication, nancy

我第一次尝试南希（到目前为止真的很喜欢）并且遇到了一些问题。当我调用 Html.RenderContext.Context.CurrentUser 时，我收到以下错误：

```
Errors:
[CS0012] Line: 5 Column: 6 - The type 'Nancy.ViewEngines.IRenderContext' is defined in an      assembly that is not referenced. You must add a reference to assembly 'Nancy, Version=0.16.2.0,  Culture=neutral, PublicKeyToken=null'. (show)
[CS1061] Line: 5 Column: 29 - 'Nancy.ViewEngines.IRenderContext' does not contain a definition  for 'Context' and no extension method 'Context' accepting a first argument of type   'Nancy.ViewEngines.IRenderContext' could be found (are you missing a using directive or an assembly   reference?) (show)
[CS1061] Line: 9 Column: 63 - 'Nancy.ViewEngines.IRenderContext' does not contain a definition  for 'Context' and no extension method 'Context' accepting a first argument of type   'Nancy.ViewEngines.IRenderContext' could be found (are you missing a using directive or an assembly reference?) (show) 
```

该视图是部分视图，如下所示：

```
<li class="divider-vertical"></li>

@if (Html.RenderContext.Context.CurrentUser != null)
{
    <div class="btn-group pull-right">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
            <i class="icon-user"></i> @Html.RenderContext.Context.CurrentUser.UserName
            <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
            <li><a href="/Dashboard">Content Dashboard</a></li>
            <li><a href="/Login/SignOut">Log off</a></li>
        </ul>
    </div>
}
else
{
    <li><a href="/Login">Login</a></li>
} 
```

在引导程序中启用 FormsAuthentication

```
 FormsAuthentication.Enable(pipelines, new FormsAuthenticationConfiguration 
        {
            RedirectUrl = "~/login",
            UserMapper = container.Resolve<IUserMapper>()
        });
    } 
```

Usermapper 和 Identity 实现看起来像这样

```
public class GoonUserMapper : IUserMapper
{
    public IUserIdentity GetUserFromIdentifier(Guid identifier, NancyContext context)
    {
        return new GoonIdentity { UserName = "Testing" };
    }
}

public class GoonIdentity : IUserIdentity
{
    public GoonIdentity()
    {
        this.Claims = new List<string>();
    }

    public string UserName { get; set; }

    public IEnumerable<string> Claims { get; set; }
} 
```

我正在使用以下软件包：

Nancy.Authentication.Forms Nancy.Hosting.Aspnet Nancy.Validation.FluentValidation Nancy.Viewengines.Razor

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T06:23:06.520

确保你的配置看起来有点像这样

```
<configuration>
  <configSections>
    <section name="razor" type="Nancy.ViewEngines.Razor.RazorConfigurationSection, Nancy.ViewEngines.Razor" />
  </configSections>
  <appSettings>
    <add key="webPages:Enabled" value="false" />
  </appSettings>
  <system.web>
    <compilation>
      <buildProviders>
        <add extension=".cshtml" type="Nancy.ViewEngines.Razor.BuildProviders.NancyCSharpRazorBuildProvider, Nancy.ViewEngines.Razor.BuildProviders" />
        <add extension=".vbhtml" type="Nancy.ViewEngines.Razor.BuildProviders.NancyVisualBasicRazorBuildProvider, Nancy.ViewEngines.Razor.BuildProviders" />
      </buildProviders>
    </compilation>
  </system.web>
  <razor disableAutoIncludeModelNamespace="false">
    <assemblies>
      <add assembly="Nancy" />
    </assemblies>
    <namespaces>
      <add namespace="Nancy" />
      <add namespace="Nancy.ViewEngines.Razor" />
    </namespaces>
  </razor>
</configuration> 
```

它会起作用

# sql-server-2008 - 无法创建而不是触发器

> ID：15942769
> 
> 赞同：1
> 
> 时间：2013-04-11T07:14:25.293
> 
> 标签：sql-server-2008, tsql

我有两个 SQL Server 2008 表：Schedule（父）和 ScheduleResults（子）

```
CREATE TABLE Schedules(
    ID int identity primary key NOT NULL,
    Status nvarchar(3)
) [ON PRIMARY] 
```

和

```
CREATE TABLE ScheduleResults(
    ID int identity primary key NOT NULL,
    ScheduleID int NOT NULL CONSTRAINT [FK_ScheduleResults_Schedules] REFERENCES Schedules(ID) ON DELETE CASCADE,
    IsEndOfRun bit NOT NULL CONSTRAINT DF_ScheduleResults_IsEndOfRun DEFAULT(0)
) [ON PRIMARY] 
```

逻辑是在子项​​的插入/更新/删除之后，我会为父项查看所有子项。如果其中任何一个的 IsEndOfRun=1，则父计划记录状态转为“DEA”，否则转为“ACT”。如果没有找到，它仍然会转到“ACT”。

所以这是我的触发器：

```
CREATE TRIGGER ScheduleResultsStatus
ON [ScheduleResults] AFTER INSERT, UPDATE, DELETE
AS
    SET NOCOUNT ON;
    DECLARE @ScheduleID int
    DECLARE @IsEORSum int
    SELECT @ScheduleID=ScheduleID FROM inserted
    SELECT @IsEORSum=COUNT(*) FROM ScheduleResults WHERE ScheduleID=@ScheduleID AND IsEndOfRun=1

    IF @IsEORSum=0
    BEGIN
            -- There are no EndOfRun results. Schedule should be active
            UPDATE Schedules SET Status='ACT' WHERE ID=@ScheduleID
    END
    ELSE
    BEGIN
            -- There is at least 1 record with IsEndOfRun=True. Schedule should be DEACTIVATED
            UPDATE Schedules SET Status='DEA' WHERE ID=@ScheduleID
    END 
```

插入后完美运行。更新后完美运行。删除后不起作用。触发器名称上会出现一条警告，并带有以下消息：

> 无法创建 INSTEAD OF DELETE TRIGGER。这是因为表有一个带有级联删除的外键。

我原来的定义确实在 ScheduleID 列上有一个 ON DELETE CASCADE 子句。我删除了它，但没有成功。此外，如您所见，我正在创建一个 AFTER 触发器，而不是 INSTEAD 触发器。所以现在我的问题......我如何调整触发器和/或 FK 约束以让我处理参照完整性并处理删除子场景？

感谢所有 SQL Server 向导的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:52:40.997

感谢之前的评论。它引发了一些想法，我不仅能够让它工作，而且使用集合的代码要简单得多。这是后代的代码：

```
CREATE TRIGGER ScheduleResultsStatus
ON [ScheduleResults] AFTER INSERT, UPDATE, DELETE
AS
    SET NOCOUNT ON;
    UPDATE Schedules SET Status='ACT' WHERE ID IN (SELECT DISTINCT Schedules.ID FROM Schedules INNER JOIN deleted ON Schedules.ID=deleted.ScheduleID)
    UPDATE Schedules SET Status='DEA' WHERE ID IN (SELECT DISTINCT Schedules.ID FROM Schedules INNER JOIN inserted ON Schedules.ID=inserted.ScheduleID WHERE IsEndOfRun=1)
    UPDATE Schedules SET Status='ACT' WHERE ID IN (SELECT DISTINCT Schedules.ID FROM Schedules INNER JOIN inserted ON Schedules.ID=inserted.ScheduleID Group BY Schedules.ID HAVING SUM(CONVERT(int, IsEndOfRun))=0)
GO 
```

# jqgrid - jqGrid隐藏的加/减/打开图标列使子网格不像主行那样宽

> ID：15942773
> 
> 赞同：0
> 
> 时间：2013-04-11T07:14:31.200
> 
> 标签：jqgrid, width, hidden, subgrid

在这篇关于隐藏加/减/打开图标列[的帖子之后，我已经应用了这些建议，所以在 CSS 文件中：](https://stackoverflow.com/questions/12439147/in-a-working-jqgrid-with-subgrid-how-i-can-hide-the-column-where-appears-the-plu)

```
.subgrid-cell { display: none; } 
```

一切正常：

![在此处输入图像描述](https://i.stack.imgur.com/GYd6d.png)

但子网格不填充主网格右列的宽度。 ![在此处输入图像描述](https://i.stack.imgur.com/LQsqA.png)

请问，我的代码有错误吗？

```
jQuery(document).ready(function ($) {
var OldSelectedRow=null;
var height=$('body').height()-210;
var numRows=Math.floor(height/23)-(Math.floor(height/23)%5);
var heightRows=numRows*23;
var myGrid = $("#tab22");
myGrid.jqGrid({
    caption:"Recherche d'un ARTICLE dans les PARCS CLIENTS",
    hidegrid:false,
    url:'sub22.php',
    datatype: "json",
    height:heightRows,
    shrinkToFit: true,
    rowNum:numRows,
    rownumbers:true,
    rownumWidth: 40, 
    gridview: true,
    colNames:['Id','Code', 'Désignation', 'Famille','S/famille','Marque','Matière','Réf.constructeur','PV base'],
    colModel:[ 
        {name:'a.id',index:'a.id', width:60, align:"right",hidden:true}, 
        {name:'a.code',index:'a.code', width:150}, 
        {name:'a.descr',index:'a.descr', width:200}, 
        {name:'f.code',index:'f.code', width:80}, 
        {name:'s.code',index:'s.code', width:80}, 
        {name:'k.code',index:'k.code', width:80}, 
        {name:'m.code',index:'m.code', width:80},
        {name:'a.refc',index:'a.refc', width:150},
        {name:'t.pnc',index:'t.pnc', width:80, align:"right"}
    ], 
    pager: '#tab22p', 
    sortname: 'a.code', 
    sortorder: "asc", 
    viewrecords: true,
    emptyrecords: 'Aucune donnée correspondante...',        
    altRows:true,
    altclass:'myAltRowClass',
    onSortCol: function (index, idxcol, sortorder) {
        //  montre la colonne sélectionnée pour le tri de la grille
        if (this.p.lastsort >= 0 && this.p.lastsort !== idxcol
                        && this.p.colModel[this.p.lastsort].sortable !== false) {
                $(this.grid.headers[this.p.lastsort].el).find(">div.ui-jqgrid-sortable>span.s-ico").show();
                $(this.grid.headers[this.p.lastsort].el).removeClass('ui-state-active');
        }
        $(this.grid.headers[idxcol].el).addClass('ui-state-active');
    },
    gridComplete:function(){
        OldSelectedRow=null;
        colModel = myGrid.jqGrid('getGridParam', 'colModel');
        sortName = myGrid.jqGrid('getGridParam', 'sortname');
        $('#gbox_' + $.jgrid.jqID(myGrid[0].id) +
                ' tr.ui-jqgrid-labels th.ui-th-column').each(function (i) {
                var cmi = colModel[i], colName = cmi.name;
                if (cmi.sortable !== false) {
                        $(this).find('>div.ui-jqgrid-sortable>span.s-ico').show();
                } else if (!cmi.sortable && colName !== 'rn' && colName !== 'cb' && colName !== 'subgrid') {
                        $(this).find('>div.ui-jqgrid-sortable').css({cursor: 'default'});
                }
                if (cmi.name === sortName) {
                        $(this).addClass('ui-state-active');
                        //alert(i);
                        var gridId = myGrid.jqGrid('getDataIDs');
                        for (var countRow = 0; countRow < gridId .length; countRow ++)
                        {
                            var rowId = gridId [countRow ];
                            var dataFromTheRow = myGrid.jqGrid ('getRowData', rowId);
                            myGrid.jqGrid('setCell',rowId, i, '','ui-widget-header');
                            myGrid.jqGrid('setCell',rowId, i, '',{'border-top':0,'border-left':0});
                        }
                }
        });
    },
    onSelectRow:function(id,status){
        if(OldSelectedRow!=id){
            if(OldSelectedRow!=null){
                myGrid.jqGrid ('collapseSubGridRow', OldSelectedRow);
                $('#tab22_'+OldSelectedRow+'_t').remove();
                $('#'+OldSelectedRow).removeClass('ui-state-highlight');
            }
            $('#'+id).addClass('ui-state-highlight');
            OldSelectedRow=id;
            myGrid.jqGrid('expandSubGridRow',id);
        }else{
                myGrid.jqGrid ('collapseSubGridRow', id);
                $('#tab22'+id+'_t').remove();
                $('#'+id).removeClass('ui-state-highlight');
                OldSelectedRow=null;
        }
    },
    subGrid: true,
    subGridRowExpanded: function(subgrid_id, row_id) { 
        rowdata = $("#tab22").jqGrid('getRowData',row_id);
        var art=rowdata['a.id'],lastId;
        var subgrid_table_id, pager_id; 
        subgrid_table_id = subgrid_id+"_t"; 
        pager_id = "p_"+subgrid_table_id; 
        $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 
        $("#"+subgrid_table_id).jqGrid({ 
            url:"sg22.php?id="+row_id+"&art="+art, 
            datatype: "json", 
            colNames: ['Id','Groupe','Client', 'Nom','Ville','Matériel','Marque','Machine','Série','Type','Modèle','Désignation','N° série'],
            colModel: [ 
                {name:'p.id',index:'p.id', width:60, align:"right",hidden:true}, 
                {name:'g.code',index:'g.code', width:80}, 
                {name:'c.code',index:'c.code', width:60},
                {name:'c.descr',index:'c.descr', width:200}, 
                {name:'c.ville',index:'c.ville', width:200}, 
                {name:'q.code',index:'q.code',width:80},
                {name:'k.code',index:'k.code', width:80}, 
                {name:'2h.code',index:'2h.code', width:60}, 
                {name:'2s.code',index:'2s.code', width:60}, 
                {name:'2t.code',index:'2t.code', width:60}, 
                {name:'2m.code',index:'2m.code', width:60}, 
                {name:'2m.descr',index:'2m.descr', width:200}, 
                {name:'p.numserie',index:'p.numserie', width:80}
            ], 
            pager: pager_id, 
            rownumbers: true,
            rowNum:15,
            rowNumWidth:40,             
            viewrecords: true,
            emptyrecords: 'Aucune donnée correspondante...',    
            caption:"Liste des PARCS CLIENTS contenant l'ARTICLE sélectionné",
            hidegrid:false,
            rownumWidth: 40,
            autowidth:true,     
            altRows:true,
            altclass:'myAltRowClass',
            sortname: 'c.code', 
            sortorder: "asc", 
            height: 345,
            onSortCol: function (index, idxcol, sortorder) {
                //  montre la colonne sélectionnée pour le tri de la grille
                if (this.p.lastsort >= 0 && this.p.lastsort !== idxcol
                                && this.p.colModel[this.p.lastsort].sortable !== false) {
                        $(this.grid.headers[this.p.lastsort].el).find(">div.ui-jqgrid-sortable>span.s-ico").show();
                        $(this.grid.headers[this.p.lastsort].el).removeClass('ui-state-active');
                }
                $(this.grid.headers[idxcol].el).addClass('ui-state-active');
            },
            onSelectRow:function(id,status){
                if(lastId!=id){
                    if(lastId!=null){
                        $("#"+subgrid_table_id).jqGrid ('collapseSubGridRow', lastId);
                        $('#'+subgrid_table_id+'t').remove();
                        $('#'+id).removeClass('ui-state-highlight');
                    }
                    $('#'+id).addClass('ui-state-highlight');
                }
                lastId=id;
                $("#"+subgrid_table_id).jqGrid('expandSubGridRow',id);
            },
            gridComplete:function(){
                //  montre la colonne triée au chargement des données
                colModel = $("#"+subgrid_table_id).jqGrid('getGridParam', 'colModel');
                sortName = $("#"+subgrid_table_id).jqGrid('getGridParam', 'sortname');
                $('#gbox_' + $.jgrid.jqID($("#"+subgrid_table_id)[0].id) +
                        ' tr.ui-jqgrid-labels th.ui-th-column').each(function (i) {
                        var cmi = colModel[i], colName = cmi.name;
                        if (cmi.sortable !== false) {
                                $(this).find('>div.ui-jqgrid-sortable>span.s-ico').show();
                        } else if (!cmi.sortable && colName !== 'rn' && colName !== 'cb' && colName !== 'subgrid') {
                                $(this).find('>div.ui-jqgrid-sortable').css({cursor: 'default'});
                        }
                        if (cmi.name === sortName) {
                                $(this).addClass('ui-state-active');
                                var gridId = $("#"+subgrid_table_id).jqGrid('getDataIDs');
                                for (var countRow = 0; countRow < gridId .length; countRow ++)
                                {
                                    var rowId = gridId [countRow ];
                                    var dataFromTheRow = $("#"+subgrid_table_id).jqGrid ('getRowData', rowId);
                                    $("#"+subgrid_table_id).jqGrid('setCell',rowId, i, '','ui-widget-header');
                                    $("#"+subgrid_table_id).jqGrid('setCell',rowId, i, '',{'border-top':0,'border-left':0});
                                }
                        }
                });
            },
            subGrid: true,
            subGridRowExpanded: function(subgrid2_id, row2_id) { 
                rowdata = $(this).jqGrid('getRowData',row2_id);
                var parc=rowdata['p.id'],lastId=null;
                var subgrid2_table_id, pager2_id; 
                subgrid2_table_id = subgrid2_id+"_tt"; 
                pager2_id = "p_"+subgrid2_table_id; 
                $("#"+subgrid2_id).html("<table id='"+subgrid2_table_id+"' class='scroll'></table><div id='"+pager2_id+"' class='scroll'></div>"); 
                $("#"+subgrid2_table_id).jqGrid({ 
                    url:"sg22b.php?id="+row2_id+"&parc="+parc, 
                    datatype: "json",
                    caption:"Détail du PARC",
                    hidegrid:false,
                    colNames:['Id','Ensemble','Article', 'Désignation', 'Famille','S/Famille','Matière','PV base','% Remise','PV net'],
                    colModel:[ 
                        {name:'a.id',index:'a.id', width:60, align:"right",hidden:true}, 
                        {name:'c.code',index:'c.code', width:100,sortable:false}, 
                        {name:'a.code',index:'a.code', width:100,sortable:false}, 
                        {name:'a.descr',index:'a.descr', width:400,sortable:false}, 
                        {name:'f.code',index:'f.code', width:80,sortable:false},
                        {name:'s.code',index:'s.code', width:80,sortable:false},
                        {name:'m.code',index:'m.code', width:80,sortable:false},
                        {name:'t.pnc',index:'t.pnc', width:80,align:'right',sortable:false},
                        {name:'rem',index:'rem', width:80,align:'center',sortable:false},
                        {name:'pv',index:'pv', width:80,align:'right',sortable:false}
                    ], 
                    pager: pager2_id, 
                    rownumbers: true, 
                    viewrecords: true,
                    emptyrecords: 'Aucune donnée correspondante...',        
                    rownumWidth: 40, 
                    altRows:true,
                    altclass:'myAltRowClass',
                    sortname: 'c.code', 
                    sortorder: "asc", 
                    scroll:true,
                    maxheight: 230,
                    onSortCol: function (index, idxcol, sortorder) {
                        //  montre la colonne sélectionnée pour le tri de la grille
                        if (this.p.lastsort >= 0 && this.p.lastsort !== idxcol
                                        && this.p.colModel[this.p.lastsort].sortable !== false) {
                                $(this.grid.headers[this.p.lastsort].el).find(">div.ui-jqgrid-sortable>span.s-ico").show();
                                $(this.grid.headers[this.p.lastsort].el).removeClass('ui-state-active');
                        }
                        $(this.grid.headers[idxcol].el).addClass('ui-state-active');
                    },
                    gridComplete:function(){
                        //  montre la colonne triée au chargement des données
                        colModel = $("#"+subgrid2_table_id).jqGrid('getGridParam', 'colModel');
                        sortName = $("#"+subgrid2_table_id).jqGrid('getGridParam', 'sortname');
                        $('#gbox_' + $.jgrid.jqID($("#"+subgrid2_table_id)[0].id) +
                                ' tr.ui-jqgrid-labels th.ui-th-column').each(function (i) {
                                var cmi = colModel[i], colName = cmi.name;
                                if (cmi.sortable !== false) {
                                        $(this).find('>div.ui-jqgrid-sortable>span.s-ico').show();
                                } else if (!cmi.sortable && colName !== 'rn' && colName !== 'cb' && colName !== 'subgrid') {
                                        $(this).find('>div.ui-jqgrid-sortable').css({cursor: 'default'});
                                }
                                if (cmi.name === sortName) {
                                        $(this).addClass('ui-state-active');
                                        var gridId = $("#"+subgrid2_table_id).jqGrid('getDataIDs');
                                        for (var countRow = 0; countRow < gridId .length; countRow ++)
                                        {
                                            var rowId = gridId [countRow ];
                                            var dataFromTheRow = $("#"+subgrid2_table_id).jqGrid ('getRowData', rowId);
                                            $("#"+subgrid2_table_id).jqGrid('setCell',rowId, i, '','ui-widget-header');
                                            $("#"+subgrid2_table_id).jqGrid('setCell',rowId, i, '',{'border-top':0,'border-left':0});
                                        }
                                }
                        });
                    }
                })
                $("#"+subgrid2_table_id).jqGrid('navGrid',"#"+pager2_id,{edit:false,add:false,del:false,search:false});
                $("#"+subgrid2_table_id).jqGrid('filterToolbar',{stringResult: true,searchOnEnter : false});
            }
        }); 
        $("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{edit:false,add:false,del:false,search:false});
        $("#"+subgrid_table_id).jqGrid('filterToolbar',{stringResult: true,searchOnEnter : false});
        $("#"+subgrid_table_id).jqGrid('hideCol', 'subgrid');
    },
    subGridRowColapsed: function(subgrid_id, row_id) { 
        // this function is called before removing the data 
        var subgrid_table_id; 
        subgrid_table_id = subgrid_id+"_t"; 
        $("#"+subgrid_table_id).remove();
        myGrid.jqGrid('resetSelection');            
    }
});
myGrid.jqGrid('navGrid','#tab22p',{search:false,del:false,edit:false,add:false});   
myGrid.jqGrid('filterToolbar',{stringResult: true,searchOnEnter : false});
myGrid.closest("div.ui-jqgrid-view")
        .children("div.ui-jqgrid-titlebar")
        .css({
            textAlign: "center"
        })
        .children("span.ui-jqgrid-title")
        .css({
            float: "none",
            color:'red',
            fontSize:'16px'
        });
myGrid.jqGrid('hideCol', 'subgrid');
$(window).bind('resize', function() {
        myGrid.jqGrid('setGridWidth',$('body').width()-22);
        var height=$('body').height()-210;
        numRows=Math.floor(height/23)-(Math.floor(height/23)%5);
        heightRows=numRows*23;
        myGrid.jqGrid('setGridParam', {height:heightRows,rowNum:numRows});
        myGrid.jqGrid('setGridHeight',heightRows);
        myGrid.trigger("reloadGrid");
}).trigger('resize');}); 
```

或者有什么方法可以解决或扭转这个麻烦？

非常感谢谁能给我一些帮助。祝你今天过得愉快

继和

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:19:24.460

如果我理解正确您的问题，您可以通过添加来解决问题

```
autowidth: true 
```

**两个**子网格的选项（请参阅`subGridRowExpanded`您使用的两个回调）。

我建议您另外使用 JSLint 或 JSHint 等工具验证您的代码。您会看到您的代码使用了许多未定义的变量 ( `colModel`, `sortName`, `rowdata`)。此外，强烈建议`idPrefix`在 jqGrid 中使用带有子网格的选项，以防止可能的 id 重复。

**更新**：在您发布[提琴手演示](http://jsfiddle.net/jihel/Cs9CP/10/)后，我明白了这个问题。要修复它，我建议在拥有类上设置`colspan`属性。例如，可以在回调中包含该行`<td>``subgrid-data``subGridRowExpanded`

```
$("#" + subgrid_id).closest("td").attr("colspan", 3); 
```

在您的演示中解决问题。请参阅 [http://jsfiddle.net/Cs9CP/11/](http://jsfiddle.net/Cs9CP/11/)（或[全屏演示](http://jsfiddle.net/Cs9CP/11/embedded/result/)）。此外，我建议`height: "auto"`用于所有子网格。结果你会看到类似

![在此处输入图像描述](https://i.stack.imgur.com/ZxvWR.png)

如果需要，您还可以使用该行隐藏子网格中的第一个空列

```
$("#  + subgrid_id).closest(".ui-subgrid").find("td[colspan=1]").first().hide(); 
```

请参阅[http://jsfiddle.net/Cs9CP/12/](http://jsfiddle.net/Cs9CP/12/)（或[全屏演示](http://jsfiddle.net/Cs9CP/12/embedded/result/)）：

![在此处输入图像描述](https://i.stack.imgur.com/5IWLz.png)

# twitter-bootstrap - Twitter 引导分页

> ID：15942784
> 
> 赞同：0
> 
> 时间：2013-04-11T07:15:19.517
> 
> 标签：twitter-bootstrap, laravel

我有一个 twitter 引导分页，在我的 html 中看起来像这样

```
<div class="pagination">
    <ul>
       <li class="disabled">
                 <a href="#">«</a>
               </li>
               <li class="active">
               <a href="#">1</a>
               </li>
               <li><a href="http://thevoltagecommunity.loc/music?page=2">2</a>
               </li>
               <li>
               <a href="http://thevoltagecommunity.loc/music?page=2">»</a>
               </li>           
            </ul>
       </div> 
```

现在我想给我的最后一个列表项一个我需要的类，因为我正在使用一个滚动插件，该插件需要引用下一页的元素，但是因为该元素没有分配一个类，所以我不能使用它任何人一个主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:17:26.510

你可以用JS的方式来做：

```
$(function() {
    $('.pagination li:last-child').addClass('someClass');
}); 
```

小提琴 [http://jsfiddle.net/wZNN5/](http://jsfiddle.net/wZNN5/)

# ios - 隐藏导航栏的问题

> ID：15942789
> 
> 赞同：1
> 
> 时间：2013-04-11T07:15:33.237
> 
> 标签：ios, navigationbar

我在 rootController 中添加导航栏，如下面的 appdelegate

```
@property (strong, nonatomic) UINavigationController *navController;
@synthesize navController;

birthDateTableViewController =[[BirthDateTableViewController alloc]initWithNibName:@"BirthDateTableViewController" bundle:nil];

navController = [[[UINavigationController alloc]initWithRootViewController:birthDateTableViewController]autorelease];

[window addSubview:navController.view];
[window makeKeyAndVisible];
 return YES; 
```

现在因为我想将它隐藏在其他视图中，因为它们有自己的导航栏所以我使用以下代码隐藏 rootViewControllers 导航栏但它没有隐藏请告诉我我做错了什么我这样做是为了隐藏在 viewDidLoad

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate.navController setNavigationBarHidden: YES animated:NO]; 
```

应用程序到达线以上时崩溃我已经尝试过这个不起作用 [self.navigationController setNavigationBarHidden: YES animated:NO];

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:18:49.170

您的 appDelegate 没有指向 navController 的链接，但您的 viewController 有一个！因此，将您的代码更改为：

```
[self.navigationController setNavigationBarHidden: YES animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:20:27.163

我认为这会很好..

```
[self.navigationController setNavigationBarHidden: YES animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:23:43.803

在您不想显示导航栏的视图控制器的 -(void)viewWillAppear 方法中尝试此操作。

```
- (void)viewWillAppear:(BOOL)animated
{
     self.navigationController.navigationBarHidden = YES;

    [super viewWillAppear:animated];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:30:02.243

而是使用...

```
 [window addSubview:navController.view]; 
```

用这个...

```
 [window addSubview:self.navController]; 
```

在你的 viewControllers 中，使用这个......

```
 self.navigationController.navigationBarHidden = YES; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T07:32:39.257

对于 iOS < 6.0 使用

```
[self.window addSubview:navigationController.view]; 
```

对于 iOS >= 6.0 使用

```
[self.window setRootViewController:navigationController]; 
```

# jquery - JqueryUI 对话框

> ID：15942793
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:16:05.990
> 
> 标签：jquery, dialog

当我尝试使用 JqueryUI Dialog 时遇到问题，它没有显示任何内容，但也没有给出错误。

代码是：

```
var div = "<div id='dialog'><p>Sometext</p></div>";
$(function() {
    $('#dialog').dialog();
}); 
```

我实施了

```
// @require     jquery-1.9.1.min.js
// @require     http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css
// @require     http://code.jquery.com/ui/1.10.2/jquery-ui.js 
```

在脚本的顶部，所以我不知道问题是什么。

希望可以有人帮帮我。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:22:39.110

您需要将 DIV 添加到 DOM：

```
var div = "<div id='dialog'><p>Sometext</p></div>";
$(function() {
    $("body").append(div);
    $('#dialog').dialog();
}); 
```

# android - 如何从 phonegap 激活“位智”？

> ID：15942797
> 
> 赞同：0
> 
> 时间：2013-04-11T07:16:15.020
> 
> 标签：android, cordova

如何从混合应用程序（例如 Phonegap）激活 Waze 应用程序？是通过以下命令行吗？

```
<a href="waze://?q=Hawaii">waze application</a> 
```

或通过：

```
document.location.href = "waze://?q=Hawaii" 
```

提前致谢：

科比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:43:40.843

我以前没有使用过它们，但我认为您应该查看 webintents。插件的 git 也非常活跃，通常是一个好兆头。

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/WebIntent/](https://github.com/phonegap/phonegap-plugins/tree/master/Android/WebIntent/)

# r - 如何将行转换为R中的因子？

> ID：15942799
> 
> 赞同：1
> 
> 时间：2013-04-11T07:16:17.440
> 
> 标签：r, matrix, r-factor

例如，我有一个矩阵：

```
> a = cbind(sample(c(0,1),6,replace=T), sample(c(0,1),6,replace=T))
> a
     [,1] [,2]
[1,]    0    0
[2,]    0    0
[3,]    0    1
[4,]    1    0
[5,]    1    0
[6,]    1    1 
```

我想制作一个对象`b`，`a`所以这`b`是一个因素，每个级别代表`a`. 在这种情况下，`b`将是：

```
> b
[1] 1 1 2 3 3 4
Levels: 1 2 3 4 
```

我可以用肮脏的方式做到这一点，但我想知道是否有一个优雅的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T07:26:32.570

不知道您当前的“肮脏”方式是什么，这是一个可能的解决方案：

```
> aFac <- interaction(data.frame(a), lex.order=TRUE)
> factor(aFac, levels = levels(aFac), labels = seq_along(levels(aFac)))
[1] 1 1 2 3 3 4
Levels: 1 2 3 4 
```

在哪里：

```
a <- structure(c(0L, 0L, 0L, 1L, 1L, 1L, 0L, 0L, 1L, 0L, 0L, 1L), 
               .Dim = c(6L, 2L), .Dimnames = list(NULL, NULL)) 
```

我使用的唯一原因`lex.order = TRUE`是匹配您的特定输出。

* * *

另一种可能是：

```
> aFac <- interaction(data.frame(a), lex.order=TRUE, drop = TRUE)
> factor(as.numeric(aFac))
[1] 1 1 2 3 3 4
Levels: 1 2 3 4 
```

这`drop = TRUE`是从 中删除任何未使用的级别`interaction`，正如我们将在下面的评论中的示例中得到的那样。

为了证明 的影响`drop = TRUE`，请考虑以下因素，并注意产生的因子水平：

```
> b <- structure(c(1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1), .Dim = c(6L,2L))
> bFac1 <- interaction(data.frame(b), lex.order=TRUE)
> bFac2 <- interaction(data.frame(b), lex.order=TRUE, drop=TRUE)
> factor(as.numeric(bFac1))
[1] 3 4 3 2 2 4
Levels: 2 3 4
> factor(as.numeric(bFac2))
[1] 2 3 2 1 1 3
Levels: 1 2 3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T07:27:30.830

一个可能的解决方案：

```
 b <- apply(a, 1, paste, collapse="_")
 b <- factor(b, levels=unique(b), labels=1:length(unique(b))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:28:33.573

根据数据的简单性，以下可能是一种方法。

```
a
##      V1 V2
## [1,]  0  0
## [2,]  0  0
## [3,]  0  1
## [4,]  1  0
## [5,]  1  0
## [6,]  1  1

hash <- apply(a, 1, paste, collapse = "/")
b <- factor(hash, labels = 1:length(unique(hash)))
b
## [1] 1 1 2 3 3 4
## Levels: 1 2 3 4 
```

# java - 软件包的默认目录

> ID：15942802
> 
> 赞同：4
> 
> 时间：2013-04-11T07:16:20.257
> 
> 标签：java

我是java中的新手我想知道java中包的默认目录是什么？我的意思是，如果我编译一个包含 package 语句的 java 文件，并且我在不使用命令中的`-d`选项的情况下编译它`javac`，那么将在哪里创建包？例如。

```
package test;
class Test{} 
```

`javac Test.java`
并使用然后在哪里创建包来编译它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T07:18:29.370

如果不指定`-d`，则类文件将创建在与源文件相同的目录中。

*如果*您已经将源代码存储在与您的包结构匹配的目录结构中（并且如果您对源文件和类文件位于同一个地方感到高兴）但如果您的源代码结构与您的包结构*不*匹配，那很好，您基本上会在无法合理使用它们的位置获得类文件。

就个人而言，除了快速一次性（通常是 Stack Overflow :) 代码之外，我会提出以下建议：

*   避免使用默认包
*   `src`将源代码保存在与包结构匹配的目录结构中（例如，根目录为）
*   将类文件生成到单独的目录结构中（例如，根为`bin`or`out`或`classes`）

（对不起，误读了开始的问题。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:10:40.833

`-d`命令中的选项`javac`用于指定生成类文件的位置，如果不指定，则该`.class`文件将在文件所在的同一目录中创建`.java`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:20:40.117

不指定包时不会创建目录！所有`.class`文件将直接在输出文件夹中创建

```
public class A{} 
```

如果将其编译到输出文件夹，

`output/a.class` 被建造

# javascript - li高度动态计算

> ID：15942806
> 
> 赞同：0
> 
> 时间：2013-04-11T07:16:32.567
> 
> 标签：javascript, jquery

我有以下[代码](http://jsfiddle.net/3shEE/182/)

问题是，目前我正在将悬停时的高度硬编码为 300，我该怎么做才能根据数量获得高度

*   标记它，所以说有6个*   每个 li 的高度为 50px，因此高度为 300。

    我具体说的是这条线：

    ```
     $(this).stop().animate({"height":"300px"},1000).addClass("dropped"); 
    ```

    另外，我如何使它在它已经展开时，我再次单击它，它会以未展开的动画形式返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:27:52.377

Firstly, you need to close the your `ul` using `</ul>` not `</nav>`

Secondly, to make it dynamic instead of harcode height, you need to calculate the total height of your list. Here is how you do it:

```
var sum = 50;

$('#expandable').find('li').each(function() {
   sum += $(this).height();
});

$("#expandable").click(function() {
    $(this).stop().animate({"height": sum},1000).addClass("dropped");
}); 
```

`**[Working Demo](http://jsfiddle.net/3shEE/186/)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:22:56.717

您可以使用 jQuery 获得 ul 的高度：

`$('#expandable').find('ul').height();`
...然后只需添加跨度的高度，即可获得动画的计算高度:)

至于您的其他问题：只需检查您的`dropped`课程并将其动画化（如果存在）：

```
$("#expandable").click(function() {
   var ulHeight = $('#expandable').find('ul').height();
   var spanHeight = $('span').height();
   var computedHeight = (ulHeight + spanHeight);

    if( $(this).hasClass('dropped') ) {
        $(this).stop().animate({"height": (spanHeight + "px") },1000).removeClass("dropped");
        return false;
    }

   $(this).stop().animate({"height": (computedHeight + "px") },1000).addClass("dropped");
}); 
```

看我的小提琴： [**小提琴**](http://jsfiddle.net/3shEE/188/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:23:08.370

试试这个代码

```
$("#expandable").hover(function() {
     var _aH = (parseInt($(this).find('ul li').length)+1)*50
    $(this).stop().animate({"height":_aH+"px"},1000).addClass("dropped");
}, function() {
    $(this).stop().animate({"height":"50px"},1000).removeClass("dropped");
}); 
```

见[小提琴](http://jsfiddle.net/3shEE/184/)

基本上，您需要计算`li`s 中的数量`ul`，然后找出`total height`.
代码假定 50px 是 . 的高度`li`，您可以通过抓取`li`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T07:26:06.033

获取 ul 的高度，然后设置 #expandable 动画高度。

```
$("#expandable").click(function() {
    var ulHeight = $(this).children("ul").height() + 50;
    $(this).stop().animate({"height":ulHeight + "px"},1000).addClass("dropped");

}); 
```

**[演示](http://jsfiddle.net/maheshsapkal/G4s4G/)**

# java - 如何在 JUnit 中为此类编写单元测试

> ID：15942808
> 
> 赞同：1
> 
> 时间：2013-04-11T07:16:39.113
> 
> 标签：java, unit-testing, random, junit, mocking

//如何在JUnit中为这个类编写单元测试......

```
package com.emr.common.helper;

import java.util.Random;

public class RandomTextGenerator {

    public static String getAutogenerateText()
    {
        /*Auto genarate password    */

        String password = "";
        /* Create Auto Password */
        int count = 36;
        // int range = Integer.MAX_VALUE;
        int sum = 0;

        Random rand = new Random();
        for (int j = 0; j < 45; j++) {
            for (int i = 0; i < count; i++) {
                sum = rand.nextInt(count);

            }
            char[] pass = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J',
                    'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V',
                    'W', 'X', 'Y', 'Z', '0', '1', '2', '3', '4', '5', '6', '7',
                    '8', '9' };
            password = password + pass[sum];
        }

        return password;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:46:32.563

如果您说，您将无法有效地测试此类`new Random()`- 通过这样做，您已经硬编码了对您无法控制的有效外部依赖项（随机数源）的引用。

相反，您应该通过`Random`方法参数将对象传递给类，并在您的测试中提供一个模拟实现，您可以控制返回的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:41:27.150

尝试将其与 RegEx 匹配，该 RegEx 检查返回的字符串是否匹配 45 个字母和数字混合的字符。

这个正则表达式应该工作：

```
^[A-Z0-9]{45}$ 
```

# android - 用于 LVL 付费应用的 BroadcastReceiver/IntentService

> ID：15942809
> 
> 赞同：0
> 
> 时间：2013-04-11T07:16:39.377
> 
> 标签：android, broadcastreceiver, intentservice, android-lvl

我正在尝试通过将付费版本作为简单的许可服务器来管理免费/付费应用程序。

付费应用有一个接收器：

```
public class LicenseRequest extends BroadcastReceiver
{
    private static final String TAG = LicenseRequest.class.getSimpleName();

    @Override
    public void onReceive(Context context, Intent intent)
    {
        if (!intent.getAction().equals(App.LICENSE_REQUEST))
        {
            return;
        }
        Intent licenseRequest = new Intent(context, LicenseService.class);
        context.startService(licenseRequest);
    }
} 
```

调用 IntentService：

```
public class LicenseService extends IntentService
{
    private static final String TAG = LicenseService.class.getSimpleName();

    private LicenseCheckerCallback mLicenseCheckerCallback;
    private LicenseChecker mChecker;

    ...

    public LicenseService()
    {
        super(TAG);
    }

    @Override
    protected void onHandleIntent(Intent intent)
    {
        // Try to use more data here. ANDROID_ID is a single point of attack.
        String deviceId = ...;

        // Library calls this when it's done.
        mLicenseCheckerCallback = new MyLicenseCheckerCallback();
        // Construct the LicenseChecker with a policy.
        mChecker = new LicenseChecker(this, new ServerManagedPolicy(this, new AESObfuscator(SALT, getPackageName(), deviceId)),
                BASE64_PUBLIC_KEY);
        mChecker.checkAccess(mLicenseCheckerCallback);
    }

    private class MyLicenseCheckerCallback implements LicenseCheckerCallback
    {   
        public void allow(int policyReason)
        {
            Log.i(TAG, "License Accepted");
            Intent i = new Intent();
            i.setAction(App.LICENSE_RECEIVER);
            i.putExtra(App.LICENSE_RESULT, App.LICENSE_ALLOW);
            sendBroadcast(i);
//          mChecker.onDestroy();
        }

        public void dontAllow(int policyReason)
        {
            Log.e(TAG, "License Denied");
            Intent i = new Intent();
            i.setAction(App.LICENSE_RECEIVER);
            i.putExtra(App.LICENSE_RESULT, App.LICENSE_DISALLOW);
            sendBroadcast(i);
//          mChecker.onDestroy();
        }

        public void applicationError(int errorCode)
        {
            Log.i(TAG, "LR Error");
            Intent i = new Intent();
            i.setAction(App.LICENSE_RECEIVER);
            i.putExtra(App.LICENSE_RESULT, App.LICENSE_ERROR);
            sendBroadcast(i);
//          mChecker.onDestroy();
        }
    }

//    @Override
//    public void onDestroy() {
//        super.onDestroy();
//        mChecker.onDestroy();
//    }
} 
```

我尝试过两种方法来处理 onDestroy()。如果我在 LicenseService.onDestroy() 中调用它，我会得到：

```
04-11 15:35:13.604: W/MessageQueue(30689): Handler (android.os.Handler) {41388638} sending message to a Handler on a dead thread
04-11 15:35:13.604: W/MessageQueue(30689): java.lang.RuntimeException: Handler (android.os.Handler) {41388638} sending message to a Handler on a dead thread 
```

这是由于 IntentService 的生命周期在我相信的回调之前结束。

如果我在回调中调用它：

```
04-11 15:49:52.554: E/ActivityThread(32595): Service app.LicenseService has leaked ServiceConnection com.google.android.vending.licensing.LicenseChecker@41385168 that was originally bound here 
```

这个看不懂 我认为这是管理付费版本的一种相当常见的方式，人们是如何管理这里的生命周期的？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T16:44:51.817

答案是使用 ContentProvider 并在查询中提供一个简单的 MatrixCursor。BroadcastReceivers 是不可能的，因为要求它们必须首先由用户显式运行，这在不启动的应用程序中是不可能的。ContentProvider 有点奇怪但也更简单。

# amazon - Amazon EC2：获取实例并运行脚本

> ID：15942811
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:16:44.050
> 
> 标签：amazon

我查看了 Amazon EC2 以获取有时需要运行的一些基本脚本。我目前唯一的问题是我已经做了一些测试并阅读了一些文档，但我仍然不知道是否有可能做一个脚本来获取实例（比如租用它）然后 ssh，上传我的脚本并运行它。从我所看到的情况来看，可以 ssh、scp 我的脚本并运行它，但我不知道第一步。如果有人有答案或一些例子，将不胜感激。谢谢你。布卢尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:28:26.927

You'll probably want to to start by launching an instance through the wizard by selecting launch instance on your ec2 console (console.aws.amazon.com > ec2).

Then check out the ec2 [command line tools](http://aws.amazon.com/developertools/351). You'll be able to check out instance, check the status of instances, ssh into them, scp up to them, and start your script. Check back when you hit a snag.

# javascript - javascript代码getTimezoneOffset

> ID：15942813
> 
> 赞同：-2
> 
> 时间：2013-04-11T07:16:55.053
> 
> 标签：javascript

我对此有点困惑，我知道代码给了我与格林威治标准时间的时差，但是对于哪个城市或国家？我如何获得格林威治标准时间与阿富汗喀布尔时间之间的时差。

```
 var now = new Date();
            alert(now.getTimezoneOffset()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:21:54.647

不同之处在于警报中显示的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:22:36.017

它为您提供[客户端本地时区](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)的偏移量。

[要获取不同时区的偏移量，请使用此处](https://stackoverflow.com/questions/10087819/convert-date-to-another-timezone-in-javascript)所述的外部库，或者仅手动获取偏移量并使用它，如此[处](http://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/6016329)所述。

# variables - (Batch) 如何在 IF 语句中使用两个变量来引用另一个变量？

> ID：15942817
> 
> 赞同：0
> 
> 时间：2013-04-11T07:17:04.803
> 
> 标签：variables, if-statement, batch-file

这是我正在制作的游戏代码的一部分。

```
:south
set "message=You take a step South"
set /a "posY=%posY%+1"    //Moves player down one tile
if "%p%posX%%posY%%"=="#" set /a "posY=%posY%-1"    //checks if the player has hit a wall. If this is the case, bring him back one tile.
goto renderMap 
```

假设 %posX%==1 和 %posY%==3 我试图让程序将 IF 语句读取为：

```
if "p13"=="#" set /a "posY=%posY%-1" 
```

但是我尝试过的任何方法似乎都不起作用。我想知道是否有人可以告诉我一个正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:59:48.500

如果您正在批量编写游戏，那么程序的速度很重要。

*   有三种方法可以将变量用作另一个变量名称的一部分：使用`CALL`命令、使用`FOR`命令或使用延迟扩展。`CALL`是最慢的，延迟扩展是最快的。

*   始终尝试使用最短的方式编写任何命令。增加变量的最快方法是`set /A var+=1`.

*   我强烈建议您使用将下标括在方括号中的标准数组表示法；这种形式更加清晰。您可以阅读[cmd.exe (batch) 脚本中的数组、链表和其他数据结构，](https://stackoverflow.com/questions/10166386/arrays-linked-lists-and-other-data-structures-in-cmd-exe-batch-script/10167990#10167990)以进一步了解这一点。

以下是您上面的相同代码，但包括前面的几点：

```
setlocal EnableDelayedExpansion
:south
set "message=You take a step South"
set /a posY+=1    //Moves player down one tile
if "!p[%posX%][%posY%]!" == "#" set /a posY-=1    //checks if the player has hit a wall. If this is the case, bring him back one tile.
goto renderMap 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:48:46.013

```
@ECHO OFF
SETLOCAL
SET p13=#
SET posy=2
SET posx=1

SET /a posy=posy+1
CALL SET destsq=%%p%posx%%posy%%%
IF "%destsq%"=="#" (
  ECHO hit wall - ouch!&SET /a posy-=1
  ) ELSE (ECHO moved south.) 
```

这可能是最简单的。

请注意，CALLed 是
`set destsq=`
`%%`- % 转义了`%`
`p`
`%posx%`- 评估为`1`
`%posy%`- 评估为`3`
`%%`- % 的特殊含义`%`

所以结果设置为 destq=%p13%

请注意，它`set/a`允许您在没有 的情况下进行操作，`%`并且还允许表单`set /a var+=something`将 %something% 添加到 var。

当然， set /a var += something set /a var += %something% set /a var = var + something set /a var = %var% + something set /a var = %var% + %something% set /a var = var + %something%

所有人都做同样的事情。您选择使用哪种样式...

看

```
set /? 
```

从 docco 的提示中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T07:51:33.077

好的，这是一个简单的示例，您可以在其中看到它是如何工作的：

```
@echo off&setlocal enabledelayedexpansion
set "posX=1"
set "posY=3"
set "p13=#"
set "pos=p%posX%%posY%"
if "!%pos%!"=="#" echo "#" found. 
```

..输出是：

```
"#" found. 
```

# android - 创建加号和减号按钮，如日期选择器

> ID：15942821
> 
> 赞同：1
> 
> 时间：2013-04-11T07:17:23.230
> 
> 标签：android

有没有办法像日期选择器对话框中那样创建加号和减号按钮？我的意思是没有从头开始创建它们。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:32:53.673

一种选择是按照 Paresh mayani 的建议去做。

您可以使用可用的 android 资源为您的 Button 设置背景。Datapicker 使用可用的向上箭头和向下箭头资源 (android.R.drawable)。您可以使用可用的图像，而不是创建自定义图像并将其设置为按钮的背景。有关您可以使用的所有 android drawables 的列表，请参见下面的链接

[http://developer.android.com/reference/android/R.drawable.html](http://developer.android.com/reference/android/R.drawable.html)

以编程方式设置背景

```
 Button b= (Button) findViewById(R.id.button1);
 b.setBackgroundResource(android.R.drawable.arrow_up_float); 
```

在xml中设置背景

```
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:drawable/arrow_up_float"
     /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T08:39:18.907

下面是一些资源链接，可让您快速了解 android 资源。我没有看到任何与您的需求完全匹配的东西，但也许您可以有点创意:) 如果您正在使用它们，请不要忘记确保检查版本细节。

[http://androiddrawableexplorer.appspot.com/](http://androiddrawableexplorer.appspot.com/)

[http://androiddrawables.com/buttons.html](http://androiddrawables.com/buttons.html)

# qml - 语句“import bb.cascades 1.0”中的 1.0 是什么

> ID：15942823
> 
> 赞同：0
> 
> 时间：2013-04-11T07:17:27.603
> 
> 标签：qml, blackberry-10

想知道BB10应用开发项目中1.0 in `import bb.cascades 1.0`in file的意义。`main.qml`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:05:45.367

1.0 是版本号。

目前只有 bb.cascades 库的 1.0 版。这样做的目的是为了未来的兼容性，因此如果手机有一个新的 bb10 操作系统，并且对级联库进行了任何重大更改，您的应用程序仍然可以工作，因为它告诉操作系统它是为 1.0 版构建的。

# shell - 使用 sed 从一行中提取一些字符串

> ID：15942825
> 
> 赞同：0
> 
> 时间：2013-04-11T07:17:33.730
> 
> 标签：shell, sed

我有一个字符串，

```
. . . . . . . . . . . .starting  i-8f1031ed .. started  aashish.292 ec2-23-20-213-73.compute-1.amazonaws.com in 36 s 
```

我想提取，

```
ec2-2-2-2-7.compute-1.amazonaws.com 
```

使用 sed。你能提供一个方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:19:33.283

怎么样`awk`：

```
echo '...' | awk '{print $NF}' 
```

或者，如果您坚持`sed`：

```
sed 's/.* \(.*\)/\1/' 
```

* * *

事实证明，问题中的字符串不是您真正想要的，即您不在最后一个“单词”之后。在这种情况下，您可以逃脱：

```
sed 's/.* \(.*amazonaws.com\).*/\1/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:29:43.317

```
echo "..." | sed 's/.*\(ec2[^ ]*\).*/\1/' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T09:11:59.420

有问题的字符串必须有一些可识别的模式，例如，如果我们假设字符串总是以 .com 结尾，那么这应该可以工作：- `sed 's|^.* \([^ ]*\.com\).*$|\1|g'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T07:52:31.260

你也可以使用 grep：

```
grep -o 'ec[^ ]*' <<<". . . . . . . . . . . .starting  i-8f1031ed .. started  aashish.292 ec2-23-20-213-73.compute-1.amazonaws.com in 36 s" 
```

输出：

```
ec2-23-20-213-73.compute-1.amazonaws.com 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T07:23:30.790

假设字符串总是以 ec2 开头：

`sed 's/\(ec2.*\)/\1/'`

# c# - 这种重载解决方案有什么意义？

> ID：15942827
> 
> 赞同：8
> 
> 时间：2013-04-11T07:17:49.043
> 
> 标签：c#, overloading

我刚刚有一个单元测试失败，原因很奇怪，涉及`IDictionary<object, object>`.

`IDictionary<K,V>`有两种`Remove`方法。一个拿一个`K`，另一个拿一个`KeyValuePair<K,V>`。考虑这两个彼此非常相似但行为不完全相同的字典：

```
IDictionary<string, object> d1 = new Dictionary<string, object>();
IDictionary<object, object> d2 = new Dictionary<object, object>();
d1.Add("1", 2);
d2.Add("1", 2);
Console.WriteLine(d1.Remove(new KeyValuePair<string, object>("1", 2)));
Console.WriteLine(d2.Remove(new KeyValuePair<object, object>("1", 2))); 
```

输出为`True`，则`False`。既然`KeyValuePair<object,object>`是 所期望的确切类型`d2.Remove(KeyValuePair<object,object>)`，为什么编译器会调用`d2.Remove(object)`呢？

（**验尸说明：**

在提示我问题的场景中，我没有`IDictionary<object,object>`直接使用，而是通过通用参数：

```
public class DictionaryTests<DictT> where DictT :
    IDictionary<object,object>, new() 
```

因为问题是`IDictionary`优先于`ICollection`我决定通过包含`ICollection`在约束列表中来“解决问题”：

```
public class DictionaryTests<DictT> where DictT :
    ICollection<KeyValuePair<object, object>>, IDictionary<object,object>, new() 
```

但这并没有改变编译器的想法......我想知道为什么不。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:33:12.337

为问题提供解决方案（也请参阅评论）：

```
Console.WriteLine( 
   ((ICollection<KeyValuePair<object, object>) d2).
      Remove(new KeyValuePair<object, object>("1", 2))); 
```

# c# - 如何在一行 C# 代码的中间设置断点？

> ID：15942830
> 
> 赞同：0
> 
> 时间：2013-04-11T07:17:57.000
> 
> 标签：c#, breakpoints

例如，我有以下代码，

```
Variable.Method1().Method2(); 
```

我想在 Method1() 之后和 Method2() 之前设置断点。我可以在视觉工作室这样做吗？怎么做？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:22:39.153

那是行不通的，但这会：

```
var result1 = Variable.Method1();
result1.Method2(); //set breakpoint here 
```

否则，在 Method2 的第一行代码处设置断点，然后您可以继续使用该行代码。

# javascript - NodeJS，Async forEachSeries 执行顺序

> ID：15942832
> 
> 赞同：9
> 
> 时间：2013-04-11T07:18:02.340
> 
> 标签：javascript, node.js, asynchronous, async.js

只是想了解如何使用 NodeJS 的 Async 模块。

我有以下代码。

```
var a1 = [1,2,3,4,5,6,7,8];
async.forEachSeries(a1, function(n1, callback) {
    console.log(n1);
    var a2 = [10,11,12,13,14];
    async.forEachSeries(a2, function(n2, callback) {
        console.log(n1 + " " + n2);
        callback();
    });
    callback();
}); 
```

我想以打印输出的方式制作上述代码的过程

```
1
1 10
1 11
1 12
1 13
1 14
2
2 10
2 11
2 12
2 13
2 14
3
3 10
3 11
3 12
3 13
3 14
..... 
```

但相反，我得到了类似的东西。

```
1
1 10
2
2 10
1 11
3
3 10
2 11
1 12
.... 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-11T09:32:53.830

当一切完成时，forEachMethod 也接受一个回调。所以你的代码应该是这样的：

```
var a1 = [1,2,3,4,5,6,7,8];
async.forEachSeries(a1, function(n1, callback_s1) {
    console.log(n1);
    var a2 = [10,11,12,13,14];
    async.forEachSeries(a2, function(n2, callback_s2) {
        console.log(n1 + " " + n2);
        callback_s2();
    }, function () {
        /* Finished the second series, now we mark the iteration of first series done */ 
        callback_s1();
    } );
}); 
```

您的代码中的问题是您假设 async.forEachSeries 是同步的，但事实并非如此。它保证了数组将被同步处理，但函数本身是异步的。

# php - 如何从android代码调用php文件来上传图像和字符串。基本上我想将该图像上传到本地主机和字符串到 MySQL

> ID：15942836
> 
> 赞同：-5
> 
> 时间：2013-04-11T07:18:14.103
> 
> 标签：php, android, mysql

如何从android代码调用php文件来上传图像和字符串。基本上我想将该图像上传到本地主机并将字符串上传到 MySQL .. 我需要在 php 文件中写入以存储在 MySql db 中的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:31:57.323

在客户端

```
HttpURLConnection connection = null;
DataOutputStream outputStream = null;
DataInputStream inputStream = null;    

String pathToOurFile = "path of the image.jpeg";
String urlServer = "http://xxx.xxx.xxx.xxx/uploader.php";
String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary =  "*****";

int bytesRead, bytesAvailable, bufferSize;
byte[] buffer;
int maxBufferSize = 1*1024*1024;

try {
        FileInputStream fileInStream = new FileInputStream(new File(pathToOurFile) );

        URL url = new URL(urlServer);
        connection = (HttpURLConnection) url.openConnection();

       // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");

        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

        outputStream = new DataOutputStream( connection.getOutputStream() );
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
        outputStream.writeBytes(lineEnd);

        bytesAvailable = fileInStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0)
        {
            outputStream.write(buffer, 0, bufferSize);
            bytesAvailable = fileInStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInStream.read(buffer, 0, bufferSize);
        }

        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // Responses from the server (code and message)
        serverResponseCode = connection.getResponseCode();
        serverResponseMessage = connection.getResponseMessage();

        fileInputStream.close();
        outputStream.flush();
        outputStream.close();
    }
    catch (Exception ex)
    {
        //Exception handling
    } 
```

在服务器端，

```
<?php
    $target_path  = "./";
    $target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
         echo "Success";
    } else{
        echo "Error";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:28:16.713

Hope the below will help,

```
private class MyPost extends AsyncTask<Void,Void,Void>{
            @Override
            protected Void doInBackground(Void... arg0) {
                // TODO Auto-generated method stub
                // Create a new HttpClient and Post Header
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://yoursite.com/page.php");

            try {
                // Add your data

                EditText txtName = (EditText)findViewById(R.id.txtBusinessName);
                EditText txtDesc = (EditText)findViewById(R.id.txtDescription);

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("frmName",txtName.getText().toString() ));
                nameValuePairs.add(new BasicNameValuePair("frmDesc", txtDesc.getText().toString()));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);
                Log.v("Post Status","Code: "+response.getStatusLine().getStatusCode());
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            }
            return null;
        }

    } 
```

# java - 在 Google 应用引擎中添加过滤器查询

> ID：15942840
> 
> 赞同：2
> 
> 时间：2013-04-11T07:18:27.370
> 
> 标签：java, google-app-engine, google-cloud-datastore

在 addFilter() 之后，我在过滤实体时遇到问题

已从 Google App Engine 弃用。

目标：列出具有 UID = "rahul" 的实体

我尝试了什么：

```
com.google.appengine.api.datastore.DatastoreService ds=DatastoreServiceFactory.getDatastoreService();

    Query q = new Query("Upload");
    q.setFilter(FilterOperator.EQUAL.of("UID","rahul"));
    PreparedQuery pq = ds.prepare(q);

    for (Entity result : pq.asIterable())   

       {
            String title = (String) result.getProperty("url");
            resp.getWriter().println(title);
        } 
```

这是我的“上传”实体的 DataStore 实例：

![在数据存储中上传实体实例](https://i.stack.imgur.com/Aa8C5.png)

但是，启动应用程序时我得到一个空白页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-05T18:04:43.947

如`addFilter()`已弃用，您还可以使用以下代码：

**要创建单个过滤器：**

```
query.setFilter(new Query.FilterPredicate("UID", FilterOperator.EQUAL, "rahul")); 
```

**创建多个过滤器：**

构建所有过滤器后，使用 CompositeFilter 将它们组合在一起：

```
new CompositeFilter(CompositeFilterOperator.AND, Arrays.asList(filter1, filter2)); 
```

然后通过编写将其设置为查询的过滤器：

```
query.setFilter(composite_filter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T18:29:28.163

它应该提供所需的输出。如果它给出空白页，请检查 Google Dashboard 中的日志或共享日志。

# c# - ASP.NET 无效的脚本资源请求而不是重定向

> ID：15942842
> 
> 赞同：0
> 
> 时间：2013-04-11T07:18:29.453
> 
> 标签：c#, asp.net, error-handling, global-asax

几个机器人/爬虫正在扫描我们的网站，我想知道是否有什么可以改变的，当找不到页面时（例如：www.mysite.com/scriptresource.axd），它将被重定向到一个页面而不是显示错误：

```
Message:
This is an invalid script resource request. 
```

我已经配置了`global.asax`我将收到错误邮件，但我收到了大量机器人试图访问不存在页面的电子邮件。`e.g. ScriptResource.axd`

请注意以下事项：

*   您需要先登录才能在网站上执行任何操作，但机器人会以某种方式导致此错误。
*   如果您已登录并尝试访问不存在的页面，您最终会遇到手动 404 (RemoteOnly) 错误。
*   在 Global.asax 中，我添加了对 IP 的 Session_start 的检查，它们将被重定向到 Google。但是，它们仍然可能导致此错误。

我想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:57:00.377

如果我完全理解您，您可以执行以下操作：

```
Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)
    Dim ctx As HttpContext = HttpContext.Current
    Dim file_ext As String = ctx.Request.CurrentExecutionFilePathExtension

    If file_ext = ".axd" Then
        ctx.Response.Redirect("http://bing.com")
    Else
        ' email error detail
    End If
End Sub 
```

# boost - 是否可以在 BGL 中更改广度优先搜索终止条件？

> ID：15942843
> 
> 赞同：5
> 
> 时间：2013-04-11T07:18:33.043
> 
> 标签：boost, breadth-first-search, boost-graph

我是 BGL（增强图形库）的新手。我正在学习breadth_first_search 界面，它看起来很方便。但是，在我的应用程序中，当满足其他一些终止条件（例如搜索空间节点数达到最大值）时，我需要削减广度优先搜索。

我可以使用 BFSVisitor 添加新的终止条件还是有任何其他技巧？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-28T13:43:01.703

在@yuyoyuppe 评论之后（有点晚），您可以创建一个代理访问者，它将包装实际访问者并在满足给定谓词时抛出。我选择解决的实现为您提供了在`discover_vertex`和上运行谓词的能力`examine_edge`。首先，我们定义一个默认谓词总是返回 false：

```
namespace details {

struct no_halting {
    template <typename GraphElement, typename Graph>
    bool operator()(GraphElement const&, Graph const&) {
        return false;
    }
};
} // namespace details 
```

然后，模板本身。

```
template <typename VertexPredicate = details::no_halting,
          typename EdgePredicate = details::no_halting,
          typename BFSVisitor = boost::default_bfs_visitor>
struct bfs_halting_visitor : public BFSVisitor {
    // ... Actual implementation ...
private:
    VertexPredicate vpred;
    EdgePredicate epred;
}; 
```

它将采用 3 个模板参数：

1.  应用于每次调用的顶点谓词`discover_vertex`（每个顶点最多一次）
2.  一个边谓词，应用于每次调用`examine_edge`（每个边最多一次）
3.  我们将继承的实际访问者实现

要构建它，我们只需初始化基本访问者和我们的两个谓词：

```
template <typename VPred, typename EPred, typename ... VisArgs>
bfs_halting_visitor(VPred&& vpred, EPred&& epred, VisArgs&&... args) :
                    BFSVisitor(std::forward<VisArgs>(args)...),
                    vpred(vpred), epred(epred) {} 
```

然后，我们必须创建一个（私有）代理函数来执行对基本实现的适当调用并检查谓词：

```
template <typename Pred, typename R, typename ... FArgs, typename ... Args>
void throw_on_predicate(R (BFSVisitor::*base_fct)(FArgs...), Pred&& pred, Args&&... args) {
    bool result = pred(args...);
    (this->*base_fct)(std::forward<Args>(args)...);
    if (result) {
        throw std::runtime_error("A predicate returned true");
    }
} 
```

当然，我懒惰地使用`std::runtime_error`，但您应该定义自己的异常类型，派生自`std::exception`或您使用的任何基异常类。

现在我们可以很容易地定义我们的两个回调：

```
template <typename Edge, typename Graph>
void examine_edge(Edge&& e, Graph&& g) {
    throw_on_predicate(&BFSVisitor::template examine_edge<Edge, Graph>, epred,
                       std::forward<Edge>(e), std::forward<Graph>(g));
}

template <typename Vertex, typename Graph>
void discover_vertex(Vertex&& v, Graph&& g) {
    throw_on_predicate(&BFSVisitor::template discover_vertex<Vertex, Graph>, vpred,
                       std::forward<Vertex>(v), std::forward<Graph>(g));
} 
```

我们将在自定义顶点谓词上测试我们的设施，该谓词在发现第 N 个顶点时返回 true。

```
struct VertexCounter {
    VertexCounter(std::size_t limit) : count(0), limit(limit) {}
    VertexCounter() : VertexCounter(0) {}

    template <typename V, typename G>
    bool operator()(V&&, G&&) {
        return ((++count) > limit);
    }
private:
    std::size_t count;
    std::size_t const limit;
}; 
```

要在给定图上执行 bfs，很容易：

```
Graph graph = get_graph();
Vertex start_vertex;
bfs_halting_visitor<VertexCounter> vis(VertexCounter(2), details::no_halting());
try {
    boost::breadth_first_search(graph, start_vertex, boost::visitor(vis));
} catch (std::runtime_error& e) {
    std::cout << e.what() << std::endl;
} 
```

Coliru 上的[现场演示](http://coliru.stacked-crooked.com/a/2ecce7ef16b3b8c5)可帮助您查看所有工作中的部分。

# .htaccess - 使用 htaccess 镜像域配置

> ID：15942849
> 
> 赞同：0
> 
> 时间：2013-04-11T07:19:23.363
> 
> 标签：.htaccess, mod-rewrite

如何制作几个镜像域`example.com`？

用户应该在`example.ru/*`或`example.de/*`域中浏览，但所有请求都应该发送到`example.com/*`（不重定向）

我将使用它来管理不同的网站语言。

`Is it possible?`

# image - ImageMapster - 图像不垂直居中+如何制作mouseOver效果？

> ID：15942851
> 
> 赞同：2
> 
> 时间：2013-04-11T07:19:27.517
> 
> 标签：image, map, positioning, mouseover, imagemapster

在将图像映射与 ImageMapster 一起使用时，我尝试将图像垂直和水平居中，但它不起作用。

[http://eternidad.home.pl/index_proba.html](http://eternidad.home.pl/index_proba.html)

我已经添加 ：

```
 #mapster_wrap_0 img{margin: 0 auto; align: center; vertical-valign: middle;} 
```

但静止图像在底部。

我还需要在 imageMapster 的脚本中定义 onMousveOver 效果，但我根本不知道该怎么做——我有 4 个区域，所以我需要这样的东西，但它不起作用。

```
<script language="JavaScript" type="text/javascript">
/*<![CDATA[*/

   var ImgAry=   ['str_glowna5.png','str_glowna5pl.png','str_glowna5en.png','str_glowna5es.png','str_glowna5ru.png']
   var MapAry=[];
   for (var zxc0=0;zxc0<ImgAry.length;zxc0++){
   MapAry[zxc0]=new Image();
   MapAry[zxc0].src=ImgAry[zxc0];
    }

    function Swap(id,nu){
    document.getElementById(id).src=MapAry[nu].src;
    }
    /*]]>*/

   </script>

   //
<AREA SHAPE="RECT" coords="24,509,85,566" HREF="opis_ru.htm" TITLE="Russian" onmouseover="Swap('img',4);"  onmouseout="Swap('img',0);" > 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:01:20.863

一般来说，要在与 imagemapster 绑定的图像上使用 CSS，您应该将样式应用于包装器，而不是图像本身，例如

```
-- CSS

.mapster-wrapper {
    style="margin: 0 auto; align: center; vertical-valign: middle;"
}

-- HTML

<div class="mapster-wrapper">
    <img usemap="..." src="...">
<div> 
```

ImageMapster 必须严格控制图像本身的 CSS 才能使其分层效果起作用。只需将所有样式应用到您自己的图像包装器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T13:09:33.623

可以将自定义类添加到 imagemapster 创建的包装器中：

```
$('#my_img').mapster({
  (...)
  wrapClass: 'imageMapster_wrapper'
}); 
```

那你就做

```
.imageMapster_wrapper {
   margin:0px auto;
} 
```

正如 Jamie Treworgy 已经建议的那样，在你的 CSS 中。

# css - 是否可以水平居中对齐一行不等于 12 的引导跨度？

> ID：15942858
> 
> 赞同：7
> 
> 时间：2013-04-11T07:19:39.157
> 
> 标签：css, twitter-bootstrap, alignment, html

```
<div class="row">
  <div class="span4"></div>
  <div class="span4"></div>
</div> 
```

我知道您总共需要 12 个跨度。有没有办法仍然水平居中对齐我的两个跨度？上面将只是浮动到左边。

我尝试在它们周围放置一个包装器并对其进行边距自动处理，但没有任何反应。

我可以去删除跨度类，只需添加一个指定的宽度，但我需要`span`用于流体布局的类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T07:31:24.013

如果要将两列居中，`span4`可以使用如下偏移参数：

```
<div class="row">
  <div class="span4 offset2"></div>
  <div class="span4"></div>
</div> 
```

请记住，这可能会在较低的分辨率下崩溃。为了防止这种情况考虑使用流体网格布局。这是通过改变

```
<div class="row"> 
```

进入

```
<div class="row-fluid"> 
```

希望有帮助！

# c - 如何使用 printf 在 C 中打印无穷大符号

> ID：15942860
> 
> 赞同：2
> 
> 时间：2013-04-11T07:19:53.023
> 
> 标签：c, ascii, printf

我尝试了以下

```
printf ("%c", 236);   //236 is the ASCII value for infinity 
```

但我只是在屏幕上得到垃圾输出。

printf 对于小于 128 的 ASCII 值可以正常工作。所以我尝试了以下

```
printf ("%c", 236u);  //unsigned int 236 
```

我仍然只是得到垃圾。那么，我应该怎么做才能让 printf 显示从 128 到 255 的 ASCII 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:37:46.513

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:38:28.390

Standard C does not have a symbol for infinite. That's for your implementation (eg. your compiler, your operating system, your terminal and your hardware) to define. Consider that C was designed with portability for systems that use non-ASCII character sets in mind (eg. EBCDIC).

# javascript - 如何在 switch 语句中使用通配符

> ID：15942861
> 
> 赞同：3
> 
> 时间：2013-04-11T07:19:55.413
> 
> 标签：javascript, switch-statement

我有从 ajax 调用返回的数据：`INSERT_OK_something`.

我想使用带有通配符的 switch 语句，`INSERT_OK_*`并将“某物”之类的 id 变量传递给我的 url。

```
switch (data) {
case "ERROR":
        $("#alert").dialog( "open" ).html( "Error" );
        return false;

case "INSERT_OK_*":
    var url = "index.php?op=ok&id=" + something;
    window.location = url ;
    return false; 
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T07:27:04.320

这个小技巧会做（见[jsFiddle](http://jsfiddle.net/MzXGr/)）：

```
var data = "INSERT_OK_BLABLA";

switch (data) {
case "INSERT_OK_" + data.slice("INSERT_OK_".length): // emulate INSERT_OK_*
    var url = "index.php?op=ok&id=" + data.slice("INSERT_OK_".length);
    alert(url);
    break;
default:
    alert("default");
    break;
} 
```

或使用`startsWith`（见[jsFiddle](http://jsfiddle.net/dr3da4jw/)）：

```
switch (true) {
case data.startsWith("INSERT_OK_"):
    var url = "index.php?op=ok&id=" + data.slice("INSERT_OK_".length);
    alert(url);
    break;
default:
    alert("default");
    break;
} 
```

# android - 按钮的 onclickListener 显示空指针异常

> ID：15942863
> 
> 赞同：0
> 
> 时间：2013-04-11T07:20:06.673
> 
> 标签：android, onclicklistener

这是我的代码：

```
holder.bookbtn=(Button)view.findViewById(R.id.bookbtn);
bookbtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                 book.startActivity(new Intent(book,PaymentForm.class));

            }
        }); 
```

这是错误消息：

```
04-11 12:35:41.271: E/AndroidRuntime(941): FATAL EXCEPTION: main 04-11
12:35:41.271: E/AndroidRuntime(941): java.lang.NullPointerException
04-11 12:35:41.271: E/AndroidRuntime(941):  at
com.example.hotelsearch.NewsRowAdapter.getView(NewsRowAdapter.java:156)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.AbsListView.obtainView(AbsListView.java:2033) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
android.widget.ListView.onMeasure(ListView.java:1127) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
android.view.View.measure(View.java:12724) 04-11 12:35:41.271:
E/AndroidRuntime(941):  at
android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.onMeasure(LinearLayout.java:553) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
android.view.View.measure(View.java:12724) 04-11 12:35:41.271:
E/AndroidRuntime(941):  at
android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.onMeasure(LinearLayout.java:553) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
android.view.View.measure(View.java:12724) 04-11 12:35:41.271:
E/AndroidRuntime(941):  at
android.widget.ScrollView.measureChildWithMargins(ScrollView.java:1163)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.FrameLayout.onMeasure(FrameLayout.java:293) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
android.widget.ScrollView.onMeasure(ScrollView.java:312) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
android.view.View.measure(View.java:12724) 04-11 12:35:41.271:
E/AndroidRuntime(941):  at
android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.onMeasure(LinearLayout.java:553) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
android.view.View.measure(View.java:12724) 04-11 12:35:41.271:
E/AndroidRuntime(941):  at
android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.FrameLayout.onMeasure(FrameLayout.java:293) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
android.view.View.measure(View.java:12724) 04-11 12:35:41.271:
E/AndroidRuntime(941):  at
android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.LinearLayout.onMeasure(LinearLayout.java:553) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
android.view.View.measure(View.java:12724) 04-11 12:35:41.271:
E/AndroidRuntime(941):  at
android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-11 12:35:41.271: E/AndroidRuntime(941):  at
android.widget.FrameLayout.onMeasure(FrameLayout.java:293) 04-11
12:35:41.271: E/AndroidRuntime(941):    at
com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:35:32.833

这是我完整的getview方法

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View view = convertView;
    ViewHolder holder;

    if (view == null) {
        LayoutInflater inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflater.inflate(row, null);

        holder = new ViewHolder();
        view.setTag(holder);
    } else {
        holder = (ViewHolder) view.getTag();
    }

    if ((items == null) || ((position + 1) > items.size()))
        return view;

    objBean = items.get(position);

    if(Details.getflag())
    {
        //objBean = items.get(position);

    //holder.tvName = (TextView) view.findViewById(R.id.HotelPlace);
    holder.HotelName = (TextView) view.findViewById(R.id.HotelName);
    holder.BasePrice = (TextView) view.findViewById(R.id.BasePrice);
    holder.NoOfRooms=(TextView)view.findViewById(R.id.FreeRoams);
    holder.RegularPrice=(TextView)view.findViewById(R.id.RegularPrice);
    holder.image = (ImageView) view.findViewById(R.id.HotelImg);
    //holder.RegularPrice.setPaintFlags(holder.RegularPrice.getPaintFlags()|Paint.STRIKE_THRU_TEXT_FLAG);

    //String url = "http://test.searchmyhotel.in/PropertyImages/1/"+objBean.getImageUrl();
    /*if (holder.tvName != null && null != objBean.getAddress()
            && objBean.getAddress().trim().length() > 0) {
        holder.tvName.setText(Html.fromHtml(objBean.getAddress()));*/

    //}

    if (holder.HotelName!= null && null != objBean.getPropertyName()
            && objBean.getPropertyName().trim().length() > 0) {
        holder.HotelName.setText(Html.fromHtml(objBean.getPropertyName()+" | "+objBean.getAddress()));
    }
     //Details.setpos(objBean.getAddress());
    if (holder.BasePrice != null && objBean.getBasePrice() >= 0) {
        holder.BasePrice.setText(Html.fromHtml("" + objBean.getBasePrice()+"Rs"));
    }
    if (holder.RegularPrice != null && objBean.getRegularPrice() >= 0) {
        holder.RegularPrice.setText(Html.fromHtml("" + objBean.getRegularPrice()+"Rs"));
    }
    if (holder.NoOfRooms != null && objBean.getFreeRoams() >= 0) {
        holder.NoOfRooms.setText(Html.fromHtml("" + objBean.getFreeRoams()));
    }

    /*new DisplayImageFromURL(holder.image).execute("http://api.androidhive.info/music/images/adele.png");
    holder.image.setImageBitmap(objBean.getImage());*/

    imageLoader.DisplayImage("http://api.androidhive.info/music/images/adele.png",holder.image);
    }
    else
    {

    holder.bookbtn=(Button)view.findViewById(R.id.bookbtn);
    holder.RoomType=(TextView)view.findViewById(R.id.RoomType);
    holder.HotelName = (TextView) view.findViewById(R.id.HotelName);
    holder.TypePrice=(TextView)view.findViewById(R.id.TypePrice);   
    holder.TypePriceDt=(TextView)view.findViewById(R.id.RoomTypePrice);
    holder.RoomTypeDt=(TextView)view.findViewById(R.id.HotelTypeDetailed);

    if (holder.HotelName!= null && null != objBean.getPropertyName()
            && objBean.getPropertyName().trim().length() > 0) {
        holder.HotelName.setText(Html.fromHtml(objBean.getPropertyName()));
    }

    if(holder.RoomType!=null && objBean.getRoomType().trim().length()>0){
    holder.RoomType.setText(Html.fromHtml(objBean.getRoomType()));}

    if(holder.RoomTypeDt!=null && objBean.getRoomType().trim().length()>0){
        holder.RoomTypeDt.setText(Html.fromHtml(objBean.getRoomType()));}

    if(holder.TypePrice!=null && objBean.getRoomPrice().trim().length()>=0){
    holder.TypePrice.setText(Html.fromHtml(objBean.getRoomPrice()));
    }

    if(holder.TypePriceDt!=null && objBean.getRoomPrice().trim().length()>=0){
        holder.TypePriceDt.setText(Html.fromHtml(objBean.getRoomPrice()));
        }
    holder.bookbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
             book.startActivity(new Intent(book,PaymentForm.class));

        }
    });

    }

    return view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:21:45.023

```
 holder.bookbtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                 book.startActivity(new Intent(book,PaymentForm.class));
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:32:13.020

如果您添加日志记录，例如

```
Log.d("~~~~~","\n\n\n~~~~ view="+view);
holder.bookbtn=(Button)view.findViewById(R.id.bookbtn);
Log.d("~~~~~","~~~~ holder.bookbtn="+holder.bookbtn);
holder.bookbtn.setOnClickListener(new View.OnClickListener() { ... 
```

您很可能会看到它`holder.bookbtn`，`null`并且必须检查它是否`R.id.bookbtn`真的存在于从中`view`创建视图的 xml 中。

（我假设 holder.bookbtn 和 bookbtn 在您的代码上下文中是相同的）

# cuda - CUDA 中的 OpenGL 原子计数器等价物

> ID：15942865
> 
> 赞同：1
> 
> 时间：2013-04-11T07:20:08.360
> 
> 标签：cuda, glsl, atomic

我刚刚开始尝试一些来自 OpenGL/GLSL 的 CUDA 编程。

在 OpenGL 中，原子计数器似乎与主图形内存分开，并且开销几乎为零（与图像单元或“无绑定图形”内存上的原子操作明显较慢但不完全慢）不同。它们的局限性在于它们的数量是固定的（~16k），它们只能被读取、递增或递减，我猜这具有较低的开销。

CUDA 中这些极快的原子计数器是否有等效接口？

我想写这样的东西：

```
if (some_condition)
{
    index = atomicIncrement(globalCounter);
    output[index] = myValue;
} 
```

使用基数排序或类似“组织金字塔”的压缩可以实现相同的结果，但原子计数器更简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:39:39.990

您是否尝试过使用 atomicAdd()？我不知道 OpenGL 原子，但我想它们是相似的。

```
int atomicAdd(int* address, int val);
unsigned int atomicAdd(unsigned int* address,
                       unsigned int val);
unsigned long long int atomicAdd(unsigned long long int* address,
                                 unsigned long long int val);
float atomicAdd(float* address, float val); 
```

# powershell - 在 sharepoint 中为 bcs 创建外部列表时出现错误 0x80131600

> ID：15942866
> 
> 赞同：1
> 
> 时间：2013-04-11T07:20:20.503
> 
> 标签：powershell, sharepoint-2010, bcs

如何从 powershell 脚本创建外部列表？

我有一个使用相当大的 powershell 脚本部署到 SharePoint 2010 服务器的解决方案。当脚本即将使用 BCS 模型作为数据源创建外部列表时，我得到了异常`<nativehr>0x80131600</nativehr><nativestack></nativestack>`

以下是用于创建列表的 powershell 代码的摘录：

```
# Remove the BCS model.
# Deploy the WSP package, including the BCS model.
# Delete the external list if it already exists.
...
$currentEntityName = $Entity.Name
Write-Host "BCS: Entity '$currentEntityName' - Granting permissions"
Grant-SPBusinessDataCatalogMetadataObject -Identity $Entity -Right $EntityPermissions -Principal $principal -ErrorAction SilentlyContinue
Grant-SPBusinessDataCatalogMetadataObject -Identity $Entity -Right $EntityPermissions -Principal $principalAllFlisUsers -ErrorAction SilentlyContinue
Grant-SPBusinessDataCatalogMetadataObject -Identity $Entity -Right $EntityPermissions -Principal $principalAllFlisUsersDemo -ErrorAction SilentlyContinue
Grant-SPBusinessDataCatalogMetadataObject -Identity $Entity -Right $EntityPermissions -Principal $principalAppPoolUser -ErrorAction SilentlyContinue
...
$ds = New-Object -TypeName Microsoft.SharePoint.SPListDataSource 
$ds.SetProperty("LobSystemInstance", $instanceName) 
$ds.SetProperty("EntityNamespace", $ns) 
$ds.SetProperty("Entity", $name) 
$ds.SetProperty("SpecificFinder", $sf.Name) 
...         
$site = Get-SPSite -Identity $SiteUrl 
$web = $site.OpenWeb($webNameString) 

$newList = $web.Lists.TryGetList("$ExternalListName")
if (!$newList)
{
    $ListGUID = $web.Lists.Add("$ExternalListName", "", [String]::Format($ListUrl, $ExternalListUrl), $ds) | out-null
    $web.Lists[$ListGUID].Update()
    $web.Update()
} 
```

当我在`$web.Lists.Add()`接近尾声时调用该方法时引发异常。

在 ULS 日志中，我发现了一个可能相关的异常：

```
The type '        ProjectName.Common.CustomFieldTypes.ListSpecificCustomField,ProjectName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ff8505e11ea28a7e      ' could not be deserialized. Exception: System.TypeLoadException: Could not load type 'ProjectName.Common.CustomFieldTypes.ListSpecificCustomField' from assembly 'ProjectName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ff8505e11ea28a7e      '.     at System.RuntimeTypeHandle._GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark, Boolean loadTypeFromPartialName) ... 
```

（注：我已将实际项目名称替换为 ProjcetName 并替换了自定义字段的名称）

该列表在 中可见，`/_layouts/sitemanager.aspx`但不显示任何数据。当一个 powershell 脚本正在测试它是否已经存在时，测试返回 true。

奇怪的是，当我重新运行整个 powershell 脚本时，列表被正确创建。然而，仅仅循环引用的脚本行以获得正确的部署是不够的。这使我认为 BCS 模型没有完全部署，或者 BCS 模型以某种方式被缓存并且在部署脚本运行时抵抗更改。

# c# - 跨平台读取xml文件

> ID：15942871
> 
> 赞同：1
> 
> 时间：2013-04-11T07:20:30.313
> 
> 标签：c#, android, ios, visual-studio, xamarin.android

我有一些配置文件作为我在 Windows Mobile 上的解决方案的一部分。我将代码移植到 MonoForAndroid 和 MonoTouch，所以我想尽可能地保持我的代码不变。

加载这些 xml 文件时，在 Windows Mobile 上工作正常，在我的上一个原型中它也适用于 iOS，但代码在 MonForAndroid 上不起作用

我有这些文件

```
/solution folder
    /My Documents/
        /Business
            App.Config
            Settings.Config 
```

我将这些文件构建操作设置为`Content`，我可以看到它们被复制到`/bin/Debug/`但是当我尝试读取这些文件时，我得到以下异常：

```
System.IO.DirectoryNotFoundException 
```

我看到这里有一个类似的问题[，](https://stackoverflow.com/questions/12236208/read-xml-file-in-android-mono)但是他们建议使用`AndroidResources`，我不想这样做，需要这些文件的地方很多，所以我不想在很多地方更改它。

`AndrodiResources`, 是不可能的，如果可能的话，我想避免使用`EmbededResources`

啊，我正在阅读它的方式，非常简单`xmDoc.Load(filePath)`我也尝试过`File.ReadAllText()`我确保filePath是正确的，并且我使用Path.Combine（）生成了路径以避免filePath / slashes的任何问题这是我构建我的文件路径

```
var filePath = Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase).Replace(FileURIPrefix, ""), "My Documents", "Business");
filePath = Path.Combine(filePath, "App.Config"); 
```

而且我可以在调试器中看到filePath是正确的提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:24:45.320

在四处搜索之后，当 MonoDroid 的构建操作设置为`Content`.

我必须创建一个名为的实体`FileHelper`，它在 Android 上以不同的方式实现，然后我使用它`FileHelper.ReadAllText(string filename);`

我将把我的实现放在这里，希望它可以使其他人受益。

Windows 移动和 iOS

```
 public class FileHelper 
    {
        public static string ReadAllText(string filePath)
        {
            var path = filePath.GetFullPath();
            if (!File.Exists(path))
            {
                Logging.LogHandler.LogError("File " + path + " does not exists");
                return string.Empty;
            }
            using (var reader = new StreamReader(filePath))
            {
                return reader.ReadToEnd();
            }
        }
   } 
```

安卓版

```
public class FileHelper : BaseFileHelper 
{
    public static string ReadAllText(string filePath)
    {
        var entryAssemblyPath = Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase).Replace("file:", ""), "MyExecutableAssemblyName.dll");
        // This is because Assembly.GetEntryAssembly() returns null on Android... Booohhh
        var assembly = Assembly.LoadFrom(entryAssemblyPath);
        using (var stream = assembly.GetManifestResourceStream(filePath.GetFullPath()))
        {
            using (var reader = new StreamReader(stream))
            {
                return reader.ReadToEnd();
            }
        }
    }
} 
```

我有一个用于常量的共享代码和一个用于路径的扩展方法，如下所示

常量.cs

```
public static Class Constants
     {
        private static string _RootPath;
                private static string _iOSRootPath;
        private static string _AndroidResourcePath;

        public static string RootPath
        {
            get
            {
                if (string.IsNullOrEmpty(_RootPath))
                {
                    _RootPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase).Replace(FileURIPrefix, "") + "\\My Documents\\Business";
                }
                return _RootPath;
            }
        }

        public static string iOSRootPath
        {
            get
            {
                          if (!string.IsNullOrEmpty(_iOSRootPath)) 
                          {
                       _iOSRootPath = Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase).Replace(FileURIPrefix, "").Replace("file:", ""), Path.Combine("My_Documents", "Business"));
                  }
                          return _iOSRootPath;
                     }
        }

        public static string AndroidResourcePath
        {
            get
            {
                if (string.IsNullOrEmpty(_AndroidResourcePath))
                {
                    _AndroidResourcePath = "Leopard.Delivery.My_Documents.Business.";
                }
                return _AndroidResourcePath;
            }
        }
  } 
```

路径扩展.cs

```
public static class PathExtensions
    {
        public static string GetFullPath(this string filePath)
        {
            if (Platform.IsAndroid) // platform is a class that I have to tell me which platfrom I am at :)
            {
                return Constants.AndroidResourcePath + filePath;
            }
            if (Platform.IsIOS)
            {
                return Path.Combine(Constants.iOSRootPath, filePath);
            }
            return Path.Combine(Constants.RootPath, filePath);
        }
    } 
```

设置完成后，我正在使用我`FileHelper`的就像下面一样简单

```
string configuratinContents = FileHelper.ReadAllText(configruationPath); 
```

对于使用此代码的任何人，请记住将构建操作设置为`EmbededResources`在 Android 上以及`Content`在 iOS 和 Windows Mobile 上。

# html - 最大数量 tags per web page

> ID：15942872
> 
> 赞同：4
> 
> 时间：2013-04-11T07:20:37.693
> 
> 标签：html, iframe, browser, web, limit

For a website it is possible to include multiple iFrames for integration of external content. I know that there are other better ways to include such content, but I wonder if there is a browser-specific limit for the number of allowed iFrames on one web page?

Now I thought that there are two possible browser limitation:

1.  the number of connection that are needed for including the iFrame resources and
2.  the concrete maximum number of allowed tags.

For (1): I figured that e.g. Mozilla Firefox (v17) has config parameter for maximum number of connections to a server (`network.http.max-persistent-connections-per-server`) and an overall limited number of concurrent connections (`network.http.max-connections`). See `about:config`.

For (2) I cannot find any information. Except that there is a higher resource demand and other performance issues there is no fixed limitation for those tags on one page.

Do you have any other information?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:02:16.707

似乎没有限制。但是，正如您所提到的，您的网站速度可能会随着 i-frame 的增加而降低。

这是 I-Frames 的一个很好的指南：[i frames](http://www.w3schools.com/tags/tag_iframe.asp)

# java - Java：写入 Scala 输出流

> ID：15942874
> 
> 赞同：0
> 
> 时间：2013-04-11T07:20:43.730
> 
> 标签：java, scala, stream, buffer, stdout

我正在开发一个需要我使用 Process 类运行 scala 实例的项目。为此，我执行以下代码：

```
Process process = RunTime.getRunTime().exec("<path to scala binary> <scala file>"); 
```

这个调用给了我一个代表正在执行的 scala 程序的进程。我能够访问进程的输入流并通过以下方式接收来自进程的输入：

```
BufferedReader stdin = new BufferedReader(new InputStreamReader(process.getInputStream()));
stdin.readLine(); 
```

我试图运行的 scala 程序涉及一个扫描仪，它接收输入并将其打印出来。当我尝试将 BufferedWriter 注册到从 process.getOutputStream() 生成的 OutputStreamWriter 中，然后使用以下命令写入该流时：

```
stdout.write("Hello"); 
```

scala 程序没有收到这个输入，我想知道：为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:40:17.987

原来我忘了刷新流。

# javascript - whenever Click on submit of PopupForm from another view then it is showing default view(month) in fullcalendar

> ID：15942879
> 
> 赞同：1
> 
> 时间：2013-04-11T07:21:06.223
> 
> 标签：javascript, fullcalendar

In my Application Everything Work Fine add/edit but my main Problem is IF i am on a 'agendaWeek' of Fullcalendar and try to submit or cancel the form then it is going to Month View Updated Code:

* * *

JAVASCRIPT:

```
 <script>
var globalEvent = null;

    $(document).ready(function() {
        var count=0;
        var liveDate=new Date();
        var dat = new Date();
        var d = dat.getDate();
        var m = dat.getMonth();
        var y = dat.getFullYear();

            var calendar = $('#calendar').fullCalendar({
                selectable: true,
                selectHelper: true,
                select: function(startDate, endDate, allDay, jsEvent, view) {
                    var startDate1=$.fullCalendar.formatDate(startDate, "yyyy-MM-dd HH:mm:ss");
                    var endDate1=$.fullCalendar.formatDate(endDate, "yyyy-MM-dd HH:mm:ss");
                    document.getElementById('mode').innerHTML = "ADD :"+"<img src='<?php echo base_url();?>/assets/images/close.png' style='float:right; height:35px; width:35px; margin-top:-7px;' id='closeimg' name='closeimg'>";
                    document.getElementById('starting').innerHTML = startDate1;
                    document.getElementById('ending').innerHTML = endDate1;
                    $("#ginger").show();

                    $("#closeimg").click(function(){
                        $("#ginger").hide();
                    });
                    $("#eventName").focus();
                    $("#submit").click(function(){
                        var title=$("#eventName").val();
                            calendar.fullCalendar('renderEvent',{
                                title: title,
                                start: startDate1,
                                end: endDate1,
                                allDay: false},
                            true // make the event "stick"
                            );
                            var dataString={};
                            dataString['eventName']=title;
                            dataString['startTime']=startDate1;
                            dataString['endTime']=endDate1;
                            $.ajax({
                                type : 'POST',
                                dataType : 'json',
                                url : '<?php echo base_url(); ?>data/insert',
                                data: dataString,
                                success: function(data) {
                                    alert("data insert SuccessFully1");// I get this alert
                                    var currentView = calendar.fullCalendar('getView');
                                    calendar.fullCalendar('refetchEvents');
                                    calendar.fullCalendar('changeView', currentView.name)
                                    calendar.fullCalendar('unselect');
                                    calendar.fullCalendar('refetchEvents');
                                    $("#ginger").hide();
                                    if(data.success){
                                                  alert("Data insert suceessfully 2");// i can't get this alert
                                    }
                                }

                            });
                    });
                },

                });

        });
</script> 
```

* * *

CSS:

```
 body {

                font-size: 14px;
                font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
                }
        #calendar {
                width: 70%;
                margin: 0 auto;

                }
        #popup{
            padding-left: 0%; padding-top:17%; display: block; top: 0; left: 37%; z-index:1007; opacity: 1;  transform: scale(1);   
    height: auto;
  overflow: auto;
    position: absolute;
    width:auto;
        }
        #data{
            background-color: #ffffff;
            color:#585858;
            width:400px;
            display:block;
            z-index: 100;
            padding:0px;
            font-family: arial;
            font-weight: bold;
            border-radius: 7px 7px 0px 0px;
            border:1px solid #C5C5C5;

        }
        #popup textarea{
            width:200px;
            height:60px;
            border-radius: 5px;
            vertical-align: top;
        } 
        #detail{
/*            display: none;*/
            position:fixed;
            top:0;
            left:0;
            z-index:1;
            width:100%;
            height:100%;
            background-color:#000;
            filter:alpha(opacity=50);
            opacity:.5;

        }
      .mode{
            width:99%; 
            background-color: #8DB3CC;
             background-image:url("<?php echo base_url();?>assets/kendou/styles/textures/highlight.png");
            background-position: 0 center;
            background-repeat: repeat-x;
            height:30px;
            padding: 5px 0px 0px 5px;
            font-size: 15px;
            font-weight:normal;
            border-bottom:1px solid #C5C5C5;
            border-radius: 7px 7px 0px 0px;
        }
        .dropdown{
            border-style: solid;
    border-width: 1px;
    padding: 2px 22px 2px 2px;
    display: block;
     cursor: default;
    position: relative;
    text-align: right;
    line-height:1px;
     border-radius: 2px 2px 2px 2px;
      color: #2E2E2E;
      border-color: #C5C5C5;
        } 
```

* * *

HTML :

```
<div class="wrapper">
    <div id='calendar'></div>
    <div style="display:none;" id="ginger">
        <div id="detail"> </div>
        <form name="addData" id="addData" action="" method="post">
            <div id="popup"> 
                <div id="data"> 
                    <div id="mode" value="" class="mode">
                    <!--<img src="<?php echo base_url();?>/assets/images/close.png" style="float:right;"/>-->
                        <img src="<?php echo base_url();?>/assets/images/logo.png">
                    </div><br>
                    <div style="padding:10px;">
                        <label for="timing">Timing: <span id="starting"></span> to <span id="ending"></span></label><br><br>
                        <label for="eventName">Description : </label>
                        <textarea name="eventName" id="eventName"type="text" value=""></textarea><br><br>
                        <label for="AgentName"><b>Agent Name*</b></label>
                        <input name="AgentName" id="AgentName"/>
                        <label for="UserName">UserName : </label>
                        <select name="UserName" id="UserName" value=""></select><br><br>
                        <input type="button"class="k-button" name="submit" id="submit" value="submit">//Changes here
                        <input type="reset" name="reset" class="k-button" id="reset" value="Reset">//changes here
                        <input type="button"class="k-button" name="cancel" id="cancel" value="Cancel">//changes here
                    </div>
                </div>
            </div>
        </form>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:34:55.883

您可以结合[getView](http://arshaw.com/fullcalendar/docs/views/getView/)和[changeView](http://arshaw.com/fullcalendar/docs/views/changeView/)：

```
//remember current view
var currentView = calendar.fullCalendar('getView');
calendar.fullCalendar('refetchEvents');
//set view type
calendar.fullCalendar('changeView', currentView.name) 
```

# java - 使用 mockito 模拟使用通配符返回泛型的方法

> ID：15942880
> 
> 赞同：49
> 
> 时间：2013-04-11T07:21:08.337
> 
> 标签：java, generics, mockito

我正在使用模拟 1.9.5。我有以下代码：

```
public class ClassA  {

public List<? extends MyInterface> getMyInterfaces() {
    return null;
}

public static void testMock() {
    List<MyInterface> interfaces = new ArrayList<>();
    ClassA classAMock = mock(ClassA.class);
    when(classAMock.getMyInterfaces()).thenReturn(interfaces);      
} 
```

我得到一个编译错误的`thenReturn(interfaces)`说法：

```
"The method thenReturn(List<capture#1-of ? extends MyInterface>) in the type 
 OngoingStubbing<List<capture#1-of ? extends MyInterface>> is not applicable for the arguments 
 (List<MyInterface>)" 
```

但是，当我使用`thenAnswer`mockito 的方法时，我没有得到错误。谁能告诉我发生了什么事？为什么我在使用该`thenReturn`方法时会收到错误消息？`ClassA`当由第 3 方提供且无法修改时，还有其他方法可以解决此问题吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-11T09:16:38.580

**编辑**：从 Mockito 1.10.x 开始，嵌入类中的泛型类型现在由 Mockito 用于深度存根。IE。

```
public interface A<T extends Observer & Comparable<? super T>>  {
  List<? extends B> bList();
  T observer();
}

B b = deep_stubbed.bList().iterator().next(); // returns a mock of B ; mockito remebers that A returns a List of B
Observer o = deep_stubbed.observer(); // mockito can find that T super type is Observer
Comparable<? super T> c = deep_stubbed.observer(); // or that T implements Comparable 
```

Mockito 尽力获取编译器嵌入的类型信息，但是当应用擦除时，mockito 只能返回一个`Object`.

* * *

**原文**：嗯，与 Mockito 相比，这更多是泛型的问题。对于泛型，您应该阅读**Angelika Langer**在它们上写的内容。而对于当前主题，即通配符，请阅读本[节](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html#Wildcards)。

但简而言之，您可以使用 Mockito 的其他语法来帮助您解决当前情况：

```
doReturn(interfaces).when(classAMock).getMyInterfaces(); 
```

或者使用 BDD 别名：

```
willReturn(interfaces).given(classAMock).getMyInterfaces(); 
```

不过，您可以编写更通用友好的包装器。这将有助于未来的开发人员使用相同的 3rd 方 API。

* * *

作为旁注：你不应该模拟你不拥有的类型，它会导致许多错误和问题。相反，你应该有一些包装。例如 DAO 和存储库就代表了这样的想法，人们将模拟 DAO 或存储库接口，而不是 JDBC / JPA / hibernate 的东西。有很多关于此的博客文章：

*   [http://davesquared.net/2011/04/dont-mock-types-you-dont-own.html](http://davesquared.net/2011/04/dont-mock-types-you-dont-own.html)
*   [http://blog.8thlight.com/eric-smith/2011/10/27/thats-not-yours.html](http://blog.8thlight.com/eric-smith/2011/10/27/thats-not-yours.html)
*   [https://web.archive.org/web/20140923101818/http://freshbrewedcode.com/derekgreer/2012/04/01/tdd-best-practices-dont-mock-others/](https://web.archive.org/web/20140923101818/http://freshbrewedcode.com/derekgreer/2012/04/01/tdd-best-practices-dont-mock-others/)
*   ...

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-10-01T14:44:25.117

另一种解决方案（尽管可读性较差）是限定静态方法调用`when`来绑定通配符：

```
Mockito.<List<? extends MyInterface>>when(classAMock.getMyInterfaces()).thenReturn(interfaces); 
```

# c# - Properties Window in C#

> ID：15942893
> 
> 赞同：0
> 
> 时间：2013-04-11T07:21:59.690
> 
> 标签：c#, winforms, button, properties, window

I'm currently trying to **create a Properties Window** which is opened after a **Button on the Outlook Toolbar is pressed**, i now have:

1) the Button on the Toolbar (currently if pressed nothing occurs)

2) i know how to create the method which would hold the action after the Button is Pressed -but, I am a beginner and i don't know how to create a window which would open after the button is pressed, the Window should be fairly big, and for now have nothing but a checkbox(which i later would like to apply some method to.

if you ever created a window which opens after a button is pressed, i would be really pleased to get your help. All help is appreciated, thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:30:10.470

Here's the recommended way of opening a dialog window when the user clicks a button:

Add a new form to your project (e.g. MyForm) and then you can use the following code in your button's click event handler:

```
private void OnMyButtonClicked(object sender, EventArgs e)
{
    MyForm myForm = new MyForm();
    if (myForm.ShowDialog() == DialogResult.OK)
    {
        // The code that should be executed when the dialog was closed
        // with an OK dialog result
    }
} 
```

In case you do not want the new window to be modal (i.e. you want to allow the user use other parts of the application while the window is opened), the code gets even more simple:

```
private void OnMyButtonClicked(object sender, EventArgs e)
{
    MyForm myForm = new MyForm();
    myForm.Show();
} 
```

You can also create your form on the fly without adding one to your project, which is a bit more complicated, but advanced developers prefer this approach instead of messing with the designer ;)

```
private void OnMyButtonClicked(object sender, EventArgs e)
{
    Form myForm = new Form();
    myForm.Text = "My Form Title";

    // Add a checkbox
    CheckBox checkBox = new CheckBox();
    checkBox.Text = "Check me";
    checkBox.Location = new Point(10, 10);
    myForm.Controls.Add(checkBox);

    // Show the form
    myForm.Show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:28:30.237

Here is a small tutorial for you to follow..

[http://msdn.microsoft.com/en-us/library/ws1btzy8%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ws1btzy8%28v=vs.90%29.aspx)

EDIT: I would also recommend you remember the msdn website because it will prove invaluable for other programming issues you come across..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:26:28.273

您必须在项目中添加一个新表单。然后调用要弹出窗口的构造函数。像这样

```
Form2 form2 = new Form2();
form2.showDialog(); 
```

编辑：其中 form2 不是您程序的“主要”形式。只要关闭新弹出的窗口，这会将您的主窗口设置为背景。

# ios - ios: webview scrolling not working

> ID：15942894
> 
> 赞同：0
> 
> 时间：2013-04-11T07:22:07.167
> 
> 标签：ios, uiwebview, scroll

I am new to ios and I am trying todisplay a webview in a splitview. The webview content is displayed, but I am not able to scroll inthe webview content. It remains fixed. Following is my code:

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
        // Do any additional setup after loading the view from its nib.
    webViewProcDescription.userInteractionEnabled = YES;
    webViewProcDescription.scrollView.scrollEnabled = YES;

    [self configureView];
}

 - (void)configureView
{

    NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"Stage1" ofType:@"html"];

    NSString * htmlString = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];
    [webViewProcDescription loadHTMLString:htmlString baseURL:nil];
} 
```

I also tried to use a UIScrollView for this still no results. I even tried setting properties of webview like `userInteractionEnabled = YES` , `webViewProcDescription.scrollView.scrollEnabled = YES` , `webViewProcDescription.scalesPageToFit` , etc. still the same. Where am i getting wrong? How do i solve this.

**edit: stage1.html code**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1187.34">
  <style type="text/css">
  </style>
<javascript type="text/javascript">
window.onload = function() {
    window.location.href = "ready://" + document.body.offsetHeight;
 }
</script>
</head>
<body>
    <h2>Stage I Reconstruction, Norwood Operation </h2>

    <p>Your child has complex single ventricle anatomy.  In a normal heart there are four chambers, two paired atria and two paired ventricles.  The wall between the atria is called the atrial septum, and likewise the wall between the ventricles is called the ventricular septum.  In a normal heart, deoxygenated “blue” blood returns from the body to the right atrium and then the right ventricle pumps the blood to the lungs where it is oxygenated.  After blood is oxygenated in the lungs it returns to the left atrium and then the left ventricle pumps it out through the aorta to supply oxygen to the head and body (Figure 1).  This pattern of blood flow is called an <i> in series circulation. </i> </p>

    <p>Children with complex cardiac anatomy may progress down the single ventricle pathway because either the left or right ventricle is severely under-developed; there is severe obstruction to aortic flow or multiple anomalies that makes it impossible to separate the right and left heart.  Lesions resulting in single ventricle anatomy include tricuspid atresia, hypoplastic left heart syndrome, double inlet left ventricle, unbalanced atrioventricular canal defects, complex transposition of the great arteries and heterotaxy syndrome.</p>

    <p>In the single ventricle heart, all of the deoxygenated “blue” blood from the body and all of the oxygenated blood from the lungs returns to a common atrial chamber where it mixes.  The mixed blood then empties into the ventricular chamber and is ejected out of the aorta to the head and body.  Pulmonary blood flow is established using a shunt that will be described below.  This type of circulation is called parallel circulation.</p>

    <p>The operative objectives in a stage I reconstruction for a patient with a single ventricle include establishing unobstructed systemic blood flow to the brain and body, unobstructed blood return from the lungs, non-distorted and normal sized pulmonary arteries, limited pulmonary blood flow at low pressure, balanced pulmonary and systemic flows and minimal atrioventricular valve regurgitation.</p>

    <p>Your child will be taken to the OR by the anesthesiologist where they will be put to sleep and then have IV’s and arterial access placed to continuously monitor blood pressure.  The sternum (breastbone) is divided to expose the heart.  We fully dissect the aorta, pulmonary artery and ductus arteriosus before preparing for cardiopulmonary bypass.  In order for us to operate on your child’s heart we have to use the cardiopulmonary bypass (CPB) machine.  When we get ready to put someone on “bypass” we first have to give a large dose of heparin, which is a blood thinner used to prevent blood clots.  We place special cannulae into the aorta or pulmonary artery and into the right atrium.  The CPB tubing is relatively long and in order to remove all of the air from the line we often have to use donated blood to “prime” the circuit.  Once we go on “bypass” all of the venous blood is returned to the bypass machine where it is oxygenated and then pumped into the aortic cannulae.  The CPB machine allows us to safely stop the heart while maintaining good blood pressure and oxygen delivery to the brain and body.</p>

    <p>As mentioned above, there are 2 main types of shunts used to supply blood to the lungs; the modified Blalock-Taussig (BT) shunt and the right ventricle-to-pulmonary artery (Sano) shunt.  A BT shunt is a short piece of gortex tubing, usually 3.5-4mm in diameter that is sutured to the base of the subclavian artery and implanted into the top of the right pulmonary artery.  A Sano shunt is larger piece of gortex tubing, usually 5-6mm, that is sutured directly to the right ventricle and implanted into the confluence of the right and left pulmonary arteries.  If your child is getting a BT shunt then we next place a special clamp across the right subclavian artery and suture a small, gortex tube to the base of the subclavian artery.  A small clip is placed across the shunt and the other end is completed later in the operation.</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:54:01.950

发现了错误。我添加 UIWebView 的视图是意外`not set to user interaction enabled = yes`的。一旦我将`User Interaction Enabled`主视图的属性设置为`YES`，它就开始工作了。

# json - How can I stringify almost-valid json in python

> ID：15942898
> 
> 赞同：1
> 
> 时间：2013-04-11T07:22:24.557
> 
> 标签：json, mongodb, libgdx

My android game pushes this JSON to my django server:

```
{
data: [
    [
        Settings,
        "4748"
    ]
],
logType: starcycle-screenchanges
} 
```

It's not valid though because it doesn't have the strings. Which, I think, is why I can't insert it into mongoDB. Is there an easy way to make it so I can make it a json with json.loads().

I can't use eval()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:46:53.743

您的数据似乎是有效的[YAML](http://yaml.org/)（它是 JSON 的超集），因此您可以使用[PyYAML](http://pyyaml.org/wiki/PyYAML)：

```
>>> import yaml
>>> yaml.load(data)
{'data': [['Settings', '4748']], 'logType': 'starcycle-screenchanges'} 
```

# android - Modify the settings of Android device

> ID：15942901
> 
> 赞同：0
> 
> 时间：2013-04-11T07:22:33.863
> 
> 标签：android

I am using Location Service in my app as follows:

```
LocationManager locM = (LocationManager) getSystemService(LOCATION_SERVICE);                
            Criteria criteria = new Criteria();
            criteria.setAccuracy(Criteria.ACCURACY_COARSE);
            criteria.setAltitudeRequired(false);
            criteria.setBearingRequired(false);
            criteria.setCostAllowed(true);
            criteria.setPowerRequirement(Criteria.POWER_HIGH);
            criteria.setSpeedRequired(false);

            String currentProvider = locM.getBestProvider(criteria, true);
            Log.d("Location", "currentProvider: " + currentProvider);

            Location currentLocation = locM.getLastKnownLocation(currentProvider);

            if(currentLocation == null){
                locM.requestLocationUpdates(currentProvider, 0, 0, locationListener);
            } 
```

And I add permissions of network and locations in Manifest.xml. When I test this code in my Android phone earlier today, this line `String currentProvider = locM.getBestProvider(criteria, true);` always returned null. After some googling, I find out that this is caused by the settings of my phone. I should turn settings->location->use wireless networks on.

I am curious that why other app(e.g. google maps) can work well even when I turn this off. Because I never modify the settings of location before, and all other apps using location service in my phone works well. **Is there some way to modify settings in code?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:43:12.943

只要发现有很多第三方库比内置的位置类工作得更好。就像中国的百度一样。请参考这个页面：[百度Location sdk的Wiki](http://developer.baidu.com/map/geosdk-android-developv3.3.htm)

# iphone - Facebook sdk 3 returns error code 5

> ID：15942908
> 
> 赞同：0
> 
> 时间：2013-04-11T07:22:49.917
> 
> 标签：iphone, ios, facebook

I'm using the new facebook SDK... Here I want to post a image from my application to app. This is the code

```
NSData* imageData = UIImagePNGRepresentation(emailImage);
        NSLog(@"%@",emailImage);
        if (xapp.session.isOpen) {

            [xapp.session closeAndClearTokenInformation];

        } else {
            if (xapp.session.state != FBSessionStateCreated) {
                // Create a new, logged out session.
                xapp.session = [[FBSession alloc] init];
            }

            [xapp.session openWithCompletionHandler:^(FBSession *session,
                                                             FBSessionState status,
                                                             NSError *error) {

            }];
        }
        self.postParams =[[NSMutableDictionary alloc] initWithObjectsAndKeys:imageData, @"source",@"My Art", @"message",nil];

            // No permissions found in session, ask for it
            if ([[FBSession activeSession]isOpen]) {

                if ([[[FBSession activeSession]permissions]indexOfObject:@"publish_actions"] == NSNotFound) {
                    [[FBSession activeSession] reauthorizeWithPublishPermissions:[NSArray arrayWithObjects:@"publish_actions",@"publish_stream",nil]
                                                                 defaultAudience:FBSessionDefaultAudienceOnlyMe
                                                               completionHandler:^(FBSession *session, NSError *error) {
                                                                   [self publishStory];
                                                               }];
                }else{
                    [self publishStory];
                }
            }else{
                 NSLog(@"Sessionisclosed");
                /
                [FBSession openActiveSessionWithPublishPermissions:[NSArray arrayWithObjects:@"publish_stream",@"publish_actions",nil]
                                                   defaultAudience:FBSessionDefaultAudienceOnlyMe
                                                      allowLoginUI:YES
                                                 completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                                     if (!error && status == FBSessionStateOpen) {
                                                    [FBSession setActiveSession:session];
                                                         [self publishStory];
                                                    }else{
                                                         NSLog(@"error:%d",[error code]);
                                                     }
                                                 }];
            }

- (void)publishStory
{
    NSLog(@"PublishStory%@",self.postParams);
    [FBRequestConnection
     startWithGraphPath:@"me/feed"
     parameters:self.postParams
     HTTPMethod:@"POST"
     completionHandler:^(FBRequestConnection *connection,
                         id result,
                         NSError *error) {
         NSString *alertText;
         if (error) {
             alertText = [NSString stringWithFormat:
                          @"error: domain = %@, code = %d",
                          error.domain, error.code];
         } else {
             alertText = [NSString stringWithFormat:
                          @"Posted action, id: %@",
                          [result objectForKey:@"id"]];
         }
         // Show the result in an alert
         [[[UIAlertView alloc] initWithTitle:@"Result"
                                     message:alertText
                                    delegate:nil
                           cancelButtonTitle:@"OK!"
                           otherButtonTitles:nil]
          show];
     }];
     NSLog(@"PublishStory");
} 
```

Here I'm getting error code 5,which says that there is some permissions problems while posting the image ... But I have used both `publish_stream` and `publish_actions` ..I don't know what I'm missing ......

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-15T05:07:33.663

您需要切换到提要对话框，因为 opengraph 自 2013 年 2 月起已弃用

请参阅提要对话框的链接

[http://developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

# constraints - 在 Adob e Illustrator 中设置约束

> ID：15942916
> 
> 赞同：1
> 
> 时间：2013-04-11T07:23:14.553
> 
> 标签：constraints, adobe-illustrator

有没有办法限制 Adob​​e Illustrator 中的对象？

我想将多个对象放置到一个 POI。对象本身应始终查看 POI。此外，当 POI 移动时，对象的方向应更新。

有没有办法在 Adob​​e Illustrator 中定义这种类型的逻辑？

谢谢你的帮助！简

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:55:35.393

你可以编写一个脚本来做到这一点。

一个问题是如何确定哪些对象是正确的。

作为一个快速的 hacky 解决方案是使用命名约定：假设 POI 对象在其名称中包含字符“POI”。

获得 POI 对象后，只需使用 atan2 从其他所有对象获取 POI 即可：

```
var dx = POI.x - obj.x;
var dy = POI.y - obj.y;
var angle = atan2(dy,dx); 
```

这是一个快速脚本：

```
/*
 *      Rotates a bunch of selected items towards a chosen target
 *       
 *      Usage: select at least 2 objects and mark the "look at" target by having POI in the name of the item
*/
#target illustrator

var d = app.activeDocument;//current document
var s = d.selection;//current selection
var hasDocCoords = app.coordinateSystem == CoordinateSystem.DOCUMENTCOORDINATESYSTEM;

var poi = getPOI(s);//get an object that contains 'poi'/'POI' in the name
if(s.length > 1 && poi != undefined){//if there are at least 2 objects and one's a POI
    var lookAt = getPos(poi);//get the position to look at
    for(var i = 0 ; i < s.length; i++){//for each object
         if(s[i] != poi){//that isn't the poi
            var pos = getPos(s[i]);//get the position
            //get the angle using atan2 and the difference vector between the two positions(current object and poi)
            var angle = Math.atan2(pos[1]-lookAt[1],pos[0]-lookAt[0]);
            //check if there's a rotation applied, if so, remove it first
            if(s[i].tags.length > 0){
                if(s[i].tags[0].name == "BBAccumRotation"){
                    s[i].rotate(s[i].tags[0].value* -57.2957795);//reverse rotate
                    s[i].tags[0].remove();
                }
             }
            //if it doesn't have a rotation tag, add one so it can be removed when the script is reapplied
            if(s[i].tags.length == 0){
                var t = s[i].tags.add();
                t.name = "BBAccumRotation";
                t.value = angle;
            }
            s[i].rotate(angle * 57.2957795);//finally convert radians to degrees and apply the rotation
        }
    }
    app.redraw();
}
function getPOI(s){//find POI in selection
    for(var i = 0 ; i < s.length; i++)
        if (s[i].name.toUpperCase().indexOf("POI") >= 0) return s[i];
}
function getPos(o){
    var pos = hasDocCoords ? d.convertCoordinate (o.position, CoordinateSystem.DOCUMENTCOORDINATESYSTEM, CoordinateSystem.ARTBOARDCOORDINATESYSTEM) : o.position;
    pos[0] += o.width;//offset to centre of object
    pos[1] -=  o.height;  
  return pos;  
} 
```

您可以在正确的位置 ( ) 将其另存为 Look At POI.jsx，`ILLUSTRATOR_INSTALL_DIR/Presets/LOCALE/Scripts`以便通过**File > Scripts > Look At POI访问它**

要使用它，请选择至少 2 个对象，确保其中一个包含`POI`在名称中。

这是一个快速预览： ![插画家预览](https://i.stack.imgur.com/G2vPq.png)

请注意，三角形是符号。如果需要调整，这使得全局调整旋转（如您在符号面板中看到的）变得容易。另一种方法是在脚本中为角度添加偏移量，但这感觉足够灵活:)

非脚本版本可能会使用**Symbol Spinner Tool**，但这是一个缓慢且不是很精确的过程：

![符号微调工具](https://i.stack.imgur.com/NGsdh.png)

# c# - 使用通用连接字符串时无法在远程服务器上运行 asp.net 应用程序

> ID：15942917
> 
> 赞同：0
> 
> 时间：2013-04-11T07:23:14.803
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个 asp.net 网络应用程序。使用普通连接字符串调用数据库，远程服务器报错，本地服务器运行正常，怎么办？

```
public class MainClass
{

public  SqlConnection getcon()
 {

    SqlConnection con = new SqlConnection("Data Source=b*****;Initial Catalog=**;Persist Security Info=True;User ID=***;Password=**; MultipleActiveResultSets=True" );
    return con;

} 
```

并且 Login.aspx 包含

```
 public partial class Login : System.Web.UI.Page
{
MainClass obj = new MainClass();
 protected void bt_login_Click(object sender, EventArgs e)
{  
    SqlConnection con = obj.getcon();

  con.Open(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:38:06.863

我假设 MainClass 在类库解决方案中。

如果正确，请检查解决方案的框架版本以及远程服务器上是否存在库文件。

# java - 保存文件的相对路径

> ID：15942923
> 
> 赞同：0
> 
> 时间：2013-04-11T07:23:36.907
> 
> 标签：java, eclipse, struts2, path

我正在将照片从我的数据库复制到我的网络应用程序路径中的文件夹`/WebContent/images/temp/nn.png`

我的目录结构是

```
friendit/
     WebContent/
               images/
                     temp/
                            nn.png 
```

我正在将 Web 应用程序的控制器操作类中的图像保存到文件夹friendit/webcontent/temp/nn.png 但我得到fileNotFound 异常

相对路径有问题！请帮我解决我应该使用什么相对路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:39:10.267

您不能直接将 blob 类型从数据库直接保存到硬盘

尝试使用这个，

```
 Blob test=userInfo.getPicture(); //take blob form sql in test variable
                InputStream x=test.getBinaryStream();
                int size=x.available();

                outputStream=new FileOutputStream("./WebContent/images/temp/nn.png");
                byte b[]= new byte[size];
                x.read(b);
                outputStream.write(b); 
```

# java - java efficiency comparison in terms of memory allocation

> ID：15942926
> 
> 赞同：2
> 
> 时间：2013-04-11T07:23:43.697
> 
> 标签：java, performance, memory-management, memory-efficient

This may be a duplicate question but I couldnt find what I am searching. If it exists, sorry about duplication.

I want to learn that if the following part of codes are same in terms of memory allocation.

```
//first
int n = some_number;
for(int i = 0; i < n; i++){
    for(int j = 0; j < n; j++){
        int a = something;
    }
}

//second
int i, j, a;
for(i = 0; i < n; i++){
    for(j = 0; j < n; j++){
        a = something;
    }
} 
```

I wonder, if java allocates the variable `a` **n^2 times** and `j` **n times** in the first code or both are allocated only once as in the second code.

I tried this couple of times in java but the results are inconsistent like in one trial first is 8 sec, second is 9 sec, in another trial reverse. So, I want to make sure if they are equal or not,

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T07:28:05.263

One easy way to see if there's a difference is to examine the bytecodes.

The first version compiles to:

```
 public static void f();
    Code:
       0: bipush        100
       2: istore_0      
       3: iconst_0      
       4: istore_1      
       5: goto          26
       8: iconst_0      
       9: istore_2      
      10: goto          18
      13: iconst_3      
      14: istore_3      
      15: iinc          2, 1
      18: iload_2       
      19: iload_0       
      20: if_icmplt     13
      23: iinc          1, 1
      26: iload_1       
      27: iload_0       
      28: if_icmplt     8
      31: return 
```

whereas the second compiles to:

```
 public static void g();
    Code:
       0: bipush        100
       2: istore_3      
       3: iconst_0      
       4: istore_0      
       5: goto          26
       8: iconst_0      
       9: istore_1      
      10: goto          18
      13: iconst_3      
      14: istore_2      
      15: iinc          1, 1
      18: iload_1       
      19: iload_3       
      20: if_icmplt     13
      23: iinc          0, 1
      26: iload_0       
      27: iload_3       
      28: if_icmplt     8
      31: return 
```

If you compare them closely, you'll see that they are essentially identical.

Stylistically, I think it's preferable to declare variables as close as possible to their first use. With this in mind, I'd choose the first version over the second.

# selenium-webdriver - 如何使用 Findby 声明具有不同 ID 的相同 Web 元素？

> ID：15942930
> 
> 赞同：1
> 
> 时间：2013-04-11T07:23:48.697
> 
> 标签：selenium-webdriver

例如，是否可以定义：

`@FindBy(By.id("id1")`或`By.id("form1:id1"))` 公共 WebElement 按钮

那么具有“id1”或“form1：id1”的按钮应该可以正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:07:28.757

可以使用@FindBys 注解，语法为：

```
@FindBys({@FindBy(id = "foo"),
           @FindBy(className = "bar")}) 
```

JavaDoc 在这里对其进行了描述：

[http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/support/FindBys.html](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/support/FindBys.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:46:25.377

使用 Xpath 或 CSS 选择器来做到这一点。或 Java 将 ID 名称存储在 String 中，然后您可以将其填充到您的 Id 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:32:34.837

好吧，使用任何你想要的，*只要它有效*

我个人会使用`@FindBy(By.id("id1"))`，但这只是选择点。

此外，使用两种不同的方法两次引用相同的元素并没有增加任何价值。它只会导致您的代码混乱

**编辑** 据我了解您的评论，页面上有一个元素会不断更改其 ID。如果您需要引用此类元素，请尝试使用**xPath**参见例如此[xpath 教程](http://zvon.org/xxl/XPathTutorial/Output/example1.html)

这个想法是您将指向 DOM 中的某个位置，而不是特定的 ID

# java - Date Difference in days and time

> ID：15942932
> 
> 赞同：0
> 
> 时间：2013-04-11T07:23:50.847
> 
> 标签：java, android, datetime

I have two dates:

```
Date dt1 = new Date("04/11/2013 11:00:00");//date
Date dt2 = new Date("04/12/2013 11:00:00"); 
```

Then I process with this code to know how much week between `dt1` and `dt2`

```
double tanggal = (dt2.getTime() - dt1.getTime()) / (24 * 60 * 60 * 1000);
double week= (double) Math.ceil(tanggal/7); 
```

I tried to run this code and `the result week is 1.0`, but when the `dt2` is `04/11/2013 11:00:01` , `the result week is 0.0`.

How to change the result so `the result week is 1.0` if `dt2` is `04/11/2013 11:00:01`? And I want, when the `dt2` until the seventh day or `04/18/2013 11:00:01` the result change to `2.0`. How to do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:34:24.607

如果我理解正确，您想将日期差异四舍五入到最近的一周。如果日期时间差小于一天，你得到 0 的原因是你太早了。您需要做的就是`double`在除以当天的毫秒数之前将时间戳转换为。这样你就不会失去一天以下的时差。将您的代码更改为

```
double tanggal = ((double)(dt2.getTime() - dt1.getTime())) / (24 * 60 * 60 * 1000);
double week= (double) Math.ceil(tanggal/7); 
```

这样，您的结果将是`1.0`.

# c# - html conditional compilation is turned off in MVC C#

> ID：15942936
> 
> 赞同：4
> 
> 时间：2013-04-11T07:24:16.740
> 
> 标签：c#, javascript, asp.net-mvc

I wrote this function

```
 <script type="text/javascript">
    function saveDelivery() {
       alert("tttt")
       var model = @Html.Raw(Json.Encode(Model)); //errror
       $.ajax({

           type: 'POST',

           url: '@Url.Action("SaveDelivery", "Business")',
           contentType: 'application/json; charset=utf-8',
           data: JSON.serialize(model),
           success: function (result) {                                  
           },
           error: function (xhr, ajaxOptions, thrownError) {
               alert(xhr.status);
               alert(thrownError);
          }
      });

  } 
```

but there is error on

```
var model = @Html.Raw(Json.Encode(Model)); 
```

it says `conditional compilation is turned off` How to slove this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:17:42.337

您可以使用 Html 扩展来输出脚本标签。这也有助于解决 Visual Studio 中的智能感知问题。

```
public static class Extensions
{
    public static IHtmlString BeginScript(this HtmlHelper htmlHelper)
    {
       return new HtmlString("<script type=\"text/javascript\">");
    }

    public static IHtmlString EndScript(this HtmlHelper htmlHelper)
    {
        return new HtmlString("</script>");
    }
} 
```

然后在你看来：

```
@Html.BeginScript()

// JavaScript...

var model = @Html.Raw(Json.Encode(Model));

// More JavaScript...

@Html.EndScript() 
```

注意：您需要将扩展​​类的命名空间添加到`<system.web.webPages.razor>`web.config 中的元素（视图文件夹中的那个）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T07:42:07.247

有两种选择：

1.  不在乎，您确定您的代码（这是警告）
2.  做这样的事情：`var model = '@Html.Raw(Json.Encode(Model))`'，但可能你必须将其更改为：`var model = JSON.parse('@Html.Raw(Json.Encode(Model))')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T06:26:12.493

[Json.Encode 缺少 mvc 4 程序集参考](https://stackoverflow.com/questions/12682128/mvc-4-assembly-reference-missing-for-json-encode)

首先添加 system.web.helper refrence
然后右键单击此 refrence 属性并将 Copy Localaal=false 更改为 true 并使用 json.Encode 运行您的代码

# clojure - 关于字符串来源的问题？

> ID：15942937
> 
> 赞同：6
> 
> 时间：2013-04-11T07:24:17.013
> 
> 标签：clojure

我正在查看字符串的src？fn 并有几个问题。以下是`string?`fn 的来源 -

```
(def
 ^{:arglists '([x])
   :doc "Return true if x is a String"
   :added "1.0"
   :static true}
 string? (fn ^:static string? [x] (instance? String x))) 
```

1.  提供 fn 静态元数据有什么作用？
2.  为什么两次给出静态元数据，为 fn 或 var 指定它不应该足够吗？
3.  为什么匿名 fn 有名字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:32:36.843

有关 1\. 和 2\. 的答案，请参阅 djsheldrick 对该问题的评论。回答 3.:

首先，虽然这与这里无关，但命名函数可以通过它们的名称来引用它们自己。这允许他们将自己作为值返回或通过通常的调用机制而不是`recur`顶部来调用自己。重要的是，这是生成惰性序列的函数的正确自调用策略；[我已经在较早的 SO 答案中](https://stackoverflow.com/questions/3247045/how-are-lazy-sequences-implemented-in-clojure/3248676#3248676)探讨了原因（请参阅“您如何将递归调用包装在惰性序列中......”块引用之后的部分）。

其次，函数被编译为 JVM 类。如果函数未命名，则类由 Clojure 编译器根据定义函数的命名空间命名；否则，该名称将用于为类生成更有意义的名称。这对于调试很有用，因为它使堆栈跟踪更容易理解。

# django - Django：TypeError：“用户名”是此函数的无效关键字参数

> ID：15942939
> 
> 赞同：7
> 
> 时间：2013-04-11T07:24:29.827
> 
> 标签：django, django-models, django-forms, typeerror

我有一个名为 Employee 的模型用于注册。当我运行代码时，我去了

```
username' is an invalid keyword argument for this function 
```

错误。

```
employee=Employee(user=user, username= form.cleaned_data['username'], email= form.cleaned_data['email'], password=form.cleaned_data['password']) 
```

这是我的 view.py 代码

```
from django.http import HttpResponseRedirect
from django.contrib.auth.models import User
from django.shortcuts import render_to_response
from django.template import RequestContext
from Employee_Details.forms import RegistationForm
from Employee_Details.models import Employee

def EmployeeRegistation(request):
if request.user.is_authenticated():
    return HttpResponseRedirect('/profile/')

if request.method=='POST':
    form=RegistationForm(request.POST)
    if form.is_valid():
        user=User.objects.create_user(username= form.cleaned_data['username'],email= form.cleaned_data['email'],password=form.cleaned_data['password'])

        user.save()

        employee=Employee(user=user, username= form.cleaned_data['username'],email= form.cleaned_data['email'],password=form.cleaned_data['password'])
        employee.save()
        return HttpResponseRedirect('/profile/')

    else:
        return render_to_response('registation.html',{"form":form}, context_instance=RequestContext(request))

else:
    '''user is not submitting the form show a blank Registation Form'''
    form=RegistationForm();
    context={'form':form}
    return render_to_response('registation.html',context,context_instance=RequestContext(request)) 
```

这是我的模型：

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save

class Employee(models.Model):
    user=models.OneToOneField(User)
    name=models.CharField(max_length=100)
    address=models.CharField(max_length=200)
    designation=models.CharField(max_length=100)
    email=models.CharField(max_length=100)  
    role=models.CharField(max_length=10)
    #image=models.ImageField()
    project=models.CharField(max_length=50)
    task=models.CharField(max_length=50)

    def __unicode(self):
        return self.name 
```

这是我的form.py

```
from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm
from Employee_Details.models import Employee

class RegistationForm(ModelForm):

    username=forms.CharField(label=(u'User Name'))
    email=forms.EmailField(label=(u'Email Address'))
    password=forms.CharField(label=(u'Password'))
    password1=forms.CharField(label=(u'Verfy Password'))    
    name=forms.CharField(label=(u'Name'))
    address=forms.CharField(label=(u'Address'))
    designation=forms.CharField(label=(u'Designation')) 
    role=forms.CharField(label=(u'Role'))
    #image=models.ImageField()
    project=forms.CharField(label=(u'Project'))
    task=forms.CharField(label=(u'Task'))

    class Meta:
        model=Employee
        exclude=('user',)

    def clean_username(self):
        username=self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError('The username is already taken. Please try with another')

    def clean(self):
        if self.cleaned_data['password'] !=self.cleaned_data['password1']:
            raise forms.ValidationError("The Password did not match. Please try again")
        return self.cleaned_data 
```

请有人帮我解决这个问题。我指的是一些视频教程。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T07:40:36.590

您的模型中没有`username`字段，它是多余的，因为您的模型中已经有该字段`User`：

```
user=User.objects.create_user(username=form.cleaned_data['username'],email= form.cleaned_data['email'],password=form.cleaned_data['password'])
user.save()

employee=Employee(user=user, email=form.cleaned_data['email'], password=form.cleaned_data['password'])
(...) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-01-18T02:05:05.640

试试`modelformset_factory`吧！

# java - 我是否必须声明一个公共类（它是程序中唯一没有人会使用的类）

> ID：15942940
> 
> 赞同：0
> 
> 时间：2013-04-11T07:24:31.083
> 
> 标签：java, class, theory, public

我是一名初学计算机科学的学生，正在经历 Java 挑战。我们不得不编写一个有错误的程序；这实际上是一个有趣的练习。我的一个同学给我发了一个补丁（英文不是 diff）并说他添加`public`到课堂上。

这让我很纳闷。重要还是只是声明类的约定`public`。该程序有效，据我了解，默认值是*包私有的*，我认为这最适合 CS 学生互相邮寄的蹩脚的小脚本。

谁能给我一些更深入的了解——主要是关于 Java，但一般的 CS 理论也可能证明是有见地的——也许我可以用一些术语来进一步研究这些概念。

我想知道我同学的改正是否有效和或重要以及为什么。

**编辑**
对不起这是我的原始程序没有错误

```
import java.util.Scanner;
/**
 * Universal hello translator
 * Author: Noel Niles mail: noelniles@gmail.com
 *
 */
class HelloUniverse {
    public static void main (String [] args)
    {
        /* code */
        int country; //number of country from list
        String name; //name of person
        String greeting; //hello in different languages

        Scanner key = new Scanner(System.in);
        System.out.print("Where are you from?\n"+
                         "Enter a number from the list:\n");

        //TODO(anyone): Add some more countries and greetings
        System.out.print("1\. Afganistan\n" +
                         "2\. Antarctica\n" +
                         "3\. Australia\n"  +
                         "4\. Austria\n"    +
                         "5\. Bangladesh\n" +
                         "6\. Belgium\n"    +
                         "7\. Brazil\n"     +
                         "8\. Burma\n"      +
                         "9\. Canada\n"     +
                         "10\. Chile\n"     +
                         "11\. China\n"     );

        //get the country code
        country = key.nextInt();

        key.nextLine();
        //get the users name
        System.out.println("What is you name?");
        name = key.nextLine();

        switch (country) { 
            case 1: greeting = "salaam";
                    break;
            case 2: greeting = "h-h-h-i-i thththththere";           
                    break;
            case 3: greeting = "G'day mate";
                    break;
            case 4: greeting = "Gruss Gott";
                    break;
            case 5: greeting = "nomoskar";
                    break;
            case 6: greeting = "Hallo";
                    break;
            case 7: greeting = "Ola";
                    break;
            case 8: greeting = "mingalaba";
                    break;
            case 9: greeting = "Good day eh";
                    break;
            case 10: greeting = "Hola";
                     break;
            case 11: greeting = "Nei hou";
                     break;
            default: greeting = "Invalid country";
                     break;
        }

        //display the greeting and the users name
        System.out.printf("%s %s\n", greeting, name);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:25:48.770

不，包含该`main`方法的类是非公开的很好。（如果你真的想要，它甚至可以是一个私有的*嵌套类。）*

方法本身必须是公开的`main`，但类不是。

（请注意，这里没有“通用 CS 理论”——每种语言和平台都有自己的约定和规则。）

（我强烈建议使用一系列问候语而不是巨大的 switch 语句，诚然……但那是另一回事。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:34:09.180

当你的类没有任何修饰符时，这意味着这个类在同一个包或你的类中仍然是可见的。在此处查看不同的访问级别：http: [//docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

# windows-phone-8 - 防止 Windows Phone 8 上的自动屏幕锁定

> ID：15942952
> 
> 赞同：13
> 
> 时间：2013-04-11T07:25:41.457
> 
> 标签：windows-phone-8

我编写了一个应用程序，它在后台线程中执行一些冗长的操作，例如 Web 请求。我的问题是一段时间后自动屏幕锁定会关闭屏幕并且我的操作被中止。

有没有办法防止在这些操作过程中自动关闭屏幕？或者是否可以在屏幕关闭时以某种方式继续运行？

我知道有一些方法可以防止屏幕在调试时关闭，但我需要最终用户掌握这种行为。因此我不能依赖手机上的一些设置，而是一些程序化的解决方案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T09:05:01.027

`UserIdleDetectionMode`可以使用current的属性来强制屏幕停留`PhoneApplicationService`。

要禁用自动屏幕锁定：

```
PhoneApplicationService.Current.UserIdleDetectionMode = IdleDetectionMode.Disabled; 
```

要再次启用它：

```
PhoneApplicationService.Current.UserIdleDetectionMode = IdleDetectionMode.Enabled; 
```

更多信息可以在[MSDN上找到](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.phoneapplicationservice.useridledetectionmode%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-09T20:43:57.127

我知道这个问题是关于 Windows Phone 8 的，但我很难弄清楚 Windows Phone 8.1（通用 XAML 应用程序）的方式。采用：

```
var displayRequest = new Windows.System.Display.DisplayRequest();
displayRequest.RequestActive(); 
```

> 显示视频或在没有用户输入的情况下长时间运行的应用程序可以通过调用 DisplayRequest::RequestActive 请求显示保持开启。激活显示请求后，设备的显示屏会在应用可见时保持打开状态。当用户将应用程序移出前台时，系统会停用应用程序的显示请求，并在应用程序返回前台时重新激活它们。

请参阅：http: [//msdn.microsoft.com/en-us/library/windows/apps/br241816.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br241816.aspx)

# java - 使用 Xuggle 时在 Eclipse 中检测到致命错误

> ID：15942958
> 
> 赞同：2
> 
> 时间：2013-04-11T07:26:02.927
> 
> 标签：java, eclipse, image, video, xuggler

我试图使用`Xuggle 5.4`. 我使用的 IDE 是`Eclipse Juno`。上次尝试（大约是一个月前）时，我得到了间隔 5 秒的帧，但是今天当我尝试运行代码时，出现以下错误

```
#
# Java 运行时环境检测到一个致命错误：
#
# EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000006ee76520, pid=4340, tid=7344
#
# JRE 版本：7.0_09-b05
# Java VM：Java HotSpot(TM) 64 位服务器 VM（23.5-b02 混合模式 windows-amd64 压缩 oops）
# 有问题的框架：
# C [xuggle1062976990104623257.dll+0x736520] Java_com_xuggle_ferry_FerryJNI_SWIGRefCountedTesterUpcast+0x66f005
#
# 无法写入核心转储。默认情况下，在 Windows 的客户端版本上不启用小型转储
#
# 包含更多信息的错误报告文件保存为：
# D:\Eclipse 工作区\Eclipse Juno\VideoSteganography\hs_err_pid4340.log
#
# 如果您想提交错误报告，请访问：
# http://bugreport.sun.com/bugreport/crash.jsp
# 崩溃发生在 Java 虚拟机之外的本地代码中。
# 查看有问题的框架以了解报告错误的位置。
#
```

当我用谷歌搜索时，我发现了类似的类似问题，但我没有找到任何解决方案或导致此问题的原因。

这可能是什么原因？我无法找到导致崩溃的本机代码。我过去常常在可用时更新 Java。

我需要从视频文件中获取帧，还有什么其他方法可以完成这项工作？随时询问细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T09:40:13.047

我必须切换到 JRE7 的 32 位才能再次工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T05:13:20.190

问题在于 Java7 更新。我刚刚回滚到 Java6。现在它现在对我来说很好

# ajax - Drupal 7 Ajax 表单 - 选择元素

> ID：15942959
> 
> 赞同：0
> 
> 时间：2013-04-11T07:26:05.807
> 
> 标签：ajax, select, drupal-7

我在 Drupal 7 中有一个自定义模块表单。代码如下所示

```
function form_example_dynamic_form($form, &$form_state) {

$form['tables'] = array(

            '#type' => 'select',
            '#options' => drupal_map_assoc(array("2012", "2013")),
            '#title' => t('Select year:'),

            '#ajax' => array(
                'callback' => 'form_example_dynamic_myajax',
                'wrapper' => 'abcd',
                'effect' => 'fade',
                'method' => 'replace',
                ),

           );

 return $form;
 }

 function form_example_dynamic_myajax($form, $form_state) {
    return $form_state['values']['tables'];
 } 
```

所以这个简单的代码应该用'tables'选择的值更新#abcd标签。问题是它只适用于第一个选择。如果我选择 2013，它会在我的 #abcd 标签中返回“2013”​​文本。但是，当我选择 2012 年时，#abcd 标签保持不变。它仍然出现在 2013 年。

这是示例： http: [//kuzaj.yamandi.com/pl/form_example_dynamic](http://kuzaj.yamandi.com/pl/form_example_dynamic)

有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:50:19.347

所以 'method' => 'replace' 属性将整个包装器替换为新文本。例子：

有例如div：

第一选择（例如 2013）将其更改为（注意不再有 #abcd 标签）：

2013

然后，如果表单元素被更改，它会搜索 #abcd 标记，但没有类似的标记，因为它已经被“2013”​​替换。因此，与其使用“替换”方法，不如使用“html”。Html 方法替换标签的内容，但标签保持“不变”。

# php - HTML 表单不保存被禁用的检查或单选字段

> ID：15942961
> 
> 赞同：0
> 
> 时间：2013-04-11T07:26:14.190
> 
> 标签：php, javascript, html, mysql, forms

我有一个通过 PHP 发送到 MySQL 数据库的 HTML 表单。在我输入 JavaScript 以仅根据用户响应显示某些字段之前，该表单可以正常工作并保存得很好。大多数字段在开始时被禁用，然后在选择/输入某些响应后启用。

文本输入字段仍然保存得很好，但是，需要选择选项的字段，例如单选框和复选框（其中混合了值，包括我使用 TinyInt 数据类型的布尔值和我使用 VarChar 数据类型的文本）不保存任何内容.

有谁知道为什么？或者对如何找出导致问题的原因有任何建议？我必须强调，在 HTML 级别禁用和启用输入可以正常工作。问题与 JavaScript 或 PHP 有关。

以下代码是我一直在使用的 JavaScript 结构/格式的示例，发布此代码段的原因是因为它是我拥有的最简单的代码：

```
<script>
    $(function () {
    $("#wq_7_host_0, #wq_7_host_1").change(function () {
        $("#wq_7_hostprov, #wq_7_hostprice, #wq_7_email_0, #wq_7_email_1, #wq_7_email_2").val("").attr("disabled", true);
    if ($("#wq_7_host_0").is(":checked")) {
        $("#wq_7_hostprov, #wq_7_hostprice, #wq_7_email_0, #wq_7_email_1, #wq_7_email_2").removeAttr("disabled");
        $("#wq_7_hostprov").focus();
    } else if ($("#wq_7_host_1").is(":checked")) {
        $("#wq_7_email_0, #wq_7_email_1, #wq_7_email_2").removeAttr("disabled");
        $("#wq_7_email_1").focus();
    }
    });
    });
</script> 
```

我的PHP：

```
 <?php
// Database connection string
$dbConn = mysql_connect("info", "info", "info")
or die("Could not connect: " + mysql_error());

mysql_select_db("info", $dbConn)
or die("Could not find database: " + mysql_error());

// create variables from informatin passed from the form

$wq__0_formid = $_POST['wq__0_formid'];
$wq_0_date = $_POST['wq_0_date'];
$wq_0_prona = $_POST['wq_0_prona'];
$wq_1_conna = $_POST['wq_1_conna'];
$wq_1_comna = $_POST['wq_1_comna'];
$wq_1_no = $_POST['wq_1_no'];
ETC
 //if no email exists, add the user to the database //Left values are database names and right are variables declared above
 mysql_query("INSERT INTO webform 
(wq__0_formid, wq_0_date, wq_0_prona, wq_1_conna, wq_1_comna, wq_1_no, wq_1_str, wq_1_tow, wq_1_cit, wq_1_coun, wq_1_pos, wq_1_conno, wq_1_eadd, wq_1_trad, wq_1_tradlo_years, wq_1_tradlo_months, wq_1_tradda, wq_2_web, wq_2_webadd, ETC) VALUES('$wq__0_formid', '$wq_0_date', '$wq_0_prona', '$wq_1_conna', '$wq_1_comna', '$wq_1_no', '$wq_1_str', '$wq_1_tow', '$wq_1_cit', '$wq_1_coun', '$wq_1_pos', '$wq_1_conno', '$wq_1_eadd', '$wq_1_trad', '$wq_1_tradlo_years', '$wq_1_tradlo_months', '$wq_1_tradda', '$wq_2_web', '$wq_2_webadd' ETC)") 

 or die(mysql_error()); 

//email customer to let them know login was successful and verify details
 $to = "$wq_1_eadd";
 $subject = "subject";
 $body = "Hi $wq_1_conna, 
 Message";
 if (mail($to, $subject, $body)) {
    ?>
<script language="javascript" type="text/javascript">
        alert('Thanks <?PHP echo $wq_1_conna ?>. We will review the information you have provided and contact you shortly.');
    window.location = 'index.html';
</script>
<?php  } 
else
 {
   ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed. Please, get in touch with us via email address.');
    window.location = 'index.html';
</script>
<?php
  }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:30:50.063

看[这篇文章](http://www.w3.org/TR/html4/interact/forms.html#h-17.12)，你就明白了。
我认为您必须在 JS 中禁用输入，因为不会提交*禁用的输入元素。*
如果它还不起作用，添加一个隐藏的输入，您将使用 JS 填充，具体取决于无线电选择。

[编辑]

在 Jquery 中，您可以使用以下方法：

```
var postData = new Array();
$('#myform').find('input:text,input:radio:checked, input:checkbox:checked').each(function() {
    postData.push({$(this).attr('name') : $(this).val()});
}); 
```

[新的]

您可以将 postData 行更改为：请参阅[SO 主题](https://stackoverflow.com/questions/7813374/javascript-array-push-key-value)

```
var postData = {};
$('#myform').find('input:text,input:radio:checked, input:checkbox:checked').each(function() {
    postData[$(this).attr('name')] = $(this).val();
}); 
```

然后，调用 Ajax 方法并发送`postData`数组。

[小提琴]

在您的小提琴中，您必须使用 postData 数组。我添加（[此处](http://jsfiddle.net/dTP4N/5/)）ajax 调用以将 postData 发送到 PHP 脚本。
当然，您必须更改一些参数，例如`url`ans `success`。但这将是一个好方法。

[回复]

实际上，问题出在数据库结构（没有默认值）和 PHP 查询中。您必须为每列添加默认值，并且在 PHP 中，您必须定义将使用的所有变量。

# javascript - Backbone.View 中的多个 el

> ID：15942962
> 
> 赞同：0
> 
> 时间：2013-04-11T07:26:15.090
> 
> 标签：javascript, backbone.js

例如我有：

```
Job.Views.Response = Backbone.View.extend({
el: '.ra-response-button',
    events: {
      "click" : "alert"
    },

    alert: function() {
       console.log(this.$el);
    }; 
)}; 
```

我有多个按钮（按钮）。我希望只有单击按钮才能工作。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:31:17.293

将 更改为`el`按钮的父元素，然后执行以下操作

```
 <div id="buttonWrapper">
    <input type="button" id="button1" />
    ... snip ...
 </div> 
```

看法：

```
 Job.Views.Response = Backbone.View.extend({
     el: 'buttonWrapper',
     events: {
      'click #button1': 'eventHandler1', 
      'click #button2': 'eventHandler2',
      ... And so on...
   } 
```

# c# - 使用 c# 以编程方式填充 SSAS 数据挖掘结构

> ID：15942964
> 
> 赞同：2
> 
> 时间：2013-04-11T07:26:18.413
> 
> 标签：c#, datasource, ssas, ssms

长期读者第一次海报。

我正在进入 SQL Server Analysis Services，但在填充我新创建的数据挖掘结构时遇到了*很大的困难。*

我希望从我用作控制学习的中心枢纽的 c# 项目中工作。我希望从中学习的数据包含在 SQL Server 数据库中。

在 SSMS 中创建分析服务数据库后，我可以创建一个挖掘结构 -

> 创建采矿结构 [DON_TEST_000]（[ID_NUM] 长密钥，[TECK1] 双连续，[TECK2] 双连续）与 HOLDOUT（30%）

然后附加我的模型 -

> 更改挖掘结构 [DON_TEST_000] 添加挖掘模型 [DON_TEST_000_MODEL0] 使用 Microsoft_Clustering

这似乎工作正常。我的问题是->

1) 我希望使用 ADOMD.NET 从我的 c# 项目中执行此操作。我想我可以弄清楚如何使用它创建 SSAS 数据库并执行上述查询。

但更关键的是，

2) 我根本无法用数据填充我的挖掘结构——因为 OPENQUERY（通过 INSERT）功能需要“数据源”。我已经阅读了如何使用 Visual Studio 创建它，但我希望从我的 c# 项目中以编程方式进行。

* * *

当然，我有一种方法可以使用 c# 将 Sql Server 数据导入 Sql Server Analysis Services 数据库。这似乎很容易！

* * *

感谢您的帮助，D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:33:06.963

您必须从 BIDS 进行部署，但是要重新处理多维数据集，您可以让 SQL 作业执行 XMLA

例如，您将创建一个名为 TestJob 的作业，并且在您的 XMLA 数据库作业中，您将拥有类似于以下内容的内容：

```
<Batch xmlns="http://schemas.microsoft.com/analysisservices/2003/engine">
  <Process xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ddl2="http://schemas.microsoft.com/analysisservices/2003/engine/2" xmlns:ddl2_2="http://schemas.microsoft.com/analysisservices/2003/engine/2/2" xmlns:ddl100_100="http://schemas.microsoft.com/analysisservices/2008/engine/100/100" xmlns:ddl200="http://schemas.microsoft.com/analysisservices/2010/engine/200" xmlns:ddl200_200="http://schemas.microsoft.com/analysisservices/2010/engine/200/200">
    <Object>
      <DatabaseID>[Your SSAS Database]</DatabaseID>
    </Object>
    <Type>ProcessFull</Type>
    <WriteBackTableCreation>UseExisting</WriteBackTableCreation>
  </Process>
</Batch> 
```

然后您可以使用来自 C#.NET 的 EXEC msdb.dbo.sp_start_job 'TestJob' 来运行多维数据集的重新处理。

不确定这是否是您所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:37:54.847

不确定我是否正确理解了您，但您可以从普通的 SQL 作业创建/处理 SSAS 数据库。您可以编写触发这些数据库作业的存储过程，并从您的 c#.NET 项目中调用它们。

# bash - 使用 pre & post 脚本创建 shar

> ID：15942967
> 
> 赞同：0
> 
> 时间：2013-04-11T07:26:24.007
> 
> 标签：bash

有关如何确保 post 脚本运行的任何提示？我有一个 pre & post shell 脚本，我在 shar 文件之前和之后附加，发生的情况是应该提取我的 tar 的 post 脚本没有执行。所以我做了以下事情：

1.  创建 Pre.sh 和 post.sh
2.  创建了一个创建 shar 脚本，该脚本执行以下操作：

    ```
    cat Pre.sh > $sharfile
    shar my.tar.gz >> $sharfile 
    cat Post.sh >> $sharfile 
    ```

create shar 具有 tar.gz 名称的第一个参数，因此基本上我可以控制传递给 create_shar 脚本的 tar。

为了调试，我将 set -x 放在 Pre 脚本中，但输出只是在将 tar 解压（而不是提取）到当前目录后终止，然后退出。

一定是我在这里想念的非常简单的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:07:46.337

首先，使用 shar 打包一个文件，任何文件。不要使用任何重定向，以便您在标准输出上看到命令。请注意，您看到的最后一行是`exit 0`. 这就是导致您的复合脚本在解包后退出的原因`my.tar.gz`。

怎么修：

```
cat Pre.sh > $sharfile
shar my.tar.gz | sed '/^exit 0/d' >> $sharfile 
cat Post.sh >> $sharfile 
```

这将删除`exit 0`从 shar 开始的最后一行，并允许 Post.sh 脚本运行。

# iphone - 使用块替换委托以传递值

> ID：15942974
> 
> 赞同：0
> 
> 时间：2013-04-11T07:26:46.480
> 
> 标签：iphone, ios, block

我已经阅读了很多关于使用块的积极内容——特别是它通过消除委托调用来简化代码。我发现了在动画结束时使用块而不是委托调用的示例。块示例很简单，但我不能将示例用于 iphone 应用程序。例如，我使用委托：

。H

```
@protocol AWActionSheetDelegate <NSObject>

- (int)numberOfItemsInActionSheet;
- (AWActionSheetCell*)cellForActionAtIndex:(NSInteger)index;
- (void)DidTapOnItemAtIndex:(NSInteger)index;

@end

@interface AWActionSheet : UIActionSheet

   @property (nonatomic, assign)id<AWActionSheetDelegate> IconDelegate;
-(id)initwithIconSheetDelegate:(id<AWActionSheetDelegate>)delegate ItemCount:(int)cout;
@end 
```

.m

```
- (void)actionForItem:(UITapGestureRecognizer*)recongizer
{

   [IconDelegate DidTapOnItemAtIndex:cell.index];

} 
```

我用它：

```
 -(void)DidTapOnItemAtIndex:(NSInteger)index
{
    NSLog(@"tap on %d",index);

} 
```

如何使用块不使用委托我可以获得索引，您能否提供建议，如果提供好的块类别来完成效果非常好。我不想使用委托传递索引，我只想使用块来获取索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:01:08.620

我想你正在寻找这样的东西：

```
//implementation for AWActionSheet's method: actionForItem:withBlock:

-(void) actionForItem:(UITapGestureRecognizer*)recongizer withBlock:(void(^)(NSInteger integer)) block {

    NSInteger myInt = 0;
    //whatever

    //callback
    block(myInt);
} 
```

和电话

```
AWActionSheet* actionSheet;
[actionsheet actionForItem:recognizer withBlock:^(NSInteger integer) {
    NSLog(@"myInt: %d", integer);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T12:34:46.710

使用这个对象：

[https://github.com/matteogobbi/MGActionSheet](https://github.com/matteogobbi/MGActionSheet)

这是一个按块初始化和使用对象的简单示例：

```
//Initialization
MGActionSheet *actionSheet = [[MGActionSheet alloc] initWithTitle:@"Block action sheet!" cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Delete" otherButtonTitles:@"Option 1", @"Option 2", @"Option 3", nil];

//Show with completition block
[actionSheet showInView:self.view withChoiceCompletition:^(int buttonIndex) {

    if(buttonIndex == actionSheet.cancelButtonIndex) NSLog(@"Cancelled");
    else if(buttonIndex == actionSheet.destructiveButtonIndex) NSLog(@"Destructed");
    else {
        NSLog(@"Option at index: %d", buttonIndex);
    }
}]; 
```

# android - 突出显示android中的linearlayout背景

> ID：15942975
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:26:49.480
> 
> 标签：android, android-listview, sharedpreferences, background-color, pressed

我必须开发一个 android 应用程序。这是场景：线性布局中有许多图像。选择后，布局应以另一个背景显示。现在效果很好。

现在，我希望当我打开一个新活动并返回这个活动时，最后选择的布局应该仍然是突出显示的布局（具有第二个背景）。

如何才能做到这一点 ？？？

现在我使用下面的代码在按下时突出显示图像：

```
LinearLayout ar = new LinearLayout(this);
            ar.setOrientation(LinearLayout.VERTICAL);
            ar.setPadding(3, 3, 3, 3);
            ar.setLayoutParams(artiLayoutParams);
            ar.setGravity(Gravity.CENTER);
            ar.setBackgroundColor(Color.parseColor("#666666"));
            ar.setBackgroundDrawable(getResources().getDrawable(R.drawable.list_selector));
ar.setId(position);
            position++;
         ar.setOnClickListener(mArticleClick); 
```

**编辑：**

```
private OnClickListener mArticleClick = new OnClickListener()
    {

       @Override
      public void onClick ( View v )
         {
        int object = v.getId();
         v.setSelected(true);

        String articletitle = Appscontent.Sub_arraylist.get(object).toString();
            Intent in = new Intent(MainActivity.this, SubCate.class);
        in.putExtra("Title", articletitle);
    startActivity(in);
    }
    }; 
```

在这里我必须单击一个项目意味着它进入下一个活动。之后我点击后退按钮意味着所选项目保持在另一个背景下突出显示。之后我选择了另一个项目意味着它进入下一个活动。现在我必须单击后退按钮意味着这些项目仅以背景突出显示....但之前的项目也突出显示....

我希望需要像这样的o/p：

最后选择的项目仅在单击后退按钮后突出显示...请帮助我...我该怎么做..

**编辑：**

我已经声明 int prevPosition = -1; 全球...

之后我在这里保存了值：

```
 ar = new LinearLayout(this);
                ar.setOrientation(LinearLayout.VERTICAL);
              ar.setPadding(3, 3, 3, 3);
            ar.setLayoutParams(artiLayoutParams);
            ar.setGravity(Gravity.CENTER);
            ar.setBackgroundColor(Color.parseColor("#666666"));
            ar.setBackgroundDrawable(getResources().getDrawable(R.drawable.list_selector));
            ar.setId(position);
            position++;
            ar.setOnClickListener(mArticleClick);
 SharedPreferences preferences = getSharedPreferences(SPF_NAME, android.content.Context.MODE_PRIVATE);
            SharedPreferences.Editor editor = preferences.edit();
            editor.putLong("POSITION", prevPosition);
            editor.commit(); 
```

在 Onclick 方法中：

```
 private OnClickListener mArticleClick = new OnClickListener()
        {

            @Override
            public void onClick ( View v )
            {

                int object = v.getId();

 SharedPreferences preferences = getSharedPreferences(SPF_NAME, android.content.Context.MODE_PRIVATE);
          SharedPreferences.Editor editor = preferences.edit();
          editor.putLong("POSITION", -1);
        editor.commit(); 
```

但是按下后退按钮后我的背景颜色不会留在这里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:35:01.423

这很简单”。为了能够知道应该突出显示哪个图像，您需要将此信息存储在某个地方。一个好的做法是使用数据库，但如果您只有此信息要存储，您可以创建共享首选项或其他类型的全局变量之类的东西。然后，当您使用列表视图重新打开活动（或返回）时，您应该告诉列表视图应突出显示哪个项目并突出显示该项目。

# java - Log4j 文件大小

> ID：15942978
> 
> 赞同：1
> 
> 时间：2013-04-11T07:27:14.567
> 
> 标签：java, log4j

我正在使用 log4j 来记录我的 Java 项目。我正在创建三种类型的日志文件，称为“信息”、“调试”和“错误”。我已经设置了每个文件的最大大小选项。但它们并没有像我们设置的那样限制大小。

调试文件的代码是 -

```
public class DebugAppender extends RollingFileAppender {

    /** Creates a new instance of DebugAppender */
    public DebugAppender(String debuglogname, String path, String logfilesize) {
        String Filename = null;
        if (path == null || path.equalsIgnoreCase("")) {
            Filename = "Logs" + File.separator + debuglogname + ".log";
        } else {
            Filename = path + File.separator + "Logs" + File.separator + debuglogname + ".log";
        }
        super.setFile(Filename);
        setMaxFileSize(logfilesize);
        setMaxBackupIndex(2);
        setAppend(true);
        setLayout(new PatternLayout("%d{DATE}  %-5p %c{1} : %m%n"));
        activateOptions();
    }

    public String getFName() {
        return super.getFile();
    }
} 
```

调试记录器的调用是 -

```
Logger debugLogger = Logger.getLogger(LogHandler.class.getName() + "Debug");
DebugAppender objDebugAppender = new DebugAppender(debugFileName, sTempPath, "1MB");
debugLogger.addAppender(objDebugAppender); 
```

我们将其大小设置为“1MB”，但三个文件都不限于 1 MB，它们都超过了 GB。我怎样才能限制它们的大小。如果需要设置任何设置，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:12:42.933

您必须通过 log4j 属性文件设置日志文件的文件大小

```
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T07:34:25.737

在 xml 格式中，它将是

```
<param name="MaxFileSize" value="1MB" />  
<param name="MaxBackupIndex" value="1" /> 
```

# ruby - 如何使 rdoc 链接到带有等号的方法

> ID：15942981
> 
> 赞同：2
> 
> 时间：2013-04-11T07:27:38.637
> 
> 标签：ruby, hyperlink, documentation, metaprogramming, rdoc

在一个文件中，我有

```
module Adapter
  ##
  # :method: avatar

  ##
  # :method: avatar=(value)
end 
```

在另一个文件中，我想链接到这些方法：

```
# Adapter#avatar         # this generates a valid link to another page
# Adapter#avatar=        # this is shown as raw text 
```

如何告诉 rdoc 它应该生成第二个链接？

更新：已确认如果作者是用 静态定义的`def avatar=(value); end`，则链接生成正常。动态作家虽然显然是错误的。

Update2：好的，这与链接无关。这是关于生成 writer 方法的正确名称：

```
module Adapter
  ##
  # :method: avatar=(value)
end 
```

`avatar=(value)()`生成的带有名称的文档，以及

```
module Adapter
  def avatar=(value); end
end 
```

生成链接的正确`avatar=(value)`文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:38:46.353

**您应该使用 声明您的参数`:call-seq:`**`:method:`，而不是在该行中包含您的参数列表。以下对我有用，所有链接都有效：

```
module Adapter
  ##
  # :method: avatar

  ##
  # :method: avatar=
  #
  # :call-seq: avatar=(value)
end

# See Adapter#avatar  
# See Adapter#avatar=
#
class Linked
end 
```

`:method:`声明方法的*名称*，并`:call-seq:`声明它接受的参数签名。

（顺便说一句，我在[这里](http://rdoc.rubyforge.org/RDoc/Markup.html)找到了一些关于 RDoc 语法的非常有用的文档）。

# php - PHP 和 MySQL 从未知 ID 填充表

> ID：15942986
> 
> 赞同：0
> 
> 时间：2013-04-11T07:27:47.530
> 
> 标签：php, mysql, populate

我有三个表：unitpost、file 和 postfile，其中 postfile 是将文件链接到特定帖子的表。

我创建了一个上传文件和帖子的脚本，但是我需要使用 unitpostID 和 fileID 填充 postfile 表，但是一旦上传文件，就会随机选择 ID。然后如何使用刚刚上传的 fileID 填充 postfile 表？

希望这是有道理的！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:34:52.267

用于[`AUTOINCREMENT`](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)主键，因此 ID 不会是随机的，您将能够在 MySQL 或 PHP 中使用它们。

然后使用[`mysqli_insert_id()`](http://php.net/manual/ro/mysqli.insert-id.php)（或者[`PDO::lastInsertId`](http://php.net/manual/ro/pdo.lastinsertid.php)如果您使用 PDO）从 php 获取最后一个插入 id，或者，如@Nelson 所述，直接获取 MySQL 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:30:29.743

用于[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)获取最后一次插入操作的 id。

# ruby-on-rails - Extra characters rendered in view that cannot be found! A possible bug in rendering engine?

> ID：15942990
> 
> 赞同：-1
> 
> 时间：2013-04-11T07:28:03.280
> 
> 标签：ruby-on-rails, ruby

I am developing an application using rails 3.2.0 and ruby 1.9 on a Mac
I have a very strange error when rendering an index view
Rails is rendering the characters **us** at the bottom of the screen, below an index table, and I cannot find these characters in the view.
This part of the view looks like

```
<section id="main">
<section id="group"></section>
<section id="content">
<section id="data_table_section">
<script>
us
</section>
</section> 
```

The part from id=content is yield in a layout file

```
 <section id='content'> 
   <%= yield %>
 </section> 
```

When I delete the content of the view template, i.e the the **us** is still there
When I delete <%= yield %> in the layout, the **us** disappears
When I search for the **us** in the view code it is not found
When I add my own extra characters in the bottom of the view template code, after tags the **us** is displayed after these characters
When I delete the layout template the **us** is still there
The only thing I can come up with is that **us** is generated by the yield function in some mysterious way, but that seems as a very strange explanation!
Anyone that has had this problem before?
Anyone that know how to find extra characters as us in the code ?
Could it be a bug in the rendering engine ?
Any advices would be great appreciated

Here follows my view code. I use tableastic gem and some other gems

```
<% if !@unit.nil? 
  header_text="Deltagarlista för #{@unit.class.model_name.human} #{@unit.name}"
  else header_text='Deltagarlista för ST-Forum'
end %>

<section id='data_table_section'>
<article id='remote_clinic_article'></article>
<article id="users_article">
<%= table_for(@users) do |t| %>
<thead ><tr ><th id='table_header' colspan=17><%=header_text%></th></tr></thead>
<thead><tr style='text-align:center;' ><th colspan=15><%= render :partial=>'users/filter'%></th></tr></thead>
<% index=(params[:page].to_i-1)*@per_page%>
<%=  t.data  do 
    t.cell(:id,  :heading => "Id") {|p| index+=1}
    t.cell(:portrait, :heading => "Foto") {|p| image_tag(p.portrait_image,:height=>'24px')}
    t.cell(:name,:heading => sort_to("Namn",users_url(:sort_field=>'surname', :sort=>@sort),@sort_field)) {|p| link_to(mark_search_hits(p.name,@search),user_path(p.id))} 
    t.cell(:clinic, :heading => sort_to("Arbetsplats",users_url(:sort_field=>'clinics.name', :sort=>@sort),@sort_field)) {|p| link_to(mark_search_hits(p.clinic.name,@search),clinic_path(p.clinic.id)) unless p.clinic.nil?}
   t.cell(:email,:cell_html => {:class => "address"}, 
          :heading => sort_to("Email",users_url(:sort_field=>'email', :sort=>@sort),@sort_field)) {|p| mail_to(mark_search_hits(truncate(p.email,:length =>20),@search))} 
    t.cell(:user_roles,:cell_html => {:style => "width:50px"}, 
           :heading => sort_to("Roller",users_url(:sort_field=>'user_roles.role_index', :sort=>@sort),@sort_field)) {|p|  mark_search_hits(p.roles(true).to_sentence,@search)} 
  t.cell(:groups, :heading => sort_to("Grupper",users_url(:sort_field=>'groups.name', :sort=>@sort),@sort_field)) {|p|  mark_search_hits(to_sentence(p.groups),@search)}
    t.cell(:forum, :heading => sort_to("ST-forum",users_url(:sort_field=>'forums.name', :sort=>@sort),@sort_field)) {|p| mark_search_hits(link_to(p.forum.name,clinic_path(p.forum.id)),@search) unless p.forum.nil?}

    t.cell(:st_starts_on, :heading => sort_to("ST-start -- slut",users_url(:sort_field=>'employments.st_starts_on', :sort=>@sort),@sort_field)){|p|  mark_search_hits(between_user_dates(p.employment.st_starts_on,p.employment.st_end_on),@search) unless p.employment.nil?} 
    t.cell(:legitimation_on,:heading => sort_to("Legitimation",users_url(:sort_field=>'employments.legitimation_on', :sort=>@sort),@sort_field)){|p| mark_search_hits(to_user_date(p.employment.legitimation_on),@search) unless p.employment.nil?} 
    t.cell(:employed_on,
            :heading => sort_to("ST-kontrakt",users_url(:sort_field=>'employments.employed_on', :sort=>@sort),@sort_field)){|p| mark_search_hits(to_user_date(p.employment.employed_on),@search) unless p.employment.nil?}
    t.cell(:last_visit,
            :heading => sort_to("Inloggad senast",users_url(:sort_field=>'last_visit_at', :sort=>@sort),@sort_field)){|p|  mark_search_hits(to_user_date(p.last_visit_at),@search) }                                                    
    t.cell(:mail,
           :heading => "Handledare / Handledd") {|p|  if !p.supervisors.blank? then mail_supervisors(p) elsif !p.supervised.blank? then mail_supervised(p) end}
    t.cell(:id, :cell_html => {:style => "width:30px"},:heading=>image_to('new.png',new_user_path,:class=>'no_class')) {|p| (image_to('destroy.png',user_path(p),:class=>'none',:method=>'delete', :id=>'destroy_button', :confirm => "Vill du verkligen radera vald kurs ",:title=>'Radera kurs')+' '+image_to('map.png', map_address_path(p.address.id),:method=>:get,:class=>'none', :remote=>true, :title=>'Visa en karta över bostadsområdet')).html_safe}

 end%>
<tfoot>
    <tr >
        <td colspan="16" class='flickr_pagination'><%= will_paginate @users, :container => true  %><span class="table_filter_text">
            <% if @count_users==0 %>
             <span class="table_filter_alert_text">
               <%=" Inga användare tillgänglig för #{put_filter(@filterparams)}".html_safe%>
             </span>
            <%else%>        
             <span class="table_footer_text">       
            <%="Visar användare "+((params[:page].to_i-1)*@per_page+1).to_s+" till "+([(params[:page].to_i-1)*@per_page+@per_page,@count_users].min).to_s+" av #{@count_users.to_s} användare" .html_safe%>
            <br/><%= "Med #{ put_filter(@filterparams)}".html_safe %>
            </span>
           <%end%>          
        </td>

    </tr>
</tfoot>
  <% end %> 
</article>
</section>
<script>
$(document).ready(function() {
 /*  $('.pagination a').attr('data-remote', 'true');*/
jQuery(".best_in_place").best_in_place();
});

// Observe forum_field and filter group_options
$(document).ready(function(){

$("#forum_id").live('change',function () {
    var forum = "";
    forum=$("select#forum_id :selected").val()
    if (forum=='') {forum=0}
        jQuery.get('/users/'+forum+'/update_group_options', function(data){
                $("#group_div").html(data);
            })
            return false;
  })
  .change();

$("#county_council_id").live('change',function () {
    var county_council = "";
    county_council=$("select#county_council_id :selected").val()
    if (county_council=='') {county_council=0}
    jQuery.get('/users/'+county_council+'/update_forum_options', function(data){
            $("#forum_div").html(data);
        })
            return false;
  })
  .change();

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:49:19.157

我认为“我们”是js写的。也许你可以仔细检查js。

# javascript - guidelines for test scripts in squish GUI testing

> ID：15942993
> 
> 赞同：0
> 
> 时间：2013-04-11T07:28:06.717
> 
> 标签：javascript, user-interface, automated-tests, squish

i need help with test script for automation testing of a GUI application and i chose javascript to design script but test scripts examples are completely different from javascript as much i know.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T02:12:18.187

使用 Squish 的记录功能根据您的 GUI 交互记录测试。

以我的经验，这是编写测试套件最健壮、最灵活的方式。一旦您开始重构或编写自定义函数，您的 Squish 代码就会与被测应用程序 (AUT) 紧密耦合。这使得很难通过更改 AUT 来维护测试。

拥有一个灵活的 objects.map 很有用，这样随着 AUT 的发展，您的测试仍然有意义。编写特定于 AUT 的分析和报告代码也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T09:07:53.890

首先.. 最好使用另一种语言然后使用 javascript。我更喜欢 python，因为您可以轻松添加第三方模块并使用 oop。

如果您开始为大型软件编写测试自动化脚本，最好创建一个架构。在我的上一个项目中，我包含了管理/控制 aut（被测应用程序）的 gui 的抽象层类。

这些结构的好处是修改的快速响应（新按钮等）。此外，其他测试开发人员不需要知道如何与按钮、复选框等交互，因为他们必须使用抽象层中的方法。

了解 squish 测试脚本如何工作的最好方法是记录一个简单的示例（登录）。在那里您可以看到要使用的功能。如果脚本运行良好，则将您的文本输入替换为本地 tsv 文件中的条目，并添加一个循环以创建一组测试执行。

# android - 从按钮跳转到锚点

> ID：15942994
> 
> 赞同：0
> 
> 时间：2013-04-11T07:28:08.830
> 
> 标签：android, html, button, webview, anchor

使用android本机按钮导航到webview中html页面某个点的更好解决方案是什么？

是否可以导航 html 锚点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:33:48.597

如何使用这样的锚点：

```
<a href="#first">First section</a> 
```

然后在你的按钮的 OnClick 处理程序中让你的 webview 导航到：`http://yoururl.com/page.html#first`

那样有用吗？

`WebView`在 a中时似乎存在一些问题`ScrollView`，您可以在此处阅读：[Android Webview Anchor Link (Jump link) not working](https://stackoverflow.com/questions/3039555/android-webview-anchor-link-jump-link-not-working)