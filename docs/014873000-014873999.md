# StackOverflow 问答 14873000-14873999

# php - 创建php函数以在while循环中使用

> ID：14873000
> 
> 赞同：1
> 
> 时间：2013-02-14T10:44:31.970
> 
> 标签：php, wordpress, function

如何创建一个在 while 循环中使用的函数。喜欢`the_title()`还是`the_meta()`在 WordPress 中？一个简单的样本就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:44:51.917

因此，从查看`the_title()`和相关功能来看，您应该能够执行以下操作（未经测试，但应该可以）：

```
function whatever_you_want( $post_id = 0 ) {
  $post = get_post($id);
  // Display something with data from $post
} 
```

如果您没有为函数指定任何 post_id，`get_post()`将在循环中检索当前帖子以供您在函数中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T18:57:16.267

你可以使用全局变量。例如，假设你有一个全局数组，这里有一些东西可以做到这一点（显然你需要添加更多的健壮性，比如错误检查。另外，你将如何在 wordpress 上使用它取决于你在做什么）

```
$post= array( 0=>array('title'=>'the title', 'content'=>'this is the content'),
              1=>array('title'=>'the second title','content'=>'we all love seconds'),
            );
$array_index=0;
the_title();
the_post();
next_post();
the_title();
the_post();

function the_title() {
   global $post, $array_index;
   echo $posts[$array_index]['title'];
}
function the_post() {
   global $post, $array_index;
   echo $posts[$array_index]['title'];
}
function next_post() {
   global $post, $array_index;
   $array_index++;
} 
```

# gwt - 如何使用 UiBinder 在 GWT 中获取小部件高度

> ID：14873002
> 
> 赞同：2
> 
> 时间：2013-02-14T10:44:33.583
> 
> 标签：gwt, uibinder

我无法在我的代码中获取小部件的高度

```
docklayoutpanel.setHeight("1900px");
String height=Integer.toString(docklayoutpanel.getOffsetHeight());
String heightt=height+"px";
System.out.println(heightt); 
```

但 o/p 始终为 0px。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T06:48:47.987

这个问题很老，但我遇到了同样的问题，我花了很长时间才解决它。所以在这里帮助别人是我的解决方案。我正在使用 UIBinder 来构建我的视图，并在构造函数中添加了一个调度程序。

```
public class MyWidgetImpl extends Composite implements MyWidget {

@UiTemplate("MyWidget.ui.xml")
interface MainViewUiBinder extends UiBinder<Widget, MyWidgetImpl> {
}

@UiField(provided = true)
InputPanel inputPanel;

@UiField(provided = true)
ResultPanel resultPanel;

public MyWidgetImpl() {
    inputPanel = ClientFactory.getInputPanel();
    resultPanel = ClientFactory.getResultPanel();

    MainViewUiBinder uiBinder = GWT.create(MainViewUiBinder.class);
    initWidget(uiBinder.createAndBindUi(this));

    Window.addResizeHandler(new ResizeHandler() {
        public void onResize(ResizeEvent event) {
            resize();
        }
    });

    Scheduler.get().scheduleDeferred(new Scheduler.ScheduledCommand() {
        public void execute() {
            resize();
        }
    });
}

private void resize() {
    if(Window.getClientHeight() > resultPanel.getCellTree().getAbsoluteTop())
        resultPanel.getScrollPanel().setHeight((Window.getClientHeight() - resultPanel.getCellTree().getAbsoluteTop()) + "px");
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:51:41.863

这取决于您在哪里调用此代码。加载后高度将可用，即您可以通过`onLoad()`方法获得高度

# associations - 将现有的未关联变更集与 TFS 中的工作项相关联

> ID：14873008
> 
> 赞同：18
> 
> 时间：2013-02-14T10:44:57.760
> 
> 标签：associations, changeset, tfs-workitem

我知道 TFS Power 工具提供了强大的 TFS 命令行工具，它们提供了更多可以通过 Visual Studio 集成功能实现的功能。

我有几个与任何工作项无关的变更集。我想创建一个新的工作项并将这些现有的变更集与它相关联。

**这可能吗？**我看不出有什么特别的原因，但这取决于命令行工具是否提供这样的功能。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-14T13:25:42.273

当然，您可以将工作项与现有变更集相关联。您可以直接在 Visual Studio IDE 中执行此操作。就是这样：

首先打开工作项 - 并选择*All Links*选项卡：

![工作项详细信息](../Images/10dad9095d7c984ba6cafec9cc065259.png)

然后单击*Link to*并选择变更集，然后单击*Ok*：

![在此处选择变更集](../Images/1c4198d1fa59ba34137cbc2d98b0b475.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:03:03.663

是的，请阅读下文。

这可以从工作项链接部分实现，在您的定义中，我看不出您为什么要使用其他东西的原因。如果您对一些批量解决方案感兴趣，那么 Tfs 具有成熟的 API，任何工具都可能会使用它。

以下涵盖了您在 api 中的情况： [http](http://social.technet.microsoft.com/wiki/contents/articles/3280.tfs-2010-api-create-workitems-bugs.aspx) [://social.technet.microsoft.com/wiki/contents/articles/3280.tfs-2010-api-create-workitems-bugs.aspx TFS2010：如何将 WorkItem 链接到 ChangeSet](https://stackoverflow.com/questions/7333505/tfs2010-how-to-link-a-workitem-to-a-changeset)，您可以使用 VersionControlServer.QueryHistory 方法来获取您需要的变更集

对于 powershell，这包括项目创建： http: [//programmaticponderings.wordpress.com/2012/07/18/automating-work-item-creation-in-tfs-2010-with-powershell-continued/](http://programmaticponderings.wordpress.com/2012/07/18/automating-work-item-creation-in-tfs-2010-with-powershell-continued/)

# jquery - Elastislide 轮播缓存图像

> ID：14873009
> 
> 赞同：0
> 
> 时间：2013-02-14T10:44:57.873
> 
> 标签：jquery, carousel, elastislide

我在使用 elastislide.js 时遇到了一些问题。当我的浏览器缓存为空（对于 chrome、firefox 和 safari）并且我的所有网站都在加载时，elastislide 工作正常并显示我的项目。但是，当我重新加载页面时，这些项目被缓存，它们不会出现。它们已加载，但 max-height 和 height 设置为 0px。

```
 <div class="main">
    <ul id="carousel" class="elastislide-list">
        <?php $v = 0; ?>
        <?php while($plxShow->plxMotor->plxRecord_arts->loop()): ?>
            <?php $lien = $plxShow->plxMotor->racine; ?>
            <?php $title = $plxShow->plxMotor->plxRecord_arts->result[$v]['title'];
                if(strlen($title) >= 25) {
                    $title = substr($title, 0, 23);
                    $espace = strrpos($title, " ");
                    $title = substr($title, 0, $espace)."...";}?>
            <?php $lien = $lien . 'index.php?article' . $plxShow->plxMotor->plxRecord_arts->result[$v]['numero']; ?>
            <li><a href="<?php printf($lien); ?>"><span class="title_list"><?php echo $title; ?></span><img src="data/images/<?php printf($plxShow->plxMotor->plxRecord_arts->result[$v]['vignette']);?>" alt="image0<?php printf($v); ?>" /></a></li>
            <?php $v += 1; ?>
        <?php endwhile; ?>
    </ul>
</div> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:05:19.970

我在我的 js 中做了一件坏事。

我没有使用 elastislide 的 onReady 功能。

```
$('#carousel').elastislide({
    onReady:function () {
        $('.elastislide-wrapper').hide();
        $('#elast_close').hide();
        if ($.browser.msie) {
            $('#elast').bind("click", function () {
                $('.elastislide-wrapper').slideDown(500);});
            $('#elast_close').bind("click",function () {
                $('.elastislide-wrapper').slideUp(500);});
        }
        $('#elast').click(function () {
            $('.elastislide-wrapper').slideDown(500);
            $(this).hide();
            $('#elast_close').show();
        });
        $('#elast_close').click(function () {
            $('.elastislide-wrapper').slideUp(500);
            $(this).hide();
            $('#elast').show();
        });
    }
}); 
```

# html - 有什么我可以用 POST 做的，但不能用 GET 做的吗？

> ID：14873013
> 
> 赞同：-2
> 
> 时间：2013-02-14T10:45:12.197
> 
> 标签：html, http, post, get

我知道每个命令的区别和优点，我的问题是我可以在任何地方用 GET 替换 POST 请求吗？从 html 表单发送请求时，这些命令默认调用哪些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:47:31.350

> 我可以在任何地方用 GET 替换 POST 请求吗

不（尝试将是一个糟糕的主意）。

表单可以用 POST 做而 GET 不能做的事情包括：

*   发送*大量*数据
*   发送文件

还有其他一些事情用 GET 做起来简直是愚蠢的。

* * *

来自[http://www.w3.org/TR/html5/forms.html#attr-fs-method](http://www.w3.org/TR/html5/forms.html#attr-fs-method)：

> method 和 formmethod 内容属性是具有以下关键字和状态的枚举属性：
> 
> 关键字get，映射到状态GET，表示HTTP GET方法。关键字 post，映射到状态 POST，表示 HTTP POST 方法。这些属性的无效值默认值为 GET 状态。（没有缺失值默认值。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:53:06.843

当使用 GET 将数据从客户端传输到服务器时，数据是添加到 URL 中的，没有请求的 BODY。URL 的长度通常是有限制的，过去是 1024 个字符，但这实际上取决于服务器软件和服务器中间件，甚至是浏览器。

这意味着如果您想传输负载或数据或将文件上传到服务器，您无法使用 GET 来完成。

# excel - excel中的数学转置

> ID：14873014
> 
> 赞同：1
> 
> 时间：2013-02-14T10:45:12.610
> 
> 标签：excel, vbscript, excel-formula, excel-2010, transpose

大家好！我目前正在尝试在 VBScript 中实现之前在 excel 中找出一些东西。我必须在矩阵中以数学方式转置几个单元格（10*10 或 5r*10c）：

```
-------------------------------------------
| .. | .. | .. | .. | .. | .. |
| 21 | 22 | 23 | 24 | 25 | .. |
| 11 | 12 | 13 | 14 | 15 | .. |
| 1 | 2 | 3 | 4 | 5 | .. |
-------------------------------------------
```

必须成为

```
-------------------------------------------
| .. | .. | .. | .. | .. | .. |
| 3 | 13 | 23 | 33 | 43 | .. |
| 2 | 12 | 22 | 32 | 42 | .. |
| 1 | 11 | 21 | 31 | 41 | .. |
-------------------------------------------
```

现在我不是数学家（我现在或多或少是程序员），但我想出了：（`F(y)=((MOD(x,10)-1)*10)+(1+((x-MOD(x,10))/10))`是`x`顶部`y`的预块中的值，是下面的预块中的值。 ) 现在这可以正常工作到某个点（例如`10`）。

在 VBScript 中，我首先编写了以下内容：

```
函数 GetPosInSrcRack(Pos)
    Dim PlateDef(9), x, y, i, tmp

    ' 板定义
    ReDim tmp(UBound(PlateDef))
    对于 x = 0 到 UBound(PlateDef)
        PlateDef(x) = tmp
    下一个

    我 = 1
    对于 x = 0 到 UBound(PlateDef)
        For y = 0 To UBound(PlateDef(x))
            PlateDef(x)(y) = i
            我 = (我 + 1)
        下一个
    下一个

    'Dim msg' 检查定义
    '对于 x = 0 To (UBound(PlateDef))
    ' msg = Join(PlateDef(x), ", ") & vbCrLf & msg
    '下一个

    ' 获取位置
    y = (pos Mod 10)
    x = ((pos - y) / 10)

    GetPosInSrcRack = PlateDef(y)(x)
结束功能

```

当然，这很有效，但很糟糕。

使用上面的公式我会写：

```
函数 GetPosInSrcRack(Pos)
    Pos = (((Pos MOD 10)-1)*10)+(1+((Pos - (Pos MOD 10))/10))
结束功能

```

但就像我说的，这仍然是不正确的（10 给 -8）有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:48:02.797

只需使用`Paste Special > Transpose`选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:24:22.733

```
y=(MOD(x-1,10))*10+INT((x-1)/10)+1 
```

（顺便说一句，你正在做的不是矩阵转置，但这确实做了你所做的，只会更好。）

# php - 当 mysqldump 无法创建文件时，shell_exec() 不返回错误

> ID：14873016
> 
> 赞同：2
> 
> 时间：2013-02-14T10:45:18.343
> 
> 标签：php, mysqldump, shell-exec

我想在使用 php 脚本处理其表之前备份完整的数据库，所以我考虑使用 mysqldump。

我尝试使用 shell_exec() 运行 mysqldump 命令并检查它是否成功，如下所示：

```
$command = 'mysqldump -u username -ppassword database > /path/database.sql';
$result = shell_exec($command);

if(!is_null($result)) {
  echo 'Error during backup';
else {
  echo 'Database saved';
  // rest of the php script to modify the database (create/drop tables etc)
} 
```

但是我注意到 $result 始终为空，即使我给出了无法写入文件的路径（没有现有目录，或者应该在 shell 提示符下返回权限被拒绝的东西）。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:59:51.603

这对我有用：

```
$command = 'mysqldump -u username -ppassword database > /path/database.sql';
system($command, $output);

if($output != 0) {
  echo 'Error during backup';
else {
  echo 'Database saved';
  // rest of the php script to modify the database (create/drop tables etc)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:51:50.553

从[手册](http://php.net/shell_exec)：

> **返回值**
> 执行命令的输出，如果发生错误，返回 NULL

但是，您将脚本的输出重定向到文件：

```
mysqldump -u username -ppassword database > /path/database.sql
                                          ^^^^^^^^^^^^^^^^^^^^ 
```

mysqldump 有可能（我真的不知道）生成标准返回码（其中的`0`意思`OK`和其他任何意思`error`）。如果是这种情况，您应该使用该机制，尽管您需要[一个不同的 PHP 函数](http://www.php.net/manual/en/function.exec.php)：

```
string exec ( string $command [, array &$output [, int &$return_var ]] )
                                                   ^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-30T11:00:18.300

您应该删除 -u 和 -p 之间的所有空格，并且变量也使用“exec()”

```
$command = "mysqldump -u$username -p$password database > /home/yourusername/public_html/database.sql";
exec($command,$result, $output);

if($output != 0) {
  echo 'Error during backup';
}else {
  echo 'Database saved';
  // rest of the php script to modify the database (create/drop tables etc)
} 
```

# excel - excel以编程方式合并z列中具有相等值的所有行

> ID：14873017
> 
> 赞同：1
> 
> 时间：2013-02-14T10:45:22.520
> 
> 标签：excel, vba

我正在运行一个数据导入宏，我想合并数据集中在 x 列中具有相等值的所有行，然后我想得到一个代表组 x[y] x 作为列的平均值的行，并且y 是该特定分组的 x 列的值。

是否有一个简单的功能可以做到这一点，或者我必须创建一个包含大量空闲周期的广泛循环？

**显式：** 所以我的数据集看起来像

```
 A    |    B     |    C
 1         2          4
 1         2          5
 2         7          3
 2         5          1
 3         2          1
 1         5          6 
```

现在我想按列 A 值合并行，因此所有具有相等值的 A 将其余行取平均值，因此我会得到如下所示的内容：

```
 A    |    B     |    C
 1         3          5
 2         6          2
 3         2          1 
```

到目前为止，我一直在尝试通过此函数手动循环 A 列（1 到 10）的可能值，但它一直在崩溃 excel，我不知道为什么，我必须在某个地方有一个无限循环功能：

```
Function MergeRows(sheet, column, value)
Dim LastRow
Dim LastCol
Dim numRowsMerged
Dim totalValue

numRowsMerged = 1
LastRow = sheet.UsedRange.Rows.Count
LastCol = sheet.UsedRange.Columns.Count
With Application.WorksheetFunction
    For iRow = LastRow - 1 To 1 Step -1
        'enter loop if the cell value matches what we're trying to merge
        Do While Cells(iRow, column) = value
               For iCol = 1 To LastCol
                'skip the column that we're going to use as merging value, and skip the column if it contains 3 (ikke relevant)
                If Not (iCol = column) And Not (Cells(iRow, iCol) = 3) Then
                    Cells(iRow, iCol) = (Cells(iRow, iCol) * numRowsMerged + Cells(iRow + 1, iCol)) / (numRowsMerged + 1)
                End If
               Next iCol
            'delete the row merged
            Rows(iRow + 1).Delete
        Loop

        'add one to the total number of rows merged
        numRowsMerged = numRowsMerged + 1
    Next iRow
End With

End Function 
```

**解决方案** 我最终创建了一个范围，我将使用 Union 逐渐扩展，如下所示：

```
 Function GetRowRange(sheet, column, value) As range
Dim LastRow
Dim LastCol
Dim numRowsMerged
Dim totalValue
Dim rowRng As range
Dim tempRng As range
Dim sheetRange As range

numRowsMerged = 1
Set sheetRange = sheet.UsedRange
LastRow = sheet.UsedRange.Rows.Count
LastCol = sheet.UsedRange.Columns.Count
With Application.WorksheetFunction
    For iRow = 1 To LastRow Step 1
        'enter loop if the cell value matches what we're trying to merge
        If (sheetRange.Cells(iRow, column) = value) Then
            Set tempRng = range(sheetRange.Cells(iRow, 1), sheetRange.Cells(iRow, LastCol))
            If (rowRng Is Nothing) Then
                Set rowRng = tempRng
            Else
                Set rowRng = Union(rowRng, tempRng)
            End If
        End If

        'add one to the total number of rows merged
        numRowsMerged = numRowsMerged + 1
    Next iRow
End With
Set GetRowRange = rowRng
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:25:36.083

这是你正在尝试的吗？由于您需要 VBA 代码，因此我没有使用 Pivots，而是使用了更简单的选项；`formulas`计算你的平均值。

```
Option Explicit

Sub Sample()
    Dim col As New Collection
    Dim wsI As Worksheet, wsO As Worksheet
    Dim wsIlRow As Long, wsOlRow As Long, r As Long, i As Long
    Dim itm

    '~~> Chnage this to the relevant sheets
    Set wsI = ThisWorkbook.Sheets("Sheet1")
    Set wsO = ThisWorkbook.Sheets("Sheet2")

    '~~> Work with the input sheet
    With wsI
        wsIlRow = .Range("A" & .Rows.Count).End(xlUp).Row
        '~~> get unique values from Col A
        For i = 1 To wsIlRow
            On Error Resume Next
            col.Add .Range("A" & i).Value, """" & .Range("A" & i).Value & """"
            On Error GoTo 0
        Next i
    End With

    r = 1

    '~~> Write unique values to Col A
    With wsO
        For Each itm In col
            .Cells(r, 1).Value = itm
            r = r + 1
        Next

        wsOlRow = .Range("A" & .Rows.Count).End(xlUp).Row

        '~~> Use a simple formula to find the average
        For i = 1 To wsOlRow
            .Range("B" & i).Value = Application.Evaluate("=AVERAGE(IF(" & wsI.Name & _
                                    "!A1:A" & wsIlRow & "=" & .Range("A" & i).Value & _
                                    "," & wsI.Name & "!B1:B" & wsIlRow & "))")

            .Range("C" & i).Value = Application.Evaluate("=AVERAGE(IF(" & wsI.Name & _
                                    "!A1:A" & wsIlRow & "=" & .Range("A" & i).Value & _
                                    "," & wsI.Name & "!C1:C" & wsIlRow & "))")
        Next i
    End With
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/926774767b4b3d1bb45bf811aef78c8e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:57:45.943

使用数据透视表很容易做到这一点。

这是最终结果的图片。 ![Excel 数据透视表](../Images/0b502971c0a2407d3ab1e7e0da9eb2c2.png)

# twitter - 推文的语义分析

> ID：14873018
> 
> 赞同：0
> 
> 时间：2013-02-14T10:45:26.173
> 
> 标签：twitter, semantics, semantic-analysis

我知道如何与 twitter 通信以及如何检索推文，但我正在寻找进一步处理这些推文的工作。

我有两类食物和运动。现在我想将推文分类为食物和运动。谁能建议我如何根据计算机算法进行分类？

关于高拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:51:12.087

我最近一直在用潜在狄利克雷分配做一些工作。一般的想法是文档包含从主题生成的单词。您可以尝试加载**已知**与您感兴趣的主题有关的文档语料库，使用感兴趣的推文进行更新，然后选择与您的已知文档具有相同主题的概率很高的推文。

我将 R 用于 LDA（包：topicmodels 和包：lda），但我认为也有一些预构建的 Python 工具。除非您在贝叶斯统计方面有扎实的基础，否则我可能会避免尝试自己编写。

这是 topicmodels 包的文档：[http ://cran.r-project.org/web/packages/topicmodels/vignettes/topicmodels.pdf](http://cran.r-project.org/web/packages/topicmodels/vignettes/topicmodels.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:15:44.083

我怀疑一组算法是否可能对开放域中的推文进行分类。换句话说，我认为一组规则不可能对开放域推文进行分类。您需要将推文解析为为分类定制的语义表示。

# php - 从网站上传到服务器时图像质量显着降低？

> ID：14873024
> 
> 赞同：0
> 
> 时间：2013-02-14T10:45:43.173
> 
> 标签：php, mysql, image, upload

有人可以告诉我，当我在服务器上的网站上上传图片时，它会显着降低图像质量，但在我的本地主机上，这不会发生。我在网站上使用的其他图像和我的服务器上的主机显示正常。有谁知道为什么会这样。我浏览了脚本，但找不到问题所在。

这是我的上传脚本：

index.php（表格）：

```
<input type="file" class="droparea spot" name="xfile" data-post="upload.php" data-width="180" data-height="190" data-crop="true"/>

<form id="sampleform" action="post.php" method="post">

</form> 
```

post.php：

```
<?php

// LOG
$log = '=== ' . @date('Y-m-d H:i:s') . ' ===============================' . "\n"
        . 'FILES:' . print_r($_FILES, 1) . "\n"
        . 'POST:' . print_r($_POST, 1) . "\n";
$fp = fopen('post-log.txt', 'a');
fwrite($fp, $log);
fclose($fp);

// Result object
$r = new stdClass();
// Result content type
header('content-type: application/json');

$data = $_POST['thumbnail'];
unset($_POST['thumbnail']);

if($data){

  // Uploading folder
    $folder = '../'. '../'. 'data/'. 'photos/'. $_SESSION['user_id'] . '/';
    if (!is_dir($folder))
        mkdir($folder);

    // If specifics folder 
    $folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
    if (!is_dir($folder))
        mkdir($folder);

    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_POST['_default']) . '.jpg';

    $data = split(',', $data);
    file_put_contents($filename, base64_decode($data[1]));

}
die(json_encode(array_merge(array('url' => $filename), $_POST)));

?> 
```

上传.php：

```
<?php
session_start()
?>
<?

// LOG
$log = '=== ' . @date('Y-m-d H:i:s') . ' ===============================' . "\n"
        . 'FILES:' . print_r($_FILES, 1) . "\n"
        . 'POST:' . print_r($_POST, 1) . "\n";
$fp = fopen('upload-log.txt', 'a');
fwrite($fp, $log);
fclose($fp);

// Result object
$r = new stdClass();
// Result content type
header('content-type: application/json');

// Maximum file size
$maxsize = 10; //Mb
// File size control
if ($_FILES['xfile']['size'] > ($maxsize * 1048576)) {
    $r->error = "Max file size: $maxsize Kb";
}

// Uploading folder
$folder = '../'. '../'. 'data/'. 'photos/'. $_SESSION['user_id'] . '/';
if (!is_dir($folder))
    mkdir($folder);

// If specifics folder 
$folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
if (!is_dir($folder))
    mkdir($folder);

// PASS USER_ID HERE
$folder2 = '../'. '../'. 'data/'. 'photos/'. $_SESSION['user_id'] . '/';
if (!is_dir($folder2))
    mkdir($folder2);

// New directory with 'files/USER_SESSION_ID/'
$folder = $newDir . $folder2;

// If the file is an image
if (preg_match('/image/i', $_FILES['xfile']['type'])) {

    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . '_default.jpg';
} else {

    $tld = split(',', $_FILES['xfile']['name']);
    $tld = $tld[count($tld) - 1];
    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_FILES['xfile']['name']) . $tld;
}

// Supporting image file types
$types = Array('image/png', 'image/gif', 'image/jpeg');
// File type control
if (in_array($_FILES['xfile']['type'], $types)) {
    // Create an unique file name    
    // Uploaded file source
    $source = file_get_contents($_FILES["xfile"]["tmp_name"]);
    // Image resize
    imageresize($source, $filename, $_POST['width'], $_POST['height'], $_POST['crop'], $_POST['quality']);
} else
// If the file is not an image
if (in_array($_FILES['xfile']['type'], $types)) 
    move_uploaded_file($_FILES["xfile"]["tmp_name"], $filename);

// File path
$path = str_replace('upload.php', '', $_SERVER['SCRIPT_NAME']);

// Result data
$r->filename = $filename;
$r->path = $path;
$r->img = '<img src="' . $path . $filename . '" alt="image" />';

// Return to JSON
echo json_encode($r);

// Image resize function with php + gd2 lib
function imageresize($source, $destination, $width = 0, $height = 0, $crop = false, $quality = 80) {
    $quality = $quality ? $quality : 80;
    $image = imagecreatefromstring($source);
    if ($image) {
        // Get dimensions
        $w = imagesx($image);
        $h = imagesy($image);
        if (($width && $w > $width) || ($height && $h > $height)) {
            $ratio = $w / $h;
            if (($ratio >= 1 || $height == 0) && $width && !$crop) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } elseif ($crop && $ratio <= ($width / $height)) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } else {
                $new_width = $height * $ratio;
                $new_height = $height;
            }
        } else {
            $new_width = $w;
            $new_height = $h;
        }
        $x_mid = $new_width * .5;  //horizontal middle
        $y_mid = $new_height * .5; //vertical middle
        // Resample
        error_log('height: ' . $new_height . ' - width: ' . $new_width);
        $new = imagecreatetruecolor(round($new_width), round($new_height));
        imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $w, $h);
        // Crop
        if ($crop) {
            $crop = imagecreatetruecolor($width ? $width : $new_width, $height ? $height : $new_height);
            imagecopyresampled($crop, $new, 0, 0, ($x_mid - ($width * .5)), 0, $width, $height, $width, $height);
            //($y_mid - ($height * .5))
        }
        // Output
        // Enable interlancing [for progressive JPEG]
        imageinterlace($crop ? $crop : $new, true);

        $dext = strtolower(pathinfo($destination, PATHINFO_EXTENSION));
        if ($dext == '') {
            $dext = $ext;
            $destination .= '.' . $ext;
        }
        switch ($dext) {
            case 'jpeg':
            case 'jpg':
                imagejpeg($crop ? $crop : $new, $destination, $quality);
                break;
            case 'png':
                $pngQuality = ($quality - 100) / 11.111111;
                $pngQuality = round(abs($pngQuality));
                imagepng($crop ? $crop : $new, $destination, $pngQuality);
                break;
            case 'gif':
                imagegif($crop ? $crop : $new, $destination);
                break;
        }
        @imagedestroy($image);
        @imagedestroy($new);
        @imagedestroy($crop);
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:53:04.423

您在 imageresize 函数中有一个变量 $quality 。

# javascript - 除非我使用超时，否则 CSS 转换不起作用

> ID：14873031
> 
> 赞同：11
> 
> 时间：2013-02-14T10:46:09.720
> 
> 标签：javascript, jquery, css, css-transitions

我有几个类：`hide`is`display: none`和`transparent`is `opacity: 0`。该元素`pr_container`具有`-webkit-transition: opacity 1s`. 以下基于 JQuery 的代码使元素以动画方式出现：

```
pr_container.removeClass("hide");
setTimeout(function() { pr_container.removeClass("transparent"); }, 0); 
```

但是，当我删除`setTimeout`而只是删除第二类时，没有动画。为什么？

编辑：我使用的是最新的 Chrome，我还没有检查其他浏览器。

编辑：我尝试将两个调用放在同一个`setTimeout`回调中 - 没有动画。所以这显然是关于分离的。

编辑：这里是 jsFiddle：http: [//jsfiddle.net/WfAVj/](http://jsfiddle.net/WfAVj/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:07:26.677

如果您同时更改`display`属性，则无法进行转换。因此，为了使其工作，您必须以其他方式隐藏您的元素。例如：

```
.hide {
    height: 0;
    width: 0;
    /* overflow: hidden; padding: 0; border: none; */
} 
```

[http://jsfiddle.net/dfsq/WfAVj/1/](http://jsfiddle.net/dfsq/WfAVj/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T11:19:34.847

从一种状态到另一种状态的转换没有合理的“[曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)`display`” ，因此在当前的浏览器实现中，任何以某种方式涉及的转换`display`最终都将完全没有转换。

使用此代码：

```
pr_container.removeClass("hide");
pr_container.removeClass("transparent"); 
```

您可以想象这两个语句在单个“阻塞”队列中执行，因此浏览器实际上将元素从`class="hide transparent"`to渲染`class=""`，并且如上所述，`hide`该类实际上使任何现有转换无效。

通过使用

```
pr_container.removeClass("hide");
setTimeout(function() { pr_container.removeClass("transparent"); }, 0); 
```

您告诉浏览器“尽快，但不在同一个队列中”删除“透明”类，因此浏览器首先删除“隐藏”，然后继续。当浏览器认为它有可用资源时，会删除“透明”，因此转换不会失效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:19:23.713

只有“透明”类产生动画..“隐藏”是即时的。所以开始动画，如果需要，1秒后“隐藏”：

```
 test.addClass("transparent");
 //hide after 1 sec, when the animation is done
 setTimeout(function() {test.addClass("hide"); }, 1000);  //1000ms = 1sec 
```

[http://jsfiddle.net/WfAVj/4/](http://jsfiddle.net/WfAVj/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:24:15.763

通过使用链接问题中的建议，我制作了一个我满意的版本：

```
.test {
    -webkit-transition: visibility 1s, opacity 1s;
}

.hide {
    visibility: hidden;
}

.transparent {
    opacity: 0;
} 
```

[http://jsfiddle.net/xKgjS/](http://jsfiddle.net/xKgjS/)

编辑：现在这两个类甚至可以合并为一个！

谢谢大家！

# java - java gwt 为 IFrameElement 应用 css 样式

> ID：14873033
> 
> 赞同：1
> 
> 时间：2013-02-14T10:46:11.677
> 
> 标签：java, css, gwt

我有一个

```
IFrameElement fie; 
```

我需要应用 css 样式：

```
p{
        font-family: arial,sans-serif;
        color: #666666;
        font-size: 9px;
        text-align: left;
        line-height: 1px;
        font-weight: bolder;
} 
```

但我只是找到一种方法来获取样式而不是设置它

```
Style s = fie.getContentDocument().getBody().getStyle(); 
```

如何为此 IFrameElement 应用 css？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:18:20.917

尝试这个：

```
fie.getContentDocument().getBody().setId("myframe"); 
```

在css文件中：

```
p, .myframe p {
        font-family: arial,sans-serif;
        color: #666666;
        font-size: 9px;
        text-align: left;
        line-height: 1px;
        font-weight: bolder;
} 
```

# jquery - IE 8 jQuery 点击事件 - $(this) 导致未定义

> ID：14873039
> 
> 赞同：2
> 
> 时间：2013-02-14T10:46:36.090
> 
> 标签：jquery, html, internet-explorer-8

有一个里面有一张桌子的链接容器有点麻烦。最初我在 div 周围有一个标签（里面有表格），因为它在 HTML5 中是“允许的”，但是在 IE 6-8 中单击表格时不会重定向页面。

在这里查看一些类似的帖子，我发现问题是将块元素嵌套在 IE （令我惊讶的是）执行正确实现的内联元素中。为了解决这个问题，我添加了一个包装 div，给它一个 URL 的数据路径属性，并在 jQuery 中设置了一个点击事件。

现在的问题是单击事件有效但返回未定义。如果您单击表格内容。我猜这与我对 $(this) 的使用有关，但不是 100%。

的HTML：

```
<div class="single-event" data-path="someUrl">
   <div class="">
      <h1></h1>
      <p></p>
      <table>
          ........
      </table>
   </div>
</div> 
```

JS

```
$('.single-event').click(function () {
     window.location.href = $(this).attr('data-path');
}); 
```

请让我知道我是否可以改进我的问题，并感谢您的任何回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:04:49.077

问题可能是在分配单击处理程序时文档 dom 尚未准备好。

将赋值函数包装在文档就绪事件处理程序中，就像这样。

```
<script type="text/javascript">
    $(document).ready(function () {
         $('.single-event').click(function () {
             window.location.href = $(this).attr('data-path');
         });
    });
</script> 
```

# android - 致命错误 11 (SIGSEGV)

> ID：14873041
> 
> 赞同：1
> 
> 时间：2013-02-14T10:46:44.447
> 
> 标签：android, fatal-error, android-contentresolver

嗨，当我尝试访问存储媒体时，我遇到了致命错误......它指向这条线：

```
Cursor cursor = cr.query(Uri.parse("content://media/external/faces") 
```

# c# - 并行线程中的多个 dbcontexts，EntityException “当活动用户较少时重新运行您的语句”

> ID：14873042
> 
> 赞同：9
> 
> 时间：2013-02-14T10:46:52.203
> 
> 标签：c#, sql-server, entity-framework, parallel-processing, parallel.foreach

我`Parallel.ForEach`习惯在多个线程上工作，每次迭代都使用一个新的 EF5 DbContext，所有这些都包含在一个 TransactionScope 中，如下所示：

```
using (var transaction = new TransactionScope())
{
    int[] supplierIds;

    using (var appContext = new AppContext())
    {
        supplierIds = appContext.Suppliers.Select(s => s.Id).ToArray();
    }

    Parallel.ForEach(
        supplierIds,
        supplierId =>
    {
        using (var appContext = new AppContext())
        {
            Do some work...

            appContext.SaveChanges();                
        }
    });

    transaction.Complete();
} 
```

运行几分钟后，它会抛出一个 EntityException“底层提供程序在打开时失败”，其内部细节如下：

“SQL Server 数据库引擎的实例此时无法获取LOCK资源。当活动用户较少时重新运行您的语句。请数据库管理员检查此实例的锁和内存配置，或检查是否长时间运行交易。”

有谁知道是什么原因造成的或如何预防？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T11:59:39.913

您还可以尝试在方法中设置最大并发任务数，`Parallel.ForEach()`使用`new ParallelOptions { MaxDegreeOfParallelism = 8 }`(将 8 替换为您想要限制的任何内容。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:57:59.777

您还应该找出*为什么*您的应用程序会占用如此大量的锁？您已经围绕多个数据库连接包装了一个 TransactionScope。这可能会导致可能与之有关的分布式事务。它肯定会导致锁直到最后才被释放。改变那个。

到目前为止，您只能调高锁定限制。它不能扩展到任意数量的供应商 ID。您需要找到锁定的*原因*，而不是减轻症状。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:53:19.637

您正在运行 sql server 允许的最大锁数 - 默认情况下自动设置并由可用内存控制。

你可以

1.  手动设置 - 我完全忘记了，但谷歌是你的朋友。
2.  为您的 sql server 添加更多内存
3.  更频繁地提交您的交易。

# python - 解析包名称的 SVN 日志更改路径

> ID：14873043
> 
> 赞同：-1
> 
> 时间：2013-02-14T10:46:54.500
> 
> 标签：python, perl, svn, shell

我在 linux 中运行以下命令来为特定修订生成详细日志。

```
svn log -v -r12345 http://svn-remote.com/path 
```

输出是：

```
------------------------------------------------------------------------
r12345 | debajyoti.das@email.com | 2013-02-07 01:27:08 -0800 (Thu, 07 Feb 2013) | 1 line
Changed paths:
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.agent/src/main/java/com/companyname/cycle/agent/Main.java
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.agent/src/main/java/com/companyname/cycle/agent/bll/tasks/CycleGroupTask.java
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.agent/src/main/java/com/companyname/cycle/agent/bll/tasks/CycleProcessTaskBll.java
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.agent/src/main/java/com/companyname/cycle/agent/bll/tasks/CycleSequenceProcessTaskBll.java
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.test/src/main/java/com/companyname/cycle/test/bll/MockCycleBll.java
   M /PROJECT/CYCLE/branches/DEV_Branch/pas.cycle/src/main/java/com/companyname/pas/cycle/bll/DasCycleBll.java
   M /PROJECT/CYCLE/branches/DEV_Branch/pas.cycle/src/main/java/com/companyname/pas/cycle/dal/DasCycleDal.java

BUG ID 12345678 - BLAH IMPLEMENTATION IN PROJECT.CYCLE 
------------------------------------------------------------------------ 
```

我想解析这个日志**输出**每个文件的包名称。例如：

```
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleGroupTask.java 
```

如何编写 perl 或 python 或 shell 脚本来做到这一点，以便使用可以像这样，例如：

```
$ perl svnlog.pl 12345 > log.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:07:19.117

我认为你的java项目是maven项目：

```
 awk -F'src/main/java/' 'NF==2{split($1,a,"/");j=p=$2;sub(/.*\//,"",j);sub("/[^/]*$","",p);gsub("/",".",p);print a[2]"."a[3],p,j}' yourlog 
```

用你的例子测试：

```
kent$  cat f1
------------------------------------------------------------------------
r12345 | debajyoti.das@email.com | 2013-02-07 01:27:08 -0800 (Thu, 07 Feb 2013) | 1 line
Changed paths:
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.agent/src/main/java/com/companyname/cycle/agent/Main.java
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.agent/src/main/java/com/companyname/cycle/agent/bll/tasks/CycleGroupTask.java
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.agent/src/main/java/com/companyname/cycle/agent/bll/tasks/CycleProcessTaskBll.java
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.agent/src/main/java/com/companyname/cycle/agent/bll/tasks/CycleSequenceProcessTaskBll.java
   M /PROJECT/CYCLE/branches/DEV_Branch/cycle.test/src/main/java/com/companyname/cycle/test/bll/MockCycleBll.java
   M /PROJECT/CYCLE/branches/DEV_Branch/pas.cycle/src/main/java/com/companyname/pas/cycle/bll/DasCycleBll.java
   M /PROJECT/CYCLE/branches/DEV_Branch/pas.cycle/src/main/java/com/companyname/pas/cycle/dal/DasCycleDal.java

BUG ID 12345678 - BLAH IMPLEMENTATION IN PROJECT.CYCLE 
------------------------------------------------------------------------

kent$  awk -F'src/main/java/' 'NF==2{split($1,a,"/");j=p=$2;sub(/.*\//,"",j);sub("/[^/]*$","",p);gsub("/",".",p);print a[2]"."a[3],p,j}' f1
PROJECT.CYCLE com.companyname.cycle.agent Main.java
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleGroupTask.java
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleProcessTaskBll.java
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleSequenceProcessTaskBll.java
PROJECT.CYCLE com.companyname.cycle.test.bll MockCycleBll.java
PROJECT.CYCLE com.companyname.pas.cycle.bll DasCycleBll.java
PROJECT.CYCLE com.companyname.pas.cycle.dal DasCycleDal.java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:49:51.063

这是一个将运行`svn log`和解析输出的版本。

当然，我没有你的仓库，所以我不得不通过`cat`输入你的输出来伪造命令和输出，但它可以工作。

```
use strict;

my $revno = shift @ARGV;

die "Usage: $0: svn-revision\n" unless $revno;

my $cmd = "svn log -v -r$revno 'http://svn-remote.com/path'";

open(SVN,"$cmd |") or die "Command '$cmd' Failed : $!\n";

while(<SVN>) {
    chomp;
    if ( /^\s+\S\s\/([^\/]+\/[^\/]+).*[^\/]$/ ) {
        (my $tag = $1) =~ s!/!.!g;
        s!.*/src/main/java/!!;
        my @a =  split(/\//);
        my $file = pop @a;
        print $tag, " ",  join(".", @a), " ",  $file, "\n";
    }
} 
```

我的测试输出。

```
PROJECT.CYCLE com.companyname.cycle.agent Main.java
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleGroupTask.java
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleProcessTaskBll.java
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleSequenceProcessTaskBll.java
PROJECT.CYCLE com.companyname.cycle.test.bll MockCycleBll.java
PROJECT.CYCLE com.companyname.pas.cycle.bll DasCycleBll.java
PROJECT.CYCLE com.companyname.pas.cycle.dal DasCycleDal.java 
```

maven repo 也会有一个`src/test/java`目录：D，我想你对它们不感兴趣。

* * *

**编辑** 针对您的数据运行 Perl 的主体，基本上`my $cmd = "sh fake.sh";`从另一个问题添加会产生：

```
PROJECT.CYCLE com.companyname.cycle.agent Main.java
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleGroupTask.java
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleProcessTaskBll.java
PROJECT.CYCLE com.companyname.cycle.agent.bll.tasks CycleSequenceProcessTaskBll.java
PROJECT.CYCLE com.companyname.cycle.test.bll MockCycleBll.java
PROJECT.CYCLE com.companyname.pas.cycle.bll DasCycleBll.java
PROJECT.CYCLE com.companyname.pas.cycle.dal DasCycleDal.java
PROJECT.SHARED com.companyname.extensibility NamedExtensionPoint.java
PROJECT.SHARED com.companyname.extensibility PrePostExtensionPoint.java
PROJECT.SHARED com.companyname.extensibility.helper ExtensionConfigurationHelper.java
PROJECT.SRE com.companyname.ext DocumentGeneratorExt.java
PROJECT.SRE com.companyname.ext NamedExtensionPoint.java
PROJECT.SRE com.companyname.ext SystemDateBll.java
MODULE.CYCLE com.companyname.extensibility FileCycle1.java
MODULE.CYCLE com.companyname.extensibility FileCycle2.java 
```

这似乎是 OP 在另一个问题中想要的。

因此，问题将是在 Perl 的主体中为 each 循环一次`$revno`。

```
foreach my $revno (@ARGV)   {
        print $revno, "\n";
} 
```

**编辑**按模块将代码组的主体更改为...

```
my %info;
while(<SVN>) {
    chomp;
    if ( /^\s+\S\s\/([^\/]+\/[^\/]+).*[^\/]$/ ) {
        (my $tag = $1) =~ s!/!.!g;
        s!.*/src/main/java/!!;
        my @a =  split(/\//);
        my $file = pop @a;
        print $tag, " ",  join(".", @a), " ",  $file, "\n";
        push @{$info{$tag}}, join(" ", join(".", @a), $file);
        #push @{$info{$tag}}, $file;
    }
}

while ( my ($key, $value) = each %info )
{
    print "$key\n";
    for my $line ( @{$info{$key}} ) {
        print "\t", $line, "\n";
    }
} 
```

在之前给出的数据上产生这个。

```
PROJECT.SHARED
    com.companyname.extensibility NamedExtensionPoint.java
    com.companyname.extensibility PrePostExtensionPoint.java
    com.companyname.extensibility.helper ExtensionConfigurationHelper.java
PROJECT.CYCLE
    com.companyname.cycle.agent Main.java
    com.companyname.cycle.agent.bll.tasks CycleGroupTask.java
    com.companyname.cycle.agent.bll.tasks CycleProcessTaskBll.java
    com.companyname.cycle.agent.bll.tasks CycleSequenceProcessTaskBll.java
    com.companyname.cycle.test.bll MockCycleBll.java
    com.companyname.pas.cycle.bll DasCycleBll.java
    com.companyname.pas.cycle.dal DasCycleDal.java
MODULE.CYCLE
    com.companyname.extensibility FileCycle1.java
    com.companyname.extensibility FileCycle2.java
PROJECT.SRE
    com.companyname.ext DocumentGeneratorExt.java
    com.companyname.ext NamedExtensionPoint.java
    com.companyname.ext SystemDateBll.java 
```

这应该以某种方式帮助 OP 实现他们想要的。

# java - 识别 eclipse 所做的更改

> ID：14873046
> 
> 赞同：1
> 
> 时间：2013-02-14T10:47:03.973
> 
> 标签：java, eclipse

我正在使用资源更改侦听器来跟踪对我的项目所做的更改。在这些更改中，我想知道更改是通过 Eclipse 菜单或其他一些 Eclipse 插件完成的，还是由用户输入的。请提出一种方法来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:01:38.017

我不确定是否有直接的 API，因为[`IResourceDelta`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fresources%2FIResourceChangeListener.html)它主要实现的接口没有关于谁修改资源的方法。

您可以主要在其修改的资源上跟踪大多数更改，但“谁”修改了它对我来说也是一个悬而未决的问题。我发现这个资源在这方面很有用， [http://www.eclipse.org/articles/Article-Resource-deltas/resource-deltas.html](http://www.eclipse.org/articles/Article-Resource-deltas/resource-deltas.html)

# jsf-2 - PayPal如何从应用程序设置小计属性

> ID：14873049
> 
> 赞同：0
> 
> 时间：2013-02-14T10:47:06.793
> 
> 标签：jsf-2, paypal

我正在开发一个基于 JSF 2.0 的 Web 应用程序。该应用程序会自动生成报价以销售服务，因此小计是不可预测的。

我想集成 PayPal Payments，但我需要以动态方式设置小计值。我使用 HTML 按钮的标准集成成功地通过 payPal 沙箱进行了固定金额的支付。我还尝试将小计值添加到包含生成按钮的表单中，但它似乎不起作用。就像是：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_s-xclick"></input>
    <input type="hidden" name="hosted_button_id" value="3V8S6DNHUQ58C"></input>
    <input type="hidden" name="subtotal" value="88"> </input>
    <input type="image"
        src="https://www.sandbox.paypal.com/it_IT/IT/i/btn/btn_buynow_LG.gif"
        name="submit"
        alt="PayPal - Il metodo rapido, affidabile e innovativo per pagare e farsi pagare."></input>
    <img alt="" border="0"
        src="https://www.sandbox.paypal.com/it_IT/i/scr/pixel.gif" width="1"
        height="1"></img>
</form> 
```

有没有办法通过 HTML 标准集成从应用程序中设置小计值，优先从 bean 属性中获取值？
我是否必须使用更高级的方式进行集成？谢谢你的帮助，像往常一样.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:23:15.133

您当前使用的按钮是托管按钮。因此，您无法按照您想要的方式动态调整它。

您必须编辑您的按钮并禁用“保存在 PayPal”选项才能使其成为非托管按钮。这样您就可以直接访问实际的请求参数，并且可以相应地调整它们的值。

也就是说，它不是很安全，因为这样用户可以在使用它进行付款之前看到您的按钮代码、复制它并对其进行调整。

我建议您改用[Express Checkout API](https://www.x.com/developers/paypal/development-and-integration-guides#ec)。这包括[SetExpressCheckout](https://www.x.com/developers/paypal/documentation-tools/api/getexpresscheckoutdetails-api-operation-nvp)、[GetExpressCheckoutDetails](https://www.x.com/developers/paypal/documentation-tools/api/setexpresscheckout-api-operation-nvp)和[DoExpresscheckoutPayment](https://www.x.com/developers/paypal/documentation-tools/api/doexpresscheckoutpayment-api-operation-nvp)。由于您正在使用 Web 服务，因此这涉及更多一点，但它可以让您根据需要自定义它并且是安全的。

# sqlite - 增强当前的 SQLite 查询

> ID：14873055
> 
> 赞同：0
> 
> 时间：2013-02-14T10:47:40.723
> 
> 标签：sqlite

我继承了一个不应该更改的旧 SQLite 数据库（这是一个要求）。有很多表，但我将重点介绍其中两个：

```
songs
----------
song_id (primary autoincrement)
group_id (external)
title
audio_file_path
wasPurchased (boolean, 0/1)

groups
----------
group_id (primary autoincrement, related to songs group_id)
group_name 
```

目前，应用程序需要执行以下查询：

```
SELECT song_id,title,audio_file_path,wasPurchased,G.group_name AS groupName,
G.group_id AS groupId FROM songs AS S JOIN groups AS G ON S.group_id=G.group_id 
ORDER BY groupName DESC 
```

有什么方法可以通过相同的查询提取有多少不同的 G.group_id wasPurchased=0？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:59:36.833

```
SELECT song_id,title,audio_file_path,wasPurchased,
G.group_name AS groupName, G.group_id AS groupId,
 SUM (SELECT DISTINCT g.group_id 
      FROM yourtables/JOIN 
      WHERE wasPurchased = 0) as nb 
FROM songs AS S 
JOIN groups AS G ON S.group_id=G.group_id 
ORDER BY groupName DESC 
```

不确定这是否是最好的方法（从来没有尝试过选择总和但是......），但我认为它会对你有所帮助。

# java - OOP 使用子类的实例初始化实例变量

> ID：14873057
> 
> 赞同：0
> 
> 时间：2013-02-14T10:47:52.997
> 
> 标签：java, oop, design-patterns, null-object-pattern

我正在尝试在我的班级上实现 NullObject 设计模式`Node`：

```
 class Node{
        Node nextNode;
        char key;
        Node prevNode;

        /* 
           Would like to initialize nextNode and prevNode to instance of 
           NullNode, something like this (I know what I am doing is wrong)
        */
        Node() {
            nextNode = new NullNode();
            prevNode = new NullNode();
        }
    }

    class NullNode extends Node {
         ....
    } 
```

使用此代码，我得到一个 StackOverflowError 异常。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:10:56.200

你得到一个**StackOverflow**因为总是调用父构造函数（另见：[https](https://stackoverflow.com/a/527069/664108) ://stackoverflow.com/a/527069/664108 ）。在您的情况下，这会导致无休止的递归。

为避免这种情况，您必须在构造函数中添加一个检查`Node`并从构造函数显式调用它`NullNode`：

```
public class Node
{
    Node nextNode;
    char key;
    Node prevNode;

    Node() {
        Node(true);
    }
    Node(boolean createNullNodes) {
        if (createNullNodes) {
            nextNode = new NullNode();
            prevNode = new NullNode();
        }
    }
}

public class NullNode extends Node
{
    NullNode() {
        super(false);
    }
} 
```

NullObject 模式的一个更好的解决方案是使用接口。这消除了构造函数问题，还`nextNode`允许`prevNode`从`NullNode`.

**接口示例：**

```
public interface INode
{
    public char getKey();
    public INode getNext();
    public INode getPrev();
    // ...
}

public class Node implements INode
{
    Node nextNode;
    char key;
    Node prevNode;

    Node() {
        nextNode = new NullNode();
        prevNode = new NullNode();
    }
    public char getKey() {
        return key;
    }
    public INode getNext() {
        return nextNode;
    }
    public INode getPrev() {
        return prevNode;
    }
}

public class NullNode implements INode
{
    public char getKey() {
        return null;
    }
    public INode getNext() {
        return this;
    }
    public INode getPrev() {
        return this;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:27:46.570

尝试这个

```
 public clas Node
    {
        Node nextNode;
    char key;
    Node prevNode;

    Node() {
        this(true);
    }
    Node(boolean createNullNodes) {
        if (createNullNodes) {
            nextNode = new NullNode();
            prevNode = new NullNode();
        }

    }
}

    public class NullNode extends Node
    {
        NullNode() {
            super(false);
        }
    } 
```

要从另一个构造函数调用一个构造函数，请使用 this(args)... 你不能直接调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:10:06.417

通常我们不会在 中引用`Subclass`，`Suerclass`这会以某种方式破坏继承关系。

在您的代码中，还有更糟糕的情况会导致 a `StackoverflowException`，因为`superclass`创建了一个对象，而该对象`default constructor`又`subclass`调用了默认构造函数，`superclass`并且它将无限运行，直到您的程序崩溃。

您可以[在此处查看](http://sourcemaking.com/design_patterns/null_object/java-0)*Null 对象模式的实现*

# crystal-reports - Crystal Reports 在组页脚 2 中使用组页脚 1 中的运行总计

> ID：14873060
> 
> 赞同：0
> 
> 时间：2013-02-14T10:47:58.040
> 
> 标签：crystal-reports

我需要使用公式组 2 中组 1 中的总和来计算百分比。

公式 1（在我的标题中）：

> 打印记录时；共享编号var RunA; 运行A:=0

公式 2（在我的详细信息中）：

> ```
> whileprintingrecords;
> shared numbervar RunA;
> RunA:= RunA + {@usdequiv} 
> ```

公式 3（在我的页脚中）：

> 打印记录时；共享编号var RunA; 运行A

打印时的结果：

```
Group2             Amount         Percentage
Bank 1             1000.00         7.14%  (1000/14000)
Bank 2             2000.00        14.28%  (2000/14000)
Bank 3             4000.00        28.57%  (4000/14000)
Bank 4             7000.00        50.00%  (7000/14000)
Group1 TOTAL       14000.00 
```

我需要计算我在上面添加的百分比金额，但无法将总数（公式 3）纳入我的计算中。它只是继续阅读运行总数。

我的金额字段我无法对其进行汇总，因此必须创建运行总计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T16:54:45.077

我有同样的问题。设法更改提供报告的 ​​SQL，然后使用公式来做我想做的事。在您的情况下，公式可能是这样的：

```
count({details},{group2}) 
```

...然后在 group2 标头上使用它。

# jquery - 修复了选择区域并在 jcrop 中停止新选择

> ID：14873065
> 
> 赞同：1
> 
> 时间：2013-02-14T10:48:11.223
> 
> 标签：jquery, jcrop

我是 jQuery 的新手。我正在尝试使用 jcrop 插件裁剪图片。
这是我当前的代码：

```
jQuery(document).ready(function () {
    var width = '<%=Session["imageWidth"]%>';
    var height = '<%=Session["imageHeight"]%>';

    jQuery('#imgCrop').Jcrop({
        boxWidth: 800, 
        boxHeight: 600,
        onSelect: storeCoords,
        bgColor: 'pink',
        bgOpacity: .6,
        setSelect: [0, 0, width, height],
        aspectRatio: 1
    });

});

function storeCoords(c) {
    jQuery('#X').val(c.x);
    jQuery('#Y').val(c.y);
    jQuery('#W').val(c.w);
    jQuery('#H').val(c.h);
}; 
```

这里一切正常，但选择区域可调整大小。
为了修复选择区域并停止新选择，我应该更改什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T11:32:44.807

使用此代码

```
 jQuery(document).ready(function() {
    jQuery('#imgCrop').Jcrop({
        aspectRatio: 1,
        setSelect:   [50, 0, 300,300],
        allowResize: false,
        allowSelect: false,
        onSelect: storeCoords
        });
    });

    function storeCoords(c) {
        jQuery('#X').val(c.x);
        jQuery('#Y').val(c.y);
        jQuery('#W').val(c.w);
        jQuery('#H').val(c.h);
    }; 
```

# tipsy - Tipsy 工具提示脚本不适用于 Ajax

> ID：14873066
> 
> 赞同：1
> 
> 时间：2013-02-14T10:48:12.890
> 
> 标签：tipsy

我在我的网站上使用 Tipsy 工具提示脚本：

[脚本主页和示例](http://onehackoranother.com/projects/jquery/tipsy/)

[看脚本](http://onehackoranother.com/projects/jquery/tipsy/javascripts/jquery.tipsy.js)

它显示一些关于鼠标悬停的信息。例如，我有一个带有用户照片（缩略图）的页面，并且 onmouseover Tipsy 显示用户名和年龄。

```
<div id="up_gus" style="display:inline-block;">
    <a href="/profile.php"><img class="west" title="username showed by Tipsy" src="/foto.jpg"/>
    </a></div 
```

它工作正常，但现在我添加了 Ajax/Jquery 来加载更多照片而无需刷新页面。

```
<div id="more"><a class="l_more" id="<?php echo $pid;?>" href="#!" >Show more</a></div>

$('.l_more').live("click",function() {
var last_msg_id = $(this).attr("id");
if(last_msg_id!='end'){
$.ajax({
type: "POST",
url: "/mas.php",
data: "vid="+ last_msg_id,
beforeSend: function() {
$('a.l_more').append('<img src="../load.gif" />');
 },
success: function(html){
$("div#more").remove();
$("div#up_gus").append(html);
}
});
}
return false;
}); 
```

如果我加载更多结果（照片） Tipsy onmouseover 不显示任何内容。有什么想法不适用于 Ajax？

# asp.net - findcontrol 找不到动态添加的控件，该控件之前只是添加了一行

> ID：14873069
> 
> 赞同：5
> 
> 时间：2013-02-14T10:48:20.867
> 
> 标签：asp.net, controls, findcontrol

谁能给我解释一下？

```
CheckBox ckRequest = new CheckBox();
ckRequest.ID = "ckRequest";
ckRequest.DataBinding += new EventHandler(this.CkIsRequested_DataBinding);
container.Controls.Add(ckRequest);
Control con = container.FindControl("ckRequest"); 
```

调试显示 con 仍然为空。

调试还告诉我，conteiner.Controls 有一个 ID 为“ckRequest”的项目

怎么会这样？？？？

* * *

非常感谢您的回答。

其实我尝试以下。 [findcontrol 在 rowUpdating 事件处理程序中找不到动态创建的控件](https://stackoverflow.com/questions/14874940/findcontrol-does-not-find-dynamically-created-control-in-rowupdating-eventhandle) 这对我来说很有意义，findcontrol 仅适用于创建的页面。

在哪个时间点创建页面的可视化树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:57:18.200

`FindControl`仅当控件位于页面的可视化树中时才有效

在你的情况下，你可以试试这个

```
var checkBoxesInContainer = container.Controls.OfType<CheckBox>(); 
```

[http://msdn.microsoft.com/en-us/library/bb360913.aspx](http://msdn.microsoft.com/en-us/library/bb360913.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:22:45.230

您可以使用以下内容：

```
Control con = 
    container.Controls.Cast<Control>().First(item => item.ID == "ckRequest"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T02:07:56.803

您可能想尝试以下操作：

```
//GET THE CHECKBOXLIST
Control c = phCategories.Controls.Cast<Control>().First(item => item.ID == "cblCatID-" + catID && item.GetType().Name == "CheckBoxList");
if (c.GetType().Name == "CheckBoxList")
{
  cbl = (CheckBoxList)c;
} 
```

出于某种原因，我需要先将其转换为控件。如果我不这样做，我似乎反而抓住了一个标签（这对我来说没有意义，因为它实际上并没有抓住一个标签）。希望它可以帮助某人。

# sass - 部分指南针混合：未定义

> ID：14873073
> 
> 赞同：1
> 
> 时间：2013-02-14T10:48:34.780
> 
> 标签：sass, compass-sass, partial, mixins, partials

在我的 app.scss 中，我像这样导入指南针：

```
@import "compass/css3"; 
```

我可以使用 app.scss 中的所有 mixins

但是当我导入部分内容时：

```
@import "structure"; 
```

我想在 stucture.scss 中使用 mixins（例如`@include border-radius(4px);`）我收到以下错误：

```
error structure.scss (Line 544: Undefined mixin 'border-radius'.) 
```

编辑：

app.scss 内容：

```
@import "compass/css3";
@import "structure";

// other scss code 

.promo-front img {
    @include border-radius(4px);
} 
```

结构.scss 内容：

```
// other scss code 

// this generates error structure.scss (Line 544: Undefined mixin 'border-radius'.)
.main-container {
    @include border-radius(4px); 
} 
```

我做错了什么？

提前感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:18:45.343

好的，我需要将 structure.scss 重命名为 _structure.scss 才能正确识别为部分。

# javascript - 使用 javascript 从另一个 html 文件中获取图像的 id

> ID：14873074
> 
> 赞同：1
> 
> 时间：2013-02-14T10:48:38.040
> 
> 标签：javascript

我使用 iframe 来显示图像。这是我的代码。

索引.html

```
<html>
 <head>
    <title>Center</title
    <script type="text/javascript">
            function sample(id){
               var frameht=document.getElementById("ifrm").style.height;
               var framewd=document.getElementById("ifrm").style.width;
           }
    </script>
 </head>
 <body>
    <iframe style="width:700px;height:600px;" src="test.html" id="ifrm" onload="javascript:sample(this.id);"></iframe>
 </body>
</html> 
```

测试.html

```
<html>
<head>
    <title>Center</title>
    <script type="text/javascript">

    </script>
</head>
<body>
    <img src="14.jpg" id="img1" onload="javascript:sample();"/>
</body>
</html> 
```

我想要 index.html 中图像的 id。有可能得到吗？任何人都可以帮忙吗？请！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:19:54.480

首先获取 iframe。

```
var iframe = document.getElementById('ifrm'); 
```

**访问 iframe 的元素。**

```
var frameDoc = iframe.contentDocument || iframe.contentWindow.document; 
```

然后，通过标记名获取 id。在我们的例子中

```
var el = frameDoc.getElementsByTagName('img')[0].id; 
```

这是一个没有 iframe 的示例，让您了解如何在之后获取元素的 id：http: [//jsfiddle.net/nukec/eymq2/](http://jsfiddle.net/nukec/eymq2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:51:36.400

```
document.getElementById('ifrm').contentWindow.document.getElementById('img1'); 
```

这应该工作

```
img = document.getElementById('ifrm').contentWindow.document.getElementsByTagName('img'); 
```

img[0].id 获取动态 id

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T11:01:35.273

Insted of id 使用名称并尝试此..

```
<script>
window.frames["fName"].document.getElementById("img1");
</script>

<iframe style="width:700px;height:600px;" src="test.htm" id="ifrm" name="fName" onload="javascript:sample(this.id);"></iframe> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:01:45.580

你应该使用 jQuery

```
var imageObj= $('#myiframe').contents().find('img');
var imgId=$(imageObj).attr("id"); 
```

# jboss7.x - 在 JBoss 7 AS 上部署 Activiti

> ID：14873076
> 
> 赞同：0
> 
> 时间：2013-02-14T10:48:42.753
> 
> 标签：jboss7.x, activiti, deploying

我只是 JBoss 的“初学者”，但被要求将 Activiti 部署到其中。在“谷歌搜索”和阅读 Activiti 论坛之后，我明白这相当困难但并非不可能。我找到[了这篇文章](http://www.mastertheboss.com/activiti-bpmn/activiti-bpmn-on-jboss-as-7/page-2)，把所有的东西都写在那里，得到了关于 CDI 的错误，但我不明白我应该如何处理[Daniel Meyer 博客中的存档](https://bitbucket.org/meyerd/activiti-cdi-jbossas7.1.1-setup/src)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:19:48.207

您可以将其用作使用 Activiti 引擎的项目的骨架/示例。

只需检查代码，更改为`programmatic`or`spring`和之一`mvn war`。然后在 AS7 中部署`target/<some>.war`并查看控制台日志中的消息。您应该会看到类似“Process engine ... is up and running!”的内容。

# php - 使用 php 和 postgresql 进行分页

> ID：14873078
> 
> 赞同：0
> 
> 时间：2013-02-14T10:48:45.593
> 
> 标签：php, javascript, jquery, sql, postgresql

我在 php 文件中有一个 postgresql 查询，它返回一百多条记录。我想在使用相同查询时每页只查看 10 条记录。我正在使用的查询如下：

```
SELECT
    to_char(a.CALLDATE,'yyyymm')            AS month,
    min(a.calldate)                         AS start_time,
    max(a.calldate)                         AS end_time,
    ceil(sum(a.CALLDURATION::integer) / 60) AS minutes,
    count(DISTINCT a.IDENTIFIANT)           AS distinct_callers,
    a.zoneiddest                            AS country_code,
    b.country
FROM cdr_data a,
     COUNTRY_CODES b
WHERE
    a.CALLSUBCLASS = '002'
AND
    a.CALLCLASS = '008'
AND
    a.zoneiddest::integer > 0
AND
    substr(a.CALLEDNUMBER, 1, 2) NOT IN ('77', '78', '75', '70', '71', '41', '31', '39', '76','79')
AND
    NOT substr(a.zoneiddest , 1 ,3) IN ('254','255','256','211','257','250','256')
AND
    trim(a.zoneiddest) = trim(b.country_code)
GROUP BY
    to_char(a.CALLDATE,'yyyymm'),
    a.zoneiddest,
    b.country
ORDER BY 1 
```

我尝试过使用 JavaScript，但它不起作用。有没有办法可以编辑此查询或在 php 中执行某些操作以实现我想要的？

如果有人提供帮助，我将不胜感激，因为如果使用 php 和 mysql 进行分页，但使用 php 和 postgresql 分页时，似乎有很多解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:53:52.960

简单的解决方案是附加：

```
OFFSET 20
LIMIT 10 
```

# bash - printf "%s" 的新行

> ID：14873079
> 
> 赞同：0
> 
> 时间：2013-02-14T10:48:48.847
> 
> 标签：bash

```
#!/bin/bash

DISTRIBUTION_CENTERS=London
printf "%s" $DISTRIBUTION_CENTERS 
```

运行脚本时，伦敦会在我的用户名/主机名之前打印出来。我以为我得到了一个带有\n，“%s\n”的新行。\n 适用于整数，但不适用于字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:52:49.903

你要：

```
#!/bin/bash                                                                     

DISTRIBUTION_CENTERS=London
printf "%s\n" $DISTRIBUTION_CENTERS 
```

或者：

```
#!/bin/bash                                                                     

DISTRIBUTION_CENTERS=London
echo $DISTRIBUTION_CENTERS 
```

# ruby-on-rails - 有 ruby gems.org 的官方镜像吗？

> ID：14873083
> 
> 赞同：3
> 
> 时间：2013-02-14T10:49:09.400
> 
> 标签：ruby-on-rails, ruby, bundler

由于与 ruby​​gems.org 相关的错误，我最近在部署应用程序时遇到了麻烦，例如：

```
Fetching gem metadata from http://rubygems.org/
Error Bundler::HTTPError during request to dependency API
Fetching full source index from http://rubygems.org/
Unfortunately, a fatal error has occurred. Please see the Bundler
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks!                                                                        

~/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/http.rb:762:in `initialize'
Connection timed out - connect(2)
Errno::ETIMEDOUT 
```

gems 系统很棒，但我认为这是一个单一的故障点，当它不可用时，您无法获得最新的补丁等。有一个庞大的 Debian 存储库网络，可以根据地理位置选择镜像。宝石有类似的东西吗？如果有镜像，我怎么能确定那里的包没有被破坏？（最近也发生在 ruby​​gems.org 上）

另一件事，当我有 gem 的本地副本时，bundler 可以直接将它们传输到服务器而不从 ruby​​gems.org 获取吗？它可能会减少服务器的负载，而且可以确保您的部署可以随时工作（我知道，我可以将 gem 签入我的 git 存储库，但我不喜欢这样做）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:13:37.433

可能有 Rubygems.org 的镜像，但我没有尝试过，也不知道它们是否拥有所有的宝石。但是在您的`Gemfile`调用`source`中有一个声明，您可以在其中告诉 Bundler 查看不同的镜像。

但是有一个 gem 可以将所有 gem 镜像到您的本地系统，称为ruby​​gems [-mirror](https://github.com/rubygems/rubygems-mirror)

您可以通过 Bundler`:path`命令将某些 gem 本地安装到您的 git 中。因此，如果您想拥有一个本地副本，比如说设计，您可以这样做

```
gem 'devise', :path => 'vendor/devise' 
```

然后你在你的`vendor/devise`文件夹中克隆设计存储库并将其提交给 Git。

如果您尝试对所有 Gems 都这样做，它会很快变得非常无聊，因为只有 Rails 本身涉及数十个 gem。您可以查看 RVM Gemsets，并且有一种方法可以让捆绑程序获取所有宝石并将它们与您的应用程序捆绑在一起（抱歉，您必须查阅文档以获取更多信息，因为我还不需要）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:55:18.493

如果 gem 在那里可用，您也可以使用 github。Rubyforge 非常受欢迎。据我所知，您的 gemfile 必须正确声明，如果您有单个 ruby​​ 和/或 rails 安装，请查看是否与 gem/s 有一些版本冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:25:52.893

这个 gem 可能会解决[capistrano-strategy-copy-bundled](https://github.com/rudionrails/capistrano-strategy-copy-bundled)的问题。用法很简单：

`config/deploy.rb:`

```
require 'capistrano-strategy-copy-bundled'
set :deploy_via,    :copy_bundled 
```

您的所有 gem 都打包在本地的 tar 存档中，然后将其传输到服务器。但是有一个问题，如果您想部署带有本地扩展（如数据库驱动程序、therubyracer 等）的 gem，您需要在两台机器上拥有相同的架构和版本的依赖库（如 glibc）。

# orm - Laravel 4：如何使 Eloquent 模型中的列独一无二

> ID：14873086
> 
> 赞同：1
> 
> 时间：2013-02-14T10:49:17.493
> 
> 标签：orm, laravel, laravel-4

我有一个 Eloquent 模型`Article`，它有一个列`title_url`，应该是唯一的，所以可能不存在两个`article`相同的 s `title_url`。如果两个这样的 s 已经存在，我不想返回错误`article`，我只想`title_url`默默地改变一个。所以不是`super-article`，`title_url`而是`super-article-2`。

我怎么能在 Laravel 4 中做到这一点？也许使用[突变器](http://four.laravel.com/docs/eloquent#accessors-and-mutators)？如果是，最好的方法是什么？

请记住，我希望`title_url`每次有必要时（更新、插入）都默默地进行转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:21:44.833

[在 Laravel 4 的最新 Beta 4 版本中](https://github.com/laravel/framework)，现在有一个选项可以挂钩创建和更新事件：

> 添加了 Model::creating(Closure) 和 Model::updating(Closure) 方法，用于挂钩 Eloquent 保存事件。感谢 Phil Sturgeon 最终迫使我这样做...... :)

所以这似乎是你想要的完美契合。只需在模型中创建一个钩子`create()`，并创建一个简单的函数来检查`title_url`您要插入的 ，如果存在，将其更改为其他内容，然后插入。

# hadoop - HBase 和 Bigtable 支持单行事务

> ID：14873090
> 
> 赞同：4
> 
> 时间：2013-02-14T10:49:24.950
> 
> 标签：hadoop, nosql, hbase, bigdata, bigtable

HBase 和 Google 的 Bigtable 都支持单行事务但不支持多行是什么意思？目前我在本地文件系统之上使用 HBase；我怎么能看到这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:53:52.977

你有一行看起来像这样：

用户名：fabspro 密码：1234 account_active：1 last_login：2012-10-10 last_login_ip：135.23.15.3

例如。然后当用户登录时，您需要更新 last_login 和 last_login_ip。如果您在单个 put 操作中更新两个字段，则两个字段将同时更新。如果某个字段由于某种原因无法更新，或者更新中途失败，则不会写入任何值。这意味着无论如何，如果您阅读该行，您可以预期 last_login 和 last_login_ip 彼此一致。

# mysql - MySQL 错误 – 用户已超过“Max_questions”资源（当前值：1000）

> ID：14873094
> 
> 赞同：2
> 
> 时间：2013-02-14T10:49:43.047
> 
> 标签：mysql, ruby-on-rails

我有一个使用 MySQL 数据库的 Rails 3 应用程序。在我的应用程序测试阶段，我插入大量数据以检查我的应用程序的功能。插入大量条目后，我收到 Mysql 错误，例如，

```
Mysql2::Error: User 'Databasename' has exceeded the 'max_questions' resource (current value: 10000): SELECT  `users`.* FROM `users`  WHERE `users`.`username` = 'admin' LIMIT 1 
```

如何解决这个错误。Mysql 中是否有任何限制，如果有如何覆盖它。

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:52:27.917

出于测试目的，您可以定义它，例如：

```
SET @MAX_QUESTIONS=<your new value>; 
```

在 MySQL 中

或者：

```
update user set max_questions = 10000 where user = 'you name or root'; 
```

如果你把`0`-`max_questions`这意味着无限

注意：您可能需要重新启动 Mysql 服务器才能生效

* * *

当然你可以只刷新权限：

```
FLUSH PRIVILEGES; 
```

# c++ - “注释掉 pthreads”来编译一个库

> ID：14873104
> 
> 赞同：1
> 
> 时间：2013-02-14T10:50:11.130
> 
> 标签：c++, c, matlab, pthreads, osc

我正在尝试编译一个库*[liblo](http://liblo.sourceforge.net/)*。我正在安装它，因为它是我要安装的另一个库*[osc-mex](http://sourceforge.net/projects/oscmex/)*的必需库。为了让*liblo*在 Windows 上与*osc-mex*一起工作，我需要使用“ [pthreads commented out ”来编译](http://sourceforge.net/p/oscmex/code/4/tree/trunk/src/osc_make.m)*liblo*。

据我所知，*pthread*是与 Unix 一起使用的协议吗？无论如何，我需要删除*liblo*代码中对*pthread*的提及。但是我遇到了一个问题；代码中有多个区域提到了“pthread”。*在liblo*目录的（未编译的）源中搜索文本“pthreads”会在八个文件中产生 25 个结果：

 **```
Filename    Line #  Line text
*********************************************************************************
ChangeLog   165     * Fixed pthread resource leak, when stopping thread
NEWS        153     * Fixed pthread resource leak, when stopping server
config.h.in 18      /* Define to 1 if you have the `pthread' library (-lpthread). */
config.h.in 19      #undef HAVE_LIBPTHREAD
configure   11000   { echo "$as_me:$LINENO: checking for pthread_create in -lpthread" >&5
configure   11001   echo $ECHO_N "checking for pthread_create in -lpthread... $ECHO_C" >&6; }
configure   11002   if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then
configure   11006   LIBS="-lpthread  $LIBS"
configure   11020   char pthread_create ();
configure   11024   return pthread_create ();
configure   11047   ac_cv_lib_pthread_pthread_create=yes
configure   11052   ac_cv_lib_pthread_pthread_create=no
configure   11059   { echo "$as_me:$LINENO: result: $ac_cv_lib_pthread_pthread_create" >&5
configure   11060   echo "${ECHO_T}$ac_cv_lib_pthread_pthread_create" >&6; }
configure   11061   if test $ac_cv_lib_pthread_pthread_create = yes; then
configure   11063   #define HAVE_LIBPTHREAD 1
configure   11066   LIBS="-lpthread $LIBS"
configure.ac43      AC_CHECK_LIB([pthread], [pthread_create])
liblo.pc.in 9       Libs: -L${libdir} -llo -lpthread
libtool     4511    # Do not include libc_r directly, use -pthread flag.
libtool     4536    -mt|-mthreads|-kthread|-Kthread|-pthread|-pthreads|--thread-safe|-threads)
libtool     5030    -mt|-mthreads|-kthread|-Kthread|-pthread|-pthreads|--thread-safe|-threads)
ltmain.sh   4027    # Do not include libc_r directly, use -pthread flag.
ltmain.sh   4052    -mt|-mthreads|-kthread|-Kthread|-pthread|-pthreads|--thread-safe|-threads)
ltmain.sh   4546    -mt|-mthreads|-kthread|-Kthread|-pthread|-pthreads|--thread-safe|-threads) 
```

显然，上面的一些行已经是注释，但这里也有一些行可以通过多种不同的方式进行修改以达到相同的目的。“注释掉 pthreads”的指令是我不完全理解或不知道如何实现的。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:57:24.213

osc-mex 的链接说明参考了几年前的 liblo 版本。目前[，liblo 的 git 版本](http://liblo.git.sourceforge.net/git/gitweb.cgi?p=liblo/liblo;a=tree)应该可以在 Windows（使用 MingW）上编译而无需更改。pthread 现在是可选的。它会检测 pthread 是否可用，如果不可用，会为您“注释掉”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:34:01.000

文件中的第 18 行和第 19 行`config.h.in`似乎有一个常量`HAVE_LIBPTHREAD`，指示 pthread 库的存在/不存在。

您是否尝试编译未定义的`HAVE_LIBPTHREAD` **代码**？**

# twitter-bootstrap - Twitter Bootstrap 模态多事件触发

> ID：14873109
> 
> 赞同：10
> 
> 时间：2013-02-14T10:50:32.970
> 
> 标签：twitter-bootstrap

这是一个奇怪的问题，我已经搜索了答案，但找不到适合我的代码的答案。

**编辑**：这个问题发生在一个沉重的 Ajax 页面上，该页面没有刷新并且模态正在被重用。

请注意我的 Javascript 有点弱，所以我可能错误地处理了这个问题

我在[这里](https://groups.google.com/forum/?fromgroups=#!topic/twitter-bootstrap/kU2WOGqtr1c)和[这里发现了类似的问题](https://groups.google.com/forum/?fromgroups=#!topic/twitter-bootstrap/TANDpeyEXrs)

两者都描述了我遇到的问题，但我只是更新了隐藏的调用视图。我不绑定到按钮事件。

我定义了多个模态

```
 <div id="modal_small" class="modal hide fade in">
    </div>
    <div id="modal_large" class="modal hide fade in">
    </div> 
```

我重用这些模态。因此 modal_large 会在一秒钟内显示一个创建表单，然后它会显示一个您可以从中选择的图像列表。

我使用以下脚本渲染我的模式，传递视图以在每个实例中显示

```
 function show_modal_large(href) {
            $.get(href, function (data) {
                $('#modal_large').html(data);
                $('#modal_large').modal('show');
            });
        }; 
```

我的目标是重用这些模式。我相信这就是问题所在

在将显示模态的视图的“$(document).ready”中，我调用此脚本来绑定到模态的“隐藏”事件

```
 $('#modal_large').on('hidden', function () {
               // Make Ajax Call - THIS WORKS
    }); 
```

因此，成像您在视图上有一个列表，显示您选择的图像。然后您打开一个模式并选择更多图像。在隐藏时，我更新调用表单上的选定图像。

每件事都很好。

**问题：**

我第一次打开模式并关闭它时，会触发一次“隐藏”事件。我第二次打开和关闭模式时，“隐藏”事件是两次调用，第三次是三次调用，依此类推。如果我将模式用于具有不同“隐藏”事件的其他内容，则隐藏事件将调用**四次**新隐藏事件，**四次**调用旧隐藏事件。不久之后，我的系统就因所有的 ajax 调用而死机。

我错过了什么吗？我应该如何构建我的代码，以免发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T13:30:29.493

好的 想通了...好吧。希望此代码对其他人有用。

当我绑定到模态的“隐藏”事件时，每次创建它时，我只是添加另一个绑定和另一个调用所有以前的绑定。

所以为了克服这个问题，我摆脱了旧的模态声明

```
<div id="modal_small" class="modal hide fade in">
</div>
<div id="modal_large" class="modal hide fade in">
</div> 
```

而不是它们，我动态地创建模态，因为我需要它们，并为“隐藏”事件传递回调

```
 function show_modal_large(href, callback) {
             // create guid to name of this Modal
             var randomNum = guid();
             // create element with guid id
             var elementName = '#' + randomNum.toString();
             $('body').append("<div id=" + randomNum + " class='modal hide fade in'></div>");
             // create Modal and show
             $.get(href, function (data) {
                 $(elementName).html(data);
                 // register call back to 'hidden' event
                 $(elementName).on('hidden', function () {
                     callback();
                     // clean up after hidden
                     $(elementName).unbind();
                     $(elementName).remove();
                 });
                 $(elementName).modal('show');
             });
         };

         function s4() {
             return Math.floor((1 + Math.random()) * 0x10000)
                        .toString(16)
                        .substring(1);
         };

         function guid() {
             return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
                    s4() + '-' + s4() + s4() + s4();
         } 
```

我在[这里从 Stackoverflow 问题中获得了 Guid 创建](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)

这对我很有用。并解决了我的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-25T22:24:23.183

您也可以使用 .one 代替 .on 并且您绑定的事件只会触发一次。

# php - 如何在jquery中传递数据库ID

> ID：14873110
> 
> 赞同：0
> 
> 时间：2013-02-14T10:50:40.833
> 
> 标签：php, jquery, mysql

我想从数据库中删除一条在while循环中显示的记录，但在删除之前我想显示一个确认框。我写的代码如下。它工作正常，但要删除记录我需要传递一个我的ID已在代码中描述

------index.php 开始

```
 <!DOCTYPE html><html><head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>A jQuery Confirm Dialog Replacement with CSS3 | Tutorialzine Demo</title>

        <link href='http://fonts.googleapis.com/css?family=Cuprum&amp;subset=latin' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="css/styles.css" />
        <link rel="stylesheet" type="text/css" href="jquery.confirm/jquery.confirm.css" />

        </head>
        <body>

        <div id="page">

            <?php 

          $sql = "SELECT * FROM tablename";
          $result = db_query($sql);

            while(db_fetch($result))
            {
                ?>
                //here we need to pass the fetched record id to script.js file,but i dont know how
                <div class="item">
                <div class="delete"></div>  //here i have applied css i.e it displays wrong icon, when we click on that icon ,it is showing confirmation box. Everything is perfect in this.. but i wnat to pass and id.. im new to jquery
                </div>
                <?php
            }

            ?>
        </div>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
        <script src="jquery.confirm/jquery.confirm.js"></script>
        <script src="js/script.js"></script>

        </body>
        </html>
        <!DOCTYPE html>

        <html>
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>A jQuery Confirm Dialog Replacement with CSS3 | Tutorialzine Demo</title>

        <link href='http://fonts.googleapis.com/css?family=Cuprum&amp;subset=latin' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="css/styles.css" />
        <link rel="stylesheet" type="text/css" href="jquery.confirm/jquery.confirm.css" />

        </head>
        <body>

        <div id="page">

            <?php 

          $sql = "SELECT * FROM tablename";
          $result = db_query($sql);

            while(db_fetch($result))
            {
                ?>

                <div class="item">
                <div class="delete"></div>
                </div>
                <?php
            }

            ?>
        </div>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
        <script src="jquery.confirm/jquery.confirm.js"></script>
        <script src="js/script.js"></script>

        </body>
        </html> 
```

----index.php 结束
----jquery.confirm.js 文件开始

```
(function($){

    $.confirm = function(params){

        if($('#confirmOverlay').length){
            // A confirm is already shown on the page:
            return false;
        }

        var buttonHTML = '';
        $.each(params.buttons,function(name,obj){

            // Generating the markup for the buttons:

            buttonHTML += '<a href="#" class="button '+obj['class']+'">'+name+'<span></span></a>';

            if(!obj.action){
                obj.action = function(){};
            }
        });

        var markup = [
            '<div id="confirmOverlay">',
            '<div id="confirmBox">',
            '<h1>',params.title,'</h1>',
            '<p>',params.message,'</p>',
            '<div id="confirmButtons">',
            buttonHTML,
            '</div></div></div>'
        ].join('');

        $(markup).hide().appendTo('body').fadeIn();

        var buttons = $('#confirmBox .button'),
            i = 0;

        $.each(params.buttons,function(name,obj){
            buttons.eq(i++).click(function(){

                // Calling the action attribute when a
                // click occurs, and hiding the confirm.

                obj.action();
                $.confirm.hide();
                return false;
            });
        });
    }

    $.confirm.hide = function(){
        $('#confirmOverlay').fadeOut(function(){
            $(this).remove();
        });
    }

})(jQuery); 
```

----jquery.confirm.js 文件结束
-----script.js 文件开始

```
$(document).ready(function(){

    $('.item .delete').click(function(){

        var elem = $(this).closest('.item');

        $.confirm({
            'title'     : 'Delete Confirmation',
            'message'   : 'You are about to delete this item. <br />It cannot be restored at a later time! Continue?',
            'buttons'   : {
                'Yes'   : {
                    'class' : 'blue',
                    'action': function(){
                        elem.slideUp();
                                          //sql delete query will be written here... in where condition i need to pass the fetched record id from index.php file  in where condtion    
                    }
                },
                'No'    : {
                    'class' : 'gray',
                    'action': function(){}  // Nothing to do in this case. You can as well omit the action property.
                }
            }
        });

    });

}); 
```

-----script.js 结束

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:01:31.027

您可以使用 html 数据属性并使用[.data](http://api.jquery.com/data/) jQuery 方法检索它

在您的 HTML 中：

```
<div class="delete" data-id="{$id}"></div> 
```

在你的 Javascript

```
$('.item .delete').click(function(){

  var elem = $(this).closest('.item');
  var id = elem.data('id'); /* this is your db id */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:02:27.720

您确定要从 Javascript 发送查询吗？执行此操作的常用方法是将具有该特定 ID 的请求（通过 jQuery）发送到运行查询（服务器端）的脚本，并返回响应。

现在，既然您使用 a 添加项目 div，`while`为什么不向 div 添加一个 id 属性，其中包含来自数据库的 id，例如

```
<div id="item<?php echo $row['id'];?>" class="item">
    <div class="delete">
</div> 
```

这样，$('.item .delete').click 处理程序可以通过解析目标的`id`属性来访问项目的 id，并且您不需要将其显式传递给 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:06:13.840

在这里，您可以使用隐藏字段来保存 id 的值，然后使用 jquery 从隐藏字段中检索它。

```
while(db_fetch($result))
        {
            ?>
            //here we need to pass the fetched record id to script.js file,but i dont know how
            <input type="hidden" id="hid_id" value="<?php echo 'fetched id';?>" />
            <div class="item">
            <div class="delete"></div>  //here i have applied css i.e it displays wrong icon, when we click on that icon ,it is showing confirmation box. Everything is perfect in this.. but i wnat to pass and id.. im new to jquery
            </div>
            <?php
        }
       ?> 
```

然后在 jquery 中使用确认框时，您可以通过 id 获取值`hid_id` 。

# javascript - 淘汰赛中的 Attr 绑定问题

> ID：14873111
> 
> 赞同：1
> 
> 时间：2013-02-14T10:50:42.827
> 
> 标签：javascript, jquery, knockout.js

我正在对数据属性使用淘汰赛 attr 绑定，例如：

```
 <div data-bind="attr : { 'data-fire': Fire, 'data-age': Age }">
 </div> 
```

现在我想要的是，如果任何可观察变量即为`Fire and Age`空或为空，那么我不想添加空属性名称。因此，如果假设`Age`为空，则在应用绑定后，我不希望我的标记为：

```
 <div data-bind="attr : { 'data-fire': Fire, 'data-age': Age }"  data-age data-fire="Yes">
 </div> 
```

相反，我想删除数据时代并想要这个干净的标记：

```
 <div data-bind="attr : { 'data-fire': Fire, 'data-age': Age }" data-fire="Yes">
 </div> 
```

有没有办法在 knockout.js 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:55:45.497

您可以使用[自定义绑定自行](http://knockoutjs.com/documentation/custom-bindings.html)控制：

```
<div data-bind="addAttributes : { 'data-fire': Fire, 'data-age': Age }"></div> 
```

然后有一个处理程序：

```
ko.bindingHandlers.yourBindingName = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // This will be called when the binding is first applied to an element
        // Set up any initial state, event handlers, etc. here
    },
    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // This will be called once when the binding is first applied to an element,
        // and again whenever the associated observable changes value.
        // Update the DOM element based on the supplied values here.
    }
}; 
```

在这些方法中，只有当值不为空时，您才可以手动检查值并添加属性（例如，使用 jQuery）。

# android - Monodroid - 多个邮件附件

> ID：14873113
> 
> 赞同：2
> 
> 时间：2013-02-14T10:50:57.743
> 
> 标签：android, email, attachment

我正在尝试发送一封邮件以及附加的多个文件，但是我无法将它们添加到邮件中。我这样进行：

```
private void SendMail (List<Data> ToSend)
    {
        var Attachments = new List<Android.Net.Uri>();
        Intent i = new Intent (Android.Content.Intent.ActionSendMultiple);
        i.SetType ("message/rfc822");
        i.PutExtra (Android.Content.Intent.ExtraEmail, new String[]{"try@mail.com"});
        i.PutExtra (Android.Content.Intent.ExtraSubject, "Test");
        i.PutExtra (Android.Content.Intent.ExtraText, "Test Test...");
        foreach (var content in ToSend) {
            Java.IO.File myFile = new Java.IO.File(content.attachmentloc);
            // attachmentloc is a string containing the absolute path to the file to attach.
            var uri = Android.Net.Uri.FromFile(myFile);
            Attachments.Add (uri);
        }
        i.PutParcelableArrayListExtra(Android.Content.Intent.ExtraStream, Attachments.ToArray());
        StartActivityForResult(Intent.CreateChooser(i, "Send mail..."), 0);
    } 
```

我检查了字符串中的路径是好的..但是方法.Exists（在foreach中的Java.IO.File上使用时）返回false。可能是原因？

谢谢您的帮助。

**编辑：**

尝试添加单个附件时，它工作得很好。但是，每当我调用一个暗示将有多个附件的函数时，它都会失败。

又名：

```
Intent i = new Intent (Android.Content.Intent.ActionSend);
var uri = Android.Net.Uri.Parse (ex._FileLocation);
i.PutExtra(Intent.ExtraStream, uri); 
```

工作得很好但是更换

```
 Intent i = new Intent (Android.Content.Intent.ActionSend); 
```

经过

```
 Intent i = new Intent (Android.Content.Intent.ActionSendMultiple); 
```

导致同样的失败，更换也是如此：

```
var uri = Android.Net.Uri.Parse (ex._FileLocation);
i.PutExtra(Intent.ExtraStream, uri); 
```

经过

```
var Attachments = new List<Android.Net.Uri> ();
                foreach (var ex in ToSend) {
                var uri = Android.Net.Uri.Parse (ex._FileLocation);
                Attachments.Add (uri);
                //o
            }
            i.PutParcelableArrayListExtra (Android.Content.Intent.ExtraStream, Attachments.ToArray ()); 
```

...我正在使用默认邮件应用程序（不是 gmail） 我还尝试按照其他地方的建议将意图类型设置为“ * / * ”（不带空格）。还尝试了 AddFlags (ActivityFlags.GrantReadUriPermission);

由于它适用于单个附件，因此我知道 URI 肯定是有效的......

我真的需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:49:34.930

我个人没有找到这个问题的有效答案。我找到的唯一答案是一种解决方法：将所有文件压缩成一个 .zip 存档并将该存档作为单个附件发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:38:17.723

可能是，邮件活动没有足够的权限来读取您的文件。尝试在创建文件时添加 myFile.setReadable(true, false) ，或者在添加到 Attachments 数组之前在此处添加。

# php - ($foo) 和 (foo $foo) 作为参数的区别

> ID：14873119
> 
> 赞同：1
> 
> 时间：2013-02-14T10:51:18.133
> 
> 标签：php, methods, arguments

有人可以向我解释一下吗？

这两种方法有什么区别？

```
function some_function($foo)
    {
    } 
```

和

```
function some_function(foo $foo)
    {
    } 
```

就我而言

```
public function validate_something(notice $notice, $tok_id, $captcha) 
{
    if(something === true) {
        $notice->add('info', 'Info message');
    } else {
        $notice->add('error', 'Error message');
    }
} 
```

$notice 是类通知的对象

```
class notice {

    private $_notice = array();

    public function get_notice(){
        return $this->_notice;
    }

    public function add($type, $message) {
        $this->_notice[$type][] = $message;
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T10:53:16.107

这叫做[类型提示](http://www.php.net/language.oop5.typehinting)

```
function some_function($foo)
{
} 
```

期望在调用时将参数传递给 some_function

```
function some_function(bar $foo)
{
} 
```

期望在调用时将数据类型（类、抽象或接口或数组） bar 的参数传递给 some_function .... 如果传递的参数不是此数据类型，您将收到可捕获的致命错误

**编辑**

类型提示的价值是什么？

*   因为您的代码不需要使用`is_a`或`instance_of`验证参数。
*   减少防御性编码人员的编码。
*   函数/方法是自文档的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:54:55.313

使用这种方法：

```
function some_function($foo) {
} 
```

您期望在函数内部调用一个参数`$foo`

有了这个：

```
function some_function(foo $foo) {
} 
```

您期望调用一个参数，`$foo`但它必须是 foo 类型（foo 类的对象）

# vb.net - 在辅助线程上为引用类型对象分配一个值，然后从我的主线程处理该对象

> ID：14873120
> 
> 赞同：0
> 
> 时间：2013-02-14T10:51:19.343
> 
> 标签：vb.net, multithreading, delegates

我正在尝试在线程一上创建一个**MyReferenceTypeObject**类型且值为 null 的变量，使用委托使该线程等于线程二上**MyReferenceTypeObject**的新实例，然后在线程一上访问**MyReferenceTypeObject**的成员（在委托回调方法）。

我的代码如下：

```
Module Module1

    Delegate Sub EditReferenceTypePropertyDelegate(ByVal referenceTypeObject As MyReferenceTypeObject, ByVal numberToChangeTo As Integer)

    Sub Main()

        Dim editReferenceDelegate = New EditReferenceTypePropertyDelegate(AddressOf EditReferenceTypeProperty)

        Dim newReferenceTypeObject As MyReferenceTypeObject
        editReferenceDelegate.BeginInvoke(newReferenceTypeObject, 2, AddressOf EditReferenceCallback, newReferenceTypeObject)

        Console.ReadLine()

    End Sub

    Sub EditReferenceTypeProperty(ByVal referenceTypeObject As MyReferenceTypeObject, ByVal numberToChangeTo As Integer)

        referenceTypeObject = New MyReferenceTypeObject()
        referenceTypeObject.i = numberToChangeTo

    End Sub

    Sub EditReferenceCallback(ByVal e As IAsyncResult)

        Dim referenceObject = DirectCast(e.AsyncState, MyReferenceTypeObject)
        Console.WriteLine(referenceObject)

    End Sub

End Module

Class MyReferenceTypeObject
    Public Property i As Integer
End Class 
```

但是，**newReferenceTypeObject**作为 null 进入我的回调方法。我想我明白为什么，但问题是我需要从数据库中提取一些数据，然后我需要将这些数据传递给**newReferenceTypeObject**的构造函数，这需要几秒钟，而且我不想锁定我的 UI当这发生时。我想在线程一上创建一个**MyReferenceTypeObject**类型的字段，在线程二上实例化它（在我提取数据库的数据以传递给构造函数之后），然后在实例化后在线程一上使用对象的成员完全的。

这可能吗？我在 Visual Studio 2012 上使用 VB.Net 和 .Net 4.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:14:02.293

如果您想在长时间运行的操作期间保持 GUI 响应，我会考虑使用`Task<>`库（随附`.NET 4.0`）。这是一个简单的例子。

```
Sub Main()

        Dim instantiateTask = New Task(Of MyReferenceTypeObject)(Function()
                                                                     ' Call your database to pull the instantiation data.
                                                                     Return New MyReferenceTypeObject With {.i = 2}
                                                                 End Function)

        instantiateTask.Start() ' Start the task -> invokes a ThreadPool.Thread to do the work.
         instantiateTask.ContinueWith(Sub(x)
                                     Console.WriteLine(x.Result.I)
                                 End Sub, TaskScheduler.FromCurrentSynchronizationContext())
    End Sub 
```

. `Wait`阻塞 GUI 线程。但是，您可以使用`ContinueWith`which 是异步的，因此是非阻塞的。此外，如果您想从异步方法中更新 UI，您还需要从 GUI 线程提供`TaskScheduler`( `TaskScheduler.FromCurrentSynchronizationContex`t) 以防止跨线程异常。

# android - 在 Android 中将实时视频流式传输到服务器

> ID：14873124
> 
> 赞同：1
> 
> 时间：2013-02-14T10:51:26.463
> 
> 标签：android, video-streaming

我正在开发一个应用程序，它将视频从移动设备广播到服务器。我搜索了谷歌和许多关于堆栈溢出的问题。

我发现了一些有用的链接，例如[`spydroid-ipcamera`](http://code.google.com/p/spydroid-ipcamera/). 它工作正常。但如果两个用户打开同一个链接，则视频流将断开连接。

# c# - App.config 中的 connectionStrings configSource 不起作用

> ID：14873126
> 
> 赞同：60
> 
> 时间：2013-02-14T10:51:36.183
> 
> 标签：c#, .net, visual-studio-2012, connection-string

我正在尝试将我的连接字符串与我的 分开`App.config`，并且由于您不能像 with 那样进行转换`Web.config`，我想我可以使用该`configSource`属性指向另一个包含连接字符串的配置文件，但它似乎没有正在工作。

这有效，`App.config`：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=*snip*" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <connectionStrings>
    <add name="DefaultConnection"
      providerName="System.Data.SqlClient"
      connectionString="Server=*snip*" />
  </connectionStrings>
</configuration> 
```

但这不是，`App.config`：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=*snip*" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <connectionStrings configSource="connections.config" />      
</configuration> 
```

`connections.config`：

```
<connectionStrings>
    <add name="DefaultConnection"
      providerName="System.Data.SqlClient"
      connectionString="*snip*" />
</connectionStrings> 
```

我正在寻找最简单的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-02-14T11:32:07.220

如果您自己添加了文件，则可能未正确设置构建操作（在文件属性中）。

该`Copy to Output Directory`选项必须是`Copy if newer`or`Copy Always`以确保`.config`文件最终在`bin`目录中，否则它将不存在并且尝试加载配置将失败。

**右键单击**文件，然后单击**属性**

[![在此处输入图像描述](../Images/97a6d4d5fbc471883f996aefc773790e.png)](https://i.stack.imgur.com/T5Ydi.png)

更改为**“始终复制”**或**“如果更新则复制”**

[![在此处输入图像描述](../Images/21b8124966e30835793534ca59db987b.png)](https://i.stack.imgur.com/jNCU6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-28T20:30:04.143

我遇到了同样的问题，Oded 解决方案对我有用。但我只是想知道如何将文件“复制到输出目录选项”更改为“如果更新则复制或始终复制”，您必须

*   右键单击文件
*   选择属性
*   前进
*   然后将看到复制到输出目录，如果更新则选择复制或始终复制

这对我有帮助，我希望它也能帮助你

# c# - 在 c# .net 中合并两个列表

> ID：14873129
> 
> 赞同：-5
> 
> 时间：2013-02-14T10:51:44.880
> 
> 标签：c#, .net, linq, lambda

我正在尝试合并两个列表，如下所示

让**列表 1 包含 id、name、age**和**列表 2 包含 int、varchar、varchar**

我的最终输出必须是**id int,name varchar,age varchar**

我尝试不使用 linq 或 lamda 表达式

但我需要通过它执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:54:45.703

我的回答假设两个列表都包含`string`s，两个列表中的项目数相同，并且它们已经正确排序。

```
var result = list1.Select((x, i) => x + " " + list2[i]).ToList(); 
```

或者，您可以使用[`Enumerable.Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx)：

```
var result = list1.Zip(list2, (x, y) => x + " " + y).ToList(); 
```

样本输入：

```
var list1 = new List<string> { "id", "name", "age" };
var list2 = new List<string> { "int", "varchar", "varchar" }; 
```

输出：

```
var result = new List<string> { "id int", "name varchar", "age varchar" }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T10:54:47.213

使用`Zip`, 例如（将匹配项作为元组获取）

```
listOne.Zip(listTwo, Tuple.Create); 
```

# c# - 是否可以从 Active Directory 获取组注释？

> ID：14873132
> 
> 赞同：1
> 
> 时间：2013-02-14T10:52:05.077
> 
> 标签：c#, active-directory, directoryservices

Active Directory 组具有可通过界面使用的“Notes”属性（见下图）

![AD组接口](../Images/af6e19bef43b77c6c18c0c0dae873ac0.png)

是否可以在 C# 中检索此信息？

我似乎找不到拥有它的财产。我尝试过使用`System.DirectoryServices.DirectoryEntry`and`System.DirectoryServices.AccountManagement.GroupPrincipal`对象，但它们似乎都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:06:37.863

我不确定，但是，你检查过[`DirectoryEntry.Properties`](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.properties.aspx)房产吗？

> 获取此 DirectoryEntry 对象的 Active Directory 域服务属性。

查看这些文章；

*   [`Accessing Global Address List via System.DirectoryServices Namespace`](http://www.c-sharpcorner.com/UploadFile/frankalonzo/GlobalAddressList11262005053740AM/GlobalAddressList.aspx?ArticleID=1c1b6bf4-b468-42f6-a40b-b1f1f677dde6)
*   [`Function to Print DirectoryEntry properties`](http://geekswithblogs.net/mnf/archive/2006/04/20/75646.aspx)
*   [如何访问 GroupPrincipal 对象上的注释字段](https://stackoverflow.com/questions/323817/how-to-access-the-notes-field-on-a-groupprincipal-object/1983762#1983762)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:11:03.277

有一个名为的属性`info`，它保存该字段中显示的信息。但只有在值可用时才会将其添加到 AD 对象。

如果您想查看在此字段中包含文本的所有元素。只需打开 AD 浏览器 ( `start dsa.msc`) 并打开一个新搜索。将“查找”组合框中的选择更改为`Custom Search`，单击`Advanced`并输入文本`info=*`。现在你会得到一个包含这个字段的所有元素的列表。

# android - 如何在控制台中打印从数据库中获取的值？

> ID：14873133
> 
> 赞同：0
> 
> 时间：2013-02-14T10:52:12.523
> 
> 标签：android, mysql, eclipse, console

嗨，我开发了一个访问数据库的应用程序，我想知道它是否返回值可以这样做，即；我可以在 Eclipse 的控制台中打印从 db 获得的值吗？

有的话怎么打印。请帮忙，因为我是 android 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:56:25.257

尝试使用 Log 类。 [http://developer.android.com/reference/android/util/Log.html](http://developer.android.com/reference/android/util/Log.html)

例子：

```
Log.i("TAG", "something to display"); 
```

# regex - 正则表达式未捕获 JMeter 中的整个值

> ID：14873135
> 
> 赞同：0
> 
> 时间：2013-02-14T10:52:15.777
> 
> 标签：regex, jmeter

我想提取动作值

```
action="/wps/portal/!ut/p/b1/04_Sj9CPykssy0xPLMnMz0vMAfGjzOKd3R09TMx9DAz8TT1dDDxdnDzMTZwtjQ18TYEKIoEKDHAARwNC-sP1o_Aq8TSHKsBjhZ9Hfm6qfkFuhEGWiaMiALSXEgg!/pw/Z7_CGAH47L00O5ID0IDBH74C930E2/act/id=0/p=action=wps.portlets.login/222093291909/=/#Z7_CGAH47L00O5ID0IDBH74C930E2" 
```

使用的正则表达式：-

```
action="(.+?)" 
```

它只返回值：

```
"/wps/portal/!ut/p/b1/04_Sj9CPykssy0xPLMnMz0vMAfGjzOKd3R09TMx9DAz8TT1dDDxdnDzMTZwtjQ18TYEKIoEKDHAARwNC-sP1o_Aq8TSHKsBjhZ9Hfm6qfkFuhEGWiaMiALSXEgg!/pw/Z7_CGAH47L00O5ID0IDBH74C930E2/act/id=0/p=action=wps.portlets.login/222001304055/=/" 
```

`#Z7_CGAH47L00O5ID0IDBH74C930E2`提取的值中缺少

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:38:54.400

我得到了答案....实际上我做错了。action="([^"]+)# 解决了我的问题。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:09:51.940

来自手册：http: [//jmeter.apache.org/usermanual/regular_expressions.html](http://jmeter.apache.org/usermanual/regular_expressions.html)

你试过了吗：

```
action="([^"]+)" 
```

# android - 将函数传递给全局 AsyncTask Android

> ID：14873137
> 
> 赞同：1
> 
> 时间：2013-02-14T10:52:28.720
> 
> 标签：android, android-asynctask

我正在尝试创建一个全局操作文件，在该文件中我可以在应用程序的任何位置全局调用某些函数。到目前为止，我已经让它与函数等一起工作，但现在我想做的是把一个标准的 AsyncTask 放入我的全局操作中，并从我的 Activity 传递它的函数/空隙，所以我想传递一个函数来运行背景和完成后运行的功能。有人知道怎么做吗？并且还建议我在后台线程上运行多个函数我是创建一个 AsyncTask 并输入多个函数还是创建多个 AsyncTask？

这是我迄今为止在全球范围内设法做的事情以及我目前如何实现我的 Asynctask 的示例。只是重申一下，我正在尝试将 asynctask 移动到全局操作中并使其尽可能可重用

在我的全局操作中，我创建了一个函数，该函数制定一个 URL 并将发布变量发送到该 URL，然后反馈一个 JSON 响应。然后在我的活动中，我创建了一个函数来调用该请求，然后记录响应

我的全球行动

```
 public final static JSONObject startAPICallRequest(Context activityContext, String requestReference, String callLocation, Map<String, String> postVarsMap, Map<String, String> getVarsMap){

            long unixTimeStamp = System.currentTimeMillis() / 1000L;

            StringBuilder extraGetVarsString = new StringBuilder();
            if(getVarsMap != null){
                Map<String, String> map = (Map)getVarsMap;
                for (Entry<String, String> entry : map.entrySet()) {
                    extraGetVarsString.append("&" + entry.getKey() + "=" + entry.getValue());
                    extraGetVarsString.toString();
                }
            }

            String appVersion = null;

            try {
                appVersion = activityContext.getPackageManager().getPackageInfo(activityContext.getPackageName(), 0).versionName;

            } catch (NameNotFoundException e) {
                e.printStackTrace();

                appVersion = activityContext.getResources().getString(R.string.appVersion);
            }
            String getVarsString = "?timestamp=" + unixTimeStamp + "&app_version=" + appVersion + extraGetVarsString;
            String apiLocation = activityContext.getResources().getString(R.string.apiLocation);
            String fullAPIURL = apiLocation + callLocation + getVarsString;

            Log.v("globals", "fullAPIURL=" + fullAPIURL);   

            String api_key = activityContext.getResources().getString(R.string.apiKey);
            String api_user = activityContext.getResources().getString(R.string.apiUser);
            String request_token = returnSHAFromString(api_key, fullAPIURL);
            String device_id = returnStringFromPreference(activityContext,"device_id");
            String user_token = returnStringFromPreference(activityContext,"user_token");

            List<NameValuePair> postVarsList = new ArrayList<NameValuePair>();
            postVarsList.add(new BasicNameValuePair("request_token", request_token));
            postVarsList.add(new BasicNameValuePair("api_user", api_user));
            postVarsList.add(new BasicNameValuePair("device_id", device_id));
            postVarsList.add(new BasicNameValuePair("user_token", user_token));

            if(postVarsMap != null){
                Map<String, String> map = (Map)postVarsMap;
                for (Entry<String, String> entry : map.entrySet()) {
                    postVarsList.add(new BasicNameValuePair(entry.getKey(), entry.getValue()));
                }
            }

            JSONObject responseJSON = null;

            try {
                HttpClient client = new DefaultHttpClient();
                HttpPost post = new HttpPost(fullAPIURL);
                post.setEntity (new UrlEncodedFormEntity(postVarsList));

                HttpResponse response = client.execute(post);
                BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                String jsonResponse = reader.readLine();

                Log.v("globals", "postList =" + postVarsList );

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 

            return responseJSON;

        } 
```

我的活动

```
public void apiCall(){
        responseJSON = GlobalActions.startAPICallRequest(this, "login", "my-network/", null, null);
    }

  public class PostTask extends AsyncTask<Void, String, Boolean> {

        protected void onPreExecute() {
            super.onPreExecute();

        }

        @Override
        protected Boolean doInBackground(Void... params) {

            apiCall();
            boolean result = false;
            publishProgress("progress");

            return result;
        }

        protected void onProgressUpdate(String... progress) {
            StringBuilder str = new StringBuilder();
                for (int i = 1; i < progress.length; i++) {
                    str.append(progress[i] + " ");

                }
        }

            @Override
        protected void onPostExecute(Boolean result) {
            super.onPostExecute(result);
            checkLoginData();
          }
    }

  public void checkLoginData(){

      Log.v("IntroLoader", "responseJSON = " + responseJSON);
      Intent register = new Intent(getApplicationContext(), LoginForm.class);
      startActivity(register);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:19:15.707

用于调用 REST API方法`AsyncTask`并不是真正正确的方法。您的代码有两个问题：

*   无法保证您的 API 调用将在 Activity 关闭时完成，因为进程可能会被杀死
*   您有内存泄漏，因为`PostTask`即使 Activity 已经被销毁也可以持有 Activity 引用

考虑使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)发出后台请求，例如[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)用于处理`Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:20:20.123

看起来你需要一个 Handler 和一个 Looper。您将能够 post() 和 postDelayed()。[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

另请参阅： [AsyncTask 在概念上真的存在缺陷还是我只是遗漏了什么？](https://stackoverflow.com/questions/3357477/is-asynctask-really-conceptually-flawed-or-am-i-just-missing-something)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:53:00.723

我不是 Java 专家，但我认为您不会在 Java 中传递函数。为了简化问题，您要做的是在 AsyncTask 完成时调用 Activity 类中的函数？

# elgg - Elgg，如何获得所有动作？

> ID：14873138
> 
> 赞同：0
> 
> 时间：2013-02-14T10:52:28.167
> 
> 标签：elgg

我需要注册 elgg 框架中的操作事件（例如发帖或添加朋友）有没有办法这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T01:29:34.130

在捆绑的 Developer Tools 插件中，您可以检查所有已注册的操作、[事件](http://docs.elgg.org/wiki/Elgg_Events)和[插件挂钩](http://docs.elgg.org/wiki/Plugin_Hooks)以及绑定到它们的处理程序函数。您可以使用 elgg_register_event_handler 和 elgg_register_plugin_hook_handler 之类的函数来注册发生的事件/挂钩的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T08:55:20.270

可以通过此 API 将诸如发布博客或发表评论之类的操作注册到 Elgg 操作系统中（最终以数组形式保存在 $CONFIG->actions 中）：

```
elgg_register_action($action, $filename = "", ...) 
```

注册动作后，您可以通过 URL [http://elggsite.org/action/action_name/](http://elggsite.org/action/action_name/)通过表单 post 或 ajax 执行它。

action_name url 段对应于 elgg_register_action() API 中传递的第一个参数。

此外，您可以通过以下方式转储所有注册到 Elgg 中的操作

```
var_dump($CONFIG->actions); 
```

Elgg 完成启动后。

# xamarin.android - 如何使用 mvvmcross vnext 中的 MvxPictureChooserTask 拍照？

> ID：14873140
> 
> 赞同：1
> 
> 时间：2013-02-14T10:52:30.170
> 
> 标签：xamarin.android, mvvmcross

我想从相机拍照并在屏幕上显示。我看到这篇文章[Take picture mvvmcross monodroid](https://stackoverflow.com/questions/13475896/need-an-example-of-take-a-picture-with-monodroid-and-mvvmcross)但这不是 vnext 版本。（我没有 Cirrious.MvvmCross.Interfaces.Platform.Tasks 资源）

有人可以帮我在我的应用程序中实现这个功能吗？

* * *

使用 mvvmcross vNext 和 monodroid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:01:55.270

图片选择（相机和库）接口已移至 vNext 的插件中，因此您需要：

*   在 ViewModel 项目中引用 Cirrious.MvvmCross.Plugins.PictureChooser
*   在您的 Droid UI 项目中引用 Cirrious.MvvmCross.Plugins.PictureChooser.Droid
*   确保在使用 PictureChooser 插件之前调用 EnsureLoaded

除此之外，实际代码应该与 Master 中的代码相同（我认为）。

* * *

其他可能有用的链接是

*   [使用 mvvmcross 和 mono touch 将照片上传到 web 服务](https://stackoverflow.com/questions/13958665/uploading-photo-to-a-webservice-with-mvvmcross-and-mono-touch)
*   [在 WP 上使用 MvvmCross 拍摄图像并显示它们的问题](https://stackoverflow.com/questions/13725439/issues-taking-images-and-showing-them-with-mvvmcross-on-wp)
*   [需要一个用 MonoDroid 和 MVVMCross 拍照的例子](https://stackoverflow.com/questions/13475896/need-an-example-of-take-a-picture-with-monodroid-and-mvvmcross)
*   [https://github.com/Redth/WshLst/](https://github.com/Redth/WshLst/) - 改用 Xam.Mobile

* * *

希望看到在此发布的样本:)

# mysql - 在mysql视图中隐藏重复值

> ID：14873142
> 
> 赞同：0
> 
> 时间：2013-02-14T10:52:42.763
> 
> 标签：mysql, duplicates, rows

我想知道这种情况是否可行`mysql`：

2张桌子，`invoiceheader`和`invoicedetails`

在`invoiceheader`表中，我有 2 条记录：`invoiceno = 1`和`invoiceno = 2`.
在`invoice details`表中我有 3 条记录：
`item, desc, cost`
001，纸，25.95
002，笔，15.99
003，键盘，259.51

当我加入这两个表时，我得到以下信息：

```
InvoiceNo, item, desc, value
row 1: 1, 001, paper, 25.95
row 2: 1, 002, pen, 15.99
row 3: 1, 003, keyboard, 259.51
row 4: 2, 001, paper, 25.95
row 5: 2, 003, keyboard, 259.51 
```

是否可以只显示`invoice no. 1`在第 1 行，但在第 2 行和第 3 行，不再显示该发票的发票编号，然后再次显示发票 2 的第一条记录，而不显示发票 2 的其余部分？
像这样：

```
row 1: 1, 001, paper, 25.95
row 2:    002, pen, 15.99
row 3:    003, keyboard, 259.51
row 4: 2, 001, paper, 25.95
row 5:    003, keyboard, 259.51 
```

# java - java DSP合成器的奇怪行为

> ID：14873143
> 
> 赞同：1
> 
> 时间：2013-02-14T10:52:44.307
> 
> 标签：java, audio, signal-processing, sound-synthesis

我正在尝试使用 javax.sound.sampled.SourceDataLine 播放保存在字节数组中的信号。我正在尝试开始播放简单的正弦波。对于某些频率（例如 1000Hz、400Hz），它运行良好，但对于其他频率（1001、440），我只会听到几乎无声的嗡嗡声。采样率肯定足够高以防止混叠（16Khz）。有任何想法吗 ？干杯。

```
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.SourceDataLine;

public class Player
{

    private static float SAMPLE_RATE = 16000;

    public static void main(String[] args)
    {
        playSound();
    }

    private static void playSound()
    {
        try
        {
            final AudioFormat audioFormat = new AudioFormat( SAMPLE_RATE, 8, 1, true,  true );
            SourceDataLine line = AudioSystem.getSourceDataLine( audioFormat );
            line.open( audioFormat );
            line.start();
        /* the last argument here is the frequency in Hz. works well with 1000, but with 1001 I get week and pitchless clicking sound sound*/
            byte[] signal = smpSin( 1, 1, 1000 );
            play( line, signal );
            line.drain();
            line.close();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    private static byte[] smpSin(double lenInSec, double amp, double signalFreq)
    {
        int len = (int)(SAMPLE_RATE * lenInSec);
        byte[] out = new byte[len];
        for (int i = 0; i < out.length; i++)
        {
            out[i] = (byte)(amp * Math.sin( ((2.0 * Math.PI * signalFreq) *  ((double)i)) / SAMPLE_RATE ));
        }
        return out;
    }

    private static void play(SourceDataLine line, byte[] array)
    {
        line.write( array, 0, array.length );
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:34:33.163

您没有在缓冲区调用之间保存正弦波的相位。因此，任何相位不连续都会在调用 play() 时引起嗡嗡声。没有嗡嗡声的频率恰好在您的默认开始阶段结束。

# android - 选择打开文件的正确方法

> ID：14873149
> 
> 赞同：1
> 
> 时间：2013-02-14T10:52:56.487
> 
> 标签：android, file, uri, filechooser

我正在使用这个意图打开一个选择器来选择一个文件：

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setDataAndType(Uri.parse(getExternalFilesDir(null).toString()), "*/*");
intent.addCategory(Intent.CATEGORY_OPENABLE);
Intent chooser = Intent.createChooser(intent, "Choose File");
startActivityForResult(chooser, FILE_SELECT); 
```

我不完全理解它，但它有效。我是从网上
的一些例子里复制过来的 结果是一个uri，但是我发现uri的处理，也是从例子里复制过来的，太麻烦了

```
if(uri != null) {
    if("content".equalsIgnoreCase(uri.getScheme())) {
        String[] projection = {"_data"};
        Cursor cursor = null;
        try {
            cursor = context.getContentResolver().query(uri, projection, null, null, null);
            int column_index = cursor.getColumnIndexOrThrow("_data");
            if(cursor.moveToFirst()) {
                return cursor.getString(column_index);
            }
        }
        catch (Exception e) {}
    } else if("file".equalsIgnoreCase(uri.getScheme())) {
        return uri.getPath();
    }
} 
```

**这是让用户选择文件并获取其路径的最简单方法吗？**
为什么我需要检查 uri 是否为“内容”？我只想打开用户在意图中选择的文本或压缩文件。
我可以忽略“内容”检查，只假设“文件”并简单地使用`uri.getPath()`吗？

编辑 I：有没有办法强制选择 uri 方案“文件”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:04:36.157

是的。这是对的。您基本上是在开始打算访问本机应用程序。在这种情况下是文件系统。下一个将是 onActivityResultData() 的一部分，然后它将在意图上使用 uri 并获取已选择的文件的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T22:41:59.707

我想知道 Android 是否没有试图将我们从文件路径推向 Uris。尝试类似：

```
InputStream inputStream=contentResolver.openInputStream(uri);
InputStreamReader file = new InputStreamReader(inputStream);
int size = file.read(text,0,mMaxLen); 
```

# java - 如何替换片段运行时间

> ID：14873156
> 
> 赞同：3
> 
> 时间：2013-02-14T10:53:14.983
> 
> 标签：java, android, android-layout, android-fragments, android-widget

我想在 Grid 和 List 项目的项目点击上添加和替换 Fragment-1 上的 Fragment 和 Fragment-2 上的 Frame 布局。

我创建了 main.xml 类

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="0dp"
    android:layout_weight="1"
    android:orientation="vertical"
    android:layout_height="fill_parent" >

    <fragment
        android:id="@+id/fragment1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        class="com.example.fragment.Fragment1" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#000000" />

    <fragment
        android:id="@+id/fragment2"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        class="com.example.fragment.Fragment2" />
</LinearLayout>

<View
    android:layout_width="1dp"
    android:layout_height="fill_parent"
    android:background="#000000" />

<FrameLayout
    android:id="@+id/fragment3"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="2"/> 
```

这是我的 fragment_1.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingLeft="8dp"
android:paddingRight="8dp" >

<GridView
    android:id="@+id/Grid1"
    android:layout_width="match_parent"
    android:numColumns="auto_fit"
    android:columnWidth="100dp"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:drawSelectorOnTop="false" /> 
```

这是我的 row_fragment1_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_margin="15dp"
android:orientation="vertical" >

<ImageView
    android:id="@+id/img_view"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:background="#CCCCCC"
    android:textSize="16sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/text2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="16sp" /> 
```

和 fragment_3.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
android:orientation="vertical" >

<TextView
    android:id="@+id/tv_fragment3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="22sp"
    android:gravity="center"
    android:text="This is 3rd Fragment" /> 
```

这是我的 Main.xml

```
public class Main extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

这是 Fragment1.class

```
public class Fragment1 extends Fragment implements OnItemClickListener
{
    Activity myActivity;
    GridView mGridView; 
    private String ListItem[] = {"Item 1","Item 2","Item 3","Item 4","Item 5","Item 6","Item 7"};
    private int imgID[] = {R.drawable.admin_access_rule,
            R.drawable.admin_backup,R.drawable.admin_browsesite,
            R.drawable.admin_comment_post,R.drawable.admin_content,
            R.drawable.admin_content_type,R.drawable.admin_logout,};

    @Override
    public void onAttach(Activity activity) 
    {
        super.onAttach(activity);
        this.myActivity = activity;
        Toast.makeText(activity.getApplicationContext(), "On Attach", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        Toast.makeText(myActivity.getApplicationContext(), "On Create", Toast.LENGTH_SHORT).show();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
        Toast.makeText(myActivity.getApplicationContext(), "On Create View", Toast.LENGTH_SHORT).show();

        View view = inflater.inflate(R.layout.fragment_1,container, false);
        mGridView = (GridView)view.findViewById(R.id.Grid1);

        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) 
    {
        Toast.makeText(myActivity.getApplicationContext(), "On Activity Created", Toast.LENGTH_SHORT).show();
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public void onStart() 
    {
        super.onStart();
        mGridView.setAdapter(new GridBaseAdapter(myActivity));
        mGridView.setOnItemClickListener(this);
    }

    private class GridBaseAdapter extends BaseAdapter 
    {
        LayoutInflater mLayoutInflater = null;
        public GridBaseAdapter(Context mContext) 
        {
            mContext = myActivity;
            mLayoutInflater = LayoutInflater.from(mContext);
        }

        @Override
        public int getCount() 
    {
        return ListItem.length;
    }

    @Override
    public Object getItem(int position) 
    {
        return null;
    }

    @Override
    public long getItemId(int position) 
    {
        return ListItem.length;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) 
    {

        if(convertView == null) 
        {
            convertView = mLayoutInflater.inflate(R.layout.row_fragment_list, null);
        }

        ImageView mImageView = (ImageView) convertView.findViewById(R.id.img_view);
        mImageView.setImageResource(imgID[position]);

        TextView tvUserEmail = (TextView) convertView.findViewById(R.id.text2);
        tvUserEmail.setText("Sub " +ListItem[position]);            

        return convertView;
    }
}

@Override
public void onItemClick(AdapterView<?> arg0, View view, int position, long id) 
{
    TextView txt3 = (TextView)myActivity.findViewById(R.id.tv_fragment3);
    txt3.setText("1st Fragment's : " + position +" Item Clicked");
}
} 
```

我的 Fragment2.class

```
public class Fragment2 extends ListFragment
{
    Activity myActivity;
    private String ListItem[] = {"Item 1","Item 2","Item 3","Item 4","Item 5","Item 6","Item 6","Item 7"};

@Override
public void onAttach(Activity activity) 
{
    super.onAttach(activity);
    this.myActivity = activity;
    Toast.makeText(activity.getApplicationContext(), "On Attach", Toast.LENGTH_SHORT).show();
}

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    Toast.makeText(myActivity.getApplicationContext(), "On Create", Toast.LENGTH_SHORT).show();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    Toast.makeText(myActivity.getApplicationContext(), "On Create View", Toast.LENGTH_SHORT).show();

     /** Creating an array adapter to store the list of countries **/
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(inflater.getContext(), android.R.layout.simple_list_item_1,ListItem);
    /** Setting the list adapter for the ListFragment */
    setListAdapter(adapter);

    return super.onCreateView(inflater, container, savedInstanceState);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    Toast.makeText(myActivity.getApplicationContext(), "On Activity Created", Toast.LENGTH_SHORT).show();
    super.onActivityCreated(savedInstanceState);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) 
{
    Toast.makeText(myActivity.getApplicationContext(), position +" Item Clicked", Toast.LENGTH_SHORT).show();
    TextView txt3 = (TextView)myActivity.findViewById(R.id.tv_fragment3);
    txt3.setText("2nd Fragment's : " + position +" Item Clicked");
    super.onListItemClick(l, v, position, id);
}
} 
```

最后我的 Fragment3.class

```
public class Fragment3 extends Fragment
{
Activity myActivity;
TextView txt_view;  
@Override
public void onAttach(Activity activity) 
{
    super.onAttach(activity);
    this.myActivity = activity;
    Toast.makeText(activity.getApplicationContext(), "On Attach", Toast.LENGTH_SHORT).show();
}

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    Toast.makeText(myActivity.getApplicationContext(), "On Create", Toast.LENGTH_SHORT).show();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    Toast.makeText(myActivity.getApplicationContext(), "On Create View", Toast.LENGTH_SHORT).show();
    View view = inflater.inflate(R.layout.fragment_3,container, false);
    txt_view = (TextView)view.findViewById(R.id.tv_fragment3);
    return view;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    Toast.makeText(myActivity.getApplicationContext(), "On Activity Created", Toast.LENGTH_SHORT).show();
    super.onActivityCreated(savedInstanceState);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:00:08.690

使片段公开您的活动可以附加到的接口。该事件应在需要时发生（例如，单击列表项）。然后，活动应该将片段的实例放在它应该在的地方，例如：

```
// fragment is an instance of the fragment you want to show
final FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
transaction.replace(R.id.fragment3, fragment);
transaction.commit(); 
```

# maven - 我可以使用 Maven 依赖项触发 Jenkins 作业吗？

> ID：14873159
> 
> 赞同：8
> 
> 时间：2013-02-14T10:53:30.050
> 
> 标签：maven, triggers, jenkins, dependencies, pom.xml

我有多个使用 Maven 构建的 Jenkins 作业：

```
Job 1: Builds WebApp and deploys war to artifactory
Job 2: Builds Core and deploys jar to artifactory 
```

WebApp 依赖于 Core。

Jenkins 是否可以解析 POM，看到 WebApp 对 Core 有这种依赖关系，从而在构建 WebApp 之前触发 Job 2？这将确保 WebApp 使用最新的 Core.jar

我可以通过 Jenkins Parameterized Trigger 插件的 Pre-Steps 功能实现这种机制，但理想情况下我希望从 POM 处理这个。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T12:53:44.027

就在这里。

1.  您需要将作业设置为 Maven 作业

![在此处输入图像描述](../Images/78d18f11691f3033605e38664fae115c.png)

2.  在作业 A 中选中复选框：在构建快照依赖项时构建。

![在此处输入图像描述](../Images/479e8927167b5a9686ac3b96ec88d80f.png)

显然，这仅在依赖项是快照依赖项时才有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T15:08:14.187

另一种选择是使用[Maven 依赖更新触发器](https://wiki.jenkins-ci.org/display/JENKINS/Maven+Dependency+Update+trigger)插件。这是如果您使用自由式作业而不是 Maven 作业类型。

# python - 无法遍历字符串并在 python 中收集字符串列表。打字错误？

> ID：14873161
> 
> 赞同：0
> 
> 时间：2013-02-14T10:53:32.890
> 
> 标签：python, string, int, typeerror

我希望能够收集一个字符串列表，该列表将较大的字符串除以标记 ',

但是，我不断收到此错误：

```
TypeError: string indices must be integers, not str 
```

如果有人可以看一下，这是我的代码

```
for f in phonebook:
    print f
    if phonebook[f] + phonebook[f+1] == "'," :
        lineString = phonebook[startpoint:(f+1)]
        arrayOfStrings[j] = lineString
        startpoint = f+2
        j = j+1 #iterate through the array 

return arrayOfStrings 
```

我最终希望代码的示例如下：

打印 arrayOfStrings[1]

+445557284

打印 arrayOfStrings[4]

+445558928 等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:57:16.387

Every`f`将成为列表中的字符串之一`phonebook`。如您所见，它是一个列表，因此需要按整数索引。

你想要的是`enumerate`

```
for idx, val in enumerate(phonebook):
  if phonebook[idx] + phonebook[idx+1] == "'," 
```

您还应该确保检查您的界限，否则您将在这里超出列表的末尾！

还有一个`pairwise`你可以实现的配方：

```
from itertools import tee, izip
def pairwise(iterable):
  "s -> (s0,s1), (s1,s2), (s2, s3), ..."
  a, b = tee(iterable)
  next(b, None)
  return izip(a, b)

for a, b in pairwise(phonebook):
  if a + b == "',": 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:59:55.953

`f`不是 的索引`phonebook`，它是***来自****的值 **`phonebook`*****。如果您需要一个索引，请使用`enumerate`将该索引添加到您的循环中。因为您也在查看*下*一项`phonebook`，所以只循环除最后一个值之外的所有值：**

 **```
for i, char in enumerate(phonebook[:-1]):
    if char + phonebook[i + 1] == "',":
        lineString = phonebook[startpoint:i + 1]
        arrayOfStrings[j] = lineString
        startpoint = i + 2
        j += 1 
```

在这种情况下，您甚至可以`enumerate`从 1 开始轻松偏移：

```
for next_index, char in enumerate(phonebook[:-1], 1):
    if char + phonebook[next_index] == "',":
        lineString = phonebook[startpoint:next_index]
        arrayOfStrings[j] = lineString
        startpoint = next_index + 1
        j += 1 
```**

# vbscript - 使用VB脚本读取xml节点

> ID：14873165
> 
> 赞同：0
> 
> 时间：2013-02-14T10:53:48.870
> 
> 标签：vbscript, xml-parsing, doctype

我有一个要使用 VBScript（技术限制）读取的 xml 文件。下面是代码和xml文件。如果不涉及 DTD 元素，我可以读取该文件，但该代码不适用于具有 DTD 和 xml 样式元素的文件。

代码-

```
Dim xmlDoc1:Set xmlDoc1 = CreateObject("MSXML2.DomDocument")
xmlDoc1.async=False
xmlDoc1.load "C:\ABC.xml"
Dim xmlTCID:Set xmlTCID = xmlDoc1.selectNodes("//*")
For nNodeCount = 0 To xmlTCID.length
MsgBox(xmlTCID(nNodeCount).nodeName)
Next 
```

ABC.xml -

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE RESULT SYSTEM "Result.dtd"[]>
<?xml-stylesheet type="text/xsl" href="Result.xsl"?>
<SUMMARY>
<TITLE>Test</TITLE>
</SUMMARY>
<IDS>
    <DATA>
      <NAME>A</NAME>
      <VALUE>PASS</VALUE>
    </DATA>
    <DATA>
      <NAME>B</NAME>
      <VALUE>PASS</VALUE>
    </DATA
    <DATA>
       <NAME>C</NAME>
        <VALUE>FAIL</VALUE>
      </DATA
   </IDS>   
    <IDS>
     <DATA>
       <NAME>A</NAME>
        <VALUE>PASS</VALUE>
     </DATA>
     <DATA>
         <NAME>B</NAME>
         <VALUE>FAIL</VALUE>
      </DATA
  </IDS> 
```

注意 - 如果我避免 -

```
<!DOCTYPE RESULT SYSTEM "Result.dtd"[]>
<?xml-stylesheet type="text/xsl" href="Result.xsl"?> 
```

上面的代码能够读取节点，但上面两行在 xml 文件中，它给出了以下错误 -

![在此处输入图像描述](../Images/0d8a3e1ec81d221797f2881d88bec0db.png)

要求 - 我需要为每个 IDS 节点读取带有 FAIL 的最后一个 DATA 节点的名称。

任何关于如何使代码工作的建议，即使是 -

```
<!DOCTYPE RESULT SYSTEM "Result.dtd"[]>
<?xml-stylesheet type="text/xsl" href="Result.xsl"?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:19:23.913

由于您的 XML 存在问题 - 不止一个顶级元素，miising ">" - 将[ProhibitDTD 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762632%28v=vs.85%29.aspx)设置为`False`不会解决您的所有任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:43:56.993

```
xmlDoc.validateOnParse=False 
```

为我工作。

# android - Phonegap/Cordova 文件 API。卸载时删除文件

> ID：14873166
> 
> 赞同：4
> 
> 时间：2013-02-14T10:53:50.430
> 
> 标签：android, cordova

我正在构建一个 Phonegap/Cordova 应用程序，它下载一些文件并将它们保存在设备上。为此，我使用 File API。

```
window.requestFileSystem(LocalFileSystem.PERSISTENT,
    0,
    function (fileSystem) {
        rootPath = fileSystem.root.fullPath;
    }, 
    fail
); 
```

在 iOS 上，这将设置`rootPath`为应用程序的私有目录，这很好。在 Android 上，这将设置`rootPath`为外部存储的根目录，这有点问题，因为这些文件不绑定到应用程序，并且在删除应用程序时不会被删除。据我了解，在 Android 上执行此操作的正确方法是使用`getExternalFilesDir`. 如何`getExternalFilesDir`通过Phonegap获得功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:52:12.267

您想通过 JS 请求外部文件目录。

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
    function (fileSystem) {
        fileSystem.root.getDirectory("Android/data/com.my.app/files", 
            {create: true, exclusive: false}, 
            function(dirEntry) {
                rootPath = dirEntry.fullPath;
            }, fail);;
    }, 
    fail
); 
```

现在，您有一个指向将在卸载应用程序时清理的区域的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T06:26:06.560

您无法跟踪卸载事件。但要删除目录，代码如下。

```
function deleteDirectory(directoyName){
    $scope.fs.root.getDirectory(directoyName,{ create: false, exclusive: false }, function(dirEntry) {
      dirEntry.removeRecursively(function() {
        console.log('Directory Successfully Removed.');
      }, errorHandler);
    }, errorHandler);
  } 
```

# c# - 创建复合键实体框架

> ID：14873169
> 
> 赞同：60
> 
> 时间：2013-02-14T10:53:59.377
> 
> 标签：c#, entity-framework, entity-framework-5, composite-key

不久，我想在保留主键的表上创建复合键，以提高 sql server 搜索性能。每当我搜索没有主键的实体（即 GUID 字符串）时，性能问题就会出现在 200k 数据表上。假设我有 3 节课

```
public class Device{

    public int ID { get; set; } 
    public string UDID { get; set; }
    public string ApplicationKey { get; set; }
    public string PlatformKey { get; set; }

    public ICollection<NotificationMessageDevice> DeviceMessages { get; set; } 
}

public class NotificationMessageDevice { 

    [Column(Order = 0), Key, ForeignKey("NotificationMessage")]
    public int NotificationMessage_ID { get; set; }

    [Column(Order = 1), Key, ForeignKey("Device")]
    public int Device_ID { get; set; }

    public virtual Device Device { get; set; }
    public virtual NotificationMessage NotificationMessage { get; set; }
}

public class NotificationMessage { 

    public int ID { get; set; }
    public string Text { get; set; }
    public DateTime CreateDate { get; set; }
}

        modelBuilder.Entity<Device>().HasKey(t => new { t.ID, t.ApplicationKey, t.PlatformKey, t.UDID }); 
```

问题是，每当我想使用 modelBuilder 将 ID 、 UDID 、 ApplicationKey 和 PlatformKey 定义为复合键时，都会出现以下错误。

> NotificationMessageDevice_Device_Target_NotificationMessageDevice_Device_Source: : 关系约束中的从属角色和主体角色中的属性数量必须相同

我认为问题是因为 NotificationMessageDevice 上的导航属性无法识别 Device 表上的主键。我该如何解决这个问题？除此之外，如果您分享您提高实体框架搜索性能的经验，我将很高兴。通常，每当我使用没有主键的第一种方法时，都会出现性能问题。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-02-14T11:15:33.123

如果*Device*表具有复合主键，则您的*NotificationMessageDevice*表上需要相同的复合外键。SQL如何找到没有完整主键的设备？此外，您应该使这些字段成为*NotificationMessageDevice*表主键的一部分。否则你不能保证主键是唯一的：

```
public class NotificationMessageDevice
{
    [Column(Order = 0), Key, ForeignKey("NotificationMessage")]
    public int NotificationMessage_ID { get; set; }

    [Column(Order = 1), Key, ForeignKey("Device")]
    public int Device_ID { get; set; }
    [Column(Order = 2), Key, ForeignKey("Device")]
    public string Device_UDID { get; set; }
    [Column(Order = 3), Key, ForeignKey("Device")]
    public string Device_ApplicationKey { get; set; }

    public virtual Device Device { get; set; }
    public virtual NotificationMessage NotificationMessage { get; set; }
} 
```

# c++ - 标题中的多行文本

> ID：14873173
> 
> 赞同：0
> 
> 时间：2013-02-14T10:54:33.970
> 
> 标签：c++, mfc, grid-layout, ultimategrid

我正在研究复杂的网格布局，而 UltimateGrid 是我的选择。

我设置了一个**多行标题**，然后我**在垂直标题中加入了一些单元格**。

现在，我正在寻找一种在我加入的标题单元格中设置多行文本的方法。

这是一个解释性屏幕截图。

![解释性截图](../Images/8032aaf7ee8bb36133f5094e87b9aed6.png)

我已经尝试过写：

```
void MyCug::OnSetup(){

int rows = 5;
int cols = 20;

// setup rows and columns
SetNumberRows(rows);
SetNumberCols(cols);

// create 3 row top heading
SetTH_NumberRows(2);

...

JoinCells (16, -2, 16, -1); // Here I joins - in heading - two cells : row 16, columns -2 and -1

...

// Then I retrieve merged cell
CUGCell m_cell;
GetCell(16, -2, &m_cell);

// I need to show multi-line content in heading cells: I tried to set multi-row property.
int result = m_cell.SetPropertyFlags(m_cell.GetPropertyFlags() | UGCELL_MULTIROWCELL);

if (result == UG_SUCCESS) {
    bool ok = true;     // all seems to be ok...
}

m_cell.SetText("string\r\nstring\r\nstring"); // Despite my attempt, this will be always show on a single line!
SetCell(16, -3, &m_cell);

...
} 
```

没有成功：单元格文本总是显示在一行上，这正是我不想要的。

如何获取多行的单元格文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:56:13.993

我告诉我如何解决我的问题，希望它对某人有用。

要设置多行单元格，应使用成员函数**CUGCell::SetCellTypeEx() 。**此功能允许您为单个单元格设置扩展属性。

下面的示例完美运行：

```
void MyCug::OnSetup(){

int rows = 5;
int cols = 20;

// setup rows and columns
SetNumberRows(rows);
SetNumberCols(cols);

// create 3 row top heading
SetTH_NumberRows(2);

...

JoinCells (16, -2, 16, -1); // Here i joins - in heading - two cells : row 16, columns -2 and -1

...

// I retrieve merged cell
CUGCell m_cell;
GetCell(16, -2, &m_cell);

cell.SetCellTypeEx(UGCT_NORMALMULTILINE); // set multiline cell

m_cell.SetText("string\r\nstring\r\nstring");

SetCell(16, -3, &m_cell);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T12:48:32.783

方法内部`OnSetup()`：

1.  设置顶部标题中的行数。

```
SetTH_NumberRows(2); // Set 2 rows 
```

2.  将单元格范围连接在一起

```
JoinCells(1,-2, 1,-1); // Join row -1 and -2 in column 1 
```

3.  向单元格添加多行特征

```
QuickSetCellTypeEx(1, -2, UGCT_NORMALMULTILINE); // Column 1, row -2 is a multiline 
```

4.  添加文字

```
CString title = _T("New\r\nline");
QuickSetText(1, -2, title); SetColWidth(1, 200); // Set text in the preferred cell 
```

# mysql - SQL 外键约束

> ID：14873174
> 
> 赞同：0
> 
> 时间：2013-02-14T10:54:35.700
> 
> 标签：mysql, foreign-keys

我有一张员工表：

```
create table employee
(number integer primary key,
 name varchar(20),
 salary integer,
 manager integer,
 birthyear integer,
 startyear integer); 
```

其中 manager 列是员工经理的员工编号，即几行看起来像这样：

```
number | name               | salary | manager | birthyear | startyear |

    32 | Smythe, Carol      |   9050 |     199 |      1929 |      1967 |
    33 | Hayes, Evelyn      |  10100 |     199 |      1931 |      1963 |
    35 | Evans, Michael     |   5000 |      32 |      1952 |      1974 | 
```

澄清一下，Michael Evans 的经理是 Carol Smythe。还有两件事，该表上没有外键约束，并且 manager 列中有几个 NULL 值。现在，我想创建一个包含所有经理的经理表。我会做这样的事情；

```
create table Mgr(
 Mgr_id INTEGER PRIMARY KEY,
 bonus INTEGER,
 FOREIGN KEY (Mgr_id) REFERENCES employee(manager)); 
```

但; 这不起作用，我得到一个错误。有人可以解释为什么吗？已搜索答案，但找不到任何好的解释。提前致谢。

错误：

```
ERROR 1005 (HY0000): Can´t create table johnson.mgr (errno: 150) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:48:33.443

外键和引用键中的对应列必须具有相似的内部数据类型，以便可以在不进行类型转换的情况下进行比较。整数类型的大小和符号必须相同。字符串类型的长度不必相同。对于非二进制（字符）字符串列，字符集和排序规则必须相同。

因此，请检查您是否为 managerId 表提供了正确的数据类型。

必须满足这些条件才能不出现错误 150：

1.  这两个表必须是 ENGINE=InnoDB。
2.  这两个表必须具有相同的字符集。
3.  父表中的 PK 列和 FK 列必须是相同的数据类型。
4.  父表中的 PK 列和 FK 列，如果它们具有定义排序规则类型，则必须具有相同的排序规则类型；
5.  如果外键表中已有数据，则 FK 列值必须与父表 PK 列中的值匹配。

另一个问题是您在同一列上创建外键和主键

希望这可以帮助

参考[http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:52:26.620

您正在尝试在同一字段和表上创建主键和外键。

您需要更改员工表的定义，如下所示，

```
create table employee
(number integer primary key,
 name varchar(20),
 salary integer,
 manager integer,
 birthyear integer,
 startyear integer
FOREIGN KEY (manager) REFERENCES Mgr(Mgr_id) 
); 
```

并从表定义中删除**`Foreign Key`**子句`Mgr`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:32:18.103

*你*想做的事情是有道理的。*你怎么*做的没有。您需要更改数据库识别经理的方式。现在，它通过employee.manager 中的值来识别经理。完成后，它将通过 Mgr 中的行来识别经理。

首先确保您有可用的数据。查找不再在员工表中的 ID 号。尝试这个。

```
select manager 
from employee 
where manager not in (select number 
                      from employee); 
```

返回的每一行都代表一个错误——一个经理的 ID 号，在员工中没有对应的行。您必须先解决这些问题，然后才能取得很大进展。

修复这些错误后，创建表 Mgr。

```
create table Mgr (
  Mgr_id INTEGER PRIMARY KEY,
  bonus INTEGER NOT NULL DEFAULT 0,
  FOREIGN KEY (Mgr_id) REFERENCES employee(manager)
); 
```

使用查询填充 Mgr。这些方面的东西应该起作用。

```
insert into Mgr (Mgr_id) 
select distinct manager 
from employee; 
```

使用正确的奖金值更新该表。如果您没有将这些数据存储在方便的地方，您可能必须手动执行此操作。

现在就数据库而言，您*可以*删除列employee.manager。您*应该*删除该列，但不是现在。您必须考虑认为您可以通过查看员工表来识别经理的应用程序代码会发生什么。

*   您可以只删除该列，让应用程序失败，直到它们被修复。
*   您可以警告所有应用程序开发人员，这些更改将在 3 月 1 日进行，他们最好准备好他们的代码。
*   您可以进行更改，保留该列，警告应用程序开发人员，并采取措施防止更改employee.manager。
*   您可以进行这些更改，重命名员工表，并创建一个具有旧结构（您需要加入员工和经理）和名称“员工”的可更新视图。这个选项接近理想——它不需要更改应用程序代码——但我不确定 MySQL 支持可更新视图的程度。这可能是不可能的。

# python - 在自定义模板标签中继承上下文变量

> ID：14873181
> 
> 赞同：0
> 
> 时间：2013-02-14T10:54:56.727
> 
> 标签：python, django, django-templates

我有一个带有上下文变量的 django 模板`myVar`，在视图函数中设置。该模板还呈现了一个自定义的简单模板标签`{% myTemplateTag %}`，该标签呈现`myTemplate.html`

我想`myVar`在呈现`myTemplate.html`.

有没有办法在自定义模板标签中继承我的视图函数的上下文变量？（没有将它作为参数显式传递给模板标签）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:01:39.557

## 使用 simple_tag

使用[simple_tag](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)，只需设置`takes_context=True`：

```
@register.simple_tag(takes_context=True)
def current_time(context, format_string):
    timezone = context['timezone']
    return your_get_current_time_method(timezone, format_string) 
```

## 使用自定义模板标签

只需使用 template.Variable.resolve()，即。

```
foo = template.Variable('some_var').resolve(context) 
```

请参阅[将变量传递给 templatetag](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#passing-template-variables-to-the-tag)：

> 要使用Variable 类，只需使用要解析的变量名称对其进行实例化，然后调用variable.resolve(context)。因此，例如：
> 
> ```
> class FormatTimeNode(template.Node):
>     def __init__(self, date_to_be_formatted, format_string):
>         self.date_to_be_formatted = template.Variable(date_to_be_formatted)
>         self.format_string = format_string
> 
>     def render(self, context):
>         try:
>             actual_date = self.date_to_be_formatted.resolve(context)
>             return actual_date.strftime(self.format_string)
>         except template.VariableDoesNotExist:
>             return '' 
> ```
> 
> 如果变量解析在页面的当前上下文中无法解析传递给它的字符串，它将引发 VariableDoesNotExist 异常。

也可能有用：[在 context 中设置一个变量](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#setting-a-variable-in-the-context)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:01:47.337

也许您可以文件而不是`include`使用`myTemplate.html`特殊标签呈现它？你看过[包含](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)标签吗？如果你`include` `myTemplate.html`它将与包含它的人共享上下文。

# javascript - 如何防止在输入中“按回车”触发事件？Java 脚本

> ID：14873186
> 
> 赞同：0
> 
> 时间：2013-02-14T10:55:04.557
> 
> 标签：javascript, jquery, preventdefault, keyup

我有一个输入和一个附加按钮。点击按钮调用一些函数。但是我不希望当用户“按下回车键”时调用这个函数。另一方面，我想在这个输入中的 keyup 上调用其他函数。所以我把

```
$(document).on('keyup', '#id', function(e){
        call();//calling some function
        if (e.which == 13 || event.keyCode == 13) {
            e.preventDefault();//I also tried to return false
        }
     }); 
```

但这似乎不起作用，有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:59:48.923

```
$(document).on('keyup', '#id', function(e){
    if (event.keyCode != 13) {
        e.preventDefault();
        call();//calling some function
    }
    return false;
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:58:27.473

尝试这个：

```
$(document).on('keyup', '#id', function(e){
    if (e.which == 13 || e.keyCode == 13) {
        e.preventDefault();//I also tried to return false
    }else{
         call();//calling some function
    }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:04:59.027

不要使用 keyup，因为表单是在 keydown 上发送的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:11:26.587

您是否尝试过将 .call() 函数切换为简单的 alert()，仅用于测试目的。@Oyeme 和 @Jai 代码似乎工作正常。

# jasmine - 茉莉花 - 如何检查参数是否存在？

> ID：14873187
> 
> 赞同：5
> 
> 时间：2013-02-14T10:55:04.970
> 
> 标签：jasmine

再会。

我正在测试以查看功能得到了她所有的参数。

我知道她的两个参数必须具有什么价值，

但对于第三个参数，我只想测试它是否存在。

```
expect(myFunction).toHaveBeenCalledWithMatcher({
    a: 1,
    b: 2,
    c: dont know its val but want it to exist
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:20:51.893

尝试

```
 expect(myFunction.mostRecentCall.args[2]).toBeDefined(); 
```

并省略 toHaveBeenCalledWith 测试中的参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T12:34:45.290

您也可以使用`jasmine.any`. 如果您期望一个数字，它可能是：

```
expect(myFunction).toHaveBeenCalledWith({
    a: 1,
    b: 2,
    c: jasmine.any(Number)
}); 
```

这也是可能的`jasmine.any(Function)`等等。来自茉莉花文档：

> jasmine.any 将构造函数或“类”名称作为预期值。如果构造函数与实际值的构造函数匹配，则返回 true。

# asp.net - 正则表达式识别 0.0 和 1.0 之间的小数

> ID：14873188
> 
> 赞同：3
> 
> 时间：2013-02-14T10:55:05.667
> 
> 标签：asp.net, regex, c#-4.0

我正在寻找一个正则表达式验证表达式来验证十进制值（x）是否如下：0.0<=x<=1.0

只允许保留一位小数。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:01:35.123

试试这个，它将检查一位小数而不是其他建议的变体

```
^((0\.[0-9]{1})|(1\.0))$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T10:59:20.630

正则表达式将是：

```
^(:?(:?0\.[0-9])|(:?1\.0))$ 
```

但是为什么不使用十进制比较呢？

# android - 为对象动画师的标签指定硬编码值是在两个片段之间创建黑屏

> ID：14873194
> 
> 赞同：1
> 
> 时间：2013-02-14T10:55:30.550
> 
> 标签：android

我在两个片段之间实现动画时遇到问题。两个片段之间可以发生翻转或滑动过渡。翻转动画不会产生任何问题。但是例如 slide_right，在这里我为`valueFrom`and指定硬编码值`valueTo`，因此对于更高的分辨率，两个片段之间会有黑屏。我该如何解决？请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:58:09.893

您可以使用这样的百分比值：

slide_in_right.xml：

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="@android:integer/config_mediumAnimTime"
android:fromXDelta="100%p"
android:toXDelta="0"
android:zAdjustment="top" /> 
```

# sql - Linq 2 SQL - 继承多个 SQL 语句

> ID：14873196
> 
> 赞同：0
> 
> 时间：2013-02-14T10:55:34.953
> 
> 标签：sql, linq, inheritance, linq-to-sql

在使用 Linq 2 SQL 在示例应用程序中实现 AdventureWorks 数据库时，我遇到了一个问题，即 Linq 2 SQL 为我的 DBML 中定义的继承映射中的派生类型生成 SQL 语句的方式。

我的 DBML 中有两个实体，Person 和 PersonPhone（一个 Person 到多个 PersonPhone），没有定义任何继承映射（Person 将在后面的示例中成为继承基类）。如果我随后运行以下 Linq 语句，我注意到在进行跟踪时会按预期生成以下 SQL：

```
void Main()
{
this.DeferredLoadingEnabled = false;

DataLoadOptions dlo = new DataLoadOptions();
dlo.LoadWith<Person>(n => n.PersonPhones);
this.LoadOptions = dlo;

Person person = this.Persons.SingleOrDefault(n => n.BusinessEntityID == 291);
person.PersonPhones.Dump(); 
}

DECLARE @p0 Int = 291
SELECT [t0].[BusinessEntityID], [t0].[PersonType], [t0].[NameStyle], [t0].[Title], [t0].[FirstName], [t0].[MiddleName], [t0].[LastName], [t0].[Suffix], [t0].[EmailPromotion], [t0].[AdditionalContactInfo], [t0].[Demographics], [t0].[rowguid], [t0].[ModifiedDate], [t1].[BusinessEntityID] AS [BusinessEntityID2], [t1].[PhoneNumber], [t1].[PhoneNumberTypeID], [t1].[ModifiedDate] AS [ModifiedDate2], (
    SELECT COUNT(*)
    FROM [Person].[PersonPhone] AS [t2]
    WHERE [t2].[BusinessEntityID] = [t0].[BusinessEntityID]
    ) AS [value]
FROM [Person].[Person] AS [t0]
LEFT OUTER JOIN [Person].[PersonPhone] AS [t1] ON [t1].[BusinessEntityID] = [t0].[BusinessEntityID]
WHERE [t0].[BusinessEntityID] = @p0
ORDER BY [t0].[BusinessEntityID], [t1].[PhoneNumber], [t1].[PhoneNumberTypeID] 
```

结果是在单个语句中生成 SQL。请忽略这可能是低效的 SQL 的事实，我要说的是它在单个语句中运行。

但是，如果我在我的 DBML 中包含继承映射信息并定义一个名为 StoreContact（从 Person 派生）的新实体类型并运行完全相同的查询，我实际上会得到不同的结果，如下所示。在那两个 SQL 语句实际上运行。

```
DECLARE @p0 Int = 291
SELECT [t0].[PersonType], [t0].[BusinessEntityID], [t0].[NameStyle], [t0].[Title], [t0].[FirstName], [t0].[MiddleName], [t0].[LastName], [t0].[Suffix], [t0].[EmailPromotion], [t0].[AdditionalContactInfo], [t0].[Demographics], [t0].[rowguid], [t0].[ModifiedDate]
FROM [Person].[Person] AS [t0]
WHERE [t0].[BusinessEntityID] = @p0
GO

DECLARE @x1 Int = 291
SELECT [t0].[BusinessEntityID], [t0].[PhoneNumber], [t0].[PhoneNumberTypeID], [t0].[ModifiedDate]
FROM [Person].[PersonPhone] AS [t0]
WHERE [t0].[BusinessEntityID] = @x1 
```

这有点问题，因为这将大大降低我们的应用程序的速度，因为在实现继承功能的情况下，Linq 2 SQL 需要对数据库进行重复调用。看起来拥有 OOP 模型确实是有代价的。

是否有解决此问题的方法可以使 SQL 在单个语句中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:18:41.520

不幸的是，这不是我正在寻找的答案，但升级到实体框架可以在保持继承的同时解决问题。

如果我运行以下 EF 等效查询：

```
void Main()
{
    StoreContact person  =(StoreContact)this.People.Include("PersonPhones").SingleOrDefault(n => n.BusinessEntityID == 291);
    person.PersonPhones.Dump(); 
} 
```

我得到以下 SQL 结果：

```
SELECT 
[Project2].[BusinessEntityID] AS [BusinessEntityID], 
[Project2].[C1] AS [C1], 
[Project2].[NameStyle] AS [NameStyle], 
[Project2].[Title] AS [Title], 
[Project2].[FirstName] AS [FirstName], 
[Project2].[MiddleName] AS [MiddleName], 
[Project2].[LastName] AS [LastName], 
[Project2].[Suffix] AS [Suffix], 
[Project2].[EmailPromotion] AS [EmailPromotion], 
[Project2].[AdditionalContactInfo] AS [AdditionalContactInfo], 
[Project2].[Demographics] AS [Demographics], 
[Project2].[rowguid] AS [rowguid], 
[Project2].[ModifiedDate] AS [ModifiedDate], 
[Project2].[C2] AS [C2], 
[Project2].[BusinessEntityID1] AS [BusinessEntityID1], 
[Project2].[PhoneNumber] AS [PhoneNumber], 
[Project2].[PhoneNumberTypeID] AS [PhoneNumberTypeID], 
[Project2].[ModifiedDate1] AS [ModifiedDate1]
FROM ( SELECT 
    [Limit1].[BusinessEntityID] AS [BusinessEntityID], 
    [Limit1].[NameStyle] AS [NameStyle], 
    [Limit1].[Title] AS [Title], 
    [Limit1].[FirstName] AS [FirstName], 
    [Limit1].[MiddleName] AS [MiddleName], 
    [Limit1].[LastName] AS [LastName], 
    [Limit1].[Suffix] AS [Suffix], 
    [Limit1].[EmailPromotion] AS [EmailPromotion], 
    [Limit1].[AdditionalContactInfo] AS [AdditionalContactInfo], 
    [Limit1].[Demographics] AS [Demographics], 
    [Limit1].[rowguid] AS [rowguid], 
    [Limit1].[ModifiedDate] AS [ModifiedDate], 
    [Limit1].[C1] AS [C1], 
    [Extent2].[BusinessEntityID] AS [BusinessEntityID1], 
    [Extent2].[PhoneNumber] AS [PhoneNumber], 
    [Extent2].[PhoneNumberTypeID] AS [PhoneNumberTypeID], 
    [Extent2].[ModifiedDate] AS [ModifiedDate1], 
    CASE WHEN ([Extent2].[BusinessEntityID] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C2]
    FROM   (SELECT TOP (2) 
        [Extent1].[BusinessEntityID] AS [BusinessEntityID], 
        [Extent1].[NameStyle] AS [NameStyle], 
        [Extent1].[Title] AS [Title], 
        [Extent1].[FirstName] AS [FirstName], 
        [Extent1].[MiddleName] AS [MiddleName], 
        [Extent1].[LastName] AS [LastName], 
        [Extent1].[Suffix] AS [Suffix], 
        [Extent1].[EmailPromotion] AS [EmailPromotion], 
        [Extent1].[AdditionalContactInfo] AS [AdditionalContactInfo], 
        [Extent1].[Demographics] AS [Demographics], 
        [Extent1].[rowguid] AS [rowguid], 
        [Extent1].[ModifiedDate] AS [ModifiedDate], 
        '0X0X' AS [C1]
        FROM [Person].[Person] AS [Extent1]
        WHERE 291 = [Extent1].[BusinessEntityID] ) AS [Limit1]
    LEFT OUTER JOIN [Person].[PersonPhone] AS [Extent2] ON [Limit1].[BusinessEntityID] = [Extent2].[BusinessEntityID]
)  AS [Project2]
ORDER BY [Project2].[BusinessEntityID] ASC, [Project2].[C2] ASC 
```

SQL 语句在单个查询中返回结果。

这不是我正在寻找的答案的原因是，对于现有应用程序从 Linq 到 SQL 到实体框架的过渡是相当大的一步。

# pdf - 使用 cfdocument 时强制分页并包含标题？

> ID：14873197
> 
> 赞同：0
> 
> 时间：2013-02-14T10:55:36.583
> 
> 标签：pdf, coldfusion, page-break, cfdocument

我正在生成一个`<table>`并使用`<cfdocument>`. 我想在新页面运行时包含表头。这大约是每 30 行。

这是我当前的代码。应该在`<cfif>`每个新行处强制中断。然而，它似乎所做的只是创建了 4 个空白页，内容位于底部，格式与以前相同

```
<cfloop query="One">

    <cfif not(One.currentrow MOD 30)>
        <cfdocumentitem type="pagebreak" />
        <th>Contact Name</th>
     </cfif>

     <cfoutput> 
        #One.contactName# 
     </cfoutput> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:06:55.057

Fixed. Here is what I used to get my header on every page. Further note, if you need to adjust the document header size, then include margintop="2.2" in your main tag and adjust to taste.

```
 <cfdocumentitem type="header" evalAtPrint="true" > 
        <td>Contact Name</td>
 </cfdocumentitem> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T09:30:59.287

试试这个：这是我得到的解决方案。

```
<cfloop query="get_list">

<!---7 row each page--->
<cfset mode = get_list.currentrow mod 7>

<cfif mode eq 1>

<thead>
<tr>
<td>table header</td>
</tr>
</thead>

</cfif>

<tbody>

<tr>
<td>data loop here</td>
</tr>

<tr>
<td>
<cfif mode eq 0>
<cfdocumentitem type="pagebreak">
</cfdocumentitem>
</cfif>
</td>
</tr>

</tbody>
</cfloop>

</table> 
```

# image - 忽略背景从图像（不是网络摄像头提要）中查找人的肤色百分比

> ID：14873198
> 
> 赞同：0
> 
> 时间：2013-02-14T10:55:40.177
> 
> 标签：image, opencv, detection

我需要在给定图像中找到一个人的肤色百分比。

到目前为止，我已经能够计算所有具有肤色的像素，但我无法忽略人的背景，因此我可以计算百分比的像素数。

```
BackgroundSubtractorMOG2 bg;
bg.nmixtures =3;
bg.bShadowDetection=false;

bg.operator ()(img,fore);
bg.getBackgroundImage(back); 
```

`img`是我的形象。我试图分离前后垫对象，但使用上面的代码片段`back`并`fore`采用与`img`. 什么都没有发生。

你能指出我必须做出哪些改变才能正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:49:28.430

我能够运行在这里找到的一些类似代码：

[http://mateuszstankiewicz.eu/?p=189](http://mateuszstankiewicz.eu/?p=189)

我不得不更改一些东西，但它最终可以正常工作（显示时前后与 img 不同：

```
int main(int argc, char *argv[]) {
    Mat frame, back, fore;
    VideoCapture cap(0);
    BackgroundSubtractorMOG2 bg;

    vector<std::vector<Point> > contours;

    namedWindow("Frame");
    namedWindow("Background");
    namedWindow("Foreground");

    for(;;) {
        cap >> frame;
        bg.operator ()(frame, fore);
        bg.getBackgroundImage(back);
        erode(fore, fore, Mat());
        dilate(fore, fore, Mat());
        findContours(fore, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE);
        drawContours(frame, contours, -1, Scalar(0, 0, 255), 2);
        imshow("Frame", frame);
        imshow("Background", back);
        imshow("Foreground", fore);
        if(waitKey(1) == 27) break;
    }
    return 0;
} 
```

# iphone - 当 UIView 到 UIImage 时尝试释放数据时出现 BAD_ACCESS

> ID：14873200
> 
> 赞同：1
> 
> 时间：2013-02-14T10:55:49.990
> 
> 标签：iphone, objective-c, opengl-es, uiimage, cgimage

我打算将 a`UIView`绘制`OpenGL ES`到a 中的快照`UIImage`，这是我使用的代码：

```
 if(context){
    [EAGLContext setCurrentContext:context];
    glBindFramebuffer(GL_FRAMEBUFFER, defaultFramebuffer);
    NSInteger dataLength = framebufferWidth * framebufferHeight * 4;

    GLubyte* data = (GLubyte*)malloc(dataLength) ; // malloc(myDataLength);
    glReadPixels(0, 0, framebufferWidth, framebufferHeight, GL_RGBA, GL_UNSIGNED_BYTE, data);

    // make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, data, dataLength, NULL);

    // prep the ingredients
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * framebufferWidth;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    // make the cgimage
    CGImageRef result = CGImageCreate(framebufferWidth, framebufferHeight, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    // then make the uiimage from that
    UIImage *image = [UIImage imageWithCGImage:result];
    CGImageRelease(result);
    CGColorSpaceRelease(colorSpaceRef);
    CGDataProviderRelease(provider);
    //free(data);

    return image;
} 
```

我本来打算使用`free(data);`before `return`，但这会引发`BAD_ACCESS`运行时错误。

所以我的问题是，如何`free`正确？或者我应该`free`在图像发布后他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:56:45.890

您应该`CGDataProviderCreateWithData's` `CGDataProviderReleaseDataCallback`按照[此处](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGDataProvider/Reference/reference.html)所述使用。

只需添加 freeData 函数回调：

```
void freeData(void *info, const void *data, size_t size) 
{
    free((void*)data);
} 
```

并将其传递给`CGDataProviderCreateWithData`：

```
CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, data, dataLength, freeData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:25:32.100

这是我当前的代码，它工作得很好。

```
if(context){ 
    [EAGLContext setCurrentContext:context];
    glBindFramebuffer(GL_FRAMEBUFFER, defaultFramebuffer);
    NSInteger dataLength = width * height * 4;
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * width;
    GLubyte* data = (GLubyte*)malloc(dataLength) ;
    glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, data);

    // make upside down
    GLubyte* swp = (GLubyte*)malloc(width * 4);
    for (int h = 0; h < height / 2; h++) {
        memcpy(swp, data + (height - 1 - h) * bytesPerRow, bytesPerRow);
        memcpy(data + (height - 1 - h) * bytesPerRow, data + h * bytesPerRow, bytesPerRow);
        memcpy(data + h * bytesPerRow, swp, bytesPerRow);
    }

    NSData* nsData = [NSData dataWithBytesNoCopy:data length:dataLength freeWhenDone:YES];
    // make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithCFData((CFDataRef)nsData);

    // prep the ingredients
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    // make the cgimage
    CGImageRef result = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);
    CGColorSpaceRelease(colorSpaceRef);
    CGDataProviderRelease(provider);

    // then make the uiimage from that
    UIImage *image = [UIImage imageWithCGImage:result];
    CGImageRelease(result);

    return image;
 } 
```

# python - 绘制一维高斯分布函数

> ID：14873203
> 
> 赞同：31
> 
> 时间：2013-02-14T10:56:01.070
> 
> 标签：python, plot, gaussian

如何使用均值和标准差参数值 (μ, σ) = (−1, 1)、(0, 2) 和 (2, 3) 绘制一维高斯分布函数图？

我是编程新手，使用 Python。

先感谢您！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-14T16:54:43.463

与优`matplotlib`和`numpy`包

```
from matplotlib import pyplot as mp
import numpy as np

def gaussian(x, mu, sig):
    return np.exp(-np.power(x - mu, 2.) / (2 * np.power(sig, 2.)))

x_values = np.linspace(-3, 3, 120)
for mu, sig in [(-1, 1), (0, 2), (2, 3)]:
    mp.plot(x_values, gaussian(x_values, mu, sig))

mp.show() 
```

会产生类似的东西 [![显示由 matplotlib 生成的一维高斯函数的图](../Images/43f9561d7e6ce369a1567ebd5f92ebbc.png)](https://i.stack.imgur.com/eIFxz.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-11-06T21:31:29.517

您可以阅读本教程，了解如何在 python 中使用统计分布函数。 [https://docs.scipy.org/doc/scipy/tutorial/stats.html](https://docs.scipy.org/doc/scipy/tutorial/stats.html)

```
from scipy.stats import norm
import matplotlib.pyplot as plt
import numpy as np 

#initialize a normal distribution with frozen in mean=-1, std. dev.= 1
rv = norm(loc = -1., scale = 1.0)
rv1 = norm(loc = 0., scale = 2.0)
rv2 = norm(loc = 2., scale = 3.0)

x = np.arange(-10, 10, .1)

#plot the pdfs of these normal distributions 
plt.plot(x, rv.pdf(x), x, rv1.pdf(x), x, rv2.pdf(x)) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-10-28T13:21:59.907

基于原始语法并正确规范化的正确形式是：

```
def gaussian(x, mu, sig):
    return 1./(np.sqrt(2.*np.pi)*sig)*np.exp(-np.power((x - mu)/sig, 2.)/2) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-05-03T16:24:17.433

除了以前的答案，我建议先计算指数中的比率，然后取平方：

```
def gaussian(x,x0,sigma):
  return np.exp(-np.power((x - x0)/sigma, 2.)/2.) 
```

这样，您还可以计算非常小或非常大的数字的高斯：

```
In: gaussian(1e-12,5e-12,3e-12)
Out: 0.64118038842995462 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-06-26T22:07:21.160

您的 gaussian() 函数的分母中缺少一个括号。就像现在一样，您除以 2 并乘以方差 (sig^2)。但这不是真的，正如你从你的情节中看到的那样，方差越大，高斯越窄——这是错误的，它应该是相反的。

所以只需将 gaussian() 函数更改为：

```
def gaussian(x, mu, sig):
    return np.exp(-np.power(x - mu, 2.) / (2 * np.power(sig, 2.))) 
```

# android - Android - 缩放屏幕布局的常用技术

> ID：14873204
> 
> 赞同：7
> 
> 时间：2013-02-14T10:56:14.003
> 
> 标签：android, android-layout, layout, scaling, android-screen-support

我意识到这个话题已经被覆盖到死了，我已经阅读了官方和非官方的开发者指南，所以了解这个理论。但我仍然不确定采取哪条路径来确保我的应用在多种屏幕尺寸上看起来都不错。我的应用程序是一个简单的导航风格应用程序，仅设计为纵向。在这个阶段，我对为平板电脑等的横向或多窗格屏幕进行不同的设计不感兴趣。我只希望每个屏幕都按比例放大/缩小，以便它看起来与显示的屏幕尺寸成比例 - 即文本和图像的大小会酌情放大/缩小。我为经典的 480x800 hdpi 设备设计了该应用程序，它看起来很棒，我只是想让它看起来与 Galaxy S3/Nexus 7 等成比例。我已经遵循这些准则：

*   使用相对布局
*   使用 DP 单位填充/边距
*   对字体使用 SP 单位
*   为按钮使用 9-patch 图像

但是我发现它看起来仍然很小，并且在较大设备的屏幕中间有点丢失。特别是，我的主菜单屏幕是一个由 6 个图像按钮组成的网格，我无法很好地缩放。我不想有多个副本来维护同一个屏幕（正常/大/超大），只想要一个布局。我正在考虑以下内容：

*   使用 value-normal/value-large 等文件夹来存储带有 DP/SP 值的 XML 文件，用于图像/文本的大小
*   将RelativeLayouts更改为具有权重的LinearLayouts（尽管我最初在LinearLayouts中挣扎并更改为RelativeLayouts

这些方法中的任何一种都是有效的，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:36:08.703

就个人而言，我会选择第一个选项。虽然这适用于手机，但它会使布局在平板电脑上显得有些臃肿。因此，另一种方法是为平板电脑创建单独的布局，并将它们分别放在7" 和 10" 平板电脑的`layout-large`和文件夹中。`layout-xlarge`

# graphviz - Graphviz 中的水平树

> ID：14873205
> 
> 赞同：65
> 
> 时间：2013-02-14T10:56:20.303
> 
> 标签：graphviz, dot

我用点语言制作了一棵树，类似于[这里](https://graphviz.gitlab.io/_pages/Gallery/directed/unix.html)的树。

有什么办法可以让树向右扩展，而不是向下扩展（所以根节点在左边，子节点在右边）。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-02-14T11:15:16.707

这很容易，只要您坚持基本布局：将[rankdir](https://graphviz.gitlab.io/_pages/doc/info/attrs.html#d:rankdir) ="LR" 放在顶部定义附近。就像是

```
digraph unix {
  size="6,6";
  rankdir="LR";
  ...
} 
```

# rest - 在 HTTP 协议中，ETag 和 Content-MD5 有什么区别？

> ID：14873206
> 
> 赞同：13
> 
> 时间：2013-02-14T10:56:20.487
> 
> 标签：rest, http, protocols, md5, etag

两者都表示消息正文的哈希值。两者都可用于检查自上次特定客户端请求后资源是否已更改。如果它们做相同的事情，为什么它们会在 RFC2616 规范中共存？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T11:10:12.827

> 两者都表示消息正文的哈希值。

不完全的。`Content-MD5`是一个散列，但`ETag`它是一个不透明的标识符：客户端不知道它的含义。确实，生成适当的一种方法`ETag`是对资源的数据进行哈希处理，但它肯定不是唯一的。

> 两者都可用于检查自上次特定客户端请求后资源是否已更改。

这是真的，尽管在这两种情况下理论上你都可以得到假阳性和假阴性。

> 如果它们做相同的事情，为什么它们会在 RFC2616 规范中共存？

共存是因为它们服务于不同的目的；“他们做同样的事情”是不正确的。

`Content-MD5`旨在让客户端验证正在传输的资源的完整性：其含义已明确定义，并且不应在收到响应后使用。

`ETag`旨在用于协调缓存。由于不透明，它允许将“资源标识符”的语义与其机制解耦（因此服务器可以选择使用它想要的任何标识方案，并且将来可以自由更改此方案，而客户端对进程没有任何发言权）。此外，`ETag`支持[弱验证](http://en.wikipedia.org/wiki/HTTP_ETag#Strong_and_weak_validation)，允许将两个不同版本的资源视为语义等价。

# unit-testing - Lucene 中的 MockAnalyzer：附加词干分析器或任何自定义过滤器？

> ID：14873207
> 
> 赞同：0
> 
> 时间：2013-02-14T10:56:22.403
> 
> 标签：unit-testing, lucene

单元测试的代码简要如下：

```
Analyzer analyzer = new MockAnalyzer(random, MockTokenizer.SIMPLE, true);
rd = newDirectory();
IndexWriter w = new IndexWriter(rd, newIndexWriterConfig(TEST_VERSION_CURRENT, analyzer)); 
```

我希望能够配置我自己的自定义过滤器并将 PorterStemmer 过滤器添加到此配置中。是否可以使用 MockAnalyzer 类来做到这一点，或者是否应该为此目的使用其他一些类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:16:51.910

从罗伯特缪尔那里得到了答案：

`MockAnalyzer`真的只是`MocKTokenizer`++ `MockTokenFilter`...

相反，您只需使用`MockTokenizer`. 这是所有 Lucene 自己的分析测试的工作方式：例如 [http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/analysis/common/src/test/org/apache/lucene/analysis/ en/TestEnglishMinimalStemFilter.java](http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/analysis/common/src/test/org/apache/lucene/analysis/en/TestEnglishMinimalStemFilter.java)

对于 3.4，扩展`ReusableAnalyzerBase`.

# iphone - 代码在模拟器上正常工作，但在我的 iphone 上不起作用。有人可以帮我吗？

> ID：14873210
> 
> 赞同：2
> 
> 时间：2013-02-14T10:56:33.317
> 
> 标签：iphone, xcode, jailbreak

```
On iOS6:

void (*BKSDisplayServicesSetScreenBlanked)(BOOL blanked) = (void (*)(BOOL blanked))dlsym(RTLD_DEFAULT, "BKSDisplayServicesSetScreenBlanked");

and then use:

BKSDisplayServicesSetScreenBlanked(1); // 1 to dim, 0 to undim 
```

而且我不在乎我的应用是否会被应用商店拒绝

# zend-framework2 - 如何在 ZF2 中创建 PDF

> ID：14873211
> 
> 赞同：0
> 
> 时间：2013-02-14T10:56:33.197
> 
> 标签：zend-framework2

我的项目中有 2 个不同的模块

1)专辑

2)用户

在我的相册模块索引操作中显示相册表的所有数据。

我想从专辑表数据创建 PDF。如何配置它以及我可以为 PDF 使用哪种类型的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:03:56.510

我建议使用 DomPDF。它基于 html 文档创建 PDF 文档。它支持用于格式化、呈现表格、嵌入图像的 CSS，并具有我曾经需要的所有功能，等等。它甚至可以在实际工作的 PDF 中嵌入 javascript。我使用 Zend_View 渲染 HTML 文档，然后将其传递给 DomPDF 渲染 PDF。

[http://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T05:47:27.630

您需要[ZendPdf](https://github.com/zendframework/ZendPdf)包，只需按照页面上的说明进行操作即可。文档还没有准备好仅仅是因为它不是核心模块。一旦使用核心内容解决了所有错误，文档可能会随之而来。

# sql-server-2008 - 消息 15197，级别 16，状态 1，过程 sp_helptext，第 107 行

> ID：14873215
> 
> 赞同：2
> 
> 时间：2013-02-14T10:56:45.593
> 
> 标签：sql-server-2008

我有一个名为 dbo.CLRSPTest 的过程，我已经对其进行了加密。当我执行该过程时，它会被执行，但是当我使用 sp_helptext CLRSPTest 查看代码时会引发错误，即`Msg 15197, Level 16, State 1, Procedure sp_helptext, Line 107 There is no text for object 'CLRSPTest'.`

谁能帮帮我？？？我越来越困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:14:27.967

此错误由 sp_helptext 中的以下代码引发

```
 if (select count(*) from syscomments c, sysobjects o where o.xtype not in ('S', 'U')
     and o.id = c.id and o.id = @objid) = 0
   begin
     raiserror(15197,-1,-1,@objname) b
     return (1)
   end 
```

这仅仅意味着任何没有行的对象（不是表或系统对象）都`syscomments`将返回此错误。

加密对象在 xtext 字段中的`syscomments`表中有一条记录，`NULL`因此它们不会被早期代码捕获。您为这些对象获得的消息来自此查询。

```
if (select count(*) from syscomments where id = @objid and encrypted = 0) = 0
  begin
    raiserror(15471,-1,-1,@objname)
    return (0)
  end 
```

现在为什么我们从第一个得到错误而第二个没有错误......这可以通过检查`master..sysmessages`.

```
select error, severity, description 
  from master..sysmessages 
 where error in (15197, 15471) 
   and msglangid = 1033 
```

此查询返回：

```
error   severity    description
15197   16  There is no text for object '%s'.
15471   10  The text for object '%ls' is encrypted. 
```

在这里，我们看到错误 15197 的严重性为 16，错误 15471 的严重性为 10。在[msdn](http://msdn.microsoft.com/en-us/library/ms164086.aspx)上，解释说错误级别 0-9 没有“提高”，并且出于兼容性原因，错误级别 10 被转换为错误级别 0。

所以总结一下。**您收到此错误消息是因为您的过程是 SQL CLR 过程**（在表中没有任何记录`syscomments`）

# php - 在 PHP 中排序时忽略前导零和日期格式的智能排序

> ID：14873217
> 
> 赞同：0
> 
> 时间：2013-02-14T10:56:55.360
> 
> 标签：php

我有一个对 2 个多维数组进行排序的 php 脚本。现在，如果我使用普通的 array_multisort 它会混淆某些行的 2 个数组，因为这两个数组都有一些棘手的元素

例如：a[2][2]='35' 和 b[2][2]='0035'

另外，a[3][4]='+0.03' b[3][4]='+.03'

a[4][6]='31-12-2012' b[4][6]='12/31/2012'

由于上述两个数组的棘手元素差异排序给出了不同的结果。我需要它们进行适当的排序，因为我的要求是为了分析目的在每一行中进行一对一匹配。

请建议我如何继续对这些数组进行“智能”排序以给出相同的结果

我已经尝试过

```
 function sort2dArray($data) {
                    $tmp = array();
                    $lineCount = count($data);
                    foreach ($data as $lineNum => $lineData) {
                        foreach ($lineData as $column => $value) {
                            $tmp[$column][$lineNum] = standardize($value);
                        }
                    }

                    $multiSortArgs = array();
                    foreach ($tmp as $column => $columnData) {
                        array_push($multiSortArgs, $columnData, SORT_ASC);
                    }
                    $multiSortArgs[] = &$data;
                    call_user_func_array('array_multisort', $multiSortArgs);
                    return $data;
                }

                function standardize($value)
                {
                    if(is_numeric($value))
                        $pval= $value + 0;
                    else
                        $pval= $value;

                    return $pval;
                } 
```

**更新：两个数组中的 o/p 以 ',' 作为分隔符...仅考虑 0035 和 35 的情况**

```
 BA2063,,,110Y,EFW
            BA2063,,,110Y,EFW
            BA2063,,,110Y,EFW
            BA2063,,,121H,ECD
            BA2063,,,121H,ECD
            BA2063,,,121H,ECD
            BA2063,,,0035,ESW
            BA2063,,,0035,EFW
            BA2063,,,0035,EFW
            BA2063,,,0035,EFW
            BA2063,,,1L9M,EFW

            BA2063,,,1L9M,EFW
            BA2063,,,35,ESW
            BA2063,,,35,EFW
            BA2063,,,35,EFW
            BA2063,,,35,EFW
            BA2063,,,110Y,EFW
            BA2063,,,110Y,EFW
            BA2063,,,110Y,EFW
            BA2063,,,121H,ECD
            BA2063,,,121H,ECD
            BA2063,,,121H,ECD 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:33:00.120

您的问题很难理解，因为您有多种类型的数据和多种格式的日期。如果您有混合日期格式，我建议您使用这种功能过滤您的数组：

```
$authorizedFormats= ['Y-m-d','m/d/Y'];//give all your format, be careful inside the order to avoid abiguity mess

$filterVarOptions =['options'=>function($var)use($authorizedFormats){
             foreach($authorizedFormats as $value){
                  $date = DateTime::createFromFormat($value,$var);
                  if($date !==false){
                      return $date;
                  }
             }
           return new DateTime('01/01/70');
         }];
 array_walk($yourMultiDimArray,function($var)use($filterVarOptions){
          foreach($var as &$value)
            $value = filter_var($value,FILTER_CALLBACK,$filterVarOptions);
       }); 
```

# tomcat - 取消部署 Tomcat Web 应用程序时如何防止文件锁定？

> ID：14873219
> 
> 赞同：71
> 
> 时间：2013-02-14T10:57:02.293
> 
> 标签：tomcat, memory-leaks, tomcat7, file-locking, undeploy

我在 tomcat 7 中使用管理器应用程序，但无法完全取消部署应用程序。

它说 `FAIL - Unable to delete [F:\apache-tomcat-7.0.33\webapps\balaji]. The continued presence of this file may cause problems.`

我在某处读到它是因为某种称为内存泄漏的现象，如果我们修复它，问题将得到解决。

谁能告诉我tomcat 7中的内存泄漏是什么，我们该如何解决？我正在使用 Windows 7 操作系统。如果我能够修复它，我的取消部署和重新部署过程会顺利运行吗？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-02-15T16:54:17.937

这在 Windows 环境中很常见，但是通过[`antiResourceLocking`](https://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Standard_Implementation)context 属性有一个解决方案：

从 /tomcat/conf 文件夹打开 context.xml 并修改上下文以匹配：

```
<Context antiResourceLocking="true"> 
```

> 编辑：在@JanM 评论之后更新了属性。以前它还包含“antiJARLocking”

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-15T15:18:35.717

这是tomcat的常见问题之一。Tomcat 服务器在启动时捕获资源并进行部署。在取消部署时，tomcat 仍会使用一些资源。它还没有释放资源，但与此同时，tomcat 中的另一个线程会尝试清理相同的资源。因此，删除这些资源将失败。一种最好的方法是手动清理 webapps 中应用程序的根目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-25T13:03:00.967

我在 Apache Tomcat/8.0.5 中遇到了同样的问题。我使用管理器应用程序执行了以下步骤，它对我有用。

*   关闭浏览器，包括所有选项卡（删除缓存）。
*   重新打开“Manager App”并首先确保应用程序已停止（应启用开始按钮）。
*   现在单击取消部署。

我认为当我们直接单击取消部署时，首先它会锁定 jar，停止应用程序并尝试取消部署但失败并`FAIL - Unable to delete`显示消息。

如果您真的对状态感到困惑，请关闭浏览器，重新启动 tomcat，打开“管理器应用程序”，单击停止，然后取消部署。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-15T10:37:53.733

以管理员身份运行 IDE。这个对我有用

# mysql - 在右表上加入限制

> ID：14873220
> 
> 赞同：2
> 
> 时间：2013-02-14T10:57:03.433
> 
> 标签：mysql, join, limit

假设我有两个要加入的表。分类：

```
id   name
----------
1    Cars
2    Games
3    Pencils
4    Books 
```

和项目：

```
id   categoryid   itemname
---------------------------
1    1            Ford
2    1            BMW
3    1            VW
4    2            Tetris
5    2            Pong
6    3            Foobar Pencil Factory 
```

我想要一个返回类别和最后一个最大 N（例如：2）项目名称的查询：

```
category.id category.name item.id item.itemname
-------------------------------------------------
1           Cars          2       BMW
1           Cars          3       VW
2           Games         4       Tetris
2           Games         5       Pong
3           Pencils       6       Foobar Pencil Factory
4           Books         NULL    NULL 
```

我想写一个如下查询：

```
Select * From categories c
 Left Join (select * from items order by id desc) i
 On c.id=i=categoryid
  AND LIMIT 2 #comment: N=2 this line not supported
 Where i.categoryid = c.id
 Group By c.id 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:10:57.413

我并不是说它有效，但它应该有效：

```
SELECT c.*, i.id, i.itemname
FROM categories c
LEFT JOIN
  (SELECT i.*
   FROM items i
   LEFT JOIN items i2 ON i.categoryid = i2.categoryid AND i2.id > i.id
   GROUP BY i.id
   HAVING COUNT(*) < 2         # this 2 = N
  ) i ON c.id = i.categoryid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:27:53.650

检查[http://sqlfiddle.com/#!2/9a132/1](http://sqlfiddle.com/#!2/9a132/1)

```
SELECT *
FROM Categories c 
LEFT JOIN -- Items i 
(
    SELECT * FROM Items WHERE LOCATE(id,
    (
        SELECT GROUP_CONCAT(it.itemids) AS its
        FROM (
                SELECT (SUBSTRING_INDEX(GROUP_CONCAT(CONVERT(id, CHAR(8))
                                                     ORDER BY id DESC), ',', 2)) AS itemids
                FROM Items
                GROUP BY categoryid
            ) it
    )) <> 0
) i
ON i.categoryid = c.id; 
```

其中 N=2 是：SUBSTRING_INDEX(GROUP_CONCAT(CONVERT(id, CHAR(8)) ORDER BY id DESC), ',', 2)

因为 GROUP_CONCAT 默认是 sort ASC ；以上将变为 SUBSTRING_INDEX(GROUP_CONCAT(CONVERT(id, CHAR(8)) ), ',', -2)。但是 GROUP_CONCAT 结果被截断为 max len 1024 (group_concat_max_len)。

# game-maker - 在 GameMaker 上发帖请求

> ID：14873221
> 
> 赞同：1
> 
> 时间：2013-02-14T10:57:06.410
> 
> 标签：game-maker

我是游戏制作者的新手，现在正在创建一个非常简单的应用程序，它应该从 Web 服务器（以 JSON 格式）获取一些数据，并以特殊方式显示在设备上。GameMaker 看起来对创建这种跨平台应用程序很有用，但我很难找到一个好的样本。

我需要使用两个名称-值对（“数据”和“信息”）进行发布请求，并从 JSON 中解析结果。

也许，有人有样品，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T23:59:16.313

如果使用 GM Studio，请使用`http_post_string`，对于其他版本，您必须使用扩展。

# windows-phone-7 - 在 Windows phone 8 中为屏幕活动捕获视频

> ID：14873226
> 
> 赞同：0
> 
> 时间：2013-02-14T10:57:14.343
> 
> 标签：windows-phone-7, windows-phone-8, video-capture

我正在为 Windows Phone 8 开发绘图应用程序。我想在屏幕上绘图时捕捉视频，这可能吗？如果你有任何想法，请给我任何想法，实际上在 iOS 中我已经研究过它是可能的，但我在互联网上搜索了很多没有帮助请让我知道它是如何可能的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T10:39:17.013

您还可以使用 Expression Encoder 4 ( [http://www.microsoft.com/en-us/download/confirmation.aspx?id=27870](http://www.microsoft.com/en-us/download/confirmation.aspx?id=27870) ) 截屏 WP8 模拟器并从中获取精彩视频。您可以定义屏幕区域，如果需要，可以剪裁仿真器外壳。

这里有几篇关于如何做到这一点的帖子：http: [//blogs.msdn.com/b/mikeormond/archive/2010/09/27/windows-phone-7-screen-capture.aspx](http://blogs.msdn.com/b/mikeormond/archive/2010/09/27/windows-phone-7-screen-capture.aspx) [http://richarddunbar .blogspot.co.uk/2013/01/a-cool-way-to-promote-your-app.html](http://richarddunbar.blogspot.co.uk/2013/01/a-cool-way-to-promote-your-app.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:17:50.223

可悲的是，还没有发布任何东西（至少没有官方发布）。一些商店为诺基亚 Lumia 920 提供 HDMI 线，但据我所知，这是一个骗局。一些开发人员通过越狱设备成功地做到了这一点，但这并不是一个好的解决方案。最后 - 您当然可以使用模拟器并使用某种屏幕捕获软件记录窗口，但这会导致性能问题（模拟器会导致应用程序出现一些滞后）。这意味着要么，要么等到微软以某种方式解决这个问题......

# escaping - 在 YAML 中转义冒号

> ID：14873227
> 
> 赞同：29
> 
> 时间：2013-02-14T10:57:15.547
> 
> 标签：escaping, yaml, delimiter

有谁知道如何在 YAML 中转义冒号？我的 yml 中的关键是带有端口号的域，但 yml 文件不适用于此设置：

```
###BEGIN
production:
### THIS IS THE ONE I'm HAVING TROUBLE WITH ###
8.11.32.120:8000: GoogleMapsKeyforThisDomain
exampledomain.com: GoogleMapsAPIKeyforThatDomain

development:
 GoogleMapsAPIKeyforDevelopmentDomain
###END 
```

我正在使用一个名为 YM4R 的谷歌地图插件，它使用一个 .yml 文件来选择不同的谷歌地图 API 密钥，具体取决于我的应用程序的托管位置......

所以，我正在尝试制作`8.11.32.120:8000 the key`. 知道怎么做吗？（如果您关心，它在 gmaps_api_key.yml 文件中）

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-14T11:01:53.883

您需要在遇到问题的键周围加上引号。IE：

```
"8.11.32.120:8000": GoogleMapsKeyforThisDomain 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-06-22T18:58:31.223

要以另一种方式回答列表项的评论，例如：

```
- sed -i "s/driver: .*/driver: pdo_$DB/" etc/config.yaml 
```

是将它们写为：

```
- >-
  sed -i "s/driver: .*/driver: pdo_$DB/" etc/config.yaml 
```

或作为：

```
- 'sed -i "s/driver: .*/driver: pdo_$DB/" etc/config.yaml' 
```

# matlab - 索引超出范围错误，因为 numel

> ID：14873232
> 
> 赞同：1
> 
> 时间：2013-02-14T10:57:31.197
> 
> 标签：matlab

它循环直到最后一次，然后我收到一个错误“尝试访问 EQ_NUM(8)；索引超出范围，因为 numel(EQ_NUM)=7。”

```
N_NODE=8
N_PRE_DISP=2
DISP_NODE= [2 7]

EQ_NUM = 0;
for i = 1:N_PRE_DISP 
    NODE=DISP_NODE(i);
    EQ_NUM(NODE) = -i;
end

ROW = 0;
for i = 1:N_NODE
    if (EQ_NUM(i)==0)
        ROW = ROW+1;
        EQ_NUM(i)=ROW;
    end 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:04:46.673

在这个循环中

```
EQ_NUM = 0;
for i = 1:N_PRE_DISP 
    NODE=DISP_NODE(i);
    EQ_NUM(NODE) = -i;
end 
```

你`EQ_NUM`用 7 个元素创建；取的最大值是中`NODE`的最大值。`DISP_NODE(1:2)``7`

在这个循环中

```
ROW = 0;
for i = 1:N_NODE
    if (EQ_NUM(i)==0)
        ROW = ROW+1;
        EQ_NUM(i)=ROW;
    end 
end 
```

您循环`i=1:8`并最终尝试执行`EQ_NUM(8)==0`.

你需要修复一些东西，但我不知道是什么。可能您认为 Matlab 数组是从 0 开始索引的，但事实并非如此，Matlab 数组的第一个索引是 1。

# c - 二叉树：用户在c编程中决定它应该是数字树还是单词树

> ID：14873233
> 
> 赞同：0
> 
> 时间：2013-02-14T10:57:31.857
> 
> 标签：c, binary-tree

在我的作业中，我必须创建一个用户输入详细信息的二叉树。

用户做的第一件事是如果他们想要创建一个数字树，则输入 1，如果他们想要一个单词树，则输入 2。

他们选择的树类型是程序运行期间的类型。

为了完成分配，必须编写许多函数（和一些结构）。

我的问题是如何编写适用于 int 和 char 的通用函数？

例如，如果它是一个数字树，那么节点的结构将包括： int key; list_t* 值列表；节点*左；节点* 对；

但如果它是一个单词列表，那么结构看起来是一样的，只是它不是 int key，而是 char key。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:02:17.873

您可以采取的方法是将结构中的数据定义为联合，如下所示：

```
struct _Node
{
  ...
  union
  {
    char* c;
    int i;
  } data;
}; 
```

比用户做出选择时，根据它访问正确的联合成员。

**编辑**

例如，假设用户选择了一种类型`int`。并且您希望在树中插入一个新值。（为了简洁起见，我将省略错误检查，但请记住检查内存分配是否成功）。

```
struct _Node* newElem = allocNode();

if (get_user_elected_type() == INT)
    newElem->data.i = user_input.i; // Your methods will also need to accept a union 
```

这种方式有严重的缺点（例如，添加新类型并不容易）。最重要的是，它演示了 C 中的泛型编程是多么糟糕。（使用`void*`最终会变得一样糟糕）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:03:05.847

解决此问题的解决方案很少（您尝试做的事情称为泛型编程）

1.  使用 void * 键，并用正确的数据填充它（建议这样做，因为更通用，但也更复杂）
2.  使用`union`带有 2 个字段的 a：一个 int 和一个 char*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:20:55.483

对于家庭作业，更简单的方法是使用`union`数据类型：

```
struct node {
  union {
    char *s
    int   i;
  } data;
  struct node *left;
  struct node *right;
}; 
```

并创建两组函数，一组用于管理整数值，另一组用于管理字符串值：

```
void insertIntNode(struct node *root, struct node *newNode)
{
  if (newNode->data.i < root->data.i)
    if (root->left != NULL)
      insertIntNode(root->left, newNode);
    else
      root->left = newNode;
  else
    if (root->right != NULL)
      insertIntNode(root->right, newNode);
    else
      root->right = newNode;
}

void insertWordNode(struct node *root, struct node *newNode)
{
  if (strcmp(root->data.s, newNode->data.s) < 0)
    if (root->left != NULL)
      insertWordNode(root->left, newNode);
    else
      root->left = newNode;
  else
    if (root->right != NULL)
      insertWordNode(root->right, newNode);
    else
      root->right = newNode;
  } 
```

请记住，您需要对单词数据进行一些额外的内存管理：

```
struct node *createWordNode(char *str)
{
  struct node *r = malloc(sizeof *r);
  if (r)
  {
    r->data.s = malloc(strlen(str) + 1);
    if (r->s) 
      strcpy(r->data.s, str); 
    r->left = r->right = NULL;
  }
  return r;
}

void destroyWordNode(struct node **n)
{
  free((*n)->data.s);
  free(*n);
  *n = NULL;
} 
```

更灵活的方法是使用 a`void *`指向您的数据项，然后将所有类型感知操作（分配、赋值、比较、显示等）委托给隐藏在一组函数指针后面的其他函数。例如：

```
struct node {
  void *data;
  struct node *left;
  struct node *right;
};

struct node *newNode(void *data, void *(*copy)(const void *))
{
  struct node *n = malloc(sizeof *n);
  if (n)
  {
    n->left = n->right = NULL;
    n->data = copy(data);
  }
  return n;
}

void insert(struct node *root, struct node *newNode, 
    int (*compare)(const void *, const void *))
{
  if (compare(newNode->data, root->data) < 0)
    if (root->left != NULL)
      insert(root->left, newNode, compare);
    else
      root->left = newNode;
  else
    if (root->right != NULL)
      insert(root->right, newNode);
    else
      root->right = newNode;
} 
```

在上面的示例中，为节点`data`元素分配内存和比较两个`data`元素的细节被委托给其他函数，指向这些函数的指针作为参数传递给列表管理函数。这样你就可以编写一个`newNode`和`insert`函数，但它能够处理任意节点数据类型。因此，对于您的整数树，您可以编写如下函数

```
void *copyInt(const void *data)
{
  const int *src = data;
  int *dst = malloc(sizeof *dst);
  if (dst)
  {
    *dst = *src;
  }
  return dst;
}

int compareInt(const void *lhs, const void *rhs)
{
  const int *ilhs = lhs;
  const int *irhs = rhs;
  if (*ilhs < *irhs)
    return -1;
  else if (*ilhs == *irhs)
    return 0;
  else
    return 1;
} 
```

然后你会打电话`newNode`给`insert`喜欢

```
void insertIntValue(struct node *root, int value)
{
  struct node *n = newNode(&value, copyInt);
  if (n)
    insert(root, n, compareInt);
} 
```

这种方法的*最大*缺点是您将类型安全性扔到窗外并进入迎面而来的交通；因为我们正在使用`void *`一切。编译器将无法为我们捕获类型不匹配。没有什么可以阻止您将错误的复制或比较函数传递给特定类型的通用例程。

`insertIntValue`这给我们带来了第二个缺点——您仍然需要为您想要支持的每种数据类型（`insertFloatValue`、`insertStringValue`、`insertMyObnoxiousDataTypeValue`等）以及所有委托编写一个类型感知接口（例如上面的函数）。部分是为了避免类型安全问题，部分是因为我们的“通用”函数确实不是为了直接调用而设计的。例如，该`newNode`函数需要一个指针作为第一个参数，这意味着您不能编写类似

```
struct node *n = newNode(10, copyInt); 
```

或者

```
struct node *n = newNode(3.14159, copyDouble); 
```

IOW，您不能将文字作为第一个参数传递；你*必须*传递一个对象的地址。

第三个主要缺点是您最终会进行*大量*内存管理，这很痛苦。您必须创建输入的副本；否则，您最终会将相同的指针值（传递给 的指针值`newNode`）分配给树中的每个节点。每个都`malloc`必须有一个匹配`free`项，否则您最终会泄漏大量内存。您必须遵守如何分配和解除分配数据项的规定。

坦率地说，用 C 语言构建健壮的通用容器是一件非常*痛苦*的事情。这样做的唯一真正原因是您可以真正体会到 C++ 中的模板以及 Java 和 C# 中的泛型的价值。

# php - Memcache 没有通过 Ajax 调用控制器被删除

> ID：14873237
> 
> 赞同：0
> 
> 时间：2013-02-14T10:57:41.653
> 
> 标签：php, ajax, zend-framework, memcached

我在一个项目中有一个 MVC 结构，其中有一个更改下拉列表，我将其称为 Controller，如下所示。

**Javascript代码**

```
function getData(newSelection)//This will get called on change of dropdown
$.ajax({
        type: 'POST',
        url: '/controller_name/perform',
        data: {
            'dropDownSelection': newSelection
        },
        success: function(data){     
            //alert(data);  /* always "failed" */                                      
            window.location.href=window.location;
        }
}); 
```

现在，在执行操作（即名为 PerformAction 的方法）中，调用正常进行。

**执行动作**

```
 /* somehow I am forming $key; trust me, its formed correct */
        $cache = Zend_Registry::get("cache");

        if($cache->delete($key))
            echo ("success");
        else
            echo ("failed");//this is what always returned
        exit; 
```

但是在上面代码之后执行的一些代码中，我正在检查缓存是否退出，然后它显示为存在。

**我正在检查的代码**

```
 $cache = Zend_Registry::get("cache");
       //After building $key.                       
       //$cache->delete($key);    //Here it works

        $cacheResult = $cache->get($key);
        if (!empty($cacheResult)) ) {
           //exit("here it is coming, which I dont want for certain situation");
            return $cacheResult;
        }
        $reslut = /* Now I am building new result as per new selection from dropdown */
        $cache->set($key,$result,MEMCACHE_COMPRESSED,300);
        return $result;  //i want this to be returned instead of cached result 
```

所以这就是场景。如果我从 $cache->delete($key); 中删除评论，我想获得使用下拉列表中的新选择构建的新结果；上面它总是会删除缓存，但我不想要这个。我想知道我哪里出错了还是因为 AJAX？

# sql - 具有分组依据的不同行

> ID：14873239
> 
> 赞同：1
> 
> 时间：2013-02-14T10:57:45.330
> 
> 标签：sql, group-by

我有一张桌子：

```
id_object | version | document
------------------------------
1         | 1       | 1 
1         | 2       | 2 
2         | 1       | 3 
2         | 2       | 1 
2         | 3       | 2 
1         | 1       | 3 
```

我只想按对象显示一行，其中包含版本（最大）和文档。我已经尝试了以下“

```
Select Distinct
  id_object ,
  Max(version),
  document
From
  prods
Group By
  id_object, document 
```

我得到了这个结果

```
1         | 1       | 1
1         | 2       | 2
2         | 1       | 3
2         | 2       | 1
2         | 3       | 2
1         | 1       | 3 
```

正如你所看到的，我得到了整张桌子。我的问题是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:01:22.187

由于您按`id_object` **and** `document`分组，因此您将无法获得所需的结果。那是因为`document`每个人都不一样`version`。

```
select x.id_object, 
       x.maxversion as version,
       p.document
from 
(
   Select id_object, Max(version) as maxversion
   From prods
   Group By id_object
) x
inner join prods p on p.id_object = x.id_object 
                   and p.version = x.maxversion 
```

您首先必须`id_object`选择`max(version)`. 这可以与实际数据相结合以获得正确的`document`.

您必须这样做，因为您不能选择不在您的`group by`子句中的列，除非您对它们使用聚合函数（`max()`例如）。

（MySQL 可以选择非聚合列，但请避免这样做，因为结果并不总是清晰甚至无法预测）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:20:49.583

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/a05e0/2)**

```
SELECT p.id_object, 
       p.version, 
       p.document
FROM prods p
WHERE p.version = (SELECT Max(version)
                   FROM prods
                   WHERE id_object = p.id_object) 
```

结果：

```
| ID_OBJECT | VERSION | DOCUMENT |
----------------------------------
|         1 |       2 |        2 |
|         2 |       3 |        2 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:02:28.777

```
select prods.id_object, version, document
from prods inner join
(select id_object, max(version) as ver
from prods
group by id_object) tmp on prods.id_object = tmp.id_object and prods.version = tmp.ver 
```

# java - java中的原始套接字

> ID：14873243
> 
> 赞同：10
> 
> 时间：2013-02-14T10:58:08.783
> 
> 标签：java, sockets, raw-sockets

我对java套接字编程很陌生。我已经了解了 java 只处理 Internet 域套接字，它将支持 UDP 和 TCP 以及原始 IP 协议。我想知道java是否支持Raw Sockets而不使用任何第三方应用程序？如果可能的话，有人可以帮我举个小例子吗？任何小建议都会非常有用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:13:36.613

Java 标准库中对[原始套接字](http://en.wikipedia.org/wiki/Raw_socket)唯一真正可用的支持似乎是[InetAddress.isReachable()](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html#isReachable%28int%29)，如果允许，它可能会执行 ICMP ping。这真的不多，甚至可能不是真正的原始套接字，只是多了一个协议。

对于其他类型的原始通信，我建议通过一些基于 JNI 的包装器[在 Linux 下使用 Berkley 套接字（需要 root 权限）。](http://codebase.eu/tutorial/linux-socket-programming-c/)

# c++ - 错误 C2070 - 未指定外部数组大小。- 数组传递给 MACRO

> ID：14873244
> 
> 赞同：0
> 
> 时间：2013-02-14T10:58:09.247
> 
> 标签：c++, macros, extern

我知道编译器无法确定不完整对象的大小，因此 MAKE_ARRAY_RANGE 失败。MAKE_ARRAY_RANGE 执行 sizeof 操作。

1.  我该怎么做才能让这个工作。一种方法是让我在 Ah 中指定 A_array[3] 的大小 但问题是有人可以修改 A.cpp 而不是更新 Ah 中的索引

2.  A_array 的大小是否可以（不完全）传递给 MACRO（有点像变量参数宏），然后 MAKE_ARRAY_RANGE 将使用该信息并保持其当前功能。我对 MACRO 的经验很少，在这方面对这个问题的帮助会很棒。

如何将 make_array.h 中定义的 MACRO 和类修改为 MAKE_ARRAY_RANGE？

```
A.h
----------------------
#ifndef INC_A_H
#define INC_A_H
#include "make_array.h"

extern const int A_array[];
extern const int_array_range my_array;  
#endif
----------------------

A.cpp
----------------------
#include "make_array.h"
#include "A.h"
const int A_array[] = {10, 20, 30};
----------------------

B.cpp
----------------------
#include <iostream>
#include "A.h"
#include "make_array.h"

int main()
{
    const int_array_range my_array = MAKE_ARRAY_RANGE(A_array);

    const int *curr = my_array.first; // Accessing std::pair first

    const int *last = my_array.second; // Accessing std::pair second 

    for(curr; curr!=last; curr++)
    {
        std::cout << *curr << "\n";
    }

    int x;
    std::cin >> x;
    return 0;
}
----------------------

make_array.h
----------------------
#ifndef INC_MAKE_ARRAY_H
#define INC_MAKE_ARRAY_H

#include <iostream>
#include <map>

#define ARRAY_SIZE( my_array ) (sizeof(my_array)/sizeof((my_array)[0]))

template< typename Array_Entry>
class ARRAY_RANGE : public std::pair<Array_Entry*,Array_Entry*>
{
    public:
    ARRAY_RANGE() : std::pair<Array_Entry*,Array_Entry*>( 0, 0 ) {}
    ARRAY_RANGE( Array_Entry *start, Array_Entry *end ) : std::pair<Array_Entry*,Array_Entry*>( start, end ) {}
};

template< typename Array_Entry>
ARRAY_RANGE<Array_Entry> make_array_range( Array_Entry *start, Array_Entry *end )
{
    return ARRAY_RANGE<Array_Entry>( start, end );
}

#define MAKE_ARRAY_RANGE( my_array )\
make_array_range( (my_array)+0, (my_array) + ARRAY_SIZE( my_array ) )

typedef ARRAY_RANGE<const int> int_array_range;

#endif 
```

输出：

```
1>projects\test_extern\test_extern\b.cpp(7): error C2070: 'const int []': illegal sizeof operand 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:18:03.517

你可以添加一个

```
extern const size_t A_array_size; 
```

对啊和

```
const size_t A_array_size = sizeof(A_array); 
```

到 A.cpp 然后`A_array_size`在你的`MAKE_ARRAY_RANGE`-macro 中使用。比如像这样：

```
#define ARRAY_SIZE( my_array ) (my_array ## _size) / sizeof((my_array)[0])) 
```

虽然这解决了您上面描述的问题，但我怀疑这会解决您的实际问题。你不能用`std::list` `or std::vector`吗？

# php - PHP：如何通过 ODBC 执行 ms sql 程序

> ID：14873246
> 
> 赞同：1
> 
> 时间：2013-02-14T10:58:09.300
> 
> 标签：php, sql-server, odbc, procedure

我需要使用 php 通过 odbc 在 romote 服务器上运行 ms sql 过程。通常，要执行一些简单的查询，如选择、插入等，我正在使用：

```
$conn=odbc_connect('my_odbc','log','pass');
$sql="Select la-la";
$rs=odbc_exec($conn,$sql);
while (odbc_fetch_row($rs)) {echo..} 
```

但是当我试图运行程序时：

```
$sql="{CALL vp_getrestsforexcel(?,?)}"; 
```

或其他不同的变体 - 没有任何反应。

你能告诉我，我做错了什么吗？谢谢。

# asp.net - 隐藏时RequiredFieldValidator仍然验证

> ID：14873250
> 
> 赞同：3
> 
> 时间：2013-02-14T10:58:22.700
> 
> 标签：asp.net, validation

我有 2 个字段需要验证，如果它们显示在屏幕上。当表单最初加载时，它们是隐藏的，除非从下拉框中选择项目，否则它们将保持隐藏状态。选择值后，将出现 2 个字段，然后验证正常工作。但是，如果选择了另一个不会使这两个字段出现的值，则它们仍在验证中并且不允许页面提交。关于如何实现这一目标的任何想法？

```
function DisplayOutageDates() {
    if ($('#ddImpact').val() == "Service Affecting") { 
    $('#outageDates').css('display',''); 
    document.getElementById('txtOutageStartDate').Visible = true;
    document.getElementById('RFVOutageStartDate').Visible = true;
    } else {
    $('#outageDates').css('display','none');
    document.getElementById('txtOutageStartDate').Visible = false;
    document.getElementById('RFVOutageStartDate').Visible = false;
    }
}

<asp:RequiredFieldValidator ID="RFVOutageStartDate" runat="server" 
    ControlToValidate="txtOutageStartDate" SetFocusOnError="true"
    ErrorMessage="Please enter the Outage Start Date" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:09:15.420

您可以使用 ：

```
ValidatorEnable(val, enable): 
Takes a client-validator and a Boolean value. 
Enables or disables a client validator. 
Being disabled will stop it from evaluating and it will always appear valid. 
```

[在msdn](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside)上找到。

使用 Javascript 这看起来像：

```
ValidatorEnable(document.getElementById('<%=Validator1.ClientID%>'), state);
//where state would be a boolean 
```

在 JQuery 中，这看起来像：

```
 ValidatorEnable($("#<%= Validator1.ClientID %>")[0], state); 
```

在这里找到：http: [//codeclimber.net.nz/archive/2008/05/14/how-to-manage-asp.net-validation-from-javascript-with-jquery.aspx](http://codeclimber.net.nz/archive/2008/05/14/how-to-manage-asp.net-validation-from-javascript-with-jquery.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:06:27.317

我猜你需要显示和隐藏`Validator`控件作为显示和隐藏输入控件。

* * *

**更新**

如果您`Validator`使用它们隐藏控件，`display:none;`它们仍然会被渲染并参与验证过程。您需要通过将`Visible`属性设置为*false*来隐藏它们。这样他们就不会被渲染，也不会参与验证过程。

# c# - 无法使用 C# 创建注册表值，在 mscorlib.dll 中发生错误 Unhandeled error 'System.Security.SecurityException'

> ID：14873252
> 
> 赞同：0
> 
> 时间：2013-02-14T10:58:23.087
> 
> 标签：c#

我使用以下代码创建注册表项 Nodrives，其值为 3FFFFFF`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer`

但它给了我安全例外。

```
RegistryKey rkey;
rkey = Registry.CurrentUser.OpenSubKey("Software\\Microsoft\\Windows\\CurrentVersion\\Policies", true); 
rkey.CreateSubKey("Explorer"); 
rkey.SetValue("NoDrives", "3FFFFFF");
rkey.Close(); 
```

代码是否正确或需要任何修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:07:28.463

可能“Explorer”已经存在，然后`CreateSubKey`失败了。

您应该尝试打开 ...\Explorer，并且仅当它不存在时才创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:58:36.743

尝试强制您的应用以管理员身份运行。您可以按照以下步骤操作：

在解决方案资源管理器中=>右键单击项目名称=>添加新项目=>选择“应用程序清单文件”=>单击添加=>打开清单文件=>将“requestedExecutionLevel”节点更改为：

# javascript - 使用 javascript/jQuery 在选择框中搜索值

> ID：14873255
> 
> 赞同：0
> 
> 时间：2013-02-14T10:58:32.263
> 
> 标签：javascript, jquery, dom

我正在尝试在 HTML 选择中搜索选项以查找哪些选项的值与数组中的任何元素匹配

例如，我有一个整数值数组，如下所示：

```
var arrTaken = [641, 640]; 
```

我有一个这样的选择元素：

```
<select id="Substance3" name="Substance_3">
<option value="640">A</option>
<option value="641">B</option>
<option value="642">C</option>
<option value="643">D</option>
<option value="644">E</option>
</select> 
```

然后我遍历 select 上的选项，试图找到任何匹配的元素值：

```
$('#Substance3 > option').each(function(index, element)
{
    console.log('current element value is: ' + element.value);
    var index = arrTaken.indexOf(element.value);
    console.log('element is at index: ' + index);
}); 
```

问题是索引返回为 -1，这意味着在数组中找不到该值。但是，尝试与

```
var index = arrTaken.indexOf(640); 
```

作品

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:00:29.143

首先将值转换为数字：

```
 var index = arrTaken.indexOf(+element.value);
 //                           ^ unary plus 
```

`.indexOf`使用严格相等比较（与 相同`===`）。`element.value`返回一个字符串，而您的数组包含数字。

[**演示**](http://jsfiddle.net/WprWJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:08:21.810

将数组声明为 this

```
var arrTaken = ['641', '640']; 
```

# assembly - 装配、溢出检测

> ID：14873261
> 
> 赞同：1
> 
> 时间：2013-02-14T10:59:00.360
> 
> 标签：assembly, binary, mips

我正在使用 pcspim。我有两个 N 位长度的二进制数。（2 的补码）说其中一个在 8 美元（寄存器 8）中，另一个在 9 美元（寄存器 9）这个数字是相应给定数字的“2 的补码”。（一个 2 的补码在寄存器 8 中，另一个 2 的补码在寄存器 9 中）

我想做以下事情：如果没有溢出，则将这两个数字添加到所有寄存器（例如 $10），如果有溢出，则添加所有正数。如果没有溢出，则将任何寄存器（例如 $11）设置为全 0，负数相加，如果溢出，则设置所有寄存器。

（在一种情况下，我有 2 个正数的 2 补码（8 美元和 9 美元），在 2-n 情况下，我有 2 个负数的 2 补码（8 美元和 9 美元））

我怎样才能做到这一点？（不使用 if）

对于这些数字不是二进制补码的情况，我可以将加法结果移位相应位数，以检测溢出。

我不知道在这种情况下该怎么办。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T20:16:29.547

如前所述，当和的符号相同而它们和的符号不同时，会发生有符号整数溢出。

示例（为简洁起见，使用 8 位数字）：

```
0x7F (+127) + 0x00 (+0) = 0x7F (+127)  
0x7F (+127) + 0x01 (+1) = 0x80 (-128) overflow  
0x80 (-128) + 0x7F (+127) = 0xFF (-1)  
0x80 (-128) + 0xFF (-1) = 0x7F (+127) overflow 
```

爱荷华州，

```
overflow = (sign1 is equal to sign2) AND (sign of sum is NOT equal to sign1) 
```

您可以使用 XOR 表示相等：

```
0 XOR 0 = 0 - equal
0 XOR 1 = 1 - not equal
1 XOR 0 = 1 - not equal
1 XOR 1 = 0 - equal 
```

接着：

```
overflow = (NOT(sign1 XOR sign2)) AND (sign of sum XOR sign1) 
```

您可以对这部分进行编码，如下所示：

```
addu $10,$8,$9 # bit 31 of r10 = sign of sum
xor $10,$10,$8 # bit 31 of r10 = sign of sum XOR sign1
xor $2,$8,$9 # bit 31 of r2 = sign1 XOR sign2
nor $2,$2,$2 # bit 31 of r2 = NOT(sign1 XOR sign2)
and $10,$10,$2 # bit 31 of r10 = (NOT(sign1 XOR sign2)) AND (sign of sum XOR sign1) 
```

现在，如果您想将 r10 的第 31 位扩展到寄存器的所有其他位（这样您将在 r10 中获得全零或全一），您可以使用算术右移指令：

```
sra $10,$10,31 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:25:33.533

对于正整数，它应该保持`(a+b)>a`. 如果不是，一个明显的原因是溢出。为此，有 slt 指令。对于负数，逻辑自然是相反的。

在 c 中，工作代码是：

```
 overflow==((a+b)<a)^(b<0); 
```

在 MIPS 汇编器中：

```
 add $8, $8, $9
 slt $11, $9, $0    // is 'b' < 0 ?
 slt $10, $8, $9    // is 'a+b' < b ?
 xor $10, $10, $11  // combine the expressions 
```

我不知道，为什么要分别测试阴性和阳性 OF 的条件，但这些条件是：

```
 negative_overflow == overflow && (b<0) 
    and $11, $11, $10
 positive_overflow == overflow && (b>=0)
    slt $9, $0, $9     // 0<b
    and $10, $10, $9   // wasting 'b' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:14:06.093

您将需要检查结果的符号位。在二进制补码加法中，如果您添加 2 个正数并最终得到一个负数，则您已经溢出。同样，如果您添加 2 个负数并最终得到一个正数，则您已经溢出。正负数相加不能溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:14:30.587

只有当我们将两个具有相同符号的数字相加并在结果中得到不同的符号时才会发生有符号溢出（为什么？）。所以：

```
 subu $t0,$t1,$t2 # subtract and don’t trap
    xor $t3,$t1,$t2 # check to see if the signs of the inputs are different
    bgez $t3,skip # if they aren’t different, no overflow
    xor $t3,$t0,$t1 # check to see if the signs of the difference and first input are different
    blz $t4,overflow # if they’re different, there has been overflow
skip:
    # setup a register you wish with all zeroes
overflow:
    # setup the register with all bits one 
```

如果你想省去`bgez`，你必须要有创意；您可以使用结果`$t3`来计算结果并根据需要使用符号扩展进行设置`$10`。

# rspec - 如何使用 Capybara 2.0.2 和 rspec 2.10.0 测试页面标题？

> ID：14873268
> 
> 赞同：0
> 
> 时间：2013-02-14T10:59:39.357
> 
> 标签：rspec, capybara

我使用 Capybara 2.0.2 和 Rspec 2.10.0 来测试页面标题：

```
 page.should have_selector('title', :text => 'Page title') 
```

但它不起作用。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:08:52.673

我有同样的问题，最后写了我自己的匹配器来让它工作。
请参阅 StackOverflow Q&A [RSpec & Capybara 2.0 了解我的 have_selector 测试](https://stackoverflow.com/q/13573525/567863)以了解有关此问题的详细信息和有趣的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:01:56.527

不确定您使用的是哪个版本的 gem，但我遇到了一个类似的实例，使用`:text`失败但当我使用`:content`它时通过了测试。

尝试更换

```
 page.should have_selector('title', :text => 'Page title') 
```

和

```
page.should have_selector("title", :content => "Page title") 
```

# qt - 将 Cryptlib 库与 Qt 创建者链接

> ID：14873270
> 
> 赞同：2
> 
> 时间：2013-02-14T10:59:50.347
> 
> 标签：qt, qt-creator, linker-errors, cryptlib

我有基于 Qt 5.0 的 Qt Creator 2.6.1 我已经用 Visual Studio 2010 构建了 cryptlib

当我构建项目时，所有 cryptlib 项目都在 C:\SDK\cl342 上，crypt.h 和 cl32.lib 和 cl32.dll 都在这个文件夹中 C:\SDK\cl342

我从 cryptlib 调用的每个方法（例如 cryptInit）上都出现链接器错误，我尝试从项目菜单中添加它并添加外部库，它对 pro 文件进行了很多更改，但甚至不允许我包含 crypt.h。

mainwindow.obj:-1: 错误: LNK2019: 函数“public: __thiscall MainWindow::MainWindow(class QWidget *)”中引用的无法解析的外部符号_cryptEnd@0 (??0MainWindow@@QAE@PAVQWidget@@@Z) –< /p>

我的专业文件看起来像这样。

```
**QT       += core gui
greaterThan(QT_MAJOR_VERSION, 4): QT += widgets
TARGET = testlistview
TEMPLATE = app
SOURCES += main.cpp\
        mainwindow.cpp
HEADERS  += mainwindow.h
FORMS    += mainwindow.ui
INCLUDEPATH = C:\SDK\cl342\
DEPENDPATH += C:\SDK\cl342\
LIBS += C:\SDK\cl342\cl32.lib** 
```

# ant - 如何为foreach调用多个蚂蚁目标

> ID：14873276
> 
> 赞同：2
> 
> 时间：2013-02-14T11:00:12.340
> 
> 标签：ant, for-loop, build, ant-contrib

这是我想要做的，我想在构建期间从我的大量属性文件中替换名称和地址，但不幸的是我不能这样做，有没有更好的方法来做到这一点而不必复制粘贴 foreach 两次。有人可以帮忙吗？

```
<target name="replace" >
<foreach target="replace.name,replace.address" param="foreach.file" inheritall="true">
    <path>
                <fileset dir="${build.tmp.dir}/resource">
                <!-- some complicated conditions go here -->
    </path>
</foreach>
</target>

<target name="replace.address">
    <echo>replacing #Address# for ${foreach.file}</echo>
    <replace file="${foreach.file}" token="#Address#" value="${address}" />
</target>

<target name="replace.name">
    <echo>replacing #Name# for ${foreach.file}</echo>
    <replace file="${foreach.file}" token="#Name#" value="${Name}" />
</target> 
```

.properties 文件看起来像

```
name=#Name#
address=#Address# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:42:30.510

`target`of`foreach`并非旨在采用多个目标名称。它只遍历提供的列表，而不是提供的目标。

为了使实施更加干燥，您可以

*   使用`for`循环而不是`foreach`两个`antcall`s；
*   使用`macrodef`with `for`loop --`macrodef`可以将几个 ant xml 代码打包成一个类似任务的东西

Actually, for the two targets -- `replace.address` and `replace.name`, are you sure that you want to call them from the commandline? If not, name them `-replace.address` and `-replace.name` or use `macrodef` -- exposing the iteration body of `foreach` is not a good practice.

# python - CookieConflictError - 尝试以编程方式登录 Google 财经时的 APISID

> ID：14873277
> 
> 赞同：1
> 
> 时间：2013-02-14T11:00:27.830
> 
> 标签：python, python-requests, google-finance

我正在尝试编写一个脚本以编程方式登录 Google Finance，查看我的投资组合，然后在我的桌面上显示结果。我正在使用该`requests`模块，目前停留在“登录”部分。

我不断收到此错误`requests.cookies.CookieConflictError: There are multiple cookies with name, 'APISID'`

这是*整个脚本*，错误抛出`line 48`。我猜它与[请求保持活动](http://docs.python-requests.org/en/latest/user/advanced/#keep-alive)有关并且连接没有正确回收？

```
#!/usr/bin/env python

import getpass
import re
import requests

email = raw_input("Enter your Google username: ")
password = getpass.getpass("Enter your password: ")

session = requests.Session()

# Define URLs
login_page_url = 'https://accounts.google.com/ServiceLogin?passive=true&service=finance'
authenticate_url = 'https://accounts.google.com/ServiceLoginAuth?service=finance'
gf_home_page_url = 'http://www.google.com/finance/portfolio'

login_page_contents = session.get(login_page_url).text

# Find GALX value
galx_match_obj = re.search(r'name="GALX"\s*value="([^"]+)"', login_page_contents, re.IGNORECASE)
galx_value = galx_match_obj.group(1) if galx_match_obj.group(1) is not None else ''

# Find DSH value
dsh_match_obj = re.search(r'id="dsh"\s*value="([^"]+)"', login_page_contents, re.IGNORECASE)
dsh_value = dsh_match_obj.group(1) if dsh_match_obj.group(1) is not None else ''

# Set up login credentials
login_params = {
   'Email': email,
   'Passwd': password,
   'continue': 'http://www.google.com/finance/portfolio',
   'followup': 'http://www.google.com/finance/portfolio',
   'service': 'finance',
   'GALX': galx_value,
   'pstMsg': 0,
   'dnConn': '',
   'checkConnection': '',
   'timeStmp': '',
   'secTok': '',
   'bgresponse': 'js_disabled',
   'PersistentCookie': 'yes'
}

print galx_value
print dsh_value

# Login
r = session.post(authenticate_url, params=login_params) # <- Error thrown here
print r.text
exit 
```

追溯：

```
Traceback (most recent call last):
  File "crawl.py", line 48, in <module>
    r = session.post(authenticate_url, params=login_params)
  File "/Users/nathan/Development/Scripts/google-finance-crawler/requests/sessions.py", line 358, in post
    return self.request('POST', url, data=data, **kwargs)
  File "/Users/nathan/Development/Scripts/google-finance-crawler/requests/sessions.py", line 312, in request
    resp = self.send(prep, **send_kwargs)
  File "/Users/nathan/Development/Scripts/google-finance-crawler/requests/sessions.py", line 426, in send
    history = [resp for resp in gen] if allow_redirects else []
  File "/Users/nathan/Development/Scripts/google-finance-crawler/requests/sessions.py", line 163, in resolve_redirects
    resp.cookies.update(cookiejar)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_abcoll.py", line 494, in update
    self[key] = other[key]
  File "/Users/nathan/Development/Scripts/google-finance-crawler/requests/cookies.py", line 246, in __getitem__
    return self._find_no_duplicates(name)
  File "/Users/nathan/Development/Scripts/google-finance-crawler/requests/cookies.py", line 285, in _find_no_duplicates
    raise CookieConflictError('There are multiple cookies with name, %r' % (name))
requests.cookies.CookieConflictError: There are multiple cookies with name, 'APISID' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:33:42.647

这是 中的一个错误`requests`，请参阅[issue 1189](https://github.com/kennethreitz/requests/issues/1189)。

当前提议的修复是简单地删除第 163 行`requests/sessions.py`：

```
resp.cookies.update(cookiejar) 
```

# ios - 销售人员登录

> ID：14873279
> 
> 赞同：0
> 
> 时间：2013-02-14T11:00:33.593
> 
> 标签：ios, objective-c, cocoa-touch, ios4

我从[这里](https://github.com/palaniraja/Force.com-Toolkit-for-iOS/tree/master/SVNTest)使用 zksforce SDK 。每次我启动我的应用程序时，它都会显示我的登录表单。而不是这个，我只想保持登录会话，直到用户注销。可能吗？我该怎么办？以下是我的代码，显示了 salesforce 的登录表单。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    sectionViewController = [[SFT1SectionViewController alloc] init];
    oAuthViewController = [[FDCOAuthViewController alloc] initWithTarget:sectionViewController selector:@selector(loginOAuth:error:) clientId:kSFOAuthConsumerKey];
    oAuthViewController.modalPresentationStyle = UIModalPresentationFormSheet;
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:oAuthViewController];
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我还尝试使用 loginWithUsername:password: 方法进行自定义登录，但它给了我令牌错误，说我应该将安全令牌与密码一起附加。这意味着什么？我正在使用以下行调用方法：

```
[[FDCServerSwitchboard switchboard] loginWithUsername:usernameTextField.text password:passwordTextField.text target:rootViewController selector:@selector(loginResult:error:)]; 
```

此问题也可以通过在用户使用 Web 视图登录时保存密码来解决。可以这样保存密码吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T11:49:24.790

```
NSString *password = @"Your password here";
NSString *token = @"your token here";
NSString *passwordToken = [NSString stringWithFormat:@"%@%@", password, token];
[[FDCServerSwitchboard switchboard] loginWithUsername:username password:passwordToken target:self selector:@selector(loginResult:error:)]; 
```

这样就可以了。如果您忘记了令牌，您可以重置令牌，令牌将发送到您的电子邮件。您可以通过设置 -> 个人信息 -> 重置令牌来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T20:22:44.150

看起来您可能缺少安全令牌。它附加到密码的末尾。

此链接说明如何生成令牌

[https://login.salesforce.com/help/doc/en/user_security_token.htm](https://login.salesforce.com/help/doc/en/user_security_token.htm)

# facebook-graph-api - 用户生成照片的标准

> ID：14873280
> 
> 赞同：1
> 
> 时间：2013-02-14T11:00:39.453
> 
> 标签：facebook-graph-api, facebook-opengraph, user-generated-content

使用用户生成的照片操作属性的要求记录为：

*“只有当照片是原始照片并且由用户使用实际相机拍摄时，才能使用用户生成的照片操作属性。”*

关于执行的严格程度是否有任何指导？

*   移动应用程序是否必须禁用从手机图库中选择图像（因为我们无法确定在这种情况下选择的图像是原始图像还是相机照片）

*   什么级别的照片处理是可以接受的？我认为过滤器和框架都可以。覆盖文本或其他图形怎么样？如何以原始照片的较小部分生成更大的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:49:19.660

您应该让用户上传他们想要的内容，但只需在您的条款和条件中明确说明照片的要求是什么。过滤器，裁剪等应该没问题，照片仍然是原始的。

您应该安装一个审核工具，以便您可以轻松删除/隐藏不符合条款的照片（即在管理部分中），并允许用户“报告”图像。这是额外的工作，但这意味着您可以全面控制用户上传的照片。

# maven - 如何从 Maven 的主文件夹访问测试类？

> ID：14873285
> 
> 赞同：3
> 
> 时间：2013-02-14T11:00:53.590
> 
> 标签：maven, testing

我使用标准文件夹结构创建了一个 Maven 项目 - 即 src/main/java、src/test/java 等。

我写了一个类ClassA和一个测试类TestA。

从ClassA的主程序中，我指的是TestA的一个静态成员。

代码可以编译，但是当我运行它时，我得到：NoClassDefFoundError: TestA.

如何从 ClassA 中访问 TestA？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:17:44.517

我建议您重新考虑您的测试设计，而不是直接解决您的问题。Maven 完全能够自行运行测试，只需输入

`mvn test`

在命令行上。如果要运行单个测试类，请输入

`mvn test -Dtest=MyTest`

对于单一的测试方法，使用

`mvn test -Dtest=MyTest#shouldRunPerfectly`

它还支持通配符，所以要运行一些常见的测试，你可以输入

`mvn test -Dtest=Integration*#shouldBeFaster*`.

大多数 IDE 允许通过快捷方式直接运行测试。**如果我没**记错的话，Eclipse是**`Shift`++ ， `Alt``X`****IntelliJ是****++**。**IntelliJ**还使用**++**快捷方式导航到您正在使用的类的测试。**`T`****`Shift``Ctrl``F10`****`Ctrl``Shift``T`**

Maven 目录结构强调测试与应用程序的分离，使您更难以执行您的计划。

tl;博士 - 以行家的方式做

# windows-phone-7 - 通过一些 API 获取 pubCenter eCPM？

> ID：14873287
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:00:56.213
> 
> 标签：windows-phone-7

我想知道是否可以通过某种 API 获取当前的 pubCenter eCPM？

有一个名为“PubCenter Adviser”的 WindowsPhone 应用程序，它显示所有 pubCenter 类别的当前 eCPM。

他们是怎么做到的？是否有任何 API 可以让我从中获取数据？如果存在解决方案 - 有人可以提供任何文档或类似内容的链接吗？

我搜索了谷歌并没有发现任何东西:(

亲切的问候， maciej

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:15:20.293

> 他们是怎么做到的？

你得问他们。

> 是否有任何 API 可以让我从中获取数据？

没有**记录**的API。不过，API 很可能是可用的：在 pubcenter 页面上，图表是使用 Silverlight 显示的。快速浏览页面的 HTML 代码可以发现，数据并未直接提供给 Silverlight 应用程序：

```
 <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
        <param name="source" value="ClientBin/AdvancedReport.xap"/>
        <param name="onerror" value="OnSilverlightError" />
        <param name="background" value="white" />
        <param name="minRuntimeVersion" value="2.0.31005.0" />
        <param name="autoUpgrade" value="true" />
        <param name="uiculture" value="en-US" />
        <param name="culture" value="en-US" />
        <param name="initParams" value="LogFlushThreshold=1,TraceLevel=Verbose,LogServiceUrl=/Shared/Services/LogService.svc,LocaleId=en-us,IsMobileOnlyUser=True,WebMobileAlertMessage=Note: Click data is for websites only" />
            <a href="http://go.microsoft.com/fwlink/?LinkID=124807" style="text-decoration: none;">
            <img src="http://go.microsoft.com/fwlink/?LinkId=108181" alt="Get Microsoft Silverlight" style="border-style: none"/>
        </a>
    </object> 
```

这意味着，一旦加载，Silverlight 应用程序将调用某种服务来获取数据。但是要知道调用了哪个服务以及使用什么参数，您必须对应用程序进行逆向工程（通过反编译 XAP，或者通过使用 Fiddler 监视 HTTP 请求）。

# android - Android地图api-2禁用点击

> ID：14873288
> 
> 赞同：7
> 
> 时间：2013-02-14T11:01:00.233
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在将我的一个应用程序迁移到 Android 地图 V2。我在地图上显示了一个标记，并且不想将触摸事件发送到地图以更改位置/缩放级别等。在早期版本中，我可以通过`android:clickable="false"`在`MapView`. 我怎样才能在 Android 地图 V2 中做同样的事情？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-09-24T10:07:51.983

```
yourmap.getUiSettings().setAllGesturesEnabled(false); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-15T10:48:43.203

我自己想通了。

```
mMapFragment.getView().setClickable(false); 
```

# sqlite - 在sqlite中创建具有来自另一个表的约束的表？

> ID：14873291
> 
> 赞同：4
> 
> 时间：2013-02-14T11:01:12.640
> 
> 标签：sqlite

**我想从另一个有约束的表创建表？**

我使用了这个查询“create table destination as select * from source;” 从表创建。

但它只复制表中的列名，没有列约束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:09:35.857

有一个名为 的特殊表，其中包含每个表`sqlite_master`的完整语句（在 期间根据需要对其进行修改）。`CREATE TABLE``ALTER TABLE`

我会让我的*应用程序*检索该`CREATE TABLE`语句：

```
SELECT sql FROM sqlite_master WHERE type='table' AND name='source'; 
```

然后我会在`CREATE TABLE`标记之后替换表名，并将结果作为新的 sqlite 查询执行。

我认为在没有扩展的情况下使用 sqlite 的*纯*SQL 是不可能的。

# eclipse - Eclipse：在 Eclipse 中配置 Jetty 8。

> ID：14873292
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:01:13.697
> 
> 标签：eclipse, jetty

我正在尝试在我的 Eclipse IDE 中配置 Jetty 8。我有版本 8 作为 Jetty Server 。我正在尝试从 Eclipse 配置 Jetty8 。

我已经通过 Eclipse 下载了 Jetty 适配器（附加服务器适配器）

当我尝试从 Eclipse IDE 服务器部分配置 Jetty 8 时，问题很明显，它没有在列表中显示 Jetty 8，它只显示 Jetty 6。

请看上面的屏幕截图。

![截屏](../Images/22424978e7f1c4ceeb4c84e514e184c1.png)

我正在为 Web 开发人员使用 Eclipse Java EE IDE。

版本：Helios Service Release 2 Build id：20110218-0911

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:06:15.930

`RunJettyRun`如果您使用插件，您可能可以在 Eclipse 中选择 Jetty 8 ：

`Run Configurations -> Jetty Webapp -> YourProject -> Select a Jetty Version`

# .net - vb.net 中的图形对象

> ID：14873293
> 
> 赞同：2
> 
> 时间：2013-02-14T11:01:13.587
> 
> 标签：.net, vb.net, gdi+, system.drawing

我刚开始在 vb.net 中创建图形。我创建了一个 Windows 窗体并双击它。然后我得到了一个方法，它是**表单加载**方法。在这种方法中，我编写了以下代码。

```
 Dim g As Graphics
    g = Me.CreateGraphics

    Dim pencolor As New Pen(Color.Red)
    g.DrawLine(pencolor, 10, 20, 100, 200) 
```

我知道必须在**Paint**事件中创建 Graphics。但我试图在**表单加载**事件中显示它们。出于某种原因，我看不到输出可能是什么问题..？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:28:25.640

不要使用`CreateGraphics`-*永远*。我认为它实际上没有合法的用例。

您的问题是您在表单上绘制了一些东西，但是一旦触发了下一次重新绘制表单，它就会被覆盖，因为您以这种方式创建的图形不会被保留。

您基本上*必须*使用`Paint`事件（或`OnPaint`方法）进行绘图，没有办法解决这个问题。如果你想触发重绘，`Form_Load`你可以简单地调用`Me.Invalidate`（但我认为这应该是多余的）。

在[`OnPaint`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)（或`Paint`事件）内部，使用`Graphics`参数中提供的对象：

```
Protected Overrides Sub OnPaint(ByVal e As PaintEventArgs)
    MyBase.OnPaint(e) ' First, let the base class do its thing

    Dim g = e.Graphics

    Using p As New Pen(Color.Red)
        g.DrawLine(…)
    End Using
End Sub 
```

（请注意，这`Pen`是一次性资源，因此您应该将其包装在一个`Using`块中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T11:13:33.553

试试这个：

```
Public Class Form1

    Dim painted As Boolean = False

    Protected Overrides Sub OnPaint(e As PaintEventArgs)
        MyBase.OnPaint(e)
        If Not painted Then
            painted = True
            e.Graphics.Clear(Color.Blue)
        End If
    End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-05T01:29:14.280

我在 VB.net (2010) 中扩展了这个不错的答案，以处理 DataGridView 控件中文本的自动调整大小。

首先，将函数修改为：

```
Private Function MeasureTextWidth(ByVal c As Control, ByVal text As String) As Integer
    If (c Is DBNull.Value) Then
        Return -1
    Else
        Dim g As Graphics = c.CreateGraphics
        Return CInt(Math.Ceiling(g.MeasureString(text, c.Font).Width))
    End If
End Function 
```

下一部分，在调用这个函数的软件中是这样的：

```
 With frm_Parameters_FITs
        .Show()
        With .DataGridView1
            .SuspendLayout()
            .DataSource = Nothing '  CRITICAL
            .AllowUserToAddRows = False
            .AllowUserToDeleteRows = False
            .AllowUserToResizeRows = False
            .AllowUserToOrderColumns = True
            .SelectionMode = DataGridViewSelectionMode.FullRowSelect
            .ReadOnly = True
            .MultiSelect = False
            .RowHeadersVisible = False
            .Columns.Clear()
            .Rows.Clear()
            ' setup columns
            .Columns.Add("Item", "Item#")
            .Columns(0).Width = 11
            .Columns(0).SortMode = DataGridViewColumnSortMode.NotSortable
            .Columns.Add("Parameter", "gHeaderTitle") ' (ColName, HeaderText)
            .Columns(1).Width = 25
            .Columns(1).DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleCenter
            .Columns(1).SortMode = DataGridViewColumnSortMode.NotSortable
            .Columns.Add("ParamValue", "gHeaderInfo")
            .Columns(2).Width = 40
            .Columns(2).DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleRight
            .Columns(2).SortMode = DataGridViewColumnSortMode.NotSortable
            .Columns.Add("Comments", "gHeaderComment")
            .Columns(3).Width = 50
            .Columns(3).DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleRight
            .Columns(3).SortMode = DataGridViewColumnSortMode.NotSortable
            .Columns.Add("Comments", "Comments")
            .Columns(4).Width = 60
            .Columns(4).DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleRight
            .Columns(4).SortMode = DataGridViewColumnSortMode.NotSortable
            .ResumeLayout(True)
        End With
        'Then you can add the data in rows to the cells of the DataGridView:
        Dim piIndex As Integer ' this is a row pointer
        Dim ColTextWidth(5) As Integer
        Dim TextToMeasure As String
        Dim IntTextWidthPixels As Integer

        With .DataGridView1
            For i As Integer = 1 To Globals.giHeaderLines
                .Rows.Add() ' increases the rows.count...the last index is (rows.count-1)
                piIndex = .Rows.Count - 1  ' pointer to the last row just added
                .Rows(piIndex).Cells(0).Value = i.ToString ' puts this text into the col 0 cell

                .Rows(piIndex).Cells(0).Style.WrapMode = DataGridViewTriState.True
                .Rows(piIndex).Cells(1).Value = gHeaderTitle(i)
                .Rows(piIndex).Cells(2).Value = gHeaderInfo(i)
                .Rows(piIndex).Cells(3).Value = gHeaderComment(i)
                .Rows(piIndex).Cells(4).Value = gHeaderComment(i)
                ' now determine the correct col width
                For j As Integer = 0 To 4
                    Try
                        TextToMeasure = .Rows(piIndex).Cells(j).Value
                        IntTextWidthPixels = MeasureTextWidth(frm_Parameters_FITs.DataGridView1, TextToMeasure)

                        If IntTextWidthPixels > ColTextWidth(j) Then
                            ColTextWidth(j) = IntTextWidthPixels
                        End If
                    Catch ex As Exception
                        Debug.Print("Error here in Class_FileIO_FITs. PutDataIntoHeaderDataGrid")
                    End Try
                Next j
            Next i
            ' now reset the cols to the correct width
            For j As Integer = 0 To 4
                .Columns(j).Width = ColTextWidth(j)
            Next j
        End With
        'make sure the row we added is visible
        .DataGridView1.FirstDisplayedScrollingRowIndex = piIndex
        .DataGridView1.ClearSelection()
        .DataGridView1.Rows(piIndex).Selected = True
        .Refresh()
    End With 
```

这可以很好地为 DataGridView 控件提供正确宽的列。

# php - 如何转到我的 wordpress 插件的其他页面

> ID：14873303
> 
> 赞同：1
> 
> 时间：2013-02-14T11:01:50.483
> 
> 标签：php, wordpress

我有一个功能，一旦完成应该在功能结束时打开一个名为“nexpage.php”的页面我使用了以下但它们都不起作用。

包含工作，但是当我使用它时，它会在当前页面中包含我不想要的新页面，并且需要关闭当前页面并打开下一页。

```
 function myfunc(){
           .........
          include "nextpage.php";
           echo "<a href='nextpage.php'>NewPage</a>";   <<does not find it
          include_once "nextpage.php";                << open it in the page so javascript does not work and login wont disappear
           header('Location: nextpage.php');  <<it refresh the page but does not open the nextpage
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:28:08.663

就我个人而言，我会将完整的链接放在页面上，这样就不会混淆你想要它去哪里。我会指定完整路径而不是 PHP 文件的短路径。

您可以将这些用于插件：

```
echo '<a href="'.plugins_url('PluginFolderName/nextpage.php').'">New Page</a>'; 
```

或者

```
echo '<a href="'.plugin_dir_path( __FILE__ ).'/nextpage.php">New Page</a>'; 
```

或者如果主题

```
echo '<a href="'.get_template_directory_uri().'/nextpage.php">New Page</a>'; 
```

还有其他选择。在为插件创建设置页面时，您还可以使用 add_menu_page() 和 add_submenu_page() 创建一个子菜单数组，并使用子页面标签列出每个页面，您可以根据名称指向函数或页面。

参考：

[http://codex.wordpress.org/Function_Reference/add_menu_page](http://codex.wordpress.org/Function_Reference/add_menu_page) [http://codex.wordpress.org/Function_Reference/add_submenu_page](http://codex.wordpress.org/Function_Reference/add_submenu_page)

# c++ - 使用Opencv获取多张图片的std偏差

> ID：14873304
> 
> 赞同：1
> 
> 时间：2013-02-14T11:01:53.617
> 
> 标签：c++, opencv, image-processing

我正在尝试使用 OpenCV 获取多张图片的标准偏差，这就是我所做的：

#include #include #include

```
 using namespace std;
  using namespace cv;

 int main(){
cv::Mat frame,frame32f;
char filename[40];
cv::Mat mean;
const int count =134;
const int width  = 1920;
const int height = 1080;
cv::Mat resultframe = cv::Mat::zeros(height,width,CV_32FC3);
cv::Mat deviationframe = cv::Mat ::zeros(height,width,CV_32FC3);
cv::Mat temp = cv::Mat ::zeros(height,width,CV_32FC3);
for(int i = 1 ; i<= count; i++){
//int i = 3;
sprintf(filename,"d:\\BMdvideos\\images\\image%d.tiff",i);
frame = imread(filename,CV_LOAD_IMAGE_COLOR);
frame.convertTo(frame32f,CV_32FC3 );
resultframe +=frame32f;
frame.release();
}
resultframe *= (1.0/count);
for(int j =1; j<count; j++){
    sprintf(filename,"d:\\BMdvideos\\images\\image%d.tiff",j);
    frame = imread(filename,CV_LOAD_IMAGE_COLOR);
    frame.convertTo(frame32f,CV_32FC3);
    temp =(frame32f - resultframe);
    deviationframe+= temp.mul(temp);

    //temp.release();
}
imshow("devi",deviationframe);  // works
deviationframe *= 1.0/(count -1);
imshow("devi2",deviationframe); // works
cv::sqrt(deviationframe,deviationframe);
resultframe *= 1.0/255.0;
imshow("devi3",deviationframe);// works
deviationframe *= 1.0/255.0;

imshow("mean ",resultframe);
imshow("deviation frame ",deviationframe);// BLACK FRAME !!!!!!!!!!!!!!!!!!!
    waitKey(0);
return 0; 
```

}

当我看到我得到的结果帧“平均值”是正确的，但标准偏差是错误的。知道我做错了什么，在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:35:44.117

您没有累积**差异平方图像**的结果来计算标准偏差。您当前代码的结果是只有最后一张图像被平方并除以图像总数。之前的所有计算都没有效果。

此外，除以`255`仅用于图像的**可视化**，而不用于实际计算。在计算标准偏差之前，您要除以 255，这会使您的结果不正确。

修改您的代码如下：

```
.
.
.
resultframe *= (1.0/count);
cv::Mat deviationResult = cv::Mat::zeros(height,width,CV_32FC3);

for(int j =1; j< count; j++)
{
    sprintf(filename,"d:\\BMdvideos\\images\\image%d.tiff",j);
    frame = imread(filename,CV_LOAD_IMAGE_COLOR);
    frame.convertTo(frame32f,CV_32FC3);
    deviationframe =(frame32f - resultframe);
    deviationResult += deviationframe.mul(deviationframe);
}
resultframe *= (1.0/255.0);
deviationResult = deviationResult /(count -1 );
cv::sqrt(deviationResult ,deviationResult );
deviationResult *= (1.0/255.0);
imshow("mean ",resultframe);
imshow("deviation frame ",deviationResult);
waitKey(0);
return 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:45:30.707

在@sgar91 的帮助之后，这是最终代码，我希望它可以帮助任何人

```
 #include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>
#include <opencv2\opencv.hpp>
#include <stdlib.h>

using namespace std;
using namespace cv;

 int main(){
cv::Mat frame,frame32f;
char filename[40];
cv::Mat mean;
const int count =134;
const int width  = 1920;
const int height = 1080;
cv::Mat resultframe = cv::Mat::zeros(height,width,CV_32FC3);
cv::Mat deviationframe = cv::Mat ::zeros(height,width,CV_32FC3);
cv::Mat temp = cv::Mat ::zeros(height,width,CV_32FC3);
for(int i = 1 ; i<= count; i++){
    sprintf(filename,"d:\\BMdvideos\\images\\image%d.tiff",i);
    frame = imread(filename,CV_LOAD_IMAGE_COLOR);
    frame.convertTo(frame32f,CV_32FC3 );
    resultframe +=frame32f;
    frame.release();
}
resultframe *= (1.0/count);
for(int j =1; j<count; j++){
    sprintf(filename,"d:\\BMdvideos\\images\\image%d.tiff",j);
    frame = imread(filename,CV_LOAD_IMAGE_COLOR);
    frame.convertTo(frame32f,CV_32FC3);
    temp =(frame32f - resultframe);
    deviationframe+= temp.mul(temp);

    //temp.release();
}
deviationframe *= 1.0/(count -1);

deviationframe= deviationframe/255;
cv::sqrt(deviationframe,deviationframe);
resultframe *= 1.0/255.0;
imshow("mean ",resultframe);
imshow("deviation frame ",deviationframe);
waitKey(0);
return 0;
 } 
```

# android - onCreateContextMenu 仅在 API 15 和 16 上引发错误

> ID：14873309
> 
> 赞同：1
> 
> 时间：2013-02-14T11:02:15.413
> 
> 标签：android

我遇到了 onCreateContextMenu 仅在 API 15 和 16 上引发错误的问题。它在从 API 8 到 API 17（我的最小和最大目标）的所有其他 API 上都可以正常工作。

我尽我所能通过谷歌搜索尝试自己解决这个问题，但大约一周后，我已经绝望地向美妙的堆栈溢出社区寻求帮助。

**onCreateContextMenu 方法**

```
@Override
public void onCreateContextMenu(android.view.ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    Log.i(TAG, "Create context menu");

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.context_menu_my_time_zone, menu);

    Log.i(TAG, "Context menu created.");
} 
```

**包含类**

```
public class MyTimeZoneTActivity extends ListActivity {
    // I can post the code for the Class if required.
} 
```

**例外**

```
02-14 09:38:20.828: E/AndroidRuntime(10912): FATAL EXCEPTION: main
02-14 09:38:20.828: E/AndroidRuntime(10912): java.lang.ClassCastException: com.creativitality.labs.timezoneswidget.MyTimeZonesActivity cannot be cast to android.app.Application
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.view.Window.getCompatInfo(Window.java:481)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.view.Window$LocalWindowManager.<init>(Window.java:491)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.view.Window.setWindowManager(Window.java:477)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.view.Window.setWindowManager(Window.java:460)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.app.Dialog.<init>(Dialog.java:163)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.app.AlertDialog.<init>(AlertDialog.java:114)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.app.AlertDialog$Builder.create(AlertDialog.java:913)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at com.android.internal.view.menu.MenuDialogHelper.show(MenuDialogHelper.java:79)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at com.android.internal.view.menu.ContextMenuBuilder.show(ContextMenuBuilder.java:88)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at com.android.internal.policy.impl.PhoneWindow$DecorView.showContextMenuForChild(PhoneWindow.java:2201)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.view.ViewGroup.showContextMenuForChild(ViewGroup.java:612)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.view.ViewGroup.showContextMenuForChild(ViewGroup.java:612)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.view.ViewGroup.showContextMenuForChild(ViewGroup.java:612)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.view.ViewGroup.showContextMenuForChild(ViewGroup.java:612)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.widget.AbsListView.performLongPress(AbsListView.java:2926)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.widget.AbsListView$CheckForLongPress.run(AbsListView.java:2871)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.os.Handler.handleCallback(Handler.java:615)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.os.Looper.loop(Looper.java:137)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at android.app.ActivityThread.main(ActivityThread.java:4745)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at java.lang.reflect.Method.invokeNative(Native Method)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at java.lang.reflect.Method.invoke(Method.java:511)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-14 09:38:20.828: E/AndroidRuntime(10912):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

**还有什么我可以提供的吗？**

如果我可以提供任何其他信息来帮助解决此问题，请告诉我。

谢谢大家！

* * *

## 附加代码（根据要求）

**列表活动**

```
public class MyTimeZonesActivity extends ListActivity {

    // Define application context
    private Context applicationContext;

    //LIST OF ARRAY STRINGS WHICH WILL SERVE AS LIST ITEMS
    List<TimeZoneData> timeZoneData = null;

    //DEFINING STRING ADAPTER WHICH WILL HANDLE DATA OF LISTVIEW
    ArrayAdapter<String> adapter;
    TimeZoneAdaptor timezoneAdaptor = null;

    public static final int INSTRUCTIONS_CODE = 0;
    private static final String TAG = "MyTimeZonesActivity";

    SharedPreferences sharedPref;
    SharedPreferencesHelper sharedPreferencesHelper;

    TimeZonesApplication timeZonesApplication;

    public Context getApplicationContext(){
        return applicationContext;
    }

    @Override
    public void onCreate(Bundle savedInstanceState){
        Log.i(TAG, "My Time Zone Activity - onCreate called.");
        super.onCreate(savedInstanceState); 

        // Get Application Globals
        timeZonesApplication = (TimeZonesApplication)getApplicationContext();

        // Set application context
        applicationContext = this;

        // Populate time zone data
        timeZoneData = new ArrayList<TimeZoneData>();
        getStoredTimeZonesData(); // Populates timeZoneData object with stored time zone data

        setContentView(R.layout.activity_my_time_zones);
        timezoneAdaptor = new TimeZoneAdaptor(this, R.layout.timezone_view_mine, timeZoneData);
        setListAdapter(timezoneAdaptor);

        registerForContextMenu(getListView());

    } 
```

**阵列适配器**

```
public class TimeZoneAdaptor extends ArrayAdapter<TimeZoneData> {
    private String TAG = "TimeZoneAdaptor";
    //private ArrayList<TimeZoneData> mOrigionalValues;
    private List<TimeZoneData> mObjects;

    public TimeZoneAdaptor(Context context, int textViewResourceId, List<TimeZoneData> objects) {
        super(context, textViewResourceId, objects);
        this.mObjects = objects;
        //this.mOrigionalValues = new ArrayList<TimeZoneData>(objects);
    }

    @Override
    public int getCount() {
        return ((null != mObjects) ? mObjects.size() : 0);
    }

    @Override
    public TimeZoneData getItem(int position) {
        return ((null != mObjects) ? mObjects.get(position) : null);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public void notifyDataSetChanged() {
        super.notifyDataSetChanged();
    }

    public void add(TimeZoneData timeZone)
    {
        Log.w(TAG, "Add time zone: " + timeZone.id);
        mObjects.add(timeZone);
        notifyDataSetChanged();
    }

    public void remove(int position){
        Log.i(TAG, "Remove object from adapter at position: " + position);
        mObjects.remove(position);
        notifyDataSetChanged();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;

        if (null == view) {
            LayoutInflater vi = (LayoutInflater) MyTimeZonesActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.timezone_view_mine, null);
        }

        TimeZoneData data = mObjects.get(position);

        if (null != data) {
            TextView textCountry = (TextView) view.findViewById(R.id.timezone_country);
            TextView textName = (TextView) view.findViewById(R.id.timezone_name);
            TextView textTime = (TextView) view.findViewById(R.id.timezone_time);

            textCountry.setText(data.country.toUpperCase(Locale.getDefault()));
            textName.setText(data.city);
            textTime.setText(data.time);

            //view.setOnClickListener(new OnItemClickListener(position)); // NOT REQUIRED as we are setting in on activity level
        }

        return view;
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:33:53.140

`Application`我最好的猜测是，您以某种方式使用 an而不是 an创建小部件`Activity`，例如盲目地使用`getApplicationContext()`某个地方。当 Android 显示上下文菜单时，它会尝试获取与小部件关联的 Activity，但会遇到一个`Application`相反的情况，然后崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:40:15.797

我解决了这个问题。

问题是因为我在不知道的情况下覆盖了现有的 API 方法**getApplicationContext() 。**

引起我所有头痛的方法是这样的：

```
public Context getApplicationContext(){
    return applicationContext;
} 
```

我在寻找将上下文传递给我的方法的更好方法时发现了这段代码。事实证明，在您完全理解之前，您不应该使用任何代码！

希望其他人将来会发现此答案有用！

# objective-c - 在 NSMutableArray 中合并两个可变字典

> ID：14873312
> 
> 赞同：-2
> 
> 时间：2013-02-14T11:02:20.560
> 
> 标签：objective-c, nsmutabledictionary

我有一个包含来自服务器的数据的数组。我无法更改服务器的响应。

```
({
        ObservationMapId = 13;
        "Observation_Type" = Results;
        actionItem = "Tesing action";
        followupdate = "February 14, 2013";
        followupstatus = Open;
        observation = "Testing results for image";
    },
        {
        ObservationMapId = 13;
        "Observation_Type" = Results;
        observation = "Demo observation";
    },
  {     actionItem = "Tesing action";
        followupdate = "February 14, 2013";
        followupstatus = Open;
}
) 
```

我想将第二个字典与第三个字典合并如下

```
 ({
            ObservationMapId = 13;
            "Observation_Type" = Results;
            actionItem = "Tesing action";
            followupdate = "February 14, 2013";
            followupstatus = Open;
            observation = "Testing results for image";
        },
            {
            ObservationMapId = 13;
            "Observation_Type" = Results;
            observation = "Demo observation";
            actionItem = "Tesing action";
            followupdate = "February 14, 2013";
            followupstatus = Open;
    }
    ) 
```

我不知道如何进行任何帮助，非常感谢。感谢广告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:13:12.983

```
NSMutableArray *myArray;
[myArray[1] addEntriesFromDictionary:myArray[2]];
[myArray removeObjectAtIndex:2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:17:30.553

如果我理解正确，请尝试：

```
[[yourMutableArray objectAtIndex:1] addEntriesFromDictionary:[yourMutableArray objectAtIndex:2]];  
[yourMutableArray removeLastObject]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:13:29.783

```
NSMutableDictionary *dicMerged  = [NSMutableDictionary dictionaryWithDictionary:[YourArray objectAtIndex:1]];
[dicMerged addEntriesFromDictionary:[YourArray objectAtIndex:2]];
 NSMutableArray *artFinal = [NSMutableArray array];
 [artFinal addObject:[YourArray objectAtIndex:0]];
 [artFinal addObject:dicMerged];

print artFinal you will get as you want 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:34:37.100

```
take the server response in an array-

NSArray *array_Resp; and put server response ({
        ObservationMapId = 13;
        "Observation_Type" = Results;
        actionItem = "Tesing action";
        followupdate = "February 14, 2013";
        followupstatus = Open;
        observation = "Testing results for image";
    },
        {
        ObservationMapId = 13;
        "Observation_Type" = Results;
        observation = "Demo observation";
    },
  {     actionItem = "Tesing action";
        followupdate = "February 14, 2013";
        followupstatus = Open;
}
) 

into this array.

// now take a dictionary

NSMutableDictionary *dictMerged = [NSMutableDictionary new];

dictMerged = [[array_Resp objectAtIndex:1] mutableCopy];

NSDictionary *thirdDict = [array_Resp objectAtIndex:2];

for (id key in [thirdDict allKeys]) {
        [dictMerged setObject:[thirdDict objectForKey:key] forKey:key];
    }

// Now your dictMerged has merged values from 2nd and third dict from array_Resp

NSMutableArray *desiredArray = [NSMutableArray arrayWithObjects:dictMerged, nil];

this desired array will have your required merged dictionaries as 

({
            ObservationMapId = 13;
            "Observation_Type" = Results;
            actionItem = "Tesing action";
            followupdate = "February 14, 2013";
            followupstatus = Open;
            observation = "Testing results for image";
        },
            {
            ObservationMapId = 13;
            "Observation_Type" = Results;
            observation = "Demo observation";
            actionItem = "Tesing action";
            followupdate = "February 14, 2013";
            followupstatus = Open;
    }
    ) 
```

# haskell - Haskell 中的动态列表理解

> ID：14873315
> 
> 赞同：0
> 
> 时间：2013-02-14T11:02:22.727
> 
> 标签：haskell

假设我有一个列表理解，它返回一个序列列表，其中选择的元素相互依赖（参见下面的示例）。有没有办法（方便地）根据早期计算对元素的数量及其相关条件进行编程？例如，返回类型 [[a,b,c]] 或 [[a,b,c,d,e]] 取决于程序中的另一个值？此外，除了列表理解之外，还有其他/更好的方法来制定相同的想法吗？

（我认为可能，虽然麻烦且有限，但可以编写一个更大的列表推导式开始，并通过向**s**添加一个参数和辅助函数来修剪它，这些参数和辅助函数可以使一个或多个元素成为以后可以轻松过滤的值，以及相关的条件默认为真。）

```
s = [[a, b, c, d] | a <- list, someCondition a, 
                    b <- list, b /= a, not (someCondition b), 
                    otherCondition a b,
                    c <- list, c /= a, c /= b, not (someCondition c),
                    otherCondition b c,
                    d <- list, d /= a, d /= b, d /= c,
                    someCondition d, someCondition (last d),
                    otherCondition c d] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:13:58.573

这个问题非常难以理解。

> 有没有办法（方便地）根据早期计算对元素的数量及其相关条件进行编程？

问题是“程序”在这句话中并不是一个真正可以理解的动词，因为人类对计算机进行了编程，或者对 VCR 进行了编程，但您不能“对数字进行编程”。所以我不明白你在这里想说什么。

但是我可以给你代码审查，也许通过代码审查我可以理解你提出的问题。

## 不请自来的代码审查

听起来您可能正在尝试通过消除死胡同来解决迷宫。

你的代码实际上做的是：

1.  生成不是死角或与死角相邻的单元格列表，称为`filtered`

2.  从步骤 1 生成一系列相邻单元格，`sequences`

3.  将四个这样的相邻序列连接成一条路线。

**主要**问题：这只有在正确的路线正好是八格长时才有效！尝试解决这个迷宫：

```
[E]-[]-[]-[]
             |
[ ]-[ ]-[ ]-[ ]
 |
[ ]-[ ]-[ ]-[ ]
             |
[ ]-[ ]-[ ]-[ ]
 |
[ ]-[ ]-[ ]-[E]

```

因此，从代码审查向后工作，听起来您的问题是：

> 如果我事先不知道它有多长，我如何生成一个列表？

## 解决方案

您可以通过搜索（DFS、BFS、A*）解决迷宫问题。

```
import Control.Monad

-- | Maze cells are identified by integers
type Cell = Int

-- | A maze is a map from cells to adjacent cells
type Maze = Cell -> [Cell]

maze :: Maze
maze = ([[1],     [0,2,5],     [1,3],   [2],
         [5],     [4,6,1,9],   [5,7],   [6,11],
         [12],    [5,13],      [9],     [7,15],
         [8,16],  [14,9,17],   [13,15], [14,11],
         [12,17], [13,16,18],  [17,19], [18]] !!)

-- | Find paths from the given start to the end
solve :: Maze -> Cell -> Cell -> [[Cell]]
solve maze start = solve' [] where
  solve' path end =
    let path' = end : path
    in if start == end 
       then return path'
       else do neighbor <- maze end
               guard (neighbor `notElem` path)
               solve' path' neighbor 
```

该功能`solve`通过深度优先搜索工作。它不是将所有内容都放在一个列表理解中，而是递归地工作。

1.  为了找到从`start`到的路径`end`，如果`start /= end`，

2.  查看与末尾相邻的所有单元格`neighbor <- maze end`，

3.  确保我们没有在一个单元格上回溯`guard (negihbor `notElem` path)`，

4.  尝试找到从`start`到的路径`neighbor`。

不要试图一下子理解整个函数，只要理解一点关于递归。

## 概括

如果要找到cell 0到cell 19的路径，递归：我们知道cell 18和cell 19是相连的（因为它们是直接相连的），所以我们可以尝试解决从cell 0到cell的路由问题单元格 18。

这是递归。

### 脚注

守卫，

```
someCondition a == True 
```

相当于，

```
someCondition a 
```

因此也等价于，

```
(someCondition a == True) == True 
```

或者，

```
(someCondition a == (True == True)) == (True == (True == True)) 
```

或者，

```
someCondition a == (someCondition a == someCondition a) 
```

第一个，`someCondition a`很好。

### `do`关于符号的脚注

上面例子中的`do`符号等价于列表推导，

```
do neighbor <- maze end
   guard (neighbor `notElem` path)
   solve' path' neighbor 
```

列表理解语法中的等效代码是，

```
[result | neighbor <- maze end,
          neighbor `notElem` path,
          result <- solve' path' neighbor] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:21:33.913

> 有没有办法（方便地）根据早期计算对元素的数量及其相关条件进行编程？例如，返回类型 [[a,b,c]] 或 [[a,b,c,d,e]] 取决于程序中的另一个值？

我想您想在类型签名中静态编码列表（或向量）的长度。无法在类型级别检查标准列表的长度。

[一种方法](https://github.com/leonidas/codeblog/blob/master/2011/2011-12-21-static-vector-algebra.md)是使用[幻像类型](http://www.haskell.org/haskellwiki/Phantom_type)，并引入将编码不同大小的虚拟数据类型：

```
newtype Vector d = Vector { vecArray :: UArray Int Float }

-- using EmptyDataDecls extension too
data D1
data D2
data D3 
```

现在您可以创建具有不同类型的不同长度的向量：

```
vector2d :: Float -> Float -> Vector D2
vector2d x y = Vector $ listArray (1,2) [x,y]

vector3d :: Float -> Float -> Float -> Vector D3
vector3d x y z = Vector $ listArray (1,3) [x,y,z] 
```

如果输出的长度取决于输入的长度，那么考虑使用[类型级算术](https://stackoverflow.com/a/5436217/25450)来参数化输出。您可以通过谷歌搜索“Haskell 静态大小的向量”找到更多信息。

一个更简单的解决方案是使用固定长度的元*组*。如果您的函数可以生成 3 元组或 5 元组，请使用`Either`数据类型包装它们：`Either (a,b,c) (a,b,c,d,e)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:50:22.500

看起来您正试图通过从有限域中进行唯一选择来解决一些逻辑难题。咨询这些：

*   [Euler 43 - 是否有一个单子可以帮助编写此列表理解？](https://stackoverflow.com/questions/9831374/euler-43-is-there-a-monad-to-help-write-this-list-comprehension/9889702#9889702)
*   [将列表拆分为可能的元组列表](https://stackoverflow.com/questions/12869097/splitting-list-into-a-list-of-possible-tuples/12872133#12872133)

这对我们有帮助的方式是，我们在从中挑选域名时随身携带；并且下一个选择是从包含上一个选择之后剩下的内容的狭窄域中进行的，因此自然形成了一条链。例如

```
p43 = sum [ fromDigits [v0,v1,v2,v3,v4,v5,v6,v7,v8,v9]
            | (dom5,v5) <- one_of [0,5] [0..9]   -- [0..9] is the
            , (dom6,v6) <- pick_any dom5         --   initial domain
            , (dom7,v7) <- pick_any dom6          
            , rem (100*d5+10*d6+d7) 11 == 0 
            ....

-- all possibilities of picking one elt from a domain
pick_any :: [a] -> [([a], a)]
pick_any []     = [] 
pick_any (x:xs) = (xs,x) : [ (x:dom,y) | (dom,y) <- pick_any xs]

-- all possibilities of picking one of provided elts from a domain
--                           (assume unique domains, i.e. no repetitions)
one_of :: (Eq a) => [a] -> [a] -> [([a], a)]
one_of ns xs = [ (ys,y) | let choices = pick_any xs, n <- ns,
                          (ys,y) <- take 1 $ filter ((==n).snd) choices ] 
```

* * *

作为列表理解的一部分，您可以简单地检查答案中的一些元素：

```
s = [answer | a <- .... , let answer=[....] , length answer==4 ] 
```

或者只是根据条件创建不同的答案，

```
s = [answer | a <- .... , let answer=if condition then [a,b,c] else [a]] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T16:30:35.110

你有[Data.List.subsequences](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3asubsequences)

您可以以单子形式编写列表理解（请参阅[Monad Comprehensions 中的守卫](http://www.haskell.org/ghc/docs/latest/html/users_guide/syntax-extns.html#monad-comprehensions)）：

（说明：monad 必须是支持失败的[MonadPlus的实例。](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html#t%3aMonadPlus)

`guard False`使 monad 无法评估为 mzero。，后续结果将附加 mplus = (++) 用于 List monad。）

```
import Control.Monad (guard)

myDomain = [1..9]   -- or whatever

validCombinations :: [a] -> [[a]]
validCombinations domainList = do
        combi <- List.subsequences domainList
        case combi of
                [a,b] -> do
                        guard (propertyA a && propertyB b)
                        return combi

                [a,b,c] -> do
                        guard (propertyA a && propertyB b && propertyC c)
                        return combi

                _ -> guard False

main = do
         forM_ (validCombinations myDomain) print 
```

再次更新，递归获取元素，保存组合和检查

```
import Control.Monad

validCombinations :: Eq a => Int -> Int -> [a] -> [(a -> Bool)] -> [a] -> [[a]]
validCombinations indx size domainList propList accum = do

    elt <- domainList   -- try all domain elements

    let prop = propList!!indx
    guard $ prop elt               -- some property
    guard $ elt `notElem` accum    -- not repeated 

    {-
    case accum of
        prevElt : _ -> guard $ some_combined_check_with_previous elt prevElt
        _ -> guard True
        -}

    if size > 1 then do
         -- append recursively subsequent positions

         other <- validCombinations (indx+1) (size-1) domainList propList (elt : accum)

         return $ elt : other
    else
         return [elt]

myDomain = [1..3] :: [Int]

myProps = repeat (>1)

main = do
           forM_ (validCombinations 0 size myDomain myProps []) print 
   where
      size = 2 
```

尺寸 2 的结果具有非平凡的结果：

```
    [2,3]
    [3,2]

```

# objective-c - 点表示法 - 属性/方法

> ID：14873318
> 
> 赞同：0
> 
> 时间：2013-02-14T11:02:34.193
> 
> 标签：objective-c

完整性检查。鉴于这种：

```
@property (readwrite, nonatomic) NSDate *start; 
```

那么这两行代码不是一样的吗？

版本 1：

```
self.start.description 
```

版本 2：

```
[self.start description] 
```

即 start.description 调用对象`description`上的方法`start`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:04:49.667

是的，它们是相同的，也是`[[self start] description]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:11:13.647

基本上是的。

在属性周围有一个 setter 和 getter 自动同步。如果您使用 @syncronize 语句，那么您就有机会影响 setter、getter 和属性的命名方式。如果您自动同步属性的名称是_start。getter 名称是 start，setter 名称是 setStart。

所以

```
something = self.start 
```

实际上调用 getter 和

```
self.start = something 
```

调用 setter。等价物是：

```
something = [self start];
[self setStart:something]; 
```

如果您想直接访问实例变量，请执行以下操作：

```
_start = something;
something = _start; 
```

如果您只是使用，`@synthesize start;`那么等价的将是：

```
start = something;
something = start; 
```

这很可能令人困惑，但实际上在使用 setter/getter`start`时解决了实例变量。`self.start`当您不使用 ARC 时，这种差异变得非常重要。根据属性参数（例如分配、复制、保留……），自动生成的 getter 和 setter 会为您进行一些内存管理，而当您直接使用实例变量时，内存管理留给您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T11:04:12.977

是的。两种情况下的结果都是相同的；属性（大部分）只是以传统 Cocoa 风格编写的访问器方法的糖。

我说“主要”是因为存在一些细微的内部差异。属性作为元数据添加到 Objective C 类的运行时描述中。您可以通过一些反思找出已声明为此类的属性列表。此列表不同于以 getter/setter 样式命名的方法列表。

# javascript - 如何在codeigniter中使用javascript删除？

> ID：14873322
> 
> 赞同：1
> 
> 时间：2013-02-14T11:02:57.737
> 
> 标签：javascript, codeigniter

在这里需要一点帮助。我只想使用javascript从数据库中删除一行。但面临一些问题。

这是我的看法：

```
<?php echo anchor("#","Delete",array('class'=>'selectedpagination', 'onclick'=>'confirmDelete("admin/editpage/","'.$file->page_id.'");'))?> 
```

Javascript在这里

```
function confirmDelete(controller,id)
{
    if(confirm("Are you sure you want to delete this record"))
    {
        <!--location.href="main.php?page="+page+"&tblname="+tblname+"&fldname="+fldname+"&id="+id+"&action=delete";-->
        window.redirect("http://localhost/sama/index.php/admin/"+controller+"/"+id);
    } 
```

如何让它工作？它不工作。

请任何急需帮助的人或人。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:17:37.733

您可能需要考虑使用 jQuery 的简写 AJAX 函数[**$.post()**](http://api.jquery.com/jQuery.post)将数据发布到您需要的页面，如下所示：

```
function confirmDelete(controller, id){

    if(confirm("Are you sure you want to delete this record")){

        var data = "page="+page+"&tblname="+tblname+
                   "&fldname="+fldname+"&id="+id+"&action=delete";

        $.post(controller, data)
            .done(function(data) {
                // redirect or further logic here
        });

    }

} 
```

在服务器端，您会收到每个发布的变量，例如：

`$action = $this->input->post('action');`

* * *

除了上述解决方案之外，您可能还需要重新考虑您的方法。您通过 javascript 向控制器发送数据，然后在整个过程中使用 javascript 将浏览器重定向到另一个页面。调用控制器并通过会话 cookie 或通过 url 传递您需要的变量可能更容易，当一切都在服务器端完成后，使用 codeigniter 的`redirect()`帮助函数将浏览器重定向到您想要的位置。如果您想构建一个异步应用程序，在这里使用 javascript 和 AJAX 会很好......但是...... ajax 调用和重定向会破坏异步调用的目的。希望我能有所帮助。

# css - css垂直文本：字体大小继承和边框半径

> ID：14873324
> 
> 赞同：1
> 
> 时间：2013-02-14T11:03:02.147
> 
> 标签：css

我有以下html：

```
<div class="horizontal">
    <div class="biggest">t e s t <div class="circle">1</div></div>
    <div>t e s t <div class="circle">2</div></div>
    <div>t e s t <div class="circle">3</div></div>
</div> 
```

使用以下CSS：

```
.horizontal div {
    float: left;
    width: 1em;
    letter-spacing: 1em;
    word-wrap: break-word;
    font-size: 100%;
}
.biggest {
    font-size: 150%;
}
.circle {
    border-radius: 50%;
    background-color: red;
} 
```

我的输出：http: [//jsfiddle.net/ZaffJ/3/](http://jsfiddle.net/ZaffJ/3/)

以下是我不明白我所得到的：

1.  我期望封装在类`biggest`中的第一列具有比其余列更大的字体大小，但我得到了所有 3 列的统一字体大小。
2.  我期待在课堂上的每个数字周围都有一个漂亮的圆圈`circle`set `border-radius: 50%`。我实际上得到的是一些奇怪的椭圆形。
3.  （**更新**）让课堂上的号码`circle`显示在它的中心。

谁能向我解释发生了什么以及如何实现我想要的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:07:20.130

1.  选择器比`.horizontal div`更[具体](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)`.biggest`，通过将选择器更改为来解决此问题`.horizontal .biggest`
2.  文本不是方形的，因为您定义了宽度（1em）但没有定义高度，添加`height: 1em`到`.circle`或`.horizontal div`

[固定演示](http://jsfiddle.net/ZaffJ/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:13:05.253

将 的 设置`line-height`为`.circle`100%。css 应该是`.horizontal .biggest { }`而不仅仅是`.biggest { }`. 你也可以这样设置：

```
.biggest {
    font-size: 150% !important;
} 
```

  **完整的 CSS**

```
.horizontal div {
    float: left;
    width: 1em;
    letter-spacing: 1em;
    word-wrap: break-word;
    font-size: 100%;
}
.horizontal .biggest {
    font-size: 150% ;
}
.circle {
    border-radius: 50%;
    line-height: 100%;
    background-color: red;
}
.circle span {
    text-align: center;
    width: 2em;
    display: block;
} 
```

将您的数字包装在 span 中，如下所示：

```
<div>t e s t <div class="circle"><span>2</span></div></div> 
```

jsbin：http: [//jsbin.com/uwuquh/1/edit](http://jsbin.com/uwuquh/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:06:25.280

将您的 CSS 更改为：

```
.horizontal .biggest {
} 
```

代替

```
.biggest {
} 
```

# linux - 是否可以将 2 个内核模块链接到同一个 /dev/device？

> ID：14873325
> 
> 赞同：2
> 
> 时间：2013-02-14T11:03:03.210
> 
> 标签：linux, module, kernel, driver, device

*我想通过与/dev/device*交互的软件模型（我们称之为 (B)）来模拟昂贵的设备，而不是真实的设备

目前已经存在一个内核模块来管理链接到*/dev/device*的真实设备 （我们称之为 (A)）。

(A) 是否有可能将数据发送到 /dev/device 并且 (B) 读取此数据，准备响应并将其发送回*/dev/device*，并且 (A) 读取此响应？

如果有更简单的解决方案来做我想做的事（即用软件模型模拟硬件设备），请毫不犹豫地提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:18:37.707

对于这种类型的应用程序，您应该使用 scull 驱动程序，这对您有帮助，也可以保存您的设备，您无需连接设备，您可以在真实设备驱动程序中查看所有方面和测试。

# facebook-graph-api - facebook令牌过期问题

> ID：14873328
> 
> 赞同：1
> 
> 时间：2013-02-14T11:03:11.043
> 
> 标签：facebook-graph-api, facebook-access-token, facebooker2

我使用 facebooker2 和 Mogli 将 facebook 与我的应用程序集成。现在，offline_access 已从 facebook 中删除。我能够获得令牌，但它会在 2 小时内过期，如果用户从 facebook 注销，它也会过期。

我想更新令牌，但我不能通过以下代码来做到这一点

```
https://graph.facebook.com/oauth/access_token?             
client_id=APP_ID&
client_secret=APP_SECRET&
grant_type=fb_exchange_token&
fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

因为当用户从用户注销时我无法得到。如果我怎么知道用户何时从 Facebook 注销，我仍然无法交换令牌，因为它已经过期了。并且**access_token**仅在令牌到期之前有效。

任何想法，如果我有 60 天到期令牌或在到期前更新令牌。

提前感谢您提供的任何帮助。

# android - 数据不会从用户中删除

> ID：14873331
> 
> 赞同：1
> 
> 时间：2013-02-14T11:03:30.913
> 
> 标签：android, storage

在 Android 中，可以通过单击设置中的“清除数据”来重置应用程序上的数据。在我的应用程序中，我需要用户不能删除应用程序生成的数据。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:06:27.113

您可以备份云中的数据并使用设备 IMEI 映射数据...然后，每当您在本地找不到数据时，只需从服务器获取它...

或者您可以将数据存储在 sdcard 上，这样可以节省您在`clear data`...时删除的数据，但用户也可以随时从 sdcard 中删除内容。

因此，如果您有关键数据，那么将其保存在云端是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:15:26.650

有一项规定是用启动 ActivityOfMyChoice 的“管理空间”替换清除数据按钮。代码片段如下：

**AndroidManifest.xml**

```
<application
    android:manageSpaceActivity=".MyOwnActivity"
...

  <activity
    android:name=".MyOwnActivity"
    android:screenOrientation="portrait" /> 
```

它将调用 MyOwnActivity：

```
//Destroy the activity in onCeate
public class MyOwnActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            MyOwnActivity.this.finish();

    }
} 
```

试一试，看看它是否有效。

# ruby-on-rails - “测试”是 Rails 3 中的保留字吗？

> ID：14873333
> 
> 赞同：-4
> 
> 时间：2013-02-14T11:03:32.307
> 
> 标签：ruby-on-rails, reserved-words

为了可读性，在我将启发式模型更改为测试模型之前，很高兴知道。

[这个页面](http://reservedwords.herokuapp.com/words/test)表明它是一个保留字，但那里的语言是模棱两可的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:17:41.657

我创建了一个基于 Test 模型的带有脚手架的 Rails 3 演示应用程序，一切似乎都运行良好，但是当我尝试运行 Rspec 测试时，一切都崩溃了，所以答案是肯定的，这是一个保留字.

# java - Apache ODE 和 Oracle 11

> ID：14873334
> 
> 赞同：0
> 
> 时间：2013-02-14T11:03:38.747
> 
> 标签：java, oracle11g, bpel, apache-ode

我正在尝试使用 Oracle 11 在 tomcat 7 上制作我的 apache ode 1.3.5。尝试访问数据时遇到很多错误。

有没有人成功地使这种配置有效？

提前致谢

# asp.net - 在真实数据库中任何返回 false - 我确实有记录

> ID：14873335
> 
> 赞同：-2
> 
> 时间：2013-02-14T11:03:40.077
> 
> 标签：asp.net, .net, linq

这是代码

```
DContext.Views
        .Include("Torrent")
        .Include("Viewer")
        .Any(V => V.Torrent.ID == DTorrent.ID &&
                  V.UserHostAddress == UserHostAddress &&
                  V.Viewer.ID == ViewerTIKSNID.Value) 
```

它返回 FALSE 但在数据库中我有几行具有完全相同的信息。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:50:04.233

我应该写**V.Viewer.TIKSNID**而不是**V.Viewer.ID**。非常简单和愚蠢的错误哈？

# azure - 如何处理 Azure SAS 过期？

> ID：14873336
> 
> 赞同：2
> 
> 时间：2013-02-14T11:03:52.490
> 
> 标签：azure

我在云上有一个游戏站点，所有成员都可以使用 Azure SAS URL 访问这个游戏。我将过期时间设置为 20 分钟，我想处理时间结束后，我想处理过期时间并重定向到用户主页或重新生成 SAS 网址。

你知道关于这种情况的任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:28:19.333

您所描述的场景将需要一些自定义代码才能存在于存储服务层上。不支持哪个。您通常知道 SAS 何时到期，因为您生成了它。但无法知道/理解您的 Web 应用程序的最终用户何时使用此 SAS。

一种可能的解决方法是确保您更新此 SAS 并将其与浏览器将对您的应用程序发出的每个（经过身份验证的）请求一起发送给客户端。

处理这个问题的另一种方法是拥有一个基于 jQuery/WebApi 的小型模块，它将存在于用户的浏览器中。该模块将定期要求服务器提供 SAS。充其量，服务器也会返回过期时间，因此您的客户端脚本可以适当地处理这个问题。在客户端每次请求“游戏”之前，您的脚本应检查 SAS Url 是否已过期。

# c# - 在升级到 MVC 4 的网站上，添加视图对话框始终默认为 ASPX

> ID：14873340
> 
> 赞同：4
> 
> 时间：2013-02-14T11:04:05.330
> 
> 标签：c#, asp.net, asp.net-mvc, visual-studio, asp.net-mvc-4

*（我一口气发布并回答了这个问题，因为我花了一个小时才弄清楚这一点 - 我希望它会帮助其他人）*

***更新 - 我还在[Asp.Net MVC Codeplex 问题板上发布了一个问题](http://aspnetwebstack.codeplex.com/workitem/848)，以防您受到此问题的影响并且您想投票支持修复。MVC 工具的代码不是开源的，因此我们不能简单地提交一个拉取请求来进行非常简单的修复。***

我们已经升级了一个大型 Web 表单站点以包含 MVC 4，并且我们打算在可预见的将来并排运行这两个部分（有一个庞大的 Web 表单代码库，所以它不能只是快速转换）。

对于 MVC 方面，我们打算*仅*将R​​azor 用于我们的视图。我们最初还将在区域下运行 MVC 代码，因为我们已经有一个复杂的专有路由引擎，可以为 web 表单方面重写 url。

在项目文件和 web.config 中执行了正确的步骤后，我们已经能够很好地运行它，但是有一个小问题。

每当我们在加载项目后第一次执行“添加视图”时，ASPX*始终*是选定的视图引擎。为了避免混淆，我们确实需要默认为 Razor。

我查看了[如何使 razor 成为现有项目中的默认视图引擎，](https://stackoverflow.com/questions/5118169/how-to-make-razor-the-default-view-engine-in-existing-project)并将[我的项目升级到 Razor 视图引擎，但 VS2010 仍然自动生成 WebForms](https://stackoverflow.com/questions/6182227/im-upgraded-my-project-to-razor-view-engine-but-vs2010-still-auto-generates-we)；而且我们在项目中确实有 Razor 视图 - 所以它不能像在项目中至少有一个 Razor 视图那么简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:04:05.330

[关于如何使剃刀成为现有项目中的默认视图引擎](https://stackoverflow.com/questions/5118169/how-to-make-razor-the-default-view-engine-in-existing-project)的公认答案只说明了一半。

正如我在问题中建立的那样——我们在项目中确实有剃刀视图——但事实证明，你需要`~/Views`在项目中有一个文件夹才能启动这个逻辑。在我们的例子中，我们使用所有 MVC 的区域4+ 代码，所以我们没有费心创建`~/Views`文件夹。

我反映了 Asp.Net MVC VS 扩展的“添加视图”对话框 - 在 `Microsoft.VisualStudio.Web.Mvc.UserInterface.MvcAddViewDialog.Init`方法中（我添加了对此代码的分析中的注释），您可以找到在首次显示对话框时选择默认视图引擎的代码：

```
//find the project's Views folder
ProjectItem viewsFolder = MvcProjectUtil.GetViewsFolder(this.Project);
//if not found, or if a view engine is already cached then skip this
if (viewsFolder != null && string.IsNullOrWhiteSpace(viewEngineName))
{
  //has razor views?
  bool flag = false;
  //has webforms views?
  bool flag2 = false;
  //scan all folders and files in the project, looking at all file extensions
  //if .cshtml or .vbhtml are found, then flag==true
  //if .aspx are found, then flag2 == true
  //both can be true when this method returns.
  this.GetViewTypes(viewsFolder.ProjectItems, ref flag, ref flag2);
  //if there's at least one razor view, or if there are no webforms views
  if (flag || !flag2)
  {
    //assign either C# or VB razor view type
    viewEngineName = ((this.Project.Kind == 
      "{F184B08F-C81C-45F6-A57F-5ABD9991F28F}") ? "VBHTML" : "CSHTML");
  }
}
//this'll get bound in the combo on the dialog
this.ViewEngineName = viewEngineName; 
```

如您所见，视图类型的扫描仅在`~/Views`文件夹上进行 - 它不会费心寻找区域。

我们所要做的就是添加一个空`~/Views`文件夹（尽管我们也复制了 Web.Config 以添加 404 处理程序），并且在下一次重新加载项目时，Razor 会在下拉列表中自动选择。这是因为，正如在上述 SO 上接受的答案中正确描述的那样，如果找到剃刀视图或在该文件夹中找不到 webforms 视图，则使用 Razor。

# c# - 在 Silverlight 中获取类型依赖属性的最佳方法是什么

> ID：14873342
> 
> 赞同：2
> 
> 时间：2013-02-14T11:04:11.650
> 
> 标签：c#, .net, silverlight, reflection, dependency-properties

我想`DependencyProperty`通过使用反射传递属性名称来获取信息。我参考了许多指导使用`GetField`方法的论坛。

```
DependencyProperty dp = null;
var fieldInfo = dependencyObjectType.GetField(dpName, BindingFlags.Public | BindingFlags.Static | BindingFlags.FlattenHierarchy);
if (fieldInfo != null)
{
   dp = fieldInfo.GetValue(null) as DependencyProperty;
} 
```

这可能不适用于所有控件类型。比如你拿，CheckBox 类型，Fields 是空的。那么在silverlight 中获取DependencyProperty 详细信息的正确方法是什么？我的目标是，我正在尝试使用反射绑定控件。我想实现以下

```
Type controlType = Type.GetType("ControlName");
DependencyProperty dp = ?
FrameworkElement element = controlType as FramworkElement;
element.SetBinding(dp, new Binding("PropertyPath")); 
```

# php - 使用最后选择的值设置下拉列表的默认值

> ID：14873347
> 
> 赞同：1
> 
> 时间：2013-02-14T11:04:39.590
> 
> 标签：php, option, cakephp-1.2

我正在使用 cakephp 1.2，并且我有一个搜索表单，其中也有这个菜单：

```
Classificazione&nbsp;&nbsp;<select style="margin-top: 5px;" name="classificazione">
            <option value="art0"></option>
            <option value="C">Articoli</option>
            <option value="D">Documentazione</option>
            <option value="A">Libri</option>
            <option value="G">Materiali</option>
            <option value="B">Riviste</option>
            <default value="A">
</select><br /> 
```

在下一页中，我想使用用户之前选择的内容设置此菜单的默认值。

我这样解决（例如，使用第一个选项）：
在控制器中：

```
$getParams['classificazione'] = isset($params['classificazione']) ? $params['classificazione'] : '';
...
$this->set('getParams', $getParams); 
```

在视图中：

```
<option value="C" <?php if ($getParams['classificazione']=="C") echo "selected"; ?> >Articoli</option> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:07:51.370

将值保存在会话变量中并使用它来回显`selected`该选项

```
<?php
    function is_selected($selected_option, $list_option_value) {
       if($selected_option == $list_option_value) {
          return 'selected';
       }
    }
?>

<select>
   <option <?php echo is_selected($_SESSION['selected_option'], '1'); ?>>1</option>
</select> 
```

# javascript - jQuery 插件：需要反馈

> ID：14873348
> 
> 赞同：2
> 
> 时间：2013-02-14T11:04:41.820
> 
> 标签：javascript, jquery, jquery-plugins, feedback

我目前正在开发我的第一个 jQuery 插件。它被称为分数滑块，是一个幻灯片框架，它允许您为每张幻灯片制作无限的元素（具有不同的动画、延迟等）。

在这里你可以找到一个小演示，以及文档： [Demo](http://fractionslider.jacksbox.de/)

它还托管在 jQuery[插件存储库中](http://plugins.jquery.com/fractionslider/)

所以，介绍结束了；）

现在我有几个问题：

1.  通用代码。我可以改进什么，应该更换什么等。

2.  如您所见，当我们使用不同的动画、延迟、速度等时，每个元素的 html 标记将具有非常多的 data-... 属性。我想让这更容易一点，也许用更少的标记（该死的，我不知道用英语怎么说）。我怎么能这样做 - 任何想法或建议？

3.  我应该在插件中添加什么？我正在考虑寻呼机/控件、淡入淡出和简单的显示/隐藏效果，并可能使其具有响应性。

最后但并非最不重要的一点是：我很乐意得到一些关于插件及其实现的一般反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:14:11.330

看起来它不支持链接。例如

```
$('.step-slider').fractionSlider().remove(); 
```

# objective-c - 如何在 Skydrive API 中停止下载文件

> ID：14873355
> 
> 赞同：0
> 
> 时间：2013-02-14T11:04:58.997
> 
> 标签：objective-c, onedrive

开始下载文件后，如何停止下载文件？我像这样启动下载：

```
[docDirSkyDRive  appendString:[NSString stringWithFormat:@"/%@ ",[[FilesFromSkyDrive objectAtIndex:indexPath] objectForKey:@"name"]]];
NSMutableString *downloadPath=[[NSMutableString alloc]init];
[downloadPath appendFormat:@"%@/content",[[FilesFromSkyDrive objectAtIndex:indexPath] objectForKey:@"id"]];
[self.liveClient downloadFromPath:downloadPath delegate:self userState:@"download"]; 
```

这是我下载文件的代码片段，但不知道一旦开始下载文件如何停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T09:50:17.757

尝试这样做

```
[docDirSkyDRive  appendString:[NSString stringWithFormat:@"/%@ ",[[FilesFromSkyDrive    objectAtIndex:indexPath] objectForKey:@"name"]]];
NSMutableString *downloadPath=[[NSMutableString alloc]init];
[downloadPath appendFormat:@"%@/content",[[FilesFromSkyDrive objectAtIndex:indexPath] objectForKey:@"id"]];
LiveOperation *opperation = [self.liveClient downloadFromPath:downloadPath delegate:self userState:@"download"]; 
```

那么您可以使用取消此操作`[opperation cancel];`

# node.js - 如何从与根项目不同的文件夹运行 grunt

> ID：14873356
> 
> 赞同：35
> 
> 时间：2013-02-14T11:05:07.910
> 
> 标签：node.js, gruntjs

有没有办法告诉 grunt 使用哪个 grunt.js 文件？

我有一个`f:\a\b\tools`文件夹，其中包含`grunt.cmd, node.exe,...`我的实际 Web 应用程序`GruntFile.js`和所有本地应用`node_modules`程序`f:\a\c\my_app`

运行 grunt from`a\c\my_app`工作正常，但尝试从其他文件夹运行 grunt 说 a 似乎不起作用。我是新来的咕噜声，可能是我遗漏了一些明显的东西。

```
f:\a>grunt --config c\GruntFile.js 
```

> grunt-cli：grunt 命令行界面。(v0.1.6)
> 
> 致命错误：无法找到本地咕噜声。
> 
> 如果您看到此消息，则说明未找到 Gruntfile 或未将 grunt 安装到您的项目本地。有关安装和配置 grunt 的更多信息，请参阅入门指南：

[http://gruntjs.com/getting-started](http://gruntjs.com/getting-started)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-12-02T19:18:31.547

可以设置两个`--base`参数`--gruntfile`

来自`grunt --help`：

`--base`指定备用基本路径。默认情况下，所有文件路径都是相对于 Gruntfile 的。(grunt.file.setBase) *

`--gruntfile`指定一个备用的 Gruntfile。默认情况下，grunt 在当前或父目录中查找最近的 Gruntfile.js 或 Gruntfile.coffee 文件。

所以，你可以执行：

```
grunt --base c\my_app --gruntfile c\my_app\GruntFile.js mytask 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-29T11:13:09.120

从 grunt 1.3 开始，您可以省略`--gruntfile`.

所以，而不是

`grunt --base c\my_app --gruntfile c\my_app\GruntFile.js mytask`

你可以

`grunt --base c\my_app mytask`（并且`--base`可以替换为`-b`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:16:43.363

我会建议你从你的 app 目录运行它，因为模块安装在 nodes_modules 等中。你必须移动到你的 app 目录并运行 grunt：

```
cd f:
cd  a\c\my_app
grunt {yourTasks} 
```

# php - PHP 的 include() 的预处理器替代方案？

> ID：14873363
> 
> 赞同：0
> 
> 时间：2013-02-14T11:05:37.943
> 
> 标签：php, preprocessor

在我的个人网站上，我有很多重复使用的物品。例如，我可能有两个不同的登录页面，它们的布局略有不同，但内容几乎相同。例如：

**登陆-1.php：**

```
include( 'header.php' );
include( 'about-us.php' );
include( 'contact-us.php' ); 
```

**登陆-2.php：**

```
include( 'header.php' );
include( 'portfolio.php' );
include( 'contact-us.php' ); 
```

现在我正在寻找一种替代方法，以便我可以创建静态 HTML 页面，而不必仅使用 PHP 来包含内容。理想情况下，该脚本会抓取包含文件的内容并将其粘贴到正确的位置。它甚至可能不是 PHP。

（我希望这个问题适合 SO，或者我应该使用另一个 SE 站点吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:09:18.840

如果您希望动态执行此操作，并且正在使用 Apache，则可能需要查看[服务器端包含](https://httpd.apache.org/docs/current/mod/mod_include.html). 它们比完整的 PHP 脚本要轻得多。IIS 有一个类似的模块，nginx 也有。

相反，如果您想一次性生成 HTML 并存储它，您可以使用预先存在的 PHP 页面。只需`php`在命令行上使用，将您的页面传递给解释器。如果您没有在您的页面中使用 HTTP 特定的 PHP 功能（`$_COOKIES`例如等），那么它会吐出完成的 HTML 供您存储和服务，就像任何其他静态内容一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:09:26.593

[Template Toolkit](http://www.template-toolkit.org/)具有[INCLUDE 功能](http://www.template-toolkit.org/docs/manual/Directives.html#section_INCLUDE)，并带有用于从模板生成静态页面的[ttree 实用程序。](http://template-toolkit.org/docs/tools/ttree.html)

# c++ - 如何将信号和槽用于观察者模式？

> ID：14873364
> 
> 赞同：3
> 
> 时间：2013-02-14T11:05:47.157
> 
> 标签：c++, design-patterns, signals, observer-pattern, signals-slots

我写了一个简单的观察者模式，其中观察者具有“void notify(std::string)”函数，可观察对象在每个注册的观察者上调用它，并使用标记化字符串来传输数据。这非常简单，容易且有效，但我需要向前迈进。

我需要使用信号和插槽来实现它（例如使用 boost::signals2）。但是我不知道插槽和信号应该是什么样子以及它们应该如何放置。我也不知道如何允许注册我想要的任何函数，而不仅仅是 void (string)。

我找不到任何为这种模式使用信号和插槽的好资源。然而每个人都说信号和槽对于观察者模式来说是惊人的。你能指导我如何将信号和槽用于观察者模式吗？

我目前没有信号的实现如下：

```
class observable
{
public:
void register(observer *);
void unregister(observer *);
protected:
void notifyObservers()
   {
    for every registered observer
    observer.notify(std::string tokenized_string);
   }
}

class observer
{
public:
void notify(std::string) = 0;
} 
```

我需要更改此模式以使用信号和插槽，但我不知道它应该如何有用、设计良好和灵活。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T13:06:40.483

观察者模式是如何工作的？

*   可观察对象被观察者对象“监视”
*   当一个 Observable 被修改时，它会通知所有观察者发生了变化，例如通过调用他们的“更新”或“通知”函数（或其他）

因此，就**信号**和**插槽**而言。基本原理是将信号连接到插槽，每次发出它们连接的信号时都会调用它们。

你会发现在 Observer 模式中使用起来非常简单：只需在 Observable 中创建一个信号，该信号将连接到用于更新它的每个 Observer 的插槽。

在 Observable 发生变化的情况下。而不是遍历所有观察者的列表，并`update`一个接一个地调用他们的方法，只需发出信号。相应的插槽将被神奇地调用。

更进一步，您可以在 Observable 中设置一个插槽，连接到 Observer 将发出的信号，以告诉 Observable 在发生变化时必须注意它......

Can't get you a fully working example code since I never used `Boost::signals2`, but you should take a look at [How do I use boost::signals to implement the observer pattern?](https://stackoverflow.com/questions/10418582/how-do-i-use-boostsignals-to-implement-the-observer-pattern "How do I use boost::signals to implement the observer pattern?") and [Observer design pattern in C++](https://stackoverflow.com/questions/2225162/observer-design-pattern-in-c%20) to get you going :)

# unit-testing - 将一个测试类链接到它的主类

> ID：14873365
> 
> 赞同：2
> 
> 时间：2013-02-14T11:05:46.920
> 
> 标签：unit-testing, junit

我经常为每个 Java 类创建一个相应的测试类。但是，从编译器的角度来看，它们似乎没有以任何方式链接。当然，我可以将它们与 Javadoc 注释中的相互引用联系起来，但是，我想知道是否有更标准的方式来告诉世界“A 类是 B 类的 JUnit 测试”和“B 类是类测试的主类”一个”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:10:22.820

通常，被测类和测试类之间的“连接”是通过**命名约定**建立的：`SHA1DigestTest`包含`SHA1Digest`该类的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:10:44.817

您实际上没有任何编译时参考，因为您通常在没有测试代码的情况下分发主代码。只有一个命名约定。对于一个名为`Foo`我使用的类：

*   `FooTest`用于单元测试
*   `FooSomeSpecificPartOrBehaviorTest`仅对类行为的一个子集进行单元测试。
*   `FooIT`用于集成测试

这种约定非常标准，例如在 IntelliJ IDEA `Ctrl`++中，您可以仅基于命名约定在主类和测试类之间快速导航`Shift`。`T`

# c# - 如何让控件将焦点放在未显示的表单上？

> ID：14873368
> 
> 赞同：1
> 
> 时间：2013-02-14T11:05:49.940
> 
> 标签：c#, .net, winforms, unit-testing

这听起来可能有点奇怪，但我需要在单元测试中在实际上并未显示的 Windows 窗体屏幕上提供特定控件，即焦点。这是因为通过以编程方式单击其上的按钮并从属性中读取结果，该表单被用作“引擎”。这是给定的，我的工作是测试当一个按钮被“点击”时，在按钮完成其操作后，焦点返回到另一个控件。

我的问题是如何将焦点设置在特定控件上，这似乎不起作用（例如执行`form.myControl.Select()`或`form.myControl.Focus()`）。有人告诉我这是因为当前没有显示表单，但这只是猜测。

谁能告诉我如何在单元测试环境中做到这一点？

# visual-studio-2010 - 如何在视觉工作室快速入门

> ID：14873370
> 
> 赞同：0
> 
> 时间：2013-02-14T11:06:02.253
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

我见过很多开发人员在 VS 上的迁移速度几乎比你想象的要快。其中很多似乎是快捷键。我是一个可怕的狩猎，并在菜单中找到它。有没有一种久经考验的方法可以让你加速到 VS 大师的圆顶？它只是记住所有那些快捷键。也许删除菜单以便您只能使用快捷方式？别人是怎么做到的？还有其他技术吗？

编辑

我看过很多键绑定和键码列表。但它实际上是要付诸实践，使其成为第二天性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:09:37.090

这不是我的强项，但是……如果您愿意，可以打印一份电子表格，其中包含您认为可能会使用的所有快捷方式。

把它贴在你的桌子上。*每当*您想获取菜单时，请强迫自己查看此电子表格。

一开始慢，最后快。

（有关 Microsoft 的电子表格列表，请参阅下面的链接，但您可能希望在那里重新格式化数据。）

祝你好运先生。

# qml - 从 Blackberry 10 qml 中的函数调用？

> ID：14873371
> 
> 赞同：1
> 
> 时间：2013-02-14T11:06:03.163
> 
> 标签：qml, blackberry-10

我在单击 qml 中的按钮时调用了 BBM 的邀请，但我需要为联系人发送邀请如何做到这一点？我的代码

```
 Button {
        text: "Invite"
        onClicked: {
            invokeQuery.uri = "pin:210000A"
            invokeQuery.updateQuery();
        }
        attachedObjects: [
            Invocation {
                id: invokeShare
                query: InvokeQuery {
                    id: invokeQuery
                }
                onArmed: {
                     trigger("bb.action.INVITEBBM");

                }
            }
        ]
    } 
```

谁能给我一些解决方案来解决这个问题。？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:37:58.597

调用查询是不可变对象，这意味着查询中的值不是动态的。如果要动态更新查询，则需要通过控制信号或变量来完成。

例如，您有一个组件调用`Inviter`，其`pin`属性暴露：

```
import bb.cascades 1.0

Container {
    property string pin
    Button {
        text: "Invite to BBM"
        onClicked: {
            query.uri = "pin:" + pin
            invoke.trigger("bb.action.INVITEBBM")
        }
    }
    attachedObjects: [
        Invocation {
            id: invoke
            query: InvokeQuery {
                id: query
                invokeTargetId: "sys.bbm.sharehandler"
                onQueryChanged: {
                    invoke.query.updateQuery()
                }
            }
        }
    ]
} 
```

然后你可以这样使用它：

```
import bb.cascades 1.0

Page {
    Container {
        layout: DockLayout {
        }
        TextArea {
            id: pinEditor
            hintText: "Enter PIN to invite"
            onTextChanged: {
                inviter.pin = text
            }
            input.submitKey: SubmitKey.Send
        }

        Inviter {
            id: inviter
            horizontalAlignment: HorizontalAlignment.Center
            verticalAlignment: VerticalAlignment.Center
        }
    }
} 
```

另外，不要忘记在您的文件中启用**“Blackberry Messenger”**权限`bar-descriptor.xml`并将以下库添加到您的`.pro`文件中：

```
LIBS += -lbbplatformbbm
LIBS += -lbbsystem 
```

# c# - 通过两个不同的接口访问同一个对象

> ID：14873382
> 
> 赞同：2
> 
> 时间：2013-02-14T11:07:19.333
> 
> 标签：c#, object

我有两个接口：

```
interface IStudent
{
    string Name { get; }
    string EducationLevel { get; }
}

interface ITeacher
{
    string Name { get; }
    string Department { get; }
} 
```

你将如何在 C# 中设计它，以便一个对象可以

1.  只实现学生（并且没有老师的属性）
2.  只实现教师（并且没有学生的属性）
3.  实现这两个接口，没有冗余的通用属性（名称）

任何想法 ？

我可以做 2 个类直接实现这两个接口。但是对于一个既是老师又是学生的人，我将拥有两个不同的对象：我只想要一个！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:09:31.567

我会提取一个通用接口：

```
interface IPerson
{
    string Name { get; }
}

interface IStudent : IPerson
{
    string EducationLevel { get; }
}

interface ITeacher : IPerson
{
    string Department { get; }
} 
```

想想为什么你的两个接口有相同的属性。他们都有名字，为什么他们有名字？因为他们都是一个人。所以你有你的通用界面。

实现这两个接口的类只需要实现`Name`一次，因为它是`IPerson`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T11:11:26.063

以下是完全合法的：

```
public class LearningTeacher : ITeacher, IStudent
{
    public string EducationLevel
    {
        get { return /*...*/; }
    }

    public string Department
    {
        get { return /*...*/; }
    }

    public string Name
    {
        get { return /*...*/; }
    }
} 
```

该`Name`属性是 和 的`ITeacher.Name` *实现* `IStudent.Name`。

如果属性的实现是相同的，`Student`并且`LearningTeacher`您可以在内部创建`LearningTeacher`一个`Student`实例和一个`Teacher`实例，使其有效地成为装饰器。像这样，您不必重复实现：

```
public class LearningTeacher : ITeacher, IStudent
{
    Teacher _teacher;
    Student _student;

    public LearningTeacher(string name, string educationalLevel,
                           string department)
    {
        _student = new Student(name, educationalLevel);
        _teacher = new Teacher(name, department);
    }

    public string EducationLevel
    {
        get { return _student.EducationLevel; }
    }

    public string Department
    {
        get { return _teacher.Department; }
    }

    public string Name
    {
        get { return _student.Name; }
    }
} 
```

这是唯一的方法，因为 .NET 不支持多重继承。您只能实现多个接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T11:16:41.100

怎么样，

```
interface IPerson
{
    string Name { get; }
}

interface IStudent : IPerson
{
    string EducationLevel { get; }
}

interface ITeacher : IPerson
{
    string Department { get; }
} 
```

* * *

您可以在这样的实现中使用这些接口，

```
abstract class Person : IPerson
{
    public virtual string Name { get; set; }
}

class Student : Person, IStudent
{
    public string EducationLevel { get; set; }
}

class Teacher : Person, ITeacher
{
    public string Department { get; set; }
}

class StudentTeacher : Person, IStudent, ITeacher
{
    public string EducationLevel { get; set; }
    public string Department { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:09:57.340

```
interface IPerson
{
    string Name { get; }
}

interface IStudent : IPerson
{
    string EducationLevel { get; }
}

interface ITeacher : IPerson
{
    string Department { get; }
}

IPerson P1 = SomeStudent;
IPerson P2 = SomeTeacher;
IStudent S = P1 as IStudent;
ITeacher T = P2 as ITeacher; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T11:12:43.037

这个实现适合你吗？

```
interface IStudent
{
    string Name { get; }
    string EducationLevel { get; }
}

interface ITeacher
{
    string Name { get; }
    string Department { get; }
}

public class Person: IStudent, ITeacher
{
    public string EducationLevel
    {
        get { return String.Empty; }
    }

    public string Name
    {
        get { return String.Empty; }
    }

    public string Department
    {
        get { return String.Empty; }
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T14:09:06.993

我们能否不从本体论上而是从认识论上，即通过它们各自的思维-行为模式来区分这些实体？

```
interface IPerson
{
    string Name { get; }

}

 interface ILearn
{
    Learn(  EducationLevel )

}

interface ITeach

{
      Teach(  Department  )

} 
```

# java - 如何使用java代码在android中动态创建main.xml？

> ID：14873383
> 
> 赞同：2
> 
> 时间：2013-02-14T11:07:19.780
> 
> 标签：java, android, xml

我试图使一个 xml 代码动态而不需要 xml。它只使用java代码。任何人都可以帮助我如何为这个 xml 内容制作 javacode。我不想在资源中使用我的 main.xml。

```
 <FrameLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/applicationframe"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#FFEEEEEE">
            <com.pdfplugin.QScrollView
                android:id="@+id/scrollview"
                android:layout_gravity="center"
                android:background="#FFEEEEEE"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
                <LinearLayout
                    android:id="@+id/pagepane"
                    android:background="#FFEEEEEE"
                    android:gravity="center_horizontal"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical">
                </LinearLayout>
            </com.pdfplugin.QScrollView>

            <ImageView
            android:id="@+id/imgclose"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

              android:layout_gravity="top|right"
              android:layout_marginRight="10dp"
            android:layout_marginTop="10dp"
            android:src="@drawable/readclose" />
    </FrameLayout> 
```

# joomla - 在 joomla 中得到 500 内部服务器错误

> ID：14873386
> 
> 赞同：0
> 
> 时间：2013-02-14T11:07:27.213
> 
> 标签：joomla, joomla-extensions, joomla1.7, joomla1.6

每当我尝试访问我的网站时，我都会在前端和后端收到“ **500 Internal Server Error ”。**

**错误：**

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 请求超时

此请求处理时间过长，已被服务器超时。如果不应该超时，请联系本网站管理员增加“连接超时”。～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～

我也尝试通过更改某些文件的权限来解决此问题，但没有任何反应。

请帮助我，我真的需要它。

# c - 排列 printfs 看起来不错并将它们排列起来

> ID：14873393
> 
> 赞同：-2
> 
> 时间：2013-02-14T11:07:45.123
> 
> 标签：c, format, printf, spacing

你到底是如何格式化这个来排列的，我尝试了一切，没有任何改变？！

```
printf("N Count\n");
printf("---- ------ \n");

for(i = 0 ; i < MAX_ELEMENTS ; i++)
{
    count = getOccur(arr, MAX_ELEMENTS, arr[i]);
    printf("%1d %1d\n", arr[i], count);
} 
```

我试过制表符，间距，那些带有最后一个数字的 % 符号，它不会从这个改变

```
N  Count
----- ---
       1      1
       2      1
       3      1 
```

快把我逼疯了！我不明白！哈哈

编辑整个程序新问题！

```
#include <stdio.h>

#define MAX_ELEMENTS 10

int getOccur(int a[], int num_elements, int value);
void printArr(int a[], int num_elements);

int main()
{
    int arr[MAX_ELEMENTS];
    int trim[MAX_ELEMENTS];
    int count, target, i;
    int j, k, temp;

    for(i = 0 ; i < MAX_ELEMENTS ; i++)
    {
        printf("Enter a variable for the array: ");
        scanf("%d", &arr[i]);
    }

    for (j = 1 ; j <= MAX_ELEMENTS-1 ; j++)
    {
        for(k = 0 ; k <= MAX_ELEMENTS-2 ; k++)
        {
            if(arr[k] > arr[k+1])
            {
                temp = arr[k];
                arr[k] = arr[k+1];
                arr[k+1] = temp;
            }
        }
    }

    printf("%4s %6s\n", " N ", "Count");
    printf("%4s %6s\n", "----", "------");

    for(i = 0 ; i < MAX_ELEMENTS ; i++)
    {
        count = getOccur(arr, MAX_ELEMENTS, arr[i]);
        printf("%3d %4d\n", arr[i], count);
    }
}

int getOccur(int a[], int tally, int value)
{
    int i;
    tally = 0;

    for( i = 0 ; i < MAX_ELEMENTS ; i++)
    {
        if (a[i] == value)
        {
            ++tally;
        }
    }

    return(tally);

}

void printArr(int a[], int amount)
{
    int i;

    for(i = 0 ; i < amount ; i++)
    {
        printf("%d ", a[i]);
    }

    printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:42:59.143

```
printf("%4s %6s\n", " N ", "Count");
printf("%4s %6s\n", "----", "------");

for(i = 0 ; i < MAX_ELEMENTS ; i++)
{
  count = getOccur(arr, MAX_ELEMENTS, arr[i]);
  printf("%4d %6d\n", arr[i], count);
} 
```

那*应该*把所有东西都排好。

**编辑**

针对评论中的问题，我的方法是首先在其中找到所有唯一值`arr`并将它们保存到不同的数组中（调用它`unique`）。然后，您将遍历`unique`循环中的数组：

```
for (i = 0; i < uniqueCount; i++)
{
  count = getOccur(arr, MAX_ELEMENTS, unique[i]);
  printf("%4d %6d\n", unique[i], count);
} 
```

至于寻找独特的元素，蛮力方法就像

```
size_t uniqueCount = 0;
int unique[MAX_SIZE];   // needs to be same size as original array in case
                        // all values are unique

for (i = 0; i < MAX_SIZE; i++)
{
  size_t j = 0;
  for (j = 0; j < uniqueCount; j++)
    if (arr[i] == unique[j])
      break;

  if (j == uniqueCount)
    unique[uniqueCount++] = arr[i];
} 
```

对于原始数组中的每个元素，我们扫描（最初为空的）`unique`数组。`a[i]`如果我们在数组中找不到 的值`unique`，我们将其添加并递增`uniqueCount`。

请注意，此方法效率非常低，并且随着 MAX_ELEMENTS 变大，效果会很差。有更好的解决方案可用，但听起来你仍处于学习曲线的底部，所以我将保留它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:15:19.957

这就是你要找的。第一列有四个 - 所以最小宽度是四，下一列有大小 - 所以最小宽度是格式字符串中指定的 6。请参阅[printf](http://linux.die.net/man/3/printf)手册页

```
printf("N    Count\n");
printf("---- ------ \n");

for(i = 0 ; i < MAX_ELEMENTS ; i++)
{
  count = getOccur(arr, MAX_ELEMENTS, arr[i]);
  printf("%4d %6d\n", arr[i], count);
} 
```

**编辑**

先编辑`printf`

# css - 如何在 p:dataGrid 中显示字符串的数组列表？

> ID：14873397
> 
> 赞同：0
> 
> 时间：2013-02-14T11:08:09.217
> 
> 标签：css, jsf, datagrid, primefaces, panel

我有 ajax 功能来添加名称并以表格方式显示在同一页面上，其中一张图像（在文本左侧）和一个“X”图像（在右侧删除）。它应该从左到右添加，完成一行后，它应该从下一行开始。

所以我需要在 p:datagrid 或任何其他可用于相同功能的标记中显示字符串的数组列表。

我尝试使用 ui:repeat 和 p:panelgrid 的组合，但我无法获得 datagrid 功能。我没有使用 p:dataTable 因为它会在底部添加新元素而不是我需要的。

附言

```
<h:form>

        <h:selectOneMenu id="recepients" value="#{controller.selected}">
            <f:selectItem itemLabel="Select" itemValue=""></f:selectItem>
            <f:selectItem itemLabel="Info1" itemValue="Info1"></f:selectItem>
            <f:selectItem itemLabel="Info2" itemValue="Info2"></f:selectItem>
            <f:selectItem itemLabel="Info3" itemValue="Info3"></f:selectItem>
            <f:selectItem itemLabel="Info4" itemValue="Info4"></f:selectItem>
            <f:selectItem itemLabel="Info5" itemValue="Info5"></f:selectItem>

        </h:selectOneMenu>
        <p:commandButton value="Add" action="#{controller.submit}"
            update="nameslist" />

        <p:dataGrid id="nameslist" value="#{controller.tempNameList}"
            var="name" columns="3">
            <p:column>
                <p:outputLabel value="%" />
            </p:column>
            <p:column>
                <p:outputLabel value="#{name}" />
            </p:column>
            <p:column>
                <p:commandLink value="X" action="#{controller.delete(name)}"
                    update="nameslist">
                </p:commandLink>                

            </p:column>

        </p:dataGrid>
    </h:form> 
```

结果应该是这样的...

% Abc X % Xyz X % dfd X

请将 % 视为图像，将 X 视为关闭符号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:41:05.697

`<p:dataGrid>`不`<p:column>`支持。此列布局仅适用于`<p:dataTable>`.

将所有这些替换`<p:column>`为单个分组组件，例如，`<h:panelGroup>`或者可能`<p:panel>`，完全如[展示站点](http://www.primefaces.org/showcase/ui/datagrid.jsf)上所示。

```
<p:dataGrid id="nameslist" value="#{controller.tempNameList}" var="name" columns="3">
    <h:panelGroup>
        <p:outputLabel value="%" />
        <p:outputLabel value="#{name}" />
        <p:commandLink value="X" action="#{controller.delete(name)}" update="nameslist" />
    </h:panelGroup>
</p:dataGrid> 
```

# android - 双sim卡发送短信android

> ID：14873405
> 
> 赞同：4
> 
> 时间：2013-02-14T11:08:40.560
> 
> 标签：android, sms, dual-sim

我有双卡安卓手机。
我想检测从哪个 sim 卡发送的短信。
如果我无法获得手机号码，但任何重要的价值，我可以通过它知道哪个 sim 卡发送了短信，这没关系？

# ffmpeg - 使用 FFmpeg 从 mkv 或 m2ts 提取字幕到 srt 时出错

> ID：14873406
> 
> 赞同：2
> 
> 时间：2013-02-14T11:08:41.317
> 
> 标签：ffmpeg, extract, srt

我需要从不同的视频文件中提取字幕以`.srt`格式化（在 html5 视频中使用）。我尝试了很多我在谷歌上找到的变体。但每次我得到这个错误：

**为输出流 #0:0 打开编码器时出错 - 可能是不正确的参数，例如 bit_rate、rate、width 或 height**

我认为，这个错误意味着 ffmpeg 可以解码源字幕但不能将其编码为`.srt`格式。所有编解码器都启用（我用不同的配置从 git 编译了后来的 ffmpeg 版本几次）。

这是输出：

```
 # /usr/local/bin/ffmpeg -i /var/video/sources/Balbesy1.m2ts -an -vn  -copyinkf -scodec srt -f srt -y  sub.srt
ffmpeg version N-49947-g9f16cb9 Copyright (c) 2000-2013 the FFmpeg developers
  built on Feb 14 2013 14:26:10 with gcc 4.4.5 (Debian 4.4.5-8)
  configuration: --enable-encoder=dvdsub --enable-decoder=dvdsub --enable-decoder=pgssub --enable-encoder=srt --enable-decoder=srt --enable-encoder=srt --enable-decoder=srt
  libavutil      52\. 17.101 / 52\. 17.101
  libavcodec     54\. 91.103 / 54\. 91.103
  libavformat    54\. 63.100 / 54\. 63.100
  libavdevice    54\.  3.103 / 54\.  3.103
  libavfilter     3\. 37.101 /  3\. 37.101
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
[mpegts @ 0x2719040] Stream #5: not enough frames to estimate rate; consider increasing probesize
[mpegts @ 0x2719040] Could not find codec parameters for stream 5 (Subtitle: hdmv_pgs_subtitle ([144][0][0][0] / 0x0090)): unspecified size
Consider increasing the value for the 'analyzeduration' and 'probesize' options
[NULL @ 0x271fec0] start time is not set in estimate_timings_from_pts
Input #0, mpegts, from '/var/video/sources/Balbesy1.m2ts':
  Duration: 01:18:11.89, start: 599.958300, bitrate: 37378 kb/s
  Program 1 
    Stream #0:0[0x1011]: Video: h264 (High) ([27][0][0][0] / 0x001B), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 23.98 fps, 23.98 tbr, 90k tbn, 47.95 tbc
    Stream #0:1[0x1100]: Audio: dts (DTS-HD MA) ([134][0][0][0] / 0x0086), 48000 Hz, 5.1(side), fltp, 768 kb/s
    Stream #0:2[0x1101]: Audio: dts (DTS-HD MA) ([134][0][0][0] / 0x0086), 48000 Hz, 5.1(side), fltp, 768 kb/s
    Stream #0:3[0x1102]: Audio: ac3 (AC-3 / 0x332D4341), 48000 Hz, 5.1(side), fltp, 448 kb/s
    Stream #0:4[0x1103]: Audio: ac3 (AC-3 / 0x332D4341), 48000 Hz, 5.1(side), fltp, 448 kb/s
    Stream #0:5[0x1200]: Subtitle: hdmv_pgs_subtitle ([144][0][0][0] / 0x0090)
Output #0, srt, to 'sub.srt':
    Stream #0:0: Subtitle: srt
Stream mapping:
  Stream #0:5 -> #0:0 (pgssub -> srt)
Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

对不起我的英语不好

# jquery - 更改鼠标悬停时的活动菜单颜色并使用jquery单击事件

> ID：14873407
> 
> 赞同：1
> 
> 时间：2013-02-14T11:08:44.340
> 
> 标签：jquery

```
<html>
    <head>
        <title>menu</title>
        <style>
            .highlight, .highlight_stay {
                color:red;
            }
        </style>
        <script type="text/javascript" src="jquery-1.7.min.js"></script>
        <script type="text/javascript">
            $(function() {
                $('li a').hover(function() {
                    $(this).addClass('highlight');
                }, function() {
                    $(this).removeClass('highlight');
                });
                $('li a').click(function() {
                    $(this).addClass('highlight_stay');
                });
            });
        </script>
    </head>
    <body>
        <ul>
            <li><a href="#" style="text-decoration:none;">list1</a>
            </li>
            <li><a href="#" style="text-decoration:none;">list2</a>
                <ul>
                    <li><a href="#" style="text-decoration:none;">sublist1</a>
                    </li>
                    <li><a href="#" style="text-decoration:none;">sublist2</a>
                    </li>
                    <li><a href="#" style="text-decoration:none;">sublist3</a>
                    </li>
                    <li><a href="#" style="text-decoration:none;">sublist4</a>
                    </li>
                </ul>
            </li>
            <li><a href="#" style="text-decoration:none;">list3</a>
            </li>
            <li><a href="#" style="text-decoration:none;">list4</a>
            </li>
        </ul>
    </body>
</html> 
```

它将所有列表更改为红色。但是，我想要以下要求。

第一次单击时`list1`，它变为红色。如果我在第 2 次单击`list2`，`list1`将更改为原来的颜色，`list2`并将变为红色。明智地它想要工作。同时鼠标悬停也想激活列表为红色。

任何人都可以帮忙吗？请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:13:04.307

只需更改单击处理程序以首先`highlight_stay`从当前拥有它的任何元素中删除该类。

```
$('li a').click(function(){
    $('.highlight_stay').removeClass('highlight_stay');
    $(this).addClass('highlight_stay');
}); 
```

演示：http: [//jsfiddle.net/gFzL2/](http://jsfiddle.net/gFzL2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:19:28.937

使用 CSS 进行悬停，它比 jQuery 高效得多。您可以使用 .each 删除所有突出显示，然后突出显示您想要的。我刚刚在这里做了一个 jsfiddle - [http://jsfiddle.net/Ezb4v/](http://jsfiddle.net/Ezb4v/)

```
$(function () {
    $('li a').click(function () {
        $('li a').each(function () {
            $(this).removeClass("highlight");
        });
        $(this).addClass('highlight');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:16:06.237

```
$('li a').click(function(){
    $('a').removeClass('highlight_stay');
    $(this).addClass('highlight_stay');
}); 
```

[演示](http://jsfiddle.net/pradkumar_n/VpmbL/1159/)

# jquery - jQuery + datepicker 在 Google Apps Script 中极度缓慢

> ID：14873409
> 
> 赞同：2
> 
> 时间：2013-02-14T11:08:47.830
> 
> 标签：jquery, google-apps-script, google-caja

我有以下脚本，它使用 jquery 和一个 datepicker 实现了一个滑动表单。

它的性能很糟糕，即使我让 Chrome 崩溃。我怀疑出了什么问题，但我看不到发生了什么。在 caja 操场上，它并不是很快，但更好。

也许有人看到这里发生了什么？

脚本： [https ://script.google.com/a/zzapps.nl/d/1IH5NSQlmv7LG5mUWAJTsIupIA8xOo_qXYyrEgvzP_d5TvYAwl4_eJaPV/edit](https://script.google.com/a/zzapps.nl/d/1IH5NSQlmv7LG5mUWAJTsIupIA8xOo_qXYyrEgvzP_d5TvYAwl4_eJaPV/edit)

已发布的网络应用程序：

[https://script.google.com/macros/s/AKfycbyKFV8tDkqcZs6aDF3hVmO5f-2RPZHMnrQgZuRWMkR4x6Q1TpVu/exec](https://script.google.com/macros/s/AKfycbyKFV8tDkqcZs6aDF3hVmO5f-2RPZHMnrQgZuRWMkR4x6Q1TpVu/exec)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:41:13.797

如果您不更改顶部的下拉菜单，Caja 游乐场默认为“ES5”模式，这是使用 Caja 的方式与 Apps Script 使用的方式不同（该下拉菜单中的“ES53”模式）。我怀疑在后一种模式下你会在操场上看到同样的情况。但我们意识到缓慢并正在努力。

# android - 自定义通知布局中的 ImageView 对齐

> ID：14873410
> 
> 赞同：1
> 
> 时间：2013-02-14T11:08:48.577
> 
> 标签：android

我正在尝试按照示例中的描述实现自定义通知布局。

```
 <RelativeLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:gravity="center_vertical"
   >
   <ImageView
     android:id="@+id/image"
     android:layout_width="64dp"
     android:layout_height="64dp"
     android:layout_alignParentLeft="true"
     android:scaleType="centerInside"
     />
   <TextView
     android:id="@+id/title"
     android:layout_width="wrap_content"
     android:layout_height="fill_parent"
     android:layout_toRightOf="@id/image"
     style="@style/Notification_Title"
     android:gravity="center_vertical"
     />
   <TextView
     android:id="@+id/text"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:layout_toRightOf="@id/title"
     android:gravity="right|center_vertical"
     android:paddingRight="10dp"
     style="@style/Notification_Text"
     />
 </RelativeLayout> 
```

我的布局也从最左边的 ImageView 开始，需要像默认通知一样对齐。是否有可以应用于图像视图或属性值的默认样式，我可以从中获取默认大小？

# cuda - Visual Studio nVidia nsight 更改 cuda 工具包版本

> ID：14873417
> 
> 赞同：2
> 
> 时间：2013-02-14T11:09:05.770
> 
> 标签：cuda, nsight

我正在使用 nvidia nsight for visual studio 编写 cuda 程序。

我最近使用 cuda 工具包 5 安装了新的 beta 版 nsight，但我的旧项目仍在使用 4.2 版。

我在哪里更改要使用的工具包版本？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:31:32.227

最安全的方法是创建一个新的 CUDA 5.0 项目并将文件移动到其中。

如果你想搞乱构建自定义，你可以这样做：

1.  右键单击您的项目
2.  单击“构建自定义...”
3.  取消选中“CUDA 4.2”自定义并选中“CUDA 5.0”自定义

![在此处输入图像描述](../Images/0466d58a3b1471b03b282cffec195223.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-29T23:25:07.407

在 Visual Studio 2013 中，这是右键单击项目以打开包含 Build Dependencies 和子菜单 Build Customizations 的菜单

# javascript - 如何从 ExtJs 中的 DateField 获取日期

> ID：14873419
> 
> 赞同：4
> 
> 时间：2013-02-14T11:09:08.743
> 
> 标签：javascript, jquery, extjs, extjs4.1

如何从所有浏览器支持的 extjs 4.0 中的日期字段中仅获取**02/8/2013 mm/dd/yyyy之类的日期。**

我的代码如下

```
 items: [{                  
                xtype: 'datefield',
                fieldLabel: 'Date',
                format: 'm/d/Y',
                altFormats: 'm/d/Y',

            }, 
```

我从这个字段中得到一个像这样的值

```
date = Ext.getCmp('configuration-section-contact-form-date-of-issue').getValue(); 
```

通过使用上面的行，我得到了完整的 UTC 时间，但我只想要像 02/8/2013 这样的日期。我怎样才能得到请帮助我。谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T11:24:14.190

您可以使用：

```
dateField.getSubmitValue(); 
```

查看[**jsfiddle上的实时示例**](http://jsfiddle.net/zywAe/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:18:30.667

试试这个：

```
Ext.getCmp('configuration-section-contact-form-date-of-issue').getValue().format('m/d/Y'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:19:42.347

您可以使用“Ext.util.Format.Date”方法将日期格式化为所需格式。

```
Ext.util.Format.Date(Ext.getCmp('configuration-section-contact-form-date-of-issue').getValue(),'m/d/Y') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-19T11:26:32.890

我今天遇到了这个问题，我使用了这种方式并且它有效：

```
var searchText = Ext.util.Format.date(Ext.getCmp('pes1').getValue(), 'd/m/Y'); 
```

# javascript - JS RegEx .replace() 条件模式和子组

> ID：14873430
> 
> 赞同：2
> 
> 时间：2013-02-14T11:09:38.193
> 
> 标签：javascript, regex

我需要格式化比利时电话号码。根据城市的不同，本地前缀的长度为 1 或 2 个字符，我不知道如何编写单个正则表达式来匹配它们...

这是我到目前为止所得到的，它有效，但需要两个步骤：

2 个字符前缀：

```
/(0{0,3}32)(93|92|89|87|86|85|84|83|82|81|80|71|69|67|65|64|63|62|61|60|59|58|57|56|55|54|53|52|51|50|28|26|25|22|19|16|15|14|13|12|11|10)([0-9]{2})([0-9]{2})([0-9]{2})/ 
```

1 个字符前缀：

```
/(0{0,3}32)(9|8|7|6|5|4|3|2)([0-9]{3})([0-9]{2})([0-9]{2})/ 
```

和模式：

```
"+$1 $2 $3 $4 $5" 
```

知道如何组合这两个 RegEx 以及对 .replace() 使用相同的模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:45:05.027

封装检查和格式化的自定义对象怎么样？

```
function BelgianPhoneNumber(inputStr) {
    var re = /0{0,3}32(?:(9[23]|8[0-79|7[1]|6[0-579]|5[0-9]|2[2568]|1[0-69])([0-9]{2})|([2-9])([0-9]{3}))([0-9]{2})([0-9]{2})/,
        match, area, grp1, grp2, grp3;

    if (match = re.exec(inputStr)) {
        if (match[1]) {
            area = match[1];
            grp1 = match[2];
        } else {
            area = match[3];
            grp1 = match[4];
        }
        grp3 = match[5];
        grp4 = match[6];
    } else {
        area = grp1 = grp2 = grp3 = "";
        // possibly throw error
    }

    this.toString = function () {
        if (match) {
            return ["+32", area, grp1, grp2, grp3].join(" ");
        } else {
            return "invalid phone number: " + inputStr;
        }
    }
} 
```

用法

```
var p = new BelgianPhoneNumber("003233437667");
console.log("Phone: " + p);  // -> Phone: +32 3 343 76 67

var p = new BelgianPhoneNumber("003287565656")
console.log("Phone: " + p);  // -> Phone: +32 87 56 56 56 
```

不过，我不知道这两个编号模式是否可以重叠，在匹配时会产生误报。

但是，当有疑问时，正则表达式更倾向于使用 2 位数的区号而不是 1 位数的区号。如果您想反过来，请更改“选择...”组的顺序。

自定义对象的一个​​参数是，您可以轻松添加方法，例如`.getAreaCode()`或 将区号映射到城市名称的方法。`.toString()`由于重写的方法，您仍然可以直接在字符串中使用它。

组合的正则表达式分解为

```
0{0,3}32 # 常量前缀，因此没有组
(?: # 选择: 要么...
  (9[23]|8[0-79|7[1]|6[0-579]|5[0-9]|2[2568]|1[0-69]) # 2位区号
  ([0-9]{2}) # 第一组（2位）
  | ＃ 或者...
  ([2-9]) # 1 位区号
  ([0-9]{3}) # 第一组（3位）
) # 结束选择
([0-9]{2}) # 第二组（2位）
([0-9]{2}) # 第三组（2位）

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:22:11.720

您的第一个正则表达式可以简化为：

```
(0{0,3}32)(9[23]|8[0-79]|71|6[0-79]|5[0-9]|2[2568]|1[0-69])([0-9]{2})([0-9]{2})([0-9]{2}) 
```

您的第二个也可以简化为：

```
(0{0,3}32)([2-9])([0-9]{3})([0-9]{2})([0-9]{2}) 
```

这是结合这两个正则表达式的可能解决方案之一：

```
(0{0,3}32)(?:(9[23]|8[0-79]|71|6[0-79]|5[0-9]|2[2568]|1[0-69])([0-9]{2})|([2-9])([0-9]{3}))([0-9]{2})([0-9]{2}) 
```

您需要的每个组仍然可以访问。但是组的索引发生了变化。要检索您在问题中提供的格式，请将匹配的字符串替换为：

```
+$1 $2$4 $3$5 $6 $7 
```

[演示](http://regexr.com?33p9t)

# cakephp - 致命错误：调用未定义的方法 View::redirect() cakephp

> ID：14873431
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:09:42.933
> 
> 标签：cakephp, cakephp-1.3

我正在使用 CakePHP 1.3 开发一个应用程序。一切正常，但有一个错误。当我`redirect()`在我的`.ctp`页面中使用它时会出错

```
 Fatal error: Call to undefined method DebugView::redirect() 
```

当我在控制器中使用它时，重定向工作正常。我在我的 AppController 中包含了如下助手

```
 var $helpers = array('Html', 'Form','Session'); 
```

请帮助提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:41:41.760

您永远不会在视图层中重定向（或输出任何标题）。使用控制器来执行此操作。然后，视图应该只根据所需的输出格式（html、xml、json、...）呈现输出。标头内容是控制器的响应和责任的一部分（在 2.x 中是响应类本身）。

因此，您观察到它将与控制器而不是内部视图一起使用是正确的。“调用未定义的方法”始终是在此范围内不可用的方法的一个很好的指标。重定向作为“逻辑”的一部分使它们仅在控制器和组件中可用。永远不会出现在视图中（所有逻辑发生后输出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:04:10.890

在您的控制器中：

```
$this->redirect( 'url, absolute or relative here' ); 
```

完毕。

# android - AsyncTask - 下载缓慢

> ID：14873433
> 
> 赞同：4
> 
> 时间：2013-02-14T11:09:47.223
> 
> 标签：android, android-asynctask, download

我正在使用 AsyncTask 从 Internet 下载约 50 MB 的文件。有时，当我下载这个文件时，进度条增益非常缓慢（即使我在 Wi-Fi 上）。几分钟后，手机显示，下载完成，但文件本身只有~100kB，没有更多。但是当我重新启动设备并尝试下载文件时，下载会简单而快速地执行。有没有人遇到过同样的问题？在下载新文件之前，我是否需要擦除相同的下载内存？我正在将文件下载到 Environment.externalStoryDirectory()。

谢谢

**从活动中调用下载：**

```
 mProgressDialog = new ProgressDialog(ItemDetails.this);
            mProgressDialog.setTitle("Downloading");
            mProgressDialog.setMessage("Downloading sth...");
            mProgressDialog.setIndeterminate(false);
            mProgressDialog.setMax(100);
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            DownloadMapTask downloadFile = new DownloadMapTask(ItemDetails.this);
            downloadFile.execute(web_location_url);
            mProgressDialog.show(); 
```

**下载异步任务（两种方法）：**

```
@Override
protected String doInBackground(String... urls) {
    int count;

    PATH=maps_loc+"/Android/data/test/maps/";

    try {
        URL url = new URL(urls[0]);
        HttpURLConnection connection2 = (HttpURLConnection) url.openConnection();
        connection2.setRequestMethod("GET");
        connection2.setDoOutput(true);
        connection2.connect();
        int lenghtOfFile = connection2.getContentLength();

        File apkdir = new File(PATH);
        apkdir.mkdirs();

        File newInstall = new File(PATH, name+".tmp");

        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream(newInstall);

        byte data[] = new byte[1024];

        long total = 0;

        while ((count = input.read(data)) != -1 && running==true) {
            total += count;
            publishProgress((int) (total * 100 / lenghtOfFile));
            output.write(data, 0, count);
        }
        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;

}

public void onProgressUpdate(Integer... args) {

    ItemDetails.mProgressDialog.setProgress(args[0]);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:15:33.463

如果客户端速度慢并且下载时间长，某些服务器会关闭连接，如果您的程序通过移动数据而不是Wi-Fi连接到Internet，则可能会出现这种情况。

您应该考虑在您的程序中支持**下载恢复**，而不是每次都从头开始。

我认为您不需要清除某种*下载内存。*我有一个可以轻松下载超过 50MB 的应用程序，没有任何问题。

此外，您可能会考虑`lock`为 Wi-Fi 和处理器获取一个，以保持您的程序运行，直到下载完成。

**编辑**

在您的代码中，尝试`lenghtOfFile`在该行之后打印该值，`int lenghtOfFile = connection2.getContentLength();`以确保它与您正在下载的实际文件大小相同。

以下是支持`resume`我在项目中使用的替代示例代码。（这只是为了说明这个想法，您需要根据需要修改代码）

```
HttpClient httpClient = new DefaultHttpClient();
HttpGet request = new HttpGet(new URI(fileURL)));
HttpResponse response;
InputStream is = null;
FileOutputStream fos = null;
try {

    boolean continueDownloading = false;
    String tmpFileName = fileName + "_tmp";
    outputFile = new File(downloadFolder, tmpFileName);
    if (outputFile.exists()) {
            localFileLength = outputFile.length();
            if (localFileLength > 0) {
                    continueDownloading = true;
            } 

            if (continueDownloading) {
                    request.addHeader("Range", "bytes=" + localFileLength + "-");
            }

            response = httpClient.execute(request);

            long remoteFileLength = 0;
            Header contentLengthHeader = response.getFirstHeader("Content-Length");
            if (contentLengthHeader != null) {
                    remoteFileLength = Integer.parseInt(contentLengthHeader.getValue());
            }

            long downloaded = 0;

            if (continueDownloading) {
                    downloaded = localFileLength;
            }

            long fullFileLength = downloaded + remoteFileLength;

            fos = new FileOutputStream(outputFile, true);

            is = response.getEntity().getContent();

            byte[] buffer = new byte[DOWNLOAD_BUFFER_SIZE];
            int len = 0;
            while ((len = is.read(buffer)) != -1 && isDownloading) {
                    fos.write(buffer, 0, len);
                    downloaded += len;                                      
            }

            fos.flush();

            boolean success = downloaded == fullFileLength;
            if (success) {
                    outputFile.renameTo(new File(downloadFolder, fileName));
            }

    } catch (Throwable ex) {
            ex.printStackTrace();               
    } finally {
       // clean up resources
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:21:42.380

尝试使用 downloadManager 而不是手动下载，使用它有很多优点。

这是一个示例：[DownloadManager Example](http://www.edumobile.org/android/android-development/download-manager-in-android-programming/)

并查看文档：[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)

# android - Logback-Android：将 FixedWindowRollingPolicy 与 SizeBasedTriggeringPolicy 一起使用时出现“无适用操作”错误

> ID：14873441
> 
> 赞同：8
> 
> 时间：2013-02-14T11:10:07.840
> 
> 标签：android, logging, logback

每当启用日志记录（应用程序中的配置）时，我在我的 android 应用程序中使用[logback-android将消息记录到文件中。](http://tony19.github.com/logback-android/)它似乎工作正常，但是当我遇到以下情况时

*   当日志大小达到 50MB 时轮换日志
*   为发生日志轮换时创建备份文件。例如。testFile.1.log.zip

为此，我有以下*logback.xml*文件：

```
<configuration>
<appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>/sdcard/dappLog.log</file>
    <append>true</append>
    <encoder>
        <pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
        <fileNamePattern>/sdcard/dappLog.%i.log.zip</fileNamePattern>
        <minIndex>1</minIndex>
        <maxIndex>2</maxIndex>
    </rollingPolicy>

    <triggeringPolicy class="com.dapp.utilities.SizeBasedTriggeringPolicy">
        <maxFileSize>50MB</maxFileSize>
    </triggeringPolicy>
</appender>

<root level="INFO">
    <appender-ref ref="FILE" />
</root> 
```

根据[这个](https://stackoverflow.com/questions/6842806/how-can-i-set-log-file-max-size-on-android/8721176#8721176)答案，因为 SizeBasedTriggerPolicy 中有一个[错误](http://jira.qos.ch/browse/LBCORE-123)（[src](https://github.com/tony19/logback-android/blob/master/logback-core/src/main/java/ch/qos/logback/core/rolling/SizeBasedTriggeringPolicy.java#L57)），所以我有以下实现：
`

```
package com.dapp.utilities;  
import java.io.File;  
import ch.qos.logback.core.util.FileSize;  
public class SizeBasedTriggeringPolicy<E> extends ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy<E> {  
    @Override  
    public boolean isTriggeringEvent(final File activeFile, final E event) {  
        return (activeFile.length() >= FileSize.valueOf(getMaxFileSize()).getSize());  
    }  
} 
```

`

但是，当我运行它时，我收到以下错误：

```
I/System.out( 2346): 16:14:20,750 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@8:85 - no applicable action for [rollingPolicy], current pattern is [[configuration][appender][rollingPolicy]]  
I/System.out( 2346): 16:14:20,757 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@9:30 - no applicable action for [fileNamePattern], current pattern is [[configuration][appender][rollingPolicy][fileNamePattern]]  
I/System.out( 2346): 16:14:20,763 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@10:23 - no applicable action for [minIndex], current pattern is [[configuration][appender][rollingPolicy][minIndex]]  
I/System.out( 2346): 16:14:20,770 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@11:23 - no applicable action for [maxIndex], current pattern is [[configuration][appender][rollingPolicy][maxIndex]]  
I/System.out( 2346): 16:14:20,777 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@14:90 - no applicable action for [triggeringPolicy], current pattern is [[configuration][appender][triggeringPolicy]]  
I/System.out( 2346): 16:14:20,820 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@15:26 - no applicable action for [maxFileSize], current pattern is [[configuration][appender][triggeringPolicy][maxFileSize]] 
```

PS：我是登录新手。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T11:46:06.313

自己想通了这个问题。这是因为标签中的错误`class`属性 。 所以下面的代码有效： `appender`

```
<configuration>
<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>/sdcard/dapp.log</file>
    <append>false</append>

    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
        <fileNamePattern>/sdcard/dapp.%i.log.zip</fileNamePattern>
        <minIndex>1</minIndex>
        <maxIndex>2</maxIndex>
    </rollingPolicy>

    <triggeringPolicy class="com.bigbasket.dapp.utilities.SizeBasedTriggeringPolicy">
        <maxFileSize>50MB</maxFileSize>
    </triggeringPolicy>
    <encoder>
        <pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>
    </encoder>
</appender>

<root level="INFO">
    <appender-ref ref="FILE"/>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T19:59:38.443

拼写不正确的`<AppenderRef ...>`而不是`<appender-ref ...>`也可能导致此错误。

# javascript - 使用 Javascript 触发事件发送 HTTP Post

> ID：14873443
> 
> 赞同：16
> 
> 时间：2013-02-14T11:10:12.410
> 
> 标签：javascript, http, post

我对 javascript 很陌生，并且正在开发一个通过 IP 解码视频的嵌入式系统。

我编写了一个小应用程序，用于使用 javascript 设置和更改频道，并包含一个用于远程控制的密钥处理程序和一个事件处理程序，因此如果视频停止或网络中断，我可以采取一些措施或显示消息，但现在我也想要设置一个自动 HTTP POST，当我更改频道以包含有关设备的一些数据和当前正在播放的 url 时发送该 POST。

这是一个运行busybox的小型嵌入式硬件设备，所以我不能使用Ajax或添加任何其他普通的Web技术，我只需要使用Javascript发送由我正在监视的事件触发的HTTP POST，所以我的第一个目标是能够按下按钮并发送该 POST 消息，然后确定稍后触发它的时间。

任何熟悉做这些事情的人都可以让我快速了解如何将帖子发送到已知的监听设备/位置并在其中包含数据？

非常感谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-14T19:44:35.580

如果您的 Javascript 引擎支持 Web 上无处不在的 XMLHttpRequest (XHR)，这很容易。谷歌它或查看[此页面](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)了解详细信息。我在下面提供了一个代码片段。仔细阅读它，特别是关于“异步”是真的评论和响应处理程序中的闭包。此外，就 Javascript 而言，这段代码是超轻量级的，我希望它可以在几乎任何现代硬件占用空间上正常工作。

```
var url = "http://www.google.com/";
var method = "POST";
var postData = "Some data";

// You REALLY want shouldBeAsync = true.
// Otherwise, it'll block ALL execution waiting for server response.
var shouldBeAsync = true;

var request = new XMLHttpRequest();

// Before we send anything, we first have to say what we will do when the
// server responds. This seems backwards (say how we'll respond before we send
// the request? huh?), but that's how Javascript works.
// This function attached to the XMLHttpRequest "onload" property specifies how
// the HTTP response will be handled. 
request.onload = function () {

   // Because of javascript's fabulous closure concept, the XMLHttpRequest "request"
   // object declared above is available in this function even though this function
   // executes long after the request is sent and long after this function is
   // instantiated. This fact is CRUCIAL to the workings of XHR in ordinary
   // applications.

   // You can get all kinds of information about the HTTP response.
   var status = request.status; // HTTP response status, e.g., 200 for "200 OK"
   var data = request.responseText; // Returned data, e.g., an HTML document.
}

request.open(method, url, shouldBeAsync);

request.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
// Or... request.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
// Or... whatever

// Actually sends the request to the server.
request.send(postData); 
```

# c++ - 指针或引用

> ID：14873445
> 
> 赞同：0
> 
> 时间：2013-02-14T11:10:23.997
> 
> 标签：c++, oop, reference, this

我正在构建一个用于处理复数的 c++ 程序。我对此代码的行为有疑问：

```
Complex& Complex::operator=(const Complex& com)
{
    Complex::re_=com.re_;
    Complex::im_=com.im_;
    return *this;
} 
```

现在，这个函数的返回类型是一个复杂类型的引用。所以我不应该通过`this`而不是`*this`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:13:49.437

`this`指针是对象实例的地址。

使用星号取消引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:16:29.737

与 Java 和 C# 不同，`this`在 C++ 中不是引用，而是指针。该指针是 type`Complex*`或`Complex const*`，取决于方法上的 const 限定符（因此`Complex*`在您的情况下）。

**编辑：**如评论中所述，Java 和 C# 的引用并不容易与 C++ 中的引用和指针相提并论，所以让我澄清一下：

*从语法上讲*，所有三种语言的引用都被视为相同，即它们不需要被取消引用或被隐式取消引用，或者简单地说，您可以像访问它后面的对象一样`ref.method()`。

*从语义上讲*，普通 Java 和 C# 引用的行为类似于 C++ 指针，即它们可以为 null，并且可以重新分配以指向另一个对象。在 C++ 中，引用都不可能。因此，乍一看，`this`Java 和 C# 中的 C++ 指针语义与 C++ 中的一样。但是由于它不能`null`也不能重新分配以指向另一个对象，因此语义差异消失了，并且在所有三种语言中都具有相同的 C++ 引用语义。

因此，换句话说，相同的答案： **虽然`this`具有引用语义，但它在 C++ 中的语法上是一个指针，因此您必须显式取消引用它以获得（语法）引用。**

# asp.net-mvc-4 - Windows 身份验证和 Asp.Net Web API

> ID：14873446
> 
> 赞同：14
> 
> 时间：2013-02-14T11:10:26.847
> 
> 标签：asp.net-mvc-4, asp.net-web-api, windows-authentication

我有一个基于 MVC4 的带有 Windows 身份验证的 Intranet 应用程序。

当我在控制器中需要 WindowsIdentity 进行授权时，我只需使用

```
 HttpContext.User.Identity 
```

现在我想将新的 Asp.Net WebAPI 用于一些 Ajax 调用。

有没有办法像在 MVC 控制器中一样简单地获取 WindowsIdenty 对象？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-14T13:44:01.263

请不要`HttpContext`从控制器中引用。

您可以访问 Controllers[`User`](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller.user%28v=vs.108%29.aspx)属性，这是通过不直接引用来访问身份的方式`HttpContext`。

```
public class MyController : ApiController
{
    public string Get()
    {
         var indenty = this.User.Identity;
    }
} 
```

**为什么**

controllers`User`属性提供了一个抽象级别，允许更轻松地进行模拟和单元测试。这种抽象还允许更大的可移植性，例如，如果这是 WebApi Self Host，您甚至无法访问`HttpContext`.

要阅读更多关于如何单元测试和模拟 User 属性的信息，请阅读[此处](https://stackoverflow.com/questions/19006624/how-to-mock-httpcontext-user-identity-name-in-asp-net-mvc-4)。有关更多信息：请阅读[此处](https://stackoverflow.com/questions/11347807/httpselfhostserver-and-httpcontext-current)的便携性。

# html - 来自与 youtube 不同来源的视频到一个花式盒子

> ID：14873447
> 
> 赞同：0
> 
> 时间：2013-02-14T11:10:26.890
> 
> 标签：html, css, video, fancybox

谁能告诉我如何将此视频嵌入到fancybox弹出窗口中？视频：[http ://www.tm-tube.com/video/28199/XTA+-+WAR+4+-+THC+VS+3DMAX+-+R3](http://www.tm-tube.com/video/28199/XTA+-+WAR+4+-+THC+VS+3DMAX+-+R3)

网站：[http](http://thc-racing.ucoz.com/index/gallery/0-9) ://thc-racing.ucoz.com/index/gallery/0-9 下：玩得开心！我想用上面链接中的视频替换该图像。

那可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:29:47.110

首先，在 TMTube 上获取视频的嵌入代码。

其次，使用[Fancybox 文档](http://fancybox.net/howto)`Inline content`中描述的方式：

```
<a class="fancybox" id="inline" href="#video">This shows your video</a>
<div style="display:none">
    <div id="video">
         <script type="text/javascript" src="http://www.tm-tube.com/js/embed.js.php?id=28199"></script>
         <noscript><object type="application/x-shockwave-flash" data="http://www.tm-tube.com/vimp.swf?playlistmode=media&amp;mediaid=28199&amp;webtv=false&amp;hosturl=http%3A%2F%2Fwww.tm-tube.com%2Fflashcomm.php" id="flashcontent_511cc6b591bcf" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" name="c6a80378-3eb2-47e7-8415-ba1f7cff037e" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="480" height="270" align="middle"><param name="movie" value="http://www.tm-tube.com/vimp.swf?playlistmode=media&amp;mediaid=28199&amp;webtv=false&amp;hosturl=http%3A%2F%2Fwww.tm-tube.com%2Fflashcomm.php" /><param name="width" value="480" /><param name="height" value="270" /><param name="align" value="middle" /><param name="quality" value="high" /><param name="allowscriptaccess" value="always" /></object></noscript>
    </div>
</div> 
```

工作[jsFiddle](http://jsfiddle.net/samsamX/csZ64/)。

# php - 从数据库制作一个舒适的 php 多维数组

> ID：14873448
> 
> 赞同：-2
> 
> 时间：2013-02-14T11:10:28.390
> 
> 标签：php, arrays, loops

我有这样的代码：

```
include 'dbconnect.php';
mysql_query("SET NAMES utf8;"); 

$sql = mysql_query("SELECT * From courseEnglish");
$courseInfo = array();

while ($row_course = mysql_fetch_assoc($sql))
   $courseInfo[] = $row_course; 
```

它给了我一个来自数据库的 php 数组，但是为了呈现我需要使用的数据：

```
echo $courseInfo[2]['Course']; 
```

我希望数组是这样的，所以我可以输入如下内容：

```
echo $courseInfo[2][2]; 
```

有没有改变代码的选项，所以我有一个数组，我可以只用索引循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:13:24.697

我认为您正在寻找`mysql_fetch_row`，它的作用与 相同`mysql_fetch_assoc`，只是它返回一个数字索引数组。[这是文档的链接](http://php.net/manual/en/function.mysql-fetch-row.php)。

话虽如此，您可能需要考虑放弃已弃用的`mysql_*`扩展，转而支持`mysqli_*`（`i`改进的代表）或完全 OO 样式的`PDO`扩展。`mysql_*`选中任何函数手册页顶部的红色框，它包含指向首选对应函数的链接...

但考虑到所有因素，查看您的查询 ( `SELECT * FROM ...`)，我*根本不会*使用数字索引数组来获取结果。如果您的表包含超过 1 个字段，那么您迟早会遇到麻烦，当您试图计算出哪些数据来自哪个字段时。说真的......只需使用 assoc 数组，或者更好：使用对象。
假设您更改了表格布局（添加/删除某些字段？），在这种情况下维护您的代码将是地狱。不过，这由你决定，但我想我可能会提到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:15:56.410

也许这..？

```
foreach ($courseInfo as $course_index = > $course_content)
   foreach ($course_content as $field)
     echo $field; 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:23:36.543

尝试这个 ：

```
while ($row_course = mysql_fetch_array($sql)) 
```

# javascript - 离开路线的余烬清理

> ID：14873452
> 
> 赞同：5
> 
> 时间：2013-02-14T11:10:42.377
> 
> 标签：javascript, ember.js, ember-router

我想在离开路线时进行一些清理，例如停止计时器。为此，我需要一个在离开路线时触发的事件，并且我需要访问该事件内的控制器实例。

有一个`exit`事件，但它没有得到任何参数，并且`this.get('controller')`在它内部也不起作用 - 返回*undefined*。

是否有适当的方法来获取`exit`事件中的控制器实例，或者可能是另一个我不知道的事件？

我用我想要的一个例子来设置[这个小提琴..](http://jsfiddle.net/crUFE/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:54:53.090

您可以通过调用`this.controllerFor('home')`. 您可以[在这个 JSFiddle](http://jsfiddle.net/lcoq/crUFE/8/)中尝试一下。

这有点烦人，因此最近[合并了一个拉取请求](https://github.com/emberjs/ember.js/pull/1913)，允许您直接使用`this.controller`，正如您[在此 JSFiddle](http://jsfiddle.net/lcoq/crUFE/9/)中看到的那样。

# zend-framework - Zend_Session 没有携带值来查看

> ID：14873455
> 
> 赞同：0
> 
> 时间：2013-02-14T11:10:49.960
> 
> 标签：zend-framework, session-variables, zend-session

我在我的 MVC 站点中设置了一个 Session 变量来携带要在任何后续页面上使用的 id。

在我的控制器中， var_dumping 会话在此处显示正确的值，但是当我将所述值传递给视图并尝试在此处回显它们时，它出现空白。

有关导致它们不出现的任何指示。

请注意，该视图是部分视图，而不是主要视图。

Bootstrap 会话相关代码：

```
protected function _initSession(){
    Zend_Session::start();
    $SessAuto2Auto = new Zend_Session_Namespace('SessAuto2Auto');

    $SessAuto2Auto->cityIds = "1,2,3";   // Hard code values for testing purposes
    $SessAuto2Auto->IndustryIds = "3,4"; // Hard code values for testing purposes
} 
```

控制器相关代码：ProductController.php

```
public function indexAction()
{
    // .. Unrelated code removed for brevity

    $response = $this->getResponse();
    $response->insert('sidebar', $this->view->render('sidebar.phtml'));

    // This code is dumping the values correctly
    echo('<pre>');
    var_dump($this->sessionAuto2Auto);
    echo('</pre>');

    // .. Unrelated code removed for brevity

    $this->view->filterCity = $this->sessionAuto2Auto['cityIds'];
    $this->view->filterIndustryIds = $this->sessionAuto2Auto['IndustryIds'];
} 
```

查看部分：sidebar.phtml

```
<?php
    // This code does NOT show the value, comes up blank
    echo($this->filterCity);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:20:42.593

如果您`sidebar.phtml`使用部分助手调用，则部分有自己的变量范围，它们只能访问传递给它们的变量。您需要在部分帮助程序调用中包含会话变量：

```
echo $this->partial('sidebar.phtml', array(
    'filterCity' => $this->filterCity,
    'filterIndustryIds' => $this->filterIndustryIds
) 
```

或使用 render 代替（它使用与其他视图脚本相同的范围）：

```
<?=$this->render('sidebar.phtml')?> 
```

# android - android如何根据时间序列在同一日期绘制具有多个图的图表折线图

> ID：14873462
> 
> 赞同：2
> 
> 时间：2013-02-14T11:11:08.263
> 
> 标签：android, performance

我正在使用 achartengine 绘制折线图，​​以便在日期明智地显示血糖。我成功绘制了折线图。但是，我在这里挣扎，有一段时间我每天有不止一个血糖检查值。我不知道如何在同一日期在折线图中显示多个值。

```
Thanks Advance..

 Note: I need to show the line graph for multiple values each day. Normally Blood 
 sugar possible for checking for minimum 3 times per day.
 that's my problem.  

My Code : my code is very usefull for normal line graph generating..

    public class GraphActivity extends Activity {

private ArrayList<String> mMonthArrayList = new ArrayList<String>() ;

private GraphicalView mChart ;

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Toast.makeText(getApplicationContext(), "SecondActivity", 20).show();

    mMonthArrayList.add("01/01/2013");
    mMonthArrayList.add("02/01/2013");
    mMonthArrayList.add("03/01/2013");
    mMonthArrayList.add("04/01/2013");
    mMonthArrayList.add("05/01/2013");
    mMonthArrayList.add("06/01/2013");
    mMonthArrayList.add("07/01/2013");
    mMonthArrayList.add("08/01/2013");
    mMonthArrayList.add("09/01/2013");
    mMonthArrayList.add("10/01/2013");
    mMonthArrayList.add("11/01/2013");
    mMonthArrayList.add("12/01/2013");

    openChart();
}

private void openChart() 
{

    int xsideData[] = {0,2,3,4,6};
    int ysideData[] = {200,300,500,600,400};

    /*ArrayList<Integer> xsideData = new ArrayList<Integer>() ;
    xsideData.add(0);
    xsideData.add(1);
    xsideData.add(2);
    xsideData.add(3);
    xsideData.add(4);

    ArrayList<Integer> ysideData = new ArrayList<Integer>() ;
    ysideData.add(200);
    ysideData.add(300);
    ysideData.add(400);
    ysideData.add(600);
    ysideData.add(800);*/

    XYSeries xyseriesData = new XYSeries("XYSERIES TITLE");
    XYSeriesRenderer xyRenderer = new XYSeriesRenderer() ;
    XYMultipleSeriesDataset xymultipleDataset = new XYMultipleSeriesDataset();

    // Adding data to xside and yside Series
    for(int i = 0 ; i < xsideData.length; i++ ) {
        xyseriesData.add(xsideData[i], ysideData[i]);
    }

    xymultipleDataset.addSeries(xyseriesData);

    xyRenderer.setColor(Color.WHITE);
    xyRenderer.setPointStyle(PointStyle.CIRCLE);
    xyRenderer.setFillPoints(true);
    xyRenderer.setLineWidth(1);
    xyRenderer.setDisplayChartValues(true);

    // Creating a XYMultipleSeriesRenderer to customize the whole chart
    XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();
    multiRenderer.setXLabels(0);
    multiRenderer.setXTitle("Year 2012");
    //multiRenderer.setZoomButtonsVisible(true);   
    multiRenderer.setGridColor(Color.WHITE);
    multiRenderer.setShowGrid(true);

    multiRenderer.setLabelsTextSize(15);
    multiRenderer.setLegendTextSize(15);
    multiRenderer.setMargins(new int[] { 20, 30, 15, 0 });

    multiRenderer.setXLabels(7);
    multiRenderer.setYLabels(5);
    multiRenderer.setDisplayChartValues(false);
    //multiRenderer.setShowGrid(false);

    for(int i=0;i<xsideData.length;i++)
    {
        multiRenderer.addXTextLabel(i, mMonthArrayList.get(i));     
    }       
    multiRenderer.addSeriesRenderer(xyRenderer);

    LinearLayout chartContainer = (LinearLayout) findViewById(R.id.chart_container);
    // Creating a Line Chart
mChart = (GraphicalView) ChartFactory.
    getLineChartView(getBaseContext(), xymultipleDataset, multiRenderer);       
    // Adding the Line Chart to the LinearLayout
    chartContainer.addView(mChart);    
}

    }

      My output image : 
     ![enter image description here][1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:26:57.487

看看这段代码......它工作正常

公共类 NewGraph 扩展 Activity {

```
private XYMultipleSeriesDataset mDataset;
private XYMultipleSeriesRenderer mRenderer;
List<double[]> values = new ArrayList<double[]>();
private GraphicalView mChartView;
private TimeSeries time_series;

// chart container
private LinearLayout layout;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.testlayout);

    layout = (LinearLayout) findViewById(R.id.chart);

    // create dataset and renderer
    mDataset = new XYMultipleSeriesDataset();
    mRenderer = new XYMultipleSeriesRenderer();
    mRenderer.setAxisTitleTextSize(16);
    mRenderer.setChartTitleTextSize(20);
    mRenderer.setLabelsTextSize(15);
    mRenderer.setLegendTextSize(15);
    mRenderer.setPointSize(3f);

    XYSeriesRenderer r = new XYSeriesRenderer();
    r.setColor(Color.GREEN);
    r.setPointStyle(PointStyle.CIRCLE);
    r.setFillPoints(true);
    mRenderer.addSeriesRenderer(r);
    mRenderer.setClickEnabled(true);
    mRenderer.setSelectableBuffer(20);
    mRenderer.setPanEnabled(true);

    time_series = new TimeSeries("test");

    mDataset.addSeries(time_series);

    fillData();
    int pos=time_series.getItemCount();

    Log.v("newgraph", "pos"+pos);
    mChartView = ChartFactory.getTimeChartView(this, mDataset, mRenderer,
            "dd-MMM-yyyy");

    layout.addView(mChartView);
}

private void fillData() 
{
  //  long value = new Date().getTime() - 3 * TimeChart.DAY;
    final Calendar c = Calendar.getInstance();
    c.set(Calendar.HOUR_OF_DAY, 10);
    long mytimestamp1=c.getTimeInMillis();
    c.set(Calendar.HOUR_OF_DAY, 11);
    long mytimestamp2=c.getTimeInMillis();
    c.set(Calendar.HOUR_OF_DAY, 12);
    long mytimestamp3=c.getTimeInMillis();
    c.set(Calendar.HOUR_OF_DAY, 13);
    long mytimestamp4=c.getTimeInMillis();
    c.set(Calendar.HOUR_OF_DAY, 14);
    long mytimestamp5=c.getTimeInMillis();
    c.set(Calendar.HOUR_OF_DAY, 15);
    long mytimestamp6=c.getTimeInMillis();
    c.set(Calendar.HOUR_OF_DAY, 16);

    c.add(Calendar.DATE, 1);
    c.set(Calendar.HOUR_OF_DAY,12);
    long mytimestamp7=c.getTimeInMillis();

    time_series.add(mytimestamp1, 10);
    time_series.add(mytimestamp2, 20);
    time_series.add(mytimestamp3, 30);
    time_series.add(mytimestamp4, 40);
    time_series.add(mytimestamp5, 50);
    time_series.add(mytimestamp6, 60);
    time_series.add(mytimestamp7,30);
    /*time_series.add(new Date(mytimestamp1), 10);
    time_series.add(new Date(mytimestamp2), 20);
    time_series.add(new Date(mytimestamp3), 30);
    time_series.add(new Date(mytimestamp4), 40);
    time_series.add(new Date(mytimestamp5), 50);
    time_series.add(new Date(mytimestamp6), 60);
    */

} 
```

# php - prestashop webservice : 使用 PHP 制作 CRUD 应用程序，在 XML 上检索信息

> ID：14873471
> 
> 赞同：0
> 
> 时间：2013-02-14T11:11:29.903
> 
> 标签：php, xml, web-services, crud, prestashop

美好的一天，我正在 prestashop 上启动一个 CRUD 应用程序，我想通过管理存储的程序启动的 php 应用程序使用 web 服务来更新、创建或删除产品、用户和订单。

我看过 prestashop 指南： [http ://doc.prestashop.com/display/PS15/Using+the+PrestaShop+Web+Service](http://doc.prestashop.com/display/PS15/Using+the+PrestaShop+Web+Service)

现在我正在努力把事情做好。

我实际上收到了一个代表产品结构的 xml：

```
<?php
// Here we define constants /!\ You need to replace this parameters
define('DEBUG', true);
define('PS_SHOP_PATH', 'http://www.server.com/prestashop/');
define('PS_WS_AUTH_KEY', 'blahblahbla');
require_once('./PSWebServiceLibrary.php');

    $webService = new PrestaShopWebservice(PS_SHOP_PATH, PS_WS_AUTH_KEY, DEBUG);
    $opt = array('resource' => 'products');
    $opt['id'] =1;

        $xml = $webService->get($opt);
        $resources = $xml->children()->children();

foreach ($resources as $nodeKey => $node)
    {

        echo $nodeKey . " : ". $resources->$nodeKey ."<br>";
    }

/*$opt = array('resource' => 'products');
$opt['putXml'] = $xml->asXML();
$opt['id'] = 1;
$xml = $webService->edit($opt);*/

?> 
```

我遇到的第一个问题：

“名称”字段在 xml 中有一些子项，它们是不同的语言，因此，在我浏览节点的循环中，我想“进入”那些有孩子的人......因为实际上我的名字尝试“ `echo`”为空，但如果我看到 xml，我可以看到 2 个节点，`<name>`其中包含 2 种不同语言的名称。暂时就这些了，以后我会发布越来越多的问题：D

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:33:41.127

您正在引用一个有孩子的 SimpleXMLElement ( [http://php.net/manual/en/class.simplexmlelement.php](http://php.net/manual/en/class.simplexmlelement.php) )。在这种情况下，它有子命名语言。

```
Array
(
    [name] => SimpleXMLElement Object
        (
            [language] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [id] => 1
                        )

                )

        )

) 
```

因此，您将访问如下。

```
if($resources->$nodeKey->children()){

    $children = false;
    foreach($resources->$nodeKey->children() as $child){
        $children[] = $child;
    }

    echo $nodeKey . " : [" . @implode(", ", $children) . "]<br>";
}
else    
    echo $nodeKey . " : ". $resources->$nodeKey ."<br>"; 
```

结果：

```
Array
(
    [name] => SimpleXMLElement Object
        (
            [language] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [id] => 1
                        )

                )

        )

)
name : [iPod Nano] 
```

# java - 元素内的 Webdriver 搜索

> ID：14873475
> 
> 赞同：0
> 
> 时间：2013-02-14T11:11:44.813
> 
> 标签：java, selenium-webdriver

在 Telerik 中，可以在已找到的元素中搜索元素。例如，我找到了一个 ul，它有一些元素 li。之后我可以直接从元素调用 find() 。

使用 WebDriver Java 有这样的可能性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:42:12.273

在 WebDriver 中，在页面上查找元素的常用方法是；

```
WebElement element = driver.findElement(By.xpath("xpath query here")); 
```

该`findElement`方法由接口提供[`SearchContext`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/SearchContext.html)，接口[`WebElement`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html)也扩展了。这意味着您可以调用`findElement`先前搜索找到的任何元素；

```
WebElement child = element.findElement(By.xpath("another xpath query")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:45:30.853

其实你可以用
`List<WebElement> = driver.findElements(By.cssSelector(".ul li"));`

您的列表包含 ul 中的所有 li 元素。

# android - Foursquare 共享后应用程序崩溃

> ID：14873477
> 
> 赞同：0
> 
> 时间：2013-02-14T11:11:49.950
> 
> 标签：android, foursquare

我有一个应用程序应该使用

```
Intent shareIntent = new Intent(Intent.ACTION_SEND);
shareIntent.setType("image/jpg");
shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(file) );
shareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Created in x");
shareIntent.putExtra(Intent.EXTRA_TEXT, "Created in x");
shareIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);

context.startActivity(Intent.createChooser(shareIntent, "Share via...")); 
```

适用于 gmail 和其他选项，但当我尝试通过 FOURSQUARE 共享它时会崩溃。

```
02-14 12:59:55.714: E/AndroidRuntime(3072): FATAL EXCEPTION: main
02-14 12:59:55.714: E/AndroidRuntime(3072): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.joelapenna.foursquared/com.joelapenna.foursquared.CheckinComposeActivity2}: java.lang.NullPointerException
02-14 12:59:55.714: E/AndroidRuntime(3072):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at android.os.Looper.loop(Looper.java:130)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at java.lang.reflect.Method.invoke(Method.java:507)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at dalvik.system.NativeStart.main(Native Method)
02-14 12:59:55.714: E/AndroidRuntime(3072): Caused by: java.lang.NullPointerException
02-14 12:59:55.714: E/AndroidRuntime(3072):     at com.joelapenna.foursquared.CheckinComposeActivity2.handleSharePhotoFromGallery(CheckinComposeActivity2.java:626)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at com.joelapenna.foursquared.CheckinComposeActivity2.onCreate(CheckinComposeActivity2.java:139)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-14 12:59:55.714: E/AndroidRuntime(3072):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-14 12:59:55.714: E/AndroidRuntime(3072):     ... 11 more
02-14 12:59:55.714: W/ActivityManager(110):   Force finishing activity com.joelapenna.foursquared/.CheckinComposeActivity2
02-14 12:59:55.718: W/ActivityManager(110):   Force finishing activity com.joelapenna.foursquared/.CheckinActivityAlt 
```

有什么想法可能是错的吗？

谢谢！

# linux - 在 PVM 中添加从站要求输入密码

> ID：14873479
> 
> 赞同：0
> 
> 时间：2013-02-14T11:11:56.910
> 
> 标签：linux, shell, parallel-processing, distributed-system, pvm

我试图在主机中添加从机。但是当它添加时，它会要求输入密码。我不明白。

**大师**= jhamb

**奴隶**= naveen, raja, gaurav

请解决以下错误。寻找您的善意回应。

**控制台快照：-**

![在此处输入图像描述](../Images/d8946af4330ae1da6d51460d5a9b1d79.png)

当我尝试添加任何主机时，它会显示这些行

```
0successful
       HOST             DTID
       ANY NAME         NO SUCH HOST 
```

**vim /etc/hosts 显示**：-

```
# Do not remove the following line, or various programs
# that require network functionality will fail.

#127.0.0.1  localhost.localdomain localhost

10.40.54.180 gaurav.my.domain                      #node 1 slave
10.40.54.92 naveen.my.domain                       #node 2 slave
10.40.55.31 raja.my.domain                         #node 3 slave
10.40.55.113 localhost.localdomain                 #node 4 master

#::1            localhost6.localdomain6 localhost6 
```

**已编辑**

我在这里写，关于我的工作，我到目前为止所做的事情

1.  下载 pvm3 tar 文件。
2.  设置所有变量以运行 PVM。
3.  导出 PVM_RSH=/ur/bin/ssh
4.  在主从之间建立无密码连接。
5.  在单机上运行简单的代码，它可以工作。
6.  当我尝试在主服务器上添加从服务器时，通过使用命令 `add naveen.my.domain` 它说相同，如上图所示。

我认为现在信息已经足够了。

**编辑编号 2**

当我跑步时`ssh -v naveen@10.40.54.92`，它说，

```
......
.....
debug1: Authentications that can continue: publickey, password
debug1: Next Authentication method: publickey
debug1: Trying private key: /root/.ssh/identity
debug1: Offering public key: /root/.ssh/id_rsa
debug1: Server accepts key:pkalg ssh-rsa blen 277
debug1: read PEM private key done: type RSA
debug1: Authentication succeeded (publickey).
debug1: channel 0:new [client-session]
debug1: Entering Interactive session.
debug1: Sending environment.
.......
..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:46:32.450

添加从属设备时，PVM 会尝试`pvmd`在该机器上启动。为此，它将尝试通过`ssh(1)`. 所以“user@host 密码：”这一行来自 ssh。

你可以自己试试：

```
> ssh naveen.my.domain 
```

这篇文章解释了你可以做些什么来允许 ssh 登录到不同的机器，而无需每次都给它一个密码*并且*不损害 SSH 的安全性：[使用 ssh-keygen 和 ssh-copy-id 执行 SSH 登录的 3 个步骤](http://www.thegeekstuff.com/2008/11/3-steps-to-perform-ssh-login-without-password-using-ssh-keygen-ssh-copy-id/)

**编辑**这是上图的重要部分：

```
Verifying Local Path to "rsh"
Rsh found in /usr/bin/ssh - O.K.
Testing Rsh/Rhosts Access to Host ... 
```

PVM 可以使用`rsh(1)`和`ssh(1)`远程登录。**不要每次都使用 rsh(1)。它不安全、脆弱且丑陋。**

输出表明 PVM 使用`ssh`. 您可以通过在 PVM 要求输入密码时查看进程列表来验证这一点：您应该看到一个以 PVM 作为父进程的 ssh 子进程。

因此，由于某种原因，您的无密码 SSH 设置已损坏。

**编辑 2**安全并不容易 :-) 您需要了解的是有一个软件可以为您记住密码。这就是“ssh 代理”。

当 SSH 要求您输入密码时，可能有很多原因：

1.  ssh 代理未运行
2.  您的密钥未加载到 ssh 代理中
3.  在 ssh 代理中加​​载了错误的密钥
4.  您使它工作并启动了一个新的终端/新进程，并且该新进程没有“看到” ssh 代理。

要检查这些：

1.  确保您在进程列表中看到**使用您的用户 ID**运行的 ssh 代理。
2.  确保已加载正确的密钥（如有疑问，请再次添加）
3.  确保它`ssh naveen`正常工作。
4.  在您尝试`pvm`过的同一控制台中尝试`ssh naveen`

# c# - System.Drawing.Printing：RPC 服务器不可用

> ID：14873481
> 
> 赞同：2
> 
> 时间：2013-02-14T11:12:11.617
> 
> 标签：c#, winapi, printing, controls, rpc

我正在运行一些非常基本的打印代码：（使用 .net 4.0、VS 2012、Windows 8）

```
var bitmap = new Bitmap(control.Width, control.Height);

control.DrawToBitmap(bitmap, new Rectangle(0, 0, control.Width, control.Height));

var pd = new PrintDocument();

pd.PrintPage += (s, e) => e.Graphics.DrawImage(bitmap, 100, 100);
pd.Print(); 
```

它抛出一个错误：

```
System.ComponentModel.Win32Exception was unhandled
HResult=-2147467259
Message=The RPC server is unavailable
  Source=System.Drawing
  ErrorCode=-2147467259
  NativeErrorCode=1722
  StackTrace:
   at System.Drawing.Printing.StandardPrintController.OnStartPrint(PrintDocument document, PrintEventArgs e)
   at System.Windows.Forms.PrintControllerWithStatusDialog.OnStartPrint(PrintDocument document, PrintEventArgs e)
   at System.Drawing.Printing.PrintController.Print(PrintDocument document)
   at System.Drawing.Printing.PrintDocument.Print()
   at FrogJump.Form1.PrintControl(Control control) in e:\Univ\S13\AI\FrogJump\FrogJump\Form1.cs:line 120
   at FrogJump.Form1.btnPrint_Click(Object sender, EventArgs e) in e:\Univ\S13\AI\FrogJump\FrogJump\Form1.cs:line 108
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at FrogJump.Program.Main() in e:\Univ\S13\AI\FrogJump\FrogJump\Program.cs:line 18
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()
InnerException: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:40:18.110

这确实是一个很长的镜头-但我认为您应该检查是否要打印到您认为要打印到的打印机.. ;)

（检查您是否打印到正确的打印机并且它已打开）

# ruby-on-rails - 为什么 url_for [:new, Project] 翻译成 new_projects_url （复数），而不是 new_project_url （单数）？

> ID：14873482
> 
> 赞同：1
> 
> 时间：2013-02-14T11:12:12.077
> 
> 标签：ruby-on-rails, rest, routes, url-for

```
$ url_for [Project]
=> projects_url
$ url_for [:new, Project]
=> new_projects_url
$ url_for [:new, Project, :test]
=> new_project_test_url
$ url_for [:new, Project, nil]
=> new_projects_url 
```

我觉得`url_for [:new, Project, :test]`特别有趣：这里`project`是奇异的！

任何人都知道如何`new_project_url`从像这样的数组生成（或路径）`[:new, Project]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:23:48.490

```
url_for([:new, :project]) 
```

会成功的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:16:50.943

使用时`[:new, Project]`，`:new`是一个命名空间。

# vb.net - VB.Net 中的 ScaleTransform

> ID：14873487
> 
> 赞同：0
> 
> 时间：2013-02-14T11:12:19.113
> 
> 标签：vb.net, silverlight, silverlight-5.0

所以，我在我的 Silverlight XAML 中有这个工作。我将如何将其转换为在 VB.Net 代码隐藏中完成？

```
<Grid.RenderTransform>
                <ScaleTransform x:Name="MyScale" ScaleX="0.75" ScaleY="0.75"/>
</Grid.RenderTransform> 
```

我正在转换的网格是我的 LayoutRoot。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:14:33.300

好的，我想通了：

```
 Dim ScaleDown As New ScaleTransform
    ScaleDown.ScaleX = "0.75"
    ScaleDown.ScaleY = "0.75"
    LayoutRoot.RenderTransform = ScaleDown 
```

# android - GoogleMaps v2 实时路线？

> ID：14873491
> 
> 赞同：2
> 
> 时间：2013-02-14T11:12:31.340
> 
> 标签：android, google-maps, google-maps-api-2, google-maps-android-api-2

现在正在研究如何最好地实时绘制路径。获取坐标并提前绘制等等..

网络中的材料是。但我无法理解以下内容。有很多继承Overlay的例子，然后实现draw()方法并绘制。但是这个我们会有一次性的，我需要不断的画。

收到一个起始位置，去完成该位置已更改为原来的位置等等。如何？

例子。

[在谷歌地图上绘制一条线/路径](https://stackoverflow.com/questions/2176397/drawing-a-line-path-on-google-maps) [如何解析点并在 Android 的谷歌地图上绘制一条路线？](https://stackoverflow.com/questions/5608601/android-google-maps-and-drawing-route)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T19:44:13.243

首先，从您的标签中，您指向的是 Google Maps API V2，而您发布的链接是针对 Google Maps API V1 的。也就是说，这意味着您没有可使用的**Overlay**对象，而且**GeoPoint**也不是您应该用来显示方向位置的对象。

在 Google maps API V2 中，您可以添加/删除**折线**以向您显示方向。这些折线将连接**纬度**点。

现在要查找路线，您可以使用 Google Direction API。这是一篇关于如何在 Google Map API V2 上查找路线并显示路线的帖子：

[在 GoogleMap SupportMapFragment 上绘制 2 个 GeoPoints 之间的行车路线](https://stackoverflow.com/questions/16125868/draw-driving-route-between-2-geopoints-on-googlemap-supportmapfragment/16126547?#16126547)

现在，您将如何实施您的位置更新和您想要的目的地更新，这取决于您：

**需要考虑的重要事项：** Google Maps API 服务条款并未正式允许使用 Google Maps API 进行行车路线：

```
Google Maps/Google Earth APIs Terms of Service

  Last updated: May 27, 2009

...

10\. License Restrictions. Except as expressly permitted under the Terms, or unless you  
have received prior written authorization from Google (or, as applicable, from the 
provider of particular Content), Google's licenses above are subject to your adherence 
to all of the restrictions below. Except as explicitly permitted in Section 7 or the 
Maps APIs Documentation, you must not (nor may you permit anyone else to):

...

10.9 use the Service or Content with any products, systems, or applications for or in      
connection with:

(a) real time navigation or route guidance, including but not limited to turn-by-turn   
route guidance that is synchronized to the position of a user's sensor-enabled device;

and may be disabled for certain apps (somehow, at least on Android)... FromGeocode 
scraping in .NET conversation:
This is not allowed by the API terms of use. You should not scrape Google Maps to 
generate geocodes. We will block services that do automated queries of our servers.

Bret Taylor

Product Manager, Google Maps 
```

# java - 使用 SimpleDateFormat 在 Java 中无法解析的时间

> ID：14873494
> 
> 赞同：2
> 
> 时间：2013-02-14T11:12:34.520
> 
> 标签：java, parsing, date, datetime, time

```
SimpleDateFormat formatter = new SimpleDateFormat("h:mm a");

edto.setDate(formatter.parse(startHrs.getText() + ":" + startMin.getText()); 
```

您好，我正在尝试将我的时间格式化为`12:08 PM`像 type 添加到 sqlite 中的东西`DATETIME`。在我的 DTO 类中，相应的时间字段是`Date`类型。

我收到上述错误，即此类字符串不可解析。为什么是这样。

请注意`startHrs`，`startMin`两个 JTextFields 组件分别采用 Hours (12) 和 Minutes (08) 的值。

如何成功解析日期？

错误：

```
java.text.ParseException: Unparseable date: "12:12"
    at java.text.DateFormat.parse(DateFormat.java:337) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:26:25.940

您需要添加上午或下午

```
edto.setDate(formatter.parse(startHrs + ":" + startMin + " AM")); 
```

这个对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:29:00.517

你的`dateformat`is`h:mm a`与 . 不匹配`12:12`。它将与`12:12 PM`.

尝试 -

```
edto.setDate(formatter.parse(startHrs.getText() + ":" + startMin.getText()+" PM"); 
```

我建议您在不需要预测的情况下使用 which`HH`代替代表一天中的小时 (0-23) 。`h``Am/pm marker`

```
SimpleDateFormat formatter = new SimpleDateFormat("HH:mm");
edto.setDate(formatter.parse(startHrs.getText() + ":" + startMin.getText()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:24:58.660

您需要使用“a”来设置 PM/AM - [http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

尝试解析：

```
12:12 AM 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:17:24.573

```
SimpleDateFormat formatter = new SimpleDateFormat("h:mm a");

edto.setDate(formatter.parse(startHrs.getText() + ":" + startMin.getText()); 
```

在上面的代码格式化字符串是小时：分钟：上午或下午，但我可以看到作为输入，您只提供小时和分钟，这会导致无法解析的日期。更正您的解析器格式字符串或以小时：分钟：上午或小时：分钟：下午格式提供输入。

# c++ - Visual Studio 2012 中的 Qt5.0.1 静态链接

> ID：14873496
> 
> 赞同：2
> 
> 时间：2013-02-14T11:12:43.950
> 
> 标签：c++, qt, visual-studio-2012, static-linking

我使用以下配置构建 Qt：

```
-platform win32-msvc2012 -no-icu -no-angle -opengl desktop -static -qt-sql-mysql -qt-plugins-mysql -nomake demos -nomake examples 
```

一切顺利。顺便提一句。我还在 qmake.conf 中将 win32-msvc2012 mkspecs /MD 更改为 /MT 以进行静态链接（根据一些说明）。现在我尝试使用静态链接在 Visual Studio 2012 中构建最简单的应用程序。所以我创建了一个简单的项目（这个基本的项目，来自 Qt Visual Add-in），它是：

```
#include "test.h"
#include <QtWidgets/QApplication>

int main(int argc, char *argv[])
{
 QApplication a(argc, argv);
 test w;
 w.show();
 return a.exec();
} 
```

（测试只是一个普通的窗口）并设置我记得的两件事，因为我在 Visual Studio 2010 上这样做：1）项目属性 -> C/C++ -> 代码生成 -> 运行时库我设置为 MT 2）项目属性-> 常规 -> 使用 MFC 我设置为在静态库中使用 MFC

当然，在 Qt 项目设置中，我设置了我的 Qt 静态版本。在这个配置中，我遇到了很多错误 - [http://pastebin.com/6ve3pFUh](http://pastebin.com/6ve3pFUh) [pastebin.com] 所有库（我认为所有）都是由 Qt 插件添加的（qtmain.lib Qt5Core.lib Qt5Gui.lib Qt5Widgets.lib)。如果我将使用 MFC 设置为默认值，即使用标准 Windows 库，那么我会得到这个：

```
1>     Creating library D:\Visual Studio 11\Projects\test\Win32\Release\test.lib and object D:\Visual Studio 11\Projects\test\Win32\Release\test.exp
1>Qt5Core.lib(qeventdispatcher_win.obj) : error LNK2019: unresolved external symbol _WSAAsyncSelect@16 referenced in function "private: void __thiscall QEventDispatcherWin32::createInternalHwnd(void)" (?createInternalHwnd@QEventDispatcherWin32@@AAEXXZ)
1>D:\Visual Studio 11\Projects\test\Win32\Release\\test.exe : fatal error LNK1120: 1 unresolved externals 
```

我完全不知道发生了什么。在 Visual Studio 2010 和 Qt 4.8 中，一切都以这种方式完美运行。我读了一些关于我应该添加的更多外部依赖项的内容，但我不确定。哦，顺便说一句——在 QtCreator 中，这个静态链接效果很好，但它看不到 MySQL 插件，这对我来说也是一个谜，我需要它到我的原始项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T08:16:00.940

我正在使用 Visual Studio 2013，但昨天我注意到完全相同的缺失链接。

**您需要向 Ws2_32.lib 添加依赖项。**

如果您的项目编译但由于神秘的“缺少 windows 平台插件”消息而崩溃，您需要将其添加到一个 cpp 中：

```
Q_IMPORT_PLUGIN(QWindowsIntegrationPlugin); 
```

这可能会添加新的依赖项。

仅供参考，这些是我用于默认 Qt 项目的依赖项（有些只需要 ANGLE）：

*   winmm.lib
*   ws2_32.lib
*   dxguid.lib
*   d3d9.lib
*   imm32.lib
*   qtmaind.lib
*   Qt5Cored.lib
*   Qt5Guid.lib
*   Qt5Widgetsd.lib
*   libEGLd.lib
*   库GL
*   ESv2d.lib
*   translate_commond.lib
*   预处理器.lib
*   翻译器_hlsld.lib
*   qwindowsd.lib
*   Qt5PlatformSupportd.lib
*   %（附加依赖）

# php - 使用键模式从 Laravel 4 缓存中删除？

> ID：14873506
> 
> 赞同：13
> 
> 时间：2013-02-14T11:13:27.647
> 
> 标签：php, caching, laravel, laravel-4

对于我的包，我们使用 Laravel 缓存，

我们创建的每个缓存键都有前缀，所以我们得到`mypackage-config`，`mypackage-md5ofafilename`有时我需要刷新我的包创建的所有缓存文件，问题是什么？我只知道缓存键的模式，我不知道整个键！

所以，我需要一条路`Cache::forget('mypackage-*')`或类似的路，这可能吗？

如果只是为了我的系统我知道我正在使用文件缓存，所以我可以手动取消链接文件，但是因为它是一个通用包我不知道最终用户使用的是什么缓存方法，我只知道接口（又名 Laravel 缓存接口）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-13T12:21:07.553

另一种解决方案：只要您**不**使用文件或数据库缓存，您就可以使用[Cache Tags](http://laravel.com/docs/5.3/cache#cache-tags)。

只需使用您的包名称标记每个缓存条目：

```
Cache::tags('myPackage')->put('config', $config, $minutes);
Cache::tags('myPackage')->put('md5ofafilename', $md5, $minutes); 
```

（您也可以使用`tags`带有`remember`、`forever`和的方法`rememberForever`）

当需要刷新包条目的缓存时，只需执行

```
Cache::tags('myPackage')->flush(); 
```

**注意：** 当您需要访问缓存条目时，您仍然需要引用标签。例如

```
$myConfig = Cache::tags('myPackage')->get('config'); 
```

这样，另一个`config`具有不同标签（例如`hisPackage`）的键的缓存条目不会与您的冲突。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-14T11:35:56.993

易于使用`Cache::getMemory()`

```
foreach (Cache::getMemory() as $cacheKey => $cacheValue)
{
    if (strpos($cacheKey, 'mypackage') !== false)
    {
        Cache::forget($cacheKey);
    }
} 
```

ps永远不要手动取消链接“缓存”文件。Laravel 缓存将所有缓存记录保存在一个数组中，因此即使您“取消链接”它，它也会期望该文件存在。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-11T13:40:45.497

这是与接受的答案相同的解决方案，但专门为 Redis 重写。

使用键

```
$redis = Cache::getRedis();
$keys = $redis->keys("*");

foreach ($keys as $key) {
  if (strpos($key, 'mypackage') !== false)
  {
    $redis->del($key);
  }
} 
```

使用 SCAN (Redis >= 2.8.0)

```
$redis = Cache::getRedis();
$cursor = 0;

while($data = $redis->scan($cursor))
{
  $cursor = $data[0];

  foreach($data[1] as $key)
  {
    if (strpos($key, 'mypackage') !== false)
      {
        $redis->del($key);
      }
    }
  }

  if ($cursor == 0) break;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-30T06:24:18.243

这是一个 Redis 特定示例，用于根据给定前缀清除所有键。这是基于 Kazik 的回答，进行了一些重组并增加了安全性。

注意 RedisStore 在命名空间下`Illuminate\Cache\RedisStore`

```
$cacheDriver = Cache::driver();
if ($cacheDriver instanceof(RedisStore)) {
    $cursor = 0;
    do {
        $data = $cacheDriver->scan($cursor);
        $cursor = $data[0];
        $cacheEntries = $data[1];

        foreach ($cacheEntries as $key) {
            // This clears based on prefix. Change according to your use case.
            if (starts_with($key, Cache::getPrefix())) {
                $redis->del($key);
            }
        }

    } while ($cursor != 0);
} 
```

# android - 当用户第二次触摸 web 视图时，防止 InputMethodService 将数字键盘更改为 Alpha

> ID：14873508
> 
> 赞同：2
> 
> 时间：2013-02-14T11:13:32.387
> 
> 标签：android, webview, focus, touch, android-input-method

当用户再次单击时，我遇到了 Android 键盘从数字类型更改为默认 Alpha 的问题。在阅读了几篇关于无法在 webview 上将键盘的默认类型从字母更改为数字的帖子后，我遵循了以下过程。我创建了一个隐藏的 EditText 控件并从该控件更改了键盘类型，它工作正常，现在我得到了数字 SIP，并且所有按键都正确分派到 webview。但问题是，如果用户再次触摸 web 视图，则 InputMethodService 将键盘类型从数字更改为 alpha，并且我没有收到此事件的任何回调。

```
V/InputMethodService( 1764): CALL: onStartInput 
```

我可以想到以下可能的解决方案，但似乎都没有。

1.有没有办法通过Webview上的InputMethodManager更改默认键盘类型？

2.如果已经显示了数字键盘，那么当用户再次触摸时，我们可以防止 InputMethodManager 更改为默认的字母键盘吗？

3.InputMethodService的onStartInput()方法有没有办法覆盖或接收回调？

```
InputMethodManager imm;
if (mWebEditText == null)
{
    mWebEditText = new WebEditText(Common.mainActivity.getApplicationContext(),view.getView());
}

mWebEditText.setInputType(InputType.TYPE_CLASS_NUMBER);
webEditTextPanel.addView(mWebEditText, lp);

mWebEditText.setVisibility(View.VISIBLE); 
mWebEditText.requestFocus();
imm.showSoftInput(mWebEditText, 0); 
```

WebEditText 类：

```
public class WebEditText extends EditText
{
//Pointer to the web view to dispatch the keys
View mWebView;

public WebEditText(Context context, View view)
{
    super(context);     
    mWebView = view;        
}   

/**
 * Override the dispatch key event to send the key events to the web view
 * from the invisible Edit Text control
 */
@Override
public boolean dispatchKeyEvent(KeyEvent event)
{       
    mWebView.dispatchKeyEvent(event);
    return super.dispatchKeyEvent(event);       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:05:17.373

您可以在此处执行的操作来自您在 web 视图中显示的 HTML 代码。将 EditText(textbox) 的输入类型更改为数字。

```
 <input type="number" placeholder="Text box lable" id="Text box id" required value="defautvalue" /> 
```

编辑 ：

```
EditText e = new EditText(getApplicationContext());
            e.setInputType(InputType.TYPE_CLASS_NUMBER);
            appView.addView(e); 
```

你能按照我的方式添加edittext吗？它适用于我的应用程序

# java - 将 ArrayList 值动态传递给其他 ArrayList

> ID：14873513
> 
> 赞同：1
> 
> 时间：2013-02-14T11:13:51.687
> 
> 标签：java, android, arraylist

我有四个长度相同的数组（比如array1，array2 ....array4），我想将这些数组的值动态传递给，`example array`以便我可以添加条件并相应地获取值。我怎么做？

```
 public SectionListItem[] exampleArray = { // Comment to prevent re-format
           new SectionListItem("array1 data","array2 data","array3 data", "array4 data")

    };

    private StandardArrayAdapter arrayAdapter;
    private SectionListAdapter sectionAdapter;
    private SectionListView listView;

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        arrayAdapter = new StandardArrayAdapter(this, R.id.example_text_view, exampleArray);
        sectionAdapter = new SectionListAdapter(getLayoutInflater(), arrayAdapter);

        listView = (SectionListView) findViewById(android.R.id.list);

        setListAdapter(sectionAdapter);
        listView.setAdapter(sectionAdapter);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:18:22.713

这是一个简单的例子：

```
public class array3 {
    public static void main(String[] args) {
        int ar3[]={33,45,67,87,34,56};
        int ar4[]={5,8,9,22,3,4};
        List list1=new ArrayList();
        List list2=new ArrayList();
         for (int i = 0; i < ar3.length; i++) {
            list1.add(ar3[i]);
        }
   for (int i = 0; i < ar4.length; i++) {
            list2.add(ar4[i]);
        }
        list1.addAll(list2);
        System.out.println(list);           
    }
} 
```

# javascript - 将 tr 和 td 包裹在 jQuery 中来自 ajax 调用的数据周围

> ID：14873516
> 
> 赞同：1
> 
> 时间：2013-02-14T11:14:03.043
> 
> 标签：javascript, jquery

我想知道如何添加一个新的 tr 和 td 包裹从 ajax 调用接收到的数据？以下不起作用。

```
$.get('/edit/'+course_id, function(data){ 

    ///add class to current tr
    $('#course_'+course_id).addClass( "info" );

    $('<tr><td>'+data+'</td></tr>').insertAfter('#course_'+course_id);

}); 
```

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:17:22.357

您可以将其添加到表格元素中。我认为在 IE 中，它需要附加 tbody。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
<script src="jquery.js"></script>
<script>
$(document).ready(function () {
    var data='some HTML';
    $('<tr><td>'+data+'</td></tr>').insertAfter('#course');
});
</script>
</head>

<body>
<table>
<tbody>
<tr id="course"><td></td></tr>
</tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:39:50.387

最简洁的方法可能是...

```
$.get('/edit/' + course_id, function() {
    // do whatever else you need to do
    var formatted = $('<tr/>').append($('<td/>', { html: data }));
    formatted.insertAfter('#course_' + course_id);
}); 
```

通过让 jQuery 为您做几乎所有事情，这使您免于将 html 标记作为字符串编写并且必须记住关闭它们等的混乱。

这是[jsFiddle 上的一个示例，](http://jsfiddle.net/dtGNw/)它显示了它的工作原理。希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:32:41.853

（真的）没有 HTML 标记很难回答，但这可能是一个绑定问题：

也许你可以试试

```
var successCourse = function(courseId) {
    return function(data) {
        ///add class to current tr
        $('#course_' + courseId).addClass("info");
        $('<tr><td>' + data + '</td></tr>').insertAfter('#course_' + courseId);
    };
};

$.get('/edit/'+course_id).done(successCourse(course_id)); 
```

# javascript - 使用 id 获取主干集合中的问题

> ID：14873524
> 
> 赞同：0
> 
> 时间：2013-02-14T11:14:30.743
> 
> 标签：javascript, jquery, backbone.js, underscore.js, handlebars.js

以下是我的 JSON：

```
[ 
{  
    "id" : "1",
    "type" : "report"
},
{  
    "id" : "2",
    "type" : "report"
},
{  
    "id" : "1",
    "type" : "email"
},
] 
```

考虑一下，json 是从骨干集合 -> 服务调用返回的。现在，当我使用 json 响应来使用主干视图和把手模板系统呈现我的 html 表时。显示 2 行，而不是应该有 3 行。

注意：集合解析响应返回正确的 json（即 3 行）。当我`id`用唯一随机生成的数字覆盖使用集合解析时，所有 3 行都会显示。这不行，因为我不想更改`id`.

我希望该行显示如下：

```
1 reports
2 reports
1 email 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:43:00.840

从[Collection add](http://backbonejs.org/#Collection-add)的文档中，

> 请注意，将相同的模型（具有相同 id 的模型）多次添加到集合中是无操作的。

虽然我看不出为什么两个不同的对象应该具有相同的 id 的原因，但您可能有一个正当的理由。一个建议是为 json 响应中的每个对象添加另一个属性，`_dummyId`并将其设置为来自服务器端的自动递增值。在客户端，在您的模型定义代码中，然后`idAttribute`将`_dummyId`.

JSON响应，

```
[ 
{  
    "id" : "1",
    "_dummyId": "1",
    "type" : "report"
},
{  
    "id" : "2",
    "_dummyId": "2",
    "type" : "report"
},
{  
    "id" : "1",
    "_dummyId": "3",
    "type" : "email"
},
] 
```

您的模型定义，[来自 http://backbonejs.org/#Model-idAttribute](http://backbonejs.org/#Model-idAttribute)，

```
var Meal = Backbone.Model.extend({
  idAttribute: "_dummyId"
}); 
```

也就是说，我确实希望骨干中有一个优雅的设置，使骨干集合充当列表而不是集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-18T08:39:52.433

如果要解决此问题，则必须为添加到集合中的每个模型设置新的唯一 ID。试试这个方法：

```
initialize: function() {
      this.set("id", this.generateID());
},
generateID = function () {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
    });
} 
```

如果需要原id，需要先保存，新建后，在另一个model属性中设置原id。当我将 @amith-george 解决方案设置`idAttribute`为另一个时，主干忽略我`dummyId`

# lua - 如何在lua中获得最大数值？

> ID：14873537
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:15:20.347
> 
> 标签：lua, coronasdk

我正在开发应用程序以查看您的运行速度，为此我需要一个显示您的最大速度的功能。但找不到我该怎么做。

```
local speedText = string.format( '%.3f', event.speed )
speed.y = 250
speed.x = 125
local numValue = tonumber(speedText)*3.6
if numValue ~= nil then
    speed.text = math.round( numValue )
end 
```

我已经`speedText`给了你在上面看到的一个号码。

我在 Conora SDK/Lua 中编程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:44:57.690

当您在 Stack Overflow 上提问时，您应该提供更多信息，但无论如何，让我们尽力帮助您。

您的代码可能位于如下所示的事件侦听器中：

```
local listener = function(event)
  local speedText = string.format( '%.3f', event.speed )
  speed.y = 250
  speed.x = 125
  local numValue = tonumber(speedText)*3.6
  if numValue ~= nil then
      speed.text = math.round( numValue )
  end
end 
```

这将显示当前速度。如果您想显示最大速度，只需执行以下操作：

```
local maxSpeed = 0
local listener = function(event)
  local speedText = string.format( '%.3f', event.speed )
  speed.y = 250
  speed.x = 125
  local numValue = tonumber(speedText)*3.6 or 0
  if numValue > maxSpeed then
      maxSpeed = numValue
      speed.text = math.round( numValue )
  end
end 
```

这个想法是：您需要在侦听器（或全局）*之外*定义一个变量来存储之前的最大速度。每次调用事件监听器，如果当前速度高于之前的最大速度，那么它就是新的最大速度，所以你保存它并显示它。

# git - Git pull 不会拉下最近的提交

> ID：14873539
> 
> 赞同：4
> 
> 时间：2013-02-14T11:15:28.527
> 
> 标签：git, bitbucket

我在 BitBucket 上有一个 Git 存储库。我有两个分支`master`和`db`. 在我的笔记本电脑上，我对 进行了更改，提交`db`了更改并推送到 BitBucket。我可以看到该分支中的提交。

现在我在我的桌面上工作，我`git pull`在分支大师上做了一段时间。它拉下了 master 的提交，但没有拉下 db，我想这可能是它应该工作的方式。我想在 db 上获得最新的提交，所以我切换到该分支，`git pull`但是我收到以下消息：

> 你让我拉而不告诉我你想与哪个分支合并......

我不太确定为什么会这样。我在这台机器上创建了那个分支，所以它不应该只是将提交拉到那个分支吗？

**从 git 分支输出 -vva**

```
$ git branch -vva
  analytics             cea39b9 updated analytics code
* db                    6091b29 minor change to the tag creation code
  master                0a4070c [origin/master] Merge branch 'master' of https:/
/bitbucket.org/billyjones/findr.fm
  remotes/origin/db     faf9970 Got tracks working. Now trying to cache prices.
  remotes/origin/master 0a4070c Merge branch 'master' of https://bitbucket.org/b
illyjones/findr.fm 
```

这是我需要拉的 faf9970 提交

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:19:08.600

如果您的桌面还没有本地`db`分支，您首先必须创建它：

```
git branch db origin/db 
```

在此之前可能需要执行 a `git fetch -a`。

如果本地`db`分支已经存在，请确保它跟踪相应的远程分支。

您可以通过`git remote show origin`. 在“为'git pull'配置的本地分支：”标题下，它应该显示“db merges with remote db”。如果您使用的是 git 1.8，请执行以下命令：

```
git branch -u origin/db db 
```

如果您使用的是旧版本的 git，请使用以下命令：

```
git branch --set-upstream db origin/db 
```

# java - Spring 并将 Bean Init 延迟到设置属性之后

> ID：14873540
> 
> 赞同：2
> 
> 时间：2013-02-14T11:15:29.977
> 
> 标签：java, spring

我有一些代码，其中属性仅在运行时知道。

在这种情况下，用户可以输入 URL 以及用户名和密码。

```
ConnectionFactory cf = (ConnectionFactory) this.factory.getBean(
            "topicConnectionFactory", <URL which is entered at runtime>)
final UserCredentialsConnectionFactoryAdapter connectionFactory = this.factory
            .getBean(UserCredentialsConnectionFactoryAdapter.class);

    connectionFactory.setTargetConnectionFactory(cf); 
```

UserCredentialsConnectionFactoryAdapter没有构造函数基础设置，因此唯一的方法是使用无参数构造函数创建并在之后设置属性，但是 spring 运行 InitializingBean 会引发未设置 TargetConnectionFactory 的错误*。*

有没有办法在弹簧创建期间传递此信息或弹簧延迟 Bean 的初始化。

为了理解范围，下面是 spring 的配置部分。

```
<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate"
    scope="prototype" />

<bean id="userCredentialsConnectionFactory"     class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter"
    scope="prototype" >
</bean>

<bean id="cachingFactory"
    class="org.springframework.jms.connection.CachingConnectionFactory"
    scope="prototype" />

<bean id="tibcoTopicConnectionFactory" class="com.tibco.tibjms.TibjmsTopicConnectionFactory"
    scope="prototype" /> 
```

如前所述，url、用户名和密码直到运行时才知道并且可以更改。该应用程序是多线程的。想法是连接到某个地方，发送消息，断开连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:27:10.583

您可以执行以下操作：

编写自己的`UserCredentialsConnectionFactoryAdapter`将`ConnectionFactory`用作构造函数参数的扩展：

```
public class CustomUserCredentialsConnectionFactoryAdapter extends UserCredentialsConnectionFactoryAdapter {

    public CustomUserCredentialsConnectionFactoryAdapter(ConnectionFactory target){
        super();
        setTargetConnectionFactory(target);
    }

} 
```

然后像这样使用它：

```
ConnectionFactory cf = (ConnectionFactory) this.factory.getBean(
        "topicConnectionFactory", <URL which is entered at runtime>)
final UserCredentialsConnectionFactoryAdapter connectionFactory = this.factory
        .getBean("userCredentialsConnectionFactory", cf); 
```

不要忘记更改您的 bean 声明：

```
 <bean id="userCredentialsConnectionFactory"
       class="com.company.CustomUserCredentialsConnectionFactoryAdapter"
scope="prototype" >
    </bean> 
```

# c - 将 scanf 与正则表达式一起使用

> ID：14873542
> 
> 赞同：8
> 
> 时间：2013-02-14T11:15:30.443
> 
> 标签：c, unix, scanf, expression, formatted-input

我一直在尝试在 scanf 上使用正则表达式，以读取最多 n 个字符的字符串并丢弃任何其他内容，直到换行符为止。任何空格都应被视为常规字符，因此包含在要读取的字符串中。我研究了一篇关于正则表达式的维基百科文章，但我无法让 scanf 正常工作。这是我尝试过的一些代码：

```
scanf("[ ]*%ns[ ]*[\n]", string); 
```

[ ] 应该用于实际的空格字符，* 应该表示一个或多个，n 是要读取的字符数，string 是分配有 malloc 的指针。我尝试了几种不同的组合；但是我倾向于只阅读句子的第一个单词（停在空格字符处）。此外， * 似乎丢弃了一个字符而不是表示“零个或多个”......

有人可以详细解释scanf如何解释正则表达式吗？更重要的是，重复使用 getc 是否有效？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T20:38:13.270

简短的回答：`scanf`不从字面上处理正则表达式。

如果你想在 C 中使用正则表达式，你可以使用正则表达式 POSIX 库。有关此库用法的基本示例，请参阅以下问题：[C 中的正则表达式：示例？](https://stackoverflow.com/questions/1085083/regular-expressions-in-c-examples)

现在，如果你想这样做，`scanf`你可以尝试类似

```
scanf("%*[ ]%ns%*[ ]\n",str); 
```

`n`将in替换为`%ns`从输入流中读取的最大字符数。该`%*[ ]`部分要求忽略任何空格。您可以将 替换`*`为特定数字以忽略精确数量的字符。您可以在大括号之间添加其他字符以忽略空格以外的其他字符。

不确定上述 scanf 是否会起作用，因为空格也与`%s`指令匹配。
我肯定会`fgets`打电话，然后用以下内容修剪周围的空格：[如何以标准方式修剪前导/尾随空格？](https://stackoverflow.com/questions/122616/how-do-i-trim-leading-trailing-whitespace-in-a-standard-way)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T20:41:00.310

> 重复使用 getc 是否有效？

在某种程度上取决于应用程序，但是**YES**，重复`getc()`是有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-01T15:57:47.260

除非我读错了问题，否则 %[^'\n']s 将保存所有内容，直到遇到回车。

# java - 字符串变量不起作用 - 但硬编码确实......（JAVA）

> ID：14873543
> 
> 赞同：2
> 
> 时间：2013-02-14T11:15:30.477
> 
> 标签：java, string, hardcoded

我在Java中有以下问题：

**这可以正常工作：**

`xyz.setUserValue("ABC", "file_xyz.abc");`

**但这不会：**

```
String test = "file_" + VariableXYZ.toLowerCase() + ".abc";
System.out.println(test);
xyz.setUserValue("ABC", test); 
```

--> println(test) 的输出 ==>`file_xyz.abc`
奇怪的是它以前工作过，但从一个时刻到另一个时刻它都没有。爪哇错误？- 有任何想法吗？

先谢谢了！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:21:50.723

不，这不是 Java 错误。

无法说出究竟*是*什么导致了这种情况，但它不可能是 Java 错误。

如果您更好地解释上下文并向我们展示该`setUserValue`方法的代码，我们可能会提出合理的理论。（[SSCCE](http://sscce.org/)是理想的，但我强烈怀疑您将无法编写一个可靠地证明问题的代码......）

* * *

好的，鉴于此：

```
public static String setUserValue(String key, String value) { 
    String oldValue = getUserProperties().getProperty(key);
    getUserProperties().setProperty(key, value); 
    return oldValue;
} 
```

...然后假设“属性”对象是 的实例`Properties`，最可能的解释是：

*   有些东西导致`getUserProperties()`在第一次和第二次调用中返回不同的对象，
*   其他东西是在第一次和第二次调用之间修改 Properties 对象，
*   Properties 对象以与您期望的不同的“ABC”值开始，或者
*   其他东西正在将属性更改回其原始值；例如，通过从源文件重新加载属性。

或者也许有一个你没有告诉我们的例外......或者已经被压扁了。或者，也许您以错误的方式比较字符串（使用`==`），这让您/您的程序感到困惑。

或者，也许你在构建和/或部署东西的方式上遇到了问题。

# javascript - 无法在 Android 应用程序中访问大于 10mb 的文件

> ID：14873544
> 
> 赞同：2
> 
> 时间：2013-02-14T11:15:32.090
> 
> 标签：javascript, android, html

我有一个`index.html`文件和其他支持`css` `javascript`文件。

`css`and`javascript`文件为**8mb** ，而html 文件接近**15mb**，因为它是 flash book（一种电子书），因此包含大量数据。

我将所有数据保存在 html 文件中，现在我必须从我的 android 应用程序中访问它。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:22:02.073

试试php？

据我所知，文件大小不能在 html 中设置，它可以在 php.ini 中设置。

看这个

[http://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/](http://www.cyberciti.biz/faq/linux-unix-apache-increase-php-upload-limit/)

# android - 如何在查询字符串中发布具有 HTML 内容的数据

> ID：14873549
> 
> 赞同：1
> 
> 时间：2013-02-14T11:15:45.650
> 
> 标签：android, http-get

我需要将我的字符串发布到具有 html 内容的服务器，

这是我的代码

网址生成器

```
Uri.Builder builder = new Uri.Builder()
    .scheme("http")
    .authority(domain)
    .path(pageName)
    .appendQueryParameter("myaction", "dopost")
    .appendQueryParameter("mesg", msg.replace("\n","<br />")); 
```

生成的网址看起来像

```
domainname/pagename?myaction=dopost&mesg=Hello%2C%3Cbr%20%2F%3E%3Cbr%20%2F%3ETesting 
```

执行http代码

```
HttpGet getRequest = new HttpGet(url);
getRequest.setHeader(CONTENT_TYPE, MIME_TEXT_HTML); // html/text, utf-8
DefaultHttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(getRequest); 
```

但这不会在执行后发布得到禁止的错误

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:38:51.213

也许是一个愚蠢的错误，但帖子通常用 an`HttpPost`而不是 an完成`HttpGet` ，看起来像这样：

```
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);    
} 
```

# php - 使用其扩展名删除所有文件

> ID：14873550
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:15:46.300
> 
> 标签：php, file

嗨，我创建了一种使用其扩展名删除所有文件的方法。

这是代码

```
function RemoveAllFiles($extensions)
{
   foreach($extensions as $extension)
   {
       $files = glob("*.".$extension."");

      foreach($files as $file)
      {
         unlink($file);
      }

    }
 } 
```

我这样打电话

```
$commonObj =  new CommonUtility();
$extesions = array("zip","xlsx");
$commonObj->RemoveAllFiles($extesions); 
```

如果两个文件都存在，它工作正常，否则我收到此错误

```
 Warning: Invalid argument supplied for foreach() in CommonUtilities.class.php on line 356 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:19:35.307

[`glob`](http://php.net/manual/en/function.glob.php)可以返回`false`错误；此值不是有效的主题，`foreach`并且会导致您提到的警告。

此外，当它不匹配任何文件时，即使一切正常，`glob`也可能返回：`false`

> 笔记：
> 
> 在某些系统上，无法区分空匹配和错误。

为了保护自己，只需`foreach`使用过滤掉`false`值的条件来保护，例如：

```
 $files = glob("*.".$extension."");
 if (!$files) {
     continue; // do nothing if error or no files match
 }

 foreach($files as $file)
 {
     unlink($file);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:07:43.917

虽然它得到了类似的回答：

```
function removeAllFiles(array $extensions) {
    foreach(array_filter($extensions) as $extension) {
        $files = glob("*.{$extension}");
        if (is_array($files) {
            foreach($files as $file) {
                unlink($file);
            }
        }
    }
} 
```

参数上的类型提示将第一个与同一问题`array`隔离开来。`foreach`同样，`is_array($files)`第二个绝缘。`count($files)`没有必要，因为`foreach`给定一个空数组，将跳过第二个块。

`array_filter($extensions)`将删除“虚假”值，包括`false`、`null`和`""`，这些值可能需要防止`"*."`被传递给`glob`. 不过，您可能想省略这一点，~~因为我不记得是否`"0"`会被过滤~~（*快速测试显示`"0"`将被过滤，以及`"false"`等*），这将过滤掉 " `*.0`" 作为掩码 - 一个完全有效的扩展。

```
removeAllFiles(["foo"]);                // no problem

removeAllFiles(["foo", "bar"]);         // also no problem

removeAllFiles("foo");                  // problem! has to be an array

removeAllFiles([false, null, ""]);      // no problem, but no action; filtered

removeAllFiles([false, null, "foo"]);   // no problem, only "foo" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:22:12.857

试试下面的代码

```
function RemoveAllFiles($extensions)
{
    foreach($extensions as $extension)
    {
        $files = glob("*.".$extension."");

        usort($files, function($a, $b) { return filemtime($a) - filemtime($b); });

        array_pop($files);

        array_map('unlink', $files);

    }
}

$commonObj =  new CommonUtility();

$extesions = array("zip","xlsx");

$commonObj->RemoveAllFiles($extesions); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:25:49.973

```
if(is_array($files)){
      foreach($files as $file)
      {
         unlink($file);
      }
} 
```

它检查是否`$files`是数组，否则不执行 foreach

# ios - 添加手势识别器

> ID：14873552
> 
> 赞同：0
> 
> 时间：2013-02-14T11:15:54.507
> 
> 标签：ios, uiview, uiviewcontroller, delegates

我有两个 viewController ： FirstViewController 和 SecondViewController

我制作了一个动画，使视图从右到左。

我想当一个扫到右边的 SecondViewController 隐藏并显示 FirstViewController

动画作品有代码

```
SecondViewController *secondViewController = [[SecondViewController alloc]      initWithNibName:@"PlayListController" bundle:nil];
// Set up view2
secondViewController.view.frame = self.view.frame;
secondViewController.view.center = CGPointMake(self.view.center.x +   CGRectGetWidth(self.view.frame), self.view.center.y);
[self.view.superview addSubview:secondViewController.view];
// Animate the push
[UIView beginAnimations: nil context: NULL];
[UIView setAnimationDelegate: self];
[UIView setAnimationDidStopSelector: @selector(pushAnimationDidStop:finished:context:)];
secondViewController.view.center = self.view.center;
self.view.center = CGPointMake(self.view.center.x - CGRectGetWidth(self.view.frame), self.view.center.y);
[UIView commitAnimations]; 
```

我添加了一个按钮来隐藏带有动画的视图，但它不起作用？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:27:49.103

1.  将手势识别器添加到您的视图中。
2.  在回调中，弹出视图控制器。

警告：这是非标准 UI。最好使用标准导航栏和后退按钮。

# html - 当前页面上的按钮图像

> ID：14873556
> 
> 赞同：0
> 
> 时间：2013-02-14T11:16:04.560
> 
> 标签：html, css, image, button

我的导航栏上目前有图像链接，以及当您将鼠标悬停在链接上时的其他图像。我想知道设置它的最佳方法，以便用户所在的当前页面显示第三张图像。

例如，用户在 index.html 上，这将是导航栏上的 Home，所以我希望 Home 是与 About、Contact 等不同的图像。这是我当前的 HTML 和 CSS。

```
<ul id="navbar">
    <li id="bf"><a class="button" href="index.html">Home</a></li>
    <li id="bf"><a class="button" href="about.html">About Us</a></li>
    <li id="bf"><a class="button" href="contact.html">Contact</a></li>
    <li id="bf"><a class="button" href="images.html">Images</a></li>
</ul> 
```

```
#navbar {
    left:50%;
    margin-left:325px;
    top:50%;
    margin-top:-100px;
}

#bf {
    display:inline;
}

a.button {
    display: -moz-inline-stack;
    display: inline-block;
    width: 147px;
    height: 49px;
    background: url("/images/btn.png") no-repeat;
    line-height: 43px;
    vertical-align: text-middle;
    text-align: center;
    color: #180a6b;
    font-family: Verdana;
    font-size: 25px;
    font-weight: normal;
    font-style: normal;
    text-shadow: #FFFFFF 1px 1px 0;
    text-decoration: none;
}

a.button:hover {
    background: url("/images/hovbtn.png") no-repeat;
    color: #8d8fc2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:16:58.217

只需将一个活动类添加到列表项/链接，然后对其进行样式设置。你可以像这样使用它：

```
<ul id="navbar">
<li id="bf"><a class="button active" href="index.html">Home</a></li>
<li id="bf"><a class="button" href="about.html">About Us</a></li>
<li id="bf"><a class="button" href="contact.html">Contact</a></li>
<li id="bf"><a class="button" href="images.html">Images</a></li>
</ul> 
```

然后设计它

```
#navbar li a:hover{
    background:red;
}
#navbar li a.active {
    background:yellow;
} 
```

# php - 下载文件一次 - 文件损坏错误

> ID：14873558
> 
> 赞同：0
> 
> 时间：2013-02-14T11:16:07.373
> 
> 标签：php, html, database, download

我想要做的是只允许每个用户一次下载（一次访问href）为此我在用户表中有一个变量，当点击链接时我会更改它。我使用“download.php?file=file.xxx”来做到这一点。

**下载.php**

```
$file= basename($_GET['file']);
$root = "documents/rece/";
$path= $root.$file;
echo $path;

if (is_file($path))
{
   header('Content-Description: File Transfer');
   header('Content-Type: application/octet-stream');
   header('Content-Disposition: attachment; filename='.$file);
   header('Content-Transfer-Encoding: binary');
   header('Expires: 0');
   header('Cache-Control: must-revalidate');
   header('Pragma: public');
   header('Content-Length: ' . filesize($path));
   readfile($path);
}
else
      echo "File error";
   exit();

?> 
```

我还更新了 DDBB 并且有效。之后我可以显示或隐藏链接。问题是下载的文件已损坏，无法打开。我会将它与 pdf 或 doc 一起使用，也许是 zip。

会不会是路径的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:50:45.953

据我所知，PDF 文件以这样的开头：

```
%PDF-1.4 
```

你的以 4 个空行加上`documents/rece/Form.pdf%PDF-1.4`. 您显然是在发布代码之前自己在某个地方打印它。

# jsf-2 - 会话范围的 bean 多个构造函数调用

> ID：14873559
> 
> 赞同：1
> 
> 时间：2013-02-14T11:16:10.033
> 
> 标签：jsf-2, constructor, session-bean

我有一个会话范围的 bean（我检查了导入，它们对于 ManagedBean 是正确的）。有一个主页，通过调用会话 bean 的 get 方法之一来检查用户是否已通过身份验证。在第一次查看时，我看到会话 Bean 构造正确。如果我尝试登录，我会看到调用了正确的方法并且登录成功。但是，当用户被重定向回主页时，会话 bean 的构造函数会再次被调用。有任何想法吗？

# php - 在 magento 电子邮件模板中测试部分退款

> ID：14873561
> 
> 赞同：0
> 
> 时间：2013-02-14T11:16:19.047
> 
> 标签：php, magento, templates

我正在处理我的退款电子邮件模板，使用基于付款方式模板测试的 CMS 块包含，例如`{{if order.getPayment().getMethodInstance().getCode() == "payment_method"}}`. 现在问题是，我还需要检查贷项通知单是针对完整订单还是仅是部分订单，以便我可以根据文本是否应该显示“全额退款”或“部分退款”来包含不同的 CMS 块。知道如何在电子邮件模板中检查部分退款和全额退款吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:26:27.287

原来模板逻辑不够先进，无法满足我的需要。我设法从模板中包含一个块，其中包含逻辑并根据结果加载子模板。要检查全额退款还是部分退款，我检查了`$order->canCreditmemo()`. 如果无法添加另一个贷项通知单，这将返回 false，对于已经全额退款的订单，您显然不能这样做。

# highstock - HighStock 范围选择器中的自定义 YTD 选项

> ID：14873562
> 
> 赞同：2
> 
> 时间：2013-02-14T11:16:19.353
> 
> 标签：highstock

使用[Highstock](http://www.highcharts.com/stock/demo/markers-only)图表库，有什么方法可以使用 Highstock 范围选择器来显示自定义 YTD 选项？

当前，当您在范围选择器中使用“ytd”类型时，它默认使用日历年。对于我的用例（我也会想到金融机构），我需要显示从 4 月 1 日到 3 月 31 日运行的数据作为“年初至今”选项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:34:49.783

如果没有黑客来源，这可能是不可能的，请在 Highstock 中找到：

```
else if (type === 'ytd') {
        now = new Date(dataMax);
        year = now.getFullYear();
        newMin = rangeMin = mathMax(dataMin || 0, Date.UTC(year, 0, 1));
        now = now.getTime();
        newMax = mathMin(dataMax || now, now);
    } 
```

如您所见，日期是硬编码的。您可以将它们更改为需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:09:45.650

这就是我的做法。无法处理查看以前的财务 YTD（这是我需要它的常见用例），但我确信我可以破解一些东西来做到这一点。

JSFiddle[在这里](http://jsfiddle.net/8ceQ4/1/)

```
$(function() {   
var startDate  = new Date("April 01, 2012 00:00:00");
var today = new Date();

var count =  parseInt((today.getTime() - startDate)/(24*3600*1000)) -1;

$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },
        rangeSelector : {
            selected: 1,
            buttonTheme: {
                width:100
            },
            buttons: [{                                                 
                    type: 'ytd',
                    count: 1,
                    text: 'Calendar YTD'
                },
                   {
                    type: 'day',
                    count: count,
                    text: 'Financial YTD'
                }]
        },
        title : {
            text : 'AAPL Stock Price'
        },
        series : [{
            name : 'AAPL',
            data : data,
            tooltip: {
                valueDecimals: 2
            }
        }]            
    } );
});   
}); 
```

# android - 使用 phonegap 在 iPhone 上强制纵向

> ID：14873568
> 
> 赞同：4
> 
> 时间：2013-02-14T11:16:42.043
> 
> 标签：android, iphone, ios, cordova

我想要我的应用程序的纵向，我尝试过：

AndroidManifest.xml：

```
<activity ... android:screenOrientation="portrait" ... android:configChanges="orientation| ..." /> 
```

和 config.xml：

```
<preference name="orientation" value="portrait" /> 
```

这在我的安卓手机上完美运行，但在 iPhone 4 上却不行。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T11:59:19.817

在 Xcode 中打开**'ProjectName'-info.plist文件。**

在“支持的界面方向”数组中，仅支持纵向模式。

像这样-

![在此处输入图像描述](../Images/a8b9434307583945644341513fe8023b.png)

那么您的 phonegap 应用程序将仅在 iPhone 上的 Portait 模式下运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T21:01:24.703

对于 iphone，您必须使用 xcode 进行开发。只需创建一个新的phonegap项目并在您的项目上的xcode clic上，进入摘要并选择您想要支持的方向 ![xcode中的肖像](../Images/9e1bc13712cc1b209078ff437c47316b.png)

而你所要做的一切

希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T19:51:23.030

我发现最新的 phonegap 中的第一行对我有用。

```
android:screenOrientation="portrait" 
```

当然，这无助于解决您的 iPhone 问题，但这确实意味着您的下一个 Android 应用程序会小几个字节……</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:02:01.463

嗯，如果你只想使用**javascript 和 PhoneGap**来做到这一点，[这个](https://stackoverflow.com/questions/5284878/how-do-i-correctly-detect-orientation-change-using-javascript-and-phonegap-in-io)链接会很有帮助。如果您使用的是 Xcode，那么您可以转到支持的设备方向并选择所需的方向，然后使用`shouldautorotatetointerfaceorientation`方法设置所需的方向。您可能还想研究一下[这个](https://github.com/acti0nm4n/Phonegap-Orientation-iOS)。

# postgresql - 如何在 PostreSQL8.4 中获取字段并在 group by 中添加？

> ID：14873572
> 
> 赞同：1
> 
> 时间：2013-02-14T11:16:51.007
> 
> 标签：postgresql, join, aggregate-functions, greatest-n-per-group, postgresql-8.4

我正在选择 group by 和 count 中使用的列，查询看起来像

```
SELECT s.country, count(*) AS posts_ct
FROM   store          s
JOIN   store_post_map sp ON sp.store_id = s.id
GROUP  BY 1; 
```

但是，我想从存储表中选择更多字段，例如商店名称或商店地址，其中 count 为最大，但我不将其包含在 group by 子句中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:27:35.853

例如，要获得每个国家/地区发布次数最多的商店：

```
SELECT DISTINCT ON (s.country)
       s.country, s.store_id, s.name, sp.post_ct
FROM   store          s
JOIN  (
    SELECT store_id, count(*) AS post_ct
    FROM   store_post_map
    GROUP  BY store_id
    ) sp ON sp.store_id = s.id
ORDER  BY s.country, sp.post_ct DESC 
```

将任意数量的列添加`store`到`SELECT`列表中。

此相关答案中有关此查询样式的详细信息：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

### 回复评论

这会产生每个国家/地区的计数并选择具有最高后计数的商店（之一）：

```
SELECT DISTINCT ON (s.country)
       s.country, s.store_id, s.name
      ,sum(post_ct) OVER (PARTITION BY s.country) AS post_ct_for_country
FROM   store          s
JOIN  (
    SELECT store_id, count(*) AS post_ct
    FROM   store_post_map
    GROUP  BY store_id
    ) sp ON sp.store_id = s.id
ORDER  BY s.country, sp.post_ct DESC; 
```

这是有效的，因为在每个定义`sum()`之前应用了窗口函数。`DISTINCT ON`

# r - 在 x 轴上绘制带有因子变量的折线图

> ID：14873574
> 
> 赞同：3
> 
> 时间：2013-02-14T11:17:05.090
> 
> 标签：r, plot, ggplot2

我未能使用以下代码使用月份的首字母在 x 轴上绘制折线图：

```
yrange<-range(c(Estimate, lcl,ucl))
plot(nmonth, Estimate, type = "b", pch = 20, ylim = yrange, 
xlab = "Months",  ylab = expression(hat(beta) * " estimates" * " & " * "   confidence "  * " levels "))
lines(nmonth, ucl, lty = 2)
lines(nmonth, lcl, lty = 2)
abline(h = 0, lty = 3) 
```

还有这个。

```
ggplot(data=df1, aes(x=nmonth, y=Estimate)) + geom_line() + geom_point() + geom_line(size=0.1) + geom_line(aes(y = ucl)) + geom_line(aes(y = lcl)) 
```

使用数字月份（nmonth）我可以制作一个图，但标签不是我想要的。如何在 x 轴上绘制月份的所有首字母？

数据是这样的：

```
structure(list(Estimate = c(0.00571942142644563, 0.0111649330056159, 
0.0143761435860972, 0.00739757934210567, 0.00110764672100624, 
0.00168566337236168, 0.00392476757483504, 0.00234423892025447, 
0.000166724737089459, -0.0014580012873366, -0.00197786373686253, 
-0.00216289530501664), se = c(0.004018593736177, 0.0040534199847734, 
0.0041113846550833, 0.00402501059422328, 0.00393358629717884, 
0.00370406599461686, 0.003796651550619, 0.00392460643968604, 
0.00376380927915926, 0.00391408378704714, 0.00388845564349082, 
0.00394365265230613), nmonth = 1:12, month = structure(c(1L, 
2L, 3L, 4L, 3L, 1L, 1L, 4L, 5L, 6L, 7L, 8L), .Label = c("J", 
"F", "M", "A", "S", "O", "N", "D"), class = "factor"), lcl = c(-0.00215702229646129, 
0.00322022983546004, 0.00631782966213393, -0.000491441422571959, 
-0.00660218242146429, -0.00557430597708737, -0.0035166694643782, 
-0.00534798970153017, -0.00721034145006269, -0.00912960550994899, 
-0.00959923679810454, -0.00989245450353666), ucl = c(0.0135958651493525, 
0.0191096361757718, 0.0224344575100605, 0.0152866001067833, 0.00881747586347677, 
0.00894563272181073, 0.0113662046140483, 0.0100364675420391, 
0.00754379092424161, 0.00621360293527579, 0.00564350932437948, 
0.00556666389350337)), .Names = c("Estimate", "se", "nmonth", 
"month", "lcl", "ucl"), class = "data.frame", row.names = c(NA, 
-12L)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:28:49.563

使用 ggplot2，如果您首先以这种方式融合数据会更容易：

```
df <- melt(df, id.vars=c("month","nmonth")) 
```

然后你可以直接做：

```
ggplot(data=df, aes(x=month, y=value, group=variable)) + geom_line(aes(color=variable)) 
```

![在此处输入图像描述](../Images/392adca00711fc05f08bcc97bd3ebb49.png)

请注意，该图不正确，因为您只使用了月份名称的第一个字母。

# c# - 不允许从数据类型 datetime 到 int 的隐式转换错误。使用 CONVERT 函数运行此查询

> ID：14873575
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:17:07.160
> 
> 标签：c#, sql, sql-server, vb.net, sql-server-2005

我有带有 DOCDate 字段的库存表，它的数据类型为日期时间，当我运行查询时，它显示错误

> '不允许从数据类型 datetime 到 int 的隐式转换。使用 CONVERT 函数运行此查询。

我的查询是

```
insert into SSPERPStock (LinkID, DocNo, DocDate, VoucherType, ProductID, Weight, AL, InEdit, CreatedU‌​serId) 
values (IDENT_CURRENT('SSPERPDailyInkConsumptionTransaction'),'DOC1001','2013-02-‌​14','ICPacked',8,5,'L',0,GETDATE()) 
```

有什么办法可以解决这个迷茫？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:23:43.843

您正在尝试将日期 ( `GETDATE()`) 添加到您的列`CreatedU‌​serId`

```
insert into SSPERPStock (... , CreatedU‌​serId) 
values (... , GETDATE()) 
```

这可能是你一开始想做的`int`，而不是你想做的。

# iphone - resignFirstResponder 没有按预期工作

> ID：14873576
> 
> 赞同：0
> 
> 时间：2013-02-14T11:17:09.180
> 
> 标签：iphone, ios, uitableview, uitextfield

我有 uitextfield 在 uitableview 中输入国家/地区值。当点击该字段时，我正在显示加载了国家/地区值的表格视图。

当点击任何单元格时，它会返回到相同的表单并在国家字段中添加选定的值。我的意思是我将选定的值分配给 viewwillappear 方法内的文本字段。在国家字段内设置文本后。我想辞职键盘，所以我添加了resignFirstResponder，但它不是辞职键盘。

下面是我的代码：

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField;
    {
      if( textField == self.myCountryField ){

        aCountryListView = 
            [[LCCountryListViewController alloc]init]; 

        UINavigationController *navigationController = 
            [[UINavigationController alloc] 
             initWithRootViewController:aCountryListView];

        [self presentModalViewController:navigationController animated:YES];

      }
    }
-(void)viewWillAppear:(BOOL)animated{
//-----------------------------------

  self.myCountryField.text = aCountryListView.mySelectedCountry;

  [self.myCountryField resignFirstResponder];

  [[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(keyboardWillShow:) 
    name:UIKeyboardWillShowNotification object:nil];

  [[NSNotificationCenter defaultCenter] addObserver:self 
  selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];

}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
(NSIndexPath *)indexPath 
//-------------------------------------------------------------------------------
{  
  static NSString *CellIdentifier = @"PoetNameCell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  if (cell == nil) 
  {
      cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

   cell.backgroundColor = [UIColor clearColor];

    if( indexPath.row == 0 ){

      UILabel *aLblTitle = [[UILabel alloc]initWithFrame:CGRectMake(5, 5, 220, 30)];
      aLblTitle.backgroundColor = [UIColor clearColor];
      aLblTitle.font = [UIFont fontWithName:@"Palatino-Bold" size:16.0];
      aLblTitle.text = NSLocalizedString(@"Country","Country");
      aLblTitle.textColor = [UIColor whiteColor];
      [cell.contentView addSubview:aLblTitle];

      myCountryField = [[UITextField alloc]initWithFrame:CGRectMake(133,5,150,30)];
      myCountryField.backgroundColor = [UIColor whiteColor];
      myCountryField.delegate = self;
      myCountryField.borderStyle = UITextBorderStyleRoundedRect;

      [cell.contentView addSubview:myCountryField];
    }
  return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:31:43.003

使用下面的代码，希望对您有所帮助。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField 
 {

  [self.view endEditing:YES];

  return YES;
} 
```

确保您将代理连接到`fileowner`in `xib-file`。或`viewDidload`使用以下代码。

```
yourtextfield.delegate=self; 
```

并在您的 .h 文件中使用`<UITextfielddelegate>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:52:30.570

如何改用这个：

```
[[UIApplication sharedApplication] sendAction:@selector(resignFirstResponder)
                                           to:nil
                                         from:nil
                                     forEvent:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:34:32.830

希望以下代码在添加 UITextField 委托时能够正常工作

```
 - (BOOL)textFieldShouldReturn:(UITextField *)textField 
 {

  [self.myCountryField resignFirstResponder];

  return YES;
} 
```

# c++ - 来自 unique_ptr 到 unique_ptr

> ID：14873577
> 
> 赞同：6
> 
> 时间：2013-02-14T11:17:13.697
> 
> 标签：c++, c++11, constants, unique-ptr

`unique_ptr<char[]>`将 a 移动到 a的最佳成语是`unique_ptr<const char[]>`什么？

用例：假设您在某个缓冲区中创建了一个 C 字符串。为了确保在发生异常时进行适当的清理，该缓冲区可以是使用`unique_ptr`. 构造字符串后，您可能希望将其移动到某个类成员，该成员被声明`unique_ptr<const char[]>`为避免进一步修改字符串。

这是我迄今为止最好的：

```
std::unique_ptr<const char[]> res;
std::unique_ptr<char[]> buf(new char[4]);
buf[0] = 'f';
buf[1] = buf[2] = 'o';
buf[3] = '\0';
res = std::unique_ptr<const char[]>(const_cast<const char*>(buf.release())); 
```

简单地移动似乎不起作用，可能是由于删除器类型不同。正如` unique_ptr < T const [] >` 应该`char`接受[`T*` 构造函数参数吗？](https://stackoverflow.com/q/8531246/1468366)`const char`

有没有更好的成语来实现我上面概述的内容？我的代码看起来很笨拙，而且考虑到这个概念一开始听起来多么简单，我的代码相当冗长。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T11:43:53.523

VS2010 和 VS2012 的 stdlib 允许将转换`res = std::move(buf)`作为扩展并作为对[DR2118](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3516.html#2118)的响应。libc++ 和 GCC 4.8 的 libstdc++ 也是如此。

对于 GCC 4.7，你不会绕过`const_cast`，但至少你可以稍微缩短这条线：

```
res.reset(const_cast<char const*>(buf.release())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-02T16:15:45.470

Boost的[Smart Ptr](https://www.boost.org/doc/libs/1_72_0/libs/smart_ptr/doc/html/smart_ptr.html)库具有通用的指针转换函数，可以使用该库中的智能指针以及 STL 中的智能指针。特别是，[`const_pointer_cast`](https://www.boost.org/doc/libs/1_72_0/libs/smart_ptr/doc/html/smart_ptr.html#pointer_cast_const_pointer_cast)可以做你需要的：

```
#include <boost/pointer_cast.hpp>

// ...
res = boost::const_pointer_cast<const char[]>(std::move(buf)); 
```

# javascript - 用于测试电子邮件的 javascript 正则表达式

> ID：14873579
> 
> 赞同：0
> 
> 时间：2013-02-14T11:17:23.143
> 
> 标签：javascript, regex

我正在尝试检查电子邮件地址，例如 abc@example.co.uk 或 a.bc@eyample.com 等

我正在使用正则表达式

```
[a-zA-Z0-9\._]+@[^.]+[a.zA-Z]+\.[a-z{2,5}]+ 
```

有人可以建议如何纠正它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:20:31.560

请参阅[使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

你可以试试：

```
[a-zA-Z0-9.!#$%&'*+-/=?\^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:27:46.043

这应该工作

例子

```
var sEmail = txtEmail;

var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

if (filter.test(sEmail)) {
    return true;
}
else {
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T11:04:48.797

我想用字符串中的“/”替换撇号“'”。

例如： var str =“文本”；想要这样的输出“te/xt”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:29:20.487

如果您在新浏览器中创建输入类型的电子邮件，它将验证到某个级别。它只会查找后跟 @ 的字符，而不是后面的几个字符。

验证是为了捕捉用户错误，而不是让用户更难填写您的表单。

# css - CSS HTML 在 td 中放置严重居中的 div

> ID：14873581
> 
> 赞同：0
> 
> 时间：2013-02-14T11:17:31.090
> 
> 标签：css, html

起初，当我说居中时，我的意思是垂直居中和水平居中。

我有一个带有多个图块（div）的表格，例如在 Windows 8 中带有 background.images 的表格。每个图块都有一个带有描述和半透明背景的居中标签（也是一个 div）。

现在我想在磁贴本身和标签之间添加另一个 div。这些 div 应该有一个半透明的背景颜色作为底层 tile-image-div 的覆盖。

但是当我添加这个覆盖 div 时，我的标签不再水平居中，它被放置在图块的顶部。我怎样才能让它居中？

这是我在小提琴上的代码： [fiddle](http://jsfiddle.net/wqYnc/) *（请看一下）*

*（小提琴代码中的问题是这一行：*

```
<div class="SemiTransOverlay">
```

*当我删除这个 div 时，一切都正确居中。我必须改变什么才能保持一切居中并保持 div？）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:26:18.137

首先，为什么您使用表格进行布局？我们是在 21 世纪，所以开始使用 div 和为了完成半透明的 div 放置在你需要使用的标签和垂直对齐的标签后面`position: absolute;`，`top: -50%;`我也修改`line-height`了`div.SemiTransLabelGross`和也使用了`position: relative`和`z-index`属性

[**演示**](http://jsfiddle.net/wqYnc/8/)

CSS

```
table.Kacheln
{
    border-spacing: 5px;
    border-collapse:separate;
    border:0px;
}

.wrap {
    position: relative;
    height: 100%;
}

td.KachelFlavourGross01
{
    text-align:center;
    /*background:url(../img/Div/bg.jpg) no-repeat 0 0;*/
    background-color:#FF0000;
    width:404px;
    height:200px;

}

div.SemiTransOverlay
{   
    height:100%;
    width:100%;
    background-color:rgba(255, 255, 255, 0.5);
    position: absolute;
    z-index: 1;
}

div.SemiTransLabelGross
{
    font-size:2em;
    font-family:Verdana;
    font-style:italic;
    line-height:60px;
    background-color: rgba(255, 255, 255, 0.75);
    width:404px;
    height:60px;
    z-index: 2;
    position: absolute;
    top: 50%;
    margin-top: -30px; /* Half of height */
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T11:22:59.010

垂直对齐，我所做的是，设置`padding`而不是`height`.

例如：

```
div.SemiTransLabelGross
{
    font-size:2em;
    font-family:Verdana;
    font-style:italic;
    line-height:120%;
    background-color: rgba(255, 255, 255, 0.75);
    width:404px;
    padding: 20px 0; /* removed the height property */
} 
```

很抱歉造成误解，从上面的答案中，我认为您希望浅粉色 div 本身垂直居中。在这种情况下，添加`padding`到其父级。

```
div.SemiTransOverlay
{   
    width:100%;
    background-color:rgba(255, 255, 255, 0.5);
    padding: 20% 0;
} 
```

或者，您可以添加边距

div.SemiTransLabelGross { margin-top: 20%; }

# wcf - TCP 的 WCF 错误

> ID：14873584
> 
> 赞同：2
> 
> 时间：2013-02-14T11:17:34.460
> 
> 标签：wcf, tcp, communication, runtime-error

我有一个网站，它连接到在负载均衡器和防火墙后面的两个应用程序服务器上部署在 IIS 中的 WCF 服务。当我使用 HTTP 端点时，网站能够成功连接到 WCF 服务。但是在切换到 TCP 协议时，我看到以下错误。

预计会有更多数据，但已达到 EOF。

[InvalidDataException：预计会有更多数据，但已达到 EOF。]

[ProtocolException：在流的位置 0 读取消息帧格式时出错（状态：ReadingUpgradeRecord）]

[ProtocolException：net.tcp:///SecurityService.svc 处的服务器拒绝了会话建立请求。]

网站应用程序池在本地用户帐户下运行，而 WCF 服务在默认 ApplicationPoolIdentity 下运行。服务端没有生成跟踪日志。跟踪日志在客户端生成相同的错误。

WCF 服务托管在应用程序服务器中的默认端口 808 下，但它不被任何其他应用程序/服务共享。环境：Win2k8，IIS 7.5

我已经验证了从 Web 服务器到应用程序服务器的 TCP 连接，这很好。

如果我需要任何其他信息，请告诉我。非常感谢任何指导，因为我在这方面花了很多时间。

配置文件的片段如下：

**WCF 服务**

```
<bindings>
      <netTcpBinding>
        <binding name="NetTcpBinding_Configuration" closeTimeout="00:10:00"
          openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
          transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
          hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="524288"
          maxBufferSize="2147483647" maxConnections="100" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
            enabled="false" />
          <security mode="None"/>
        </binding>
      </netTcpBinding>
    </bindings>
<services>
      <service name="<namespace>.ServiceImplementation.Security">
        <endpoint address="net.tcp://<servername>/SecurityService.svc"
          binding="netTcpBinding" bindingConfiguration="NetTcpBinding_Configuration"
          contract="<namespace>.ServiceInterface.ServiceContracts.ISecurity" name="NetTcpBinding_Security">
          <identity>
            <servicePrincipalName value="host/<servername>" />
          </identity>
        </endpoint>
      </service>
    </services> 
```

**网站客户端**

```
<bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_Configuration" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
      <netTcpBinding>
        <binding name="NetTcpBinding_Configuration" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="524288" maxBufferSize="2147483647" maxConnections="10" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
          <security mode="None" />
        </binding>
      </netTcpBinding>
    </bindings>
<client>
      <endpoint address="http://<servername>/SecurityService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Configuration" contract="SecurityService.Security" name="BasicHttpBinding_Security" />
      <endpoint address="net.tcp://<servername>/SecurityService.svc" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_Configuration" contract="SecurityService.Security" name="NetTcpBinding_Security">
        <identity>
          <servicePrincipalName value="host/<servername>" />
        </identity>
      </endpoint>
    </client> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:09:34.910

如果我是你，我会[Wireshark](http://www.wireshark.org/)从客户端到服务器的流量。您只是想确保您的流量不会在沿途某处被阻塞。如果您可以确认不是这种情况，那么它一定是 WCF 服务配置问题。

在尝试调试 WCF 配置之前，请尝试从图片中删除负载均衡器（如果可以的话），然后直接点击 WCF 服务。大多数负载均衡器会默认支持 HTTP；但需要对任何其他协议进行特殊配置。

# c# - 列表 没有通过 OrderBy 正确订购

> ID：14873585
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:17:38.547
> 
> 标签：c#, sorting

我的模型有这样的结构：

```
public class resultadoDialogModel
{
    public int tipo        { get; set; }
    public int idDocIndice { get; set; }
    public int docIds      { get; set; }
} 
```

我有`List<resultadoDialogModel> newModel`这些价值观：

```
143 77 45 
142 75 44  
145 75 44
146 75 44
147 75 44
142 75 45 
```

中间一栏是指`public int idDocIndice`

现在，当我按升序对项目进行排序时，这并没有正确排序

`var newModelOrdered = newModel.OrderBy(o => o.idDocIndice);`

```
142 75 44  
145 75 44
146 75 44
147 75 44
143 77 45 
142 75 45 
```

最后 2 项不正常。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:27:25.863

似乎发生了错误，就像您按 docIds 订购的一样，或者您的填充数据不正确

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T12:22:34.850

问题是用于订购的属性是错误的。

这是正确的方法：

```
var newModelOrdered = newModel.OrderBy(o => o.tipo); 
```

OrderBy 在错误的属性上正常工作

# regex - 邮件地址的正则表达式

> ID：14873591
> 
> 赞同：0
> 
> 时间：2013-02-14T11:17:55.847
> 
> 标签：regex

```
"Max Mustermann" <max.mustermann@domain.com>
max.mustermann@domain.com
Max <max.mustermann@domain.com> 
```

我需要一个正则表达式，它匹配箭头括号（包括括号）之外的所有内容。之后应删除匹配项。

更换后应该是这样的：

```
"Max Mustermann" <max.mustermann@domain.com> => max.mustermann@domain.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:24:01.700

最简单的解决方案是搜索

```
[^<]*<([^>]*)>.* 
```

并将其替换为`\1`or `$1`，具体取决于您的正则表达式引擎。

这将删除第一个之前的`<`所有内容，以及从下一个`>`到字符串末尾的所有内容。

我们只希望引用的名称中没有括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:44:36.623

这应该可行，但要注意它非常[简化](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)：

```
(?:[^<]*<)?([^>]+).* 
```

电子邮件的答复将在`$1`。

例如，在 Perl 中使用：

```
$email =~ s/(?:[^<]*<)?([^>]+).*/$1/; 
```

请参阅[RegexPlanet 在线演示](http://fiddle.re/ub81)。

# ios - 消除 Objective C 中委托的重复代码

> ID：14873595
> 
> 赞同：2
> 
> 时间：2013-02-14T11:18:04.087
> 
> 标签：ios, objective-c, oop, protocols, delegation

项目中的 35 个头文件之一（由其他开发人员移交给我；所有这些文件都包含相同的委托声明）

```
@interface ActivityDetailsCN : UIViewController <NSXMLParserDelegate,     
AccountStatusDelegate, AccountTypeDelegate, DirectionDelegate, RecipientDelegate,
PriorityDelegate, DurationDelegate, CurrencyDelegate, OppTypeDelegate,
OppCategoryDelegate, DatePickerDelegate, SalutationDelegate, DepartmentDelegate, 
LeadTypeDelegate, OwnershipDelegate, MailingDelegate, SourceDelegate, 
StateDelegate, CommentsDelegate, CityDelegate, ZipCodeDelegate> 
{
    //Declaration of iVars goes here...
} 
```

此处声明的所有委托都包含相同的功能。甚至他们的定义也是如此。这些委托中的每一个都在各自的`ViewController`头文件之前声明如下：

```
@protocol AccountStatusDelegate <NSObject>
  - (void)cancelTapped;
  - (void)doneTapped;
  - (void)selectTapped:(NSString *)string;
@end

@interface AccountStatusVC : UIViewController <NSXMLParserDelegate> {
}
@property (unsafe_unretained) id <AccountStatusDelegate> delegate; 
```

cancelTapped 的实现：

```
- (void)cancelTapped {
    [objPopOver dismissPopoverAnimated:YES];
} 
```

cancelTapped 的实现：

```
- (void)doneTapped {
    [tblView reloadData];
    [objPopOver dismissPopoverAnimated:YES];
} 
```

cancelTapped 的实现：

```
- (void)selectTapped:(NSString *)string
{
    if ([string isEqualToString:@"US"])
        isTextField = FALSE;
    else if([string isEqualToString:@"Other"]) {
        appDelegate.strCountry = @"";
        isTextField = TRUE;
    }
    [tblView reloadData];
    [objPopOver dismissPopoverAnimated:YES];
} 
```

现在，提出问题：我不想在每一堂课中都重复它（就像现在一样）；我想以更清洁的方式制作，有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:21:20.113

在一个通用超类中实现委托方法，并将所有协议重构为一个通用 TapCallbackDelegate 协议

# objective-c - 以编程方式进入编辑模式 TextField

> ID：14873596
> 
> 赞同：0
> 
> 时间：2013-02-14T11:18:12.893
> 
> 标签：objective-c, uitableview, uitextfield, edit

我在 uitableviewcell 中有一个可编辑的文本字段，并希望用户能够编辑文本字段的内容。这在用户单击小文本字段时有效，但我想在单击 tableviewcell 时进入该编辑模式。

因此，在 tableview didselect 行委托中，我需要以编程方式为该文本字段输入编辑模式，但我找不到任何方法来执行此操作。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:37:07.533

```
[textField becomeFirstResponder]; 
```

以下是有关如何使用此方法的示例：

```
 - (void)tableView:(UITableView *)tblView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
    {
          UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
          [cell.textField becomeFirstResponder];
    } 
```

# sqlite - SQLite Boolean WHERE 检查 0 和 NULL 值

> ID：14873598
> 
> 赞同：1
> 
> 时间：2013-02-14T11:18:19.010
> 
> 标签：sqlite, casting, boolean

我正在寻找一个 SQLite WHERE 子句，如果它们是，它将给我记录：

```
0 (false)
NULL (false)
1 (true) 
```

所以除了 0 和 1 我也有 NULL 的记录。

我现在做一个

```
SELECT * FROM my_table WHERE (MyBoolean IS NULL OR MyBoolean = 0) AND SomeOtherValue NOT NULL; 
```

使用时

```
SELECT * FROM my_table WHERE NOT MyBoolean AND SomeOtherValue NOT NULL; 
```

没有找到 value=NULL 的记录，只有 value=0 的记录 :o(

我必须将我的列转换为布尔值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:25:31.647

铸造在这里无济于事（`CAST (null AS sometype)`仍然为NULL）。您可以使用的任何内容都或多或少等同于您现在使用的表达方式：我发现`WHERE NOT COALESCE(MyBoolean,0)`更具可读性，但这是个人喜好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-06T08:50:40.153

处理 NULL 布尔值确实很棘手。

我对您的代码架构一无所知，但请尝试考虑以下几点：

做你的`MyBoolean` `NOT NULL DEFAULT TRUE`（或`FALSE`，取决于）。

它可能需要少量的代码重构，但它会保持所有代码`SELECT`的清洁、可读性，并且会让你避免使用 hacky 方法。

我再重复一遍：如果您的架构非常不灵活并且您无法进行此类重构，则此解决方案可能不起作用。

希望这对任何人都有帮助。

# c++ - 虚拟内存地址空间不足（Borland C++ Builder 6 程序）

> ID：14873599
> 
> 赞同：3
> 
> 时间：2013-02-14T11:18:19.093
> 
> 标签：c++, windows, memory, memory-management, c++builder-6

我对在 C++ Builder 6 下编写的一些应用程序有问题。运行一段时间（周、月）后，应用程序崩溃并关闭，没有任何错误消息。在崩溃前不久的应用程序日志中，我收到了许多“内存不足”异常。当它抛出内存异常（下面的屏幕截图）时，我查看了该进程，它有很多未提交的私有内存空间。这种行为的原因是什么？

几年前，我曾经遇到过这样的问题。原因是链接器选项中未选中“使用动态库”选项。当我检查回来时，问题消失了，反之亦然。我制作的测试应用程序只是调用“new char [1000000]”然后删除。每次都释放内存（Windows 任务管理器中没有提交的内存增加），但一段时间后我的内存不足，VMMap 显示完全相同的内容。大量保留的私有内存，但大部分未提交。

现在问题又回来了，但我不能以同样的方式解决它。我不知道这是否是原因，但我将 Builder 6 和 2010 安装在同一台机器上。现在我只有 Builder 6，似乎我无法像以前一样使用测试应用程序重现错误。以太方式似乎存在一些内存管理器错误或其他东西。CodeGuard 不显示任何内存泄漏。当我用“新”创建内存块时，它会立即显示在“内存提交大小”中，当删除时内存使用量减少，所以我假设内存泄漏不是这种情况，任务管理器没有显示太多“内存提交大小” .

有什么我可以做的吗？有什么办法可以释放未提交的内存？如何进一步诊断问题？

截图：http: [//i.stack.imgur.com/UKuTZ.jpg](http://i.stack.imgur.com/UKuTZ.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:54:10.330

我找到了一种模拟这个问题和解决方案的方法。

```
for(int i=0; i<100; i++)
{
    char * b = new char[100000000];
    new char;
    delete b;
} 
```

Borland 内存管理器保留一块内存，其大小是一页的倍数，即 4kB。当分配的内存大小不是 4kB 的倍数时，borland 可能会使用一些空闲空间来分配其他一些内存块。当第一个块被释放时，第二个块仍然保留空内存块。

乍一看，代码应该只是造成 100B 的内存泄漏，但实际上它会在不到 16 次迭代后导致内存分配异常。

对于这个问题，我找到**了两种解决方案。**一个是 FastMM，它可以工作，但也带来了一些麻烦。第二种解决方案是将 borlndmm.dll 与 Embarcadero Rad Studio 2010 中的交换。我还没有彻底测试它，但它似乎没有任何问题。

我应该将洞项目移至 RAD 2010，但由于某些原因，我被困在 Borland 6 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T10:05:18.090

**序幕**

嗯，有趣的行为......我必须添加一些我通过艰难的方式学到的东西。在尝试了几次**BCB6**后，我立即放弃了它，因为它有**太多不**符合我口味的错误（与**BCB5**相比，尤其是与`AnsiString`s 处理相比）。所以我在**BCB5**呆了很长时间，没有任何问题。我什至将它用于**CAD/CAM**等非常大的项目。

几年过去了，我不得不搬到**BDS2006**，因为我的雇主和问题开始了（**有些可能和你的类似**）。除了次要的 IDE 和跟踪/断点/代码保护错误之外，还有更重要的事情，例如：

1.  **内存管理器**

    *   `delete/delete[]`如果为同一个指针调用两次**而不抛出任何异常**来通知，则会破坏内存管理器...
    *   **编译器错误的错误默认构造函数/析构函数**是`struct`我遇到的最大问题（结合`delete`）
    *   类中错误或缺失的成员函数会导致多次`delete`调用！！！由于编译器或 C++ 引擎中的错误。

    但我很幸运并在这里解决了它：[bds 2006 C hidden memory manager conflict (class new / delete[] vs. AnsiString)](https://stackoverflow.com/q/17698102/2521214)

2.  **编译错误**

    有时应用程序编译错误，不会引发错误，但 exe 中缺少某些代码行和/或与源代码中的顺序不同。我偶尔也在**BCB 5,6**中看到了这一点。为了解决这个问题：

    1.  删除所有临时文件，如`~,obj,tds,map,exe,...`
    2.  关闭 IDE 并再次打开它以确保（有时查看局部变量（主要是大数组）会损坏 IDE 内存）
    3.  再次编译
3.  **当心断点/跟踪/代码保护的行为与原始应用程序不同**

    尤其是多线程应用程序在被跟踪和不被跟踪时表现不同。**代码保护**也有很大的不同（我并不是说执行速度变慢会破坏敏感的时间）。例如**，codeguard**有一个讨厌的习惯，有时会无缘无故地抛出内存异常，因此必须一遍又一遍地检查代码的某些部分直到它通过，即使内存使用仍然相同并且**远未**超出内存。

4.  **`AnsiString`运营商**

    `AnsiString`VCL 中的普通属性和组件属性有两种类型。所以考虑到这一点是明智的，因为对于组件属性`AnsiString`，操作符的操作是不同的。尝试例如

    ```
    Edit1->Text+="xxx"; 
    ```

    还有这样的`AnsiString`操作员错误：

    ```
    AnsiString version="aaa"+AnsiString("aaa")+"aaa";       // codeguard: array access violation 
    ```

5.  **导入较旧的 BCB 项目**

    如果可能，请避免直接导入，这通常会产生一些未知的分配和 memleaks 错误。我不知道为什么，但我怀疑导入的窗口类的处理方式不同，并且 memleaks 与 bullet **#1**有关。更好的方法是创建新应用并手动创建/复制组件和代码。我知道这是后记，但避免问题的唯一安全方法仍然不知道问题出在哪里，但简单的 *.bdsproj 替换将无济于事！在 *.dfm 中我没有看到任何可疑的东西。

# authorization - Cassandra 动态用户权限管理

> ID：14873600
> 
> 赞同：0
> 
> 时间：2013-02-14T11:18:19.930
> 
> 标签：authorization, cassandra

我的问题是 Cassandra 是否能够开箱即用地启用下面描述的场景。

场景：

1.  数据所有者 - 想要与其他用户共享 Cassandra 中的一些数据的“超级用户”。
2.  最终用户 - 请求访问某些数据子集的普通用户
3.  云提供商 - 代表数据所有者托管 Cassandra 数据存储。

我知道可以定义一些使用配置文件访问数据的限制（[请参阅参考资料](http://www.datastax.com/docs/1.2/configuration/authentication)）。我的问题是，是否可以通过远程联系 Cassandra 集群来动态地允许数据所有者更新这些访问权限（例如，将用户添加/删除到访问列表中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T10:47:24.857

As of Cassandra v1.2.2 (i think) user management is much improved.

A cloud provider could host multiple Cassandra clusters and grant super user access to data owners. Super users have access to all keyspaces on the cluster.

The data owners in turn could create keyspaces and grant access to an entire keyspace to end users. [http://www.datastax.com/docs/1.2/security/native_authentication](http://www.datastax.com/docs/1.2/security/native_authentication)

This can all be done with CQL, the configuration files for user access are no longer needed.

# model - 模型网格在 XNA 中的位置

> ID：14873609
> 
> 赞同：0
> 
> 时间：2013-02-14T11:18:47.567
> 
> 标签：model, matrix, xna, position

您如何在 XNA 中找到模型内部网格的矢量 3 位置（在全局坐标中）？

我在搅拌机中制作了一个**简单的灯柱模型。**灯光应该在哪里，我将一个**顶点**作为它自己的对象，并将其命名为“Light”，在**典型**的灯在灯柱中的位置。

在我的 XNA 程序中，我想在模型的位置放置一个浮点光。我可以按名称找到网格。但需要“Light”网格的**Vector3 位置**来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:07:29.953

这取决于如何根据网格/骨骼层次设置模型。最终，您将光（灯泡）矩阵与其父级相乘，父级首先乘以其父级，以此类推一直到根，然后获取结果的平移属性。有一个内置方法可以做到这一点，称为 Model.CopyAbsoluteBoneTransformsTo(Matrix[])

```
Matrix[] transforms = new Matrix[SimpleLampPostModel.Bones.Count];
SimpleLampPostModel.CopyAbsoluteBoneTransformsTo(transforms);

Vector3 lightPosition = transforms[SimpleLampPostModel.Meshes["light"].parentBone.Index].Translation;
lightPosition += modelWorld.Translation;// if the model is located in some arbitrary location in your 3d
                                        // world as represented by a world matrix (modelWorld) 
```

# objective-c - 如何在iphone中一一添加数组内的图像路径

> ID：14873611
> 
> 赞同：0
> 
> 时间：2013-02-14T11:18:59.643
> 
> 标签：objective-c, nsmutablearray, nsarray

我是 iPhone 编程的新手。如何将一个添加`NSString`到`NSArray`. 我有缩略图。如果我单击任何一张图像，我想将图像路径存储在`NSArray`. 如果我单击要从中删除图像路径的同一图像，则相同`NSArray`。（比如选择和取消选择）谁能告诉我我该怎么做，这样做的逻辑是什么？到现在我一直在做

```
- (void)click
{

   NSLog(@"%@",_fullsizeUrl);
   array =[[NSMutableArray alloc]init];
   [array addObject:_fullsizeUrl];         
   NSLog(@"%@",array);

} 
```

在上面的代码`_fullsizeUrl`中是图像路径，我将它存储在一个`NSMutableArray`. 问题是如果选择任何一个图像意味着 Ii 获得存储在`NSArray`. 但是，如果我选择任何其他图像，它会存储最新的图像，之前的图像将被删除。任何人都可以告诉我如何做到这一点谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:24:12.703

您的“前一个正在删除”，因为您`NSMutableArray`每次点击缩略图时都会重新分配您的。在 click 方法之外分配数组。

```
-(void)click
{
    if ([yourAry containsObject:yourObject])
    {
        [yourAry removeObject:yourObject];
    }
    else{
        [yourAry addObject:yourObject];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:36:55.413

```
array =[[NSMutableArray alloc]init];
[array addObject:_fullsizeUrl]; 
```

每次`click`调用时，您都在创建一个新数组。在方法结束时，数组没有强引用（假设为 ARC，否则您正在泄漏内存）并被释放。

在您的班级上创建您`NSMutableArray`的财产，然后`click`应如下所示：

```
- (void)click
{
    if ([self.myArray containsObject:self.fullSizeUrl]) {
        [self.myArray removeObject:self.fullSizeUrl];
    } else {
        [self.myArray addObject:self.fullSizeUrl];
    }
} 
```

如果您只在数组中存储唯一字符串，则可以考虑使用`NSMutableSet`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T11:27:23.217

您可以使用此方法并使用一个 int 变量 i 并每次增加 +1。

```
- (void)insertObject:(id)anObject atIndex:(NSUInteger)index; 
```

# c# - 错误：在while循环后关闭阅读器时尝试调用读取无效？

> ID：14873618
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:19:21.077
> 
> 标签：c#, sql, sqldatareader

您好，我有一种方法可以从 sql 中读取一些数据并将它们保存到数组中。

为了找出 sql 结果有多少行，我写了这个：

```
DataTable dt = new DataTable();
            dt.Load(rdr);
            count = dt.Rows.Count; 
```

之后，sqldatareader 将结果保存到数组中。

这是我的完整代码：

```
 public BookingUpdate[] getBookingUpdates(string token)
{
    String command = "SELECT b.ID,b.VERANSTALTER, rr.VON ,rr.BIS, b.THEMA, b.STORNO, ra.BEZEICHNUNG from BUCHUNG b JOIN RESERVIERUNGRAUM rr on rr.BUCHUNG_ID = b.ID JOIN RAUM ra on ra.ID = rr.RAUM_ID WHERE b.UPDATE_DATE BETWEEN DATEADD (DAY , -20 , getdate()) AND getdate() AND b.BOOKVERNR = 0";
    SqlConnection connection = new SqlConnection(GetConnectionString());
    BookingUpdate[] bookingupdate = new BookingUpdate[1];
    connection.Open();
    try
    {
        SqlCommand cmd = new SqlCommand(command, connection);
        SqlDataReader rdr = null;
        int count = 0;
        int c = 0;

        rdr = cmd.ExecuteReader();
        DataTable dt = new DataTable();
        dt.Load(rdr);
        count = dt.Rows.Count;
        bookingupdate = new BookingUpdate[count];

        while (rdr.Read())   // <--- HERE COMES THE ERROR
        {
                bookingupdate[c] = new BookingUpdate();
                bookingupdate[c].bookingID = Convert.ToInt32(rdr["ID"]);
                bookingupdate[c].fullUserName = rdr["VERANSTALTER"].ToString();
                bookingupdate[c].newStart = (DateTime)rdr["VON"];
                bookingupdate[c].newEnd = (DateTime)rdr["BIS"];
                bookingupdate[c].newSubject = rdr["THEMA"].ToString();
                bookingupdate[c].newlocation = rdr["BEZEICHNUNG"].ToString();
                if (rdr["STORNO"].ToString() != null)
                {
                    bookingupdate[c].deleted = true;
                }
                else
                {
                    bookingupdate[c].deleted = false;
                }
                c++;

        }
    }

    catch (Exception ex)
    {
        log.Error(ex.Message + "\n\rStackTrace:\n\r" + ex.StackTrace);
    }
    finally
    {
        connection.Close();
    }
    return bookingupdate;
} 
```

例外是：阅读器关闭时调用读取的尝试无效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:43:45.493

-Method[`Load`](http://msdn.microsoft.com/en-us/library/7x8ccbsb.aspx)关闭`DataReader`，因此后续调用`Read()`失败（嗯，这正是异常告诉你的）。

一旦您将数据读入您的`DataTable`，您可以简单地查询它并使用`Select`投影来创建您的`BookingUpdate`实例（不需要`while`-loop/ `BookingUpdate[]`）。所以你的代码基本上可以精简到

```
String command = "SELECT b.ID,b.VERANSTALTER, rr.VON ,rr.BIS, b.THEMA, b.STORNO, ra.BEZEICHNUNG from BUCHUNG b JOIN RESERVIERUNGRAUM rr on rr.BUCHUNG_ID = b.ID JOIN RAUM ra on ra.ID = rr.RAUM_ID WHERE b.UPDATE_DATE BETWEEN DATEADD (DAY , -20 , getdate()) AND getdate() AND b.BOOKVERNR = 0";
SqlCommand cmd = new SqlCommand(command, new SqlConnection(GetConnectionString()));
connection.Open();

DataTable dt = new DataTable();
dt.Load(cmd.ExecuteReader());

var bookingupdate = dt.Rows.OfType<DataRow>().Select (row => 
                    new BookingUpdate
                    {
                        bookingID = Convert.ToInt32(row["ID"]),
                        fullUserName = row["VERANSTALTER"].ToString(),
                        newStart = (DateTime)row["VON"],
                        newEnd = (DateTime)row["BIS"],
                        newSubject = row["THEMA"].ToString(),
                        newlocation = row["BEZEICHNUNG"].ToString(),
                        deleted = row["STORNO"].ToString() != null // note that this line makes no sense. If you can call `ToString` on an object, it is not 'null'
                    }).ToArray();

return bookingupdate; 
```

*（注意：为了便于阅读，我省略了 try-block）*

您可能还想研究[`DataRowExtensions`](http://msdn.microsoft.com/en-us/library/bb348900.aspx)，尤其是[`Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)方法，以使您的代码更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:25:30.757

`DataTable.Load(IDataReader)`从阅读器加载数据后关闭阅读器。用于`DataTable`获取您加载的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:24:28.590

由于阅读器所在的位置，您已经在以下行处理了阅读器`EOF/Closed`：

```
dt.Load(rdr); 
```

如果您想在上述方法调用之后处理记录，您*应该*通过上面的行 unsing for 循环使用您创建的`DataTable`对象而*不是*`dt``dt.Rows.Count` *`while (rdr.Read())`*

 *[从MSDN](http://msdn.microsoft.com/en-us/library/7x8ccbsb%28v=vs.100%29.aspx)签出此主题*

# entity-framework - EF db first 和 table 没有 key

> ID：14873622
> 
> 赞同：2
> 
> 时间：2013-02-14T11:19:31.500
> 
> 标签：entity-framework, database-first, ef-database-first

我正在尝试首先使用 Entity Framework DB 为大型数据库的报告网站进行快速原型设计。问题是其中一张桌子没有钥匙。我收到“错误 159：EntityType 没有定义键”。如果我在模型设计器上添加一个键，我会得到“错误 3024：必须为所有键属性指定映射”。我的问题是是否有一种方法可以在不向表中添加密钥的情况下解决此问题。这张桌子不在我们的控制范围内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:26:46.153

没有钥匙的大桌子？如果不使用全表扫描，您或表所有者将无法搜索此表中的任何内容。此外，如果没有主键，基本上不可能单行使用 UPDATE。

你真的必须要么创建合成密钥，要么要求所有者这样做。作为一种解决方法，您可能能够找到一些现有的列（或 2-3 列），这些列足够独特，可以用作唯一键。如果它是唯一的但没有创建实际的索引，那仍然不利于性能 - 您应该创建这样的索引。

# ios - 在objective-c协议的几个概念方面需要帮助

> ID：14873623
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:19:33.217
> 
> 标签：ios, objective-c, protocols

1>有没有其他方法可以使用/avail/consume协议而不这样做`@interface MyClass : NSObject <SomeProtocol>`。

2> 如果不这样做，一个类是否可以成为委托类的代表`@interface MyClass : NSObject <SomeProtocol>`。

3> 我对这些正确吗

`id<aProtocol> *myVar1;`这意味着`myVar1`它将持有任何类的对象，但该类必须实现`<aProtocol>`？

`AClass<bProtocol> *myVar2;`这意味着`myVar2`它将持有一个对象`AClass`并且它还必须实现`<bProtocol>`？

4> 这是在做什么`(MyClass <someProtocol> *)[[MyClass alloc] init];`，并且`MyClass`在它的界面中**没有**继承`<someProtocol>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:39:51.163

1.  是的，只要一个对象实现了协议所需的接口，那么该对象本质上就可以代表一个明确符合协议的对象。如果你这样做，那么你就会失去编译器来帮助你确认你实现了所需的方法。所以通常最好是明确地声明你的类符合协议。

    当我说`as long as an object implements the required interface of the protocol`我的意思是对象在这个意义上非正式地符合，它实现了所需的方法，但只是没有明确表明它正在尝试符合。例如，这个对象将是有效`UITableViewDataSource`的，因为它实现了`@required`方法，但它只是没有声明。

    ```
    @interface MyObject : NSObject
    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
    @end 
    ```

    同样，您应该清楚地说明这些关系，并实际上说您符合`@interface MyObject : NSObject <UITableViewDataSource>`

2.  **a)**`id<aProtocol> *myVar1;`应该写成不带星号`id<aProtocol> myVar1;`，这表示你有一个名为的变量`myVar1`应该符合`aProtocol`- 这可能是一个谎言（参见 3 的答案）
    **b)**这是正确的，除了`it must also implement <bProtocol>`太强，这就是说你有一个名为的变量`myVar2`，它应该符合`bProtocol`- 这可能是一个谎言（见答案 3）

3.  在这里，您正在从将是`myClass`to的方法的返回类型执行转换`myClass<someProtocol>`。这本质上是您对编译器说“我知道该对象返回一个类型的对象，`myClass`但实际上我告诉您它将是`myClass<someProtocol>`”。本质上，如果`myClass`未定义为，`@interface myClass : NSObject <someProtocol>`那么您就是在对编译器撒谎，并且您有可能会引入编译器无法告诉您的错误。

您应该小心强制转换以使编译器静音（编译器非常聪明），例如我可以毫无问题地编译此代码，但它会在运行时崩溃

```
UIView *view = (id)@"Hey I'm not a view";
view.frame = CGRectZero; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:05:32.017

为了补充 Paul.s 的答案，还有一个“非正式协议”的概念，它不必被客户端代码采用（因为非正式协议实际上是 NSObject 上的一个类别，而不是一个协议）。这个概念现在已经在很大程度上被协议中的“可选”方法的概念所取代（协议可以声明可以在你的`myClass`.

有关更多信息，请参阅[ios 协议文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)。

# drupal - 在最新的 Openshift 版本中使用 Drupal

> ID：14873624
> 
> 赞同：1
> 
> 时间：2013-02-14T11:19:33.253
> 
> 标签：drupal, openshift

我在 OpenShift 上安装了几个可用的 Drupal。我更喜欢 OpenShift 进行测试和开发。

然而最近当我尝试安装一个新的 Drupal 实例时，'php' 文件夹丢失了，因此编辑任何文件都是一场真正的噩梦。我决定创建一个“php”文件夹并从那里构建我的 drupal。

然而，挑战在于，每次更新我推送的 settings.php 文件都会被删除，我必须通过 SSH 修复它才能开始工作。这是一个真正的麻烦，我正在寻找一个更好的替代方案，以在 OpenShift 上和平地使用 Drupal。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:04:41.977

快速入门已更改为在您的数据目录中自动部署 Drupal 实例并符号链接更改。这意味着在创建时您可以获得最新的 Drupal，并且可以实时配置和部署 Drupal。如果您更喜欢旧模型，只需将 php 文件夹从设备中复制出来，然后将其签入到您的源代码库中。如果您有一个 php 文件夹，则挂钩（您也可以更改）不会部署 Drupal - 这意味着您的基本 Drupal 仍然可以工作。

我们进行了这项更改，以便创建新实例的人可以立即运行带有最新安全补丁的东西（因此您可以直接将模块安装到服务器）。Settings.php 位于您的数据目录中，并在与被复制的情况下进行符号链接。

您也可以继续使用旧的 Drupal-example 存储库。

# java - 使用 Java 和 apache HttpClient 的 Apache Shiro authcBasic 身份验证

> ID：14873628
> 
> 赞同：3
> 
> 时间：2013-02-14T11:19:42.777
> 
> 标签：java, rest, httpclient, shiro

我的 REST 应用程序使用 Shiro 基本身份验证来保护 REST 端点，并且在通过浏览器进行测试时它工作得很好。

现在我希望能够使用 Apache HttpClient 从 java 客户端登录到应用程序

有任何想法吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:28:38.793

您可以将 Java URL 与 Authenticator 一起使用

下面是一个使用 Java URL 使用基本身份验证访问 SVN http 存储库的示例：

```
import java.net.Authenticator;
import java.net.PasswordAuthentication;
import java.net.URL;
import java.util.Properties;

/**
 * Created with IntelliJ IDEA.
 * User: Omar MEBARKI
 * To change this template use File | Settings | File Templates.
 */
public class URLConfiguration {
    private URL configURL;

    public URLConfiguration(final String login, final String password, String httpURL) throws Exception {
        Authenticator.setDefault(new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                   return new PasswordAuthentication(login, password.toCharArray());
            }
        });
        this.configURL = new URL(httpURL);
    }

    public Properties getConfiguration() throws Exception {
            Properties props = new Properties();
            props.load(configURL.openStream());
            return props;
        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:11:42.673

这对我有用

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
    try {

        httpclient.getCredentialsProvider().setCredentials(
            new AuthScope("localhost", 9009),
            new UsernamePasswordCredentials("username", "password*"));

        HttpGet httpget = new HttpGet("http://localhost:9009/path/list");

        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        System.out.println("executing request" + httpget.getRequestLine());

        String responseBody = httpclient.execute(httpget, responseHandler);
        System.out.println("----------------------------------------");
        System.out.println(responseBody);
        System.out.println("----------------------------------------");
        System.out.println("Job Done!");
    } catch (Exception ex) {
        Logger.getLogger(Command.class.getName()).log(Level.SEVERE, null, ex);
    } finally {
        httpclient.getConnectionManager().shutdown();
    }
} 
```

# mysql - 我无法在 FROM 子句中创建包含子查询的视图

> ID：14873629
> 
> 赞同：0
> 
> 时间：2013-02-14T11:19:44.787
> 
> 标签：mysql, view, mysql-workbench

数据源是：

```
Start Time              Real End Time           Staff
2013-02-14 16:44:27     2013-02-14 18:44:27     P 
2013-02-14 16:44:08     2013-02-14 17:09:08     C
2013-02-14 16:42:51     2013-02-14 16:43:51     P
2013-02-14 16:31:26     2013-02-14 17:06:26     V
2013-02-14 16:04:02     2013-02-14 16:34:02     C 
```

当我使用时：

```
CREATE VIEW turn_times AS
SELECT staff AS name, start_time, real_end_time AS work_end_time
FROM (  SELECT staff, start_time, real_end_time
        FROM treatments 
        WHERE date(real_end_time) = curdate()
        ORDER BY real_end_time ASC) AS a
GROUP BY name 
```

我有：

```
mysql #1349 - View's SELECT contains a subquery in the FROM clause 
```

我想通过**使用 view**获取以下数据，有什么好的解决方案：

```
name    start_time             work_end_time
C       2013-02-14 16:04:02    2013-02-14 16:34:02
P       2013-02-14 16:42:51    2013-02-14 16:43:51
V       2013-02-14 16:31:26    2013-02-14 17:06:26 
```

我不想为这个问题创建两个视图，我可以在一个视图中获得正确的 sql 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:27:17.103

`ORDER BY`您是否尝试使用聚合函数 ( `MIN`) 来返回`min()`每个的日期，而不是使用带有 的子查询`staff`：

```
SELECT staff, 
  min(start_time),
  min(real_end_time)AS work_end_time
FROM treatments 
WHERE date(real_end_time) = curdate()
group by staff 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/d254f/8)。

然后变成一个视图：

```
CREATE VIEW turn_times AS
SELECT staff, 
  min(start_time),
  min(real_end_time)AS work_end_time
FROM treatments 
WHERE date(real_end_time) = curdate()
group by staff 
```

上面的这个版本复制了您提供的结果，但如果您想要结束时间，您可能需要使用以下内容。这将为您提供每个员工的实际开始时间和结束时间：

```
CREATE VIEW turn_times AS
SELECT staff, 
  min(start_time) as start_time,
  max(real_end_time) AS work_end_time
FROM treatments 
WHERE date(real_end_time) = curdate()
group by staff 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/d254f/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:32:22.303

目前尚不清楚您为什么使用子查询，但您可以在没有子查询的情况下获得类似的结果

```
CREATE VIEW turn_times AS
SELECT staff AS name, 
  MIN(start_time) AS start_time,
  MAX(real_end_time) AS work_end_time,
  date(start_time) As turn_date
FROM treatments 
WHERE 
AND date(start_time) = curdate()
AND date(real_end_time) = curdate()
GROUP BY staff, date(start_time); 
```

# apache-flex - Flex 多项选择在 DataGrid 中不起作用

> ID：14873632
> 
> 赞同：0
> 
> 时间：2013-02-14T11:19:51.987
> 
> 标签：apache-flex, actionscript, datagrid

我正在 mxml 文件中制作一个组件，我正在使用 DataGrid 并获取对象。gridTable 是 DataGrid 的对象，我试图通过代码选择多行。所以我在做

```
gridTable.selectedIndices = [0,1,2,3,4,5,6,7,8,9];
gridTable.setStyle("horizontalGridLineColor",0xDDAAFF); 
```

部分工作如下，

当我将鼠标悬停在列表上时，这不会同时显示选定的行，然后它会在所有列表中显示选定的行

如果有朋友解决了此类问题，请分享您的经验。我正在使用 Flex 4.5.1A 和 FlashPlayer 10.2.0

问候 Anuj Jindal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:51:29.577

有时它会有所帮助。您可以尝试使用`callLater()`和`validateNow()`。

```
callLater(function():void
{    
     gridTable.selectedIndices = [0,1,2,3,4,5,6,7,8,9];
     gridTable.setStyle("horizontalGridLineColor",0xDDAAFF);
     gridTable.validateNow();

}); 
```

[http://livedocs.adobe.com/flex/3/html/help.html?content=layoutperformance_12.html](http://livedocs.adobe.com/flex/3/html/help.html?content=layoutperformance_12.html)

# asp.net-mvc - FormsAuthentication.Authenticate() 实用程序？

> ID：14873637
> 
> 赞同：0
> 
> 时间：2013-02-14T11:20:07.380
> 
> 标签：asp.net-mvc, authentication

我看不到这个函数的实用性，因为每个人都将有关成员的信息保存在数据库中而不是**web.config**文件中，所以我们需要一直编写自己的函数来验证用户是否存在于数据库中和对应的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:27:49.003

在某些情况下，您需要在不询问用户密码的情况下对用户进行身份验证。这是我使用它的情况：

我有一个使用`asp:Login`控件的网站。我在单击登录按钮时使用用户名和密码对用户进行身份验证。

然后，我被要求实现另一种类型的登录，与现有的登录（用户可以选择）平行，即使用**OpenID**的登录。所以基本上，在电子邮件提供商向我确认用户的电子邮件后，我会自动对其进行身份验证，而无需询问用户名或密码。

就像是：

```
if ((hasUsername(email)))
{
     FormsAuthentication.SetAuthCookie(userName, true);       
} 
```

# c# - 从 AJAX 调用 Web 服务

> ID：14873641
> 
> 赞同：1
> 
> 时间：2013-02-14T11:20:20.810
> 
> 标签：c#, asp.net, asp.net-mvc-3, jquery

我正在尝试从 AJAX 调用中调用 Web 服务方法。如果我使用'localhost'，它工作正常。但是，如果我用特定的 IP 地址替换 'localhost'，它会给我一些脚本错误。

**我的代码：**

```
 $.ajax({
                url: "http://localhost:1265/Service.svc/rh/VerifyConfirmationCode",
                type: "GET",
                datatype: "jsonp",
                data: { confirmationcode: 'MYCODE' },
                success: OnSuccess,
                error: OnError
            });

        function OnSuccess(data, status) {
            alert(data);

        }

        function OnError(request, status, error) {
            alert('error');
        } 
```

接口 IService.cs ：

```
 [OperationContract]
    [WebGet(UriTemplate = "/VerifyConfirmationCode?confirmationcode={confirmationCode}", ResponseFormat = WebMessageFormat.Json)]
    bool VerifyConfirmationCode(string confirmationCode); 
```

类 Service.cs

```
 public bool VerifyConfirmationCode(string confirmationCode)
    {
        return (confirmationCode.equals("MYCODE"));
    } 
```

在上面的代码中，如果我将 URL 更改为

```
url: "http://192.168.1.1:1265/Service.svc/rh/VerifyConfirmationCode" 
```

我收到以下错误，

> **' w.open(m,e.url,e.async);'行中的**'Microsoft JScript 运行时错误：访问被拒绝'** 和 ' w.setRequestHeader("Content-Type",e.contentType);' 行中的**'Microsoft JScript 运行时错误：由于错误 c00c023e 无法完成操作'** 和 w.setRequestHeader("Accept", e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */* ":e.accepts._default)**

 **jquery-1.4.1.min.js 文件

请帮我解决它。

提前致谢。**

# javascript - 为什么我的硒测试在没有代码更改后在 travis-ci 上失败，而它们在本地通过？

> ID：14873642
> 
> 赞同：4
> 
> 时间：2013-02-14T11:20:22.420
> 
> 标签：javascript, python, django, selenium, travis-ci

我很难调试在本地通过但在 travis 上没有通过的硒测试。

根据 travis 构建日志，它在构建[#311时通过，但在构建](https://travis-ci.org/yourlabs/django-autocomplete-light/builds/4743649)[#312](https://travis-ci.org/yourlabs/django-autocomplete-light/builds/4771234)开始失败，显然是因为提交[e6ee7de08800...7617088b4ba6](https://github.com/yourlabs/django-autocomplete-light/compare/e6ee7de08800...7617088b4ba6) - 它只包括一个新的语言环境 (.po) 文件和版本提升。

但是硒测试在本地通过。你可以试试看：

```
AUTOCOMPLETE_LIGHT_VERSION="master"
CITIES_LIGHT_VERSION="master"

rm -rf autocomplete_light_env/

virtualenv autocomplete_light_env
source autocomplete_light_env/bin/activate
pip install selenium
pip install -e git+git://github.com/yourlabs/django-cities-light.git@$CITIES_LIGHT_VERSION#egg=cities_light
pip install -e git+git://github.com/yourlabs/django-autocomplete-light.git@$AUTOCOMPLETE_LIGHT_VERSION#egg=autocomplete_light
cd autocomplete_light_env/src/autocomplete-light/test_project
pip install -r requirements.txt
./manage.py test autocomplete_light 
```

它将输出如下内容：

```
----------------------------------------------------------------------
Ran 49 tests in 22.990s

OK
Destroying test database for alias 'default'... 
```

也许 travis-ci 有问题？我不知道。欢迎任何帮助 B)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:44:53.337

因为 django selenium 测试使用多线程，所以 webserver 和测试运行异步运行。

Travis-ci 是其自身成功的牺牲品，它需要[增加请求之间的睡眠时间](https://github.com/yourlabs/django-autocomplete-light/compare/ad190909ebaa...aa42d50a548b)以修复构建。

- 编辑 -

我在 django-session-security 2.0.0 中遇到了同样的问题，但我发现了一个有趣的[模式，它可以抵抗 travis](https://github.com/yourlabs/django-session-security/compare/7a76a8149a7f...cf2aa92525c6)。基本上，“等待”事情发生而不是“睡觉然后期待”。

# android - 如何取消 asyncTask 并多次执行？

> ID：14873643
> 
> 赞同：1
> 
> 时间：2013-02-14T11:20:25.027
> 
> 标签：android

我正在做一个使用新的 Google Maps V2 的应用程序，当地图相机移动时，我需要将点重新加载到新的相机位置，我使用 asynctask 来完成。

问题是当我多次移动相机位置时，应用程序会多次加载这些点。因此，我在移动相机时取消了异步任务，并且在取消任务之前我不会加载新点。我有一个空的while循环来做，有更好的解决方案吗？

```
// LOAD NEW POIS ASYNC
private void updatePoisInMap( ){

     ....

     if (refresh_pois_async != null) {
        refresh_pois_async.cancel(true);
        while (!refresh_pois_async.isCancelled()) {
        }    
     }
     refresh_pois_async = new RefreshPoisAsync( ).execute( lowerLeftCorner, topRightCorner);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:53:11.657

实际上，我认为您的 while 循环不会起作用，或者至少不会像您期望的那样起作用。AsyncTask.isCancelled() 方法通常**在**doInBackground() 方法中使用，以支持提前取消。你有几个选项可以做你想做的事：

*   覆盖 AsyncTask 的 onCancelled() 方法。当你的 doInBackground() 完成并且你事先在你的任务上调用了 cancel() 时，这保证会在主线程上被调用。在您的 onCancelled() 中，您可以启动一个新的 AsyncTask。如上所述，使用任务的 doInBackground() 中的 isCancelled() 提前退出。
*   不要取消当前任务，而是让它运行。同时，用户可以多次移动地图。只要任务仍在运行，只需设置一个应该重新运行的标志。在任务完成时（覆盖 AsyncTask 中的 onPostExecute()）检查标志并重新开始（如果已设置）。
*   结合以上内容，在响应性（开始足够快地加载正确的 POI）和过度处理（不要每次都开始，而是等待用户停止滚动）之间找到适当的平衡。

# c# - 如何使用 EF 删除实例？

> ID：14873647
> 
> 赞同：0
> 
> 时间：2013-02-14T11:20:39.640
> 
> 标签：c#, entity-framework

我创建了一个简单的 Windows 控制台应用程序来使用 VS2012 和 .NET 4.5 测试实体框架。

我添加了一个 ADO.NET 实体数据模型来从我的数据库创建一个模型。我用这种语法使用它，但我怎样才能删除一些东西？

```
static void Main(string[] args)
    {
        using (var ctx = new HKDBEntities())
        {
           int wordId=2;
          var selectedWords = (from o in context.Addresses 
                                where o.word== wordId
                                select o).FirstOrDefault(); 

           //these syntaxt is unavailable why????
           ctx.Words.Delete(word);
           ctx.DeleteObject(word);

          // i test remove method but works not gave me some error
             context.Words.Remove(selectedWords);
        }
    } 
```

如何使用删除语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:29:48.767

使用这个：ctx.Words.Remove(word)。不要忘记 SaveChanges(); 在处理上下文之前。！！！！！！！！！我已经更新了答案！！！！！！关于这个问题的新想法：

```
static void Main(string[] args)
    {
        using (var ctx = new HKDBEntities())
        {
           int wordId=2;
          // This will get the first Addresses which have a `Words` with `WordId`==2
          var selectedWords = ctx.Addresses.First(e=>e.Words.WordId==wordId); 
          //If you want to get to selectedWords the `Words` entity and delete it you should use:
          selectedWords = cts.Words.First(e=>e.WordId == wordId);

          ctx.Words.Remove(selectedWords);
          ctx.SaveChanges();
        }
    } 
```

当您从上下文中获取数据时，您试图访问从 ctx 中删除数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:22:35.010

你必须使用`ctx.Words.Remove(word);`

# javascript - 在 CSS 中为子元素的父元素设置样式

> ID：14873648
> 
> 赞同：1
> 
> 时间：2013-02-14T11:20:39.670
> 
> 标签：javascript, jquery, css

我非常感谢您在这件事上提供的任何帮助。我正在尝试为特定子元素的父元素设置样式。

由于技术限制，这似乎在 CSS 中可能无法实现，但我想知道 JavaScript 中是否有可用的解决方案可以实现这一点？

我正在尝试更改子元素的父`<a>`元素`<ul class="children">`，仅当该`<a>`元素具有`class="active"`. 例如，将有其他`<a>`元素的`<ul>`子元素是不活动的，我不想设置样式。

如果您知道任何能够实现这一目标的解决方案，我们将不胜感激！虽然我熟悉 CSS，但我在 JavaScript 方面的能力不足以自己编写这个。

```
<ul class="menu">  
    <li>  
        <a class="active">Active Page</a>
        <ul class="children">
            <a>Something here </a>
        </ul>
    </li>  
    <li>    
        <a>Some Other Page</a>  
        <ul class="children">
            <a>Something here</a>
        </ul>
    </li>  
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:22:59.643

我建议你风格 a.active。（或者我没有理解这个问题？）

IE

```
a.active {
  background-color: pink;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:23:49.537

没有用于选择父元素的 CSS 选择器。您还应该为父元素提供一个选择器，您可以使用它来设置它的样式。

另请参阅[是否有 CSS 父选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)有关父选择器主题的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:26:56.747

我真的对你的问题感到困惑，但你可以给同一个元素两个类名。就像对于

```
<ul class="children"> 
```

您可以将其命名为：

```
<ul class="children active"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:27:32.863

可能你想要这个：

```
if($('ul.children a').hasClass('active')){
  $('ul.children').sibling('a').addClass('active');
} 
```

# 看：

我是`trying to alter the parent <a>`元素`of a <ul class="children">`

虽然这不是真的，`<a>`但在您的情况下是兄弟姐妹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T11:28:09.517

为什么你不能为班级活动做一个风格？

```
.active { 
    background-color: red;
} 
```

根据您的 HTML，您可以设置确切的父元素样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T12:20:33.413

对不起，我读了一遍又一遍，现在我明白了！

```
.menu>li>a.active{
  font-weight:bold
} 
```

它将仅从“.menu”的第一级“li”子级中选择第一级“a.active”子级；）

希望能帮助到你！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-14T11:31:47.850

您的 HTML 嵌套标签没问题。不需要 javascript 你的 css 规则应该是这样的

```
a.active+ul.children { ...what ever .... } 
```

（为了在其兄弟是活动的类时设置 UL 类子项的样式

# ios - 在 UIScrollView 中加载下一个图像视图

> ID：14873650
> 
> 赞同：0
> 
> 时间：2013-02-14T11:20:42.843
> 
> 标签：ios, objective-c, ios6, uiscrollview

我把 uiscrollview 和设置，

```
self.scrollViewHor.directionalLockEnabled = NO; 
```

现在我启用了垂直和水平滚动。我的问题是，当我水平滚动时，我想在下一帧获得顶部图像，

前任; 当我从 1.a 垂直滚动到 1.b 然后水平滚动到右侧时，我想看到图像 2.a 而不是 2.b ..

```
--------------   -------------- 
- Image 1.a  -   - Image 2.a  -
--------------   --------------
--------------   --------------
- Image 1.b  -   - Image 2.b  -
--------------   --------------
--------------   --------------
- Image 1.c  -   - Image 2.c  -
--------------   -------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:31:53.613

如果我没听错的话，...

在滚动视图中使用滚动视图。

背景中的大滚动视图不应高于滚动视图的屏幕/可见部分。它仅启用了水平滚动。它包含两个（或更多 - 例如两个）滚动视图。每列一个。这些滚动视图仅启用了垂直滚动。

这样做你应该把所有东西都开箱即用。实际上是免费的。

# javascript - 可折叠的常见问题解答，带有跳转到和扩展其他问题的链接

> ID：14873652
> 
> 赞同：1
> 
> 时间：2013-02-14T11:20:51.763
> 
> 标签：javascript, jquery, expand, collapse, page-jump

我目前有此代码用于问题和答案的常见问题解答列表。标题、问题和答案在点击时可展开/折叠。

[http://jsfiddle.net/7RbCZ/](http://jsfiddle.net/7RbCZ/)

但是，我需要的一个功能是能够在回答文本中链接到其他问题，以便页面跳转到并打开这个问题。

目前我已经写了（第 6 行 HTML）：

```
(See <a href="#question-3">Question 3</a>) 
```

在问题 1 的答案中，并给问题 3 一个 id（第 18 行 HTML）：

```
<li class="list-level-2" id="question-3">Question 3? 
```

这不起作用，但希望能证明我想要实现的目标。

非常感谢您的帮助。

编辑：感谢下面的marbor3。回复：他们的解决方案，有人对如何让页面跳转到这个问题/答案有任何想法吗？还有一个问题，如果链接到的问题已经打开，那么触发器（单击）使其不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:30:16.057

`click event`您可以在链接和元素中捕获`trigger click event`id 在`href`

```
$(".triggerNextQuestion").click(function(event) {
    event.preventDefault();
    var question = $($(this).attr('href'));
    if(!question.parent().is(':visible')) {
        question.parent().trigger('click');
    } 
    question.trigger('click');
}); 
```

您将需要检查父级是否也可见，如果不可见则显示。

这是一个起点，肯定需要一些修改，比如在显示父项后显示问题。

这是[小提琴](http://jsfiddle.net/bsMhP/)

# c# - ASP.NET 应用程序中带有 DomainBox 的 SOAP API

> ID：14873661
> 
> 赞同：1
> 
> 时间：2013-02-14T11:21:14.513
> 
> 标签：c#, asp.net, api, soap

我正在尝试使用他们的 SOAP API将 ASP.NET 应用程序集成到[http://www.domainbox.com/ 。](http://www.domainbox.com/)我找不到任何例子。他们提供的唯一东西是 SOAP Resquest 和 Response 示例。我的问题是如何调用请求以及如何获取响应数据以在我的应用程序中使用？

* * *

要求：

```
<soap12:Envelope xmlns:xsi=”http://www.w3.org/2001/XMLSchema-instance”
xmlns:xsd=”http://www.w3.org/2001/XMLSchema” xmlns:soap12=”http://www.w3.org/2003/05/
soap-envelope”&gt;
<soap12:Body>
<QueryDomainRenewalSettings xmlns=”https://sandbox.domainbox.net/”&gt;
<AuthenticationParameters>
<Reseller>myreseller</Reseller>
<Username>myusername</Username>
<Passwordmy>password</Password>
</AuthenticationParameters>
<CommandParameters>
<DomainName>atestdomain.co</DomainName>
</CommandParameters>
</QueryDomainRenewalSettings>
</soap12:Body>
</soap12:Envelope> 
```

* * *

回复：

```
<soap:Envelope xmlns:soap=”http://www.w3.org/2003/05/soap-envelope”
xmlns:xsi=”http://www.w3.org/2001/XMLSchema-instance” xmlns:xsd=”http://www.
w3.org/2001/XMLSchema”&gt;
<soap:Body>
<QueryDomainRenewalSettingsResponse xmlns=”https://sandbox.domainbox.net/”&gt;
<QueryDomainRenewalSettingsResult>
<ResultCode>100</ResultCode>
<ResultMsg>Domain Renewal Settings Queried Successfully</ResultMsg>
<TxID>4d76201a-3b6d-4ccc-bca5-729439bbac9b</TxID>
<DomainId>87967</DomainId>
<AutoRenew>true</AutoRenew>
<AutoRenewDays>60</AutoRenewDays>
</QueryDomainRenewalSettingsResult>
</QueryDomainRenewalSettingsResponse>
</soap:Body>
</soap:Envelope> 
```

* * *

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T18:38:54.890

如果您使用的是 ASP.NET，则应将 Domainbox API 添加为服务引用。

这会让你像使用普通的 C#/VB 类一样使用它，

```
var parameters = new Domainbox.CheckDomainAvailabilityParameters {DomainName= "example.com"};
var result = apiObject.CheckDomainAvailiability(authObject, paramters);
if (result.ResultCode == 100) { // get results... } 
```

如果需要，我可以提供更详细的示例。

# ruby - 无法理解 Ruby 命令行开关 -0digit

> ID：14873664
> 
> 赞同：0
> 
> 时间：2013-02-14T11:21:25.300
> 
> 标签：ruby, ruby-1.9.3

从[文档](http://web.njit.edu/all_topics/Prog_Lang_Docs/html/ruby/options.html)

***-0 位 =>***

*将输入记录分隔符 ($/) 指定为八进制数。如果没有给出数字，则空字符是分隔符。其他开关可能跟在数字后面。-00 将 Ruby 转换为段落模式。-0777 使 Ruby 将整个文件作为单个字符串一次读取，因为该值没有合法字符。*

我的错！根本消化不了。所以让我们开始玩它。

```
C:\>ruby -0777 -e 'a= gets; puts a '
Hi, This is Ram.
Could you help me here?
^Z #~~~> pressed ENTER here after CTRL+Z and got the output as below-
Hi, This is Ram.
Could you help me here?
C:\>ruby #~~~> return the prompt

C:\>ruby -000 -e 'a= gets; puts a '
Hi, This is Ram.
Could you help me here?
^Z #~~~> pressed ENTER here after CTRL+Z and got the output as below-
Hi, This is Ram.
Could you help me here?
C:\>ruby #~~~> return the prompt

C:\>ruby -00 -e 'a= gets; puts a '
Hi, This is Ram.
Could you help me here? #~~~> pressed ENTER
#~~~> pressed ENTER here and got the output as below-
Hi, This is Ram.
Could you help me here?
C:\>ruby #~~~> return the prompt 
```

**问题：1 -**我可以设置`octal`如下`$/`吗？

```
carraige return (\r)
tab (\t) 
```

如果是这样，我可以为每个人举一个例子来看看他们的行为吗？

***问题：2*** - 我也尝试打印 的值，`"$/"`但没有打印任何内容。那我应该怎么看呢？

```
C:\>ruby -00 -e 'a= gets; puts a ;puts "here is: #{$/}"'
hi

hi

here is:

C:\>ruby -0777 -e 'a= gets; puts a ;puts "here is: #{$/}"'
Hey! Arjun
Are you going school?

^Z
Hey! Arjun
Are you going school?

here is:

C:\> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:40:45.790

从[用作](http://www.delorie.com/gnu/docs/binutils/as_34.html)

***最后我找到了如何设置*** `carraige return (\r) and tab (\t)`.

找到以下代码：

```
C:\>ruby -00 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Hi

Hi

here is: "\n\n"

C:\>ruby -015 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
hi
hi
^Z
hi
hi
here is: "\r"

C:\>ruby -011 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Hello

^Z
Hello

here is: "\t"

C:\> 
```

***最后我可以打印`.inspect`如下：***

```
C:\>ruby -00 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Hi

Hi

here is: "\n\n"

C:\> 
```

想和红宝石分享我的一整天::)

从上面的链接：[ASCII码](http://www.december.com/html/spec/ascii.html)

我得到了更多转义字符的八进制代码，并使用 Ruby 命令行`-0<digit>`选项与它们一起玩：

这是示例的完整列表。阅读并消化它。:)

```
@ubuntu:~$ ruby -010 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
This is a spoon. Do you need it.^H
This is a spoon. Do you need it.
here is: "\b"

@ubuntu:~$ ruby -033 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Hi..How are you?
Are you going ^[ school today?
Hi..How are you?
Are you going 
here is: "\e"

@ubuntu:~$ ruby -011 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Today is very hot outside   the room
Today is very hot outside   
here is: "\t"

@ubuntu:~$ ruby -015 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Are you mad?hey..^Mhello..I am telling you dude...
Are you mad?hey..
here is: "\r"

@ubuntu:~$ ruby -012 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Are you there?
Are you there?
here is: "\n"

@ubuntu:~$ ruby -040 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Iammmmmmmmmm a
Iammmmmmmmmm 
here is: " "

@ubuntu:~$ ruby -014 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Earth is an planet.Remember it...^L dear brother
Earth is an planet.Remember it...

here is: "\f"

@ubuntu:~$ ruby -000 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Hiiiii............

Hiiiii............

here is: "\n\n"
@ubuntu:~$ 
```

# c# - jQuery AJAX 文件上传到 WCF Web 服务在大数据上失败

> ID：14873675
> 
> 赞同：2
> 
> 时间：2013-02-14T11:21:59.223
> 
> 标签：c#, jquery, .net, ajax, wcf

我正在编写一个应用程序的一部分，它允许文件被拖放，并通过 ajax 上传到 Web 服务器。

这是我将文件上传到 WCF Web 服务的 jQuery 代码片段：

```
var fileData = JSON.stringify({
    filename: file.name,
    contentType: file.type,
    data: e.target.result
});

$.ajax({
    cache: false,
    url: "/site/app.svc/GetFile",
    type: "POST",
    dataType: "json",
    data: fileData,
    contentType: "application/json; charset=utf-8",
    processData: false
}); 
```

这是我的 WCF Web 服务代码片段，它获取文件数据并保存它：

```
[OperationContract]
[WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
public bool GetFile(string filename, string contentType, string data)
{
    try
    {
        var tokens = data.Split(',');
        File.WriteAllBytes("C:\\" + filename, System.Convert.FromBase64String(tokens[1]));
    }
    catch
    {
        return false;
    }
    return true;
} 
```

这适用于小文件，但是当我达到 80Kb 左右时...它失败并显示消息

> 413请求实体太大

......有时

> 500内部服务器错误

关于它在达到特定大小限制时为什么会失败的任何想法？这是对 ajax 帖子大小的限制，还是更可能是 WCF 服务限制了可以发送和不能发送的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:37:21.770

您是否尝试将配置的这些属性设置为一些大值？maxBufferPoolSize, maxReceivedMessageSize, maxBufferSize

# algorithm - Facebook Graph Search：信息检索算法

> ID：14873680
> 
> 赞同：2
> 
> 时间：2013-02-14T11:22:13.460
> 
> 标签：algorithm, search, graph-theory, information-retrieval

有一个名为“ [Facebook Graph Search 是如何工作的？](https://stackoverflow.com/questions/14498507/how-does-facebook-graph-search-work) ”的封闭式问题。

用最简单的话说，OP 询问（甚至给出了他尝试过的示例）：

Facebook 图表搜索如何工作？他举了一个例子：`Friends from France who likes England`

*如何将上述内容实现为现实世界的信息检索问题？*

由于我的回答不适合评论，所以我想重新构建问题并以 Stack Overflow Q&A 的方式很好地回答它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T11:22:13.460

从实现的角度来看，寻找一个属性图，比如基于 NoSQL 的 Neo4j 和 Lucene 作为图数据库（+分布式系统）背后的搜索引擎。Neo4j 或自定义分布式属性图解决方案可以轻松处理您“喜欢俄罗斯的法国朋友”给出的示例。

假设您使用 Neo4j，在这种情况下，France 将是键值存储中的一个值（在图节点中），其中说 key=Country，将遍历该节点的所有带有标签“likes”的传出边，并且所有目的地顶点将再次被搜索为英格兰。就是这样（当然这里的挑战是大数据分布式图的搜索和遍历）！

考虑从 Neo4j 站点获取的属性图的图表表示：

![在此处输入图像描述](../Images/e3f9d4d9a3b458f83e246a497e636a51.png)

不过，我还没有读到关于 Facebook Graph Search 的文章：)

# .htaccess - url 中的 Codeigniter 用户名

> ID：14873683
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:22:30.693
> 
> 标签：.htaccess, codeigniter, frameworks

我正在尝试为我的网站创建用户配置文件，其中用户名在 URL 中。

但我怎么能做到呢？

例如 [http://www.site.com/barackobama](http://www.site.com/barackobama)或其他。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:26:54.763

只需遵循[CI 的 URI 路由指南](http://ellislab.com/codeigniter/user-guide/general/routing.html)。

我建议使用如下路线（例如）：

```
$route['user/(:any)'] = "user/view"; // matched by www.site.com/user/barackobama 
```

代替

```
$route['(:any)'] = "user/view"; // matched by www.site.com/barackobama 
```

以避免路由之间的冲突。

# ios - 记录方法进入和退出 Objective C

> ID：14873684
> 
> 赞同：1
> 
> 时间：2013-02-14T11:22:31.970
> 
> 标签：ios, objective-c, logging

我已用于`NSObjCMessageLoggingEnabled`在应用程序的运行时记录方法进入和退出。日志已保存在`/tmp/msgSends-pid.`其中 pid 为进程 ID。我想在 iPhone 设备上运行应用程序时保存相同的日志，而不是使用`Xcode`. 如果您需要更多详细信息来帮助我，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:57:45.810

`NSObjCMessageLoggingEnabled`出现在 Apple 关于[Mac OS X 调试魔法](http://developer.apple.com/library/mac/technotes/tn2124/)的技术说明中，但没有出现在关于[iOS 调试魔法](http://developer.apple.com/library/ios/technotes/tn2239/)的技术说明中。它似乎在 iOS 上不可用。

显然，您可以[使用 Instruments 中的 DTrace 探针记录 Objective-C 方法的进入和退出](http://kdbdallas.com/2009/02/07/log-all-accessed-methods-in-objective-c-with-dtrace/)。

# mongodb - Mongo vs Raven 评估

> ID：14873687
> 
> 赞同：8
> 
> 时间：2013-02-14T11:22:44.687
> 
> 标签：mongodb, ravendb, mongodb-.net-driver

我正在评估 nosql 数据库并最终确定了两个。RavenDB 和 MongoDb。哪个更好，为什么？这将有助于编写更多面向性能的查询。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T18:31:42.500

Raven 的安装基数较小。当您考虑两者时，请考虑您的成长路径。仔细看看 MongoDb 和 Raven 在分片键上的区别。仔细查看产品周围的支持和社区——一旦您遇到生产关键问题，这些就会发挥作用。查看索引策略和 map-reduce 构造是否满足您的用例。仔细查看最大集合和索引的存储和延迟。确定事务模型是否适合您的需求。

如果您的应用程序足够简单，那么您对 ​​DB 层的抽象应该使您能够在您改变主意时进行切换。但是对于一个复杂而健壮的应用程序，我建议在完整的产品提交之前进行概念验证。

# javascript - 单个视图的多个集合实例？

> ID：14873689
> 
> 赞同：0
> 
> 时间：2013-02-14T11:22:45.757
> 
> 标签：javascript, backbone.js, collections, models

我正在开发一个应用程序，其中有两个面板 - 左面板和右面板。左侧面板是不同项目的列表，当单击其中任何一个时，右侧面板会显示有关该项目的信息。

右侧面板具有相同的视图，只是数据不同。

如何在 Backbone 中实现这一点。目前，我正在为每个项目创建集合实例并将其传递给视图。但是所有实例都具有相同的数据。

我是 Backbone 的新手，我必须自己解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:29:05.137

从您所说的来看，听起来您真的只想要一个集合实例，它将保存您所指的项目（集合中的模型实例）。

在这个场景中还应该有 3 个视图——一个用于`List`（左面板），一个用于该`ListItem`列表中的单个 s，一个用于显示有关`Item`自身的信息（右面板）。

## 列表

视图保存对集合的`List`引用，并为集合`ListItem`中的每个项目附加一个视图。您稍后可能希望订阅集合上的事件，以便在从集合中添加/删除新项目时自动从列表中追加/删除项目。这是应该处理的视图。

```
List = Backbone.View.extend({
  el: '#list',

  initialize: function(){
    _.bindAll(this)
    this.collection.each(this.appendItem)
  },

  appendItem: function(item) {
    view = new ListItem({model: item})
    $(this.el).append(view.render().el)
  }
}) 
```

## 项目清单

该`ListItem`视图保存对特定模型的引用，并在该模型的列表中呈现列表项。它还处理单击事件，该事件呈现该`Item`模型的视图。

```
ListItem = Backbone.View.extend({
  tagName: 'li',

  events: {
    "click" : "showInfo"
  },

  initialize: function(){
    _.bindAll(this)
  },

  render: function(){
    $(this.el).html(renderTemplate("listItem", this.model))
    return this
  },

  showInfo: function(){
    view = new Item({model: this.model})
    $('#item').html(view.render().el)
  }
}) 
```

## 物品

该`Item`视图还保存对特定模型的引用并呈现有关该模型的信息。这是您所指的右侧面板。

```
Item = Backbone.View.extend({
  initialize: function(){
    _.bindAll(this)
  },

  render: function(){
    $(this.el).html(renderTemplate("item", this.model))
    return this
  }
}) 
```

这是一个展示实际操作[的小提琴。](http://jsfiddle.net/XRGFe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:43:02.283

如果我正确理解了这个问题，你可以这样做。应该有 3 个对象，模型、左视图和右视图。对于左侧面板中的每个项目，您可以实例化一个 LeftView 和一个模型。而且一旦点击了任何一个LeftView，就可以基于相同的模型实例化RightView。您可以对 RightView 使用相同的模型，因为 LeftView 也具有相同的数据。

# perl - 标量 $keys 如何获得值 1 而不是 undef？

> ID：14873690
> 
> 赞同：0
> 
> 时间：2013-02-14T11:22:46.760
> 
> 标签：perl, key, exists

伙计们，

据我了解，`exists`函数将检查哈希中是否存在密钥。所以对于下面提到的情况，`key1`还是`key2`没有定义。哈希引用`$var`没有键。

在这种情况下，调用`keys(%{$var})` 时应返回 undef。

但是，它返回 1\. 我在这里想念什么？

```
my $var;
if (exists $var->{key1}->{key2}) {
    $var->{key1}->{key2} = 1;
}

my $keys = keys(%{$var});

print $keys;   #prints 1 to output console 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:31:58.373

您正在检查 $var->{key1}->{key2} 的事实将 $var->{key1} 创建为空 hashref。这可以通过以下方式看到：

```
use Data::Dumper;
my $var = {};
if (exists $var->{key1}->{key2}) {
    print "cannot happen\n"
}
print Dumper($var); 
```

哪个打印：

```
$VAR1 = {
          'key1' => {}
        }; 
```

所以，键的标量是 1，因为只有一个键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:53:34.147

这是[自动复活](http://perldoc.perl.org/perlglossary.html#A)。请注意，您可以使用 no autovification 禁用整个脚本或特定词法范围的[自动激活；](http://search.cpan.org/~vpit/autovivification-0.11/lib/autovivification.pm)语用。

# cuda - 如何找到活跃的SM？

> ID：14873693
> 
> 赞同：1
> 
> 时间：2013-02-14T11:23:00.017
> 
> 标签：cuda, gpgpu, nvidia, ptx

有什么方法可以让我知道免费/活跃 SM 的数量吗？或者至少读取每个 SM 的电压/功率或温度值，我可以通过它知道它是否工作？（在 gpu 设备上执行某些作业时实时）。

%smid 帮助我知道了每个 SM 的 ID。类似的东西会有所帮助。

谢谢和问候， 拉克什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T00:58:26.793

CUDA 分析工具接口 ( [CUPTI](http://docs.nvidia.com/cuda/cupti/index.html) ) 包含一个事件 API，它支持 GPU PM 计数器的运行时采样。CUPTI SDK 作为 CUDA 工具包的一部分提供。有关采样的文档可以在 CUPTI Events API\ [Sampling Events](http://docs.nvidia.com/cuda/cupti/index.html#r_sampling_events)部分找到。

以下一个或多个计数器将使您对 SM 活动有一个很好的了解：

*   **active_cycles**：多处理器至少有一个活动扭曲的周期数。
*   **active_warps**：每个周期的活动扭曲的累积数量。对于每个循环，它都会增加循环中活动扭曲的数量，该数量可以在 0 到 {48,64} 的范围内。

# sql - SphinxQL - 如何在没有搜索查询的情况下按日期排序

> ID：14873695
> 
> 赞同：0
> 
> 时间：2013-02-14T11:23:10.770
> 
> 标签：sql, sphinx, sphinxql

我有以下狮身人面像查询

```
SELECT * FROM cars WHERE MATCH('car'); 
```

当我需要搜索“汽车”时，这工作得很好。

假设您有一个搜索字段，其中有人输入“汽车”，但如果输入一个空字符串“”怎么办？在这种情况下，我想显示按日期排序的所有结果。

SphinxQL 在查询中需要 MATCH(..) ，所以在 SQL 中这样做

```
SELECT * FROM cars ORDER BY date DESC LIMIT 0, 20; 
```

不管用。

如何在没有搜索词的情况下按日期订购？我尝试了以下但没有成功:(

```
SELECT * FROM cars WHERE MATCH('*') ORDER BY date DESC LIMIT 0, 20; 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:14:25.640

你真的试过跑步吗...

```
SELECT * FROM cars ORDER BY date DESC LIMIT 0, 20; 
```

? 结果可能会让你吃惊 ：）

# jquery - jQuery覆盖插件

> ID：14873698
> 
> 赞同：1
> 
> 时间：2013-02-14T11:23:22.343
> 
> 标签：jquery, fadein, fadeout

我正在构建一个用于即将进行的项目的小型叠加插件，以下代码存在一些缺陷：

```
 $(document).ready(function()
    {

        var clickable_link = $('.p_wrapper p'),
            overlay = $('#overlay'),
            close_overlay = $('.close_overlay');

        clickable_link .click(function(evt){
            evt.preventDefault();
            //if there is no content
            current_link = $(this).attr('class');
            var overlay_content = $('#'+current_link);
            overlay.children().fadeOut(500, function(){
                overlay_content.fadeIn();
            });
            overlay.fadeIn();
        });

        overlay.click(function(){
            overlay.fadeOut();
            overlay.children().fadeOut(500);
        });
    }); 
```

如果我第一次单击“clickable_link”，一切都很好，但是如果我保持覆盖打开，然后再次单击“clickable_link”，则覆盖的第一个内容会淡出，然后新的内容会淡入，但一个接一个不在同时（看起来更好更流畅）[完整代码在这里](http://jsfiddle.net/PWV3q/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:38:53.400

您可以存储最后点击的链接：http: [//jsfiddle.net/PWV3q/15/](http://jsfiddle.net/PWV3q/15/)

```
$(document).ready(function () {

    var clickable_link = $('.p_wrapper p'),
        overlay = $('#overlay'),
        close_overlay = $('.close_overlay');

    overlay.hide();
    var lastLink = null;
    clickable_link.click(function (evt) {
        evt.preventDefault();
        if (lastLink != this) {
            lastLink = this;
            //if there is no content
            current_link = $(this).attr('class');
            var overlay_content = $('#' + current_link);
            overlay.children().fadeOut(500, function () {}).promise().done(function () {
                overlay_content.fadeIn();
            });
            if (!overlay.is(':visible')) overlay.fadeIn();
        }
    });

    overlay.click(function () {
        overlay.fadeOut();
        overlay.children().fadeOut(500);
    });
}); 
```

# java - 如何在android中的opengl中实现撤消功能

> ID：14873699
> 
> 赞同：5
> 
> 时间：2013-02-14T11:23:23.240
> 
> 标签：java, android, opengl-es

我正在开发一个扭曲图像的android应用程序。我正在使用opengl翻译和缩放功能来扭曲图像。图像扭曲很好。现在我想实现撤消功能。但无法实现该功能。任何人都可以帮助如何在 opengl 中实现撤消功能。任何建议或代码都会有所帮助。提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:23:40.763

我怀疑命令模式不足以满足您的情况。这是基于我的假设，即即使您知道应用了何种失真，也不容易扭转图像失真。

相反，您可能需要在应用失真之前将图像推送到堆栈上。然后，撤消实现会将当前图像替换为堆栈上的图像。这将导致由于重做和撤消的组合而产生的潜在有趣的问题。

您可以优化这一点，将命令对象存储为可轻松撤消的更改，并将图像存储为不易撤消的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:17:49.340

雷·塔耶克是对的。使用命令模式。也就是说，对于用户执行的每个操作，您都会将该操作（命令）以及与该操作相关的任何数据推送到 Undo 堆栈。

为简单起见，让我们看一个绘图程序。该过程直接适用于您的 OpenGL 应用程序。用户从 x1, y1 到 x2, y2 画一条线。该命令可以表示如下：

```
command = DrawLine
data = x1, y1, x2, y2 
```

您可能需要至少两个用于 Undo 数据的类，但它们会很小且易于实现。当用户想要撤消时，只需将顶部对象从撤消堆栈中弹出，查看它，然后执行相关的撤消操作（特定于每种类型的命令）。或者，您甚至可以在每个命令对象本身中包含撤消操作。然后将撤消命令推送到重做堆栈上。

这应该足以让你开始。高温高压

# c++ - 映射变得非常大后，Linux C++ 程序与 St9bad_alloc 崩溃

> ID：14873704
> 
> 赞同：3
> 
> 时间：2013-02-14T11:23:40.610
> 
> 标签：c++, linux, memory-management, map, bad-alloc

我正在运行一个涉及在 red hat linux 64 位上构建倒排索引的 C++ 程序。我的反转索引被定义为`map<unsigned long long int, map<int,int> > invertID;`并且我得到了这个错误，它随机崩溃，`what(): St9bad_alloc`每次崩溃都是不同的。有时，我有 100,000,000 个密钥，但它还能运行一段时间。有时，大约有 80,000,000 个键，它已经喊出了错误。

谷歌搜索，我发现这个错误可能来自`new`，但是看看我的代码，我没有使用任何`new`关键字，但是，我有这样的内存分配与 map。我继续在每次迭代中插入键/值对。`try` `catch`所以我决定用声明做一些实验。

实际上，这里是代码和输出的关键部分：

```
 map<unsigned long long int, map<int,int> >::iterator mainMapIt = invertID.find(ID);
    if (mainMapIt != invertID.end()){
    //if this ImageID key exists in InvID sub-map
        map<int,int> M = mainMapIt->second; // THIS IS LINE 174.
        map<int,int>::iterator subMapIt = M.find(imageID);
        if (subMapIt != M.end()){
        //increment the number of this ImageID key
            ++invertID[ID][imageID];
        }
        else{
        //add ImageID key with value 1 into the InvertID
            try{
                invertID[ID][imageID] = 1;
                ++totalPushBack;
            }catch (bad_alloc ba){
                cout << "CAUGHT 1: invertID[" << ID << "][" << imageID << endl;
            }
        }
    }
    else{
    //create the first empty map with the key as image ID with value 1 and put it in implicitly to the invertID
        try{
            invertID[ID][imageID] = 1;
        }catch (bad_alloc ba){
            cout << "CAUGHT 2: invertID[" << ID << "][" << imageID << endl;
        }
    } 
```

输出：

```
...
CAUGHT 2: invertID[21959247897][3856
CAUGHT 2: invertID[38022506156][3856
CAUGHT 2: invertID[29062506144][3856
terminate called after throwing an instance of 'std::bad_alloc'
  what():  St9bad_alloc 
```

我看到当我尝试插入新密钥时，会抛出错误。然而，在我用块`St9bad_alloc`盖住钥匙插入部分后，我得到了更多的惊喜。`try` `catch`我做了一点回溯，结果如下：

```
(gdb) backtrace
#0  0x000000344ac30265 in raise () from /lib64/libc.so.6
#1  0x000000344ac31d10 in abort () from /lib64/libc.so.6
#2  0x00000034510becb4 in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib64/libstdc++.so.6
#3  0x00000034510bcdb6 in ?? () from /usr/lib64/libstdc++.so.6
#4  0x00000034510bcde3 in std::terminate() () from /usr/lib64/libstdc++.so.6
#5  0x00000034510bceca in __cxa_throw () from /usr/lib64/libstdc++.so.6
#6  0x00000034510bd1d9 in operator new(unsigned long) () from /usr/lib64/libstdc++.so.6
#7  0x0000000000406544 in __gnu_cxx::new_allocator<std::_Rb_tree_node<std::pair<int const, int> > >::allocate (
    this=0x7fffffffdfc0, __n=1)
    at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/ext/new_allocator.h:88
#8  0x0000000000406568 in std::_Rb_tree<int, std::pair<int const, int>, std::_Select1st<std::pair<int const, int> >, std::less<int>, std::allocator<std::pair<int const, int> > >::_M_get_node (this=0x7fffffffdfc0)
    at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_tree.h:358
#9  0x0000000000406584 in std::_Rb_tree<int, std::pair<int const, int>, std::_Select1st<std::pair<int const, int> >, std::less<int>, std::allocator<std::pair<int const, int> > >::_M_create_node (this=0x7fffffffdfc0, __x=...)
    at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_tree.h:367
#10 0x00000000004065e3 in std::_Rb_tree<int, std::pair<int const, int>, std::_Select1st<std::pair<int const, int> >, std::less<int>, std::allocator<std::pair<int const, int> > >::_M_clone_node (this=0x7fffffffdfc0, __x=0x21c082bd0)
    at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_tree.h:381
#11 0x0000000000406634 in std::_Rb_tree<int, std::pair<int const, int>, std::_Select1st<std::pair<int const, int> >, std::less<int>, std::allocator<std::pair<int const, int> > >::_M_copy (this=0x7fffffffdfc0, __x=0x21c082bd0, __p=0x7fffffffdfc8)
    at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_tree.h:1226
#12 0x00000000004067e9 in std::_Rb_tree<int, std::pair<int const, int>, std::_Select1st<std::pair<int const, int> >, std::less<int>, std::allocator<std::pair<int const, int> > >::_Rb_tree (this=0x7fffffffdfc0, __x=...)
    at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_tree.h:570
#13 0x0000000000406885 in std::map<int, int, std::less<int>, std::allocator<std::pair<int const, int> > >::map (
    this=0x7fffffffdfc0, __x=...) at /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_map.h:175
#14 0x0000000000403039 in generateInvertID (pathToPF=0x6859a8 "/home/karl/c/000605.pf",
    pathToC=0x38c139ed8 "/home/karl/c/000605.c", imageID=3856)
    at InvertIndexGen.cpp:174
#15 0x0000000000403b46 in generateInvertIDForAllPFAndC () at InvertIndexGen.cpp:254
#16 0x0000000000403d0b in main (argc=1, argv=0x7fffffffe448) at InvertIndexGen.cpp:47
(gdb) 
```

在 #14，InvertIndexGen.cpp:174，在我上面的代码中，这是它崩溃的地方：

```
map<int,int> M = mainMapIt->second; // THIS IS LINE 174. 
```

似乎当我调用时`->second`，必须创建相应地图的副本。这应该也是原因`St9bad_alloc`。

但是在这种情况下，我可以在这里做些什么吗？毕竟，`invertID.max_size()`返回 18446744073709551615，而我只使用了大约 1 亿个密钥。我也从 中看到`top`，我的程序只使用了 10% 的内存。（我们有 128GB 内存）

我应该对这个错误采取哪些措施？我看到我的一些高级同事也在这样做，他们报告说，当他们的反转索引开始增长超过 70-80% 的内存时`top`，程序开始出现问题。但是我的程序只使用了 10%，那么这里发生了什么？我们可以做些什么来防止这个错误？

编辑：一些评论建议我检查一下`ulimit`，所以这里是：

```
-bash-3.2$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 1056768
max locked memory       (kbytes, -l) 32
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 1056768
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:36:23.850

`map<int,int> M = mainMapIt->second; // THIS IS LINE 174.`
此行将导致不必要的映射副本和内存分配。
更改参考会有所帮助。
`map<int,int> & M = mainMapIt->second; // THIS IS LINE 174.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:31:30.533

```
map<int,int> M = mainMapIt->second; // THIS IS LINE 174. 
```

复制你的第二个。

```
map<int,int>& M = mainMapIt->second; // THIS IS LINE 174. 
```

至少会有助于避免这个副本。

# asp.net-mvc-4 - MVC4 日期输入语言环境

> ID：14873716
> 
> 赞同：1
> 
> 时间：2013-02-14T11:24:14.860
> 
> 标签：asp.net-mvc-4

我想在 MVC4 中输入一个简单的日期字段，并且接受的日期格式应该基于我定义的语言环境（en-GB）。

我不想使用 jQuery 日期选择器或类似的东西。我只想注释我的`DateTime?`字段，使其接受 en-GB 日期格式的日期，并显示我从资源文件中选择的错误消息。

我在这里阅读了许多帖子并尝试了他们的建议但没有成功

我已将我的模型属性注释如下

```
[Display(Name = "DateOfBirthLabel", ResourceType = typeof(ApplicantResources))]
[DataType(DataType.Date, 
    ErrorMessageResourceName = "DateOfBirthValidation", 
    ErrorMessageResourceType = typeof(ApplicantResources)),            
    DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
public DateTime? DateOfBirth { get; set; } 
```

而且它

1.  不显示我希望它显示的错误消息
2.  不使用我想要的日期格式（它接受所有美国日期格式）

我还尝试编辑 Web 配置以确保为 UI 设置了区域设置

```
<system.web>
    <globalization culture="en-GB" uiCulture="en-GB"/>
</system.web> 
```

我认为这是一个相当基本的要求，但我无法弄清楚如何使用 MVC4 来做到这一点。它应该是微不足道的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:44:33.693

经过大量研究，我找到了正确的答案。看看这个[链接](https://stackoverflow.com/questions/8226514/best-place-to-set-currentculture-for-multilingual-asp-net-mvc-web-applications)。因此，只需摆脱您在 web.config 中添加的所有内容以及模型中的注释。

# asp.net-mvc - 如何防止页面被刷新？

> ID：14873724
> 
> 赞同：2
> 
> 时间：2013-02-14T11:24:34.860
> 
> 标签：asp.net-mvc, reload, page-refresh, asp.net-mvc-partialview

我的页面上有`DropDownList`一个提交按钮。`DropDownList`有来自数据库的数据列表，在从下拉列表中选择值然后单击提交按钮时，我在主视图页面的部分视图中获取所选下拉列表值的记录数。我的代码给出了正确的输出。我已经通过模型将视图绑定到控制器。使用 html.hiddenfor。但是每当我像往常一样点击提交按钮时，我的整个页面都会刷新。但我只需要刷新部分视图而不是整个页面。

这是我的代码，它工作正常。但是通过这段代码，我的整个页面都在刷新。我想阻止它。：

**看法：**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    MDLNoDDLIndex
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <script type="text/javascript">
        function TestFun() {
            var mdlno = $("#ddlMDLNo").val();
            var txtmdlno = document.getElementById("Request_For_Id");
            txtmdlno.value = mdlno;
        }
</script>

<div>
<h2>Search by MDLNo</h2>
     <% using (Html.BeginForm())
        { %>

        Select MDLno 

        <%= Html.DropDownList("ddlMDLNo", ViewData["MDLno"] as SelectList, "--Select One--", new { onchange = "TestFun()" })%> 
        <%: Html.HiddenFor(model => model.Request_For_Id) %> 

         <input type="submit" value="search" name="SearchMDLNo" id="btnclick" />    
    <% } %>
</div>
<div id="showtable">   //partial view
<% if (ViewBag.load == true)
   { %>
    <%Html.RenderAction("MDLNoDataList"); %>
<% } %>
</div>

</asp:Content> 
```

**控制器：**

```
// Search by mdl no
        public ActionResult MDLNoDDLIndex()
        {
            ViewData["MDLno"] = new SelectList(CRMSearchReportDL.getAllMDLno(), "Request_For_Id", "Request_For_Id");
            ViewBag.load = false;
            return View();
        }

        [HttpPost]
        public ActionResult MDLNoDDLIndex(CRM_Doctor_Request model)
        {
            ViewData["MDLno"] = new SelectList(CRMSearchReportDL.getAllMDLno(), "Request_For_Id", "Request_For_Id",model.Request_For_Id);
            ViewBag.load = true;
            return View();
        }

        public ActionResult MDLNoDataList()
        {
            List<CRM_Doctor_Request> drlist = new List<CRM_Doctor_Request>();
            return PartialView(drlist);
        }
        [HttpPost]
        public ActionResult MDLNoDataList(CRM_Doctor_Request model)
        {
            return PartialView(CRMSearchReportDL.getMDLNoWiseDetails(model.Request_For_Id));
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:47:53.347

您可以使用 jQuery 为您执行此操作。在 jQuery 中捕获表单提交，而不是通过浏览器执行完整的表单发布，而是使用 jQuery 的 .ajax() 方法将表单数据提交到控制器操作。

像这样的东西：

```
$.ajax({
    url: urlToControllerAction,
    data: {
        ddlMDLNo: ddlMDLNo,
        Request_For_Id: Request_For_Id
    },
    type: 'POST',
    success: function (results) {
         var partialData = $(results);
         $('#showtable').html(partialData);
    },
    error: function (xhr, ajaxOptions, thrownError) {
        // do something
    }
}); 
```

# android - Facebook 登录时出现 NoClassDefFoundError

> ID：14873725
> 
> 赞同：3
> 
> 时间：2013-02-14T11:24:36.650
> 
> 标签：android, facebook, android-facebook

我已经使用[这个教程制作了 FBLogin 演示](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

代码在这里 //MainActivity.java

```
package com.example.fbdemo;
import android.os.Bundle;
import android.app.Activity;
import com.facebook.*;
import com.facebook.model.*;
import android.widget.TextView;
import android.content.Intent;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

      // start Facebook Login
    Session.openActiveSession(this, true, new Session.StatusCallback() {

      // callback when session changes state
      @Override
      public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened()) {

          // make request to the /me API
          Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

            // callback after Graph API response with user object
            @Override
            public void onCompleted(GraphUser user, Response response) {
              if (user != null) {
                TextView welcome = (TextView) findViewById(R.id.welcome);
                welcome.setText("Hello " + user.getName() + "!");
              }
            }
          });
        }
      }
    });

}

 @Override
  public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
  }
} 
```

//main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/welcome"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="TextView" />

</RelativeLayout> 
```

//AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.fbdemo"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.fbdemo.MainActivity"
        android:label="@string/app_name" >
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="com.facebook.LoginActivity" />

    <meta-data
        android:name="com.facebook.sdk.ApplicationId"
        android:value="@string/app_id" />
</application>

</manifest> 
```

错误就是这个。

```
02-14 16:40:43.245: E/AndroidRuntime(6300): FATAL EXCEPTION: main
02-14 16:40:43.245: E/AndroidRuntime(6300): java.lang.NoClassDefFoundError:  com.example.fbdemo.MainActivity$1
02-14 16:40:43.245: E/AndroidRuntime(6300):     at com.example.fbdemo.MainActivity.onCreate(MainActivity.java:18)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at android.app.Activity.performCreate(Activity.java:4465)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at android.os.Looper.loop(Looper.java:137)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at java.lang.reflect.Method.invoke(Method.java:511)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-14 16:40:43.245: E/AndroidRuntime(6300):     at dalvik.system.NativeStart.main(Native Method) 
```

请给我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:00:41.287

android:name=".MainActivity" 不是问题。这只是您现在在清单中的简写符号（意思是：默认包中的 MainActivity 类，它已经是 com.example.fbdemo）。

实际上，从您的日志记录中可以看出，找不到的不是 MainActivity 类，而是 com.example.fbdemo.MainActivity$1。$1 的意思是（在这里给我一些绳子）“您在 MainActivity 中拥有的第一个匿名内部类”。从您的代码中，我认为可以安全地假设该类是您在调用 Session.openActiveSession() 时新建的 Session.StatusCallback()。

我不知道这门课，但它来自图书馆吗？如果是这种情况，您是否以正确的方式链接该库的 .jar 文件？它应该在您项目的“libs”目录中。在这种情况下，它应该与您的应用程序一起部署。如果你只是引用它，它只会在编译时可用（因此编译器不会抱怨），但 Android 的打包步骤不会将它包含在 .apk 文件中。

希望这可以帮助。

[编辑]当然，我可能对 $1 解析为 Session.StatusCallback() 有误。它也可能解析为 Request.GraphUserCallback()，它是代码中的另一个“匿名内部类”。你将不得不玩一下。也许它甚至会两者兼而有之；-)[/edit]

# performance - SharePoint 2010 中的 foreach 循环耗时过长

> ID：14873730
> 
> 赞同：0
> 
> 时间：2013-02-14T11:24:46.837
> 
> 标签：performance, sharepoint, collections, foreach

我正在尝试从 SharePoint 2010 中检索同义词，并且我的代码存在以下问题：它循环通过`keywordCollection`没有索引器的 a。执行 a`foreach`耗时太长，因为实例化一个新关键字大约持续 5-10 毫秒，到目前为止大约有 8000 个关键字，大约需要 80 秒才能完成。到目前为止我尝试过的事情：

*   获取枚举器 -> 也需要 80 秒

*   将集合转换为列表->由于未知原因而失败。

代码示例：

```
KeywordContext keywordContext = fastProxy.KeywordContext;
SearchSettingGroupCollection searchSettingGroupCollection = keywordContext.SearchSettingGroups;

foreach (SearchSettingGroup searchSettingGroup in searchSettingGroupCollection)
{
    if (searchSettingGroup.Name == siteId.ToString())
    {
        foreach (Keyword keyword in searchSettingGroup.Keywords)
        {
            //the rest of the work here, per total takes about 470ms
        }
    }
} 
```

有没有一种方法可以在不使用语句的情况下循环遍历集合，该语句每次都`foreach`实例化一个新的？`object<T>`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:05:27.553

尝试这个：

```
using (var site = new SPSite(siteCollectionUrl))
{
    // get the site ID
    var guid = site.ID.ToString();

    // code to get the fastProxy FASTAdminProxy

    KeywordContext keywordContext = fastProxy.KeywordContext;
    var ssgs = keywordContext.SearchSettingGroups;
    if (ssgs.ContainsSearchSettingGroup(guid))
    {
        var searchSettingGroup = ssgs.GetSearchSettingGroup(guid);
        foreach (var keyWord in searchSettingGroup.Keywords)
        {
            // do stuff with keyWord.Synonyms
        }
    }
} 
```

另外，虽然我目前无法测试它，但您可以尝试使用 [`Parallel`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.aspx)该类：

```
using System.Threading.Tasks;

// ...

Keyword[] array = new Keyword[searchSettingGroup.Keywords.Count];
searchSettingGroup.Keywords.CopyTo(array, 0);
Parallel.ForEach<Keyword>(array, keyword =>
{
    //do stuff here
}); 
```

# android - 当我使用 setText() 时，TextView 会改变大小

> ID：14873734
> 
> 赞同：2
> 
> 时间：2013-02-14T11:25:22.407
> 
> 标签：android

我有两个问题：

1）我有几个这样创建的 TextView

```
<TextView
    android:id="@+id/listaNumeriTextView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="#CCCCCC"
    android:gravity="center"/> 
```

当我调用 setText() 时，TextView 的大小会根据我的文本长度而变化。我试图调用 invalidate() 但我仍然有同样的问题。我该如何解决？

2）我想我可以根据屏幕大小设置我的 TextView 的宽度。例如，如果我在同一行上有 2 个 TextView，我可以这样做 textViewSize = screenSize/2\. 这是设置视图宽度的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:02:39.313

***1）对第一个问题的回应：*** 您可以使用特定`width`的`TextView`而不是`wrap_content`（如果您想将高度限制为 x 大小，则高度相同）：

```
<TextView
    android:id="@+id/listaNumeriTextView"
    android:layout_width="140dp"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="#CCCCCC"
    android:gravity="center"/> 
```

***2）对第二个问题的回应：*** 您可以使用`android:layout_weight`指定两者`TextViews`都应采用屏幕尺寸的一半，如下所示：

```
<LinearLayout bla bla 
   bla bla bla 
   android:orientation="horizontal"
   android:layout_width="match_parent"
   android:layout_height="wrap_content">
   <TextView
        android:id="@+id/txtView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#CCCCCC"
        android:text="TextView 1"/>
   <TextView
        android:id="@+id/txtView2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#CCCCCC"
        android:gravity="center"
        android:text="TextView 1"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:29:34.673

试试这个代码

```
LayoutParams params = aboutmetxt.getLayoutParams();
                params.width = 100;
                aboutmetxt.setLayoutParams(params); 
```

我用它来设置高度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:39:15.437

```
<TextView
    android:id="@+id/listaNumeriTextView"
    android:layout_width="XXX"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="#CCCCCC"
    android:gravity="center"/> 
```

XXX 指定要保留的宽度。它将是恒定的。例如：100dp

# python - 如何使用 wxpython 更改嵌入框架中的图像的坐标和大小？

> ID：14873735
> 
> 赞同：1
> 
> 时间：2013-02-14T11:25:29.447
> 
> 标签：python, wxpython, size, coordinate

我有一个关于使用 wxpython 更改图像坐标和大小的问题。

你能给我任何演示吗？

非常感谢。

下面是我的python程序，但它不起作用。

```
 image = 'resources/white_dot.png'

    bmp = wx.Bitmap(image, wx.BITMAP_TYPE_ANY)

    wx.StaticBitmap(self, -1, bmp, pos = event.GetPositionTuple()) 
```

# jquery - 站点游览代码提示未显示

> ID：14873740
> 
> 赞同：0
> 
> 时间：2013-02-14T11:25:34.970
> 
> 标签：jquery

我正在使用最初为早期版本的 jquery 编写的代码，我认为我已经正确更新但没有显示...我需要它与 1.8.3 一起使用

我已经设置了一个小提琴，因为这样可以更容易地看到它的实际效果：[fiddle](http://jsfiddle.net/darrensw/v4cAX/)

这是原始代码的来源：[旅游代码](http://tympanus.net/codrops/2010/12/21/website-tour/)

有任何想法吗？

这是jQuery：

```
$(function() {
            /*
            the json config obj.
            name: the class given to the element where you want the tooltip to appear
            bgcolor: the background color of the tooltip
            color: the color of the tooltip text
            text: the text inside the tooltip
            time: if automatic tour, then this is the time in ms for this step
            position: the position of the tip. Possible values are
                TL  top left
                TR  top right
                BL  bottom left
                BR  bottom right
                LT  left top
                LB  left bottom
                RT  right top
                RB  right bottom
                T   top
                R   right
                B   bottom
                L   left
             */
            var config = [
                {
                    "name"      : "tut10",
                    "bgcolor"   : "black",
                    "color"     : "white",
                    "position"  : "TL",
                    "text"      : "You can create a tour to explain the functioning of your app",
                    "time"      : 5000
                },
                {
                    "name"      : "tut20",
                    "bgcolor"   : "black",
                    "color"     : "white",
                    "text"      : "Give a class to the points of your walkthrough",
                    "position"  : "BL",
                    "time"      : 5000
                }

            ],
            //define if steps should change automatically
            autoplay    = false,
            //timeout for the step
            showtime,
            //current step of the tour
            step        = 0,
            //total number of steps
            total_steps = config.length;

            //show the tour controls
            showControls();

            /*
            we can restart or stop the tour,
            and also navigate through the steps
             */
            $('#activatetour').live('click',startTour);
            $('#canceltour').live('click',endTour);
            $('#endtour').live('click',endTour);
            $('#restarttour').live('click',restartTour);
            $('#nextstep').live('click',nextStep);
            $('#prevstep').live('click',prevStep);

            function startTour(){
                $('#activatetour').remove();
                $('#endtour,#restarttour').show();
                if(!autoplay && total_steps > 1)
                    $('#nextstep').show();
                showOverlay();
                nextStep();
            }

            function nextStep(){
                if(!autoplay){
                    if(step > 0)
                        $('#prevstep').show();
                    else
                        $('#prevstep').hide();
                    if(step == total_steps-1)
                        $('#nextstep').hide();
                    else
                        $('#nextstep').show();  
                }   
                if(step >= total_steps){
                    //if last step then end tour
                    endTour();
                    return false;
                }
                ++step;
                showTooltip();
            }

            function prevStep(){
                if(!autoplay){
                    if(step > 2)
                        $('#prevstep').show();
                    else
                        $('#prevstep').hide();
                    if(step == total_steps)
                        $('#nextstep').show();
                }       
                if(step <= 1)
                    return false;
                --step;
                showTooltip();
            }

            function endTour(){
                step = 0;
                if(autoplay) clearTimeout(showtime);
                removeTooltip();
                hideControls();
                hideOverlay();
            }

            function restartTour(){
                step = 0;
                if(autoplay) clearTimeout(showtime);
                nextStep();
            }

            function showTooltip(){
                //remove current tooltip
                removeTooltip();

                var step_config     = config[step-1];
                var $elem           = $('.' + step_config.name);

                if(autoplay)
                    showtime    = setTimeout(nextStep,step_config.time);

                var bgcolor         = step_config.bgcolor;
                var color           = step_config.color;

                var $tooltip = $('',{
                    id : 'tour_tooltip',
                    class : 'tooltip',
                    html : '+step_config.text+'
                    }).css({
                    'display' : 'none',
                    'background-color' : bgcolor,
                    'color' : color
                });

                //position the tooltip correctly:

                //the css properties the tooltip should have
                var properties      = {};

                var tip_position    = step_config.position;

                //append the tooltip but hide it
                $('BODY').prepend($tooltip);

                //get some info of the element
                var e_w             = $elem.outerWidth();
                var e_h             = $elem.outerHeight();
                var e_l             = $elem.offset().left;
                var e_t             = $elem.offset().top;

                switch(tip_position){
                    case 'TL'   :
                        properties = {
                            'left'  : e_l,
                            'top'   : e_t + e_h + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_TL');
                        break;
                    case 'TR'   :
                        properties = {
                            'left'  : e_l + e_w - $tooltip.width() + 'px',
                            'top'   : e_t + e_h + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_TR');
                        break;
                    case 'BL'   :
                        properties = {
                            'left'  : e_l + 'px',
                            'top'   : e_t - $tooltip.height() + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_BL');
                        break;
                    case 'BR'   :
                        properties = {
                            'left'  : e_l + e_w - $tooltip.width() + 'px',
                            'top'   : e_t - $tooltip.height() + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_BR');
                        break;
                    case 'LT'   :
                        properties = {
                            'left'  : e_l + e_w + 'px',
                            'top'   : e_t + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_LT');
                        break;
                    case 'LB'   :
                        properties = {
                            'left'  : e_l + e_w + 'px',
                            'top'   : e_t + e_h - $tooltip.height() + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_LB');
                        break;
                    case 'RT'   :
                        properties = {
                            'left'  : e_l - $tooltip.width() + 'px',
                            'top'   : e_t + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_RT');
                        break;
                    case 'RB'   :
                        properties = {
                            'left'  : e_l - $tooltip.width() + 'px',
                            'top'   : e_t + e_h - $tooltip.height() + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_RB');
                        break;
                    case 'T'    :
                        properties = {
                            'left'  : e_l + e_w/2 - $tooltip.width()/2 + 'px',
                            'top'   : e_t + e_h + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_T');
                        break;
                    case 'R'    :
                        properties = {
                            'left'  : e_l - $tooltip.width() + 'px',
                            'top'   : e_t + e_h/2 - $tooltip.height()/2 + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_R');
                        break;
                    case 'B'    :
                        properties = {
                            'left'  : e_l + e_w/2 - $tooltip.width()/2 + 'px',
                            'top'   : e_t - $tooltip.height() + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_B');
                        break;
                    case 'L'    :
                        properties = {
                            'left'  : e_l + e_w  + 'px',
                            'top'   : e_t + e_h/2 - $tooltip.height()/2 + 'px'
                        };
                        $tooltip.find('span.tooltip_arrow').addClass('tooltip_arrow_L');
                        break;
                }

                /*
                if the element is not in the viewport
                we scroll to it before displaying the tooltip
                 */
                var w_t = $(window).scrollTop();
                var w_b = $(window).scrollTop() + $(window).height();
                //get the boundaries of the element + tooltip
                var b_t = parseFloat(properties.top,10);

                if(e_t < b_t)
                    b_t = e_t;

                var b_b = parseFloat(properties.top,10) + $tooltip.height();
                if((e_t + e_h) > b_b)
                    b_b = e_t + e_h;

                if((b_t < w_t || b_t > w_b) || (b_b < w_t || b_b > w_b)){
                    $('html, body').stop()
                    .animate({scrollTop: b_t}, 500, 'easeInOutExpo', function(){
                        //need to reset the timeout because of the animation delay
                        if(autoplay){
                            clearTimeout(showtime);
                            showtime = setTimeout(nextStep,step_config.time);
                        }
                        //show the new tooltip
                        $tooltip.css(properties).show();
                    });
                }
                else
                //show the new tooltip
                    $tooltip.css(properties).show();
            }

            function removeTooltip(){
                $('#tour_tooltip').remove();
            }

            function showControls(){
                /*
                we can restart or stop the tour,
                and also navigate through the steps
                 */
                var $tourcontrols  = '<div id="tourcontrols" class="tourcontrols">';
                $tourcontrols += '<p>First time here?</p>';
                $tourcontrols += '<span class="button" id="activatetour">Start the tour</span>';
                    if(!autoplay){
                        $tourcontrols += '<div class="nav"><span class="button" id="prevstep" style="display:none;">< Previous</span>';
                        $tourcontrols += '<span class="button" id="nextstep" style="display:none;">Next ></span></div>';
                    }
                    $tourcontrols += '<a id="restarttour" style="display:none;">Restart the tour</span>';
                    $tourcontrols += '<a id="endtour" style="display:none;">End the tour</a>';
                    $tourcontrols += '<span class="close" id="canceltour"></span>';
                $tourcontrols += '</div>';

                $('BODY').prepend($tourcontrols);
                $('#tourcontrols').animate({'right':'30px'},500);
            }

            function hideControls(){
                $('#tourcontrols').remove();
            }

            function showOverlay(){
                var $overlay    = '<div id="tour_overlay" class="overlay"></div>';
                $('BODY').prepend($overlay);
            }

            function hideOverlay(){
                $('#tour_overlay').remove();
            }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:27:21.317

[从文档中](http://api.jquery.com/live/)：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

* * *

你的小提琴有一个js错误：

`Uncaught TypeError: Object #<Object> has no method 'easeInOutExpo'`

这表明您忘记包含某种[jQuery Easing 插件](http://gsgd.co.uk/sandbox/jquery/easing/)。

# c# - 使用 Chilkat 上传文件的问题

> ID：14873744
> 
> 赞同：1
> 
> 时间：2013-02-14T11:25:52.793
> 
> 标签：c#, .net, sftp, chilkat

我正在尝试使用 sftp 将文件上传到服务器。我已经下载并安装了 Chilkat，我正在下载文件没有任何问题。但是当我尝试将文件上传到服务器时，我没有收到错误说明正在上传文件。当我检查响应消息时，它显示“文件上传成功 1”，其中一个为**真**，但文件没有上传到服务器。

这是我的代码：

```
 public void UploadAndMoveFile()
        {
            bool success = false;
            string path = @"\\geodis\";
            string archive = @"\\Archive\";
            string[] files = Directory.GetFiles(path);
            if (files.Count() == 0)
            {
//no files
            }

            foreach (string file in files)
            {
                string fileName = Path.GetFileName(file);
                string fileSource = path + fileName;
                string fileDestination = archive + fileName;
                string handle;
                string ftp = @"\IN\"+fileName;
                handle = sftp.OpenFile(ftp, "writeOnly", "createTruncate");
                if (handle == null)
                {
                    Console.WriteLine(sftp.LastErrorText);
                    return;
                }
                success = sftp.UploadFile(handle, fileSource);
                if (success == true)
                {
                    AppendLogFile("Uploading File Succeeded", "Uploade File", fileName);
                    System.IO.File.Move(fileSource, fileDestination);
                    AppendLogFile("Moving File Succeeded", "Moving File", fileName);
                }
                else
                {
                   // no files
                }
            }
        } 
```

谁能帮我找出我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:44:02.673

发现问题，在上传方法中我有句柄变量而不是 ftp 变量。

这是解决方案：

```
public void UploadAndMoveFile()
        {
            bool success = false;
            string path = @"\\geodis\";
            string archive = @"\\Archive\";
            string[] files = Directory.GetFiles(path);
            if (files.Count() == 0)
            {
//no files
            }

            foreach (string file in files)
            {
                string fileName = Path.GetFileName(file);
                string fileSource = path + fileName;
                string fileDestination = archive + fileName;
                string handle;
                string ftp = @"\IN\"+fileName;
                handle = sftp.OpenFile(ftp, "writeOnly", "createTruncate");
                if (handle == null)
                {
                    Console.WriteLine(sftp.LastErrorText);
                    return;
                }
                success = sftp.UploadFile(ftp, fileSource);
                if (success == true)
                {
                    AppendLogFile("Uploading File Succeeded", "Uploade File", fileName);
                    System.IO.File.Move(fileSource, fileDestination);
                    AppendLogFile("Moving File Succeeded", "Moving File", fileName);
                }
                else
                {
                   // no files
                }
            }
        } 
```

# xcode - 无法在情节提要中启用自动布局

> ID：14873747
> 
> 赞同：2
> 
> 时间：2013-02-14T11:26:11.083
> 
> 标签：xcode, autolayout

我有一个在自动布局出现之前创建的项目。我的项目有两个故事板——一个主要的（相当复杂，10 多个屏幕）和一个次要的（只有几个屏幕）。我正在尝试为我的项目启用自动布局，但无法为主情节提要。

我正在访问文件检查器，然后选中 Interface Builder Document 面板中的“Use Autolayout”复选框。虽然这对于辅助情节提要效果很好，但当我单击主要情节提要的复选框时，我将获得沙滩球几秒钟（之前为空的复选框变为“-”），然后显示锁定 HUD 并且复选框返回未选中状态。我找不到任何关于此的文档 - 锁指的是什么？我的屏幕上确实有很多锁定的视图，我应该在转换情节提要之前解锁它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T16:37:13.723

对我来说，帮助“使用自动布局”复选框下方的“重置锁定控件”。比转换有效！

# python - 运行 ffmpeg 时 Popen.communicate() 仅返回 err

> ID：14873754
> 
> 赞同：3
> 
> 时间：2013-02-14T11:26:31.247
> 
> 标签：python, ffmpeg, subprocess

我正在尝试从 python 运行 ffmpeg 并获得一些合理的输出。不管 ffmpeg 的日志级别设置了什么，我从 Popen.communicate() 得到的唯一输出是错误的。但是，内容不是错误。我尝试了相同的代码来运行其他命令（ls），并且输出和错误输出似乎都可以。

我检查了这里和谷歌，不幸的是什么也没找到。大多数示例使用 os 或 commands 模块，而不是子进程。

这是我的测试代码：

```
command = [
        'ffmpeg',
        '-v', 'debug',
        '-i', '1.mov',
        '-vcodec', 'libx264',
        '-profile:v', 'high',
        '-preset', 'slower',
        '-b:v', '1000k',
        '-vf', 'scale=-1:720',
        '-threads', '0', 
        '-acodec', 'libfdk_aac',
        '-b:a', '192k',
        '-y',   
        '2.mp4',
        ]
p = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
out, err =  p.communicate()
f = open('out.log', 'w')
f.write(out)
f.close()
f = open('error.log', 'w')
f.write(err)
f.close() 
```

你见过这样的事情吗？我做错了什么还是ffmpeg中有错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:35:55.537

在 ffmpeg 的情况下，我似乎误解了 stdout 和 stderr 。所有“控制台输出”通常都指向标准错误。将 stderr 重定向到 stdout 将解决该问题。这是如何：

```
p = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.STDOUT) 
```

抱歉……我太专注于 Python 部分，完全忽略了非常明显的事情。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:51:52.250

默认情况下`ffmpeg`，将日志记录到 stderr，即，您会看到预期的行为。

要将命令的 stderr 输出保存到文件中，您不需要`.communicate()`：

```
import subprocess 

with open("stderr.log", "wb") as logfile:
    subprocess.check_call(command, stderr=logfile) 
```

# android - 在不重新加载活动的情况下更改 Android 中的屏幕方向

> ID：14873755
> 
> 赞同：32
> 
> 时间：2013-02-14T11:26:32.863
> 
> 标签：android, screen-orientation

我想在运行我的 Android 应用程序时以编程方式更改方向，使用以下代码行：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);  
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE); 
```

它们到目前为止工作，但主要问题是当屏幕方向改变时重新加载整个活动，我不希望那样。可能吗？谢谢。

**编辑：好的，在我发现我错过了什么之后。我还必须在 configChanges 属性中包含“screenSize”，所以有**

```
android:configChanges="orientation|screenSize" 
```

**解决了整个事情。**

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-07-22T23:30:40.533

请参阅@luisfer 的编辑。对于面向 Android 3.2 及更高版本，您需要 BOTH

```
android:configChanges="orientation|screenSize" 
```

[http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T11:28:24.233

您需要覆盖 onSaveInstanceState(Bundle savedInstanceState) 并将要更改的应用程序状态值写入 Bundle 参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T11:34:25.753

在 AndroidManifest 文件中添加`android:configChanges="orientation"`要处理此方向的活动

在活动中使用 onConfigurationChange 覆盖的方法。做你想在方向改变中处理的任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T11:37:40.400

在这里回答：

[Android，当我旋转设备时如何不破坏活动？](https://stackoverflow.com/questions/3329318/android-how-to-not-destroy-the-activity-when-i-rotate-the-device)

添加：

`android:configChanges="orientation"`

到你的 androidmanifest。

看：

[http://developer.android.com/guide/topics/manifest/activity-element.html#config](http://developer.android.com/guide/topics/manifest/activity-element.html#config)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-01T08:53:00.450

调用此方法并设置清单文件

```
android:configChanges="orientation|screenSize|keyboardHidden"

public void onConfigurationChanged(Configuration newConfig) {
     super.onConfigurationChanged(newConfig);

        // Checks the orientation of the screen
        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
            Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
        }
    } 
```

# php - GET 请求不起作用

> ID：14873762
> 
> 赞同：0
> 
> 时间：2013-02-14T11:26:58.867
> 
> 标签：php, jquery

我正在尝试通过 jquery 记录链接单击以执行 php 文件，但没有任何事情发生。

```
$('#click').click(function(){
    $.get("record.php", { id: "a" }, function(data){});
}); 
```

关联

```
<a id='click' href='http://some link' target='_blank'>Start Download</a> 
```

记录

```
<?php

include 'db.php';

if (isset($_GET['id']))
{
    mysql_query("INSERT INTO clicks VALUES ('','','','','')");
} 
```

从文件本身运行 php 效果很好，但从 jquery 却没有

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:30:12.367

尝试这个：

```
$('#click').click(function(e){
    e.preventDefault();
    $.get("record.php", { id: "a" }, function(data){});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:30:30.027

在您的锚标记中，您不必指定`href`

```
<a id='click' href='#'>Start Download</a>

$('#click').click(function(){
    $.get("record.php", { "id": "a" }, function(data){
       // Place here some logic (if you wish to do after getting your data from record.php

       window.location.href = 'your_url.php';
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:32:38.420

尝试这个 ：

将您更改 `<a id='click' href='http://some link' target='_blank'>Start Download</a>` 为： `<a id='click' href='javascript:void(0);'>Start Download</a>`

改变了href

在 jQuery 中：

```
$('#click').click(function(){
    $.get("record.php", { id: "a" }, function(data){
        //some code here
    }).done(function() { window.location.href ='http://some link'; });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T11:31:13.353

如果您想将数据作为 json 对象传递并使用回调，请尝试

```
$.get("test.cgi", { name: "John", time: "2pm" }).done(function(data) {
       alert("Data Loaded: " + data);
}); 
```

来自：[http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# spring - 观察者模式.. spring 事件与 java ee6 事件观察者模式

> ID：14873766
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:27:19.510
> 
> 标签：spring, jakarta-ee

我需要在java中实现一个观察者模式，

而且我对春季事件非常熟悉。但是我最近被介绍给 java ee 6 观察者模式。

我注意到spring让它看起来更容易，但它没有我们的异步能力，我必须配置一个执行器......然后我所有的事件都是异步的......

无论如何在春天有一些事件是异步的，有些是同步的......

java ee 6 观察者模式的实现是否比 springs 更好？...它允许这样做吗，有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:31:29.033

**在春天，您必须创建异步运行器。**

# c++ - Boost Asio：当 async_read 在同一个套接字上挂起时调用同步读取

> ID：14873771
> 
> 赞同：4
> 
> 时间：2013-02-14T11:27:27.493
> 
> 标签：c++, networking, network-programming, boost-asio

我不断地从带有`async_read()`. 但是，在某些事件中，我必须通过同一个套接字同步发送数据，并在除上述事件处理程序之外的事件处理程序中等待 ACK（也是同步`async_read`的）。我正在等待同步`read()`调用中的 ACK。（请不要说我不是在谈论`async_read_some`和`read_some`）。

在后台挂起时`read()`调用同步是否可以？`async_read()`

是否有可能`async_read()`已经在其内部缓冲区中收到了一半消息，而我的同步`read()`将与下半部分一起返回？

我怎样才能优雅地取消/挂起`async_read()`（没有任何数据丢失），所以我可以`read()`同时安全地调用同步？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:29:13.963

你可能不会那样做。

来自 boost doc 的引用：

> 此操作通过对流的 async_read_some 函数的零次或多次调用来实现，称为组合操作。程序必须确保流不执行其他读取操作（例如 async_read、流的 async_read_some 函数或执行读取的任何其他组合操作），直到此操作完成。

由于plain`boost::asio::read`也是一个组合读取操作，这可能会调用UB。

为了优雅地停止您`async_read`可以调用[`cancel`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_stream_socket/cancel/overload2.html)(*)，但在混合异步和正常操作时应该考虑您的设计。我建议从`async_read`-callback 处理程序发送 ACK。

(*) 请注意，取消有一些缺点，如链接中所述。一种是例如`cancel 可能会被忽略。

# api - 请求有效负载不存在于 PUT 请求中

> ID：14873774
> 
> 赞同：1
> 
> 时间：2013-02-14T11:27:33.253
> 
> 标签：api, node.js, rest, put, iisnode

实现一个 REST API 服务器，当捕获 PUT 请求时，消息体为空

服务器：Windows Server Web SP2 IIS：版本 7.0.6000.16386 节点 v0.8.16 iisnode v0.2.2

测试代码：

```
var server = http.createServer(function (request, response) {
    var data = '';
    request.on('data', function (chunk) {
        data += chunk;
        console.log(data)
    });
    request.on("end", function(){
        response.writeHead(200, { 'Content-Type': 'application/json' });
        response.end(data);
    });
}); 
```

# html - 将 div 块设置为 100% 高度

> ID：14873776
> 
> 赞同：0
> 
> 时间：2013-02-14T11:27:38.007
> 
> 标签：html, css, height

我有这样的标记：

```
<html>
<body>
  <div class="page">
      <div class="top_menu">
        some text
      </div>
      <div class='header'>
         menu
      </div>
      <div class="main">
          <div class="left_sidebar">
             left
          </div>
          <div class="content">
             left
          </div>
          <div class="right_sidebar">
             right
          </div>
      </div><!-- main div -->
   </div> <!-- page div -->
</body>
</html> 
```

我需要将块设置`.main`为 100% 页面高度，这是我的 css：

```
html {
    height: 100%;
}
body {
    height: 100%;
    min-height: 100%;
    margin: 0;
    padding: 0;
}
.page {
    height: 100%;
    min-height: 100%;
    background-color: white;
    margin: 0 auto;
    padding: 0;
    width: 1084px;
}
.main {
  width: 1084px;
  height: 100%; // not working
}
.left_sidebar {
  float: left;
  max-width: 197px;
  height: auto;
}
.content {
  width: 517px;
  float: left;
}
.right_sidebar {
  width: 359px;
  float: right;
} 
```

现在里面的文本`.main`显示在块之外，在 Chrome 中我可以看到这个块的宽度是 1084，但高度是 0。我知道这个问题可能已经被问过了，但我想我错过了一些东西。

通过互联网搜索尝试了[此](https://stackoverflow.com/questions/373643/css-centering-a-page-then-making-the-page-100-height)解决方案，对我不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:39:07.883

尝试使用这个[http://jsfiddle.net/7cZMh/2/](http://jsfiddle.net/7cZMh/2/)

**HTML**

```
<html>
<body>
  <div class="page">
      <div class="top_menu">
        some text
      </div>
      <div class='header'>
         menu
      </div>
      <div class="main">
          <div class="left_sidebar">
             left
          </div>
          <div class="content">
             left
          </div>
          <div class="right_sidebar">
             right
          </div>
      </div><!-- main div -->
   </div> <!-- page div -->
</body>
</html> 
```

**CSS**

```
html{
    min-height: 100%;
    position: relative;
}
body{
    height: 100%;
    overflow: hidden; // hide overflow
}
.page{
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background: maroon;
}
.main {
    height: 100%;
    background: black;
    overflow: auto; // restore overflow
} 
```

糟糕，忘记了这个。

```
.left_sidebar {
  float: left;
  max-width: 197px;
  height: auto;
}
.content {
  width: 517px;
  float: left;
}
.right_sidebar {
  width: 359px;
  float: right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:34:36.390

在页面加载后使用 javascript 给出高度

给 id 给 div

```
<div class="page" id="myDiv">
....
</div> 
```

并在关闭 body 标记之前添加此脚本。

```
<script type="text/javascript">
document.getElementById("myDiv").style.height=screen.height;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:35:20.070

将您的 HTML 和 Body 标签合并为一个并删除 min-height 似乎可以解决它：

```
html, body { height:100%; margin:0; padding:0; } 
```

[JSF](http://jsfiddle.net/UAFNt/)中。

如果您不想要滚动条，则可以使用 CSS3`border-box`属性并弄乱边距和填充，如下所示：[new JSFiddle](http://jsfiddle.net/GFcBU/)。这应该适用于所有现代浏览器（不低于 IE8.0）。

# xcode - png 到 xcode 的图标集

> ID：14873779
> 
> 赞同：0
> 
> 时间：2013-02-14T11:27:47.817
> 
> 标签：xcode, macos, icons, osx-mountain-lion

我有一个`png`并且想`icon file`为我的`xcode app`. 经过长时间的搜索，我发现它`mountain lion`不再有`icon composer`，我应该使用它`iconutil`。问题是，`iconutil`据我了解，exepcts 图标文件，但我只有一个 png 文件。我只有 3 周的 mac，所以我在这里很容易混淆。从 png 文件开始为我的应用程序构建图标的正确方法是什么？（我也可以从 .ico 文件开始）

有人可以解释或指出一个好的教程吗？

谢谢

最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:42:36.440

最后，我使用了一个名为“picture2icon”的免费应用程序，您可以在应用程序商店中找到。

# java - html:option 中的 JSTL 对象

> ID：14873781
> 
> 赞同：1
> 
> 时间：2013-02-14T11:27:52.373
> 
> 标签：java, html, jsp, jstl, struts

我想创建一个包含从 00 到 59 的数字的保管箱。

在网页上，它工作得很好，它就像我想要的那样显示，但是当我从表单中获取分钟元素时，`getMinutes()`我得到的是字符串`"${i.id}"`而不是所需的数字。

这是我的代码：

```
<html:select property="minutes">
  <c:forEach var="i" begin="0"  end="59" step="1">
     <c:if test="${ i < 10 }">
        <html:option value="${i}"><c:out value="0${i}"  /></html:option>
     </c:if>
     <c:if test="${ i >= 10 }">
        <html:option value="${i}"><c:out value="${i}" /></html:option>
     </c:if>
  </c:forEach>
</html:select> 
```

我也尝试过下面的代码，但它也不起作用。

```
 <html:option value='<c:out value="${i}" />'></html:option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:41:24.257

`minutes`如果您在操作表单上有属性的 getter 和 setter，这很好用

```
public Long getMinutes() {
    return minutes;
}

public void setMinutes(Long minutes) {
    this.minutes= minutes;
} 
```

它也应该适用于整数类型。

# php - 如何在 javascript 函数中传递 2 个 PHP 变量？

> ID：14873782
> 
> 赞同：1
> 
> 时间：2013-02-14T11:28:04.423
> 
> 标签：php, javascript

如何在 javascript 函数中传递 2 个 PHP 变量？

这个正在工作

```
 echo '<button onClick = "count('.$increment.')">'.$counter.' </button>'; 
```

但是当我这样做时

```
 echo '<button onClick = "count('.$increment.','.$pass.')">'.$counter.' </button>'; 
```

它不起作用，有什么问题？

顺便说一下，这些是变量：

```
 $increment=5;
    $pass="sdfgd"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:44:12.427

试试这哥们......

```
<button onClick = "count('<?php echo $increment ?>','<?php echo $pass ?>')"><?php echo $counter ?></button> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:48:32.510

```
echo '<button onClick = "count('.$increment.',\''.$pass.'\')">'.$counter.' </button>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T11:31:15.753

如果`$pass`完全包含`"sdfgd"`并且完全包含我的意思是双引号包含，则这不再是有效的语句，因为您的解析器会“为时过早”找到双引号，并且它们将关闭`onClick`事件属性

变量展开后：

```
echo '<button onClick = "count('5','"sdfgd"')">'.$counter.' </button>';
-------------------------------------^ 
```

看看箭头

# 编辑

但是，如果您使用[firebug 之](https://getfirebug.com/)类的工具（如果您运行 firefox），则可以轻松调试代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:31:38.830

生成的 HTML 代码应如下所示：

```
<button onClick = "count(5,sdfgd)">5 </button> 
```

变量 sdfgd 很可能是未定义的，因此未定义被传递给您的函数。

如果要传递字符串，则必须使用引号，以便生成的 HTML 如下所示：

```
<button onClick = "count(5,'sdfgd')">5 </button> 
```

# asterisk - Vicidial，dispo 调用 url 不起作用

> ID：14873783
> 
> 赞同：0
> 
> 时间：2013-02-14T11:28:04.653
> 
> 标签：asterisk

我正在使用 vicidial 2.6b0.5 星号 1.8

我将 dispo-call-url 设置为：`http://<ip_address>/test.php?lead_id=--A--lead_id--B--&dispo=--A--dispo--B--&phone_number=--A--phone_number--B--`

在填写所有信息字段后调用代理处置时，不会调用此 URL。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-20T20:50:10.603

在 url 之前添加“VAR”，如下所示：

```
VARhttp://servernameorip/pagename.php?leadid=--A--lead_id--B--&dispo=--A--dispo--B-- 
```

# objective-c - 具有相同对象键的 NSDictionary

> ID：14873789
> 
> 赞同：-3
> 
> 时间：2013-02-14T11:28:28.363
> 
> 标签：objective-c, nsdictionary

我有一个带有数组 A1 的 NSDictionary：a,b,c,d,e,f 和 A​​2:1,1,1,2,2,3

我想获取键 1 的对象

我用了：

```
[dicitonay objectsForKey: @"1"]; 
```

但我只得到 1 个对象，如何获取所有对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:16:15.480

如果您的字典包含两个数组，当您执行“objectForKey”时，将返回其中一个数组（单个数组对象）。在不查看您的实际代码的情况下，您现在应该有一个数组对象。您可以使用典型的数组方法来访问数组内的对象。

# android - 我没有解析来自网络的 json 数据

> ID：14873791
> 
> 赞同：0
> 
> 时间：2013-02-14T11:28:43.953
> 
> 标签：android, json, web-services, parsing

我在 android 中制作了一个用于 JSON 解析的简单应用程序，我尝试从该 JSON Web 服务的 url 解析 JSON 数据并希望在 listView 中查看它，但我不知道为什么它不起作用，我已经尝试过以下代码。

**主.java**

```
package com.example.newjsondemo;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.R.string;
import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class MainActivity extends ListActivity {
private static String url= "http://api.geonames.org/postalCodeLookupJSON?postalcode=6600&country=AT&username=demo";

private static final String TAG_POSTALCODES = "postalcode";
private static final String TAG_ADMINNAME1 = "adminName1";
private static final String TAG_ADMINNAME2 = "adminName2";
private static final String TAG_ADMINNAME3 = "adminName3";  
private static final String TAG_ADMINCODE1 = "adminCode1";
private static final String TAG_ADMINCODE2 = "adminCode2";
private static final String TAG_ADMINCODE3 = "adminCode3";
private static final String TAG_PLACENAME = "placeName";
private static final String TAG_POSTALCODE = "postalcode";
private static final String TAG_LNG = "lng";
private static final String TAG_LAT = "lat";
private static final String TAG_COUNTRY_CODE = "countryCode";

JSONArray postalcodes = null;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Hashmap for ListView
                ArrayList<HashMap<String, String>> postalList = new ArrayList<HashMap<String, String>>();
                Jsonparser jParser = new Jsonparser();
                JSONObject json = jParser.getJSONFromUrl(url);

                try{
                    postalcodes = json.getJSONArray(TAG_POSTALCODES);

                        for(int i=0;i<postalcodes.length();i++)
                        {
                        JSONObject p = postalcodes.getJSONObject(i);
                        // Storing each json item in variable
                        String adminname1 = p.getString(TAG_ADMINNAME1);
                        String adminname2 = p.getString(TAG_ADMINNAME2);
                        String adminname3 = p.getString(TAG_ADMINNAME3);
                        String admincode1 = p.getString(TAG_ADMINCODE1);
                        String admincode2 = p.getString(TAG_ADMINCODE2);
                        String admincode3 = p.getString(TAG_ADMINCODE3);
                        String postalcode = p.getString(TAG_POSTALCODE);
                        String countrycode = p.getString(TAG_COUNTRY_CODE);
                        String placename = p.getString(TAG_PLACENAME);
                        String lng = p.getString(TAG_LNG);
                        String lat = p.getString(TAG_LAT);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put(TAG_ADMINNAME1,adminname1);
                        map.put(TAG_COUNTRY_CODE, countrycode);
                        map.put(TAG_PLACENAME, placename);
                        postalList.add(map);
                    }
                }catch (JSONException e) {
                    e.printStackTrace();
                }

                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(this, postalList, R.layout.activity_list_item, 
                        new String[] { TAG_ADMINNAME1, TAG_COUNTRY_CODE, TAG_PLACENAME}, new int[] {
                        R.id.adminname1, R.id.countrycode, R.id.placename});
                setListAdapter(adapter);

                // selecting single ListView item
                ListView lv = getListView();
                lv.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> arg0, View view,
                            int position, long id) {
                        // TODO Auto-generated method stub
                        // getting values from selected ListItem
                    //  String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                        String adminname1 = ((TextView)view.findViewById(R.id.adminname1)).getText().toString();
                        String countrycode= ((TextView)view.findViewById(R.id.countrycode)).getText().toString();
                        String placename= ((TextView)view.findViewById(R.id.placename)).getText().toString();
                        // Starting new intent
                        Intent in = new Intent(getApplicationContext(), SIngleListItem.class);
                        in.putExtra(TAG_ADMINNAME1, adminname1);
                        in.putExtra(TAG_COUNTRY_CODE, countrycode);
                        in.putExtra(TAG_PLACENAME, placename);
                        //in.putExtra(TAG_ADDRESS, address);
                        //in.putExtra(TAG_GENDER, gender);
                        startActivity(in);
                    }

                });

}

} 
```

**JsonParser.java**

```
 package com.example.newjsondemo;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class Jsonparser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public Jsonparser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }

} 
```

**日志猫**

```
02-14 17:07:04.411: E/Buffer Error(1932): Error converting result java.lang.NullPointerException
02-14 17:07:04.411: E/JSON Parser(1932): Error parsing data org.json.JSONException: End of input at character 0 of 
02-14 17:07:04.421: D/AndroidRuntime(1932): Shutting down VM
02-14 17:07:04.421: W/dalvikvm(1932): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-14 17:07:04.431: E/AndroidRuntime(1932): FATAL EXCEPTION: main
02-14 17:07:04.431: E/AndroidRuntime(1932): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.jsonmydemo/com.example.jsonmydemo.MainActivity}: java.lang.NullPointerException
02-14 17:07:04.431: E/AndroidRuntime(1932):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at android.os.Looper.loop(Looper.java:123)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at android.app.ActivityThread.main(ActivityThread.java:4627)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at java.lang.reflect.Method.invoke(Method.java:521)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at dalvik.system.NativeStart.main(Native Method)
02-14 17:07:04.431: E/AndroidRuntime(1932): Caused by: java.lang.NullPointerException
02-14 17:07:04.431: E/AndroidRuntime(1932):     at com.example.jsonmydemo.MainActivity.onCreate(MainActivity.java:51)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-14 17:07:04.431: E/AndroidRuntime(1932):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-14 17:07:04.431: E/AndroidRuntime(1932):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:33:11.627

您没有考虑过下载 JSON 数据的延迟。您只需调用`JSONObject json = jparser.getJSONFromURL(url);`希望数据会在下一行 ( `postalcodes = json.getJSONArray(TAG_POSTALCODES);`) 出现。它不是那样工作的。

首先，您需要加载 JSON 数据并等待它完成。您应该熟悉[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)才能正确执行此操作。然后在您的类中调用回调，`MainActivity`将检索到的数据返回给它。然后您应该使用该数据并构建您的适配器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T11:32:26.547

```
HttpClient httpClient = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(registerUrl);
                StringBuffer jsonString = new StringBuffer();
                try{
                    HttpResponse httpResponse = httpClient.execute(httpGet);
                    InputStream in = httpResponse.getEntity().getContent();
                    int ch = 0;
                    while ((ch = in.read()) != -1) {
                        jsonString.append((char) ch);
                    }
                    in.close();
                    JSONObject jsonObject = new JSONObject(jsonString.toString());
                    JSONArray jArray = jsonObject.getJSONArray("results");
                    int arraysize = jArray.length();
                        for (int i = 0; i < arraysize; i++){
                            JSONObject one = jArray.getJSONObject(i);
                            LogMsg.i("Confirm "+one.getString("ConfirmationMessage")+ " UserId "+one.getString("UserID")+ " userName "+one.getString("UserName")+" Email "+one.getString("Email"));
                            if (one.getString("ConfirmationMessage").equals("Account Created")){
                                isUserRegister = true;
                            }
                        }
                    }catch (Exception e) {} 
```

# symfony - FOSUserBundle 中的全局参数

> ID：14873792
> 
> 赞同：0
> 
> 时间：2013-02-14T11:28:49.010
> 
> 标签：symfony, fosuserbundle

我尝试检索我在 parameters.yml 和 config.yml 中定义的全局参数

在注册下的 FOSUserBundle.en.yml 中，在消息中我尝试传递 %myparam% 并在我的 email.txt 中尝试像这样传递 %myparam%:param

```
{{ 'registration.email.message'|trans({'%username%': user.username, '%confirmationUrl%': confirmationUrl,'%myparam%':myparam}, 'FOSUserBundle') }} 
```

但它不起作用。我可以在 yml 和新行中插入 html 吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:33:35.317

在 fosuserbundle 配置下的 config.yml 中。

```
confirmation:
    enabled:    true
    template:   MYMailBundle:Registration:email.html.twig 
```

通过这样做，您正在创建一个 twig 模板，您可以在其中呈现您的变量并按照您的需要格式化您的 html。

如果你想在你的 yml 文件中创建一个换行符，我想你可以通过添加一个 \n 来做到这一点。

# blackberry-10 - 在 BB10 虚拟机上安装二进制文件时出现错误

> ID：14873796
> 
> 赞同：0
> 
> 时间：2013-02-14T11:29:00.133
> 
> 标签：blackberry-10, blackberry-cascades

![在此处输入图像描述](../Images/dc694d07e235087baca63c8b959a186f.png)

大家好，我正在使用 BB _10.0.09，安装
二进制文件时出现错误，请查看随附的屏幕截图。收到错误消息：“找不到 qmake 配置目录在设置 MAKEFILE_GENERATOR 之前找不到 qmake 配置文件使用 OS 范围”
请建议我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:38:37.720

我从这个链接 [http://supportforums.blackberry.com/t5/Native-Development/BB10-Native-Cascades-SDK-not-connecting-to-Alpha-BB10-simulator/td-p/1719865/page得到了一个解决方案/5](http://supportforums.blackberry.com/t5/Native-Development/BB10-Native-Cascades-SDK-not-connecting-to-Alpha-BB10-simulator/td-p/1719865/page/5)

原因..我没有设置开发模式，默认情况下它设置为 Device -Debug ，当我将其更改为 Simulator-Debug 它工作正常..

# android - 在Android中更改程序中的样式项

> ID：14873798
> 
> 赞同：1
> 
> 时间：2013-02-14T11:29:03.563
> 
> 标签：android, textview, android-styles

我有一个带有以下代码的styles.xml：

```
<resources>
     <style name="general_font" parent="@android:style/TextAppearance"> 
        <item name="android:textSize">12sp</item>
    </style>
</resources> 
```

我也有一个布局（general_layout.xml），其中包括一个文本视图

```
<TextView 
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:text="@string/text1"
   style="@style/general_font"/> 
```

现在，在我的活动中，在内容准备好之前，我想根据屏幕高度更改 general_font 样式中的 textSize。

所以这是我的活动课：

```
public class GeneralActivity extends Activity{

    public void onCreate(Bundle savedInstanceState){        
        super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            scaleTextSize(getHeightOfScreen());
            setContentView(R.layout.general_layout);

    }

    private int getHeightOfScreen(){
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        return metrics.heightPixels;
    }

    public void scaleTextSize(int height){

        if(height<=320){
            // Change textSize item of general_font style
        }
        else if(height<=480){
            // Change textSize item of general_font style
        }
        else if(height<=800){
            // Change textSize item of general_font style
        }
        else{
            // Change textSize item of general_font style
        }
    }
} 
```

是否可以 ？？谢谢大家的建议。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:41:29.467

我们在评论中讨论的总结答案：

我会为不同的屏幕尺寸创建不同的样式，并使用布局文件（/res/layout）中的样式。如下所述区分布局文件：[Android Developer Docs about Supporting multiple screensizes](http://developer.android.com/guide/practices/screens_support.html)

如果您不想做太多，那么为您需要的每个屏幕布局使用一个主题。主题适用于您的整个应用程序/活动。定义样式的主题将位于 /res/values 文件夹中。例如 /res/values-h800dp。请参阅此问题以了解与您类似的问题：[Use different theme based on if device is android tablet or phone](https://stackoverflow.com/questions/8148749%20/use-different-theme-depending-on-if-device-is-android-tablet-or-phone)。我没有在代码中手动执行此操作的经验。这就是为什么我的答案最初出现在评论中。

# java - android字符串中的getattribute值

> ID：14873803
> 
> 赞同：1
> 
> 时间：2013-02-14T11:29:31.717
> 
> 标签：java, android, getattribute

我必须开发 android xml 解析示例。

在这里我必须获取属性值...

这是获取ID的代码：

```
private int id;
public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
} 
```

在这里，我得到了 int 的 arrtibute 值：

```
 for (int i = 0; i < nodeList.getLength(); i++) {
        Element e = (Element) nodeList.item(i);

            Employee employee = new Employee();

           employee.setId(Integer.parseInt(e.getAttribute(ATTR_ID))); 
```

好的，它做得很好..

现在我必须获取字符串的 artibute 值...

```
private String name;
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
} 
```

我怎么才能得到它 ？？？

请给我这些代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:43:18.993

好吧，您的问题中缺少许多重要信息，但是假设 name 字段和 getter/setter 方法位于 Employee 对象中，并且 name 属性与 id 属性存在于同一节点上，那么以下代码应该管用：

```
for (int i = 0; i < nodeList.getLength(); i++) 
{
    Element e = (Element) nodeList.item(i);
    Employee employee = new Employee();
    employee.setId(Integer.parseInt(e.getAttribute(ATTR_ID)));
    employee.setName(e.getAttribute(NAME)));
    ...
} 
```

# c# - 为什么这会引发空引用异常？

> ID：14873820
> 
> 赞同：1
> 
> 时间：2013-02-14T11:30:17.553
> 
> 标签：c#

有人可以告诉我为什么这会引发空引用异常（对象引用未设置为对象的实例）。我的代码读取一个简单的 xml 文件，然后应该将 2 个元素中的文本传递给另一个方法。但是在 foreach 循环的第一行抛出异常：

请原谅我的无知，我是新人。:)

```
private void openProjectToolStripMenuItem_Click(object sender, EventArgs e)
{
    //I have to pass 'this' (which is Form1) when creating the Projects (Form2) in order for them to understand / see each other      
    Projects myProjects = new Projects(this); 

    //displays the Form 2 (called Projects)
    myProjects.Show(); 

    XmlDocument xdoc = new XmlDocument();
    xdoc.Load("O:\\TestDaws\\projects.xml");

    string projList = "/Projects/Project";
    XmlNodeList xprojects = xdoc.SelectNodes(projList);

    foreach (XmlNode xNodeName in xprojects)
    {
        string projectname = xNodeName.SelectNodes("/ProjectName")[0].InnerText.ToString();
        string projecttype = xNodeName.SelectNodes("/ProjectType")[0].InnerText.ToString();
        myProjects.buildProjectList(projectname, projecttype);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:37:59.647

`SelectNodes("/ProjectName")`改成`SelectNodes("./ProjectName")`. _ （`/ProjectType`当然同上）

`/ProjectName`将始终从根中选择，而不是从您调用它的节点中选择。`./`从当前节点开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:36:11.353

这意味着它`xprojects`是 **null**。
请您发布您的 projects.xml 文件内容。

问候，
奥马尔

# sql-server - 网络备份有时会失败。Ms Sql 2012 标准服务包 1

> ID：14873821
> 
> 赞同：0
> 
> 时间：2013-02-14T11:30:26.813
> 
> 标签：sql-server, sql-server-2012

有时在执行网络备份时备份失败并出现以下错误：

> 执行查询“BACKUP DATABASE [xxxx] TO [xxxx Backup] W...”失败并出现以下错误：“无法打开备份设备 'xxxx Backup(\\ab.cd.ef.gh\Backups1\Database_Backups\yyyy\ xxxx.bak)'。操作系统错误 5（访问被拒绝。）。备份数据库异常终止。"。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。

它通常会发生但有时会成功的问题。我有另一台具有 ms sql 2008 标准的服务器，这不会发生在同一个网络共享上。

ms sql 2012 标准服务包 1 有问题吗？（除了Service Pack 1，我没有安装任何额外的更新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:15:22.397

对我来说，这听起来像 SQL 服务器工作正常，但它在备份期间的某个时刻失去了与网络共享的连接，或者网络共享响应缓慢（可能是由于网络上或同一驱动器上同时发生的其他活动）。

在开始深入 SQL 2012 查找问题之前，我将首先在 SQL 2012 之外查找可能存在问题的区域。

例如，网络层是否有任何差异，然后向后工作，即它是否与 SQL 2008 服务器在同一个子网中，还是 SQL 2012 实例必须遍历不同的子网和网关才能到达同一个网络共享？网卡软硬件配置是否与 SQL 2008 实例相同或相似？

备份的同时是否有大量网络流量？即网络是否能够应对通过它抽送的负载。一个简单的测试方法是更改​​ SQL 2012 备份的时间（如果可能）以尝试增加成功的规律性。

一旦清除了导致错误的这些位，那么我将开始查看 SQL Server - 如果到目前为止这些点没有帮助，请更新此线程，我将更多地讨论我将如何解决这个问题。

可能值得检查是否已报告有关 Microsoft SQL 2012 SP1 的任何错误。请让我知道你的进展情况:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:20:06.847

You cannot back up databases to a network drive if your account have not sufficient permissions to access the network drive. Please visit this link ([http://support.microsoft.com/kb/207187](http://support.microsoft.com/kb/207187))

I hope it helps you.

# wcf - 在 IIS 上使用 MSMQ 协议配置 WCF 服务 - URI 无效：无法解析主机名

> ID：14873822
> 
> 赞同：1
> 
> 时间：2013-02-14T11:30:28.820
> 
> 标签：wcf, iis, msmq, wcf-binding

我正在尝试使用已配置的端点在 IIS（IIS7、Windows 7）上设置 WCF 服务，并且与 IIS 配置一样，这是一个充满伤害的世界。该服务在 VS2010 的调试器下工作正常，但是当我开始部署它时，我在打开时收到以下消息`http://localhost:9000/MyApplication/_vti_bin/ListData.svc`：

```
[UriFormatException: Invalid URI: The hostname could not be parsed.]
  System.Runtime.AsyncResult.End(IAsyncResult result) +650220
  System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +210733
  System.Web.AsyncEventExecutionStep.OnAsyncEventCompletion(IAsyncResult ar) +166 
```

有趣的是，如果我刷新它，消息会发生变化：

```
[ArgumentException: An item with the same key has already been added.]
   System.Runtime.AsyncResult.End(IAsyncResult result) +650220
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +210733
   System.Web.AsyncEventExecutionStep.OnAsyncEventCompletion(IAsyncResult ar) +166 
```

我认为第二个错误是第一个错误的结果，所以我试图先找到它。

现在，我知道您在想什么：“在这个关头看到一个又长又无聊的 Web.Config 文件真是太好了。” 你的愿望就是我的命令：

```
<?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="loggingenabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="SecurityBehavior" name="MSMQSecuredService.SecuredMSMQService">
        <endpoint address="net.msmq://MyMachine/private/securedqueue"
          binding="netMsmqBinding" bindingConfiguration="SecuredBinding"
          name="EndpointMSMQ" contract="MSMQSecuredService.ISecuredMSMQService">
          <identity>
            <dns value="MyMachine" />
          </identity>
        </endpoint>
<!-- I have tried configuring the endpoint address to everything from the full path to this "/" with no change in outcome -->
        <endpoint address="/" binding="basicHttpBinding" name="EndPointHTTP"
          contract="MSMQSecuredService.ISecuredMSMQService" />
        <endpoint address="mex" binding="mexHttpBinding" name="EndPointIMEX"
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://MyMachine:9000/MyApplication" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="SecurityBehavior">
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="True"/>
          <serviceCredentials>
            <serviceCertificate findValue="CertServer" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName"/>
            <clientCertificate>
              <certificate findValue="CertClient" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName"/>
              <authentication certificateValidationMode="None"/>
            </clientCertificate>
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <netMsmqBinding>

        <binding name="SecuredBinding" exactlyOnce="false" receiveErrorHandling="Fault">
          <security mode="Message">
            <message clientCredentialType="Certificate"/>
          </security>
        </binding>
      </netMsmqBinding>

    </bindings>
  </system.serviceModel>

  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

显然，我已经努力混淆确切的机器、应用程序和端口名称，所以如果那里有轻微的不匹配，可能不是问题。

在 IIS 上，我已将站点上的绑定配置为包含 net.msmq - 我对该问题的最佳猜测是“绑定信息”不正确 - 如果我将其设置为当前机器的机器名称，我会收到上述消息，如果我将它设置为“localhost”，它给了我一个 ASP.Net 服务器错误，事件日志和 WCF 跟踪文件中出现以下内容：

```
The service '/MyApplication/_vti_bin/ListData.svc' does not exist. ---> System.ServiceModel.EndpointNotFoundException: The service '/MyApplication/_vti_bin/ListData.svc' does not exist. 
```

我猜它抱怨的 URI 可能是绑定信息中的主机名，但我找不到任何关于它需要什么的信息，或者如果`localhost`正确，如何深入研究问题。

编辑添加：启用 WCF 跟踪后，我看到发生以下模式：

```
<Description>MsmqActivation service started scan for queues.</Description>
<AppDomain>/LM/W3SVC/2/ROOT/MyApplication-1-130053972428149879</AppDomain> 
```

然后

```
<Description>Throwing an exception.</Description><AppDomain>/LM/W3SVC/2/ROOT/My-Application-1-130053972428149879</AppDomain>
<Exception>
  <ExceptionType>System.ServiceModel.EndpointNotFoundException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The service '/MyApplication/_vti_bin/ListData.svc' does not exist.</Message><StackTrace>   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.EnsureServiceAvailableFast(String relativeVirtualPath, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
   at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
   at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
   at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace><ExceptionString>System.ServiceModel.EndpointNotFoundException: The service '/MyApplication/_vti_bin/ListData.svc' does not exist.</ExceptionString>
</Exception> 
```

最后我们看到这个：

```
<Description>MsmqActivation service cannot discover queues.</Description>
<AppDomain>/LM/W3SVC/2/ROOT/MyApplication-1-130053250352242318</AppDomain>
<ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/DictionaryTraceRecord">
  <Host>.</Host>
  <PublicQueues>True</PublicQueues>
</ExtendedData>
<Exception>
  <ExceptionType>System.Messaging.MessageQueueException, System.Messaging, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</ExceptionType>
  <Message>A workgroup installation computer does not support the operation.</Message>
  <StackTrace>
  at System.Messaging.MessageQueue.GetMachineId(String machineName)
  at System.Messaging.MessageQueueCriteria.set_MachineName(String value)
  at System.Messaging.MessageQueue.GetPublicQueuesByMachine(String machineName)
  at System.ServiceModel.Channels.MsmqBindingMonitor.OnTimer(Object state)
  </StackTrace>
  <ExceptionString>System.Messaging.MessageQueueException (0x80004005): A workgroup installation computer does not support the operation.
     at System.Messaging.MessageQueue.GetMachineId(String machineName)
     at System.Messaging.MessageQueueCriteria.set_MachineName(String value)
     at System.Messaging.MessageQueue.GetPublicQueuesByMachine(String machineName)
     at System.ServiceModel.Channels.MsmqBindingMonitor.OnTimer(Object state)
  </ExceptionString>
</Exception> 
```

现在这个最后的异常看起来可能是最具指示性的——当我试图写入的队列是时，系统似乎正在寻找一个*公共*`./private$/MyApplication`队列——那么我需要改变什么以将其指向正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T14:44:52.373

我有同样的问题，并在这里找到了解决方案 - [http://vijayvepak.blogspot.ru/2012/09/an-item-with-same-key-has-already-been.html](http://vijayvepak.blogspot.ru/2012/09/an-item-with-same-key-has-already-been.html) 解决方案：转到 IIS，转到webapp的网站。右键单击 -> 编辑绑定 确保 net.msmq 协议的绑定信息设置为 localhost

它对我们有这个错误的所有工作站都有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T20:44:22.870

IIS 只支持 Http 协议。如果您需要使用 MSMQ，您必须选择其他选项，例如 WAS 或自托管（win forms、WPF 或 Win 服务）。在下表中，您可以找到每个 WCF 托管选项支持的功能。

![在此处输入图像描述](../Images/8d79a9104b65f64780176bb1804df138.png)

# java - 在java中通过IP地址获取国家名称

> ID：14873825
> 
> 赞同：0
> 
> 时间：2013-02-14T11:30:33.617
> 
> 标签：java

我想通过在 java 中给出 IPAdress 来获取国家/地区名称。例如 192.168.0.1 。我想获得国家名称而不是主机名。请解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T11:33:09.300

有许多地理定位提供商，例如这个免费的：

[http://freegeoip.net/static/index.html](http://freegeoip.net/static/index.html)

这个免费允许每小时最多 1000 次查找。

如果你访问例如： http: [//freegeoip.net/json/124.168.50.23](http://freegeoip.net/json/124.168.50.23)查找地址，你会发现我在澳大利亚：

`{"city": "Sydney", "region_code": "02", "region_name": "New South Wales", "areacode": "", "ip": "124.168.50.23", "zipcode": "", "longitude": 151.2055, "country_name": "Australia", "country_code": "AU", "metrocode": "", "latitude": -33.8615}`

请注意，您使用的示例 IP 地址 (192.168.0.1) 来自保留范围（它始终在您的本地网络上），因此您无法为其查找国家/地区：

`{"city": "", "region_code": "", "region_name": "", "areacode": "", "ip": "192.168.0.1", "zipcode": "", "longitude": "", "country_name": "Reserved", "country_code": "RD", "metrocode": "", "latitude": ""}`

# sharepoint-2007 - 恢复当前的 Sharepoint 页面

> ID：14873827
> 
> 赞同：0
> 
> 时间：2013-02-14T11:30:35.060
> 
> 标签：sharepoint-2007, sharepoint-designer

我已经使用 Sharepoint 设计器修改了一个 aspx 页面，现在我无法重新打开页面。
每次我尝试时，我都会在下面收到错误消息。从其他搜索看来，SPD 文件已损坏，并且不会再次打开它。但是，我可以将其作为文本文件打开，但看不到或不知道什么是损坏的。

谁能建议我如何解决这个问题，否则这意味着我只有一次更改来更改页面，坦率地说这是垃圾。

```
Problem Event Name:         APPCRASH  
Application Name:           SPDESIGN.EXE  
Application Version:        12.0.6606.1000  
Application Timestamp:      4e2f96b3  
Fault Module Name:          ntdll.dll  
Fault Module Version:       6.1.7601.17725  
Fault Module Timestamp:     4ec49b8f  
Exception Code:             c015000f  
Exception Offset:           00084621  
OS Version:                 6.1.7601.2.1.0.256.1  
Locale ID:                  2057 
```

有关该问题的其他信息：

```
LCID:                       1033
Brand:                      Office12Crash
skulcid:                    1033 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:45:55.007

能不能做一件事

1.  浏览 SharePoint 网站以找到网站操作。
2.  单击站点操作，然后单击站点设置。
3.  在“站点设置”页面上，单击“外观”选项下的“重置为站点定义”。
4.  在“将页面重置为站点定义版本”页面上，键入页面的 URL，然后单击“重置”。

让我知道这是否对您有帮助。

# python - 将变量引用到自身是否可以接受？

> ID：14873828
> 
> 赞同：0
> 
> 时间：2013-02-14T11:30:39.877
> 
> 标签：python, google-app-engine

例如

```
 blob_info = upload_files[0]
    blob_info = blob_info.key() 
```

或者这样做会更好吗

```
 blob_info = (upload_files[0]).key() 
```

我更喜欢将内容拆分以使它们更具可读性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:32:54.520

```
blob_info = upload_files[0]
blob_key = blob_info.key() 
```

对我来说更有意义。或者事件更好，只需`blob_info.key()`在需要时参考。

# tomcat - 在 tomcat 中 unpackWARs 的权衡

> ID：14873829
> 
> 赞同：0
> 
> 时间：2013-02-14T11:30:41.373
> 
> 标签：tomcat

Tin Tomcat 有一个设置[unpackWARs](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Standard_Implementation)来爆炸 WAR 或者只是从未爆炸的 WAR 中运行。这里有什么权衡？为什么要选择拆包还是选择不拆包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:26:22.117

我可以想到以下区别：

*   启动时间。打开包装会延迟几秒钟。这显然在过去（九十年代末？）设计此功能时产生了更大的影响。
*   磁盘空间。同样，这在九十年代后期可能会产生更大的影响。
*   能够在解包后自定义文件（通过 webapp 本身或通过外部脚本）——如果文件被分解，这会容易*得多。*
*   捡垃圾。如果 .war 已爆炸，部署同一 web 应用程序的另一个版本可能会错过清理文件夹。

*我认为，如今在企业世界中提供整个堆栈*更为常见， 这意味着公司不仅提供`.war`s，还提供应用程序服务器（例如 Tomcat）甚至整个磁盘映像（不一定是 .iso，也可以也可以是 EC2 图像）。所以它的意义`unpackWARs`已经减弱了。

# javascript - 为什么只有在刷新后才在第一页加载时调用函数？

> ID：14873842
> 
> 赞同：0
> 
> 时间：2013-02-14T11:31:39.013
> 
> 标签：javascript, jquery, jquery-mobile

我已经搜索过，但我找不到这个问题的解决方案。由于某种原因，第一次加载页面时不会调用函数，只有在刷新页面后才会调用它。例子：

```
function init() {

    alert("hello");
} 
```

使用以下方法调用函数：

```
$(window).load(function () {

    init();

}); 
```

或在正文标签内：

```
<body onLoad="init()"> 
```

此外，当我直接打开页面时，不会出现此问题，仅当我从另一个页面链接到该页面时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:12:21.330

已解决，必须在加载 jquery.mobile 之前设置移动选项。

```
<script language=javascript>
    $(document).bind("mobileinit", function () {
        $.mobile.ajaxLinksEnabled = false;
        $.mobile.ajaxEnabled = false;
    });
</script>   
<script src="scripts/jquery.mobile-1.2.0.js"></script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T11:35:57.740

尝试以下方式：

```
function init() {
    alert('Hello!');
}

window.onload(function() {
    init();
} 
```

# android - 使用 proguard 和 ANT 时 ${out.classes.dir} 不存在

> ID：14873847
> 
> 赞同：2
> 
> 时间：2013-02-14T11:31:48.360
> 
> 标签：android, android-build

[嗨，我在这里](http://android-developers.blogspot.in/2010/09/proguard-android-and-licensing-server.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20blogspot/hsDu%20%28Android%20Developers%20Blog%29)使用以下链接 ，但我遇到了这个错误。我花了几个小时发现它可以在 local.properties 或 project.properties 中手动设置，但我不知道如何。..我能得到帮助吗？？？？否则我可以构建发布版本，但添加 add-proguard-release.xml 会显示错误

这是详细的消息

构建失败 D:\MyProject\add-proguard-release.xml:14: D:\MyProject\${out.classes.dir} 不存在。

# icons - 希望根据上下文为 Dynamics CRM 实体使用不同的图标

> ID：14873849
> 
> 赞同：3
> 
> 时间：2013-02-14T11:31:57.170
> 
> 标签：icons, dynamics-crm-2011, dynamics-crm, sitemap

我有一个自定义实体，与联系人有 N:1 关系，与客户有另一个 N:1 关系。基本上，它是一个链接实体，用于促进联系人和帐户之间的多对多关系，并添加一些额外的信息。

因此，现在 Account 表单和 Contact 表单在其左侧导航栏中都有指向这些加入实体列表的链接，但两者都显示相同的图标。

我想要在每个表单上显示不同的图标（理想情况下，帐户表单上的联系人图标和联系人表单上的帐户图标）。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:56:57.673

我不确定我是否理解你的问题。你想改变系统实体的形象吗？不支持，但如果您只想更改站点地图中的图标，只需将大小为 24x24 的图像上传到 WebResources 并使用 sitemap.xml 文件中的相对 url。

# windows-phone-7 - Windows Phone - 从 7.8 升级到 8

> ID：14873850
> 
> 赞同：0
> 
> 时间：2013-02-14T11:31:57.640
> 
> 标签：windows-phone-7, windows-phone-8

我想将我开发的 7.8 应用程序更新到 8。下载 SKD 8 后，我必须应用哪些更改？只是将版本设置为8吗？

我如何处理维护旧版本？是否只是复制文件夹并将其中一个更新为 8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:03:14.087

只需打开解决方案，右键单击项目 -> 升级到 Windows Phone 8.0。但请注意，您的项目将无法在 Windows Phone 7 上运行！您需要 2 个不同的项目，一个用于 WP7，一个用于 WP8。

# php - php嵌套引号错误

> ID：14873852
> 
> 赞同：0
> 
> 时间：2013-02-14T11:32:02.553
> 
> 标签：php, nested, quotes

我需要您的帮助来修复那些向我返回错误的报价，例如：

> 解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING

这是我的代码：

```
$HTML_footer.='<option value="general" '($sr && ! $cf['form_ok'] && $cf['posted_form_data']['enquiry'== 'Ventes']) ? "selected='selected'" : ''  '>general</option> '; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:36:48.133

请使用以下代码

```
$value = "";
if($sr && ! $cf['form_ok'] && $cf['posted_form_data']['enquiry'== 'Ventes']){
$value = "selected='selected'";
}

$HTML_footer.="<option value='general' $value>general</option> "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:35:48.720

T_CONSTANT_ENCAPSED_STRING 解析器标记错误是由于意外引用或缺少引用而发生的。首先检查条件是否满足，然后以这种方式选择它：

```
 if ( $sr && (!$cf['form_ok']) && ($cf['posted_form_data']['enquiry' == 'Ventes'])) {
    $HTML_footer = "<option value='general' selected='selected'>general</option> ";
 } 
```

我希望它会有所帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T11:37:50.020

你错过了你试图连接在一起的各种字符串之间的点。PHP 使用点作为连接字符串的运算符。

此外，三元运算符需要用括号括起来，以防止它产生歧义。

通过这些更正，您的代码行现在看起来像这样：

```
$HTML_footer.='<option value="general" ' . (($sr && ! $cf['form_ok'] && $cf['posted_form_data']['enquiry'== 'Ventes']) ? "selected='selected'" : '') . '>general</option> '; 
```

但是一个建议：尝试将三元运算符从字符串中移出到单独的代码行中。这样会更具可读性：

```
$isSelected = ($sr && ! $cf['form_ok'] && $cf['posted_form_data']['enquiry'== 'Ventes']);
$selected = $isSelected ? "selected='selected'" : '';
$HTML_footer.='<option value="general" '.$selected.'>general</option> '; 
```

仍然没有出色的可读性，但比以前好多了。

# r - R按最常见的排序

> ID：14873860
> 
> 赞同：0
> 
> 时间：2013-02-14T11:32:09.040
> 
> 标签：r

这可能非常简单，但是，我有一个短语向量，其中一些重复，其中一些不重复，我想要一个独特短语的列表，按最常出现的排序。

例如

```
vec <- c("hello","hi","hi","greetings","good day", "hi", "hello", "good day","good morning","hello","good day")

sort(unique(vec))

[1] "good day"     "good morning" "greetings"    "hello"        "hi" 
```

我希望首先是“hi”，然后是“hello”，然后是“good day”等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:33:59.437

只需使用`sort(table(vec))`：

```
sort(table(vec), decreasing=TRUE)
# vec
#     good day        hello           hi good morning    greetings 
#            3            3            3            1            1 
```

# c# - 如何在 C# 中获取或设置任意类型的对象

> ID：14873862
> 
> 赞同：0
> 
> 时间：2013-02-14T11:32:11.670
> 
> 标签：c#, object, casting, generic-collections

我有一个类可以充当“模型提供者”。基本上这是它应该做的：

`ModelProvider`创建几个对象，例如 a和`Project`a `User`。这里的想法是，我可以从我的应用程序的任何部分调用`ModelProvider`来获取最新的`User`或`Project`. 此外，我可以从应用程序的任何部分将更新的`User`或推`Project`送到`ModelProvider`.

简短：`ModelProvider`应该是托管 和 的最新实例的`User`类`Project`。

**草案**

```
class ModelProvider {
  private User user;
  private Project project;

  public ModelProvider() {
    this.user = new User();
    this.project = new Project();
  }

  public void SetModel(T model) {
    // If 'model' is of type User, do something like: this.user = model;
    // If 'model' is of type Project, do something like: this.project = model;
  }

  public T GetModel(???) {
    // Return the requested model. Either:
    // return this.user; or
    // return this.project;
  }

} 
```

但是我不知道如何实际获取和设置请求的模型。任何帮助表示赞赏:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:36:40.240

你正在尝试做的事情看起来很奇怪。一种可能更好的方法是提供指定的方法，但这取决于您实际尝试实现的目标：

*   `void SetUser(User user)`
*   `User GetUser()`
*   `void SetProject(Project project)`
*   `Project GetProject()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:42:16.973

你可以使它成为一个通用类：

```
class ModelProvider<T>  // (optionally) where T: baseClassOfUserAndProject
{
    private T model;

    public void SetModel(T model) 
    {
        this.model = model;
    }

    public T GetModel() 
    {
        return this.model;
    }
} 
```

# c# - 在打印时隐藏两列 GridView Asp.net

> ID：14873865
> 
> 赞同：0
> 
> 时间：2013-02-14T11:32:17.950
> 
> 标签：c#, asp.net, gridview

```
 function printform() {
        var printContent = document.getElementById("<%= PrintPanelID.ClientID %>");

        var windowUrl = "about:blank";
        var uniqueName = new Date();
        var windowName = "Print" + uniqueName.getTime();
        var printWindow = window.open(windowUrl, windowName, "left=50000,top=50000,width=0,height=0");
        printWindow.document.write(printContent.innerHTML);
        printWindow.document.close();
        printWindow.focus();
        printWindow.print();
        printWindow.close();
    }

    function HidColumn() {

        // col_num = document.getElementById("Button").value;
        rows = document.getElementById("<%= GV1.ClientID %>").rows;
        for (i = 0; i < rows.length; i++) {
            rows[i].cells[8].style.display = "none";
        }

        for (j = 0; j < rows.length; j++) {
            rows[j].cells[9].style.display = "none";
        }
    }

    // change logic to suit taste
    function clicked() {
        var b = HidColumn();
        if (b)
            printform()
        return b;
    }

  <asp:ImageButton ID="ImageButton2" runat="server" ImageAlign="Right" ImageUrl="images/printer.jpg"
                    Style="margin-left: 5px; margin-right: 15px" OnClick="ImageButton2_Click" Width="36px"
                    OnClientClick="return clicked()" Visible="false" /> 
```

**但是，当我单击 ImageButton 时什么也没有发生**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:44:28.540

正如我所说，我同意史蒂夫的回答，您应该修改您的函数 HidColumn 以返回真或假。还有一点我想提一下，如果您从 clicked() 返回 false`postback`则不会发生，否则它将`ImageButton2_Click`在服务器上调用事件。

```
function HidColumn() {

        // col_num = document.getElementById("Button").value;
        rows = document.getElementById("<%= GV1.ClientID %>").rows;
        for (i = 0; i < rows.length; i++) {
            rows[i].cells[8].style.display = "none";
        }

        for (j = 0; j < rows.length; j++) {
            rows[j].cells[9].style.display = "none";
        }
        if(someCondition)return true;
         else return false;
    } 
```

**更新：-** 您已将控件可见性设置为 False ，因此不会呈现控件。因此，您无法在 javascript 中获取元素，因为该控件将没有 HTML。如果您想隐藏控件，只需使用 Javascript：-

```
<asp:somecontrol id="ctrl" style="display:none" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T07:13:54.873

只需将您的隐藏列代码放在打印函数中，如下所示：

```
function PrintPage() {

        rows = document.getElementById("<%= Gv1.ClientID %>").rows;
        for (i = 0; i < rows.length; i++) {
            rows[i].cells[8].style.display = "none";
            rows[i].cells[9].style.display = "none";
        }
        var printContent = document.getElementById('<%= pnlDtls.ClientID %>');
        var printWindow = window.open("All Records", "Print Panel", 'left=50000,top=50000,width=0,height=0');
        printWindow.document.write(printContent.innerHTML);
        printWindow.document.close();
        printWindow.focus();
        printWindow.print();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:36:12.940

这行没有意义： `var b = HidColumn();`

函数 HidColumn 不返回任何内容。

# ruby-on-rails - 使用简单表单将数据属性添加到自定义包装器

> ID：14873868
> 
> 赞同：3
> 
> 时间：2013-02-14T11:32:27.387
> 
> 标签：ruby-on-rails, simple-form

我为 simple_form 创建了一个自定义包装器，但似乎找不到将数据属性添加到生成的包装器元素的方法。我正在尝试将其添加到名为 switch 的内部包装类中。

我希望能够将它添加到包装器中，如果可能的话不在视图层中。

```
config.wrappers :toggle, :tag => 'div', :class => 'control-group', :error_class => 'error' do |b|
  b.use :html5
  b.use :placeholder
  b.use :label
  b.wrapper :tag => 'div', :class => 'controls' do |ba|
    ba.wrapper :tag => 'div', :class => 'switch' do |box|
      box.use :input
    end
    ba.use :hint,  :wrap_with => { :tag => 'span', :class => 'help-block' }
    ba.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
  end
end

= form.input :element, :label => t('views.items.attributes.element'), :wrapper => :toggle 
```

**输出**

```
<div class="control-group boolean optional">
  <label class="boolean optional control-label" for="item_element">Element</label>
  <div class="controls">
    <div class="switch">
      <input name="item[element]" type="hidden" value="0">
      <input class="boolean optional" id="item_element" name="item[element]" type="checkbox" value="1">
    </div>
  </div>
</div> 
```

**期望的输出**

```
<div class="control-group boolean optional">
  <label class="boolean optional control-label" for="item_element">Element</label>
  <div class="controls">
    <div class="switch" data-label="blah" data-id="something">
      <input name="item[element]" type="hidden" value="0">
      <input class="boolean optional" id="item_element" name="item[element]" type="checkbox" value="1">
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-21T21:02:46.260

[@Learner 的答案](https://stackoverflow.com/a/14874037/171183)很接近。诀窍是包含一个`html`哈希：

```
ba.wrapper tag: 'div', 
           html: { data: { id: 'something', label: 'blah' }, 
           class: 'switch' do |box|
  box.use :input
end 
```

注意：此方法适用于`<builder>.wrapper`方法，但不适用于`config.wrappers`,`<builder>.use`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:41:35.757

您可以`:data => {:id=> 'something', :label => 'blah'}`在包装器中的标签名称之后添加

```
config.wrappers :toggle, :tag => 'div', :class => 'control-group', :error_class => 'error' do |b|
  b.use :html5
  b.use :placeholder
  b.use :label
  b.wrapper :tag => 'div', :class => 'controls' do |ba|
    ba.wrapper :tag => 'div', :data => {:id=> 'something', :label => 'blah'}, :class => 'switch' do |box|
      box.use :input
    end
    ba.use :hint,  :wrap_with => { :tag => 'span', :class => 'help-block' }
    ba.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
  end
end

= form.input :element, :label => t('views.items.attributes.element'), :wrapper => :toggle 
```

甚至您也可以添加名称和一些值，如下所示：

```
:data => {:name => 'Stephen', :city_state => %w(Chicago IL)} 
```

# c++ - Matlab 到 OpenCV 的转换 - 优化？

> ID：14873874
> 
> 赞同：2
> 
> 时间：2013-02-14T11:32:51.260
> 
> 标签：c++, c, matlab, opencv, code-conversion

我正在将 Matlab 代码转换为 OpenCV“C/cpp”代码。我有一些疑问如下。

```
A = [ 2; 10;  7;  1;  3;  6; 10; 10;  2; 10];
ind = [10; 5; 9; 2]; 
```

B 是 A 的子矩阵；矩阵 B 的元素是 A 中指定位置的元素`ind`。

```
B = [10 3; 2; 10]; 
```

在 Matlab 中，我只是使用

```
B = A(ind); 
```

在 C 中使用 OpenCV，

```
for ( int i = 0; i < ind.rows; i++) {
    B.at<int>(i,0) = A.at<int>(ind.at<int>(i,0), 0);
} 
```

有没有办法在不使用`for`循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:33:55.690

如果您正在寻找一种整洁的复制方式。我建议你定义一个函数这是在给定位置复制的类似 STL 的实现

```
#include<vector>
#include<cstdio>

using namespace std;
/**
 * Copies the elements all elements of B to A at given positions.
 * indexing array ranges [ind_first, ind_lat)
 * e.g 
 *   int A[]= {0, 2, 10,  7,  1,  3,  6, 10, 10,  2, 10};
 *   int B[] = {-1, -1, -1, -1};
 *   int ind[] = {10, 5, 9, 2};
 *   copyat(B, A, &ind[0], &ind[3]);
 *   // results: A:[0,2,10,7,1,-1,6,10,10,-1,-1]
 */
template<class InputIterator, class OutputIterator, class IndexIterator>
OutputIterator copyat (InputIterator src_first, 
               OutputIterator dest_first, 
               IndexIterator ind_first, 
               IndexIterator ind_last)
{
    while(ind_first!=ind_last) {
    *(dest_first + *ind_first) = *(src_first);
    ++ind_first;
    }
    return (dest_first+*ind_first);
}

int main()
{
    int A[]= {0, 2, 10,  7,  1,  3,  6, 10, 10,  2, 10};
    int B[] = {-1, -1, -1, -1};
    int ind[] = {10, 5, 9, 2};

    copyat(B, A, &ind[0], &ind[3]);

    printf("A:[");
    for(int i=0; i<10; i++)  
    printf("%d,", A[i]);
    printf("%d]\n",A[10]);
} 
```

# windows - 我们可以创建一个 Flash 文件并通过 VBS 使用它在启动时运行它吗

> ID：14873876
> 
> 赞同：0
> 
> 时间：2013-02-14T11:32:52.887
> 
> 标签：windows, flash, vbscript, startup

我们可以创建一个 Flash 文件并通过 VBS 使用它在启动时运行它。实际上，我想制作一个 Flash，它将语音命令作为密码并检查匹配。然后让我登录到 Windows。我知道我们可以通过 VBS 完成启动过程，但不知道如何通过 VBS 调用 Flash 文件并通过 .vbs 文件本身运行它。所以需要帮助来调用该文件并在那里运行它。任何人请在这里帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:39:14.807

您将需要一些第 3 方 ActiveX 库来使用 VBScript 创建 Flash 文件。

我只知道两个（商业）：

*   [SWF 侦察 SDK](http://www.delphiflash.com/swfscout_example_vbscript)
*   [活动服务器闪存](http://www.emarksoft.com/asp-flash-vbscript-CreatePolygon.htm)

# c# - 跨 ASP.NET 回发的数据持久性

> ID：14873879
> 
> 赞同：13
> 
> 时间：2013-02-14T11:33:07.437
> 
> 标签：c#, asp.net, session, webforms, viewstate

**语境：**

我经常遇到这样的情况，我们的 ASP.NET 页面必须在 GridView 上向用户显示数据，让他随意更改（单元格上的文本框），并且只有在他实际点击“保存按钮”。该数据通常是页面上信息的虚拟状态，这意味着用户可以更改所有内容而无需真正保存，直到他点击“保存按钮”。在这些情况下，始终存在需要跨 ASP.NET 回发持久化的数据列表。该数据可能是 a 的一个实例，也可能`DataTable`只是一些`List<Someclass>`.

我经常看到人们实现这一点并将数据保存在`Session`. 在这种情况下，当涉及到一些用户在打开多个选项卡的情况下（有时在同一页面上）导航时，我通常也会看到问题。两个不同选项卡的数据会合并并导致信息被打乱的问题。

Session 的常用用法示例：

```
private List<SomeClass> DataList
{
    get
    {
        return Session["SomeKey"] as List<SomeClass>;
    }
    set 
    {
        Session["SomeKey"] = value;
    }
} 
```

人们经常尝试通过执行以下操作来解决它：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DataList = null
    }
    else
    {
        FillGridView(DataList);
    }
} 
```

但是当两个选项卡已经加载并且用户正在更改 GridView 值并且出于某种奇怪的原因他试图通过点击另一页上的“保存”按钮来保存数据时呢？我个人不喜欢这个选项。

执行此操作的其他方法是将数据放在`ViewState`. 然而，当涉及到持久化非常大的列表时，当它存储在页面上时，它可能会严重影响页面 ( `HiddenField`)。

但是，使这项工作的最佳方法是什么？曾经，我想与where`Session`一起使用将保存一个唯一标识符，该标识符将索引保存的数据。这将阻止在浏览器上的选项卡之间共享数据：`ViewState``ViewState``Session`

```
private List<SomeClass> DataList
{
    get
    {
        if (ViewState["SomeKey"] == null)
        {
            ViewState["SomeKey"] = Guid.NewGuid().ToString();
        }

        return Session[ViewState["SomeKey"].ToString()] as List<SomeClass>;
    }
    set {

        if (ViewState["SomeKey"] == null)
        {
            ViewState["SomeKey"] = Guid.NewGuid().ToString();
        }

        Session[ViewState["SomeKey"].ToString()] = value;
    }
} 
```

另一方面，每次用户进入页面时，它都会向 Session 存储一个新的数据列表。这会影响服务器内存。也许他们可以以某种方式被抹去。

**问题：**

考虑到浏览器上多个选项卡的上下文，以及降低服务器和维护编码团队的成本，在 Postbacks 中持久保存此类数据的最佳方式是什么？

**更新：**

正如@nunespascal 很好地发布的那样，一种选择是将 存储`ViewState`在`Session`使用`SessionPageStatePersister`. 但不幸的是，这不是我的选择。然而，它与我的上一个示例并没有太大区别，将数据保存在由存储在 ViewState 中的 UniqueId 索引的 Session 上。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:43:31.567

这个问题有一个简单的解决方案。将 ViewState 存储在 Session 中。

为此，您需要使用`SessionPageStatePersister`

参考：[页面状态持久化](http://msdn.microsoft.com/en-us/library/aa479403.aspx)

您需要做的就是覆盖`PageStatePersister`并使用它[`SessionPageStatePersister`](http://msdn.microsoft.com/en-us/library/system.web.ui.sessionpagestatepersister.aspx)而不是默认值[`HiddenFieldPageStatePersister`](http://msdn.microsoft.com/en-us/library/system.web.ui.hiddenfieldpagestatepersister.aspx)

```
protected override PageStatePersister PageStatePersister
{
    get
    {
        return new SessionPageStatePersister(this);
    }
} 
```

这甚至可以为您省去维护唯一密钥的麻烦。隐藏字段将自动用于为页面的每个实例保留唯一键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T11:33:50.950

我遇到过类似的情况。这个想法是，如果您允许每个用户的长时间会话来更改网格视图，这意味着您还会遇到并发问题，因为最终您将只接受对数据的最后一组修改。

所以，我的解决方案是，允许对数据库进行更改，但确保所有用户通过[SignalR](https://www.asp.net/signalr)看到相同的状态。

现在，并发问题已经消失，但您仍然需要即时进行更改。毕竟，您可能不想保存更改。我通过应用**命令设计模式**解决了这个问题。现在，任何一组更改都可以被批准或放弃。每当您检查索引时，您都会看到最后批准的网格视图。转到更新页面，您会看到实时更新的网格视图。此外，请转到修订版以查看旧的批准 gridview -命令设计模式的另一个优点-。

# android - scrollView 线性布局和列表视图

> ID：14873880
> 
> 赞同：0
> 
> 时间：2013-02-14T11:33:07.187
> 
> 标签：android, listview, scrollview, android-linearlayout

我正在做一个android应用程序，我只想有一个可滚动的布局，但是在这个布局里面我想放一些textView和2个listView，这就是我的问题，listView。

我需要在布局中包含这 2 个列表视图，这是可滚动的，我在谷歌上搜索，发现都是负面的。

如何在滚动视图上放置 2 个列表视图？不可能？如果它是正确的，我该怎么办？我有什么选择？我真的很绝望，因为我花了一整天！

骗子有人说我这个例子？

真的谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:51:39.240

`ListViews`不应放置在 a 中`ScrollView`，因为`ListView`该类实现了自己的滚动，并且它只是不接收手势，因为它们都由 parent 处理`ScrollView`。但是，您可以添加要滚动到`ListView`页眉或页脚的视图。

# vb.net - 可以忽略文本框吗？

> ID：14873883
> 
> 赞同：1
> 
> 时间：2013-02-14T11:33:11.400
> 
> 标签：vb.net, textbox

我正在创建一个程序来计算平均值。有 12 个文本框，我想创造将某些字段留空的可能性。现在只有错误和程序崩溃。有可能创造吗？

这是代码的一部分：

```
ItalianoScritto = (TextBox1.Text)
MatematicaScritto = (TextBox2.Text)
IngleseScritto = (TextBox3.Text)
InformaticaScritto = (TextBox4.Text)
ScienzeScritto = (TextBox5.Text)
FisicaScritto = (TextBox6.Text)
MediaScritto = (ItalianoScritto + MatematicaScritto + IngleseScritto + InformaticaScritto + ScienzeScritto + FisicaScritto) / 6
Label10.Text = Str(MediaScritto) 
```

如果我在单击按钮以计算平均值时将**textbox1**留空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:57:15.623

我将执行以下操作：遍历文本框并检查是否可以将值解析为迭代器。如果是，请将其添加到值列表中。然后将该列表中的所有值相加，然后除以案例数。它比大型 if 语句更快，并且可以抵抗错误

```
dim TBList as new list(of Textbox)
'add your textboxes to the list here
TbList.add(Textbox1)
...

dim ValList as new List(Of Integer)
for each elem in Tblist
  dim value as integer
  If integer.tryparse(elem.text,value)=True
    ValList.add(Value)
  else
    'report error or do nothing
  end if
next

dim Result as Integer
Dim MaxVal as Integer =0
for each elem in ValList 
  Maxval +=elem
next

Result = MaxVal / ValList.count 
```

如果您需要对点值的支持，只需选择 double 或 single 而不是 Integer。另外：无论您做什么-检查文本框中的值是否为数字。如果你省略tryparse，有人会输入“A”，你的应用程序会崩溃和烧毁

另外：您选择严格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:39:20.380

在使用该值之前，您只需检查`TextBox`每个是否为空白：

```
If TextBox7.TextLength <> 0 Then
    'Use the value inside
End If 
```

这样做的方式取决于你的很多代码。您应该考虑编辑您的问题以提供更多信息（和代码），以便我们更好地帮助您。

# iphone - 在同一类的两个视图控制器之间导航？

> ID：14873887
> 
> 赞同：0
> 
> 时间：2013-02-14T11:33:22.023
> 
> 标签：iphone, ios, uinavigationcontroller

在我的项目中，我有一个导航控制器。在一个视图控制器类中，我有两个视图。一个实际上是在我添加类时创建的，另一个是我自己手动添加的。所以两个视图都具有相同的类。

我的问题是当我想从其中一个视图导航到另一个视图时。它的导航对我来说很好。但是当我回来并再次进入视图时，应用程序崩溃并显示错误消息“'Pushing the same view controller instance more than一次不支持()'"

请记住，我正在尝试在同一班级的视图之间导航。

导航代码是，

```
[self.navigationController pushViewController:viewController1 animated:YES]; 
```

我的问题是什么？

请分享你的想法。

这是我使用的代码

```
- ( IBAction ) askForPaymentType:(id)sender {

  [self.navigationController pushViewController:viewPaypal animated:NO];
    NSLog(@"%@",[self.navigationController viewControllers]);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:59:10.373

只需使用 addSubview 方法。在同一个类的 xib 中获取另一个视图并将视图添加到主视图上。完成后就`removeFromSuperview`清空它的记忆。

```
- ( IBAction ) askForPaymentType:(id)sender {
[self.view addSubview:viewPaypal];
} 
```

# java - 如何将最小化的jinternalframe保持在顶部

> ID：14873889
> 
> 赞同：5
> 
> 时间：2013-02-14T11:33:26.657
> 
> 标签：java, swing, layout, jinternalframe, jdesktoppane

我有四个内部框架和 3 个按钮。当我点击最大化按钮时，最大化但它与所有框架重叠。但我的观点是它应该显示最小化的框架。请在下面找到代码

```
 package Project;

import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyVetoException;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.plaf.basic.BasicInternalFrameTitlePane;
import javax.swing.plaf.basic.BasicInternalFrameUI;

public class Test {

    public Test() throws HeadlessException, PropertyVetoException {
        createAndShowGUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new Test();
                } catch (HeadlessException ex) {
                    //Logger.getLogger(MinPanel1.class.getName()).log(Level.SEVERE, null, ex);
                } catch (PropertyVetoException ex) {
                    // Logger.getLogger(MinPanel1.class.getName()).log(Level.SEVERE, null, ex);
                }

            }
        });
    }

    private void createAndShowGUI() throws HeadlessException, PropertyVetoException {
        JFrame frame = new JFrame();
        frame.setResizable(true);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JDesktopPane jdp = new JDesktopPane() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(400, 400);
            }
        };

        frame.setContentPane(jdp);
        frame.pack();

        createAndAddInternalFrame(jdp, 0, 0);
        createAndAddInternalFrame(jdp, 200, 0);
        createAndAddInternalFrame(jdp, 400, 0);
        createAndAddInternalFrame(jdp, 600, 0);

        frame.setVisible(true);
    }

    private void createAndAddInternalFrame(final JDesktopPane jdp, int x, int y) throws PropertyVetoException {
        final JInternalFrame jInternalFrame = new JInternalFrame("Test1", true, true, true, true);
        jInternalFrame.setLocation(x, y);
               final JInternalFrame jInternalFrame1 = new JInternalFrame("Test2", true, true, true, true);
JPanel jp= new JPanel();
        JButton jb1 = new JButton("min");
        JButton jb2 = new JButton("[]");
        JButton jb3 = new JButton("X");

        jInternalFrame.setLayout(new GridLayout(2, 2,2,2));
        jInternalFrame1.add(jb1);
        jInternalFrame.setSize(200, 200);//testing
        jInternalFrame.setLayout(new GridLayout(2,2));

        JButton jb= new JButton("min");
       // jInternalFrame.add(jb);
      //  jInternalFrame.add(jb3);
        //jInternalFrame.add(jb2);
        jp.add(jb);
        jp.add(jb2);
        jp.add(jb3);

        jInternalFrame.add(jp);
        jb.addActionListener(new ActionListener()
                {

            @Override
            public void actionPerformed(ActionEvent ae) {
                        try {
                            jInternalFrame.setIcon(true);
                        } catch (PropertyVetoException ex) {
                        }

            }

        });
        jb1.addActionListener(new ActionListener()
                {

            @Override
            public void actionPerformed(ActionEvent ae) {
                        try {
                            jInternalFrame.setIcon(true);
                        } catch (PropertyVetoException ex) {
                        }

            }

        });
        jb2.addActionListener(new ActionListener()
        {

    @Override
    public void actionPerformed(ActionEvent ae) {
        try {
              jInternalFrame.setMaximum(true);

            }
        catch(Exception e)
        {

        }

    }

});jb3.addActionListener(new ActionListener()
{

@Override
public void actionPerformed(ActionEvent ae) {
        try {
            jInternalFrame.dispose();
        } catch (Exception ex) {
        }

}

});

        BasicInternalFrameTitlePane titlePane = (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) jInternalFrame.getUI()).getNorthPane();
        jInternalFrame.remove(titlePane);

        jInternalFrame.setVisible(true);
        jInternalFrame1.setVisible(true);

        jdp.add(jInternalFrame);
                //jdp.add(jInternalFrame1);

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:48:38.057

你可以试试：`JDesktopPane#setComponentZOrder(Component com, int i)`。 [根据文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/JDesktopPane.html#setComponentZOrder%28java.awt.Component,%20int%29)：

> 将指定组件移动到容器中指定的 z 顺序索引。z 顺序决定了组件的绘制顺序；z 顺序最高的组件首先绘制，z 顺序最低的组件最后绘制。在组件重叠的地方，具有较低 z 顺序的组件将覆盖具有较高 z 顺序的组件。
> 
> ...
> 
> 笔记：
> 
> 并非所有平台都支持在不调用 removeNotify 的情况下将重量级组件的 z 顺序从一个容器更改为另一个容器。无法检测平台是否支持这一点，因此开发人员不应做出任何假设。

这将允许您设置`JInternalFrame`s 中包含的 s的顺序`JDesktopPane`。

**更新：**

根据我的评论：

> `JDesktopPane#setComponentZOrder(Component com, int i)` 从我可以看到它的默认行为和图标化时似乎并没有`JInternalFrame`过度*可笑*。它在*正常状态下工作正常*

**解决方案：**

我建议调整显示最大化的图层`JInternalFrame`：

```
 jb2.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            try {
                if (jInternalFrame.isMaximum()) {//restore
                    jInternalFrame.pack();
                } else {//maximize
                    jInternalFrame.setMaximum(true);
                }
                jdp.remove(jInternalFrame);
                jdp.add(jInternalFrame, JDesktopPane.FRAME_CONTENT_LAYER);
                jdp.revalidate();
                jdp.repaint();
            } catch (Exception e) {
                e.printStackTrace();
            }

        }
    }); 
```

我们还不能忘记将其添加回`DEFAULT_LAYER`最小化时：

```
 jb.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            try {
                if (jInternalFrame.getLayer() == JDesktopPane.FRAME_CONTENT_LAYER) {
                    jdp.remove(jInternalFrame);
                    jdp.add(jInternalFrame, JDesktopPane.DEFAULT_LAYER);
                    jdp.revalidate();
                    jdp.repaint();
                }
                jInternalFrame.pack();
                jInternalFrame.setIcon(true);
            } catch (PropertyVetoException ex) {
            }

        }
    }); 
```

这是完整的代码：

![在此处输入图像描述](../Images/5c3fcec83aaaafcd62a94f612d5da426.png)

```
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyVetoException;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.plaf.basic.BasicInternalFrameTitlePane;
import javax.swing.plaf.basic.BasicInternalFrameUI;

public class Test {

    public Test() throws HeadlessException, PropertyVetoException {
        createAndShowGUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new Test();
                } catch (HeadlessException ex) {
                    ex.printStackTrace();
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

            }
        });
    }

    private void createAndShowGUI() throws HeadlessException, PropertyVetoException {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JDesktopPane jdp = new JDesktopPane() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(600, 400);
            }
        };

        frame.setContentPane(jdp);
        frame.pack();

        createAndAddInternalFrame(jdp, 0, 0);
        createAndAddInternalFrame(jdp, 300, 0);
        createAndAddInternalFrame(jdp, 0, 200);

        frame.setVisible(true);
    }

    private void createAndAddInternalFrame(final JDesktopPane jdp, int x, int y) throws PropertyVetoException {
        final JInternalFrame jInternalFrame = new JInternalFrame("Test1", true, true, true, true);
        jInternalFrame.setLocation(x, y);

        JPanel jp = new JPanel();

        JButton jb = new JButton("min");
        JButton jb2 = new JButton("max/restore");
        JButton jb3 = new JButton("close");

        jInternalFrame.setLayout(new GridLayout(2, 2));

        jp.add(jb);
        jp.add(jb2);
        jp.add(jb3);

        jInternalFrame.add(jp);

        jb.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (jInternalFrame.getLayer() == JDesktopPane.FRAME_CONTENT_LAYER) {
                        jdp.remove(jInternalFrame);
                        jdp.add(jInternalFrame, JDesktopPane.DEFAULT_LAYER);
                        jdp.revalidate();
                        jdp.repaint();
                    }
                    jInternalFrame.pack();
                    jInternalFrame.setIcon(true);
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

            }
        });
        jb2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (jInternalFrame.isMaximum()) {//restore
                        jInternalFrame.pack();
                    } else {//maximize
                        jInternalFrame.setMaximum(true);
                    }
                    jdp.remove(jInternalFrame);
                    jdp.add(jInternalFrame, JDesktopPane.FRAME_CONTENT_LAYER);
                    jdp.revalidate();
                    jdp.repaint();
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });
        jb3.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    jInternalFrame.dispose();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

            }
        });

        BasicInternalFrameTitlePane titlePane = (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) jInternalFrame.getUI()).getNorthPane();
        jInternalFrame.remove(titlePane);

        jInternalFrame.pack();
        jInternalFrame.setVisible(true);

        jdp.add(jInternalFrame);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T12:30:19.477

这是调用`moveToBack()`最大化按钮处理程序的结果。还记得调用`pack()`内部框架。

附录：我已将示例更新为包含`max`,`min`和`icon`按钮。按钮`Action`用于更轻松的测试，内部框架具有不同的名称。请参阅[`createToolBar()`](https://stackoverflow.com/a/11949899/230513)动态更改 L&F，例如

```
frame.add(createToolBar(frame), BorderLayout.NORTH); 
```

![图片](../Images/6531048d18e1c74d4f6b95bb3d896f53.png)

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.beans.PropertyVetoException;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

//* @see https://stackoverflow.com/a/14874924/230513 */
public class Test {

    public Test() {
        createAndShowGUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void createAndShowGUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JDesktopPane jdp = new JDesktopPane() {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(600, 400);
            }
        };
        for (int i = 0; i < 4; i++) {
            createInternalFrame(jdp, 100 * i, 100 * i);
        }
        frame.add(jdp);
        frame.pack();
        frame.setVisible(true);
    }

    private void createInternalFrame(final JDesktopPane jdp, int x, int y) {
        final JInternalFrame jif = new JInternalFrame("Test" + x, true, true, true, true);
        jif.setLocation(x, y);
        JPanel jp = new JPanel();
        jp.add(new JButton(new AbstractAction("max") {

            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    jif.setMaximum(true);
                    jif.moveToBack();
                } catch (PropertyVetoException e) {
                    e.printStackTrace();
                }

            }
        }));
        jp.add(new JButton(new AbstractAction("min") {

            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    jif.setMaximum(false);
                } catch (PropertyVetoException e) {
                    e.printStackTrace();
                }

            }
        }));
        jp.add(new JButton(new AbstractAction("icon") {

            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    jif.setIcon(true);
                } catch (PropertyVetoException e) {
                    e.printStackTrace();
                }
            }
        }));
        jif.add(jp);
        jif.pack();
        jif.setVisible(true);
        jdp.add(jif);
    }
} 
```

# macos - Axis 2 在我的 Mac 上看不到 JAVA_HOME（soapUI 和 wsdl2java）

> ID：14873895
> 
> 赞同：2
> 
> 时间：2013-02-14T11:33:35.383
> 
> 标签：macos, axis2, soapui, wsdl2java, java-home

**问题**：为什么 Axis 2 看不到 Java home 的位置？我是否设置错误？

**摘要**：我正在尝试使用带有soapUI 的Axis 2 从Mac 上的wsdl 生成Java 对象。但是，我收到错误消息“您必须在运行 Axis2 脚本之前设置 JAVA_HOME 变量。”

如果我`echo $JAVA_HOME`在命令行中输入，它会说

> /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home

我已经导航到 JavaVirtualMachines 文件夹，jdk 确实在那里。

我也编辑了 ~/.bash_profile 说

> 导出 JAVA_HOME=$(/usr/libexec/java_home)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-31T17:21:04.497

另一种解决方案是从终端启动 SOAP UI，因为您的 .profile 已经加载。

打开 -a /Applications/SoapUI-xxxapp/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T17:10:48.517

您是否通过单击图标来启动 SoapUI？在这种情况下，SoapUI 不一定有权访问 bash 启动脚本中设置的环境变量。

看看[这个问题](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x)和[这个](https://stackoverflow.com/questions/7501678/set-environment-variables-on-mac-os-x-lion)关于设置环境变量的问题，以便 GUI 应用程序可以访问它们。基本上，您可能必须修改一些系统范围的配置文件。

# facebook - 为什么我无法访问公开的个人资料信息？

> ID：14873898
> 
> 赞同：0
> 
> 时间：2013-02-14T11:33:46.223
> 
> 标签：facebook, facebook-graph-api, oauth-2.0

当我发送这样的 API 调用时：

```
$getinfo = $facebook->api('/100005254861029?fields=name,education,email,gender,work,website,locale,currency,birthday'); 
```

我得到的只是姓名、性别、语言环境和 ID，尽管电子邮件、工作、网站和教育等字段在个人资料上都是公开的（用于测试目的）。

API 是否不允许您访问您不是朋友的人的信息，即使它是公开的，因此可以通过访问他们的页面访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:38:50.797

您需要具有特定的扩展权限才能获取这些字段。

默认情况下，您只能获取此处列出的字段 [http://developers.facebook.com/docs/reference/login/public-profile-and-friend-list/](http://developers.facebook.com/docs/reference/login/public-profile-and-friend-list/)

阅读更多 [https://developers.facebook.com/docs/reference/login/extended-permissions/](https://developers.facebook.com/docs/reference/login/extended-permissions/) 和 [http://developers.facebook.com/docs/reference/login/extended-profile-properties/](http://developers.facebook.com/docs/reference/login/extended-profile-properties/)

# algorithm - 编写一个 36 位随机数生成器

> ID：14873899
> 
> 赞同：11
> 
> 时间：2013-02-14T11:33:52.177
> 
> 标签：algorithm, math, random

我正在一个具有以下特点的环境中编写应用程序

*   36 位补码整数
*   算术限于`+`, `-`, `*`,`/`和余数
*   没有类似`AND`or的位操作`OR`。但是因为补码，`XOR`就相当于减法和`NOT`否定。
*   数字溢出是致命的，因此不能用于静默截断
*   是的，有条件：`IF/THEN/ELSEIF/ELSE/IF`。

理想情况下，我想要 35 位或 36 位随机整数，但 25 位也足够了。

[如果基于足够大的数字，我的线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)的幼稚实现会发生溢出，并且当我使用较小的数字时只会产生少量的位。

所以我正在寻找一组数字*a,c,m*来产生约束中的最大位数，或者对 LCG 进行合理的调整以组合 2 个或更多数字。

作为一个起点，这是我目前使用的：

```
*DEFINE NextRandom . min,max resultVar
* . This is a very shitty RNG. The numbers were never checked
* . for suitability for a long-period linear congruential generator.
* . But it yields numbers that look vaguely random.
*CLEAR rq
*CLEAR rr
*SET RandZ = RandZ * 169687 + 347011      . RandZ is a global var.
*DIVIDE RandZ BY 131072 GIVING rq, RandZ  . Division yields a remainder
*DIVIDE RandZ BY 4 GIVING rq
*SET r0 = +[#,[#],1,1]                    . r0 = argument 'min'
*SET r9 = +[#,[#],1,2]                    . r9 = 'max'
*SET rd = r9 - r0 + 1
*DIVIDE rq BY rd GIVING rq, rr
*SET [#,[#],2,1] TO r0 + rr               . return in 'resultVar'
*ENDDEFINE 
```

* * *

万一有人关心，脚本语言是名为 EXEC 8 的 UNISYS 2200 大型机操作系统中的 SSG（符号流生成器）。

* * *

关于关键性：这个 RNG 工作的应用程序生成测试数据。它不是加密国家机密或核导弹代码。所以我们谈论的是“很高兴”和“尽力而为”，而不是“关键任务”。我会对改进感到高兴，但我不是在寻找最终的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:55:03.040

可以编写一个永远不会溢出的线性同余随机数生成器，正如 Stephen K. Park 和 Keith W. Miller在他们的论文*Random Number Generators: Good Ones Are Hard To Find中所*[展示](http://www.cems.uwe.ac.uk/~irjohnso/coursenotes/ufeen8-15-m/p1192-parkmiller.pdf)的：

 *```
function  Random  :  real; 
                  (*  Integer  Version  2  *) 
const 
  a  =  16807; 
  m  =  2147483647; 
  q  =  127773;  (*  m  div  a  *) 
  r  =  2836;  (*  m  mod  a  *) 
var 
  lo,  hi,  test  :  integer; 
begin 
  hi  :=  seed  div  q; 
  lo  :=  seed  mod  q; 
  test  :=  a  *  lo  -  r  *  hi; 
  if  test  >  0  then 
    seed  :=  test 
  else 
    seed  :=  test  +  m; 
  Random  :=  seed  /  m 
end; 
```

这里*m*是 2^31-1，但您可以将其更改为 36 位数字。诀窍是种子被分成*hi*和*lo*部分，最终的随机数是通过对这些部分求和来生成的。

如果你不喜欢这样，我的博客上有[很多](http://programmingpraxis.com/contents/themes/#Random%20Number%20Generators)随机数生成器。也许其中一个会做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:22:35.307

只是一个简单的想法，我不知道这是否真的是最好的：你可以在 12 位上使用递归 3 个 LCG

x_i(n) = a x_i(n-1) + p_i (mod 2^{12})

有不同的素数 p_i。如果 a 不是太大（比如 12 位），它永远不会溢出。然后，使用 3 个 12 位随机数，可以生成一个 36 位随机整数：

z(n) = x_0(n) + 2^{12} x_1(n) + 2^{24} x_2(n)

请注意，如果 p_i 是素数且相对较大，则 3 个随机生成器应该是相当独立的，因此该策略应该是可以的。

难的是有一个好的选择。

无论如何，在使用它之前，我想它会更好地进行一些测试。*

# mysql - 用于存储mysql列的mongodb模式设计，如数组值查询

> ID：14873910
> 
> 赞同：0
> 
> 时间：2013-02-14T11:34:15.983
> 
> 标签：mysql, mongodb, database-design, database-migration

我有一个看起来像这样的 mysql 数据库：

```
 ----|-----------|--------|------------|---------|----------|---------|----------|----------|
   _id| Segment_ID| Origin | Destination| Aircraft| Latitude1|Latitude2|Longitude1|Longitude2|
    ----|-----------|--------|------------|---------|----------|---------|----------|----------|
     1  | LFAQ-GILTO| LFAQ   | KURIS      | A3ST    | 49.56    | 2.5     | 49.97    | 2.33     |
    ----|-----------|--------|------------|---------|----------|---------|----------|----------|
   1    |GILTO-EVX  | LFAQ   | KURIS      | A3ST    | 49.97    | 2.33    | 50.70    | 2.12     |
    ----|-----------|--------|------------|---------|----------|---------|----------|----------|
    1   |EVX-KURIS  | LFAQ   | KURIS      | A3ST    | 50.70    | 2.12    | 52.00    | 2.07     |
    ----|-----------|--------|------------|---------|----------|---------|----------|----------| 
```

我想将我的数据库从 mysql 迁移到 mongodb。我使用 mongify 将我的数据库迁移到 mongodb 的嵌入式集合中。我对此没有任何问题。但是，我想做下一个：1.迁移到 mongodb 中的嵌入式集合并将列作为数组值。2\. 我希望我的 mongodb 集合看起来像这样

```
Flight: { 
  id:1 {
  "Segment_ID": "LFAQ-GILTO, GILTO-EVX, EVX-KURIS",
  "Origin": "LFAQ, LFAQ, LFAQ",  
  "Destination": "KURIS, KURIS, KURIS",
  "Aircraft" : "A3ST, A3ST, A3ST",
  "Latitude1" : "49.56, 49.97, 50.70",
etc..... 
```

有什么办法可以让它工作吗？

现在我的数据库看起来像：

```
Flight: {
id1: {
"0": {
"Segment_ID": "LFAQ-GILTO",
"Origin": "LFAQ",
"Destination": KURIS",
"Aircraft" : "A3ST",
"LAtitude1": "49.56",
.......
},
"1": {
"Segment_ID": "LFAQ-GILTO",
"Origin": "LFAQ",
"Destination": KURIS",
"Aircraft" : "A3ST",
"LAtitude1": "49.56",
.....
},
"2": {
"Segment_ID": "LFAQ-GILTO",
"Origin": "LFAQ",
"Destination": KURIS",
"Aircraft" : "A3ST",
"LAtitude1": "49.56",
.....},
...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:30:48.327

与 MySql 相比，您的 MongoDB 结构看起来不错。但是，如果您要保留这样的信息，则必须在读取数据时进行循环。如果数据量变大，这个循环会减慢你的应用程序。

例如，您想要“Segment_ID”为“GILTO-EVX”的行，在 MongoDB 中，您有针对“Segment_ID”数组的循环数据。因为 MongoDB 是返回父键及其所有值，所以即使是单个值也符合您的条件。在上述情况下，MongoDB 会给你

```
{ "Segment_ID": ["LFAQ-GILTO", "GILTO-EVX", "EVX-KURIS", ....] } //If you are keep values in array
{ "Segment_ID": "LFAQ-GILTO, GILTO-EVX, EVX-KURIS, ....." } //If you are keep values as string with comma seperated 
```

两者都难以使用进一步的过程。我的意思是你必须在你的变量中保留更大的数组或更大的字符串。**在读取与“Segment_ID = GILTO-EVX”相关的**其他键（列）上的相应信息时，这个复杂度将增加。在这里，我的建议是重组您的 MongoDB 文档，如下所示，

```
//Doc 1
{ 
  "Flight_id" : 1,
  "Segment_ID": "LFAQ-GILTO",
  "Origin": "LFAQ",  
  "Destination": "KURIS",
  "Aircraft" : "A3ST",
}
//Doc 2
{ 
  "Flight_id" : 1,
  "Segment_ID": "GILTO-EVX",
  "Origin": "LFAQ",  
  "Destination": "KURIS",
  "Aircraft" : "A3ST",
}
//Doc3 and more... 
```

# java - 如何在android中连接到特定的IP和端口

> ID：14873911
> 
> 赞同：2
> 
> 时间：2013-02-14T11:34:16.383
> 
> 标签：java, android, sockets, serversocket

我是套接字编程的新手。

我想在 Android 中连接到特定的 IP（例如：184.267.345.65）和端口（例如：53），这怎么可能呢？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:38:37.087

```
Socket s = new Socket("184.267.345.65", 53) 
```

有关完整的示例代码，请参见[此处](https://stackoverflow.com/questions/5135438/example-android-bi-directional-network-socket-using-asynctask)、[此处](https://stackoverflow.com/questions/7384678/how-to-create-socket-connection-in-android)和[此处](https://stackoverflow.com/questions/10464500/simple-android-socket-client)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-14T11:40:07.443

```
URLConnection connection = null;
URL url = null;
InputStream is = null;
String mUrl="IP ADDRESS AND PORT NUMBER";

try {
url = new URL(mUrl);

    connection = url.openConnection();
    connection.setRequestProperty("Accept", "SPECIFY ACCEPT TYPE");
is = connection.getInputStream();
String data=convertStreamToString(is);

} catch (Exception e) {
    Log.i("Exception while reading inputstream  From URL :"+mUrl, e.getMessage());
    e.printStackTrace();
} 
```

# javascript - 如何将事件绑定到 HTML5 中的数据值更改？

> ID：14873912
> 
> 赞同：1
> 
> 时间：2013-02-14T11:34:20.637
> 
> 标签：javascript, jquery, html

所以，我们的设计师决定从现在开始使用 HTML5。

他正在使用带有以下代码的滑块：

```
<div data-layout="row fluid">
    <div class="span text-import text-shadow text-xbig text-left " data-layout="line middle">
        <a href="#" class="span" data-toggle="ajslider" data-value="1" data-target="parent.ui-slider">A</a>
        <div  class="span ui-slider slider-boolean" data-length="2" data-range="max">
            <div class="definition" data-icon="default"></div>
        </div>
        <a href="#" class="span" data-toggle="ajslider" data-value="2" data-target="parent.ui-slider">B</a>
    </div>
</div> 
```

问题是：如何绑定在数据值更改（滑动、单击滑块或单击文本）时触发的事件？

更新：似乎我们得到了错误的文件，从新文件看来他正在使用以下库：

*   jQuery v1.8.2
*   jQuery UI 小部件 1.9.0
*   jQuery UI 核心 1.9.0
*   jQuery UI 鼠标 1.9.0
*   jQuery UI 可拖动 1.9.0
*   jQuery UI Droppable 1.9.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:36:43.903

如果您使用的是 Jquery UI 滑块，那么您可以使用指定的事件 - [http://api.jqueryui.com/slider/](http://api.jqueryui.com/slider/)

# jquery - izecss 动态文本适合弹性 div

> ID：14873916
> 
> 赞同：0
> 
> 时间：2013-02-14T11:34:31.853
> 
> 标签：jquery, css, fluid-layout

如何使我的动态文本适合弹性/流体 div？

所以我有一个流畅的 div 和一些文字。我想让该文本大小与 div 一样大，并在 div 改变大小时进行调整。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:51:43.577

只需使用

```
align="justify" 
```

对于内联和

```
text-align: justify 
```

对于 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:43:46.217

我无法完全理解您的问题，但据我所知，您可以使用css 的**min-height**和**min-width**属性。

# html - HTML5 网站的正确标记？

> ID：14873917
> 
> 赞同：1
> 
> 时间：2013-02-14T11:34:32.227
> 
> 标签：html, markup

我用 HTML5/CSS3 开发我的新网站。在将我的 PSD 文件转换为 HTML5 / CSS3 时，我想知道 HTML5 网站的正确标记是什么。

下面是我网站的一个简单线框图，如您所见，我希望网站至少在不同区域内全宽。

*这是布局：*

正如你在这里看到的，我想在我的主页上有一些不同的部分来获取信息。

![正如你在这里看到的，我想在我的主页上有一些不同的部分来获取信息](../Images/f83615ff16a9a4dd1429f8285ae5f5fd.png)

**我想出了这个标记：**

> 因为当我复制所有列表时不再可见，我已经省略了这段代码中的内容、文本和图像。图像或文本将面对下面的评论。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title></title>

<!-- Meta Tags -->

<!-- Stylesheets -->
<link href="css/style.css" rel="stylesheet">
<link href="css/960.css" rel="stylesheet">

<!-- Icons -->
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-retina.png">

<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

</head>

<body>

<!-- Start container website -->
<header id="header">
    <div class="container_12">
            <div class="grid_12">

 <!-- // Here will be position the logo with a link \\ -->

                <nav id="primary-navwrapper">
                 <!-- // Here will be an unordered list with menu items \\ -->

            </nav>

        </div><!-- End .grid_12 -->

    <div class="clear"></div><!-- End .clear -->
    </div><!-- End .container_12 -->
</header><!-- End header -->

<section id="hero">
    <div class="sliderbox">

         <!-- // An list of image for a slider \\ -->

    </div><!-- End .sliderbox -->

</section><!-- End section#hero -->

<section id="introduce">
    <article class="container_12">

          <!-- // 3 colomn with a h-tag and some text inside a paragraph \\ -->

          <!-- // 3 colomn with a h-tag and some text inside a paragraph \\ -->

          <!-- // 3 colomn with a h-tag and some text inside a paragraph \\ -->

    </article><!-- End article.container_12 -->

    <article class="container_12">
        <div class="grid_12">

          <!-- // A image tag \\ -->

        </div><!-- End .grid_12 -->

    </article><!-- End article.container_12 -->

</section><!-- End section#introduce -->

<hr class="dark-grey"> <!-- Divider for the section -->

<section id="work" class="alt">
    <article class="container_12">

           <!-- // a h-tag and some text inside a paragraph + 3 column portfolio items \\ -->

    </article><!-- End article.container_12 -->

</section><!-- End section#work.alt -->

<hr> <!-- Divider for the section -->

<section id="blog" class="even">
    <article class="container_12">
        <aside class="grid_4">

            <!-- Sidebar with some text -->

        </aside><!-- End aside.grid_4 -->

        <ul class="recentbox">

             <!-- List of 2 latest blog items -->

        </ul><!-- End ul.recentbox -->

    </article><!-- End article.container_12 -->

    <article class="container_12">
        <div class="grid_12">

            <!-- Contact banner -->

        </div><!-- End .grid_12 -->
    </article><!-- End article.container_12 -->

</section><!-- End section#blog.even -->

<footer id="footer">

     <!-- Footer markup here -->

</footer><!-- End footer -->

</body>
</html> 
```

一些额外的信息。正如你所看到的，我从标题的`<header>`-**标记**`<section>`开始，之后我使用-**标记**在里面设置了一些区域，我将在`<article>`-**标记**处使用 a `class`of`<article class="container_12">`以便能够使用网格 960。在那个`<article>`-**标记**内我将设置文本、图像等。

很高兴知道，我在某些栏目中经常使用文章标签，我这样做是因为要针对特定​​栏目中的几篇文章进行区分。与文章之间确实有联系，但在一篇文章中发布时有所不同。

我很想听听您对我的标记到目前为止的意见以及您将如何处理。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:57:18.637

你加分是完全可以接受的。我建议也许不要对 id 标签那么重，而是采用一种更面向对象的方法来实现你的 CSS。有关信息，请访问此处：[http ://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-orientation-css-oocss/](http://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/)

否则你的标记很好。

# c# - 监视变量更改时暂停执行？

> ID：14873922
> 
> 赞同：7
> 
> 时间：2013-02-14T11:34:53.713
> 
> 标签：c#, visual-studio-2010, debugging

当监视变量（不是属性，只是普通变量）更改以查看更改发生的位置时，是否可以中断执行？我搜索并发现[了这个](https://stackoverflow.com/questions/4794646/vb-net-add-watch-stop-when-value-changes)与属性有关的问题，这似乎不是我想要的。

该变量在数千行代码中多次使用，但仅`null`在发生问题时才更改。我们正在努力追查这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T11:53:47.793

1.  `f9`在变量周围创建断点 ( )
2.  右键单击断点的红色圆圈，然后单击“条件...”
3.  输入变量的名称，然后将单选更改为“已更改”
4.  断点现在应该有一个`+`表明它是有条件的

但是：坦率地说，我发现以下更简单，更有效 - 特别是对于字段；假设我们从：

```
string name; 
```

我们*现在*将其更改为：

```
private string __name;
string name {
    get { return __name; }
    set { __name = value; }
} 
```

并在行上放置一个断点`set`。它应该仍然可以编译，并且您可以轻松地看到更改。对于更复杂的情况：

```
private string __name;
string name {
    get { return __name; }
    set {
        if(__name != value) {
            __name = value; // a non-trivial change
        }
    }
} 
```

并将断点放在最内层；这绕过了设置字段而不实际更改值的代码。

# jdbc - JBoss 7 上的 JDBC Postgresql 驱动程序

> ID：14873924
> 
> 赞同：1
> 
> 时间：2013-02-14T11:35:13.333
> 
> 标签：jdbc, jboss7.x, postgresql-9.2

[根据How to connect Jboss-as-7.1.1 with Postgresql](https://stackoverflow.com/questions/12403428/how-to-connect-jboss-as-7-1-1-with-postgresql)中给出的说明，将 Postgresql JDBC 作为模块部署到 JBoss 7.1.1 Final 中。

1.  创建路径 $JBOSS_HOME/modules/org/postgresql/main
2.  在 $JBOSS_HOME/modules/org/postgresql/main/modules.xml

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <module xmlns="urn:jboss:module:1.1" name="org.postgresql">
     <resources>
         <resource-root path="postgresql-9.2-1002.jdbc4.jar"/>
     </resources>
     <dependencies>
         <module name="javax.api"/>
         <module name="javax.transaction.api"/>
         <module name="javax.servlet.api" optional="true"/>
     </dependencies>
    </module> 
    ```

3.  进入同一目录放置postgresql-9.2-1002.jdbc4.jar

4.  通过运行 $JBOSS_HOME/bin/jboss-cli --connect 打开 jboss-cli 并运行命令：

    ```
    /subsystem=datasources/jdbc-driver=postgresql-driver:add(driver-name=postgresql-driver, driver-class-name=org.postgresql.Driver, driver-module-name=org.postgresql) 
    ```

收到此错误后：

```
 Failed to get the list of the operation properties: "JBAS010850: No
    handler for operation read-operation-description at address [
    ("subsystem" => "datasources"),
    ("jdbc-driver" => "postgresql-driver") ]" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-17T12:45:04.597

尝试定义要在其中附加驱动程序的配置文件。此命令在完整配置文件中附加一个新驱动程序：

```
/profile=full/subsystem=datasources/jdbc-driver=postgresql-driver:add(driver-name=postgresql-driver, driver-class-name=org.postgresql.Driver, driver-module-name=org.postgresql) 
```

# php - PHP Curl 登录 Tesco Mobile

> ID：14873925
> 
> 赞同：0
> 
> 时间：2013-02-14T11:35:16.117
> 
> 标签：php, curl, login

我正在尝试使用 PHP curl 登录 Tesco Mobile，我有以下代码：

```
$postData='user=XXX&password=XXXXX';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://paymonthly.tescomobile.com/orderentry/LoginSubmit.do');
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, TRUE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookies.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookies.txt");
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_REFERER, 'https://paymonthly.tescomobile.com/orderentry/LoginSubmit.do');
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);     
$result = curl_exec ($ch); 
curl_close($ch); 
```

但是一直没有成功，请任何人都可以帮助我如何实现这一目标。请在下面找到 Live HTTP 的输出：

提前致谢。

[https://paymonthly.tescomobile.com/orderentry/LoginSubmit.do](https://paymonthly.tescomobile.com/orderentry/LoginSubmit.do)

> POST /orderentry/LoginSubmit.do HTTP/1.1 主机：paymonthly.tescomobile.com 用户代理：Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:18.0) Gecko/20100101 Firefox/18.0 Accept: text/html,application /xhtml+xml,application/xml;q=0.9, */* ;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Referer: [https://paymonthly.tescomobile.com/ orderentry/LoginSubmit.do;jsessionid=60af415cd448d5728a9fa98cdf99](https://paymonthly.tescomobile.com/orderentry/LoginSubmit.do;jsessionid=60af415cd448d5728a9fa98cdf99) Cookie：JSESSIONID=60af415cd448d5728a9fa98cdf99；reevoomark_marker=349049566; reevoo_utma *=1.324660794.1360800582.1360800582.1360800582.1；reevoo* _utmb=1.5.6.1360800582；reevoo_utmc *=1；雷沃*_utmz=1.1360800582.1.1.utmgclid=CK6Vp5nBtLUCFeXKtAodVGIAVA|utmccn=(not%20set)|utmcmd=(not%20set)|utmctr=tescomobile; reevoomark_bh_session=0af0a16fc00f5fbc8b0d28c571721a72；CUSTOMER_UUID=04fdc3e6-59e1-4038-81b7-ec7c5d63c9d4；__utma=152930744.490151867.1360800710.1360800710.1360800710.1；__utmb=152930744; __utmc=152930744; __utmz=152930744.1360800710.1.1.utmccn=(referral)|utmcsr=phone-shop.tesco.com|utmcct=/tesco-mobile/my-tesco-mobile/|utmcmd=referral 连接：keep-alive 内容类型：application/ x-www-form-urlencoded 内容长度：32 user=dinoc83&password=c079378643 HTTP/1.1 200 OK X-Powered-By：JSP/2.1 服务器：Sun GlassFish Enterprise Server v2.1.1 内容类型：text/html;charset= UTF-8 传输编码：分块日期：
> 
> ## 格林威治标准时间 2013 年 2 月 14 日星期四 00:15:27

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:47:13.383

尝试改变： `$postData='user=XXX&password=XXXXX';`

经过`$postData=array('user=XXX&password=XXXXX');`

有一些代码示例： http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:43:59.763

以这种方式尝试这样做，它对我们在另一台服务器上发布数据有用

```
 $postData='user=XXX&password=XXXXX'
   $url ="https://paymonthly.tescomobile.com/orderentry/LoginSubmit.do";
   $ch = curl_init() or die(curl_error()); 
    curl_setopt($ch, CURLOPT_POST,1); 
    curl_setopt($ch, CURLOPT_POSTFIELDS,$postData); 
    curl_setopt($ch, CURLOPT_URL,$url);// here the request is sent to payment gateway 
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
    $result=curl_exec($ch) or die(curl_error());

    curl_close($ch); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:51:14.853

刚刚检查表格

表单属性动作有参数 **jsessionid**在你的代码中你不使用它。我认为您应该首先使用表单加载页面，然后解析响应代码并获取正确的发布 URL。而这需要初始化cookies。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:19:30.587

您也可以`$postData`这样设置值：

```
$postData = array( 'user'=>'XXX', 'password'=>'XXXX' ); 
```

请注意：

> 将数组传递给 CURLOPT_POSTFIELDS 会将数据编码为 multipart/form-data，而传递 URL 编码的字符串会将数据编码为 application/x-www-form-urlencoded。

# playframework - Play 框架检查 HTTP 请求

> ID：14873927
> 
> 赞同：5
> 
> 时间：2013-02-14T11:35:22.977
> 
> 标签：playframework, webserver, jersey, jax-rs, playframework-2.1

我想知道如何在 Play Framework 2.1 中检查 HTTP 请求。我可以在文档中找到的唯一信息是通过以下`conf/routes`机制：

```
GET   /clients/:id          controllers.Clients.show(id: Long) 
```

但这只会让我们`id`从路径中获取参数。如何访问请求的其他部分，例如标头或查询参数？换句话说，Play 的 JAX-RS 等价物`@HeaderParam`是`@FormParam`什么`@QueryParam`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T12:00:46.793

在一个动作中，您可以使用该方法获取请求标头`request()`，例如，在 Java 中：

```
public static Result index() {
  // example of a Header
  String userAgent = request().getHeader("User-Agent");

  // example of a query parameter
  String q = request().getQueryString("q");
  ...
} 
```

您可以查看[Java](http://www.playframework.com/documentation/api/2.1.0/java/play/mvc/Http.RequestHeader.html)或[Scala](http://www.playframework.com/documentation/api/2.1.0/scala/index.html#play.api.mvc.RequestHeader)的 API 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-25T23:34:24.263

更好地使用常量而不是硬编码的字符串，在 Scala 中，代码是

```
import play.mvc.Http

val userAgent: String = request.headers.get(Http.HeaderNames.USER_AGENT).get 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-09T09:30:31.553

这条线对我有用：

```
implicit request => val User-Agent:String = request.headers.get("User-Agent").get 
```

# jsf - RenderView 执行查询

> ID：14873932
> 
> 赞同：0
> 
> 时间：2013-02-14T11:35:39.623
> 
> 标签：jsf

有谁知道为什么当您尝试呈现 JSF 视图时会执行数据库查询？

我列出了一个大的分页列表，正如我所见：

[http://wiki.apache.org/myfaces/WorkingWithLargeTables](http://wiki.apache.org/myfaces/WorkingWithLargeTables)

我正确返回数据列表（包含我想要的项目数），但我注意到 RenderView 运行一个获取所有数据的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:59:11.310

JSF 不这样做。这样做是您自己的错误代码。您正在使用 getter 方法执行 SQL 查询。只是不要在 getter 方法中做生意。改为在 (post)constructor 或 (action)listener 方法中执行此操作。

### 也可以看看：

*   [为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)

# database - 从多个数据库中选择 | 甲骨文 | 珀尔 | DBI

> ID：14873941
> 
> 赞同：0
> 
> 时间：2013-02-14T11:36:04.313
> 
> 标签：database, oracle, perl, select

我需要对数据库 A.Table A 中的数字进行选择，并检查该数字是否存在于数据库 B.Table A 中

到目前为止我已经尝试过

```
select ID from Table A where ID in (select ID from UN/PW@//host:1521/SID.Table A) 
```

我不知道这是否是正确的语法。我目前正在 Oracle Developer 中编写此代码，然后使用 DBI 和 DBD Oracle 将其添加到我的 perl 代码中。

帮助感谢感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:11:40.260

使用解决`CREATE DATABASE LINK`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:02:08.447

打开两个单独的 DB 连接，它将指向两个不同的数据库，然后使用第一个连接从数据库 A 获取值，第二个连接从数据库 B 获取值，最后比较你在 PERL 中得到的值。为了能够在一个查询中查询两个不同的数据库，您需要使用 db 链接。查看本教程：[http ://docs.oracle.com/cd/B28359_01/server.111/b28324/tdpii_distdbs.htm#BABJDEED](http://docs.oracle.com/cd/B28359_01/server.111/b28324/tdpii_distdbs.htm#BABJDEED)

# django - 没有名为views django的模块

> ID：14873943
> 
> 赞同：0
> 
> 时间：2013-02-14T11:36:09.360
> 
> 标签：django

我第一次在 Windows 上开始一个新的 django 项目。我之前在 ubuntu 和 debian 上工作过，没有任何问题。但在 Windows 上，我发现安装它是一项艰巨的任务。我终于找到了一个安装[教程](http://www.venkysblog.com/setup-django-on-windows-with-apache-and-mysql)，它非常有效，直到我开始为静态媒体的展示开辟道路。我根本找不到让它工作的方法，而不是使用 apache 的标准 django 静态媒体处理程序。所以我想我会先制作页面的其余部分，或者至少让它发挥作用。但是当我`view.py`为我制作时，`urls`它一直`"No module named views.py"`在浏览器中显示。我浏览了互联网，找到了很多解决方案并尝试了它们。我 `__init__`在视图所在的目录中放置了一个文件。然后我尝试调试`views.py`通过在 python shell 中运行它并想出了这个：

```
Traceback (most recent call last):
File "C:\wamp\www\mysite\veiws.py", line 5, in <module>
from django.shortcuts import render_to_response
File "C:\Python27\lib\site-packages\django\shortcuts\__init__.py", line 10, in <module>
from django.db.models.manager import Manager
File "C:\Python27\lib\site-packages\django\db\__init__.py", line 11, in <module>
if DEFAULT_DB_ALIAS not in settings.DATABASES:
File "C:\Python27\lib\site-packages\django\utils\functional.py", line 184, in inner
self._setup()
File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 40, in _setup
raise ImportError("Settings cannot be imported, because environment variable %s is 
undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable 
DJANGO_SETTINGS_MODULE is undefined.` 
```

我终于得到了环境变量，`mysite.settings`但即使那样它也不起作用，因为它找不到或不理解它，当我尝试其他一些东西时它又回来了......我的目录看起来像这样

```
C:\wamp\www\

         -mysite
             -static
                 -top4.png
             -__init__.py
             -__init__.pyc
             -django.wsgi
             -settings.py
             -settings.pyc
             -urls.py
             -urls.pyc
             -views.py
             -wsgi.py
             -wsgi.pyc
         -templates
             -base.html
             -start_page
         -manage.py
         -testmysql.php
         -index.php 
```

### 视图.py：

```
from django.conf import settings
from django.template.loader import get_template
from django.template import Context
from django.http import HttpResponse
from django.shortcuts import render_to_response
from django.http import HttpResponseRedirect
from django.template import RequestContext

def home(request):
    return render_to_response('Start_page.html',RequestContext(request)) 
```

### 网址.py

```
from django.conf.urls import *
from veiws import *
from django.conf import settings

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
    (r'^home/$', home),
)
(r'^site_media/(?P<path>.*)$', 'django.views.static.serve',
        {'document_root': settings.STATIC_DOC_ROOT}) 
```

### 设置.py

```
# Django settings for mysite project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'Ocelot',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = 'C:/wamp/www/mysite/static'

STATIC_DOC_ROOT = "C:/wamp/www/mysite/static"

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    #os.path.join(PROJECT_DIR,'static'),
    "C:/wamp/www/mysite/static"
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '&amp;16j6qmva-7n00_@i6s17$d^_twu80pzv4l2wbt(^67$4s-c70'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'mysite.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'mysite.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    "C:/wamp/www/templates"
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

所以我不能让一个简单的页面工作，而且我不知道如何让我的静态文件只用 apache 加载。非常感谢所有帮助。

编辑：

我努力了

```
 set DJANGO_SETTINGS_MODULE = 'mysite.settings'
  set DJANGO_SETTINGS_MODULE = 'settings' 
```

wsgi.py

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

sys.path.append('C:/wamp/www/mysite')

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

管理.py

```
import os
import sys

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

我现在尝试设置环境用户变量，但它似乎删除了自己，然后我运行 python.exe manage.py runserver 8000。女巫给了我这个错误：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "c:\Python27\lib\site-packages\django\core\management\__init__.py", line
443, in execute_from_command_line
    utility.execute()
  File "c:\Python27\lib\site-packages\django\core\management\__init__.py", line
382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "c:\Python27\lib\site-packages\django\core\management\__init__.py", line
261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "c:\Python27\lib\site-packages\django\core\management\__init__.py", line
69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "c:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in im
port_module
    __import__(name)
  File "c:\Python27\lib\site-packages\django\core\management\commands\runserver.
py", line 8, in <module>
    from django.core.servers.basehttp import AdminMediaHandler, run, WSGIServerE
xception, get_internal_wsgi_application
  File "c:\Python27\lib\site-packages\django\core\servers\basehttp.py", line 26,
 in <module>
    from django.views import static
  File "c:\Python27\lib\site-packages\django\views\static.py", line 95, in <modu
le>
    template_translatable = ugettext_noop(u"Index of %(directory)s")
  File "c:\Python27\lib\site-packages\django\utils\translation\__init__.py", lin
e 75, in gettext_noop
    return _trans.gettext_noop(message)
  File "c:\Python27\lib\site-packages\django\utils\translation\__init__.py", lin
e 48, in __getattr__
    if settings.USE_I18N:
  File "c:\Python27\lib\site-packages\django\utils\functional.py", line 184, in
inner
    self._setup()
  File "c:\Python27\lib\site-packages\django\conf\__init__.py", line 42, in _set
up
    self._wrapped = Settings(settings_module)
  File "c:\Python27\lib\site-packages\django\conf\__init__.py", line 95, in __in
it__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s"
% (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'mysite.settings' (Is it on sys.path?): N
o module named settings 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:00:40.657

1) 将 settings.py 移动到`C:\wamp\www\`.

2)`export DJANGO_SETTINGS_MODULE = 'settings'`

如果您使用的是 Windows，则可以键入

```
set DJANGO_SETTINGS_MODULE = 'settings' 
```

但它只会在您关闭窗口之前起作用。

让它永久化，

       a) 开始->设置->控制面板->系统或按`Win`- `Pause`
       b) 高级系统设置->环境变量->新用户变量:
       c) (name) DJANGO_SETTINGS_MODULE,
           (value) settings

然后打开新的终端窗口 - 现有窗口不受影响。

3）不要通过运行来调试views.py。它通常不起作用。调试通过

```
python manage.py runserver 8000 
```

当你在里面时`C:\wamp\www\`。

# javascript - Flexslider 改变手指滑动角度

> ID：14873946
> 
> 赞同：0
> 
> 时间：2013-02-14T11:36:12.820
> 
> 标签：javascript, jquery, flexslider

我正在使用 flexslider 和 Joomla 来制作一个移动滑动响应式 CMS 网站，但是从一个幻灯片切换到另一个幻灯片所需的滑动角度太敏感了。通常情况下，垂直滑动内容会激活水平幻灯片。任何人都使用过这个和/或有任何线索我可以在 js 脚本中更改水平滑动的限制？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T21:41:48.490

我最近遇到了同样的问题，并且能够通过以下修复解决它：

[https://github.com/wearebully/JS-Snippets/tree/master/Flexslider%20Touch%20Sensitivity%20Fix](https://github.com/wearebully/JS-Snippets/tree/master/Flexslider%20Touch%20Sensitivity%20Fix)

希望能帮助到你。

# oop - 设计模式会解决对象通信吗？

> ID：14873949
> 
> 赞同：0
> 
> 时间：2013-02-14T11:36:16.037
> 
> 标签：oop, design-patterns, structure

我一直在研究并在这里寻找一个问题的答案，我怀疑这个问题可以通过更好地理解设计模式来解决。我认为问题在于我是一名自学成才的编码员，人们似乎倾向于假设熟悉许多深奥的术语；我最终陷入了维基百科的螺旋，试图确定某些短语的含义。就是说-关于编码/结构问题。

实际上，就在我开始之前，我应该指出，我很可能对我的问题中代码的结构方式做出了未知的假设。如果是这种情况，人们可以提出替代我建议的方法吗？我真的很感激学习如何更好地编码，而不是仅仅被告知我做错了。好的...

假设我们有一个 Room 类，它有 4 面墙、一个天花板和一个地板。这些是在房间“内部”实例化的。Room 也有一个 Table，它有 4 个 TableLeg，在 Room 内部的 Table 内部再次实例化。（我相信这是作文，但如果我错了，请纠正我！）。

最后，问题是：如果有人以某种方式推动桌子，TableLeg(s) 将需要检查他们站立的地板类型以触发适当的声音。这，目前将是我的解决方案：

表调度一个事件。Room 侦听“table push”事件，询问 Floor 以确定其类型，然后将该类型传递给 Table 上的方法，该方法又将其传递给 TableLegs。对我来说，这似乎相当不雅。因此我怀疑设计模式的知识可能有用。我所描述的结构是否存在一些我不欣赏的根本错误？如果是这样，有什么替代方案？

最后，我听说了《四人帮》这本书。如果这是我的第一个停靠港，它是以一种易于理解的风格编写的，还是我必须学习计算机科学才能掌握它？很抱歉，设计模式初学者的问题很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:47:18.967

楼层可以监听对象事件。Event 接口可以公开有关对象几何体、材质等的信息。然后，Floor 可以检查碰撞并播放声音。

我推荐这本书[Head First Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0596007124)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:43:13.783

我不知道我是否能回答你的问题，但我可以告诉你一些关于“设计模式”这本书的事情。

它在 1994/1995 年出版时立即成为经典。通过 C++ 和 Smalltalk 中的示例（当时没有 Java 或 C#），它列出了面向对象编程中 26 个常见问题的解决方案。它提供了一种记录力量和决议的格式，多年来被学术会议热切地抢购一空。许多程序员，包括我自己，都在研究它，希望一本书可以让他们成为超级明星。

然后现实出现了。

函数式程序员说这些模式是针对 OOP 中的缺陷的变通方法。有什么大惊小怪的？他们可以在不诉诸模式的情况下做这些事情。

第一次阅读这本书的通常反应是尝试将尽可能多的模式融入到你当时正在编写的任何代码中。

您会发现自己在设计会话中使用模式名称：“我认为我们需要一个责任链！”

最终你冷静下来并意识到模式并不是你问题的答案。使用它们的最好方法是认真思考你的问题和解决方案，然后突然意识到你的答案恰好落入了一个模式。

至于你的问题，我认为你不需要模式。在生成声音之前，让 Table 向 Floor 发送消息询问其类型。这样就可以了。简单是一种美德。

# javascript - 这个 iframe buster 脚本看起来安全吗？

> ID：14873956
> 
> 赞同：1
> 
> 时间：2013-02-14T11:36:39.653
> 
> 标签：javascript, security, xss

我们被要求在我们的网站上托管一些 iframe buster 脚本 - 它们允许从外部域投放到 iframe 的广告在它们之外扩展到主机页面。我们的托管服务提供商警告我们要注意这些脚本中的安全漏洞。具体来说，他们说他们中的一些人通过允许从任何 URL 将一段 Javascript 加载到我们的站点中来创建跨站点脚本漏洞。

要实现该脚本，您需要在您的站点上托管一个 HTML 页面。我正在查看来自广告提供商 Atlas 的示例。在这种情况下，URL 类似于[http://domain.com/atlas/atlas_rm.htm](http://domain.com/atlas/atlas_rm.htm)。该页面在外部 URL 包含一个带有 src 的脚本标签，下面是它包含的 JS：

```
var ARMIfbLib = function () {

    function documentWrite(htmlString) {
        document.write(htmlString);
    }

    function writeIframeBustingScript() {
        var imgSrvPath = getTlDirectoryFromQueryString(getParameterString());
        if (imgSrvPath != "") {
            var scriptURL = imgSrvPath + getScriptFileName();
            ARMIfbLib.DocumentWrite("<script language='javascript' type='text/javascript' src='" + scriptURL + "'></scr" + "ipt>");
        }
    }

    return {
        WriteIframeBustingScript: writeIframeBustingScript,
        DocumentWrite: documentWrite
    }

}();

function getValueFromDelimitedString(paramKey, delimiter, queryString) {
    if (paramKey == "imgSrv")
        return getValueFromProperties();

    var re = new RegExp(paramKey + "=" + "(.*?)" + "(" + delimiter + "|$)");
    var matchArray = queryString.match(re);
    if (matchArray == null)
        return "";
    else
        return matchArray[1];
}

function getValueFromProperties() {
    var iframename = unescape(self.name);
    if (iframename.indexOf("<form") >= 0) {
        var params = iframename.split("<input ");
        for (var i = 1; i < params.length; i++) {
            var parts = params[i].split(" ");
            for (var j = 0; j < parts.length; j++) {
                var param = parts[j].split("=");
                if (param[0].indexOf("name") >= 0 && param[1].indexOf("TL_files_path") >= 0) {
                    param = parts[j + 1].split("=");
                    if (param[0].indexOf("value") >= 0) {
                        var value = param[1].substr(1, param[1].indexOf(">"));
                        value = value.substr(value, value.lastIndexOf("/"));
                        value = value.substr(value, value.lastIndexOf("/") + 1);
                        return unescape(value);
                    }
                }
            }
        }
    }
    else if (iframename.indexOf("adparamdelim") >= 0) {
        var params = iframename.split("adparamdelim");
        for (var i = 0; i < params.length; i++) {
            var param = params[i].split("=");
            if (param[0].indexOf("TL_files_path") >= 0) {
                var value = param[1];
                value = value.substr(value, value.lastIndexOf("/"));
                value = value.substr(value, value.lastIndexOf("/") + 1);
                return value;
            }
        }
    }
    else if (/^\{.*\}$/.test(iframename)) {
        try {
            eval('var results = ' + iframename);
            var value = results.TL_files_path;
            value = value.substr(value, value.lastIndexOf("/"));
            value = value.substr(value, value.lastIndexOf("/") + 1);
            return value;
        } catch (e) {
            return "";
        }
    } else {
        var params = iframename.split("&");
        for (var i = 0; i < params.length; i++) {
            var param = params[i].split("=");
            if (param[0].indexOf("TL_files_path") >= 0) {
                var value = unescape(param[1]);
                value = value.substr(value, value.lastIndexOf("/"));
                value = value.substr(value, value.lastIndexOf("/") + 1);
                return value;
            }
        }
    }
    return "";
}

function getTlDirectoryFromQueryString(sLocation) {
    var queryVar = getValueFromDelimitedString("imgSrv", "a4edelim", sLocation);
    var temp = queryVar.substr(0, queryVar.lastIndexOf("/"));
    var tlDir = temp.substr(0, temp.lastIndexOf("/") + 1);
    return tlDir;
}

function getDocumentQueryString() {
    return window.location.search;
}

function getIframeParameterString() {
    var ret = "";
    var qs = getDocumentQueryString();
    if (qs.length > 0)
        ret = qs.substring(1);
    return ret;
}

function getScriptParameterString() {
    var ret = "";
    var scripts = document.getElementsByTagName('script');
    for (var i = 0; i < scripts.length; i++) {
        var scriptSrc = scripts[i].src;
        if (scriptSrc.toLowerCase().indexOf("newiframescript") != -1 && scriptSrc.indexOf("?") != -1) {
            ret = scriptSrc.substr(scriptSrc.indexOf("?") + 1);
            break;
        }
    }
    return ret;
}

function getParameterString() {
    var qs = getIframeParameterString();
    if (qs.length > 0 && qs.indexOf("a4edelim") > 0)
        return qs;
    return getScriptParameterString();
}

function getScriptFileName() {
    var armdelim = ",";
    var fileName = "ifb.0";
    var queryString = getParameterString();
    var parmValue = "";
    if (queryString.length > 0) {
        parmValue = getValueFromDelimitedString("armver", "a4edelim", queryString);
    }
    if (parmValue.length > 0) {
        var fileNames = parmValue.split(armdelim);
        for (var i = 0; i < fileNames.length; i++) {
            if (fileNames[i].toLowerCase().indexOf("ifb") != -1) {
                fileName = fileNames[i];
                break;
            }
        }
    }
    return fileName + ".js";
}

if (typeof(armTestMode) == "undefined") {
    ARMIfbLib.WriteIframeBustingScript();
} 
```

我花了几个小时研究这个以尝试弄清楚它在做什么，但我陷入了不同的函数调用中。它似乎是从 iframe 的名称中获取查询字符串参数或值，大概是包含广告的 iframe。

谁能理解这个 JS 在做什么？从 XSS 的角度来看，它看起来相当安全吗？

==========================================

编辑

如果对其他人有用，我们向提供者提到了这个问题，他们的回应是：

1.  iframe buster 页面仅在 iframe 中时才有效
2.  ftlocal.html 文件中的代码只有在 iframe 的域已经与父页面的域相同时才有效——因此任何代码无论如何都已经可以访问父页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:01:55.453

JS 脚本在您的页面中创建一个动态生成的脚本标记。

`ARMIfbLib.DocumentWrite("<script language='javascript' type='text/javascript' src='" + scriptURL + "'></scr" + "ipt>");`

如果您深入`scriptURL`研究来自哪里，它似乎是传递给`window.location.search`（查询字符串）的参数。

据我所知，这有效地允许任何脚本在查询字符串上传递到您的页面，使其容易受到 DOM XSS 的攻击，除非它得到有效保护以允许通过页面中的框架名称设置域。我会使用您自己的域进行一些测试并传递要搜索的查询字符串变量（JS 中的字符串文字）。

# linux - crontab 无法正常工作

> ID：14873962
> 
> 赞同：0
> 
> 时间：2013-02-14T11:36:46.377
> 
> 标签：linux, shell, ubuntu, crontab

当我使用 root 手动运行脚本时，它工作正常。当我在 cron 中执行相同的脚本时，它没有运行。我检查了 cron 实际上是在调用脚本，但脚本没有执行。我将脚本中的回声输出导出到文本文件，但文本文件没有记录任何内容。请检查这个 cron

```
*/10 * * * *  sh /var/www/sym_monitor/restart.sh > /var/www/migrate/root_restart.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:52:36.637

另一种避免键入完整可执行路径的方法是将 shell 全局变量放在您的顶部`crontab`：

```
SHELL=/bin/sh
PATH=/bin:/usr/bin:/usr/local/bin
MAIL=me@domain.tld

*/10 * * * * stuff > log 2>&1 
```

注意在日志文件中同时记录&的`> log 2>&1`语法`STDERR``STDOUT`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T11:40:45.517

尝试更改`sh`为`/bin/sh`.

```
*/10 * * * * /bin/sh /var/www/sym_monitor/restart.sh > /var/www/migrate/root_restart.txt 
```

# .net - 64位系统的SendKey键盘鼠标模拟

> ID：14873963
> 
> 赞同：1
> 
> 时间：2013-02-14T11:36:47.567
> 
> 标签：.net, vb.net

我有一组前段时间写的发送键函数。它在 32 位系统中工作。现在我再次测试它并意识到它不再适用于我的新win7 64位系统。我在网上找了几篇文章，按照[他们的方法](https://stackoverflow.com/questions/4596163/sendinput-keys-in-win32-win64-machines)制作了Input32/64函数。但是，它似乎不起作用。

`Dim result As Integer = SendInput(1, input, cbSize)`

总是返回 0 并且没有模拟击键。你能看看吗？

（注：我只做了KEYBOARDINPUT64结构，没用，所以我没有做MOUSEINPUT64或HARDWAREINPUT64结构...）

```
''mouse functions

Private Shared Sub SendMouseInput(ByVal flags As MOUSEEVENTF, ByVal point As System.Drawing.Point)
    If Marshal.SizeOf(New IntPtr()) = 8 Then
        SendMouseInput64(flags, point)
    Else
        SendMouseInput32(flags, point)
    End If
End Sub
Private Shared Sub SendMouseInput64(ByVal flags As MOUSEEVENTF, ByVal point As System.Drawing.Point)
    Dim screen As Rectangle = My.Computer.Screen.Bounds
    Dim globalx As Integer = CInt((65535 * point.X) / screen.Width) ' x scale from 0 to 65535
    Dim globaly As Integer = CInt((65535 * point.Y) / screen.Height) ' y scale from 0 to 65535
    Dim input As New INPUT64
    input.dwType = InputType.Mouse
    input.mi.dx = globalx
    input.mi.dy = globaly
    input.mi.dwFlags = MOUSEEVENTF.ABSOLUTE Or flags
    input.mi.dwExtraInfo = IntPtr.Zero
    input.mi.mouseData = 0
    input.mi.time = 0
    SendInput(1, input, Marshal.SizeOf(input))
End Sub
Private Shared Sub SendMouseInput32(ByVal flags As MOUSEEVENTF, ByVal point As System.Drawing.Point)
    Dim screen As Rectangle = My.Computer.Screen.Bounds
    Dim globalx As Integer = CInt((65535 * point.X) / screen.Width) ' x scale from 0 to 65535
    Dim globaly As Integer = CInt((65535 * point.Y) / screen.Height) ' y scale from 0 to 65535
    Dim input As New INPUT32
    input.dwType = InputType.Mouse
    input.mi.dx = globalx
    input.mi.dy = globaly
    input.mi.dwFlags = MOUSEEVENTF.ABSOLUTE Or flags
    input.mi.dwExtraInfo = IntPtr.Zero
    input.mi.mouseData = 0
    input.mi.time = 0
    SendInput(1, input, Marshal.SizeOf(input))
End Sub

''keyboard functions
Private Shared Sub SendKeyInput(ByVal flags As KEYEVENTF, ByVal key As Int16)
    If Marshal.SizeOf(New IntPtr()) = 8 Then
        SendKeyInput64(flags, key)
    Else
        SendKeyInput32(flags, key)
    End If
End Sub
Private Shared Sub SendKeyInput64(ByVal flags As KEYEVENTF, ByVal key As Int16)
    Dim input As New INPUT64
    Dim ki As New KEYBDINPUT64
    input.dwType = InputType.Keyboard
    input.ki = ki
    input.ki.wVk = key
    input.ki.wScan = 0
    input.ki.time = 0
    input.ki.dwFlags = flags
    input.ki.dwExtraInfo = IntPtr.Zero
    Dim cbSize As Integer = Marshal.SizeOf(GetType(INPUT64))
    Dim result As Integer = SendInput(1, input, cbSize)
    If result = 0 Then Console.WriteLine("SendKeyInput:" & Marshal.GetLastWin32Error)
End Sub
Private Shared Sub SendKeyInput32(ByVal flags As KEYEVENTF, ByVal key As Int16)
    Dim input As New INPUT32
    Dim ki As New KEYBDINPUT32
    input.dwType = InputType.Keyboard
    input.ki = ki
    input.ki.wVk = key
    input.ki.wScan = 0
    input.ki.time = 0
    input.ki.dwFlags = flags
    input.ki.dwExtraInfo = IntPtr.Zero
    Dim cbSize As Integer = Marshal.SizeOf(GetType(INPUT32))
    Dim result As Integer = SendInput(1, input, cbSize)
    If result = 0 Then Messaging.Instance.ReportError("MouseKeyboard::SendKeyInput:" & Marshal.GetLastWin32Error)
End Sub

''lower level input functions
<DllImport("User32.dll", SetLastError:=True)> _
Private Shared Function SendInput(ByVal nInputs As Integer, ByRef pInputs As INPUT64, ByVal cbSize As Integer) As Integer
End Function

<DllImport("User32.dll", SetLastError:=True)> _
Private Shared Function SendInput(ByVal nInputs As Integer, ByRef pInputs As INPUT32, ByVal cbSize As Integer) As Integer
End Function

<DllImport("User32.dll")> _
Private Shared Function BlockInput(ByVal fBlockIt As Boolean) As Boolean
End Function

<StructLayout(LayoutKind.Explicit, pack:=1)> _
Private Structure INPUT64
    <FieldOffset(0)> Public dwType As InputType
    <FieldOffset(8)> Public mi As MOUSEINPUT
    <FieldOffset(8)> Public ki As KEYBDINPUT64
    <FieldOffset(8)> Public hi As HARDWAREINPUT
End Structure

<StructLayout(LayoutKind.Explicit, pack:=1)> _
Private Structure INPUT32
    <FieldOffset(0)> Public dwType As InputType
    <FieldOffset(4)> Public mi As MOUSEINPUT
    <FieldOffset(4)> Public ki As KEYBDINPUT32
    <FieldOffset(4)> Public hi As HARDWAREINPUT
End Structure

<StructLayout(LayoutKind.Sequential, pack:=1)> _
Private Structure MOUSEINPUT
    Public dx As Int32
    Public dy As Int32
    Public mouseData As Int32
    Public dwFlags As MOUSEEVENTF
    Public time As Int32
    Public dwExtraInfo As IntPtr
End Structure

<StructLayout(LayoutKind.Sequential, pack:=1)> _
Private Structure KEYBDINPUT64
    <FieldOffset(0)> Public wVk As Int16
    <FieldOffset(2)> Public wScan As Int16
    <FieldOffset(4)> Public dwFlags As KEYEVENTF
    <FieldOffset(12)> Public time As Int32
    <FieldOffset(16)> Public dwExtraInfo As IntPtr
End Structure

<StructLayout(LayoutKind.Sequential, pack:=1)> _
Private Structure KEYBDINPUT32
    Public wVk As Int16
    Public wScan As Int16
    Public dwFlags As KEYEVENTF
    Public time As Int32
    Public dwExtraInfo As IntPtr
End Structure

<StructLayout(LayoutKind.Sequential, pack:=1)> _
Private Structure HARDWAREINPUT
    Public uMsg As Int32
    Public wParamL As Int16
    Public wParamH As Int16
End Structure
Private Enum InputType As Integer
    Mouse = 0
    Keyboard = 1
    Hardware = 2
End Enum
<Flags()> _
Private Enum MOUSEEVENTF As Integer
    MOVE = &H1
    LEFTDOWN = &H2
    LEFTUP = &H4
    RIGHTDOWN = &H8
    RIGHTUP = &H10
    MIDDLEDOWN = &H20
    MIDDLEUP = &H40
    XDOWN = &H80
    XUP = &H100
    VIRTUALDESK = &H400
    WHEEL = &H800
    ABSOLUTE = &H8000
End Enum
<Flags()> _
Private Enum KEYEVENTF As Integer
    KEYDOWN = 0
    EXTENDEDKEY = 1
    KEYUP = 2
    [UNICODE] = 4
    SCANCODE = 8
End Enum 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:19:05.933

与其说是解决问题的方法，不如说您尝试过 InputSimulator 库：[https ://inputsimulator.codeplex.com/](https://inputsimulator.codeplex.com/)

我已经在两个 32/64 位版本的 Windows 上顺利使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:21:49.027

请看看这个。 [C# PInvoking user32.dll 在 64 位系统上](https://stackoverflow.com/questions/1540741/c-sharp-pinvoking-user32-dll-on-a-64-bit-system)

我想这也适用于其他 user32.dll 调用......

1.  使用 IntPtr 而不是 UIntrPtr：UIntPtr 类型不符合 CLS
2.  切勿使用“int”或“integer”作为 lParam。您的代码将在 64 位 Windows 上崩溃。仅使用 IntPtr、“ref”结构或“out”结构。
3.  切勿使用“bool”、“int”或“integer”作为返回值。您的核心将在 64 位 Windows 上崩溃。仅使用 IntPtr。使用 bool 是不安全的 - pInvoke 不能将 IntPtr 编组为布尔值。
4.  使用“IntPtr”作为返回值，即使消息说它没有返回任何有用的信息。
5.  Microsoft 将 System.Windows.Forms.Message 结构的 Msg 成员定义为 System.Int32[1]。同时，SendMessage 原生 API 将消息定义为 UINT[2] 类型，这是一个 32 位无符号值。[3] 可以在此处找到常见消息代码的列表：[http ://www.vbcode.com/Asp/showsn.asp?theID=11797](http://www.vbcode.com/Asp/showsn.asp?theID=11797)
6.  您可以安全地将“hWnd”键入为“IntPtr”而不是“HandleRef”，但请确保您了解自己在做什么。如果您在由非托管组件或外部应用程序提供的窗口句柄上进行操作，那么一切都会正常工作（并且当其他应用程序可以自己自由操作窗口时也可以保证）。但是，将 IntPtr 与托管窗体和控件一起使用可能会导致您的代码在竞争条件下崩溃，因为 .NET 可以并且将在调用期间处理您的窗口句柄。使用得当，GC.KeepAlive() 可以帮助解决这个问题。这些都与固定无关，这在这里无济于事。固定是为了防止数据四处移动；使用 HandleRef 或 GC.KeepAlive 是为了防止运行时破坏您的句柄。
7.  将整数值传递给 lParam 和 wParam 时，请使用 IntPtr，因为它们默认获取属性。您应该避免将 IntPtr 和 Integer 作为参数类型混合使用。使用 IntPtr。
8.  wParam 和 lParam 参数分别定义为 WPARAM 和 LPARAM 类型 WPARAM 定义为 UINT_PTR LPARAM 定义为 LONG_PTR LONG_PTR 是“指针精度的有符号长类型”。并且是有符号的 32 位或有符号的 64 位，具体取决于平台。UINT_PTR 是“Unsigned INT_PTR”，是无符号 32 位或无符号 64 位，具体取决于平台。

来源[http://www.pinvoke.net/default.aspx/user32.SendMessage](http://www.pinvoke.net/default.aspx/user32.SendMessage)

此外，如果您处于紧要关头... [Win32 和 Win64 机器中的 SendInput 键](https://stackoverflow.com/questions/4596163/sendinput-keys-in-win32-win64-machines)

# python - Pygame 'LEFT' 未定义

> ID：14873970
> 
> 赞同：0
> 
> 时间：2013-02-14T11:37:25.527
> 
> 标签：python, python-3.x, mouseevent, pygame

我正在开发一款游戏。我已经导入了 pygame。我正在使用 Python 3.3 和 Pygame 3.3。始终未定义相同的错误消息“LEFT”。因为我已经搜索了问题，所以我对互联网上的内容进行了精确复制。这是我的代码。我尝试了几种不同的方法，但似乎都不起作用。

方法一：

```
import pygame
event = pygame.event.poll()
if event.type == pygame.MOUSEBUTTONDOWN and event.button == LEFT:
    ....command 
```

方法2：（基本上全押）

```
from pygame import *
from pygame.locals import *
import pygame
event = pygame.event.poll()
if event.type == MOUSEBUTTONDOWN and event.button == LEFT:
    ......command 
```

在告诉我之前，在这两种方法中，我都尝试在“LEFT”和“pygame.LEFT”之间切换，等等。

有任何想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T11:42:42.633

定义`LEFT`自己：

```
LEFT = 1 
```

我认为您正在关注的[Pygame 教程正是这样做的。](http://lorenzod8n.wordpress.com/2007/05/30/pygame-tutorial-3-mouse-events/)换句话说，`pygame`库没有这个值的常量，它只是一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T12:51:35.103

正如*Martijn Pieters* [指出的那样](https://stackoverflow.com/a/14874061/1114687)，该`pygame`库没有用于`event.button`.

这^([是我认为])可能值的完整列表（作为一个类，所以它不会弄乱你的全局命名空间）：

```
class MouseButtons:
    LEFT = 1
    MIDDLE = 2
    RIGHT = 3
    WHEEL_UP = 4
    WHEEL_DOWN = 5 
```

# c++ - 在向量中搜索队列大小

> ID：14873973
> 
> 赞同：2
> 
> 时间：2013-02-14T11:37:41.427
> 
> 标签：c++, loops, vector, queue

我有一个范例，其中一个整数之前被排入向量中的队列，搜索队列循环并将整数排入队列中具有最小大小的队列。以下代码显示了操作。

```
#include <vector> 
#include <queue> 
std::vector<std::queue<int> > q
int min_index = 0;
std::size_t size = q.size();
for( i=0; i<size; i++){ //accessing loop of queues
    if(q[min_index].size() > q[i].size())
        min_index = i; // Now q[min_index] is the shortest queue
} 
q[min_index].push(int) 
```

接下来我试图用条件扩展我的范式，即整数应该排入最短队列，直到它成为队列中的最大大小。

```
do{
   q[min_index].push(int)
} while(q[min_index].size > queue sizes in the vector loop except this queue ) 
```

如何搜索除此队列之外的队列大小循环任何想法请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:44:32.073

只需计算最大队列大小和最小索引：

```
int min_index = 0;
int max_size = -1;
std::size_t size = q.size();
for( i=0; i<size; i++){ //accessing loop of queues
    if(q[min_index].size() > q[i].size())
        min_index = i; // Now q[min_index] is the shortest queue
    if(q[i].size() > max_size)
        max_size = q[i].size(); // longest queue
} 
while(q[min_index].size < max_size)
{
    q[min_index].push(int);
} 
```

# android - 更改菜单android操作栏的标题文本颜色和大小

> ID：14873975
> 
> 赞同：4
> 
> 时间：2013-02-14T11:37:45.340
> 
> 标签：android, android-actionbar, submenu, textcolor

我正在开发 android 应用程序，在我的应用程序中我使用的是 Sherlock 操作栏。我在操作栏中使用了一些菜单。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@+id/card_menu"
      android:title="C123" 
      android:showAsAction="always">
    <menu>
        <item android:id="@+id/C0"
              android:title="C0"/>
        <item android:id="@+id/c1"
              android:title="c1" />
        <item android:id="@+id/c2"
              android:title="c2" />
    </menu>
    </item>
<item android:id="@+id/notification"
  android:title="Notifications"
  android:showAsAction="always"
  android:actionLayout="@layout/notification_icon"
  android:icon="@drawable/notification"
  />
<item android:id="@+id/filter"
  android:icon="@drawable/filter"
  android:title="Filter" 
  android:showAsAction="always"
  />

</menu> 
```

我像这样在我的活动中显示这个菜单..

```
inflater.inflate(R.menu.menu_type2, menu); 
```

现在我想做的是我想改变我的菜单项（c123）的标题颜色。我可以从样式更改子菜单的颜色，但无法更改该项目的文本。我按照以下方式尝试了这个。

```
// this change my sunbmenu text color but I am not able to change color of item text(c123)
<item name="android:dropDownListViewStyle">@style/MyPopupMenu</item>
<item name="dropDownListViewStyle">@style/MyPopupMenu</item>

<style name="MyPopupMenu" parent="Widget.Sherlock.ListPopupWindow">
 <item name="android:textAppearance">@style/TextAppearance.Sherlock.Widget.PopupMenu</item>
 <item name="android:dropDownSelector">@color/white</item>
 <item name="android:dividerHeight">@dimen/divider_height</item>
 <item name="android:divider">@color/maroon</item>

</style>

<style name="TextAppearance.Sherlock.Widget.PopupMenu" parent="android:style/TextAppearance.Holo.Widget.ActionBar.Menu">
 <item name="android:textColor">@color/white</item>
</style> 
```

我想修改菜单项样式更改文本的颜色和大小以及背景。怎么做。需要帮助。。谢谢。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T15:07:05.957

`MenuItem`您可以通过使用`SpannableString`而不是轻松更改文本的颜色`String`。

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.your_menu, menu);

    int positionOfMenuItem = 0; // or whatever...
    MenuItem item = menu.getItem(positionOfMenuItem);
    SpannableString s = new SpannableString("My red MenuItem");
    s.setSpan(new ForegroundColorSpan(Color.RED), 0, s.length(), 0);
    item.setTitle(s);
} 
```

# java - 如何将链接列表附加到另一个链接列表的后面？

> ID：14873976
> 
> 赞同：3
> 
> 时间：2013-02-14T11:37:48.500
> 
> 标签：java, data-structures, linked-list

我已经实现了自己的链表类型的数据结构，但是当我想将一个链表附加到另一个链表而不迭代任何内容时，我遇到了问题。

这是我想要的输出示例

```
public class MyList{

    public static void main(String[] args){
        MyList list1 = new MyList(3);
        MyList list2 = new MyList(4);

        System.out.println(list1);  //0 1 2
        System.out.println(list2);  //0 1 2 3

        list1.add(list2);

        System.out.println(list1);  //0 1 2 0 1 2 3
        System.out.println(list2);  //0 1 2 3
    }

    private class Node{
        public int data;
        public Node next;

        public Node(int data){
            this.data = data;
        }
    }

    public Node head;
    public Node tail;

    public MyList(int length){
        for(int i = 0; i < length; i++){
            add(new Node(i));
        }
    }

    public void add(Node node) {
        if (head == null) {
            //insert first node
            head = node;
            tail = node;
        } else {
            //add node to end
            tail.next = node;
            tail = tail.next;
        }
    }

    //Problem!
    public void add(MyList list) {

    } 

    @Override
    public String toString(){
        String result = "";
        for(Node iter = head; iter != null; iter = iter.next){
            result += iter.data + " ";
        }
        return result;
    }   
} 
```

将 list2 添加到 list1 时，我希望在不破坏原始 list2 的情况下扩展 list1。如果不迭代任何东西，我看不到如何做到这一点。在 add 方法中迭代 list2 并将每个节点单独添加到末尾是微不足道的，但这对于链表来说感觉不正确。

谁能给我一些关于如何有效地做到这一点的建议

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T11:42:03.197

你需要做两件事：

*   将`tail.next`first设置`list`为`head`2nd `list`。
*   然后将`tail`2 ^(nd) `list`重新分配给`tail`1 ^(st) `list`

所以，这就是你的方法应该是这样的：

```
public void add(MyList list) {
    this.tail.next = list.head;
    this.tail = list.tail;
} 
```

您最好将此方法命名为`extend`. 这更清楚地显示了该方法的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:43:00.633

您想将`head`输入列表添加`tail`到此列表中。只需将其编写为代码：

```
public void add(MyList list) 
{
    this.tail.next = list.head;
    this.tail = list.tail;
} 
```

# java - 如何在 Struts 2 中实现分页

> ID：14873986
> 
> 赞同：5
> 
> 时间：2013-02-14T11:38:36.407
> 
> 标签：java, jsp, struts2, struts2-jquery, jquery-pagination

如何在 Struts 2 中为客户端显示和 Hibernate 实现分页作为持久层。

这是我到目前为止所做的代码：

```
<display:table id="students" name="students" pagesize="2"
    export="false" requestURI="/student">
    <display:column property="studentRoll" title="Roll"
        paramId="studentRoll" sortable="true" />
    <display:column property="studentName" title="Name" sortable="true" />
    <display:column property="studentCourse" title="Course"
        sortable="true" />
    <display:setProperty name="paging.banner.placement" value="bottom" />
</display:table> 
```

有没有办法在没有`display`标签的情况下实现这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:23:40.607

有一种方法可以实现它，我会给你一些建议。可能不是您正在寻找，而是使用显示标签，我真的怀疑您是否可以实现一些不想说那个词的东西。显示标签是一个库，用于简化 Web 上表格数据的表示，并且已经足够老，可以与现代技术（如 Ajax）和基于组件的脚本库（如 jQuery 等）一起使用。即使我已经看到显示标签被 ajaxified 但我看到这只不过是增加了有问题的架构的复杂性。需要在此处添加基于属性的显示标签库的性质。创建它的目的是为了简化当时的使用或开发过程。如今，人们不再局限于定制和丑陋的解决方案。

现在看看代码，如果我可以说这是一个代码，标签代表带有行和列的表格，因为可以使用标签、标题、其他 HTML 属性（甚至使用 CSS）自定义它们，但这不是这个问题。

属性名称代表一个变量，其数据结构代表一个表格数据。它可能是一个列表列表或一组对象无关紧要。它可以是可迭代的并且具有行和列是怎么回事。

属性 pagesize 指向每页的记录数。

给定的 URI 甚至不记得从服务器提供数据是什么，或者只是为了逃避。

靠近标签末尾的是横幅位置，由属性设置。因此，您甚至不必使用它来实现任何代码，只需设置自定义属性即可。

现在，用 Struts2 中的数据表示表格，有一个

```
<s:iterator var="row" begin="0" value="#request.navigator.list"> 
```

标签，列表`students`或其他无关紧要。导航器是类似于显示标签中的横幅的对象，但这里不是组件。带有按钮的组件导航器我将在稍后描述。

在迭代器中，您可能有任何表示该行的内容。但这不在话下。

导航器作为组件可以有不同的方式，例如

```
<s:property value="#request.navigator.bar" escapeHtml="false"/> 
```

然后列表中的数据通过 SQL 或 HQL 或 Criteria API 从数据库中获取无关紧要。这分两步完成。首先检查希望返回的记录总数。它提供了在最后移动并且不超过页面大小的可能性。然后返回在页面上表示所需的有限行数。这些都在显示表格的操作中完成。该操作需要两个参数，第一行和页面大小。如果记录总数发生变化，这也需要更正导航器。

这就是我想回答的关于如何实现页面导航逻辑的问题。我尽量不要写很多很多代码，因为它毫无疑问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:52:57.823

您将需要或多或少地复制 display 执行此操作的方式。

1.  您需要构建一个页面选择器，为此您需要获取项目的总数 - 请参阅 Criteria.setProjection(Projections.rowCount)。
2.  您需要在页面上提供链接，以允许用户将所选页面发送到操作。
3.  然后，在您的操作中，您可以使用所选页码和页面大小来确定偏移量和结果数，请参阅 Critera.setFirstResult 和 Criteria.setMaxResults
4.  然后，您将读取这些行并创建行 bean 的集合。
5.  在您的 JSP 中迭代 bean 并使用 <s:iterator\> 构建您的表。

似乎使用 displaytag 可能更容易，请参阅它的 PaginatedList 接口，它允许您在 Hibernate 中进行分页并让 displaytag 完成所有艰苦的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:46:36.330

我建议您使用[jQuery Datatable](http://www.datatables.net/)，您需要完成以下操作：

```
<table id="datatable">
  <tbody>
    <s:iterator>
        <tr><td><s:property/></td></tr>
    </s:iterator>
  </tbody>
</table>
<script>
    $("#datatable").dataTable();
</script> 
```

还有其他选项，例如[struts2-jquery-plugin](http://code.google.com/p/struts2-jquery/)

这取决于您的需求。

# c# - 从数组中获取实际类型

> ID：14873989
> 
> 赞同：0
> 
> 时间：2013-02-14T11:38:42.767
> 
> 标签：c#, arrays, generics, reflection

给定这个例子：

```
IColor[] items;
items = new IColour[]{ new SomeColour() }; 
```

如何使用反射来查看项目，并获取`typeof(SomeColour)`而不是`typeof(IColour)`？使用我熟悉的，`typeof(items).GetElementType()`给我`IColour`，而不是实际的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:41:31.650

你所要求的是不可能的。您的数组可以存储多个项目，每个项目都有不同的具体类型。

你的数组的类型是`IColor`. 存储在索引 0 处的项目的类型是`SomeColour`。如果您在数组中添加了第二项怎么办：`AnotherColour`. 应该是什么类型的`items`？

您可以使用指向数组中位置的位置`items[index].GetType()`来获取存储在数组中的项目的类型。`index`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:50:04.157

也许这个？

```
foreach (var item in items)
{
    var t = item.GetType();
} 
```

t 应该是 SomeColur、OtherColur 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:41:58.940

`typeof(items).GetElementType`IS `IColor`，因为它是 IColor 的列表。

要获取特定元素的底层类型：

```
IColor item = items[<someIdx>];
item.GetType(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:42:15.553

如果你有一个`IColor[]`，那么关于“实际类型”你唯一能说的就是：`IColor`。例如，您可以：

```
class Foo : IColor {...}
class Bar : IColor {...} 
```

并有一个包含 2和 3的`IColor[]`数组。现在：什么是“类型”？`Foo``Bar`

如果数组非空，您可以查看第一项：

```
var type = items[0].GetType(); 
```

但如果数据是异构的，这将无济于事。您可以检查*不同*的类型并希望它是同质的：

```
var type = items.Select(x => x.GetType()).Single(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T11:56:04.707

这只是@Wouter de kort 所说的一个例子

```
internal class Program
{
    private static void Main(string[] args)
    {
        IColour[] items;
        items = new IColour[] { new SomeColour(), new SomeOtherColour() };

        Console.WriteLine(items.GetType().GetElementType().Name);  // Will always return IColour

        foreach (var item in items)
        {
            Console.WriteLine(item.GetType().Name); // Will return the name of type added with the IColour interface
        }

        Console.ReadLine();
    }
}

internal interface IColour
{ }

internal class SomeColour : IColour
{ }

internal class SomeOtherColour : IColour
{ } 
```

# ios - XCode ibtool 命令寻找不存在的目录

> ID：14873996
> 
> 赞同：4
> 
> 时间：2013-02-14T11:39:07.610
> 
> 标签：ios, xcode, command-line, command-line-tool, ibtool

我正在尝试使用`ibtool`命令行实用程序。`.xib`我已经在我要处理的项目目录中打开了终端，并且我按照 Apple 文档中的说明编写了命令：

```
ibtool --generate-strings-file MainMenu.strings MainMenu_iPhone.xib 
```

我还没有`.xib`本地化这个文件，所以它不在任何本地化`.lproj`目录中。当我运行这样的命令时，我得到这个输出：

```
xcrun: Error: could not stat active Xcode path '/Volumes/Xcode/Xcode.app/Contents/Developer'. (No such file or directory) 
```

我没有为 Xcode 安装的卷。为什么`ibtool`要找那个目录？

我正在使用 XCode 4.4.1 并开发 iOS 应用程序。提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T11:55:25.077

好的，您必须更正`xcode-select`（[manpage](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html)）才能`xcrun`正确使用：

（来自 Terminal.app）：

```
$ xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

# c++ - 播放流声音 OpenAL

> ID：14873998
> 
> 赞同：0
> 
> 时间：2013-02-14T11:39:09.037
> 
> 标签：c++, audio, boost, openal

我需要用 OpenAL 播放流声音。这是我的代码，但它不起作用。我需要做什么？

```
 device = alcOpenDevice(NULL);
    //
    ofstream file;
    file.open("TESTSPEAKER", std::ios_base::binary);
    context = alcCreateContext(device, NULL);
    alcMakeContextCurrent(context);
    // alGetError();
    char *alBuffer;
    ALenum alFormatBuffer;
    ALsizei alFreqBuffer;
    long alBufferLen;
    ALboolean alLoop;
    unsigned int alSource;
    unsigned int alSampleSet;
    boost::array <char, 882> buf;
    while (!ExitKey)
    {
        boost::system::error_code error;
        size_t len = VoiceSocket->read_some(boost::asio::buffer(buf), error);
        if (len==0)
        {
            continue;
        }
        file.write(buf.data(), 882);
        alGenSources(1, &alSource);
        alGenBuffers(1, &alSampleSet);
        alBufferData(alSource, AL_FORMAT_MONO16, buf.data(), buf.size(), 44100);
        alSourcei(alSource, AL_BUFFER, alSampleSet);
        //
        //alSourcei(alSource, AL_LOOPING, alSampleSet);

            alSourcePlay(alSource);

        //alSourcePlay(alSource);
    }
    VoiceSocket->close();
    file.close(); 
```

如果我看到我的文件（“TESTSPEAKER”），我会看我的声音。所以我在网络上正确地传递它。但是我怎样才能用 openal 播放这个声音呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T12:22:37.467

如果您正在流式传输，那么您应该使用

```
alSourceQueueBuffers(alSource, 1, &alSampleSet); 
```

而不是将其设置为静态缓冲区，例如

```
alSourcei(alSource, AL_BUFFER, alSampleSet); 
```

`alSourcePlay(alSource);`当第一个缓冲区排队时，只发出一次命令。

# dojox.charting - 改变图表位置道场

> ID：14873999
> 
> 赞同：0
> 
> 时间：2013-02-14T11:39:10.970
> 
> 标签：dojox.charting

我们如何改变图表在道场中的位置？
我无法更改饼图的位置。

```
chart.addPlot("pttt",  {
    type: Pie,
    radius:50,
    htmlLabels: false           //See the code on jsfiddle
}); 
```

[Jsfiddle 链接](http://jsfiddle.net/vusan/6JfHQ/)