# StackOverflow 问答 15559000-15559999

# asp.net-mvc-4 - MVC - 应用程序组装

> ID：15559005
> 
> 赞同：0
> 
> 时间：2013-03-21T21:58:38.003
> 
> 标签：asp.net-mvc-4

**问题：**

如果我在一个解决方案中有多个项目，是否仍将其视为单个程序集？

背景信息：我知道“MyApplication/Properties/AssemblyInfo.cs”文件存在。此外，我确认当我：

1.  将项目添加到解决方案。
2.  适当引用新添加的项目。
3.  最后，构建解决方案。

“MyApplication/Properties/AssemblyInfo.cs”文件没有改变。这让我相信，如果我错了，请纠正我，我会满足要求。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:12:14.253

不。

在您的情况下，每个项目都被编译成一个程序集。编译任何东西时，assemblyinfo.cs 文件（对于每个项目）都不应该发生任何变化。此外，该文件的*名称*根本不重要。它内部的全局属性导致*正在创建的程序集的*各种属性被设置。该文件的名称和位置只是一个约定。

# ios - 以编程方式将调用 segue 的发件人传递到目的地

> ID：15559008
> 
> 赞同：1
> 
> 时间：2013-03-21T21:58:53.877
> 
> 标签：ios, objective-c, storyboard, segue

对不起，如果标题不是很清楚，但希望我能在这里详细说明。

我有一个 ViewController `MatchLineupViewController`，它显示 22 个按钮来代表球队中的橄榄球运动员。当用户点击这些按钮中的任何一个时，会在以下方法中以编程方式调用模态转场：

```
- (IBAction) showSquadSelector:(UIButton *)sender {
    [self performSegueWithIdentifier:@"SeguePopupSquad" sender:sender];
} 
```

然后显示的模态 ViewController 称为`SquadSelectViewController`. 它将选定的播放器对象传回给`MatchLineupViewController`充当委托的 。这完美地工作。

但是，我想将`profile_picture`返回对象的属性分配给`UIButton`首先发送 segue 的对象。

**编辑 -**返回的对象是一个 NSDictionary，如以下代码所示：

```
- (void) selectPlayer:(NSDictionary *)player forButton:(UIButton *)sender {
    [sender.imageView setImage:[UIImage imageWithContentsOfFile:[player objectForKey:@"profile_picture"]]];
} 
```

我该怎么做呢？如果您需要任何进一步的代码来理解我的要求，我可以提供。

非常感谢，克里斯

**编辑 -**

```
- (IBAction) showSquadSelector:(UIButton *)sender {
    [self performSegueWithIdentifier:@"SeguePopupSquad" sender:sender];
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"SeguePopupSquad"]) {
        SquadSelectViewController *ssvc = (SquadSelectViewController *) segue.destinationViewController;
        ssvc.myDelegate = self;
        ssvc.senderButton = sender;
    }
}

- (void) selectPlayer:(NSDictionary *)player forButton:(UIButton *)sender {
    [sender.imageView setImage:[UIImage imageWithContentsOfFile:[player objectForKey:@"profile_picture"]]];
    NSLog(@"%@", [player description]);
    NSLog(@"%@", [sender description]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:07:41.387

您可以将`sender`您的`showSquadSelector:`方法转发到 segue，如下所示：

```
[self performSegueWithIdentifier:@"SeguePopupSquad" sender:sender]; 
```

segue的`sender`将是触发 segue 的按钮，因此从 segue 触发的代码将知道是哪个按钮触发了它：您`prepareForSegue:`将拥有正确的`UIButton`. 您现在可以将它添加到返回的字典中的预定键（例如，`@"senderButton"`），并在从 segue 返回时检查它。

# php - 当前时间 PHP

> ID：15559009
> 
> 赞同：-1
> 
> 时间：2013-03-21T21:58:58.857
> 
> 标签：php, time

我想使用时间函数 time() 来输出患者的预期等待时间。

我目前有以下领域；

```
 PatientID   Forename  Surname   Illness   Priority    Waiting Time 
```

如何将时间函数合并到 PHP 中以获取当前时间以进行以下计算；

```
 waiting time would be (the clock time - the arrival time) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:07:37.620

在数据库中，您应该使用`time()`函数节省时间。这有利于排序等等。当您想查看带有格式的日期时，只需使用 with`date('G:ia', $time);`

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:09:45.080

您应该将[纪元/unix](http://en.wikipedia.org/wiki/Unix_time)时间存储在数据库中：

```
$the_time = time(); 
```

您可以将所有不同的时间戳存储为这些[纪元/unix](http://en.wikipedia.org/wiki/Unix_time)时间，然后轻松将它们转换为日期：

```
date( 'G:ia', $the_time ); 
```

您还可以使用[epoch/unix](http://en.wikipedia.org/wiki/Unix_time)时间轻松确定两个不同时间之间的距离：

```
$the_time_1 = "1363903644";
$the_time_2 = "1363900644";

$time_diff = $the_time_1 - $the_time_2;
$hours = $time_diff / 3600; // 60 * 60 = number of seconds in an hour
echo $hours . ' hours'; 
```

要响应您对处理等待时间的函数的请求：

```
$the_time_1 = "1363903644";
$the_time_2 = "1362900644";

echo waiting_time( $the_time_1, $the_time_2 );

function waiting_time( $time_1, $time_2 ) {

    $time_diff  = $time_1 - $time_2;
    $days       = floor( $time_diff / 86400 ); // 60 * 60 * 24 = number of seconds in a day
    $time_diff -= $days * 86400;
    $hours      = floor( $time_diff / 3600 ); // 60 * 60 = number of seconds in a hour
    $time_diff -= $hours * 3600;
    $mins       = floor( $time_diff / 60 ); // 60 = number of seconds in a minute

    return( $days . ' days, ' . $hours . ' hours, ' . $mins . ' minutes' );

} 
```

# drools - 如果 Drool 中的字符串为空，则条件映射

> ID：15559016
> 
> 赞同：2
> 
> 时间：2013-03-21T21:59:19.010
> 
> 标签：drools, rule, rule-engine

我有一个规则模板，它使用表达式（drool）将参数映射到条件/动作。

```
<mapping>Fact(action == '{Parameter}')</mapping> 
```

问题是当我有一个规则时，`{Parameter}`我在 REST 客户端中收到的字符串是 null 或空字符串

```
<action>{Parameter}</action> 
```

代替

```
<action></action> 
```

我怎样才能有条件地映射我的参数，如：

```
<mapping>Fact(action == {Parameter} ? '{Parameter}' : null)</mapping> 
```

# java - libgdx 我的启动画面没有显示

> ID：15559021
> 
> 赞同：0
> 
> 时间：2013-03-21T21:59:35.357
> 
> 标签：java, screen, libgdx

我正在编写一个 libgdx 游戏，但似乎我无法显示我的启动画面，它只显示黑屏。有谁知道这是怎么回事？

我没有收到任何运行时错误，它只显示黑屏，即使我将 glClearColor 设置为其他颜色，然后是黑色

```
package mygame;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.Sprite;  
import com.badlogic.gdx.graphics.g2d.SpriteBatch;

 public class SplashScreen implements Screen {

Texture splashTexture;
Sprite splashSprite;
SpriteBatch batch;
MyGame game;

public SplashScreen(MyGame game) {
    this.game = game;
}

@Override
public void render(float delta) {
    Gdx.gl.glClearColor(0, 0, 0, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    batch.begin();
    splashSprite.draw(batch);
    batch.end();
}

@Override
public void resize(int width, int height) {

}

@Override
public void show() {
    splashTexture = new Texture("mygame/splash.png");
    splashTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

    splashSprite = new Sprite(splashTexture);
    //splashSprite.setColor(1, 1, 1, 0);
    splashSprite.setX(Gdx.graphics.getWidth() / 2 - (splashSprite.getWidth() / 2));
    splashSprite.setY(Gdx.graphics.getHeight() / 2 - (splashSprite.getHeight() / 2));

    batch = new SpriteBatch();
}

@Override
public void hide() {

}

@Override
public void pause() {

}

@Override
public void resume() {

}

@Override
public void dispose() {

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:36:18.770

我试过你的代码（见下文），它运行得很好，所以问题可能出在*MyGame*类上。例如，您是否覆盖*Game.render()*然后不调用*super.render()*？

```
package hacks;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.backends.lwjgl.LwjglApplication;
import com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;

public class MyGame extends com.badlogic.gdx.Game {

    @Override
    public void create() {
        setScreen(new SplashScreen(this));
    }

    public static void main(String[] args) {
        LwjglApplicationConfiguration config = new LwjglApplicationConfiguration();

        config.title = MyGame.class.getName();
        config.width = 800;
        config.height = 480;
        config.fullscreen = false;
        config.useGL20 = true;
        config.useCPUSynch = true;
        config.forceExit = true;
        config.vSyncEnabled = true;

        new LwjglApplication(new MyGame(), config);
    }
}

class SplashScreen implements Screen {

    Texture splashTexture;
    Sprite splashSprite;
    SpriteBatch batch;
    MyGame game;

    public SplashScreen(MyGame game) {
        this.game = game;
    }

    @Override
    public void render(float delta) {
        Gdx.gl.glClearColor(0, 0, 0, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

        batch.begin();
        splashSprite.draw(batch);
        batch.end();
    }

    @Override
    public void resize(int width, int height) {
    }

    @Override
    public void show() {
        splashTexture = new Texture("assets/data/libgdx.png");
        splashTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

        splashSprite = new Sprite(splashTexture);
        // splashSprite.setColor(1, 1, 1, 0);
        splashSprite.setX(Gdx.graphics.getWidth() / 2 - (splashSprite.getWidth() / 2));
        splashSprite.setY(Gdx.graphics.getHeight() / 2 - (splashSprite.getHeight() / 2));

        batch = new SpriteBatch();
    }

    @Override
    public void hide() {

    }

    @Override
    public void pause() {

    }

    @Override
    public void resume() {

    }

    @Override
    public void dispose() {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:16:28.350

这就是我的游戏类的样子：

```
package mygame;

import com.badlogic.gdx.Game;

 public class MyGame extends Game {

@Override
public void create() {

    setScreen(new SplashScreen(this));
}

@Override
public void resize(int width, int height) {
    // TODO Auto-generated method stub

}

@Override
public void render() {
    // TODO Auto-generated method stub

}

@Override
public void pause() {
    // TODO Auto-generated method stub

}

@Override
public void resume() {
    // TODO Auto-generated method stub

}

@Override
public void dispose() {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T08:51:57.173

这就是你的游戏类的样子……你需要调用**超级**函数。

```
package com.sample;

import com.badlogic.gdx.Game;

public class Sample extends Game{

    @Override
    public void dispose() {
        // TODO Auto-generated method stub
        super.dispose();
    }

    @Override
    public void pause() {
        // TODO Auto-generated method stub
        super.pause();
    }

    @Override
    public void resume() {
        // TODO Auto-generated method stub
        super.resume();
    }

    @Override
    public void render() {
        // TODO Auto-generated method stub
        super.render();
    }

    @Override
    public void resize(int width, int height) {
        // TODO Auto-generated method stub
        super.resize(width, height);
    }

    @Override
    public void create() {
        // TODO Auto-generated method stub
        setScreen(new AnotherScreen(this));
    }

} 
```

# stored-procedures - 使用 JDBC 可调用 stmt 存储 proc 时返回的结果集的顺序是什么？

> ID：15559023
> 
> 赞同：0
> 
> 时间：2013-03-21T21:59:48.500
> 
> 标签：stored-procedures, jdbc, multiple-resultsets, callable-statement

(1) 当您在存储过程中打开多个游标，然后使用 JDBC 可调用语句遍历结果集时，每个结果集的返回顺序与它们在存储过程中打开游标的顺序相同存储过程？或者反过来呢？或者....？

(2) 有没有办法通过序列号或名称指定首先处理哪个结果集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:59:17.917

For 1：对于 JDBC，返回结果集的顺序是未定义的，因此取决于您的实际数据库系统。也就是说，存储过程以与存储过程生成的顺序不同的顺序返回结果是非常不合逻辑的。

对于 2：再一次，这不是 JDBC 定义的。但是，我还没有听说过允许您通过存储过程中的顺序以外的任何方式控制返回结果的顺序的数据库系统。

# php - Mysql语法错误（我找不到错误是什么！）

> ID：15559025
> 
> 赞同：0
> 
> 时间：2013-03-21T22:00:11.860
> 
> 标签：php, mysql

我有以下mysql查询：

```
REPLACE INTO application (export_date,application_id,title,recommended_age,artist_name,seller_name,company_url,support_url) VALUES (1362564068339,564783832,Eyelashes,4+,Char Room,Char Room,http://,http://ios.charroom.net/,http://itunes.apple.com/app/) 
```

我收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Char Room,Char Room,http://,http://ios.charroom.net/,http://itunes.apple.com/app' at line 1 
```

我似乎看不到错误在哪里。有人可以帮我吗？

您必须知道以上是实际查询的回声。此查询中的所有参数在进入查询之前都经过了 mysql_real_escape_string。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:02:20.337

好吧，首先你[不应该使用](http://php.net/manual/en/function.mysql-real-escape-string.php) `mysql_real_escape_string`：

> *此扩展*自 PHP 5.5.0 起已弃用，*并将在未来删除*。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

其次，您仍然需要在字符串周围加上引号。`mysql_real_escape_string`将转义字符串中的引号，但不会将引号添加到开头和结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:02:02.910

您必须在要插入数据库的数据周围加上引号。

# php - 通过 AJAX 上传文件时获取文件上传进度？

> ID：15559026
> 
> 赞同：0
> 
> 时间：2013-03-21T22:00:17.240
> 
> 标签：php, ajax, file-upload

我正在使用 ajax 上传多个文件（视频和图像）。我没有使用表格。

我已经看到提到“session.upload_progress”指令的资源。当我使用 FORM 时，一切正常。

但是，我有一个以前构建的系统，它通过 AJAX 而不是表单（使用拖放）上传文件。由于“session.upload_progress”需要在表单和 PHP 文件中隐藏“session.upload_progress.name”指令，因此“session.upload_progress.prefix”与表单名称一起被引用，以获取进度上传，我不确定如何将“session.upload_progress.name”指令发送到上传脚本。

有人可以指导我正确的做法吗？

仅供参考，我使用的是 PHP 5.4

# javascript - Superfish 菜单在 IE9 中显示损坏的结构，在 Chrome 中运行良好

> ID：15559027
> 
> 赞同：0
> 
> 时间：2013-03-21T22:00:22.267
> 
> 标签：javascript, jquery, html, css, superfish

我的超级鱼菜单在 Chrome、Firefox 和 Safari 中运行良好，但在 IE9 下结构被破坏了。我试图应用 z-index 值并寻找其他可能的问题几个小时，但我仍然无法让它在 IE9 下工作。

有人可以帮助我解决问题或指出正确的方向。非常感谢！

这是演示站点：http: [//goo.gl/zwNFO](http://goo.gl/zwNFO)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:57:20.590

有很多缺失的结束标签。

```
<div class="site-container full-width" id="section-sub-footer">
<span class="copyright"> 
```

也许这个：

```
<div class="site-container full-width" id="section-thirds"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:41:37.060

对于您拥有的所有浮动元素，您可能会遇到 z-index 排序问题。你可以试试我为 IE7 反向渲染创建的这个小脚本；你的旅费可能会改变。

```
 var zIndexNumber = 10000;
        $('div, span, ul').each(function () {
            $(this).css('zIndex', zIndexNumber);
            zIndexNumber -= 1;
        }); 
```

# c# - 以编程方式更改页面标题的 MasterPage 部分

> ID：15559032
> 
> 赞同：3
> 
> 时间：2013-03-21T22:00:50.880
> 
> 标签：c#, asp.net

我想覆盖 MasterPage 标题。注意：我不是在谈论从内容页面设置标题的一部分。

我的 MasterPage 中有这个：

```
<head id="Head1" runat="server">
    <title>My Site | <% = Page.Title %></title>
</head> 
```

其中，结合我的内容页面上的这个......

```
<%@ Page Title="Content page title" ... %> 
```

向用户提供以下内容：

`<title>My Site | Content page title</title>`，这在 99.9% 的情况下都很棒。但是，我希望能够更改交付给客户端的整个标题，使其不包括 MasterPage IE 头部中指定的部分：`<title>Special content page</title>`

是否可以以编程方式从内容页面更改整个页面标题？我不想更改 MasterPage 的配置或使用不同的 MasterPage。

**编辑：**我还需要能够在不更改现有内容页面的情况下实现这一点。抱歉，我没有明确说明这一点。我以为它会被理解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-06T06:42:02.160

将母版页标记更改为

```
<head id="Head1" runat="server">
    <title><asp:Literal ID="MasterPageTitle" runat="server" /></title>
</head> 
```

在你的 masterpage.cs

```
public string ExplicitTitle { get; set; }

protected void Page_PreRender(object sender, EventArgs e)
{
    if (string.IsNullOrWhiteSpace(this.ExplicitTitle))
    {
        this.MasterPageTitle.Text = "My Site | " + Page.Title;
    }
    else
    {
        this.MasterPageTitle.Text = this.ExplicitTitle;
    }
} 
```

在您的“特殊内容页面”中，将此添加到 Page_PreRender

```
((MySiteMaster)this.Master).ExplicitTitle = "Special content title"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:11:21.053

根据您使用的 ASP.Net 形式，有两种方法。

如果您使用的是 MVC，那么只需在您的 ViewBag 中设置一个名为“PageTitle”的属性，然后在您的母版页中引用它：

在 HomeController.cs

```
@ViewBag.PageTitle = 'Overridden Title' 
```

在您的母版页中：

```
<head id="Head1" runat="server">
    <title>My Site | <% = @ViewBag.PageTitle %></title>
</head> 
```

如果您使用的是基于 WebForms 的应用程序，您可以通过首先通过“混合服务器控件”公开 html 标题来做到这一点

在您的母版页中，将内容更改为：

```
<head id="Head1" runat="server">
    <title id="MasterTitle" runat="server"></title>
</head> 
```

然后在您的子页面中，在顶部添加对母版页的类型引用：

```
<%@ MasterType virtualpath="~/Templates/YourMasterPage.master" %> 
```

在您的子页面代码后面，您现在可以通过。

```
Master.MasterTitle.Text = "Overridden Title"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T19:03:47.930

*在母版页中*

```
<title>
    <asp:ContentPlaceHolder ID="cphMasterTitle"
     runat="server"/>
</title> 
```

*在子页面中*

```
<asp:Content ID="contentChildTitle" ContentPlaceHolderID="cphMasterTitle"
    runat="server">
    <asp:literal ..... etc ... />
</asp:Content> 
```

或不使用内容/占位符

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Me.Title = "Child Title"
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-21T08:59:07.153

对于 VS2012，在您的子页面中，如果使用 WebForms，则您的母版页中完全没有任何更改。现在一切都可以通过您的子页面完成：

以下语句位于子页面代码的最顶部：

```
`<%@ Page Title="Insert Your Title here" Language="C#" MasterPageFile="~/MyMasterPage.Master" AutoEventWireup="true" CodeBehind="SomeChildPage.aspx.cs" Inherits="SomeProject.WebForm1" %>` 
```

# c# - 是否可以为 List 预分配内存 ?

> ID：15559036
> 
> 赞同：1
> 
> 时间：2013-03-21T22:01:11.087
> 
> 标签：c#, .net, list, memory

`List<double>`是否可以使用 C# 在 .NET 4.5 中预分配内存？我正在将数百万条数据添加到我的列表中。我知道如果我可以在写入之前预先分配一些内存会更有效率。

是否可以？

更新：我正在从外部传感器捕获数据。我不知道我会得到多少数据。这就是我使用列表的原因。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T22:02:35.827

琐碎：

```
var list = new List<double>(2000000); 
```

为 2M 双打分配空间。

# cordova - 如何在jquery mobile phonegap应用程序中检测生产环境？

> ID：15559037
> 
> 赞同：0
> 
> 时间：2013-03-21T22:01:15.910
> 
> 标签：cordova, jquery-mobile, environment

我有一个简单的问题。我编写了一个运行良好并部署在生产环境中的 jquery 移动应用程序。我有一些配置值从我的开发环境更改为生产环境。为了检测我是否在开发环境中运行，我使用了以下代码行（coffeescript）

```
env = if window.location.hostname.indexOf('localhost') == 0 then 'dev' else 'production' 
```

这工作正常。但是当你开始在 phonegap 环境中开发时，这是不够的。例如，在 ios 6 模拟器中运行时，window.location 似乎返回一个空字符串。

在适用于所有情况的 jqm phonegap 应用程序中检测开发环境的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:21:23.723

我希望您对开发和生产应用程序使用不同的捆绑包 ID。然后您可以使用[wizUtils 插件](https://github.com/Wizcorp/phonegap-plugin-wizUtils)并读取包标识符。在 JS switch case 语句中，您可以根据包 ID 设置 dev 和 prod 配置。因此，这样您在进行产品构建时不必更改源代码中的任何内容。如果您对 dev 和 prod 使用相同的 bundle id，则必须有一个变量，该变量将具有当前环境值，并且每次为另一个环境进行构建时都需要更新该变量。

# zurb-foundation - 如何使用 Foundation 将项目符号位置设置为右上角？

> ID：15559039
> 
> 赞同：1
> 
> 时间：2013-03-21T22:01:25.880
> 
> 标签：zurb-foundation, orbit

我试图将子弹定位到图像的右上角，但是当我这样做并调整屏幕大小时，子弹会移动位置。

这是我的代码

```
.orbit-bullets
{
    margin: 0 auto 30px auto;
    overflow: hidden;
    position: absolute;
    float:right;
    bottom:500px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T15:21:50.657

将它应用到这个元素上，不要使用浮动…</p>

```
.orbit-bullets-container {
position: absolute;
right: 25px;
top: 5px; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:57:37.690

这`bottom:500px`可能很危险，具体取决于您将 Orbit 放置在哪里。我要说的是，项目符号可能不可见，因为它们超出了页面。这可能是他们搬家的原因。你应该有这个：

```
.orbit-bullets {
    position: absolute;
    right: 25px;
    top: 5px;
} 
```

如果您没有为轨道提供您自己的 Foundation 类，最好只覆盖这三种样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:54:14.963

也许会帮助其他有同样问题的人。这个解决方案对我有用..

```
$(function(){
    var bullets = $('ol.orbit-bullets');
    bullets.insertBefore($(".orbit-container"));
}); 
```

如果你想向右对齐：

```
.orbit-bullets { text-align: right; } 
```

# maven - Maven 多模块优于简单依赖

> ID：15559041
> 
> 赞同：50
> 
> 时间：2013-03-21T22:01:29.670
> 
> 标签：maven, dependency-management, maven-module

我在 maven 项目方面有几年的经验，即使是多模块项目（这让我*讨厌*maven 的多模块功能（所以免责声明现在已经完成）），即使我真的很喜欢 maven，但有些东西我无法得到明确回答：

**多模块 Maven 项目的典型用例是什么？与简单的依赖关系和父 pom 相比，这种结构的附加值是什么？**

我已经看到了很多多模块项目的配置，但是所有这些都可以通过创建一个简单的依赖库结构来明确解决，这些依赖库作为可交付成果过着自己的生活（即使使用父 pom，作为单独的可交付成果：分解依赖和配置） ) 而且我还没有找到任何可以清楚地看到多模块结构的附加值的用例。

我一直发现这种结构会带来过度的复杂性而没有真正的好处：我在哪里遗漏了什么？（说实话，我知道有些人`ear`可以从这种结构中受益，但除了那个特定的用例之外，还有其他真正的用途和好处吗？）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-21T22:39:00.083

这是一个真实的案例。

我有一个多模块项目（你的咆哮......我没有看到它有任何复杂性。）最终结果是一个 webapp，但我有不同的模块用于 api、impl 和 webapp。

创建项目 12 个月后，我发现我必须使用从 jar 运行的独立进程与 Amazon S3 集成。我添加了一个依赖于 api/impl 的新模块，并为新模块中的集成编写代码。我使用程序集插件（或类似的东西）来创建一个可运行的 jar，现在我有一个可以在 tomcat 中部署的战争和一个可以在另一台服务器上部署的进程。我的 S3 集成过程中没有 Web 类，我的 Web 应用程序中没有 Amazon 依赖项，但我可以共享 api 和 impl 中的所有内容。

3 个月后，我们决定创建一个 REST webapp。我们希望将其作为一个单独的应用程序来完成，而不仅仅是现有 web 应用程序中的新 URL 映射。简单的。又一个模块，另一个 webapp 是 maven 构建的结果，没有特别的修改。业务逻辑在 webapp 和 rest-webapp 之间很容易共享，我可以根据需要部署它们。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-21T22:13:58.717

多模块的主要好处是

*   一个 Maven 命令一次构建所有模块。
*   最重要的是：maven 会为您处理构建顺序。
*   配置你的 CI 服务器也很容易：一个 jenkins 的工作来构建所有东西。

我已经在一个包含大约 30 个子模块的项目中工作过。有时，您需要更改模块以外的内容，并且运行一个命令并确保需要编译的所有内容都以正确的顺序编译是必须的。

**编辑**

为什么要 30 个子模块？

具有大量功能、大量开发人员、基于模块的功能分离的庞大框架。这是一个现实生活中的用例，将代码分离到模块中非常有意义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T22:08:39.140

我认为您在大多数使用多模块的项目中是正确的，实际上并不需要它们。

在我工作的地方，我们使用多模块项目（我认为这是有充分理由的）。我们有一些类似于面向服务的架构，所以每个应用程序

*   客户端模块
*   接口模块（在客户端和实现之间具有共享对象）
*   一个实现模块
*   战争模块

我同意将实现和战争模块放在同一个实际模块中是可以的，但是（可以说）这样做的好处是解决问题的类之间非常明确的划分以及应用程序如何与外部世界通信。

在以前只涉及 Web 应用程序的项目中，我尝试将所有内容放在同一个模块中，因为考虑到我正在使用的模块，它使测试更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-30T22:02:39.890

多模块可以帮助您重用代码。这是您在工作中感受到的最大好处之一。

想象一下，如果您有 3 个带有安全层的 Web 项目，您将不得不复制粘贴您的代码 3 次并尝试将其与每个项目连接起来。

但是，如果您创建一个具有特定工作的项目的安全模块怎么办。通过将其注入您的应用程序，然后使用它就很容易使用它。

正如@ben75 的回答中提到的那样，一个 Maven 构建命令和构建所有使用过的 jar 的正确顺序。你不会再想哪个取决于另一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-25T15:04:08.047

我发现 maven 模块非常有用，原因如下：

*   架构分层和边界

例如，我制作了一个 maven 模块`application-contract`，其中包含我的表示层看到的接口。所以我有 UI->Presenter-> application-contract <-application-impl <- Infrastructure -> 域。这样，我知道我的表示/UI 层将无法访问我的域/应用程序层中的类。如果我在 UI 中编码时域类不在类路径中，我将无法使用它们。我喜欢这种方式（利用类路径限制）。也许 Java 9 模块也可以解决这个问题，但是（不幸的是）我使用 Java 8。

*   每次在一个模块中运行测试

当我将代码更改为作为模块的层时（如前所述），我只能运行它的测试，而无需从我没有更改的代码中重新运行测试。这给了我速度。我的表示层测试需要大约 3 秒（300 次测试）。每次我将代码更改为 Presenter 或应用程序层以下的任何内容时，我都不希望我的数据库 H2 集成测试运行。或运行我的图像处理测试。因为这些做 IO 并且它们很慢。

*   建造

几乎是一样的。当我将代码更改为 UI 时，我只需要构建和部署 UI 的东西（我的 UI 是在 Java 中的）。

# regex - 从正则表达式中删除 .* 破坏了正则表达式

> ID：15559048
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:02:15.920
> 
> 标签：regex, vbscript, batch-file, cmd

我有以下代码，它确实包含 .* 但我删除了它们。这是我更改的行：

```
>>%vbs% echo regex.pattern="\nName=%~1\n" 
```

这曾经是：

```
>>%vbs% echo regex.pattern="\nName=.*%~1.*\n" 
```

但是当单词之前或之后的变量时，它也在搜索该行。我只希望它搜索 Name=(variable) 的完全匹配。变量是 var6。

我想要解决这个问题的原因是因为我希望在“Name =”之后搜索 var6 时删除通配符。因为我只想找到并更改“Name=var6”，而不是“Name=(sometext)var6(sometext)”。

上面的第一行不起作用，上面的第二行在变量之前和之后搜索通配符，所以这不是我想要的。我在上面的第一行做错了什么？

这是扩展代码（有问题的行在中间）：

```
SETLOCAL ENABLEDELAYEDEXPANSION
find "!var6!" < "Campaign_SCR2.mis.tmp" >nul && (
call :replace "!var6!"
call :stripdup "Campaign_SCR2.mis.tmp.tmp2" "Campaign_SCR2.mis.tmp" "(Class=.*\nType=.*\nOrigin=.*\nS    ide=.*)\nClass=.*\nType=.*\nOrigin=.*\nSide=.*" "$1"
del "Campaign_SCR2.mis.tmp.tmp2"
)
)
)
goto Loop
goto :EOF

:replace
set vbs="%temp%\%random%.vbs"
if exist %vbs% goto :replace

>%vbs% echo set regex=new regexp
>>%vbs% echo regex.global=true
>>%vbs% echo regEx.IgnoreCase=False
>>%vbs% echo regex.pattern="\nName=%~1\n"
>>%vbs% echo wscript.stdOut.write regex.replace    (wscript.stdin.readall,"Name=ShipDummy"+vbCRLF+"Class=ShipDummy"+vbCRLF+"Type=0"+vbCRLF+"Origin=Environmental"+vbCRLF+"Side=0"+vbCRLF)
cscript /nologo %vbs% <"Campaign_SCR2.mis.tmp" >"Campaign_SCR2.mis.tmp.tmp2"
del %vbs%
goto :EOF

:stripdup
set vbs="%temp%\%random%.vbs"
if exist %vbs% goto :stripdup

 >%vbs% echo set regex=new regexp
>>%vbs% echo regex.global=true
>>%vbs% echo regEx.IgnoreCase=False
>>%vbs% echo regex.pattern="%~3"
>>%vbs% echo wscript.stdOut.write regex.replace(wscript.stdin.readall,"%~4")
cscript /nologo %vbs% <"%~1" >"%~2"
del %vbs%
goto :EOF

:exitloop4
:Loop 
```

我为 var6 尝试了不同的值（在正则表达式中为 %~1 ）。我试过带空格和不带空格的值，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:44:05.320

怎么样（我只是猜测这就是你想要的）

```
>>%vbs% echo regex.pattern="[\w]*Name=[\w]*%~1[\w]*" 
```

这将匹配

```
(Any whitespace)Name=(Any Whitespace)var6(Any Whitespace) 
```

或者

```
>>%vbs% echo regex.pattern=".*[\w]*Name=[\w]*%~1[\w]*.*" 
```

这将匹配

```
(Anything)(Any whitespace)Name=(Any Whitespace)var6(Any Whitespace)(Anything) 
```

**注意：**顺便说一句，我在您的脚本中看不到任何`var6`设置的地方！如果它从未设置，那么它将始终是一个空白字符串。

# php - 为什么我不能销毁 php cookie？

> ID：15559049
> 
> 赞同：1
> 
> 时间：2013-03-21T22:02:19.740
> 
> 标签：php, cookies

在php中，几个月前，我最初设置了一个cookie，如下所示：

```
<?php
setcookie('reituser', 'john', time()+3600*100000000000, '/', '.'.$_SERVER['SERVER_NAME']);
?> 
```

但是现在，我尝试像这样取消设置

```
<?php
// this is the only line of code at http://mysite.com/test.php
setcookie('reituser', '', time()-10, '/', '.'.$_SERVER['SERVER_NAME']);
?> 
```

但无论我刷新浏览器多少次`http://mysite.com/test.php`，$_COOKIE 数组仍然填充有我的 reituser=>john。我该如何解决这个问题？

出于某种原因，我可以通过上述方法设置新的 cookie 变量并删除它们。但这只是 reituser=>john 似乎不起作用。reituser 这个词是保留词还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:07:40.630

你可以试试：

```
setcookie('reituser', '', time()-42000, '/', '.'.$_SERVER['SERVER_NAME']); 
```

此外，您可以使用 Firefox + Firebug 查看 cookie 域和其他 cookie 值，以查看您是否为 setcookie() 函数提供了适当的参数来取消设置（即，取消设置 cookie 的问题可能是路径和域参数） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T02:50:31.623

@Jon 你是对的，域已经改变了。我现在该怎么办？– 约翰 2 天前

@Jon - 好的，这段代码解决了问题 setcookie('reituser', '', time()-10, '/', '.mynewsitebecauseitchanged.com'); – 约翰 2 天前

# c# - 没有属性的自定义动作选择器

> ID：15559051
> 
> 赞同：0
> 
> 时间：2013-03-21T22:02:22.137
> 
> 标签：c#, asp.net-web-api

我想创建一个自定义操作选择器。

我已经通过扩展成功地做到了这一点`IControllerConfiguration`，`Attribute`但是这需要用`[CustomActionAttribute]`.

我想避免这种情况。我有一个自托管的 web api 服务，并且更愿意插入 `HttpSelfHostConfiguration`例如。我想要类似下面的东西。

```
 new HttpSelfHostConfiguration(baseAddress)
      .ControllerConfiguration
      .Add(new CustomActionAttribute()) 
```

上面的代码不起作用，但它描述了我试图达到的想法。

我还没有看到任何这样的例子，也没有看到任何显示设置 custom 的正确注入点的例子`IControllerConfiguration`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:08:18.940

如果您只想注册一个自定义操作选择器，您可以像这样在配置对象上进行操作：

```
var config = new HttpSelfHostConfiguration(baseAddress);
config.Services.Replace(typeof(IHttpActionSelector), new MyActionSelector()); 
```

一般来说，你可以在控制器配置中做的任何事情都应该能够在全局配置对象上做。

# wcf - 内容类型应用程序/soap+xml；charset=utf-8 不受服务支持

> ID：15559056
> 
> 赞同：54
> 
> 时间：2013-03-21T22:02:42.363
> 
> 标签：wcf

尝试将 WCF 服务添加到 WCFTestClient 时出现以下错误。我在网上浏览了许多解决方案，但我无法让它工作。

有人可以帮我解决这些问题吗？我还提供我的服务配置文件：

> 内容类型应用程序/soap+xml；charset=utf-8 was not supported by service 客户端和服务绑定可能不匹配。远程服务器返回错误：（415）无法处理消息，因为内容类型'application/soap+xml; charset=utf-8' 不是预期的类型 'text/xml; 字符集=utf-8

代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file 
  must be added to the host's app.config file. System.Configuration does not 
  support config files for libraries. -->
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="basicHttp" allowCookies="true"
                 maxReceivedMessageSize="20000000"
                 maxBufferSize="20000000"
                 maxBufferPoolSize="20000000">
          <readerQuotas maxDepth="32"
               maxArrayLength="200000000"
               maxStringContentLength="200000000"/>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
     <service name="WCFTradeLibrary.TradeService">
        <endpoint address="" binding="basicHttpBinding"
            bindingConfiguration="basicHttp"
            contract="WCFTradeLibrary.ITradeService">          
         </endpoint>
     </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint 
          above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faul`enter code here`ts for 
          debugging purposes,  
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception info`enter code here`rmation -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-14T07:58:18.323

我遇到命名问题。服务名称必须与您的实现完全一致。如果不匹配，则默认使用`basicHttpBinding`导致`text/xml`内容类型。

您的班级名称在两个地方 - SVC 标记和 CS 文件。

检查端点合同 - 再次准确的接口名称，仅此而已。我已经添加了无法存在的程序集名称。

```
<service name="MyNamespace.MyService">
    <endpoint address="" binding="wsHttpBinding" contract="MyNamespace.IMyService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-28T15:03:23.423

这是为我解决问题的 web.config 示例。注意< ***binding name="TransportSecurity" messageEncoding="Text" textEncoding="utf-8">***

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-06T06:45:43.457

在我的情况下，其中一个类没有默认构造函数 - 没有默认构造函数的类无法序列化。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-22T14:55:59.137

我遇到了同样的问题，通过执行以下操作将服务与服务行为“绑定”来使其工作：

为行为命名

> ```
> <serviceBehaviors>
>         <behavior name="YourBehaviourNameHere"> 
> ```

并参考您在服务中的行为

```
<services>
  <service name="WCFTradeLibrary.TradeService" behaviorConfiguration="YourBehaviourNameHere"> 
```

整个事情是：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="basicHttp" allowCookies="true"
                 maxReceivedMessageSize="20000000"
                 maxBufferSize="20000000"
                 maxBufferPoolSize="20000000">
          <readerQuotas maxDepth="32"
               maxArrayLength="200000000"
               maxStringContentLength="200000000"/>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
     <service name="WCFTradeLibrary.TradeService" behaviourConfiguration="YourBehaviourNameHere">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="basicHttp" contract="WCFTradeLibrary.ITradeService">          
         </endpoint>
     </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="YourBehaviourNameHere">
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faul`enter code here`ts for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception info`enter code here`rmation -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-24T10:29:37.707

正如其他人所建议的那样，这是由于服务客户端不匹配而发生的。

我遇到了同样的问题，调试什么时候知道绑定不匹配。我指的是**BasicHttpBinding**而不是**WSHTTPBinding**。就我而言，我指的是*BasicHttp*和*WsHttp*。我根据引用动态分配绑定。所以检查你的服务构造函数，如下所示

 ****[参考这张图片](https://i.stack.imgur.com/T3f0E.jpg)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-15T17:12:42.383

我的情况有不同的解决方案。客户端使用的是**basichttpsbinding** [1]，而服务使用的是 wshttpbinding。

我通过将服务器绑定更改为 basichttpsbinding 解决了这个问题。另外，我必须通过添加将目标框架设置为 4.5：

```
 <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web> 
```

[1] 通信通过 https。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-23T10:21:00.040

`WCF`当客户端尝试使用`MTOM extension (MIME type application/soap+xml`用于传输来发送其消息时可能会出现此错误`SOAP XML in MTOM`），但服务只能理解普通的 SOAP 消息（它不包含 MIME 部分，HTTP 请求中只有 text/xml 类型）。

确保您根据正确的`WSDL`.

为了在服务器端使用 MTOM，更改配置文件添加*messageEncoding*属性：

```
<binding name="basicHttp" allowCookies="true"
             maxReceivedMessageSize="20000000"
             maxBufferSize="20000000"
             maxBufferPoolSize="20000000"
             messageEncoding="Mtom" > 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-08T09:01:30.487

对我来说，由于涉及到大量的方法和类，因此很难识别问题。

我所做的是从 WebService 接口中注释（删除）一些方法并尝试，然后注释另一组方法并尝试，我一直这样做，直到找到导致问题的方法。

就我而言，它使用了一个无法序列化的复杂对象。

祝你好运！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-24T14:09:38.200

在我的情况下，同样的错误是由于缺少

```
[DataContract]
...
[DataMember] 
```

返回数据类型中的属性。

检查并尝试添加它们，看看是否有帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-01T09:44:44.990

我遇到了同样的错误信息。我设法修复它：

就我而言，错误是我错过了返回类的父类中的 [datacontract] 和 [datamember] 属性。错误消息具有误导性。

```
[OperationContract]
List<MyClass> GetData();

[DataContract]
public class MyClass : MyParentClass
{       
    [DataMember]
    public string SomeString { get; set; }      
}

// Missing DataContract
public class MyParentClass
{
    // Missing DataMember
    public int SomeNumber { get; set; }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-08T12:03:01.563

我遇到了同样的问题，并通过将**EnumMemberAttribute**用于枚举成员的属性来解决它。如果您使用枚举类型作为数据协定，并且其成员使用**DataMemberAttribute**属性，则会发生相同的错误。您必须对枚举成员使用**EnumMemberAttribute**

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-23T11:03:18.750

我的问题是我们自己的集合类，它被标记为 [DataContract]。从我的角度来看，这是一种干净的方法，它与 XmlSerializer 一起工作得很好，但对于 WCF 端点它正在破坏，我们不得不将其删除。没有 XmlSerializer 仍然可以工作。

**不工作**

```
[DataContract]
public class AttributeCollection : List<KeyValuePairSerializable<string, string>> 
```

**在职的**

```
public class AttributeCollection : List<KeyValuePairSerializable<string, string>> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-01T21:03:29.427

我在跟踪日志中也有同样的错误。我在 API 中新创建的函数抛出了同样的错误，但令我惊讶的是，旧函数表现良好。问题是 - 我的合同数据成员几乎没有对象类型的变量。soap-xml 无法很好地处理它，但是，我可以看到对象类型数组 (object[]) 正在顺利通过。只有一个简单的对象类型没有被soap解析。这可能是服务引发上述错误的另一个原因。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-06-28T20:48:50.273

我在使用 WebServiceTemplate spring ws [err] org.springframework.ws.client.WebServiceTransportException 时遇到同样的错误：无法处理消息，因为内容类型为 'text/xml; charset=utf-8' 不是预期的类型 'application/soap+xml; 字符集=utf-8'。[415] [错误] 在 org.springframework.ws.client.core.WebServiceTemplate.handleError(WebServiceTemplate.java:665)。我使用的 WSDL 具有 soap1.2 协议，默认情况下该协议是 soap1.1 。当我使用下面的代码更改协议时，它正在工作

```
 MessageFactory msgFactory = MessageFactory.newInstance(javax.xml.soap.SOAPConstants.SOAP_1_2_PROTOCOL);
     SaajSoapMessageFactory saajSoapMessageFactory = new SaajSoapMessageFactory(msgFactory);
     saajSoapMessageFactory.setSoapVersion(SoapVersion.SOAP_12);
     getWebServiceTemplate().setMessageFactory(saajSoapMessageFactory); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-02-03T23:42:33.197

我也遇到了同样的问题。就我而言，我使用的是 transfermode = streaming 和 Mtom。事实证明，我已经将我的一个变量（用于结构）命名为“HEADER”。这与作为 http 服务下载的一部分的消息元素 [ [http://tempuri.org/:HEADER]冲突。](http://tempuri.org/:HEADER])显然，必须避免使用“保留”字样作为参数名称。

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2016-01-28T11:18:41.157

我必须将 ?wsdl 参数添加到 url 的末尾。例如：[http://localhost:8745/YourServiceName/?wsdl](http://localhost:8745/YourServiceName/?wsdl)

* * *

## 回答 #17

> 赞同：-4
> 
> 时间：2013-12-12T12:45:19.587

检查绑定部分上标识到 web.config 的客户端配置文件****

# javascript - 如何在 javascript 中生成带有偏斜的正态分布？

> ID：15559063
> 
> 赞同：4
> 
> 时间：2013-03-21T22:03:08.060
> 
> 标签：javascript, random, statistics, d3.js, normal-distribution

我需要生成具有符合以下约束的偏斜的正态分布

1.  负西格玛（减去一个标准差）
2.  平均值（分布集中的值）
3.  正西格玛（加一个标准差）

目的是拥有一个将生成随机值的分布函数。

我已经尝试使用 Math.random() 并且还尝试了来自 d3.js 的 normal 和 irwinHall 分布，但无法弄清楚。有没有可能有帮助的 JS 库？任何帮助将不胜感激。

![在此处输入图像描述](../Images/ddd4767056b41559efbf04960810116c.png)

# sql-server - T_SQL Rank 函数未按预期工作

> ID：15559065
> 
> 赞同：1
> 
> 时间：2013-03-21T22:03:18.053
> 
> 标签：sql-server, tsql

再一次，我真的需要你的专业知识。看起来我在这里的排名不太好......我返回了两条记录，尽管它们的日期时间略有不同，但它们都是排名第一的。几分钟。谢谢大家，我非常感谢您一如既往的帮助。

```
 SELECT  CD.MEMACT,
                     CD.DATETIME,--DATETIME
                     CD.AG_ID,
                     RANK() OVER (PARTITION BY 
                                       CD.MEMACT,
                                       CD.DATETIME,
                                       CD.AG_ID
                                ORDER BY CD.DATETIME)RANKED

                 FROM MEM_ACT_TBL
                 WHERE CD.MEMACT='1024518' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:31:47.047

在没有看到您的数据的情况下，我可以说这是由于分区方法造成的。您的“分区”语句本质上是您分组确定数字位置重置的依据。“order by”决定了您如何订购该数据的顺序。看这个简单的例子，在我的第一个窗口函数中，我使用了太多的分区，因此只显示了一大堆冗余的。

简单的自提取示例：

```
declare @Person Table ( personID int identity, person varchar(8));

insert into @Person values ('Brett'),('Sean'),('Chad'),('Michael'),('Ray'),('Erik'),('Queyn');

declare @Orders table ( OrderID int identity, PersonID int, Desciption varchar(32), Amount int);

insert into @Orders values (1, 'Shirt', 20),(1, 'Shoes', 50),(2, 'Shirt', 22),(2, 'Shoes', 52),(3, 'Shirt', 20),(3, 'Shoes', 50),(3, 'Hat', 20),(4, 'Shirt', 20),(5, 'Shirt', 20),(5, 'Pants', 30),
(6, 'Shirt', 20),(6, 'RunningShoes', 70),(7, 'Shirt', 22),(7, 'Shoes', 40),(7, 'Coat', 80)

Select
    p.person
,   o.Desciption
,   o.Amount
,   row_number() over(partition by person, Desciption order by Desciption) as [Wrong I Used Too Many Partitions]
,   row_number() over(partition by person order by Desciption) as [Correct By Alpha of Description]
,   row_number() over(partition by person order by Amount desc) as [Correct By Amount of Highest First]
from @Person p
    join @Orders o on p.personID = o.PersonID 
```

我猜你可以这样做：

```
SELECT  
   CD.MEMACT,
   CD.DATETIME,--DATETIME
   CD.AG_ID,
   RANK() OVER (PARTITION BY CD.MEMACT ORDER BY CD.DATETIME, CD.AG_ID) RANKED
   FROM MEM_ACT_TBL
   WHERE CD.MEMACT='1024518' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T22:47:26.573

您提供的示例数据违反了您的期望：

```
MEMACT   DATETIME         AG_ID    RANK
-------  ---------------  -------  ----
1024518  12/26/2013 7:43  Ag_1541  1
1024518  12/26/2013 7:53  Ag_2488  1 
```

但在您的示例代码中，您`PARTITION BY CD.MEMACT, CD.DATETIME, CD.AG_ID`. 这明确意味着将所有不共享这些值的行视为完全独立的排名系列。由于您在上面介绍的两行没有相同`MEMACT`的`DATETIME`、 和`AG_ID`值，因此它们各自从 1 开始排名。

如果您期望上面的两行排名上升，那么您不能按除 之外的任何内容进行分区`MEMACT`，因为只有该列在行之间是相同的。然后，您很可能会按`DATETIME`then排序`AG_ID`（如果您有两行具有相同日期，则获得确定性），如下所示：

```
PARTITION BY CD.MEMACT ORDER BY CD.DATETIME, CD.AG_ID 
```

对同一列的任何排名函数都没有任何意义，`PARTITION BY` *因为* `ORDER BY`这将确保`ORDER BY`没有不同的数据可以使用，因为您已经将所有单独的系列隔离在同一列中。

# actionscript-3 - 禁用音频闪光

> ID：15559066
> 
> 赞同：0
> 
> 时间：2013-03-21T22:03:21.293
> 
> 标签：actionscript-3, audio

在创建 AS3 项目并添加音频时，我通常做的是拖动我想要使用的音频（例如，对于游戏菜单），当我想停止输入音频时

`SoundMixer.stopAll();`

我这样做是因为如果我说转到此菜单中的关于游戏框架，那么我将获得音频，但如果我回到我最初拥有音乐的主框架，它会加倍以及两个不同的音乐时间正在同时播放。如何在更改帧时停止播放而不必禁用音频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:59:59.220

在这些情况下，直接通过代码启动和停止声音会更容易。首先，右键单击库面板中的声音剪辑，然后选择属性。在 ActionScript 选项卡中，选中“Export for ActionScript”，并为其命名，例如 Music。然后，要播放和停止此剪辑，您可以使用以下代码：

```
import flash.media.Sound;
// create the music Sound object so that we can start playing
var music : Sound = new Music();
var musicChannel : SoundChannel;

// play the music
// the play() method returns a SoundChannel,
// which you can later use to stop the music
// notice that we first check to make sure musicChannel is null
// if it isn't null, music is already playing, so don't play it twice
if(musicChannel != null) musicChannel = music.play();

// when you switch screens, stop the music
// clear out the channel, so that we know that it is safe to start the music again
musicChannel.stop();
musicChannel = null; 
```

或者，如果您通过将音乐和声音放在时间线上来播放它们，您可以使用帧的同步设置来停止它。在时间线上，创建一个关键帧，您可以在其中切换屏幕并希望音乐停止播放。选择该帧，然后将要停止的声音剪辑拖到该帧上。在“属性”面板中，将“同步”选项更改为“停止”。这将导致只有选定的声音停止播放。

还有一种方法是创建一个空的 MovieClip，其中放置了声音。将同步设置更改为流，并用空帧填充剪辑，以便播放整个剪辑。然后，如果您将此剪辑放在主菜单屏幕上，则它将仅在主菜单期间播放。只要 MovieClip 存在并且正在播放，流声音只会播放声音。将此与正常的事件声音进行比较，无论如何都会播放整个声音。

后一种方法更老派和以电影为中心。如果您正在编写游戏，则更适合使用前一种方法来更好地控制代码中的音频。

# c# - Java 相当于 C# 中的 IEnumerator？

> ID：15559075
> 
> 赞同：3
> 
> 时间：2013-03-21T22:03:42.180
> 
> 标签：c#, java, iterator, equivalent, ienumerator

Java 库中是否有接口，它也列举了一些系列，但遵循与`Iterator`and稍有不同的逻辑`Enumeration`？即他们应该返回`boolean`on `next()`，说明是否到达下一个元素，并且应该有`getCurrent()`返回当前元素的方法？

**更新**

`Iterator.next()`不等价，`IEnumerator.Current`因为前者会在每次调用时推进迭代器，而后者不会。

**更新 2**

我正在用自己的功能设计自己的课程。我的问题是为了找到一个“有能力”的类比。示例 from`C#`只是一个示例，我没有将某些内容从`C#`to翻译`Java`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:57:30.637

这听起来像番石榴的[`PeekingIterator`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/PeekingIterator.html); 你可以`Iterator`用[`Iterators.peekingIterator`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Iterators.html#peekingIterator%28java.util.Iterator%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:52:57.000

您必须在 Java 中使用不同的方法。例如，而不是这个 C# 代码：

```
Dictionary<int?, int?> m = new Dictionary<int?, int?>();
for (IEnumerator<KeyValuePair<int?, int?>> it = m.GetEnumerator(); it.MoveNext();)
{
    Console.Write(it.Current.Key);
    Console.Write(it.Current.Value);
} 
```

您将需要使用：

```
java.util.HashMap<Integer, Integer> m = new java.util.HashMap<Integer, Integer>();
for (java.util.Iterator<java.util.Map.Entry<Integer, Integer>> it = m.entrySet().iterator(); it.hasNext();)
{
    java.util.Map.Entry<Integer, Integer> current = it.next();
    System.out.print(current.getKey());
    System.out.print(current.getValue());
} 
```

对这种特定转换的要求不高，因为您通常会在 C# 中使用“foreach”循环，这会更干净地转换为 Java。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T22:06:58.247

如果您使用标准的具体 Collection 类，例如`HashSet`和`ArrayList`仅命名两个，您将可以访问迭代器。

调用方法:**`collection.hasNext()`将返回一个 boolean**，但不推进指针。这将允许您确定是否应该尝试阅读`collection.next()`.

例子：

```
Set<String> numbers = new HashSet<>();

// fill in set...

while (numbers.hasNext()) {
    System.out.println(numbers.next());
} 
```

当然，您也可以使用 for-each 语法遍历集合：

```
for (String s : numbers) {
    System.out.println(s)
} 
```

# jquery - 如果选择了值，则将其用于输入选项，然后执行此操作

> ID：15559078
> 
> 赞同：0
> 
> 时间：2013-03-21T22:04:04.383
> 
> 标签：jquery, jquery-ui

我正在尝试在我的 jquery 中使用它，以便我可以使用相同的类但具有彼此独立的效果

这是我正在做的小提琴

[http://jsfiddle.net/d0okie0612/ThnKc/](http://jsfiddle.net/d0okie0612/ThnKc/)

正如您选择选项 3 时一样，两个选择标签都会出现“嘿”这个词，但我希望它使用同一个类彼此独立。

我想我可以使用类似的东西来做到这一点

```
 $(this).children('div.custom_size').fadeIn() 
```

但它似乎不起作用，我已经被卡住和沮丧了很长时间

继承人的html

```
 <select id="print_size_options_LargeFormatBlackWhite">
   <option value="">1</option>
   <option value="">2</option>
   <option value="customSize">3</option>
 </select>

 <div class="custom_size" style="display: none;">
   Hello
 </div>

 <br />
 <br />
 <br />
 <select id="print_size_options_LargeFormatBlackWhite">
   <option value="">1</option>
   <option value="">2</option>
   <option value="customSize">3</option>
 </select>

 <div class="custom_size" style="display: none;">
   Hello
 </div> 
```

这是Jquery

```
 $("#print_size_options_LargeFormatBlackWhite").change(function(evt) {
    var selected;
    selected = $(this).val();
    if (selected === "customSize") {
      return $(".custom_size").fadeIn();
  } else {
     return $(".custom_size").fadeOut();
  }
   }).change(); 
```

我是 jQuery 的超级新手，所以如果你能在小提琴中告诉我，那就太好了！

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:12:52.963

愿这会有所帮助。我认为元素的 ID 应该是唯一的

[http://jsfiddle.net/sUuqd/1/](http://jsfiddle.net/sUuqd/1/)

```
$(".print_size_options_LargeFormatBlackWhite").change(function(evt) {
 var selected;
 selected = $(this).val();
 if (selected === "customSize") {
    return $(this).parent().find(".custom_size").fadeIn();
  } else {
return $(this).parent().find(".custom_size").fadeOut();
 }
}).change(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:07:28.947

提供相对于`$(this)`元素的上下文：

```
 if (selected === "customSize") {
    return $(this).next(".custom_size").fadeIn();
  } else {
    return $(this).next(".custom_size").fadeOut();
  } 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ThnKc/7/)。

*此外*，您的 HTML 无效，`id` ***在文档中必须是唯一的***，因此您应该为`select`元素使用类名：

```
<select class="print_size_options_LargeFormatBlackWhite">
<!-- removed for brevity -->
</select>
<div class="custom_size" style="display: none;">Hello</div>
<!-- removed for brevity -->
<select class="print_size_options_LargeFormatBlackWhite">
<!-- removed for brevity -->
</select>
<div class="custom_size" style="display: none;">Hello</div> 
```

使用 jQuery：

```
$(".print_size_options_LargeFormatBlackWhite").change(function (evt) {
    var selected = $(this).val();
    $(this).next('.custom_size')[selected === 'customSize' ? 'fadeIn' : 'fadeOut']();
}).change(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ThnKc/9/)。

最后，因为有时我只是有点过于喜欢使用三元运算符：

```
$(".print_size_options_LargeFormatBlackWhite").change(function (evt) {
    var selected = $(this).val();
    $(this).next('.custom_size')[selected === 'customSize' ? 'fadeIn' : 'fadeOut']();
}).change(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ThnKc/8/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:16:09.573

看看我的[小提琴](http://jsfiddle.net/fge7S/)。我向`for="someid"`select 添加了一个属性，我们使用该属性来识别 select 代表哪个 div。

我的 js 看起来像这样：

```
$("select").change(function(evt) {
  var selected;
  selected = $(this).val();
  if (selected === "customSize") {
    return $(".custom_size#"+$(this).attr("for")).fadeIn();
  } else {
    return $(".custom_size#"+$(this).attr("for")).fadeOut();
  }
}).change(); 
```

和这样的html：

```
<select id="print_size_options_LargeFormatBlackWhite" for="a">
   <option value="">1</option>
    <option value="">2</option>
    <option value="customSize">3</option>
</select>

<div id="a" class="custom_size" style="display: none;">
    Hello
</div> 
```

第二个选择只有一个`for="b"`，第二个 div 有`id="b"`

# python - 机器人上车轮编码器的 Python 线程

> ID：15559079
> 
> 赞同：1
> 
> 时间：2013-03-21T22:04:05.200
> 
> 标签：python, python-multithreading, robot

我正在为我的大学参加比赛的机器人编写代码。我目前正在尝试使用反射传感器构建一些车轮编码器。不久前我意识到我可能需要使用线程来实现这一点，因为机器人需要同时监控左右编码器。下面的代码是我到目前为止所拥有的：

```
from __future__ import division
import threading
import time
from sr import *
R = Robot()

class Encoder(threading.Thread):
    def __init__(self, motor, pin, div=16):
        self.motor = motor
        self.pin = pin
        self.div = div
        self.count = 0
        threading.Thread.__init__(self)

    def run(self):
        while True: 
            wait_for(R.io[0].input[self.pin].query.d)
            self.count += 1

    def rotations(self, angle, start_speed=50):
        seg = 360/self.div
        startcount = self.count
        current_dist = angle #Distance away from target
        R.motors[self.motor].target = start_speed
        while current_dist > 360:
            newcount = self.count - startcount
            current_dist = angle - newcount*seg
            R.motors[self.motor].target = 50
        while abs(current_dist) > seg/2:  
            newcount = self.count - startcount
            current_dist = angle - newcount*seg
            current_speed = start_speed * current_dist / 360
            if current_speed < 5:
                R.motors[self.motor].target = 5
            else:
                R.motors[self.motor].target = current_speed
        R.motors[self.motor].target = 0

WheelLeft = Encoder(0,0)
WheelLeft.start()
WheelRight = Encoder(1,3)
WheelRight.start()

WheelRight.rotations(720)
WheelLeft.rotations(720) 
```

sr 模块由举办比赛的南安普顿大学提供。它允许我们与机器人的硬件进行交互。

现在，创建的线程似乎允许分别监控两个反射传感器。这段代码：`R.io[0].input[self.pin].query.d`计算来自反射传感器的值是否发生了变化。“旋转”方法通过不断检查车轮已经转动了多少度，并在到达终点时减慢速度，将车轮转动一定角度。我希望两个轮子在我运行程序时都开始转动，然后在它们经过 2 圈后减速并停止。目前，当我运行程序时，一个轮子开始转动并减速并停止，然后是另一个轮子。在我看来，“旋转”方法没有在线程中运行，就像“运行”方法一样。是不是只有'run'方法下的代码在线程中运行，

如果有帮助，我一直在关注本教程： http: [//www.devshed.com/c/a/Python/Basic-Threading-in-Python/1/](http://www.devshed.com/c/a/Python/Basic-Threading-in-Python/1/)

另外，我想知道为什么只能用`Encoder(0,0).start()`. 为什么你不必使用类创建一个对象（例如`Thread = Encoder(0,0).start()`创建一个新线程？

抱歉，如果我使用的术语不符合标准，因为您可能会说我对线程和一般编程很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:07:40.840

`Encoder(0,0).start()`是对启动线程的方法的调用。反过来，此方法调用您的`run`实现，它不使用该`rotations`方法。如果你想这样做，那么你必须在 的 while 循环中调用它`run`。

随着`Thread = Encoder(0,0).start()`您存储从该调用检索到的值（即无），但要获得它，您需要首先启动新线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:14:57.477

run 方法*是*执行的线程。

如果您希望在该线程中发生其他事情，则必须从`Encoder.run()`.

哦，`Encoder(0,0).start()` *确实*创建了一个对象。仅仅因为您没有将该对象绑定到局部变量并不意味着它不存在。如果它不存在，你就不能调用它的`start`方法。

但是，您必须非常小心它的生命周期，没有局部变量来保持它的生命周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T10:19:15.620

您可以从 SR 的类扩展，[`Poll`](https://github.com/PeterJCLaw/srobo-pyenv/blob/master/pyenv/pylib/sr/poll.py)以便它可以用于`wait_for`：

```
import poll

class Encoder(poll.Poll):
    def __init__(self, motor, pin, div=16):
        self.motor = motor
        self.pin = pin
        self.div = div
        self.count = 0
        self.target_reached = False

        # kick off a thread to count the encoder ticks
        self.counter_thread = threading.Thread(target=self._update_count)
        self.counter_thread.start()

    def _update_count(self):
        while True: 
            wait_for(R.io[0].input[self.pin].query.d)
            self.count += 1

    def rotations(self, angle, start_speed=50):
        if not self.target_reached:
            raise Exception("Last motion still in progress!")

        self.target_reached = False

        # kick off a thread to control the speed
        self.angle_thread = threading.Thread(
            target=self._update_speeds,
            args=(angle, start_speed)
        )
        self.angle_thread.start()

    def _update_speeds(self, angle, start_speed):
        # control the motor speed as before
        ...

        # let things know we're done
        self.target_reached = True

    # implement poll methods
    def eval(self):
        return (self.target_reached, None) 
```

然后，您可以这样做：

```
wheelLeft = Encoder(0,0)
wheelRight = Encoder(1,3)

wheelRight.rotations(720)
wheelLeft.rotations(720)

wait_for(wheelRight & wheelLeft) 
```

请注意，编码器本身不是线程 - 它是“具有”关系，而不是“是”关系

# gwt - 使用 IntelliJ12 JBOSS 服务器调试 GWT 客户端

> ID：15559080
> 
> 赞同：2
> 
> 时间：2013-03-21T22:04:09.773
> 
> 标签：gwt, jboss, intellij-idea

我尝试在 IntelliJ 12 中设置“GWT 配置”。我使用 JBoss 作为我的服务器。

我的项目包含与一组 java 服务对话的 GWT 客户端代码。我顺利地启动并运行了这个项目。现在，我需要调试客户端问题，并尝试按照以下步骤进行操作。

1.  从 IntelliJIdea 添加一个新的 GWT 配置。在我给出的 DevMode 参数中。

    `-noserver -war "D:/code/myproject/target/myproject -startupUrl http://localhost:8080/myproject"`

    ![在此处输入图像描述](../Images/7cd200c5fcdf16eebb62b35ab6e0d434.png)

2.  启动调试配置。

我在控制台下面

```
Dev Mode initialized. Startup URL: 
http://127.0.0.1:8888/Application.html?gwt.codesvr=127.0.0.1:9997 
```

但是当我使用该 URL 访问该页面时，我得到一个空白页面。

有没有人有使用 IntelliJ 和 JBOSS 配置 GWT 调试的经验？

可能我错过了开发模式参数中的一个参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:30:02.453

我发现了问题。我没有在 DevMode 参数的末尾添加我的模块名称。

所以我加了 `-noserver -war "D:/code/myproject/target/myproject -startupUrl http://localhost:8080/myproject org.myproject.ui`

在我补充说一切正常之后。将 VM 选项增加到 `-Xmx1024m`而不是初始页面后`-Xmx256m`，页面加载速度更快。

# regex - 两个字符之间所有内容的正则表达式

> ID：15559086
> 
> 赞同：3
> 
> 时间：2013-03-21T22:04:30.297
> 
> 标签：regex

我正在尝试构建一个正则表达式，它允许我删除字符串中的标签。这些标签总是如下所示：`{...}`. 到目前为止我已经尝试过`\{.*\}`，但不幸的是，如果这些标签出现两次，这将不起作用。例如：`{123} Hello {asdas}`。整行将被删除，因为它以 { 开头并以 } 结尾。那么，我怎样才能避免这种行为呢？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T22:05:55.903

```
\{[^}]*\} 
```

可能会这样做。

一个左括号，后跟除右括号外的任意数量的任何内容，然后是右括号。

# sql - 将两个表合并为一个新表，以便忽略从另一个表中选择的行

> ID：15559090
> 
> 赞同：1
> 
> 时间：2013-03-21T22:04:54.940
> 
> 标签：sql, postgresql, duplicates, left-join, union

我有两个具有相同列的表。我想将这两个表连接到第三个表中，其中包含第一个表中的所有行和第二个表中具有相同位置的第一个表中不存在的日期的所有行。

例子：

交易：

```
date    |location_code| product_code | quantity 
------------+------------------+--------------+----------
2013-01-20 | ABC         | 123          |  -20         
2013-01-23 | ABC         | 123          |  -13.158
2013-02-04 | BCD         | 234          |  -4.063 
```

交易2：

```
date    |location_code| product_code | quantity 
------------+------------------+--------------+----------
 2013-01-20 | BDE         | 123          |  -30         
 2013-01-23 | DCF         | 123          |  -2
 2013-02-05 | UXJ         | 234          |  -6 
```

期望的结果：

```
date    |location_code| product_code | quantity 
------------+------------------+--------------+----------
 2013-01-20 | ABC         | 123          |  -20         
 2013-01-23 | ABC         | 123          |  -13.158
 2013-01-23 | DCF         | 123          |  -2
 2013-02-04 | BCD         | 234          |  -4.063
 2013-02-05 | UXJ         | 234          |  -6 
```

我该怎么办？我试过这个：

```
SELECT date, location_code, product_code, type, quantity, location_type, updated_at
      ,period_start_date, period_end_date
   INTO transactions_combined
   FROM ( SELECT * FROM transactions_kitchen k
          UNION ALL
          SELECT *
            FROM transactions_admin h
            WHERE h.date NOT IN (SELECT k.date FROM k)
        ) AS t; 
```

但这并没有考虑到我想包含日期相同但位置不同的行。我正在使用 Postgresql 9.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:23:45.907

`UNION`根本不做你描述的事情。此查询应：

```
CREATE TABLE AS 
SELECT date, location_code, product_code, quantity
FROM   transactions_kitchen k

UNION  ALL
SELECT h.date, h.location_code, h.product_code, h.quantity
FROM   transactions_admin h
LEFT   JOIN transactions_kitchen k USING (location_code, date)
WHERE  k.location_code IS NULL; 
```

`LEFT JOIN`/`IS NULL`从第二个表中排除相同位置和日期的行。看：

*   [选择其他表中不存在的行](https://stackoverflow.com/questions/19363481/select-rows-which-are-not-present-in-other-table/19364694#19364694)

使用**`CREATE TABLE AS`**而不是`SELECT INTO`. [手册：](https://www.postgresql.org/docs/current/sql-selectinto.html)

> `CREATE TABLE AS`在功能上类似于`SELECT INTO`。`CREATE TABLE AS`是推荐的语法，因为这种形式`SELECT INTO` 在 ECPG 或 PL/pgSQL 中不可用，因为它们对 `INTO`子句的解释不同。此外，`CREATE TABLE AS`还提供了`SELECT INTO`.

或者，如果目标表已经存在：

```
INSERT INTO transactions_combined (<list names of target column here!>)
SELECT ... 
```

旁白：我不会`date`用作列名。它是每个 SQL 标准中的[保留字](https://www.postgresql.org/docs/current/sql-keywords-appendix.html)，也是 Postgres 中的函数和数据类型名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:06:25.543

将 UNION ALL 更改为 UNION，它应该只返回每个表中的唯一行。

# mysql - 将序数日期 (YYYYDDD) 转换为标准日期（例如 UTC = YYYYMMDD）

> ID：15559091
> 
> 赞同：0
> 
> 时间：2013-03-21T22:04:56.547
> 
> 标签：mysql, date, date-format, ordinal

我想查看具有标准日期格式的 mysql 查询的结果，`YYYYMMDD`或者`MMDDYYYY`. 表/字段具有序号日期格式的日期：`YYYYDDD`. 我尝试了 DATE_FORMAT 函数但没有成功：

```
SELECT DATE_FORMAT(O.otc_eff_date,'%m/%d/%Y') FROM NU.RawCaseOTC O 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:08:36.107

```
SELECT DATE_FORMAT(STR_TO_DATE(O.otc_eff_date, '%Y%j'),'%m/%d/%Y') FROM NU.RawCaseOTC O 
```

# wcf - 是否可以在 WCF 中添加全局消息检查器？

> ID：15559094
> 
> 赞同：3
> 
> 时间：2013-03-21T22:05:16.467
> 
> 标签：wcf, global, behavior

关于全局错误处理程序等有很多问题，但没有一个能解决我需要的问题。

有没有办法通过.config添加将附加到每个端点或服务的行为？

*具体来说，我想做的是添加一个记录器，它将捕获并记录每个 SOAP 请求/响应。但我更希望将这种行为自动添加到我拥有的每项服务中，而不是手动将其添加到每个服务中。

我研究了行为扩展并认为这将是解决方案，但不，您必须将行为添加到每个服务。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T07:35:34.957

有一个消息检查器来摆脱这种问题总是好的。Message Inspector 是 WCF 扩展的一个实现，它可以很好地跟踪服务的每个传入请求和传出响应，即使它在消息验证中失败，它也可以选择捕获并相应地工作。更准确地说，消息检查器可以使用配置文件进行配置，而无需更改现有服务。

有关您的消息检查器及其实现的更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/aa717047.aspx)

希望这可以帮助 ！！

快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:16:58.883

您可以使用**machine.config**[`<commonBehaviors>`](http://msdn.microsoft.com/en-us/library/aa734725.aspx)文件的部分来定义将应用于您机器中所有服务的行为。请注意，更新 machine.config 真的就像使用火箭筒来解决您的问题（在许多情况下，组策略可能会禁止您这样做），因此它可能不适用于所有情况。您还需要确保行为扩展已注册（也在 machine.config 中），并且您与 WCF 一起使用的任何应用程序都可以访问扩展中引用的程序集（可能通过 GAC）。

 **另一种选择是使用公共库来创建服务主机（直接用于自托管服务或通过服务主机工厂用于网络托管服务），并使用该库（这反过来会添加检查器）。**

# php - 联系我们 电子邮件 php 错误

> ID：15559096
> 
> 赞同：0
> 
> 时间：2013-03-21T22:05:25.937
> 
> 标签：php, contact-form

我正在尝试制作联系表格并收到此一般错误：

```
 Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, cgiadmin@yourhostingaccount.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log. 
```

我无法弄清楚如何让它实际记录或回显错误。这是我的 php 文件：

```
<?php
ini_set('display_errors', true);
ini_set('log_errors', true);
error_reporting(E_ALL);
ini_set('error_log', 'php.log');
$field_fname = $_GET['fname'] ;
$field_lname = $_GET['lname'] ;
$field_bname = $_GET['bname'] ;
$field_email = $_GET['email'] ;
$field_address = $_GET['address'] ;
$field_city = $_GET['city'] ;
$field_state = $_GET['state'] ;
$field_zip = $_GET['zip'] ;
$field_country = $_GET['country'] ;
$field_comments = $_GET['comments'] ;

$mail_to = 'myemail@mydomain.com';
$subject = 'Message from a site visitor '.$field_fname .$field_lname;

$body_message = 'From: '.$field_fname .$field_lname 'at' .$field_bname "\n";
$body_message = 'E-mail: '.$field_email "\n";
$body_message = 'Address:'.$field_address "\n";
$body_message = 'City:'.$field_city "\n";
$body_message = 'State:'.$field_state "\n";
$body_message = 'Zip Code:'.$field_zip "\n";
$body_message = 'Country:'.$field_country "\n";
$body_message = 'Message: '.$field_comments;

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Thank you for the message. We will contact you shortly.');
        window.location = 'index.html';
    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed. Please, send an email to myemail@mydomain.com');
        window.location = 'index.html';
    </script>
<?php
}
?> 
```

我不确定我在做什么是错的。如果有人可以帮助我找到错误或指导我记录或回显错误，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:09:08.200

我将您的代码放在一个名为 so.php 的文件中，它有一个解析错误行 20

`PHP Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in so.php on line 20`

`Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in so.php on line 20`

`Errors parsing so.php`

`$field_lname`你错过了第 20 行前后的连接点`'at'`

您可能有兴趣在您的系统上本地安装 php（例如简单的 wamp），然后将 php 可执行文件放在您的路径中，这样您就可以运行命令行`php -l filename.php`来获取像上面那样的即时解析错误消息。

这是您修复了所有解析错误的代码：

```
<?php
ini_set('display_errors', true);
ini_set('log_errors', true);
error_reporting(E_ALL);
ini_set('error_log', 'php.log');
$field_fname = $_GET['fname'] ;
$field_lname = $_GET['lname'] ;
$field_bname = $_GET['bname'] ;
$field_email = $_GET['email'] ;
$field_address = $_GET['address'] ;
$field_city = $_GET['city'] ;
$field_state = $_GET['state'] ;
$field_zip = $_GET['zip'] ;
$field_country = $_GET['country'] ;
$field_comments = $_GET['comments'] ;

$mail_to = 'myemail@mydomain.com';
$subject = 'Message from a site visitor '.$field_fname .$field_lname;

$body_message = 'From: '.$field_fname .$field_lname .'at' .$field_bname ."\n";
$body_message = 'E-mail: '.$field_email ."\n";
$body_message = 'Address:'.$field_address ."\n";
$body_message = 'City:'.$field_city ."\n";
$body_message = 'State:'.$field_state ."\n";
$body_message = 'Zip Code:'.$field_zip ."\n";
$body_message = 'Country:'.$field_country ."\n";
$body_message = 'Message: '.$field_comments;

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Thank you for the message. We will contact you shortly.');
        window.location = 'index.html';
    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed. Please, send an email to myemail@mydomain.com');
        window.location = 'index.html';
    </script>
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:11:00.037

`.`在构建`$body_message`.

```
$body_message = 'From: '.$field_fname .$field_lname.'at' .$field_bname."\n";
$body_message = 'E-mail: '.$field_email."\n"; 
```

等等。

任何体面的编辑器都会在您保存文件之前将此标记为错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T22:12:15.843

您可能在默认情况下关闭显示错误的服务器上。您应该能够在脚本中启用它们（假设您无法访问服务器 conf 或只希望在一个脚本中启用它们），并在 PHP 的顶部使用它：

```
ini_set("display_errors", "on"); 
```

然后它应该输出你的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T22:23:44.290

您在日志中没有得到任何内容的原因是因为设置错误日志和日志文件的 php 文件包含语法错误，因此无法解析，因此永远不会设置错误日志选项。为避免这种情况，我建议将其放在 php.ini 文件或 .htaccess 文件中（如果可能）。你可以在这里看到这是如何完成的：http: [//perishablepress.com/advanced-php-error-handling-via-htaccess/](http://perishablepress.com/advanced-php-error-handling-via-htaccess/)

# c# - 如何让我的字典引用列表 价值观？

> ID：15559098
> 
> 赞同：0
> 
> 时间：2013-03-21T22:05:29.877
> 
> 标签：c#, dictionary, windows-phone-8

我有一本这样的字典：

```
private Dictionary<string, List<SmartTextItemModel>> service_ListOfItems = new Dictionary<string, List<SmartTextItemModel>>();

service_ListOfItems["bingsearch"] = MyProgramKernel.Instance.SmartTextViewModel.SmartTextStateModel.BingItemResults;
service_ListOfItems["wikipedia"] = MyProgramKernel.Instance.SmartTextViewModel.SmartTextStateModel.WikipediaItemResults;
service_ListOfItems["youtube"] = MyProgramKernel.Instance.SmartTextViewModel.SmartTextStateModel.YoutubeItemResults; 
```

（SmartTextItemModel 只是一个简单的类，用于包含标题、描述和 URL，它们都是字符串。有关上下文，请参阅我之前的问题。）

当然，%service%ItemResults 对象的类型是 List<SmartTextItemModel>，并且 List 在 SmartTextStateModel 文件中被初始化为 null。

我在其他文件中有代码修改每个`MyProgramKernel.Instance.SmartTextViewModel.SmartTextStateModel.%service%ItemResults`列表，如下所示：

```
MyProgramKernel.Instance.SmartTextViewModel.SmartTextStateModel.%service%ItemResults = some new List of type SmartTextItemModel 
```

当我尝试检查初始化字典的同一文件中的列表是否为空时，

```
if (service_ListOfItems[ searchService ] == null) { ... } // searchService is "bingsearch", "wikipedia", or "youtube" 
```

我没有得到我期望的结果。if 语句中的语句始终运行。字典中的 List 值仍然为 null，即使它们被分配到不同的文件中。

我想要的行为是我的字典引用了`MyProgramKernel.Instance.SmartTextViewModel.SmartTextStateModel`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:09:41.627

您正在寻找的行为是不可能的。在字典中放置对 List 的引用后，该引用将引用特定的 List，并且不会受到您用于初始化项目的静态属性的未来更改的影响。

要检查属性是否为空，您需要一个在每次引用字典时都会获取列表的方法。您可以使用 lambda 表达式将字典更改为`Dictionary<string, Func<List<SmartTextItemModel>`并为每个项目分配代表，如下所示：

```
service_ListOfItems["bingsearch"] = () => MyProgramKernel.Instance.SmartTextViewModel.SmartTextStateModel.BingItemResultsl; 
```

然后使用`if (service_ListOfItems[searchService]() == null)`获取和调用函数。（请注意索引器后面的额外括号，因为您必须调用函数。）

现在，这并不完全优雅，您可能应该考虑是否有完全不同的方法来解决您的问题。但是，它应该可以工作。

# php - 标头重定向

> ID：15559101
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:05:44.393
> 
> 标签：php, redirect, html, header

以下代码不起作用。

```
$newPageURL1 = '#post2';
$newPageURL2 = 'http://localhost/feed/all'.$newPageURL1;   

header('Location: $newPageURL2'); 
```

它仅重定向到 /feed/all 而不重定向到 div 位置。

我需要将代码重定向到 /feed/all#post2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T22:06:55.507

将单引号更改为双引号，以便 php 评估您的变量

```
header("Location: $newPageURL2"); 
```

# vb.net - 如果选中，将文本添加到 CheckedListBox 中的字符串？

> ID：15559112
> 
> 赞同：0
> 
> 时间：2013-03-21T22:06:34.540
> 
> 标签：vb.net, string, checked, checkedlistbox

我正在开发一个简单的待办事项列表程序，用户可以在文本框中键入任何内容，按下按钮，然后将文本作为项目添加到 CheckedListBox。现在，如果选中，我想在每个项目之前添加文本“完成”，然后如果用户取消选中，则删除文本。

代码：

```
 Private Sub MyCbList_ItemCheck(ByVal sender As System.Object, ByVal e As System.Windows.Forms.ItemCheckEventArgs) Handles MyCbList.ItemCheck
    If MyCbList.Items.Item(MyCbList.SelectedIndex) = True Then
        MyCbList.Items.Item(MyCbList.SelectedIndex) = "Done: " + MyCbList.Items.Item(MyCbList.SelectedIndex)
    Else
        MyCbList.Items.Item(MyCbList.SelectedIndex) = MyCbList.Items.Item(MyCbList.SelectedIndex).Replace("Done: ", "")
    End If
End Sub 
```

我似乎无法让它工作。我以前从未处理过 CheckedListBoxes。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:20:20.480

很接近！目前，您的代码正在查看当前突出显示（未选中）项目的 text = "True"。

相反，我们需要检查传递给方法的 ItemCheckedEventArgs 参数：

```
Private Sub MyCbList_ItemCheck(ByVal sender As System.Object, ByVal e As System.Windows.Forms.ItemCheckEventArgs) Handles MyCbList.ItemCheck
    If e.NewValue = CheckState.Checked Then
        MyCbList.Items.Item(e.Index) = "Done: " + MyCbList.Items.Item(MyCbList.SelectedIndex)
    Else
        MyCbList.Items.Item(e.Index) = MyCbList.Items.Item(MyCbList.SelectedIndex).Replace("Done: ", "")
    End If
End Sub 
```

# java - 创建 Servlet+JSP 框架并在其他项目中使用

> ID：15559113
> 
> 赞同：0
> 
> 时间：2013-03-21T22:06:41.367
> 
> 标签：java, jsp, jakarta-ee, servlets, frameworks

我想开发一个小框架来帮助我们实现可重用性。它将有一些 Java 组件来处理权限、DAO、日志等，以及一些 Servlet 组件来处理身份验证、请求参数等。还有带有 HTML 片段、页眉、页脚、CSS、JS 等的 JSP。

我找不到的是如何将此框架部署为 jar 库，以供其他应用程序使用。WebContent、JSP 等应该在哪里，以及如何在 Eclipse 中导出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:44:08.153

> *WebContent、JSP 等应该在哪里*

在`/META-INF/resources`Java 源文件夹的文件夹中。如果它不存在，只需创建一个。

* * *

> *以及如何在 Eclipse 中导出它*

就像 JAR 进入`/WEB-INF/lib`一个 web 项目一样。您可以通过在动态 Web 项目的*Deployment Assembly*中指定共享项目来让 Eclipse 自动执行此操作。

您还可以从一开始就将共享项目创建为*Web Fragment Project*。它将为您准备文件夹结构并自动添加为现有项目的*部署程序集。*

### 也可以看看：

*   [如何将来自不同项目的 JSP 文件包含到我的项目中](https://stackoverflow.com/questions/11210628/how-do-i-include-a-jsp-file-from-a-diff-project-into-my-project/11210755#11210755)

# mysql - Coldfusion sql错误仅发生在一个应用程序实例上

> ID：15559114
> 
> 赞同：0
> 
> 时间：2013-03-21T22:06:42.677
> 
> 标签：mysql, coldfusion, cfml

我正在运行同一个应用程序的两个实例，但是只有一个实例在尝试显示未标记的图像时出现错误。

日志说：

> 执行数据库查询时出错。您的 SQL 语法有误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法包含或处理的文件的特定顺序是：[模糊]...images_archive.cfm，行：24

该文件的第 24 行是：

```
WHERE <cfloop query="unlabeledTags">tagID <> #ID#<cfif #currentRow# NEQ #recordCount#> AND </cfif></cfloop> 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:49:22.890

就像 Leigh 说的那样，您的问题可能与空查询集有关，但是为了稍微清理一下您的代码，我建议您像这样编写 SQL。

```
WHERE tagID NOT IN (<cfqueryparam cfsqltype="cf_sql_integer" value="#ValueList(unlabeledTags.ID)#" list="true">) 
```

或者你也可以这样写

```
WHERE 1 = 1
<cfloop query="unlabeledTags">
    AND tagID <> <cfqueryparam cfsqltype="cf_sql_integer" value="#unlabeledTags.ID#">
</cfloop> 
```

仅当您的查询有记录数时才允许查询运行。

# twitter-bootstrap - 使用 bootstrap/rails 的文本字段在垂直方向上太窄

> ID：15559117
> 
> 赞同：0
> 
> 时间：2013-03-21T22:06:53.087
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.2, railstutorial.org

我正在学习 rails 教程，我注意到应用程序中我的 textarea 的高度比以前更小了。

我已经查看了这个[线程here](https://stackoverflow.com/questions/7196398/text-input-rendering-issue-with-twitter-bootstrap-css)和[this one](https://stackoverflow.com/questions/9222851/twitter-bootstrap-text-fields-height-too-small?rq=1)，两者本质上都表明错误通常源于没有`<!DOCTYPE HTML>`。但是，正如您将在我的[第一个屏幕截图](http://cl.ly/image/2O1E2R3g1j0I)中看到的那样，我的情况并非如此。

在第一个屏幕截图中，您可以看到当我突出显示该元素时，它表明它知道它应该以更厚的尺寸渲染，但无论出于何种原因它都不是。[这是文本区域的外观](http://cl.ly/image/172b2Z193t3i)（取自引导文档）。

任何帮助深表感谢。谢谢！

**编辑：** 这是视图的代码：

```
<% provide(:title, "Sign in") %>
<h1>Sign in</h1>

<div class="row">
  <div class="span6 offset3">
     <%= form_for(:session, url: sessions_path) do |f| %>

        <%= f.label :email %>
        <%= f.text_field :email %>

        <%= f.label :password %>
        <%= f.password_field :password %>

        <%= f.submit "Sign in", class: "btn btn-large btn-primary" %>
     <% end %>
     <p>New user? <%= link_to "Sign up now!", signup_path %></p>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:29:08.073

您可以将引导类添加到您的 text_field 标记中

```
 <%= f.text_field :email,:class=> 'input-xlarge' %> 
```

这可能会有所帮助

# playframework-2.0 - 如何在 Play 2.1 测试类中使用页面对象模式？

> ID：15559124
> 
> 赞同：0
> 
> 时间：2013-03-21T22:07:07.020
> 
> 标签：playframework-2.0, fluent

我是 Play 的新用户，正在学习 ToDo List 示例（基于 Java 的初学者教程）。

[我现在正在尝试使用页面对象模式（ https://github.com/FluentLenium/FluentLenium#page-object-pattern](https://github.com/FluentLenium/FluentLenium#page-object-pattern) ）添加测试用例。

不幸的是，我最初尝试实现这种模式并不顺利。如果您想快速下载并使用它，我的整个系统都可以在 GitHub 上找到。这是我的测试类的链接，它显示了一个正在运行的测试用例（不使用页面对象模式）和一个尝试使用页面对象模式的失败测试用例：

[https://github.com/philipmjohnson/playexample1/blob/master/test/IntegrationTest.java](https://github.com/philipmjohnson/playexample1/blob/master/test/IntegrationTest.java)

这是我在 Play 控制台中运行测试用例时出现的错误）：

```
[error] Test IntegrationTest.testWithPage failed: java.lang.NullPointerException
[error]     at play.test.Helpers.running(Helpers.java:426)
[error]     at IntegrationTest.testWithPage(IntegrationTest.java:34)
[error]     ...
[error] Caused by: java.lang.NullPointerException
[error]     at org.fluentlenium.core.Fluent.goTo(Fluent.java:223)
[error]     at org.fluentlenium.core.FluentPage.go(FluentPage.java:55)
[error]     at org.fluentlenium.core.Fluent.goTo(Fluent.java:204)
[error]     at IntegrationTest$2.invoke(IntegrationTest.java:37)
[error]     at IntegrationTest$2.invoke(IntegrationTest.java:34)
[error]     at play.test.Helpers.running(Helpers.java:424) 
```

如何正确实现页面对象设计模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:56:55.423

那里的一些细节：

您必须构建页面并为其提供 webdriver，页面需要它来操作浏览器。

```
public ToDoListPage(WebDriver webDriver) {
    super(webDriver);
} 
```

在你的测试中：

```
ToDoListPage todopage = new ToDoListPage(browser.getDriver()); 
```

此外，您的 TodoListPage 中不需要有 @Test 注释

查看拉取请求：[修复](https://github.com/MathildeLemee/playexample1/commit/cb440bf357546ca573ce39529cd5b1ddeb5c07bc)

# c# - C# 是否在条件语句中使用短路评估？

> ID：15559127
> 
> 赞同：1
> 
> 时间：2013-03-21T22:07:14.490
> 
> 标签：c#

下面的代码是不是很好的风格。如果对象为 null ，我们是否总是假设第二个谓词不会被执行？

```
if(someObject == null || someObject.Count == 0)
{
    //do something
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T22:08:30.710

是的。`||`被称为短路运算符，这意味着如果它知道足以返回真（它的第一个操作数为真），那么它不会评估第二个操作数并立即返回真。

`&&`类似——如果它的第一个操作数返回 false，它会立即返回 false，而不检查第二个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T22:09:51.460

正确的。如果左边的表达式计算为`true`右边的表达式将不会计算。如果您想确保两者都被评估，您可以使用*按位或*运算符`|`：

```
if(someObject == null | someObject.Count == 0)
{
    //do something
} 
```

小心这一点，你可能并不总是得到你所期望的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T22:08:08.557

是的。C# 中的`||`运算符短路。如果第一个条件不满足，则不会执行下一个条件。

# c++ - 关于为什么 C++（社区）插件不使用声纳运行器生成 LOC 的任何建议？

> ID：15559130
> 
> 赞同：1
> 
> 时间：2013-03-21T22:07:29.547
> 
> 标签：c++, plugins, sonar-runner

当我在 C++ 项目上运行 sonar-runner 时，它不会生成代码行数。

我正在使用声纳 C++ 社区插件 [http://docs.codehaus.org/pages/viewpage.action?pageId=185073817](http://docs.codehaus.org/pages/viewpage.action?pageId=185073817)

在运行声纳运行器之前，我没有运行任何预处理。

在运行声纳运行器之前，我是否需要对 C++ 代码进行任何预处理？

我在用着：

声纳：3.5 声纳运行器：2.0 C++ 插件：sonar-cxx-plugin-0.2.jar

声纳-project.properties：

```
# required metadata
sonar.projectKey=external:CS
sonar.projectName=CS3D
sonar.projectVersion=2.0.0
# optional description
sonar.projectDescription=Crystal Space 3D.

# path to source directories (required)
sonar.sources=plugins,libs,apps,mk
# path to test source directories (optional)
sonar.tests=engine/test 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T20:30:47.117

除非您另有说明，否则 Sonar 会继续并假定该项目是一个 Java 项目。对于其他语言，您需要让它知道...

所以一个起点是添加以下行：

`sonar.language=c++`

它应该报告没有任何预处理的代码行数。

# php - 在php中包装来自sql查询的文本

> ID：15559141
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:07:50.980
> 
> 标签：php, sql, word-wrap

我在 php 中有一个 sql 查询，它返回 sql 数据类型文本，返回大约 200 个字符的字符串溢出屏幕。

我想包装文本，使其保持在使用大约 50% 宽度的 div 中。我已经尝试过 wordwrap 功能并将输出放在 p 标签中，但这不起作用。

有任何想法吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:14:50.180

这个 CSS 应该修复它：

```
word-wrap: break-word; 
```

如果需要，它甚至会打破很长的连续字符串。

更多细节在这里：[https ://developer.mozilla.org/en-US/docs/CSS/word-wrap](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:16:36.633

尝试这个：

```
.yourclass { 
   white-space: pre-wrap;      /* CSS3 */   
   white-space: -moz-pre-wrap; /* Firefox */    
   white-space: -pre-wrap;     /* Opera <7 */   
   white-space: -o-pre-wrap;   /* Opera 7 */    
   word-wrap: break-word;      /* IE */
} 
```

# spring - Create a Guava TypeToken in Spring xml config?

> ID：15559142
> 
> 赞同：2
> 
> 时间：2013-03-21T22:07:56.457
> 
> 标签：spring, generics, guava

I'd like to be able to inject [Guava TypeToken](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/TypeToken.html) objects by specifying them as a bean in a Spring xml configuration. Is there a good way to do this? Has anyone written any cade/library to make this easier?

TypeToken seems to work by using reflection to introspect its generic types and is thus constructed using an anonymous class like:

```
new TypeToken<List<String>>() {} 
```

Spring's xml config syntax doesn't seem to accept generics at all, presumably because it's built at runtime and doesn't "need" them (since generics are compile time checks and technically erased at runtime).

So the only way I know to instantiate a TypeToken bean is to do it [in java](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java-combining):

TokenConfig.java:

```
@Configuration
public class TokenConfig {
  @Bean
  public TypeToken<List<String>> listOfStringsToken() {
      return new TypeToken<List<String>>() {};
  }
} 
```

system-test-config.xml:

```
<beans>
  <context:annotation-config/>
  <bean class="com.acme.TokenConfig"/>
  <bean class="com.acme.Consumer">
    <property name="typeToken" ref="listOfStringsToken"/>
  </bean>
</beans> 
```

Is there a way to do this with just an xml config?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T20:13:30.830

Maybe you can use spring FactoryBeans: look for factory methods at [http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T21:51:04.890

To answer my own question: It IS possible to create a non-generic TypeToken using the static constructor [TypeToken.of(Class)](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/TypeToken.html#of%28java.lang.Class%29), but this wont work for deeper generic types.

Here's the Spring xml config:

```
<bean class="com.google.common.reflect.TypeToken" factory-method="of">
  <constructor-arg type="java.lang.Class" value="java.lang.Integer" />
</bean> 
```

Which is equivelent to:

```
TypeToken.of(Integer.class) 
```

and

```
new TypeToken<Integer>() {} 
```

I also found a way to use the [TypeToken.of(Type)](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/TypeToken.html#of%28java.lang.reflect.Type%29) constructor with a [ParameterizedType](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/ParameterizedType.html) constructed using [Google Guice](https://code.google.com/p/google-guice/)'s [Types](http://google-guice.googlecode.com/git/javadoc/com/google/inject/util/Types.html#newParameterizedType%28java.lang.reflect.Type,%20java.lang.reflect.Type...%29) utility. [Guava has one too](https://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/reflect/Types.java), but it's not public. :'( I'm not sure if this is quite as robust as using TypeToken/TypeCapture, but it seems to work. Unfortunately it's pretty ugly and long... (maybe someone can simplify it?)

```
<bean class="com.google.common.reflect.TypeToken" factory-method="of">
  <constructor-arg index="0">
    <bean class="com.google.inject.util.Types" factory-method="newParameterizedType">
      <constructor-arg index="0">
        <value type="java.lang.Class">java.util.List</value>
      </constructor-arg>
      <constructor-arg index="1">
        <array><value type="java.lang.Class">java.lang.String</value></array>
      </constructor-arg>
    </bean>
  </constructor-arg>
</bean> 
```

Which is equivelent to:

```
new TypeToken<List<String>() {} 
```

# javascript - live() 更改在 IE8 上的 jquery 1.4.2 中不起作用

> ID：15559144
> 
> 赞同：1
> 
> 时间：2013-03-21T22:08:04.893
> 
> 标签：javascript, internet-explorer, internet-explorer-8, jquery

我一直在 IE8 中运行以下 jquery 代码（使用 jquery 1.4.2）。这适用于所有其他浏览器，如 Mozilla、IE9 等，但不适用于 IE8。

谁能告诉我如何解决此问题或使用类似的代码来执行相同的“更改”功能？

```
$('.input-timesheet-type').live('change', function () {
   totalCount($(this).attr('data-teamid'));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:10:42.387

虽然 IE8 支持`live()`,使用事件`live()` [有一些问题：](http://docs.jquery.com/Events/live#typefn)`change()`

> **可能的事件值：** click、dblclick、mousedown、mouseup、mousemove、mouseover、mouseout、keydown、keypress、keyup
> 
> **目前不支持：** blur、focus、mouseenter、mouseleave、change、submit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:10:52.460

您可以使用`.delegate`代替`.live`，它在 v1.4.2 中可用

[jQuery 文档中的 .delegate()](http://api.jquery.com/delegate/)

此外，最新版本的 jQuery 中不存在 .live() ，因此 .delegate() 将使您的代码更好地适应未来。

# android - Sqlite 选择与 Where 不同

> ID：15559146
> 
> 赞同：0
> 
> 时间：2013-03-21T22:08:11.807
> 
> 标签：android, sqlite, select

我正在使用以下命令从我的 android 应用程序中搜索我的 sqlite 数据库：

数据库的行是： `ID - KEY_NUMBER - TYPE`

`Cursor cursor = db.rawQuery("select DISTINCT "+KEY_NUMBER+" from "+TABLE + " DESC", null);`

但我只想从`KEY_NUMBER`列中提取不同的值，如果

`TYPE column!=another value`

我该怎么做？我尝试插入一个`Where`语句，但它不起作用。

TYPE 列可以是 3 个值之一：`"type1","type2","type3"` 我只想要数字，`TYPE!="type1"`如果`TYPE=="type2" || "type3"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:23:03.263

好的，那么该`WHERE`子句应如下所示：

```
WHERE TYPE IN ('type2', 'type3') 
```

最后，整行应该是这样的：

```
Cursor cursor = db.rawQuery("select DISTINCT " + KEY_NUMBER + " from " + TABLE + " WHERE TYPE IN ('type2', 'type3') ORDER BY KEY_NUMBER DESC", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:36:25.307

只需尝试删除`DESC`关键字，然后添加`where type != '<your_value>'`. 您的查询应该是：

`db.rawQuery("select DISTINCT "+KEY_NUMBER+" from "+TABLE + " where " + TYPE + " != '" + <value> + "'", null);`

当此查询正常工作时，添加排序子句：`order by key_number`. 它应该可以工作（至少它可以在 MySQL 数据库中工作）。

[您可以在此链接](http://www.sqlite.org/lang_select.html)中查看 sqlite 数据库的选择语法。

我希望这可以解决您的问题。

# knockout.js - 淘汰赛可分拣和丢弃物品会引发控制台错误

> ID：15559149
> 
> 赞同：2
> 
> 时间：2013-03-21T22:08:18.633
> 
> 标签：knockout.js, knockout-sortable

**目的**
我的目标是创建一个页面，用户可以在其中将一组预定义的列名从他们已经加载的文件中拖到列标题中。该页面将允许他们在匹配之前将静态标题拖到文件标题中进行映射他们到我们的数据库。

**问题**
我所有的 drop 都抛出控制台错误：
- 丢弃在同一个数组中抛出：
`Uncaught TypeError: object is not a function`
- 丢弃文件标题中的可用标题：
`Uncaught TypeError: Object [object Array] has no method 'remove'`
- 从文件标题中丢弃到可用的抛出：
`Uncaught TypeError: object is not a function`

**示例**
这是我正在使用的 jsfiddle：http: [//jsfiddle.net/micah0152/PrSWu/1/](http://jsfiddle.net/micah0152/PrSWu/1/)

**更多细节**
我希望能够拖动一个可用的标题并将其放在列上方。然后，当用户满意时，我需要获取两者之间的关联（并单击尚不存在的保存按钮。）

可悲的是，我一开始就被困住了。我希望这是一个简单的问题，因为我对淘汰赛还很陌生。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:49:52.787

需要将可用的标头包装在 ko.observableArray 中——我也花了一段时间才发现你的错误！

```
self.availableHeaders = ko.observableArray([
    new MappedHeader("Company"), 
    new MappedHeader("Address 1"), 
    new MappedHeader("Address 2"), 
    new MappedHeader("City"), 
    new MappedHeader("State"), 
    new MappedHeader("Zip"), 
    new MappedHeader("Country")
]); 
```

编辑：错误是说 sourceParent，即要从中移动对象的容器，没有 remove() 函数。它没有删除功能，因为它不是 ko.observableArray。所以为了解决这个问题，我用 ko.observableArray() 包装了数组，现在它具有所有内置的 KO 功能。

# php - 了解 php curl_multi_exec

> ID：15559157
> 
> 赞同：34
> 
> 时间：2013-03-21T22:08:45.527
> 
> 标签：php, curl, curl-multi

我试图理解 curl_multi_exec。我在这里复制了一段手动示例。所以我想知道，它是如何工作的？第一个循环发送我猜的http请求？但它随后是一个循环内的循环，使用带有看似未记录的标志的函数..

我想并行下载 +=70 个网址 +=。

[http://www.php.net/manual/en/function.curl-multi-exec.php](http://www.php.net/manual/en/function.curl-multi-exec.php)

```
<?php
...
$active = null;
//execute the handles
do {
    $mrc = curl_multi_exec($mh, $active);
} while ($mrc == CURLM_CALL_MULTI_PERFORM);

while ($active && $mrc == CURLM_OK) {
    if (curl_multi_select($mh) != -1) {
        do {
            $mrc = curl_multi_exec($mh, $active);
        } while ($mrc == CURLM_CALL_MULTI_PERFORM);
    }
}
...
?> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-26T10:04:30.577

您可以浏览描述此示例的两篇文章。

[PHP 和 curl_multi_exec](http://technosophos.com/2012/10/26/php-and-curlmultiexec.html)

> 首先，这是高级别的。有两个外部循环。第一个负责立即清除 curl 缓冲区。第二个负责等待更多信息，然后获取该信息。这是所谓的阻塞 I/O 的一个示例。我们阻止程序其余部分的执行，直到网络 I/O 完成。虽然这通常不是处理网络 I/O 的最佳方式，但它确实是我们在单线程、同步 PHP 中的唯一选择。

[以正确的方式做 curl_multi_exec](http://www.adrianworlddesign.com/Knowledge-Base/php/Download-content-with-cURL/Doing-curlmultiexec-the-right-way)

> 首先是`$mrc`变量，从手册中我们了解到响应是在 cURL 预定义常量中定义的 cURL 代码。本质上，它是一个常规响应，与任何其他 PHP 函数`curl_multi_exec`没有什么不同，只有在完成后才返回响应。这意味着应该只有一个响应。在一个完美的世界中，这个单一的响应是 0（零）或等于预定义的常数`CURLM_OK`。

# php - PHP 简单 XML 元素对象 - 如何获取字符串值

> ID：15559158
> 
> 赞同：0
> 
> 时间：2013-03-21T22:08:47.103
> 
> 标签：php, arrays, simplexml

如何在 php 中获取以下数组字段的值？当我对二维数组执行 print_r 函数时，我得到以下结果：

```
[title] => SimpleXMLElement Object ( ) [date] => SimpleXMLElement Object ( ) 
```

如何获取标题和日期的字符串值？我试过用

> （细绳）

，但是这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:13:29.047

您需要访问 SimpleXMLElement 对象的属性。假设您有一个名为 entry 的实例，并且您键入了子标题

```
(string) $entry->title; 
```

# eclipse - 在 javaee6 中创建一个新的会话 Bean

> ID：15559159
> 
> 赞同：0
> 
> 时间：2013-03-21T22:08:50.117
> 
> 标签：eclipse, java-ee-6, stateless-session-bean

请，我尝试将一个简单的会话 Bean 添加到我的 javaee6 项目中，当我右键单击项目-> EJB-> 会话 Bean 时，如下链接所示：

![在此处输入图像描述](../Images/d4890d3c3478d0210a0ecb3ddc704f89.png)

然后点击下一步，我进入下一个链接：

![在此处输入图像描述](../Images/3ac331b13cad14eaaf51fd9c674da976.png)

一切正常，但我无法添加项目名称。下拉框不可单击，当我单击源文件夹的文本区域并单击“浏览”按钮时，它也无法正常工作。我已尽我所能添加项目名称，但无济于事。谁能告诉我为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-02T03:31:39.457

右键单击项目，选择属性。单击“项目构面”，然后单击“转换为构面形式”。勾选“EJB Module”并选择版本为3.0或3.1

# php - 我如何告诉 php 进入下一个目录？

> ID：15559161
> 
> 赞同：0
> 
> 时间：2013-03-21T22:08:55.283
> 
> 标签：php

我坚持使用一些简单的代码。

我创建了一个数据库查询，成功使“$albumPath”正确指向 url“albums/album0147”

如何格式化链接以包含另一个目录，即。'相册/album0147/imageThumbs'

```
echo $albumPath; 
```

在页面上正确显示专辑/album0147，但是我在 $albumpath 之后放置什么才能正确显示专辑/album0147/imageThumbs ？

我是新手，但通过反复试验快速学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:14:58.180

由于`$albumPath`只是一个字符串，您可以使用[运算符](http://php.net/manual/en/language.operators.string.php)[来`.`](http://php.net/manual/en/language.operators.string.php)连接字符串：

```
$albumPathImgs = $albumPath."/imageThumbs"; 
```

如果`"imageThumbs"`存储在另一个变量中，请说`$thumbsDir`：

```
$thumbsDir = "imageThumbs";
$albumPathImgs = $albumPath."/".$thumbsDir;
echo $albumsPathImgs; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:19:00.627

您可以独立定义斜线，以便您可以仅根据它的名称命名您的专辑和文件：

```
$slash = '/'; 
```

所以你可以定义你的主专辑：

```
$albums = 'albums'; 
```

然后你可以定义你的子专辑：

```
$album0147 = 'album0147';
$imageThumbs = 'imageThumbs'; 
```

现在，您可以将专辑连接在一起，并通过在中间添加正斜杠（或反向斜杠，取决于您的操作系统）使 url 有效：

```
$url = $albums. $slash. $album0147\. $slash. $imageThumbs; 
```

您甚至可以定义图像名称：

```
$img1 = 'img101.png';

$image = $url. $img1; 
```

# php - 访问另一个php文件中类的属性和方法

> ID：15559166
> 
> 赞同：2
> 
> 时间：2013-03-21T22:09:09.663
> 
> 标签：php

我有一个文件，其中包含一个类以及类中的一些属性和方法。

我需要从另一个 php 文件访问该类的属性和方法。我想将文件包含在类中，但这不是这种情况的正确方法，因为该文件包含一些回声，它会生成 html，如果我包含该文件，则会在我不包含的文件中生成那些 html想，我只想访问旧的属性和方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:35:57.853

正如其他人所说，最好在他们自己的文件中定义类，只包含那个类并包含它。

someClass.php

```
<?php
class SomeClass{
    public __Construct(){
        echo "This is some class";
    }
} 
```

在其他页面上，您只需包含并实例化该类。

```
<?php
include('someClass.php');
//do something 
```

但是，如果由于某种原因您无法使用类修改页面，则可以使用输出缓冲来包含没有输出的页面。

```
<?php
//start a buffer
ob_start();
//include the page with class and html output.
include("PageWithClassAndHTMLOutput.php");
//end the buffer and discard any output
ob_end_clean();

$cls = new ClassFromIncludedPage();
$cls->someMethod(); 
```

这并不理想，因为您将设置/覆盖包含页面中定义的任何变量，解析整个页面并执行它所做的任何处理。我已经使用这种方法（不是用于课程，而是相同的想法）来执行诸如捕获包含的页面并在它已经被写入以显示在屏幕上时通过电子邮件发送它之类的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:14:47.513

所以，你的类有一个构造函数。删除类的构造函数并将类文件包含到您的页面中。实例化您的对象并调用您需要的属性或方法。

```
 $object->property;
 $object->method(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-25T10:27:29.983

我将使用来自房地产网络应用程序的示例。例如，如果您想在属性类（希望通过属性 id 获取属性名称的合同类）之外的其他类中获取属性名称 - 基于 Laravel 5.3 PHP 框架

```
<?php namespace App\Http\Controllers\Operations; 
## THIS CONTROLLER - that wants to access content from another (adjacent) controller

use App\Http\Controllers\Operations\PropertiesController;

      Class ContractsController extends Controller{
            public function GetContractDetails() # a local method calling a method accessing other method from another class 
            { 
                $property_id = 13;
                $data['property_name'] = (new PropertiesController)->GetPropertyName($property_id); 
                return response()->json($data, 200);
            }  
        }

<?php namespace App\Http\Controllers\Operations; 
# OTHER CONTROLLER - that is accessed by a controller in need 

Class PropertiesController extends Controller {
    Class PropertiesController extends Controller{
        public function GetPropertyName($property_id) #method called by an adjacent class
        {
            return $property_name = 'D2/101/ROOM - 201';
        } 
    }
 } 
```

# sql - Firebird：使用全局变量

> ID：15559173
> 
> 赞同：3
> 
> 时间：2013-03-21T22:09:56.913
> 
> 标签：sql, firebird

我想为 firebird 的 sql 代码中使用的变量赋值。MySQL 代码将是：

```
SET @x = 1;
SELECT @x; 
```

对应的火鸟代码是什么？

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-22T09:31:20.190

要在 Firebird 中定义用户定义的会话特定变量，您可以使用[rdb$set_context](http://www.firebirdsql.org/refdocs/langrefupd20-set-context.html)。

您的 MySql 示例的对应 Firbird 代码将是：

```
select rdb$set_context('USER_SESSION', 'x', 1) from rdb$database
select rdb$get_context('USER_SESSION', 'x') from rdb$database 
```

**笔记：**

1.) 请注意变量名区分大小写。

2.) 内部变量值[与数据类型一起存储，`VARCHAR(255)`](http://www.janus-software.com/fbmanual/manual.php?book=psql&topic=49)因此转换为`VARCHAR(255)`!!

3.) 最大变量数为 1000。

4.) 你不需要参考`rdb$database`：

```
select rdb$get_context('USER_SESSION', 'x') from some_table_name 
```

也可以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T22:19:04.107

我不是火鸟方面的专家，但我相信它会是这样的......

```
set term ^ ;

EXECUTE BLOCK
AS
DECLARE VARIABLE x int;
BEGIN
  x = 1; 
  --do whatever you want with x, there's no such thing 
  --as to select the variable value to print it
END
^

set term ; ^ 
```

# jquery - 在悬停jquery上显示GIF图像，没有任何反应

> ID：15559174
> 
> 赞同：0
> 
> 时间：2013-03-21T22:09:57.687
> 
> 标签：jquery, html5-video, gif

好的，我有一个居中的视频，它显示了一个睁眼和闭眼的循环。在这之后我有一个隐藏的 div，其中包含一个闭眼的 GIF。我想要归档的是，当用户悬停按钮时，GIF 会显示在视频上方。这是我到目前为止所拥有的：

jQuery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    <script language="text/javascript">
        var image = new Image();
        image.src = "eye.gif";
        $("#apDiv1").hover(function () {

          $("#gif").show().attr('src', image.src);
        }, function(){
            $("#gif").hide();
        });
      </script> 
```

HTML 按钮：

```
<div id="apDiv1">
                                <li>
                                    <a href="../designcompany/index.html">
                                    <span class="ca-icon">Mode</span>
                                    </a>                    
                                </li>
                            </div> 
```

HTML 电影和 GIF：

```
<div id="w">

    <img id="gif" src="eye.gif"/>
                                    <div id="videoplayer">
                                        <center>
                                            <video id="intro" autoplay="autoplay" loop="loop" autobuffer="autobuffer" muted="muted" width="1024" height="400" >
                                            <source src="./media/eye.mp4" type="video/mp4">
                                            </video>
                                        </center>   
                                    </div>
                            </div> 
```

CSS：

```
#gif{
 display:none;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:15:17.087

如果你想要一个元素在另一个元素的“顶部”，你必须将它的 z-index 设置为更高的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:18:30.680

*我想要归档的是，当用户悬停按钮时，GIF 会显示在视频上方*

```
 $("#apDiv1").hover(
          function () {
           $("#gif").show().attr('src', image.src);
           $('#gif').css('z-index','999999');
           $('#videoplayer').css('z-index','999');
          },

          function(){
           $("#gif").hide();
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:19:29.240

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    <script language="text/javascript">
        //your code is here
    </script>
</script> 
```

那行不通，您需要关闭第一个脚本标签：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
    $(function() {
       //your code now goes here
    });
</script> 
```

而且我认为语言属性在 1990 年代很流行（大约在同一时间中心标签消失了）？

然后按正确的顺序放置元素：

```
<div id="apDiv1">
    <div id="videoplayer" style="margin: 0 auto; position: relative;">
        <video id="intro" autoplay="autoplay" loop="loop" autobuffer="autobuffer" muted="muted" width="1024" height="400">
            <source src="./media/eye.mp4" type="video/mp4" />
        </video>
        <img id="gif" src="eye.gif" style="display: none; position: absolute; top:0; left:0;"/>
    </div>
</div> 
```

并隐藏和显示图像：

```
$("#apDiv1").on('mouseenter mouseleave', function(e) {
    $("#gif").toggle(e.type==='mouseenter')
}); 
```

# web-services - 在网站上申请的正确术语

> ID：15559175
> 
> 赞同：0
> 
> 时间：2013-03-21T22:09:59.430
> 
> 标签：web-services, web-applications, client-server

我面临一个术语问题。网站从用户那里获取一些输入，在服务器端执行一些分析并将结果返回给用户。例如，给定一些特定日期，我的银行网站会计算该日期的财务报告（无息余额、利率、总余额等）。如果我正在制作这样一个网站，我到底在制作什么！“Web 服务”或“客户端-服务器系统”、“Web 应用程序”或“软件即服务”还是其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:53:51.843

Web 服务客户端通常是一个程序，而不是人类。Web 服务没有 GUI。Web 应用程序是供人类使用的，因此必须具有 GUI。你所说的银行网站是一个网络应用程序。但是，这并不意味着同一个应用程序不能同时托管 Web 服务和 Web 应用程序。

您可以将您的 Web 应用程序转变为 SaaS，如果

1.  它部署在云端
2.  它通常支持按需付费订阅模式
3.  它支持多租户。
4.  它能够快速有效地扩大规模，因此具有弹性
5.  通常它支持按租户定制或自助注册。

如您所见，上面提到的大多数特征都与云计算有关。

# python - 按“>名称”和“序列”组织字符串列表。Python

> ID：15559178
> 
> 赞同：1
> 
> 时间：2013-03-21T22:10:27.493
> 
> 标签：python, string, list, while-loop, append

所以我有一个从文件（查询）中读取的字符串列表。我想将所有以“>”开头的行附加到一个名为 name_list 的列表中，并将其后面的所有字母字符（但在下一个“>”行之前）附加到一个列表中。这是我之前关于集合论必须提出的非常相似的问题，但是当我尝试操纵**while 循环**时，它陷入了无限反馈循环......

这是字符串列表的示例

```
query = [">mm10_refGene_NM_001011532 range=chr2:86084810-86085854 5'pad=0 3'pad=0 strand=- repeatMasking=none", 'caatgcctttgcctcactgataatttctattagtcttatcttatttcatt', 'ttactttgcagctgttaagacttgatgaaATGGCTGGAAGCAATGCCACT', 'GGTGTGACAGAATTCATTCTCTTGGGGTTTGCAGTCCAGAGAGAGGTAGA',">mm10_refGene_NM_001011534 range=chr2:85352995-85353924 5'pad=0 3'pad=0 strand=- repeatMasking=none", 'ATGGAACAAAGTAATGACACCAAAGTGACTGAATTCATTCTTCTGGGATT', 'TTCCGGACAGCACAAATCTTGGCACATTCTGTTCATAATATTTCTAATGA', 'TCTATGTTGTCACACTCATGGGTAACATTGGAATGATCGTACTCATCAAA'] 
```

这是我一直在使用的代码：

```
name_list = []
seq_list = []

for line in query:

    while line.startswith(">"):
        name=line
        temp_seq=[]

        for line in query:
            if line.isalpha()==True:
                temp_seq.append(line)

            else:
                break
        name_list.append(name)
        seq_list.append(''.join(temp_seq)) 
```

输出数据示例：

```
name_list = [">mm10_refGene_NM_001011532 range=chr2:86084810-86085854 5'pad=0 3'pad=0 strand=- repeatMasking=none",">mm10_refGene_NM_001011534 range=chr2:85352995-85353924 5'pad=0 3'pad=0 strand=- repeatMasking=none"]

seq_list = ['caatgcctttgcctcactgataatttctattagtcttatcttatttcattttactttgcagctgttaagacttgatgaaATGGCTGGAAGCAATGCCACTGGTGTGACAGAATTCATTCTCTTGGGGTTTGCAGTCCAGAGAGAGGTAGA','ATGGAACAAAGTAATGACACCAAAGTGACTGAATTCATTCTTCTGGGATTTTCCGGACAGCACAAATCTTGGCACATTCTGTTCATAATATTTCTAATGATCTATGTTGTCACACTCATGGGTAACATTGGAATGATCGTACTCATCAAA'] 
```

抱歉，如果这类似于（[在行（从行列表）中搜索单词（从单词列表）并将值附加到新列表。Python](https://stackoverflow.com/questions/15349121/search-for-word-from-list-of-words-in-line-from-list-of-lines-and-append-val)）并且在任何方面都是多余的，但我认为这是一个帮助人们的好问题谁处理这类数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:32:11.317

```
name_list = []
seq_list = []

lines = iter(query)
for line in lines:
    while line.startswith(">"):
        name = line
        temp_seq = []
        for line in lines:
            if line.isalpha():
                temp_seq.append(line)
            else:
                break
        name_list.append(name)
        seq_list.append(''.join(temp_seq)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:33:32.910

你可以很直接地做到这一点[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
from itertools import groupby

def name_seq_chunks(seq): 
    isheader = lambda l:l.startswith('>')
    header = None
    for startgroup, dataiter in groupby(seq, isheader):
        if startgroup is True:
            header = list(dataiter)[-1]
        elif startgroup is False:
            yield header, ''.join(dataiter)

print list(name_seq_chunks(query)) 
```

这将产生一个元组列表，如`[('>header', 'caatgccttt...'), ...]`. 如果您真的希望它们分开，您可以重新压缩列表：

```
names, seqs = zip(*name_seq_chunks(query)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:18:54.640

Here's a modification of your code that loops through the elements of query one at a time:

```
name_list = []
seq_list = []

seq = ""
for line in query:
    if line.startswith('>'):
        if seq:
            seq_list.append(seq)
            seq = ""
        name_list.append(line)
    elif line.isalpha():
        seq = seq + line
seq_list.append(seq) 
```

But, in the example you provided, `query` has a consistent pattern of "name", followed by 3 "sequences". If your data always follows this consistent pattern, then here's another way to do it. You can define a function called `grouper` ([taken from the itertools docs](http://docs.python.org/2/library/itertools.html)), which will let you read 4 elements of `query` at a time.

```
from itertools import izip_longest

def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

Now, for each 4 element "chunk" of `query`, you append the 1st element to "names", and concatenate the last 3 to append to "sequences":

```
names = []
sequences = []

for chunk in grouper(4, query):
    names.append(chunk[0])
    sequences.append(''.join(chunk[1:]))

print names
print sequences 
```

Output:

```
[">mm10_refGene_NM_001011532 range=chr2:86084810-86085854 5'pad=0 3'pad=0 strand=- repeatMasking=none", ">mm10_refGene_NM_001011534 range=chr2:85352995-85353924 5'pad=0 3'pad=0 strand=- repeatMasking=none"]
['caatgcctttgcctcactgataatttctattagtcttatcttatttcattttactttgcagctgttaagacttgatgaaATGGCTGGAAGCAATGCCACTGGTGTGACAGAATTCATTCTCTTGGGGTTTGCAGTCCAGAGAGAGGTAGA', 'ATGGAACAAAGTAATGACACCAAAGTGACTGAATTCATTCTTCTGGGATTTTCCGGACAGCACAAATCTTGGCACATTCTGTTCATAATATTTCTAATGATCTATGTTGTCACACTCATGGGTAACATTGGAATGATCGTACTCATCAAA'] 
```

# ffmpeg - ffmpeg：PNG 到左右（RGB 和 Alpha）视频

> ID：15559182
> 
> 赞同：0
> 
> 时间：2013-03-21T22:10:41.220
> 
> 标签：ffmpeg, png, alpha

我有一组 PNG，想分割图像的 RGB 和 Alpha 通道，然后制作它们的并排视频。我知道过滤器是我需要的，但对我来说真的很复杂。我看了[类似的问题](https://stackoverflow.com/questions/11260930/ffmpeg-splitting-rgb-and-alpha-channels-using-filter)，但没有得到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:01:13.863

解决方案：

```
ffmpeg -framerate 24 -i item%4d.png -vf "split [a], pad=iw*2:ih [b], [a] alphaextract, [b] overlay=w" -q 1 -r 24 -y out.webm 
```

# google-app-engine - 以 10 为底的 int() 的值错误无效文字

> ID：15559186
> 
> 赞同：-2
> 
> 时间：2013-03-21T22:10:55.003
> 
> 标签：google-app-engine, web-applications, python-2.7, google-cloud-datastore, jinja2

当我在表单中输入 1933 作为 copyright_year 时出现以下错误：

> 文件“C:\programming_google_app_engine_repo\datastore\main.py”，第 29 行，post book.copyright_year = int(self.request.get('copyright_year')) ValueError: int() 以 10 为底的无效文字：'1933 1655'

为什么我会收到此错误？

**主文件**

```
import webapp2
import jinja2
import os

from google.appengine.ext import db

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class MainPage(webapp2.RequestHandler):
    def get(self):          

        book_query1 = Book.all()
        shakespeare_books = book_query1.filter("author =", "William Shakespeare")

        template_values = {
            'shakespeare_books': shakespeare_books,             
        }

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

class BookStore(webapp2.RequestHandler):
    def post(self):
        book = Book()
        book.title = self.request.get('title')
        book.author = self.request.get('author')
        book.copyright_year = int(self.request.get('copyright_year'))       
        book.put()  
        self.redirect('/')      

class Book(db.Model):
    title = db.StringProperty()
    author = db.StringProperty()
    copyright_year = db.IntegerProperty()

app = webapp2.WSGIApplication([('/', MainPage),
                                ('/new_book',BookStore)], debug=True) 
```

**索引.html**

```
<html>
    <body>                      
        <form action="/new_book" method="post">         
            <label for="title">Title</label>
            <div><textarea name="title" rows="1" cols="20" id="title"></textarea></div>
            <label for="author">Author</label>
            <div><textarea name="author" rows="1" cols="20" id="author"></textarea></div>
            <label for="copyright_year">Copyright Year</label>
            <div><textarea name="copyright_year" rows="1" cols="20" id="copyright_year"></textarea></div>           
            <div><input type="submit" value="Submit"></div>
        </form>

        {% for books in shakespeare_books %}                    
                <b>{{ books.title }}</b> 
                <b>{{ books.author }}</b>
                <b>{{ books.copyright_year }}</b>               
                <hr></hr>           
        {% endfor %}
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:52:09.550

您从请求中获得的字符串是: `"1933 1655"`，而不是`"1933"`您所说的。

您的网页以某种方式发送了错误的日期。您的网站上是否有任何验证代码，或者根本没有格式化日期的代码？

# django - Django GROUP BY 查询

> ID：15559188
> 
> 赞同：1
> 
> 时间：2013-03-21T22:11:01.267
> 
> 标签：django

给定具有以下数据库行的模型：

```
| Kind   | Age(days) |  Color |
-------------------------------
| Apple  |    1      | Red    |
| Apple  |    2      | Red    |
| Apple  |    3      | Red    |
| Apple  |    1      | Green  |
| Apple  |    2      | Green  |
| Plum   |    1      | Purple |
| Plum   |    2      | Purple |
| Cherry |    1      | Red    |
| Cherry |    2      | Red    | 
```

我想选择每种颜色的最古老的水果，所以我应该最终得到：

```
| Kind   | Age(days) |  Color |
-------------------------------
| Apple  |    3      | Red    |
| Apple  |    2      | Green  |
| Plum   |    2      | Purple | 
```

我知道在 SQL 中它看起来像：

```
SELECT * FROM `fruit` GROUP BY `color` ORDER BY `age` DESC; 
```

这是如何使用 Django QuerySet API 完成的？我看到的关于聚合的大部分内容都涉及计数，但我希望返回实际对象，而不是计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:25:13.247

```
def myview(request):    
    lists = []
    colors = Fruit.objects.values_list('color', flat=True).distinct()
    for color in colors:
        fruits = Fruit.objects.filter(color=color).order_by('-age')[:1]
        for fruit in fruits:
            lists.append({'kind': fruit.kind, 'age': fruit.age, 'color': fruit.color})
    return render(request, 'page.html', {'fruits': lists}) 
```

# c# - C# 在浏览器中选择

> ID：15559193
> 
> 赞同：2
> 
> 时间：2013-03-21T22:11:15.537
> 
> 标签：c#, webbrowser-control

我需要从网站上获取一张桌子。为此，我将网页加载到 webbrowser。但除此之外，我需要从下拉菜单中选择所需的选项，然后页面应该更新。然后我将使用 html 代码。事实证明，我需要更新 webbrowser 中的数据。我该如何实施？这就是我尝试选择所需选项的方式：

```
foreach (HtmlElement element in webBrowser1.Document.All)
{
    if (element.GetAttribute("name") == "Time")
    {
        element.Children[6].SetAttribute("selected", "selected");
        webBrowser1.Document.GetElementById("Time").InvokeMember("onchange");
    }                                  
} 
```

但它并没有改变 webbrowser 的内容。

编辑：我错过了，它是 ajax 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:26:13.497

我之前使用以下内容来更改下拉值。它似乎运作良好。

```
HtmlElement reportDropDown = webBrowser.Document.GetElementById("dropdown_control_id");
reportDropDown.Focus();
reportDropDown.SetAttribute("value", "Backup Status Report");  //The value of the desired selection
reportDropDown.InvokeMember("onchange");
reportDropDown.RemoveFocus(); 
```

我创建了一种状态机。这只是必须执行的一步。

# ios - 通过 CloudFront 将内容上传到 S3

> ID：15559203
> 
> 赞同：4
> 
> 时间：2013-03-21T22:11:46.670
> 
> 标签：ios, objective-c, amazon-s3, amazon-cloudfront

我正在开发一个需要将图像上传到 S3 的应用程序。现在我这样做：

```
S3PutObjectRequest *por = [[S3PutObjectRequest alloc] initWithKey:nameOfThePicture inBucket:nameOfTheBucket];
    por.contentType = @"image/jpg";
    por.data        = imageData;

    // Put the image data into the specified s3 bucket and object.
    S3PutObjectResponse *putObjectResponse = [self.s3 putObject:por];
    por.delegate = self; 
```

直接上传图片到 S3 太慢了，我已经配置了 CloudFront 服务。**现在，我想通过 CloudFront 将图像上传到 S3 中的原始存储桶。有可能做到吗？如果是，我该怎么做？**

真的感谢，

胜利者

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T22:37:28.480

不可以。CloudFront 是一种单向事务——您可以通过 CloudFront 从 S3 检索对象，但不能通过 CloudFront 将对象上传到 S3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T10:15:30.540

我的项目中有同样的要求。尽管我自己无法弄清楚所有内容，但我遇到了一个链接。

[http://raamdev.com/2008/using-curl-to-upload-files-via-post-to-amazon-s3/](http://raamdev.com/2008/using-curl-to-upload-files-via-post-to-amazon-s3/)

我试图用 PHP curl 模仿相同的内容，但不知何故，我看到上传的是密钥，而不是图像文件。可能这段代码会为您提供指导，如果有人能够在下面的脚本中找出问题，这对我以及任何想要实现这一目标的人都会有很大的帮助。

```
$url = 'http://xxxxxxxxxxx.cloudfront.net/'; // cloudfront distribution url.

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST"); 

//curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_POSTFIELDS, array("key"=>$_REQUEST['key'],"file"=>$_FILES['file']['tmp_name']));

//curl_setopt($ch, CURLOPT_POSTFIELDS, array("key"=>$_FILES['file']['tmp_name']));
//curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);

if (false == $result) {
    echo "Error while loading page: ", curl_error($ch), "\n"; 
}
curl_close($ch);
var_dump($result); 
```

# flot - 浮动轴标签不工作

> ID：15559204
> 
> 赞同：1
> 
> 时间：2013-03-21T22:11:49.423
> 
> 标签：flot

我似乎无法在我的基本 Flot 图上使用标签，我已将其简化为基础，但我仍然无法让它工作；

```
<div id="graph" style="width:600px;height:300px;"></div>

<script type="text/javascript">
$(function () {
    var d1 = [[0, 13], [1, 13], [2, 13], [3, 0], [4, 17], [5, 17], [6, 13]];

    $.plot($("#graph"), [ 
        {
            data: d1,
            bars: {
                show: true
            },
            xaxis: {
                axisLabel: 'Hops'
            },
            yaxis: {
                axisLabel: 'Traceroute'
            }
       }
    ]);

});
</script> 
```

下面是我得到的图表。如您所见，Chrome 调试窗口中没有错误。我确实包含了以下简单的轴标签格式设置，但它仍然不起作用：

```
 axisLabelUseCanvas: true,
            axisLabelFontSizePixels: 12,
            axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',
            axisLabelPadding: 5 
```

![在此处输入图像描述](../Images/bcbf3a5ea1957e3b8e35a56d7eb94815.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:40:00.747

我不知道我是如何解决这个问题的，但是通过让它变得更复杂，我知道了。也许是一个错误？

现在它可以使用以下代码：

```
<div id="graph" style="width:600px;height:300px;"></div>

<script type="text/javascript">
$(function () {
    var d1 = [[0, 13]];
    var d2 = [[1, 13]]; 
    var d3 = [[2, 13]];
    var d4 = [[3, 30]];
    var d5 = [[4, 17]];
    var d6 = [[5, 17]];
    var d7 = [[6, 13]];

    var data1 = [
        {
            data: d1,
            bars: {
                show: true,
                fillColor:  "#CAFFD8"
            },
            color: "#CAFFD8"
        },
        {
            data: d2,
            bars: {
                show: true,
                fillColor:  "#CAFFD8"
            },
            color: "#CAFFD8"
        },
        {
            data: d3,
            bars: {
                show: true,
                fillColor:  "#CAFFD8"
            },
            color: "#CAFFD8"
        },
        {
            data: d4,
            bars: {
                show: true,
                fillColor:  "#FF7575"
            },
            color: "#FF7575"
        },
        {
            data: d5,
            bars: {
                show: true,
                fillColor:  "#FFFF75"
            },
            color: "#FFFF75"
        },
        {
            data: d6,
            bars: {
                show: true,
                fillColor:  "#FFFF75"
            },
            color: "#FFFF75"
        },
        {
            data: d7,
            bars: {
                show: true,
                fillColor:  "#CAFFD8"
            },
            color: "#CAFFD8"
        },
    ];

    $.plot($("#graph"), data1, { 
            xaxis: {
                axisLabel: 'Hops',
                axisLabelUseCanvas: true,
                axisLabelFontSizePixels: 12,
                axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',
                axisLabelPadding: 5
            },
            yaxis: {
                min: 0,
                max: 30,
                axisLabel: 'Traceroute',
                axisLabelUseCanvas: true,
                axisLabelFontSizePixels: 12,
                axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',
                axisLabelPadding: 5
            }
       });

});
</script> 
```

![在此处输入图像描述](../Images/0ac6a470216191ae8c44a33ac38ee397.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-22T06:57:43.107

您需要在 html 代码中包含[jquery.flot.axislabels](https://raw.githubusercontent.com/RuiPereira/flot/axislabels/jquery.flot.axislabels.js)插件。

# java - 添加数组时 PreparedStatment 错误

> ID：15559207
> 
> 赞同：4
> 
> 时间：2013-03-21T22:12:07.400
> 
> 标签：java, sql, arrays, spring

我正在使用 SPRING 框架，我目前正在尝试在创建新条目（行）时将数组添加到我的数据库中。有问题的列称为“关键字”。所以这是我的 sql 初始化代码（对我来说看起来不错）

```
CREATE TABLE IF NOT EXISTS Email (
    Email_Id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    Sender_Email VARCHAR(255) NOT NULL,
    Recipient_Email VARCHAR(255) NOT NULL,
    Subject VARCHAR(255) NOT NULL,
    Body TEXT,
    Attachment_Path VARCHAR(255) NOT NULL,
    Creation_Date DATETIME NOT NULL,
    MaxKeywords INT UNSIGNED NOT NULL,
    Keywords VARCHAR(255) NOT NULL,
    Primary Key(Email_Id)
); 
```

这是我的 add 函数中崩溃和烧毁的代码：

```
public boolean add(final MessageDto emailDto){
    boolean result = false;
    int rowsAffected;
    KeyHolder keyHolder = new GeneratedKeyHolder();
    final String sql;

    sql = "INSERT INTO email (Sender_Email, Recipient_Email, Subject, Body, Attachment_Path, Creation_Date, MaxKeywords, Keywords) " +
            "VALUES (?, ?, ?, ?, ?, ?, ?, ?)";

    try{
        rowsAffected = getJdbcTemplate().update(
                  new PreparedStatementCreator() {
                        public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {
                            PreparedStatement statement = 
                                    connection.prepareStatement(sql, new String[] {"emailId"});

                            String[] foo = {"A","B"};

                            statement.setString(1, emailDto.getFrom());
                            statement.setString(2, emailDto.getTo());
                            statement.setString(3, emailDto.getSubject());
                            statement.setString(4, emailDto.getBody());
                            statement.setString(5, emailDto.getAttachmentPath());
                            statement.setTimestamp(6, new Timestamp(emailDto.getCreationDate().getMillis()));
                            statement.setInt(7, emailDto.getMaxKeywordCount());
                            statement.setArray(8, connection.createArrayOf("varchar", foo));

                            return statement;
                        }
                      }, keyHolder);

        if(rowsAffected > 0){
            emailDto.setEmailId(keyHolder.getKey().intValue());
            result = true;
        }
    } catch (Exception e){
        throw new RuntimeException(e);
    }

    return result;
} 
```

抛出的错误是：

```
org.springframework.dao.InvalidDataAccessApiUsageException: PreparedStatementCallback; SQL []; null; nested exception is java.sql.SQLFeatureNotSupportedException 
```

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:35:41.150

如果您决定放弃该`setArray`方法，您可以这样做。使用您自己的逻辑将数组转换为字符串。无论如何，您将其存储在 a 中`varchar`，因此您必须“展平”数组。

```
 String[] foo = {"A","B"};
    StringBuilder sb = new StringBuilder();
    for (String bar : foo) {
        sb.append(bar);
        sb.append("\t");
    }
    statement.setArray(8, sb.toString()); 
```

# php - 如何在数组中绑定值？

> ID：15559211
> 
> 赞同：0
> 
> 时间：2013-03-21T22:12:17.590
> 
> 标签：php, pdo, bindvalue

我有很多东西要插入到数据库列中。

```
 $connect->prepare("INSERT INTO users (username, password, message, date, time, id) VALUES (:username, :password, :message, :date, :time, :id"); 
```

我没有将它们全部绑定，而是创建了一个数组：

```
 $IDs = array($username, $password, $message, $time, $date, $ID); 
```

如何从这个数组中获取每个变量并绑定它？我完全迷失了 PDO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:14:54.657

采用：

```
$sth->execute(array(':username' => $username, ':password' => $password, $message, $time, $date, $ID)) 
```

而对于其他人...

# asn.1 - ASN.1 optionalGroup 在定义语法中的解释

> ID：15559213
> 
> 赞同：0
> 
> 时间：2013-03-21T22:12:21.683
> 
> 标签：asn.1

我正在解析规范 ETSI TS 129 002 (3GPP TS 29.002)，其中包含应用程序上下文的类定义：

```
APPLICATION-CONTEXT ::= CLASS {
   &Symmetric OPERATION-PACKAGE OPTIONAL,
   &InitiatorConsumerOf OPERATION-PACKAGE OPTIONAL,
   &ResponderConsumerOf OPERATION-PACKAGE OPTIONAL,
   &code OBJECT IDENTIFIER }
WITH SYNTAX {
   [ OPERATIONS OF &Symmetric ]
   [ INITIATOR CONSUMER OF &InitiatorConsumerOf
     RESPONDER CONSUMER OF &ResponderConsumerOf ]
     ID &code } 
```

在同一规范中有此类的实例化，例如

```
resetContext-v3 APPLICATION-CONTEXT ::= {
    -- Responder is VLR or SGSN if Initiator is HLR or CSS 
    INITIATOR CONSUMER OF {
    resetPackage-v3}
 ID {map-ac reset(10) version3(3)} } 
```

据我了解，该课程有两个可选组（OPERATIONS 和 INITIATOR...RESPONDER）和一个必需组（ID）。可选组本身由必需的令牌组成。以这种方式看到它的类的实例化将是无效的，因为缺少响应部分。这两个片段都取自同一个规范，所以我认为它们不应该是无效的。

X.680 中的一个附加声明指出，可选组的第一个标记的出现使该组出现。在这种情况下，令牌 INITIATOR 将标记该组存在。但是随后将缺少所需的令牌 RESPONDER。

在这种情况下，对可选组的正确解释是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:45:56.220

看起来您的 ASN.1 规范无效。如果 INITIATOR 存在，那么 RESPONDER 必须存在于对象中是正确的。[在http://asn1-playground.oss.com](http://asn1-playground.oss.com)上的免费在线编译器中尝试您的规范以确认这一点。

# google-chrome-extension - 来自 Chrome 扩展的 HTTPS Ajax 请求不起作用

> ID：15559218
> 
> 赞同：0
> 
> 时间：2013-03-21T22:13:08.043
> 
> 标签：google-chrome-extension

我有一个 chrome 扩展，可以拉下使用 HTTPS 的 Hacker News 的 RSS 提要。自从我升级到最新版本的 chrome 扩展清单后，我就无法让它工作。ajax 请求失败，没有任何解释。

我 99% 确定发出请求的 javascript 代码是正确的，所以我认为这是权限问题。

这是我清单中的权限和内容安全策略部分：

```
 "permissions": [
    "tabs",
    "https://news.ycombinator.com/",
    "http://news.ycombinator.com/",
    "notifications"
  ],
  "content_security_policy": "script-src 'self' 'unsafe-eval' https://news.ycombinator.com; object-src 'self' 'unsafe-eval' https://news.ycombinator.com" 
```

有任何想法吗？

谢谢！

* * *

编辑：

这是 Github 存储库的链接：[https ://github.com/adamalbrecht/hacker-news-for-chrome/](https://github.com/adamalbrecht/hacker-news-for-chrome/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:24:11.173

我认为您应该这样做`"permissions": [ "tabs", "https://news.ycombinator.com/*", "http://news.ycombinator.com/*", "notifications" ],`，因为 Chrome 想要一种允许的主机模式。看到[这个](http://developer.chrome.com/extensions/match_patterns.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T23:05:13.297

它在 Chrome 27.0.1438.8 上对我有用，但您没有发布代码，因此比较结果并不容易。这是我所做的：

1.  从 Chrome kittens 示例扩展开始。
2.  将清单权限更改为...

    “权限”：[“ [https://news.ycombinator.com/rss](https://news.ycombinator.com/rss) ”]

3.  在 popup.js 中，将 searchOnFlickr_ 更改为相同的 URL。

4.  更改 showPhotos_ 以记录 e.target。

然后我加载了扩展，右键单击浏览器操作弹出窗口，并检查了元素。在日志中，我在 responseText 中看到了预期的 RSS 内容。

# c# - 如何在 Log、Cos、Sin 等数学函数上创建 UnaryExpression

> ID：15559219
> 
> 赞同：2
> 
> 时间：2013-03-21T22:13:09.490
> 
> 标签：c#, linq, lambda, expression

我想构建一个 UnaryExpression 列表，以便稍后在我的代码中使用。我能够轻松地将其用于 BinaryExpression 并获得：

```
var binaryList = new Func<Expression, Expression, Expression>[]
        {
            Expression.Add, 
            Expression.Subtract, 
            Expression.Multiply, 
            Expression.Divide
        }; 
```

在我的 UnaryExpression 列表中，我希望能够将 Math.Cos(..)、Math.Log(..) 处理为一元运算符。为了得到这个想法，我很想拥有类似的东西

```
var unaryList = new Func<Expression, Expression>[]
        {
            Expression.Negate, // works fine
            new Func<Expression, Expression>(
                expr => new UnaryExpression(Math.Cos, expr)
        }; 
```

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T22:25:46.257

您想为表示使用给定参数调用静态方法的表达式创建一个工厂。调用方法由 表示[`MethodCallExpression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.methodcallexpression.aspx)，其实例可以通过工厂方法轻松创建[`Expression.Call`](http://msdn.microsoft.com/en-us/library/bb341086.aspx)。就是这样：

```
var unary = new Func<Expression, Expression>(
    e => Expression.Call(null, typeof(Math).GetMethod("Cos"), e)); 
```

更新：我刚刚意识到还有[另一个重载](http://msdn.microsoft.com/en-us/library/bb301084.aspx)允许您在`Expression.Call`处理`static`方法时完全省略第一个参数（实例）：

```
e => Expression.Call(typeof(Math).GetMethod("Cos"), e) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-12T08:25:21.207

我个人更喜欢 nameof 函数而不是使用魔术字符串：

```
e => Expression.Call(typeof(Math).GetMethod(nameof(Math.Cos)), e) 
```

# ruby - Ruby Rspec 测试

> ID：15559229
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:13:32.923
> 
> 标签：ruby, rspec

嗨，我正在尝试通过某种方法通过此 rspec 测试，您好需要帮助。问题是我不知道它在问什么。这是我试图通过的测试。

```
describe "repeater" do
  it "executes the default block" do
    block_was_executed = false
    repeater do
      block_was_executed = true
    end
    block_was_executed.should == true
  end

  it "executes the default block 3 times" do
    n = 0
    repeater(3) do
      n += 1
    end
    n.should == 3
  end

  it "executes the default block 10 times" do
    n = 0
    repeater(10) do
      n += 1
    end
    n.should == 10
  end
end 
```

我真的不知道我需要做什么才能通过这个测试，因为我真的不知道它在问什么。如果可以用文字解释而无需实际给我代码以使其通过，那就太棒了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:18:33.347

首先：这似乎是一项家庭作业。谷歌搜索其中一个测试名称，出现了[这个](https://github.com/alexch/learn_ruby/blob/master/05_silly_blocks/silly_blocks_spec.rb).

在第一个测试中，该`repeater`方法需要获取一个块，然后运行该块以设置变量。

在第二个测试中，该`repeater`方法需要接受一个参数，然后在给定的块中迭代给定的次数。

第三个测试与第二个测试相同，只是它应该迭代 10 次而不是 3 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:19:28.260

正如尼尔所说，该方法如下所示：

```
def repeater(n=1, &block)
  n.times &block
end 
```

该方法需要一个数字和一个块，如果没有传递任何数字，它将只执行一次该块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:17:13.027

测试是针对必须调用的方法`repeater`

`repeater`应该接受 0 或 1 个参数，并且应该接受一个代码块并屈服于它

提供的参数是屈服于代码块的次数

如果未提供参数，`repeater`则应至少向代码块屈服一次。

# c# - 在 C# 中的 WebBrowser 上链接多个事件

> ID：15559231
> 
> 赞同：1
> 
> 时间：2013-03-21T22:13:43.030
> 
> 标签：c#, multithreading, webbrowser-control

所以我正在为一些 web api 做一些自动化测试。我正在尝试查看是否可以使用 System.Windows.Forms.WebBrowser 类导航到页面，输入一些文本并按下按钮，所有这些都来自控制台。我决定使用维基百科进行测试，因为在搜索栏中输入文本并点击搜索与我正在尝试做的事情几乎相同。

我使用[这个问题](https://stackoverflow.com/questions/4269800/webbrowser-control-in-a-new-thread/4271581#4271581)的代码开始。

我遇到的问题是我似乎不能将这两个动作链接在一起，1）导航到维基百科，2）在搜索框中输入文本并点击 go。它可以导航到维基百科。有人告诉我尝试使用状态机，但我不太清楚它应该是什么样子。事实上，当它第二次返回 runBrowser 方法时，行 br.Document.GetElementByID("searchInput") 会引发 InvalidCastException。所以我对那里发生的事情一无所知。我假设与在旧线程运行时创建新线程有关，但是当我杀死旧线程时，它似乎也杀死了 WebBrowser 并抛出一个错误说“断开的上下文”

这是我的代码：

```
static WebBrowser br = new WebBrowser();

static void runBrowserThread()
{

        var th = new Thread(() =>
        {

            br.DocumentCompleted += browser_DocumentCompleted;
            if (state == 0)
            {
                br.Navigate(new Uri("http://en.wikipedia.org/wiki/Main_Page"));
                state++;
            }
            else if (state == 1)
            {

                if (br.Document.GetElementById("searchInput") != null)
                {
                    HtmlElement search = br.Document.GetElementById("searchInput");
                    search.SetAttribute("value", searchterm);
                    foreach (HtmlElement ele in search.Parent.Children)
                    {
                        if (ele.TagName.ToLower() == "input" && ele.Name.ToLower() == "go")
                        {
                            ele.InvokeMember("click");
                            break;
                        }
                    }
                }
                else
                    Console.WriteLine("Meep");
                state++;
            }

            Application.Run();
        });
        th.SetApartmentState(ApartmentState.STA);
        th.Start();       
}

static void browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // var br = sender as WebBrowser;
    if (br.Url == e.Url)
    {
        Console.WriteLine("Natigated to {0}", e.Url);

    }
    HtmlElement search = br.Document.GetElementById("searchInput");
    Console.WriteLine(search.InnerHtml);
    Console.ReadLine();
    // Application.ExitThread();   // Stops the thread
    runBrowserThread();
    return;
} 
```

任何关于如何安排此代码以使线程的东西玩得很好的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:17:28.713

不，你这样做从根本上是错误的。它爆炸是因为你开始了一个新线程，永远不要那样做。您应该改为检查 DocumentCompleted 事件中的状态。所以，大致：

```
 var th = new Thread(() =>
    {
        state = 0;
        br.Navigate(new Uri("http://en.wikipedia.org/wiki/Main_Page"));
        Application.Run();
    } 
```

和

```
void browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    var br = sender as WebBrowser;
    if (state == 0) {
       // You are now on the main page, set the searchInput and submit click
       //...
       state = 1;
    }
    else if (state == 1) {
       // You are now on the searched page, do whatever you need to do
       //...
       // And if you are done:
       Application.ExitThread();
    }
} 
```

如果您访问更多页面，请添加其他状态。

# python - 如何使用 Python 对图像进行缩略图

> ID：15559232
> 
> 赞同：1
> 
> 时间：2013-03-21T22:13:45.270
> 
> 标签：python, image

我想用 Python 对图像进行缩略图（将其调整为小尺寸）。

我怎么能做到这一点？
你知道有什么图书馆可以做这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:19:43.763

一个非常快速的谷歌搜索立即返回[了这篇文章](https://stackoverflow.com/questions/273946/how-do-i-resize-an-image-using-pil-and-maintain-its-aspect-ratio)：

```
size = 128, 128

try:
    im = Image.open(infile)
    im.thumbnail(size, Image.ANTIALIAS)
    im.save(outfile, "JPEG")
except IOError:
    print "cannot create thumbnail for '%s'" % infile 
```

我使用的搜索词是`PIL`、`Python`、`resize`和`image`。你也可以试试`thumbnail`。Python Imaging Library ( `PIL`) 是您想要使用的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T22:19:45.363

是的，您可以使用 PIL（Python 图像库）

```
from PIL import Image
image = Image.open(full_image_loc)
image.thumbnail((360, 360), Image.ANTIALIAS)
image.save('thumbnail.jpg', 'JPEG') 
```

您还需要弄清楚如何安装 PIL ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T22:17:59.460

看看[这个](http://www.pythonware.com/library/pil/handbook/image.htm)Python 的图像模块。它应该允许您轻松创建缩略图。

他们的页面上甚至还有一个非常简单的示例：

```
from PIL import Image
import glob, os

size = 128, 128

for infile in glob.glob("*.jpg"):
    file, ext = os.path.splitext(infile)
    im = Image.open(infile)
    im.thumbnail(size, Image.ANTIALIAS)
    im.save(file + ".thumbnail", "JPEG") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T22:22:30.867

‍‍‍使用PIL库：‌‌</p>

```
‍‍
‍‍from PIL import Image
image = Image.open(full_image_loc)
image.thumbnail((360, 360), Image.ANTIALIAS)
image.save('thumbnail.jpg', 'JPEG') 
```

或者您可以使用 Image 类：

```
from PIL import Image
import glob, os

size = 128, 128

for infile in glob.glob("*.jpg"):
    file, ext = os.path.splitext(infile)
    im = Image.open(infile)
    im.thumbnail(size, Image.ANTIALIAS)
    im.save(file + ".thumbnail", "JPEG") 
```

# list - 在 Haskell 中使用元组列表

> ID：15559234
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:13:54.250
> 
> 标签：list, haskell, tuples

我在 Haskell 中有一个 10 元组的列表，我想从该元组列表中获取第 n 个元组。但正如我所见，只有**长度**函数适用于该列表。**头**，**尾**或**！**功能不起作用。你能告诉我我该怎么做吗？元组由整数和字符串组成。例如，当我尝试这个时：

```
tail [(3,5,"String1","String2","String3","String4","String5","String6","String7","String8"),(3,5,"String1","String2","String3","String4","String5","String6","String7","String8"),(3,5,"String1","String2","String3","String4","String5","String6","String7","String8")] 
```

我从拥抱中收到此错误消息：

```
ERROR - Cannot find "show" function for:
*** Expression : tail [(3,5,"String1","String2","String3","String4","String5","String6","String7","String8"),(3,5,"String1","String2","String3","String4","String5","String6","String7","String8"),(3,5,"String1","String2","String3","String4","String5","String6","String7","String8")]
*** Of type    : [(Integer,Integer,[Char],[Char],[Char],[Char],[Char],[Char],[Char],[Char])] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T23:03:50.647

以下是如何`Show`为 3 元组声明实例。希望这说明了这个想法，您可以将其扩展到更多元素：

```
导入 Data.List（插入）

实例 (显示 a, 显示 b, 显示 c) => 显示 (a, b, c) 其中
  show (a, b, c) = "(" ++ (intercalate "," ([show a, show b, show c])) ++ ")"

```

您可以像逻辑含义一样阅读实例声明：*如果*我可以显示类型 a、b 和 c 的值，*那么*我可以显示类型为 (a、b、c) 的元组，这就是方法。

GHC 为最多 15 个元组的所有内容定义了一个 Show 实例，因此您可能不需要在您的情况下定义它。

# php - XSLT - 将两个不同的 XML 文件转换为一个而不重复元素

> ID：15559241
> 
> 赞同：1
> 
> 时间：2013-03-21T22:14:37.347
> 
> 标签：php, xml, xslt, transform

我有两个不同的 XML 文件：movies.xml 和亚马逊产品广告 API XML

这是我转换两个 XML 文件的 XSLT 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:aws="http://webservices.amazon.com/AWSECommerceService/2011-08-01"
exclude-result-prefixes="aws">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

<xsl:template match="/">
    <xsl:element name="html">
        <xsl:element name="head">
            <xsl:element name="h2">Movies list</xsl:element>
        </xsl:element>
        <xsl:element name="body">
            <xsl:apply-templates select="/movies/movie"/>
            <xsl:apply-templates select="aws:ItemLookupResponse/aws:Items/aws:Item/aws:ItemAttributes/aws:Title"/>
        </xsl:element>
    </xsl:element>
</xsl:template>

<xsl:template match="movie">
    <xsl:element name="a">
        <xsl:attribute name="href">movie_details.php?movieID=<xsl:value-of select="@movieID"/></xsl:attribute>
        <xsl:value-of select="title"/>
    </xsl:element>
    <xsl:element name="br" />
</xsl:template>

<xsl:template match="aws:Title">
    <xsl:element name="h2">Amazon Movie 1</xsl:element>
    <xsl:value-of select="." />
</xsl:template>

</xsl:stylesheet> 
```

*apply-templates select="/movies/movie* - 从 movies.xml 加载 5 个电影标题的列表并将它们显示为超链接。

*apply-templates select="aws:ItemLookupResponse/aws:Items/aws:Item/aws:ItemAttributes/aws:Title"* - 从 Amazon API xml 文件加载电影标题并将其显示为纯文本。

这是我的 HTML 输出：

```
<html>
  <head>
    <h2>Movies list</h2>
  </head>
  <body>
    <a href="movie_details.php?movieID=1">The Dark Knight Rises</a>
    <br/>
    <a href="movie_details.php?movieID=2">Lawless</a>
    <br/>
    <a href="movie_details.php?movieID=3">Inception</a>
    <br/>
    <a href="movie_details.php?movieID=4">Looper</a>
    <br/>
    <a href="movie_details.php?movieID=5">Django Unchained</a>
    <br/>
  </body>
</html>
<html>
  <head>
    <h2>Movies list</h2>
  </head>
  <body><h2>Amazon Movie 1</h2>Dark Knight Rises [Blu-ray] [2012] [US Import]</body>
</html> 
```

如您所见，这两个模板显示在单独的 HTML 标记中，这导致两个模板的 Head 元素“电影列表”显示两次。

如果我能以某种方式将这两个模板放入一个 HTML 元素中，那么就不会重复任何内容。我尝试了几种方法，但还没有成功。

这是我的 PHP 文件，它创建了两个 XML 文件和一个 XSLT 样式表。它还会生成亚马逊产品的签名 URL。

```
include('aws_signed_request.php');

$public_key = 'XXXXXXXXXXXXXXXXXXXXXX';
$private_key = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$associate_tag = 'xxxxxxxxxxxxxxxxxxxxxxx';

// generate signed URL
$request = aws_signed_request('co.uk', array(
        'Operation' => 'ItemLookup',
        'ItemId' => 'B004LWZWGK',
        'ResponseGroup' => 'Small'), $public_key, $private_key, $associate_tag);

// do request (you could also use curl etc.)
$response = @file_get_contents($request);
if ($response === FALSE) {
    echo "Request failed.\n";
} else {

    // parse XML
    $xml = new DOMDocument();
    $xml->load('movies.xml');

    $xml2 = new DOMDocument();
    $xml2->loadXML($response);

    $xsl = new DOMDocument;
    $xsl->load('movies_list.xsl');

    $proc = new XSLTProcessor();
    $proc->importStyleSheet($xsl);

    echo $proc->transformToXML($xml);
    echo $proc->transformToXML($xml2);

} 
```

*电影.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="index.xsl"?>
<movies
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="movies.xsd">

<movie movieID="1">
    <title>The Dark Knight Rises</title>
</movie>

<movie movieID="2">
    <title>Lawless</title>
</movie>

<movie movieID="3">
    <title>Inception</title>
</movie>

<movie movieID="4">
    <title>Looper</title>
</movie>

<movie movieID="5">
    <title>Django Unchained</title>
</movie>
</movies> 
```

*亚马逊产品广告 API XML*

```
<ItemLookupResponse xmlns="http://webservices.amazon.com/AWSECommerceService/2011-08-01">
   <OperationRequest>
       <HTTPHeaders>
          <Header Name="UserAgent" Value="Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22"/>
       </HTTPHeaders>
       <RequestId>a1138e89-4335-4650-80f2-641e3c58b623</RequestId>
       <Arguments>
    <Argument Name="Operation" Value="ItemLookup"/>
    <Argument Name="Service" Value="AWSECommerceService"/>
    <Argument Name="Signature" Value="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"/>
    <Argument Name="AssociateTag" Value="xxxxxxxxxxxxxx"/>
    <Argument Name="Version" Value="2011-08-01"/>
    <Argument Name="ItemId" Value="B004LWZWGK"/>
    <Argument Name="AWSAccessKeyId" Value="xxxxxxxxxxxxxxxxxxxx"/>
    <Argument Name="Timestamp" Value="2013-03-21T13:56:55.000Z"/>
    <Argument Name="ResponseGroup" Value="Small"/>
       </Arguments>
       <RequestProcessingTime>0.0189320000000000</RequestProcessingTime>
       </OperationRequest>
    <Items>
      <Item>
         <ItemAttributes>
           <Title>
            The Dark Knight Rises (Blu-ray/DVD Combo+UltraViolet Digital Copy)
           </Title>
         </ItemAttributes>
      </Item>
    </Items>
</ItemLookupResponse> 
```

浏览器输出：

![浏览器](../Images/ab73e770dff2f78bc9d5cd60619e3f6b.png).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:56:13.363

XSLTProcessor 似乎不允许您将 XML 内容设置为参数（setParameter 函数只接受一个字符串），因此您需要使用 XSLT`document`函数来处理多个输入文档，如此处和[此处所讨论](http://www.xml.com/pub/a/2002/03/06/xslt.html)[的](http://p2p.wrox.com/xslt/79311-how-process-multiple-input-xml-files-single-xslt.html)。您需要将来自 Amazon 的响应保存为文件系统中的文件，然后您的 XSLT 可能看起来像这样（我在其中简化了您的文件名）：

```
<xsl:variable name="amazon" select="document('amazon.xml')"/>

<xsl:template match="/">
    <html>
        <body>
            <h2>Movies List</h2>
            <xsl:apply-templates select="movies/movie" />
            <h2>
                <xsl:value-of select="normalize-space($amazon/aws:ItemLookupResponse/aws:Items/aws:Item/aws:ItemAttributes/aws:Title)"/>
            </h2>
        </body>
    </html>
</xsl:template>

<xsl:template match="movie">
    <a>
        <xsl:attribute name="href">movie_details.php?movieID=<xsl:value-of select="@movieID"/></xsl:attribute>
        <xsl:value-of select="title"/>
    </a>
    <br/>
</xsl:template> 
```

编辑：根据您对我的原始答案的评论修改了代码，并删除了关于“多对一”问题的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T03:13:17.487

**我无法重现问题**。

**使用您的 XSLT 代码**（稍微更改为通过调用函数访问“movies.xml” `document()`）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:aws="http://webservices.amazon.com/AWSECommerceService/2011-08-01"
exclude-result-prefixes="aws">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

<xsl:variable name="vMoviesDoc" select=
 "document('file:///c:/temp/delete/movies.xml')"/>

<xsl:template match="/">
    <xsl:element name="html">
        <xsl:element name="head">
            <xsl:element name="h2">Movies list</xsl:element>
        </xsl:element>
        <xsl:element name="body">
            <xsl:apply-templates select="$vMoviesDoc/movies/movie"/>
            <xsl:apply-templates select="aws:ItemLookupResponse/aws:Items/aws:Item/aws:ItemAttributes/aws:Title"/>
        </xsl:element>
    </xsl:element>
</xsl:template>

<xsl:template match="movie">
    <xsl:element name="a">
        <xsl:attribute name="href">movie_details.php?movieID=<xsl:value-of select="@movieID"/></xsl:attribute>
        <xsl:value-of select="title"/>
    </xsl:element>
    <xsl:element name="br" />
</xsl:template>

<xsl:template match="aws:Title">
    <xsl:element name="h2">Amazon Movie 1</xsl:element>
    <xsl:value-of select="." />
</xsl:template>

</xsl:stylesheet> 
```

**应用于提供的*亚马逊产品广告 API XML*文档时：**

```
<ItemLookupResponse xmlns="http://webservices.amazon.com/AWSECommerceService/2011-08-01">
   <OperationRequest>
       <HTTPHeaders>
          <Header Name="UserAgent" Value="Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22"/>
       </HTTPHeaders>
       <RequestId>a1138e89-4335-4650-80f2-641e3c58b623</RequestId>
       <Arguments>
    <Argument Name="Operation" Value="ItemLookup"/>
    <Argument Name="Service" Value="AWSECommerceService"/>
    <Argument Name="Signature" Value="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"/>
    <Argument Name="AssociateTag" Value="xxxxxxxxxxxxxx"/>
    <Argument Name="Version" Value="2011-08-01"/>
    <Argument Name="ItemId" Value="B004LWZWGK"/>
    <Argument Name="AWSAccessKeyId" Value="xxxxxxxxxxxxxxxxxxxx"/>
    <Argument Name="Timestamp" Value="2013-03-21T13:56:55.000Z"/>
    <Argument Name="ResponseGroup" Value="Small"/>
       </Arguments>
       <RequestProcessingTime>0.0189320000000000</RequestProcessingTime>
       </OperationRequest>
    <Items>
      <Item>
         <ItemAttributes>
           <Title>
            The Dark Knight Rises (Blu-ray/DVD Combo+UltraViolet Digital Copy)
           </Title>
         </ItemAttributes>
      </Item>
    </Items>
</ItemLookupResponse> 
```

并在本地目录“C:\temp\delete”中拥有提供的 XML 文档（文件“movies.xml”）：

```
<movies xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="movies.xsd">
    <movie movieID="1">
        <title>The Dark Knight Rises</title>
    </movie>
    <movie movieID="2">
        <title>Lawless</title>
    </movie>
    <movie movieID="3">
        <title>Inception</title>
    </movie>
    <movie movieID="4">
        <title>Looper</title>
    </movie>
    <movie movieID="5">
        <title>Django Unchained</title>
    </movie>
</movies> 
```

**转换产生以下结果，其中没有重复`head`：**

```
<html>
   <head>
      <h2>Movies list</h2>
   </head>
   <body>
      <a href="movie_details.php?movieID=1">The Dark Knight Rises</a>
      <br/>
      <a href="movie_details.php?movieID=2">Lawless</a>
      <br/>
      <a href="movie_details.php?movieID=3">Inception</a>
      <br/>
      <a href="movie_details.php?movieID=4">Looper</a>
      <br/>
      <a href="movie_details.php?movieID=5">Django Unchained</a>
      <br/>
      <h2>Amazon Movie 1</h2>
            The Dark Knight Rises (Blu-ray/DVD Combo+UltraViolet Digital Copy)
           </body>
</html> 
```

# python - 不同节点的列表正在生成一个列表，只有一个节点

> ID：15559251
> 
> 赞同：0
> 
> 时间：2013-03-21T22:15:11.360
> 
> 标签：python, list, nodes

我需要帮助。我的代码没有生成不同节点的列表，而是它们都是相同的，我不知道为什么。

```
def init(logger, playerId, numWalls, playerHomes):

"""
    Part 1 - 4

    The engine calls this function once at the beginning of the game.
    The student player module uses this function to initialize its data
    structures to the initial game state.

    Parameters
        logger: a reference to the logger object. The player model uses
            logger.write(msg) and logger.error(msg) to log diagnostic
            information.

        playerId: this player's number, from 1 to 4

        numWalls: the number of walls each player is given initially

        playerHomes: An ordered tuple of player locations
                     A location is a 2-element tuple of (row,column).
                     If any player has already been eliminated from
                     the game (rare), there will be a bool False in
                     that player's spot in the tuple instead of a
                     location.

    returns:
        a PlayerData object containing all of this player module's data
"""

class Node:
#online lecture notes for class

    """
     Node represents a node in a graph using adjacency lists.
     Node.name is a String.
     Node.neighbors is a ListOfNode.
    """

    __slots__ = ( 'name', 'neighbors' )

    def __init__(self, name):
        """
        __init__: Node * String -> None
        Constructs a node object with the given name and no neighbors.
        """
        self.name = name
        self.neighbors = []

NodeList = []
row = 0
col = 0
while row < 9:
    while col < 9:
        Node.name = (row,col)
        Node.neighbors = neigh(Node.name)
        print(str(Node))
        NodeList.append(Node)
        col = col + 1
        print(str(Node.name))
        print(str(Node.neighbors))
    col = 0
    row = row + 1
count = 0

print(NodeList[0])
print(Node.neighbors)

def neigh(node):
    name=node
    if name == (0, 0): #top left corner
        neighbors = [ None, ( 0+1, 0 ), ( 0, 0+1), None]
    elif name == (0, 8): #top right corner
        neighbors = [ None, ( 0+1, 8 ), None, (0, 8-1)]
    elif name == (8, 0): #bot left corner
        neighbors = [ (8-1, 0) , None, (8, 0+1), None]
    elif name == (8, 8): #bot right corner
        neighbors = [ (8-1, 8), None, None, (8,8-1)]
    elif name[0] < 1:
        neighbors = [ None, (name[0]+1, name[1] ), (name[0], name[1]+1 ), (name[0], name[1]-1)]
    elif name[0] > 7:
        neighbors = [ (name[0]-1, name[1] ), None, (name[0], name[1]+1 ), (name[0]-1, name[1]-1)]
    elif name[1] < 1:
        neighbors = [ (name[0]-1, name[1] ), (name[0]+1, name[1] ), (name[0], name[1]+1 ), None]
    elif name[1] > 7:
        neighbors = [ (name[0]-1, name[1] ), (name[0]+1, name[1] ), None, (name[0], name[1]-1)]
    else:
        neighbors = [ (name[0]-1, name[1] ), (name[0]+1, name[1] ), (name[0], name[1]+1 ), (name[0], name[1]-1)]

    return neighbors

init(1, 1, 1, 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:20:03.810

这里：

```
 Node.name = (row,col)
    Node.neighbors = neigh(Node.name) 
```

您需要创建一个实例`Node`：

```
 node = Node()
    node.name = (row,col)
    node.neighbors = neigh(node.name) 
```

并使用`node`而不是`Node`自始至终。

# java - java 多维数组因空指针异常而失败

> ID：15559254
> 
> 赞同：0
> 
> 时间：2013-03-21T22:15:18.330
> 
> 标签：java, multidimensional-array, nullpointerexception

当我尝试用进程 ID 填充二维数组时出现 nullpointerexception，它是二维的，因为每个系统都有无限的 PID 列表，我最终需要将其返回到我的主代码（现在设置为 void，因为只是一个原型测试功能）。

任何想法都会很棒

```
private void testfunctionA (List<String> additionalPC) {

    // A 2d array that will contain a list of pids for each system - needs to be strings and not integers
    String[][] pidCollection = new String[additionalPC.size()][];

    // Go through one system at a time
    for (int i=0; i < additionalPC.size(); i++) {

            // Get pids for apple per system
            String listofpids = Driver.exec("ssh " +  additionalPayloads.get(i) + " ps -ef | grep -i apple | grep -v \"grep -i apple\" | awk \\' {print $2}\\'");

            // Works ok for printing for one system
            System.out.println(listofpids);
            // put the list of pids into a string array - they are separated by rows
            String[] tempPid = listofpids.split("\n");

            // Put the string array into the 2d array - put this fails with a NPE
            for (int j=0; j < tempPid.length; j++) {
                    pidCollection[i][j] = tempPid[j];
            }

            System.out.println(pidCollection);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:18:11.163

您已经创建了 2D 数组，但该数组中充满了`null`1D 数组。二维数组中的每个元素都需要创建一个一维数组。您已经使用`tempPid`;创建了它 就用它。代替

```
for (int j=0; j < tempPid.length; j++) {
    pidCollection[i][j] = tempPid[j];
} 
```

只需使用

```
pidCollection[i] = tempPid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:18:48.813

您需要初始化 pidCollection 的每个元素：

```
String[] tempPid = listofpids.split("\n");

pidCollection[i] = new String[tempPid.length];

// Put the string array into the 2d array - put this fails with a NPE
for (int j=0; j < tempPid.length; j++) {
        pidCollection[i][j] = tempPid[j];
} 
```

或者，在这种情况下，更简单地说：

```
pidCollection[i] = listofpids.split("\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:24:27.893

简短的回答，您需要定义数组的第二个维度

```
String[][] pidCollection = new String[additionalPC.size()][?????]; //this initialises the` first axis 
```

长答案：你没有义务在那条线上做，你可以根据每个第一维度的具体情况来做，例如

```
pidCollection[i]=new String[tempPid.length] //this initialised the second axis for a particular i 
```

但是您需要在某个时候这样做，最简单的解决方案是一次定义两个维度，除非您有理由不这样做。虽然我认为这可能不适用于这种情况，但请使用个案方法

# python - 为什么我不能指定文件的打开方式？

> ID：15559257
> 
> 赞同：1
> 
> 时间：2013-03-21T22:15:43.113
> 
> 标签：python, python-3.x

考虑以下代码：

```
try:
    f = open("myfile2.dat", "rb")
except IOError:
    f = open("myfile2.dat", "ab+")
print(f.mode)
f.close() 
```

如果在我运行此代码时 myfile2.dat 不存在 Idle 会打开一个带有 rb+ 而不是 ab+ 的新文件，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T22:28:10.727

您正在以追加 + 写入模式打开一个*新*文件。因为没有要附加*到*的文件，所以您会在读 + 写模式下获得一个文件。

这*本质上*是一样的。这里没有问题，您仍然可以读取*和*写入文件。

在后台，文件仍然以附加模式打开，但该`.mode`属性提供了一个更简单的文件视图；它只会报告您*现在*可以对文件执行的操作，而不是您打开文件时发生的情况。它仅显示您是否可以读取或写入文件以及文件是否以独占创建（`x`模式）打开。

请参阅[属性的](http://hg.python.org/cpython/file/tip/Modules/_io/fileio.c#l1002)[C 代码`.mode`](http://hg.python.org/cpython/file/tip/Modules/_io/fileio.c#l1002)。

*更新*：是的，这很令人困惑，而且确实是一个错误。[修复此差异](http://bugs.python.org/issue18876)的路径最近已合并到 Python 中，当 Python 2.7、3.3 和 3.4 的新版本发布时，文件对象的`.mode`属性将更好地反映用于打开文件的原始模式字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:29:14.507

编辑：忽略这一点，这是在 Python 2.x 上完成的，我在原始问题中没有看到 #python-3.x 标记。

它为我打开了 ab+：

```
>>> try:
...     f = open("myfile2.dat", "rb")
... except IOError:
...     f = open("myfile2.dat", "ab+")
... 
>>> print(f.mode)
ab+ 
```

这是在 Mac 上运行 Jython。

# objective-c - 将项目添加到 NSMutableArray 后“重新启动”循环

> ID：15559258
> 
> 赞同：0
> 
> 时间：2013-03-21T22:15:44.827
> 
> 标签：objective-c, multithreading, nsmutablearray, grand-central-dispatch

我有以下代码来模拟我实验室的工艺流程。借此计时器将新项目添加到 NSMutablearray。如何获得 while [array count] !=0 循环来识别新添加的内容？

还是有更好的方法？

我正在使用 GCD 块来模拟并行过程。HEFTBooker 对象只需要一个样本编号，然后等待定义的时间段，然后将其自身“标记”为空闲以处理另一个样本。

```
-(void)runBookingIn:(id)sender  {
    HEFTLaboratoryUnit *__labUnit = [[HEFTLaboratoryUnit alloc]init];
    self.labUnit = __labUnit;

    NSMutableArray *sampleNumbers = [[NSMutableArray alloc]init];
    // Speed factor speeds up time for modelling i.e. 10 = 10 x normal time.
    NSInteger speedFactor = 10;    
    // Sample arrival rate into laboratory per hour
    NSInteger sampleArrivalRate = 50;

    __weak id weakSelf = self;
    self.timer = [RNTimer repeatingTimerWithTimeInterval:sampleArrivalRate/speedFactor         block:^{
        [weakSelf addNewSamplesToQueue];
    }];

    for (int i = 1; i <= 10; i++) {
        [sampleNumbers addObject:[NSNumber numberWithInteger:i]];
    }

    self.labUnit.samplesToBeBookedIn = sampleNumbers;

    NSMutableArray *bookerIns = [[NSMutableArray alloc]init];

    HEFTBookerIn *webster = [[HEFTBookerIn alloc]init];
    webster.bookingInRate = 60;
    webster.name=@"Webster";
    [bookerIns addObject:webster];

    HEFTBookerIn *duffy = [[HEFTBookerIn alloc]init];
    duffy.bookingInRate = 30;
    duffy.name=@"Duffy";
    [bookerIns addObject:duffy];

    HEFTBookerIn *marrington = [[HEFTBookerIn alloc]init];
    marrington.bookingInRate = 40;
    marrington.name=@"Marrington";
    [bookerIns addObject:marrington];

    HEFTBookerIn *chatha = [[HEFTBookerIn alloc]init];
    chatha.bookingInRate = 10;
    chatha.name=@"Kam";
    [bookerIns addObject:chatha];

    int i = 0;
    long countSamples;

    countSamples = [self.labUnit.samplesToBeBookedIn count];
    // loop sample numbers
    dispatch_queue_t queue;
    queue = dispatch_queue_create("com.HEFT.BookerQueue", DISPATCH_QUEUE_SERIAL);

    dispatch_queue_t arrivalsQueue;
    arrivalsQueue = dispatch_queue_create("com.HEFT.ArrivalsQueue", DISPATCH_QUEUE_SERIAL);

    while ([self.labUnit.samplesToBeBookedIn count] != 0 )
    {
        NSInteger sampleNo = [[self.labUnit.samplesToBeBookedIn objectAtIndex:i] integerValue];
        long count = [bookerIns count];
        int counter = 0;

        //loop over booker ins
        int j;
        for (j=0; j <count ; j++) {
            HEFTBookerIn *booker = [bookerIns objectAtIndex:counter];

            if (booker.free == YES){
                dispatch_sync(queue, ^{
                    [booker bookingIn:sampleNo :speedFactor];
                    [self.labUnit.samplesToBeBookedIn removeObjectAtIndex:i];
                });
                break;
            }
            else{
                counter ++;
            }
        }
    }
}

-(void) addNewSamplesToQueue{
    NSLog(@"More Samples Arriving");
    for (int i = 1; i <= 10; i++) {
        [self.labUnit.samplesToBeBookedIn addObject:[NSNumber numberWithInteger:i]];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:28:04.580

这似乎有效，并且通过添加锁使可变数组添加线程安全。

```
-(void)runBookingIn:(id)sender  {

    HEFTLaboratoryUnit *_labUnit = [[HEFTLaboratoryUnit alloc]init];
    self.labUnit = _labUnit;

    labUnit.booking_in_lock = [[NSLock alloc] init];

    labUnit.samplesToBeBookedIn = [[NSMutableArray alloc]init];

    // Speed factor speeds up time for modelling i.e. 10 = 10 x normal time.
    NSInteger speedFactor = 10;

    // Sample arrival rate into laboratory per hour
    NSInteger sampleArrivalRate = 50;

    __weak id weakSelf = self;

    // Add initial samples
    [self addNewSamplesToQueue:10];

    // Set timer going for further samples
    self.timer = [RNTimer repeatingTimerWithTimeInterval:sampleArrivalRate/speedFactor   block:^{
        [weakSelf addNewSamplesToQueue:10];
   }];

   // Init booker in Units
   NSMutableArray *bookerIns = [[NSMutableArray alloc]init];

   HEFTBookerIn *webster = [[HEFTBookerIn alloc]init];
   webster.bookingInRate = 60;
   webster.name=@"Webster";
   [bookerIns addObject:webster];

   HEFTBookerIn *duffy = [[HEFTBookerIn alloc]init];
   duffy.bookingInRate = 30;
   duffy.name=@"Duffy";
   [bookerIns addObject:duffy];

   HEFTBookerIn *marrington = [[HEFTBookerIn alloc]init];
   marrington.bookingInRate = 40;
   marrington.name=@"Marrington";
   [bookerIns addObject:marrington];

   HEFTBookerIn *chatha = [[HEFTBookerIn alloc]init];
   chatha.bookingInRate = 10;
   chatha.name=@"Kam";
   [bookerIns addObject:chatha];

   // create arrivals and processing loops
   dispatch_queue_t processingQueue;
   processingQueue = dispatch_queue_create("com.HEFT.BookerQueue", DISPATCH_QUEUE_SERIAL);

   dispatch_queue_t arrivalsQueue;
   arrivalsQueue = dispatch_queue_create("com.HEFT.ArrivalsQueue", DISPATCH_QUEUE_SERIAL);

  // Set timer going for further samples
  self.timer2 = [RNTimer repeatingTimerWithTimeInterval:sampleArrivalRate/speedFactor        block:^{
    [self bookingLoop:arrivalsQueue processingQ:processingQueue bookerInUnits:bookerIns    speed:speedFactor];
   }]; 
```

}

```
- (void)bookingLoop:(dispatch_queue_t)arrivalsQueue processingQ:(dispatch_queue_t)processingQueue bookerInUnits: (NSMutableArray *)bookerIns speed:(NSInteger)speed{
    int i = 0;
    long countSamples;

     countSamples = [labUnit.samplesToBeBookedIn count];

     dispatch_sync(arrivalsQueue, ^{
       while ([self.labUnit.samplesToBeBookedIn count] != 0 )
       {
            NSInteger sampleNo = [[self.labUnit.samplesToBeBookedIn objectAtIndex:i] integerValue];

        long count = [bookerIns count];
        int counter = 0;

        //loop over booker ins

        int j;

        for (j=0; j <count ; j++) {
            HEFTBookerIn *booker = [bookerIns objectAtIndex:counter];
                 if (booker.free == YES){
                    dispatch_sync(processingQueue, ^{
                        [booker bookingIn:sampleNo :speed];
                        [self.labUnit.samplesToBeBookedIn removeObjectAtIndex:i];
                    });
                    break;
               }
               else{
                   counter ++;
               }

           }
        }
    }); 
```

}

```
-(void) addNewSamplesToQueue:(NSInteger) noSamplesToAdd{

    NSLog(@"More Samples Arriving %ld", noSamplesToAdd);
    [self.labUnit.booking_in_lock lock];
    for (int i = 1; i <= 10; i++) {
       [labUnit.samplesToBeBookedIn addObject:[NSNumber numberWithInteger:i]];
    }
   [self.labUnit.booking_in_lock unlock]; 
```

}

# php - 在网页中嵌入 php 文件

> ID：15559259
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:15:44.923
> 
> 标签：php, html

我已经为客户端下载了一个 flickr 照片 php 脚本。要访问照片库，您必须单击链接以转到该页面。我想将照片库嵌入网页本身，这样您就不必单击链接。我可以通过将 index.php 中的 php 代码复制并粘贴到网页 html 中的 php 标签中来做到这一点，还是比这更复杂？

图库和所有相关文件位于代码文件夹中，如下所示。我可以像`<?php include 'codes/index.php' ?>`在portfolio.php的html中那样包含文件吗？

![在此处输入图像描述](../Images/10a56a1d8d35a7d1914dc12ca4f20933.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:20:20.027

您需要将要嵌入图库的网页更改为 php 文件（更改扩展名，以便服务器将其解析为 php 文件而不是静态 html 文件）。

然后，您可以将图库 php 代码（包括打开和关闭 php 标签）放在您已经存在的 html 代码之间。

# php - 如何将 Wordpress 页眉和页脚添加到 vBulletin 5 站点

> ID：15559261
> 
> 赞同：0
> 
> 时间：2013-03-21T22:15:58.567
> 
> 标签：php, wordpress, templates, header, vbulletin

我正在尝试找到一种方法来从我的 wordpress 博客中添加我的网站页眉和页脚，以包装我的 vBulletin 5 论坛。我在网上找到了各种教程和指南，说明如何使用插件来拉入 vBulletin 4 中的 php 文件，但似乎 vBulletin 5 中不再提供插件。

有人做过吗？

# excel - VBA 验证引发 1004 应用程序定义的错误

> ID：15559267
> 
> 赞同：1
> 
> 时间：2013-03-21T22:16:27.117
> 
> 标签：excel, vba

嗨，我有以下代码触发了数千个单元格。它为每个单元格添加一个验证列表（列表值在名称范围中定义 - 名称范围在单独的选项卡中）。

```
Sub CreateList(cell As Variant, rng As String)
     If rng <> Empty Then
          With cell.Validation
             .Delete
             .Add Type:=xlValidateList, Formula1:="=" & rng
             .ShowError = False
          End With
       End If
    End Sub 
```

我从另一个循环通过单元格的函数调用子例程。注意`totalCols`& `totalRow`s 在其他地方设置，但是是数据范围的界限：

```
 For i = 2 To totalRows
       For J = 1 To totalCols
          CreateList(Worksheets("Data").cells(i, j), GetRange(Worksheets("Data").cells(1, J).Value)
       Next
    Next 
```

GetRange() 采用标题值（存储在“数据”表的第 1 行）并返回范围名称（存储在同一工作簿的单独工作表中）：

```
Function GetRange(cell As Variant) As String    
       If cell.Value = "Column One Name" Then
          GetRange = "RangeOne"
       ElseIf cell.Value = "Column Two Name" Then
          GetRange = "RangeTwo"
       Else
          GetRange = ""
       End If
End Sub 
```

当我运行代码时，它有时会失败，并出现应用程序定义的错误 1004。这里的特殊之处在于不同数据集的不同点。数据集越大，它格式化的列就越少。对于小型数据集（即 1/2 行），它可以工作 - 因为它循环遍历所有范围并相应地添加列表。

**更多信息：**数据表未锁定。调试时，`rng`有正确的值。这在调试模式下执行“添加监视”并检查范围的范围值属性时得到确认。命名范围在工作簿范围内，但包含在单独的工作表中。

第一次运行相同的数据集时，它总是停在同一个地方。它有时会在列的一半处填充具有正确范围值的单元格，然后停止并出现错误 1004。

在第一次失败后立即运行第二次时 - 它有时会在第一个需要验证的单元格处停止并显示 1004 错误。发生这种情况时，它会在第一个需要为任何数据集添加验证的单元格中停止。就好像它在这一点上打破了工作表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:30:01.827

```
Sub ApplyValidation()

    Dim c As Range

    For Each c In Worksheets("Data").Cells(1, 1).Resize(1, totalCols).Cells
        With c.Offset(1, 0).Resize(totalRows - 1, 1).Validation
            .Delete
            .Add Type:=xlValidateList, Formula1:="=" & GetRange(c)
            .ShowError = False
        End With
    Next c

End Sub

Function GetRange(cell As Variant) As String
    If cell.Value = "Column One Name" Then
       GetRange = "RangeOne"
    ElseIf cell.Value = "Column Two Name" Then
       GetRange = "RangeTwo"
    Else
       GetRange = ""
    End If
End Function 
```

# php - facebook api fql 流，如何检查其页面帖子或用户帖子？

> ID：15559275
> 
> 赞同：0
> 
> 时间：2013-03-21T22:17:25.670
> 
> 标签：php, facebook, api, facebook-fql, facebook-php-sdk

我正在尝试检查新闻提要行是来自用户还是来自页面。我无法在任何地方或任何可以告诉我它来自用户或页面的字段中找到它。反正我能找到吗？

[http://developers.facebook.com/docs/reference/fql/stream](http://developers.facebook.com/docs/reference/fql/stream)

我正在尝试实现 Facebook 新闻提要 API。获取新闻提要中使用的所有用户名和页面名。

如果它已经保存在本地数据库中，则不要从 Facebook 获取，如果未保存，则从 Facebook API 获取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:00:16.097

您需要查询该[`profile`](https://developers.facebook.com/docs/reference/fql/profile)表以获取此信息。

```
SELECT id, type FROM profile WHERE id IN (SELECT actor_id FROM #STREAM_QUERY) 
```

该`type`字段将告诉您参与者是用户、页面、事件、组还是应用程序。

# javascript - Translate.google.com 分析

> ID：15559281
> 
> 赞同：-6
> 
> 时间：2013-03-21T22:18:03.403
> 
> 标签：javascript, php, get-request

我目前正在开发一种工具，可以通过谷歌翻译网站即时翻译单词。为了更好地理解谷歌查询，我必须分析他们的 GET 参数。

这是在 www.translate.google.com 上使用语言检测、结果语言 de 和文本“好”创建的示例

```
1\. client   t
2\. hl   de // Home language
3\. ie   UTF-8 // Encoding
4\. it   sel.124835
5\. multires 1
6\. oe   UTF-8
7\. otf  1
8\. otf  1
9\. prev conf
10\. psl en // 'Language from' before (when you change it)
11\. ptl de // 'Language to' before (when you change it)
12\. sc  1
13\. sl  auto // Language to translate from, source language
14\. ssel    3
15\. ssel    3
16\. text    good // Text to translate
17\. tl  de // Language to translate to, target language
18\. tsel    0
19\. tsel    0
20\. uptl    de 
```

问题：我没有评论的参数是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:26:53.790

不要抓取他们的网页来破解 API，他们最终会关闭你，他们不是那种东西的忠实粉丝。

这是他们的谷歌翻译 API 文档的链接。

[https://developers.google.com/translate/](https://developers.google.com/translate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:27:03.340

如果您想对某人的 GET 参数之类的东西进行逆向工程，那么这就是您的目标，那就去做吧！但更好的选择是使用他们支持和记录的[**Translate API**](https://developers.google.com/translate/)。

# android - 如何更改 Holo 主题的 EditText？

> ID：15559284
> 
> 赞同：0
> 
> 时间：2013-03-21T22:18:14.443
> 
> 标签：android, android-edittext, android-theme

有没有办法改变 Hole 主题的 edittext 样式？我不想要默认填充，也不想要下面的蓝/灰线。我只想要一个简单的 EditText，我可以把它放在一个带有提示的框中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:20:08.970

`EditText`您可以为视图使用任何您想要的纹理。只需在网上挑选一些东西并将其设置为您的`EditText`.

**例子：**

```
 <EditText
        android:id="@+id/etlsPassword"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:background="@drawable/login_scr_field"
        android:hint="@string/password"
        android:inputType="textPassword"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:textColor="@color/my_darker_gray" /> 
```

# java - 测试时崩溃

> ID：15559292
> 
> 赞同：0
> 
> 时间：2013-03-21T22:18:46.987
> 
> 标签：java, android

所以，我刚刚开始查看并在活动之间移动。我以为我得到了我想要的东西。我修复了所有错误，但现在当我测试应用程序时它崩溃了。我是android和eclipse的新手。所以我不确定发生了什么。这是我的 MainActivity.java：

```
 import android.os.Bundle;
       import android.app.Activity;
       import android.content.Intent;
       import android.util.Log;
       import android.view.Menu;
       import android.view.MenuInflater;
       import android.view.View;
       import android.widget.Button;
       import android.widget.EditText;
       import android.widget.TextView;

    public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Intent intent = getIntent();
    String info = intent.getStringExtra("info_key");
    TextView text = (TextView) findViewById(R.id.nametext);
    text.setText(info);
}

//opens a new activity.
public void openAddItem (View v){
    Intent intent = new Intent (this, Additem.class);
    startActivity(intent);
      }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

    } 
```

这是我的第二个活动；Additem.java：

```
 package com.grocerylist;

     import android.os.Bundle;
     import android.app.Activity;
     import android.content.Intent;
     import android.view.Menu;
     import android.view.View;
     import android.widget.EditText;
     import android.widget.TextView;

    public class Additem extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_additem);

}

public void additem (View v){
    EditText text = (EditText)findViewById(R.id.itemname);
    String info = text.getText().toString();
    Intent intent = new Intent(this, MainActivity.class);
    intent.putExtra("info_key", info);
    startActivity(intent);
     }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_additem, menu);
    return true;
}

    } 
```

谢谢，我很肯定问题出在我放置身份证的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:28:26.667

我看到的第一个问题就在这里

```
Intent intent = getIntent();
    String info = intent.getStringExtra("info_key");
    TextView text = (TextView) findViewById(R.id.nametext);
    text.setText(info); 
```

如果这是你的第一个，就没有`Intent`“得到” `Activity`。当您`Activity`使用 an`Intent`和 send开始时使用它`extras`。所以，自然`info`是`null`。当你从第二个创建它时会有一些东西，但当`Activity`你第一次运行你的应用程序时不会。此外，您可能希望在第一次使用[startActivityForResult](http://developer.android.com/training/basics/intents/result.html)`Activity`

其次，我看不到`openAddItem()`你第一次打电话的地方`Activity`。它可能来自一个`Button`，但我没有看到任何`Buttons`

您似乎缺少对 Android 框架基础知识的一些关键理解。如果您还没有通过它们，我建议您从[Docs Here开始。](http://developer.android.com/training/index.html)祝你好运

还有，这

```
Intent intent = new Intent (this, Additem.class); 
```

应该是这个

```
Intent intent = new Intent (MainActivity.this, Additem.class); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-21T22:34:05.640

我也看到的第一个问题已经被*codeMagic*提到过。

第二件事：如果你只是调用你的方法开始另一个`Activity`in `onCreate()`，你会在堆栈中得到一个伪无限数量的那些`Activities`，你的应用程序将崩溃。

考虑观看[这些教程](http://thenewboston.org/list.php?cat=6)，它可能会帮助您入门

# python - Python RegEx 匹配异常

> ID：15559299
> 
> 赞同：2
> 
> 时间：2013-03-21T22:19:14.327
> 
> 标签：python, regex

我正在尝试使用 Ptython 中的 RegEx 匹配来提取线性方程的 LHS 和 RHS。

```
exp="+1-3=x+2";
parts = re.search("(.*?)=(.*?)", exp);
left = parts.group(1);
right = parts.group(2); 
```

尽管`left`正确捕获了 的值，但 的值为`right`空。

有什么我做错了吗？不用说我是 Python 新手。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T22:21:53.583

通过删除问号使右侧贪心：

```
parts = re.search("(.*?)=(.*)", exp); 
```

否则匹配在`=`.

或者，用于`$`锚定到字符串的末尾。

最后，值得注意的是，您实际上并不需要正则表达式：

```
left, _, right = exp.partition('=') 
```

# php - 将日期从 javascript 通过 php 传递到 mysql

> ID：15559302
> 
> 赞同：0
> 
> 时间：2013-03-21T22:19:25.807
> 
> 标签：php

我在 JavaScript 中有一个这种形式的日期：“10.02.2010”。

我通过 url 将它与其他变量一起传递给 php。

然后我将它在 php 中转换为 php-Date，如下所示：

```
foreach ($_GET as $key => $value) {
    if ($key == "TPopMassnDatum") {
        if ($value) {
            $value = date("Y-m-d H:i:s", strtotime($value));
        } else {
            $value = null;
        }
    } 
} 
```

我也试过这个：

```
$value = date_create_from_format('d.m.Y', $value); 
```

因为还有其他几个值并且我需要插入，所以我将键内爆：

```
$Feldliste = implode(",", array_keys($_GET)); 
```

然后内爆值：

```
$Wertliste = '"'.implode('","', array_values($_GET)).'"'; 
```

然后运行此查询：

```
$Querystring = 'INSERT INTO tblTeilPopMassnahme ('.$Feldliste.') VALUES ('.$Wertliste.')'; 
```

mysql中的日期字段是日期时间。

我的问题：日期，当它们到达 mysql 时，通常是关闭的。例如：20.04.2006 而不是 20.12.2012。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:41:16.647

首先，mysql datetime 的字段格式是 YYYY-MM-DD HH:MM:SS，这可能就是它给你奇怪时间的原因。另外，如果只有一个日期，为什么要使用日期时间而不是日期？

另外，您在放入之前是否回显了 $value ？它可能会变得有趣，因为没有时间开始。在插入之前检查 $vaule 的值。

# iphone - HTML 音频播放导致 iPhone 闪烁

> ID：15559305
> 
> 赞同：0
> 
> 时间：2013-03-21T22:19:30.637
> 
> 标签：iphone, html, audio, flicker, paperjs

我正在尝试在 node.js 堆栈之上创建一个使用 Paper.js 构建的简单调谐器。

调谐器在桌面浏览器中运行良好，但在 iPhone 或 iPad 中，单击六个矩形（或字符串）之一会导致屏幕奇怪闪烁：http: [//morning-temple-9106.herokuapp.com/](http://morning-temple-9106.herokuapp.com/)

我尝试了这些与 iphone 上的一般 html 闪烁相关的 css 修复，但没有运气。

```
canvas {
    -webkit-backface-visibility: hidden;
    -webkit-transform: translate3d(0,0,0);
} 
```

这是加载音频的 JS——我在调用 playNote 之前加载文件以加快播放速度。即使我在 playNote 中加载也会发生闪烁。

```
var audioPlayerE = new Audio();
audioPlayerE.src="strings/E.mp3"
audioPlayerE.load();
var audioPlayerA = new Audio();
audioPlayerA.src="strings/A.mp3"
audioPlayerA.load();
var audioPlayerD = new Audio();
audioPlayerD.src="strings/D.mp3";
audioPlayerD.load();
var audioPlayerG = new Audio();
audioPlayerG.src="strings/G.mp3";
audioPlayerG.load();
var audioPlayerB = new Audio();
audioPlayerB.src="strings/B.mp3";
audioPlayerB.load();
var audioPlayerElittle = new Audio();
audioPlayerElittle.src="strings/Elittle.mp3";
audioPlayerElittle.load();

playNote = function(index,count) {
    var noteStr;
    if(index-count==0) {audioPlayerE.play()}
    if(index-count==1) {audioPlayerA.play()}
    if(index-count==2) {audioPlayerD.play()}
    if(index-count==3) {audioPlayerG.play()}
    if(index-count==4) {audioPlayerB.play()}
    if(index-count==5) {audioPlayerElittle.play()}
} 
```

这是我的 github 仓库： [https ://github.com/dannycochran/cs184](https://github.com/dannycochran/cs184)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:45:39.153

从：

[iPad Safari：点击链接时如何禁用快速闪烁效果](https://stackoverflow.com/questions/3516173/ipad-safari-how-to-disable-the-quick-blinking-effect-when-a-link-has-been-hit)

没有意识到这只是一个闪烁的效果，将其添加到 css 中修复了它：

```
-webkit-tap-highlight-color: rgba(0,0,0,0); 
```

# jquery - 改变jQuery宽度/高度动画的方向

> ID：15559310
> 
> 赞同：2
> 
> 时间：2013-03-21T22:20:00.357
> 
> 标签：jquery, animation

我刚刚开始学习如何使用 jQuery 制作动画，但我无法找到解决方案（如果有的话）来解决我遇到的一个小美学问题。

这是我正在使用的代码：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>

<script> 
$(document).ready(function(){
$(".cause_button").css("cursor","pointer");
$(".cause_button").on('mouseenter',function(){
  $(this).stop().animate({height:100, width:100, opacity:1.0}, "fast");
});
$(".cause_button").on('mouseleave',function(){
  $(this).stop().animate({height:75, width:75, opacity:.75}, "fast");s
});
});
</script> 
```

这是具有“.cause_button”类的图像上的一个非常简单的悬停进/出动画。动画效果很好，但宽度/高度向下和向右扩展。有什么办法可以让图像向各个方向向外扩展？

jsFiddle：http: [//jsfiddle.net/FHkw2/1/](http://jsfiddle.net/FHkw2/1/)

PS：我知道有使用过渡效果的 CSS3 替代方案，但它们实现了相同的结果，并且似乎与浏览器不太兼容，所以我试图专注于使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:29:25.870

在动画期间更改“top”和“left”属性：

```
$(".cause_button").on('mouseenter',function(){
    $(this).stop().animate({height:100, width:100, opacity:1.0, left: -13, top: -13}, "fast");
});
$(".cause_button").on('mouseleave',function(){
  $(this).stop().animate({height:75, width:75, opacity:.75, left: 0, top: 0}, "fast");
}); 
```

在这里检查：http: [//jsfiddle.net/FjNy5/2/](http://jsfiddle.net/FjNy5/2/)

我建议你使用 on() 之类的文档让它这样做：

```
$(".cause_button").on({
    'mouseenter': function(){
        $(this).stop().animate({height:100, width:100, opacity:1.0, left: -13, top: -13}, "fast");
    }, 
    'mouseleave': function(){
        $(this).stop().animate({height:75, width:75, opacity:.75, left: 0, top: 0}, "fast");
    }
}); 
```

在这里检查：http: [//jsfiddle.net/ETu3A/](http://jsfiddle.net/ETu3A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:30:17.120

试试这个：

```
$(document).ready(function(){
  $(".cause_button").css("cursor","pointer");
  $(".cause_button").css("position","relative"); // required for offset positioning
  $(".cause_button").on('mouseenter',function(){
    $(this).stop().animate({
      left: -12.5, top: -12.5,
      height:100, width:100, opacity:1.0}, "fast");
  });
  $(".cause_button").on('mouseleave',function(){
    $(this).stop().animate({
      left: 0, top: 0,
      height:75, width:75, opacity:.75}, "fast");
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:38:29.777

如果将按钮设置为`display:absolute`并将其包装在使用`display:relative`. 然后，在动画期间调整按钮元素的 css left 和 right 属性。在这种情况下，我更喜欢为元素的“起始位置”设置一些初始样式，然后将不会更改的 css 放入 css 文件中。

[这是一个 jsfiddle](http://jsfiddle.net/htasM/)来演示这个想法并帮助说明这些观点。

# odata - Breeze.js 和 odata：类似 inlineCount 但没有过滤的东西？

> ID：15559313
> 
> 赞同：0
> 
> 时间：2013-03-21T22:20:09.440
> 
> 标签：odata, breeze, hottowel

在 Breeze.js inlineCount( [http://www.breezejs.com/sites/all/apidocs/classes/EntityQuery.html#method_inlineCount](http://www.breezejs.com/sites/all/apidocs/classes/EntityQuery.html#method_inlineCount) ) 中实现了 odata inlinecount 参数 ( [http://www.odata.org/documentation/uri-约定#InlinecountSystemQueryOption](http://www.odata.org/documentation/uri-conventions#InlinecountSystemQueryOption) )

所以它显示过滤后的总计数但没有分页。

但是 Breeze 或 odata 中是否有一种“内联”方式也可以在不过滤单个微风查询的情况下获得完整计数？即在没有指定过滤的情况下将返回的所有记录的计数。我知道我可以为此做一个单独的查询，但希望有一种方法可以在一次操作中完成。

如果这是一个愚蠢的问题，请道歉；我仍在学习 odata 和 Breeze。我问的原因是我正在使用 datatables.net，它需要总计数、过滤计数和记录数，因此它可以显示类似

```
Showing 1 to 10 of 48 entries (filtered from 148 total entries) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:02:55.470

我想不出一个简单的方法来通过单个查询来做到这一点。

如果我理解您的问题，您提交的每个查询基本上需要三个计数

1.  实际返回的查询结果计数 - （通过 'results.length' 轻松获得）
2.  没有任何跳过或采取（通过查询上的“.inlinecount（）”方法获得的查询结果的计数。
3.  在没有任何过滤或跳过或采取的情况下将返回的查询结果的计数。即整个“资源”的计数。（如果没有单独的查询，这很难）。

如果这是正确的，那么我认为您坚持执行两个查询，一个是获取整个“资源”（即上面的＃3）的计数，另一个是使用＃1和＃2的“inlinecount”方法

# magento - Magento 开发者客户端限制

> ID：15559319
> 
> 赞同：2
> 
> 时间：2013-03-21T22:20:37.430
> 
> 标签：magento, client, restrictions

当我尝试使用开发者客户端限制时，我应该使用我的 LAN IP 地址还是我的公共 IP 地址？我正在远程访问该站点。我认为它是公共 IP，但我只是想确定一下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T23:11:53.943

**Developer Client Restrictions 设置*不*限制对站点的访问。**相反，该设置在几个不同的上下文中进行评估，以确定是否应显示某些与开发人员相关的行为，例如日志记录和模板路径提示。（有时会出现问题，例如 FPC 的面包屑块行为和该设置已打开）。

您将需要使用将通过`$_SERVER['REMOTE_ADDR']`（在这种情况下为您的公共 IP）提供给应用程序的地址。

# c# - XAttribute 生成虚假前缀

> ID：15559320
> 
> 赞同：2
> 
> 时间：2013-03-21T22:20:46.273
> 
> 标签：c#, linq-to-xml, prefix, xattribute

我正在尝试使用 linq to xml 生成一段 xml 数据。

```
XNamespace xsins = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");
XAttribute xsiniltrue = new XAttribute(xsins+"Exists", "true");
XElement elem = new XElement("CustomerRecord", xsiniltrue); 
```

这会在运行时为 xsins 生成前缀，它们看起来很假。

```
<Fragment>
    <CustomerRecord p5:Exists="true" xmlns:p5="w3.org/2001/XMLSchema-instance"; /> 
</Fragment> 
<Fragment> 
    <CustomerRecord p3:Exists="false" xmlns:p3="w3.org/2001/XMLSchema-instance"; /> 
</Fragment> 
```

合并为

```
<Fragment xmlns:p5="w3.org/2001/XMLSchema-instance";  >
    <CustomerRecord p5:Exists="true" /> 
    <CustomerRecord p5:Exists="false" /> 
</Fragment> 
```

还尝试使用 XMLWriter，

```
XNamespace xsins = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");

using (var writer = XmlWriter.Create(fullPath, settings))
{
    writer.WriteStartDocument(true);
    writer.WriteStartElement(string.Empty, "Company", "urn:schemas-company");
    //writer.WriteAttributeString(xsins.GetName("xsi"), "http://www.w3.org/2001/XMLSchema-instance");

    writer.WriteStartElement(string.Empty, "Add", "urn:schemas-company");
    foreach (var qx in resultXMLs)
    {
        qx.WriteTo(writer);
    }

    writer.WriteEndElement();
    writer.WriteEndElement();
    writer.WriteEndDocument();
} 
```

我终于破解了它（至少我希望），下面的部分解决了我的问题

```
using (var writer = XmlWriter.Create(fullPath, settings))
{
    writer.WriteStartDocument(true);
    writer.WriteStartElement(string.Empty, "Company", "urn:schemas-company");
    writer.WriteAttributeString("xmlns", "xsi", null, "http://www.w3.org/2001/XMLSchema-instance");
    writer.WriteStartElement(string.Empty, "Add", "urn:schemas-company");
    foreach (var qx in fragments)
    {
        qx.SetAttributeValue(XNamespace.Xmlns + "xsi", xsins.ToString());
        qx.WriteTo(writer);
    }
    writer.WriteEndElement();
    writer.WriteEndElement();
    writer.WriteEndDocument();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:30:57.987

您想要控制输出的 XML 前缀。[供参考 MSDN 站点](http://msdn.microsoft.com/en-us/library/bb387069.aspx)

基本上你只需要添加`xml:xsi`到你的根节点，然后 Linq to XML 就可以完成剩下的工作。

请注意，当您遇到非常复杂的示例时，它往往会崩溃，但它应该在这种情况下工作。

编辑：

要删除无关的属性，您可以简单地手动完成：

```
foreach(var element in root.Descendents())
{
    foreach (var attribute in element.Attributes())
    {
        if (attribute.Name.Namespace == XNamespace.Xmlns)
           attribute.Remove();
    }
} 
```

注意上面是粗略的，我手边没有 XML 项目。

编辑：

我不确定您的输入是什么，但这里有一个硬编码您的预期输出的示例：

```
var xsi = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");
var fragment =
      new XElement("Fragment",
                   new XAttribute(XNamespace.Xmlns + "p5", xsi.ToString()),
                   new XElement("CustomerRecord",
                                new XAttribute(xsi + "Exists", "true")),
                   new XElement("CustomerRecord",
                                new XAttribute(xsi + "Exists", "false"))); 
```

我对此进行了测试，它的输出与您要求的相同（我在 F# 中进行了测试，如果有语法错误，请见谅）

# grammar - 给定以下语言构造语法 {a^nb^m | n,m = 0,1,2,...,n <= 2m}

> ID：15559324
> 
> 赞同：2
> 
> 时间：2013-03-21T22:20:58.967
> 
> 标签：grammar, context-free-grammar, computation-theory, context-sensitive-grammar

我刚参加了期中考试，但无法回答这个问题。

有人可以举几个该语言的例子并为该语言构建一个语法，**或者** 至少告诉我我将如何去做？

还有如何写语法`L`：

> L = {a ^n b ^m | n,m = 0,1,2,..., n <= 2m } ?

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T19:44:09.357

## 如何为形式语言编写语法？

在阅读我的这个答案之前，您应该先阅读：[**创建上下文无关语法的技巧**](https://stackoverflow.com/questions/15126824/tips-for-creating-context-free-grammar/15130451#15130451)。

## ^({a n) b ^m |语法 n,m = 0,1,2,..., n <= 2m }

> 你是什​​么语言 L = {a ^n b ^m | n,m = 0,1,2,..., n <= 2m } 描述？

**语言描述**：语言**L**由所有字符串的集合组成，其中符号 *`a`*后跟符号*`b`*，其中符号*`b`* 的数量大于或等于's的数量的**一半。***`a`*

为了更清楚地理解：

在模式**a ^n b ^m**中，首先是符号*`a`*，然后是符号*`b`*。的总数*`a`*是`n`和的数量*`b`*是 `m`。不等式表示 和 之间的`n`关系`m`。要理解等式：

```
given:   n <= 2m   
=>       n/2 <= m       means `m` should be = or > then n/2

=>       numberOf(b) >= numberOf(a)/2    ...eq-1 
```

*所以n*和*m*的不等式说：

> numberOf( **b** ) 必须*大于或等于*numberOf ( **a** )的**一半**

 **L 中的一些示例字符串：

```
b   numberOf(a)=0 and numberOf(b)=1  this satisfy eq-1        
bb  numberOf(a)=0 and numberOf(b)=2  this satisfy eq-1 
```

因此，在语言字符串中，没有's 的任何数量*`b`*都是可能的。*`a`*(b 的任何字符串) 因为任何数字都大于零 (0/2 = 0)。

其他示例：

```
 m   n
                                 --------------  
ab     numberOf(a)=1 and numberOf(b)=1 > 1/2   
abb    numberOf(a)=1 and numberOf(b)=2 > 1/2  
abbb   numberOf(a)=1 and numberOf(b)=3 > 1/2  
aabb   numberOf(a)=2 and numberOf(b)=2 > 2/2 = 1  
aaabb  numberOf(a)=3 and numberOf(b)=2 > 3/2 = 1.5
aaaabb numberOf(a)=4 and numberOf(b)=2 = 4/2 = 2 
```

注意事项：

*   以上所有字符串都是可能的，因为*`b`*'s 的数量等于（=）**或**更多（>）数量的一半。*`a`*

***   有趣的一点是，total*`a`*也可以超过 number of *`b`*，*但不能太多*。而*`b`*'s 的数量可以比*`a`*'s 的数量多任意次数。** 

 **两个更重要的案例是：

*   仅`a`作为字符串是不可能的。

*   **注意：**空`^`字符串也是允许的，因为在 中`^`，`numberOf(a) = numberOf(b) = 0`满足等式。

[乍一看，写语法很难，但实际上并不...]

根据语言描述，我们需要以下几种规则：

**规则 1**：生成`^`空字符串。

```
 N --> ^ 
```

**规则 2**：生成任意数量的*`b`*

```
 B --> bB | b 
```

**规则 3**：生成*`a`*'s： (1) 请记住，如果不生成's
，就不能生成太多's。 (2) 因为's 多于 = 到's 的一半；您需要为每个备用生成一个 （3）仅作为字符串不可能，因此对于第一个（奇数）替代您需要添加一个 （4）而对于甚至替代您**可以**丢弃添加（*但不是强制性*的）*`a`**`b`*
*`b`**`a`**`b`**`a`*
`a`*`b`**`a`*
***`b`***

 ***所以你的整体语法：

```
 S --> ^ | A | B
   B --> bB | b

   A --> aCB | aAB | ^
   C --> aA | ^ 
```

这`S`是开始变量。

在上面的语法规则中，你可能会有混淆`A --> aCB | aAB | ^`，下面是我的解释：

```
A --> aCB | aAB | ^   
       ^_____^
       for second alternative a 

C --> aA    <== to discard `b`    

and  aAB  to keep b 
```

让我们使用这个语法规则生成一些语言中的字符串，我正在写最左派生以避免解释。

```
 ab     S --> A --> aCB --> aB --> ab                        
  abb    S --> A --> aCB --> aB --> abB --> abb
  abbb   S --> A --> aCB --> aB --> abB --> abB --> abbB --> abbb 
  aabb   S --> A --> aAB --> aaABB --> aaBB --> aabB --> aabb
  aaabb  S --> A --> aCB --> aaAB -->  aaaABB --> aaaBB --> aaabB --> aaabb
  aaaabb S --> A --> aCB --> aaAB --> aaaCBB --> aaaaABB --> aaaaBB 
                                                         --> aaaabB 
                                                         --> aaaabb 
```

*非成员*字符串的另一个：

根据语言 a ⁵ b ² =`aaaaabb`是**不可能**的。因为 2 >= 5/2 = 2.5 ==> 2 >= 2.5 不等式失败。所以我们也不能使用语法生成这个字符串。我尝试在下面显示：

在我们的语法中生成额外*`a`*的，我们必须使用 C 变量。

```
S --> A 
  --> aCB 
  --> aaAB 
  --> aa aCB B 
  --> aaa aA BB 
  --> aaaa aCB BB  
           ---              
            ^
           here with first `a` I have to put a `b` too 
```

虽然我的回答已经完成，但我认为您可以更改`A`'s 规则，例如：

```
A --> aCB | A | ^ 
```

试试看！！

**编辑：**
[正如@us2012 评论的那样：*在我看来，那`S -> ^ | ab | aaSb | Sb`将是一个更简单的描述*。我觉得这个问题对 OP 和其他也有好处。]

OP的语言：

> L = {a ^n b ^m | n,m = 0,1,2,..., n <= 2m}。

@us2012 的语法：

```
S -> ^ | ab | aaSb | Sb 
```

@us2012 的问题：

> 这个文法是否也生成语言 L？

答案是**肯定的！**

*`a`*number of 's =`n` 和 number of *`b`*= m之间的语言不等式是`n =< 2m`

我们也可以理解为：

```
 n =< 2m

 that is 

 numberOf(a) = <  twice of numberOf(b) 
```

而在语法中，即使我们添加*一**两个* 's ，*`a`*我们也会添加*一个* `b`。所以最终数量*`a`*不能超过数量的两倍*`b`*。

语法也有规则要生成。任意数量的*`b`*' 和空`^`字符串。

因此@us2012 提供的简化语法是正确的，并且也准确地生成了语言 L。

**注意：** 第一个解决方案来自推导，因为我写的是链接答案，我从语言描述开始，然后尝试编写一些基本规则，逐步我可以编写完整的语法。

而@us2012 的答案来自 aptitude，您可以通过阅读其他人的解决方案并为某些人编写自己的解决方案来获得编写语法的能力 - 就像您学习编程的方式一样。*******

# groovy - Groovy 数字字符串比较

> ID：15559326
> 
> 赞同：0
> 
> 时间：2013-03-21T22:21:08.940
> 
> 标签：groovy

我做错了什么：

```
assert  'foo'  == 'foo'  //PASS
assert  '500'  == '500'  //PASS
assert  '500'  <  '1000' //FAIL <-- Supposed to pass
assert  '500'  <= '1000' //FAIL <-- Supposed to pass
assert  '1000' >  '500'  //FAIL <-- Supposed to pass
assert  '1000' >= '500'  //FAIL <-- Supposed to pass 
```

它适用于可定制的“条件”对象：

```
class Condition {
    static def compareClosure = [
            '==' : { a, b -> a == b},
            '!=' : { a, b -> a != b},
            '<'  : { a, b -> a <  b},
            '<=' : { a, b -> a <= b},
            '>'  : { a, b -> a >  b},
            '>=' : { a, b -> a >= b}
    ]

    String comparator
    def value

    Condition(String comparator, String value) {
        this.value = value
        this.comparator = comparator
    }

    boolean isSatisfiedBy(def value) {
        compareClosure[comparator](value, this.value)
    }
} 
```

所以

```
assert new Condition('<=', '1000').isSatisfiedBy('500') //FAIL 
```

有没有办法在不将值转换为数字类型的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:36:32.910

您的问题的简短回答是否定的。

但是，我觉得这是为了排序。如果是这样的话。这是我为此目的使用的排序功能。

实际示例：[Groovy Web 控制台](http://groovyconsole.appspot.com/script/917001)

```
 Closure customSort = { String a, String b ->
      def c = a.isBigDecimal() ? new BigDecimal(a) : a
      def d = b.isBigDecimal() ? new BigDecimal(b) : b

      if (c.class == d.class) {
        return c <=> d
      } else if (c instanceof BigDecimal) {
        return -1
      } else {
        return 1
      }

    }

['foo','500','1000', '999', 'abc'].sort(customSort) 
```

# c# - 由于某种原因，任务按顺序运行

> ID：15559339
> 
> 赞同：1
> 
> 时间：2013-03-21T22:22:13.927
> 
> 标签：c#, parallel-processing

案例 1：我有一个控制台测试应用程序和库。测试应用程序对那些打算并行运行的库中的类调用异步方法。示例代码

```
 for (int i = 0; i < 100; i++)
        {
            var myTask = RetrieveRecordSet<TestClass3>();
        } 
```

这在控制台应用程序中按预期工作，这意味着所有 100 个任务同时排队，并且这些任务在后台并行执行，其控制台输出证明了这一点。

案例 2：相同的代码，只是在 WPF 应用程序而不是控制台应用程序中。现在由于某种原因，任务按顺序运行。

案例 3：我还尝试了对 WPF 应用程序进行以下修改，但无济于事：

```
 for (int i = 0; i < 100; i++)
        {
            var myTask = Task.Factory.StartNew(() => RetrieveRecordSet<TestClass3>());
        } 
```

案例 4：然后我尝试了以下操作，但它阻止了 UI 并且仍然是连续的

```
 Parallel.For(0, 100, a => RetrieveRecordSet<TestClass3>()); 
```

有没有办法在 WPF 应用程序中获得与案例 1 相同的非阻塞并行行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:33:59.000

尝试以下操作：

```
Await Task.Run(() => 
{
    Parallel.For(0,100, ()=> RetrieveRecordSet<>());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:57:21.667

Parallel.For 确实是一个阻塞操作。如果您希望 Parallel.For 循环在与 UI 不同的线程上运行：

```
new Thread(() => Parallel.For(0, 100, index => RetrieveRecordSet<TestClass3>())).Start(); 
```

或者

```
new Task(() => Parallel.For(0, 100, index => RetrieveRecordSet<TestClass3>())).Start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:46:44.367

感谢各位的解答。最后，答案更加邪恶，我仍然不确定问题是什么，但我找到了解决方法。底层代码正在进行 WCF 服务调用。第一次使用通道时，使用任务并行库进行一堆并行 WCF 调用，将序列化这些调用。我偶然发现，如果你先用一个调用“启动”通道，等待响应，然后用一堆并行的 WCF 调用猛击它，你就会得到完全的并行性。是否有一种不那么老套的方式来启动 WCF 通道？这是 WCF 或 TPL 中的错误吗？

# xcode - 如何重新定义 xcode 和 Git

> ID：15559343
> 
> 赞同：1
> 
> 时间：2013-03-21T22:22:21.213
> 
> 标签：xcode, git

我在使用 xcode 时出现电源故障。我使用 Git 和 Time Machine。当我的机器重新启动并重新启动 xcode 时，我的大部分项目文件都标有“？”状态。有些被错误地标记为“M”。我尝试进行提交，但收到一个错误，其中包含我的项目文件列表，这些文件应该没有被 Git 跟踪（列表不正确）并且提交失败。

在阅读了一些关于 SO 的条目后，我退出了 xcode 并尝试了

```
git stash
git reset --hard cf530af
git stash pop 
```

这给我留下了正确的修改和删除文件的简短列表。但是当我重新启动 xcode 时，文件统计图标没有改变。

接下来我退出了 xcode 并恢复了昨晚的 Time Machine 备份。这很顺利，但是当我重新启动 xcode 时，文件状态图标仍然不正确。

目前，`git status`显示我认为正确的结果。`git fsck`显示了一些悬空 blob 和 1 个悬空提交。

我需要做什么来重新同步 xcode 和 Git，这样我才能重新开始工作？

# ms-access - VBA - 重新排序 Access 2010 导航表单选项卡索引

> ID：15559344
> 
> 赞同：1
> 
> 时间：2013-03-21T22:22:21.730
> 
> 标签：ms-access, navigation, vba

有没有办法对 Access 2010 导航表单上的导航按钮进行动态重新排序？

我想根据用户类型隐藏某些按钮；但是，如果无法修改订单，则简单地隐藏它们会在按钮之间留下空隙。

我尝试过类似以下的方法，但没有运气。

```
Me.NavigationButton1.TabIndex = 1  
Me.NavigationButton2.TabIndex = 0

Me.Requery 
Me.Refresh 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:10:24.133

NavigationButtons 的工作方式有点不同。它们在一个`NavigationControl`容器中进行管理，如果隐藏了底层按钮，该容器不会自动调整大小。

但是，你可以试试这个，它对我有用：

```
' Always remember the normal size of the button '
Static bt1Witdh as Long
if bt1Width = 0 then bt1Width = Me.NavigationButton1.Width

' Now hide the button '
Me.NavigationButton1.Width = 0
Me.NavigationButton1.Visible = False  

' Unhide the button '
Me.NavigationButton1.Visible = true  
Me.NavigationButton1.Width = bt1Width 
```

`Tag`您可以通过使用控件的属性作为临时存储来跟踪它们的正常宽度，从而使其更加通用和有点“hacky” ：

```
Public Sub HideNavigationButton(bt As NavigationButton)
    ' Store the width if we haven't already done so '
    If bt.Tag = vbNullString Then bt.Tag = CStr(bt.Width)

    bt.Width = 0
    bt.Visible = False
End Sub

Public Sub ShowNavigationButton(bt As NavigationButton)
    If bt.Visible Or bt.Width > 0 Then Exit Sub

    bt.Visible = True
    bt.Width = CInt(bt.Tag)
End Sub 
```

要使用它：

```
' Hide '
HideNavigationButton Me.NavigationButton1

' Show '
ShowNavigationButton Me.NavigationButton1 
```

# google-app-engine - GWT - 无法找到 /path/to/war/WEB-INF/lib/shared？

> ID：15559345
> 
> 赞同：1
> 
> 时间：2013-03-21T22:22:21.973
> 
> 标签：google-app-engine, gwt, eclipse-plugin

我正在尝试使用 Google Plugin for eclipse 将 GWT/GAE 项目作为 Web 应用程序运行，但我一直遇到错误：

```
Unable to find path/to/war/WEB-INF/lib/shared 
```

更具体地说，我得到：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at com.google.appengine.tools.util.Logging.initializeLogging(Logging.java:35)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:77)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Caused by: java.lang.IllegalArgumentException: Unable to find path/to/war/WEB-INF/lib/shared
    at com.google.appengine.tools.info.SdkInfo._getLibs(SdkInfo.java:76)
    at com.google.appengine.tools.info.SdkInfo.getLibsRecursive(SdkInfo.java:69)
    at com.google.appengine.tools.info.SdkInfo.determineSharedLibFiles(SdkInfo.java:302)
    at com.google.appengine.tools.info.SdkInfo.init(SdkInfo.java:237)
    at com.google.appengine.tools.info.SdkInfo.getSdkRoot(SdkInfo.java:190)
    at com.google.appengine.tools.info.SdkImplInfo.<clinit>(SdkImplInfo.java:19) 
```

我之前有这个应用程序运行良好，但我已经有一段时间没有使用它了。GWT 代码编译良好。仅在尝试在开发服务器中运行代码时才会出现此错误。回顾我以前的提交，我似乎没有看到 WEB-INF/lib/shared 曾经存在过，所以要么这是一些新要求，要么 shared 过去从未提交过。

[我在网上找到的唯一“解决方案”](https://code.google.com/p/googleappengine/issues/detail?id=8616)声称他们通过删除 appengine-utils-client-1.0.jar 和 appengine-utils-server-1.0.jar 来修复它。但是，这些似乎都不在我的项目中，所以我认为这个解决方案对我没有帮助。

有什么建议么？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T22:12:24.177

在升级到 GAE 1.8.0 后，我也遇到了这个问题。从 WEB-INF/lib 目录中删除 appengine-tools-api.jar 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:23:14.183

对于遇到同样问题的任何人，我刚刚创建了一个新的 GWT 设置并复制了我的 src 文件和我专门创建/修改的 WEB-INF 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-01T13:23:00.337

我在使用 GWTUpload 时遇到了同样的错误。之前的帖子帮助我走上了正轨，尽管我的 web-inf/lib 中没有提到的 jar。最后通过为 appengine-tools-sdk 添加一个 Maven 排除来解决它。所以我最后的 GWTUpload pom.xml Maven 代码是：

```
 <!-- GWTUpload  -->
    <dependency>
        <groupId>com.googlecode.gwtupload</groupId>
        <artifactId>gwtupload</artifactId>
        <version>0.6.6</version>
    </dependency>
    <dependency>
        <groupId>com.googlecode.gwtupload</groupId>
        <artifactId>gwtupload-gae</artifactId>
        <version>0.6.6</version>
        <exclusions>
            <!-- This exclusion got rid of the super hard to track down IllegalArgumentException on startup related to SdkInfo  -->
            <exclusion>
                <artifactId>appengine-tools-sdk</artifactId>
                <groupId>com.google.appengine</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.3</version>
    </dependency>
</dependencies> 
```

# java - 使用日历类增加日期

> ID：15559346
> 
> 赞同：-2
> 
> 时间：2013-03-21T22:22:29.247
> 
> 标签：java

我必须添加一个日期 20 天。日在增加，但因此月没有增加。如何同时更改日期和月份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:35:02.863

也许是这样的：

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.GregorianCalendar;
public class So15559346 {
    public static void main(String[] args) {
        Calendar c=new GregorianCalendar();
        SimpleDateFormat df=new SimpleDateFormat();
        df.applyPattern("dd/MM/yyyy");
        System.out.println(df.format(c.getTime()));
        c.add(Calendar.DAY_OF_YEAR,20);
        System.out.println(df.format(c.getTime()));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:27:55.697

您可以使用`Calendar.add( Calendar.DAY_OF_YEAR, number-of-days )`

这样的事情应该做：

```
SimpleDateFormat dateFormat = new SimpleDateFormat( "yyyy-MM-dd" );
Calendar cal = Calendar.getInstance();
cal.setTime( dateFormat.parse( inputDate) );
cal.add( Calendar.DAY_OF_YEAR, 20 ); 
```

但我建议您使用[joda-time](http://joda-time.sourceforge.net/)库来处理 Java 中与日期/日历相关的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:33:37.873

这可以这样做：

```
 long currentTime = System.currentTimeMillis();
    //If you already have a date object then use the next line
    // currentTime = dateObj.getTime(); 
    long twentyDays = 20*24*60*60*1000;

    Date d = new Date(currentTime + twentyDays); //20+ days from today

    System.out.println(d.toString()); 
```

# mysql - MySQL - 更新子记录以指向单个父记录后删除重复项

> ID：15559350
> 
> 赞同：0
> 
> 时间：2013-03-21T22:22:57.727
> 
> 标签：mysql

我有一个包含多个重复行的父表“策略”，因为有 2 个字段共同构成一个重复项（即 policy_number 和 provider_id）。

我还有一个子表'branch_policy'，其中包含重复父行的子记录（还有另一个'policy'子表，但我希望我也可以将相同的解决方案应用于第二个子表）。

在我删除重复的父行之前，我想将重复父记录的子记录重新设置为指向一个父记录，以便安全地删除重复的父记录。

例如：

政策表：

```
id  policy_number  provider_id  originating_branch
--------------------------------------------------
1   123            1            1
2   123            1            2 
```

分支策略表：

```
id  policy_id
--------------
1   1
2   2 
```

我希望将 branch_policy 的第二条记录设置为 policy_id = 1，然后删除 id 为 2 的策略记录，以便以

政策表：

```
id  policy_number  provider_id  originating_branch
--------------------------------------------------
1   123            1            1 
```

分支策略表：

```
id  policy_id
--------------
1   1
2   1 
```

请注意，选择哪个重复的父记录作为“幸存者”并不重要。

我希望这很清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:37:13.860

[SQL小提琴](http://sqlfiddle.com/#!2/dfab9/3)

**MySQL 5.5.30 架构设置**：

```
create table policy (
  id int not null, 
  policy_number varchar(100) not null,
  provider_id int not null, 
  originating_branch int not null
);

create table branch_policy(id int, policy_id int);

insert policy (id, policy_number, provider_id, originating_branch) 
  values 
    (1, '123', 1, 1),
    (2, '123', 1, 2),
    (3, '1234', 3, 3),
    (4, '1234', 3, 4)
;

insert branch_policy(id, policy_id) values 
  (1, 1), (2, 2), (3, 2),
  (4, 3), (5, 3), (6, 4)
;

update branch_policy bp
  join (select  
          po.id as old_id,
          pn.new_id
        from policy po
          join (
            select
              policy_number,
              provider_id,
              min(id) as new_id
            from policy
            group by policy_number, provider_id) as pn
          on po.policy_number = pn.policy_number
            and po.provider_id = pn.provider_id) as p
  on bp.policy_id = p.old_id
set bp.policy_id = p.new_id
;

delete po
from policy po
  join (
    select
      policy_number,
      provider_id,
      min(id) as new_id
    from policy
    group by policy_number, provider_id) as pn
  on po.policy_number = pn.policy_number
    and po.provider_id = pn.provider_id
where po.id <> pn.new_id 
```

**查询 1**：

```
select * from policy 
```

**[结果](http://sqlfiddle.com/#!2/dfab9/3/0)**：

```
| ID | POLICY_NUMBER | PROVIDER_ID | ORIGINATING_BRANCH |
---------------------------------------------------------
|  1 |           123 |           1 |                  1 |
|  3 |          1234 |           3 |                  3 | 
```

**查询 2**：

```
select * from branch_policy 
```

**结果 2**：

```
| ID | POLICY_ID |
------------------
|  1 |         1 |
|  2 |         1 |
|  3 |         1 |
|  4 |         3 |
|  5 |         3 |
|  6 |         3 | 
```

# vim - 搜索突出显示（hlsearch）在 vim 中不起作用

> ID：15559351
> 
> 赞同：13
> 
> 时间：2013-03-21T22:22:58.077
> 
> 标签：vim

我在 vim 中的搜索突出显示有问题。我以前使用过它，但目前它根本不起作用。

*   我已经输入了`:set hlsearch`，它也在我的 .vimrc 文件中。
*   我进入`:set hlsearch?`了，结果是`hlsearch`，说明我已经成功开启了该选项。（对？）
*   我正在运行 vim 而不是 vi，所以这不是问题。
*   我四处搜索，但只发现有人询问关闭搜索突出显示。

我将不胜感激任何输入，因为这让我发疯了。谢谢！

编辑：突出显示也不适用于拼写检查，因此显然它是关于突出显示的全局性的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T07:48:31.743

当您遇到多个突出显示的问题时（例如您的情况下的搜索和拼写），首先检查定义的突出显示

```
:hi 
```

如果有任何组错误或关闭，请检查您的`:colorscheme`，然后尝试另一个。

在控制台中，颜色问题通常与可用颜色的数量有关，这是一个棘手的问题。检查与

```
:set t_Co? 
```

另一个检查单个语法项问题的好工具是[SyntaxAttr.vim - 显示光标下字符的语法突出显示属性](http://www.vim.org/scripts/script.php?script_id=383)插件。

# java - 使用 Java 控制 Azure 容器级访问策略

> ID：15559353
> 
> 赞同：0
> 
> 时间：2013-03-21T22:23:05.250
> 
> 标签：java, eclipse, azure

我正在尝试设计一个在本地服务器上运行的 Java 应用程序，该应用程序管理对存储在 Windows Azure 中的 blob 的访问权限。云存储资源由多个移动应用程序（也用 Java 编写）使用，这些应用程序需要对托管在云中的单个 blob 容器进行读取访问，有时还需要临时写入访问权限。我正在使用[Microsoft Open Technologies 的 Windows Azure Plugin for Eclipse with Java](http://msdn.microsoft.com/en-us/library/windowsazure/hh694271.aspx)。

我的问题是：如何（或是否）可以使 Azure 中的容器级[存储访问策略](http://msdn.microsoft.com/en-us/library/windowsazure/ee393341.aspx) 在到期时恢复为较早的存储策略 (READ)，而不是“无访问”。“

MSDN 文章：[Creating a Shared Access Signature in Java](http://msdn.microsoft.com/en-us/library/windowsazure/hh875756.aspx)提供了一个良好的开端，但它还没有说明如何使用容器级存储策略来管理 Java 的共享访问策略。我正在学习 Java 和 SAS，因为我找不到类似于[Azure Blob 的访问控制的](http://convective.wordpress.com/2010/01/20/access-control-for-azure-blobs/)Java 代码示例，所以我在下面包含了一小段 Java 代码来演示我的问题。

服务器应用程序检索用于连接到 Azure 存储的专用存储连接字符串。获取云存储帐户并创建云 blob 客户端。获取对容器的引用并在容器不存在时创建它。（请注意，容器名称必须小写。）然后它会下载容器的当前权限。（一个容器最多可以保存五个容器级存储访问策略。）

例如，假设有两个存储访问策略，名为“baxter”和“heath”，控制容器级别的权限，并且当容器的存储访问策略之前保存时，这两个策略都设置为 READ（仅） . 这些具有读取权限的初始策略将在几个月后到期。分配给“heath”或“baxter”策略的移动应用程序然后开始通过类似于以下的 uri 字符串对存储在 sascontainer6 中的 blob 进行读取访问：

```
http://grassy.blob.core.windows.net/sascontainer6/image4.jpg?sr=c&sv=2012-02-12&sig=5G7EOgiYYNEGmw2Y0T4IUgt%2FzTnmYpaxWfB5nEira08%3D&si=baxter

http://grassy.blob.core.windows.net/sascontainer6/image4.jpg?sr=c&sv=2012-02- 12&sig=llUoAg2PvFUfhO28ncrlheh2RRJdb7smQEX6nO8xoCk%3D&si=heath 
```

根据需要，服务器应用程序可以将移动应用程序的子集提升为 READ 和 WRITE 权限，而无需发出新字符串。它可以通过修改与容器一起保存的“baxter”策略来实现。控件的“粒度”处于策略级别，策略更新使分配给“baxter”策略的所有移动应用程序都可以写入（或覆盖）容器中的 blob。分配给“健康”策略的移动应用程序继续拥有读取（仅）权限。以类似的方式，服务器应用程序可以撤销分配给特定策略的应用程序对容器的所有访问权限。

在更改策略之前，服务器应用程序确保已关闭对容器的公共访问。它将当前时间指定为开始时间，并将访问的到期时间指定为开始时间后一小时。它为新策略设置 READ 和 WRITE 权限。最后，现有的“baxter”策略被新策略覆盖。

generateSharedAccessSignature 方法可以获取“baxter”和“heath”策略的共享访问签名 (SAS)。更改保存在策略中的权限不应该改变 SAS，并且使用上述 uri 字符串的应用程序应该在指定的到期时间之前工作。

但是，一旦达到过期时间，“baxter”字符串将失去对容器的所有权限，包括 READ 和 WRITE。但这不是我想要发生的。我需要分配给“baxter”策略的移动应用程序的权限才能恢复为 READ（仅限）。因为具有 WRITE 访问权限的 SAS 字符串允许任何人写入资源，最佳实践是保持开始时间和过期时间尽量短，不超过一个小时。对于我的特定应用程序，将权限设置为更长的时间是可以接受的。

我的问题是：如何（或是否）可以使用 Azure 中的容器级共享访问策略来允许令牌（即上面显示的“baxter”字符串）恢复为备用策略（即 READ）而不是“无访问权限” 。”</p>

```
public static void main(String[] args) throws InvalidKeyException, URISyntaxException, StorageException 
    {           
    Account creds = new Account();              
    final String storageConnectionString = creds.getstorageconnectionstring();
    CloudStorageAccount storageAccount = CloudStorageAccount.parse(storageConnectionString);
    CloudBlobClient blobClient = storageAccount.createCloudBlobClient();
    CloudBlobContainer container = blobClient.getContainerReference("sascontainer6");
    container.createIfNotExist();
    BlobContainerPermissions containerPermissions = container.downloadPermissions();
    containerPermissions.setPublicAccess(BlobContainerPublicAccessType.OFF);
    SharedAccessBlobPolicy policy = new SharedAccessBlobPolicy();
    GregorianCalendar calendar = new GregorianCalendar(TimeZone.getTimeZone("UTC"));
    calendar.setTime(new Date());
    policy.setSharedAccessStartTime(calendar.getTime());
    calendar.add(Calendar.HOUR, 1);
    policy.setSharedAccessExpiryTime(calendar.getTime());
    policy.setPermissions(EnumSet.of(SharedAccessBlobPermissions.READ, SharedAccessBlobPermissions.WRITE));
    containerPermissions.getSharedAccessPolicies().put("baxter", policy);            
    container.uploadPermissions(containerPermissions);
    String sas = container.generateSharedAccessSignature(new SharedAccessBlobPolicy(),"baxter");         
    String sasex = container.generateSharedAccessSignature(new SharedAccessBlobPolicy(),"heath");         
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:59:39.153

您对 SAS 的容器级访问策略有很好的理解。所有解释都导致了一个非常具体的问题：

> 我的问题是：如何（或是否）可以使用 Azure 中的容器级共享访问策略来允许令牌（即上面显示的“baxter”字符串）恢复为备用策略（即 READ）而不是“无访问权限” 。”</p>

不幸的是，哪个答案是**NO**。您无法定义`fallback`容器级别策略过期时发生的情况。一旦它到期，它就结束了，完成了。与其关联的任何 SAS 都不能对关联的资源执行任何操作。您必须从您的服务器端代码中用新的权限和新的到期日期再次显式覆盖它。

但我想挑战一下你的概念架构。你有一个声明：

> 根据需要，服务器应用程序可以将移动应用程序的子集提升为 READ 和 WRITE 权限，而无需发出新字符串。

即使您`server`这样做了，移动客户端如何理解现在他们也可以`write`，而不仅仅是`read`从那个云存储？我真的怀疑你的移动客户端总是试图默默地写，如果他们不能的话。

`server-to-mobile-client`我的猜测是，在移动客户端意识到它可以写入云存储之前，存在某种通信。如果没有这样的沟通，那么恕我直言，有些事情已经严重破坏了。

但是，如果存在这样的通信，那么没有什么可以阻止您提供具有`RW`权限（读取和写入）的新的更短寿命的 SAS。这个新的更短寿命的 SAS 甚至可以是`stand alone`SAS，这意味着它不与任何存储的访问策略相关联，并且是专门为写入 blob 而发布的。

我的另一个猜测是，您希望避免通过网络发送 SAS 以避免`man-in-the-middle`类型攻击。而是希望在应用程序中预先配置 SAS。如果是这种情况，我可以建议为读取和写入设置单独的访问策略。您可以安全地拥有`expired`用于写作的访问策略，并使其仅在需要时有效。您的设备现在将有 4 个 SAS URI 而不是 2 个，但它（设备）将准确地知道哪个策略是只读的，并且使用哪个策略可以尝试写入。请注意，即使过期，写入访问策略仍然与容器相关联，它不会被删除。因此，您只需在下次希望它处于活动状态时对其进行更新。

# c++ - 用mingw编译mysql连接器C++，编译报错

> ID：15559355
> 
> 赞同：0
> 
> 时间：2013-03-21T22:23:15.240
> 
> 标签：c++, cmake, mysql-connector, mingw32

我在用 mingw 编译 mysql 连接器 C++ 时遇到问题，正如官方网站上所发布的，你应该运行 cmake 来配置源代码，然后运行 ​​mingw32-make ... cmake 需要安装 boost 库，所以我得到它并编译它（它说许多更新，40个目标被跳过并且未能更新24个）。

之后尝试在 mysql 连接器源上运行 cmake，它没有输出任何错误并且工作正常，当尝试执行最后一步 mingw32-make 时，它​​给出了很多错误，其中许多是重新定义......日志如下。请帮助我，我真的需要它。

```
 C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\bin>mingw32-make
    [  0%] Building CXX object driver/CMakeFiles/mysqlcppconn.dir/mysql_art_resultset.cpp.obj
    C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:1:0: warning: -fPIC
     ignored for target (all code is position independent) [enabled by default]
    In file included from C:/MySQL/MySQL_Server_5.6/include/my_global.h:72:0,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\nativeapi/mysql_private_iface.h:57,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_util.h:30,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:31:
    C:/MySQL/MySQL_Server_5.6/include/my_config.h:509:0: warning: "isnan" redefined [enabled by default]

    In file included from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:28:0:
    c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/../../../../i686-w64-mingw32/include/math.h:480:0: note: this is the location of the previous definition
    In file included from C:/MySQL/MySQL_Server_5.6/include/my_global.h:72:0,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\nativeapi/mysql_private_iface.h:57,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_util.h:30,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:31:
    C:/MySQL/MySQL_Server_5.6/include/my_config.h:517:0: warning: "strtok_r" redefined [enabled by default]
    In file included from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/i686-w64-mingw32/bits/gthr-default.h:41:0,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/i686-w64-mingw32/bits/gthr.h:150,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/ext/atomicity.h:34,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/ios_base.h:41,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/ios:43,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/istream:40,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/sstream:39,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:27:
    c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/../../../../i686-w64-mingw32/include/pthread.h:460:0: note: this is the location of the previous definition
    In file included from C:/MySQL/MySQL_Server_5.6/include/my_global.h:72:0,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\nativeapi/mysql_private_iface.h:57,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_util.h:30,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:31:
    C:/MySQL/MySQL_Server_5.6/include/my_config.h:527:0: warning: "NOMINMAX" redefined [enabled by default]
    In file included from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/i686-w64-mingw32/bits/c++config.h:414:0,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/iosfwd:40,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/ios:39,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/istream:40,
                     from c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/sstream:39,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:27:
    c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/i686-w64-mingw32/bits/os_defines.h:46:0: note: this is the location of the previous definition
    In file included from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_util.h:30:0,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:31:
    C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\nativeapi/mysql_private_iface.h:81:0: warning: ignoring #pragma warning  [-Wunknown-pragmas]
    In file included from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.c
    pp:36:0:
    C:/Users/Hugo/Downloads/mysql-connector-c++-1.1.2/cppconn/exception.h:48:0: warning: ignoring #pragma warning  [-Wunknown-pragmas]
    C:/Users/Hugo/Downloads/mysql-connector-c++-1.1.2/cppconn/exception.h:52:0: warning: ignoring #pragma warning  [-Wunknown-pragmas]
    C:/Users/Hugo/Downloads/mysql-connector-c++-1.1.2/cppconn/exception.h:53:0: warning: ignoring #pragma warning  [-Wunknown-pragmas]
    C:/Users/Hugo/Downloads/mysql-connector-c++-1.1.2/cppconn/exception.h:58:0: warning: ignoring #pragma warning  [-Wunknown-pragmas]
    C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:162:1: error: invalid suffix "ui64" on integer constant
    C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:162:1: error: invalid suffix "ui64" on integer constant
    In file included from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\nativeapi/mysql_private_iface.h:57:0,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_util.h:30,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:31:
    C:/MySQL/MySQL_Server_5.6/include/my_global.h: In function 'double rint(double)':
    C:/MySQL/MySQL_Server_5.6/include/my_global.h:1160:35: error: 'double rint(double)' was declared 'extern' and later 'static' [-fpermissive]
    In file included from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:28:0:
    c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/../../../../i686-w64-mingw32/include/math.h:783:23: error: previous declaration of 'double rint(double)' [-fpermissive]
    In file included from D:/boost_1_53_0/boost/assert.hpp:81:0,
                     from D:/boost_1_53_0/boost/smart_ptr/shared_ptr.hpp:29,
                     from D:/boost_1_53_0/boost/shared_ptr.hpp:17,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_util.h:33,
                     from C:\Users\Hugo\Downloads\mysql-connector-c++-1.1.2\driver\mysql_art_resultset.cpp:31:
    c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/cstdlib: At global scope:
    c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/cstdlib:196:11: error: '::strtoll' has not been declared
    c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/cstdlib:197:11: error: '::strtoull' has not been declared
    c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/cstdlib:219:22: error: '__gnu_cxx::strtoll' has not been declared
    c:\qt\qt5.0.1\tools\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/cstdlib:220:22: error: '__gnu_cxx::strtoull' has not been declared
    driver\CMakeFiles\mysqlcppconn.dir\build.make:57: recipe for target 'driver/CMakeFiles/mysqlcppconn.dir/mysql_art_resultset.cpp.obj' failed
    mingw32-make[2]: *** [driver/CMakeFiles/mysqlcppconn.dir/mysql_art_resultset.cpp.obj] Error 1
    CMakeFiles\Makefile2:94: recipe for target 'driver/CMakeFiles/mysqlcppconn.dir/all' failed
    mingw32-make[1]: *** [driver/CMakeFiles/mysqlcppconn.dir/all] Error 2
    makefile:135: recipe for target 'all' failed
    mingw32-make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T23:10:56.793

不幸的是，mysql连接器c ++源代码是垃圾。

它重新定义了标准库中定义的函数，然后包含标准库，或者依赖于未包含在每个实现中的非标准函数。

由于标准库不检查其函数和结构是否已经定义，因此您最终会遇到多个定义错误。

此外，由于尚未为 mingw 移植 mysql 连接器，因此问题变得更糟。要在 Windows 上编译，您需要使用 Visual Studio。

它变得更好了。它们仅支持 Visual Studio 8 和 9。

如果您完全按照这些说明进行操作， [http://dev.mysql.com/doc/connector-cpp/en/connector-cpp-installation-source-windows.html](http://dev.mysql.com/doc/connector-cpp/en/connector-cpp-installation-source-windows.html) 那么您也许可以让它工作，但您必须不偏离任何版本号。使用旧版本的 cmake，旧版本的 Visual Studio。他们没有测试过，也不关心与任何现代版本的构建工具的兼容性。

# java - 在防止输入错误时使用异常

> ID：15559356
> 
> 赞同：0
> 
> 时间：2013-03-21T22:23:16.610
> 
> 标签：java

嗨，我试图创建一个让用户输入日期的代码。然后，我将操纵这个日期来计算每天的旅行费用。我正在努力添加异常以防止输入错误。谁能给我一些关于如何做到这一点的提示？我的代码：

```
import java.util.Calendar;
import java.util.Date;
import java.util.Scanner;

public class Price
{
  public static void main (String [] args)
  {
    userInput();         
  }

  public static void userInput()
  {
    Scanner scan = new Scanner(System.in);

    int month, day, year;

    System.out.println("Please enter a month MM: ");
    month = scan.nextInt();
    System.out.println("Please enter a day DD: ");
    day = scan.nextInt();
    System.out.println("Please enter a year YYYY: ");
    year = scan.nextInt();
    System.out.println("You chose: " + month + " /" + day +  " /" + year);  
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:30:09.900

隐藏方法中的异常处理...

```
public static int inputInteger(Scanner in, String msg, int min, int max) {
  int tries = 0;
  while (tries < maxTries) {
    System.out.println(msg);
    try {
      int result = in.nextInt();
      if (result < min || result > max) {
        System.err.println("Input out of range:" + result);
        continue;
      }
      return result;
    } catch (Exception ex) {
      System.err.println("Problem getting input: "+ ex.getMessage());
    }
  }
  throw new Error("Max Retries reached, giving up");
} 
```

这有点简单，但对于简单的应用程序来说是一个好的开始。相同类型的循环可以让您验证输入（例如，不要将 35 作为日期）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:36:10.337

我将只放置第一个循环，它要求月份，其他的步骤相同，想法相同，请参见：

```
int month, day, year;
while(true){
    try{
System.out.println("Please enter a month MM: ");
month=scan.nextInt();
if(month>0&&month<=12)
    break;
else System.err.println("Month should be between 1 and 12");
}catch(InputMismatchException ex){
   System.err.println(ex.getMessage());
     }
}
System.out.println("You chose: " + month ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:34:29.637

可能你应该`IllegalArgumentException` 这样使用：

```
if (month < 1 || month > 12 || day < 1 || day > 31)
    throw new IllegalArgumentException("Wrong date input"); 
```

或`Exception`基类：

```
if (month < 1 || month > 12 || day < 1 || day > 31)
    throw new Exception("Wrong date input"); 
```

此外，您可以创建自己的子类`Exception`：

```
class WrongDateException extends Exception
{
   //You can store as much exception info as you need
} 
```

然后抓住它

```
try {
    if (!everythingIsOk)
        throw new WrongDateException();
}
catch (WrongDateException e) { 
    ... 
} 
```

# shell - 使用 sed 在匹配后插入行

> ID：15559359
> 
> 赞同：289
> 
> 时间：2013-03-21T22:23:35.150
> 
> 标签：shell, sed

出于某种原因，我似乎无法找到一个直接的答案，而且我现在有点时间紧张。我将如何使用该`sed`命令在与特定字符串匹配的第一行之后插入选择的文本行。我有 ...

```
CLIENTSCRIPT="foo"
CLIENTFILE="bar" 
```

我想在该行之后插入一行，`CLIENTSCRIPT=`导致...

```
CLIENTSCRIPT="foo"
CLIENTSCRIPT2="hello"
CLIENTFILE="bar" 
```

* * *

## 回答 #1

> 赞同：426
> 
> 时间：2013-03-21T22:27:07.867

尝试使用 GNU sed 执行此操作：

```
sed '/CLIENTSCRIPT="foo"/a CLIENTSCRIPT2="hello"' file 
```

如果您想*就地替换*，请使用

```
sed -i '/CLIENTSCRIPT="foo"/a CLIENTSCRIPT2="hello"' file 
```

## 输出

```
CLIENTSCRIPT="foo"
CLIENTSCRIPT2="hello"
CLIENTFILE="bar" 
```

## 文档

*   请参阅[sed 文档](http://www.gnu.org/software/sed/manual/html_node/Other-Commands.html)和搜索`\a`（附加）

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-08-14T10:53:49.707

注意标准`sed`语法（如在 POSIX 中，所有符合标准的`sed`实现都支持（GNU、OS/X、BSD、Solaris...））：

```
sed '/CLIENTSCRIPT=/a\
CLIENTSCRIPT2="hello"' file 
```

或者在一行：

```
sed -e '/CLIENTSCRIPT=/a\' -e 'CLIENTSCRIPT2="hello"' file 
```

（`-e`xpressions（和 iles 的内容`-f`）与换行符连接起来组成 sed 脚本`sed`解释）。

`-i`就地编辑的选项也是一个 GNU 扩展，其他一些实现（如 FreeBSD 的）支持`-i ''`它。

或者，为了便携性，您可以`perl`改用：

```
perl -pi -e '$_ .= qq(CLIENTSCRIPT2="hello"\n) if /CLIENTSCRIPT=/' file 
```

或者你可以使用`ed`or `ex`：

```
printf '%s\n' /CLIENTSCRIPT=/a 'CLIENTSCRIPT2="hello"' . w q | ex -s file 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-12-20T20:51:40.887

使用以下`s`命令的 POSIX 兼容：

```
sed '/CLIENTSCRIPT="foo"/s/.*/&\
CLIENTSCRIPT2="hello"/' file 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-01-23T16:26:06.807

在 MacOS（至少，OS 10）和 Unix 上工作的 Sed 命令（即不需要像 Gilles'（当前接受）那样的 gnu sed）：

```
sed -e '/CLIENTSCRIPT="foo"/a\'$'\n''CLIENTSCRIPT2="hello"' file 
```

这适用于 bash 以及其他知道 $'\n' 评估引用样式的 shell。一切都可以在一条线上并在较旧的/POSIX sed 命令中工作。如果可能有多行匹配 CLIENTSCRIPT="foo" （或您的等价物）并且您希望只在第一次添加额外的行，您可以按如下方式对其进行修改：

```
sed -e '/^ *CLIENTSCRIPT="foo"/b ins' -e b -e ':ins' -e 'a\'$'\n''CLIENTSCRIPT2="hello"' -e ': done' -e 'n;b done' file 
```

（这会在行插入代码之后创建一个循环，该循环只是循环遍历文件的其余部分，永远不会再回到第一个 sed 命令）。

您可能会注意到我在匹配模式中添加了一个“^ *”，以防该行出现在注释中，或者缩进。它不是 100% 完美，但涵盖了其他一些可能很常见的情况。根据需要调整...

这两个解决方案还解决了一个问题（对于添加行的通用解决方案），如果您新插入的行包含未转义的反斜杠或 & 符号，它们将被 sed 解释并且可能不一样，就像`\n`is - 例如。`\0`将是匹配的第一行。如果您要添加来自变量的行，否则您必须先使用 ${var//} 或另一个 sed 语句等来转义所有内容，则特别方便。

当您不想将 a 命令的替换文本放在行首（如果在函数中）带有缩进线。我利用了 $'\n' 被 shell 评估为换行符的优势，它不在常规的 '\n' 单引号值中。

尽管我认为 perl/甚至 awk 可能会因为更具可读性而获胜，但它已经足够长了。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-02-12T14:06:34.160

对此发布答案可能有点晚，但我发现上述一些解决方案有点麻烦。

我在 sed 中尝试了简单的字符串替换，它起作用了：

```
sed 's/CLIENTSCRIPT="foo"/&\nCLIENTSCRIPT2="hello"/' file 
```

**&**符号反映匹配的字符串，然后添加 \n 和新行。

如前所述，如果您想就地执行此操作：

```
sed -i 's/CLIENTSCRIPT="foo"/&\nCLIENTSCRIPT2="hello"/' file 
```

另一件事。您可以使用表达式进行匹配：

```
sed -i 's/CLIENTSCRIPT=.*/&\nCLIENTSCRIPT2="hello"/' file 
```

希望这可以帮助某人

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-08-02T07:40:54.073

awk 变体：

```
awk '1;/CLIENTSCRIPT=/{print "CLIENTSCRIPT2=\"hello\""}' file 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-07T20:15:03.447

我有一个类似的任务，并且无法使上述 perl 解决方案正常工作。

这是我的解决方案：

`perl -i -pe "BEGIN{undef $/;} s/^\[mysqld\]$/[mysqld]\n\ncollation-server = utf8_unicode_ci\n/sgm" /etc/mysql/my.cnf`

**解释：**

使用正则表达式在我的 /etc/mysql/my.cnf 文件中搜索仅包含的行`[mysqld]`并将其替换为

`[mysqld] collation-server = utf8_unicode_ci`

有效地`collation-server = utf8_unicode_ci`在包含`[mysqld]`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-11T06:05:42.543

我最近也必须为 Mac 和 Linux 操作系统执行此操作，并且在浏览了许多帖子并尝试了很多事情之后，在我看来，我从来没有到达我想要的地方：一个足够简单的使用众所周知的解决方案和具有简单模式的标准命令，一个班轮，便携，可扩展以添加更多约束。然后我尝试从不同的角度看待它，那时我意识到如果“2-liner”满足我的其他标准，我可以不使用“one liner”选项。最后我想出了这个我喜欢的解决方案，它适用于 Ubuntu 和 Mac，我想与大家分享：

```
insertLine=$(( $(grep -n "foo" sample.txt | cut -f1 -d: | head -1) + 1 ))
sed -i -e "$insertLine"' i\'$'\n''bar'$'\n' sample.txt 
```

在第一个命令中，grep 查找包含“foo”的行号，cut/head 选择第一次出现，并且算术 op 将第一次出现的行号增加 1，因为我想在出现之后插入。在第二个命令中，它是一个就地文件编辑，“i”用于插入：ansi-c 引用新行，“bar”，然后是另一个新行。结果是在“foo”行之后添加了一个包含“bar”的新行。这两个命令中的每一个都可以扩展为更复杂的操作和匹配。

# c# - 将 XSD.exe 用于 c# 代码生成，忽略 XML 中的空节点？

> ID：15559367
> 
> 赞同：1
> 
> 时间：2013-03-21T22:24:30.587
> 
> 标签：c#, xml, musicxml

也许我没有正确地做到这一点。但是我使用[MusicXML](http://www.musicxml.com)和 XSD.exe 来针对 DTD 生成 C# 类。

根据[文档](http://www.musicxml.com/tutorial/the-midi-compatible-part/chords/)，连同一个[示例 xml 文件](http://downloads2.makemusic.com/musicxml/BeetAnGeSample.xml)，该`<NOTE>`元素包含一个空`<CHORD>`元素，如果它`<NOTE>`是`<CHORD>`. 生成的代码如下所示：

```
[System.Xml.Serialization.XmlElementAttribute("chord", typeof(empty))] 
```

当我将 XML 反序列化为 ac# 对象时，效果很好，但`<CHORD>`似乎消失了。.NET 是否只是忽略`CHORD`此示例 XML 中的元素？

```
 <note>
    <chord/>
    <pitch>
      <step>E</step>
      <alter>-1</alter>
      <octave>4</octave>
    </pitch>
    <duration>1</duration>
  </note> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:32:36.973

您的意思是当您序列化为 XML 时 chord 元素会消失，因为默认情况下 null 元素不会序列化

如果您想将其呈现为空元素，例如

```
<chord /> 
```

您可以设置使用 isnullable 属性 [XML 序列化和空值 - C#](https://stackoverflow.com/questions/711723/xml-serialization-and-null-value-c-sharp)

正如另一个问题中的链接，您可能想看看这篇关于 XML Schema 文件中 null 的表示的文章：

[http://www.ibm.com/developerworks/xml/library/ws-tip-null/index.html](http://www.ibm.com/developerworks/xml/library/ws-tip-null/index.html)

# xcode - Xcode 项目模板：仅将文件添加到文件系统

> ID：15559370
> 
> 赞同：2
> 
> 时间：2013-03-21T22:24:41.557
> 
> 标签：xcode, xcode-template

我希望我的自定义 Xcode 模板将`.gitignore`文件添加到项目目录（在文件系统上），但我根本不希望将`.gitignore`文件添加到项目中，例如项目导航器。我怎么做？

# youtube-api - API错误？自 3 月 21 日起，v3 API 中不再返回视频缩略图

> ID：15559371
> 
> 赞同：3
> 
> 时间：2013-03-21T22:24:48.870
> 
> 标签：youtube-api

根据 v3 API[规范](https://developers.google.com/youtube/v3/docs/videos)，搜索中返回的视频应包含缩略图。

直到 30 分钟前，情况都是如此。

但是，现在，API 返回的视频在 JSON 中没有“缩略图”属性。

例如：

[https://www.googleapis.com/youtube/v3/videos?part=snippet&key=(key)&id=Kq9z1gNjl0o](https://www.googleapis.com/youtube/v3/videos?part=snippet&key=(key)&id=Kq9z1gNjl0o)

以前会返回：

```
{

    "kind": "youtube#videoListResponse",
    "etag": "\"idnvT0N6oxG_2o6LCWUdZsqtqtk/flm_N0PUouBHj2piDWTowbpXlNM\"",
    “项目”： [
        {
            "id": "Kq9z1gNjl0o",
            "种类": "youtube#video",
            "etag": "\"idnvT0N6oxG_2o6LCWUdZsqtqtk/9f5tPPIkXNmECTi095h9jBWV0s0\"",
            “片段”：{
                "publishedAt": "2010-06-27T00:07:30.000Z",
                "channelId": "UC3lizSW-J9kc8JR455mzv-w",
                “缩略图”：[
                   “小的”： {
                        “网址”：“http://ytimg.com/someimage.jpg”
                    }
                ]
                “title”：“Kristen Bell - On Craig Ferguson - 2008 年 4 月 19 日 - 哇”，
                “描述”：“采访”，
                "channelTitle": "stewiefan33",
                “类别 ID”：“22”
            }
        }
    ]
}

```

现在返回：

```
{

    "kind": "youtube#videoListResponse",
    "etag": "\"idnvT0N6oxG_2o6LCWUdZsqtqtk/flm_N0PUouBHj2piDWTowbpXlNM\"",
    “项目”： [
        {
            "id": "Kq9z1gNjl0o",
            "种类": "youtube#video",
            "etag": "\"idnvT0N6oxG_2o6LCWUdZsqtqtk/9f5tPPIkXNmECTi095h9jBWV0s0\"",
            “片段”：{
                "publishedAt": "2010-06-27T00:07:30.000Z",
                "channelId": "UC3lizSW-J9kc8JR455mzv-w",
                “title”：“Kristen Bell - On Craig Ferguson - 2008 年 4 月 19 日 - 哇”，
                “描述”：“采访”，
                "channelTitle": "stewiefan33",
                “类别 ID”：“22”
            }
        }
    ]
}

```

“缩略图”字段已消失，但仍在文档中。这是 API 中的错误吗？

# function - 返回在线状态的 Excel 公式或函数

> ID：15559374
> 
> 赞同：0
> 
> 时间：2013-03-21T22:25:01.847
> 
> 标签：function, excel-2010, formula

有谁知道给定 SMTP 地址（登录名称）的用户查询 MS Communicator 在线状态的公式或函数？

我必须偶尔打一些电话，知道用户有空会节省很多时间。

谢谢，WK 库克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:45:11.517

Office Communicator SDK Wrapper 提供了各种实用功能，例如联系人维护、查询状态以及其他功能。

[http://ocsdkwrapper.codeplex.com/](http://ocsdkwrapper.codeplex.com/)

# php - 使用php根据活动会话显示登录和注销链接

> ID：15559375
> 
> 赞同：0
> 
> 时间：2013-03-21T22:25:19.500
> 
> 标签：php, html, login, logout

这是我目前拥有但不起作用的代码，仅在一个页面上登录时显示注销按钮然后自动注销用户？

```
<?php
if(!session_is_registered(myusername))

{
echo '<a href="login.php"><b>Log In</b></a>';
}

else 
{
echo  '<a href="log_out.php"><b>Log Out</b></a>';
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:29:09.593

您忘记`session_start()`了很多事情，请确保在您要启用会话保护的每个页面上共享该内容。

```
<?php
session_start();
if(!isset($_SESSION['username']) && empty($_SESSION['username']))

{
echo '<a href="login.php"><b>Log In</b></a>';
}

else 
{
echo  '<a href="log_out.php"><b>Log Out</b></a>';
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:35:44.493

`session_is_registered`已弃用。尝试`$_SESSION`改用

```
if ($_SESSION["isLoggedIn"]) {
    // Log out HTML goes here
} else {
    // Log in HTML goes here
} 
```

您需要`session_start()`在所有文件的顶部包含，您可以`$_SESSION["isLoggedIn"]`像设置任何其他变量一样设置：`$_SESSION["isLoggedIn"] = TRUE`

# android - 容器视图推送到 Android 的详细视图

> ID：15559376
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:25:21.003
> 
> 标签：android

我主要有 iOS 应用程序开发经验，但决定尝试使用 android 版本。我要做的是一个容器视图，它会推送到包含图片标题的详细视图，然后有时会推送到第二个示例视图。我还想在那里进行手势识别以在图片之间滑动。

我确定这在 android 上是可能的，但我不知道如何。如果这实际上是可能的，请有人直接告诉我吗？如果是这样，它是如何完成的！

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:38:14.310

有可能的。

手势教程： [http ://www.vogella.com/articles/AndroidGestures/article.html](http://www.vogella.com/articles/AndroidGestures/article.html)

也许你会使用`ViewPager`：http: [//developer.android.com/training/animation/screen-slide.html](http://developer.android.com/training/animation/screen-slide.html)

网上有很多教程，只要聪明地搜索。

# javascript - 在javascript中随机化选择和输出变量以跨越标签

> ID：15559377
> 
> 赞同：1
> 
> 时间：2013-03-21T22:25:29.647
> 
> 标签：javascript

我有这个 javascript 代码：

```
var doNewPoll = function(){
  var vacationIndex = Math.round(Math.random(myVacations.length));
  var dest1 = myVacations[vacationIndex];
  var dest2 = myVacations[vacationIndex];
  alert(dest1);
  alert(dest2);
  } 
```

我的 2 个问题是：
1）如何确保我的变量 dest1 和 dest2 不相同？我希望它从 myVacations 数组中提取 2 个不同的选项。

和 2) 我可以让警报正常工作，但不是警报，我希望 dest1 和 dest2 的结果出现在文档中的跨度标签 id'd Span1 和 Span2 中。我只是在想如何做到这一点。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:26:56.420

首先，使用地板，而不是圆形，你不希望你的索引是长度：

```
 Math.floor(Math.random(myVacations.length)); 
```

然后，最容易避免重复的方法就是循环直到第二个数字与第一个不同。这意味着你必须建立另一个索引，当然：

```
var index1 = Math.floor(Math.random(myVacations.length));
var index2 = index1;
while (index2==index1) index2 = Math.floor(Math.random(myVacations.length));
var dest1 = myVacations[index1];
var dest2 = myVacations[index2]; 
```

要使文档出现在 span 中，最简单的方法是从尚未存在的元素开始：

```
<span id=d1></span>
<span id=d2></span> 
```

然后填充它们：

```
document.getElementById("d1").innerHTML = dest1;
document.getElementById("d2").innerHTML = dest2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:34:50.033

// 我假设 span1 和 span2 是这些元素的 id

```
var doNewPoll = function(myVacations, span1, span2){
  var vacationIndex1 = Math.round(Math.random(myVacations.length));
  var vacationIndex2 = null; 
  do{ 
     vacationIndex2 = Math.round(Math.random(myVacations.length)); 
  } while (vacationIndex2 == vacationIndex); 

  document.getElementById(span1).innerHTML = myVacations[vacationIndex1]; 
  document.getElementById(span2).innerHTML = myVacations[vacationIndex2]; 

} 
```

# vb.net - 接口和匈牙利符号

> ID：15559379
> 
> 赞同：1
> 
> 时间：2013-03-21T22:25:37.653
> 
> 标签：vb.net, design-patterns

请看以下问题：[DataAccess 项目中类的命名约定是什么？](https://stackoverflow.com/questions/1955875/whats-the-naming-convention-for-classes-in-the-dataaccess-project)

JDK 谈到使用命名空间来分隔数据逻辑层和业务逻辑层，而不是使用匈牙利符号来命名接口，例如 IPersonDAL 用于数据访问层。我在下面的代码中遵循了这个回答者的建议：

```
Imports com.app.BusinessLogicLayer.Interfaces
Imports com.app.DataLogicLayer.Interfaces
Namespace BusinessLogicLayer

        Public Class Order
            Implements com.app.BusinessLogicLayer.Interfaces.IOrder
            Public Sub Insert()
                Dim IOrder As com.app.DataLogicLayer.Interfaces.IOrder = New com.app.DataLogicLayer.Order
            End Sub
        End Class
    End Namespace

    Namespace DataLogicLayer
        Public Class Order
            Public Sub Insert()

            End Sub
        End Class
    End Namespace

    Namespace BusinessLogicLayer.Interfaces
        Public Interface IOrder

        End Interface
    End Namespace

    Namespace DataLogicLayer.Interfaces
        Public Interface IOrder

        End Interface
    End Namespace 
```

业务逻辑层中的类，例如订单实现接口（来自业务逻辑层的 IOrder）和使用接口（来自数据逻辑层的 IOrder），即表示层与业务逻辑层通信，业务逻辑层通过接口与数据逻辑层通信. 请注意，由于这个原因；接口必须完全符合命名空间。为此原因; 使用匈牙利符号命名接口不是更好，例如 IPersonBLL 和 IPersonDAL 还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T03:29:05.750

嗯，这是一个主观的话题，但这里......

首先，避免使用 DAL 之类的缩写。代码分析对首字母缩略词大喊大叫；你应该把它写出来。根据我的经验，这是明智的建议。打开充满缩写的古老代码会导致很多不必要的 WTF 时刻（双关语）。

即使拼写出来，当您的 BusinessLogic 文件夹中有 50 个类时，如下所示：

`Company.Product.BusinessLogic`
  人员**实体**
  订单**实体**
  物料**实体**
  员工**实体**
  客户**实体**
  等

我的直觉告诉我是时候重构了。我觉得最好将**实体**标签移动到命名空间，所以你有这个：

`Company.Product.BusinessLogic.Entity`
  人
  订单
  材料
  员工
  客户
  等

同样的事情也适用于接口。

这也使得重构更容易。如果我想开始调用我的实体“BusinessObjects”，我只需要重命名命名空间，而不是类名和文件名。

限定类名可能很痛苦，但通常只需要指定父命名空间，而不是完全限定它们。Resharper -> 清理代码在这里创造了奇迹。

总之，我不会为了让引用更容易处理而将匈牙利符号添加到我的接口/类名称中。

* * *

## 更新：示例

**数据访问层**：

```
Namespace Company.Product.DataAccess.Adapter
    Public Class Product
    End Class
End Namespace 
```

**业务层**：

```
Imports Company.Product.DataAccess

Namespace Company.Product.BusinessLogic.Entity
    Public Class Product
        Dim adapter As New Adapter.Product()
    End Class
End Namespace 
```

**用户界面**（理想情况下，您的 UI 应该只与业务层交互，而不是直接与数据层交互）：

```
Imports Company.Product.BusinessLogic

Namespace Company.Product.UserInterface.Webpage
    Public Class Product
        Dim productEntity As New Entity.Product()
    End Class
End Namespace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T03:49:52.430

> 请注意，由于这个原因；接口必须完全符合命名空间。为此原因; 使用匈牙利符号命名接口不是更好，例如 IPersonBLL 和 IPersonDAL 还是我遗漏了什么？

我明白你在说什么，但我不明白为什么完全限定名称是不好的，或者为什么使用“匈牙利”表示法命名接口会“更好”。（我这样说是作为 Simonyi 的应用程序匈牙利语的忠实粉丝。）

请记住，无论类/接口的名称和位置如何，编译器都会生成相同的目标代码。明显的嵌套级别不会将您的代码“减慢”到任何可察觉的程度。

如果输入名称*确实*让您感到困扰（而 Intellisense 并不能安慰您），您始终可以使用带有 using 指令的[命名空间别名之类的东西。](http://msdn.microsoft.com/en-us/library/dfb3cx8s.aspx)但我会小心过度使用这些——我认为这会使代码更难阅读。

# wso2esb - WSo2 ESB SSL 证书

> ID：15559386
> 
> 赞同：0
> 
> 时间：2013-03-21T22:26:19.777
> 
> 标签：wso2esb

我试图让 WSo2 ESB 代理到基于 WSDL 的服务。该服务托管在远程服务器中，并且服务器需要相互 SSL 握手。似乎 WSO2 esb 在重新协商时无法出示证书。有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:51:50.880

请按照以下博客文章 [1] 中给出的步骤进行操作

[1] [http://www.soasecurity.org/2010/07/ssl-profiles-in-wso2-esb.html](http://www.soasecurity.org/2010/07/ssl-profiles-in-wso2-esb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T22:49:46.760

WSO2 ESB 在 repository/resources/security 下有一个名为 client-truststore.jks 的文件。此文件列出了 ESB 在通过 HTTPS 与具有这些 CA 验证的证书的客户端进行交易时将识别为有效的所有证书颁发机构 (CA)。导出服务证书并将其导入“client-truststore.jks”。我希望它对你有帮助。

# r - RStudio 和 R 中的运算符“[<-”

> ID：15559387
> 
> 赞同：44
> 
> 时间：2013-03-21T22:26:32.823
> 
> 标签：r, rstudio

偶然我遇到了`"[<-"`操作员的奇怪行为。它的行为取决于调用顺序以及我使用的是 RStudio 还是普通的 RGui。我会用一个例子说明清楚。

```
x <- 1:10
"[<-"(x, 1, 111)
x[5] <- 123 
```

据我所知，第一个分配不应该改变`x`（或者我错了？），而第二个应该改变。而实际上上述操作的结果是

```
x
[1]  1  2  3  4  123  6  7  8  9 10 
```

但是，当我们以不同的顺序执行这些操作时，结果是不同的并且`x`已经改变了！意味深长：

```
x <- 1:10
x[5] <- 123
"[<-"(x, 1, 111)
x
[1] 111   2   3   4   123   6   7   8   9  10 
```

但它只发生在我使用纯 R 时！在 RStudio 中，两个选项的行为相同。我在两台机器上检查过（一台使用 Fedora，一台使用 Win7），情况看起来完全一样。我知道'功能'版本（`"[<-"(x..)`）可能从未使用过，但我很好奇它为什么会发生。谁能解释一下？

===========================

编辑：好的，所以从评论中我知道原因是它`x <- 1:10`的类型为'integer'并且在替换`x[5] <- 123`它之后是'double'。但仍然存在疑问，为什么 RStudio 中的行为不同？我重新启动 R 会话，它没有改变任何东西。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-21T23:17:07.687

## **Rstudio 的行为**

Rstudio 的对象浏览器修改它检查的对象，在修改时强制复制。具体来说，对象浏览器使用至少一个 R 函数，其调用在内部强制评估对象，在此过程中将对象的**命名**字段的值从 1 重置为 2。来自[R-Internals 手册](http://cran.r-project.org/doc/manuals/R-ints.html#Rest-of-header)：

> 当一个对象即将被更改时，会查询指定的字段。值 2 表示对象必须在被更改之前被复制。[...] 值 1 用于 [...] 原则上在计算期间存在两个副本的情况 [...] 但不再存在，因此可以优化一些原始函数在这种情况下避免复制。

要查看对象浏览器修改了**命名**字段（`[NAM()]`在下一个代码块中），请比较运行以下行的结果。首先，两条“线”一起运行，因此 Rstudio`X`在查询其结构之前没有时间“接触”。在第二种情况下，每一行都是单独粘贴的，所以`X`在检查之前进行修改。

```
## Pasted in together
x <- 1:10; .Internal(inspect(x))
# @46b47b8 13 INTSXP g0c4 [NAM(1)] (len=10, tl=0) 1,2,3,4,5,...

## Pasted in with some delay between lines
x <- 1:10
.Internal(inspect(x))
# @42111b8 13 INTSXP g0c4 [NAM(2)] (len=10, tl=0) 1,2,3,4,5,... 
```

一旦**命名**字段设置为 2，`[<-(X, ...)`将不会修改原始对象。将以下内容一次性粘贴到 Rstudio 中会修改`X`，而逐行粘贴则不会：

```
x <- 1:10
"[<-"(x, 1, 111) 
```

所有这一切的另一个后果是，Rstudio 的对象浏览器实际上使某些操作比其他操作要慢。同样，比较首先粘贴在一起的相同的两个命令，然后一次一个：

```
## Pasted in together
x <- 1:5e7
system.time(x[1] <- 9L)
#    user  system elapsed 
#       0       0       0 

## Pasted in one at a time
x <- 1:5e7
system.time(x[1] <- 9L)
#    user  system elapsed 
#    0.11    0.04    0.16 
```

* * *

## **[<- 在 R 中的可变行为**

`[<-`wrt 修改向量的行为`X`取决于`X`分配给它的元素的存储类型和存储类型。这解释了`R`的行为，但不解释 Rstudio 的行为。

在 R 中，当`[<-`附加到 vector`X`或执行需要`X`修改其类型的子`X`赋值时，将被复制并且返回的值不会覆盖预先存在的变量`X`。（为此，您需要执行类似`X <- "[<-(X, 2, 100)`.

**所以，以下都不修改 X**

```
X <- 1:2         ## Note: typeof(X) --> "integer"

## Subassignment that requires that X be coerced to "numeric" type
"[<-"(X, 2, 100) ## Note: typeof(100) --> "numeric"
X 
# [1]   1   2

## Appending to X
"[<-"(X, 3, 100L)
X
# [1]   1   2 
```

不过，只要有可能，R 确实允许`[<-`函数通过引用直接修改`X`（即不复制）。这里的“可能”包括子分配不需要`X`修改类型的情况。

**所以以下所有修改 X**

```
X <- c(0i, 0i, 0i, 0i)
"[<-"(X, 1, TRUE)
"[<-"(X, 2, 20L)
"[<-"(X, 3, 3.14)
"[<-"(X, 4, 5+5i)
X
# [1]  1.00+0i 20.00+0i  3.14+0i  5.00+5i 
```

# jquery - 有没有办法将 python (django) 变量放入 jquery onmouseover 弹出窗口中？

> ID：15559388
> 
> 赞同：0
> 
> 时间：2013-03-21T22:26:34.157
> 
> 标签：jquery, django, python-2.7, onmouseover

当有人滚动图像时，我正在尝试为我的网站创建弹出窗口。问题是当您滚动他们的头像时，我试图显示有关人的不同信息，并且我使用 for 循环来显示所有人。当我使用以下代码时，会显示每个人的正确头像，但是每个人的弹出信息始终相同，而不是特定于该人的信息。

```
<script>
$(function() {
  var moveLeft = 20;
  var moveDown = 10;

  $('a#trigger').hover(function(e) {
    $('div.pop-up').show();
      //.css('top', e.pageY + moveDown)
      //.css('left', e.pageX + moveLeft)
      //.appendTo('body');
  }, function() {
    $('div.pop-up').hide();
  });

  $('a#trigger').mousemove(function(e) {
    $("div.pop-up").css('top', e.pageY + moveDown).css('left', e.pageX + moveLeft);
  });

});
</script>

{% for person in people %}
<div id="container">
    <a href="#" id="trigger"><img src="{{ MEDIA_URL }}/{{ person.avatar }}" /></a>
    <div class="pop-up">
        <h3>{{ person.name }}</h3>
        <p>{{ person.other_info }}</p>
    </div>
</div>

#Style Sheet
div.pop-up {
  display: none;
  position: absolute;
  width: 280px;
  padding: 10px;
  background: #eeeeee;
  color: #000000;
  border: 1px solid #1a1a1a;
  font-size: 90%;
} 
```

所以循环中的每个人都会显示他们的头像，但是当我滚动他们的头像时，会显示列表中最后一个人的信息。有谁知道该怎么做才能修复它？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:47:42.053

请注意，在元素上使用类而不是 ID，并确保仅选择兄弟弹出窗口：

```
$(function() {
    var moveLeft = 20;
    var moveDown = 10;

    $('a.trigger').hover(function(e) {
      $(this).next('.pop-up').show();
        //.css('top', e.pageY + moveDown)
        //.css('left', e.pageX + moveLeft)
        //.appendTo('body');
    }, function() {
      $(this).next('.pop-up').hide();
    });

    $('a.trigger').mousemove(function(e) {
      $(this).next('.pop-up')
        .css('top', e.pageY + moveDown)
        .css('left', e.pageX + moveLeft);
    });
}); 
```

```
{% for person in people %}
<div class="person-container">
  <a href="#" class="trigger"><img src="{{ MEDIA_URL }}/{{ person.avatar }}" /></a>
  <div class="pop-up">
      <h3>{{ person.name }}</h3>
      <p>{{ person.other_info }}</p>
  </div>
</div> 
```

# salesforce - Hava pdf文件附件到salesforce呈现为visualforce页面renderAs=PDF的第2页

> ID：15559389
> 
> 赞同：0
> 
> 时间：2013-03-21T22:26:35.247
> 
> 标签：salesforce

在自定义对象上，我有与之关联的附件文件。文件是pdf。我想生成visualforce页面，其中第一页是与自定义对象关联的邮寄地址，第2页是附件文件（这是一个pdf）。visualforce 页面具有 RenderAs='pdf' 属性。我怎样才能做到这一点？我熟悉扩展以及如何查询附件的正文。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T11:32:21.637

我只是将所有附件移动到其他服务器（如亚马逊）并在第 1 页提供它的链接

# django - 检查所有 {% url %} 标签是否有错误

> ID：15559397
> 
> 赞同：2
> 
> 时间：2013-03-21T22:27:02.293
> 
> 标签：django, validation, templates

我正在做一个越来越大的 Django 项目。我现在正在重新组织文件，将它分成我创建`views.py`的包中的不同模块。`views`

移动视图函数后，我必须找到对它们的所有引用。改变`urls.py`很容易。在调用中查找错误`reverse`也很容易——Eclipse 标记了有问题的那些。

但是，我找不到一种方法来检查所有`{% url %}`模板标签并找到那些不引用视图的标签。我可以一个一个地检查它们，但是任何错字都会导致运行时错误。

是否有自动检查`{% url %}`无效视图名称标签的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:12:33.180

如何为您的视图创建测试用例，至少确保它们返回 200 响应？尽管这需要更多的前端工作并且显然不能完全完成您想要做的事情，但它可以帮助您识别具有这些命名 url 错误的视图，并允许您在将来以编程方式测试整个站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T15:24:26.557

是的，有几种方法可以做到这一点。

大多数IDE都有`rename`重构的东西，PyCharm有这个功能可以在你当前的项目中找到对象、字符串等的用法，然后给你一个报告。

无论如何，既然你已经重命名了它，你可以为它写一些测试。测试非常适合您的情况。

# c - 当文件系统已满时进程会发生什么

> ID：15559403
> 
> 赞同：0
> 
> 时间：2013-03-21T22:27:42.900
> 
> 标签：c, linux, linux-kernel, operating-system, signals

如果文件系统已满，进程会发生什么？内核是否向我们发送关闭信号，如果是，它是什么信号。显然，如果程序写入文件系统，它可能会崩溃，但我很好奇这是如何发生的（在血淋淋的内核/操作系统细节中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:33:01.807

> 如果文件系统填满，进程会发生什么？

在完整分区上需要额外磁盘空间的操作（如创建或附加到文件）失败并`errno`显示`ENOSPC`.

没有信号被发送，因为完整的文件系统不是需要信号的关键条件。这是一个例行的、容易处理的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:31:54.413

当文件系统已满时，程序没有理由崩溃。显然文件写入会失败，但一个编写良好的程序应该能够应对 - 在 C 中，这意味着`fopen`返回`NULL`或`ferror`返回非零值等。我遇到过很多次，有些讨厌的事情可以发生例如用空白版本覆盖文件，但绝不会导致程序崩溃。如果确实发生了，可能是因为程序的作者试图使用`NULL`文件描述符或一些类似的问题，在这种情况下程序会`SIGSEGV`像往常一样收到一个。

# internet-explorer - 使用VBA操作网页上的单选按钮

> ID：15559408
> 
> 赞同：2
> 
> 时间：2013-03-21T22:28:20.940
> 
> 标签：internet-explorer, vba, radio-button

我是一名 VBA 菜鸟，试图在网络上操作单选按钮，但运气不佳。我已经在谷歌上搜索了几个小时，并且发现了大量的代码片段，我一直在尝试修改这些代码片段来完成这项工作，但没有任何成功。它必须是一些变化：

```
ie.Document.getElementsByName("name_of_radiobox").Item(0).Checked = True 
```

单选按钮有两个选项（使用 A 导出或使用 B 导出）。'Export with A' 是自动选择的，我显然需要选择另一个。根据 HTML，按钮的名称都是相同的，并且似乎位于现有页面上弹出的表单上。

如何选择第二个按钮？我确定我遗漏了一些重要信息，所以如果我需要提供任何其他信息，请告诉我，我很乐意提供。感谢您的任何帮助！

编辑：有这段代码，我相信这是一个弹出的子窗口（它不是一个单独的窗口，而是现有窗口中的一个窗格）：

```
Sys.WebForms.PageRequestManager._initialize('ctl00$sm1', document.getElementById('aspnetForm')); 
```

然后该框的代码如下所示：

```
<div class="so_heading">
Export response data to Excel</div>
<div id="ctl00_cp1_pageMessage" class="attention">Click the button to send an email containing an Excel file to the email address </div>
<div id="ctl00_cp1_pagec" class="so_fields">
<span id="ctl00_cp1_exportOption"><input id="ctl00_cp1_exportOption_0" type="radio" name="ctl00$cp1$exportOption" value="text" checked="checked" /><label for="ctl00_cp1_exportOption_0">Export with answer texts</label><br /><input id="ctl00_cp1_exportOption_1" type="radio" name="ctl00$cp1$exportOption" value="label" /><label for="ctl00_cp1_exportOption_1">Export with answer codes</label></span>
<div class="gen_menu">
<input type="submit" name="ctl00$cp1$btExport" value="Export Data" onclick="window.setTimeout(cb.curry(__DisableButton, this), 0);" id="ctl00_cp1_btExport" class="confirmitButton" />
</div> 
```

到目前为止我的代码（打开页面，单击该页面上的链接，创建带有单选按钮的窗格：

将 IE 调暗为对象 将 ieDoc 调暗为对象 将锚点调暗为对象 将 ieAnchors 调暗为对象

```
 Set IE = CreateObject("InternetExplorer.Application")
    IE.navigate "the url to my page"
    IE.Visible = True

  Do While IE.busy: DoEvents: Loop
  Do While IE.ReadyState <> 4: DoEvents: Loop

  Set ieDoc = IE.Document
  Set ieAnchors = ieDoc.Anchors

    For Each Anchor In ieAnchors
        If Anchor.innerHTML = "Export Data..." Then
            Anchor.Click
            Exit For
        End If
    Next Anchor

  Do While IE.busy: DoEvents: Loop
  Do While IE.ReadyState <> 4: DoEvents: Loop

    ' the bit I can't get to work to toggle the radio button
    ieDoc.getElementsByName("ctl00$cp1$exportOption").Item(1).Checked = True

End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:54:09.573

我能够让它与以下代码一起工作：

```
 Set ieRadio = IE.Document.all
    ieRadio.Item("ctl00$cp1$exportOption")(1).Checked = True 
```

谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:13:30.390

最简单的方法是在服务器端使用该代码，因为 VBScript 在浏览器类型、html5 ...等方面存在一些问题这是在服务器端使用单选按钮的示例：

默认.aspx

```
 <!DOCTYPE html>
    <%@ Page Language="vb" AutoEventWireup="false" %>
    <script runat="server" language="vb">
      Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
            Radio1.Checked = False
            Radio2.Checked = True
      End Sub
    </script>
    <html>
      <body>
        <form id="Form1" runat="server">
          <input id="Radio1" type="radio" value="ExA" name="radbtnEx" runat="server" />Export with A<br />
          <input id="Radio2" type="radio" value="ExB" name="radbtnEx" runat="server" />Export with B<br />
        </form>
      </body>
    </html> 
```

如果这不能解决您的问题，请尝试向我们展示您的代码。问候

# java - 是否可以加密部分 faces-config 文件？

> ID：15559413
> 
> 赞同：2
> 
> 时间：2013-03-21T22:28:37.487
> 
> 标签：java, jsf, jsf-2, security

我正在使用 JSF 2.1 Mojarra。我有一个在 faces-config 文件中初始化的托管 Bean。此文件中有一些我想加密的敏感信息。这可能吗？或者我是否需要通过其他一些机制来管理对象创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:35:54.340

我会加密数据，然后将其转换为十六进制或 base64 编码的文本，并将生成的字符串放入您的配置中 - 它只是文本，所以你不会有问题。

让使用数据的类在使用之前对数据进行解码和解密。

# google-app-engine - EndpointsModel 与 ndb.Model

> ID：15559414
> 
> 赞同：2
> 
> 时间：2013-03-21T22:28:37.927
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, google-cloud-endpoints, endpoints-proto-datastore

所以我偶然发现了`EndpointsModel`一种创建模型的方法。上网看的时候基本没有教程。对于用过的人来说，有什么好处呢？而不是`ndb.Model`我的意思。

编辑：

另外，我试图模仿[什么是验证、识别和存储用户敏感信息的最佳方式中的代码？](https://stackoverflow.com/questions/15527631/what-is-the-best-way-to-auth-identify-and-store-delicate-information-about-user)只是为了检查一下，但我的日食红线：

```
from endpoints_proto_datastore.ndb import EndpointsModel 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T03:20:52.483

Endpoints Proto Datastore API 不是 App Engine SDK 的官方部分，而是我一直在开发的一个库。

它已[记录在案](http://endpoints-proto-datastore.appspot.com/)，我很高兴来到这里回答您的问题。事实证明，`EndpointsModel`是 的[子类`ndb.Model`](https://code.google.com/p/endpoints-proto-datastore/source/browse/endpoints_proto_datastore/ndb/model.py?r=1180a1787e2b138c31a6aa92e52427227b6e62d7#593)，因此您将得到两全其美：

```
>>> from endpoints_proto_datastore.ndb import EndpointsModel
>>> from google.appengine.ext import ndb
>>> EndpointsModel.__bases__ == (ndb.Model,)
True 
```

如文档登录页面所述，优点是该库：

> ...允许将现有模型类与 Google Cloud Endpoints 一起使用。通过扩展`ndb.Model`类和`endpoints`库提供的功能，该库允许您直接与 API 方法中的模型实体进行交互，而不是 ProtoRPC 请求。

我们还[讨论](https://developers.google.com/live/shows/150149336/)了如何使用该库。在其中，我们明确提到您需要将[`endpoints_proto_datastore`库](https://code.google.com/p/endpoints-proto-datastore/downloads/detail?name=endpoints_proto_datastore.zip)添加到您的应用程序中。

```
$ cd path/to/your/application/code
$ wget https://endpoints-proto-datastore.googlecode.com/files/endpoints_proto_datastore.zip
$ unqip -q endpoints_proto_datastore.zip 
```

# c - 可能是一个愚蠢的、经常被问到的错误，涉及 C 中的数组

> ID：15559415
> 
> 赞同：3
> 
> 时间：2013-03-21T22:28:38.807
> 
> 标签：c

我对 C 非常陌生，并且遇到以下问题。我初始化数组：

```
double Cx[101];
for(int i=0; i<101; i++){
  Cx[i]=-5+i*0.1;
}

double Q[2][101];
double y[101]; 
```

我在主要方法之外有以下功能：

```
double InitHeight(double g, double dx, double x){
  return 3;
}

double InitMom(double g, double dx, double x){
 return 2;
}

double plainTopo(double x){
 return x*10;
} 
```

现在，在主要方法中，我执行以下操作：

```
double g=1;
double dx=0.1;
for(int i=0; i<101; i++){
  Q[1][i] = InitHeight(g,dx,Cx[i]);
  Q[2][i] = InitMom(g,dx,Cx[i]);
  y[i] = plainTopo(Cx[i]);
} 
```

所以，我的问题是 Cx 数组的原始值被修改了。这是原始 Cx 的一部分：

```
-5.000000
-4.900000
-4.800000
-4.700000
-4.600000
-4.500000
-4.400000
... 
```

在我运行代码之后，这就是我得到的：

```
 Cx[]   Q[1][]   Q[2][]     y[]
2.000000 3.000000 2.000000 20.000000
2.000000 3.000000 2.000000 20.000000
2.000000 3.000000 2.000000 20.000000
2.000000 3.000000 2.000000 20.000000
2.000000 3.000000 2.000000 20.000000
2.000000 3.000000 2.000000 20.000000 
```

我一生都无法理解为什么 Cx 数组会被修改。我尝试使用指针来代替，结果相同，还尝试在循环中执行 double x = Cx[i] 然后将 x 传递给函数，但 Cx 再次发生变化。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T22:30:45.747

您的索引`Q`不正确。C中的数组索引从0开始，而不是1。所以你应该有

```
double g=1;
double dx=0.1;
for(int i=0; i<101; i++){
  Q[0][i] = InitHeight(g,dx,Cx[i]); /* Used to be Q[1][i] */
  Q[1][i] = InitMom(g,dx,Cx[i]); /* Used to be Q[2][i] */
  y[i] = plainTopo(Cx[i]);
} 
```

至于为什么`Cx`会改变，访问数组中的越界项会导致未定义的行为，这意味着 C 编译器可以做任何它想做的事情。您的特定编译器生成分配到`Cx`. 从技术上讲，这是因为数组在堆栈上的布局方式，但编译器*不需要*做与编译器相同的事情，而是可以选择导致程序崩溃（这是最好的情况，因为它可以帮助您找到错误），覆盖其他数据（这就是您所看到的），或删除所有文件（我所知道的编译器实际上没有这样做）。真的，编译器有*完全的自由*每当发生未定义的行为时都会造成尽可能多的破坏，其中一种情况是当您访问超出范围的数组索引时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T22:30:29.040

这超出了数组的范围`Q`，导致未定义的行为：

```
Q[1][i] = InitHeight(g,dx,Cx[i]);
Q[2][i] = InitMom(g,dx,Cx[i]); 
```

必须是`Q[0]`并且`Q[1]`定义`Q`为：

```
double Q[2][101]; 
```

代码中的另一个索引表明您知道数组索引是从零开始的，并且从数组`0`中`N - 1`的`N`元素数开始运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T22:32:43.307

```
double g=1;
double dx=0.1;
for(int i=0; i<101; i++){
  Q[1][i] = InitHeight(g,dx,Cx[i]);
  Q[2][i] = InitMom(g,dx,Cx[i]);
  y[i] = plainTopo(Cx[i]);
} 
```

您没有可用的 Q[2][i]，因此它可能会覆盖到您的 Cx 数组中

我想你的意思是

```
Q[0][i] = InitHeight(g,dx,Cx[i]);
Q[1][i] = InitMom(g,dx,Cx[i]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T22:32:43.493

```
double Q[2][101];
:
Q[2][i] = InitMom(g,dx,Cx[i]); 
```

您的腐败正在发生，因为 Q 的合法索引*不*包括`Q[2][...]`.

您似乎知道这一点，因为您`i`从 0 迭代到 100（含），对于`Cx[101]`数组，所以它似乎只是一个暂时的错误 - 它对于数组的*所有维度都是相同的规则。*

# django - 生产中的 Django Celery

> ID：15559421
> 
> 赞同：4
> 
> 时间：2013-03-21T22:29:36.990
> 
> 标签：django, celery, django-celery

我有我想做的一切，`django-celery`在我的本地开发机器上工作。我运行 Django`djcelery`和`cellery`代理 (Amazon SQS)。它发送任务并且正常工作。

我可以像我在本地完成的一样设置这一切（即全部在一台机器上），但是当我想将任务分发到另一台机器/共享任务等时会发生什么？这是当前机器（使用 Django`djcelery`和`celery`）的副本以及所有与同一个 SQS 的连接吗？这是如何运作的？如果他们都连接到同一个经纪人，他们只是“知道”吗？或者它不是这样工作的？

是否可以像我在开发中那样在一台机器上开始一切（我将在生产中守护 celery）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:24:28.723

Amazon SQS 是一项简单的队列服务，作业进入等待运行，然后在完成后从队列中删除。Celery 只是从这个队列中读取。

芹菜可以水平和垂直缩放。您需要芹菜来更快地处理更多工作吗？为您的机器提供更多资源，增加工作人员数量，这就是垂直扩展，或者启动更多较小的机器，即水平扩展。无论哪种方式，您的芹菜工人都在 SQS 上使用相同的队列。这确实取决于您的 celery 工作正在做什么，以及您的其他基础设施将如何受到影响。如果他们正在写入数据库，那么您拥有的工作人员越多，数据库上的负载就越高，因此您也需要考虑扩展它。

从一台机器上的“全部”方法开始是可以的。随着对应用程序需求的增长，您可以开始考虑将 celery 工作人员转移到更多机器上，或者在一台服务器上为您提供更多资源。

这有帮助吗？:)

# django - django，压缩机和基础 scss

> ID：15559423
> 
> 赞同：3
> 
> 时间：2013-03-21T22:29:44.807
> 
> 标签：django, sass, zurb-foundation

您好我正在尝试使用 django-compressor 的预编译器将基础 scss 集成到 django 中，该项目如下所示：

```
├── manage.py
├── requirements.txt
├── static
│   ├── config.rb
│   ├── humans.txt
│   ├── index.html
│   ├── javascripts
│   │   ├── foundation
│   │   │   ├── foundation.alerts.js
│   │   │   ├── foundation.clearing.js
│   │   │   ├── foundation.cookie.js
│   │   │   ├── foundation.dropdown.js
│   │   │   ├── foundation.forms.js
│   │   │   ├── foundation.joyride.js
│   │   │   ├── foundation.js
│   │   │   ├── foundation.magellan.js
│   │   │   ├── foundation.orbit.js
│   │   │   ├── foundation.placeholder.js
│   │   │   ├── foundation.reveal.js
│   │   │   ├── foundation.section.js
│   │   │   ├── foundation.tooltips.js
│   │   │   └── foundation.topbar.js
│   │   └── vendor
│   │       ├── custom.modernizr.js
│   │       ├── jquery.js
│   │       └── zepto.js
│   ├── MIT-LICENSE.txt
│   ├── robots.txt
│   ├── sass
│   │   ├── app.scss
│   │   ├── normalize.scss
│   │   └── _settings.scss
│   └── stylesheets
│       ├── app.css
│       └── normalize.css
├── templates
│   ├── 404.html
│   ├── 500.html
│   ├── admin
│   │   └── base_site.html
│   └── base.html
└── weddings
    ├── __init__.py
    ├── __init__.pyc
    ├── local_settings.py
    ├── local_settings.pyc
    ├── settings.py
    ├── settings.pyc
    ├── urls.py
    ├── urls.pyc
    └── wsgi.py 
```

并且预编译器在 settings.py 中看起来像这样

```
COMPRESS_PRECOMPILERS = (
    ('text/x-scss', 'sass --scss --compass {infile} {outfile}'),
) 
```

当我使用 nginx + uwsgi 运行它时，出现以下错误：

```
Syntax error: File to import not found or unreadable: foundation/foundation-global.
              Load paths:
                /etc/uwsgi/vassals
                /etc/uwsgi/vassals/sass
                /srv/www/weddings/gems/compass-0.12.2/frameworks/blueprint/stylesheets
                /srv/www/weddings/gems/compass-0.12.2/frameworks/compass/stylesheets
                Compass::SpriteImporter
                /srv/www/weddings/gems/bourbon-3.1.1/app/assets/stylesheets
                /srv/www/weddings/gems/bourbon-3.1.1/app/assets/stylesheets
        on line 2 of /srv/www/weddings/weddings/static/sass/_settings.scss
        from line 2 of /srv/www/weddings/weddings/static/sass/app.scss
  Use --trace for backtrace. 
```

我怀疑它没有读取 config.rb 或 config.rb 中的设置错误：

```
http_path = "/"
css_dir = "stylesheets"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "javascripts" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T21:57:47.670

当你有一个`config.rb`文件时，你就有了一个 Compass 项目。

Compass 项目应该使用`compass`命令行工具编译，而不是`sass`命令行工具。

正如您已经发现的那样，应该从项目文件夹中启动编译。但是将路径硬编码到 settings.py 是一个坏主意，因为它会使您的项目不可移植。

您应该使用`os.path.dirname(os.path.realpath(__file__))`来发现当前脚本的路径，而不是硬编码路径。要更改相对于 的文件夹，请像这样`settings.py`使用（根据需要进行调整，您可以使用）：`os.path.join()``..`

```
os.path.join(os.path.dirname(os.path.realpath(__file__)), "static") 
```

此外，您`PROJECT_DIR`的`settings.py`. 用它来使这条线更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-28T17:15:57.733

对@James Lin 的一点改进

```
COMPRESS_PRECOMPILERS = (
    # ('text/x-scss', 'django_libsass.SassCompiler'),
    # ('text/x-scss', 'sass --scss {infile} {outfile}'),
    ('text/x-scss', 'sass --scss --compass {infile} {outfile}'),
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:46:40.823

我目前的工作是在 ocnfig.rb 所在的文件夹中运行 sass 命令

```
COMPRESS_PRECOMPILERS = (
    ('text/x-scss', 'cd /srv/www/project/name/static && sass --scss --compass {infile} {outfile}'),
) 
```

# entity-framework - 在 M 到 N 关系中使用 InverseProperty

> ID：15559425
> 
> 赞同：0
> 
> 时间：2013-03-21T22:29:51.403
> 
> 标签：entity-framework

假设一个人可以属于多个组，一个组可以包含多个人。
一个人也可以管理几个组，一个组可以由几个人管理。

如何向这些属性添加一些属性（InverseProperty），以便它们彼此正确匹配？

```
public class Person
{
   public virtual ICollection<Group> Groups { get; set; }
   public virtual ICollection<Group> AdministratedGroups { get; set; }
}

public class Group
{
   public virtual ICollection<Person> Members { get; set; }
   public virtual ICollection<Person> Administrators { get; set; }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:42:27.890

好吧，最后很明显：

```
public class Person
{
   [InverseProperty("Members")]
   public virtual ICollection<Group> Groups { get; set; }
   [InverseProperty("Administrators")]
   public virtual ICollection<Group> AdministratedGroups { get; set; }
}

public class Group
{
   [InverseProperty("Groups")]
   public virtual ICollection<Person> Members { get; set; }
   [InverseProperty("AdministratedGroups")]
   public virtual ICollection<Person> Administrators { get; set; }
} 
```

# php - VB6-- 网络浏览器中的完整文件选择

> ID：15559433
> 
> 赞同：0
> 
> 时间：2013-03-21T22:30:37.133
> 
> 标签：php, vb6, browser

如何通过 Visual Basic 6 Webbrowser 控件在 PHP 表单中填写 FileSelection？我想发送一个文件上传到网站上，我必须手动更改页面中的文件，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:47:48.337

我创建了一个简单的示例项目，它似乎可以满足您的需求。

```
'1 form with :
'    1 webbrowser control : name=WebBrowser1
'    1 command button : name=Command1

Option Explicit

Private Sub Command1_Click()
  WebBrowser1.Navigate "www.dailygammon.com/bg/login"
End Sub

Private Sub Form_Resize()
  Dim sngWidth As Single, sngHeight As Single
  Dim sngCmdHeight As Single
  sngCmdHeight = 315
  sngWidth = ScaleWidth
  sngHeight = ScaleHeight - sngCmdHeight
  WebBrowser1.Move 0, 0, sngWidth, sngHeight
  Command1.Move 0, sngHeight, sngWidth, sngCmdHeight
End Sub

Private Sub WebBrowser1_DocumentComplete(ByVal pDisp As Object, URL As Variant)
  Dim strName As String
  Dim retVal
  strName = "your name"
  retVal = WebBrowser1.Document.GetElementsByName("login")
  retVal.Value = strName
End Sub 
```

我以前从来没有玩过这个，所以可能有很多可以改进的地方。例如，其中的变量类型`retVal`是`Variant`now。

# python - 如何重建金字塔三角形？

> ID：15559435
> 
> 赞同：1
> 
> 时间：2013-03-21T22:30:48.527
> 
> 标签：python, recursion

我必须编写一个*递归*函数`asterisk_triangle`，它接受一个整数，然后返回一个由那么多行组成的星号三角形。

例如，这是一个 4 行星号三角形。

```
 *
    **
   ***
  **** 
```

我试过这个功能：

```
def asterix_triangle(depth):
            rows = [ (depth-i)*' ' + i*2*'*' + '*'   for i in range(depth-1) ]
            for i in rows:
            print i 
```

以及以下功能：

```
def asterisk_triangle(rows=n):
    pyramid_width = n * 2
    for asterisks in range(1, pyramid_width, 2):
        print("{0:^{1}}".format("*" * asterisks, pyramid_width)) 
```

两者都没有奏效。我应该`tests.py`测试这些功能，但我得到了错误，例如

```
Traceback (most recent call last):
  File "C:\Users\akumaukpo\Documents\CISC 106\LAB05\lab05 _test.py", line 19, in <module>
    from lab05 import *
  File "C:\Users\akumaukpo\Documents\CISC 106\LAB05\lab05.py", line 22
    print i
        ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:36:17.913

块中的每个语句必须从块的开头至少缩进一个空格。代码中的 print 语句没有相对于`for`它包含的块缩进，这就是你有错误的原因。

试试这个：

```
def asterix_triangle(depth):
        rows = [ (depth-i)*' ' + i*'*' + '*'   for i in range(depth) ]
        for i in rows:
            print i 
```

产生：

```
>>> asterix_triangle(4)
    *
   **
  ***
 **** 
```

编辑：

我刚刚意识到你想要的输出是三角形的两半。如果是这样，只需通过在字符串的右侧添加相同的内容来镜像字符串：

```
def asterix_triangle(depth):
        rows = [ (depth-i)*' ' + i*'*' + '*' + i*'*'  for i in range(depth) ]
        for j in rows:
            print j 
```

输出：

```
>>> asterix_triangle(4)
    *
   ***
  *****
 ******* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T22:33:54.920

如果你需要递归地做一个金字塔，你可能需要做这样的事情。

```
def asterix_triangle(i, t=0):
    if i == 0:
        return 0
    else:
        print ' ' * ( i + 1 ) + '*' * ( t * 2 + 1)
        return asterix_triangle(i-1, t + 1)

asterix_triangle(5) 
```

这个想法是你使用两个变量。一种是`i`每次调用函数时减去一次，用于结束循环。另一个变量用于增加增量。然后，您可以使用`i`打印空格`t`数和星数。

**输出将是：**

```
 *
     ***
    *****
   *******
  ********* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-30T07:57:01.480

```
for i in range(10):
print((' '*(10-i-1))+(('*')*((2*i)-1))) 
```

[输出如链接所示](https://i.stack.imgur.com/wBBYp.jpg)

# html - 相对 div 内绝对 div 的高度

> ID：15559436
> 
> 赞同：3
> 
> 时间：2013-03-21T22:30:49.033
> 
> 标签：html, css, height, positioning

我在相对 div 中有一个绝对 div，我想让它具有固定尺寸。我的问题是高度被忽略了。

这是我的html结构：

```
<div id="wrap">
    <div>
        <h1>test</h1>
    </div>
    <div id="swipe">
        <br/>
    </div>
</div> 
```

这是我的CSS：

```
body {
    background-color: #7ECEFD;

    margin: 0;
    padding: 0;
}

#wrap {
    width: 100%;
    margin: auto;
    overflow: hidden;
    position: relative;
}

#swipe {
    background-color: white;    
    position: absolute;
    top:0;
    left:10px;
    width:100%;
    height: 500px; 
} 
```

为什么？我怎样才能用css解决它？任何其他技巧（jquery）？

[http://jsfiddle.net/nkint/XQzJf/](http://jsfiddle.net/nkint/XQzJf/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:35:34.620

它`500px`很高，但由于`overflow: hidden`on ，大部分都被隐藏了`#wrap`。您需要删除它或使其足够大以包含`#swipe`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:01:46.903

```
html, body, #wrap {
   height: 100%;
} 
```

# proof - 如何证明以下算法的正确性？

> ID：15559438
> 
> 赞同：2
> 
> 时间：2013-03-21T22:30:58.723
> 
> 标签：proof, proof-of-correctness

考虑以下算法 min ，它将列表 x,y 作为参数并返回 x 和 y 联合中的第 z 个最小元素。前置条件：X 和 Y 是按升序排列的整数列表，并且它们是不相交的。

注意它的伪代码，所以索引从 1 而不是 0 开始。

```
Min(x,y,z):
    if z = 1:
        return(min(x[1]; y[1]))
    if z = 2:
        if x[1] < y[1]:
            return(min(x[2],y[1]))
        else:
            return(min(x[1], y[2]))

q = Ceiling(z/2) //round up z/2

if x[q] < y[z-q + 1]:
    return(Min(x[q:z], y[1:(z - q + 1)], (z-q +1)))
else:
    return(Min(x[1:q], B[(z -q + 1):z], q)) 
```

我可以证明它终止，因为 z 不断减少 2 并且最终会达到基本情况之一，但我无法证明部分正确性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T13:51:51.227

您的代码不正确。

考虑以下输入：

```
x = [0,1]
y = [2]
z = 3 
```

然后你得到`q = 2`and，在后面的`if`子句中，访问`y[z-q+1]`，即`y[2]`。这是一个数组边界违规。

# java - 不可变对象的休眠组件映射

> ID：15559439
> 
> 赞同：5
> 
> 时间：2013-03-21T22:30:59.500
> 
> 标签：java, hibernate

我有一个不可变对象，它是使用组件映射的 Hibernate 持久对象的成员。例如，`PinDrop`对应于一个表，该表具有一个不可变类型的字段`Point`：

```
public class PinDrop {
    private String name;
    private Point location;
    // Getters and setters for name and location
}

// Immutable Point
public class Point {
    private final double x;
    private final double y;
    // Getters for x and y, no setters
} 
```

在我的`PinDrop.hbm.xml`：

```
<property name="name" column="name" type="string"/>
<component name="location" class="Point>
    <property name="x" column="location_x" type="double"/>
    <property name="y" column="location_y" type="double"/>
</component> 
```

这是行不通的，因为在运行时 Hibernate 抱怨`Point`没有用于`x`and的设置器`y`。有没有办法将不可变对象用作 Hibernate 持久对象的组件？

**后续**：我没有使用注解，而是`hbm.xml`. `mutable`上和中`immutable`的有效属性都不是。`component``property``hbm.xml`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T22:54:47.907

你可以告诉 hibernate 使用字段访问（`access=field`你的 hbm 中的属性），所以 hibernate 不会抱怨缺少访问器。

Hibernate 使用反射来修改最终字段，因此它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T23:30:53.637

Hibernate 并不喜欢不可变对象。您最好的选择是

*   使用不使用`final`关键字但没有设置器的伪不可变对象，然后告诉 Hibernate 通过字段设置值。
*   让休眠填充可变构建器对象，然后将其属性复制到适当的不可变对象中。不幸的是，这意味着每个 BO/DTO 都有两个类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T22:40:36.710

您是否尝试过[@Immutable](http://docs.jboss.org/hibernate/stable/annotations/api/org/hibernate/annotations/Immutable.html)注释？

> 将实体或集合标记为不可变。没有注释意味着元素是可变的。
> 
> 应用程序可能不会更新不可变实体。对不可变实体的更新将被忽略，但不会引发异常。@Immutable 只能用于根实体。
> 
> @Immutable 放置在集合上使集合不可变，这意味着不允许对集合进行添加和删除。在这种情况下会引发 HibernateException。

据我所知，在 *.hbm.xml 中使表不可变，`mutable="false"`属性可以提供帮助。

# perl - Perl 打印数组

> ID：15559440
> 
> 赞同：0
> 
> 时间：2013-03-21T22:31:15.070
> 
> 标签：perl

我有这样的代码：

```
@VAR1 = {
      'ID' => '1',
      'Name' => '"ABC"'
    },
    {
      'ID' => '2',
      'Name' => '"EFG"'
    }; 
```

我正在使用它，如下所示：

```
my @Var2 = ({
              'A' => "B",
              'C' => "D",
              'E' => \@Var1
              },
              {
              'A1' => "B1",
              'C1' => "D1",
              'E' => \@Var1
              }); 
```

所以当我在 AVar2 上做一个 Dumper 时，它是这样的：

```
$VAR1 = {
      'A' => 'B',
      'C' => 'D',
      'E' => [
                  {
                    'ID' => '1',
                    'Name' => '"ABC"'
                  },
                  {
                    'ID' => '2',
                    'Name' => '"EFG"'
                  };
             ]
    };

$VAR2 = { 'A' => 'B',
      'C' => 'D',
      'E' => $VAR1->{'E'}
    }; 
```

为什么在第二种情况下不打印。虽然它首先打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:49:21.773

看起来你在做

```
print(Dumper(@Var2)); 
```

当正确的用法是

```
local $Data::Dumper::Purity = 1;
print(Dumper(\@Var2)); 
```

这输出

```
$VAR1 = [
          {
            'A' => 'B',
            'C' => 'D',
            'E' => [
                     {
                       'ID' => '1',
                       'Name' => '"ABC"'
                     },
                     {
                       'ID' => '2',
                       'Name' => '"EFG"'
                     }
                   ]
          },
          {
            'A1' => 'B1',
            'E' => [],
            'C1' => 'D1'
          }
        ];
$VAR1->[1]{'E'} = $VAR1->[0]{'E'}; 
```

以上确实准确地重建了您的数据结构。你似乎期待

```
$VAR1 = [
          {
            'A' => 'B',
            'C' => 'D',
            'E' => [
                     {
                       'ID' => '1',
                       'Name' => '"ABC"'
                     },
                     {
                       'ID' => '2',
                       'Name' => '"EFG"'
                     }
                   ]
          },
          {
            'A1' => 'B1',
            'E' => [
                     {
                       'ID' => '1',
                       'Name' => '"ABC"'
                     },
                     {
                       'ID' => '2',
                       'Name' => '"EFG"'
                     }
                   ],
            'C1' => 'D1'
          }
        ]; 
```

但这并不等同于你所拥有的。在你原来的结构中，

*   `$Var2[0]{E}`并且`$Var2[1]{E}`都是对同一个数组的引用
*   `$Var2[0]{E}[0]`并且`$Var2[1]{E}[0]`都是对同一个哈希的引用
*   `$Var2[0]{E}[1]`并且`$Var2[1]{E}[1]`都是对同一个哈希的引用

在您的预期输出中，

*   `$Var2[0]{E}`并且`$Var2[1]{E}`是对不同数组的引用
*   `$Var2[0]{E}[0]`并且`$Var2[1]{E}[0]`是对不同哈希的引用
*   `$Var2[0]{E}[1]`并且`$Var2[1]{E}[1]`是对不同哈希的引用

你可以得到你想要使用的输出

```
local $Data::Dumper::Deepcopy = 1; 
```

但如果这样做，您转储的数据结构将与您的实际数据结构不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:38:36.703

[http://perldoc.perl.org/Data/Dumper.html](http://perldoc.perl.org/Data/Dumper.html)

> Data::Dumper 将对转储值时遇到的所有引用进行编目。交叉引用（以 perl 语法中的子结构名称的形式）将插入所有可能的点，保留原始值集中的任何结构相互依赖性。结构遍历是深度优先的，并且按照从第一个提供的值到最后一个提供的值的顺序进行。

您可以禁用它：

> $Data::Dumper::Deepcopy 或 $OBJ->Deepcopy([NEWVAL]) 可以设置为布尔值以启用结构的深层复制。只有在绝对必要时才会进行交叉引用（即打破引用循环）。默认值为 0。

# php - 我可以在 zend 框架 2 的动作控制器中渲染视图而不返回它吗？

> ID：15559441
> 
> 赞同：7
> 
> 时间：2013-03-21T22:31:23.513
> 
> 标签：php, zend-framework2

现在我这样做了：

```
public function indexAction() {
    ...
    $view = new ViewModel(array(
        'foo' => 'bar',
    ));
    return $view;
} 
```

问题是我想在 $view 渲染之后和布局渲染之前做一些事情：

```
public function indexAction() {
    ...
    $view = new ViewModel(array(
        'foo' => 'bar',
    ));
    $layout = $this->layout();

    $layout->content = $view->render();
    ...
    // here I want to do some important action
    ...
    $html = $layout->render();
    return $this->getResponse()->setContent($html);    
} 
```

但是没有方法render()。在 ZF1 中，我可以渲染视图：

```
$view = new Zend_View($data);
$html = $view->render($templateName); 
```

我怎么能在 ZF2 中做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-22T07:13:08.167

试试这个：

```
public function IndexAction()
{
    ...
    $viewRender = $this->getServiceLocator()->get('ViewRenderer');
    $html = $viewRender->render($viewModel);
    ...
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-07-17T18:40:56.033

补充答案，包括布局......

```
public function IndexAction() {
    ...
    $viewRender = $this->getServiceLocator()->get('ViewRenderer');

    $layout = new ViewModel();
    $layout->setTemplate("layout/main");
    $layout->setVariable("content", $viewRender->render($viewModel));

    $html = $viewRender->render($layout);
    ...
} 
```

# angularjs - AngularJS - 如何以编程方式创建一个新的、隔离的范围？

> ID：15559442
> 
> 赞同：83
> 
> 时间：2013-03-21T22:31:28.030
> 
> 标签：angularjs, angularjs-scope

我想用 Angular.factory 创建一个 AlertFactory。我定义了一个 html 模板，如下所示

```
var template = "<h1>{{title}}</h1>"; 
```

标题由调用控制器提供，应用如下

```
var compiled = $compile(template)(scope);
body.append(compiled); 
```

那么，如何将隔离范围从控制器传递到工厂？我在控制器中使用跟随代码

```
AlertFactory.open($scope); 
```

但是 $scope 是全局控制器范围变量。我只想通过标题属性为工厂传递一个小范围。

谢谢你。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-03-22T00:48:11.187

您可以手动创建新范围。

如果您注入它，您可以创建一个新的范围`$rootScope`，或者只是从您的控制器范围中创建一个新的范围 - 这无关紧要，因为您将使其隔离。

```
var alertScope = $scope.$new(true);
alertScope.title = 'Hello';

AlertFactory.open(alertScope); 
```

这里的关键是传递`true`to `$new`，它接受一个参数 for `isolate`，这避免了从父级继承范围。

可以在以下位置找到更多信息： [http ://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$new](http://docs.angularjs.org/api/ng.$rootScope.Scope#$new)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-22T04:37:49.227

如果您只需要插值，请使用[$interpolate](http://docs.angularjs.org/api/ng.%24interpolate)服务而不是 $compile，然后您将不需要范围：

```
myApp.factory('myService', function($interpolate) {
    var template = "<h1>{{title}}</h1>";
    var interpolateFn = $interpolate(template);
    return {
        open: function(title) {
            var html = interpolateFn({ title: title });
            console.log(html);
            // append the html somewhere
        }
    }
}); 
```

测试控制器：

```
function MyCtrl($scope, myService) {
    myService.open('The Title');
} 
```

[小提琴](http://jsfiddle.net/mrajcok/ND5kV/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-24T05:03:03.490

以下是步骤：

1.  通过使用将您的 HTML 添加到 DOM`var comiledHTML = angular.element(yourHTML);`
2.  如果需要，请创建一个新范围`var newScope = $rootScope.$new();`
3.  调用 $comile(); 返回链接函数的函数`var linkFun = $compile(comiledHTML);`
4.  通过调用 linkFun 绑定新范围`var finalTemplate = linkFun(newScope);`
5.  将 finalTemplate 附加到您的 DOM `YourHTMLElemet.append(finalTemplate);`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-07T22:52:19.017

看看我的 plunkr。我正在以编程方式生成带有渲染指令的小部件指令。

[https://plnkr.co/edit/5T642U9AiPr6fJthbVpD?p=preview](https://plnkr.co/edit/5T642U9AiPr6fJthbVpD?p=preview)

```
angular
  .module('app', [])
  .controller('mainCtrl', $scope => $scope.x = 'test')
  .directive('widget', widget)
  .directive('render', render)

function widget() {
  return {
    template: '<div><input ng-model="stuff"/>I say {{stuff}}</div>'
  }
}

function render($compile) {
  return {
    template: '<button ng-click="add()">{{name}}</button><hr/>',
    link: linkFn
  }

  function linkFn(scope, elem, attr) {
    scope.name = 'Add Widget';
    scope.add = () => {
      const newScope = scope.$new(true);
      newScope.export = (data) => alert(data);
      const templ = '<div>' +
                      '<widget></widget>' +
                      '<button ng-click="export(this.stuff)">Export</button>' +
                    '</div>';
      const compiledTempl = $compile(templ)(newScope);
      elem.append(compiledTempl);
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T03:33:01.827

我假设当您谈论隔离范围时，您正在谈论指令。

这是一个如何做到这一点的例子。 [http://jsfiddle.net/rgaskill/PYhGb/](http://jsfiddle.net/rgaskill/PYhGb/)

```
var app = angular.module('test',[]);

app.controller('TestCtrl', function ($scope) {
    $scope.val = 'World';
});

app.factory('AlertFactory', function () {

    return {
        doWork: function(scope) {
            scope.title = 'Fun';    
            //scope.title = scope.val;  //notice val doesn't exist in this scope
        }
    };

});

app.controller('DirCtrl', function ($scope, AlertFactory) {
    AlertFactory.doWork($scope);  
});

app.directive('titleVal',function () {
    return {
        template: '<h1>Hello {{title}}</h1>',
        restrict: 'E',
        controller: 'DirCtrl',
        scope: {
            title: '='
        },
        link: function() {

        }
    };

}); 
```

基本上，将控制器附加到已定义隔离范围的指令。注入指令控制器的作用域将是一个隔离作用域。在指令控制器中，您可以注入您的 AlertFactory ，您可以将隔离范围传递给它。

# c# - C# - 远程访问文本文件

> ID：15559445
> 
> 赞同：0
> 
> 时间：2013-03-21T22:31:49.453
> 
> 标签：c#, windows-server-2008, text-files, remote-access

我想访问/读取驻留在远程 Windows 服务器上的文本文件。本地计算机和远程服务器没有相互连接，即它们不是网络的一部分或在域下。是否有任何可能的方法，**使用 C#**来访问和读取该文本文件的内容？

PS：远程服务器需要用户名和密码才能登录。我是服务器管理员，因此我知道这些凭据。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:50:30.787

C# 是一种编程语言。您可以实现一个 Windows 服务应用程序，该应用程序将侦听连接，然后转储您想要的任何内容。但是，在 C# 中没有任何本机实现的功能，它可以让您立即执行您所要求的操作。

只要两台机器都可以访问互联网，并且它们所在的网络将允许外部连接通过防火墙，那么网上就有一些示例可以让您朝着正确的方向前进。[例子](http://tech.pro/tutorial/704/csharp-tutorial-simple-threaded-tcp-server)。

但是请注意，如果您实现自己的服务器应用程序来通过 Internet 托管文件，那么您还必须实现自己的凭据检查机制。即使您的服务器需要身份验证，这也不会影响您的服务器应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:33:59.127

您好，感谢您的回复！我已经使用 RESTful 服务公开了远程文本文件的内容。本地计算机现在可以使用存储在该文本文件中的数据，只需导航到返回服务输出的 url。

# c++ - 降序排序的最佳方法是什么？

> ID：15559448
> 
> 赞同：0
> 
> 时间：2013-03-21T22:32:15.553
> 
> 标签：c++, sorting, stl

全部，

std::sort() 将按升序排序。有没有一种简单、方便、快捷的降序排序方法？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T22:33:20.230

如果您正在对`int`s 进行排序，例如，在 range 中`[begin, end)`：

```
std::sort(begin, end, std::greater<int>()); 
```

[`std::greater`](http://en.cppreference.com/w/cpp/utility/functional/greater)是一个适用`>`于其操作数的二元函数对象。您也可以提供一个 lambda 表达式：

```
std::sort(begin, end, [](int a, int b) { return a > b; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T22:35:19.353

编写一个函数进行比较：

```
bool comp(int a, int b)
{
    return a > b;
} 
```

然后排序，比如说，a `vector vec`，调用`sort(vec.begin(), vec.end(), comp)`

# mysql - 使用同一电子邮件批量删除用户

> ID：15559450
> 
> 赞同：0
> 
> 时间：2013-03-21T22:32:32.070
> 
> 标签：mysql, sql, phpmyadmin, bulk

我想删除所有拥有以下电子邮件地址的用户`@trash-mail.com`

我怎样才能用 SQL 做到这一点？我正在尝试这个

```
DELETE from users    
WHERE email LIKE %trash-mail.com 
```

但它不起作用，我真的需要能够删除大量帐户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:35:07.220

你忘了引号：

```
DELETE FROM users    
WHERE email LIKE '%trash-mail.com' 
```

有关条件的更多信息，请参见[http://www.techonthenet.com/sql/like.php](http://www.techonthenet.com/sql/like.php)`LIKE`。

# javascript - 淘汰赛 - 根据 observableArray 检查复选框

> ID：15559451
> 
> 赞同：1
> 
> 时间：2013-03-21T22:32:40.613
> 
> 标签：javascript, html, data-binding, checkbox, knockout.js

所以我有一个时间表列表，我需要为用户显示并显示他或她当前正在执行的时间表，并让他们可以跳上和跳下所述时间表。

我的视图模型看起来像这样

```
self = this;
self.shifts = ko.observableArray();
self.selectedShifts = ko.observableArray();

//I populate self.shifts here with a WEB API call

//Run through each shift and check if current user is on it and set checked / not checked    value for checkbox
        ko.utils.arrayForEach(self.shifts(), function(shift) {

           //Clear array
            self.usersOnShift([]);

            //Populate array with all users on the shift
            self.usersOnShift = ko.observableArray(WEB API CALL HERE);

            var userInShift = ko.utils.arrayFirst(self.usersOnShift(), function(user) {
                if (selectedUserId == user.ID) {
                    return true;
                } 
            });

            if (userInShift) {

                self.selectedShifts.push(shift.ID);
            }
        });

ko.applyBindings(self); 
```

我的 HTML 看起来像这样

```
 <div class="simple_overlay" id="shiftOverlay">
        <div class="details">

            <div data-bind="foreach: shifts">

                <div><span class="staff-initials" data-bind="text:wardName">  </span><input type="checkbox" data-bind="value: ID, checked: $root.selectedShifts"/>  </div>
            </div>
            <div>
                <a href="#" data-bind="click: updateUserOnShifts">Connect</a>
                <a href="#" data-bind="click: closeShiftDialog">Close</a>
            </div>
        </div>
    </div> 
```

我可以看到复选框的值已正确设置为相应班次的 ID。但是，我知道有问题的用户打开的班次没有被检查，我知道 selectedShifts observableArray 包含该值。

不知何故，“检查：$root.selectedShifts”调用/检查不起作用，但我知道它包含正确的值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T02:10:38.567

问题是你的值是一个整数，但是当绑定到`checkbox`元素时，它变成了一个字符串。当`checked`绑定试图在数组中查找值时，它找不到匹配项，因为它使用严格相等进行比较并且`(2 === "2")`为假。

解决此问题的最简单方法是在将值添加到数组时将它们转换为字符串：

```
self.selectedShifts.push("" + shift.ID); 
```

当然这意味着你的模型必须改变，这可能不是一个很好的解决方案。我想出了一个自定义绑定，`checkedInArray`它替换`checked`并支持任何类型的值。您可以[了解它](https://stackoverflow.com/a/14863924/1287183)，[查看它的实际效果](http://jsfiddle.net/mbest/L3LeD/)，并像这样使用它：

```
<input type="checkbox" data-bind="checkedInArray: {value: ID, array: $root.selectedShifts }" /> 
```

在 Knockout 2.3.0（仍在开发中）中将有一个新的绑定，[`checkedValue`](https://github.com/SteveSanderson/knockout/pull/875)，这将允许您在绑定中使用任何类型的值`checked`。使用该版本，您可以更新您的 HTML 以使用`checkedValue`：

```
<input type="checkbox" data-bind="checkedValue: ID, checked: $root.selectedShifts"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:45:39.873

shift.ID 是可观察的属性吗？如果是，那么您需要将其添加到数组中，如下所示：

```
self.selectedShifts.push(shift.ID()); 
```

否则，您只是将整个 observable 添加到数组中，而不是值。

# sql - 用于根据另一列更改的列值列表的 SQL

> ID：15559456
> 
> 赞同：0
> 
> 时间：2013-03-21T22:33:00.437
> 
> 标签：sql, sql-server, sql-server-2008, count, distinct

我有一个包含团队 ID 和客户 ID 的事件表。尽管两列通常具有相同的对应值，但 TeamID 可能会不时根据特定的 ClientID 更改。

我需要获取团队 ID 将更改的客户 ID 列表以及他们已更改为的团队 ID

我从

```
 SELECT ClientID AS CID 
    FROM 
    (SELECT TeamID, count(*) as Counter 
 FROM `vEvents` 
 GROUP BY `ClintID`) AS tbl WHERE Counter > 1 
```

但我想我找错树了。非常感谢任何帮助

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:53:18.847

这可以帮助你或给你的提示

```
 create table Clients (ID int identity(1,1),
                      TeamID int not null,
                      ClientID int not null,
                      LastModifiedDate datetime not null
                      )

insert Clients values
(1,1001,DATEADD(mi,-5,GETDATE())),
(2,1002,DATEADD(mi,-7,GETDATE())),
(3,1001,GETDATE())          

SELECT ClientID, TeamID
FROM Clients
WHERE ClientID in (select ClientID from Clients group by ClientID having COUNT(TeamID)>1) 
```

# python - 使用 python pexpect 让多线程处理列表

> ID：15559458
> 
> 赞同：0
> 
> 时间：2013-03-21T22:33:06.190
> 
> 标签：python, linux, multithreading, ubuntu, pexpect

我编写了一个简单的 python pexpect 脚本来 ssh 进入机器并执行操作。现在我需要对多台服务器执行此操作。我正在使用一个列表来同时使用多线程访问所有服务器。我的问题是由于所有内容都同时运行，每个线程都在相同的服务器名称上运行。有没有办法同时让每个线程只运行列出的服务器之一？

```
 #! /usr/bin/python
#Test script

import pexpect
import pxssh
import threading
import datetime

currentdate = datetime.datetime.now()
easterndate = (datetime.datetime.now() + datetime.timedelta(0, 3600))

#list of servers
serverlist = ["025", "089"]

#server number
sn = 0

ssh_new_conn = 'Are you sure you want to continue connecting'

class ThreadClass(threading.Thread):
  def run(self):

    index = 0
    sn = serverlist[index]
    print sn
    username = '[a username]'
    password = '[a password]'
    hostname = '%(sn)s.[the rest of the host url]' % locals()
    command = "/usr/bin/ssh %(username)s@%(hostname)s " % locals()
    index = index + 1
    now = datetime.datetime.now()

    print command
    p = pexpect.spawn(command, timeout=360)

    ***do some other stuff****

for i in range(len(severlist)):
  t = ThreadClass()
  t.start() 
```

[更新]我可能只是尝试使用调用子线程的父线程等来执行此操作....尽管如果多线程可以从列表或某种工作队列中工作会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:37:52.793

这个问题与“所有东西都同时运行”无关。您在函数`index = 0`的开头明确设置`run`，所以当然每个线程都在索引 0 上工作。

如果您希望每个线程处理一个服务器，只需将索引传递给每个线程对象：

```
class ThreadClass(threading.Thread):
    def __init__(self, index):
        super(ThreadClass, self).__init__()
        self.index = index
    def run(self):
        sn = serverlist[self.index]
        print sn
        # same code as before, minus the index = index + 1 bit

for i in range(len(severlist)):
    t = ThreadClass(i)
    t.start() 
```

（当然，您可能希望使用`serverlist`而不是`severlist`修复其他使您的代码无法工作的错误。）

或者，更简单地说，传递`sn`自身：

```
class ThreadClass(threading.Thread):
    def __init__(self, sn):
        super(ThreadClass, self).__init__()
        self.sn = sn
    def run(self):
        print self.sn
        # same code as last version, but use self.sn instead of sn

for sn in severlist:
    t = ThreadClass(sn)
    t.start() 
```

或者，如果您真的想使用全局变量，只需将其设为全局变量，并在其周围加锁：

```
index = 0
index_lock = threading.Lock()

class ThreadClass(threading.Thread):
    def run(self):
        global index, index_lock
        with index_lock:
            sn = serverlist[index]
            index += 1
        print sn
        # same code as first version 
```

但是，您可能需要考虑一个更简单的设计，使用池或执行程序而不是显式的工作线程和要处理的事情列表。例如：

```
def job(sn):
    print sn
    # same code as first version again

with concurrent.futures.ThreadPoolExecutor() as executor:
    executor.map(job, serverlist) 
```

这只会同时运行 4 个或 8 个或其他一些不错的“幻数”作业。这通常是你想要的。但是，如果您希望每台服务器只有一个线程，只需传递`max_workers=len(serverlist)`给`ThreadPoolExecutor`构造函数即可。

除了读取、写入、出错、调试等方面的代码要少得多之外，它还具有更多功能——例如，您可以将结果和/或异常从服务器返回到主线程。

# nginx - 如何配置 Nginx 以忽略主机名中的字母大小写？

> ID：15559460
> 
> 赞同：1
> 
> 时间：2013-03-21T22:33:19.887
> 
> 标签：nginx, case, host, capitalization, letter

如果访问者在地址中使用小写或大写，我正在尝试将我的 Nginx 服务器设置为 igonre。例如，我希望 www.mydomain.com/section 和 www.mydomain.com/Section 都指向同一个目录。

我搜索了很多，看看我是否可以通过 vhost 配置来做到这一点，但我找不到。

任何人？

我的 VHost 配置是这样的：

```
server {
## Your website name goes here.
server_name server.com;
## Your only path reference.
root /var/www/citeu;
listen 80;
client_max_body_size 40M;
## This should be in your http block and if it is, it's not needed here.
index index.php index.htm index.html;

include conf.d/drop;

    location / {
            # This is cool because no php is touched for static content
        try_files $uri $uri/ /index.php?q=$uri&$args;
    }

    location ~ \.php$ {
        fastcgi_buffers 4 256k;
        fastcgi_buffer_size 128k;
        fastcgi_intercept_errors on;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_pass unix:/dev/shm/php-fpm-www.sock;
        fastcgi_max_temp_file_size 50M;

    }

        # BEGIN W3TC Page Cache cache
location ~ /wp-content/w3tc/pgcache.*html$ {
    add_header Vary "Accept-Encoding, Cookie";
}

location ~ /wp-content/w3tc/pgcache.*gzip$ {
    gzip off;
    types {}
    default_type text/html;
    add_header Vary "Accept-Encoding, Cookie";
    add_header Content-Encoding gzip;
}
# END W3TC Page Cache cache
# BEGIN W3TC Browser Cache
gzip on;
gzip_types text/css application/x-javascript text/x-component text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon;
location ~ \.(css|js|htc)$ {
}
location ~ \.(html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml)$ {
}
location ~ \.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip)$ {
}
# END W3TC Browser Cache
# BEGIN W3TC Page Cache core
rewrite ^(.*\/)?w3tc_rewrite_test$ $1?w3tc_rewrite_test=1 last;
set $w3tc_rewrite 1;
if ($request_method = POST) {
    set $w3tc_rewrite 0;
}
if ($query_string != "") {
    set $w3tc_rewrite 0;
}
if ($http_host !~ "server.com") {
    set $w3tc_rewrite 0;
}
set $w3tc_rewrite3 1;
if ($request_uri ~* "(\/wp-admin\/|\/xmlrpc.php|\/wp-(app|cron|login|register|mail)\.php|\/feed\/|wp-.*\.php|index\.php)") {
    set $w3tc_rewrite3 0;
}
if ($request_uri ~* "(wp\-comments\-popup\.php|wp\-links\-opml\.php|wp\-locations\.php)") {
    set $w3tc_rewrite3 1;
}
if ($w3tc_rewrite3 != 1) {
    set $w3tc_rewrite 0;
}
if ($http_cookie ~* "(comment_author|wp\-postpass|wordpress_\[a\-f0\-9\]\+|wordpress_logged_in)") {
    set $w3tc_rewrite 0;
}
if ($http_user_agent ~* "(W3\ Total\ Cache/0\.9\.2\.4)") {
    set $w3tc_rewrite 0;
}
set $w3tc_ua "";
set $w3tc_ref "";
set $w3tc_ssl "";
set $w3tc_enc "";
if ($http_accept_encoding ~ gzip) {
    set $w3tc_enc _gzip;
}
set $w3tc_ext "";
if (-f "$document_root/wp-content/w3tc/pgcache/$request_uri/_index$w3tc_ua$w3tc_ref$w3tc_ssl.html$w3tc_enc") {
    set $w3tc_ext .html;
}
if ($w3tc_ext = "") {
  set $w3tc_rewrite 0;
}
if ($w3tc_rewrite = 1) {
    rewrite .* "/wp-content/w3tc/pgcache/$request_uri/_index$w3tc_ua$w3tc_ref$w3tc_ssl$w3tc_ext$w3tc_enc" last;
}
# END W3TC Page Cache core 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:41:21.530

我还找到了另一个临时解决方案。

我用了：

```
 location ~ /Folder {
        rewrite ^/([^/]*)(.*)$ /folder;} 
```

以防万一访问者想要访问我希望他访问的特定文件夹，但输入与原始文件夹不同的字母大小写。它远非完美的解决方案，但我会在弄清楚如何正确使用模块时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:49:40.037

您的问题不在于主机名，而在于位置块和文件名。

在位置块方面，您可以使用此运算符进行不区分大小写的匹配`~*`

*   [http://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)

大多数文件系统都区分大小写，因此如果您提供的文件是真实的……您可能会遇到问题。

大多数人会这样做：

*   确保一切都是小写
*   使用 try_files 文件指令失败到一个简单地重定向到一个完全小写的 url 的 php 脚本

有一个第三方库可以进行小写字符串转换（[http://wiki.nginx.org/3rdPartyModules](http://wiki.nginx.org/3rdPartyModules)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-09T12:41:17.290

以下内容对我有用，以大写或小写字母打开（ibeacons.html）

```
 location ~* /ibeacons.html {

 try_files $uri $uri/ /ibeacons.html; 
```

# ios - iOS被拒绝5次

> ID：15559463
> 
> 赞同：-2
> 
> 时间：2013-03-21T22:33:23.423
> 
> 标签：ios, crash, report, store

我现在有点没有想法。到目前为止，我已经向 AppStore 提交了 5 或 6 次 iPhone 应用程序，但除了一次之外，它总是被拒绝。我仍然想知道为什么它曾经被接受，因为我几乎没有改变以前的版本（被拒绝）。

顺便说一句：我在不同的 iPhone 5 上测试了这个应用程序，它从来没有崩溃过......

无论如何，我在理解崩溃报告时遇到问题：

```
Last Exception Backtrace:
0   CoreFoundation                  0x320483e2 0x31f86000 + 795618
1   libobjc.A.dylib                 0x39d4395e ParkingDeckDetailViewController.m:137
2   CoreFoundation                  0x32048302 0x31f86000 + 795394
3   QuartzCore                      0x33c05106 StartupViewController.m:906
4   QuartzCore                      0x33c0502e StartupViewController.m:904
5   UIKit                           0x33ebb944 0x33e54000 + 424260
6   Passau                          0x00196c88 -[AGSGPS setupFrameAndBounds:] (AGSGPS.m:678)
7   Passau                          0x00198056 -[AGSGPS consumeNewLocation:] (AGSGPS.m:928)
8   Passau                          0x00198ffa -[AGSGPS didApproximateProjectionWithGeometry:] (AGSGPS.m:1085)
9   Passau                          0x00197f16 -[AGSGPS locationManager:didUpdateToLocation:fromLocation:] (AGSGPS.m:920)
10  CoreLocation                    0x324f00d6 CityTourDetailViewController.m:234
11  CoreLocation                    0x324e7f38 TabBarViewController.m:90
12  CoreFoundation                  0x3201d920 0x31f86000 + 620832
13  CoreFoundation                  0x3201cff4 0x31f86000 + 618484
14  CoreFoundation                  0x3201c24e 0x31f86000 + 614990
15  CoreFoundation                  0x31f8f238 MapLayerCell.m:50
16  CoreFoundation                  0x31f8f0c4 JSONDataDownload.m:138
17  GraphicsServices                0x35b6e336 MapViewController.m:265
18  UIKit                           0x33eab2b4 0x33e54000 + 357044
19  Passau                          0x000e73aa main (main.m:16)
20  libdyld.dylib                   0x3a170b1c StartupViewController.m:779 
```

和崩溃的线程：

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3a237350 __pthread_kill + 8
1   libsystem_c.dylib               0x3a1adfb2 pthread_kill + 54
2   libsystem_c.dylib               0x3a1ea366 abort + 90
3   libc++abi.dylib                 0x39792dda abort_message + 70
4   libc++abi.dylib                 0x39790094 default_terminate() + 20
5   libobjc.A.dylib                 0x39d43a58 _objc_terminate() + 144
6   libc++abi.dylib                 0x39790118 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x397901b0 std::terminate() + 16
8   libc++abi.dylib                 0x39791626 __cxa_rethrow + 90
9   libobjc.A.dylib                 0x39d439b0 objc_exception_rethrow + 8
10  CoreFoundation                  0x31f8f29c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x31f8f0c4 CFRunLoopRunInMode + 100
12  GraphicsServices                0x35b6e336 GSEventRunModal + 70
13  UIKit                           0x33eab2b4 UIApplicationMain + 1116
14  Passau                          0x000fc3aa main (main.m:16)
15  libdyld.dylib                   0x3a170b1c start + 0 
```

我正在使用 ArcGIS 框架来显示地图。

那么，您能否给我一个提示，我应该在哪里锁定错误？当我阅读崩溃的线程报告时，在我看来应用程序在启动后立即崩溃了，对吗？

谢谢！

编辑：用大多数符号化的版本替换了“最后一个异常回溯”。

+

```
Thread 3 name:  Dispatch queue: com.apple.CoreLocation.ConnectionClient.0x2007a300.events
Thread 3:
0   libsystem_kernel.dylib          0x3a226e98 semaphore_timedwait_trap + 8
1   libdispatch.dylib               0x3a161c16 _dispatch_semaphore_wait_slow + 118
2   CoreLocation                    0x324e7ea4 CLClientInvokeCallback(__CLClient*, CLClientEvent, objc_object*) + 340
3   CoreLocation                    0x324eb4e2 ___CLClientCreateConnection_block_invoke_0 + 346
4   CoreLocation                    0x32521f20 __setEventHandler_block_invoke_0 + 344
5   libxpc.dylib                    0x3a27c882 _xpc_connection_mach_event + 718
6   libdispatch.dylib               0x3a163688 _dispatch_mach_msg_invoke + 120
7   libdispatch.dylib               0x3a160afa _dispatch_queue_drain + 78
8   libdispatch.dylib               0x3a16392e _dispatch_mach_invoke + 166
9   libdispatch.dylib               0x3a160afa _dispatch_queue_drain + 78
10  libdispatch.dylib               0x3a15e678 _dispatch_queue_invoke + 40
11  libdispatch.dylib               0x3a160afa _dispatch_queue_drain + 78
12  libdispatch.dylib               0x3a15e678 _dispatch_queue_invoke + 40
13  libdispatch.dylib               0x3a161610 _dispatch_root_queue_drain + 208
14  libdispatch.dylib               0x3a1617d4 _dispatch_worker_thread2 + 88
15  libsystem_c.dylib               0x3a1857ee _pthread_wqthread + 358
16  libsystem_c.dylib               0x3a185680 start_wqthread + 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:24:30.793

您的“最后一个异常堆栈跟踪”来自线程 3，它不是主线程。但是，它被扔进了 a`UIViewController`的方法中。这意味着您正在从除主线程之外的另一个线程操作您的界面，这是不正确的，并且会导致许多不同严重程度的问题。

所以你需要确保消息只发送到主线程上的视图控制器。由于`CLLocationManagerDelegate`回调发生在启动管理器的线程上，您应该执行以下操作之一：

*   `CLLocationManager`仅在主线程上启动您的 s。

*   在处理位置更新的代码中，无论是在堆栈内部`locationManager:didUpdateToLocation:fromLocation:`还是在堆栈下方的某个位置，您都应该对主队列执行 dispatch_async，并传递一个块，该块将所有消息传递给视图控制器。

# python - 为什么 peewee 在 mysql 选择查询中包含“id”列？

> ID：15559468
> 
> 赞同：12
> 
> 时间：2013-03-21T22:33:45.593
> 
> 标签：python, mysql, select, create-table, peewee

我正在尝试学习如何将 peewee 与 mysql 一起使用。

我在具有现有表的 mysql 服务器上有一个现有数据库。该表目前是空的（我现在只是在测试）。

```
>>> db = MySQLDatabase('nhl', user='root', passwd='blahblah')
>>> db.connect()

>>> class schedule(Model):
...     date = DateField()
...     team = CharField()
...     class Meta:
...             database = db

>>> test = schedule.select()
>>> test
<class '__main__.schedule'> SELECT t1.`id`, t1.`date`, t1.`team` FROM `nhl` AS t1 []
>>> test.get() 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.6/site-packages/peewee.py", line 1408, in get
    return clone.execute().next()
  File "/usr/lib/python2.6/site-packages/peewee.py", line 1437, in execute
    self._qr = QueryResultWrapper(self.model_class, self._execute(), query_meta)
  File "/usr/lib/python2.6/site-packages/peewee.py", line 1232, in _execute
    return self.database.execute_sql(sql, params, self.require_commit)
  File "/usr/lib/python2.6/site-packages/peewee.py", line 1602, in execute_sql
    res = cursor.execute(sql, params or ())
  File "/usr/lib64/python2.6/site-packages/MySQLdb/cursors.py", line 201, in execute
    self.errorhandler(self, exc, value)
  File "/usr/lib64/python2.6/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
_mysql_exceptions.OperationalError: (1054, "Unknown column 't1.id' in 'field list'") 
```

为什么 peewee 将“id”列添加到选择查询中？我的表中没有数据库中已经存在的 id 列。我只是想使用现有的表，而不是依赖 peewee 每次我想与数据库交互时都必须创建一个。这就是我认为错误所在的地方。

查询的结果应该是空的，因为表是空的，但是因为我正在学习，我只是想尝试一下代码。我感谢您的帮助。

**编辑**

基于 Wooble 和 Francis 的有益回应，我开始怀疑使用 peewee 或其他 ORM（如 sqlalchemy）对我来说是否有意义。使用 ORM 而不是仅使用 MySQLdb 在 python 中运行直接查询有什么好处？

这是我期望做的：

- 自动从各种网络服务器下载数据。大多数数据是 xls 或 csv 格式。我可以使用 xlrd 包将 xls 转换为 csv。

- 在插入/批量插入 mysql 数据库表之前解析/处理列表对象中的数据。

- 运行复杂的查询以将数据从 mysql 导出到 python 到适当的数据结构（例如列表）中，用于各种统计计算，这在 python 中而不是 mysql 中更容易完成。可以在 mysql 中完成的任何事情都将在那里完成，但我可能会在 python 中运行复杂的回归。

- 对从查询中检索到的数据运行各种图形包。其中一些可能包括使用 ggplot2 包（来自 R-project），这是一个高级图形包。所以我将涉及一些 R/Python 集成。

鉴于上述情况 - 我最好花几个小时学习 ORM/Peewee/SQLAlchemy 还是坚持使用 MySQLdb 直接查询 mysql？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T00:04:14.353

大多数简单的活动记录模式 ORM 都需要一个`id`列来跟踪对象身份。PeeWee 似乎是其中之一（或者至少我不知道有任何方法可以*不*使用 id）。如果不更改表格，您可能无法使用 PeeWee。

无论如何，您现有的表似乎设计得不是很好，因为它似乎缺少键或复合键。每个表都应该有一个关键属性——否则就不可能区分一行和另一行。

如果这些列之一是主键，请尝试按照[有关非整数主键的文档中的](http://peewee.readthedocs.org/en/latest/peewee/models.html#non-integer-primary-keys)`primary_key=True`说明添加参数

```
date = DateField(primary_key=True) 
```

如果您的主键未命名`id`，那么您必须在该表的 peewee 模型中将表的实际主键设置为“PrimaryKeyField()”类型。

您应该调查使用数据映射器模式的[SQLAlchemy 。](http://www.sqlalchemy.org)它更复杂，但也更强大。它对你的 SQL 表设计没有任何限制，事实上它在大多数情况下可以自动反映你的表结构和相互关系。（在 MySQL 中可能不太好，因为外键关系在默认表引擎中不可见。）对您来说最重要的是，它可以处理缺少键的表。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-17T15:56:08.420

如果您的主键列名称不是“id”，则应向该表模型类添加其他字段：

```
class Table(BaseModel):
    id_field = PrimaryKeyField() 
```

这将告诉您的脚本，您的表的主键存储在名为“id_field”的列中，并且该列是启用了自动增量的 INT 类型。 [这](http://peewee.readthedocs.org/en/latest/peewee/models.html#field-types-table)是描述 peewee 中字段类型的文档。

如果您想对主键字段进行更多控制，正如 Francis Avila 已经指出的那样，您应该在创建字段时使用 primary_key=True 参数：

```
class Table(BaseModel):
    id_field = CharField(primary_key=True) 
```

请参阅非整数主键文档上的[此链接](http://peewee.readthedocs.org/en/latest/peewee/models.html#non-int-pks)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-26T06:22:23.070

您必须为此模型提供 primary_key 字段。如果您的表没有单个 primary_key 字段（就像我的一样），在 Meta 中定义的[CompositeKey会有所帮助。](http://peewee.readthedocs.org/en/latest/peewee/api.html?highlight=compositekey#CompositeKey)

```
primary_key = peewee.CompositeKey('date', 'team') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T22:39:22.423

您需要使用 peewee 的 create table 方法创建实际的数据库表，然后才能调用`select()`，这将在表中创建一个 id 列。

# c# - 当前上下文中不存在名称“txtinput1”

> ID：15559473
> 
> 赞同：1
> 
> 时间：2013-03-21T22:34:05.783
> 
> 标签：c#, asp.net

[首先，我知道这个问题看起来与这里](https://stackoverflow.com/questions/1316757/cant-access-control-id-in-code-behind)的问题非常相似

但不知何故，修复建议对我不起作用。所以这里。我的 aspx 页面中有以下代码：

```
 <asp:TextBox ID="txtinput1" runat="server" Width="200px" 
       ontextchanged="txtinput1_TextChanged"></asp:TextBox> 
```

但是当我在后面的代码中尝试以下代码时：

```
 protected void Page_Load(object sender, EventArgs e)
        {
            StemService.ServiceClient myClient = new StemService.ServiceClient();
            string input = txtinput1.Text;
        } 
```

我收到错误消息，说上下文中不存在“txtinput1”。为了完成这里是我的 default.aspx [https://gist.github.com/KodeSeeker/5217410](https://gist.github.com/KodeSeeker/5217410)。

PS 我是 C#**菜鸟**，所以我可能遗漏了一些明显的东西。

编辑：Designer.cs [https://gist.github.com/KodeSeeker/5217484](https://gist.github.com/KodeSeeker/5217484)

编辑 2：Default.aspx.cs：[https ://gist.github.com/KodeSeeker/5217517](https://gist.github.com/KodeSeeker/5217517)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:53:31.340

您的 Designer.cs 似乎缺少命名空间的正确声明

```
 namespace Project3_ConsumptionApplication
 {
     ...
 } 
```

# content-management-system - 如何区分WordPress模板中的首页结构和分类页面结构？

> ID：15559474
> 
> 赞同：0
> 
> 时间：2013-03-21T22:34:15.200
> 
> 标签：content-management-system, wordpress-theming, wordpress

我在 WordPress 世界中非常新闻，我发现创建个人模板有一些困难。

我想实现一个像这样的博客（即使用 WordPress）：http: [//viralpatel.net/blogs/](http://viralpatel.net/blogs/)

我的博客必须是最简单的，并且必须只有两个列：一个用于最后的帖子，一个用于访问更多的帖子

因此，我从现有模板（名为 Coogee）开始，并将内容区域（**index.php**文件）分为**两列**：第一列显示新帖子，第二列显示阅读次数最多的帖子。

我已经使用我在列中显示的一些代码行来实现此功能，如下所示：http: [//bacsoftwareconsulting.com/blog/index.php/wordpress-cat/how-to-display-most-viewed-posts -in-wordpress-without-a-plugin/](http://bacsoftwareconsulting.com/blog/index.php/wordpress-cat/how-to-display-most-viewed-posts-in-wordpress-without-a-plugin/)

好的，现在主页看起来很适合我的意图，但我在类别页面中遇到了一些问题。

例如，如果您单击侧面裸露的类别菜单上的“通用”链接，您将获得此页面：[http ://scorejava.com/wordpress351/?cat=2](http://scorejava.com/wordpress351/?cat=2)

在teory这个页面必须只显示具有“通用”作为设置类别的文章，但这不是真的，事实上在左栏中正确显示了具有“通用”类别的文章，但在右栏中仍然保留最后5发表文章...

现在我有一个问题......似乎WordPress使用这个**index.php**文件作为所有页面内容区域的模板（除了显示使用**single.php文件的单篇文章的那个）

这对我不利，因为我希望类别页面仅显示一个大列，其中包含当前类别的最后一篇文章，如下所示：http: [//viralpatel.net/blogs/category/spring/spring3-mvc-framework/](http://viralpatel.net/blogs/category/spring/spring3-mvc-framework/)

正如您在此博客中看到的，主页中有更多列，但类别页面只有一列

我会知道：

1.  **是否存在为分类页面定义其他结构（不同于用于主页文章内容的 index.php 文件）的方法？

2.  如果我不能为类别页面使用其他结构，因此我必须对每个类别内容页面使用相同的 index.php 文件....有一种方法仅在访问者在时才显示第二列主页，如果他在类别页面中，则不显示（如果访问者在 pge 中，则不显示：http://scorejava.com/wordpress351/ [?](http://scorejava.com/wordpress351/) **cat=2**

或者你有其他解决方案吗？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:28:14.947

如果 wordpress 代码找不到 category.php，那么它将使用 index.php 文件。index.php 就像备用文件。

类别的层次结构如下

```
1> category-slug.php (Note: available with Version 2.9)
2> category-ID.php
3> category.php
4> archive.php
5> index.php 
```

也就是说，如果您没有 category-slug.php（比如说 category-news.php），WordPress 将检查 category-ID.php（如 category-6.php），依此类推。

所以我建议您创建一个 category-slug.php 文件（其中 slug 将是您的类别的 slug）。

有关更多信息，请查看此链接。 [http://codex.wordpress.org/Category_Templates](http://codex.wordpress.org/Category_Templates)

# django - ModelMultipleChoiceField 传递 request.user

> ID：15559477
> 
> 赞同：1
> 
> 时间：2013-03-21T22:34:37.263
> 
> 标签：django, django-forms

我想`forms.ModelMultipleChoiceField`在表格中使用。我知道它需要一个查询集，但是我将使用的查询集采用我通常使用 request.user 在视图中传递的参数用户。但是这是一种形式，我如何传递 request.user？我需要吗？

```
Entry.objects.filter(request.user) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:47:36.577

您应该覆盖表单的 init 方法：

```
class MyForm(forms.ModelForm):

    class Meta:
        model = Entry

    def __init__(self, user=None, *args, **kwargs):
        super(MyForm, self).__init__(*args,**kwargs)
        if user is not None:
            form_choices = Entry.objects.filter(user)
        else:
            form_choices = Entry.objects.all()

        self.fields['my_mfield'] = forms.ModelMultipleChoiceField(
                                       queryset=form_choices
                                   ) 
```

在您看来，是时候实例化表​​单了：

```
form = MyForm(request.user) 
```

或者

```
form = MyForm() 
```

# testing - 使用测试帐户时使用 iOS SDK 获取“无法发布到 Facebook”

> ID：15559479
> 
> 赞同：3
> 
> 时间：2013-03-21T22:34:48.717
> 
> 标签：testing, ios6, facebook-ios-sdk, uiactivityviewcontroller, slcomposeviewcontroller

尝试使用`Facebook`从应用程序生成的测试帐户发布时`iOS 6`，`UIActivityViewController`或者`SLComposeViewController`我收到错误弹出消息`"Cannot Post To Facebook - The post cannot be sent because the connection to Facebook failed"`。我在 iPhone 和模拟器上都看到了这一点。

使用`iOS API`真实的 Facebook 帐户可以正常工作。

使用`Facebook iOS App`或时，测试帐户工作正常`web interface.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T09:19:26.750

Facebook 不允许背靠背发布相同的内容。但是这种情况不是由 SLComposeViewController 处理的。它会将结果作为 SLComposeViewControllerResultDone 传递，并通过您传递一条错误消息

> 无法发布到 Facebook - 无法发送帖子，因为与 Facebook 的连接失败。

# php - 将 PHP 变量传递给 JavaScript 函数

> ID：15559481
> 
> 赞同：0
> 
> 时间：2013-03-21T22:34:52.833
> 
> 标签：php, javascript

我有以下代码：

```
FB.getLoginStatus(function (response) {
    if (response.status === "connected") {
        FB.api("me/bookvote:download", "post", {

        }, //Missing a , here? 
```

但是，我仍然得到：

```
 Uncaught SyntaxError: Unexpected identifier 
 for  book: "<?php echo "http://mysite.xom/auction_details.php?name=$item_details["name"]&auction_id=$item_details["auction_id"]";?>", 
```

我的 php 变量到 JavaScript 可能有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:37:06.013

将 { } 包裹在字符串中的数组项周围，例如`{$item_details["name"]}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:37:32.653

不再支持魔术引号。改变

`book: "<?php echo "http://mysite.xom/auction_details.php?name=$item_details["name"]&auction_id=$item_details["auction_id"]";?>",`

至

`book: "<?php echo "http://mysite.xom/auction_details.php?name=" . $item_details["name"] . "&auction_id=" . $item_details["auction_id"];?>",`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T22:38:23.780

您没有在 PHP 代码中正确连接：

```
FB.getLoginStatus(function (response) {
    if (response.status === "connected") {
        FB.api("me/bookvote:download", "post", {
            book: "<?php echo 'http://mysite.xom/auction_details.php?name='. $item_details['name'] . '&auction_id=' . $item_details['auction_id']; ?>",
            fb:explicitly_shared = "true" //? Is syntactically valid but creates a global
        }, 
```

*为了便于阅读，我将 PHP 代码中的双引号替换为单引号。*

# python - 找到 2 个 3 位数字乘法的最大回文数限制

> ID：15559490
> 
> 赞同：0
> 
> 时间：2013-03-21T22:35:30.900
> 
> 标签：python, windows, memory

为什么下面的代码停在回文值：**580085**，而问题的正确答案是**906609**这个乘法的结果：993*913

```
 #!/usr/bin/env python
    # Find the largest palindrome made from the product of two 3-digit numbers.

    # Reverse algorithm
    def flipNumber( number ):
        nmbList     = list(str(number))

        i           = len( nmbList )
        reverseList = list()

        # reverse the list
        for x in nmbList:
            reverseList.append( nmbList[i-1] )
            i -= 1

        # join list items to one number & cast it to integer
        return int(''.join(reverseList))

    # Figure out if numbers are palindrome
    def isPalindrome( number ):
        return number == flipNumber( number )

    def multiplyRun(  ):
        for i in range( 100, 999 ):
            for y in range( 100, 999 ):
                if isPalindrome( i * y ):
                    maxPalind = i * y

        return maxPalind

    # simple tests
    # print( flipNumber( 90819 ) )
    # print( isPalindrum( 9009, 9009 ) )
    # print( isPalindrum( 9109, 9009 ) )
    # print( isPalindrum( 9009, 9019 ) )
    # print( isPalindrum( 9019, 9019 ) )
    # print( isPalindrum( 9119, 9119 ) )

    print(multiplyRun(  )) 
```

如果我在第二个 for 循环中将第二个 100 更改为 600（或更高），我会得到正确的结果。真是令人难以置信，因为这些嵌套循环应该跨越所有范围......我做错了什么！？（可能是我没有看到的非常愚蠢的东西..）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:39:46.303

你没有验证你有一个更大的回文。

580085 是 995 * 583。所以如果你从 600 开始你不会发现这个，但它低于理想的解决方案，并且比实际解决方案更高。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T22:58:54.677

这是找到回文的更好方法：

```
def ispal(n): 
    return str(n)==str(n)[::-1] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T22:47:57.077

正如 Guvante 所说，您正在查看两个因素（995 和 583）是否更大，而不是最终回文是否更大。

正确的代码是：

```
def multiplyRun(  ):
    for i in range( 100, 999 ):
        for y in range( 100, 999 ):
            if isPalindrome( i * y ):
                if i * y > maxPalind:
                    maxPalind = i * y

    return maxPalind 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-02T14:57:53.900

我认为没有蛮力的解决方案。

```
public long solveBestSolution(int nbChiffre) 
{
long chiffreMax = (long)Math.pow(10, nbChiffre);    
// Tip 1 : 111 * 111 is a palindrome
long chiffreMin = 1111111111111111111L % chiffreMax;
long max = chiffreMin * chiffreMin -1;

    // Tip2 : Take j >= i
    for (long i = chiffreMax - 1 ; i >= chiffreMin; i--) {
        for (long j = chiffreMax - 1; j >= i; j--) {
            long res = j * i;
            if(res > max)
            {
                if(this.checkPalindrome(res))
                {
                    max = res;
                }
            }
            else
            {
                // Tip 3
                break;
            }
        }
    }

    return max;
} 
```

# php - 如何检查字符串是否仅包含 1 个相同的数字

> ID：15559492
> 
> 赞同：2
> 
> 时间：2013-03-21T22:35:38.597
> 
> 标签：php, string, phone-number

我有一个 Call Me Back 表格，它会向我发送一个想要回电的人的电话号码。今天我收到了“88888888”的表格，而不是真实的电话号码。

如何检查字符串是否包含 1 和相同的数字，连续？连续的相同数字不得超过 4 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:14:29.970

要检查字符串是否只包含**一个**重复的整数，字符串 -> 数组，请检查唯一计数是否为 1。

```
<?php

$string  = "88888888"; 

$array = array_unique( str_split( $string ) );

$result = $array;

if( count($result) === 1 ) {
    echo "Same number repeated in string";
}else{
    echo "More than 1 number found in string";
}

?> 
```

-编辑-

优化：`for`由于@Uberfuzzy 的评论删除了循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:22:11.680

```
$number_string = (string)$number_string;
return strlen($number_string) > 0 && str_repeat($number_string[0], strlen($number_string)) === $number_string; 
```

# javascript - javascript regex 如何匹配以下内容？

> ID：15559501
> 
> 赞同：0
> 
> 时间：2013-03-21T22:36:30.100
> 
> 标签：javascript, regex

我只想匹配那些说：

给定 I 字符串，我想要一些能够检测与以下“TERMINATE:”模式匹配的单词+任意数量的随机字母或数字的单词：

```
"VIRUS:XPA"
"VIRUS:IDI" 
```

然后该函数应返回“true”以指示只有病毒。

但如果字符串如下：

```
"ANM|SDO|FSD:SOS|VIRUS:XPA"
"ANM:SOS|SDO|FSD:SOS|VIRUS:XLS"
"VIRUS:XLS|ANM:SOS|SDO|FSD:SOS|VIRUS:XPL"
"VIRUS:XLS|ANM:SOS" 
```

然后该函数应返回“false”以指示没有病毒，或者病毒被屏蔽。

这可以用 javacsript 中的单个正则表达式来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:38:40.483

你的意思是这样的？

```
var isVirus = /^VIRUS\:\w*$/.test(str) 
```

# notepad++ - Notepad++ 中的质量交叉引用

> ID：15559504
> 
> 赞同：0
> 
> 时间：2013-03-21T22:36:54.290
> 
> 标签：notepad++

我有一个包含 20,000 个域名的 txt 文件 (A.txt)，每行一个。我有另一个 txt 文件 (B.txt)，其中包含一起编译的数千条 Whois 记录。我想看看 B.txt 中没有引用 A.txt 中的哪些域。一件一件地做这件事很简单，但我怎么能批量做呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:35:53.427

您可以将文件**A.txt**编辑为具有样式的行，将`example.com A other stuff`文件**B.txt**编辑为具有表单的行`example.com B other stuff`。然后将这两个文件排序在一起。接下来运行 Notepad++ 正则表达式替换，搜索`^([^ ]+) A .*\r\n(\1 B )`并替换为`\2`. 效果是任何与**B.txt**匹配的**A.txt**行都被删除，留下**B.txt**行。如果有多个**A.txt**行与一个**B.txt**匹配，则运行替换两次或更多次，直到没有行被替换。最后，删除**B.txt**行（使用正则表达式查找并标记要查找的行**********`^([^ ]+) B`然后删除带书签的行）留下不匹配的`A.txt`行。**********

 ******不知道源文件 A.txt 和 B.txt 的格式我不能建议使用正则表达式将 URL 后跟 A 或 B 放在行首。******

# c++ - 创建小部件的指南

> ID：15559506
> 
> 赞同：0
> 
> 时间：2013-03-21T22:36:57.497
> 
> 标签：c++, qt, widget

我想以与功率计中的机械计数器类似的方式将一些值显示到小部件中。到目前为止，我只编写了一个函数来将总值拆分为与所需位置对应的单个数字，它看起来像这样：

```
 unsigned long value; // variable holding the value to be displayed

    ....... get the actual value

    int firstPosition  = value % 10;             // 0-9 
    int secondPosition = int(value*0.1) % 10;    // 0 - 9 * 10
    int thirdPosition  = int(value*0.01) % 10;   // 0 - 9 * 100
    int fourthPosition = int(value*0.001) % 10;  // 0 - 9 * 1000
    int fifthPosition  = int(value*0.0001) % 10; // 0 - 9 * 10000 
```

现在的实际问题是，如何执行实际动画才能获得与物理设备类似的行为？有没有人做过类似的事情？

请注意，我使用的是 Qt 库，以防万一。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:53:49.367

[请参阅http://qt-project.org/doc/qt-5.0/qtwidgets/widgets-analogclock.html](http://qt-project.org/doc/qt-5.0/qtwidgets/widgets-analogclock.html)上的模拟时钟教程

一秒定时器用于通过调用来为时钟设置动画`update()`。

在`paintEvent()`小部件期间绘制当前时间。

# c# - 捕获数据库异常

> ID：15559508
> 
> 赞同：0
> 
> 时间：2013-03-21T22:37:05.310
> 
> 标签：c#, web-services, exception

所以我正在设计一个*网络服务*，当然；我需要这个*服务*来自动写入*数据库*。这很简单；但显然*Sql*有玩不好的倾向。

在进行故障排除时，这几乎是一场噩梦，更不用说通过*Web 服务*进行调试会使它更加成为一场噩梦。

所以我上网查了一下，偶然发现了一篇关于 Stack Overflow 的文章，里面谈到了一个*SqlHelper 类*，它基本上有很多这样的列表：

```
public static bool IsDuplicateId(SqlException sex)
{
    return (sex.Number == 2601);
} 
```

这样实现会很乏味，因为您必须调用所有这些*方法*。然而，有人回答说：

```
switch (e.Number)
    case 2601:
         // Do Something
         break;
    default:
        throw; 
```

所以我想为什么不创建一个*类*来处理大多数这些可能的错误。考虑到这个特定的实现：

```
public class SqlExceptionHelper
{
    public SqlExceptionHelper(SqlException sqlException)
    {
        // Do Nothing.
    }

    public static string GetSqlDescription(SqlException sqlException)
    {
        switch (sqlException.Number)
        {
             case 21:
                 return "Fatal Error Occurred: Error Code 21.";
             case 53:
                 return "Error in Establishing a Database Connection: 53.";
             default
                 return ("Unexpected Error: " + sqlException.Message.ToString());
         }
     }
} 
```

所以我的思考过程是我有一个可以重用的*类来检测一些常见的错误；*在其他类中，我`using SomeNamespace.ExceptionHelpers;`可以简单地实现类似这样的东西：

```
public class SiteHandler : ISiteHandler
{
     public string InsertDataToDatabase(Handler siteInfo)
     {
          try
          {
              // Open Database Connection, Run Commands, Some additional Checks.
          }
          catch(SqlException exception)
          {
             SqlExceptionHelper errorCompare = new SqlExceptionHelper(exception);
             return errorCompare.ToString();
          }
     }
} 
```

所以本质上它应该处理所有那些可爱的异常；但我开始想这不好。 **将此类异常作为回报返回好吗？这本身就很糟糕吗？或者这真的是通过服务处理此类异常捕获的最佳方式吗？**

所以我的问题归结为：

> ```
>  Is this the best way to handle error catching through a Service? 
> ```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:46:38.417

理想情况下，Web 服务应该返回相关的 HTTP 状态代码，而不是异常。这些通常是 200 的（对于 OK）、400 的（对于用户可以自己修复的错误）或 500 的（对于服务器错误 - 这些也可以自动重试）。

根据您返回的数据库错误，您可以将其转换为适当的 HTTP 状态代码。如果您认为对用户有帮助，可以将错误代码的描述设置为异常消息。

# c# - 从对象列表创建多维数组

> ID：15559510
> 
> 赞同：4
> 
> 时间：2013-03-21T22:37:08.663
> 
> 标签：c#, .net, linq

我有一个“条目”对象列表（每个对象都有一个 ID），并希望通过按 ID 拆分它们来创建一个二维数组：

```
class Entry
{
    public int ID { get; set; }
    public int value { get; set; }

    public Entry(int id, int value)
    {
        this.ID = id;
        this.value = value;
    }
} 
```

人口：

```
 List<Entry> entries = new List<Entry>();
        entries.Add(new Entry(0, 20));
        entries.Add(new Entry(1, 20));
        entries.Add(new Entry(1, 25));
        entries.Add(new Entry(2, 21));
        entries.Add(new Entry(2, 23)); 
```

我需要建立一个按 ID 拆分的条目的多维列表。以下代码构建数组：

```
 List<Entry> entriesZero = new List<Entry>();
        entriesZero.Add(new Entry(0, 20));

        List<Entry> entriesOne = new List<Entry>();
        entriesOne.Add(new Entry(1, 20));
        entriesOne.Add(new Entry(1, 25));

        List<Entry> entriesTwo = new List<Entry>();
        entriesTwo.Add(new Entry(2, 21));
        entriesTwo.Add(new Entry(2, 23));

        List<List<Entry>> entriesByID = new List<List<Entry>>();
        entriesByID.Add(entriesZero);
        entriesByID.Add(entriesOne);
        entriesByID.Add(entriesTwo); 
```

完成这样的事情的最佳方法是什么？我可以使用多个 foreach 循环来做到这一点，但我想知道 LINQ 中是否有更好的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T22:39:09.053

你肯定需要它是一个按 ID 分组的*列表吗？*[查找](http://msdn.microsoft.com/en-us/library/bb460184.aspx)将非常容易地为您做到这一点：

```
ILookup<int, Entry> entriesById = entries.ToLookup(e => e.Id); 
```

您仍然可以对其进行迭代，但您也可以查找任何 ID 的所有条目。

如果你真的，真的需要`List<List<Entry>>`你可以这样做：

```
var listOfLists = entriesById.GroupBy(e => e.Id)
                             .Select(g => g.ToList())
                             .ToList(); 
```

...但我会去查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:43:13.390

你只需要`GroupBy`+ `ToList`（一个组本身和一个整体）：

```
List<List<Entry>> entriesByID = entries.GroupBy(entry => entry.ID)
            .Select(g => g.ToList())
            .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:41:43.633

你也可以这样做：（非 LINQ）

```
Dictionary<int , List<Entry>> dictionary = new ...

foreach (var v in entries)
    dictionary[v.ID].Add(v); 
```

# android - 带有操作的多个通知

> ID：15559512
> 
> 赞同：0
> 
> 时间：2013-03-21T22:37:16.910
> 
> 标签：android, notifications

我的应用程序发出多个通知，所有通知都可能具有 Jelly Bean 样式的操作 [1]。

似乎当我发出多个通知时，只有最后一个会有操作按钮，我不知道为什么。

我为每个通知和操作的 pendingIntents 使用自定义意图操作。

有谁知道如何同时创建两个都有可见操作按钮的通知？

[1] [http://developer.android.com/reference/android/app/Notification.Builder.html#addAction(int,%20java.lang.CharSequence,%20android.app.PendingIntent)](http://developer.android.com/reference/android/app/Notification.Builder.html#addAction(int,%20java.lang.CharSequence,%20android.app.PendingIntent))

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:43:16.250

根据[通知的文档](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#BigNotify)，

> 通知的大视图仅在通知展开时出现，这发生在通知位于通知抽屉的顶部时，或者当用户使用手势展开通知时

如果您有多个通知，请务必使用[通知设计页面中解释的其中一种手势扩展较低的通知](http://developer.android.com/design/patterns/notifications.html)- 我希望它们确实具有操作控件，但只是没有扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:57:46.407

这是个有趣的问题。您是否有理由需要多个带有操作按钮的通知？尽管操作按钮是一种“即时”与应用程序连接的好方法，但它们主要用于正在运行的东西，即使您希望 UI 最小化。最好的例子是媒体播放器：你不想关闭它，但你不想强迫用户去应用程序来控制播放/暂停。

# php - Most Required Item from mysql with php

> ID：15559518
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:37:48.987
> 
> 标签：php, sql

I have db table structure like that :

```
--
-- Table structure for table `table_submissions`
--

CREATE TABLE IF NOT EXISTS `table_submissions` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Submission ID',
  `item_name` bigint(20) unsigned NOT NULL COMMENT 'Item Name',
  `status` tinyint(1) NOT NULL DEFAULT '0' COMMENT '0 = pending, 1 = approved, -1 = denied',
  PRIMARY KEY (`id`),
  KEY `item_name` (`item_name`),
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

php

```
$date_info = $db->fetchOne("SELECT * FROM table_submissions"); 
```

I need to code php for "Most Required Item" order by count `item_name limit 10`

This mean the most `item_name` which the visitor has been required it will be in the top then ++ 9

How i can do that please ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:44:27.567

I believe you want this:

```
SELECT 
    item_name, 
    count(1) 
FROM 
    table_submissions 
GROUP BY 
    item_name 
ORDER BY 
    count(1) DESC 
LIMIT 10; 
```

Note this does not take into account one user requesting the same item 1000 times verses 1000 users requesting an item once each. If that's important to you then you need a way to filter by user ID.

# javascript - 在 Watir 中加载 js 文件

> ID：15559525
> 
> 赞同：1
> 
> 时间：2013-03-21T22:38:18.537
> 
> 标签：javascript, jquery, ruby, automation, watir

我希望能够使用 Watir 动态加载像 jquery 这样的 .js 库，以实现一些高级浏览器自动化。这是我尝试过的：

```
$browser.execute_script( %{var bootscript = document.createElement("script");
      bootscript.setAttribute("type", "text/javascript");
      bootscript.setAttribute("src", "//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js");
      document.getElementsByTagName("head")[0].appendChild(bootscript);
     alert('I loaded jquery!');}); 
```

**修复错字后更新**不再崩溃。使用 jquery 函数时仍然出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:22:55.463

发生异常是因为执行 javascript 时出错。如果您检查该页面，您将看到一个 javascript 错误，例如：

```
Message: 'script' is undefined
Line: 1
Char: 1
Code: 0 
```

如果逐行添加脚本，您将看到该行发生错误：

```
document.getElementsByTagName("head")[0].appendChild(script); 
```

问题是您的变量中有错字。您正在使用`script`而不是您定义的`bootscript`. 执行以下操作将不再引发异常：

```
document.getElementsByTagName("head")[0].appendChild(bootscript); 
```

# php - 在 Javascript 中从 PHP 中检索数据

> ID：15559534
> 
> 赞同：0
> 
> 时间：2013-03-21T22:38:52.513
> 
> 标签：php, javascript

我需要将国家代码从 Javascript 转换为他们的名字。我找到了一个国家代码的 php 数组，但我需要将一个 javascript 变量传递到 php 数组中以获取国家代码。有什么办法可以做以下事情吗？这当然是错误的。

```
function getCountry(code)
        {
            <?php echo $code=?> code;
            return <?php echo $countries[$code] ?>
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T22:45:59.930

在 JavaScript 中：

```
function getCountry(code){
    var countries=<?=json_encode($countries)?>;
    return countries.hasOwnProperty(code)?countries[code]:null;
} 
```

我将它修改为使用三元来进行错误检查，只是更短的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:46:14.890

```
function getCountry(code)
        {
            var codes = <?php echo json_encode($codes);?> ;
            return (codes[code] || null);
        } 
```

# dependency-injection - 使用 RegisterAutoWired 和 RegisterAutoWiredAs 注册相同的具体类

> ID：15559537
> 
> 赞同：2
> 
> 时间：2013-03-21T22:39:05.080
> 
> 标签：dependency-injection, servicestack, funq

我的问题很简单。我必须通过接口和具体类型注册所有实现。

```
container.RegisterAutoWiredAs<AuthenticationManager, IAuthenticationManager>();
container.RegisterAutoWired<AuthenticationManager>(); 
```

我正在使用默认的单例生命周期。我想确保它们解析为相同的实例，但我的测试显示我最终得到了两个实例。

```
if (!ReferenceEquals(container.Resolve<IAuthenticationManager>(),
                     container.Resolve<AuthenticationManager>()))
{
    throw new ApplicationException("multiple instances");
} 
```

有没有办法在这里使用单个实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T00:11:57.483

注册两次会为每种类型创建一个新实例，一个用于接口，一个用于具体类型。

如果您想要相同的单例实例，您将首先注册一个自动装配的实例，然后针对解析同一实例的其他类型进行注册，例如：

```
container.RegisterAutoWiredAs<AuthenticationManager, IAuthenticationManager>(); 
```

并且要么

```
container.Register(c => (AuthenticationManager)c.Resolve<IAuthenticationManager>()); 
```

或者

```
var instance = (AuthenticationManager)container.Resolve<IAuthenticationManager>();
container.Register(instance); 
```

# android - Android 子活动在开机时失败

> ID：15559545
> 
> 赞同：0
> 
> 时间：2013-03-21T22:39:43.917
> 
> 标签：android

我对 android 编程相当陌生，虽然是一位非常有经验的程序员并且正在尝试构建一个西班牙语词汇程序。

我已经构建了一个带有几个子活动的主程序，这些子活动从主活动的下拉菜单开始。如果我从主要活动开始，子活动开始就好了。我可以毫无问题地在次要和主要之间来回走动。

当我在激活子活动的情况下关闭平板电脑，然后重新启动时，我收到消息“不幸的是（myapp）已停止。当我按下 OK 按钮进行确认时，它会执行主要活动，然后从那时起，工作很好，只要我没有在激活子活动的情况下关闭电源。

活动之间没有交互（我没有将数据从一个返回到另一个）。

我已经搜索了该问题的可能解决方案，但大多数相关问题都与操作系统错误有关。

# java - Mac OS X NetBeans 上 sqlite4java Jar 的 UnsatisfiedLinkError

> ID：15559551
> 
> 赞同：4
> 
> 时间：2013-03-21T22:40:36.593
> 
> 标签：java, macos, sqlite, unsatisfiedlinkerror

我遇到了与这个问题类似的问题：

[在 Mac OS X 上使用 sqlite4java Jar 的 UnsatisfiedLinkError](https://stackoverflow.com/questions/14301562/unsatisfiedlinkerror-with-sqlite4java-jar-on-mac-os-x)

但是，我在 Mac 上运行，并且我的 lib 文件夹中有相关的库。但是，如果我按原样运行它，我会得到 UnsatisfiedLinkError。如果我运行“java -jar sqlite4java.jar -d”，我会得到以下输出：

```
sqlite4java 282
130321:222850.424 FINE [sqlite] Internal: loading library
130321:222850.425 FINE [sqlite] Internal: java.library.path=/Users/mikey/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
130321:222850.425 FINE [sqlite] Internal: sqlite4java.library.path=null
130321:222850.425 FINE [sqlite] Internal: cwd=/Users/mikey/NetBeansProjects/Test/lib/.
130321:222850.425 FINE [sqlite] Internal: default path=/Users/mikey/NetBeansProjects/Test/lib
130321:222850.425 FINE [sqlite] Internal: forced path=null 
130321:222850.426 FINE [sqlite] Internal: os.name=mac os x; os=osx
130321:222850.426 FINE [sqlite] Internal: os.arch=x86_64
130321:222850.426 FINE [sqlite] Internal: trying to load sqlite4java-osx-x86_64
130321:222850.427 FINE [sqlite] Internal: cannot load sqlite4java-osx-x86_64: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-x86_64 in java.library.path
130321:222850.427 FINE [sqlite] Internal: trying to load sqlite4java-osx-amd64
130321:222850.428 FINE [sqlite] Internal: cannot load sqlite4java-osx-amd64: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-amd64 in java.library.path
130321:222850.428 FINE [sqlite] Internal: trying to load sqlite4java-osx-10.4
130321:222850.431 INFO [sqlite] Internal: loaded sqlite4java-osx-10.4 from system path
130321:222850.433 INFO [sqlite] Internal: loaded sqlite 3.7.10, wrapper 0.2
SQLite 3.7.10
Compile-time options: ENABLE_COLUMN_METADATA ENABLE_FTS3 ENABLE_FTS3_PARENTHESIS ENABLE_LOCKING_STYLE=0 ENABLE_MEMORY_MANAGEMENT ENABLE_RTREE OMIT_DEPRECATED TEMP_STORE=1 THREADSAFE=1 
```

我可以看到它正在寻找 sqlite4java-osx-x86_64 库，所以我同时运行了“ln -s libsqlite4java-osx.jnilib libsqlite4java-osx-x86_64.jnilib”和“ln -s libsqlite4java-osx-10.4.jnilib” libsqlite4java-osx-x86_64.jnilib”，这似乎有帮助：

```
sqlite4java 282
130321:223211.473 FINE [sqlite] Internal: loading library
130321:223211.474 FINE [sqlite] Internal: java.library.path=/Users/mikey/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
130321:223211.474 FINE [sqlite] Internal: sqlite4java.library.path=null
130321:223211.474 FINE [sqlite] Internal: cwd=/Users/mikey/NetBeansProjects/Test/lib/.
130321:223211.474 FINE [sqlite] Internal: default path=/Users/mikey/NetBeansProjects/Test/lib
130321:223211.474 FINE [sqlite] Internal: forced path=null 
130321:223211.475 FINE [sqlite] Internal: os.name=mac os x; os=osx
130321:223211.475 FINE [sqlite] Internal: os.arch=x86_64
130321:223211.475 FINE [sqlite] Internal: trying to load sqlite4java-osx-x86_64
130321:223211.477 INFO [sqlite] Internal: loaded sqlite4java-osx-x86_64 from system path
130321:223211.479 INFO [sqlite] Internal: loaded sqlite 3.7.10, wrapper 0.2
SQLite 3.7.10
Compile-time options: ENABLE_COLUMN_METADATA ENABLE_FTS3 ENABLE_FTS3_PARENTHESIS ENABLE_MEMORY_MANAGEMENT ENABLE_RTREE OMIT_DEPRECATED TEMP_STORE=1 THREADSAFE=1 
```

看起来不错，对吧？不。当我尝试运行我的 java 代码时，尝试打开带有 UnsatisfiedLinkError 的数据库时再次失败。

我有什么明显的遗漏吗？这是我的 lib 目录的相关部分的 ls ，作为健全性检查：

```
-rw-r--r--@  1 mikey  staff   466792  1 Mar  2012 libsqlite4java-android-armv7.so
-rw-r--r--@  1 mikey  staff   790986  1 Mar  2012 libsqlite4java-linux-amd64.so
-rw-r--r--@  1 mikey  staff   732637  1 Mar  2012 libsqlite4java-linux-i386.so
-rw-r--r--@  1 mikey  staff  1400368  1 Mar  2012 libsqlite4java-osx-10.4.jnilib
-rw-r--r--@  1 mikey  staff  1401592  1 Mar  2012 libsqlite4java-osx-ppc.jnilib
lrwxr-xr-x   1 mikey  staff       25 21 Mar 22:31 libsqlite4java-osx-x86_64.jnilib -> libsqlite4java-osx.jnilib
-rw-r--r--@  1 mikey  staff  1433640  1 Mar  2012 libsqlite4java-osx.jnilib
-rw-r--r--   1 mikey  staff      928 17 Mar 17:05 nblibraries.properties
drwxr-xr-x   3 mikey  staff      102 15 Mar 18:59 sqlite4java
drwxr-xr-x  13 mikey  staff      442 19 Mar 17:49 sqlite4java-282 2
-rw-r--r--@  1 mikey  staff   102236  1 Mar  2012 sqlite4java-docs.zip
-rw-r--r--@  1 mikey  staff   100502  1 Mar  2012 sqlite4java-src.zip
-rw-r--r--@  1 mikey  staff   622080  1 Mar  2012 sqlite4java-win32-x64.dll
-rw-r--r--@  1 mikey  staff   462848  1 Mar  2012 sqlite4java-win32-x86.dll
-rw-r--r--@  1 mikey  staff   129381  1 Mar  2012 sqlite4java.jar 
```

以及我的数据库连接代码的副本：

```
import com.almworks.sqlite4java.SQLiteConnection;
import com.almworks.sqlite4java.SQLiteException;
import java.io.File;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 * Wrapper for Sqlite
 *
 * @author mikey
 */
public class Database {

    private SQLiteConnection db;

    public Database() {
        db = new SQLiteConnection(new File("./test.db"));
        try {
            db.open(true);
        } catch (SQLiteException ex) {
            Logger.getLogger(Database.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

感谢您对我的问题有所了解...

**编辑**

作为对@sereda 的回应，这里是 put "com.almworks.sqlite4java.SQLite.main(new String[] {"-d"});" 的输出 进入数据库连接代码：

```
sqlite4java 282
130322:161109.097 FINE [sqlite] Internal: loading library
130322:161109.099 FINE [sqlite] Internal: java.library.path=/Users/mikey/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
130322:161109.100 FINE [sqlite] Internal: sqlite4java.library.path=null
130322:161109.100 FINE [sqlite] Internal: cwd=/Users/mikey/NetBeansProjects/Test/.
130322:161109.101 FINE [sqlite] Internal: default path=/Users/mikey/NetBeansProjects/Test/lib
130322:161109.101 FINE [sqlite] Internal: forced path=null 
130322:161109.102 FINE [sqlite] Internal: os.name=mac os x; os=osx
130322:161109.102 FINE [sqlite] Internal: os.arch=x86_64
130322:161109.105 FINE [sqlite] Internal: trying to load sqlite4java-osx-x86_64
130322:161109.108 FINE [sqlite] Internal: cannot load sqlite4java-osx-x86_64: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-x86_64 in java.library.path
130322:161109.108 FINE [sqlite] Internal: trying to load sqlite4java-osx-amd64
130322:161109.112 FINE [sqlite] Internal: cannot load sqlite4java-osx-amd64: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-amd64 in java.library.path
130322:161109.112 FINE [sqlite] Internal: trying to load sqlite4java-osx-10.4
130322:161109.115 FINE [sqlite] Internal: cannot load sqlite4java-osx-10.4: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-10.4 in java.library.path
130322:161109.115 FINE [sqlite] Internal: trying to load sqlite4java-osx
130322:161109.118 FINE [sqlite] Internal: cannot load sqlite4java-osx: java.lang.UnsatisfiedLinkError: no sqlite4java-osx in java.library.path
130322:161109.119 FINE [sqlite] Internal: trying to load sqlite4java
130322:161109.122 FINE [sqlite] Internal: cannot load sqlite4java: java.lang.UnsatisfiedLinkError: no sqlite4java in java.library.path
130322:161109.123 FINE [sqlite] Internal: trying to load sqlite4java-osx-x86_64-d
130322:161109.127 FINE [sqlite] Internal: cannot load sqlite4java-osx-x86_64-d: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-x86_64-d in java.library.path
130322:161109.127 FINE [sqlite] Internal: trying to load sqlite4java-osx-amd64-d
130322:161109.131 FINE [sqlite] Internal: cannot load sqlite4java-osx-amd64-d: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-amd64-d in java.library.path
130322:161109.131 FINE [sqlite] Internal: trying to load sqlite4java-osx-10.4-d
130322:161109.134 FINE [sqlite] Internal: cannot load sqlite4java-osx-10.4-d: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-10.4-d in java.library.path
130322:161109.134 FINE [sqlite] Internal: trying to load sqlite4java-osx-d
130322:161109.137 FINE [sqlite] Internal: cannot load sqlite4java-osx-d: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-d in java.library.path
130322:161109.138 FINE [sqlite] Internal: trying to load sqlite4java-d
130322:161109.141 FINE [sqlite] Internal: cannot load sqlite4java-d: java.lang.UnsatisfiedLinkError: no sqlite4java-d in java.library.path
Error: cannot load SQLite
java.lang.UnsatisfiedLinkError: no sqlite4java-osx-x86_64 in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at com.almworks.sqlite4java.Internal.tryLoadFromSystemPath(Internal.java:349)
    at com.almworks.sqlite4java.Internal.loadLibraryX(Internal.java:124)
    at com.almworks.sqlite4java.SQLite.main(SQLite.java:368)
    at frakdeck.Database.<init>(Database.java:19)
    at frakdeck.Test.start(Test.java:22)
    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
    at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:215)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-28T16:01:25.263

这是解决方案：

```
Exception in thread "main" com.almworks.sqlite4java.SQLiteException:
[-91]cannot load library: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-x86_64
in java.library.path 
```

请尝试运行：

```
 java -jar sqlite4java.jar -d 
```

使其尝试加载二进制文件的所有变体并验证结果。

结果必须是这样的：

```
java -jar sqlite4java.jar -d
sqlite4java 282
121212:134119.239 FINE [sqlite] Internal: loading library
121212:134119.239 FINE [sqlite] Internal:java.library.path=/Users/XXXXX/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
121212:134119.240 FINE [sqlite] Internal: sqlite4java.library.path=null
121212:134119.240 FINE [sqlite] Internal: cwd=XXXXX
121212:134119.240 FINE [sqlite] Internal: default path=XXXXX
121212:134119.240 FINE [sqlite] Internal: forced path=null 
121212:134119.240 FINE [sqlite] Internal: os.name=mac os x; os=osx
121212:134119.240 FINE [sqlite] Internal: os.arch=x86_64
121212:134119.240 FINE [sqlite] Internal: trying to load sqlite4java-osx-x86_64
121212:134119.243 FINE [sqlite] Internal: cannot load sqlite4java-osx-x86_64: java.lang.UnsatisfiedLinkError: no sqlite4java-osx-x86_64 in java.library.path
121212:134119.243 FINE [sqlite] Internal: trying to load sqlite4java-osx-amd64
121212:134119.244 FINE [sqlite] Internal: cannot load sqlite4java-osx-amd64:         java.lang.UnsatisfiedLinkError: no sqlite4java-osx-amd64 in java.library.path
121212:134119.244 FINE [sqlite] Internal: trying to load sqlite4java-osx-10.4
121212:134119.249 INFO [sqlite] Internal: loaded sqlite4java-osx-10.4 from system path
121212:134119.252 INFO [sqlite] Internal: loaded sqlite 3.7.10, wrapper 0.2
SQLite 3.7.10
Compile-time options: ENABLE_COLUMN_METADATA ENABLE_FTS3 ENABLE_FTS3_PARENTHESIS     ENABLE_LOCKING_STYLE=0 ENABLE_MEMORY_MANAGEMENT ENABLE_RTREE OMIT_DEPRECATED TEMP_STORE=1    THREADSAFE=1 
```

这些文件按从更具体到不太具体的顺序进行尝试。所以顺序是正确的。

问题是没有更具体的二进制文件 - 所以我们可能需要将***libsqlite4java-osx.jnilib***重命名为***libsqlite4java-osx-amd64.dylib***。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-03T19:52:48.770

升级到 Mountain Lion 后，我的程序出现了同样的错误。当我将库添加到 /Libraries/Java/Extensions 时，他的程序运行良好。我不知道这是否是最好的解决方案，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:02:21.737

不确定到底是什么问题，但您可以尝试在程序中运行 sqlite4java 的诊断代码，看看它是否显示相同的加载顺序：

```
public Database() {
    com.almworks.sqlite4java.SQLite.main(new String[] {"-d"});
    db = new SQLiteConnection(new File("./test.db"));
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T18:48:03.380

我遇到了同样的问题，但设法通过从 IDE 创建 libs 文件夹然后将 jar 复制到新的 libs 文件夹中来加载 sqlite。然后我从构建路径中删除了旧版本的 jar 并添加到新版本中。希望这可以帮助！

# jquery - 如何以最短的方式做到这一点？

> ID：15559556
> 
> 赞同：0
> 
> 时间：2013-03-21T22:41:06.583
> 
> 标签：jquery, html, css

我已经保存了用户单击的元素`class`的位置。单击标记时，我想获取其值并将其作为类添加到元素标记中。我已经尝试过如下所示的操作，但我对很多代码都感觉如此。这怎么能在最短的时间内完成呢？ `i``a``a``attr``i`

```
 <i id="pps_ToggledIcon" class="pisp_p pISImage"></i>

    <li class="privListItem checkedList selectedList li_public">
        <a href="/p" class="psLink" title="pisp_p">
            <span class="privLabel">PP</span>
        </a>
    </li>
    <li class="privListItem checkedList selectedList li_public">
        <a href="/f" class="psLink" title="pisp_f">
            <span class="privLabel">F</span>
        </a>
    </li>
    <li class="privListItem checkedList selectedList li_public">
        <a href="/o" class="psLink" title="pisp_o">
            <span class="privLabel">O</span>
        </a>
    </li> 
```

这是JS

```
 $(".xyp li a").on("click", function(e) {
       var pIcnSltd = $(this).attr("title"); 
       var pTIcn = $("#pps_ToggledIcon");
       if (pTIcn.hasClass("pisp_f") || pTIcn.hasClass("pisp_o")) {
            pTIcn.removeClass("pisp_f");
            pTIcn.removeClass("pisp_o");
            pTIcn.addClass("pisp_p");
        }
        else if (pTIcn.hasClass("pisp_p") || pTIcn.hasClass("pisp_o")) {
            pTIcn.removeClass("pisp_p");
            pTIcn.removeClass("pisp_o");
            pTIcn.addClass("pisp_f");
        }
        else if (pTIcn.hasClass("pisp_p") || pTIcn.hasClass("pisp_f")) {
            pTIcn.removeClass("pisp_p");
            pTIcn.removeClass("pisp_f");
            pTIcn.addClass("pisp_f");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:55:45.530

只需删除所有类，然后将该`pISImage`类与单击的锚标题一起添加回一个类：

```
$(".xyp li a").on("click", function() {
    $("#pps_ToggledIcon").removeClass().addClass('pISImage '+this.title);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:07:04.343

删除记下的并添加一个

```
$(".xyp li a").on("click", function() {
    $("#pps_ToggledIcon").removeClass('pisp_f pisp_p pisp_o').addClass(this.title);
}); 
```

注意：如果您可以删除所有类，包括“其他”pISImage 类，请使用 adeneo 的解决方案 - 很难判断删除/添加是否会引入一些不需要的效果或破坏其他代码（基于该类的事件管理，视觉表现等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:44:23.680

jQuery 支持方法链：

```
$(".xyp li a").on("click", function(e) {
       var pIcnSltd = $(this).attr("title"); 
       var pTIcn = $("#pps_ToggledIcon");
       if (pTIcn.hasClass("pisp_f") || pTIcn.hasClass("pisp_o")) {
            pTIcn.removeClass("pisp_f").removeClass("pisp_o").addClass("pisp_p");
        }
        else if (pTIcn.hasClass("pisp_p") || pTIcn.hasClass("pisp_o")) {
            pTIcn.removeClass("pisp_p").removeClass("pisp_o").addClass("pisp_f");
        }
        else if (pTIcn.hasClass("pisp_p") || pTIcn.hasClass("pisp_f")) {
            pTIcn.removeClass("pisp_p").removeClass("pisp_f").addClass("pisp_f");
        }
    }); 
```

但请记住，最短的并不总是`===`最好的。另外，你的逻辑对我来说看起来很复杂，我什至没有费心去破译你想要做什么。

如果你想简化这段代码，你真的应该从重新考虑你的逻辑开始。

# objective-c - 在自定义视图中旋转文本

> ID：15559557
> 
> 赞同：0
> 
> 时间：2013-03-21T22:41:13.227
> 
> 标签：objective-c, nsstring, rotatetransform

我可以使用以下方法绘制`NSString`a ：`CustomView``drawAtPoint`

```
NSString *text = @"text";
NSSize textSize = [text sizeWithAttributes:xlabelSet]; //receive the text size
NSPoint p = NSMakePoint(length - textSize.width/2 , wcszero_y - 20); //define text position considering the text center
[text drawAtPoint:p withAttributes:xlabelSet]; //draw text at position 
```

如何在同一位置将文本旋转 90 度？到目前为止，我发现并没有真正在定义的位置旋转文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:53:52.100

只需对图形上下文应用旋转：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextRotateCTM(context, M_PI/2);

// ...
[text drawAtPoint:p withAttributes:xlabelSet]; //draw text at position 
```

# mouseover - KineticJS 鼠标悬停圆圈 - 光标样式

> ID：15559564
> 
> 赞同：2
> 
> 时间：2013-03-21T22:41:56.147
> 
> 标签：mouseover, kineticjs, geometry

当鼠标悬停在圆圈上时，我正在使用以下内容更改光标的样式：

```
 circle1.on('mouseover', function () {
                document.body.style.cursor = 'pointer';
            });
            circle1.on('mouseout', function () {
                document.body.style.cursor = 'default';
            }); 
```

如果我使用以下方法绘制圆圈，效果会很好：

```
 var circle1 = new Kinetic.Circle({
            x: 512,
            y: 512,
            radius: 140,
            stroke: '#00ffff',
            strokeWidth: 4,
            opacity: 0.5
        }); 
```

但是，如果我使用：

```
var circle1 = new Kinetic.Circle({
                drawFunc: function (canvas) {
                    var context1 = canvas.getContext();
                    context1.beginPath();
                    context1.arc(512, 512, this.getRadius(), 0, 2 * Math.PI, false);
                    context1.lineWidth = this.getStrokeWidth();
                    context1.strokeStyle = this.getStroke();
                    context1.stroke();
                },
                radius: 140,
                stroke: '#00ffff',
                strokeWidth: 15,
                opacity: 0.5
            }); 
```

这没用！光标不改变其样式；我们可以只使用半径鼠标悬停吗？我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:16:05.197

据我所知，您还需要定义“drawHitFunc”：

```
circle1.setDrawHitFunc(function (canvas) {
                var context2 = canvas.getContext();
                context2.beginPath();
                context2.arc(100, 100, this.getRadius(), 0, 2 * Math.PI, false);
               context2.closePath();
                canvas.fillStroke(this);
            }); 
```

示例：http: [//jsfiddle.net/lavrton/4DJdU/1/](http://jsfiddle.net/lavrton/4DJdU/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T01:26:30.940

不，您只需要在创建自定义形状时正确构造 drawFunc。这是一个例子：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/)

问题是您正在使用 context.stroke()。您需要使用 canvas.stroke(this);

任何时候你实际渲染一些东西，比如笔触和填充，你都需要使用画布渲染器对象，因为它会同时绘制到场景图（你看到的）和一个专门的命中图（用于事件检测）

文件：

[http://kineticjs.com/docs/symbols/Kinetic.Canvas.php](http://kineticjs.com/docs/symbols/Kinetic.Canvas.php)

# android - Android：Fragment切换后恢复MenuItem ActionView

> ID：15559567
> 
> 赞同：3
> 
> 时间：2013-03-21T22:42:19.060
> 
> 标签：android, android-animation, menuitem

在我的 FragmentActivity 中，我创建了一个 MenuItem，当用户单击它时，它必须在 actionBar 中执行顺时针动画，并在 AsyncTask 完成时停止。这是我开始和停止刷新时使用的代码：

```
public void completeRefresh(MenuItem menuItem) {
     if(menuItem!=null){
         if(menuItem.getActionView()!=null){
             menuItem.getActionView().clearAnimation();
             menuItem.setActionView(null);
         }
     }
 }

 public void refresh(MenuItem menuItem) {
     /* Attach a rotating ImageView to the refresh item as an ActionView */
     LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     ImageView iv = (ImageView) inflater.inflate(R.layout.refresh_action_view, null);

     Animation rotation = AnimationUtils.loadAnimation(this, R.anim.clockwise_refresh);
     rotation.setRepeatCount(Animation.INFINITE);
     iv.startAnimation(rotation);

     menuItem.setActionView(iv);
 } 
```

这很好用，但是当我切换片段时出现问题。Activity 包含在一个包含两个片段的 ViewPager 中。当我在带有动画的 ActionView 正在进行时切换片段时，在新的片段中，我看到两个顺时针菜单项，一个在另一个动画上。而且动画永远不会结束。这是问题的截图。我怎样才能避免这种情况？![当我切换片段时](../Images/5418ec45b3d6f55a6dbe878584be30d1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-01T09:13:58.800

问题是你有两个独立的*做事*`Fragments`和一个共同的显示状态。*`ActionBar`*

 *在您的情况下，最好不要`ActionBar`从 Fragments 本身管理状态，而是从`FragmentActivity`. `FragmentActivity`托管您的（`ViewPager`和片段）。根据`ViewPager`及其 Fragments 的状态，使用回调来通知`FragmentActivity`更改 的状态`ActionBar`。

例如（伪）：

```
 onViewPagerPageChanged(..){
       refreshActionBar();
   }

   onButtonClickedInFragment1(..){
       ... //do again something with the ActionBar but don't let the Fragment be the owner
   } 
```

并且不要忘记在添加/删除/编辑项目后使 ActionBar 无效

```
 getActionBar().invalidateOptionsMenu(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-22T01:18:07.790

只需从我的片段中删除 setHasOptionMenu(true) 即可解决。*

# mysql - MYSQL 全文 - 意外结果

> ID：15559568
> 
> 赞同：3
> 
> 时间：2013-03-21T22:42:22.337
> 
> 标签：mysql, full-text-search

我有一个包含 80,000 行的数据库，当我测试一些 FULLTEXT 查询时，我遇到了意外的结果。我已经从 MYSQL 中删除了停用词，并将最小字长设置为 3。

当我执行此查询时：

```
SELECT `sentence`, MATCH (`sentence`) AGAINST ('CAN YOU FLY') AS `relevance`
FROM `sentences`
WHERE MATCH (`sentence`) AGAINST ('CAN YOU FLY')
ORDER BY `relevance` DESC 
```

它给出了这个结果：

```
NO A FLY WITHOUT WINGS WOULD BE CALLED A WINGLESS | 10.623517036438
I CAN FLY                                         | 7.61278629302979
I CAN FLY :)                                      | 7.61278629302979
CAN YOU FLY?                                      | 7.61278629302979
THEY CAN FLY                                      | 7.61278629302979
YOU AM NOT FLY                                    | 7.61278629302979
CAN YOU FLY                                       | 7.61278629302979
HAVE YOU EVER SWALLOWED A FLY?                    | 7.52720737457275
I JUST WANNA FLY                                  | 7.52720737457275 
```

为什么“NO A FLY WITHOUT WINGS WOULD BE CALLED A WINGLESS”的相关性最高，它只包含一个单词……另外，“CAN YOU FLY”怎么不在顶部，是完全匹配的。

我希望它按最匹配的关键字排序，然后按最匹配的关键字排序，然后按最少的单词排序。这将给出合乎逻辑的结果：

```
CAN YOU FLY
CAN YOU FLY?
I CAN FLY
THEY CAN FLY
I CAN FLY :)
YOU AM NOT FLY
HAVE YOU EVER SWALLOWED A FLY?
I JUST WANNA FLY
NO A FLY WITHOUT WINGS WOULD BE CALLED A WINGLESS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:51:24.643

[MySQL Internals Manual](http://dev.mysql.com/doc/internals/en/full-text-search.html)中提供了用于计算的公式：

> ```
> w = (log(dtf)+1)/sumdtf * U/(1+0.0115*U) * log((N-nf)/nf) 
> ```
> 
> 在哪里
> 
> ```
> dtf     is the number of times the term appears in the document
> sumdtf  is the sum of (log(dtf)+1)'s for all terms in the same document
> U       is the number of Unique terms in the document
> N       is the total number of documents
> nf      is the number of documents that contain the term 
> ```

第一个文本显然比其他文本有更多的内容。并且公式很大程度上依赖`U`于文档中唯一术语的数量。

根据您的评论，我建议使用[Boolean Fulltext Search](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)：

```
SELECT `sentence`, MATCH (`sentence`) AGAINST ('CAN YOU FLY' IN BOOLEAN MODE) AS `relevance`
FROM `sentences`
WHERE MATCH (`sentence`) AGAINST ('CAN YOU FLY' IN BOOLEAN MODE)
ORDER BY `relevance` DESC 
```

# doctrine-orm - 如何在实体上级联用户定义的操作？

> ID：15559569
> 
> 赞同：1
> 
> 时间：2013-03-21T22:42:24.950
> 
> 标签：doctrine-orm

我正在尝试找出一种对与实体关联的所有实体进行级联操作的方法。例如，如果我有一个用户，一个用户有实体，而这些实体有实体，我想对每个实体执行一个操作。具体来说，我想对该树中的每个实体执行验证。

我将如何实现'getAssociatedEntities（）'之类的东西：

```
class User {
    /**
     * @ManyToOne(targetEntity="Comment")
     */
    private $comment;
    /**
     * @ManyToOne(targetEntity="Something")
     */
    private $something;
}

$user->setComment($comment);
$user->setSomething($something);
$associated_entities = $user->getAssociatedEntities(); // NOT A REAL METHOD

foreach ($associated_entities AS $entity) {
    validate($entity);
} 
```

我意识到我可以使用生命周期回调来执行验证。但是，设置验证注释让事情变得非常容易。我可以验证我坚持的每个实体，但我无法验证其关联实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:54:22.530

> 我可以验证我坚持的每个实体，但我无法验证其关联实体。

当然，如果出现以下情况，您可以对与主实体关联的实体执行任何操作：

1.  您添加`cascade={"all"}`到`@ManyToOne`定义（**必需！**）。
2.  `@HasLifecycleCallbacks`[对于您希望执行的操作并在文档中标记方法或更多](http://docs.doctrine-project.org/en/2.0.x/reference/events.html#implementing-event-listeners)`@PrePersist`方法的每个子实体。`@PostPersist`

例如我使用这种方法级联删除实体中的图像文件`Image`，而包含`Image`实体的任何实体都被删除：

在这里**，我有一个 livecycle 回调**：

```
/**
 * An image.
 * 
 * @ORM\Entity
 * @ORM\Table(name="images")
 * @ORM\HasLifecycleCallbacks
 */
class ImageEntity extends AbstractEntity
{
    /**
     * @ORM\PreRemove
     */
    public function preRemoveDeleteFile()
    {
        // remoce file
    }
} 
```

这里我有一个包含 Image 的实体（**其中**定义了级联操作）：

```
/**
 * A competency group name.
 * 
 * @ORM\Entity
 * @ORM\Table(name="product_meta_image_cover")
 */
class ProductMetaImageCoverEntity extends AbstractEntity
{
    /**
     * @var \ModuleModel\Entity\ImageEntity
     * @ORM\OneToOne(targetEntity="ModuleModel\Entity\ImageEntity", cascade={"all"}, orphanRemoval=true)
     * @ORM\JoinColumn(onDelete="CASCADE")
     */
    protected $image;

} 
```

# android - getWindowManager().getDefaultDisplay() 返回的屏幕区域是多少？

> ID：15559572
> 
> 赞同：1
> 
> 时间：2013-03-21T22:42:31.860
> 
> 标签：android, android-layout

我正在尝试以编程方式获取我的应用程序的可用屏幕区域。为此，我正在使用`getWindowManager().getDefaultDisplay().getSize()`. 但是，我不太确定与此“默认显示窗口”相对应的屏幕区域到底是什么。

它似乎包含了除导航栏外的整个屏幕（包括通知栏）。这个对吗 ？有例外吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:51:36.003

从文档中：

> 获取显示的大小，以像素为单位。
> 
> 请注意，此值**不应用于计算 layouts**，因为设备通常会在显示器边缘具有屏幕装饰（例如状态栏），这会减少此处返回的大小可用的应用程序空间量。布局应改为使用窗口大小。
> 
> 大小根据显示器的当前旋转进行调整。
> 
> 此方法返回的尺寸**不一定代表**显示器的实际原始尺寸（原始分辨率）。**可以调整**返回的大小 以排除某些始终可见的系统装饰元素。它还可以扩展以提供与最初为较小显示器设计的旧应用程序的兼容性。

强调我的。所以是的，他们可能会从中排除导航栏，但不一定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:47:48.767

是的，它包括您的应用程序可用的所有空间（即，不包括状态和通知栏等操作系统级别的组件）。

但是，大小确实会根据您是否使用`setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);`隐藏通知和状态栏并暂时为您的应用程序提供更多空间等方法而改变。

# xml - 如何制作有效的内联 XML 架构？

> ID：15559573
> 
> 赞同：7
> 
> 时间：2013-03-21T22:42:39.793
> 
> 标签：xml, xsd, xml-validation

我需要编写一个嵌入式 XML 模式，即模式在与数据相同的 XML 中定义。

我试图了解如何正确地做到这一点，但到目前为止，我还没有得到一个简单的例子来通过验证。这是我*试图*用作带有内联模式的简单示例 XML 的内容：（
*注意：XML 结构（例如根/项）已经在野外，所以我被限制不能在数据元素上使用命名空间.)*

```
<?xml version="1.0"?>
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:noNamespaceSchemaLocation="#mySchema">
  <xs:schema id="mySchema" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="root">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="item" type="xs:string"
                      maxOccurs="unbounded" minOccurs="0"/>
        </xs:sequence>
      </xs:complexType>
   </xs:element>
 </xs:schema>
 <item>String 1</item>
 <item>String 2</item>
 <item>String 3</item>
</root> 
```

但是，当我通过 w3.org [XML Schema Validator](http://www.w3.org/2001/03/webdata/xsv)运行该 XML 时，XML 验证失败，并显示以下错误消息，表明它不希望将其`<xs:schema>`视为子元素！

> **每个 cvc-complex-type.1.2.4 无效：** 元素 { [http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema) }：此处不允许架构 (1) 在元素 {None}：root 中，期望 [{None}：项目，$]：

**问：您能否向我展示一个简单的 XML 文档示例，该文档具有通过验证的内联模式定义？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T09:26:45.607

如果您的`root`孩子有一个`xs:schema`元素作为孩子，那么架构需要允许它拥有这样的孩子。允许它的最简单方法是使用通配符：

```
<xs:sequence>
  <xs:any processContents="skip" namespace="http://www.w3.org/2001/XMLSchema"
          minOccurs="0" maxOccurs="1"/>
  <xs:element name="item" type="xs:string"
          maxOccurs="unbounded" minOccurs="0"/>
</xs:sequence> 
```

# file - 有没有办法在不修补原始文件的情况下使用差异打开文件？

> ID：15559576
> 
> 赞同：0
> 
> 时间：2013-03-21T22:42:50.450
> 
> 标签：file, file-io, diff, patch, file-handling

例如，我有一个 40Mb 的文件，我想对其进行一些小的更改，可能是 20Kb 的更改。

我可以在结果文件和原始文件之间创建一个差异，很简单，可以通过使用进行更改的应用程序手动编写它，或者通过获取原始文件和结果文件并从中生成差异（使用 Rabin's例如多项式指纹算法）...

问题是，为了读取该差异（新文件）的有效结果，我必须将差异修补到原始文件并创建生成的新文件并读取...这将创建 2 个 40mb 文件，只有 20kb他们之间的区别。似乎合乎逻辑的是，可以将初始文件与 diff 结合使用并解析（无论如何读取）生成的最终文件，而无需创建它的全新副本。

我已经查看了 xdiff，它具有创建给定 2 个文件的差异的功能，或者将差异作为补丁应用到文件，但是当提供原始文件和差异文件时，没有一个功能可以获取简单的文件句柄。

这样的事情存在吗？这对于节省较大文件的存储空间非常有帮助，即使仅用于只读（写入操作可能会写入新的差异）。

任何语言的示例都可以，尽管 c、python 或 php 如果随时可用的话会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:37:16.433

### 使用 TortoiseMerge 查看差异：

您可以使用 TortoiseMerge 来查看差异，而无需创建补丁。

这是它的外观的[概述。](http://tortoisesvn.tigris.org/TortoiseMerge.html "概述")我还附上了[指南](http://tortoisesvn.net/docs/release/TortoiseMerge_en/help-onepage.html "指导")和[下载链接](http://sourceforge.net/projects/tortoisesvn/files/Tools/1.6.7/ "下载")。如果这不适合您，这里有一个很棒的[替代差异工具](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-diff.html#tsvn-dug-diff-tools "备择方案")列表。

### 进一步考虑：

根据您进行更改的频率以及您对节省文件大小的兴趣，您可能需要考虑使用[版本控制系统](http://en.wikipedia.org/wiki/Comparison_of_revision_control_software)（也许您已经这样做了）。常用选项包括[SVN](https://stackoverflow.com/tags/svn/info)、[Git](https://stackoverflow.com/tags/git/info)和[Mercurial](https://stackoverflow.com/tags/mercurial/info)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:06:10.600

您所描述的是具有增量存储的源代码控制：您存储文件的许多版本，并保存增量，然后您可以请求动态重组的整个文件，因此您可以选择直接访问它们（例如使用适当的库），或在访问前保存在本地。

搜索 Subversion、git、mercurial 等，它们是如何实现其增量存储的，您将获得工作示例。Git 在内部有一项维护任务，当它认为有利可图时使用增量存储。Git 是用 C 语言编写的。

显然，它将给出一个如何顺序访问此类文件的示例。一旦你知道编写补丁相对简单，并且如果可以有效地访问补丁命令列表，你也可以构建一个随机访问解决方案（只要补丁的文字部分和原始部分可以访问）。

# javascript - 如何使用二进制系统（1、2、4）作为算法？

> ID：15559577
> 
> 赞同：2
> 
> 时间：2013-03-21T22:42:53.630
> 
> 标签：javascript, algorithm, math, binary

与 chmod 类似，我想使用 1、2、4 作为通知方式。

```
1 = Email 
2 = SMS 
4 = Push notifications 
```

是否有函数（最好是在 javascript 中）可以输入一个数字（上图）并可以返回一个对象：

```
{
    email: true,
    sms: true,
    push: false
} 
```

我希望函数不被硬编码。我不想要一堆 if 语句来检查每个组合。我想要一种“聪明”的方式来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T22:51:15.467

像这样的东西怎么样：

```
var commsMode = {
    email: 1,
    sms: 2,
    push: 4,
    toObject: function(val){
        var rt = {};

        for (e in commsMode) {
            rt[e] = (val & commsMode[e]) > 0;
        }

        return rt;
    }
};

var obj = commsMode.toObject(3); 
```

[这里的工作示例](http://jsfiddle.net/q8aUR/3/)。

扩展示例：

```
var commsMode = {
    email: 1,
    sms: 2,
    push: 4,
    mode4: 8,
    mode5: 16,
    mode6: 32,
    mode7: 64,
    mode8: 128,
    toObject: function(val){
        var rt = {};

        for (e in commsMode) {
            rt[e] = (val & commsMode[e]) > 0;
        }

        return rt;
    }
};

var obj = commsMode.toObject(233);

for (p in obj) {
    alert(p + ': ' + obj[p])
} 
```

[这里的工作示例](http://jsfiddle.net/NpmjD/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T22:54:52.057

尝试这样的事情 - 抱歉，这是 Python，但 JavaScript 翻译应该非常相似：

```
def notifications(mask):
    return {
        'email' : mask & 4 != 0,
        'sms'   : mask & 2 != 0,
        'push'  : mask & 1 != 0
    }

notifications(0b111) # same as notifications(7), or notifications(email+sms+push)
=> {'push': True, 'sms': True, 'email': True} 
```

在上面，我们说通知二进制位掩码是`0b111`（或 7，如果您更喜欢使用 base-10），这意味着所有三个通知都已启用。同样，如果我们作为位掩码`0b010`（或 base-10 中的 2）传递，那么答案将是：

```
notifications(0b010) # same as notifications(2), or notifications(sms)
=> {'push': False, 'sms': True, 'email': False} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:55:51.157

将多个参数发送到函数的解决方案：

```
var states = {
  '1': 'email',
  '2': 'sms',
  '4': 'push'
};

function getStates(){
 var o = {};
 for(var val in states){
   o[states[val]] = false;   
 }

   for(var i=0;i<arguments.length;i++){
     var arg = arguments[i];  
     var state = states[arg];
      if(state){
        o[state] = true;
      }  
  }

  return o;
}

console.log(getStates()); // return {email: false, sms: false, push: false}
console.log(getStates(1,2)); // return {email: true, sms: true, push: false} 
```

[http://jsfiddle.net/ZTA6E/](http://jsfiddle.net/ZTA6E/)

# c# - Levenshtein distance c# 计数错误类型

> ID：15559578
> 
> 赞同：6
> 
> 时间：2013-03-21T22:42:54.177
> 
> 标签：c#, count, levenshtein-distance

我发现这段代码可以计算[Levenshtein 的](http://en.wikipedia.org/wiki/Levenshtein_distance)答案和猜测之间的距离：

```
int CheckErrors(string Answer, string Guess)
{
    int[,] d = new int[Answer.Length + 1, Guess.Length + 1];
    for (int i = 0; i <= Answer.Length; i++)
        d[i, 0] = i;
    for (int j = 0; j <= Guess.Length; j++)
        d[0, j] = j;
    for (int j = 1; j <= Guess.Length; j++)
        for (int i = 1; i <= Answer.Length; i++)
            if (Answer[i - 1] == Guess[j - 1])
                d[i, j] = d[i - 1, j - 1];  //no operation
            else
                d[i, j] = Math.Min(Math.Min(
                    d[i - 1, j] + 1,    //a deletion

                    d[i, j - 1] + 1),   //an insertion

                    d[i - 1, j - 1] + 1 //a substitution

                );
    return d[Answer.Length, Guess.Length];
} 
```

但我需要一种方法来计算每个错误发生的次数。有没有简单的方法来实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:28:12.560

似乎您可以为每个操作添加计数器：

```
 if (Answer[i - 1] == Guess[j - 1])
                    d[i, j] = d[i - 1, j - 1];  //no operation
                else
                {
                    int del = d[i-1, j] + 1;
                    int ins = d[i, j-1] + 1;
                    int sub = d[i-1, j-1] + 1;
                    int op = Math.Min(Math.Min(del, ins), sub);
                    d[i, j] = op;
                    if (i == j)
                    {
                        if (op == del)
                            ++deletions;
                        else if (op == ins)
                            ++insertions;
                        else
                            ++substitutions;
                    }
                } 
```

# php - 更整洁的输入消毒方式？

> ID：15559579
> 
> 赞同：1
> 
> 时间：2013-03-21T22:43:01.833
> 
> 标签：php, validation, filter-var

我正在执行相当广泛的数据库插入前过滤器列表，我对代码的长度和丑陋感到非常沮丧：

```
/*******************************************************************
* START OF sanitising input 
********************************************************************/
// main user inputs
$title  = filter_var($place_ad['title'], FILTER_SANITIZE_STRING); 
$desc   = filter_var($place_ad['desc'], FILTER_SANITIZE_SPECIAL_CHARS);
$cat_1  = filter_var($place_ad['cat_1'], FILTER_SANITIZE_NUMBER_INT);
$cat_2  = filter_var($place_ad['cat_2'], FILTER_SANITIZE_NUMBER_INT);
$cat_3  = filter_var($place_ad['cat_3'], FILTER_SANITIZE_NUMBER_INT);
$price  = filter_var($place_ad['price'], FILTER_SANITIZE_NUMBER_FLOAT,FILTER_FLAG_ALLOW_FRACTION);
$suffix = filter_var($place_ad['suffix'], FILTER_SANITIZE_STRING); 

// check input
if(empty($title) || strlen($title) < 3 || strlen($title) > 100) { $error[] = 'Title field empty, too long or too short.'; }
if(empty($desc) || strlen($desc) < 3 || strlen($place_ad['desc']) > 5000) { $error[] = 'Description field empty, too long or too short.'; } 
if(empty($cat_1) || empty($cat_2)) { $error[] = 'You did not select a category for your listing.'; }
if(empty($price) || $price < 0 || $price > 1000000) { $error[] = 'Price field empty, too low or too high.'; }

// google location stuff
$lat    = filter_var($place_ad['lat'], FILTER_SANITIZE_NUMBER_FLOAT,FILTER_FLAG_ALLOW_FRACTION);    
$lng    = filter_var($place_ad['lng'], FILTER_SANITIZE_NUMBER_FLOAT,FILTER_FLAG_ALLOW_FRACTION);
$formatted_address   = filter_var($place_ad['formatted_address'], FILTER_SANITIZE_STRING);

// check input
if(empty($lat) || empty($lng)) { $error[] = 'Location error. No co-ordinates for your location.'; }

// account type
$registered = filter_var($place_ad['registered'], FILTER_SANITIZE_NUMBER_INT);

// money making extras
$extras = filter_var($place_ad['extras'], FILTER_SANITIZE_NUMBER_INT); //url encoded string
$icons  = filter_var($place_ad['icons'], FILTER_SANITIZE_STRING); //url encoded string
$premium= filter_var($place_ad['premium'], FILTER_SANITIZE_NUMBER_INT); //numeric float;
$bump   = filter_var($place_ad['bump'], FILTER_SANITIZE_NUMBER_INT); //numeric float;

// user details field
if ($registered == '1') // Registering as new user
{

    $type   = filter_var($place_ad['n_type'], FILTER_SANITIZE_NUMBER_INT);
    $name   = filter_var($place_ad['n_name'], FILTER_SANITIZE_STRING);
    $phone  = filter_var($place_ad['n_phone'], FILTER_SANITIZE_STRING);
    $email  = filter_var($place_ad['n_email'], FILTER_SANITIZE_EMAIL);
    $pass   = filter_var($place_ad['n_password'], FILTER_UNSAFE_RAW);

    if(empty($type)) { $error[] = 'Type field error.'; }
    if(empty($name) || strlen($name) > 100) { $error[] = 'You did not enter your name or name too long.'; }
    if(empty($email) || strlen($email) < 5 || strlen($email) > 100) { $error[] = 'You did not enter a valid email.'; }
    if(!filter_var($email, FILTER_VALIDATE_EMAIL)) { $error[] = 'You did not enter a valid email.'; }
    if(empty($pass) || strlen($pass) < 6 || strlen($pass) > 100) { $error[] = 'Your password must be at least 6 characters.'; }

}
elseif ($registered =='2') // registered user
{
    $email  = filter_input($place_ad['n_email'], FILTER_SANITIZE_EMAIL);
    $pass   = filter_input($place_ad['n_password'], FILTER_UNSAFE_RAW);

    if(empty($email) || strlen($email) < 5 || strlen($email) > 100) { $error[] = 'You did not enter a valid email.'; }
    if(empty($pass) || strlen($pass) < 6 || strlen($pass) > 100) { $error[] = 'Your password must be at least 6 characters.'; }
}
elseif ($registered == '3') // dont wanna register details
{
    $name   = filter_input($place_ad['n_name'], FILTER_SANITIZE_STRING);
    $phone  = filter_input($place_ad['n_phone'], FILTER_SANITIZE_STRING);
    $email  = filter_input($place_ad['n_email'], FILTER_SANITIZE_EMAIL);

    if(empty($name) || strlen($name) > 100) { $error[] = 'You did not enter your name or name too long.'; }
    if(empty($email) || strlen($email) < 5 || strlen($email) > 100) { $error[] = 'You did not enter a valid email.'; }

}
/*******************************************************************
* END OF Sanitising input
********************************************************************/ 
```

我认为我的很多代码都是“不必要的”，但我认为如果我要删除它可能是不好的编码习惯。

例如，`FILTER_SANITIZE_NUMBER`当数据库正确设置了`INT/FLOAT`字段时，我可以放弃所有的 * 过滤器。

我也可以放弃很多“大于>”检查，因为其中大多数只是为了防止用户输入大量数据（这将再次受到数据库字段长度的限制）。

其他人都有这么丑陋的用户输入验证代码吗？

> - - - - - - - - - 编辑 - - - - - - - - - - -

非常感谢您提供的信息。当我使用 PDO 时，我想我可能会尝试进一步压缩它，但我可以问以下问题：

1.  对于用户不容易破坏输入的单选按钮和选择框等输入字段，您是否认为仅绑定 PDO 常量就足够了？这些值与数据库中的 enum 和 tinyint(1) 字段相关联，并且在表单规范之外操作这些值不会允许用户实现任何目标。
2.  我还使用 filter_var 使用户输入适合在 UTF8 编码页面上显示。我相信这实际上只将 <> 和几个其他字符编码到它们的实体中。只使用 htmlentities 会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:56:05.903

IMO，即使它看起来很笨拙，**如果您**想通知用户并让他们更正输入的数据，则在应用程序层有必要进行所有验证的明显过度。否则，您可以让数据访问层（例如 PDO）在绑定查询值时通过分配[PDO 常量来清理数据。](http://www.php.net/manual/en/pdo.constants.php)

您可以根据需要使清理过程变得复杂或简单，您只需要确定哪种配置最适合您的需求。

**- - 更新 - - -**

一些使代码不那么不堪重负的建议。这假设您不能加载像 Zend 或[Symfony Validator Component](https://github.com/symfony/Validator)这样的供应商库。

```
class Validator
{
    public function validateString($string, array $options)
    {
        $min = ((isset($options['min'])) && (strlen($options['min'] > 1))) ? $options['min'] : null;
        $max = ((isset($options['max'])) && (strlen($options['max'] > 1))) ? $options['max'] : null;

        $string = filter_var($string, FILTER_SANITIZE_STRING);

        if (empty($string)) {
            throw new Exception(sprintf('Empty value: %s', $string));
        }

        if ((false === is_null($min) && (strlen($string) < $min)) {
            throw new Exception(sprintf('Value too short: %s', $string));
        }

        if ((false === is_null($max) && (strlen($string) > $max)) {
            throw new Exception(sprintf('Value too long: %s', $string));
        }
    }

    return $string;
}

// Calling code

try {
    $title = Validator::validateString($place_ad['title'], array('min' => 3, 'max' => 100));
} catch (Exception $e) {
    $errors[] = 'Title field empty, too long or too short.';
    // OR
    $errors[] = $e->getMessage();
}

try {
    $title = Validator::validateString($place_ad['desc'], array('min' => 3, 'max' => 5000));
} catch (Exception $e) {
    $errors[] = 'Description field empty, too long or too short.';
    // OR
    $errors[] = $e->getMessage();
} 
```

希望你能得到图片。通过使方法对数据类型具有通用性，并通过一系列选项灵活使用，您可以重用代码以减少占用空间，但仍保持您希望达到的数据清理级别。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-21T22:50:14.810

假设信息将显示在网站上（作为 HTML 的一部分），您需要做两件事：

1.  清理数据库查询（或使用准备好的语句）
2.  清理 HTML 显示。

第一个很简单，如果你经常使用 mysqli 或 PDO，你应该已经知道怎么做。这是一个关于这个主题的问题：**[PHP PDO 准备好的语句](https://stackoverflow.com/questions/1457131/php-pdo-prepared-statements)**。

第二个在你的情况下更棘手。您需要遍历每个变量，并将其传递给清理函数。无论是它`htmlspecialchars`还是更激进的 HTML 过滤器，例如 HTML Purifier。这里有一个关于这个主题的问题：**[如何从字符串中去除特定的标签和特定的属性？](https://stackoverflow.com/questions/9897214/how-to-strip-specific-tags-and-specific-attributes-from-a-string)**.

如果您在数组中有值，则可以使用`array_walk`或`array_map`在几行中清理整个数组。

# jquery-mobile - 在第一次单击时更改元素类，然后再次单击并恢复正常

> ID：15559585
> 
> 赞同：0
> 
> 时间：2013-03-21T22:43:31.593
> 
> 标签：jquery-mobile

我有以下代码：

```
for (var i=0; i<len; i++){
        var benID = results.rows.item(i).ID;
        $('#'+element_id).append(
                                  "<li><a>"+results.rows.item(i).nombres+" "+results.rows.item(i).apellidos+'</a>'+
                                  '<a href="#" data-position-to="window" data-icon="check" class="'+page+'_dis_ben_'+benID+'">Eliminar</a></li>');
        $("."+page+"_dis_ben_"+benID).click(function(){
            console.log("Item to disable: "+benID);
            $(this).children('span.ui-btn-inner').children('span.ui-btn-icon-notext').children('span.ui-btn-inner').children('span.ui-icon').removeClass('ui-icon-check');
            $(this).children('span.ui-btn-inner').children('span.ui-btn-icon-notext').children('span.ui-btn-inner').children('span.ui-icon').addClass('ui-icon-delete');
            $(this).children('span.ui-btn-inner').children('span.ui-btn-icon-notext').children('span.ui-btn-inner').addClass('ui-btn-inner-red');
            $(this).removeClass(page+"_dis_ben_"+benID).addClass(page+"_enable_ben_"+benID);
        });

        $("."+page+"_enable_ben_"+benID).click(function(){
            //NOT WORKING
            console.log("Item to enable: "+benID);
            $(this).children('span.ui-btn-inner').children('span.ui-btn-icon-notext').children('span.ui-btn-inner').children('span.ui-icon').removeClass('ui-icon-delete');
            $(this).children('span.ui-btn-inner').children('span.ui-btn-icon-notext').children('span.ui-btn-inner').children('span.ui-icon').addClass('ui-icon-check');
            $(this).children('span.ui-btn-inner').children('span.ui-btn-icon-notext').children('span.ui-btn-inner').removeClass('ui-btn-inner-red');
            $(this).removeClass(page+"_enable_ben_"+benID).addClass(page+"_dis_ben_"+benID);
        });
} 
```

我有一个分为两部分的列表，右侧是一个按钮，用于接受或拒绝。我试图做的是检查按钮，当点击改变颜色并变成一个删除按钮时，也会执行一个动作。我已经成功了。

现在的问题是我想让它回到一个复选按钮，但是由于它是动态创建的，所以当我单击“删除”图标或 *_enable_ben_* 时它不会触发。我认为这是因为当我创建事件时，类/元素还不存在。

你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:53:01.517

使用 .on [http://api.jquery.com/on/](http://api.jquery.com/on/)

```
var selector = "."+page+"_enable_ben_"+benID;

$("#yourList").on("click", selector, function(event){
   //Insert handler code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:25:59.147

在stackoverflow的评论中找到了最后一个问题的解决方案：

[动态列表项上的 jQuery Mobile 点击事件](https://stackoverflow.com/questions/11458456/jquery-mobile-click-events-on-dynamic-list-items)

# angularjs - AngularJS - “请从列表中选择一个项目” - 这是从哪里来的？

> ID：15559587
> 
> 赞同：4
> 
> 时间：2013-03-21T22:43:43.313
> 
> 标签：angularjs

我很困惑。在我的表单中，通过具有以下属性的提交按钮：

**ng-disabled="templateForm.$invalid"**

我的选择是**必需的**

我收到一个不受欢迎的弹出窗口，询问**“请从列表中选择一个项目”**。

我搜索了整个应用程序，并且我确信我没有远程引用。

有谁知道这是从哪里来的，我该如何停止/覆盖/禁用它？

谢谢。

**在 Galdo 的帮助下：**

```
 <form id="addForm" ng-submit="doSomething()" name="templateForm" novalidate> 
```

成功了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T00:08:15.513

像这样将 novalidate 标记添加到您的表单中

```
<form novalidate> 
```

这将阻止浏览器使用 required 属性对表单进行自己的验证。

# javascript - 尝试动态拆分字符串不断出错？

> ID：15559593
> 
> 赞同：0
> 
> 时间：2013-03-21T22:44:10.373
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在尝试拆分我要传入的字符串

```
$("#groupUL").append("<li>" + "<h2>About Item:</h2> " + response.data[i].message + "<br /> " + "<h2>Posted By:</h2> <a href='#' onclick='splitName('" + response.data[i].from.name + "');'>" + response.data[i].from.name + "</a>" +  "<br />"); 
```

似乎将错误传递给我

```
SyntaxError: syntax error

splitName( 
```

不知道这是怎么回事......如果有帮助，这里是 splitname 函数

```
function splitName(txt){
    var myString = txt;

    var mySplitResult = myString.split(" ");

    console.log("The first element is " + mySplitResult[0]); 
    console.log("<br /> The second element is  " + mySplitResult[1]); 
    console.log("<br /> The third element is  " + mySplitResult[2]); 

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:47:49.133

当您将引号放在引号中并尝试正确转义时，很难做到正确。你理解错了。

一个解决方案是将其分成小部分：

```
var action = "splitName('" + response.data[i].from.name + "');";
$("#groupUL").append("<li>" + "<h2>About ... onclick=\""+action+"\">..."); 
```

但最好的解决方案是遵循最佳实践，即不是内联 javascript，而是使用 jQuery 的绑定函数：

```
$("#groupUL").append("... <a id=myid ..."); 
$("#myid").click(function(){ splitName(response.data[i].from.name) }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:45:25.557

我认为您的代码的唯一问题是您的可读性问题。所以我建议请改进它。让我们来看看它。[我的代码示例](http://jsbin.com/awayuf/2/edit)@JSbin。

这是代码：-（我认为更好）

```
var response = {
  data : {
    message: 'Cleaning code',
    from: {
      name: 'Clean Code works'
    }
  }
};

var li = $('<li>'); //Create empty li (Not Appending to DOM now due to performance issues)

$('<h2>').html('About Item:' + response.data.message + '<br />').appendTo(li);
$('<h2>').html('Posted By:').appendTo(li);
$('<a>').attr('href', '#')
  .html(response.data.from.name)
  .appendTo(li)
  .click(function() {
    splitName(response.data.from.name);
  });

$('<br>').appendTo(li);

// Append li to ul (Final operation to DOM)
li.appendTo('#groupUL');

function splitName(txt){
    var myString = txt;

    var mySplitResult = myString.split(" ");

    console.log("The first element is " + mySplitResult[0]); 
    console.log("The second element is  " + mySplitResult[1]); 
    console.log("The third element is  " + mySplitResult[2]); 
} 
```

# kohana - ErrorException [致命错误]：找不到类“Database_PDO”

> ID：15559596
> 
> 赞同：0
> 
> 时间：2013-03-21T22:44:17.830
> 
> 标签：kohana

我正在尝试扩展位于 kohana\modules\database\classes\Kohana\Database 中的 Kohana_Database_PDO

为此，我在 kohana\application\classes\database 的 PDO.php 文件中创建了一个文件

我正在使用的代码是

```
<?php defined('SYSPATH') OR die('No direct script access.');
/**
 * PDO database connection.
 *
 * @package    Application
 * @category   Drivers
 */
class Application_Database_PDO extends Kohana_Database_PDO {} // End Database_PDO 
```

我得到错误：

* * *

**ErrorException [致命错误]：找不到类 'Database_PDO'** MODPATH\database\classes\Kohana\Database.php [78]

```
// Set the driver class name
    $driver = 'Database_'.ucfirst($config['type']);
    // Create the database connection instance
    $driver = new $driver($name, $config); <- highlighted line

    // Store the database instance
    Database::$instances[$name] = $driver;
} 
```

1.  {PHP 内部调用} » Kohana_Core::shutdown_handler()

* * *

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:57:57.320

如果此代码：

```
<?php defined('SYSPATH') OR die('No direct script access.');
/**
 * PDO database connection.
 *
 * @package    Application
 * @category   Drivers
 */
class Application_Database_PDO extends Kohana_Database_PDO {} // End Database_PDO 
```

是驻留在 APPPATH/classes/Database 中的 PDO.php 文件中的代码，那么难怪它不起作用。

您的文件应如下所示：

```
<?php defined('SYSPATH') or die('No direct script access.');
/**
 * PDO database connection.
 *
 * @package    Application
 * @category   Drivers
 */
class Database_PDO extends Kohana_Database_PDO {... 
```

否则，如果您需要它是 Application_... 那么您必须像这样执行您的文件夹结构：`APPPATH/classes/Application/Database/PDO.php`

默认情况下，Kohana 将 Classname`_`用作指针，并将每个字符串部分用作目录，除了最后一个是文件名

# unix - Unix命令或短python脚本列出文件，但不重新列出具有相似字符串的文件？

> ID：15559603
> 
> 赞同：0
> 
> 时间：2013-03-21T22:44:39.643
> 
> 标签：unix

假设您有一组文件：

```
a_1 a_2 a_3
b_1 b_2 b_3
c_1 c_2 c_3 
```

有没有办法通过命令外壳列出每个字符串的一部分并且只列出一次，即：a、b、c？

我知道你可以把它列出来

```
a_1, b_1, c_1 
```

但我希望它只列出字符串的第一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:18:18.583

Unix shell 由于其管道设计而非常强大。

没有一个`ls`选项可以满足您的要求（我知道），但是使用管道构建解决方案非常容易。

```
ls | awk '{print sub(/_.*/, "", $0); print $0}' | sort -u
 |     |                              |            |
 |     |                              |            > sorts output and makes it unique
 |     |                              > prints what is left of each line, after sub
 |     > sub(...) turns a_...., into just 'a', etc
 > create you list of files 
```

抱歉，现在没有时间为此构建测试。如果您遇到语法错误，请发表评论，我会尝试修复代码。

`/_.*/`这里非常“nard-coded”的一件事是将要删除的正则表达式。这意味着，“找到'_'字符，然后是之后的所有字符”，然后“将它们替换为`""`”中的值，在这种情况下是空字符串，有效地删除了单词的后缀部分。（试着把`"x"`而不是仅仅`""`为了明白我的意思）。

如果您的文件列表不像您的示例那么简单，您可能需要创建一个新的 reg-exp 来替换您想要删除的后缀部分。

如果您不熟悉管道，可以很容易地进行实验，一次添加一个管道集，以查看每个步骤如何修改输出。IHTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:54:17.317

Try doing this :

```
cd /path/where/files/exists
printf -- '%s\n' a_[1-3] b_[1-3] c_[1_3] 
```

or

```
cd /path/where/files/exists
ls -l a_[1-3] b_[1-3] c_[1_3] 
```

or anything you want with [the globs](http://mywiki.wooledge.org/glob)

# ruby - 通过 Rake::TestTask 将选项和参数传递给测试/单元

> ID：15559609
> 
> 赞同：1
> 
> 时间：2013-03-21T22:45:00.137
> 
> 标签：ruby, unit-testing, webdriver, rake

所以我一直试图弄清楚这一点，我能想出他的全局变量的最佳解决方案——但这看起来很脏，而且 1974 年——我是否缺少 Rake/Test::Unit 的一个功能？

**我有一个正在运行测试的 Rake 文件：**

```
Rake::TestTask.new(:test) do |t|
t.test_files = FileList['test_*.rb']
end 
```

**并且 test_1.rb 有这样的东西：**

```
require "test/unit"
class TestStuff < Test::Unit::TestCase
    def setup
              @thingy = Thing.New(parameter1, parameter2)
    end

    def test_this_thing
              @thing.do()
    end

end 
```

我的问题是， Thing.new() 需要参数，而这些参数特定于我的环境。实际上，我正在运行 Selenium-WebDriver，我想传入一个浏览器类型和一个 url 等……有时我想要 ff，有时我想要 chrome……有时是这个 URL，有时是那个……取决于日期等。

**最简单的事情*似乎*是这样的：**

```
#all that rake stuff
$parameter1 = x
$parameter2 = y 
```

**然后让 Thing.new() 查找我的全局变量：**

```
 @thingy = Thing.New($parameter1, $parameter2) 
```

这似乎草率..而且我觉得不对劲。我仍在努力让这个“测试工具”启动并运行，并希望第一次就做好。这就是我选择 Rake 的原因，基于很多其他反馈。

请记住，我最终可能会进行 100 次测试，他们都需要获取这些信息......我认为 Rake 擅长确保所有这些都很容易，但似乎并不是。

**我哪里做错了？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:17:27.363

我使用 YAML 文件来存储我的配置（浏览器配置、包括 URL 在内的环境等）。

您还可以使用环境变量来定义简单的配置。`ENV['foobar']`您可以通过Ruby访问环境变量。

因此，例如，我的浏览器调用在我的设置方法中可能如下所示：

```
 driver = Selenium::WebDriver.for (ENV['SWD_BROWSER'] || "firefox").to_sym 
```

并在我的 Rake 文件（或 shell 控制台）中定义要使用的环境变量。

# java - 通过网络有效地发送玩家动作

> ID：15559610
> 
> 赞同：4
> 
> 时间：2013-03-21T22:45:11.003
> 
> 标签：java, networking

我正在使用 Slick2D 制作 Java 游戏，并使用 Kryonet 进行多人游戏。当玩家按下 W、A、S 或 D 时，他们会移动，并且 PlayerMovePacket 对象会通过网络（通过 UDP）发送到服务器。然后服务器将其发送给其他客户端，这些客户端根据数据包内的信息设置该玩家位置的本地副本。

这是 PlayerMovePacket 的代码：

```
public class PlayerMovePacket {

public Vector2f pos;
public int clientID;

public PlayerMovePacket() {
    pos = new Vector2f(0, 0);
    clientID = -1;
}

public PlayerMovePacket(Vector2f v, int id) {
    pos = v;
    clientID = id;
}
} 
```

这样做，客户端/服务器会因过多的消息而过载，并崩溃。我看到的唯一其他选择是我只会每隔几毫秒发送一次玩家的位置。但是，客户端大部分时间都不会知道玩家的最新位置，并且动作会很跳跃

关于如何阻止服务器过载的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:48:38.447

添加一个阈值，为每一个小动作发送运动数据真的很重要吗？

另一种方法是按照建议每隔几毫秒聚合一次。如果玩家移动了 3 次（或 3 个动作），您可以将该移动聚合到一个数据包中，并为自己节省一些网络 I/O。不过，这实际上取决于游戏以及您的一致性保证是什么。在大多数情况下，每 25-50 毫秒发送一次数据是可以接受的，因为无论如何您都无法更快地感知到变化。

@jussi 还提到，您可以尝试在客户端预测运动，并在每次收到新的玩家位置数据包时简单地进行补偿，这也是可以接受的并且被广泛使用。我会谨慎尝试让它变得非常复杂，因为它会使游戏更加跳跃或滞后，但简单的直线轨迹就可以了。您可以在许多游戏中看到这种情况的示例，您会看到断开连接的人有时会原地运行或撞到游戏中的对象，直到服务器识别出他们实际上已断开连接并且这样的事情是可以接受的，因为您需要足够高的阈值来延迟峰值会不会导致客户端上的完整服务器断开连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:47:13.823

我想你可以每隔几毫秒发送一次位置并进行某种客户端预测，以减少它的跳跃。

# configuration - 如何获取 Trigger.io 应用程序的当前版本号

> ID：15559612
> 
> 赞同：1
> 
> 时间：2013-03-21T22:45:39.943
> 
> 标签：configuration, trigger.io

有没有办法从我的 Trigger.io 应用程序中获取应用程序配置设置，而无需重复[参数](http://docs.trigger.io/en/v1.4/modules/parameters.html)模块中的值？具体来说，我正在寻找版本号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-23T04:51:34.680

我已经成功（今天）使用**forge.config.version**

例子：

```
alert(forge.config.version) 
```

这返回了我在应用程序配置中输入的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:58:58.767

它曾经在 Javascript 中可用`forge.config`，但现在不再可用。有一段时间它在这个键下不可用（大约 v. 1.2）。从那以后它又出现了。

# javascript - 使用简单的 JavaScript

> ID：15559614
> 
> 赞同：0
> 
> 时间：2013-03-21T22:45:46.310
> 
> 标签：javascript, html

我创建了我的`<form>`using`HtmL`现在我需要知道如何创建一个函数，我可以返回一个值来填充我的`Input type="text"`.

例如： **更新**

```
 <html>
<head>
<title>Aula 21.03.2013 </title>
<script>
    function CalculaNota()
    {
        var p1 = document.getElementById("txtp1").value;
        var p2 = document.getElementById("txtp2").value;        

        return p1;
    }

</script>
</head>
<body>
    <div id="fieldset" style="border: 2px solid pink; width: 250px; margin-left: auto; margin-right: auto; padding: 10px;" >
    <form name="formulario" action="" method="post">
        P1<br>
        <input type="text" id="txtp1" /><br>
        P2<br>
        <input type="text" id="txtp2" /><br>

        <input type="submit" value="CALCULAR"  OnClick="CalculaNota()"/> 
        <br><br>

        NOTA FINAL<br>
        <input type="text" id="txtnota_final"/>
    </form>
    </div>  
</body>
</html> 
```

现在，当我单击按钮时，什么也没有发生！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:51:05.853

尝试这个：

```
 function CalculaNota()
    {
        var p1 = parseFloat(document.getElementById("txtp1").value);
        //You were re-assigning p1 here, I've changed it to p2
        var p2 = parseFloat(document.getElementById("txtp2").value);     
        var NF = ((p1 + (2 * p2)) / 3);

        document.getElementById("txtnota_final").value = NF;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:51:21.580

```
<script>
    document.getElementById('bt_calcular').onclick = function ()
    {
        var p1 = parseFloat(document.getElementById("txtp1").value);
        var p2 = parseFloat(document.getElementById("txtp2").value);        
        var NF = ((p1 + (2 * p2)) / 3);
        document.getElementById('txtnota_final').value = NF;
    }
</script> 
```

这是一个小提琴[http://jsfiddle.net/8EkMf/1](http://jsfiddle.net/8EkMf/1)

你也应该`form`在最后一个之前关闭你的标签`div`

你没有关闭你的脚本标签

`<script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>`

而且你不需要 jquery .. 你正在使用 vanila javascript

# magento - 如何将富文本（所见即所得）字段添加到 Magento 小部件

> ID：15559622
> 
> 赞同：1
> 
> 时间：2013-03-21T22:46:11.143
> 
> 标签：magento, tinymce, magento-1.7, richtext

我为 magento 创建了一些小部件。一切都很好，但我似乎无法弄清楚如何将富文本（tinymce wysiwyg）字段添加到我的小部件。

我唯一发现的是：在“$fieldset->addField”中“使用'所见即所得'=> true”。但是我不能在我的自定义小部件中使用它，可以吗？

我知道我可以使用 addField 将字段添加到例如产品或 CMS 页面。

但据我所知，在我的自定义小部件中添加字段的唯一方法是在我的 widget.xml 中添加参数。我按照一些教程构建的其他小部件通过使用自定义类型作为参数返回一个按钮：

```
$removeButton = $this->getLayout()->createBlock('adminhtml/widget_button')
        ->setType('button')
        ->setClass('delete')
        ->setLabel($this->__('Remove Image'))
        ->setOnclick('document.getElementById(\''.$element->getId().'\').value=\'\';if(document.getElementById(\''.$element->getId().'_image\'))document.getElementById(\''.$element->getId().'_image\').parentNode.remove()')
        ->setDisabled($element->getReadonly())
        ->setStyle('margin-left:10px;margin-top:7px'); 
```

但我只是不知道如何在我的 Widget.xml 或我的 phpfile 中为自定义类型添加富文本字段。

我错过了什么？希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T15:48:09.403

stackoverflow上有一些相关的条目，如果你仍然有这个问题，请尝试搜索。另外，看看这篇精彩的文章：[http](http://www.behrendt.io/2013/04/12/using-a-wysiwyg-editor-in-a-magento-widget/) ://www.behrendt.io/2013/04/12/using-a-wysiwyg-editor-in-a-magento-widget/ 它帮助我入门。我让它作为纯文本字段工作，但每当我将该字段变为真正的所见即所得时，内容永远不会更新，并且 AJAX 调用不包含新的 HTML。

# linq - 选择具有 EntityObject 和列名称作为参数的单个列

> ID：15559625
> 
> 赞同：0
> 
> 时间：2013-03-21T22:46:18.587
> 
> 标签：linq, entity-framework

我有一个数据库上下文和一个在我的类中引用的 EntityObject。将列名作为参数传递给方法，我想实现这一点：

```
SELECT ColumnA FROM TableA 
```

如何使用实体框架/linq 做到这一点？

编辑：所以方法大纲应该是这样的：

```
public IQueryable<string> GetAllFromColumn(EntityObject object, string columnName)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:05:20.197

context.TableA.Select(record => record.ColumnA).ToList();

# jquery - 对话框内的 Ajax 调用，对话框关闭不起作用

> ID：15559627
> 
> 赞同：0
> 
> 时间：2013-03-21T22:46:21.647
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我对 jQuery 和 Javascript 还很陌生。我的问题是 jQuery UI 对话框。我有一个表格，我在其中单击一行并将更多详细信息填充到对话框中。对话框将在其中包含一个表单和一个表格。当用户输入详细信息并单击表单时，我会检查用户输入并将表单再次显示回对话框中，但是当发生这种情况时，对话框关闭按钮不起作用。

有人可以建议如何解决这个问题吗？感谢您的帮助。

```
$.ajax({
    type:"POST",
    dataType:"html",
    url:"form/add/"+estimateId,
    cache:false,
    //data:a,
    success:function(html){
        //alert(html);
        $(".projectMaintenance").html(html);
        $(".projectMaintenance").dialog({
            resizable:false,
            height:750,
            width:900,
            modal:true,
            buttons:{
                "Close":function(){
                    $(this).dialog('destroy');
    .... 
```

这是我用来在对话框中提交表单的脚本。

```
var a=$('form').serialize();

$.ajax({
    type:"POST",
    dataType:"html",
    url:"form/save",
    cache:false,
    data:a,
    success:function(html){
        alert(html);
        $(".projectMaintenance").html(html);
....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:58:36.383

您只需在用户选择关闭选项时执行 ajax 请求，以保持更具可读性和友好性，创建一个 trySend() 函数

```
$.ajax({
        type:"POST",
        dataType:"html",
        url:"form/add/"+estimateId,
        cache:false,
        //data:a,
        success:function(html){
            //handle if everything it's ok and should show the dialog....
            $(".projectMaintenance").html(html);
            $(".projectMaintenance").dialog({
                resizable:false,
                height:750,
                width:900,
                modal:true,
                buttons:{

                    "Close":function(){

                        $(this).dialog('destroy');

                        buttons: {
                            "Close": function () {
                                $(this).dialog('close');
                                trySend();
                            }
                        } 
```

......

和 trySend 函数

```
 function trySend(){
            var a=$('form').serialize();
            $.ajax({
                type:"POST",
                dataType:"html",
                url:"form/save",
                cache:false,
                data:a,
                success:function(html){
                    alert(html);

                    $(".projectMaintenance").html(html);
                });
        } 
```

# asp.net-mvc - 如果不在集合中，则添加到选择列表

> ID：15559629
> 
> 赞同：0
> 
> 时间：2013-03-21T22:46:40.687
> 
> 标签：asp.net-mvc, drop-down-menu, conditional, selectlist

我正在使用下拉框的 html 助手，如果对象不在我的模型中的另一个 ICollection 属性中，我想填充选择列表。

基本上它是一个与团队有关的应用程序，我希望能够检查一个球员是否已被选中与一个团队开始对抗，以及他/她是否在首发团队列表中，那么他们将不会成为下拉列表中的选项picksSubs 视图。

对此查询的开放性表示歉意。请提供您可能有的任何建议！

非常感谢，

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:21:57.870

类似于以下内容：

```
public class MyViewModel
{
    public int Selected { get; set; }

    public List<Person> All { get; set; }
    public List<Person> Exclude { get; set; }

    // Create selectlist of items which are not in exclude list
    public SelectList GetSelectList
    {
        get
        {
            var r = All.Where(q => !Exclude.Any(p => p.ID == q.ID)).OrderBy(p => p.Name).ToList();
            return new SelectList(r, "ID", "Name", Selected);
        }
    }

    public MyViewModel()
    {
        All = new List<Person>();
        Exclude = new List<Person>();
    }
} 
```

鉴于：

```
@Html.DropDownListFor(model => model.Selected,Model.GetSelectList) 
```

# android - 永远运行的线程+在android中更新UI

> ID：15559630
> 
> 赞同：1
> 
> 时间：2013-03-21T22:46:40.833
> 
> 标签：android, multithreading

假设我有一个 TextView 并且我想用随机数连续更新它的文本，从应用程序开始到它终止。

执行此类任务的方法是什么？一定要定时吗？（即每秒更新一次等）不能使用带有while(true) 的语句，因为android 中只有一个UI 线程，而这样的语句会永远阻塞它。

**编辑：**感谢您提供快速准确的答案。在看到答案并稍微思考之后，我想出了一个棘手的方法来实现这一点。这种技术有什么缺点吗？

```
 TextView tv;
Handler myHandler;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     
    tv=(TextView) findViewById(R.id.textView1);     
    myHandler=new Handler();
    myHandler.post(new Nani());
}

    private class Nani implements Runnable{
    int i=0;
    @Override
    public void run() {
        tv.setText(Integer.toString(i));
        myHandler.post(this);
        i++;
    }       
} 
```

简单地说，Runnable 自己排队..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:51:01.260

在不知道更多关于你到底在做什么的情况下，例如何时或为什么，你会想要使用[Handler](http://developer.android.com/reference/android/os/Handler.html)和`postAtTime()`. [文档的这一部分](http://developer.android.com/guide/components/processes-and-threads.html#WorkerThreads)更多地讨论了如何根据您的需要处理这些事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:52:33.367

这可以通过使用 Looper 类来实现：http: [//developer.android.com/reference/android/os/Looper.html](http://developer.android.com/reference/android/os/Looper.html)

一个很好的使用教程，可以在这里找到：http: [//pierrchen.blogspot.dk/2011/10/thread-looper-and-handler.html](http://pierrchen.blogspot.dk/2011/10/thread-looper-and-handler.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:49:49.040

我认为最好的方法是使用带有计时器的处理程序。但请确保您在进行一项或其他活动时不得杀死或终止跑步者

例如：

```
 private void timer() {
      mRunnable = new HandlerManger();
      mHandler = new Handler();
      mHandler.postDelayed(mRunnable, 1000*10);
   } 
```

可运行的

```
 private class HandlerManger implements Runnable {

      @Override
      public void run() {
        // your business logic method here;
      }
   } 
```

活动

```
 private Handler mHandler;
   private Runnable mRunnable;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.act...);
      timer();
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T22:53:41.753

This example approach with self-restarting `CountDownTimer` would do. Though this might be not the best approach, it will work

```
 public class CountDown extends Activity {

      TextView tv; 

       /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

       tv = new TextView(this);
       this.setContentView(tv);

      //5000 is the starting number (in milliseconds)
      //1000 is the number to count down each time (in milliseconds)
      MyCount counter = new MyCount(5000,1000);

      counter.start();

         }

         public class MyCount extends CountDownTimer{

      public MyCount(long millisInFuture, long countDownInterval) {
         super(millisInFuture, countDownInterval);
         }

          @Override
         public void onFinish() {
         this.start();
         }

       @Override
        public void onTick(long millisUntilFinished) {
       tv.setText("your values here");

      }

     }
    } 
```

# asp.net-mvc-3 - 我是否在 MVC ASP.NET 中不必要地复制模型？

> ID：15559633
> 
> 赞同：3
> 
> 时间：2013-03-21T22:46:45.527
> 
> 标签：asp.net-mvc-3, model-view-controller, mvvm

我刚开始第一次做MVC项目，遇到了一个我真的没想到的问题：模型太多。

没有太多不同的型号，但有太多细微不同但几乎完全相同的型号。

我有一个相当复杂的页面，有几个组合框、一个详细对象列表和一些我需要跟踪的无关紧要的东西。视图中的信息比我返回的信息多（这很好）。

我有一个域模型，它始终保持不变。（1 个模型）

我有一个单一用途的视图模型，它是域模型和一些围绕它的额外信息。（1 个模型）

我有一个单次使用的表单模型，它是视图模型的副本，其中包含域模型的空壳副本，上面有验证内容。(2 款)

今天下午我需要更改一个属性的类型，并且我有三个不同的地方可以更改它。看来我的模型太多了，都是单人使用的。对于本应比经典 ASP.NET 容易得多的东西，它似乎做了很多工作。

我的问题是：我做得对吗？是否应该有多种模型，还是我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:24:05.930

不完全确定您示例中的表单模型的用途 - 您是使用它来限制来自客户端的可发布字段还是使用它来映射到您的域？

在我自己的 MVC 网站中，我将拥有一个域模型（可能只是一个本地域或来自远程 WCF 服务），我将其一对一映射到我的个人 ViewModel 中，以便在屏幕上呈现并接收回传。这些还包含我的验证（无论是注释还是流利的等）。

然后，任何属性名称更改都将仅限于相关页面的 ViewModel 和域。

如果您处于在域模型之间复制属性的情况，那么某种基本视图模型结构将为您提供通用实体的良好服务，但总的来说，我个人认为这不是一个巨大的开销。

# ios - Jquery Mobile 修复了 PhoneGap 中的标题错位

> ID：15559639
> 
> 赞同：1
> 
> 时间：2013-03-21T22:47:16.957
> 
> 标签：ios, cordova, jquery-mobile

我正在开发一个使用 jquery mobile 的 phonegap 应用程序。我目前正在IOS模拟器中调试。

我正在使用来自 JQuery Mobile 的持久固定标题工具栏。

在我的登录页面上，我有一个用于输入用户名和密码的表单。

输入用户名和密码后，用户点击“go”，表单开始提交，键盘被隐藏，然后顶部的标题工具栏被推下页面。

有没有人有这个问题的解决方法，所以标题保持在顶部？

下面的屏幕截图是初始视图和表单提交后带有下推标题的视图。

谢谢！

-威利

![在此处输入图像描述](../Images/1280da845740315b996db568e43d989d.png)

![在此处输入图像描述](../Images/f7f5af5ce36ef5c264c3db667c3ea0e4.png)

# django - 如何防止用户成为超级用户

> ID：15559640
> 
> 赞同：1
> 
> 时间：2013-03-21T22:47:17.547
> 
> 标签：django, permissions, django-admin, root

我的项目中有一些经理，他们是“员工”，因此可以访问管理面板。此外，他们可以添加和更改用户。

所以，我想阻止他们将他们的个人资料更改为“超级用户”。我还想向经理隐藏用户编辑表单中的“权限”部分。

我想，这`auth|permission|can change\add\delete permission`是管理这个，但我的经理没有这样的权限，并且在用户编辑表单中仍然有“权限”部分。

# java - Google 应用引擎 - 提交表单

> ID：15559648
> 
> 赞同：0
> 
> 时间：2013-03-21T22:47:50.990
> 
> 标签：java, google-app-engine, jsp, servlets

我创建了这个 servlet 方法：

```
/**
 * Create the entity and persist it.
 */
protected void doPut(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    logger.log(Level.INFO, "Creating User!!!");
    PrintWriter out = resp.getWriter();

    String email = req.getParameter("email");
    String password = req.getParameter("password");
    try {
        user.insert(email, password);
        Log.info("Inserted: " + email + "    " + password);
    } catch (Exception e) {
        String msg = DAOUser.getErrorMessage(e);
        out.print(msg);
    }
} 
```

并希望通过以下值插入 GAE DB：

```
 <form class="form-horizontal" action="/user" method="put">
                                        <fieldset>
                                            <div class="control-group">

                                                <!-- Text input-->
                                                <label class="control-label" for="input01">Email:</label>
                                                <div class="controls">
                                                    <input name="email" placeholder="email" class="input-xlarge" type="text">
                                                    <%=request.getParameter("email") %>
                                                </div>
                                            </div>

                                            <div class="control-group">

                                                <!-- Text input-->
                                                <label class="control-label" for="input01">Password:</label>
                                                <div class="controls">
                                                    <input name="password" placeholder="password" class="input-xlarge"
                                                        type="text">
                                                    <%=request.getParameter("email") %>
                                                </div>
                                            </div>

                                        </fieldset>
                                    </form>
<div class="modal-footer">
                                    <a href="#" class="btn" data-dismiss="modal">Close</a> <a
                                        href="#" class="btn btn-primary" type="submit" value="Submit">Save
                                        Changes</a>
                                </div> 
```

但是，它不起作用，如果 servlet 映射正确：

```
<servlet-mapping>
        <servlet-name>DAOServletUser</servlet-name>
        <url-pattern>/user</url-pattern>
    </servlet-mapping> 
```

我的错误是什么？

**更新** 当我重新启动服务器时，我得到了这个：

```
Mär 22, 2013 6:46:07 AM com.google.appengine.tools.development.ApiProxyLocalImpl log
SEVERE: javax.servlet.ServletContext log: unavailable
javax.servlet.UnavailableException: Servlet class gaeTrader2.server.dao.DAOServletUser is not a javax.servlet.Servlet
    at org.mortbay.jetty.servlet.ServletHolder.checkServletType(ServletHolder.java:362)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:243)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:228)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:255)
    at com.google.appengine.tools.development.AbstractServer.startup(AbstractServer.java:79)
    at com.google.appengine.tools.development.DevAppServerImpl$Servers.startup(DevAppServerImpl.java:451)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:198)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

为什么？

**Servlet 类 gaeTrader2.server.dao.DAOServletUser 不是 javax.servlet.Servlet**

我的 Servlet 看起来像这样：

```
import java.io.IOException;
import java.io.PrintWriter;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.mortbay.log.Log;

public class DAOServletUser extends HttpServlet {
    private static final Logger logger = Logger.getLogger(DAOServletUser.class.getCanonicalName());
    /**
     * Get the entities in JSON format.
     */

    IDAOUser user;

    /**
     * Create the entity and persist it.
     */
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        logger.log(Level.INFO, "Creating User!!!");
        PrintWriter out = resp.getWriter();

        String email = req.getParameter("email");
        String password = req.getParameter("password");
        try {
            user.insert(email, password);
            Log.info("Inserted: " + email + "    " + password);
        } catch (Exception e) {
            String msg = DAOUser.getErrorMessage(e);
            out.print(msg);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:49:33.103

我认为您应该在服务器上使用 doGet 或 doPost 并在客户端使用对应的方法。

UPD：您在 web.xml 中的 servlet 描述似乎也不完整：

```
`<servlet>
    <servlet-name>DAOServletUser</servlet-name>
<servlet-class>your.package.name.YourServletClass</servlet-class>
</servlet>
<servlet-mapping>
        <servlet-name>DAOServletUser</servlet-name>
        <url-pattern>/user</url-pattern>
    </servlet-mapping>` 
```

* * *

 `## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:05:18.943

您的 DAOServletUser 类应该从 HttpServlet 扩展。`

# java - 使用 @EnableAspectJAutoProxy 找到的方面“手动”编织 bean

> ID：15559649
> 
> 赞同：0
> 
> 时间：2013-03-21T22:47:52.953
> 
> 标签：java, spring, annotations, aspect, proxyfactory

我正在使用完全无 XML 的 Spring 设置，并且我成功地`@EnableAspectJAutoProxy`与我的`@Configuration`类一起使用并找到了我的方面类与 和 的`@Aspect`组合`@Component`。

但是我已经到了需要按需编织/增强未使用 spring 上下文创建的实例的地步，但我能找到的只是如何使用`ProxyFactory`. 但是我需要手动添加建议`ProxyFactory.addAdvice(..)`，我已经用 (例如) 写过一次`@Before`。

我不想再重写那些了。

`@EnableAspectJAutoProxy`有没有办法通过使用注释来获得对（我猜？）内部创建的工厂的引用？这样我就可以做类似的事情：

```
@Autowired
private AspectJAutoProxyInstanceFactory f; // made up class, of course
[...]
Object bean = f.weave(obj); 
```

或者实例化一个可以找出我的应用程序中已经存在哪些建议的工厂：

```
// Also a made up class, of course.
ApplicationContextAwareProxyFactory f = new ApplicationContextAwareProxyFactory(applicationContext);
Object bean = f.weave(obj); 
```

我试图环顾四周，但似乎找不到答案。可能我只是看的不够好。提前谢谢，如果你能帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:17:39.970

我希望我正确理解了这个问题。

为了实现这一点，您可以使用没有弹簧的编译时编织。它比 spring 的基于代理的方法强大得多，并且您不必更改方面，因为 spring 已经从 AspectJ 借用了 @Aspect 注释。

您可以使用 maven 和[aspectj-maven-plugin轻松实现](http://mojo.codehaus.org/aspectj-maven-plugin/)

下面是一个配置示例：

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>aspectj-maven-plugin</artifactId>
        <version>1.4</version>
        <executions>
          <execution>
            <goals>
              <goal>compile</goal>       <!-- use this goal to weave all your main classes -->
              <goal>test-compile</goal>  <!-- use this goal to weave all your test classes -->
            </goals>
          </execution>
        </executions>
      </plugin> 
```

如果您想编织第三方 jar 中的代码，请像这样配置它：

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>aspectj-maven-plugin</artifactId>
        <version>1.4</version>
        <configuration>
          <weaveDependencies>
            <weaveDependency>
              <groupId>org.agroup</groupId>
              <artifactId>to-weave</artifactId>
            </weaveDependency>
            <weaveDependency>
              <groupId>org.anothergroup</groupId>
              <artifactId>gen</artifactId>
            </weaveDependency>
          </weaveDependencies>
        </configuration>
        <executions>
          <execution>
            <goals>
              <goal>compile</goal>
            </goals>
          </execution>
        </executions>
      </plugin> 
```

# php - 删除多维数组中的元素并保存

> ID：15559651
> 
> 赞同：6
> 
> 时间：2013-03-21T22:47:58.793
> 
> 标签：php, multidimensional-array

我试图弄清楚如何删除一个主要元素及其所有兄弟元素，然后保存数组。

这是我得到的：

```
$my_array = Array
(
    [0] => Array
        (
            [username] => Pete
            [userid] => 2
        )

    [1] => Array
        (
            [username] => James
            [userid] => 4
        )

     [2] => Array
        (
            [username] => John
            [userid] => 3
        )

) 
```

现在，我想要做的是删除我拥有用户 ID 4 的元素，然后将其全部保存回 $my_array 中，如下所示：

```
$my_array = Array
(
    [0] => Array
        (
            [username] => Pete
            [userid] => 2
        )

     [2] => Array
        (
            [username] => John
            [userid] => 3
        )

) 
```

这可以做到吗？如果是的话......如何？？？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T22:55:33.633

试试这个：

```
foreach ($array as $key => $value) { 

    if ($value["userid"] == 4) { unset($array[$key]); }

} 
```

# c# - 外部 SQL 服务器上的实体框架代码优先

> ID：15559652
> 
> 赞同：0
> 
> 时间：2013-03-21T22:48:01.610
> 
> 标签：c#, asp.net-mvc-4, entity-framework-4

我正在关注实体框架教程： [链接](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)

我已经下载了源代码，然后运行。该项目工作正常（使用默认连接字符串）。

```
<add name="SchoolContext" connectionString="Data Source=|DataDirectory|School.sdf" providerName="System.Data.SqlServerCe.4.0" /> 
```

接下来，我更改了连接字符串以连接到远程服务器（成功连接）。但是没有创建表，并且在运行应用程序并访问控制器时出现以下错误。

**错误：**

```
Model compatibility cannot be checked because the database does not contain 
model metadata. Model compatibility can only be checked for databases created 
using Code First or Code First Migrations. 
```

我的数据库用户是“dbowner”，所以我不会想象这是数据库访问问题。

我是 EF 新手，对 Code First 迁移了解不多。您是否遇到过上述错误，代码迁移会解决这个问题吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:09:49.330

根据我的阅读（如果我错了，请纠正我），这里的情况是您在远程服务器上有一个现有的（可能是空的）数据库，您希望将您的 EF 代码优先工作放入其中。

出现错误是因为，我认为 EF 正在寻找一个 _MigrationHistory 表（关于已针对它运行的 EF 代码优先迁移的元数据等）并且找不到它。对于一些背景/兴趣阅读，[这里](http://elegantcode.com/2012/04/12/entity-framework-migrations-tips/)对该表进行了一些合理的覆盖。

所以为了解决这个问题，我认为要采取的步骤是：

1.  初始化您的数据库，以便它承认 EF 代码优先的东西
2.  更新数据库，将所有迁移前滚到迄今为止

[我在这里](http://www.ralphlavelle.net/2012/02/using-entity-framework-code-first-with_26.html)找到了一些关于如何做到这一点的很好的报道。该博客还对一般的 EF 主题进行了一些很好的报道

**PS。**我猜你的 .dsf/SQL 精简版数据库不会有这个问题，因为 EF 代码优先会在第一次运行时为你创建它，所以它已经被确认为代码优先数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:59:13.747

[这](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)是 Entity Framework Power Tools 的链接。它用于通过“逆向工程”远程服务器上的数据库来创建模型。然后，您可以使用 EF 轻松访问此数据库。

> 逆向工程师 Code First - 为现有数据库生成 POCO 类、派生的 DbContext 和 Code First 映射

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:50:48.977

当数据库已经存在时，我尝试过的两种初始化方法都失败了：

```
Database.SetInitializer<Context>(new Initializer());
Database.SetInitializer(new DropCreateDatabaseIfModelChanges<Context>()); 
```

但是，可以使用以下命令强制删除数据库：

```
Database.SetInitializer(new DropCreateDatabaseAlways<Context>()); 
```

以下 SO 帖子提供了我的问题的答案： [在 SQL Server 2008 上设置实体框架代码优先数据库](https://stackoverflow.com/questions/8687167/setting-up-a-entity-framework-code-first-database-on-sql-server-2008)

我尝试了两者的结合，并决定最好的解决方案是手动进入 SQL Management Studio 并 DROP 数据库，并使用初始化程序重新创建它，因为这允许我播种数据库的内容。

```
Database.SetInitializer<Context>(new Initializer()); 
```

有关播种数据库的更多信息，请参见此处，因为它也是一个非常不稳定的过程！ [如何使用 Entity Framework CodeFirst 让我的数据库播种？](https://stackoverflow.com/questions/6312336/how-can-i-get-my-database-to-seed-using-entity-framework-codefirst)

# c++ - 带有提示的 std::unordered_map 插入

> ID：15559655
> 
> 赞同：42
> 
> 时间：2013-03-21T22:48:33.920
> 
> 标签：c++, stl, c++11

`std::map`有一个`insert`方法采用“提示”迭代器，如果提示正确，该迭代器会将插入时间从 log(n) 减少到恒定时间。很明显这是如何工作的，因为容器可以确保新添加的项目具有小于提示的键并且具有大于提示之前的项目的键。否则提示是错误的，它会执行正常的插入。

`std::unordered_map`也有类似`insert`的with提示功能。如果有的话，提示有什么作用？对我来说，如何使用另一个“提示”迭代器来加速哈希映射插入并不明显。

如果使用，什么是适当的“提示”。在`std::map`中，通常通过调用`lower_bound`地图来找到提示。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-21T22:57:47.783

这是一个接口兼容性问题。基本上，设计是在考虑`std::map`.

换句话说，因为`std::unordered_map`它没有区别，所以提供或不提供提示。

**此处评论的其他信息：**

界面兼容性非常重要，因为能够快速/轻松地在两者之间切换`map`并`unordered_map`提供无痛转换的宝贵灵活性，因为性能通常是选择一个而不是另一个的决定因素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-05T22:03:09.880

该提示允许无序映射实现首先进行值比较以查看提示是否有效。这避免了必须执行比比较操作更昂贵的哈希函数。

# javascript - 单独文件中的 jQuery 函数，

> ID：15559657
> 
> 赞同：3
> 
> 时间：2013-03-21T22:48:41.533
> 
> 标签：javascript, jquery, input

我在 stackoverflow 上找到了一个很好的 jQuery 脚本，我想把它放在一个单独的 .js 文件中。

我想这样做是因为我想在超过 1 页上使用该文件。

如果我将此代码放在特定页面上的脚本标记中，它可以工作，但是当我在头部引用它时，它确实存在。

```
 (function ($) {

// jQuery autoGrowInput plugin by James Padolsey

$.fn.autoGrowInput = function (o) {

    o = $.extend({
        maxWidth: 1000,
        minWidth: 10,
        comfortZone: 10
    }, o);

    this.filter('input:text').each(function () {

        var minWidth = o.minWidth || $(this).width(),
            val = '',
            input = $(this),
            testSubject = $('<div/>').css({
                position: 'absolute',
                top: -9999,
                left: -9999,
                width: 'auto',
                fontSize: input.css('fontSize'),
                fontFamily: input.css('fontFamily'),
                fontWeight: input.css('fontWeight'),
                letterSpacing: input.css('letterSpacing'),
                whiteSpace: 'nowrap',
                textIndent: 0
            }),
            check = function () {

                if (val === (val = input.val())) { return; }

                // Enter new content into testSubject
                var escaped = val.replace(/&/g, '&amp;').replace(/\s/g, '&nbsp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                testSubject.html(escaped);

                // Calculate new width + whether to change
                var testerWidth = testSubject.width(),
                    newWidth = (testerWidth + o.comfortZone) >= minWidth ? testerWidth + o.comfortZone : minWidth,
                    currentWidth = input.width(),
                    isValidWidthChange = (newWidth < currentWidth && newWidth >= minWidth)
                                            || (newWidth > minWidth && newWidth < o.maxWidth);

                // Animate width
                if (isValidWidthChange) {
                    input.width(newWidth);
                }

            };

        testSubject.insertAfter(input);

        $(this).bind('keyup keydown blur update', check);

        // Resize the input to the correct size from the beginning.
        check();

    });

    return this;

};       })(jQuery);           $('input').autoGrowInput(); 
```

* * *

我就是这样做的：

我把它放在一个单独的文件中：

```
 (function ($) {

    // jQuery autoGrowInput plugin by James Padolsey

    $.fn.autoGrowInput = function (o) {

        o = $.extend({
            maxWidth: 1000,
            minWidth: 10,
            comfortZone: 10
        }, o);

        this.filter('input:text').each(function () {

            var minWidth = o.minWidth || $(this).width(),
                val = '',
                input = $(this),
                testSubject = $('<div/>').css({
                    position: 'absolute',
                    top: -9999,
                    left: -9999,
                    width: 'auto',
                    fontSize: input.css('fontSize'),
                    fontFamily: input.css('fontFamily'),
                    fontWeight: input.css('fontWeight'),
                    letterSpacing: input.css('letterSpacing'),
                    whiteSpace: 'nowrap',
                    textIndent: 0
                }),
                check = function () {

                    if (val === (val = input.val())) { return; }

                    // Enter new content into testSubject
                    var escaped = val.replace(/&/g, '&amp;').replace(/\s/g, '&nbsp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                    testSubject.html(escaped);

                    // Calculate new width + whether to change
                    var testerWidth = testSubject.width(),
                        newWidth = (testerWidth + o.comfortZone) >= minWidth ? testerWidth + o.comfortZone : minWidth,
                        currentWidth = input.width(),
                        isValidWidthChange = (newWidth < currentWidth && newWidth >= minWidth)
                                                || (newWidth > minWidth && newWidth < o.maxWidth);

                    // Animate width
                    if (isValidWidthChange) {
                        input.width(newWidth);
                    }

                };

            testSubject.insertAfter(input);

            $(this).bind('keyup keydown blur update', check);

            // Resize the input to the correct size from the beginning.
            check();

        });

        return this;

    };

})(jQuery); 
```

然后我像这样从布局中调用它：

```
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
    <script src="~/Scripts/Forms/dynamicFormSize.js"></script>
</head>
<body>
    <script type="text/javascript">
        $(document).ready(function () {
            $('input').autoGrowInput();
        });
    </script>

    // REST OF SITE HERE...
</body> 
```

它仍然不起作用，我可以补充一点，我使用 MVC 框架。

**控制台错误：未捕获的 TypeError：对象 [object Object] 没有方法“autoGrowInput”**

我也可以说 .js 文件包含在源代码中，对于 $('input').autoGrowInput(); 也是如此

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:51:36.183

`$('input').autoGrowInput();`您必须在加载文档后调用。

尝试这个：

```
$(function(){
    $('input').autoGrowInput();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:51:27.477

您在代码中对 的引用`autoGrowInput`应该是在内联定义它或指定包含它的外部脚本标记之后出现的。

您还必须在已经加载的元素上使用它。

尝试像这样使用文档就绪事件：

```
$(function(){
    $('input').autoGrowInput();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T22:54:37.633

First make sure you reference `jquery` and then your script

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="yourScript.js"></script> 
```

Then call function after document is ready.

```
<script type="text/javascript">
$('document').ready(function(){
  $('input').autoGrowInput();
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T03:56:18.077

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="yourScript.js"></script>
<script type="text/javascript">
    $('document').ready(function(){
        autoGrowInput();
    });
</script> 
```

清除浏览器上的缓存....并再次测试。

# c++ - C++11 lambdas 和方括号

> ID：15559658
> 
> 赞同：23
> 
> 时间：2013-03-21T22:48:44.987
> 
> 标签：c++, syntax, c++11, lambda

查看此示例 lambda：

```
[](int factor)->int{return factor*factor;} 
```

谁能向我解释一下C++11 lambda 表达式前面的**方括号有什么用？**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-21T22:52:47.063

方括号指定 lambda “捕获”哪些变量，以及如何（按值或引用）。

捕获意味着您可以从 lambda 内部引用 lambda 外部的变量。如果按值捕获，您将在创建 lambda 时获取变量的值——类似于按值将参数传递给函数。如果通过引用捕获，您将引用 lambda 之外的实际变量（并且您需要确保它保持在范围内）。

请注意，在类中，您可以捕获“this”，然后像在类方法中一样调用类方法。

# c# - 如何以匿名方法将 DBSet 转换为接口 - EF

> ID：15559659
> 
> 赞同：1
> 
> 时间：2013-03-21T22:48:49.677
> 
> 标签：c#, asp.net-mvc, entity-framework, interface, anonymous-function

我的 SQL 数据库中有许多存储基本 KVP 数据的表。它们都有 Id(int)、Description(varchar(..)) 的模式。

我在我的 MVC 应用程序中的一个或另一个阶段都需要它们，我正在尝试创建一个匿名方法，该方法将采用实体类的类型并返回该项目数据的列表。我希望能够将此方法用于我的数据库中的任意数量的表，而不必过多地扩展我正在编写的方法。

**示例数据：**

*   编号：1，描述：红色
*   编号：2，描述：蓝色
*   编号：3，描述：绿色

**ISet 实现：**

```
public interface ISet
{
    int Id { get; set; }
    string Description { get; set; }
} 
```

**可能的方法实现**

```
public static IList<T> BuildSet<T>()
{
    using (var db = new somethingEntities())
        return db.Set(typeof(T)).Cast<ISet>().Select(c => new { c.Id, c.Description }).ToList();
} 
```

**用法**

```
var data = BuildSet<YourType>(); 
```

**运行时错误**

```
Cannot create a DbSet<ISet> from a non-generic DbSet for objects of type 'YourType'. 
```

有谁知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:47:56.877

问题解决了。

**方法声明**

```
public static List<ISet> BuildSet<T>() where T : class
{
    using (var db = new somethingEntities())
        return db.Set<T>().ToList().Cast<ISet>().ToList();
} 
```

**用法**

```
var data = ...BuildSet<YourType>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:47:24.810

我假设`DbSet`'s 很小，因为`ToList()`会一次性获取所有结果？

但是，这是您的代码的更简单版本（您`ISet`在泛型类型约束中指定接口）：

```
public static IList<ISet> BuildSet<T>() 
    where T : class, ISet
{
    using (var db = new somethingEntities())
        return db.Set<T>().ToList();
} 
```

您的 DbContext 还可以选择扩展方法：

```
public IEnumerable<ISet> BuildSet<T>(this DbContext context)
    where T : class, ISet
{
    return context.Set<T>().AsEnumerable();
} 
```

然后您可以在上下文的生命周期内使用它，以实现更有效的操作。（我知道我假设太多，但无论如何我觉得这是有用的信息。）

```
public void SomeOperation()
{
    using (var db = new somethingEntities())
    {
        foreach (var item in db.BuildSet<SimpleSet>())
        {
            //do something with item
            //SaveChanges() every 100 rows or whatever
        }
    }
} 
```

# macos - 错误“../../nsprpub：没有这样的文件或目录。” 在 OS X 上构建 Firefox 时

> ID：15559662
> 
> 赞同：0
> 
> 时间：2013-03-21T22:49:31.033
> 
> 标签：macos, firefox, mozilla

[我遵循了Mozilla 网站](https://developer.mozilla.org/en-US/docs/Simple_Firefox_build)上的一组简单说明。

当我进入`make -f client.mk build`

我收到以下错误：

```
/usr/bin/make  tier_nspr
tier_nspr:  config/nspr
/usr/bin/make export_tier_nspr
export_tier_nspr
make[5]: Nothing to be done for `config/nspr/Makefile'.
/usr/bin/make -C config/nspr export
/usr/bin/make -C ../../nsprpub export SHARED_LIBRARY= IMPORT_LIBRARY= SHARED_LIB_PDB= XP_DEFINE=-DlibVersionPoint='libVersionPoint$(LIBRARY_NAME)'
make: *** ../../nsprpub: No such file or directory.  Stop.
make[5]: *** [export] Error 2
make[4]: *** [export_tier_nspr] Error 2
make[3]: *** [tier_nspr] Error 2
make[2]: *** [default] Error 2
make[1]: *** [realbuild] Error 2
make: *** [build] Error 2 
```

这是我第一次尝试构建 Firefox。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T15:12:25.517

我在尝试构建 Android 版本的 Firefox 时遇到了同样的错误。对源树进行干净的克隆并重新构建为我解决了这个问题。

# sql - Microsoft T-SQL XML 解析问题

> ID：15559665
> 
> 赞同：1
> 
> 时间：2013-03-21T22:49:36.467
> 
> 标签：sql, xml, sql-server-2008-r2

我有类似于以下的 XML：

```
DECLARE @XML AS XML = 
'<RootElement xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <SubElement xmlns="http://foobar">
    <foo1>bar1</foo1>
  </SubElement>
</RootElement>' 
```

我正在尝试使用以下 SQL 对其进行解析：

```
; WITH XMLNAMESPACES(DEFAULT 'http://foobar')
SELECT 
    f.x.value('foo1[1]', 'varchar(10)')
from 
    @xml.nodes('/RootElement/SubElement') as f(x) 
```

但这似乎不起作用。SubElement 节点上的 XML 命名空间是否会导致问题？我问是因为以下配置有效：

```
DECLARE @XML AS XML = 
'<RootElement xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <SubElement>
    <foo1>bar1</foo1>
  </SubElement>
</RootElement>'

SELECT 
    f.x.value('foo1[1]', 'varchar(10)')
from 
    @xml.nodes('/RootElement/SubElement') as f(x) 
```

供参考：

```
select @@VERSION

Microsoft SQL Server 2008 R2 (SP1) - 10.50.2500.0 (X64)   Jun 17 2011 00:54:03   Copyright (c) Microsoft Corporation  Developer Edition (64-bit) on Windows NT 6.1 <X64> (Build 7601: Service Pack 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:41:02.690

尝试这个：

```
 ; WITH XMLNAMESPACES('http://foobar' as Y)
SELECT 
    f.x.value('.', 'varchar(10)')
from 
    @xml.nodes('/RootElement/Y:SubElement') as f(x) 
```

# c++ - dll中的C++ FindProcessWindow

> ID：15559671
> 
> 赞同：0
> 
> 时间：2013-03-21T22:49:55.700
> 
> 标签：c++, class, enums, window

简单的事情，通过属于dll父进程的类名找到顶级窗口。从我在互联网上找到的我应该

1.  `EnumWindows`枚举所有顶层窗口
2.  在将枚举窗口的`EnumWindowsProc`类名与指定名称进行比较`GetClassName`
3.  如果相等，则检查`GetWindowThreadProcessId`与 dll 父 pid 相同

但是我遇到了一个障碍，如何获取 dll loader 的 PID？或者也许还有另一种方法可以按类名查找父窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:54:40.810

你不能只使用[GetCurrentProcessId](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683180%28v=vs.85%29.aspx)吗？

您也可以使用[PSAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684895%28v=vs.85%29.aspx)函数，但这可能有点矫枉过正......

# java - TimePicker 类型中的方法 setCurrentMinute(Integer) 不适用于参数 (String)

> ID：15559677
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:50:42.533
> 
> 标签：java, android, eclipse, string, timepicker

任何人都知道为什么我可能会收到此错误？

我要做的就是保存时间选择器选择的时间......我确信这是我忽略的简单事情。

任何帮助是极大的赞赏！！！

阿曼尼·斯旺

```
import android.app.Activity; 
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;
 private TimePicker timeEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);
      timeEt = (TimePicker) findViewById(R.id.timeEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         timeEt.setCurrentHour(extras.getString("time"));  
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  timeEt.getCurrentHour().toString(),
                  codeEt.getText().toString());
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(),
            timeEt.getCurrentHour().toString(),
            codeEt.getText().toString());
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:53:07.147

问题是它`setCurrentHour()`需要一个整数，但是通过调用`getString()`你正在传递一个字符串，并且，正如错误所述，没有用于`setCurrentHour(String)`.

你没有告诉我们 Intent 的 extras 设置在哪里，所以这个解决方案是一个猜测。但是尝试：

```
timeEt.setCurrentHour(extras.getInt("time")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:04:05.380

如果 extras 对象没有`getInt()`方法，请尝试以下操作：`timeEt.setCurrentHour(Integer.valueof(extras.getString("time")));`

# node.js - 哪些 Node.js 框架使用 Sequelize ORM

> ID：15559679
> 
> 赞同：3
> 
> 时间：2013-03-21T22:50:53.013
> 
> 标签：node.js, sequelize.js

我正在考虑尝试 node.js，并一直在尝试找到一个类似于 Rails 和 Activerecord 的环境。经过大量研究和谷歌搜索，我得出结论，Sequelize ORM 是一个很好的起点。我不太清楚 Node.js 框架使用 Sequelize 或采用 Sequelize 是否意味着我完全放弃了该框架。

我知道[Metamarkets 采用了 Sequelize](http://metamarkets.com/2012/node-js-for-the-enterprise/)。我很想听听任何使用 Sequelize 的人的意见，并了解您的开发堆栈是什么。您可以在环境和您的体验中提供的任何颜色将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T00:15:32.760

我只能从个人经验说，因为我不知道谁在使用 Sequelize。我已经玩了一段时间了，我个人决定不使用它有两个主要原因

1.  没有交易支持。与其他用于节点 sequelize 的 SQL 形式不同，当前不支持事务。开发商表示他正在为此努力，但无法给出何时完成的时间表，似乎表明这将需要一段时间。

2.  至少对于 MySQL，建立外键关系实际上并没有在模式中创建外键。我真的不喜欢这样，因为我希望能够使用 sequelize 将我的模式与数据对象同步，但是如果数据库不强制执行它，那么外键有什么意义呢？

这些东西违背了我的个人数据库偏好，所以我没有使用它。但是，开发人员很活跃，代码也做得很好，所以如果这些事情得到解决，我会很乐意回去。

编辑：

看起来你链接的人也有一些问题：

> 我们必须做出一些贡献：为集合 getter 引入连接，并添加连接池。

对我来说，作为一个非生产用户，我不想将它构建到我的 ORM 中。

# ios - 带有自定义音频会话的 IOS 系统声音

> ID：15559683
> 
> 赞同：10
> 
> 时间：2013-03-21T22:51:10.013
> 
> 标签：ios, keyboard, audio, avaudiosession

我有一个 iOS 应用程序，它可以同时播放不同的音频效果并录制音频。该应用程序的用途目前并不重要，但我在使用 iOS 音频效果时遇到了问题。

为了播放效果，我使用`SimpleAudioEngine`了`CocosDenshion`API（`AVAudioPlayer`据我所知，它使用 ）。效果是预加载的，它们工作正常（我实际上是在按钮、滚动和类似的地方播放它们）。使用以下代码播放效果：

在`willFinishLaunchingWithOptions`方法：

```
[[SimpleAudioEngine sharedEngine] preloadEffect:@"sound.wav"]; 
```

在需要播放时的其他方法：

```
[[SimpleAudioEngine sharedEngine] playEffect:@"sound.wav"]; 
```

`AVCaptureSession`这并不奇怪，但与此同时，我正在使用API录制来自内置麦克风的噪音。捕获会话代码来自网络上的示例之一。

```
AVCaptureDevice *audioDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];

captureSession = [[AVCaptureSession alloc] init];

NSError *error = nil;
captureAudioDeviceInput = [AVCaptureDeviceInput deviceInputWithDevice:audioDevice error:&error];

if ([captureSession canAddInput: captureAudioDeviceInput])
{
    [captureSession addInput:captureAudioDeviceInput];
}

captureAudioDataOutput = [AVCaptureAudioDataOutput new];

if ([captureSession canAddOutput:captureAudioDataOutput])
{
    [captureSession addOutput:captureAudioDataOutput];
}

// Create a serial dispatch queue and set it on the AVCaptureAudioDataOutput object
dispatch_queue_t audioDataOutputQueue = dispatch_queue_create("AudioDataOutputQueue", DISPATCH_QUEUE_SERIAL);

[captureAudioDataOutput setSampleBufferDelegate:self queue:audioDataOutputQueue];
dispatch_release(audioDataOutputQueue);

[captureSession startRunning]; 
```

代码的两个部分都可以完美地工作。**但是当它们同时被激活时，它们中的一个会破坏另一个。**例如：麦克风读取数据没有问题，直到播放一个音效。我找到了解决这个问题的方法，激活`mixWithOthers`类别，这是通过以下代码完成的：

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryAmbient error: nil];
UInt32 doSetProperty = 1;
AudioSessionSetProperty (kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(doSetProperty), &doSetProperty);
[[AVAudioSession sharedInstance] setActive: YES error: nil]; 
```

这是在创建`AVCaptureDevice`and之前完成的`AVCaptureSession`。应用程序正常工作，播放声音，麦克风读取数据。硬件按钮也在`CocosDenshion SimpleAudioEngine`（静音和音量）上起作用。

但显然，该应用程序有一个错误。

**当静音被禁用并且应用程序正在播放声音时，不会播放 TextField 上的 iOS 键盘单击声音。**我想要播放点击的声音。

我已经对代码进行了一些调试，显然它与**音频会话设置**有关。如果我将类别设置为`AVAudioSessionCategorySoloAmbient`，则会播放咔嗒声，但音量非常低（*音量已达到最大值，应用程序声音以最大音量播放得恰到好处*）。**而且它还带来了另一个问题，SoloAmbient 取消了我的 CaptureSession，这是可以理解的。**

我正在 iPhone 5 上测试应用程序，但同样的事情也发生在模拟器上。

**那么，我在设置方面做错了什么？如何修复设置，以便保持所有音频会话处于活动状态并保持 iOS 系统声音？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T09:11:15.660

在这里查看我的问题： [https ://stackoverflow.com/questions/15680503/how-to-get-the-audio-level-of-the-microphone-without-disabling-system-sounds](https://stackoverflow.com/questions/15680503/how-to-get-the-audio-level-of-the-microphone-without-disabling-system-sounds)

不幸的是，没有答案。录制时默认禁用系统声音。我希望这是为了防止它们被错误地记录下来，这在大多数情况下都是你想要的。

您可以实现[UITextFieldDelegate](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)协议并在每次`textField:shouldChangeCharactersInRange:replacementString:`调用时播放您自己的点击，也许。

# caching - 在 Symfony2 / Doctrine 中清除查询缓存

> ID：15559686
> 
> 赞同：8
> 
> 时间：2013-03-21T22:51:17.727
> 
> 标签：caching, symfony, doctrine

我最近编写了我的第一个 Symfony2 应用程序，一切都很好，除了现在我想添加一些查询缓存以提高性能并减少不需要的查询。我已将以下几行添加到一个特定查询的构建器中：

```
$query->useResultCache(true)
      ->useQueryCache(true); 
```

在第一次请求之后，缓存会按预期使用。我可以在分析器中验证这一点。一切都很棒！

问题是我还编写了一个简单的管理面板，允许用户修改内容，但更改后缓存的版本仍在使用中。

有没有办法我可以“以编程方式”告诉 Symfony2 / Doctrine 在我更新数据时清除查询缓存，或者有没有办法配置它？

这似乎是一个常见问题，但我在 Google 上找不到与该问题相关的任何内容！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-21T23:36:09.297

我建议使用结果缓存 id - 这样您就可以清除一个特定的结果缓存：

```
$query->setResultCacheId('my_custom_id');
// or shorter notation with lifetime option
$query->useResultCache(true, 3600, 'my_custom_id');

// to delete cache
$cacheDriver = $entityManager->getConfiguration()->getResultCacheImpl();
$cacheDriver->delete('my_custom_id');
// to delete all cache entries
$cacheDriver->deleteAll(); 
```

有关缓存删除的更多信息，请参见：
[http ://docs.doctrine-project.org/en/latest/reference/caching.html#deleting](http://docs.doctrine-project.org/en/latest/reference/caching.html#deleting)

# c - 从 void 转换为 int* 后无法访问指针的地址

> ID：15559688
> 
> 赞同：-6
> 
> 时间：2013-03-21T22:51:20.050
> 
> 标签：c

```
void *ptr;
*(int*) ptr=12; 
```

在此之后，我不明白为什么`&ptr`会给我运行时错误。虽然当然运行良好`ptr`。`*ptr`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:59:30.673

```
void *ptr; 
```

`ptr`指向哪里？我敢打赌，去街上的咖啡店。或者甚至可能是某种虫洞！

```
*(int*) ptr = 12; 
```

因此，您将一个指向谁知道什么的 void 指针转换为指向 int 的指针，然后取消引用它以为其分配整数 12。这将覆盖内存中的一些随机位置。如果幸运的话，程序不会崩溃。如果你不走运，你的电脑会爆炸。

因此，总结和改写您的问题，您是在问我们：“*嗯，我正在取消引用一个我尚未初始化的指针，并指向谁知道在哪里。为什么我的程序会崩溃？* ”我说得对吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T22:56:12.720

首先，您创建一个指向随机地址的指针

```
void *ptr; 
```

然后，您尝试将值 12 存储到导致未定义行为的随机地址，因为您没有为`ptr`

# tidesdk - 拖动以移动应用程序

> ID：15559699
> 
> 赞同：1
> 
> 时间：2013-03-21T22:51:51.877
> 
> 标签：tidesdk

使用 TideSDK，我将如何使用 div 或任何元素在桌面上拖动/移动应用程序窗口？我正在寻找模仿操作系统框架的默认行为（单击并拖动以移动应用程序）

我将 tiapp.xml 设置为 false 以删除窗口边框，并使用 Ti.App.exit 方法创建了关闭按钮，但我找不到允许用户移动应用程序的方法。我不相信我会使用 jquery 可拖动库，因为那会移动元素，而不是整个窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T23:58:08.163

```
 var WINDOW = Ti.UI.getCurrentWindow();

        var dragging = false;
        document.onmousemove = function(){
            if (!dragging) return;
            Ti.UI.currentWindow.setX(Ti.UI.currentWindow.getX() + event.clientX - xstart);
            Ti.UI.currentWindow.setY(Ti.UI.currentWindow.getY() + event.clientY - ystart);
        }

        document.onmousedown = function(){
            dragging = true;
            xstart = event.clientX;
            ystart = event.clientY;
        }

        document.onmouseup = function(){
            dragging = false;
        } 
```

这是我从tiedSDK 网站复制的一段代码。

# php - Symfony 资产捆绑

> ID：15559704
> 
> 赞同：4
> 
> 时间：2013-03-21T22:52:19.873
> 
> 标签：php, css, symfony, bundle, assets

在 Symfony 2 中，我像这样使用资产捆绑。

```
{% stylesheets
            'bootstrap/css/bootstrap.css'
            'bootstrap/flat/css/flat-ui.css'
            filter='cssrewrite'
            filter='?yui_css'
%} 
```

它工作得很好，但是我的@font-face 资源没有加载。它们在开发环境中运行良好，但是一旦在生产环境中将 css 捆绑到单个文件中，就会加载默认字体？

cssrewrite 工作正常，因为我检查了相对路径是否正确更新为指向正确的区域，我什至尝试使用无效的绝对 URL。

我尝试编译，但没有帮助。唯一有效的是将它从捆绑中删除，然后直接加载。

symfony 资产捆绑和@font-face :S :S :S 是否存在某种错误

下面是 @font-face 捆绑后在 prod 环境中的 css。

```
@font-face{font-family:"Flat-UI-Icons-16";src:url("../bootstrap/flat/fonts/Flat-UI-Icons-16.eot");src:url("../bootstrap/flat/fonts/Flat-UI-Icons-16.eot?#iefix") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:00:06.160

There are some good information about [URL in CSS files in this Stackoverflow page](https://stackoverflow.com/questions/851724/css-background-image-what-is-the-correct-usage).

One of the response states that relative URLs within a CSS file are relative to the directory where the file is located.

If your font is loaded from

```
bootstrap/css/bootstrap.css 
```

And the URLs within the CSS looks like the following relative URL:

```
../bootstrap/flat/fonts/Flat-UI-Icons-16.eot 
```

That means the browser will try to get the font as following

```
bootstrap/bootstrap/flat/fonts/Flat-UI-Icons-16.eot 
```

You probably want to try the following URL style

```
../../bootstrap/flat/fonts/Flat-UI-Icons-16.eot 
```

Or

```
../flat/fonts/Flat-UI-Icons-16.eot 
```

I would highly recommend the [documentation about fixing css path with cssrewrite filter](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#fixing-css-paths-with-the-cssrewrite-filter).

Note that if you use the cssrewrite filter you cannot use the `@YourAwesomeBundle` syntax.

I hope this will fix your issue

# mysql - MySQL Workbench：如何显示警告？

> ID：15559711
> 
> 赞同：1
> 
> 时间：2013-03-21T22:52:54.527
> 
> 标签：mysql, mysql-workbench

当我运行特定查询时，我收到一条消息：“您的查询产生了 1 个警告。” 我想确切地知道警告是关于什么的。如何查看警告的详细信息？我在 Windows 上使用 Workbench 版本 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:53:41.893

您是否看到 SQL IDE 下部的“操作输出”窗格？您发送的所有查询都会出现在那里，任何警告或错误消息也会出现。在顶部的工具栏中，在最右上角有 3 个按钮可以切换 Worbench 的特定部分。中间一个用于输出区域。看到这被激活以使窗格实际出现在屏幕上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T08:04:57.977

```
show warnings 
```

应该[有更多的描述](http://dev.mysql.com/doc/refman/5.0/en/show-warnings.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-07T07:00:40.783

您可以转到（帮助 -> 显示日志文件），它将显示警告消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T09:05:31.330

这两种解决方案在 Linux 上的 Workbench 6.0 上对我有用，也许其中一种对你有用：

*   将鼠标悬停在警告消息上。或将鼠标悬停在上一条消息上（如果有任何以前的消息）
*   否则，在同一个查询选项卡中，编写任何其他查询并执行它。出于某种原因，一旦我这样做，旧的警告消息就会扩展。列表中的最后一条消息似乎存在错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-21T07:30:45.053

签出此链接。它将告诉您有关工作台窗口的信息。

[http://dev.mysql.com/doc/workbench/en/wb-sql-editor-query-panel.html](http://dev.mysql.com/doc/workbench/en/wb-sql-editor-query-panel.html)

Pl - 使用隐藏/显示面板来激活不同的窗口。

# twitter-bootstrap - 如何在不重复代码的情况下在表单中显示错误？

> ID：15559716
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:53:12.967
> 
> 标签：twitter-bootstrap

好的，例如我有一个这样的字段：

`<textarea id="feedbackBody" name="feedbackBody" class="fullwidth"></textarea>`我认为我应该能够在我的逻辑代码中做这样的事情：

*如果错误*

```
<textarea id="inputWarning" name="feedbackBody" class="fullwidth"></textarea>
<span class="help-inline">Eroor</span> 
```

所以我的服务器可以在 url 中的 IF error=yes 字段下方显示跨度，然后我可以更改 textarea 的 ID 并使帮助行可见。

但是，这不起作用，它不显示错误样式。

文档显示，要显示错误，我必须执行以下操作：

```
<div class="control-group warning">
                <label class="control-label" for="inputWarning">Input with warning</label>
                <div class="controls">
                  <textarea id="inputwarning" name="feedbackBody" class="fullwidth"></textarea>
                  <span class="help-inline">Something may have gone wrong</span>
                </div>
              </div> 
```

为了显示错误而扭曲所有字段的代码非常多……必须有更好的方法。因为它现在看起来的方式我必须在页面上有这样的代码：

如果没有错误

```
<textarea id="feedbackBody" name="feedbackBody" class="fullwidth"></textarea> 
```

别的

```
<div class="control-group warning">
                    <label class="control-label" for="inputWarning">Input with warning</label>
                    <div class="controls">
                      <textarea id="inputwarning" name="feedbackBody" class="fullwidth"></textarea>
                      <span class="help-inline">Something may have gone wrong</span>
                    </div>
                  </div> 
```

所以我不能只在下面“显示”一个简单的跨度，而是必须用它周围的所有东西重新创建整个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:09:20.027

假设您正在使用 ASP.NET MVC 进行编程，但情况可能并非如此（您应该使用所使用的语言标记您的问题）。

这不是您问题的直接解决方案，但它可能对您有所帮助。试用[此视频中讨论的库：TwitterBootstrapMVC](https://www.youtube.com/watch?v=6LpWMl5D2i4)。

# notepad++ - Removing Dots from starting of lines on NotePad++

> ID：15559719
> 
> 赞同：3
> 
> 时间：2013-03-21T22:53:41.173
> 
> 标签：notepad++

I have this situation

. . . public void onClick(Widget sender) {

. . . . PreferencesWidget.this.callback.onSuccess(feed.getText());

. . . . hide();

}

How to remove this dots only

Note* there are spaces between dots

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T22:59:55.423

您可能打开了一个选项，使编辑器中的空白“可见”。

尝试切换菜单选项`View`-> `Show Symbol`-> `Show Whitespace and Tab`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T20:15:27.673

`View`-> `Show Symbol`->`Show Indent Guide`

# git - creating git repo for my site and edit permission setting

> ID：15559721
> 
> 赞同：0
> 
> 时间：2013-03-21T22:53:45.487
> 
> 标签：git

1.  how do i create a git repo using my site files in my shared hosting acc (like - say files located in my hosting for sub domain site - [http://mysite.maindomain.com/](http://mysite.maindomain.com/)) so that i work with that git repo by cloning it in my local hard disk as this is the way working with git is done,so changes(commits and then push) in those files will reflect in my joomla site [http://mysite.maindomain.com/](http://mysite.maindomain.com/) i once saw this kind of repo url becomes like this one for cloning - devaa1@20.18.26.241:/var/git/devaa1/public_html

2.  how do i set permissions so that whom i gave permissions only can clone my git url locally and can push to my git repo for changes. i added some test collaborators from my git repo options and it works fine online that only those collaborators can edit git repo files but i tested that when i clone the repo in my local hard disk i can push with no problems!! how to avoid it.

# wpf - Binding to a sibling's child element

> ID：15559727
> 
> 赞同：1
> 
> 时间：2013-03-21T22:54:21.750
> 
> 标签：wpf, binding, wpf-controls, siblings

I'm working on a UserControl (named DiagramControl) and have a problem. The UserControl's code is as follows:

```
<UserControl>
   <Border>
      <Grid>
         <ScrollViewer x:Name="DesignerScrollViewer" ... />               
         ...
         <s:ZoomBox x:Name="zoomBox"
                   ScrollViewer="{Binding ElementName=DesignerScrollViewer}"/>
      </Grid>
   </Border>
</UserControl> 
```

I am binding the ZoomBox (which has a scrollviewer DP) to DesignerScrollViewer. The method I use now works fine since the ZoomBox and DesignerScrollViewer are in the same XAML file.

What I would like to do however is to remove the ZoomBox from the control and define it in the window that uses the control. so for example something like:

```
<Grid>
   <s:DiagramControl x:Name="DC" ... />
   ...
   <s:ZoomBox ScrollViewer={Binding ElementName=DC,Path=DesignerScrollViewer}/>
</Grid> 
```

I tried this but it doesn't work. How can I perform the binding that I need?

**UPDATE:**

I figured out what I needed to do. I added a ScrollViewer DP to DiagramControl and had it update when the DesignerScrollViewer's Layout was updated. so the following went into my DiagramControl code behind:

```
 public static readonly DependencyProperty ScrollViewerProperty =
            DependencyProperty.Register("ScrollViewer", typeof(ScrollViewer), typeof(DiagramControl), new UIPropertyMetadata(null, ScrollViewer_PropertyChanged));

        public ScrollViewer ScrollViewer
        {
            get { return (ScrollViewer)GetValue(ScrollViewerProperty); }
            set { SetValue(ScrollViewerProperty, value); }
        }

        private static void ScrollViewer_PropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {                
        }

        private void DesignerScrollViewer_LayoutUpdated(object sender, EventArgs e)
    {
        ScrollViewer = DesignerScrollViewer;
    } 
```

Now that the ScrollViewer DP had an update source i was able to bind to it from the window using the DiagramControl. Hope this helps someone in future.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:01:34.807

首先，您不应该将 UI 控件放入视图模型属性中（没有充分的理由 - 让视图模型保存所有信息并与之绑定）- 您的结构（视图 <-> 视图模型）也会得到“参与”并导致越来越多的黑客攻击 - 不碍事:) ...

如果我做对了，你在追求什么...

您`DesignerScrollViewer`只是一个“子控件”，绑定标记扩展不知道它。

> 如果您想要类似的东西，请在上面制作一个 `DesignerScrollViewerProperty`并将`UserControl`其放入路径中（保留该`ElementName`部分）。那可能只是一个属性（您需要`INotifyPropertyChanged`并引发事件）。

或者有点不同，比如......

在你的窗口某处：

```
<my:ZoomBox DataContext="{Binding ElementName=diagramControl, Path=.}"></my:ZoomBox>
<my:DiagramControl x:Name="diagramControl"></my:DiagramControl> 
```

你的缩放框：

```
<UserControl x:Class="YourApp.ZoomBox" ...="">
    <StackPanel>
        <Button x:Name="GoUp" Command="{Binding UpCommand}" Content="Go Up" IsDefault="False" />
        <Button x:Name="GoDown" Command="{Binding DownCommand}" Content="Go Down" IsDefault="False" />
    </StackPanel>
</UserControl> 
```

您的图表控件：

```
<UserControl x:Class="YourApp.DiagramControl" ...="">
    <Grid>
        <ScrollViewer x:Name="_scrollViewer" >
            ...
        </ScrollViewer>
    </Grid>
</UserControl> 
```

...和背后的图表代码...

```
public partial class DiagramControl : UserControl, INotifyPropertyChanged
{
    RelayCommand _upCommand;
    RelayCommand _downCommand;
    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged(string propertyName) { this.PropertyChanged.Raise(this, new PropertyChangedEventArgs(propertyName)); }

    public DiagramControl()
    {
        InitializeComponent();
    }

    public RelayCommand UpCommand 
    { 
        get 
        {
            return _upCommand ?? (_upCommand = new RelayCommand(
                param =>
                {
                    _scrollViewer.LineUp();
                },
                param => true)); 
        } 
    }

    public RelayCommand DownCommand
    {
        get
        {
            return _downCommand ?? (_downCommand = new RelayCommand(
                param =>
                {
                    _scrollViewer.LineDown();
                },
                param => true));
        }
    }
} 
```

...您可以绑定到您的 DP，而不是（的`DataContext`）。并放置您想要的任何操作（例如放大/缩小）而不是向上/向下。

这仍然是不合适的，为了让它没事 - 你应该将你的图表和缩放框绑定到同一个视图模型（直接跳过绑定到用户控件 - 但通过视图模型间接地“通信”） - 但这很复杂有点因为您将需要一些事件来处理命令，并对`TwoWay`值进行绑定以来回循环等。

# php - 保存多个复选框选项

> ID：15559728
> 
> 赞同：0
> 
> 时间：2013-03-21T22:54:35.197
> 
> 标签：php, checkbox

我这里有这段代码，它在 Wordpress 中只保存一个复选框选择。我怎样才能让它保存多个值？如果我不正确地存储值（我可能是这样），我怎样才能将它们正确地发布到数据库中？

这是我目前发布选项的方式：

```
 if (isset ($_POST['update_blog_options'])) {
     $montage_blog_options = get_option ('blog_settings');
     $montage_blog_options['user_cats'] = $_POST['user_cats'];
    update_option('blog_settings', $montage_blog_options);
    } 
```

然后我创建复选框数组的代码：

```
 $args = array( 'hide_empty' => 0, 'taxonomy'=> 'category');
               $categories =  get_categories($args);
               if ($categories){
                    foreach ( $categories as $category ){ 
                        if($category->cat_name==$montage_blog_options['user_cats']) {
                            $selected = 'checked="checked"';
                        } else {
                            $selected = '';
                        }

                        echo '<input name="user_cats" value="'.$category->cat_name.'" '.$selected.' type="checkbox"/> '.$category->cat_name.'<br/>';
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:07:17.260

如果您将输入的名称更改为在名称中包含 []，即 name="user_cats[]"，那么它将把它的所有实例存储为一个数组。然后您可以将值作为数组访问。

我不记得它到达页面时的确切外观，但您可以在接收页面上 print_r($_POST['user_cats']) 看看它的外观。

# php - 如何在 json 编码字符串内的子数组数据周围添加方括号？

> ID：15559735
> 
> 赞同：33
> 
> 时间：2013-03-21T22:55:06.753
> 
> 标签：php, json

尝试访问 API 时，必须像这样解析 JSON 数组

```
{"item":[{"id":"123456", "name":"adam"}]} 
```

但是当我执行以下代码时

```
$data = array("item" => array("id" => "123456", "name" => "adam"));
echo json_encode($data); 
```

它返回不带方括号的 json 数组，如下所示

```
{"item":{"id":"123456","name":"adam"}} 
```

我花了几个小时试图弄清楚如何解决这个问题，只是想不出一个解决方案

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-21T22:57:49.807

您需要将东西包装在另一个中`array`：

```
$data = array("item" => array(array("id" => "123456", "name" => "adam"))); 
```

如果我们使用等效的 PHP 5.4 数组语法，这将更容易理解：

```
$data = [ "item" => [ ["id" => "123456", "name" => "adam"] ] ]; 
```

将此与 JSON 进行比较：

```
 { "item":   [ {"id":"123456", "name":"adam"      } ] } 
```

唯一需要解释的是为什么其中一个 PHP 数组`[]`在 JSON 中仍然是一个数组，而另外两个则被转换为一个对象`{}`。但是[文档](http://php.net/manual/en/function.json-encode.php)已经这样做了：

> 在对数组进行编码时，如果键不是从 0 开始的连续数字序列，则所有键都被编码为字符串，并为每个键值对显式指定。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-05T04:57:07.590

在阅读这篇文章之前，我有这个：

`echo json_encode($data);`

看完这篇文章后：

```
echo json_encode(array($data)); 
```

括号出现在 JSON 对象的开头和结尾。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-22T08:52:33.917

使用这种方式时它变得很方便，因此您可以在数组上添加更多项目

```
$val = array();
$val["id"]="123456";
$val["name"]="adam";

$data = array();
$data["item"][]=$val;

echo json_encode($data); 
```

它会在下面输出：

```
{"item":[{"id":"123456", "name":"adam"}]} 
```

# variables - setTimeout - 将变量作为时间传递

> ID：15559739
> 
> 赞同：3
> 
> 时间：2013-03-21T22:55:41.267
> 
> 标签：variables, time, settimeout

我有一个 setTimeout，我希望能够使用一个变量作为计时器：

```
var that = this;
var time = this.spawnTime;

setTimeout( function(time){ 
    that.SpawnCounter();
}, time); 
```

这似乎没有奏效。任何想法为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:59:37.780

```
var that = this;
var time = 1000;

setTimeout( function(time){ 
    that.SpawnCounter();
}, time); 
```

上面的代码应该可以工作。也许问题在于它`this.spawnTime`不是数字或无效的。

# meteor - 流星客户端设置

> ID：15559743
> 
> 赞同：8
> 
> 时间：2013-03-21T22:55:54.483
> 
> 标签：meteor

有没有一种好方法可以存储在任何其他 javascript 之前加载的流星客户端设置？

我会将诸如 api id 之类的东西放入其中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T05:44:32.437

如果您没有进行任何类型的初始化，即只存储诸如 api 键之类的值，您可以：

1）`settings.json`在项目目录中有一个包含您的设置的文件，例如

```
{ 
   "public" : {
       "api_key":"value1"
   }
} 
```

然后使用此设置文件启动流星

```
meteor --settings settings.json 
```

通过以下方式在您的客户端上访问此值：

```
Meteor.settings.public.api_key
=> "value1" 
```

# c# - 将数据从 SQL Server 导出到 PostgreSQL

> ID：15559744
> 
> 赞同：3
> 
> 时间：2013-03-21T22:56:00.217
> 
> 标签：c#, sql-server, postgresql, export

我正在使用此示例将数据从 SQL Server 导出到 PostgreSQL，当我开始导出 300,000 行需要 12 分钟时，我可以做些什么来加快这个过程，或者你知道另一种方法吗？

```
string SourceDriver = "Driver={SQL Server Native Client 10.0}";
OdbcConnection SourceConnection = new OdbcConnection(SourceDriver+ ";Server=10.10.10.10;Database=sourceMSSQL;Uid=sa;Pwd=12345;");

string DestDriver = "Driver={PostgreSQL}";
OdbcConnection DestConnection = new OdbcConnection(DestDriver+ ";Server=10.10.10.11;Port=5432;Database=destPostgreSQL;Uid=postgres;Pwd=12345;");

string SourceSql = "SELECT Code, Label, Model, List, Size, Quantity, City, Family,  ExportDate FROM MovPedidosP0";
string DestSql = "INSERT INTO tmp_MovPedidosP0_t (Code, Label, Model, List, Size, Quantity, City, Family,  ExportDate) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?)";

using(OdbcCommand SourceCommand = new OdbcCommand(SourceSql, SourceConnection))
{
    SourceConnection.Open();
    using(OdbcDataReader SourceReader = SourceCommand.ExecuteReader())
    {
        Console.WriteLine("Exporting...");

        DestConnection.Open();

        while(SourceReader.Read())
        {
            using(OdbcCommand DestCommand = new OdbcCommand(DestSql, DestConnection))
            {
                DestCommand.Prepare();
                DestCommand.Parameters.Clear();

                for(int i=0; i<SourceReader.FieldCount; i++)
                {
                    DestCommand.Parameters.AddWithValue("?ID" + (i+1).ToString(), SourceReader[i]);
                }

                DestCommand.ExecuteNonQuery();
                TotalRows++;
            }
        }

        DestConnection.Close();
    }
}

SourceConnection.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:14:14.703

如果您使用 SSIS 导出到文本文件并使用[`COPY`](http://www.postgresql.org/docs/9.2/interactive/sql-copy.html)命令导入，则会更简单并且可能更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:04:24.643

尝试使用本机 NpgsqlConnection 和 SqlConnection 而不是 Odbc 连接。

[http://npgsql.projects.pgfoundry.org/](http://npgsql.projects.pgfoundry.org/)

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)

# gradle - 从单个项目源构建多个 jar

> ID：15559753
> 
> 赞同：5
> 
> 时间：2013-03-21T22:56:27.550
> 
> 标签：gradle

我对gradle还很陌生。

我想知道是否可以从同一个项目源构建多个 jar。我浏览过以前的类似问题，但我的情况有点不同。我想将所有源文件编译两次以生成两个不同的 jar，每个 jar 具有不同的依赖项和不同的工件 ID。从概念上讲，它可以表示如下：

*   项目“FooBase”
    *   src/main/java/...
    *   取决于库 Bar 版本 1.0.0
    *   编译所有源代码并生成“org.foo/Foo1”（组/工件）
*   项目“Foo2”
    *   没有自己的来源，或者可以添加来源
    *   取决于库 Bar 版本 2.0.0
    *   编译“FooBase”中的所有源代码及其源代码，并生成“org.foo/Foo2”（组/工件）

gradle可以进行这种构建吗？最好的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T20:25:01.940

实现您想要的一种干净的方法是创建一个多项目构建，其中包含两个子项目（foobase 和 foo2），其中 foo2 的源集配置为包含 foobase 的源集以及它自己的源。

要获得工件的不同依赖项，您只需要`dependencies`在子项目中以不同方式声明该部分。

为了测试这一点，我创建了一个多项目构建，每个子项目中都有一个 java 文件。为了简化此处的输出，根`build.gradle`文件包含所有内容，包括子项目特定的自定义项。不过，在“现实生活”中，我总是将子项目特定的配置放在`build.gradle`正确的子项目级别的文件中。

gradle 构建文件包含

*   将源集从 foobase 添加到 foo2
*   两个项目的不同依赖
*   部署到本地 maven 存储库（以验证 pom 是否正确创建）
*   IntelliJ IDEA 和 Eclipse 的可选 IDE 插件

总而言之，我最终得到了以下结果：

**项目结构**

```
build.gradle                      => root project build file
settings.gradle                   => specification of included subprojects
foo2\                             => foo2 subproject folder
  src\
    main\
      java\
        Foo2.java                 => Empty class
foobase\                          => foobase subproject folder
  src\
    main\
      java\
        FooBase.java              => Empty class 
```

* * *

**设置.gradle**

```
include ':foobase', ':foo2' 
```

* * *

**构建.gradle**

```
allprojects {
    apply plugin: 'idea'
    apply plugin: 'eclipse'
    group = 'org.foo'
    version = '1.0'
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'maven'

    repositories {
        mavenCentral()
    }

    uploadArchives {
        it.repositories.mavenDeployer {
            repository(url: "file:///tmp/maven-repo/")
        }
    }
}

project(':foobase') {
    dependencies {
        compile 'log4j:log4j:1.2.13'
    }
}

project(':foo2') {
    dependencies {
        compile 'log4j:log4j:1.2.16'
    }

    sourceSets.main.java.srcDirs        project(':foobase').sourceSets.main.java
    sourceSets.main.resources.srcDirs   project(':foobase').sourceSets.main.resources
    sourceSets.test.java.srcDirs        project(':foobase').sourceSets.test.java
    sourceSets.test.resources.srcDirs   project(':foobase').sourceSets.test.resources
} 
```

* * *

请注意，我还添加了资源和测试的源目录。如果不需要，您可以省略最后三行。

要验证构建：

*   确保这两个 jar 文件包含所有需要的类。
*   验证两个部署的 maven pom 是否具有正确的依赖关系。

就我而言：

*   `foobase-1.0.jar`仅包含`FooBase.class`
*   `foo2-1.0.jar`包含两者`FooBase.class`和`Foo2.class`
*   上传的`foobase-1.0.pom`内容包含对`log4j-1.2.13`
*   上传的`foo2-1.0.pom`内容包含对`log4j-1.2.16`

# backbone.js - Mustache.js、Handlebars.js 和 Underscore.js 有什么区别？

> ID：15559754
> 
> 赞同：10
> 
> 时间：2013-03-21T22:56:36.817
> 
> 标签：backbone.js, template-engine

我想为我将在 MVC 应用程序中使用的框架选择一个**模板引擎。**`Backbone.js`

我读过 Backbone.js 与 兼容`Mustache.js`，`Handlebars.js`并且`Underscore.js`默认情况下，这些模板引擎之间是否存在一些重要的区别，或者它们几乎做同样的事情？

另外，是否应该认真考虑其他兼容的**模板引擎？**`Backbone.js`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T23:38:20.743

Mustache 和 Handlebars 是所谓的“无逻辑模板引擎”。它们迫使开发人员不要在视图中包含任何过于复杂的逻辑，只包含输出数据所需的最基本的控制结构，保持 HTML（或其他内容）干净。这也意味着它们完全与语言无关；您应该能够轻松地将它们与任何编程/脚本语言一起使用。

然而，下划线是不同的。它本身就是一个 JavaScript 库，类似于 Prototype 或 jQuery，并带有自己的模板引擎。模板可以访问库中的任何方法或助手，这意味着模板与 JavaScript 严格绑定，并包含更多的逻辑。

# android - 引用引用 strings.xml 内部颜色的属性

> ID：15559758
> 
> 赞同：0
> 
> 时间：2013-03-21T22:56:58.437
> 
> 标签：android, android-xml

我开始更频繁地使用带有 String.format 的 strings.xml，我想知道是否有在 xml 字符串元素中使用引用。

我有以下字符串：

```
<string name="ticker_media_citation">%1$s by &lt;font color=\'#FF00CC\'> %2$s& lt;/font></string> 
```

将 String.format() 与 Html.fromHtml() 结合使用可以解决问题。想要拥有的 id 如下：

```
<string name="ticker_media_citation">%1$s by &lt;font color=\'?IndicatorColor\'>%2$s&lt;/font></string> 
```

其中`?IndicatorColor`引用了一种颜色。

不幸的是它不起作用，所以我问它甚至可能还是我应该用 Spannables/SpannableStringBuilder 以丑陋的方式来做？

**编辑——进一步解释——**

我有如下属性：

```
<declare-styleable name="Theme">
    <attr name="IndicatorColor" format="reference" />
</declare-styleable> 
```

然后我有一个使用这个引用的主题

```
<style name="Theme.WD.Light" parent="Theme.WD">
    <item name="IndicatorColor">@color/IndicatorColor.Light</item>
</style> 
```

还有颜色

```
<color name="IndicatorColor.Light">#0099CC</color> 
```

我希望能够使用`?IndicatorColor`而不是参考颜色，`@color/IndicaterColor.Light`因为指示器颜色可能会根据用户选择的主题而改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:59:58.853

看[这里](http://developer.android.com/guide/topics/resources/more-resources.html)你可以创建单独的颜色`resources`。使用`strings.xml`for`Strings`代替硬编码文本，并使用其他颜色（`resources`例如[颜色](http://developer.android.com/guide/topics/resources/more-resources.html#Color)）来表示不同的颜色。

# javascript - 如何为这些路径的入口设置动画？

> ID：15559763
> 
> 赞同：0
> 
> 时间：2013-03-21T22:57:33.747
> 
> 标签：javascript, jquery, svg

我正在尝试为一些 svg 路径的入口设置动画，但没有运气。这是我到目前为止所拥有的：

这是我的[小提琴](http://jsfiddle.net/VrPFR/1/show/)

```
$(".line").each(function(i){
        var path = $(this);

        var totalLength = path.node().getTotalLength();
        path.attr("stroke-dasharray", totalLength + " " + totalLength).attr("stroke-dashoffset", totalLength)
            .duration(1000).ease("linear").attr("stroke-dashoffset", 0);

    }); 
```

我收到错误“path.node 不是函数”。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:03:32.727

您可以在路径上调用[getBoundingClientRect()](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect)方法来获取尺寸

```
var w = myPath.getBoundingClientRect().width;
var h = myPath.getBoundingClientRect().height; 
```

你可以试试这个

```
$(".line").each(function(i){
        var path = $(this);
        var totalLength = path.getBoundingClientRect().width;
        path.attr("stroke-dasharray", totalLength + " " + totalLength).attr("stroke-dashoffset", totalLength)
            .duration(1000).ease("linear").attr("stroke-dashoffset", 0);

    }); 
```

**编辑：**

试试这种方式：

### [小提琴](http://jsfiddle.net/mohammadAdil/j8GJE/2/)

```
var c = document.getElementsByTagName("path");
var rec = c[0].getBoundingClientRect();
var totalLength = rec.width; 
```

至少您将能够获得尺寸。

# ruby-on-rails - 在“lambda”中：尝试创建没有块的 Proc 对象（ArgumentError）

> ID：15559769
> 
> 赞同：4
> 
> 时间：2013-03-21T22:57:59.170
> 
> 标签：ruby-on-rails, ruby, squeel

```
scope :for_user, (lambda {|user_id| a = Follow.follows(user_id); Question.where{user_id.in(a.select{followed_id})}}) 
```

给我：

```
`lambda': tried to create Proc object without a block (ArgumentError) 
```

我已经阅读了几个问题，但无法解决问题。我对 Ruby 比较陌生，并且刚刚开始使用 Rails。我可能有点过头了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:15:17.693

不过，我认为您不需要围绕 lambda 的 () 。您如何尝试从简单的拳头开始，例如尝试：

```
scope :for_user, lambda {|user_id| Question.where(:user_id => user_id) } 
```

只是看看它是否损坏/工作......然后逐个添加您实际需要的功能，直到某些东西损坏（或一切正常）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T04:49:22.023

我遇到了同样的错误，对我有用的是 Taryn East 的建议：不（）。

```
scope :event, lambda {|name| active.where(:key => name)} 
```

这就是我让我的工作的方式。

# java - 迭代器返回一个对象而不是所需的对象

> ID：15559770
> 
> 赞同：1
> 
> 时间：2013-03-21T22:58:11.540
> 
> 标签：java, object, iterator

```
public class Facture {
private Client client = new Client();;
private float Paiement;
private float soustotal;
private float tps;
private float tvq;
private float ttc;
private List<LigneFacture> lignesFac = new ArrayList<LigneFacture>();

public Facture(){
    this.Paiement=0;
    this.soustotal=0;
    this.tps=0;
    this.tvq=0;
    this.ttc=0;

}
public Client getClient() {
    return client;
}

public void setClient(Client client) {
    this.client = client;
}

public float getPaiement() {
    return Paiement;
}

public void setPaiement(float Paiement) {
    this.Paiement = Paiement;
}

public float getSoustotal() {
    return soustotal;
}

public void setSoustotal(float soustotal) {
    this.soustotal = soustotal;
}

public float getTps() {
    return tps;
}

public void setTps(float tps) {
    this.tps = tps;
}

public float getTvq() {
    return tvq;
}

public void setTvq(float tvq) {
    this.tvq = tvq;
}

public float getTtc() {
    return ttc;
}

public void setTtc(float ttc) {
    this.ttc = ttc;
}

public List<LigneFacture> getLignesFac() {
    return lignesFac;
}
public void addLignesFacture(LigneFacture ligneFac){
    this.lignesFac.add(ligneFac);
    Iterator iter_lignesFact = lignesFac.iterator();

    while(iter_lignesFact.hasNext()){
       LigneFacture lignefac_cur =  iter_lignesFact.next();
    }
} 
```

}

嗨，我有这个类，问题出在最后一个方法中，Java 告诉我 iter_lignesFact 返回一个 Object 值而不是 LigneFacture 值，因此他希望我将它转换为 LigneFacture，这是为什么呢？我在 LigneFacture 列表上定义了我的迭代器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T22:59:56.767

您在这里使用了原始类型：

```
Iterator iter_lignesFact = lignesFac.iterator(); 
```

您想使用通用形式：

```
Iterator<LigneFacture> iter_lignesFact = lignesFac.iterator(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:12:05.287

您已经使用了原始类型，但是您可以通过使用 foreach 循环来避免完全键入的麻烦和大量代码：

```
for (LigneFacture lignefac_cur : lignesFac) {
    // do something with lignefac_cur
} 
```

如果迭代，使用 foreach 循环是一种非常整洁的方法。请注意，尽管使用这种循环进行整个迭代，但您可能不会更改集合。具体来说，没有`iterator.remove()`可用的等价物。但是，如果您在循环中不需要这种操作，则 foreach 是首选语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:13:47.810

而且，您根本不想使用`Iterator`。我们的功能在做什么？

```
public void addLignesFacture(LigneFacture ligneFac){
    this.lignesFac.add(ligneFac);
    Iterator iter_lignesFact = lignesFac.iterator();

    while(iter_lignesFact.hasNext()){
       LigneFacture lignefac_cur =  iter_lignesFact.next();
    }
} 
```

首先，它添加`ligneFac`到列表中`lignesFac`。`ligneFac`现在是列表的最后一个成员，除非出现奇怪的线程情况。然后，创建迭代器，并`lignefac_cur`依次设置到每个成员，在最后一个成员处停止，即`ligneFac`. 那么，为什么不简单地设置`lignefac_cur`为`ligneFac`？但是，你扔掉了`lignefac_cur`。我假设您已经缩短了您最初编写的方法。

```
public void addLignesFacture(LigneFacture ligneFac){
    this.lignesFac.add(ligneFac);

    LigneFacture lignefac_cur =  ligneFac;
    // Do things with lignefac_cur.
    // You might want to make it an instance variable instead,
    // or even to have a method currentLigne() that gets the last
    // member of the list. You might even want to use
    // Stack or Queue as being more expressive.
} 
```

# java - 从图像路径保存图像

> ID：15559772
> 
> 赞同：0
> 
> 时间：2013-03-21T22:58:28.343
> 
> 标签：java, image, swing, netbeans, jfilechooser

我实现了此代码来浏览图像，`JFileChooser`但问题是我无法实现将图像保存在本地磁盘上的代码。或者如果可能的话，我直接想在一个新`JFrame`类中显示这个图像，这将是一个动态链接

```
private void btnBrowseVideo1ActionPerformed(java.awt.event.ActionEvent evt) {

    // TODO add your handling code here:
    JFileChooser fileChooser = new JFileChooser();
    fileChooser.showOpenDialog(null);
    mediaUrl = null;
    String path = "";

    path = fileChooser.getSelectedFile().toString();
    path = path.trim();

    // System.out.println("URI : "+mediaUrl);
    if (path.endsWith(".jpg") || path.endsWith(".JPG")) {

        lblBrowseImage.setText(path);
    } else {
        JOptionPane.showMessageDialog(this, "SELECT .jpg  FILE!!!!");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:37:39.383

我希望我对这个问题的解释是正确的。查看[ImageIO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html) `read()`以及`write()`加载和保存图像的方法。此外，有关更多详细信息和示例，请参阅[使用图像](http://docs.oracle.com/javase/tutorial/2d/images/index.html)和[如何使用标签](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)教程。

为简单起见，这是一个在标准对话框中显示用户选择的图像的示例：

```
import java.awt.BorderLayout;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.filechooser.FileNameExtensionFilter;

public class ShowImage {
    private static void createAndShowUI() {
        final JFrame frame = new JFrame("Load Image");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton loadButton = new JButton("Display Image");
        loadButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                JFileChooser fc = new JFileChooser(
                        System.getProperty("user.home"));
            fc.addChoosableFileFilter(new FileNameExtensionFilter(
                    "Image files", new String[] { "png", "jpg", "jpeg",
                            "gif" }));
                if (fc.showOpenDialog(null) == JFileChooser.APPROVE_OPTION){
                    try {
                        Image image = ImageIO.read(fc.getSelectedFile());
                        if (image != null) {
                            JPanel panel = new JPanel(new BorderLayout(10, 10));
                            panel.add(new JLabel(fc.getSelectedFile().toString()), 
                                    BorderLayout.NORTH);
                            panel.add(new JLabel(new ImageIcon(image)));
                            JOptionPane.showMessageDialog(frame,  panel);
                        }
                    } catch (IOException ex) {
                        ex.printStackTrace();
                    }
                }
            }
        });

        frame.add(loadButton);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                try {
                    UIManager.setLookAndFeel(
                            UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                    ex.printStackTrace();
                } 
                createAndShowUI();
            }
        });
    }
} 
```

# python - 把我的头绕在外键上

> ID：15559773
> 
> 赞同：0
> 
> 时间：2013-03-21T22:58:29.577
> 
> 标签：python, django

我已经发布了一个关于同一个项目的问题，所以希望这不会烦人，但我真的需要确保我知道我在用 ForeignKey 做什么，所以我不会 (a) 避免它或 (b)养成坏习惯。

我正在开发一个健身游戏，每个用户都有自己的帐户。游戏分为不同的“周”，每周都有不同的基准，用户必须满足这些基准才能进入下周。以下是我如何为周建模的示例：

```
class WeekOne(models.Model):
    # Required benchmarks for given exercises 
    squatBenchmark = 1000
    lungBenchmark = 250
    stairDaysCountBenchmark = 3
    squats = models.PositiveIntegerField()
    lunges = models.PositiveIntegerField()
    skipStairs = models.BooleanField()
    stairDaysCount = models.PositiveSmallIntegerField()
    # Set to true if benchmarks reached. 
    weekOneComplete = models.BooleanField() 
```

现在，我希望每个用户都有自己的深蹲、弓步、skipStairs 等字段，所以我认为这样做的方法是`ForeignKey`在 UserProfile（用户的扩展）模型中创建一个字段，如下所示：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    weekOne = models.ForeignKey(WeekOne)

    def checkUpdates(self):
        if self.WeekOne.squats >= WeekOne.squatBenchmark and \
            self.WeekOne.lunges >= WeekOne.lungBenchmark and \
            self.WeekOne.stairsDayCount >= WeekOne.stairDaysCountBenchmark and \
            self.WeekOne.skipStairs:
                self.WeekOne.weekOneComplete = True
                self.save()
                self.WeekOne.save() 
```

这似乎不起作用。我创建了一个视图，在其中将此模型的上下文传递给模板，如下所示：

```
def workout1(request):
    user = UserProfile(user=request.user)
    template = "workout1.html"
    context = {'user': user}
    return render(request, template, context) 
```

但是当我尝试`user.weekOne.squats`在我的模板中显示时，我得到了一个 DoesNotExist 错误。此外，我希望能够显示`WeekOne`像 squatBenchmark 这样的“静态”变量，但`WeekOne.squats`在我的 Django 模板中也无法识别。谁能给我任何关于我是否正确使用 ForeignKeys 以及在我的视图和模板中尝试使用它们时哪里出错的见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:38:50.487

你所指的任何地方，`self.WeekOne`我认为你的意思是指`self.weekOne`

weekOne 是实例变量。UserProfile 实例没有这样的属性 WeekOne。

标准 Python 命名约定建议您将`week_one`其用作属性名称。为你重写 checkUpdates...

```
class UserProfile(models.Model): 
```

    user = models.OneToOneField(User) week_one = models.ForeignKey(WeekOne)

```
 def check_updates(self):
        if (self.week_one.squats >= WeekOne.squatBenchmark and
            self.week_one.lunges >= WeekOne.lungBenchmark and
            self.week_one.stairs_day_count >= WeekOne.stair_days_count_benchmark and
            self.week_one.skip_stairs):
                self.week_one.week_one_complete = True
                self.save()
                self.week_one.save() 
```

在您的视图代码中，您正在创建一个 UserProfile 对象，但您永远不会保存它。不过，您可能不想每次收到请求时都创建新的用户配置文件。Django 有一些用于自动创建用户配置文件的内置机制。此外，您永远不会创建 WeekOne 实例。就像是

```
profile = UserProfile(user=request.user)
week_one = WeekOne()
week_one.save()
profile.week_one = week_one
profile.save() 
```

在那里，您正在为用户创建配置文件，创建 WeekOne 的实例，将其添加到配置文件中，并将它们都保存到数据库中。

# php - 回显 JavaScript 中的 PHP 变量

> ID：15559776
> 
> 赞同：0
> 
> 时间：2013-03-21T22:59:00.277
> 
> 标签：php, javascript

我有一个回显 JavaScript 的 php 脚本，在 JavaScript 中有 PHP 变量

```
echo '<script type="text/javascript"> 
     FB.init({
    appId: "myid",
    channelUrl: "//mysite/channel.html",
    status: true, // check login status
    cookie: true, // enable cookies to allow the server to access the session
    xfbml: true // parse XFBML
});
FB.getLoginStatus(function (response) {
    if (response.status === "connected") {
        FB.api("me/bookvote:download", "post", {
            book: "<?php echo "http://mysite/auction_details.php?name=$item_details["name"]&auction_id=$item_details["auction_id"]";?>",
            fb:explicitly_shared = "true" //? Is syntactically valid but creates a global
        }, //Missing a , here? 
```

但是，我仍然得到：

```
Uncaught SyntaxError: Unexpected identifier for book: http://mysite.xom/auction_details.php?name=$item_details["name"]&auction_id=$item_details["auction_id"]";?>", 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:04:09.900

我可以发现多个问题：

*   您尝试在单引号内打印变量。它们不会被解析，你需要双引号，或者更好的是，HEREDOC，或者*更好*的是，不要使用 echo 来打印 HTML/JavaScript。
*   您尝试`<?php ?>`在回声中使用其他标签。那显然行不通。

试试这个。我已经消除了回声。请注意，较大的 PHP 标记到此结束。

```
?>
<script type="text/javascript"> 
     FB.init({
    appId: "myid",
    channelUrl: "//mysite/channel.html",
    status: true, // check login status
    cookie: true, // enable cookies to allow the server to access the session
    xfbml: true // parse XFBML
});
FB.getLoginStatus(function (response) {
    if (response.status === "connected") {
        FB.api("me/bookvote:download", "post", {
            book: "<?php echo "http://mysite/auction_details.php?name=$item_details["name"]&auction_id=$item_details["auction_id"]";?>",
            fb:explicitly_shared = "true" //? Is syntactically valid but creates a global
        }, //Missing a , here? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:03:56.687

更改此行：

```
book: "http://mysite/auction_details.php?name=' . $item_details["name"] . '&auction_id=' . $item_details["auction_id"] . '", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:04:10.880

这些变量从未转换为应该使用的实际值。尝试通过连接将该字符串分成多个部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T23:04:35.200

你会想要结束你的回声报价，所以它是这样的：

```
echo '<script type="text/javascript"> 
....
            book: "http://mysite/auction_details.php?name=' . $item_details["name"] . '&auction_id=' . $item_details["auction_id"] . '",
.... 
```

# java - 不幸的是，（应用程序名称）已在 eclipse 中停止

> ID：15559777
> 
> 赞同：-1
> 
> 时间：2013-03-21T22:59:03.893
> 
> 标签：java, javascript, android, xml, eclipse

当我按下应用程序上的任何按钮时，会出现“不幸的是，（应用程序名称）已停止”。我正在使用日食。我使用另一个类似的[项目]：[http](http://android.okhelp.cz/dw/Calculator.apk) ://android.okhelp.cz/dw/Calculator.apk我改变了一些东西。原始项目有效，但这个不是 [http://android.okhelp.cz/calculator-open-source/](http://android.okhelp.cz/calculator-open-source/)

```
<?xml version="1.0" encoding="utf-8"?>
LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="130dp"
        android:clickable="false"
        android:cursorVisible="false"
        android:gravity="right"
       />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_sin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onClickListener_sin"
        android:clickable="true"
        android:text="sin" />

    <Button
        android:id="@+id/button_cos"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onClickListener_cos"
        android:clickable="true"
        android:text="cos" />

    <Button
        android:id="@+id/button_del"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.40"
        android:onClick="onClickListenerReset"
        android:text="Delete" />

</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_tan"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener_tan"
        android:text="tan" />

    <Button
        android:id="@+id/button7"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener7"
        android:text="7" />

    <Button
        android:id="@+id/button8"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener8"
        android:text="8" />

    <Button
        android:id="@+id/button9"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListener9"
        android:text="9" />

    <Button
        android:id="@+id/buttonDivide"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListenerDivide"
        android:text="/" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_log"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener_log"
        android:text="log" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener4"
        android:text="4" />

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener5"
        android:text="5" />

    <Button
        android:id="@+id/button6"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListener6"
        android:text="6" />

    <Button
        android:id="@+id/buttonMultiply"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListenerMultiply"
        android:text="*" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_bra1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener_bra1"
        android:text="(" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener1"
        android:text="1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClickListener2"
        android:text="2" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListener3"
        android:text="3" />

    <Button
        android:id="@+id/buttonMinus"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1.00"
        android:onClick="onClickListenerMinus"
        android:text="-" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_bra2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener_bra2"
        android:text=")" />

    <Button
        android:id="@+id/buttonPoint"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListenerPoint"
        android:text="." />

    <Button
        android:id="@+id/button0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListener0"
        android:text="0" />

    <Button
        android:id="@+id/buttonEqual"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListenerEqual"
        android:text="="
        android:textSize="15sp" />

    <Button
        android:id="@+id/buttonPlus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="onClickListenerPlus"
        android:text="+"
        android:textSize="15dp" />
</LinearLayout> 
```

jave 文件

```
package calc.pack;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Vibrator;
import android.util.Log;

import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {
EditText editText;

Button button0,button1,button2,button3,
       button4,button5,button6,button7,button8,button9,buttonPlus,buttonMinus,buttonMultiply,
            buttonDivide,buttonEqual,buttonPoint,buttonDel,buttonReset,
            button_sin,button_cos,button_tan,button_del,button_bra1,button_bra2,button_reset;

String sum="",one,two,three,four,five,
                        six,seven,eight,nine,
                        zero,plus,minus,multiply,divide,equal,point,del,reset,bra1,bra2;

Integer countOne=0;

Float result=0f,result_mul=1f,result_div=1f;

int pressCount=1,sumZero,c,i;

char press;

String EditTextMsg;

Float floatEditTextMsg;

Double after_log,doubleEditTextMsg,afterSin,after_cos,after_tan,toRadian_doubleEditTextMsg;

Vibrator vibrator;
Bundle savedInstanceState;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    editText=(EditText)findViewById(R.id.editText1);

    button0=(Button)findViewById(R.id.button0);
    button1=(Button)findViewById(R.id.button1);
    button2=(Button)findViewById(R.id.button2);
    button3=(Button)findViewById(R.id.button3);
    button4=(Button)findViewById(R.id.button4);

    button5=(Button)findViewById(R.id.button5);
    button6=(Button)findViewById(R.id.button6);
    button7=(Button)findViewById(R.id.button7);
    button8=(Button)findViewById(R.id.button8);
    button9=(Button)findViewById(R.id.button9);

    buttonPlus=(Button)findViewById(R.id.buttonPlus);
    buttonMinus=(Button)findViewById(R.id.buttonMinus);
    buttonMultiply=(Button)findViewById(R.id.buttonMultiply);
    buttonDivide=(Button)findViewById(R.id.buttonDivide);
    buttonPoint=(Button)findViewById(R.id.buttonPoint);

    buttonEqual=(Button)findViewById(R.id.buttonEqual);

    button_sin=(Button)findViewById(R.id.button_sin);
    button_cos=(Button)findViewById(R.id.button_cos);
    button_tan=(Button)findViewById(R.id.button_tan);

    button_del=(Button)findViewById(R.id.button_del);

    vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE); 

    editText.setText(result.toString());

}
public void onClickListener0(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    if(sum !="")
    {
        zero=(String)button0.getText();

        sum=sum+zero;
        editText.setText(sum);
    }
    else
    {
        sum="0";
        editText.setText("0");
    }
}

public void onClickListener1(View v)
{
    vibrator.vibrate(30);

    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    one=(String)button1.getText();
    sum=sum+one;

    editText.setText(sum);
}

public void onClickListener2(View v)
{
    vibrator.vibrate(30);

    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    if(press=='=')
    {
        onClickListenerEqual(buttonEqual);
    }

    two=(String)button2.getText();
    sum=sum+two;

    editText.setText(sum);
}

public void onClickListener3(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }
    three=(String)button3.getText();
    sum=sum+three;

    editText.setText(sum);
}

public void onClickListener4(View v)
{
    vibrator.vibrate(30);

    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    four=(String)button4.getText();
    sum=sum+four;

    editText.setText(sum);
}

public void onClickListener5(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    five=(String)button5.getText();
    sum=sum+five;

    editText.setText(sum);
}

public void onClickListener6(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    six=(String)button6.getText();
    sum=sum+six;

    editText.setText(sum);
}

public void onClickListener7(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    seven=(String)button7.getText();
    sum=sum+seven;

    editText.setText(sum);
}

public void onClickListener8(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    eight=(String)button8.getText();
    sum=sum+eight;

    editText.setText(sum);
}

public void onClickListener9(View v)
{
    vibrator.vibrate(30);
    if(press=='=')
    {
        onClickListenerReset(buttonReset);
    }

    nine=(String)button9.getText();
    sum=sum+nine;

    editText.setText(sum);
}

public void onClickListenerPlus(View v)
{
    vibrator.vibrate(30);

    if(press=='-')
    {
        onClickListenerEqual(buttonMinus);
    }
    else if(press=='*')
    {
        onClickListenerEqual(buttonMultiply);
    }

    else if(press=='/')
    {
        onClickListenerEqual(buttonDivide);
    }

    press='+';

    if(sum != "")
    {
        result=result+Float.parseFloat(editText.getText().toString());

        editText.setText(result.toString());

        result_mul=result;

        result_div=result;

        sum="";            
    }
    else
    {
        editText.setText(result.toString());

        result_mul=result;

        result_div=result;

        sum="";
    }

}

public void onClickListenerMinus(View v)
{
    vibrator.vibrate(30);
    if(press=='+')
    {
        onClickListenerEqual(buttonPlus);
    }
    else if(press=='*')
    {
        onClickListenerEqual(buttonMultiply);
    }
    else if(press=='/')
    {
        onClickListenerEqual(buttonDivide);
    }

    press='-';

    EditTextMsg= editText.getText().toString(); 
    floatEditTextMsg=Float.parseFloat(EditTextMsg);

    if(sum==""  && result==0)
    {
        sum=sum+'-';
        //Log.d("sum=","minus press");
    }
    else if(sum != "")
    {
        if(result==0)
        {
            result=Float.parseFloat(sum)-result;

            editText.setText(result.toString());

            result_mul=result;

            result_div=result;

            sum="";
        }

        else
        {
            result=result-Float.parseFloat(sum);

            editText.setText(result.toString());

            result_mul=result;

            result_div=result;

            sum="";
        }
    }

}

public void onClickListenerMultiply(View v)
{
    vibrator.vibrate(30);
    if(press=='/')
    {
        onClickListenerEqual(buttonDivide);
    }
    else if(press=='+')
    {
        onClickListenerEqual(buttonPlus);
    }

    else if(press=='-')
    {
        onClickListenerEqual(buttonMinus);
    }

    press='*';

    EditTextMsg= editText.getText().toString(); 
    floatEditTextMsg=Float.parseFloat(EditTextMsg);

    if(sum !="")
    {
        result_mul=result_mul * floatEditTextMsg; 

        result=result_mul;

        result_div=result_mul;

        editText.setText(result_mul.toString());

        sum="";
    }
    else
    {
        editText.setText(EditTextMsg);

        //result_mul=result_mul * Float.parseFloat(sum);

        //result=result_mul;

        sum="";
    }

}

public void onClickListenerDivide(View v)
{
    vibrator.vibrate(30);
    if(press=='+')
    {
        onClickListenerEqual(buttonPlus);
    }

    else if(press=='-')
    {
        onClickListenerEqual(buttonMinus);
    }

    else if(press=='*')
    {
        onClickListenerEqual(buttonMultiply);
    }

    press='/';

    EditTextMsg= editText.getText().toString(); 
    floatEditTextMsg=Float.parseFloat(EditTextMsg);

    if(sum !="" && result_div==1)
    {
        //int c=0;

        if(c==0)
        {
            result_div=floatEditTextMsg/result_div;  
            Log.d("if if result_div=", result_div.toString());
            c++;
        }
        else
        {
            result_div=result_div/floatEditTextMsg; 
            Log.d("if else result_div=", result_div.toString());
        }

        result=result_div;
        result_mul=result_div;

        editText.setText(result_div.toString());

        sum="";
    }
    else if(sum !="" && result_div !=1)
    {
        result_div=result_div/floatEditTextMsg; 

        Log.d("else if result_div=", result_div.toString());

        result=result_div;

        result_mul=result_div;

        editText.setText(result_div.toString());

        sum="";
    }
    else
    {
        editText.setText(EditTextMsg);

        sum="";
    }
}

public void onClickListenerPoint(View v)
{
    vibrator.vibrate(30);

   int error=0;

    if(sum !=null)
    {
        for(int i=0;i<sum.length();i++)
        {
            if(sum.charAt(i)=='.')
            {
                error=1;
                break;
            }
        }

    }

    if(error==0)
    {
        if(sum==null)
        {
            sum=sum+"0.";
        }
        else
        {
            sum=sum+".";
        }
    }

    editText.setText(sum);
}

public void onClickListenerEqual(View v)
{
    vibrator.vibrate(30);

    if(press=='+') 
    {
        onClickListenerPlus(buttonPlus);
        //msg1= editText.getText().toString(); 
        //floatMsg=Float.parseFloat(msg1);
    }
    else if(press=='-') 
    {
        onClickListenerMinus(buttonMinus);
    }
    else if(press=='*') 
    {
        onClickListenerMultiply(buttonMultiply);
    }
    else if(press=='/')
    {
        onClickListenerDivide(buttonDivide);
    }

    press='=';

}

public void onClickListenerReset(View v)
{
    vibrator.vibrate(30);

    sum="";
    countOne=0;//result=0;

    result=0f;
    result_mul=1f;
    result_div=1f;
    press=' ';
    c=0;

    editText.setText(result.toString());
}

public void onClickListener_sin(View v)
{
    vibrator.vibrate(30);

    EditTextMsg= editText.getText().toString(); 
    doubleEditTextMsg=Double.parseDouble(EditTextMsg);//degree

    toRadian_doubleEditTextMsg=Math.toRadians(doubleEditTextMsg);

    afterSin =Math.sin(toRadian_doubleEditTextMsg);

    editText.setText(afterSin.toString());

    EditTextMsg=editText.getText().toString();
    result=Float.parseFloat(EditTextMsg);

    result_mul=Float.parseFloat(EditTextMsg);

    result_div=Float.parseFloat(EditTextMsg);

    sum="";

}

public void onClickListener_cos(View v)
{
    vibrator.vibrate(30);
    EditTextMsg= editText.getText().toString(); 
    doubleEditTextMsg=Double.parseDouble(EditTextMsg);//degree

    toRadian_doubleEditTextMsg=Math.toRadians(doubleEditTextMsg);

    after_cos =Math.cos(toRadian_doubleEditTextMsg);

    editText.setText(after_cos.toString());

    EditTextMsg=editText.getText().toString();
    result=Float.parseFloat(EditTextMsg);

    result_mul=Float.parseFloat(EditTextMsg);

    result_div=Float.parseFloat(EditTextMsg);

    sum="";

}

public void onClickListener_tan(View v)
{
    vibrator.vibrate(30);

    EditTextMsg= editText.getText().toString(); 
    doubleEditTextMsg=Double.parseDouble(EditTextMsg);//degree

    toRadian_doubleEditTextMsg=Math.toRadians(doubleEditTextMsg);

    after_tan =Math.tan(toRadian_doubleEditTextMsg);

    editText.setText(after_tan.toString());

    EditTextMsg=editText.getText().toString();
    result=Float.parseFloat(EditTextMsg);

    result_mul=Float.parseFloat(EditTextMsg);

    result_div=Float.parseFloat(EditTextMsg);

    sum="";
}
public void onClickListener_log(View v)
{

    vibrator.vibrate(30);

   EditTextMsg= editText.getText().toString(); 
   doubleEditTextMsg=Double.parseDouble(EditTextMsg);//degree

   after_log =Math.log10(doubleEditTextMsg);

   editText.setText(after_log.toString());

   EditTextMsg=editText.getText().toString();
   result=Float.parseFloat(EditTextMsg);

   result_mul=Float.parseFloat(EditTextMsg);

   result_div=Float.parseFloat(EditTextMsg);

   sum="";

}

public void onClickListener_bra1(View v)
{

   vibrator.vibrate(30);

    bra1=(String)button_bra1.getText();

    sum=sum+"(";
    editText.setText(sum);

}

public void onClickListener_bra2(View v)
{

    bra2=(String)button_bra2.getText();

    sum=sum+")";
    editText.setText(sum);
} 

 public void onClickListener_del(View v)
 {
     vibrator.vibrate(30);
     if(sum !="")
     {
         StringBuilder stringBuilder=new StringBuilder(80);

         stringBuilder.append(sum);

         sum=stringBuilder.deleteCharAt(stringBuilder.length()-1).toString();

         editText.setText(sum);
     }

 }

} 
```

日志猫

```
03-22 20:34:39.829: D/gralloc_goldfish(1499): Emulator without GPU emulation detected.
03-22 20:34:40.059: I/Choreographer(1499): Skipped 74 frames!  The application may be doing too much work on its main thread.
03-22 20:34:45.889: D/AndroidRuntime(1499): Shutting down VM
03-22 20:34:45.919: W/dalvikvm(1499): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-22 20:34:46.059: E/AndroidRuntime(1499): FATAL EXCEPTION: main
03-22 20:34:46.059: E/AndroidRuntime(1499): java.lang.IllegalStateException: Could not execute method of the activity
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.view.View$1.onClick(View.java:3599)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.view.View.performClick(View.java:4204)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.view.View$PerformClick.run(View.java:17355)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.os.Handler.handleCallback(Handler.java:725)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.os.Looper.loop(Looper.java:137)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at java.lang.reflect.Method.invokeNative(Native Method)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at java.lang.reflect.Method.invoke(Method.java:511)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at dalvik.system.NativeStart.main(Native Method)
03-22 20:34:46.059: E/AndroidRuntime(1499): Caused by: java.lang.reflect.InvocationTargetException
03-22 20:34:46.059: E/AndroidRuntime(1499):     at java.lang.reflect.Method.invokeNative(Native Method)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at java.lang.reflect.Method.invoke(Method.java:511)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.view.View$1.onClick(View.java:3594)
03-22 20:34:46.059: E/AndroidRuntime(1499):     ... 11 more
03-22 20:34:46.059: E/AndroidRuntime(1499): Caused by: java.lang.SecurityException: Requires VIBRATE permission
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.os.Parcel.readException(Parcel.java:1425)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.os.Parcel.readException(Parcel.java:1379)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.os.IVibratorService$Stub$Proxy.vibrate(IVibratorService.java:131)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at android.os.SystemVibrator.vibrate(SystemVibrator.java:57)
03-22 20:34:46.059: E/AndroidRuntime(1499):     at calc.pack.MainActivity.onClickListener4(MainActivity.java:159)
03-22 20:34:46.059: E/AndroidRuntime(1499):     ... 14 more
03-22 20:34:46.509: D/dalvikvm(1499): GC_CONCURRENT freed 121K, 10% free 2659K/2924K, paused    82ms+29ms, total 448ms
03-22 20:34:49.429: I/Process(1499): Sending signal. PID: 1499 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:42:56.760

```
Caused by: java.lang.SecurityException: Requires VIBRATE permission 
```

在您的清单中插入此权限即可获胜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:36:56.690

尝试将您的“ `Integer`”、“ `Float`”和“ `Double`”变量更改为原始的“ `int`”、“ `float`”和“ `double`”类型。

*   因为其中许多值未初始化（即初始化为`null`），我担心在您的`onClick...()`函数中使用它们可能会导致 `NullPointerException`.
*   我的另一个担心是读取这样的数字对象：“ `one=(String)button1.getText();`”可能不起作用，尽管我还没有测试过（为什么不在 `final`类级别将这些不变的值设置为常量值？）。

您必须对代码进行各种基本修改，以便将数值从 Objects 更改为 Primitives，但这些更改都应该是直截了当的。

* * *

*尽管有此建议，但确定崩溃发生位置的最佳方法是查看 LogCat 输出。它会准确地告诉你哪行代码崩溃了。我假设它在您的一个`onClick...()`功能中只是因为您报告说每当按下按钮时应用程序就会崩溃。*

# c# - 从 monodroid 应用程序使用 WCF Web 服务

> ID：15559778
> 
> 赞同：0
> 
> 时间：2013-03-21T22:59:15.687
> 
> 标签：c#, visual-studio-2012, xamarin

我正在尝试从 Android 应用程序测试我的 WCF Web 服务，但出现此错误：

```
No overload for method 'GetData' takes 1 arguments 
```

这是代码：

```
 using client01.TestService;

        EditText = FindViewById<EditText>(Resource.Id.EditText);
        TestService.Service TS = new TestService.Service();
        EditText.Text = TS.GetData(7); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:12:45.930

检查 TS.GetData() 的定义以查看该函数需要多少参数。

# javascript - 什么 VS 魔术提供“.js.bundle”功能来组合 JavaScript 文件？

> ID：15559781
> 
> 赞同：2
> 
> 时间：2013-03-21T22:59:33.433
> 
> 标签：javascript, visual-studio-2010, visual-studio, bundle

我在我的项目中使用了 Durandal，它带有一个类似于以下内容的“vendor.js.bundle”文件：

```
<?xml version="1.0" encoding="utf-8"?>
<bundle minify="true" runOnBuild="true">
  <file>/Scripts/jquery-1.9.1.js</file>
  <file>/Scripts/knockout-2.2.1.debug.js</file>
  <!-- snip -->
</bundle> 
```

我可以说它是某种形式的自动文件来帮助生成“vendor.js”，但我一直无法找到*这个*构建阶段的实际作用——更不用说如何让它在我的环境中“正常工作”了.

我下载了 Web Essentials 扩展，但魔法似乎并非源自那里（或者这只是 VS 2012 版本的一个功能？）而且我的 search-foo 一直失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T12:49:21.140

它确实是 Visual Studio 扩展“Web Essentials”的一个功能。

在您的项目中选择至少两个 javascript 文件并右键单击它们并转到 Web Essentials --> 创建 JavaScript 包文件。

![在此处输入图像描述](../Images/3259dc29f76652f4e2aad517ccaeebec.png)

它将捆绑您的 javascript 文件并创建捆绑包的缩小版本。您也可以对 CSS 文件执行此操作。

# javascript - 计票 Javascript

> ID：15559792
> 
> 赞同：0
> 
> 时间：2013-03-21T23:00:08.730
> 
> 标签：javascript, function, count

嗨，我正在制作一个网站，如果我有一个包含许多 dj 的页面，并且我在每个人中都放置了一个按钮以供人们投票。但是，我不知道如何计算选票以及如何让人们只投票一次。我为每个 DJ 设置了不同的 ID，例如 0、1、2、3，以使我的工作更轻松。我尝试了一个代码，但不计算右键单击，它只计算一次，当我刷新页面时，计数从 0 重新开始。这是我制作的代码：

```
<script>
        function votos(dj){
            var deejays = new Array();
            if(dj == 0){
                deejays[0] = deejays[0] + 1;
                return deejays[0];
                alert("O DJ "+dj+" tem "+deejays[0]+" votos." );
            }else if(dj == 1){
                //deejays[1] = deejays[1] + 1;
                //return deejays[1];
                //alert("O DJ "+dj+" tem "+deejays[1]+" votos." );
                alert(dj);
                }

            }
      </script> 
```

警报现在只是为了帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:03:55.870

您需要某种持久的后端存储（如数据库）来跟踪不同站点访问者之间的投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:07:56.460

使用 cookie 跟踪投票（不安全和可伪造）或使用数据库跟踪每个 IP 或用户的投票（或您需要的任何标准）。你不能只用javascript来做到这一点。

# javascript - window.parent.opener.document 未显示必需的元素

> ID：15559794
> 
> 赞同：0
> 
> 时间：2013-03-21T23:00:23.110
> 
> 标签：javascript, gwt

我有`GWT`popup `window(page1)`，当单击 a 时`button`，它被重定向`window.location`到 jsp(jsp1) 页面。jsp1 页面包含另一个 jsp(2) 页面。Jsp2 页面在点击时有一个按钮，调用一个 javascript 方法。在 Jsp2 上的该方法中，我正在尝试使用访问原始 GWT 弹出窗口（page1）按钮元素

```
window.parent.opener.document.getElementsByTagName("button") . 
```

但它不返回任何元素。如果有任何方法可以访问原始 GWT 页面中存在的元素，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:10:04.690

我找到了解决方案。在 Jsp2 的 javascript 方法中调用 window.parent.opener.parent.document.getElementsByTagName("button")，返回 Gwt 页面中存在的按钮引用

# mysql - 在 mySQL 中使用 IF 语句

> ID：15559795
> 
> 赞同：0
> 
> 时间：2013-03-21T23:00:24.163
> 
> 标签：mysql, if-statement

我尝试在 Mysql 中使用 IF 语句，但未能得到我想要的结果。下面是我的代码：

```
DELIMITER $$
CREATE PROCEDURE myProc()
BEGIN
DECLARE netname  varchar(100);
DECLARE alarm varchar(100);
SET netname = (SELECT `netname ` FROM summary_alarm);
SET alarm = (SELECT `alarm` FROM summary_alarm);
    IF ( netname = 'Abcd' AND alarm = 'Example Name') THEN
        BEGIN
        update summary_alarm set `count`=`count`+1;
        END
    END IF
END 
DELIMITER ; 
```

我想要实现的是更新记录，如果它在列上有“Abcd”并且在列上`netname`有“示例名称” `alarm`。知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:21:09.140

看起来不正确的是：

```
SET netname = (SELECT `netname ` FROM summary_alarm);
SET alarm = (SELECT `alarm` FROM summary_alarm); 
```

我认为您需要在语句中添加`WHERE`子句或 a`GROUP BY`或 a 。`LIMIT 1``SELECT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:28:20.233

参考最新评论，`UPDATE`声明可以自行更新。像这样

```
UPDATE summary_alarm 
SET `count`=`count`+1
WHERE `netname` = 'Abcd' 
    AND `alarm` = 'Example Name'; 
```

# php - 搜索具有 1 个 foreach 的多维数组？

> ID：15559797
> 
> 赞同：0
> 
> 时间：2013-03-21T23:00:38.860
> 
> 标签：php

我想在我的函数中最小化嵌套的 foreach 循环。但问题是，我使用的是 2D 数组，如下所示：

```
 $Multi_Array = array (
        'Users' => array ('User1', 'User2'),
        'Passwords' => array ('Pass1', 'Pass2'),
        'Warnings' => array (1, 30),
        'Admin' => array ('True', 'False')      
    ); 
```

我目前有两个 foreach 循环来处理我的数组。我将如何最小化嵌套的 foreach 循环并仅使用 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:03:39.803

我能想到的唯一方法是在函数中创建 foreach 语句，然后使用 is_array() 检查它是否是一个数组，如果为真，它会将数组传递给函数。

```
function check_array($array){
foreach ($array as $key=>$value){
 if(is_array($value)){
  check_array($value);}
 else { ...do something with $value...}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:14:06.920

我不确定这是否是你想要的，但是这样的事情怎么样：

```
for ($i=0;$i<count($Multi_Array['Users']);$i++)
{
    $users[$Multi_Array['Users'][$i]]['Password'] = $Multi_Array['Passwords'][$i];
    $users[$Multi_Array['Users'][$i]]['Warning'] = $Multi_Array['Warnings'][$i];
    $users[$Multi_Array['Users'][$i]]['Admin'] = $Multi_Array['Admin'][$i];
} 
```

这不是 foreach，而是 1 个循环。

# scala - 使用 Slick “选择”

> ID：15559798
> 
> 赞同：5
> 
> 时间：2013-03-21T23:00:39.557
> 
> 标签：scala, slick

有没有办法在 Slick 中执行这样的查询：

```
"select * from foo where id IN (select other_id from bar where status = 'damaged')" 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:30:09.347

```
for{
    f <- foo,
    b <- bar if (b.status === 'damaged' && f.id === b.other_id)
} yield f 
```

这会产生

```
select x2."id" from "foo" x2, "bar" x3 
    where (x2."id" = x3."other_id") and (x3."status" = 'damaged') 
```

就返回的行而言，这是等效的。如果出于某种原因您需要精确的查询，您可能需要扩展 slick 或使用静态查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T06:03:12.520

是的：

进口：

`import scala.slick.jdbc.{ GetResult, StaticQuery => Q }`

`import Q.interpolation`

结果，以及结果的转换：

`case class FooResult(id: Int, name: String)`

`implicit val getPersonResult = GetResult(r => FooResult(r.<<, r.<<))`

您的查询：

`val status = "damaged"`

`val q = Q.query[String,FooResult]("select * from foo where id IN (select other_id from bar where status = ?)")`

`val result = q.list(status)`

# python - 根据复杂条件选择和重新分配数组中元素的最快方法

> ID：15559799
> 
> 赞同：1
> 
> 时间：2013-03-21T23:00:41.227
> 
> 标签：python, arrays, numpy, scipy

在numpy中根据复杂条件选择和重新分配元素的最快方法是什么，例如：

```
# some 1-d array of floats
myarray = np.array(myarray)
# set any foo's or bar's from myarray to 0
myarray[where(map(lambda x: foo(x) or bar(x), myarray))] = 0 
```

是使用的解决方案`np.vectorize`吗？或者`np.select`也许？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T10:13:12.937

最快的可能是对包含所有条件的数组使用花哨的索引：

```
import numpy as np
x = np.arange(1000)
cond1 = x % 2 == 0      # getting the even numbers
cond2 = x**0.5 % 1 == 0 # getting those with exact square root
cond3 = x % 3 == 0      # getting those divisible by 3
cond =np.all(np.array((cond1,cond2,cond3)),axis=0)
print x[ cond ]
#[  0  36 144 324 576 900] 
```

使用`np.all`意味着 cond1 和 cond2 和 cond3。

使用`np.any`意味着 cond1 或 cond2 或 cond3。

如果所有条件都在预定义的布尔数组中创建，这会更快：

```
conds = np.zeros((3,1000),dtype='bool') 
```

然后将每个条件分配给数组中的一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T16:54:30.920

也可以使用 np.where()：

```
In [7]: a[np.where((a % 2 == 0) & (a % 3 == 0) & (a ** 0.5 % 1 == 0))]
Out[7]: array([  0,  36, 144, 324, 576, 900]) 
```

# dynamics-gp - 使用 Dynamics GP 中的数组的 GLTransaction 的 eConnect XML 文件详细信息

> ID：15559811
> 
> 赞同：0
> 
> 时间：2013-03-21T23:02:13.017
> 
> 标签：dynamics-gp, econnect

我希望使用 econnect 在 Dynamics GP 中输入单个 gltransaction。

我下面的代码确实生成了一个 XML 文件。但是，它在 XML 文件中放置了三个相同的 GL 行项目，每个 25 美元，留下一个不平衡的条目。

我希望它按照下面的代码进行 75 美元的借记、50 美元的贷记和 25 美元的贷记。你能帮我解决一下我做错了什么，所以我没有三件 25 美元的物品进入档案吗？

提前致谢。

```
string DTime = DateTime.Today.ToString();
string CurrentDatabase = "OCITE";
string NextJEno = GetNextJournal.GetNextJournalEntry(CurrentDatabase);

eConnectType eConnect = new eConnectType();

GLTransactionType myGLTrxType = new GLTransactionType();
taGLTransactionHeaderInsert myGLHeader = new taGLTransactionHeaderInsert();
taGLTransactionLineInsert_ItemsTaGLTransactionLineInsert [] myGLDetail = new taGLTransactionLineInsert_ItemsTaGLTransactionLineInsert[3];
taGLTransactionLineInsert_ItemsTaGLTransactionLineInsert myGLDetailLine = new taGLTransactionLineInsert_ItemsTaGLTransactionLineInsert();

myGLDetailLine.BACHNUMB = CurrentDatabase;
myGLDetailLine.JRNENTRY = Int32.Parse(NextJEno);
myGLDetailLine.CRDTAMNT = (decimal)0;
myGLDetailLine.DEBITAMT = (decimal)75.00;
myGLDetailLine.ACTNUMST = "1000-0000-C";

myGLDetail[0] = myGLDetailLine;

myGLDetailLine.BACHNUMB = CurrentDatabase;
myGLDetailLine.JRNENTRY = Int32.Parse(NextJEno);
myGLDetailLine.CRDTAMNT = (decimal)50;
myGLDetailLine.DEBITAMT = (decimal)0;
myGLDetailLine.ACTNUMST = "6560-0000-C";

myGLDetail[1] = myGLDetailLine;

myGLDetailLine.BACHNUMB = CurrentDatabase;
myGLDetailLine.JRNENTRY = Int32.Parse(NextJEno);
myGLDetailLine.CRDTAMNT = (decimal)25;
myGLDetailLine.DEBITAMT = (decimal)0;
myGLDetailLine.ACTNUMST = "5120-0000-C";

myGLDetail[2] = myGLDetailLine;

myGLHeader.BACHNUMB = CurrentDatabase; 
myGLHeader.JRNENTRY = Int32.Parse(NextJEno);
myGLHeader.REFRENCE = "REFRENCE";
myGLHeader.TRXDATE = DTime;
myGLHeader.TRXTYPE = 0;

myGLTrxType.taGLTransactionLineInsert_Items = myGLDetail;
myGLTrxType.taGLTransactionHeaderInsert = myGLHeader;
GLTransactionType[] myGLType = { myGLTrxType };
eConnect.GLTransactionType = myGLType;

FileStream streamFile = new FileStream(filename, FileMode.Create);
XmlTextWriter Xmlwriter = new XmlTextWriter(streamFile, new UTF8Encoding());

XmlSerializer serializer = new XmlSerializer(eConnect.GetType());
serializer.Serialize(Xmlwriter, eConnect);
Xmlwriter.Close(); 
```

XML 文件

```
<eConnect xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<GLTransactionType>
<eConnectProcessInfo xsi:nil="true" />
<taRequesterTrxDisabler_Items xsi:nil="true" />
<taGLTransactionLineInsert_Items>
<taGLTransactionLineInsert>
<BACHNUMB>OCITE</BACHNUMB>
<JRNENTRY>1750</JRNENTRY>
<CRDTAMNT>25</CRDTAMNT>
<DEBITAMT>0</DEBITAMT>
<ACTNUMST>5120-0000-C</ACTNUMST>
</taGLTransactionLineInsert>
<taGLTransactionLineInsert>
<BACHNUMB>OCITE</BACHNUMB>
<JRNENTRY>1750</JRNENTRY>
<CRDTAMNT>25</CRDTAMNT>
<DEBITAMT>0</DEBITAMT>
<ACTNUMST>5120-0000-C</ACTNUMST>
</taGLTransactionLineInsert>
<taGLTransactionLineInsert>
<BACHNUMB>OCITE</BACHNUMB>
<JRNENTRY>1750</JRNENTRY>
<CRDTAMNT>25</CRDTAMNT>
<DEBITAMT>0</DEBITAMT>
<ACTNUMST>5120-0000-C</ACTNUMST>
</taGLTransactionLineInsert>
</taGLTransactionLineInsert_Items>
<taAnalyticsDistribution_Items xsi:nil="true" />
<taGLTransactionHeaderInsert>
<BACHNUMB>OCITE</BACHNUMB>
<JRNENTRY>1750</JRNENTRY>
<REFRENCE>REFRENCE</REFRENCE>
<TRXDATE>3/21/2013 12:00:00 AM</TRXDATE>
<TRXTYPE>0</TRXTYPE>
</taGLTransactionHeaderInsert>
<taMdaUpdate_Items xsi:nil="true" />
</GLTransactionType>
</eConnect> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:59:39.500

我想出了一个解决我自己问题的方法。

即，为“每一”单行创建一个 myGLDetailLine 对象的新实例将解决此问题。

```
taGLTransactionLineInsert_ItemsTaGLTransactionLineInsert myGLDetailLine = new taGLTransactionLineInsert_ItemsTaGLTransactionLineInsert(); 
```

# python - 在 python 中使用 .csv 按特定列数据排序

> ID：15559812
> 
> 赞同：8
> 
> 时间：2013-03-21T23:02:32.600
> 
> 标签：python, sorting, csv

我正在尝试订购一个包含 300 多个条目的 .csv 文件，并将其全部按方言下一个特定列中的数值排序。这是我到目前为止编写的代码，但它似乎只是在输入数据时输出

```
import csv
import itertools
from itertools import groupby as gb

reader = csv.DictReader(open('Full_List.csv', 'r'))

groups = gb(reader, lambda d: d['red label'])
result = [max(g, key=lambda d: d['red label']) for k, g in groups]

writer = csv.DictWriter(open('output.csv', 'w'), reader.fieldnames)
writer.writeheader()
writer.writerows(result) 
```

整个文件中只有 50 行包含方言“红色标签”下的值，其他所有行都留空。它在 .csv 的 Z 列中（但不是最后一个），所以我假设该列的索引是 25（0 是第一个）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T01:54:26.437

使用[熊猫](http://pandas.pydata.org/pandas-docs/stable/)怎么样？

```
import pandas as pd
df = pd.read_csv('Full_List.csv')
df = df.sort('red label')
df.to_csv('Full_List_sorted.csv', index=False) 
```

您可能需要调整选项以匹配 CSV 文件`read_csv`的`to_csv`格式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T23:21:03.200

`groupby`不是用于排序，而是用于对可迭代进行分块。用于排序`sorted`。

```
import csv

reader = csv.DictReader(open('Full_List.csv', 'r'))
result = sorted(reader, key=lambda d: float(d['red label']))

writer = csv.DictWriter(open('output.csv', 'w'), reader.fieldnames)
writer.writeheader()
writer.writerows(result) 
```

*注意：*我更改了您的 lambda 以将您的字符数据转换为浮点数以进行正确的数字排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-16T18:00:49.383

我通过测试发现以下内容适用于我拥有的 csv 文件。请注意，该列的所有行都有有效条目。

```
from optparse import OptionParser
# Create options.statistic using -s
# Open and set up input file
ifile = open(options.filein, 'rb')
reader = cvs.DictReader(ifile)
# Create the sorted list
try:
  print 'Try the float version'
  sortedlist = sorted(reader, key = lambda d: float(d[options.statistic]), reverse=options.high)
except ValueError:
  print 'Need to use the text version'
  ifile.seek(0)
  ifile.next()
  sortedlist = sorted(reader, key=lambda d: d[options.statistic], reverse=options.high)
# Close the input file. This allows the input file to be the same as the output file
ifile.close()
# Open the output file
ofile = open(options.fileout, 'wb')
writer = csv.DictWriter(ofile, fieldnames=outfields, extrasactions='ignore', restval = '')
# Output the header
writer.writerow(dict((fn, fn) for fn in outfields))
# Output the sorted list
writer.writerows(sortedlist)
ofile.close() 
```

# bash - 使用 sed 在匹配字符串的行尾插入文本

> ID：15559821
> 
> 赞同：-1
> 
> 时间：2013-03-21T23:03:39.040
> 
> 标签：bash, sed

我在文本文件中有一行，其中包含分配给变量的项目列表...

```
ITEMS="$ITEM1 $ITEM2 $ITEM3" 
```

我想编写一个 bash 脚本，它使用 sed 来查找匹配项目的行，并将另一个项目附加到双引号内的列表末尾，所以它会导致......

```
ITEMS="$ITEM1 $ITEM2 $ITEM3 $ITEM4" 
```

此外，我将要添加的项目的编号存储在一个变量中，假设它是 $number。所以我试图让它添加 $ITEM4$number 并让它用我分配给该变量的任何内容替换 $number，假设在这种情况下它是数字 4。我怎样才能最好地做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T23:07:05.477

试试这个 ：

```
num=4
sed "/ITEMS=/s/\"$/ \$ITEM${num}\"/" 
```

## 解释

*   `/re/s/before/after/`这里使用的 sed 形式`re`是正则表达式（如 a `grep`），`s///`是*替换*
*   `\s`是一个空间，`*`表示 0 次或多次出现
*   `&`*代表在替换*的左边部分匹配的字符串
**   `^`作为正则表达式的第一个字符表示*字符串/行的开头**   `$`作为正则表达式的最后一个字符表示*字符串/行的结尾**

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T23:46:59.883

```
$ cat file
ITEMS="$ITEM1 $ITEM2 $ITEM3"
$ number=4
$ sed "/ITEMS/s/\"$/ \$ITEM$number&/" file
ITEMS="$ITEM1 $ITEM2 $ITEM3 $ITEM4" 
```*

# java - 程序的映射执行

> ID：15559823
> 
> 赞同：-1
> 
> 时间：2013-03-21T23:03:41.493
> 
> 标签：java

我正在学习 Java，我想知道是否有某种方法可以“映射”一段 Java 代码的执行。

IE：

某种软件逐步执行程序并返回如下内容：

在第 x 行调用此方法并将变量 a 从值 b 更改为值 c。

等等

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:04:36.827

您可以使用 eclipse 进行逐步调试。

这是一个向您展示如何操作的教程：

[http://agile.csc.ncsu.edu/SEMaterials/tutorials/eclipse-debugger/](http://agile.csc.ncsu.edu/SEMaterials/tutorials/eclipse-debugger/)

# sql-server - sys.fn_IsBitSetInBitmask 是如何工作的？

> ID：15559828
> 
> 赞同：1
> 
> 时间：2013-03-21T23:03:57.807
> 
> 标签：sql-server, function, bit-manipulation

如上所述，sys.fn_IsBitSetInBitmask 在 SQL Server 中是如何工作的？请给我一个例子好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T00:49:39.207

它表示二进制数中被翻转的点，因此由于二进制中的 111 是“7”（第 1、第 2 和第 3 位都打开）。然后让我们使用十六进制数 0x7 作为该函数中的第一个参数并检查 1 位

（我将在这里使用 convert() 到 varbinary 只是为了表明这是二进制数的表示，你不需要 convert() 函数）

```
 select sys.fn_IsBitSetInBitmask(convert(VARBINARY, 0x7),1) 
```

这会返回一些 <> 0（到目前为止，我只看到返回值是 2^(7+n)，sys.fn_IsBitSetInBitmask 函数的第二个参数是 n）。另一个例子是，如果我们给出十六进制数 0xa，它等于二进制的 1010，然后第 4 位和第 2 位被翻转（有一个）。所以函数调用

```
 if   (sys.fn_IsBitSetInBitmask(convert(VARBINARY, 0xa),2)<> 0)
        if   (sys.fn_IsBitSetInBitmask(convert(VARBINARY, 0xa),4) <> 0)
           select 'sup son' 
```

将返回'sup son'。只需从say中选择值

```
 select sys.fn_IsBitSetInBitmask(convert(VARBINARY, 0xa),4) 
```

将返回一个值 2^(7+n) ，其中 n 为 4 所以 2^11 即 2048

# python - TypeError：*后的类型对象参数必须是序列，而不是生成器

> ID：15559829
> 
> 赞同：13
> 
> 时间：2013-03-21T23:03:59.723
> 
> 标签：python, generator, typeerror

为什么以下 Python 代码会引发错误
`TypeError: type object argument after * must be a sequence, not generator`
，而如果我在生成器 f 中注释第一行（无用），一切正常？

```
from itertools import izip

def z():
    for _ in range(10): 
        yield _

def f(z):
    for _ in z: pass    # if I comment this line it works! (??)
    for x in range(10):
        yield (x,10*x,100*x,1000*x)

iterators =  izip(*f(z))
for it in iterators:
    print list(it) 
```

注意我实际上想要做的是，使用单个生成器返回多个迭代器（我将作为参数传递给生成器的数量）。我发现这样做的唯一方法是产生元组并在它们上使用 izip() - 对我来说是黑魔法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-21T23:10:19.030

这很有趣：`z`当你把它传递给时你忘了打电话`f`：

```
iterators =  izip(*f(z())) 
```

所以`f`试图迭代一个函数对象：

```
for _ in z: pass  # z is a function 
```

这引发了 TypeError：

```
TypeError: 'function' object is not iterable 
```

Python 内部人员抓住了它并重新提出了一条令人困惑的错误消息。

```
# ceval.c

static PyObject *
ext_do_call(PyObject *func, PyObject ***pp_stack, int flags, int na, int nk)
{
 ...

            t = PySequence_Tuple(stararg);
            if (t == NULL) {
                if (PyErr_ExceptionMatches(PyExc_TypeError)) {
                    PyErr_Format(PyExc_TypeError,
                                 "%.200s%.200s argument after * "
                                 "must be a sequence, not %200s",
                                 PyEval_GetFuncName(func),
                                 PyEval_GetFuncDesc(func),
                                 stararg->ob_type->tp_name);
 ... 
```

# html - 屏幕底部或页面底部的背景图像

> ID：15559832
> 
> 赞同：1
> 
> 时间：2013-03-21T23:04:07.867
> 
> 标签：html, css

我有两个背景图像。如果页面上的信息太多，我希望它们固定在屏幕底部或页面底部。我只能对其中一种情况进行编码 - 背景图像固定在屏幕底部或页面底部（body {}）。

```
body {
    line-height: 1;
    background-attachment:scroll;
    background-image:url(images/fonskreisapuse.png), url(images/fonslabapuse.png);
    background-repeat:no-repeat;
    background-position:bottom left, bottom right;
} 
```

在第一张图片中，背景图片固定在正文的底部：http: [//www.bildites.lv/viewer.php?file=ivbdtsimebot29u96rs8.jpg](http://www.bildites.lv/viewer.php?file=ivbdtsimebot29u96rs8.jpg)

在这张图片中，背景固定在屏幕底部： http: [//www.bildites.lv/viewer.php?file=yzrixvjqec2qe3fgu396.jpg](http://www.bildites.lv/viewer.php?file=yzrixvjqec2qe3fgu396.jpg)

如果图片固定在屏幕底部，我将页面向下滚动以查看问题。如果页面上的信息不多，或者如果信息足以向下滚动，我想将背景图像固定到屏幕底部。而且我不希望背景图像一直固定在屏幕底部，因为它会与主要内容混合。

几天来我一直在尝试解决这个问题，但我无法让它像那样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:49:53.640

像这样的东西？

```
<!DOCTYPE html>
<html>
<head>
<style>
html{
    min-height:100%;
    background-attachment:scroll;
    background-image:url(https://upload.wikimedia.org/wikipedia/commons/a/a9/Example.jpg), url(https://upload.wikimedia.org/wikipedia/commons/a/a9/Example.jpg);
    background-repeat:no-repeat;
    background-position:bottom left, bottom right;
}
body {
    line-height: 1;
    padding-bottom:200px;
}
</style>
</head>
<body>
<p>sample text</p>
<script>
addContent = function(){
    var p = document.createElement('p')
    var b = document.getElementsByTagName('body')[0]
    var t = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent feugiat tincidunt urna at ultrices. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis id mauris arcu, sit amet suscipit sem."
    var l = new Array(10)
    p.appendChild(document.createTextNode(l.join(t)))
    b.appendChild(p);
    return false
 }
</script>
<a href="#" onclick="return addContent()">add content</a>
</body>
</html> 
```

# javascript - 是否可以随着容器宽度的增加均匀分布图像，同时增加或减少每行中的项目数？

> ID：15559835
> 
> 赞同：2
> 
> 时间：2013-03-21T23:04:11.180
> 
> 标签：javascript, html, css, responsive-design

我有一个流体容器中的图像库。在最小尺寸（980 像素）下，有 5 张图片，最后一张图片没有边距，所以所有东西都很好地适合容器。

当我增加窗口的宽度时，右边总是有额外的空间，直到有足够的空间让下一张图像出现。很典型。我尝试使用自适应图像，但它们对于手头的任务来说有点太大了。

是否可以将图像均匀分布在灵活的 div 上（我知道这可能使用 justify css），直到有足够的空间容纳行中的另一个图像，此时它将被包括在内？

我目前有一个列表中的图像。

```
 <ul>
      <li>image</li>
      <li>image</li>
      <li>image</li>
      <li>image</li>
    </ul> 
```

项目向左浮动，有一个左边距，除了第一个孩子的边距：0；

很合身（5 跨）。 [http://d.pr/i/q24L](http://d.pr/i/q24L)

不太好（6+）： [http ://d.pr/i/VAHi](http://d.pr/i/VAHi)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:07:16.633

我会使用媒体查询来确定不同的宽度 IE：

```
@media screen and (max-width: 580px) {

//styles for 5 columns 
}

@media screen and (max-width: 650px) {

//styles for 6 columns 
} 
```

显然，我选择的宽度是任意的。您需要知道每列的这些尺寸是正确的

根据您的评论，我为 JS 解决方案（在 jquery 中）做了一个小提琴。这是小提琴：http: [//jsfiddle.net/yEeKe/6/](http://jsfiddle.net/yEeKe/6/)

JS 看起来像这样：

```
(function($){
    $('#myUL').width($(window).width() - ($(window).width() % $('img').first().width())); 
    $(window).resize(function(){
        $('#myUL').css('width', ($(window).width() - ($(window).width() % $('img').first().width())) +'px');     
    }); 
})(jQuery); 
```

没有媒体查询。显然，你会调整它以适应你的特定设计......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:24:37.170

这可以使用`display: inline-block;`and `text-align: justify;`( [http://jsfiddle.net/7JZJq/2/](http://jsfiddle.net/7JZJq/2/) )。但是，可能没有足够的图像来完全填充最后一行。在这种情况下，该行中图像之间的空间将不同。

# c# - 在 ListView 中查找 Repeater 内的控件

> ID：15559836
> 
> 赞同：-1
> 
> 时间：2013-03-21T23:04:17.497
> 
> 标签：c#, asp.net

我在中继器中有一个 ListView，我喜欢从中继器中的 tbl 检索 Id 值并将其分配给 ListView 内的 txtBox。我的问题是我在列表视图中找不到控件（在转发器控件内）。（顺便说一句，我是相当新的）

我得到了这个（对象引用未设置为 obj 的实例。）以防万一我想再次说明清楚，我有一个转发器，并且我在这个转发器中有 table 和 listView。因此，我想从表列中检索 ID 值作为中继器中显示的每个项目，并将这个单独的 ID 分配给 ListView 内的控件，以便我可以通过它们的 primary.ID = FK.ID 附加和显示数据。我通过“repeaterGetSelectedID”属性从中继器项目中收集 ID，并将其分配给中继器外部的标签就好了，但我喜欢将此 ID 值分配给 listView 内的文本框，尽管我在 listView 中找不到控件。希望我已经设法解释。谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:25:47.290

您需要使用 ItemDataBound 事件来访问转发器的控件：

```
protected void repeaterID_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        ListView listView = e.Item.FindControl("listViewID") as ListView;
        TextBox textBox = listView.FindControl("textBoxID") as TextBox;

        textBox.Text = listView.StringYoureLookingFor;
    }
} 
```

确保将转发器的`OnItemDataBound`属性设置为“repeaterID_ItemDataBound”，以便在绑定其数据项时实际触发事件。

# android - ActionBar 向上导航重新创建父活动而不是 onResume

> ID：15559838
> 
> 赞同：72
> 
> 时间：2013-03-21T23:04:29.743
> 
> 标签：android, android-actionbar

我正在使用推荐的[向上导航](http://developer.android.com/training/implementing-navigation/ancestral.html)方法，我的代码如下所示：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            Intent h = new Intent(ShowDetailsActivity.this, MainActivity.class);
            h.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(h);
            return true;
        default: return super.onOptionsItemSelected(item);
    }
} 
```

这是用例：

1.  我启动我的应用程序“MainActivity”
2.  我单击一个按钮转到“ShowDetailsActivity”
3.  我点击 UP ActionBar 导航

问题是在我单击 UP 后，MainActivity 再次访问其 onCreate() 方法并丢失所有状态，而不是像我刚刚从 ShowDetailsActivity 调用“finish()”那样从典型的 onResume() 开始。为什么？这是它总是如何工作的吗？这是 Android 重新创建使用“向上”导航方法导航到的所有活动的预期行为？如果我点击后退按钮，我会得到预期的 onResume 生命周期。

如果不存在 Android“正确”的解决方案，这是我的解决方案：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            Intent upIntent = new Intent(this, MainActivity.class);
            if (NavUtils.shouldUpRecreateTask(this, upIntent)) {
                NavUtils.navigateUpTo(this, upIntent);
                finish();
            } else {
                finish();
            }
            return true;
        default: return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2014-02-14T12:08:07.997

将以下内容添加到清单文件中的父活动

```
android:launchMode="singleTop" 
```

关于这个[答案](https://stackoverflow.com/a/15933890/626601)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-01-07T15:15:34.420

**使用向上导航时重新创建活动的原因**是，如果您未指定其他模式，则 android 为此使用标准启动模式。这意味着

> “系统总是在目标任务中创建一个新的活动实例”

因此重新创建了活动（请参阅[此处](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)的文档）。

**一种解决方案**是将 MainActivity 的启动模式声明为

```
android:launchMode="singleTop" 
```

在`AndroidManifest.xml`
[（应始终与 一起工作`Intent.FLAG_ACTIVITY_CLEAR_TOP`）]

**或者**你可以添加[`FLAG_ACTIVITY_SINGLE_TOP`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)到你的意图标志，告诉活动，它不应该被重新创建，如果它在后台堆栈上，例如

```
Intent h = NavUtils.getParentActivityIntent(this); 
h.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
NavUtils.navigateUpTo(this, h); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-08-26T06:49:44.740

这段代码对我有用：

```
Intent upIntent = NavUtils.getParentActivityIntent(this);
if (NavUtils.shouldUpRecreateTask(this, upIntent)) {
    // This activity is NOT part of this app's task, so create a new task
    // when navigating up, with a synthesized back stack.
    TaskStackBuilder.create(this)
        // Add all of this activity's parents to the back stack
        .addNextIntentWithParentStack(upIntent)
        // Navigate up to the closest parent
        .startActivities();
} else {
    // This activity is part of this app's task, so simply
    // navigate up to the logical parent activity.
    upIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    NavUtils.navigateUpTo(this, upIntent);
}

return true; 
```

不需要完成（）调用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-14T07:43:43.907

从 Android 4.1（API 级别 16）开始，您可以通过在元素中指定 android:parentActivityName 属性来声明每个活动的逻辑父级。如果您的应用支持 Android 4.0 及更低版本，请在您的应用中包含支持库并在 . 然后将父活动指定为 android.support.PARENT_ACTIVITY 的值，匹配 android:parentActivityName 属性。

```
<application ... >
...
<!-- The main/home activity (it has no parent activity) -->
<activity
    android:name="com.example.myfirstapp.MainActivity" ...>
    ...
</activity>
<!-- A child of the main activity -->
<activity
    android:name="com.example.myfirstapp.DisplayMessageActivity"
    android:label="@string/title_activity_display_message"
    android:parentActivityName="com.example.myfirstapp.MainActivity" >
    <!-- Parent activity meta-data to support 4.0 and lower -->
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.example.myfirstapp.MainActivity" />
</activity> 
```

如果父activity有launch mode，或者upintent包含FLAG_ACTIVITY_CLEAR_TOP，父activity被带到栈顶，并通过其onNewIntent()方法接收intent。

```
<activity
        android:launchMode="singleTop"
        android:name="com.example.myfirstapp.MainActivity">

    </activity> 
```

**在上述代码“SingleTop”中，还可以创建“singleTop”活动的新实例来处理新意图。但是，如果目标任务在其堆栈顶部已经有活动的现有实例，则该实例将接收新意图（在 onNewIntent() 调用中）；未创建新实例。**

[有关详细文档，请单击此处](http://developer.android.com/training/implementing-navigation/ancestral.html)

**要在用户按下应用程序图标时向上导航，您可以使用 NavUtils 类的静态方法 navigateUpFromSameTask()。** 为此，请阅读上面链接中给出的文档。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-13T04:47:35.697

对我有用的（我也认为最干净的）是将活动重新排序到前面。如果堆栈中不存在它，它将在您“导航”时创建。

```
Intent upIntent = NavUtils.getParentActivityIntent(this);
upIntent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(upIntent);
finish();
return true; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-23T16:21:00.450

您只需要返回，而不是再次创建活动。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            super.onBackPressed();
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

# r - 在 for 循环 R 中添加列

> ID：15559845
> 
> 赞同：3
> 
> 时间：2013-03-21T23:05:06.827
> 
> 标签：r

这是一个更大的脚本的一部分——长话短说，R 的输入是以分号分隔的路径，指向我的文本文件的位置。所有文本文件的格式如下：

文件1：

```
Name1   3
Name2   4
Name3   55 
```

文件2：

```
Name1   4
Name2   33
Name3   102 
```

文件3：

```
Name1   12
Name2   2
Name5   33 
```

这是一个例子：

```
cond1<-'/User/Desktop/File1;/User/Desktop/File2;/User/Desktop/File3'

#separates the elements
normalList<-strsplit(cond1, ";")

#now you can access each element 
nor<-unlist(normalList)

baseNorm<-vector("list", length(nor))
dirNorm<-vector("list", length(nor))
pathNorm<-vector("list", length(nor))
Norm<-vector("list", length(nor))
new<-vector("list", length(nor))
for (i in 1:length(nor))
{
  baseNorm[[i]] <- basename(nor[i])
  dirNorm[[i]]<-dirname(nor[i])
  pathNorm[[i]]<-paste(dirNorm[[i]], baseNorm[[i]], sep="/")
  Norm[[i]]<-read.delim(pathNorm[[i]], header=F)

} 
```

在此处的示例中，R 的输入包含 3 个文件-但是我需要脚本足够灵活，以便它可以处理传递的任意数量的文件，因此尝试使用 for 循环。BIG IDEA 是：1）获取所有文件的特定文件的路径。2) 将文本文件加载到 R 中 3) 创建一个包含公共第一列（Name1、Name2、Name3）的新文件。这个新文件中所有接下来的列对应于 File1、File2、File3、File4 等的第 2 列。本质上，我需要创建一个主文件：

```
Name1   3   4   55
Name2   4   33  102
Name3   12  2   33 
```

我敢肯定，即使对于我已经拥有的代码，也有一个更简单的解决方案，因为对于所有 [[]]，我什至不知道如何开始编写创建主文件的函数。我刚开始使用 R，所以任何输入都是宝贵的学习经验，在此先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:32:37.747

像这样的东西？？：

```
fileNames <- list.files()

master1 <- read.csv(file = fileNames[1], sep = ";", header = T)    

for(i in 2:length(fileNames)){    
file1 <- read.csv(file = fileNames[i], sep = ";", header = T)
master1$newCol1 <- file1[,2]
colnames(master1)[ncol(master1)] <- paste("file",i,sep = "")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:33:05.587

我意识到我可能有点模糊。这是一些可能有帮助的半伪代码。

```
my.files <- list.files(pattern = ".csv")
imported.files <- sapply(my.files, read.csv, ...) # additional paramaters for proper import
out <- do.call("cbind", imported.files) 
```

# visual-studio-2012 - 工作室风格几乎从不工作 visual studio 2012

> ID：15559848
> 
> 赞同：1
> 
> 时间：2013-03-21T23:05:17.790
> 
> 标签：visual-studio-2012, resharper

每次我从[http://studiostyl.es/](http://studiostyl.es/)下载工作室风格时，它看起来都与网站上的风格不同。我安装了 Resharper 并禁用了颜色突出显示，但仍然无法正常工作。还有其他人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:48:53.863

[我认为http://studiostyl.es/](http://studiostyl.es/)上的大多数样式都适用于 VS2010。此外，Resharper 引入了很多自己的颜色设置，这些设置可能会覆盖 Visual Studio 的设置。

尝试使用[Visual Studio 2012 颜色主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)扩展来更改颜色。

# android - 带有包含 TableLayouts 的 Fragments 的 ViewPager 加载缓慢：

> ID：15559851
> 
> 赞同：6
> 
> 时间：2013-03-21T23:06:13.360
> 
> 标签：android, android-fragments, android-viewpager, android-fragmentactivity

我正在开发一个`ViewPager`包含 Fragments 的 Activity（每次最多 4 个片段），每个包含`TableLayout`. 所以基本上加载了4个表。这是将数据加载到`Fragment`稍后附加到的代码`ViewPager`：

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    if (container == null) {
        return null;
    }

    LinearLayout.LayoutParams layoutParams=new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    layoutParams.gravity=Gravity.CENTER_VERTICAL;
    layoutParams.setMargins(10, 0, 0, 0);

    fragmetLayout = (LinearLayout)inflater.inflate(R.layout.grid_fragment_layout, container, false);
    table = (TableLayout) fragmetLayout.findViewById(R.id.tlGridTable);
    llParameterContainer =  (LinearLayout) fragmetLayout.findViewById(R.id.llParametersContainer);
    tabName = (TextView) fragmetLayout.findViewById(R.id.tvTabName);
    tabName.setText(tab.getTabName());
    //tabName.setLayoutParams(layoutParams);

    for (Parameter parameter : SGRaportManagerAppObj.getInstance().parametersRepository.getParametersRepository())
    {
        ImageView parameterPoint = new ImageView(getActivity());
        parameterPoint.setImageResource(R.drawable.parameter_chosen_point);
        parameterPoint.setPadding(10, 10, 10, 0);
        parameterPoint.setLayoutParams(layoutParams);
        llParameterContainer.addView(parameterPoint);

        TextView parameterTextView = new TextView(getActivity());
        parameterTextView.setText(parameter.getName()+":");
        parameterTextView.setGravity(Gravity.CENTER);
        parameterTextView.setTextColor(getResources().getColor(R.color.my_black));  
        parameterTextView.setPadding(5, 10, 3, 10);
        parameterTextView.setLayoutParams(layoutParams);
        llParameterContainer.addView(parameterTextView);
        TextView parameterChosenValueTextView = new TextView(getActivity());
        parameterChosenValueTextView.setText(parameter.getChosenValue());
        parameterChosenValueTextView.setGravity(Gravity.CENTER); 
        parameterChosenValueTextView.setPadding(0, 10, 0, 10);
        parameterChosenValueTextView.setLayoutParams(layoutParams);
        parameterChosenValueTextView.setTextColor(getResources().getColor(R.color.my_black));   
        llParameterContainer.addView(parameterChosenValueTextView);

    }
    //table.setStretchAllColumns(true);  
    //table.setShrinkAllColumns(true); 
    TableRow tableRow = new TableRow(getActivity());
    TableLayout.LayoutParams tableRowParams=new TableLayout.LayoutParams(TableLayout.LayoutParams.WRAP_CONTENT,TableLayout.LayoutParams.WRAP_CONTENT);
    tableRowParams.setMargins(2, 0, 0, 0);
    tableRow.setLayoutParams(tableRowParams);
    Log.d(TAG, "TAB FROM FRAGMENT:"+tab.toString());

    TableRow.LayoutParams tlparamsFirstColumn = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT); 
    tlparamsFirstColumn.setMargins(4, 0, 2, 0);
    TableRow.LayoutParams tlparams = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT); 
    tlparams.setMargins(0, 0, 2, 0);

    //The First row for the column names.
    for (int i= 0; i < tab.getGrid().getGridColumnsList().size(); i++)
    {
        TextView tvName = new TextView(getActivity());
        String columnName = tab.getGrid().getGridColumnsList().get(i).getGridColumnAlias();
        tvName.setText(columnName);
        Log.d(TAG, "COLUMN ALIAS FROM FRAGMENT: "+columnName);
        if (i == 0)
        {
            tvName.setLayoutParams(tlparamsFirstColumn);
        }
        else
        {
            tvName.setLayoutParams(tlparams);
        }
        tvName.setGravity(Gravity.CENTER);
        tvName.setTextColor(getResources().getColor(R.color.my_white));  
        tvName.setPadding(10, 10, 10, 10);
        tvName.setBackgroundDrawable(getResources().getDrawable(R.drawable.grid_column_name_background));   
        tableRow.addView(tvName);
    }
    table.addView(tableRow);

    for (int j = 0; j < tab.getGrid().getGridData().getNumRows(); j++)
    {
        TableRow newRow = new TableRow(getActivity());
        TableLayout.LayoutParams insideRowParams=new TableLayout.LayoutParams(TableLayout.LayoutParams.WRAP_CONTENT,TableLayout.LayoutParams.WRAP_CONTENT);
        tableRowParams.setMargins(0, 2, 0, 0);
        for (int k = 0; k < tab.getGrid().getGridData().getNumCols(j); k++)
        {
            TextView tvName = new TextView(getActivity());
            String columnName = tab.getGrid().getGridData().get(j, k);
            tvName.setText(columnName);

            if ( (j % 2) == 0)
            {
                tvName.setBackgroundDrawable(getResources().getDrawable(R.drawable.grid_first_row_background)); 
            }
            else
            {
                tvName.setBackgroundDrawable(getResources().getDrawable(R.drawable.grid_second_row_background));    
            }
            if (k == 0)
            {
                tvName.setLayoutParams(tlparamsFirstColumn);
            }
            else
            {
                tvName.setLayoutParams(tlparams);
            }
            tvName.setGravity(Gravity.CENTER);
            tvName.setTextColor(getResources().getColor(R.color.my_black));  
            tvName.setPadding(10, 10, 10, 10);
            newRow.addView(tvName);  
        }
        table.addView(newRow);          
    }
    return fragmetLayout;
} 
```

**更新：**

**我的 ViewPagerActivity 布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/imageView3" >

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" >
        </android.support.v4.view.ViewPager>

         <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>
</TabHost>

 <ImageView
    android:id="@+id/imageView3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="-3dp"
    android:background="@drawable/login_scr_top_bar"
    android:contentDescription="@drawable/login_scr_top_bar" />

<TextView
    android:id="@+id/tvReportName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="top|left"
    android:paddingLeft="15dp"
    android:paddingTop="13dp"
    android:text="@string/report_tabs"
    android:textColor="@color/my_black"
    android:textSize="18sp"
    android:textStyle="bold" />

<LinearLayout
    android:id="@+id/llTabsButtonsContainer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:gravity="center_horizontal"
    android:orientation="horizontal"
    android:paddingBottom="5dp"
    android:paddingTop="5dp" > 
</LinearLayout>

<TextView
    android:id="@+id/tvReportTitle"
    android:layout_width="wrap_content"
    android:layout_height="20dp"
    android:layout_alignBaseline="@+id/tvReportName"
    android:layout_alignBottom="@+id/tvReportName"
    android:layout_toLeftOf="@+id/bBackToParameters"
    android:layout_toRightOf="@+id/tvReportName"
    android:text="TextView"
    android:textSize="18sp" />

<Button
    android:id="@+id/bBackToParameters"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/tvReportTitle"
    android:layout_marginRight="10dp"
    android:layout_alignParentRight="true"
    android:background="@drawable/button_back_to_parameters_selector"
    android:clickable="true"
    android:onClick="backToParametersButtonOnClick"
    android:padding="3dp"
    android:text="@string/back_to_parameters"
    android:textColor="@color/my_white"
    android:textStyle="bold" />

</RelativeLayout> 
```

**和我的 GridFramgnet 布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
android:id="@+id/llParametersContainer"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >
</LinearLayout>

<TextView 
    android:id="@+id/tvTabName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:textColor="@color/my_black"
    android:textStyle="bold"
    android:textSize="18sp"
    android:layout_marginLeft="10dp"
    android:text="It a test string for report Name"/>

    <ScrollView 
    android:id="@+id/layout" 
    android:layout_height="match_parent"         
    android:scrollbars="horizontal|vertical" 
    android:layout_width="match_parent"     
    android:layout_marginTop="5dip"     
    android:scrollbarStyle="outsideInset"
    android:fillViewport="true"> 

    <HorizontalScrollView 
        android:id="@+id/horizontalView" 
        android:layout_height="wrap_content"     
        android:scrollbars="horizontal|vertical" 
        android:layout_width="wrap_content"     
        android:layout_marginTop="5dip">

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/tlGridTable" >   
        </TableLayout>
    </HorizontalScrollView>
   </ScrollView>
 </LinearLayout> 
```

**问题**This for 3加载大约需要 10 秒，因此用户在实际加载`Fragments`之前会黑屏 10 秒。`Activity`我怎样才能避免它？运行填充表格的所有过程`AsyncTask`会使我`ViewPager` `Activity`的加载速度更快吗？甚至可以做到吗？

**更新：** 大部分时间都花在填充/创建`TableLayout`. 如果从服务器接收到大量数据，则需要创建大量`TextView`s 并将它们设置在`TableLayout`.

**更新＃2：** 好吧，我已经解决了这个问题，因为据我了解，我的需求（整个视图的水平和垂直滚动）我必须使用`TableLayout`，所以我需要等待这个时间来加载它。但是我需要找到一种方法来加载片段中的数据，至少让用户知道数据正在被填充（显示适当的`Dialog`）。`onCreate`在开始初始化片段之前，我尝试在其中放置一个对话框，`ViewPager`但由于某种原因它没有显示，并且在加载片段之前我只看到黑屏。

# **更新：**

请参考最后一个问题，因为我知道无法修复加载时间：

**问题：** 有没有办法创建一个`ViewPager`几乎空的片段（每个片段只有一个单独的标题），将它们呈现给用户，然后在活动已经加载并可见（而不是显示黑屏）之后，在显示对话框时呈现`Dialog`并填充片段？

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T10:10:52.720

> 这对于 3 个 Fragments 大约需要 10 秒来加载，因此用户在实际加载 Activity 之前会黑屏 10 秒。

原因是您在布局中使用的小部件数量加上`Activity`. 从你发布的内容来看，你有这样的东西：

> 可能的包装器`ViewPager`- `Activity`> `ViewPager`-> 至少一个`ScrollView`（正如你所说的关于垂直和水平滚动的内容） -> `Linearlayout`-> TableLayout -> TableRow -> content of`TableRow`

那是 7 的深度（如果我没记错的话，支持片段框架也会在两者之间插入一些视图）。这对性能非常不利。您还有很多小部件（假设这些`for`循环最多运行 10 次迭代，否则它真的很糟糕），`Fragment`并且考虑到第二个片段也将加载其视图，您可以看到这将再次是性能受到打击。

发布您当前的布局以查看它们是否无法优化会很有帮助。

您可以对当前代码进行一些小的改进，但这不会帮助您从 10 秒到最多 1 秒，就像您应该的那样：

这段代码没有意义：

```
if (container == null) {
    return null;
} 
```

我不知道这是做什么的：

```
SGRaportManagerAppObj.getInstance().parametersRepository.getParametersRepository() 
```

但看看你是否不创建无用的对象（那是单例吗？）。不要把它放在`for`循环中，因为它每次都会运行，使用一个正常`for`的来避免使用`Iterator`：

```
final int count = SGRaportManagerAppObj.getInstance().parametersRepository.getParametersRepository().size();
for (int i = 0; i < count; i++) {
     final Parameter parameter = SGRaportManagerAppObj.getInstance().parametersRepository.getParametersRepository().get(i);
     // ... rest of code 
```

您应该在其他`for`循环中执行相同的操作。

在循环之外检索那些资源（颜色和可绘制对象）`for`，在循环中仅将它们分配给视图。

**编辑：** 你的布局很深，视图太多，所以性能会很差。克服这个问题的唯一方法是使用一个回收其视图的小部件（我知道你说了什么）。替代方案是：

*   在后台线程上创建这些视图（我不会这样做，因为它非常危险）
*   您可以修改片段以简单地扩展 中的布局`onCreateView`并返回并显示 loading `ProgressDialog`。在`Fragment`变得可见之后，您将开始创建`Fragment`块中的真实视图，最后将其附加到片段。这对于用户体验来说是非常糟糕的。

并且当您使用 a`ViewPager`时，将有额外的工作来使页面切换之间的事情顺利进行。也许您可以重新考虑当前的设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T12:52:54.040

> 大部分时间都花在填充/创建 TableLayout 上。如果从服务器接收到大量数据，则需要创建大量 TextView 并将它们设置在 TableLayout 中

然后不要使用`TableLayout`. 使用 a`ListView`或其他形式`AdapterView`，这样您只需要“填充/创建”足以填充可见空间，然后可以在用户滚动时填充更多（如果用户滚动的话）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T09:35:40.030

由于您使用寻呼机，因此当您开始活动时，您加载的不仅仅是第一个片段。使带有进度条的初始片段视图可见并隐藏表格并仅在切换到该片段时加载数据。

在活动中使用

```
mPager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int position) {
                Fragment f = mAdapter.getFragment(mPager.getCurrentItem());
                f.loadData(); // when you finish loading the data, hide the progress bar and show the table

            }

            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

            }

            @Override
            public void onPageScrollStateChanged(int state) {
            }
        }); 
```

要使用 mAdapter.getFragment()，请从以下位置继承您的适配器：

```
 public abstract class SmartFragmentPagerAdapter extends FragmentPagerAdapter{

    private SparseArray<String> mFragmentTags;
    private FragmentManager mFragmentManager;

    public SmartFragmentPagerAdapter(FragmentManager fragmentManager) {
        super(fragmentManager);
        mFragmentManager = fragmentManager;
        mFragmentTags = new SparseArray<String>();
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        Object obj = super.instantiateItem(container, position);
        if (obj instanceof Fragment) {
            // record the fragment tag here.
            Fragment f = (Fragment) obj;
            String tag = f.getTag();
            mFragmentTags.put(position, tag);
        }
        return obj;
    }

    public Fragment getFragment(int position) {
        String tag = mFragmentTags.get(position);
        if (tag == null)
            return null;
        return mFragmentManager.findFragmentByTag(tag);
    }

    public FragmentManager getFragmentManager(){
        return mFragmentManager;
    }

} 
```

# jquery - Python 相当于 Javascript 的 jQuery 还是 Node 的cheerio？

> ID：15559854
> 
> 赞同：6
> 
> 时间：2013-03-21T23:06:41.190
> 
> 标签：jquery, python, api, node.js, cheerio

我正在寻找一个与 jQuery 或 Cheerio 具有相似 API 和用法的库。

**我的用例是：**为包含 javascript/css 文件引用的任何脚本或链接标签解析 HTML 文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T23:08:44.540

jQuery 的 Python 等效项是[pyQuery](https://pypi.python.org/pypi/pyquery)。在该链接下，您可以找到使用示例。您还可以访问[GitHub 上的 PyQuery](https://github.com/gawel/pyquery)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T23:09:11.543

虽然[pyQuery](https://pypi.python.org/pypi/pyquery)是 jQuery 等价物，但从**您的用例来看，**我认为可能像[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)这样的东西可能更适合您想要做的事情。

以下摘自美丽汤官方网站：

> Beautiful Soup 是一个 Python 库，专为屏幕抓取等快速周转项目而设计。三个功能使其功能强大：
> 
> 1.  Beautiful Soup 提供了一些用于导航、搜索和修改解析树的简单方法和 Pythonic 习惯用法：用于剖析文档和提取所需内容的工具包。编写应用程序不需要太多代码
>     
>     
> 2.  Beautiful Soup 自动将传入文档转换为 Unicode，将传出文档自动转换为 UTF-8。您不必考虑编码，除非文档未指定编码并且 Beautiful Soup 无法自动检测编码。然后你只需要指定原始编码。
>     
>     
> 3.  Beautiful Soup 位于流行的 Python 解析器（如 lxml 和 html5lib）之上，允许您尝试不同的解析策略或以速度换取灵活性。
>     
>     
> 
> Beautiful Soup 解析你给它的任何东西，并为你做树遍历的东西。您可以告诉它“查找所有链接”，或“查找类 externalLink 的所有链接”，或“查找所有 url 匹配“foo.com”的链接，或“查找带有粗体文本的表格标题，然后给出我那条短信。”

# java - Android 应用程序无法在其他笔记本电脑上运行

> ID：15559856
> 
> 赞同：-2
> 
> 时间：2013-03-21T23:06:42.997
> 
> 标签：java, php, android, sql, eclipse

我正在开发一个安卓应用程序。它在我的笔记本电脑上运行良好，但如果我在不同的笔记本电脑或安卓设备上使用相同的源代码，它不会加载某些内容（例如链接到远程 SQL 数据库的列表）。它使用完全相同的代码和软件版本在我的笔记本电脑上加载良好。

这可能是什么原因？

这是我现在得到的错误：

```
03-21 23:42:20.174: W/dalvikvm(1037): threadid=1: thread exiting with uncaught exception (group=0x40014760)
03-21 23:42:20.183: E/AndroidRuntime(1037): FATAL EXCEPTION: main
03-21 23:42:20.183: E/AndroidRuntime(1037): java.lang.NullPointerException
03-21 23:42:20.183: E/AndroidRuntime(1037):     at android.widget.PopupWindow.showAtLocation(PopupWindow.java:791)
03-21 23:42:20.183: E/AndroidRuntime(1037):     at com.fokrul.justdeals.ActivityTab$2.onItemLongClick(ActivityTab.java:298) 
```

我的第 298 行如下：

```
 lvBooks.setOnItemLongClickListener(new OnItemLongClickListener(){
                public boolean onItemLongClick(AdapterView<?> arg0, View view, final int position, long arg3) {
                    LayoutInflater inflater = (LayoutInflater)ActivityTab.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    View viewInflated = inflater.inflate(R.layout.popupfile, null, false);
                    popup = new PopupWindow(viewInflated, Resizable.getDrawableWidth(getResources(), R.drawable.popup_menu), Resizable.getDrawableHeight(getResources(), R.drawable.popup_menu), true);

                    popup.setAnimationStyle(R.style.animation_popup);

                    View lvBooks = null;
    <THIS IS LINE 298>>>>> popup.showAtLocation(lvBooks, Gravity.NO_GRAVITY, view.getWidth()/2-Resizable.getDrawableWidth(getResources(), R.drawable.popup_menu)/2, view.getTop()+view.getHeight()/2);

                    setPopupListeners(viewInflated, position, bid);

                    return false;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:17:02.757

您`null`在方法中传递了一个参数`showAtLocation()`。如果您查看 的[文档`showAtLocation(View, int, int, int)`](http://developer.android.com/reference/android/widget/PopupWindow.html#showAtLocation%28android.view.View,%20int,%20int,%20int%29)，它会说它调用`getWindowToken()`. `View`既然是`null`你的情况，你会得到`NullPointerException`. 您需要确保`lvBooks`设置为实际的`View`.

# c++ - Google 实现的 BTree 地图

> ID：15559858
> 
> 赞同：0
> 
> 时间：2013-03-21T23:06:58.570
> 
> 标签：c++, b-tree

我正在尝试使用[Google 的 C++ BTree](https://code.google.com/p/cpp-btree/)。

代码：

```
typedef btree_map<int, int> MyMap;
MyMap *obj_map = new MyMap;
obj_map->insert(make_pair(1,1));
obj_map->insert(make_pair(2,2));
obj_map->insert(make_pair(3,3));
obj_map->insert(make_pair(4,4));
obj_map->insert(make_pair(5,5));
obj_map->insert(make_pair(6,6));

MyMap::const_iterator lookup = obj_map->find(4);
printf("found %d", *lookup); 
```

我第一次运行它时编译时会发出警告，但 Eclipse 会提示错误：

```
ref_impl/../include/btree.h: In instantiation of ‘btree::btree_node<Params>::const_reference btree::btree_node<Params>::value(int) const [with Params = btree::btree_map_params<int, int, std::less<int>, std::allocator<std::pair<const int, int> >, 256>; btree::btree_node<Params>::const_reference = const std::pair<const int, int>&]’:
ref_impl/../include/btree.h:806:32:   required from ‘btree::btree_iterator<Node, Reference, Pointer>::reference btree::btree_iterator<Node, Reference, Pointer>::operator*() const [with Node = const btree::btree_node<btree::btree_map_params<int, int, std::less<int>, std::allocator<std::pair<const int, int> >, 256> >; Reference = const std::pair<const int, int>&; Pointer = const std::pair<const int, int>*; btree::btree_iterator<Node, Reference, Pointer>::reference = const std::pair<const int, int>&]’
ref_impl/core.cpp:404:22:   required from here
ref_impl/../include/btree.h:560:63: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] 
```

如果我再次运行该程序，它会运行并显示正确的结果。问题是，如果我在实际程序中使用上述实现，它不会呈现持久的结果。

对于如何解决这个问题，有任何的建议吗？

# java - LWJGL 只旋转一个对象

> ID：15559864
> 
> 赞同：2
> 
> 时间：2013-03-21T23:07:34.473
> 
> 标签：java, matrix, 3d, rotation, lwjgl

我正在尝试仅旋转我使用 LWJGL 在 Java 中创建的场景中的两个对象之一。
现在，当我尝试旋转一个对象时，它不会围绕它的中心旋转，而是以大圆圈旋转。在谷歌上搜索后，我现在知道它应该像这样工作：

```
glPushMatrix();
glBegin();

  //Code in here

glEnd();
glRotate();
glPopMatrix(); 
```

但这对我不起作用。物体没有旋转。这是我的渲染代码：

```
 public void render() {

        glPushMatrix();

            glRotatef(rotate, 0, 1.0f, 0);                   

            glBegin(GL_QUADS);

                // Top
                glVertex3f(-centerX + size, centerY + size, -centerZ - size);
                glVertex3f(-centerX - size, centerY + size, -centerZ - size);
                glVertex3f(-centerX - size, centerY + size, -centerZ + size);
                glVertex3f(-centerX + size, centerY + size, -centerZ + size);
                // Bottom
                glVertex3f(-centerX + size, centerY - size, -centerZ + size);
                glVertex3f(-centerX - size, centerY - size, -centerZ + size);
                glVertex3f(-centerX - size, centerY - size, -centerZ - size);
                glVertex3f(-centerX + size, centerY - size, -centerZ - size);
                // One side
                glVertex3f(-centerX + size, centerY + size, -centerZ + size);
                glVertex3f(-centerX - size, centerY + size, -centerZ + size);
                glVertex3f(-centerX - size, centerY - size, -centerZ + size);
                glVertex3f(-centerX + size, centerY - size, -centerZ + size);
                // Moar sides
                glVertex3f(-centerX + size, centerY - size, -centerZ - size);
                glVertex3f(-centerX - size, centerY - size, -centerZ - size);
                glVertex3f(-centerX - size, centerY + size, -centerZ - size);
                glVertex3f(-centerX + size, centerY + size, -centerZ - size);
                // Last side
                glVertex3f(-centerX - size, centerY + size, -centerZ + size);
                glVertex3f(-centerX - size, centerY + size, -centerZ - size);
                glVertex3f(-centerX - size, centerY - size, -centerZ - size);
                glVertex3f(-centerX - size, centerY - size, -centerZ + size);
                // Real last side
                glVertex3f(-centerX + size, centerY + size, -centerZ - size);
                glVertex3f(-centerX + size, centerY + size, -centerZ + size);
                glVertex3f(-centerX + size, centerY - size, -centerZ + size);
                glVertex3f(-centerX + size, centerY - size, -centerZ - size);

            glEnd();

        glPopMatrix();

        rotate++;
} 
```

我现在尝试解决这个问题几个小时，但无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:09:57.517

您应该在绘制四边形之前调用`glRotate()`and 。`glTranslate()`

请记住，转换的顺序很重要。旋转总是大约`0,0,0`，所以如果你先平移，它会绕着圆中的一个点“环绕”。如果您希望它围绕自己的轴旋转（您可能会这样做）首先旋转，然后平移。

本文中有一节是关于转换顺序的。

[http://www.glprogramming.com/red/chapter03.html](http://www.glprogramming.com/red/chapter03.html)

# android - Android Fragment Manager（支持），在方向改变后恢复状态和顺序

> ID：15559865
> 
> 赞同：2
> 
> 时间：2013-03-21T23:07:36.833
> 
> 标签：android, android-fragments, screen-orientation

今天大部分时间都在寻找有效的方法来做到这一点。我觉得我的问题的一部分是我的架构，但我远远超出了修补的范围，我肯定必须支持横向。

我的应用大量使用片段。我支持 2.2 及更高版本。我总共使用了大约 11 个片段。其中两个构成静态页眉和页脚。这些很容易使用。

我真正的问题是在 savedInstanceState() 发生后如何正确恢复片段的状态（比如注册，部分填写的表格）。当我的堆栈只包含 1 个项目时，这很容易。默认情况下，该项目被重新绘制，我可以处理它。

我遇到的困难是当我旋转时堆栈中有多个项目。我的堆栈仍然保存这些片段，但它们是分离的，如果不引入意大利面条关系检查，我无法智能地重新附加它们。

如果你能帮助我至少做到那么远，那么那时甚至可以使用 savestate 包吗？

整天都在为此苦苦挣扎。直到现在我真的很喜欢工作片段。

请不要提及：

```
 android:configChanges="orientation"> 
```

它对我不起作用/不适用。

# xamarin.ios - 我已经在 Xamarin Studio 中导出了我的突出显示方案。现在我该如何导入它？

> ID：15559866
> 
> 赞同：0
> 
> 时间：2013-03-21T23:07:51.653
> 
> 标签：xamarin.ios, xamarin.android, monodevelop, xamarin, xamarin-studio

Xamarin Studio 的最新更新改变了语法高亮的存储和导出方式，显然是为了使其与 Visual Studio 兼容，结果我的自定义方案丢失了。我煞费苦心地重新配置了方案并将其导出。但是现在，当我尝试将方案“添加”到另一台计算机上的 Xamarin Studio 中时，什么也没有发生。

如何将导出的方案导入另一台计算机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:27:10.000

如果导出的文件以`Style.json`它结尾，则会导入，例如`MySyntaxHighlightingSchemeStyle.json`.

这是来自 MonoDevelop 的 Mike Kruger 通过 IRC 提出的。我测试了它，它工作得很好。谢谢迈克！

# c# - 输出参数始终返回 0

> ID：15559869
> 
> 赞同：0
> 
> 时间：2013-03-21T23:08:13.730
> 
> 标签：c#, c#-4.0

任何人都可以看看，看看他们是否能找出为什么我的输出参数总是返回 0。

它很简单，我只是看不到它。

------------------------SP------------------------- --

```
ALTER PROCEDURE [dbo].[test] 
    -- Add the parameters for the stored procedure here
    @SearchPhrase VarChar(100),
    @RecordsFound INT OUTPUT
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    SELECT  
          loads of stuff from table

    set @RecordsFound = @@ROWCOUNT;
END 
```

------------------C#代码--------------------------

```
using (SqlConnection cn = new SqlConnection(dbConn))
                {
                using (SqlCommand cmd = new SqlCommand(spName, cn))
                    {
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.Add(new SqlParameter("@SearchPhrase", SqlDbType.VarChar, 100));
                    cmd.Parameters["@SearchPhrase"].Value = id;
                    cmd.Parameters.Add(new SqlParameter("@RecordsFound", SqlDbType.Int));
                    cmd.Parameters["@RecordsFound"].Direction = ParameterDirection.Output;

                    List<News> Data = new List<News>();
                    try
                        {
                        cn.Open();
                        using (SqlDataReader rdr = cmd.ExecuteReader(CommandBehavior.Default))
                            {
                            if (rdr.HasRows)
                                {
                                while (rdr.Read())
                                    {
                                    Data.Add(new News
                                    {
                                        strNewsTitle            = (string)rdr["NewsTitle"],
                                        strNewsDatePosted       = (string)rdr["NewsDatePosted"],
                                        strNewsDescription      = (string)rdr["NewsDescription"],
                                        strLocationOfImageURL   = (string)rdr["ImageURL"],
                                        recordsReturned = Convert.ToInt32(cmd.Parameters["@RecordsFound"].Value) 
                                    });
                                    int recordsReturned1 = Convert.ToInt32(cmd.Parameters["@RecordsFound"].Value);
                                    }
                                int recordsReturned2 = Convert.ToInt32(cmd.Parameters["@RecordsFound"].Value);
                                }

                            return Data; 
```

在测试存储过程时，我可以看到 @RecordsFound 确实返回了一个值，所以我认为问题出在我的代码上。

谢谢

乔治

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:16:15.253

[在此页面上的 MSDN](http://msdn.microsoft.com/en-us/library/haa3afyz%28v=VS.71%29.aspx)

> 如果您的命令包含输出参数或返回值，则在关闭 DataReader 之前它们将不可用。

```
using (SqlDataReader rdr = cmd.ExecuteReader(CommandBehavior.Default))
{
    if (rdr.HasRows)
    {
        while (rdr.Read())
        {
            Data.Add(new News
            {
                strNewsTitle = (string)rdr["NewsTitle"],
                strNewsDatePosted = (string)rdr["NewsDatePosted"],
                strNewsDescription = (string)rdr["NewsDescription"],
                strLocationOfImageURL = (string)rdr["ImageURL"],
                recordsReturned = Convert.ToInt32(cmd.Parameters["@RecordsFound"].Value) 
            });
            // NOT AVAILABLE HERE - READER IS OPEN
            // int recordsReturned1 = Convert.ToInt32(cmd.Parameters["@RecordsFound"].Value);
        }
        // STILL OPEN
        //int recordsReturned2 = Convert.ToInt32(cmd.Parameters["@RecordsFound"].Value);
    }
}
// Data reader closed and disposed, get output parameter here or never
int recordsReturned2 = Convert.ToInt32(cmd.Parameters["@RecordsFound"].Value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T23:09:29.997

```
SET NOCOUNT ON; 
```

未启用行计数，因此默认为 0。

# c# - C# out 关键字含义和它在 PHP 中是否有等价物？

> ID：15559878
> 
> 赞同：5
> 
> 时间：2013-03-21T23:09:16.853
> 
> 标签：c#, php, out

我正在尝试将此 C# 方法转换为 PHP。第二个参数中的out是什么意思？

```
public static bool Foo(string name, out string key) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T23:10:17.127

`out`关键字指定参数必须由被调用的方法赋值，赋值的值会传回调用方法。查看[MSDN](http://msdn.microsoft.com/en-us/library/ee332485.aspx)了解更多信息。

我不认为 PHP 具有所需的赋值行为的等价物，但如果您正在转换方法主体并在内部维护该行为，您应该能够将其转换为常规的通过引用参数传递并保持相同的功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T23:10:36.367

[文档^(参考)](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.80%29.aspx)

```
public static function foo($str, &$key)
                                 ^
                                 | Pass by reference 
```

请考虑在 C# 中，您必须在使用时在调用方法中设置一个值，`out`遗憾*的*是您不能直接将其转换为 PHP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T23:30:04.770

一点点谷歌搜索把我带到了这个网站：[http ://www.php.net/manual/en/language.references.pass.php](http://www.php.net/manual/en/language.references.pass.php)

如您所知，参数是变量的副本。这意味着您实际上不会更改变量本身。
例如：

```
<?php
    function foo($bar) {
        $bar++;
    }

    $bar = 5;  // $bar = 5
    foo($bar); // $bar = 6

    echo $bar; // $bar = 5
?> 
```

而这段代码实际上会改变给定的变量，就像使用引用一样。

```
<?php
    function foo(&$bar) {
        $bar++;
    }

    $bar = 5;  // $bar = 5
    foo($bar); // $bar = 6

    echo $bar; // $bar = 6 now
?> 
```

注意：这不是 C# 中 out-parameter 的精确 PHP 版本

# excel - 筛选包含值的字段的数据透视表

> ID：15559882
> 
> 赞同：0
> 
> 时间：2013-03-21T23:09:31.403
> 
> 标签：excel, filter, pivot, vba

我正在尝试过滤可数据透视字段“名称”以仅显示标题中包含“AA5”的记录。

当我录制宏时，似乎只取消选择不包含 AA5 的最新项目（使用 false 属性）。而不是使用 AA5=true 属性。

但是，由于枢轴不断更新新数据，第二次运行宏不会删除新添加的项目，因为代码已经确定了哪些不显示，而不是显示哪些。

```
Sub Macro3()

    Range("A8").Select
    ActiveSheet.PivotTables("PivotTable1").PivotCache.Refresh
    With ActiveSheet.PivotTables("PivotTable1").PivotFields("Name")
            With ActiveSheet.PivotTables("PivotTable1").PivotFields("Name")
        .PivotItems("Test:777:1").Visible = False
        .PivotItems("Test:777:2").Visible = False
        .PivotItems("Test:777:3").Visible = False

    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:41:53.227

It would go this way:

```
Sub Quick()
    Dim PTfield As PivotField

    Set PTfield = ActiveSheet.PivotTables(1).PivotFields("Name")
    With PTfield
        .ClearAllFilters
        .PivotFilters.Add xlCaptionEquals, , "AA5" 'for exact matching
    End With

End Sub 
```

If `AA5` is a part of filtering fields, then change parameter into `xlCaptionContains`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T18:14:46.870

这是一个实际有效的简单宏。我有一个数据透视表，其中包含 H 列订单填充率 % 的各种成品。98.5% 或更低的订单完成率被认为是不好的。该宏将从第 5 行开始转到 H 列，然后逐行检查填充率。它将隐藏好的行，让需要进一步分析或操作的行可见。它将继续这样做，直到到达“最后一行”

子 zSeries09_FilterPivotTable_ByFillRate98pt5() ' ' zSeries09_FilterPivotTable_ByFillRate98pt5 宏 '

' Application.Calculation = xlManual

```
Dim LR As String

Selection.SpecialCells(xlCellTypeLastCell).Select

LR = ActiveCell.Row

Application.Goto Reference:="R5C8" 
```

常规：

```
 If ActiveCell.Row < LR Then GoTo TestError Else GoTo EndCom 
```

测试错误：

```
 If IsError(ActiveCell) = True Then GoTo HideRow Else 
```

测试空白：

```
 If IsEmpty(ActiveCell) = True Then GoTo HideRow Else 
```

测试填充率：

```
 If ActiveCell.Value >= 0.985 Then GoTo HideRow Else 
```

不隐藏：

```
 Application.Goto Reference:="R[1]C"

 GoTo Routine 
```

隐藏行：

```
 Selection.EntireRow.Hidden = True
Application.Goto Reference:="R[1]C"

GoTo Routine 
```

终端通讯：

```
Application.Calculation = xlAutomatic 
```

结束子

# php - 创建文件时如何在 PHP 中读取文件（）（mp3）

> ID：15559887
> 
> 赞同：0
> 
> 时间：2013-03-21T23:10:10.690
> 
> 标签：php, mp3, readfile

我想设置一个使用 PHP 中的 readfile 函数读取 mp3 文件的脚本。唯一的问题是我不想在开始为最终用户阅读之前等待 mp3 文件完成编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:19:33.997

假设您将编码器作为与 PHP 分开的进程生​​成，您应该使用[`popen`](http://www.php.net/manual/en/function.popen.php)这样做并指示它在`stdout`. 然后，您可以轻松地`fread`在表示编码器标准输出的管道上使用，并将您读取的任何内容转发到浏览器。

像这样的东西：

```
// Assuming that you have already sent the proper 
// HTTP headers to serve a download earlier

$handle = popen('encoder --param --output-to-stdout', 'r');
while (!$feof($handle)) {
    echo fread($handle, 2048); // or some other size, doesn't really matter
}
pclose($handle); 
```

# list - 在 Haskell 中展平列表

> ID：15559889
> 
> 赞同：2
> 
> 时间：2013-03-21T23:10:18.503
> 
> 标签：list, haskell

我试图在 Haskell 的列表中展平任意数量的列表。我知道这个问题之前已经在 Stack 上发布过，但是那里的答案对我来说太复杂了（我是 Haskell 的新手），或者不是满足我需求的答案（例如 concat 对我不起作用，因为我必须自己为考试学习指南编写这个 flatten 函数）。我还在 Haskell 中编写了自己的 flatten 函数，以了解为什么顶级解决方案使用模块。

这是我到目前为止所拥有的。

```
flatten :: [[a]] -> [a]
flatten [] = []
flatten (x:xs) = flatten x:flatten xs 
```

但是，我收到一个错误：

```
Inferred type is not general enough
*** Expression    : flatten
*** Expected type : [[a]] -> [a]
*** Inferred type : [[[a]]] -> [[a]] 
```

编辑：对不起！我误解了我的考试学习问题。列表的所有元素实际上都必须是列表。例如， `[[[1,2,3], [4,5,6]], [7,8,9]]`而不是`[1, [2,3,4]]`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T23:39:31.723

**第 1 步：定义数据。** 您需要一个支持任意嵌套的数据类型。 `[a]`没有，因此您将无法以这种方式解决问题。

那么数据会是什么样子呢？一些 Lisp 符号怎么样：

```
a
()
(a b c)
((a b) c d)
(a (b c) d (e (f))) 
```

看起来一个元素可以是一个原子，也可以是一个列表。那么让我们说一下 Haskell 中的前一句：

```
data Element t = -- "an element is either ..."
    = Atom t     -- "an atom ..."
    | List [Element t]  -- "or a list of elements"
  deriving (Show)       -- "and please print things for me too, okay?" 
```

**第二步：遍历数据。** 现在您需要编写一个将 an 展平`Element t`为列表的函数。类型签名会是什么样子？

我建议`flatten :: Element t -> [t]`。为了实现它，它需要两种情况——一种用于`Atom`s，另一种用于`List`s：

```
flatten :: Element t -> [t]
flatten (Atom x) = ....
flatten (List xs) = ..... 
```

请记住，每个方程都必须计算为 a `[t]`。祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T23:24:59.380

让我们计算出你的函数的类型：如果你有一个列表列表，这就是`[[a]]`. 你想把它展平为一个列表，`[a]`所以展平的类型应该是`[[a]] -> [a]`。您也可以作弊并查找 的类型`concat`，因为您知道您正在重新实现它。

现在让我们看看实现。第一种情况匹配`[]`并返回`[]`。这符合`[[a]] -> [a]`吗？是的，因为参数`[]`是一个空的类型列表，`[something]`其中某些东西可以具有 type `[a]`。返回值也符合我们的类型，因为它是一个空的类型列表`[whatever]`，任何东西都可以有 type `a`。

现在让我们看看第二种情况，它是否与类型匹配`[[a]] -> [a]`？`(x:xs)`与手段匹配的模式`x`有类型`[a]`，`xs`有类型`[[a]]`，这很好。问题是您的递归调用：第一个调用`flatten`具有`x`type `[a]`。但是我们知道 flatten 的参数必须是 type `[[a]]`。

顺便说一句，如果您先声明函数的类型，您通常会得到更清晰或更精确的类型错误消息。这是因为编译器一旦发现与您声明的内容相矛盾，就会立即停止。如果省略签名，编译器只会检查定义是否与自身一致。当我声明类型 GHC 告诉我：

```
    无法将类型“a”与“[a0]”匹配
      `a' 是一个刚性类型变量，由
          flatten :: [[a]] -> [a] at x.hs:20:1 的类型签名
    预期类型：[[a0]]
      实际类型：[a]
    在`flatten'的第一个参数中，即`x'
    在 `(:)' 的第一个参数中，即 `flatten x'

```

这正是我们发现自己手动检查类型的结果。我们传递给的参数`flatten`应该有类型`[[a]]`，但我们实际上传递了一个类型的值`[a]`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T07:08:05.337

好吧，在 Haskell 中，所有嵌套列表对所有元素都有统一的嵌套深度。这是类型系统的结果，它要求列表的所有元素都属于同一类型。

类似以下定义的东西永远无法进行类型检查：

```
example = [1, [2, 3, 4], [[5, 6], [7]]] 
```

第一个元素是`1 :: Integer`，第二个元素是 ，`[2, 3, 4] :: [Integer]`依此类推。

同样的问题适用于您编辑的示例：

```
[[[1,2,3], [4,5,6]], [7,8,9]] 
```

该列表的第一个元素将具有类似的类型`[[Integer]]`，而第二个元素将具有类似的类型`[Integer]`。但这是不允许的。

第二件事：不仅列表不能有不均匀的深度，也不存在可以“查看”不同深度的不同嵌套列表的函数。like 类型的函数`[[a]] -> [a]`会从其输入列表中“剥离”一层嵌套，但会被`a`视为不透明类型——它不知道类型`a`是什么，所以如果你传递一个`[[[Integer]]]`参数，就不能利用`flatten`这个事实你给它的那个参数——<code>a 可以是任何东西！`a``[Integer]`

因此，在 Haskell 中唯一可以完成的列表展平是在函数类型固定的某个深度移除嵌套。因此，例如，`flatten`只剥离一层嵌套，使用函数组合我们可以剥离两个或更多：`flatten . flatten :: [[[a]]] -> [a]`、、`flatten . flatten . flatten :: [[[[a]]]] -> [a]`等等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T07:05:31.590

`[[[1,2,3], [4,5,6]], [7,8,9]]`也不是有效的 Haskell 列表。它包含两个元素；第一个是`[[1,2,3], [4,5,6]]`which is a `[[Int]]`，第二个是 just `[7,8,9]`，which is just `[Int]`。

Haskell 中的列表始终是 type `[a]`，对于某些列表中的所有元素`a`必须**相同**。这意味着如果您正在处理嵌套列表，则每个元素都必须具有相同的嵌套程度。

基本的 Haskell 考试似乎不太可能要求您展平任意级别的嵌套。它几乎肯定只是想让你实现`flatten :: [[a]] -> [a]`，你可以从类型中看出它只删除了一个“级别”的列表。您可以在列表上调用它，例如`[[[1], [[2]], [[3]]]`，它是类型`[[[Int]]`，但类型清楚地表明结果将是`[[Int]]`，即它会返回`[[1], [2], [3]]`，而不是`[1, 2, 3]`。

您尝试做的问题是，当您`flatten`收到其 type 参数`[[a]]`并将其拆分为`(x:xs)`（除非它为空）时， the`x`将成为该`[[a]]`列表的一个元素，因此它将具有 type `[a]`。然后你试图调用`flatten`它，这样你就可以“一直向下”变平，但`flatten`需要一个 type 的参数`[[a]]`并且`x`是 type `[a]`。

思考为什么这不起作用的另一种方法是，如果它*确实*起作用，您最终会到达列表的最后一个“级别”，`x`甚至根本不是列表类型。但是你会再次将它传递给它`flatten`，它会尝试将它与任何一个模式匹配，`[]`或者`(x:xs)`，并且必须失败。你得到的类型错误是阻止这种情况发生的原因。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-22T14:28:48.330

您可以编写一个可以展平任意深度嵌套列表的函数，但嵌套级别必须一致（至少如果您想保留列表）：

```
{-# LANGUAGE FlexibleInstances
  , OverlappingInstances
  , IncoherentInstances  #-}

class Nested a where
  flatten :: [a] -> [Int]

instance Nested Int where
  flatten = id

instance (Nested a) => Nested [a] where
  flatten xss = concatMap flatten xss

-- e.g. now this works ...
flatten [[1 :: Int,2,3],[2,3,4]]   
-- ... and this too ...
flatten [[[1 :: Int,2,3],[2,3,4]],[[25]]]   
-- ... but this won't work
-- flatten [[[1 :: Int,2,3],[2,3,4]],25] 
```

如果你想允许任意嵌套，你必须包装你的类型：

```
{-# LANGUAGE ExistentialQuantification }

class Foo a

instance Foo Int

instance Foo [a]

data F = forall a. Foo a => F a

test = F [F (1 :: Int), F [F (2 :: Int), F [F (3 :: Int), F [F (4 :: Int)]]]] 
```

现在你可以`flatten`为这种类型写一个。

但是，我不建议作为初学者来探索这个。首先，您需要更好地了解类型实际上*应该*如何工作。这些东西并不是微不足道的，它违背了 Haskell 类型系统的本质，所以每一个解释*都会*让你感到困惑。尝试以它们打算使用的方式使用这些类型，并在您真正熟悉常见用例时再回到这些问题。

# linq - 使用 Members.MustSpecifyReturnValues 在 fake 中使用 linq 函数进行 typemock

> ID：15559894
> 
> 赞同：1
> 
> 时间：2013-03-21T23:10:40.640
> 
> 标签：linq, c#-4.0, typemock

如果我有一个 typemock 测试伪造一个成员必须指定返回值的实例，如下所示：

```
WallLayers layers = Isolate.Fake.Instance<WallLayers>(Members.MustSpecifyReturnValues);
Isolate.WhenCalled(() => layers.GetCoreProfile()).CallOriginal(); 
```

如果在原始 GetCoreProfile 方法中我有一个 linq 查询

```
wallPoints = fe.GetFacePointsConstrainedBy<Int32>(FaceExtractor.BottomFace, constraints, selector1)
               .Where(p => p.Z == wallReferenceLevel) 
```

运行测试时抛出以下异常

```
TypeMock.TypeMockException: 
*** Unexpected Call to AU.Com.Monarch.Model.Revit.WallLayers.<GetCoreProfile()
   at dm.b(Object A_0, String A_1, String A_2, MethodBase A_3, Object[] A_4, Object A_5)
   at Typemock.Interceptors.Profiler.InternalMockManager.getReturn(Object that, String typeName, String methodName, Object methodParameters, Boolean isInjected, Boolean isInterceptedType, Object p1)
   at AU.Com.Monarch.Model.Revit.WallLayers.<>c__DisplayClass1a.<GetCoreProfile>b__8(Point3D`1 p) in C:\revitMBS\source\ExternalFrame\ExternalFrame\Monarch\Model\Revit\WallLayers.cs:line 278 
```

1.  有没有办法让我也可以在 linq 函数上让 Typemock 到 CallOriginal，
2.  或者有没有办法可以在 Members.MustSpecifyReturnValues 的上下文中忽略这些函数
3.  还是我在这种情况下删除 Members.MustSpecifyReturnValues 的唯一选择？

感谢您提前输入。

# javascript - 意外的 Javascript 正则表达式行为

> ID：15559897
> 
> 赞同：9
> 
> 时间：2013-03-21T23:11:14.270
> 
> 标签：javascript, regex, google-chrome

我创建了一个 RegExp 对象（在 JavaScript 中）来测试数字的存在：

```
var test = new RegExp( '[0-9]', 'g' ); 
```

我这样用

```
console.log( test.test( '0' ) ); // true
console.log( test.test( '1' ) ); // false - why? 
```

这个输出更令人困惑：

```
console.log( test.test( '1' ) ); // true
console.log( test.test( '0' ) ); // false - why?
console.log( test.test( '1' ) ); // true
console.log( test.test( '2' ) ); // false - why?
console.log( test.test( '2' ) ); // true - correct, but why is this one true? 
```

如果我删除`g`限定符，它会按预期运行。

这是我认为的错误，还是规范的某些特殊部分？`g`限定词应该以这种方式使用吗？（我对多个任务重复使用相同的表达式，因此完全有限定符）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T23:19:33.850

每个文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test#Description](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test#Description)

> `test`在同一个全局正则表达式实例上多次调用将超过上一次匹配。

您可以确认此行为：

```
var test = new RegExp( '[0-9]', 'g' );
test.test('01'); //true
test.test('01'); //true
test.test('01'); //false 
```

`g`如果您只想针对各种字符串确认单个匹配项，那么使用该标志是没有意义的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T23:17:17.253

删除`'g'`标志。当您使用`'g`' 标志时，它会更新`lastIndex`正则表达式的属性（准备对同一字符串进行连续搜索），然后从该索引值开始下一次搜索（从而在下一次搜索时为您提供错误读数）。

类似的问题和答案在这里：[为什么 Regex Javascript //g 标志影响状态？](https://stackoverflow.com/questions/9873122/why-is-regex-javascript-g-flag-affecting-state)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T18:49:19.527

根据[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)，

> 与`exec`（或与其结合）一样，`test`在同一个全局正则表达式实例上多次调用将超过前一个匹配项。

从技术上讲，ECMAScript 5.1 规范说

> **[15.10.6.3](http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.6.3)正则表达式.prototype.test（字符串）**
> 
> 采取以下步骤：
> 
> 1.  *让 match 是使用字符串*作为参数在此 RegExp 对象上评估`RegExp.prototype.exec`(15.10.6.2) 算法的结果。
> **   如果*匹配*不为空，则返回`true`；否则返回`false`。*
> 
>  ***[15.10.6.2](http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.6.2)正则表达式.prototype.exec（字符串）**
> 
> 对正则表达式执行*字符串*的正则表达式匹配，并返回一个包含匹配结果的 Array 对象，或者`null`如果*字符串*不匹配。
> 
> 在 String ToString( *string* ) 中搜索正则表达式模式的出现，如下所示：
> 
> 1.  让*R*成为这个 RegExp 对象。
> 2.  [...]
> 3.  [...]
> 4.  令*lastIndex*为使用参数 " " 调用*R*的 [[Get]] 内部方法的结果`lastIndex`。
> 5.  设*i*为 ToInteger( *lastIndex* ) 的值。
> 6.  设*global*为使用参数 " " 调用*R*的 [[Get]] 内部方法的结果`global`。
> 7.  如果*全局*为`false`，则令*i* = 0。
> 8.  [...]
> 9.  [...]
> 10.  设*e*为*r*的*endIndex*值。
> 11.  如果*全局*是`true`,
>     1.  使用参数“ ”、*e*和调用*R*的 [[Put]] 内部方法。`lastIndex`*`true`*
>     
> **   [...]**

 **因此，为避免这种行为，您可以

*   避免使用全局标志`g`

    这样，在第 7 步，`i`将`0`代替`lastIndex`.

*   [`lastIndex`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.7.5)每次使用后手动重置

    > 该`lastIndex`属性的值指定开始下一个匹配的字符串位置。

    例如，

    ```
    var test = /[0-9]/g;
    test.test('0');      // true
    test.lastIndex;      // 1
    test.lastIndex = 0;
    test.test('1');      // true 
    ```

*   使用`match`或`search`字符串方法

    `match`重置`lastIndex`为 0，并`search`忽略它：

    > **[15.5.4.10](http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.6.2) String.prototype.match（正则表达式）**
    > 
    > [...] [If] *global* is ，使用参数“ ”和 0 调用*rx*`true`的 [[Put]] 内部方法。[...]*`lastIndex`*
    > 
    >  ***[15.5.4.12](http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.12) String.prototype.search（正则表达式）**
    > 
    > [...] 从值*字符串*的开头搜索正则表达式模式*rx*的出现。[...] *regexp*`lastIndex`的and`global` 属性在执行搜索时被忽略。[...]*

     **例如，

    ```
    var test = /[0-9]/g;
    test.test('0');        // true
    test.lastIndex;        // 1
    '0'.search(test) > -1; // true
    test.lastIndex;        // 1 (unaltered)
    !!'0'.match(test);     // true
    test.lastIndex;        // 0 
    ```****

# iphone - 实现 Glass Button UIButton 的问题

> ID：15559898
> 
> 赞同：-1
> 
> 时间：2013-03-21T23:11:24.153
> 
> 标签：iphone, ios, pointers, user-interface, uibutton

我是 iphone 开发的菜鸟，在尝试实现 Glass Buttons 时遇到了一个奇怪的问题（[在此处找到](https://github.com/hboon/GlassButtons)）。我的构建失败，因为我在 MOGlassButtons.m 文件中收到“程序错误中的意外@”。我无法找到有关如何解决此问题的任何信息。任何帮助是极大的赞赏。

MOGlassButton.m

```
self.gradientLayer1.colors = @[(id)[MO_RGBACOLOR(255, 255, 255, 0.45) CGColor], (id)[MO_RGBACOLOR(255, 235, 255, 0.1) CGColor]]; //<--"unexpected @ in program error" 

self.gradientLayer2.colors = @[(id)[MO_RGBACOLOR(205, 205, 205, 0) CGColor], (id)[MO_RGBACOLOR(235, 215, 215, 0.2) CGColor]]; //<--"unexpected @ in program error" 
```

编辑

```
#import "MOGlassButton.h"

// Courtesy of https://github.com/facebook/three20
#ifndef MO_RGBCOLOR
#define MO_RGBCOLOR(r,g,b) [UIColor colorWithRed:r/255.0 green:g/255.0 blue:b/255.0 alpha:1]
#endif
#ifndef MO_RGBCOLOR1
#define MO_RGBCOLOR1(c) [UIColor colorWithRed:c/255.0 green:c/255.0 blue:c/255.0 alpha:1]
#endif
#ifndef MO_RGBACOLOR
#define MO_RGBACOLOR(r,g,b,a) [UIColor colorWithRed:r/255.0 green:g/255.0 blue:b/255.0 alpha:a]
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:50:51.540

您的问题可能是您正在运行的 Xcode 版本过时。您的代码使用自 Xcode 4.4 起受支持的 Objective-C 文字（`@[…]`部分），因此在早期版本中无效。（请参阅[Xcode 4.4 发行说明中提到的“Objective-C Literals”的详细信息是什么？](https://stackoverflow.com/questions/9347722/what-are-the-details-of-objective-c-literals-mentioned-in-the-xcode-4-4-releas)）

升级应该可以解决您的问题。

**编辑**

或者，虽然我强烈建议更新，但您可以使用以下内容。

```
[NSArray arrayWithObjects: (id)[MO_RGBACOLOR(255, 255, 255, 0.45) CGColor], (id)[MO_RGBACOLOR(255, 235, 255, 0.1) CGColor], nil]; 
```

# android - 在 android 上使用 google maps api 找不到 long/lat

> ID：15559900
> 
> 赞同：0
> 
> 时间：2013-03-21T23:11:45.647
> 
> 标签：android, google-maps

只是在弄乱/尝试使用 google maps api 学习。出于某种原因，当我将经度和纬度从我的应用程序传递给谷歌时，我不断收到一条消息，显示谷歌地图找不到坐标。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:07:24.920

当我遇到这个问题时，几乎*总是*因为我的纬度和经度倒退了。

# apache - 将 Apache 环境变量设置为另一个 Apache 环境变量的值

> ID：15559901
> 
> 赞同：1
> 
> 时间：2013-03-21T23:11:52.487
> 
> 标签：apache, tomcat, ajp

我需要在 Apache 中设置一个环境变量，使其具有与另一个现有环境相同的值，以便使用 AJP 通过代理将其传递给 Tomcat。我认为会起作用的方法不起作用：

```
SetEnv AJP_REDIRECT_URL %{ENV:REDIRECT_URL} 
```

简单地以 AJP_REDIRECT_URL 中的值作为字符串“%{ENV:REDIRECT_URL}”结束。我在这里尝试了各种组合，但都没有奏效，我总是简单地将我放入的字符串作为另一端可用的值。

# android - 使用 Lib 文件夹 Android/Maven 更改包装名称

> ID：15559904
> 
> 赞同：0
> 
> 时间：2013-03-21T23:12:03.803
> 
> 标签：android, maven

我正在为我的项目进行构建过程。本质上，我想从同一来源构建 2 个应用程序。我正在使用不同的配置文件来执行此操作。

我已经设法配置 maven 更改应用程序中的名称和 url。我还需要更改包装，以便两个应用程序可以同时在一个设备上。

我的项目设置有一个父 POM 和 2 个子 POM

第一个子 POM 是一个库，它被打包为 APKlib。包装是 com.companylib

第二个子 POM 是创建实际的 APK 并引用 apklib。这被打包为 com.company。

目前我正在使用此配置更改清单中的包装。

```
 <plugin>
                   <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                   <artifactId>android-maven-plugin</artifactId>
                   <inherited>true</inherited>
                   <configuration>
                       <renameManifestPackage>${manifest_pakage}</renameManifestPackage>
                       <sign>
                           <debug>false</debug>
                       </sign>
                       <zipalign>
                           <verbose>true</verbose>
                           <inputApk>${project.build.directory}/${project.artifactId}.apk</inputApk>
                           <outputApk>${project.build.directory}/${project.artifactId}-signed-aligned.apk
                           </outputApk>
                       </zipalign>
                       <manifest>
                           <debuggable>true</debuggable>
                           <versionCodeAutoIncrement>true</versionCodeAutoIncrement>
                       </manifest>
                       <proguard>
                           <skip>true</skip>
                       </proguard>

                   </configuration>
                   <executions>
                       <execution>
                           <id>manifestUpdate</id>
                           <phase>process-resources</phase>
                           <goals>
                               <goal>manifest-update</goal>
                           </goals>
                       </execution>
                       <execution>
                           <id>alignApk</id>
                           <phase>package</phase>
                           <goals>
                               <goal>zipalign</goal>
                           </goals>
                       </execution>
                   </executions>
               </plugin> 
```

我在我使用的不同配置文件中定义 manifest_pakage。这是在第一个子 POM 中定义的。

两个配置文件都构建得很好，我可以将它们安装在同一设备上。但是，当 roboguice 尝试引用 APKLIB 时，我在暂存应用程序上遇到了问题。我收到以下错误...

```
 FATAL EXCEPTION: main
 com.google.inject.ConfigurationException: Guice configuration errors:
 1) No implementation for com.companylib.ServerComms.Senders.StringSenderImp annotated with @com.google.inject.name.Named(value=json) was bound.
   while locating com.companylib.ServerComms.Senders.StringSenderImp annotated with @com.google.inject.name.Named(value=json) 
```

所以看起来apklib上的包装没有改变。奇怪的是，我在生产中更换了包装并且它工作正常（我用相同的包装替换它）。

像这样设置时，我是否应该期望构建更改 lib 的包装？

如果 lib 的包名与主应用程序不同，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:38:27.230

就我而言，我这样做并让它工作。（我正在使用 Eclipse IDE）

1.  选择项目并对`file search`旧包名执行 a 并替换为新包名。（这将替换项目文件中的所有旧包名称）

2.  右键单击`package --> Refactor --> Rename`. 替换为新的包名。这将替换包配置。

    （如果您在第一步之前执行此操作，并且您 在清单中声明的`.YourActivity`​​不是整个包名（`com.project.package.name.YourActivity`），则可能会导致错误）

3.  再次选择项目并进行文件搜索。这一次它会显示带注释的文件，如果你正在使用`AndroidAnnotations`并且在这里用新的包名替换将替换它的导入。

**注意：**如果您使用自己的插件或库与旧包名称，您可能必须确保它在 child 中是相同的，`pom.xml`因为它也会被替换。

希望这可以帮助..！:) 快乐编码..！

# windows-8 - 神秘的 Windows.UI.Xaml.Markup.XamlParseException

> ID：15559908
> 
> 赞同：1
> 
> 时间：2013-03-21T23:12:10.870
> 
> 标签：windows-8, visual-studio-2012, windows-runtime

我正在尝试为 Windows 应用商店应用程序开发一些自定义控件（如果这很重要，我实际上正在使用**模板控件来执行此操作）。**我遇到了一个相当模糊的错误（如标题所示）。唯一的附加信息是：

```
WinRT information: Cannot create instance of type 'SoundControls.tcNote' [Line: 13 Position: 51] 
```

我不确定问题是否与定义控件布局的 Generic.xaml 文件（我认为错误似乎指向）或文件背后的代码有关。

无论哪种方式，这是两者的第 13 行：

*通用的.xaml*

```
BorderBrush="{TemplateBinding BorderBrush}" 
```

*代码背后*

```
using Windows.UI.Xaml.Controls.Primitives; 
```

两者似乎都毫无意义和无害。有没有人知道如何更仔细地解决这个错误？我愿意发布代码片段等（如相关/请求），但我总是讨厌看一个问题，只看到几页代码。

**编辑：**

按要求构造函数：

```
this.DefaultStyleKey = typeof(tcNote);

(GetTemplateChild("PART_note") as Thumb).DragStarted += tcNote_DragStarted;
(GetTemplateChild("PART_note") as Thumb).DragDelta += tcNote_DragDelta;
(GetTemplateChild("PART_note") as Thumb).DragCompleted += tcNote_DragCompleted; 
```

**第二次编辑/解决方案：**

我发现第 13 行问题在 MainPage.xaml 中。

```
<SoundControls:tcNote HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" /> 
```

那条线看起来有一个错误（蓝色下划线，但它仍然让我构建），如果我将鼠标悬停在它上面，它会说“委托给实例方法不能有 null 'this'。” 问题似乎是 *PART_note* 尚不可用。我需要将构造函数中的这些行移到**OnApplyTemplate**方法中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:46:14.160

当我遇到这个错误时，我会做两件事：

1.  检查 InnerException （重复此步骤直到它为*null*）以更好地了解正在发生的事情。修理它。

2.  如果没有 InnerException（或者它太模糊），我注释掉所有 XAML 并开始慢慢将其恢复。这有助于查明有问题的 XAML 或代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:40:27.827

`SoundControls.tcNote`您是否可能在第 13 行的某个其他 XAML 文件中实例化？错误可能源自那里。

问题可能是：

*   在您的控件的构造函数中：您确定`GetTemplateChild("PART_note") as Thumb`不为空吗？如果您注释掉这些行会有帮助吗？
*   或在其 XAML 中的某处：由于无法解析的`StaticResource`引用或其他一些错误而导致解析错误。

我将通过最小化控件中的代码/XAML 数量并查看问题是否消失来开始对问题进行故障排除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T18:29:22.217

I realize this is an old question. I just stumble into this error, in my case it was because in one language resource i was setting the Text of a Textbox that was also bound to a property in the view model. Of course, there was no clue about this in the exception, the inner exception was closed, and it only showed on the emulator, since the local machine was using another culture. This made it difficult to track down. Maybe this will help some unfortunate soul.

# javascript - 点击禁用功能，其他功能有效吗？

> ID：15559910
> 
> 赞同：1
> 
> 时间：2013-03-21T23:12:21.167
> 
> 标签：javascript, jquery

我在这里有一个 jQuery 代码：

```
jQuery(document).ready(function () {
    $("td").click(function (e) {
        var chk = $(this).closest("tr").find("input:checkbox").get(0);

        if (e.target != chk) {
            chk.checked = !chk.checked;
        }

        if ($(this).closest("tr").find("input:checkbox").is(":checked")) {
            $(this).closest("tr").css("font-weight", "bold");
        } else {
            $(this).closest("tr").css("font-weight", "");
        }
    });
}); 
```

如您所见，我有很多复选框，然后单击已选中的任何`td`复选框并添加 css。

它工作正常。我想要的是同样的形式，我也有很多`select`盒子。
当我尝试选择某些东西时，该功能起作用。
我想禁用单击选择框的功能，因为我想选择不启用复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:17:57.473

You could just check if the target is a select or anything inside a select element, like options :

```
$(function () {
    $("td").on('click', function (e) {
        if (! $(e.target).closest('select').length ) {
           var tr  = $(this).closest("tr"),
               chk = tr.find("input[type='checkbox']").get(0);
           if (e.target != chk) {
               chk.checked = !chk.checked;
           }
           if ( tr.find("input[type='checkbox']").is(":checked")) {
               tr.css("font-weight", "bold");
           } else {
               tr.css("font-weight", "");
           }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:50:25.607

如果我理解正确，您想测试鼠标单击的内容，如果是 ，则不要更改复选框，对吗？

您应该能够从事件的属性中获得它。例如：

```
if (!$('#' + e.target.id).hasClass('mySelectBox')){
  //your code...
} 
```

可能有更简洁的方法，我没有测试过，但试试这个：

```
if (e.target != 'select'){
  //your code..
} 
```

**更新：**是的，@adeneo 说了什么！

# jquery - jQueryUI禁用/取消图标被拖动到可排序列表中？

> ID：15559911
> 
> 赞同：1
> 
> 时间：2013-03-21T23:12:23.960
> 
> 标签：jquery, html, css, jquery-ui

我在尝试禁止列表元素被图标拖动时遇到了困难。

每个 li 都有一个图标，单击时会将其删除或添加到另一个列表中。但是，如果您通过其图标拖动它会删除或添加该项目。

我希望能够拖动 li，但阻止图标在 li 上拖动。

我有一个演示：http: [//jsfiddle.net/w3vvL/27/](http://jsfiddle.net/w3vvL/27/)

我尝试了很多事情都没有成功，但我无法弄清楚：-

```
 $( "#gallery li" ).draggable({
          cancel: "a.ui-icon",
          revert: "invalid",
          containment: "document",
          helper: "clone",
          cursor: "move"
        });
    $( ".ui-icon" ).disableSelection();

    //Get Dropped Item
    $("#trash").droppable({
         drop: function(event, ui) {
    $(ui.draggable).stop();

               }
    }); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:44:55.307

在您的 jsfiddle 中，我添加了以下内容：

```
$('.delete, .add').on('mousedown', function(e) {
    e.stopPropagation();
}); 
```

这会阻止 mousedown 事件冒泡，因此当单击图标（ 中的`a`元素`li`）时，它会抑制可拖动行为。

但是，这不是一个好的解决方案！它将事件处理程序添加到`a`元素本身，因此它仅将处理程序添加到您调用时存在的元素`on`。如果您添加一个新项目（我使用了 ADD 按钮，幸运的是它已实现），则修复*不适用*。您必须将处理程序添加到添加的任何新项目中。

* * *

我们可以做得更好。我们可以向容器添加一个处理程序：

```
$('#gallery, #trash').on('mousedown', '.ui-icon', function(e) {
    e.stopPropagation();
}); 
```

的第二个参数`on`让我们指定一个过滤器。`#gallery`and`#trash`元素可以接收从子元素冒泡的`mousedown`事件，但我们只希望这个处理程序在事件源自 a 时执行`.ui-icon`。这非常好，我们只需要设置一次事件处理程序，每个可排序容器只有一个，因此更容易更高效。

* * *

我决定检查[API 文档](http://api.jqueryui.com/sortable/#option-cancel)，发现有一个特定的选项可以解决这个问题：

```
$("#gallery, #trash").sortable("option", "cancel", ".ui-icon"); 
```

如果它`sortable`是从`.ui-icon`! 您可以将此选项添加到可排序的初始化中，而不是显式调用 sortable("option")。

# c# - Horizo ntalScroll.Value 不会以编程方式设置

> ID：15559914
> 
> 赞同：3
> 
> 时间：2013-03-21T23:12:32.973
> 
> 标签：c#, .net, scroll, .net-4.5, scrollbars

我有一个带有滚动条的面板，我经常想以编程方式将控件滚动到视图中。由于不值得一提的原因，我需要自己的方法。经常当我尝试设置

```
MyPanel.HorizontalScroll.Value = newScrollValue; 
```

该值*根本不会占用*。我可以`MyPanel.HorizontalScroll.Value`在设置后立即检查，它的值是不变的。我试图设置的值肯定在最小值和最大值范围内。

现在这是最糟糕的部分。我发现（不要问如何），如果我连续两次制作同一套，大部分时间都可以解决问题。我*真的*有

```
MyPanel.HorizontalScroll.Value = newScrollValue;
MyPanel.HorizontalScroll.Value = newScrollValue; 
```

这*确实*主要解决了这个问题。但是，当我以编程方式滚动到 MyPanel 极端角落中的控件时，问题仍然存在。我尝试设置该值 3 次，但没有骰子。

有谁知道发生了什么或如何解决它？我主要想解决挥之不去的问题。

~~~~~~

编辑：挥之不去的问题原来是一个简单的错误，我修复了它。双重设置解决了所有情况下的问题。我仍然想知道是否有人知道为什么第一组不采用，或者是否有比双组更优雅的方法来解决问题。

# php - 如何在我的 sql 语句中使用变量和会话？

> ID：15559915
> 
> 赞同：1
> 
> 时间：2013-03-21T23:12:34.223
> 
> 标签：php, html, sql

我一直在以不同的方式测试我的 sql 语句，但它不起作用。我在 sql 语句中编写变量和会话时遇到问题。

```
function onelike()
{
    $_SESSION['admin_id']
    $resultLikeCheck = "SELECT FROM tbladminXshouts WHERE postId = $row['id'] AND admin_id = $_SESSION['admin_id']"; 
    $results = mysql_query($resultLikeCheck) or die('');

    if(mysql_num_rows($results) == 0) 
    {
        echo ('

                 `<form action="" method="POST"> 
                       <input type="hidden" name="id" value="'.$row['id'].'"/>
                       <input type = "submit" name="Gilla" value = "Gilla"/> 
                  </form>`

              ');
    }
} 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:19:27.527

```
$resultLikeCheck = "SELECT FROM tbladminXshouts WHERE postId = $row['id'] AND admin_id ='{$_SESSION['admin_id']}'"; 
```

使用“{}”在字符串中插入变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:19:29.207

你可以试试这个。

```
$adminID= $_SESSION['admin_id'];
$rowID= $row['id'];
onelike($adminID,$rowID);

    function onelike($adminID,$rowID)
    {

    $resultLikeCheck = "SELECT * FROM tbladminXshouts WHERE postId = '{$rowID}' AND admin_id = '{$adminID}'";

    $results = mysql_query($resultLikeCheck) or die(''); 
```

我建议使用 mysqli_ 函数而不是 mysql_

编辑：我认为您的问题是您没有将变量传递给函数。PHP 中的函数有自己的局部变量，除非您将它们发送进来，否则无法访问它们自身之外的变量。
是的，@Sajjad Merchant 是对的，将变量插入字符串以进行查询的最佳方法是使用“{}”

# php - 动态配置PHP线程安全--enable-maintainer-zts，还是使用yum安装pthreads？

> ID：15559918
> 
> 赞同：6
> 
> 时间：2013-03-21T23:12:58.763
> 
> 标签：php, multithreading, compilation, yum

有没有办法在 PHP 中启用线程安全而无需重新编译，或者使用 YUM 来做到这一点？

我正在尝试安装 pthreads，它要求 PHP 已经用`--enable-maintainer-zts`. 但是，我不想重新编译，因为我想使用 yum 管理我的 PHP 堆栈。我目前正在使用 REMI 存储库。我注意到有一个包 php-zts，但是，没有一个可用于我的 PHP 版本 4.4，而且我找不到 php-zts 的源 RPM。

有没有办法可以使用 yum 并在 PHP 中启用线程安全，所以我可以使用安装 pThread

```
#pecl install channel://pecl.php.net/pthreads-0.0.42

downloading pthreads-0.0.42.tgz ...
Starting to download pthreads-0.0.42.tgz (53,755 bytes)
.............done: 53,755 bytes
33 source files, building
running: phpize
Configuring for:
PHP Api Version:         20100412
Zend Module Api No:      20100525
Zend Extension Api No:   220100525
building in /var/tmp/pear-build-rootkThpG6/pthreads-0.0.42
running: /var/tmp/pthreads/configure

...

checking whether to enable Threading API... yes, shared
checking checking for ZTS... configure: error: pthreads requires ZTS, please re-compile PHP with ZTS enabled
ERROR: `/var/tmp/pthreads/configure' failed 
```

正如您在上面看到的那样，它失败了，因为 PHP 没有启用 ZTS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:25:07.023

ZTS 可用性是在编译时确定的，所以不 - 您不能动态启用和/或禁用它。

根据您的发行版，您可以通过 yum 或其他软件包管理器安装 pThreads，但请注意，“可能”并不一定意味着它在您的情况下是可用的选项。这取决于您的软件存储库是否有这样的包可用，并且依赖于另一个启用了 ZTS 的 PHP 构建。我非常怀疑会是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:50:43.060

不幸的是，CLI 的包维护者并没有在大多数 unix 包中启用线程安全。它有时会为 worker mpm apache 启用，但并不总是包含完整的构建环境（这样 pecl 将无法工作）。

简而言之，没有办法在运行时启用 ZTS，它是一个构建时选项，在编译源代码后根本不可能对构建进行更改。

但是，为自己安装副本并不难。

您采用的路径很大程度上取决于您对发行版的经验和您的预期用途。

如果您希望使用线程安全版本覆盖您的系统安装，这里有一些信息[http://pthreads.org/building](http://pthreads.org/building)

如果您希望构建一个独立的安装，可以在 pthreads.org 的构建页面上找到一些信息，此外，我一直在尝试使用 RPM， http: [//github.com/krakjoe/spex](http://github.com/krakjoe/spex)包含一个 rpmbuild 文件，它将滚动将 master 和 master pthreads 复制到 /opt/php-pthreads 中，具有完整的构建环境，包括所有的花里胡哨，在 rpmbuild 版本中不支持 apache，因为它会使它变得更加复杂和庞大，它确实包括 fpm (也支持）。

你是我遇到的第一个我实际上可以建议使用 rpmbuild 的人，因为你可以为其他 VM 保留 RPM，并且只需要经历一次（直到下一次更新），缺点其中，它使用了来自 PHP 的前沿代码，该代码目前处于测试阶段......

希望这能让你继续前进:)

# mysql - 无法从 Visual Studio 连接到 MySQL

> ID：15559920
> 
> 赞同：0
> 
> 时间：2013-03-21T23:13:34.283
> 
> 标签：mysql, vb.net

我尝试从 VB.NET 连接到远程 mysql 数据库，但我无法弄清楚如何设置服务器，因为我无法建立连接。我打开了3306端口，可以用telnet访问，提示“无法连接到任何指定的主机” 代码很简单

```
 MyConn.ConnectionString = "server=" & server & ";" & "database=" & mysqldb & ";" & "uid=" & username & ";" & "password=" & pwd & ";charset=utf8"
    MyConn.Open() 
```

用户名是具有 %everyhost 的用户，当我从 localhost 运行时，相同的连接正常，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:03:51.843

我添加了 ;Allow Zero Datetime=True 现在连接很好 非常感谢

# .net - 没有“WPF 功能区应用程序”的项目模板

> ID：15559921
> 
> 赞同：7
> 
> 时间：2013-03-21T23:13:47.153
> 
> 标签：.net, wpf, vb.net, visual-studio-2012, ribbon

我无法在 Visual Studio 中显示 WPF 功能区项目。[这](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/019837dd-d439-4028-9acb-924f9588d2de/)是一个指向在 Visual Studio 2010 中遇到问题的人的线程的链接。

我已经尝试了那里建议的一切，但无济于事。

我安装了 Visual Studio 2012 Express for Desktop，但没有显示任何内容。我已经尝试卸载并重新安装，但没有运气。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T23:21:20.193

一个简单的解决方法是简单地将and`<Window>`替换为第一个孩子。请记住，[功能区控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbon%28v=vs.110%29.aspx)已集成到 .NET 4.5 中。`<RibbonWindow>``<Ribbon>`

`MainWindow.xaml`首先通过替换`Window`并`RibbonWindow`添加来编辑您的`<Ribbon x:Name="Ribbon" Title="Ribbon Title">`。

**例子：**

```
<RibbonWindow x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

        Title="MainWindow"
        x:Name="RibbonWindow"
        Width="640" Height="480">

    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Ribbon x:Name="Ribbon" Title="Ribbon Title">
            ...........
        </Ribbon>
    </Grid>
</RibbonWindow> 
```

您还需要编辑`MainWindow.xaml.cs`以继承`RibbonWindow`类而不是`Window`.

```
public partial class MainWindow : RibbonWindow 
```

最后记得从 .NET Framework 中导入引用。

```
System.Windows.Controls.Ribbon 
```

**编辑：** *使用解决方案更新`VB.Net`.*

1）添加参考

*   右键单击您的项目并选择`Add Reference`.
*   `System.Windows.Controls.Ribbon`在程序集和框架下查找。
*   点击`OK`保存。

2) 编辑你的`MainWindow.xaml`

*   备份任何现有代码。
*   用我的示例中的代码替换默认模板。
*   在`<Ribbon></Ribbon>`标签中添加新内容。

3) 编辑你的`Mainwindow.xaml.vb`

*   右键单击`MainWindow.xaml`并单击`View Code`。
*   更改`Class Window`为`Class RibbonWindow`。

4）运行程序！

# java - Eclipse Maven 项目 Archtype 信息保存在哪里

> ID：15559923
> 
> 赞同：0
> 
> 时间：2013-03-21T23:13:51.077
> 
> 标签：java, maven, pom.xml, maven-archetype

我正在使用带有最新 Maven 插件的 Eclipse Juno。我使用新建项目向导，并使用原型 X 创建一个新的 Maven 项目。Eclipse 和 Maven 开展业务并创建项目，一切都很棒。

几天后，我正在创建一个新项目，我想使用相同的原型 X，但是我不记得这个原型的名称。

我唯一的希望是找出我在早期项目中使用的原型。但我无法在该项目中找到任何包含原型信息的配置文件（甚至不是 POM 文件）。

所以，我的问题 - 给定一个 Maven 项目，我如何找出用于创建该项目的原型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T19:07:29.103

到今天为止，我还没有发现从 POM 文件中包含的信息来确定项目原型的明显方法。做到这一点的唯一方法是将您的 POM 与 Maven 存储库中的 Archtype 进行比较，直到找到匹配项（非常主观和不确定）。所有这些都适用于我使用 Maven 插件创建的 Eclipse 项目的经验。

# python - edX 和安装 Django

> ID：15559927
> 
> 赞同：1
> 
> 时间：2013-03-21T23:14:07.970
> 
> 标签：python

我不确定我是否来对了地方。我有一台 MacBook Pro，并且开始习惯它——我以前使用过 Windows，但没有真正使用过 Python 和 Django。所以，Mac 新手，Python 新手，Django 新手。

我正在尝试下载并安装 edX 课件软件，需要运行一些命令行指令：即

安装要求并注册 XBlock 入口点（如果不使用 virtualenv，可能需要 sudo）：

```
 $ pip install -r requirements.txt 
```

1.  运行 Django 开发服务器：

    ```
    $ python manage.py runserver 
    ```

在 pip 安装结束时，我收到错误：

> 创建/System/Library/Frameworks/Python.framework/Versions/2.7/man
> 
> 错误：无法创建“/System/Library/Frameworks/Python.framework/Versions/2.7/man”：权限被拒绝

在我看来这是一个权限问题，但我`permissions`在安装下载的文件夹中已满。`Python`会不会是MacBook 自带的已经安装的版本？如果是这样，我该如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:21:20.793

尝试：`sudo pip install -r requirements.txt`

# telerik - 层次网格，详细（子）网格中的更改函数如何更新主表上的列

> ID：15559930
> 
> 赞同：-1
> 
> 时间：2013-03-21T23:14:22.757
> 
> 标签：telerik, kendo-ui, telerik-grid, kendo-grid

我在主表中有一个总分字段，我需要从详细（子）表中更新它。

我认为这将在详细（子）表中实现，每次更改我都会计算完整的总分并且需要更新子表所属的行。我在顶部对象上尝试了 set 命令，但它还没有为我工作。

任何想法，将不胜感激？

谢谢

-安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:44:11.783

`element`让我们在细节网格中调用一个 HTML 元素。然后找到`dataItem`对应于`grid`包含此元素的父级将是：

```
var parentRow = $(elem).closest(".k-detail-row").prev();
//find parent grid
var grid = parentRow.closest("[data-role='grid']").data("kendoGrid");
//get the parent grid row DataItem
var parentDataItem = grid.dataItem(parentRow); 
```

在示例[http://jsfiddle.net/OnaBai/qxZtk/1/](http://jsfiddle.net/OnaBai/qxZtk/1/)中，打开其中一行的详细信息并单击`Change`按钮。您会注意到“名字”已更新。

# dns - CouchDB 蒲团自定义 URL

> ID：15559934
> 
> 赞同：0
> 
> 时间：2013-03-21T23:14:40.293
> 
> 标签：dns, ip, couchdb, settings, couchdb-futon

我刚刚在我的 Ubuntu 12.04 服务器上安装了 CouchDB，我正试图找到一种方法来使用我的计算机的 IP 或我绑定的域之一来访问 Futon（基于 Web 的管理面板）。

我在以下`[httpd]`部分添加了以下内容`/etc/couchdb/local.ini`

```
port = 5984
bind_address = 0.0.0.0 
```

但是导航到 my_ip:5984 没有结果。不过，我多次重新启动了 CouchDB 服务器。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:27:57.320

在防火墙中打开端口 5984。然后：IP:5984/_utils/

# objective-c - 在 NSOperationQueue 中命名线程

> ID：15559935
> 
> 赞同：8
> 
> 时间：2013-03-21T23:14:41.370
> 
> 标签：objective-c, nsthread, nsoperation, nsoperationqueue

NSOperationQueue 正如您所期望和希望的那样创建了许多线程。但是当你暂停应用程序并在 Xcode 中调试它时，并不清楚哪些线程属于一个操作队列，哪些属于另一个操作队列。

我试过了：

```
[NSThread currentThread] setName: @"My amazing operation thread"] 
```

但是由于线程被重用，这只是意味着许多线程获得了这个名称，然后永远不会丢失它。我尝试将线程名称设置为 in`-start`并取消设置`-finish`，但线程名称从未出现在 Xcode 调试线程列表中。

命名线程/操作以使它们更容易在 Xcode 中调试的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:16:05.037

要命名您的 NSOperationQueue，您可以使用：

```
- (void)setName:(NSString *)newName 
```

*调试时，线程的名称在线程下方显示为浅灰色。*

**示例：（** *线程 3 是我的）*

![在此处输入图像描述](../Images/52f0baa800657c6fc503c346f3068608.png)

来自[苹果的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)：

> **讨论**
> 
> 名称为您提供了一种在运行时识别操作队列的方法。工具也可以在调试或分析代码期间使用此名称来提供额外的上下文。

*Xcode 是使用此信息在调试期间提供额外上下文的“工具”之一。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-24T07:31:45.963

（此答案仅使用 Xcode 10.1 进行测试）

要回答帖子正文中的问题（不是标题），您需要设置 的`OperationQueue`底层队列的名称。通过这样做，该队列名称将在调试时显示在 Xcode 中（就像 main 或 global 一样`DispatchQueues`）。

例如：

```
var queue = OperationQueue()
queue.maxConcurrentOperationCount = 1
queue.qualityOfService = .background
queue.underlyingQueue = DispatchQueue(
    label: "my-queue-dispatch-queue", qos: .background) 
```

此示例将在 Xcode 10.1 中生成以下内容： [![示例 Xcode 10.1 调试视图](../Images/5da1871eb4a6d839bb0de7159364b310.png)](https://i.stack.imgur.com/ujuVs.png)

参考`underlyingQueue`属性： [https ://developer.apple.com/documentation/foundation/operationqueue/1415344-underlyingqueue](https://developer.apple.com/documentation/foundation/operationqueue/1415344-underlyingqueue)

旁注：根据经验，“queue.qualityOfService = .SOMETHING”是必要的。见： [https ://bugs.swift.org/browse/SR-9742](https://bugs.swift.org/browse/SR-9742)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T14:28:17.387

I also found that naming the NSOperationQueue will not name the thread in Xcode during debugging.

Solution: **Add an operation that sets the thread's name**, and add it to the queue once after creating the queue.

*NameThreadOperation.h*

```
#import <Foundation/Foundation.h>

@interface NameThreadOperation : NSOperation

@end 
```

*NameThreadOperation.m*

```
#import "NameThreadOperation.h"

@implementation NameThreadOperation

- (void)main
{
    @autoreleasepool
    {
        [[NSThread currentThread] setName:@"Name of the thread"];
    }
}

@end 
```

In your ViewController.m or whatever:

```
operationQueue = [[NSOperationQueue alloc] init];

#if defined(DEBUG)
    [self.operationQueue addOperation:[[NameThreadOperation alloc] init]];
#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T15:25:09.783

通过这样做解决了问题：

```
[[NSThread currentThread] setName:@"ScreenSharingProcessorThread"]; 
```

代替：

```
[self setName: @"ScreenSharingProcessorThread"]; 
```

希望这可以帮助

# android - 在 android 中使用 Google Places API 查找城市名称和地区详细信息

> ID：15559936
> 
> 赞同：3
> 
> 时间：2013-03-21T23:14:41.210
> 
> 标签：android, google-maps, gps, google-places-api, android-maps

我想获取我所在区域的详细信息，我使用 LocationManager 类获取纬度和经度，但是如何获取区域名称、地址等详细信息？由于请求数量有限，我不想使用 Geocoder。如何使用 Google Places API 找到该区域的详细信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:21:55.157

如果您的问题仍然存在，请使用此类检索您的 lon 和 lat

```
public class GPSTracker implements LocationListener {

    private final Context mContext;

    // flag for GPS status
    boolean isGPSEnabled = false;

    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;

    Location location; // location
    double latitude; // latitude
    double longitude; // longitude

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    // Declaring a Location Manager
    protected LocationManager locationManager;

    public GPSTracker(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                // First get location from Network Provider
                if (isNetworkEnabled) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener
     * Calling this function will stop using GPS in your app
     * */
    public void stopUsingGPS(){
        if(locationManager != null){
            locationManager.removeUpdates(GPSTracker.this);
        }
    }

    /**
     * Function to get latitude
     * */
    public double getLatitude(){
        if(location != null){
            latitude = location.getLatitude();
        }

        // return latitude
        return latitude;
    }

    /**
     * Function to get longitude
     * */
    public double getLongitude(){
        if(location != null){
            longitude = location.getLongitude();
        }

        // return longitude
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    public void onLocationChanged(Location location) {
    viewManager(location);
    }

    public void onProviderDisabled(String provider) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

} 
```

获取位置时的详细信息

```
private void viewManager(Location loc) {

      Toast.makeText(getBaseContext(),
            "Location changed : Lat: " + loc.getLatitude() + " Lng: " + loc.getLongitude(),
            Toast.LENGTH_SHORT).show();
      String longitude = "Longitude: " + loc.getLongitude();
      Log.v(TAG, longitude);
      String latitude = "Latitude: " + loc.getLatitude();
      Log.v(TAG, latitude);

      /*----------to get City-Name from coordinates ------------- */
      StringBuffer address = new StringBuffer();
      Geocoder gcd = new Geocoder(getBaseContext(), Locale.getDefault());
      List<Address> addresses;
      try {
         addresses = gcd.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);

         if (addresses.size() > 0)
            System.out.println(addresses.get(0).getLocality());
         address.append(addresses.get(0).getAddressLine(0)).append("\n")
               .append(addresses.get(0).getAddressLine(1)).append("\n")
               .append(addresses.get(0).getAddressLine(2));

      } catch (IOException e) {
         e.printStackTrace();
      }

      String s = longitude + "\n" + latitude + "\n\nMy Currrent City is: \n" + address.toString();

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:22:09.013

我认为这篇文章可以帮助你： [Using Google Places API](https://stackoverflow.com/questions/5551028/using-google-places-api)

这里是 API 文档： [https ://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

您还可以使用foursquare 场地API。使用非常简单！ [https://developer.foursquare.com/docs/venues/venues](https://developer.foursquare.com/docs/venues/venues)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T07:01:48.567

我认为这可以解决您的问题[http://wptrafficanalyzer.in/blog/showing-nearby-places-using-google-places-api-and-google-map-android-api-v2/](http://wptrafficanalyzer.in/blog/showing-nearby-places-using-google-places-api-and-google-map-android-api-v2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-05T21:44:39.050

将 getFromLocation(double, double, int) 方法的结果存储在 Address 对象中，然后调用方法 getLocality()。

# java - “JBAS014151：找不到视图”

> ID：15559937
> 
> 赞同：4
> 
> 时间：2013-03-21T23:15:10.533
> 
> 标签：java, jboss, javabeans, jboss7.x, jboss6.x

我正在尝试使用最初使用 Jboss 7.1 AS 开发的 Jboss 6.0 EAP 运行 java 应用程序。但是我遇到了以下异常消息：

“JBAS014151：找不到视图......对于 EJB ......”

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-25T17:53:37.530

根据[https://community.jboss.org/thread/215535](https://community.jboss.org/thread/215535) ，显然本地调用应该使用“java:global/”而不是“ejb:” 。在收到此错误后，使该更改适用于 EAP 6.1。

# javascript - 在处理事件之前获取事件对象

> ID：15559939
> 
> 赞同：0
> 
> 时间：2013-03-21T23:15:20.653
> 
> 标签：javascript, arguments, dom-events, parameter-passing

有没有办法`event`在其处理程序之外获取 -object 或更确切地说是任何传递的参数？

看这个例子，你可以看到我试图得到处理的鼠标按钮。然而，这将失败，因为`event`is `undefined`。

```
var foo = function(e) {
    console.log(e);
};

var bar = function(e) {
    console.log(e);
};

document.onclick = event.which === 1 ? foo : bar; 
```

关键不是这种情况不起作用，或者我不知道如何让它起作用。相反，如果以这种方式附加函数，我不明白如何传递参数。

对此有什么想法吗？

# ruby - GIF 下载脚本中的错误处理

> ID：15559943
> 
> 赞同：0
> 
> 时间：2013-03-21T23:16:01.657
> 
> 标签：ruby, json, error-handling

我正在学习编程，所以我一直在想一些随机的项目。我决定制作一个脚本来下载我在过去几年中收集的所有 GIF。一切似乎都在工作，除了我在中途收到一个错误，我的错误处理没有捕获（无效的访问模式“wb”，“ArgumentError URI：HTTP 资源是只读的）。我已经摆弄了一天多无法获得这项工作任何帮助或提示将不胜感激。

```
require 'json', 'open-uri'    
def download

file = open("C:/sites/bookmark/gifs.json")
json = file.read

parsed = JSON.parse(json)

gifs = parsed["children"]
file.close()
total = 0
gifsize = 0
    gifs.each do |key|

        source = "#{key["uri"]}"
        source.chomp
        gifname = "#{key["title"]}"
        gifname.gsub(/[^0-9a-z ]/i, '')
        open("#{gifname}.gif", "wb") do |file|

            begin
              open(source)                  
            rescue Exception => e
                case e.message
                    when /404/ then puts '404!' 
                    when /505/ then puts '505!'
                    when /408/ then puts '408!'
                    else puts 'idk #{e.message}'
                end
                file.close()
                File.delete("#{gifname}.gif")
                puts "Deleted #{key["title"]}.gig"
                next
            end

            open(source) do |uri|

                file.write(uri.read)
                total += 1
                gifsize += (uri.size / 1024)
                print "#{(uri.size)/1024} KiloBytes"
            end
            print " --- #{total}"
        end
        puts " next gif---"
    end
    puts "\n#{gifsize} Total KB Downloaded \n#{total} Total Gifs "

end

download() 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:25:46.833

该行`gifname.gsub(/[^0-9a-z ]/i, '')`实际上并没有做任何事情，因为该方法`String#gsub`不会修改字符串，而是返回一个修改后的字符串。您需要`String#gsub!`改用： `gifname.gsub!(/[^0-9a-z ]/i, '')`

因此，`gifname`它可能是一个 HTTP URL，并且`open-uri`无法在写入模式下打开它，如错误消息所述。

为了调试这种问题，你应该运行 ruby​​ 调试器，或者放一堆`puts`语句来检查你的变量的内容。

# javascript - 在提示中使用数组函数

> ID：15559947
> 
> 赞同：0
> 
> 时间：2013-03-21T23:16:32.160
> 
> 标签：javascript, arrays, prompt

我正在为一个类做一个项目，我必须让用户输入名称，然后让程序按字母顺序对名称进行排序。我想出的代码不是很优雅，但它可以很好地让用户输入 3 个不同的名称，然后在屏幕上打印这些名称。但是，我无法弄清楚如何对名称进行排序。我可以在 disp_prompt() 函数中放置一个数组吗？我试过这样做，但似乎没有用，尽管我可能将数组代码放在错误的区域。

这是我到目前为止写的代码：

```
<body>

<script> 

function disp_prompt() 
  {
  var name1=prompt("Please enter three names:","Name 1")
  var name2=prompt("Please enter three names:","Name 2")
  var name3=prompt("Please enter three names:","Name 3")
  document.getElementById("msg1").innerHTML= name1;
  document.getElementById("msg2").innerHTML= name2;
  document.getElementById("msg3").innerHTML= name3;
  }

</script> 

<center><input type="button" onclick="disp_prompt()" value="Click Here"></center>
<br>

<h2><center><div id="msg1"></div></center></h2>
<h2><center><div id="msg2"></div></center></h2>
<h2><center><div id="msg3"></div></center></h2>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:25:19.380

您应该将用户的输入存储在一个数组中并使用 for 循环：

```
var theArray = [];

for (var i = 0; i < 3; i++) {
    var plusOne = i + 1;
    theArray[i] = prompt("Please enter threee names: ", "Name " + plusOne);
    document.getElementById("msg" + plusOne).innerHTML = theArray[i];
} 
```

一旦你的名字在一个数组中，对它们进行排序就很简单了：

`theArray.sort();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:25:20.493

您可以使用逗号分隔的输入：

```
function dispComment() {
    var names, input;
    input = prompt("Please enter three names (comma separated):","Name1,Name2,Name3");
    names = input.split(',');
    // Check names length if it is needed
    names.sort();
    // In the end, you'll have a sorted names array, assign to the fields
    document.getElementById("msg1").innerHTML= names[0];
    document.getElementById("msg2").innerHTML= names[1];
    document.getElementById("msg3").innerHTML= names[2];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:26:32.727

1.  您必须创建一个数组。
2.  然后填充它。
3.  然后使用数组索引来填充 html。

像这样：

```
...
var namesArray = [name1,name2,name3].sort();
document.getElementById("msg1").innerHTML= namesArray[0];
document.getElementById("msg2").innerHTML= namesArray[1];
document.getElementById("msg3").innerHTML= namesArray[2]; 
```

# c# - 单击事件 URL 以使用 javascript/Jquery 在 asp.net MVC 中打开另一个页面

> ID：15559949
> 
> 赞同：0
> 
> 时间：2013-03-21T23:16:38.490
> 
> 标签：c#, javascript, jquery, asp.net-mvc

是否可以单击日历上的事件（我正在使用全日历插件）并获得重定向或使用 javascript/Jquery 在与此事件 ID 相关的 asp.net MVC 中打开详细信息视图页面，以便代码给出所有事件的 URL 相同？Fullcalendar 已集成到 asp.net mvc 中。

我写了这段代码，但它没有用：

```
eventClick: function(calEvent, jsEvent, view) {
    window.location = "<%= Url.Action("Details", "ReservationRequests", new { id = 
 Model.ID}) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:46:43.903

您的重定向代码缺少关闭`";`

尝试

```
$(document).ready(function() {
    $('#calendar').fullCalendar({
        eventClick: function() {
            window.location = "<%= Url.Action("Details", "ReservationRequests", new { id = Model.ID})%>";
        }
    });
}); 
```

其中 calendar 是 div 的 id。

# java - 树/图遍历：查找最大值路径

> ID：15559950
> 
> 赞同：2
> 
> 时间：2013-03-21T23:16:47.027
> 
> 标签：java, algorithm, search, graph, tree

我正在尝试，给定一个具有整数值和 N 个级别的图 G，将从根到叶节点的值相加。找到这些路径值的最大和。子节点可以有多个父节点，这就是为什么它更像是一个图而不是一棵树。

例如，

![在此处输入图像描述](../Images/407e16c838ba5f851bf23c9c78f57229.png)

我尝试通过 BFS 为一个小型 Java 小程序实现此功能，但我不确定这是最好的方法。是否有其他建议可以使其与节点数量保持一致，即 O(n)。我想不出任何可以扩展到 O(n) 的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T23:29:25.170

您可以通过使用动态规划算法将来自底层节点的信息向上传播，从而在线性时间内解决此问题。

这样想：如果图只有一层，那么最佳答案必须是从该层中取最大值。另一方面，假设该图有 n + 1 层，并假设您已经（递归地）计算了最底层 n 层的最优解。在这种情况下，您可以通过查看顶层并为每个条目计算该条目的总和加上其任何直接子代（您已经预先计算过）的最佳解决方案，从而找到整体的最佳解决方案。所有这些中的最大值然后为您提供整体最大值。

这种方法最终只访问每条边一次，因此总运行时间最终为 O(n + m)，其中 n 是节点数，m 是边数。

希望这可以帮助！

# vb.net - 编写一个函数来添加排序过滤器

> ID：15559953
> 
> 赞同：0
> 
> 时间：2013-03-21T23:16:57.287
> 
> 标签：vb.net, linq, entity-framework-4, func

我们正在尝试直接从数据库表中构建一种智能列。这正在成为确定是否向对象添加、、、或的if `OrderBy`-else连锁`OrderByDescending`噩梦。`ThenBy``ThenByDescending``IOrderedQueryable(Of EntityType)`

我想创建一个函数来获取`IQueryable(Of EntityType)`对象，一个`Boolean`确定要排序的列是否是第一个，另一个`Boolean`确定排序是升序还是降序，以及返回的 lambda 函数要排序的列（其类型在我们需要排序的列中有所不同），并返回一个`IOrderedQueryable(Of EntityType)`添加了适当过滤器的对象。

我该怎么做呢？

# git - git format-patch 输出文件没有提交消息

> ID：15559959
> 
> 赞同：2
> 
> 时间：2013-03-21T23:17:35.073
> 
> 标签：git

我正在处理的一个分支中有两个最近的提交，两个提交消息都显示在日志中。跑的时候

```
git format-patch -2 --signoff 
```

创建的补丁文件根据其提交消息命名并具有正确的主题，但文件顶部的提交消息块没有提交消息。例如：

```
From <git hash> Mon Sep 17 00:00:00 2001
From: <my email>
Date: Thu, 21 Mar 2013 16:31:46 -0400
Subject: [PATCH 1/2] <full commit message>

Signed-off-by: <my name, my email>
---
<beginning of patch> 
```

我找不到任何`git format-patch`控制提交消息是否打印在补丁电子邮件正文中的开关。提交消息应打印在 Signed-off 行之前的空格中。如何让 git 正常运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:07:11.853

问题是我的提交消息只包含一行摘要。运行时`git format-patch`，每条提交消息的第一段都放在电子邮件的主题中。只有以下段落被添加到电子邮件的正文中。解决方案是编写[适当的提交消息](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html)。

# html - 讨厌容器 div 并尝试使用 HTML5 方式

> ID：15559962
> 
> 赞同：12
> 
> 时间：2013-03-21T23:18:11.687
> 
> 标签：html, css

我最近开始了一些网络编程/设计，我正面临这个问题。在 HTML5 中，你有这些很酷的标签，比如`section`and`header`和`footer`all 。

*   我的第一个问题在这里提出：它们的行为（在 CSS 上下文中）是否与 s**完全**一样`div`？

转到更具体的问题，我必须创建一个`header -> content (section) -> footer`结构简单的网站（*注意：我对 IE 兼容性不感兴趣*）。我希望中心部分尽可能地（垂直）扩展，直到它遇到页脚。“直到它遇到页脚”部分可以通过一些来实现，`padding-bottom`但是“尽可能地扩展”部分呢？请注意，在调整页面大小时，当页脚与部分相遇时，页脚应该停止。

我的意思是，我知道有些人`div`的生活会更轻松，但是按照今天的标准，我是否仍然必须将整个页面包装在一个`<div id="container">`标签中？于是出现了第二个问题……

*   `html`我不能通过同时使用和`body`作为 a`div#container`的容器来实现我将实现`html`的目标`html + body`吗？`body``div#container`

我希望我的问题很清楚，我知道我在写作时倾向于离题。

**请注意**，为清楚起见，我将在此处添加我的 HTML 结构和我的 CSS 中的一些亮点，但我不知道它们是否与问题相关。

HTML：

```
<html>
<head...>
<body>
    <header id="page_header">
        stuff in the header...
    </header>

    <section id="page_content">
        stuff in the main section...
    </section>    

    <footer id="page_footer">
        an almost-sticky footer...
    </footer>
</body>

</html> 
```

CSS：

```
* {
    margin: 0;
}

html {
    background-image: url('../res/img/bg-light.png');
    height: 100%;
    position: relative;
}

body {
    width: 900px;
    height: 100%;
    margin: 0 auto 20px auto;
    padding: 0;
}

section#page_content {
    min-height: 400px; // ? does this stop the footer from being dragged over the content when resizing?
    width: 80%;
    margin: 0 auto;
}

footer#page_footer {
    position: absolute;
    height: 20px;
    width: 100%;
    left: 0;
    bottom: 0;
} 
```

**微注**为什么我的`body`不是从页面的确切顶部开始，而从顶部开始几个像素？只是问问。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T23:31:20.097

是的，大多数标签，如`<section>`,`<header>`和的行为与's`<footer>`非常相似。`<div>`它们在很大程度上取决于您来决定如何使用它们。但是，您不应忽视使用`<div>`s 的重要性，尤其是在样式方面。我见过一些 CSS 框架（我想到了 twitter Bootstrap 和 Blueprint），它们为您提供了`<div class="container">` 样式。不过，为了便于阅读，`<section>`, `<footer>`, `<header>`, and 也是`<article>`非常有益的。

无论如何，在可能且兼容的情况下使用 HTML5，但我相信您现在总能找到一种有用且有益的方式`<div>`在您的网络代码中使用 s。

这只是我的意见。

我在搜索时发现[了这个链接](http://www.impressivewebs.com/html5-section/)。它可能比我能更好地阐明这个问题。它指出了`<div>`在较新的 HTML5 标记上使用 s 的几个不同的地方。

您*可以*使用`<html>`or`<body>`标记代替 div 容器。它肯定没有什么*问题*，它甚至可以让你的代码稍微干净一些。不过，我个人总是使用某种容器。我发现[这个问题](https://stackoverflow.com/questions/354739/why-should-i-use-a-container-div-in-html)我相信答案很清楚。

此外，身体应该填满屏幕。如果不是，请检查您的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:24:50.367

您提到的元素是块级元素，就样式而言，其行为与 div 相同，但仅此而已，因为其中一些元素是分段元素，因此，就结构而言，其内容的行为有所不同去。

是的，你总是可以使用 body 作为内容的包装器，但是如果这证明有用的话，现在我们有了[main元素。](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-main-element)虽然 html 元素是可样式化的，但它相当有限，但 body 元素也是一个块元素。

div 仍然非常有用，因为它们可以用作通用内容容器，因此可以用于样式化内容，而不会破坏因使用其他内容而导致的分段。

# asp.net - The underlying connection was closed: A connection that was expected to be kept alive was closed by the server

> ID：15559963
> 
> 赞同：1
> 
> 时间：2013-03-21T23:18:18.970
> 
> 标签：asp.net

Error Message:

> System.ServiceModel.CommunicationException: The underlying connection was closed: A connection that was expected to be kept alive was closed by the server.

**Client**: Windows .NET 4.0 framework Server: UNIX

**Issue** : The webservice connection was working fine with out any issues. But sometimes it was throwing the connection was closed error. I am new to .Net frame work and i know the basis. Please guide me how to fix this issue.

**Work Around**: After recycling the application pool the issue was fixed. (Actually we are closing the old connection and re-establishing).

Any information to fix this issue will be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-18T17:32:57.727

您必须将 KeepAlive 属性设置为 False，以便连接将自行关闭并为每个请求重新打开。**这将避免尝试使用关闭连接的问题。**

# redis - 如何在redis的列表中获取项目的位置？

> ID：15559964
> 
> 赞同：4
> 
> 时间：2013-03-21T23:18:38.637
> 
> 标签：redis

如果我有一个清单，例如：

```
rpush "country", "Mexico"
rpush "country", "Morocco"
rpush "country", "M'erica" 
```

有什么办法可以看出摩洛哥在这个名单的第 1 位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:31:52.490

没有 Redis 命令来搜索列表中的给定项目，因为这将是一个 O(n) 操作。它不能扩展到超过几千个项目。

现在，如果您知道您的列表足够小，您可以在客户端或服务器端实现此操作。

**在客户端：**

如果您不太关心网络带宽，只需使用*“lrange mylist 0 -1”*获取整个列表并在客户端实现简单的线性搜索。

**在服务器端：**

您可以使用[Lua 服务器端脚本](http://redis.io/commands/eval)来实现线性搜索。这是一个例子：

```
eval "local n = redis.call('LLEN', KEYS[1]) - 1
      for i=0,n do
         if redis.call( 'LINDEX', KEYS[1], i ) == ARGV[1] then
             return i
         end
      end
      return -1" 1 mylist item_to_search 
```

此脚本将返回项目在列表中的位置（从 0 开始），如果未找到该项目，则返回 -1。

# python - ImportError：没有名为_______的模块

> ID：15559965
> 
> 赞同：3
> 
> 时间：2013-03-21T23:18:45.553
> 
> 标签：python, django, eclipse, import

我正在学习 Python/Django/MySQL 三位一体来开发主要使用 Eclipse 的电子商务网站。我已经看到我将要描述的问题在 StackOverflow 和国外互联网上被询问了大约 100 种不同的方式，但似乎每个问题都足够独特，以至于每个解决方案都不适合我。

在 Eclipse 中，我在名为**forms.py**的文件的开头使用了一些简单的导入语句来导入一些 django 表单和我的个人“产品”类，如下所示：

```
from django import forms
from ecomstore.catalog.models import Product 
```

问题已经出现了：Eclipse 在行上显示“未解决的导入：产品”警告，引用“产品”。当我运行时：

```
python manage.py validate 
```

在命令行中，我收到了名义上的错误：“ImportError：没有名为目录的模块”，但我将其命名为**_**，因为此错误出现在我从目录“模块”的所有导入中。

现在我绝对是 Python 领域的初学者，所以我认为我遗漏了一些明显的东西。在 Eclipse 中，我当然将我的主“ecomstore”目录设置为项目源，据我所知，它将“ecomstore”添加到 PYTHONPATH，从而允许我引用其中的项目。相关目录结构，进一步说明要点：

-ecomstore
---- **+manage.py**
----其他一些目录
----catalog
------- **+models.py**
------- **+forms.py** <--活动文件调用用于导入
----ecomstore <--实际项目文件夹，包含settings.py等
------- **+settings.py**

对不起，我的术语被关闭了，我仍在从 Java 过渡，学习术语需要一些时间。

我指出我的“项目文件夹”与项目的根文件夹同名，因为我看到了一些同名目录引起的问题，但即使我将根级目录更改为“测试”，导入仍然失败，所以我排除了它，但也许我这样做是错误的。另外，请注意 forms.py 与 models.py 位于同一目录中，这是包含我的“产品”类的文件......这不应该意味着，即使我在 Eclipse 中的源文件夹设置未能添加本身到 PYTHONPATH，导入应该仍然有效，因为 Python 将尝试从“”目录加载，也就是调用导入的那个目录？我确定我的逻辑在某个地方存在缺陷，这就是我来寻求帮助的原因。

如果有帮助，这里是models.py的相关内容，因为问题可能出在我对该文件的设置中，但是，就像我说的那样，这个问题发生在整个项目的多个位置，尽管只有导入来自“目录”。

```
class Product(models.Model):
name = models.CharField(max_length=50)
slug = models.SlugField(max_length=50, 
                        unique=True,
                        help_text='Unique value for product page URL, created from name.')
brand = models.CharField(max_length=50)
sku = models.CharField(max_length=50)
price = models.DecimalField(max_digits=9,
                            decimal_places=2,)
old_price = models.DecimalField(max_digits=9,
                                decimal_places=2,
                                blank=True,default=0.00)
image = models.CharField(max_length=50)
description = models.TextField()
is_active = models.BooleanField(default=True)
is_bestseller = models.BooleanField(default=False)
is_featured = models.BooleanField(default=False)
meta_keywords = models.CharField("Meta Keywords",
                                 max_length=255,
                                 help_text='Comma-delimited set of SEO keywords for meta tag')
meta_description = models.CharField("Meta Description",
                                    max_length=255,
                                    help_text='Content for description meta tag')
created_at = models.DateTimeField(auto_now_add=True)
updated_at = models.DateTimeField(Auto_now=True)
categories = models.ManyToManyField(Category)

class Meta:
    db_table = 'products'
    ordering = ['-created_at']

def __unicode__(self):
    return self.name

@models.permalink
def get_absolute_url(self):
    return ('catalog_product',(), { 'product_slug': self.slug })

def sale_price(self):
    if self.old_price > self.price:
        return self.price
    else:
        return None 
```

**编辑 1**
我忘了提，我已经尝试从“ecomstore.catalog.models”中删除“ecomstore”，但是，虽然这可以解决 Eclipse 错误，但验证错误保持不变。

**编辑 2**
我打开了一个命令行并打印了我的 sys.path 以查看正常情况下的内容。通常的 C:\Python27 东西在那里，但没有任何引用 ecomstore ......我认为 manage.db 是为我附加它，因为我使用的书从未告诉我处理 sys.path ......这可能是我的吗错误？“python manage.db validate”究竟是如何知道在我的根 ecomstore 文件夹中查找的？也许凭借它在根文件夹中的位置？

**编辑 3**
在试图解决问题的所有这些摆弄中，服务器本身完全陷入了“ImportError：没有名为目录的模块”。现在，如果我尝试做任何事情 - 即使只是`runserver`，它也会引发错误。

**编辑 4**
下面是我的 manage.py，位于我的根 ecomstore 目录中。因为它是由 django 创建的，所以我没有对其进行编辑，但我想我会添加它，以防我的 django 安装可能出现异常情况。

```
#!/usr/bin/env python
import os
import sys

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "ecomstore.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

现在是冗长的settings.py，我在项目工作时当然已经编辑过了。它位于根 ecomstore 项目目录中的 ecomstore 目录中（请参阅上面的目录映射，我现在正在向其中添加 settings.py 文件。

```
# Django settings for ecomstore project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'ecomstore',                      # Or path to database file if using sqlite3.
       ### EDITED OUT USER CREDENTIALS FOR STACK OVERFLOW ###
        'HOST': '',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
        'PORT': '',                      # Set to empty string for default.
    }
}

import os
#hack to accommodate Windows
CURRENT_PATH = os.path.abspath(os.path.dirname(__file__).decode('utf-8')).replace('\\', '/')

# Hosts/domain names that are valid for this site; required if DEBUG is False
# See https://docs.djangoproject.com/en/1.5/ref/settings/#allowed-hosts
ALLOWED_HOSTS = []

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/var/www/example.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://example.com/media/", "http://media.example.com/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/var/www/example.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://example.com/static/", "http://static.example.com/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    os.path.join(CURRENT_PATH, 'static'),
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
# Naturally, edited this out for Stack Overflow as well, never edited it though anyways.

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'ecomstore.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'ecomstore.wsgi.application'

TEMPLATE_DIRS = (
    os.path.join(CURRENT_PATH, 'templates'),
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'ecomstore.catalog',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    'catalog',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

我相信此时我只编辑了 TEMPLATE_DIRS、STATICFILES_DIRS 和 INSTALLED_APPS，这对每个人来说都应该是显而易见的，但这里仍然存在。

**编辑 5**
我已经解决了至少部分问题，并隔离了问题。通过从 my中删除`ecomstore.catalog`和，我设法让 manage.py 再次正常工作。但是，将这些项目中的任何一个添加回 INSTALLED_APPS 会导致不同的问题。通过重新插入，我得到了. 如果我改为使用，我会收到此错误：`catalog``INSTALLED_APPS``ecomstore.catalog``ImportError: No module named catalog``catalog``TypeError: __init__() got an unexpected keyowrd argument 'Auto_now'.`

另外，请看下面我的 sys.path，作为初学者，我在设置整个过程时可能会搞砸。

```
>>> print sys.path
['C:\\Users\\Sean\\Dropbox\\Website\\ecomstore', 
'C:\\Python27\\lib\\site-packages\\distribute-0.6.35-py2.7.egg',     
'C:\\Python27\\lib\\site-packages\\django_db_log-2.2.1-py2.7.egg',
'C:\\Windows\\system32\\python27.zip', 
'C:\\Python27\\DLLs', 'C:\\Python27\\lib', 
'C:\\Python27\\lib\\plat-win', 
'C:\\Python27\\lib\\lib-tk', 
'C:\\Python27', 
'C:\\Users\\Sean\\AppData\\Roaming\\Python\\Python27\\site-packages', 
'C:\\Python27\\lib\\site-packages', 
'C:\\Python27\\lib\\site-packages\\win32', 
'C:\\Python27\\lib\\site-packages\\win32\\lib', 
'C:\\Python27\\lib\\site-packages\\Pythonwin'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:12:18.057

`ecomstore`导入时不需要包含。您是否已添加`catalog`到您`INSTALLED_APPS`的`settings.py`项目`ecomstore`文件夹中？

例如：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'catalog'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:25:13.697

将行更改为

```
from catalog.models import Product 
```

它应该可以工作。问题是它正在搜索路径上的目录中寻找一个名为“ecomstore”的模块（目录）。请注意，这与在搜索路径中查找“ecomstore”不同——它不关心搜索路径上的目录名称是什么，它只是在其中查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:16:36.303

在黑暗中拍摄：在 Windows 系统设置中检查您的 PYTHONPATH 设置。它曾经是右键单击“我的电脑”图标并单击“属性”。其中一个选项卡将向您显示系统路径。

# c++ - 基类的函数模板是否可以分配给指向成员函数的指针

> ID：15559969
> 
> 赞同：4
> 
> 时间：2013-03-21T23:19:06.633
> 
> 标签：c++, templates, function-pointers, suncc

以下代码是否应该在 C++98/03 中编译？

```
struct Base
{
    template <typename T> void func () { }
    void norm() {  }
};

struct Derived : public Base { };

template <typename U>
struct Usage
{
    typedef void (U::*Method)();

    Usage(Method test) { }
};

int main()
{
    Usage<Derived> good(&Derived::norm);

    // "Error: Cannot use void(*)() to initialize Usage<Derived>." on next line
    Usage<Derived> bad(&Derived::func<int>);

    return 0;
} 
```

这个代码片段在我能够尝试的几乎所有编译器上都运行良好；保存 Sun C++ 5.11 和 Sun C++ 5.12。

那应该是一个错误吗？如果是这样，有谁知道它是否已报告给供应商（目前是 Oracle）？

**编辑：**

我将接受从 C++03 或 C++11 标准文档中提供适当相关引用的答案。或者，如果您可以提供有关 Oracle 错误报告的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:32:33.393

我刚刚阅读了 C++98 标准的大部分内容，第 14 章。关于生成（专用）模板成员的类型并没有太多说明，所以我认为它遵循这样的想法，即作为模板方法不会使它不再是一种方法。如果我有时间，我会看看 C++11 是否对此有更多说明。

根据我对 C++ 的总体想法，我知道您的代码应该通过 - 大多数编译器都同意这一点也是一个线索，不是吗？:)

# file - 在第 N 次出现分隔符时拆分文件

> ID：15559979
> 
> 赞同：13
> 
> 时间：2013-03-21T23:19:45.497
> 
> 标签：file, unix, split, chunking

***在每第 N 次出现***分隔符后，是否有一种方法可以将文本文件拆分成片段/块？

示例：下面的分隔符是“+”

```
entry 1
some more
+
entry 2
some more
even more
+
entry 3
some more
+
entry 4
some more
+
... 
```

有几百万个条目，因此在每次出现分隔符“+”时进行拆分是一个坏主意。例如，我想拆分分隔符“+”的每 50,000 个实例。

Unix 命令“split”和“csplit”似乎并没有这样做......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T23:41:59.400

使用`awk`你可以：

```
awk '/^\+$/ { delim++ } { file = sprintf("chunk%s.txt", int(delim / 50000)); print >> file; }' < input.txt 
```

更新：

要不包括分隔符，请尝试以下操作：

```
awk '/^\+$/ { if(++delim % 50000 == 0) { next } } { file = sprintf("chunk%s.txt", int(delim / 50000)); print > file; }' < input.txt 
```

该`next`关键字导致 awk 停止处理该记录的规则并前进到下一个（行）。我也将其更改为`>>`，`>`因为如果您多次运行它，您可能不想附加旧的块文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:49:00.890

如果你找不到合适的替代品，在 Perl 中做起来并不难（它会表现得很好）：

```
#!/usr/bin/env perl
use strict;
use warnings;

# Configuration items - could be set by argument handling
my $prefix = "rs.";     # File prefix
my $number = 1;         # First file number
my $width  = 4;         # Number of digits to use in file name
my $rx     = qr/^\+$/;  # Match regex
my $limit  = 3;         # 50,000 in real case
my $quiet  = 0;         # Set to 1 to suppress file names

sub next_file
{
    my $name = sprintf("%s%.*d", $prefix, $width, $number++);
    open my $fh, '>', $name or die "Failed to open $name for writing";
    print "$name\n" unless $quiet;
    return $fh;
}

my $fh = next_file;  # Output file handle
my $counter = 0;     # Match counter
while (<>)
{
    print $fh $_;
    $counter++ if (m/$rx/);
    if ($counter >= $limit)
    {
        close $fh;
        $fh = next_file;
        $counter = 0;
    }
}
close $fh; 
```

这远非单线；我不确定这是否是一个优点。应该配置的项目组合在一起，例如，可以通过命令行选项进行设置。您最终可能会得到一个空文件；您可以发现它并在必要时将其删除。你需要第二个柜台；现有的是一个“匹配计数器”，但您还需要一个行计数器，如果行计数器为零，您将删除最后一个文件。您还需要名称才能将其删除……虽然很繁琐，但并不难。

给出输入（基本上是样本数据的两个副本），`repsplit.pl`（重复拆分）的输出如下所示：

```
$ perl repsplit.pl data
rs.0001
rs.0002
rs.0003
$ cat data
entry 1
some more
+
entry 2
some more
even more
+
entry 3
some more
+
entry 4
some more
+
entry 1
some more
+
entry 2
some more
even more
+
entry 3
some more
+
entry 4
some more
+
$ cat rs.0001
entry 1
some more
+
entry 2
some more
even more
+
entry 3
some more
+
$ cat rs.0002
entry 4
some more
+
entry 1
some more
+
entry 2
some more
even more
+
$ cat rs.0003
entry 3
some more
+
entry 4
some more
+
$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:32:56.880

在简洁的“单行”中使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")和`+`作为*输入分隔符：*

如果您想`$_ > newprefix.part.$c`按照评论中的说明进行操作：

```
$ limit=50000 perl -053 -Mautodie -lne '
    BEGIN{$\=""}
    $count++;
    if ($count >= $ENV{limit}) {
        open my $fh, ">", "newprefix.part.$c";
        print $fh $_;
        close $fh;
    }
' file.txt

$ ls -l newprefix.part.* 
```

## 文档

*   [人ascii](http://www.manpagez.com/man/7/ascii/)
*   [perldoc perlrun](http://perldoc.perl.org/perlrun.html)
*   [perldoc perlvar](http://perldoc.perl.org/perlvar.html)

# jquery - 将变量添加在一起，然后通过 If/else 运行它们

> ID：15559980
> 
> 赞同：0
> 
> 时间：2013-03-21T23:20:12.787
> 
> 标签：jquery

我正在尝试构建一个表格，该表格将所请求的产品的总数量加在一起，然后根据产品的总量，吐出一个价格。

这是我到目前为止所得到的：

```
 /* shipping total */
var imShipping = function(){
var emy = parseInt($('#user_inputEm').val());
    if (isNaN(emy)) emy = 0;
var pri = parseInt($('#user_inputprin').val());
    if (isNaN(pri)) pri = 0;
var glo = parseInt($('#user_inputglow').val());
    if (isNaN(glo)) glo = 0;
var deb = parseInt($('#user_inputdeb').val());
    if (isNaN(deb)) deb = 0;
var shitotal = parseInt($('thisValue').val(emy + pri + glo + deb));
    var sifunc = function(i){
    var any;
        if(i = 100){
         return any = 30;
        }else if(i = 200){
        return any = 50;
        }else{
        return any = 60;
        }
    };
return $('#shipQuote2').text(sifunc(shitotal));
} 
```

这里是 jsfiddle.net [http://jsfiddle.net/4cUhp/20/](http://jsfiddle.net/4cUhp/20/)

任何帮助都会很棒。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:28:04.273

```
$('#user_inputEm, #user_inputprin, #user_inputglow, #user_inputdeb').on('change', function() {
    $('#shipQuote2').text(function() {
        var emy = parseInt( ($('#user_inputEm').val()   || 0), 10),
            pri = parseInt( ($('#user_inputprin').val() || 0), 10),
            glo = parseInt( ($('#user_inputglow').val() || 0), 10),
            deb = parseInt( ($('#user_inputdeb').val()  || 0), 10),

            shitotal = emy + pri + glo + deb;

        if (shitotal = 100) { 
            return 30 
        }else if (shitotal = 200) { 
            return 50 
        }else{
            return 60;
        }
    });
}); 
```

# c# - Windows Server 2012 System.IndexOutOfRangeException

> ID：15559981
> 
> 赞同：0
> 
> 时间：2013-03-21T23:20:29.407
> 
> 标签：c#, windows, service, out

我已经编写了一个服务，它在我的计算机上运行良好，但是当我将它移到它应该运行的服务器上时，它会吐出 System.IndexOutOfRangeException 每当它像它应该的那样读/写文件时。我只是觉得它只在服务器上这样做很奇怪，而且我不知道它们与我的计算机的工作方式有何不同，因此将不胜感激。

> 说明：进程因未处理的异常而终止。异常信息：System.IndexOutOfRangeException 堆栈：在 emlService.emlService.runProc() 在 System.Threading.ThreadHelper.ThreadStart_Context(System.Object) 在 System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System. Threading.ContextCallback, System.Object) 在 System.Threading.ThreadHelper.ThreadStart()

编码

```
public partial class emlService : ServiceBase
{
    Boolean _isRunning;

    public emlService()
    {
        InitializeComponent();
        if (!System.Diagnostics.EventLog.SourceExists("emlServiceSource"))
        {
            System.Diagnostics.EventLog.CreateEventSource(
                "emlServiceSource", "emlServiceLog");
        }
        eventLog1.Source = "emlSerivceSource";
        eventLog1.Log = "emlServiceLog";
    }

    protected override void OnStart(string[] args)
    {
        eventLog1.WriteEntry("In OnStart");
        Thread NewThread = new Thread(new ThreadStart(runProc));
        _isRunning = true;
        //Creates bool to start thread loop
        if (_isRunning)
        {
            NewThread.Start();
        }
    }

    protected override void OnStop()
    {
        eventLog1.WriteEntry("In OnStop");
        _isRunning = false;             
    }

    protected override void OnContinue()
    {            
    }

    public void runProc()
    {         

        //Directory of the drop location
        string tempDrop = ConfigurationSettings.AppSettings["conf_drop"];
        DirectoryInfo drop = new DirectoryInfo(tempDrop);

        //Directory of the pickup location
        string tempPickup = ConfigurationSettings.AppSettings["conf_pickup"];
        string destpath = tempPickup;

        //Inits ParserCommands and DropDirectory object
        ParserCommands parserObject = new ParserCommands();

        //Inits array to hold number of messages in drop location
        FileInfo[] listfiles;

        //Inits CFG
        string conf_mailsender = ConfigurationSettings.AppSettings["conf_mailsender"];
        string conf_rcpt = ConfigurationSettings.AppSettings["conf_rcpt"];
        string conf_username_and_password = ConfigurationSettings.AppSettings["conf_username_and_password"];
        string conf_sender = ConfigurationSettings.AppSettings["conf_sender"];
        string conf_raport = ConfigurationSettings.AppSettings["conf_raport"];

        //Loop that never ends
        while (true) 
        {
            //Reduces load on machine
            Thread.Sleep(1000);

            //Checks if there is a message waiting to be processed and begins processing if so
            listfiles = drop.GetFiles();
            if (listfiles.Length >= 1)
            {
                for (int j = 0; j <= (listfiles.Length - 1); j++)
                {
                    //Gives it time to breathe
                    Thread.Sleep(250);

                    try
                    {
                        //Gets each line of the original .eml into a string array
                        var lines = File.ReadAllLines(listfiles[j].FullName);
                        string[] linestring = lines.Select(c => c.ToString()).ToArray();

                        //Seperates start of email from the rest and decode parameter_content
                        string parameter_to = parserObject.getReciever(linestring[12]);
                        string parameter_content = parserObject.DecodeFrom64(linestring[17]);

                        //Creates string ready for base64 encode
                        string encode = "from=" + conf_sender + "&to=" + parameter_to + "&raport=" + conf_raport + "&message=" + parameter_content;

                        //Opens up steam and writer in the new dest, creates new .eml file
                        using (FileStream fs = new FileStream(destpath + listfiles[j].Name, FileMode.CreateNew))
                        using (StreamWriter writer = new StreamWriter(fs))
                        {

                            //Writes all .eml content into buffer
                            writer.WriteLine("x-sender: " + conf_mailsender);
                            writer.WriteLine("x-receiver: " + conf_rcpt);
                            writer.WriteLine(linestring[2]);
                            writer.WriteLine(linestring[3]);
                            writer.WriteLine(linestring[4]);
                            writer.WriteLine(linestring[5]);
                            writer.WriteLine(linestring[6]);
                            writer.WriteLine(linestring[7]);
                            writer.WriteLine(linestring[8]);
                            writer.WriteLine("From: " + conf_mailsender);
                            writer.WriteLine(linestring[10]);
                            writer.WriteLine("Reply-To: " + conf_mailsender);
                            writer.WriteLine("To: " + conf_rcpt);
                            writer.WriteLine("Subject: " + conf_username_and_password);
                            writer.WriteLine("Return-Path: " + conf_mailsender);
                            writer.WriteLine(linestring[15]);
                            writer.WriteLine();

                            //Writes encoded string into buffer
                            writer.WriteLine(parserObject.EncodeTo64(encode));

                            //Writes buffer into .eml file
                            writer.Flush();
                        }

                        lines = null;
                    }
                        catch (System.IO.IOException e)
                    {
                        Console.WriteLine("no");

                    }

                    //Deletes the file
                    File.Delete(listfiles[j].FullName);
                }

                //Sets the number of files needing sent to 0
                listfiles = null;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:24:46.747

据我所知，您没有检查`linestring`任何地方的长度。我不能肯定地说，因为你没有提供足够的信息，但我会`linestring.Length`小于 17，导致`parserObject.DecodeFrom64(linestring[17]);`抛出异常。也可以`linestring.Length`是小于 12，这是之前的行。

要解决此问题，您应该检查长度`linestring`并适当地处理结果。

```
string[] linestring = lines.Select(c => c.ToString()).ToArray();
if(linestring.Length <= 17)
{
    //handle malformed file
}
else
{
    //complete the processing
} 
```

与您的问题无关，但我很好奇您认为效果`lines.Select(c => c.ToString()`是什么。`File.ReadAllLines()`已经返回一个字符串数组，所以 `Select(c => c.ToString()) 是多余的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T23:25:04.770

在您正在阅读的其中一条线上，线串不是您期望的长度。

你确定这永远不会失败吗？

```
linestring[17] 
```

如果您的文件中有一个空行怎么办？

# jquery - 重新加载模型更改视图

> ID：15559984
> 
> 赞同：0
> 
> 时间：2013-03-21T23:20:56.037
> 
> 标签：jquery, ajax, asp.net-mvc, kendo-ui

我相信我知道我遇到的问题；我只是不知道如何解决它。我的视图控制器有两个参数。首次加载时，它会获取一个参数并加载部分模型。一旦从页面上的网格中进行了选择，就会再次调用控制器方法，并使用两个参数加载模型并返回到视图。

这一切都很完美，但是当附加数据添加到模型时，它不会显示在屏幕上。当我在调试中运行它时，我在视图中看到了数据，它只是没有显示在屏幕上。

我的猜测是这是因为我需要重新加载页面，但我不完全确定如何做到这一点。另外，如果有人可以发表评论并让我知道我用来完成附加数据加载的工作流程是否正确，或者是否有更好的方法。

谢谢！

**事件控制器**

```
public class EventsController : Controller
{
    //
    // GET: /Events/
    public ActionResult Events(string sName, int? iID)
    {
        ViewBag.AppName = sName;
        EventReader ereader = new EventReader(sName);
        Events _events = new Events();
        _events.LoggedEvents = ereader.GetListOfEvents().ToDataTable();
        //_events.EventDetails.Severity = "TEST";
        if (iID != null)
        {
            _events.EventDetails = ereader.GetEvent((int)iID);
        }

        return View(_events);
    }

    public ActionResult Read([DataSourceRequest] DataSourceRequest request, string sLogName)
    {
        EventReader ereader = new EventReader(sLogName);
        return this.Json(ereader.GetListOfEvents().ToDataTable().ToDataSourceResult(request));
    }
} 
```

**事件.cshtml**

```
@model Models.Events

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Events for @ViewBag.AppName</h2>

<!-- HEADER GRID -->
<div id="Events">
    @(Html.Kendo().Grid(Model.LoggedEvents)
          .Name("EventGrid")
          .Events(events => events.Change("eventGridHandler"))
          .Columns(columns =>
                       { 
                           columns.Bound("EntryType");
                           columns.Bound("EventDate");
                           columns.Bound("Source");
                           columns.Bound("ID");
                           //foreach (System.Data.DataColumn column in Model.Columns)
                           //{
                           //    columns.Bound(column.ColumnName);
                           //}
                       })
          .Pageable()
          .Sortable()
          .Selectable(select => select
                                    .Enabled(true)
                                    .Mode(GridSelectionMode.Single)
                                    .Type(GridSelectionType.Row)
          )
          .DataSource(dataSource => dataSource
                                        .Ajax()
                                        .Model(model =>
                                                   {
                                                       model.Field("EntryType", typeof(string));
                                                       model.Field("EventDate", typeof(DateTime));
                                                       model.Field("Source", typeof(string));
                                                       model.Field("ID", typeof (int));                                                
                                                       model.Id("ID");
                                                       //foreach (System.Data.DataColumn column in Model.Columns)
                                                       //{
                                                       //    model.Field(column.ColumnName, column.DataType);
                                                       //}                
                                                   })
                                        .Read(read => read.Action("Read", "Events")
                                                          .Data("eventGridBindingData")
                                        )
          ))
</div>

<!-- DETAIL AREA -->

<div id="EventDetail">
    <div id="Data">
        @(Html.TextArea("EventData", Model.EventDetails.EventData))
    </div>
    <div id="Details">
        <!-- Detail Table Goes Here -->
        <table>
            <tr>
                <td>User</td>
                <td>Location</td>
                <td>Severity</td>
            </tr>
            <tr>
                <td>@(Model.EventDetails.UserID)</td>
                <td>@(Model.EventDetails.LocationID)</td>
                <td>@(Model.EventDetails.Severity)</td>
            </tr>
        </table>
    </div>
</div>

<!-- Page Scripts --> 
<script type="text/javascript">

    // Return additional data to the reader
    function eventGridBindingData() {
        return {
            name: '@ViewBag.AppName'
        };
    }

    // Handler for the EventGrid
    function eventGridHandler(e) {
        var data = this.dataItem(this.select());
        var appName = '@ViewBag.AppName';
        console.log("in event");
        jQuery.ajax({
            url: 'Events',
            data: { 'sName' : appName, 'iID' : data.id },
            type: "POST",
            cache: false
        });
    }

</script> 
```

**Events.cs（模型）**

```
public class Events
{
    #region PROPERTIES

    public DataTable LoggedEvents { get; set; }
    public CEventMessage EventDetails { get; set; }

    #endregion

    #region CONSTRUCTORS

    public Events()
    {
        LoggedEvents = new DataTable();
        EventDetails = new CEventMessage();
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:11:27.563

关于你的第二个问题，这是否是解决问题的“正确”方法，我想说可能不是。

我宁愿使用单独的操作方法“EventDetails”来传递给定事件 ID 的详细信息。当用户真正想要查看给定事件的详细信息时，这将防止刷新整个页面。（更不用说不必要的后端喋喋不休）

处理细节的视图也可以是 Kendo 网格，您可以使用 Kendo 客户端绑定 javascript 将返回的事件详细信息（以 JSON 格式）绑定到细节网格。

要从概念上理解我在说什么，请参考这个[博客](http://www.uchithar.net/2012/11/the-grid-is-presentation-element-that.html)（我已经为 Telerik ASP.Net-MVC 网格编写了这个，他们在框架中嵌入了“主细节”。不知道是否Kendo 开箱即用支持此功能）

# c++ - 当一次只能有一个时，将两个正则表达式结果连接到一个输出字段中

> ID：15559987
> 
> 赞同：1
> 
> 时间：2013-03-21T23:21:09.917
> 
> 标签：c++, regex, boost-regex

我正在解析聊天输出以获取用户名。这可能是输出的样子：

```
<Darker> MC_BOT sethome
(From Darker): MC_BOT exit 
```

我需要匹配用户名和字符串中的命令内容。从两个字符串中获取这些数据很容易：

```
^(<([A-Za-z0-9_]+)>|\\(From ([A-Za-z0-9_]+)\\):) MC_BOT ([a-z]+)( [a-zA-Z0-9 ]+)?$
  |<Darker>         |(From Darker):                     |sethome 
```

问题是，`<Darker>`输出字段 2 被使用，但`(From Darker)`解析器使用字段 3。

```
<Darker> MC_BOT command parameters
   1: <Darker>
   2: Darker  - field 2!
   3: 
   4: command
   5:  parameters

(From Darker): MC_BOT command parameters
   1: (From Darker):
   2: 
   3: Darker  - field 3!
   4: command
   5: parameters 
```

那么我应该如何编写这个正则表达式以使其在同一字段中包含用户名？另外，我可以让正则表达式忽略`(...|...)`吗？我只需要匹配用户名，而不是`<username>`or `(From username):`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:30:16.617

Boost 似乎支持[分支重置](http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html#boost_regex.syntax.perl_syntax.branch_reset)。所以你可以使用类似的东西：

```
^(?|<([A-Za-z0-9_]+)>|\(From ([A-Za-z0-9_]+)\):) MC_BOT ([a-z]+)( [a-zA-Z0-9 ]+)?$
 ^   ^                       ^                          ^       ^
 |    \ group 1               \ also group 1             \ g.2   \ group 3
 |
 \ branch reset 
```

# javascript - JSFiddler 不读取 javascript

> ID：15559990
> 
> 赞同：1
> 
> 时间：2013-03-21T23:21:21.750
> 
> 标签：javascript, jsfiddle

有一个简单的函数我想写 jsfiddle，但我无法让任何 javascript 工作。在 FF 和 Chrome 中尝试了相同的结果。

[在这里](https://stackoverflow.com/questions/5431351/simple-example-doesnt-work-on-jsfiddle)和[这里查看](https://stackoverflow.com/questions/5468350/javascript-not-running-on-jsfiddle-net)了 SO 帖子，但我无法让它工作。

代码：

```
<input type="button" value="5 Items" onclick="test()">
<input type="button" value="6 Items" onclick="arrayOfOandZ(6)">
<input type="button" value="7 Items" onclick="arrayOfOandZ(7)">

function test() {
    alert("TEST");
}

function arrayOfOandZ (size) {
    var arrayOFOnZ[size];
    //Fill array
    for(var x = 0; x < size; x++){
        arrayOfOnZ[x] = size % 2;
    }
    alert(arrayOFOnZ.join('\n'));
} 
```

[小提琴](http://jsfiddle.net/sfJLx/7/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:26:00.270

您的脚本（发布在 jsFiddle 链接上的脚本）包含以下错误：

*   您正在使用未定义的`$document`值并尝试在其上调用函数 ( `ready`)。

*   您有一行内容为：

    ```
    alert("TEST); 
    ```

*   您有一行内容为：

    ```
    var arrayOFOnZ[size]; 
    ```

此外，默认情况下，仅在加载 DOM 后才定义该函数。将左侧的下拉菜单从“onLoad”更改为“No wrap - in `<head>`”，以指示 jsFiddle 将脚本直接附加到`<head>`标签中，而不是`window.onload`函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:36:58.153

更新您的小提琴以使用`no wrap - in <head>`or`no wrap in <body>`或 jsFiddle 将默认情况下将脚本包装到`window.onload`. 这会导致元素首先呈现，并且在`onclick`呈现时脚本还不存在，因为它仅在加载窗口后才被添加，如下所示：

```
<html>

    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>- jsFiddle demo</title>
        <script type="text/javascript" src="/js/lib/dummy.js"></script>
        <link rel="stylesheet" type="text/css" href="/css/result-light.css">
        <style type="text/css">
</style>
        <script type="text/javascript">
            //<![CDATA[ 
            window.onload = function() {
                function test() {
                    alert("TEST");
                }

                function arrayOfOandZ(size) {
                    var arrayOFOnZ = new Array(size);
                    //Fill array
                    for (var x = 0; x < size; x++) {
                        arrayOfOnZ[x] = size % 2;
                    }
                    alert(arrayOFOnZ.join('\n'));
                }
            } //]]>
        </script>
    </head>

    <body>
        <input type="button" value="5 Items" onclick="test()">
        <input type="button" value="6 Items" onclick="arrayOfOandZ(6)">
        <input type="button" value="7 Items" onclick="arrayOfOandZ(7)">
    </body>

</html> 
```

* * *

[**演示**](http://jsfiddle.net/sfJLx/8/)- 小提琴中的固定设置

* * *

`no wrap in <head>`例如，将脚本直接呈现到 中，`head`而无需`window.onload`包装器使其立即可用。因此，当元素被渲染时，脚本存在，如下所示：

```
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>- jsFiddle demo</title>
    <script type="text/javascript" src="/js/lib/dummy.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/result-light.css">
    <style type="text/css">
</style>
    <script type="text/javascript">
        //<![CDATA[ 

        function test() {
            alert("TEST");
        }

        function arrayOfOandZ(size) {
            var arrayOFOnZ = new Array(size);
            //Fill array
            for (var x = 0; x < size; x++) {
                arrayOfOnZ[x] = size % 2;
            }
            alert(arrayOFOnZ.join('\n'));
        }
        //]]>
    </script>
</head> 
```

# php - PHP从mysql隐藏内容

> ID：15559992
> 
> 赞同：1
> 
> 时间：2013-03-21T23:21:56.090
> 
> 标签：php, mysql

嗨，我对 php 和 mysql 还很陌生，所以希望有人能指出我正确的方向。

我有一个包含以下列的表格。

```
+----+---------------------+---------------+------+
| id | date                | news_content  | shows|
+----+---------------------+---------------+------+
|  1 | 2013-03-19 14:47:27 | This is news1 |  1   |
|  2 | 2013-03-19 14:47:27 | This is news2 |  1   |
|  3 | 2013-03-19 14:47:37 | This is news3 |  1   |
|  4 | 2013-03-19 14:47:37 | This is news4 |  1   |
+----+---------------------+---------------+------+ 
```

Show 的值可以是 0 或 1（默认值）。如果值为 0，我想隐藏 news_content 和日期。

printnews 功能打印出所有新闻文章和 3 个锚链接 Show 或 Hide 、 Edit 和 Add。我是否必须更改我的 mysql 数据库中的某些内容，以便在显示 = 0 时不显示新闻？还是有另一种使用php的方法？

编辑：当我按下隐藏链接时，我想将显示值设置为 0 并隐藏那篇文章，当我按下显示链接时，我想显示这篇文章。目前我没有任何东西可以让文章在值为 0 时隐藏。

```
function printnews() {
    $data = mysql_query("SELECT * FROM news ")  
    or die(mysql_error());  
    while ($info = mysql_fetch_array($data)) {
         $id = $info['id']; 
         $show = $info['shows'];
         if($show == 1) {
           echo "<br><a href=show.php?id=$id&shows=0> Show </a><br>";
         }   
         else if($show == 0) {
           echo "<br><a href=show.php?id=$id&shows=1> Hide </a><br>";
         }
         // Print Articles and Date
         echo "<br><a href=Edit.php?id=$id>Edit</a><a href='addnews.php'> Add </a><br><strong>". $info['date']."</strong><br>". $info['news_content'] . "<hr><br>";
    } 
```

我知道我不应该使用 mysql 扩展，所以请忽略任何关于此的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:25:48.457

您可以更新您的`SELECT`查询以获取`show`设置为的数据`1`。

```
SELECT * 
FROM `news`
WHERE `shows` = 1 
```

# mysql - MYSQL 查询查找和替换两个短语

> ID：15559993
> 
> 赞同：0
> 
> 时间：2013-03-21T23:22:01.407
> 
> 标签：mysql, search

我在很多不同职位的帖子上都有这个动态短语。

*“在美国收集的统计数据中，95% 的飞行部门经理是男性，而 95% 是女性”*

我需要做一个 mysql 查询，它将查找并替换我的 wordpress 上具有以下这两个子短语的所有帖子。

*“收集了全美 95% 的统计数据”*

*“而 95% 是女性”*

不知道如何做到这一点，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:28:44.077

这是一个很好的资源，应该有你需要的。

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

# algorithm - 构建 ISAM 树

> ID：15559996
> 
> 赞同：1
> 
> 时间：2013-03-21T23:22:14.830
> 
> 标签：algorithm, database-design, indexing, isam

我有一堆节点保存一些数据。这可以被视为叶节点。我想在这些节点上构建一个 ISAM 树。是否有一种标准方法可以创建 ISAM 树/B 加树/任何树的非叶节点。如何实现树形结构。

约束：不能假设树的高度。除了最右边的一个以外，所有的非叶子节点都应该是满的。

我打算使用列表结构来保存键值和节点索引。

谢谢

# php - WordPress 插件 - 单独的表单 - 一个插件页面

> ID：15559999
> 
> 赞同：2
> 
> 时间：2013-03-21T23:22:28.700
> 
> 标签：php, wordpress, plugins, settings

是否可以有两个表单来保存插件选项（一个插件页面），并分别提交每个表单？

使用一种形式真的很容易。例如，插件页面（在仪表板中）可以包含以下内容（最少）：

```
<form action="options.php" method="post" >
    <?php settings_fields( 'my-settings' ); ?>
    <?php do_settings_sections( 'my-settings' ); ?>

    //more input fields

    <?php submit_button(); ?>
</form> 
```

对于保存选项，这将工作得很好。但是，是否有可能有两个这样的表单，使用相同的插件选项页面（但在提交时，只保存表单中的选项，我单击哪个提交按钮）？

目前，如果我创建另一个表单并点击提交，它仍然会提交这两个表单，而不仅仅是一个（我单击了提交按钮）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:11:08.417

我不会采用这种方法，而是使用 ajax 来做到这一点。它更容易实现，并且会给你的插件一种非常 web 2.0 的感觉。在您的情况下，实现 ajax 方法实际上更容易，而不是尝试做您正在做的事情。[这里有](http://codex.wordpress.org/AJAX_in_Plugins)一些东西可以帮助您入门。

```
<?php
add_action('admin_print_scripts', 'my_action_javascript');

function my_action_javascript() {
?>
<script type="text/javascript" >
jQuery(document).ready(function($) {

    var data = {
        action: 'my_action',
        whatever: 1234
    };

    // since 2.8 ajaxurl is always defined in the admin header and points to admin-ajax.php
    jQuery.post(ajaxurl, data, function(response) {
        alert('Got this from the server: ' + response);
    });
});
</script>
<?php
} 
```

然后你可以像这样处理请求：

```
<?php 

add_action('wp_ajax_my_action', 'my_action_callback');

function my_action_callback() {
    global $wpdb; // this is how you get access to the database

    $whatever = intval( $_POST['whatever'] );

    $whatever += 10;

        echo $whatever;

    die(); // this is required to return a proper result
} 
```