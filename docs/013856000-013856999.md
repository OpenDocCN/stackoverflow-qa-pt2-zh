# StackOverflow 问答 13856000-13856999

# javascript - 当该页面是 Web 应用程序的默认页面时，如果 URL 中未显示当前页面名称，如何获取该名称？

> ID：13856007
> 
> 赞同：1
> 
> 时间：2012-12-13T08:43:09.773
> 
> 标签：javascript, asp.net, url

我有一个 ASP.NET 网站。Masterpage 上有一个 ASP.NET 菜单。如果当前页面是登录页面，我想隐藏菜单。我的登录页面是 Login.aspx。这是我如何使菜单不可见/可见的代码：

```
var pathname = window.location.pathname;
if (pathname.toLowerCase().indexOf("login.aspx") > 0)
    $('#mainmenu').hide();
else
    $('#mainmenu').show(); 
```

但是当我在IIS上部署时，第一次打开网站时url不包含页面名称，因此菜单变得可见。这种情况下如何确定当前页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:50:31.167

如果您想在 javascript 中执行此操作，您可以执行以下操作

```
var pathArray = window.location.pathname.split( '/' );

// assuming the url as http://www.example.com
var url_length = pathArray.length;
//if url is http://www.example.com, then url_length will have 3
//if url is http://www.example.com/login.aspx, then url_length will have 4 
```

所以，

```
if( url_length==3 || pathArray[pathArray.length-1]=="login.aspx")
{
    $('#mainmenu').hide();
}
 else
 {
     $('#mainmenu').show();
 } 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:52:07.580

您应该在服务器端 IMO 中执行此操作。无论如何，假设您的网络应用程序地址是`http://yourdomain.com/app/`并且您的登录页面是默认页面。那么即使他没有输入，它也会显示给用户，`http://yourdomain.com/app/login.aspx`所以我们需要检查的是我们的地址是否以结尾`yourdomain.com/app/`。如果是这样，我们将隐藏菜单。

```
var pathname = window.location.pathname;
var appDomainEndding = 'yourdomain.com/app/'
if (pathname.toLowerCase().indexOf("login.aspx") > -1 || 
    pathname.indexOf(appDomainEndding, pathname.length - appDomainEndding.length) > -1)
$('#mainmenu').hide();
else
$('#mainmenu').show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T08:53:36.900

如果在登录屏幕上 url 没有改变，你唯一的选择是检查页面的内容，或者设置一个 cookie：让服务器设置类似`"pageIsLogin=true"`cookie 的东西并检查是否`document.cookie`有。

```
if(~document.cookie.indexOf("pageIsLogin=true")){
    //Login-specific settings here.
}else... 
```

（不要忘记在其他页面上取消设置该 cookie）

或者，像我的第一个建议一样，检查页面是否包含特定于登录的元素：

```
if(document.getElementById("loginSpecificField")){
    //Login-specific settings here.
}else... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T09:32:06.357

**在每个“页面”上提供一个特殊变量**。这是这个场景的经典选择。它通常用于允许脚本化的、包含的菜单系统区分任何和所有页面，并在此基础上提供功能，例如突出显示、删除链接等。它的工作方式是在每个页面上设置一个特定的变量，然后由菜单系统对其进行测试并相应地采取行动。

可以出于多种原因重复使用相同的变量，例如测试特定功能是否可用、包含页面元素等。

# extjs - 如何根据记录值（EXTJS）在网格上设置禁用的字段列？

> ID：13856011
> 
> 赞同：0
> 
> 时间：2012-12-13T08:43:29.873
> 
> 标签：extjs

嗨，我是新来使用 Extjs..
我有一个这样的网格面板：

```
 var cellEditing = Ext.create('Ext.grid.plugin.CellEditing', {
        clicksToEdit: 1
  });

  var myGrid = Ext.create('Ext.grid.Panel', {
        store: myStore,
        plugins: [cellEditing],
        columns: [  
                {dataIndex: 'colid', hidden: true},
                {text: "Name", dataIndex: 'colname', sortable: true},
                {text: "Info", dataIndex: 'colinfo', sortable: true},
                {text: "Value", dataIndex: 'colvalue',
                 editor: {
                   xtype: 'textfield'
                 }
            }
        ]
    }); 
```

现在我想在**colinfo**值为“无法编辑此值！！”时将编辑器设置为 null（如列 colinfo、colname 和 colid）列**colvalue** 。 我如何配置该条件？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:47:52.187

您可以对要禁用的列使用渲染器功能。根据函数中的记录值，您可以将文本字段设置为禁用。**

# objective-c - 在 UIView 中嵌入 ZBar 摄像头

> ID：13856015
> 
> 赞同：2
> 
> 时间：2012-12-13T08:43:56.077
> 
> 标签：objective-c, ios, uiview, camera, zbar-sdk

我正在使用 ZBarSDK 使用 iPad 扫描二维码。我目前已经成功地工作了。但是，我目前的代码在全屏模式视图控制器中打开相机，但我想将相机视图嵌入到 UIView 中。

这是我现在的代码，它可以作为模态视图控制器正常工作。但我想在我创建的名为“showCamera”的 UIView 中显示相机。我搜索了网络和这些论坛，并且有一些类似的问题，但没有在答案中提供代码。

```
ZBarReaderViewController *reader = [ZBarReaderViewController new];
reader.readerDelegate = self;
reader.showsZBarControls = TRUE;
reader.cameraDevice=UIImagePickerControllerCameraDeviceFront;

reader.readerView.torchMode = 0;

ZBarImageScanner *scanner = reader.scanner;
[scanner setSymbology: ZBAR_I25
               config: ZBAR_CFG_ENABLE
                   to: 0];

// present and release the controller
[self presentModalViewController: reader animated: YES]; 
```

正如我之前所说，我要在其中显示相机的 UIView 是：

```
@property (strong, nonatomic) IBOutlet UIView *showCamera; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:08:18.303

在 iOS 4 之前，相机将始终全屏打开。您可以做的是用您自己的视图覆盖该屏幕的一部分。您可以通过将视图放在它上面（带有透明区域）来做到这一点：

```
reader.cameraOverlayView = myView; 
```

从 iOS 4+ 开始，您可以使用 readerView。由于它只是一个 UIView，因此您可以像使用任何其他视图一样使用它。例如：

```
readerView = [ZBarReaderView new]; readerView.frame = CGRectMake(...); // other view setup... [self.view addSubview: readerView]; 
```

# opencl - 使用 Virtual OpenCL 运行内核的问题

> ID：13856016
> 
> 赞同：0
> 
> 时间：2012-12-13T08:43:58.633
> 
> 标签：opencl

我正在尝试使用虚拟 OpenCL (http://www.mosix.org/txt_vcl.html) 运行一些内核

当我查询设备时，我看到 3 个 CPU 和 2 个 GPU（有 3 台带有虚拟 OpenCL 的计算机，两台带有 AMD APU 和一台带有 Intel CPU）

当我尝试复制数据并运行内核时，英特尔 CPU 工作正常（如果主机或远程无关紧要）。其他设备要么不运行内核，要么带来 CL_INVALID_CONTEXT、CL_INVALID_KERNEL 或 CL_INVALID_MEM_OBJECT 等错误。

在每台没有虚拟 OpenCL 的机器上执行的相同代码完全可以正常工作。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:00:29.000

我从 VCL 团队得到了一些反馈。

我的问题是 AMD OpenCL SDK 和 VCL 的一个已知错误。支持 AMD 的 OpenCL 1.2 存在问题。他们最近发布了 VCL 1.7 来解决这个问题。不幸的是，这对我不起作用。

另一个提示是回到 OpenCL 1.1。所以我安装了 AMD APP 2.5 和 VCL 1.7，至少 CPU 现在可以远程工作了。接下来我将尝试 AMD APP 2.6 和 2.7，看看我是否能让 GPU 也能正常工作。

如果有人有更好的想法，请发布。

# c# - 在 Gridview 寻呼机中插入自定义按钮

> ID：13856018
> 
> 赞同：2
> 
> 时间：2012-12-13T08:44:07.500
> 
> 标签：c#, asp.net

我正在尝试在 Gridview 寻呼机中插入一个控件。如您在图片中看到的，该控件成功显示，但它在先前的控件下分配它。

![在此处输入图像描述](../Images/0f10608db01a3a11bd6cfce881a45ff3.png)

我正在添加以下代码。

```
if (e.Row.RowType == DataControlRowType.Pager)
{
    e.Row.Cells[0].Controls.Add(ImageButton1);
} 
```

我想要的是在上一个按钮旁边而不是下面分配保存答案按钮。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:24:35.807

```
if (e.Row.RowType == DataControlRowType.Pager)
{
    Table pagerTable = (e.Row.Cells[0].Controls[0] as Table);
    TableRow row = new TableRow();
    row = pagerTable.Rows[0];
    TableCell cell1 = new TableCell();
    cell1.Controls.Add(ImageButton1);

    row.Cells.AddAt(1,cell1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:28:22.353

也许您可以在 gridview 中添加寻呼机样式：

```
<PagerStyle Width="100%" /> 
```

为什么不创建一个带有按钮的页面模板？您可以更轻松地定义每个按钮的位置。

```
 <asp:gridview id="CustomersGridView" 
        datasourceid="CustomersSource" 
        autogeneratecolumns="false"
        emptydatatext="No data available." 
        allowpaging="true" 
        runat="server">
...
        <pagerstyle Width="100%"/>

      </asp:gridview> 
```

# php - php ltrim 破坏正则表达式？

> ID：13856025
> 
> 赞同：2
> 
> 时间：2012-12-13T08:44:35.177
> 
> 标签：php, regex, trim

我有一个谜题要问你，也许没有。检查这块：

```
$query = ' SELECT account.account_no,
       account.accountname,
       accountbillads.bill_city,
       account.website,
       account.phone,
       CASE
         WHEN ( users.user_name NOT LIKE "" ) THEN users.user_name
         ELSE groups.groupname
       END AS user_name,
       entity.crmid,
       account.accountid,
       account.parentid,
       partner.partnerid      
FROM   account
       INNER JOIN entity
               ON entity.crmid = account.accountid
       INNER JOIN currency_info AS CurrencyInfoTable
               ON CurrencyInfoTable.id =
                  entity.record_currency_id
WHERE  entity.deleted = 0   ';

$query = ltrim($query);

preg_match("/^select ((.|\n)*?)\bfrom\b((.|\n)*?)\bselect\b/i", $query, $matches);

print('finito');
print_r($matches); 
```

在我的服务器上，这崩溃了，没有任何错误。

令人惊讶的是，棘手的行是 *$query = ltrim($query);* 没有这条线，一切正常。

这还有几件事：正则表达式的敏感部分是对“选择”的最后不贪婪搜索。如果找不到第二个选择，则崩溃。查询的长度很重要。另外，请注意，在同一台机器上运行 phpunits 时，不存在此问题。

我的聚会是*ltrim*对字符串做了一些事情，但我不确定是什么。

有人可以解释一下吗？

编辑。好吧，看来 ltrim 不是问题。如果我只给出没有起始空白的字符串，我就会崩溃。它可能与 pcre.backtrack_limit 和 pcre.recursion_limit 设置有关，但我已经尝试过了，但没有改变。

编辑2。崩溃是浏览器中的“连接中断”。没有完整的服务器崩溃，但脚本执行停止。同样，日志中没有错误。

问题解决了。最后我不得不用 /s 替换 (.|\n) 。非常感谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:25:20.777

虽然在[PHP 正则表达式测试器](http://www.solmetra.com/scripts/regex/index.php)中对此进行测试不会导致任何问题，但我认为这可能是由于您形成表达式的方式而导致的崩溃。考虑这个结构：

```
(.|\n)*? 
```

潜在的问题是`|`运营商，结合`*`. 当它不匹配时，这可能会产生大量的可能性：

```
 first character matches .
                               |
                          yes------no
                           |        |
         2nd character matches .    first character matches \n
                 |                                 |
            yes-----no                       yes--------no
             |       |                        |          |
      3rd char .    2nd char \n     2nd char matches .  2nd char matches . 
```

正则表达式引擎必须检查 2^n 种可能性，其中 n 是字符串中剩余的字符数。

解决方案是使用`/s`开关，正如评论中最初建议的那样。然后你可以简单地使用`.`来匹配任何东西，包括换行符。而不是 2^n 的可能性，它只需要检查 n 的可能性。

注意：一些正则表达式引擎足够聪明，可以避免这个陷阱。理论上，如果第二个“选择”不存在，引擎应该足够聪明，知道它永远无法匹配并因此放弃。例如，当我在 Perl 中对其进行测试时，没有问题。并且上面的 PHP 正则表达式测试器没有问题。但也许您的 PHP 版本较旧并且没有那么优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:08:12.653

如果它真的崩溃了，你至少会看到一些消息。我猜，你根本看不到任何输出。这是因为您的正则表达式不起作用。

您可以通过删除`\bselect\b`正则表达式中的 final 或将 a 附加`select`到您的`$query`. 然后它输出一些匹配。

# sql - 在此查询中将联接重写为子查询

> ID：13856026
> 
> 赞同：0
> 
> 时间：2012-12-13T08:44:35.967
> 
> 标签：sql, database, db2

你们能帮我用子查询重写它吗

```
SELECT 
    S.DENUMIRE, M.DENUMIRE, AN
FROM 
    SPECIALIZARE S
JOIN 
    MATERII M ON S.CODSPEC = M.CODSPEC
ORDER BY 
    S.DENUMIRE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:48:57.780

```
SELECT 
    S.DENUMIRE,
    M.DENUMIRE,
    AN
FROM SPECIALIZARE S
JOIN (
    SELECT
        DENUMIRE,
        CODSPEC
    FROM MATERII
) AS M
    ON S.CODSPEC = M.CODSPEC
ORDER BY S.DENUMIRE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:05:07.327

假设`DENUMIRE`是一个整数：

```
SELECT S.DENUMIRE, 1 DENUMIRE, AN
  FROM SPECIALIZARE S
 WHERE EXISTS (
               SELECT * 
                 FROM MATERII M 
                WHERE S.CODSPEC = M.CODSPEC
                      AND M.DENUMIRE = 1
              )
UNION
SELECT S.DENUMIRE, 2 DENUMIRE, AN
  FROM SPECIALIZARE S
 WHERE EXISTS (
               SELECT * 
                 FROM MATERII M 
                WHERE S.CODSPEC = M.CODSPEC
                      AND M.DENUMIRE = 2
              )
UNION
SELECT S.DENUMIRE, 3 DENUMIRE, AN
  FROM SPECIALIZARE S
 WHERE EXISTS (
               SELECT * 
                 FROM MATERII M 
                WHERE S.CODSPEC = M.CODSPEC
                      AND M.DENUMIRE = 3
              )

UNION
... 
```

对于每个整数值，依此类推……这当然是不可行的。

你需要一个加盟！如果您只是想避免`JOIN`出于教学原因避免使用该关键字：

```
SELECT 
    S.DENUMIRE, M.DENUMIRE, AN
FROM 
    SPECIALIZARE S, MATERII M 
WHERE
    S.CODSPEC = M.CODSPEC
ORDER BY 
    S.DENUMIRE 
```

ps 虽然 SQL 的“兼容性桎梏”（1980 年代的供应商支持这一点并且它成为标准等）允许同一个表中的两个列具有相同的名称，但这在实践中可能不是一个好主意。另外，我假设`AN`来自表格`SPECIALIZARE`，但可能是错字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:12:48.460

你也许可以用一个 union 和一个 group by 做一些愚蠢的事情。例如：

```
select max(s_denumire) as s_denumire,
       max(m_denumire) as m_denumire,
       codspec
    from (
        select denumire as s_denumire, null as m_denumire, codspec 
            from specializare
        union all
        select null as s_denumire, denumire as m_denumire, codspec 
            from materii
    )
    group by codspec 
```

这会产生一行 per `codspec`，所以它不完全像一个连接。但是你可能可以用行号做一些事情来解决这个问题。我会把它作为练习留给你，因为这显然是家庭作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T17:28:43.817

您只想要两个表中的不同行吗？

```
SELECT
    SQ.DENUMIRE, SQ.AN
FROM (
    SELECT
        DENUMIRE, AN
    FROM 
        SPECIALIZARE

    UNION

    SELECT
        DENUMIRE, AN
    FROM 
        MATERII
) SQ
ORDER BY
    SQ.DENUMIRE 
```

# c# - 彩色图像在 Winforms 中以灰度显示

> ID：13856032
> 
> 赞同：0
> 
> 时间：2012-12-13T08:45:09.460
> 
> 标签：c#, winforms, image, stream

我有从 pdf 文件中获取的图像字节流。我需要在 Windows 窗体中显示它。所以，我对其进行解码并将流转换为图像，然后打印图像。

彩色图像以灰度显示

![在此处输入图像描述](../Images/91f51971d7fbed22711f2cbb17452428.png)

这是原始图像。

![在此处输入图像描述](../Images/4dded15f12768bd56a312819a1f2671c.png)

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:19:33.210

我得到了图像.....让我解释一下：

在最初将字符串解码为流式传输时，我使用了一些`Encoding`技术，然后解码为图像......我犯了错误......然后通过将字符串转换为`ASCII`char 字节然后将其解码为图像来清除它...... .现在它适用于颜色和我的预期......

# jquery - 使用 jQuery 更新 ViewBag 并渲染结果

> ID：13856035
> 
> 赞同：2
> 
> 时间：2012-12-13T08:45:35.860
> 
> 标签：jquery, asp.net-mvc, viewbag

我有一个 MVC3 应用程序，它使用 ViewBag 变量从数据库中动态获取数据并动态生成接口。

我正在使用 jQuery 调用 action 方法将一些值插入数据库并相应地更新 ViewBag 变量。我想用从服务器更新后返回的新 ViewBag 值刷新 div ......真的不知道该怎么做。谢谢

这是我的查看代码：

```
 <div id="phys">
        <fieldset>
            <legend>IPSS</legend>

                @foreach (var parameter in ViewBag.four.Parameters)
                {

                    @MyHelpers.ParameterList(parameter, ViewBag.four.ParametersValues, "ParametersList")

                }
                <button type="button" onclick="print()" class="t-button">
        Add Physician</button>

        <table>
    <thead>
        <th>
            Physician
        </th>
        <th>
            Time
        </th>
        <th>
            Delete
        </th>

    </thead>

    <tbody>
        @foreach (var row in ViewBag.physicians.ParametersValues)
        {
            <tr>
                @{var items = ((string)row.Value).Split('|');}

                <td>@items[0]
                </td>
                <td>@items[1]
                </td>
                <td>@Html.ActionLink("Delete", "DeleteVisitParameter", new { vpid = @row.VisitParameterID })</td>

            </tr>
        }
    </tbody>

</table>

        </fieldset>
        </div> 
```

**这是我的 jQuery：**

```
<script type="text/javascript">
    $(document).ready(function () {

        print = function () {

            //$.post("/visit/physicians", { phy: $("#ParamList7 option:selected").text(), vID: '@ViewBag.VisitID' })

            $.ajax({
                cache: false,
                type: "POST",
                url: '@Url.Content("~/visit/physicians")',

                data: { phy: $("#ParamList7 option:selected").text(), vID: '@ViewBag.VisitID' },
                success: function (data) {

                    //What Shall I do here to update div #phys with new View Data??
                },
                fail: function (msg) {
                    alert("Fail"); ;
                }
            });

        };

    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:13:16.710

尝试这个

修改了javascript中的AJAX方法

```
$.ajax({
                        cache:false,
                        type: "GET",
                        url: "@(Url.Action("visit", "physicians"))",
                        data: { phy: $("#ParamList7 option:selected").text(), vID: '@ViewBag.VisitID'},
                        success: function (data) {

                           // perform operation after successful call 

                        },
                        error:function (xhr, ajaxOptions, thrownError){
                            alert('fail');

                        }  
                    }); 
```

// 在控制器中

```
public ActionResult visit(string phy,string vID)
{

  //perform your operation here and return result in JSON 

   return Json(new {result =""},JsonRequestBehavior.AllowGet);
} 
```

注意：确保所有参数都必须通过 java 脚本进行值调用操作。

这将调用您的操作，如果要在执行功能后更新值，那么您必须以 JSON 格式传递结果并在java 脚本的**成功函数中执行操作**

# objective-c - 我可以将 dispatch_once_t 谓词声明为成员变量而不是静态的吗？

> ID：13856037
> 
> 赞同：24
> 
> 时间：2012-12-13T08:45:38.963
> 
> 标签：objective-c, grand-central-dispatch

我想每个实例只运行一次代码块。

我可以将 dispatch_once_t 谓词声明为成员变量而不是静态变量吗？

从[GCD Reference](http://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)，我不清楚。

> 谓词必须指向存储在全局或静态范围内的变量。使用带有自动或动态存储的谓词的结果是未定义的。

我知道我可以使用 dispatch_semaphore_t 和一个布尔标志来做同样的事情。我只是好奇。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-11-07T19:43:59.867

`dispatch_once_t`不能是实例变量。

的实现`dispatch_once()`要求`dispatch_once_t`是零，并且**从来不是非零**。以前非零的情况需要额外的内存屏障才能正常工作，但`dispatch_once()`出于性能原因省略了这些屏障。

实例变量初始化为零，但它们的内存可能先前存储了另一个值。这使得它们`dispatch_once()`使用起来不安全。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-13T11:12:52.143

**11 月 16 日更新**

这个问题最初是在 2012 年以“娱乐”的形式回答的，它没有声称提供明确的答案，并对此提出了警告。事后看来，这种娱乐可能应该保持私密，尽管有些人喜欢它。

2016 年 8 月，这个问答引起了我的注意，我提供了正确的答案。在那写道：

> 我似乎不同意格雷格帕克，但可能不是真的......

好吧，格雷格和我似乎不同意我们是否不同意，或者答案，还是什么;-) 所以我正在更新我 2016 年 8 月的答案，提供更详细的答案基础，为什么它*可能*是错误的，如果是这样，如何修复它（所以原始问题的答案仍然是“是”）。希望格雷格和我要么同意，要么我会学到一些东西——结果都是好的！

所以首先是 8 月 16 日的答案，然后是对答案基础的解释。为了避免混淆，原来的游戏已经被删除，历史的学生可以查看编辑轨迹。

* * *

**答案：2016 年 8 月**

我似乎不同意格雷格帕克，但可能不是真的......

原来的问题：

> 我可以`dispatch_once_t`将谓词声明为成员变量而不是静态变量吗？

*简短回答：*答案是肯定的，**前提**是在对象的初始创建和任何使用`dispatch_once`.

*快速解释：*对`dispatch_once_t`变量 for的要求`dispatch_once`是它必须最初为零。困难来自现代多处理器上的内存重新排序操作。虽然看起来已根据程序文本（高级语言或汇编程序级别）执行了对某个位置的存储，但实际存储可能会重新排序并在随后读取相同位置*之后发生。*为了解决这个*内存屏障*，可以使用强制在它们之前发生的所有内存操作在它们之后的操作之前完成。Apple 提供了`OSMemoryBarrier()`执行此操作的方法。

With `dispatch_once`Apple 声明零初始化的全局变量保证为零，但在`dispatch_once`执行 a 之前，零初始化的实例变量（零初始化是 Objective-C 的默认值）不保证为零。

解决办法是插入内存屏障；假设`dispatch_once`发生在实例的某些成员方法中，放置此内存屏障的明显位置是在`init`方法中，因为 (1) 它只会执行一次（每个实例）并且 (2)`init`必须在任何其他成员之前返回方法可以调用。

所以是的，通过适当的内存屏障，`dispatch_once`可以与实例变量一起使用。

* * *

**2016 年 11 月**

*序言：关于`dispatch_once`*

这些注释基于 Apple 的代码和注释 [`dispatch_once`](https://opensource.apple.com/source/libdispatch/libdispatch-703.1.4/src/once.c.auto.html)。

的用法`dispatch_once`遵循标准模式：

```
id cachedValue;
dispatch_once_t predicate = 0;
...
dispatch_once(&predicate, ^{ cachedValue = expensiveComputation(); });
... use cachedValue ... 
```

并且最后两行*内联*（`dispatch_once`是一个宏）扩展为：

```
if (predicate != ~0) // (all 1's, indicates the block has been executed)  [A]
{
    dispatch_once_internal(&predicate, block);                         // [B]
}
... use cachedValue ...                                                // [C] 
```

笔记：

*   Apple 的消息来源指出`predicate`必须将其初始化为零，并指出全局和静态变量默认为零初始化。

*   请注意，在 [A] 行没有内存屏障。在具有推测性预读和分支预测的处理器上`cachedValue`，行 [C] 的读取可能发生`predicate`在行 [A] 的读取之前，这可能导致错误的结果（对于 的错误值`cachedValue`）

*   可以使用屏障来防止这种情况，但是这很慢，Apple希望在已经执行一次块的常见情况下快速，所以......

*   `dispatch_once_internal`，行 [B]，它在内部使用了屏障和原子操作，使用特殊的屏障`dispatch_atomic_maximally_synchronizing_barrier()`来击败推测性预读，因此允许行 [A] 是无障碍的，因此速度很快。

*   之前到达线 [A] 的任何处理器`dispatch_once_internal()`都已被执行和变异，`predicate`需要`0`从`predicate`. 使用初始化为零的全局或静态变量`predicate`将保证这一点。

就我们当前的目的而言，重要的一点是它的`dispatch_once_internal` *变异* `predicate`方式使得 [A] 行可以*毫无*障碍地工作。

*8 月 16 日答案的详细解释：*

所以我们知道使用初始化为零的全局或静态满足`dispatch_once()`无障碍快速路径的要求。我们也知道由`dispatch_once_internal()`to产生的突变`predicate`被正确处理。

我们需要确定的是，我们是否可以使用*实例*变量`predicate`并对其进行初始化，以使上面的 [A] 行永远无法读取其预初始化值 - 就好像它可能会破坏一样。

我 8 月 16 日的回答说这是可能的。要了解其基础，我们需要考虑具有推测性预读的多处理器环境中的程序和数据流。

8 月 16 日答案的执行和数据流的概要是：

```
Processor 1                              Processor 2
0\. Call alloc
1\. Zero instance var used for predicate
2\. Return object ref from alloc
3\. Call init passing object ref
4\. Perform barrier
5\. Return object ref from init
6\. Store or send object ref somewhere
                           ...
                                         7\. Obtain object ref
                                         8\. Call instance method passing obj ref
                                         9\. In called instance method dispatch_once
                                            tests predicate, This read is dependent
                                            on passed obj ref. 
```

为了能够使用实例变量作为谓词，必须不可能以这样一种方式执行步骤 9，即在步骤 1 将其归零*之前读取内存中的值。*

如果省略步骤 4，即没有插入适当的屏障，`init`则尽管处理器 2 在执行步骤 9 之前必须获得处理器 1 生成的对象引用的正确值，但（理论上）处理器 1 的零写入是可能的在步骤 1 中尚未执行/写入全局内存，处理器 2 将看不到它们。

因此，我们插入第 4 步并执行屏障。

然而，我们现在必须考虑投机性预读，就像必须考虑的那样`dispatch_once()`。处理器 2 能否在步骤 4 的屏障确保内存为零之前执行步骤 9 的读取？

考虑：

*   处理器 2 不能以推测或其他方式执行步骤 9 的读取，直到它在步骤 7 中获得对象引用 - 并且推测地这样做需要处理器确定步骤 8 中的方法调用，其在 Objective-C 中的目的地是动态确定的，将在包含步骤 9 的方法中结束，这是非常高级（但并非不可能）的推测；

*   步骤 7 无法获取对象引用，直到步骤 6 存储/传递它；

*   直到第 5 步返回它，第 6 步才将其存储/传递；和

*   第 5 步是在第 4 步的障碍之后...

**TL;DR**：第 9 步如何获得执行读取所需的对象引用，直到第 4 步包含屏障之后？（考虑到执行路径很长，有多个分支，一些有条件的（例如在方法分派中），推测性预读是否完全是一个问题？）

所以我认为第 4 步的障碍就足够了，即使存在影响第 9 步的投机性预读。

*考虑格雷格的评论：*

Greg 将 Apple 关于谓词的源代码注释从“必须初始化为零”加强为“必须从不非零”，这意味着从加载时间开始，这*仅*适用于初始化为零的全局变量和静态变量。该论点基于克服无障碍`dispatch_once()`快速路径所需的现代处理器的推测性预读。

实例变量在对象创建时被初始化为零，并且在此之前它们占用的内存可能是非零的。然而，如上文所述，可以使用合适的屏障来确保`dispatch_once()`不会读取预初始化值。如果我正确地遵循了他的评论，我*认为*Greg 不同意我的论点，并认为第 4 步的障碍不足以处理投机性预读。

让我们假设 Greg 是对的（这根本不可能！），然后我们处于 Apple 已经处理过的情况`dispatch_once()`，我们需要击败预读。苹果通过使用`dispatch_atomic_maximally_synchronizing_barrier()`屏障来做到这一点。我们可以在第 4 步使用相同的屏障，并阻止执行以下代码，直到处理器 2 的所有可能的推测性预读都被击败；并且作为以下代码，第 5 步和第 6 步必须在处理器 2 甚至有一个对象引用之前执行，它可以用来推测性地执行第 9 步，一切正常。

因此，如果我理解 Greg 的担忧，那么 using`dispatch_atomic_maximally_synchronizing_barrier()`将解决它们，并且使用它而不是标准屏障不会引起问题，即使它实际上并不需要。因此，尽管我不相信这是*必要*的，但这样做在最坏的情况下是*无害*的。因此，我的结论和以前一样（强调）：

> 所以是的，通过*适当*的内存屏障，`dispatch_once`可以与实例变量一起使用。

*如果我的逻辑有误，我相信 Greg 或其他读者会告诉我。我准备好面对手掌了！*

当然，您必须确定*适当*障碍的成本是否`init`值得您从`dispatch_once()`用于获得每个实例一次的行为中获得的好处，或者您是否应该以另一种方式满足您的要求——这些替代方案超出了这个答案的范围！

*代码`dispatch_atomic_maximally_synchronizing_barrier()`：*

的定义`dispatch_atomic_maximally_synchronizing_barrier()`，改编自 Apple 的源代码，您可以在自己的代码中使用：

> ```
> #if defined(__x86_64__) || defined(__i386__)
>    #define dispatch_atomic_maximally_synchronizing_barrier() \
>       ({ unsigned long _clbr; __asm__ __volatile__( "cpuid" : "=a" (_clbr) : "0" (0) : "ebx", "ecx", "edx", "cc", "memory"); })
> #else
>    #define dispatch_atomic_maximally_synchronizing_barrier() \
>       ({ __c11_atomic_thread_fence(dispatch_atomic_memory_order_seq_cst); })
> #endif 
> ```

如果您想知道这是如何工作的，请阅读 Apple 的源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T09:13:12.567

您引用的引用似乎很清楚：谓词必须在全局或静态范围内，如果您将其用作成员变量，它将是动态的，因此结果将是未定义的。所以不，你不能。`dispatch_once()`不是您要查找的内容（参考资料还说：**在应用程序的整个生命周期内***执行一次且仅一次的块对象* ，这不是您想要的，因为您希望为每个实例执行此块）。

# c++ - 将数字添加到 QByteArray

> ID：13856041
> 
> 赞同：3
> 
> 时间：2012-12-13T08:45:51.080
> 
> 标签：c++, qt, short, qbytearray

我有一个`QbyteArray` 名字`"B2"`，

我想添加一个 2 字节的数字，例如`300`.

但是当我这样做`mybyte.size()`时`3byte!!!!`

我的代码是：

我想让它变成2字节。

```
 QByteArray B2;
        short int myint;
        myint=300;
        B2.setNum(myint);
qDebug()<<B2[0]<<B2.size(); 
```

这是我的输出：

```
3 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:56:30.083

如[文档](http://doc.qt.digia.com/qt/qbytearray.html#details)中所述：

> **QByteArray::setNum()**将字节数组设置为以基数为基数的 n 的打印值（默认为 10）并返回对字节数组的引用。基数可以是 2 到 36 之间的任何值。

很明显，它为您提供了 3 的大小，因为您设置了一个 3 字节的数组。

# 更新

```
for (int i = 0; i < 2; i++) {
  B2.append(myint >> (i * 8));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:42:05.367

如果您尝试添加一个短值（2 字节），您可以这样做

```
B2.append((char)((myint & 0xFF00) >> 8));
B2.append((char)(myint & 0x00FF)); 
```

它将以大端顺序附加短值

# calibration - 存在永久磁场的磁力计校准

> ID：13856042
> 
> 赞同：2
> 
> 时间：2012-12-13T08:45:52.017
> 
> 标签：calibration, magnetometer

在我们正在开发的定制 Android 设备中，磁力计放置在非常靠近内部扬声器的位置。扬声器中的永磁体会影响磁力计的值。x,y,z 值正在达到磁力计可以报告的最大值。

重新校准可以解决这个问题吗？是否应该为此使用硬铁校准技术？这可以在磁力计驱动程序中处理还是只能在固件中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:39:05.930

是的，您可以补偿硬铁和软铁对 Android 设备的影响。您需要确定哪一个（或两者）使传感器周围的磁场发生偏斜。硬铁偏移很容易确定和补偿。球体软铁歪斜成椭球体可能更难处理。您的实施可能取决于您特别需要补偿的内容。好消息是您的传感器是固定的，您可能可以进行一次大计算，然后应用偏移量。

硬铁和软铁补偿有几种不同的方法。最简单的方法是： http: [//memsense.com/docs/MTD-0802_1.2_Magnetometer_Calibration.pdf](http://memsense.com/docs/MTD-0802_1.2_Magnetometer_Calibration.pdf)。此处描述了使用最小二乘拟合的更困难的方法：http: [//cache.freescale.com/files/sensors/doc/app_note/AN4248.pdf](http://cache.freescale.com/files/sensors/doc/app_note/AN4248.pdf)。硬铁偏移并不难，但软铁偏移需要将数据拟合到椭圆或椭球以及大量的线性代数。我已经尝试过两者的版本，它们都可以工作。每个都有优点和缺点，具体取决于您拥有多少处理能力以及磁场偏斜的严重程度。

# c# - 如何处理两个函数调用之间的数据一个接一个

> ID：13856044
> 
> 赞同：4
> 
> 时间：2012-12-13T08:46:00.377
> 
> 标签：c#, sql, asp.net-mvc, function, exception-handling

我需要使用两个数据库函数，其中一个我需要删除评论，然后调用第二个函数来降低用户的分数。

问题：如果第二个功能出现异常，不扣分，但评论被删除。

我正在尝试在类对象中存储第一个函数的操作，如果第二个发生异常，将执行反向操作以将其重写到数据库中。有没有其他方法可以做到这一点，请建议我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:50:28.327

您需要在同一事务的范围内进行两个数据库调用。因此，如果您遇到异常，所有内容都将回滚。

这取决于您如何访问数据库，但可能是这样的：

```
using (var Conn = new SqlConnection(_ConnectionString))
{
    SqlTransaction trans = null;
    try
    {
        Conn.Open();
        trans = Conn.BeginTransaction();

        using (SqlCommand Com = new SqlCommand(ComText, Conn, trans))
        {
                    // delete comment
                    // update score
         }
         trans.Commit();
      }
    catch (Exception Ex)
    {
        if (trans != null) trans.Rollback();
        return -1;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:51:50.277

如果这两个函数都应该被编写或者更接近其中一个，你需要在这两个函数周围放置一个事务。

如果您提交事务，评论和减少分数将保存在数据库中，如果您有异常，您可以执行回滚并且数据库中没有任何反应。

# perl - 使用 Perl 在目录中创建文件

> ID：13856046
> 
> 赞同：5
> 
> 时间：2012-12-13T08:46:11.070
> 
> 标签：perl, createfile

如何创建一个新文件，我打算在 Perl 中使用 open() 将其写入现有目录？

我试过这样：

```
my $existingdir = './mydirectory';

open my $fileHandle, ">>", "$existingdir/filetocreate.txt" or die "Can't open '$existingdir/filetocreate.txt'\n"; 
```

但它不会起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T09:00:47.133

```
my $existingdir = './mydirectory';
mkdir $existingdir unless -d $existingdir; # Check if dir exists. If not create it.
open my $fileHandle, ">>", "$existingdir/filetocreate.txt" or die "Can't open '$existingdir/filetocreate.txt'\n";
print $fileHandle "FooBar!\n";
close $fileHandle; 
```

这应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T09:23:05.637

```
my $FILE;

open($FILE, ">>File.txt")||die("Cannot open file:".$!);

close($FILE); 
```

您可以附加目录位置来代替 File.txt。

# xcode - xcode 手势 reconizer 调整大小按钮

> ID：13856051
> 
> 赞同：0
> 
> 时间：2012-12-13T08:46:45.673
> 
> 标签：xcode

嗨，我正在尝试在 uiview 上放置一个按钮，并使该按钮具有 uiview 的大小。我试过了

```
button1.frame = drop3.frame; // drop3 is a uiview 
```

但这只会使按钮跳回其原始起始位置而不改变大小。

这有点像第一次 UIGestureRecognizerStateEnded 它调整大小然后跳回原来的位置然后它工作正常？

```
 - (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer
    {

         CGPoint translation = [recognizer translationInView:self.view];

            recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, recognizer.view.center.y + translation.y);

         [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

        if (recognizer.state == UIGestureRecognizerStateEnded)

        {
            button1.transform = CGAffineTransformMakeScale(2,2);

        self.button1.center = drop3.center;
        } 
```

# android - Android 自定义自动完成文本视图

> ID：13856052
> 
> 赞同：0
> 
> 时间：2012-12-13T08:46:56.303
> 
> 标签：android, autocomplete

我需要制作我的自定义 AutoCompleteTextView。我在适配器中使用 Unicode 字符，但问题是用户并不总是拥有或使用带有 unicode 字符的键盘。

这个想法是当用户以字母 C 开头时，我会建议以 C,Ć,Č 开头的项目

当用户输入字母 S 时，我会建议以 S 和 Š 开头的项目

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:55:16.960

您是否尝试过实现标准的 Android[搜索](http://developer.android.com/guide/topics/search/index.html)界面，但使用[FTS3/4](http://www.sqlite.org/fts3.html)表获取 ICU[标记](http://www.sqlite.org/fts3.html#section_8_1)器的建议？

我还没有实现 Unicode 搜索，但使用 ICU 标记器可能会起作用。也许尝试过的人可以评论这个答案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:19:06.797

我已经解决了这个问题：

我已经编写了将 unicode 字符串转换为非 unicode 的方法。

```
/** Remove HTML constants for unicode chars from string */
public static String convertFromUnicode(String text, Context ctx) {

    // Find wrong unicode chars and replace it with non-unicode

    text = text.replaceAll(ch, "c");
    text = text.replaceAll(zh, "z");
    text = text.replaceAll(sh, "s");
    text = text.replaceAll(tj, "c");
    text = text.replaceAll(Ch, "C");
    text = text.replaceAll(Zh, "Z");
    text = text.replaceAll(Sh, "S");
    text = text.replaceAll(Tj, "C");

    text = text.replaceAll(ctx.getResources().getString(R.string.ch), "c");
    text = text.replaceAll(ctx.getResources().getString(R.string.zh), "z");
    text = text.replaceAll(ctx.getResources().getString(R.string.sh), "s");
    text = text.replaceAll(ctx.getResources().getString(R.string.tj), "c");
    text = text.replaceAll(ctx.getResources().getString(R.string.Ch), "C");
    text = text.replaceAll(ctx.getResources().getString(R.string.Zh), "Z");
    text = text.replaceAll(ctx.getResources().getString(R.string.Sh), "S");
    text = text.replaceAll(ctx.getResources().getString(R.string.Tj), "C");

    return text;
} 
```

并在 CustomAdaper 的 performFiltering 中：

```
 @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        if (constraint != null) {
            suggestions.clear();
            for (String showName : itemsAll) {

                String tempshowName = ParserData.convertFromUnicode(showName,
                        getContext());

                String tempContraint = ParserData.convertFromUnicode(
                        constraint.toString(), getContext());

                if (tempshowName.toLowerCase().startsWith(
                        tempContraint.toString().toLowerCase())) {
                    suggestions.add(showName);
                }
            }
            FilterResults filterResults = new FilterResults();
            filterResults.values = suggestions;
            filterResults.count = suggestions.size();
            return filterResults;
        } else {
            return new FilterResults();
        }
    } 
```

所以 unicode 而不是 unicode 字符似乎是相等的。Tnx 的想法@dilix。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T08:51:08.140

您可以实现自己的过滤器，例如不仅返回 C* 值，还返回 C*,Ć*,Č*

如何实现您自己的过滤器，您可以在此处找到

[带有自定义适配器过滤的 Android AutoCompleteTextView 不起作用](https://stackoverflow.com/questions/8784249/android-autocompletetextview-with-custom-adapter-filtering-not-working)

# spring - 如何注入这种类功能。春季开放 JPA

> ID：13856055
> 
> 赞同：-1
> 
> 时间：2012-12-13T08:47:13.503
> 
> 标签：spring, jakarta-ee, struts2, dependency-injection, openjpa-maven-plugin

如何在这种语句中注入类 UserProfile？这是使用 Struts2 - Spring 插件。

（ UserProfile userProfile = em.find(UserProfile.class,"1");) ---> 我不知道如何在春季更改注射风格？

```
package tester;

/**
 *
 * @author god-gavedmework
 */

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;
import lotmovement.business.entity.UserProfile;

/**
 *
 * @author god-gavedmework
 */
public class Record_exist {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        EntityManagerFactory entityManagerFactory = 
        Persistence.createEntityManagerFactory("LotMovementPU");

        EntityManager em = entityManagerFactory.createEntityManager();

        EntityTransaction userTransaction = em.getTransaction();
        userTransaction.begin();
        UserProfile userProfile = em.find(UserProfile.class,"1");

        if(userProfile.getUserId().equals("tok"))
        {
            System.out.println("find");
            System.out.println("write successful");
        }

        entityManagerFactory.close();

    }
} 
```

我的 Spring 注入不起作用。我使用 setter 注入了 UserProfile 实体，但我认为存在问题，因为它无法检索任何数据。

```
private UserProfile userProfile; --> it does inject.

entityStart.em.find(UserProfile.class, userId)--> will not work in the sense that no values are retrieved. 
```

完成课程

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package lotmovement.business.crud;

import lotmovement.business.entity.UserProfile;

/**
 *
 * @author god-gavedmework
 */
public class RecordExistUserProfile {

    private EntityStart entityStart;
    private UserProfile userProfile;

    public boolean checkrecordexist(String userId) {
        entityStart.StartDbaseConnection();
        entityStart.em.find(UserProfile.class, userId); ---> this one will not work.

        if (userId.equals(userProfile.getUserId())) {
            return true;
        } else {
            return false;
        }
    }

    public boolean CheckPasswordCorrect(String userId, String password) {
        entityStart.StartDbaseConnection();

        UserProfile up = entityStart.em.find(UserProfile.class, userId); --> this one will work but it is not injected...

        if (password.equals(up.getPassword())) {
            return true;
        } else {
            return false;
        }

    }

    public UserProfile getUserProfile() {
        return userProfile;
    }

    public void setUserProfile(UserProfile userProfile) {
        this.userProfile = userProfile;
    }

    public EntityStart getEntityStart() {
        return entityStart;
    }

    public void setEntityStart(EntityStart entityStart) {
        this.entityStart = entityStart;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:25:17.933

最后我找到了问题的根本原因和解决方案。

根本原因：

用户配置文件用户配置文件；--> 它将注入 UserProfile 实体。

entityStart.em.find(UserProfile.class, userId); --> 这不起作用，因为它没有传递给类变量 userProfile..

解决方案：

用户配置文件用户配置文件；--> 注入 UserProfile 实体。

userProfile = entityStart.em.find(UserProfile.class, userId); ---> find() 现在可以使用 find。

# c# - 如何检查进程是否结束，然后在 C# ProcessStartInfo 中执行下一个命令？

> ID：13856056
> 
> 赞同：0
> 
> 时间：2012-12-13T08:47:14.680
> 
> 标签：c#, process.start, processstartinfo

我有一段代码可以运行命令行并执行以下操作：

```
 ProcessStartInfo psi = new ProcessStartInfo();
        psi.FileName = "CMD.EXE";
        System.Console.WriteLine("please insert the path of working directory");
        string path = System.Console.ReadLine();
        psi.WorkingDirectory = path; //@"D:\Exercises\npp52\scintilla\src";
        psi.Arguments = "/C dir /s /b | cccc - --outdir=d:\\jon";
        psi.WindowStyle = ProcessWindowStyle.Normal;
        Process.Start(psi);
        // ... cut ...
        XmlTextReader reader = new XmlTextReader(@"D:\jon\anonymous.xml");
        while (reader.Read()) 
        {
            switch (reader.NodeType) { /* ... */ }
        } 
```

第二件不会等到第一件完成后再开始。特别是在第一块将产生 anonimous.xml 之前，第二块试图获取该 xml。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:50:05.620

如果添加此行：

```
Process.Start(psi);
psi.WaitForExit(); // <-- add this 
```

您的代码应该等待该过程结束。

# tridion - 发布组件时更新组件字段

> ID：13856058
> 
> 赞同：8
> 
> 时间：2012-12-13T08:47:23.683
> 
> 标签：tridion, tridion-2011

我们在发布组件时更新组件字段，例如。当组件发布时，我们希望将当前日期时间更新为组件的 PublishDate 字段。我们已经在 .net 程序集（c#）中编写了这段代码。发布组件因错误“您无权执行此操作”而失败

我们曾经在 vbscript 模板中执行此操作，但我们正在迁移到复合模板，我们正面临这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T09:30:53.837

默认情况下，Tridion 2011 不再允许从模板代码发布或编辑其他项目。

但是，可以通过修改**Tridion.ContentManager.Config**文件`allowWriteOperationsInTemplates`上的属性来激活它：

 **```
<tridion.contentmanager.security allowAutomaticUserCreation="true" hideOrganizationalItemsNoAccess="false" allowWriteOperationsInTemplates="true"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T09:18:24.827

我相信开箱即用的 Tridion 2011 不允许模板对项目进行任何更改。可以在配置中覆盖此行为。如果有人确切知道如何执行此操作，请添加信息，因为我在文档中找不到它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-12T07:18:19.413

当我们遇到使用模板代码创建包时，我们发现 TOM.NET API 不允许这样做，因为它是只读的。

因此，通过修改 Tridion.ContentManager.Config 文件上的 allowWriteOperationsInTemplates 属性：

tridion.contentmanager.security allowAutomaticUserCreation="true"

它允许我们使用 TOM.Net API 创建工件。

谢谢 ！雇用米斯特里**

# java - IDS 中的多线程

> ID：13856065
> 
> 赞同：0
> 
> 时间：2012-12-13T08:47:54.470
> 
> 标签：java, multithreading, ip, packet-sniffers, intrusion-detection

我必须`IDS`为我的大学项目开发​​一个。我可以使用嗅探器的 java 代码和算法。我必须启用它以支持 1 GB 以太网流量/秒。为此，我们计划`multi-threading`在双核机器上合并和运行代码。我打算在`IP`. 程序的主要功能调用`openInterface()`类`packetLoader`{implements `packetReciever`} 的方法。该方法`openInterface()`打开`NIC`界面并开始捕获数据包。我应该改变这种方法`openInterface()`来合并`multi-threading`吗？我应该在什么时候开始制作线程？我应该根据什么参数制作单独的线程？我应该如何实施所需的`multi-threading`？

干杯：）

```
public void openInterface(String filter, int numOfPackets){
    try {
        if (!devName.startsWith(NIC_NAME_PREFIX)) {             
            if(numOfPackets == -1)
                packetSamplingRatio = 1;
            else {
                packetSamplingRatio = numOfPackets/(double)totalPcapFilePackets;
            }
        }

        //JpcapCaptor captor = null;
        if (devName.startsWith(NIC_NAME_PREFIX)) {
                        System.err.println(".........inside openinterface");
            NetworkInterface[] devicesList = JpcapCaptor.getDeviceList();
                                         System.err.println(".........inside openinterface 2");

            String nicName = devName.substring(NIC_NAME_PREFIX.length());
            int nicID = -1;
            for (int i = 0; i < devicesList.length; i++) {

                                System.err.println(".........inside openinterface 3");
                if (devicesList[i].name.equals(nicName)){
                                        System.err.println("Device no:" + i + "=" +devicesList[i].name);
                                        System.err.println("capturing on device= " + devicesList[i].name);
                    nicID = i;}
            }
            if (nicID >= 0){

                                captor = JpcapCaptor.openDevice(devicesList[1],
                        NIC_SNAPLEN, true, NIC_TIMEOUT);
                            System.err.println(".........Device is open for packet capturing with");
                            System.err.println("NIC_SNAPLEN = " + NIC_SNAPLEN + " and NIC_TIMEOUT=" + NIC_TIMEOUT);

                            }
            else {
                System.err.println("Network interface " + nicName
                        + "cannot be found!");
                System.err.println("Availabel NICs:");
                for(int k=0; k<devicesList.length; k++) {
                    System.out.println("- " + devicesList[k]);
                }
                System.exit(1);
            }
        } else {
                        System.err.println(".........inside else");
            captor = JpcapCaptor.openFile(devName);
        }

        if (filter != null){
            captor.setFilter(filter, true);
                   ;
                    }// Start reading packets
                    System.err.println(".........filter checked");
                    //PacketStorage ps = new PacketStorage(); 
        //captor.loopPacket(numOfPackets, this);
                    //captor.processPacket(numOfPackets, this);
                    for(int j =0; j<numOfPackets ; j++){
                    captor.getPacket();

                    System.err.println(".........captured packet" + j);

                    }
                    System.err.println(".........after capture.looppacket");
    }

    catch (IOException e) {
        System.err.println("Exception in openDevice " + e);
        System.exit(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:28:52.397

我不确定是否会为每个客户端（IP 地址）生成一个新线程。如果仅用于大学项目，它可能还可以，但对于更真实的场景，如果客户数量变大，它可能会过度杀伤（和性能损失）。相反，我会创建一个大小固定的工作线程池（请参阅`java.util.concurrent.Executors`和）（CPU 的to是一个好的开始），并将要分析的数据包传递给它们。在您的情况下，它可以在您调用的循环中的代码示例末尾完成。当然，执行器池必须在应用程序启动时进行初始化。`java.util.concurrent.ExecutorService``n+1``2*n``for``getPacket()`

除此之外，通常实现 IDS 并非易事，因为要使其真正正确，单独分析每个数据包是不够的。由于 IP 分段，数据包以片段的形式出现，因此可能需要将其中的几个合并在一起以正确检测入侵。但这是你问题范围之外的不同故事......

# iphone - 如何删除 UITableViewCell 的子视图

> ID：13856068
> 
> 赞同：1
> 
> 时间：2012-12-13T08:48:19.493
> 
> 标签：iphone, objective-c, uitableview

我创建了 imageview 以在 cellForRowAtIndexPath 方法上显示图像。我在 Cell 中添加 imageview 作为子视图。但是当我当时重新加载我的表格视图时，单元格中的图像不会重新加载。以下是我的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[arrcathatname objectAtIndex:indexPath.row]]];
    [imgView setFrame:CGRectMake(20, 7, 35, 35)];
    [cell addSubview:imgView];

    cell.textLabel.text = [arrCatName objectAtIndex:indexPath.row];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    // Configure the cell...

    return cell;
} 
```

所以，我想删除我的 imageview 以正确重新加载图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T09:01:28.293

尝试将子视图添加到单元格：

```
[cell.contentView addSubview:imgView]; 
```

您可以使用代码删除该子视图：

```
[cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:55:29.427

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
imgView = [[UIImageView alloc] init];
imgView.tag  = 111;

[cell.contentView addSubView:imgView];
}
imgView = (UIImageView*)[cell.contentView ViewWithTag:111];

[imgView setFrame:CGRectMake(20, 7, 35, 35)];
imgView.image = [UIImage imageNamed:[arrcathatname objectAtIndex:indexPath.row]];

cell.textLabel.text = [arrCatName objectAtIndex:indexPath.row];

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
// Configure the cell...

return cell;
} 
```

试试这个

# java - 返回客户端时，CXF WS 调度失败

> ID：13856072
> 
> 赞同：5
> 
> 时间：2012-12-13T08:48:30.400
> 
> 标签：java, cxf

我正在尝试使用 javax.xml.ws.Provider 使用 CXF 开发远程调度程序，如下所述：http: [//cxf.apache.org/docs/jax-ws-dispatch-api.html](http://cxf.apache.org/docs/jax-ws-dispatch-api.html)。我有一个配置了 WSAddressing、SOAP12_HTTP_BINDING 和以下 WSS4J 配置的 CXF 客户端：

客户端 WSS4J IN 拦截器：

```
inProps.put("action",                  "Timestamp Signature Encrypt");      
inProps.put("passwordType",            "PasswordText");
    ... 
```

客户端 WSS4J OUT 拦截器：

```
protected static final String WSU_NS =
    "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd";                                           
protected static final String SOAP12_NS = "http://www.w3.org/2003/05/soap-envelope";
protected static final String SOAP11_NS = "http://schemas.xmlsoap.org/soap/envelope";
protected static final String WSA_NS =  "http://www.w3.org/2005/08/addressing";
protected static final String WSSE_NS="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd";

String userForPswCallback = ...
Map<String, Object> props = new HashMap<String, Object>();
props.put("action",                 "UsernameToken Timestamp Signature Encrypt");
props.put("passwordType",           "PasswordText");
...
props.put("encryptionParts",        "{Content}{"+SOAP12_NS+"}Body;{Element}{"+WSSE_NS+"}UsernameToken");
props.put("signatureKeyIdentifier", "DirectReference");
props.put("signatureParts",         "{Element}{"+SOAP12_NS+"}Body;" +
                "{Element}{"+WSSE_NS+"}UsernameToken;" +
                "{Element}{"+WSA_NS+"}Action;" +
                "{Element}{"+WSA_NS+"}MessageID;" +
                "{Element}{"+WSA_NS+"}To;" +
                "{Element}{"+WSA_NS+"}ReplyTo"); 
```

在调度员方面，我发布了以下调度员服务：

```
@WebServiceProvider( targetNamespace = JettyConstants.PersistenceNameSpace, 
                     serviceName=JettyConstants.PersistenceService, 
                     portName=JettyConstants.PersistencePort)
@ServiceMode (Service.Mode.MESSAGE) 
public class PersistenceProvider implements Provider<Source> {
    private static final Logger log = Logger.getLogger(PersistenceProvider.class);

    private TransformerFactory transformerFactory;

    public PersistenceProvider() {
        // Complete
    }

    private static final DocumentBuilderFactory BUILDER_FACTORY = DocumentBuilderFactory.newInstance();
    static {
          BUILDER_FACTORY.setNamespaceAware(true);
    }

    public Source invoke(Source request) {
       try {
            DOMSource sourceInvoke = null;

            //get userName and userPassword from the interceptor chain (added in a custom interceptor)
            String userName = (String)(PhaseInterceptorChain.getCurrentMessage().get("product.username"));
            String userPassword = (String)(PhaseInterceptorChain.getCurrentMessage().get("product.password"));

            //insert extracted into a org.w3c.dom.Document
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setNamespaceAware(true);
            DocumentBuilder builder = null;
            org.w3c.dom.Document doc = null;

            try {
                builder = dbf.newDocumentBuilder();
                InputStream is = convertMessageToInputStream(request);   
                doc = builder.parse(is);                 
            } catch (Exception e) {
                e.printStackTrace();
                return null;
            } 

            NodeList node = doc.getElementsByTagNameNS("*","Security");
            node.item(0).getParentNode().removeChild(node.item(0));

            // Add extra header to the envelop...
            ...

            sourceInvoke = new DOMSource(doc);                

            // 1\. Resolve target service based on wsContext
            QName targetService = new QName(JettyConstants.PersistenceNameSpace,JettyConstants.PersistenceService);
            QName targetPort = new QName(JettyConstants.PersistenceNameSpace,JettyConstants.PersistencePort);
            String targetEndpoint = DispatchStarter.getNewVelocityDestination(false)+"/Persistence";

    /* ****************************************** INVOKE THE REMOTE SERVER *************************************** */           
            // 2\. Create dispatcher
            Dispatch<Source> dispatcher = createDispatcher(targetService, targetPort, targetEndpoint);      

            // 3\. Invoke target service
            Source response = dispatcher.invoke(sourceInvoke);                                         

    /* *********************************************************************************************************** */           

            // 4\. Return service response to consumer
            DOMSource domS = toDOMSourceFromSAX((SAXSource)response);

            //get the doc to modify it:
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setNamespaceAware(true);
            DocumentBuilder builder = null;
            org.w3c.dom.Document doc = null;
            builder = dbf.newDocumentBuilder();
            doc = (org.w3c.dom.Document) domS.getNode();                  

            // 4.1\. Take just the body content out of the response received from the server:
            NodeList body_el = doc.getElementsByTagNameNS("*", "Body").item(0).getChildNodes();

            DocumentBuilderFactory docf = DocumentBuilderFactory.newInstance();
            Document docnew = docf.newDocumentBuilder().newDocument();
            Node newNode = docnew.createElementNS(body_el.item(0).getNamespaceURI(), body_el.item(0).getLocalName());
            Node nodeComplete = docnew.adoptNode(body_el.item(0).cloneNode(true));     

            // 4.2\. Create the SAXSource to send back to the client through CXF stack
            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
            Source xmlSource = new DOMSource(nodeComplete);
            Result outputTarget = new StreamResult(outputStream);
            TransformerFactory.newInstance().newTransformer().transform(xmlSource, outputTarget);
            InputStream is = new ByteArrayInputStream(outputStream.toByteArray());
            InputSource inputSource = new InputSource(is);
            SAXSource finalRes = new SAXSource(inputSource);             

            return finalRes;

        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return null;
    }

    private Dispatch<Source> createDispatcher(QName serviceName, QName portName, String targetEndpoint) {
        Service service = Service.create(serviceName);         
        String actualBinding = SOAPBinding.SOAP12HTTP_BINDING;
        service.addPort(portName, actualBinding, targetEndpoint);
        Dispatch<Source> dispatcher = service.createDispatch(portName, Source.class,
                Service.Mode.MESSAGE);
        return dispatcher;
    }
} 
```

PersistenceProvider（调度程序）与以下 WSS4JInterceptors 一起发布

```
Dispatcher WSS4J Dispatcher IN interceptors:

    Map<String, Object> inProps = new HashMap<String, Object>();
    inProps.put(WSHandlerConstants.ACTION, "UsernameToken Timestamp Signature Encrypt");
    inProps.put("passwordType",            "PasswordText");
    ...

Dispatcher WSS4J Dispatcher OUT interceptors:

    protected static final String WSU_NS =
        "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd";

    protected static final String SOAP_NS = "http://www.w3.org/2003/05/soap-envelope";
    protected static final String WSA_NS =  "http://www.w3.org/2005/08/addressing";

    outProps.put(WSHandlerConstants.ACTION, "Timestamp Signature Encrypt");
    outProps.put("passwordType",            "PasswordText");
    ...
    outProps.put("encryptionParts",         "{Content}{"+SOAP_NS+"}Body");
    ...
    outProps.put("signatureParts",          "{Element}{" + WSU_NS + "}Timestamp;" +
                        "{Element}{"+SOAP_NS+"}Body;" +
                        "{Element}{"+WSA_NS+"}Action;" +
                        "{Element}{"+WSA_NS+"}MessageID;" +
                        "{Element}{"+WSA_NS+"}To;" +
                        "{Element}{"+WSA_NS+"}RelatesTo"); 
```

并启用了 WSAddressingFeature。我可以将来自客户端的请求重定向到远程服务器，然后从调度程序端的远程服务器获取响应。不幸的是，当我尝试将答案发送回我的客户端时（即在 PersistenceProvider#invoke 方法的 return 语句之后），我得到以下异常：

```
{http://dbproxyservice/}PersistenceService#{http://dispatch/}invoke has thrown exception, unwinding now
org.apache.cxf.binding.soap.SoapFault: Error creating SOAPMessage
       at org.apache.cxf.jaxws.interceptors.MessageModeOutInterceptor$MessageModeOutInterceptorInternal.handleMessage(MessageModeOutInterceptor.java:210)
       at org.apache.cxf.jaxws.interceptors.MessageModeOutInterceptor$MessageModeOutInterceptorInternal.handleMessage(MessageModeOutInterceptor.java:182)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
       at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:77)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
       at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:123)
       at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:323)
       at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:289)
       at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)
       at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:942)
       at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:878)
       at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
       at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
       at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
       at org.eclipse.jetty.server.Server.handle(Server.java:349)
       at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)
       at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:936)
       at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:893)
       at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:224)
       at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:52)
       at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586)
       at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44)
       at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
       at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
       at java.lang.Thread.run(Thread.java:662)
Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog
at [row,col {unknown-source}]: [1,0]
       at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:677)
       at com.ctc.wstx.sr.BasicStreamReader.handleEOF(BasicStreamReader.java:2104)
       at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2010)
       at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1102)
       at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:551)
       at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:513)
       at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:467)
       at org.apache.cxf.jaxws.interceptors.MessageModeOutInterceptor$MessageModeOutInterceptorInternal.handleMessage(MessageModeOutInterceptor.java:204)
       ... 24 more
[10Dec 18:59:51,881] (doLog@372) WARN  PhaseInterceptorChain - Interceptor for {http://dbproxyservice/}PersistenceService#{http://dispatch/}invoke has thrown exception, unwinding now
java.lang.NullPointerException
       at org.apache.cxf.ws.addressing.ContextUtils.hasEmptyAction(ContextUtils.java:358)
       at org.apache.cxf.ws.addressing.MAPAggregator.assembleGeneric(MAPAggregator.java:686)
       at org.apache.cxf.ws.addressing.MAPAggregator.aggregate(MAPAggregator.java:660)
       at org.apache.cxf.ws.addressing.MAPAggregator.mediate(MAPAggregator.java:515)
       at org.apache.cxf.ws.addressing.MAPAggregator.handleMessage(MAPAggregator.java:228)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
       at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:107)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:323)
       at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:77)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
       at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:123)
       at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:323)
       at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:289)
       at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)
       at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:942)
       at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:878)
       at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
       at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
       at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
       at org.eclipse.jetty.server.Server.handle(Server.java:349)
       at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)
       at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:936)
       at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:893)
       at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:224)
       at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:52)
       at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586)
       at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44)
       at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
       at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
       at java.lang.Thread.run(Thread.java:662) 
```

你有什么提示可以避免这个错误吗？特别是，为了通过 CXF 堆栈将调用响应发送回客户端，我该怎么做？在上面的 PersistenceProvider#invoke 的第 4 点删除从远程服务器获取的所有标头是否正确？我这样做是因为我认为调度员的 CXF 输出拦截器会在 Body 周围从头开始构建信封。那是对的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:04:20.163

明白了！诀窍是将 PersistenceProvider（调度程序）中的调用方法返回的 javax.xml.transform.Source 转换为 DOMSource。这允许 CXF 正确地填充传出的肥皂信封主体。

问题解决了。完整的故事[在这里](http://cxf.547215.n5.nabble.com/Problem-on-the-way-back-to-the-client-CXF-WS-dispatch-td5719999.html)！

# github - 如何禁用我的 GitHub 帐户

> ID：13856073
> 
> 赞同：1
> 
> 时间：2012-12-13T08:48:34.450
> 
> 标签：github

我不久前创建了我的 GitHub 帐户，但我没有积极使用它，我想禁用它。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:53:08.787

您可以在此处删除您的帐户：[https ://github.com/settings/admin](https://github.com/settings/admin)

但是，此讨论与本网站无关。Stack Overflow 是针对编程问题的，而不是针对外部网站的技术支持问题。

# c# - IdnMapping::GetAscii C# Methode 是否有任何等效的 C/C 函数？

> ID：13856075
> 
> 赞同：0
> 
> 时间：2012-12-13T08:48:37.970
> 
> 标签：c#, c++, windows-ce

我正在尝试在 Wince 6.0 中将 C# 代码实现为 C/C++（无需安装 .NET Framework）。

在这段C#代码中，使用了IdnMapping::GetAscii方法，也需要在C/C++中进行转换。 [http://msdn.microsoft.com/en-us/library/system.globalization.idnmapping.getascii.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.idnmapping.getascii.aspx)

需要一个与 IdnMapping::GetAscii 等效的函数。

thnx 提示和帮助 =)

问候..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:06:28.327

You could try this:

1.  Getting length of string
2.  Initialize a new Unicode String with the pointer on the first element of your input
3.  Foreach sign in your string make a static_cast and copy this to your ASCII-string

    char* GetASCII(const wchar_t* wstr) { int count = wcslen(wstr); char* ascii = new char[count + 1];

    ```
    wchar_t* pwchr = const_cast<wchar_t*> (&wstr[0]);

    for(int j = 0; j < count; ++j)
    {
       ascii [j] = static_cast<char> (*pwchr);
       pwchr++;
    } 
    ascii [count] = '\0';
    return ascii ; 
    ```

    }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T21:08:21.940

“ascii”字符串在 punycode 中。

所以你需要寻找用于punycode转换的示例代码，例如，[https://www.example-code.com/cpp/punycode.asp](https://www.example-code.com/cpp/punycode.asp)

# extjs - Extjs 可滚动面板

> ID：13856076
> 
> 赞同：21
> 
> 时间：2012-12-13T08:48:50.003
> 
> 标签：extjs, extjs4

我有一个面板，可以在其中插入来自服务器的一些 HTML：

```
myPanel.update(response.responseText); 
```

但是，如果此文本太大，则不会出现任何滚动条来导航文本。

如何在此面板中配置垂直滚动条？

这是我的面板定义：

```
{
  xtype:'panel',
  width: '100%',
  height: 300,
  id:'mypanel'
}, 
```

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-13T08:52:03.280

基本上，您只需添加**[autoScroll](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-cfg-autoScroll)**属性，例如

```
autoScroll: true 
```

这是一个有效的**[JSFiddle](http://jsfiddle.net/sran/czrt6/3/)**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-13T09:39:09.753

...或者如果你总是想要一个[垂直滚动条](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-cfg-overflowY)

```
overflowY: 'scroll' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-13T14:36:31.430

实际上，您应该同时拥有两个属性：

```
autoScroll: 'true' 
```

和

```
height: 300 
```

他们一起工作，一个没有另一个不会产生滚动条。

# android - 如何修复多个屏幕中的图像大小？

> ID：13856080
> 
> 赞同：-1
> 
> 时间：2012-12-13T08:49:05.163
> 
> 标签：android, android-screen-support

在我的项目中存在 4 个可绘制文件夹，其中有相同的图像

我有 4 种布局的闪屏（小、大、特大）

![飞溅](../Images/0eb7af50f9c770d3d530626b772c3362.png)

在 xlarge 飞溅布局中，在中心我有另一个图像，但不能用与此相同的 res drawable-xhdpi 图像修复

![启动画面中](../Images/f75276105812e655b80a10e4a5c73e1e.png)

```
< merge xmlns:android="http://schemas.android.com/apk/res/android">
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/bg_logo" />

</ merge> 
```

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:53:33.447

在每个可绘制文件夹中，如果您想获得相同的结果，您必须存储不同的分辨率，或者您可以使用 1 个文件夹并调整此图片的大小。

要了解您需要什么尺寸，请查看以下内容：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:55:17.710

尝试将其添加到您的清单文件中：

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" 
        android:xlargeScreens="true"
        android:resizeable="true"/> 
```

希望它可以帮助你。

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T09:44:47.543

您可以为不同的屏幕使用 9 个补丁图像来使用该图像在 res 中创建可绘制文件夹并将您的 9 个补丁图像放在这里并在您的布局中设置此图像，这可能会对您有所帮助

# hibernate - 休眠中的更新查询

> ID：13856084
> 
> 赞同：0
> 
> 时间：2012-12-13T08:49:34.677
> 
> 标签：hibernate

我在休眠时面临更新 hql 查询的问题。

这是我的以下课程：

```
 --session configuration
     ExamResults examResults = new ExamResults();
     examResults.setTitle("cbse board jee");
     examResults.setId(2);
     String hql = "UPDATE EXAMRESULTS SET TITLE=:TITLE WHERE ID=:ID";
     Query query = session.createQuery(hql);
     query.setParameter("TITLE", examResults.getTitle());
     query.setParameter("ID", examResults.getId());
     int result = query.executeUpdate();
     System.out.println("Rows Effected=>"+result);

     session.save(examResults);

     tx.commit();

   }
} 
```

在运行课程时，我收到以下异常：

```
Exception in thread "main" org.hibernate.hql.ast.QuerySyntaxException: EXAMRESULTS is not mapped [UPDATE EXAMRESULTS SET TITLE=:TITLE WHERE ID=:ID]
    at org.hibernate.hql.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:181)
    ... 
```

我的豆类也在这里：

```
@Entity
@Table(name="EXAMRESULTS")
public class ExamResults implements Serializable{

    private int id;
private String title;
private String body1;
private String body2;
private Date resultdate;
private String affiliation;
private int isactive;
private String url;
private String imageurl;
//private CommonsMultipartFile imageurlimg;
private String metatitle;
private String metadescription;
private String metakeywords;
private Date createddate;

    --getters & setters 
```

解决问题的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:00:55.020

而不是`EXAMRESULTS`尝试使用`ExamResults`ie 实体的类名。您需要在 HQL 查询中使用类名而不是表名。因此将查询更新为：

```
UPDATE ExamResults e SET e.TITLE=:TITLE WHERE e.ID=:ID 
```

HQL 文档提到：

> 除了 Java 类和属性的名称之外，查询不区分大小写。所以 SeLeCT 和 sELEct 一样，和 SELECT 一样，但是 org.hibernate.eg.FOO 和 org.hibernate.eg.Foo 不同，foo.barSet 和 foo.BARSET 也不同。

文档：[http ://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#d5e2551](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#d5e2551)

# php - 创建 Joomla 测试和部署构建脚本

> ID：13856087
> 
> 赞同：2
> 
> 时间：2012-12-13T08:49:42.680
> 
> 标签：php, deployment, joomla, phing

我正在开发一个 Joomla 组件。我的 IDE 是 Eclipse。实际上我希望它在 JED（Joomla 扩展目录）上发布。

为了自动完成部署，我找到了一个很好的**Phing** -script，它能够创建 zip 和 tar 文件。为此，我使用Phing的**文件集功能来定义所有必需的文件。**

```
<fileset dir="${src}" id="adminfiles">
    <include name="admin/admin.compname.php" />
    <include name="admin/controller.php" />
    <include name="admin/gpl-3.0.txt" />
</fileset> 
```

现在我想使用这个文件列表将所有文件也复制到我的测试环境中。因此，我必须`admin/`从列表中的每个文件名中删除文件夹名称。是否有任何 Phing-Task 可以为我做到这一点。或任何正则表达式（uhahah）。

最好的问候 tria1312

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:30:33.250

我认为这与文件夹名称的“条带化”无关。你只是想复制一堆文件，对吧？

这会将所有带有 php 扩展名的文件从 admin 文件夹复制到您选择的文件夹中：

```
<copy todir="${testPath}/test" overwrite="true">
    <fileset dir="admin">
        <include name="*.php" />
    </fileset>
</copy> 
```

有关更多选项，请参阅[文件集类型](http://www.phing.info/docs/guide/stable/chapters/appendixes/AppendixD-CoreTypes.html#Fileset)。

# c# - 为选定的 Web 方法生成代理类

> ID：13856088
> 
> 赞同：0
> 
> 时间：2012-12-13T08:49:50.767
> 
> 标签：c#, asp.net, soap, wsdl

我有一个真正的大（暴露近 200 个 webmethods）asp.net web 服务。我正在开发第二个应用程序，它使用该服务的很少的 webmethods (2 webmethods)。当我使用 Visual Studio 生成第一个 Web 服务的代理类时，它会为所有 Web 方法生成它。有什么方法可以为选定的 Web 方法和仅在这些 Web 方法中使用的自定义类型生成代理类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:06:59.607

One way would be to do it manually.

It is still pretty easy to maintain, but of course more manual effort than using the automatic generation. Also disposing can be added in a good way.

```
public class ServiceProxy : ClientBase<IService>, IService>, IDisposable
{
  public Response DoAction(Request request)
  {
    return Channel.DoAction(request);
  }

  private bool disposed;

  protected virtual void Dispose(bool disposing)
  {
    if (!this.disposed)
    {
        if (disposing)
        {
            if (base.State == CommunicationState.Faulted)
            {
                this.Abort();
            }
            else if (base.State != CommunicationState.Closed)
            {
                try
                {
                    this.Close();
                }
                catch (Exception exc)
                {
                    this.Abort();
                }
            } 
            disposed = true;
        }
    }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:03:58.620

我不相信这是可能的。然而，经典的解决方法是使用外观模式，只向您的应用程序公开那些感兴趣的方法，并直接委托给真正的 Web 服务方法。

例如：

```
public interface IWebServiceWrapper
{
    void DoStuffWith(Something something);

    SomethingElse GetSomeThingElse(int id);

}

public class ServiceWrapper : IWebServiceWrapper
{
    private TheRealWebService _realWebService = new TheRealWebService();

    public void DoStuffWith(Something something)
    {
        _realWebService.DoStuffWith(something);
    }

    public SomethingElse GetSomeThingElse(int id)
    {
        _realWebService.GetSomeThingElse(id);
    }

} 
```

# datagridview - 如何在 C#.net win 应用程序中为 Tabstop 属性 = false 放置一列 datagridview？

> ID：13856089
> 
> 赞同：0
> 
> 时间：2012-12-13T08:50:02.510
> 
> 标签：datagridview

我有一个包含 3 列的 datagridview，我想要 datagridview 中的第一列没有**焦点**，请任何人都可以帮助我 plzzz 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:52:34.460

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace DataGridViewValidation.Controls
{
    public class DataGridViewTabColumnFalse : DataGridView
    {
        protected override bool ProcessDataGridViewKey(KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Tab)
            {
                if (CurrentCell.ColumnIndex == 0)
                {
                    e.SuppressKeyPress = true;
                    return true;
                }
            }
            return base.ProcessDataGridViewKey(e);
        }

        protected override bool ProcessDialogKey(Keys keyData)
        {
            if (keyData == Keys.Tab)
            {
                if (CurrentCell.ColumnIndex == 0)
                {
                    return true;
                }
            }

            return base.ProcessDialogKey(keyData);
        }
    }
} 
```

# nasm - 有人可以帮助理解为什么这会打印错误的文件名吗？

> ID：13856094
> 
> 赞同：2
> 
> 时间：2012-12-13T08:50:22.160
> 
> 标签：nasm, osdev

我正在编写基于 FAT12 文件系统的引导扇区。过了一会儿，我想到了一个问题。

```
.FindBootSectorTwo:
    push SI
    push DI
    push CX
    mov CX, 11
    mov SI, BootloaderSTG2
    rep cmpsb
    pop CX
    pop DI
    pop SI
    je LOAD_BOOTLOADER_STG2
    nop
    add DI, 32
    loop .FindBootSectorTwo
    jmp ERROR_NOT_FOUND 
```

此标签搜索名为 BLS2.SYS 的文件，如果找到，则跳转到 LOAD_BOOTLOADER_STG2 标签。LOAD_BOOTLOADER_STG2 标签的开头：

```
LOAD_BOOTLOADER_STG2:
    push SI
    push CX
    push DI
    ;sub DI, 32
    mov SI, DI
    mov CX, 11
    call Printname
    pop DI
    pop CX
    pop SI
    pop DS 
```

如果我尝试从 DI 中减去 32，它会给我正确的文件名 - BLS2.SYS，但如果我不这样做，我只会得到一堆空格。这里可能是什么问题？这是一个错误，程序找到了错误的文件，还是我只是不明白这里的东西？我在 x86 机器上的 Bochs 上启动此代码。PS 这里是 LOAD_ROOT 标签和 .FindBootSectorTwo。

```
LOAD_ROOT: ; in this label I search for an entry to Root directory, where my file is. When I find the root directory, I load it at: 0x0800:0x0000
mov [BS_DriveNumber], DL
mov AX, 0x0000
mov SS, AX
mov SP, 0x7C00
mov DS, AX
mov ES, AX
xor DX, DX
movzx AX, [BPB_NumberOfFATs]
mov BX, [BPB_SectorsPerFAT]
mul BX ; BX = NumFATS * SecPerFAT
mov BX, AX
add BX, [BPB_ReservedSectors] ; BX now contains LBA value aka NumFATS * SecPerFAT + ResvSecs
push DI
push ES
mov AX, [BPB_RootEntries]
shl AX, 5
xor DX, DX
div WORD[BPB_BytesPerSector] ; AL = (RootEntries * 32) / BytesPerSec
mov AH, 0x0002
push AX
mov AX, 0x0800
mov ES, AX ; ES = 0x0800
pop AX
mov DI, 0x0000
call ReadSectors
mov CX, [BPB_RootEntries]
push DS
push AX
mov AX, 0x0800
mov ES, AX
mov DS, AX
pop AX
mov DI, 0x0000
.FindBootSectorTwo: ; here I search for a file called BLS2.SYS (at 0x0800:0x0000), when I find it, the program jumps to LOAD_BOOTLOADER_STG2
    push SI
    push DI
    push CX
    mov CX, 11
    mov SI, BootloaderSTG2
    rep cmpsb
    pop CX
    pop DI
    pop SI
    je LOAD_BOOTLOADER_STG2
    nop
    add DI, 32
    loop .FindBootSectorTwo
    jmp ERROR_NOT_FOUND 
```

如果您需要任何额外的代码和平 - 告诉我。我会给你任何你需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:14:33.127

代码从 DI 中减去 32，因此指向文件名字符串的开头。然后你可以相应地打印它。

# liferay - 使用 Liferay API 创建组织

> ID：13856099
> 
> 赞同：3
> 
> 时间：2012-12-13T08:50:34.407
> 
> 标签：liferay

以下哪个工具适合使用 Liferay API 创建组织。

i) `OrganizationUtil`
ii) `OrganizationServiceUtil`
iii)`OrganizationLocalServiceUtil`

基本上，我想知道这三个之间的区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:47:47.613

> i) 组织用途：`com.liferay.portal.service.persistence.OrganizationUtil`

持久层中的类直接与数据库对话，因此很适合从服务层使用，如果您关心事务，也可以使用。

以下是[文档](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/persistence/OrganizationUtil.html "Liferay 6.1 com.liferay.portal.service.persistence.OrganizationUtil 的官方文档")中的文字：

> 组织服务的持久性实用程序。此实用程序包装了 OrganizationPersistenceImpl 并提供对数据库的直接访问以进行 CRUD 操作。此实用程序只能由服务层使用，因为它必须在事务中运行。切勿在 JSP、控制器、模型或其他前端类中访问此实用程序。

* * *

> ii) 组织服务工具：`com.liferay.portal.service.OrganizationServiceUtil`

它可以从任何层调用。此类还进行权限检查（基于 Liferay 中给出的权限），这在某些情况下可能很有用。这也可以通过网络服务使用。

那么让我们看看 liferay 的[文档](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/OrganizationServiceUtil.html "Liferay 6.1 com.liferay.portal.service.OrganizationServiceUtil 的官方文档")是怎么说的：

> 组织远程服务的实用程序。该实用程序包装了 com.liferay.portal.service.impl.OrganizationServiceImpl 并且是在远程服务器上运行的应用程序层代码中服务操作的主要访问点。
> 
> 这是一个远程服务。由于可以远程访问此服务，因此该服务的方法应根据传播的 JAAS 凭证进行安全检查。

* * *

> iii) 组织本地服务实用程序：`com.liferay.portal.service.OrganizationLocalServiceUtil`

如果您不想进行任何权限检查，也可以使用此方法。`OrganizationServiceUtil`最终调用该层`localService`。

Liferay 的[文档](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/OrganizationLocalServiceUtil.html "Liferay 6.1 com.liferay.portal.service.OrganizationLocalServiceUtil 的官方文档")：

> 组织本地服务的实用程序。该实用程序包装了 com.liferay.portal.service.impl.OrganizationLocalServiceImpl 并且是在本地服务器上运行的应用程序层代码中服务操作的主要访问点。
> 
> 这是本地服务。此服务的方法不会基于传播的 JAAS 凭据进行安全检查，因为只能从同一 VM 内访问此服务。

### 结论

1.  如果您关心事务，即必须更新事务中的多个表，请使用 OrganizationUtil，然后使用它。
2.  如果您在 liferay 之外创建组织或者如果您需要权限检查并且您不关心事务（即使用您的自定义代码进行事务），请使用 OrganizationServiceUtil
3.  如果您不使用 Web 服务并且不关心事务或权限，请使用 OrganizationLocalServiceUtil。

希望这能给你一个公平的想法。如果还不清楚，请告诉我。

# css - 有没有办法通过打印 CSS 显示 CSS 背景图像？

> ID：13856101
> 
> 赞同：1
> 
> 时间：2012-12-13T08:50:48.390
> 
> 标签：css, printing

> **可能重复：**
> [在 IE 中打印背景图像而不启用“打印背景颜色和图像”</a>](https://stackoverflow.com/questions/3197278/print-background-image-in-ie-without-enable-print-background-colors-and-images) [如何使用 css 获取要打印的背景图像？](https://stackoverflow.com/questions/5949897/how-to-get-a-background-image-to-print-using-css)

我想打印来自 CSS 的所有背景图像，使用`background`.

我没有`div`对 HTML 进行任何隐藏，所以有人可以建议另一种解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T08:54:38.020

没有办法强制背景图像出现在打印件上。

默认情况下，大多数浏览器在打印时会忽略背景。

由用户指定是否要包含背景，而不是网站。

* * *

**谷歌浏览器**

目前我认为用户根本不可能打印背景。

有关请求此功能的用户的更多信息，请参阅此 Google 线程：

[http://productforums.google.com/forum/#!topic/chrome/OFAAdLqAuT4%5B1-25%5D](http://productforums.google.com/forum/#!topic/chrome/OFAAdLqAuT4%5B1-25%5D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:01:15.090

首先，我面前的答案是绝对正确的。无法在任何浏览器中强制从 CSS/HTML/Javascript 进行后台打印。该设置必须由用户完成（或您公司的全局 Windows 域策略设置或 linux 等效项）。

但是，我将为您提供一个链接，其中包含允许您打开后台打印的每个浏览器的正确设置：http: [//support.lexercise.com/entries/382786-enable-background-image-printing-in-your -浏览器](http://support.lexercise.com/entries/382786-enable-background-image-printing-in-your-browser)

# jquery-ui - 数据表和 jQuery UI 手风琴

> ID：13856102
> 
> 赞同：1
> 
> 时间：2012-12-13T08:50:48.430
> 
> 标签：jquery-ui, datatables, jquery-ui-accordion

我的页面上有一些手风琴，里面是桌子。我想使用 jQuery 数据表，但只显示没有按钮和搜索字段的基本表。

如果我在手风琴之外使用数据表，它工作正常。

我认为数据表会被覆盖，因为当我打开一个新的手风琴时它们会出现大约一秒钟。

有没有人有解决方案？

编辑：这是我的一些代码

```
$(document).ready(function() {
$("#accordion").accordion({
    create: function(e,ui) {
        loadList();  

    },
    beforeActivate: function(e, ui) {
        switch(ui.newHeader.next().attr("id")){
            case "list": { 

                loadList();
                $('.tablesort').dataTable();

                break;
            }
            case "add": { 
                loadAdd();
                break;

            default: {
            }
        }
    }
}); 
```

使用 loadList 和 loadAdd 加载手风琴的内容

# ios - 谁能解释一下这些基本的 iOS 代码行

> ID：13856103
> 
> 赞同：0
> 
> 时间：2012-12-13T08:50:53.157
> 
> 标签：ios

我正在做一个 Apple Developer Tutorial，我有几个关于底部代码行的基本问题：

1.  这些代码行中的任何一行都没有分配和初始化它们创建的对象？这是因为对象在创建时就被赋值了吗？

2.  dequeueReusableCellWithIdentifier 方法 - 此方法返回 nil 的唯一方法是是否没有与单元标识符参数同名的单元对象？如果池中没有可以重用的单元格，它会创建一个单元格还是返回 nil 呢？文档说明该方法返回 - 具有关联标识符的 UITableViewCell 对象，如果可重用单元队列中不存在此类对象，则返回 nil。

提前感谢您的帮助

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

BirdSighting *sightingAtIndex = [self.dataController objectInListAtIndex:indexPath.row]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:00:00.973

从评论中......

您发布的代码行实际上并没有**创建**任何东西。他们获得对在其他地方创建的事物的引用。其他东西——无论是你的代码还是框架代码——已经用 alloc/init 实例化了它们，现在给你访问权限。

在表格视图示例中，如果您在表格视图中注册了一个类/笔尖，那么它会为您创建单元格。如果没有，那么您在`dequeueReusableCellWithIdentifier:`返回时创建它`nil`。无论哪种方式，当它返回非零时，它都是在某个时间点创建的对象，而不是您的程序当时所在的那个点。

（self.dataController 不是我认识的东西，但必须应用相同的逻辑......它的列表是由你之前所做的事情预先填充的，或者它正在生成东西并按照你的要求将它们提供给你。）

# mysql - 使用 LOAD DATA INFILE 在 Mysql 中导入数据时的混淆行为

> ID：13856105
> 
> 赞同：0
> 
> 时间：2012-12-13T08:51:02.110
> 
> 标签：mysql, load-data-infile

我正在尝试将我的数据表单文本文件导入 mysql 数据库。我使用了 LOAD DATA INFILE 语句，但没有成功。

我的文本文件如下，字段以“\t”结尾，行以“\n”结尾：

```
2102308562  2102298734  2   75
2102308562  2409206932  2   15
2102308562  1706425142  2   9
2102308562  2817061695  2   6
2102308562  1738818365  2   52
2102308562  2102304314  2   16
2102308562  1732994262  2   2
2102308562  1952263417  2   1 
```

我要插入的表由以下语句定义：

```
CREATE TABLE `t_user_action` (
    `Subject_user_id` INT(32) UNSIGNED NOT NULL COMMENT ,
    `Object_user_id` INT(32) UNSIGNED NOT NULL COMMENT ,
    `Action_id` INT(32) UNSIGNED NOT NULL COMMENT ,
    `Action_count`  INT(32) UNSIGNED NOT NULL COMMENT ,
    PRIMARY KEY (`Subject_user_id`,`Object_user_id`,`Action_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

我的导入语句是这样的：

```
LOAD DATA INFILE 'UserRetweet.txt' INTO TABLE t_user_action CHARACTER SET utf8 
```

我的问题是在加载数据 infile 语句执行后。第一行第一列的值变成了0，但是其他的值都是对的。

我在互联网上搜索并没有得到解决方案！感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:03:42.830

您可能在 UTF-8 文件的开头有[字节顺序标记。](http://en.wikipedia.org/wiki/Byte_order_mark)

# extjs4 - 相对组件查询选择器

> ID：13856110
> 
> 赞同：0
> 
> 时间：2012-12-13T08:51:23.627
> 
> 标签：extjs4, extjs4.1, deftjs

ExtJS 4.1 和 DeftJS 0.6.8

文件说`"References to view components can be established via the control annotation and view-relative component query selectors"`

文档示例：

```
control: {
        submitButton: 'panel > button[text="Submit"]'
    } 
```

因此，在我的情况下，我想访问这样嵌套的菜单按钮：

```
 ...
  extend: 'Ext.tree.Panel',
  lid: 'mytreepanel',

  dockedItems: [{
     xtype: 'toolbar',
     lid: 'mybbar',
     items: [{
        xtype: 'splitbutton',
        lid: 'mysplitbutton',
        menu: {
           lid: 'mymenu',
           items: [{
              lid: 'createFolder',
              text: 'Create folder',
           }]
        }
     }]
  }] 
```

我的尝试：

```
control: {
         createFolder: {
            selector : '[lid=createFolder]',
         // selector : 'menu[lid=createFolder]',
         // selector : 'mytreepanel > menu[lid=createFolder]',
         // selector : 'treepanel > toolbar > splitbutton > menu[lid=createFolder]',
            listeners: {
               click: 'createFolder'
            }
         }
} 
```

没有任何效果。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:19:01.797

我不知道您在哪个文档中找到了您的示例 ( `control: { submitButton: 'panel > button[text="Submit"]' }`)，但它对我根本不起作用。

通过遵循[sencha 文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller)，我创建了以下控制器类：

```
Ext.define('Pandora.controller.Main', {
    extend: 'Ext.app.Controller',

    init: function() {
        this.control({
            '[lid=mytreepanel] menu[lid=mymenu] menuitem[lid=createFolder]': {
                click: function(){ alert(123); }
            }
        });
    }
}); 
```

有了这个`control`点击的定义是有效的。还要注意如何附加点击处理程序。您必须提供回调，而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:48:28.227

解决方案是添加`mixins: ['Deft.mixin.Controllable']`我忘记使视图可控的内容。

所以现在一切正常：

```
createFolder: {
            selector : '[lid=createFolder]',
            listeners: {
               click: 'createFolder'
            }
         } 
```

# asp.net-mvc-3 - 带有实体框架设计的 ASP.NET MVC 3

> ID：13856113
> 
> 赞同：0
> 
> 时间：2012-12-13T08:51:47.243
> 
> 标签：asp.net-mvc-3, entity-framework

我正在使用 MVC 3 和 Entity Framework 4.1 开发一个站点。我是使用实体框架进行 MVC 3 开发的新手，因此希望在一些设计决策方面有所帮助。我的网站只有大约 15 个用户可以访问的页面。而不是每个页面都有控制器 - 我将只有一个控制器类 - （但每个页面都有模型）。在控制器类中，我会将每个页面的方法保存在区域中，以便它们易于扩展。因此，例如，我将在具有 RedirectToAction 主页的 SiteController 中有一个 LogOn 方法 - 而 Hompage() 方法将存在于主页区域的我的 SiteController 中。

我已经有一个同事设计的数据库（数据库中有大约 12 个左右的表）-我一直在研究 Entity Framework 如何从中创建代码-但是建议将此代码保存在 DAL 文件夹中吗？每个页面还有我自己的模型吗？例如 - 我有一个将保存在数据库中的文件名。在我的主页上，我想显示 FileName - 在我的主页模型上有一个字符串 FileName，然后在 HomePage() 视图方法中，model.FileName 是从 db.context 设置的（从 db 获取文件名）。

那么最好在我的 SiteController 的实例化点实例化所有数据库上下文，还是只在需要它们的方法中实例化它们？即 - 如果主页视图需要表 1 和表 2，那么在 Hompage() 方法中新建它们，如果另一个视图方法需要来自表 3/4 的数据或必须将数据保存到表 3/4，那么在该方法开始时新建它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:01:44.847

你写的第一个观察：

> 而不是每个页面都有控制器 - 我打算只有一个控制器类

我完全不同意这一点。出于多种原因。

谷歌一点关于以下主题：

*   SRP（单一职责原则）又名 SoC（关注点分离）
*   IoC（控制反转）
*   Spot（单点真理）
*   LSP（里氏替换原则）
*   OCP - 开闭原则

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T16:00:58.327

1.  使用 EF Power 工具对数据库进行逆向工程，这将创建文件夹结构。
2.  每页保留一个控制器。除非这些页面是真正属于同一过程的向导类型数据输入方案的一部分，否则将它们分成多个控制器。
3.  右键单击，添加新控制器 - 使用内置脚手架使用实体框架上下文生成控制器（确保在上述步骤 1 之后构建应用程序，在“添加控制器”对话框中选择上下文类）。它将为您生成视图和控制器。对您要为其输入数据的每个项目重复此操作。
4.  您的上下文将被实例化为已经为您创建的控制器的一部分 - 您不需要做任何其他事情（包括处置 - 生成的代码也会为您处置它，因为控制器已处置）

# asp.net-mvc - 如何处理 MVC 视图中的“魔术字符串”，例如元素 id:s？

> ID：13856114
> 
> 赞同：2
> 
> 时间：2012-12-13T08:51:48.173
> 
> 标签：asp.net-mvc, asp.net-mvc-views, magic-string

在我的 MVC 视图中，我经常需要从 JavaScript 中引用各种元素，为此我为这些元素定义了 id 属性。这通常与更新各种容器元素内容的 Ajax 调用结合使用。

一个简短的例子（剃刀）：

```
<table id="PersonList">
    ...
</table>
<div id="PersonDetails">
    <!-- This would be loaded dynamically using Ajax -->
    <input type="hidden" name="CurrentPersonId" value="@Model.PersonId">
    ...
</div> 
```

这包含三个“魔术字符串”：“PersonList”、“PersonDetails”和“CurrentPersonId”。Ajax 调用可能如下所示：

```
$('#PersonDetails').load('@Url.Action("GetPersonDetails")', { PersonId: ... }); 
```

再次出现魔术字符串“PersonDetails”。

不好！

任何人都可以提出一些“最佳实践”来在一个地方定义这些魔法字符串并将它们用于 1）视图，2）最好是实现 Ajax 调用等的静态 JavaScript 文件，以及 3）CSS 文件？

我在想，也许 _Layout.cshtml 可以包含一个局部视图，该视图定义了该控制器甚至特定操作的魔术字符串。它将检查调用它的控制器和/或操作，并基于此调用适当的局部视图。我已经为 .css 和静态 .js 做了类似的事情，让我简单地添加 Person.css 并自动将其包含在 Person 控制器的所有视图中。

部分视图会做这样的事情：

```
@{
    const string PersonListId = "PersonList";
    const string PersonDetailsId = "PersonDetails";
    const string CurrentPersonIdName = "CurrentPersonId";
}
<script type="text/javascript">
    NamesAndIds = {};
    NamesAndIds.PersonListId = '@Html.Raw(PersonListId)';
    NamesAndIds.PersonDetailsId = '@Html.Raw(PersonDetailsId)';
    NamesAndIds.CurrentPersonIdName = '@Html.Raw(CurrentPersonIdName)';
</script> 
```

这应该让 Razor 代码使用 C# 字符串 consts 生成适当的 HTML，并且静态 JavaScript 文件可以引用 jQuery 选择器等中的 NamesAndIds。（假设在局部视图中定义的 consts 将在调用视图中可用，我对此表示怀疑（避风港'还没有检查过）......我不知道如何在.css文件中使用它们。

有更好的建议吗？你如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:23:19.350

我希望有人能想出更好的东西，但这至少是一些东西。

在主（非部分）视图中，我在顶部有一个部分，它定义了我需要在 C#、HTML 和 JavaScript 中的多个位置使用的 id 和名称：

```
@{
    const string PersonListId = "PersonList";
    const string PersonDetailsId = "PersonDetails";
    const string CurrentPersonIdName = "CurrentPersonId";
} 
```

在底部，我有一个脚本部分，将字符串分配给合适的命名空间容器对象：

```
<script type="text/javascript">
    MyNamespace = {};
    MyNamespace.Ids = {};
    MyNamespace.Names = {};
    MyNamespace.Ids.PersonList = '@Html.Raw(PersonListId)';
    MyNamespace.Ids.PersonDetails = '@Html.Raw(PersonDetailsId)';
    MyNamespace.Names.CurrentPersonId = '@Html.Raw(CurrentPersonIdName)';
</script> 
```

在每个引入了我需要通过 id 或名称引用的其他项目的部分视图中，我添加了类似的代码来扩展`MyNamespace.Ids`并`MyNamespace.Names`使用所需的字符串。

现在我可以在 Razor 视图代码中使用 C# 字符串常量来生成具有正确 id 和名称的标记，并且我可以编写引用`MyNamespace.Ids`和`MyNamespace.Names`查找正确 id 和名称的常规静态 JavaScript 文件，例如在 jQuery 选择器中。

我还为我的 Ajax 调用使用的操作 URL 添加了类似的东西，并将它们放入`MyNamespace.Urls`：

```
MyNamespace.Urls.GetPerson = '@Html.Raw(Url.Action("GetPerson"))'; 
```

这并不理想，但它直截了当，解决了散落在各处的魔法弦最紧迫的问题。它不会在编译时检测到错误，但是重命名项目将需要在一个地方重命名一个字符串，如果我重命名或拼写错误`MyNamespace.Ids.Something`，它至少会生成一个运行时 JavaScript 错误，可以在 JS 控制台或类似设备中看到.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:54:09.710

对于操作和文件名（js、css），请使用[T4MVC](http://t4mvc.codeplex.com/)。

> T4MVC 是用于 ASP.NET MVC 应用程序的 T4 模板，可创建强类型帮助程序，从而消除在许多地方使用文字字符串。

我不会担心 ids 和 css 类名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T08:56:26.153

尝试定义自定义路线

```
PeopleLists/{PeopleList}/Person/{PersonID} 
```

然后您的网址将如下所示

```
http://www.mysite.com/PeopleLists/Friends/Person/Pete 
```

# google-api-ruby-client - 如何更改可恢复上传的 chunk_size？

> ID：13856117
> 
> 赞同：0
> 
> 时间：2012-12-13T08:51:56.140
> 
> 标签：google-api-ruby-client

我需要将一些大文件（大约 1Gb）上传到谷歌驱动器。我使用 google-api-client(ruby) 0.5.0 版：

```
media = Google::APIClient::UploadIO.new(file_name, mimeType, original_name)
result = client.execute!(
        :api_method => client.service.files.insert,
        :body_object => file,
        :media => media,
        :parameters => {
            'uploadType' => 'resumable',
            'alt' => 'json'}) 
```

我希望我的客户将大文件拆分为部分并将这些部分上传到驱动器上。但我在日志中看到，那个客户端只发送一个大块来驱动。这是小日志示例：

> 内容长度：“132447559” 内容范围：“字节 0-132447558/132447559”

如何使用 google-api-client 分块上传大文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:59:27.583

预期用途是尝试将文件上传到单个块中。总的来说，这种方式更有效/更快。但是在某些情况下分块更可取，因此如果您出于某种原因需要对上传进行分块，只需设置 chunk_size 属性：

```
media = Google::APIClient::UploadIO.new(file_name, mimeType, original_name)
media.chunk_size = 1000000 # 1mb chunks
result = client.execute!(....) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T23:36:22.827

我使用的是 0.7.1 版的 API，尽管我知道我们现在应该使用 0.9 版，因为旧版本与 Google[文档](https://developers.google.com/youtube/v3/code_samples/ruby)中的 Ruby 示例相匹配。

我不得不求助于分块上传，因为我在 httpclient 库中遇到错误，抱怨文件太大而无法转换为整数！

不幸的是，使用@stevebazyl 对我不起作用，因为它只上传第一个块，然后抛出一个`TransmissionError`. 这似乎在 google-api-ruby-client 代码中，特别是方法`Google::APIClient`中的类`execute!`。它似乎没有处理 308 的 HTTP 状态，这是可恢复上传在需要下一个块时返回的状态。我对代码做了这个：

```
when 200...300, 308
  result 
```

（见[api_client.rb](https://github.com/google/google-api-ruby-client/blob/google-api-client-0.7.1/lib/google/api_client.rb#L601)）

并使用类`#send_all`中的方法，`ResumableUpload`就像[文档](https://developers.google.com/youtube/v3/code_samples/ruby#upload_a_video)中的示例代码一样，它对我有用。所以除了@stevebazyl 代码，我还有：

```
media = Google::APIClient::UploadIO.new(opts[:file], 'video/*')
media.chunk_size = 499200000

videos_insert_response = client.execute!(
  :api_method => youtube.videos.insert,
  :body_object => body,
  :media => media,
  :parameters => {
    :uploadType => 'resumable',
    :part => body.keys.join(',')
  }
)

videos_insert_response.resumable_upload.send_all(client) 
```

# iphone - 比较数组 ios

> ID：13856118
> 
> 赞同：-1
> 
> 时间：2012-12-13T08:52:00.433
> 
> 标签：iphone, ios, arrays, ipad

如何比较 2 个具有不同值的数组数组一个有单词，另一个有图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:51:31.970

```
NSDictionary *dict = [NSDictionary dictionaryWithObjects:array2 forKeys:array1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:22:55.303

我认为您需要使用`NSDictionary`. 这就是你这样做的方式（使用新的 Objective C 文字语法）

```
NSDictionary *dictionary = @{
        @"dog" : @"dog.jpg", 
        @"apple" : @"apple.jpeg",
        @"clown" : @"clown.gif"
}; 
```

要从此字典中检索“dog”的图像文件名，请执行以下操作：

```
NSString *fileName = dictionary[@"dog"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:23:49.533

单击按钮时，您可以简单地获取该值并搜索图像数组以获取匹配的图像名称，例如，

```
NSString *selValue = @"dog";
for (NSString *obj in imagesArray) {
    if ([obj rangeOfString:selValue].location != NSNotFound) {
        NSString *imageName = obj;
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:15:17.977

这不是完全符合您要求的代码，**可以在**您拥有图像时用作创意。

**假设您的单词和图像在同一索引中**

我刚刚用名为 A.jpg 的字符串实现了类似的情况，想法保持不变，您需要相应地进行转换。

```
NSMutableArray *words=[[NSMutableArray alloc]initWithObjects:@"A",@"B",@"C",@"D", nil];
NSMutableArray *images=[[NSMutableArray alloc]initWithObjects:@"A.jpg",@"B.jpg",@"C.jpg",@"D.jpg", nil];

id selectedWord=@"C";//This is storing which word you have selected
id selectedImage=[images objectAtIndex:[words indexOfObject:selectedWord]];//this will store the image
NSLog(@"%@",selectedImage);//now you can display the image in imageview 
```

# 如果文字和图像没有任何顺序

```
//words array is of no use, you can simply find which word you selected by extracting before "." , but as I am not aware of exact requirement I have left words array.
NSMutableArray *words=[[NSMutableArray alloc]initWithObjects:@"A",@"B",@"C",@"D", nil];
NSMutableArray *images=[[NSMutableArray alloc]initWithObjects:@"B.jpg",@"D.jpg",@"C.jpg",@"A.jpg", nil];

id selectedWord=@"B";

NSInteger indexOfSelectedWord;
for (NSString *imageName in images) {

    if ([[[imageName componentsSeparatedByString:@"."]objectAtIndex:0]isEqualToString:selectedWord]) {
        indexOfSelectedWord=[images indexOfObject:imageName];
    }
}

id selectedImage=[images objectAtIndex:indexOfSelectedWord];

NSLog(@"%@ & %@",selectedWord ,selectedImage); 
```

# matplotlib - 在 cartopy 中设置跨越日期变更线的地图

> ID：13856123
> 
> 赞同：15
> 
> 时间：2012-12-13T08:52:05.480
> 
> 标签：matplotlib, cartopy

我收到了以下电子邮件，并希望确保每个人都能获得此问题的答案：

* * *

你好，

我想使用 cartopy 设置一个简单的纬度经度图，它穿过日期变更线，左侧显示东亚，右侧显示北美西部。以下谷歌地图大致是我所追求的：

[https://maps.google.co.uk/?ll=56.559482,-175.253906&spn=47.333523,133.066406&t=m&z=4](https://maps.google.co.uk/?ll=56.559482,-175.253906&spn=47.333523,133.066406&t=m&z=4)

![谷歌地图截图](../Images/f12537fdae3735a7f2067babf55f0b3a.png)

这可以用 Cartopy 完成吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-13T09:58:34.177

好问题。*这可能会一次又一次地出现，所以在实际*回答您的具体问题之前，我将逐步完成。为了将来参考，以下示例是使用 cartopy v0.5 编写的。

首先，重要的是要注意默认的“纬度经度”（或更技术上是 PlateCarree）投影在 -180 到 180 的正向范围内工作。这意味着您无法*绘制*超出此范围的标准 PlateCarree 投影。这有几个很好的原因，其中大部分归结为这样一个事实，即在投影矢量和栅格（例如简单的海岸线）时，cartopy 必须做更多的工作*。*不幸的是，您尝试制作的情节正是需要此功能。为了将此限制放入图片中，默认的 PlateCarree 投影如下所示：

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt

proj = ccrs.PlateCarree(central_longitude=0)

ax1 = plt.axes(projection=proj)
ax1.stock_img()
plt.title('Global')

plt.show() 
```

![全球板块](../Images/22d51cb5c7dee589884383b88183fd13.png)

您可以在此地图上绘制的任何单个矩形都可以合法地放大区域（这里有一些更高级的代码，但图片值 1000 字）：

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt
import shapely.geometry as sgeom

box = sgeom.box(minx=-90, maxx=45, miny=15, maxy=70)
x0, y0, x1, y1 = box.bounds

proj = ccrs.PlateCarree(central_longitude=0)

ax1 = plt.subplot(211, projection=proj)
ax1.stock_img()
ax1.add_geometries([box], proj, facecolor='coral', 
                   edgecolor='black', alpha=0.5)
plt.title('Global')

ax2 = plt.subplot(212, projection=proj)
ax2.stock_img()
ax2.set_extent([x0, x1, y0, y1], proj)
plt.title('Zoomed in area')

plt.show() 
```

![全球地图，第二张放大地图](../Images/dfa72d3818691eafc137c54c9c947c54.png)

不幸的是，您想要的绘图需要 2 个具有此投影的矩形：

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt
import shapely.geometry as sgeom

box = sgeom.box(minx=120, maxx=260, miny=15, maxy=80)

proj = ccrs.PlateCarree(central_longitude=0)

ax1 = plt.axes(projection=proj)
ax1.stock_img()
ax1.add_geometries([box], proj, facecolor='coral', 
                   edgecolor='black', alpha=0.5)
plt.title('Target area')

plt.show() 
```

![全局图上的目标矩形](../Images/e3f464f8b7664949513905f2497be682.png)

**因此，无法使用标准 PlateCarree 定义绘制跨越日期变更线的地图。相反，我们可以更改 PlateCarree 定义的中心经度**，以允许在我们的目标区域中绘制一个框：

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt
import shapely.geometry as sgeom

box = sgeom.box(minx=120, maxx=260, miny=15, maxy=80)
x0, y0, x1, y1 = box.bounds

proj = ccrs.PlateCarree(central_longitude=180)
box_proj = ccrs.PlateCarree(central_longitude=0)

ax1 = plt.subplot(211, projection=proj)
ax1.stock_img()
ax1.add_geometries([box], box_proj, facecolor='coral', 
                   edgecolor='black', alpha=0.5)
plt.title('Global')

ax2 = plt.subplot(212, projection=proj)
ax2.stock_img()
ax2.set_extent([x0, x1, y0, y1], box_proj)
plt.title('Zoomed in area')

plt.show() 
```

![两个中心经度为 180 的 PlateCarre 图，一个全局，一个放大到目标区域](../Images/4ff911c42ca7a059f9a34b84de7757c1.png)

希望这向您展示*了*实现目标地图必须做的事情，上面的代码可能有点复杂，以实现您的目标，所以稍微简化一下，我编写的用于生成您想要的绘图的代码将类似于：

```
import cartopy.feature
import cartopy.crs as ccrs
import matplotlib.pyplot as plt    

ax = plt.axes(projection=ccrs.PlateCarree(central_longitude=180))
ax.set_extent([120, 260, 15, 80], crs=ccrs.PlateCarree())

# add some features to make the map a little more polished
ax.add_feature(cartopy.feature.LAND)
ax.add_feature(cartopy.feature.OCEAN)
ax.coastlines('50m')

plt.show() 
```

![最终目标图](../Images/73c900c8c709a5f84d53dd5e0cda7d4d.png)

这是一个很长的答案，希望我不仅回答了这个问题，而且使地图制作和地图绘制的一些更复杂的细节更加清晰，以帮助解决您未来可能遇到的任何问题。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-05T16:25:03.040

有关上述benjimin评论的更多详细信息，

```
import numpy as np
import matplotlib.pyplot as plt
import cartopy.crs as ccrs
from cartopy.mpl.gridliner import LONGITUDE_FORMATTER, LATITUDE_FORMATTER
from matplotlib.ticker import AutoMinorLocator, FixedLocator, MultipleLocator

def map_common(ax1,gl_loc=[True,True,False,True],gl_lon_info=range(-180,180,60),gl_dlat=30):

    ax1.coastlines(color='silver',linewidth=1.)

    gl = ax1.gridlines(crs=ccrs.PlateCarree(), draw_labels=True,
                       linewidth=0.6, color='gray', alpha=0.5, linestyle='--')

    gl.ylabels_left = gl_loc[0]
    gl.ylabels_right = gl_loc[1]
    gl.xlabels_top = gl_loc[2]
    gl.xlabels_bottom = gl_loc[3]

    gl.xlocator = FixedLocator(gl_lon_info)
    gl.ylocator = MultipleLocator(gl_dlat)
    gl.xformatter = LONGITUDE_FORMATTER
    gl.yformatter = LATITUDE_FORMATTER
    gl.xlabel_style = {'size': 11, 'color': 'k'}
    gl.ylabel_style = {'size': 11, 'color': 'k'}

lon_boundary=np.arange(-240,-60,1.)
lat_boundary=np.arange(15,75,1.)
data=np.ones([lat_boundary.shape[0]-1,lon_boundary.shape[0]-1]) ## Data dimension is 1 less than boundaries
data=data*lat_boundary[:-1,None]

lon_offset=-150  ##
x,y=np.meshgrid(lon_boundary-lon_offset,lat_boundary)

fig=plt.figure()
fig.set_size_inches(7.5,5) ## (xsize, ysize)
ax1=fig.add_subplot(111,projection=ccrs.PlateCarree(central_longitude=lon_offset))
ax1.set_extent([-250,-50,10,80],crs=ccrs.PlateCarree())

props=dict(vmin=0,vmax=90,cmap=plt.cm.get_cmap('bone'),alpha=0.8)
cs=ax1.pcolormesh(x,y,data,**props)
ax1.set_title('Lon_Offset=-90')
map_common(ax1,gl_lon_info=[-180,-120,-60,120,],gl_dlat=15)

fnout='./map_over_dateline.png'
#plt.show()
plt.savefig(fnout,bbox_inches='tight',dpi=150) 
```

[该程序的输出](https://i.stack.imgur.com/J7JQB.png)

# ruby - 如何在给定元素后将新值插入有序散列？

> ID：13856128
> 
> 赞同：-1
> 
> 时间：2012-12-13T08:52:13.037
> 
> 标签：ruby, hash

我想使用有序哈希。

```
existing_hash = { key: value1, foo: value2 }

I want add { bar: value3 } after key 'key:'
expecting_hash = { key: value1, bar: value3, foo: value2 } 
```

我的代码：

```
existing_hash[:bar] = value3
actual_hash =  { key: value1, foo: value2, bar: value3 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:34:33.903

@Sergio 关于 的无序性质是正确的`Hash`，但从技术上讲，它看起来有点有趣。

无法避免找到解决方案:)

在这里，虽然不是很优雅：

```
# having this and need to insert 3 after 2
h = {1=>:one, 2=>:two, 4=>:four, 5=>:five}

after_key = 2
after_key_index = h.keys.index(after_key)
h1,h2 = h.partition {|k,v| h.keys.index(k) <= after_key_index }.map {|a| Hash[a]}

p h1.merge(3 => :three).merge(h2)
# => {1=>:one, 2=>:two, 3=>:three, 4=>:four, 5=>:five}

# or

h1[3] = :three
p h1.merge h2
# => {1=>:one, 2=>:two, 3=>:three, 4=>:four, 5=>:five} 
```

并应用于您的代码：

```
h = { key: :value1, foo: :value2 }

after_key = :key
after_key_index = h.keys.index(after_key)
h1,h2 = h.partition {|k,v| h.keys.index(k) <= after_key_index }.map {|a| Hash[a]}

p h1.merge(:bar => :value3).merge(h2)
# => {:key=>:value1, :bar=>:value3, :foo=>:value2}

# or

h1[:bar] = :value3
p h1.merge h2
# => {:key=>:value1, :bar=>:value3, :foo=>:value2} 
```

# c# - 如何从 cookie 文件中获取过期日期

> ID：13856132
> 
> 赞同：0
> 
> 时间：2012-12-13T08:52:31.503
> 
> 标签：c#, cookies

> **可能重复：**
> [如何从 Internet Explorer 获取与 cookie 关联的到期日期和标志？](https://stackoverflow.com/questions/9934826/how-to-get-expiration-date-and-flags-associated-with-a-cookie-from-internet-expl)

**如何从 cookie 文件中获取过期日期**

我的饼干喜欢这样：

> UserInfo 6pzYKskEcx7lflixFLGmBhv4+SUOt+G75z0ASsu91SzDPS0WfW4Q+7nud+ljldfEuDotv86J6gcG+ZX7qNFRFNGeH1wt7Y3XkR​​uRwUH7xh69fcsoePvz8fBITBM0qpnj3iOoD4bOOJ/fdAhbZ7aTlEhx0lTV4ZLyBXeras944F7FtAYxiU/let4x9U8rB+2R 127.0.0.1/ 1024 3442423040 30339635 729453404 30267216 *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:54:58.460

获取或将 Cookie 的到期日期和时间设置为 DateTime。

[http://msdn.microsoft.com/en-us/library/system.net.cookie.expires(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.net.cookie.expires(v=vs.80).aspx)

# c - 在 pci 设备驱动程序中实现读/写文件操作

> ID：13856133
> 
> 赞同：4
> 
> 时间：2012-12-13T08:52:38.330
> 
> 标签：c, linux-kernel, linux-device-driver, device-driver

我正在写`pci driver`一张`PCIe FPGA`卡片。

我不确定如何实现“读取”和“写入”功能 - 如何 `struct file *filp, char _ _user *buff, size_t count, loff_t *offp`正确使用参数：，以便对 pci 内存空间进行读取和写入。

你能给我一些如何使用这些功能的例子，以及一个使用 open/release 的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:52:42.553

[LDD3](http://lwn.net/images/pdf/LDD3/ch03.pdf "LDD3")包含一个示例字符驱动程序“scull”，它在内存区域上实现文件操作（包括读取和写入）。应该很容易适应您的目的。

# java - Faces Managed Properties 使用 xml 但不使用注释

> ID：13856134
> 
> 赞同：1
> 
> 时间：2012-12-13T08:52:40.700
> 
> 标签：java, jsf-2, tomcat6

我有一个与**JSF 2**相关的问题。我正在使用带有**Tomcat 6**服务器的 2.1.4 版本。我正在迁移最初为 jsf 1.2 编写的应用程序。据此，应用程序的每个 JSF 托管 bean 都在 faces-managed-beans.xml 文件中声明。当我尝试使用新的 JSF 2 *@ManagedProperty*注释设置属性时，问题就出现了。例如，这段代码对我有用。

```
<managed-bean>
    <managed-bean-name>navegableSessionParamsManager</managed-bean-name>
    <managed-bean-class>com.tesicnor.system.view.beans.navegable.NavegableSessionParamsManager</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>

    <managed-property>
        <property-name>_LoggedBean</property-name>
        <value>#{loggedBean}</value>
    </managed-property>
    <managed-property>
        <property-name>_LocaleBean</property-name>
        <value>#{localeBean}</value>
    </managed-property>

</managed-bean> 
```

会话范围的 navegableSessionParamsManager bean 正在接收 loggingBean 和 localeBean 值，它们也是会话范围的 bean。但是，如果我使用注释，我声明了三个*@ManagedBean*和*@SessionScoped*，并且我使用了*@ManagedProperty("#{loggedBean}")*和*@ManagedProperty("#{localeBean}")*，但是没有设置属性。

LoggedBean 类。

```
@ManagedBean
@SessionScoped
public class LoggedBean extends BaseBean implements Observer {

 /**
 * 
 */
private static final long serialVersionUID = 1L; 
... 
```

NavegableSessionParamsManager 类

```
@SuppressWarnings("serial")
@ManagedBean
@SessionScoped
public class NavegableSessionParamsManager extends SystemNavegable {

@ManagedProperty("#{loggedBean}")
private LoggedBean _LoggedBean;

public void set_LoggedBean(LoggedBean _LoggedBean) {
    this._LoggedBean = _LoggedBean;
}
... 
```

那是我的**web.xml**文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.5"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<display-name>System_V4</display-name>
<context-param>
    <param-name>javax.faces.CONFIG_FILES</param-name>
    <param-value>/WEB-INF/faces-config.xml, /WEB-INF/faces-managed-beans.xml, /WEB-INF/faces-navigation.xml</param-value>
</context-param>
<context-param>
    <description>Do not render comments in facelets (xhtml) pages. Default is false.</description>
    <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
    <param-value>true</param-value>
</context-param>
<context-param>
    <description>
        Define the value returned by Application.getProjectStage(). Allowed values: Production, Development,
        UnitTest, SystemTest, Extension. Default value is Production.
    </description>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>pepper-grinder</param-value>
</context-param>

<!-- filter enforcing charset UTF-8 - must be first filter in the chain! -->
<filter>
    <filter-name>characterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>utf-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>characterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Advanced Security Filter -->
<!-- FILTRO PROPIO. -->
<filter>
    <filter-name>SystemFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>SystemFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>SystemUrlFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>SystemUrlFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Filter to set character encoding on each request "Set Character Encoding" 
    for "X-UA-Compatible" de microsoft -->
<filter>
    <filter-name>SetHttpHeadersFilter</filter-name>
    <filter-class>com.tesicnor.system.view.filters.SetHttpHeadersFilter</filter-class>
    <init-param>
        <param-name>X-UA-Compatible</param-name>
        <param-value>IE=EmulateIE7</param-value>
    </init-param>
</filter>
<!-- Primefaces -->
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>SetHttpHeadersFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping>
<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener>
<listener>
    <listener-class>org.quartz.ee.servlet.QuartzInitializerListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>com.tesicnor.system.view.session.WebSessionListener</listener-class>
</listener>
<listener>
    <listener-class>com.tesicnor.system.view.session.WebRequestListener</listener-class>
</listener>

<!-- FIN JavaServer Faces Faces Servlet -->
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<!-- SERVLET DE CXF (Web Services) -->
<servlet>
    <servlet-name>CXFServlet</servlet-name>
    <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
</servlet>
<!-- FIN Faces Servlet Faces Servlet Mapping -->
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/ws/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>60</session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>

<error-page>
    <error-code>404</error-code>
    <location>/404.xhtml</location>
</error-page> 
```

我不知道在 JSF 2 中使用注释有什么样的优势，但每个人都在这样做。另外，如果我对同一个 bean 使用注释和 xml bean 映射，我会遇到麻烦吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:23:45.230

确保您的三个`faces-config.xml`文件是 2.0 或更高版本。[另请参阅JSR 314](http://www.jcp.org/en/jsr/detail?id=314)规范中的*注释类扫描要求*一章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:08:28.303

**此答案基于您仍然在 faces-config.xml 中定义 bean 的假设。**

您提到您已迁移到 JSF2。那么，您是否仍然`NavegableSessionParamsManager`像在您的 OP 中一样在 faces-config.xml 中定义了 bean。如果您 `NavegableSessionParamsManager`在您的`faces-config.xml`和同一个中定义，则使用服务器进行注释`@ManagedProperty`将首先实例化 faces-config.xml 中定义的任何内容。

原因`xml`文件将在 servlet 容器启动时优先，在这种情况下，Java 代码中的任何内容都将被简单地忽略。

如果您在您使用的任何注释中注释掉代码`faces-config.xml`将正常工作。也许您必须这样做。

```
 <--- <managed-bean>
        <managed-bean-name>navegableSessionParamsManager</managed-bean-name>
        <managed-bean-class>com.tesicnor.system.view.beans.navegable.NavegableSessionParamsManager</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>

        <managed-property>
            <property-name>_LoggedBean</property-name>
            <value>#{loggedBean}</value>
        </managed-property>
        <managed-property>
            <property-name>_LocaleBean</property-name>
            <value>#{localeBean}</value>
        </managed-property>

    </managed-bean>----> 
```

现在尝试使用注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:19:54.027

终于过了一会儿，我解决了它在我的 web.xml 中添加 * *.faces*和 * *.xhmtml* servlet-mappings，这在以前不需要。

接着就，随即：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

现在注释正在工作。

# delphi - 如何将窗口置于顶部并模拟点击它？

> ID：13856136
> 
> 赞同：0
> 
> 时间：2012-12-13T08:52:49.803
> 
> 标签：delphi, click, simulate

我多次运行一个 Delphi 应用程序，我需要将每个应用程序置于顶部并模拟鼠标单击其表单上的某处。

在我的应用程序中，我有一个 TWebBrowser 组件，我想单击该浏览器中的某个位置。问题是我需要单击该浏览器内的 flash 对象。我试图让 ClassName 和 Handle 点击 flash，但不适用于所有网站。所以唯一可行的就是模拟鼠标点击。

例如，我将此链接加载到浏览器[http://bit.ly/XWaelU](http://bit.ly/XWaelU)中，并尝试模拟从内部 Flash 播放器单击大“播放”按钮。

有人可以帮助我提供有关如何完成此操作的示例代码吗？我认为应用程序必须以固定位置启动，所以点击的坐标保持不变，对吧？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:19:55.080

假设您要单击窗口上的控件，该控件相对于窗口的位置已知，您可以从中获得（可以获得）句柄，您可以使用它。仅在当前表单上演示。也许适应你的条件。

```
Procedure SetWindowTopAndClickOnRelPos(wnd:HWND;Pos:TPoint);
var
  ChildControlHandle:HWND;
begin
  SetForegroundWindow(wnd);
  ChildControlHandle:=  ChildWindowFromPoint(WND,pos);
  SendMessage(ChildControlHandle,WM_LButtonDown,0,5*$FFFF + 5);
  SendMessage(ChildControlHandle,WM_LButtonUp,0,5*$FFFF + 5);
  Form4.Memo1.Lines.Add(Format('ChildControlHandle: %d',[ChildControlHandle]));
end;

procedure TForm4.Button1Click(Sender: TObject);
begin
     Memo1.Lines.Add(Format('Window: %d',[Handle]));
     Memo1.Lines.Add(Format('Button: %d',[button2.Handle]));
     SetWindowTopAndClickOnRelPos(handle,Point(Button2.Left + 2,Button2.Top + 2));
end;

procedure TForm4.Button2Click(Sender: TObject);
begin
  Showmessage('Hallo');
end; 
```

# ruby-on-rails - ruby on rails 中的复合主键

> ID：13856137
> 
> 赞同：5
> 
> 时间：2012-12-13T08:52:54.047
> 
> 标签：ruby-on-rails, ruby, activerecord, composite-primary-key

我正在尝试使用[http://compositekeys.rubyforge.org/](http://compositekeys.rubyforge.org/)以便在我的 activerecord 模型中拥有复合主键。

我已经添加`gem 'composite_primary_keys', '=3.1.0'`到我的 Gemfile 中。现在我正在尝试如下设置我的第一个模型类。

```
class StringProperty < ActiveRecord::Base
    self.primary_keys :entity_id, :property_id
    set_table_name "problem.string_property"
    attr_accessible :entity_id, :property_id, :value
end 
```

但我得到的只是： ![在此处输入图像描述](../Images/530769dde363a664d319912800f4af10.png)

我究竟做错了什么？:(

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T08:56:14.937

我认为以下将起作用。

```
require 'composite_primary_keys'
class StringProperty < ActiveRecord::Base
    self.primary_keys = :entity_id, :property_id
    set_table_name "problem.string_property"
    attr_accessible :entity_id, :property_id, :value
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T14:53:06.493

如果仅用于唯一约束目的，请使用：

`class Field < ActiveRecord::Base validates :input, uniqueness: { scope: :user_id, message: "one input per user" } end`

来源： http: [//guides.rubyonrails.org/active_record_validations.html](http://guides.rubyonrails.org/active_record_validations.html)

# javascript - jQuery 自动更正对重复字段的行为很奇怪

> ID：13856141
> 
> 赞同：0
> 
> 时间：2012-12-13T08:53:02.643
> 
> 标签：javascript, jquery, forms, validation, knockout.js

我正在使用脚本来使用 jQuery 自动更正表单上的输入。例如，当某人写“abc”作为他的首字母时，该字段将自动将输入直接更正为 ABC

这些脚本运行良好。但是，任何人都可以用多个名字填写多个表格。我正在使用淘汰赛来复制表格。到目前为止一切顺利，但[自动更正不再适用于重复的字段](http://jsfiddle.net/QUxyy/8/)..

自动更正看起来像这样（小部分）：

```
// Lowercase
    $(".lowercase").keyup(function(e)
    {
        $(".lowercase").val(($(".lowercase").val()).toLowerCase());
        if (/[a-z]/g.test(this.value))
        {
            this.value = this.value.replace(/[^a-z ]/g, '');
        }

    });

    // Initials
    $(".initials").focus(function() {
        var current = $(".initials").val();
        $(".initials").keyup(function(e) {
            var key = String.fromCharCode(e.keyCode);
            if (key >= 'A' && key <= 'Z') {
                current += key + ".";
                this.value = current;
            }
            else {
                current = "";
            }
        });
    $(".initials").blur(function() {
        var i = $(".initials").val();
        var last = i[i.length - 1];
        if (last != "." && i.length !== 0){
            this.value += ".";
            }
        });
    });

    // Capitalize
    $(".cap").keyup(function(e)
    {
        function convertToUpper() {
        return arguments[0].toUpperCase();
         }
        val = this.value.toLowerCase().replace(/\b[a-z]/g, convertToUpper);
        this.value = val;

    }); 
```

可以在[这里找到小提琴](http://jsfiddle.net/QUxyy/8/)

**更新**

多亏了raghaw [Numbers 现在可以工作了。但其他领域还没有](http://jsfiddle.net/QUxyy/10/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:18:51.497

您正在绑定事件，该事件不适用于将来创建的元素。这是我对您的代码所做的更改：

```
$(document).on("keyup", ".numbers", function(e)  
// $(".numbers").keyup(function(e) 
```

您修改后的小提琴在这里[http://jsfiddle.net/QUxyy/9/](http://jsfiddle.net/QUxyy/9/)

# dart - Dart 编辑器启动配置

> ID：13856146
> 
> 赞同：2
> 
> 时间：2012-12-13T08:53:25.257
> 
> 标签：dart

我对发射应该起作用感到有点困惑。在我的项目中，我有一个 build.dart 和一个 html 文件。

我现在正在做的是运行 build.dart 然后运行 ​​html。

构建飞镖然后刷新浏览器窗口也可以。

但是我看不到运行 build.dart 然后自动刷新 dartium 的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:09:17.847

我最喜欢的方法是单击 out 目录中的 index.html 并按 Command-r（或您的操作系统上的任何等效项）来运行它。这将运行 build.dart 以及打开 Dartium。

# asp.net - 在 SQL Server 2008 上恢复数据库时遇到问题

> ID：13856158
> 
> 赞同：0
> 
> 时间：2012-12-13T08:53:55.857
> 
> 标签：asp.net, sql, sql-server-2008

我正在处理 SQL Server 2008 中的一个奇怪问题。

我以前在本地计算机上安装了 SQL Server 2005。

我有一个 SQL Server 2008 的备份，它必须在本地处理，然后恢复到原始数据库（工作涉及使用临时查询，因为它由 ISP 托管，所以在我的服务器上禁用。）

**问题**：

SQL Server 2008 给了我以下错误。

> *执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo)*
> 
> *设备“D:\Data\F1\purt144_634889883032976839.bak”上的媒体系列格式不正确。SQL Server 无法处理此媒体系列。RESTORE HEADERONLY 异常终止。（Microsoft SQL Server，错误：3241）*

**问题**：

*   2 个或多个版本的 SQL Server 可以在同一台计算机上共存吗？如果是，为什么服务器实例显示版本号为 09.XXX（在 SQL Server Management Studio 2008 的右侧部分），SQL Server 2008 的版本为 10.XX。

*   除了数据库损坏或向后兼容性问题之外，可能还有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:19:45.603

是的，您可以在同一台机器上安装多个相同或不同版本的 SQL Server 实例；因此，您可以拥有一个或多个 SQL Server 2005 实例以及一个或多个 SQL Server 2008（或任何其他版本的 SQL Server）实例。

0（零）或这些实例之一将是默认（或未命名）实例，所有其他实例将是命名实例。

从 SQL Server 2005 升级到 SQL Server 2008 时，根据选择的选项，现有实例（如果存在，可能但不一定是默认实例）可能已从 SQL Server 2005 升级到 SQL Server 2008 或全新的实例SQL Server 2008 可以同时安装。

您应该检查服务列表以查看您机器上的实例列表。SQL Server 2008 附带的 SQL Server 配置管理器将在`SQL Server Services`节点下显示。

具有该名称`MSSQLSERVER`的实例将是默认实例或未命名实例，因为您无需指定其名称即可连接到它。所有其他将被命名为实例。

# java - 安卓文件搜索

> ID：13856164
> 
> 赞同：0
> 
> 时间：2012-12-13T08:54:12.750
> 
> 标签：java, android, file, search

我正在创建一个在设备上搜索特定文件的应用程序。
我正在使用以下代码。
但是当我运行这个应用程序时，它会给出空指针异常。
我修改了代码..新代码如下

```
public class Display extends ListActivity {

 List<String> fileslist;
static String searchtext;
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    Bundle bd= getIntent().getExtras();
    searchtext= bd.getString("1");
    fileslist= new ArrayList<String>();
    new Display().listallfiles("/");    
    if(fileslist.isEmpty()){
    Toast.makeText(this, "YO OY", 2200).show(); 
    }
    else{
    ArrayAdapter<String> displaylist = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,fileslist);
    setListAdapter(displaylist);
    }

}

void listallfiles(String path){
    try{

    String  files;
     File  folder = new File (path);
     File [] listOfFiles = folder.listFiles(); 

     for (int i = 0; i < listOfFiles.length; i++) 
     {
         if(listOfFiles[i].canRead()){
      if (listOfFiles[i].isFile()) 
      {
      files = listOfFiles[i].getName();
        if(listOfFiles[i].getName().contains(searchtext))
      fileslist.add(listOfFiles[i].getName());  

        }

     if(listOfFiles[i].isDirectory()) {

        listallfiles(path+"\\"+listOfFiles[i].getName().toString()+"\\");   
    }

     }
     }
    }
    catch (Exception e) 

    {
    e.printStackTrace();    

    }

    } 
```

}

堆栈跟踪
12-13 19:35:27.072：W/System.err(513)：java.lang.NullPointerException 12-13 19:35:27.082：W/System.err(513)：在 com.mypack.filesearch。 Display.listallfiles(Display.java:56) 12-13 19:35:27.082: W/System.err(513): 在 com.mypack.filesearch.Display.listallfiles(Display.java:70) 12-13 19: 35:27.082: W/System.err(513): 在 com.mypack.filesearch.Display.onCreate(Display.java:35) 12-13 19:35:27.082: W/System.err(513): 在 android .app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 12-13 19:35:27.082: W/System.err(513): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)

这段代码运行良好..如果你想为你自己测试一下。
包 com.mypack;

```
import java.util.*;
import java.io.*;

public class Main 

 {
List<String> listof;

public static void main(String [] args) 
{

 // Directory path here
  String  path = "d:\\Java\\Programs"; 
  new Main().listallfiles(path);

  }

    void listallfiles(String path){
    try{

listof= new ArrayList<String>();

    String  files;
     File  folder = new File (path);
     File [] listOfFiles = folder.listFiles(); 

     for (int i = 0; i < listOfFiles.length; i++) 
     {

      if (listOfFiles[i].isFile()) 
      {
      files = listOfFiles[i].getName();
   if(listOfFiles[i].getName().contains(".class"))
    listof.add(files);

        }

          else if(listOfFiles[i].isDirectory()) {

        listallfiles(path+"\\"+listOfFiles[i].getName().toString()+"\\");   
    }

     }
    }
    catch (Exception e) 

    {
    e.printStackTrace();    

    }

  for(int i=0;i<listof.size();i++)
  System.out.println(listof.get(i).toString());

    }

    } 
```

# visual-studio-2012 - Fake 框架中的行为模型

> ID：13856167
> 
> 赞同：1
> 
> 时间：2012-12-13T08:54:19.773
> 
> 标签：visual-studio-2012, moles, microsoft-fakes

在 Visual Studio 2010 中，这是[使用 Behaviors 测试 ASP.NET 应用程序的](http://research.microsoft.com/en-us/projects/pex/molesaspnet.pdf)方法。现在，在 VS 2012 中，他们已经升级到 Fakes Framework。您如何使用 Fakes 达到同样的效果？

为“System.Web”创建 Fakes 程序集不会为“System.Web”创建行为模型。`Bhttpcontext`即，当您在“System.Web.Behaviors”命名空间中破坏“System.Web”程序集时，我找不到曾经存在的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:54:30.323

在 Visual Studio 2012 中的 Fakes 中不包含 Moles 行为[。SharePoint 模拟器](http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/26/introducing-sharepoint-emulators.aspx)提供了类似的功能，但是，System.Web 模拟器目前不公开。作为一种解决方法，您可以使用 shims 实现模拟器。

# android - 实现幻灯片打开

> ID：13856169
> 
> 赞同：0
> 
> 时间：2012-12-13T08:54:34.343
> 
> 标签：android, slide

我想在我的应用程序中实现“滑动打开”的概念。基本上，我使用的是 ImageView。如果用户将其滑动到特定方向（例如向右），则开始下一个活动。我不知道如何在 Android 中实现这一点，我搜索了很多地方但一无所获。

有什么线索吗？

我遇到了什么：

*   不，我认为在这种情况下使用 ViewPager 或 Horizo​​ntalScrollView 不合适。
*   我不知道 Drag And Drop 的概念是否有帮助（如何暗示在特定方向上拖动？如果拖动中途结束如何让 ImageView 返回其初始位置？...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:03:38.420

使用框架布局并在其中放置一个 ImageView。然后将 touchEvents 添加到 Imageview。在 ON_MOVE 事件中更新 imagViews 布局参数。这是 android 中滑动和拖动东西的基本思想。祝你好运。

您可以使用 View.Animation 将滑块移回开始位置再次 ON_UP 事件

您只能通过更改视图在 x 轴上移动视图：

```
 LayoutParams.leftMargin=event.getRawX(); 
```

（始终将重力设置为 NO_GRAVITY）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:05:07.200

如果您想实现“滑动解锁”之类的功能，您可以实现[拖放](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)并禁止沿 Y 轴移动。您还可以检查图像位置并分析此移位是否足以打开\解锁，如果不是 - 只需将图像移回即可。

# jruby - JRuby SAML 身份验证

> ID：13856171
> 
> 赞同：0
> 
> 时间：2012-12-13T08:54:39.257
> 
> 标签：jruby, saml

我正在尝试设置 JRuby 应用程序以针对 simpleSAMLphp IdP 使用 SAML 2.0 身份验证。目的是最终针对 Microsoft ADFS 进行身份验证，但该解决方案仍在构建中。

到目前为止，我已经尝试了几种不同的 SAML 解决方案（ruby-saml、samlr），它们在 JRuby 下似乎都失败了（但在 MRI 下工作正常）。我专门使用 JRuby 来利用 JMS API 和 JDBC 连接器，所以我不能真正回到 MRI。

有谁知道在 JRuby 下可以正常工作的 SAML 实现？如果需要的话，我很高兴能够走上使用本机 Java 类的道路，但是有一个可以构建的起点真的很有帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:26:42.203

这个应用程序是面向客户的吗？如果是这样，请查看 PingOne 应用程序提供商服务。它是 Ping Identity 的托管 SAML SP。您通过应用程序中的 REST APS 进行连接，服务处理复杂的 SAML。设置非常简单。作为奖励，第一个连接是免费的。[注：我为 Ping 工作]

HTH-伊恩

# android - forceLayout()、requestLayout() 和 invalidate() 的使用

> ID：13856180
> 
> 赞同：215
> 
> 时间：2012-12-13T08:55:05.697
> 
> 标签：android, android-layout, android-view

我对类的角色和`forceLayout()`方法有点困惑。`requestLayout()``invalidate()``View`

什么时候叫他们？

* * *

## 回答 #1

> 赞同：398
> 
> 时间：2014-09-15T10:44:20.597

为了更好地理解[François BOURLIEUX](https://stackoverflow.com/a/13858255/1993204)和[Dalvik](https://stackoverflow.com/a/24835463/1993204)提供的答案，我建议你看看[Arpit Mathur](https://plus.google.com/115089607132986274709/posts/cT1EuBbxEgN)的这个很棒的视图生命周期图： ![在此处输入图像描述](../Images/d95d753e9266878d7fcd855dd7d83cb1.png)

* * *

## 回答 #2

> 赞同：153
> 
> 时间：2017-02-24T04:19:16.830

# [`invalidate()`](https://developer.android.com/reference/android/view/View.html#invalidate())

`invalidate()`当您想要安排重绘视图时，调用完成。它将导致`onDraw`最终被调用（很快，但不是立即）。自定义视图何时调用它的一个示例是文本或背景颜色属性发生更改时。

视图将被重绘，但大小不会改变。

# [`requestLayout()`](https://developer.android.com/reference/android/view/View.html#requestLayout())

如果您的视图发生了会影响大小的更改，那么您应该调用`requestLayout()`. 这不仅会触发此视图`onMeasure`，还会触发`onLayout`父视图。

调用`requestLayout()`不[保证会导致`onDraw`](https://stackoverflow.com/a/42430021/3681880)（与接受答案中的图表所暗示的相反），因此它通常与`invalidate()`.

```
invalidate();
requestLayout(); 
```

这方面的一个示例是自定义标签的文本属性发生更改。标签会改变大小，因此需要重新测量和重新绘制。

# [`forceLayout()`](https://developer.android.com/reference/android/view/View.html#forceLayout())

当`requestLayout()`父视图组上有一个调用时，不需要重新测量和重新布局其子视图。但是，如果孩子应包括在重新测量和重新布局中，那么您可以拜访`forceLayout()`孩子。仅当它与直接父`forceLayout()`级的 a 一起出现时才适用于子级。`requestLayout()`单独调用`forceLayout()`不会有任何效果，因为它不会触发`requestLayout()`视图树。

阅读[此问答](https://stackoverflow.com/questions/45383948/how-does-forcelayout-work-in-android)以获得更详细的描述`forceLayout()`。

# 进一步研究

*   [创建视图类：添加属性和事件](https://developer.android.com/training/custom-views/create-view.html#addprop)（有用的文档）
*   [查看文档](https://developer.android.com/reference/android/view/View.html)
*   [`View`源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/View.java)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-12-13T10:51:18.677

在这里你可以找到一些回应：http: [//developer.android.com/guide/topics/ui/how-android-draws.html](http://developer.android.com/guide/topics/ui/how-android-draws.html)

对我来说，调用`invalidate()`只刷新视图，调用`requestLayout()`刷新视图并计算屏幕上视图的大小。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-06-13T09:45:49.633

`invalidate()`--->`onDraw()`从 UI 线程

`postInvalidate()`--->`onDraw()`从后台线程

`requestLayout()`--->`onMeasure()`并且`onLayout()`AND**不一定** `onDraw()`

*   **重要提示**：调用此方法不会影响被调用类的子类。

`forceLayout()`--->`onMeasure()`并且`onLayout()` **只要**直接父级调用`requestLayout()`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-19T00:14:59.127

您在要重绘的视图上使用 invalidate() ，它将使其 onDraw(Canvas c) 被调用，并且 requestLayout() 将使整个布局渲染（测量阶段和定位阶段）再次运行。如果您在运行时更改子视图的大小，则应该使用它，但仅在特定情况下，例如来自父视图的约束（我的意思是父视图的高度或宽度是 WRAP_CONTENT ，因此匹配测量子视图，然后才能再次包装它们）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-06-27T13:25:44.070

[这个答案](https://stackoverflow.com/revisions/42430695/2)是不正确的`forceLayout()`。

正如您在[代码中`forceLayout()`](https://android.googlesource.com/platform/frameworks/base/+/android-7.1.1_r43/core/java/android/view/View.java#19793)看到的那样，它只是将视图标记为“需要重新布局”，但它既不安排也不触发重新布局。直到将来某个时候，视图的父级由于其他原因被布局，才会发生重新布局。

`forceLayout()`使用and时还有一个更大的问题`requestLayout()`：

假设您调用`forceLayout()`了视图。现在，当调用`requestLayout()`该视图的后代时，Android 将递归调用`requestLayout()`该后代的祖先。问题是它会在您调用的视图上停止递归`forceLayout()`。**所以`requestLayout()`调用永远不会到达视图根，因此永远不会安排布局传递。**视图层次结构的整个子树正在等待布局，调用`requestLayout()`该子树的任何视图都不会导致布局。只有调用`requestLayout()`该子树之外的任何视图才能打破咒语。

我会考虑`forceLayout()`（以及它如何影响`requestLayout()`被破坏，你不应该在你的代码中使用该函数。

# jboss - 由于 xfire-1.2.6 依赖 wss4j-1.5.1 和 xmlsec 1.3.0，JBoss AS 7.1 依赖冲突

> ID：13856181
> 
> 赞同：0
> 
> 时间：2012-12-13T08:55:12.487
> 
> 标签：jboss, jboss7.x, wss4j, xfire, xmlsec

我正在尝试在 JBoss AS 7.1 上部署旧代码，但由于 wss4j 和 xmlsec，我正在努力解决相互冲突的依赖关系

我创建了一个 jboss-deployment-structure.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.1">
<deployment>
    <!-- Exclusions allow you to prevent the server from automatically adding 
        some dependencies -->
    <exclusions>
        <module name="org.apache.log4j" />
        <module name="org.jboss.logging" />
        <module name="org.jboss.logging.jul-to-slf4j-stub" />
        <module name="org.jboss.logmanager" />
        <module name="org.jboss.logmanager.log4j" />
        <module name="org.slf4j" />
        <module name="javaee.api" />
        <module name="org.apache.santuario.xmlsec" />
    </exclusions>

    <dependencies>
        <module name="javaee.api">
            <imports>
                <exclude-set>
                    <path name="org/apache/xml/security/**" />
                    <path name="org/apache/ws/security/**" />
                </exclude-set>
            </imports>
        </module>
    </dependencies>

</deployment> 
```

但这会导致：

```
Caused by: java.lang.NoSuchMethodError: org.apache.xml.security.transforms.Transform.init()V
at org.apache.ws.security.WSSConfig.<init>(WSSConfig.java:81) [wss4j-1.5.1.jar:]
at org.apache.ws.security.WSSConfig.getNewInstance(WSSConfig.java:95) [wss4j-1.5.1.jar:]
at org.apache.ws.security.WSSConfig.<clinit>(WSSConfig.java:47) [wss4j-1.5.1.jar:]
at org.apache.ws.security.WSSecurityEngine.<clinit>(WSSecurityEngine.java:51) [wss4j-1.5.1.jar:]
at org.apache.ws.security.handler.WSHandler.<clinit>(WSHandler.java:62) [wss4j-1.5.1.jar:]
at com.realdolmen.forens2.service.kbo.impl.KBOConsultServiceImpl.signRequest(KBOConsultServiceI 
```

当我将路径名更改为：

```
<exclude-set>
    <path name="org/apache/xml/security" />
    <path name="org/apache/ws/security" />
</exclude-set> 
```

结果是：

```
Caused by: java.lang.NoSuchMethodError: org.apache.xml.security.keys.KeyInfo.init()V
at org.apache.xml.security.Init.init(Unknown Source) [xmlsec-1.3.0.jar:]
at org.apache.ws.security.WSSConfig.<init>(WSSConfig.java:72) [wss4j-1.5.1.jar:]
at org.apache.ws.security.WSSConfig.getNewInstance(WSSConfig.java:95) [wss4j-1.5.1.jar:] 
```

真正让我发疯的是正确的版本出现在堆栈跟踪中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:43:32.380

我已经用 CXF 重写了遗留代码。

# iphone - tabBarController 不显示

> ID：13856184
> 
> 赞同：3
> 
> 时间：2012-12-13T08:55:18.930
> 
> 标签：iphone, ios, uitabbarcontroller

我想以`tabbarcontroller`编程方式制作。`tabBarController`不显示在页面中。谁能告诉我们哪里出了问题。我们可以`tabbarcontroller`在一个应用程序中制作多个

```
ViewController.m
- (void)viewDidLoad
{
    report=[[UIViewController alloc]initWithNibName:@"ViewController" bundle:nil];
    View1 *template=[[View1 alloc]initWithNibName:@"View1" bundle:nil];
    View2 *acc=[[View2 alloc]initWithNibName:@"View2" bundle:nil];
    View3 *four=[[View3 alloc]initWithNibName:@"View3" bundle:nil];
    View4 *five=[[View4 alloc]initWithNibName:@"View4" bundle:nil];   

    nav1=[[UINavigationController alloc]initWithRootViewController:report];
    nav2=[[UINavigationController alloc]initWithRootViewController:template];
    nav3=[[UINavigationController alloc]initWithRootViewController: acc];
    nav4=[[UINavigationController alloc]initWithRootViewController:four];
     nav5=[[UINavigationController alloc]initWithRootViewController:five];

    UITabBarItem *item = [[UITabBarItem alloc] initWithTitle:@"Title" image:[UIImage  imageNamed:@"singleicon.png"] tag:0];
    UITabBarItem *item1 = [[UITabBarItem alloc] initWithTitle:@"Reports" image:[UIImage imageNamed:@"doubleicon.png"] tag:1];
    UITabBarItem *item2 = [[UITabBarItem alloc] initWithTitle:@" New " image:[UIImage imageNamed:@"clockicon.png"] tag:2];
    UITabBarItem *item3=[[UITabBarItem alloc]initWithTitle:@"four" image:[UIImage imageNamed:@"dependenticon.png"] tag:3];
    UITabBarItem *item4=[[UITabBarItem alloc]initWithTitle:@"five" image:[UIImage imageNamed:@"toolicon.png"] tag:4];

    nav1.tabBarItem = item;
    nav2.tabBarItem = item1;
    nav3.tabBarItem = item2;
    nav4.tabBarItem=item3;
    nav5.tabBarItem=item4;

    //[item1 setBadge:@"25"];
    self.tabBarController=[[UITabBarController alloc]init];
    [self.tabBarController setViewControllers:[NSArray arrayWithObjects:nav1,nav2,nav3,nav4,nav5,nil]];

    self.report = self.tabBarController;
  // [self.report makeKeyAndVisible];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:04:53.007

将所有编码放入按钮的操作中，然后按以下`tabBarController`方式：-

```
[self.navigationController pushViewController:tabBarController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:04:19.617

使用以下代码：

```
 self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav1,nav2,nav3,nav4,nav5,nil]];
     self.window.rootViewController = self.tabBarController; 
```

**更新：**

也用于隐藏和显示`UITabBar`然后使用下面的代码..

只需将此方法放在`AppDelegate.m`文件中，当您想隐藏标签栏时，只需创建`AppDelegate`对象并调用以下`hideTabBar`方法

```
- (void) hideTabBar:(UITabBarController *) tabbarcontroller {

    int height = 480;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];

    for(UIView *view in tabbarcontroller.view.subviews) {
        if([view isKindOfClass:[UITabBar class]]) {
            [view setFrame:CGRectMake(view.frame.origin.x, height, view.frame.size.width, view.frame.size.height)];
        } 
        else {
            [view setFrame:CGRectMake(view.frame.origin.x,view.frame.origin.y, 320, 436)];
        }
    }
    [UIView commitAnimations];
}

- (void) showTabBar:(UITabBarController *) tabbarcontroller {

    int height = 436;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3]; 

    for(UIView *view in tabbarcontroller.view.subviews) {

        if([view isKindOfClass:[UITabBar class]]) {
            [view setFrame:CGRectMake(view.frame.origin.x, height, view.frame.size.width, view.frame.size.height)];            
        } 
        else {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, height)];
        }
    }    

    [UIView commitAnimations];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:02:01.883

如果您想以`UITabBarController`编程方式添加，则需要将您的添加`tabbarcontroller` 到您的`ViewController`. 你需要使用这条线，

```
[self.view addSubview:self.tabBarController.view]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:08:45.717

您需要在错过了一行的视图中添加 tabBarController

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-12T06:50:58.997

我刚做了这个

```
[self.navigationController pushViewController:tabBarController animated:YES]; 
```

# r - 使用 RHive 包的 R 到 Hive 连接

> ID：13856185
> 
> 赞同：2
> 
> 时间：2012-12-13T08:55:19.770
> 
> 标签：r, hive

我在 Windows PC 上安装了 R 2.15.2。Hadoop 和 Hive 在另一台 PC 上。我将 RHive 及其依赖项加载到 R 中。现在我正在尝试连接到 Hive。

```
> Sys.setenv(HIVE_HOME="/home/hadoop/hive-0.7.0-cdh3u0")
> Sys.setenv(HADOOP_HOME="/home/hadoop/hadoop-0.20.2-cdh3u0")
> library(RHive)
> rhive.env(ALL=TRUE) 
```

> Hive 主目录：/home/hadoop/hive-0.7.0-cdh3u0
> Hadoop 主目录：/home/hadoop/hive-0.7.0-cdh3u0
> Hadoop 配置目录：
> No RServe
> Disconnected HiveServer 和 HDFS
> RHive 库列表
> C:/Program Files /R/R-2.15.2/library/RHive/java/rhive_udf.jar /home/hadoop/hive-0.7.0-cdh3u0/conf

```
> rhive.init() 
```

> [1] “HADOOP 没有 slaves 文件。所以你应该在调用 rhive.connect() 时传递 hosts 参数。”
> .jnew("org/apache/hadoop/conf/Configuration") 中的错误：java.lang.ClassNotFoundException
> 另外：警告消息：
> 在文件中（文件，“rt”）：无法打开文件'/home/hadoop/hadoop- 0.20.2-cdh3u0/conf/slaves'：没有这样的文件或目录

```
> rhive.connect(hdfsurl="hdfs://212.63.135.149:9000/") 
```

> .jnew("org/apache/hadoop/conf/Configuration") 中的错误：java.lang.ClassNotFoundException

结果是连接错误！

甚至尝试过 `rhive.connect(host = "212.63.135.149", port = 10000, hdfsurl="hdfs://212.63.135.149:9000/")`，但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T16:04:36.233

我通过修复 rhive_udf.jar 类路径来修复它（在构建后在 RHive 源目录中找到）

```
mkdir –p /usr/lib64/R/library/RHive/java
cp rhive_udf.jar //usr/lib64/R/library/RHive/java
chmod 755 /usr/lib64/R/library/RHive/java/rhive_udf.jar
R
> library("rJava")
> .jinit()
> .jaddClassPath("/usr/lib64/R/library/RHive/java/rhive_udf.jar") 
```

然后使用以下命令测试新添加的类路径：

```
> .jclassPath() 
```

您应该在列表中看到“/usr/lib64/R/library/RHive/java/rhive_udf.jar”！

然后重新启动 R - 就可以了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:28:40.690

几周前我在安装 RHive 时遇到了同样的问题。这是因为某些 jar 文件不在 rhive.init 中设置的类路径中。您需要设置参数 hive、libs、hadoop_home、hadoop_conf、hlibs 来指示这些 jar 文件的位置。

我首先从源代码安装，它与 rhive.init 一起使用，但 rhive.connect 无法正常工作。[当我通过 Cloudera 管理器https://ccp.cloudera.com/display/CDH4DOC/Hive+Installation](https://ccp.cloudera.com/display/CDH4DOC/Hive+Installation)安装 Hive 时，它​​确实像一个魅力。因此，我建议您按照那里的说明进行操作，这是有据可查的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-05T09:28:55.077

可能是因为您使用了错误的 Hadoop 版本。

RHive 不适用于 YARN，然后使用 hadoop-0.20.205.0 或更早版本。

# r - 通过移动平均找到时间序列数据集的模式

> ID：13856186
> 
> 赞同：2
> 
> 时间：2012-12-13T08:55:21.843
> 
> 标签：r, plot, extract, time-series, moving-average

我有相同数据集和相同时间间隔的时间序列数据和移动平均数据。我想提取重叠点。我想根据趋势反转的方向提取当前和最后一个交叉点（移动平均线和时间序列之间的交叉点）之间的极值点。我不知道是根据表格执行它（1-时间序列表包括温度和时间戳 2-移动平均表仅包括温度的移动平均结果）还是根据我添加移动平均线的图执行它到时间序列图。

时间序列表：

```
 ambtemp                  dt
1     -1.14 2007-09-29 00:01:57
2     -1.12 2007-09-29 00:03:57
3     -1.33 2007-09-29 00:05:57
4     -1.44 2007-09-29 00:07:57
5     -1.54 2007-09-29 00:09:57
6     -1.29 2007-09-29 00:11:57
7     -1.42 2007-09-29 00:13:57
8     -1.37 2007-09-29 00:15:57
9     -1.32 2007-09-29 00:17:57
10    -1.37 2007-09-29 00:19:57
11    -1.14 2007-09-29 00:21:57
12    -1.16 2007-09-29 00:23:57
13    -1.08 2007-09-29 00:25:57
14    -1.21 2007-09-29 00:27:57
15    -1.26 2007-09-29 00:29:57
16    -1.50 2007-09-29 00:31:57
17    -1.35 2007-09-29 00:33:57
18    -1.56 2007-09-29 00:35:57
19    -1.60 2007-09-29 00:37:57
20    -1.30 2007-09-29 00:39:57
21    -1.24 2007-09-29 00:41:57
22    -1.24 2007-09-29 00:43:57
23    -1.10 2007-09-29 00:45:57
24    -0.99 2007-09-29 00:47:57
25    -1.04 2007-09-29 00:49:57
26    -0.97 2007-09-29 00:51:57
27    -0.92 2007-09-29 00:53:57
28    -0.70 2007-09-29 00:55:57
29    -0.58 2007-09-29 00:57:57
30    -0.49 2007-09-29 00:59:57
31    -0.54 2007-09-29 01:01:57
32    -0.37 2007-09-29 01:03:57
33    -0.24 2007-09-29 01:05:57
34    -0.34 2007-09-29 01:07:57
35    -0.43 2007-09-29 01:09:57
36    -0.52 2007-09-29 01:11:57
37    -0.16 2007-09-29 01:13:57
38    -0.50 2007-09-29 01:15:57
39    -0.15 2007-09-29 01:17:57
40    -0.04 2007-09-29 01:19:57
41     0.00 2007-09-29 01:21:57
42    -0.08 2007-09-29 01:23:57
43    -0.30 2007-09-29 01:25:57
44    -0.14 2007-09-29 01:27:57
45    -0.06 2007-09-29 01:29:57
46    -0.02 2007-09-29 01:31:57
47    -0.25 2007-09-29 01:33:57
48    -0.33 2007-09-29 01:35:57
49     0.01 2007-09-29 01:37:57
50    -0.28 2007-09-29 01:39:57
51    -0.26 2007-09-29 01:41:57
52    -0.34 2007-09-29 01:43:57
53    -0.43 2007-09-29 01:45:57
54    -0.20 2007-09-29 01:47:57
55     0.19 2007-09-29 01:49:57
56     0.28 2007-09-29 01:51:57
57     0.07 2007-09-29 01:53:57
58    -0.32 2007-09-29 01:55:57
59    -0.20 2007-09-29 01:57:57
60    -0.42 2007-09-29 01:59:57
61    -0.40 2007-09-29 02:01:57
62    -0.54 2007-09-29 02:03:57
63    -0.67 2007-09-29 02:05:57
64    -0.42 2007-09-29 02:07:57
65    -0.57 2007-09-29 02:09:57
66    -0.73 2007-09-29 02:11:57
67    -0.54 2007-09-29 02:13:57
68    -0.70 2007-09-29 02:15:57
69    -0.70 2007-09-29 02:17:57
70    -0.58 2007-09-29 02:19:57 
```

移动平均线表：

```
 [1]      NA      NA      NA      NA      NA      NA      NA      NA      NA
 [10]      NA      NA      NA      NA      NA      NA      NA      NA      NA
 [19]      NA -1.3250 -1.3300 -1.3360 -1.3245 -1.3020 -1.2770 -1.2610 -1.2360
 [28] -1.2025 -1.1655 -1.1215 -1.0915 -1.0520 -1.0100 -0.9665 -0.9250 -0.8760
 [37] -0.8165 -0.7635 -0.6910 -0.6280 -0.5660 -0.5080 -0.4680 -0.4255 -0.3765
 [46] -0.3290 -0.2955 -0.2770 -0.2475 -0.2370 -0.2230 -0.2215 -0.2310 -0.2240
 [55] -0.1930 -0.1530 -0.1415 -0.1325 -0.1350 -0.1540 -0.1740 -0.1970 -0.2155
 [64] -0.2295 -0.2550 -0.2905 -0.3050 -0.3235 -0.3590 -0.3740 -0.3860 -0.3880
 [73] -0.3695 -0.4045 -0.4450 -0.4900 -0.5125 -0.5215 -0.5515 -0.5825 -0.6140 
```

![不同窗口大小的时间序列和移动平均值的重叠](../Images/235014b586296dd68c9308130c1ff5a4.png) 不同窗口大小的时间序列和移动平均值的重叠

![窗口大小为 40 的预期结果](../Images/8744658ed6856072001ef261f4610ebb.png) 窗口大小为 40 的预期结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:11:19.160

设置正确后，这是一个简单的三步过程。

第 1 步：对这类东西使用严肃的时间序列包。我建议`xts`——太棒了。

第 2 步：一旦你有了这种格式，它只是一些滞后命令和一些逻辑测试。

第 3 步：使用逻辑测试的输出为您的数据编制索引。

第一个问题是从你的文本文件到 R - 我把一个副本放在我的`~/Downloads/`目录中，但你的可能在其他地方。文本文件的问题是你只有两个标题和四列——这将导致 R 问题。所以让我们跳过标题行，自己命名。

```
require(xts)
require(TTR)

dd <- read.table("~/Downloads/Timeseries.txt", skip=1)
dd <- dd[,-1] # cut off the row numbers

colnames(dd) <- c('ambtemp', 'date', 'time')

dt <- as.POSIXct(paste(dd$date, dd$time))
tempdata_x <- xts(dd$ambtemp, order.by = dt)
colnames(tempdata_x) <- 'ambtemp'

tempdata_x$ma20 <- SMA(tempdata_x$ambtemp, n=20) 
```

最大变化：

```
max(diff(tempdata_x$ambtemp), na.rm=TRUE)
[1] 1.92

match(max(diff(tempdata_x$ambtemp), na.rm=TRUE), diff(tempdata_x$ambtemp))
[1] 357 
```

所以你想要的行是 357 号，通过`tempdata_x[357,]`.

检查重叠/交叉等：

```
tempdata_x$overlap <- ifelse(tempdata_x$ambtemp == tempdata_x$ma20, 1, 0)
tempdata_x$aboveMA <- ifelse(tempdata_x$ambtemp > tempdata_x$ma20, 1, 0)
tempdata_x$belowMA <- ifelse(tempdata_x$ambtemp < tempdata_x$ma20, 1, 0)
tempdata_x$crossUp <- ifelse(lag(tempdata_x$belowMA) & tempdata_x$aboveMA, 1, 0)
tempdata_x$crossDown <- ifelse(lag(tempdata_x$aboveMA) & tempdata_x$belowMA, 1, 0) 
```

现在您的数据框`tempdata_x`有一些新列 - 我们稍后将用于索引。

当;时，一列*重叠*标记为 1 *以上MA*标记为1时；*低于 MA*时标为 1 ；*crossUp*标有 1 表示从下方向上交叉，另一列*crossDown*市场标有 1 表示从上方向下交叉。`ambtemp == ma20`*`ambtemp > ma20`*`ambtemp < ma20`**

 ***仅限于存在移动平均线的情况（即删除前导部分）

```
tempdata_x.trim <- tempdata_x[complete.cases(tempdata_x),] 
```

使用我们创建的列包含 0 和 1 的事实——因此可以强制为逻辑索引`tempdata_x.trim`：

```
tempdata_x.trim[as.logical(tempdata_x.trim$overlap), 1:2]
tempdata_x.trim[as.logical(tempdata_x.trim$aboveMA), 1:2]
tempdata_x.trim[as.logical(tempdata_x.trim$belowMA), 1:2]
tempdata_x.trim[as.logical(tempdata_x.trim$crossUp), 1:2]
tempdata_x.trim[as.logical(tempdata_x.trim$crossDown), 1:2] 
```

我测试了你的 720 行文本文件的每一行——它有效。***

# java - 如何在 Java 中读取仅包含 1 行或 1 个单词的文件

> ID：13856191
> 
> 赞同：0
> 
> 时间：2012-12-13T08:55:40.987
> 
> 标签：java, file

我有一个文件，我知道该文件将始终只包含一个单词。那么读取此文件的最有效方法应该是什么？

我是否还必须为小文件创建输入流阅读器，**或者**是否有其他可用选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:58:07.340

好吧*，*必须将字节转换为字符。

我个人建议使用[Guava](http://guava-libraries.googlecode.com)，它可以让你写这样的东西：

```
String text = Files.toString(new File("..."), Charsets.UTF_8); 
```

显然番石榴包含*的远*不止这些。这种单一的方法并不值得，但它是实用程序类的积极宝库。Guava 和[Joda Time](http://joda-time.sf.net)是我离不开的两个库:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T08:58:23.113

使用扫描仪

```
File file = new File("filename");
Scanner sc = new Scanner(file);
System.out.println(sc.next()); //it will give you the first word 
```

如果您有 int,float... 作为第一个单词，您可以使用相应的函数，例如 nextInt(),nextFloat()...等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:18:26.957

**-**使用`InputStream`和`Scanner`读取文件。

**例如：**

```
public class Pass {

    public static void main(String[] args){

        File f = new File("E:\\karo.txt");
        Scanner scan;
        try {
            scan = new Scanner(f);

        while(scan.hasNextLine()){

            System.out.println(scan.nextLine());
        }

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

**-** `Guava`图书馆精美而有效地处理这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:57:30.300

使用 BufferedReader 和 FileReader 类。仅两行代码就足以读取一个单词/一行文件。

```
 BufferedReader br = new BufferedReader(new FileReader("Demo.txt"));
    System.out.println(br.readLine()); 
```

这是一个小程序。空文件将导致打印“null”作为输出。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

 public class SmallFileReader
       public static void main(String[] args) throws IOException {
            BufferedReader br = new BufferedReader(new FileReader("Demo.txt"));
            System.out.println(br.readLine());  
   }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T08:59:36.290

高效是指性能方面还是代码简单（懒惰的程序员）？

如果是第二个，那么我所知道的一切都比不上： `String fileContent = org.apache.commons.io.FileUtils.readFileToString("/your/file/name.txt")`

# c++ - 使用 C++ 进行机器人实时编程

> ID：13856211
> 
> 赞同：5
> 
> 时间：2012-12-13T08:56:40.843
> 
> 标签：c++, real-time, robot

我正在使用 C++ 和[OpenCV](http://en.wikipedia.org/wiki/OpenCV)进行机器人项目。在这一步中，我遇到了一个问题，其中包括：

我有两种方法`moveRight()`，`moveLeft()`我在代码中依次调用，但问题是第二个没有运行，因为第一个需要时间（机器人移动的时间），但是当我把它们放在`Sleep(5000)`它们之间时（我猜是五个几秒钟就足够了），一切都很好。

什么是避免使用的编程解决方案`Sleep`（因为它会产生一些其他问题）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T09:00:04.740

你可以尝试加[一层间接性](http://en.wikipedia.org/wiki/Indirection)。添加要执行的操作队列，将操作排入 moveLeft 和 moveRight 队列，并在其他地方（不同的线程）通过在执行下一个操作之前等待上一个操作完成来正确执行队列中的操作。理想情况下，您需要一种方法来检查操作是否完成，以便您可以以基于事件的方式对其进行编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:26:46.273

你永远不应该在机器人技术中“猜测”。你应该**知道**，**测量**你的动作需要多长时间并在你的代码中使用它。例如`moveRight()`，经常调用并让它检查它已经运行了多长时间。让它`true`在运行时返回并将其用作调用的条件`moveLeft()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T09:20:23.647

您可以使用计时器并在执行 MoveRight() 时将计时器设置为 5 秒，然后在计时器结束后执行 Moveleft()。

# wordpress - wordpress 中的 add_action,add_filter,user_can 等

> ID：13856214
> 
> 赞同：1
> 
> 时间：2012-12-13T08:56:49.847
> 
> 标签：wordpress

我已经开发 wordpress 好几天了，但是我没有找到像这样的方法：add_action、add_filter、user_can，我不知道他们指的是什么功能。更糟糕的是，我不知道参数，今天我想在用户列表管理面板中添加一个列，我幸运地找到了一个教程，这是代码

```
add_filter( 'manage_users_columns', 'add_user_column');
function add_user_column( $columns){
     $columns['available_stickers'] = __('Stickers Available', 'available_stickers');
     return $columns;   
}
add_filter('manage_users_custom_column',  'add_user_column_value', 10, 3);
function add_user_column_value( $value, $column_name, $user_id ){
     if ( 'available_sticker' == $column_name)
          $value = get_user_meta($user_id,"available_stickers",true);
     return $value;
} 
```

甚至以为我做到了，但我不知道参数`manage_users_columns`来自哪里或为什么我应该使用`manage_users_columns` 而不是其他代码？困惑，他们也有匹配的代码等`apply_filter`。有人可以帮助我走出迷宫，哎呀！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:46:55.507

WordPress 设计精美，因为它所做的大部分操作都不是直接执行的，而是通过所谓的*操作*和*过滤器*执行的。这使您（开发人员）可以*挂钩*任何这些操作。挂钩意味着您可以以非常干净的方式将自己的逻辑挤入 WP 的逻辑中间，只需声明您希望在使用相应挂钩的地方完成事情即可。更确切地说：

**行动**

因此，例如，当保存帖子时，WordPress 不只是保存帖子，它通过执行以下行来完成：

```
do_action( 'save_post', $post_ID, $post ); 
```

这是一种为此操作*命名*的方法(save_post)。这意味着两件事：

1）您可以通过在其他地方使用相同的代码行来执行完全相同的操作。

2）您可以添加*自己的逻辑，以在此操作期间执行*。如何？只需将您的自定义函数“添加”到操作中，如下所示：

```
add_action('save_post', 'name_of_the_function_you_want_to_execute_when_post_is_saved'); 
```

所以 'save_post' 是钩子的名称，`add_action`让您可以将自己的函数添加到该钩子的操作中并`do_action`实际执行该操作。

**过滤器**

过滤器类似于操作，但不是在执行命令时使用，而是用于处理值、对象、字符串或某些文本（“过滤”时）。再次强调，WordPress 不仅可以通过一种名为`apply_filters()`. 这使您可以像操作一样，*将您自己的过滤器实际添加*到已应用的过滤器中。因此，当显示帖子的内容时，WP 会执行：

```
apply_filters('the_content', $post->post_content); 
```

钩子的名字是`the_content`。如果您使用：

```
add_filter('the_content', 'your_function_to_execute_to_further_filter_content'); 
```

您可以有一个名为的函数，该函数`your_function_to_execute_to_further_filter_content()`可以将内容作为参数，并在您希望对其应用任何处理后返回过滤后的版本。然后，这种处理将应用于 WP 中使用钩子`the_content`执行这些过滤器的任何地方（包括 WP 默认过滤器、添加到同一挂钩的插件过滤器以及您自己的过滤器）。

所以在这里，您正在使用这些钩子，这样您就可以在不弄乱 WP 核心代码的情况下干扰 WP 操作。您声明了您希望执行的额外操作，并让 WP 意识到这一点。每当相应的钩子动作或过滤器被执行时，WP 就会有礼貌地执行你的函数。

# ruby - ruby中自定义标签解析的一种有效方法

> ID：13856216
> 
> 赞同：0
> 
> 时间：2012-12-13T08:56:59.163
> 
> 标签：ruby

我有一个像这样的哈希：

```
{:name => 'foo', :country => 'bar', :age => 22} 
```

我也有一个字符串

```
Hello ##name##, you are from ##country## and your age is ##age##. I like ##country## 
```

使用上面的哈希，我想解析这个字符串并用相应的值替换标签。所以解析后，字符串将如下所示：

```
Hello foo, you are from bar and your age is 22\. I like bar 
```

您是否建议借助正则表达式来解析它？在这种情况下，如果我在哈希中有 5 个值，那么我将不得不遍历字符串 5 次，并且每次解析一个标签。我不认为这是一个好的解决方案。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:18:43.803

这是我对问题的解决方案：

```
h = {:name => 'foo', :country => 'bar', :age => 22}
s = "Hello ##name##, you are from ##country## and your age is ##age##. I like ##country##}"
s.gsub!(/##([a-zA-Z]*)##/) {|not_needed| h[$1.to_sym]} 
```

它通常使用正则表达式进行单次传递，并进行我认为您需要的替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:16:38.717

看起来有一个解决方案取决于您使用的 ruby​​ 版本。对于 1.9.2，您可以使用哈希，如下所示：[https ://stackoverflow.com/a/8132638/1572626](https://stackoverflow.com/a/8132638/1572626)

不过，这个问题通常是相似的，所以也请阅读其他评论：[Ruby multiple string replacement](https://stackoverflow.com/questions/8132492/ruby-multiple-string-replacement)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:25:05.947

您可以将 String#gsub 与块一起使用：

```
 h = {:name => 'foo', :country => 'bar', :age => 22}
    s = 'Hello ##name##, you are from ##country## and your age is ##age##. I like ##country##'
    s.gsub(/##(.+?)##/) { |match| h[$1.to_sym] } 
```

# java - Ljava.lang.Object；无法转换为 com.duncansolutions.databus.bean.Fdjobs

> ID：13856218
> 
> 赞同：0
> 
> 时间：2012-12-13T08:57:03.510
> 
> 标签：java

在我的代码中

```
 List<Fdjobs> fdjobs=new ArrayList<Fdjobs>();
        fdjobs = (ArrayList<Fdjobs>)genericDao.namedQuery(Fdjobs.QUERYJOBS, hm);
Integer deactivateValue=new Integer(0);
 for (Fdjobs job : fdjobs) {
            job.setActiveJob(deactivateValue);
            job.addFDJobHistory();
            genericDao.update(job);

        } 
```

如果结果列表 fdjobs 的大小为零，我不会收到 ant 错误，但如果大小大于零，我会收到错误

```
[Ljava.lang.Object; cannot be cast to com.duncansolutions.databus.bean.Fdjobs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:59:41.997

`nameQuery()`方法不返回类型

```
 ArrayList<Fdjobs> 
```

请调试它。您可以使用

```
ArrayList<Object> 
```

为了这。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T09:02:34.970

错误很简单：你得到一个`Object[]`( `[Ljava.lang.Object`) 而不是`Fdjobs`从`List`你的`namedQuery`.

所以这个错误要么在你的 for-each 循环中`namedQuery`，要么取决于你想要实现的目标。

# bash - FTP上传失败

> ID：13856220
> 
> 赞同：0
> 
> 时间：2012-12-13T08:57:19.223
> 
> 标签：bash, unix, terminal

我有一个通过 FTP 备份我的 iOS 文件的 bash 脚本，我遇到了一些问题，我只是想知道是否有人可以帮助我？

这是我的脚本：

```
 #!/bin/bash
  mkdir zipfolder
  cp /var/mobile/Library/SMS/sms.db /var/root/zipfolder/
  cp /var/mobile/Library/Notes/notes.sqlite /var/root/zipfolder/
  cp /var/mobile/Library/Safari/Bookmarks.db /var/root/zipfolder/
  cp /var/mobile/Library/Safari/History.plist /var/root/zipfolder/
  cd var/root
  zip -r zippyy.zip zipfolder

  HOST=HOSTNAME
  USER=USERNAME
  PASS=PASSWORD

  ftp -inv $HOST << EOF
  user $USER $PASS
  cd sms
  LIST=$(ls | grep zippyy*.zip)

  FILECOUNT=0
  for FILE in $LIST
  do
      if [ -f $FILE ];
      then
          FILECOUNT+=1
  done
  FILECOUNT+=1
  NEXTDB="zippyy$FILECOUNT.db"
  mv zippyy.zip $NEXTDB

  ftp -inv $HOST << EOF    
  put $NEXTDB
  bye
  EOF

  rm -f zippyy.zip
  rmdir zipfolder 
```

我收到以下错误：

```
 ?Invalid command
  ?Invalid command
  We only support non-print format, sorry.
  ?Invalid command
  ?Invalid command
  ?Invalid command
  ?Invalid command
  ?Invalid command
  ?Invalid command
  ?Invalid command
  ?Invalid command
  ?Invalid command
  (local-file) (remote-file)

  rmdir: failed to remove 'zipfolder': Not a directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:38:53.017

为什么在脚本中使用 cp -i？-i 开关使副本“交互式”，因此期望用户输入，由于脚本，它不会得到。

此外，您能否使用“代码示例”格式而不是项目符号来格式化您的脚本！;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:12:08.660

格式化的新答案...

我不完全清楚你想要做什么。看起来您正试图找出 ftp 服务器上有多少现有备份，并将新备份重命名到列表末尾。

您不能在 ftp 服务器上执行代码（巨大的安全漏洞！），因此完成此操作的最佳方法可能是获取远程目录列表并在本地处理它。尝试使用类似的东西：

```
 ftp -inv $HOST << EOF
  user $USER $PASS
  cd sms
  dir . remote_dir.txt
  bye
  EOF 
```

{现在处理 remote_dir.txt 以获取新的备份名称}

```
 ftp -inv $HOST << EOF    
  user $USER $PASS
  put $NEXTDB
  bye
  EOF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:40:27.263

答案＃3格式化

尝试这样的事情（完全未经测试！）

```
#!/bin/bash

ROOTFOLDER="/var/root"
ZIPNAME="zipfolder"
ZIPFOLDER=$ROOTFOLDER/$ZIPNAME
LIBFOLDER="/var/mobile/Library"
ZIPFILE="zippyy.zip"

mkdir -p $ZIPFOLDER
cp $LIBFOLDER/SMS/sms.db $ZIPFOLDER/
cp $LIBFOLDER/Notes/notes.sqlite $ZIPFOLDER/
cp $LIBFOLDER/Safari/Bookmarks.db $ZIPFOLDER/
cp $LIBFOLDER/Safari/History.plist $ZIPFOLDER/
cd $ROOTFOLDER
zip -r $ZIPFILE $ZIPNAME

HOST=HOSTNAME
USER=USERNAME
PASS=PASSWORD

ftp -inv $HOST << EOF
user $USER $PASS
cd sms
dir . remote_dir.txt
bye
EOF

FILECOUNT=$(grep zippyy remote_dir.txt | wc -l)
NEXTDB="zippyy${FILECOUNT}.db"
mv $ZIPFILE $NEXTDB

ftp -inv $HOST << EOF
user $USER $PASS
put $NEXTDB
bye
EOF 
```

# vim - vim 上是否存在 emacs 的“Mx 术语”？

> ID：13856221
> 
> 赞同：0
> 
> 时间：2012-12-13T08:57:29.173
> 
> 标签：vim, emacs, split

> **可能重复：**
> [如何在 Vim 窗口中打开 Shell？](https://stackoverflow.com/questions/2782752/how-can-i-open-a-shell-inside-a-vim-window)

在 emacs 中有一个惊人的功能，它允许用户将窗口分成两个窗口并在一个窗口上运行 shell 命令。它存在于vim上吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:41:19.870

有几个，但[Conque](http://code.google.com/p/conque/)似乎是功能最齐全的一个。

# google-maps - 如何在不重新创建的情况下将 Google 地图移动到新地址？

> ID：13856224
> 
> 赞同：0
> 
> 时间：2012-12-13T08:57:47.693
> 
> 标签：google-maps

假设地图已完全绘制。
现在，用户可以插入一个新地址并点击“去那里”。
可以在不重新创建地图的情况下将地图移动到新地址吗？

需要明确的是，在绘制地图后，我可以避免再次使用：

```
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

而是使用类似的东西

```
map.goTo(<new address>); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:16:01.083

您需要的方法是 panTo。

有关详细信息，请参阅[Google Maps Javascript API V3 参考](https://developers.google.com/maps/documentation/javascript/reference#Map)。

```
panTo(latLng:LatLng) 
```

> 将地图的中心更改为给定的 LatLng。如果变化小于地图的宽度和高度，则过渡将平滑动画。

# jquery - 如何仅针对父元素？

> ID：13856227
> 
> 赞同：1
> 
> 时间：2012-12-13T08:57:57.380
> 
> 标签：jquery

我有以下标记：

```
<ul>
    <li>
        <a href="#"><img src="sample-big-product.png" alt="" title="" /></a>
        <span><a href="#">View Product</a></span>
        <ul><li>1,2,3</li></ul>
            <h2>Featured product name</h2>
        <p>Lorem ipsum dolor sit amet, cosetur adispci elit. Morbi poseure ante porta justo...</p>
    </li>

    <li>
        <a href="#"><img src="sample-big-product.png" alt="" title="" /></a>
        <span><a href="#">View Product</a></span>
            <ul><li>1,2,3</li></ul>
        <h2>Featured product name</h2>
        <p>Lorem ipsum dolor sit amet, cosetur adispci elit. Morbi poseure ante porta justo...</p>
    </li>
    <li>
        <a href="#"><img src="sample-big-product.png" alt="" title="" /></a>
        <span><a href="#">View Product</a></span>

        <h2>Featured product name</h2>
        <p>Lorem ipsum dolor sit amet, cosetur adispci elit. Morbi poseure ante porta justo...</p>
    </li>
    <li>
        <a href="#"><img src="sample-big-product.png" alt="" title="" /></a>
        <span><a href="#">View Product</a></span>

        <h2>Featured product name</h2>
        <p>Lorem ipsum dolor sit amet, cosetur adispci elit. Morbi poseure ante porta justo...</p>
    </li>
</ul> 
```

这是我的 jquery，所以在这里我针对所有 LI 和所有 UL。但我只想针对 ul li 而不是 ul li ul li

```
// get all available UL and LI elements...
var li_elements = container.find("LI").clone();

// remove the current content so that we can rebuild it for the slider...
container.find("UL").remove(); 
```

ps 显然我可以简单地将 .class 添加到它们。但我不想让标记复杂化......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:01:11.167

使用`>`“直接子代”选择器。假设`container`是一个引用顶级父元素的 jQuery 对象`ul`，这应该可以工作：

```
var li_elements = container.find("> ul > li").clone();
container.find("> ul").remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:01:42.833

如果您只想选择 的直接后代`ul`，请使用该[`.children`](http://api.jquery.com/children/)方法（假设`container`是`ul`元素）

```
container.children("li"); 
```

如果只想选择包含其他无序列表的无序列表，可以使用[`:has()`](http://api.jquery.com/has-selector/)选择器（假设`container`是 的祖先`ul`）

```
container.find("ul:has(ul)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:04:48.697

Sandro，如果你只想要第一次出现的 ul li 而跳过其余的，那么使用“first()”，例如 .var li_elements = container.find("LI").first() //这给了你第一个 li

有关更多信息，请参阅[http://api.jquery.com/first/](http://api.jquery.com/first/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:31:56.560

我不知道你想要实现什么，但据了解，我创建了一个小提琴：

**[http://jsfiddle.net/AFM2P/](http://jsfiddle.net/AFM2P/)**

在这个小提琴中，我有 c`reated a hover event`和`removed the direct children of the hovered ul`

( *`i guess you want to achieve something like this`*)

这是我尝试过的：

```
$('ul:first').hover(function(){
    $('ul',this).remove(); //<---------This will remove the child ul 
});                        //           of the hovered ul 
```

# android - onConfigurationchanged 不通过 jellybean 调用（4.2.1）

> ID：13856229
> 
> 赞同：7
> 
> 时间：2012-12-13T08:58:07.177
> 
> 标签：android, android-4.2-jelly-bean

我真的为这个问题而苦恼。我已经设置了标志`android:configChanges="keyboardHidden|orientation|locale"`

但是当我更改语言配置时，`onconfigurationchanged`不会调用函数。奇怪的是，我的代码在其他 android 平台上运行良好。

我在这里搜索了这个问题。有人说我需要将`sdk`版本设置得更低。但它没有用。

请给我一些提示。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T18:53:24.207

添加`layoutDirection`属性，例如，`android:configChanges="keyboardHidden|orientation|locale|layoutDirection"`如果您正在使用 API 17。

`layoutDirection`这也与 API 17 中引入的界面语言更改有关。关于这一事实[的一段 android 文档](http://developer.android.com/guide/topics/manifest/activity-element.html)`android:configChanges`还不够明确，但至少我们有：

> **layoutDirection：**布局方向发生了变化。例如，从左到右 (LTR) 更改为从右到左 (RTL)。**在 API 级别 17 中添加**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-11T09:09:55.647

从 Android 4.2 开始，当我们更改语言时，布局方向将被更新。然后我们必须添加“locale”和“layoutDirection”，如下所示 android:configChanges="locale|layoutDirection"，届时将调用 onConfigurationChanged()。

这与 API 13 中的“orientation”和“screenSize”类似。

* * *

## 回答 #3

> 赞同：-13
> 
> 时间：2013-10-30T03:43:47.053

你像这样配置 AndroidManifest.xml 吗？

> android:minSdkVersion="4" android:targetSdkVersion="17"

你需要删除 android:targetSdkVersion 属性

# ravendb - RavenDB 建模 - 单个文档与多个文档？

> ID：13856233
> 
> 赞同：1
> 
> 时间：2012-12-13T08:58:16.710
> 
> 标签：ravendb

给定一个如下的简单示例，我想要一些关于是否存储为单个文档与多个文档的指导。

```
class User
{
    public string Id;
    public string UserName;
    public List<Post> Posts;
}

class Post
{
    public string Id;
    public string Content;
} 
```

存储数据后，有时我会想要给定用户的所有帖子。有时我可能想要满足特定条件的多个用户的帖子。

我应该将每个用户存储为文档（嵌入帖子），还是将用户和帖子存储为单独的文档并在我的帖子中使用某种 ID 将其链接回用户是否更有意义？

现在，如果每个用户都属于一个组织（我的应用程序中将有数百个组织）怎么办？

```
class Organization
{
      public string Id;
      public List<User> users;
} 
```

那么我应该继续使用单一文档方法吗？在这种情况下，我将为每个组织存储一个巨大的文档，其中将包含嵌入式用户，而这些用户又包含嵌入式帖子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:18:03.537

您应该将它们作为单独的文件保存。User、Organization 和 Post 是聚合实体的绝佳示例，在 Raven 中，每个聚合通常是它自己的文档。

只有不是聚合的实体才应该嵌套在同一个文档中。例如，在 Post 中，您可能有一个`List<Comment>`. Comment 和 Post 都是实体，但只有 Post 是聚合。

您应该使用参考对它们进行建模：

```
public class User
{
    public string Id { get; set; }
    public string Name { get; set; }
    public List<string> PostIds { get; set; }
}

public class Post
{
    public string Id { get; set; }
    public string Content { get; set; }
}

public class Organization
{
    public string Id { get; set; }
    public List<string> UserIds { get; set; }
} 
```

或者，您可以在适当的情况下将一些数据非规范化到您的引用中：

```
public class UserRef
{
    public string Id { get; set; }
    public string Name { get; set; }
}

public class Organization
{
    public string Id { get; set; }
    public List<UserRef> Users { get; set; }
} 
```

将用户名非规范化到组织文档中的好处是在显示组织时不需要获取每个用户文档。但是，它的缺点是必须在任何时候更改用户名时更新组织文档。每次考虑一段关系时，你都应该权衡利弊。对于所有情况，没有一个正确的答案。

此外，您应该考虑如何真正使用数据。在实践中，您可能会发现您的`Organization`班级可能根本不需要用户列表。相反，您可以在类上放置一个字符串`OrganizationId`属性。`User`这将更容易维护，如果您想要组织中的用户列表，您可以使用索引查询该信息。

[您应该阅读更多关于文档结构设计](http://ravendb.net/docs/theory/document-structure-design)和[处理文档关系](http://ravendb.net/docs/client-api/querying/handling-document-relationships)的 raven 文档。

# touchscreen - 使用一个链接根据设备打开不同的 URL

> ID：13856234
> 
> 赞同：3
> 
> 时间：2012-12-13T08:58:17.183
> 
> 标签：touchscreen

对不起，如果这有点容易，但我还没有在网上找到答案（还）......

我想要一个指向两个不同 URL 的链接，具体取决于访问该站点的设备。因此，例如，我单击一个链接，如果我使用触摸屏在任何东西上，它会将我发送到 page01.htm 但如果我使用鼠标访问该站点（即可以悬停的东西），它会将我发送到 page02 .htm。

本质上，这是在触摸屏上伪造翻转效果。在 pc 版上，翻转效果在地图上突出显示不同的州，然后点击进入特定州的页面。在触摸屏上，我们希望能够单击地图上的状态（这将突出显示状态），然后再次单击以进入特定于状态的页面。

如果有更好的方法可以做到这一点，我完全愿意接受建议！:-)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:07:08.763

You can try something like this.

```
<?php
function istouch() {
    //detect if client device is touch (not 100% reliabe I guess)
    if(preg_match('~iPad|iPhone|iPod|Android|webOS~',$_SERVER['HTTP_USER_AGENT'])) return true;
    else return false;
}
?> 
```

Then when user access your page, and this function returns `true` you can do redirection to page you need.

# iphone - 如何在分发和发布模式下限制 NSLog -iPhone

> ID：13856238
> 
> 赞同：1
> 
> 时间：2012-12-13T08:58:40.467
> 
> 标签：iphone, objective-c

我想`NSLog`仅在调试模式下启用。我需要`NSLog`在分发和发布模式下进行限制。

我正在使用下面的代码，

```
#ifdef DEBUG
#   define NSLog(...) NSLog(__VA_ARGS__);
#else 
#   define NSLog(...)
#endif 
```

但它不起作用。任何人都请尽可能简短地解释我。我应该在每个`NSLog`语句或每个类中或仅在 .PCH 类中使用代码。

感谢您的考虑和努力

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:03:43.223

将此写入您的 .pch 文件

```
#ifndef DLog
#ifdef DEBUG
#define DLog(_format_, ...) NSLog(_format_, ## __VA_ARGS__)
#else
#define DLog(_format_, ...)
#endif
#endif 
```

在此之后使用 DLog 而不是 NSLog 来满足您的目标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:06:42.740

Put this into your `.pch` file

```
#ifndef DEBUG
#undef NSLog
#define NSLog(args, ...)
#endif 
```

# ios - iOS GameCenter 排行榜仅在沙盒模式下显示我的分数

> ID：13856239
> 
> 赞同：8
> 
> 时间：2012-12-13T08:59:03.743
> 
> 标签：ios, game-center, leaderboard, appstore-sandbox

我在沙盒模式下为我的游戏创建了排行榜。然后我尝试使用不同的游戏中心帐户玩游戏。但我只能看到当前登录帐户的分数。这是对的吗？或者我错过了什么？如何用一堆记录填充沙盒排行榜来测试我的游戏？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T20:37:25.577

是的，这很正常。在沙盒模式下，您只能看到自己的分数。

在你将你的应用提交到应用商店并且它不使用沙盒模式后，你可以看到每个人的分数。（Gamecenter 不会立即更新，因此您可能需要等待一段时间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T05:32:13.863

我没有足够的声誉来发表评论，所以我写下我的回复作为答案。这样的事情我也经历过。做了一堆沙盒测试账号，发现只能看到当前登录玩家的分数。

然而，一段时间后（我不确定具体多久），其他玩家的分数出现在排行榜上。所以也许只要给它几个小时左右的分数就会出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:55:09.347

你会看到分数。这需要时间，真实账户也是一样的。但是有一个技巧可以更快地查看，只需注销并在这些帐户之间登录（切换），这会迫使苹果服务器更快地为您显示新分数。

# xna-4.0 - XNA 应用程序可以在 Windows RT 上运行吗？

> ID：13856240
> 
> 赞同：1
> 
> 时间：2012-12-13T08:59:14.620
> 
> 标签：xna-4.0

如何部署 XNA 应用程序以在 ARM 平板电脑上运行的 Windows RT 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:02:54.583

CodePlex 上的[XnaWinRT 项目](http://xnawinrt.codeplex.com/)似乎允许您这样做。所以答案一定是**肯定的，有点**。

它说：

> .... 但是，微软官方不支持 XNA Game Studio。这导致开发人员迁移到 DirectX，这是一个非托管且广泛的大型游戏开发框架....，官方在 Windows 8（WinRT）中不支持 XNA Game Studio。所以这是一个使用 .NET 4.5 和 Metro Style API 制作的轻量级 XNA 框架，并且是用于 Windows 8 的 XNA 最基本和最粗略的形式。更多的开发正在进行中。帮助表示赞赏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:32:58.470

不，它不是，也不会被支持。

然而，有一些很棒的替代品，比如尝试映射到 XNA api 的 monogame，您也可以尝试 Unity，虽然不是 XNA，但它确实使用 c#，并且非常简单和灵活。

尝试 Unity 或 monogame，但请记住，unity 不是 XNA，虽然 monogame 看起来像 XNA（从 API 级别），但速度要慢 20 倍。

# package - 在 Red Hat (RHEL) 上安装 Cairo 包时出错

> ID：13856242
> 
> 赞同：2
> 
> 时间：2012-12-13T08:59:27.937
> 
> 标签：package, redhat, cairo, rhel

我正在研究 R，我需要安装`Cairo`软件包。

```
install.packages("Cairo") 
```

**规范** R 版本 2.15.0 (2012-03-30) 操作系统：Red Hat Enterprise Linux Server 版本 6.1 (Santiago)

我收到以下错误消息：

```
xlib-backend.c:34:74: fatal error: X11/Intrinsic.h: No such file or directory
compilation terminated.
make: *** [xlib-backend.o] Error 1
ERROR: compilation failed for package ‘Cairo’
* removing ‘/usr/local/lib64/R/library/Cairo’

The downloaded source packages are in
    ‘/tmp/RtmpqtvjPA/downloaded_packages’
Updating HTML index of packages in '.Library'
Making packages.html  ... done
Warning message:
In install.packages("Cairo") :
  installation of package ‘Cairo’ had non-zero exit status 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-05T17:44:22.727

有同样的错误。要解决：

运行以下 3 个已经安装的部件，但运行和检查并没有什么坏处

```
yum install libX11
yum install libX11-devel
yum install libXt 
```

然后运行以下解决了我的问题：

```
yum install libXt-devel 
```

之后能够在 R 2.15.0 RHEL6.1 中 install.packages("Cairo")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-05T09:47:15.127

在 Alpine-linux 上，我使用以下方法解决了这个问题：

```
apk add cairo-dev 
```

# nunit - 如何在 NUnit 2.6.2 中跨测试用例传递值？

> ID：13856246
> 
> 赞同：1
> 
> 时间：2012-12-13T08:59:32.213
> 
> 标签：nunit

我在单元测试用例中有两种方法，其中第一个将记录插入数据库，第二个检索数据。我希望用于检索数据的输入参数应该是生成到第一个方法中的 id。

```
private int savedrecordid =0;
private object[] SavedRecordId{ get { return new object[] { new object[] { savedrecordid  } }; } }

[Test]
public void InsertInfo()
{
    Info oInfo = new Info();
    oInfo.Desc ="Some Description here !!!";
    savedrecordid  = InsertInfoToDb(oInfo);
}

[Test]
[TestCaseSource("SavedRecordId")]
public void GetInfo(int savedId)
{
    Info oInfo  = GetInfoFromDb(savedId);
} 
```

我知道每个测试用例都是单独执行的，并且我们不能跨测试方法共享变量的单独实例。

请让我知道是否有办法在测试用例之间共享参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T10:12:41.500

您描述的情况是单元测试的反模式之一：单元测试应该是独立的，不应该依赖于它们运行的​​顺序。您可以在[xUnit 模式网站上](http://xunitpatterns.com)找到更多信息：

*   [单元测试应该使用*Fresh Fixture来实现*](http://xunitpatterns.com/Fresh%20Fixture.html)
*   [反花纹*共享夹具*](http://xunitpatterns.com/Shared%20Fixture.html)

而且您的两个单元测试都没有断言，因此它们无法证明它们是否通过。

它们也依赖于数据库，即外部资源，因此它们不是单元测试而是集成测试。

所以我的建议是重写它们：

*   使用[模拟对象](http://xunitpatterns.com/Mock%20Object.html)与数据库解耦
*   `InsertInfo`应该插入信息并使用模拟验证是否执行了带有参数的适当*插入*调用
*   `GetInfo`应该使用返回假的模拟`record`并验证它是否正常工作

# 例子

注意：* 我必须将提单与数据库操作分开……*……并对您的解决方案做出一些假设

```
// Repository incapsulates work with Database
public abstract class Repository<T>
    where T : class
{
    public abstract void Save(T entity);
    public abstract IEnumerable<T> GetAll();
}

// Class under Test
public class SomeRule
{
    private readonly Repository<Info> repository;

    public SomeRule(Repository<Info> repository)
    {
        this.repository = repository;
    }

    public int InsertInfoToDb(Info oInfo)
    {
        repository.Save(oInfo);

        return oInfo.Id;
    }

    public Info GetInfoFromDb(int id)
    {
        return repository.GetAll().Single(info => info.Id == id);
    }
}

// Actual unittests
[Test]
public void SomeRule_InsertInfo_WasInserted() // ex. InsertInfo
{
    // Arrange
    Info oInfo = new Info();
    oInfo.Desc = "Some Description here !!!";

    var repositoryMock = MockRepository.GenerateStrictMock<Repository<Info>>();

    repositoryMock.Expect(m => m.Save(Arg<Info>.Is.NotNull));

    // Act
    var savedrecordid  = new SomeRule(repositoryMock).InsertInfoToDb(oInfo);

    // Assert
    repositoryMock.VerifyAllExpectations();
}

[Test]
public void SomeRule_GetInfo_ReciveCorrectInfo() // ex. GetInfo
{
    // Arrange
    var expectedId = 1;
    var expectedInfo = new Info { Id = expectedId, Desc = "Something" };

    var repositoryMock = MockRepository.GenerateStrictMock<Repository<Info>>();

    repositoryMock.Expect(m => m.GetAll()).Return(new [] { expectedInfo }.AsEnumerable());

    // Act 
    Info receivedInfo  = new SomeRule(repositoryMock).GetInfoFromDb(expectedId);

    // Assert
    repositoryMock.VerifyAllExpectations();

    Assert.That(receivedInfo, Is.Not.Null.And.SameAs(expectedInfo));
} 
```

ps：[这里有完整的例子](https://gist.github.com/4318084)

# android - Phonegap 的 SharedPreferences 是否支持以 xml 格式存储文件？

> ID：13856249
> 
> 赞同：0
> 
> 时间：2012-12-13T08:59:46.093
> 
> 标签：android, cordova, sharedpreferences, phonegap-plugins

我用谷歌搜索了很多，但没有得到正确的答案。phonegap for android 是否支持 SharedPreferences 以 xml 格式存储键和值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:07:13.737

Phonegap is not providing SharedPreference directly.

There may be different ways to follow the same scenarios.

```
 [1] You can make plugin calls from phonegap code to Android and use SharedPreference there.

   [2] You can use html5's localstorage as well, if there is no need of storing large amount of data. 
```

Edited :

```
 [3] You can also use JavascriptInterface to achieve such functionality. This will be more easy then implement custom phonegap plugin. 
```

This are some ways and may be there are many available also.

This you can implement easily.

Hope this helps you.

Thanks.

# paypal - Paypal 托管的购物车表单按钮模拟

> ID：13856260
> 
> 赞同：0
> 
> 时间：2012-12-13T09:00:19.280
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments

我在我的网站上使用 Paypal 托管的按钮。当访问者单击我网站上的按钮时，会处理服务器上的所有数据，之后我通过 api 特殊链接从贝宝获取并简单地将访问者重定向到贝宝

```
https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=XXXXXXXXXXXXX 
```

**贝宝帐户、自定义字段**、价格和帐户等所有数据都是安全的。

现在我想在我的网站上实现第三方购物车。我想在服务器端准备所有数据，如产品名称、价格、折扣、优惠券、特价等，并将访问者重定向到贝宝

但我在 Paypal 手册上找不到类似购物车表单的托管按钮

所以我应该使用带有隐藏字段的常用表单

```
 <div>
    <form method="post" action="https://www.sandbox.paypal.com/cgi-bin/webscr">
        <input type="hidden" name="cmd" value="_cart">
        <input type="hidden" name="upload" value="1">
        <input type="hidden" name="business" value="my@email.com">
        <input type="hidden" name="custom" value="asgasgasgagahsdgsdghsgag">
        <input type="hidden" name="currency_code" value="EUR">
        <input type="hidden" name="return" value="http://return.link">
        <input type="hidden" name="cancel_return" value="http://cancel.link">
        <ul>
            <li>
                <input name="quantity_1" value="1">
                <input type="hidden" name="item_name_1" value="Product 1">
                <input type="hidden" name="amount_1" value="25.01">
                <input type="hidden" name="discount_amount_1" value="5.00">
            </li>
            <li>
                <input name="quantity_2" value="1">
                <input type="hidden" name="item_name_2" value="Product 2">
                <input type="hidden" name="amount_2" value="12.71">
                <input type="hidden" name="discount_amount_2" value="5.00">
            </li>
        </ul>
        <input type="submit" value="Checkout">
    </form>
</div> 
```

我不喜欢这种方式，因为帐户**电子邮件、自定义变量**、价格和折扣等数据是安全的

贝宝中是否有类似购物车的托管按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:07:06.697

我建议使用[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec) API 而不是 Payments Standard。这使您可以完全自由地以您需要的方式自定义结帐解决方案并使用您自己的动态变量等，但一切都很好地对用户隐藏，因为这一切都发生在 API 上。

# jquery - 模态弹出下拉列表值绑定两次

> ID：13856263
> 
> 赞同：0
> 
> 时间：2012-12-13T09:00:29.350
> 
> 标签：jquery, asp.net-mvc

我在 asp.net MVC 页面的部分视图中有下拉列表。我将部分视图显示到模态弹出窗口中。我将值从数据库绑定到下拉列表

我的问题是当我将值绑定到下拉列表时它会绑定两次？谁能告诉我为什么会这样

任何帮助，将不胜感激？？

```
<select id="EntityType"></select> 
```

```
function Test() {
    $.ajax({ 
        url: '/../MyFunction/',
        type: 'POST',
        dataType: 'json',
        success: function (data) {   
            var options = $('#ddlcountry);                    
            $.each(data, function() {
                options.append($('<option/>').val(this.SHId).text(this.Name));
            });
        } // ajax callback
    });  // ajax call
} 
```

这是我得到的输出

> 值 1 值
> 2值 3 值 1 值 2 值 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:16:31.740

`$('#ddlcountry').empty()`在添加新选项之前尝试使用清除选项。

```
$('#ddlcountry').empty();
var options = $('#ddlcountry');   
$.each(data, function() {
   options.append($('<option/>').val(this.SHId).text(this.Name));
}); 
```

# scala - 使用 Scala 的 Joda Time 类损坏错误

> ID：13856266
> 
> 赞同：91
> 
> 时间：2012-12-13T09:00:43.637
> 
> 标签：scala, sbt, jodatime

我正在将 Joda Time 存储库添加到 SBT

```
libraryDependencies ++= Seq(
  "joda-time"         % "joda-time"           % "2.1"
) 
```

然后我像这样愉快地使用它：

```
 val ymd = org.joda.time.format.DateTimeFormat.forPattern("yyyyMMdd")
  ymd.parseDateTime("20121212") 
```

但是，当我在 SBT 中编译项目时，我感到很讨厌：

```
[warn] Class org.joda.convert.FromString not found - continuing with a stub.
[warn] Caught: java.lang.NullPointerException while parsing annotations in /home/jack/.ivy2/cache/joda-time/joda-time/jars/joda-time-2.1.jar(org/joda/time/DateTime.class)
[error] error while loading DateTime, class file '/home/jack/.ivy2/cache/joda-time/joda-time/jars/joda-time-2.1.jar(org/joda/time/DateTime.class)' is broken
[error] (class java.lang.RuntimeException/bad constant pool tag 10 at byte 42) 
```

我尝试了 joda-time 的 2.0 版本，但得到了同样的错误。

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-12-13T09:07:07.607

Add this dependency:

> "org.joda" % "joda-convert" % "1.8.1"

It's an optional dependency of joda-time. I had to add it in my own project for the scala compiler to accept working with the joda-time jar.

Your issue seems to be the same.

Version is as at time of editing, latest versions can be found [here](https://mvnrepository.com/artifact/org.joda/joda-convert)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T17:59:40.183

我遇到了类似的问题：

```
[warn] Class net.jcip.annotations.NotThreadSafe not found - continuing with a stub.
[warn] Caught: java.lang.NullPointerException while parsing annotations in ~/.ivy2-p2/cache/org.opensaml/xmltooling/jars/xmltooling-1.3.4.jar(org/opensaml/xml/util/IDIndex.class)
[error] error while loading AttributeMap, class file '~/.ivy2-p2/cache/org.opensaml/xmltooling/jars/xmltooling-1.3.4.jar(org/opensaml/xml/util/AttributeMap.class)' is broken
[error] (class java.lang.RuntimeException/bad constant pool index: 0 at pos: 12058) 
```

显式添加依赖`jcip-annotations-1.0.jar`项解决了该问题。

# ajax - Google 字体 - 通过 ajax 获取可用字体列表？

> ID：13856272
> 
> 赞同：3
> 
> 时间：2012-12-13T09:00:59.867
> 
> 标签：ajax, list, fonts, google-font-api

我需要获取 Google Fonts 上所有可用字体的列表并将它们显示在下拉列表中，但我无法理解 Google Fonts 的文档。

这是我到目前为止所得到的。

当我在网络浏览器中访问这个时，我得到一个包含所有字体的 json 响应，正如预期的那样：

```
https://www.googleapis.com/webfonts/v1/webfonts?sort=popularity&key={my-key-here} 
```

但是当我 ajax 时，我在控制台中得到了这个：

```
XMLHttpRequest cannot load https://www.googleapis.com/webfonts/v1/webfonts?sort=popularity&key={my-key-here}. Origin {domain} is not allowed by Access-Control-Allow-Origin. 
```

顺便说一句，我正在使用 jQuery。都试过了`$.ajax`和`$.getJSON`。

经过一番谷歌搜索后，我意识到也许我需要使用[webfont 加载器](https://developers.google.com/webfonts/docs/webfont_loader)来检索列表？好吧，够公平的。所以我将脚本添加到页面：

```
<script src="http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"></script> 
```

但是然后呢？API 似乎只允许获取和应用特定的字体，它实际上并没有返回任何数据，不是吗？

谁能指出我正确的方向或告诉我如何提出请求？解析返回的数据并在之后处理它没什么大不了的，但我就是不知道如何实际*获取*数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:43:12.517

好的，我遇到了同样的问题，在新窗口中打开 URL 本身可以正常工作，但它不能作为 ajax 请求工作。

您的 ajax/json 请求是正确的：

```
https://www.googleapis.com/webfonts/v1/webfonts?key={my-key-here} 
```

而且你**不需要**添加这一行：

`<script src="http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"></script>`

*似乎您**因为 google 服务器**而不是您的代码而一无所获。如果你新创建了一个 API 密钥或者你最近激活了你的 webfont 服务，**给它几分钟**，你很快就能使用你的 webfont 服务*

只是为了为您确认，请尝试以下 JSON 请求，它可以完美运行：

```
$(document).ready(function() {
    $.getJSON('https://www.googleapis.com/webfonts/v1/webfonts?key=MY_API_KEY', function(response) {
        //alert('json object fetched successfully!');
    });
}); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-13T09:07:09.737

To retrieve the dynamic list of web fonts offered by the Google Web Fonts service, send the following request:

```
https://www.googleapis.com/webfonts/v1/webfonts?key=YOUR-API-KEY 
```

Source: Google Web Fonts API - Developer API

# apache2 - ZPanelcp，域激活不起作用

> ID：13856276
> 
> 赞同：2
> 
> 时间：2012-12-13T09:01:17.117
> 
> 标签：apache2

-大家好，我只是租了一台专用服务器（ubuntu 12.4）并安装了apache + php，mySQL等......但是使用SSH创建域（虚拟主机）有点费力所以我决定安装一些GUI管理面板，还决定使用 ZPanelcp 的最新版本，所以一切都安装得很好，没有错误，我第一次设置了两个域，例如：

new.domain.com

new.otherdomain.com

这些域在没有为这些域设置 zpanel DNS 的情况下已成功激活，但第二天我注意到当我尝试在我的 ZPanel 中再次创建其他域时显示为“实时”但在我的网络浏览器中看不到，所以实际上它们没有被激活，好的第一次我再次运行守护程序并重新启动 BIND 也重新启动 apache 我尝试在我的服务器 conf 文件中进行一些更改但没有我重新启动我的服务器也没有我的服务器使用一个静态 IP。

这是我的 Zpanel，apache2 conf 文件。

Apache2 文件：

*文件夹文件：*

**/etc/apache2/apache2.conf**

```
# Here is last lines of this files  related to my problem
# Include of directories ignores editors' and dpkg's backup files,
# see the comments above for details.

# Include generic snippets of statements
Include conf.d/

# Include the virtual host configurations:
Include sites-enabled/

ServerName cp.zpanel.com
Include /etc/zpanel/configs/apache/httpd.conf 
```

**/etc/apache2/ports.conf**

```
# If you just change the port or add more ports here, you will likely also
# have to change the VirtualHost statement in
# /etc/apache2/sites-enabled/000-default
# This is also true if you have upgraded from before 2.2.9-3 (i.e. from
# Debian etch). See /usr/share/doc/apache2.2-common/NEWS.Debian.gz and
# README.Debian.gz

NameVirtualHost *:80
Listen 80

<IfModule mod_ssl.c>
    # If you add NameVirtualHost *:443 here, you will also have to change
    # the VirtualHost statement in /etc/apache2/sites-available/default-ssl
    # to <VirtualHost *:443>
    # Server Name Indication for SSL named virtual hosts is currently not
    # supported by MSIE on Windows XP.
    Listen 443
</IfModule>

<IfModule mod_gnutls.c>
    Listen 443
</IfModule> 
```

**/etc/apache2/sites-enabled/000-default**

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost

        DocumentRoot /var/www
        <Directory />
                Options FollowSymLinks
                AllowOverride All
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride All
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

**/etc/apache2/sites-available/default**

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost

        DocumentRoot /var/www
        <Directory />
                Options FollowSymLinks
                AllowOverride All
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride All
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

**/etc/zpanel/configs/apache/httpd.conf**

```
# ZPanel Apache Include file for CentOS Linux
# Written by Bobby Allen, 15/05/2011

# Set the Zpanel Alias (used for development, sable will eventually use a VHOST)
Alias /zpanel /etc/zpanel/panel

# Setup the directory settings and PHP security flags for the Zpanel application directory.
<Directory /etc/zpanel/panel>
        Options FollowSymLinks
        DirectoryIndex index.php
        <IfModule mod_php5.c>
                AddType application/x-httpd-php .php
                php_flag magic_quotes_gpc Off
                php_flag track_vars On
                php_flag register_globals Off
                php_admin_value upload_tmp_dir /var/zpanel/temp
        </IfModule>

</Directory>

# Disallow web access to directories that don't need it/that we don't want people looking in!
<Directory /etc/zpanel/panel/cnf>
    Order Deny,Allow
    Deny from All
</Directory>

# Set server tokens (security??)
ServerTokens Maj

# Now we include the generic VHOST configuration file that holds all the ZPanel user hosted vhost data
Include /etc/zpanel/configs/apache/httpd-vhosts.conf 
```

**/etc/zpanel/configs/apache/httpd-vhosts.conf**

```
################################################################
# Apache VHOST configuration file
# Automatically generated by ZPanel 10.0.1
# Generated on: 09:15 13th Dec 2012 CET
################################################################

NameVirtualHost *:80

# Configuration for ZPanel control panel.
<VirtualHost *:80>
ServerAdmin zadmin@localhost
DocumentRoot "/etc/zpanel/panel/"
ServerName cp.zpanel.com
ServerAlias *.cp.zpanel.com
AddType application/x-httpd-php .php
<Directory "/etc/zpanel/panel/">
Options FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
</Directory>

# Custom settings are loaded below this line (if any exist)

</VirtualHost>

################################################################
# ZPanel generated VHOST configurations below.....
################################################################

# DOMAIN: new.domain.com
<virtualhost *:80>
ServerName new.domain.com
ServerAlias new.domain.com www.new.domain.com
ServerAdmin zadmin@localhost
DocumentRoot "/var/zpanel/hostdata/zadmin/public_html/new_domain_com"
php_admin_value open_basedir "/var/zpanel/hostdata/zadmin/public_html/new_domain_com:/var/zpanel/temp/"
php_admin_value suhosin.executor.func.blacklist "passthru, show_source, shell_exec, system, pcntl_exec, popen, pclose, proc_open, proc_nice, proc_terminate, proc_get_status, proc_close, leak, apache_child_$
ErrorLog "/var/zpanel/logs/domains/zadmin/new.domain.com-error.log"
CustomLog "/var/zpanel/logs/domains/zadmin/new.domain.com-access.log" combined
CustomLog "/var/zpanel/logs/domains/zadmin/new.domain.com-bandwidth.log" common
<Directory />
Options FollowSymLinks Indexes
AllowOverride All
Order Allow,Deny
Allow from all
</Directory>
AddType application/x-httpd-php .php3 .php
ScriptAlias /cgi-bin/ "/_cgi-bin/"
<location /cgi-bin>
AddHandler cgi-script .cgi .pl
Options ExecCGI -Indexes
</location>
ErrorDocument 403 /_errorpages/403.html
ErrorDocument 500 /_errorpages/500.html
ErrorDocument 404 /_errorpages/404.html
ErrorDocument 510 /_errorpages/510.html
DirectoryIndex index.html index.htm index.php index.asp index.aspx index.jsp index.jspa index.shtml index.shtm
# Custom Global Settings (if any exist)

# Custom VH settings (if any exist)

</virtualhost>
# END DOMAIN: new.domain.com
################################################################
##ETC other domains## 
```

**/etc/hosts**

```
### Hetzner Online AG installimage
# nameserver config
# IPv4
127.0.0.1 localhost
6.8.81.52  Ubuntu-1210-quantal-64-minimal
#
# IPv6
::1 ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T10:59:02.387

检查 httpd-vhosts.conf 文件的权限。也许你没有写权限。

# c# - 运行带参数的全局方法

> ID：13856283
> 
> 赞同：1
> 
> 时间：2012-12-13T09:01:56.050
> 
> 标签：c#, .net, visual-studio-2012

我在 program.cs 中运行方法时遇到问题

例如，这是在我的 program.cs 中：

```
public string tryConn(string address, string name, string password)
{
      string connString = (address + ':' + name + ';' + password);
      try
      {
            connect(connString);
            return true;
      }
      catch
      {
           return false;
      }
} 
```

在一个表单上，在一个按钮 _Click 方法中，我试图像这样运行这个函数：

```
private void button1_Click(object sender, EventArgs e)
{
       bool _conn = WindowsFormsApplication1.Program.tryConn('127.0.0.1','root','toor')
} 
```

它只是没有任何东西，任何人都可以描述我将采取哪些步骤才能让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:03:06.610

您需要使用 tryConn`static`方法来调用它。[**您可以在此处**](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)阅读有关静态类和静态方法的更多信息。

```
public static string tryConn(string address, string name, string password)
{
        string connString = (address + ':' + name + ';' + password);
        try
        {
            connect(connString);
            return true;
        }
        catch
        {
            return false;
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:05:13.723

您需要将此方法标记为`static`，否则它是一个实例方法，必须在 Program 的实例上调用。

```
public static string tryConn(string address, string name, string password) 
```

但是当它是 时`static`，它*不能访问*该类的任何非静态字段或方法，所以`connect`方法也必须是`static`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:04:50.367

`static`为方法的声明添加关键字：

```
public static string tryConn(string address, string name, string password)
{
  // ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:05:26.027

您需要将其设为[static](http://msdn.microsoft.com/en-us/library/98f28cdx.aspx)。

就像是

```
public static string tryConn(string address, string name, string password) 
```

也可以看看[静态类和静态类成员（C#编程指南）](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)

# memory - 在erlang中生成幻方时内存消耗过多 - 需要优化帮助

> ID：13856286
> 
> 赞同：10
> 
> 时间：2012-12-13T09:02:05.770
> 
> 标签：memory, optimization, erlang, magic-square

对于大学，我必须实现一种算法，为给定的边长和特定的总和创建所有可能的幻方。对于 n=3，算法按预期工作。但是当一段时间后为 n=4 生成所有幻方时，我的内存不足。任务描述中已经提到了这个问题。我已经尝试优化 a 代码，但它仍然无法正常工作。所以我希望有人能给我一些建议。

我的基本想法是：首先我生成所有可能的行，我可以使用给定的数字，然后我试图以一种完全满足幻方限制的方式组合这些行。这是通过回溯发生的。我认为问题是在`makeRows`存储所有行之后消耗太多内存的函数。

如果您需要我可以提供的代码的更多解释！

```
magicSquare(N, Value) ->
    Squares = buildSquare(N, makeRows(N, N*N, Value, N)),
    io:fwrite("Squares ready"), io:fwrite("~n"),
    Result = lists:filter(fun(X) -> testsquare(X, N, Value) end, Squares),
    io:write(length(Result)),
    Result.

buildSquare(0, _) -> [[]];
buildSquare(Rows, AvailableRows) ->
    [ [X|L] || L <- buildSquare(Rows-1, AvailableRows), X <- AvailableRows, onlyUniqueNumbers(lists:flatten([X|L]))].

onlyUniqueNumbers(List) -> erlang:length(List) == sets:size(sets:from_list(List)).

%produces all possible rows with a dimension of Fields and the Numbers from 1 to Numbers and the right sum for each row
makeRows(0,_,_,_) -> [[]];
makeRows(Fields, Numbers, Value, TargetLength) ->
    [ [X|L] || X <- makeRows(Fields-1, Numbers, Value, TargetLength), L <- lists:seq(1,Numbers), checkRow([X|L], TargetLength, Value)].

checkRow(Row, Length, Value) when length(Row) < Length -> true;
checkRow(Row, Length, Value) ->
    Sum = lists:sum(Row),
    if Sum == Value -> true;
    true -> false
    end.

testsquare(Square, N, Value) -> checkAllDiagonal(Square, Value) andalso checkAllHorizontal(Square, Value) andalso checkAllVertical(Square, N, Value).

checkAllHorizontal([H|T], Value) ->
    case checkHorizontal(H, Value, 0) of
        true -> checkHorizontal(lists:nth(1, T), Value, 0);
        false -> false
    end;
checkAllHorizontal([], Value) -> true.

checkHorizontal([H|T], Value, Summe) -> checkHorizontal(T, Value, Summe + H);
checkHorizontal([], Value, Summe) when Summe == Value -> true;
checkHorizontal([], Value, Summe) -> false.

checkAllVertical(Square, N, Value) -> checkAllVertical(Square, N, Value, 1).
checkAllVertical(Square, N, Value, Column) ->
    if
        Column > N -> true;
        true ->
            case checkVertical(Square, Value, 0, Column) of
                true -> checkAllVertical(Square, N, Value, Column + 1);
                false -> false
            end
    end.

checkVertical([], Value, Summe, Column) when Summe == Value -> true;
checkVertical([], Value, Summe, Column) -> false;
checkVertical([H|T], Value, Summe, Column) -> checkVertical(T, Value, Summe + lists:nth(Column, H), Column).

checkAllDiagonal(Square, Value) ->
    case checkDiagonal(Square, Value, 0, 1,1) of
        true -> case checkDiagonal(Square, Value, 0, length(lists:nth(1, Square)),-1) of
                            true -> true;
                            false -> false
                        end;
        false -> false
    end.

checkDiagonal([H|T], Value, Summe, Position, Richtung) -> checkDiagonal(T, Value, Summe + lists:nth(Position, H), Position + Richtung, Richtung);
checkDiagonal([], Value, Summe, Position, Richtung) when Summe == Value -> true;
checkDiagonal([], Value, Summe, Position, Richtung) -> false. 
```

好的，我尝试在计算过程的早期添加对行和正方形的检查。以下是修改后的功能。

```
buildSquare(0, _, _, _) -> [[]];
buildSquare(Rows, AvailableRows, RowLength, Value) ->
    [ [X|L] || L <- buildSquare(Rows-1, AvailableRows, RowLength, Value), X <- AvailableRows, validateSquare([X|L], RowLength, Value)].

checkOnlyUniqueNumbers(List) -> erlang:length(lists:flatten(List)) == sets:size(sets:from_list(lists:flatten(List))).

validateSquare(List, RowLength, Value) when length(List) == RowLength -> testsquare(List, RowLength, Value) andalso checkOnlyUniqueNumbers(List);
validateSquare(List, _,_) -> checkOnlyUniqueNumbers(List).

%produces all possible rows with a dimension of Fields and the Numbers from 1 to Numbers
makeRows(0,_,_,_) -> [[]];
makeRows(Fields, Numbers, Value, TargetLength) ->
    [ [X|L] || L <- makeRows(Fields-1, Numbers, Value, TargetLength), X <- lists:seq(1,Numbers), checkRow([X|L], TargetLength, Value)].

%Checks if the sum of the row is Value when the row has the needed length Length
checkRow(Row, Length, _) when length(Row) < Length -> checkOnlyUniqueNumbers(Row);
checkRow(Row, _, Value) ->
    Sum = lists:sum(Row),
    Sum == Value andalso checkOnlyUniqueNumbers(Row). 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T13:31:48.533

嗯，erlang 并不懒惰，所以

```
magicSquare(N, Value) ->
    Squares = buildSquare(N, makeRows(N, N*N, Value, N)), 
```

当使用参数 4 和 34 调用时，尝试使用它们之间从 1 到 16（包括）的所有数字来构建四行的所有 3121348608 个可能组合的列表，每行总和为 34。

即使每个方格只占用 16 个字节（每个单元格一个），也需要大约 48GB 的​​内存，这还不包括列表开销。

你的算法可以用一种懒惰的语言工作——尽管速度很慢。但是在非惰性语言中，您**需要**越来越早地进行修剪，或者选择完全不同的算法。

您可以测试垂直线和对角线是否有机会求和已经在 中的目标值`buildSquare`，这可能会将内存需求推低到足以适合 4×4 幻方的内存（但我不太相信） . 如果您只构建`(N-1)×N`网格并从垂直总和计算最后一行，这将减少`Squares`另一个因子的大小`N!`，这将有更好的机会与早期的修剪一起适应内存（对于`N == 4`，而不是真正的更大的）。`N`

但是你应该重组你的算法以尽早使用约束。假设您检查第一行`1 2 15 16`。然后你知道`1`左列下面的三个数字，以及主对角线上剩下的三个数字的总和必须是 33。所以你需要从`{ 3,4,5,6,7,8,9,10,11,12,13,14}`总和到 66 中选择一组六个数字。这些选择并不多六个数，因为其中最大的六个加起来只有 69，所以你有

```
6, 10, 11, 12, 13, 14
7,  9, 11, 12, 13, 14
8,  9, 10, 12, 13, 14 
```

只有三种可能。底角的两个数字也受右列和主要东北对角线的约束。将这些约束一起考虑进一步限制了搜索空间。

如果你按顺序考虑可能的方块，一个接一个的顶行，并且不存储候选者[你可以存储神奇的 4×4 方块，它们不会太多]，你可以找到所有小方块内存，并且如果您以一种好的方式处理约束，甚至相对较快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:17:35.970

我有一个可能会有所帮助的方向。我*几乎*让它工作了，但在接下来的几天里将无法花任何时间在它上面。

首先，我相信这个问题是 NP 完全问题，这表明随着输入大小线性增加，您将使用指数内存或时间。

无论如何，这是我的方法：

1.  如果您的幻方涉及数字 1..N，您将为这些 N 数字创建所有排列。毕竟，magicSquare(3,15) 将是 1..15 所有可能排列的子集

2.  诀窍是如果它所代表的所有行的总和不等于幻数，*则在生成*每个排列时删除它。通过这种方式，您不会存储所有排列，只存储那些非常有希望的排列，从而避免指数记忆（但不是指数时间）。换句话说，与生成每个排列一致，只有当它可能是一个幻方时才保存它。我使用列表推导在生成器上使用限定符创建排列，该生成器进行了*测试*以确保所有行正确求和

3.  我的测试函数采用了一个指示行长度的参数（在这种情况下为 3），并且能够检查 [8,1,6,3,5,7,4,9,2] 的排列并确定每一行（每个子列表 1-3、4-6,7-9 总和为 15。
4.  在获得至少每一行总和为幻数的排列之后，然后过滤其余的 MN 标准。

顺便说一句，确保您创建排列的算法是尾递归的。

再一次，这似乎对我有用（除非它不是;）），但我已经离开我的电脑几天了。

希望这会有所帮助。

# linux - 系统启动时如何导出变量

> ID：13856290
> 
> 赞同：0
> 
> 时间：2012-12-13T09:02:13.890
> 
> 标签：linux

当我使用远程模式登录我的服务器以执行我的 GUI 程序时。我需要设置`export LIBGL_ALWAYS_INSIRECT=yes`。我怎么能设置一次。每次登录服务器时不要设置它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:15:33.897

根据您的方便，将导出命令添加到主目录中的 .bashrc 文件或 rc.local 文件或 /etc/profile 文件中。

导出 LIBGL_ALWAYS_INSIRECT=yes

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:07:15.397

我不知道您的“GUI 程序”是用什么语言编写的，但您需要在 main 方法的顶部添加与以下 C 咒语等效的内容：

```
#include <stdlib.h>
setenv ("LIBGL_ALWAYS_INSIRECT", "yes", 1);
// your code here 
```

# liferay-6 - liferay 在其他 portlet 中使用自定义 portlet 的服务

> ID：13856292
> 
> 赞同：0
> 
> 时间：2012-12-13T09:02:17.640
> 
> 标签：liferay-6

我创建了具有服务层的 portlet (first-portlet)。我想从其他 portlet(second-portlet) 访问此服务。

我不想在第二个 portlet 中重新创建服务。

**在 first-portlet 中创建的**service.xml****

 **```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE service-builder PUBLIC "-//Liferay//DTD Service Builder 6.0.0//EN"     "http://www.liferay.com/dtd/liferay-service-builder_6_0_0.dtd">
<service-builder package-path="com.test.habib">
<author>Habib</author>
<namespace>habib</namespace>

<entity name="Book" local-service="true" remote-service="true">

    <!-- PK fields -->

    <column name="bookId" type="long" primary="true" />

    <!-- Audit fields -->

    <column name="companyId" type="long" />
    <column name="userId" type="long" />
    <column name="createDate" type="Date" />
    <column name="modifiedDate" type="Date" />

    <!-- Other fields -->

    <column name="title" type="String" />
    <column name="author" type="String" />

            <!-- Order -->

    <order by="asc">
        <order-column name="title" />
    </order>

    <!-- Finder methods -->

    <finder name="Title" return-type="Collection">
        <finder-column name="title" />
    </finder>
</entity>
</service-builder> 
```

我将 first-portlet-service.jar 复制到 second-portlet 的 docroot/WEB-INF/lib/ 中。并在第二个 portlet 中使用服务：

**视图.jsp**

```
<%@page import="com.test.habib.service.BookLocalServiceUtil"%>
<%@page import="com.test.habib.model.Book"%>
<%@page import="java.util.List"%>

<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>

<portlet:defineObjects />

This is the <b>SecondPortlet</b> portlet in View mode.

<%

List<Book> b = BookLocalServiceUtil.getBooks(-1, -1);

for(int i=0;i<b.size();i++){
out.println(b.get(i).getAuthor()+"  , "+b.get(i).getTitle());
}

%> 
```

**错误**

```
 08:56:59,256 ERROR [PortletRequestDispatcherImpl:137] org.apache.jasper.JasperException: An exception occurred processing JSP page /html/jsps/view.jsp at line 31

28: 
29: 
30: 
31: List<Book> b = BookLocalServiceUtil.getBooks(-1, -1);
32: 
33: for(int i=0;i<b.size();i++){
34:     out.println(b.get(i).getAuthor()+"  , "+b.get(i).getTitle());

Stacktrace:
org.apache.jasper.JasperException: An exception occurred processing JSP page /html/jsps/view.jsp at line 31

28: 
29: 
30: 
31: List<Book> b = BookLocalServiceUtil.getBooks(-1, -1);
32: 
33: for(int i=0;i<b.size();i++){
34:     out.println(b.get(i).getAuthor()+"  , "+b.get(i).getTitle());

Stacktrace:
    at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:510)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.portlet.PortletRequestDispatcherImpl.dispatch(PortletRequestDispatcherImpl.java:316)
    at com.liferay.portlet.PortletRequestDispatcherImpl.include(PortletRequestDispatcherImpl.java:134)
    at com.second.SecondPortlet.include(SecondPortlet.java:40)
    at com.second.SecondPortlet.doView(SecondPortlet.java:25)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:328)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:101)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:92)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:638)
    at com.liferay.portlet.InvokerPortletImpl.invokeRender(InvokerPortletImpl.java:723)
    at com.liferay.portlet.InvokerPortletImpl.render(InvokerPortletImpl.java:425)
    at org.apache.jsp.html.portal.render_005fportlet_jsp._jspService(Unknown Source)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.portal.util.PortalImpl.renderPortlet(PortalImpl.java:3740)
    at com.liferay.portal.util.PortalImpl.renderPortlet(PortalImpl.java:3699)
    at com.liferay.portal.util.PortalUtil.renderPortlet(PortalUtil.java:1168)
    at com.liferay.portal.action.RenderPortletAction.execute(RenderPortletAction.java:85)
    at com.liferay.portal.action.UpdateLayoutAction.addPortlet(UpdateLayoutAction.java:260)
    at com.liferay.portal.action.UpdateLayoutAction.execute(UpdateLayoutAction.java:211)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java:153)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at com.liferay.portal.servlet.MainServlet.callParentService(MainServlet.java:508)
    at com.liferay.portal.servlet.MainServlet.service(MainServlet.java:485)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.strip.StripFilter.processFilter(StripFilter.java:261)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.themepreview.ThemePreviewFilter.processFilter(ThemePreviewFilter.java:88)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.gzip.GZipFilter.processFilter(GZipFilter.java:110)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:182)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.sso.ntlm.NtlmPostFilter.processFilter(NtlmPostFilter.java:81)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.sharepoint.SharepointFilter.processFilter(SharepointFilter.java:179)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.processFilter(VirtualHostFilter.java:240)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:738)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.threadlocal.ThreadLocalFilter.processFilter(ThreadLocalFilter.java:35)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.NullPointerException
    at com.test.habib.service.BookLocalServiceClp.<init>(BookLocalServiceClp.java:390)
    at com.test.habib.service.BookLocalServiceUtil.getService(BookLocalServiceUtil.java:240)
    at com.test.habib.service.BookLocalServiceUtil.getBooks(BookLocalServiceUtil.java:185)
    at org.apache.jsp.html.jsps.view_jsp._jspService(view_jsp.java:119)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    ... 125 more 
```**

# java - 如何在 Java 中扩展枚举？

> ID：13856297
> 
> 赞同：5
> 
> 时间：2012-12-13T09:02:38.123
> 
> 标签：java, enums

我有一个来自示例项目的类。但是当我使用这个类时，它会显示一些错误。下面给出了这个类。

```
public  class q extends Enum
{

    private int i = -1;
    private String s = null;

    private q(String s, int i)
    {
       // super(s, i);
        this.s = s;
        this.i  = i;
    }

    public static q valueOf(String s)
    {
        return (q)Enum.valueOf(q.class, s);
    }

    public static q[] values()
    {
        return (q[])a.clone();
    }

    public static final q ANDROID_VERSION;
    public static final q APP_VERSION_CODE;
    public static final q APP_VERSION_NAME;
    public static final q AVAILABLE_MEM_SIZE;
    private static final q a[];

    static 
    {
        APP_VERSION_CODE = new q("APP_VERSION_CODE", 1);
        APP_VERSION_NAME = new q("APP_VERSION_NAME", 2);
        ANDROID_VERSION = new q("ANDROID_VERSION", 6);
        AVAILABLE_MEM_SIZE = new q("AVAILABLE_MEM_SIZE", 11);
        q aq[] = new q[34];
        aq[0] = APP_VERSION_CODE;
        aq[1] = ANDROID_VERSION;
        aq[2] = APP_VERSION_NAME;
        aq[3] = AVAILABLE_MEM_SIZE;
        a = aq;
    }

} 
```

扩展 Enum 时，它显示“**类型 q 可能不会显式地继承 Enum** ”错误。如何使用这些字段创建枚举？

我如何修改这个类以使用枚举（即，我想在这个上使用默认的枚举方法，如 ordinal()、valueOf(...) 等。）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T09:05:28.787

您不能从`Enum`. 你必须声明一个`Enum`类，如：

```
public enum Q {
    TYPE1, TYPE2, TYPE3;
} 
```

而且您也不能直接实例化枚举类。每种类型的枚举类都由虚拟机实例化一次。

```
public class MyClass {

    public enum MyEnum{
        TYPE1("Name", 9,1,100000), TYPE2("Name2", 10, 1, 200000);

        private final int androidVersion;
        private final int appVersionCode;
        private final int availableMemSize;
        private final String appVersionName;

        private MyEnum(String appVersionName, int androidVersion, int appVersionCode, int availableMemSize) {
            this.androidVersion = androidVersion;
            this.appVersionCode = appVersionCode;
            this.availableMemSize = availableMemSize;
            this.appVersionName = appVersionName;
        }
    }
    MyEnum mType = MyEnum.TYPE1;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T09:15:35.887

枚举基本上归结为这样的东西：

```
public Enum Q
{
    TYPE1, TYPE2, TYPE3:
}

// is roughy translated to 

public final class Q
{
    private Q() {}

    public static final Q TYPE1 = new Q();
    public static final Q TYPE2 = new Q();
    public static final Q TYPE3 = new Q();
} 
```

你可以做更多的事情，但这应该解释为什么你不能实例化`Q`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T09:11:16.027

**-**将`enum`关键字视为**语法糖**。它**为您设置具有正常继承树的类，但不允许您扩展** `java.lang.Enum`.

**例如：**

```
public enum TEST {  
    ONE, TWO, THREE;
} 
```

# c# - 如果元素的任何部分超出页面边界，元素将消失

> ID：13856299
> 
> 赞同：3
> 
> 时间：2012-12-13T09:02:40.650
> 
> 标签：c#, winforms, reportviewer, rdlc

我想用 winforms 报表查看器 api 和 RDLC 渲染报表图像，但遇到了以下问题。可以通过以下步骤重现该问题：

1.  `LocalReport`用于渲染指定的 RDLC 文件`DeviceInfo`。

2.  RDLC 文件类似于：一个带有填充了一些元素的大矩形的容器。

3.  调整矩形的大小，直到其高度或宽度超出 size (`PageWidth`和`PageHeight`in `DeviceInfo`) 的范围。
4.  运行它并查看从 RDLC 渲染的图像。

现在，如果矩形的一部分超出了页面的边界，则包括其子元素在内的整个矩形都会消失，而不仅仅是超出边界的部分。

我不确定这是一个错误还是结果符合预期。但我确信最好切断超出范围的部分而不是整个元素。因为我认为当我们想要一个动态元素（例如具有不同数据的表）并且其元素大小将根据该数据进行调整时，这是很常见的。如果我不正确，请告诉我。

# java - 在java中将十六进制转换为字节

> ID：13856300
> 
> 赞同：1
> 
> 时间：2012-12-13T09:02:47.327
> 
> 标签：java, parsing, hex

我是 java 新手。我有一个逐行包含十六进制值的文本文档，我试图读取它并将其转换为字节数组。但是对于像 8、d、11、0、e4 这样的十六进制值，当我将 e4 的错误值解析为 -28 而不是 228 时，我该如何克服这个转换错误....

```
 FileInputStream fstream = new FileInputStream("C:/Users/data.txt");

          DataInputStream in = new DataInputStream(fstream);
          BufferedReader br = new BufferedReader(newInputStreamReader(in,"UTF-8"));

          byte[] bytes = new byte[1024];
          String str;
          int i=0;

          while ((str = br.readLine()) != null) 
          {

              bytes[i]= (byte) (Integer.parseInt(str,16) & 0xFF);
              i++;

          }
          byte[] destination = new byte[i];
          System.arraycopy(bytes, 0, destination, 0, i);

          br.close();
          return destination; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T09:04:27.997

字节（和所有其他整数类型）在 Java 中是有*符号的，而不是**无符号*的。

如果您只是将字节视为字节数组，则某些值为负数并不重要，它们的位表示仍然正确。

您可以通过使用 value 屏蔽字节值来获得“正确的”无符号值`int`，`0xff`尽管结果值也将是一个`int`：

```
int n = (myByte & 0xff); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:22:12.897

As `Alnitak` said `byte` is signed in java. Value of 0xe4 = 228 which is unsigned, and the range of `byte` is -128 to 127\.

My suggestion is to use `int` instead of `byte` like

```
int[] bytes = new int[1024];
bytes[i]= Integer.parseInt(str,16); 
```

You get the same thing which you have require.

# jquery - Kendo UI Grid 编辑弹窗闪烁

> ID：13856307
> 
> 赞同：0
> 
> 时间：2012-12-13T09:03:06.667
> 
> 标签：jquery, jquery-ui, kendo-ui

我必须限制一些记录，为此我提出了一个条件

```
edit: function (e) { 
            if(e.model.IsReadOnly) {
                  $('#gridTiming').data("kendoGrid").closeCell(); 
            }
        }, 
```

但是对于只读记录，它会闪烁。有没有其他方法可以限制记录。

我正在使用新的剑道版本“v2012.3.1114”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:35:06.503

这是您可以执行的操作：

```
$('#GridName tbody').on('click','tr',function(e){
    var grid = $(this).closest('.k-grid');
    var dataItem = grid.dataItem(this);
    if(dataItem.IsReadOnly){
        e.stopPropagation();
    }
}) 
```

# c - 编译共享库并链接到其他 .so

> ID：13856308
> 
> 赞同：1
> 
> 时间：2012-12-13T09:03:06.607
> 
> 标签：c, gcc, g++, shared-libraries

我想在编译我自己的共享库时将现有的共享库 (FlashRuntimeExtensions.so) 链接到我的 C 代码。但是无论我尝试什么，我总是会遇到同样的错误；文件格式错误。有人知道如何解决这个问题吗？

这是我的编译命令：

```
$ g++ -Wall ane.c FlashRuntimeExtensions.so -o aneObject
FlashRuntimeExtensions.so: could not read symbols: File in wrong format
collect2: ld gaf exit-status 1 terug 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:15:57.680

您的命令行尝试生成 x86 代码并使用您的发行版中可用的本机 g++ 将其链接到 ARM 代码。

这行不通。使用此处提供的 Android NDK：http: [//developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

> NDK 包括一组交叉工具链（编译器、链接器等），可以在 Linux、OS X 和 Windows（使用 Cygwin）平台上生成本机 ARM 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:05:40.510

一般`.so`会使用`-l`.

`-lpthread`比如我们使用的pthread 。

`gcc sample.c -o myoutput -lpthread`

但根据@chill 的声明，您在命令中所做的只是正确的。

我建议您参考以下链接。

[C++ 链接器错误 SDL 图像 - 无法读取符号](https://stackoverflow.com/questions/2527780/c-linker-error-sdl-image-could-not-read-symbols)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:47:38.470

这应该是架构不匹配。我曾经遇到过这个问题，我已经通过在同一目标平台上构建库来解决它，这很明显。如果您使用的是 linux 或 Unix 之类的操作系统，您可以通过 file 命令查看，如果您使用的是 windows，您可以使用 Dependency Walker 看到。您需要确保所有库都与架构匹配。

# java - Base-15 转换差异

> ID：13856309
> 
> 赞同：2
> 
> 时间：2012-12-13T09:03:08.887
> 
> 标签：java, biginteger

最近，我做了一个需要转换基数的练习，我使用 BigInteger 将基数从 15 转换为基数 10。但是当我根据网站的结果检查它时

[http://www.unitconversion.org/unit_converter/numbers-ex.html](http://www.unitconversion.org/unit_converter/numbers-ex.html)

它显示两个结果不匹配，我不知道为什么？

这是我的代码：

```
BigInteger bignumber = new BigInteger("1023456789ABCDEA", 15);
System.out.println(bignumber.toString(10)); 
```

结果是：**442213251884616145** 以上网站的结果是：**442213251884616168**

我正在使用 JDK 1.7 netbeans 7.2

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:13:51.970

`BigInteger`是正确的，正如[Wolfram|Alpha](http://www.wolframalpha.com/input/?i=1023456789ABCDEA%20base%2015)所证实的那样。

您链接到的其他网站有点不确定：当我更改 base-15 输入的最后一位时，base-10 输出保持不变。:)

# perl - 通过分隔符提取部分文件

> ID：13856316
> 
> 赞同：0
> 
> 时间：2012-12-13T09:03:38.543
> 
> 标签：perl, shell

我有一个格式如下的文件：

```
Preamble

---------------------
Section 1
...
---------------------

---------------------
Section 2
...
---------------------

---------------------
Section 3
...
---------------------

Afterwords 
```

我想通过分隔符提取每个部分，以便得到以下结果：

文件 0：

```
Section 1
... 
```

文件1：

```
Section 2
... 
```

文件2：

```
Section 3
... 
```

...

有没有一种简单的方法可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:14:27.730

**[更新] 使用 chomp 并`$_`使其更短。**

这应该这样做：

如果您的输入记录分隔符是 21 的序列`-`，这很容易`perl -ne`：

```
perl -ne 'BEGIN{ $/=("-"x21)."\n"; $i=0; } 
  do { open F, ">file".($i++); 
       chomp;
       print F; 
       close F; 
  } if /^Section/' yourfile.txt 
```

应该工作，并创建文件`file0`......`fileN`

### 解释

也许更容易解释为独立的 Perl 脚本？

```
$/=("-"x21)."\n"; # Set the input-record-separator to "-" x 21 times
my $i = 0;        # output file number

open IN, "<yourfile.txt" or die "$!";

while (<IN>) {  # Each "record" will be available as $_ 
  do { open F, ">file".($i++); 
       chomp;     # remove the trailing "---..."
       print F;   # write the record to the file
       close F;   #
  } if /^Section/  # do all this only it this is a Section
} 
```

Perl 的`awk`血统在这里很有用，所以让我们展示一个`awk`版本进行比较：

```
awk 'BEGIN{RS="\n-+\n";i=0} 
  /Section/ {chomp; print > "file_"(i++)".txt" 
}' yourfile.txt 
```

与版本相比还不错`perl`，它实际上更短。`$/`Perl 中的变量`RS`是`awk`. awk 在这里占了上风：`RS`可能是正则表达式！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:36:51.147

您也可以使用 shell：

```
#!/bin/bash

i=0
while read line ; do

 #If the line contain "Section " followed by a 
 #digit the next lines have to be printed
 echo "$line"|egrep -q "Section [0-9]+"
 if [ $? -eq 0 ] ; then
  toprint=true
  i=$(($i + 1))
  touch file$i
 fi

 #If the line contain "--------------------"  
 #the next lines doesn't have to be printed
 echo "$line"|egrep -q "[-]{20}"
 if [ $? -eq 0 ] ; then
  toprint=false
 fi

 #Print the line if needed
 if $toprint ; then
  echo $line >> file$i
 fi

done < sections.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T16:02:38.450

这是您要查找的内容：

```
awk '/^-{21}$/ { f++; next } f%2!=0 { print > "file" (f-1)/2 ".txt" }' file 
```

结果：

内容`file0.txt`：

```
Section 1
... 
```

内容`file1.txt`：

```
Section 2
... 
```

内容`file2.txt`：

```
Section 3
... 
```

* * *

如您所见，上述文件名是“零”索引的。如果您希望将文件名“一个”编入索引，只需更改`(f-1)/2`为`(f+1)/2`. HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:23:44.793

鉴于您的文件格式，这里有一个选项：

```
use strict;
use warnings;

my $fh;
my $sep = '-' x 21;

while (<>) {
    if (/^Section\s+(\d+)/) {
        open $fh, '>', 'file' . ( $1 - 1 ) . '.txt' or die $!;
    }

    print $fh $_ if defined $fh and !/^$sep/;
} 
```

在您的数据上，创建`file0.txt .. file2.txt`包含`file0.txt`：

```
Section 1
... 
```

# python - 将字符串转换为 int 太慢了

> ID：13856319
> 
> 赞同：10
> 
> 时间：2012-12-13T09:03:48.323
> 
> 标签：python, performance, python-3.x

我有一个程序，每行读取 3 个字符串 50000。然后它会做其他事情。读取文件并转换为整数的部分占用了总运行时间的 80%。

我的代码片段如下：

```
import time
file = open ('E:/temp/edges_big.txt').readlines()
start_time = time.time()
for line in file[1:]:
    label1, label2, edge = line.strip().split()
    # label1 = int(label1); label2 = int(label2); edge = float(edge)
    # Rest of the loop deleted
print ('processing file took ', time.time() - start_time, "seconds") 
```

以上大约需要**0.84 秒**。现在，当我取消注释该行时

```
label1 = int(label1);label2 = int(label2);edge = float(edge) 
```

运行时间上升到大约**3.42 秒**。

输入文件的格式为：`str1 str2 str3`每行

功能`int()`很`float()`慢吗？我该如何优化呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:19:25.677

如果文件在操作系统缓存中，那么在我的机器上解析文件需要几毫秒：

```
name                                 time ratio comment
read_read                        145 usec  1.00 big.txt
read_readtxt                    2.07 msec 14.29 big.txt
read_readlines                  4.94 msec 34.11 big.txt
read_james_otigo                29.3 msec 201.88 big.txt
read_james_otigo_with_int_float 82.9 msec 571.70 big.txt
read_map_local                  93.1 msec 642.23 big.txt
read_map                        95.6 msec 659.57 big.txt
read_numpy_loadtxt               321 msec 2213.66 big.txt 
```

`read_*()`函数在哪里：

```
def read_read(filename):
    with open(filename, 'rb') as file:
        data = file.read()

def read_readtxt(filename):
    with open(filename, 'rU') as file:
        text = file.read()

def read_readlines(filename):
    with open(filename, 'rU') as file:
        lines = file.readlines()

def read_james_otigo(filename):
    file = open (filename).readlines()
    for line in file[1:]:
        label1, label2, edge = line.strip().split()

def read_james_otigo_with_int_float(filename):
    file = open (filename).readlines()
    for line in file[1:]:
        label1, label2, edge = line.strip().split()
        label1 = int(label1); label2 = int(label2); edge = float(edge)

def read_map(filename):
    with open(filename) as file:
        L = [(int(l1), int(l2), float(edge))
             for line in file
             for l1, l2, edge in [line.split()] if line.strip()]

def read_map_local(filename, _i=int, _f=float):
    with open(filename) as file:
        L = [(_i(l1), _i(l2), _f(edge))
             for line in file
             for l1, l2, edge in [line.split()] if line.strip()]

import numpy as np

def read_numpy_loadtxt(filename):
    a = np.loadtxt('big.txt', dtype=[('label1', 'i'),
                                     ('label2', 'i'),
                                     ('edge', 'f')]) 
```

并`big.txt`使用以下方法生成：

```
#!/usr/bin/env python
import numpy as np

n = 50000
a = np.random.random_integers(low=0, high=1<<10, size=2*n).reshape(-1, 2)
np.savetxt('big.txt', np.c_[a, np.random.rand(n)], fmt='%i %i %s') 
```

它产生 50000 行：

```
150 952 0.355243621018
582 98 0.227592557278
478 409 0.546382780254
46 879 0.177980983303
... 
```

要重现结果，[请下载代码](https://gist.github.com/4276624)并运行：

```
# write big.txt
python generate-file.py
# run benchmark
python read-array.py 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T16:30:39.480

我能得到几乎和你一样的时间。我认为问题出在我的代码上：

```
read_james_otigo                  40 msec big.txt
read_james_otigo_with_int_float  116 msec big.txt
read_map                         134 msec big.txt
read_map_local                   131 msec big.txt
read_numpy_loadtxt               400 msec big.txt
read_read                        488 usec big.txt
read_readlines                  9.24 msec big.txt
read_readtxt                    4.36 msec big.txt

name                                 time ratio comment
read_read                        488 usec  1.00 big.txt
read_readtxt                    4.36 msec  8.95 big.txt
read_readlines                  9.24 msec 18.95 big.txt
read_james_otigo                  40 msec 82.13 big.txt
read_james_otigo_with_int_float  116 msec 238.64 big.txt
read_map_local                   131 msec 268.05 big.txt
read_map                         134 msec 274.87 big.txt
read_numpy_loadtxt               400 msec 819.42 big.txt

read_james_otigo                39.4 msec big.txt
read_readtxt                    4.37 msec big.txt
read_readlines                  9.21 msec big.txt
read_map_local                   131 msec big.txt
read_james_otigo_with_int_float  116 msec big.txt
read_map                         134 msec big.txt
read_read                        487 usec big.txt
read_numpy_loadtxt               398 msec big.txt

name                                 time ratio comment
read_read                        487 usec  1.00 big.txt
read_readtxt                    4.37 msec  8.96 big.txt
read_readlines                  9.21 msec 18.90 big.txt
read_james_otigo                39.4 msec 80.81 big.txt
read_james_otigo_with_int_float  116 msec 238.51 big.txt
read_map_local                   131 msec 268.84 big.txt
read_map                         134 msec 275.11 big.txt
read_numpy_loadtxt               398 msec 816.71 big.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:09:03.537

我根本无法重现这一点。

我生成了一个 50000 行的文件，每行包含三个随机数（两个整数，一个浮点数），用空格分隔。

然后我在那个文件上运行了你的脚本。在我三岁的电脑上，原始脚本在 0.05 秒内完成，未注释行的脚本需要 0.15 秒才能完成。当然，字符串到 int/float 的转换需要更长的时间，但肯定不是几秒钟的时间。除非您的目标机器是运行嵌入式 Windows CE 的烤面包机。

# c# - Form1_KeyDown 无法按要求工作

> ID：13856320
> 
> 赞同：0
> 
> 时间：2012-12-13T09:03:55.253
> 
> 标签：c#, winforms

我在表单上使用了一个链接按钮，并且在`KeyDown`事件中我写如下将链接按钮向左移动

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Left)
        {
            linkLabel1.Left = linkLabel1.Left + 5;
        }
    } 
```

但这并没有按照要求移动链接标签，有人可以告诉我哪里出错了

这也不起作用

```
 private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        switch (e.KeyCode)
        {
            case Keys.Left:
                linkLabel1.Left = linkLabel1.Left + 5;
                break;
            default:
                return;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:18:57.927

设置 form1 的**KeyPreview** = true。有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:17:33.050

当你想移动一个**Control**时，你必须重新配置它的**Control.Location**属性。因此，只需从 Location.[X/Y].Property 添加或删除一些点，仅此而已！

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Left)
        {
            // have we space?
            if(linkLabel1.Location.X >= 4)
                // 5 dots to the left side
                linkLabel1.Location = new Point(linkLabel1.Location.X - 5, linkLabel1.Location.Y);
        }
    } 
```

编辑： [msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)

位置是一个**点**，一个**点**有一个 (x,y) - 坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:16:58.907

我认为这与链接标签对事件的拦截有关。如果表单上存在链接标签，则不会将按键事件引发到表单。

将 KeyPreview 设置为 true（在表单上）有助于解决此问题。然后您应该引发事件，尽管您可能仍然遇到箭头键的问题。

更新：

好的，这应该可以，添加：

```
 protected override bool ProcessDialogKey(Keys keyData)
    {
        if (keyData == Keys.Left)
        {
            linkLabel1.Left = linkLabel1.Left + 5;
        }
        return base.ProcessDialogKey(keyData);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T03:23:56.537

protected override bool ProcessCmdKey(ref Message msg, Keys keyData) { if (e.KeyCode == Keys.Left) { linkLabel1.Left = linkLabel1.Left + 5; } 返回 base.ProcessCmdKey(ref msg, keyData); }

# java - 我们在番石榴中是否有任何 api，我可以在其中创建以 hashmap 作为值的 hashmap

> ID：13856321
> 
> 赞同：1
> 
> 时间：2012-12-13T09:03:56.967
> 
> 标签：java, collections, guava

我想创建一个`HashMap<String, HashMap<String, Long>>` 我知道在番石榴中我们有 HashMultimap`HashMap<String, HashSet<String>` 但我们也有一些支持`HashMap<String, HashMap<String, Long>>`吗？

是的，我可以在核心 java 中做到这一点，只需寻找一些我不必每次都检查密钥是否存在的库

我用一个例子来解释我的问题:: 我们有一个设备制造商、设备名称和设备等级

现在我需要返回请求的制造商的设备列表-
特定设备和制造商的请求排名较少-请求很多

就我而言，制造商列表和每个制造商的设备列表非常大

也欢迎任何关于替代数据结构的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T09:06:45.223

听起来你可能想要一个[`Table`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Table.html)- 可能是一个[`HashBasedTable<String, String, Long>`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/HashBasedTable.html).

# ruby - 如何填写没有名称的文本字段？红宝石/黄瓜/弗兰克

> ID：13856324
> 
> 赞同：1
> 
> 时间：2012-12-13T09:04:08.513
> 
> 标签：ruby, cucumber, frank

我的问题是是否可以填写没有名称的文本字段。它有一个带有名称的标签，但该字段本身没有。有没有办法点击标签并“盲目”输入，或者这是不可能的？

这是它在 Frank 检查中的样子：

```
UITextField,
UITextFieldRoundedRectBackgroundView,
UIImageView,
UIImageView,
UIImageView,
UITextFieldLabel: Sök ort 
```

这是我写的：

当我用“paris”填写“Sök ort”时

和代码：

```
When /^I fill in "([^\"]*)" with "([^\"]*)"$/ do |field, value|
  fill_in(field, :with => value)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:15:11.407

具有讽刺意味的是，我在发布后几分钟解决了这个问题。

这是答案

场景大纲：

```
Search for Paris
    When I click on <variable>
    When I fill in with "paris" 
```

例子：

```
| variable |
| search |

When /^I click on search$/ do
    touch "view:'UITextFieldLabel' marked:'search'"
end

When /^I fill in with "([^\"]*)"$/ do
  type_into_keyboard("paris", :append_return => false)
end 
```

# html - 从锚点内的跨度中删除下划线

> ID：13856330
> 
> 赞同：23
> 
> 时间：2012-12-13T09:04:39.170
> 
> 标签：html, css

我有这个 HTML：

```
<ul>
<li>
    <ul>
        <li>
            <a href="#"> <span> Test </span> Link </a>
        </li>
    </ul>
</li>
</ul>​ 
```

这个CSS：

```
ul li ul li span {

    text-decoration:none;
}​ 
```

为什么锚内部的跨度仍然有下划线？

换句话说：我如何让所有文本都加下划线，**除了**SPAN。谢谢

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-13T09:06:30.860

你需要定位`anchor tag`而不是`span tag`所以使用这个

```
ul li ul li a {
    text-decoration:none;
}​ 
```

原因：默认情况下`text-decoration: underline;`应用于`<a>`标签浏览器样式表，所以如果你想覆盖它，或者如果你希望`<a>`你网站上的任何标签都不应该有下划线，而不是简单地使用它

```
a {
   text-decoration: none;
} 
```

编辑：当我读到你的评论时，如果你希望你的文本被下划线除了里面的文本而`<span>`不是使用这个

[**演示**](http://jsfiddle.net/yn8bg/1/)

```
ul li ul li a {
    text-decoration:underline;
}

ul li ul li a span {
    text-decoration:none;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:05:26.963

`span`在课堂上做 tat`a`

`a`是带有默认下划线的标签，因为它是链接但不是`span`. 因此，a 标签内的任何内容都会自动使用下划线。

```
ul li ul li a{
    text-decoration:none;
}​ 
```

**[演示](http://jsfiddle.net/nVkqR/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T07:59:20.163

它应该是

```
ul li ul li a {
text-decoration:none;
}
ul li ul li a:hover {
text-decoration:underline;
}

ul li ul li a span {
text-decoration:none;
display: inline-block;   
} 
```

[演示](http://jsfiddle.net/Animeshjain/aFa94/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-13T09:06:57.220

它应该是

```
ul li ul li a {

    text-decoration:none;
}​ 
```

# mongodb - MongoDB - 将过滤器与默认过滤器结合使用

> ID：13856331
> 
> 赞同：0
> 
> 时间：2012-12-13T09:04:42.503
> 
> 标签：mongodb

我希望做一个非常常见的任务，即永远不要删除我存储的项目，而只是用已删除的标志标记它们。但是，对于几乎每个请求，我现在都必须指定`deleted:false`. 有没有办法让你可以添加一个“默认”过滤器？这样我就可以构建一个`live_items`过滤器并在此基础上进行查询？

这只是对潜在答案的一种猜测。一般来说，我只想`deleted=False`成为默认搜索。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:22:15.240

在 SQL 中，您可以使用视图来执行此操作，但不幸的是 MongoDB 不支持视图。

但是，当排除标记为已删除的项目的查询比包含它们的查询频繁得多时，您可以从主`items`集合中删除已删除的项目并将它们放在单独的`items_deleted`集合中。这也有一个很好的副作用，即活动项目集合的性能不会受到大量已删除项目的影响。缺点是不能保证索引在两个集合中都是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:17:03.433

我继续做了一个结合指定查询的python函数：

```
def find_items(filt, single=False, live=True):
  if live:
    live = {'deleted': False}
    filt = dict(filt.items() + live.items())
  if single:
    return db.Item.find_one(filt)
  else:
    return db.Item.find(filt) 
```

# delegates - 虚拟方法的委托它指向哪里（基/派生）？

> ID：13856342
> 
> 赞同：2
> 
> 时间：2012-12-13T09:05:15.217
> 
> 标签：delegates, c++-cli, virtual-inheritance

我最近开始使用 C++/Cli 进行包装。现在我正处于一个我必须更多地了解内部结构的地步。

考虑以下代码：

```
Header file (ignoring .NET namespaces for this example):

public ref class BaseyClass
{
    protected:
        delegate void TestMethodDelegate(); // TestMethod delegate
        BaseyClass();                       // constructor            
        virtual void TestMethod();          // member: method
        GCHandle _testMethodHandle;         // member: method handle
};

CPP file (ignoring .NET namespaces for this example):

BaseyClass::BaseyClass()
{
    _testMethodHandle
          = GCHandle::Alloc(
                       gcnew TestMethodDelegate(this, &BaseyClass::TestMethod));
}

void TestMethod()
{
} 
```

最终，这个类将在以后用作基类（对于 DerivedClass），并且方法“TestMethod()”被覆盖并通过委托指针从非托管代码中调用。

现在的问题是：委托将引用哪个方法？

BaseyClass::TestMethod();

或者

DerivedClass::TestMethod();

我个人认为委托将引用“BaseyClass::TestMethod()”，因为即使它被覆盖，委托也指向 BaseyClass 的（基）地址。因此，DerivedClass 不能覆盖“TestMethod”并使用来自 BaseyClass 的委托。

我只是想确定一下。感谢您的评论和启发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:54:15.530

委托将是对派生类的 TestMethod 的引用。即使您正在传递`&BaseyClass::TestMethod`，这是一个虚拟方法，您也正在传递`this`，这是派生类型，并且在创建委托时会考虑这两者。

其他注意事项：

*   TestMethodDelegate 不需要在类定义中。更标准的方法是将委托放在类之外，就在命名空间中。（或者使用现有的内置一个，`Action`。）
*   你不需要`GCHandle::Alloc`（我认为这就是你的意思）。相反，声明`_testMethodHandle`为`TestMethodDelegate^`（或`Action^`）。通常，除非您与非托管代码交互，否则您不需要处理 GCHandle，并且此代码都是托管的。

这是我的测试代码：

```
public ref class BaseyClass
{
public:
    BaseyClass() { this->_testMethodHandle = gcnew Action(this, &BaseyClass::TestMethod); }
    virtual void TestMethod() { Debug::WriteLine("BaseyClass::TestMethod"); }
    Action^ _testMethodHandle;
};

public ref class DerivedClass : BaseyClass
{
public:
    virtual void TestMethod() override { Debug::WriteLine("DerivedClass::TestMethod"); }
};

int main(array<System::String ^> ^args)
{
    BaseyClass^ base = gcnew DerivedClass();
    base->_testMethodHandle();
    return 0;
} 
```

输出：

> DerivedClass::TestMethod

# vba - 为什么我们要在模块的开头声明变量？

> ID：13856351
> 
> 赞同：4
> 
> 时间：2012-12-13T09:05:38.590
> 
> 标签：vba

作为我的第一语言，并且完全从其他人的例子中学到，我从未质疑 VBA 中的标准做法，即在模块、例程或函数的开头对所有变量声明进行分组，如本例所示。

```
Sub Traditional()
Dim bVariable as Boolean
Dim OtherVariable
' Some code using OtherVariable goes here
'
' Now we use bVariable
bVariable = True
Do While bVariable
    bVariable = SomeFunction()
Loop
End Sub 
```

现在我正在学习其他语言的标准做法是声明变量尽可能接近它们的使用位置，如下所示：

```
Sub Defensive()
Dim OtherVariable as String
' Some code using OtherVariable goes here
'
' Now we use bVariable
Dim bVariable as Boolean
bVariable = True
Do While bVariable
    bVariable = SomeFunction()
Loop
End Sub 
```

作为一种防御性编程实践，这对我来说似乎是完全明智的——因为它限制了跨度和生存时间（如[Code Complete](http://books.google.co.uk/books?id=3JfE7TGUwvgC&pg=PT353&lpg=PT353&dq=span+live+time+programming+variable&source=bl&ots=RQvY2McKeD&sig=1y_vGZs74_54Ap7kUIS_2vcf5dY&hl=en&sa=X&ei=HZrJUI_NPPPa0QWwiIDYAg&ved=0CEYQ6AEwAw)中所述），所以我想知道是否有任何理由不在 VBA 中做同样的事情？我能想到的可能原因是内存、运行时间（例如在循环内重复声明）、传统——可以说是一个很好的理由，因为必须有成千上万的 VBA 程序员希望在例程开始时看到所有使用的变量。有没有我错过的可以解释这种做法的好处或至少它来自哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:22:40.797

我认为这两种方式只是VBA中不同的编码风格

在旧的 C 标准中，所有的声明都必须放在最前面，我想很多人只是采用了这种习惯并将其带入到其他 PL 中，例如 VBA。

对于变量名称的简短列表，在顶部声明变量很清楚。长长的变量名列表将无法阅读

稍后将介绍声明变量接近使用它的位置。对于具有优化器或比 VBA 更大范围的 PL，我认为这种做法比“在顶部声明”具有明显的优势。（就像您可以声明范围仅在 FOR 循环中可见的变量一样）然后优化器将为您更改范围。（用 VBA 的话，它可能会将 GLOBAL 变量更改为 PROCEDURE 变量）

对于 VBA，没有偏好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T18:30:29.450

我在顶部声明了所有变量。我认为宣布它们更接近于首先使用掩码（至少）应该首先解决的另外两个问题。

1.  程序太长：如果您的程序超出了屏幕的大小，可能是它做的太多了，应该分成更小的块。您还会发现，当您的程序很小且只做一件事时，单元测试更容易编写。
2.  变量太多：如果你有一堆相关变量，考虑使用自定义类模块或用户定义类型。它将使代码更具可读性和更易于维护。

如果您的过程很短并且您正在使用类和 UDT，那么在使用点声明变量的好处就会减少或消除。

# c# - 从资源文件/内容中获取流

> ID：13856352
> 
> 赞同：17
> 
> 时间：2012-12-13T09:05:39.327
> 
> 标签：c#, asynchronous, microsoft-metro, windows-runtime, windows-store-apps

这是从资源文件中获取**Stream的正确/唯一方法吗？**

```
 Uri uri = new Uri(fullPath);

    StorageFile storageFile = 
      await Windows.Storage.StorageFile.
        GetFileFromApplicationUriAsync(uri);

    IRandomAccessStreamWithContentType randomAccessStream = 
      await storageFile.OpenReadAsync();

    IInputStream resourceStream = (IInputStream)
      randomAccessStream.GetInputStreamAt(0); 
```

我所有的其他源（http 和本地存储）都返回一个 Stream 对象，并且不得不使用使用其中一个或另一个的 if-else 代码是很痛苦的。

我也尝试从中创建一个 MemoryStream ，但我什至找不到将字节取出的方法......请帮忙。

```
 uint size = (uint)randomAccessStream.Size;
    IBuffer buffer = new Windows.Storage.Streams.Buffer(size);
    await randomAccessStream.ReadAsync(buffer, size, 
      InputStreamOptions.None);

    Stream stream = new MemoryStream(buffer); // error takes byte[] not IBuffer 
```

从资源读取时的 IInputStream.ReadAsync()：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.iinputstream.readasync.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.iinputstream.readasync.aspx)

而 Stream.Read() 和 Stream.ReadAsync() 看起来像这样：

[http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)

和

[http://msdn.microsoft.com/en-us/library/hh137813.aspx](http://msdn.microsoft.com/en-us/library/hh137813.aspx)

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-14T08:11:17.610

好的，我找到了！

```
 StorageFile storageFile =
      await Windows.Storage.StorageFile.GetFileFromApplicationUriAsync(uri);

    var randomAccessStream = await storageFile.OpenReadAsync();
    Stream stream = randomAccessStream.AsStreamForRead(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-05T18:03:21.280

您也可以少写一行：

```
Stream stream = await storageFile.OpenStreamForReadAsync(); 
```

# android - listview 中的数据在焦点更改时从顶行移动到底行

> ID：13856357
> 
> 赞同：2
> 
> 时间：2012-12-13T09:06:04.300
> 
> 标签：android, listview

我正在使用具有文本视图和编辑文本的列表视图。我正在通过`ViewHolder`. 问题是，当我在第一列和第二列中写入数据时，屏幕上可见的部分以及滚动时，第一行的数据会自动复制到最后一行。

这是代码：

```
private class MobileArrayAdapter extends ArrayAdapter
{
    ViewHolder holder;
    private Context context;
    private ArrayList values;

    @SuppressWarnings("unchecked")
    public MobileArrayAdapter(Context context, ArrayList values)
    {
        super(context, R.layout.taskstrt, values);
        this.context = context;
        this.values = values;
        System.out.println("in mobile constructor");
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if (convertView == null)
        {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.taskstrt, parent, false);
            holder.editText = (EditText) convertView.findViewById(R.id.editText1);
            holder.textView = (TextView) convertView.findViewById(R.id.textView1);
            convertView.setTag(holder);
        }
        else
        {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.textView.setText(values.get(position).toString());
        holder.textView.setId(position);
        holder.editText.setId(position);
        holder.editText.setFocusable(false);
        // holder.editText.setFocusableInTouchMode(true);

        holder.editText.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v)
            {
                final int positio = v.getId();
                edittexthold = (EditText) v;
                textholder = (TextView) v;
                edittexthold.setFocusable(true);

                if (edittexthold.getText().toString().length() > 0)

                {
                    HashMap<Integer, String> Map = new HashMap<Integer, String>();
                    Map.put(positio, edittexthold.getText().toString());

                    data.set(positio, Map);
                    System.out.println(data);
                }

                System.out.println(positio + " this is position that is clicked");
                if (positio == 4)
                {
                    System.out.println("going to assign ID");
                    qq = positio;
                    showDialog(NAME_LIST);
                }

                if (positio == 5)
                {
                    qq = positio;
                    System.out.println("going to start time ID");
                    showDialog(STARTTIME);
                }

                if (positio == 3)
                {
                    qq = positio;
                    System.out.println("going to date picker ID");
                    showDialog(DATE_DIALOG_ID);
                }
            }
        }) ;
        holder.editText.setOnFocusChangeListener(new OnFocusChangeListener()
        {

            public void onFocusChange(View v, boolean hasFocus)
            {
                //if(!hasFocus)
                {
                    final int positio = v.getId();
                    String conv = null;
                    final EditText edittexthold = (EditText) v;
                    final TextView textholder = (TextView) v;
                    edittexthold.setFocusable(true);

                    if (edittexthold.getText().toString().length() > 0)

                    {
                        HashMap<Integer, String> Map = new HashMap<Integer, String>();
                        Map.put(positio, edittexthold.getText().toString());

                        data.set(positio, Map);
                        System.out.println(data);
                    }

                    edittexthold.setFocusable(false);
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:18:12.070

> 请尝试此代码，它可能对您有所帮助

```
private class MobileArrayAdapter extends ArrayAdapter
{

     ViewHolder holder;
            private Context context;
            private ArrayList values;

            @SuppressWarnings("unchecked")
            public MobileArrayAdapter(Context context, ArrayList values)
            {

                super(context, R.layout.taskstrt, values);
                this.context = context;
                this.values = values;
                System.out.println("in mobile constructor");

            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {

                    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

         convertView = inflater.inflate(R.layout.taskstrt, parent, false);

               if (convertView == null || convertView.getTag() == null) {

                     holder = new ViewHolder();

                    holder.editText = (EditText) convertView.findViewById(R.id.editText1);
                    holder.textView = (TextView) convertView.findViewById(R.id.textView1);

         holder.textView.setText(values.get(position).toString());

                    holder.textView.setId(position);
                    holder.editText.setId(position);
                    holder.editText.setFocusable(false);
                   // holder.editText.setFocusableInTouchMode(true);

                    holder.editText.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {

                            final int positio = v.getId();
                             edittexthold = (EditText) v;
                             textholder = (TextView) v;
                             edittexthold.setFocusable(true);

                             if(edittexthold.getText().toString().length()>0)

                             {  HashMap<Integer, String> Map=new HashMap<Integer, String>();
                                    Map.put(positio, edittexthold.getText().toString());

                                    data.set(positio, Map);
                                    System.out.println(data);
                                }

                            System.out.println(positio+" this is position that is clicked");
                            if(positio==4)
                            {
                                System.out.println("going to assign ID");
                                qq=positio;
                                showDialog(NAME_LIST);

                            }

                            if(positio==5)
                            {
                                qq=positio;
                                System.out.println("going to start time ID");
                            showDialog(STARTTIME);
                            }

                            if(positio==3)
                                {
                                qq=positio;
                                System.out.println("going to date picker ID");
                                showDialog(DATE_DIALOG_ID);
                                }

                        }
                    }) ;
                    holder.editText.setOnFocusChangeListener(new OnFocusChangeListener() {

                    public void onFocusChange(View v, boolean hasFocus) 
                    {

                    //if(!hasFocus)
                        {

                        final int positio = v.getId();
                        String conv=null;
                        final EditText edittexthold = (EditText) v;
                        final TextView textholder = (TextView) v;
                        edittexthold.setFocusable(true);

                         if(edittexthold.getText().toString().length()>0)

                         {  HashMap<Integer, String> Map=new HashMap<Integer, String>();
                                Map.put(positio, edittexthold.getText().toString());

                                data.set(positio, Map);
                                System.out.println(data);
                            }

                         edittexthold.setFocusable(false);
                    }   }
                });

                    convertView.setTag(holder);

                } 
```

# wcf - 将位置设置为 0 时出现 WCFstreaming 问题

> ID：13856358
> 
> 赞同：0
> 
> 时间：2012-12-13T09:06:05.890
> 
> 标签：wcf, stream

在`WCF`休息服务中，我正在处理流。在服务方法中，我正在上传一个`data contract`工作正常的流。在服务端，我处理流，它的位置现在位于`eof`. 这样做之后，我需要`0`再次将其位置设置为，因此我可以将其保存在那里。但它抛出异常：

> > 不支持指定的方法。

这是否意味着我不能多次处理流？如果是这样，我将需要一个解决方法：/并且我脑海中唯一的解决方案是发送两次流，以便我可以单独处理它，但这并不好，因为我必须上传两次。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:22:53.970

有趣的是，我找到了自己的解决方案 :) 首先我保存了流，然后从该路径中读取它以在该流上进行进一步处理。有趣的是，找到解决方案不需要更详细的技术信息，而是改变逻辑方法。

# c# - 将 HTTP 请求标头添加到 WCF 请求

> ID：13856362
> 
> 赞同：11
> 
> 时间：2012-12-13T09:06:13.350
> 
> 标签：c#, ajax, http, http-headers, httprequest

我有一个由 AJAX 和 C# 应用程序使用的 WCF 服务，
我需要通过 HTTP 请求标头发送一个参数。

在我的 AJAX 上，我添加了以下内容并且它有效：

```
$.ajax({
    type: "POST",
    url: this.tenantAdminService,
    beforeSend: function (req, methodName)
    {
        req.setRequestHeader("AdminGUID", adminGuid);
    } 
```

在 WCF 服务器端，我执行以下操作来获取标头：

```
string adminGUID = System.Web.HttpContext.Current.Request.Headers["AdminGUID"]; 
```

什么是 C# 等价物？如何发送也将由我的 WCF 服务器使用的 http 请求标头？

我需要将参数添加到 HTTP 请求标头而不是消息标头，

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-13T10:56:22.597

最简单的方法是通过以下方式使用[WebOperationContext ：](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.weboperationcontext.aspx)

```
Service1Client serviceClient = new Service1Client();
using (new System.ServiceModel.OperationContextScope((System.ServiceModel.IClientChannel)serviceClient.InnerChannel))
{
    System.ServiceModel.Web.WebOperationContext.Current.OutgoingRequest.Headers.Add("AdminGUID", "someGUID");
    serviceClient.GetData();
} 
```

取自这篇[文章](http://developers.de/blogs/damir_dobric/archive/2011/06/04/wcf-how-to-append-header-to-http-request.aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-13T09:12:56.063

创建一个新的 HttpWebRequest 类型的 WebRequest 对象。设置标题并获得响应。

```
WebRequest req = HttpWebRequest.Create("myURL") as HttpWebRequest;
req.Headers.Add("AdminGUID", "value");
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

有关 webrequest 的更深入示例，请参阅此[页面](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

# iphone - 使用自定义图像和文本颜色更改后退按钮

> ID：13856363
> 
> 赞同：2
> 
> 时间：2012-12-13T09:06:17.110
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, back-button

我想在导航栏中更改后退按钮的后退按钮外观。为此，我有这段代码。

```
UIImage *backButtonImage = [UIImage imageNamed:@"backbutton.png"];
UIButton *backbutton = [UIButton buttonWithType:UIButtonTypeCustom];
backbutton.backgroundColor = [UIColor colorWithPatternImage:backButtonImage];
backbutton.titleLabel.text = @"back";
backbutton.titleLabel.textColor= [UIColor colorWithRed:50/255.0
                                                 green:158/255.0
                                                  blue:218/255.0
                                                 alpha:1.0];

backbutton.frame = CGRectMake(0, 0, backButtonImage.size.width, backButtonImage.size.height);
UIBarButtonItem * back = [[UIBarButtonItem alloc] initWithCustomView:backbutton];
[backbutton addTarget:self action:@selector(back_Clicked) forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.leftBarButtonItem = back; 
```

但我仍然得到标准的后退按钮。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:13:58.257

在将该 viewController 推送到堆栈之前，将您的代码自定义后退按钮。并设置 BackBarButtonItem ，而不是 leftBarButtonItem。

```
UIImage *image = [UIImage imageNamed:@"backbutton.png"];
UIButton *backbutton = [UIButton buttonWithType:UIButtonTypeCustom];
backbutton.bounds = CGRectMake( 0, 0, image.size.width, image.size.height );
[backbutton setImage:image forState:UIControlStateNormal];
backbutton.titleLabel.textColor = [UIColor blueColor];
UIBarButtonItem *back = [[UIBarButtonItem alloc] initWithCustomView:backbutton];
[[self navigationItem] setBackBarButtonItem: back];
[self.navigationController pushViewController:yourViewControllerObject animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:10:01.543

采用

```
 self.navigationItem.leftBarButtonItem = back; 
```

代替

```
 self.navigationController.navigationItem.leftBarButtonItem = back; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:11:05.253

根据您的要求使用以下代码..

```
- (void)viewDidLoad
{
        ///write your code

        UIImage *backButtonImage = [UIImage imageNamed:@"backbutton.png"];
        UIButton *backbutton = [UIButton buttonWithType:UIButtonTypeCustom];
        //[backbutton setImage:backButtonImage forState:UIControlStateNormal];//this line for set only image on button
        [backbutton setBackgroundImage:backButtonImage forState:UIControlStateNormal];
        [backbutton setTitle:@"Back" forState:UIControlStateNormal];
        backbutton.frame = CGRectMake(0, 0, backButtonImage.size.width, backButtonImage.size.height);
        UIBarButtonItem * back = [[UIBarButtonItem alloc] initWithCustomView:backbutton];
        [backbutton addTarget:self action:@selector(back_Clicked) forControlEvents:UIControlEventTouchUpInside];
        self.navigationItem.leftBarButtonItem = back;
} 
```

当后退按钮单击下面的方法调用时，您将转到上一个视图控制器

```
-(void)back_Clicked{
      [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:17:35.240

```
[self.navigationItem setLeftBarButtonItem:[[UIBarButtonItem alloc] initWithCustomView:[self buttonWithImage:@"backButton" heighlightImageName:@"backButton" buttonFrame:CGRectMake(2, 1, 30, 30) selectorName:@selector(buttonBackClicked:) target:self]]];

- (UIButton*)buttonWithImage:(NSString*)normalImageName heighlightImageName:(NSString*)heighlightImageName buttonFrame:(CGRect)buttonFrame selectorName:(SEL)selectorName target:(id)target
{
    UIButton *tempButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [tempButton setFrame:buttonFrame];
    [tempButton addTarget:target action:selectorName forControlEvents:UIControlEventTouchUpInside];
    [tempButton setImage:[self getImageFromResource:normalImageName] forState:UIControlStateNormal];
    [tempButton setImage:[self getImageFromResource:heighlightImageName] forState:UIControlStateHighlighted];
    return tempButton;
}
- (UIImage*)getImageFromResource:(NSString*)imageName
{
    return [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:imageName ofType:@"png"]];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T09:37:16.743

```
 IButton *favButton = [[UIButton alloc] init];

     [favButton setImage:[UIImage imageNamed:@"unselected.png"]     forState:UIControlStateNormal];
     [favButton addTarget:self action:@selector(favouriteButtonClicked:)
    forControlEvents:UIControlEventTouchUpInside];

 UIBarButtonItem *button = [[UIBarButtonItem alloc]
                            initWithCustomView:favButton];

 self.navigationItem.rightBarButtonItem = button;

  [button release];
  [favButton release]; 
```

# c# - C# 泛型 - 实现其他泛型类的类

> ID：13856367
> 
> 赞同：1
> 
> 时间：2012-12-13T09:06:38.927
> 
> 标签：c#, generics

我有一个

```
public class A<T> where T : IBase
{
    //Does something
} 
```

我需要第二个类，其行为类似于 A 类的集合

```
public class B<A<T>> : IEnumerable<A<T>> where T : IBase
{
} 
```

问题是我不想创建像

```
public class B<A<MyCustomObjectP>> : IEnumerable<A<MyCustomObjectP>>
{
}

public class C<A<MyCustomObjectQ>> : IEnumerable<A<MyCustomObjectQ>>
{
} 
```

等等.. 我想让 CustomObject 成为实现 IBase 的泛型类型参数。

我发现即使这样做也是非法的：

```
public class B<T, U> : IEnumerable<T> where T : A<U> where U : IBase
{
} 
```

如果这是非法的，我怎么能实现这种行为？是否有更好的设计模式可能会有所帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:10:25.163

`IBase`约束是在 上定义的，`A<T>`因此必须在所有想要使用的泛型类上再次定义它`A<U>`（`U`用于区别于`T`类`A<T>`定义，但它可以被称为任何东西）。你应该能够简单地做：

```
public class B<T> : IEnumerable<A<T>> where T : IBase { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:30:56.893

您写道，您需要**第二个类**，其行为类似于**class 的集合`A`。**

由于您还有其他要添加的类（如`B`）继承自`IBase`，因此您可以将集合设为`IBase`.

因此，解决方案看起来像这样（请注意，我已经使用过`List`，但您可以轻松地将其替换为`IEnumerable`- 但您必须像您自己一样实现方法`.Add`）：

```
void Main()
{
    var items = new CollectionOf<IBase>(); // create list of IBase elements
    items.Add(new A() { myProperty = "Hello" }); // create object of A and add it to list
    items.Add(new B() { myProperty = "World" }); // create object of B and add it to list
    foreach(var item in items)
    {
        Console.WriteLine(item.myProperty);
    }
}

// this is the collection class you asked for
public class CollectionOf<U>: List<U>
where U: IBase
{
    // collection class enumerating A
    // note you could have used IEnumerable instead of List
}

public class A: IBase
{
    // class A that implements IBase
    public string myProperty { get; set; }
}

public class B: IBase
{
    // class B that implements IBase too
    public string myProperty { get; set; }
}

public interface IBase {
    // some inteface
    string myProperty { get; set; }
} 
```

# c# - How should the following code sample be amended inorder to be able to return the object?

> ID：13856368
> 
> 赞同：0
> 
> 时间：2012-12-13T09:06:39.700
> 
> 标签：c#, android, asp.net, web-services

The following code samples are from my aspx web service.

I would like to know how it should be changed so that i could return it as an object. All the following codes are on the web service and i am trying to call the object from Android.

So i would just like to know what changes i have to make in order to be able to pass the object.

Any help would be greatly appreciated.

```
[WebMethod]
public object SomeMethod(Vehicle obj)
{
    return obj;
}

[WebMethod]
public void simpleCase()
{
    Vehicle obj = new Vehicle();
    obj.VehicleID = "KL-9876";
    obj.VehicleType = "Nissan";
    obj.VehicleOwner = "Sanjiva";
}

public class Vehicle
{
    public string VehicleID { get; set; }
    public string VehicleType { get; set; }
    public string VehicleOwner { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:19:54.850

如果我理解正确，您想从您的 Android 应用程序创建一个 Web 请求并在您的请求后接收该特定数据，这是 json 和 rest wcf Web 服务的经典案例。

这里有一个如何启动服务器端的链接：http: [//msdn.microsoft.com/en-us/library/dd203052.aspx](http://msdn.microsoft.com/en-us/library/dd203052.aspx)

这是一个链接，向您展示如何在客户端使用它： [http ://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

我希望这或多或少是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:37:37.680

```
[DataContract]
public class Salesman
{

    [DataMember(Name = "a")]
    public virtual string Id { get; set; }

    [DataMember(Name = "b")]
    public virtual int RoleId { get; set; }

    [DataMember(Name = "c")]
    public virtual string Name { get; set; }

    [DataMember(Name = "d")]
    public virtual string Address { get; set; }

    [DataMember(Name = "e")]
    public virtual string Phone { get; set; } 
} // "a","b","c","d"... are the values with which you'll identify the object properties - client side - when json parsing.

 [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
    public class SalesmanService 
    {

        [OperationContract]
        [WebGet(UriTemplate = "/get/{id}", 
            RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        public Salesman Get(string id)
        {
          //return your salesman
        }
    } 
```

不要忘记 global.asax 中的这一点：

RouteTable.Routes.Add(new ServiceRoute("salesman", new WebServiceHostFactory(), typeof(SalesmanService)));

基本上你应该可以拨打这样的电话：例如“..localhost/salesman/50”

这只是一个小示例，您必须亲身体验 wcf 和 json 以获得更广泛的理解。

# shell - facing issue in reading line from a file in shell script

> ID：13856379
> 
> 赞同：0
> 
> 时间：2012-12-13T09:06:48.377
> 
> 标签：shell

This is a input file `file1.txt`:

```
premon D0000070 0x201 0x40 
```

this is the script. `script.sh`

```
#!/bin/bash
CommandFileName=$1
while read line # This will read a line from file1.txt
 do
   FileName="${line// /_}"
   echo $FileName

   cmviewer -- -u USUPPXY-0 -b --agent=DCHUP --buffer-size=250000  #this will hold a buffer of size 2.5MB
   sleep 1

   cmviewer -- -u USUPPXY-0 -m --agent=DCHUP # this will start monitoring 
   sleep 1

   cmviewer -- -u USUPPXY-0 --up '$line' --agent=DCHUP  

   #this is the filtering condition // this should be replicate as  a command ->     cmviewer -- -u USUPPXY-0 --up 'premon D0000070 0x201 0x40'  #here I suspect $line is taking \n char aswell, so the command is not giving the desire output. #am I correct $line is taking new line char ? if it is so then how to remove it. 

   cmviewer -- -u USUPPXY-0 -s --agent=DCHUP #this will stop monitoring
   sleep 1

   cmviewer -- -u USUPPXY-0 -g --agent=DCHUP --dir=/root/  
   # this will collect the logs in /root directory.  - here I am getting “Parsing error  , premon D0000070 0x201 0x40 is not valid error” # but when I  execute the same command with out using script , it is working fine

   #mv /root/*.BIN /root/$FileName
   done < $CommandFileName 
```

hope my question is clear..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:35:38.590

实际上你的问题不是很清楚......但尝试删除行尾的分号

```
done < $CommandFileName; 
```

我不认为它应该在那里。^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:11:01.343

很难确定您的问题是什么，但我相信您正试图`cmviewer`从输入文件中获取要传递的参数。尝试：

```
while read args; do
...
cmviewer -- -u USUPPXY-0 --up $args --agent=DCHUP
...
done < $CommandFileName 
```

也就是说，只需在将参数传递给`cmviewer`. 或者您可能希望将所有参数作为单个参数传递给`cmviewer`，在这种情况下，您必须使用双引号：

```
cmviewer -- -u USUPPXY-0 --up "$args" --agent=DCHUP 
```

# html - Login plugin messing with HTML DOM structure

> ID：13856383
> 
> 赞同：2
> 
> 时间：2012-12-13T09:07:07.377
> 
> 标签：html, css, facebook, plugins, login

I've integrated the facebook login in a site which seems to be the source of some trouble.

Whenever I log in with the 'regular way' (by an self created field) there is no problem, but once I use a facebook login the divs of the site are getting messed up.

I've got a wrapper with a width of 90% of the page, inside this div there are two divs one named content with 80% of the width of the wrapper and the other once receives the other 20% of the width.

```
<div id="wrapper">
    <div id="content">
        content here...
    </div>
    <div id="sidebar">
        side bar items etc.
    </div>
</div> 
```

Now if I press `F12` to check the source / inspect elements of the site it shows up perfectly with the regular login. However once I login with facebook the following pops up:

```
<div id="wrapper">
    <div id="content">
        content here...
        <div id="sidebar">
            side bar items etc.
        </div>
    </div>
</div> 
```

Is this caused by the facebook plugin loading, whilst php/html is not waiting to generate any content and just continues? I am 100% sure this is caused by the login as I excluded any other option.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:56:08.527

也许您可以添加一个元素，该元素将使用固定尺寸（宽度/高度）和 css 属性保存/环绕 Facebook 登录`overflow:hidden`

# c++ - How to provide implicit and explicit conversion ctr for same type?

> ID：13856388
> 
> 赞同：10
> 
> 时间：2012-12-13T09:07:16.220
> 
> 标签：c++, templates, c++11, type-conversion

Given a simple `template <typename T> struct X { T x, y; };`, I want to provide conversion constructors such that user can write:

```
X<double> a;
X<int16_t> b = a; // uses implicit conversion ctr (compiles with warning)
X<int16_t> c(a);  // uses explicit conversion ctr (compiles w/o warning)
X<int32_t> d = c; // uses implicit conversion ctr (compiles w/o warning) 
```

I believe that to achieve this goal, I need to implement both, an implicit and an explicit conversion constructor from type `U`. But it's not possible to overload on "implicit" and `explicit`:

```
template <typename T> struct X {
     X(T x = T(), T y = T()) : x(x), y(y) {}

     // implicit conversion
     template <typename U> 
     X(const X<U>& other) : x(other.x), y(other.y) {}

     // not possible!
     template <typename U> 
     explicit X(const X<U>& other)
         : x(static_cast<T>(other.x))
         , y(static_cast<T>(other.y)) 
     {}

     T x, y;
}; 
```

How could I achieve this goal (I guess I can't...)?

My initial thought was that ~~I need to enable/disable the one or other depending on `is_lossless_convertible`. So is there a suitable type trait?~~

I would like to test if a *scalar* type `U` is convertible to type `T` without loss of precision:

```
using namespace std;
static_assert(is_lossless_convertible<int16_t, int32_t>::value == true);
static_assert(is_lossless_convertible<int32_t, int16_t>::value == false);
static_assert(is_lossless_convertible<int16_t, uint32_t>::value == false);
static_assert(is_lossless_convertible<int32_t, double>::value == true);
static_assert(is_lossless_convertible<double, int32_t>::value == false); 
```

~~In short, it should yield `true` if `std::is_convertible<U, T>::value == true` **and** if `U x; T y = x;` would not issue a compiler warning regarding loss of information.~~

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T10:00:09.763

您不能重载显式，但*可以*提供显式转换构造函数和隐式转换运算符：

```
#include <iostream>
template<typename T> struct S {
   S() {}
   template<typename U> explicit S(const S<U> &) { std::cout << "explicit\n"; }
   template<typename U> operator S<U>() { return S<U>(this); }
private:
   template<typename U> friend struct S;
   template<typename U> S(const S<U> *) { std::cout << "implicit\n"; }
};

int main() {
   S<double> sd;
   S<int> si1(sd);
   S<int> si2 = sd;
} 
```

输出：

```
explicit
implicit 
```

用 gcc 和 clang 测试。

显式转换构造函数优于隐式转换运算符，因为在后一种情况下，会额外（可能省略）调用`S<int>`.

# fluent-nhibernate - Disabling caching in Fluent Nhibernate for a specific override

> ID：13856389
> 
> 赞同：2
> 
> 时间：2012-12-13T09:07:29.733
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

We're using convention based mapping with Fluent NHibernate. The mapping looks like so:

```
 .Conventions.Add
            (
                Table.Is(x => string.Concat(x.EntityType.Name.ToLower(), "s")),
                PrimaryKey.Name.Is(x => "Id"),
                DefaultLazy.Always(),
                DefaultCascade.SaveUpdate(),
                AutoImport.Never(),
                Cache.Is(x => x.ReadWrite())
            ) 
```

For most of our objects this is perfect but on certain objects I wish to disable the 2nd level cache. However it doesn't appear that I can do this. There is no fluent option for Cache.None. I've even tried Not.Cache() but that didn't work either.

Has anyone got any ideas on how I can disable the cache for certain selected model objects?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:38:02.703

好的，经过一番挖掘后，我设法找到了它：

1.  删除快捷方式 `Cache.Is(x => x.ReadWrite()`
2.  创建一个新的约定类：

```
公共类CacheableConvention：IClassConventionAcceptance，IClassConvention
{
    公共无效接受（IAcceptanceCriteria 标准）
    {
        criteria.Expect(x => x.EntityType.IsNotAny(typeof(Content), typeof(InstanceSetting), typeof(Profanity)));
    }

    公共无效应用（IClassInstance 实例）
    {
        instance.Cache.ReadWrite();
    }
}

```

3.  将约定添加到 AutoMappings。
4.  完毕！

# c++ - What do you mean by leaking?

> ID：13856394
> 
> 赞同：0
> 
> 时间：2012-12-13T09:07:52.677
> 
> 标签：c++, pointers, vector

I just know the formal meaning of memory leaking where if we do not use the keyword 'delete' for deleting pointers. But when we perform in the following way why is there a chance of leak?

```
void k()
{
vector<m*>p;
:
:
:
} 
```

as far as i know the deletion of the pointers is done automatically by the compiler itself, so is it really necessary that we delete pointers at the end?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:10:27.423

> 据我所知，指针的删除是由编译器本身自动完成的

不，这不对。以下是泄漏：

```
vector<m*>p;
p.push_back(new m); 
```

您需要自己删除内存：

```
delete p[0]; //in this case 
```

干净的替代方法是使用智能指针：

```
vector<std::shared_ptr<m> > p; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T09:13:19.270

这取决于你投入了什么`p`。如果您只是存储指向其他地方管理的对象（或未动态分配的对象）的指针，则不会发生泄漏： 的内容`vector`将被其析构函数清除。

但是，如果您执行类似的操作`p.push_back(new m);`，并且从不调用退出前`delete`的元素，那么您确实在泄漏内存。（指针）的内容将被其析构函数清除；指针指向的内存不会。`p``k``vector`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T09:10:09.537

假设您与您一起**分配**向量（`m*`s）**的`new`**内容，如果您想避免泄漏，您需要在退出函数之前**自己**执行**。`delete`****只有当内容是一个对象**而不是指向动态分配的对象的指针时，向量内容的自动删除才能很好地工作。

你能做的就是`m*`用`std::unique_ptr<m>`. 现在**智能指针**将**自动执行`delete`**，您无需执行任何操作。

```
vector<std::unique_ptr<m>>p; 
```

或者，这也是安全的。由于您是按值存储的，因此向量析构函数在离开函数时会自动销毁内容。

```
vector<m>p; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T09:29:30.490

只是为了解决您最初的问题：内存管理错误有两个相关但不同的概念。我喜欢流行的内存调试器 Valgrind 使用的术语：

*   仍然可以访问的内存：这并不是严格意义上的泄漏，而只是部分程序员的懒惰。它不干净，但不一定是问题。当您懒得清理本来可以清理的东西时，就会发生这种情况：

    ```
    int main()
    {
        int * p = new int[100];
    }

    // memory at p is still reachable 
    ```

    在这样的代码中，“仍然可以访问”的分配通常在程序结束之前一直在使用，并且清理的唯一合理点是在最后。

*   绝对失去记忆：这是你真正的*泄漏*。当您丢失对动态分配的内存的所有引用时，就会出现这种情况。这意味着即使在原则上，您也无法释放这些资源。这是一个严重的编程错误。如果您在循环中泄漏内存，或者在被调用任意次数的情况下，您的程序很可能在运行太长时间后就死掉了，可能不会在使操作系统的其余部分暂时无法使用之前死掉。典型代码如下所示：

    ```
    int foo()
    {
        int * p = new int[100]();
        return p[20] + 2;
    }   // leak: We lost track of the memory at p

    int main()
    {
        for (std::string line; std::getline(std::cin, line); )
        {
            int * q = new int[line.length() + 1];
            q[0] = foo();  // leak 1
        }                  // leak 2: lost track of the memory at q
    } 
    ```

以上所有情况都违反了内存管理的基本规则，该规则最早于 13 世纪制定：

> CPU，让我成为你代码的工具。
> 哪里有`malloc`，让我写`free`。
> 哪里有`new`，`delete`。
> 哪里有`new[]`，`delete[]`。
> 进入

作为推论，我们可以推导出*C++ 内存管理的黄金法则*，它显着降低了内存管理错误的风险：

> 不要使用`new`，永远不要使用`delete`. 不要使用原始指针。

关键是原始指针不携带有关可能的指针的任何所有权信息。因此，不可能仅基于原始指针来决定是否需要以及如何进行清理。这也是您的代码的问题 - 答案很简单，“这取决于”！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T09:11:05.320

矢量本身很好。它会自动正确地管理自己的内存。

因此，答案取决于您在该向量中放入的内容。如果您将指针指向堆分配的对象，则您有责任在使用完这些对象后释放它们。矢量不会为您做到这一点。

如果你不这样做，你就会有内存泄漏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T09:11:41.487

当您从该向量中删除元素时（使用`resize`,`erase`或`clear`），并假设它`m*`是用 分配的`new`，它不会使用`delete`运算符。因此，您将有内存泄漏。但是，如果这些指针指向堆栈上的变量，则不会发生内存泄漏。

编辑：您可以在从向量中删除元素之前删除元素，但是如果您调用调整大小或清除，您很可能不会删除所有元素（除非您在清除之前循环并删除）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-13T09:15:42.810

删除向量时，向量中的指针不会被删除。您可以使用

```
vector<shared_ptr<m>> p 
```

如果您与程序的其他部分共享指针。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-13T11:38:19.443

一个肤浅的答案是否定的：你没有在你的代码片段中分配任何内存，所以不会有泄漏。一个更有用的答案是：这取决于它的作用`vector`是什么，以及你在其中投入了什么。

对于初学者，如果类型`m`具有值语义并且是可复制的，那么您应该使用`vector<m>`，而不是`vector<m*>`。当然，没有泄漏的机会`vector<m>` （假设您已`m`正确实施）。

至少在我工作过的应用程序领域中，使用指针向量的最常见原因是实体对象之间的导航。每个实体对象都管理自己的生命周期，或者（不太频繁）属于将管理其生命周期的其他实体对象。所以没有泄漏的风险，*但是*有一个非常重要的悬空指针风险：当指向对象的生命周期结束时，您必须确保从向量中删除指向它的任何指针。（这通常是通过使用观察者模式的一些变体来完成的。）

使用指针向量的另一个原因是包含的对象是多态的，或者复制起来很大且成本很高。在这种情况下，*如果*包含的对象不包含指针，或者您可以证明循环是不可能的，*并且*指向的对象没有重要的内部行为（因此只有非常有限的使用`this`），您可以制作一个集合`std::shared_ptr<m>`；在实践中，Boost 的指针容器可能是一个更好的解决方案（并且避免了 的风险`std::shared_ptr`）。解决方案和 Boost 的指针容器都 `shared_ptr`要求动态分配向量中的所有元素。

# python - 保存 ImageField mongoengine

> ID：13856395
> 
> 赞同：1
> 
> 时间：2012-12-13T09:07:54.453
> 
> 标签：python, tornado, mongoengine

我在 mongoengine orm 中有以下类定义：

```
import mongoengine as me

class Description(me.Document):
    user = me.ReferenceField(User, required=True)
    name = me.StringField(required=True, max_length=50)
    caption = me.StringField(required=True, max_length=80)
    description = me.StringField(required=True, max_length=100)
    image = me.ImageField() 
```

在我的龙卷风网络请求处理程序的 post 方法中：

```
from PIL import Image

def post(self, *args, **kwargs):
    merchant = self._merchant
    data = self._data
    obj_data = {}
    if merchant:
        params = self.serialize() # I am getting params dict. NO Issues with this.
        obj_data['name'] = params.get('title', None)
        obj_data['description'] = params.get('description', None)
        path = params.get('file_path', None)
        image = Image.open(path)
        print image # **
        obj_data['image'] = image # this is also working fine.
        obj_data['caption'] = params.get('caption', None)
        obj_data['user'] = user
        des = Description(**obj_data)
        des.save()

        print obj_data['image'] # **
        print des.image # This is printing as <ImageGridFsProxy: None> 
```

** print obj_data['image'] 和 print image 打印如下：

```
<PIL.PngImagePlugin.PngImageFile image mode=1 size=290x290 at 0x7F83AE0E91B8> 
```

但

> des.image 仍然没有。

请建议我这里有什么问题。

在此先感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:31:23.947

你不能用`obj.image = image`这种方式将 PIL 对象放入一个字段中。你必须这样做：

```
des = Description()
des.image.put(open(params.get('file_path', None)))
des.save() 
```

也就是说，调用方法`ImageField`创建实例后应该填充文件对象。`put`

# facebook - How do I get Access Token for Facebook Graph API in C#?

> ID：13856397
> 
> 赞同：0
> 
> 时间：2012-12-13T09:08:03.743
> 
> 标签：facebook, c#-4.0, facebook-graph-api

I am trying to develop a demo Facebook App in C#. But I could not get Access Token (for both Application & User).

Please help me, How could I get this for both Application & User (Diff examples are welcome).

My Code is:

```
public partial class _Default : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        CheckIfFacebookAppIsSetupCorrectly();

        var fbWebContext = FacebookWebContext.Current;
        if (fbWebContext.IsAuthorized())
        {
            var fb = new FacebookWebClient(fbWebContext);
            dynamic result = fb.Get("/me");

            lblName.Text = "Hi " + result.name;
        }
    }
    private void CheckIfFacebookAppIsSetupCorrectly()
    {
        bool isSetup = false;
        var settings = ConfigurationManager.GetSection("facebookSettings");
        if (settings != null)
        {
            var current = settings as IFacebookApplication;
            if (current.AppId != "{app id}" &&
                current.AppSecret != "{app secret}")
            {
                isSetup = true;
            }
        }

        if (!isSetup)
        {
            System.Web.HttpContext.Current.Response.Redirect("~/GettingStarted.aspx");
        }
    }
} 
```

Well When I check the code by putting the break points, I found that **if (fbWebContext.IsAuthorized())** is always returns false, If I try to comment the Authorization I get the following Exception:

## (OAuthException) An active access token must be used to query information about the current user.

Than I searched for this, I got following Link: [Another Question Link](https://stackoverflow.com/questions/5171309/facebook-c-sharp-sdk-and-access-token)

But When I got the Access Token for the App, I could not assign to the object as that is readonly.

What should I Do in this case, Also How do I get Access Token for Users?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:45:13.037

您需要在[facebookDeveloperSite创建一个新的应用程序和帐户](https://developers.facebook.com/)

您将从那里获得访问令牌

问候

# batch-file - 使用批处理文件将本地 IP 地址写入文本文件

> ID：13856398
> 
> 赞同：7
> 
> 时间：2012-12-13T09:08:05.857
> 
> 标签：batch-file, command, cmd, ip

我想创建一个将本地 IP 地址写入 txt 文件的批处理文件。当我使用此代码运行批处理文件时（文件路径错误，但这不是问题）：

```
ipconfig | find "IP Address" > \File.txt 
```

我得到了整个 Windows IP 配置（我用 xxx 更改了一些数字和内容以不显示所有信息）

```
 IP Address. . . . . . . . . . . . : 100.100.100.223

    IP Address. . . . . . . . . . . . : 192.xxx.xxx.xxx 
```

我只想写入文件`100.100.100.223`。

我是批处理文件的新手，我真的搜索了很多，我真的很困惑。（也许我用错误的关键字搜索）。

忘了告诉我正在使用 Windows XP（因为某些答案在 XP 上不起作用）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T09:36:48.350

使用命令将刚刚写入的文件的第一行读入变量`SET /P`，然后使用该行覆盖文件`ECHO`：

```
ipconfig | find "IP Address" > \File.txt
**< \File.txt SET /P first_ip=
ECHO %first_ip%> \File.txt** 
```

* * *

更新（回应评论）：

要仅提取 IP 地址，您可以使用`FOR /F`如下循环：

```
ipconfig | find "IP Address" > \File.txt
< \File.txt SET /P first_ip=
**FOR /F "delims=: tokens=2" %%I IN ("%first_ip%") DO (
  ECHO %%I> \File.txt
)** 
```

循环允许您逐行处理文本（文件或字符串文字），根据指定的分隔符`FOR /F`将每一行拆分为字段（或*标记*）。您可以在内置帮助 ( `FOR /?`) 中阅读有关此命令的更多信息。我只会补充一点，在这种情况下，处理的部分是字符串文字（ 的值`first_ip`），分隔符设置为`:`，循环变量 ( `%%I`) 接收^(第二)个令牌，这是一个 IP 地址。

请注意，`:`IP 和 IP 之间的空间被保留，即它成为令牌 ( ` 100.100.100.223`) 的一部分，因此也被写入文件。如果您对此不太满意，可以使用子例程来摆脱空间，如下所示：

```
ipconfig | find "IP Address" > \File.txt
< \File.txt SET /P first_ip=
FOR /F "delims=: tokens=2" %%I IN ("%first_ip%") DO (
  **CALL :MyEcho %%I**
)
:: the following command is there merely to
:: avoid running (into) the subroutine again
**GOTO :EOF

:MyEcho
ECHO %1> \File.txt** 
```

当调用子例程 ( `CALL :MyEcho %%I`) 时，参数与前导空格一起传递。但是在处理子例程的命令行时，该空格不再被视为值的一部分，因为参数没有被引用，因此解析器只看到一个与名称分开的参数，并带有两个空格。因此`%1`，子例程中的 计算结果为*没有*前导空格的地址。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T11:48:50.727

```
for /f "tokens=2 delims=:" %%a in ('ipconfig^|find "IPv4 Address"') do (
set ip=%%a
goto :BREAK
)

:BREAK
echo %ip: =% >ip.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:13:46.897

如果你对 powershell 没问题，试试这个：

```
powershell.exe -c "gwmi Win32_NetworkAdapterConfiguration | ? { $_.IPAddress -ne $null } | % {$_.ipaddress[0]}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-10T07:59:50.830

您可以使用自动热键。

对于消息框，

```
msgbox, %A_ipAddress% 
```

或者如果你想在文本文件中用户

```
Fileappend, %A_ipaddress%. Ip.txt 
```

有用的链接。[https://autohotkey.com/board/topic/45109-how-to-get-my-ip-address/](https://autohotkey.com/board/topic/45109-how-to-get-my-ip-address/)

# c# - VB.NET 不区分大小写；很好区分大小写？

> ID：13856401
> 
> 赞同：1
> 
> 时间：2012-12-13T09:08:20.560
> 
> 标签：c#, vb.net, visual-studio-2010

这没关系`C#`：

```
private int total;
public int Total {
    get {
        return total;
    }
} 
```

因此，支持字段`total`的拼写与 the 相同，`Property` `Total`唯一能区分它们的是`T`.

`VB.NET`如果我尝试执行以下操作，VS 会抱怨。事实上，它甚至不会让我`Return total`用小写字母书写`t`并自动更正为大写字母`T`

![在此处输入图像描述](../Images/5e88e98ff15ee4553d3baffc840a2703.png)

但是，如果我以不同的方式拼写支持字段，那么它似乎没问题：

```
Private fTotal As Integer
Public ReadOnly Property Total() As Integer
    Get
        Return fTotal
    End Get
End Property 
```

我意识到它们是不同的语言，但这种差异背后是否有合乎逻辑的原因？（**编辑**最初说“明显的不一致”而不是“差异”）

另外 - 我假设即使 Visual Studio 自动更正了我的 VB.NET 的大小写，但实际上这种语言不区分大小写？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T09:23:08.090

> 我意识到它们是不同的语言，但这种明显的不一致背后是否有合理的原因？

最初的原因只是历史原因：VB 基于 BASIC，与当时的其他语言 (FORTRAN) 一样，它不区分大小写（但通常以全大写形式编写）。

此外，我没有看到任何不一致之处：在 VB 内部，大小写是完全一致的。特别是，它不像您的标题所要求的那样“区分大小写”。

即使在今天，也有*不*区分大小写的逻辑原因：由于名称冲突，这使得引入错误变得更加困难；考虑以下 C# 代码：

```
private int total;

public int Total {
    get { return total; }
    set { Total = value; }
} 
```

您是否立即发现了错误？如果是这样，还不错（这里的语法高亮有帮助）。在 VB 中，此类错误不会发生。但在实践中，我认为这类错误并不是那么成问题，因为一旦发现它们就很容易消除。因此，虽然这是不区分大小写的一个原因，但它并不是一个非常强大的原因。

最后，请注意 Windows 和 OS X 文件系统在此处使用与 VB 相同的约定：文件系统不区分大小写（文件名大小写无关紧要）但*区分大小写*——这意味着文件系统保留文件名的原始大小写并显示它正确，但在比较时，它不考虑大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:12:37.523

有几点需要解决：

*   Visual Basic 语言始终不区分大小写。编译器不在乎您是否以一种方式声明变量并以另一种方式使用它。

*   IDE (Visual Studio) 将有助于修复变量使用情况以匹配实际声明。您也许可以在设置中将其关闭，但我从未尝试过，所以我不知道它是否真的可能。

现在回到你的代码：

```
Private total As Integer
Public ReadOnly Property Total() As Integer
    Get
        Return Total
    End Get
End Property 
```

这里实际上有两个错误：

1.  您有两个同名成员，一个名为 的字段`total`和一个名为 的属性`Total`。它们的名称相同，因为它们的比较不区分大小写（编译器会为此显示错误 - 屏幕截图中的蓝色波浪线）。

2.  IDE 自动将属性内的“总计”更正为“总计”，因为您实际上指的是属性，而不是字段。编译器不会因此向您显示错误，但如果您要删除该字段（以便您的程序编译），您将在运行时遇到堆栈溢出，因为该属性会调用自身。请注意，即使您确实设法打开了 IDE 的自动更正功能，您仍然会引用该属性，因为它的查找不区分大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T09:11:22.640

VB.NET 不区分大小写，它的设计目的是让 Visual Basic 程序员易于学习，并且与 Visual Basic 共享此特性。

C# 区分大小写，它是与 VB.NET 不同的语言。即使它们都用于 .NET 开发，**它们也不必保持一致**。您可以使用多种语言进行 .NET 开发，这些语言之间的差异很多，并且不限于区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:12:58.990

到目前为止，VB.Net 编译器是不区分大小写的，因此出于所有意图和目的，它禁止使用具有相同名称且只有大写或小写字母不同的字段。

底层 CLI（公共语言接口）和 CLR（公共语言运行时）确实支持大小写差异。但是，给出的 c# 示例不是 CLS 有效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T15:04:58.340

实际上，这里的问题与名为“total”的不同案例字段无关。如果删除该字段，您会看到同样的问题。

问题是 VB 允许您通过与属性或函数同名的隐藏局部变量来选择设置要由属性或函数返回的值，然后返回该隐藏变量。

```
e.g., this will work:
Public ReadOnly Property Total() As Integer
    Get
        Total = 3  'setting the hidden VB variable
        Return Total 'returning the hidden VB variable
    End Get
End Property 
```

在这种情况下，VB 甚至允许省略 return 语句：

```
Public ReadOnly Property Total() As Integer
    Get
        Total = 3  'setting the hidden VB variable
    End Get 'since the hidden VB variable was set, it is returned implicitly
End Property 
```

这些类型的 VB 主义可以让解释 VB 代码中真正发生的事情变得非常令人沮丧。

# git - 一个项目下git多个项目的策略

> ID：13856404
> 
> 赞同：1
> 
> 时间：2012-12-13T09:08:34.297
> 
> 标签：git, version-control

这个问题不会显示代码。因为我想知道在 git 版本化的一个项目中使用多个项目的正确方法。

假设我有一个主项目。我在子目录下克隆了其他依赖项目。这样做的标准方法是什么？

例如：

假设我已经克隆了 Wordpress。

然后我在主题文件夹下克隆了最新的开源模板。我在 plugins 文件夹下克隆了最新的 OpenSource 插件。

每个子项目都将包含 .git 文件夹。

我可以将它们（`.git`）添加到`.gitignore`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:16:43.063

如果“子项目”是您通常不会在超级项目中开发的依赖项，并且如果子项目是 git repos，那么执行此操作的常用方法是[git submodule](http://git-scm.com/docs/git-submodule)。初始化或克隆子模块，将告诉包含 git repo 忽略该文件夹的内容，并且只记住您当前已签出的依赖 repo 的哪个版本。如果依赖项不是 git repos，从 git 的角度来看，您只需将它们添加到`.gitignore`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:15:39.210

您可以使用[git submodule](http://book.git-scm.com/5_submodules.html)来管理您的子项目。

在您的主项目下，执行以下命令以添加和克隆两个子项目：

```
git submodule add https://example/project1.git themes/project1
git submodule add https://example/project2.git themes/project2
git submodule update --init 
```

# windows-server-2008-r2 - 使用 Forfiles 删除超过 1 天的日志，但命令失败，因为正在使用其中一个日志

> ID：13856405
> 
> 赞同：1
> 
> 时间：2012-12-13T09:08:35.930
> 
> 标签：windows-server-2008-r2

我经历了`forfiles /?`但找不到跳过这些文件的方法。我的命令如下所示：

```
forfiles /P e:logfiles\ /S /M *.log /D -1 /C "cmd /c del /f @fname.log" 
```

有没有办法做到这一点？谢谢！

# nginx - nginx url 重写规则

> ID：13856406
> 
> 赞同：3
> 
> 时间：2012-12-13T09:08:37.970
> 
> 标签：nginx

我有这样的网址

```
http://domain/PROD_SHEP_PDF_Downloader/DownloadPdf?favorId=10100018565295&lang=ru 
```

我想将此部分**PROD_SHEP_PDF_Downloader**重写为此**SHEP_PDF_Downloader**所以结果将是

```
http://domain/SHEP_PDF_Downloader/DownloadPdf?favorId=10100018565295&lang=ru 
```

这条规则不起作用

```
 location /PROD_SHEP_PDF_Downloader/ {
      rewrite ^/PROD_SHEP_PDF_Downloader/(.*)  SHEP_PDF_Downloader/$1 break;
      proxy_pass http://localhost:85;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:32:53.517

[文档](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass)说，如果您只想更改 URI 前缀，可以使用以下命令：

```
location /name/ {
    proxy_pass http://127.0.0.1/remote/;
} 
```

# macos - OS X 不支持 epoll 功能吗？

> ID：13856413
> 
> 赞同：11
> 
> 时间：2012-12-13T09:08:57.137
> 
> 标签：macos, epoll, kqueue

我正在学习使用 epoll 功能。但是我的 OS X，Mountain Lion 没有头文件 sys/epoll.h。

我想在 OS X 上使用 epoll 功能。如何使用 epoll 功能？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-13T10:10:26.757

Mac OS X 不支持 epoll，但确实支持非常相似的[kqueue 。](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man2/kqueue.2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-01T09:55:02.890

在 Mac OSX 上使用 kqueue 而不是 epoll。在你的java代码中做这样的事情。

```
 final boolean isMac = 

  System.getProperty("os.name").toLowerCase(Locale.US).contains("mac");

    // Configure the server.
    // See https://netty.io/wiki/native-transports.html
    EventLoopGroup bossGroup;
    EventLoopGroup workerGroup;

    if (isMac) {
        bossGroup = new io.netty.channel.kqueue.KQueueEventLoopGroup();
        workerGroup = new io.netty.channel.kqueue.KQueueEventLoopGroup(5);
    } else {
        bossGroup =  new io.netty.channel.epoll.EpollEventLoopGroup();
        workerGroup = new io.netty.channel.epoll.EpollEventLoopGroup(5);
    } 
```

确保您在 pom.xml 上添加了 io.netty

# bash - Bash 和变量替换

> ID：13856414
> 
> 赞同：0
> 
> 时间：2012-12-13T09:09:07.550
> 
> 标签：bash

我使用它为特定用户生成 svn 日志：

```
svn log | sed -n '/bob/,/-----$/ p' 
```

效果很好。现在我想为用户使用一个参数/变量：

```
USER="bob"
svn log | sed -n '/$USER/,/-----$/ p' 
```

但它只是给出一个空日志。如何将参数传递给上述命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:07:23.723

这样做的正确方法是使用双引号，以便可以扩展 bash 变量：

```
USER="bob"
svn log | sed -n "/$USER/,/-----$/p" 
```

添加更多单引号以“插入” bash 变量（根据接受的答案）不是最佳实践。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:12:32.803

使用单引号：

```
USER="bob"
svn log | sed -n '/'$USER'/,/-----$/ p' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:24:09.917

尝试：

svn 日志 | sed -n '/"$USER"/,/-----$/ p'

# php - 使用 PHP 登录/批准后从任何页面发布到 Twitter

> ID：13856418
> 
> 赞同：0
> 
> 时间：2012-12-13T09:09:30.000
> 
> 标签：php, twitter, oauth, twitter-oauth

我网站上的用户可以登录 Twitter 并立即在我的网站和 Twitter 上发布他们的状态。我正在使用[https://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)连接到 Twitter。登录和发布是在网站的不同页面上进行的。

这是登录脚本：

```
public function loginTwitter() {
        $twitter = new TwitterOAuth(
                            $this->getContext()->params['social']['twitter']['consumerKey'],
                            $this->getContext()->params['social']['twitter']['consumerSecret']
            );
            $request_token = $twitter->getRequestToken($this->link('//User:connectFromTwitter'));

    // Saving to session (Nette Framework)
            $twitterSession = $this->getContext()->session->getSection('twSes');
            $twitterSession->oauth_request_token = $token = $request_token['oauth_token'];
            $twitterSession->oauth_request_token_secret = $request_token['oauth_token_secret'];

            if ($twitter->http_code == 200) {
                $requestLink = $twitter->getAuthorizeURL($token);
                $this->redirectUrl($requestLink);
            } else {
                echo 'Error';
            }
} 
```

这是回调脚本（**在用户登录后立即发布**）：

```
public function twitterOauth() {
    // $_GET parameter oauth_verifier
        $oauthVerifier = $this->getParam('oauth_verifier');

            // Session section
            $twitterSession = $this->getContext()->session->getSection('twSes');

            $twitter = new TwitterOAuth(
                            $this->getContext()->params['social']['twitter']['consumerKey'],
                            $this->getContext()->params['social']['twitter']['consumerSecret'],
                            $twitterSession->oauth_request_token,
                            $twitterSession->oauth_request_token_secret
            );

            $access_token = $twitter->getAccessToken($oauthVerifier);
            $twitterSession->access_token = $access_token;
            $user_info = $twitter->get('account/verify_credentials');

            // Saving to DB to be able to post without login
            $tm = new TwitterUserManager();
            if (!$tm->isInDatabase($this->getUser()->getId())) {
                $tu = new TwitterUser();
                $tu->setUser($this->loggedUser);
                $tu->setOauthProvider('twitter');
                $tu->setOauthUid("'".$user_info->id."'");
                $tu->setUsername("'".$user_info->screen_name."'");
                $tu->setOauthToken("'".$access_token['oauth_token']."'"); // Saving the access token for further posting
                $tu->setOauthSecret("'".$access_token['oauth_token_secret']."'");
                $tm->persist($tu);
            }

            $twitter->post('statuses/update', array('status' => 'Hello ' . date('d.m.Y H:i:s'))); // <== HERE IT WORKS

            $this->redirect('User:socialConnect'); // Redirect to another page
} 
```

这是发布功能（来自任何页面的用户帖子）：

```
 public function postToTwitter() {
        $twitterSession = $this->getContext()->session->getSection('twitter');

            $twitter = new TwitterOAuth(
                            $this->getContext()->params['social']['twitter']['consumerKey'],
                            $this->getContext()->params['social']['twitter']['consumerSecret'],
                            $twitterSession->access_token['oauth_token'],
                            $twitterSession->access_token['oauth_token_secret']
            );

            return $twitter->post('statuses/update', array('status' => 'Hello' . date('d.m.Y H:i:s')));
} 
```

当我使用发布功能时，我收到此错误：

```
stdClass(2) {
       request => "/1/statuses/update.json" (23)
       error => "Could not authenticate you." (27)
    } 
```

提前感谢您的帮助。

**编辑：解决方案：**

使用它**连接**到 Twitter（将所有信息保存到数据库中）： http: [//framework.zend.com/manual/1.12/en/zend.oauth.introduction.html](http://framework.zend.com/manual/1.12/en/zend.oauth.introduction.html)

使用它从任何页面 **发布：http:** [//framework.zend.com/manual/1.12/en/zend.service.twitter.html](http://framework.zend.com/manual/1.12/en/zend.service.twitter.html)

很好的例子： [http ://www.joeyrivera.com/2010/twitter-api-oauth-authentication-and-zend_oauth-tutorial/](http://www.joeyrivera.com/2010/twitter-api-oauth-authentication-and-zend_oauth-tutorial/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:08:53.010

我一直使用 Zend-Framework-Component： http: [//framework.zend.com/manual/1.12/en/zend.service.twitter.html](http://framework.zend.com/manual/1.12/en/zend.service.twitter.html)

我认为这很简单，我可以确认它有效。您只需阅读本教程（请参阅上面的链接）。

# php - PHP使用正则表达式查找子字符串

> ID：13856419
> 
> 赞同：0
> 
> 时间：2012-12-13T09:09:33.077
> 
> 标签：php, regex, string, parsing

我有一个要在我的项目中使用的网页源代码。我想在此代码中使用图像链接。所以，我想在 PHP 中使用正则表达式来访问这个链接。

而已：

> img src="http://imagelinkhere.com" class="image"

像这样的只有一行。我的逻辑是获取之间的字符串

> ="

和

> "类="图像"

人物。

我怎样才能用 REGEX 做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:19:16.193

[不要`Regex`用于 HTML .. 尝试`DomDocument`](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

```
$html = '<html><img src="http://imagelinkhere.com" class="image" /></html>';

$dom = new DOMDocument();
$dom->loadHTML($html);
$img = $dom->getElementsByTagName("img");

foreach ( $img as $v ) {
    if ($v->getAttribute("class") == "image")
        print($v->getAttribute("src"));
} 
```

输出

```
http://imagelinkhere.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:16:21.390

使用

```
.*="(.*)?" .* 
```

with preg replace 只为您提供第一个正则表达式组 (\1) 中的 url。

如此完整，它看起来像

```
$str='img src="http://imagelinkhere.com" class="image"';
$str=preg_replace('.*="(.*)?" .*','$1',$str);
echo $str; 
```

-->

```
http://imagelinkhere.com 
```

编辑：或者只是按照 Baba 的建议使用 DOM Parser。我会记住，当用它解析 html 时，正则表达式会让你头疼。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T09:16:21.723

```
preg_match("/(http://+.*?")/",$text,$matches);
var_dump($matches); 
```

该链接将在 $matches 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:16:06.557

有几种方法可以做到这一点：

1.你可以使用 [SimpleHTML](http://simplehtmldom.sourceforge.net/) Dom Parser，我更喜欢简单的 HTML

2.你也可以使用preg_match

```
$foo = '<img class="foo bar test" title="test image" src="http://example.com/img/image.jpg" alt="test image" class="image" />';
$array = array();
preg_match( '/src="([^"]*)"/i', $foo, $array ) ; 
```

看到这个[线程](https://stackoverflow.com/questions/2120779/regex-php-isolate-src-attribute-from-img-tag)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T09:27:43.997

我能听到马蹄声，所以我使用 DOM 解析而不是正则表达式。

```
$dom = new DOMDocument();
$dom->loadHTMLFile('path/to/your/file.html');
foreach ($dom->getElementsByTagName('img') as $img)
{
    if ($img->hasAttribute('class') && $img->getAttribute('class') == 'image')
    {
        echo $img->getAttribute('src');
    }
} 
```

这将只回显 img 标签的 src 属性，并带有`class="image"`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-13T09:13:55.110

尝试使用 preg_match_all，如下所示：

```
preg_match_all('/img src="([^"]*)"/', $source, $images); 
```

这应该将图像的所有 URL 放入`$images`变量中。正则表达式所做的是查找`img src`代码中的所有位并匹配引号之间的位。

# jquery - jQuery不互相调用

> ID：13856421
> 
> 赞同：0
> 
> 时间：2012-12-13T09:09:42.120
> 
> 标签：jquery

嗨，我有另一个问题刚刚由 stackoverflow 的成员解决，非常感谢他们的及时回复和专业。下面是我发现 ibox 根本没有调用的 JS 代码。

```
(function($) {
    $.fn.ibox = function() {
        // set zoom ratio //
        alert("asdfas");
        resize = 20;
        ////////////////////
        var img = this;
        img.parent().append("<div id='ibox' />");
        var ibox = $("#ibox");
        var elX = 0;
        var elY = 0;

        img.each(function() {
            var el = $(this);

            el.mouseenter(function() {
                ibox.html("");
                var elH = el.height();
                elX = el.position().left - 6; // 6 = CSS#ibox padding+border
                elY = el.position().top - 6;
                var h = el.height();
                var w = el.width();
                var wh;
                checkwh = (h < w) ? (wh = (w / h * resize) / 2) : (wh = (w * resize / h) / 2);

                $(this).clone().prependTo(ibox);
                ibox.css({
                    top: elY + "px",
                    left: elX + "px"
                });

                ibox.stop().fadeTo(200, 1, function() {
                    $(this).animate({top: "-="+(resize/2), left:"-="+wh},400).children("img").animate({height:"+="+resize},400);
                });
            });

            ibox.mouseleave(function() {
                ibox.html("").hide();
            });
        });
    };
});

$(document).ready(function() {
    $("#clickMe").click(function () { 
    alert("Me");
    }); 

    var html = "";
    var num = 1;

    for (var idx=0; idx<100; idx++)
    {
        if( num == 4) num = 1;
        html += "<img src='image/img" + num + ".jpg' class='grayscale' />";
        num ++;
    }  
    $("#images").html(html);

   $("#images img").ibox();

}); 
```

我在这里错过了任何呼叫步骤吗？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:13:02.287

问题是您没有将`jQuery`对象传递给包含插件的函数

```
(function($) {
     ....
 }); <-- Oops 
```

将其更改为：

```
(function($) {
     ....
 })(jQuery); <-- Yay! 
```

有一篇关于插件创作的好文章，您应该阅读：[http ://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:11:40.597

您已经将您的 jQuery 插件包装在一个*立即调用的函数表达式*中，除了您没有实际调用它。

放在 `(jQuery)`函数表达式之后：

```
(function($) {
    $.fn.ibox = function() {
        ...
    }
})(jQuery); 
```

将其从“void”函数表达式转换为实际调用的函数表达式。

# c# - 更改图像源时图像失败（很多图像）

> ID：13856426
> 
> 赞同：0
> 
> 时间：2012-12-13T09:09:55.590
> 
> 标签：c#, wpf, image

当我尝试使用大量图像更改 Image 容器的 Image.Source 时，我的 WPF 应用程序失败。

我有大约 1440 张图像，您可以使用滑块在它们之间移动。

因此，在 Value_Changed 事件中，正在执行以下代码：

应用程序不会崩溃，但它只是不再显示图像（在 +/- 1000 之后）。当我触发 Image_Failed 事件时，我会收到一条消息。

我的代码：

```
 string imageNo = e.NewValue.ToString();
            string imagePath = "Resources/NetTVImages/nettv" + imageNo + ".png";
            BitmapImage image = new BitmapImage(new Uri(imagePath, UriKind.Relative));
            overlayImage.Source = image; 
```

亲切的问候，尼尔斯

**编辑：**我没有收到系统消息，而只是触发了我的 MessageBox。所以我知道它触发的 Image_Failed 事件。

**EDIT2**实际上，我确实遇到了一个例外：

System.IO.DirectoryNotFoundException：找不到路径“C:\Users\User\CPP\bin\Debug\Resources\Images\447.png”的一部分。

# javascript - 自我更新 javascript（或其他解释）资源的 iOS 应用程序？

> ID：13856427
> 
> 赞同：1
> 
> 时间：2012-12-13T09:09:57.930
> 
> 标签：javascript, ios, appstore-approval

基于我看到的几个问题：

*   [如何从 App Store 实现自动更新 iOS 应用程序？](https://stackoverflow.com/questions/10069602/how-to-implement-auto-updating-ios-apps-from-app-store)
*   [自动升级 iOS 应用](https://stackoverflow.com/questions/4884419/auto-upgrading-ios-apps)
*   [是否有可能拥有一个自我更新的 iPhone 应用程序？](https://stackoverflow.com/questions/3977265/is-it-possible-to-have-a-self-updating-iphone-application)

似乎很明显，应用程序不允许在启动时“自我更新”代码（或通过应用程序内的其他机制），因为新代码是提交到应用程序商店的应用程序的一部分。

但是，有很多应用程序确实会在启动时执行自动更新（例如，[这个流行的游戏](https://itunes.apple.com/ca/app/the-simpsons-tapped-out/id497595276?mt=8)在第一次启动时会下载数百 MB） - 似乎这种类型的东西可以用于资源 - 只要下载是数据/resources - 不会改变编译代码的东西。

从技术上讲，应用程序资源包中包含的 Javascript 可以被视为资源，因此自动更新任何包含的 Javascript 是安全的。另一方面，Javascript 可以被视为“代码”，因为它由 Webkit（在 a 中`UIWebView`）解释并执行。如果这算作代码，人们甚至可以走极端，创建一些解释器，根据自动更新到应用程序的 xml 文件（很容易被视为资源）的内容来运行应用程序中包含的命令。这算作“代码”吗？

**所以，我正在寻找答案的主要问题**：

*   **“资源”和“代码”之间的界限到底在哪里？“代码”是否仅表示“已编译的 Objective-C”？**
*   **是否有任何已知的已接受应用程序执行此类操作的示例？**

此外，由于我确信它会被问到，我想要在本地下载和执行 javascript 而不是一直访问远程站点的主要原因是性能/离线功能。

# javascript - jQuery 自动完成功能是否使用动态数组作为源

> ID：13856429
> 
> 赞同：9
> 
> 时间：2012-12-13T09:10:01.577
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我目前正在尝试使用存储在 javascript 变量中的源创建自动完成，但该变量可以由另一个函数更新。所以，我想要的是每次用户更新自动完成字段时，`source`都会生成自动完成字段。

这是我使用的代码：

```
<head>
    <script>
        var availableTags = ['java', 'javascript']
        // can be called anytime
        var addToTags = function(str){availableTags.push(str)}

        $(function() {
            $( "#tags" ).autocomplete({
                source: availableTags
            });
        });
    </script>
</head>
<body>
    <div class="ui-widget">
        <label for="tags">Tags: </label>
        <input id="tags" />
    </div>
</body> 
```

我需要做一个类似回调的函数吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T09:18:26.507

> 存储在 javascript 变量中的源，但此变量可以由另一个函数更新。

那应该行得通。如果自动完成和更新函数都引用同一个数组，您可以随时推送新值，这些值将在下次评估数组时立即使用（例如，在击键时）。

> 我希望每次用户更新自动完成字段时，都会生成自动完成的源字段。

那是另一回事。是的，这需要一个回调函数来`source`动态生成数组，但这很简单。看看[文档](http://api.jqueryui.com/autocomplete/#option-source)：

```
$( "#tags" ).autocomplete({
    source: function(request, resolve) {
        // fetch new values with request.term
        resolve(availableTags);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T09:18:32.137

`addToTags`只需在您的函数中添加一个重置调用即可自动完成：

```
var addToTags = function(str){
   availableTags.push(str);
   $( "#tags" ).autocomplete({
       source: availableTags
   });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-02T07:13:46.857

这很简单

```
$( "#tags" ).autocomplete('option', 'source', availableTags) 
```

在需要的地方设置 availableTags 数组

# .htaccess - 重定向 301 和循环

> ID：13856435
> 
> 赞同：1
> 
> 时间：2012-12-13T09:10:38.237
> 
> 标签：.htaccess, http-redirect

我刚刚将静态 html 站点移动到基于 joomla 的站点，我需要 htaccess 的小支持：

旧链接是`xxxx.com/en/links.htm`->`xxxx.com/en/links`但我得到循环错误

我的配置：

```
Redirect 301 /en/links.htm http://www.xxxx.com/en/links 
```

它运行良好，当我重定向到 /en 的不同目标文件夹时，但是当我重定向到同一个文件夹时，我得到循环错误。任何人都知道如何解决这个问题？

此致！

# ant - 如何显示组装好的 Ant 类路径

> ID：13856436
> 
> 赞同：0
> 
> 时间：2012-12-13T09:10:47.737
> 
> 标签：ant, classpath

我正在使用 Eclipse 和 Ant 作为构建工具开发一个 Java 项目。当我从命令行运行“ant all”时，我的项目构建没有任何错误，但是在 Eclipse 上我得到了很多编译错误。

所以我想我会将 Ant 的 Classpath 复制到我的 Eclipse 项目的 Build Path 中。

是否有 Ant 任务/命令来显示？像“蚂蚁只是告诉我你组装的类路径”之类的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:07:13.867

如果您使用 -verbose 和 -debug 标志运行 Ant，您将看到 javac 正在做什么的所有血腥细节，包括类路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T07:55:02.957

我将介绍一个打印类路径的任务，并使用 antcall 调用该任务。类路径将作为该任务的参数给出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-27T12:47:28.613

你可以在你的目标中做这样的事情，例如

假设您已将类路径定义为

```
<path id="project.classpath">
    <fileset dir="${SERVER_DEV}/classes">
        <include name="*.zip"/>
        <include name="*.jar"/>
    </fileset>
    <pathelement location="${SERVER_DEV}/3rdParty/jre/NT/1.5.0/lib/jsse.jar"/>
</path> 
```

然后你可以做类似的事情

```
<target name="compile" depends="init" description="Compiles All Java Sources">
    <property name="myclasspath" refid="project.classpath"/>
    <echo message="Classpath = ${myclasspath}"/>
    <javac ...>
         ....
    </javac>
</target> 
```

它将打印出用于运行特定目标的类路径

# apache - 处理“？” 在 mod_rewrite

> ID：13856437
> 
> 赞同：2
> 
> 时间：2012-12-13T09:10:55.430
> 
> 标签：apache, mod-rewrite

我有一个页面要求用户确认他是要继续还是取消，我为此使用了重写规则：

```
RewriteRule ^click/(.+)$ aclick.php?url=$1 [B] 
```

当 URL 带有问号时，就会出现问题。例如：

```
http://example.com/click/yahoo.com/mobile/?s=ladygaga 
```

我的目标是将此 URL 重写为：

```
http://example.com/aclick.php?url=yahoo.com/mobile/%3fs=ladygaga 
```

这样继续按钮将转到：'http://yahoo.com/mobile/?s=ladygaga'

但是，继续按钮只是链接到“http://yahoo.com/mobile/”。

有没有人有解决这个问题的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:13:58.837

`%{QUERY_STRING}`如下使用。您必须参考`REDIRECT_QUERY_STRING`而不是`QUERY_STRING`.

```
RewriteRule ^click/(.+) aclick.php?url=$1?%{QUERY_STRING} [B,L] 
```

`B`flag 将过度转义字符串。如果访问`http://example.com/click/yahoo.com/mobile/?s=ladygaga`，查询字符串将是`url=yahoo%2ecom%2fmobile%2f?s=ladygaga`. （不会造成不良影响。）

如果该 URL 没有查询字符串，则多余的“？” 被添加到查询字符串的末尾。为防止这种情况，请使用`RewriteCond`：

```
# If URL have any query string, then
RewriteCond %{QUERY_STRING} .
RewriteRule ^click/(.+) aclick.php?url=$1?%{QUERY_STRING} [B,L]
# otherwise,
RewriteRule ^click/(.+) aclick.php?url=$1 
```

* * *

你可以简单地写成如下：

```
RewriteRule ^click/(.+) aclick.php 
```

程序aclick.php可以引用环境变量`REQUEST_URI`等`REDIRECT_URL`。`QUERY_STRING`

# reportbuilder3.0 - Table/Graph Report Builder 3.0 图表不想留在原位

> ID：13856446
> 
> 赞同：3
> 
> 时间：2012-12-13T09:11:19.597
> 
> 标签：reportbuilder3.0

我有以下问题。我想在左侧建立一个带有两个条形图的报告。图表应该在彼此之上。在页面的另一侧，我想要两个并排的薄桌子。

现在我的问题是第二张图不会直接位于第一张图下方。如果我保存了它，它总是会向下移动到表格末尾的位置。

如何让图表保持在我放置在报告生成器中的位置。

如果有人有答案会很好吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:13:41.383

将图形放在一个矩形内。

那应该可以解决问题。

查看[报表设计技巧（报表生成器和 SSRS）](http://msdn.microsoft.com/en-us/library/ff714051.aspx)

更具体地说，关于**设计报告**和**控制报告页面上报告项目的呈现部分**

# java - msgpack：C++ 和 java 之间的消息传递

> ID：13856450
> 
> 赞同：4
> 
> 时间：2012-12-13T09:11:28.783
> 
> 标签：java, c++, msgpack

我有两个应用程序（一个用 C++ 编写，另一个用 Java 编写）。我用来`msgpack`将 C++ 类打包成二进制格式。然后我将它发送到 Java 端。我想知道我是否在 java 中解压缩此消息（`msgpack`也使用）我得到正确的 Java 类对象吗？

考虑以下示例：

```
// C++
class Foo
{
public:
    // some methods here...
    void Pack(uint8_t *data, size_t size);
private:
    std::string m1_;
    std::string m2_;
    int m3_;
public:
    MSGPACK_DEFINE(m1_, m2_, m3_);
}

void Foo::Pack(uint8_t *data, size_t size)
{
    msgpack::sbuffer sbuf;
    msgpack::pack(sbuf, *this);

    data = sbuf.data();
    size = sbuf.size();
} 
```

和Java方面：

```
// Java

public class Foo
{

    public void Unpack(byte[] raw, Foo obj)
    {
        MessagePack msgpack = new MessagePack();
        try
        {
            obj = msgpack.read(raw, Foo.class);
            // Does obj's m1_, m2_ and m3_ contains proper values from C++ class Foo?
        }
        catch(IOException ex)
        {
            // ...
        }
    }

    // ...

    private String m1_;
    private String m2_;
    private int m3_;
} 
```

我不想把 Foo 的成员一个一个打包，因为我有很多。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-18T14:26:52.490

正如 msgpack 网站上所说

> MessagePack 是一种高效的二进制序列化格式。它允许您在 JSON 等多种语言之间交换数据。

所以答案是“是的，你的 java 对象应该被正确反序列化”

# iphone - 关闭 UIDatePicker

> ID：13856455
> 
> 赞同：3
> 
> 时间：2012-12-13T09:11:45.697
> 
> 标签：iphone, objective-c, uidatepicker

我添加一个`UIDatePicker`作为输入视图`UITextField`

```
UIDatePicker    *oBirth;
NSDateFormatter *dateFormat;

_editingField = [[UITextField alloc] initWithFrame : CGRectMake(80, 12, 215, 25)];    
dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat : @"dd/MM/yyyy"];

oBirth = [[UIDatePicker alloc] initWithFrame : CGRectMake(0, 0, 120, 45)];
oBirth.date = [dateFormat dateFromString : sField];
NSLog(@"%@", oBirth.subviews);
[oBirth addTarget : self
           action : @selector(updateDate:)
 forControlEvents : UIControlEventValueChanged];
[oBirth addTarget : self
           action : @selector(dismissDate:)
 forControlEvents : UIControlEventTouchUpOutside];
[oBirth setDatePickerMode : UIDatePickerModeDate];
_editingField.tag = 1;
_editingField.inputView = oBirth; 
```

如何在`UIDatePicker`不创建不可见视图的情况下解雇？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:21:44.113

试试这个

```
[_editingField resignFirstResponder]; 
```

**编辑**

因为`dismissDate`没有被调用。
删除这段代码

```
[oBirth addTarget : self
           action : @selector(dismissDate:)
 forControlEvents : UIControlEventTouchUpOutside]; 
```

并添加这个

```
 // single tap gesture recognizer
        UITapGestureRecognizer *tapGestureRecognize = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissDate:)];
        tapGestureRecognize.numberOfTapsRequired = 1;
        [self.view addGestureRecognizer:tapGestureRecognize]; 
```

您的回电

```
- (void)dismissDate:(UIGestureRecognizer *)gestureRecognizer {
    NSLog(@"Resign your responder");
} 
```

# ember.js - 无法从 init() 方法中的 childView 访问 ContainerView

> ID：13856458
> 
> 赞同：0
> 
> 时间：2012-12-13T09:11:55.850
> 
> 标签：ember.js

我有不同`childViews`的一个`ContainerView`。是否可以`ContainerView`从方法`childView`中访问。`init()`我尝试过使用`this.get('parentView')`which 在`init()`方法中不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:35:27.483

它应该`this._parentView`在`init`子视图中可用。

例如：http: [//jsfiddle.net/6p6XJ/192/](http://jsfiddle.net/6p6XJ/192/)

# c++ - Kerberos 密码更改协议

> ID：13856460
> 
> 赞同：0
> 
> 时间：2012-12-13T09:11:59.713
> 
> 标签：c++, .net, active-directory, kerberos

[我正在尝试使用RFC 3244](https://www.rfc-editor.org/rfc/rfc3244)中的 Kerberos 密码协议，从 C++/CLI 库（将由另一个服务调用）对 ActiveDirectory 中的用户执行一些密码操作。

我使用 LogonUser 模拟了 C# 中的序列（这是我的首选语言）来模拟管理员，然后使用 DirectoryServices.AccountManagement 命名空间在用户条目上调用[SetPassword 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746344%28v=vs.85%29.aspx)SetPassword 使用三种方法来尝试更改 LDAPS、Kerberos 和 RPC。如果我查看 Wireshark 跟踪，我可以看到模拟管理员时的 Kerberos 握手，然后是 LDAP 尝试（由于缺少 SSL 而失败），然后是 kerberos 密码交换。

尝试复制这是 C++ LogonUser 不会启动 Kerberos 交换，因此当调用 SetPassword 时，该方法会通过 RPC（成功但不满足我们使用 Kerberos 的要求）。

有没有办法强制使用 Kerberos？

有没有更好的解决方案来与.net 中的 Kerberos 密码协议进行交互，而不是依赖于 SetPassword？

最小代码示例：

C＃

```
SafeTokenHandle handle;
LogonUser("serviceAccount", "Test", "aPassw0rd", 2, 0, out handle);
WindowsIdentity.Impersonate(handle.DangerousGetHandle());
DirectoryEntry usr = new DirectoryEntry();
usr.Path = "LDAP://"+"dctest.test.com/"+"CN=testuser,CN=Users,DC=test,DC=com";
usr.AuthenticationType = AuthenticationTypes.Sealing | AuthenticationTypes.Secure;
object ret = usr.Invoke("SetPassword", "aPassw0rd");

usr.CommitChanges();
usr.Close();
Console.WriteLine("Completed"); 
```

这种方法成功地模拟了服务帐户，然后使用 KPASSWD over 464 执行 setpassword。

C++/CLI

```
HANDLE _handle;
LogonUser(L"serviceAccount",L"Test",L"aPassw0rd",LOGON32_LOGON_INTERACTIVE,LOGON32_PROVIDER_DEFAULT,&_handle)
ImpersonateLoggedOnUser(_handle);
DirectoryEntry^ usr = gcnew DirectoryEntry();
usr->Path = "LDAP://"+"dctest.test.com/"+"CN=testuser,CN=Users,DC=test,DC=com";
usr->AuthenticationType = AuthenticationTypes::Sealing | AuthenticationTypes::Secure;
Object^ ret = usr->Invoke("SetPassword", "aPassw0rd");

usr->CommitChanges();
usr->Close();
Console::WriteLine("Completed"); 
```

这种方法模拟管理员帐户，然后在调用设置密码时进行 kerberos 交换（超过 88，所以我猜这是 auth），但随后回退到使用 RPC。

如果我获取 C# 代码并从 C++/CLI 包装器中调用它，则行为会更改为代码在 C++ 中时显示的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:55:19.030

前几天终于设法通过反射器运行输出来追踪这一点。C++/CLI 类的项目属性包括将字符集设置为 unicode。使用此设置，输出使用 LogonUserW 方法。但是，如果此设置更改为“未设置”，则会使用 LogonUser 方法，并且 setPassword 的 Kerberos 身份验证路径将正常运行。

# android - 不幸的是，android应用程序已停止

> ID：13856461
> 
> 赞同：1
> 
> 时间：2012-12-13T09:12:10.343
> 
> 标签：android

我正在做一个简单的程序来添加从 EditText 输入的两个数字。但是，当用户单击“单击以添加”按钮将字段留空时，程序退出时说“不幸的是，程序已停止”。

这是代码：

```
public class MainActivity extends Activity {

long a, b, sum;
Button add, clr;
EditText e1, e2, res;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    add = (Button) findViewById(R.id.bAdd);
    add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) throws NumberFormatException {
            // TODO Auto-generated method stub

                e1 = (EditText) findViewById(R.id.tv1);         
                String str1 = e1.getText().toString();

                e2 = (EditText) findViewById(R.id.tv2);
                String str2 = e2.getText().toString();

                try{
                    a = Integer.parseInt(str1);
                    b = Integer.parseInt(str2);
                }catch(NumberFormatException e){
                    res.setText("Please enter valid entries");
                }

                sum = a + b;    

                res = (EditText) findViewById(R.id.result);
                res.setText("Your sum is " + sum);
        }
    });

    clr = (Button) findViewById(R.id.bClr);
    clr.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) throws NumberFormatException {
            // TODO Auto-generated method stub
            e1.setText("");
            e2.setText("");
            res.setText("");
        }
    });
}

} 
```

我希望应用程序为空白 EditText 条目响应“请输入有效条目”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:14:51.427

因为您从编辑文本中获得了空文本..所以首先检查空

```
@Override
    public void onClick(View v) throws NumberFormatException {
        // TODO Auto-generated method stub

            e1 = (EditText) findViewById(R.id.tv1); 
            e2 = (EditText) findViewById(R.id.tv2);

            if( e1.getText() != null && e2.getText() != null) { 

            String str1 = e1.getText().toString();

            String str2 = e2.getText().toString();

            try{
                a = Integer.parseInt(str1);
                b = Integer.parseInt(str2);
            }catch(NumberFormatException e){
                res.setText("Please enter valid entries");
            }

            sum = a + b;    

            res = (EditText) findViewById(R.id.result);
            res.setText("Your sum is " + sum);
           }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:18:17.010

您的线路：

```
res = (EditText) findViewById(R.id.result); 
```

必须移动，以便在使用之前初始化 res 变量`res.setText`。它没有在您的 catch 语句中初始化。将其移动到如下所示的位置。您可以在执行其他操作时对其进行初始化`findViewById`

```
e1 = (EditText) findViewById(R.id.tv1); 
e2 = (EditText) findViewById(R.id.tv2);
res = (EditText) findViewById(R.id.result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:15:17.363

是的。

添加这些行。

```
if (e1.getText().toString() == null || e2.getText().toString() == null)
{
       //Show dialog
}
else
{
    String str1 = e1.getText().toString();
    String str2 = e2.getText().toString();
    try{
                        a = Integer.parseInt(str1);
                        b = Integer.parseInt(str2);
                    }catch(NumberFormatException e){
                        res.setText("Please enter valid entries");
                    }

                    sum = a + b;    

                    res = (EditText) findViewById(R.id.result);
                    res.setText("Your sum is " + sum);
    }
} 
```

以及有关警报对话框的任何帮助的[教程](http://www.androidhive.info/2011/09/how-to-show-alert-dialog-in-android/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:19:12.847

您可以在 try catch 块中捕获任何异常，而不是捕获 NumberFormatException 。请发布您收到的 Log Cat 错误。

# c# - INotifyPropertyChanged 与 Model 和 ViewModel

> ID：13856463
> 
> 赞同：1
> 
> 时间：2012-12-13T09:12:19.730
> 
> 标签：c#, linq, xaml, mvvm

我的 ViewModel 有一个模型集合。在这方面我有几个问题。

1 - 如果我只`INotifyPropertyChanged`在ViewModel中实现接口，当在视图中修改模型的属性时，如何通知模型？我应该在模型和视图模型中实现接口吗？

2 - 如果我想在 ViewModel 中使用 LINQ，我必须创建模型的集合`List<T>`，不能`ObservableCollection`，是吗？

3 - 我应该在哪里操作数据库？在 ViewModel 或其他地方？比如我在视图中添加了一个实例，我想把它添加到数据库中，我应该在哪里执行LINQ命令插入呢？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:42:06.193

1.  您在视图中修改的模型实例将由于 DataBinding 自动更新。（希望我正确理解您的要求）

2.  Linq 可以在实现 IEnumerable、IQueryable 的类型的实例上执行。您可以在 ObservableCollection 上使用 Linq

3.  您应该有一个处理 CRUD 操作的业务层，并根据需要从 ViewModel 调用它。

# jakarta-ee - Weblogic/Glassfish 是否保证应用部署的顺序？

> ID：13856464
> 
> 赞同：2
> 
> 时间：2012-12-13T09:12:22.653
> 
> 标签：jakarta-ee, glassfish, weblogic, java-ee-6, java-ee-5

Java EE 5 不保证任何应用程序部署顺序。
此功能是在 Java EE 6 中引入的。
我们使用 Oracle WebLogic 10.3.2，它与 Java EE 5 兼容。
我们还使用 GlassFish 3。

我们有几个战争文件的耳朵。
正如我所看到的，WebLogic 和 GlassFish 都按照它们在`application.xml`.

这就是 WebLogic/GlassFish 部署应用程序的方式吗？
或者顺序可能会不时不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:55:59.437

我不知道它是如何在内部实现的，至少从我的经验来看，WebLogic 总是按照它们在 application.xml 中指定的顺序在耳朵内启动模块。

在我们的项目中，一些模块之间存在依赖关系，因此我们在 application.xml 中调整它们的顺序，以确保首先加载被依赖的模块。

# java - 读取 Excel 文档时出现问题（Java 代码）

> ID：13856466
> 
> 赞同：0
> 
> 时间：2012-12-13T09:12:35.313
> 
> 标签：java, exception, apache-poi

我有一些读取 Excel 数据的 Java 代码。在运行 Java 代码时，它显示以下错误。帮我解决同样的问题。另外，我需要知道其他读取*.xlsx*文件的方法。

（一个小的编辑）我如何打印带有各自列的行。例如：

```
Age
19
20
21

Salary
35k
20k
40k
.
.
. 
```

> 线程“主”org.apache.poi.poifs.filesystem.OfficeXmlFileException 中的异常：提供的数据似乎在 Office 2007+ XML 中。您正在调用处理 OLE2 Office 文档的 POI 部分。您需要在 org.apache.poi.poifs.storage.HeaderBlock.(HeaderBlock.java:131) at org.apache.poi.poifs.storage 调用 POI 的不同部分来处理此数据（例如 XSSF 而不是 HSSF） .HeaderBlock.(HeaderBlock.java:104) 在 org.apache.poi.poifs.filesystem.POIFSFileSystem.(POIFSFileSystem.java:138) 在 org.apache.poi.hssf.usermodel.HSSFWorkbook.(HSSFWorkbook.java:322)在 org.apache.poi.hssf.usermodel.HSSFWorkbook.(HSSFWorkbook.java:303) 在 ExcelRead.main(ExcelRead.java:18)

Java代码如下：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Iterator;

import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;

public class ExcelRead {
    public static void main(String[] args) {

    try {
        FileInputStream file = new FileInputStream(new File("C:/Users/vinayakp/Desktop/Book.xlsx"));
        HSSFWorkbook workbook = new HSSFWorkbook(file);
        HSSFSheet sheet = workbook.getSheetAt(0);
        Iterator<Row> rowIterator = sheet.iterator();
        while(rowIterator.hasNext()) {
            Row row = rowIterator.next();
            Iterator<Cell> cellIterator = row.cellIterator();
            while(cellIterator.hasNext()) {
                Cell cell = cellIterator.next();
                switch(cell.getCellType()) {
                    case Cell.CELL_TYPE_BOOLEAN:
                        System.out.print(cell.getBooleanCellValue() + "\t\t");
                        break;
                    case Cell.CELL_TYPE_NUMERIC:
                        System.out.print(cell.getNumericCellValue() + "\t\t");
                        break;
                    case Cell.CELL_TYPE_STRING:
                        System.out.print(cell.getStringCellValue() + "\t\t");
                        break;
                }
            }
            System.out.println("");
        }
        file.close();    
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException ae) {
        ae.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:21:23.410

删除以前的导入类后，然后尝试添加

```
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;

 private static void read(String path){
  Workbook workbook = null;
  FileInputStream fis = null;           
    try {
        File source = new File(path);
        if(source.exists()){
         fis = new FileInputStream(source);
         workbook = WorkbookFactory.create(source);

        }else{
                JOptionPane.showMessageDialog(null, "File path is not exist.", "Error", JOptionPane.ERROR_MESSAGE);
        }       

        Sheet sheet = null;           
        int lastRowNum = 0;
        int numSheets = workbook.getNumberOfSheets();         
        for(int i = 0; i < numSheets; i++) {              
            sheet = workbook.getSheetAt(i);
            if(sheet.getPhysicalNumberOfRows() > 0) {                    
                lastRowNum = sheet.getLastRowNum();                  
                int lastCellNum = 0;               
                for(Row row : sheet) {                  
                    Employee emp = new Employee();         

                    int numOfCell = row.getPhysicalNumberOfCells(); 
                    System.out.println("numOfCell:: "+numOfCell);
                    String stringValues [] = new String[numOfCell];
                    for(Cell cell : row) {
                       // cell = row.getCell(cellIndex);                        
                        int cellIndex = cell.getColumnIndex();                      
                        logger.info("cellIndex:: "+ cellIndex);
                         switch (cell.getCellType()) {

                         case Cell.CELL_TYPE_FORMULA:
                            // printValue = "FORMULA value=" + cell.getCellFormula();
                             stringValues[cellIndex] = cell.getCellFormula();
                             break;

                         case Cell.CELL_TYPE_NUMERIC:
                             //printValue = "NUMERIC value=" + cell.getNumericCellValue();
                             System.out.println("Value is numeric:: "+ cell.getNumericCellValue());
                             stringValues[cellIndex]  = String.valueOf(cell.getNumericCellValue());
                             break;

                         case Cell.CELL_TYPE_STRING:
                            // printValue = "STRING value=" + cell.getStringCellValue();
                             stringValues[cellIndex]  = cell.getStringCellValue();
                             break;

                         case Cell.CELL_TYPE_BLANK:
                            // printValue = "STRING value=" + cell.getStringCellValue();
                             stringValues[cellIndex]  = cell.getStringCellValue();
                             break;   

                         default:
                         } 

                     }           

                    } 

                } 
            }            
        }     

        } catch (InvalidFormatException e) {
            logger.error(e.getMessage());
            e.printStackTrace();
        } catch (FileNotFoundException e) {          
            e.printStackTrace();
            logger.error(e.getMessage());
        } catch (IOException e) {
            logger.error(e.getMessage());
            e.printStackTrace();
        }   
        catch (Exception e) {
            logger.error(e.getMessage());
            e.printStackTrace();
        }   
        finally {
            if (fis != null) {
                try {
                    fis.close();
                    fis = null;
                    } catch (IOException ioEx) {
                        logger.error(ioEx.getMessage());
                } 
            }
        }    
     } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T11:54:52.370

如果要读取`.xls`必须使用的文件`HSSF`（它仅支持`.xls`格式），但对于`.xlsx`必须使用的文件`XSSF`或其他更高版本的 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T09:15:17.683

您使用错误的类来读取文件`HSSFWorkbook`是旧的 excel 格式。`XSSFWorkbook`改为使用

**编辑：从**[http://www.coderanch.com/t/463779/java/java/read-xlsx-sheet-Client-Side](http://www.coderanch.com/t/463779/java/java/read-xlsx-sheet-Client-Side) 复制。你做了同样的事情吗？

```
try { 
System.out.println("destDir==> "+destDir); 
XSSFWorkbook workBook = new XSSFWorkbook(destDir); 
XSSFSheet sheet = workBook.getSheetAt(0); 
totalRows = sheet.getPhysicalNumberOfRows(); 
System.out.println("total no of rows >>>>"+totalRows); 

} catch (IOException e) { 
e.printStackTrace(); 
} 
```

**编辑 2：从此**[链接](https://stackoverflow.com/q/10005678/648157) 了解 apache POI

# html - 验证单选按钮

> ID：13856467
> 
> 赞同：0
> 
> 时间：2012-12-13T09:12:40.970
> 
> 标签：html, validation, button, radio

我想制作一个简单的验证表单，它会在取消选中时显示警告消息`<div>`。

这是什么，我到现在为止。

```
<form action="result.php" method="post">
<b>1st question:</b><br />
Option 1 <input type="radio" name="question1" value="Option1" /><br />
Option 2 <input type="radio" name="question1" value="Option2" /><br />
Option 3 <input type="radio" name="question1" value="Option3" /><br />
Option 4 <input type="radio" name="question1" value="Option4" /><br />
<br />
<b>2nd question:</b><br />
Option 1 <input type="radio" name="question2" value="Option1" /><br />
Option 2 <input type="radio" name="question2" value="Option2" /><br />
Option 3 <input type="radio" name="question2" value="Option3" /><br />
Option 4 <input type="radio" name="question2" value="Option4" /><br />
<br />
<input type="submit" value="submit" />
</form>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:16:30.630

你可以通过 jQuery 来做到这一点。[`length`](http://api.jquery.com/length/)它计算的属性 jQuery 对象中的元素数量

```
$("#forms").submit(function(){ //or you can use click event 
   if ($("input[name='question1']:checked").length > 0){
  $('.show_message').html(' ');
  $('.show_message').html('selected  ');
}
else{
   $('.show_message').html(' ');
   $('.show_message').html(' no  one selected ');
   return false;
}

}); 
```

和

```
<div class="show_message"></div>
<form id="form" action="result.php" method="post">
 . . . .
</form> 
```

[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/Bxmpr/)

# java - 我如何在将项目添加到组合框时停止触发摇摆 JCombo Box 项目侦听器。

> ID：13856471
> 
> 赞同：1
> 
> 时间：2012-12-13T09:12:57.007
> 
> 标签：java, swing, jcombobox, itemlistener

我想要一个包含发票列表的 JCombox。如果我选择发票，它将填写表格。通过选择“买方”组合框加载发票。 **发票**组合框有**itemStateChanged**事件。问题是当我选择买家时，表格填写第一张发票（发票组合框中的第一项）。所以我在发票组合框中将**选定的索引设置为 -1 。**我得到了同样的结果。

Order 的 toString 方法返回发票编号。

* * *

```
for (Order O : orderList) {
    jcbInvoiceNos.addItem(O);
} 
```

* * *

```
jcbInvoiceNos.setSelectedIndex(-1); 
```

* * *

```
 private void addInvoiceNoItemChangeListener() {
        jcbInvoiceNos.addItemListener(new ItemListener() {

            @Override
            public void itemStateChanged(ItemEvent e) {
                if (e.getStateChange() == ItemEvent.SELECTED) {
                    loadInvoiceDetails();
                }
            }
        });
    } 
```

* * *

```
public void loadInvoiceDetails() {
    System.out.println("Selected index " + jcbInvoiceNos.getSelectedIndex());
} 
```

这总是打印**Selected index 0**这应该是**Selected index -1**我第一次选择买家时。我想通过选择发票来填写。不是买方。

**请给我一个解决方案。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:28:32.090

原因是 DefaultComboBoxModel 的实现：将第一项添加到空模型中时，它会自动选择该第一项。轻微的不一致是它只在使用时才这样做`addElement(Object)`所以`insertElement(Object, size)`干净（轻微咳嗽，模依赖于未记录的实现细节;-)是使用后者：

```
// loading the invoice ids
combo.removeAllItems();
for (int i = 0; i < 20; i++) {
    combo.insertItemAt("combo: " + count + " item: " + i, i);
} 
```

另一方面，最初显示“信息性”选定项目（如 fi“未选择发票”）可能对用户更友好。如果您填充*模型*（而不是组合，它不接受未包含在列表中的选定项目），则可以这样做，例如：

```
// the informational item
Object noInvoice = "no invoice selected";

// loading the invoice ids
model.removeAllElements();
model.setSelectedItem(noInvoice);
for (int i = 0; i < 20; i++) {
    model.addElement("model: " + count + " item: " + i);
}

// the itemListener ignoring the informational item
if (ItemEvent.SELECTED == e.getStateChange()) {
    if (noInvoice.equals(e.getItem())) return; 
    doLoadDetails(e.getItem());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:41:57.653

在组合中添加项目时，我会阻止侦听器调用。

有两种方法可以做到这一点。

1.  在添加之前删除侦听器并在之后读取

2.  添加一个标志 isAPI。在添加之前设置它并在之后重置。在侦听器中只需检查标志，如果为真则返回。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-13T15:42:36.827

尝试以下

```
private void addInvoiceNoItemChangeListener() {
    jcbInvoiceNos.addItemListener(new ItemListener(){
        @Override
        public void itemStateChanged(ItemEvent e){
            if(e.getText() != null && 0 < e.getText()){
                if(e.getStateChange() == ItemEvent.SELECTED){
                    loadInvoiceDetails();
                }
            }
        }
    });
} 
```

之所以有效，是因为它会阻止空事件文本和/或长度为零的文本字符串，如果您知道最小字符串大于 2，将 0 增加到 1 或更好的 2 可能是明智的！

# java - 向进程发送 Ctrl+C

> ID：13856474
> 
> 赞同：3
> 
> 时间：2012-12-13T09:13:08.137
> 
> 标签：java, process

我有一个[Process](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html)对象，我需要在给定的时间点终止它。我尝试了 Process.destroy()，但这并没有有效地让进程释放它正在使用的端口，因此我无法使用它。我需要做的就是向“进程”发送一个“Ctrl + C”，它已经写了一个关闭钩子，它负责释放任何资源。

我怎样才能做到这一点。

我正在使用 Windows

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:34:03.733

依靠关闭挂钩进行常规操作是一种错误的方法。您必须将应用程序设计为提供自己的协议，通过该协议它可以接收关闭信号。这是编写可靠的多平台应用程序的唯一方法，其中“多平台”也意味着同一平台的不同版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:34:51.237

您可以使用 taskkill 发送命令，如[本文所述](http://www.tech-recipes.com/rx/446/xp_kill_windows_process_command_line_taskkill/)。

# asp.net-mvc - 在模型 mvc3 中渲染列表的一部分

> ID：13856477
> 
> 赞同：1
> 
> 时间：2012-12-13T09:13:16.267
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model, lazy-loading, render

我有列出问题（模型中大约有 1000 个问题）。我想在用户向下滚动后首先呈现 100 个问题，然后再呈现 100 个下一个问题。

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:16:53.460

您正在寻找一个无限滚动的实现，其中有很多

我可能会先看看[Rob Conery 关于滚动的博客](http://wekeroad.com/2009/11/27/paging-records-sucks--use-jquery-to-scroll-just-in-time)，他称之为无底滚动。它使用 jquery 并且基本上在您滚动时根据高度计算触发 ajax 请求。

但是还有更多的例子[Infinitescroll](http://infinitescroll.codeplex.com/) , [Infinite scroll with mvc4](http://www.gavindraper.co.uk/2012/05/10/infinite-scroll-with-asp-net-mvc-4/) , [Infinite scroll with mvc](http://tpeczek.blogspot.ie/2012/04/infinite-scroll-in-aspnet-mvc.html) ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:33:22.490

你必须通过 javascript 编写一些 ajax 调用来显示新行，然后使用这个 javascript 代码：

```
$(window).scroll(function () {
    if (document.documentElement.clientHeight + $(document).scrollTop() >= document.body.offsetHeight) {
        getCities(10);
    }
}); 
```

在这里你有一个示例方法：

```
function getCities(count) {
     $.getJSON("@Url.Action("GetCities")", { term: $("#search").val(), start: $("#cities tbody tr").length, count: count }, function (data, status, req) {
        if (data.count != 0) {
            $.each(data.cities, function() { 
                $("#cities tbody").append("<tr data-id='" + cityid + "' data-state='" + stateid + "'><td>" + name + "</td><td>" + state + "</td></tr>");
            });
        }
    });
} 
```

# android - 带有 APP_STL 的 std::map 链接器错误 ndk r8c := gnustl_static

> ID：13856480
> 
> 赞同：4
> 
> 时间：2012-12-13T09:13:21.377
> 
> 标签：android, c++, stl, linker, android-ndk

我在本机应用程序中链接 STL 时遇到一些问题。map::operator[] 和 map::insert 的链接都失败，而其他 map 函数则成功。我的 Application.mk 是：

```
APP_STL := gnustl_static
APP_CPPFLAGS := -fexceptions -frtti
APP_CPPFLAGS += -g3
APP_CPPFLAGS += -DDEBUG
APP_ABI := armeabi-v7a
APP_PLATFORM:=android-14
NDK_TOOLCHAIN_VERSION:=4.6 
```

本机代码包含两个文件夹级别。我为每个内部文件夹创建了一个 Android.mk 文件来编译和生成一个静态库。我在最深的文件夹中使用 std::map 。Android.mk 看起来像：

```
TEMP_PATH_REG := $(call my-dir)
LOCAL_PATH := $(TEMP_PATH_REG)
include $(call all-subdir-makefiles)
LOCAL_PATH := $(TEMP_PATH_REG)
include $(CLEAR_VARS)

LOCAL_MODULE            := registration
LOCAL_C_INCLUDES     := $(LOCAL_PATH)/../glm/
LOCAL_SRC_FILES        := registration_factory.cpp \
                                          inertial.cpp                                       
LOCAL_LDLIBS               := -llog -landroid -lEGL
LOCAL_STATIC_LIBRARIES     := android_native_app_glue
include $(BUILD_STATIC_LIBRARY)
$(call import-module,android/native_app_glue) 
```

当我构建项目时，我收到以下错误：

```
~/.android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi-v7a/libregistration.a(registration_factory.o): in function std::_Rb_tree<int, std::pair<int const, xmar::IRegistration*>, std::_Select1st<std::pair<int const, xmar::IRegistration*> >, std::less<int>, std::allocator<std::pair<int const, xmar::IRegistration*> > >::_M_insert_(std::_Rb_tree_node_base const*, std::_Rb_tree_node_base const*, std::pair<int const, xmar::IRegistration*> const&):~/.android-ndk-r8c/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_tree.h:1013: error: undefined reference to 'std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::_Rb_tree_node_base&)'
StaticLibrary  : libandroid_native_app_glue.a
rm -f obj/local/armeabi-v7a/libandroid_native_app_glue.a
~/.android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi-v7a/libregistration.a(registration_factory.o): in function std::_Rb_tree_const_iterator<std::pair<int const, xmar::IRegistration*> >::operator--():~/.android-ndk-r8c/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_tree.h:284: error: undefined reference to 'std::_Rb_tree_decrement(std::_Rb_tree_node_base const*)'
~/.android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-ar crs ./obj/local/armeabi-v7a/libandroid_native_app_glue.a ./obj/local/armeabi-v7a/objs-debug/android_native_app_glue/android_native_app_glue.o
~/.android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi-v7a/libregistration.a(registration_factory.o): in function std::_Rb_tree_const_iterator<std::pair<int const, xmar::IRegistration*> >::operator++():~/.android-ndk-r8c/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_tree.h:269: error: undefined reference to 'std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'
Prebuilt       : libgnustl_static.a <= <NDK>/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/
~/.android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi-v7a/libregistration.a(registration_factory.o): in function std::_Rb_tree_iterator<std::pair<int const, xmar::IRegistration*> >::operator--():~/.android-ndk-r8c/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_tree.h:203: error: undefined reference to 'std::_Rb_tree_decrement(std::_Rb_tree_node_base*)' 
```

我做错了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:54:00.900

我找到了编译项目的解决方法。

```
LOCAL_LDLIBS += ~/.android-ndk-r8c/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/libsupc++.a
LOCAL_LDLIBS += ~/.android-ndk-r8c/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/libgnustl_static.a 
```

# javascript - 如何在移动设备的 Internet 浏览器上显示另存为

> ID：13856484
> 
> 赞同：0
> 
> 时间：2012-12-13T09:13:31.860
> 
> 标签：javascript, android, html, mobile

我正在编写一个绝对用于移动设备的页面（html、javascript）。此页面将提供浏览器无法识别的一些文件（类型：pdf、doc、docx 和许多其他文件）。如何强制浏览器提供保存文件的选项并使用适当的已安装应用程序打开它？我尝试了 _blank 但什么也没有，它打开了页面并且......出现了原始数据（甚至没有新标签开始）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:19:36.377

听起来您需要确保 Web 服务器为您的内容提供正确的 mime 类型。对于不常见或强制下载的类型，它可以作为`application/octet-stream`.

# bash - 在bash中为单个参数捕获多个值

> ID：13856485
> 
> 赞同：0
> 
> 时间：2012-12-13T09:13:33.077
> 
> 标签：bash

我有一个这样的 bash 脚本：

```
usage="setup.sh [-localsource path to dir] [-help]";

 for i in $@
    do
        if [ "$localSourceOpt" = 1 ]
        then
            localSource=$i
            localSourceOpt=0;
        fi
        if [ "$i" = "-localsource" ]
        then
            localSourceOpt=1;
        fi
        if [ "$i" = "-help" ]
        then
            echo "$usage";
            exit;
        fi
    done 
```

这需要论据，例如

```
setup.sh -localsource PATH 
```

我需要添加另一个可能具有多个参数值的参数，例如

```
 setup.sh -localsource PATH  -locbranches one two three 
```

我应该怎么做才能捕获为参数“-locbranches”传递的值

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:20:30.943

我注意到您必须编写大量逻辑来处理最简单的命令行参数机制，我可能会建议使用`bash` [getopts 功能](http://wiki.bash-hackers.org/howto/getopts_tutorial)。

这使得单参数选项变得微不足道。对于多个参数，它不能很好地工作，你必须引用 args eg `-option "1 2 3"`。但是，它*确实*在以下场景中处理多个参数。

```
setup.sh -localsource PATH one two three 
```

即`one two three`未链接到任何命令行选项。另一种方法是为每个参数指定选项，例如

```
setup.sh -localsource PATH -locbranch one -locbranch two -locbranch three 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:29:43.873

您可以使用 4 种情况（-localsource、-locbranches、-help 和 default）进行切换，并且在每种情况下您都应该进入一个状态，

```
for i in $@; do
  case "$i" in

   "-help") echo "$usage"
            ;;
   "-localsource") STATE="localsource"
                 ;;
   "-locbranches") STATE="locbranches"
                 ;;
   *) 
          if [ "$STATE" == "localsource" ]; then
             PATH=$i
          elif [ "$STATE" == "locbranches"]; then
             # do something with argv from locbrances
          else
             echo "Wrong state!"
          fi
          ;;
  esac
done 
```

# xml - 将元素属性放入子元素的元素中

> ID：13856488
> 
> 赞同：0
> 
> 时间：2012-12-13T09:13:42.020
> 
> 标签：xml, xslt, xpath

我目前正在研究 XML 的重组。这是我的 xml 示例：

```
<SECTION SectionID = "S">
    <DATA>
        <ITEM ID="GLOBAL_DOCSTATUS_1000">
        <D>template</D>
        <E>template</E>
        <R>шаблон</R>
        <K>шаблон</K>
        </ITEM>
    </DATA>
</SECTION> 
```

我需要将属性`@SectionID`作为`<ITEM>`标签内的元素作为带有数据的新`<SECTIONID>`标签。

结果应如下所示：

```
<SECTION>
  <DATA>
    <ITEM ID="GLOBAL_DOCSTATUS_1000">
    <D>template</D>
    <E>template</E>
    <R>шаблон</R>
    <K>шаблон</K>
        <SECTIONID>S</SECTIONID> 
    </ITEM>
  </DATA>
</SECTION> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:06:01.950

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@*|node()">
  <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="SECTION">
  <xsl:copy>
   <xsl:apply-templates select="@*[name()!='SectionID']|node()"/>
  </xsl:copy>
</xsl:template>

  <xsl:template match="SECTION[@SectionID]/DATA/ITEM">
  <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
   <SECTIONID><xsl:value-of select="../../@SectionID" /></SECTIONID> 
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# android - 检查并安装来自其他 android 的其他应用程序

> ID：13856494
> 
> 赞同：0
> 
> 时间：2012-12-13T09:13:54.373
> 
> 标签：android

我想创建一个小应用程序，当我在主要活动中启动这个小应用程序时，我想检查我的手机上是否安装了其他应用程序，例如“条形码”。

*   如果是，我想启动应用程序“条形码”
*   如果没有，我想从 google play 安装此应用程序。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:20:23.470

如果安装了应用程序，请检查以下代码

```
PackageManager pm = getPackageManager();
boolean app_installed = false;
try
{
     pm.getPackageInfo("com.package.Barcode", PackageManager.GET_ACTIVITIES);
     app_installed = true;
}
catch (PackageManager.NameNotFoundException e)
{
     app_installed = false;
}
return app_installed ; 
```

以下代码将用户重定向到 Play 商店以下载应用程序

```
String appName = "com.package.Barcode";    
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id="+appName));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:16:45.170

如何打开现有应用程序，您可以在此处找到：

[从您自己的（意图）打开另一个应用程序](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)

以及如何检查应用程序是否存在，您可以在这里找到：

[如何了解我的 Android 设备上是否存在特定包？](https://stackoverflow.com/questions/6758841/how-to-know-perticular-package-application-exist-in-the-device)

# php - 返回服务器响应并显示在同一页面中

> ID：13856498
> 
> 赞同：0
> 
> 时间：2012-12-13T09:14:04.980
> 
> 标签：php, ajax, post, curl

我已经尝试运行这个 sript 好几个星期了。

我想要的是将数据发送到那里显示的服务器并返回服务器响应，但我从响应中得到的只是 url 但 url 没有执行它只会显示在响应 var

```
<?php
class send
{

    public $username;
    public $password;
    public $destination;
    public $sender;
    public $msg;
    public $type;
    public $dlr;
    public $url;

    function __construct()
    {
    }

    function send_sms(){
        $posturl = 'http://121.241.242.114:8080/bulksms/bulksms?';
        $number = $this->destination;

        $msg = urlencode($this->msg);
        $type='0';
        $dlr='1';
        $url='';
        $posturl = $posturl."source=".$this->sender."&username=".$this->username."&password=".$this->password."&type=".$type."&dlr=".$dlr."&destination=".$number."&message=".$msg;
        $ch = curl_init(); 
        curl_setopt($ch, CURLOPT_URL, $posturl); 
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
        curl_setopt($ch, CURLOPT_POST, true);
        $response = curl_exec($ch); 
        return $posturl;
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:22:30.180

```
return $response; //and not $posturl 
```

# java - 磁盘上的图像文件大小（KB）随着java中动态图像大小的调整（减小大小）而增加

> ID：13856499
> 
> 赞同：0
> 
> 时间：2012-12-13T09:14:08.460
> 
> 标签：java, image, image-resizing, graphics2d, filesize

我是 Java 新手。我通过保持纵横比将大尺寸的 png 文件调整为标准文件大小。下面是我使用的代码片段。但我在这段代码片段中看到的缺点是，重新调整大小后文件大小比原来的大得多。例如，原始大小为 5kb，重新调整大小的新大小为 16kb。

请帮助我避免此文件大小在调整大小时变大

```
 public void SaveImage(String imagePath, BufferedImage image) {
        try {
            BufferedImage bi = image;
            File newImageFile = new File(imagePath);
            ImageIO.write(bi, "png", newImageFile);
        } catch (IOException e) {

        }
    }

    public BufferedImage resizeImage(final Image image, Dimension newDimension) {
        final BufferedImage bufferedImage = new BufferedImage(newDimension.width, newDimension.height, BufferedImage.TYPE_INT_RGB);
        final Graphics2D graphics2D = bufferedImage.createGraphics();
        //graphics2D.setComposite(AlphaComposite.Src);

        graphics2D.drawImage(image, 0, 0, newDimension.width, newDimension.height, null);
        graphics2D.dispose();

        return bufferedImage;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:26:22.283

PNG 压缩的工作原理是这样的：它使用一个预测器从以前的值中预测一个像素值，然后“zip”压缩产生的增量变化。图像中出现的低频内容越多，PNG 压缩它的效果就越好。

调整大小会改变内容，并且可能会阻止 PNG 预测器检测可以更好地压缩的长时间运行。缩小图像将增强高频，从而导致更高的熵，从而导致更小的压缩比。

或者它只是由编写器引起的`ImageIO`，它可能没有为 PNG 设置最佳压缩方法。看看`ImageWriter`它的`ImageWriterParam`. `ImageWriter`可以通过 获得`ImageIO.getImageWritersByFormatName(String formatName)`。

# nullpointerexception - 片段未附加到我的活动

> ID：13856500
> 
> 赞同：2
> 
> 时间：2012-12-13T09:14:11.500
> 
> 标签：nullpointerexception, android-fragments, fragment, illegalstateexception, android-fragmentactivity

首先，我使用支持库（android-support-v4.jar）来使用片段。

我有一个布局，其中包含一个片段。因此，当活动开始时，它会调用我的片段的 onCreateView 方法。在这种方法中，我膨胀了一个布局（其中包含一个线性布局和一个列表视图）并返回那个膨胀的视图。

因此，当活动启动时，它会加载我的列表视图并调用 web 服务，并响应 web 服务加载列表视图上的数据。

每件事都按预期完美运行。**但问题是**当我按下后退按钮并重新启动活动时，它不会将我的片段附加到活动并在我尝试调用 getActivity() 时抛出 IllegalStateException。当我尝试调用片段的 getView() 方法时也会抛出 NullPointerException 。

还要提到一件事，当我从 TraceView 工具中看到视图层次结构时，它会在那里显示我的片段视图。

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:04:12.507

我发现了问题，因此也解决了它。我使用 Observer 接口从 Web 服务获取响应。因此，当我第一次开始活动时，我将片段活动添加（或注册）到 Observable 类并收到响应，但在销毁时忘记删除（或取消注册）我的片段对象。因此，当 Activity 和 Fragment 重新启动时，它再次将我的 Fragment 对象添加到 Observable 类中，所以现在 Observable 类现在有两个 Fragment 实例，第一个实例已被销毁，当前的 Fragment 和 Web 服务被调用，它首先以被销毁的 Fragment 和到时候它会崩溃。所以我从片段的 onDestroy 方法中的 Observable 类中删除了片段实例，它现在可以工作了。

所以问题不在于片段，而在于我的片段的多个实例。

# android - Android：在 Widget.Holo.TabWidget 中更改 TabHost 的字体大小

> ID：13856504
> 
> 赞同：1
> 
> 时间：2012-12-13T09:14:22.890
> 
> 标签：android, android-tabhost, font-size, android-theme

我按照这里的答案：[StackOverflow：如何在 android 中更改 tabhost 的字体大小](https://stackoverflow.com/questions/5788971/how-to-change-the-font-size-of-tabhost-in-android)

它确实有效，但我失去了 Holo 主题，取而代之的是旧的默认主题。所以我尝试了以下方法：

```
<resources>
<style name="AppBaseTheme" parent="android:Theme.Holo.NoActionBar.Fullscreen">
    <!-- API 14 theme customizations can go here. -->
    <item name="android:tabWidgetStyle">@style/CustomHoloTabWidget</item>
</style>
<style name="CustomHoloTabWidget" parent="@android:style/Widget.TabWidget">
    <!-- Custom item for text appearance -->
    <item name="android:textAppearance">@style/CustomTabWidgetText</item>
    <!-- End -->
    <item name="android:tabStripLeft">@null</item>
    <item name="android:tabStripRight">@null</item>
    <item name="android:tabStripEnabled">false</item>
    <item name="android:divider">?android:attr/dividerVertical</item>
    <item name="android:showDividers">middle</item>
    <item name="android:dividerPadding">8dip</item>
    <item name="android:measureWithLargestChild">true</item>
    <!-- Following line results in ERROR -->
    <item name="android:tabLayout">@android:layout/tab_indicator_holo</item>
    <!-- End --> 
</style>
<!-- Custom text appearance item definition -->
<style name="CustomTabWidgetText" parent="@android:style/TextAppearance.Widget.TabWidget">
    <item name="android:textSize">36sp</item>
    <item name="android:textStyle">bold</item>
</style>
<!-- End --> 
```

基本上我所做的是编辑 Widget.Holo.Tabwidget[在此处@line:1801](http://omapzoom.org/?p=platform/frameworks/base.git;a=blob;f=core/res/res/values/styles.xml;hb=master)可用的原始定义，以包含 textAppearance 的自定义定义。

我收到以下错误：

> 错误：错误：找不到与给定名称匹配的资源：attr 'android:tabLayout'。

我只想在保留 Holo 主题的同时更改选项卡标题的字体大小。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T13:42:56.470

试试这个

```
for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++) {
        TextView tv = (TextView) tabHost.getTabWidget().getChildAt(i).findViewById(android.R.id.title);
        tv.setTextSize(23);
    } 
```

# asp.net-mvc-3 - MVC3 视图作为弹出窗口

> ID：13856505
> 
> 赞同：3
> 
> 时间：2012-12-13T09:14:24.433
> 
> 标签：asp.net-mvc-3, razor

我想打开**视图**作为弹出窗口。

这是我的 **控制器**

```
 #region Send Voting Email
    [HttpGet]
    [OutputCache(Location = OutputCacheLocation.None)]
    [Authorize]
    public ActionResult SendVotingEmail(string CampID)
    {
        try
        {
            var model = (new CampManager()).GetCampDetails(CampID);
            var user = (Bank.Security.BankMembershipUser)Membership.GetUser();

            Models.Camp.EmailModel VotingModel = new Models.Camp.EmailModel();
            VotingModel.CampID = CampID;
            VotingModel.BankName = user.BankName;
            VotingModel.Message = "";

            return RedirectToAction("Send", VotingModel);
            //(new CampManager()).SendEmail(CampID, user.BankName,"");
            //return Content("Email send successfully.");
        }
        catch(Exception ex)
        {
            return Content("Sorry, An error occured while sending Voting Email. Please contact Administrator.");
        }
    }
    #endregion

    #region Send Voting mail popup
    [HttpGet]
    public ActionResult Send(Models.Camp.EmailModel model)
    {
        return View(model);
    }
    [HttpPost]
    public ActionResult Send(Models.Camp.EmailModel model,string CampID)
    {
        (new CampManager()).SendEmail(model.CampID,model.BankName,model.Message);
        return Content("Email send successfully.");
    }
    #endregion 
```

**发送邮件.cshtml**

```
<input type="button" id="ClickMe" name = "ClickMe" value="Send Voting Email" onclick="SendEmail('@Model.CampID');" />
<script type="text/javascript">
        $(function () {
            $('#ClickMe').click(function () {
                window.open('/Camp/Send/', 'mail', 'height=' + (window.screen.height - 100) + ',width=200,left=' + (window.screen.width - 250) + ',top=10,status=no,toolbar=no,resizable=yes,scrollbars=yes');
            });
        });
 function SendEmail(CampID) {
        $('#sendEmailProgressBar').css("visibility", "visible");        
        $.get('/bank/Camp/SendEmail?CampID=' + CampID, function (data) {
            $('#sendEmailProgressBar').css("visibility", "collapse");        
            alert(data);
        });
</script> 
```

**发送.cshtml**

```
@model Bank.Models.Camp.EmailModel

@{
    Layout = null;
 }

<!DOCTYPE html>

 <html>
<head>
    <title>Send</title>
</head>
<body>
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>EmailModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.CampID)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CampID)
            @Html.ValidationMessageFor(model => model.CampID)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.BankName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.BankName)
            @Html.ValidationMessageFor(model => model.BankName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Message)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Message)
            @Html.ValidationMessageFor(model => model.Message)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

**当我单击SendMail.cshtml的****ClickMe**按钮时，我想打开弹出窗口。当我点击此按钮时，弹出窗口打开，但它显示**Send.cshtml**视图的代码。我不知道为什么会这样。我的代码是否有任何更改以打开弹出窗口？

 ****![错误](../Images/5d129ceaf518c2dacabe243339910ade.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:54:20.013

试试这个

```
 <script type="text/javascript">
         function OpenWindow(query, w, h, scroll) {
    var l = (screen.width - w) / 2;
    var t = (screen.height - h) / 2;

    winprops = 'resizable=0, height=' + h + ',width=' + w + ',top=' + t + ',left=' + l + 'w';
    if (scroll) winprops += ',scrollbars=1';
    var f = window.open(query, "_blank", winprops);
}

            $(function () {
                $('#ClickMe').click(function () {
                     OpenWindow('@Url.Action("Send","Camp")', width, height, true); 
                });
            });
    </script> 
```

// 在控制器中

```
[HttpGet]
    public ActionResult Send()
    {

      //prepared your model object here
        var model = new Models.Camp.VotingEmailModel();
        return View(model);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:59:08.703

检查[这个](https://stackoverflow.com/questions/178964/javascript-post-on-form-submit-open-a-new-window)问题。第二个答案正是您想要的。当您提交表单时，它将打开一个新窗口。您甚至可以在将表单提交到新窗口之前自定义窗口设置。****

# ios - 计算字典对象中的值数

> ID：13856508
> 
> 赞同：4
> 
> 时间：2012-12-13T09:14:32.403
> 
> 标签：ios, uitableview

```
<pre>
    products =     (
                {
            id = 19;
            "image_url" = "http://localhost:8888/straightoffer/image/data/1330374078photography.jpg";
            name = "Save $240 on your next photo session";
        },
                {
            id = 21;
            "image_url" = "http://localhost:8888/straightoffer/image/data/1330373696massage.jpg";
            name = "One Hour  Massage";
        }
    );
}
</pre> 
```

以上是我通过json得到的，我需要将值分配给uitableviews：

```
    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
        NSLog(@"行数：%d",[[products objectForKey:@"products"] count]);
        返回 [[products objectForKey:@"products"] count];
    }
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
        如果（细胞 == 零）{
            单元格 = [[UITableViewCell 分配]
                initWithStyle:UITableViewCellStyleDefault
                重用标识符：@“细胞”]；
        }
        NSString *currentProductName;
        currentProductName = [productKeys objectAtIndex:indexPath.row];
        NSLog(@"产品名称：%@", currentProductName);
        [[单元格文本标签] setText:currentProductName];

        返回单元格；
    }

```

它返回 0 行，我是 ios 的新手，请帮助我如何将这些值分配给 uitableview。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T09:59:45.570

问题是您发布的不是json。它应该是

```
{
    "products":[
        {
            "id":19,
            "image_url":"http://localhost:8888/straightoffer/image/data/1330374078photography.jpg",
            "name":"Save $240 on your next photo session"
        },
        {
            "id":21,
            "image_url":"http://localhost:8888/straightoffer/image/data/1330373696massage.jpg",
            "name":"One Hour  Massage"
        }
    ]
} 
```

您可以使用[http://jsonlint.com/](http://jsonlint.com/)来验证您的 json 文件。

* * *

* * *

我使用了上面的 json 文件并做了以下事情：

```
NSBundle* bundle = [NSBundle mainBundle];
NSString *jsonPath = [bundle pathForResource:@"data" ofType:@"json"];
NSData *data = [NSData dataWithContentsOfFile:jsonPath];

NSError *error;
NSDictionary *products = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

DLog(@"products: %i", [[products objectForKey:@"products"] count] );

[self.tableView reloadData]; 
```

结果是：产品：2。

你应该能够重现这个。

# javascript - Javascript - 刷新 - 内存泄漏

> ID：13856513
> 
> 赞同：1
> 
> 时间：2012-12-13T09:14:51.423
> 
> 标签：javascript

我在下面的代码中看到 Firefox 和 IE 内存泄漏。公平地说，这很可能是我的糟糕实现，它需要改变，以允许 Firefox 和其他浏览器进行垃圾收集。

有没有人对如何调整代码以更有效地刷新页面有任何建议？

```
<input type="checkbox" onclick="sel1()" id="AutoRefresh">

<script type="text/javascript">
    function sel1(){
        var ref = document.getElementById('AutoRefresh').checked;
        if(ref == true) {
            setInterval(function(){
                document.getElementById('dataRefreshButton').click(); }, 2000);
            }
            window.alert("Auto refresh on");
        }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:27:03.530

我认为这会更好。

```
<script type="text/javascript">
    function getdata(){
        // get your data    
    }
    var intGetData;
    function sel1(){
        var ref = document.getElementById('AutoRefresh').checked;
        if(ref == true) {
            intGetData = setInterval(getdata, 2000);
            window.alert("Auto refresh on");
        }
        else{
            clearInterval(intGetData);  
            window.alert("Auto refresh off");           
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:38:29.817

更改`setInterval`为 `setTimeout`。您当前的代码将设置一个新的间隔，以便在单击时每 2 秒单击一次元素。如果单击一次，就会触发雪崩。

或者更好的是，你停止间隔：

```
var handle = null;
function sel1(){
    var ref = document.getElementById('AutoRefresh').checked;
    clearInterval(handle);
    if (ref)
        handle = setInterval(function(){
            document.getElementById('dataRefreshButton').click();
        }, 2000);
    window.alert("Auto refresh on");
} 
```

# video - 限制云游戏服务器的带宽使用

> ID：13856514
> 
> 赞同：1
> 
> 时间：2012-12-13T09:14:59.493
> 
> 标签：video, streaming, bandwidth, x264

我正在从事云游戏服务器开发。

在测试某些游戏期间，观察到大约 10 MBps 的峰值。通常游戏会消耗 4~6 MBps 的网络带宽。

有什么方法可以在不影响视频质量的情况下保持消耗的带宽 < 5 MBps？

正在使用 720p 分辨率。我们正在使用 x264 编码器，该编码器是否有任何参数可以帮助我实现预期的 o/p ？

# c# - C# 使用大型多维（非锯齿状）字节数组执行文件 I/O 的简单方法

> ID：13856515
> 
> 赞同：3
> 
> 时间：2012-12-13T09:15:02.533
> 
> 标签：c#, arrays, file-io, multidimensional-array

我正在使用大型多维字节数组（每个数组约 500mb，例如尺寸为 [8,8192,8192] 的数组），我想将它们读取并写入文件以进行存储。

我尝试使用 BinaryFormatter 但速度很慢（需要几分钟才能完成）。

我尝试使用 BinaryWriter，但它只接受一维数组。现在，在 C 中，将多维数组作为单维传递没有问题。在 C# 中，据我所知，我有两个选择：

*   为一维数组分配另一块内存，使用 for 循环将数据复制到其中，然后使用 BinaryWriter 将此数组写入文件
*   使用 for 循环，使用 BinaryWriter 将每个单独的字节写入文件

显然，如果我只是在任何地方使用 byte[] 而不是使用 myarray[i,j] 使用 myarray[i+j*myarray_width] 会更快，但这需要重写整个类，只是为了更容易工作一组 I/O 功能（保存/加载）。

一定有更好的办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:20:45.223

当涉及到快速序列化时，不安全的代码可能会派上用场。这里有两种技术可以提供帮助：

1.  做一个 memcpy 从你的到一个你可以传递给`byte[,]`的新鲜事物。当然，这需要临时翻倍的存储空间和一些复制。不过，您可以将这项工作分成 64KB 的块。`byte[]``FileStream.Write`
2.  PInvoke 到非托管`WriteFile`并将`FileStream.SafeHandle`值传递给它。`WriteFile`接受任意指针，因此您可以直接写出您的`byte[,]`（转换为 a `void*`）。

选项 2 最快（“零拷贝”）。

旁注：当您需要重新解释字节时，不安全代码会派上用场。这种能力导致了 C 中的一些很好的抽象。幸运的是，C# 也有这种能力。

# facebook - OG：键入“网站”导致在对 URL 进行 linting 时发生内部错误

> ID：13856519
> 
> 赞同：2
> 
> 时间：2012-12-13T09:15:08.560
> 
> 标签：facebook, debugging, web, facebook-opengraph

Wordpress
Facebook 插件

每当我有“OG：键入'网站'”时，facebook 调试 linter 都会返回

> 错误检查 URL：检查 URL 时发生内部错误。

[调试链接](http://developers.facebook.com/tools/debug/og/object?q=www.shotgunmyferrari.com)

如果我在 plugins/facebook/open-graph-protocol.php 中将“网站”更改为“博客”，它会起作用。它只是不喜欢“网站”。不知道为什么官方 facebook 插件中的默认“网站”类型在我的网站上不起作用。

谢谢大家，和OG一起玩了几个深夜（昨晚5点，今晚4点）。-马特

附言。这一切都是从我发布时开始的，它进入了我的小组墙，但在我的时间线上，它显示在“最近的活动 - Molson 在 ShotgunMyFerrari.com 上发布的测试”下。但不在我的个人墙上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:11:47.560

我在我的网站上也遇到了类似的问题，但我在我的 Facebook 应用程序中创建了一个名为“网站”的对象。

我必须在插件文件 plugins/facebook/open-graph-protocol.php 中手动将 og:type 更改为 myAppName:website 并且它可以工作。

但仍然想知道为什么默认的东西不起作用。任何人都可以对这个问题提出更多的看法吗？

# android - 调用本机函数时出现 UnsatisfiedLinkError

> ID：13856521
> 
> 赞同：0
> 
> 时间：2012-12-13T09:15:11.177
> 
> 标签：android, android-ndk, java-native-interface, shared-libraries, unsatisfiedlinkerror

我可以使用 成功加载本机库`System.loadLibrary("")`，但是当我从该库调用本机方法时，我收到`UnsatisfiedLinkError`，没有找到该方法的实现。

但是这段代码在另一个应用程序中工作，不知何故在我的不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:24:49.680

您是否更改了 jni 方法中的 packageName，它应该是`Java_com_example_yourapp_methodname(JNIEnv * env, jobject thiz)`com_example_yourapp 对您调用该方法的类的包的引用。在那之后，你又打电话`ndk-build`了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:07:31.243

建议使用 Erik N 方法，但它对性能有一些影响，因为 VM 需要搜索具有上述签名的函数调用。相反，您可以使用签名映射函数并将它们注册到 JNI_OnLoad() 函数调用中。

[http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/functions.html#wp5833](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/functions.html#wp5833)

# c# - 在 C# 中，Debug.Assert 测试是否在发布模式下运行？

> ID：13856525
> 
> 赞同：27
> 
> 时间：2012-12-13T09:15:17.753
> 
> 标签：c#, .net, visual-studio, debugging, assert

举个例子：

```
public void Foo()
{
    //Code...

    Debug.Assert(ExpensiveTest());

    //Code...
} 
```

`Debug.Assert`当我在发布模式下编译时，该方法会发生什么？`ExpensiveTest()`还会跑吗？如果不是，那么它是如何工作的（因为它不是一个可以设置为空值的宏）？如果它确实运行，那么这不是破坏调试断言的目的吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-13T09:17:33.457

> 当我在发布模式下编译时，Debug.Assert 方法会发生什么？

`ExpensiveTest`假设您没有`DEBUG`在发布配置中定义条件编译符号，它已被完全删除（包括对 的调用）。

如果您查看[文档](http://msdn.microsoft.com/en-us/library/kssw4w7z.aspx)，则声明使用`[ConditionalAttribute("DEBUG")]`：

```
[ConditionalAttribute("DEBUG")]
public static void Assert(
    bool condition
) 
```

[`ConditionalAttribute`](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)用于条件编译。有关更多详细信息，请参阅[Bart de Smet 关于条件编译的博客文章](http://bartdesmet.net/blogs/bart/archive/2006/08/30/4368.aspx)，以及 C# 4 规范的第 17.4.2 节。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T09:17:51.360

[托管代码中的断言 - MSDN](http://msdn.microsoft.com/en-us/library/ttcc4x86.aspx)

> 在 Visual Basic 和 Visual C# 中，您可以使用 System.Diagnostics 命名空间中的 Debug 或 Trace 中的 Assert 方法。 **调试类方法不包含在程序的发布版本中**，因此它们不会增加发布代码的大小或降低发布代码的速度。

也来自同一个链接：

> 请注意，**当您创建**代码的发布版本时，对 Debug.Assert 方法的调用会消失。这意味着检查余额的调用在 Release 版本中消失了。要解决这个问题，应该将Debug.Assert替换为Trace.Assert，在Release版本中不会消失

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-13T09:17:19.493

根据[Debug.Assert Method (Boolean)](http://msdn.microsoft.com/en-us/library/kssw4w7z.aspx) `Debug`方法仅在调试版本中编译。

因此，如果您构建正确的发布版本（`Debug/Configuration Manager`有关详细信息，请参阅菜单项），此方法调用将被删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-25T17:46:56.757

> 问：在 C# 中，Debug.Assert 测试是否在发布模式下运行？

答案是不。” 来自 Microsoft 支持：[如何在 Visual C# 中跟踪和调试](https://support.microsoft.com/en-us/kb/815788)：

> 您可以在同一应用程序中单独或一起使用**Trace**和**Debug类。**在调试解决方案配置项目中，**跟踪**和**调试**输出都处于活动状态。该项目将这两个类的输出生成到所有**Listener** 对象。但是，发布解决方案配置项目仅从**Trace**类生成输出。发布解决方案配置项目忽略任何**Debug**类方法调用。

特别是，最后一句清楚地表明，`Debug.Assert()`语句（以及其他 Debug 类方法调用）在 Release 构建中被忽略。

# python - 在 python 应用程序中包含一个库

> ID：13856528
> 
> 赞同：1
> 
> 时间：2012-12-13T09:15:20.377
> 
> 标签：python, linux, ubuntu, gtk, pygtk

我正在尝试找到一种将库包含在 Ubuntu/Python/PyGtk 应用程序中的方法，即使它不包含在股票 python 环境中，我也无法将它作为依赖项添加到我的 setup.py 文件中。该库称为[pygal](http://pygal.org/)并且确实有一个 PIP 包（没有可用的 .deb 或 ppa），但我正在寻找一种将它包含在我的应用程序中的方法。我想我可以只将源 .py 文件包含到库中，但我不确定如何将它包含在我的代码中。Pygal 还需要 lxml python 库。我可以通过 pip 在我的机器上安装它，它工作正常，但不知道是否有任何自动化或将其包含在我的 .deb 包的 setup.py 文件中。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:55:36.090

我认为这应该可行，但我不确定。您将具有`pygal`pygal egg 名称的文件夹放在应用程序目录中。你可以从你的 python 安装中获取它——它应该有这个路径：

```
/usr/local/lib/python2.7/dist-packages/pygal-0.13.0-py2.7.egg/pygal 
```

或者如果你使用 python 3.1

```
/usr/local/lib/python3.1/dist-packages/pygal-0.13.0-py3.1.egg/pygal 
```

或从 下载`pipy`。

你可以像使用任何 python 库一样使用它：

```
from pygal import * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:44:38.690

我实际上已经想出了如何将它打包为一个 *deb 文件，我可以将它包含在我未来的 PPA（或可能提交给社区）中，它将（希望）在系统上干净地安装 python 包。我在 Debian wiki 中发现了一篇很棒的文章，对于像我这样的新手来说，这实际上并不神秘，奇怪的是。 [http://wiki.debian.org/Python/Packaging#Example_1:_Python_extension](http://wiki.debian.org/Python/Packaging#Example_1:_Python_extension)

# c# - 通缉：独立于序列化格式的AC#序列化库

> ID：13856531
> 
> 赞同：0
> 
> 时间：2012-12-13T09:15:32.023
> 
> 标签：c#, serialization

我正在寻找的是一个通用且可扩展的开源序列化库。

它应该支持类型/属性属性的扩展和编码器的配置，以便从二进制序列化到基于文本的序列化的整个范围都可以基于它来实现。

有没有类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:22:54.440

尝试为您的目的使用协议缓冲区[http://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/)

# arm - ARM U-Boot 构建问题的跨工具链

> ID：13856536
> 
> 赞同：3
> 
> 时间：2012-12-13T09:15:39.243
> 
> 标签：arm, cross-compiling, bootloader, toolchain, u-boot

我正在尝试为 Raspberry-Pi 构建自己的工具链。我知道有很多预建的工具链。这项工作是出于教育原因。我正在从头开始关注嵌入式 arm linux。并且目前成功构建了gcc和uClib。我正在为目标 arm-unknown-linux-eabi 构建。

现在谈到准备一个可引导的文件系统，我正在质疑自己关于引导加载程序构建的问题。

关于这个系统的引导加载程序的部分似乎不完整。现在我在问自己如何使用我的 arm-unknown-linux-eabi 工具链为这个系统构建一个 uboot。

我是否需要构建一个不依赖于 linux 内核调用的工具链。我的第一个研究使我指出，有不同类型的工具链依赖于操作系统（linux 内核系统调用等......）和不需要在下面有内核的工具链。有时称为“裸机”工具链或“独立”工具链。

一些消息来源提到可以使用 linux 工具链构建 U-Boot。如果这是真的，为什么以及如何工作？

如果我必须为“Bare Metal”工具链构建第二个工具链，我在哪里可以找到有关这两者之间差异的信息。我需要另一个 libstdc 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:18:19.527

您可以使用用于构建内核的相同交叉工具链构建 U-Boot - 并且很可能是系统的其余用户空间。

根据定义，引导加载程序是自包含的，并且不关心您选择的 C 运行时库，因为它不使用它。因此，系统调用的问题并没有涉及。

工具链总是需要由功能齐全的开发系统托管 - 总是不是您的目标系统。无论您看到什么对“裸机工具链”的引用，都不是指编译器对系统调用的使用（它严重依赖于操作系统的 I/O）。在构建引导加载程序和内核时，重要的是编译器和链接器被配置为生成可以在特定内存地址运行的静态链接代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T20:19:18.273

在几乎所有可能的方面，嵌入式工具链和 Linux 工具链之间没有区别。但有一个例外。

该例外是 __clear_cache - 一个可以由编译器生成的函数，并且在“Linux”工具链中包括用于同步指令和数据缓存的系统调用。（有关该位的更多信息，请参阅[http://blogs.arm.com/software-enablement/141-caches-and-self-modifying-code/](http://blogs.arm.com/software-enablement/141-caches-and-self-modifying-code/)。）

现在，除非您显式添加对该函数的调用，否则我知道调用它的唯一方法是在 C 中编写嵌套函数（应该避免的 GCC 扩展）。但这是有区别的。

# javascript - 如何使用 jquery toggle() 为与内容相邻的内容设置动画（幻灯片）

> ID：13856538
> 
> 赞同：2
> 
> 时间：2012-12-13T09:15:42.800
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我正在设置一个页面，用户可以根据需要隐藏侧栏。我正在尝试使用 jqeuryui 通过以下 js 代码执行此操作

```
// TOGGLE JS
$(function () {      
    function runEffect() {           
        var options = {};            
        $("#effect").toggle('slide', options, 500);
    };
    $("#button").click(function () {
        runEffect();
        return false;
    });
}); 
```

我在这里的 JSFiddle 中有这个工作[http://jsfiddle.net/jwg4U/](http://jsfiddle.net/jwg4U/)

但是，当您查看 JSFiddle 时，您会注意到我的主要内容区域（称为 DIV）`#content`没有动画，它只是在我切换侧边栏时跳转到位。

我希望内容 div 也能无缝滑入到位，并按照切换按钮连接到它。

我看过 jquery animate，但不知道如何用幻灯片实现这个？

* * *

我正在努力的第二部分是如何在侧边栏关闭时更改按钮文本以说“显示侧边栏”-天气它现在打开或关闭它只是说“隐藏侧边栏”

寻求帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:32:20.437

看到这个更新的小提琴：http: [//jsfiddle.net/jwg4U/23/](http://jsfiddle.net/jwg4U/23/)

HTML：

```
<div id="container" style="width:800px">

<div id="header">
     <h1>HEADER</h1>
</div>

<div class="toggler">
<div id="effect" class="ui-widget-content ui-corner-all">
    <div id="menu" style="background-color:#FFD700;height:300px;width:100px;float:left;">
        <h3>SIDEBAR</h3>
    </div>
</div>

<div id="content" style="background-color:#EEEEEE;height:300px;">Main Content goes     here</div>
</div>
<a href="#" id="button" class="ui-state-default ui-corner-all">Hide Sidebar</a>

<div id="footer" style="background-color:#FFA500;clear:both;text-align:center;">
FOOTER</div>

</div> 
```

​</p>

JS：

```
// TOGGLE JS
$(function() {
var i = 0;

function runEffect() {
    var options = {};
    if (i === 0) {
        i = 1;
        $(".toggler").animate({
            left: -100
        }, {
            duration: 500
        });
    }
    else {
        i = 0;
        $(".toggler").animate({
            left: 0
        }, {
            duration: 500
        });
    }
}
$("#button").click(function() {
    if (i === 0) {
        $(this).html("Show Sidebar");
    }
    else {
        $(this).html("Hide Sidebar");
    }
    runEffect();
    return false;
});
});

// TABS JS
$(function() {
$("#tabs").tabs();
});​ 
```

CSS：

```
 .toggler {
    float: left;
    position: relative;
}
#button {
    padding: .5em 1em;
    text-decoration: none;
}
#effect {
    position: relative;
    float: left;
}
#content{
    position: relative;
    float: left;
    width: 500px;
}
#button{
    float: left;
    clear: both;
}
#header{
    background-color: #000;
    color: #FFF;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:39:07.197

完整答案的 jsfiddle：http: [//jsfiddle.net/jwg4U/22/](http://jsfiddle.net/jwg4U/22/)

```
 $('#effect').animate({
   width: 'toggle',
   height: 'toggle'
    }, {
   duration: 500,
   specialEasing: {
     width: 'linear',
     height: 'linear'
   },
   complete: function() {
      $("#content").animate(
           { left: '+=100px' },
           60, 
           'easeInQuad', 
           function () 
           { 
               if(isOpen)
               {
                  isOpen=false;  
                  $("#button").html('Show Sidebar');                     
                }
                else
                {
                  isOpen=true;
                  $("#button").html('Hide Sidebar');     
                }
             });
        }
   }); 
```

# interface - 你如何在未知接口上获取结构值{}

> ID：13856539
> 
> 赞同：2
> 
> 时间：2012-12-13T09:15:50.110
> 
> 标签：interface, struct, go

如果我有一个结构并且我想获得它的关键，但它目前是类型`interface{}`，我该怎么做？

目前我收到以下编译错误：

`invalid operation: d[label] (index of type interface {})`

播放：[http ://play.golang.org/p/PLr91d55GX](http://play.golang.org/p/PLr91d55GX)

```
package main

import "fmt"
import "reflect"

type Test struct {
    s string
}

func main() {
    test := Test{s: "blah"}
    fmt.Println(getProp(test, "s"))
}

func getProp(d interface{}, label string) (interface{}, bool) {
    switch reflect.TypeOf(d).Kind() {
    case reflect.Struct:
        _, ok := reflect.TypeOf(d).FieldByName(label)
        if ok {
                    // errors here because interface{} doesn't have index of type 
            return d[label], true
        } else {
            return nil, false
        }
    }
} 
```

我真的必须对每种不同的类型做大量的案例陈述并调用反映的`reflect.ValueOf(x).String()`等吗？我希望有一种更优雅的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:18:15.093

你可以这样做，但我认为只有当你的结构成员是一个导出的字段时它才会起作用（即在你的例子中`s`使用大写字母）`S`

```
func getProp(d interface{}, label string) (interface{}, bool) {
    switch reflect.TypeOf(d).Kind() {
    case reflect.Struct:
        v := reflect.ValueOf(d).FieldByName(label)
             return v.Interface(), true
    }
   return nil, false
} 
```

（+ 更多错误处理）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:23:15.763

我不确定您要查找的确切内容，但有一种稍微简单的方法可以查找 interface{} 类型。在您的情况下，您可以使用：

```
switch val := d.(type) {
  case Test:
    fmt.Println(d.s)
} 
```

显然，我没有做和你一样的事情，但想法是你可以用“d.(type)”检查类型，一旦“case Test:”确定它是你的测试类型的结构，您可以这样访问它。

不幸的是，这并没有解决通过标签访问结构内值的问题，但它至少是一种更优雅的确定类型的方法，@nos 展示了如何使用

```
v := reflect.ValueOf(d).FieldByName(label)
return v.Interface(), true 
```

# python - 在 wxPanel 中绘制实时图表的最佳方法是什么？

> ID：13856540
> 
> 赞同：0
> 
> 时间：2012-12-13T09:15:52.087
> 
> 标签：python, plot, wxpython, wxwidgets

在 400*300 wxPanel 中，每帧大约有 400 行。我使用了 PaintDC，但它的性能低于 30fps，并且导致高负载。wxPython 中是否有任何替代解决方案，而不仅仅是切换 PyGame？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:43:56.290

You should look at the wxPython mailing list. I doubt most users will notice if the frame rate is lower than 30 fps. You should also look at matplotlib which can be integrated into wxPython. See the following:

*   [http://eli.thegreenplace.net/2008/08/01/matplotlib-with-wxpython-guis/](http://eli.thegreenplace.net/2008/08/01/matplotlib-with-wxpython-guis/)
*   [http://www.scipy.org/Cookbook/Matplotlib/EmbeddingInWx](http://www.scipy.org/Cookbook/Matplotlib/EmbeddingInWx)

See also the following:

*   [What is the best real time plotting widget for wxPython?](https://stackoverflow.com/questions/457246/what-is-the-best-real-time-plotting-widget-for-wxpython)
*   [Minimalistic Real-Time Plotting in Python](https://stackoverflow.com/questions/9401857/minimalistic-real-time-plotting-in-python)
*   [dynamic plotting in wxpython](https://stackoverflow.com/questions/1181391/dynamic-plotting-in-wxpython)
*   [http://wxpython-users.1045709.n5.nabble.com/real-time-data-plots-td2344816.html](http://wxpython-users.1045709.n5.nabble.com/real-time-data-plots-td2344816.html)

# radius - CentOS FreeRadius 和 WPA 2 企业版

> ID：13856542
> 
> 赞同：0
> 
> 时间：2012-12-13T09:15:52.903
> 
> 标签：radius

据我所知，当我在 CentOS 服务器上完成 FreeRadius 的设置后，我将路由器指向服务器，一切就完成了。

任何用户都需要使用 WPA2-Enterprise 登录。

我之前使用 DAC 来验证我的用户，在设置 RADIUS 之后，我不再需要像 DAC 那样需要的网页，对吧？登录表单将显示在用户设备操作系统上，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:38:06.750

经过深思熟虑，这是我所知道的。

DAC 身份验证是基于控制器的，当我使用本地数据库进行身份验证检查时，将其更改为 RADIUS 仍需要该网页存在。

为了切换到 WPA2-Enterprise，我需要配置每个接入点以使用 WPA2-Enterprise，并将它们指向 RADIUS 服务器。这主要是因为我使用胖 AP，如果我的环境中的接入点是瘦 AP，他们可以简单地从我的控制器获取配置。

# java - 使用 Robotium 进行 junit 测试的 AssertionFailedError

> ID：13856547
> 
> 赞同：0
> 
> 时间：2012-12-13T09:16:00.750
> 
> 标签：java, android, exception, junit

我在每次测试中都遇到以下异常，我不知道为什么。希望有人有一些见解。

```
 ----- begin exception -----
junit.framework.AssertionFailedError: 
Activity named mainActivity can not be returned to
at junit.framework.Assert.fail(Assert.java:47)
at junit.framework.Assert.assertTrue(Assert.java:20)
at com.jayway.android.robotium.solo.ActivityUtils.goBackToActivity(ActivityUtils.java:185)
at com.jayway.android.robotium.solo.Solo.goBackToActivity(Solo.java:1864)
at com.package.test.AppointmentSettingTestBase.tearDown(AppointmentSettingTestBase.java:64)
at junit.framework.TestCase.runBare(TestCase.java:130)
at junit.framework.TestResult$1.protect(TestResult.java:106)
at junit.framework.TestResult.runProtected(TestResult.java:124)
at junit.framework.TestResult.run(TestResult.java:109)
at junit.framework.TestCase.run(TestCase.java:118)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:525)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1547) 
```

----- 结束异常 -----

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:13:41.230

您已经编写了要返回的活动的正确名称。我认为您的活动名称是 MainActivity 而不是 mainActivity。

# java - 空指针错误

> ID：13856551
> 
> 赞同：1
> 
> 时间：2012-12-13T09:16:14.817
> 
> 标签：java, arraylist, nullpointerexception

我的应用程序中有一个登录窗口，其中一个方法从数据库中提取密码然后放入`arraylist1`. 用户输入的密码也被放入一个`arraylist2`，然后我检查是否`arraylist1`包含`arraylist2`，如果是，那么如果没有，他们可以继续，然后系统打印一条密码错误的消息。不幸的是我一直在`null pointer error`

请检查我的代码：

`Model.java`

```
public class Model {

       public ArrayList<LogPass> getPass() throws SQLException{

        Connection con =null;
        PreparedStatement stmt = null;
        ResultSet rs = null;

        ArrayList<LogPass> list = new ArrayList<LogPass>();
        try{
        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xxxxx?user=bbbbb&password=aaaaaa");
        stmt = con.prepareStatement("SELECT Pass FROM Logpass");
        rs = stmt.executeQuery();

        while(rs.next()){
        LogPass t = new LogPass();
        t.setPass(rs.getString("Pass"));
        list.add(t);
        }
        }
        finally{ 
                if(rs != null) try {rs.close();}catch (SQLException se){}
                if (stmt != null) try{stmt.close();} catch (SQLException se){}
                if (con != null) try {con.close();}catch (SQLException se){}

        }

            return list;

        }

    } 
```

`Login.java`

```
public class Login extends javax.swing.JFrame {

Control c = new Control();
Model m;

    /**
     * Creates new form Login
     */
    public Login() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jComboBox1 = new javax.swing.JComboBox();
        jTextField1 = new javax.swing.JTextField();
        jPasswordField1 = new javax.swing.JPasswordField();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jComboBox1.setMaximumRowCount(2);
        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Staff", "Manager", " " }));

        jLabel1.setText("Username");

        jLabel2.setText("Password");

        jLabel3.setText("Domain");

        jButton1.setText("Login");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setText("Exit");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(62, 62, 62)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addComponent(jButton1)
                        .addGap(37, 37, 37)
                        .addComponent(jButton2))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel2)
                            .addComponent(jLabel3)
                            .addComponent(jLabel1))
                        .addGap(34, 34, 34)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jPasswordField1)
                            .addComponent(jTextField1)
                            .addComponent(jComboBox1, 0, 120, Short.MAX_VALUE))))
                .addContainerGap(103, Short.MAX_VALUE))
        );

        jPanel1Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jLabel1, jLabel2, jLabel3});

        jPanel1Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jButton1, jButton2});

        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addGap(42, 42, 42)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel3)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jPasswordField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 41, Short.MAX_VALUE)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jButton2)
                            .addComponent(jButton1))
                        .addGap(29, 29, 29))))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
        System.exit(0);
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        //try {
            // TODO add your handling code here:
            //String a = new String(jPasswordField1.getPassword());
           // ArrayList<LoginPass2> list2 = new ArrayList<LoginPass2>();
            //LoginPass2 l = new LoginPass2();
            //l.setPass2(a);
            //list2.add(l);

            //if(m.getPass().equals(l)){
           // if(m.getPass().containsAll(list2)){
           this.setVisible(false);
           c.setVisible(true);
        //}//else{System.out.println("Wrong username or password!");}
        //} catch (SQLException ex) {
           // Logger.getLogger(Login.class.getName()).log(Level.SEVERE, null, ex);
        //}

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new Login().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPasswordField jPasswordField1;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration
} 
```

`LogPass.java`

```
public class LogPass {
        private String log;
        private String pass;

        public String getLog(){
        return log;
        }
       public void setLog(String l){
            log = l ;

        }
        public String getPass(){
        return pass;
        }
        public void setPass(String p){
            pass = p ;

        }

    } 
```

`LoginPass2.java`

```
 public class LoginPass2 {
        private String log;
        private String pass;

        public String getLog2(){
        return log;
        }
        public void setLog2(String l){
            log = l ;

        }
        public String getPass2(){
        return pass;
        }
        public void setPass2(String p){
            pass = p ;

        }

    } 
```

这是我得到的错误信息

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at fish.Login.jButton1ActionPerformed(Login.java:152)
    at fish.Login.access$000(Login.java:14)
    at fish.Login$1.actionPerformed(Login.java:59)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

感谢您的帮助：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:22:48.900

你在哪里得到 NULL 指针错误？

您应该对变量进行错误检查`con`，`stmt`并`rs`在它们的分配之后。另外，您的`while`循环似乎是错误的。首先，它似乎没有在场景中移动。另外，您确定条件返回`true`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:28:17.833

在 jButton1ActionPerformed 方法中，您使用未定义的“m”变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:31:33.323

我认为您忘记在`Login`类中初始化成员变量。我看不到任何要在构造函数中初始化的变量`m`。`c`

但是您必须发布整个代码才能正确查看。并标记您获得 NPE 的行。说它是 152 行真的对任何人都没有帮助......

# objective-c - FB SDK 3.1 集成中缺少请求 ID

> ID：13856553
> 
> 赞同：-1
> 
> 时间：2012-12-13T09:16:17.547
> 
> 标签：objective-c, ios, facebook

我正在开发 Facebook SDK 3.1。与本机 ios 应用程序集成。我面临与[此处](https://stackoverflow.com/questions/12853431/request-id-is-not-available-when-app-launches-after-clicking-facebook-notificati)发布的相同问题（即..我作为朋友收到通知。通过单击我导航到我的应用程序。但无法在目标 url 中获取请求 ID）

就像在上面的问题中回答的那样，我在我的 facebook 应用程序设置页面中设置了 mt APP_NAMESPACE。

我是否需要设置其他任何内容，或者我是否在我的 ios 应用程序的任何位置使用相同的名称空间。这是我的设置页面。 ![在此处输入图像描述](../Images/291bf76d5467abc2651320b06f2b4f71.png)

如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:00:30.267

APP_NAMESPACE 就足够了，正在为我工​​作

# google-chrome-extension - chrome扩展登录问题

> ID：13856554
> 
> 赞同：0
> 
> 时间：2012-12-13T09:16:16.880
> 
> 标签：google-chrome-extension

有一个网站，我为这个网站创建了一个chrome扩展，如果用户已经登录了这个网站，有没有什么办法让用户不需要再次登录chrome扩展？谁能帮帮我？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:33:05.470

首先：在您的背景页面中，添加一个带有 src="yoursitesurl" 的 iframe。然后将该 iframe 嵌入到背景页面的正文中。该文档可能没有“正文”，因此您可能还需要创建它。然后你可以将 iframe 添加到正文中。根据我的经验，在将 iframe 添加到正文之前，它不会加载。

第二：将以下内容添加到您的 manifest.json 中：

```
"content_scripts":[
    {
        "matches":["yoursiteurl.com"],
        "js":["content.js"],    
        "all_frames":true
    }
] 
```

然后创建“content.js”文件。它将在 iframe 中加载到您的网站中。在 content.js 中，您将编写 JavaScript 来从您的站点收集您需要的数据。然后你会将它传回后台页面。

第三：传回后台页面。要将数据从 content_script 传递到后台页面，请执行以下操作：

```
//In the content.js
chrome.extension.sendMessage(undefined,{data:<thedateyougather>});

//In your background page
chrome.extension.onMessage.addListener(function(message, sender){
    //in here you write the code that will display the data from your site.
}); 
```

在后台页面的 onMessage 侦听器中，您可以对站点中的数据执行任何操作。您可以将其保存到 localStorage。你可以提醒用户。您可以将其传递给 popup.html。我不确定一旦你有了数据你想做什么，所以这就是我停下来的地方，因为我不确定你接下来想做什么。

# javascript - OSS License 是为了“看但不要拿来和我们竞争”？

> ID：13856570
> 
> 赞同：2
> 
> 时间：2012-12-13T09:16:59.873
> 
> 标签：javascript, open-source

是否有一个众所周知的开源许可证允许我以社区可以阅读的方式开源一些关键任务代码，但同时会阻止竞争对手使用它来获得优势？

我会给你更多的上下文。我们正在开发一个相当复杂和严肃的业务分析工具，我们决定为此创建我们自己的内部 javascript MVC 框架。作为项目的一部分，我们还构建了一堆可重用的控件，它们与框架无缝集成，用于开关、表格、自动完成搜索框、导航控件等（想想 Cocoa 控件或 jQuery UI）。

我们希望在 Apache2 许可下向社区发布框架本身和控件，无论好坏，这是相当标准的东西。然而，这正是我要问的，我们还想展示我们的 SaaS 分析应用程序（为我们的业务提供动力并产生收入的应用程序）的来源，以展示如何构建复杂的企业应用程序我们框架的顶部，因为它有点像严格的概念证明/案例研究/演示。但是我们不希望竞争对手只是克隆存储库并将其部署在他们的服务器上并进行一些品牌重塑并开始窃取我们的客户。是否有众所周知的开源许可证可以促进这种类型的信息共享以造福社区，同时阻止竞争对手从中获得竞争优势？（我的意思很明显，我们的竞争对手可能会学到一两件事，这很好，但我们希望拥有法律权力，以防他们公然复制我们的部分代码并用它来与我们竞争；以及判断他们是否复制应由我们自行决定）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:22:16.500

我认为您应该查看 Microsoft[参考源许可证](http://referencesource.microsoft.com/referencesourcelicensing.aspx)..

Microsoft 使用 .NET 库完成了您在此处概述的工作。但与这些许可证问题一样：不要听信一群互联网陌生人的话——在做任何你可能会后悔的事情之前，请先咨询熟悉该主题的律师。

另外，附带说明一下：我非常喜欢 OSS 软件——不管你的竞争对手做什么，一旦他们有了你的资源，他们就可以公然抄袭你（如果你足够成功，他们会抄袭你的）。一旦发生这种情况，你就不得不花一大笔钱请律师来争取你的权利。尤其是当它是运营的核心时，我会将其标记为“竞争优势”，而不是向公众发布。这是您的 IP，一旦您将其提供给某人，任何人都可以简单地接受您的想法并用它编写自己的应用程序 - 世界上没有任何许可可以阻止这种情况（除了您可能没有的愚蠢专利）。

所以我的建议是稍等片刻，看看 MVC 库的结果如何。看看 Ruby on Rails。它是作为 Basecamp 的一部分在 37 Signals 开发的，但 Basecamp 源代码从未公开过，仅仅是因为没有必要。如果该框架有什么好的，人们会使用它，您将有机地获得示例应用程序。

拥有真实世界的示例很好，但特别是对于 JavaScript 框架，您应该致力于与后端完全无关 - 所以在后端运行 ASP.NET MVC 或 Rails 或 Node 并不重要。合乎逻辑的结果是您的图书馆用户对后端代码没有真正的兴趣。

They can see the library working on your site, that in itself should be enough to show useful usage patterns. If you take some parts out of your app and show them to users you'll be fine without the risk of lawyering to get to your rights..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:22:30.793

No. The purpose of any Open Source license is to give the code to the community to further develop, fork, or use for other purposes. The whole point of having a license is purely to prevent complete theft of code without attribution. If code that is claimed as original appears down the road can be proven to be based on your work, you have sufficient grounds for legal action.

The best way to demonstrate a proof of concept is to take discrete parts of your work as an overall demonstration of the value of the framework.

***But, I'm no lawyer so I would suggest that you consult with one before doing anything that might jeopardize your business or your job.***

# c# - 在不阻塞 UI 线程的情况下截取屏幕截图

> ID：13856574
> 
> 赞同：0
> 
> 时间：2012-12-13T09:17:20.223
> 
> 标签：c#, winforms

我有一些 c# 经验，但我是 WinForms 的新手。

我有一种方法可以将屏幕截图作为`BitMap`：

```
public Bitmap GetSreenshot() 
{
    Rectangle bounds = Screen.PrimaryScreen.Bounds;

    Bitmap bmp = new Bitmap(bounds.Width, bounds.Height,
        PixelFormat.Format32bppArgb);

    Graphics gfx = Graphics.FromImage(bmp);

    gfx.CopyFromScreen(bounds.X,
                                   bounds.Y,
                                   0,
                                   0,
                                   bounds.Size,
                                   CopyPixelOperation.SourceCopy);

    return bmp; 
} 
```

我的问题是我在一个间隔约为 100 毫秒的计时器中使用它。每次截取屏幕截图时，我都会注意到 UI 线程受到影响（移动表单时出现延迟等）。

有没有办法在另一个线程上生成屏幕截图，这样它就不会影响 UI？我读过一些关于的东西`BackgroundWorker`，这是要走的路吗？如果有人能在这里指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:29:23.570

从评论到回答：

后台工作人员是一种方法，但如果您可以使用 .NET 4.0，您也可以查看任务并行库（任务和任务<>）。.NET 4.5 还支持很有用的 async/await 模式。

[BackgroundWorker 的任务并行库替换？](https://stackoverflow.com/questions/3513432/task-parallel-library-replacement-for-backgroundworker)这个[http://msmvps.com/blogs/brunoboucard/archive/2010/11/06/parallel-programming-with-c-4-0-part-3.aspx](http://msmvps.com/blogs/brunoboucard/archive/2010/11/06/parallel-programming-with-c-4-0-part-3.aspx)将提供更多信息

# c# - 显示字符编码的文字控件

> ID：13856580
> 
> 赞同：0
> 
> 时间：2012-12-13T09:17:39.313
> 
> 标签：c#, asp.net

我在 asp.net 的文字控件中显示 html 实体时遇到问题。

在我将内容传递给文字控件之前，我将字符编码为例如`£`，`&pound;`但是当它显示在页面中时，它显示`&pound;`而不是`£`. 我检查了源代码，它没有对 html 实体进行编码，例如`&amppound;`，而是将其显示为纯文本。

我尝试`htmlencode`在后端删除并添加`mode="encode"`文字控件，但我得到了相同的结果。

有谁知道为什么会这样？

我知道我可以使用标签控件，但肯定有更好的方法吗？我不喜欢控件给出的 html 格式文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:38:34.490

给定一个文字，lt，你不应该 HtmlEncode，并设置

```
lt.Mode = LiteralMode.PassThrough;
lt.Text = "&pound"; 
```

或者

```
<asp:Literal runat="server" ID="lt" Mode="PassThrough">&pound;</asp:Literal> 
```

希望这会有所帮助

# c# - 字节类型的负值

> ID：13856581
> 
> 赞同：3
> 
> 时间：2012-12-13T09:17:44.350
> 
> 标签：c#

我刚刚开始在 C# 上苦苦挣扎，我有一个问题。

在以下代码中：

```
byte var = 0;
Console.WriteLine("{0}", ~var); 
```

为什么打印-1？从[http://www.csharp-station.com/Tutorial/CSharp/Lesson02](http://www.csharp-station.com/Tutorial/CSharp/Lesson02)我读到字节范围是从 0 到 255 和 ~(00000000)_2 给出 (11111111)_2 等于 (255)_10 .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T09:22:06.343

您正在打印的值不是 type `byte`。它是类型`int`。

（`~`按位非）运算符没有为 定义`byte`，但它是为`int`。您的代码有一个隐式扩大转换为`int`. 您的代码大致相当于使用显式强制转换的这个版本：

```
int temp = ~((int)var);
Console.WriteLine("{0}", temp); 
```

按位非运算符将位反转以给出结果`111....111`（以 2 为底）。[这在二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示中具有值 -1 。

* * *

如果您希望结果是值为 255 的字节，则必须添加显式强制转换：

```
byte x = 0;
byte result = (byte)~x; 
```

# java - Doclava - 如何生成版本化的 xml？

> ID：13856582
> 
> 赞同：4
> 
> 时间：2012-12-13T09:17:43.663
> 
> 标签：java, android, xml, documentation, javadoc

我正在将 Doclava 用于 android 文档。我想使用我需要在 ant 任务中设置[-since version.xml 名称的 API 版本控制功能。](https://code.google.com/p/doclava/wiki/CommandLineArguments#-since_version.xml__name)如何生成这些版本化的 xml 文件？[他们看起来像这样。](http://doclava.googlecode.com/svn/static/api/android-8.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T14:07:29.173

查看生成的文档。

转到reference/current.xml ..这是您要查找的xml

# java - 从我的代码中的 JAX-WS 注释更改 JBoss 生成的 WSDL 定义？

> ID：13856585
> 
> 赞同：1
> 
> 时间：2012-12-13T09:17:53.073
> 
> 标签：java, jboss, wsdl, definition

我正在使用 JbossWS 在 Java 中开发 Web 服务。

WS 很简单。像这样的东西：

```
@WebService(targetNamespace="http://www.huawei.com/schema/syncorder/v1-0/", name="SyncOrderRelationExt")
public interface ISyncOrderRelation {

  @WebMethod
  public int SyncOrderRelationExt(String SPID, String productID, String serviceID); 
```

和实施

```
@WebService(portName="SyncOrderRelationExtHttpPort", serviceName="SyncOrderRelationExt", targetNamespace="http://www.huawei.com/schema/syncorder/v1-0/")
    public class SyncOrderRelation implements ISyncOrderRelation
    {

       public int SyncOrderRelationExt(String SPID, String productID, String serviceID) 
       {
            return 0;
       }

    } 
```

一切似乎都工作正常.. 但现在从 .NET proyect 调用这个 WS，我必须做这样的事情：

```
 SyncOrderRelationExt syncNTS = new SyncOrderRelationExt();            

 var params= new SyncOrderRelationExt1()
 {
        arg1 = "a",
        arg2 = "b",
        arg3 = "c",               
 };

 var res = syncNTS.CallSyncOrderRelationExt(params);

 int x = res.@return; 
```

购买我想这样调用WS（要求）：

```
SyncOrderRelationExt sync = new SyncOrderRelationExt(); 

int res2 =  sync.CallSyncOrderRelationExt("a", "b", "c"); 
```

有什么方法可以更改 Java 中的定义以使客户端调用不同？

非常感谢您提前。

# jquery - 可拖动溢出

> ID：13856593
> 
> 赞同：3
> 
> 时间：2012-12-13T09:18:24.227
> 
> 标签：jquery, jquery-ui, css

请帮忙，我想让那个绿色框可以拖到它的父级中，但它也可以从它的父级溢出，并且当它（绿色框）移动或拖过线时会被隐藏。有人能帮我吗？

Javascript：

```
$(document).ready(function() {
  $("#child").draggable({
    containment: 'parent'
  });
}); 
```

HTML：

```
<div id="parent">
    <div id="child"></div>
</div> 
```

请帮忙，这里的小提琴例如：http: [//jsfiddle.net/vbJHJ/9/](http://jsfiddle.net/vbJHJ/9/)

我读了[http://api.jqueryui.com/draggable/](http://api.jqueryui.com/draggable/)但没有什么可以帮助我.. :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:17:09.290

你把事情复杂化了。亲吻它。取消遏制并将 ​​css 溢出添加到父级。

JS：

```
$(document).ready(function() {
    $("#child").draggable();
});​ 
```

CSS：

```
#parent{
    width:300px; height: 300px; border: 1px solid #ccc; overflow: hidden;
}

#child{
    width: 50px; height: 50px; background: #00ff00;
}​ 
```

HTML：

```
<div id="parent">
    <div id="child">
    </div>
</div> 
```

​</p>

[演示](http://jsfiddle.net/vbJHJ/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:27:02.487

**有史以来最好的解决方案：** 你说如果移动到线上，你想制作隐藏的盒子，使用这个并投票：

```
$(document).ready(function() {
$("#child").draggable({
drag : function() {
var bT = $("#parent").offset().top;
var bL = $("#parent").offset().left;
var bLL = bL+$("#parent").width()-$(this).width();
var bTT = bT+$("#parent").height()-$(this).height();
var m = $(this).offset();
if( m.top < bT || m.left < bL || m.left > bLL || m.top > bTT) {
$(this).css({ "opacity" : "0.1" });  
}
else {
$(this).css({ "opacity" : "1" });
}
}
});
});​ 
```

# javascript - 为什么 [] === [] （和其他）在 javascript 中返回 false？

> ID：13856597
> 
> 赞同：5
> 
> 时间：2012-12-13T09:18:28.193
> 
> 标签：javascript, casting, comparison

以下比较都`false`在 javascript 中返回：

```
[]===[]
[]==[]
{}==={}
{}=={} 
[0]===[0]
[0]==[0] 
```

但是以下返回`true`：

```
[0]=='0'
[0]==0
[]==false //(and all other == that were exampled above) 
```

这是什么原因？`[0]!=[0]`尤其是和之间的区别`[0]==0`

小提琴：http: [//jsfiddle.net/vnBVj/](http://jsfiddle.net/vnBVj/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T09:25:03.280

这是由于令人困惑的规则，javascript 如何进行类型强制。[您可以在EcmaScript](http://es5.github.com/#x11.9.3) 5 规范的第 11.9.3节中了解这一点。

两个对象（数组也是）永远不相等，因此您在第一个块中的所有比较都会产生错误（§11.9.3.1.c.vi）

第二块更难：

首先要知道的是，它`==`使用类型强制来比较操作数。

当比较涉及布尔值时，首先将其强制为一个数字。

```
[]==false
[]==0 
```

之后，通过调用将对象强制为其原始值`Object.prototype.toString`

```
"" == 0 
```

然后字符串被强制转换为一个数字（`""`变成`0`）

```
0 == 0 
```

产生真实。通过应用相同的规则，您可以看到为什么您的其他示例也为真。

请注意，这`===`永远不会导致类型强制，而是首先检查正确的类型，如果它们不相等则返回 false！只有当类型相等时，它才会比较实际值。所以这种比较方法远比`==`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T09:24:36.073

产生的所有示例都`false`可以很容易地解释为，如果您正在比较对象（并且数组是特殊对象），JavaScript 将比较**对象引用**。当您使用所有这些比较创建新对象时，所有对象都将指向不同的对象，因此结果将为`false`.

至于`[0]=='0'`：只要一个操作数是字符串，另一个操作数也会转换为字符串。`[0]`is的字符串转换`'0'`，因此结果为真。

一个操作数是数字或布尔值也是如此，这解释了最后两次比较的结果。

有关更多信息，请查看[相应的 MDN 页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)。

引用重要部分：

> **相等 (==)**
> 
> 如果两个操作数的类型不同，JavaScript 会转换操作数，然后应用严格比较。如果任一操作数是数字或布尔值，则尽可能将操作数转换为数字；否则，如果任一操作数是字符串，则尽可能将另一个操作数转换为字符串。如果两个操作数都是对象，那么当操作数引用内存中的同一个对象时，JavaScript 会比较相等的内部引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T09:25:55.580

当您使用 litteral 数组/对象初始化时，即使它是空的，您也会创建一个新对象并返回它的引用。所以当你比较它们时，你比较的是你创建的对象的引用值。

您的其他示例返回 true，因为您正在比较不同类型的变量，因此，对象/数组被转换为可与它们进行比较。

# c# - 类型自省 - 获取属性或字段信息

> ID：13856601
> 
> 赞同：1
> 
> 时间：2012-12-13T09:18:48.947
> 
> 标签：c#, .net, polymorphism, system.reflection

如果您确实需要获取所需信息，例如 a`field`或`propertie`s `values`/ `names`，

你怎么能**不**使用`System.Reflection`呢？

```
public class anyClass
{
    public const string UserID  = "usrID",
                        UserName = "usrName";
} 
```

所以它发生了，因为我真的很想知道是否可以避免使用`reflection`，

我进行了一些研究，在我看来，我的*使命*的正确术语是

**[类型自省](http://en.wikipedia.org/wiki/Type_introspection)** [（此处不存在**专用标签**`SO`）]

`Introspection`不应与`reflection`,

这更进一步，是程序操纵值的能力，

元数据，`properties`和/或运行时`functions`的。`object`

通过使用系统反射，我可以访问`Fields`- `values`，如本示例代码所示：

```
 var ac = new anyClass();
    public List<string> anyClassFieldsValuesList()
    {
      // sorry this was the one for the class above
      return typeof(anyClass).GetFields()
                     .Select(f =>f.GetValue(ac).ToString()).ToList<string>();

     // this would do for nested class
     // return typeof(anyClass).GetNestedTypes()
                    .First(t => String.Compare(t.Name, "anyNested", true) == 0)
                    .GetFields()
                    .Select(f => f.GetValue(ac).ToString())
                    .ToList<string>();
    } 
```

.net 是否为我们提供了使用工具或其他方法以更*便宜*的方式获取信息的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:30:42.417

*对昂贵*的强调表明性能是您的主要关注点。如果是这样的话，有一些库可以通过缓存元数据和元编程来消除反射的开销。但他们的意图往往非常具体。

例如，[FastMember](http://nuget.org/packages/FastMember)将有助于了解存在哪些成员，并允许访问它们的值（没有通常相关的反射开销），*但是*：它对这一点没有帮助`GetNestedTypes`。

例如，要根据`ac`实际*情况*从给定对象中获取所有值：

```
// requires FastMember
var accessor = TypeAccessor.Create(ac.GetType());
var values = accessor.GetMembers()
        .Select(member => accessor[ac, member.Name]).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:29:36.643

看起来你需要 [动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)类型

# iphone - 在 iOS 中使用 openCV 拼接两个图像

> ID：13856607
> 
> 赞同：0
> 
> 时间：2012-12-13T09:19:09.810
> 
> 标签：iphone, ios, image, opencv

我想在 iOS 中拼接几张图片。所以我使用了openCV框架。这是我的代码。但我有错误..

/Volumes/WORK/Panogram/Panogram/Frameworks/OpenCV.framework/Headers/opencv2/stitching/warpers.hpp:46:10: 'detail/warpers.hpp' 文件未找到

我希望有人帮助我如何在 iOS 中使用 openCV 进行图像拼接。我认为我的框架有问题。如果有人和我做过类似的工作，请帮助我。

```
#import <OpenCV/opencv2/opencv.hpp>
#import "UIImage+OpenCV.h"
#import <OpenCV/opencv2/stitching/stitcher.hpp>

@interface TakePhotoViewController ()

@end

@implementation TakePhotoViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    UIImage* testImg1 = [UIImage imageNamed:@"002.jpg"];
    UIImage* testImg2 = [UIImage imageNamed:@"003.jpg"];

    cv::vector<cv::Mat> images;

    images.push_back([testImg1 CVMat]);
    images.push_back([testImg2 CVMat]);

    Stitcher stitcher = Stitcher::createDefault(YES);

    Stitcher::Status st1 = stitcher.stitch(images, imgResult);
    /////////add image to uiimageview
    UIImage *image=  [self UIImageFromCVMat:imgResult];
    imgView.image=image;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:45:24.540

我过去也有同样的问题。我只是在目录中创建了一个名为“detail”的文件夹，并将 warpers.hpp 复制到该文件夹​​中。您的系统可能在目录中没有“detail”文件夹，或者当它需要在文件夹中时，warpers.hpp 与 detail 文件夹位于同一目录中。

# c# - 优化递归 XML 构建

> ID：13856614
> 
> 赞同：0
> 
> 时间：2012-12-13T09:19:17.287
> 
> 标签：c#, xml, linq-to-xml

我编写了一些代码来递归地构建 XML，除了一件事，它不是那么通用之外，它按预期工作得非常好。

数组是

```
string[] countries= string[]{ ..... } 
```

我的想法是，如果一个数组只包含 1 个字符串而不是它应该是：

```
<Where>
  <Eq>
    <FieldRef />
    <Value />
  </Eq>
</Where> 
```

如果有多个，则它应该包含`<OR>`，但是对于最后一个字符串值应该在同一个 OR 中：所以基本上它对于 4 个项目来说是这样的：

```
<Where>
  <Or>
    <Eq>
      <FieldRef Name="Title" />
      <Value Type="Text">Canada</Value>
    </Eq>
    <Or>
      <Eq>
        <FieldRef Name="Title" />
        <Value Type="Text">New Zealand</Value>
      </Eq>
      <Or>
        <Eq>
          <FieldRef Name="Title" />
          <Value Type="Text">United States</Value>
        </Eq>
        <Eq>
          <FieldRef Name="Title" />
          <Value Type="Text">Switzerland</Value>
        </Eq>
      </Or>
    </Or>
  </Or>
</Where> 
```

一切都是嵌套的。

这是我的代码，它适用于多数组，但不适用于单个结果：

```
private XElement Recursion(XElement parentElement, int counter)

    {
        if (counter == 0)
        { 
            return parentElement;
        }

        XElement orElement = new XElement("Or");
        XElement eqElement = new XElement("Eq");

        XElement fieldElement = new XElement("FieldRef");
        XAttribute nameAttribute = new XAttribute("Name", "Title");
        fieldElement.Add(nameAttribute);

        XElement valueElement = new XElement("Value", Countries[counter]);
        XAttribute typeAttribute = new XAttribute("Type", "Text");
        valueElement.Add(typeAttribute);

        eqElement.Add(fieldElement);
        eqElement.Add(valueElement);

        orElement.Add(eqElement);

        if (counter == 1)
        {
            eqElement = new XElement("Eq");
            valueElement = new XElement("Value", Countries[0]);
            valueElement.Add(typeAttribute);

            eqElement.Add(fieldElement);
            eqElement.Add(valueElement);

            orElement.Add(eqElement);
        }

         XElement lastOrElement = parentElement.Descendants("Or").FirstOrDefault(or => !or.Descendants("Or").Any());
        if (lastOrElement == null)
        {
            parentElement.Add(orElement);
        }
        else
        {
            lastOrElement.Add(orElement);
        }

        return Recursion(parentElement, --counter);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:34:05.623

`counter`如果这是第一次进入该函数，则需要测试何时为 1。

可能最简单的方法是更改​​您的`if (counter==1)`块以测试传递的父元素是否为空（或不包含任何其他`<OR>`元素（不清楚您如何首先调用此函数以及何时`<where>`添加元素。

尝试类似：

```
if (counter == 1)
{
    if (!parentElement.Descendant("Or").Any())
    {
        //Single array case
        return eqElement;
    }

    // Not single array case, code as before....
    eqElement = new XElement("Eq");
    ... 
```

# http - SPDY 协议是否消除了对无 cookie 域的需求？

> ID：13856616
> 
> 赞同：1
> 
> 时间：2012-12-13T09:19:18.243
> 
> 标签：http, cookies, http-headers, spdy

使用纯 HTTP，无 cookie 域是一种优化，可避免为页面资源发送不必要的 cookie 标头。

但是，SPDY 协议会压缩 HTTP 标头，并且在某些情况下会消除不必要的标头。那么我的问题是，SPDY 是否使无 cookie 域无关紧要？

此外，是否应该将页面源及其所有资源托管在同一域中以优化 SPDY 实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T08:39:52.507

> SPDY 是否使无 cookie 域无关紧要？

有点，主要是……但不完全是。

首先，使用“无cookie域”至少有两个很好的理由：一是避免额外的标头并减小请求的大小，二是避免泄露任何有关用户的私人或安全信息。每个都是有效的，彼此独立。因此，显然仍然有理由在 HTTP 2.0 下拥有一个“无 cookie 域”以确保安全和隐私。

此外，压缩也不是灵丹妙药。建立压缩/解压缩上下文不是免费的，并且根据使用的压缩方案、分配的缓冲区大小等，大 cookie 可能会完全破坏压缩器的性能。在 spdy/v3 之前，使用了 gzip 压缩器（滑动窗口），并且给定足够大的 cookie，您*将对*压缩器的性能产生负面影响（程度因浏览器而异，基于实现）。在 spdy/v4 中，gzip 压缩器已经过时，并且正在从头开始实施一种全新的算法——由于 v4 还没有出现，现在推测性能细节还为时过早。话虽如此，在大多数情况下，你应该没问题。我只是强调边缘情况。

> 此外，是否应该将页面源及其所有资源托管在同一域中以优化 SPDY 实现？

是的，在可能的范围内——这会给你最好的表现。这里也有一些警告：原始服务器的高数据包丢失，或者没有窗口缩放的高 BDP 产品。但是很有可能，如果您使用的是具有良好连接性的合理托管服务提供商，那么这些都不是问题。

# iphone - 在 ios 中集成 facebook 时出现 sqlite 错误

> ID：13856617
> 
> 赞同：0
> 
> 时间：2012-12-13T09:19:23.863
> 
> 标签：iphone, xcode, facebook-login

我正在我的应用程序中集成 Facebook 登录。通过链接 [Facebook 开发人员](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/) 但是当我编译时出现以下错误：

```
Undefined symbols for architecture i386:

"_sqlite3_bind_double", referenced from:
  -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_bind_int", referenced from:
  -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_bind_text", referenced from:
  -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _readEntriesFromDatabase:excludingFragment:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_close", referenced from:
  ___23-[FBCacheIndex dealloc]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)   "_sqlite3_column_double", referenced from:
  -[FBCacheIndex _createCacheEntityInfo:] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_column_int", referenced from:
  -[FBCacheIndex _createCacheEntityInfo:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_column_text", referenced from:
  -[FBCacheIndex _createCacheEntityInfo:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)   "_sqlite3_errmsg", referenced from:
  _releaseStatement in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
  _initializeStatement in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
  -[FBCacheIndex _readEntriesFromDatabase:excludingFragment:] in  FacebookSDK(FBCacheIndex.o)
   -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
   ...   "_sqlite3_exec", referenced from:
   ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)   "_sqlite3_finalize", referenced from:
   _releaseStatement in FacebookSDK(FBCacheIndex.o)   "_sqlite3_open_v2", referenced from:
   ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)   "_sqlite3_prepare_v2", referenced from:
   _initializeStatement in FacebookSDK(FBCacheIndex.o)   "_sqlite3_reset", referenced from:
   _initializeStatement in FacebookSDK(FBCacheIndex.o)   "_sqlite3_step", referenced from:
   -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
   -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
   -[FBCacheIndex _createCacheEntityInfo:] in FacebookSDK(FBCacheIndex.o)
   -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
   -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)
   -[FBCacheIndex _dropTrimmingTable] in FacebookSDK(FBCacheIndex.o)
   -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
   ... ld: symbol(s) not found for architecture i386 
```

我还在项目的“*构建设置”选项卡的**其他链接标志*中添加了`-Isqlite3.0`参考，但仍然出现错误。我究竟做错了什么？将 XCode 4.5 与 iOS6 一起使用。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:27:14.160

您还必须将您的应用程序链接到 sqlite 库或 CoreData.framework，具体取决于他们的文档说明需要什么。**

# python - Python 请求和 TLS Lite

> ID：13856618
> 
> 赞同：1
> 
> 时间：2012-12-13T09:19:25.707
> 
> 标签：python, python-requests

有没有人有将 Python 请求 (http://docs.python-requests.org/en/latest/) 与 TLS Lite (https://github.com/trevp/tlslite) 结合起来的经验？TLS Lite 有 HTTPTLSConnection 类可以与 HTTPS 一起使用，但我有很多用 Requests 编写的代码，并且非常希望重用它。

# php - 测试 Liberty Reserve 购物车界面

> ID：13856622
> 
> 赞同：0
> 
> 时间：2012-12-13T09:19:41.723
> 
> 标签：php, payment-gateway

如何测试 Liberty Reserve 购物车界面 (sci)。他们没有像贝宝这样的沙盒。我已经创建了用于付款的 php 脚本。我认为我们需要另一个自由储备账户来测试付款。即，一个帐户用于接受付款，另一个帐户用于付款。有没有其他方法可以测试脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:02:51.317

我与他们的代表聊天，他们不提供任何测试帐户。我们需要另一个自由储备账户进行测试。

# javascript - 在没有计数器的情况下对列表进行排序

> ID：13856625
> 
> 赞同：0
> 
> 时间：2012-12-13T09:19:46.613
> 
> 标签：javascript, html, sorting

这目前只是概念性的，但它困扰着我的大脑。

如果我有一个项目列表——在我看来这是一个 HTML/JS 实现，但这只是因为我是一个视觉思考者；）

我想使用拖放对这个列表进行排序，目的是在完成后存储新订单。有没有办法做到这一点而不给项目编号，然后更新丢弃项目的数量+它后面的每个项目？这不是非常低效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:25:26.640

就性能而言，更改元素的编号与实际渲染过渡无关（当您拖动元素时），所以不，它不是低效的。

您可以使用[双向链表](http://en.wikipedia.org/wiki/Doubly_linked_list)来最小化更改集合顺序所需的操作量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:26:01.643

我建议使用 JavaScript 框架来完成这项工作。

[KnockoutJS](http://knockoutjs.com/)应该满足您的需求（来自网站）：

> Knockout 是一个 JavaScript 库，可帮助您使用干净的底层数据模型创建丰富的响应式显示和编辑器用户界面。任何时候您的 UI 部分都可以动态更新（例如，根据用户的操作或外部数据源发生更改），KO 可以帮助您更简单和可维护地实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:25:11.667

如果你在数字中留下空白，你可能会有效地做到这一点——例如，让第一个元素为 10，第二个为 20，第三个为 30，等等。然后当你在第二个之前和之后拖动一些东西时第一个，称之为15（或其他）。

与其每次都增加数字，不如只在空间不足时才这样做。最后，您可以按最低编号对对象进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:27:12.313

这里不包括任何代码，因为这是一个概念性问题。
无论如何，列表中的每个元素都必须有一个数字，因为它们之间必须有一个[总排序](http://en.wikipedia.org/wiki/Total_order)才能表示为列表。
如果您不希望列表中的元素数量很大，那么[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)应该非常适合您。

# encoding - Base64 到应用程序/八位字节流

> ID：13856628
> 
> 赞同：1
> 
> 时间：2012-12-13T09:19:54.400
> 
> 标签：encoding, base64

这听起来很天真，但我需要找到一种非常快速的方法来将 base64 编码文件解码为二进制文件，特别是内容类型到八位字节流文件。一个linux命令或类似的东西就可以了。我已经在 Stack Overflow 内部进行了谷歌搜索和搜索，但似乎找不到任何具体的东西。

# azure - 在 Azure 上检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂

> ID：13856630
> 
> 赞同：1
> 
> 时间：2012-12-13T09:19:53.773
> 
> 标签：azure

我在 Azure 上上传了一个应用程序。此应用程序允许用户将 excel 文件上传到底层数据库。

应用程序的上传 excel 部分使用 Microsoft 互操作性和代码的 excel COM 组件。

但是，上传excel文件时出现错误

> 由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

请问在 Windows Azure 上托管应用程序时我能做些什么来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T12:45:39.020

你能检查一下这里提到的任何解决方案 - [Retrieving the COM class factory for component failed](https://stackoverflow.com/questions/881132/retrieving-the-com-class-factory-for-component-failed)工作吗？

很可能您需要创建此文件夹 - C:\Windows\SysWOW64\config\systemprofile\Desktop 并且一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:27:55.580

这是因为 Excel 未安装在您的 Web 角色/工作者角色/网站/虚拟机上。使您的代码工作的唯一方法是在您的 Web 角色/工作者角色/虚拟机上安装 Excel，但这是您不应该做[的事情（阅读 KB](http://support.microsoft.com/kb/257757)）。

考虑使用 OpenXML 处理 Excel 文件： http://nuget.org/packages?q= [openxml](http://nuget.org/packages?q=openxml)

# c# - 如何在 c# 中验证十进制值 0.00 的 DataGridView

> ID：13856632
> 
> 赞同：-1
> 
> 时间：2012-12-13T09:20:02.777
> 
> 标签：c#, datagridview

我正在验证我的文本框是否允许十进制值广告 12.00、12.50。我的代码是

```
double x;
double.TryParse(tb.Text, out x);
tb.Text = x.ToString("0.00"); 
```

它离开时会在文本框中添加小数位。因此，我想将 .00 添加到我的特定单元格的数据网格视图单元格中。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:31:00.343

`DataGridView`我认为您需要在单元格中显示最多 2 位小数的值

您可以尝试将列的 DefaultCellStyle 属性设置为`N2`（2 位小数）

```
dataGridView1.Columns["YourColumn"].DefaultCellStyle.Format = "N2"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:28:39.283

```
private void dataGridView2_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
   {
       if (this.dataGridView2.Columns[e.ColumnIndex].Name == "Aidat")
       {
          string deger=(string)e.Value;
          deger = String.Format("{0:0.00}", deger);
       }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T12:11:49.947

谢谢我用`dataGridView1.Columns["YourColumn"].DefaultCellStyle.Format = "N";` 这个很好而且工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T17:01:17.890

上面的答案已经足够好了，但是您也可以为相同的任务设计自己的函数，下面的函数会将 23 转换为 23.00 ， 23.0 到 23.00 ， 23\. 到 23.00 ， 23.1 到 23.10 和 23.11 将保持原样，它是只是一个解释逻辑的例子

//此函数用于将浮点值格式化为小数点后两位

```
 private string fn_decimal_formatting(float val)
    {
        String str = val.ToString();
        int pos = str.IndexOf('.');
        if (pos == -1) //IndexOf returns negative one if . does not found in the string
            str += ".00";
        else if (str.Length == pos + 1)
            str += "00";
        else if (str.Length == pos + 2)
            str += "0";
        else
        {
            int start = 0;
            int end = pos + 2;
            str = str.Substring(start, end + 1);
        }
        return str;            
    } 
```

# publish-subscribe - 慢速订阅者

> ID：13856638
> 
> 赞同：1
> 
> 时间：2012-12-13T09:20:33.450
> 
> 标签：publish-subscribe, zeromq

我是 ZMQ ZMQ 版本的新手 - 2.2.1 Ubuntu - 10.04 我正在使用 PUB-SUB 模式在多个发布者和多个订阅者之间进行通信。转发器用于从多个发布者订阅数据，并将相同的数据发布给所有订阅者。目前，如果三个发布者正在运行，并且每个发布者在 1 秒内通过 PUB 通道发送 1000 条消息。订阅者每 1 秒接收数据、存储数据并写入数据库。由于数据库的参与，订阅者接收数据的速度有所延迟，导致内存使用量（RAM）每1秒增加6-7MB。最后，由于OOM，订阅者被操作系统杀死，我尝试在转发器的两个套接字上使用选项 ZWQ_HWM 和 ZMQ_SWAP。但问题仍然存在。有什么解决办法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:49:13.107

总的来说，您的问题是您的数据库无法跟上您的发布者。0MQ 无法为您解决这个问题。您需要一个基于更改系统行为的架构解决方案，大概是您执行插入的方式。

你有几个选择：

*   使用更快的数据库
*   使用更快的数据库插入方法
*   写入由另一个进程异步处理的日志
*   更改为让接收者告诉发送者他们已备份的套接字模式，因此发送者暂停（如果可能的话）

我认为在您的情况下，spool-to-disk-file 选项是最好的。

# php - mysql_real_escape_string 未定义

> ID：13856639
> 
> 赞同：12
> 
> 时间：2012-12-13T09:20:42.253
> 
> 标签：php, mysql, ubuntu

我正在使用 PHP 5.3 版并尝试`mysql_real_escape_string($unescaped_string)`在我的代码中使用，但出现错误：

```
Fatal error: Call to undefined function mysql_real_escape_string() 
in /var/www/engine/database.php on line 38 
```

但是，我仍然可以连接到数据库。为什么不可用？

我正在使用 PHP 5.3 版。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-13T09:24:07.340

**[评论](https://stackoverflow.com/questions/13856639/mysql-real-escape-string-is-undefined/13856694?noredirect=1#comment58761215_13856694)中提到的**更新**，[自 5.5 起](https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7#extmysql)`mysql_`已被弃用：**

 **> 自 PHP 5.5 起，mysql 扩展已被弃用。应使用 mysqli 或 PDO 扩展名。已在[mysql_deprecation](https://wiki.php.net/rfc/mysql_deprecation)中决定弃用，其中可以找到有关此决定背后原因的讨论。

并**在 PHP 7 中删除**。

* * *

`mysql_real_escape_string()`是[MySQL 函数 "batch"](http://php.net/manual/en/ref.mysql.php)的标准部分，如果正确加载了扩展，它应该始终工作。

有没有其他`mysql_`功能起作用？（不应该）

确保您在以下代码中未注释此行`php.ini`：

```
extension=mysql.so 
```

此外，明智的做法是使用[`mysqli`](http://php.net/manual/en/book.mysqli.php)或[`PDO`](http://php.net/manual/en/book.pdo.php)代替（[`mysql_`已弃用](http://news.php.net/php.internals/53799)），它们都可以为您处理逃生问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-04-02T10:14:00.980

在我的情况下，我使用`mysqli_real_escape_string`而不是`mysql_real_escape_string`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-24T08:49:05.690

有趣的是，在这里探索了所有其他解决方案之后，我意识到问题实际上是由于`php5-mysql`尚未安装扩展程序 - 默认情况下它没有安装在新的 Ubuntu 上，当你安装新的 php 时也没有安装。所以，对我来说，解决方案变成了：安装 php5-mysql 扩展：

```
sudo apt-get install php5-mysql 
```

在此之后，我没有再遇到那些讨厌的 mysql_* 错误；-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:32:41.407

也许您的问题存在于 php 服务器配置（编译）中。

这里有关 mysql_real_escape_string 的更多信息： [http ://www.php.net/manual/en/function.mysql-real-escape-string.php](http://www.php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-21T13:15:53.700

自 PHP 5.5 起不推荐使用 MySQL 扩展。因此 mysql_real_escape_string() 在 PHP 7 中不可用。这意味着用户输入无法正确转义，并使代码容易受到 SQL 注入攻击。

PHP 官方的解决方案是[将 ext/mysql 替换为 MySQLi、PDO](https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7)或其他支持的数据库扩展。

为防止 SQL 注入攻击，建议在与数据库对话时使用[准备好的语句和参数化查询。](https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php)**

# python - 使用 xpath 获取当前元素内的元素

> ID：13856643
> 
> 赞同：5
> 
> 时间：2012-12-13T09:20:57.683
> 
> 标签：python, xpath, selenium, webdriver, selenium-webdriver

我有多个问题，其中有多个选项。

选择所需的问题元素作为 question_element 后

我无法获取此元素内的第一个文本框。我用了

```
question_element.find_elements_by_xpath("//textarea") 
```

但它给了我整个网页中带有标签 textarea 的所有元素的列表。我试过

```
question_element.find_elements_by_xpath("/textarea")
question_element.find_elements_by_xpath("./textarea") 
```

但他们没有给出任何结果。如何在 question_element 中获取带有标签名称 textarea 的第一个元素

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T13:12:59.210

有两种变体可用于在已找到的元素中进行搜索（而不是在整个页面中）：

```
question_element.find_elements_by_xpath(".//textarea") 
```

或者

```
question_element.find_elements_by_xpath("textarea") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:21:00.620

像这样试试

```
question_element.find_elements_by_xpath("//textarea[position()=1]") 
```

# python - Python：使用 eval 按名称调用类和类方法

> ID：13856644
> 
> 赞同：1
> 
> 时间：2012-12-13T09:20:59.403
> 
> 标签：python, dynamic, reflection, python-2.6

```
class Test:
 @staticmethod
   def call():
     return
 def callMethod1():
    return
 def callMethod2():
    return
var methodName='Method1' 
```

我想调用`callMethod1`或`callMethod2`在 call() 中使用`"call"+methodName()`. 即，在 php 中，我们确实使用 T 调用任何成员`est->{"call".methodName}()`我如何在没有 eval() 方法的情况下在 python 中实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:31:16.597

```
class Test:
   @staticmethod
   def call(method):
      getattr(Test, method)()

   @staticmethod
   def method1():
      print('method1')

   @staticmethod
   def method2():
      print('method2')

Test.call("method1") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:30:29.823

您可以`getattr`在类上使用来获取方法。我不确定如何将它准确地集成到您的代码中，但也许这个示例会有所帮助：

```
def invoke(obj, methodSuffix):
    getattr(obj, 'call' + methodSuffix)()

x = Test()
invoke(x, 'Method1') 
```

但是您必须首先将`self`其作为第一个参数添加到您的方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:31:32.247

您应该清理示例代码，缩进被破坏并且您没有`self`方法。

使用`getattr(self, "call"+methodName)()`. 此外，该`call`方法不应该是静态方法，因为它需要访问该类来调用其他方法。

```
class Test:
    def __init__(self, methodName):
        self.methodName = methodName

    def call(self):
        return getattr(self, "call" + self.methodName, "defaultMethod")()

    def callMethod1(self): pass
    def callMethod2(self): pass
    def defaultMethod(self): pass

t = Test("Method1")
t.call() 
```

# io - Cassandra 没有从 ssttable 读取数据

> ID：13856645
> 
> 赞同：1
> 
> 时间：2012-12-13T09:21:14.483
> 
> 标签：io, cassandra, ycsb

使用 YCSB 并使用工作负载 c(read100%) 测试 cassandra。iostat 在读取时总是显示 0。

配置：

数据在 sdb 上，24G 数据，8G 堆大小，默认内存表大小，禁用行缓存和键缓存。

正如我的想法，统一请求会导致memtable丢失，并在ssttable上查找数据，因此数据dir iostat不应为零。8G heap 的 memtable 怎么能存储所有 24G 的数据？

有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:20:34.953

机器上的总内存是多少？如果您的机器上有 32GB 或更多的 RAM，那么它也可能是操作系统页面缓存 - 它位于 Cassandra 进程之外（例如，不是堆）。在这样的场景中，操作系统（假设它的 linux）最终会将整个 24GB 缓存在内存中，并且您将获得很少的磁盘活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:37:02.187

这里没有魔法。您的请求工作量不能像您想象的那样随机。

我碰巧签出了一份 YCSB 副本，并且工作负载c 使用了不统一的 requestdistribution=zipfian。

# java - 向 servlet 发送第二个查询参数

> ID：13856648
> 
> 赞同：0
> 
> 时间：2012-12-13T09:21:26.643
> 
> 标签：java, jakarta-ee, query-parameters

在我的网络应用程序中，客户端 ping 服务器*（尝试联系服务器上的 ping servlet）*，其中 servlet 的地址/资源定位器是：

```
"192.168.43.187/server/ping?" + new ClientAddress().getNetworkIP(); 
```

到目前为止，客户端一直在通过每次 ping 将其网络 IP 发送到服务器。我想用这个 URL 添加另一条信息，即`new GregorianCalendar().getTimeInMillis();`.

我如何发送*这个*？

***笔记 ：***

在 URL 中，***ping***是一个 servlet

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:22:42.150

```
"192.168.43.187/server/ping?ip=" + new ClientAddress().getNetworkIP() + 
    "&time=" + new GregorianCalendar().getTimeInMillis(); 
```

您需要更改“ping”servlet 才能读取这些参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:23:55.173

我会这样构建 URL：

```
"192.168.43.187/server/ping?ip=" + (new ClientAddress().getNetworkIP()) + "&time=" + (new GregorianCalendar().getTimeInMillis()); 
```

并使用 servlet 请求方法[ServletRequest.getParameter()](http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)提取值。

请注意[ServletRequest.getRemoteAddr()](http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletRequest.html#getRemoteAddr%28%29)为您提供客户端地址。你需要明确地传递它吗？此外，在这种简单的场景中，通过字符串连接构建 URL 是可行的，但是一旦您传递包含空格等字符的值，您就需要[对这些值进行编码](https://stackoverflow.com/questions/5330104/encoding-url-query-parameters-in-java)。

# facebook-opengraph - 单击仪表板上的对象类型时返回空白页

> ID：13856654
> 
> 赞同：1
> 
> 时间：2012-12-13T09:21:44.237
> 
> 标签：facebook-opengraph

在 OpenGraph 仪表板上，当我单击 Onjects 以查看其属性时，它向我显示了一个白页（一个空白页）。

是因为我在 Graph-API-Explorer 中对测试 APP 提出了很多要求吗？我们的请求数量是否有限？

我尝试在 Facebook 上创建另一个 APP 并在那里定义一些 Opengraph 对象。相同的！！！我可以创建对象，但在单击对象时看不到它们的属性！！！

谢谢

# text - VHDL - 在 7 段显示器上滚动文本

> ID：13856657
> 
> 赞同：1
> 
> 时间：2012-12-13T09:21:48.837
> 
> 标签：text, scroll, vhdl, shift, segment

我的项目即将结束，但在某个时候卡住了。我无法解决问题

在确定 VHDL 很难移动数组的索引后，我决定更改我的移位器模块。现在它可以正确编译并且 RTL 原理图似乎是正确的，但不幸的是我使用了一种相当非创新的方式来移动扫描码。

我定义了一个 64 位 std_logic_vector，它最多可以容纳 8 个扫描码，然后解析该向量的 4 个 MSBmost 字节，并将它们定向到七段控制器，该控制器对输入进行多路复用并决定将启用哪七段。我在想我的时钟有问题，但在显示屏上看不到任何东西让我认为设备的某些部分出现故障。我确信我的键盘控制器工作正常，因为我单独尝试过，移位器看起来也很好（我也在 FPGA 上尝试过这个，但没有减慢时钟，但我仍然能够看到我输入的最后一个扫描码），我还没有想过尝试 7 段控制器的任何方式/方法，但这似乎也很好。我不知道问题是什么，文本没有滚动:(

![顶部模块](../Images/82095eeb24ec2714edf0749473c22001.png)

移位器.vhd

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;
use IEEE.numeric_std.all;

entity my_shifter is
        port(clk      : in  std_logic;
                Scan_Dav : in  std_logic;
                Data_in  : in  std_logic_vector (7 downto 0);
                O1 : out std_logic_vector(7 downto 0);
                O2 : out std_logic_vector(7 downto 0);
                O3 : out std_logic_vector(7 downto 0);
                O4 : out std_logic_vector(7 downto 0)
                );
end my_shifter;

architecture bhv of my_shifter is

signal bytes : std_logic_vector(63 downto 0);
begin
    process (clk) begin
        if rising_edge(clk) then
                if Scan_Dav = '1' then
                    bytes <= bytes (bytes'high-8 downto 0) & Data_in;
                end if;
          end if;
    end process;
     O1 <= bytes(63 downto 56);
     O2 <= bytes(55 downto 48);
     O3 <= bytes(47 downto 40);
     O4 <= bytes(39 downto 32);
end bhv; 
```

clkdivide.vhd

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

entity clkdivide is
    Port (clkin: in std_logic;
            clkout:out std_logic );
end clkdivide;

architecture Behavioral of clkdivide is
    signal int_clock:std_logic;
    begin
        clkout<=int_clock;
    process(clkin)
        variable var:integer range 0 to 12500 :=0;
        begin
            if (clkin'event and clkin = '1') then
                if var = 12500 then
                    int_clock <= not int_clock; 
                    var:=0;
                else 
                    var:=var+1;
                end if;
            end if;
    end process;
end Behavioral; 
```

SevenSegmentControl.vhd：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;

entity SevenSegmentController is
    port (
        CLK: in std_logic;
        DEC1, DEC2, DEC3, DEC4: in std_logic_vector(7 downto 0);
        SEGMENTS: out std_logic_vector(6 downto 0);
        ANODES: out std_logic_vector(3 downto 0)
    );
end SevenSegmentController;

architecture Behavioral of SevenSegmentController is
   signal DecoderInput: std_logic_vector(7 downto 0);
    signal CurrentDisplay: std_logic_vector(1 downto 0) := "00";
    signal Prescaler: std_logic_vector(15 downto 0) := (others => '0');
begin

    Multiplex: process(CLK)
    begin
        if rising_edge(CLK) then
            if Prescaler(15) = '0' then
                Prescaler <= Prescaler + 1;
            else
                CurrentDisplay <= CurrentDisplay + 1;
                Prescaler <= (others => '0');
            end if;
        end if;
    end process Multiplex;

    SevenSegmentDecoder: entity work.SevenSegment_Decoder(Behavioral)
        generic map ( INVERT_OUTPUT => '1' )
        port map ( number => DecoderInput, segment => SEGMENTS );   

    DecoderInput <= DEC1 when CurrentDisplay = "00" else
                        DEC2 when CurrentDisplay = "01" else
                         DEC3 when CurrentDisplay = "10" else
                         DEC4 when CurrentDisplay = "11";

   ANODES <= "0111" when CurrentDisplay = "00" else
                 "1011" when CurrentDisplay = "01" else
                 "1101" when CurrentDisplay = "10" else
                 "1110" when CurrentDisplay = "11";              

end Behavioral; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:39:52.850

“我还没有想过尝试 7 段控制器的任何方式/方法”

除非您使用的是非常旧的 ISE 版本，肯定比 ISE10 更老，否则它内置了相当不错的模拟器 (ISIM)。（ISIM 比 ISE10 更早，但它并不是真正可用，甚至 ISIM 10 也有问题...)

如果您编写一个简单的测试平台并在进行过程中对这些模块进行单元测试，您将节省大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:53:58.550

我们不知道 的接口协议`SevenSegment_Decoder`，但你只有两个输入，但没有时钟，这看起来确实很有趣。解码器如何知道何时解释信号？

# objective-c - 如何在将图片放在其上后获取作为发送者的 NSImageView 的大小

> ID：13856660
> 
> 赞同：0
> 
> 时间：2012-12-13T09:21:53.977
> 
> 标签：objective-c, size, nsimageview

在我的项目中，我有`NSImageView`一张照片，我从取景器上放了一张照片。在`IBAction`我想注意图片尺寸是否大于`NSImageView`如下所示的尺寸。

我希望`sender.size`or `sender.size.x`or`sender.size.width`会给我`NSImageView` **imageDropped**的大小，但事实并非如此。

任何想法如何获得尺寸`NSImageView`？

```
- (IBAction)imageWasDropped:(id)sender {
   NSImage *theImage = [imageDropped image];

   NSLog(@"%@", sender); // this returns <NSImageView: 0x10011d210>

   NSSize _dimensions = [theImage size];

  if (_dimensions.width > sender.size){

  }

   [imageOriginal setImage:theImage];
   [picture_1 setImage:theImage];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:36:18.993

这个很简单，`_imageView`就是那个图片的outlet名字，就是你放或者展示图片的地方。

```
NSLog(@"%f, %f", [[_imageView image]size].height, [[_imageView image]size].width); 
```

编辑：

对于 imageWell 尺寸：

```
NSLog(@"Image well size is  :%f x %f",[_imageView frame].size.height, [_imageView frame].size.width); 
```

# search - 如何将 opencart 基本搜索模块修改为更高级的模块？

> ID：13856668
> 
> 赞同：0
> 
> 时间：2012-12-13T09:22:28.183
> 
> 标签：search, opencart

我对 opencart 很陌生，我想了解如何创建更高级的搜索功能。

例如，我的商店中有产品，其中一些是蓝色的，有些是红色的。我如何指定或在哪里可以指定产品的颜色（但不在标题中，例如属性）？

之后如何搜索红色产品？我不想按关键字搜索。我想要一个标签来选择颜色，如果我选择蓝色，搜索将显示所有蓝色产品。

我希望你明白我的愿望。（你能不能给我一些代码示例：在哪里添加什么来实现什么）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:29:05.127

通常，您会为此使用产品标签（字段位于产品页面上的产品描述下，管理 > 目录 > 产品）。您可能会遇到非常短的标签（3 个字符或更少）的问题。有关更多信息，请参阅此帖子：

[mysql 全文 MATCH,AGAINST 返回 0 个结果](https://stackoverflow.com/questions/3797932/mysql-fulltext-match-against-returning-0-results.)

您可以为您的产品添加标签，例如：红色、黑色、棕色、皮革、~~s、m、l、xl~~ small、medium、large 然后您可以搜索任何术语

[编辑：回应评论#1] 我想你只是在搜索框中输入多个术语：'棕色'，'大'然后所有具有（任何？都？）这些标签的产品返回。

您可以使用标签云或类似模块在页面上显示标签，也可以在搜索字段中使用这些术语。如果您搜索“棕色”，则将返回所有具有此标签的产品。您还可以考虑使用第三方扩展来进行更高级的搜索，请查看 Opencart 站点的扩展部分。

如果您想自己修改/改进搜索功能，则需要修改 catalog/model/catalog/product.php 中的 SQL 查询

许多人认为 Opencart 搜索是该软件包的弱点之一。Opencart 论坛上已经讨论过这个问题。

只需通过开箱即用的设置查看它如何为您工作，然后如果您需要更多功能，请寻找可以满足您需求的扩展，聘请程序员或自己编写代码。

# php - Ajax、Jquery 和 PHP 以及两个下拉列表的问题

> ID：13856681
> 
> 赞同：0
> 
> 时间：2012-12-13T09:23:04.767
> 
> 标签：php, jquery, ajax

我正在尝试使用 Ajax、jQuery、PHP 和 MySQL 根据第一个下拉列表选择填充第二个下拉列表。问题是第二个下拉列表中的选项只出现在一行中！（一行中的所有选项）我希望 results.php 中的 while 循环可以处理这个问题，但似乎不行！你能告诉我如何解决这个问题吗？这是我的代码：

```
<html>
<body>
<?php
$mysqli = new mysqli('localhost', 'root', '', 'chain');
if ($mysqli->connect_errno) 
{
die('Unable to connect!');
}
else
{
$query = 'SELECT * FROM Cars';
if ($result = $mysqli->query($query)) 
 {
 if ($result->num_rows > 0) 
    {
 ?> 
 <p>
  Select a Car
<select id="selectCar">
<option value="select">Please Select From The List</option>
    <?php       
     while($row = $result->fetch_assoc()) 
   {
   ?>       
   <option value="<?php echo $row['id']; ?>"><?php echo $row['title']; ?></option>      
  <?php         
}
  ?>
 </select>
 </p>
<select>
    <option value="select">Please Select From The List</option>
    <option id="result"></option>
    </select>
    <?php
    }
    else 
    {
        echo 'No records found!';
    }
    $result->close();
}
else 
{
    echo 'Error in query: $query. '.$mysqli->error;
}
    }
     $mysqli->close();
    ?>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
            $('#selectCar').change(function()
            {
                if($(this).val() == '') return;
                $.get(
                    'results.php',
                    { id : $(this).val() },
                    function(data)
                    {
                        $('#result').html(data);
                    }
                );
            });
        });
    </script>
      </body>
      </html> 
```

在 PHP 结果中我有：

```
<?php
 $mysqli = new mysqli('localhost', 'root', '', 'chain');
 $resultStr = '';
 $query = 'SELECT * FROM models WHERE carID='.$_GET['id'];
 if ($result = $mysqli->query($query)) 
 {
if ($result->num_rows > 0) 
{
    while($row = $result->fetch_assoc())
    {
  $resultStr.=  '<option    value="'.$row['id'].'">'.$row['model'].'</option>'; 
    }
}
else
{
 $resultStr = 'Nothing found';
}
   }
    echo $resultStr;
   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:27:08.403

您正在`$('#result').html(data);`主文件中进行设置。

`result`应该是 HTML`select`元素的 id，你用它作为 an`option`元素的 id。

（您将值附加到`option`元素中，这不会创建新的 HTML 元素，但它们应该插入到`select`元素中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:32:15.867

你应该把你的脚本编辑成这个..

```
<select id="result">
  <option value="select">Please Select From The List</option>
</select> 
```

# java - 为不同的对象动态生成表

> ID：13856687
> 
> 赞同：1
> 
> 时间：2012-12-13T09:23:29.727
> 
> 标签：java, oop, jsp

对于我在 Java/jsp 中制作的东西，我将有很多看起来相似但用于不同对象的可视表。每个对象都有不同数量的字段，但至少共享一个`id`链接到对象的更详细页面的字段。

所以我在考虑是否有可能制作一些我每次都可以重用的东西，无论对象有多少字段。

这是我想要实现的一个例子

```
Object A
-id
-name
-address

Object B
-id
-field2
-field3 
```

想把它翻译成：

```
Table for Object A's
id -- name -- address
1     Bert    Street
2     Jeff    Lane

Table for Object B's
id  -- field2  -- field3
1        AB         5
2        Foo        Bar 
```

实现这一目标的最佳方法是什么？我正在考虑（除了 id），向两个具有所有字段的对象添加一个可枚举的 getter，然后循环它以生成表。

还有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:26:57.243

您可以在主类中添加一个字段，该字段`Map<String,Object>`的键是`Map`您的属性名称。

或者，如果您的字段始终是字符串，您可以使用`Properties`，这基本上是 a`Map<String,String>`有一些小曲折（例如默认值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:50:02.093

我通常做的是创建一个这样的类作为我的表模型：

```
import java.io.Serializable;
import java.util.Arrays;
import java.util.List;

import com.tricode.mrc.ui.web.messages.Messages;

/**
 * 
 * @author Sinisa
 *
 * @param <T> the entity type
 */
public abstract class AbstractCrudForm<T extends Serializable> {

        private List<T> data;

        public AbstractCrudForm(List<T> data) {
                this.data = data;
        }

        /**
         * @param record
         * @return the value of the id field of the given record
         */
        protected abstract String getId(T record);

        /**
         * @return ui name of the entity that is displayed <br>i.e. for DataValidationConfiguration will return "Data Validation Configuration"
         */
        public abstract String getUserFriendlyTypeName();

        /**
         * @return the number of fields of the columns (fields)
         */
        public abstract int getNumberOfFields();

        /**
         * Return the column names as seen in the header of the crud table
         * @return
         */
        public abstract String[] getArrayOfColumnNames();

        /**
         * @param record
         * @param column
         * @return
         */
        protected abstract String getDataAtColumn(T record, int column);

        /**
         * Returns the data at the specified position
         * @param row
         * @param column
         * @return the data at the specified position
         */
        public String getDataAt(int row, int column) {
                return getDataAtColumn(data.get(row), column);
        }

        /**
         * @return a list of the data
         */
        protected List<T> getData() {
                return this.data;
        }

        /**
         * @return the user friendly name for the title of the ui form for editing
         */
        public String getUserFriendlyEditTypeName() {
                return Messages.getString("AbstractCrudForm.Edit") + getUserFriendlyTypeName(); //$NON-NLS-1$
        }

        /**
         * @return the user friendly name for the title of the ui form for editing
         */
        public String getUserFriendlySaveTypeName() {
                return Messages.getString("AbstractCrudForm.New") + getUserFriendlyTypeName(); //$NON-NLS-1$
        }

        /**
         * @return a list of the column names
         */
        public List<String> getColumns() {
                return Arrays.asList(getArrayOfColumnNames());
        }

        /**
         * @param position
         * @return the column name at a given position
         */
        public String getColumnNameAt(int position) {
                return getArrayOfColumnNames()[position];
        }

        /**
         * The result size
         * @return
         */
        public int resultsSize() {
                return data.size();
        }

        /**
         * @param row
         * @return the value of the id field for the given record
         */
        public String getId(int row) {
                return getId(data.get(row));
        }

} 
```

对于我要实现的每个类（在您的情况下是对象 A 和对象 B），我会覆盖这个抽象模型，例如：

```
import java.util.List;

import com.tricode.misterchameleon.model.DataValidationConfiguration;
import com.tricode.mrc.ui.web.AbstractCrudForm;
import com.tricode.mrc.ui.web.messages.Messages;

public class DataValidationConfigurationCrudForm extends AbstractCrudForm<DataValidationConfiguration> {

        public DataValidationConfigurationCrudForm(List<DataValidationConfiguration> data) {
                super(data);
        }

        @Override
        public String getTypeName() {
                return DataValidationConfiguration.class.getSimpleName();
        }

        @Override
        public String getUserFriendlyTypeName() {
                return Messages.getString("DataValidationConfigurationCrudForm.DataValidationConfiguration"); //$NON-NLS-1$
        }

        @Override
        public int getNumberOfFields() {
                // TODO take it with generics
                return 8;
        }

        @Override
        public String[] getArrayOfColumnNames() {
                return new String[] {
                                Messages.getString("DataValidationConfigurationCrudForm.ID"), Messages.getString("DataValidationConfigurationCrudForm.DomainName"), Messages.getString("DataValidationConfigurationCrudForm.FormUrl"), Messages.getString("DataValidationConfigurationCrudForm.PostalCode"), Messages.getString("DataValidationConfigurationCrudForm.HouseNumber"), Messages.getString("DataValidationConfigurationCrudForm.Street"), Messages.getString("DataValidationConfigurationCrudForm.City"), //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$ //$NON-NLS-4$ //$NON-NLS-5$ //$NON-NLS-6$ //$NON-NLS-7$
                                Messages.getString("DataValidationConfigurationCrudForm.Country") }; //$NON-NLS-1$
        }

        @Override
        protected String getDataAtColumn(DataValidationConfiguration config, int column) {
                switch (column) {
                case 0:
                        return config.getId().toString();
                case 1:
                        return config.getDomainName();
                case 2:
                        return config.getFormUrl();
                case 3:
                        return config.getPostalCode();
                case 4:
                        return config.getHouseNumber();
                case 5:
                        return config.getStreet();
                case 6:
                        return config.getCity();
                case 7:
                        return config.getCountry();
                default:
                        throw new IllegalArgumentException(Messages.getString("DataValidationConfigurationCrudForm.YouShouldntHaveGottenHere")); //$NON-NLS-1$
                }
        }

        @Override
        protected String getId(DataValidationConfiguration record) {
                return record.getId().toString();
        }

} 
```

我将此对象传递给 jsp，然后我有一个用于绘制表格的通用 jsp 文件：

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<div class="row">
    <div class="twelve columns">
        <h1>${genForm.getUserFriendlyTypeName()}</h1>

        <a href="${genForm.getCreateLink()}" class="btn_styled">Create</a>
        <table class="border">
            <thead>
                <tr>
                    <c:forEach var="col" items="${genForm.getColumns()}">
                        <th>${col}</th>
                    </c:forEach>
                    <!-- Add two more for delete and edit -->
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <c:if test="${genForm.resultsSize() == 0}">
                <tr colspan="${genForm.getNumberOfFields()}">
                    <td><spring:message code="common.crud.norecords" text="common.crud.norecords"/></td>
                </tr>
            </c:if>
            <c:if test="${genForm.resultsSize() > 0}">
                <c:forEach var="row" begin="0" end="${genForm.resultsSize() - 1}">
                    <tr>
                        <c:set var="edit" value="?" />
                        <c:forEach var="column" begin="0"
                            end="${genForm.getNumberOfFields() - 1}">
                            <td>${genForm.getDataAt(row, column)}</td>
                            <c:set var="edit"
                                value="${edit}${genForm.getJavaFieldNameAt(column)}=${genForm.getDataAt(row, column)}&" />
                        </c:forEach>
                        <!-- Add delete and edit buttons -->
                        <th><a id="edit-row" class="btn_styled"
                            href="${genForm.getEditLink()}${edit}"><spring:message
                                    code="common.button.edit" text="common.button.edit" /></a></th>
                        <th><a id="delete-row" class="btn_styled"
                            href="${genForm.getDeleteLink()}?id=${genForm.getId(row)}"><spring:message
                                    code="common.button.delete" text="common.button.delete" /></a></th>
                    </tr>
                </c:forEach>
            </c:if>

        </table>
    </div>
</div> 
```

我发布的所有代码都不应被视为复制/粘贴解决方案，因为它可能无法立即工作。它应该被视为一个想法，并且是解决您的问题的一种干净的方式。

# hadoop - 如何从hadoop的临时文件中获取数据？

> ID：13856690
> 
> 赞同：1
> 
> 时间：2012-12-13T09:23:52.553
> 
> 标签：hadoop, mapreduce

我有一个使用 map reduce 将数据从远程系统传输到 HDFS 的应用程序。但是，当我必须处理网络故障等问题时，我会迷失方向。也就是说，当来自远程数据源的连接丢失并且我的 mapreduce 应用程序不再可以访问数据时。我总是可以重新开始工作，但是当数据很大时，重新启动是一个昂贵的选择。我知道 mapreduce 会创建临时文件夹，但它会将数据放在那里吗？我可以读出这些数据然后我能以某种方式开始读取其余的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:19:15.053

mapreduce 作业可以写入任意文件，而不仅仅是 Hadoop 管理的文件。

```
Configuration conf = new Configuration();
FileSystem fs = FileSystem.get(conf);
out = fs.create(new Path(fileName)); 
```

使用此代码，您可以创建与本地文件系统中的普通文件一样工作的任意文件。然后，您管理连接异常，以便当源不可访问时，您可以很好地关闭文件并记录发生中断的某处（例如，在 HDFS 本​​身中）以及发生中断的时间点。在 FTP 的情况下，您可以只写文件路径和文件夹的列表。当作业完成下载文件时，将其路径写入下载列表，当整个文件夹下载时写入文件夹路径，因此在恢复的情况下，您不必遍历目录内容来检查所有文件是否已下载.

另一方面，在程序启动时，它会检查这个文件，以决定之前的尝试是否失败，以及从哪里开始下载。

一般来说，如果超时没有写入/读取任何内容，Hadoop 会终止您的程序。你的应用程序可以告诉它等待，但一般来说有一个空闲的工作是不好的，所以最好结束工作而不是等待网络再次工作。

您还可以通过以下方式创建自己的文件编写器：

```
conf.setOutputFormat(MyOwnOutputFormat.class); 
```

您的文件编写器可以以您喜欢的格式保存自己的临时文件，因此如果应用程序崩溃，您知道文件是如何保存的。HDFS 默认情况下以 64MB 的块保存文件，当作业失败时，除非您使用自己的编写器，否则您甚至可能没有临时文件。

这是一个通用的解决方案，它取决于哪个是数据源（ftp、samba、http...）及其对下载简历的支持。

**编辑**：在 FTP 的情况下，您可以使用[csync](http://www.csync.org/)将 FTP 服务器与本地文件系统同步，并使用 hdfs-fuse 挂载 HDFS 文件系统。当您有许多小文件时，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:03:37.703

您尚未指定用于将数据输入 HDFS/Hadoop 的工具。

Flume、Scribe 和 Chukwa（用于日志文件）可用于将数据输入 HDFS/Hadoop 并支持可恢复性的一些工具，它们都支持各种可配置级别的文件传输可靠性保证，以及用于将关系数据库数据传输到 Sqoop HDFS 或 Hive 等

# ruby - 通过键数组设置 ruby 哈希元素值

> ID：13856692
> 
> 赞同：2
> 
> 时间：2012-12-13T09:23:54.767
> 
> 标签：ruby, hash

这是我得到的：

```
hash = {:a => {:b => [{:c => old_val}]}}
keys = [:a, :b, 0, :c]
new_val = 10 
```

散列结构和键集可能会有所不同。
我需要得到

```
hash[:a][:b][0][:c] == new_val 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T09:30:58.517

您可以使用[`inject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)遍历嵌套结构：

```
hash = {:a => {:b => [{:c => "foo"}]}}
keys = [:a, :b, 0, :c]

keys.inject(hash) {|structure, key| structure[key]}
# => "foo" 
```

因此，您只需要修改它以对最后一个键进行设置。也许像

```
last_key = keys.pop
# => :c

nested_hash = keys.inject(hash) {|structure, key| structure[key]}
# => {:c => "foo"}

nested_hash[last_key] = "bar"

hash
# => {:a => {:b => [{:c => "bar"}]}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T09:43:16.573

类似于安迪的，但你可以用`Symbol#to_proc`它来缩短它。

```
hash = {:a => {:b => [{:c => :old_val}]}}
keys = [:a, :b, 0, :c]
new_val = 10
keys[0...-1].inject(hash, &:fetch)[keys.last] = new_val 
```

# windows-phone-8 - Windows Phone 8 隔离存储

> ID：13856700
> 
> 赞同：0
> 
> 时间：2012-12-13T09:24:32.080
> 
> 标签：windows-phone-8

是否可以使用 将文件物理复制到独立存储`ISETool`？我正在尝试将文本文件添加到独立存储中，然后通过代码检查该文件是否存在。当我这样做时，我收到“文件不存在”错误。

如果我在代码中将文件添加到独立存储，它可以成功运行，我可以通过 访问它在独立存储中将`ISETool`其复制到我的 PC。

考虑场景 2：

我在代码中将文件添加到独立存储中，然后使用将 `ISETool`其返回到我的 PC。在不修改文件的情况下，我将 SAME FILE 放回隔离存储并尝试通过代码打开它，我看到相同的“文件不存在”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:21:54.333

您还没有说过如何将文件写入独立存储。

相反，请考虑为此使用[Windows Phone Power Tools](http://wptools.codeplex.com/)之类的工具，因为它可以更轻松地处理独立存储中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-29T06:28:46.657

是的，可以在手机或模拟器的 isostorage 之间进行复制尝试将文件上传或下载到 iso 存储中，仅适用于 wp8.1 [https://isostorespy.codeplex.com/](http://wptools.codeplex.com/) 适用于 wp7 [Windows Phone 7 隔离存储资源管理器](http://wp7explorer.codeplex.com/releases) 适用于 wp8 [Windows电话电动工具](http://wptools.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:49:30.287

根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286408%28v=vs.105%29.aspx#BKMK_ReplacingFilesinIsolatedStorage)，您可以：

> ...用您计算机中的文件和目录替换模拟器或设备上应用程序本地文件夹中的文件和目录...。

脚步：

1.  将要测试的应用程序部署到模拟器或设备。
2.  获取在 WMAppManifest.xml 文件的 App 元素的 ProductID 属性中指定的应用的产品 G​​UID。
3.  打开命令提示符窗口并导航到 ISETool.exe 的位置。
4.  要将应用程序本地文件夹中的所有文件替换为您计算机中的文件，请使用前面步骤中获得的产品 G​​UID 键入以下命令，并指定您计算机上的源目录。

`ISETool.exe rs <xd|de> <product-id> <desktop-path>`

以下示例显示了一个命令，该命令将应用程序本地文件夹中的文件和目录替换为计算机上目录“C:\Data\My Files”中的文件。

`ISETool.exe rs xd 11111111-2222-3333-4444-555555555555 "C:\Data\My Files"`

希望这可以帮助！

# jquery - 完整日历 4 天议程视图

> ID：13856705
> 
> 赞同：3
> 
> 时间：2012-12-13T09:24:44.723
> 
> 标签：jquery, fullcalendar

我正在为我的应用程序使用 fullcalendar 脚本。它目前允许从以下视图中选择一个：月、基本周、基本日、议程周和议程日 ( [http://arshaw.com/fullcalendar/docs/views/Available_Views/](http://arshaw.com/fullcalendar/docs/views/Available_Views/) )。我想知道是否有可能对其进行修改以显示 3 天或 4 天的议程视图。任何修改技巧都会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-08T20:50:20.727

Full Calendar 版本 2.2.5 中有一个更新，允许进行这种自定义。

现在可以通过以下方式完成：

```
views: {
  agendaThreeDay: {
    type: 'agenda',
    duration: { days: 3 },
    buttonText: '3 day'
  },
  defaultView: 'agendaThreeDay'
} 
```

如果您希望它显示四个日历日，请将持续时间更改为 4。您可以从[Custom Views](http://fullcalendar.io/docs/views/Custom_Views/)上的文档页面获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T08:02:45.607

您可以使用该`hiddenDays`选项执行此操作，有关详细信息，请参阅[http://arshaw.com/fullcalendar/docs/display/hiddenDays/](http://arshaw.com/fullcalendar/docs/display/hiddenDays/)。

# android - 如何为编辑文本设置上下焦点

> ID：13856708
> 
> 赞同：0
> 
> 时间：2012-12-13T09:24:47.873
> 
> 标签：android, xml, android-layout

我在 UI 中没有编辑文本。当我们按下向上和向下箭头时，我希望上下设置焦点。我用过**“android:nextFocusDown”**，但它不工作。

（例如我们使用 tab 来移动光标到下一个）

是否有任何代码可以在xml中设置它，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:52:17.457

试试这个 ：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:orientation="vertical">
    <EditText
        android:id="@+id/editText1"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:imeOptions="actionNext"
        android:nextFocusDown="@+id/editText2" />
    <EditText
        android:id="@+id/editText2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

希望这对您有所帮助。

谢谢。

# spring-roo - Spring Roo RooDataOnDemand 和 RooIntegrationTest

> ID：13856709
> 
> 赞同：2
> 
> 时间：2012-12-13T09:24:51.227
> 
> 标签：spring-roo

如何使用`RooDataOnDemand`和`RooIntegrationTest`注释 Spring Roo 中的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:32:07.553

@RooIntegrationTest 注释类将包含测试以验证模型对象的 crud 功能。

如果您更改模型对象的任何其他标准行为，那么您还需要更改此类以及 @RooDataOnDemand 类。一个常见的情况是您将模型更改为不使用自动生成的 id。这将需要更改按需数据对象以设置 ID。

您可以通过运行以下命令查看这些测试的运行情况：

```
mvn test 
```

# html - HTML5 支持多语言

> ID：13856715
> 
> 赞同：4
> 
> 时间：2012-12-13T09:25:11.397
> 
> 标签：html, translation, multilingual

有谁知道 HTML5 支持多语言。我的意思是说，如果我用英语设计我的网站，html5 将使用一些语言或翻译或任何其他支持标签将网页转换为相应的语言。

任何指导或代码都可以帮助我很多。

非常感谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T09:35:59.743

HTML5 不翻译任何东西。它只是一种标记语言，可以显示您放入其中的内容，而无需对其应用任何逻辑。

但是，此类翻译通常由 Chrome、FireFox 等现代浏览器完成。高级浏览器会检测到您正在查看的网站是其他语言，并为您提供将其转换为首选语言的选择。

HTML5 与整个翻译相关的唯一一点是它有一个名为`translate`. 通过将此属性与值一起使用，`"no"`您现在可以标记您不想被浏览器翻译的元素：

```
<span translate="no">衝撞撞沒輸贏」應是「衝衝撞撞沒輸贏</span>
<!--Now no browser will dare to translate this.--> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T12:18:13.747

问题是 - 您是要自动翻译内容，还是要翻译您网站的用户界面。

HTML5 本身并没有真正提供对两者的完全支持，只有一些提示，甚至它们也没有真正在任何地方实现。

例如，您可以将 Google 翻译按钮添加到您的网站，如[http://www.labnol.org/internet/google-translation-widgets/10135/](http://www.labnol.org/internet/google-translation-widgets/10135/)中所述。谷歌浏览器内置了它，它适用于所有网站。其他浏览器将来可能会获得这样的功能，但这是浏览器应用程序的功能，而不是 HTML。

要翻译您网站的界面，您可以使用众多国际化库之一。许多 CMS 和 Web 框架都带有这样的 i18n 库。您也可以使用 jquery.i18n ( [https://github.com/wikimedia/jquery.i18n/](https://github.com/wikimedia/jquery.i18n/) ) 之类的库在客户端执行此操作。

（免责声明：我是 juery.i18n 的开发者之一。）

最后，关于良好实践的提示：务必在所有相关的 HTML 元素上使用 lang 属性。即使它只是“en”。这对于拼写检查、选择正确的字体、翻译等很有用。只要您知道该语言，请指定它。这似乎是多余的，但它是必要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T09:29:06.100

HTML5 中没有集成翻译。HTML 提供了对`lang`指示给定标签的内容是用什么语言编写的属性的支持，但这只是一个指示性属性，不会以任何方式修改内容。

为什么没有自动翻译背后更哲学的原因是 HTML 是一种结构化语言……它定义了构建网页的框架。它不仅不会修改内容，而且如果它这样做了，作为开发人员的您将失去对翻译质量和准确性的控制。这可能是一件非常糟糕的事情......

但是，您必须知道，Chrome 会为您将外语页面翻译成您喜欢的语言。此处的区别在于 Chrome 由用户控制，用户有权决定以何种语言查看内容以及是否希望查看由开发人员明确定义的原始内容。

* * *

翻译取决于浏览器。要翻译，您需要一个翻译引擎，它实际上会为您进行翻译。如您所知，您不能简单地逐个转换单词并最终得到另一种语言的正确翻译。Chrome 利用谷歌翻译的力量来翻译其页面，这就是它提供此功能的方式。多语言支持的最佳选择是尽可能准确地以尽可能多的语言提供您的页面，然后希望不使用 Chrome 的用户将您的 URL 插入 Google 翻译或类似服务中，以获得您的内容的近似值他们的母语。

# c - 使用指针访问结构成员

> ID：13856716
> 
> 赞同：0
> 
> 时间：2012-12-13T09:25:13.903
> 
> 标签：c, iterator, structure

在C中，我有这样的结构

```
typedef struct
{
 char *msg1;
 char *msg2;
 .
 .
 char *msgN;
}some_struct;

some_struct struct1;
some_struct *pstruct1 = &struct1; 
```

我想保留一个指针或变量，当递增或递减时，会给出该结构的下一个/最后一个成员变量。我不想使用 char * 数组，因为它已经是这样设计的。

我尝试使用联合和结构组合，但我不知道如何为此编写代码。

认为迭代器可能会有所帮助，但这是 C。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:52:28.203

您可以使用严格的 C 来执行此操作，但您需要采取某些预防措施以确保符合标准。我将在下面解释这些，但您需要采取的预防措施是：

(0) 通过包含此声明确保没有填充：

```
extern int CompileTimeAssert[
    sizeof(some_struct) == NumberOfMembers * sizeof(char *) ? 1 : -1]; 
```

（1）从结构的地址初始化指针，而不是成员的地址：

```
char **p = (char **) (char *) &struct1; 
```

（我怀疑上述内容不是必需的，但我必须从 C 标准中插入更多推理。）

(2) 按以下方式递增指针，而不是使用`++`或加一：

```
p = (char **) ((char *) p + sizeof(char *)); 
```

以下是解释。

(0) 中的声明充当编译时断言。如果结构中没有填充，则结构的大小等于成员数乘以成员的大小。然后三元运算符的计算结果为 1，声明有效，编译器继续。如果有填充，则大小不相等，三元运算符的计算结果为 -1，声明无效，因为数组不能有负大小。然后编译器报告错误并终止。

因此，包含此声明的程序只有在结构没有填充时才会编译。此外，该声明不会占用任何空间（它只声明一个从未定义过的数组），并且它可能会与其他表达式重复（如果它们的条件为真，则评估为数组大小为 1），因此可以使用不同的断言使用相同的数组名称进行测试。

第 (1) 项和 (2) 项处理指针算术通常保证仅在数组中工作的问题（包括末尾的概念标记元素）（根据 C 2011 6.5.6 8）。但是，C 标准在 C 2011 6.3.2.3 7 中对字符类型做出了特殊保证。指向结构的指针可以转换为指向字符类型的指针，并且它将产生指向结构的最低寻址字节的指针. 结果的连续增量，直到对象的大小，产生指向对象剩余字节的指针。

在（1）中，我们从 C 2011 6.3.2.3 7 中知道，这`(char *) &struct1`是一个指向`struct1`. 当转换为 时`(char **)`，它必须是指向第一个成员的指针`struct1`（特别感谢 C 2011 6.5.9 6，它保证相等的指针指向同一个对象，即使它们具有不同的类型）。

最后，（2）解决了数组算术不能直接保证在我们的指针上工作的事实。也就是说，`p++`将增加一个不严格在数组中的指针，因此 6.5.6 8 不能保证算术。所以我们将其转换为 a `char *`，对于它的增量保证在 6.3.2.3 7 时有效，我们增加它四次，我们将其转换回`char **`. 这必须产生一个指向下一个成员的指针，因为没有填充。

有人可能会声称添加`char **`（比如 4）的大小与 1 的四个增量不同`char`，但该标准的意图当然是允许以合理的方式处理对象的字节。但是，如果您想避免这种批评，您可以更改`+ sizeof(char *)`为`+1+1+1+1`（在大小为 4 的实现上）或`+1+1+1+1+1+1+1+1`（在大小为 8 的地方）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:33:01.190

你不能这样做，安全。您可以冒险使相邻的字符指针真正相邻（没有填充），就好像它们在数组中一样，但是您不能确定这几乎是直接进入未定义行为的雷区。

您可以将其抽象为索引，并执行以下操作：

```
char * get_pointer(some_struct *p, int index)
{
  if(index == 0)
    return p->msg1;
  if(index == 1)
    return p->msg2;
  /* and so on */
  return NULL;
} 
```

然后，您可以使用可以自由递增/递减的索引，并`get_pointer()`在需要时调用以将其映射到消息指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:32:21.473

获取第一个成员的地址并将其存储到`char **`：

```
char **first = &struct1.msg1;
char **last = &struct1.msg1 + sizeof(some_struct) / sizeof(char *) - 1;

char **ptr = first;  /* *ptr is struct.msg1 */
++ptr;               /* now *ptr is struct1.msg2 */ 
```

这假定结构仅包含`char *`成员。

# jquery - jquery 手风琴在 asp.Net 回发后没有重新启动

> ID：13856717
> 
> 赞同：3
> 
> 时间：2012-12-13T09:25:15.980
> 
> 标签：jquery, asp.net, jquery-ui, postback, accordion

我正在启动一个 jquery 手风琴：

```
$(document).ready(function(){
   $('#accordion').accordion();
}); 
```

问题是这是一个 .asp.NET 应用程序，如果页面触发回发，则会破坏手风琴。如何在回发时重新启动手风琴？

抱歉，我不是 asp.NET 方面的专家，也很抱歉我不能给你一个例子的链接，这是因为它是一个受密码保护的应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T09:41:25.010

您需要使用 UpdatePanel 功能在回发后重新初始化手风琴：

```
<script type="text/javascript"> 
$(document).ready(function(){
    var prm = Sys.WebForms.PageRequestManager.getInstance();    
        prm.add_initializeRequest(InitializeRequest);
        prm.add_endRequest(EndRequest);
   // on page ready first init of your accordion
   $('#accordion').accordion();
});

function InitializeRequest(sender, args) {      
}

function EndRequest(sender, args) {
     // after the UpdatePanel finish the render from ajax call
     //  and the DOM is ready, re-initilize the accordion
     $('#accordion').accordion();
}
</script> 
```

相对：
[Gridview Jquery DatePicker 中的 Asp.Net UpdatePanel](https://stackoverflow.com/questions/3341623/asp-net-updatepanel-in-gridview-jquery-datepicker/3341741#3341741)
[ASP.Net：需要在更新面板加载完成时运行 javascript](https://stackoverflow.com/questions/2985937/asp-net-need-to-run-javascript-on-update-panel-load-completed/2987484#2987484)
[如何让客户端脚本在 ASP.NET 回发上执行？（来自更新面板）](https://stackoverflow.com/questions/3257973/how-do-you-get-client-side-script-to-execute-on-an-asp-net-postback-from-an-up/3258167#3258167)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:29:17.250

```
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(InitAccordion);
function InitAccordion(){       
   $('#accordion').accordion();} 
```

这将适用于回发和异步回发 在页面上的所有内容由于同步或异步回发而刷新后引发。 [http://msdn.microsoft.com/en-us/library/bb397523(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb397523(v=vs.100).aspx)

# javascript - 从用户控件调用aspx页面按钮的单击事件

> ID：13856719
> 
> 赞同：1
> 
> 时间：2012-12-13T09:25:20.193
> 
> 标签：javascript, asp.net

我在用户控件中有一个按钮。

```
 <asp:Button ID="btnCompare" CssClass="new_btn" runat="server"
  Text="Compare" /> 
```

我需要在“btnCompare”按钮单击时调用另一个 aspx 页面中的按钮的单击事件。

可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:33:49.330

您可以将该事件处理程序保存在一个 js 文件中，您可以在这两个文件或任何文件中使用该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:33:49.963

对的，这是可能的。您可以尝试使用 javascript 事件处理来实现这一点

**编辑：**据我了解，您正在尝试单击用户控件也放置在其中的页面上的按钮。

通常我所做的是从实际触发页面按钮单击的用户控件调用 JavaScript 事件。

**Page.aspx 中的示例代码**

```
 function FirePageLevelOkButton(){
  var okButton= document.getElementById('<%=btnOk.ClientID %>');
  if(okButton){ 
   okButton.click(); // if you have ok button in page you can fire click, 
     //this will execute codebehind code
  }
 } 
```

**在用户控制中**

```
 <asp:Button ID="btnCompare" CssClass="new_btn"  runat="server"  
    OnClientClick="javascript:FirePageLevelOkButton();" Text="Compare" /> 
```

希望这会对你有所帮助！

# php - 通过php从我的sql中的csv文件导入数据

> ID：13856722
> 
> 赞同：-1
> 
> 时间：2012-12-13T09:25:31.770
> 
> 标签：php, mysql, csv, import

我正在尝试从 csv 文件导入数据，该文件具有以下格式：

```
173,antony,xds1079,Antony,Pran,Pran Antony,,452522252,,,,antpran@hotmail.com,,,,,Yes,Yes,No,pricelist.xls
18,john,smithison22,John,Smith,Smith Jon,,545455726,,,,johnsmith01@in.com,,,,,Yes,Yes,No,pricelist.xls
22,nikolas,Brand44eBerg,Nikolas,Brandeberg,Brandeberg and sons ,,454554552,,,,brand88@freemail.co.uk,,,,,Yes,Yes,No,pricelist.xls 
```

将其插入 mySQL 时，第一行的最后一个字段*同时* `pricelist.xls`包含和`18`。但是`18`应该放在下一行，因为它是 id 字段。

这是我使用的php代码：

```
if ($_FILES[csv][size] > 0) {

//get the csv file
$file = $_FILES[csv][tmp_name];
$handle = fopen($file,"r");

//loop through the csv file and insert into database
do {
    if ($data[0]) {
        mysql_query("INSERT INTO customers_tmp (id,username, password, firstname, lastname, companyname, companyposition, phone1, phone2, mobilephone, fax, email, address, afm, doy, website, active, wholesaling , wholesaling_bulk , pricecatalog) VALUES
            (
                '".addslashes($data[0])."',
                '".addslashes($data[1])."',
                '".addslashes($data[2])."',
                '".addslashes($data[3])."',
                '".addslashes($data[4])."',
                '".addslashes($data[5])."',
                '".addslashes($data[6])."',
                '".addslashes($data[7])."',
                '".addslashes($data[8])."',
                '".addslashes($data[9])."',
                '".addslashes($data[10])."',
                '".addslashes($data[11])."',
                '".addslashes($data[12])."',
                '".addslashes($data[13])."',
                '".addslashes($data[14])."',
                '".addslashes($data[15])."',
                '".addslashes($data[16])."',
                '".addslashes($data[17])."',
                '".addslashes($data[18])."',
                '".addslashes($data[19])."'                                                                                                                                                                                                                                      
            )
        ");
    }
} while ($data = fgetcsv($handle,1000,",","'"));
//

//redirect
header('Location: import.php?success=1'); die; 
```

}

有谁知道我应该怎么做才能让 id 进入下一行而不是最后一个字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:08:44.700

如果其他人可能需要此解决方案，以下是我解决问题的方法：

```
ini_set('auto_detect_line_endings', true); 
```

问候，佐兰

# css - 将 JQuery Mobile 下拉值大写

> ID：13856726
> 
> 赞同：0
> 
> 时间：2012-12-13T09:25:47.777
> 
> 标签：css, jquery-mobile

我有一个带有以下[`select`](http://jquerymobile.com/demos/1.2.0/docs/forms/selects/)标签的 JQuery Mobile 页面：

```
<select id="menu">
    ...
</select> 
```

我尝试将文本大写：

```
#menu{
    text-transform: capitalize;
} 
```

但它只将 . 中的值/文本大写`option`。我还想将所选值大写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:31:25.223

您必须将样式应用于显示所选选项的 jqm 按钮

```
.ui-select .ui-btn-text {
    text-transform: capitalize;
} 
```

# forms - 如何使用参数创建检票口表单

> ID：13856730
> 
> 赞同：0
> 
> 时间：2012-12-13T09:26:12.150
> 
> 标签：forms, wicket

wicket 中的默认表单看起来像

```
private class TournamentWebForm extends Form<Void> {

    private static final long serialVersionUID = 1L;

    public TournamentWebForm() {
        super("tournamentForm");
       // add componets ...
} 
```

然后页面看起来像（重要的是后面的数字？）

```
http://localhost:8080/tournament-system-web/home?19 
```

但在互联网上，我发现这个页面也是用 wicket 写的：

[http://jizdenky.studentagency.cz/?wicket:interface=wicket-0:3:3](http://jizdenky.studentagency.cz/?wicket:interface=wicket-0:3:3) :::

当我搜索票时，他们的表格看起来像：

[http://jizdenky.studentagency.cz/Booking/from/BRNO/to/PRAHA/tarif/REGULAR/departure/20121213/retdep/20121213/return/false/ropen/false/credit/false/class/2.5#search-结果](http://jizdenky.studentagency.cz/Booking/from/BRNO/to/PRAHA/tarif/REGULAR/departure/20121213/retdep/20121213/return/false/ropen/false/credit/false/class/2.5#search-results)

我怎样才能创建这个表格？

更新：

在这种情况下，返回哪个页面取决于最后一个参数：`#search-results`我如何实现这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:01:12.820

你没有。

您在上面的链接中看到的是 1.5 版之前为有状态页面创建的 URL Wicket。

第二个 URL 是带有 URL 参数的 BookmarkablePage 的 URL。见[安装页](http://wicketinaction.com/2011/07/wicket-1-5-mounting-pages/)

按照链接中的过程并通过标准 java 选项将页面参数传递给您的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:59:26.120

你读过页面参数吗？您可以通过访问[Apache Wicket 的主页](http://wicket.apache.org)找到一些东西，然后关注`Reference guide`, `Wicket reference`, `Pages`。

享受？

# spring - Spring中的内存结构

> ID：13856731
> 
> 赞同：0
> 
> 时间：2012-12-13T09:26:16.000
> 
> 标签：spring, in-memory

我是 Spring 新手用户。

我有一个数据库表，它本质上是静态的，只包含几条记录。我想要一个类似地图的结构（id - 名称），它包含这个表的两列。此 Map 必须在 Web 应用程序启动时加载/初始化，并且必须适用于整个应用程序的上下文，独立于用户会话并且必须是只读的。这样，我可以节省大量的数据库查询，因为不同的操作只会从这个 Map 中读取。

虽然我知道 Java EE 的 ServletContextListener 等，但我不知道如何在 Spring 中实现相同的功能。Spring Service bean 是初始化和存储此类 Map 的正确位置/方式吗？

请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:41:43.913

您可以创建一个常规 spring bean，公开一个方法，该方法从数据库加载您需要的数据并将其存储在您的地图中。使用 @PostConstruct 注释此方法，spring 将确保在您的应用程序上下文启动时调用它，从而加载您的地图。

您可以使用 springs JdbcTemplate 在此方法中加载数据

有关@PostConstruct 注释的信息，请参阅[Spring PostConstruct doco](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-postconstruct-and-predestroy-annotations)

有关 JdbcTemplate的信息，请参阅[JdbcTemplate doco](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:29:33.647

[您可以在Spring XML 配置](http://www.mkyong.com/spring/spring-collections-list-set-map-and-properties-example/)中配置列表、集合和映射。有关更多示例，请参见此处。

# c++ - 打开 QFile 进行追加

> ID：13856734
> 
> 赞同：20
> 
> 时间：2012-12-13T09:26:32.437
> 
> 标签：c++, file, qt, qfile

如何打开 QFile 进行附加，即相当于

```
FILE *f = fopen("myfile.txt", "a"); 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-13T09:32:06.293

以模式打开文件`QIODevice::Append`：

```
QFile f(...);
if (f.open(QIODevice::WriteOnly | QIODevice::Append)) {
  ...
} 
```

另请参阅[文档](http://doc.qt.io/qt-5/qfile.html#open-1)。

# vb.net - 使用 Linq 或 Lambda 通过升序计算外键在另一个表上出现的频率并排序

> ID：13856736
> 
> 赞同：0
> 
> 时间：2012-12-13T09:26:48.930
> 
> 标签：vb.net, linq, lambda, count

我有一个包含两个表的数据库。广告和记录作为它的外键。我需要计算广告记录出现的频率并按升序排列。

我假设我必须结合使用 join 和 group by 子句来完成此操作。它只是没有按照我想要的方式工作。以下是我到目前为止的代码。

```
 Public Shared Function SortAdsByHitCount() As DataTable
    Dim dt As New DataTable

    Try
        Using context As New QREntities()
            Dim ads = (From advertisement In context.QRAdvertisements
                      Join record In context.QRRecords On advertisement.adId Equals record.adId
                      Select advertisement.adId, advertisement.adRedirectUrl, advertisement.adType, advertisement.adData, count = record
                      Order By AdData Ascending).ToList()

            'Dim ads = (From advertisement In context.QRAdvertisements
            '          Group advertisement.adId By advertisement.adId Into Group _
            '          Order By Group.Count() Ascending _
            '          Select Advertisement.AdRedirectUrl, Advertisement.AdType, Advertisement.AdData, Count = Group.Count()).ToList()

            'Set the column headers and their accepted data types
            dt.Columns.Add("adId", GetType(Integer))
            dt.Columns.Add("adRedirectUrl", GetType(String))
            dt.Columns.Add("adType", GetType(String))
            dt.Columns.Add("adData", GetType(String))
            dt.Columns.Add("hitCount", GetType(Integer))

            For Each a In ads
                dt.Rows.Add(a.adId, a.adRedirectUrl, a.adType, a.adData, a.Count)
            Next
        End Using
    Catch ex As Exception
        Return Nothing
    End Try

    Return dt
End Function 
```

我基本上需要一张表中的 4 行，而我只包括另一张表中出现的次数。广告数据行必须知道它在记录表中出现了多少次。因此，从本质上讲，gridview/listview 将向用户显示按广告使用频率排序的广告列表。

例如：广告

```
Ad id   Ad Type         Ad Date          Ad Occurrence

1       Automotive      13/12/2012       10
2       Personal        10/12/2012       5
3       Retail          02/11/2012       3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:58:33.757

在这里，您需要使用分组功能，以便您可以访问`.Count()`组的扩展。在静态语法中执行此操作如下所示：

```
Dim ads = (From advertisement In context.QRAdvertisements
                      Group Join record In context.QRRecords 
                      On advertisement.adId Equals record.adId 
                      Into records = Group
                      Select advertisement.adId, advertisement.adRedirectUrl, advertisement.adType, advertisement.adData, count = records.Count()
                      Order By AdData Ascending).ToList() 
```

# php - MySQL Datediff 跳过周六和周日

> ID：13856750
> 
> 赞同：1
> 
> 时间：2012-12-13T09:27:30.730
> 
> 标签：php, mysql, datediff

我需要获取结束日期和开始日期之差小于或等于 2 的总行数。但如果我的开始日期是 2012 年 11 月 29 日和结束日期是 12-03-2012 我应该得到 2 而不是 4 的差异，因为 2012 年 12 月 1 日是星期六，2012 年 12 月 2 日是星期日。

DateE 是开始日期 ReplayDate 是结束日期

```
SELECT  
   DATE_FORMAT(DateE, '%Y-%m-%d') AS startdate,
   DATE_FORMAT(ReplyDate, '%Y-%m-%d') AS replydate,   
   DATEDIFF(ReplyDate,DateE) as diff
FROM emailtodb.emailtodb_email 
WHERE 
   Status = 2  
AND
   DATEDIFF(ReplyDate,DateE)<=2
AND 
   DATE_FORMAT(DateE, '%Y-%m-%d') 
BETWEEN 
   '2012-11-29' AND '2012-12-12'  
AND 
   TIME_FORMAT(DateE, '%H:%i:00') 
BETWEEN 
   '00:00' AND '23:59' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:28:06.223

您可以在 php 脚本中检查它。当您获取 startDate 和 endDate 和 dateDifference 然后检查

```
$startDay = date('l', $startDate);
$endDay = date('l', $endDate);

if ($dateDifference < 4){
     if ( $startDay == 'Saturday' || $startDay == 'Sunday' ){
        $dateDifference--;
     }
     if ( $endDay == 'Saturday' || $endDay == 'Sunday' ){
        $dateDifference--;
     }
 }
 else{
    $totalWeek = (int) $dateDifference / 7;
    $dateDifference -= ($totalWeek + 1)*2;

    if ($startDay == 'Saturday' && $endDay = 'Saturday')
        $dateDifference++;
    else if ($startDay == 'Sunday' && $endDay = 'Sunday')
        $dateDifference++;
    else
    {
         if($endDate == 'Saturday')
             $dateDifference++;
        if ($startDay == 'Sunday')
            $dateDifference++;
    }   
 } 
```

我还没有编译代码，但我希望它能工作

# php - 在ajax中添加更多参数

> ID：13856751
> 
> 赞同：0
> 
> 时间：2012-12-13T09:27:35.283
> 
> 标签：php, ajax

我正在使用 AJAX 功能。我使用 AJAX 将 3 个变量传递到下一页。当我添加第 4 个变量时，不会调用该函数。

```
Code:
     <script language="javascript" type="text/javascript">
            //Browser Support Code
            function ajaxFunction(){
                var ajaxRequest;  // The variable that makes Ajax possible!

                try{
                    // Opera 8.0+, Firefox, Safari
                    ajaxRequest = new XMLHttpRequest();
                } catch (e){
                    // Internet Explorer Browsers
                    try{
                        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                    } catch (e) {
                        try{
                            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                        } catch (e){
                            // Something went wrong
                            alert("Your browser broke!");
                            return false;
                        }
                    }
                }
                // Create a function that will receive data sent from the server
                ajaxRequest.onreadystatechange = function(){
                    if(ajaxRequest.readyState == 4){

                        var ajaxDisplay = document.getElementById('ajaxDiv');
                        ajaxDisplay.innerHTML = ajaxRequest.responseText;
                    }
                }

             var count = document.getElementById('count').value;
             var type = document.getElementById('type').value;
             var sem = document.getElementById('sem').value;
              var rid = document.getElementById('room').value;

          ajaxRequest.open("GET", "add_requi_ajax.php?count=" + count+"&type="+ type+"&sem="+sem+"&rid="+rid, true);

        ajaxRequest.send(null);
    };
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:43:06.110

您的代码在语法和逻辑上都是正确的，这意味着问题可能是您的输入 ID 之一错误（错字？应该`room`是`rid`？），或者您在输入呈现在页面上之前调用了该函数（使用`window.onload`）。

验证您的每个输入 ID。如果它们看起来都正确，则将它们注释掉并对值进行硬编码以排除您的输入存在问题。查看错误控制台以获取任何错误消息。如果遇到未捕获的错误，则可能*显示*该函数没有被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:35:12.933

您可能需要对您的价值观进行 urlencode。

# php - WordPress 和 PHP 集成

> ID：13856753
> 
> 赞同：-1
> 
> 时间：2012-12-13T09:27:41.160
> 
> 标签：php, wordpress

我目前已经加入了一个 wordpress 网站。我想制作一个 PHP Web 应用程序，一个登录和下载 mp3 部分，不一定对公众开放。

无论如何，我们已经支付了一个主题，而不是写一堆看起来不像主题的页面，我希望它看起来像网站的其余部分。但我看不到如何将 PHP 添加到这件事上。我听说过 page.php，但我不希望代码影响所有页面。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:43:02.953

您可以执行以下任一操作：

1.  编写一个自定义的 wordpress 插件（不难，我已经写过 dosens）。然后将该插件放在仪表板中的 wordpress 页面上（不是帖子）。您可以使用内容过滤器来触发插件。然后它将在已由主题呈现的页面的上下文中执行。

2.  创建自定义页面类型。您可以通过物理复制和编辑然后修改其中一个主题文件来完成此操作。然后您在仪表板中创建一个新的 wordpress 页面（同样，不是帖子）。在 wordpress 中格式化页面时，您可以选择页面类型。您可以在此处选择新的自定义版本的主题页面模板。

对于选项 1，您将必须阅读示例插件的代码，并研究[Wordpress Codex](http://codex.wordpress.org/Main_Page)上的文档。对于选项 2，网上可能有一些教程。谷歌应该帮助你。

# javascript - Ember.Application.create 带有 mixin 和参数

> ID：13856755
> 
> 赞同：4
> 
> 时间：2012-12-13T09:27:43.907
> 
> 标签：javascript, ember.js

我正在使用 Ember.Facebook mixin (https://github.com/luan/ember-facebook) 创建一个 ember 应用程序，它需要将 Ember 应用程序定义为：

```
App = Ember.Application.create(Em.Facebook); 
```

但是，我需要为我的应用程序定义一些参数，例如

```
{
rootElement: 'survey',
autoinit: false,
nextStep: 1,
appId: 113411778806173
} 
```

理想情况下，这些是使用添加到应用程序中的

```
App = Ember.Application.create({
  rootElement: 'survey',
  autoinit: false,
  nextStep: 1,
  appId: 113411778806173
}); 
```

以便它们在运行时存在，但是有必要将 App.setProperties() 与 ember.facebook mixin 一起使用。

如何在 Em.Application.create() 调用中定义 mixin 和参数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T12:33:02.067

在 ember master 中，使用：

```
App = Ember.Application.createWithMixins(Em.Facebook, {
  rootElement: 'survey',
  autoinit: false,
  nextStep: 1,
  appId: 113411778806173
}); 
```

在之前的 ember 版本中，您可以使用`create`相同的语法。

# http - JSF 可恢复文件上传

> ID：13856756
> 
> 赞同：2
> 
> 时间：2012-12-13T09:27:50.830
> 
> 标签：http, jsf, file-upload, resume

我想用 JSF 上传文件。我希望能够在暂停后恢复上传（自愿或非自愿）。它们的大小约为 500Mb。

我正在使用 PrimeFaces，它有一个简洁的 FileUpload-Tag，但它不允许我暂停/恢复上传。

我对此做了一些研究。最常见的答案是“使用 FTP 客户端”。其他的是 Java-Applet 或 Flash。

它应该适用于当前的 Firefox/Chrome 和 IE8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:03:30.840

确实不可能通过 HTML`<input type="file">`元素恢复文件上传。`multipart/form-data`编码中没有任何东西可以支持它。更重要的是，没有标准的格式编码规范支持它。您基本上需要发明一种自定义 HTTP 请求格式。

在 Java 术语中，最好的办法是为此自制一个 applet 或 webstart 应用程序，它使用 Swing`JFileChooser`来挑选文件并用于`URLConnection`通过 HTTP 将其发送到服务器。在服务器端，您需要一个`Servlet`了解自定义请求格式并相应处理部分上传的自定义项。

有一个第 3 方小程序可以做到这一切：[JumpLoader](http://jumploader.com/)。不幸的是，它的主页目前已关闭（但是您可以尝试使用 Google Cache）。最重要的是，它发送一些特定的 HTTP 请求参数以及`multipart/form-data`上传请求，告诉服务器端是否是部分上传，如果是，它应该从哪个索引开始，以便 servlet 可以将各个部分粘合在一起。

然后，要将这一切与 JSF 集成，最好的办法是让 applet 将会话 ID 作为 URL 路径片段传递，以便 servlet 与 JSF 应用程序共享相同的 HTTP 会话。这样，上传 servlet 可以访问会话范围内的 JSF 托管 bean 和/或 JSF 应用程序可以轮询 HTTP 会话中的某些特定于 servlet 的变量。

# android - Android：替代已弃用的 Context.MODE_WORLD_READABLE？

> ID：13856757
> 
> 赞同：15
> 
> 时间：2012-12-13T09:27:52.163
> 
> 标签：android, video, video-processing

[从这里](https://stackoverflow.com/questions/7710486/android-how-do-i-save-a-file-that-is-readable-by-an-other-app)我知道了一种编写文件并可供其他应用程序和其他意图访问的方法，但现在 Context.MODE_WORLD_READABLE 已弃用，我该如何安全地完成此操作？

```
FileOutputStream out = myActivity.openFileOutput(fileTo, Context.MODE_WORLD_READABLE); 
```

好的更多信息：

我正在使用这个：

```
intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(uri, "video/*"); 
```

uri 将是我将写入 sdcard 位置的那个。视频将来自应用程序，所以问题是，如果现在不允许这样做，我该如何编写文件并查看它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T13:04:43.050

> uri 将是我将写入 sdcard 位置的那个。

这已经`MODE_WORLD_WRITABLE`是默认的了。另请注意，您列出的代码 ( `openFileOutput()`) 不会*写入*外部存储（您错误地称为“sdcard”）。`openFileOutput()`用于内部存储。

> 视频将来自应用程序，所以问题是，如果现在不允许这样做，我该如何编写文件并查看它。

如果您真的要将文件写入外部存储，只需使用`Uri`指向该文件的指针。

如果您要将文件写入内部存储，请创建一个`ContentProvider`来提供该文件，并使用`Uri`指向该`ContentProvider`. [这是一个示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Files)，它在第一次运行时`ContentProvider`提取 PDF 文件，然后通过提供该文件，以便 PDF 查看器查看。`assets/``openFile()`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-27T00:08:08.753

使用以下方法将视频保存在内部存储器中：

```
openFileOutput("test.mp4", "MODE_PRIVATE"); 
```

然后这样做：

```
String path = context.getFilesDir().getAbsolutePath() + "/test.mp4"; // path to the root of internal memory.
File f = new File(path);
f.setReadable(true, false);
Intent playIntent ....
playIntent.setType("video/*");
playIntent.setData(Uri.fromFile(f)); 
```

祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T09:29:55.570

看起来文档对此很清楚。

> 此常量在 API 级别 17 中已弃用。
> 
> 创建世界可读的文件是非常危险的，并且可能会导致应用程序中的安全漏洞。强烈建议不要这样做；相反，应用程序应该使用更正式的交互机制，例如 ContentProvider、BroadcastReceiver 和 Service。无法保证此访问模式将保留在文件上，例如在进行备份和恢复时。文件创建模式：允许所有其他应用程序对创建的文件具有读取权限。

# iphone - 变换表视图

> ID：13856758
> 
> 赞同：0
> 
> 时间：2012-12-13T09:27:52.997
> 
> 标签：iphone, ios, uitableview

我想为单元格显示图像。但是这段代码显示，只有白色的tableview。为什么？请告诉我。（我不使用故事板。）

表格单元格.h

```
#import <UIKit/UIKit.h>

@interface TableCell : UITableViewCell <UITableViewDelegate,UITableViewDataSource>

@property (nonatomic,retain) UITableView *tableCellView;
@property (nonatomic,retain) NSArray *cellArray;

-(NSString *)reuseIdentifier;

@end 
```

表格单元格.m

```
 #import "TableCell.h"

@implementation TableCell

@synthesize tableCellView;
@synthesize cellArray;

-(NSString *)reuseIdentifier
{
    return @"cell";
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [cellArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [self.tableCellView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    for (UIImageView *view in cell.subviews)
    {
        [view removeFromSuperview];
    }

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 200, 200)];
    imageView.image = [UIImage imageNamed:[cellArray objectAtIndex:indexPath.row]];
    imageView.contentMode = UIViewContentModeCenter; // 画像サイズを合わせて貼る

    CGAffineTransform rotateImage = CGAffineTransformMakeRotation(M_PI_2); 
    imageView.transform = rotateImage; 

    [cell addSubview:imageView];
    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    return 220;
}

@end 
```

表视图控制器.h

```
 #import <UIKit/UIKit.h>

@class TableCell;

@interface TableViewController : UIViewController <UITableViewDataSource,UITableViewDelegate>

@property (nonatomic, retain) UITableView *tableView;
@property (nonatomic, retain) TableCell *tableViewCell;
@property (nonatomic, retain) NSArray *titlesArray;
@property (nonatomic, retain) NSArray *peopleArray;
@property (nonatomic, retain) NSArray *thingsArray;
@property (nonatomic, retain) NSArray *fruitsArray;
@property (nonatomic, retain) NSArray *arrays;

@end 
```

表视图控制器.m

```
#import "TableViewController.h"
#import "TableCell.h"

@interface TableViewController ()

@end

@implementation TableViewController

@synthesize tableView;
@synthesize tableViewCell;
@synthesize titlesArray;
@synthesize peopleArray;
@synthesize thingsArray;
@synthesize fruitsArray;
@synthesize arrays;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tableView.delegate = self;
    self.tableView.dataSource = self;

    tableView = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] bounds] style:UITableViewStylePlain];
    [self.view addSubview:tableView];

    titlesArray = [[NSArray alloc] initWithObjects:@"People", @"Things", @"Fruits", nil];
    peopleArray = [[NSArray alloc] initWithObjects:@"Gardener.png", @"Plumber.png", @"BusinessWoman.png", @"BusinessMan.png", @"Chef.png", @"Doctor.png", nil];
    thingsArray = [[NSArray alloc] initWithObjects:@"StopWatch.png", @"TrashCan.png", @"Key.png", @"Telephone.png", @"ChalkBoard.png", @"Bucket.png", nil];
    fruitsArray = [[NSArray alloc] initWithObjects:@"Pineapple.png", @"Orange.png", @"Apple.png", nil];

    arrays = [[NSArray alloc] initWithObjects:peopleArray, thingsArray, fruitsArray, nil];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return [arrays count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [titlesArray objectAtIndex:section];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 220;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    TableCell *cell = (TableCell *)[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"TableViewCell" owner:self options:nil];

        CGAffineTransform rotateTable = CGAffineTransformMakeRotation(-M_PI_2);
        tableViewCell.tableCellView.transform = rotateTable;
        tableViewCell.tableCellView.frame = CGRectMake(0, 0, tableViewCell.tableCellView.frame.size.width, tableViewCell.tableCellView.frame.size.height);

        tableViewCell.cellArray = [arrays objectAtIndex:indexPath.section];

        tableViewCell.tableCellView.allowsSelection = YES;
        cell = tableViewCell;

    }

    return cell;
}

@end 
```

AppDelegate.m

```
TableViewController *tvc = [[TableViewController alloc] init];
    self.window.rootViewController = tvc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:48:48.177

如果 UITableViewCell 的样式是默认的，则每个 UITableViewCell 都有图像支持。

> cell.imageView.image = yourImageView.image;

你不需要做任何其他事情。

如果需要，您可以通过更改 yourImageView 设置来更改图像设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:35:22.767

您的`numberOfSectionsInTableView`方法可能返回 0。检查`[arrays count]`. 还有一件事是你没有`UITableViewCell`以正确的方式被创造出来。这也可能是问题所在。检查此[链接](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)以创建自定义`UITableViewCell`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:37:40.303

UITableViewCell 默认已经支持图片。您不需要**添加**新的 UIImageView 作为子视图...

所以代替这个：

```
for (UIImageView *view in cell.subviews)
{
    [view removeFromSuperview];
}

UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 200, 200)];
imageView.image = [UIImage imageNamed:[cellArray objectAtIndex:indexPath.row]];
imageView.contentMode = UIViewContentModeCenter; // 画像サイズを合わせて貼る

CGAffineTransform rotateImage = CGAffineTransformMakeRotation(M_PI_2); 
imageView.transform = rotateImage; 

[cell addSubview:imageView]; 
```

写这个：

```
cell.imageView.image = [UIImage imageNamed:[cellArray objectAtIndex:indexPath.row]]; 
```

哦，我现在注意到你的代码有很多其他的东西有问题！很抱歉这么说。您需要更改的其他内容：

1.  将此方法从您的 TableCell 复制到您的 TableViewController:`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`并删除现有的
2.  删除 TableCell 类

我看到你也在做轮换......但现在把它放在一边。首先尝试使其工作，然后担心图像的旋转。

我可以建议你读一本关于 iOS 开发的书吗？好像你根本不知道自己在做什么:(

但我很想帮你。你能把你所有的代码放在[http://www.github.com](http://www.github.com)上并邀请我作为合作者吗？我的用户名是 tomvanzummeren。我可以让这个应用程序为你工作。

# java - 如何使用不同的形状进行 Jung 形状变换

> ID：13856761
> 
> 赞同：0
> 
> 时间：2012-12-13T09:27:59.747
> 
> 标签：java, graph, jung

我正在使用 jung 库来绘制我的抓地力，所以我想知道是否有任何方法可以创建不同形状的顶点而不是创建椭圆。例如，我想要八角形。这就是我设置形状的方式：

```
 Transformer<String,Shape> vertexSize = new Transformer<String,Shape>(){

    @Override
    public Shape transform(String str) {
        Ellipse2D circle = new Ellipse2D.Double(-5, -5, 10, 10);
        if(drugnames.contains(str)){
            return AffineTransform.getScaleInstance(3,3).createTransformedShape(circle);
        }
        else{
            return AffineTransform.getScaleInstance(1,1).createTransformedShape(circle);
        }

        // TODO Auto-generated method stub
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:23:07.133

```
VisualizationViewer.getRenderContext().setVertexShapeTransformer(vst) 
```

其中 vst 是一个`Transformer<V, Shape>`。

```
AbstractVertexShapeTransformer can do a lot of the heavy lifting for you. 
```

请参阅`PluggableRendererDemo`这些实际操作的示例（源代码是分发的一部分）。

# mysql - 当主数据库关闭时，如何切换到 Django 中的备份数据库？

> ID：13856762
> 
> 赞同：5
> 
> 时间：2012-12-13T09:28:00.610
> 
> 标签：mysql, database, django

我已经阅读了 Django MultiDB 文档[https://docs.djangoproject.com/en/1.4/topics/db/multi-db/](https://docs.djangoproject.com/en/1.4/topics/db/multi-db/)并用谷歌搜索了一段时间，但仍然无法提出解决方案。

情况：有一个 Django 应用程序和一个 MySQL 数据库。该数据库设置在两台具有主-主复制的服务器上。Django 应用程序配置为使用 Django 文档中修改后的 slave-master 示例从它们两者中读取。读取和写入都可以正常工作，并且随机进入两个数据库。

问题：Server1 宕机。现在一半的数据库请求失败。

如何配置 Django 和/或 MySQL，以使 Django 在一个 MySQL 服务器出现故障的情况下继续完全工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T20:07:01.403

HAProxy 是可用于此目的的生产级解决方案。MySQL 对的平衡或自动故障转移充满了陷阱，请检查您是否正在对自动增量进行分区等！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T18:46:12.117

虽然 mysql-proxy 可能很好用，但这完全取决于您的站点。

这是一个生产质量、创收的网站吗？如果是这样，我会建议一个适当地平衡负载的实际负载平衡器。然后，如果一台服务器出现故障，所有连接都将发送到一台实时数据库服务器。

我说不应该使用 mysql-proxy 的原因是它是一个 alpha 产品，不应该用于产生收入的生产角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:39:31.137

使用[mysql-proxy 之](http://dev.mysql.com/downloads/mysql-proxy/)类的 mysql 代理。您可以使用它进行负载平衡和自动故障转移。

# parallel-processing - MPI_Alltoall() 如何工作？

> ID：13856768
> 
> 赞同：1
> 
> 时间：2012-12-13T09:28:22.033
> 
> 标签：parallel-processing, mpi

我正在做 MPI 编程，使用它的功能对我来说有点不清楚。假设我有 4 个处理器，每个处理器都知道一个数组：

```
P0 : iarr{a0, a1, a2, a3}
P1 : iarr{b0, b1, b2, b3}
P2 : iarr{c0, c1, c2, c3}
P3 : iarr{d0, d1, d2, d3} 
```

我想要另一个数组（oarr）获取这些值：

```
P0 : oarr{a0, b0, c0, d0}
P1 : oarr{a1, b1, c1, d1}
P2 : oarr{a2, b2, c2, d2}
P3 : oarr{a3, b3, c3, d3} 
```

我知道这是一个经典示例或 MPI_Alltoall()，但我的代码不起作用。它会生成一些内存映射信息作为错误结果。

我正在用 C 编写代码，我的代码如下所示：

```
int *iarr = NULL, *oarr = NULL;
....
MPI_Alltoall(&iarr, P, MPI_INT, &oarr, P, MPI_INT, MPI_COMM_WORLD); 
```

iarr 有一些值，而 oarr ahs 只有 0。我做对了吗？！http://stackoverflow.com/questions/ask

部分错误输出：

```
[NYPC:20583] *** Process received signal ***
[NYPC:20583] Signal: Segmentation fault (11)
[NYPC:20583] Signal code: Address not mapped (1)
[NYPC:20583] Failing at address: 0x2
[NYPC:20582] *** Process received signal ***
[NYPC:20582] Signal: Aborted (6)
[NYPC:20582] Signal code:  (-6)
[NYPC:20583] [ 0] [0xb77d940c]
[NYPC:20583] [ 1] ./ex31(votes_mpi+0x18e) [0x8048e38]
[NYPC:20583] [ 2] ./ex31(main+0x1c0) [0x8048b6c]
[NYPC:20583] [ 3] /lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0xb75684d3]
[NYPC:20582] [ 0] [0xb771740c]
[NYPC:20582] [ 1] [0xb7717424]
[NYPC:20582] [ 2] /lib/i386-linux-gnu/libc.so.6(gsignal+0x4f) [0xb74bb1df]
[NYPC:20582] [ 3] /lib/i386-linux-gnu/libc.so.6(abort+0x175) [0xb74be825]
[NYPC:20582] [ 4] /lib/i386-linux-gnu/libc.so.6(+0x6b39a) [0xb74f839a]
[NYPC:20582] [ 5] /lib/i386-linux-gnu/libc.so.6(+0x75ee2) [0xb7502ee2] 
```

# javascript - 获取带有 chrome 扩展名的打开邮件的 gmail 消息正文

> ID：13856769
> 
> 赞同：2
> 
> 时间：2012-12-13T09:28:23.500
> 
> 标签：javascript, google-chrome, google-chrome-extension, gmail

对于一个项目，我需要获取当前打开的消息的正文并将该消息传递给 Web 服务以处理和存储它的一些数据。

我认为最好的方法是使用扩展来获取消息正文（以及一些附加信息），然后将其作为 Web 请求发送到服务以插入数据库。

但我不知道我应该如何处理这个问题。我按照一些教程让我开始使用 chrome 插件，但我找不到如何获取消息的正文。

我发现你需要它的内容脚本，但即便如此我也不知道。

谁能给我一个先机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-08T05:49:10.323

每封电子邮件都有自己的唯一消息 ID。

用于`content.js`从元素中获取“messageId”，然后将其传递给以[`Gmail API`](https://developers.google.com/gmail/api/)获取电子邮件数据。

样本：

`<div class="adn ads" style="display:" data-message-id="189******56e***3" data-legacy-message-id="189******56e***3">`

API 以各种格式返回电子邮件的数据。其中之一是“原始”格式，它将完整的电子邮件正文作为 base64url 编码的字符串返回。将此数据按原样发送到您的服务器，然后解密电子邮件并将其保存到您的数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T06:43:55.387

这是我想出的代码，请务必在附加部分中添加按钮，并为它们提供一个带有计数的 id。这会等待 div 在单击或加载时到达，它会在加载后将附加的材料插入指定区域。无需担心随机类，因为它们是静态的。该代码已经运行了两年。

```
 window.addEventListener("DOMNodeInserted", function(event) {
       //TEST TO SEE WHERE CSS IS AT
        // $(event.target).append($(event.target).parent()[0].className);
        if($(event.target).parent()[0].className == 'oc gU')
        {

            //ADD SEND BUTTON FOR MESSAGES
            //SUBJECT OF ENTIRE EMAIL GLOBAL
            var subject = $(event.target).parents().eq(28).children(1).find(".hP").text();

            //GET DATA EMAIL AND NAME 
            //Can assign via id or data-name and jid for email
            var imageid = $(event.target).parents().eq(18).find("img[jid]").attr("id");

           //THIS IS THE SEND BUTTON IN REPLAY ADD A BUTTON NEXT TO IT WITH THIS                     
           $(event.target).parents().eq(1).find(".gU.Up").children(0).append("addbuttonid here");
           //set click event for button
            $('#'+addbuttonid).click(function(){       
                //TO DO HERE
                //BODY FROM the REPLY MESSAGE
                var body = $(event.target).parents().eq(11).find('.Am').text();
                //PREVIOUS THREAD MESSAGES OPTIONAL
                var body = body + $(event.target).parents().eq(11).find('.gmail_extra').text();

            });

        }
        else if($(event.target).parent()[0].className == "aCi")
        {
           //THREAD MESSAGE
           //GET EMAIL SUBJECT
           var subject = $(event.target).parents().eq(17).children(1).find(".hP").text();
           //GET TO INFO
           var to = $(event.target).parents().eq(7).find('.g2');
           //GET NAME AND EMAIL
           var imageid = $(event.target).parents().eq(7).find("img[jid]").attr("id");
           var value = $("#\\"+imageid).attr("jid");
           var vname = $("#\\"+imageid).attr("data-name");
           //GET DOCUMENT BODY
           var tmp = $(event.target).parents().eq(6).find(".gs");
           var body = tmp.text();

           //GET DOCUMENT DATE
           var date = $(event.target).parents().eq(7).find('.g3').attr('title');
           date = date.replace(" at ", " ");
           //ADD THE BUTTONS HERE WITH INITIAL VALUES
            $(event.target).parents().eq(6).append('addbutton2');

            $("#"+addbutton2).click(function(event){
                var email = $("#\\"+$(this).attr("data-imageid")).attr("jid");
                var name = $("#\\"+$(this).attr("data-imageid")).attr("data-name");
                var body = $(this).attr("data-body");
                //TOD FOR BUTTON NEXT TO REPLY ICON ON THREAD AS OPENED

            });

        }
}); 
```

正如您使用此代码所看到的，您现在可以在回复部分或线程中的任何消息中添加按钮 i gmail UI，以及您的欢迎 :)。这是唯一的代码，除非您自己通过 Chrome 扩展程序工作。Gmail.js 或使用 API 根本不是必需的，因为您可以从页面中提取数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-25T12:26:17.493

这就是你的过程应该是：

1.  打开邮件后，您应该会在电子邮件正文或 gmail 中的某处看到一个按钮。

2.  单击该按钮应复制电子邮件的正文并将其推送到 Web 服务器。

3.  如果要自动复制粘贴消息，可以默认单击此按钮。

对于这个过程——

1.  创建一个`content_script.js`文件并将按钮放置在 gmail DOM 中。

2.  单击按钮后，发送一条消息至`eventpage.js`，该消息将包含当前打开的电子邮件的正文。请注意，我没有使用过`background.js`，而是`eventpage.js`因为谷歌要求您避免使用`background.js`，并且两者都相同，持久性差异不大。

3.  您的网络服务器可以接收并存储消息。

如果您想避免按钮过程，那么`content_script.j`s 应该自动查找电子邮件打开事件并重复上述过程。但我建议您保留该按钮，因为有时您可能会单击不想复制的消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-14T23:36:38.650

这是一个老问题，但经过几天的尝试，我找到了答案。要获取电子邮件标题，请遍历包含电子邮件标题的 HTMLCollection，该电子邮件标题可以通过类名 hP 找到：

```
var list= document.getElementsByClassName("hP");
for (var i = 0; i < list.length; i++) {
    console.log(list[i].innerText);
} 
```

要获取电子邮件正文，请遍历包含电子邮件正文（类 ii）的 HTMLCollection：

```
var list= document.getElementsByClassName("ii");
for (var i = 0; i < list.length; i++) {
    console.log(list[i].innerText);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T02:27:21.673

如果我必须这样做，我会尝试在 GMAIL 客户端上找出包含正文的 DIV 的 ID...使用 jQuery 获取 DIV 的 HTML 或文本内容非常简单...看看：[http ://api.jquery.com/html/](http://api.jquery.com/html/)

一个简单的 jQuery 选择器看起来像这样：

```
$("#gmailsBodyDivID").html() 
```

如果 jQuery 不是一个选项，您可以使用 JavaScript `getElementByID`(http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)获取 DIV

最后，正如 DudeOnRock 所提到的，您应该对 Web 服务使用 Ajax 请求。

困难的部分是要知道 Gmail 如何命名您要查找的 DIV...我只是快速浏览了一下，在我的上，有一些奇怪的命名...

```
<div id=":w1" class="ii gt adP adO"><div id=":w2"> 
```

我不确定 ":w1" 或 ":w2" 代表什么，也不知道如何将它们与 jQuery 选择器一起使用......也许更有知识的人可能会在那里有所启发。

......所以我想你应该首先关注那个......

如果 ID 证明很难，您可能希望通过类名使用 jQuery 选择器...

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-29T16:31:55.273

我不确定您的项目的确切要求是什么，但是是否可以只设置一个电子邮件地址来将这些电子邮件转发到？

从那里，您只需要以您的首选语言设置服务器来检查新电子邮件并处理它们（过滤内容，插入数据库等）。

好处：

*   您没有被锁定使用 Chrome + 扩展程序
*   您可以使用任何浏览器、设备、电子邮件应用程序来转发电子邮件
*   您无需破译凌乱的 Gmail HTML
*   更改 Gmail 中的 HTML/JS/CSS 不会破坏您的内部流程
*   无需维护/更新 Chrome 扩展，事情会发生变化（他们会）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-05T17:49:50.567

这很难。正如@frenetix 指出的那样，您可以获取所需元素的 ID 并遵循他（或她）的方法。困难的是，Google 实际上几乎每次加载 Gmail 时都会更改元素 ID，这几乎是不可能的。

您可以做的一件事是假设您（或用户）正在单击撰写窗口。然后您可以执行“document.activeElement”来获取正确的 DOM 元素。这至少会让你更进一步能够做你想做的事，尽管它还没有完全实现。

祝你好运。我现在在这个领域工作，这很艰难。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-14T23:33:07.243

Chrome 扩展程序本质上是用 JavaScript 编写的。如果至少对 JavaScript 有一些了解，你打算做的事情将非常困难。以下是一些提示： 要访问网站元素，我建议您学习使用 JavaScript 进行 DOM 操作。要将数据发送到网站，您将不得不使用 HTTPRequests (AJAX)。

# backbone.js - Yii & Backbone.js - renderPartial 多次注册相同的脚本

> ID：13856771
> 
> 赞同：0
> 
> 时间：2012-12-13T09:28:40.043
> 
> 标签：backbone.js, yii

我使用 Backbone 路由器对 Yii 操作进行 ajax 调用，从而加载部分视图

```
this->renderPartial('_foo',null,false,true); 
```

但是当我多次使用同一个 ajax 调用时，问题就出现了，它一次又一次地从局部视图加载所有脚本，这反过来又破坏了应用程序。

有没有办法使用相同的动作调用模式来解决这个问题？或者如果不是我应该如何让 Yii 和 Backbone 合作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:30:57.583

当涉及到需要加载额外脚本的元素的 ajax 调用时，Yii 小部件的设计非常糟糕。

bool.dev 在评论中发布的解决方案是我处理此问题的首选方式，但还有其他方法，如果无论出于何种原因（您似乎就是这种情况）都不起作用。

在您的主视图文件（您使用 render() 调用的文件，而不是 partialRender() 调用的文件）中，包括以下内容：

`$this->renderPartial('_foo',null,true,true);`

这将强制您的主页调用（因此，在 ajax 调用之前）包含脚本。由于第三个参数现在为真，它将以字符串的形式返回内容，然后由于我们没有将其存储在任何地方而被丢弃。

然后对于 ajax 调用，使用

`$this->renderPartial('_foo',null,false,false);`

要不就

`$this->renderPartial('_foo');`

因为最后 3 个参数只是默认值。

这将防止脚本被多次加载，但仍然存在，因为它们存在于原始页面加载而不是 ajax 调用中。

根据您的`_foo`视图文件中的内容，您可能需要制作一个特殊文件。所需要的只是您想要脚本文件的小部件的虚拟用法。

请记住，您要做的只是强制小部件在主页调用上运行，以便它注册其脚本，然后丢弃剩余的输出。然后在 ajax 调用中通过将 processOutput 参数设置为 false 来忽略它注册的所有脚本。

# iphone - ios中的NSCaseInSensitive

> ID：13856773
> 
> 赞同：1
> 
> 时间：2012-12-13T09:28:50.043
> 
> 标签：iphone, ios

我正在做一个子字符串比较，我这样做了

```
 if ([mystring rangeOfString:string options:NSCaseInsensitiveSearch].location == NSNotFound) {
        return NO;
    } else {
        return YES;
    } 
```

但这在与 Read 和 READ 比较时不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:32:48.507

抱歉，但是您的代码对我有用...如果我在 XCode 中执行此操作：

```
if ([@"Read" rangeOfString:@"READ" options:NSCaseInsensitiveSearch].location == NSNotFound) {
    NSLog(@"NO!!");
} else {
    NSLog(@"YES!!");
} 
```

我得到这个输出：

```
YES!! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:47:47.210

它会工作，试试这个

```
NSString *str = @"Read";
NString *matchStr = @"READ";

if ([[str lowercaseString] rangeOfString:[matchStr lowercaseString] ].location == NSNotFound) {
NSLog(@"NO!!");
} else {
NSLog(@"YES!!");
} 
```

# c# - C# - 函数中的多维数组参数

> ID：13856774
> 
> 赞同：0
> 
> 时间：2012-12-13T09:28:51.563
> 
> 标签：c#, multidimensional-array

说我有一个功能：

```
static void foo(int[,] arr, arg1)
{
    //say arg1 = row - 1

    for(int row = 0; row < arr.GetLength(0); row++)
    {  
         for(int col = 0; col < arr.GetLength(1); col++)
         {
             MessageBox.Show(arr[arg1 , col]) // should be equal to arr[row-1,col]
         }
    }
}
foo(arr, "row-1"); // should be equal to arr[row-1,col] 
```

我想用`arg1`.
这可能吗？
arg1 应该是什么类型？
我怎么写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:33:54.847

您可以通过传递`Func<int,int>`给函数来做到这一点：

```
static void foo(int[,] arr, Func<int,int> arg1)
{
    //say arg1 = row - 1

    for(int row = 0; row < arr.GetLength(0); row++)
    {  
         for(int col = 0; col < arr.GetLength(1); col++)
         {
             int newRow = arg1(row);
             MessageBox.Show(arr[newRow, col]) // should be equal to arr[row-1,col]
         }
    }
} 
```

然后用代表你想要做的转换的 lamda 调用它。

```
foo(arr, x => x-1); 
```

这种方法的问题是第一轮迭代`row`它会有值`0`。通过从中减去 1，您可以尝试获取`arr[-1,col]`超出数组边界的值。我不确定您要实际实现什么，所以我只能猜测您想在以下位置启动`row`变量`1`：

```
for(int row = 1; row < arr.GetLength(0); row++) 
```

或者更复杂的 lambda 规则：

```
foo(arr, x => x>0 ? x-1 : 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:33:09.613

```
static void foo(int[,] arr, int arg1){
for(int row = 0; row < arr.Length; row++)
{  
     for(int col = 0; col < arr[row].Length); col++)
     {
         if (row-1 >= 0 && arg1 < arr.Length && arr[arg1 , col] == arr[row-1,col])
             MessageBox.Show("found it!"); // should be equal to arr[row-1,col]
     }
}
} 
```

# c# - SignalR 客户端是否在 .NET Compact Framework 上运行？

> ID：13856783
> 
> 赞同：6
> 
> 时间：2012-12-13T09:29:08.297
> 
> 标签：c#, .net, compact-framework, signalr

我还没有找到关于[SignalR](http://signalr.net/)支持哪些平台的任何文档，并且想知道 SignalR Client 是否在 .NET Compact Framework 上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T10:47:19.990

SignalR .NET 客户端由 TPL (http://msdn.microsoft.com/en-us/library/dd460717(VS.100).aspx) 构建，仅适用于 .NET 4.0 及更高版本。有一个 .NET 3.5 版本，但我们已在最新版本中弃用它。您当然可以为紧凑框架编写客户端，但我们目前没有编写客户端的计划。

# r - R中的非线性回归分析

> ID：13856787
> 
> 赞同：2
> 
> 时间：2012-12-13T09:29:23.230
> 
> 标签：r, regression, non-linear-regression

我是 R 新手，但我正在寻找一种方法来确定与 R 中的以下函数相关的三个参数 A、B 和 C：

`y = A * (x1^B) * (x2^C)`

有人可以给我一些关于 R 方法的提示，以帮助我实现这样的拟合吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T20:00:55.540

一种选择是`nls`@SvenHohenstein 建议的功能。另一种选择是将非线性回归转换为线性回归。在这个方程的情况下，只需取方程两边的对数并做一点代数，你就会得到一个线性方程。您可以使用以下方法运行回归：

```
fit <- lm( log(y) ~ log(x1) + log(x2), data=mydata) 
```

截距将`log(A)`用于`exp`获取值，B 和 C 参数将是 2 个斜率。

此处最大的区别在于，`nls`它将拟合模型，并将正态误差添加到原始方程中，而对`lm`数拟合假设原始模型中的误差来自对数正态分布并且被相乘而不是添加到模型中。许多数据集将为这两种方法提供类似的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T09:36:13.200

您可以使用函数 拟合非线性最小二乘模型`nls`。

```
nls(y ~ A * (x1^B) * (x2^C)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-21T16:03:28.953

为什么不使用 SVM（支持向量机）回归？CRAN 中有一个名为的包`e1071`，可以使用 SVM 处理回归。

您可以查看本教程：[http ://www.svm-tutorial.com/2014/10/support-vector-regression-r/](http://www.svm-tutorial.com/2014/10/support-vector-regression-r/)

我希望它可以帮助你

# c - 在 hostapd 中使用 eloop_register_timeout 创建的 Timer 是否异步运行

> ID：13856788
> 
> 赞同：0
> 
> 时间：2012-12-13T09:29:24.703
> 
> 标签：c, timer

我想知道 Timer 是否用

```
int eloop_register_timeout  (unsigned int   secs,
                             unsigned int   usecs,
                             eloop_timeout_handler  handler,
                             void *     eloop_data,
                             void *     user_data 
                             ) 
```

在 hostapd 中异步运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:33:39.117

不，计时器到期时在事件循环线程中运行。

# gcc - GCC 内联汇编错误：错误：表达式后出现垃圾 `(%esp)'

> ID：13856792
> 
> 赞同：3
> 
> 时间：2012-12-13T09:29:29.647
> 
> 标签：gcc, assembly, inline-assembly

GCC 内联汇编错误：错误：表达式后出现垃圾 `(%esp)'

我正在研究 gcc 内联汇编。我的环境是Win 7 32bit，mingw-gcc 4.6.1。

我对“m”约束有疑问。这是我的c函数代码：

```
static int asm_test(int a, int b)
{

    int c = 0;
    __asm__ __volatile__(".intel_syntax\n"
            "mov eax, %1\n" //error
            "mov edx, %2\n" //error
            "add eax, edx\n"
            "mov %0, eax\n" //error
            ".att_syntax"
            :"=m"(c)\
            :"m"(a),"m"(b)\
            :"eax","edx"
            );
    return c;
} 
```

对于 at&t 代码，它是这样的：

```
static int asm_test(int a, int b)
{

    int c = 0;
    __asm__ __volatile__(
            "movl %1, $eax\n" //error
            "movl %2, $edx\n" //error
            "addl $edx, $eax\n"
            "movl $eax, %0\n" //error
            :"=m"(c)\
            :"m"(a),"m"(b)\
            :"eax","edx"
            );
    return c;
} 
```

对于操作输入/输出操作数的三行中的每一行，gcc 在编译时都会产生错误，如下所示：

C:\Users\farta\AppData\Local\Temp\cc99HxYj.s:22: **Error: junk `(%esp)' after expression**

如果我将“r”用于输入/输出约束，则代码将起作用。但我无法理解它为什么起作用以及错误代表什么。谁能告诉我？据我所知，'m' 只是告诉 gcc 不要分配寄存器，而是直接在内存中访问它们，如果内联 asm 代码尝试访问输入/输出操作数。这个对吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T10:47:19.723

`%0`这里的问题是 GCC 为和生成 AT `%1`& T 语法结构`%2`。如果您查看生成的程序集，它看起来像：

```
.intel_syntax
mov eax, 8(%ebp)
mov edx, 12(%ebp)
add eax, edx
mov -4(%ebp), eax 
```

这不是有效的 Intel 语法。

通常，您不需要在内联汇编中包含显式加载/存储操作 - 只需指定寄存器约束，编译器将自行生成加载/存储。这样做的好处是，即使您的变量（参数、本地变量）根本不驻留在内存中，而是在寄存器中，您的代码仍然是正确的 - 与您明确将内存加载/存储放在那里的情况不同。

对于您的示例，请尝试以下代码，查看程序集 ( `gcc -S`) 并注意编译器将如何自行从参数区域（例如 x86 上的堆栈）执行移动。

```
int asm_test(int a, int b)
{
  __asm__ __volatile__ (
                        ".intel_syntax\n"
                        "add %0, %1 \n"
                        ".att_syntax \n"
                        :"+r"(a)
                        :"r"(b));
  return a; 
```

}

# matlab - 乳液在滚筒之间分流

> ID：13856794
> 
> 赞同：4
> 
> 时间：2012-12-13T09:29:30.707
> 
> 标签：matlab

这是[我的问题](https://stackoverflow.com/questions/13229360/transfer-fluid-from-one-cylinder-to-another/13234798)的真正简化：

我最初有许多相互连接的滚筒，其中一个上带有墨水，并且它们彼此相对旋转。当辊子旋转时，墨水在辊子之间以 50/50 的比例共享。一些辊子有不止一个连接，因此发生分墨的顺序很重要。这是一个可视化：

[![在此处输入图像描述](../Images/b5a3dd62d950a3a3ed653f8bce03ce66.png)](https://i.stack.imgur.com/FNlu5.png)

我基本上是在寻找允许程序按顺序遍历连接的东西。我曾想过这样的事情：

```
for each roller
    if number_of_connections > 2  % # more than one connection for roller
        % # Iterate through connections sequentially, depending on the direction
        % # of rotation
    end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:39:00.627

我一直想知道你最终会为这个问题提供什么样的解决方案。从您的评论中：

> 我现在想的方式是在一个滚轮上（可能是最大的）有一个固定的段分辨率，所有其他的应该是一个相对的、整数的比率，以便段在系统旋转时匹配。

看来您目前正在研究与我在这里拥有的相同类型的解决方案。

**注意：**最后有一个易于复制的版本。

一开始，我使用了 EitanT 在他对上一个问题的回答中使用的结构。

```
% # Initial state
C = [0, 0;   % # Roller centers (x, y)
     2, 0;
     2, 4;
     2,-5;
     8, 4;
     8,-5;
     8,-1];
R = [1,1,3,4,3,2,2];    % # Roller radii (r)
N = numel(R);           % # Amount of rollers

% # Draw the rollers
figure, hold on
ang = 0:0.1:(2 * pi);
for i = 1:N
    plot(C(i, 1) + R(i) * cos(ang), C(i, 2) + R(i) * sin(ang))
    text(C(i, 1), C(i, 2), num2str(i))
end
title('Ink rollers'), axis image

% # Find connected rollers
isconn = @(m, n)(sum(([1, -1] * C([m, n], :)) .^ 2) - sum(R([m, n])) .^ 2 < eps);
[Y, X] = meshgrid(1:N, 1:N);
conn = reshape(arrayfun(isconn, X(:), Y(:)), N, N) - eye(N); 
```

我使用此示例查看连接顺序的差异。这是生成的滚筒图像：

![滚筒的图像。](../Images/536eb2e9074b8a0640b27f0b719fba6a.png)

这个想法是第一辊充满墨水，并且这种墨水通过系统传播通过辊 3 和 5 或 4 和 6 到达辊 7。

我手动设置了所有滚轮的方向。这一步可以通过使用 connection-matrix 自动完成`conn`。

```
% # Direction of rotation (clockwise = -1, anticlockwise = 1)
rotDir = [1,-1,1,1,-1,-1,1]; 
```

然后，我指定最小滚筒的箱数，并按比例扩大所有其他滚筒的箱数。

```
% # Number of bins specified for smallest roller
nBins_min = 20;
nBins = round(nBins_min*R/min(R)); 
```

下一步是初始化滚筒。我使用了一个结构将墨水、连接和滚轮方向保存在同一个变量中。这个想法是保持墨水值并跟踪所有辊子的每个部分的连接。如果`jj`滚子`ii`的一部分未连接到另一个滚子，则用 中的零表示`rollers(ii).connections(jj)`。否则，如果它已连接，则此单元元素将包含它所连接的滚轮的滚轮索引。

```
% # Initialize roller struct
rollers = struct('ink',{},'connections',{},'rotDirection',{});

% # Ink
for ii = 1:N
    rollers(ii).ink = zeros(1,nBins(ii));
end
rollers(1).ink = ones(1,nBins(1));

% # Connections
for ii = 1:N
    rollers(ii).connections = zeros(1,nBins(ii));
end
for ii = 1:N
    for jj = 1:N
        if(ii~=jj)
            if(conn(ii,jj) == 1)
                connInd = getConnectionIndex(C,ii,jj,nBins(ii));
                rollers(ii).connections(connInd) = jj;
            end
        end
    end
end

% # Direction of rotation
for ii = 1:N
    rollers(ii).rotDirection = rotDir(ii);
end 
```

我`getConnectionIndex()`以以下（非常丑陋）的方式实现了上面使用的功能：

```
function connectionIndex = getConnectionIndex(C,ii,jj,nBins)

p1 = C(ii, :);
p2 = C(jj, :);

if(abs(p1(2)-p2(2))<eps)
    if(p2(1)>p1(1))
        angle = 0;
    else
        angle = pi;
    end
elseif(abs(p1(1)-p2(1))<eps)
    if(p2(2)>p1(2))
        angle = pi/2;
    else
        angle = 3*pi/2;
    end
else
    angle = mod( atan((p2(1)-p1(1))/(p2(2)-p1(2))), 2*pi);
end

connectionIndex = 1+floor(nBins*angle/(2*pi));

end 
```

该函数使用滚轮的中心点来获取连接的相应角度。从这个角度值计算段的索引。

每个时间步长（所有段旋转一个步长）计算并保存每个辊上的平均墨水量。初始化这个矩阵，计算并保存初始墨水分布。

```
% # Initialize averageAmountOfInk and calculate initial distribution
nTimeSteps = 200;
averageAmountOfInk = zeros(nTimeSteps,N);
for ii = 1:N
    averageAmountOfInk(1,ii) = mean(rollers(ii).ink);
end 
```

对每个时间步执行以下步骤。

```
% # Iterate through timesteps
for tt = 2:nTimeSteps 
```

第一个辊子充满墨水，所有辊子根据其旋转方向旋转一步。

```
% # Fill first roller with ink
rollers(1).ink = ones(1,nBins(1));

% # Rotate all rollers
for ii = 1:N
        rollers(ii).ink(:) = ...
            circshift(rollers(ii).ink(:),rollers(ii).rotDirection);
end 
```

然后通过找到匹配的连接并将这两个连接的墨水平均分配来更新所有辊连接。

```
% # Update all roller-connections
for ii = 1:N
    for jj = 1:nBins(ii)
        if(rollers(ii).connections(jj) ~= 0)
            index1 = rollers(ii).connections(jj);
            index2 = find(ii == rollers(index1).connections);
            ink1 = rollers(ii).ink(jj);
            ink2 = rollers(index1).ink(index2);
            rollers(ii).ink(jj) = (ink1+ink2)/2;
            rollers(index1).ink(index2) = (ink1+ink2)/2;
        end
    end
end 
```

作为最后一步，计算辊上的平均墨水量，并在循环完成后绘制这些值。

```
 % # Calculate average amount of ink on each roller
    for ii = 1:N
        averageAmountOfInk(tt,ii) = mean(rollers(ii).ink);
    end
end

figure
plot(averageAmountOfInk,'b')
xlabel('Timesteps')
ylabel('Ink') 
```

运行代码，它会生成以下所有滚筒的平均墨水图。

对于最小滚筒的 20 段和 60 个时间步，我们得到下图：

![用于 20 个段和 60 个时间步长的墨迹。](../Images/d92f87033b3a7d2e31e2615851f4d9e2.png)

如果我们运行 2000 个时间步长的模拟，我们可以看到收敛到一个，因为所有的滚筒都充满了墨水。

![用于 20 个段和 2000 个时间步长的墨水。](../Images/d23e4b2566e15c6100dd921cf46b98ad.png)

易于复制的版本：

```
function averageAmountOfInk = inkRollerModel()
% # Initial state
C = [0, 0;   % # Roller centers (x, y)
     2, 0;
     2, 4;
     2,-5;
     8, 4;
     8,-5;
     8,-1];
R = [1,1,3,4,3,2,2];    % # Roller radii (r)
N = numel(R);           % # Amount of rollers

% # Draw the rollers
figure, hold on
ang = 0:0.1:(2 * pi);
for i = 1:N
    plot(C(i, 1) + R(i) * cos(ang), C(i, 2) + R(i) * sin(ang))
    text(C(i, 1), C(i, 2), num2str(i))
end
title('Ink rollers'), axis image

% # Find connected rollers
isconn = @(m, n)(sum(([1, -1] * C([m, n], :)) .^ 2) - sum(R([m, n])) .^ 2 < eps);
[Y, X] = meshgrid(1:N, 1:N);
conn = reshape(arrayfun(isconn, X(:), Y(:)), N, N) - eye(N);

% # Direction of rotation (clockwise = -1, anticlockwise = 1)
rotDir = [1,-1,1,1,-1,-1,1];

% # Number of bins for smallest roller
nBins_min = 20;
nBins = round(nBins_min*R/min(R));

% # Initialize roller struct
rollers = struct('ink',{},'connections',{},'rotDirection',{});

% # Ink
for ii = 1:N
    rollers(ii).ink = zeros(1,nBins(ii));
end
rollers(1).ink = ones(1,nBins(1));

% # Connections
for ii = 1:N
    rollers(ii).connections = zeros(1,nBins(ii));
end
for ii = 1:N
    for jj = 1:N
        if(ii~=jj)
            if(conn(ii,jj) == 1)
                connInd = getConnectionIndex(C,ii,jj,nBins(ii));
                rollers(ii).connections(connInd) = jj;
            end
        end
    end
end

% # Direction of rotation
for ii = 1:N
    rollers(ii).rotDirection = rotDir(ii);
end

% # Initialize averageAmountOfInk and calculate initial distribution
nTimeSteps = 200;
averageAmountOfInk = zeros(nTimeSteps,N);
for ii = 1:N
    averageAmountOfInk(1,ii) = mean(rollers(ii).ink);
end

% # Iterate through timesteps
for tt = 2:nTimeSteps
    % # Fill first roller with ink
    rollers(1).ink = ones(1,nBins(1));

    % # Rotate all rollers
    for ii = 1:N
            rollers(ii).ink(:) = ...
                circshift(rollers(ii).ink(:),rollers(ii).rotDirection);
    end

    % # Update all roller-connections
    for ii = 1:N
        for jj = 1:nBins(ii)
            if(rollers(ii).connections(jj) ~= 0)
                index1 = rollers(ii).connections(jj);
                index2 = find(ii == rollers(index1).connections);
                ink1 = rollers(ii).ink(jj);
                ink2 = rollers(index1).ink(index2);
                rollers(ii).ink(jj) = (ink1+ink2)/2;
                rollers(index1).ink(index2) = (ink1+ink2)/2;
            end
        end
    end

    % # Calculate average amount of ink on each roller
    for ii = 1:N
        averageAmountOfInk(tt,ii) = mean(rollers(ii).ink);
    end
end

figure
plot(averageAmountOfInk,'b')
xlabel('Timesteps')
ylabel('Ink')

end

function connectionIndex = getConnectionIndex(C,ii,jj,nBins)

p1 = C(ii, :);
p2 = C(jj, :);

if(abs(p1(2)-p2(2))<eps)
    if(p2(1)>p1(1))
        angle = 0;
    else
        angle = pi;
    end
elseif(abs(p1(1)-p2(1))<eps)
    if(p2(2)>p1(2))
        angle = pi/2;
    else
        angle = 3*pi/2;
    end
else
    angle = mod( atan((p2(1)-p1(1))/(p2(2)-p1(2))), 2*pi);
end

connectionIndex = 1+floor(nBins*angle/(2*pi));

end 
```

**编辑：**原始问题值

```
C = [-276.4, 565.08;...  % # Duct
     -27.82, 616.11;...  % # r2
      41.26, 562.41;...  % # r3
      52.12, 473.07;...  % # r4
     -44.97, 366.25;...  % # ink drum
      137.22, 443.76;... % # r6
      99.32, 362.13;...  % # r7
      141.22, 272.79;... % # r8
      51.67, 237.7;...   % # r9
      173.99, 177.07;... % # r10
     -203.02, 230.52;... % # r11
     -110.9, 213.53;...  % # r12
     -207.33, 131.94;... % # r13
     -187.4, 330.49;...  % # r14
      0,0...             % # Plate cylinder
];% # Roller centres (x, y)

R = [...
95/2,...  % # Duct
80/2,...  % # r2
95/2,...  % # r3
85/2,...  % # r4
208/2,... % # Drum
96/2,...  % # r6
85/2,...  % # r7
112.35/2,... % # r8
81/2,...  % # r9
90/2,...  % # r10
112.35/2,... % # r11
75/2,...  % # r12
86/2,...  % # r13
90/2,...  % # r14
406.5/2 % # Plate
]; % # Roller radii (r) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:58:13.723

这实际上是评论，而不是答案。

您和 EitanT 似乎正在融合的方法似乎是一个有趣的数学问题，可以转化为计算机代码。但我有点怀疑你的数学模型是否会导致对真实物理系统行为的准确预测。我能想到的一些问题：

1.  您谈到了应用墨水拆分的顺序。这种方式对于首次通过系统是有意义的，但是一旦所有辊子都有墨水，我就不清楚是否有任何合理的“顺序”可以迭代辊子。如果最初有多个辊子有墨水，那么即使是第一次通过也确实没有意义。
2.  较小的滚子比较大的滚子转动得更快，因此使算法的单次迭代对应于所有滚子的单次旋转实际上并不奏效。
3.  墨水在辊子之间不断地散布，因此每个辊子上的墨水高度是辊子上位置的函数。

换句话说，你似乎忽略了物理系统中的许多复杂性。也许这没问题，这种方法可以捕捉 90% 的重要内容。这会让我感到惊讶……但有趣的是，如此复杂的系统可以如此轻松地建模！

**添加：**

我刚刚意识到，在您关于此主题的其他问题中，您循环通过滚筒的顺序并不重要。所以“分裂的顺序”在这里可能是一个红鲱鱼。

我也确信您可以从简单的矩阵乘法中得到结果，但还没有尝试计算出相关矩阵。但这可能很容易弄清楚！

# android - 无法在 Eclipse JavaEE IDE 中创建新的 android 项目

> ID：13856803
> 
> 赞同：2
> 
> 时间：2012-12-13T09:30:07.677
> 
> 标签：android, eclipse, jakarta-ee

我刚刚在我的 Juno JavaEE IDE for Web 开发人员（几周前下载）中安装了适用于 Eclipse 的 Android SDK 插件。现在，当我尝试创建一个新的 Android 应用程序项目时，出现了奇怪的错误：

*   诸如“包名不能以点开头或结尾”之类的消息，但我的包名既不以点开头也不以点结尾
*   或类似“输入应用程序名称”的消息，但我提供了名称

似乎当出现错误时（例如，当向导启动时，没有默认名称出现，因此出现第二条消息），更正它并不会清除错误消息。

此外，在关闭并重新打开新项目向导后（中间有一些 Eclipse 手动重新启动），现在“编译方式”字段为空，无法填写。

我的 Eclipse 版本是 Juno Service Release 1，内部版本号：20120920-0800

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T10:31:13.913

很抱歉浪费了您的时间，只是我忘了安装 Android API。我以为他们附带了 Android SDK 的下载。

安装 Android API 后，可以填充“编译方式”字段并且奇怪的错误消失了

# javascript - 选择 onchange 相同的值

> ID：13856807
> 
> 赞同：3
> 
> 时间：2012-12-13T09:30:27.360
> 
> 标签：javascript, html, onchange, onblur

**如果我打开下拉选择并选择相同的值而不**单击离开以切换焦点，是否有办法触发事件？

我试过了

1.  `onblur`，但只有当我在选择之外进行额外的点击时它才有效。

2.  `onchange`，但只有当我选择不同的值时它才有效。

如果我打开下拉菜单并选择任何内容，无论它是相同还是不同，我都需要触发一个事件。

```
<select name='show1' id='show1' onblur='dosomething(this);'>
<option value='1'>One</option>
<option value='2'>Two</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:05:46.590

我认为您必须使用 onClick 事件并将先前选择的项目存储在变量中。

这是一个简单的例子，我认为可以使用一些重构:-)

```
 var dropboxOpen = false,
        oldItem     = null;
    function onClick(e) {
        if (dropboxOpen) {
            if (oldItem && oldItem === e.target.value) {
                console.log('same selected');
            }
            oldItem = e.target.value;   
        }        
        dropboxOpen = !dropboxOpen;
     } 
```

[http://jsfiddle.net/vtHPV/](http://jsfiddle.net/vtHPV/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:43:18.390

您使用什么库或框架并不重要，但这很简单。您本质上是在寻找两件事是真实的：

1.  测试控件是否被单击。

2.  测试一个值（任何值）是否被选中，--或-- 仍然被选中。

数字 2 可以通过类似...

```
var elem = document.getElementById("ddlViewBy");
var value = elem.options[elem.selectedIndex].value; 
```

然后测试它是否为非空是一件简单的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:38:07.087

如果你使用 jQuery

您可以尝试**[focus()](http://api.jquery.com/focus/)**事件。

# mongodb - 数组查询品牌中的集合

> ID：13856811
> 
> 赞同：2
> 
> 时间：2012-12-13T09:30:41.527
> 
> 标签：mongodb

我有一个查询，其中包含**查询**用户和**品牌**。那么我怎样才能获得**“诺基亚”品牌？**

```
db = Connection().mydb

db.users.find() 
```

查询：

```
{u'username': u'mack', u'brand': [{u'name': u'nike'}, {u'name': u'adidas'}] }

{u'username': u'siyve', u'brand': [{u'name': u'nokia'}, {u'name': u'casio'}] }

{u'username': u'seylim', u'brand': [{u'name': u'nokia'}, {u'name': u'casio'}] } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:31:36.737

你能试一下吗：

```
db.users.find({ "brand.name": "nokia" }) 
```

# android - 在 ListView 中使用 LazyList 时出现内存不足错误

> ID：13856815
> 
> 赞同：0
> 
> 时间：2012-12-13T09:30:53.650
> 
> 标签：android, android-listview, lazy-loading, android-adapter, lazylist

> **可能重复：**
> [使用通用图像加载器的内存不足错误和图像被刷新](https://stackoverflow.com/questions/13855413/out-of-memory-error-using-universal-image-loader-and-images-getting-refreshed)

我一直在关注关于在列表视图中延迟加载图像的教程，然后我实现[了 LazyList](https://github.com/thest1/LazyList)。该代码按照我的要求正常工作，但是在某些阶段它会出现内存不足错误。我正在使用相同的 ImageLoader、内存缓存、LazyAdapter、FileChache 和 Utils 代码。这是 LazyAdapter 类

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<String> movieThumbnail;
    private ArrayList<String> movieText;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<String> movieThumbnail, ArrayList<String> movieText) {
        activity = a;
        /*data=d;*/
        this.movieThumbnail = movieThumbnail;
        this.movieText = movieText;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return movieText.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
              vi = inflater.inflate(R.layout.listrow, null);

        TextView text=(TextView)vi.findViewById(R.id.rowListTextView);
        ImageView image=(ImageView)vi.findViewById(R.id.movieImage);
        text.setText(movieText.get(position));
        imageLoader.DisplayImage(movieThumbnail.get(position), image);
        return vi;
    }
} 
```

内存缓存

```
public class MemoryCache {

    private static final String TAG = "MemoryCache";
    private Map<String, Bitmap> cache=Collections.synchronizedMap(
            new LinkedHashMap<String, Bitmap>(10,1.5f,true));//Last argument true for LRU ordering
    private long size=0;//current allocated size
    private long limit=1000000;//max memory in bytes

    public MemoryCache(){
        //use 25% of available heap size
        setLimit(Runtime.getRuntime().maxMemory()/6);
    }

    public void setLimit(long new_limit){
        limit=new_limit;
        Log.i(TAG, "MemoryCache will use up to "+limit/1024./1024.+"MB");
    }

    public Bitmap get(String id){
        try{
            if(!cache.containsKey(id))
                return null;
            //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
            return cache.get(id);
        }catch(NullPointerException ex){
            ex.printStackTrace();
            return null;
        }
    }

    public void put(String id, Bitmap bitmap){
        try{
            if(cache.containsKey(id))
                size-=getSizeInBytes(cache.get(id));
            cache.put(id, bitmap);
            size+=getSizeInBytes(bitmap);
            checkSize();
        }catch(Throwable th){
            th.printStackTrace();
        }
    }

    private void checkSize() {
        Log.i(TAG, "cache size="+size+" length="+cache.size());
        if(size>limit){
            Iterator<Entry<String, Bitmap>> iter=cache.entrySet().iterator();//least recently accessed item will be the first one iterated  
            while(iter.hasNext()){
                Entry<String, Bitmap> entry=iter.next();
                size-=getSizeInBytes(entry.getValue());
                iter.remove();
                if(size<=limit)
                    break;
            }
            Log.i(TAG, "Clean cache. New size "+cache.size());
        }
    }

    public void clear() {
        try{
            //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
            cache.clear();
            size=0;
        }catch(NullPointerException ex){
            ex.printStackTrace();
        }
    }

    long getSizeInBytes(Bitmap bitmap) {
        if(bitmap==null)
            return 0;
        return bitmap.getRowBytes() * bitmap.getHeight();
    }
} 
```

ImageLoade 类

```
public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService;
    Handler handler=new Handler();//handler to display images in UI thread

    public ImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

    final int stub_id=R.drawable.ic_launcher;
    public void DisplayImage(String url, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(stub_id);
        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)

            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
           /* bitmap = decodeFile(f);*/
            return bitmap;
        } catch (Throwable ex){
           ex.printStackTrace();
           if(ex instanceof OutOfMemoryError)
               memoryCache.clear();
           return null;
        }
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            FileInputStream stream1=new FileInputStream(f);
            BitmapFactory.decodeStream(stream1,null,o);
            stream1.close();

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            FileInputStream stream2=new FileInputStream(f);
            Bitmap bitmap=BitmapFactory.decodeStream(stream2, null, o2);
            stream2.close();
            return bitmap;
        } catch (FileNotFoundException e) {
        } 
        catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        @Override
        public void run() {
            try{
                if(imageViewReused(photoToLoad))
                    return;
                Bitmap bmp=getBitmap(photoToLoad.url);
                memoryCache.put(photoToLoad.url, bmp);
                if(imageViewReused(photoToLoad))
                    return;
                BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
                handler.post(bd);
            }catch(Throwable th){
                th.printStackTrace();
            }
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;
            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
            else
                photoToLoad.imageView.setImageResource(stub_id);
        }

    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:47:51.503

使用此方法加载图像当您使用滚动而不是强制关闭时，这不会产生问题

```
 MainClassActivity:
ArrayList<NewsItems> news = new ArrayList<NewsItems>();
    SetListView sta;
       sta = new SetListView(MainActivity.this, news);
                    lv.setAdapter(sta);

                    for (NewsItems s : news) {
                            s.loadImage(sta);
                    }

        public class SetListView  extends BaseAdapter{
            private LayoutInflater inflater = null;
            Activity activity;
            ArrayList<NewsItems> one;
            public SetListView(Activity a,ArrayList<NewsItems> one)
            {
                this.activity = a;
                inflater = (LayoutInflater) a.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                this.one = one;
            }

            @Override
            public int getCount() {
                return one.size();
            }

            @Override
            public Object getItem(int position) {
                return position;
            }

            @Override
            public long getItemId(int position) {
                return position;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View vi = convertView;
                if (convertView == null)
                    vi = inflater.inflate(R.layout.main1, null);
                TextView tv1 = (TextView) vi.findViewById(R.id.textView1);
                TextView tv2 = (TextView) vi.findViewById(R.id.textView2);
                tv1.setText(one.get(position).get_title());
                tv2.setText(one.get(position).get_pudDate());
        //      Bitmap bm = loadBitmap(one.get(position).get_image());
                if(one.get(position).get_bm() != null)
                    ((ImageView)vi.findViewById(R.id.imageView1)).setImageBitmap(one.get(position).get_bm());
                else
                    ((ImageView)vi.findViewById(R.id.imageView1)).setImageResource(R.drawable.ic_launcher);
                return vi;
            }

        }

package com.dudhat.classes;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

import com.dudhat.rssfeeds.SetListView;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.util.Log;

public class NewsItems {
    private SetListView sta;
    String _title,_pudDate,_description,_image;
    Bitmap _bm;

    public Bitmap get_bm() {
        return _bm;
    }

    public String get_image() {
        return _image;
    }

    public String get_title() {
        return _title;
    }

    public String get_pudDate() {
        return _pudDate;
    }

    public String get_description() {
        return _description;
    }
    public SetListView getAdapter() {
        return sta;
    }

    public void setAdapter(SetListView sta) {
        this.sta = sta;
    }
    public NewsItems(String _title,String _pubdate,String _description,String _image,Bitmap _bm)
    {
        this._description = _description;
        this._pudDate = _pubdate;
        this._title = _title;
        this._image = _image;
        this._bm = _bm;
    }
     public void loadImage(SetListView sta) {
                 this.sta = sta;
                 if (_image != null && !_image.equals("")) {
                        new ImageLoadTask().execute(_image);
              }
             }
    private class ImageLoadTask extends AsyncTask<String, String, Bitmap> {

        @Override
        protected void onPreExecute() {
            Log.i("ImageLoadTask", "Loading image...");
        }

        protected Bitmap doInBackground(String... param) {
            Log.i("ImageLoadTask", "Attempting to load image URL: " + param[0]);
            try {
                Bitmap b = loadBitmap(param[0]);
                return b;
            } catch (Exception e) {
                e.printStackTrace();
                return null;
            }
        }
        protected void onPostExecute(Bitmap ret) {
            if (ret != null) {
                _bm = ret;
                if (sta != null) {
                    sta.notifyDataSetChanged();
                }
            } else {
            }
        }
    }
    public Bitmap loadBitmap(String url)
    {
        Bitmap bm = null;
        InputStream is = null;
        BufferedInputStream bis = null;
        try 
        {
            URLConnection conn = new URL(url).openConnection();
            conn.connect();
            is = conn.getInputStream();
            bis = new BufferedInputStream(is, 8192);
            bm = BitmapFactory.decodeStream(bis);
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        finally {
            if (bis != null) 
            {
                try 
                {
                    bis.close();
                }
                catch (IOException e) 
                {
                    e.printStackTrace();
                }
            }
            if (is != null) 
            {
                try 
                {
                    is.close();
                }
                catch (IOException e) 
                {
                    e.printStackTrace();
                }
            }
        }
        return bm;
    }
} 
```

# excel - mac系统隐藏excel文件？

> ID：13856821
> 
> 赞同：0
> 
> 时间：2012-12-13T09:31:04.583
> 
> 标签：excel, applescript

如何使用苹果脚本隐藏mac系统上的excel文件。我正在使用以下一些步骤。

```
 tell application "Microsoft Excel"
       make new workbook 
       set visible to false
   end tell 
```

此脚本运行成功并隐藏 excel 应用程序。但是请参阅 excel 文件中的实例 doklet 。我想在 docklet 中隐藏 excel 实例。如果 excel 实例隐藏在 docklet 中（一些设置跟随 Go to folder

1.  应用
2.  微软办公软件 2011
3.  左键单击 Microsoft Excel
4.  显示包装内容
5.  内容
6.  信息列表
7.  点击添加新孩子
8.  添加新子项是**Application is Agent(UIElement)** with check box true 如果按照某些步骤操作，则 excel 实例不会显示在 docklet 中，但不会隐藏 excel 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:25:10.370

这将切换文件的可见性...

```
set f to choose file with invisibles
tell application "System Events"
    set visible of f to not (visible of f)
end tell 
```

***编辑***：你可以用这个隐藏 Excel...

```
tell application "System Events"
    set visible of process "Microsoft Excel" to false
end tell 
```

# jquery - jquery removeClass('').addClass('') 在IE中需要点击两次

> ID：13856822
> 
> 赞同：0
> 
> 时间：2012-12-13T09:31:08.487
> 
> 标签：jquery, css

我有以下 jquery，当您单击链接时，它只会更新其上的文本和类。它在 Chrome 中运行良好，但在 IE 中，您必须单击链接两次才能执行任何操作。我会理解它是否根本不起作用，但无法弄清楚为什么您需要单击它两次！

```
 // Subscribe to topic subscribedtotopic
    $(".notsubscribedtotopic")
    .on("click", (function () {
        SubscribeUnsubscribe($(this));

    }));

    // UnSubscribe to topic subscribedtotopic
    $(".subscribedtotopic").on("click", (function () {
        SubscribeUnsubscribe($(this));
    }));

    function SubscribeUnsubscribe(link) {

        var topicid = link.attr('rel');
        link.slideUp('fast');
        if (link.attr('class') == 'notsubscribedtotopic') {
            link.html('Unsubscribe From Topic');
            link.removeClass('notsubscribedtotopic').addClass('subscribedtotopic');
            link.slideDown();

            return false;
        } else {
            link.html('Subscribe To Topic');
            link.removeClass('subscribedtotopic').addClass('notsubscribedtotopic');
            link.slideDown();

            return false;
        }

    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:35:46.933

如何删除“return false”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:38:48.477

您可以稍微简化您的代码并使用和`toggleClass`来摆脱：`hasClass``preventDefault()``return false`

```
// Subscribe to topic subscribedtotopic
    $(".notsubscribedtotopic").on("click", function (event) {
        SubscribeUnsubscribe($(this));
        event.preventDefault();
    });

    // UnSubscribe to topic subscribedtotopic
    $(".subscribedtotopic").on("click", function (event) {
        SubscribeUnsubscribe($(this));
        event.preventDefault();
    });

    function SubscribeUnsubscribe(link) {

        var topicid = link.attr('rel');
        link.slideUp('fast', function(){
            if (link.hasClass('notsubscribedtotopic')) {
                link.html('Unsubscribe From Topic');
            } else {
                link.html('Subscribe To Topic');
            }

            link.toggleClass('notsubscribedtotopic').toggleClass('subscribedtotopic');
            link.slideDown();
        });
    } 
```

从技术上讲，如果您为链接提供另一个不变的类，这两个事件处理程序也可以替换为一个。

# eclipse - 无法确定如何使用操作 ObjectContributions 或命令处理程序将弹出菜单添加到 Eclipse 插件

> ID：13856825
> 
> 赞同：1
> 
> 时间：2012-12-13T09:31:13.820
> 
> 标签：eclipse, plugins, command, action

问题是这样的：我在网上读到的大多数东西都说我们应该在创建弹出菜单时避免操作，因为命令框架允许更多的解耦。

示例：[http ://wiki.eclipse.org/FAQ_What_is_the_difference_between_a_command_and_an_action%3F](http://wiki.eclipse.org/FAQ_What_is_the_difference_between_a_command_and_an_action%3F)

很公平。

但是当我在编辑器中右键单击 .java 文件时，并且只有在我在编辑器中单击时，我才有时间让命令框架添加我的菜单。我可以显示菜单（使用'with'和activeEditor变量），但是当我右键单击包资源管理器中的java文件时它也会显示，这是我不想要的。我怀疑这是因为文件已经在编辑器中打开了。

当我使用 IComplilationUnit 右键单击​​包资源管理器中的 java 文件时，我还添加了一个菜单。这很好用。

因此，当我在文件内单击时，使用弹出菜单操作解决了我的问题。我还可以访问那里的所有 ISelection 内容。但是耦合度太高了，我失去了使用处理程序的灵活性。

我正在寻找： 告诉我我正在这样做，这是唯一可能的方式；或告诉我如何让我的弹出窗口仅在我右键单击 java 文件编辑器时出现。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:43:19.187

最后，它真的很直接。下面的示例使用命令框架。它没有处理程序，因此只需在需要生成类时单击类超链接。

创建一个名为 com.test.plugin.project 的新 Eclipse 插件项目

在 plugin.xml 文件的依赖项选项卡中添加以下依赖项

*   org.eclipse.jdt
*   org.eclipse.jdt.core
*   org.eclipse.jdt.ui
*   org.eclipse.jface.text

把它放在 plugin.xml 选项卡部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="true"
            locationURI="popup:org.eclipse.ui.popup.any">
         <menu
               label="Test Project Sub Menu">
            <command
                  commandId="com.test.plugin.project.command.packageexplorer"
                  id="packageexplorerId"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <iterate
                        ifEmpty="false"
                        operator="or">
                     <instanceof
                           value="org.eclipse.jdt.internal.core.CompilationUnit">
                     </instanceof>
                  </iterate>
               </visibleWhen>
            </command>
            <command
                  commandId="com.test.plugin.project.command.classfile"
                  id="classfileId"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <iterate
                        ifEmpty="false"
                        operator="or">
                     <and>
                        <with
                              variable="selection">
                           <instanceof
                                 value="org.eclipse.jface.text.TextSelection">
                           </instanceof>
                        </with>
                        <with
                              variable="activeEditorId">
                           <equals
                                 value="org.eclipse.jdt.ui.CompilationUnitEditor">
                           </equals>
                        </with>
                     </and>
                  </iterate>
               </visibleWhen>
            </command>
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="com.test.plugin.project.command.packageexplorer"
            name="Only Show In Package Explorer">
      </command>
      <command
            id="com.test.plugin.project.command.classfile"
            name="Only Show In Class File">
      </command>
   </extension>

</plugin> 
```

这是做什么的

*   当您右键单击包资源管理器中的 java 文件时（并且仅当您单击 java 文件时），它会在子菜单中创建一个弹出菜单。
*   当您右键单击 java 文件时，它会在子菜单中创建不同的弹出菜单。

# php - Magento 商店主页（主页）的文件路径是什么？

> ID：13856836
> 
> 赞同：-1
> 
> 时间：2012-12-13T09:31:32.387
> 
> 标签：php, magento

我需要找到管理使用 Magento 开发的在线商店主页的文件（即 index.html）。我只需要更改一个链接，并且我使用 Firebug 显示我需要编辑的文件是“misitioweb.com”（主页），但文档本身没有出现在 ftp 中。初始页面由一堆 XML 和 PHP 的 PHTML 组成。如果有人想看地址页面是[http://peluches-cel.com](http://peluches-cel.com)并且只想更改链接“Peluche del mes”的目标 URL。我已经使用 Magento 的帮助来显示“帮助模板路径”，并且我下载了 4 个更有可能管理页面区域的文件，但我找不到指定链接目标 URL 的部分。我一直分别使用 HTML 或 PHP（我对 PHP 的经验很少），我发现很难理解 Magento 是如何构建每个网站的。如果有人能给我一些关于如何实现更改该链接的提示，你会让我非常高兴吗，我自己花了很长时间尝试并在网上查找，但找不到如何做任何留言簿或论坛来解释如何与 Magento 合作良好，在我的语言中，几乎没有任何关于 Magento 的文档，所以我决定在这个论坛上试试运气，我 已经阅读了涉及许多电子商务专业人士的页面。提前感谢所有花时间阅读我的问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:27:57.103

我真的不明白你想要什么。

但是，如果您想更改基本 URL，您可以通过 phpMyAdmin 访问数据库，找到表 core_config_data 并将 web/unsecure/base_url 和 web/secure/base_url 中的 URL 更改为您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:17:28.307

不是页面的url，而是链接的url。尝试点击“Peluche del mes”，看看会出现什么，可以访问[http://www.peluches-cel.com/peluche-del-mes](http://www.peluches-cel.com/peluche-del-mes)，我想访问[http://www.peluches-cel.com /oso-tiziano-2col-40cm](http://www.peluches-cel.com/oso-tiziano-2col-40cm)直接地。问题是 FTP 上不存在 peluches-cel.com/oso-tiziano-2col-40cm 页面，要在 PHP 中完成，有不同的函数负责在请求时创建它我需要将链接更改为“Peluche del mes”，如果您使用 firebug 或任何其他源代码分析器查看该页面的源代码，您会看到第 146 行管理该链接，但我无法直接访问代码¿你明白吗？通过 ftp 客户端没有像 php magento 这样的文件或 html 与模型视图控制器一起使用，这是我的问题。再次感谢你。

# rest - 将 json 从 php 发布到 REST

> ID：13856841
> 
> 赞同：0
> 
> 时间：2012-12-13T09:31:57.217
> 
> 标签：rest, http-post, dropwizard

我有一个 REST url（使用 DropWizard 用 Ja​​va 编码），我想从 PHP 向其发布一个 json。但是我收到`415 Unsupported MediaType`错误。我查看了许多论坛，但无法弄清楚错误可能是什么。我的两端代码如下：

**服务器**

```
@POST
@Path("/update-table")
@Timed
public TableUpdateResponse updateTable(TestClass testObj) {
    LOG.info("inside updateTable function");
    //other code ...
} 
```

**客户**

```
<?php

$url = "localhost:8084/update-table"
$ch = curl_init($url);

$jsonString = array("testString" => "Hello World!");            
$json =  json_encode($jsonString);

$headers = array();
$headers[] = 'Content-Type: application/json';

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_POSTFIELDS, $json);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

$response = curl_exec($ch);
echo $response;

?> 
```

**测试类**

```
public class TestClass {
    private String testString;

    public TestClass(String testString) {
        super();
        this.testString = testString;
    }

    public TestClass() {
        super();
    }

    public String getTestString() {
        return testString;
    }

    public void setTestString(String testString) {
        this.testString = testString;
    }

} 
```

请求未达到 REST（未打印 LOG 行）。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T11:46:50.547

添加注释`@Consumes(MediaType.APPLICATION_JSON)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:43:37.370

尝试将 application/json 内容类型更改为其中之一

```
application/json
application/x-javascript
text/javascript
text/x-javascript
text/x-json 
```

尽管 RFC 中指定的正确的是 application/json，但您的 java 代码可能有问题

# ajax - 使用 webbrowser 控件加载 ajax 网页内容

> ID：13856842
> 
> 赞同：0
> 
> 时间：2012-12-13T09:31:57.720
> 
> 标签：ajax, webbrowser-control

我正在使用 WebBrowser 控件来解析网站。结果很好，但对于那些需要 ScrollDown 通过 Ajax 加载整个页面的网站，我遇到了问题。我试图触发“DocumentCompleted”事件，但似乎对于这一步文档已经加载到控件中并且只是顶部（我的意思是没有滚动）。我还尝试发送键并强制向下滚动或执行各种 WebBrowser 状态的 javascript，但没有成功。

我需要帮助，

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:38:42.730

I found the answer for this question.What I had to know is
in the following code:

```
 public partial class Form1 : Form      
 {
    bool finished=false;
    public Form1()
    {            
        InitializeComponent();
        this.WindowState=FormWindowState.Maximized;          
        webBrowser1.ScriptErrorsSuppressed=true;            
        this.Show();                                 
        Wait4Load();
        string aaa = webBrowser1.DocumentText;                 
    }   

     void webBrowser1_DocumentCompleted(objectsender,WebBrowserDocumentCompletedEventArgs e) 
     {
         if (webBrowser1.ReadyState == WebBrowserReadyState.Complete)
         {
             finished = true;
             button1.PerformClick();
         }
     }

     void Wait4Load() 
     {
        webBrowser1.DocumentCompleted+=new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);             
        button1.Click+=new EventHandler(button1_Click);         
       if(!finished) 
        {
            Application.DoEvents();
            Thread.Sleep(2000);
        } 
         finished = false;
     }

     void button1_Click(object sender, EventArgs e) 
     {           
       //footerWrapper
         while(webBrowser1.ReadyState != WebBrowserReadyState.Complete)
           Application.DoEvents();
         while(webBrowser1.IsBusy)
           Application.DoEvents();
           webBrowser1.Navigate("javascript:setTimeout(location.hash='#footerWrapper',2000)");     
         //Thread.Sleep(3000);
       finished=true;
     }       
}` 
```

# apache-cocoon - apache cocoon管道中的全局变量

> ID：13856853
> 
> 赞同：1
> 
> 时间：2012-12-13T09:32:42.763
> 
> 标签：apache-cocoon

我有一些使用 XSL 的静态变量，这些变量当前存储在 sitemap.xml 中作为全局变量。

```
<map:pipelines>
   <map:component-configurations>
      <global-variables>
          ...
      </global-variables>
   </map:component-configurations>
... 
```

这一切都很好，但是有些变量是特定于部署的，因此需要在 Web 应用程序启动时进行更改。基本上，我需要少量存储在 .WAR 外部的属性，以便在 XSLT 中可用。

有没有人需要做类似的事情？如果是这样，您使用了什么方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:28:00.503

作为参考，值得查看 cocoon 输入模块[RequestModule](http://wiki.apache.org/cocoon/InputModules#RequestModule__.28JXPath.29%20RequestModule)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:47:31.997

为什么这些属性需要存储在 WAR 之外？Cocoon 已经在`WEB-INF`.

如果您只是试图将配置排除在*站点地图*之外，那么`.properties`文件可能是您的解决方案。`**.properties`在中定义的属性`WEB-INF`可用于使用`${property-name}`符号的 Cocoon 站点地图。

请注意，我的回答是基于我对 Cocoon 2.1.11 的经验；它在其他版本中可能会有所不同。

# php - PHP 会话在 Internet Explorer 中不起作用

> ID：13856854
> 
> 赞同：1
> 
> 时间：2012-12-13T09:32:43.890
> 
> 标签：php, internet-explorer, session, cookies

我有一个在 Firefox 中运行良好的 PHP 脚本，但是当我使用 Internet Explorer 时，会话变量将不起作用。

我使用的是 Internet Explorer 9.0.8 版。

这是脚本。谁能帮忙？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<?php
    session_start();
    ob_flush();
?>

<html>
<head>
<title>Neem contact op</title>

<style type="text/css">
label,a, body 
{
font-family : Arial, Helvetica, sans-serif;
font-size : 11px; 
}
</style>
</head>

<body>
<?php

    if(isset($_POST['submit'])){

        $naam = $_POST['naam'];
        $email = $_POST['email'];
        $domeinnaam = $_POST['domeinnaam'];
        $opmerking = $_POST['opmerking'];
        $code = $_POST['captcha'];

        if($naam == "" || $email == "" || $opmerking == ""){
            echo "<font color='red'>Je hebt niet alle verplichte velden ingevuld!</font>";
        } else{
            if($code != $_SESSION['code']){
                echo "<font color='red'>De captcha code is onjuist overgenomen!</font>";
            } else{
                if(!eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $email)){
                    echo "<font color='red'>Je hebt een ongeldig e-mail adres ingevuld!</font>";
                } elseif(isset($_SESSION['tijd']) && $_SESSION['tijd'] > time() ){ 
                    $tijdover = $_SESSION['tijd'] - time();
                    echo "<font color='red'>Je moet nog ". $tijdover ." seconden wachten om een nieuw bericht in te sturen!</font>";    
                } else{
                    $_SESSION['tijd'] = time() + 60;

                    $headers = "From: ". $email ."\r\nContent-type: text/html"; 

                    $body = "<html>
                                <body>
                                    Er is een nieuw bericht gestuurd via de contact pagina.<br /><br />
                                    Naam: ". $naam ."<br />E-mail: ". $email ."<br />Domeinnaam: ". $domeinnaam ."<br /><br />Opmerking: <br /><br />". $opmerking."
                                </body>
                            </html>";

                    $mail = mail("testmail@gmail.com", "Contact - " . $email . " - " . $domeinnaam, $body, $headers);

                    if( $mail ){
                        echo "<font color='green'>Bedankt voor uw bericht, wij proberen zo spoedig mogelijk je e-mail te beantwoorden.</font>";
                    }else{
                        echo "<font color='red'>Er is iets fout gegaan tijdens e-mailen, probeer het later nog eens opnieuw!</font>";
                    }
                }
            }
        }

    }

?>

<form method="POST" name="contact_form" action="contact.php"> 
    <p>
        <label for='name'>Naam: (verplicht) </label><br>
        <input type="text" name="naam" value=''>
    </p>
    <p>
        <label for='email'>Email: (verplicht) </label><br>
        <input type="text" name="email" value=''>
    </p>
    <p>
        <label for='email'>Domeinnaam: </label><br>
        <input type="text" name="domeinnaam" value=''>
    </p>
    <p>
        <label for='message'>Opmerking: (verplicht) </label> <br>
        <textarea name="opmerking" rows=8 cols=30></textarea>
    </p>
    <p>
        <span style="font-size: 14px;">
        <?php

            $random = rand(1000, 9999);
            $_SESSION['code'] = $random;
            echo $random;

        ?>
        </span>
        <br />
        <label for='message'>Typ de code hierboven over:</label><br>
        <input name="captcha" type="text"><br>
    </p>
    <input type="submit" value="Verstuur" name='submit'>
</form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:38:19.593

在显示其他任何内容之前需要打开会话。那是你的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:38:46.617

你能试一下吗

```
<?php
    session_start();
    ob_flush();
?> 
```

前

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T02:07:14.213

验证您的域名不包含：**“_”或“-”**

您可以在以下链接中找到有关该问题的信息：

[https://support.microsoft.com/en-us/kb/316112](https://support.microsoft.com/en-us/kb/316112) [https://blogs.msdn.microsoft.com/ieinternals/2009/08/20/internet-explorer-cookie-internals-faq/](https://blogs.msdn.microsoft.com/ieinternals/2009/08/20/internet-explorer-cookie-internals-faq/)

# android - 如何使视图（微调器）在 Android 的键盘隐藏事件上可见？

> ID：13856860
> 
> 赞同：0
> 
> 时间：2012-12-13T09:32:56.410
> 
> 标签：android, view, visibility, android-spinner

我的布局中有 EditView 一个按钮和一个 Spinner。下面给出一张图片：

![在此处输入图像描述](../Images/bc46cad44d13b04ecda27c5fd7e5f2b3.png)

当我专注于搜索字段（EditText）时，我正在使微调器（BrowseBy）消失。代码在这里：

```
 edTxt_SearchField.setOnFocusChangeListener
    (new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {

                        if (edTxt_SearchField.hasFocus()) {
                            spnrBrowseBy.setVisibility(View.GONE);
                        }

                    }
                }); 
```

这里发生的是软键盘出现。还要注意微调器不见了。

![在此处输入图像描述](../Images/ca10cd933c9683c6e557deefea0479cf.png)

当我在这里按 backKey 时，软键盘就隐藏了。我希望微调器也应该像第一张图片一样重新出现在这里。或者有什么方法可以检测到 keyBoardHide 事件？

我试过onConfiguration更改方法，没有效果。注意：我也无法覆盖 onBackPresskey() 方法，因为我的活动正在扩展 ActivityGroup 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:44:36.843

您是否将 configChages 放入清单中以便调用 onConfigurationChage？

```
<activity android:name="TestActivity"
          android:configChanges="keyboardHidden"> 
```

否则应该只是

```
public void onConfigurationChanged(Configuration newConfig){
    spnrBrowseBy.setVisibility(View.VISIBLE);
    spnrBrowseBy.requestLayout();
    super.onConfigurationChanged(newConfig);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:43:33.563

通过以下方式，您可以对 EditText 的 Got Focus 和 Lost Focus 采取行动。

```
yourEditText.setOnFocusChangeListener(new OnFocusChangeListener() {
    public void onFocusChange(View v, boolean hasFocus) {
        if(hasFocus){
             Toast.makeText(getApplicationContext(), "Got Focus", Toast.LENGTH_LONG).show();            
        }else{
             Toast.makeText(getApplicationContext(), "Lost Focus", Toast.LENGTH_LONG).show();           
        }
}); 
```

希望这对您有所帮助。

谢谢。

# c# - WebMatrix WebData InitializeDatabaseConnection

> ID：13856864
> 
> 赞同：0
> 
> 时间：2012-12-13T09:33:12.853
> 
> 标签：c#, webmatrix

我已经将 WebSecurity.InitializeDatabase 的调用放在 _appstart.cshtml 中，如各种谷歌搜索中所述，但是在对 WebSecurity.IsAuthenticated 进行后续调用时，我会定期收到以下错误，例如，我假设每个用户都会调用一次 initialisedatabase进入网站，在调用_pagestart.cshtml之前这个初始化有延迟吗？

```
You must call the "WebSecurity.InitializeDatabaseConnection" method before you call any other method of the "WebSecurity" class. This call should be placed in an _AppStart.cshtml file in the root of your site.

at WebMatrix.WebData.SimpleMembershipProvider.VerifyInitialized()
at WebMatrix.WebData.WebSecurity.VerifyProvider()
at WebMatrix.WebData.WebSecurity.Logout()
at ASP._Page__PageStart_cshtml.Execute() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:52:11.643

不，不应该有延迟。

要使用 WebSecurity.InitializeDatabaseConnection，请使用参数 autoCreateTables=true 调用一次。在数据库中设置表后，从那时起在 _appstart 中，您将使用 autoCreateTables = False 调用 WebSecurity.InitializeDatabaseConnection。

# php - 我的网站上有一个类似的系统

> ID：13856865
> 
> 赞同：0
> 
> 时间：2012-12-13T09:33:15.260
> 
> 标签：php

我有一个类似的系统，每次您单击收藏夹时，按钮都会向数据库添加一个值`userid`和`msgid`喜欢的。在页面加载时，它会检查哪些内容得到了喜欢，哪些内容没有使用 mysql。如果喜欢它会显示不同的按钮。但我想显示有多少人喜欢`msgid`. 我不知道如何定义为消息创建的表单。

这是我的代码：

```
function listfav($msgid){
  $q = mysql_query("SELECT * FROM `fav` WHERE `msgid`='$msgid'");
  $q1 = mysql_num_rows($q);
  $n = 0;
  while($row = mysql_fetch_array($q1)){
    $n += 1;
  }
  return $n.' People favorited this!';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:34:59.643

```
SELECT COUNT(*) FROM `fav` WHERE `msgid`='$msgid' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:41:21.527

```
function listfav($msgid)
{
    $q = mysql_query("SELECT COUNT(*) AS likes FROM `fav` WHERE `msgid`='$msgid'");
    $row = mysql_fetch_assoc($q);
    $likes = number_format($row['likes'], 0); // add formatting to the number
    return "{$likes} People favorited this!";
} 
```

# c# - 当另一个类的事件被触发时通知

> ID：13856869
> 
> 赞同：10
> 
> 时间：2012-12-13T09:33:37.547
> 
> 标签：c#, events, event-handling

我有

```
class A
{
    B b;

    //call this Method when b.Button_click or b.someMethod is launched
    private void MyMethod()
    {            
    }

    ??
}

Class B
{
    //here i.e. a button is pressed and in Class A 
    //i want to call also MyMethod() in Class A after the button is pressed 
    private void Button_Click(object o, EventArgs s)
    {
         SomeMethod();
    }

    public void SomeMethod()
    {           
    }

    ??
} 
```

A 类有 B 类的一个实例。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-12-13T09:40:49.680

您需要在“B”类上声明一个公共事件 - 并让“A”类订阅它：

像这样的东西：

```
class B
{
    //A public event for listeners to subscribe to
    public event EventHandler SomethingHappened;

    private void Button_Click(object o, EventArgs s)
    {
        //Fire the event - notifying all subscribers
        if(SomethingHappened != null)
            SomethingHappened(this, null);
    }
....

class A
{
    //Where B is used - subscribe to it's public event
    public A()
    {
        B objectToSubscribeTo = new B();
        objectToSubscribeTo.SomethingHappened += HandleSomethingHappening;
    }

    public void HandleSomethingHappening(object sender, EventArgs e)
    {
        //Do something here
    }

.... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T09:41:16.710

您需要三件事（在代码中由注释标记）：

1.  在 B 类中声明[事件](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)
2.  发生某些事情时在 B 类中引发事件（在您的情况下 - 执行了 Button_Click 事件处理程序）。请记住，您需要验证是否存在任何订阅者。否则，您将在引发事件时获得 NullReferenceException。
3.  订阅 B 类的事件。您需要拥有 B 类的实例，即使您也想订阅（另一种选择 - 静态事件，但这些事件将由 B 类的所有实例引发）。

代码：

```
class A
{
    B b;

    public A(B b)
    {
        this.b = b;
        // subscribe to event
        b.SomethingHappened += MyMethod;
    }

    private void MyMethod() { }
}

class B
{
    // declare event
    public event Action SomethingHappened;

    private void Button_Click(object o, EventArgs s)
    {
         // raise event
         if (SomethingHappened != null)
             SomethingHappened();

         SomeMethod();
    }

    public void SomeMethod() { }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T09:36:32.113

看看从 B 类中引发事件

看一下

[引发事件](http://msdn.microsoft.com/en-us/library/wkzf914z%28v=vs.100%29.aspx)

[处理和引发事件](http://msdn.microsoft.com/en-us/library/edzehd2t%28v=vs.100%29.aspx)

[如何：引发和使用事件](http://msdn.microsoft.com/en-us/library/9aackb16%28v=vs.100%29.aspx)

# android - 在 Android 应用中构建动画

> ID：13856871
> 
> 赞同：4
> 
> 时间：2012-12-13T09:33:41.047
> 
> 标签：android, animation

我做过只使用图片和声音剪辑的应用程序。我想做的是构建一个涉及动画的Android应用程序。我在play store里看过很多“水效果”的app，动画效果相当不错。我的其中之一是“锦鲤池”。我想为沙子做类似的应用程序。当我们看到并触摸到真正的沙子时，动画的细节应该看起来不错。我是动画的新手，对此一无所知。谁能帮我解决如何使用Android的详细动画？我知道仅使用 java 是不可能的。请向我介绍有关此内容的任何博客/文档。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:46:43.057

对于此类效果（如在 Koi Pond 中使用的那样），您将需要多个像素着色器。要使用它，您需要我们的 OpenGL ES 2.0。我建议使用像 AndEngine 这样的游戏引擎进行基本设置和着色器使用。如果您没有使用着色器的经验，那将不会那么容易！

我不确定 AndEngine 是否是最好的选择，但它是可能的。看看[http://www.andengine.org/](http://www.andengine.org/)

论坛中还有一些着色器教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:41:57.233

起初，对于翻译或其他一些简单的动画，您可以使用 android 原生动画方法，但对于您可以使用的好东西，我认为[这](http://gstreamer.com/)就是您想要的 ;)

问候海克·纳哈佩蒂安

# c# - C#中的虚拟关键字

> ID：13856879
> 
> 赞同：9
> 
> 时间：2012-12-13T09:34:03.397
> 
> 标签：c#, oop, overriding, virtual

我有 Java 知识，最近几天一直在学习 C#。现在我遇到了“virtual”关键字，正[如此链接](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.80%29.aspx)所建议的那样，它用于允许在子类中覆盖相应的方法、属性等。现在我认为即使不使用“virtual”关键字，我们也可以覆盖方法。那为什么有必要呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T09:35:54.453

`virtual`如果您真的想要`override`子类中的方法，则需要关键字。否则，基本实现将被新实现隐藏，就像您使用`new`关键字声明它一样。

通过“覆盖”它们而不声明基方法来隐藏方法`virtual`会使您没有多态性，这意味着：如果您将专用版本“转换”为“基”版本并调用方法，则始终将使用基类实现代替被覆盖的版本 - 这不是你所期望的。

例子：

```
class A
{
    public void Show() { Console.WriteLine("A"); }
}

class B : A
{
    public void Show() { Console.WriteLine("B"); }
}

A a = new A();
B b = new B();

a.Show(); // "A"
b.Show(); // "B"

A a1 = b;
a1.Show(); // "A"!!! 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T09:35:07.483

`virtual`是一种定义方法*具有*默认实现的方式，但该实现可以在子类中被覆盖。除了使用 virtual 之外，您不能在不使用`new`关键字的情况下直接覆盖方法（这通常是不好的做法）。

实现的一个很好的例子`virtual`是`ToString()`方法。C# 中的每个对象都保证能够调用`ToString()`，因为每个对象都继承自`System.Object`包含虚方法的基类`ToString()`。然而，派生类可以覆盖它，并提供它们自己的实现，这可能对对象的用户更有用。

更新：我最近写了一篇博文，深入探讨了这个话题。[在这里查看](http://www.levibotelho.com/polymorphism-with-new-and-override/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T09:34:51.173

> 现在我认为即使不使用“virtual”关键字，我们也可以覆盖方法。

不，你不能。与 Java 不同，在 C# 中成员**默认是密封的，**`virtual`除非您使用关键字标记它们，否则您无法覆盖它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T09:59:51.203

看看这个例子：

```
 void Main()
    {
        var o1 = new S();
        Console.WriteLine(((B)o1).m1());    
    }

    public class B
    {
        public virtual string m1() {
            return "m1";
        }
    }

    public class S : B
    {
        override public string m1() {
            return "overridden m1";
        }
    } 
```

在此示例中，子类`S`被实例化并分配给对象变量`o1`。在`Console.WriteLine`语句的参数中，它被强制转换为基类`B`，然后`m1`调用方法。因为我们`virtual`在基类`B`和`override`子类中使用过`S`，所以我们得到

> 被覆盖的 m1

作为输出。如果您在in和子类`virtual`的方法声明中删除，那么您将得到`m1``B``override``S`

> 米1

作为输出，这意味着强制转换也具有使用`m1`基类中方法的原始声明的效果`B`。

**注意**如果您`new`在 subclass 中使用关键字`S`，例如

```
 new public string m1() {
            return "overridden m1";
        } 
```

假设`virtual`基类中的关键字`B`不存在，您将获得输出

> 米1

也是。如果您不将其转换为`B`，则将使用新方法。这称为*遮蔽*（或*隐藏*）方法（基类的原始方法）。

**概括：**

*   要覆盖一个方法，如果您强制转换为基类也应该有效，请在基类和子类中使用`virtual`关键字。`override`

*   如果您打算覆盖仅应在子类中处于活动状态的方法，请`new`在子类方法声明中使用关键字。正如您所看到的，没有它它也可以工作，但如果它在那里更好，所以每个人都知道这是该方法的新版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-20T20:48:53.307

如果派生类被实例化为基类，virtual / override 将允许派生类覆盖基函数。例子：

```
 class A
      {
         public virtual void Show() { Console.WriteLine("A"); }
      }

      class B : A
      {
         public override void Show() { Console.WriteLine("B"); }
      }

         A a = new A();
         B b = new B();

         a.Show(); 
         b.Show(); 

         A a1 = b;
         a1.Show();  // here is the test!!!

         B b1 = new B();
         b.Show();  

With virtual / override :
A
B
B
B

After removing virtual / override keywords (or simply removing override):
A
B
A
B 
```

# c# - 使用 Windows 7 远程访问注册表项

> ID：13856882
> 
> 赞同：2
> 
> 时间：2012-12-13T09:34:06.193
> 
> 标签：c#, registry, remote-access

我的公司目前正在迁移到 Windows 7，我升级了软件以在该系统上运行。但是我们有一个软件可以通过远程连接检查注册表项。现在有趣的东西，一个非常简单的方法：

```
/// <summary>
/// Contoler cle registre
/// </summary>
/// <param name="posteClient">Poste client</param>
/// <returns>Microsoft.Win32.RegistryKey</returns>
protected RegistryKey Initialiser(string cle, string posteClient)
{
    RegistryKey regKey = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, posteClient);
    regKey = regKey.OpenSubKey(cle, RegistryKeyPermissionCheck.ReadWriteSubTree, System.Security.AccessControl.RegistryRights.FullControl);
    return regKey;
} 
```

不适用于 Windows 7（在 XP SP3 上没问题） 我是 Windows 7（远程计算机）和 Windows XP（启动软件的本地计算机）的网络管理员。

1.  第一个问题是当我为远程机器提供 DNS 名称时，抛出错误“找不到网络路径”，DNS 名称众所周知 => 由 nslookup 检查。用IP代替，没有问题。

2.  当达到 OpenSubKey 时，另一个错误“访问被拒绝”，无论我使用 FullControl 参数设置方法。

那么我如何才能连接到 Windows 7 上的远程注册表项（显然，它曾经在 Windows XP 上运行过）。

更准确地说，该软件是在 Windows XP 上执行的，当我尝试在运行 Windows 7 的远程计算机上连接时，访问被拒绝。如果远程计算机是 Windows XP，则没有问题。

感谢您的帮助。

# code-analysis - CA2122：Microsoft.Security：“User.EmployeeId.get()”调用“PropertyValueCollection.Value.get()”

> ID：13856884
> 
> 赞同：1
> 
> 时间：2012-12-13T09:34:10.580
> 
> 标签：code-analysis

```
 Warning    76  CA2122 : Microsoft.Security : 'User.EmployeeId.get()' calls into 'PropertyValueCollection.Value.get()' which has a LinkDemand. By making this call, 'PropertyValueCollection.Value.get()' is indirectly exposed to user code. Review the following call stack that might expose a way to circumvent security protection: 
```

->'User.EmployeeId.get()' ->'User.EmployeeId.get()' C:\WiproDaas\WiproDaas\DirectoryService\User.cs 105 DirectoryService

```
 public string EmployeeId
    {
        get { return this["employeeID"].Value as string; }
        set { if (!string.IsNullOrEmpty(value)) this["employeeID"].Value = value; }
    } 
```

嗨，我在 get() 附近遇到警告，请帮助我如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:01:27.067

This is a trust issue. Try adding the following attribute to EmployeeId:

```
[EnvironmentPermissionAttribute(SecurityAction.LinkDemand, Unrestricted = true)] 
```

# python - 继承芹菜任务

> ID：13856886
> 
> 赞同：5
> 
> 时间：2012-12-13T09:34:23.687
> 
> 标签：python, django, celery, django-celery

我正在写很多非常相似的任务，并且想知道如何更好地子类化`Task`以减少样板。由于一个任务只被实例化一次，我不能`__init__`像下面展示的那样把东西放进去，但它应该能说明这一点。

我想要完成的事情：

```
class EmailTaskOne(Task):
    def run(self, object_id):
        email_data = EmailData.objects.get(pk=object_id)
        data = self.do_common_stuff(email_data)
        self.do_unique_stuff(data)

class EmailTaskTwo(Task):
    def run(self, object_id):
        email_data = EmailData.objects.get(pk=object_id)
        data = self.do_common_stuff(email_data)
        self.do_unique_stuff2(data)

# lots more tasks like this 
```

我想要的是：

```
class BaseEmailTask(Task):
     abstract = True
     #...Insert Magic Here...

class EmailTaskOne(BaseEmailTask):
     def run(self, object_id):
         self.do_unique_stuff(self.data) 
```

所以，既然`__init__`是正确的，我在哪里设置抽象类中的类。如果我想要做的只是排除一些东西，我可以很容易地定义一堆函数，但是一些（很多）样板文件取决于 object_id。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T16:47:58.693

我和 MauroRocco 的回答对你有帮助吗？

查看[celery 任务并自定义装饰器](https://stackoverflow.com/questions/6393879/celery-task-and-customize-decorator)

在那里我成功地将参数传递给扩展任务

# python - 从文本文件读入列表，然后将 cgi 表单响应写入同一个文件

> ID：13856889
> 
> 赞同：1
> 
> 时间：2012-12-13T09:34:37.743
> 
> 标签：python, html, list, cgi

我问了一个与此类似的问题，但我相信我太混乱了，无法说出我想要什么。

我有一个 cgi 脚本，我希望用户在其中输入关键字。有一个包含关键字的文件 keywords.txt。该程序将打开该文件并将其放入列表中。然后，它应该检查用户刚刚输入的关键字是否在该列表中。如果是，它将把它带到另一个 cgi 脚本，如果不是，它会将它写入文件并把它带到另一个 cgi 脚本。

我无法确定在我的 IF 语句中使用什么变量来检查用户输入的关键字是否在列表中。这是我到目前为止所拥有的，就像我说我的主要问题一样，如果弄清楚如何检查它是否在列表中，然后将它添加到文本文件中。

```
#!/usr/bin/env python
import cgi
import cgitb
cgitb.enable()

form = cgi.FieldStorage()
keyword = form.getvalue('keyword')

print 'Content-type: text/html\r\n\r'
print '<html>'
print '<h1>Please enter a keyword of your choice</h1>'
print '<form action="results.cgi" method="post">'
print 'Keyword: <input type="text" name="keyword">  <br />'
print '<input type="submit" value="Submit" />'
print '</form>'
print '</html>'

keylist = []
f = open('keywords.txt', 'rw')
for each in f.readlines():
    keylist.append(each)

if keyword in keylist:
    print 'Location: %s' % #URL to second cgi script

else:
    f.write(keyword)
    f.close()
    print 'Location: %s' % #URL to 3rd cgi script 
```

# html - CSS导致元素向上移动

> ID：13856890
> 
> 赞同：2
> 
> 时间：2012-12-13T09:34:40.577
> 
> 标签：html, css

我有一个非常奇怪的问题，我不确定原因。我页面上的元素并没有固定在它们定义的位置，而是向上“跳跃”。

我当前的布局看起来是这样的，下面是 HTML 和 CSS： ![当前布局](../Images/9fbcf991e3a3209ff2325e338b59074a.png)

**HTML**

```
<!DOCTYPE html>

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Screening - Your movie database | Discover. Watch. Share.</title>
    <meta name="description" content="Screening is a brand new take on the traditional movie database, fusing social networking and multimedia to provide a clear, concise experience allowing you to share your favourite movies, and discover new classics.">
    <meta name="keywords" content="Movies, Films, Screening, Discover, Watch, Share, experience, database, movie database, film database, share film, share films, discover film, discover films, share movie, share movies, discover movie, discover movies">
    <link rel="stylesheet" href="stylesheet.css" type="text/css" />
    <link rel="stylesheet" href="fonts.css" type="text/css" />

</head>

<body>

    <header>

<p class="logo"><a href="index.php" id="logo">Screening</a></p>

<nav>

    <ul>
        <li><a href="index.php" title="Home">Home</a></li>      
    </ul>

</nav>

<section id="header_search">

    <form id="search" action="search.php" method="get">
        <input type="text" title="name" name="title" placeholder="search for a movie">
    </form>

</section>

</header>   
    <div id="content">

        <div id="home_banner">
            <h1>Discover. Watch. Share.</h1>
            <h2>Screening. Your movie database.</h2>
        </div>

        <form id="homesearch" action="search.php" method="get">
            <input type="text" title="name" name="title" placeholder="search for a movie">
        </form>

    </div>

    <footer>

<p class="logo"><a href="index.php" id="logo">Screening</a></p>

<nav>

    <ul>
        <li><a href="index.php" title="Home">Home</a> | </li>
        <li><a href="about.php" title="About">About</a> | </li>
        <li><a href="privacy.php" title="Privacy Policy">Privacy Policy</a></li>            
    </ul>

</nav>

<p id="copyright">©Screening 2012</p>

</footer>   
</body>

</html> 
```

**CSS**

```
/* HTML reset */
html, * {
    margin: 0px;
    padding: 0px;
}

/* General styling */
body {
    font-family: 'RobotoLtRegular', Verdana, Helvetica, Arial, sans-serif;
    font-weight: normal;
    font-size: 1em;
    color: white;
    background-color: black;
    line-height: 20px;
    letter-spacing: 1.5px;
}

/*Custom link styles*/

a:link {
    color: white;
    background-color: transparent;
    text-decoration: none;
    -webkit-transition: color .4s linear;
    -moz-transition: color .4s linear;
    -ms-transition: color .4s linear;
    -o-transition: color .4s linear;
    transition: color .4s linear;
}

a:visited {
    color: white;
    background-color: transparent;
    text-decoration: none;
}

a:hover {
    color: #b70000;
    background-color: transparent;
    text-decoration: underline;
}

.logo a:link {
    text-decoration: none;
}

.logo a:hover {
    color: #b70000;
    background-color: transparent;
}

/* Header styling */
header {
    margin-bottom: 20px;
}

header, footer {
    height: 50px;
    padding-left: 50px;
    padding-right: 50px;
    font-size: .75em;
    clear: both;
}

header nav, .logo, footer nav {
    float: left;
}

header nav, footer nav, #header_search, #copyright {
    margin-top: 20px;
}

header li, footer li {
    display: inline;
}

#header_search {
    width: 200px;
    float: right;
    clear: right;
}

#search input, #homesearch input {
    padding: 0px 20px 0px 20px;
    color: #d7d7d7;
    background-color: #2d3035;
    border: solid 4px #2a2e31;
}

#search input:focus, #homesearch input:focus {
    outline: none;
    background-color: white;
    color: #6a6f75;
    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
}

#search input {
    width: 80%;
    height: 25px;
    font-size: 1.5em;
    border-radius:15px;
    -moz-border-radius:15px;
    -webkit-border-radius:15px;
}

/* Logo styling */
.logo {
    font-family: 'RobotoLtRegular', Verdana, Helvetica, Arial, sans-serif;
    font-size: 3em;
    width: 200px;
    margin-right: 10px;
    clear: left;
    border: solid 1px red;
}

/* Content wrapper */
#content {
    width: 90%;
    max-width: 1500px;
    margin: auto;
    padding: 30px 15px 30px 15px;
    clear: both;
    overflow: auto;
    background-color: rgba(203,203,203,0.2);
    background-image: url(assets/images/bkg.png);
    background-repeat: repeat;
}

/* Homepage */

#home_banner {
    padding-top: 50px;
    font-weight: normal;
    text-align: center;
    border: solid 1px red;
}

#home_banner h1 {
    font-size: 5em;
    clear: both;
    border: solid 1px blue;
}

#home_banner h2, #search input, #homesearch input, #searchresults, #details .title {
    font-family: 'RobotoThRegular', Verdana, Helvetica, Arial, sans-serif;
    font-weight: normal;
}

#home_banner h2 {
    font-size: 1.8em;
    clear: both;
    border: solid 1px yellow;
}

#homesearch {
    width: 480px;
    margin: 80px auto 70px auto;
    clear: both;
}

#homesearch input {
    width: 90%;
    font-size: 2em;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;
    text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3); 
} 
```

为了清晰起见，我为遇到问题的每个元素添加了边框。我最初正确地布置了所有东西，但是在某个地方出现了一些问题，我一生都无法弄清楚；我已经为此苦苦挣扎了好几个星期！我很确定这是一件小而简单的事情，但解决方案完全避开了我。

显然，预期的结果应该如下所示（忽略搜索栏的呈现，这是修改搜索栏之前的早期模型）： ![预期结果](../Images/812a437f20c8d0131b6197e9061861ae.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:42:23.407

只需杀死 body 的固定行高： line-height: 20px; <--摆脱它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:44:34.683

您已将`line-height`on设置`<body>`为`20px`。任何没有 a 的元素`line-height`（例如你的`<h1>`and `<h2>`）都将继承这个行高大小，即使它们的字体大小要大得多。

通常最好设置相对于字体大小的行高，即不要在它们上指定像素单位。

```
body {
    ...
    font-size: 1em;
    line-height: 1.25;/* This makes 20px the base line height, but it’ll get bigger for lines with a bigger font size */ 
```

*   [http://jsfiddle.net/8ZBzt/](http://jsfiddle.net/8ZBzt/)

# python - 为什么当我将它们映射在一起时，我无法以这种 Pyside 形式看到来自我的模型的数据？

> ID：13856897
> 
> 赞同：1
> 
> 时间：2012-12-13T09:35:03.660
> 
> 标签：python, model, pyqt, pyside

我有一个用于学习 PySide 的玩具电话簿应用程序：

```
import sys
import os

from PySide import QtCore, QtGui, QtSql

import phonebook_ui

CURRENT_FILE = os.path.abspath(__file__)
CURRENT_DIR = os.path.dirname(CURRENT_FILE)
DB_PATH = os.path.join(CURRENT_DIR, 'db.sqlite')

class PhoneBook(QtGui.QMainWindow, phonebook_ui.Ui_MainWindow):

    def __init__(self):
        super(PhoneBook, self).__init__()
        self.setupUi(self)
        self.db = self.create_connection()

        # this is where the two tables should me linked automatically
        self.model = QtSql.QSqlRelationalTableModel(self)
        self.model.setTable('person')
        self.model.setEditStrategy(QtSql.QSqlRelationalTableModel.OnManualSubmit)
        foreign_key = self.model.fieldIndex('service')
        self.model.setRelation(foreign_key, 
                               QtSql.QSqlRelation("service", "id", "nom"))
        self.model.select()

        self.relation_model = self.model.relationModel(foreign_key)
        self.edit_service.setModel(self.relation_model)
        self.edit_service.setModelColumn(self.relation_model.fieldIndex("name"))

        self.listing.setModel(self.model)
        self.listing.setColumnHidden(0, True)
        self.listing.setSelectionMode(QtGui.QAbstractItemView.SelectionMode.SingleSelection)

        # this is where the model data should be automatically injected in the
        # central table
        self.mapper = QtGui.QDataWidgetMapper(self)
        self.mapper.setModel(self.model)
        self.mapper.setItemDelegate(QtSql.QSqlRelationalDelegate(self))
        self.mapper.addMapping(self.edit_name, self.model.fieldIndex('name'))
        self.mapper.addMapping(self.edit_phone, self.model.fieldIndex('phone'))
        self.mapper.addMapping(self.edit_service, foreign_key)

        self.listing.selectionChanged = self.on_selection_changed

    def on_selection_changed(self, selected, deselected):
        range = selected[0]
        index = range.indexes()[0]
        self.mapper.setCurrentIndex(index.row())

    @classmethod
    def create_connection(cls, bdd=DB_PATH):
        db = QtSql.QSqlDatabase.addDatabase("QSQLITE")
        db.setDatabaseName(bdd)
        db.open()
        query = QtSql.QSqlQuery()
        query.exec_(u"create table person(id int primary key, name varchar(20), "
                    u"phone varchar(20), service varchar(20))")    
        db.commit()
        return db

    def close(self):
        super(PhoneBook, self).close()
        self.db.close()

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    phonebook = PhoneBook()
    phonebook.show()
    sys.exit(app.exec_()) 
```

这是一个屏幕截图：

![电话簿玩具应用截图](../Images/45d1d0c9a9eaae6a2d51f53b051a5727.png)

我的表如下所示：

![电话簿数据库表的屏幕截图](../Images/96d405e77f5e88897dee76c9fcaa53e1.png)

我设法让它在没有服务字段的情况下工作一次，但现在我添加了它，我引入了 QSqlRelationalTableModel 的概念并未能使其工作。

它应该做什么：

*   用数据库中的人员列表填充大的白色中央表（失败，尽管模型和映射器正在设置并且数据库包含 2 个条目）
*   单击任何中央表格行，用行数据填写底部表格
*   允许编辑和保存。

数据库充满了数据，可以从我在 python shell 中的测试中读取。

代码没有抛出任何错误，但什么也没有发生：窗口显示在那里没有任何内容。

你能在这里指出我的错误吗？

我很乐意提供您需要的任何其他信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:52:43.203

在您拥有的代码中`service varchar(20))`，但在屏幕截图中，服务是一个单独的表（应该是）。`nom`但我`name`在屏幕截图 ( `QtSql.QSqlRelation("service", "id", "name")`) 上看到了。

因此，如果您将检查您的数据库模式并用代码实现它，它应该可以工作。

```
@classmethod
def create_connection(cls, bdd=DB_PATH):
    db = QtSql.QSqlDatabase.addDatabase("QSQLITE")
    db.setDatabaseName(bdd)
    db.open()
    query = QtSql.QSqlQuery()
    query.exec_(u"create table person(id int primary key, name varchar(20), "
                u"phone varchar(20), service int)")    

    query.exec_(u"create table service(id int primary key, name varchar(20))")  
    db.commit()
    return db  # don't forget to return it, as you use it in close 
```

PS我没有检查“编辑”和“添加”逻辑。

# sql - Hibernate/SQL：仅当存在一对多关系时才选择记录，返回太多

> ID：13856898
> 
> 赞同：0
> 
> 时间：2012-12-13T09:35:05.840
> 
> 标签：sql, hibernate, join

在我的应用程序中，我有 2 个表格，结算结果和结算状态结算结果包含一些基本数据，如名称、类型等。结算状态是与结算结果相关的“多”方面，包括结算结果 PK 和多对状态-一个ID作为PK和一个日期。示例数据：

```
Settlement Result
------------------------------
ID| Name      | Sth
------------------------------
1 | Some Name | Something more
2 | Name2     | more2

Settlement State
----------
Result's ID | StatusId     | Date 
------------------------------
1           | 1            | some date
1           | 2            | date
1           | 3            | date
2           | 1            | date 
```

现在我希望使用 HQL/Plain SQL 从结算结果中选择具有例如状态 ID == 3 的行，但没有任何具有更高 ID 的行。

有几种可能的状态：

```
Status ID | Desc
-----------------
1 | Created
2 | Confirmed
3 | Accepted
4 | Rejected 
```

当我们创建 SettlementResult 时，总会有一些“工作流程”。首先，Result 的状态为 Created (ID 1)。然后它可以被拒绝（ID 4）或确认（ID 2）。然后我们可以再次接受或拒绝。

因此，一个 SettlementResult 可以具有状态 ID 为 1、2、4 的 SettlementStates（已创建、已确认，但未接受=拒绝）。

问题是，我只想选择那些具有特定状态（例如 Created）的 SettlementResults。”

使用这样的 HQL 查询：

```
Query query = session.createSQLQuery( "select distinct s from SettlementResult s join s.settlementStates states where states.settlementStatePK.status.statusId == 1" ); 
```

它返回每个结算结果，即使是状态为 1、2、3 的结果（因为集合包含 ID 等于 created 的结果）。

是否可以仅选择仅具有特定状态的那些结算结果，例如，如果我们想要 Created[ID 1]，我们将获得所有结算状态状态为 1，没有 2,3 或 4 状态的所有结算结果。当我们选择状态 id 为 3 的那些时，我们可以接受状态 id = 1,2,3 但不是 4 的结算状态。某种`max[status.id]`？

```
@Entity
@Table(name = "SETTLEMENT_STATE")
public class SettlementState
{
    @EmbeddedId
    private SettlementStatePK settlementStatePK;

    @Column(name = "DESCRIPTION")
    private String description;

    @Column(name = "STATUS_DTTM")
    private Date statusDate;
}

@Embeddable
public class SettlementStatePK implements Serializable
{
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "STATUS_ID")
    private Status status;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "SETTLEMENT_RESULT_ID")
    private SettlementResult settlementResult;
}

@Entity
@Table(name = "SETTLEMENT_RESULT")
public class SettlementResult implements Serializable
{
    @Id
    @Column(name = "SETTLEMENT_RESULT_ID")
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "STATUS_ID")
    private Status status;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "MODEL_GROUP_ID")
    private SettlementModelGroup settlementModelGroup;

    @Column(name = "\"MODE\"")
    private Integer mode;

    @Column(name = "CREATED_DTTM")
    private Date createdDate;

    @Column(name = "DESCRIPTION")
    private String description;

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "settlementStatePK.settlementResult")
    private List<SettlementState> settlementStates;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:47:18.330

您在这里有两个选择：

如果您看到您的查询，您正在获取 SettlementResult 对象

```
Query query = session.createSQLQuery( "select distinct s from SettlementResult s join s.settlementStates states where states.settlementStatePK.status.statusId == 1" ); 
```

您的查询是完美的，但是一旦您拥有父对象 SettlementResult 并且您访问 OneToMany 集合结算状态，休眠将根据 SettlementResult PK 加载所有这些（这也是您观察到的）。

所以**Option-1** : **Go through Child to Parent** 这意味着从您的查询中返回 SettlementState 对象：

```
Query query = session.createSQLQuery( "select distinct states from SettlementResult s join s.settlementStates states where states.settlementStatePK.status.statusId == 1" ); 
```

然后您可以从状态对象访问 SettlementResult，因为您已经在 SettlementState 类中为 SettlementResult 定义了 ManyToOne。在这种情况下，您肯定会拥有您正在寻找的那些 SettlementResult 对象。

**选项 2：划分您的 SettlementState 对象** 选项 1 对您有用，但此解决方案对您来说可能看起来很奇怪。因此，解决此问题的最佳方法是您可以划分 Settlement State 对象（如您的问题中所述）

```
1\. RejectedSettlementState
2\. NonRejectedSettlementState 
```

这两个类将扩展一个基本抽象类（SettlementState）。您可以在状态 ID 上定义鉴别器公式。一旦有了这些类，就可以将这些子类关联到 SettlementResult。这是您需要的课程（sudo）

```
@DiscriminatorForumla("case when status_id == 4 then "REJECTEDSTATE" else "NONREJECTEDSTATE" end")
public abstract class SettlementState{
...
// Define all of your common fields in this parent class
}

@DiscriminatorValue("REJECTEDSTATE")
public class RejectedSettlementState extends SettlementState{
...
// define only fields specific to this rejected state
}

@DiscriminatorValue("NOTREJECTEDSTATE")
public class NonRejectedSettlementState extends SettlementState{
...
// define only fields specific to this non-rejected state
} 
```

现在是 SettlementResult 类

```
public class SettlementResult{

@OneToMany(fetch = FetchType.LAZY, mappedBy = "settlementStatePK.settlementResult")
private List<RejectedSettlementState> rejectedSettlementStates;

@OneToMany(fetch = FetchType.LAZY, mappedBy = "settlementStatePK.settlementResult")
private List<NonRejectedSettlementState> nonRejectedSettlementStates;

} 
```

因此，一旦您拥有所有这些对象。然后你不需要查询状态。您只需加载父对象 SettlementResult，然后访问您的拒绝或非拒绝结算状态。Hibernate 将使用公式条件使用在 SettlementResult 类中定义的延迟加载来初始化这些集合。

**注意** 这两种解决方案对我来说都是可以接受的，这取决于您希望系统中的哪一个存在。第二个选项为您提供更多未来优势。

**更多信息：请询问！我已尽力让您了解这个想法:)。祝你好运！**

# iphone - 在 ios5 中设置色调颜色可以正常工作，但在 ios4 中会导致崩溃

> ID：13856904
> 
> 赞同：0
> 
> 时间：2012-12-13T09:35:21.987
> 
> 标签：iphone, ios, ipad

```
self.navigationItem.rightBarButtonItem.tintColor = [UIColor blueColor]; 
```

在这里，我为 rightbarbuttom 项目设置了蓝色，它在 ios5 中有效，但在 ios4 中无效。我应该如何防止崩溃，以便我的应用同时支持 ios4 和 ios5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:55:40.700

是的，@borrrden 是正确的，设置`tintColor`for`UIBarButtonItem`仅在`iOS 5.0`. 在设置颜色之前检查条件`navigationItem`

```
#if __IPHONE_5_0 <= __IPHONE_OS_VERSION_MAX_ALLOWED
      self.navigationItem.rightBarButtonItem.tintColor = [UIColor blackColor];
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:39:15.297

您应该停止使用`appearance`and `UIBarButtonItem`，`tintColor`因为它们在 iOS 4.x 上不受支持

# javascript - 如何使用 jquery 根据另一个 TextBox 值将值插入到 TextBox

> ID：13856909
> 
> 赞同：-1
> 
> 时间：2012-12-13T09:35:34.220
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在使用 asp.net mvc 3。到目前为止，我已经设法创建了一个 datepicker。目前，我认为下面的代码显示了三个字段。

```
 @Html.TextBoxFor(model => model.QuizNo, new{@class = "qno"}) 
   @Html.TextBoxFor(model => model.Mark, new { @class = "mk" })
   @Html.EditorFor(model => model.Pass, new { @class = "ps" }) 
```

最后一个具有布尔值。这是我在 TextBoxes 中更改或设置值的脚本。

```
<script type="text/javascript">
$(document).ready(function () {
   var qn =  $(".qno :input").val();
   $(".mk").val(qn);
   });
 </script> 
```

我正在对此进行测试，看看当我在 QuizNo 文本框中输入一个值时，我是否在 Mark 文本框上得到一个值。到目前为止，上面的代码还没有发生。

我是 asp.net mvc 3 的新手，jquery 想检查 QuizNo 中输入的值，如果它是 134、144 或 156，那么任何高于 10 的 Mark 值都是通过。

下面是输出的 HTML 代码。

```
<form action="/Home/CreateNewcert/4558" method="post">    <fieldset>
        <legend>CPD Details</legend>
           <table style="border:1px solid #ffffff;">

        <tr>
        <td width="30%" style="border:1px solid #ffffff;">
        <div class="editor-label">
            <label for="QuizNo">QuizNo</label>
        </div>
        <div class="editor-field">

            <input class="qno" data-val="true" data-val-number="The field QuizNo must be a number." id="QuizNo" name="QuizNo" type="text" value="" /> 
            <span class="field-validation-valid" data-valmsg-for="QuizNo" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Received">Received</label>
        </div>
        <div class="editor-field">
            <select class="list-box tri-state" id="Received" name="Received"><option selected="selected" value="">Not Set</option>
<option value="true">True</option>
<option value="false">False</option>
</select>
            <span class="field-validation-valid" data-valmsg-for="Received" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="DateReceived">DateReceived</label>
        </div>
        <div class="editor-field">
            <input class="datefield" id="DateReceived" name="DateReceived" type="date" value="" />
            <span class="field-validation-valid" data-valmsg-for="DateReceived" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Paid">Paid</label>
        </div>
        <div class="editor-field">
            <select class="list-box tri-state" id="Paid" name="Paid"><option selected="selected" value="">Not Set</option>
<option value="true">True</option>
<option value="false">False</option>
</select>
            <span class="field-validation-valid" data-valmsg-for="Paid" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="DatePaid">DatePaid</label>
        </div>
        <div class="editor-field">
            <input class="datefield" id="DatePaid" name="DatePaid" type="date" value="" />
            <span class="field-validation-valid" data-valmsg-for="DatePaid" data-valmsg-replace="true"></span>
        </div>
        </td>
          <td width="30%" style="border:1px solid #ffffff;">

        </td>

        <td width="30%" style="border:1px solid #ffffff;">
        <div class="editor-label">
            <label for="Mark">Mark</label>
        </div>
        <div class="editor-field">
            <input class="mk" id="Mark" name="Mark" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="Mark" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="MarkDate">MarkDate</label>
        </div>
        <div class="editor-field">
            <input class="datefield" id="MarkDate" name="MarkDate" type="date" value="" />
            <span class="field-validation-valid" data-valmsg-for="MarkDate" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Pass">Pass</label>
        </div>
        <div class="editor-field">
            <select class="list-box tri-state" id="Pass" name="Pass"><option selected="selected" value="">Not Set</option>
<option value="true">True</option>
<option value="false">False</option>
</select>
            <span class="field-validation-valid" data-valmsg-for="Pass" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Printed">Printed</label>
        </div>
        <div class="editor-field">
            <select class="list-box tri-state" id="Printed" name="Printed"><option selected="selected" value="">Not Set</option>
<option value="true">True</option>
<option value="false">False</option>
</select>
            <span class="field-validation-valid" data-valmsg-for="Printed" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="PrintedDate">PrintedDate</label>
        </div>
        <div class="editor-field">
            <input class="datefield" id="PrintedDate" name="PrintedDate" type="date" value="" />
            <span class="field-validation-valid" data-valmsg-for="PrintedDate" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="AccreditationNo">AccreditationNo</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-number="The field AccreditationNo must be a number." id="AccreditationNo" name="AccreditationNo" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="AccreditationNo" data-valmsg-replace="true"></span>
        </div>
        </td></tr></table>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:46:37.797

你应该试试这个。

```
<script type="text/javascript">
$(document).ready(function () {
 $(".qno").keyUp(function(){
   $(".mk").val($(this).val());
 });
});
</script> 
```

# vim - Taglist: 无法为 macvim 生成标签

> ID：13856911
> 
> 赞同：3
> 
> 时间：2012-12-13T09:31:16.630
> 
> 标签：vim

每当我尝试使用**macVim**打开 Rails 项目中的文件时。我收到一个错误

```
Taglist: Failed to generate tags for ....... 
```

但它在终端 vim 中完美运行。为什么会这样？我是一个初学者，刚刚使用这个[dotvim](https://github.com/astrails/dotvim) repo 安装了所有东西。

我使用从[这个 Gist](https://gist.github.com/1570678)获得的这些命令安装了 ctags ：

```
$ ctags -R --exclude=.git --exclude=log *
ctags: illegal option -- R
usage: ctags [-BFadtuwvx] [-f tagsfile] file ...

#you need to get new ctags, i recommend homebrew but anything will work
$ brew install ctags

#alias ctags if you used homebrew
$ alias ctags="`brew --prefix`/bin/ctags"

#try again!
ctags -R --exclude=.git --exclude=log * 
```

`which ctags`在终端返回时，如果我使用`!`(bang) 从 vim 或 gvim 执行相同操作：

```
 /usr/bin/ctags 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T09:37:57.477

您需要更改`PATH`订单以`/usr/local/bin/ctags`提前完成`/usr/bin/ctags`。我更喜欢实现这一点的方法是`/usr/local/bin`在开头添加`/etc/paths`：

```
# for homebrew
/usr/local/bin

# original order
/usr/bin
/bin
/usr/sbin
/sbin
#/usr/local/bin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-31T21:12:29.487

或者您可以设置一个变量，例如

```
let g:Tlist_Ctags_Cmd='/usr/local/bin/ctags'  " Proper ctags location 
```

在你的 .vimrc 文件中。

# php - 联系表格，包括上一页的推荐

> ID：13856915
> 
> 赞同：0
> 
> 时间：2012-12-13T09:36:02.310
> 
> 标签：php, forms, http-referer

我有一个使用 POST 的 php 联系表格，我想在表格中自动包含引用页面，即链接到联系表格的网站。这通常在我的网站内。

例如，

www.website.com/nothere.php 返回 404.php（以 www.website.com/nothere.php 作为地址）

在 404 页面上，我有一个指向 feedback.php 的链接，这是一个联系表格。

我希望提交的表单中包含引用 URL（在本例中为“www.website.com/nothere.php”）。

我知道我可以使用以下代码：

```
$ref = getenv("HTTP_REFERER"); 
```

因此，我将其添加到页面顶部的 php 中（这是一个片段）：

```
$SendTo = "web@website.com";
$Subject = "Website Feedback";
$FromString = "From: ".$_POST['eaddress']."\r\n";
$ref = getenv("HTTP_REFERER"); 
```

但是我如何编码 indhold 以便将推荐信息打印在电子邮件上？

```
$Indhold .= "Referring page: ".$_POST['$????']."\n"; 
```

有人可以帮助我在上面的行中添加什么吗？还是我需要以不同的方式解决这个问题？

非常感谢！安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:39:46.543

在您的联系表单中放置一个隐藏的输入字段，其中包含引用者：

```
<form ...>
...
<input type="hidden" value="<?php echo $_SERVER['HTTP_REFERER'] ?>" name="referer" />
...
</form> 
```

然后您可以`$_POST['referer']`在发送电子邮件时访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:41:33.760

好吧..您确实可以为此使用 $_SERVER['HTTP_REFERER'] 。要包含它，只需编写如下内容：

```
<input type="hidden" name="referer" value="<?php echo $_SERVER['HTTP_REFERER']; ?>" /> 
```

在您的联系表格中。

然后，当您撰写消息时，只需执行以下操作：

```
$Indhold .= 'Referring page: '.$_POST['referer']."\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T09:53:45.437

在你做任何事情之前，你应该知道这`$_SERVER['HTTP_REFERER']`是由客户设置的。这意味着它可以包含任何东西。如果您确实需要知道引荐来源网址，那么至少要确保它是一个 URL，并且它不指向任何网站。

例如：

```
$ref = filter_input(INPUT_SERVER, 'HTTP_REFERER', FILTER_SANITIZE_URL);
if ( ! preg_match('/^http:\/\/website.com/', $ref)) {
    $ref = '(Unknown URL...)';
} 
```

如果您只是使用`HTTP_REFERER`而不先检查它，那么一些坏人可以将其设置为在机器上安装病毒的 URL。换句话说：除非你检查它，否则不要使用它。

# jquery - 同位素 - 同位素之外的元素

> ID：13856916
> 
> 赞同：0
> 
> 时间：2012-12-13T09:36:09.680
> 
> 标签：jquery, html, css, jquery-isotope

我正在构建一个页面，其中有由同位素统治的块，我想插入一个分隔符。这是我的例子：

```
 <div id="container_iso">
    <div class="block col1"></div>
    <div class="block col2"></div>
    <div class="block col1"></div>
    <div class="block col1"></div>
    <div class="block col1"></div>
    <div class="block col1"></div>
    <div class="block col1"></div>

    <div class="separator"></div>

    <div class="block col1"></div>
    <div class="block col1"></div>
    <div class="block col1"></div>
    <div class="block col1"></div>
    <div class="block col1"></div>
    <div class="block col1"></div>

    <div class="separator"></div>

    </div>
<style>
.container_iso{max-width:999px;}
.block{}
.col1{width:33%;min-width: 333px;}
.col2{width:auto;min-width: 333px;max-width: 666px;}
.separator{width:100%;}
</style> 
```

我如何告诉 Isotope 不要在我的“分隔符”div 上工作。那是我的js：

```
$('.container_iso').isotope({
      itemSelector : '.block',
      columnWidth : 333,
    }); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:11:32.377

如果分隔符里面什么都没有，你可以

1）在您喜欢的高度放置一个透明的png图像。2）您可以使用此示例代码来实现您的目标

```
.container_iso{max-width:999px; border: 1px solid #111; }
.block{}
.col1{float: left; width:33%;min-width: 333px;height: 25px; background-color: #eee; border: 1px solid #ddd;}
.col2{float: left; width:auto; min-width: 333px; max-width: 666px; height: 25px; background-color: #ccc; border: 1px solid #ddd;}
.separator{float:left; width:100%; height: 25px; background-color: #fff;} 
```

默认情况下，同位素意味着元素之间没有间隙。

如果您可以 jsfiddle 确切的场景，您可能会得到确切的答案。这里以我的 jsFiddle 为例：

[http://fiddle.jshell.net/C7num/3/](http://fiddle.jshell.net/C7nUM/3/)

[http://fiddle.jshell.net/C7num/3/show/](http://fiddle.jshell.net/C7nUM/3/show/)

希望有效..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T11:41:55.663

*根据您的后续评论*，您的问题是自动列大小。

默认布局是`Masonry`. Masonry 通过为布局中的每个列宽分配一列来计算位置。**如果您未指定它，它将从第一个元素获取大小。**

但是，您可以在选项中指定列大小。**重要提示：**您实际上可以指定小于所有项目的列宽。如果可能的话，最好找到一个作为所有项目宽度的共同因素的值，因为非常小的宽度会导致在后台使用更多的内存。

## 例如

```
$('.container_iso').isotope({
      itemSelector : '.block',
      layoutMode: 'masonry',
      masonry: {
          columnWidth: 5
      }
    }); 
```

# facebook - facebook c# sdk：如何获取所有用户的facebook页面

> ID：13856918
> 
> 赞同：0
> 
> 时间：2012-12-13T09:36:11.470
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我想检索用户正在管理的所有页面名称。我遇到了[这篇文章](https://stackoverflow.com/questions/2966015/facebook-get-list-of-pages-that-a-user-is-admin-of)，这正是我想要使用图形 api 而不是 FQL 的。我已经获得了访问令牌，但我无法使用下面的代码进行调试。任何人都知道我该如何实现这一目标？

```
//view all user pages
    private void pageBtn_Click(object sender, EventArgs e)
    {

        FacebookAPI api = new Facebook.FacebookAPI(myToken.Default.token);

        JSONObject pageData = api.Get("/me/account");//pulls all the pages 

        var data = pageData.Dictionary["name"];

        List<JSONObject> pageList = data.Array.ToList<JSONObject>();

        foreach (var page in pageList)
        {
            lbPages.Items.Add(page.Dictionary["name"].String);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:45:32.167

好吧，我想我明白了。我使用下面的代码将我拥有的所有页面返回给我。感谢 TommyBs 的第一个垫脚石！

```
 FacebookAPI api = new Facebook.FacebookAPI(myToken.Default.token);

            JSONObject pageData = api.Get("/me/accounts");

            var data = pageData.Dictionary["data"];

            List<JSONObject> pageList = data.Array.ToList<JSONObject>();

            foreach (var page in pageList)
            {
                // myFriendsData.Add(friend.Dictionary["id"].String, friend.Dictionary["name"].String);
                listBox1.Items.Add(page.Dictionary["name"].String);
            } 
```

# java - Eclipse插件，如何调用其他插件中的方法

> ID：13856921
> 
> 赞同：2
> 
> 时间：2012-12-13T09:36:21.520
> 
> 标签：java, eclipse, manifest, eclipse-plugin

我开发了两个 Eclipse 插件，EAXMLModelExchange 和 EAXMLModelExchangeWizard。

我想在插件 EAXMLModelExchangeWizard 中调用一个公共静态方法 EAXMLExchange.convertEAModelToEAXml(String, String)。

该类位于包 eaxmlmodelexchange 中。

如何调用该方法。导入 eaxmlmodelexchange.EAXMLExchange；

当我将项目作为 Eclipse 应用程序运行时它可以工作，但是当我将它导出到 .jar 文件时，该方法不会被调用。

```
public void runFunction() {
   EAXMLExchange.convertEAModelToEAXml(String, String);
} 
```

EAXMLModelExchange 中的 MANIFEST.MF

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: EAXMLModelExchange
Bundle-SymbolicName: EAXMLModelExchange;singleton:=true
Bundle-Version: 1.0.0
Require-Bundle: org.eclipse.core.runtime,
 org.eclipse.sphinx.emf;bundle-version="0.7.0"
Bundle-ActivationPolicy: lazy
Bundle-RequiredExecutionEnvironment: JavaSE-1.7
Export-Package: eaxmlmodelexchange 
```

EAXMLModelExchangeWizard 中的 MANIFEST.MF

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: EAXMLModelExchangeWizard
Bundle-SymbolicName: EAXMLModelExchangeWizard;singleton:=true
Bundle-Version: 1.0.0
Bundle-Activator: eaxmlexchangewizard.Activator
Require-Bundle: org.eclipse.ui,
 org.eclipse.core.runtime,
 org.eclipse.core.resources,
 org.eclipse.ui.ide,
 org.eclipse.sphinx.emf;bundle-version="0.7.0",
 EAXMLModelExchange;bundle-version="1.0.0"
Bundle-ActivationPolicy: lazy
Bundle-RequiredExecutionEnvironment: JavaSE-1.7 
```

有谁知道如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:17:18.780

一种可以用来查看抛出什么错误的技术是将任何异常写入 Eclipse 日志。错误日志视图允许您查看和清除日志。

```
try {
    EAXMLExchange.convertEAModelToEAXml("Hello", "World");
} catch (Exception e) {
    IStatus status = new Status(Status.ERROR,"EAXMLModelExchangeWizard","Error calling other plugin",e);
    Activator.getDefault().getLog().log(status);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:50:04.383

需要进行一些澄清。

当您说您已将它们导出为 jar 文件时，这是否意味着插件 jar 并且您已将它们放置在 eclipse 环境中？（如 dropins 文件夹）
如果不是......如果您作为简单的 java 应用程序调用，则相互之间的依赖关系将不知道。您必须在调用之前将它们都放在类路径中，或者一个 jar 的 MANIFEST.MF 文件应该添加额外的选项 Class-Path: <name of the otherdependent jar>

# android - Android 4.0 (API 14+) 中的活动之间的默认转换是什么

> ID：13856925
> 
> 赞同：12
> 
> 时间：2012-12-13T09:36:41.150
> 
> 标签：android, android-animation

我构建了一个包含很多活动的应用程序，我希望在它们之间进行“从右侧滑动进入/从左侧滑动退出”的过渡。

我不止一次读到幻灯片过渡应该是 Android 默认设置，但在我正在开发的设备上，默认情况下过渡是淡入/淡出（Galaxy Tab 2 7"，在 ICS 4.0 上）。

我需要在应用程序级别声明什么，例如在清单文件中？

我在问，因为否则我需要添加`overridePendingTransition (R.anim.right_slide_in, R.anim.left_slide_out);`到我所有的过渡中，这些过渡很多......只是想知道在走这条路之前我是否遗漏了一些东西。

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T12:08:40.010

没有答案...在我尝试过的设备 4+ 上，动画是带有放大或缩小功能的淡入淡出...

我在想要幻灯片动画的地方手动添加了代码：

```
//open activity
startActivity(new Intent(this, MyActivity.class));
overridePendingTransition(R.anim.right_slide_in, R.anim.left_slide_out); 
```

从右到左的xml动画：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_decelerate_interpolator" >

<translate
    android:duration="300"
    android:fromXDelta="100%p"
    android:toXDelta="0" />

</set> 
```

从左到右的xml动画：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_decelerate_interpolator" >

<translate
    android:duration="300"
    android:fromXDelta="0"
    android:toXDelta="-100%p" />

</set> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-14T12:26:28.097

在你的**style.xml** 文件中放

```
 <style name="WindowAnimationTransition">
    <item name="android:windowEnterAnimation">@android:anim/slide_in_left</item>
    <item name="android:windowExitAnimation">@android:anim/slide_out_right</item>
</style> 
```

并添加

```
 <style name="AppTheme.Base" parent="Theme.AppCompat.Light.DarkActionBar">
    <!-- Customize your theme here. -->
   ...
    <item name="android:windowAnimationStyle">@style/WindowAnimationTransition</item>
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-26T01:43:25.567

有一种方法涉及创建样式，然后在此处将其添加到清单中： [如何在 Android 应用程序中一次更改所有活动转换？](https://stackoverflow.com/questions/8319465/how-to-change-all-the-activity-transitions-at-once-in-android-application)，但我只能设法让它工作`startActivity()`。每当按下返回时，此方法将不起作用，或者我可能只是遗漏了一些东西。

# opencart - 如何在打开的购物车主页中显示左侧栏和右侧栏

> ID：13856929
> 
> 赞同：0
> 
> 时间：2012-12-13T09:36:50.963
> 
> 标签：opencart

我正在为我的网站使用 1.5.4 **opencart**。我想知道几个小时，但仍然没有得到任何准确的解决方案。请给我解决方案我怎么能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:05:01.637

您只需要在主页的左右栏分别添加一些模块即可。在 Admin 中转到 Extensions>Modules 并添加一些模块：布局 - 主页、位置 - 左栏或右栏。此时默认的幻灯片模块设置看起来不正确。只需禁用它或更改它的设置 - 尺寸/位置等。

[编辑：回应评论#1]

我相信您误解了我的回答：在管理员中转到扩展>模块。

使用要添加到左列或右列的每个模块右侧的安装或编辑按钮，例如“类别”。然后按照我之前写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T18:10:31.223

转到扩展->模块->类别..然后选择主页作为布局..希望这对你有用..

# c++ - 我可以将纯文件链接到我的可执行文件中吗？

> ID：13856930
> 
> 赞同：46
> 
> 时间：2012-12-13T09:36:54.423
> 
> 标签：c++, c, gcc, linker, embedded-resource

一些框架（Qt、Windows、Gtk...）提供向二进制文件添加资源的功能。*我想知道如果没有*框架是否有可能实现这一点，因为真正需要的是

1.  在二进制（数据段）中包含资源地址的符号
2.  表示资源长度的符号
3.  资源本身

使用 gcc 工具链如何实现这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-13T09:56:58.137

你可以这样做：

```
objcopy --input binary \
        --output elf32-i386 \
        --binary-architecture i386 my_file.xml myfile.o 
```

这会生成一个目标文件，您可以将其链接到您的可执行文件中。该文件将包含这些符号，您必须在 C 代码中声明才能使用它们

```
00000550 D _binary_my_file_xml_end
00000550 A _binary_my_file_xml_size 
00000000 D _binary_my_file_xml_start 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-13T09:41:20.843

在最基本的情况下，等价物是一个`char`充满字节的数组。

在 Linux 上，您可以使用`xxd -i <file>`将文件“编译”成`char`数组，然后将数组链接到您的二进制文件中，并随意使用组成字节。

这是我自己的代码中的一个示例`makefile`，它创建了一个名为“资源文件”，`templates.h`其中包含一堆`char`表示 HTML 模板的数组：

```
templates.h:
    @echo "#ifndef REDACTED_TEMPLATES_H" > templates.h
    @echo "#define REDACTED_TEMPLATES_H" >> templates.h
    @echo "// Auto-generated file! Do not modify!" >> templates.h
    @echo "// NB: arrays are not null-terminated" >> templates.h
    @echo "// (anonymous namespace used to force internal linkage)" >> templates.h
    @echo "namespace {" >> templates.h
    @echo "namespace templates {" >> templates.h
    @cd templates;\
    for i in * ;\
    do \
        echo "Compiling $$i...";\
        xxd -i $$i | sed -e 's/ =/ __attribute__((unused)) =/' >> ../templates.h;\
    done;\
    cd ..
    @echo "}" >> templates.h
    @echo "}" >> templates.h
    @echo "#endif" >> templates.h 
```

^(（**另请参阅：** [我怎样才能以编程方式最好地将 `__attribute__ ((unused))` 应用于这些自动生成的对象？](https://stackoverflow.com/q/7660494/560648)）)

结果看起来有点像：

```
#ifndef REDACTED_TEMPLATES_H
#define REDACTED_TEMPLATES_H
// Auto-generated file! Do not modify!
// NB: arrays are not null-terminated
// (anonymous namespace used to force internal linkage)
namespace {
namespace templates {
unsigned char alert_email_finished_events_html[] __attribute__((unused)) = {
  0x3c, 0x74, 0x61, 0x62, 0x6c, 0x65, 0x20, 0x63, 0x6c, 0x61, 0x73, 0x73,
  0x3d, 0x22, 0x6e, 0x6f, 0x64, 0x65, 0x2d, 0x69, 0x6e, 0x66, 0x6f, 0x2d,
[..]
  0x7d, 0x7d, 0x0d, 0x0a, 0x3c, 0x2f, 0x74, 0x61, 0x62, 0x6c, 0x65, 0x3e,
  0x0d, 0x0a
};
unsigned int alert_email_finished_events_html_len __attribute__((unused)) = 290;
unsigned char alert_email_finished_events_list_html[] __attribute__((unused)) = {
  0x3c, 0x74, 0x72, 0x20, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x3d, 0x22, 0x73,
  0x65, 0x70, 0x61, 0x72, 0x61, 0x74, 0x65, 0x2d, 0x70, 0x72, 0x65, 0x76,
[..]
  0x73, 0x74, 0x7d, 0x7d, 0x0d, 0x0a
};
unsigned int alert_email_finished_events_list_html_len __attribute__((unused)) = 42;
}
}
#endif 
```

请注意，当仅在一个翻译单元中使用资源时，此特定示例是最佳选择，但可以调整通用方法以满足您的需求。

# c# - Open MenuItem URL in iFrame in ASP.Net

> ID：13856932
> 
> 赞同：1
> 
> 时间：2012-12-13T09:36:55.623
> 
> 标签：c#, asp.net, url, iframe, menuitem

I have a dynamically generated menu (C#), like this:

`MenuItem(string text, string value, string imageUrl, string navigateUrl, string target)`

`MenuItem AdminLevel1 = new MenuItem("Admin", "Admin"); MenuItem AdminPedidosRegisto = new MenuItem("Questions", "AdminQ");
NavigationMenu.Items.Add(new MenuItem("Messages Received", "AdminMessagesR", "", "./Admin/Messages.ascx", "ContainerIframe")); AdminPedidosRegisto.ChildItems.Add(new MenuItem("Pending", "AdminPending", "", "./Admin/Pedidos.ascx", "ContainerIframe"));`

Where 'ContainerIframe' is the iFrame's ID and 'NavigationMenu' is the (asp:Menu)'s ID.

I want the URL in navigateUrl to open in an iFrame. Is that possible? If i set the iFrame's ID in the target parameter, in google chrome it works fine, but not in the other browsers. Is there a way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:59:21.977

Use the `name` of the iframe and not the `id` to archive that, to load the page inside the iframe.

eg:

```
<iframe src="whatever.htm" id="whateverid" name="ContainerIframe"></iframe> 
```

You can have the same id and name, but the important here is the `name`

Here is an iframe test that work: [http://jsfiddle.net/7AMjy/3/](http://jsfiddle.net/7AMjy/3/)

# iphone - 第二视图中的标签栏

> ID：13856933
> 
> 赞同：0
> 
> 时间：2012-12-13T09:37:01.320
> 
> 标签：iphone, objective-c, ios, uitabbar

我的应用程序中有一个激活页面，每个用户都必须激活该应用程序。一旦应用程序被激活，用户就会移动到标签栏视图。

我创建了一个选项卡栏应用程序，从我的activationView 中单击按钮，我试图调用选项卡栏，我得到一个完整的黑屏。

```
- (IBAction)moveToActivateView:(id)sender {
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    UITabBarController *tabBarController = [[UITabBarController alloc]init];
    [self.view addSubview:tabBarController.view];
    appDelegate.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    self.tabBarController.viewControllers = @[viewController1, viewController2];
    appDelegate.window.rootViewController = self.tabBarController;
    [appDelegate.window makeKeyAndVisible];} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:46:19.700

嘿，在 appDelegate 中创建 tabBarController 的属性并在那里分配所有 ViewController，然后从 yourViewController 调用 tabBarController

**在 AppDelegate.h**

```
@property (nonatomic, retain) IBOutlet UINavigationController *navigationController;
@property (retain, nonatomic) IBOutlet UITabBarController *tabBarController; 
```

**在 AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    [self makeTabBar];

    [self addInitialVIew];

    [self.window makeKeyAndVisible];

    return YES;
}  

-(void)makeTabBar
{    
    tabBarController = [[UITabBarController alloc] init];
    tabBarController.delegate=self;
    FirstViewController *firstVC =[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];    

    UINavigationController *firstNC = [[UINavigationController alloc] initWithRootViewController:firstVC];
    firstNC.tabBarItem.title=@"Profile";
    firstVC.tabBarController.tabBar.tag = 0;

    SecondViewController *secondVC = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    UINavigationController *SecondNavController = [[UINavigationController alloc] initWithRootViewController:secondVC];    
    SecondNavController.tabBarItem.title = @"Search";
    secondVC.tabBarController.tabBar.tag = 1;

    NSArray *viewControllers =[[NSArray alloc]initWithObjects:firstNC,SecondNavController, nil];
    [tabBarController setViewControllers:viewControllers animated:NO];   
}

-(void) addInitialVIew
{    
    InitialViewController *initialViewController = [[InitialViewController alloc]initWithNibName:@"InitialViewController" bundle:nil];
    navigationController = [[UINavigationController alloc]initWithRootViewController:ViewController];
    [self.window addSubview:navigationController.view];
} 
```

现在`InitialViewController`您可以添加 yourTabBar 并删除`InitialViewController`

```
- (IBAction)switchToTabBarBtnPress:(id)sender
{
    AppDelegate *appdelegte =(AppDelegate*)[[UIApplication sharedApplication]delegate];

    [[[appdelegte navigationController] view]removeFromSuperview];

    [[appdelegte window]addSubview:[[appdelegte tabBarController]view]];

    [[appdelegte tabBarController]setSelectedIndex:0];
} 
```

并按照我的回答

[回答](https://stackoverflow.com/questions/12460013/remove-uitabbar-controller/12460244#12460244)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:47:22.417

您是否意识到您的本地变量`tabBarController`并不相同，而是隐藏了属性`self.tabBarController`？您创建一个新`UITabBarCotnroller`变量并将其分配给您的局部变量`tabBarController`，该变量只能通过此方法访问。然后你操作（添加新创建的视图控制器）等到`self.tabBarController`. `Self.tabBarController`在这里很容易为零或其他任何东西。但它不是`UITabBarController`你刚刚创建的那个。

它是`self.tabBarController`（很可能为零）您分配给窗口的`rootViewController`.

您确实将`tabBarController's`视图作为子视图添加到 self.view。除此之外，我不知道 self 究竟是什么，我认为手动将 tabBar 的视图添加为子视图真的没有必要。设置根视图控制器（正确）应该足够了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T10:02:06.033

您想创建动态标签栏应用程序来解决您的问题。因此，您只需创建基于视图的应用程序。在视图控制器 viewdidload 方法中放置这些代码

```
tabbar1 = [[UITabBarController alloc] init];

    artist_tab_obj = [[artist_tab alloc] initWithNibName:@"artist_tab" bundle:nil];

    UINavigationController *tabItem1 = [[[UINavigationController alloc] initWithRootViewController: artist_tab_obj] autorelease];
    tabItem1.title=@"Artist";
    tabItem1.tabBarItem.image=[UIImage imageNamed:@"Icon1.png"];
    music_tab_obj = [[music_tab alloc] initWithNibName:@"music_tab" bundle:nil];

    UINavigationController *tabItem2 = [[[UINavigationController alloc] initWithRootViewController: music_tab_obj] autorelease];

    tabItem2.title=@"Music";
    tabItem2.tabBarItem.image=[UIImage imageNamed:@"Icon2.png"];

    shout_tab_obj = [[shout_tab alloc] initWithNibName:@"shout_tab" bundle:nil];

    UINavigationController *tabItem3 = [[[UINavigationController alloc] initWithRootViewController: shout_tab_obj] autorelease];

    tabItem3.title=@"Shout";
    tabItem3.tabBarItem.image=[UIImage imageNamed:@"Icon3.png"];
    schedule_tab_obj = [[schedule_tab alloc] initWithNibName:@"schedule_tab" bundle:nil];

    UINavigationController *tabItem4 = [[[UINavigationController alloc] initWithRootViewController: schedule_tab_obj] autorelease];

    tabItem4.title=@"Schedule";
    tabItem4.tabBarItem.image=[UIImage imageNamed:@"Icon4.png"];
    follow_tab_obj = [[follow_tab alloc] initWithNibName:@"follow_tab" bundle:nil];

    UINavigationController *tabItem5 = [[[UINavigationController alloc] initWithRootViewController: follow_tab_obj] autorelease];
    tabItem5.title=@"Follower";
    tabItem5.tabBarItem.image=[UIImage imageNamed:@"Icon5.png"];

    tabbar1.viewControllers = [NSArray arrayWithObjects:tabItem1, tabItem2,tabItem3,tabItem4,tabItem5,nil]; 
```

在用户接受是是按钮操作时调用此代码。

```
[self.view insertSubview:tabbar1.view belowSubview: artist_tab_obj.view];
tabbar1.selectedIndex=1;
[self presentModalViewController:tabbar1 animated:YES]; 
```

# android - jquery mobile中对话框侧面的后退按钮

> ID：13856941
> 
> 赞同：1
> 
> 时间：2012-12-13T09:37:40.707
> 
> 标签：android, cordova, jquery-mobile, dialog

我有一个 android 应用程序，其中有一个 jquery dailog 框，它显示了一些文件夹列表，当单击文件夹时，我将获得文件夹内的文件列表。

> 问题是在这里我需要一个后退按钮，以便在选择文件后我可以返回到文件夹列表。我想要对话框内的后退按钮在文件和文件夹之间导航。谁能帮我我怎么能得到这个？

# javascript - jQuery AJAX - 检查是否登录而不显示对话框

> ID：13856942
> 
> 赞同：0
> 
> 时间：2012-12-13T09:37:56.620
> 
> 标签：javascript, jquery, html, passwords

我有一个在 WinCE 上运行的受密码保护的网站，在尝试访问安全页面时，将使用`WWW-Authenticate`.

我希望能够通过访问该页面来测试用户是否已登录。问题是，当我使用 jQuery ajax 请求尝试此操作时，浏览器会弹出登录框，就像用户导航到那里一样！如何防止登录框打开，而是让 jQuery 抛出错误

运行以下代码：

```
$.ajax({
url: '/web/secure/securepage.html',
success: function(data){ console.log(data) },
error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
      }
}); 
```

使此框出现，而不是仅仅失败并显示错误消息

![在此处输入图像描述](../Images/6e2a4198d8ed25b6daf481cd91cb500a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:18:49.607

您正在使用 HTTP 身份验证。如果客户端未登录，您*将*获得登录框（AJAX 或其他）。

如果您可以在路径中保留一个不安全的页面，`/web/secure/`那么您可以尝试创建一个 ASP“登录测试”页面，如下所示：

1.  在文件夹中创建一个不安全的 ASP 页面（没有 HTTP 身份验证）`/web/secure/`。您可以将其命名为`/web/secure/logintest.asp`.
2.  将 AJAX 请求发送到`/web/secure/logintest.asp`（它是您在上面创建的页面。由于它不安全，您将不会获得登录弹出窗口）。
3.  在 ASP 页面上检查请求标头是否包含`Authorization`使用. 如果标头值*存在*，则表示用户已获得授权并发送成功状态代码（200），否则发送客户端失败代码（4xx）。`Authorization: Basic amltbXk6cGFnZQ==``Request.ServerVariables("Authorization")`
**   在客户端检查您的 AJAX 请求的响应并执行您的操作。*

 *[尝试在此处](http://msdn.microsoft.com/en-us/library/ms834461.aspx#webserver30_asp)阅读 ASP for Win CE 。

我在这里指望的是，一旦 HTTP 授权成功，浏览器总是会`Authorization`在同一服务器路径下发送连续请求的标头（因此需要在其中创建不安全的页面`/web/secure/`）。如果用户已登录，您将能够通过检索 ASP 页面上的标题来判断它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:47:53.180

克里斯，您实际上可以在您的登录页面中添加一个条件，如果 url 由用户名和传递值组成，那么您可以将这些值应用于您的登录字段并使用 javascript 或 jQuery 启动按钮单击。

有可能有人可以在 url 上捕获这个值，但由于提交发生在几毫秒内，我想这无关紧要。*

# mysql - 在 MySql 中删除未命名的外键

> ID：13856946
> 
> 赞同：18
> 
> 时间：2012-12-13T09:38:09.253
> 
> 标签：mysql, foreign-keys

如果创建的外键没有名字，MySql 会给它一个默认值。例如，对于表“Test”，外键将命名为“test_ibfk_1”。当我使用此名称在本地删除外键时，它就像一个魅力，但在开发服务器上它失败并显示 errno: 152。

我知道这个名称区分大小写，但无论是小写还是大写，结果都是一样的。

我的问题：依靠默认名称来操纵约束是否安全（至少在 MySql 中）？

提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-13T10:03:10.180

您需要知道外键的名称。如果创建时没有名称，则会自动生成名称。您应该获得有关外键的信息。

使用这些查询之一来获取外键名称 -

```
SELECT
  constraint_name
FROM
  information_schema.REFERENTIAL_CONSTRAINTS
WHERE
  constraint_schema = <'db_name'> AND table_name = <'table_name'>;

SELECT *
FROM
  information_schema.KEY_COLUMN_USAGE
WHERE
  constraint_schema = <'db_name'> AND table_name = <'table_name'> AND   
  referenced_table_name IS NOT NULL; 
```

...并用于`ALTER TABLE <table_name> DROP INDEX <fk_name>;`删除外键。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-10-03T09:49:13.607

匆忙的读者，**不要离开这个答案，只是因为它很长。你不会找到另一个解决方案**，我保证:)

接受的答案不会删除密钥，它只会找到它的名称。要真正删除名称未知的密钥，您需要使用准备好的语句。最通用的解决方案是这个脚本，您可以使用五个变量进行自定义：

```
-- YOU MUST SPECIFY THESE VARIABLES TO FULLY IDENTIFY A CONSTRAINT
SET @table_name = '...';
SET @column_name = '...';
SET @referenced_table_name = '...';
SET @referenced_column_name = '...';
-- make sure to limit queries to a single db schema
SET @db_name = '...'; 

-- find the name of the foreign key and store it in a var
SET @constraint_name = (
    SELECT constraint_name
    FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE
    WHERE TABLE_NAME = @table_name
        AND COLUMN_NAME = @column_name
        AND CONSTRAINT_SCHEMA = @db_name
        AND referenced_table_name = @referenced_table_name
        AND referenced_column_name = @referenced_column_name);

-- prepare the drop statement in a string and run it
SET @s = concat('alter table ', @table_name, ' drop foreign key ', @constraint_name);

PREPARE stmt FROM @s;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-30T15:15:37.547

您可以在不知道名称的情况下删除，创建连接查询并自动执行：

```
set @s:='';
select @s:=concat(@s, 'alter table ', 'your_table', ' drop foreign key ',CONSTRAINT_NAME, ';')
from information_schema.key_column_usage
where CONSTRAINT_SCHEMA = 'your_database'
  and TABLE_NAME ='your_table'
  and REFERENCED_TABLE_NAME = 'the_foreign_reference_table';
prepare stmt from @s;
execute stmt;

deallocate prepare stmt; 
```

我这样你不需要知道外键的名称，只需要你要删除外键的table_name，数据库名称和引用表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-20T10:32:44.980

如果有人对如何从表中**删除所有外键**感兴趣，我们在更新存储过程中使用此代码（该示例应用于我们内部数据库中的表 db_Order）：

```
DECLARE counter INT DEFAULT 1;
DECLARE foreignKeyDeleteStatement VARCHAR(200) DEFAULT '';

...

SET counter = (SELECT COUNT(1) FROM information_schema.TABLE_CONSTRAINTS
    WHERE CONSTRAINT_TYPE = 'FOREIGN KEY' AND table_schema=DATABASE() AND table_name='db_Order');
    SELECT 'Number of foreignKeys on table db_Order = ' + counter;

WHILE counter > 0 DO
                SELECT concat('ALTER TABLE ', TABLE_NAME, ' DROP FOREIGN KEY ', CONSTRAINT_NAME, ';') 
                FROM information_schema.key_column_usage 
                WHERE CONSTRAINT_SCHEMA = DATABASE()
                AND TABLE_NAME='db_order' 
                AND REFERENCED_TABLE_NAME IS NOT NULL
                LIMIT 1
                INTO foreignKeyDeleteStatement;

                SELECT foreignKeyDeleteStatement;

                SET @s = foreignKeyDeleteStatement;

                PREPARE stmt1 FROM @s;
                EXECUTE stmt1;
                DEALLOCATE PREPARE stmt1;

                SET counter = counter - 1;
END WHILE; 
```

我希望这对某人有用。

# css - 我需要使输入元素调整为表格单元格宽度

> ID：13856955
> 
> 赞同：7
> 
> 时间：2012-12-13T09:38:46.853
> 
> 标签：css, firefox, input, width, css-tables

我正在开发一个界面，这件事困扰着我。

请参阅：http: [//jsfiddle.net/NUKxX/](http://jsfiddle.net/NUKxX/)

它适用于 Chrome，但不适用于 Firefox。Chrome 的基本思想是每列中最长的单词将 td 或 th 拉伸到适当的长度以节省空间。但在 Firefox 中，输入元素似乎完全忽略了最大宽度和最小宽度。

`position:absolute`我尝试在输入和th 上摆弄，`position:relative`但 Firefox 也忽略了后者。

我如何使它工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T09:43:11.023

```
th input {
    min-width: 10px;
    max-width: 100%;
    width: 100%;
} 
```

在此处更正问题 (FF 17.0.1)。

小提琴：http: [//jsfiddle.net/Regisc/PcKMJ/](http://jsfiddle.net/Regisc/PcKMJ/)

# android - 保存图像时如何自动指定文件名

> ID：13856958
> 
> 赞同：2
> 
> 时间：2012-12-13T09:38:50.957
> 
> 标签：android

当我将图像保存到 sdcard 时，它会自动使用给定的文件名保存它。如果已存在同名文件，则将其替换。

我想按顺序存储带有文件名的图像，如果文件`Image`存在，它将与`image1`下一个一起保存`image2`，依此类推。

请告知如何做到这一点，因为我是编程新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:59:30.593

```
File fileDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);
File[] images = fileDir.listFiles(new FilenameFilter(){
    public boolean accept(File file, String name){
        if(name,toLowerCase().startsWith("image"));
        return true;
        else return false;
    }});

File fileToSave;

if(images.length > 0)
fileToSave = new File(fileDir.getAbsolutePath(), "image" + images.length);
else
fileToSave = new File(fileDir.getAbsolutePath(), "image"); 
```

类似的事情会做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T09:51:14.853

您必须做两件事 1\. 检查是否存在同名文件 2\. 更改要保存的文件的名称

1.  我觉得很简单，你也可以尝试打开这个名为“name”的文件，如果打开了，把“name”改成“name1”再试一次。

2.  你必须保持变量名为`string`eg `String newName`, than `String newName = "name" + 1`, 像这样

问候海克·纳哈佩蒂安

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-12T07:28:17.283

将要命名的图像从 SD 卡剪切并粘贴到内部存储中。重命名后，将图像复制到 SD 卡或用作备份。

# ruby - 在 ruby 中读取几个 URI

> ID：13856963
> 
> 赞同：0
> 
> 时间：2012-12-13T09:39:11.177
> 
> 标签：ruby, file-io

我需要多次阅读网页的内容并从中提取一些我使用正则表达式的信息。我`open-uri`用来读取页面的内容，我写的示例代码如下：

```
require 'open-uri'

def getResults(words)
    results = []
    words.each do |word|
        results.push getAResult(word)
    end
    results
end

def getAResult(word)
    file = open("http://www.somapage.com?option=#{word}")
    contents = file.read
    file.close
    contents.match /some-regex-here/
    $1.empty? ? -1 : $1.to_f
end 
```

问题是除非我总是注释掉`file.close`换行符。当我在控制台上尝试此代码时，立即返回，但 ruby​​ 进程再运行两到三秒左右。`getAResult``-1``getAResult``-1`

如果我删除`file.close`行`getAResult`返回正确的结果，但现在`getResults`是一堆`-1`s 除了第一个。我尝试使用`curb`gem 来阅读页面，但出现了类似的问题。

这似乎是与线程相关的问题。但是，我无法提出合理的搜索并找到相应的解决方案。你认为问题会是什么？

注意：我尝试阅读的这个网页不会很快返回结果。这需要一些时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:26:03.227

您应该获取匹配结果，如下所示：

```
1.9.3-327 (main):0 > contents.match /div/
=> #<MatchData "div">
1.9.3-327 (main):0 > $1
=> nil

1.9.3-327 (main):0 > contents.match /(div)/
=> #<MatchData "div" 1:"div">
1.9.3-327 (main):0 > $1
=> "div" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:24:32.560

如果您担心线程安全，则不应使用 $n 正则表达式变量。直接捕获结果，如下所示：

```
value = contents[/regexp/] 
```

具体来说，这是该方法的更类似于 ruby​​ 的格式：

```
def getAResult(word)
  contents = open("http://www.somapage.com?option=#{word}"){|f| f.read }
  value = contents[/some-regex-here/]
  value.empty? ? -1 : value.to_f
end 
```

#open 的块形式（如上）在您完成文件后会自动关闭文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T10:11:29.960

试试[hpricot](https://github.com/ecarnevale/hpricot)或[nokogiri](https://github.com/sparklemotion/nokogiri)

它可以通过 XPath 在您的 html 文件中搜索文档

# iphone - 在 UITableViewCell 中添加的视图在滚动后被清除

> ID：13856964
> 
> 赞同：0
> 
> 时间：2012-12-13T09:39:10.733
> 
> 标签：iphone, objective-c, ios

我在选择时在 UITableView 单元格中添加带有图像的水平滚动视图。在选择单元格展开以显示滚动视图时。当我向上或向下滚动时，添加的滚动视图被清除。如何在滚动时保留表格视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:46:36.003

问题可能是您通过**dequeueReusableCellWithIdentifier**重用单元格，如果是这种情况，请确保每次将单元格加载到内存时都不要添加滚动视图。此外，如果您添加一些最简洁的代码，这将有助于理解实际问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:51:24.883

设置`dequeueReusableCellWithIdentifier`为`nil`喜欢下面

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil]; 
```

# javascript - 移动：如何检测用户是否仍在滚动？

> ID：13856967
> 
> 赞同：2
> 
> 时间：2012-12-13T09:39:29.883
> 
> 标签：javascript, html, webkit, touch, dom-events

当用户停止滚动时，我想做一个动作。问题是`onscroll`只有在用户不断移动手指时才会触发事件。如果他保持手指不动，则不会触发任何事件。所以超时是行不通的。

我尝试挂钩触摸事件，但是一旦浏览器意识到用户想要滚动，它就会触发`touchcancel`并且不再触发触摸事件。

有没有办法检测用户何时从滚动中抬起手指？

# regex - Nginx 重写，当 url 以多个斜杠结尾时

> ID：13856969
> 
> 赞同：0
> 
> 时间：2012-12-13T09:39:33.727
> 
> 标签：regex, web, url-rewriting, nginx, rewrite

我有一些 404 页面（example.com/404.html）

我想转发所有以多于一个斜杠结尾的请求

例如

*   example.com- 有效
*   example.com/- 有效
*   example.com//- 无效，404
*   example.com///- 无效，404

等等。

我`m not exeprienced in nginx configuration, so i`非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:51:41.440

您只想将此行为用于 URL 中任何位置的尾部斜杠或双/三/等斜杠吗？

如果您需要执行后者 - 请参阅[merge_slashes](http://nginx.org/en/docs/http/ngx_http_core_module.html#merge_slashes)。它可以禁用整个 URL 的斜杠合并。

# spring-security - CAS 和 Spring-Security：定期检查票证是否已过期

> ID：13856972
> 
> 赞同：0
> 
> 时间：2012-12-13T09:39:48.580
> 
> 标签：spring-security, single-sign-on, cas

我有一个 CAS-Server 和一个通过 Spring-Security 配置的客户端。到目前为止，单点登录和单点注销工作正常。

我仍然面临会话超时问题。据我了解，票证到期政策不受安全 CAS 客户端会话空闲的影响。因此，客户端必须主动重新验证票证以查看票证是否已过期并且没有被 CAS 服务器发布过期事件，就像执行单次注销时的情况一样。

为了强制我的 Spring 安全客户端定期检查票证的到期情况，我可能会将会话超时设置为较低的值，例如一分钟左右。但这有一个缺点，就是我的所有会话数据都被删除了。不是很用户友好。

有没有办法告诉 spring-security 定期检查票证是否仍然有效而不首先破坏用户会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:19:43.993

我认为没有这样的方法。Spring Security 和 Spring Security Cas 被实现为一组 Servlet API 过滤器/监听器。所以 Spring Security Cas 只在一些 Http 请求/Session 事件处理期间起作用。我不认为 spring-security-cas.jar 对某些调度库有任何依赖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:01:08.880

我对 Javascript 解决方案非常有信心，因为它只是强制本地注销的简单检查。但是，它需要自定义您的 CAS 服务器，而您无法做到。

您可以在应用程序端使用较短的会话来强制进行定期重新身份验证的解决方案，但这意味着您将经常使应用程序会话无效并重新创建它。

更好的解决方案可以基于`gateway`CAS 协议的参数：如果您未通过 SSO 身份验证，使用此参数将不会产生服务票证。所以你可以有：

1.  一个应用程序过滤器，每 5 分钟保存一次当前 url，触发一个 CAS 往返， gateway=true 和一个特定的服务：`http://myserver/myapp/checkCasSession`
2.  一个特定的 url ： /checkCasSession ：如果它收到一个服务票，一切正常，CAS 会话仍然有效，它只是恢复原始 url。如果没有服务票证，本地会话必须结束并触发本地注销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T17:12:45.620

您可以使用 Spring Security 开箱即用地解决这不是一个简单的问题。您需要在双方工作：客户端和服务器。我会 ：

1.  在 CAS 服务器端创建一个控制器，该控制器返回一个 JSON，指示 CASTGC 是否已过期
2.  每 5 分钟（例如）和每次显示应用程序页面时，添加一些 javascript 来调用这个特定的 CAS 控制器，如果 CAS 会话已经结束，则也结束应用程序会话。

您需要从前端通道调用 CAS 服务器，因为 CAS 会话由 CASTGC cookie 持有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T08:42:26.717

您有两个会话：一个具有空闲超时的应用程序和一个具有空闲/硬超时的 CAS。通过 CAS 登录访问应用程序后，应用程序会话独立存在，并且可以比 CAS 会话持续时间更长。这通常不是问题。您要处理什么用例？

# c++ - 如何在C中按顺序对带有数字和字母的文件名进行排序？

> ID：13856975
> 
> 赞同：13
> 
> 时间：2012-12-13T09:39:57.607
> 
> 标签：c++, c, sorting

我使用以下代码按字母顺序对文件进行排序，它对文件进行排序，如图所示：

```
for(int i = 0;i < maxcnt;i++) 
{
    for(int j = i+1;j < maxcnt;j++)
    {           
        if(strcmp(Array[i],Array[j]) > 0)
        {            
            strcpy(temp,Array[i]);      
            strcpy(Array[i],Array[j]);      
            strcpy(Array[j],temp);    
        }    
    } 
} 
```

![在此处输入图像描述](../Images/4f2230e62b34f8b7073fa17cf9f34256.png)

但我需要按照 Windows 资源管理器中看到的顺序对其进行排序

![在此处输入图像描述](../Images/76a9cb674c1c79d35d23a67379c954e2.png)

这种方式如何排序？请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T11:54:34.450

对于`C`答案，以下是`strcasecmp()`. 此函数递归处理包含交替数字和非数字子字符串的字符串。您可以将其用于`qsort()`：

```
int strcasecmp_withNumbers(const void *void_a, const void *void_b) {
   const char *a = void_a;
   const char *b = void_b;

   if (!a || !b) { // if one doesn't exist, other wins by default
      return a ? 1 : b ? -1 : 0;
   }
   if (isdigit(*a) && isdigit(*b)) { // if both start with numbers
      char *remainderA;
      char *remainderB;
      long valA = strtol(a, &remainderA, 10);
      long valB = strtol(b, &remainderB, 10);
      if (valA != valB)
         return valA - valB;
      // if you wish 7 == 007, comment out the next two lines
      else if (remainderB - b != remainderA - a) // equal with diff lengths
         return (remainderB - b) - (remainderA - a); // set 007 before 7
      else // if numerical parts equal, recurse
         return strcasecmp_withNumbers(remainderA, remainderB);
   }
   if (isdigit(*a) || isdigit(*b)) { // if just one is a number
      return isdigit(*a) ? -1 : 1; // numbers always come first
   }
   while (*a && *b) { // non-numeric characters
      if (isdigit(*a) || isdigit(*b))
         return strcasecmp_withNumbers(a, b); // recurse
      if (tolower(*a) != tolower(*b))
         return tolower(*a) - tolower(*b);
      a++;
      b++;
   }
   return *a ? 1 : *b ? -1 : 0;
} 
```

笔记：

*   Windows 需要`stricmp()`而不是 Unix 等价物`strcasecmp()`。
*   如果数字*真的*很大，上面的代码（显然）会给出不正确的结果。
*   此处忽略前导零。在我的领域，这是一个特性，而不是错误：我们通常希望 UAL0123 与 UAL123 匹配。但这可能是也可能不是您需要的。
*   另请参阅[对可能包含数字的字符串进行排序](https://stackoverflow.com/q/104599/318716)以及[如何在 C++ 中实现自然排序算法？](https://stackoverflow.com/q/642213/318716)，虽然那里的答案，或者在他们的链接中，与上面的代码相比，肯定是冗长而杂乱无章的，大约至少是四倍。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T09:55:04.440

自然排序是您必须采取的方式。我有一个适用于我的场景的工作代码。您可能可以通过根据需要更改它来使用它：

```
 #ifndef JSW_NATURAL_COMPARE
    #define JSW_NATURAL_COMPARE
    #include <string>
    int natural_compare(const char *a, const char *b);
    int natural_compare(const std::string& a, const std::string& b);
    #endif
    #include <cctype>
    namespace {
      // Note: This is a convenience for the natural_compare 
      // function, it is *not* designed for general use
      class int_span {
        int _ws;
        int _zeros;
        const char *_value;
        const char *_end;
      public:
        int_span(const char *src)
        {
          const char *start = src;
          // Save and skip leading whitespace
          while (std::isspace(*(unsigned char*)src)) ++src;
          _ws = src - start;
          // Save and skip leading zeros
          start = src;
          while (*src == '0') ++src;
          _zeros = src - start;
          // Save the edges of the value
          _value = src;
          while (std::isdigit(*(unsigned char*)src)) ++src;
          _end = src;
        }
        bool is_int() const { return _value != _end; }
        const char *value() const { return _value; }
        int whitespace() const { return _ws; }
        int zeros() const { return _zeros; }
        int digits() const { return _end - _value; }
        int non_value() const { return whitespace() + zeros(); }
      };
      inline int safe_compare(int a, int b)
      {
        return a < b ? -1 : a > b;
      }
    }
    int natural_compare(const char *a, const char *b)
    {
      int cmp = 0;
      while (cmp == 0 && *a != '\0' && *b != '\0') {
        int_span lhs(a), rhs(b);
        if (lhs.is_int() && rhs.is_int()) {
          if (lhs.digits() != rhs.digits()) {
            // For differing widths (excluding leading characters),
            // the value with fewer digits takes priority
            cmp = safe_compare(lhs.digits(), rhs.digits());
          }
          else {
            int digits = lhs.digits();
            a = lhs.value();
            b = rhs.value();
            // For matching widths (excluding leading characters),
            // search from MSD to LSD for the larger value
            while (--digits >= 0 && cmp == 0)
              cmp = safe_compare(*a++, *b++);
          }
          if (cmp == 0) {
            // If the values are equal, we need a tie   
            // breaker using leading whitespace and zeros
            if (lhs.non_value() != rhs.non_value()) {
              // For differing widths of combined whitespace and 
              // leading zeros, the smaller width takes priority
              cmp = safe_compare(lhs.non_value(), rhs.non_value());
            }
            else {
              // For matching widths of combined whitespace 
              // and leading zeros, more whitespace takes priority
              cmp = safe_compare(rhs.whitespace(), lhs.whitespace());
            }
          }
        }
        else {
          // No special logic unless both spans are integers
          cmp = safe_compare(*a++, *b++);
        }
      }
      // All else being equal so far, the shorter string takes priority
      return cmp == 0 ? safe_compare(*a, *b) : cmp;
    }
    #include <string>
    int natural_compare(const std::string& a, const std::string& b)
    {
      return natural_compare(a.c_str(), b.c_str());
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-13T09:46:49.487

您要做的是执行“自然排序”。[这是一篇](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)关于它的博客文章，解释了我相信在 python 中的实现。[这](http://search.cpan.org/~bingos/Sort-Naturally-1.03/lib/Sort/Naturally.pm)是一个完成它的 perl 模块。[How to implement a natural sort algorithm in c++?](https://stackoverflow.com/questions/642213/how-to-implement-a-natural-sort-algorithm-in-c)似乎也有类似的问题？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-15T21:24:13.270

考虑到这有一个`c++`标签，您可以详细说明@Joseph Quinsey 的答案并创建一个`natural_less`要传递给标准库的函数。

```
using namespace std;

bool natural_less(const string& lhs, const string& rhs)
{
    return strcasecmp_withNumbers(lhs.c_str(), rhs.c_str()) < 0;
}

void example(vector<string>& data)
{
    std::sort(data.begin(), data.end(), natural_less);
} 
```

我花时间写了一些工作代码作为练习 [https://github.com/kennethlaskoski/natural_less](https://github.com/kennethlaskoski/natural_less)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-03T09:42:29.263

修改[这个](https://stackoverflow.com/a/9745132/3744681)答案：

```
bool compareNat(const std::string& a, const std::string& b){
    if (a.empty())
        return true;
    if (b.empty())
        return false;
    if (std::isdigit(a[0]) && !std::isdigit(b[0]))
        return true;
    if (!std::isdigit(a[0]) && std::isdigit(b[0]))
        return false;
    if (!std::isdigit(a[0]) && !std::isdigit(b[0]))
    {
        if (a[0] == b[0])
            return compareNat(a.substr(1), b.substr(1));
        return (toUpper(a) < toUpper(b));
        //toUpper() is a function to convert a std::string to uppercase.
    }

    // Both strings begin with digit --> parse both numbers
    std::istringstream issa(a);
    std::istringstream issb(b);
    int ia, ib;
    issa >> ia;
    issb >> ib;
    if (ia != ib)
        return ia < ib;

    // Numbers are the same --> remove numbers and recurse
    std::string anew, bnew;
    std::getline(issa, anew);
    std::getline(issb, bnew);
    return (compareNat(anew, bnew));
} 
```

`toUpper()`功能：

```
std::string toUpper(std::string s){
    for(int i=0;i<(int)s.length();i++){s[i]=toupper(s[i]);}
    return s;
    } 
```

用法：

```
#include <iostream> // std::cout
#include <string>
#include <algorithm> // std::sort, std::copy
#include <iterator> // std::ostream_iterator
#include <sstream> // std::istringstream
#include <vector>
#include <cctype> // std::isdigit

int main()
{
    std::vector<std::string> str;
    str.push_back("20.txt");
    str.push_back("10.txt");
    str.push_back("1.txt");
    str.push_back("z2.txt");
    str.push_back("z10.txt");
    str.push_back("z100.txt");
    str.push_back("1_t.txt");
    str.push_back("abc.txt");
    str.push_back("Abc.txt");
    str.push_back("bcd.txt");

    std::sort(str.begin(), str.end(), compareNat);
    std::copy(str.begin(), str.end(),
              std::ostream_iterator<std::string>(std::cout, "\n"));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T10:07:56.850

Your problem is that you have an interpretation behind parts of the file name.

In lexicographical order, `Slide1` is before `Slide10` which is before `Slide5`.

You expect `Slide5` before `Slide10` as you have an interpretation of the substrings `5` and `10` (as integers).

You will run into more problems, if you had the name of the month in the filename, and would expect them to be ordered by date (i.e. January comes before August). You will need to adjust your sorting to this interpretation (and the "natural" order will depend on your interpretation, there is no generic solution).

Another approach is to format the filenames in a way that your sorting and the lexicographical order agree. In your case, you would use leading zeroes and a fixed length for the number. So `Slide1` becomes `Slide01`, and then you will see that sorting them lexicographically will yield the result you would like to have.

However, often you cannot influence the output of an application, and thus cannot enforce your format directly.

What I do in those cases: write a little script/function that renames the file to a proper format, and then use standard sorting algorithms to sort them. The advantage of this is that you do not need to adapt your sorting, and can use existing software for the sorting. On the downside, there are situations where this is not feasible (as filenames need to be fixed).

# android - 如何解析PendingIntent并获取对应的intent？

> ID：13856977
> 
> 赞同：2
> 
> 时间：2012-12-13T09:40:03.433
> 
> 标签：android

我知道 PendingIntent 项目是由`PendingIntent.getActivity(context, ... , intent, ...) function`.

在我使用通知之后，需要跳过存储到意图的信息。然后将意图封装到`PendingIntent`. 现在我想通过`pendingIntent`. 或者我想如何通过`pendingIntent`. 我怎么能得到意图？

发件人：

```
Intent openintent = new Intent(this, ZXReaderAbout.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, openintent, 0);//send openintent  intent to system when click information
notification.setLatestEventInfo(this, "11", "22", contentIntent); 
```

接收部分：

```
PendingIntent pIntent = notification.contentIntent; 
```

也就是说它可以从`pIntent`.

任何建议都非常感谢。

# java - 我的java中的json lib错误

> ID：13856978
> 
> 赞同：0
> 
> 时间：2012-12-13T09:40:09.483
> 
> 标签：java, json, url

我使用 Eclipse。我正在读取一个 url 并检索一个 json 字符串：

```
String message = "http://XXXXXXXXX";

try {
            website = new URL(message);
            URLConnection connection = website.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));

            String inputLine;
            while ((inputLine = in.readLine()) != null) 
                str1 += inputLine;

        } catch (MalformedURLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (Exception e) {

            e.printStackTrace();
        }

try {
                JSONObject jsono = new JSONObject(str1);
                JSONObject results =jsono.getJSONObject("results");
                JSONArray result =results.getJSONArray("result");

            } catch(JSONException ex) {
                System.out.println("Exception thrown: " + ex.getMessage());
            } 
```

我可以得到它，我可以打印出来。然后我想用 JSONArray 和 JSONObject 解析 json 字符串，但是这三行有错误：

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject; 
```

错误是：`import org.json`无法解决。

我被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:46:41.790

您需要针对[适当的 jar 文件](http://www.docjar.com/jar_detail/json-org.jar.html)进行编译和运行。

上面的导入仅仅声明了这些类的使用。您需要在编译期间提供它们，然后在程序运行期间提供它们，例如

```
javac -cp json.jar MyTest.java 
```

然后

```
java -cp json.jar;. MyTest 
```

（例如 - 您的编译和/或包装可能不同）

这个[SO question](https://stackoverflow.com/questions/460364/how-to-use-classes-from-jar-files)有更详细的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:47:20.717

您需要在您的库中包含 Json jar。

[从此处](http://www.java2s.com/Code/JarDownload/java/java-json.jar.zip)下载 ZIP 文件 并将其解压缩以获取 Jar。将 Jar 添加到您的构建路径。要检查此 Jar 中可用的类，请使用[此 URL](http://www.java2s.com/Code/Jar/j/Downloadjavajsonjar.htm.)。

将此 Jar 添加到您的构建路径

```
Right click the Project > Build Path > Configure build path> Select Libraries tab > Click Add External Libraries > Select the Jar file Download 
```

我希望这能解决你的问题。

# php - 主题化 Drupal 7 的 Ubercart “/cart” 页面

> ID：13856979
> 
> 赞同：5
> 
> 时间：2012-12-13T09:40:11.387
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-theming

我正在尝试为 Drupal 7 的 Ubercart 3`/cart`页面设置主题，但我很难找到这样做的主题功能。

我相信正确的代码可能位于`template.tpl.php`，但我不确定。

在 Drupal 中，这个页面的主题代码在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:43:12.200

创建一个新的模板文件并命名`page--cart.tpl.php`

有关 Drupal 主题建议的更多信息：http: [//drupal.org/node/1089656](http://drupal.org/node/1089656)

（添加新模板文件后不要忘记清除缓存）

**另一种**将[Devel](http://drupal.org/project/devel)模块与[主题开发者](http://drupal.org/project/devel_themer)模块一起使用以获取所有可用主题建议的方法。

**更新：**

如果您只想设计购物车部分的样式，为什么不使用 CSS。在 Ubercart 中，购物车部分有一个 div id`div#cart-form-pane`

# xpages - 在插件中访问 XPages 数据源

> ID：13856980
> 
> 赞同：0
> 
> 时间：2012-12-13T09:40:14.000
> 
> 标签：xpages

对于插件（如扩展库），我尝试使用给定的“var”名称访问数据源。使用以下代码访问 Datasource 对象非常容易：

m_DataSourceName 包含数据源的名称 (var)。

```
public DataSource getDataSource() {
    if (StringUtil.isNotEmpty(m_DataSourceName)) {

        UIViewRoot vrCurrent = getFacesContext().getViewRoot();
        if (vrCurrent instanceof UIViewRootEx) {
            for (DataSource dsCurrent : ((UIViewRootEx) vrCurrent)
                    .getData()) {
                if (m_DataSourceName.equals(dsCurrent.getVar())) {
                    return dsCurrent;
                }
            }
        }
    }
    System.out.println("Datasource name:" + m_DataSourceName);
    return null;
} 
```

我正在取回数据源，并且可以转换此数据源：

```
private TabularDataModel getTDM(DataSource dsCurrent, FacesContext context) {
        try {
            if (dsCurrent instanceof ModelDataSource) {
                ModelDataSource mds = (ModelDataSource) dsCurrent;
                AbstractDataSource ads = (AbstractDataSource) mds;
                ads.load(context);
                System.out.println(ads.getBeanId());
                if (ads.getBeanId() == null) {

                }
                DataModel tdm = mds.getDataModel();
                if (tdm instanceof TabularDataModel) {
                    TabularDataModel tds = (TabularDataModel) tdm;
                    return tds;
                }
            }
            return null;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    } 
```

现在我想访问 TDM.getRowCount() ，此时我得到了一个空指针异常。数据源包含一个注释视图。我错过了初始化数据源的任何内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:47:17.597

这是您的问题的解决方案：

这将为您提供视图的所有**行，****而不是条目计数***。Fe 如果您有一个包含 5 个类别和每个类别 1 个条目的分类视图，这将导致 10 行。条目数为 5。

首先，创建一个实现*FacesDataIterator的虚拟类*

```
public class DummyDataIterator implements com.ibm.xsp.component.FacesDataIterator{

    public DataModel getDataModel() {
        return null;
    }

    public int getFirst() {
        return 0;
    }

    public int getRowIndex() {
        return 0;
    }

    public int getRows() {
        return 0;
    }

    public void setFirst(int paramInt) {}

    public void setRows(int paramInt) {}
} 
```

然后您必须执行以下操作：

1.  设置数据迭代器

    ```
    tdm.setDataControl( new DummyDataIterator() ); 
    ```

2.  第一次初始化行计数器

    ```
    tdm.getRowCount(); 
    ```

3.  使用导航器计算准确的行数

    ```
    (( com.ibm.xsp.model.domino.viewnavigator.NOIViewNavigatorEx) tdm.getDominoViewDataContainer().getNavigator()).calculateExactCount(tdm.getView()); 
    ```

现在您的行数已初始化，您可以使用普通的*getRowCount*获得结果：

```
System.out.println("Rows: " +  tdm.getRowCount() ); 
```

希望这可以帮助！

* *:*

```
tdm.getView().getAllEntries().getCount() 
```

# c# - 提高下载速度？

> ID：13856984
> 
> 赞同：-1
> 
> 时间：2012-12-13T09:40:31.630
> 
> 标签：c#

我想使用此代码从相机中下载一系列图像。但是下载速度很慢，如果我在幻灯片中查看它，我可以从图像序列中看到它并不流畅。有什么办法可以提高下载过程的速度？

```
for (int i = 0; i < 100; i++)
{
    string ImagePath = Server.MapPath("\\CCTV_Files\\LogFile\\" + String.Format("{0:yyyyMMdd_hhmmss}", DateTime.Now) + ".jpg");
    string ip = "http://IP.address.com:80/snapshot.cgi";

    string sourceURL = ip;
    WebRequest req = (WebRequest)WebRequest.Create(sourceURL);
    req.Credentials = new NetworkCredential("usr", "pwd");
    WebResponse resp = req.GetResponse();
    Stream stream = resp.GetResponseStream();

    Bitmap bmp = (Bitmap)Bitmap.FromStream(stream);
    bmp.Save(ImagePath);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:51:00.660

> 有什么办法可以提高下载过程的速度？

一方面，您可以`Bitmap`在下载数据时停止加载数据。只需将原始字节从正文保存到磁盘。

请注意，您还应该`using`为您的回复使用声明，以便正确关闭它。

另请注意，如果您使用`WebClient`，那很可能也会使代码更简单 - 只需使用[`WebClient.DownloadFile`](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)并让框架完成工作。

# python - 如何在 Google App Engine 中将文本字符串作为 blob 类型保存到数据存储区？

> ID：13856987
> 
> 赞同：0
> 
> 时间：2012-12-13T09:40:47.320
> 
> 标签：python, google-app-engine, blob, datastore

让我们直接来看片段：

```
class RequestHandler(webapp.RequestHandler):
  def get(self):
    data = self.request.get('test')
    blob = db.Blob(data) # what should I do here?

    """ Save blob into datastore """

    self.response.out.write("Success") 
```

我要做的是将“数据”转换为“blob”类型，然后将其保存到数据存储中。我看到[官方示例](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#Blob)使用了 db.Blob() 但它对我不起作用（发生服务器错误并且没有显示“成功”）。我应该怎么做才能满足我的需求？谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:35:26.867

日志输出“TypeError：Blob() 参数应该是 str 实例，而不是 unicode”。我再次谷歌搜索，发现通常我们应该将 unicode 字符串存储为 db.TextProperty，而不是 db.BlobProperty。所以更正应该是：

```
class RequestHandler(webapp.RequestHandler):
  def get(self):
  text = self.request.get('test')
  """ Don't convert text to blob """
  """ Save text into datastore as db.TextProperty """

  self.response.out.write("Success") 
```

# git - 实施 Git 工作流程

> ID：13856989
> 
> 赞同：2
> 
> 时间：2012-12-13T09:40:53.260
> 
> 标签：git

我们正在考虑将 Git 引入我们的工作流程。目前，我们有一个通用的 PHP 模板，我们为每个新项目复制粘贴。然后，复制的模板将使用特定于项目的模块进行扩展。有时会发生在项目中工作时，我们做了一些对模板有益的调整，然后我们将这些复制粘贴回主模板。

如果我们要引入 Git，我们的主模板将是主存储库。每个新项目都将是模板的克隆（因此模板中的错误修复可以被下拉）。但是，您将如何管理将更改推送回主模板？我们不能推送所有文件，因为那样我们的主模板将充满项目特定的模块。

有没有办法只将特定的提交推送到远程存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:01:55.030

您可以交互[`git rebase`](http://git-scm.com/docs/git-rebase)地将应该应用于模板的更改应用到上游存储库中。为此，这样做的开发人员将从上游的 master 创建一个临时分支，然后将所需的更改重新定位到它，并将该分支推回（如果他具有推送访问权限；否则“拥有”模板存储库的人必须拉从他们那里获得或以其他方式应用更改）。

另请参阅：[关于变基的 Pro Git 章节](http://git-scm.com/book/en/Git-Branching-Rebasing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:11:04.167

我不会从使用主模板的项目中推送更改。相反，我会为主模板创建自己的项目，并且该项目仅用于主模板的错误修复和新功能。只有这个项目可以将更改推送到主模板存储库，其他项目只能拉取。

# android - 如何将 Cookie 存储为持久数据？

> ID：13856991
> 
> 赞同：0
> 
> 时间：2012-12-13T09:41:08.563
> 
> 标签：android, cookies, httpclient

当连接到服务器时，我得到**Cookie**并将它们存储在列表中。

稍后进行连接时，我将这些 cookie 添加到 DefaultHttpClient。

问题是，当应用程序处于**后台**一段时间时，所有**类数据都将丢失，包括 DefaultHttpClient**。

因此我**失去了饼干**。

有没有办法让 DefaultHttpClient 永远活着？

或任何更好的方式来存储和使用 cookie？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:53:04.213

从 cookie 中获取它，然后在应用程序被终止时将其保存在共享首选项中（例如 onStop 方法）。然后在 onCreate() 上重新加载它。与此类似的东西：

```
public class Calc extends Activity {
   public static final String PREFS_NAME = "MyPrefsFile";

   @Override
   protected void onCreate(Bundle state){
      super.onCreate(state);
      . . .

      // Restore preferences
      SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
      String silent = settings.getString("cookie", null);
      if(cookie == null) {
          // first time, get cookie again and save it
      } else {
          // set cookie manually for HTTPClient
      }
   }

   @Override
   protected void onStop(){
      super.onStop();

     // We need an Editor object to make preference changes.
     // All objects are from android.context.Context
     SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
     SharedPreferences.Editor editor = settings.edit();
     editor.putString("cookie", theCookie);

     // Commit the edits!
     editor.commit();
   }
} 
```

（我省略了获取和设置 cookie 的代码，我认为这不是问题）

# html - 当达到有限数量的项目时，有没有办法让 ul li 横向增长

> ID：13856998
> 
> 赞同：0
> 
> 时间：2012-12-13T09:41:26.303
> 
> 标签：html, css

当达到 3 个项目时，是否有横向增长列表。当列表的数量已知时，我知道该怎么做。但是当它在循环中生成时，我们该怎么做呢？

```
Item1    Item4    Item7
Item2    Item5    Item8
Item3    Item6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:27:06.427

```
<style>
ul.list{
padding:0;
margin:0;
width:100px;
}
ul.list li{
display:block;
background-color:#CCC;
padding:5px;
}
</style>

<?php
    for($ctr=1;$ctr<=10;$ctr++){
    $mod = $ctr%3;
    //echo $mod.'<br />';
    echo '<ul class="list">';
        echo '<li>Item '.$ctr.'</li>';
    echo '</ul>';
    if($mod==0){ echo '<br />'; }
   }
?> 
```

只需修改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:58:50.140

如果它是在循环中生成的，请创建一个每次添加项目时递增的计数器。:)

然后在你的循环之后使用它来做你想做的事：

```
if(counter%3==0)
   {
   counter = 0;
   //do cool stuff
   } 
```