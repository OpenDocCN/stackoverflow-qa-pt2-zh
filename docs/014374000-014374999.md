# StackOverflow 问答 14374000-14374999

# node.js - 为什么我应该创建一个 json 来保存来自 Mongoose + MongoDB + Node.JS 的文档？

> ID：14374007
> 
> 赞同：1
> 
> 时间：2013-01-17T07:20:35.310
> 
> 标签：node.js, mongodb, mongoose

考虑一下，Mongoose 模式：

```
var schema_obj = new Schema({
    field1: String,
    field2: String, .........
}); 
```

JSON 文档，例如：

```
var json_obj = {
field1: 'value', 
field2 : 'val2', 
............
}; 
```

为了节省我调用方法，比如

```
var Model_obj = mongoose.model('model_name', schema_object);
var document_obj = new Model_obj(json_obj);
document_obj.save(function(err,data){/*some logic after save*/}); 
```

现在我的问题是：我为什么要创建一个**json_obj**。当我手中已经有一个模式对象时，它已经具有所有字段（field1，field2）。如果我只想为这些字段提供值，为什么要通过再次写入所有字段名称来创建 json？

如果我有*n*个字段，这将成为再次写入所有字段的开销。有什么办法可以避免这种开销？

像我从我定义的猫鼬模式中得到一个空的 JSON 对象，然后只分配值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:36:08.693

您在寻找什么样的 API？您可以在模型实例及其上设置属性`save`。但我不确定我是否明白为什么

```
var thing = new Thing();
thing.name = "The Name";
thing.priceInCents = 1999;
thing.numAvailable = 10;
thing.save(); 
```

比容易

```
var thing = new Thing({name: 'The name', priceInCents: 1999, numAvailable: 10});
thing.save(); 
```

在网络应用程序中，这变成了类似

```
app.post('/things', function(req, res) {
  var thing = new Thing(req.body.thing);
  thing.save(function() { ... });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:09:46.847

## 以下是我迄今为止找到的最佳解决方案

```
var sch_obj = new mongoose.Schema({
 "_id ": String,
 "field1": String,
 "field2": String
}, { collection: 'collection_name'});

var Mod_obj = mongoose.model('collection_name', sch_obj);

var json_obj = new Mod_obj({
"_id ": 'Strin', /*This is the only field which cannot be assigned later*/
}); 

//json_obj._id = 'some value'; /*THIS CANNOT BE DONE*/
json_obj.field1 = 'value1';
json_obj.field2 = 'value2';
json_obj.save(function (err, data) { console.log(data); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-08T09:33:52.333

如果您使用的是 ES6，则扩展运算符可能会派上用场。考虑到您已经定义了猫鼬模型，并且您正在从 req.body 获取字段值。您可以通过简单地像这样编写它来为该模型创建一个新对象：

```
const Thing = mongoose.model('collection_name', sch_obj); 
const json_obj = new Thing({ ...req.body });
json_obj.save()
.then(savedThing => {
    //DO things with your saved object.
})
.catch(error => {
   //Handle error in saving the object
}) 
```

# mysql - MySQL - 复杂的 CASE/WHEN 条件可能吗？

> ID：14374008
> 
> 赞同：0
> 
> 时间：2013-01-17T07:20:41.997
> 
> 标签：mysql, case, conditional-statements, ifnull

这个问题与我之前的帖子有关：[MySQL - 查询中的复杂 SUM](https://stackoverflow.com/questions/14248349/mysql-complicated-sums-inside-query)

该查询运行良好，可以根据需要汇总总数。我注意到它也忽略了任何具有 NULL 值的记录。

当前查询：

```
SELECT c.*,
        SUM(CASE WHEN billtype = 1 THEN total ELSE 0 END) totalpaid ,
        SUM(CASE WHEN billtype = 2 THEN total ELSE 0 END) totalowed ,
        SUM(total) AS totalbalance
FROM 
    tbl_customers c
    LEFT JOIN tbl_customers_bills  b
    ON c.customerid = = b.customerid
     and billtype in (1,2)
GROUP BY 
     c.customerid 
```

它还漂亮地返回了**10条客户记录。**当我检查数据库时，我可以看到**11**`tbl_customers_bills`条客户记录，而第 11 条在表中没有相关记录。

即使`tbl_customers_bills`表中不存在记录，我仍想返回所有 11 个。（但当然是零）

我不知道这种情况会变得多么复杂。这是我尝试过的：（无济于事）

```
SELECT c.*,

     (CASE WHEN (total IS NULL) THEN totalpaid = 0

       ELSE
        SUM(CASE WHEN billtype = 1 THEN total ELSE 0 END) totalpaid ,
        SUM(CASE WHEN billtype = 2 THEN total ELSE 0 END) totalowed ,
        SUM(total) AS totalbalance
      END)

FROM 
    tbl_customers c
    LEFT JOIN tbl_customers_bills  b
    ON c.customerid = = b.customerid
     and billtype in (1,2)
GROUP BY 
     c.customerid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:30:28.437

我很可能完全属于但我相信你只是失踪了`COALESCE`

```
SELECT c.*,
       COALESCE(SUM(CASE WHEN billtype = 1 THEN total ELSE 0 END), 0) totalpaid ,
       COALESCE(SUM(CASE WHEN billtype = 2 THEN total ELSE 0 END), 0 totalowed ,
       COALESCE(SUM(total), 0) AS totalbalance
FROM 
    tbl_customers c
    LEFT JOIN tbl_customers_bills  b
    ON c.customerid = = b.customerid
     and billtype in (1,2)
GROUP BY 
     c.customerid 
```

来自[MySQL 参考](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

> 合并（值，...）
> 
> 返回列表中的第一个非 NULL 值，如果没有非 NULL 值，则返回 NULL。
> 
> mysql> SELECT COALESCE(NULL,1); -> 1
> mysql> 选择 COALESCE(NULL,NULL,NULL); -> 空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:25:56.947

怎么做 ifnull

```
SELECT 
    c.*,
    SUM(CASE WHEN billtype = 1 THEN IFNULL(total,0) ELSE 0 END) totalpaid ,
    SUM(CASE WHEN billtype = 2 THEN IFNULL(total,0) ELSE 0 END) totalowed ,
    SUM(total) AS totalbalance
FROM 
    tbl_customers c
    LEFT JOIN tbl_customers_bills  b
    ON c.customerid = = b.customerid
     and billtype in (1,2)
GROUP BY 
     c.customerid 
```

# java - 错误：java.io.IOException：流已关闭

> ID：14374014
> 
> 赞同：0
> 
> 时间：2013-01-17T07:21:05.890
> 
> 标签：java, exception, stream, serversocket

```
 try{
        URLPath = "xxxxx";
        URL url = new URL(URLPath);
        uc = (HttpURLConnection) url.openConnection();
        uc.setReadTimeout(30000);//timeout set

        uc.connect();// connect

        fos = new FileOutputStream(savePath);
        InputStream in = uc.getInputStream();
        byte[] buffer = new byte[1024];
        int Length = 0;
        long FinishedLenth = 0;

        while((Length = in.read(buffer)) > 0) {
            FinishedLenth = FinishedLenth + Length;
            fos.write(buffer, 0, Length);
        }
        in.close();
        uc.disconnect();

        fos.close();
      } 
```

这是我的下载代码。
我有问题，当我下载像 600mb 这样的小文件时，
没有发生错误。
但是我下载了2G的文件大小，并且发生了错误。

```
java.io.IOException: Stream closed
at java.io.BufferedInputStream.getBufIfOpen(Unknown Source)
at java.io.BufferedInputStream.read(Unknown Source)
at java.io.FilterInputStream.read(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.close(Unknown Source)
at Download_File.downloadFile(Download_File.java:66)
at downloadFileFunctionThread.run(downloadFileFunctionThread.java:116) 
```

这是错误消息，我用谷歌搜索错误消息。
我发现一些解决方案是套接字关闭问题。
但是下载大文件时发生错误。
所以我不知道如何解决这个问题。
谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:22:47.217

可能问题出在

```
uc.setReadTimeout(30000);//timeout set 
```

对于较大的文件，您的连接可能会超时，请给出一个高于下载文件所需的持续时间的值，或者不要指定一个值。

# java - 从大文件中删除 4 字节 UTF 字符

> ID：14374018
> 
> 赞同：0
> 
> 时间：2013-01-17T07:21:09.230
> 
> 标签：java, bash, multibyte

我有一个包含多字节字符的文件。由于文件非常大，我想从这个文件中删除 4 字节的 utf 字符。我需要一个更快的解决方案来做到这一点。我为此任务尝试了以下 Java 代码，但它使 Java 堆空间内存不足异常。所以

```
import java.util.*;
import java.io.*;
public class A{
 public static void main(String args[]) throws Exception{
  BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
  String str=br.readLine();
  char[] c_array;
  String c_string;
  byte[] c_byte_array;
  c_array = str.toCharArray();
  for (char c : c_array){
   c_string = Character.toString(c);
   c_byte_array = c_string.getBytes("UTF-8");
   if (c_byte_array.length <= 3){
    System.out.print(c_string);
   }
  }
 }
} 
```

有什么方法可以改善这一点或其他更快更好的方法。我也试过这个 grep 命令

```
grep -o -P "[\x10000-\x10ffff]" myfile 
```

但它退出并出现错误

```
grep: range out of order in character class 
```

所以我的问题是上面的正则表达式有什么问题。或者换句话说，什么是匹配 4 字节 utf 字符的正则表达式。另一个问题，上述哪种方法去除4字节字符更有效

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T07:43:40.927

UTF-8 4 字节字符是 U+FFFF 之上的 Unicode 字符（参见[http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)），它们在 Java 中由 2 个字符表示。我们可以使用 Character.isSurrogate（参见 API）来检测这些字符。

```
 BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("1.txt"), "UTF-8"));
    for (int c; (c = br.read()) != -1;) {
        if (Character.isSurrogate((char)c)) {
            // skip the second surrogate char
            br.read();
        } else {
            // process char c
        }
    } 
```

或者如果您想过滤字节流，那么我们可以使用另一种解决方案，基于 4 字节字符 UTF-8 序列是

`11110xxx 10xxxxxx 10xxxxxx 10xxxxxx`

所以我们可以将字节流过滤为

```
 BufferedInputStream is = new BufferedInputStream(new FileInputStream("1.txt"));
    for (int b; (b = is.read()) != -1;) {
        if ((b & 0b11111000) == 0b11110000) {
            // skip next 3 bytes
            is.read();
            is.read();
            is.read();
        } else {
            // process byte b
        }
    } 
```

# lambda - 如何在 lambda 演算中使用 β 减少来评估表达式？

> ID：14374021
> 
> 赞同：2
> 
> 时间：2013-01-17T07:21:22.033
> 
> 标签：lambda, programming-languages, lambda-calculus, formal-languages, reduction

我想评估以下表达式：

```
(λx.y)((λz.zz)(λw.w)) 
```

使用**β还原**。

答案是：

```
(λx.y)((λz.zz)(λw.w)) ->
(λx.y)((λw.w)(λw.w)) ->
(λx.y)(λw.w) -> y 
```

但我不明白第二阶段：

从这里：`(λx.y)((λz.zz)(λw.w))`到这里`(λx.y)((λw.w)(λw.w))`

我们在那里做什么？根据我的理解，我需要使用**α-等价**规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:32:52.747

Beta 缩减允许项 (λx.t)s 缩减为 t[x := s]。在您的问题步骤中，x 是 z，t 是 zz，s 是 λw.w。所以这里的 t[x := s] 是 zz[z := λw.w]，也就是 (λw.w)(λw.w)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T20:01:21.483

您建议的减少是按价值减少。

```
 (λx.y) z -> y[x/z] IF z is a value. 
```

您可以使用按名称归约直接归约为 y

```
 (λx.y) z -> y[x/z]. 
```

要回答您的问题：

```
(λx.y)((λz.zz)(λw.w)) -> (λx.y)((λw.w)(λw.w)) 
```

因为

```
 ( (λz.zz)(λw.w) ) is not a value (as (λx.y)z is never a value.) 
```

而且因为

```
 (zz)[z/(λw.w)] i.e.substitute every occurence of z with (λw.w) leads to 

  (λw.w)(λw.w) 
```

# asp.net - 如何在 ASP.NET 中使用 Dwolla？

> ID：14374024
> 
> 赞同：1
> 
> 时间：2013-01-17T07:21:23.187
> 
> 标签：asp.net, e-commerce, payment-gateway, shopping-cart, dwolla

我正在尝试为我已经构建的电子商务网站的客户使用新的 Dwolla 付款方式。

Dwolla 站点不提供将其集成到 ASP.NET 的示例代码或说明。

任何人都可以帮助提供标记和示例代码以最简单的方式将其集成到我的电子商务网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:56:46.490

因为我不做 ASP.NET，所以我不能给你确切的细节，但这里有一些资源：

从 asp.net 发送请求：

[从 asp.net C# 调用外部 json webservice](https://stackoverflow.com/questions/2071097/call-external-json-webservice-from-asp-net-c-sharp)

一个示例 dwolla API 端点：

[https://developers.dwolla.com/dev/docs/transactions/send](https://developers.dwolla.com/dev/docs/transactions/send)

您的发布请求将类似于：

```
POST https://www.dwolla.com/oauth/rest/transactions/send
Content-Type: application/json 

{
    "oauth_token": "",
    "pin": "",
    "destinationId": "",
    "amount": "",
    "destinationType": "Dwolla",
    "assumeCosts": "false",
    "additionalFees": []
} 
```

当然，要做到这一点，您需要用户的 api 令牌，并且他们需要输入他们的 pin。

# ruby - Ruby gem 错误“Google 不是模块/类”

> ID：14374025
> 
> 赞同：2
> 
> 时间：2013-01-17T07:21:31.953
> 
> 标签：ruby, class, module, rubygems

当我首先需要 'roo' 然后需要 'google-search' 时出现错误

```
TypeError: Google is not a module 
```

同样，我首先需要 'google-search' 然后需要 'roo' 我收到此错误

```
TypeError: Google is not a class 
```

请参阅下文了解 irb 上实际发生的情况

```
{12:30}[1.9.3]~ ➭ irb
1.9.3-p0 :001 > require 'roo'
 => true
1.9.3-p0 :002 > require 'google-search'
TypeError: Google is not a module
        from /home/sagar/.rvm/gems/ruby-1.9.3-p0/gems/google-search-1.0.3/lib/google-search/version.rb:2:in `<top (required)>'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
        from /home/sagar/.rvm/gems/ruby-1.9.3-p0/gems/google-search-1.0.3/lib/google-search.rb:26:in `<top (required)>'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:59:in `require'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:59:in `rescue in require'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from (irb):2
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/bin/irb:16:in `<main>'
1.9.3-p0 :003 > exit
{12:30}[1.9.3]~ ➭ irb
1.9.3-p0 :001 > require 'google-search'
 => true
1.9.3-p0 :002 > require 'roo'
TypeError: Google is not a class
        from /home/sagar/.rvm/gems/ruby-1.9.3-p0/gems/roo-1.10.1/lib/roo/google.rb:7:in `<top (required)>'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
        from /home/sagar/.rvm/gems/ruby-1.9.3-p0/gems/roo-1.10.1/lib/roo.rb:74:in `<top (required)>'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:59:in `require'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:59:in `rescue in require'
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from (irb):2
        from /home/sagar/.rvm/rubies/ruby-1.9.3-p0/bin/irb:16:in `<main>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:21:31.953

解决此问题的方法是使用 Roo 命名空间。我已经修改了 roo gem [github](https://github.com/sagarjunnarkar/roo)。您可以从 github 存储库下载 roo-1.4.0.gem 并安装此版本的 roo

# java - 从迭代器返回相同的对象

> ID：14374026
> 
> 赞同：2
> 
> 时间：2013-01-17T07:21:32.187
> 
> 标签：java, performance, optimization, iterator

它是否有效 - 即，在联系人中，`Iterator`返回与先前迭代相同的（可变）对象，或具有共享可变状态的新对象作为先前对象？也就是说，`next()`只要记录在案，是否可以调用使先前调用返回的对象无效？

我完全理解这通常不是一个好主意*，*我也没有习惯。

但是，在某些情况下，重用相同的底层对象或具有共享内部结构的新对象（因此可能使先前返回的对象的内部结构无效）在某些情况下具有重要且可衡量的意义。一个很好的例子是，当从迭代器返回的对象以一定的偏移量和长度指向包含的缓冲区数组`Iterable`时，当检索后续对象时，该数组可能会被覆盖。

当然，这违反了最小惊讶原则，并且可能对客户不友好-但我很好奇它是否违反了联系`Iterator`-只要我记录下来，我是否在规则范围内玩？

[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)的编写似乎侧重于集合，在`next()`调用之间共享状态可能毫无意义，但`Iterator`它是一个通用接口（您可以在没有支持集合甚至没有支持*任何东西*的情况下实现）。

基本上，我试图在性能方面实现与享元模式相当的东西，但要保留 Java 迭代器的优点。

遵循此模式的迭代器可以安全地以下列方式使用：

```
for (Foo foo : FooIterable) {
  if (foo.method()) {
    System.println("ha!");
  }
} 
```

因为`foo`永远不会从一个迭代逃逸到另一个迭代。但是，以下内容通常不起作用：

```
List<Foo> allTheFoos = ...;
for (Foo foo : FooIterable) {
  allTheFoos.add(foo);
}

for (Foo foo : allTheFoos) {
  ...
} 
```

由于`foo`第一个循环中的 s 被存储起来，因此逃脱了它们的迭代。当您稍后访问它们时，它们的状态可能是无效的（例如，它们可能看起来都像`foo`从初始迭代中返回的最后一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:32:51.280

A`List`可以多次包含同一个对象，并且它`Iterator`会在它出现在列表中的位置返回这个对象。因此，这可能不是合同禁止的事情。A`Set`不应包含重复项，因此不会两次返回相同的对象。

集合永远不会修改或使它们的成员无效，但是在迭代器本身内部存在与您的情况类似的情况：如果集合已被修改，它将变为无效（并在调用时引发异常）。这可能暗示了当返回的对象变得无效时要执行的解决方案。

也许您的迭代可以更好地返回有关该更改对象的包装器，以确保对先前返回的、现在无效的包装器的所有调用都抛出异常。

# ios - 一组 CLLocationsCoordinate2D 的中心坐标

> ID：14374030
> 
> 赞同：8
> 
> 时间：2013-01-17T07:21:45.737
> 
> 标签：ios, objective-c, mkmapview, coordinates

有没有办法在 iOS 中获取一组 CLLocationsCoordinate2D 的中心坐标？

![在此处输入图像描述](../Images/a9b30ba0e6e96557e5102b9c01de154d.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T08:47:12.047

嗯...这取决于您如何定义点的中心。是否取决于分布等...

一个简单的方法如下......

```
//find rect that encloses all coords

float maxLat = -200;
float maxLong = -200;
float minLat = MAXFLOAT;
float minLong = MAXFLOAT;

for (int i=0 ; i<[locations count] ; i++) {
    CLLocationCoordinate2D location = [locations objectAtIndex:i];

    if (location.latitude < minLat) {
        minLat = location.latitude;
    }

    if (location.longitude < minLong) {
        minLong = location.longitude;
    }

    if (location.latitude > maxLat) {
        maxLat = location.latitude;
    }

    if (location.longitude > maxLong) {
        maxLong = location.longitude;
    }
}

//Center point

CLLocationCoordinate2D center = CLLocationCoordinate2DMake((maxLat + minLat) * 0.5, (maxLong + minLong) * 0.5); 
```

这将使矩形的中心覆盖所有点。但是，它没有考虑点差。

IE

```
. = point
X = centre

.....               X                   . 
```

**编辑**

修正了一些数学。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-06T03:44:21.023

我知道已经很晚了，但是有人可以阅读此内容并帮助自己使用 Fogmeister 答案，您可以创建一个 MKCoordinateRegion

```
CLLocationDegrees minLat,minLng,maxLat,maxLng;
for(CLLocationCoordinate2D coordinate in coordinates) {
    minLat = MIN(minLat, coordinate.latitude);
    minLng = MIN(minLng, coordinate.longitude);

    maxLat = MAX(maxLat, coordinate.latitude);
    maxLng = MAX(maxLng, coordinate.longitude);
}

CLLocationCoordinate2D coordinateOrigin = CLLocationCoordinate2DMake(minLat, minLng);
CLLocationCoordinate2D coordinateMax = CLLocationCoordinate2DMake(maxLat, maxLng);

MKMapPoint upperLeft = MKMapPointForCoordinate(coordinateOrigin);
MKMapPoint lowerRight = MKMapPointForCoordinate(coordinateMax);

//Create the map rect
MKMapRect mapRect = MKMapRectMake(upperLeft.x,
                                  upperLeft.y,
                                  lowerRight.x - upperLeft.x,
                                  lowerRight.y - upperLeft.y);

//Create the region
MKCoordinateRegion region = MKCoordinateRegionForMapRect(mapRect);

//THIS HAS THE CENTER, it should include spread
CLLocationCoordinate2D centerCoordinate = region.center; 
```

问候！！！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-07T12:30:29.500

您还可以同时获取s 和 a`center`的数组。`CLLocationCoordinate2D``span`

```
extension MKCoordinateRegion {

  init(coordinates: [CLLocationCoordinate2D]) {
    var minLatitude: CLLocationDegrees = 90.0
    var maxLatitude: CLLocationDegrees = -90.0
    var minLongitude: CLLocationDegrees = 180.0
    var maxLongitude: CLLocationDegrees = -180.0

    for coordinate in coordinates {
      let lat = Double(coordinate.latitude)
      let long = Double(coordinate.longitude)
      if lat < minLatitude {
        minLatitude = lat
      }
      if long < minLongitude {
        minLongitude = long
      }
      if lat > maxLatitude {
        maxLatitude = lat
      }
      if long > maxLongitude {
        maxLongitude = long
      }
    }

    let span = MKCoordinateSpanMake(maxLatitude - minLatitude, maxLongitude - minLongitude)
    let center = CLLocationCoordinate2DMake((maxLatitude - span.latitudeDelta / 2), (maxLongitude - span.longitudeDelta / 2))
    self.init(center: center, span: span)
  }
} 
```

用法：

```
let region = MKCoordinateRegion(coordinates: coordinates)
region.center
region.span 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-07T20:41:41.250

和 Swift 5 兼容的扩展

```
extension Array where Element == CLLocationCoordinate2D {
func center() -> CLLocationCoordinate2D {
    var maxLatitude: Double = -200;
    var maxLongitude: Double = -200;
    var minLatitude: Double = Double(MAXFLOAT);
    var minLongitude: Double = Double(MAXFLOAT);

    for location in self {
        if location.latitude < minLatitude {
            minLatitude = location.latitude;
        }

        if location.longitude < minLongitude {
            minLongitude = location.longitude;
        }

        if location.latitude > maxLatitude {
            maxLatitude = location.latitude;
        }

        if location.longitude > maxLongitude {
            maxLongitude = location.longitude;
        }
    }

    return CLLocationCoordinate2DMake(CLLocationDegrees((maxLatitude + minLatitude) * 0.5), CLLocationDegrees((maxLongitude + minLongitude) * 0.5));
} 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T19:39:52.623

如果您正在寻找作为中心的平均值，那么您将所有纬度和经度相加成它们自己的总数，然后除以您拥有的坐标数，这是非常标准的数学。

（请注意，如果您的坐标跨越日期线，这将不起作用）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-15T12:48:35.500

Fogmeisters 的回答会起作用，但有 3 个错误，我已在下面更正：

```
//find rect that encloses all coords

float maxLat = -200;
float maxLong = -200;
float minLat = MAXFLOAT;
float minLong = MAXFLOAT;

for (int i=0 ; i<[locations count] ; i++) {
CLLocationCoordinate2D location = [locations objectAtIndex:i];

    if (location.latitude < minLat) {
        minLat = location.latitude;
    }

    if (location.longitude < minLong) {
        minLong = location.longitude;
    }

    if (location.latitude > maxLat) {
        maxLat = location.latitude;
    }

    if (location.longitude > maxLong) { //Change to be greater than
        maxLong = location.longitude;
    }
}

//Center point
//The min's and max's should be ADDED not subtracted
CLLocationCoordinate2D center = CLLocationCoordinate2DMake((maxLat + minLat) * 0.5, (maxLong + minLong) * 0.5); 
```

# asp.net-mvc - 服务器端验证失败时如何保留部分视图的视图状态

> ID：14374033
> 
> 赞同：0
> 
> 时间：2013-01-17T07:21:53.413
> 
> 标签：asp.net-mvc

这些是重现我的问题的步骤：

```
The user opens a partial view.
The user does not select the correct item in the DropDownList.
The user sends the form to the server.
The form is shown with the validation error. 
```

到目前为止还不错。

困扰我的是用户先前选择的项目被重置。这意味着 DropDownList 中的第一项再次是预选/默认值。

我该如何改变呢？

**更新**

当 Web 服务器向客户端返回响应时：

```
$.ajax({
    url: $(form).attr('action'),
    type: 'POST',
    data: form.serialize(),
    success: function (response) {
        debugger;
        if (response.success) {
            dlg.dialog("close");
        }
        else { dlg.html(response); } // In this response the selected item has the correct selected=selected attribute
    }
}); 
```

该对话框通过 dlg.html(response) 显示响应 html

我发现返回的 html 中的选定项是正确的：

```
<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $('#selectUnitType').ddslick({
            showSelectedHTML: false,
            onSelected: function (data) {
            }
        });

        var node = $('#TreeDiv').dynatree("getActiveNode");        
        var selectedParentUnitId = node.data.key;
        var templateId = $('input[name=TemplateId]').val();

        $('form input[name=IsParentFolder]').val(node.data.isFolder);
        $('form input[name=TemplateId]').val(templateId);
        $('form input[name=ParentId]').val(selectedParentUnitId);
    });
</script>

<form action="/Unit/CreateChildren?_=1358449701481" method="post"> 
    <select 
    class="input-validation-error"
     data-val="true" 
     data-val-number="The field Selected unit type must be a number." 
     data-val-required="&#39;Selected Folder Type Id&#39; darf keinen Null-Wert aufweisen." 
     id="selectUnitType"
     name="SelectedFolderTypeId">
        <option data-description="Contains other folders" data-imagesrc="../Content/Images/de.png" value="0">Folder</option>
        <option data-description="Contains teststeps" data-imagesrc="../Content/Images/gb.png" selected="selected" value="1">Teststep</option>
    </select>
</form>

[FluentValidation.Attributes.Validator(typeof(CreateUnitViewModelValidator))]
public class CreateUnitViewModel
{
    public CreateUnitViewModel()
    {
        List<ImageSelectListItem> items = new List<ImageSelectListItem>();
        items.Add(new ImageSelectListItem { Description = "Contains other folders", Value = ((int)UnitType.Folder).ToString() , Text = "Folder", ImageFileName = "de.png", Selected = false });
        items.Add(new ImageSelectListItem { Description = "Contains teststeps", Value = ((int)UnitType.Teststeps).ToString() , Text = "Teststep", ImageFileName = "gb.png", Selected = false });
        DisplayList = items;
    }

    [Remote("UnitExists", "Unit", ErrorMessage = "This name already exists.", AdditionalFields = "TemplateId")]
    public string Name { get; set; }
    public Nullable<int> ParentId { get; set; }
    public int TemplateId { get; set; } 
    [DisplayName("Selected unit type")]
    public int SelectedFolderTypeId { get; set; }
    public int UnitId { get; set; }
    public bool IsParentFolder { get; set; }

    public IEnumerable<ImageSelectListItem> DisplayList { get; set; }
} 

[HttpGet]
public ActionResult CreateChildren()
{   
    return PartialView(new CreateUnitViewModel());
}

[HttpPost]
public ActionResult CreateChildren(CreateUnitViewModel unitViewModel)
{
if (ModelState.IsValid && !_unitService.UnitExists(unitViewModel.Name, unitViewModel.TemplateId))
{
    Unit unit = Mapper.Map<CreateUnitViewModel, Unit>(unitViewModel);
    _unitService.CreateChild(unit);
    UnitTreeViewModel unitTreeViewModel = Mapper.Map<Unit, UnitTreeViewModel>(unit);
    return new JsonNetResult(new { success = true, unit = unitTreeViewModel });
}
ModelState.AddModelError("Name", "This name already exists.");
return PartialView(unitViewModel);
} 
```

问题是 Create viewmodel 的构造函数代码吗？html 似乎是正确的，为什么其余的可以发挥任何作用？呈现给客户的内容很重要...

# android - 使用 editText 和 simpleCursorAdapter 过滤列表视图

> ID：14374034
> 
> 赞同：1
> 
> 时间：2013-01-17T07:22:01.983
> 
> 标签：android, listview, filter, simplecursoradapter

我正在尝试过滤我的 listView 中的项目，但它不起作用。我的代码似乎没有响应我的 editText 中输入的文本。

这是我的 SearchActivity 类（MainActivity）

```
public class SearchActivity extends Activity {

    private DatabaseHelper myDatabaseHelper;

      /* Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.search_layout);
          ListView listContent = (ListView)findViewById(R.id.contentlist);
          myDatabaseHelper = new DatabaseHelper(this);

          try {
            myDatabaseHelper.createDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
          myDatabaseHelper.openDataBase();
          Cursor cursor = myDatabaseHelper.queueAll();
          startManagingCursor(cursor);

          String[] from = new String[]{DatabaseHelper.KEY_CONTENT};
          int[] to = new int[]{R.id.text1};
          final SimpleCursorAdapter cursorAdapter =
           new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

          listContent.setAdapter(cursorAdapter);
          listContent.setFastScrollEnabled(true);
          listContent.setTextFilterEnabled(true);

          EditText etext=(EditText)findViewById(R.id.editText1);
          etext.addTextChangedListener(new TextWatcher() {
              public void onTextChanged(CharSequence s, int start, int before, int count) {
              }

              public void beforeTextChanged(CharSequence s, int start, int count, int after) {
              }

              public void afterTextChanged(Editable s) {
                  ListView listContent2 = (ListView)findViewById(R.id.contentlist);
                  SimpleCursorAdapter filterAdapter = (SimpleCursorAdapter)listContent2.getAdapter();
                  filterAdapter.getFilter().filter(s.toString());
              }
          });

          cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {
              public Cursor runQuery(CharSequence constraint) {
                  return myDatabaseHelper.getDirectoryList(constraint);
              }
          });

          myDatabaseHelper.close(); 
```

这是我的 getDirectoryList

```
public Cursor getDirectoryList (CharSequence constraint)  {
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    queryBuilder.setTables(DB_NAME);

    String[] columns = new String[]{KEY_ID, KEY_CONTENT, KEY_DESCRIPTION, KEY_NETWORKING, KEY_HARDWARE, KEY_SOFTWARE, KEY_INTERNET, KEY_TECHNOLOGY};

    if (constraint == null  ||  constraint.length () == 0)  {
        //  Return the full list
            Cursor cursor = myDataBase.query("MY_TABLE", 
             columns, null, null, null, null, null);
            return cursor;
    }  else  {
            String value = constraint.toString()+"%";
            Cursor cursor2 = myDataBase.query("MY_TABLE", columns, "KEY_CONTENT like ?", new String[]{value}, null, null, null);
            return cursor2;
        }
    }
} 
```

# python - Python 列表的问题

> ID：14374035
> 
> 赞同：2
> 
> 时间：2013-01-17T07:22:04.417
> 
> 标签：python, python-2.7

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

好的，所以我正在尝试学习 Python。几个学期前，我有一个朋友上过 Python 课程的介绍，他把他所有的旧作业都给了我。我有一个特别烦人的问题，我认为应该很简单，但似乎无法弄清楚我的问题出在哪里。看看大家怎么想的。

该程序应该从名为 grades.txt 的文件中读取。这是文件：

```
2
John Doe
82
100
57
0
Jane Smith
91
12
45
81
0 
```

这个文件的格式是：第一行是学生人数。然后是学生的名字和他们的成绩。零表示学生成绩列表的结束。我知道，我知道……这样做没有多大意义，但这就是它的阅读方式。

无论如何，这是我到目前为止为它编写的代码......

```
#!/usr/bin/env python

class students():
        def __init__(self, fname='', lname='', grades=[]):
        self.firstName = fname
        self.lastName = lname
        self.gradeBook = grades

def lineCheck(lineText):
     try:
         int(lineText)
         return True
     except ValueError:
         return False

inFile = "grades.txt"
outFile = "summary.txt"

count = 0
numStudents = 0

studentList = []
check = False

with open(inFile, "r") as file: 
    for line in file:
        if(count == 0):
            numStudents = line.strip()
        else:
            lineRead = line.strip()
            check = lineCheck(lineRead)
            if(check == False):
                studentName = lineRead.split()
                fName = studentName[0]
                lName = studentName[1]
                temp = students(fName, lName)
            else:
                if(lineRead != '0'):
                    temp.gradeBook.append(lineRead)
                elif(lineRead == '0'):
                    studentList.append(temp)

        count += 1
file.close()

for student in studentList:
    print student.firstName + " " + student.lastName
    print student.gradeBook 
```

使用此代码，我的预期输出是在最终 for 循环中的程序末尾。我希望看到这样的事情：

```
John Doe
['82', '100', '57']
Jane Smith
['91', '12', '45', '81'] 
```

但是，我得到的输出是这样的：

```
John Doe
['82', '100', '57', '91', '12', '45', '81']
Jane Smith
['82', '100', '57', '91', '12', '45', '81'] 
```

我已经盯着这个太久了，我觉得这很简单。但由于我是 python 新手，还没有完全习惯它的所有细微差别，也许有经验的人可以找出这里发生的事情。我真的很感激你能给我的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:50:19.353

您的*实际问题*是您将`[]`其用作默认参数。默认参数创建一次并“附加”到函数中，因此每次创建新的学生对象时，都会重复使用相同的成绩列表。你想要这样的东西：

```
def __init__(..., grades=None):
    if grades is None:
        self.gradeBook = []
    else:
        self.gradeBook = grades 
```

* * *

现在，请允许我给你一些其他的批评。:)

看起来您的代码中包含空格和制表符的组合；在像 Python 这样的语言中，空格很重要，这*真的很糟糕*。我不知道你使用的是什么编辑器，但你应该知道如何配置它，所以按下`Tab`总是会插入四个空格。

其余的内容不太重要，但它会帮助您与其他 Python 程序员相处，并且可能会帮助您的代码变得更简单。

* * *

您可以在几个地方执行此操作：

```
if(check == 0): 
```

括号是不必要的。

```
if check == 0: 
```

* * *

您有以下内容：

```
if(lineRead != '0'):
    ...
elif(lineRead == '0'):
    ... 
```

但其中只有一个可能是真的——它要么相等，要么不相等——所以你不妨将 替换`elif ...`为`else`。但这会导致双重否定（它不是`!=`......），所以让我们交换分支。

```
if lineRead == '0':
    ...
else:
    ... 
```

* * *

```
check = lineCheck(lineRead)
if(check == False): 
```

您只使用该`check`变量一次，因此不需要它。此外，更常见的是避免与`True`或`False`直接比较：

```
if not lineCheck(lineRead): 
```

不过，这读起来不太好。执行动作的函数最好命名为动词，而验证某些东西的函数（如这个）在命名时听起来不错`is_whatever`。变量，你想像你用英语谈论它一样命名；您不会经常谈论“读取行”，但您可能会谈论“读取行”，甚至只是“行”。

哦，还有[Python 风格指南，PEP 8](http://www.python.org/dev/peps/pep-0008/)建议使用下划线而不是 camelCase。

```
if not is_numeric(line): 
```

* * *

类名通常用大写骆驼大写，并且应该是单数，因为它们描述了*一种事物*。（“你有什么样的宠物？”“一只猫。”）而且你应该总是继承自`object`，否则你会得到一个“旧式类”，它来自 Python 的早期，有点笨拙。

虽然我在做，但学生没有名字没有多大意义。尽管您最好[不要尝试将其拆分为 first 和 last](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)。

```
class Student(object):
    def __init__(self, name, grades=None):
        ... 
```

* * *

现在没关系，但稍后将所有“主”代码放在一个调用的函数中`main`然后运行它会很有帮助。这样，您可以`main`从其他代码（例如测试）导入，而无需立即运行所有代码。

```
if __name__ == '__main__':
    main() 
```

`__name__`只是当前“模块”的名称，`'__main__'`如果您直接使用`python file.py`.

* * *

经过一番重重的吹毛求疵，我最终得到了这个：

```
class Student(object):
    def __init__(self, name, grades=None):
        self.name = name
        if grades is None:
            self.gradebook = []
        else:
            self.gradebook = grades

def is_numeric(s):
    try:
        int(s)
        return True
    except ValueError:
        return False

def main(infile, outfile):
    count = 0
    num_students = 0

    students = []

    with open(infile, "r") as f:
        for line in f:
            line = line.strip()

            if count == 0:
                # This is the first line
                num_students = int(line)
            elif not is_numeric(line):
                # Non-numbers are names of new students
                cur_student = Student(line)
            elif line == '0':
                # Zero marks the end of a student
                students.append(cur_student)
            else:
                cur_student.gradebook.append(line)

            count += 1

    for student in students:
        print student.name
        print student.gradebook

if __name__ == '__main__':
    main("grades.txt", "summary.txt") 
```

我做了一些上面没有提到的小事；我希望他们有意义。

*   `file`是内置函数的名称。Python 将允许您使用该名称，但如果您稍后尝试使用内置名称，您会感到惊讶。我将其替换为`f`，这是引用仅打开一小段时间的文件的常用方法。

*   很难记住是什么`temp`意思！尽量不要给变量这样的名字。我将其更改为`cur_student`，其中“cur”是“current”的常见缩写。

*   你不需要`f.close()`；该`with`块为您完成。事实上，这就是 的全部意义所在`with`。

*   `line.strip()`不管发生什么你都会打电话，所以我把它作为循环中的第一件事。这允许所有`if`s 合并为一个，从而更容易跟踪正在发生的事情和时间。

*   我添加了一些快速评论，因为正如您所指出的，这是一种非常奇怪的文件格式。

如果这意味着什么的话，这更接近我的写作方式。

总是很高兴看到有人新进入编程领域！希望你喜欢 Python :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:34:13.460

采用

```
class students():
    def __init__(self, fname='', lname='', grades=None):
        self.firstName = fname
        self.lastName = lname
        self.gradeBook = [] if grades is None else grades 
```

问题是默认参数`[]`

# java - 获取方法输出参数参数

> ID：14374039
> 
> 赞同：2
> 
> 时间：2013-01-17T07:22:17.133
> 
> 标签：java, reflection

我使用以下代码获取方法输入参数，但我得到了错误的参数，例如我设置薪水我想获取类型 (double ) 和名称 (salary) 。我在这里想念什么？

```
public void setSalery(double salery) {
    this.salery = salery;
  } 
```

这是代码

```
for (Method method : classHandle.getMethods()) {

            Class<?>[] parameterTypes = method.getParameterTypes();

            for (Class<?> class1 : parameterTypes) {

                Field[] declaredFields = class1.getDeclaredFields();
                for (Field field : declaredFields) {
                    System.out.println(field.getName());

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:29:54.340

您可以检索参数*类型*，但不能检索参数*名称*。除了在方法中之外，它们没有任何意义，在这一点上对你来说是不透明的。 `getDeclaredFields()`返回*types*中的字段，而不是参数名称。

要调用这样的方法（使用您的示例），假设

```
MyBean b = new MyBean(); // contains method setSalary(double salary)
Method m = ...           // a reference to a Method object for MyBean#setSalary(double salary)
double newSalary = ...; 
```

然后做

```
m.invoke(b, new Double(newSalary)); 
```

# php - Websocket PHP：从客户端发送到服务器的立即断开连接和奇怪的消息字符串

> ID：14374042
> 
> 赞同：0
> 
> 时间：2013-01-17T07:22:39.433
> 
> 标签：php, websocket, phpwebsocket

我目前正在关注本[教程](http://blog.ilric.org/2011/02/14/super-simple-chat-using-websockets/)。到现在为止，我遇到了很多错误，也改变了很多班级。现在，问题是，当客户端发送一条消息时，它在服务器中被读取为一个奇怪的字符串，并且服务器发送给客户端的字符串不会触发 onmessage 函数。另一个问题是，当我从客户端发送 3 次消息时，它将立即关闭并在 chrome log 中出现错误`Received unexpected continuation frame.`。这门课还缺少什么？这是我所做的最后一个更改的课程。谢谢。

```
<?php

// Usage: $master=new WebSocket("localhost",12345);

class WebSocket{
  var $master;
  var $sockets = array();
  var $users   = array();
  var $debug   = false;

  function __construct($address,$port){
    //error_reporting(E_ALL);
    set_time_limit(0);
    ob_implicit_flush();

    $this->master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP)     or die("socket_create() failed");
    socket_set_option($this->master, SOL_SOCKET, SO_REUSEADDR, 1)  or die("socket_option() failed");
    socket_bind($this->master, $address, $port)                    or die("socket_bind() failed");
    socket_listen($this->master,20)                                or die("socket_listen() failed");
    $this->sockets[] = $this->master;
    $this->say("Server Started : ".date('Y-m-d H:i:s'));
    $this->say("Listening on   : ".$address." port ".$port);
    $this->say("Master socket  : ".$this->master."\n");

    while(true){
      $changed = $this->sockets;
      socket_select($changed,$write=NULL,$except=NULL,NULL);
      foreach($changed as $socket){
        if($socket==$this->master){
          $client=socket_accept($this->master);
          if($client<0){ $this->log("socket_accept() failed"); continue; }
          else{ $this->connect($client); }
        }
        else{
          $bytes = @socket_recv($socket,$buffer,2048,0);
          if($bytes==0){ $this->disconnect($socket); }
          else{
            $user = $this->getuserbysocket($socket);
            if(!$user->handshake){ $this->dohandshake($user,$buffer); }
            else{ $this->process($user,$this->unwrap($buffer)); }
          }
        }
      }
    }
  }

  function process($user,$msg){
    /* Extend and modify this method to suit your needs */
    /* Basic usage is to echo incoming messages back to client */
    //$this->send($user->socket,$msg);

    foreach($this->users as $usr){
        $this->send($usr->socket,$user->id."&gt; ".$msg);
    }
  }

  function send($client,$msg){ 
    $this->say("> " . $msg);
    $msg = $this->wrap($msg);
    echo $msg;
    socket_write($client, $msg, strlen($msg));
    $this->say("! ".strlen($msg));
  } 

  function connect($socket){
    $user = new SocketUser();
    $user->id = uniqid();
    $user->socket = $socket;
    array_push($this->users,$user);
    array_push($this->sockets,$socket);
    $this->say($socket." CONNECTED!");
    $this->send($socket, "Welcome");
    $this->log(date("d/n/Y ")."at ".date("H:i:s T"));
  }

  function disconnect($socket){
    $found=null;
    $n=count($this->users);
    for($i=0;$i<$n;$i++){
      if($this->users[$i]->socket==$socket){ $found=$i; break; }
    }
    if(!is_null($found)){ array_splice($this->users,$found,1); }
    $index=array_search($socket,$this->sockets);
    socket_close($socket);
    $this->say($socket." DISCONNECTED!");
    if($index>=0){ array_splice($this->sockets,$index,1); }
  }

  function dohandshake($user,$buffer){
    $this->log("\nRequesting handshake...");
    $this->log($buffer);
    list($resource,$host,$origin,$key,$l8b) = $this->getheaders($buffer);
    $this->log("Handshaking...");
    //$port = explode(":",$host);
    //$port = $port[1];
    //$this->log($origin."\r\n".$host);
    $upgrade  = "HTTP/1.1 101 WebSocket Protocol Handshake\r\n" .
                "Upgrade: WebSocket\r\n" .
                "Connection: Upgrade\r\n" .
                                //"WebSocket-Origin: " . $origin . "\r\n" .
                                //"WebSocket-Location: ws://" . $host . $resource . "\r\n" .
                "Sec-WebSocket-Origin: " . $origin . "\r\n" .
                    "Sec-WebSocket-Location: ws://" . $host . $resource . "\r\n" .
                    //"Sec-WebSocket-Protocol: icbmgame\r\n" . //Client doesn't send this
                    "Sec-WebSocket-Accept: " . base64_encode(SHA1($key."258EAFA5-E914-47DA-95CA-C5AB0DC85B11", true)) . "\r\n" .
                "\r\n";// .
                    $this->calcKey($key,'',$l8b) . "\r\n";// .
                        //"\r\n";
    socket_write($user->socket,$upgrade.chr(0),strlen($upgrade.chr(0)));
    $user->handshake=true;
    $this->log($upgrade);
    $this->log("Done handshaking...");
    return true;
  }

  function calcKey($key1,$key2,$l8b){
        //Get the numbers
        preg_match_all('/([\d]+)/', $key1, $key1_num);
        preg_match_all('/([\d]+)/', $key2, $key2_num);
        //Number crunching [/bad pun]
        $this->log("Key1: " . $key1_num = implode($key1_num[0]) );
        $this->log("Key2: " . $key2_num = implode($key2_num[0]) );
        //Count spaces
        preg_match_all('/([ ]+)/', $key1, $key1_spc);
        preg_match_all('/([ ]+)/', $key2, $key2_spc);
        //How many spaces did it find?
        $this->log("Key1 Spaces: " . $key1_spc = strlen(implode($key1_spc[0])) );
        $this->log("Key2 Spaces: " . $key2_spc = strlen(implode($key2_spc[0])) );
        if($key1_spc==0|$key2_spc==0){ $this->log("Invalid key");return; }
        //Some math
        $key1_sec = pack("N",$key1_num / $key1_spc); //Get the 32bit secret key, minus the other thing
        $key2_sec = pack("N",$key2_num / $key2_spc);
        //This needs checking, I'm not completely sure it should be a binary string
        return md5($key1_sec.$key2_sec.$l8b,1); //The result, I think
  }

  function getheaders($req){
    $r=$h=$o=$sk1=$sk2=null;
    if(preg_match("/GET (.*) HTTP/"               ,$req,$match)){ $r=$match[1]; }
    if(preg_match("/Host: (.*)\r\n/"              ,$req,$match)){ $h=$match[1]; }
    if(preg_match("/Origin: (.*)\r\n/"            ,$req,$match)){ $o=$match[1]; }
    if(preg_match("/Sec-WebSocket-Key: (.*)\r\n/",$req,$match)){ $this->log("Sec Key: ".$sk1=$match[1]); }
    //if(preg_match("/Sec-WebSocket-Key1: (.*)\r\n/",$req,$match)){ $this->log("Sec Key1: ".$sk1=$match[1]); }
    //if(preg_match("/Sec-WebSocket-Key2: (.*)\r\n/",$req,$match)){ $this->log("Sec Key2: ".$sk2=$match[1]); }
    if($match=substr($req,-8)) { $this->log("Last 8 bytes: ".$l8b=$match); }
    return array($r,$h,$o,$sk1,$sk2,$l8b);
  }

  function getuserbysocket($socket){
    $found=null;
    foreach($this->users as $user){
      if($user->socket==$socket){ $found=$user; break; }
    }
    return $found;
  }

  function     say($msg=""){ echo $msg."\n"; }
  function     log($msg=""){ if($this->debug) { echo $msg."\n"; } }
  function    wrap($msg=""){ return $msg; }
  //function    wrap($msg=""){ return chr(0).$msg.chr(255); }
  //function  unwrap($msg=""){ return $msg; }
  function  unwrap($msg=""){ return substr($msg,1,strlen($msg)-2); }

}

class SocketUser{
  var $id;
  var $socket;
  var $handshake;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:35:11.597

按照 Mark Tomlin 的建议，我搬到了另一个图书馆，并在[这里](http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/)找到了另一个图书馆。对于像我这样的初学者来说，这个库非常容易使用，而且效果很好。

# iphone - ios - URL 架构

> ID：14374056
> 
> 赞同：0
> 
> 时间：2013-01-17T07:23:49.170
> 
> 标签：iphone, ios, schema

在我的 iPhone 应用程序中，我可以选择下载 pdf 或 doc 文件。当我点击下载按钮时，我需要打开 USB Disk 应用程序。

我怎样才能做到这一点？！

有谁知道是否有用于启动内置 USB 磁盘应用程序的 URL 架构？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:39:34.637

**如果已安装应用程序，请打开 USB 磁盘应用程序**

```
if ([[UIApplication sharedApplication] canOpenURL:
                               [NSURL URLWithString:@"USB Disk app url scheme://"]]) {

    [[UIApplication sharedApplication] openURL:
                               [NSURL URLWithString:@"USB Disk app url scheme://"]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:44:02.057

到目前为止，iOS 中还没有像“USB Disk”这样的内置应用程序。

# apache - 确定 IP 地址范围的不同方法如何工作？

> ID：14374058
> 
> 赞同：0
> 
> 时间：2013-01-17T07:24:00.603
> 
> 标签：apache, .htaccess, range, ip-address, access-control

我想拒绝从某个 IP 范围访问我的网站以获取 IP 地址。（例如 143.56.122.127-143.56.122.255）。我在 Apache-Server 上找到了 4 种不同的方法来执行此操作：

*   对每个 IP 地址使用 a `Deny from ###.###.###.###`。这可能是很多工作，...
*   `Deny from ###.###.###.###/XX`. 我不知道如何确定数字 XX 以便它做我想要的。
*   `Deny from ###.###.###.###/255.255.255.126`. 这就是我认为适用于我的具体示例的方法。我认为这意味着将第二个IP地址的每个部分与255的差异添加到第一个IP地址中。
*   第四种是模式匹配，但这不是很直观，因此在大多数情况下可能不是最简单的方法。

我认为第二个和第三个似乎是最直接的，所以任何人都可以向我解释它们。这些方法有名称还是在标准中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:12:12.817

我认为，您可以使用第二种方法。

```
Order allow,deny
//0.0.0.0 - 0.255.255.255.255
Allow from 0.0.0.0/8

//1.0.0.0 - 1.1.255.255
Allow from 1.0.0.0/15

//1.2.0.0 - 1.2.1.255
Allow from 1.2.0.0/23

//1.2.2.0 - 1.2.2.255
Allow from 1.2.2.0/24

//1.2.3.0 - 1.2.3.3
Allow from 1.2.3.0/30 
```

这样，你可以写

```
//143.56.122.127-143.56.122.255
Deny from 143.56.122.0/24
Allow from 143.56.122.0/25 
```

你也可以参考[这个](http://www.subnet-calculator.com/)。不过，我想让它变得原始，我从未在我的项目中使用过。这是建议。我也想从其他人那里读到这点。

# user-interface - 当触摸 GUI 区域时只有 gui-event 响应？

> ID：14374059
> 
> 赞同：0
> 
> 时间：2013-01-17T07:24:02.947
> 
> 标签：user-interface, event-handling, unity3d

我做了一个 Scrollview。当我滚动视图时，下面的场景也会响应。

如何使其仅在触摸 GUI 组件区域时响应 GUI 事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:50:58.763

```
private float scroll_value;
private Rect vscroll_rect = new Rect(0,0,100,100);
void OnGUI () {
    scroll_value = GUI.VerticalScrollbar (vscroll_rect , scroll_value, 1.0f, 0.0f, 10.0f);
}
void Update() {
    // Cursor is inside verticalscroll rect, ignore it
    if (vscroll_rect.Contains(Input.mousePosition))return;
} 
```

唯一的问题是，如果您在许多不同的脚本中有多个 GUI 元素，则它们每个都需要测试 Input.mouseCursor 是否在 GUI 元素内。解决此问题的一种简单方法是创建一个管理 GUI rects 的脚本，您可以从任何其他脚本调用该脚本进行检查。

# php - PHP - 创建一个类设置一个数组变量并在全局范围内使用它

> ID：14374060
> 
> 赞同：0
> 
> 时间：2013-01-17T07:24:03.907
> 
> 标签：php, class, global

我需要一些帮助来解决我不知道如何开始的情况，甚至不知道在哪里寻找。

我有一个大的 *.ini 文件（用于语言），我只想在 php 文档的开头解析一次，然后在文档中的任何地方使用结果。

我想，我需要一门课，比如：

```
class Language{
    private language = array();

    function get( $string ){
        return $this->language[ $string ];
    }

    function getLanguage(){
        /* get and parse *.ini file once */
        $result = array;

        /* set language */
        $this->language = $result;
    }
} 
```

因此，理论上，在 php 文档开始时，该类以某种方式调用 getLanguage() 并设置语言数组

```
Language::getLanguage(); 
```

然后，在 php 文档的其余部分中的任何位置，尤其是在其他类中（不作为函数参数发送），无需再次解析 *.ini 文件即可获得特定语言数组元素。

```
class AClass{
    function __construct(){
        echo Language::get( $certain_string );
    }
}
new AClass; 
```

任何建议都很受欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:29:29.020

为了能够使用 :: 调用方法，您需要将其声明为静态的。

```
class Language {
    private static $lang = null; // you won't be able to get this directly
    public static function getLanguage(){
        if (self::$lang) { // you can check with is_null() or !is_array()
            return self::$lang; 
        }
        else { /* parse ini file here and set it in self::$lang */ }
    }
}
Language::getLanguage(); 
```

我认为这就是你所需要的。如果您需要进一步调整，请告诉我。

PS：如果你声明`private function __construct(){}`and `private function __clone(){}`- 这将是一个经典的[Singleton 设计模式](http://en.wikipedia.org/wiki/Singleton_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:39:14.010

如果你需要使用 Language::getLanguage(); 您应该将此函数定义为静态的。

```
public static function getLanguage(){
        /* get and parse *.ini file once */
        $result = array;

        /* set language */
        $this->language = $result;
    } 
```

但我建议使用“单例”模式：

```
class Language{

    static private $_instance = null;

    private language = array();

    private function __construct(){}
    private function __clone(){}

    public static function getInstance(){
        if (self::$_instance === null){
            self::$_instance = new self();
        }
        return self::$_instance;
    }

    public function get( $string ){
        return $this->language[ $string ];
    }

    public function getLanguage(){
        /* get and parse *.ini file once */
        $result = array;

        /* set language */
        $this->language = $result;
    }
} 
```

所以使用它你可以像这样调用这个类的方法：

```
Language::getInstance()->get('str');
Language::getInstance()->getLanguage(); 
```

# scala - ScalaMock 方法 getPrefixLength 不覆盖任何内容

> ID：14374063
> 
> 赞同：3
> 
> 时间：2013-01-17T07:24:20.667
> 
> 标签：scala, mocking

我将 ScalaMock 3.0 与 ScalaTest 和 Scala 2.10 一起使用。当我尝试模拟从 java.io.File 继承的类时，出现以下编译错误。*方法 getPrefixLength 不会覆盖任何内容*

这是一些示例代码：

```
class TrendSpec extends FunSpec with MockFactory {
  class A extends java.io.File("")
  val a = mock[A]
} 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:59:23.793

问题是`getPrefixLength`包私有，但反射 API 似乎被包私有变量破坏了。在 scala-user 邮件列表上有一个关于这个的持续[讨论](https://groups.google.com/d/topic/scala-user/3BRQR_8xG7Y/discussion)。

请[在 ScalaMock 错误跟踪器上将此报告为错误](https://github.com/paulbutcher/ScalaMock/issues)

# apache - 即使没有输入扩展名也可以下载文件

> ID：14374065
> 
> 赞同：0
> 
> 时间：2013-01-17T07:24:25.200
> 
> 标签：apache

在 apache 中，我可以做一些非常奇怪的事情。想象一下，我有一个名为“dir”的文件夹，其中有一个文件“123.zip”。如果我进入浏览器并在 URL 栏中写入“http://mydomain.com/dir/123.zip”，我会下载该文件，因为它应该会发生，但如果我输入“http://mydomain.com” /dir/123' 我也下载了该文件。这应该发生吗？如果是这样，有什么方法可以停用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:28:56.967

您可能启用了[mod_deflate吗？](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)

# android - 列出 SD 卡上存在的所有文本文件

> ID：14374068
> 
> 赞同：0
> 
> 时间：2013-01-17T07:24:38.030
> 
> 标签：android, android-sdcard

我正在使用以下代码列出 SD 卡上存在的所有文件。但是，我只想列出所有文本文件，有人可以告诉我如何添加文件过滤器。同样，我也需要获取图像文件。以下是我的代码：

```
public ArrayList<String> GetFiles(String DirectoryPath) {
    ArrayList<String> MyFiles = new ArrayList<String>();
    File f = new File(DirectoryPath);

    f.mkdirs();
    File[] files = f.listFiles();
    if (files.length == 0)
        return null;
    else {
        for (int i=0; i<files.length; i++) 
            MyFiles.add(files[i].getName());
    }

    return MyFiles;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:28:31.543

使用**Java String 类**`.endsWith()`中的方法从文件路径检查文件扩展名。

 ****方法：**

```
public boolean endsWith(String suffix) 
```

您的代码类似于，

```
private List<String> ReadSDCard()
{
     //It have to be matched with the directory in SDCard
     File f = new File("your path");

     File[] files=f.listFiles();

     for(int i=0; i<files.length; i++)
     {
      File file = files[i];
      /*It's assumed that all file in the path are in supported type*/
      String filePath = file.getPath();
      if(filePath.endsWith(".txt")) // Condition to check .txt file extension
      tFileList.add(filePath);
     }
 return tFileList;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:34:05.653

您可以使用`FilenameFilter`接口来筛选所有文本文件，这些文本文件是与数组相关的任何文件。您可以在此处查看[我的答案](https://stackoverflow.com/a/14353213/1649309)，以仅列出 SD 卡中的图像文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T04:25:34.770

```
import org.apache.commons.io.FilenameUtils

String extension=FilenameUtils.getExtension(filepath); 
```**

# c++ - 动态文件头eclipse (c++)

> ID：14374069
> 
> 赞同：1
> 
> 时间：2013-01-17T07:24:46.673
> 
> 标签：c++, eclipse, file, dynamic, header

我正在使用 eclipse 使用 c 或 c++ 对微控制器进行编程。

我的问题是，有什么方法可以将评论模板添加到现有文件中。如果有办法做到这一点，有没有办法使标题动态（例如：上次编辑：系统时间（保存时））

PS：我已经阅读了那个版权插件。Mabey 一些额外的信息也可以澄清一些事情:)

# python - django 在开发中运行多个站点

> ID：14374071
> 
> 赞同：0
> 
> 时间：2013-01-17T07:24:54.267
> 
> 标签：python, django

我目前正在开发一个由同一项目中的多个站点组成的网站，因此我有几个 settings.py 文件，每个文件都有不同的 SITE_ID。在开发过程中，每次我必须通过 8 个设置文件并一个一个地启动运行服务器来进行全面测试并在站点之间导航。

有没有办法让我一次运行它们？我试图为此做一个命令行实用程序，但 management.call_command 接口不允许在后台启动进程。

任何想法我该如何构建东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:48:47.857

您不能直接通过 python 界面将其作为后台，但您可以简单地为每个站点运行一个进程。例如，在 bash 中，类似

```
for site in settings_{a,b,c,d}; do
    python manage.py runserver --settings $site &
done 
```

如果你想在 python 中运行它，试试这个[`subprocess`](http://docs.python.org/2/library/subprocess.html)模块，或者你可以`management.call_command`通过一个[`multiprocessing.Pool`](http://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers).

正如 Variant 所提到的，您还需要在不同的端口上运行它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:46:48.123

您可以在不同的端口中运行多个站点。为此，您可以像这样启动网站：

```
/manage.py runserver portnum 
```

您可以在其中更改每个站点的端口号（即 8002、8003 等...）

# php - 重命名 PHP 文件启用 jquery 表单验证？

> ID：14374072
> 
> 赞同：0
> 
> 时间：2013-01-17T07:24:56.517
> 
> 标签：php, javascript, jquery, jquery-validate, ajaxform

这是一个非常奇怪的问题。我有一个注册表单 signup.php，它使用 jQuery 验证插件来验证它。

在过去的 2 个月中，表单序列化突然失败了两次（请参见下面的代码），并且`input`无论我在其中输入什么，都没有提交任何值。奇怪的是，如果我简单地重命名 signup.php 文件（例如，重命名为 signup0.php），那么表单序列化再次工作并且表单验证。我的 signup.php 文件包含在我的主 template.php 文件中，使用以下代码：

PHP

```
<? include $_SERVER['DOCUMENT_ROOT'] . '/application/views/forms/signup.php';?> 
```

JS：

```
beforeSubmit:function(formData, $form, options)
  var thisFormData = $.param(data.formData); 
  console.log('live data: ' + thisFormData); 
  //this yields no data regardless of what I enter in any of the input fields
  //subsequently $($form).validate() fails 
```

有谁知道这里发生了什么？我还有一个 login.php 表单包含在这个 template.php 文件中，它永远不会遇到这个问题。这必须是 PHP 而不是 JS 问题，因为重命名 PHP 文件可以纠正它，对吧？我唯一能想到的是，多个隐藏的 signup.php 实例正在以某种方式创建，但这似乎是一个疯子的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:58:12.300

Chrome设置->清除数据..但如果它在其他浏览器上重现，我不相信它会帮助你..

# c# - 连接到 SQL Server Express 2012 超时

> ID：14374075
> 
> 赞同：0
> 
> 时间：2013-01-17T07:25:05.270
> 
> 标签：c#, linq-to-sql, exception-handling, ado.net, sql-server-express

我的应用程序是 asp.net MVC3，我使用的是 SQLExpress 2012。我收到以下错误

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

当我尝试运行以下命令时：

```
public static List<vw_MasterView> GetMasterView(DateTime? fromDate, DateTime? toDate)
{
    if (fromDate == null) fromDate = new DateTime(1900, 1, 1);
    if (toDate == null) toDate = DateTime.Now;
    using (DALDataContext ctx = new DALDataContext())
    {
        var q = from c in ctx.vw_MasterViews
                where c.FirstVisitDate >= fromDate && c.LastVisitDate <= toDate
                select c;
        return q.ToList();
    }
} 
```

我确实将连接时间（服务器/高级属性）增加到 6000。

当我从设计器（在 SQL Server 中）运行视图时，我收到相同的错误消息，但是当我运行查询（在 SQL Server 中）时，它工作正常，执行需要 54 秒。

我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:38:25.033

您可能需要设置 DBContext 的连接超时：

```
ctx.CommandTimeout = 200; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T07:38:54.570

`DataContext`类的默认值`CommandTimeout`设置为 30 秒。完成时间超过 30 秒的任何数据库查询（正如您所写的大约需要 60 秒）将引发*System.Data.SqlClient.SqlException: Timeout expired Exception*。

如果您查看自动生成的`DALDataContext`子类，您将看到一些部分方法声明，您的兴趣点应该是`OnCreated`方法。您可以`OnCreated`在另一个与自动生成的类全名相同的部分类中定义方法的主体，并通过以下方式在那里设置所需的超时值：

```
partial class DALDataContext : System.Data.Linq.DataContext
{
    partial void OnCreated()
    {
        this.CommandTimeout = 100;
    }
} 
```

# haskell - Haskell 是否为 Int 的范围提供最小/最大常量？

> ID：14374077
> 
> 赞同：43
> 
> 时间：2013-01-17T07:25:11.743
> 
> 标签：haskell, integer

Haskell 是否提供任何常数来了解 的极限`Int`？我知道`Int`是平台相关的，但是我想利用它并在我的特定情况下在极端情况下初始化一些值。C 中的等效常量（例如）是`INT_MAX`and `INT_MIN`。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-17T07:29:23.577

不同类型的最大和最小界限通过[`Bounded`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Bounded)类型类使用值`minBound`和访问`maxBound`。

这些值根据它们所在的上下文是多态的，因此在某些情况下，如果编译器无法推断出类型，您可能必须明确指出类型。例如

```
x = minBound :: Int 
```

# javascript - 为什么点击子页面时，该页面的 URL 始终保持不变？

> ID：14374082
> 
> 赞同：0
> 
> 时间：2013-01-17T07:25:38.257
> 
> 标签：javascript, html, css, url

无论我在[此站点](http://niniane.org/)上单击什么超链接，我的浏览器栏中显示的 URL 始终与起始 URL 相同。除非我右键单击链接并打开一个新选项卡。这是我第一次遇到这种情况，所以我不确定这种技术叫什么以及它是如何用html代码实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:27:26.993

整个页面是在一个框架集中构建的。托管页面保持不变，导航在框架内完成。

如果您查看页面的源代码，您会看到它看起来像这样：

```
<frameset rows="100%,*" border="0">
  <frame src="http://ofb.net/~niniane" frameborder="0" />
  <frame frameborder="0" noresize />
</frameset> 
```

整个浏览在占据屏幕 100% 的第一帧完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:29:55.050

整个页面使用框架集而不是 HTML。单击任何链接时，页面将在同一框架中打开

# php - 检索导入的 CSV 的 ID（加载数据输入文件）

> ID：14374083
> 
> 赞同：1
> 
> 时间：2013-01-17T07:25:38.653
> 
> 标签：php, mysql, load-data-infile

我有以下情况：

我必须将 CSV 文件导入到表中。为此，我使用 LOAD DATA LOCAL INFILE。

有没有办法检索所有插入行的id（列'id'），因为我在下一步需要它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:34:32.547

创建一个 BEFORE INSERT 或 AFTER INSERT 触发器并将插入的 ID 值存储到另一个表中 -

```
CREATE TRIGGER trigger1
AFTER INSERT
ON table1
FOR EACH ROW
BEGIN
  INSERT INTO table2(id) VALUES (NEW.id);
END 
```

# ios - 如何修复此错误：“ld：找不到文件：-fobjc-link-runtime”

> ID：14374087
> 
> 赞同：1
> 
> 时间：2013-01-17T07:25:57.353
> 
> 标签：ios, objective-c, xcode, xcode4.5

我正在尝试构建我的项目，但我收到了错误`ld: file not found: -fobjc-link-runtime`。
我以前从未见过这个，搜索它并没有返回太多。有谁知道这会导致什么以及如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:40:36.563

这可能是一些xcode问题。保存代码并重新启动 xcode。它可能会解决您的问题

# actionscript-3 - Actionscript 2.0到3.0，请帮忙，我转换错了吗？

> ID：14374089
> 
> 赞同：-2
> 
> 时间：2013-01-17T07:26:00.213
> 
> 标签：actionscript-3, actionscript, actionscript-2

我正在做 Actionscript 2.0 到 3.0 的工作，但我对 3.0 的想法很少，请好心人帮忙翻译一下！我试图完成一个版本，但我的工作在更改代码后无法“拖放”。

```
stop();
var randomPositionFrame = int(Math.random()*9)+1;
content_mc.gotoAndStop(randomPositionFrame);
for(var i=1; i<=5; i++){
eval("content_mc.matching_term_"+i)._alpha = 0;
eval("content_mc.matching_term_"+i).onPress = function(){
    if(this._currentframe == 1){
        this.startDrag();
    }
}
eval("content_mc.matching_term_"+i).onRelease = onMouseUp = function(){
    this.stopDrag();
}

eval("content_mc.matching_desc_"+i)._alpha = 0;
eval("content_mc.matching_desc_"+i).onPress = function(){
    if(this._currentframe == 1){
        this.startDrag();
    }
}
eval("content_mc.matching_desc_"+i).onRelease = onMouseUp = function(){
    this.stopDrag();
}
}

var winGame = false;
var alphaSpeed = 20;
var mouseListener:Object = new Object();
mouseListener.onMouseDown = function () { this.isDown = true;};
mouseListener.onMouseUp = function () {
this.isDown = false;
//Game Logic Check Correct
for(var i=1; i<=5; i++){
    //term match description
    if(eval("content_mc.matching_desc_"+i).mc._currentframe == 2 && eval("content_mc.matching_term_"+i).mc._currentframe == 2){
        if(eval("content_mc.matching_term_"+i)._currentframe == 1){
            eval("content_mc.matching_term_"+i).gotoAndPlay(2);
            eval("content_mc.matching_desc_"+i).gotoAndPlay(2);
        }
    }
    //description match term
    else if(eval("content_mc.matching_desc_"+i).mc._currentframe == 2 && eval("content_mc.matching_term_"+i).mc._currentframe == 2){
        if(eval("content_mc.matching_desc_"+i)._currentframe == 1){
            eval("content_mc.matching_term_"+i).gotoAndPlay(2);
            eval("content_mc.matching_desc_"+i).gotoAndPlay(2);
        }
    }
} 
```

}; Mouse.addListener(mouseListener);

```
this.onEnterFrame = function(){
//display terms at start
if(content_mc.matching_term_1._alpha < 100){
    content_mc.matching_term_1._alpha +=alphaSpeed;
}
if(content_mc.matching_term_1._alpha >= 100){
    if(content_mc.matching_term_2._alpha < 100){
        content_mc.matching_term_2._alpha +=alphaSpeed;
    }
}
if(content_mc.matching_term_2._alpha >= 100){
    if(content_mc.matching_term_3._alpha < 100){
        content_mc.matching_term_3._alpha +=alphaSpeed;
    }
}
if(content_mc.matching_term_3._alpha >= 100){
    if(content_mc.matching_term_4._alpha < 100){
        content_mc.matching_term_4._alpha +=alphaSpeed;
    }
}
if(content_mc.matching_term_4._alpha >= 100){
    if(content_mc.matching_term_5._alpha < 100){
        content_mc.matching_term_5._alpha +=alphaSpeed;
    }
}
//display description at start
if(content_mc.matching_term_5._alpha >= 100){
    if(content_mc.matching_desc_1._alpha < 100){
        content_mc.matching_desc_1._alpha +=alphaSpeed;
    }
    if(content_mc.matching_desc_1._alpha >= 100){
        if(content_mc.matching_desc_2._alpha < 100){
            content_mc.matching_desc_2._alpha +=alphaSpeed;
        }
    }
    if(content_mc.matching_desc_2._alpha >= 100){
        if(content_mc.matching_desc_3._alpha < 100){
            content_mc.matching_desc_3._alpha +=alphaSpeed;
        }
    }
    if(content_mc.matching_desc_3._alpha >= 100){
        if(content_mc.matching_desc_4._alpha < 100){
            content_mc.matching_desc_4._alpha +=alphaSpeed;
        }
    }
    if(content_mc.matching_desc_4._alpha >= 100){
        if(content_mc.matching_desc_5._alpha < 100){
            content_mc.matching_desc_5._alpha +=alphaSpeed;
        }
    }
    /*if(content_mc.matching_desc_5._alpha >= 100){
        delete this.onEnterFrame;
    }*/
}

//Roll over effect
for(var i=1; i<=5; i++){
    if(eval("content_mc.matching_term_"+i).hitTest(this._xmouse, this._ymouse)){
        eval("content_mc.matching_term_"+i).mc.gotoAndStop(2);
    }
    else{
        eval("content_mc.matching_term_"+i).mc.gotoAndStop(1);
    }
    if(eval("content_mc.matching_desc_"+i).hitTest(this._xmouse, this._ymouse)){
        eval("content_mc.matching_desc_"+i).mc.gotoAndStop(2);
    }
    else{
        eval("content_mc.matching_desc_"+i).mc.gotoAndStop(1);
    }
}

//remove the matched movieclips
for(var i=1; i<=5; i++){
    if(eval("content_mc.matching_term_"+i)._currentframe == 10){
        eval("content_mc.matching_term_"+i)._y = -1000;
    }
    if(eval("content_mc.matching_desc_"+i)._currentframe == 10){
        eval("content_mc.matching_desc_"+i)._y = -1000;
    }
}

//Win Game
for(var i=1; i<=5; i++){
    if(eval("content_mc.matching_desc_"+i)._currentframe == 10){
        winGame = true;
    }
    else{
        winGame = false;
        return;
    }
}
if(winGame == true){
    this.gotoAndPlay("endRound1");
}
} 
```

**我已经像这样完成了 3.0：（但事实证明我无法进行拖放）**

```
stop();
var randomPositionFrame = int(Math.random()*9)+1;
content_mc.gotoAndStop(randomPositionFrame);
for(var i=1; i<=5; i++){
this["content_mc.matching_term_"+i]._alpha = 0;
       this["content_mc.matching_term_"+i].addEventListener(MouseEvent.MOUSE_DOWN,function():void     {
if(this._currentframe == 1){
        this.startDrag();
    }
}
);
    this["content_mc.matching_term_"+i].addEventListener(MouseEvent.MOUSE_UP,function():void {
stage.addEventListener(MouseEvent.MOUSE_UP, doMouseUp, false, 0,     true);              

);

this["content_mc.matching_desc_"+i]._alpha = 0;
        this["content_mc.matching_desc_"+i].addEventListener(MouseEvent.MOUSE_DOWN,function():void     {
if(this._currentframe == 1){
        this.startDrag();
    }
}
);

    this["content_mc.matching_desc_"+i].addEventListener(MouseEvent.MOUSE_UP,function():void {
stage.addEventListener(MouseEvent.MOUSE_UP, doMouseUp, false, 0, true);     
}
);
}

function doMouseUp($evt:MouseEvent):void
{
this.stopDrag();
}

var winGame = false;
var alphaSpeed = 20;
var mouseListener:Object = new Object();
mouseListener.onMouseDown = function () { this.isDown = true;};
mouseListener.onMouseUp = function () {
this.isDown = false;
//Game Logic Check Correct
for(var k=1; k<=5; k++){
    //term match description
    if(this["content_mc.matching_desc_"+k].mc._currentframe == 2 &&     this["content_mc.matching_term_"+k].mc._currentframe == 2){
        if(this["content_mc.matching_term_"+k]._currentframe == 1){
            this["content_mc.matching_term_"+k].gotoAndPlay(2);
            this["content_mc.matching_desc_"+k].gotoAndPlay(2);
        }
    }
    //description match term
    else if(this["content_mc.matching_desc_"+k].mc._currentframe == 2 && this["content_mc.matching_term_"+k].mc._currentframe == 2){
        if(this["content_mc.matching_desc_"+k]._currentframe == 1){
            this["content_mc.matching_term_"+k].gotoAndPlay(2);
            this["content_mc.matching_desc_"+k].gotoAndPlay(2);
        }
    }
}

};
this.Mouse.addListener(mouseListener);

this.addEventListener(Event.ENTER_FRAME,myFunction);
function myFunction(event:Event) {
//display terms at start
if(content_mc.matching_term_1._alpha < 100){
    content_mc.matching_term_1._alpha +=alphaSpeed;
}
if(content_mc.matching_term_1._alpha >= 100){
    if(content_mc.matching_term_2._alpha < 100){
        content_mc.matching_term_2._alpha +=alphaSpeed;
    }
}
if(content_mc.matching_term_2._alpha >= 100){
    if(content_mc.matching_term_3._alpha < 100){
        content_mc.matching_term_3._alpha +=alphaSpeed;
    }
}
if(content_mc.matching_term_3._alpha >= 100){
    if(content_mc.matching_term_4._alpha < 100){
        content_mc.matching_term_4._alpha +=alphaSpeed;
    }
}
if(content_mc.matching_term_4._alpha >= 100){
    if(content_mc.matching_term_5._alpha < 100){
        content_mc.matching_term_5._alpha +=alphaSpeed;
    }
}
//display description at start
if(content_mc.matching_term_5._alpha >= 100){
    if(content_mc.matching_desc_1._alpha < 100){
        content_mc.matching_desc_1._alpha +=alphaSpeed;
    }
    if(content_mc.matching_desc_1._alpha >= 100){
        if(content_mc.matching_desc_2._alpha < 100){
            content_mc.matching_desc_2._alpha +=alphaSpeed;
        }
    }
    if(content_mc.matching_desc_2._alpha >= 100){
        if(content_mc.matching_desc_3._alpha < 100){
            content_mc.matching_desc_3._alpha +=alphaSpeed;
        }
    }
    if(content_mc.matching_desc_3._alpha >= 100){
        if(content_mc.matching_desc_4._alpha < 100){
            content_mc.matching_desc_4._alpha +=alphaSpeed;
        }
    }
    if(content_mc.matching_desc_4._alpha >= 100){
        if(content_mc.matching_desc_5._alpha < 100){
            content_mc.matching_desc_5._alpha +=alphaSpeed;
        }
    }
    /*if(content_mc.matching_desc_5._alpha >= 100){
        delete this.onEnterFrame;
    }*/
}

//Roll over effect
for(var i=1; i<=5; i++){
    if(this["content_mc.matching_term_"+i].hitTest(mouseX, mouseY)){
        this["content_mc.matching_term_"+i].mc.gotoAndStop(2);
    }
    else{
        this["content_mc.matching_term_"+i].mc.gotoAndStop(1);
    }
    if(this["content_mc.matching_desc_"+i].hitTest(mouseX, mouseY)){
        this["content_mc.matching_desc_"+i].mc.gotoAndStop(2);
    }
    else{
        this["content_mc.matching_desc_"+i].mc.gotoAndStop(1);
    }
}

//remove the matched movieclips
for(var a=1; a<=5; a++){
    if(this["content_mc.matching_term_"+a]._currentframe == 10){
        this["content_mc.matching_term_"+a]._y = -1000;
    }
    if(this["content_mc.matching_desc_"+a]._currentframe == 10){
        this["content_mc.matching_desc_"+a]._y = -1000;
    }
}

//Win Game
for(var n=1; n<=5; n++){
    if(this["content_mc.matching_desc_"+n]._currentframe == 10){
        winGame = true;
    }
    else{
        winGame = false;
        return;
    }
}
if(winGame == true){
    this.gotoAndPlay("endRound1");
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:27:14.070

当然，提问不是专业的，没有人愿意为你做这种无趣的工作。您必须阅读一些有关从 as2 迁移到 as3 的文章。我做了你的工作，因为它很容易而且我有时间，希望它会有所帮助，你下次会自己做。

```
stop();
var randomPositionFrame = int(Math.random()*9)+1;
content_mc.gotoAndStop(randomPositionFrame);
for(var i=1; i<=5; i++){
content_mc["matching_term_"+i].alpha = 0;
content_mc["matching_term_"+i].addEventListener(MouseEvent.MOUSE_DOWN,function(e:MouseEvent):void     {
if(content_mc.currentFrame == 1){
        e.target.startDrag();
    }
}
);
content_mc["matching_term_"+i].addEventListener(MouseEvent.MOUSE_UP,function(e:MouseEvent):void {
    stage.addEventListener(MouseEvent.MOUSE_UP, doMouseUp, false, 0,     true);
});

content_mc["matching_desc_"+i].alpha = 0;
content_mc["matching_desc_"+i].addEventListener(MouseEvent.MOUSE_DOWN,function(e:MouseEvent):void     {
if(content_mc.currentFrame == 1){
        e.target.startDrag();
    }
}
);

content_mc["matching_desc_"+i].addEventListener(MouseEvent.MOUSE_UP,function(e:MouseEvent):void {
stage.addEventListener(MouseEvent.MOUSE_UP, doMouseUp, false, 0, true);     
}
);
}

function doMouseUp(e:MouseEvent):void
{
e.target.stopDrag();
}

var winGame = false;
var alphaSpeed = 20;

addEventListener(MouseEvent.MOUSE_DOWN, function (e:MouseEvent) { this.isDown = true;});
addEventListener(MouseEvent.MOUSE_UP, function (e:MouseEvent) { this.isDown = false;});

//Game Logic Check Correct
for(var k=1; k<=5; k++){
    //term match description
    if(content_mc["matching_desc_"+k].mc.currentFrame == 2 &&     content_mc["matching_term_"+k].mc.currentFrame == 2){
        if(content_mc["matching_term_"+k].currentFrame == 1){
            content_mc["matching_term_"+k].gotoAndPlay(2);
            content_mc["matching_desc_"+k].gotoAndPlay(2);
        }
    }
    //description match term
    else if(content_mc["matching_desc_"+k].mc.currentFrame == 2 && content_mc["matching_term_"+k].mc.currentFrame == 2){
        if(content_mc["matching_desc_"+k].currentFrame == 1){
            content_mc["matching_term_"+k].gotoAndPlay(2);
            content_mc["matching_desc_"+k].gotoAndPlay(2);
        }
    }
}

this.addEventListener(Event.ENTER_FRAME,myFunction);
function myFunction(event:Event) {
//display terms at start
if(content_mc.matching_term_1.alpha < 100){
    content_mc.matching_term_1.alpha +=alphaSpeed;
}
if(content_mc.matching_term_1.alpha >= 100){
    if(content_mc.matching_term_2.alpha < 100){
        content_mc.matching_term_2.alpha +=alphaSpeed;
    }
}
if(content_mc.matching_term_2.alpha >= 100){
    if(content_mc.matching_term_3.alpha < 100){
        content_mc.matching_term_3.alpha +=alphaSpeed;
    }
}
if(content_mc.matching_term_3.alpha >= 100){
    if(content_mc.matching_term_4.alpha < 100){
        content_mc.matching_term_4.alpha +=alphaSpeed;
    }
}
if(content_mc.matching_term_4.alpha >= 100){
    if(content_mc.matching_term_5.alpha < 100){
        content_mc.matching_term_5.alpha +=alphaSpeed;
    }
}
//display description at start
if(content_mc.matching_term_5.alpha >= 100){
    if(content_mc.matching_desc_1.alpha < 100){
        content_mc.matching_desc_1.alpha +=alphaSpeed;
    }
    if(content_mc.matching_desc_1.alpha >= 100){
        if(content_mc.matching_desc_2.alpha < 100){
            content_mc.matching_desc_2.alpha +=alphaSpeed;
        }
    }
    if(content_mc.matching_desc_2.alpha >= 100){
        if(content_mc.matching_desc_3.alpha < 100){
            content_mc.matching_desc_3.alpha +=alphaSpeed;
        }
    }
    if(content_mc.matching_desc_3.alpha >= 100){
        if(content_mc.matching_desc_4.alpha < 100){
            content_mc.matching_desc_4.alpha +=alphaSpeed;
        }
    }
    if(content_mc.matching_desc_4.alpha >= 100){
        if(content_mc.matching_desc_5.alpha < 100){
            content_mc.matching_desc_5.alpha +=alphaSpeed;
        }
    }
    /*if(content_mc.matching_desc_5.alpha >= 100){
        delete this.onEnterFrame;
    }*/
}

//Roll over effect
for(var i=1; i<=5; i++){
    if(content_mc["matching_term_"+i].hitTestPoint(mouseX, mouseY)){
        content_mc["matching_term_"+i].mc.gotoAndStop(2);
    }
    else{
        content_mc["matching_term_"+i].mc.gotoAndStop(1);
    }
    if(content_mc["matching_desc_"+i].hitTestPoint(mouseX, mouseY)){
        content_mc["matching_desc_"+i].mc.gotoAndStop(2);
    }
    else{
        content_mc["matching_desc_"+i].mc.gotoAndStop(1);
    }
}

//remove the matched movieclips
for(var a=1; a<=5; a++){
    if(content_mc["matching_term_"+a].currentFrame == 10){
        content_mc["matching_term_"+a].y = -1000;
    }
    if(content_mc["matching_desc_"+a].currentFrame == 10){
        content_mc["matching_desc_"+a].y = -1000;
    }
}

//Win Game
for(var n=1; n<=5; n++){
    if(content_mc["matching_desc_"+n].currentFrame == 10){
        winGame = true;
    }
    else{
        winGame = false;
        return;
    }
}
if(winGame == true){
    this.gotoAndPlay("endRound1");
}
} 
```

# jquery - 使 div 动画并出现顺时针旋转。即 Div 的radialwipe 时钟效果

> ID：14374092
> 
> 赞同：6
> 
> 时间：2013-01-17T07:26:25.733
> 
> 标签：jquery, css, animation, jquery-animate, jquery-effects

我一直在谷歌上搜索 div 的外观效果，比如[这里](http://jsfiddle.net/QMZg2/)。
这里的图像是使用`< canvas >`
“ **radialwipe 时钟效果**”绘制的
，我该如何实现这一点。
我找到[了这个](http://www.netzgesta.de/transm/eyewitness.html)javascript 库。但它只为图像提供这种效果。
我需要对 div 具有相同的效果。
有什么方法可以做到这一点。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:11:10.297

我创建了一个与您想要的类似的 1/2 时钟动画效果。我希望找到提供精确动画的解决方案。

## 代码

您需要一些动画标记：

```
<div class="wrapper">
  <div class="content">
    This is a good day. Maybe.
  </div>
  <div class="rotate"></div>
  <div class="mask"></div>
</div> 
```

*   **wrapper** - 用于设置内容的位置
*   **内容**- 您在 div 中的内容（或任何其他元素）
*   **rotate** - 模拟 1/2 时钟的动画
*   **mask** - 隐藏的动画`content`

这是 CSS（用[SCSS](http://sass-lang.com/)编写）：

### 变量

```
$width: 200px;
$height: 200px;
$duration: 2s;
$delay: 1s;
$color-alpha: #308991;
$color-beta: #80c144;
$color-gamma: #b83d54;

.wrapper {
  position:relative;
  width: $width;
  height: $height;
  margin:0 auto;
}

.content {
  width: $width;
  height: $height;
  background: $color-beta;
  border-radius: 50%;
  padding: 2em;
  overflow: hidden;
  text-align:center;
}

/* Rotates 360 deg */
.rotate {
  position: absolute; 
  z-index: 2;
  top: 0;
  right: 0;
  width: $width / 2;
  height: $height;
  box-shadow:0 0 0 .15em $color-alpha;
  background: $color-alpha;
  transform-origin: 0 50%;
  animation: rotate $duration linear 1 forwards;
  animation-delay: 1s;
}

@keyframes rotate {
  0%   { 
    transform: rotate(0deg);
  }
  62% {
    opacity:1;
  }
  99.99% {
    z-index: 2;
  }
  100% { 
    transform: rotate(360deg);
    opacity: 0;
    z-index: -1;
  }
}

/* The .content is hidden by .mask until the .rotate reveals it */
.mask {
  position:absolute;
  z-index:1;
  top: -1px;
  left: -1px;
  width: $width + 2px;
  height: $height + 2px;
  background: 
    linear-gradient(top, transparent 50%, $color-alpha 50%),
    linear-gradient(top, $color-alpha 50%, transparent 50%);
  background: 
    linear-gradient(to top, transparent 50%, $color-alpha 50%),
    linear-gradient(to top, $color-alpha 50%, transparent 50%);
  background-position:100% 100%, 0 0;
  background-size: 50% 200%;
  background-repeat: no-repeat;
  border-radius: 50%;
  box-shadow:0 0 0 .65em $color-alpha;

  animation: mask $duration / 1.25 linear 1 forwards; 
  animation-delay: (-$duration / 7.5) + $delay;
}

@keyframes mask {
  50% {
    background-position: 100% 0, 0 0;
  }

  99.99% {
    z-index: 1;
  }

  100% {
    background-position: 100% 0, 0 100%;
    z-index: -1;
  }
} 
```

## 演示

您可以在 CodePen 上看到现场演示：[1/2 时钟动画](http://codepen.io/TimPietrusky/pen/jqpog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:29:14.993

检查[变换：旋转（n度）](http://www.w3schools.com/cssref/css3_pr_transform.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:56:07.727

如果我理解得很好，您正在寻找饼图计时器效果。这是我不久前做的一个纯 CSS： http: [//css-tricks.com/css-pie-timer/](http://css-tricks.com/css-pie-timer/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T05:11:54.997

该脚本可以将 html 转换为图像。 [http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

# android - 如何在屏幕旋转期间保存/恢复（更新）对对话框的引用？（我需要在活动的 onCreate 方法中引用。）

> ID：14374093
> 
> 赞同：0
> 
> 时间：2013-01-17T07:26:30.103
> 
> 标签：android, dialog, screen-rotation

```
protected Dialog onCreateDialog(int id) {
...
AlertDialog.Builder adb = new AlertDialog.Builder(this);
...
mydialog = adb.create();
...
} 
```

但是 onCreateDialog 在 onCreate 之后运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:46:48.763

如果要向后兼容，请按以下方式进行。

```
class MyActivity extends Activity {
  protected static final class MyNonConfig {
    // fill with public variables keeping references and other state info, set to null
  }
  private boolean isConfigChange;
  private MyNonConfig nonConf;
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_layout);
    nonConf = (MyNonConfig)getLastNonConfigurationInstance();
    if (nonConf == null) { nonConf = new NonConfig(); }
    // handle the information of the nonConf objects/variables
    ...
  }
  @Override
  protected void onStop() {
    super.onStop();
    isConfigChange = false;
  }
  @Override
  public Object onRetainNonConfigurationInstance() {
    isConfigChange = true;
    return nonConf;
  }
  @Override
  protected void onDestroy() {
    super.onDestroy();
    // handle objects in nonConf, potentially based on isConfigChange flag
    ...
  } 
```

nonConf 对象将保留所有配置更改（但不是您的应用程序的真正停止）。此外，isConfigChange 标志*可靠地*告诉您您的活动是否将立即重新创建。因此，您可以根据此信息充分取消/分离任务或处理其他资源。

**编辑：**请注意，*如果* `onDestroy()`被调用，*那么*您可以依赖该`isConfigChange`标志。此外，*如果*Android 正在处理配置更改*，那么* `onDestroy()` *将*被调用。但是，*如果*Android 即将结束您的 Activity，则对 onDestroy() 的调用是*可选*的，因为 Android 认为您的 Activity 在它调用`onPause()`（预Honeycomb）或`onStop()`（Honeycomb 及更高版本）之后是可终止的。但这不是问题，因为如果您的活动将被终止，那么您的众多对象的状态将不再对任何人感兴趣。但是，如果您想友好，这是决定放入什么的另一个方面`onPause()`和`onStop()`。

希望这可以帮助。

# gwt - Gwt 和 Amazon S3 集成出现错误

> ID：14374095
> 
> 赞同：1
> 
> 时间：2013-01-17T07:26:50.447
> 
> 标签：gwt, amazon-s3

```
 package com.wa.test.client;

 import com.google.gwt.core.client.EntryPoint;
 import com.nubotech.gwt.oss.client.OnlineStorageService;
 import com.nubotech.gwt.oss.client.OnlineStorageServiceFactory;
 import com.nubotech.gwt.oss.client.auth.Credential;

 public class TestAmazon implements EntryPoint {

  public void onModuleLoad() {
    Credential credential = new Credential("xyz@gmail.com", "QFTG8an1yTB");
    OnlineStorageService storageService = OnlineStorageServiceFactory.getService(credential);
    storageService.createBucket("myFirstBucket");

  }
}

<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='testamazon'>
<!-- Inherit the core Web Toolkit stuff.                        -->
<inherits name='com.google.gwt.user.User'/>
<inherits name='com.nubotech.gwt.oss.Oss'/>

<!-- Inherit the default GWT style sheet.  You can change       -->
<!-- the theme of your GWT application by uncommenting          -->
<!-- any one of the following lines.                            -->
<inherits name='com.google.gwt.user.theme.clean.Clean'/>
<!-- <inherits name='com.google.gwt.user.theme.standard.Standard'/> -->
<!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
<!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/>     -->

<!-- Other module inherits                                      -->

<!-- Specify the app entry point class.                         -->
<entry-point class='com.wa.test.client.TestAmazon'/>

<!-- Specify the paths for translatable code                    -->
<source path='client'/>
<source path='shared'/>

![enter image description here][1]</module> 
```

这是我的代码，还包括 jar 文件`gwt-s3-api-0.9.3`。它给出如下错误：

```
12:40:38.347 [ERROR] [testamazon] Errors in 'jar:file:/D:/Technologies/Java/Amazon/jar/
gwt-s3-api-0.9.3.jar!/com/nubotech/gwt/oss/client/s3/MockS3OnlineStorageService.java'

[ERROR] [testamazon] - Line 28: The import com.google.gwt.user.client.HTTPRequest 
cannot be resolved 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:15:45.710

您正在使用不匹配的 jar 版本。com.google.gwt.user.client.HTTPRequest 在旧版本的 GWT gwt-servlet.jar 和 gwt-user.jar 中可用。它在 GWT 1.5 中被弃用，在最新的 GWT 中被淘汰。您应该使用 GWT RequestBuilder。

```
<inherits name='com.google.gwt.http.HTTP'/> 
```

在 Java 代码中。

```
import com.google.gwt.http.client.RequestBuilder 
```

参考 - [http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/HTTPRequest.html](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/HTTPRequest.html)

您使用的第三方 jar 非常旧，并且 3 年没有更新。

**在您的情况下，gwt-s3-api- [0.9.3.jar](http://code.google.com/p/gwt-s3/source/browse/trunk/main/src/com/nubotech/gwt/oss/client/s3/MockS3OnlineStorageService.java)中的 MockS3OnlineStorageService.java 正在使用 GWT 2.4 中不再支持的 HTTPRequest 类**

# python - 有没有更优雅的方法来添加条件字典元素

> ID：14374096
> 
> 赞同：1
> 
> 时间：2013-01-17T07:26:52.847
> 
> 标签：python, dictionary, keyword-argument

以下面的代码为例：

```
def facebook_sync_album(album_id, thumbnails_only=False):
    args = {'fields':'id,images,source'}
    if thumbnails_only:
        args['limit'] = ALBUM_THUMBNAIL_LIMIT
    response = facebook_graph_query(album_id, 'photos', args=args) 
```

相反，我想知道是否有可能类似于以下内容：

```
def facebook_sync_album(album_id, thumbnails_only=False):
    photo_limit_arg = {'limit': ALBUM_THUMBNAIL_LIMIT}  if thumbnails_only else None
    response = facebook_graph_query_by_user_profile(album_id, 'photos', args={'fields':'id,images,source', photo_limit_arg}) 
```

`args`因此，为了添加一个可选元素 ( )而不是需要预定义，`limit`我可以改为传递一个扩展为 value:key 的变量。有点类似于使用 ` **kwargs将 dict 扩展为 kwargs 的方式**

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:30:52.833

您正在寻找`.update()`Python 的 dict 的 -method。你可以这样做：

```
def facebook_sync_album(album_id, thumbnails_only=False):
    args = {'fields':'id,images,source'}
    args.update({'limit': ALBUM_THUMBNAIL_LIMIT}  if thumbnails_only else {})
    response = facebook_graph_query_by_user_profile(album_id, 'photos', args=args) 
```

**编辑**

正如评论中所建议的，字典的`+`-operator 可能类似于：

```
class MyDict(dict):
    def __add__(self, other):
        if not isinstance(other, dict):
            return super(MyDict, self).__add__(other)
        return MyDict(self, **other)

    def __iadd__(self, other):
        if not isinstance(other, dict):
            return super(MyDict, self).__iadd__(other)
        self.update(other)
        return self

if __name__ == "__main__":
    print MyDict({"a":5, "b":3}) + MyDict({"c":5, "d":3})
    print MyDict({"a":5, "b":3}) + MyDict({"a":3})

    md = MyDict({"a":5, "b":3})
    md += MyDict({"a":7, "c":6})
    print md 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:40:15.970

[感谢https://stackoverflow.com/a/1552420/698289](https://stackoverflow.com/a/1552420/698289)，终于想出了以下内容

```
def facebook_sync_album(album_id, thumbnails_only=False):
    photo_limit_arg = {'limit': ALBUM_THUMBNAIL_LIMIT}  if thumbnails_only else {}
    response = facebook_graph_query_by_user_profile(album_id, 'photos', args=dict({'fields':'id,images,source'}, **photo_limit_arg)) 
```

# javascript - 使用 JS 在 SurveyGizmo 中构建自定义问题 - 存储输入数据

> ID：14374097
> 
> 赞同：1
> 
> 时间：2013-01-17T07:26:53.800
> 
> 标签：javascript, jquery, forms, survey

我一直在尝试开发一种使用 SurveyGizmo 的自定义问题功能来引发学术研究偏好的方法。我已经设法编写了 html 布局和基本功能的脚本，但是我在 SurveyGizmo 框架中存储用户输入数据的任务失败了。

问题涉及在两个目标之间做出选择（通过单选按钮），然后对目标进行加权（通过数字文本输入）。我能够存储选中的单选按钮，这是迄今为止我尝试过的所有事情中取得的最好成绩。

我已经为此辛勤工作了很长时间，并在互联网上搜寻有用的指导，但没有成功。

这是代表问题格式的 html 代码的摘录：

```
<table>
    <tr>
        <th align="left">Objective</th>
        <th align="left">Worst</th>
        <th align="left">Best</th>
        <th align="center">Select</th>
        <th>Weight</th>
    </tr>
    <tr>
        <td>A</td>
        <td>300<name="row-1" data-col="1"></td>
        <td>500<name="row-1" data-col="2"></td>
        <td align="center"><input id="SelectObjA-%elementid%" type="radio" value="SelectA" name="select-Q1" data-col="3"  class="sg-input sg-input-radio"></td>
        <td align="center"><input id="WeightObjA-%elementid%" class="sg-input sg-input-text" type="text" name="WeightObjA" maxlength="3" size="3" data-col="4"></td>
    </tr>
    <tr>
        <td>B</td>
        <td>9 <name="row-2" data-col="1"></td>
        <td>2 <name="row-2" data-col="2"></td>
        <td align="center"><input id="SelectObjB-%elementid%" type="radio" value="SelectB" name="select-Q1" data-col="3" class="sg-input sg-input-radio"></td>
        <td align="center"><input id="WeightObjB-%elementid%" class="sg-input sg-input-text" type="text" name="WeightObjB" maxlength="3" size="3" data-col="4"></td>
    </tr>
</table> 
```

到目前为止，唯一有效的用于存储输入数据的 JavaScript 是：

```
{
    onload: function() {
        //Code to be executed
    },
    onsubmit: function() {
        //Code to be executed
        var select = $SG("input[name=select-Q1]:checked").val();
        this.setStorageValue(select);
    }
} 
```

我*真的很*感激在解决如何存储所有表单字段的用户输入数据的问题方面的任何帮助：单选和文本输入。

# gwt - 属性文件是否必须在 Maven 项目的资源文件夹中？

> ID：14374100
> 
> 赞同：0
> 
> 时间：2013-01-17T07:27:11.943
> 
> 标签：gwt, maven-2

在maven项目中，所有属性文件，xml文件都必须在资源文件夹中。意味着如果我想要我的属性文件，`src/main/java/com/search/search.properties` 那么我需要将它放入`resources/com/search/search.properties`。有必要吗？

因为现在它们位于 java 文件夹中，所以当我在托管模式下运行 maven 项目时，它运行正常。但是当我创建战争时，它不包含该属性文件`war/web-inf/classes/com/search/search.properties`。

当我把它放进去`resources/com/search/search.properties`然后只有它包含在war文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:38:12.523

根据[Maven 标准目录布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)，您必须将 Application/Library 相关资源放入`src/main/resources`，如果您不这样做，当 maven 想要打包您的应用程序（War、Jar 或...）时，只需将资源复制`src/main/resources`到您的包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:59:59.613

这真的取决于你如何管理事情。默认情况下，如果你使用 src/main/resources，maven 会小心。

还只需验证您在构建下的资源标签中是否有正确的包含/排除标签。

```
<build>
        <outputDirectory>${project.build.directory}/${project.artifactId}/WEB-INF/classes</outputDirectory>
        <finalName>${project.artifactId}</finalName>
        <resources>
            <resource>
                <directory>src/main/java</directory>
                <includes>
                    <include>**/*</include>
                </includes>
            </resource>
            <resource>
                <directory>src/main/resources/</directory>
                <includes>
                    <include>**/*.xml</include>
                    <include>**/*.properties</include>
                </includes>
            </resource>
        </resources>
<build> 
```

# java - Swing中输入法去除JFrame的透明效果

> ID：14374111
> 
> 赞同：1
> 
> 时间：2013-01-17T07:27:51.117
> 
> 标签：java, swing, ime

```
import javax.swing.JFrame;
import javax.swing.JTextField;

import com.sun.awt.AWTUtilities;

@SuppressWarnings("serial")
public class TranslucentIssueTest extends JFrame
{
    public static void main(String[] args)
    {
        (new TranslucentIssueTest()).setVisible(true);
    }

    public TranslucentIssueTest()
    {
        super();
        setUndecorated(true);
        setLayout(null);
        setSize(300, 300);
        AWTUtilities.setWindowOpaque(this, false);

        JTextField box = new JTextField();
        box.setBounds(30, 150, 100, 25);
        add(box);
    }
} 
```

上面的代码在透明框架上创建了一个文本字段。

但是当我使用输入法在框中输入一些汉字时，透明效果自动消失了。我的代码有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:16:19.943

我遇到了似乎相同的问题，并认为我会为在搜索时发现此问题的任何人发布我的解决方案。该问题似乎是由于 Swing 中 DirectDraw 管道中的错误所致。我使用的是较旧版本的 Java 7（更新 5），因此这可能已在更高版本之一中得到修复。

问题似乎不在于 IME，而在于 IME 处于活动状态时由文本字段进行的渲染调用。

解决此问题的最简单方法是在运行任何 GUI 代码之前通过进行以下调用来禁用 DirectDraw 渲染：

```
System.setProperty("sun.java2d.noddraw", "true"); 
```

如果您不想完全禁用 DirectDraw 渲染，则可以`JTextField`通过覆盖其`paintComponent`写入缓冲区的方法来解决特定问题，如下例所示。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import javax.swing.*;

public class Test {

    public static class JTextField2 extends JTextField {
        private static final long serialVersionUID = 1L;
        private BufferedImage buffer = null;

        @Override public void paintComponent(Graphics g) {
            Component window = this.getTopLevelAncestor();
            if (window instanceof Window && !((Window)window).isOpaque()) {
                // This is a translucent window, so we need to draw to a buffer
                // first to work around a bug in the DirectDraw rendering in Swing.
                int w = this.getWidth();
                int h = this.getHeight();
                if (buffer == null || buffer.getWidth() != w || buffer.getHeight() != h) {
                    // Create a new buffer based on the current size.
                    GraphicsConfiguration gc = this.getGraphicsConfiguration();
                    buffer = gc.createCompatibleImage(w, h, BufferedImage.TRANSLUCENT);
                }

                // Use the super class's paintComponent implementation to draw to
                // the buffer, then write that buffer to the original Graphics object.
                Graphics bufferGraphics = buffer.createGraphics();
                try {
                    super.paintComponent(bufferGraphics);
                } finally {
                    bufferGraphics.dispose();
                }
                g.drawImage(buffer, 0, 0, w, h, 0, 0, w, h, null);
            } else {
                // This is not a translucent window, so we can call the super class
                // implementation directly.
                super.paintComponent(g);
            }        
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override public void run() {
                final JFrame frame = new JFrame();
                frame.setUndecorated(true);
                frame.setBackground(new Color(96, 128, 160, 192));

                JTextField textField = new JTextField2();                
                JButton exitButton = new JButton("Exit");
                exitButton.addActionListener(new ActionListener() {
                    @Override public void actionPerformed(ActionEvent e) {
                        frame.dispose();
                    }
                });

                frame.add(exitButton, BorderLayout.PAGE_START);
                frame.add(textField, BorderLayout.PAGE_END);

                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# wcf - 带有自定义身份验证过滤器的 WCF Resftul webHttpBinding 服务

> ID：14374112
> 
> 赞同：0
> 
> 时间：2013-01-17T07:27:57.413
> 
> 标签：wcf, web-services

大师们，

我是 WCF 的新手，但知道 Web API 的 [Authorize] 属性。同样，我想为 WCF REST 基本身份验证服务进行复制，期望安全标头在经过身份验证后将传入每个后续请求。

我们的目标是使用 webHttpBinding 制作 Restful 服务。请提供任何相关示例以实现此目的。然后我们的目标是在 Https 上运行相同的。

Web API 中的事情似乎要简单得多，但在 WCF 中则不然。我用谷歌搜索并得到了一些答案，比如 [WCF REST 中的操作过滤器之类的东西？](https://stackoverflow.com/questions/7636076/something-like-an-operation-filter-in-wcf-rest)

任何人都可以给我更简单的方法来实现这一点，就像我们在 Web API 中所做的那样。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T07:31:42.987

在 WCF 中激活身份验证有一些不错的文章和项目：

[http://blogs.msdn.com/b/pedram/archive/2007/10/05/wcf-authentication-custom-username-and-password-validator.aspx](http://blogs.msdn.com/b/pedram/archive/2007/10/05/wcf-authentication-custom-username-and-password-validator.aspx)

[http://www.codeproject.com/Articles/36289/8-steps-to-enable-windows-authentication-on-WCF-Ba](http://www.codeproject.com/Articles/36289/8-steps-to-enable-windows-authentication-on-WCF-Ba)

然后：http: [//msdn.microsoft.com/en-us/library/bb398990.aspx](http://msdn.microsoft.com/en-us/library/bb398990.aspx)

编辑：
请参阅本文：[RESTful 服务的自定义基本身份验证](http://weblogs.asp.net/cibrax/archive/2009/03/20/custom-basic-authentication-for-restful-services.aspx)

希望有所帮助。

# r - 如何获得R的两个矩阵中每个元素的总和

> ID：14374113
> 
> 赞同：2
> 
> 时间：2013-01-17T07:27:58.403
> 
> 标签：r, matrix, sum

我想得到两个矩阵的每个元素的组合总和。

例如，[ 2, 4, 6] 和 [3, 6, 9] 的组合为 [5, 7, 12, 8, 10, 15, 11, 13, 18]。

我只想得到这个结果

```
x<-rbind(c(2,4,9))
y<-rbind(c(3,6,9))
x+y[1]
     [,1] [,2] [,3]
[1,]    5   7    12
x+y[2]
     [,1] [,2] [,3]
[1,]    8   10   15
x+y[3]
     [,1] [,2] [,3]
[1,]   11   13   18 
```

我有 30 个矩阵，因此元素将扩展到 3^30 = 2.05891132 × 10^14 个元素。

我相信它可能存在更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:24:01.380

只是想我会使用`outer`. 复制@Arun，这里有一些基准：

```
x <- rnorm(1000)
y <- rnorm(1000)
REP <- function() { z1 <- rep(x, length(x)) + rep(y, each=length(y)) }
GRID <- function() { z2 <- rowSums(expand.grid(x,y)) }
OUTER <- function() { z3 <- c(outer(x,y,"+")) }
require(rbenchmark)
benchmark(REP(), GRID(), OUTER(), replications = 10, order = "elapsed")

     test replications elapsed relative user.self sys.self user.child sys.child
3 OUTER()           10    0.24    1.000      0.19     0.05         NA        NA
1   REP()           10    0.31    1.292      0.21     0.10         NA        NA
2  GRID()           10    2.10    8.750      1.57     0.44         NA        NA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:44:01.083

正如@Arun 建议的那样，您的问题很难解释。但是，这就是你的意思吗？（我想你忘了在你的例子中包括 18 。）

```
> a <- c(2,4,9)
> b <- c(3,6,9)
> sort(rowSums(expand.grid(a,b)))
[1]  5  7  8 10 11 12 13 15 18 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:46:05.890

这是你想要的？它从每个矩阵中选择元素的所有组合并返回总和

```
> x <- c(2, 4, 9)
> y <- c(3, 6, 9)
> 
> a <- rep(x,length(y))
> b <- rep(y, each=length(x))
> 
> c <- a + b
> c <- c[order(c)]
> c
[1]  5  7  8 10 11 12 13 15 18 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T08:50:30.353

另一种选择是使用`combn`.

```
sapply(a,function(x)combn(c(x,b),2,FUN=sum)[1:length(a)])
     [,1] [,2] [,3]
[1,]    5    7   12
[2,]    8   10   15
[3,]   11   13   18 
```

# sql - 两个弱实体集合之间的mn关系是什么意思？

> ID：14374118
> 
> 赞同：0
> 
> 时间：2013-01-17T07:28:19.677
> 
> 标签：sql, database, relational-database, er-diagrams

我正在教科书中做一些练习，并遇到这个 ER 图：

![在此处输入图像描述](../Images/91d5ea18ad3c74f57d64c16fce9eceb3.png)

我试图将上图转换为关系数据库模式，但我认为我没有任何意义：

• 作业：assignmentNo、等级

• 注册：assignmentNo

• 学生：studentID、takeAssignmentNo

• 课程：dept、courseNo、offerAssigmentNo

你能解释一下我应该如何理解这张图吗？它的实际用途是什么？如何`score`在 SQL Server 中实现关系，或将其转换为关系数据库模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:07:29.480

试试这个：

招生：学生证，课程号

分数：作业号、学生证、课程号。

注意：一些设计者不赞成复合主键。不是我。

# c# - 从数据库值替换字符串

> ID：14374120
> 
> 赞同：0
> 
> 时间：2013-01-17T07:28:24.077
> 
> 标签：c#, regex, string

使用**C# 4.0**、**vs10**、**ASP .Net MVC 4.0**

这是一个示例字符串：

```
string x = "herr <FirstName> <LastName> , \n With due respect and humble submission, I , the student of <Semester>,<Year> of <DepartmentName> of <UniversityName>." 
```

我有一个包含数百万行的数据库，其中包含不同的（这些）信息。

我必须检查字符串。在找到“<>”这个标签的地方，对于数据表的每一行，“<>”标签内的字段都会被替换。我不明白我在说什么。请让我举个例子：

对于数据表的每一行，当在字符串中找到时，当前DataRow 中的FirstName 将在这里被替换。喜欢 ：

```
foreach(DataRow drow in dt.Rows)
{
    string body = "herr " + drow["FirstName"] + " " + drow["LastName"] + ", \n With due respect and humble submission, I , the student of " + drow["Semester"] + "," + drow["Year"] + " of " + drow["DepartmentName"] + " of " + drow["UniversityName"] + ".";

sendmail(body);
} 
```

我对正则表达式一无所知。有什么简单、容易和明智的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:50:04.447

一个简单的解决方案是使用 Replace 方法：

```
string x = "herr <FirstName> <LastName> , \n With due respect and humble submission, I , the student of <Semester>,<Year> of <DepartmentName> of <UniversityName>."

foreach(DataRow drow in dt.Rows)
{
   string body = x.Replace("<FirstName>", drow["FirstName"]).
                Replace("<LastName>", drow["LastName"]).
                Replace("<Semester>", drow["Semester"]).
                Replace("<Year>", drow["Year"]).
                Replace("<DepartmentName>", drow["DepartmentName"]).
                Replace("<UniversityName>", drow["UniversityName"]);

    sendmail(body);
} 
```

**编辑：**

在“<>”标签之间的内容没有预先确定的情况下，可以使用以下扩展方法。

```
public static class StringExtensions
{
    public static string ReplaceString(this string s, string newString)
    {
        int startIndex = s.IndexOf("<");

        s = s.Insert(startIndex, newString);

        startIndex = s.IndexOf("<"); //redetermine the startIndex in a new string generated above
        int length = s.IndexOf(">") - startIndex + 1;

        return s.Remove(startIndex, length);
    }
} 
```

该方法简单地搜索第一个“<”和第一个“>”并替换其中的标签和内容。您可以通过以下方式使用它：

```
string body = x.ReplaceString(drow["value for dynamicly defined tag"]).
  ReplaceString(drow["value for dynamicly defined tag 2"]) 
```

等等...

**笔记：**

我本可以使用 replace 方法而不是首先插入新值，而不是在上面的示例中删除标签，但是由于标签中的内容可能取决于用户输入，因此两个标签可能具有相同的内容，并且 Replace 方法将在这种情况下造成麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:31:41.657

string.Format 是你的朋友，我猜。

一个例子：

```
string x = string.Format("herr {0} {1} , \n With due respect and humble submission, I , the student of {2},{3} of {4} of {5}.", drow["FirstName"], drow["LastName"], drow["Semester"], drow["Year"], drow["DepartmentName"], drow["UniversityName"]); 
```

# c# - 如何根据对象的属性值格式化excel表？

> ID：14374126
> 
> 赞同：0
> 
> 时间：2013-01-17T07:29:09.857
> 
> 标签：c#, .net, excel

我需要在 c# asp.net 中创建和下载一个 excel 表。我用写范围。因为它很快。但我需要格式化excel表。根据用户对象的属性（用户颜色），我需要为行着色。但是当写入范围时，我该怎么做？

我正在使用此代码编写
var startCell = (Range)sheet.Cells[2, 1]; var endCell = 新对象（）；endCell = (Range)sheet.Cells[(usersList.Count + 2), noofcolums]; var writeRange = sheet.get_Range(startCell, endCell); writeRange.Value2 = 数据；

数据是一个二维对象。它是由用户对象创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:07:39.863

作为附加评论：请勿在服务器环境中使用 Excel。它很慢，而且 Excel 可能随时产生错误窗口，从而导致挂起。这不能以干净的方式规避 - 即使微软同意并且不支持服务器模型中的办公室。你可以试试 epplus，一个免费的 excel 读/写库。它速度快，支持格式化，并且比 excel 互操作更好地编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:39:24.320

在 Excel 中为任何行着色

oRange.get_Range("A1","X1").Interior.Color = System.Drawing.ColorTranslator.ToWin32(Color.Orange);

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T05:10:58.477

我找不到任何方法来使用 Object 属性以范围写入方式映射行颜色。我需要一个单元一个单元地写。但它很慢。所以我使用创建 html 文件（html 表）并将其转换为 excel 文档。它也不慢。非常感谢大家的回复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:03:51.603

请参考这个[Export HTML Table to Excel using ASP.NET](https://stackoverflow.com/questions/9364107/export-html-table-to-excel-using-asp-net/9810842#9810842)

# emacs - SML 模式下的时髦缩进

> ID：14374127
> 
> 赞同：3
> 
> 时间：2013-01-17T07:29:22.070
> 
> 标签：emacs, indentation, sml

我在 Emacs 中安装了 SML 模式，并且缩进搞砸了。我禁用了我所有的 .emacs 自定义，但这没有任何区别。在下面代码中每一行的末尾，我使用了`C-j`，它被映射到`newline-and-indent`.

![战俘](../Images/b6a2a081f40245539518fd1c88d12221.png)

![距离](../Images/c9f992843779aadbb166f9806fe7dcd2.png)

如果我突出显示所有内容并重新缩进 ( `C-M-\`)，结果会更有意义：

![功率改进](../Images/3fb2d0cebbee64c1cda950337a741ecc.png) ![分布改进](../Images/9abd4f3371c2adff24f41c849aef4cd3.png)

我在 Ubuntu 12.10 上使用 Emacs 24.1.1 和 SML Mode 6.2。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:54:08.260

不要使用`newline-and-indent`. 您可以使用`reindent-then-new-and-indent`or`electric-indent-mode`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:52:19.303

在 .emacs 文件中尝试：

```
(setq default-tab-width 4); 
(setq-default indent-tabs-mode nil);
(global-set-key (kbd "TAB") 'self-insert-command); 
```

我不是巫师，但这对我有用。 [http://www.pement.org/emacs_tabs.htm](http://www.pement.org/emacs_tabs.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-07T15:10:46.410

按照 Stefan（现在 4 岁...）的建议，您可以通过以下方式自动启用次要`electric-indent-mode`模式`sml-mode`：

```
 (push (lambda () electric-indent-local-mode 1) sml-mode-hook) 
```

在您的 emacs 初始化代码中的某处。

或者，您可能更喜欢：

```
(use-package sml-mode
   :config
   (push (lambda () electric-indent-local-mode 1) sml-mode-hook)) 
```

在我看来，这对于在`sml-mode`.

# css - 未全局使用的属性的 CSS 内联样式

> ID：14374129
> 
> 赞同：0
> 
> 时间：2013-01-17T07:29:23.217
> 
> 标签：css

我不想争论使用内联样式而不是外部样式，但是我只想知道您对可以使用内联样式的某些情况的想法。

例如，我有 10 种类型的表格，它们的宽度不同，但总是使用相同的边框颜色、厚度和填充。我目前的想法是我应该声明一个全局 CSS 类来控制表格的边框和填充，然后使用内联样式来指定表格的宽度。

例如 <table class="default" style="width: 320px;">

我的方法适用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:01:35.200

这只是一个问题，因为在大多数情况下，如果你做过一次，那么你会想再做一次。现在你有两个相同的`style`属性。而且，它们都应该是红边的。哦，我在某个地方需要第三张这样的桌子。而且，等等，他们应该更瘦一点……

另一方面，如果您使用一次性课程，则可以将其拍到下一张桌子上。或者您可以比较所有十张表并从一个地方调整它们，等等。

违反原则的问题在于，原则往往是来之不易的。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:35:22.703

是的，您可以声明一个全局 CSS 类并在所有表中使用它。它适用于所有桌子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:35:41.877

我认为你在这里误解了一些东西。如果你拿这个：

```
<table class = "default" style = "width: 320px;"> 
```

那么这不适**用于**所有`width: 320px;`带有`table`class 的 s `default`。它仅将其应用于具有该`style`属性的特定元素。

如果您希望在无需`<link>`外部文件的情况下指定此类 CSS，则可以将 CSS 嵌入[`<style>`](http://www.htmlquick.com/reference/tags/style.html)标签中：

```
.default { //or table, or whatever your selector is
    width: 320px;
} 
```

如果你想`default`用一个不同的类来设计一个特定的表格`width`，给它另一个类 ( `class = "default width320"`) 并执行以下操作：

```
.default.width320 { //selects element with BOTH default and width320 classes
    width: 320px;
} 
```

[在此处阅读有关 CSS 选择器的更多信息](http://reference.sitepoint.com/css/selectorref)，并在此处阅读选择[器特异性](http://css-tricks.com/specifics-on-css-specificity)。

* * *

**编辑：**如果您只想设置该特定表格的样式，则您的方法相对较好。但是，我建议使用类并将样式合并到一个地方（无论是`.css`文件还是内联`<style>`定义）——它比分散的`style`属性定义更易于维护和整洁。

**编辑2：**使用属性是绝对**正确的。**`style`这更多的是个人选择的问题。如果您确定这不会导致可维护性问题 ( `'Hey, why is my table 320 pixels wide? I don't see anything in my CSS file that does that'`)，那么就去做吧。这就是`style`属性的用途。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T07:37:00.580

我相信它在你的情况下是正确的方法。当您正确使用外部类“默认”时，通过在所有表中使用它并指定与特定元素内联的不同宽度。

# clojure - 在 ring / compojure 中使用路由/文件与路由/资源

> ID：14374133
> 
> 赞同：4
> 
> 时间：2013-01-17T07:29:37.407
> 
> 标签：clojure, compojure, ring

使用有什么区别 -

```
(route/files "/" {:root "yeoman/app"})

(route/resources "/" {:root "yeoman/app"}) 
```

用于设置静态文件夹的根目录？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T08:43:15.283

`resources`，就像`clojure.java.io/resource`，将相对于您的类路径工作，并且即使它在 jar/war 而不是在本地文件系统中，也可以获取您的数据。

# jquery - 如何使用 jquery 或 javascript 删除页面中的所有链接

> ID：14374139
> 
> 赞同：0
> 
> 时间：2013-01-17T07:29:59.700
> 
> 标签：jquery, jquery-ui

我正在动态创建链接，例如

```
 var mydivs = document.getElementById("attach");
                            var bTag = document.createElement('a');                               
                            bTag.setAttribute('docid', "doc");
                            bTag.innerHTML = "doc";
                            mydivs.appendChild(bTag); 
```

然后动态创建一个链接。然后在按钮上单击我想删除此链接。如何在单击按钮时删除此链接。我将在页面中有多个链接。任何帮助表示赞赏。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:34:15.393

尝试在单击按钮时使用类似的东西：

```
element = document.getElementById("element-id");
element.parentNode.removeChild(element); 
```

如果您使用 jquery 代替，一个更简单的解决方案将是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:34:26.337

因为你提到 jquery，试试这个：

```
$("a[docid='doc']").remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:35:18.580

如果您打算使用 jQuery，则可以这样做：

```
$(document).ready(function(){

  $('<a id="doc">doc</a>').appendTo('#attach');

  $('#my_remove_button').click(function(){
    $('#attach').find('a').remove();
  });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T07:46:07.420

```
var aTags = document.getElementsByTagName('a')

for (var i = aTags.length-1 ; i >= 0 ; i--) { 
  if (aTags[i].hasAttribute('docid')) { 
    aTags[i].remove() 
  } 
} 
```

# java - 无法解密和读取加密的图像文件

> ID：14374147
> 
> 赞同：1
> 
> 时间：2013-01-17T07:31:08.527
> 
> 标签：java, image, aes

这是我的简单图像加密类，我在其中：

1.  将图像从一个地方读入字节
2.  加密这些字节
3.  再次从这些加密字节创建图像

代码：

```
public class ImageEncrypt {

  Cipher cipher; 

  public static byte[] convertImageToByteArray(String sourcePath) {
    byte[] imageInByte = null;
    try{

      BufferedImage originalImage = ImageIO.read(new File(
      sourcePath));

      // convert BufferedImage to byte array
      ByteArrayOutputStream baos = new ByteArrayOutputStream();
      ImageIO.write(originalImage, "jpg", baos);
      baos.flush();
      imageInByte = baos.toByteArray();
      baos.close();
    }catch(Exception e){
      e.printStackTrace();
    }
    return imageInByte;
  }

  public static void convertByteArrayToImage(byte[] b , String path) {

    try{

      InputStream in = new ByteArrayInputStream(b);
      BufferedImage bImageFromConvert = ImageIO.read(in);

      ImageIO.write(bImageFromConvert, "jpg", new File(
      path));

    }catch(Exception e)
    {
      e.printStackTrace();
    }
  }

  public static void main(String args []){
    final String strPassword = "password12345678";

    SecretKeySpec initVector = new SecretKeySpec(strPassword.getBytes(), "AES");
    AlgorithmParameterSpec paramSpec = new IvParameterSpec(strPassword.getBytes()); 

    try{
      Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding"); 

      cipher.init(Cipher.ENCRYPT_MODE, initVector, paramSpec); 

      byte[] ecrypted = cipher.doFinal(convertImageToByteArray("C:/Users/user/Desktop/a.jpg"));

      convertByteArrayToImage(ecrypted,"C:/Users/user/user/enc.jpg");

      System.out.println("converted to encrypted file .... ");
    }catch(Exception e){
      e.printStackTrace();
    }
  } 
```

现在，当我尝试从加密字节制作图像时，我在第三步遇到了问题。它抛出下面给出的异常：

```
java.lang.IllegalArgumentException: image == null!
    at javax.imageio.ImageTypeSpecifier.createFromRenderedImage(ImageTypeSpecifier.java:925)
    at javax.imageio.ImageIO.getWriter(ImageIO.java:1591)
    at javax.imageio.ImageIO.write(ImageIO.java:1520)
    at ImageEncrypt.convertByteArrayToImage(ImageEncrypt.java:55)
    at ImageEncrypt.main(ImageEncrypt.java:83) 
```

我不知道我哪里出错了？我正在做同样的事情来将文件（文档，pdf等）转换为加密并且它工作正常（当然在这种情况下我使用不同的流类进行字节转换）但我无法理解为什么它在这里搞砸了?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:39:36.863

加密数据后，它不再是有效的图像文件。尝试`ImageIO`在加密数据上使用就像在记事本中打开加密文本文件的结果，并期望看到文本。

要获得`Image`，您需要在请求`ImageIO`读取数据之前对其进行解密。

完全不清楚您的`convertByteArrayToImage`方法的真正含义是什么 - 如果目的只是将字节写入文件，为什么还要通过`Image`？为什么不直接将字节转储到磁盘？它们*已经*是图像的加密表示 - 无需再次尝试将它们解释为图像。如果你想应用某种图像转换（例如，*总是*写出 JPEG，即使输入是 PNG），那么应该对*未加密*的数据进行。

（同样`convertImageToByteArray`，鉴于您*从*磁盘上的文件开始，除非您想执行特定于图像的转换，否则将其作为图像加载是没有意义的。）

旁注：

*   不要使用`String.getBytes()`不需要字符集的重载——它将使用平台默认编码，这意味着它不能跨平台移植
*   您也将加密数据转换为 base64，但随后忽略了结果。为什么？

# java - 如何在 log4j.xml 中使用 DTD ENTITY 外部引用

> ID：14374148
> 
> 赞同：4
> 
> 时间：2013-01-17T07:31:09.740
> 
> 标签：java, xml, log4j, dtd

我尝试使用外部 dtd 文件中的实体。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" 
[<!ENTITY logHome SYSTEM "log4j-entity.dtd">]
> 
```

**log4j-entity.dtd**

```
<?xml version="1.0" encoding="UTF-8"?>

<!ENTITY logHome "/root/crm_test/"> 
```

我试图在这样的属性值中使用实体值。

```
<param name="File" value="&logHome;log/info.log"/> 
```

我得到这个错误：

```
The external entity reference "&logHome;" is not permitted in an attribute value. 
```

我怎样才能做到这一点？

**笔记：**

这东西行得通。。

```
<!ENTITY logHome  "/root/crm_test/"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:07:26.117

您需要使内部子集中的实体成为参数实体，然后引用它。

改变：

```
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" 
[<!ENTITY logHome SYSTEM "log4j-entity.dtd">]
> 
```

到：

```
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" [
<!ENTITY % logHome SYSTEM "log4j-entity.dtd">
%logHome;
]> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:39:20.893

XML 规范明确禁止在属性值中使用外部实体。见这里：[http ://www.w3.org/TR/2004/REC-xml-20040204/#forbidden](http://www.w3.org/TR/2004/REC-xml-20040204/#forbidden)

> 以下是被禁止的，并构成致命错误： [...] 在属性值中对外部实体的引用。

所以答案是：XML 不会让你做你想做的事。但是，如果您通过 XSLT 处理器运行 XML 并根据需要应用转换，您可能会获得类似的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T01:11:50.590

这里有几件事是错误的。

1.  您将实体名称`logHome`用于两种不同的事物（一个包含声明的外部实体，正如 Daniel Haley 指出的那样，它应该是一个参数实体）和一个内部实体，其替换文本命名一个目录。
2.  因此，您`&logHome;`在属性值中的引用被理解为对 URI 为“ `log4j-entity.dtd`”的资源的引用。

实现您想要的最简单的方法是`logHome`在内部子集中声明实体：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" [
<!ENTITY logHome "/root/crm_test/">
]> 
```

如果您真的希望声明`logHome`是外部的，则为参数实体使用不同的名称可能会更容易混淆：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" [
<!ENTITY % logHomeDeclaration SYSTEM "log4j-entity.dtd">
%logHomeDeclaration;
]> 
```

# javascript - 向下滚动时 Jquery.on('click') 不起作用

> ID：14374149
> 
> 赞同：-1
> 
> 时间：2013-01-17T07:31:23.993
> 
> 标签：javascript, jquery

我有几个 li 元素，我在其上绑定了一个函数，因此它们可以用作按钮，这确实有效，但是当我向下滚动一点时，您仍然可以单击它们，但没有任何反应。

我将函数与 $.on() 函数绑定如下

```
$(".class").off();
$(".class").on('click', function(){
    alert("something happens!");
}); 
```

此问题仅在 Firefox（18.0 版）中出现，有没有人见过这种行为，或者知道我做错了什么？

谢谢

J。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:07:14.227

对文档使用“on”，它应该可以正常工作：

```
$(document).on('click', '.class', function(){
    alert("something happens!");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:36:41.573

`.on()`以这种方式尝试：

```
$("body").on('click', ".class", function(){
   alert("something happens!");
}); 
```

# iphone - mi_cmd_stack_list_frames：通过 FBConnect 使用登录时堆栈中的帧数不足

> ID：14374154
> 
> 赞同：0
> 
> 时间：2013-01-17T07:31:36.747
> 
> 标签：iphone, ios, objective-c, xcode

当我在设备上运行我的应用程序时，我收到以下错误并且应用程序崩溃通过 FBConnect 使用登录后

> > mi_cmd_stack_list_frames：堆栈中没有足够的帧。

我没有得到任何合适的解决方案。

我向 cleint 发送了一个 Testflight 版本，他也在同一个地方发生了崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:59:27.397

这是 Facebook SDK 3.0 的问题现在我已经从[GitHUb](https://github.com/facebook/facebook-ios-sdk)将我的 Facebook SDK 更新到 3.1.1现在它运行良好

# actionscript-3 - 根据其州填充的国家/地区的 Flex 组件

> ID：14374160
> 
> 赞同：0
> 
> 时间：2013-01-17T07:32:26.360
> 
> 标签：actionscript-3, apache-flex, flex4, mxml

我在 Flex 中遇到了一个大问题......

其实我的要求是我有两个组合框`Country`和`State`

当我们选择国家时，根据州将改变..

例如，我们选择 Country 作为`India`然后 State 组合框给出印度的所有州。

他们是否有任何免费组件帮助我....

非常感谢提前....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:46:32.190

创建两个组合框相当简单。您可以只使用一个数据提供者，并将一个组合框中的`selectedItem`属性用作第二个组合框的数据提供者。

问题可能是找到所有国家和州的列表。

这个小例子实现了我的解决方案。

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
        ]]>
    </fx:Script>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            [Bindable]
            private var stateCountr:ArrayCollection =new ArrayCollection( [
                {name:"United States",states:new ArrayCollection(["Illinois","California","Arkansas","Florida","Alabama","New Jersey"])},
                {name:"India",states:new ArrayCollection(["Punja","Uttar Pradesh","Kerala"])},
                {name:"EU",states:new ArrayCollection(["Italy","France","Germany"])}
            ]);
        ]]>
    </fx:Script>
    <mx:VBox>
        <s:DropDownList id="country" labelField="name" dataProvider="{stateCountr}" >

        </s:DropDownList>
        <s:DropDownList id="state"  dataProvider="{country.selectedItem.states}">

        </s:DropDownList>

    </mx:VBox>
</s:Application> 
```

您还应该看看这个[ComboBox State and Country](http://blog.shortfusion.com/index.cfm/2010/6/11/Flex-Country-Aware-States-ComboBox)

# findbugs - 在 OutputStream 中找到“依赖默认编码”

> ID：14374161
> 
> 赞同：4
> 
> 时间：2013-01-17T07:32:46.693
> 
> 标签：findbugs

我们如何修复`Reliance on default encoding`findBugs 报告的问题：

```
 StringBuffer printData = getPrintData(data);

    try {
            OutputStreamWriter out = new OutputStreamWriter(new FileOutputStream(new File(linkName)));
            out.write(printData.toString());
            out.flush();

            final FileInputStream f = new FileInputStream(new File(linkName));
            return f;
        } catch (final IOException ioe) {
            ioe.printStackTrace();
        } 
```

我正在使用`StreamWriter`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T09:21:46.987

您`OutputStreamWriter`使用[单个参数](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/OutputStreamWriter.html#OutputStreamWriter%28java.io.OutputStream%29)构造。这意味着它将使用操作系统的默认编码将来自`printData`（Unicode）的Java字符串转换为字节流（文件输出），并且您可能会在不同的机器上得到不同的结果，具体取决于它们的本地化设置。

例如，假设您的对象`printData`包含日语文本。当人们在日本和美国的 Windows 上运行您的软件时，他们会得到不同的数据写入文件。美国用户可能会用问号 (?) 替换所有象形文字，而日本用户可能会使用保留原始日文字符的 UTF-8 文件。如果原文包含多种语言，结果将更加不可预测。

您的应用程序可能接受也可能不接受，具体取决于它的作用和数据的来源。这就是警告的内容。

如果您知道应用程序应该生成的文件编码，您可能希望在构建时明确选择它`OutputStreamWriter`。另一方面，如果您希望将其翻译成机器的默认表示，请保持原样。

# iphone - 如何为 iPhone 游戏（如 Contract Killer 2）制作基于动态服务器的应用内/游戏内商店？

> ID：14374165
> 
> 赞同：7
> 
> 时间：2013-01-17T07:33:14.170
> 
> 标签：iphone, ios, dynamic, in-app-purchase, server-side

我看到现在很多 iOS 游戏都没有硬编码他们的商店，并且项目、描述、价格等都是从外部服务器加载的。

实现这一点的最简单方法是什么？我是一名游戏程序员，在服务器端编程方面经验很少。（很久以前做过爱好PHP脚本）

请让我知道哪些库可以减轻服务器端/客户端的工作量。我想要一些易于管理的东西。他们如何随时宣布某些商品的 50% 折扣等优惠？难道不是每个应用内购买操作都需要得到 Apple 的批准吗？

此外，我希望最大限度地提高安全性，并尽可能防止游戏商店被黑客入侵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T07:46:35.440

您是正确的，这必须通过 Apple 的 IAP。您需要在[https://developer.apple.com/appstore/in-app-purchase/index.html](https://developer.apple.com/appstore/in-app-purchase/index.html)阅读有关此内容的信息。您在 iTunesConnect (iTC) 中设置 IAP 项目。您的应用内商店仅列出您在 iTC 中设置的项目，但您可以选择不在 ITC 中列出所有项目。要使您的商店动态化，最简单的方法可能是使用 UIWebView，然后让您的商店成为一系列网页。这使您可以轻松地在服务器上更新它。

您可以查看[http://stackmob.com](http://stackmob.com)，这使得只做游戏内商店的商店部分变得相对容易，而无需它的所有服务器管理方面（以及相关的安全性）。此外，[http://urbanairship.com](http://urbanairship.com)还为 IAP 项目提供托管服务。

# android - Android-以编程方式实现“显示触摸”

> ID：14374169
> 
> 赞同：2
> 
> 时间：2013-01-17T07:33:26.767
> 
> 标签：android, android-layout, touch, developer-tools

最新版本的 Android 在“设置->开发人员选项”中有一个名为“显示触摸”的功能，可以显示触摸交互的视觉反馈。

有没有办法在我的应用程序中以编程方式实现它。我的意思是，当用户在我的应用程序上触摸屏幕时显示视觉反馈（无论系统设置如何）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T08:35:18.730

我实际上正在寻找与您相同的东西。

到目前为止，我没有找到任何来源，但您可能有兴趣查看此站点。

我相信这个功能是可以实现的。

[https://code.google.com/p/android-touchexample/](https://code.google.com/p/android-touchexample/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-21T10:05:25.930

启用：

```
 Settings.System.putInt(context.getContentResolver(),
                "show_touches", 1); 
```

要禁用：

```
 Settings.System.putInt(context.getContentResolver(),
                "show_touches", 0); 
```

适用于以下棉花糖版本。必须添加`<uses-permission android:name="android.permission.WRITE_SETTINGS" />`到清单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:04:48.163

有一种方法可以做到这一点：创建一个可以接收触摸事件的叠加层。但是您将无法再使用背景（例如您正在使用的应用程序）。

所以实际上这是不可能的，不幸的是。如果我没记错的话，那是因为谷歌想要阻止一种叫做 TapJacking 的东西。

对不起！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T13:13:18.853

要启用显示触摸：

```
Settings.System.putInt(context.getContentResolver(),"show_touches", 1); 
```

要禁用显示触摸：

```
Settings.System.putInt(context.getContentResolver(),"show_touches", 0); 
```

记得添加`android.permission.WRITE_SETTINGS`到您的 AndroidManifest.xml。

[资源](https://stackoverflow.com/questions/26402813/how-to-programmatically-enable-show-touches-option-in-android)

# java - 选中复选框时触发 AlertDailog

> ID：14374171
> 
> 赞同：1
> 
> 时间：2013-01-17T07:33:36.187
> 
> 标签：java, android, checkbox, android-alertdialog

我想设置它，当我选中复选框然后显示`AlertDialog`. 但是发生了一个问题.. Eclipse 总是在我的`AlertDialog`.

```
new AlertDialog.Builder(setting.this) 
```

代码：

```
private CheckBox.OnCheckedChangeListener chkPasswordListener = new CheckBox.OnCheckedChangeListener(){

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            if (chkSetPassword.isChecked()){
                new AlertDialog.Builder(setting.this)  //AlertDialog show red line.
                .setMessage("Message,確定要結束?")
                .setPositiveButton("確定", new DialogInterface.OnClickListener() 
                {                   
                    public void onClick(DialogInterface dialoginterface, int i)
            //      public void onClick(DialogInterface dialog, int i)  
            //      TODO Auto-generated method stub                 
                    {
                        finish();
                    }
                })
                .setNegativeButton("取消", new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialoginterface, int i)
                    {
            //      public void onClick(DialogInterface dialog, int which) {
            //      TODO Auto-generated method stub

                    }

                })
                .show();
            }
        } 
```

我丢了什么东西吗？请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:51:26.640

您应该按以下方式完成代码：

```
 }

        })
        .show();
    }
  };      // THIS LINE WAS MISSING
} 
```

你应该用 }; 这一行：

```
 private CheckBox.OnCheckedChangeListener chkPasswordListener
     = new CheckBox.OnCheckedChangeListener(){ 
```

# awk - 如何在所有 *.mk 文件中找到“.dat”？

> ID：14374172
> 
> 赞同：1
> 
> 时间：2013-01-17T07:33:45.073
> 
> 标签：awk, grep, find

我正在尝试使用以下命令`.dat`在我的所有文件中查找字符串。`*.mk`我想知道这是否正确，因为它没有给我任何输出。

```
find . -name "*.mk" | grep *.dat 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:41:59.527

### 使用 Find 的执行标志

您在这里并不需要管道，并且可以绕过对*xargs*的需求。*使用以下调用对标准find*命令找到的每个文件执行固定字符串搜索（通常比正则表达式匹配更快） ：

```
find . -name '*.mk' -exec grep -F .dat {} \; 
```

如果您使用的是 GNU find，则可以使用此语法来避免多次调用 grep 的进程开销：

```
find . -name '*.mk' -exec grep -F .dat {} + 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:44:51.157

不，这是不对的，有几个问题：1）您似乎为 grep 提供了一个 glob 模式，2）该模式没有被引用，并且会在 grep 看到它之前被 shell 扩展，3）你是grep'ing 通过文件名，而不是文件内容。

要解决 1)，请使用基本正则表达式，这里的等价物是`.*\.dat`或只是`.dat`. 2) 是使用单引号或双引号的问题。3)`find`返回文件名，因此如果您希望 grep 对这些文件中的每一个进行操作，请使用`-exec`标志 for`find`或使用`xargs`. 所有这些加在一起：

```
find . -name '*.mk' | xargs grep '.dat' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:36:55.293

使用 xargs：

```
find . -name "*.mk"| xargs grep '\.dat' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T07:44:27.160

以这种方式在 find 命令中使用 exec 选项：

```
find . -name "*.mk" -exec grep ".dat" \{\} \; 
```

# python - 在 for 循环中后退迭代

> ID：14374181
> 
> 赞同：31
> 
> 时间：2013-01-17T07:34:26.713
> 
> 标签：python, for-loop

所以我想做这样的事情：

```
for i in range(5):
    print(i);
    if(condition==true):
        i=i-1; 
```

但是，无论出于何种原因，即使我正在减少 i，循环似乎也没有注意到。有没有办法重复迭代？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-17T07:37:28.833

`for`Python 中的循环总是向前的。如果您希望能够向后移动，则必须使用不同的机制，例如`while`：

```
i = 0
while i < 5:
    print(i)
    if condition:
        i=i-1
    i += 1 
```

甚至更好：

```
i = 0
while i < 5:
    print(i)
    if condition:
        do_something()
        # don't increment here, so we stay on the same value for i
    else:
        # only increment in the case where we're not "moving backwards"
        i += 1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T07:36:44.473

Python 循环使用`range`的设计与 C/C++/Java`for`循环不同。对于每次迭代， i 被设置为 的下一个值`range(5)`，无论您`i`在两者之间做什么。

您可以改用 while 循环：

```
i = 0
while i<5:
    print i
    if condition:
        continue
    i+=1 
```

但老实说：我会退后一步，再想想你原来的问题。可能您会找到更好的解决方案，因为这样的循环总是容易出错。`for`Python -loops 的设计不同是有原因的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T07:36:32.390

您对 Python 中的循环有误解。`for`循环并不关心你在每次迭代中做了什么`i`，因为它根本与循环的逻辑无关。修改`i`只是重新绑定一个局部变量。

您需要使用 while 循环来实现您期望的行为，其中的状态`i`确实会影响循环的控制流：

```
import random

i = 0
while i < 5:
    print(i)
    i += 1
    if random.choice([True, False]):
        i -= 1 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-17T07:45:10.243

`range(5)`创建一个包含数字的`0`列表`4`- `[0, 1, 2, 3, 4]`。

当你在它上面运行一个 for 循环时，你正在迭代列表。这样做`i-= 1`只会减少列表中特定元素的**值**，并且迭代将继续。

就像这里建议的其他答案一样，您应该使用`while`循环。

```
i= 0
while i<5:
    # do stuff
    if #condition:
        i-= 1 # or +
    i+= 1 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-17T07:54:57.183

重复许多其他答案，为了完整起见，您需要使用`while loop`.

```
i = 0
while i < 5:
    print(i)
    if (not condition):
       i+=1 
```

如果你想在循环中向后移动一个迭代（而不是重复一个迭代），那么使用这个：

```
i = 0
while i < 5:
    print(i)
    if (condition):
        i -= 1
    else:
        i += 1 
```

本质上，`while i < 5`对每次迭代进行评估，并检查是否`i < 5`. 因此，通过递减/不改变`i`，我们得到如下结果：（的值`i`）

不变： `1->2->3-(condition satisfied)> 3 -> 4 -> 5`

递减：`1->2->3-(condition satisfied)>2 -> 3 -> 4 -> 5`

为什么`i=i-1`在你的 for 循环中不让它重复迭代的原因很简单。在`for`循环中，`i`为 for 循环中的下一项赋值。`i`只要 Python能够将下一个项目分配给它，Python 就不会关心你对它做了什么。因此，for 循环`for i in <your_iterable>:<do whatever>`更接近于：

```
_i = 0
_length = len(<your_iterable>)
while _i < _length:
    i = _i
    _i += 1
    <do whatever> 
```

但是，在这个类比中，您将无法访问`_`谓词变量 ( `_i`, `_length`)。这就是我简化逻辑的方式`for loop`。请注意，无论`i`分配给什么，它都会`_i`在下一次迭代时分配给，并且循环实际上并不关心是什么`i`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-17T07:36:53.780

使用`while`循环：

```
i = 0
while i < 5:
    print(i)
    if condition:
        i -= 1
    i += 1 
```

如前所述，这是相当单一的 Python。也许如果您发布您想要实现的目标，我们可以提供一些更好的建议。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-17T08:59:22.787

`in`在 Python 中，可以在迭代器（循环之后的内容`for..in`）和它的使用者（循环内的代码）之间建立双向交换。为此，您可以[`send`](http://docs.python.org/2/reference/expressions.html#generator-iterator-methods)在消费者代码中使用在生成器中“注入”一个值。在您的情况下，您可以在满足条件后简单地发回当前值，并将`range`调用包装在一个生成器中，该生成器重复发回给它的任何内容。这里有一些代码供你玩，为了清楚起见故意冗长：

```
def repeateble(it):
    buf, it = None, iter(it)
    while True:
        if buf is None:
            # the buffer is empty, send them the next elem
            val = next(it)
        else:
            # there's something in the buffer
            # let's send that back
            val = buf

        # send the value and wait what they say
        back = yield val

        if back:
            # they've sent us something!
            # give them some dummy value as a result of send()
            yield None 
            # and save what they've sent in a buffer
            # for the next iteration
            buf = back

        else:
            # they haven't sent anything
            # empty the buffer
            buf = None

from random import randint

# create a repeateble generator
rng = repeateble(range(100))

for x in rng:
    print(x)

    # check "some condition"...
    if randint(1, 100) > 80:
        print('repeat:')
        # send the current value back to the generator
        # it will be returned on the next iteration
        rng.send(x) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-05-13T18:54:40.960

如果您正在遍历文件并根据条件拉出前面的行，则可以使用 readlines。

```
 with open("myfile.txt", "r") as f:
    text = f.readlines()
    for row in range(0, len(text)):
        if re.search("Error", text[row]):
            print(text[row-1].strip()) 
```

# ios - 动态更改标签栏标题

> ID：14374185
> 
> 赞同：0
> 
> 时间：2013-01-17T07:34:42.957
> 
> 标签：ios, ios5, uitabbar

我的应用程序使用两种语言并具有三个选项卡。我的应用程序中有一个语言更改按钮，每当更改所有选项卡的标题时，都必须根据语言更改。这是我使用的代码，它在 iPad 中运行良好，但相同的代码在 iPhone 中崩溃。这两个设备都是在 iOS5 中。

```
viewController1 = [[MapFirstViewController alloc] initWithNibName:@"MapFirstViewController_iPad" bundle:nil];

viewController1.tabBarItem = [[UITabBarItem alloc] initWithTitle:[self languageSelectedStringForKey:@"about"] image:[UIImage imageNamed:@"about_tabbar_icon.png"] tag:8];

viewController2 = [[MapSecondViewController alloc] initWithNibName:@"MapSecondViewController_iPad" bundle:nil];

viewController2.tabBarItem= [[UITabBarItem alloc] initWithTitle:[self languageSelectedStringForKey:@"Map"] image:[UIImage imageNamed:@"maps_tabbar_icon.png"] tag:9];

viewController3 = [[ViewListIpad alloc] initWithNibName:@"ViewListIpad" bundle:nil];

viewController3.tabBarItem= [[UITabBarItem alloc] initWithTitle:[self languageSelectedStringForKey:@"eKiosks & eSC List"] image:[UIImage imageNamed:@"esc&kiosk_tabbar_icon.png"] tag:10];

MapAppDelegate *appDelegate = (MapAppDelegate *)[[UIApplication sharedApplication] delegate];

NSMutableArray *viewControllersArray = [NSMutableArray arrayWithArray:[[appDelegate tabBarController] viewControllers]];

[viewControllersArray replaceObjectAtIndex:0 withObject:viewController1];
[viewControllersArray replaceObjectAtIndex:1 withObject:viewController2];    

[[appDelegate tabBarController] setViewControllers:viewControllersArray animated:NO]; 
```

崩溃日志：

```
Thread 0 crashed with ARM Thread State:
    r0: 0x00000004    r1: 0x00000000      r2: 0x00000001      r3: 0x00000001
    r4: 0x0000000a    r5: 0x00000000      r6: 0x00000000      r7: 0x2fef4da4
    r8: 0x00235970    r9: 0x00000000     r10: 0x0010a710     r11: 0x2fef4dd4
    ip: 0x0000014e    sp: 0x2fef4d6c      lr: 0x364beff9      pc: 0x375e1628
  cpsr: 0x20000010

Binary Images:
   0xf6000 -   0x107fff  ReportCrash armv7  <8c18758965fb30d6ac04b1e0cddc8fda> /System/Library/CoreServices/ReportCrash
0x2fef5000 - 0x2ff16fff  dyld armv7  <be7c0b491a943054ad12eb5060f1da06> /usr/lib/dyld
0x30bcb000 - 0x30bd7fff  libCRFSuite.dylib armv7  <ea460e3f1ac338a9885d5752864dbffb> /usr/lib/libCRFSuite.dylib
0x31384000 - 0x31384fff  libunwind.dylib armv7  <d21222aad8c93d6c9580f9bf47071946> /usr/lib/system/libunwind.dylib
0x31a98000 - 0x31a9bfff  libmacho.dylib armv7  <3237bc9c109e3354bc4b38b957243f31> /usr/lib/system/libmacho.dylib
0x31c17000 - 0x31c34fff  libsystem_info.dylib armv7  <1e36ab94661c372bab5a801d68c79353> /usr/lib/system/libsystem_info.dylib
0x31c4a000 - 0x31c59fff  GenerationalStorage armv7  <c581bffc87013530b3c2d017142395e6> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x31c5a000 - 0x31d07fff  libxml2.2.dylib armv7  <78462273eb5b38d1a0873b02f0e35e23> /usr/lib/libxml2.2.dylib
0x31d08000 - 0x31d44fff  AppSupport armv7  <de0c2fbb95f8383db43acfb44e9c66fe> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x31d47000 - 0x31d4dfff  MobileKeyBag armv7  <f5633749a1c83058a28cd7d0b488e19f> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x31d6b000 - 0x31d6dfff  MobileInstallation armv7  <4ccf76f0e6cb3cd7b4e0087c2f284a1d> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x31d6e000 - 0x31d7ffff  libxpc.dylib armv7  <7d49e385ee5d3e7eb08d06525abd6435> /usr/lib/system/libxpc.dylib
0x31fcf000 - 0x32095fff  libobjc.A.dylib armv7  <ebbb32df194b331e9b3dc14e40f46833> /usr/lib/libobjc.A.dylib
0x3247f000 - 0x324b7fff  CoreSymbolication armv7  <6cc5037406113e98ab665e5edab27a54> /System/Library/PrivateFrameworks/CoreSymbolication.framework/CoreSymbolication
0x32884000 - 0x32887fff  libsystem_network.dylib armv7  <b18e0a845b1e317c8abcf6b5d06b29a0> /usr/lib/system/libsystem_network.dylib
0x329db000 - 0x329dbfff  libkeymgr.dylib armv7  <791bb8b832943b2392c0c35228f52e09> /usr/lib/system/libkeymgr.dylib
0x32eb9000 - 0x33037fff  Foundation armv7  <ce466f428d953caaac6641d186665809> /System/Library/Frameworks/Foundation.framework/Foundation
0x330e7000 - 0x3322cfff  CoreGraphics armv7  <641fb6e558f239588a8bd05dbefff99a> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x3322d000 - 0x3326afff  IOKit armv7  <e5f727892ee034a4be04e6da608f413f> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x33289000 - 0x332ccfff  libcommonCrypto.dylib armv7  <be9a231cfe6e3ae387abb444a098bce9> /usr/lib/system/libcommonCrypto.dylib
0x333fc000 - 0x333fdfff  libsystem_blocks.dylib armv7  <4bb9797771d037879bec814fe750d86d> /usr/lib/system/libsystem_blocks.dylib
0x33596000 - 0x33596fff  liblangid.dylib armv7  <342170169bf232a0888912f5ef97112d> /usr/lib/liblangid.dylib
0x335af000 - 0x335cefff  libSystem.B.dylib armv7  <31a0ffbb18bf3a28b46fd286733e7d9f> /usr/lib/libSystem.B.dylib
0x3368e000 - 0x336d8fff  CoreTelephony armv7  <1f4cacb552533c948122cb180f4192b3> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x3378c000 - 0x337c3fff  Security armv7  <b89c9f6373f037f2a4801558f97b9a95> /System/Library/Frameworks/Security.framework/Security
0x339ba000 - 0x339bbfff  libremovefile.dylib armv7  <9c8cee9652453241ac1fc99eab05c40a> /usr/lib/system/libremovefile.dylib
0x33afd000 - 0x33b00fff  libcompiler_rt.dylib armv7  <414332f9a55238bab2cbec323e0fc8da> /usr/lib/system/libcompiler_rt.dylib
0x33eee000 - 0x33ef7fff  libMobileGestalt.dylib armv7  <bf8d7c30f11a393a8adf4c8277e65aa3> /usr/lib/libMobileGestalt.dylib
0x33efd000 - 0x34014fff  CoreFoundation armv7  <de9eefc6109735369cfd8f3de9895da0> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x3401d000 - 0x3406efff  libstdc++.6.dylib armv7  <dc2061145c1a3307829d4f3bfc547c1a> /usr/lib/libstdc++.6.dylib
0x3406f000 - 0x34070fff  libsystem_sandbox.dylib armv7  <b8612b4ce18535aaa94f4b75c730e090> /usr/lib/system/libsystem_sandbox.dylib
0x34071000 - 0x34076fff  CrashReporterSupport armv7  <c3062554536438f9874c88363df7f60b> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x3407b000 - 0x340fafff  libsqlite3.dylib armv7  <af4718fee01734748c42f2214ab6883d> /usr/lib/libsqlite3.dylib
0x348c7000 - 0x348cdfff  liblockdown.dylib armv7  <bfaf7fb16e5a3b2ea07c47b8b2f2b64e> /usr/lib/liblockdown.dylib
0x348ce000 - 0x348cffff  libdnsinfo.dylib armv7  <dbd1e77a4beb309d8f160d927d442467> /usr/lib/system/libdnsinfo.dylib
0x351de000 - 0x351dffff  libdyld.dylib armv7  <f1963e7ef64e39a58ec1e39ed7c74849> /usr/lib/system/libdyld.dylib
0x35219000 - 0x3521efff  libcopyfile.dylib armv7  <9072462f28af3665875b3ecaba002c00> /usr/lib/system/libcopyfile.dylib
0x35269000 - 0x35273fff  libbz2.1.0.dylib armv7  <28583efb9f1b38e7ae83c667b07dbd08> /usr/lib/libbz2.1.0.dylib
0x3530b000 - 0x35317fff  libz.1.dylib armv7  <eef915ed9b2c3433b03fd9030957b945> /usr/lib/libz.1.dylib
0x35318000 - 0x3534dfff  SystemConfiguration armv7  <753be0ebdcb13b24b1a4adcdc94d6bd9> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x354e5000 - 0x3562efff  libicucore.A.dylib armv7  <1bc960f75d633190a09b093209a9f0c5> /usr/lib/libicucore.A.dylib
0x356b5000 - 0x356b5fff  libgcc_s.1.dylib armv7  <69d8dab7388b33d38b30708fd6b6a340> /usr/lib/libgcc_s.1.dylib
0x3584b000 - 0x35852fff  libc++abi.dylib armv7  <f769ce305c3033ee90e8c2ecc4846619> /usr/lib/libc++abi.dylib
0x35886000 - 0x3588bfff  libsystem_dnssd.dylib armv7  <4d8b38f1cb603f0d8af78c56c485f05a> /usr/lib/system/libsystem_dnssd.dylib
0x35c7b000 - 0x35d52fff  CFNetwork armv7  <6fbc9f187eaa30009780e70288c9f289> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x36456000 - 0x3645cfff  liblaunch.dylib armv7  <09f21c3e774c30b1aab1b56c2d6efbc3> /usr/lib/system/liblaunch.dylib
0x364ab000 - 0x36538fff  libsystem_c.dylib armv7  <1707c3cf3c5b3045af4bed38ff8420a6> /usr/lib/system/libsystem_c.dylib
0x36827000 - 0x3683dfff  libdispatch.dylib armv7  <defe319d1f4d3c1c8c4f18ebd96b396a> /usr/lib/system/libdispatch.dylib
0x36849000 - 0x36899fff  Symbolication armv7  <e13514b900053efba4b9a43ed28359e5> /System/Library/PrivateFrameworks/Symbolication.framework/Symbolication
0x36e45000 - 0x36e4bfff  libnotify.dylib armv7  <1e374857ac68370095ddbafe94f021a1> /usr/lib/system/libnotify.dylib
0x37079000 - 0x3707dfff  libcache.dylib armv7  <4511f0ec5b713636aaade7245a12553c> /usr/lib/system/libcache.dylib
0x375d0000 - 0x375e6fff  libsystem_kernel.dylib armv7  <afd3cb06e20336dca2e5a6e11d080504> /usr/lib/system/libsystem_kernel.dylib
0x37816000 - 0x37839fff  Bom armv7  <0e6087f75a81345ea81751197ccb712c> /System/Library/PrivateFrameworks/Bom.framework/Bom 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:35:45.293

我觉得

```
[[MapFirstViewController alloc] initWithNibName:@"MapFirstViewController_iPad" bundle:nil]; 
```

是你的问题。iPhone 应用程序无法为 iPad 初始化和使用 *.xib！

如果您的应用程序在 iPhone 上运行，则必须初始化 iPhone xib；如果在 iPad 上运行，则必须初始化 iPad xib。

# javascript - 在追加时添加整数

> ID：14374186
> 
> 赞同：0
> 
> 时间：2013-01-17T07:34:46.873
> 
> 标签：javascript, jquery, append, parseint

请看下面的代码。我无法让我的价值观相加。数字只是将自身添加到字符串的后面。想知道有什么办法。

```
$("a[name='older_post']").click(function(){
    $("div.main_ads_div a[name='older_post']").remove().fadeOut();
    var last_td_id=parseInt($("table.main_ads_table:last").find("td.load_ads:last").attr("id"),10);
    alert(last_td_id);   //OUTPUTS 38
    $("div.main_ads_div").append('<table class="main_ads_table" col="7" row="7"><tr><td class="load_ads" id="'+last_td_id+1+'"></td><td class="load_ads" id="'+last_td_id+2+'"></td><td class="load_ads" id="'+last_td_id+3+'"></td><td class="load_ads priority" id="'+last_td_id+4+'"></td><td class="load_ads priority" id="'+last_td_id+5+'"></td><td class="load_ads" id="'+last_td_id+6+'"></td><td class="load_ads" id="'+last_td_id+7+'"></td><td class="load_ads" id="'+last_td_id+8+'"></td></tr></table>');
}); 
```

所以我想要在这里得到的是每个`td`附加的，我试图得到`39, 40, 41, 42...`但我得到了诸如`381, 382, 383,...`等之类的值。

任何帮助在这里表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T07:37:07.117

将加法括在括号中：

```
 ... + (last_td_id + 7) + ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:36:32.423

您正在将字符串与数字连接，将加法括在括号中以对其执行算术运算。

改变

```
+last_td_id+1+ 
```

到

```
+(last_td_id+1)+ 
```

的[关联](http://arguments.callee.info/2008/11/03/order-of-operations-in-javascript/)是`+`从左到右的，并且在语句中`'....class="load_ads" id="'+last_td_id`首先将左侧字符串与数字 ( `last_td_id`) 连接，并给出一个字符串，该字符串再次将增量数字（如（2 或 3 ..））连接到前一个字符串。将括号放在数字周围使其`precedence`变高，首先执行计算并将结果连接到字符串中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:00:09.640

仅当两个操作数都是数字时，`plus`运算符才执行数学加法。如果其中一个是字符串，它将执行字符串连接（并强制`1`转换为`"1"`）。

然而它是[左关联](http://en.wikipedia.org/wiki/Operator_associativity)的，你没有使用括号。所以你的表达式被评估为

```
(((…('<…' + id) + 1) + '"…') + id) + 2) + … 
```

每一步都会产生一个字符串。正如其他人已经提到的那样，您需要通过将其包裹在括号中来强制执行添加：

```
'<…' + (id + 1) + '"…' + (id + 2) + …
// evaluated as
(((…('<…' + (id + 1)) + '"…') + (id + 2)) + … 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-17T07:40:30.510

在 javascript 中使用 '+' 总是附加变量/字符串。尝试这样的事情：

```
var c = (16 * 24) + 12;
d = c.toString(); 
```

只有这样 var 'd' 才会给你数学输出

在你的情况下，它可能是

```
(last_td_id+4).toString();  and so on 
```

# codeigniter - 在 Codeigniter 中搜索数据

> ID：14374188
> 
> 赞同：-1
> 
> 时间：2013-01-17T07:34:54.463
> 
> 标签：codeigniter

你能帮忙在 Codeigniter 中创建一个简单的搜索吗？我不知道怎么做。请。

这是我的数据库名称 tbl_dash

```
tbl_dash

id  |   name    |   Note
_________________________
1   |   erwin   |   Baker
2   |   flores  |   Coke 
```

请帮我！：（

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T07:58:05.137

这是你如何做到的。
看法

```
<form action="<?php echo site_url('search/search_keyword');?>" method = "post">
<input type="text" name = "keyword" />
<input type="submit" value = "Search" />
</form> 
```

控制器

```
Class Search Extends CI_Contrller
{
    function __construct()
    {
        parent::__construct();
        $this->load->model('mymodel');
    }

    function search_keyword()
    {
        $keyword    =   $this->input->post('keyword');
        $data['results']    =   $this->mymodel->search($keyword);
        $this->load->view('result_view',$data);
    }

} 
```

模型

```
Class Mymodel Extends CI_Model
{
    function __construct()
    {
        parent::__construct();
    }

    function search($keyword)
    {
        $this->db->like('name',$keyword);
        $query  =   $this->db->get('tablename');
        return $query->result();
    }
} 
```

编辑：
这是显示数据的视图。结果视图.php

```
<table>
<?php foreach($results as $row){ ?>
    <tr>
        <td><?php echo $row->Company?></td>
        <td><?php echo $row->Source?></td>
        <td><?php echo $row->SavePitch?></td>
        <td><?php echo $row->Results?></td>
        <td><?php echo $row->Status?></td>
        <td><?php echo $row->user_id?></td>
    </tr>
<?php } ?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:55:43.127

实现这一目标的步骤：

1）创建一个视图，该视图应包含带有文本字段名称和提交按钮的搜索表单。

2）验证字段并将值发布到控制器中。

3）在控制器中获取发布的值并尝试在服务器端进行验证。

4）将值传递给模型。

5）在模型中，生成一个选择查询，该查询应该根据搜索输入获取所需的信息，并将获取的值返回给控制器。

6）从控制器将结果传递给您想要的任何视图。

7) 在视图页面中显示结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T07:57:44.450

您需要阅读[活动记录类文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)，

```
$this->db->where('name','erwin');
$result=$this->db->get('tbl_dash');
$this->load->library('table');
//HTML table in $table now;
$table=$this->table->generate($result); 
```

# ruby-on-rails - 自动化中的 CSRF

> ID：14374195
> 
> 赞同：4
> 
> 时间：2013-01-17T07:35:32.720
> 
> 标签：ruby-on-rails, ruby, cucumber, watir

假设我们有一些自动化测试 POST 请求。由于 Rails 内置 CSRF 保护，如果不包含 CSRF 令牌，这些 POST 请求将无法工作。

在这种情况下，运行自动化的最佳实践是什么？
我们是否需要在每个自定义非 GET 请求中包含 CSRF 令牌？（如果“是”那么“如何？”）
或者最好将应用程序配置为禁用自动化内容的 CSRF 保护？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:13:22.730

我不确定是什么让你首先问这个问题，但我很高兴回答这个问题:)

简短的回答是，这取决于您将用于自动化测试的工具。如果您要使用答案标签中的工具 - 带有 watir 的黄瓜 - 那么一切都会按预期工作，因为这些工具将直接自动化浏览器。

这意味着测试的行为将与现实生活中的用户相似 - 如果 CSRF 令牌检查适用于现实生活中的用户，那么它也将在您的自动化测试中工作。您不会使用这些测试手动发出任何 POST 请求（至少您不应该），但您将在网页上填写表格并提交该表格 - 这意味着 Rails 生成的 CSRF 令牌也将被提交一切都会好起来的。

但是，如果出于某种奇怪的原因您需要手动制作 POST 请求，那么您必须禁用 CSRF 检查`test`环境。

# java - Android：如何在多个图像按钮上设置监听器？

> ID：14374196
> 
> 赞同：1
> 
> 时间：2013-01-17T07:35:32.897
> 
> 标签：java, android, events, imagebutton, click

首先，我只使用了一周的 Andorid 和 Java，而且我完全是新手。

我需要知道用户单击了哪个按钮，然后将其与好答案或坏答案进行比较。

这是代码

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questions);

        Integer[] flags = {
            R.drawable.flag_albania,
            R.drawable.flag_andorra,
            R.drawable.flag_angola,
            R.drawable.flag_avganistan,

        };

        String[] questions = {
            "What is the flag of Albania",
            "What is the flag of Andorra",
            "What is the flag of Angola",
            "What is the flag of Avganistan",

        };

        TextView tv = (TextView) findViewById(R.id.textView1);
        int arraySize = flags.length;
        Random rand = new Random();

        ImageButton button1 = (ImageButton) findViewById(R.id.imageButton1);
        int index = rand.nextInt(arraySize);
        int questionIndex1 = index;
        button1.setImageResource(flags[index]);
        flags[index] = flags[--arraySize];

        ImageButton button2 = (ImageButton) findViewById(R.id.imageButton2);
        index = rand.nextInt(arraySize);
        int questionIndex2 = index;
        button2.setImageResource(flags[index]);
        flags[index] = flags[--arraySize];

        ImageButton button3 = (ImageButton) findViewById(R.id.imageButton3);
        index = rand.nextInt(arraySize);
        int questionIndex3 = index;
        button3.setImageResource(flags[index]);
        flags[index] = flags[--arraySize];

        ImageButton button4 = (ImageButton) findViewById(R.id.imageButton4);
        index = rand.nextInt(arraySize);
        int questionIndex4 = index;
        button4.setImageResource(flags[index]);
        flags[index] = flags[--arraySize];

        Integer[] question = {
                questionIndex1,
                questionIndex2,
                questionIndex3,
                questionIndex4
        };

        int questionArraySize = question.length;

        int questionArray = rand.nextInt(questionArraySize);

        tv.setText(questions[question[questionArray]]); 
```

我的想法是将随机选择的 questionIndex 与按钮 id 进行比较，但我真的不知道如何实现它。感谢您的每一次帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:42:30.200

试试这种方式：

> ```
> button1.setOnClickListener(onClickListener);
>   button2.setOnClickListener(onClickListener);
>   /**
>     *  Common click listener
>     */
>  OnClickListener onClickListener = new OnClickListener()
>   {
>     @Override
>     public void onClick(View p_v)
>     {
>         switch (p_v.getId())
>             {
>                 case R.id.imageButton1:
>                     //Your logic here.
>                     break;
>                 case R.id.imageButton2:
>                     //Your logic here.
>                     break;
>             }
>     } 
> ```
> 
> }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:47:13.893

写下面的代码

```
public class MainActivity extends Activity implements OnClickListener{ 
    protected void onCreate(Bundle savedInstanceState) {

        /// Your Above Code ///

        tv.setText(questions[question[questionArray]]);

        Imagebutton1.setOnClickListener(this);
        Imagebutton2.setOnClickListener(this);
        Imagebutton3.setOnClickListener(this);
        Imagebutton4.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        if(v == Imagebutton1){
            // Write Your Code Here
        } else if(v == Imagebutton2){
            // Write Your Code Here
        } else if(v == Imagebutton3){
            // Write Your Code Here
        } else if(v == Imagebutton4){
            // Write Your Code Here
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T11:22:37.420

使用这个简化的代码

```
ImageButton button1,button2,button3,button4;
            ImageButton imagebuttons[]={ button1,button2,button3,button4};
        int ids[]={R.id.imageButton1,R.id.imageButton2,R.id.imageButton3,R.id.imageButton4};

        for(final int i=0;i<imagebuttons.length;i++)
        {
            imagebuttons[i]=(ImageButton) findViewById(ids[i]);
    int index=rand.nextInt(arraySize);
             imagebuttons[i].setImageResource(flags[index]);
             flags[index] = flags[--arraySize];
             indexes.put(i,index);
            imagebuttons[i].setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    if( questionArray==indexes.get(i))
                    {

                    }

                }
            }); 
```

我希望这能帮到您

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:23:51.100

你也可以这样做。您必须使用一些 int 变量来保留按钮的标记值。您还必须为按钮操作创建一个 onClickListner。编码如下

```
 public class MyActivity extends Activity{

    //Define the Tag values for image buttons.
    private static final int TAG_IMAGE_BTN_1 = 0;
    private static final int TAG_IMAGE_BTN_2 = 1;
    private static final int TAG_IMAGE_BTN_3 = 2;
    private static final int TAG_IMAGE_BTN_4 = 3;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        initActivity();

    }

    private void initActivity(){
            //Initialize the image buttons via xml or from the code itself.
            //Add the onClickListner_BTN_CLICK and the corresponding tag to the image button

           imageBtn1.setTag(TAG_IMAGE_BTN_1);
           imageBtn1.setOnClickListener(onClickListner_BTN_CLICK);

           imageBtn2.setTag(TAG_IMAGE_BTN_2);
           imageBtn2.setOnClickListener(onClickListner_BTN_CLICK);
           .......................................................
           .......................................................
    }

    OnClickListener onClickListner_BTN_CLICK = new OnClickListener(){

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                int iTag = (Integer)v.getTag();

                switch (iTag) {
                case TAG_IMAGE_BTN_1:

                    break;
                        case TAG_IMAGE_BTN_2:

                    break;

                        case TAG_IMAGE_BTN_3:

                    break;

                        case TAG_IMAGE_BTN_4:

                    break;

                }
            }
        };

    } 
```

使用标记值捕获动作的优点，1）如果我们使用 R.id.......那么如果我们在 xml 文件中更改它，我们必须更改 switch case 中的值 2）我们可以使用活动中的每个操作只有一个 onClickListner。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T07:42:09.043

您可以这样做：首先，使您的活动实现 onClick 侦听器：

```
public class MyActivity extends Activity implements View.OnClickListener{ 
```

然后将动作侦听器设置为您的按钮：

```
button1.setOnClickListener(this);
button2.setOnClickListener(this);
..... 
```

然后在监听器中，检查 id：

```
public void onClick(View v) {
   switch(v.getId()){
   case R.id.imageButton1:
   break;
   case R.id.imageButton2:
   break;
   ....
   }
} 
```

# php - 函数内的 PHP 条件语句

> ID：14374201
> 
> 赞同：0
> 
> 时间：2013-01-17T07:35:45.477
> 
> 标签：php, if-statement

我正在尝试创建一个函数，该函数接受两个参数，一个用于用户输入，另一个用于错误消息。我最初有一个带有两个输入字段和相应错误的关联数组。当函数在没有任何条目的情况下提交时，我得到两个类似的输出；我以为我会得到'test1'和'test2'。我每次都传递不同的参数，但我得到相同的结果。代码如下

```
$valid = TRUE;
    //$errors='';
    $errors=array('desc_error'=>'please enter valid description',
                  'title_error'=>'provide valid title','no_error'=>'',);
    function sanitizeText($input,$error){
        //$input;
        if($input!='')
        {
            $input= filter_var($input, FILTER_SANITIZE_STRING); 
            if($input==''){
                global $errors;
                $errors[$error];
                $valid=FALSE;
                return $errors[$error];
            }
            else{
                $input;
                echo 'test 1';
                return $input;
            }

        } 
        else if($input=='')
        {

            if($input==$_POST['desc'])
            {
                echo 'the description field is required<br/>';
                $valid=FALSE;
            }
            else{
                //
            }

        }

    }
    if(isset($_POST['submit']))
    {
        $title=sanitizeText($_POST['title'],'title_error');
        $desc=sanitizeText($_POST['desc'],'desc_error');

    }

?>

<form method="post" action="">
    <p>Book Title:<input type="text" name="title" maxlength="100" value=""/></p>
     <p>Desc:<input type="text" name="desc" maxlength="100" value=""/></p>

    <p><input type="submit" name="submit" value="Submit"/></p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:28:50.523

您的代码在逻辑上没有意义。首先，您检查是否`$input`为空字符串，或者不是，然后在第一次检查中......您再次进行相同的精确检查。由于`if`s 是按顺序计算的，并且 input 永远不会是空字符串，因此第一个`if`将始终执行。

然后，你的第一个“其他”；它只会在`$input`变量为空字符串时执行。我可以看到你正在尝试做什么，但它不会像现在这样工作。为了让它工作，它必须看起来像下面这样：

```
function sanitizeText($input,$error) {
    global $errors;
    global $valid;

    $input_val = filter_var($_POST[$input], FILTER_SANITIZE_STRING);

    if ($input_val != '') {
        $valid = TRUE;
        return $input;
    }
    else if ($input_val == '') {
        $valid = FALSE;
        echo $errors[$error].'<br />';
    }
}
if(isset($_POST['submit']))
{
    $title=sanitizeText('title','title_error');
    $desc=sanitizeText('desc','desc_error');

} 
```

如果输入值不是空字符串，它将返回输入值。如果是，它不会返回任何内容，而是会回显相应的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:50:24.907

我认为您正在尝试使用 php 验证表单，您也可以使用 javascript 进行验证，但要使用 php 进行验证，请参阅以下链接。

[http://myphpform.com/required-optional-fields.php](http://myphpform.com/required-optional-fields.php)

[http://coredogs.com/lesson/form-and-php-validation-one-page](http://coredogs.com/lesson/form-and-php-validation-one-page)

[http://www.phpf1.com/tutorial/php-form.html?page=3](http://www.phpf1.com/tutorial/php-form.html?page=3)

和

[http://www.montanaprogrammer.com/php-web-programming/php-form-validation/](http://www.montanaprogrammer.com/php-web-programming/php-form-validation/)

# google-maps - 谷歌地图上的实时图像（巴士）

> ID：14374205
> 
> 赞同：-1
> 
> 时间：2013-01-17T07:36:06.883
> 
> 标签：google-maps, google-maps-api-3

我只是有一个简单的问题。我有来自描述公共汽车位置（经度和纬度）的网站的 JSON 数据的实时提要。我想在谷歌地图上实时显示这辆公共汽车。查询总线 API 和解析 JSON 数据不是问题，但我对如何在实际地图上实际抛出总线图像感到很困惑。一个快速的解释或教程将是惊人的！

我搜索了 stackOverflow 并用谷歌搜索了很多，但找不到任何东西。

谢谢！-乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:12:57.917

Google Maps API 会将您在地图上的巴士称为“标记”。默认情况下，标记是放置图钉。

你需要能够做一些事情。

1.  以正确的缩放比例绘制地图，并为巴士的初始位置创建一个标记。请参阅[Google 地图 API 文档](https://developers.google.com/maps/documentation/javascript/tutorial)。如果您在解析 JSON 时没有问题，这应该很容易。
2.  **将默认标记变成总线。**看看这个在邦迪海滩使用海滩巡逻旗的例子...... [https://developers.google.com/maps/documentation/javascript/overlays#Markers](https://developers.google.com/maps/documentation/javascript/overlays#Markers)
3.  **根据您的数据馈送更新标记位置。**这是一个现有的 SO 问题，涉及... [https://stackoverflow.com/a/9738698/828858](https://stackoverflow.com/a/9738698/828858)

# java - 解析时间字符串和更改时区

> ID：14374208
> 
> 赞同：0
> 
> 时间：2013-01-17T07:36:10.633
> 
> 标签：java, android

我正在从提供时间戳的 Web 服务中检索数据，`HH:mm:ss`我正在使用 SimpleDateFormat 将此字符串转换为日期对象，然后在需要时更改其时区，并将其从 24 小时转换为 12 小时时间。

问题：当输入时间为上午 12 点时，它看起来像这样`00:00:00` ，所以 12:05 是`00:05:00` 当我得到结果时，它们看起来像这样。

喂食的`22:00:00`次数`00:01:00`

检索`10:00 pm`到的时间`0:01 am`

我一直在环顾四周，看看是否有办法解决它，但我觉得我需要做一个特殊情况并自己解析字符串，如果它在小时的地方有一个 0。

任何帮助将不胜感激。

```
public String parseTime(String time) {
    String mTime = null;
    TimeZone thisTimeZone = TimeZone.getDefault();
    TimeZone ourTimeZone = TimeZone.getTimeZone("America/Los_Angeles");
    SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss", Locale.US);
    SimpleDateFormat sdfThisTimeZone = new SimpleDateFormat("K:mm:a",
            Locale.getDefault());

    Date date = null;
    sdfThisTimeZone.setTimeZone(thisTimeZone);
    sdf.setTimeZone(ourTimeZone);
    try {
        date = sdf.parse(time);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    mTime = sdfThisTimeZone.format(date.getTime());
//**********************************New: Does Not Work********************************
            DecimalFormat nft = new DecimalFormat("00"); mTime = nft.format(mTime);
//**********************************New **********************************************
    return mTime;
} 
```

我已经使用 DecimalFormat 尝试了该行，但我现在只是将它复制到代码中，看看它是否可以工作。不幸的是，它使我的应用程序崩溃。我发布的代码是在异步任务中执行的，所以我不确定这是否有任何区别，但仍然感谢您的帮助。最终我会解决这个问题。但就目前而言，这是一个仅在凌晨 12 点出现 1 小时的小细节，我将继续讨论更大的问题。如果有人能对此有所了解，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:04:49.103

字符串 getConvertedDateTime（字符串日期时间）{

```
 String convertedDateTime = dateTime;

    if (convertedDateTime != null

            && !convertedDateTime.equalsIgnoreCase("")

            && !convertedDateTime.equalsIgnoreCase("null")) {

        try {

            SimpleDateFormat formatter = new SimpleDateFormat("HH:mm:ss");

            Calendar calendar = Calendar.getInstance();

            java.util.Date convertedDate = formatter
                    .parse(convertedDateTime);
        formatter.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles"));
        convertedDateTime = formatter.format(convertedDate.getTime());

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return convertedDateTime;
} 
```

# obout - 渲染超窗体控件时出错

> ID：14374209
> 
> 赞同：1
> 
> 时间：2013-01-17T07:36:18.757
> 
> 标签：obout

我想将 Obout Suite 超窗体控件添加到我的网页。控件未在设计页面上呈现。它给出了一个**错误**说

> > 呈现控件时出错。你调用的对象是空的'。

我添加了`@Register`指令：

```
 (<%@ Register TagPrefix="obout" Namespace="Obout.SuperForm" Assembly="obout_SuperForm" %>) 
```

到我的页面顶部。

谁能告诉我出了什么问题？

# windows-phone-8 - Windows Phone 8 中的通话录音

> ID：14374223
> 
> 赞同：8
> 
> 时间：2013-01-17T07:37:00.030
> 
> 标签：windows-phone-8

*   你能把我路由到能够在 Windows Phone 8 中拦截传入和传出电话并记录通话对话的 API 吗？

*   一旦录制正在进行中，有没有办法同时打包这些数据并将其发送到远程服务器？

*   最后，我可以将此通话记录应用程序设置为在有来电和去电时自动调用吗？

*   由于 SIP 未在 Windows Phone 8 中公开，我们是否有替代方法来达到此目的（比如 3rd 方库）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T00:27:18.903

> 你能把我路由到能够在 Windows Phone 8 中拦截传入和传出电话并记录通话对话的 API 吗？

不，没有办法拦截 Windows Phone 上的任何内容。（这使您的其余问题无效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T12:03:03.370

有一种可以识别来电的交互方式，例如：**TrueCaller**应用程序的新版本，它将其应用程序与系统的**Network+**应用程序集成，然后就可以了，但它的特殊 api 是微软（不是诺基亚）提供给他们的我从过去 2 个月开始尝试与他们联系，我将在很短的时间内收到好消息/坏消息。

谢谢。

# c# - 缺少 OpenNetCF WebRequestMethod 类

> ID：14374225
> 
> 赞同：4
> 
> 时间：2013-01-17T07:37:07.177
> 
> 标签：c#, compact-framework, windows-ce, webrequest, opennetcf

我已经从此[链接](http://www.opennetcf.com/Products/SmartDeviceFramework.aspx)下载了 OpenNETCF 的社区版，并尝试访问 FTP。但我无法在 OpenNETCF.Net 或 OpenNETCF.Net.Ftp 命名空间中找到 WebRequestMethods 类。如果我遗漏了什么，请提供帮助并提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:46:47.793

OpenNETCF 命名空间没有 WebRequestmethods.Ftp 项。它们只是常量字符串，因此您可以轻松地创建它们，如下所示：

```
public static class WebRequestMethods
{
    public const string ListDirectoryDetails = "LIST";
    public const string DownloadFile = "RETR";
    // etc.
} 
```

# vim - 带有 VIM 折叠的目录

> ID：14374227
> 
> 赞同：3
> 
> 时间：2013-01-17T07:37:23.510
> 
> 标签：vim, folding

很久以前有一个编辑器叫MultiEdit。它有一个我在所有强大的 VIM 中都找不到的功能。在 MultiEdit 中，我可以按一些热键，如果我只能在当前文件中看到所有函数的第一行（让它成为 C 源代码），它会显示类似目录（又名压缩模式，又名大纲）的内容。然后我可以将光标移动到我需要的功能上，按回车后，模式将切换到正常状态，我将处于我需要的功能中。对于喜欢将许多功能放在一个文件中的人来说非常有用。这个功能使用起来非常简单：一个配置选项用于输入正则表达式以选择标题行，一个热键用于模式切换。

VIM 有折叠功能。但这是不同的。折叠隐藏部分文件并显示折叠线指示器。为目录显示指定要在折叠中隐藏的内容要困难得多：您需要从标题行开始折叠并在下一个标题行之前结束。这比选择标题的简单正则表达式更复杂。

我非常想要这个功能，我什至编写了[VIM 宏](https://gist.github.com/4554184)来模拟这种 MultiEdit 行为，尽管我不太了解 VIM。我写它的部分原因是学习一门新语言和编写宏比弄清楚 VIM 折叠模块的复杂性更容易。不幸的是，升级 VIM 后，这个宏现在不起作用（无限循环？）。我很久以前就写过它，我对VIM 所知道的一点点都被遗忘了，我现在无法修复它。（编辑：我已经修复了我的脚本。感谢@romainl 的链接）。

我的问题是如何在 VIM 中显示这个目录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T07:49:39.010

Drew Neil 最近的这个[vimcast](http://vimcasts.org/episodes/how-to-fold/)解释了折叠的一般性，[这个](http://vimcasts.org/episodes/writing-a-custom-fold-expression/)过程经历了创建你（可能）追求的那种折叠的过程。

根据您使用的语言和您的编码风格，一些简单的事情

```
set foldmethod=marker
set foldmarker={,} 
```

并且`zM`可以让你走很长一段路：

![CSS 折叠](../Images/3ff8b371adf606597fed71ed659493b0.png)

如果您想自定义显示哪些信息，上面的第二个链接几乎肯定正是您所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:24:24.957

看看 ctags 和 vim 插件[tagbar](http://majutsushi.github.com/tagbar/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:17:52.093

您还可以查看带有扩展[Unite-Ouline](https://github.com/h1mesuke/unite-outline)[的](https://github.com/Shougo/unite.vim)vim 插件， 它提供的行为与您描述的非常接近。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T03:04:35.633

这不是很好，但你试过`setlocal foldmethod=syntax`吗？它似乎在 Windows 上的 7.3 中做得不错。...虽然我刚刚意识到我们的编码标准在行尾而不是在新行上有一个块的左大括号，如果我将它改为在新行上，它的效果会大大降低。

# python - 在 Python 中将 Qt 图像转换为 Open CV 中的图像

> ID：14374231
> 
> 赞同：0
> 
> 时间：2013-01-17T07:37:46.837
> 
> 标签：python, qt, ubuntu, opencv

我在 Qt 中有一个图像，我想使用 OpenCV 处理它。所以我需要将图像转换为 IpIImage 格式。我正在 Ubuntu 中使用 Python。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:29:15.470

我不是 python 专家，但[这个链接可以帮助你](http://matthewshotton.wordpress.com/2011/03/31/python-opencv-iplimage-to-pyqt-qimage/)，它提供了你需要的反向功能，所以我想有可能从中进行转换。

# css - 如何修复 div 的悬停属性？

> ID：14374238
> 
> 赞同：0
> 
> 时间：2013-01-17T07:38:30.417
> 
> 标签：css, html, hover

人们会认为更改 :hover 父元素会将转换应用于每个子元素。然而，

```
<a href="" class="pressRelease"><div class="pressRelease">
    <div class="timestamp">
        <p class="timestamp">02 Feb 2012</p>
    </div>
    <div class="pressReleaseTitle">
        <p class="pressReleasetitle">release title</p>
    </div>
</div></a>

div.pressRelease :hover {
    background-color:#F2F2F2
}

div.timestamp {
    float:left;
    width: 110px;
    padding-top:10px;
    padding-bottom:21px;
}

div.pressReleaseTitle {
    float:right;
    width:498px;
    padding-top:23px;
    padding-bottom:21px;
    padding-left:25px;
}

a.pressRelease {
    text-decoration:none;
    color:#767676;
    display:block;
    background-color:#063
} 
```

我在 HTML 和 CSS 文件中有这段代码，行为很奇怪：当我将鼠标悬停在时间戳上时，只有时间戳背景颜色发生变化，而新闻稿标题的颜色保持不变。显然，我希望突出显示整个新闻稿

有想法该怎么解决这个吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:40:43.117

### 错误：

代替：

```
div.pressRelease :hover 
```

和：

```
div.pressRelease:hover 
```

前面不应该有任何空格`:hover`。

### 建议：

1.  您编写 HTML 的方式无效。内联元素`<a>`不能包含块元素`<div>`。

2.  浏览器将忽略周围的`<a>`标签。因此，如果您提供如下代码：

    ```
     <a><div><p></p></div></a> 
    ```

    它将呈现为

    ```
     <a></a><div><p></p></div> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:42:29.503

添加`oveflow:auto`到`a`标签以包装内部元素。

并从中删除 div`div.pressRelease:hover`

```
.pressRelease:hover {
    background-color:#F2F2F2
}

div.timestamp {
    float:left;
    width: 110px;
    padding-top:10px;
    padding-bottom:21px;
}

div.pressReleaseTitle {
    float:right;
    width:498px;
    padding-top:23px;
    padding-bottom:21px;
    padding-left:25px;
}

a.pressRelease {
    text-decoration:none;
    color:#767676;
    display:block;
    background-color:#063; overflow:auto
} 
```

**[演示](http://jsfiddle.net/nKA7U/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T07:58:25.157

尝试给`float:left`父 div，因为它没有用 'float' 包装子元素

除了 Praveen 提到的错误修复

```
div.pressRelease {
    float: left;
} 
```

# ios - iOS + MKMapView 基于用户触摸的绘图

> ID：14374240
> 
> 赞同：30
> 
> 时间：2013-01-17T07:38:42.107
> 
> 标签：ios, uiview, touch, mapkit

我已经为这个问题进行了很多搜索，但他们似乎都没有完全按照我的意愿行事。很多教程向我展示了如何在代码中添加线条和多边形，但不是手绘。

问题如下：

我正在构建一个房地产应用程序。如果用户在上面，`MKMapView`它可以在他/她想要购买/租用房屋的某个区域周围绘制一个矩形/圆形/...。然后我需要显示用户选择的区域内对应的结果。

目前我有一个`UIView`在`MKMapView`我做一些自定义绘图的地方，有没有办法将点转换为坐标或..？或者这完全不是这样做的方式？我也听说过`MKMapOverlayView`，等等。但我不确定如何使用它。

谁能指出我正确的方向，或者他有一些示例代码或教程可以帮助我完成我需要的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-03T23:33:38.573

我有一个基本上可以做到这一点的应用程序。我有一个地图视图，屏幕顶部有一个工具栏。当您按下该工具栏上的按钮时，您现在处于可以在地图上滑动手指的模式。滑动的开始和结束将代表一个矩形的角。该应用程序将绘制一个半透明的蓝色矩形叠加层以显示您选择的区域。当您抬起手指时，矩形选择完成，应用程序开始在我的数据库中搜索位置。

我不处理圆圈，但我认为你可以做类似的事情，你有两种选择模式（矩形或圆形）。在圆形选择模式下，滑动的起点和终点可以代表圆心和边缘（半径）。或者，直径线的两端。我会把那部分留给你。

## 执行

首先，我定义了一个透明的覆盖层，它处理选择（OverlaySelectionView.h）：

```
#import <QuartzCore/QuartzCore.h>
#import <MapKit/MapKit.h>

@protocol OverlaySelectionViewDelegate
// callback when user finishes selecting map region
- (void) areaSelected: (CGRect)screenArea;
@end

@interface OverlaySelectionView : UIView {
@private    
    UIView* dragArea;
    CGRect dragAreaBounds;
    id<OverlaySelectionViewDelegate> delegate;
}

@property (nonatomic, assign) id<OverlaySelectionViewDelegate> delegate;

@end 
```

和 OverlaySelectionView.m：

```
#import "OverlaySelectionView.h"

@interface OverlaySelectionView()
@property (nonatomic, retain) UIView* dragArea;
@end

@implementation OverlaySelectionView

@synthesize dragArea;
@synthesize delegate;

- (void) initialize {
    dragAreaBounds = CGRectMake(0, 0, 0, 0);
    self.userInteractionEnabled = YES;
    self.multipleTouchEnabled = NO;
    self.backgroundColor = [UIColor clearColor];
    self.opaque = NO;
    self.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
}

- (id) initWithCoder: (NSCoder*) coder {
    self = [super initWithCoder: coder];
    if (self != nil) {
        [self initialize];
    }
    return self;
}

- (id) initWithFrame: (CGRect) frame {
    self = [super initWithFrame: frame];
    if (self != nil) {
        [self initialize];
    }
    return self;
}

- (void)drawRect:(CGRect)rect {
    // do nothing
}

#pragma mark - Touch handling

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch* touch = [[event allTouches] anyObject];
    dragAreaBounds.origin = [touch locationInView:self];
}

- (void)handleTouch:(UIEvent *)event {
    UITouch* touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:self];

    dragAreaBounds.size.height = location.y - dragAreaBounds.origin.y;
    dragAreaBounds.size.width = location.x - dragAreaBounds.origin.x;

    if (self.dragArea == nil) {
        UIView* area = [[UIView alloc] initWithFrame: dragAreaBounds];
        area.backgroundColor = [UIColor blueColor];
        area.opaque = NO;
        area.alpha = 0.3f;
        area.userInteractionEnabled = NO;
        self.dragArea = area;
        [self addSubview: self.dragArea];
        [dragArea release];
    } else {
        self.dragArea.frame = dragAreaBounds;
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self handleTouch: event];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [self handleTouch: event];

    if (self.delegate != nil) {
        [delegate areaSelected: dragAreaBounds];
    }
    [self initialize];
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [self initialize];
    [self.dragArea removeFromSuperview];
    self.dragArea = nil;
}

#pragma mark -

- (void) dealloc {
    [dragArea release];
    [super dealloc];
}

@end 
```

然后我有一个实现上面定义的协议的类（MapViewController.h）：

```
#import "OverlaySelectionView.h"

typedef struct {
    CLLocationDegrees minLatitude;
    CLLocationDegrees maxLatitude;
    CLLocationDegrees minLongitude;
    CLLocationDegrees maxLongitude;
} LocationBounds;

@interface MapViewController : UIViewController<MKMapViewDelegate, OverlaySelectionViewDelegate> {
    LocationBounds searchBounds;
    UIBarButtonItem* areaButton; 
```

在我的 MapViewController.m 中，该`areaSelected`方法是我执行将触摸坐标转换为地理坐标的地方`convertPoint:toCoordinateFromView:`：

```
#pragma mark - OverlaySelectionViewDelegate

- (void) areaSelected: (CGRect)screenArea
{       
    self.areaButton.style = UIBarButtonItemStyleBordered;
    self.areaButton.title = @"Area";

    CGPoint point = screenArea.origin;
    // we must account for upper nav bar height!
    point.y -= 44;
    CLLocationCoordinate2D upperLeft = [mapView convertPoint: point toCoordinateFromView: mapView];
    point.x += screenArea.size.width;
    CLLocationCoordinate2D upperRight = [mapView convertPoint: point toCoordinateFromView: mapView];
    point.x -= screenArea.size.width;
    point.y += screenArea.size.height;
    CLLocationCoordinate2D lowerLeft = [mapView convertPoint: point toCoordinateFromView: mapView];
    point.x += screenArea.size.width;
    CLLocationCoordinate2D lowerRight = [mapView convertPoint: point toCoordinateFromView: mapView];

    searchBounds.minLatitude = MIN(lowerLeft.latitude, lowerRight.latitude);
    searchBounds.minLongitude = MIN(upperLeft.longitude, lowerLeft.longitude);
    searchBounds.maxLatitude = MAX(upperLeft.latitude, upperRight.latitude);
    searchBounds.maxLongitude = MAX(upperRight.longitude, lowerRight.longitude);

    // TODO: comment out to keep search rectangle on screen
    [[self.view.subviews lastObject] removeFromSuperview];

    [self performSelectorInBackground: @selector(lookupHistoryByArea) withObject: nil];
}

// this action is triggered when user selects the Area button to start selecting area
// TODO: connect this to areaButton yourself (I did it in Interface Builder)
- (IBAction) selectArea: (id) sender
{
    PoliteAlertView* message = [[PoliteAlertView alloc] initWithTitle: @"Information"
                                                              message: @"Select an area to search by dragging your finger across the map"
                                                             delegate: self
                                                              keyName: @"swipe_msg_read"
                                                    cancelButtonTitle: @"Ok"
                                                    otherButtonTitles: nil];
    [message show];
    [message release];

    OverlaySelectionView* overlay = [[OverlaySelectionView alloc] initWithFrame: self.view.frame];
    overlay.delegate = self;
    [self.view addSubview: overlay];
    [overlay release];

    self.areaButton.style = UIBarButtonItemStyleDone;
    self.areaButton.title = @"Swipe";
} 
```

你会注意到 my`MapViewController`有一个属性，`areaButton`. 那是我工具栏上的一个按钮，通常显示为**Area**。用户按下它后，他们处于*区域选择模式*，此时按钮标签变为“**滑动**”以提醒他们滑动（可能不是最好的 UI，但这就是我所拥有的）。

另请注意，当用户按下**区域**进入区域选择模式时，我会向他们显示一个警报，告诉他们需要滑动。由于这可能只是他们需要查看一次的提醒，因此我使用了自己的[PoliteAlertView](http://www.enscand.com/roller/enscand/entry/uialertview_that_users_can_suppress)，这是`UIAlertView`用户可以禁止的自定义（不要再次显示警报）。

My`lookupHistoryByArea`只是一种方法，它通过保存的`searchBounds`（在后台）搜索我的数据库中的位置，然后在找到的位置在地图上绘制新的叠加层。对于您的应用，这显然会有所不同。

## 限制

*   由于这是为了让用户选择*近似*区域，因此我认为地理精度并不重要。听起来也不应该在您的应用程序中。因此，我只绘制 90 度角的矩形，不考虑地球曲率等。对于只有几英里的区域，这应该没问题。

*   我不得不对你基于短语**触摸的绘图**做出一些假设。我决定实现该应用程序的最简单方法，也是触摸屏用户最容易使用的方法，就是通过一次滑动来简单地定义区域。 *绘制*一个带有触摸的矩形需要 4 次滑动而不是 1 次，这会引入非闭合矩形的复杂性，产生草率的形状，并且可能无法获得用户想要的东西。所以，我试图保持 UI 简单。如果您真的希望用户在地图上*绘图，*[请参阅执行该操作的相关答案](https://stackoverflow.com/a/14726964/119114)。

*   这个应用程序是在 ARC 之前编写的，并且没有针对 ARC 进行更改。

*   在我的应用程序中，我确实对在主（UI）线程**和**后台（搜索）线程中访问的一些变量使用互斥锁。我为这个例子取出了那个代码。根据您的数据库搜索的工作方式以及您选择运行搜索的方式（GCD 等），您应该确保审核您自己的线程安全性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-17T13:28:40.250

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import <MapKit/MapKit.h>

@interface ViewController () <MKMapViewDelegate>
@property (weak, nonatomic) IBOutlet MKMapView *mapView;
@property (nonatomic, weak) MKPolyline *polyLine;
@property (nonatomic, strong) NSMutableArray *coordinates;
@property (weak, nonatomic) IBOutlet UIButton *drawPolygonButton;
@property (nonatomic) BOOL isDrawingPolygon;
@end

@implementation ViewController
@synthesize coordinates = _coordinates;

- (NSMutableArray*)coordinates
{
    if(_coordinates == nil) _coordinates = [[NSMutableArray alloc] init];
    return _coordinates;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (IBAction)didTouchUpInsideDrawButton:(UIButton*)sender
{
    if(self.isDrawingPolygon == NO) {

        self.isDrawingPolygon = YES;
        [self.drawPolygonButton setTitle:@"done" forState:UIControlStateNormal];
        [self.coordinates removeAllObjects];
        self.mapView.userInteractionEnabled = NO;

    } else {

        NSInteger numberOfPoints = [self.coordinates count];

        if (numberOfPoints > 2)
        {
            CLLocationCoordinate2D points[numberOfPoints];
            for (NSInteger i = 0; i < numberOfPoints; i++)
                points[i] = [self.coordinates[i] MKCoordinateValue];
            [self.mapView addOverlay:[MKPolygon polygonWithCoordinates:points count:numberOfPoints]];
        }

        if (self.polyLine)
            [self.mapView removeOverlay:self.polyLine];

        self.isDrawingPolygon = NO;
        [self.drawPolygonButton setTitle:@"draw" forState:UIControlStateNormal];
        self.mapView.userInteractionEnabled = YES;

    }
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (self.isDrawingPolygon == NO)
        return;

    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.mapView];
    CLLocationCoordinate2D coordinate = [self.mapView convertPoint:location toCoordinateFromView:self.mapView];

    [self addCoordinate:coordinate];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (self.isDrawingPolygon == NO)
        return;

    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.mapView];
    CLLocationCoordinate2D coordinate = [self.mapView convertPoint:location toCoordinateFromView:self.mapView];

    [self addCoordinate:coordinate];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (self.isDrawingPolygon == NO)
        return;

    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.mapView];
    CLLocationCoordinate2D coordinate = [self.mapView convertPoint:location toCoordinateFromView:self.mapView];

    [self addCoordinate:coordinate];
    [self didTouchUpInsideDrawButton:nil];

}

- (void)addCoordinate:(CLLocationCoordinate2D)coordinate
{
    [self.coordinates addObject:[NSValue valueWithMKCoordinate:coordinate]];

    NSInteger numberOfPoints = [self.coordinates count];
    if (numberOfPoints > 2) {
        MKPolyline *oldPolyLine = self.polyLine;
        CLLocationCoordinate2D points[numberOfPoints];
        for (NSInteger i = 0; i < numberOfPoints; i++) {
            points[i] = [self.coordinates[i] MKCoordinateValue];
        }
        MKPolyline *newPolyLine = [MKPolyline polylineWithCoordinates:points count:numberOfPoints];
        [self.mapView addOverlay:newPolyLine];

        self.polyLine = newPolyLine;
        if (oldPolyLine) {
            [self.mapView removeOverlay:oldPolyLine];
        }
    }
}

#pragma mark - MKMapViewDelegate

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    MKOverlayPathView *overlayPathView;

    if ([overlay isKindOfClass:[MKPolygon class]])
    {
        overlayPathView = [[MKPolygonView alloc] initWithPolygon:(MKPolygon*)overlay];

        overlayPathView.fillColor = [[UIColor cyanColor] colorWithAlphaComponent:0.2];
        overlayPathView.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        overlayPathView.lineWidth = 3;

        return overlayPathView;
    }

    else if ([overlay isKindOfClass:[MKPolyline class]])
    {
        overlayPathView = [[MKPolylineView alloc] initWithPolyline:(MKPolyline *)overlay];

        overlayPathView.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.7];
        overlayPathView.lineWidth = 3;

        return overlayPathView;
    }

    return nil;
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    static NSString * const annotationIdentifier = @"CustomAnnotation";

    MKAnnotationView *annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];

    if (annotationView)
    {
        annotationView.annotation = annotation;
    }
    else
    {
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:annotationIdentifier];
        annotationView.image = [UIImage imageNamed:@"annotation.png"];
        annotationView.alpha = 0.5;
    }

    annotationView.canShowCallout = NO;

    return annotationView;
}

@end 
```

或者您可以在这里找到整个项目： [https ://github.com/tazihosniomar/MapKitDrawing](https://github.com/tazihosniomar/MapKitDrawing)

我希望它会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T09:24:02.287

这是我将触摸转换`CLLocation`为`MKMapView`.

它也适用于*谷歌地图*和*苹果地图*：

```
- (void)viewDidLoad {
    // ...

    // ... where the _customMapView is a MKMapView object;

    // find the gesture recogniser of the map
    UIGestureRecognizer *_factoryDoubleTapGesture = nil;
    NSArray *_gestureRecognizersArray = [_customMapView gestureRecognizers];
    for (UIGestureRecognizer *_tempRecogniser in _gestureRecognizersArray) {
        if ([_tempRecogniser isKindOfClass:[UITapGestureRecognizer class]]) {
            if ([(UITapGestureRecognizer *)_tempRecogniser numberOfTapsRequired] == 2) {
                _factoryDoubleTapGesture = _tempRecogniser;
                break;
            }
        }
    }

    // my tap gesture recogniser
    UITapGestureRecognizer *_locationTapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(mapLocationTouchedUpInside:)];
    if (_factoryDoubleTapGesture) [_locationTapGesture requireGestureRecognizerToFail:_factoryDoubleTapGesture];
    [_customMapView addGestureRecognizer:_locationTapGesture];

    // ...
} 
```

和...

```
- (void)mapLocationTouchedUpInside:(UITapGestureRecognizer *)sender {
    CGPoint _tapPoint = [sender locationInView:_customMapView];
    CLLocationCoordinate2D _coordinates = [_customMapView convertPoint:_tapPoint toCoordinateFromView:_customMapView];

    // ... do whatever you'd like with the coordinates
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T22:00:11.750

试试 MKOverlayPathView。通过在 MKMapView 上绘制路径来表示区域的问题是，除非您知道缩放比例，否则您不太了解。所以你必须跟踪它。

# asp.net-mvc - 没有为此对象定义无参数构造函数。在 ASP.NET MVC 控制器中

> ID：14374242
> 
> 赞同：10
> 
> 时间：2013-01-17T07:38:56.333
> 
> 标签：asp.net-mvc

我相信这很简单，但我有点卡在这里。为我的应用定义的路由只是默认值。我定义了以下控制器。

```
namespace Baynes.Wedding.Web.Controllers
{
    public class AdminController : Controller
    {
        private readonly IAuthProvider _authProvider;
        private readonly IDocumentRepository _documentRepository;

        public AdminController(IAuthProvider authProvider, IDocumentRepository documentRepository)
        {
            _authProvider = authProvider;
            _documentRepository = documentRepository;
        }

        public ViewResult EditDocument(int id)
        {
            var document = _documentRepository.Select(id);

            return View(new DocumentEditViewModel(document));
        }

        [HttpPost]
        public ActionResult EditDocument(DocumentEditViewModel model)
        {
            if (ModelState.IsValid)
            {
                _documentRepository.Update(model.ToDocument());
                return RedirectToAction("ListDocuments");
            }

            return View();
        }
    }
} 
```

当我导航到`/Admin/EditDocument/1/`然后第一个动作完全按预期执行时，呈现以下视图：-

```
<h2>@ViewBag.Title</h2>
@using (Html.BeginForm("EditDocument", "Admin", FormMethod.Post)) {
    @Html.ValidationSummary(true)
    @Html.HiddenFor(m => Model.Id)
    <div>
        @Html.LabelFor(m => Model.Title)
    </div>
    <div>
        @Html.TextBoxFor(m => Model.Title)
    </div>
    <div>
        @Html.LabelFor(m => Model.Body)
    </div>
    <div>
        @Html.TextAreaFor(m => Model.Body)
    </div>
    <div>
        @Html.LabelFor(m => Model.Url)
    </div>
    <div>
        @Html.TextBoxFor(m => Model.Url)
    </div>

    <input type="submit" value="Edit" />
} 
```

在提交这个我得到一个错误： -

`No parameterless constructor defined for this object.`其他问题看似相关的问题[MVC: No parameterless constructor defined for this object 这](https://stackoverflow.com/questions/12605445/mvc-no-parameterless-constructor-defined-for-this-object)表明它与 IoC 容器没有正确设置有关，但第一个动作执行没有问题的事实肯定意味着这不是问题这里？

任何帮助将不胜感激。

问候。

西蒙

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T07:47:29.670

添加到类 DocumentEditViewModel 默认构造函数

```
public DocumentEditViewModel (){} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T07:51:22.087

MVC 框架正在尝试创建 DocumentViewModel 类的实例，但它找不到可公开访问的默认构造函数（不接受任何参数）。您可以定义像 @simplyDenis 建议的这样的默认构造函数，也可以定义一个可以使用自定义构造函数创建实例的 cusotm ModelBinder。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T07:50:20.607

DocumentEditViewModel 是否有无参数构造函数？我相信这是在您的帖子视图上进行模型绑定所必需的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-01T20:05:50.883

很可能你有依赖注入机制。但是 MVC 需要“特殊”的方式来注册容器。查看此链接[将 Unity 添加到您的 Web 应用程序、模式和实践](https://msdn.microsoft.com/en-us/library/Dn507440(v=PandP.30).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-17T20:58:03.890

我有一个稍微不同的问题。我的模型课程之一是`abstract`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-14T10:46:28.427

如果 DocumentEditViewModel 构造函数的可访问性级别受到保护，您也会得到同样的错误。

# php - 在使用准备好的语句开始新的语句之前关闭语句对象

> ID：14374243
> 
> 赞同：2
> 
> 时间：2013-01-17T07:38:57.757
> 
> 标签：php, mysqli, prepared-statement

我对使用准备好的语句很陌生，想知道是否应该在每次调用后关闭 stmt_init() 还是可以保持打开状态？

```
$stmt = $mysqli->stmt_init();

if($stmt->prepare("SELECT player_draws, player_turn, player_passes, swapped FROM ".$prefix."_gameplayer WHERE fk_game_id = ? AND fk_player_id = ?")){

    $stmt->bind_param('ii', $currgame, $playerid);
    $stmt->execute();
    $stmt->bind_result($udraws, $uturn, $upass, $uswaps);
    $stmt->fetch();

    echo $udraws.'-'.$uturn.'-'.$upass.'-'.$uswaps.'<br>';

    // Close statement object
    $stmt->close(); 

}

$stmt = $mysqli->stmt_init();

if($stmt->prepare("SELECT player_draws, player_turn, player_passes, swapped FROM ".$prefix."_gameplayer WHERE fk_game_id = ? AND fk_player_id != ?")){

    $stmt->bind_param('ii', $currgame, $playerid);
    $stmt->execute();
    $stmt->bind_result($odraws, $oturn, $opass, $oswaps);
    $stmt->fetch();

    echo $odraws.'-'.$oturn.'-'.$opass.'-'.$oswaps.'<br>';

    // Close statement object
    $stmt->close(); 

} 
```

考虑到调用，其中一个对数据库更好吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:51:51.573

*...准备语句或参数化语句用于高效地重复执行同一语句...*

**编辑** 由于查询不同，因此每个查询都需要单独准备，但您应该能够重用 $mysqli->stmt_init();

在旁注中，有人在[评论](http://php.net/manual/en/mysqli-stmt.close.php)中提到了这一点：

*如果您在循环中使用 bind_param 等重复语句以进行更大的操作。我认为用 stmt->close 清理它会很好。但它总是在 aprox 之后出现错误。250 次操作。当我尝试使用 stmt->reset 时，它对我有用。*

# c++ - 如果我只有一个基类指针，如何使用派生类？

> ID：14374244
> 
> 赞同：2
> 
> 时间：2013-01-17T07:39:08.960
> 
> 标签：c++, polymorphism, inventory

简而言之，这就是我所得到的。

1.  我有一个基础项目类，从中派生药水、设备、咒语等，并且从这些类派生了几个类，依此类推。注意：一些派生类具有非虚拟类特定的成员函数/数据类型。

2.  我还创建了一个“随机”装甲/武器生成器。

我想要的是这样的库存：

```
struct Hero_Inventory
{
   std::vector<Spell*> Spell_Inventory;
   std::vector<Potion*> Potion_Inventory;
   std::vector<Equipment*> Equipment_Inventory; 

   Hero_Inventory() {}
}; 
```

为我的法术和药水创建一个容器（库存）非常简单。因为它们将是预定义的。使用多态性和指针不会有问题

我的主要问题是弄清楚如何存储和使用（例如访问武器类的特定成员函数）我随机生成的武器/盔甲（它们都是从设备派生的）。

我希望我所有的“设备”都放在一个容器中。

我在几个函数中生成了我所有的设备，所以当我完成生成过程并最终得到如下结果时：

```
Equipment * TestArmor = new Armor(/* Bunch of parameters go here */); 
```

我不知道如何处理它，因为一旦该函数超出范围，我就会失去该指针。如果没有指针/引用，我就不能使用多态性，这使我可以将我的设备全部保存在一个容器中。

在这一点上我真的很迷茫，我正在寻找人们可以提出的任何建议或替代方案。如果您需要更多代码，我会发布它，只需告诉我您感兴趣的部分。

抱歉，如果我含糊不清，这是我的第一篇文章。我通常很擅长自己解决问题，但这件事让我胜过。如果有人需要更多信息，请询问，我会尽力提供。

在此先感谢，-瑞恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:06:19.977

创建用于操作`Equipment`对象的统一接口：

```
class Equipment {
public:
    virtual void render(Renderer& renderer) = 0;
    virtual void createController(ControllerManager& controllerManager) = 0;
    virtual void load(std::istream& input) = 0;
    virtual void save(std::ostream& output) = 0;
}; 
```

该功能`createController`很有趣，因为设备将能够告诉`ControllerManager`如何创建将操纵其精确值的东西。

如果你想要一个允许与其他`Equipment`对象交互的函数，你可能需要[`Visitor Pattern`](http://en.wikipedia.org/wiki/Visitor_pattern). 这是一种基于多种类型而不是单一类型引入多态性的方法。

# php - 我们如何在 drupal 7 中使用 ajax 回调函数将下拉值作为参数传递？

> ID：14374252
> 
> 赞同：1
> 
> 时间：2013-01-17T07:39:45.083
> 
> 标签：php, javascript, ajax, drupal, drupal-7

我想将 ajax 回调函数中的下拉值作为参数 ($user_id,$selected) onchange 传递，但我没有在这个 ajax 回调函数 onchange 事件中获得 $selected 值**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:08:17.180

```
$form['changethis'] = array( 
'#type' => 'select', 
'#title' => t('Rece/Paid'), 
'#description' => t('See Records'), 
'#options' => $options, 
'#default_value' => $selected, 
'#ajax' => array( 
  'callback' => 'ajax_callback', 
  'wrapper' => 'replace_textfield_div', 
  'event' => 'change', 
  'progress' => array( 'type' => 'none', ),
 ), 
); 
```

以上添加是为了便于阅读。

您的选择是否发布了某些内容但没有得到结果？或者它根本没有发布任何东西？

您的代码看起来不错，但您确定要使用 ajax 回调“ajax_callback”吗？这不应该是您自己的返回部分表单的函数吗？

另外，我不确定`'progress' => array( 'type' => 'none', ),`文档说只有“throbber”和“bar”是有效的。

**尝试这样的事情**

```
function my_module_create_form($form, $form_state){

  // check form_state here to see if the form has been submitted
  // via ajax and change if needed.

  $options = array(0, 1, 2);
  $selected = 0;

  $form = array();
  $form['changethis'] = array( 
  '#type' => 'select', 
  '#title' => t('Rece/Paid'), 
  '#description' => t('See Records'), 
  '#options' => $options, 
  '#default_value' => $selected, 
  '#ajax' => array( 
    'callback' => 'my_module_ajax_callback', 
    'wrapper' => 'replace_textfield_div', 
    'event' => 'change', 
   ), 
  );
  return $form;
}

function my_module_ajax_callback($form, $form_state) {

  // because this is called from change event on select, 
  // it wont rebuild the form (call my_module_create_form).
  // If you want it to you have to set $form_state['rebuild']
  // (or it may be $form['rebuild'], I can't remember which one.)      

  // return form part
  return $form['changethis'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:46:17.453

使用 jQuery：`$("#yourdropdownid option:selected").text();`

# php - 在 Magento 最近订单视图中更改日期格式

> ID：14374255
> 
> 赞同：2
> 
> 时间：2013-01-17T07:40:11.760
> 
> 标签：php, date, magento-1.7

在客户的帐户页面中，下订单的日期显示为**1/17/13**但我想将其显示为**2013/01/17**。如何更改日期的格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:04:22.230

尝试：此系统 > 目录 > 日期和时间自定义选项；

并在日期函数中指定“Y”以获取 4 位字母

# php - PHP fwrite（）不起作用

> ID：14374258
> 
> 赞同：1
> 
> 时间：2013-01-17T07:40:29.640
> 
> 标签：php, fwrite

我正在用 php 编写一个函数，客户端我有一个画布图像，我使用 toDataUrl() 和一个文件名将图像保存在服务器上。这是代码：

```
<?php
  $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];
  $data = json_decode($imageData, true);

  $file = $data["file"];
  $image = $data["data"];

  $filteredData=substr($image, strpos($image, ",")+1);
  $unencodedData=base64_decode($filteredData);

  $fp = fopen( 'image/' . $file , 'wb' );
  fwrite( $fp, $unencodedData);
  fclose( $fp );
?> 
```

问题是这段代码有效。对于我使用它的三分之二的页面，它工作正常。问题是当我第三次复制并粘贴它以再次实现它时，由于某种原因，文件是在服务器上创建的，除了没有数据写入文件。我不认为这是客户端的问题，因为我在 javascript 中写入了调试警报消息，并在 PHP 中写入了调试回显，并且两者都能够很好地打印出数据。我制作了这个简短的调试文件：

```
<?php
$fp = fopen('data.txt', 'wb');
if(is_writable('data.txt')){
    echo "file is writable<br>";
}
if(fwrite($fp, 'test') == FALSE){
    echo "failed to write data<br>";
}
fclose($fp);
?> 
```

输出是

```
file is writable
failed to write data 
```

我尝试使用 chmod 并在写入 0777 之前设置所有内容、文件夹、文本文件，但我仍然得到相同的结果；该文件已制作，但没有数据写入其中。有什么我遗漏的东西或任何其他可能有帮助的方法。我在谷歌上没有找到任何东西，并且仍然对为什么相同的代码完全按预期工作两次感到困惑，然后突然无缘无故停止。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-16T18:57:53.437

我知道这是一篇旧帖子，但我遇到了一个非常相似的问题并找到了解决方案（至少对我来说）！我的服务器上的磁盘空间用完了，所以它可以创建一个 0 字节的文件，但不会写入它。在我清除了一些空间（删除了一个 13gb 的 error.log 文件）后，一切都按预期重新开始了。

如果 fopen 有效但 fwrite 神秘地无效，请检查您的磁盘空间。'df -h' 是检查 linux 服务器上的磁盘空间的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:39:20.193

而不是`$fp = fopen('data.txt', 'wb');`给予`$fp = fopen('data.txt', 'w');`和尝试

将“wb”更改为“w”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T09:44:02.703

当您`$fp = fopen('data.txt', 'w');`在 /var/www/website/ 为您的域 website.com 编写根目录时，如果 php 文件位于 /var/www/website/php/server/file/admin.php 或类似的位置，它实际上会在 /var/www/website/data.txt 创建一个文件

尝试提供相对于您的域根目录的绝对路径或路径来创建文件，例如，

`$fp = fopen('php/server/file/data.txt', 'w');`

通过在 Ubuntu 中使用以下命令，尝试 find 命令以查看该文件是否是在文件夹目录中的其他任何位置创建的，

> 查找 /var/www/website/ -name 'data.txt'

我遇到了这个问题，如果您有类似的问题，可能可以帮助您解决。

# c# - 更改选项卡并清除内容

> ID：14374264
> 
> 赞同：0
> 
> 时间：2013-01-17T07:40:46.703
> 
> 标签：c#, tabs

我有一个程序，它提供了两个选项来测试学生对复数的知识。但是，我希望在更改选项卡时清除选项卡中的内容（标签、文本框）。有没有我可以使用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:55:57.903

只需处理`SelectedIndexChanged`事件`TabControl`并检索选项卡中的所有控件。现在你可以循环控制控件并用它们做任何你想做的事情，就像这样 -

```
 // SelectedIndexChange Event
    private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {
        // Get Selected Tab
        var selectedTab = tabControl1.SelectedTab;

        foreach (Control ctrl in selectedTab.Controls)
        {
            if (ctrl is TextBox)
            {
                (ctrl as TextBox).Text = string.Empty;
            }

            if (ctrl is Label)
            {
                (ctrl as Label).Text = string.Empty;
            }

            // Other Controls....
        }
    } 
```

希望能帮助到你...！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:43:51.940

您可以在 Tabchange 事件中重置标签和文本框的值。看一眼

[标签更改 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabpage_events.aspx)

希望能帮助到你

# html - 使用标签在Struts2中动态创建列表

> ID：14374265
> 
> 赞同：3
> 
> 时间：2013-01-17T07:40:54.253
> 
> 标签：html, jsp, struts2, tags

```
ArrayList<Integer> list = new ArrayList<Integer>();
list.add(2012);
list.add(2013);
list.add(2014);
list.add(2015); 
```

我们可以使用 struts2 标签做同样的事情吗？可能是通过使用

```
<s:set name="myList" value={somedynamic values} /> 
```

实际上我想使用 Struts2 标签在 JSP 页面上创建一个 10 年的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:33:15.243

关于你的问题答案是肯定的，但是`that is not an good idea to create number of 10 years`在jsp页面中。

但是，这是以动态方式使用 arrylist      

```
<s:select label="Years" headerKey="-1" headerValue="Select Years" list="list"   name="your desire name" /> 
```

代替 list 属性，您必须在您的情况下提供 arrayList 变量，这`list` 意味着，

<`s:select ---- list="your array list variable" --------- />`

     你必须在`struts.xml`    例如定义这个动作名称：

```
<action name="yourarrylistvariable" class="your class" method="your method">
           <result name="success">your jsp page</result>
</action> 
```

          这是以静态方式使用 arrylist ，您必须更改列表值 

```
<s:select label="Years" headerKey="-1" headerValue="Select Years" 
list="#{'2000':'2000', '2013':'2013',.....}" name="your desire name" /> 
```

有关更多信息，您可以参考此链接 [struts2 选择](http://www.mkyong.com/struts2/struts-2-sselect-drop-down-box-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:51:34.737

当然可以，感谢 OGNL，您可以像这样创建列表：

```
<s:set var="myList" value="{2012,2013,2014,2015}" /> 
```

请参阅此[链接](http://struts.apache.org/2.x/docs/ognl.html#OGNL-Collections%28Maps,Lists,Sets%29)。

# java - 如何在现有应用程序中实现 Spring 迁移分析器工具？

> ID：14374271
> 
> 赞同：0
> 
> 时间：2013-01-17T07:41:17.937
> 
> 标签：java, spring-mvc

您好我正在尝试在我的应用程序中实现 Spring 迁移分析器工具，并且我使用的是 jdk 1.5。但是我得到 Java.Lang.UnsupportedClassVersionError: Bad Version Number In .Class File 异常。

当我运行此文件 migration-analysis.bat 时，出现上述错误。

请帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:11:59.910

确保你的 PATH 中有 java 5 而不是旧版本（运行 a`java -version`来检查）。

# c++ - 如何解析版本号进行比较？

> ID：14374272
> 
> 赞同：2
> 
> 时间：2013-01-17T07:41:18.717
> 
> 标签：c++, parsing, version-numbering

**场景：**我有一个简单的应用程序，它检查它的 RSS 提要并查看是否有更新的版本可用。因此，我想检查当前版本是否低于 RSS 提要中的版本。理想情况下很简单：

```
CURRENTVERSION < updateVersion 
```

**问题：**版本控制由major.minor.revision.build 组成，我不知道如何将其解析为数字来执行版本检查。

这些是要比较的参数：

```
#define CURRENTVERSION = 0,2,5,1 
```

从网上下载的版本是`"0.2.6.1"`（作为字符串）。

检查一个是否小于另一个的最佳方法是什么？

我尝试将其转换为双精度值，但值变为 0.2（仅解析第一个 . ，忽略其余部分）。

**约束：**它不能是使用 .NET 库的解决方案，因为应用程序必须在没有 .NET 框架的情况下工作。

**（编辑）**感谢 Karthik T 的回答，我选择了以下解决方案。

```
struct Version
{
    Version(string versionStr)
    {
        sscanf(versionStr.c_str(), "%d.%d.%d.%d", &major, &minor, &revision, &build);
    }

    bool operator<(const Version &otherVersion)
    {
        if(major < otherVersion.major)
            return true;
        if(minor < otherVersion.minor)
            return true;
        if(revision < otherVersion.revision)
            return true;
        if(build < otherVersion.build)
            return true;
        return false;
    }

    int major, minor, revision, build;
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T07:46:02.057

```
struct Version{
    Version(std::string versionStr);     //remember to use  versionStr.c_str() if using C functions like sscanf or strtok
    bool operator<(const Version &other); // could and perhaps should be a free function

    int major,minor,revision,build;
};

bool needtoUpdate = Version(CURRENTVERSION)<Version(latestVersion); 
```

请填写定义。

另外，你`#define`是一个错误。你想要它像下面。或者，`const char *`如果可以，请使用 a。

```
#define CURRENTVERSION "0.2.5.1" 
```

您可以使用[sscanf](http://www.cplusplus.com/reference/cstdio/sscanf/)或类似[strtok](http://www.cplusplus.com/reference/cstring/strtok/)的东西在构造函数中进行解析。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T08:01:20.110

我建议只使用一个函数，其参数是两个字符串，代表版本号。没有必要使用结构或类来做这么简单的事情。我认为最好保持简单。例如：

```
#include <stdio.h>
#include <string.h>

/*
 * return 1 if v1 > v2
 * return 0 if v1 = v2
 * return -1 if v1 < v2
 */

int cmpVersion(const char *v1, const char *v2)
{
    int i;
    int oct_v1[4], oct_v2[4];
    sscanf(v1, "%d.%d.%d.%d", &oct_v1[0], &oct_v1[1], &oct_v1[2], &oct_v1[3]);
    sscanf(v2, "%d.%d.%d.%d", &oct_v2[0], &oct_v2[1], &oct_v2[2], &oct_v2[3]);

    for (i = 0; i < 4; i++) {
        if (oct_v1[i] > oct_v2[i])
            return 1;
        else if (oct_v1[i] < oct_v2[i])
            return -1;
    }

    return 0;
}

int main()
{
    printf("%d\n", cmpVersion("0.1.2.3", "0.2.3.4"));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-13T11:06:36.530

如果你有一个支持**C++11**的编译器，你可以`std::tuple`让代码更干净：

```
 struct Version
  {
      Version(std::string versionStr)
      {
          sscanf(versionStr.c_str(), "%d.%d.%d.%d", &major, &minor, &revision, &build);
      }
      VersionTuple ToTuple() const
      {
          return VersionTuple{ major,minor,revision,build };
      }
      int major, minor, revision, build;
  };

  bool operator<(const Version& v1, const Version& v2)
  {
      return v1.ToTuple() < v2.ToTuple();
  } 
```

# c++ - 在无线网络中采用周期性退避而不是随机退避的新 MAC 协议

> ID：14374274
> 
> 赞同：0
> 
> 时间：2013-01-17T07:41:45.580
> 
> 标签：c++

我正在尝试实现基于 2011 IEEE 论文的新 MAC 协议，其中默认 MAC 无线网络（802.11 DCF）的随机等待时间到周期控制的 MAC 以获得更高的性能。

我将用一个简单的场景来解释所提议的协议：考虑 2 个传输节点在网络中发生冲突；在他们每个人都等待了随机的时间之后；比如说 x 和 y，（暗示它们都有不同的退避期）如果我们暗示从那里开始定期退避，他们的退避将是 x+a，y+a 继续并且永远不会相等；防止它们再次相互碰撞。

此外，网络中所有节点的回退周期（上例中的“a”）都是相同的，并且必须在此“a”周期内进行的任何更改也将影响网络中的所有节点. 此更改基于通道状态，并且周期根据协议算法中设置的通道空闲阈值的加法增加乘法减少过程进行更改。

尽管上述 IEEE 论文的作者拒绝提供代码，但他确实提到他为实现协议所做的更改是在以下文件中完成的：这些文件中的代码 (mac-802.11.cc, mac-timers .cc、mac-802.11.h、mac-timers.h ）发布在 pastebin.ca 中：

[http://pastebin.ca/2303764](http://pastebin.ca/2303764)；[http://pastebin.ca/2303763](http://pastebin.ca/2303763)；pastebin.ca/2303762；pastebin.ca/2303765

此外，建议的 MAC 协议的算法在：pastebin.ca/2303772 中给出

如果有人可以帮助我更改此方法以将随机计算更改为周期性，我将不胜感激。谢谢。

任何意见或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:37:10.833

永远不要做这种事情

无线网络不是由您唯一的设备构成的，网络协议是每个共享相同物理层的设备都应该遵守的。

您所做的实际上是通过“窃取”其他所有人访问媒体的部分可能性来提高设备的性能。

新的 MAC 协议必然需要不同的物理介质，因此需要不同的频率和信道，尚未使用并分配给 WLAN，否则它们：

*   不能被认证为 802.11
*   可以声称是“未经授权的干扰设备”，在所有对如何使用 EM 频谱有规定的国家/地区，您可能会遇到法律问题方面的所有后果。（包括被监禁的此类设备的用户，以防他们破坏任何公共通信！）

在处理共享媒体上的物理协议时，您无法制定自己的规则。当共享媒体是一种有限的资源（就像空气一样）时，就会建立公共法律和法规。

# asp.net-mvc - 将 NotMapped 属性值与 Odata $filter 函数一起使用

> ID：14374284
> 
> 赞同：3
> 
> 时间：2013-01-17T07:43:05.503
> 
> 标签：asp.net-mvc, entity-framework, odata

我试图弄清楚如何将**NotMapped**属性与 OData一起使用

我有这个**用户模型**：

```
[DataContract]
public class User
{
[DataMember]
public long Id { get; set; }
[DataMember]
public virtual InstagramUser InstagramUser { get; set; }
[DataMember]
public virtual FacebookUser FacebookUser { get; set; }
[NotMapped]
public string InstagramID { get; set; 
} 
```

我在用户控制器中有这个**GetAll() 方法**

```
public IQueryable<User> GetAllUsers()
{
       _repository = new UserRepository();
       return _repository.GetAll().AsQueryable();
 } 
```

以及用户存储库中的这个**GetAll() 函数**

```
public IQueryable<User> GetAll()
{
     InstaStoryDB db = new InstaStoryDB();
     var ret = db.Users.Include("InstagramUser").Include("FacebookUser").AsQueryable();
     foreach(User user in ret)
     {
        user.InstagramID = user.InstagramUser.InstagramID; //<-- I'm adding here the value to the property
     }
     return ret;         
} 
```

这就是**Instagram 用户模型**

```
[DataContract]
public class InstagramUser
{
[DataMember]
public long UserId { get; set; }
[DataMember]
public string InstagramID { get; set; 
} 
```

一切工作良好。

我对 User 模型进行了更改并添加了`InstagramUser`包含 的模型，因此我添加了 [NotMapped] 属性以从**数据库**`InstagramID`中的 User 表中删除 InstagramID，因为 InstagramUser 已经包含 InstagramID。

 **当我尝试像这样使用 Odata 时： localhost:555/api/users/?$filter=InstagramID eq '456456546' 它失败并返回 InstagramID 属性不存在的错误。

我该怎么做才能在**NotMapped**属性上使用带有 Odata 的过滤器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-20T14:34:29.247

这对我在 Web API 中使用 OData v4 有效：

```
var t = modelBuilder.StructuralTypes.First(x => x.ClrType == typeof(User));
t.AddProperty(typeof(User).GetProperty("InstagramID")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-30T12:51:19.803

你可以在这里找到修复：[http ://forums.asp.net/t/1887669.aspx?OData+EF+Model+with+custom+calculated+properties](http://forums.asp.net/t/1887669.aspx?OData+EF+Model+with+custom+calculated+properties)

1.  首先手动处理odata查询
2.  使用选择查询添加未映射属性

例如

```
public IQueryable<DomainModel> GetAllDomains(ODataQueryOptions<Domains> queryOptions)
    {
        var query = queryOptions.ApplyTo(objectContext.Domains) as IQueryable<Domain>;
        return query.AsEnumerable().Select(d => new DomainModel
        {
            Name = d.Name,
            Activated = d.Activated,
            Address = d.Address,
            AdminUserName = d.AdminUserName,
            DateCreated = d.DateCreated,
            Enabled = d.Enabled,
            Subscription = (SubscriptionTypes)d.SubscriptionType,
            Website = d.Website,
            StatsUpdatePending = d.StatsUpdatePending,
            LastHousekeeping = d.LastHousekeeping,
            CalculatedProperty = calculator.Calculate(d.Name, d.Activated)
        }).AsQueryable();
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-22T17:43:52.317

我找到了一个与 Jason Steele 类似的解决方案，但使用了 EntityType 和 Property 方法，如下所示：

```
modelBuilder.EntityType<User>().Property(u => u.InstagramID); 
```

结果是一样的。如果你看一下Property方法的源码，你会发现它是在获取PropertyInfo，然后将其添加到该类的StructuralTypeConfiguration中：

```
PropertyInfo propertyInfo = PropertySelectorVisitor.GetSelectedProperty(propertyExpression);
PrimitivePropertyConfiguration property = _configuration.AddProperty(propertyInfo); 
```**

# java - 查询中的字符串参数

> ID：14374285
> 
> 赞同：0
> 
> 时间：2013-01-17T07:43:06.077
> 
> 标签：java, mysql, groovy

我是一名程序员学习者。

我想以以下格式获取 MySQL 查询

```
 select status from training where status in ("Open", "Delivered") 
```

从我的代码

```
if(params.openCheckBox){
    query +=" ( t.status  IN ("+params.openCheckBox+", "+params.DeliveredCheckBox+")" 
    query +=" )"
} 
```

但它给了

```
 select status from training where status in (Open, Delivered) 
```

这里“”（缺少双引号）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:44:13.303

用 , 转义双引号`\`MySQL 接受双引号来包装字符串。

```
query +=" ( t.status  IN (\""+params.openCheckBox+"\", \""+params.DeliveredCheckBox+"\")" 
query +=" )" 
```

或者只使用单引号

```
query +=" ( t.status  IN ('"+params.openCheckBox+"', '"+params.DeliveredCheckBox+"')" 
query +=" )" 
```

上面的查询很容易受到`sql injection`. `PreparedStatement`像下面这样使用

代码片段：

```
dbConnection = getDBConnection();
String query = "SELECT .... FROM .... WHERE t.status IN (?, ?)";
PreparedStatement preparedStatement = dbConnection.prepareStatement(query);
preparedStatement.setString(1, params.openCheckBox);
preparedStatement.setString(2, params.DeliveredCheckBox);
ResultSet rs = preparedStatement.executeQuery(); 
```

来源

*   [准备好的语句](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)
*   [JDBC PreparedStatement 示例](http://www.mkyong.com/jdbc/jdbc-preparestatement-example-select-list-of-the-records/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:50:46.717

您可以改用单引号。

```
query +=" ( t.status  IN ('"+params.openCheckBox+"', '"+params.DeliveredCheckBox+"')" 
```

# php - 用 php 从 Mysql 表中显示图表

> ID：14374288
> 
> 赞同：0
> 
> 时间：2013-01-17T07:43:24.567
> 
> 标签：php, mysql, image, dynamic-data

如何使用 PHP 图像函数动态显示存储在 MySQL 表中的数据的统计信息？我可以使用静态表上的计数查询以条形图的形式显示计数，但如给出的图像所示。我有动态存储服务器日志的数据库。

图像是从 3 个表格和 php 的图像和绘图函数生成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:47:41.303

我不知道你是如何尝试的。但是有一个很好的 Jquery 插件，叫做 Highcharts。您可以使用它来创建各种类型的图表。有兴趣请参考以下链接

[http://www.highcharts.com/](http://www.highcharts.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:54:26.890

Rgraph 也是一个非常好的 HTML5/Javascript 图形库，易于使用且有很多选项。

[http://www.rgraph.net/](http://www.rgraph.net/)

```
var data = ['<?php echo implode("','", $average); ?>']; 

function drawGraph(){
    RGraph.Clear(document.getElementById('myRadar'));
    var radar = new RGraph.Radar('myRadar', data); 
```

这是添加 PHP 数组的方法，$average 是带有数字的数组，在本例中是雷达图。implode 函数在数组的值之间放置一个逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:38:55.343

我使用下面的代码用 php 创建了一个简单的条形图。您必须从数据库中获取 bar 值并将其放入 $data 数组中。接下来必须为图像大小设置 $height 和 $width。根据您的图像大小，您必须定位聊天。

```
<?php

$data = array('400', '2570', '245', '473', '1000', '3456', '780', '5000', '30', '420');
$sum = array_sum($data);

$height = 480;
$width  = 640;

$im         = imagecreate($width, $height);
$background = imagecolorallocate($im, 255, 255, 255);

$white  = imagecolorallocate($im, 255, 255, 255);
$black  = imagecolorallocate($im, 0, 0, 0);
$red    = imagecolorallocate($im, 255, 0, 0);
$green  = imagecolorallocate($im, 51, 153, 0);
$yellow = imagecolorallocate($im, 255, 255, 0);

imageline($im, 10, 5, 10, $height - 20, $black);
imageline($im, 10, $height - 20, 620, $height - 20, $black);

header("Content-type: image/png");

$x       = 11;
$y       = 459;
$x_width = 20;
$y_ht    = 0;

$max_i = count($data);
for ($i     = 0; $i < $max_i; $i++) {
    $y_ht = ($data[$i] / $sum) * $height;
    if ($data[$i] > 1000) {
        imagefilledrectangle($im, $x, $y, $x + $x_width, ($y - $y_ht), $green);
    } else if ($data[$i] > 500) {
        imagefilledrectangle($im, $x, $y, $x + $x_width, ($y - $y_ht), $yellow);
    } else {
        imagefilledrectangle($im, $x, $y, $x + $x_width, ($y - $y_ht), $red);
    }
    imagestring($im, 2, $x - 1, ($y - $y_ht - 15), $data[$i], $black);
    $x += ($x_width + 2);
}
imagepng($im);
imagedestroy($im);
?> 
```

参考：[http ://www.talkphp.com/advanced-php-programming/1629-bar-chart-php.html](http://www.talkphp.com/advanced-php-programming/1629-bar-chart-php.html)

# jquery - 从 Json 获取价值？

> ID：14374293
> 
> 赞同：0
> 
> 时间：2013-01-17T07:43:52.230
> 
> 标签：jquery, ajax, json

嗨，我有这个 json 数据

```
 var json = { "@@lang": "en-US", "ResultSet": { "@@version": "2.0", "@@lang":   "en-US", "Error": "0", "ErrorMessage": "No error", "Locale": "en-US", "Found": "1", "Quality": "99", "Results": [{ "quality": "72", "latitude": "30.778864", "longitude": "76.686648", "offsetlat": "30.778864", "offsetlon": "76.686648", "radius": "400", "name": "30.78,76.69", "line1": "30.78,76.69", "line2": "", "line3": "Mohali, Sahibzadaajit Singh Nagar, Punjab", "line4": "India", "house": "", "street": "", "xstreet": "", "unittype": "", "unit": "", "postal": "", "neighborhood": "", "city": "Mohali", "county": "Sahibzadaajit Singh Nagar", "state": "Punjab", "country": "India", "countrycode": "IN", "statecode": "PB", "countycode": "", "uzip": "", "hash": "", "woeid": "2290786", "woetype": "7"}]} }; 
```

我需要倒数第二个值--woeid:2209786

如何使用 json 获取此值？

* * *

### 更新/编辑（格式化 JSON）

```
{
    "@@lang": "en-US",
    "ResultSet": {
        "@@version": "2.0",
        "@@lang": "en-US",
        "Error": "0",
        "ErrorMessage": "No error",
        "Locale": "en-US",
        "Found": "1",
        "Quality": "99",
        "Results": [
            {
                "quality": "72",
                "latitude": "30.778864",
                "longitude": "76.686648",
                "offsetlat": "30.778864",
                "offsetlon": "76.686648",
                "radius": "400",
                "name": "30.78,76.69",
                "line1": "30.78,76.69",
                "line2": "",
                "line3": "Mohali, Sahibzadaajit Singh Nagar, Punjab",
                "line4": "India",
                "house": "",
                "street": "",
                "xstreet": "",
                "unittype": "",
                "unit": "",
                "postal": "",
                "neighborhood": "",
                "city": "Mohali",
                "county": "Sahibzadaajit Singh Nagar",
                "state": "Punjab",
                "country": "India",
                "countrycode": "IN",
                "statecode": "PB",
                "countycode": "",
                "uzip": "",
                "hash": "",
                "woeid": "2290786",
                "woetype": "7"
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:45:57.810

您可以使用 '.' 浏览对象。运算符，并且由于结果在数组中，因此使用“[]”并获取所需的对象...试试这个。

```
var val=json.ResultSet.Results[0].woeid
alert(val); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:46:14.880

试试这个：

```
json.ResultSet.Results[0].woeid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T07:46:27.250

### 使用这种方式：

```
alert(json.ResultSet.Results[0].woeid); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T07:47:11.993

```
json.ResultSet.Results[0].woeid 
```

# css - 是否可以为 tabris 应用程序客户端设置主题？

> ID：14374300
> 
> 赞同：0
> 
> 时间：2013-01-17T07:44:13.430
> 
> 标签：css, eclipse

在`com.eclipsesource.tabris`插件中有两个 CSS 文件，`ios.css`和`theme-android-holo.css`. 我可以用这两个 CSS 文件更改主题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:55:28.553

不可以。原生 Tabris 客户端尚不支持主题化。服务器使用 CSS 文件来了解原生 iOS 和 Android 小部件的大小。有了这些信息，服务器就能够计算出正确的布局。

# phpunit - 使用 PHPUnit 和 extbase 将夹具加载到 Testdb

> ID：14374301
> 
> 赞同：1
> 
> 时间：2013-01-17T07:44:13.827
> 
> 标签：phpunit, typo3, fixtures, extbase, test-data

我在我的测试用例中寻找一种将测试数据加载到 MySQL 的方法`phpunit`。我使用typo3 4.5 并想在我的测试用例中测试我的页面覆盖和一些功能。我不想手动创建所有模型，并且想为每个测试加载一个 test-db 和一些 sql 文件。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:21:32.683

在对 TYPO3 扩展的测试中，我们`$GLOBALS['TYPO3_DB']->exec_INSERTquery()`使用`setUp()`. `tearDown()`拨打`exec_DELETEquery()`电话。

测试数据获得类似“unittest-FOO”的名称，以便我们在清理时删除所有“unittest-%”条目。

或者，您可以使用 TYPO3 的 phpunit 扩展 - 它为每个表添加一列，指示记录是否是测试数据。之后清理就很容易了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:38:08.990

我通过在我的设置方法中加载一个完整的测试数据库解决了这个问题。这个对我有用。对于一些插入，我会尝试使用

```
 function setUp() { $this->db->exec("BEGIN"); }
 function tearDown() { $this->db->exec("ROLLBACK"); } 
```

喜欢[这里](https://stackoverflow.com/questions/4585345/phpunit-testing-with-database)

# java - 每 20 秒运行一次的数据库重度意图服务中的 GC_* 错误

> ID：14374305
> 
> 赞同：0
> 
> 时间：2013-01-17T07:44:45.473
> 
> 标签：java, android, sqlite, garbage-collection

这是一个沉重的意图服务，它有很多，我的意思是很多数据库查询，更新，删除，随机化数字..这么多..它每 20 秒运行一次测试目的，意图服务可能每 5 分钟运行一次.. 但是会有一个实例，它可能一个接一个地运行 48 次。我能做些什么来避免这个垃圾收集器错误？

如果我将一半代码转移到另一个意图服务，它有帮助吗？是不是在不同的线程中？这有帮助吗？..我在使用后关闭了所有光标

# java - 如何在 Spring 中管理 Java servlet（或 DI）？

> ID：14374307
> 
> 赞同：2
> 
> 时间：2013-01-17T07:44:49.950
> 
> 标签：java, spring, tomcat, servlets, dependency-injection

我有一个带有一些旧 HTTPServlet 的项目，我想要一种方法来管理 Spring 中 Servlet 的创建/生命周期，这样我就可以做一些事情，比如 DI 并通过 Spring/Hibernate 集成传入数据库对象。

首先，我设置了 Spring 应用程序上下文，`web.xml`如下所示；

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

接下来我有我的 servlet 定义`web.xml`；

```
<servlet>
    <servlet-name>oldHttpServlet</servlet-name> 
    <display-name>oldHttpServlet</display-name>
    <servlet-class>com.package.MyServlet</servlet-class>
</servlet> 
```

在我的春天`application-context.xml`，我想做一些 bean def 如下；

```
<bean id="oldHttpServlet" class="com.package.MyServlet"></bean> 
```

我认为上面我需要在我的servlet中实现一些接口，在Spring app-context.xml中保留上面的bean定义，然后在web.xml中更改servlet定义......我不确定什么是最简单的更改，因为在 MyServelet.java 端需要担心一些继承，看起来像这样；

```
class MyServlet extends MyAbstractServlet{
  void doStuff(){
     //YOu know...
  }
} 
```

和 MyAbstractServlet；

```
class MyAbstractServlet extends HttpServlet{
  doPost(){
     //Some post implementation here...
  }
} 
```

在 Spring 中包装 MyServlet 并从那里加载而不是通过 web.xml 实例化的最佳方法是什么？

我假设最好的方法是使用 Springs `HttpRequestHandler`，然后使用`HttpRequestHandlerServlet`web.xml 中的 代替当前的 servlet。但是，我不确定如何实现 HttpRequestHandler 接口以使用 myAbstractServlet 中现有的 doPost() 内容...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T08:33:54.117

如果您需要将依赖项注入到 servlet 中，那么我会使用 Spring 的 HttpRequestHandlerServlet。您创建 HttpRequestHandler 的实现（它有一个方法：

```
public void handleRequest(HttpServletRequest request, HttpServletResponse httpServletResponse) throws ServletException, IOException; 
```

你需要实现的 - 它相当于你在 doGet / doPost 中所拥有的。所有 HttpRequestHandler 实现的实例都应该由 spring 处理（设置一个注释驱动的配置并使用@Component 等注释）或使用 XML 配置来设置这些 bean。

在您的 web.xml 中为 HttpRequestHandlerServlet 创建映射。如果您将 servlet 命名为与 HttpRequestHandler 相同的名称，那么 Spring 将使 HttpRequestHandlerServlet 使用匹配的 HttpRequestHandler 自动处理请求。

由于 HttpRequestHandler 是一个 Spring bean，您可以让 Spring 将您需要的所有服务注入其中。

如果您仍然不想使用 HttpRequestHandler 代替 Servlets，那么剩下的就是一些“编程柔道”，例如使用 Spring utils 检索 WebApplicationContext 并通过“每个名称”从那里获取 bean。Servlet 没有被 Spring 实例化，因此它无法管理它们。您必须为您的 servlet 创建一个基类并自己管理 DI 作为初始化步骤。

代码看起来像这样（在 servlet 内）：

```
WebApplicationContext webContext = WebApplicationContextUtils.getWebApplicationContext(getServletContext());
CertainBeanClass bean = (CertainBeanClass) webContext.getBean("certainBean"); 
```

[编辑] 事实上，正如其中一位评论者所建议的那样，还有*一个*选择。不过，它仍然需要您在 servlets init 方法中进行手动设置。这是它的样子：

```
public void init(ServletConfig config) {
    super.init(config);
    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);
} 
```

您也可以通过编织在 Servlet 上使用 @Configurable 注释来试试运气，但这可能会或可能不会起作用（我认为 Servlet 可能会在设置 Spring 上下文之前被初始化，所以它仍然没有可能发挥它的魔力） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:17:26.863

Servlet 的理想用途应该是作为 Controller 和底层容器管理它的生命周期，所以我们不需要 Spring 来管理它的实例

> 所以我可以做一些像 DI 之类的事情，并通过 Spring/Hibernate 集成传入数据库对象。

您永远不应该在您的 dao/services 中依赖 Servlet，您的 servlet 应该调用非常适合使用 Spring DI 上下文管理的服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T18:26:58.290

关于 SpringBeanAutowiringSupport，请注意 javadoc：

注意：如果有访问 ServletContext 的显式方式，则首选这种方式而不是使用此类。WebApplicationContextUtils 类允许基于 ServletContext 轻松访问 Spring 根 Web 应用程序上下文。

# html - 在drupal 7中将html页面插入到块中

> ID：14374309
> 
> 赞同：0
> 
> 时间：2013-01-17T07:44:54.130
> 
> 标签：html, drupal-7

我有一个 HTML 文件，我希望将其插入到`Drupal-7`. 我的问题是这个文件访问了drupal之外文件夹上的JavaScript脚本和图像，我怎样才能使它工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:47:30.257

据我所知，drupal html 页面可以毫无问题地访问外部 javascript 和图像文件。如果您将 HTML 文档中的 URL 转换为绝对路径，它应该可以正常工作。确保选择“完整 HTML”作为页面格式。

# php - Yii CActiveDataProvider UNION ALL

> ID：14374310
> 
> 赞同：1
> 
> 时间：2013-01-17T07:45:02.490
> 
> 标签：php, mysql, yii

我想如何`UNION ALL`使用`CActiveDataProvider` `criteria`.

表示例：

```
ID    NAME
1     John 
```

查询示例：

```
SELECT * FROM users 
  UNION ALL 
SELECT * FROM users 
```

回复：

```
ID    NAME
1     John
1     John 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:08:15.440

它`CDbCriteria`似乎不处理`UNION ALL`

相反，您可以使用`CSqlDataProvider`该类

```
$sql='SELECT * FROM tbl_user UNION ALL SELECT * FROM tbl_user ';
$dataProvider=new CSqlDataProvider($sql, array(
    'totalItemCount'=>$count,
    'sort'=>array(
        'attributes'=>array(
             'id', 'username', 'email',
        ),
    ),
    'pagination'=>array(
        'pageSize'=>10,
    ),
));
// $dataProvider->getData() will return a list of arrays. 
```

# jsp - 在 Struts 中找不到 /WEB-INF/struts-html.tld 的标记库描述符

> ID：14374311
> 
> 赞同：0
> 
> 时间：2013-01-17T07:45:03.530
> 
> 标签：jsp, struts2, struts, struts-tags

我是 Struts 框架的新手，在开发简单的 Struts 2 应用程序时遇到以下错误：

```
Cannot find the tag library descriptor for /WEB-INF/struts-html.tld 
```

如何修复此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:35:34.683

`struts-html.tld`是 Struts 1 标签的 TLD。

Struts 2 使用单个 TLD，`struts-tags.tld`，它位于`struts2-core-2.x.x.jar`.

您可以按如下方式声明它：

```
<%@ taglib prefix="s" uri="/struts-tags" %> 
```

还有其他 TLD，例如`struts-dojo-tags`（在 2.1 中已弃用）`struts-jquery-tags`，等等……但从主要的 TLD 开始，浏览 Struts2，然后最终尝试使用“扩展”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-12T19:40:10.423

找不到标签库描述符

对于上述错误。

请将 Struts 2 核心 jar 文件上传到您的应用程序/Web 项目的构建路径，它可以工作。

谢谢古斯汗。

# json - 如何将第 3 方 JSON 结果绑定到现有的 Knockout Viewmodel

> ID：14374313
> 
> 赞同：0
> 
> 时间：2013-01-17T07:45:10.713
> 
> 标签：json, knockout.js

我有一个现有的视图模型，其中列出了我想要转换率的货币代码。我利用 Yahoo Finance API 为我的货币获取 JSON 结果。

如何将此第 3 方 JSON 结果绑定到我现有的 ViewModel。

来自 Yahoo Finance API 的 JSON：

```
parseExchangeRate({"query":{"count":1,"created":"2013-01-17T07:37:18Z","lang":"en-US","results":{"row":{"rate":"8.7967","name":"USD to ZAR"}}}}); 
```

我的视图模型代码：

```
 var currency = function (data) {
        var self = this;
        self.CurrencyFrom = ko.observable(data.CurrencyFrom);
        self.CurrencyTo = ko.observable(data.CurrencyTo);
        self.ConversionRate = ko.observable(getRate(data.CurrencyFrom, data.CurrencyTo));
    }

    var CurrencyModel = function (Currencies) {
        var self = this;
        self.Currencies = ko.observableArray(Currencies);

        self.AddCurrency = function () {
            self.Currencies.push({
                CurrencyFrom: "",
                CurrencyTo: "",
                ConversionRate: ""
            });
        };

        self.RemoveCurrency = function (Currency) {
            self.Currencies.remove(Currency);
        };

        self.Save = function (Form) {
            alert("Could Now Save: " + ko.utils.stringifyJson(self.Currencies));
        };

        $.ajax({
            url: "CurrencyConfiguration.aspx/GetConfiguredCurrencies",
            // Current Page, Method  
            data: '{}',
            // parameter map as JSON  
            type: "POST",
            // data has to be POSTed  
            contentType: "application/json; charset=utf-8",
            // posting JSON content      
            dataType: "JSON",
            // type of data is JSON (must be upper case!)  
            timeout: 10000,
            // AJAX timeout  
            success: function (Result) {
                var MappedCurrencies =
              $.map(Result.d,
       function (item) { return new currency(item); });
                self.Currencies(MappedCurrencies);
            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        });
    };

    //3rd Party JSON result
    function getRate(from, to) {
        var script = document.createElement('script');
        script.setAttribute('src', "http://query.yahooapis.com/v1/public/yql?q=select%20rate%2Cname%20from%20csv%20where%20url%3D'http%3A%2F%2Fdownload.finance.yahoo.com%2Fd%2Fquotes%3Fs%3D" + from + to + "%253DX%26f%3Dl1n'%20and%20columns%3D'rate%2Cname'&format=json&callback=parseExchangeRate");
        document.body.appendChild(script);
    }

    $(document).ready(function () {
        var VM = new CurrencyModel();
        ko.applyBindings(VM);
    }) 
```

我的 HTML：

```
 <table class="table table-striped">
            <thead>
                <tr>
                    <th>
                        Date Updated
                    </th>
                    <th>
                        Currency From
                    </th>
                    <th>
                        Currency To
                    </th>
                    <th>
                        Conversion Rate
                    </th>
                    <th />
                </tr>
            </thead>
            <tbody data-bind="foreach: Currencies">
                <tr>
                    <td>
                        <label class="label">Date</label>
                    </td>
                    <td>
                        <input data-bind="value: CurrencyFrom, uniqueName: true" />
                    </td>
                    <td>
                        <input data-bind="value: CurrencyTo, uniqueName: true" />
                    </td>
                    <td>
                        <input data-bind="value: ConversionRate, uniqueName: true" />
                    </td>
                    <td>
                        <a href='#' data-bind='click: $root.RemoveCurrency'>Delete</a>
                    </td>
                </tr>
            </tbody>
        </table> 
```

我的 JSON 返回：

```
{"d":[{"__type":"Finance.Tracntrace.Members_Only.DAL.DataModel.Currency.CurrencyConfigurationDM","CurrencyFrom":"ZAR","CurrencyTo":"USD","Rate":null},{"__type":"Finance.Tracntrace.Members_Only.DAL.DataModel.Currency.CurrencyConfigurationDM","CurrencyFrom":"USD","CurrencyTo":"ZAR","Rate":null}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:16:41.587

我必须承认，我不是 100% 确定您实际上在问什么，但我认为您是在执行您用作 jsonp 回调方法的 parseExchangeRate 之后？

在您的情况下，您需要深入了解该 Yahoo 返回对象以获取 name 属性（猜测为 query.results.row.name）并拆分该字符串以获得您的两种货币。

```
function parseExchangeRate(yahooData)
{
    var currencies = yahooData.query.results.row.name;

    // split the string to get your two currencies
    var from = whatever;
    var to = whatever;
    var rate = yahooData.query.results.row.rate; 
```

然后，我将更改您的 AddCurrency 方法以获取数据对象

```
 CurrencyModel.AddCurrency(from, to, rate);
}

    self.AddCurrency = function (from, to, rate) {
        self.Currencies.push({
            CurrencyFrom: from,
            CurrencyTo: to,
            ConversionRate: rate
        });
    }; 
```

这就是你所追求的吗？

# ios - 我可以为本地通知（iOS）上的忽略按钮设置回调功能吗？

> ID：14374314
> 
> 赞同：0
> 
> 时间：2013-01-17T07:45:13.913
> 
> 标签：ios, callback, notifications

我正在尝试使用本地通知上的 2 个按钮创建 3 个条件：a) 按下忽略按钮，b) 按下查看按钮，以及 c) 两者都没有按下。我计划让我的应用同时响应 a) 和 b)，但不响应 c)。由于按下 View 时将我的应用程序移至前台是标准的，因此我想在按下 Ignore 时更改后台中的一个变量。但是我不知道如何启动（IGNORE）按钮的回调功能？以另一种方式，我的应用程序如何区分用户按下 IGNORE 按钮和用户未按下通知上的任何按钮。

任何人都可以建议一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:28:13.483

所有通知，无论是本地通知还是推送通知，都由 iOS 而不是您的应用程序处理。因此，您无法检查用户单击的按钮。

只有当用户选择查看通知并且您的应用程序已启动时，您的应用程序才会收到通知。

# c# - 使用 C# 在列表中搜索并返回包含特定搜索短语的项目

> ID：14374315
> 
> 赞同：0
> 
> 时间：2013-01-17T07:45:18.723
> 
> 标签：c#, .net

我有一个类 WebItem ：

```
class WebItem
{
   public string Name { get; set; }
   public string Description { get; set; }
   public string Keywords { get; set; }
} 
```

用户输入一些搜索短语，程序应该找到所有项目，其中所有来自搜索短语的术语都存在。前用户输入短语：“一些文本”。该程序应该找到项目，其中

*   （名称包含“一些”，描述包含“文本”）或
*   （名称包含“文本”，描述包含“一些”）或
*   （名称包含“一些”，关键字包含“文本”）或
*   （名称包含“文本”，关键字包含“一些”）或
*   （描述包含“一些”，关键字包含“文本”）或
*   （描述包含“文本”，关键字包含“一些”）或
*   （名称包含“文本”，名称包含“一些”）或
*   （描述包含“文本”，描述包含“一些”）或
*   （关键字包含“文本”，关键字包含“一些”）

用户可以输入不同长度的短语。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:49:26.513

好吧，我不会给你一个完整的解决方案，但听起来你需要：

*   将用户的输入分解为单词
*   检查*所有*单词是否以某种形式包含在项目中。LINQ[`All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)方法将在这里为您提供帮助。您只需要弄清楚如何检查*单个*单词在项目中出现的位置，然后将`All`其应用于给定查询中的所有搜索词。

你可能很想改变你的结构`WebItem`。如果这些属性中的每一个都可以包含多个单词，那么您可能希望将它们分开......否则在匹配方面会很棘手。例如，如果用户键入“am”作为搜索词，大概您不希望它匹配带有“name”描述的内容，但您*确实*希望它匹配带有“I am here”描述的内容. 然后你遇到了词干问题等......

（顺便说一句，如果您要拆分可以匹配的术语，则可`HashSet<string>`以为 each创建一个`WebItem`，只是为了匹配。）

*请注意，Marc 关于使用专*为此类事情设计的第三方 API 的观点很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:02:39.240

谢谢，马克。

解决方案非常简单。

```
 //term - search phrase
 var terms = term.Split(new[] { " " }, StringSplitOptions.RemoveEmptyEntries);

 //searching list.
 var searchList = some_data_list_from_somethere_where_we_are_searching.AsEnumerable();

 foreach (var item in terms)
 {
     searchList = searchList.Where(q => q.Name.Contains(item) || 
                                        q.Keywords.Contains(item) || 
                                        q.Description.Contains(item));
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:00:12.223

尝试这个。

```
 var lst = new List<WebItem>();
        string searchString = "your text";
        string[] searchArr = searchString.Split(" ".ToCharArray());
        lst.Where((l) => searchArr.Count((s) => l.Name.Contains(s)) > 0
                         || searchArr.Count((s) => l.Keywords.Contains(s)) > 0
                         || searchArr.Count((s) => l.Description.Contains(s)) > 0); 
```

# android - 更改 HTML webview 中的背景颜色

> ID：14374317
> 
> 赞同：-1
> 
> 时间：2013-01-17T07:45:44.743
> 
> 标签：android, html, webview, background-color

我在 android 应用程序中有一个 HTML Webiew，我想在 OnTouch 事件上更改 TD 元素的背景。

我如何通过 HTML / javascript / 或 CSS 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:02:07.520

这是一些入门材料：

[http://www.htmldog.com/guides/cssbeginner/](http://www.htmldog.com/guides/cssbeginner/)

[http://api.jquery.com/click/](http://api.jquery.com/click/)

[Webview 从资产目录加载 html](https://stackoverflow.com/questions/3152422/webview-load-html-from-assets-directory)

# jquery - 如何使用 jquery 的回调函数将图像位置传递给 php 函数？

> ID：14374319
> 
> 赞同：0
> 
> 时间：2013-01-17T07:45:48.703
> 
> 标签：jquery, image, post, back, avatar

```
<div class="hideAfterSuccess">
                    <label for="avatar">Upload an Avatar :</label>
                    <input type="file" name="avatar" id="avatar" />
                </div> 
```

下面是必须将图像位置传递给另一个文件（parsePortal.php）中的 php 函数的 jquery。能够传递文件的其他类型的数据，但图像失败。我想既然它发布了图像的位置字符串，我就可以使用 $_FILES[$_POST['image']]['name'] 然后上传图像。我已经尝试过网络，当然，没有找到我需要的东西。

```
 $(function(){
           var imageLoc = $('avatar').val();
           var url = "parsePortal.php";
                $.post(url, {
                    status : "getimage",
                    image : "imageLoc"
                }, function(result){

                 });
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:51:30.587

不幸的是，通过 ajax 将文件传递给 php 并不是那么简单。但是，有一个不错的库可以让您轻松做到这一点：

[http://malsup.com/jquery/form/](http://malsup.com/jquery/form/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T18:01:52.517

我使用 jquery forms 插件成功地做到了。这意味着它发送了我从中获取文件名并将其打印出来的整个路径。谢谢你，维克，如果没有这种帮助，我是不可能做到这一点的。

这是javascript。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
<script src="http://malsup.github.com/jquery.form.js"></script> 

<script> 
        // prepare the form when the DOM is ready 
        $(document).ready(function() { 
            // bind form using ajaxForm 
            $('#htmlForm').ajaxForm({ 
                // target identifies the element(s) to update with the server response 
                target: '#htmlExampleTarget', 

                // success identifies the function to invoke when the server response 
                // has been received; here we apply a fade-in effect to the new content 
                success: function() { 
                    $('#htmlExampleTarget').fadeIn('slow'); 
                } 
            }); 
        });
</script> 
```

这是html

```
<form id="htmlForm" action="file.php" method="post"> 
Message: <input type="text" name="message" value="Hello HTML" /> <p></p>
Image : <input type="file" name="image" id="image" /><p></p>
<input type="submit" value="Echo as HTML" /> 
```

这是php

```
$image =  $_FILES['image']['tmp_name'];
$name = $_FILES['image']['name'];
move_uploaded_file($image, "uploads/".$name);
echo '<div style="background-color:#ffa; padding:20px">' . $_POST['message'] .  '</div>'; 
echo '<img src="uploads/'.$name.'"/>'; 
```

# javascript - Jquery 可克隆输入 foreach 覆盖值

> ID：14374324
> 
> 赞同：0
> 
> 时间：2013-01-17T07:46:01.500
> 
> 标签：javascript, jquery, json

我目前正在创建一个可克隆的 id 输入字段..

唯一的问题是在验证 id 后提交时，它在控制台中为所有重复项显示相同的值。

我想要实现的只是克隆该字段使其通过验证并在提交时返回 JSON 中每个克隆字段的值。

非常感谢任何帮助。

Js 小提琴：http: [//jsfiddle.net/dawidvdh/tBYSA/4/](http://jsfiddle.net/dawidvdh/tBYSA/4/)

然后是代码：

jQuery -

```
//Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependant = ["dependant"];
var group;
//Clone Tracking
//General Variables
var input_groups = ["group-1"];
var idNumber;
var values;
//General Variables
//Generate variables
var id_fields = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13];
var id_input = "<input class='id' maxlength='1' name='id' type='text' />";

jQuery(document).ready(function(e) {
    jQuery(id_fields).each(function() {
        jQuery(id_input).appendTo('#group-1');
    });
    //populate jquery generated fields
    //Cloning Function
    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        // Store the value of the previous Id to insert the cloned div..
        var oldId = g_counter;
        g_counter++;
        currentdep ='dependant-'+g_counter;
        // Clone the Dependant Div and set a new id
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', 'dependant-'+g_counter);
        var id_newDiv = 'group-'+ g_counter;

        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#group-1').attr('id',"group-" + g_counter );

        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input[type="text"]').val('');

        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);
        input_groups.push(id_newDiv);
    }
    //Cloning Function
    //Validation
    function validate_Id(values) {
            idNumber = values;
            var correct = true;
            if (idNumber.length != 13 || !isNumber(idNumber)) {correct = false;}
            var tempDate = new Date(idNumber.substring(0, 2), idNumber.substring(2, 4) - 1, idNumber.substring(4, 6));
            var today = new Date();
            var id_date = tempDate.getDate();
            var id_month = tempDate.getMonth();
            var id_year = tempDate.getFullYear();
            var currentYear = (new Date).getFullYear();
            var age = Math.floor((today-tempDate) / (365.25 * 24 * 60 * 60 * 1000));
            var fullDate = id_date + "-" + (id_month + 1) + "-" + id_year;
            if (!((tempDate.getYear() == idNumber.substring(0, 2)) && (id_month == idNumber.substring(2, 4) - 1) && (id_date == idNumber.substring(4, 6)))) {
correct = false;}
            var genderCode = idNumber.substring(6, 10);
            var gender = parseInt(genderCode) < 5000 ? "Female" : "Male";
            var citzenship = parseInt(idNumber.substring(10, 11)) == 0 ? "Yes" : "No";
            var tempTotal = 0;
            var checkSum = 0;
            var multiplier = 1;
            for (var i = 0; i < 13; ++i) {tempTotal = parseInt(idNumber.charAt(i)) * multiplier;
            if (tempTotal > 9) {tempTotal = parseInt(tempTotal.toString().charAt(0)) + parseInt(tempTotal.toString().charAt(1));}
                checkSum = checkSum + tempTotal;
                multiplier = (multiplier % 2 == 0) ? 1 : 2;}
            if ((checkSum % 10) != 0) {correct = false;};
            if (correct) {
                 $.each(age_input_groups , function(i){
                    var id = 'age-group-'+g_counter;
                    var agevalues = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val(age);
                    });
                });
               $.each(gender_input_groups , function(i){
                    var id = 'gender-group-'+g_counter;
                    console.log(gender_input_groups);
                    var gendervalues = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val(gender);
                    });
                });
                return idNumber;
            }
            else {
                console.log(idNumber + "-wrong");
            }
            return false;
        }

    function isNumber(n) {return !isNaN(parseFloat(n)) && isFinite(n);};
//Validation
//MainID
    $(document).on('keydown', 'input.id', function(e) {
        if (e.keyCode == 8) {
            $(this).val('');
            $(this).prev().val('');
            $(this).prev().focus();
        }
    });

    $(document).on('keyup', 'input.id', function() {
        if (this.value.match(/\d+/)) {
            var $this = $(this);
            if ($this.next('input.id').length) {
                $this.next().focus();
            } else {
                $.each(input_groups , function(i){
                    var id = input_groups[i];
                    values = $.map($('#'+id + ' input') , function(e,i){
                        return $(e).val();
                    }).join('');
                    validate_Id(values);
                });
            }
        }
    });
//MainID
$(document).on("click", 'input[type="checkbox"]', function() {
    jQuery(this).siblings(":checked").removeAttr('checked');
});
//Multiple Inputs function

//Basic Validation
//Digits only
jQuery(".id").keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
             // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
                 // let it happen, don't do anything
                 return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                event.preventDefault(); 
            }   
        }
});
//Basic Validation
//submit function
var result = {};
var dependants;
var dep_counter = 0;
jQuery('#submit').click(function(){
    jQuery('.dependant').each(function(k, v){
        dep_counter++
        dependants = {};
        result['dependant'+dep_counter] = [dependants];
        dependants['id'] = idNumber;
    });
    var jsonData = JSON.stringify(result);
    console.log(jsonData);
});
//submit function
}); 
```

然后是 HTML：

```
<div id="dependant-1" class="dependant">
    <div id="label">id-number:</div>            <div id="group-1"></div>
    <div id="error_id" class="error"></div>
</div>

<button id="clone">Add a Dependant</button>
<button id="submit">submit</button> 
```

提前致谢 ：）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:24:31.287

在函数`validate_Id`中，您使用的是一个全局变量`idNumber`，它将由参数分配`values`。所以最终这个全局变量将是最后一个验证的数字。

为了解决这个问题，您可以更改`idNumber`为由对应索引的数组`dep_counter`。

例如，3 次更改就足够了：

1.  替换`var idNumber;`为`var idNumbers = [];`

2.  更改`validate_Id(values);`为：

    `var idNumber = validate_Id(values);`

    `if (idNumber) { idNumbers.push(idNumber); }`

3.  更改`dependants['id'] = idNumber;`为`dependants['id'] = idNumbers[dep_counter];`

顺便说一句，您似乎喜欢全局变量，应尽可能避免使用。更糟糕的是，您声明了一些与全局变量同名的局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:06:11.980

我在小提琴中为你试过这个..代码：

```
jQuery('#submit').click(function(){
jQuery('.dependant').each(function(k, v){
    dep_counter++
      dependants = {};
        result['dependant'+dep_counter] = '';
    $(v).find(':input').each(function(){
        result['dependant'+dep_counter] += $(this).val();
    });
    //dependants['id'] = idNumber;
});
var jsonData = JSON.stringify(result);
    alert(jsonData);
console.log(jsonData);
}); 
```

# jquery - 如何解决 jQuery 1.9 中断开节点的新 .after、.before 行为

> ID：14374325
> 
> 赞同：1
> 
> 时间：2013-01-17T07:46:01.383
> 
> 标签：jquery

我习惯于在 jQuery 1.8+ 中使用 .before、.after 或 .replaceWith 处理与 DOM 断开连接的模板化内容。在 1.9 中，我们似乎完全失去了使用这些方法操作断开节点的能力，因为它们总是返回未修改的原始集。

例如：

```
// prepare some disconnected content, e.g. compiling templates
var $node = $('<div>before</div>');
// later do some calculations and have a need to splice some disconnected content together
var $after = $('<div class="green">after</div>');
$node.after($after)
// Add to the DOM
$('.result').append($node); 
```

以下是演示如何打破的小提琴：

*   1.8.3（预期行为）：http: [//jsfiddle.net/octatone/zgynM/](http://jsfiddle.net/octatone/zgynM/)
*   1.9（不再有效）：http: [//jsfiddle.net/octatone/hTp27/](http://jsfiddle.net/octatone/hTp27/)

我对 jQuery 删除这种行为以保持一致性很好，但必须有一个解决方法。我不想也不应该将断开连接的节点连接到 dom 以便以这种方式操作它们。

我们如何解决 jQuery 1.9 中新的 .after、.before 和 .replaceWith 行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:55:44.610

与其尝试附加到不存在的 DOM，不如添加到 jQuery 选择器（即`.add`改为使用）。这似乎有效：

[http://jsfiddle.net/hTp27/3](http://jsfiddle.net/hTp27/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:03:17.823

只需附加到节点：

```
// prepare some disconnected content, e.g. compiling templates
var $node = $('<div>before</div>');
// later do some calculations and have a need to splice some disconnected content together
var $after = $('<div class="green">after</div>');
$node.append($after)

// Add to the DOM
$('.result').append($node); 
```

# java - jquery编码器需要在java中解码

> ID：14374339
> 
> 赞同：0
> 
> 时间：2013-01-17T07:46:39.773
> 
> 标签：java, jquery

```
var name = "Świat";

jQuery.ajax({
  async: false,
  contentType: "application/x-www-form-urlencoded;charset=UTF-8",
  type: 'POST',
  url: "test.do?name="+encodeURIComponent(name),
  noCache:true,
  data:{
  },
  beforeSend: function(xhr) {
    xhr.setRequestHeader("Accept-Charset","UTF-8");
    xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");
... 
```

在**java**中，我将具有如下价值：

```
String pName = request.getParameter("name");

pName = "Å?wiat"; 
```

现在我想使用此名称从数据库中搜索记录，但在 db 中具有“Świat”的值

我怎样才能找到这个或解码这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:25:10.587

使用 Web 服务时一个非常常见的任务是编码/解码特定的 URI 组件，而 Java 中没有直接的 API 用于相同的任务，这变得很困难。下面是我已经使用了一段时间的代码片段。

希望这可以帮助，

```
public static final String ALLOWED_CHARS = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.!~*'()";

 public static String encodeURIComponent(String input) {
  if(StringUtils.isEmpty(input)) {
   return input;
  }

  int l = input.length();
  StringBuilder o = new StringBuilder(l * 3);
  try {
   for (int i = 0; i < l; i++) {
    String e = input.substring(i, i + 1);
    if (ALLOWED_CHARS.indexOf(e) == -1) {
     byte[] b = e.getBytes("utf-8");
     o.append(getHex(b));
     continue;
    }
    o.append(e);
   }
   return o.toString();
  } catch(UnsupportedEncodingException e) {
   e.printStackTrace();
  }
  return input;
 }

 private static String getHex(byte buf[]) {
  StringBuilder o = new StringBuilder(buf.length * 3);
  for (int i = 0; i < buf.length; i++) {
   int n = (int) buf[i] & 0xff;
   o.append("%");
   if (n < 0x10) {
    o.append("0");
   }
   o.append(Long.toString(n, 16).toUpperCase());
  }
  return o.toString();
 }

 public static String decodeURIComponent(String encodedURI) {
  char actualChar;

  StringBuffer buffer = new StringBuffer();

  int bytePattern, sumb = 0;

  for (int i = 0, more = -1; i < encodedURI.length(); i++) {
   actualChar = encodedURI.charAt(i);

   switch (actualChar) {
    case '%': {
     actualChar = encodedURI.charAt(++i);
     int hb = (Character.isDigit(actualChar) ? actualChar - '0'
       : 10 + Character.toLowerCase(actualChar) - 'a') & 0xF;
     actualChar = encodedURI.charAt(++i);
     int lb = (Character.isDigit(actualChar) ? actualChar - '0'
       : 10 + Character.toLowerCase(actualChar) - 'a') & 0xF;
     bytePattern = (hb << 4) | lb;
     break;
    }
    case '+': {
     bytePattern = ' ';
     break;
    }
    default: {
     bytePattern = actualChar;
    }
   }

   if ((bytePattern & 0xc0) == 0x80) { // 10xxxxxx
    sumb = (sumb << 6) | (bytePattern & 0x3f);
    if (--more == 0)
     buffer.append((char) sumb);
   } else if ((bytePattern & 0x80) == 0x00) { // 0xxxxxxx
    buffer.append((char) bytePattern);
   } else if ((bytePattern & 0xe0) == 0xc0) { // 110xxxxx
    sumb = bytePattern & 0x1f;
    more = 1;
   } else if ((bytePattern & 0xf0) == 0xe0) { // 1110xxxx
    sumb = bytePattern & 0x0f;
    more = 2;
   } else if ((bytePattern & 0xf8) == 0xf0) { // 11110xxx
    sumb = bytePattern & 0x07;
    more = 3;
   } else if ((bytePattern & 0xfc) == 0xf8) { // 111110xx
    sumb = bytePattern & 0x03;
    more = 4;
   } else { // 1111110x
    sumb = bytePattern & 0x01;
    more = 5;
   }
  }
  return buffer.toString();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:23:33.893

只需要将字符串从 ISO 编码为 UTF，我就会得到记录。喜欢

```
name = new String(name.trim().getBytes("ISO-8859-1"),"UTF-8"); 
```

# iphone - 在 NIPagingScrollView 上禁用滚动

> ID：14374340
> 
> 赞同：0
> 
> 时间：2013-01-17T07:46:44.303
> 
> 标签：iphone, ios, xcode, uiscrollview, nimbus-ios

我正在为我的应用程序使用 Nimbus 套件。我有不同的页面滚动视图。每个页面都有一个按钮。当我单击按钮时，我需要转到下一页。为此我正在使用 `[self.pagingScrollView moveToNextAnimated:YES];`. 它工作正常。但我需要禁用页面的水平滚动。NIPagingScrollView 是 UIView 的子类，所以我不能使用 scrollEnabled 属性。我怎样才能在 NIPagingScrollView 上滚动。我不希望用户在屏幕的下一个/上一个滑动。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:13:48.223

`pagingScrollView`您可以通过NIPagingScrollView上的属性访问分页滚动视图。

# c# - 无法使用 WebConfigurationManager.AppSettings 检索值

> ID：14374344
> 
> 赞同：1
> 
> 时间：2013-01-17T07:46:50.197
> 
> 标签：c#, asp.net, web-config

我在 c# 中使用 .net 和 mvc3。我有一个 Web.Config 设置。

我需要检索`<add key="sitelocalization" value="en-GB" /`> 的值。

使用以下代码，我收到此错误：

```
String reference not set to an instance of a String.
Parameter name: name

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentNullException: String reference not set to an instance of a String.
Parameter name: name 
```

在这一行 Thread.CurrentThread.CurrentUICulture = new CultureInfo(localization);

* * *

```
<appSettings>
    <add key="webpages:Enabled" value="false" />
    <add key="sitelocalization" value="en-GB" />
</appSettings>

        string localization = WebConfigurationManager.AppSettings["sitelocalization"];
        Thread.CurrentThread.CurrentUICulture = new CultureInfo(localization);
        Thread.CurrentThread.CurrentCulture = new CultureInfo(localization); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:55:28.120

尝试使用 System.Configuration.ConfigurationManager.AppSettings["sitelocalization"]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:59:26.293

```
System.Configuration.Configuration rootWebConfig1 =
                System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration(null);
            if (rootWebConfig1.AppSettings.Settings.Count > 0)
            {
                System.Configuration.KeyValueConfigurationElement customSetting = 
                    rootWebConfig1.AppSettings.Settings["customsetting1"];
                if (customSetting != null)
                    Console.WriteLine("customsetting1 application string = \"{0}\"", 
                        customSetting.Value);
                else
                    Console.WriteLine("No customsetting1 application string");
            }

<appSettings>
  <add key="customsetting1" value="Some text here"/>
</appSettings> 
```

# java - Apple Java 1.6 跨平台应用程序中的特定类

> ID：14374345
> 
> 赞同：3
> 
> 时间：2013-01-17T07:46:51.870
> 
> 标签：java, macos, cross-platform

我正在开发一个基于 Java 1.6 的跨平台（Mac OS X、Win 和 Linux）应用程序。为了在 Mac Os 平台上更好地集成，我必须使用 Mac OS X 特定的类，这些类在其他平台的 JDK 或 JRE 上不可用，也不能与应用程序一起分发。

我的问题是在不维护两个不同版本的情况下保持代码在 Mac OS X 和 Win 平台上可编译 的***最佳策略是什么？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:57:27.077

有一个类加载器的游戏。插件开发非常类似，至少经常用到：

您将构建主要的跨平台应用程序您将声明一个接口您将创建一个“插件加载器”，它将加载可用的插件。在 macosx 上是 mac 一，在 windows 上是 windows 一。

开发和构建 3 个插件：mac、linux、windows

- 在运行时使用类加载器自动链接它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:54:54.537

我认为您将无法编译*使用*这些类的代码，除非您将*所有用途*限制为反射。这可能会导致比其价值更多的问题。

您可以将 Apple 特定部分提取到单独的工件/项目中，并仅在 Mac 上编译。并通过主项目中的预定义（共享）接口引用*它。*这样，您可以简单地尝试通过反射加载特定于 Apple 的代码，如果这不起作用，请使用虚拟实现。

# syntax - F#中是否有任何语法允许我重复我已经写过的命令行？

> ID：14374346
> 
> 赞同：-1
> 
> 时间：2013-01-17T07:46:53.443
> 
> 标签：syntax, f#, repeat

假设我有一个参数 x 并且有几行使用 x 来计算 y，现在有 10 个 x 值，我需要使用每个值来计算相应的 y，我不想每次都更改 x 并运行我的命令行 10 次，F# 中是否有任何语法允许我重复我已经编写的那些命令行，以便我只需要执行一次即可计算出所有 10 个 y 值？

提前致谢

编辑：我将代码粘贴在下面，基本上，我想要的是获得不同参数组合的 alpha，我的参数是“shreshold”、“WeeksBfReport”和“DaysBfExecution”。我有 30 组参数组合，所以我不想去更改参数并运行命令 30 次。有没有办法不这样做？

```
let shreshold= 2.0
let ReportDate = "2008/12/15"
let ExeDate = "2009/01/05"
let WeeksBfReport = 1
let DaysBfExecution = 3
let Rf=0.01

let DateIn=ReportDate.ToDateTimeExact("yyyy/MM/dd").AddWeeks(-WeeksBfReport)
let DateOut=ExeDate.ToDateTimeExact("yyyy/MM/dd").AddWorkDays(-DaysBfExecution)
let DateInString=DateIn.ToString("yyyy/MM/dd")
let DateOutString=DateOut.ToString("yyyy/MM/dd")

let mutable FundMV=0.
let FundTicker=csvTable.AsEnumerable().Select(fun (x:DataRow) -> x.Field<string>("Ticker")).ToArray()
for i in 0..csvTable.Rows.Count-1 do
    let FundUnitPrice= float(csvTable.AsEnumerable().Where(fun (x:DataRow) -> x.Field<string>(0) = FundTicker.[i]).First().Field<string>(DateInString))
    let FundShares= float(csvTable1.AsEnumerable().Where(fun (x:DataRow) -> x.Field<string>(0) = FundTicker.[i]).First().Field<string>(DateInString))
    FundMV<-FundMV + FundUnitPrice*FundShares
    printfn "%e" FundMV
//use TMV to calculate weights of CSI300 constitutes
let mutable csiTMV=0.
let CSITMV : float array = Array.zeroCreate 300
let DictionaryCSI = Dictionary<String,float>()
for i in 0..299 do
    let TMV=float(csvTable3.Rows.[i].Field<string>(DateInString))
    csiTMV<-csiTMV + TMV
    CSITMV.[i] <- TMV
for i in 0..299 do
    let Weight=CSITMV.[i]/csiTMV
    DictionaryCSI.[csvTable3.Rows.[i].Field<string>("Stock")]<-Weight

let DictionaryOldOut = Dictionary<String,float>()
let array=csvTable2.AsEnumerable().Select(fun (x:DataRow) -> x.Field<string>("Stock")).ToArray()
let OldOutTMV=ResizeArray<float>()
let DictionaryOldOutWeight = Dictionary<string,float>()
let OldOutWeight : float array = Array.zeroCreate (csvTable2.Rows.Count/2)
for i in 0..(csvTable2.Rows.Count/2)-1 do
    let Weight=DictionaryCSI.Item(array.[i+(csvTable2.Rows.Count/2)])
    DictionaryOldOutWeight.[csvTable2.Rows.[i+csvTable2.Rows.Count/2].Field<string>("Stock")]<-Weight
    OldOutWeight.[i]<- Weight
    DictionaryOldOut.[csvTable2.Rows.[i+csvTable2.Rows.Count/2].Field<string>("Stock")]<- Weight*FundMV //OldOut Moving Value
    OldOutTMV.Add(Weight)
let OldOutTMVarray=OldOutTMV.ToArray() //create an array of OldOut weights and then sum up
let SumOldOutTMV=Array.fold (+) 0\. OldOutTMVarray 

let mutable NewInTMV=0.
let NewInWeight : float array = Array.zeroCreate (csvTable2.Rows.Count/2)
let DictionaryNewIn = Dictionary<string,float>()
let DictionaryNewInWeight = Dictionary<string,float>()
for i in 0..csvTable3.Rows.Count-300-1 do
    let TMV=float(csvTable3.Rows.[i+300].Field<string>(DateInString))
    NewInTMV<-NewInTMV + TMV
    let Weight=TMV/(csiTMV+NewInTMV-SumOldOutTMV)
    NewInWeight.[i]<-Weight
    DictionaryNewInWeight.[csvTable3.Rows.[i+300].Field<string>("Stock")]<-Weight
    let MovingValue=Weight*FundMV
    DictionaryNewIn.[csvTable3.Rows.[i+300].Field<string>("Stock")]<-MovingValue //NewIn Moving Value

let table2array=csvTable2.AsEnumerable().Select(fun (x:DataRow) -> x.Field<string>("Stock")).ToArray()
let NewInturnoverArray : float array = Array.zeroCreate (csvTable2.Rows.Count/2) 
for i in 0..(csvTable2.Rows.Count/2)-1 do  
    let lastday= float(csvTable2.AsEnumerable().Where(fun (x:DataRow) -> x.Field<string>(0) = table2array.[i]).First().Field<string>(DateInString)) 
    let turnover = csvTable2.Rows.[i].ItemArray.Skip(3)|>Seq.map(fun (x:obj)-> System.Double.Parse(x.ToString()))|>Seq.toArray
    let lastdayindex : (int) =
        if lastday= 0\. then
            let lastdayfake=float(csvTable2.AsEnumerable().Where(fun (x:DataRow) -> x.Field<string>(0) = table2array.[i+2]).First().Field<string>(DateInString)) 
            let turnoverfake = csvTable2.Rows.[i+2].ItemArray.Skip(3)|>Seq.map(fun (x:obj)-> System.Double.Parse(x.ToString()))|>Seq.toArray
            Array.findIndex(fun elem -> elem=lastdayfake) turnoverfake
        else
            let lastdayfake=lastday
            let turnoverfake=turnover
            Array.findIndex(fun elem -> elem=lastdayfake) turnoverfake
    printfn "%A" lastdayindex
    let TurnoverNeed : float array = Array.zeroCreate 21
    for t in 0..20 do
        TurnoverNeed.[t] <- turnover.[lastdayindex - 20 + t]
    let zerotwo : float array = Array.zeroCreate TurnoverNeed.Length
    if TurnoverNeed=zerotwo then 
        let ave_daily_turnover = 0.
        NewInturnoverArray.[i] <- ave_daily_turnover
    else 
        let ave_daily_turnover  = Seq.average(TurnoverNeed|>Seq.filter(fun x-> x > 0.))
        NewInturnoverArray.[i] <- ave_daily_turnover

type totalinfo = {Name:String;Shock:float}
let NewIn=ResizeArray<totalinfo>()
for i in 0..(csvTable2.Rows.Count/2)-1 do
    let MovingValue=DictionaryNewIn.Item(array.[i])
    let Shock=MovingValue/NewInturnoverArray.[i]
    let V= {Name=string(array.[i]); Shock=Shock}
    NewIn.Add(V)
let NewInShock=NewIn.ToArray()

let OldOutturnoverArray : float array = Array.zeroCreate (csvTable2.Rows.Count/2)
for i in 0..(csvTable2.Rows.Count/2)-1 do   
    let turnover = csvTable2.Rows.[i+csvTable2.Rows.Count/2].ItemArray.Skip(3)|>Seq.map(fun (x:obj)-> System.Double.Parse(x.ToString()))
    let zero : float array = Array.zeroCreate (turnover|>Seq.toArray).Length
    if turnover|>Seq.toArray=zero then
        let ave_daily_turnover  = 0.
        OldOutturnoverArray.[i] <- ave_daily_turnover
    else
        let ave_daily_turnover  = Seq.average(turnover|>Seq.filter(fun x-> x > 0.))
        OldOutturnoverArray.[i] <- ave_daily_turnover

let OldOut=ResizeArray<totalinfo>()
for i in 0..(csvTable2.Rows.Count/2)-1 do
    let MovingValue=DictionaryOldOut.Item(array.[i+csvTable2.Rows.Count/2])
    let Shock=MovingValue/OldOutturnoverArray.[i]
    let V= {Name=string(array.[i+csvTable2.Rows.Count/2]); Shock=Shock}
    OldOut.Add(V)
let OldOutShock=OldOut.ToArray()

let DoIn=NewInShock |> Array.filter (fun t -> t.Shock >= shreshold)
let DoOut=OldOutShock |> Array.filter (fun t -> t.Shock >= shreshold)

let DoInTicker= Array.map (fun e -> e.Name) DoIn
let DoOutTicker= Array.map (fun e -> e.Name) DoOut

let DoInWeight : float array = Array.zeroCreate DoInTicker.Length
for i in 0..DoInTicker.Length-1 do
    DoInWeight.[i] <- DictionaryNewInWeight.Item(DoInTicker.[i])

let TotalDoInWeight= Array.fold (+) 0\.  DoInWeight
let DoInRatioX : float array = Array.zeroCreate DoInTicker.Length
for i in 0..(DoInTicker.Length)-1 do  
    DoInRatioX.[i] <- DoInWeight.[i]/TotalDoInWeight
let Beta=csvTable2.AsEnumerable().Select(fun (x:DataRow) -> x.Field<string>("Beta")).ToArray()
//let NewInBeta : float array = Array.zeroCreate (csvTable2.Rows.Count/2)
let DictionaryNewInBeta = Dictionary<string,float>()
for i in 0..(csvTable2.Rows.Count/2)-1 do  
//    NewInBeta.[i] <- float(Beta.[i])
    DictionaryNewInBeta.[csvTable3.Rows.[i+300].Field<string>("Stock")]<-float(Beta.[i])
let DoInBeta : float array = Array.zeroCreate DoInTicker.Length
for i in 0..DoInTicker.Length-1 do
    DoInBeta.[i] <- DictionaryNewInBeta.Item(DoInTicker.[i])

let mutable PortfolioBeta=0.
for i in 0..(DoInTicker.Length)-1 do
    PortfolioBeta <- PortfolioBeta + DoInRatioX.[i] * DoInBeta.[i] 

let mutable PortfolioReturn= 0.
for i in 0..DoInTicker.Length-1 do
    let PriceIn= float(csvTable4.AsEnumerable().Where(fun (x:DataRow) -> x.Field<string>(0) = DoInTicker.[i]).First().Field<string>(DateInString))
    let PriceOut= float(csvTable4.AsEnumerable().Where(fun (x:DataRow) -> x.Field<string>(0) = DoInTicker.[i]).First().Field<string>(DateOutString))
    PortfolioReturn <- PortfolioReturn + (1./float(DoInTicker.Length))*(PriceOut - PriceIn)/PriceIn

let IndexIn= float(csvTable4.AsEnumerable().Where(fun (x:DataRow) -> x.Field<string>(0) = "000300.SH").First().Field<string>(DateInString))
let IndexOut= float(csvTable4.AsEnumerable().Where(fun (x:DataRow) -> x.Field<string>(0) = "000300.SH").First().Field<string>(DateOutString))
let MarketReturn= (IndexOut-IndexIn)/IndexIn
let Alpha= PortfolioReturn-Rf-PortfolioBeta*(MarketReturn-Rf) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:33:34.673

我也不完全确定您需要什么（其他约束和动机是什么），但是如果您有一些交互式代码可以进行一次计算，请说：

```
let x = 10
let y = x * x 
```

您可以使用例如列表将其转换为对多个输入执行相同计算的代码：

```
let xs = [1; 10; 100]
let ys = [ for x in xs -> x * x ] 
```

但如前所述，这取决于您实际想要实现的目标 - 如果您可以添加一个实际示例来说明您正在尝试做什么，那将很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:57:15.083

就像约翰说的那样，把它全部放在一个接受变化值作为参数的函数中。可以使用记录来允许您将参数组合存储在列表中，就像这样。

```
type ReportParameters = {
    shreshold: float;
    ReportDate: string;
    ExeDate: string;
    WeeksBfReport: int;
    DaysBfExecution: int;
    Rf: float;
}

type Report = {
    NewInShock: totalinfo;
    IndexIn: float;
    // etc
}

let createReport (reportParams:ReportParameters) : Report = 
    let shreshold = reportParams.shreshold
    let ReportDate = reportParams.ReportDate
    let ExeDate = reportParams.ExeDate
    let WeeksBfReport = reportParams.WeeksBfReport
    let DaysBfExecution = reportParams.DaysBfExecution
    let Rf = reportParams.Rf

    // Your function code HERE
    // Remember to move all type definitions out of this scope.

    { // Report data to return.
        NewInShock = NewInShock;
        IndexIn = IndexIn;
        // etc
    } 
```

使用代码就这么简单：

```
let reportsToBeGenerated = [
    { shreshold = 2.0; ReportDate = "2008/12/15"; ExeDate = "2009/01/05"; WeeksBfReport = 1; DaysBfExecution = 3; Rf = 0.01 };
    { shreshold = 1.5; ReportDate = "2009/12/15"; ExeDate = "2010/01/05"; WeeksBfReport = 2; DaysBfExecution = 2; Rf = 0.01 };
]

let reports = reportsToBeGenerated |> List.map createReport 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:33:59.607

查看您的代码，您想做这样的事情

```
let run shreshold ReportDate ExeDate WeeksBfReport DaysBfExecution  Rf =
    //The entire rest of the code indented - you may want to return alpha etc 
```

然后你可以插入参数值

# c# - 刷新按钮 - 插入、删除、更新后刷新数据网格视图

> ID：14374348
> 
> 赞同：4
> 
> 时间：2013-01-17T07:46:58.297
> 
> 标签：c#, winforms, ms-access

我正在尝试创建一个刷新按钮，以便在我完成更新后自动刷新我的 datagridview 中的数据。

但是，我的刷新按钮似乎不起作用。显示的数据与原始数据保持一致。只有在我手动结束我的 Windows 应用程序并重建它后它才会更新。

这是我的代码：

```
 private void button_refresh_Click(object sender, EventArgs e)
        {
            this.acuzioSecureStore_DatabaseXDataSet.AcceptChanges();
        } 
```

请协助。谢谢^_^

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:54:17.960

处理此问题的最简单方法是使用绑定源对象。

如果您将信息从 Access 数据库加载到 DataGridView 中，那么您很可能将数据存储在 Dataset 或 DataTable 中。

创建一个 Binding Source 对象，并在填充 DataTable/Dataset 后，将 Binding Source 的数据源设置为 DataTable。然后将 DataGridView 中的数据源设置为绑定源对象。

这样做可确保您的 datagridview 中的任何更改或反映在 DataTable 中，反之亦然。如果您将数据重新加载到 DataTable 中，它将自动反映在数据网格中。

```
DataTable dt = new DataTable();

BindingSource bs = new BindingSource();

bs.DataSource = dt;

dataGridView1.DataSource= bs; 
```

现在所有更改都将自动发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T01:10:25.240

嘿，上面的解决方案很好，但是当执行上面的代码时，表格消失了，看不到。如果我执行

```
 da.Fill(ds, "p");
        dataGridView1.DataSource = ds.Tables["p"]; 
```

然后再次创建整个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T15:53:03.943

```
private void button_refresh_Click(object sender, EventArgs e)
        {
            SqlConnection con=new SqlConnection(@"");
            string query="select * from abc";
            SqlCommand cmd=new SqlCommand(query,con);
            SqlDataAdapter da=new SqlDataadapter(cmd);
            DataTable dt=new DataTable();
            da.Fill(dt);
            dataGridView1.DataSource=dt;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-15T11:50:57.593

我有一个 datagridview，绑定到实体框架数据库中的一个表：

```
dataGridView1.DataSource = MyDatabase.MyTable; 
```

尽管浪费了两天，但它永远不会刷新。我用一个简单的解决方法解决了它：

```
private void button_refresh_Click(object sender, EventArgs e) {
    dataGridView1.DataSource = MyDatabase.MyTable.Where(i =>(true));
} 
```

这**是**一个丑陋的解决方法，朋友向我解释了它是如何工作的——如果我这样做`dataGridView1.DataSource = database.table`，它将缓存表并永远使用缓存的数据。事实上，每次我们创建一个新的虚拟查询时，都会阻止 .net 对其进行缓存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-04T13:49:30.917

请试试这个，它对我有用，如果你有更好的选择，请告诉我。

```
private void button3_Click(object sender, EventArgs e)
{
    dataGridView1.Refresh();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-09T08:43:38.457

您可以在 PageLoad 或 UserControl 加载事件上绑定 dataGridView，然后在网格视图中调用加载事件

像

this.ucUsers_Load(null, null); // 来自 C# 的 Windows

# django - 如何处理 NoReverseMatch 错误，“item_order”的反向参数“（）”和关键字参数“{}”未找到

> ID：14374353
> 
> 赞同：0
> 
> 时间：2013-01-17T07:47:18.107
> 
> 标签：django, django-urls

我遇到了 NoReverseMatch 错误 `Reverse for 'item_order' with arguments '()' and keyword arguments '{}' not found.` 我有这个视图，它在模板运行时被调用，

```
def show_item(request,id):
    # need to evaluate the HTTP method
    if request.method == 'POST':
        a = Item.objects.get(pk=id)
        form = forms.PartialOrderItemForm(request.POST,instance=a)
        # check validation of posted data
        if form.is_valid():

            order.add_to_order(request)
            # if test cookie worked, get rid of it
            if request.session.test_cookie_worked():
                request.session.delete_test_cookie()
            url =urlresolvers.reverse('order_index')
            # redirect to order page
            return HttpResponseRedirect(url)
    else:
        # it's a GET, create the unbound from. Note request as a Kwarg
        form = forms.PartialOrderItemForm(request.GET)
    # set the test cookie on our first GET request
    request.session.set_test_cookie()
    context={
#       'categories':categories,
        'form':form,
#       'menu':menu,

    }
    return render_to_response('item.html',context,context_instance=RequestContext(request)) 
```

当这个视图运行时，在某个时候，它会调用这个函数，

```
def add_to_order(request):  
#   import pdb; pdb.set_trace()
    postdata = request.POST.copy()
    # get item slug from post data, return blank if empty
#   item_slug = postdata.get('item_slug','')
    #get quantity added, return 0 if empty
    quantity = postdata.get('quantity',0)
    # fetch the item or return  missing page error_message
    i = get_object_or_404(Item)
    # get items in order
    order_items = get_order_items(request)
    item_in_orders = False
    # check to see if item is already in order
    for order_item in order_items:
        if order_item.item.id == i.id:
            #update the quantity if found
            order_item.augment_quantity(quantity)
            item_in_orders = True
    if not item_in_orders:
        # creat and save a new order item
        oi = OrderItem()
        oi.order_id = _order_id(request)
        oi.quantity = quantity
        oi.item = i
        oi.save() 
```

urls.py，

```
from .views import show_item, show_order,get_category
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('',
    url(r'^$',get_category, name="item_order_home"),
    url(r'^your_order/$',show_order,name="order_index"),
    url(r'^item/(?P<id>\w+)/$', show_item, name = "item_order"),
#   url(r'^menu/$',get_category,name = "f4l_menu"),
) 
```

在模板中，这是在做什么

```
{% for category in categories %}
 <h5> {{ category.title }} </h5>
  {% for item in category.item.all %}
   <li><a href="{% url item_order %}">{{item.name}}<span> {{item.price}}frw</span></li><a/>
  {% endfor %}
{% endfor %} 
```

我想要做的是，它们是几个项目，当我点击一个时，它会将我重定向到一个表单，我在其中提交我想购买的项目的数量，当我提交表单时，我会重定向到订单页面. 但相反，我遇到了这个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:52:35.987

您需要传递 id 值，因为您在 url 中指定了它

```
{% url item_order item.id %} 
```

# xml - 需要使用soap协议显示来自基于xml的API的xml响应

> ID：14374354
> 
> 赞同：0
> 
> 时间：2013-01-17T07:47:27.187
> 
> 标签：xml, web-services, c#-4.0, soap

伙计们，我正在从 webservice api 获得基于 xml 的响应的响应，现在问题是我想在我的页面上将响应显示为简单的 html，但我不知道如何在 c# 中做到这一点。任何帮助将不胜感激。我的响应得到是这样的：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <OTA_AirLowFareSearchRS Version="2.001" xmlns="http://www.opentravel.org/OTA/2003/05">
            <PricedItineraries>
                <PricedItinerary CompositeFlightNumber="S2101" CountCompositeFlightNumber="1" OriginDestinationRPH="0" SequenceNumber="1" SupplierSystem="Amadeus">
                    <AirItinerary SupplierSystem="Amadeus">
                        <OriginDestinationOptions>
                            <OriginDestinationOption Duration="01:55:00" FromCache="true" SupplierSystem="Amadeus">
                                <FlightSegment ArrivalDateTime="2007-11-11T08:55:00" DepartureDateTime="2007-11-11T07:00:00" E_TicketEligibility="Eligible" FlightNumber="101" RPH="1" ResBookDesigCode="O">
                                    <BookingClassAvail RPH="1" ResBookDesigCode="O" ResBookDesigQuantity="4"/>
                                    <DepartureAirport LocationCode="DEL"/>
                                    <ArrivalAirport LocationCode="BOM"/>
                                    <Equipment AirEquipType="737"/>
                                    <MarketingAirline Code="S2"/>
                                </FlightSegment>
       <FormData>
                <FareInformationIDs>
                <FareInformationID BaseFare="1825" Code="" FareCode="UGOSAVE" FareID="0" PTCID="1" Quantity="">0</FareInformationID>
            </FareInformationIDs>
      </FormData>                            
</OriginDestinationOption>
                        </OriginDestinationOptions>
                    </AirItinerary>
                    <AirItineraryPricingInfo>
                        <ItinTotalFare>
                            <BaseFare Amount="1875" CurrencyCode="INR"/>
                            <Taxes>
                                <Tax Amount="1575" CurrencyCode="INR" TaxCode="TTL"/>
                            </Taxes>
                            <TotalFare Amount="3461.63" CurrencyCode="INR"/>
                            <ServiceTax Amount="11.63" Currency="INR" Description="Service Tax" ServiceTaxCode="ST" ServiceTaxRate="0.0062"/>
                        </ItinTotalFare>
                        <PTC_FareBreakdowns>
                            <PTC_FareBreakdown>
                                <PassengerTypeQuantity Code="ADT" Quantity="1"/>
                                <FareBasisCodes>
                                    <FareBasisCode>OSASAS</FareBasisCode>
                                </FareBasisCodes>
                                <PassengerFare>
                                    <BaseFare Amount="1875" CurrencyCode="INR"/>
                                    <Taxes>
                                        <Tax Amount="1575" CurrencyCode="INR" TaxCode="TTL"/>
                                    </Taxes>
                                    <TotalFare Amount="3450" CurrencyCode="INR"/>
                                </PassengerFare>
                            </PTC_FareBreakdown>
                        </PTC_FareBreakdowns>
                        <FareInfos>
                            <FareInfo>
                                <FareReference>OSASAS</FareReference>
                                <FilingAirline Code="ZZ"/>
                                <DepartureAirport LocationCode="DEL"/>
                                <ArrivalAirport LocationCode="BOM"/>
                            </FareInfo>
                        </FareInfos>
                    </AirItineraryPricingInfo>
                    <TicketingInfo DeliveryMethod="EMAIL" TicketTimeLimit="" TicketType="eTicket" TicketingStatus="" eTicketNumber="">
                        <TicketAdvisory Language="English"/>
                    </TicketingInfo>
                </PricedItinerary>
            </PricedItineraries>
        </OTA_AirLowFareSearchRS>
    </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:12:22.173

您可以使用 XSLT 转换 xml

更多信息[在这里](http://support.microsoft.com/kb/307322)

# uiviewcontroller - UIWebView 宽度 0

> ID：14374358
> 
> 赞同：0
> 
> 时间：2013-01-17T07:47:41.043
> 
> 标签：uiviewcontroller, uiwebview, ios6, ios4

代码部分：

```
UIWebView *wb = [[UIWebView alloc] init];
self.examplesView = wb;
[wb release];
examplesView.scalesPageToFit = YES;
[self.view addSubview:examplesView];
NSLog(@"createViewsForRect: %@, examplesView.frame : %@",NSStringFromCGRect(rect), NSStringFromCGRect(examplesView.frame)); 
```

输出：

> createViewsForRect: {{0, 0}, {320, 480}}，examplesView.frame : {{0, 0}, {0, 0}}

这个 UIViewController 稍后被添加到另一个控制器中，在那里调用了一个函数来加载一些东西，我做了一个日志：

> examplesView.frame: {{0, 0}, {0, 360}}

因为宽度为 0，所以不可见。如何解决？为什么宽度为 0？

这是一个没有 ARC 的旧的继承代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:25:24.620

第一行应为

```
UIWebView *wb = [[UIWebView alloc] initWithFrame:rect]; 
```

然后`wb`将使用您想要的框架进行初始化。

# python - 在 Python 中循环以减少重复

> ID：14374367
> 
> 赞同：0
> 
> 时间：2013-01-17T07:48:16.920
> 
> 标签：python, python-3.x

```
def open_marks():
    N = (int(input('how many students? '))* 5)
    students = []
    for line in open('marks.txt').readlines():
       datafile = (line.strip().split('\t')[0].split(','))  
       for n in datafile:
          students.append(int(n))
    students=students[:N]
    return students
def open_marks1():
    students = open_marks()
    students1=students[0::5]#set to return only the first(lowest) marks drawn
    return students1
def open_marks2():
    students = open_marks()
    students2=students[1::5]#set to return only the second marks drawn
    return students2
def open_marks3():
    students = open_marks()
    students3=students[2::5]#set to return only the third marks drawn
    return students3
def open_marks4():
    students = open_marks()
    students4=students[3::5]#set to return only the fourth marks drawn
    return students4
def open_marks5():
    students = open_marks()
    students5=students[4::5]#set to return only the fifth(highest) marks drawn
    return students5

def count_ranges_one():

    students1 = open_marks1()
    print('first number: ',students1)
    range_counts1 = [0] * 12
    for num in students1[:]:#change number to select number of draws
        which_range=int(num//5)
        range_counts1[which_range] = range_counts1[which_range] + 1
    return range_counts1
def count_ranges_two():
    students2 = open_marks2()
    print('second number: ',students2)
    range_counts2 = [0] * 12
    for num in students2[:]:#change number to select number of draws
        which_range=int(num//5)
        range_counts2[which_range] = range_counts2[which_range] + 1
    return range_counts2
def count_ranges_three():
    students3 = open_marks3()
    print('third number: ',students3)
    range_counts3 = [0] * 12
    for num in students3[:]:#change number to select number of draws
        which_range=int(num//5)
        range_counts3[which_range] = range_counts3[which_range] + 1
    return range_counts3
def count_ranges_four():
    students4 = open_marks4()
    print('fourth number: ',students4)
    range_counts4 = [0] * 12
    for num in students4[:]:#change number to select number of draws
        which_range=int(num//5)
        range_counts4[which_range] = range_counts4[which_range] + 1
    return range_counts4
def count_ranges_five():
    students5 = open_marks5()
    print('fifth number: ',students5)
    range_counts5 = [0] * 12
    for num in students5[:]:#change number to select number of draws
        which_range=int(num//5)
        range_counts5[which_range] = range_counts5[which_range] + 1
    return range_counts5 
```

我有一个包含学生分数的文本文件，格式为：7、5、10、25、32 9、15、25、39、18 等以上根据位置（1、2、3、4 或5）然后有一个例程来“写”直方图以显示标记的分布。我所写的内容非常笨拙和重复，但我无法找出循环函数来传递分组为每个问题的标记的数据，然后是直方图的每个范围的数字。有人可以帮我解释一下逻辑吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:31:42.217

你知道你可以将参数传递给你的函数吗？这五个`open_marks[1-5]`功能可以概括如下：

```
def open_marks_for_student(n):
    students = open_marks()
    return students[n-1::5] 
```

如果您现在将例如 3 传递给该函数，您将获得与旧 open_marks3 函数相同的结果：

```
open_marks_for_student(3) 
```

同样的原理也可以应用于`count_ranges`函数，只需编写一个通用函数并将标记作为参数传递：

```
def count_ranges(marks):
    range_counts = [0] * 12
    for num in marks[:]: #change number to select number of draws
        which_range=int(num//5)
        range_counts[which_range] = range_counts1[which_range] + 1
    return range_counts 
```

现在像这样使用它：

```
def get_range_counts():
    range_counts = []
    student_nums = [1,2,3,4,5] #or range(1,6)
    for n in student_nums:
        marks = open_marks_for_student(n)
        range_counts.append(count_ranges(marks)) #create histogram, append to list
    return range_counts 
```

仍然可以进行一些优化，例如只打开一次标记文件而不是每个学生一次，或者删除`marks`循环中的切片`count_ranges`（如果您打算修改原始列表中的原始列表，则只需遍历副本循环），但这应该足以让你开始。

# javascript - 使用咖啡脚本从 jquery 回调中调用方法

> ID：14374368
> 
> 赞同：1
> 
> 时间：2013-01-17T07:48:21.303
> 
> 标签：javascript, jquery, coffeescript

在 coffescript 中，我想从 jquery 回调中调用一个类方法，如何访问该类的范围？this.loadImage(currentIndex) 不起作用

```
class ImageCarousel    

    currentIndex = 0
    jsonPath = "json/images.json"
    images = null  

    constructor: () ->

       this.loadJson()

loadJson: () ->

    $.ajax jsonPath,
        success  : (data, status, xhr) ->
            console.log("yea "+data)
            this.images = data.images
            this.loadImage(currentIndex)
        error    : (xhr, status, err) ->
            console.log("nah "+err)
        complete : (xhr, status) ->
            console.log("comp")

loadImage:(@index) ->

    console.log("load image "+@index) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:59:50.957

您需要使用`=>`运算符进行回调。您可能会发现[此信息](http://coffeescriptcookbook.com/chapters/jquery/callback-bindings-jquery)很有帮助。

# ios - AS3 ios cameraUI 保存和加载图片失败，为什么？

> ID：14374371
> 
> 赞同：1
> 
> 时间：2013-01-17T07:48:25.457
> 
> 标签：ios, actionscript-3, flash

我正在使用下面的 AS3 代码通过 cameraUI 拍照。在 Android 上一切正常，但是当我在 iPad 上测试时，尝试加载保存的图像时出现错误。ioErrorHandler1 返回：

ioErrorHandler: [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2124: Loaded file is an unknown type. URL: app-storage:/myImage.jpg" errorID=2124]

有谁知道为什么？（如前所述，它适用于 Android）。这是代码：

```
 function imageCaptured( event:MediaEvent ):void
      {
           trace( "Media captured..." );
            var imagePromise:MediaPromise = event.data;
           dataSource = imagePromise.open();    
           if( imagePromise.isAsync )
           {
            trace( "Asynchronous media promise." );

            eventSource = dataSource as IEventDispatcher; 
            imageLoader = new Loader();
            imageLoader.contentLoaderInfo.addEventListener( Event.COMPLETE, asyncImageLoaded );
            imageLoader.addEventListener( IOErrorEvent.IO_ERROR, cameraError );

                 imageLoader.loadFilePromise( imagePromise );
           }
           else
           {
            trace( "Synchronous media promise." );
            imageLoader.loadFilePromise( imagePromise );
            showMedia( imageLoader );
           }
      }
    function asyncImageLoaded( event:Event ):void
      {

            readMediaData();

      }
    function readMediaData():void
    {

var image:Bitmap = Bitmap(imageLoader.content);
var bitmap:BitmapData = image.bitmapData;

image.width = 100;
image.height = 100;
this.addChild(image);

var imageBytes:ByteArray = new ByteArray();
dataSource.readBytes( imageBytes );

var file:File = File.applicationStorageDirectory.resolvePath("myImage.jpg");
// create a file stream
var fs:FileStream=new FileStream();
// open the stream for writting
fs.openAsync(file, FileMode.WRITE);
// write the string data down to the file
fs.writeBytes(imageBytes);
// ok close the file stream
fs.close();

fs.addEventListener(Event.CLOSE,function(event:Event):void {
    var mLoader=new Loader();
    var mRequest:URLRequest = new URLRequest(file.url);
    mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, function (event:Event):void{
                                showMediaLoad(mLoader);
                        });
    mLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler1);
    mLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, progressHandler);
    mLoader.contentLoaderInfo.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
    mLoader.contentLoaderInfo.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler);

    mLoader.load(mRequest);

})

trace("saved");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:32:13.293

在将 ByteArray 保存为 jpeg 之前，您可能需要对其进行编码。

这是我不久前使用的一段代码......

```
import com.adobe.images.JPGEncoder;

private var f:File;
private var stream:FileStream;
private var j:JPGEncoder;
private var image:Bitmap = Bitmap(imageLoader.content);
private var urlRequest:URLRequest;
private var loader:Loader;

function saveImage():void {

f = File.documentsDirectory.resolvePath("logo.jpg"); 

stream = new FileStream();
stream.open(f, FileMode.WRITE);                                         

j = new JPGEncoder(80);
var bytes:ByteArray = j.encode(image.bitmapData);
stream.writeBytes(bytes, 0, bytes.bytesAvailable);
stream.close();

stream.openAsync(f, FileMode.READ); 
stream.addEventListener(Event.COMPLETE, loadImage, false, 0, true); 
}

private function loadImage(e:Event):void {

stream.removeEventListener(Event.COMPLETE, loadImage);
stream = null;

//now load the image

if (f.exists == true) {

urlRequest = new URLRequest(f.url);
loader = new Loader;
loader.load(urlRequest);
loader.addEventListener(IOErrorEvent.IO_ERROR, function(e:IOErrorEvent):void{ trace(e) });
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, ImageLoaded, false, 0, true);

}
}

private function ImageLoaded(e:Event):void {

addChild(loader);
loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, ImageLoaded);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:19:14.433

我找到了解决方案。如果我在 eventSource 上放置一个事件监听器，它可以在没有 jpgencoder 的情况下工作。如果其他人可以使用该解决方案，我将其发布在这里：

imageCaptured 函数更新如下：

```
 if( imagePromise.isAsync )
           {
            trace( "Asynchronous media promise." );
            var eventSource:IEventDispatcher = dataSource as IEventDispatcher;
    eventSource.addEventListener( Event.COMPLETE, onMediaLoaded );

           } 
```

然后图像保存在这个函数中：

```
function onMediaLoaded( event:Event ):void
{
trace("Media load complete");

var imageBytes:ByteArray = new ByteArray();
dataSource.readBytes( imageBytes );

var file:File = File.applicationStorageDirectory.resolvePath("myImage.jpg");
// create a file stream
var fs:FileStream=new FileStream();
// open the stream for writting
fs.openAsync(file, FileMode.WRITE);
// write the string data down to the file
//fs.writeBytes(imageBytes);
fs.writeBytes(imageBytes);

// ok close the file stream
fs.close();

fs.addEventListener(Event.CLOSE, function(e:Event):void {

    var mLoader=new Loader();
    var mRequest:URLRequest = new URLRequest(file.url);
    mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, function (event:Event):void{
  showMediaLoad(mLoader);

 });
mLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler1);
mLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, progressHandler);
mLoader.contentLoaderInfo.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
mLoader.contentLoaderInfo.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler);

mLoader.load(mRequest);
} 
```

# ios - UIButton 看起来像 UIBarButtonItem

> ID：14374372
> 
> 赞同：2
> 
> 时间：2013-01-17T07:48:27.477
> 
> 标签：ios

> **可能重复：**
> [带有图像的 UIBarButtonItem](https://stackoverflow.com/questions/14375372/uibarbuttonitem-with-image)

我想创建一个`UIButton`看起来类似于`UIBarButton`项目（即具有圆角和渐变背景）并将其添加到我的视图中：

![渐变按钮](../Images/47dec0ba5b1c13de17c0d1848ee1a001.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:54:29.200

```
 _btn1 = [[UIButton alloc] initWithFrame:CGRectMake(50, 1500, 100, 200)];
    _btn1.layer.cornerRadius = 5;
    _btn1.layer.masksToBounds = YES;
    [_btn1 setBackgroundImage:[UIImage imageNamed:@"img2.jpg"] forState:UIControlStateNormal]; 
```

如果您想自己绘制图层，可以查看[MAConfirmButton](https://github.com/mikeahmarani/MAConfirmButton)

# jquery - Jquery 验证和提交处理程序

> ID：14374373
> 
> 赞同：0
> 
> 时间：2013-01-17T07:48:29.030
> 
> 标签：jquery, jquery-validate

我正在使用 jquery 验证来验证我的表单，我想在验证规则通过时显示提交按钮，

```
$(function(){
    $('.newEmp').validate({ 
         submitHandler: function(){ 
            alert("Submitted!");
         },
         rules:{
             email:{
                 required: true,
                 email: true
             },
             first_name:{
                 required: true,
                 minlength: 4
             },
             last_name:{
                 required: true,
                 minlength: 4                
             },
             mobile:{
                 required: true,
                 minlength: 4                
             },
             position:{
                 required: true,
                 minlength: 4                
             }
         }
    });

}); 
```

**HTML**

```
<div class="blue_button" style="display:none;">
    <button type="submit" id="submit">submit</button>
</div> 
```

我应该把这段代码放在哪里来显示我的提交按钮

`$('.blue_button').css('display', 'block');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:01:23.540

您可以使用 手动触发验证`$('.newEmp').valid()`。如果它通过，您可以显示提交按钮。

更新：

```
$('.newEmp input').focus(function (){
    if ($('.newEmp').valid()) {
        $('.blue_button').show();
    }
}); 
```

# javascript - 如何使用 GWT 在 JSNI 中获取和设置属性？

> ID：14374377
> 
> 赞同：3
> 
> 时间：2013-01-17T07:48:44.327
> 
> 标签：javascript, gwt, jsni

**我有获取和设置属性的 javascript 代码：**

```
 set page(val) { some code.. },

 get page() { return currentPageNumber; }, 
```

现在我想在 JSNI 中使用这些 get 和 set 属性，但发生错误（JavaScript parsing: Missing : after property id）。请建议我现在能做什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:49:38.483

[JSNI 代码是使用Rhino](https://developer.mozilla.org/en-US/docs/Rhino)（相当旧的版本）解析的，它不支持大部分 ECMAScript 5。因此，您不能在 JSNI 方法中使用 ECMAScript 5 语法，例如`get`and运算符。`set`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:53:16.340

当我们通过 JSNI 在 java 中使用 js 时，无法在 java 脚本中设置和获取属性。

# c# - 如何在 Android 上移动或复制/粘贴文件

> ID：14374380
> 
> 赞同：1
> 
> 时间：2013-01-17T07:49:00.650
> 
> 标签：c#, android, xamarin.android

我已经在互联网上搜索了如何以编程方式在 Android 设备上移动或复制“n”粘贴文件，但到目前为止我一无所获。我想要做的是，我的应用程序将 SQLite 数据库从内部 sdcard 复制或移动到 /data/data/example 中的 app 文件夹。如果有人能解释我如何做到这一点或给我一个链接到它得到解释的地方，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:56:37.320

在 Stackoverflow 上快速搜索会发现两个问题，并提供有用的答案：

[如何在android中制作文件的副本？](https://stackoverflow.com/questions/9292954/how-to-make-a-copy-of-a-file-in-android)

[安卓文件拷贝](https://stackoverflow.com/questions/4615693/android-file-copy)

基本上，他们建议读取一个文件的内容并将其写入另一个文件。你可以对 monodroid 做同样的事情。

# c - 如何在 C 中将文件夹位置作为此文件夹锁定代码的输入？

> ID：14374382
> 
> 赞同：1
> 
> 时间：2013-01-17T07:49:20.650
> 
> 标签：c, windows

```
{
  char foldername[15];
  printf("Enter the foldername");
  scanf("%s", foldername);
  char command[100];
  sprintf(command, "cacls %s /e /p everyone:n",foldername);
  system(command);
  return 0;
} 
```

这是代码，我想手动输入文件夹的位置，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:02:57.230

在这里您可以增加数组大小

```
char foldername[100]; 
```

并且可以给出文件夹的完整路径。

目前您给文件夹名称为“ `stackoverflow_example`”

那么你可以给

```
/home/user/projects/stackoverflow_example 
```

它会起作用的

作为您的评论：

```
it works ! but for code to work , i need the executable file at the 
target folder directory, but i need to simply execute the code 
from anywhere in computer to any folder in computer, by manually 
giving location as input. 
```

**现在，如果您提供完整路径，您可以从计算机的任何位置执行代码。**

# java - Sencha touch create update delete 使用 jersey

> ID：14374388
> 
> 赞同：0
> 
> 时间：2013-01-17T07:49:43.897
> 
> 标签：java, jersey, sencha-touch-2, crud

我是新手`sencha touch`。我需要在整个`jersey`java 中创建、删除、更新成员记录。这是我的代码

`view.js`

```
 Ext.define('bluebutton.view.BlueButton.testing', {
    extend: 'Ext.form.Panel',
    xtype: 'testing',
       requires: [

    'bluebutton.view.BlueButton.TransactionList',
    'bluebutton.view.BlueButton.MemberPopUp',
     'bluebutton.view.BlueButton.MemberDetail',
     'bluebutton.store.BlueButton.MemberList',

    ],
    config: {
     id:'register',
        items :[

              {
                    xtype: 'textfield',
                    name: 'name',
                    label: 'Name'
                },
                {
                    xtype: 'emailfield',
                    name: 'email',
                    label: 'Email'
                },

                 {
                    xtype: 'button',
                    text: 'Send',
                    handler: function(button) {
                        var form = Ext.getCmp('register');
                          values = form.getValues();

        var myStore= new Ext.data.Store({
            model: 'bluebutton.model.BlueButton.MemberList'
        });

            var newModel = Ext.ModelMgr.create({ 'memberId': 1,
                        'name': 2,
                        'imgUrl': 3
                    }, 'bluebutton.model.BlueButton.MemberList');

            myStore.add(newModel);

            myStore.sync();

                    }
                }

        ],

   }

}); 
```

`Model.js`

```
Ext.define('bluebutton.model.BlueButton.MemberList', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'memberModel',
        fields: [
            { name: 'memberId' },
            { name: 'name' },
            { name: 'imgUrl' },
            { name: 'age' },
            { name: 'address' },
            { name: 'pointAvalaible' },
            { name: 'lastVisited' },
        ],

  proxy: {
            type: 'ajax',
            actionMethods: {
                create : 'POST',
                read   : 'POST', // by default GET
                update : 'POST',
                destroy: 'POST'
            },
            url: 'http://localhost:8080/RESTFulExample/rest/json/metallica/testingj'
        },

    }

}); 
```

`Store.js`

```
Ext.define('bluebutton.store.BlueButton.MemberList', {
    extend: 'Ext.data.Store',
   requires: [
              'bluebutton.model.BlueButton.MemberList'
    ],

    config: {
        grouper: {
            groupFn: function (record) {
                return record.get('name')[0];
            }
        },

           model :'bluebutton.model.BlueButton.MemberList',
           storeId :'memberStore',
           autoLoad:false,
           pageSize: 5,
           clearOnPageLoad: false, 

        data: [

        ]
    }
}); 
```

`Jersey.java`

```
 @POST
     @Path("/testingj")
//   @Consumes("application/x-www-form-urlencoded")
     @Consumes(MediaType.APPLICATION_JSON)
     public Response too(MultivaluedMap<String, String> form) {
     return Response.status(201).entity(form).build();
 } 
```

但我不断收到此错误

```
XMLHttpRequest cannot load localhost:8080/RESTFulExample/rest/json/metallica/testingj?_dc=1358408853016\. 
Origin localhost is not allowed by Access-Control-Allow-Origin. 
```

请指导我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:34:47.273

由于浏览器对跨源请求的安全约束，您收到此响应，这意味着您只能从 javascript 调用位于同一域中的那些 url。由于您的服务在 8080 帖子上运行，因此浏览器从其他域考虑它。

有多种方法可以进行跨域请求，您应该阅读其中的内容：

1.  jsonp
2.  在服务器上启用 CORS

但是由于移动设备的安全限制与桌面浏览器的限制不同，因此即使在浏览器中不起作用，同样的事情也可能在移动设备中起作用。有关更多详细信息，请查看：[在 Sencha Touch 2 中使用来自服务器的 rest 代理加载存储数据](https://stackoverflow.com/questions/14343414/loading-store-data-with-rest-proxy-from-server-in-sencha-touch-2?answertab=votes#tab-top)

在您的情况下，我建议您将 JsonP 支持添加到您的服务并使用 JsonP 代理而不是 AJAX 和 REST 代理。

# android - 在 android 应用程序中将 sdcard 文件夹与 dropbox api 同步

> ID：14374397
> 
> 赞同：1
> 
> 时间：2013-01-17T07:50:15.047
> 
> 标签：android, sync, dropbox, dropbox-api

对于如何使用 Dropbox api 在 Dropbox 上同步文件夹，我进行了很多研究。但我找不到任何解决方案。我可以使用 api 将文件上传到保管箱，但实际上我希望整个文件夹与保管箱同步。

如果有任何解决方案，请帮助我。

提前致谢。Preet_Android

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:08:01.337

您可能想在[此处查看新的 Dropbox Sync API](https://www.dropbox.com/developers/sync)

# sharepoint-2010 - SharePoint 年视图日历

> ID：14374398
> 
> 赞同：0
> 
> 时间：2013-01-17T07:50:15.743
> 
> 标签：sharepoint-2010, calendar, web-parts

我们可以自定义内置的日历 webpart 并在其中启用年视图吗？或者我们是否有任何方法可以在日历中创建支持年视图的 Web 部件，并能够将其链接到 SharePoint 的默认日历 Web 部件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-01-19T15:03:38.550

任何版本的 SharePoint（自 SP2013 起）中不包含现成的 Web 部件。我已经把我的解决方案放在我的博客上，这里：[http ://thesharepointhive.blogspot.co.uk/2016/01/sharepoint-calendar-view-as-year.html](http://thesharepointhive.blogspot.co.uk/2016/01/sharepoint-calendar-view-as-year.html)

它可能会也可能不会解决您的问题......但它需要 SharePoint Designer。

艾伦。

# ruby-on-rails-3.2 - Rails 博客引擎

> ID：14374399
> 
> 赞同：3
> 
> 时间：2013-01-17T07:50:18.483
> 
> 标签：ruby-on-rails-3.2

寻找一个支持文章管理的简单博客引擎。

我有独立的 rails3.2x 应用程序和身份验证系统，我必须为站点注册用户添加博客引擎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-27T04:22:57.523

刚刚发现：[https](https://github.com/jipiboily/monologue) ://github.com/jipiboily/monologue 。简单的博客引擎，几乎没有依赖项，可以轻松集成到现有的 Rails 应用程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T07:54:51.327

查看[ruby​​-toolbox](https://www.ruby-toolbox.com)，在这里您可以找到适合您目标的工具。

博客引擎在[这里](https://www.ruby-toolbox.com/categories/Blog_Engines)

# ios - UIScrollView 具有多个 GLPaint 的绘图视图作为子视图；屏幕截图

> ID：14374405
> 
> 赞同：1
> 
> 时间：2013-01-17T07:50:34.550
> 
> 标签：ios, objective-c, opengl-es, eaglview, eaglcontext

我有一个`UIScrollView`, 具有多个可绘制视图作为子视图。我正在使用 Apple 的 GLPaint 代码。我的问题是当我捕获`UIScrollView's`内容以形成一个`UIImage`时，我的绘图视图的状态没有被捕获。下面是我用于捕获的代码。

```
//this code captures the UIScrollView including the invisible part
-(UIImage*)captureImage {
    UIImage* image = nil;

    UIGraphicsBeginImageContext(_scrollView.contentSize);
    {
        CGPoint savedContentOffset = _scrollView.contentOffset;
        CGRect savedFrame = _scrollView.frame;

        _scrollView.contentOffset = CGPointZero;
        _scrollView.frame = CGRectMake(0, 0, _scrollView.contentSize.width, _scrollView.contentSize.height);

        [_scrollView.layer renderInContext: UIGraphicsGetCurrentContext()];
        image = UIGraphicsGetImageFromCurrentImageContext();

        _scrollView.contentOffset = savedContentOffset;
        _scrollView.frame = savedFrame;
    }
    UIGraphicsEndImageContext();

    return image;
} 
```

谁能帮我解决这个问题？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:42:34.367

您可以将此功能添加到您的画布类：

```
- (UIImage*)snapshot
{
    GLint backingWidth1, backingHeight1;

    // Bind the color renderbuffer used to render the OpenGL ES view
    // If your application only creates a single color renderbuffer which is already bound at this point,
    // this call is redundant, but it is needed if you're dealing with multiple renderbuffers.
    // Note, replace "_colorRenderbuffer" with the actual name of the renderbuffer object defined in your class.
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);

    // Get the size of the backing CAEAGLLayer
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth1);
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight1);

    NSInteger x = 0, y = 0, width = backingWidth1, height = backingHeight1;
    NSInteger dataLength = width * height * 4;
    GLubyte *data = (GLubyte*)malloc(dataLength * sizeof(GLubyte));

    // Read pixel data from the framebuffer
    glPixelStorei(GL_PACK_ALIGNMENT, 4);
    glReadPixels(x, y, width, height, GL_RGBA, GL_UNSIGNED_BYTE, data);

    // Create a CGImage with the pixel data
    // If your OpenGL ES content is opaque, use kCGImageAlphaNoneSkipLast to ignore the alpha channel
    // otherwise, use kCGImageAlphaPremultipliedLast
    CGDataProviderRef ref = CGDataProviderCreateWithData(NULL, data, dataLength, NULL);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGImageRef iref = CGImageCreate(width, height, 8, 32, width * 4, colorspace, kCGBitmapByteOrder32Big | kCGImageAlphaNoneSkipLast,
                                    ref, NULL, true, kCGRenderingIntentDefault);

    // OpenGL ES measures data in PIXELS
    // Create a graphics context with the target size measured in POINTS
    NSInteger widthInPoints, heightInPoints;
    if (NULL != UIGraphicsBeginImageContextWithOptions) {
        // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
        // Set the scale parameter to your OpenGL ES view's contentScaleFactor
        // so that you get a high-resolution snapshot when its value is greater than 1.0
        CGFloat scale = self.contentScaleFactor;
        widthInPoints = width / scale;
        heightInPoints = height / scale;
        UIGraphicsBeginImageContextWithOptions(CGSizeMake(widthInPoints, heightInPoints), NO, scale);
    }
    else {
        // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
        widthInPoints = width;
        heightInPoints = height;
        UIGraphicsBeginImageContext(CGSizeMake(widthInPoints, heightInPoints));
    }

    CGContextRef cgcontext = UIGraphicsGetCurrentContext();

    // UIKit coordinate system is upside down to GL/Quartz coordinate system
    // Flip the CGImage by rendering it to the flipped bitmap context
    // The size of the destination area is measured in POINTS
    CGContextSetBlendMode(cgcontext, kCGBlendModeCopy);
    CGContextDrawImage(cgcontext, CGRectMake(0.0, 0.0, widthInPoints, heightInPoints), iref);

    // Retrieve the UIImage from the current context
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    // Clean up
    free(data);
    CFRelease(ref);
    CFRelease(colorspace);
    CGImageRelease(iref);

    return image;
} 
```

并从滚动视图中调用它

# php - 服务器上包含文件的 PHP 错误

> ID：14374406
> 
> 赞同：0
> 
> 时间：2013-01-17T07:50:38.127
> 
> 标签：php, include

我最近将我的网站移到了新服务器上，但在新服务器上出现以下错误。

```
[Thu Jan 17 01:30:09 2013] [error] [client] PHP Fatal error:  require_once(): Failed opening required 'RB/stdlib.php' (include_path='.:/usr/share/php:/usr/share/pear') in /usr/share/application.php on line 90 
```

我可能没有复制 RB 目录，但我不确定它在哪里。我已经复制了梨文件夹，但仍然收到相同的错误。

知道如何解决此问题以及如何在新服务器上获取带有库的 RB 文件夹吗？

谢谢

# c++ - opencv：使用 cout 和 Mat 对象抛出异常

> ID：14374407
> 
> 赞同：1
> 
> 时间：2013-01-17T07:50:38.167
> 
> 标签：c++, opencv, visual-studio-2012

我需要打印我的 Mat 对象并且程序抛出异常......该项目非常简单：创建 Mat 对象并使用 cout 打印 - 就像在 OpenCV 教程中一样：

```
#include <core/core.hpp>
#include <highgui/highgui.hpp>

#include <iostream>

using namespace std;
using namespace cv;

int main(int argc, char *argv[])
{
    Mat O = Mat::ones(2, 2, CV_32F);
    cout << "O = " << endl << " " << O << endl << endl;

    // Point2f P(5, 1);
    // cout << "Point (2D) = " << P << endl << endl;

return 0;
} 
```

异常说：`Unhandled exception at 0x59430671 (msvcp100d.dll) in printingTest.exe: 0xC0000005: Access violation reading location 0x00000000`。控制台仅显示

```
O = [ 
```

确切地说，它在“operations.hpp”上停止：

```
static inline std::ostream& operator << (std::ostream& out, const Mat& mtx) { Formatter::get()->write(out, mtx); return out; } 
```

看起来“out”是空的，但有人知道为什么吗？教程说它应该工作......

我之前遇到过类似的抛出异常的问题，我在这里解决了：

[http://answers.opencv.org/question/5113/problem-with-reading-image-to-mat/](http://answers.opencv.org/question/5113/problem-with-reading-image-to-mat/)

是否可能存在另一个环境变量冲突？或者可能是碰撞，因为我使用的是 VS2012 并且 OpenCV 仅适用于 v10？

带有注释的 Point2f 的东西正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:02:12.240

您的代码在 VS2010 中运行良好。确保您正在链接正确的库（发布与调试）。如果这无济于事，请尝试重新安装 openCV 或在 VS2012 上构建您自己的版本，使用 cmake 从源代码进行准备。

# functional-programming - SML 和函数式编码风格

> ID：14374408
> 
> 赞同：6
> 
> 时间：2013-01-17T07:50:38.717
> 
> 标签：functional-programming, sml

我开始学习标准 ML 和[编程语言](https://www.coursera.org/course/proglang)课程。

在第一个作业中，我尝试编写一个函数，该函数`is_older`接受两个日期并计算为`true`or `false`。它评估`true`第一个参数是否是第二个参数之前的日期（如果两个日期相同，则结果为`false`.）。

所以我写了以下代码：

```
fun is_older(first: int * int * int, second: int * int * int) =
  if(#1 first = #1 second andalso #2 first = #2 second andalso #3 first = #3 second) then false
  else if (#1 first < #1 second) then true
  else if (#1 first = #1 second andalso #2 first < #2 second) then true
  else if (#1 first = #1 second andalso #2 first = #2 second andalso #3 first < #3 second) then true
  else false 
```

代码工作正常，但看起来很难看。

如何以功能样式重写此代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T09:01:08.060

两个建议：

*   使用模式匹配来分解元组。
*   当构造返回布尔值时，使用布尔运算符（`andalso`、`orelse`等） 。`if/else`

更易读的版本：

```
(* Compare two dates in the form of (year, month, day) *)
fun is_older((y1, m1, d1), (y2, m2, d2)) =
  y1 < y2 orelse (y1 = y2 andalso m1 < m2) 
  orelse (y1 = y2 andalso m1 = m2 andalso d1 < d2) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T17:48:46.967

一般来说，当你在表格上有东西时

```
if b then
  true
else
  false 
```

你应该用 just 交换它`b`，因为它看起来是一样的。pad 提供的解决方案可能也是我的解决方案，因为它又好又短。

然而，当你最终得到那些讨厌的/嵌套的 if-then-else，并且你没有返回简单的东西（例如，true/false 或数字）时，那么你应该考虑使用 case。您的函数不是使用的主要候选者，但是我希望下面仍然显示这个想法（您可以轻松地构建那些嵌套 if 的结构）

```
fun is_older((y1, m1, d1), (y2, m2, d2)) =
    case (Int.compare(y1,y2), Int.compare(m1,m2), Int.compare(d1, d2)) of
      (LESS , _    , _   ) => true
    | (EQUAL, LESS , _   ) => true
    | (EQUAL, EQUAL, LESS) => true
    | _ => false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:06:47.490

```
fun is_older((yr1 : int , mo1 : int , dt1 : int), (yr2 : int , mo2 : int , dt2 : int )) =
  yr1 < yr2 orelse (yr1 = yr2 andalso mo1 < mo2) 
  orelse (yr1 = yr2 andalso mo1 = mo2 andalso dt1 < dt2) 
```

# ubuntu-12.04 - 在使用不同视频运行 mlt 命令时出现比特率问题？

> ID：14374409
> 
> 赞同：3
> 
> 时间：2013-01-17T07:50:43.630
> 
> 标签：ubuntu-12.04, video-editing

我正在运行 melt 命令来编辑一些视频剪辑和音频剪辑。我在这里给出了我用来获取编辑视频的命令，但遇到比特率问题以及执行此命令需要太多时间。我有最新版本的 MLT(0.8.0) 并安装在 UBUNTU 中。命令如下：

```
 melt  avformat:http://54.241.13.15/cdn/images/1/1576/17s_331.flv  out=425.4 -move in=0  out=425.4  out=425.4  -track  avformat:http://54.241.13.15/cdn/image/1/1584 /180_834.flv  out=336.9 -move in=0  out=336.9  out=336.9 -filter chroma key=#00ff00 variance=0.38 -transition composite geometry="42%,24%,50%,50%" halign=left valign=top  a_track=0 b_track=1  -track  -blank 61.2  a_track=0 b_track=2  avformat:http://54.241.13.15/cdn/images/1/1583/17z_786.flv  out=398.1 -move in=0  out=336.9  out=398.1 -filter chroma key=#00FF00 variance=0.38 -transition composite geometry="14%,10%,38%,43%" halign=left valign=top  a_track=0 b_track=2  -track  avformat:http://54.241.13.15/cdn/images/1/1532/16k_177.mp3  out=756.9 -move in=0  out=756.9  out=756.9  composite.progressive=1 producer.align=center  -consumer avformat:/var/www/enclood/app/web/files/test-temp1.webm s=320x240 fullscreen=1 rescale=bilinear frequency=22050 b=512k ab=128k  -profile square_ntsc vcodec=libtheora b=1000k ab=512k f=ogg | oggfwd 127.0.0.1 8000 manu123 /live.ogg 
```

输出花费太多时间并出现以下问题：

```
    [flv @ 0xb9643940] 从比特率估计持续时间，这可能不准确
    [flv @ 0xb9643940] 从比特率估计持续时间，这可能不准确
    [mp3 @ 0xb0998cc0] 达到 max_analyze_duration

```

如何解决这个问题？

请回复我。提前致谢！

# python - 如何在 pygraphviz 中制作无向图？

> ID：14374412
> 
> 赞同：5
> 
> 时间：2013-01-17T07:50:49.580
> 
> 标签：python, graphviz, pygraphviz

我正在尝试在 pygraphviz 中生成无向图，但没有成功。似乎无论我做什么，图表总是有方向的。

```
Example #1
G = pgv.AGraph(directed=False)
G.is_directed()  # true

Example #2
G = pgv.AGraph()
G.to_undirected().is_directed()  # True

Example #3
G = pgv.AGraph(directed=False)
G.graph_attr.update(directed=False)
G.is_directed()  # true 
```

我不知道为什么如此微不足道的事情无法正常工作。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-29T02:04:07.387

我在 pygraphviz 1.2 上遇到了同样的问题，但我有一个解决方法。

[如果您使用DOT 语言](http://en.wikipedia.org/wiki/DOT_language)（例如`graph foo {}`）将所需的图类型指定为空图，并将其传递`AGraph`给环境）。

```
>>> import pygraphviz as pgv
>>> foo = pgv.AGraph('graph foo {}')
>>> foo.is_directed()
False
>>> foo.add_edge('A', 'B')
>>> print foo
graph foo {
        A -- B;
} 
```

该解决方法也适用于该`strict`论点，这在我的环境中也被忽略了。

使用以下函数而不是`pgv.AGraph`具有相同的 API：

```
def AGraph(directed=False, strict=True, name='', **args):
    """Fixed AGraph constructor."""

    graph = '{0} {1} {2} {{}}'.format(
        'strict' if strict else '',
        'digraph' if directed else 'graph',
        name
    )

    return pgv.AGraph(graph, **args) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-09T16:46:58.727

对于 Python 3.6.8 和 graphviz==0.11.1

简单`Graph()`对我有用。

```
from graphviz import *
dot = Graph()
dot.node('1', 'King Arthur')
dot.node('2', 'Sir Bedevere the Wise')
dot.node('3', 'Sir Lancelot the Brave')

dot.edges(['12', '13', '23'])

dot.render(view=True) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T07:58:31.937

解决方案1：

尝试像这样链接节点：a -- b

而不是这样：

a -> b

解决方案2：边缘[dir=none]

不确定这些是否对您有帮助，因为我已经有一段时间没有使用 graphviz 并且忘记了它的语法。也检查一下，应该很容易理解：[http ://en.wikipedia.org/wiki/DOT_language](http://en.wikipedia.org/wiki/DOT_language)

# security - 阻止特定 IP 地址访问您网站的某些部分

> ID：14374421
> 
> 赞同：1
> 
> 时间：2013-01-17T07:51:51.127
> 
> 标签：security, .htaccess, crm, blocking

我在与 Apache 网络服务器捆绑的 Cent OS 6.3 上托管我的网站。

我的网站和 CRM 托管在同一台服务器上。如何阻止所有其他 IP 并限制对特定 IP 的访问。

例如： [https](https://www.website.com) ://www.website.com是我的网站，我希望除此之外的所有人都可以使用它

[https://www.website.com/crm](https://www.website.com/crm)应限制为所有人，并且应仅在特定 IP 上允许

请帮我找到解决方案，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:18:03.053

这取决于您的网络主机是否允许在`.htaccess`. `.htaccess`尝试在与站点上的 `/crm' 资源对应的目录中创建以下文件（如果该文件已经存在，只需将这些指令添加到其中）：

```
 Order Deny,Allow
    Deny from all 
    Allow from <allowed-ip-1>
    Allow from <allowed-ip-2>
    .... 
```

有关详细的语法和规则，请参见[http://httpd.apache.org/docs/2.2/howto/access.html 。](http://httpd.apache.org/docs/2.2/howto/access.html)`Allow``Deny`

这可能会或可能不会起作用，具体取决于您的托管服务政策。并非所有人都允许这样做。如果这不起作用并且您的托管证明者不合作，那么问题就会复杂得多 - 在这种情况下，您需要应用程序管理`/crm`资源来处理访问限制。

# c# - 使用 SURF 匹配 OpenCV\EmguCV 中的图像

> ID：14374423
> 
> 赞同：0
> 
> 时间：2013-01-17T07:51:54.030
> 
> 标签：c#, image-processing, opencv, emgucv, surf

我正在研究[这里](http://www.emgu.com/wiki/index.php/SURF_feature_detector_in_CSharp)的源代码。

似乎`indices`变量存储了匹配信息，但我不知道信息是如何存储的。

例如，你能告诉我找到了多少匹配的点吗？哪个点匹配哪个点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-05T13:31:44.687

看看这条线。

```
Image<Bgr, Byte> result = Features2DToolbox.DrawMatches(modelImage, modelKeyPoints, observedImage, observedKeyPoints,
        indices, new Bgr(255, 255, 255), new Bgr(255, 255, 255), mask, Features2DToolbox.KeypointDrawType.DEFAULT); 
```

最重要的变量是**mask**。这个变量有所有需要的信息。它是数组。如果这个数组上的值等于 1，这意味着我们有一个共同的对。您必须计算在此数组中出现 1 的次数。

```
 public int CountHowManyPairsExist( Matrix<byte> mask)
    {
        var matched = mask.ManagedArray;
        var list = matched.OfType<byte>().ToList();
        var count = list.Count(a => a.Equals(1));
        return count;
    } 
```

# android - 如何在视图之间制作像小线一样的边框？

> ID：14374425
> 
> 赞同：2
> 
> 时间：2013-01-17T07:52:03.657
> 
> 标签：android

我想在这样的android布局中制作边框，我该怎么做？

![在此处输入图像描述](../Images/311f188b18317b9b9692e701df26174b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:09:33.427

如果您想要自定义分隔符，请在 drawable 中制作 separator.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <gradient
        android:angle="90"
        android:centerColor="#ffffffff"
        android:endColor="#00ffffff"
        android:startColor="#00ffffff" />

</shape> 
```

然后用这个参考这个分隔符形状

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="2dip"
    android:layout_height="fill_parent"
    android:layout_marginLeft="4dip"
    android:layout_marginRight="4dip"
    android:src="@drawable/seperator" /> 
```

结果：

![在此处输入图像描述](../Images/9896835bc80275ded1562c57f76827a2.png)

![在此处输入图像描述](../Images/7833b9bb034e3b506f0f5e09c5d0c6d7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:07:38.100

像上面的输出图像一样显示

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#eeeeee"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="E"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"
        android:background="@android:color/white"
        android:layout_marginRight="5dp" />
        <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="F"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"
        android:background="@android:color/white"
        android:layout_marginRight="5dp" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:10:52.323

要在 android 中创建边框，我们必须在形状中使用 stroke 标记（xml drawable）

这是我最后测试过的代码：

stroke_background.xml

```
 <stroke android:width="1dp"
        android:color="@android:color/darker_gray"/>
    <solid android:color="#ffffff"/>

</shape> 
```

您需要的布局

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dp" 
    android:weightSum="1">

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:layout_weight=".5" 
        android:background="@drawable/stroke_background">

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="E" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:orientation="vertical"

        android:background="@drawable/stroke_background"
        android:layout_weight=".5"
         >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="F" />

    </LinearLayout>

</LinearLayout> 
```

结果看起来像这样.. ![在此处输入图像描述](../Images/1046a08b9f66b6fe4656497e7cdfb13d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T07:57:29.137

`Views`我认为你可以通过使用你想要的颜色来实现这一点

喜欢

```
<View
android:layout_height="wrap_content"
android:layout_width="1dip"
android:background="#f3f3f3"
/> 
```

# c - GLIBC 依赖

> ID：14374427
> 
> 赞同：0
> 
> 时间：2013-01-17T07:52:13.000
> 
> 标签：c, linux, shared-libraries

我有一个需要一些 *.so 文件来执行的二进制文件。现在，当我尝试在一些旧机器上执行它时，它显示

```
/lib/libc.so.6: version `GLIBC_2.4' not found 
```

如何将其搜索路径更改为`/lib/i386-linux-gnu/libc.so.6`from`/lib/libc.so.6`

所以我可以在同一台机器上运行两个不同的 libc 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:11:21.080

您是否在 32 位系统上，并且可能正在尝试执行使用 64 位 glibc 的二进制文件？

可以通过使用 LD_LIBRARY_PATH 变量来修改库搜索路径，例如在子shell中：

> （导出 LD_LIBRARY_PATH=/lib/i386-linux-gnu:${LD_LIBRARY_PATH}; my_program）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:21:14.203

`LD_LIBRARY_PATH`您可以在调用二进制文件时使用环境变量更改搜索路径。

类似于以下内容：

```
LD_LIBRARY_PATH=/lib/i386-linux-gnu/libc.so.6 ./your_binary 
```

应该管用。请记住，根据您使用的 shell，您可能需要调用`export`或`env`设置变量。

您可以使用以下命令检查它是否正常工作：

```
LD_LIBRARY_PATH=/lib/i386-linux-gnu/libc.so.6libc.so.6 ldd ./your_binary
        linux-vdso.so.1 =>  (0x00007fff140e9000)
        libselinux.so.1 => /lib/libselinux.so.1 (0x008f9000)
        librt.so.1 => /lib/librt.so.1 (0x006f1000)
        libacl.so.1 => /lib/libacl.so.1 (0x004e8000)
        libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0x00129000)
        libdl.so.2 => /lib/libdl.so.2 (0x00f25000)
        /lib/ld-linux.so.2 (0x003b3b000)
        libpthread.so.0 => /lib/libpthread.so.0 (0x00d07000)
        libattr.so.1 => /lib/libattr.so.1 (0x00b02000) 
```

您只需要检查是否`libc.so.6`正在解析为您想要的共享对象。

更新：您似乎想为 64 位二进制文​​件加载 32 位共享对象。据我所知，没有办法做到这一点，因为目标架构不同，加载程序将拒绝加载 32 位。如果这是您的情况，这可能解释了加载程序加载默认值的原因`libc`。根据您的情况，可能会将二进制文件编译为 32 位，在这种情况下，它应该以 32 位运行`libc`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T02:37:38.290

如果要在 64 位机器上运行 32 位可执行文件，则需要安装 32 位版本。在 Fedora 或其他带有 yum 的系统上运行：

百胜安装 glibc.i686

（注意 .i686 后缀，它专门询问 32 位版本）然后再试一次。ldd(1) 命令应该有助于识别所需的库，并且 yum 应该足够聪明，可以通过它给出的名称找到它们。

# svn - 将jar文件部署到远程仓库时出现maven错误

> ID：14374429
> 
> 赞同：2
> 
> 时间：2013-01-17T07:52:18.450
> 
> 标签：svn, maven, maven-deploy-plugin

我正在使用 Maven 2.2.1。我发出以下命令将本地 jar 添加到远程仓库 -

> `mvn deploy:deploy-file -Dfile=/tmp/newUtil-2.1.0.0.jar -DgroupId=com.tareque.utils -DartifactId=newUtil -Dversion=2.1.0.0 -Dpackaging=jar -DrepositoryId=myrepo -Durl=svn:https://<my-repo-url>`

`repositoryId`与*settings.xml*文件`id`中`mirror`标记中的匹配。上面的命令给出了以下错误。

 *> [信息] 部署工件时出错：不支持的协议：'svn'：找不到支持请求的协议的货车：svn
> 
> 在组件存储库中找不到组件描述符：org.apache.maven.wagon.Wagonsvn。

我的 中不存在此依赖项`pom.xml`，并且我的项目已成功构建。仅在将从本地其他项目创建的 jar 之一部署到远程存储库时，我才收到上述错误。

我该如何解决？

### 编辑

`svn`从 url 中删除，在[此处遵循密码加密 stpes](http://maven.apache.org/guides/mini/guide-encryption.html)。现在我收到此错误

> [信息] --------------------------------------------- -------------------------
> [INFO] 部署工件时出错：无法传输文件：http://my-repo-url-with-complete -jar 的路径。返回码是：409

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:47:47.803

[按照记录](http://maven.apache.org/plugins/maven-deploy-plugin/usage.html)删除`svn:`并添加用户/密码。HTTP 401 意味着您需要对服务器进行身份验证。*

# https - Windows Store App 使用自签名 SSL 证书连接到 HTTPS

> ID：14374430
> 
> 赞同：5
> 
> 时间：2013-01-17T07:52:34.373
> 
> 标签：https, windows-store-apps

我有一个 Windows Store 应用程序（Metro 应用程序），我想连接一个通过 HTTPS 构建的 Web 服务。我正在为我的网络服务使用自签名证书。但是当我尝试通过 System.Net.HttpClient.PostAsync 从我的应用程序连接它时，我得到一个异常说

“底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。”

内部异常说“根据验证程序，远程证书无效。”

我知道这是因为我使用的是自签名证书。我记得我可以在 .NET 中使用`System.Net.ServicePointManager.ServerCertificateValidationCallback`，这样如果指纹是我的，我的应用程序就可以通过验证。

但我在 Windows Store 运行时找不到相关的类/方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T23:09:35.947

首先，您最好使用 Windows.Web.HttpClient。在该 API 上，您可以使用`httpClient.HttpBaseProtocolFilter.IgnorableServerCertificateErrors`设置您愿意接受的证书错误。例如，您可以选择忽略 Untrusted 错误，但您应该在实际发送任何数据之前手动检查指纹。

# php - ajax搜索更新后的jquery更新

> ID：14374434
> 
> 赞同：0
> 
> 时间：2013-01-17T07:52:52.477
> 
> 标签：php, javascript, jquery

我有一个用于确认删除的脚本...

```
$('document').ready(function(){
     $('.ask').jConfirmAction();
}); 
```

产品列表如下

```
<?php if(isset($query)){ ?>        
<input disabled type="hidden" id="recNum" value="<?php echo $rec ?>"/>
<table id="rounded-corner" summary="2007 Major IT Companies' Profit" width="100%">
    <thead>
        <tr>
            <th scope="col" class="rounded-company"></th>
            <th scope="col" class="rounded">Product ID</th>
            <th scope="col" class="rounded">Product Name</th>
            <th scope="col" class="rounded">Product slug</th>
            <th scope="col" class="rounded">Type</th>
            <th scope="col" class="rounded">Product Category</th>
            <th scope="col" class="rounded">Edit</th>
            <th scope="col" class="rounded-q4">Delete</th>
        </tr>
    </thead>
        <tfoot>
        <tr>
            <td colspan="7" class="rounded-foot-left"><em>All The Pages That Being Included</em></td>
            <td class="rounded-foot-right">&nbsp;</td>

        </tr>
    </tfoot>
    <tbody>
         <?php
     foreach($query as $key => $row) {
    ?> 
        <tr>
            <td><input type="checkbox" name="" /></td>
            <td><?php echo $row['product_id'];?></td>
            <td><?php echo $row['product_name'];?></td>
            <td><?php echo $row['product_slug'];?></td>
            <td><?php echo $row['type'];?></td>
            <td><img src="<?php echo base_url().$row['product_image'];?>" width="80px" height="80px"/></td>
            <td><a href="<?php echo base_url();?>admin.php/products/edit_product/<?php echo $row['product_id'];?>"><img src="<?php echo base_url();?>assets/admin_assets/images/user_edit.png" alt="" title="" border="0" /></a></td>
            <td><a href="<?php echo base_url();?>admin.php/products/delete_product/<?php echo $row['product_id'];?>" class="ask"><img src="<?php echo base_url();?>assets/admin_assets/images/trash.png" alt="" title="" border="0" /></a></td>
        </tr>
        <?php
        }?>

    </tbody>
</table>

     <a href="<?php echo base_url();?>admin.php/products/add_product" class="bt_green"><span class="bt_green_lft"></span><strong>Add new item</strong><span class="bt_green_r"></span></a>
     <a href="<?php echo base_url();?>admin.php/products/view_product" class="bt_blue"><span class="bt_blue_lft"></span><strong>View all items from category</strong><span class="bt_blue_r"></span></a>
     <a href="#" class="bt_red"><span class="bt_red_lft"></span><strong>Delete items</strong><span class="bt_red_r"></span></a> 
```

继承人 jQuery 确认的 jquery：

```
/*
 * jQuery Plugin : jConfirmAction
 * 
 * by Hidayat Sagita
 * http://www.webstuffshare.com
 * Licensed Under GPL version 2 license.
 *
 */
(function($){

    jQuery.fn.jConfirmAction = function (options) {
        // Some jConfirmAction options (limited to customize language) :
        // question : a text for your question.
        // yesAnswer : a text for Yes answer.
        // cancelAnswer : a text for Cancel/No answer.
        var theOptions = jQuery.extend ({
            question: "Are You Sure ?",
            yesAnswer: "Yes",
            cancelAnswer: "Cancel"
        }, options);

        return this.each (function () {

            $(this).bind('click', function(e) {

                e.preventDefault();
                thisHref    = $(this).attr('href');

                if($(this).next('.question').length <= 0)
                    $(this).after('<div class="question">'+theOptions.question+'<br/> <span class="yes">'+theOptions.yesAnswer+'</span><span class="cancel">'+theOptions.cancelAnswer+'</span></div>');

                $(this).next('.question').animate({opacity: 1}, 300);

                $('.yes').bind('click', function(){
                    window.location = thisHref;
                });

                $('.cancel').bind('click', function(){
                    $(this).parents('.question').fadeOut(300, function() {
                        $(this).remove();
                    });
                });

            });

        });
    }

})(jQuery); 
```

一切都运作良好，

然后我为列表进行了 ana jax 分页；

现在的问题是，在完成此任务后，jquery 确认不起作用，我希望将 jquery 脚本转换为像这样的简单 jquery 函数

```
function ask()
{

} 
```

编辑：

我已经写了函数

```
function ask(obj)
{
alert('hii');
                    //var theOptions = jQuery.extend ({
            var question= "Are You Sure ?";
            var yesAnswer= "Yes";
            var cancelAnswer= "Cancel";
            //e.preventDefault();

                    var thisHref = $(obj).attr('href');
            alert(thisHref) ;
                if($(obj).next('.question').length <= 0)
                    $(obj).after('<div class="question">'+question+'<br/> <span class="yes">'+yesAnswer+'</span><span class="cancel">'+cancelAnswer+'</span></div>');

                $(obj).next('.question').animate({opacity: 1}, 300);

                $('.yes').bind('click', function(){
                    window.location = thisHref;
                });

                $('.cancel').bind('click', function(){
                    $(obj).parents('.question').fadeOut(300, function() {
                        $(obj).remove();
                    });
                });

} 
```

我打电话给这个

```
<a href="<?php echo base_url();?>admin.php/products/delete_product/<?php echo $row['product_id'];?>" class="ask" onclick="ask(this);"><img src="<?php echo base_url();?>assets/admin_assets/images/trash.png" alt="" title="" border="0" /></a> 
```

它也生效；但就在动画效果之后，它被重定向到链接，我需要让它保持不变，以便用户可以选择选项。但我不能...

```
MORE EDIT: 
```

好的，我得到了答案；我用小代码返回false，它解决了我的问题

但是还有另一个问题

这行代码不起作用

```
$('.cancel').bind('click', function(){
                        $(obj).parents('.question').fadeOut(300, function() {
                            $(obj).remove();
                        });
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:00:10.997

`$('.ask').jConfirmAction();`进入新页面后，您需要再次绑定到所有链接。

# javascript - 使用动画滚动到中心

> ID：14374435
> 
> 赞同：1
> 
> 时间：2013-01-17T07:53:08.053
> 
> 标签：javascript, jquery, scroll

我正在使用此代码滚动到我网站的水平中心。

```
function scrollCenter() {
    scrollTo(($(document).width() - $(window).width()) / 2, 0);
} 
```

我怎样才能获得动画滚动效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:10:07.850

要设置动画的属性是`scrollLeft`。

```
$( 'html, body' ).animate({
    scrollLeft: ($(document).width() - $(window).width()) / 2
}, 'slow' ); 
```

演示：http: [//jsfiddle.net/2SGBS/](http://jsfiddle.net/2SGBS/)

# c# - 从asp.net中的弹出窗口刷新基本窗口

> ID：14374436
> 
> 赞同：1
> 
> 时间：2013-01-17T07:53:32.013
> 
> 标签：c#, asp.net

我正在使用以下方法从页面*A打开一个弹出窗口**B*：

 *```
this.Page.ClientScript.RegisterStartupScript(  
      this.GetType(), 
      "JavaScript", 
     "myWindow=window.open('B.aspx',
     'WindowName',
     'copyhistory=no, 
     width=800, 
     height=300, 
     top=150, 
     left=50, 
     resizable=1, 
     scrollbars=1');
     myWindow.focus();", 
     true
); 
```

*每当弹出窗口B*发生变化时，我都想刷新页面*A*。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:03:29.900

有很多方法可以做到：

```
<script>
    window.onunload = refreshParent;
    function refreshParent() {
        window.opener.location.reload();
    }
</script>

<script language="JavaScript">
<!--
function refreshParent() {
  window.opener.location.href = window.opener.location.href;

  if (window.opener.progressWindow)

 {
    window.opener.progressWindow.close()
  }
  window.close();
}
//-->
</script> 
```

资料来源：

[打开弹出窗口并在关闭弹出窗口时刷新父页面](https://stackoverflow.com/questions/10792408/open-popup-and-refresh-parent-page-on-close-popup)

[http://forums.devarticles.com/javascript-development-22/auto-refresh-parent-window-after-closing-popup-4864.html](http://forums.devarticles.com/javascript-development-22/auto-refresh-parent-window-after-closing-popup-4864.html)

[弹出窗口关闭时刷新父窗口](https://stackoverflow.com/questions/4267830/refresh-parent-window-when-the-pop-up-window-is-closed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:59:46.947

调用`refreshParent`用户操作为：

```
function refreshParent() {
     window.opener.location.href = window.opener.location.href;
} 
```**

# c - 为什么 zlib 努力只计算正指针差异？

> ID：14374437
> 
> 赞同：12
> 
> 时间：2013-01-17T07:53:42.147
> 
> 标签：c, zlib

在 zlib 1.2.7，文件 inffast.c，第 320 行，有一句我不明白的语句：

```
strm->avail_out = (unsigned)(out < end ?
                             257 + (end - out) : 257 - (out - end)); 
```

变量`end`和`out`是指向输出缓冲区的两个指针。该语句努力计算`end - out`when`end > out`和`out - end`when `out >= end`，但我不明白它为什么要这样做。在我看来，最终结果是一样的，也就是说，这行还不如写成：

```
strm->avail_out = 257 + (end - out); 
```

两个指针的差值具有带符号整数类型`ptrdiff_t`(C99 6.5.6:9)，并且`257`具有`int`. 添加发生在这两者之间的更高级别的类型中，我看不出三元运算符可能会防范什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T08:40:03.933

您的观察对于 C99 和 C89/C90 都是正确的。

那行代码是十年前写的。在这一点上，我的记忆只允许我以偏执狂为借口。显然我担心在某些编译器中减去两个指针的结果可能是无符号的。我不记得这种担忧的起源，或者它是否有任何根据。

至于[变更历史](https://github.com/madler/zlib/)，正如你今天看到的那样，那行代码是从宙斯的眉毛中诞生的。自从写出来之后就没有变过。

# javascript - 在 JS 中获取时差不准确

> ID：14374438
> 
> 赞同：0
> 
> 时间：2013-01-17T07:53:56.177
> 
> 标签：javascript, html, date

我有一个函数`JavaScript`来获得两次之间的差异：

```
function get_time_difference(laterDate) {
    var earlierDate = new Date();//Now
    var nTotalDiff = laterDate.getTime() - earlierDate.getTime();
    var oDiff = new Object();

    oDiff.days = Math.floor(nTotalDiff / 1000 / 60 / 60 / 24);
    nTotalDiff -= oDiff.days * 1000 * 60 * 60 * 24;

    oDiff.hours = Math.floor(nTotalDiff / 1000 / 60 / 60);
    nTotalDiff -= oDiff.hours * 1000 * 60 * 60;

    oDiff.minutes = Math.floor(nTotalDiff / 1000 / 60);
    nTotalDiff -= oDiff.minutes * 1000 * 60;

    oDiff.seconds = Math.floor(nTotalDiff / 1000);

    if (0 == oDiff.minutes && 0 == oDiff.hours) {
        //Do Something
    }
    return oDiff.minutes;
} 
```

当时间相等时，我需要运行一个特定的功能，

我的问题是有时他会返回 59 分钟，而应该返回 0 ..

为什么会这样？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:49:26.893

我这样修复它：

```
function get_time_difference(laterDate) {

var earlierDate = new Date(); //Now
var oDiff = new Object();

oDiff.days = laterDate.getDate() - earlierDate.getDate();
oDiff.hours = laterDate.getHours() - earlierDate.getHours();
oDiff.minutes = laterDate.getMinutes() - earlierDate.getMinutes();
oDiff.seconds = laterDate.getSeconds() - earlierDate.getSeconds();

if (0 == oDiff.minutes && 0 == oDiff.hours) {
//Do Something
}
   return oDiff.minutes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:56:35.463

做了

```
function get_time_difference(laterDate) {

var earlierDate = new Date();//Now
var nTotalDiff = laterDate.getTime() - earlierDate.getTime();
var oDiff = new Object();

oDiff.days = Math.floor(nTotalDiff / (1000 * 60 * 60 * 24 ));
nTotalDiff -= oDiff.days * 1000 * 60 * 60 * 24;

oDiff.hours = Math.floor(nTotalDiff / (1000 * 60 * 60 ));
nTotalDiff -= oDiff.hours * 1000 * 60 * 60;

oDiff.minutes = Math.floor(nTotalDiff / (1000 * 60 ));
nTotalDiff -= oDiff.minutes * 1000 * 60;

oDiff.seconds = Math.floor(nTotalDiff / 1000);

if (0 == oDiff.minutes && 0 == oDiff.hours) {
//Do Something
}
return oDiff.minutes;

} 
```

您只需要确保首先评估您要划分的内容

# android - 将其他图钉移到叠加层下方

> ID：14374439
> 
> 赞同：1
> 
> 时间：2013-01-17T07:53:57.297
> 
> 标签：android, android-mapview, android-overlay

![在此处输入图像描述](../Images/fff2d5af81646d22998705a4a7dc0e41.png)

我想在我的叠加层下方移动其他图钉。目前，其他图钉显示在叠加层上方，看起来不太好。我还设置了叠加层的背景，但这对我不起作用。

# javascript - 当 AngularJS 中的模型更新时，视图不会更新

> ID：14374440
> 
> 赞同：7
> 
> 时间：2013-01-17T07:54:02.463
> 
> 标签：javascript, html, model-view-controller, angularjs

我已经阅读了有关此问题的线程，例如：[视图未在 AngularJS 中更新，](https://stackoverflow.com/questions/10179488/the-view-is-not-updated-in-angularjs)但我仍然不明白如何在我的简单示例中应用它。

我有这个功能：

```
function MyPageView($scope) {
  var myModel = new MyModel();
  $scope.myModel = myModel;
} 
```

当`myModel`在代码的其他地方更新时（当用户点击、交互、发送 XHR 请求时）它不会更新我的视图。我知道我需要用 $apply 做一些事情，但我不明白在哪里以及如何做。

**有人可以向我解释如何为这个简单的用例解决这个问题吗？**

我的模型看起来像这样（如果问题需要这样做的话） - 它里面没有 AngularJS 代码：

```
var MyModel = function() {
  var _this = this;
  ...
  _this.load = function(){...};
  _this.updateModel = function(){...};
  ...
  return _this;
} 
```

**添加一个 JSfiddle 示例：http:** [//jsfiddle.net/DAk8r/2/](http://jsfiddle.net/DAk8r/2/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T08:08:27.083

更新模型后，在控制器中尝试 $scope.$apply()

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T08:45:51.123

您的问题的症结在于您试图将 AngularJS 与非常传统的“jQuery-soup 风格”JavaScript 模式混合使用。在 Angular 中，您应该始终使用指令来进行 DOM 操作和交互（包括点击）。在这种情况下，您的代码应类似于以下内容：

```
<div ng-controller="myModelCtrl">
  <div>Number is {{myModel.number}}</div>
  <a ng-click="myModel.updateNumber()">Update Number</a>
</div> 
```

```
function myModelCtrl($scope) {
   var myModel = new MyModel();
   $scope.myModel = myModel;
}

function MyModel() {
  var _this = this;

  _this.number = 0;

  _this.updateNumber = function() {
     _this.number += 1;
    alert('new number should display ' + _this.number);
  }

  return _this;
} 
```

请注意，我们不是使用 jQuery 设置手动`click`处理程序，而是使用 Angular 的内置`ng-click`指令。这允许我们绑定到 Angular 范围生命周期，并在用户单击链接时正确更新视图。

[这是来自AngularJS 常见问题](http://docs.angularjs.org/misc/faq)的引用；我已经加粗了一个可以帮助你改掉这个习惯的部分。

> ## 常见的陷阱
> 
> Angular 支持频道（Freenode 上的#angularjs）发现了许多 Angular 新用户经常陷入的陷阱。本文档旨在在您发现它们之前指出它们。
> 
> ### DOM 操作
> 
> 停止尝试使用 jQuery 修改控制器中的 DOM。真的。这包括添加元素、删除元素、检索它们的内容、显示和隐藏它们。使用内置指令，或在必要时编写自己的指令来进行 DOM 操作。有关复制功能，请参见下文。
> 
> **如果您正在努力改掉这个习惯，请考虑从您的应用程序中删除 jQuery。真的。Angular 具有 $http 服务和强大的指令，几乎总是不需要它。**Angular 捆绑的 jQLite 具有一些最常用于编写 Angular 指令的特性，尤其是绑定到事件。

最后，这里是你的例子，使用这种技术：http: [//jsfiddle.net/BinaryMuse/xFULR/1/](http://jsfiddle.net/BinaryMuse/xFULR/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:29:59.697

[http://jsfiddle.net/zCC2c/](http://jsfiddle.net/zCC2c/)

你的问题是双重的。

1）你的jsfiddle中有一个语法错误，因为DOMElements（例如你的clickhandler中的$（this）返回的a没有阻止默认值。你实际上需要传递一个事件。（轻微的语法问题）。

2）通过将您的变量定义放在控制器范围内，如下所示：

```
 function MyCtrl($scope){
     $scope.foo = foo;
 } 
```

您确保它在每个类实例化时运行一次。

你想要的是：

```
 function MyCtrl($scope){
      $scope.someAngularClickHandler=function(){
         $scope.foo = foo;
      }
 } 
```

然后在你的链接上

```
 <a href="foo" id="bar" ng-click="someAngularClickHandler()"> 
```

有关更详尽的代码示例，请参阅链接的 jsfiddle。

可以在此处的第一次演讲中找到对该理论的一个很好的概述：

[http://www.youtube.com/watch?feature=player_embedded&v=VxuN6WO3tIA](http://www.youtube.com/watch?feature=player_embedded&v=VxuN6WO3tIA)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:30:37.637

在 Angular 应用程序中，模型~~通常~~有时在 $scope 上实现，而不是作为单独的 JavaScript 对象。这是您的应用程序的重写，展示了如何做到这一点

```
function myModelCtrl($scope) {
  $scope.number = 0;
  $scope.updateNumber = function () {
    $scope.number += 1;
    alert('new number should display ' + $scope.number);
  }
} 
```

HTML：

```
<div ng-controller="myModelCtrl">
  <div>Number is {{number}}</div> 
  <a ng-click="updateNumber()">Update Number</a>
</div> 
```

这是一个[fiddle](http://jsfiddle.net/mrajcok/kdE6q/)，没有 jQuery，它显示了为 Angular 设置 fiddle 的“正常方式”。

# iphone - UIButton 在第一次点击时不起作用

> ID：14374442
> 
> 赞同：0
> 
> 时间：2013-01-17T07:54:27.267
> 
> 标签：iphone, ios, objective-c, xcode

我在我的游戏《光学战斗》中制作了一个自定义开关来打开和关闭音效，但由于某种原因，当点击时将动画开关移动到不同位置的按钮在第一次点击时不起作用。随后的水龙头工作，只是不是第一个。

在按钮的 IBAction 中，我有：

```
- (IBAction)theSwitch:(id)sender {
NSUserDefaults *toggle = [NSUserDefaults standardUserDefaults];

if (_toggle == 1) {

    [UIView animateWithDuration:0.3 animations:^{
        audioToggle.frame = CGRectMake(985.0f, 59.0f, audioToggle.frame.size.width, audioToggle.frame.size.height);
    }];

    _toggle ++;
    [toggle setInteger:_toggle forKey:@"toggleState"];
    [toggle synchronize];
    [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"audioOn"];

}

else {

    [UIView animateWithDuration:0.3 animations:^{
        audioToggle.frame = CGRectMake(924.0f, 59.0f, audioToggle.frame.size.width, audioToggle.frame.size.height);
    }];

    _toggle --;
    [toggle setInteger:_toggle forKey:@"toggleState"];
    [toggle synchronize];
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"audioOn"];

}
} 
```

在 viewDidLoad 中，检查开关的状态并调整它以显示正确的位置（打开或关闭）：

```
- (void)viewDidLoad
{
[super viewDidLoad];

if ([[NSUserDefaults standardUserDefaults] boolForKey:@"audioOn"]) {
    [audioToggle setFrame:CGRectMake(924.0f, 59.0f, audioToggle.frame.size.width, audioToggle.frame.size.height)];
    _toggle = 2;
}
else {
    [audioToggle setFrame:CGRectMake(985.0f, 59.0f, audioToggle.frame.size.width, audioToggle.frame.size.height)];
    _toggle = 1;
} 
```

**编辑：我用它来解决我的问题，在按钮的 IBAction 中：**

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"audioOn"]) {
    [UIView animateWithDuration:0.3 animations:^{
    audioToggle.frame = CGRectMake(985.0f, 59.0f, audioToggle.frame.size.width, audioToggle.frame.size.height);
    }];
    [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"audioOn"];
}
else {
    [UIView animateWithDuration:0.3 animations:^{
    audioToggle.frame = CGRectMake(924.0f, 59.0f, audioToggle.frame.size.width, audioToggle.frame.size.height);
    }];
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"audioOn"];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:07:58.907

在你的`viewDidLoad`

```
 if _toggle = 2; 
 frame = CGRectMake(924.0f, 59.0f, audioToggle.frame.size.width, audioToggle.frame.size.height) 
```

和

```
if _toggle = 1; 
 frame = CGRectMake(985.0f, 59.0f, audioToggle.frame.size.width, audioToggle.frame.size.height) 
```

但在你的 buttonAction 中它是不同的。`viewDidLoad`如果 buttonAction 正确，则进行交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:30:47.873

我怀疑阿努沙明白了。但我也怀疑如果你选择了一种稍微不同的风格，你自己很容易找到它。切换开关可以打开或关闭，换句话说，与布尔值完美匹配。如果您有一个名为 swicthedOn 的 BOOL，那么您将检查读取 if (switchedOn)，这将大大提高可读性。

可能是这样的：

```
- (IBAction)theSwitch:(id)sender { // Not using the sender for anything (?)
    NSUserDefaults *toggle = [NSUserDefaults standardUserDefaults];
    BOOL audioOn = NO; 
    float toggleX = 924.0f;

    if (_switchIsOn) {
        toggleX = 985.0f;
        audioOn = NO; // not strictly necessary but improves readability       
    }
    else {
        toggleX = 924.0f; // not strictly necessary but improves readability
        audioOn = YES;
    }

    _switchIsOn = audioOn;
    [UIView animateWithDuration:0.3 animations:^{
        audioToggle.frame = CGRectMake(toggleX, 59.0f, audioToggle.frame.size.width, audioToggle.frame.size.height);
    }];

    [toggle setBool:_switchIsOn forKey:@"toggleState"];
    [toggle synchronize];
    [[NSUserDefaults standardUserDefaults] setBool:audioOn forKey:@"audioOn"]; // Not being synchronized
} 
```

是的，我重构了它（并且可能引入了几个新错误）。对不起，我忍不住...

# java - 无法找到异常的根本原因

> ID：14374449
> 
> 赞同：-1
> 
> 时间：2013-01-17T07:54:37.323
> 
> 标签：java, jsp, tomcat, jakarta-ee

在尝试运行`jsp`页面时，出现以下异常：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it 
from fulfilling this request.

exception

org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 17 in the generated java file
Syntax error on token ";", delete this token

Stacktrace:
org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)
org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:457)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:644)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:358)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.22 logs. 
```

看到这些异常，我无法找到它的根本原因。任何人都可以帮助我。我的 IDE 没有显示任何可能表明我正在尝试编译有错误的 jsp 的红色标记。相反，它没有任何迹象。

*注意：我也没有看到生成的 Java 文件，正如异常所说*

*JSP 代码：*

```
<%-- 
Document   : index
Created on : Dec 8, 2012, 10:55:43 AM
Author     : user
--%>

<%@page import="internet.CommunicationWithServer.PingTheServer"%>
<%@page import="java.util.GregorianCalendar"%>
<%@page import="internet.CommunicationWithServer.SendNodeInfo"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="internet.HelperClasses.*;" %>
<%@page import="General.HelperClasses.*;" %>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Client Nappster</title>
    <style type="text/css">
        @import url("css/index_css.css");
    </style>
</head>
<body bgcolor="#000000">
<center> <h2 id="Head">Client Nappster</h2> </center>

<center> <h4 id="Head"><%= new GregorianCalendar().getTime().toString() %></h4> </center>

<%-- Call a method that checks for the internet connection --%>
<%! 
   boolean isConnectionAvailable;
   String networkIP;
%>
<% if(request.getAttribute("File-Sharing-Status") != null && ((Boolean)request.getAttribute("File-Sharing-Status")) == true) {%>
<script type="text/javascript"> alert("Success ! File shared with the nappster server"); </script>
<%}%>
<%
    isConnectionAvailable = new CheckConnection().checkConnection();
    if(isConnectionAvailable) {
        // send a message,the app is conneted to the nappster central server
        System.out.println("returned true");
        // call a method that sends the client's IP address to the nappster central server
        networkIP = new ClientAddress().getNetworkIP();
        // send to the server the address and the name of the node online
        boolean informationSent = new SendNodeInfo().sendInfo(networkIP);
        // call a method that starts a thread that after certain intervals checks if the node is still connected 
        // to the internet
        new PingTheServer().startPingThread();
        // make a 'Shared' Directory
        boolean directoryMade = new DirectoryMaker().makeDirectory(request.getServletContext().getRealPath("/"), "Shared");
        if(directoryMade == false) {
            //Warning : Unable to make a directory | Directory already exists
            System.out.println("Unable to create the 'Shared' directory | or directory already exists");
        }
    } else {
        // send an error message,unable to connect the app to the napster cental server
        System.out.println("returned false");
    }
%>

<jsp:include page="EmbeddedJSP/form_table.jsp" />

</body> 
```

**EmbeddedJSP/form_table.jsp：**

```
 <%@page import="internet.CommunicationWithServer.QueryConnectedNodes"%>
    <%@page import="java.io.File"%>
    <%@page import="java.io.FileReader"%>
    <%@page import="java.io.BufferedReader"%>
    <%@page import="java.util.Iterator"%>
    <%@page import="java.util.ArrayList"%>
    <%@page import="General.HelperClasses.Stashed"%>
    <%@page import="internet.CommunicationWithServer.QueryFileNames"%>

    <%! String fileSharingStatusString; 
        Boolean fileSharingStatus;
        String nodesConnected;
        boolean ncStashed;
    %>

    <% BufferedReader sharingStatusReader = new BufferedReader(new FileReader(request.getServletContext().getRealPath("/") + Constants.FilePaths.fstPath));
   while((fileSharingStatusString = sharingStatusReader.readLine()) != null) {
       fileSharingStatus = new Boolean(fileSharingStatusString.trim());
   }
    %>

   <% if(new File(request.getServletContext().getRealPath("/") + Constants.FilePaths.nlPath).exists())
        ncStashed = true;
   %>

   <table width="100%" border="+3" id="Table_border_color">
    <tr>
        <th id="Nodes_Connected_Heading"> Nodes Connected </th>
        <th id="Files_to_be_shared_heading"> Select a File to share  </th>
        <th id="Files_shared_heading"> Files Shared  </th>
    </tr>

    <tr>
        <td width="20%" id="List_of_nodes_connected"> List <br />
            <%-- Get the list of all the nodes connected to the nappster server --%>
            <% if(new QueryConnectedNodes().getConnectedNodes() && ncStashed) {
                BufferedReader nodesConnectedReader = new BufferedReader(new FileReader(Constants.FilePaths.nlPath));
                String line;
                while((line = nodesConnectedReader.readLine()) != null) {
            %>
                    <%= line %>
            <%  } // end of while loop
              } // end of if block 
                  else {
            %>
            <em>No node connected to the nappster server !</em>
            <%}%>
        </td>
        <td width="60%" valign="top" align="center">  
            <form method="post" action="SendTheFileName" enctype="multipart/form-data">
                <div id="Files_to_be_shared"> 
                      <input type="file" id="File" name="FileTag" />
                      <input type="submit" value="Share" /> 
                    </div>
            </form>
        </td>

        <td id="List_of_files_shared">
            List of files shared. <br />
            <%-- check if the user has shared any file --%>
            <% if(fileSharingStatus.booleanValue()) {
                    // if true, get the name of the files
                    boolean requestSent = new QueryFileNames().getFileNames();
                    if(requestSent) {
                        BufferedReader reader = new BufferedReader(new FileReader(request.getServletContext().getRealPath("/") + Constants.FilePaths.fsPath));
                        String line;
                        while((line = reader.readLine()) != null) {
             %>
                            <%= line %>
                            <br />

            <%
                        }
                    }                        
            } else {
            %>                
                <em>No file has been shared till now !</em>
                 <%}%>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:06:05.747

错误消息说“An error occurred at line: 17 in the generated java file Syntax error on token ";", delete this token” - 你会在 tomcat 的工作目录中找到生成的 java 文件，并且通常可以识别出问题（匹配) 来自 tomcat 生成的 java 代码的 jsp 行。

您必须知道 jsps 的执行方式是，它们被编译成经典的 servlet，然后编译成字节码并像您编写的一样执行。由于错误消息适用于生成的某些代码，因此您必须进入该代码。

你有一个多余的“;” 在生成非法 java servlet 的 jsp 文件的某处签名 - 这就是您将在“工作”目录中找到的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:56:34.370

删除分号：

```
<%@page import="internet.HelperClasses.*;" %>
<%@page import="General.HelperClasses.*;" %> 
```

到

```
<%@page import="internet.HelperClasses.*" %>
<%@page import="General.HelperClasses.*" %> 
```

在生成的*java 文件*中，上面的代码片段将是：

```
import internet.HelperClasses.*;;
import General.HelperClasses.*;; 
```

你看，它会产生一个错误！

# facebook - fql 和 graph api 的独特组合

> ID：14374452
> 
> 赞同：0
> 
> 时间：2013-01-17T07:54:56.327
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试搜索给定关键字的 fb 帖子，但只需要条件超过特定评论数或点赞数的结果，我的意思是结果只会包含评论数和点赞数中具有最小给定值的帖子.

我与许多开发人员一起尝试过，但所有人都说这是不可能的，因为图形 api 不提供这种方法或 http 调用函数。

但我的意思是，将有一种可能的方法来混合 fql 和图形并获得结果，就像这样，但我不知道要使用的确切模式。

```
https://api.facebook.com/method/fql.query?format=JSON
  &query=select comments from comment where object_id in 
    (select comments_fbid from link_stat where url ='http://developers.facebook.com/docs/reference/fql/comment/')
  &pretty=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:22:43.080

[您可以使用批处理请求](https://developers.facebook.com/docs/reference/api/batch/)在单个调用中混合 Graph API 和 FQL请求。您必须使用新的 Graph API url 而不是您在问题中显示的 REST API url。您还需要一个`access_token`来获取这些数据。

Facebook 确实有一个用于FQL 表`comments.count`的对象。这给出了一个数字评论计数，您可以查询：`likes``comment`

```
SELECT comments, likes FROM comment WHERE object_id IN 
  (SELECT comments_fbid FROM link_stat WHERE url ='http://developers.facebook.com/docs/reference/fql/comment/')
  AND (comments.count > 5 OR likes > 5) 
```

# android - 如何清除 ActionMode 上的 CloseButton

> ID：14374454
> 
> 赞同：2
> 
> 时间：2013-01-17T07:55:04.540
> 
> 标签：android, android-layout, android-actionbar

当它处于ActionMode时，屏幕左上角有一个closeButton，当我使用setCustomView()定义自己的布局时，它会出现在CloseButton的右侧。

在主题/样式 xml 文件中，我只能更改此按钮的样式，无法清除它。

那么，有什么办法可以清除这个 CloseButton 吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:06:03.503

把它放在你的主题上：

```
<item name="android:actionModeCloseButtonStyle">@style/ActionModeCloseButton</item> 
```

然后定义：

```
<style name="ActionModeCloseButton" parent="android:style/Widget.ActionButton.CloseMode">
    <item name="android:visibility">gone</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T10:40:52.500

感谢[dokkaebi](https://stackoverflow.com/users/931277/dokkaebi)，它有效。但我更喜欢使用“隐形”：

```
<style name="NoCloseButtonActionModeStyle">
   <item name="android:visibility">invisible</item>
</style> 
```

因此 ActionMode 中的自定义视图位置不会缩进到父级左侧。

# ssrs-2008 - SQL 报告中的乘法等价于 SUM() 的函数

> ID：14374470
> 
> 赞同：1
> 
> 时间：2013-01-17T07:56:56.973
> 
> 标签：ssrs-2008, aggregate-functions, reporting-services, multiplication

我正在寻找以下功能或解决方案：

对于 SQL 报告中的图表，我需要将 A 列中的值相乘。对于`=SUM(COLUMN_A)`图表，我将使用求和。但是我可以用什么来做乘法 - 到目前为止我还没有找到解决方案？

目前我正在计算堆叠列的值，如下所示：

```
=ROUND(SUM(Fields!Value_Is.Value)/SUM(Fields!StartValue.Value),3) 
```

而不是 SUM，我需要一些东西来乘以这些值。像这样的东西：

```
=ROUND(MULTIPLY(Fields!Value_Is.Value)/MULTIPLY(Fields!StartValue.Value),3) 
```

**编辑#1**

好的，试图让这件事运行起来。图表的表达式如下所示：

```
=Exp(Sum(Log(IIf(Fields!Menge_Ist.Value = 0, 10^-306, Fields!Menge_Ist.Value)))) / Exp(Sum(Log(IIf(Fields!Startmenge.Value = 0, 10^-306, Fields!Startmenge.Value)))) 
```

如果我手动计算我的“需求”，我必须得到以下结果：

![需要的结果](../Images/fa051bf6e37765f46b48eeda27868c27.png)

在我的 SQL 报告中，我得到以下结果：

![在此处输入图像描述](../Images/f97def7f45b09037e377837f42410b2b.png)

为了更容易，这些是原始值：

![在此处输入图像描述](../Images/e169956263ab44239e5ec9917b0e01ac.png)

并且您可以按 CW、CQ 或 CY 对图表进行分组（第一张图片中的值是 FertStufe 原始值的汇总总和值）

**编辑#2**

尝试了您的表达式，结果如下： ![在此处输入图像描述](../Images/62f8c6c2cbf01485a7a104c5620e6131.png)

只是为了说清楚：

列中的值

```
=Value_IS / Start_Value 
```

在第一张图片中相互相乘

*0,9947 x 1,0000 x 0,59401 = 0,58573*

**扩散日历周 44 总和**

起始值：1900,00 值是：1890,00 == 产量：0,99474

**Waffer unbestrahlt 日历周 44 总和**

起始值：620,00 值是：620,00 == 收益 1,0000

**Pellet Calenderweek 44 总和**

起始值：271,00 值是：160,00 == 产量 0,59041

* * *

产量 扩散 x 产量 晶圆 x 产量 粒料 = 需要 图表中的值 = 0,58730

**编辑#3** 原始值如下所示： ![在此处输入图像描述](../Images/c45e114a8d9da38de7b002f7bcc2c2bc.png)

图表在这些字段 CY（日历年）、CM（日历月）、CW（日历周）上分组 - 就像在图像中一样

您可以在此处以 xls 格式下载数据：

[https://www.dropbox.com/s/g0yrzo3330adgem/2013-01-17_data.xls](https://www.dropbox.com/s/g0yrzo3330adgem/2013-01-17_data.xls)

我使用的表达式（从编辑窗口复制/过去）

```
=Exp(Sum(Log(Fields!Menge_Ist.Value / Fields!Startmenge.Value))) 
```

我已将整个报告结果导出到 Excel，您可以在此处获取： [https ://www.dropbox.com/s/uogdh9ac2onuqh6/2013-01-17_report.xls](https://www.dropbox.com/s/uogdh9ac2onuqh6/2013-01-17_report.xls)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:58:32.833

这实际上是一种解决方法。但我很确定这是解决这个臭名昭著的问题的唯一方法：D

我就是这样做的：

`Exp(∑(Log(X)))`，所以你应该做的是：

```
Exp(Sum(Log(Fields!YourField.Value))) 
```

谁说数学一文不值？=D

**编辑：**

更正了公式。

顺便说一句，它已经**过测试**。

**解决伊恩的担忧：**

```
Exp(Sum(Log(IIf(Fields!YourField.Value = 0, 10^-306, Fields!YourField.Value)))) 
```

这个想法是用一个非常小的数字改变 0。只是一个想法。

**编辑：**

根据您更新的问题，您应该这样做：

```
Exp(Sum(Log(Fields!Value_IS.Value / Fields!Start_Value.Value))) 
```

我刚刚测试了上面的代码，得到了你希望的结果。

# javascript - 使用 nsiHttpChannel 获取响应正文

> ID：14374479
> 
> 赞同：3
> 
> 时间：2013-01-17T07:58:07.450
> 
> 标签：javascript, mozilla, gecko

我目前正在创建一个 Firefox 扩展应用程序来捕获 HTTP 响应并将其响应正文（HTML 等）与数据进行比较。我正在使用观察者服务来捕获所有 HTTP 请求和响应，并实现函数观察、注册/注销观察者等。

使用上面的函数，我可以获得请求和响应标头，但我无法获得 HTML 或其他内容的响应正文。有没有办法使用我上面提到的功能来获取身体？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T13:37:46.073

要查看响应正文，您需要注册`http-on-examine-response`事件，然后`QueryInterface`将主题注册为`nsITraceableChannel`，而不是`nsIHttpChannel`。

这样做的原因是当您收到 HTTP 响应标头时，响应正文可能尚未开始下载，因此当时数据实际上不可用。

此链接应该可以帮助您： http: [//www.softwareishard.com/blog/firebug/nsitraceablechannel-intercept-http-traffic/](http://www.softwareishard.com/blog/firebug/nsitraceablechannel-intercept-http-traffic/)

# javascript - 访问 jQuery中的元素名称

> ID：14374487
> 
> 赞同：0
> 
> 时间：2013-01-17T07:58:51.970
> 
> 标签：javascript, jquery, jquery-mobile

我有以下内容 -

```
var jsonObj = [ {"name" : "Jason"},{"name":"Bourne"},{"name":"Peter"},{"name":"Marks"}];

<!---->

$("#getname").click(function() {
    var response = getNames(jsonObj);
    $("#nameData").html(response);
});

function getNames(jsonObj){
    var response  = JSON.stringify(jsonObj);
    for ( var i = 0, len = jsonObj.length; i < len; i++) {
        var nameVal =  jsonObj[i].name;
        response = response.replace(nameVal,replaceTxt(nameVal,i));
    }
    return response;
}

function replaceTxt(nameVal,cnt){
    return "<u id='"+cnt+"' name='names' >"+nameVal+"</u> ";
}

$('u[name="names"]').dblclick(function(){
    var currentId = $(this).attr('id');
    alert(currentId);
    });
}); 
```

和html如下 -

```
<button id="getname">Get Name</button>
<div id="nameData"></div> 
```

双击名称值不会生成警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:01:06.430

你确定是..

```
 <dev id="nameData"></dev> 
```

或者

```
<div id="nameData"></div> 
```

这行得通...但是您`});`的问题还有其他内容...（不知道是否是错字）

在这里[摆弄](http://jsfiddle.net/Ur5cD/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:02:24.983

尝试这个：

```
$(document).ready(function(){    
    $('u[name="names"]').live("dblclick", function(){
        var currentId = $(this).attr('id');
        alert(currentId);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:07:55.893

正如您的代码所暗示的那样，您正在`.dblclick()`使用动态生成的元素，这不起作用，`you have to select parent elem which exist in the document`

```
$(document).on('dblclick','u[name="names"]', function(){
    var currentId = $(this).attr('id');
    alert(currentId);
}); 
```

试试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T08:03:08.307

尝试移动此代码：

```
$('u[name="names"]').dblclick(function(){
    var currentId = $(this).attr('id');
    alert(currentId);
    });
}); 
```

里面

```
$("#getname").click(function() {
    var response = getNames(jsonObj);
    $("#nameData").html(response);
}); 
```

喜欢：

```
$("#getname").click(function() {
    var response = getNames(jsonObj);
    $("#nameData").html(response);
$('u[name="names"]').dblclick(function(){
    var currentId = $(this).attr('id');
    alert(currentId);
    });
}); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T08:06:39.110

你不需要最后一个“ `});`”或者你没有粘贴整个代码。

看这里：http: [//jsfiddle.net/4cajw/1/](http://jsfiddle.net/4cajw/1/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-17T08:02:48.853

JSON.stringify - 对象 -> JSON。

JSON.parse - JSON -> 对象

# firefox - 如何在 Firefox 中查看密钥交换协议

> ID：14374489
> 
> 赞同：6
> 
> 时间：2013-01-17T07:59:15.617
> 
> 标签：firefox, ssl

我设置`Firefox`使用某种类型的`ciphersuites`through `config:about`。例如，只有带有`DHE`密钥交换的密码套件。现在，我连接到 SSL Web 服务器。我需要知道`ciphersuite`究竟使用了哪个，特别是，我想确保`Firefox`协商`DHE`的密钥交换。我怎样才能找到这条信息？我可以找到这个信息使用`Chrome`，但我不知道如何配置`Chrome`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T15:22:52.100

如果您在单击“更多信息”时单击打开的 https 页面上的挂锁，则底部的技术详细信息将说明 Firefox 正在使用哪个 Cipher Suite 来建立连接。您还可以使用名为 CipherFox 的附加组件[https://addons.mozilla.org/en-US/firefox/addon/cipherfox/?src=search](https://addons.mozilla.org/en-US/firefox/addon/cipherfox/?src=search)

祝你好运！

# input - 写入索引文件返回成功但失败

> ID：14374490
> 
> 赞同：1
> 
> 时间：2013-01-17T07:59:22.267
> 
> 标签：input, indexing, cobol

在下面的程序中，我执行与索引文件的基本交互。当我尝试添加记录时，一切都按预期工作，我什至收到成功消息。但是，当读取它的代码`lees`--试图找到对应的ID时，它找不到它。当我查看磁盘上索引文件的大​​小时，我可以看到它的大小为 0kb。我在看什么？

```
000100 IDENTIFICATION DIVISION.
000200 PROGRAM-ID. oef16_indexedfiles.

ENVIRONMENT DIVISION.
INPUT-OUTPUT SECTION.
FILE-CONTROL.
SELECT indexfile ASSIGN TO "C:\Test\indexedfile.dat"
ORGANIZATION IS INDEXED
ACCESS IS DYNAMIC
RECORD KEY IS id-number
ALTERNATE KEY IS fname WITH DUPLICATES
ALTERNATE KEY IS lname WITH DUPLICATES
ALTERNATE KEY IS city WITH DUPLICATES
ALTERNATE KEY IS hobby WITH DUPLICATES.

DATA DIVISION.
FILE SECTION.
FD indexfile.
01 persoon.
 02 id-number    PIC 9.
 02 name.
        03 fname        PIC A(25).
        03 lname        PIC A(30).
 02 city         PIC A(30).
 02 hobby        PIC X(40).

WORKING-STORAGE SECTION.
01 einde        PIC X.
01 msg          PIC X(50).
01 countno      PIC 9 VALUE 1.

PROCEDURE DIVISION.
PGM.
 PERFORM schrijf
 PERFORM lees
 STOP RUN.

   check.
    DISPLAY msg
    ACCEPT einde

   schrijf.
   MOVE "1 = stoppen, 0 = doorgaan" TO msg       
   PERFORM check
   OPEN I-O indexfile

   PERFORM UNTIL einde = 1
    MOVE countno TO id-number

    DISPLAY "Enter your first name:"
    ACCEPT fname

    DISPLAY "Enter your last name:"
    ACCEPT lname

    DISPLAY "Enter your city:"
    ACCEPT city

    DISPLAY "Enter your hobby:"
    ACCEPT hobby

    WRITE persoon
            INVALID KEY
                    DISPLAY "ERROR WRITING: " id-number
            NOT INVALID KEY
                    DISPLAY "ID " id-number " by " fname " is added"
    END-WRITE
    ADD 1 TO countno

    PERFORM check
   END-PERFORM
   CLOSE indexfile
   MOVE 0 TO einde

   lees.
    OPEN INPUT indexfile
    MOVE 1 TO id-number
    READ indexfile 
            INVALID KEY
                    DISPLAY "Invalid key: " id-number
            NOT INVALID KEY
                    DISPLAY id-number SPACE fname SPACE lname SPACE
                            city SPACE hobby
    END-READ

    CLOSE indexfile
    MOVE 0 TO einde
    ACCEPT einde 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:17:34.243

尝试将 OPTIONAL 添加到 SELECT 短语中。保持打开 IO。

选择**可选**索引文件分配给“indexedfile.dat”。

OPTIONAL 将允许打开一个不存在的文件以准备第一次写入。

另外，听从比尔的建议；习惯于在任何 OPEN（或任何访问权限）之后检查 FILE-STATUS。

在终止您的段落并重新格式化为 FIXED 表单（显示行超过第 72 列）之后，一旦添加了 OPTIONAL，此代码就可以在 OpenCOBOL 上正常工作。在此之前它失败了

libcob：文件不存在（状态 = 35）文件：'indexedfile.dat'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:58:26.333

我已经被别人指出了答案。在 write 方法 ( `schrijf`) 中，您必须使用该`OUTPUT`方法而不是`I-O`打开文件时。

有关详细说明：请查看下面的评论！

# ios - 从 UITabBarController 呈现模态视图

> ID：14374494
> 
> 赞同：0
> 
> 时间：2013-01-17T07:59:40.507
> 
> 标签：ios, uitabbarcontroller, storyboard

我使用故事板生成了一个新的选项卡式应用程序。

到目前为止我有

TabBarController -> FirstViewController -> SecondViewController -> ModalViewController

我试图在显示 tabBarController 之前打开模式视图。我在 AppDelegate.m 上添加了以下代码

`showModalView`被称为`application:didFinishLaunchingWithOptions:;`

```
- (void)showModalView
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    GSLoginViewController *loginView = [storyboard instantiateViewControllerWithIdentifier:@"loginView"];
    [loginView setModalPresentationStyle:UIModalPresentationFullScreen];
    [self.window.rootViewController presentViewController:loginView animated:YES completion:NULL];
} 
```

这里是我的输出：

```
Warning: Attempt to present <ModalViewController: 0x93670d0> on 
<UITabBarController: 0x935d170> whose view is not in the window hierarchy! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-24T09:02:29.000

你得到这个是因为你的 Appdelegate 不知道 tabbarcontroller 是你的根视图。你应该尝试这样的事情。

```
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController; 
```

并相应地添加您的代码。问题是您应该让应用程序委托知道 tabbarcontroller 是 rootviewcontroller。

# php - 在php中的mysql数据库中插入数据

> ID：14374497
> 
> 赞同：0
> 
> 时间：2013-01-17T07:59:49.627
> 
> 标签：php, mysql

我正在使用 php 从 iphone 向服务器发送数据，它正在从 iphone 发送数据，但没有插入 mysql 我正在使用以下 php 代码。

```
 <?php
  $con =     

  mysql_connect("surveyipad.db.6420177.hostedresource.com","tom","ben");
   if (!$con)
    {
   die('Could not connect: ' . mysql_error());
   }

   mysql_select_db("surveyipad", $con);

   $device_Id=$_POST['device_Id'];
   $R1=$_POST['R1'];
   $R2=$_POST['R2'];
   $R3=$_POST['R3'];
   $comment=$_POST['comment'];
   $update_date_time=$_POST['update_date_time'];

    $query=("INSERT INTO survey_responsese_pfizer (device_Id,R1,R2,R3,comment,update_date_time)

  VALUES ('$device_Id','$R1','$R2','$R3','$comment','$update_date_time')");

   mysql_query($query,$con);
   printf("Records inserted: %d\n", mysql_affected_rows());

    echo($device_Id)
   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:24:43.177

好的，只是通过示例来学习，停止使用 mysql_functions()，它们不再被维护并且被正式弃用。在 PHP 5.6 中，它们很可能会被删除，从而导致代码损坏。

使用准备好的查询转移到 PDO。使用 PDO 的当前代码的端口：

```
<?php
// SQL Config
$config['sql_host']='surveyipad.db.6420177.hostedresource.com';
$config['sql_db']  ='surveyipad';
$config['sql_user']='tom';
$config['sql_pass']='ben';

// SQL Connect
try {
        $db = new PDO("mysql:host=".$config['sql_host'].";dbname=".$config['sql_db'], $config['sql_user'], $config['sql_pass']);
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
}catch (Exception $e){
        die('Cannot connect to mySQL server.');
}

// Check for POST, add isset($_POST['device_Id']) ect to add validations
if($_SERVER['REQUEST_METHOD']=='POST'){
   // Build your query with placeholders
   $sql = "INSERT INTO survey_responsese_pfizer 
                  (device_Id,R1,R2,R3,comment,update_date_time)
                   VALUES
                  (:device_Id, :R1, :R2, :R3, :comment, :update_date)";

    // Prepare it
    $statement = $db->prepare($sql);
    // Assign your vairables to the placeholders
    $statement->bindParam(':device_Id', $_POST['device_Id']);
    $statement->bindParam(':R1', $_POST['R1']);
    $statement->bindParam(':R2', $_POST['R2']);
    $statement->bindParam(':R3', $_POST['R3']);
    $statement->bindParam(':comment', $_POST['comment']);
    $statement->bindParam(':update_date', $_POST['update_date_time']);
    // Execute the query
    $statement->execute();

    echo htmlspecialchars($device_Id);
}
?> 
```

未经测试，希望对您有所帮助。

# php - soap.wsdl_cache_enabled

> ID：14374500
> 
> 赞同：2
> 
> 时间：2013-01-17T07:59:57.427
> 
> 标签：php

我想`soap.wsdl_cache_enabled = 0`在**php.ini**中设置值，但在 ini 中没有任何选项。

如何改变它？

我有一个 WordPress 插件，它从 web 服务中获取数据，我删除了 WSDL 文件但它正在工作，它是从缓存中获取的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:01:58.750

在你的配置文件中试试这个：

```
ini_set('soap.wsdl_cache_enabled', '0'); 
ini_set('soap.wsdl_cache_ttl', '0'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T07:16:04.530

如果不存在，请将其写入您的 php.ini 文件中：

```
soap.wsdl_cache_enabled=0\. It should disable the cache. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T15:34:32.810

在你的 php 文件中试试这个

```
ini_set("soap.wsdl_cache_enabled", 0); 
```

# ios - 不直接从 xcode 访问 mssql 的原因是什么？

> ID：14374501
> 
> 赞同：1
> 
> 时间：2013-01-17T08:00:04.373
> 
> 标签：ios, sql-server, xcode

我打算使用 DB(Ms-Sql) 构建一个 iOS 应用程序。但是，人们建议不要从 Xcode 访问 DB。他们建议我使用 php 或 asp 通过网页访问 db。我想知道原因。此外，我将仅将 DB 用于（查看）选择行（不插入、更新或删除）。那么是否可以直接访问 db 仅用于查看目的？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:03:16.337

应用程序（移动、Web、任何客户端）直接访问任何数据库以解决安全问题通常是不好的。客户真的不应该访问数据库，该数据库通常保存着非常私密/安全的数据。它打开了漏洞（即，sql 注入攻击）。

一组用 php 或 java 或一些后端技术编写的 web 服务是一个更安全、可扩展的系统。这些 Web 服务可以连接到数据库并检索数据。您的 iOS 应用程序可以调用 Web 服务并接收数据……例如以 XML 或 JSON 的形式。

# html - 最大高度：复杂布局内的 100% div

> ID：14374509
> 
> 赞同：1
> 
> 时间：2013-01-17T08:00:50.627
> 
> 标签：html, css

我有一个奇怪的 CSS 问题，我无法理解。我的页面布局相当复杂，具有固定的页眉和页脚以及灵活的内容区域。

现在在这个内容区域内，我想创建可滚动的 div，默认情况下使用外部容器的全高，但不会更多。

一切正常，可滚动 div 是页眉和页脚之间的唯一元素。

[工作演示](http://www.hacksrus.net/files/demo.html)

然而不幸的是，一旦我将可滚动的 div 放在一个简单的固定宽度容器中以使其在页面上居中，浏览器就会根据其内部内容调整它的大小，因此不再可滚动，但由于外部 div 的*溢出：隐藏*。

[非工作演示](http://www.hacksrus.net/files/demo_with_container.html)

非常感谢任何帮助，我真的花了最后几天试图解决这个问题。

谢谢，

帕斯卡

## 解决方案

不幸的是，我不允许回答我自己的问题，以下是对我有用的解决方案：

我能够通过给出`#container`a`height`来解决问题`100%`。结果可以在这里看到：www.hacksrus.net/files/demo_working.html（我也不允许发布另一个超链接.. ;-)）

**如果有人能解释原因**，我将不胜感激！

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:37:55.553

好的，试试这个，在 div ' **scrollableContent** ' 之后，创建一个 div 并命名为 ' **centerAlign** ' 并将此代码添加到您的 css 文件中

好的，这是你的代码，我测试过的。

```
<!doctype html>
<html>
  <head>
    <title>Test</title>
    <style>
      * { 
        width: 100%;
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-size: 20px;
        overflow: hidden;
      }

      header {
        position: absolute;
        height: 100px;
        border: 1px solid #c00;
      }

      #content {
        position: absolute;
        top: 100px;
        bottom: 100px;
        border: 1px solid #c00;
        max-height: 100%;
        overflow: hidden;
      }

      #scrollableContent {
        max-height: 100%;
        overflow: auto;
      }

      footer {
        position: absolute;
        bottom: 0;
        height: 100px;
        border: 1px solid #c00;
      }
      #centerAlign {
            width:745px;
            margin:0 auto;
            background-color:#999;
      }
    </style>
  </head>

  <body>
    <header>header</header>
    <div id="content">
      <div id="scrollableContent">
        <div id='centerAlign'>
        <div>
          <p>BEGIN</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>END</p>
        </div>
        </div>
      </div>
    </div>
    <footer>footer</footer>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:26:09.133

好的，试试这个，在 div ' **scrollableContent** ' 之后，创建一个 div 并命名为 ' **centerAlign** ' 并将此代码添加到您的 css 文件中

```
#centerAlign {
    width:745px;
    margin:0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:25:31.850

在容器类中设置

```
overflow: scroll; 
```

# javascript - 使用 Pikaday 的多个日期选择器

> ID：14374510
> 
> 赞同：4
> 
> 时间：2013-01-17T08:01:02.653
> 
> 标签：javascript, datepicker, pikaday

我使用 Pikaday 作为日期选择器，因为 JQuery Datepicker 与原型库发生冲突。

这里有几个问题。

1.  我如何在多个文本框中使用 pikaday 日期选择器
2.  如何格式化日期。以前通过使用 JQuery Datepicker，改变格式我只需要
    添加 dateFormat:"dd M yy",

这是示例代码

```
<input type="text" id="datepicker">

<script src="pikaday.js"></script>
<script>

var picker = new Pikaday(
{    
    changeMonth: true,
    changeYear: true,
    field: document.getElementById('datepicker'),
    firstDay: 1,
    minDate: new Date('2000-01-01'),
    maxDate: new Date('2020-12-31'),
    yearRange: [2000,2020]

});

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T04:41:51.117

我猜您正在寻找一种方法让 pikaday 一起工作以处理日期范围类型的事情，然后根据您在第一次选择的日期操作最后一个？...我意识到这有点晚了，但也许其他人对答案感兴趣：

Pikaday 在这里不提供任何内部功能，但我能够通过销毁实例并在“从”选择器中选择一天时再次创建它来解决此问题。

HTML：

```
From: <input type="text" name="from" id="from">
To: <span id="toField"><input type="text" name="to" id="to"></span> 
```

Javascript：

```
function dateRange() { //destroy to field and init with new param
 var picker = new Pikaday({ field: document.getElementById("from") });
 if(picker.toString()) {
  $("#to").pikaday('destroy');
  $("#to").remove();
  $("#toField").html('<input type="text" name="to" id="to">');

  $("#to").pikaday({ //should have the same param as the original init
   format: "YYYY-M-DD",
   minDate: moment(picker.toString(), "YYYY-MM-DD").toDate()
  });
 }
}

$(function() { //pikaday init
 $("#from").pikaday({
  format: "YYYY-MM-DD", //adjust to your liking
  minDate: moment().subtract({days: 1}).toDate()
 });

 $("#to").pikaday({
  format: "YYYY-MM-DD",
  minDate: moment().subtract({days: 1}).toDate()
 });
}); 
```

PS：不要忘记包含您的 jquery、pickaday 和 moment js 文件...

希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-23T13:36:47.853

万一这难倒了其他人 - 一旦选择了日期，您需要使用“onSelect”触发器实际触发@Dominik的答案中的代码。我的代码最终变成了这样（因为我使用的是英国格式的 jquery 插件版本）：

```
var dateFormat = "DD/MM/YYYY";

function dateRange() { //destroy to field and init with new param

  var $from = $("#from").pikaday({
    format: dateFormat,
  });

   if($from.val()) {
      $("#to").pikaday('destroy');
      $("#to").remove();
      $("#toField").html('<input type="text" name="to" id="to">');

      $("#to").pikaday({
        format: dateFormat,
        minDate: moment($from.val(), dateFormat).toDate()
      });
    }
}

$("#from").pikaday({
  format: dateFormat,
  minDate: moment().subtract({days: 1}).toDate(),
  onSelect: dateRange
});

$("#to").pikaday({
  format: dateFormat,
  minDate: moment().subtract({days: 1}).toDate()
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-31T22:14:05.120

我意识到这不是对操作问题的完全回答，但如果最好使用一个控件选择日期范围，这就是我正在使用的方法：

```
var cal = document.getElementById('datepicker');
var picker = new Pikaday({
    onSelect: (function() {
      var init = true,
          start,
          end;
      return function(date) {
        if (init) {
          start = date;
          picker.setStartRange(date);
          picker.setEndRange(null);
          rangeClear();
        } else {
          end = date;
          picker.setEndRange(date);
          rangeSet(start, end);
        }
        picker.draw();
        init = !init;
    }
    }())
});
cal.appendChild(picker.el); 
```

rangeSet 和 rangeClear 函数将存在于其他地方，并具有以下签名：

```
function rangeSet(start, end) {
  //do something with the start and end dates
}
function rangeClear() {
  //clear the start and end dates
} 
```

你可以在这里看到这个工作：http: [//codepen.io/cshanejennings/pen/OMWLLg](http://codepen.io/cshanejennings/pen/OMWLLg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-11T05:16:12.743

以下是我使用 Pikaday 的 From 和 To 日期选择器的 Javascript（不带 jQuery）解决方案。它适用于 Chrome 和 Firefox，但不适用于 Chrome-Android。

```
var nowDT = new Date();
var nowDTStr = nowDT.toShortDate();

var sin = document.createElement('input');
sin.setAttribute('type', 'text');
sin.setAttribute('id', this.id + "_cp_sin");
sin.style.width = '20%';
sin.style.cssFloat = 'left';
this.controlPanel.appendChild(sin);

this.sinPika = new Pikaday({
    field: sin,
    firstDay: 1,
    minDate: new Date('2001-01-01'),
    maxDate: new Date(nowDTStr),
    yearRange: [2001, nowDT.getFullYear()]
});
this.sinPika.setDate(nowDTStr);    

var ein = document.createElement('input');
ein.setAttribute('type', 'text');
ein.setAttribute('id', this.id + "_cp_ein");
ein.style.width = '20%';
ein.style.cssFloat = 'right';
this.controlPanel.appendChild(ein);

this.einPika = new Pikaday({
    field: ein,
    firstDay: 1,
    minDate: new Date('2001-01-01'),
    maxDate: new Date(nowDTStr),
    yearRange: [2001, nowDT.getFullYear()]
});
this.einPika.setDate(nowDTStr); 
```

由于我将 sinPika 和 einPika 对象作为成员添加到我的类中，因此它们可以在我的类中的其他地方以其他方法访问，其中 Pika 对象用于获取用户设置的日期。唯一的问题是该解决方案不适用于我的 Chrome-Android。任何人都可以尝试让我知道你发现了什么？谢谢！

**编辑**

我发现了为什么 Pikaday 没有为我开发 chrome-android 的问题。原因是 pikaday.js ( [https://github.com/dbushell/Pikaday/blob/master/pikaday.js](https://github.com/dbushell/Pikaday/blob/master/pikaday.js) ) 与这里的[http://dbushell.github.io/Pikaday/](http://dbushell.github.io/Pikaday/)不同，因为区别在于附加mousedown、touchend事件。github 上的 Pikaday.js 附件如下：

```
addEvent(self.el, 'ontouchend' in document ? 'ontouchend' : 'mousedown', self._onMouseDown, true); 
```

（我认为，Javascript 定义`touchend`不是`ontouchend`，可能是，这就是来自 github repo 的 Pikaday.js 不起作用的原因。）

dbushell.github.io/Pikaday 上的附件如下：

```
addEvent(self.el, 'mousedown', self._onMouseDown, true); 
```

[使用来自http://dbushell.github.io/Pikaday/](http://dbushell.github.io/Pikaday/)的脚本可以在 chrome-android 上运行，而 git repo 上的脚本则不能。

# javascript - 当我到达最后一页时，我对服务器进行 AJAX 调用以从我的数据库中获取更多数据，而无需等待单击我的下一步按钮

> ID：14374518
> 
> 赞同：1
> 
> 时间：2013-01-17T08:01:45.950
> 
> 标签：javascript, debugging, pagination, xmlhttprequest, google-visualization

我的服务器上有一个包含 30 000 多条记录的大型数据库。我向服务器发出请求，向我提供前 100 条记录，并使用 Googlevisualisation 表分页 Api 显示它们 - 每页 10 条记录。

在我的代码中，我为“page”事件添加了一个事件监听器，并测试了事件的 page 属性：如果我已经到达最后一页，我会进行 AJAX 调用以获取更多数据（另外 100 条记录）

问题是，如果我到达最后一页，它只会加载一秒钟，然后立即进行 Ajax 调用，而无需等待单击下一步，因此它不会更改我的页面属性！我怎样才能做到这一点-当我到达最后一个要启用的下一个按钮时，当我单击它时才加载接下来的 100 条记录

这是我到目前为止尝试过的代码：

```
<html>
    <head> 
     <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
        google.load('visualization', '1', {packages: ['table']});
        </script>

    <script>

    var xmlhttp;
    if (window.XMLHttpRequest) 
    {
        xmlhttp = new XMLHttpRequest();
    } else 
    {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    var intRpp=100;
    var intPNum;
    var glPNum;
    var s;  
    var options = {'showRowNumber': true, 'pageSize':intPageSize };     
    var numberOfPages;
    var intPageSize=10;

    function loadXMLDoc(l)
    {       
         intPNum=l;
          s=l;

        xmlhttp.onreadystatechange = function() 
        { 
            if (xmlhttp.readyState==4 && xmlhttp.status==200) 
            {
                //alert(xmlhttp.responseText);
                var xmlObj = xmlhttp.responseXML;   

                var textXML = xmlObj.documentElement.firstChild.firstChild.nodeValue;

                if (window.DOMParser)
                {
                    parser=new DOMParser();
                    var xmlDoc=parser.parseFromString(textXML,"text/xml");
                }
                else // Internet Explorer
                {
                    var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
                    xmlDoc.async=false;
                    xmlDoc.loadXML(textXML);
                }

                var rec = new Array();
                rec[0]=['Стопански субект', 'Юрид.форма', 'Община', 'Име', 'Роля', 'Страна', 'NACE code', 'NACE text', 'Селище', 'пощ.код','Адрес', 'тел.', 'факс', 'Email', 'web', 'rid','id','activ'];
                var rows = xmlDoc.getElementsByTagName("row");
                rowsn = rows.length;
                for (i=1;i<=rowsn;i++)
                {   
                    var cols=rows[i-1].getElementsByTagName("colunm");
                    colsn=cols.length;
                    rec[i] = new Array();
                    for (var j=0; j<colsn; j++)
                    {   

                        rec[i][j] = cols[j].getAttribute("colvalue");

                    }
                    rec[i][j]='<input type="button" onClick="ajaxDBDelete('+rec[i][15]+');"/>'; 

                }
                tblTst = google.visualization.arrayToDataTable(rec);
                options['page'] = 'event';
                options['pageSize'] = intPageSize;
                options['pagingSymbols'] = {prev: 'prev', next: 'next'};
                options['pagingButtonsConfiguration'] = 'both';

                options['allowHtml'] = 'true'; 
                numberOfPages = intRpp/intPageSize;
                visual = new google.visualization.Table(document.getElementById('table'));
                google.visualization.events.addListener(visual, 'page', function (e){
                options.startPage = e.page;
                if (s>1)
                {
                   glPNum = (numberOfPages * (s-1)) + (e.page+1);
                   document.getElementById('txbNumPage').value = glPNum;
                    options['pagingButtonsConfiguration']='both';
                }
                else 
                {
                glPNum = e.page+1;
                if (glPNum==1) options['pagingButtonsConfiguration']='next';
                else   options['pagingButtonsConfiguration']='both';
                }

                document.getElementById('txbNumPage').value = glPNum;
                visual.draw(tblTst, options);
                if (e.page == numberOfPages-1)
                {
                    loadXMLDoc(s+1);
                    options.startPage = 0;

                }
                else 
                {

                    if((e.page==0)&&(s>1))
                        {   
                            loadXMLDoc(s-1);
                            options.startPage=numberOfPages-1;
                        }
                }

                });

                visual.draw(tblTst, options);

            }

        }

        //alert (intRpp);
        var url = "http://78.130.187.38:8080/axis2/services/bucat2/SelectFromDB?intRpp=" +intRpp + "&pageNum="+intPNum;
        //alert (url);
        xmlhttp.open("GET", url, true);
        xmlhttp.send(); 

    }

</script>
</head>
<body onload= "loadXMLDoc(1);">
<br>
<br>

<div id="table"></div>
<br/>
<button type="button" name="btnFP" onClick="loadXMLDoc(1);">FIRST PAGE</button>
<input type="input" id="txbNumPage" value=1 />
<button type="button" name="btnLP" onClick="ajaxDBLast();">LAST PAGE</button>
<br>
<div id='proba'>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T03:32:04.820

> 我怎样才能做到这一点-当我到达最后一个要启用的下一个按钮时，当我单击它时才加载接下来的 100 条记录

*   将您的逻辑放入通用函数中
*   将 loadXMLDoc 设置为指向该函数的指针
*   将页码作为查询字符串的一部分传递给 AJAX URL
*   如果页码是最后一个，则重新分配`loadXMLDoc`给一个空函数

# php - 将csv文件导入mysql并同时更改日期时间格式

> ID：14374532
> 
> 赞同：1
> 
> 时间：2013-01-17T08:02:58.957
> 
> 标签：php, mysql, import, explode, datetime-format

我有一个脚本，它使用explode 将csv 文件导入MySQL 表以分隔字段。我在 csv 文件中的最后一个字段是日期时间字段，但格式不正确，如下图所示： ![在此处输入图像描述](../Images/449894ef88d7e81cf23aa9220d05d84a.png)

我想使用下面的代码将 csv 插入 MySQL 并将最后一列的格式从 mm/dd/yyyy hh:mm:ss am/pm 更改为 yyyy-mm-dd hh:mm:ss 的 MySQL 格式

现有的工作脚本（只是不导入日期时间字段，因为格式错误）：

```
$fieldseparator = ",";
$lineseparator = "\n";
$csvfile = "LoadsOverWB.csv";
foreach(split($lineseparator,$csvcontent) as $line) {

    $lines++;

    $line = trim($line," \t");

    $line = str_replace("\r","",$line);

    /************************************
    This line escapes the special character. remove it if entries are already escaped in the csv file
    ************************************/
    $line = str_replace("'","\'",$line);
    /*************************************/

    $linearray = explode($fieldseparator,$line);

    $linemysql = implode("','",$linearray);

    if($addauto)
        $query = "replace into $databasetable(loadnumber,weighbillnumber,VehicleRegistration,haulier,vehicleweight,rolledproductkg,hegrosskg,roofinhkg,nonmetalkg,wbtotalkg,datetime) values('','$linemysql');";
    else
        $query = "replace into $databasetable(loadnumber,weighbillnumber,VehicleRegistration,haulier,vehicleweight,rolledproductkg,hegrosskg,roofinhkg,nonmetalkg,wbtotalkg,datetime) values('$linemysql');";

    $queries .= $query . "\n";

    @mysql_query($query);
} 
```

一如既往地提前感谢，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:08:51.763

爆炸后只需添加两行

```
$key    =   count($linearray);
$linearray[$key - 1]    =   date('Y-m-d H:i:s',strtotime($linearray[$key - 1]));

$linemysql = implode("','",$linearray); 
```

同样在插入 print_r 之前查看结果是否已更改。

编辑：

查看您正在使用的库，我假设每行的最后一个索引是您的日期列（TIME OVER WEB）。所以我计算数组的长度并计数 - 1 给了我最后一个索引，所以我正在应用 php 日期函数。date('format',strtotime(datevalue)) strtotime 将给定的字符串转换为像 32431234 这样的数字，然后 date 函数采用两个参数。格式和编号。我相信这足以让你理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:09:40.937

首先，您应该检查[fgetcsv()](http://php.net/manual/en/function.fgetcsv.php)。您将把每一行放入一个数组中，并且能够更好地处理它。

要回答您的问题，您需要格式化日期。

```
$date = $linearray['date']; // or what key your date has
$date = date('Y-M-d H:i:s', strtotime($date)); 
```

# php - Symfony 自定义过滤器

> ID：14374536
> 
> 赞同：1
> 
> 时间：2013-01-17T08:03:22.347
> 
> 标签：php, filter, symfony-1.4

我在下面的代码中添加了一个不相关模型的自定义过滤器，但我无法对其进行过滤。谁能指出我正确的方向？

```
public function addLanguagesColumnQuery($query, $field, $value)
{
  $rootAlias = $query->getRootAlias();
  $query->andWhereIn($rootAlias.'.journalist_id IN (SELECT journalist_id FROM journalist_language where language_id IN ('.implode(",", array_filter($value, 'strlen')).')');
  return $query;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:35:55.280

你的架构是什么？

我认为问题来自您用于子查询的表名。您应该使用教义名称而不是数据库中的名称。

因此，请尝试使用`JournalistLanguage`（或在您的架构中定义的那个）而不是`journalist_language`.

# php - 如何在 CodeIgniter 中获取请求路径？

> ID：14374537
> 
> 赞同：1
> 
> 时间：2013-01-17T08:03:25.173
> 
> 标签：php, codeigniter, http-headers, request

我有一个记录错误的基本控制器，我想在日志消息中包含*所有*请求数据、所有标头和请求正文。如何在 CodeIgniter 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:57:40.403

CodeIgniter`$this->input` 相当于`file_get_contents('php://input')` 包含所有 Body 请求（如果有），来自 foo 的输出`var_dump($this->input)`如下所示：

```
object(CI_Input)[9]
  public 'ip_address' => boolean false
  public 'user_agent' => boolean false
  public '_allow_get_array' => boolean true
  public '_standardize_newlines' => boolean true
  public '_enable_xss' => boolean false
  public '_enable_csrf' => boolean false
  protected 'headers' => 
    array (size=0)
      empty
  public 'security' => &
    object(CI_Security)[8]
      protected '_xss_hash' => string '' (length=0)
      protected '_csrf_hash' => string '' (length=0)
      protected '_csrf_expire' => int 7200
      protected '_csrf_token_name' => string 'ci_csrf_token' (length=13)
      protected '_csrf_cookie_name' => string 'ci_csrf_token' (length=13)
      protected '_never_allowed_str' => 
        array (size=10)
          'document.cookie' => string '[removed]' (length=9)
          'document.write' => string '[removed]' (length=9)
          '.parentNode' => string '[removed]' (length=9)
          '.innerHTML' => string '[removed]' (length=9)
          'window.location' => string '[removed]' (length=9)
          '-moz-bindin.......//and many other data. 
```

对于标题 laso，您有 PHP 5.4 中的新命令，即`headers_list()`. **此外， CI 视图**中还可以包含许多其他数据，例如：`ip_address, user_agent ,last_activity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:08:16.057

## 有关标题详细信息

```
$this->load->library('user_agent');
$reqUserIp = $this->input->ip_address();
$userAgent = $this->agent->agent_string();
$reqHeaders = $this->input->request_headers(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:11:06.503

您可以使用后控制器[挂钩](http://ellislab.com/codeigniter/user-guide/general/hooks.html)。

*   **在application/config/config.php**中启用钩子。
*   然后在**application/config/hooks.php**；

    ```
    $hook['post_controller'] = array(
                            'class'    => 'PostController',
                            'function' => 'log_it',
                            'filename' => 'PostController.php',
                            'filepath' => 'hooks',
                            'params'   => array()
                            ); 
    ```

    * * *

*   **在application/hooks/PostController.php**中创建一个文件

     **```
    <?php

    class PostController {

    private $ci;
    private $filepath;

    public function __construct() {
        $this->ci =& get_instance();
        $log_path = ($this->ci->config->item('log_path') != '') ? $this->ci->config->item('log_path') : APPPATH.'logs/';
        $this->filepath = $log_path.'action_log';
    }

    public function log_it($log_message=NULL) {
        if ($log_message == NULL) {
            $log_message = date('d/m/Y H:i:s')."::";
            $log_message .= $this->ci->session->userdata('username')."::";
            $log_message .= $this->ci->input->ip_address()."::";
            $log_message .= $this->get_client_ip()."::";
            $log_message .= $this->ci->router->class."::";
            $log_message .= $this->ci->router->method."::";
            $log_message .= uri_string()."::";
            if (isset($_POST)) {
                foreach ($_POST as $key => $value) {
                    $log_message .= "[$key] => $value;";
                }
            }
            $log_message .= "\r\n";
        }

        $fp = fopen($this->filepath, FOPEN_WRITE_CREATE);
        fwrite($fp, $log_message);
        fclose($fp);
    }

    private function get_client_ip() {
        if (!empty($_SERVER['HTTP_CLIENT_IP'])) {   //check ip from share internet
            $ip = $_SERVER['HTTP_CLIENT_IP'];
        } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {   //to check ip is pass from proxy
            $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
        } else {
            $ip = $_SERVER['REMOTE_ADDR'];
        }
        return $ip;
      }
     }

    ?> 
    ```**

# c# - 重用带有事务的 SqlCommand 时，我应该调用 Parameters.Clear 吗？

> ID：14374541
> 
> 赞同：9
> 
> 时间：2013-01-17T08:03:35.717
> 
> 标签：c#, ado.net, transactions, named-parameters

我在 ADO.NET 中手动编写事务。我正在使用的示例重用了`SqlCommand`这似乎是一个好主意。

但是，我在命令中添加了参数。

我的问题是：在下面的代码中，是否`command.Parameters.Clear()`正确？还是我做错了？

```
using (var connection = new SqlConnection(EomAppCommon.EomAppSettings.ConnStr))
{
    connection.Open();
    SqlTransaction transaction = connection.BeginTransaction();
    SqlCommand command = connection.CreateCommand();
    command.Transaction = transaction;
    try
    {
        foreach (var itemIDs in this.SelectedItemIds)
        {
            command.CommandText = "UPDATE Item SET payment_method_id = @batchID WHERE id in (@itemIDs)";
            // IS THE FOLLOWING CORRECT?
            command.Parameters.Clear();

            command.Parameters.Add(new SqlParameter("@batchID", batchID));
            command.Parameters.Add(new SqlParameter("@itemIDs", itemIDs));
            command.ExecuteNonQuery();
        }
        transaction.Commit();
    }
    catch (Exception ex)
    {
        MessageBox.Show("Failed to update payment batches, rolling back." + ex.Message);
        try
        {
            transaction.Rollback();
        }
        catch (Exception exRollback)
        {
            if (!(exRollback is InvalidOperationException)) // connection closed or transaction already rolled back on the server.
            {
                MessageBox.Show("Failed to roll back. " + exRollback.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T08:10:43.513

由于您重复执行相同的查询，因此无需清除它们 - 您可以在循环外部添加参数并将它们填充到内部。

```
try
{
    command.CommandText = "UPDATE Item SET payment_method_id = @batchID WHERE id in (@itemIDs)";
    command.Parameters.Add(new SqlParameter("@batchID", 0));
    command.Parameters.Add(new SqlParameter("@itemIDs", ""));

    foreach (var itemIDs in this.SelectedItemIds)
    {
        command.Parameters["@batchID"].Value = batchID;
        command.Parameters["@itemIDs"].Value = itemIDs;
        command.ExecuteNonQuery();
    }
    transaction.Commit();
} 
```

注意 -[你不能使用 IN 的参数，因为你已经在这里](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)- 它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:08:43.423

在这种情况下，您需要它，因为您需要设置新的参数值，所以它是正确的。

顺便搬个

```
command.CommandText = ".." 
```

也在循环之外，因为它从未改变过。

# javascript - 在饼图中使用荧光笔：jQplot

> ID：14374544
> 
> 赞同：4
> 
> 时间：2013-01-17T08:03:43.330
> 
> 标签：javascript, graph, jqplot, pie-chart

我想在饼图中使用荧光笔功能。我的代码是

```
function device_ownership_graph(titleOfGraph, corporateOwned,
        corporateShared, employeeOwned) {

    var arrCorporateOwned = [ 'Corporate-Owned', corporateOwned ];
    var arrCorporateShared = [ 'Corporate-Shared', corporateShared ];
    var arrEmployeeOwned = [ 'Employee-Owned', employeeOwned ];

    $.jqplot.config.enablePlugins = true;
    /*Here we construct graph*/
    $.jqplot('device_ownership_graph', [ [ arrCorporateOwned, arrCorporateShared, arrEmployeeOwned ] ], {
        title : {
            text : titleOfGraph, // title for the plot,
            show : true,
            fontSize : 14,
            textColor : '#808080',
            textAlign : 'center'
        },
        seriesColors : [ "#00b0f0", "#ffc000", "#92d050"],
        seriesDefaults : {
            // Make this a pie chart.
            renderer : jQuery.jqplot.PieRenderer,
            shadow: false,
            rendererOptions : {
                // Put data labels on the pie slices.
                // By default, labels show the percentage of the slice.
                showDataLabels : true,
                startAngle: 90,
                sliceMargin: 1,
                //highlightMouseOver: true
                highlightMouseDown: true

            }
        },
        legend : {
            renderer : $.jqplot.PieLegendRenderer,
            show : true,
            rendererOptions : {
                numberRows : 1,
                numberColumns : 3,
                disableIEFading : false
            },
            location : 'n',
            placement : 'outsideGrid',
            marginTop : '0px',
            marginBottom : '0px'
        },
        grid : {
            drawGridlines: false,
            show : true,
            background : 'transparent',
            borderWidth : 1,
            shadow : false
        },
        highlighter: {
            showTooltip: true,
            tooltipFade: true
        }

    });
    $('#device_ownership_graph .jqplot-data-label').css('color', '#000000');

    $('#device_ownership_graph').bind('jqplotDataHighlight', function (ev, seriesIndex, pointIndex, data) { alert('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);}); 
} 
```

## 问题

当切片上的鼠标移动事件时，我在两个不同的浏览器中收到两个不同的错误。

铬合金 ： -

```
Uncaught TypeError: Cannot read property 'formatter' of undefined jqplot.highlighter.min.js:57 
```

莫兹拉：-

```
q._xaxis._ticks[0] is undefined 
```

还有一个问题，当我使用`highlightMouseDown: true`它时（显示警报）但当我使用`highlightMouseOver: true`它时它不起作用。

***我在我的代码中做错了什么？请帮我。***

* * *

更新：2013 年 1 月 22 日

* * *

我想要荧光笔在 BarGraph 中的行为。我`alert()`在给定的代码中使用过，但该代码仅用于测试 highliter。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T10:28:50.620

您遇到的两个错误都指的是同一个问题。这一行`jqplot.highlighter.min.js`是：

```
var w=q._xaxis._ticks[0].formatter; 
```

Chrome 无法访问该`formatter`属性，因为`q._xaxis._ticks`未定义（如 Firefox 中所述）。

解决方案（受[How to display tooltips on jqplot pie chart](https://stackoverflow.com/questions/8209474/how-to-display-tooltips-on-jqplot-pie-chart)启发）是将以下代码添加到您的`seriesDefaults`配置中：

```
highlighter: {
    show: true,
    formatString:'%s', 
    tooltipLocation:'sw', 
    useAxesFormatters:false
} 
```

在你的情况下，`seriesDefaults`看起来像：

```
seriesDefaults:{
    // Make this a pie chart.
    renderer : jQuery.jqplot.PieRenderer,
    shadow: false,
    rendererOptions : {
        // Put data labels on the pie slices.
        // By default, labels show the percentage of the slice.
        showDataLabels : true,
        startAngle: 90,
        sliceMargin: 1,
        highlightMouseOver: true
        //highlightMouseDown: true
    },
    highlighter: {
        show: true,
        //formatString:'%s', 
        //tooltipLocation:'sw', 
        useAxesFormatters:false
    }
} 
```

重要的是设置`useAxesFormatters`为false。饼图没有轴，因此较早的关于`q._xaxis._ticks`未定义的错误。

请注意，当您不再使用基于 - 的工具提示时，您可能需要注释掉的属性`formatString`和属性。`tooltipLocation``alert`

**编辑：**

我假设您的意思是在此页面上找到的那种突出显示：[http ://www.jqplot.com/deploy/dist/examples/barTest.html](http://www.jqplot.com/deploy/dist/examples/barTest.html)

在最后一个`highlighter`配置中，您当前拥有：

```
highlighter: {
    showTooltip: true,
    tooltipFade: true
} 
```

如果您只想要突出显示效果而没有工具提示，请设置`showTooltip`为`false`. 然后删除绑定到`jqplotDataHighlight`事件的代码行。这应该确保突出显示效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T14:48:14.407

以前的答案对我不起作用：事实证明，如果包含`jqplot.cursor`它会破坏饼图。

要让它再次工作，你需要有光标：

```
{ show: false } 
```

作为饼图`seriesDefaults`选项的一部分。

# java - jsocks 代理库

> ID：14374545
> 
> 赞同：4
> 
> 时间：2013-01-17T08:03:58.907
> 
> 标签：java, sockets, proxy, serversocket, socks

我找到“jSocks”库已经有 2 天了。

我试图找出如何使用这个库进行编码。

我必须说文档很差。

我**不想**让你为我编码，我只想要一个**简单的工作流程**。

**这是我的场景：**

1）我想写2个应用程序，一个用于客户端，一个用于服务器。**（这是简单的客户端服务器代理）**

2) 客户端应用程序将侦听 localhost (127.0.0.1) 上的特定端口以获取传入连接（例如浏览器请求）。

3）客户端应用程序接受来自浏览器的传入连接，并在她和浏览器之间创建一个袜子套接字以发送和接收数据。

4）客户端应用程序在她和服务器应用程序（托管在网络上的服务器应用程序并监听传入连接的端口）之间创建一个袜子套接字。

5）服务器应用程序接受传入连接并为通信创建一个袜子套接字。

6）服务器应用程序接收数据（可能是浏览器请求），处理它并连接到远程网站（在互联网上）。

7）服务器应用程序从网络接收数据并将其发送到客户端应用程序。

8）客户端应用程序将接收到的数据发送到浏览器。

我用java标准“Socket”和“ServerSocket”为http请求创建了这个应用程序，没有问题，现在我想用socks socket为所有请求编写这个程序。

我用 jsocks 尝试了每一件事，但没有任何成功。

我需要一个关于如何使用**jsocks**来创建这个应用程序的**工作流程。**

 **tnx。

* * *

@BGR

根据您提到的文件（SOCKS.java），下面的简单行必须有效：

`ServerAuthenticator auth = new ServerAuthenticatorNone();`

`ProxyServer pServer = new ProxyServer(auth);`

`pServer.setLog(System.out);`

`pServer.start(50352);`

当我执行此操作时，日志是：Starting SOCKS Proxy on:0.0.0.0:50352（如果我将 127.0.0.1 作为地址传递给`start()`方法，日志是“Starting SOCKS Proxy on:127.0.0.1:50352 但结果是一样的)

但是当我将浏览器请求重定向到这个端口时，什么也没有发生。

acually 我不确定该`start(port)`方法是如何工作的，因为它是无效的。

当我使用时`ServerSocket`，`accept()`它会返回一个用于通信的 Socket。

但是当我使用`start(port)`什么都不会返回

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:23:19.713

我不确定我是否完全理解您的请求（socks 服务器用于代理；它不断侦听单个端口并转发请求）但查看[这个 java 文件](https://github.com/ravn/jsocks/blob/master/src/com/runjva/sourceforge/jsocks/main/SOCKS.java)似乎很容易使用 jsocks 创建 Socks 代理服务器。

代理服务器运行后，您可以使用[此构造函数](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/Socket.html#Socket%28java.net.Proxy%29)在客户端上创建一个 java 套接字，您可以在其中指定 socks 代理服务器的位置。然后你`connect`到你的远程服务器`SocketAddress`和

……应该是这样的。

你似乎有很多重定向正在进行。也许您应该绘制流程图并查看您需要 Socks 代理服务器的位置以及原因。**

# grails - 在 groovy 类中访问 grailsApplication 或 Service

> ID：14374546
> 
> 赞同：10
> 
> 时间：2013-01-17T08:03:59.227
> 
> 标签：grails, service, groovy

我试图`grailsApplication`在 groovy 类中访问，`src/groovy`但我得到一个空指针异常。我还尝试将服务注入同一个类和相同的结果。如何`grailsApplication`从 groovy 类访问或服务？（我正在使用 Grails 1.3.7）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T09:00:11.967

ApplicationHolder 类在较新的 Grails 版本（2.0 及更高版本）中已弃用。

还有另一种方式，在 Burt 的一篇博文中有所描述：[http ://burtbeckwith.com/blog/?p=1017](http://burtbeckwith.com/blog/?p=1017)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-18T14:29:05.053

在 Grails 2.0 之后，您应该使用：

```
 def grailsApplication = Holders.grailsApplication 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-17T08:42:39.443

依赖注入不适用于`src/groovy`. 您可以像这样访问`grailsApplication`使用`ApplicationHolder`：

```
import org.codehaus.groovy.grails.commons.ApplicationHolder

def grailsApplication = ApplicationHolder.application 
```

您可以像这样访问所有服务：

```
def allServicesArtefacts = grailsApplication.services 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-13T13:09:04.933

如果你有想要参与来自 src/groovy 或 src/java 甚至 3rd 方 jar 的依赖注入的类，你所要做的就是在 grails-app/conf/spring/resources.groovy 中配置它们。

如果您的 src/groovy 目录中有 mypackage.MyClass 类，如下所示：

```
package mypackage
class MyClass{
    def grailsApplication
    def myMethod(){
        //uses grailsApplication
    }
} 
```

然后通过将以下内容添加到 grails-app/conf/spring/resoruces.groovy 它将自动注入：

```
myClass(mypackage.MyClass){bean->
    bean.autowire = "byName"    
} 
```

到目前为止，这将适用于任何版本的 grails，就像我说的你甚至可以使用 3rd 方 jars - 例如，我的 resources.groovy 中总是有以下内容：

```
jdbcTemplate(org.springframework.jdbc.core.JdbcTemplate){
    dataSource = ref('dataSource')
} 
```

有关更全面的 Spring/Grails 文档，请参阅：

[http://grails.github.io/grails-doc/latest/guide/spring.html](http://grails.github.io/grails-doc/latest/guide/spring.html)

# android - Android webview loadDataWithBaseURL 如何从资产加载图像？

> ID：14374553
> 
> 赞同：11
> 
> 时间：2013-01-17T08:05:04.267
> 
> 标签：android, url, webview, load

在我的项目中，我有一个文件：

```
"MyProject/assets/folder1/image1.jpg"
"MyProject/assets/folder1/index.html". 
```

在 webView 我需要打开 index.html （带图像）。

我尝试这段代码：

```
String baseUrl = "file:///android_asset/folder1/";
webView.loadDataWithBaseURL(baseUrl, readFileAsString("index.html") , mimeType, "UTF-8", null); 
```

但图像不加载。

如果我将图像放入“**资产**”目录（`MyProject/assets/`）并`baseUrl = "file:///android_asset"`正确加载图像；

如何不仅从根资产目录加载图像，而且从`assets/folder1`?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T08:29:59.490

试试这样

```
WebView webview = (WebView)this.findViewById(R.id.webview);

String html = "<html><head><title>TITLE!!!</title></head>";
html += "<body><h1>Image?</h1><img src=\"icon.png\" /></body></html>";

webview.loadDataWithBaseURL("file:///android_res/drawable/", html, "text/html", "UTF-8", null); 
```

有关更多信息，请尝试此[链接](http://myexperiencewithandroid.blogspot.in/2011/09/android-loaddatawithbaseurl.html)

完美的[LoadDataWithBaseurl](http://lomza.people.totem-soft.com/?p=62)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-28T01:45:12.997

我认为您必须将基础设置为资产并将子文件夹添加到您的图像 src，如下所示：

`webView.loadDataWithBaseURL("file:///android_asset/", readAssetFileAsString("folder1/index.html"), "text/html", "UTF-8", null);`

html: `<img src="folder1/image1.jpg">`

这在 Android 5.1 上对我有用

```
private String readAssetFileAsString(String sourceHtmlLocation)
{
    InputStream is;
    try
    {
        is = getContext().getAssets().open(sourceHtmlLocation);
        int size = is.available();

        byte[] buffer = new byte[size];
        is.read(buffer);
        is.close();

        return new String(buffer, "UTF-8");
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }

    return "";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:37:13.903

试着喜欢这个

```
try {
            String filePath = null;
            filePath = "Your File path";
            Bitmap bitmap = null;

            bitmap = BitmapFactory.decodeFile(filePath);
            Log.v("Image data-->", "" + bitmap);
            imageWidth = bitmap.getWidth();
            imageHeight = bitmap.getHeight();
            Log.e("Width", "" + imageWidth);
            filePath = "file://" + filePath;
            String html = "<html xmlns=\"http://www.w3.org/1999/xhtml\"><head><meta http-equiv=\"Content-Type\" content=\"text/html\";charset=utf-8\"/><title></title></head><body style=\"width:"
                    + imageWidth
                    + "px; height:"
                    + imageHeight
                    + "px; background:url("
                    + filePath
                    + ") no-repeat; position:relative;\">"
                    + getDivTag(mapList)
                    + "</body></html>";

            Log.v("MIS", "" + html);
            webview.getSettings().setSupportZoom(true);
            webview.loadDataWithBaseURL(null, html, "text/html", "utf-8", null);

            System.out.println(html);

        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #4

> 赞同：-15
> 
> 时间：2013-01-17T08:08:25.570

你有上网权限吗？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# android - 防止 Facebook Android SDK 将密码显示为纯文本

> ID：14374554
> 
> 赞同：13
> 
> 时间：2013-01-17T08:05:06.793
> 
> 标签：android, facebook, passwords, password-protection, facebook-android-sdk

我有一个使用 Facebook Android SDK 的 Android 应用程序，将公开部署。

我的问题是，每当用户错误地使用错误密码登录时，Facebook SDK 会将密码字段更改为纯文本，这在公共环境中显然是不可接受的。

有没有办法抑制这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:23:27.627

不，登录对话框是从 Facebook 端呈现的，移动登录对话框在第二次尝试时总是以纯文本形式显示密码 - 重新加载时应该在对话框中显示该效果的注释

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T06:23:17.987

Facebook SDK 登录对话框验证流程是从 facebook 的服务器端管理的。而且由于我们对登录验证没有任何控制权。

Facebook SDK 提供了一个 LoginButton 视图，它是一个 Button 的自定义视图实现。您可以在您的应用程序中使用此按钮来实现 Facebook 登录。LoginButton 类维护会话状态，这允许它根据用户的身份验证状态在按钮中显示正确的文本。将 LoginButton 添加到您的活动布局是实现 Facebook 登录的快速方法。

除了登录按钮，您可能还想根据用户是否经过身份验证来控制其他用户界面 (UI) 组件。Facebook SDK 包括两个类：`UiLifecycleHelper`和`Session.StatusCallback`，用于处理管理会话状态更改的大部分复杂性。您显示经过身份验证的功能的活动或片段可以创建`UiLifecycleHelper`类的实例并传入一个`Session.StatusCallback`侦听器，该侦听器会收到任何会话状态更改的通知。您的活动或片段必须调用`UiLifecycleHelper`反映活动或片段生命周期方法的公共方法。这些方法用于创建、打开、保存和恢复活动的 Facebook 会话。侦听器`Session.StatusCallback`实现可以覆盖`call()`方法来响应会话状态更改并相应地更新 UI。

因此`LoginButton`控制登录按钮功能，您可以添加自定义代码触发`call()`方法来控制其他 UI 组件。

# xcode - Git OpenSSL 过滤器和 Xcode

> ID：14374558
> 
> 赞同：2
> 
> 时间：2013-01-17T08:05:12.457
> 
> 标签：xcode, git, openssl

Git新手在这里。

`openssl`我使用过滤器设置了一个 Git 存储库：

```
$ cat .gitattributes 
* filter=openssl diff=openssl 
```

（整个教程：[https](https://gist.github.com/873637) ://gist.github.com/873637 ）

一切都像它应该的那样工作，除了一件事。在 Xcode 的版本编辑器中，以前的版本（窗口右侧的版本）以其加密形式呈现。但是在终端中，`git log`可以正常工作。任何想法如何修复 Xcode 的版本编辑器行为？

# sql-server - 在存储过程和触发器之间共享数据的最佳方式

> ID：14374560
> 
> 赞同：0
> 
> 时间：2013-01-17T08:05:19.587
> 
> 标签：sql-server

假设我正在调用存储过程并发送一些参数。存储过程将更新一个表，并且该表有一个触发器。因此，当存储过程更新表时，我想要哪个用户正在更新表，但我没有使用 sql server 用户名，而是将用户名发送给将更新表的 SP。所以在更新之前，我可以将该用户名存储在本地临时表中，并从触发器中查询该本地临时表以获取该用户名。我希望这是可能的，但我想要其他好的选择来完成这项工作。所以请分享想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:07:27.350

[您可以使用SET CONTEXT_INFO](http://msdn.microsoft.com/en-us/library/ms187768.aspx)将过程中的用户名编码到会话中 这可以通过[CONTEXT_INFO在触发器中读取](http://msdn.microsoft.com/en-us/library/ms180125.aspx)

这是并发安全的：每个会话/调用都相互隔离。
并且不需要临时表等。

```
DECLARE @context varbinary(100) = CAST('foobar' AS varbinary(100));

SET CONTEXT_INFO @context;

SELECT CAST(CONTEXT_INFO() AS varchar(100)); 
```

# vba - VBA Excel-如何限制用户不要粘贴到特定行？

> ID：14374561
> 
> 赞同：0
> 
> 时间：2013-01-17T08:05:25.463
> 
> 标签：vba, excel

我有一个如下所示的 Excel，它是一个 sharedExcel。

![在此处输入图像描述](../Images/0e354a97cf1369d1fe3d9d01e0c43112.png)

现在我不应该为背景颜色为**灰色**的行设置粘贴选项（这些在运行时不固定，任何行都可能变成灰色）。因为它共享Excel，所以我不能使用 Lock 属性。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:19:42.523

使用颜色作为用于检查真/假的属性是不好的行为。例如，您可以通过添加一列（如果需要，隐藏）来解决此问题，该列具有 0 / 1 或 TRUE / FALSE，您可以通过例如组合框访问该列（然后您仍然可以通过单击此 cbb 框将颜色调整为灰色）。

您可以通过工作表事件 on_Change 检查动态组合的范围。表单事件的基本语法：

```
Private Sub Worksheet_Change(ByVal Target As Range)
'Set range dynamically instead of this hard coded example 
If Not Intersect(Target, Thisworkbook.Sheets(1).Range("A1:A10")) Is Nothing Then 
    'Do something 
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:27:52.287

在这个问题上花了一些时间后，我编写了以下代码。它工作正常。在这里，我为编码目的使用了另一个名为**PasteSheet**的电子表格，但我不会在任何时候向用户展示它。

* * *

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
If Application.CutCopyMode Then
    SelectedRow = ActiveCell.Row
    With Sheets("PasteSheet")
        .Activate
        .Range("A1").PasteSpecial xlPasteValues
        CR = Selection.Rows.Count
    End With
    Worksheets("ActualSheet").Activate
    For k = SelectedRow To (SelectedRow + CR)
        If Worksheets("ActualSheet").Cells(k, 30).Interior.Color = RGB(215, 215, 215) Then
            Application.EnableEvents = False
            MsgBox "Pasting is not allowed here!"
            'Clearing data in PasteSheet
            Worksheets("PasteSheet").Cells.ClearContents
            Worksheets("ActualSheet").Activate
            Application.EnableEvents = True
            Exit Sub
        End If
    Next
End If 
```

结束子

# objective-c - uibutton 在某个位置时不响应触摸

> ID：14374562
> 
> 赞同：0
> 
> 时间：2013-01-17T08:05:29.063
> 
> 标签：objective-c, xcode, uibutton

有点奇怪。

我有一个 UIButton 在横向模式下位于视图上除左上角之外的任何位置时都可以使用。

我有一个导航栏，在同一区域嵌套了一个后退按钮，但是当视频进入全屏并且播放状态发生变化时，这个导航栏被隐藏了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:17:37.227

正如所想，问题是由于隐藏的导航栏和导航项位于同一位置而发生的。

我能找到的唯一解决方案是从超级视图中删除导航栏，然后在需要时将其添加回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:19:39.203

您的视图层次结构未正确配置。要正确配置您的层次结构，您需要导航到您正在使用的 xib 或情节提要，并重新排序按钮，使其位于类似范围内的任何内容之上。一个常见的例子是你添加了一个`UIView`，这很清楚，并且你在它下面有一个按钮，现在你不能与它交互，即使你看不到它。

# php - PHP JSON Highcharts 渲染饼图每个数组

> ID：14374564
> 
> 赞同：0
> 
> 时间：2013-01-17T08:05:34.983
> 
> 标签：php, jquery, json, highcharts

我有这段代码，但实际上只画了一个包含所有数据的饼图。我想为每个键画一个馅饼`($row['servicio'])`。我不知道是否可以自动生成一个新的 DIV，`id="pie-KEY"`然后告诉图表将每个新的 KEY 渲染到它自己的 DIV。

**PHP**

```
while($row = sqlsrv_fetch_array($sqlTotals)) {
    $json[$row['servicio']] = array(
        "OK" => intval($row["OK"]),
        "KO" => intval($row["KO"])
    );
}
echo json_encode($json); 
```

**jQuery**

```
$.getJSON('test.php', function(data) {        
    var series = {
        type: 'pie',
        data: []
    }; 
    $.each(data, function(key, value) {
        series.data.push(["OK", value.OK]);
        series.data.push(["KO", value.KO]);
    });
    options.series.push(series);
    var chart = new Highcharts.Chart(options);  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:48:08.800

此代码正在运行...

```
$.getJSON('test.php', function(data) {        
    $.each(data, function(key, value) {
        var series = {
            type: 'pie',
            data: []
        }; 
        var renderId = "pie-" + key;
        $('#charts').append('<div id="'+ renderId +'" class="pieChart"></div>');
        series.data.push(["OK", value.OK]);
        series.data.push(["KO", value.KO]);
        options.series.push(series);
        options.chart.renderTo = renderId;
        options.title.text = key;
        var chart = new Highcharts.Chart(options);
        series.data = null;
    }); 
}); 
```

# android - 背景 textview 半屏

> ID：14374565
> 
> 赞同：0
> 
> 时间：2013-01-17T08:05:39.063
> 
> 标签：android

![截屏](../Images/a1a12fe702b45e26cf64f7653a6efee4.png)

我需要设置一个文本视图（及其背景），以固定背景大小填充设备的半屏。我尝试了这段代码，但我不能。目标是：半屏，向上显示图像，向下显示文本视图。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/luna"
        android:textSize="15pt" />

    <ScrollView
        android:id="@+id/scrollView10"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="#000000" >

        <TextView
            android:id="@+id/textView10"
            android:layout_width="match_parent"
            android:layout_height="320dp"
            android:background="#000000"
            android:gravity="center"
            android:textColor="#ffffff"
            android:textSize="14sp"
            android:text="jjkjkljkjkldjklsdfjkljklsdfjklsdfjklsdfjklsdfjklsdfjklsdfjklfjlsdfjkl"
            android:autoLink="web|email"
            android:textStyle="italic" />
    </ScrollView>
</LinearLayout>

<Button
    android:id="@+id/button10"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Chiudi" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:18:38.177

您可以通过添加权重来实现这一点。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="#000000"
 android:orientation="vertical" >

 <LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:orientation="vertical" >

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/luna"
    android:textSize="15pt" 
    android:layout_weight="1"/>

<ScrollView
    android:id="@+id/scrollView10"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:background="#000000"
    android:layout_weight="1" >

    <TextView
        android:id="@+id/textView10"
        android:layout_width="match_parent"
        android:layout_height="320dp"
        android:background="#000000"
        android:gravity="center"
        android:textColor="#ffffff"
        android:textSize="14sp"
               android:text="jjkjkljkjkldjklsdfjkljklsdfjklsdfjklsdfjklsdfjklsdfjklsdfjklfjlsdfjkl"
        android:autoLink="web|email"
        android:textStyle="italic" />
</ScrollView>
</LinearLayout>

<Button
android:id="@+id/button10"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:text="Chiudi" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:28:48.783

检查这个：

我已将内部线性布局更改为相对布局。我认为它会给出你想要的结果：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:orientation="vertical" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <ScrollView
            android:id="@+id/scrollView10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_gravity="center"
            android:background="#000000" >

            <TextView
                android:id="@+id/textView10"
                android:layout_width="match_parent"
                android:layout_height="320dp"
                android:autoLink="web|email"
                android:background="#000000"
                android:gravity="center"
                android:text="jjkjkljkjkldjklsdfjkljklsdfjklsdfjklsdfjklsdfjklsdfjklsdfjklfjlsdfjkl"
                android:textColor="#ffffff"
                android:textSize="14sp"
                android:textStyle="italic" />
        </ScrollView>

        <ImageView
            android:id="@+id/img"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@id/scrollView10"
            android:background="@drawable/luna"
            android:textSize="15pt" />
    </RelativeLayout>

    <Button
        android:id="@+id/button10"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Chiudi" />

</LinearLayout> 
```

我首先定义了滚动视图。然后我用 match_parent 大小定义了 ImageView。所以它占用了屏幕的所有剩余空间。这样，图像比例也将是适当的。希望能帮助到你。

# python - 以最快的方式计算python中的重复单词

> ID：14374568
> 
> 赞同：5
> 
> 时间：2013-01-17T08:05:52.287
> 
> 标签：python, dictionary, hashtable, performance, word-count

我试图在 23 万个单词的列表中计算重复单词。我使用 python 字典来做到这一点。代码如下：

```
for words in word_list:
    if words in word_dict.keys():
       word_dict[words] += 1
    else:
       word_dict[words] = 1 
```

上面的代码花了 3 分钟！我运行了超过 150 万字的相同代码，它运行了超过 25 分钟，我失去了耐心并终止了。然后我发现我可以从[这里](https://stackoverflow.com/questions/3496518/python-using-a-dictionary-to-count-the-items-in-a-list)使用以下代码（也如下所示）。结果令人惊讶，它在几秒钟内完成！所以我的问题是执行此操作的更快方法是什么？我猜字典创建过程必须花费 O(N) 时间。Counter 方法如何能够在几秒钟内完成这个过程，并创建一个精确的词词典作为键和频率作为它的值？

```
from collections import Counter
word_dict = Counter(word_list) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T08:10:11.763

正因为如此：

```
if words in word_dict.keys(): 
```

`.keys()`返回所有键的列表。列表需要线性时间来扫描，因此您的程序以二次时间运行！

试试这个：

```
if words in word_dict: 
```

此外，如果您有兴趣，您可以自己查看[`Counter`实现](http://hg.python.org/cpython/file/2.7/Lib/collections.py#l383)。它是用普通的 Python 编写的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T08:14:04.080

您的字典计数方法构造不正确。

您可以[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)通过以下方式使用 a：

```
d = defaultdict(int)

for word in word_list:
    d[word] += 1 
```

但是[`counter`](http://docs.python.org/2/library/collections.html#collections.Counter)来自 itertools 的方法仍然更快，即使它做几乎相同的事情，因为它是用更有效的实现编写的。但是，使用 counter 方法，您需要将列表传递给它以进行计数，而使用 defaultdict，您可以放置​​来自不同位置的源并具有更复杂的循环。

最终这是您的偏好。如果计算一个列表，`counter`是要走的路，如果从多个源迭代，或者你只是想在你的程序中有一个计数器，不希望额外的查找来检查一个项目是否已经被计算。那么`defaultdict`是你的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:10:42.137

您实际上可以查看 Counter 代码，这是在 init 上调用的更新方法：

（注意它使用了定义 的本地定义的性能技巧`self.get`）

```
def update(self, iterable=None, **kwds):
    '''Like dict.update() but add counts instead of replacing them.

    Source can be an iterable, a dictionary, or another Counter instance.

    >>> c = Counter('which')
    >>> c.update('witch')           # add elements from another iterable
    >>> d = Counter('watch')
    >>> c.update(d)                 # add elements from another counter
    >>> c['h']                      # four 'h' in which, witch, and watch
    4

    '''
    # The regular dict.update() operation makes no sense here because the
    # replace behavior results in the some of original untouched counts
    # being mixed-in with all of the other counts for a mismash that
    # doesn't have a straight-forward interpretation in most counting
    # contexts.  Instead, we implement straight-addition.  Both the inputs
    # and outputs are allowed to contain zero and negative counts.

    if iterable is not None:
        if isinstance(iterable, Mapping):
            if self:
                self_get = self.get
                for elem, count in iterable.iteritems():
                    self[elem] = self_get(elem, 0) + count
            else:
                super(Counter, self).update(iterable) # fast path when counter is empty
        else:
            self_get = self.get
            for elem in iterable:
                self[elem] = self_get(elem, 0) + 1
    if kwds:
        self.update(kwds) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T08:14:21.363

您也可以尝试将`defaultdict`其用作更具竞争力的选择。尝试：

```
from collections import defaultdict

word_dict = defaultdict(lambda: 0)
for word in word_list:
    word_dict[word] +=1

print word_dict 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-30T15:29:41.153

与[蒙库特](https://stackoverflow.com/users/24718/monkut)提到的类似，最好的方法之一是利用该`.get()`功能。这要归功于 Charles Severance 和[Python For Everyone 课程](https://youtu.be/EEmekKiKG70?t=36)

供测试用：

```
# Pretend line is as follow. 
# It can and does contain \n (newline) but not \t (tab).
line = """Your battle is my battle . We fight together . One team . One team . 
Shining sun always comes with the rays of hope . The hope is there . 
Our best days yet to come . Let the hope light the road .""".lower() 
```

他的代码（附上我的笔记）：

```
# make an empty dictionary
# split `line` into a list. default is to split on a space character
# etc., etc.
# iterate over the LIST of words (made from splitting the string)
counts = dict()
words = line.split() 
for word in words: 
    counts[word] = counts.get(word,0) + 1 
```

你的代码：

```
for words in word_list:
if words in word_dict.keys():
   word_dict[words] += 1
else:
   word_dict[words] = 1 
```

`.get()`做这个：

*   返回与 关联的字典中的 VALUE `word`。
*   否则（如果该词不是字典中的键，则返回）`0`。

无论返回什么，我们都会添加`1`它。因此，它处理了第一次看到这个词的基本情况。我们不能使用字典推导，因为当我们创建该变量时，推导分配给的变量*将不存在。*意义

this:`counts = { word:counts.get(word,0) + 1 for word in words}`是不可能的，因为`counts`（同时被创建和赋值。或者，因为）`counts`当我们（再次）引用它时，变量还没有完全定义`.get()`。

输出

```
>> counts
{'.': 8,
'always': 1,
'battle': 2,
'best': 1,
'come': 1,
'comes': 1,
'days': 1,
'fight': 1,
'hope': 3,
'is': 2,
'let': 1,
'light': 1,
'my': 1,
'of': 1,
'one': 2,
'our': 1,
'rays': 1,
'road': 1,
'shining': 1,
'sun': 1,
'team': 2,
'the': 4,
'there': 1,
'to': 1,
'together': 1,
'we': 1,
'with': 1,
'yet': 1,
'your': 1} 
```

[顺便说一句，这](https://stackoverflow.com/a/37290998/1327325)是我写的“加载”使用，作为`.get()`解决经典 FizzBu​​zz 问题的一种方式。我目前正在为类似情况编写代码，在这种情况下我将使用模数和字典，但将拆分字符串作为输入。

# html - 向下滑动网站的基于 CSS 的菜单

> ID：14374570
> 
> 赞同：0
> 
> 时间：2013-01-17T08:06:01.043
> 
> 标签：html, css, xhtml

任何人都可以建议基于 CSS 的大型菜单，它在菜单下方（打开时）向下滑动网站，并在菜单关闭时向上滑动网站。或者如何构建这种类型的菜单。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:18:38.493

可以使用 css 过渡。但如果没有 javascript，您将无法通过鼠标点击触发动画。

```
.slidemenu
{
    height: 0;
    background: red;
    transition: height 1s ease 0s;
    overflow: hidden;
}

.slidedown
{
    height: 20px;
} 
```

当您将`.slidedown`类添加到菜单时，它会向下滑动。移除时 - 向上滑动

[http://jsfiddle.net/TXkWB/](http://jsfiddle.net/TXkWB/)

更新（2014 年 3 月 20 日）：

可以仅使用 css ( [http://jsfiddle.net/RMfSB/](http://jsfiddle.net/RMfSB/) ) 打开菜单。它可能没用，因为菜单会在失去焦点后关闭，但它可以工作。

# frame - 如何在 ADF 的面板拉伸布局中拉伸内联帧大小？

> ID：14374571
> 
> 赞同：1
> 
> 时间：2013-01-17T08:06:02.767
> 
> 标签：frame, inline, oracle-adf

我有 .jsff 页面，其中包含命令按钮和内联框架。我想要做的是，我想让命令按钮在同一个地方保持静止，滚动页面时只有内联框架可以移动。

目前我所做的是设置一些面板拉伸`layout(StyleClass:AFStetchWidth)`。我把命令按钮放在顶部。滚动面板组中的内嵌框架位于中心。

这是我的结构：

af:panelStetchLayout(StyleClass:AFStretchWidth)
>

面板拉伸布局方面

```
 bottom
  center
     af:panelGroupLayout-scroll
          af:inlineFrame     (StyleClass:AFStretchWidth)
  end
  start
  top
    af:panelGroupLayout-horizontal
         af:commandButton-back 
```

当我运行此页面时：命令按钮在顶部保持静态。这是正确的，但内联框架的大小很小。有没有办法让内联框架被拉伸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:41:23.990

在 af:panelGroupLayout-scroll 上设置 (StyleClass:AFStretchWidth)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T14:48:19.950

你试过把这个属性：

尺寸=“首选”

我已经使用过它，它在面板拉伸布局中运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-02T10:35:47.703

只是我解决它如下：

```
 <af:panelGroupLayout id="pgl1" halign="center">
    <af:inlineFrame id="if1" source="/index.html" styleClass="AFStretchWidth" inlineStyle="height:100%;"/>
</af:panelGroupLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-06T13:33:11.287

我遇到了同样的问题。在这里，我已解决如下：

我已将面板拆分器用于内联框架。

```
 <af:panelSplitter styleClass="AFStretchWidth" inlineStyle="height:500px;" id="ps3" dimensionsFrom="parent"
                         positionedFromEnd="false">
        <f:facet name="first">
         <af:panelGroupLayout id="pgl11" >
           <af:inlineFrame styleClass="AFStretchWidth" partialTriggers="cb3" source="#{pdfHandler.servletString}"
                           id="if1" visible="true" binding="#{pdfHandler.inLineFrame}" shortDesc=" "
                           inlineStyle="height:500px;"/>
          </af:panelGroupLayout>
         </f:facet> 
```

这里如上图，

```
 I have added inlineStyle for height in both panelSplitter and in inlineFrame.
  Added dimensionFrom for panelSplitter as 'parent'
  Surround inlineFrame with panelGroupLayout. 
```

有了这个，它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-04T16:04:22.733

inlineStyle="身高：100%；" 默认 af:panelGroupLayout 就是这样。

# vb.net - VB.NET 将菜单放入控制栏，如 Firefox

> ID：14374576
> 
> 赞同：1
> 
> 时间：2013-01-17T08:06:21.053
> 
> 标签：vb.net, winforms, firefox, menu

新的 Firefox 版本不再有常规菜单。相反，可以通过单击以某种方式集成到表单控制栏的橙色按钮来访问菜单。这节省了客户区的一些空间。

我想对 VB.NET 和 WinForms 做同样的事情。

谁能告诉我a）这叫什么？我在谷歌上没有找到任何关于这方面的信息，也许是因为我没有找到合适的术语。b）也许是如何做到这一点的起点？

非常感谢。

# android - 使用 AsyncTask 发送 Android 电子邮件

> ID：14374578
> 
> 赞同：6
> 
> 时间：2013-01-17T08:06:33.777
> 
> 标签：android, debugging, email, asynchronous, task

我最近问了一个关于以下代码的问题：

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

根据之前的问题，我曾就网络错误提出过这个问题：

[需要帮助调试电子邮件代码](https://stackoverflow.com/questions/14373468/need-help-debugging-email-code)

我的问题是，我将如何实现 AsyncTask 以成功发送包含此 Android 代码的电子邮件？我看到的每个教程都告诉我应该做

```
extend AsyncTask { 
```

但是，GMailSender.java 已经将其定义为：

```
public class GMailSender extends javax.mail.Authenticator 
```

有人可以帮助我吗？谢谢！

笔记：

请不要像白痴那样 -1^(编辑)了这个问题并发布了使用 JavaMail API 在 Android 中发送电子邮件中给出的确切答案，[而不使用默认/内置应用程序](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)。由于无法再在 Android 应用程序的主线程上运行网络操作，我无法使用该精确编码。我正在寻找一种使用 AsyncTask 以便在后台运行操作的方法。我不知道该怎么做

```
extend AsyncTask { 
```

不碰

```
public class GMailSender extends javax.mail.Authenticator 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T08:11:38.233

[`AsyncTask`文档页面](http://developer.android.com/reference/android/os/AsyncTask.html)上有一个很好的例子。

将您的`GMailSender`对象传递给`AsyncTask`，并`GMailSender#sendMail`在`doInBackground`.

那是，

```
public void onClick(View v) {
    final GMailSender sender = new GMailSender("username@gmail.com", "password");
    new AsyncTask<Void, Void, Void>() {
        @Override public Void doInBackground(Void... arg) {
            try {   
                sender.sendMail("This is Subject",   
                    "This is Body",   
                    "user@gmail.com",   
                    "user@yahoo.com");   
            } catch (Exception e) {   
                Log.e("SendMail", e.getMessage(), e);   
            } 
        }
    }.execute();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T04:08:20.787

```
public void onClick(View v) {
final GMailSender sender = new GMailSender("username@gmail.com",       "password");
new AsyncTask<Void, Void, Void>() {
    @Override public Void doInBackground(Void... arg) {
        try {   
            sender.sendMail("This is Subject",   
                "This is Body",   
                "user@gmail.com",   
                "user@yahoo.com");   
        } catch (Exception e) {   
            Log.e("SendMail", e.getMessage(), e);   
        } 
    return null;}
}.execute();

} 
```

谢谢“dokkaebi”

# ruby-on-rails - 在 Rails 中进行 Http 基本身份验证

> ID：14374580
> 
> 赞同：35
> 
> 时间：2013-01-17T08:06:49.523
> 
> 标签：ruby-on-rails, ruby

嗨，我来自 Grails 背景，是 Rails 的新手。我希望在 Rails 中进行 http 基本身份验证。

我在 grails 中有一个代码，它可以像这样进行基本身份验证：

```
def authString = "${key}:".getBytes().encodeBase64().toString()
def conn = "http://something.net".toURL().openConnection()
conn.setRequestProperty("Authorization", "Basic ${authString}") 
```

可以用rails做同样的事情吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-17T08:42:35.317

在要限制使用 http 基本身份验证的控制器中编写以下代码

```
class ApplicationController < ActionController::Base
  http_basic_authenticate_with :name => "user", :password => "password" 
end 
```

使用 open-uri 发出请求如下所示：

```
require 'open-uri'

open("http://www.your-website.net/", 
  http_basic_authentication: ["user", "password"]) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-12-27T04:25:59.557

在 Ruby on Rails 4 中，您可以根据上下文轻松地在站点范围内或每个控制器上应用基本的 HTTP 身份验证。

例如，如果您需要站点范围的身份验证：

```
class ApplicationController < ActionController::Base
  http_basic_authenticate_with name: "admin", password: "hunter2"
end 
```

或基于每个控制器：

```
class CarsController < ApplicationController
  http_basic_authenticate_with name: "admin", password: "hunter2"
end 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-09-24T14:58:16.517

我赞成@Nishant 的回答，但想补充一点。您始终可以设置过滤器，使其仅通过传递`only`或`except`类似方式应用于某些控制器操作：

```
http_basic_authenticate_with name: "admin", password: "strongpasswordhere", only: [:admin, :new, :edit, :destroy] 
```

或者

```
http_basic_authenticate_with name: "admin", password: "strongpasswordhere", except: [:show] 
```

在许多情况下非常有帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-04-21T20:17:33.407

```
# app/controllers/application_controller.rb
  before_filter :http_basic_auth

  def http_basic_auth
    if ENV['HTTP_AUTH'] =~ %r{(.+)\:(.+)}
      unless authenticate_with_http_basic { |user, password|  user == $1 && password == $2 }
        request_http_basic_authentication
      end
    end
  end 
```

然后您只需要使用 user:password 导出环境变量，例如：

```
 export HTTP_AUTH=user:pass 
```

如果您使用的是 heroku.com：

```
 heroku config:set HTTP_AUTH=user:pass 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T08:09:19.080

关于这个主题有一个很棒的 Rails Cast

[http://railscasts.com/episodes/82-http-basic-authentication](http://railscasts.com/episodes/82-http-basic-authentication)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-17T08:15:28.640

当连接到受基本 HTTP 身份验证保护的 HTTP 端点时，我通常使用[HTTParty](https://github.com/jnunemaker/httparty)。[HTTParty](https://github.com/jnunemaker/httparty)是低 Ruby STD 类（如[net/http](http://ruby-doc.org/stdlib-2.0.0/libdoc/net/http/rdoc/Net/HTTP.html) ）的简单包装器。

[HTTParty](https://github.com/jnunemaker/httparty)与基本身份验证的示例用法。

```
class Delicious
  include HTTParty
  base_uri 'https://api.del.icio.us/v1'

  def initialize(u, p)
    @auth = {username: u, password: p}
  end

  def recent options={}
    options.merge!({basic_auth: @auth})
    self.class.get('/posts/recent', options)
  end
end

delicious = Delicious.new("<username>", "<password>")

pp delicious.recent #=> list of recent elements 
```

[在 GitHub 上](https://github.com/jnunemaker/httparty/tree/master/examples)查看更多示例。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-02-11T15:07:34.343

以上答案是正确的，但最好不要将用户和密码放在源代码中。

最好在生产环境变量中有密码（在代码中可以用于开发）

```
class YourController..
  http_basic_authenticate_with name: ENV["HTTP_BASIC_AUTH_USER"], password: ENV["HTTP_BASIC_AUTH_PASSWORD"], if: -> { ENV['RAILS_ENV'] == 'production' }
  http_basic_authenticate_with name: "user", password: "pass", if: -> { ENV['RAILS_ENV'] != 'production' } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-17T08:18:02.433

对于最新的 rails 版本，有一个`ASCIIcast`解释**HTTP Basic Authentication**的步骤。

链接在[这里](http://asciicasts.com/episodes/270-authentication-in-rails-3-1)。

**旁注：**请注意，HTTP 基本身份验证以明文形式传输用户名和密码，因此您不应将此方法用于需要更高安全级别的应用程序。

# javascript - CSS 水平导航菜单列表对齐

> ID：14374581
> 
> 赞同：2
> 
> 时间：2013-01-17T08:07:00.773
> 
> 标签：javascript, jquery, html, css

我正在尝试设计这样的菜单和子[菜单](http://kardan.edu.af/)。

我试图对已有的菜单进行改进，但它不是从菜单的开头开始的。我试图编辑 CSS，但我不知道在哪里解决这个问题。

这是我要修复的菜单的屏幕截图。

![在此处输入图像描述](../Images/4b153164c275a188d7d44df7dbc09df2.png)

**菜单的 HTML：**

```
<div style="width:100%; border:1px solid black" align="center">
<ul id="nav-one" class="dropmenu" style="width:1024px; border:1px solid black;"> 
            <li> 
                <a href="#">Home</a> 
            </li> 
            <li> 
                <a href="#">ABOUT BOST</a> 
                <ul> 
                    <li><a href="#">Support</a></li> 
                    <li><a href="#">Help</a></li> 
                    <li><a href="#">Examples</a></li>
                    <li><a href="#">Your work</a></li>
                </ul> 
            </li> 
            <li> 
                <a href="#item3">Downloadsfdsfsd</a> 
                <ul> 
                    <li><a href="#">Tools</a></li> 
                    <li><a href="#">Office</a></li> 
                    <li><a href="#">Custom projects</a></li> 
                </ul> 
            </li>  
            <li> 
                <a href="#">Productsfsdfsdfsd</a> 
                <div class="products" align="left">
                    <ul> 
                        <li><img src="images/236872.jpg" width="40" height="40" alt="Thumb" border="0" /><h2>Featured Box</h2><p><a href="#">More information about this product</a></p></li> 
                        <li><img src="images/242702.jpg" width="40" height="40" alt="Thumb" border="0" /><h2>Mod Rewriter</h2><p><a href="#">More information about this product</a></p></li> 
                        <li><img src="images/242177.jpg" width="40" height="40" alt="Thumb" border="0" /><h2>Byte Scrambler</h2><p><a href="#">More information about this product</a></p></li> 
                        <li><img src="images/226138.jpg" width="40" height="40" alt="Thumb" border="0" /><h2>Image Processor</h2><p><a href="#">More information about this product</a></p></li> 
                        <li><img src="images/216794.jpg" width="40" height="40" alt="Thumb" border="0" /><h2>Registry Class</h2><p><a href="#">More information about this product</a></p></li> 
                        <li><img src="images/211826.jpg" width="40" height="40" alt="Thumb" border="0" /><h2>Data Validation</h2><p><a href="#">More information about this product</a></p></li> 
                        <li><img src="images/203708.jpg" width="40" height="40" alt="Thumb" border="0" /><h2>Ajax Tables</h2><p><a href="#">More information about this product</a></p></li> 
                    </ul>
                    <div class="small">At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident.</div>
                </div>
            </li>
            <li> 
                <a href="#">Tutorials</a> 
                <div class="tutorials">
                    <ul class="left"> 
                        <li><a href="#">Javascript</a></li> 
                        <li><a href="#">Python</a></li> 
                        <li><a href="#">PHP</a></li> 
                    </ul>
                    <ul class="right"> 
                        <li><a href="#">HTML/CSS</a></li> 
                        <li><a href="#">ASP.NET</a></li> 
                        <li><a href="#">Actionscript</a></li> 
                    </ul>
                    <div class="small">View <a href="#">all categories</a> or a <a href="#">list of the best tutorials</a>.</div>
                </div>
            </li>
            <li> 
                <a href="#">Links</a> 
                <ul> 
                    <li><a href="#">Programming</a></li> 
                    <li><a href="#">Inspiration</a></li> 
                    <li><a href="#">My websites</a></li> 
                    <li><a href="#">Clients</a></li> 
                    <li><a href="#">Cool stuff</a></li> 
                    <li><a href="#">Sitebase</a></li> 
                    <li><a href="#">Other</a></li> 
                </ul> 
            </li>
            <li> 
                <a href="#">Login</a> 
                <div class="login">
                    <label for="txtuser">Username: </label>
                    <input type="text" name="txtuser" id="txtuser" />
                    <label for="txtuser">Password: </label>
                    <input type="password" name="txtpass" id="txtpass" />
                    <button>Login</button>
                </div>
            </li>           
        </ul> 
        </div> 
```

**和CSS：**

```
ul, li{
    padding: 0px;
    margin: 0px;
}
ul.dropmenu{
    position: relative;
    margin: 0px;
    padding: 1px 0px 0px 0px;
    background:transparent url(images/navigation.png) repeat-x scroll 0 0;
    display:block;
    height: 35px;
    font-family:Verdana,Arial,Helvetica,sans-serif;
    font-size: 12px;
}
.dropmenu li{
    position: relative;
    list-style: none;
    float: left;
    margin: 0px;
    padding: 0px;
}
.dropmenu li a{
    height: 22px;
    padding: 9px 30px 0px 15px;
    display: block;
    cursor: point;
    border-right: solid 1px #4a779d;
    color: #FFFFFF;
    text-transform: uppercase;
    text-decoration: none;
}
.dropmenu li span{
    display: block;
    float: right;
    height: 10px;
    width: 10px;
    background:transparent url(images/arrow_up.png) repeat-x scroll 0 0;
    position: absolute;
    top: 12px;
    right: 10px;
}
.dropmenu li  a:hover span{
    background:transparent url(images/arrow_hover.png) repeat-x scroll 0 0;
}
.dropmenu li:hover ul, .dropmenu li:hover div{
    display: block;
}
.dropmenu ul{
    position: absolute;
    display: none;
    width: 140px;
    padding: 0px;
    margin: 0px;
    border-bottom: 1px solid #ccc;
    background: #FFFFFF url(images/gradient.png) repeat-x scroll 0 0;
}
.dropmenu ul li{
    border: 0;
    float: none;
}
.dropmenu ul a {
  border: 1px solid #ccc;
  border-bottom: 0;
  white-space: nowrap;
  display:block;
  color: #0657AD;
  text-decoration: underline;
  text-transform: none;
}
a.selected, a:hover{
    color: #0657AD !important;
    background: #FFFFFF url(images/gradient.png) repeat-x scroll 0 0;
}
a.selected span{
    background:transparent url(images/arrow_hover.png) repeat-x scroll 0 0;
}
.dropmenu ul a:hover {
    color:#F67A00 !important;
    text-decoration: none;
    background-color: #F0F0F0;
    background-image: none;
}
.dropmenu div ul{
    position: relative;
    display: block;
}
.dropmenu li div{
    background: #FFFFFF url(images/gradient.png) repeat-x scroll 0 0;
    border: 1px solid #ccc;
    padding: 5px;
    display: none;
    position: absolute;
}
.dropmenu li div ul{
    border: none;
    background: none;
    position: relative !important;
}
.dropmenu li div a{
    border: none;
    border-bottom: 1px solid #ccc;
}
.dropmenu li div div{
    display: block;
    position: relative;
    background: none;
    border: none;
}
.dropmenu li div div a{
    display: inline;
    border: none;
    color: #666;
    text-decoration: underline;
    padding: 0px;
    margin: 0px;
    text-transform: none;
}
.dropmenu li div div a:hover{
    color: #000;
    text-decoration: none;
}
ul.left{
    float:left;
    width: 145px;
}
ul.right{
    float:right;
    width: 145px;
}
.small{
    color: #666;
    font-size: 10px;
    padding: 10px 5px 8px 5px !important;
    display: block;
    clear: both;
}
.products{
    width: 1024px;
    padding: 0px !important;
}
.products ul{
    width: 100%;
}
.products ul li{
    border-bottom: 1px solid #ccc;
    height: 40px;
    padding: 10px 0px;
}
.products h2{
    font-size: 16px;
    padding: 2px 0px 3px 0px;
    margin: 0px;
}
.products p{
    color: #666;
    font-size: 10px;
    padding: 0px;
    margin: 0px;
}
.products img{
    float: left;
    padding-right: 10px;
}
.products  ul li a{
    display: inline;
    border: none;
    color: #666;
    text-decoration: underline;
    padding: 0px;
    margin: 0px;
    text-transform: none;
}
.products  ul li  a:hover{
    color: #000 !important;
    text-decoration: none;
    background: none !important;
}

.tutorials{
    width: 300px;
}

.login{
    padding: 15px !important;
    width: 180px;
}
input{
    border:1px solid #4A779D;
    padding: 3px 8px;
    margin-bottom: 8px;
    width: 164px;
}
label{
    padding: 0px 0px 4px 0px;
    display:block;
}
button{
    background: #4A779D url(images/navigation.png) repeat-x scroll 0 0;
    color: #FFF;
    border:1px solid #4A779D;
    padding: 4px 10px;
    width: 180px;
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:33:06.957

修复您拥有的这两个类：

```
.dropmenu li{
    list-style: none;
    float: left;
    margin: 0px;
    padding: 0px;
} 
```

还有这个

```
.products{
    left:0;
    width: 1024px;
    padding: 0px !important;
} 
```

只是替换它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:19:33.437

试试这个

```
.products{
  width: 960px;
  margin-left:auto;
  margin-right:auto;
  float:left;
} 
```

# c# - Android 中是否有任何通过 Monodroid 开箱即用的安全存储？

> ID：14374582
> 
> 赞同：14
> 
> 时间：2013-01-17T08:07:05.697
> 
> 标签：c#, android, xamarin.android

像许多人一样 - 我正在开发一个具有共享代码库的应用程序（Windows Store + Android + MonoTouch + [后来的] WP8）。

此外，与许多应用程序一样，我需要为该应用程序保留本地状态。

我存储的一条信息是登录用户的身份验证令牌。在 Windows 应用商店平台上，我使用令牌辅助数据（用户名和发行日期）的漫游设置 ( `ApplicationData.Current.RoamingSettings`) 和`PasswordVault`实际令牌值来实现存储。因此，令牌受到操作系统级别内省的保护，因为它是由操作系统加密的。

现在我正在为我的 MonoDroid 构建实现相同的接口，但我看不到平台提供的任何方式来存储只能由我的应用程序解密的数据 - 就像可以使用密码库一样商店应用程序。

因此，目前，我只是`Android.Content.ISharedPreferences`通过方法使用接口`Application.Context.GetSharedPreferences`来读取和写入这些值。

那么我的假设是否正确，即平台（MonoDroid 或 Android）不提供安全存储 OOB？是在应用程序中实现加密的唯一替代方案 - 当然需要将加密密钥烘焙到代码中？或者我可以获取用于签署应用程序的证书并将其用作密钥吗？

最终，如果我不能加密这些数据，这不是世界末日，因为令牌无论如何*都是有时间限制的——但如果我真的能**正确地*做到这一点，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T04:36:41.093

您可以将它与[Keychain API](http://developer.android.com/reference/android/security/KeyChain.html)（从 API 级别 14 起提供）结合使用，并使用来自 Keychain api 的证书使用[Cipher API加密数据。](http://developer.android.com/reference/javax/crypto/Cipher.html)

请注意：根据 Android 安全概述文档，不能保证设备是否已植根：http: [//source.android.com/tech/security/index.html#rooting-of-devices](http://source.android.com/tech/security/index.html#rooting-of-devices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T17:47:49.483

[也许这里](https://stackoverflow.com/questions/6918262/bluetooth-out-of-band-oob-pairing-on-android/7102652#7102652)的引用可以帮助你：

> 在 android 端，公共 API 不支持 OOB，所以事情变得棘手。我相信这是因为 Honeycomb 3.2 没有正式支持 OOB 绑定的 bluez 堆栈，但 Google 有某种编码实现。我相信这是因为如果您查看蓝牙适配器和蓝牙设备类的姜饼源代码，您可以请参阅可用但未通过文档化 API 公开的 OOB 方法。
> 
> 这些方法仍然是公开的，因此您可以通过反射调用它们。使用反射，您还可以获得类中的所有方法签名。这就是我如何弄清楚我可以使用哪些方法。
> 
> 请注意，尽管许多都没有记录在案，而且有些人做了什么并不明显。需要注意的重要一点是适配器类中的 readOutOfBandData() 和设备类中的 setDeviceOutOfandData()。

# java - Mockito - 模拟具体类

> ID：14374584
> 
> 赞同：8
> 
> 时间：2013-01-17T08:07:13.913
> 
> 标签：java, unit-testing, mocking, mockito

给定以下代码：

```
 LinkedList list = mock(LinkedList.class);
    doCallRealMethod().when(list).clear();
    list.clear(); 
```

通过执行此测试，从 LinkedList#clear 的第一行抛出 NullPointerException：

```
public void clear() {
    Entry<E> e = header.next;
    while (e != header) {
        Entry<E> next = e.next;
        //Code omitted. 
```

但是之前已经实例化了**标头：**

```
private transient Entry<E> header = new Entry<E>(null, null, null); 
```

有人可以解释一下模拟创建过程中发生了什么吗？

**＃＃＃＃＃＃＃ 更新。######**

阅读了所有答案，尤其是 Ajay 的答案后，我查看了 Objenesis 源代码，发现它使用反射 API 创建代理实例（通过 CGLIB），因此绕过层次结构中的所有构造函数，直到 java.lang.Object。

这是模拟问题的示例代码：

```
public class ReflectionConstructorTest {

    @Test
    public void testAgain() {

        try {
            //java.lang.Object default constructor
            Constructor javaLangObjectConstructor = Object.class
                    .getConstructor((Class[]) null);
            Constructor mungedConstructor = ReflectionFactory
                    .getReflectionFactory()
                    .newConstructorForSerialization(CustomClient.class, javaLangObjectConstructor);

            mungedConstructor.setAccessible(true);

            //Creates new client instance without calling its constructor
            //Thus "name" is not initialized.
            Object client = mungedConstructor.newInstance((Object[]) null);

            //this will print "CustomClient" 
            System.out.println(client.getClass());
            //this will print "CustomClient: null". name is null.
            System.out.println(client.toString());

        } catch(Exception e) {
            e.printStackTrace();
        }
    }
}

class CustomClient {
    private String name;

    CustomClient() {
        System.out.println(this.getClass().getSimpleName() + " - Constructor");
        this.name = "My Name";
    }

    @Override
    public String toString() {
        return this.getClass().getSimpleName() + ": " + name;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T08:10:39.577

您只是要求 Mockito 将真实的东西称为 clear，底层对象仍然是 Mockito 为您创建的假货。如果您需要一个真正的 LinkedList，那么只需使用 LinkedList - 只有最狂热的 BDD 纯粹主义者会告诉您模拟周围的一切。我的意思是，你不是在嘲笑字符串吗？

Mockito 作者自己说过，调用真实的东西应该很少使用，通常只用于测试遗留代码。

如果您需要监视真实对象（跟踪调用），那么 Mockito 也有一个功能：

```
List list = new LinkedList();
List spy = spy(list); 
```

使用 spy，如果需要，您仍然可以存根方法。它基本上像模拟一样工作，但不是;）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T08:40:30.853

你的推理是完美的。
关键问题是您没有在实际`LinkedList`对象上进行操作。以下是幕后发生的事情：

Mockito 给您的对象是 CGLIB 库`mock()` 中的[Enhancer](http://cglib.sourceforge.net/apidocs/net/sf/cglib/Enhancer.html)对象。

对我来说，这就像`java.util.LinkedList$$EnhancerByMockitoWithCGLIB$$cae81a28`

哪种行为类似于代理，尽管字段设置为默认值。（空，0等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:13:03.607

当你模拟一个类时，你使用的对象是假的，因此变量没有实例化，方法也没有按预期工作。您可以使用反射为标头设置值，但我真的不推荐这样做。正如 theadam 所说，最好的办法就是使用一个列表。

# iphone - 如何从应用程序移至 iPhone 设置

> ID：14374588
> 
> 赞同：3
> 
> 时间：2013-01-17T08:07:32.840
> 
> 标签：iphone, ios, objective-c

我创建了一个应用程序，当用户单击 Twitter 同步按钮时，它将在手机设置中显示 Twitter 帐户的操作表如果没有任何帐户，它将显示警报视图。我如何移动到手机设置（专门创建 twitter 帐户）点击该警报 OK 按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:11:51.867

Apple 不允许通过代码执行此操作。您需要弹出一个对话框并请求用户手动执行此操作。不好看，我知道...

它曾经是可能的，但苹果现在已经阻止了它。更多细节在[iOS Launching Settings -> Restrictions URL Scheme](https://stackoverflow.com/questions/8246070/ios-launching-settings-restrictions-url-scheme)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:55:46.583

使用自定义 url 方案跳转到设置应用程序碰巧在 iOS5.1 之前工作，但从未得到官方支持。我已经提交了 DTS 以获得官方答案。

> 感谢您向 Apple 全球开发者技术支持咨询。我正在回复通知您，我已收到您的技术援助请求。
> 
> 启动设置应用程序或设置中某个屏幕的 URL 方案从未被记录或支持。从 iOS 5.1 开始，Apple 在 iOS 5.1 中删除了对链接到系统偏好设置的支持，与 iOS 6.0 相同
> 
> 如果您想要对设置的 URL 访问支持，请向“http://bugreporter.apple.com”提交错误报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:15:52.077

您可以在 iOS 5.0 上使用它：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

但是现在应用程序不再支持移动到设置应用程序。您需要编写自定义消息并提醒用户去设置并启用/关闭特定的东西。

希望这些信息对你有帮助..

# jquery - 发送带有请求标头的 cookie

> ID：14374589
> 
> 赞同：0
> 
> 时间：2013-01-17T08:07:33.220
> 
> 标签：jquery

我正在尝试将我的 cookie 发送到外部 url，但我看不到我的 cookie 未在请求标头中设置，这导致从外部服务器抛出错误

下面是代码

```
<!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <title>Hello-Test</title>
  </head>
  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
    <script src="https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js"></script>

    <script type="text/javascript">

    $(document).ready(function(){

        $.ajax({ 
            headers: { 
                "Accept ": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
                "MY_COOKIE": $.cookie("MY_COOKIE"),
            }, 
            type: "GET",
            dataType: "json",
            url: 'external_url',
            success: function(data){        
                alert(data);
            },
            error: function(error) {
                alert(error);
            }
        });

    });

    </script>
  </body>
  </html> 
```

任何想法，为什么在调用外部 url 时未在请求标头中设置 cookie，但在从浏览器尝试时正确获取数据。

谢谢，普拉茨

# c# - 当我已经有了模型和数据库时，我可以使用实体框架吗？

> ID：14374595
> 
> 赞同：2
> 
> 时间：2013-01-17T08:08:05.040
> 
> 标签：c#, .net, wpf, entity-framework-5

在我工作的 WPF 应用程序中，我已经有了我的模型和 sqlce 数据库。但是现在我使用普通的参数化查询来检索、更新或删除我的数据。

我仍然可以为此使用实体框架还是为时已晚？我的模型实现了 INotifyChangedProperty（MVVM 应用程序）。

现在我的 AddressModel 中的插入方法示例。我想使用实体框架来改变它。

```
 public int InsertNewAddress(bool isnew)
{
  IsNew = isnew;
  try
  {
    ArrayList paramList = new ArrayList();
    paramList.Add(new SqlCeParameter() { ParameterName = "@Id", Value = Id, DbType = DbType.Guid, Size = 16, Direction = ParameterDirection.Input });
    paramList.Add(new SqlCeParameter() { ParameterName = "@Street", Value = Street, DbType = DbType.String, Size = 50, Direction = ParameterDirection.Input });
    paramList.Add(new SqlCeParameter() { ParameterName = "@Number", Value = Number, DbType = DbType.String, Size = 10, Direction = ParameterDirection.Input });
    paramList.Add(new SqlCeParameter() { ParameterName = "@Bus", Value = DBNull.Value, DbType = DbType.String, Size = 5, Direction = ParameterDirection.Input });
    paramList.Add(new SqlCeParameter() { ParameterName = "@ZipCode", Value = Zipcode, DbType = DbType.String, Size = 10, Direction = ParameterDirection.Input });
    paramList.Add(new SqlCeParameter() { ParameterName = "@City", Value = City, DbType = DbType.String, Size = 50, Direction = ParameterDirection.Input });
    paramList.Add(new SqlCeParameter() { ParameterName = "@Created", Value = DateTime.Now, DbType = DbType.DateTime, Size = 23, Direction = ParameterDirection.Input });
    paramList.Add(new SqlCeParameter() { ParameterName = "@Modified", Value = DateTime.Now, DbType = DbType.DateTime, Size = 23, Direction = ParameterDirection.Input });
    paramList.Add(new SqlCeParameter() { ParameterName = "@Country", Value = Country, DbType = DbType.String, Size = 50, Direction = ParameterDirection.Input });

    StringBuilder sb = new StringBuilder();

    if (IsNew) // new address, insert
    {
      sb.Append("INSERT INTO [RF_Address] ");
      sb.Append("([Id],[Street],[Number],[Bus],[ZipCode],[City] ,[DateCreated],[DateModified], [Country]) ");
      sb.Append("VALUES ");
      sb.Append("(@Id, @Street, @Number, @Bus, @ZipCode, @City, @Created, @Modified, @Country)");
    }
    else
    {
      sb.Append("UPDATE  [RF_Address] ");
      sb.Append("SET ");
      sb.Append("[Street] = @Street, [Number] = @Number, [Bus] = @Bus, [ZipCode] = @ZipCode, [City] = @City, ");
      sb.Append("[DateModified] = @Modified,  [Country] = @Country ");
      sb.Append("WHERE [Id] = @Id");
    }

    int result = SqlCeHelper.ExecuteNonQuery(sb.ToString(), paramList);
    if (result != 1)
      throw new CustomException("Insert address failed!");

    return result;
  }
  catch (CustomException appEx)
  {
    throw new CustomException(appEx.Message, appEx);
  }
  catch (Exception ex)
  {
    throw new Exception("Error InsertNewAddress: " + ex.Message, ex);
  }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:10:21.897

是的你可以。

Entity Framework 有三个工作流：和`Database First`，所以在这三个中你可以使用`Model First``Code First``Database First`

*   [实体框架数据库优先（*附教程*）](http://msdn.microsoft.com/en-us/data/jj206878.aspx)
*   [我应该使用哪个工作流程？](http://msdn.microsoft.com/en-us/data/ee712907)

# jquery - 将 .load 转换为 .ajax

> ID：14374602
> 
> 赞同：0
> 
> 时间：2013-01-17T08:08:54.727
> 
> 标签：jquery, ajax

我正在努力将以下内容从使用 .load 转换为 .ajax ，因为我想在进行 ajax 调用后使用 ajaxComplete 来启动插件。

下面是我拥有的当前代码，当我到达一堵砖墙时，我需要一些关于如何转换它的指导。

```
$('.pbd-alp-placeholder-'+ pageNum).load(nextLink + ' .post',
            function() {

                // Update page number and nextLink.
                                    $( this ).hide().fadeIn(500);
                pageNum++;
                                    nextLink = nextLink.replace(/paged[=].[0-9]*/, 'paged='+ pageNum);

                // Add a new placeholder, for when user clicks again.
                $('#pbd-alp-load-posts')
                    .before('<div class="pbd-alp-placeholder-'+ pageNum +'"></div>')
                $.ajax({});
                // Update the button message.
                if(pageNum <= max) {
                    $('#pbd-alp-load-posts a').text('Load More Posts');
                                            $('#contentWrapper').stellar('refresh');
                } else {
                    $('#pbd-alp-load-posts a').text('No more posts to load.');
                }
            }
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:11:24.163

```
 $(element).load( url [, data ] [, complete(responseText, textStatus, XMLHttpRequest) ] ) 
```

可以转换成这个

```
$.ajax(function(){
            url:"",
            data:{},
            complete:function(responseText, textStatus, XMLHttpRequest){
           }
}); 
```

有了这个你可以一点一点地转换它=）

例子：

```
$("#myelemdiv").load("/not-here.php",{"mydata":"hellodata"} function(response, status, xhr) {

}); 
```

可以转换成这样

```
$.ajax(function(){
            url:"/not-here.php",
            data:{"mydata":"hellodata"},
            complete:function(response, status, xhr){
              $("#myelemdiv").html(response);
           }
}); 
```

# c++ - c ++ xml字符串-缺少所需的空格

> ID：14374614
> 
> 赞同：0
> 
> 时间：2013-01-17T08:09:55.693
> 
> 标签：c++, xml, string

我想对 xml 字符串进行验证。我在 C++ 中创建 xml 字符串问题是我收到错误“缺少所需的空白”。我看到这`"&#10;"`不是根据需要创建新行。您能否请教一下，如何在验证将通过的 C++ 字符串中换行？

你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:20:59.167

要在 C++ 中创建文字换行符，请编写`"\n"`.

`"&#10;"`简单地将实体写入字符串中，并且不允许 0x20 以下的实体，因此这不能替换换行符（实际上它取决于解析库；有些接受，有些不接受）。

另一件事是为什么验证需要换行符存在，因为它**不应该**。空格（包括换行符）在 XML 中要么被忽略要么是值的一部分，但绝不是句法元素。XSD 和 DTD 都不允许指定换行符，因此标​​准验证工具无法关心。

# android - 调整位图大小时Android质量差

> ID：14374617
> 
> 赞同：0
> 
> 时间：2013-01-17T08:10:07.927
> 
> 标签：android, bitmap, resize

当我在我的应用程序中调整一个图像位图的大小时，我遇到了一个问题，图像质量下降。

我的调整大小代码如下..

```
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
    Bitmap scaledBitmap = Bitmap.createBitmap(newWidth, newHeight,
            Config.ARGB_8888);

    float ratioX = newWidth / (float) bm.getWidth();
    float ratioY = newHeight / (float) bm.getHeight();
    float middleX = newWidth / 2.0f;
    float middleY = newHeight / 2.0f;

    Matrix scaleMatrix = new Matrix();
    scaleMatrix.postScale(ratioX, ratioY, middleX, middleY);

    Paint paint = new Paint();
    paint.setAntiAlias(true);
    paint.setFilterBitmap(true);
    paint.setDither(true);

    Canvas canvas = new Canvas(scaledBitmap);
    canvas.setMatrix(scaleMatrix);
    canvas.drawBitmap(bm, middleX - bm.getWidth() / 2,
            middleY - bm.getHeight() / 2, paint);
    return scaledBitmap;
} 
```

调整位图大小的任何好的解决方案¿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:32:38.487

使用此代码，希望对您有所帮助

```
 /***
 * This method is for aspect ratio means the image is set acc. to the aspect
 * ratio.
 * 
 * @param bmp
 *            bitmap passed
 * @param newWidth
 *            width you want to set for your image
 * @param newHeight
 *            hight you want to set for your image
 * @return bitmap
 */
public Bitmap resizeBitmap(Bitmap bmp, int newWidth, int newHeight) {
    Log.i(TAG,
            "height = " + bmp.getHeight() + "\nwidth = " + bmp.getWidth());
    if (bmp.getHeight() > newHeight || bmp.getWidth() > newWidth) {
        int originalWidth = bmp.getWidth();
        int originalHeight = bmp.getHeight();
        Log.i("TAG", "originalWidth = " + originalWidth
                + "\noriginalHeight = " + originalHeight);
        float inSampleSize;
        if (originalWidth > originalHeight) {
            inSampleSize = (float) newWidth / originalWidth;
        } else {
            inSampleSize = (float) newHeight / originalHeight;
        }
        newWidth = Math.round(originalWidth * inSampleSize);
        newHeight = Math.round(originalHeight * inSampleSize);
        Log.i("", "newWidth = " + newWidth + "\nnewHeight = " + newHeight);
        bitmap = Bitmap.createScaledBitmap(bmp, newWidth, newHeight, true);
    } else {
        bitmap = bmp;
        Log.i("", "bitmapWidth = " + bitmap.getWidth()
                + "\nbitmapHeight = " + bitmap.getHeight());
    }
    return bitmap;
} 
```

# jenkins - 如何在下游作业中使用刚刚创建的构建

> ID：14374621
> 
> 赞同：0
> 
> 时间：2013-01-17T08:10:12.380
> 
> 标签：jenkins, continuous-integration, jobs

我在詹金斯有 2 份工作：

1.  构建和运行单元测试
2.  （构建和）运行集成测试

*Job-2*是*Job-1*的下游项目。

*Job-1*在其上启动构建和运行单元测试。 *Job-2*也启动构建并运行集成测试。

我想改变它，**让*Job-2在**Job-1*启动的结果构建上运行测试。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:36:58.473

您可以使用[Copy Artifact Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)并使用 Job-2 中的 Job-1 工件在它们上运行一些测试。有关更多信息，请参阅此[帖子](http://www.russellallen.info.gridhosted.co.uk/post/2011/06/04/Creating-a-Simple-Build-Pipeline-with-JenkinsHudson-and-NAnt.aspx)。希望它会有所帮助。

# css - Modernizr 和后代选择器？

> ID：14374622
> 
> 赞同：1
> 
> 时间：2013-01-17T08:10:14.493
> 
> 标签：css, performance, html, modernizr

根据**[mdn](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS#Avoid_the_descendant_selector.21)**：

> 后代选择器是 CSS 中最昂贵的选择器。它是可怕的昂贵 - 特别是如果选择器处于标签或通用类别。

当 Modernizr 启动时，它会将所有不支持的类添加到`html`标签中。

这意味着他以后可以这样做：

```
.myNotSupportedClass .myLastDiv   <-- notice descendants selecotr[ ]
{
  color:red;
} 
```

但这~~绝对是一个缓慢的操作~~，一个可以优化的操作......它必须遍历所有 DOM 树才能找到 div。
我知道没有其他方法可以做到，但仍然：

1）**他们本可以**将这些类添加到`body/form`更接近元素的类中。所以搜索会减少。

还是我错了……，？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:18:20.523

> 但这*绝对是缓慢的操作*

嗯。

> **他们本可以**将这些类添加到`body/form`更接近元素的类中。所以搜索会减少。

`body`: 少了多少搜索？少1级？这有多大的不同？

`form`: 不是每个页面都有表单，页面可以有*多个*表单。元素本身也可以放置在页面正文中的`form`任何位置，因此在 Modernizr 类上下文中应受选择器影响的元素很可能与它无关，从而*完全无法*搜索。

随心所欲，但由于 Modernizr 选择在`html`元素上放置类，因此请编写使用这些类和后代选择器的上下文选择器。如果您对后代选择器性能如此着迷，那么您可以选择不使用 Modernizr 并失去它带来的所有特征检测优势。

*为什么*它选择在`html`元素上放置类是任何人的猜测。它可能是放置它们最方便的元素。

# vba - 对任务栏中打开的所有文件一一运行宏

> ID：14374631
> 
> 赞同：2
> 
> 时间：2013-01-17T08:10:49.560
> 
> 标签：vba, excel, excel-2010

我的工作是每天格式化 100 个文件。虽然我有一个为此目的而设计的宏，但我必须在保存前一个文件后对每个文件运行宏。

我的问题是我如何能够一步在这些打开的工作簿上运行我的宏。当我保存一个时，它将在队列中的另一个上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:03:46.233

[正如路人](https://stackoverflow.com/users/570812/passerby)所说，将以下宏放入“BASE”工作簿中

```
Sub SO()
    Dim macroList As Object
    Dim workbookName As String
    Dim wbFullPath
    Dim macroName As String
    Dim currentWb As Workbook
    Dim masterWb As Workbook ' the Excel file you are calling this procedure from
    Dim useWbList As Boolean
    Dim height As Long, i As Long
    Dim dataArray As Variant
    useWbList = False  ' DEFINE which input method
    Set macroList = CreateObject("Scripting.Dictionary")

    If useWbList Then
        ' you can also from the dictionary from 2 columns of an excel file , probably better for management
        With masterWb.Worksheets("Sheet1") '<~~ change Sheet1 to the sheet name storing the data
            height = .Cells(.Rows.Count, 1).End(xlUp).Row ' Assume data in column A,B, starting from row 1
            If height > 1 Then
                ReDim dataArray(1 To height, 1 To 2)
                dataArray = .Range(.Cells(1, 1), .Cells(height, 2)).Value
                For i = 1 To height
                    macroList.Add dataArray(i, 1), dataArray(i, 2)
                Next i
            Else
                'height = 1 case
                macroList.Add .Cells(1, 1).Value, .Cells(1, 2).Value
            End If
        End With
    Else
        ' ENTER THE FULl PATH in 1st agrument below,       Macro Name in 2nd argument
        ' Remember to make sure the macro is PUBLIC, try to put them in Module inside of Sheets'

        macroList.Add "C:\Users\wangCL\Desktop\Book1.xlsm", "ThisWorkbook.testing"
        'macroList.Add "FULL PATH", "MACRO NAME"
        'macroList.Add "FULL PATH", "MACRO NAME"
        'macroList.Add "FULL PATH", "MACRO NAME"
    End If

    Application.DisplayAlerts = False

    For Each wbFullPath In macroList.keys
        On Error GoTo 0
        macroName = macroList.Item(workbookName)
        workbookName = Mid(wbFullPath, InStrRev(wbFullPath, "\") + 1)
        Err.Clear
        On Error Resume Next
        Set currentWb = Nothing
        Set currentWb = Workbooks(workbookName) ' see if the workbook is already open

        If Err.Number <> 0 Then
            ' open the workbook if workbook NOT opened
            Set currentWb = Workbooks.Open(workbookName, ReadOnly:=True)
        End If
        On Error GoTo 0

        ' run the macro
        Application.Run workbookName & "!" & macroList.Item(wbFullPath)

        'close the workbook after running the macro
        currentWb.Close saveChanges:=False
        Set currentWb = Nothing
    Next wbFullPath
End Sub 
```

希望对您有所帮助，如果有任何不清楚的地方请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:15:10.617

我已经使用下面的代码解决了问题。

```
Sub OpenAllWorkbooksnew()
        Set destWB = ActiveWorkbook
        Dim DestCell As Range

        Dim cwb As Workbook
        For Each cwb In Workbooks

            **Call donemovementReport**
            ActiveWorkbook.Close True
            ActiveWorkbook.Close False
        Next cwb
    End Sub 
```

# php - SELECT 和 INSERT 如果在同一个查询中为真

> ID：14374634
> 
> 赞同：1
> 
> 时间：2013-01-17T08:11:21.017
> 
> 标签：php, mysql

是否可以先从数据库中选择，然后在同一个查询中插入数据库中的内容是否为真？

这是我现在的做法：

```
$sql = mysql_query("SELECT * FROM ".$prefix."_active_users WHERE userid = $playerid AND DATE(timestamp) = '$sel_tag'");
$row = mysql_fetch_assoc($sql);

if(!$row){
     mysql_query("INSERT INTO ".$prefix."_active_users (userid,timestamp) VALUES ($playerid,'$now')");
} 
```

希望得到帮助和感谢;-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:15:32.680

**当我阅读问题时，如果不存在行**，您想插入。

因此，在一个查询中...

```
mysql_query("

   INSERT INTO ".$prefix."_active_users (userid,timestamp)
   SELECT $playerid, '$now'
   FROM dual
   WHERE NOT EXISTS (SELECT * FROM ".$prefix."_active_users
             WHERE userid = $playerid AND   DATE(timestamp) = '$sel_tag')
    "); 
```

这与其他答案不同`INSERT.. SELECT`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:14:09.010

```
insert into YourTable
(col1, col2, ...) 
select col1, col2, ... 
where not exists
    (
    select *
    from YourTabe
    where col1 = 42
    ) 
```

# jquery - 用户确认后使用jquery重定向到新页面

> ID：14374640
> 
> 赞同：0
> 
> 时间：2013-01-17T08:11:51.517
> 
> 标签：jquery

在我的 Web 应用程序（使用 Zend 框架）中，当向数据库添加新实体时，它应该检查该实体之前是否已添加和删除。（从数据库中删除实体时，该特定记录的“STATUS”列将更新为 0（零）。）

如果实体先前已删除，系统会要求确认以编辑先前删除的记录或添加新记录。如果用户需要编辑之前添加的记录，用户应该被重定向到编辑页面。

这种检查和重定向是使用 jQuery 完成的。这是我正在使用的 jQuery 代码：

```
 $("input[name=btnSubmit]").click(function(){       

    var name = $("input[name=txtTblPrefix]").val();
        var parameters = 'name='+name;

        $.ajax({
            url: '../admin_mapping/get-id',
            async:false,
            data:parameters,
            type:'POST',
            dataType: 'text',
            success: function(data)
            {       
                var res = confirm("There is a record already added to the database for "+name+". Do you want to edit it?");

                if(res)
                {
                    window.location.replace("../admin_mapping/edit?id="+data);
                }
            }

        });

    }); 
```

在这段代码中，除了重定向之外，一切都运行良好。我已经`window.location.replace("../admin_mapping/edit?id="+data);`单独测试了这条线，它工作正常。甚至`confirm()`函数返回`true`。

我试过把一个条件放在`alert()`里面`if`，然后警报提示。但是重定向不起作用。

谁能帮我解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:28:47.043

首先确保变量数据包含您所期望的：也许它有一些标题导致调用出错（但您应该在控制台中发现它）。

如果您可以 alert() 正确的字符串，则尝试另一种方法： location 有一些安全限制（即 iframe 无法更改其容器的位置）；您可能无法在未命名的函数调用中对其进行操作，但您可能可以在超时后进行操作（它对我有用！）所以而不是

```
document.location.href='./yoururl?'+data 
```

写

```
setTimeout("document.location.href='yoururl?"+data +"';",10); 
```

这将在更广泛的范围内运行它并且应该会成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:35:37.103

我唯一需要做的就是在函数`return false`里面放一个。`submit`否则，由于按钮是提交按钮，因此表单将被提交。

# android-fragments - 如何将片段添加到我的 Tabhost 布局中

> ID：14374642
> 
> 赞同：2
> 
> 时间：2013-01-17T08:12:01.893
> 
> 标签：android-fragments

我已经下载了 ActionBarSherlock 并看到了样式化的示例代码。其中有 2 个 RoundedColourFragments。我已经看到了代码，并且能够添加和删除这些片段。但是当我尝试将它添加到我的项目中时，我没有能。我想我找不到可以添加我的片段的正确布局。我会为你提供布局，以防你能帮助我。谢谢你的时间。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp" />

            <android.support.v4.view.ViewPager
                android:id="@+id/tabviewpager"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                android:layout_marginLeft="16dp"
                android:layout_marginRight="16dp"
                android:layout_marginTop="16dp" >

            </android.support.v4.view.ViewPager>
    </LinearLayout>

</TabHost> 
```

# javascript - 知道 JavaScript 函数表达式与函数声明，但这是什么？命名函数表达式？

> ID：14374645
> 
> 赞同：27
> 
> 时间：2013-01-17T08:12:12.070
> 
> 标签：javascript, oop

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)
> [Javascript 中的函数表达式与声明有什么区别？](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)

我知道函数声明和表达式之间的区别，但是遇到了这个涉及函数名称的代码，并想了解当我们运行它时会发生什么：

```
var abc = function def() {
    console.log("Wait! What??");
} 
```

我知道这不是 JavaScript 的一种方式，但只想知道几件事：

1.  会发生什么`abc`？为什么它有效？`abc`可以调用但不能调用`def`，为什么？
2.  它是函数声明还是表达式？
3.  `def`是`undefined`——为什么？如果应该是，是否存在内存泄漏？
4.  为什么`abc.prototype`是函数`def`？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T08:27:05.403

> abc会发生什么？

它包含一个函数对象。如果你什么都不做，它将被垃圾收集。

> 为什么它有效？

为什么不？什么“有效”？

> abc 可以调用，但 def 不行，为什么？

这仅适用于外部，而不适用于 IE。见下文。

> 它是函数声明还是表达式？

它是一个函数表达式。您可以很容易地看到它是赋值表达式的一部分；声明总是需要在顶层（函数或全局代码）

> def 未定义 - 为什么？

只能从外面。函数表达式不会创建变量。“def”是函数的[名称](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name)，在函数内部也是对该函数的引用。例如，这允许在不使用任何外部变量的情况下进行递归。

```
var abc = function def() {
    def === abc; // true
    def.name; // "def"
}
abc();
def; // undefined 
```

> 如果应该是，是否存在内存泄漏？

是的，在 Internet Explorer 中。它从该代码创建两个不同的函数。有关详细信息，请参阅[http://kangax.github.com/nfe/#jscript-bugs](http://kangax.github.com/nfe/#jscript-bugs)

> 为什么 abc.prototype 是函数 def？

它不是。它只是一个对象。也许它在您的控制台中以该名称显示，属于名为“def”的函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T08:16:22.660

这是一个[命名函数表达式](http://dmitrysoshnikov.com/ecmascript/chapter-5-functions/#feature-of-named-function-expression-nfe)。一个可能的用途可能是：

```
var abc = function def() {
    def.test = 'Wait!'; //< sort of a static property
    console.log(def.test+" What??");
} 
```

但[**要小心**](http://kiro.me/blog/nfe_dilemma.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T08:16:11.843

这是一个[函数表达式](http://es5.github.com/#x13)²

函数表达式*也可以*有名称；函数表达式的名称仅在函数体¹的范围内。（由于 ECMAScript 第 5 版弃用`arguments.callee`了 ，这是编写递归“匿名”函数的唯一简单方法。）

因为它*是*一个函数表达式，所以名称*可能不会*¹在外部范围内引入新的绑定。

此外，*所有*函数都是 JavaScript 中的对象。在`f(..)`,在它被“调用”*之前*`f`被评估; 如果没有对函数求值，则会引发错误。这就是为什么回调，只是函数，可以通过变量命名并作为参数传递。*`(..)``f`*

 *另外，检查关于原型的假设/断言：

```
var abc = function def() {}
abc.prototype === abc // -> false
abc.name              // -> "def" 
```

* * *

¹见 Bergi 的回答。

²如何轻松分辨哪个是哪个？

语法规则*仅*允许`function ..`在它是[SourceElement](http://es5.github.com/#x14)时将其解析为 Function Declaration ，尽管大多数引擎仍会 [不正确地] 将 Function Declaration 解析为[Statement](http://es5.github.com/#x12)。SourceElement 产生*只*发生在程序的顶级“块”或函数的顶级“块”。

在任何情况下，只要`function ..`出现在*需要*[Expression](http://es5.github.com/#x11)的地方，它*就会*被解析为函数表达式。*全部*解析为函数表达式的示例：

```
// Can only assign values: Statements do not have values!
var f = function () {}        
var g = function gName () {}  // see Bergi's answer

// Can only pass values: Statements do not have values!
doIt(function () {})          // callback / "anonymous function"

// IIFE: Immediately-Invoked Function Expression
;(function () {})()           // standard IIFE
;(function () {} ())          // alternative standard IIFE
;+function () {} ()           // curious way to write an IIFE
// basically you can use any unary operator to turn it into an expression not only
//  + but also - ! ~ and so on which will modify the return value accordingly 
```

关键是，在上述*每*一种情况下，都`function ..`出现在*需要*表达式的语法位置，因此被解析为函数表达式。（上面行开头的分号避免了与 ASI 的“歧义”，这在像我喜欢的那样以无分号风格编写时是必需的。）

然而。`;function () {} ()`并且`;function f () {} ()`都是无效的语法 - 为什么？;-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T08:21:49.943

它是一个命名函数表达式。

与函数声明相反，函数表达式的标识符不是强制性的。

您的函数`def`不会立即被调用 - 整个函数被传递给`abc`并且需要被显式调用`abc()`。

[ES5](http://es5.github.com/#x13)规范的第 13 节说明了如何构建命名函数表达式。阅读关于如何构建命名函数表达式的第三条产生式规则。

> 注意 FunctionExpression 中的标识符可以从 FunctionExpression 的 FunctionBody 内部引用，以允许函数递归调用自身。但是，与 FunctionDeclaration 不同，FunctionExpression 中的标识符不能被引用，也不影响包含 FunctionExpression 的范围。

所有最近的浏览器都正确处理了这个，所以你不必担心内存泄漏或其他奇怪的东西（不正确的处理只在旧的 IE <=8 中）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T08:16:06.587

您的示例是（命名的）函数表达式。

两者之间的区别在于浏览器如何加载它们。

在执行任何代码**之前**加载函数声明。**仅当**解释器到达该**行**代码
时才加载函数表达式。

 ****这表示：

```
abc();
var abc = function() {
    console.log("Wait! What??");
} 
```

不会工作，但是：

```
def();
function def() {
    console.log("Wait! What??");
} 
```

将要。

现在在您的示例中，您可以访问`def`，但只能在函数本身内部访问。

```
var abc = function def() {
    console.log(def);
}
abc();

// Logs:
//function def() {
//    console.log(def);
//} 
```*****

# asp.net-mvc - Html.RenderPartial 未正确呈现视图

> ID：14374649
> 
> 赞同：0
> 
> 时间：2013-01-17T08:12:20.957
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvccontrib, mvccontrib-grid

我在我的 ASP.NET C# MVC 3 应用程序中创建了一个**MvcContrib.UI.Grid 。**我为此创建寻呼机

网格。请查看我的寻呼机代码

> @使用 MvcContrib.UI.Pager
> 
> @使用 MvcContrib.Pagination
> 
> @model IPagination
> 
> @Html.Pager(Model).First("First").Last("Last").Next("Next").Previous("Previous")

在我的视图中调用 Pager.cshtml。请看下图

![在此处输入图像描述](../Images/2d82bb2e0c7a33a21275d066edacab37.png)

但最后它的渲染就像。

![在此处输入图像描述](../Images/8182b51dd3a6ab726902e4f729925b93.png)

我一无所知。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:17:52.503

如果您正在为响应剃须刀编写`string`带有符号的普通文本，则 html 会自动为您编码。`@`

因为`Html.Pager`只返回一个包含 html 的纯`string`文本，所以您需要使用它`Html.Raw`来防止 Razor 中的自动编码：

因此，您需要将 Pager 部分视图更改为：

```
@Html.Raw(Html.Pager(Model)
              .First("First")
              .Last("Last")
              .Next("Next")
              .Previous("Previous").ToString()) 
```

# iphone - 2013年如何开始iOS编程？

> ID：14374652
> 
> 赞同：7
> 
> 时间：2013-01-17T08:12:35.930
> 
> 标签：iphone, ios

我刚刚读完 Apple 的官方指南[Programming with Objective-C](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html)。然后我试着找一些其他的书继续学习。可悲的是，几乎所有的书都过时了……那么接下来呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:17:15.350

我强烈建议参加[CS193P 斯坦福课程](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)。大约 5 个月前，我经历了整个过程。5 分钟前，我刚刚了解了课程的最后一个概念（笑）。而且我觉得我非常了解 iOS 和 iPad 的编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:18:50.467

是的，随着 Apple 发布的每个新版本的 ios，总会有更新和变化。所以，我们必须保持更新。你可以在[这里](http://www.apress.com/9781430245124)找到一本关于 IOS 6 的好书。它是由最畅销的团队编写的：Beginning iPhone Development。

# asp.net-mvc - MVC 捆绑客户端缓存

> ID：14374656
> 
> 赞同：29
> 
> 时间：2013-01-17T08:13:02.177
> 
> 标签：asp.net-mvc, asp.net-mvc-4, resourcebundle

默认情况下，MVC 包在客户端缓存 1 年。是否可以手动设置它的客户端标头（针对 1 个特定捆绑包）？

我需要为我的一个捆绑包设置自定义过期标头。我不能依赖“v=hash”查询字符串，因为这个包是用于外部网站的，每次我更改它时，他们都不会更改指向我的包的 url。

我尝试的是创建一个自定义 Bundle 类（继承 Bundle）并覆盖 GenerateBundleResponse() 方法。这样我可以控制服务器缓存，但自定义客户端缓存的唯一方法是设置 BundleResponse.Cacheability（公共、私有、nocache 等）。但我不能手动设置标题。我可以访问 BundleContext（它是 HttpContext），但是当我在该上下文上设置标头时，它也会对所有其他请求产生影响。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-05T12:39:07.937

不幸的是，没有办法。您可以在捆绑的内部实现中找到原因。在`BundleHandler`ProcessRequest 类中调用类的`ProcessRequest`内部方法，`Bundle`并在`HttpContext.Response.Write`. 因此，客户端缓存在响应写入之前设置为一年。

注意：`BundleHandler`是一个内部密封类： `internal sealed class BundleHandler : IHttpHandler`

在`BundleHandler`课堂上：

```
public void ProcessRequest(HttpContext context)
{
    if (context == null)
    {
        throw new ArgumentNullException("context");
    }
    context.Response.Clear();
    BundleContext context2 = new BundleContext(new HttpContextWrapper(context), BundleTable.Bundles, this.BundleVirtualPath);
    if (!Bundle.GetInstrumentationMode(context2.HttpContext) && !string.IsNullOrEmpty(context.Request.Headers["If-Modified-Since"]))
    {
        context.Response.StatusCode = 304;
    }
    else
    {
        this.RequestBundle.ProcessRequest(context2);
    }
} 
```

在`Bundle`课堂上：

```
internal void ProcessRequest(BundleContext context)
{
    context.EnableInstrumentation = GetInstrumentationMode(context.HttpContext);
    BundleResponse bundleResponse = this.GetBundleResponse(context);
    SetHeaders(bundleResponse, context);
    context.HttpContext.Response.Write(bundleResponse.Content);
}

private static void SetHeaders(BundleResponse bundle, BundleContext context)
{
    if (bundle.ContentType != null)
    {
        context.HttpContext.Response.ContentType = bundle.ContentType;
    }
    if (!context.EnableInstrumentation)
    {
        HttpCachePolicyBase cache = context.HttpContext.Response.Cache;
        cache.SetCacheability(bundle.Cacheability);
        cache.SetOmitVaryStar(true);
        cache.SetExpires(DateTime.Now.AddYears(1));
        cache.SetValidUntilExpires(true);
        cache.SetLastModified(DateTime.Now);
        cache.VaryByHeaders["User-Agent"] = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T02:13:15.270

ASP.NET MVC 捆绑功能的默认行为是，如果组成捆绑包的任何文件发生更改 - 该捆绑包的查询字符串将自动更改 - 假设您在视图代码中使用以下内容：

```
@Scripts.Render("bundle name") 
```

所以这意味着如果你有一个新版本的文件在一个包中，下次你的页面渲染一个使用这个包的视图时，它会发送一个脚本标签，客户端浏览器在它的缓存中找不到它（因为查询字符串不同）。

因此，这似乎可以解决您的问题-取决于您的意思：

> 每次我更改它时，他们都不会更改指向我的捆绑包的 url

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-22T12:35:32.677

似乎对我有用的是在捆绑配置中为捆绑提供一个版本号，然后在您的标记中引用新版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-24T19:04:50.720

虽然没有更好的方法来设置包的可缓存性，但您可以创建一个 HttpModule 来识别对包的请求并设置内容的可缓存性。

在 Global.asax 上执行此操作具有相同的效果：

```
 public override void Init()
    {
        this.EndRequest += MvcApplication_EndRequest;
        base.Init();
    }

    void MvcApplication_EndRequest(object sender, EventArgs e)
    {
        var request = this.Request;
        var response = this.Response;

        if (request.RawUrl.Contains("Content/"))
        {
            response.Cache.SetCacheability(HttpCacheability.NoCache);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-21T16:07:35.077

将额外的查询字符串参数传递给 url，并在每次您希望缓存刷新时更改它。

例如：[https ://www.google.co.in/?gfe_rd=cr&ei=EwJeVbHWLcX08wfgwoCoBA&gws_rd=ssl&custom=abc](https://www.google.co.in/?gfe_rd=cr&ei=EwJeVbHWLcX08wfgwoCoBA&gws_rd=ssl&custom=abc)

最后一个参数是自定义的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-13T19:33:07.887

这是对 Adilson 答案的修改，但无需创建 HttpModule：

在 MVC 项目的 global.asax.cs 中：

```
protected void Application_EndRequest(object sender, EventArgs e) {
    if (Request.RawUrl.Contains("/bundles/")) {
        // My bundles all have a /bundles/ prefix in the URL
        Response.Cache.SetExpires(DateTime.Now.AddHours(2));
    }
} 
```

# windows - 在代码中使用 DISM

> ID：14374659
> 
> 赞同：1
> 
> 时间：2013-01-17T08:13:09.940
> 
> 标签：windows, powershell, windows-8, command-prompt

我一直在寻找尝试找出是否可以以任何形式的编程语言访问 DISM 或其任何命令。我知道 DISM 可以通过 powershell 和标准命令提示符访问，但我需要从我正在开发的程序中执行这些命令。

我正在开发的程序要求我能够删除/卸载 Windows 8 应用程序。从我的在线搜索来看，DISM 似乎是最“低级”的方式。

在 powershell 中删除 Windows 8 应用程序：http: [//gallery.technet.microsoft.com/scriptcenter/Remove-Windows-Store-Apps-a00ef4a4](http://gallery.technet.microsoft.com/scriptcenter/Remove-Windows-Store-Apps-a00ef4a4)

是否可以在代码中访问 DISM 还是只是一个白日梦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T18:04:51.697

是的，API 已经存在并正在使用中（询问 Nuhi），它与 C、C++ 兼容，这里有一个链接可以帮助您入门。

[http://msdn.microsoft.com/en-us/library/windows/desktop/hh824790.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh824790.aspx)

但是 ps1 足够简单，为什么不使用 ps.invoke，更简单，代码行数更少。

```
dism /Image:c:\offline /Remove-ProvisionedAppxPackage /PackageName:Microsoft.Bing_1.2.0.137_x64__8wekyb3d8bbwe
dism /Image:c:\offline /Remove-ProvisionedAppxPackage /PackageName:Microsoft.BingFinance_1.2.0.135_x64__8wekyb3d8bbwe
dism /Image:c:\offline /Remove-ProvisionedAppxPackage /PackageName:Microsoft.BingMaps_1.2.0.136_x64__8wekyb3d8bbwe 
```

# c - 获取 HP-UX 11 中当前线程的堆栈大小

> ID：14374660
> 
> 赞同：1
> 
> 时间：2013-01-17T08:13:20.990
> 
> 标签：c, stack, hp-ux, stack-size

我正在尝试获取在 HP-UX 11.31 上运行的应用程序中当前线程的堆栈大小。

在我使用的 Linux`pthread_getattr_np`上，在 Solaris 上我可以使用`thr_stksegment`。

请帮助我，请在 C 上找到一种了解线程堆栈大小的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:41:49.297

[我在webkit 源代码](http://qt.gitorious.org/qt/webkit/blobs/ee0a43fee20cc398b505eb65218ebed56dfc8f39/src/3rdparty/webkit/JavaScriptCore/runtime/Collector.cpp)中找到了解决此问题的方法。但如果应用程序的高性能对您非常重要，则此解决方案不适合，因为创建和挂起线程是昂贵的操作。

我将`base`word替换为`size`，因为在 webkit 源代码中，我们正在寻找堆栈基数，而不是大小。示例代码：

```
struct hpux_get_stack_size_data
{
  pthread_t thread;
  _pthread_stack_info info;
};

static void *hpux_get_stack_size_internal(void *d)
{
  hpux_get_stack_base_data *data = static_cast<hpux_get_stack_size_data *>(d);

  // _pthread_stack_info_np requires the target thread to be suspended
  // in order to get information about it
  pthread_suspend(data->thread);

  // _pthread_stack_info_np returns an errno code in case of failure
  // or zero on success
  if (_pthread_stack_info_np(data->thread, &data->info)) {
    // failed
    return 0;
  }

  pthread_continue(data->thread);

  return data;
}

static void *hpux_get_stack_size()
{
  hpux_get_stack_size_data data;
  data.thread = pthread_self();
  // We cannot get the stack information for the current thread
  // So we start a new thread to get that information and return it to us
  pthread_t other;
  pthread_create(&other, 0, hpux_get_stack_size_internal, &data);
  void *result;
  pthread_join(other, &result);
  if (result)
    return data.info.stk_stack_size;

  return 0;
} 
```

# java - 如何加速 Eclipse Juno？

> ID：14374662
> 
> 赞同：6
> 
> 时间：2013-01-17T08:13:35.383
> 
> 标签：java, eclipse, performance, eclipse-juno

更新到 Eclipse Juno 后，我发现当我更改视图时它会间歇性冻结。它也变得缓慢。调整堆大小对性能没有任何积极影响。

如何提高 Eclipse 的性能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T08:13:35.383

**更新：** Eclipse Juno 的新性能版本 (SP2) 已发布。因此，如果您的 Eclipse Juno(4.2) 太慢或间歇性崩溃，则可以将其更新到 SP2。

只需转到帮助 -> 检查更新

PS 请在执行此操作之前备份您的 Eclipse 文件夹。

**原始答案：**

这是 Eclipse Juno 中的一个已知问题，并且为此发布了一个补丁。安装它可以解决性能问题 -

[http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation](http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation)

**引用**

> Juno SR2 流 (4.2.2) 中解决了几个主要的性能缺陷。社区成员已经确认，这些修复大大解决了编辑器和视图打开、关闭和切换的性能问题。这些修复将在 Juno Service Release 2（2013 年 2 月）和 Kepler（2013 年 6 月）版本中广泛提供。同时，为使用 Juno SR1 的用户提供了一个补丁，可以提前访问这些修复程序。要安装此补丁：
> 
> 确保您已经在 J​​uno SR1 版本（2012 年 9 月）的包上运行 调用帮助 > 安装新软件 选择此存储库：http: [//download.eclipse.org/eclipse/updates/4.2](http://download.eclipse.org/eclipse/updates/4.2)展开 Juno SR1 补丁并安装 Eclipse UI Juno SR1 优化 重复一遍，此补丁仅适用于 Juno SR1 版本的用户。 *如果您有 11 月 21 日或之后的 Juno SR2 维护版本，或者 Kepler 流里程碑 M4 或更高版本，则不需要此补丁。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-10T20:54:12.877

升级到 Eclipse Kepler 4.3 很简单，它比 Juno 版本快得多，因为 Eclipse 团队确实修复了性能缺陷。我个人最终在 RAM 驱动器上安装了我的整个开发环境，包括 JDK 和 Eclipse。

Eclipse 现在可以在 10 秒内启动，并且整体性能得到了显着提升。我在这里记录了我的方法：

[http://www.whizu.org/articles/how-to-install-eclipse-on-a-ramdrive.whizu](http://www.whizu.org/articles/how-to-install-eclipse-on-a-ramdrive.whizu)

# sql-server - RESTORE 后数据库正在“恢复”

> ID：14374670
> 
> 赞同：1
> 
> 时间：2013-01-17T08:14:11.643
> 
> 标签：sql-server, tsql

我尝试从 sql management studio 2012 创建的 .bak 文件恢复数据库。

```
 RESTORE DATABASE db
   FROM DISK = 'd:\abc.bak'
   WITH NORECOVERY,
   MOVE 'abc' TO 'D:\My Data\db_Data.mdf', 
   MOVE 'abc_log' TO 'd:\My data\db_Log.ldf',
   REPLACE
GO 
```

它通过但随后无法打开数据库，名称上始终显示正在恢复...状态。

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:16:38.447

数据库仍处于恢复状态，等待额外的日志恢复。使用 WITH RECOVERY 完成还原。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:16:45.737

作为恢复过程的一部分，您需要使用该`WITH RECOVERY`选项和数据库 RESTORE 命令，使您的数据库从恢复模式联机。

您还可以使用覆盖选项`WITH REPLACE`

```
RESTORE DATABASE db
   FROM DISK = 'd:\abc.bak'
   WITH REPLACE, RECOVERY
   MOVE 'abc' TO 'D:\My Data\db_Data.mdf', 
   MOVE 'abc_log' TO 'd:\My data\db_Log.ldf'
GO 
```

这是恢复数据库最有保障的方法。

# oracle - Oracle OpenScript - 无法单击链接

> ID：14374672
> 
> 赞同：1
> 
> 时间：2013-01-17T08:14:30.593
> 
> 标签：oracle, testing, automated-tests, web-testing, openscript

我正在使用 Oracle OpenScript 测试网站。

播放过程中无法单击特定链接，但在录制过程中被捕获。在某些情况下，播放期间链接会突出显示并且播放会停止。在其他情况下，不是跟随链接，而是将播放引导回上一页（在这种情况下为主页）。

我还遇到了另一个类似的情况，它在我同事的笔记本电脑上工作，但在我的笔记本电脑上却没有，所以可能是我的浏览器或 OpenScript 的设置问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:04:03.087

这里的问题是 Internet Explorer 没有放大到 100%。这会导致在 Internet Explorer 上使用 OpenScript 播放时出现一些问题。

# java - ScheduleExpression 和增量

> ID：14374673
> 
> 赞同：2
> 
> 时间：2013-01-17T08:14:46.840
> 
> 标签：java, java-ee-6

我正在尝试`ScheduleExpression`并注意到一个奇怪的行为：

如果我每 30 秒创建一个计时器

```
scheduleExpression.second("*/30"); 
```

我明白了

```
[second=*/30;minute=*;hour=*;dayOfMonth=*;month=*;dayOfWeek=*;year=*;timezoneID=null;start=null;end=null] 
```

我的计时器按预期每 30 秒（在 :00 和 :30）执行一次。到目前为止，一切都很好。

然后我尝试用分钟做同样的事情

```
scheduleExpression.minute("*/1"); 
```

正如预期的那样，我得到了

```
[second=*;minute=*/1;hour=*;dayOfMonth=*;month=*;dayOfWeek=*;year=*;timezoneID=null;start=null;end=null] 
```

但我的`@Timeout`方法被连续调用。代码完全一样，我只是在更改`ScheduleExpression`.

这是一个已知问题吗？还是我误解了文档，我必须同时设置

```
scheduleExpression.second(0);
scheduleExpression.minute("*/1"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:24:27.790

从`ScheduleExpression` [文档](http://docs.oracle.com/javaee/6/api/javax/ejb/ScheduleExpression.html)看来，您应该调用这两种方法（特别是如果您之前安排`seconds`过）。

看这个：

```
Example : ( minute = "∗/14", hour="1,2") 
```

他们同时设置`minutes`和`hours`。

# svn - SVN 修订号和时间戳

> ID：14374674
> 
> 赞同：5
> 
> 时间：2013-01-17T08:14:51.110
> 
> 标签：svn, maven, timestamp, revision, buildnumber-maven-plugin

我正在尝试在 Web 应用程序的标题栏上显示最新的 SVN 修订号和时间戳。我当前的代码显示修订号但不显示时间戳。两者都没有走到一起。我正在使用以下代码。

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>buildnumber-maven-plugin</artifactId>
  <version>1.2</version>
  <executions>

    <execution>
      <phase>validate</phase>
      <goals>
        <goal>create</goal>
      </goals>
      <configuration>
        <useLastCommittedRevision>true</useLastCommittedRevision>
      </configuration>
    </execution>

    <execution>
      <id>generate-timestamp</id>
      <phase>validate</phase>
      <goals>
        <goal>create</goal>
      </goals>
    </execution>

  </executions>
</plugin> 
```

它仅显示修订号。从jsp我正在访问这样的值

```
${initParam['build']} 
```

然后它显示修订。显示修订和时间戳所需的修改是什么。以及如何访问时间戳值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:20:43.590

我现在这样使用：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>buildnumber-maven-plugin</artifactId>
<version>1.2</version>
<executions>
    <execution>
        <phase>validate</phase>
        <goals>
            <goal>create</goal>
        </goals>
    </execution>
</executions>
<configuration>
    <format>{0} - {1,date,yyyy-MM-dd HH:mm:ss}</format>
    <items>
        <item>scmVersion</item>
        <item>timestamp</item>
    </items>
</configuration> 
```

并像这样从 jsp 访问值：

```
${initParam['build']} 
```

这首先显示 SVN 修订号，然后显示时间戳。

# prolog - 为什么 foreach 只循环一次？

> ID：14374676
> 
> 赞同：3
> 
> 时间：2013-01-17T08:14:55.903
> 
> 标签：prolog

以下代码在 SWI-Prolog 中运行：

```
?-foreach(member(X ,["1","2","3"]) ,(number_codes(Y,X),writeln(Y))).
1
false.

?- foreach(member(X ,["1","2","3"]) ,writeln(X)).
[49]
[50]
[51] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:40:58.360

[foreach /2 比](http://www.swi-prolog.org/pldoc/doc_for?object=foreach/2)[forall](http://www.swi-prolog.org/pldoc/doc_for?object=forall/2)更复杂，并且您遇到了使用的变量量化产生影响的情况。试试吧

```
?- forall(member(X, ["1","2","3"]), (number_codes(Y,X), writeln(Y))).
1
2
3 
```

真的。

似乎 foreach/2 保留了`Y`.

# mysql - 更新一个字段，另一个字段有一些条件

> ID：14374677
> 
> 赞同：0
> 
> 时间：2013-01-17T08:15:03.140
> 
> 标签：mysql, sql, sql-update

我想在任何情况下更新一行，除了一个特定字段应该在另一个有某些条件时更新。

在这种情况下，一个例子是当我想更新一篇文章时。该`articles`表有 5 个布尔列（id、标题、内容、发布日期、发布）`published`。

现在我希望在任何情况下都更新一个特定的行，但如果是真的`publishdate`应该更新。`published`我希望它在一个查询中。

有没有办法做这样的事情？

**编辑** 我想检查查询中的值`published`，而不是数据库中的值。就像是：

```
UPDATE articles SET (published AS b) = true, publishdate = (b==true? 'new date': b) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:17:04.753

```
UPDATE articles
SET publishdate = CASE WHEN published = 1 THEN <new value> ELSE publishdate END 
    [, ...]
[WHERE ...] 
```

* * *

如果您想检查参数值，那么您也可以这样做：

```
UPDATE articles
SET publishdate = CASE WHEN @published = 1 THEN <new value> ELSE publishdate END 
    [, ...]
[WHERE ...] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T08:17:11.007

你可以使用`inline IF`语句。例如

```
UPDATE articles
SET publishedDate = IF(published = 1, 'new date HERE', publishedDate)
-- WHERE condition here 
```

这假设`1 = true`，如果您将布尔值存储为字符串，那么`IF(published = 'true',...`

**更新 1**

```
-- assumes 0 = false, 1 = true
SET @status := 1;
SET @newDate := CURDATE();

UPDATE articles
SET publishedDate = IF(1 = @status, @newDate, publishedDate),
    published = @status
-- WHERE condition here 
```

# java - 实现 AsyncTask 的正确方法是什么？静态或非静态嵌套类？

> ID：14374682
> 
> 赞同：31
> 
> 时间：2013-01-17T08:15:33.840
> 
> 标签：java, android, asynchronous, android-asynctask

Android 示例中的“登录”`AsyncTask`作为非静态内部类实现。然而，根据 Commonsguys 的说法，这个类应该是静态的，并且对外部活动使用弱引用，[请参见 this](http://commonsware.com/blog/2010/09/10/asynctask-screen-rotation.html)。

那么正确的实施方式是`AsyncTask`什么？静态还是非静态？

**Commonsguy 实施**
[https://github.com/commonsguy/cw-android/tree/master/Rotation/RotationAsync/](https://github.com/commonsguy/cw-android/tree/master/Rotation/RotationAsync/)

**来自 Google 的登录示例**

```
package com.example.asynctaskdemo;

import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.annotation.TargetApi;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.text.TextUtils;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.inputmethod.EditorInfo;
import android.widget.EditText;
import android.widget.TextView;

/**
 * Activity which displays a login screen to the user, offering registration as
 * well.
 */
public class LoginActivity extends Activity {
    /**
     * A dummy authentication store containing known user names and passwords.
     * TODO: remove after connecting to a real authentication system.
     */
    private static final String[] DUMMY_CREDENTIALS = new String[] { "foo@example.com:hello", "bar@example.com:world" };

    /**
     * The default email to populate the email field with.
     */
    public static final String EXTRA_EMAIL = "com.example.android.authenticatordemo.extra.EMAIL";

    /**
     * Keep track of the login task to ensure we can cancel it if requested.
     */
    private UserLoginTask mAuthTask = null;

    // Values for email and password at the time of the login attempt.
    private String mEmail;
    private String mPassword;

    // UI references.
    private EditText mEmailView;
    private EditText mPasswordView;
    private View mLoginFormView;
    private View mLoginStatusView;
    private TextView mLoginStatusMessageView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_login);

        // Set up the login form.
        mEmail = getIntent().getStringExtra(EXTRA_EMAIL);
        mEmailView = (EditText) findViewById(R.id.email);
        mEmailView.setText(mEmail);

        mPasswordView = (EditText) findViewById(R.id.password);
        mPasswordView.setOnEditorActionListener(new TextView.OnEditorActionListener() {
            @Override
            public boolean onEditorAction(TextView textView, int id, KeyEvent keyEvent) {
                if (id == R.id.login || id == EditorInfo.IME_NULL) {
                    attemptLogin();
                    return true;
                }
                return false;
            }
        });

        mLoginFormView = findViewById(R.id.login_form);
        mLoginStatusView = findViewById(R.id.login_status);
        mLoginStatusMessageView = (TextView) findViewById(R.id.login_status_message);

        findViewById(R.id.sign_in_button).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                attemptLogin();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        getMenuInflater().inflate(R.menu.activity_login, menu);
        return true;
    }

    /**
     * Attempts to sign in or register the account specified by the login form.
     * If there are form errors (invalid email, missing fields, etc.), the
     * errors are presented and no actual login attempt is made.
     */
    public void attemptLogin() {
        if (mAuthTask != null) {
            return;
        }

        // Reset errors.
        mEmailView.setError(null);
        mPasswordView.setError(null);

        // Store values at the time of the login attempt.
        mEmail = mEmailView.getText().toString();
        mPassword = mPasswordView.getText().toString();

        boolean cancel = false;
        View focusView = null;

        // Check for a valid password.
        if (TextUtils.isEmpty(mPassword)) {
            mPasswordView.setError(getString(R.string.error_field_required));
            focusView = mPasswordView;
            cancel = true;
        }
        else if (mPassword.length() < 4) {
            mPasswordView.setError(getString(R.string.error_invalid_password));
            focusView = mPasswordView;
            cancel = true;
        }

        // Check for a valid email address.
        if (TextUtils.isEmpty(mEmail)) {
            mEmailView.setError(getString(R.string.error_field_required));
            focusView = mEmailView;
            cancel = true;
        }
        else if (!mEmail.contains("@")) {
            mEmailView.setError(getString(R.string.error_invalid_email));
            focusView = mEmailView;
            cancel = true;
        }

        if (cancel) {
            // There was an error; don't attempt login and focus the first
            // form field with an error.
            focusView.requestFocus();
        }
        else {
            // Show a progress spinner, and kick off a background task to
            // perform the user login attempt.
            mLoginStatusMessageView.setText(R.string.login_progress_signing_in);
            showProgress(true);
            mAuthTask = new UserLoginTask();
            mAuthTask.execute((Void) null);
        }
    }

    /**
     * Shows the progress UI and hides the login form.
     */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
    private void showProgress(final boolean show) {
        // On Honeycomb MR2 we have the ViewPropertyAnimator APIs, which allow
        // for very easy animations. If available, use these APIs to fade-in
        // the progress spinner.
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
            int shortAnimTime = getResources().getInteger(android.R.integer.config_shortAnimTime);

            mLoginStatusView.setVisibility(View.VISIBLE);
            mLoginStatusView.animate().setDuration(shortAnimTime).alpha(show ? 1 : 0).setListener(new AnimatorListenerAdapter() {
                @Override
                public void onAnimationEnd(Animator animation) {
                    mLoginStatusView.setVisibility(show ? View.VISIBLE : View.GONE);
                }
            });

            mLoginFormView.setVisibility(View.VISIBLE);
            mLoginFormView.animate().setDuration(shortAnimTime).alpha(show ? 0 : 1).setListener(new AnimatorListenerAdapter() {
                @Override
                public void onAnimationEnd(Animator animation) {
                    mLoginFormView.setVisibility(show ? View.GONE : View.VISIBLE);
                }
            });
        }
        else {
            // The ViewPropertyAnimator APIs are not available, so simply show
            // and hide the relevant UI components.
            mLoginStatusView.setVisibility(show ? View.VISIBLE : View.GONE);
            mLoginFormView.setVisibility(show ? View.GONE : View.VISIBLE);
        }
    }

    /**
     * Represents an asynchronous login/registration task used to authenticate
     * the user.
     */
    public class UserLoginTask extends AsyncTask<Void, Void, Boolean> {
        @Override
        protected Boolean doInBackground(Void... params) {
            // TODO: attempt authentication against a network service.

            try {
                // Simulate network access.
                Thread.sleep(2000);
            }
            catch (InterruptedException e) {
                return false;
            }

            for (String credential : DUMMY_CREDENTIALS) {
                String[] pieces = credential.split(":");
                if (pieces[0].equals(mEmail)) {
                    // Account exists, return true if the password matches.
                    return pieces[1].equals(mPassword);
                }
            }

            // TODO: register the new account here.
            return true;
        }

        @Override
        protected void onPostExecute(final Boolean success) {
            mAuthTask = null;
            showProgress(false);

            if (success) {
                finish();
            }
            else {
                mPasswordView.setError(getString(R.string.error_incorrect_password));
                mPasswordView.requestFocus();
            }
        }

        @Override
        protected void onCancelled() {
            mAuthTask = null;
            showProgress(false);
        }
    }
} 
```

如果它取决于特定情况，那么使用`ListView`从互联网加载的项目（文本+加上位图）`HttpClient`，我应该如何实现我的 AsyncTask？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T11:18:29.723

没有单一的“正确”实施方式`AsyncTask`。但这是我的两分钱：

此类旨在在 Activity 的上下文中执行“轻量级”工作。这就是为什么它在 UI 线程中运行方法`onPreExecute`, `onProgressUpdate`,`onPostExecute`以便他们可以快速访问字段和更新 GUI。任何可能需要较长时间才能完成且并非旨在更新特定活动的任务都应移至服务。

这些方法主要用于更新 GUI。由于 GUI 与 Activity 实例相关（这些字段可能声明为私有成员变量），因此将其实现`AsyncTask`为非静态嵌套类更方便。这也是我认为最自然的方式。

如果该任务将在其他活动中重用，我认为应该允许它拥有自己的类。老实说，我不喜欢静态嵌套类，尤其是内部视图。如果它是一个类，则意味着它在概念上与活动不同。如果它是静态的，则意味着它与该活动的具体实例无关。但是由于它们是嵌套的，这些类在视觉上位于父类中，使其更难阅读，并且在项目包资源管理器中可能不会被注意到，因为它只显示文件。尽管比内部类耦合少，但这并不是那么有用：如果类发生变化，您必须将整个父文件合并/提交给版本控制。如果您在哪里重复使用它，那么您将不得不在`Parent.Nested`任何地方访问它。`Parent`类，您可能想重构它并将嵌套类提取到它自己的文件中。

所以对我来说，问题是内部班与顶级班。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-17T08:33:52.660

一般来说，我会推荐静态实现（尽管两者都是可以接受的）。

Google 的方法需要更少的代码，但您的 asynctask 将与您的活动紧密耦合（这意味着不容易重用）。但有时这种方法更具可读性。

使用 CommonsGuy 方法，将需要更多的努力（和更多的代码）来解耦活动和异步任务，但最终您将拥有更模块化、更可重用的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T08:51:27.830

链接的文章已经说了

> 但是，这确实强调了您希望 AsyncTask 的 doInBackground() 与 Activity 完全分离。如果您仅在主应用程序线程上触摸您的 Activity，您的 AsyncTask 可以在方向更改后完好无损。

不要触摸 Activity（例如它的成员）`AsyncTask`，这符合[静态嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

> **静态嵌套类**
> 与类方法和变量一样，静态嵌套类与其外部类相关联。和静态类方法一样，静态嵌套类不能直接引用在其封闭类中定义的实例变量或方法——它只能通过对象引用来使用它们。

虽然，来自 Android、[AsyncTask 参考](http://developer.android.com/reference/android/os/AsyncTask.html)和[Using AsyncTask](http://developer.android.com/guide/components/processes-and-threads.html#AsyncTask)的示例仍然使用非静态嵌套类。

根据[Java中的这个静态嵌套类，为什么？](https://stackoverflow.com/q/253492/1741542)，如果真的有必要，我会首先使用*静态*内部类并仅使用非静态版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-18T21:11:43.590

我发现当您需要通过在 onProgressUpdate 中调用 runOnUiThread 来频繁更新 UI 时，非静态嵌套 Asynctask UI 更新会更快。例如，当您必须将行附加到 TextView 时。

```
non-static:
    @Override
    protected void onProgressUpdate(String... values) {
        runOnUiThread(() -> {
            TextView tv_results = findViewById(R.id.tv_results);
            tv_results.append(values[0] + "\n");
        });
    } 
```

它比为静态 AsyncTask 实现侦听器快 1000 倍。我可能错了，但这是我的经验。

```
static:
        @Override
        protected void onProgressUpdate(String... values) {
            OnTaskStringUpdatedListener.OnTaskStringUpdated(task, values[0]);
        } 
```

# iphone - 如何将结果与 Xcode 中的预定义字符串连接起来？

> ID：14374690
> 
> 赞同：-1
> 
> 时间：2013-01-17T08:16:09.340
> 
> 标签：iphone, xcode, string

我是 Xcode 的新手，我只是想将在按钮单击的两个文本框中输入的两个数字相乘：

下面是我的代码：

```
label.text=  [ [NSString alloc] initWithFormat:@"%.3f", ([firstValue.text floatValue]) * ([secondvalue.text floatValue])]; 
```

它将结果显示为它的标签，但我希望输出就像**结果是：23** 请帮助我我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:17:24.377

采用 ：

```
label.text=  [ [NSString alloc] initWithFormat:@"Result is: %.3f", ([firstValue.text floatValue]) * ([secondvalue.text floatValue])]; 
```

如果您只想要问题 23 中提到的整数部分，请使用`%.0f`甚至`%d`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:17:29.140

```
label.text =  [[NSString alloc] initWithFormat:@"Result is %.3f", ([firstValue.text floatValue]) * ([secondvalue.text floatValue])]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:20:05.500

您正在使用`%f`，因此结果将以浮点值的形式显示。例如：**结果是：23.00**

所以你需要使用`%d`而不是`%f`. 然后结果将是：**结果是 23**

```
label.text=  [NSString stringWithFormat:@"Result is: %d", ([firstValue.text floatValue] * [secondvalue.text floatValue])]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T08:26:35.957

无论你想显示什么，都必须用双引号格式写成

```
label.text=  [NSString stringWithFormat:@"Result is: %d", ([firstValue.text floatValue] * [secondvalue.text floatValue])]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T08:29:34.930

you have to use `%d` for the `integer` values, and for `float` value you can use `%f`.

# ruby-on-rails - 使用 Rails 将外部 JSON 保存到数据库

> ID：14374695
> 
> 赞同：9
> 
> 时间：2013-01-17T08:16:25.977
> 
> 标签：ruby-on-rails, json, api, sqlite, migrate

我正在使用 gem 'httparty' 对外部源进行 GET 调用；这是我的 Controller.rb：

```
def show
  response = HTTParty.get('URI')
  user = JSON.parse(response)
  user.each {|line| puts line['user']['id']}
  #the "['user']['id']" is because of the nested JSON object that is returned after the 
  parse.
end 
```

这会在我的 rails 控制台中返回正确的输出，但现在的问题是如何将 ['id'] 保存到我的数据库中？

目前，我的用户模型有 :id 和 :name; 来自外部 API 的 JSON 对象发送 :id 和 :name 以及一堆我不需要的其他信息。

```
class User < ActiveRecord::Base
   attr_accessor :id, :name
end 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T08:27:26.700

首先，我建议您为 id 创建另一列（比如说`external_id`或其他），而不是将其保存在模型的实际`id`列中`User`（该列在 ActiveRecord 中非常重要，您真的不想直接设置它）。您可以验证该列的唯一性，以确保不会将相同的用户数据导入数据库中的多个单独记录。

获得该列后，在`User`模型中创建一个类方法（我称为 mine `save_data_from_api`）以将 JSON 数据加载到数据库中：

```
class User < ActiveRecord::Base

  # optional, but probably a good idea
  validates :external_id, :uniqueness => true

  def self.save_data_from_api
    response = HTTParty.get('URI')
    user_data = JSON.parse(response)
    users = user_data.map do |line|
      u = User.new
      u.external_id = line['user']['id']
      # set name value however you want to do that
      u.save
      u
    end
    users.select(&:persisted?)
  end

end 
```

这是做什么的：

*   将 JSON 数据映射到一个块 ​​( `user_data.map`)，该块获取每个 JSON 用户和
    1.  初始化一个新用户 ( `User.new`)
    2.  为其分配 id JSON 数据 ( `line['user']['id']`)
    3.  保存新用户 ( `u.save`)，并且
    4.  返回它（`u`块中的最后一个）。
*   然后，获取结果（分配给`users`）并仅选择那些在 db ( `users.select(&:persisted?)`) 中实际存在（被持久化）的结果。例如，如果您有唯一性约束，`external_id`并且您尝试再次加载 db 数据，`u.save`将 return `false`，则不会（重新）创建记录，并且这些结果将从方法返回的结果中过滤掉。

这可能是也可能不是您想要的返回值。此外，您可能希望在`name`块中添加更多属性分配（来自 JSON 数据的 等）。我让你来填写其他细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:44:05.110

在这里，我假设您已经创建了`uri_id`用于存储外部 id 的`name`字段和用于在用户表中存储外部名称的字段。

**您的控制器代码 -**

```
def show
  response = HTTParty.get('URI')
  JSON.parse(response).each do |item|
    if (item.id != nil && item.name != nil)
       u = User.new(:uri_id => item.id, :name => item.name)
       u.save
    end
  end
end 
```

# jquery - .animate() 之后的 jQuery .removeAttr('style') 不起作用

> ID：14374703
> 
> 赞同：2
> 
> 时间：2013-01-17T08:16:55.710
> 
> 标签：jquery, html

我有以下导航

```
<nav>
   <a href="#" class="current">HOME</a>
   <a href="#">ABOUT</a><a href="#">CONTACT</a>
</nav> 
```

使用这种样式：

```
nav a {
    font-family: monospace;
    display: inline-block;
    width: 114px;
    height: 29px;
    font-size: 14px;
    line-height: 29px;
    text-align: center;
    text-decoration: none;
    color: white;
    background-color: #004870;
}
nav a {
    margin-left: 7px;
}
nav a.current{
    background-color: #585858;
    color: white;
} 
```

并希望将 BG 颜色设置为动画，`mouseover`然后再将`#585858`样式属性重新删除。`#a3a3a3``mouseleave`

我尝试了这段代码，但 style 属性仍然存在`mouseleave`：

```
$(document).ready(function() {
   $('nav a:not(.current)').mouseenter(function() {
   $(this).stop().animate( {
          backgroundColor: '#585858'
   }, 300);
});
$('nav a:not(.current)').mouseleave(function() {
$(this).stop().animate( {
    backgroundColor: '#004870'
}, 300).removeAttr('style');
    });
}); 
```

那么动画完成后需要做哪些修改来移除style属性呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T08:32:14.700

你在这里错过了一个事实，那`jQuery.animate`就是异步的，所以你`removeAttr`在动画结束之前被调用。您应该使用完整的回调来调用`removeAttr`.

您还需要[jQuery.Color()](https://github.com/jquery/jquery-color)插件`jQuery.animate`才能制作动画`background-color`。

```
var $this = $(this);
$this.stop().animate({ backgroundColor: jQuery.Color("rgb(0, 72, 112)") }, {
    duration: 300,
    complete: function() { $this.removeAttr('style') }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:26:47.283

您需要 jquery-ui 插件[来为颜色设置动画](http://jqueryui.com/animate/)。看看你的代码，包括当前的 jquery ui：http: [//jsfiddle.net/sUeBd/1/](http://jsfiddle.net/sUeBd/1/)

```
$(document).ready(function(){
  $('nav a:not(.current)').mouseenter(function(){
    $(this).stop().animate({
            backgroundColor: '#585858'
    }, 300);
  });
  $('nav a:not(.current)').mouseleave(function(){
    $(this).stop().animate({
        backgroundColor: '#004870'
    }, 300).removeAttr('style');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:27:02.457

你不能用动画改变背景颜色......如果你需要，那么你必须使用`jQuery.Color()`插件。你可以为此加载jquery ui插件

根据文档..

> 所有动画属性都应动画为单个数值，除非以下说明；大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（**例如，宽度、高度或左侧可以进行动画处理，但背景颜色不能进行动画处理，除非使用了 jQuery.Color() 插件**）。除非另有说明，否则属性值被视为像素数。可以在适用的情况下指定单位 em 和 %。

[文档](http://api.jquery.com/animate/)在这里

并[摆弄](http://jsfiddle.net/YpmXR/1/)ui 插件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T08:37:00.330

jQuery 不能为颜色设置动画，但你可以像这样添加 jQuery 插件

```
<script src="http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors-min.js"></script> 
```

[http://jsfiddle.net/gRTHv/1/](http://jsfiddle.net/gRTHv/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T09:01:43.670

`CSS3`需要`Chrome`, `Safari`, `Opera`,`Firefox 5+`或的版本`IE10`

```
nav a:not(.current) { 
    animation:navOut 1s forwards; 
}

nav a:not(.current):hover { 
    animation:navOver 1s forwards; 
}

@keyframes navOver { 
    to { background-color:#a3a3a3; } 
}

@keyframes navOut { 
    from { background-color:#a3a3a3; } 
    to { background-color:#004870;} 
} 
```

[http://jsfiddle.net/pbaris/d6msw/](http://jsfiddle.net/pbaris/d6msw/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T09:20:59.507

您可以使用 CSS 处理此事件。无需使用 java 脚本。

用这个更新你的 CSS 代码

```
nav a 
{
    font-family: monospace;
    display: inline-block;
    width: 114px;
    height: 29px;
    font-size: 14px;
    line-height: 29px;
    text-align: center;
    text-decoration: none;
    color: white;
    background:#a3a3a3;
}
nav a {
    margin-left: 7px;
}
nav a.current{
     background:#585858;
    color: white;
}
nav a:hover{
    background:#585858;
} 
```

检查这个小提琴 [http://jsfiddle.net/uTYFC/2/](http://jsfiddle.net/uTYFC/2/)

# java - Java中的冒号是什么意思？

> ID：14374707
> 
> 赞同：11
> 
> 时间：2013-01-17T08:17:16.420
> 
> 标签：java

Java中的冒号是什么意思？我有这个：

```
public static List<String> findAllAnagrams(List<String> words) {
    List<String> result = new LinkedList<String>();
    for(String i : words){
        for (String j : words){
            if (result.contains(i)) {
                break;
            }
            else if (i == j) {

            } else {
                if (areAnagrams(i,j)){
                    result.add(i);
                    System.out.println(result);
                }
            }
        }
    }          
    return result;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T08:20:40.427

这意味着一件事，它是一个增强的 for 循环。

```
for (String i: words) 
```

意思是一样的

```
for (int i = 0; i < words.length; i++) {
    //
} 
```

**Joshua Bloch**在其值得一读的《 **Effective Java** 》的第 46 条中说：

> 在 1.5 版中引入的 for-each 循环通过完全隐藏迭代器或索引变量来消除混乱和出错的机会。由此产生的习语同样适用于集合和数组：
> 
> 迭代集合和数组的首选习惯用法

```
for (Element e : elements) {
    doSomething(e);
} 
```

> 当您看到冒号 (:) 时，将其读作“in”。因此，上面的循环读作“对于元素中的每个元素 e”。请注意，使用 for-each 循环没有性能损失，即使是数组也是如此。事实上，在某些情况下，它可能比普通的 for 循环提供轻微的性能优势，因为它只计算一次数组索引的限制。虽然您可以手动完成（第 45 条），但程序员并不总是这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T08:18:48.913

```
(String i : words) 
```

对于每个项目`words`

: 将迭代器项和项指示为`i`

所以回答 - 它代表每个循环

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T08:18:57.173

[每个循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)中的冒号是语法的一部分，冒号也出现在[标签上](https://stackoverflow.com/questions/3821827/loop-in-java-code-what-is-this-why-does-it-compile-and-generally-wtf/3821841#3821841)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T06:25:36.327

它是 for-each 循环。当您看到冒号 (:) 时，将其读作“in” 您可以在 Oracle 文档中找到非常好的解释，其中包含示例，[这里](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T09:43:43.787

不要认为**冒号（:)**有什么特别的含义。这正是 Java 设计人员在改进的 for 循环中考虑如何分隔**参数**和**表达式的方式。**

```
for ( FormalParameter : Expression ) Statement 
```

检查相同的语言规范：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)

# asp.net - 如何在asp.net中拆分字符串？

> ID：14374708
> 
> 赞同：1
> 
> 时间：2013-01-17T08:17:19.333
> 
> 标签：asp.net

```
Dim arrDetails() As String = Nothing

arrDetails = "CITY: Mumbai Thane, Locality: Bhaskar Colony, Chandanwadi, State: Maharashtra" 
```

我想将此字符串拆分为

```
CITY:Mumbai Thane
Locality:Bhaskar Colony, Chandanwadi
State:Maharashtra 
```

并使用这些值将它们插入数据库（列 - 城市、地区、州）。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:23:18.807

你最好使用正则表达式。

```
^City:([\w\s]+), Locality:([\w\s,]+), State:([\w\s]+)$ 
```

捕获三个组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:28:23.473

这个想法是在拆分字符串时使用其他分隔符。试试这个：

```
string[] arr = str.Replace(", Locality:", "; Locality:").Replace(", State:", "; State:").Split(new char[] { ';' }); 
```

# javascript - jQuery：全局异常处理程序

> ID：14374719
> 
> 赞同：13
> 
> 时间：2013-01-17T08:17:55.643
> 
> 标签：javascript, jquery, web-applications, web, error-handling

> **可能重复：**
> [JavaScript 异常处理](https://stackoverflow.com/questions/205688/javascript-exception-handling)

我有一个 Web 应用程序，其中 100% 的 javascript 代码作为 jQuery 事件处理程序执行（我猜大多数 jQuery 应用程序都是这样的）。

问题是如何定义全局异常处理程序。也就是说，如果在任何 jQuery 事件处理程序中发生的任何异常未被捕获时调用的函数（无论是 onload、click、成功的 ajax 调用、ajax 错误等）。我的函数将收到错误信息（异常、堆栈跟踪等）。

**澄清：**我的意思不是全局捕获由服务器或网络生成的 ajax 问题，而是全局捕获由于（可能）我们代码中的错误引起的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T08:20:55.953

您可以使用`window.onerror`：[https ://developer.mozilla.org/en-US/docs/DOM/window.onerror](https://developer.mozilla.org/en-US/docs/DOM/window.onerror)

```
window.onerror = function errorHandler(msg, url, line) {

  console.log(arguments);

  // Just let default handler run.
  return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T08:34:10.227

我想这可以使用[面向方面编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)的概念来实现。

我们可以简单地创建一个包装器来`jQuery.event.dispatch`处理错误：

```
(function () {
    var temp = jQuery.event.handle;
    jQuery.event.handle = function () {
       try {
          temp.apply(this, arguments);
       } catch (e) {
          console.log('Error while dispatching the event.');
       }
    }
}());
$(document).click(function () {
    throw 'Some error...';
}); 
```

使用这种方法你必须非常小心，因为内部接口的变化

*   请注意，上面的示例适用于 jQuery v1.6.3，在 jQuery 1.7.1 中`jQuery.event.dispatch`而不是`jQuery.event.handle`.

# c# - TPL 中的任务排序

> ID：14374722
> 
> 赞同：0
> 
> 时间：2013-01-17T08:18:00.407
> 
> 标签：c#, asynchronous, concurrency, task-parallel-library, concurrent-programming

如果我有以下代码

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApplication3
{
    class Program
    {
        static Task<int> GetSuperLargeNumber()
        {
            var main = Task.Factory.StartNew(() =>
                                                 {
                                                     Thread.Sleep(1000);
                                                     return 100;
                                                 });
            var second = main.ContinueWith(x => Console.WriteLine("Second: " + x.Result), TaskContinuationOptions.AttachedToParent);
            var third = main.ContinueWith(x => Console.WriteLine("Third: " + x.Result), TaskContinuationOptions.AttachedToParent);

            return main.ContinueWith(x  =>
                                             {
                                                 Task.WaitAll(second, third);
                                                 return x.Result;
                                             });
        }

        static void Main(string[] args)
        {
            GetSuperLargeNumber().ContinueWith(x => Console.WriteLine("Complete"));

            Console.ReadKey();
        }
    }
} 
```

我希望 main 首先启动，然后 2 个依赖项可以在第一个和第二个并行启动之后启动。然后我想返回一个带有值的未来，供调用者添加一个延续。但是我想确保第二个和第三个先运行。下面的代码是实现这一目标的最佳方法吗？看起来有点笨重

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:58:57.847

我对TPL不太熟悉，但这不[`ContinueWhenAll`](http://msdn.microsoft.com/en-us/library/dd321473.aspx)就是为了吗？

```
static Task<int> GetSuperLargeNumber()
{
    var main = Task.Factory.StartNew(() =>
                                         {
                                             Thread.Sleep(1000);
                                             return 100;
                                         });
    var second = main.ContinueWith(
        x => Console.WriteLine("Second: " + x.Result),
        TaskContinuationOptions.AttachedToParent);
    var third = main.ContinueWith(
        x => Console.WriteLine("Third: " + x.Result),
        TaskContinuationOptions.AttachedToParent);

    return Task.Factory.ContinueWhenAll(
        new[] { second, third },
        (twotasks) => /* not sure how to get the original result here */);
    } 
```

我不知道如何从完成的和（包含在）中获取`main`'s 结果，但也许您可以修改它们以传递结果。`second``third``twotasks`

编辑：或者，正如[亚历克斯](https://stackoverflow.com/users/532057/alex)指出的那样，使用

```
Task.Factory.ContinueWhenAll(new[] { main, second, third }, (threetasks) => ... 
```

并从中读取结果`threetasks[0]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:05:14.543

这就足够了：

```
static Task<int> GetSuperLargeNumber()
{
    var main = Task.Factory.StartNew<int>(() =>
    {
        Thread.Sleep(1000);
        return 100;
    });
    var second = main.ContinueWith(x => Console.WriteLine("Second: " + x.Result), TaskContinuationOptions.AttachedToParent);
    var third = main.ContinueWith(x => Console.WriteLine("Third: " + x.Result), TaskContinuationOptions.AttachedToParent);

    Task.WaitAll(second, third);

    return main;
} 
```

# database - 为什么where子句中的无用语句会减慢sql查询速度？

> ID：14374723
> 
> 赞同：2
> 
> 时间：2013-01-17T08:18:02.160
> 
> 标签：database, oracle

我有以下两个查询：

```
SELECT cl.`cl_boolean`, l.`l_name`
FROM `card_legality` cl
LEFT JOIN `legality` l ON l.`legality_id` = cl.`legality_id`
WHERE cl.`card_id` = 23155

SELECT cl.`cl_boolean`, l.`l_name`
FROM `card_legality` cl
LEFT JOIN `legality` l ON l.`legality_id` = cl.`legality_id`
WHERE cl.`card_id` = 23155 or 1 = 2 
```

（这不是真实情况，只是显示问题）

我想知道为什么第二个这么慢（在真实情况下几乎慢了 100 倍）。

好的，下面是我的查询（oracle）：

```
select *
from LA_TESTCASE this_ 
left outer join LA_RULE   rule1_    on this_.ROOTCAUSE_RULE_ID = rule1_.ID 
left outer join LA_TEST   test2_    on this_.TEST_ID = test2_.ID 
left outer join LA_SUITE  suite3_   on test2_.SUITE_ID = suite3_.ID 
left outer join LA_RUN    run4_     on suite3_.RUN_ID = run4_.ID
where (run4_.NAME = 'RRP_XO-245'/* or 1 = 2*/)
order by this_.ID desc; 
```

它与示例案例几乎相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:16:00.337

“和样例差不多。” 实际上它一点也不像。

在第一种情况下，您正在过滤左连接的左表。在第二个中，您在查询的右侧（外部连接表）进行过滤。

在这种情况下，OR 的存在`1=2`很可能会导致全表扫描来解决它（同样，运行解释计划以查看这一点）。

但是您的查询没有任何意义，因为您是外部加入 RUN4_ ，然后在 WHERE 子句中对其进行过滤（而不是加入本身）。

```
run4_.NAME = 'RRP_XO-245' 
```

你应该整理一下查询的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:28:38.590

在这种情况下，原因是`OR`。

在第一个查询中，引擎可能会使用 card_id 上的索引。它可能使用散列连接来连接两个表。

在第二个存在`OR`导致可能存在更多可能没有card_id = 23155的行的可能性。所以，索引是没用的：它应该扫描整个表。

此外，在一般`or`情况下更难放入哈希连接，因此可能会被迫进行嵌套循环连接。

# postgresql - postgresql - 无法创建数据库 - OperationalError：其他用户正在访问源数据库“template1”

> ID：14374726
> 
> 赞同：56
> 
> 时间：2013-01-17T08:18:04.850
> 
> 标签：postgresql, postgresql-8.4

我登录到源数据库 template1，现在我无法创建数据库。当我尝试创建数据库时，出现此错误：

```
OperationalError: source database "template1" is being accessed by other users
DETAIL:  There are 5 other session(s) using the database. 
```

每次登录到 template1 时，我都会使用“exit”命令注销，但正如您所见，它不会注销，并且每次登录时会话数都会增加。有没有办法强制断开与现在登录的 template1 的每个连接？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-17T08:25:34.533

数据库[`template1`](http://www.postgresql.org/docs/9.2/static/manage-ag-templatedbs.html)的存在只是为了提供准系统结构来创建另一个空数据库。千万*不要*登录`template1`，否则会有问题。

对您来说最简单的解决方案可能是重新启动 PostgreSQL 服务器进程，然后再次登录。应该始终存在并且可以安全登录的数据库是`postgres`.

如果重新启动不是一个选项，您可以使用另一个紧急模板数据库：`template0`.

默认情况下，此语句：

```
CREATE DATABASE dbname; 
```

相当于：

```
CREATE DATABASE dbname TEMPLATE template1; 
```

如果`template1`不可用或损坏，您可以使用`template0`作为最后的手段：

```
CREATE DATABASE dbname TEMPLATE template0; 
```

[您可以在此处](http://www.postgresql.org/docs/9.2/static/manage-ag-templatedbs.html)阅读有关模板数据库的更多信息。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-17T09:27:36.660

这帮助我解决了我的问题：

```
SELECT *, pg_terminate_backend(procpid) 
FROM pg_stat_activity 
WHERE usename='username';

--Use pid if PostgreSQL version 9.2 or above. 
```

我终止了与 template1 的所有活动连接，并且可以正常创建数据库

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-05-14T10:23:21.393

您也可以尝试通过终端终止当前进程线程

**搜索过程：**

```
sudo ps aux | grep template1 
```

**杀死进程：**

sudo kill -9 <你的进程ID>

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-07-28T16:25:56.697

为了解决这个问题，我必须从 pgAdmin III 断开数据库连接。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-22T00:44:33.533

我有一个连接到数据库并对其执行各种操作的脚本，其中一些要求没有其他人登录。我修改了@Andrius 的答案，不是终止我的脚本的连接，而是终止其他人的：

```
SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE pid <> pg_backend_pid(); 
```

来自[文档](https://www.postgresql.org/docs/9.5/static/functions-info.html)：`pg_backend_pid()`是附加到当前会话的服务器进程的进程 ID。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-06-16T10:05:18.127

1.  进入 pgAdmin
2.  右键单击服务器
3.  断开服务器
4.  再次连接服务器
5.  做你想做的事

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-01-05T01:26:37.747

如果您使用的是 PgAdminn，您可以手动设置图像中提供的定义。

[![在此处输入图像描述](../Images/925f51d2160277d61f035285a6a946e7.png)](https://i.stack.imgur.com/m7efT.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-01T07:42:44.367

当您在 template1 和 template0 数据库中登录（ **psql template1**或**psql template0 ）并使用以下命令退出时，会出现此问题。**

**Ctrl + z**

在 postgres 命令下使用 db 存在更好的方法，那么问题将不会产生：

**\q + 输入**

有2个解决方案，如果有问题。

**解决方案 - 1**

重启 posgres 服务之类的。

sudo service postgresql 重启

**解决方案 - 2**

须藤ps辅助| grep 模板1

**确保不要删除此进程**

postgres 8363 0.0 0.0 111760 7832 pts/11 T 09:49 0:00 /usr/lib/postgresql/9.5/bin/psql template1 ankit 18119 0.0 0.0 14224 976 pts/14 S+ 12:33 0:00 grep --color=自动模板1

其余进程应使用以下命令终止。

须藤杀 -9

现在尝试再次创建数据库。

希望这对您有所帮助。

安基特 H 甘地。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-30T15:56:51.557

如果您使用**pgadmin4**或类似工具，请确保它`create database`自己运行或已关闭。

我用 pgadmin4 生成了一个`create database`，然后使用它的脚本功能来导出它使用的脚本，然后我复制并更改它以将其放入我自己的自动化脚本中。

问题是活动网页 pgadmin 以某种方式结束了 database `template1`。

停止和重新启动服务器本身并没有解决任何问题，pgadmin 足够聪明，可以在它恢复后立即重新连接到服务器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-16T14:17:22.353

在 Windows 上，我不得不重新安装 PostgreSQL，重启没有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-29T22:57:51.717

如果你转到侧面板，浏览器，服务器，数据库，那么右边是数据库的摘要......这里注意，有一个按右键找到删除数据库的下拉菜单，所以如果确定，请摆脱现有数据库，并创建一个新数据库，以便您可以声明对新创建的数据库的所有权

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-20T13:00:18.923

在窗户里。关闭图形用户界面。从 psql 命令提示符执行此操作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-25T23:54:55.793

我遇到了同样的问题，但在谷歌搜索后，我了解到我与（**postgis_30_sample**）数据库（我想从中复制的模板）建立了连接。当我在 Geo Server 应用程序中创建一些商店时，此连接是由**GeoServer创建的。**

所以我停止了服务，问题得到了解决！ [![在此处输入图像描述](../Images/8087ddd14b82275e1705b187f4d9ece2.png)](https://i.stack.imgur.com/xyTxb.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-26T13:09:13.707

我有同样的问题：错误：其他用户正在访问源数据库“template1”详细信息：还有 1 个其他会话正在使用该数据库。

我通过单击 PostgreSQL 13 的左列解决了 postgreSQL 13 中的问题，其中显示了一些图表的表格。我对服务器活动表感兴趣，在这里我找到了包含单词 template1 的一行，我用叉号将其关闭，然后在这里重新启动应用程序，一切正常。

[错误：模板1已解决](https://i.stack.imgur.com/OutKK.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-04T00:45:35.770

如果您使用 Docker，则必须在 sequelize 配置中将主机设置为 '0.0.0.0' 而不是 'localhost'。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-02-17T19:12:31.107

您可以尝试重新启动后台运行的 postgresql 服务。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-08-09T16:28:49.967

我已经通过重新连接到服务器解决了这样的问题（pgAdmin -> 断开连接 -> 连接）

# android - 如何在多维字符串数组中动态存储数据

> ID：14374727
> 
> 赞同：0
> 
> 时间：2013-01-17T08:18:18.053
> 
> 标签：android, string, multidimensional-array

我有一个与动态存储数据相关的问题`two Dimensional String Array`，`String[][]`. 我在`String[i][j]`数组中动态存储数据。这里第一个索引的值是固定的，即`i=3`，但第二个索引的值对于所有行都是不同的。

例如，我得到这样的值，

```
String arrElements[][] = {
        {"1"},
        {"abc", "xyz", "lkm", "pwd", "srt", "qwert"},
        {"1234", "3456"}
        }; 
```

我得到这样的价值观。即第一行只有一个值，第二行和第三行有任意数量的值。

如果我这样走，

```
 int i = 0, j = 0;
    String arrElements[][] = {};
    arrElements= new String[3][25];
            //What size should I define here.
    arrElements[0][0] = "Sahil";
    if (a == 0) { //Its just a logical representation of what I might be doing.
        // Store the value in second row
        arrElements[1][i] = a;
        i++;
    }
    if (a == 1) {
        // Store the value in third row
        arrElements[2][j] = a;
        j++;
    } 
```

现在，我将这些值设置在`expandable list View`. 如果任何行中的值的数量超过指定的大小，则给出`ArrayOutOfBoundException`. 如果大小小于 25，则显示空行。

现在，我不想为数组索引提供硬编码大小限制。有没有更好的方法来处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:24:53.980

你可以使用任何你喜欢的数据结构。

在`ExpandableListAdapter`传递给视图的 中，只需确保从`getGroupCount`和中返回正确的值`getChildrenCount`。在`getGroup`and`getChild`中，从您使用的任何支持结构（数据库游标、列表、列表列表等）返回适当的数据。

这种类型列表的一个有用结构是`Map<GroupData, List<ChildData>>`. 这可能就像`HashMap<String, ArrayList<String>>`项目文本是您拥有的唯一数据一样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:29:08.027

作为第一句话：您确定 a`String[][]`是您想要实现的正确数据结构吗？有一大堆`Collection`类可能更合适（`ArrayList`举个最明显的例子）。

如果你真的想继续，`String[][]`你不能预先定义子数组的长度，但必须每行声明它：

```
String[][] foo = new String[4][];
foo[0] = new String[1];
foo[1] = new String[2];
// .... 
```

`ArrayList`但正如我所说，您可能会对动态调整大小的嵌套更满意：

```
ArrayList<ArrayList<String>> foo = new ArrayList<ArrayList<String>>();
// Do the following for each row
foo.add(new ArrayList<String>>());
// Do the following to append data in row i
foo.get(i).add("new string");
// Do the following to retrieve column j in row i
foo.get(i).get(j); 
```

根据您实际想要存储的内容，其他数据结构可能更适合。

# java - Apache FOP 1.0 多线程 - 打开的文件太多 err24

> ID：14374729
> 
> 赞同：1
> 
> 时间：2013-01-17T08:18:27.597
> 
> 标签：java, apache, apache-fop

我们使用 Apache FOP 将大量 XML 转换为 AFP 和 PDF。我们当前的负载将是在 HP-UX 系统上每次运行大约 25k 个文件。我们总共有 8 个线程，用于以生产者-消费者的方式初始化和触发 FOP 转换。最近在转换过程中出现了多次失败，在查找时，我们收到了一般的 FOP 错误，例如：

```
**ERROR,2460364,FOToPDF_Thread_11,FOP Exception, something.pdf,Failed to resolve font with embed-url './Fonts/arial.ttf'** 
```

或者它的错误未能加载字体度量文件，尽管文件是完整的并具有正确的权限。生成了许多其他 PDF，因此这不是问题。

我们还结束了：

```
**java.io.FileNotFoundException: /PDF/20130111130002/something.pdf (Too many open files (errno:24))** 
```

从正在处理的日志和卷来看，这看起来像是一个 FOP 问题。我读过 FOP 过去曾在字体文件中遇到过这个问题。在某些情况下，Apache 多次打开每个字体文件但未关闭句柄，从而导致大量打开的文件。这应该是固定的，但如果它仍然存在，除了将它发布在 Apache 列表上之外，还有什么好的快速解决方案呢？

可以将每个进程的打开文件描述符的 HP-UX 最大文件数限制增加到 2048 以上吗？那会有帮助吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:33:53.340

我已经检查了 FOP 源代码。有一个名为 FontFileReader 的类，用于读取真字体。该类有两个构造函数，如下所示：

```
/**
 * Constructor
 *
 * @param fileName filename to read
 * @throws IOException In case of an I/O problem
 */

public FontFileReader(String fileName) throws IOException {
    final File f = new File(fileName);
    InputStream in = new java.io.FileInputStream(f);
    try {
        init(in);
    } finally {
        in.close();
    }
}

/**
* Constructor
*
* @param in InputStream to read from
* @throws IOException In case of an I/O problem
*/
public FontFileReader(InputStream in) throws IOException {
    init(in);
} 
```

正如您在上面的第二个构造函数中看到的那样，输入流没有关闭，但在上面的构造函数中它是显式关闭的。

还有另一个名为 TTFFontLoader 的类将 ttf 字体加载到内存中，该类使用第二个构造函数（突出显示）来读取字体文件，所以我认为这就是为什么流保持打开状态并且必须达到打开的进程范围限制文件句柄并给出“打开的文件太多”错误。

自从在当前主干版本的 FOP 代码中重构 FOP 字体子系统后，此问题已得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:00:46.803

Apache FOP 项目的相关问题是

[https://issues.apache.org/jira/browse/FOP-2189](https://issues.apache.org/jira/browse/FOP-2189)

正如我在那里评论的那样，我无法在 FOP 1.0 中识别任何打开的文件句柄。接受 InputStream 参数的 FontFileReader 的构造函数确实没有关闭它，但是调用者（创建流的）正在关闭它，参见第 94-106 行

[http://svn.apache.org/repos/asf/xmlgraphics/fop/tags/fop-1_0/src/java/org/apache/fop/fonts/truetype/TTFFontLoader.java](http://svn.apache.org/repos/asf/xmlgraphics/fop/tags/fop-1_0/src/java/org/apache/fop/fonts/truetype/TTFFontLoader.java)

# php - 通过 php://input 读取 UTF-8 SOAP 请求

> ID：14374730
> 
> 赞同：2
> 
> 时间：2013-01-17T08:18:29.930
> 
> 标签：php, post, soap, raw-post

我正在为一个与它交谈 SOAP 的外部节点开发一个简单的侦听器。除了简单的请求之外，节点还发送 MultiPart 消息，因此不允许我使用任何 PHP SOAP 库（如果您知道任何处理 MultiPart 消息的方法，请告诉我）并迫使我处理来自请求的原始数据体，即`php://input`。没有问题，除了 UTF-8 支持。

PHP 目前非常简单：

```
mb_internal_encoding('UTF-8');
echo file_get_contents('php://input'); 
```

例如，当`ñ`向节点发送时，节点将向侦听器发送以下内容：

```
...
<message>}</message>
... 
```

另一个例子是拉丁字符，例如`č ć š đ ž Č Ć Š Đ Ž`发送为

```
...
<message>c c s d z C C S D Z</message>
... 
```

tcpdump 显示请求以 UTF-8 格式发送，但 XML 仍然包含无效字符：

```
POST /endpoint HTTP/1.0
Content-Type: text/xml; charset=UTF-8
SOAPAction: ""
User-Agent: Axis2
Host: IP:PORT
Content-Length: 1196

<?xml version='1.0' encoding='UTF-8'?>
...
<message>}</message>
... 
```

假设节点正确编码数据，我该怎么做才能找出问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:37:48.923

经过几个测试会话，确定节点没有发送 UTF-8 编码的数据，即使请求本身是以 UTF-8 发送的。没有ETA何时修复:(

然而，好消息`php://input`可以正确处理 UTF-u！

# php - 有什么方法可以打印出 Nagios 服务 UP 时间百分比？

> ID：14374732
> 
> 赞同：3
> 
> 时间：2013-01-17T08:18:36.707
> 
> 标签：php, monitoring, nagios

有没有打印出 Nagios 服务/主机启动时间百分比？例如 PHP 类、命令行工具或...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:51:50.580

使用 Nagios::Report Perl 模块生成总时间百分比报告服务 OK [http://metacpan.org/pod/Nagios::Report](http://metacpan.org/pod/Nagios::Report)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T11:57:41.100

参考这个`Perl`脚本：

[https://github.com/MangeshBiradar/Check_mk/blob/master/nagios_report.pl](https://github.com/MangeshBiradar/Check_mk/blob/master/nagios_report.pl)

希望这可以回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T12:11:17.220

我使用 Curl 来获取 Nagios CGIs 内容和[PHP DomDocument 类](http://www.php.net/manual/en/class.domdocument.php)来获取正常运行时间。

# javascript - Dojo 滑块递增/递减

> ID：14374740
> 
> 赞同：0
> 
> 时间：2013-01-17T08:18:57.447
> 
> 标签：javascript, slider, dojo

我已经实现了一个用于在 html 画布上更改图像的 dojo 滑块。如果滑块增加，我们调用 showNextImage，如果滑块减少，我们调用 showPrevImage。如何实施？我尝试使用 onChange 函数，但无法从滑块中获取旧值。

```
 var slider = new dijit.form.HorizontalSlider({
        name: "slider",
        value: 0,
        minimum: 0,
        maximum: 10,
        discreteValues: 11, 
        intermediateChanges: true,
        style: "width:300px;",
        class:"dhSlider",
        disabled:false, 
        container: viewportWrapper,

        onChange: function(value) {

            var valueNew = a;

            if(value > valueNew)
            console.debug(valueNew);

            var a = value;
        }
    }); 
```

为了简化：我只想要一个函数来告诉我滑块值是增加还是减少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:01:18.310

让它与全局变量一起工作。

```
 valueNew = 0;

    var slider = new dijit.form.HorizontalSlider({
        name: "slider",
        value: 0,
        minimum: 0,
        maximum: 10,
        intermediateChanges: true,
        style: "width:+ width + px",
        class: "dhSlider",
        disabled: false,
        container: viewportWrapper,
        onChange: function(value) {

            if (value > valueNew)
                console.debug("Up");
            else if (value < valueNew)
                console.debug("Down");

            valueNew = value;
        }
    }); 
```

# ruby-on-rails-3 - Rails 迁移创建表

> ID：14374741
> 
> 赞同：0
> 
> 时间：2013-01-17T08:19:08.740
> 
> 标签：ruby-on-rails-3, rake, database-migration

我在rails中有一个非常简单的迁移脚本，

```
class CreateGeocode < ActiveRecord::Migration
def up
  create_table :geocodes do |t|      
    t.string :zip_code, :null => false
    t.float :latitude
    t.float :longitude
    t.string :country_code
    t.timestamps      
  end
end

def down
    drop_table :geocodes
end
end 
```

当我将此迁移到数据库时。它创建一个名称为地理编码的表。现在，当我尝试在其中插入一条记录时，

```
 g = Geocode.new(:zip_code => '27606')
 g.save 
```

通过rails控制台，这是我得到的结果，

```
mysql> select * from geocodes;

+-------+----------+----------+-----------+--------------+---------------------+---------------------+ 
| id    | zip_code | latitude | longitude | country_code | created_at          | updated_at          |
+-------+----------+----------+-----------+--------------+---------------------+---------------------+ 
| 27606 | 27606    |     NULL |      NULL | NULL         | 2013-01-17 08:10:34 | 2013-01-17 08:10:34 |
+-------+----------+----------+-----------+--------------+---------------------+---------------------+ 
1 row in set (0.00 sec) 
```

为什么 id 与 zipcode 的值相同？

有什么猜测吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:42:45.773

我想自己回答，因为我在代码中发现了错误。

不小心我将 zip_code 设置为模型中的主键。这就是发生这种情况的原因。

那是我的错误。Rails 将 zip_code+id 作为主键，并为 id 和 zip_code 设置相同的值。

# java - Android应用程序意外崩溃

> ID：14374745
> 
> 赞同：4
> 
> 时间：2013-01-17T08:19:31.317
> 
> 标签：java, android

Android 应用程序初学者遇到一些应用程序无法打开的问题。今晚才开始使用它。eclipse中的代码没有显示错误。就在我尝试从模拟器运行它时意外关闭。

**主要来源**：包 com.example.solidshellsecurity；

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.content.Intent;
import android.net.Uri;
import android.util.Log;
import android.view.View;

public class MainActivity extends Activity {
    public static final String TAG = "SolidShellSecurity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void processClick(View display) {
        int id = display.getId();
        switch (id) {
            case (R.id.displayWebsite):
                Log.i(TAG, "Loading SolidShellSecurity website");
                Intent website = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.solidshellsecurity.com"));
                startActivity(website);
                break;
            case (R.id.communityDisplay):
                Log.i(TAG, "Loading SolidShellSecurity Community");
                Intent community = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.community.solidshellsecurity.com"));
                startActivity(community);
                break;
            default:
                break;

        }
    }

} 
```

**XML**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/sssbd"
    tools:context=".MainActivity" >

    <ImageButton
        android:id="@+id/displayWebsite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginRight="14dp"
        android:layout_marginTop="80dp"
        android:layout_toLeftOf="@+id/multiAutoCompleteTextView1"
        android:onClick="processClick"
        android:src="@drawable/ic_launcher" />

    <MultiAutoCompleteTextView
        android:id="@+id/multiAutoCompleteTextView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/displayWebsite"
        android:ems="10"
        android:text="Website" >

        <requestFocus />
    </MultiAutoCompleteTextView>

    <ImageButton
        android:id="@+id/communityDisplay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/displayWebsite"
        android:layout_below="@+id/displayWebsite"
        android:layout_marginTop="20dp"
        android:onClick="processClick"
        android:src="@drawable/ic_launcher" />

    <AutoCompleteTextView
        android:id="@+id/autoCompleteTextView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/communityDisplay"
        android:layout_alignParentRight="true"
        android:ems="10"
        android:text="Open Community" />

</RelativeLayout> 
```

**错误日志**：

```
01-17 08:12:52.383: W/Trace(880): Unexpected value from nativeGetEnabledTags: 0
01-17 08:12:52.413: W/Trace(880): Unexpected value from nativeGetEnabledTags: 0
01-17 08:12:52.853: D/dalvikvm(880): GC_FOR_ALLOC freed 47K, 7% free 2514K/2680K, paused 67ms, total 78ms
01-17 08:12:53.174: I/dalvikvm-heap(880): Grow heap (frag case) to 18.191MB for 16384016-byte allocation
01-17 08:12:53.274: D/dalvikvm(880): GC_FOR_ALLOC freed 1K, 1% free 18512K/18684K, paused 96ms, total 96ms
01-17 08:12:53.393: D/dalvikvm(880): GC_CONCURRENT freed <1K, 1% free 18512K/18684K, paused 14ms+20ms, total 119ms
01-17 08:12:54.433: D/dalvikvm(880): GC_FOR_ALLOC freed <1K, 1% free 18512K/18684K, paused 23ms, total 23ms
01-17 08:12:54.433: I/dalvikvm-heap(880): Forcing collection of SoftReferences for 36864016-byte allocation
01-17 08:12:54.483: D/dalvikvm(880): GC_BEFORE_OOM freed 9K, 1% free 18502K/18684K, paused 44ms, total 45ms
01-17 08:12:54.483: E/dalvikvm-heap(880): Out of memory on a 36864016-byte allocation.
01-17 08:12:54.483: I/dalvikvm(880): "main" prio=5 tid=1 RUNNABLE
01-17 08:12:54.483: I/dalvikvm(880):   | group="main" sCount=0 dsCount=0 obj=0x40a719a0 self=0x2a00bba8
01-17 08:12:54.483: I/dalvikvm(880):   | sysTid=880 nice=0 sched=0/0 cgrp=apps handle=1073849308
01-17 08:12:54.483: I/dalvikvm(880):   | state=R schedstat=( 1580552179 1052425085 177 ) utm=126 stm=32 core=0
01-17 08:12:54.483: I/dalvikvm(880):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
01-17 08:12:54.483: I/dalvikvm(880):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
01-17 08:12:54.493: I/dalvikvm(880):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
01-17 08:12:54.493: I/dalvikvm(880):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
01-17 08:12:54.493: I/dalvikvm(880):   at android.content.res.Resources.loadDrawable(Resources.java:1965)
01-17 08:12:54.493: I/dalvikvm(880):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-17 08:12:54.493: I/dalvikvm(880):   at android.view.View.<init>(View.java:3328)
01-17 08:12:54.493: I/dalvikvm(880):   at android.view.View.<init>(View.java:3257)
01-17 08:12:54.493: I/dalvikvm(880):   at android.view.ViewGroup.<init>(ViewGroup.java:425)
01-17 08:12:54.493: I/dalvikvm(880):   at android.widget.RelativeLayout.<init>(RelativeLayout.java:210)
01-17 08:12:54.493: I/dalvikvm(880):   at java.lang.reflect.Constructor.constructNative(Native Method)
01-17 08:12:54.493: I/dalvikvm(880):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-17 08:12:54.493: I/dalvikvm(880):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
01-17 08:12:54.493: I/dalvikvm(880):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-17 08:12:54.493: I/dalvikvm(880):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-17 08:12:54.503: I/dalvikvm(880):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-17 08:12:54.503: I/dalvikvm(880):   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-17 08:12:54.503: I/dalvikvm(880):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-17 08:12:54.503: I/dalvikvm(880):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-17 08:12:54.503: I/dalvikvm(880):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-17 08:12:54.503: I/dalvikvm(880):   at android.app.Activity.setContentView(Activity.java:1881)
01-17 08:12:54.503: I/dalvikvm(880):   at com.example.solidshellsecurity.MainActivity.onCreate(MainActivity.java:18)
01-17 08:12:54.503: I/dalvikvm(880):   at android.app.Activity.performCreate(Activity.java:5104)
01-17 08:12:54.503: I/dalvikvm(880):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-17 08:12:54.513: I/dalvikvm(880):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-17 08:12:54.513: I/dalvikvm(880):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-17 08:12:54.513: I/dalvikvm(880):   at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-17 08:12:54.513: I/dalvikvm(880):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-17 08:12:54.513: I/dalvikvm(880):   at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 08:12:54.513: I/dalvikvm(880):   at android.os.Looper.loop(Looper.java:137)
01-17 08:12:54.513: I/dalvikvm(880):   at android.app.ActivityThread.main(ActivityThread.java:5039)
01-17 08:12:54.513: I/dalvikvm(880):   at java.lang.reflect.Method.invokeNative(Native Method)
01-17 08:12:54.523: I/dalvikvm(880):   at java.lang.reflect.Method.invoke(Method.java:511)
01-17 08:12:54.523: I/dalvikvm(880):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-17 08:12:54.523: I/dalvikvm(880):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-17 08:12:54.523: I/dalvikvm(880):   at dalvik.system.NativeStart.main(Native Method)
01-17 08:12:54.523: D/skia(880): --- allocation failed for scaled bitmap
01-17 08:12:54.533: D/AndroidRuntime(880): Shutting down VM
01-17 08:12:54.533: W/dalvikvm(880): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-17 08:12:54.563: E/AndroidRuntime(880): FATAL EXCEPTION: main
01-17 08:12:54.563: E/AndroidRuntime(880): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.solidshellsecurity/com.example.solidshellsecurity.MainActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.os.Looper.loop(Looper.java:137)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-17 08:12:54.563: E/AndroidRuntime(880):  at java.lang.reflect.Method.invokeNative(Native Method)
01-17 08:12:54.563: E/AndroidRuntime(880):  at java.lang.reflect.Method.invoke(Method.java:511)
01-17 08:12:54.563: E/AndroidRuntime(880):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-17 08:12:54.563: E/AndroidRuntime(880):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-17 08:12:54.563: E/AndroidRuntime(880):  at dalvik.system.NativeStart.main(Native Method)
01-17 08:12:54.563: E/AndroidRuntime(880): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.LayoutInflater.createView(LayoutInflater.java:613)
01-17 08:12:54.563: E/AndroidRuntime(880):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-17 08:12:54.563: E/AndroidRuntime(880):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.app.Activity.setContentView(Activity.java:1881)
01-17 08:12:54.563: E/AndroidRuntime(880):  at com.example.solidshellsecurity.MainActivity.onCreate(MainActivity.java:18)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.app.Activity.performCreate(Activity.java:5104)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-17 08:12:54.563: E/AndroidRuntime(880):  ... 11 more
01-17 08:12:54.563: E/AndroidRuntime(880): Caused by: java.lang.reflect.InvocationTargetException
01-17 08:12:54.563: E/AndroidRuntime(880):  at java.lang.reflect.Constructor.constructNative(Native Method)
01-17 08:12:54.563: E/AndroidRuntime(880):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.LayoutInflater.createView(LayoutInflater.java:587)
01-17 08:12:54.563: E/AndroidRuntime(880):  ... 23 more
01-17 08:12:54.563: E/AndroidRuntime(880): Caused by: java.lang.OutOfMemoryError
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.content.res.Resources.loadDrawable(Resources.java:1965)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.View.<init>(View.java:3328)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.View.<init>(View.java:3257)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.view.ViewGroup.<init>(ViewGroup.java:425)
01-17 08:12:54.563: E/AndroidRuntime(880):  at android.widget.RelativeLayout.<init>(RelativeLayout.java:210)
01-17 08:12:54.563: E/AndroidRuntime(880):  ... 26 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:51:31.040

你有大图像

```
01-17 08:12:54.563: E/AndroidRuntime(880): Caused by: java.lang.OutOfMemoryError 
```

导致您内存不足的错误按比例缩小图像您可以使用以下代码段

```
public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

# css - CSS：标准化连续缩略图之间的空间

> ID：14374748
> 
> 赞同：0
> 
> 时间：2013-01-17T08:19:37.570
> 
> 标签：css

我有一个 780 像素宽度的容器，我想每行放置 4 个缩略图（我有多行）。

如何标准化缩略图之间的空间，以便连续的第一个和第四个缩略图粘在容器的“墙壁”上？

我的代码：

```
<ul class="thumbnails">
    <li class="card package">Image</li>
    <li class="card package">Image</li>
    <li class="card package">Image</li>
    <li class="card package">Image</li>
    <li class="card package">Image</li>
    <li class="card package">Image</li>
    <li class="card package">Image</li>
    <li class="card package">Image</li>
   ...and so on
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:39:50.360

使用 css3 削减每 4 个元素的边距

```
li.card { 
  margin: 0 10px 10px 0;
}
li.card:nth-child(4n) {
  margin-right:0px;
} 
```

看到这个[jsfiddle](http://jsfiddle.net/gnjFw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:31:54.640

例如，如果您需要在两者之间留出 20px 的空间，您可以这样做：

`780-60=720`可用于块的空间

`720/4=180`你的块宽

```
.thumbnails .card{
width:180px;
margin-left:20px;
}
.thumbnails .card:first-child{
margin-left:0px;
} 
```

既然你已经编辑了你的问题，我建议每行有多个 ul 。

如果你坚持要一个：

[http://reference.sitepoint.com/css/pseudoclass-nthchild](http://reference.sitepoint.com/css/pseudoclass-nthchild)这可能会有所帮助：

`.thumbnails .card:first-child, .thumbnails .card:nth-child(n5) {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:04:28.387

此代码可能会对您有所帮助。在与缩略图宽度相关的容器中定义宽度

```
 #container {
    width:200px;
    }
    #container ul li{
    display:inline-block;
    } 
```

检查这个[http://jsfiddle.net/ychX4/](http://jsfiddle.net/ychX4/)

您可以通过 nth-child Css 选择器使用此操作。但 Internet Explorer 浏览器不支持。参考：[http ://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

祝你好运..）

# sharepoint - 为什么 PreApplicationStartMethodAttribute() 在 SharePoint 2013 中不起作用？

> ID：14374750
> 
> 赞同：6
> 
> 时间：2013-01-17T08:19:39.550
> 
> 标签：sharepoint, routing, global-asax, sharepoint-2013

在 .NET 4(.5) 中有这个惊人的`Attribute`: [`PreApplicationStartMethodAttribute`](http://msdn.microsoft.com/en-us/library/ee818829.aspx)，我想在 SharePoint 2013 中使用它，所以我不必直接编辑文件`app_start`中的方法`global.asax`。

由于 SP2013 运行正确版本的 .NET，我认为该属性可以正常工作……但情况似乎并非如此。

有没有人知道如何使用它？或解释为什么它不能工作？

**小更新**：在 system.web dll 中我可以看到[`PreApplicationStartMethodAttribute`](http://msdn.microsoft.com/en-us/library/ee818829.aspx)由以下类调用。

```
// System.Web.Compilation.BuildManager
internal static ICollection<MethodInfo> GetPreStartInitMethodsFromAssemblyCollection(IEnumerable<Assembly> assemblies, bool buildingFromCache)
{
    List<MethodInfo> list = new List<MethodInfo>();
    foreach (Assembly current in assemblies)
    {
        PreApplicationStartMethodAttribute[] array = null;
        try
        {
            array = (PreApplicationStartMethodAttribute[])current.GetCustomAttributes(typeof(PreApplicationStartMethodAttribute), true);
        }
        catch
        {
        }
        if (array == null || !array.Any<PreApplicationStartMethodAttribute>())
        {
            if (buildingFromCache)
            {
                return null;
            }
        }
        else
        {
            PreApplicationStartMethodAttribute[] array2 = array;
            for (int i = 0; i < array2.Length; i++)
            {
                PreApplicationStartMethodAttribute preApplicationStartMethodAttribute = array2[i];
                MethodInfo methodInfo = null;
                if (preApplicationStartMethodAttribute.Type != null && !string.IsNullOrEmpty(preApplicationStartMethodAttribute.MethodName) && preApplicationStartMethodAttribute.Type.Assembly == current)
                {
                    methodInfo = BuildManager.FindPreStartInitMethod(preApplicationStartMethodAttribute.Type, preApplicationStartMethodAttribute.MethodName);
                }
                if (!(methodInfo != null))
                {
                    throw new HttpException(SR.GetString("Invalid_PreApplicationStartMethodAttribute_value", new object[]
                    {
                        current.FullName,
                        (preApplicationStartMethodAttribute.Type != null) ? preApplicationStartMethodAttribute.Type.FullName : string.Empty,
                        preApplicationStartMethodAttribute.MethodName
                    }));
                }
                list.Add(methodInfo);
            }
        }
    }
    return list;
} 
```

如果 SharePoint 2013 在 asp.net 4.0 上运行，我可能会幸运地在应用程序上调用以下内容。

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_compiler.exe 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:03:56.057

以下只是推测，但基于实验。

我认为 SharePoint 2013 使用某种运行时程序集加载来加载任何和所有自定义代码程序集。毕竟，当我们添加 WebPart 时，应用程序不会重新编译。此处描述了如何完成此操作的简单方法：http: [//msdn.microsoft.com/en-us/library/d133hta4.aspx](http://msdn.microsoft.com/en-us/library/d133hta4.aspx)

我创建了一个简单的 ASP MVC 应用程序，并在其中尝试了这种精确的技术，并在我的 global.asax 中加载了一个程序集：

```
 protected void Application_Start()
    {
        ObjectHandle handle = Activator.CreateInstance("ClassLibrary1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=27b9c31f70a4bee3", "ClassLibrary1.Class1");
        Object p = handle.Unwrap();
        Type t = p.GetType();

        MethodInfo method = t.GetMethod("ToString");
        Object retVal = method.Invoke(p, null);
    } 
```

正在加载的程序集是我创建并放置在 GAC 中的。这个 ClassLibrary1 是真正的准系统，类 Class1 包含一个方法 ToString()。ToString 方法抛出异常，很容易看出它是否被调用：

```
public class Class1
{
    public override string ToString()
    {
        throw new ApplicationException("Joe was in the tostring");
        return base.ToString();
    }
} 
```

程序集还使用 AssemblyInfo.cs 文件中的 PreApplicationStartMethod：

```
[assembly: PreApplicationStartMethod(typeof(ClassLibrary1.JoeAssemblyStart), "Start")] 
```

最后有一个由 PreApplicationStartMethod 属性调用的简单类：

```
 public class JoeAssemblyStart
{
    public static void Start()
    {
        throw new ApplicationException("joe was here in this assembly start");
    }
} 
```

有趣的事情发生在运行时。当我运行此代码时，引发的异常来自 Class1 中的 ToString，而不是 JoeAssemblyStart 类。这意味着当我们在运行时加载程序集时会忽略 PreApplicationStartMethod 属性，这在考虑 ASP.NET 管道时并不奇怪。

当我将 ClassLibrary1 显式添加到我的 MVC 项目中并且没有动态加载它时，我还运行了这个实验的一个版本。在这种情况下，PreApplicationStartMethod 代码按预期调用。

所以总结一下：

1.  向 SharePoint 2013 添加代码时不会重建它
2.  因此，您的代码必须以某种动态方式加载
3.  动态加载的程序集不能早在 PreApplicationStartMethod 时影响 ASP.NET 管道

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T23:42:33.110

这有点晚了，但我认为这很重要。

PreApplicationStartMethod 属性在 SharePoint 2013 中运行良好。但是，需要将程序集部署到 bin 文件夹。

脚步

1.  创建您的普通 SharePoint 解决方案（我们称之为 SharePointProject）。
2.  创建一个新的类库项目并为其命名。（让我们称之为ClassProject）
3.  将代码添加一个名为 Startup 的新类到 ClassProject。
4.  添加一个名为 Start to Startup 的静态方法并执行您的启动工作。
5.  将 PreApplicationStartMethod 指向 ClassProject 的 Startup 属性。
6.  转到 SharePointProject 中的包/高级设置，并将 ClassProject 添加为需要部署的程序集。确保选择 WebApplication 而不是 gac。
7.  部署您的解决方案。

此过程会将 ClassProject 部署到 SharePoint Web 应用程序的 bin 文件夹。start 方法将由运行时调用，一切都应该正常工作。确保将 ClassProject 部署到 WebApplication 而不是 GAC 很重要。

如果你一直在玩这个，它不起作用。尝试删除 Temporary Internet Files 下的所有内容，因为 IIS 喜欢缓存 Dll，您的代码将不会被调用。

哦，使用 ClassProject 的原因是因为如果将 SharePoint 项目部署到 bin 而不是 GAC，则无法使用功能接收器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T08:10:51.717

我尝试了几种方法 - 我让它工作的唯一方法是使用 httpmodule：http: [//melcher.it/2012/12/signalr-in-sharepoint-2013-the-real-time-web-is-coming/](http://melcher.it/2012/12/signalr-in-sharepoint-2013-the-real-time-web-is-coming/)

我认为 PreApplicationStart 不起作用的原因是 global.asax 继承了 SPHttpApplication 而不是 HttpApplication - 没有时间去查看源代码。

久违了，麦克斯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T15:45:09.013

我注意到有些项目没有“PreApplicationStartup”，我在控制台应用程序上使用它时遇到了类似的问题，尽管它在网站上运行良好。

也可能是您正在运行的方法不是静态方法。

```
public class PreApplicationStart
    {
        public static void Start()
        {
            // Pre application startup configuration goes here
        }
    } 
```

在 AssemblyInfo.cs 中添加以下内容

```
[assembly: PreApplicationStartMethod(typeof(PreApplicationStart), "Start")] 
```

# php - MySQL 等效于 mysql_num_rows。哪个更好？

> ID：14374751
> 
> 赞同：1
> 
> 时间：2013-01-17T08:19:45.617
> 
> 标签：php, mysql, pdo

我正在将 PHP 中与 mysql 相关的所有内容转换为 PDO 格式。话虽如此，我需要问一些事情。

我知道不是使用 mysql_num_rows() 来找出返回的行数，一个好的选择是

```
"SELECT COUNT(*) FROM table" 
```

那么，使用 PDO 是否更好：

```
$stmt = $db->query('SELECT COUNT(*) FROM table');
$results = $stmt->fetchAll(PDO::FETCH_ASSOC);
$count = count($results); 
```

或者

```
$stmt = $db->query('SELECT * FROM table');
$count = $stmt->rowCount(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:33:01.830

我不会说这是“一个很好的选择”。这是完全不同的东西。

```
 SELECT data FROM table 
```

获取您可以使用的数据。然后，您可以使用`mysql_num_rows()`（或`rowCount()`在 PDO 情况下）获取记录数（用于渲染、分页或其他）。

如果您只想要记录数（而不是实际数据），您应该使用

```
 SELECT COUNT(data) FROM table 
```

因为您只选择记录**数**（准确地说，您正在计算 的非 NULL 值`data`，用于`SELECT COUNT(*)`获取所有记录）。

如果您将后者与前者结合使用以获得两者，那么当两个查询之间的记录数发生变化时，您可能会遇到麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:24:15.563

你的问题对我来说毫无意义。
正如您已经知道的那样，仅向数据库询问**多**行比询问**所有行**本身然后将​​它们数出要好得多 - 如果您只使用不同的 db 驱动程序，您为什么认为会是这样？

从字面上回答您的问题：`SELECT COUNT(*)`这不是一个“好的选择”，而是计算行数的**唯一**正确方法，无论使用什么特定的 API 将查询发送到数据库。

然而，正如评论中指出的那样——如果你已经在选择行，并且想知道返回的行数——那就完全相反了：运行一个额外的查询来获取计数是没有意义的，任何 API 函数获取结果集的行数将是唯一正确的方法。
但无论如何，这些问题与从一个 API 迁移到另一个 API 无关。

**更新**
啊哈，看来我找到了你困惑的根源！
看起来你被旧的 API 弄错了，它与数据库服务器共享它的名称 - mysql。
事实上，这是不同的问题 - MySQL RDBMS 是一个数据库服务器，而 PHP 中的 mysql 扩展只是一个访问该服务器的 API（一组函数）。
而且 PDO 不是数据库服务器，而是另一个 API。因此，您的查询**没有变化**，而只是在您用来将它们发送到 DB 的函数中。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:22:52.610

`SELECT COUNT`没有 a 的A`GROUP BY`将始终只返回 1 行和 1 个字段，即符合您的条件的行的总数`COUNT`，在这种情况下就是所有内容。`count()`因此，对该结果执行 PHP将始终返回`1`，因为`$results`数组中只有 1 个元素。因此，这两个选项中的选项 2 是唯一有效的选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T08:23:18.473

最好是这个

```
$nRows = $pdo->query('select count(*) from table')->fetchColumn(); 
echo $nRows; 
```

**编辑**：删除计数。

# java - JSF- （转义特殊字符）

> ID：14374758
> 
> 赞同：1
> 
> 时间：2013-01-17T08:20:30.197
> 
> 标签：java, jsf, facelets

我正在尝试在 outputText 中设置 1 ^(® 2：)

```
<h:outputText value="1&lt;sup&gt;&#174;&lt;sup/&gt;2" escape="false"/> 
```

什么是不正确的？我`2`输入大写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:43:04.903

您可以选择以下之一

在您最初的提案中，您`/`应该在`sup`

```
<h:outputText value="1&lt;sup&gt;&#174;&lt;/sup&gt;2" escape="false"/> 
```

您也可以`sup`完全删除（但比您的（R）不会小）

```
<h:outputText value="1&#174;2" escape="false"/> 
```

最后可以不用转义直接使用

```
<h:outputText value="1®2"/> 
```

# django - 在 Ubuntu 64b EC2 实例上设置 Django MySQL Apache；没有反应

> ID：14374766
> 
> 赞同：0
> 
> 时间：2013-01-17T08:21:01.487
> 
> 标签：django, apache, amazon-web-services, amazon-ec2

按照这里的教程[http://ericwconner.com/?p=347](http://ericwconner.com/?p=347)

当然变了

```
ServerName www.mysite.com 
```

在 mysite.wsgi 脚本中

```
ServerName xx-xx-xx-xx.compute-1.amazonaws.com 
```

也删除了 ServerAlias

当我输入公共 DNS 时，我得到的只是“204 No Content”

任何关于更多信息的建议/请求都非常受欢迎。

我不明白，教程似乎很简单......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T14:42:00.757

正如@Burhan 在评论中提到的，它应该放在 Apache 配置文件中。查看有关如何执行此操作的[官方 django 文档。](https://docs.djangoproject.com/en/1.3/howto/deployment/modwsgi/)如果你正在使用 virtualenv（你可能应该）看看[这个](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#using-a-virtualenv)。

# jquery - 如何插入新元素，使其以正确的样式显示（使用 jQuery）

> ID：14374767
> 
> 赞同：2
> 
> 时间：2013-01-17T08:21:01.910
> 
> 标签：jquery, jquery-ui

总的来说，我在编程方面还很陌生，所以我的问题可能很容易回答，甚至很愚蠢，但我来了：

在我的站点中添加新按钮（或任何元素）时，此按钮不会以正确的样式显示。我究竟做错了什么？

代码：

```
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Test</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />

<script>
$(function() {
$( "#accordion" ).accordion();
});

 $(function() {
$( "button" )
.button()
.click(function() {
$('#panel').append("<button>OK?</button>");
});
});
</script>

</head>
  <body>
    <button>Go!</button>
    <div id="accordion">
       <h3>Heading 1</h3>
        <div>
          <p id="panel">
        Text
          </p>
        </div>                  
    </div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:04:04.987

这可能不是正确的解决方案，但我可以建议一种解决方法。检查 jquery 他们 ui 添加到“Go”按钮的类，并在附加“OK”按钮的同时，将这些类添加到 OK 按钮

像这样的东西。

```
$('#panel').append("<button class="jquery ui theme button classes">OK?</button>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:45:46.507

我测试了你的问题。两种不同按钮样式的原因是线条

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" /> 
```

在哪里导入 jquery-ui.css 样式。这实际上是查看按钮在页面中的位置，并以不同的方式设置它们。由于第二个按钮（“确定？”）带有面板，因此它具有不同的样式。

您可以尝试使用注释掉上述行的示例 - 它仍然可以工作（没有样式），并且两个按钮看起来完全相同。

所以这真的**不是 jQuery 问题**，而只是**CSS**样式的问题。如果您想更深入地了解这一点，我建议您在*Chrome JS Console*或*Firefox Firebug*中查看您的页面。两者都会告诉你为什么页面上的每个元素看起来都和它一样，即它们会告诉你按钮样式是否来自`jquery-ui.css`or `style.css`。

* * *

*请注意，我显然无权访问，* `/resources/demos/style.css` *因此我删除了该行以进行测试。我的另一个建议是检查您导入的两种样式是否有竞争样式定义，例如，一种样式表示按钮应该采用这样的样式，而另一种则表示不同的样式。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:28:03.083

附加按钮 OK 后尝试此代码：

```
 $('#panel').append("<button>OK?</button>");
 $( "#panel button" ).button(); 
```

# sql - 自定义序列生成器 - PLSQL

> ID：14374768
> 
> 赞同：1
> 
> 时间：2013-01-17T08:21:08.183
> 
> 标签：sql, plsql

我正在尝试从以下 Plsql 包中获取序列号并更新给定 contractObjId 的行。我有一个 java 程序可以在线程环境中调用它。

多个线程可以同时调用并且具有相同的contractobjId。我的问题是当多个线程调用时它会生成重复的序列号。

请提出解决方案并指出我做错了什么。

```
CREATE OR REPLACE PACKAGE BODY MANAGE_SEQ_NO IS
  PROCEDURE GET_NEXT_SEQ_NUM (contractobjid NUMBER, seqCur IN OUT SITECURTYP) IS
       seq_no NUMBER;
       seq_value NUMBER;
  BEGIN
     SELECT x_sequence_no 
     INTO seq_no 
     FROM table_contract 
     WHERE objid = contractObjid 
     FOR     UPDATE;
     IF seq_no IS NULL THEN
        seq_value := 1;
     ELSE
         seq_value := seq_no+1;
     END IF;
     UPDATE table_contract 
     SET x_sequence_no = seq_value 
     WHERE objid = contractObjid;
     COMMIT;
     OPEN seqCur FOR
     SELECT seq_value FROM dual;
  END GET_NEXT_SEQ_NUM;
END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:26:18.900

好吧，如果您不想使用真正的序列，您可以使用`SELECT FOR UPDATE`. 这将锁定您正在阅读的行，您可以增加任何内容，然后进行更新。当然，它会锁定线路，并且根据您的操作，它可能会产生一些可伸缩性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T22:17:54.197

> “我们可以使用表锁概念来锁定选择语句吗？”

不会。Oracle 中没有任何东西会阻止读者。

# android - 无法设置多个提醒

> ID：14374771
> 
> 赞同：2
> 
> 时间：2013-01-17T08:21:21.663
> 
> 标签：android, android-alarms, android-broadcast

我的应用程序中有一个功能，用户可以设置多个提醒。但问题是，当用户为提醒 A 设置时间而不是为提醒 B 设置时间时，提醒 B 只会被调用。这就是提醒 A 永远不会接到电话的意图。简而言之，只有一个提醒一直在工作。这是设置提醒和呼叫广播的片段。

```
public void setAlarm(int dayValue, int monthValue, int yearValue, int hourValue, int minValue, String message, int pos){

            int ID = 1;
        calendar.set(yearValue, monthValue, dayValue, hourValue, minValue, 0);
        Calendar tempCal = Calendar.getInstance();
        Intent intent = new Intent(context,ReminderNissan.class);

        intent.putExtra("title",message);
        intent.putExtra("note",message);
        intent.putExtra("id", pos);

        Log.d("****Indide set alarm method*****", "PSOITION " + pos);

        if((tempCal.compareTo(calendar)==  -1) || (tempCal.compareTo(calendar)==  0)){
            try{
                db.open();
                db.setAlarm(id.get(pos).toString(), 1);
                db.close();
            }catch(SQLException exp){
                Log.d("SET ALARM OFF SQL EXCEPTION", exp.toString());
            }

            PendingIntent sender = PendingIntent.getBroadcast(context, ID,intent,0);

            am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender);
            //Toast.makeText(context, "*** ALARM SET AT ***  " + pos, Toast.LENGTH_SHORT).show();

        }else{
            try{
                db.open();
                db.setAlarm(id.get(pos).toString(), 0);
                db.close();
            }catch(SQLException exp){
                Log.d("SET ALARM OFF SQL EXCEPTION", exp.toString());
            }
            Toast.makeText(context, "Time Has Alredy Passed. Set proper Time. ", Toast.LENGTH_SHORT).show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:27:42.290

我不完全确定，但可能是您正在覆盖警报。

```
PendingIntent sender = PendingIntent.getBroadcast(context, ID,intent,0); 
```

在您的情况下， ID 参数始终为 1。只需将其设为唯一的 id 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:36:59.350

您在哪里调用了您的 setAlarm-Method？我有一个应用程序，它以类似的方式工作，每次警报处于活动状态时，我都会打开一个带有取消按钮的活动。通过按下按钮，它将再次设置 setAlarm-Method，因此它将前进到下一个警报。为此，我为 pendingIntent 设置了一个标志

```
 PendingIntent sender = PendingIntent.getBroadcast(context, ID,intent,PendingIntent.FLAG_UPDATE_CURRENT ); 
```

# c# - 在 asp.net 中捕获当前浏览器 url

> ID：14374779
> 
> 赞同：1
> 
> 时间：2013-01-17T08:21:52.193
> 
> 标签：c#, asp.net

当我想在 asp.net 页面中获取当前 url 时。我想在转发器中绑定它。

```
<asp:Repeater ID="rptList" runat="server">   
    <ItemTemplate>
                <asp:HyperLink ID="hlOtherUrl" runat="server" Text="link" NavigateUrl='<%# Eval("ID") %>'></asp:HyperLink></p>           
    </ItemTemplate> 
</asp:Repeater> 
```

例如——http: [//www.test.com](http://www.test.com?ID=3) ?ID=3 怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:36:46.010

您可以通过执行以下操作获取当前页面 url：

```
Response.Write(Request.Url.AbsoluteUri); 
```

在你的情况下，我想你在这里需要它：

```
NavigateUrl='<%# Request.Url.AbsoluteUri %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:28:46.357

这个页面有一个非常简洁的指南： http: [//powerasp.net/content/new/get-current-page-url.asp](http://powerasp.net/content/new/get-current-page-url.asp)

# c# - Dapper 传递动态参数

> ID：14374782
> 
> 赞同：3
> 
> 时间：2013-01-17T08:21:58.167
> 
> 标签：c#, orm, dapper

我目前正在为 Dapper 编写一个包装器。这个包装器强制每个查询都是一个存储过程。

在我的包装器中，我这样称呼 Dapper（有问题）：

```
public IEnumerable<T> Select<T>(string storedProcName, dynamic param) {
    IEnumerable<T> results;

    using(var connection = new SqlConnection(_connectionString) {
        results = connection.Query<T>(storedProcName, param, commandType: CommandType.StoredProcedure);
    }

    return results;
} 
```

当我尝试将“参数”传递给查询时，它告诉我“无法解析符号查询”。当我删除参数传递时，它工作正常。

谁能指出我正确的方向，以便我可以将动态参数（或类似的东西）传递给 Dapper？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T08:38:44.710

您只需将参数更改为类型对象，当您调用它时，您可以使用匿名类型来传递您的参数。

```
public IEnumerable<T> Select<T>(string storedProcName, object param) {
    IEnumerable<T> results;

    using(var connection = new SqlConnection(_connectionString) {
        results = connection.Query<T>(storedProcName, param, commandType: CommandType.StoredProcedure);
    }

    return results;
} 
```

然后你会这样称呼它：

```
var results = query.Select<Entity>("spname", new { Id = 2, Something = "test" }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T00:03:13.733

您可能可以将其丢弃：

```
results = connection.Query<T>(storedProcName,
    (object)param, commandType: CommandType.StoredProcedure); 
```

我再次怀疑这是否明智`dynamic`；我知道这是有原因的，但我怀疑它弊大于利。坦率地说，dapper 可以正常工作`object`（“原因”是 IDE 问题，而不是语言问题）。

# javascript - -ms-filter 通过 jquery 在 IE8 中进行渐变

> ID：14374784
> 
> 赞同：0
> 
> 时间：2013-01-17T08:22:20.740
> 
> 标签：javascript, jquery, css, internet-explorer-8, gradient

我正在这个颜色控制面板上进行试验，用户可以使用控制面板中的幻灯片来更改页面的外观和感觉。一个额外的复杂性是滑入式面板位于父窗口中，而进行更改的页面位于 iframe 内。我希望更改生效，因为它们是在控制面板中进行的。为此，我不想使用 AJAX。为此，我设计了一种算法，并且运行良好。

除了 IE8 的问题外，一切都运行良好。加载页面时，我在 css 中默认使用此样式定义。

（感谢 Louis Lazaris - [http://coding.smashingmagazine.com/2010/04/28/css3-solutions-for-internet-explorer/](http://coding.smashingmagazine.com/2010/04/28/css3-solutions-for-internet-explorer/)）

```
background-image: -moz-linear-gradient(top, #81a8cb, #4477a1); /* Firefox 3.6 */
background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0,#4477a1),color-stop(1, #81a8cb)); /* Safari & Chrome */
filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#81a8cb', endColorstr='#4477a1'); /* IE6 & IE7 */
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#81a8cb', endColorstr='#4477a1')"; /* IE8 */ 
```

现在这就是我在使用 jQuery 的 javascript 中尝试做的事情（ hex1 和 hex2 是两个变量，其中包含两个用于渐变的十六进制值）：

```
jQuery('#iframeId').contents().find('.gradient').css(
{
        backgroundImage: '-moz-linear-gradient(top,' + hex1 + ',' + hex2 + ')', /* Firefox 3.6 */
        backgroundImage: '-webkit-gradient(linear,left bottom,left top,color-stop(0,' + hex1 + '),color-stop(1,' + hex2 + '))', /* Safari & Chrome */
        filter:  'progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=' + hex1 + ', endColorstr=' + hex2 + ')', /* IE6 & IE7 */
        -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='" + hex1 + "', endColorstr='" + hex2 + "')" /* IE8 */
}); 
```

如果我排除 -ms-filter 的最后一个条件，则代码运行良好（因为根据我阅读的文档，如果 jQuery.css 支持此过滤器，则没有提到它）。对于我看到的问题的一种解决方案是查看我的浏览器的名称和版本，使用

```
navigator.userAgent 
```

如果是“Internet Explorer 8.0”，我会应用单一背景颜色。

现在我的问题是，有没有其他方法可以解决这个问题并在 IE8 上获得渐变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:25:11.857

使用 jQuery 设置 CSS 有另一种语法。尝试以下

```
jQuery('#iframeId').contents().find('.gradient').css({
    'background-image': '-moz-linear-gradient(top,' + hex1 + ',' + hex2 + ')', /* Firefox 3.6 */
    'background-image': '-webkit-gradient(linear,left bottom,left top,color-stop(0,' + hex1 + '),color-stop(1,' + hex2 + '))', /* Safari & Chrome */
    'filter':  'progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=' + hex1 + ', endColorstr=' + hex2 + ')', /* IE6 & IE7 */
    '-ms-filter': "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='" + hex1 + "', endColorstr='" + hex2 + "')" /* IE8 */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:26:32.020

你的javascript有问题。对象键`-ms-filter`应该用双括号或单括号括起来，否则会导致语法错误。

# dojo - 带有选择字段的 dgrid

> ID：14374787
> 
> 赞同：1
> 
> 时间：2013-01-17T08:22:47.710
> 
> 标签：dojo, dgrid

我在网上到处寻找这个“简单”的问题，没有答案！
如何像这个例子一样将选择输入字段嵌入到 dgrid 中：
假设我们有这个列：

```
editor({ 
                    label: "name", 
                    autoSave:true, 
                    field: "f_name", 
                    className: 'style4' 
            }, "text", "dblclick") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:36:25.450

基于弗雷德里克答案的答案：

```
editor({
    label: "subject",
    field: "subject",
    editorArgs: {
        style: "width:75px;",
        options: [
            {value: "true", label: "true"},
            {value: "false", label: "false"}
        ]
    }
}, Select, "dblclick") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:58:03.580

尝试这样的事情：

```
"dgrid.editor({
                    field: 'state',
                    editorArgs: {store: stateStore, style: 'width:120px;', maxHeight: -1}
                }, dijit.form.Select)" 
```

这是示例：[https ://github.com/SitePen/dgrid/blob/master/test/GridFromHtml_Editors.html](https://github.com/SitePen/dgrid/blob/master/test/GridFromHtml_Editors.html)

# java - sql - 创建单个查询以获取给定条件的值

> ID：14374789
> 
> 赞同：3
> 
> 时间：2013-01-17T08:23:02.330
> 
> 标签：java, mysql, sql

我正在尝试创建一个将生成下表的查询。我知道列名（即每列的开始日期和结束日期。这些日期将根据月/年而有所不同。此外，列数也会有所不同，因为某个月可能有 6 周）。

池的数量也可能不同。可以有“n”个池。所以我为每个池（行）和每周（列）创建了一个查询。
假设有 3 个池（3 行）和 5 周（5 列），我可能需要运行 3*5=15 个查询。
有没有办法创建一个查询来解决这个问题？
谁能帮我解决这个问题？
我还在做这个..

```
--------------------------------------------------
row 0 | week1 | week2 | week3  | week4  | week5  |
st-end|jan1 -2|jan 3-9|jan10-17|jan18-24|jan25-31|
--------------------------------------------------
pool a| 100   | 105   | 309    | 345    | 234    |
pool b| 106   | 108   | 399    | 245    | 214    |
pool c| 120   | 145   | 359    | 365    | 274    |
-------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:27:54.190

您是否尝试过使用 CASE 表达式来做到这一点？[参见“控制流函数”] 沿着这些思路：

```
select POOL
      ,sum(case when dt between 20120101 and 20120107 then VAL else 0) as Wk1
      ,sum(case when dt between 20120108 and 20120114 then VAL else 0) as Wk2
    ...  ...
from MY_TABLE
group by POOL 
```

# node.js - 谷歌热图图层

> ID：14374790
> 
> 赞同：0
> 
> 时间：2013-01-17T08:23:02.573
> 
> 标签：node.js, google-maps-api-3, google-fusion-tables, heatmap

我的数据库包含 1.000.000 个坐标。我有谷歌地图 api v3 和 node.js 在谷歌热图上呈现。谷歌地图有 api: Fusion table 来帮助从服务器端渲染热图数据

我不想使用融合表。在不使用融合表的情况下呈现热图数据的任何其他方式？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:02:11.050

您可以在没有 FusionTables 的情况下创建热图，请参阅：[https ://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps](https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps)

但这将在客户端创建热图，这需要下载完整的数据（我猜这将> 20MB）并且需要时间来处理数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-27T15:59:19.147

您可以使用客户端 Heatmap Layer，但它最多只能渲染 1000 个坐标。
目前无法在不使用 Fusion Tables 的情况下呈现所有数据。

> 热图使用 Maps API 热图层，因此它们在显示之前将数据拉入浏览器。这与在服务器上呈现地图切片的 Fusion Tables 功能地图不同。因此，仅映射前 1,000 行。

[https://support.google.com/fusiontables/answer/1152262](https://support.google.com/fusiontables/answer/1152262)

# python - 用 numpy.NaN 初始化 scipy.sparse 矩阵的最快方法是什么？

> ID：14374791
> 
> 赞同：8
> 
> 时间：2013-01-17T08:23:16.010
> 
> 标签：python, scipy

我想用 numpy 数组初始化一个稀疏矩阵。numpy 数组包含 NaN 作为我的程序的零，初始化稀疏矩阵的代码如下：

```
a= np.array([[np.NaN,np.NaN,10]])
zero_a= np.array([[0,0,10]])
spr_a = lil_matrix(a)
zero_spr_a = lil_matrix(zero_a)
print repr(spr_a)
print repr(zero_spr_a) 
```

输出是

```
'type'numpy.float64'' 类型的 1x3 稀疏矩阵
    具有 3 个以链接列表格式存储的元素
'type'numpy.int64'' 类型的 1x3 稀疏矩阵
    具有 1 个以链接列表格式存储的元素

```

对于 0 的数组，稀疏矩阵中仅存储 1 个元素。但是 NaN 数组中存储了 3 个元素，对于 scipy 矩阵，如何将 NaN 视为零？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:22:31.063

如果您只想从数据中创建一个稀疏矩阵，将`NaN`s 视为零，您可以执行以下操作。首先，让我们创建一个包含多个`np.nan`s 的随机数组：

```
>>> nans = np.random.randint(0, 2, size=(5,5))
>>> a = np.ones((5,5))
>>> a = np.where(nans, np.nan, a)
>>> a
array([[  1.,   1.,   1.,   1.,  nan],
       [ nan,  nan,  nan,   1.,   1.],
       [ nan,  nan,   1.,   1.,  nan],
       [  1.,   1.,   1.,   1.,  nan],
       [  1.,  nan,   1.,  nan,  nan]]) 
```

为了使这种稀疏的 COO 格式，它很简单：

```
>>> indices = np.nonzero(~np.isnan(a))
>>> sps = scipy.sparse.coo_matrix((a[indices], indices), shape=a.shape)
>>> sps
<5x5 sparse matrix of type '<type 'numpy.float64'>'
    with 14 stored elements in COOrdinate format> 
```

并检查它们是否相同：

```
>>> sps.toarray()
array([[ 1.,  1.,  1.,  1.,  0.],
       [ 0.,  0.,  0.,  1.,  1.],
       [ 0.,  0.,  1.,  1.,  0.],
       [ 1.,  1.,  1.,  1.,  0.],
       [ 1.,  0.,  1.,  0.,  0.]]) 
```

虽然你`NaN`的 s 现在不见了...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:35:55.193

零作为稀疏矩阵中的空值的用法在代码中根深蒂固，所以不幸的是它不是很容易改变。

首先，我会重新考虑是否需要将`NaN`或其他值视为稀疏矩阵中的空值。也许您的代码中有另一种方式？

如果您真的必须更改稀疏矩阵中的空值，那么您将不得不基于[`lil_matrix`](https://github.com/scipy/scipy/blob/master/scipy/sparse/lil.py)甚至基于[`spmatrix`](https://github.com/scipy/scipy/blob/master/scipy/sparse/base.py). 最重要的是你需要改变方法`get nnz()`，它定义了有多少点是非零的。但是您还需要重新定义矩阵，因为它被转换为`np.matrix`object dtype，并且在此过程中清除了零。

# c# - 如何在 foreach 和语句中增加整数？

> ID：14374797
> 
> 赞同：1
> 
> 时间：2013-01-17T08:23:44.940
> 
> 标签：c#, foreach, increment, post-increment

如何在 foreach 循环中增加一个整数（如在 C++ 中）

这是我的代码，但它不会`selectIndex`在每次循环迭代期间增加整数。

```
var list = new List<string>();
int selectIndex = 0;

foreach(TType t in Gls.TTypes)
{
    selectIndex = Gls.TType.Name == t.Name ? selectIndex++ : 0;
    list.Add(t.Name);
} 
```

让它工作如下：

```
var list = new List<string>();
int selectIndex = 0;
int counter = 0;
foreach(TaxType t in Globals.TaxTypes)
{
    selectIndex = Globals.TaxType.Name == t.Name ? counter : selectIndex;
    counter++;

    list.Add(t.Name);
} 
```

目的是在 UIPickerView 中选择匹配项。

非常感谢所有的贡献！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:29:58.290

恕我直言，您在这里使用的模式很可怕。前置和后缀增量修改了它们被调用的值，因此复制结果是没有意义的（顺便说一下，它不起作用，因为您在后缀增量发生之前复制了值）。

因此，您可以使用@Vilx- 和@KarthikT 之类的解决方案 - 但在我看来，与其试图将所有内容都塞在一条线上，我更愿意看到：

```
if(Gls.TType.Name == t.Name) 
  selectIndex++;
else selectIndex = 0; 
```

不要误会我的意思——我经常使用条件运算符；但在这种情况下我不会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T08:30:26.583

你是说

```
selectIndex += (Gls.TType.Name == t.Name ? 1 : 0); 
```

?

如果您想查找名称等于 Gls.TType.Name 的对象的索引，那么以下代码可以帮助您。

```
var list = new List<string>();
foreach(TaxType t in Globals.TaxTypes)
{
    list.Add(t.Name);
}
int selectIndex = list.FindIndex(t => t == Globals.TaxTypes.Name); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T08:32:19.190

我想你正在寻找正确的语法......我想你只是用

```
foreach(TType t in Gls.TTypes)
{
     selectIndex += (Gls.TType.Name == t.Name) ? 1 : 0;
     list.Add(t.Name);
} 
```

或者

```
foreach(TType t in Gls.TTypes)
{
     selectIndex = (Gls.TType.Name == t.Name) ? selectIndex+1 : selectIndex;
     list.Add(t.Name);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-31T14:16:42.527

如果我需要某种变量来增加，我喜欢在某些情况下使用范围。变量只存在于作用域中，因此它与for循环中的相同。毕竟垃圾收集器会破坏它。（可能会更好地使用 using 但我不是这个语言的专家。）

```
{
    int index = 6;
    foreach (var item in obj)
    {
        Console.WriteLine(item.text+index);
        index++;
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T08:24:48.383

当你这样做时`selectIndex = selectIndex++`，我希望你会增加，然后立即将其重置为旧值..（因为后增量运算符在增量之前返回值）

我会建议一个简单`selectIndex = selectIndex + 1`的而不是功能性但不必要的`++selectIndex`

修改后的声明将是 -

```
selectIndex = Gls.TType.Name == t.Name ? selectIndex+1 : 0; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-17T08:25:21.410

像这样写：

```
selectIndex = Gls.TType.Name == t.Name ? selectIndex+1 : 0; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-17T08:25:55.997

试试这个`selectIndex = Gls.TType.Name == t.Name ? ++selectIndex : 0;`

请参阅此处：[MSDN](http://msdn.microsoft.com/en-us/library/36x43w8w%28v=vs.71%29.aspx)了解`++`运营商的工作方式

# java - 为什么 GlazedList 表会产生 IllegalStateException？

> ID：14374800
> 
> 赞同：0
> 
> 时间：2013-01-17T08:24:02.933
> 
> 标签：java, jtable, illegalstateexception, glazedlists

我有两个 glazedList 表，如下所示。通过单击第一个表填充第二个表时，我得到 IllegalStateException。

**有谁知道为什么以及最好的解决方案是什么？**

```
Exception in thread "AWT-EventQueue-1" java.lang.IllegalStateException: Reentrant fireEvent() by "[jj.temto.sten.crc.order.MecationItem@f8f6ea]"
    at ca.odell.glazedlists.event.SequenceDependenciesEventPublisher.fireEvent(SequenceDependenciesEventPublisher.java:307)
    at ca.odell.glazedlists.event.ListEventAssembler.commitEvent(ListEventAssembler.java:316)
    at ca.odell.glazedlists.BasicEventList.add(BasicEventList.java:140)
    at jj.temto.sten.crc.medor.ScriptionSummarModel$4.done(ScriptionSummarModel.java:356)
    at org.jdesktop.swingworker.SwingWorker$5.run(Unknown Source)
    at org.jdesktop.swingworker.SwingWorker$DoSubmitAccumulativeRunnable.run(Unknown Source)
    at org.jdesktop.swingworker.AccumulativeRunnable.run(Unknown Source)
    at org.jdesktop.swingworker.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(Unknown Source)
    at javax.swing.Timer.fireActionPerformed(Timer.java:271)
    at javax.swing.Timer$DoPostEvent.run(Timer.java:201)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:461)
    at jj.temto.webutil.gui.WebEventQueue.dispatchEvent(WebEventQueue.java:63)
    at java.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:110) 
```

**代码：**

```
 // build the first table
        String[] propertyNames = retrievepropertyNames();
        String[] columnsLabels = retrievecolumnsLabels();
        TableFormat<Order> tableFormat = GlazedLists.tableFormat(Order.class,propertyNames,columnsLabels);
        SortedList<Order> orderSortedList = new SortedList<Order>(model.getOrderEvenList(),null);
        table = new WebTable(new EventTableModel<Order>(orderSortedList,tableFormat));

        // Configures the first table
        TableComparatorChooser tableSorter = TableComparatorChooser.install(table, orderSortedList, TableComparatorChooser.SINGLE_COLUMN);
        tableSorter.appendComparator(1,0,true);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.setAutoResizeMode(WebTable.AUTO_RESIZE_ALL_COLUMNS);
        table.setAutoscrolls(true);
        table.addMouseListener(retrieveTableMouseListener());
        table.getModel().addTableModelListener(retrieveTableModelListener());

        // In the same way as above i build the second table

        private MouseListener retrieveTableMouseListener()
        {
            return new MouseAdapter()
            {
             @Override
                public void mouseClicked(MouseEvent e)
                {
                    int row = table.rowAtPoint(e.getPoint());
                    int nr = Integer.parseInt(table.getValueAt(row, 1).toString());
                    model.retrieveAllItems(vo.getId(),nr);//At this point i'm filling second table
                }
            };
        }

public void retrieveAllItems(final String id,final int nr )
    {
        SwingWorker worker = new SwingWorker()
        {
            List<Item> list = GenericsUtil.makeList();
            @Override
            protected Object doInBackground() throws Exception
            {
                if (pat != null)
                {
                    try
                    {   
                        Collection<Medo> allItems = SERVER.selectItemDAO(id);
                        if ((allItems != null) && (!allItems.isEmpty()))
                        {
                            for (Medo bedItem : allItems)
                            {
                                if(bedItem.OrdrId==nr){
                                    Item Item = new Item();
                                    Item.setId(bedItem.getId());
                                    Item.setMediId(bedItem.mediId);
                                    Item.setTypeName(bedItem.typeName);
                                    list.add(Item);
                                }
                            }
                        }
                        else
                        {
                            // no items found on SERVER
                        }
                    } catch (SQLException e) {
                        Debug.display(e.getMessage());
                    } catch (RemoteException e) {
                        Debug.display(e.getMessage());
                    }
                }
                else
                {
                    JOptionPane.showMessageDialog(panel, "First item then ...");
                }
                return list;
            }

            @Override
            protected void done()
            {
                super.done();
                orderItemEvenList.clear();
                for(Item Item:list){
                    orderItemEvenList.add(Item);// this is eventList of second table
                }
            }
        };
        worker.execute();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:33:28.290

When using EventList in multi-threaded environment, you need to obtain the lock before accessing the EventList.

Something like :

```
orderitemEvenList.getReadWriteLock().writeLock().lock();
try {
  orderItemEvenList.clear();
  for(Item Item:list){
     orderItemEvenList.add(Item);// this is eventList of second table
  }
} finally {
  orderitemEvenList.getReadWriteLock().writeLock().unlock();
} 
```

# c++ - boost::optional 与 const 成员

> ID：14374802
> 
> 赞同：2
> 
> 时间：2013-01-17T08:24:09.030
> 
> 标签：c++, boost, boost-optional

为什么这不起作用？

```
struct O {
    O(int i, int j)
        : i(i)
        , j(j)
    {}

    int const i;
    int const j;
};

int main(int argc, char** argv)
{
    boost::optional<O> i;
    i.reset(O(4, 5));
    return 0;
} 
```

它似乎是在尝试使用赋值运算符，而不是尝试在适当的位置构造它。我曾假设它会在未初始化的内存上调用 O 的复制构造函数。

```
/..../include/boost/optional/optional.hpp:433:69: error: use of deleted function ‘O& O::operator=(const O&)’
.... error: ‘O& O::operator=(const O&)’ is implicitly deleted because the default definition would be ill-formed:
.... error: non-static const member ‘const int O::i’, can’t use default assignment operator
.... error: non-static const member ‘const int O::j’, can’t use default assignment operator 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:47:36.803

Boost.Optional 使用赋值或复制构造，具体取决于`i`. 由于此状态是运行时信息，因此也必须在运行时进行分配和复制构造之间的选择。
然而，这意味着编译器必须为这两个选项生成代码，即使其中一个从未实际使用过。这意味着这两种选择都必须是可能的。

要使代码正常工作，您可以将（总是失败的）assingment 运算符添加到`class O`：

```
O& O::operator=(const O&)
{
    throw "this is not possible"
    return *this;
} 
```

* * *

作为旁注，`Optional<T>::reset`已弃用。您应该只使用 assingment，如

```
i = O(4,5); 
```

上述语义对两者都有效。

# magento-1.7 - 如何在magento中设置负税

> ID：14374803
> 
> 赞同：0
> 
> 时间：2013-01-17T08:24:13.487
> 
> 标签：magento-1.7

我`magento developer`正在开发 1.7 版，我做了很多谷歌搜索，但没有找到总价中的默认`magento`加税，但我想从总价中减税，但确实找到了解决方案，我该如何做到这一点

```
Please anyone tell me how i can set negative tax price in magento 
```

# python - 正确的代码但错误的答案:(

> ID：14374808
> 
> 赞同：1
> 
> 时间：2013-01-17T08:24:26.403
> 
> 标签：python

我正在用 Python 解决[Project Euler 问题 #18](https://projecteuler.net/problem=18)。

我已经成功解决了那里给出的示例问题，但未能解决主要问题。但是代码是一样的。

代码是：

```
matrix = [('75', '0'),
    ('95', '64'),
    ('17', '47', '82'),
    ('18', '35', '87', '10'),
    ('20', '04', '82', '47', '65'),
    ('19', '01', '23', '75', '03', '34'),
    ('88', '02', '77', '73', '07', '63', '67'),
    ('99', '65', '04', '28', '06', '16', '70', '92'),
    ('41', '41', '26', '56', '83', '40', '80', '70', '33'),
    ('41', '48', '72', '33', '47', '32', '37', '16', '94', '29'),
    ('53', '71', '44', '65', '25', '43', '91', '52', '97', '51', '14'),
    ('70', '11', '33', '28', '77', '73', '17', '78', '39', '68', '17', '57'),
    ('91', '71', '52', '38', '17', '14', '91', '43', '58', '50', '27', '29', '48'),
    ('63', '66', '04', '68', '89', '53', '67', '30', '73', '16', '69', '87', '40', '31'),
    ('04', '62', '98', '27', '23', '09', '70', '98', '73', '93', '38', '53', '60', '04', '23')]

i = 0
j = 0
len = len(matrix )
sum = 0

for i in range(0,len):

    if matrix [i][j] > matrix [i][j + 1]:
        print matrix [i][j]
        sum = sum + int(matrix [i][j])
    else:
        print matrix [i][j+1]
        j = j + 1
        sum = sum + int(matrix [i][j])
print sum 
```

谁能告诉我我错在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T08:40:21.783

抱歉，您使用的算法不正确。
您使用的称为[贪心算法](http://en.wikipedia.org/wiki/Greedy_algorithm)，但要使用的正确算法是[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)。主要区别在于贪婪选择当前最佳选项作为选择，而动态编程枚举每个可能的选项并生成一系列选择。

有一个简单的案例，您的解决方案（贪婪）会失败：

```
0,  
1, 0,  
0, 0, 10 
```

最好的结果是 10，但您的算法会给出 1。

自己想一想，然后尝试寻找有关动态编程的信息。Project Euler 是一个很棒的地方，当您提出解决方案时感觉非常棒。所以我暂时不会说太多。:)

**更新：**

> 但是问题：从下面三角形的顶部开始，移动到下面一行的“相邻数字”。我已经根据这个词制作了我的代码。抱歉打断你，但你能用这个词让我更清楚吗？

请注意，在给定的水平三角形上实际上`2^(n-1)`会有可能的路线。`n`并且在原始问题中`maximum total`意味着所有这些路线中的最大总数。
没有被授权者认为您的代码会在路线中找到最大值，因为您只会在任何步骤`ALL`中选择一个更好的选择。`TWO`

**再次更新：**

其实在这个问题中，既然`n=15`足够小，你也可以枚举所有`2^(n-1)=16384`可能的路线，总结每条路线的总值，最后在你得到的所有中得到一个最大值。然而，在[Project Euler](https://projecteuler.net/index.php?section=problems&id=67)的第 67 题中，问题规模`n`增加到 100，并且不可能枚举所有`2^(n-1)=633825300114114700748351602688`路线。

顺便说一句，我已经发布了一个指向动态编程维基页面的链接，但我担心作为初学者阅读它会很复杂。对此感到抱歉。
不过别担心，只要谷歌[动态编程教程](https://www.google.com/search?q=dynamic+programming+tutorial)，你就会看到很多有用的资源:)

# java - 在 Velocity 模板中定义数据库查询

> ID：14374811
> 
> 赞同：5
> 
> 时间：2013-01-17T08:24:34.470
> 
> 标签：java, velocity

我正在研究可以在我的项目中用作模板引擎的各种库，现在 Apache Velocity 看起来是一个不错的候选者。我对它的使用有以下疑问：

是否可以在模板中指定 SQL 数据库查询并使用查询的返回值来填充参数？我在 Velocity 用户指南中找到了以下示例：

```
Hello,

#set( $result = $query.criteria("name") )
Your username is $result. 
```

然而，该指南并没有解释太多关于执行 SQL 查询的内容。是否可以定义一个返回值并将该值分配给模板中的变量的 SQL SELECT 查询？我想知道类似下面的例子是否可行？

```
Hello,

#set( $result = $executeQuery("SELECT name FROM user") )
Your username is $result. 
```

如果您能对此有所了解，将不胜感激。有好心的人提供一个例子，或者指向我可以找到更多文档的位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:50:11.460

我会推荐类似[http://velosurf.sourceforge.net/](http://velosurf.sourceforge.net/)的东西，而不是直接嵌入查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T18:04:54.987

Velocity 是一个非常轻量级的**模板**引擎，它本身的功能很少。它通过将（由您）在上下文中定义的变量插入到模板文件中来[工作。](http://en.wikipedia.org/wiki/Variable_interpolation)默认情况下，上下文为**空**，这意味着模板没有要使用的变量。Velocity 不允许实例化自定义类的新对象，它只允许您使用字符串和数字文字，以及映射和列表：

```
#set ($n = 5)
#set ($s = 'Hello New World!')
#set ($m = {'four' : 4, 'five' : $n})
#set ($a = ['x', 'y', 'z']) 
```

您负责通过在插值之前使用有用的对象填充上下文来使 Velocity 变得“智能”。作为起点，您可以使用一些[速度工具](http://velocity.apache.org/tools/devel/)。您可以添加自己的工具，例如让您运行查询的 SQL 工具。或者，您可以使用[更高级别的框架，该框架使用速度](http://wiki.apache.org/velocity/PoweredByVelocity)，并且已经在模板中提供了丰富的工具集。

因此，要回答您的问题，您可以执行任何您想要的 SQL 语句，只要您在上下文中添加一个可以执行此类语句的对象。[您应该在他们的开发人员指南](http://velocity.apache.org/engine/releases/velocity-1.7/developer-guide.html)中阅读有关如何正确使用 Velocity 的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:27:32.203

以下内容适用于 HQL（您可以与其他人一起尝试使用此示例）

**显示如何显示给定查询的前 5 个结果的**一般示例：****

 **```
#set($hql = "<query here>")
#set($results = $xwiki.searchDocuments($hql, 5, 0))
#foreach ($item in $results)
 * $item
#end 
```

下面的示例将向您展示您可以编写的各种 HQL 查询。 **简单查询**

显示用户 XWiki.JohnDoe 创建的所有文档

```
#set($hql = "where doc.creator='XWiki.JohnDoe'") 
```

*附加信息*

你可能想看看这个[链接](http://velocity.apache.org/tools/devel/view/LinkTool.html)**

# android - 如何在彼此之后创建五个角度箭头按钮

> ID：14374818
> 
> 赞同：1
> 
> 时间：2013-01-17T08:24:55.207
> 
> 标签：android, android-layout, android-widget, android-listview

我正在尝试创建箭头样式按钮。它有五个角度，所以我无法将图片拉伸到正常的四个角度按钮。

![在此处输入图像描述](../Images/d1e7d5d3ffcb9ce13f812cbd3d020e09.png) ![在此处输入图像描述](../Images/7d239b97a24ddcd389ad2176e280ae4e.png) 您知道如何创建此按钮吗？这是形状还是画布？他们是如何创造这些的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:29:13.190

一个背景 9 补丁怎么样，只有侧面是有弹性的？

```
 __________
|          \
|__________/

  |------|
stretchy part 
```

更多信息在这里：http: [//developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

# x509certificate - 从公共证书（.der / .cer）中提取公钥

> ID：14374820
> 
> 赞同：1
> 
> 时间：2013-01-17T08:25:05.730
> 
> 标签：x509certificate

我正在尝试使用我想从公共证书（.der / .cer）中提取它的公钥来包装生成的对称密钥，当我传递用于包装对称密钥的公钥时，我得到一个“java.security .InvalidKeyException" 异常 "**仅支持以 'RAW' 格式存在的键**"

当我使用文件输入流加载公共证书时

**publicCertificate = new X509Certificate(new FileInputStream("src/resources/mydomain.com.der"));**

为了提取公钥，我正在使用这个 getPublicKey(); 方法

publicKey = publicCertificate.getPublicKey();

当我提取公钥并且它是 X.509 格式时，我就是这样的例外，我需要将其转换为 RAW 格式。

任何人都可以在这里帮助我。

提前致谢。

# sql - 从日期获取小时和分钟 (HH:MM)

> ID：14374822
> 
> 赞同：41
> 
> 时间：2013-01-17T08:25:11.480
> 
> 标签：sql, sql-server, sql-server-2008

我只想`hh:mm`从日期开始。

我怎么能得到这个？

我试过这个：

```
CONVERT(VARCHAR(8), getdate(), 108) 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-01-17T08:27:59.053

只需使用前 5 个字符...？

```
 SELECT CONVERT(VARCHAR(5),getdate(),108) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-12-28T13:48:38.630

您可以轻松地使用 Format() 函数，而不是仅适用于 sql 2012 及更高版本的所有转换

```
SELECT FORMAT(GETDATE(),'hh:mm') 
```

这是迄今为止进行所需转换的最佳方式。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-17T08:55:44.090

另一种使用`DATEPART`内置函数的方法：

```
SELECT cast(DATEPART(hour, GETDATE()) as varchar) + ':' + cast(DATEPART(minute, GETDATE()) as varchar) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-11-28T11:52:58.593

如果要显示 24 小时格式，请使用：

```
SELECT FORMAT(GETDATE(),'HH:mm') 
```

并显示 12 小时格式使用：

```
SELECT FORMAT(GETDATE(),'hh:mm') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-10T04:58:09.363

以下代码在“小时：分钟”列中为我们显示当前小时和分钟。

```
SELECT  CONVERT(VARCHAR(5), GETDATE(), 108) + 
(CASE WHEN DATEPART(HOUR, GETDATE()) > 12 THEN ' PM'
    ELSE ' AM'
END) 'Hour:Minutes' 
```

或者

```
SELECT  Format(GETDATE(), 'hh:mm') + 
(CASE WHEN DATEPART(HOUR, GETDATE()) > 12 THEN ' PM'
    ELSE ' AM'
END) 'Hour:Minutes' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-23T10:59:28.737

以下适用于 2008R2+ 以产生“HH:MM”：

```
select
case
when len(replace(replace(replace(right(cast(getdate() as varchar),7),'AM',''),'PM',''),' ','')) = 4
then '0'+ replace(replace(replace(right(cast(getdate() as varchar),7),'AM',''),'PM',''),' ','')
else replace(replace(replace(right(cast(getdate() as varchar),7),'AM',''),'PM',''),' ','') end as [Time] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-20T00:33:04.757

这是显示来自 SELECT 语句的字段的小时和分钟的语法。在此示例中，SQL 字段名为“UpdatedOnAt”并且是 DateTime。使用 MS SQL 2014 进行测试。

```
SELECT Format(UpdatedOnAt ,'hh:mm') as UpdatedOnAt from MyTable 
```

我喜欢将星期几显示为 3 个字母缩写的格式，并包括秒：

```
SELECT Format(UpdatedOnAt ,'ddd hh:mm:ss') as UpdatedOnAt from MyTable 
```

“as UpdatedOnAt”后缀是可选的。它为您提供了一个与您选择开始的字段相同的列标题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-14T02:43:57.540

您可以将日期时间转换为时间

```
select CAST(GETDATE() as time) 
```

如果你想要一个 hh:mm 格式

```
select cast(CAST(GETDATE() as time) as varchar(5)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-04T05:58:16.960

TO_CHAR(SYSDATE, 'HH') 我用它来获取 apex PL/SQL 中的当前小时

# embedded - 嵌入式系统和串行闪存磨损问题

> ID：14374825
> 
> 赞同：6
> 
> 时间：2013-01-17T08:25:21.607
> 
> 标签：embedded

我正在为我的嵌入式应用程序使用串行 NOR 闪存（基于 SPI），而且我必须在它上面实现一个文件系统。这使得我的 NOR 闪存更容易出现频繁的擦除和写入周期，其中出现磨损级别算法。我想问几个关于相同的问题：

首先，是否有可能为 Nor flash 实施磨损级别算法，如果是，那么为什么大多数时候我找到了 NAND Flash 而不是 NOR Flash 的解决方案？

其次，是否提供基于串行 SPI 的低成本 NAND 闪存，如果是，请分享相同的部件号。

第三，实现我们自己的 Wear Level 算法有多难？

第四，我也读过/听说工业级 NOR 闪存具有更高的擦除/写入周期（以百万计！！），这种理解是否正确？如果是，请让我知道这种 SPI NOR Flash 的详细信息，这也可能导致避免执行磨损级别算法，如果不是完全的话，因为我打算实现自己的磨损级别算法，它可能会给我一点在某些领域实现磨损级别算法的空间和便利性。

所有这些问题的制约因素是成本，我希望有低成本的解决方案来解决这些问题。

提前致谢

问候

阿迪亚米塔尔

(mittal.aditya12@gmail.com)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:05:36.327

实现磨损均衡算法并非易事，但也并非不可能：

1.  您的磨损均衡驱动程序需要知道文件系统何时不再使用磁盘块（这在现代 SSD 上被称为[TRIM支持）。](http://en.wikipedia.org/wiki/TRIM)实际上，这意味着您需要修改块驱动程序 API 和它上面的文件系统，或者让磨损均衡驱动程序知道文件系统的空闲空间映射。对于 FAT，第二个选项很容易，但可能已获得专利。

2.  您需要至少保留一个擦除单元 + 一些分配单元以允许擦除单元回收。保留更多块将提高性能

3.  您需要一个后台线程来执行异步擦除单元回收

4.  你需要测试，再测试一次。当我最后一次构建其中一个时，我们构建了一个 flash 的模拟，并在其上运行了真正的文件系统，并将系统折磨了数周。

5.  有很多专利涉及磨损均衡方面。同样的道理，Linux 内核中至少有两个磨损均衡层。

鉴于所有这些，许可第三方库可能具有成本效益，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:41:28.600

Atmel/Adesto 等公司制造了数十亿个小型串行闪存芯片。他们也有大量的在线文档。我怀疑串行闪存甲虫由于成本原因没有实现磨损均衡——它们通常使用的设备非常便宜，而且往往寿命有限。预计会使用更重和更长时间的大容量 4 线 NAND 闪存（例如 SD 卡）具有复杂的（相对）内置控制器，可以以透明的方式实现磨损均衡。

我不再使用单针接口串行闪存，部分原因是磨损问题。SD 卡对我来说足够便宜，即使它坏了，现场技术人员（甚至客户）也可以轻松地将其换掉。

实现磨损均衡算法。就开发时间而言（尤其是测试设备是否必须支持在电源故障等时不能损坏的文件系统）和 CPU/RAM 都太贵了。

如果您的产品对成本非常敏感，以至于您必须使用串行 NOR 闪存，我建议您忽略这个问题。

# java - c++ 代码可以读取 java .class 文件吗？

> ID：14374826
> 
> 赞同：1
> 
> 时间：2013-01-17T08:25:23.847
> 
> 标签：java, c++, compilation, .class-file

我已经在 java 中工作了一段时间，并且想了解 c++ 在编译和执行时是如何工作的。

我想知道是否有办法将编译的 c++ 类转换为 java 中的 .class 文件，反之亦然。我对可以由 java 代码和可以直接执行以查看结果的 c++ 代码使用的单一格式感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T08:58:28.747

如果您有足够的野心和固执，几乎所有事情*都可以完成*，但是，问题通常在于时间、成本和功能。

Java*语言*的核心是 C++ 的子集。添加了一些语法糖，可能会让您觉得还有“更多”，例如匿名类实现或指向外部类的隐藏指针，但这只是语法的一层薄薄，一旦编译代码就无关紧要了。

编译后，C++ 代码由机器码表示。Java 的字节码当然可以翻译成机器码——仅仅因为 JVM 会执行它并且抖动可以将它即时重新编译成机器码。

因此，粗略地说，每个 Java 代码，无论是否编译，都可以翻译成 C++。

但是，C++ 中有一些代码结构可以编译成机器代码，但它们*可能*可以用 Java 的字节码表示，但*不能*用 Java 语言表示。它有很多：从一些容易解决的问题，如将参数作为引用传递，到更复杂的，如指针 (TheList->) 算术，再到一些非常痛苦的翻译，如多重继承、自定义内存管理（即重载运算符new 和 delete)，或一些邪恶的类型，如联合。

因此，很明显，C++ 代码不能翻译成 Java。显然，C++ 编译的代码更不可翻译，因为 C++ 编译器经常对产品进行彻底优化，因此很难猜测“类”或“函数”是什么样的。

但是，如果您限制 C++ 语言，并限制自己不使用任何那些难以翻译的结构（参见“TheList”），那么您可以使 C++ 代码可翻译。同样，代码，但不是二进制文件。

这还不是全部。“可翻译性”是一回事，但另一回事是：它会运行吗？最显着的运行时差异是 GarbageCollector。假设您实际上设法将一些 Java 代码翻译成 C++，并将其与 C++ 应用程序对齐。您的 Java/C++ 代码执行并创建一些对象。谁来清理它们？通常，C++ 中没有 GC。因此，您的 Java 代码将泄漏——或者您将不得不为 Java/C++ 代码提供/实现某种 GC。不漂亮。当然，您可以限制 Java 代码不创建任何对象，d'oh。

不要误会我的意思：即使是那些难以翻译的东西，比如指针算术等，也是可翻译的：你可以*生成*大量的辅助/连线代码，将它们替换为“第二平台的适当东西”。然而，它会非常复杂和缓慢。我认为任何理智的人都不会尝试。

因此，似乎唯一可用的是非常有限的 C++ 代码 <-> 有限的 Java 代码。如果我们将问题简化为这个，那么是的，那应该是可翻译的。*但是*..

*翻译*代码是什么意思？你是怎么做到的？你必须阅读、处理、*分析*源代码，然后*以某种方式*用另一种语言生成其他代码。好吧，好吧。生成代码很简单，它只是文本。但是，你有没有试过*分析*代码？长话短说，让我告诉你，阅读/解析 Java 代码至少要**容易一个数量级**读取/解析 C++ 代码。Java 在一定程度上被设计成可以通过相对简单的算法轻松解析。如果您放弃任何优化尝试，编写 Java 解析器/编译器是相对简单的事情。另一方面，C++ 不是。像 Java 一样，要正确解析 C++，您必须有效地创建一个自定义 C++ 编译器，而且还需要一个预处理器。在某种程度上，您可能还需要实现链接器的某些部分。更糟糕的是，C++ 是从较旧的语言演变而来的，并且实际上包含了一些在你的一生中使用过的特性，这些特性使得语法*很难*准确处理（即，你曾经使用过**[替代标记集](http://cpprocks.com/if-arr-not_eq-0-and-not-false-alternative-tokens-in-c/)***吗？*? ..这只是开始:))。不过，不要太害怕！我只是想给你一种你试图触摸的感觉。你可能不需要写它。这样的工具已经存在，对于 Java（实际上真的很多）和 C++（很少，我敢打赌合理的工具不是完全免费的......或者你可能可以使用 GCC 工具集......）。它们产生源代码的机器可处理表示，如果你真的想做一些翻译工作，我建议你从那里开始。

当然，我的知识可能会落后几年，也许有人已经写过一些更无聊的工作翻译 - 我很想看看！

如果没有，我认为不值得。尝试在您的 C++ 应用程序中嵌入 Java 的运行时，或者通过 JNI 从 Java 到 C++ DLL。它要简单*得多*！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T08:43:33.887

编译后的 C++ 代码由操作系统加载。也就是说，C++ 链接器生成依赖于操作系统的可执行模块。而 Java .class 由 JVM 加载。JVM 执行 Java 字节码。

如果你想制作一个 Java 字节码加载器/运行器，你可以从 JVM 源代码开始。
=>[链接](http://openjdk.java.net/projects/jdk6/)

如果您的目标是在 Java 环境中加载/执行已编译的 C++ 代码，则需要以下内容。
（假设 32bit Windows 平台）

. PE 解析器/加载器 =>[链接](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)
。X86 CPU 指令解析器（？） =>[链接](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)
。X86 指令到 Java 字节码翻译器

简而言之，这几乎是不可能的。

对于简单的 C/C++ 与 Java 互操作，JNI 可以。[关联](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/jniTOC.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:37:48.400

我认为，[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)会很有用：

“Java 本地接口 (JNI) 是一种编程框架，它使在 Java 虚拟机 (JVM) 中运行的 Java 代码能够调用本地应用程序（特定于硬件和操作系统平台的程序）和编写的库，并由其调用在其他语言中，例如 C、C++ 和汇编。”

[以下](http://www.java-tips.org/other-api-tips/jni/simple-example-of-using-the-java-native-interface.html) 是如何编写一个使用 Java Native Interfac 的简单示例（编写一个调用 C 函数的 Java 应用程序）的好技巧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T08:48:00.153

将已编译的 C++ 代码转换为 JVM 字节码并不是一件容易的事，特别是如果您希望能够使用来自多个平台的已编译 C++ 代码。

[相反，为clang](http://clang.llvm.org/)创建一个 JVM 后端可能会更容易。这里的缺点是想要这个功能的人必须使用你的编译器。

简而言之，如果您想编写针对 Java 虚拟机的代码，那么请使用已经制作好的语言和编译器。像爪哇...

# java - 如何通过java代码在windows7中启用气球通知

> ID：14374828
> 
> 赞同：0
> 
> 时间：2013-01-17T08:25:24.937
> 
> 标签：java, windows, windows-7

有没有办法通过 JAVA 代码在 Windows 7 中启用气球通知？我说的是任务栏中通知区域上方弹出的通知气泡。

我编写的代码适用于 windowsXP。请告诉我如何进入windows7。在 windows7 中启用所需的任何设置更改..??

谢谢， 沙拉布

# cordova - 外部网页可以访问我的 phonegap javascript 吗？

> ID：14374829
> 
> 赞同：0
> 
> 时间：2013-01-17T08:25:27.807
> 
> 标签：cordova, phonegap-plugins

我正在PhoneGap 中编写一个iPhone 应用程序。我的要求是在 PhoneGap webview 中加载一个外部页面（如[http://asd.com](http://asd.com)），然后当用户单击网页上的按钮时，它会调用本机 PhoneGap js（如 BarcodeScanner.js）。即，“扫描条形码”按钮将位于外部网站上，然后单击该按钮（当页面通过我的应用程序中的 phonegap 加载时）调用 phonegap 的本机条形码扫描仪。我尝试在我的网页 src 中包含barcodeScanner.js 并将点击按钮链接到phonegap js，但它不起作用！我认为扫描仪对象将作为 null ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:09:24.060

我认为这是不可能的。假设您将使用 Phonegap 自己的 InAppBrowser 打开外部网页，其 API 允许您监听的唯一事件是“loadstart”、“loadstop”和“exit”。似乎没有任何方法可以收听常规页面事件。

查看 API 以获取更多信息：

[http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowserEvent](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowserEvent)

# sql - 使用 SQL 方法创建数据库视图以拆分多个列

> ID：14374833
> 
> 赞同：0
> 
> 时间：2013-01-17T08:25:35.740
> 
> 标签：sql, database

我想从我的表中创建视图，该表有一个列 Validity，数据格式为（键值）。该视图应该有两列，分别称为 Key 和 Value。

```
Create view [dbo].[A_V_DATA_T]
as 
Select
SUBSTRING(dbo.Table1.Validity, 0, PATINDEX('%-%', dbo.Table1.Validity))
as Key,
SUBSTRING(dbo.Table1.Validity,
     PATINDEX('%-%', dbo.Table1.Validity) + 1, LEN(dbo.Table1.Validity) )
     as Value
from 
dbo.dbo.Table1 
```

它是正确/优化的方式吗？是否有任何其他方法可以有效地实现这一目标。

感谢 K2G

# sitecore - Sitecore 获取存档项目

> ID：14374837
> 
> 赞同：2
> 
> 时间：2013-01-17T08:25:47.967
> 
> 标签：sitecore, sitecore6

我需要从“存档”中获取一个项目，以查看某个特定项目是否在存档中（如果已存档，请通知用户其已存档）。

[我在 StackOverflow Get Items from Archive](https://stackoverflow.com/questions/13557458/how-to-view-all-archived-items-in-sitecore-6)的示例中看到了 使用`Sitecore.Data.Archiving.SqlArchive.GetEntries`方法。但我没有得到`GetEntries`下的方法`Sitecore.Data.Archiving.SqlArchive`。

我正在使用 Sitecore 6.6。这种方法在 6.6 中不可用吗？有没有其他方法可以查询 Sitecore 存档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:55:10.533

要从当前数据库访问档案，请使用：

```
Sitecore.Context.Database.Archives["archive"]
Sitecore.Context.Database.Archives["recyclebin"] 
```

有 3 种方法足以从档案中获取任何内容：

```
Sitecore.Context.Database.Archives["archive"].GetArchivalId(itemId)
Sitecore.Context.Database.Archives["archive"].GetEntries(archivalId)
Sitecore.Context.Database.Archives["archive"].GetEntriesForUser(user, pageIndex, pageSize) 
```

# java - 大小限制 gzipinputstream

> ID：14374844
> 
> 赞同：0
> 
> 时间：2013-01-17T08:26:25.567
> 
> 标签：java, gzip, gzipinputstream

GZIP 的大小限制为 4GB，从[http://www.gzip.org/#faq10](http://www.gzip.org/#faq10)获得 。上面的链接中提到了一些补丁，可以读取超过 4GB 的文件。

我正在使用 GZIPInputStream 读取 .gz 文件。

而且我也能够读取超过 4GB 的大小。我知道我正在混淆 java 中的输入流和实际的 gzip 可执行文件。

但我想知道这是否可能是一个问题？

例如 - 是否会出现我无法在 java 中读取 6Gb .gz 文件的情况？直到现在我试过了，我没有遇到任何问题。

简而言之，gzip文件大小限制和java中的gzipinputstream之间有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:34:58.637

正如您所说，区分`gzip`工具和`gzip`文件格式很重要。

前者直到 1.2.4 版本才支持大于 4GB 的文件。

后者在[RFC 1952](http://www.ietf.org/rfc/rfc1952.txt)中指定，没有固有的 4GB 限制。

Java 的 RFC 1952 实现似乎也没有任何 4GB 限制。我经常使用（Java 1.6/1.7）读取大文件`GZIPInputStream`，从来没有遇到过问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:32:32.000

此限制仅涉及 gzip 程序。因此，如果编写得当，您的应用程序在读取/写入超过 4GB 的文件时应该不会有任何问题。

然而，请记住，如果人们试图读取您编写的 4GB+ 文件，他们可能会遇到一些问题，如果他们使用 gzip 程序。

# php - memcache + socket.io + php 应用程序来读取会话并互相聊天

> ID：14374848
> 
> 赞同：0
> 
> 时间：2013-01-17T08:26:37.463
> 
> 标签：php, node.js, socket.io, chat

[我在本文](http://psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/)中使用了 mike 编写的 node.js 的多房间聊天应用程序示例。并将其更改为使用从 php 会话处理程序中获取的会话数据，直到现在

这是我到目前为止写的代码的一部分

```
var express = require('express'),
    app = express(),
    memcache = require("memcache"),
    http = require('http'),
    server = http.createServer(app),
    io = require('socket.io').listen(server),
    co = require("./cookie.js"),
    php = require('phpjs'),
    codein = require("node-codein");

//check if user loggedin
// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
  var cookieManager = new co.cookie(req.headers.cookie);

  var client = new memcache.Client(11211, "localhost");
  client.connect();

    user = client.get("sessions/"+cookieManager.get("sec_session_id"), function(error, result){
            var session = JSON.parse(result);
            user = JSON.parse(session.name);
            user = user.username;
            storeUsername(user);
    });

});
function storeUsername(user){
// usernames which are currently connected to the chat

var usernames = {};
io.of('/private').authorization(function (handshakeData, callback) {
  console.dir(handshakeData);
  handshakeData.foo = 'baz';
  callback(null, true);
}).io.sockets.on('connection', function (socket) {
    usernames[socket.id] = socket;
    // when the client emits 'sendchat', this listens and executes
    socket.on('sendchat', function (data) {
        // we tell the client to execute 'updatechat' with 2 parameters
    io.sockets.emit('updatechat', socket.username, data);
    });

    // when the client emits 'adduser', this listens and executes
    socket.on('adduser', function(username){
        // we store the username in the socket session for this client
        socket.username = user;
        // add the client's username to the global list
        // echo to client they've connected
        if(php.in_array(socket.username,usernames)){
            delete usernames[socket.username];
        }else{
            usernames[user] = user;
            console.log('not exist');
        socket.emit('updatechat', 'SERVER', 'you have connected');
        // echo globally (all clients) that a person has connected
        socket.broadcast.emit('updatechat', 'SERVER', username + ' has connected');
        // update the list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
        }
    });

    // when the user disconnects.. perform this
    socket.on('disconnect', function(){
        // remove the username from global usernames list
        delete usernames[socket.username];
        // update list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
        // echo globally that this client has left
        socket.broadcast.emit('updatechat', 'SERVER', socket.username + ' has disconnected');
    });
});
}
server.listen(3000); 
```

例如，用户 master 将连接到我们的聊天室，他的用户名将存储在基于 php 的应用程序中。但是现在问题出在哪里？当用户 master 从我们浏览器的 2 或 3 选项卡连接时，他将连接到套接字服务器 3 或 4次，如果他发布一些数据，我们就会得到这个结果

```
master : hello
master : hello
master : hello 
```

我希望用户只连接到我的应用程序一次，并且可以只发布一次数据。现在我应该如何实现呢？

如果互相私信，我应该如何访问这些用户

我是 node.js.my bad.sorry 的新手

提前感谢您的帮助。+1 所有老师

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:10:56.820

1）你可以（似乎）， var app = require('express').express(); 2）在第一个 app.get 上，您不需要放置 2 次 JSON.parse，也许第二个 JSON.parse 不是您想要的（您是否试图检索用户抛出该字段？） 3）最重要：使用房间，必须使用 socket.join 加入房间，如果不这样做，socket.broadcast 将没有任何特殊效果...要从房间中删除用户，请使用 socket.leave

# java - 编辑器设计：更改后更新 Swing 组件

> ID：14374853
> 
> 赞同：0
> 
> 时间：2013-01-17T08:26:52.267
> 
> 标签：java, swing

在我的编辑器中，我有一个**LayersManager**和一个**LayersView**类。LayersManager 类包含用户当前正在使用的所有图层（想想 Photoshop 图层）。LayersView 是一个 JPanel，它列出了 LayersManager 中包含的层。

我想要做的是在从 LayersManager 调用 add(Layer) 或 remove(Layer) 方法时，通过从 JPanel 的容器中添加或删除 LayerComponent 来更新 LayersView JPanel。

换句话说，我想要的是一个反向的 ChangeListener，每当在 LayersManager 中进行更改时，都会自动联系 LayersView，从其容器中添加或删除 LayerComponent 并使自身无效。

所以我的问题是：是否有内置的标准监听器来做到这一点？听众是正确的方法吗？或者我应该只在 LayersManager 中包含对 LayersView 的引用并手动调用所需的方法（我怀疑这是糟糕的设计）？我想不出一种很好的（设计明智的）方式来实现我自己的听众。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:36:11.647

您可以使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。[Java 以Observable](http://docs.oracle.com/javase/6/docs/api/java/util/Observable.html)和[Observer](http://docs.oracle.com/javase/6/docs/api/java/util/Observer.html)类的形式内置了对这种模式的支持。

基本上，您`LayersManager`将扩展`Observable`并且您`LayersView`将实施`Observer`. 然后你会调用`addObserver`并`LayersManager`传入你的`LayersView`.

一旦到位，您可以在`LayersManager`您想要通知的更改发生时调用以下方法`LayersView`：

```
layersManager.setChanged();
layersManager.notifyObservers(); 
```

如果您希望侦听器接收一些数据，该`notifyObservers`方法可以将对象作为参数。`Observer`一旦`notifyObservers`被调用，您`LayersView`将`update`调用该方法。

# android - Android编码的好习惯例子？

> ID：14374855
> 
> 赞同：2
> 
> 时间：2013-01-17T08:26:55.170
> 
> 标签：android

我已经在互联网上搜索了一段时间，但找不到一个好的页面来介绍 android 编程中的好习惯示例。例如，我对如何命名类或 xml 文件（什么大小写字母，在哪里使用 _）以及命名变量和字段或编辑文本、前缀等文件感兴趣。

如果有人可以帮助我提供链接，我将不胜感激！1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:30:30.863

[Android 开发人员](http://source.android.com/source/code-style.html)对此有自己的答案。
如果您需要任何详细说明，我会根据您的评论更新我的答案 :-)
对于类使用 Java 命名约定：

*   第一个字母大写，类名中没有“_”，但每个新单词 ei 以大写字母开头：
    MyActivity 或 MySettingsActivity
*   对于 xml 对象命名，您还有一些其他限制，例如，第一个字母不能大写，因此我建议您使用通用的 java 方法命名约定（第一个字母不大写，然后新词大写，例如：buttonQuit 或 quitButton），如果它应该是按钮第一个还是最后一个取决于您，但坚持使用 1 样式。不要命名 1 个项目：nameTextView（或 nameTxtVw），然后是其他的 buttonSubmit（指标的顺序相同）。
*   对于 xml 文件，使用下划线“_”分隔的小写字母。

为什么很多java文件最后都叫Activity。它是用他们从超类“Activity”继承的名称来描述的。这是一个随着Android而变得大的原则，它使用它很多，如果这些类被继承的例子：（
超类=他们继承人名称的结尾）
AsyncTask = Task
Service = Service
Activity = Activity
Handler = Handler

我可以继续:)

对于xml文件，属于activity我个人喜欢在Activity之前叫他们名字，所以MainActivity的xml布局就是main.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:30:17.863

如果您正在寻找一些编码指南，请查看[贡献者的代码样式指南](http://source.android.com/source/code-style.html)

如果您想在不记住所有规则的情况下强制执行这些规则，并且您正在使用 eclipse，那么您可以使用 Android 团队提供的格式化规则： [android-formatting.xml](https://raw.github.com/android/platform_development/master/ide/eclipse/android-formatting.xml)。只需使用 Preferences->Java->Code Style->Formatter 将其导入 eclipse，单击 Import。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:40:00.697

您应该学习 Java 代码约定，因此请阅读以下内容： [java style](http://geosoft.no/development/javastyle.html)

最好练习总是以[骆驼式](http://en.wikipedia.org/wiki/CamelCase)命名类（例如 CustomerService） 类名应该是名词，

对于命名变量，您应该使用较低的 Camel 样式（例如 myVariable）

xml 文件应该是小写的，单词应该用下划线分隔

请阅读以上链接！

[编辑] 这部分在第一条评论之后添加！

对于良好的命名约定和类似的东西，我不知道有什么好的参考，但这些都是你可以在练习中找到的东西！例如：如果您的所有布局都用于活动，则“活动”前缀可能没有用。但如果有一堆其他风格（例如对话框布局），它可能有助于放置“活动”前缀。

另一个例子：我更喜欢为所有扩展 Activity 的类加上“Activity”前缀，因为 eclipse 显示基于名称的类，这可能有助于以某种方式更好地管理（但它违反 Java 命名约定！因为你应该为你的类名添加后缀具有超类名称）

对于命名 ID：您可以在资源前面加上它的名称（例如 titleStatus），这并不重要！但是您为了更好地管理您的 Id 并且不丢失大量名称，请始终遵循相同的规则，如果您的名称中的某个元素在您的状态中，例如“statusTitle”，则另一个元素应该是“statusDescription”而不是“descriptionStatus”！

# c++ - X11：获取虚假的窗口大小和位置

> ID：14374857
> 
> 赞同：1
> 
> 时间：2013-01-17T08:27:03.300
> 
> 标签：c++, x11

我在虚拟机中使用 Ubuntu 12.04。

左上角永远不正确。大约 90% 的时间宽度和高度是正确的。

`XMoveWindow`和朋友对窗口的渲染位置没有影响。

资源：

```
#include <stdio.h>
#include <GL/gl.h>
#include <GL/glx.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <X11/X.h>

int main(int argc, char **argv)
{
    Display *disp = XOpenDisplay(0);

    GLint attr[] = {GLX_RGBA, GLX_DEPTH_SIZE, 24, GX_DOUBLEBUFFER, None};
    XVisualInfo *vinfo = glXChooseVisual(disp,0,attr);

    Window rootWnd = DefaultRootWindow(disp);

    XSetWindowAttributes setWndAttr = {0};
    setWndAttr.colormap = XCreateColormap(disp,rootWnd,vinfo->visual,AllocNone);
    setWndAttr.event_mask =
        ExposureMask|
        StructureNotifyMask;

    Window wnd = XCreateWindow(
        disp,rootWnd,
        64,64,  // can be ignored (asinine)
        512,512,
        0,vinfo->depth,
        InputOutput,
        vinfo->visual,
        CWColormap|CWEventMask,
        &setWndAttr
        );

    XStoreName(disp,wnd,"What is this crap?");
    XMapWindow(disp,wnd);

    // WMs allowed to completely ignore these, too?
    //XMoveWindow(disp,wnd,128,128);
    //XMoveResizeWindow(disp,wnd,128,128,256,256);

    Atom closeWndAtom = XInternAtom(disp,"WM_DELETE_WINDOW",0);
    XSetWMProtocols(disp,wnd,&closeWndAtom,1);

    GLXContext ctx = glCreateContext(disp,vinfo,0,GL_TRUE);
    glXMakeCurrent(disp,wnd,ctx);

    bool run = true;
    XEvent evt;
    while(run){
        XNextEvent(disp,&evt);
        switch(evt.type){
        case Expose:
            {
                XWindowAttributes wndAttr;
                XGetWindowAttributes(disp,wnd,&wndAttr);

                // these are NEVER correct (0,0 most of the time)
                printf("%i, %i\n",wndAttr.x,wndAttr.y);

                // these are correct, most of the time
                //
                // occasionally, either width or height will be 0
                glViewport(0,0,wndAttr.width,wndAttr.height);

                glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
                glBegin(GL_TRIANGLES);
                glColor3f(1,0,0);
                glVertex2f(0,0);
                glColor3f(0,1,0);
                glVertex2f(1,0);
                glColor3f(0,0,1);
                glVertex2f(0,1);
                glEnd();

                glXSwapBuffers(disp,wnd);
            }break;
        case ClientMessage:
            {
                run = false;
            }break;
        }
    }

    glXDestroyContext(disp,ctx);
    XDestroyWindow(disp,wnd);
    XCloseDisplay(disp);
    return 0;
} 
```

注意：两个可能存在拼写错误，因为从 VM 中粘贴的格式不正确。结果，我不得不重新输入它。

### 编辑：

因为这里需要清晰：我不在乎窗口管理器对我给它的位置做了什么，我有兴趣从窗口管理器可靠地*检索这些信息。*我给出的位置与屏幕上窗口的渲染位置不对应。例如：屏幕右下方出现窗口，返回给我的坐标是`(0,0)`。使用鼠标移动窗口不会改变`XGetWindowAttributes`返回的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-08T22:27:34.217

您似乎正在从 Expose 事件中轮询窗口信息，该事件当时可能没有关于窗口的最新信息。使用 ConfigureNotify 事件及其属性来获取更新的位置和大小：

```
// you need to have this in your event mask(you've already got that):
EVENT_MASK |= StructureNotifyMask;

// in your event loop
// ...
case ConfigureNotify: // resize or move event
    printf("x: %d, y:%d, width: %d, height: %d\n", 
           event.xconfigure.x,
           event.xconfigure.y,
           event.xconfigure.width,
           event.xconfigure.height);
    break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:16:33.583

我认为，一种选择是使用***XTranslateCoordinates***：

```
XTranslateCoordinates(dpy,
                      wnd,         // get position for this window
                      root_window, // something like macro: DefaultRootWindow(dpy)
                      0, 0,        // local left top coordinates of the wnd
                      &dest_x,     // these is position of wnd in root_window
                      &dest_y,     // ...
                      &unused); 
```

您还可以使用***XGetGeometry***而不是***XGetWindowAttributes***来获取可绘制对象的左侧、顶部、宽度和高度。据我所知***XGetWindowAttributes***调用***XGetGeometry***来检索一些属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-02T08:31:31.333

我知道，我是 necroposter，但我也在寻找答案，发现不正确的坐标与窗口管理器有关。

```
 {
    case ConfigureNotify :
        printf("%d, %d : %u, %u\n",
                event.xconfigure.x, event.xconfigure.y,
                event.xconfigure.width, event.xconfigure.height);
        break;
    }

# Moving window
353, 100 : 791, 600
363, 113 : 791, 600
# Changing window size
1, 24 : 791, 600 << Pay attention to this
363, 113 : 791, 600
363, 113 : 791, 600 
```

有关您需要阅读 ICCCM 的其他信息（4.1.5\. 配置窗口，4.2.3\. 窗口移动，4.2.4\. 窗口调整大小）[https://tronche.com/gui/x/icccm/sec-4。 html#s-4.1.5](https://tronche.com/gui/x/icccm/sec-4.html#s-4.1.5)

# php - 使用 php 或 html 在网络浏览器上显示 ms 文档

> ID：14374861
> 
> 赞同：1
> 
> 时间：2013-01-17T08:27:11.557
> 
> 标签：php, html

如何像在 html 中显示图像一样将 ms word 文档显示到 Web 浏览器。我正在使用 php 和 html，我使用 iframe 进行了尝试，但我的想法没有奏效。

```
<iframe name="houses" src="report.doc" width="580"></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:30:41.673

尝试这个 ：

```
<?php
        $word = new COM("word.application") or die ("Could not initialise MS Word object.");
        $word->Documents->Open(realpath("Sample.doc"));

        // Extract content.
        $content = (string) $word->ActiveDocument->Content;

        echo $content;

        $word->ActiveDocument->Close(false);

        $word->Quit();
        $word = null;
        unset($word);   
?> 
```

有关更多信息，请参阅 [此](http://www.developertutorials.com/tutorials/php/extracting-text-from-word-documents-via-php-and-com-81/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:31:59.440

您可以使用 Google 文档：

```
<iframe src="http://docs.google.com/gview?url=http://www.example.com/report.doc"></iframe> 
```

# thrift - Thrift 如何实现分页

> ID：14374866
> 
> 赞同：0
> 
> 时间：2013-01-17T08:27:43.147
> 
> 标签：thrift

我用thrift。我想做分页逻辑。怎么办？

例如在java中我可以做到

```
Class Page{
  public int total; 
  public int pageSize; 
  public int pageNum; 
  public int totalPageNum; 
  public List<T> elements; 
}
Page findXx（）{
   return page;
} 
```

如何通过节俭来做到这一点。thrift 不支持泛型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:12:29.607

你可以用map来做。但是很丑。</p>

```
 struct PageRange {
        1: i32 startPageNum
        2: i32 pageSize
        3: i32 totalPageNum
        4: i32 totalNum
}
  map<PageRange,list<T>> query（）； 
```

# android - GCM（谷歌云消息）如何工作？

> ID：14374876
> 
> 赞同：-2
> 
> 时间：2013-01-17T08:28:32.287
> 
> 标签：android

我是否需要我的应用程序服务器才能使用 GCM（谷歌云消息传递）在另一部 android 手机上发送通知？如果没有，那么我怎样才能将通知发送到另一部安卓手机？有人可以解释一下 GCM 是如何工作的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:16:38.137

在您的应用程序包中使用以下代码 GCMIntentService 类

```
import java.util.Iterator;
import java.util.Set;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.util.Log;
import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService {

    public ParseNotification parseNotification;

    public String pushMessage = "", push_Count = "0", company_Name,
            project_Name, config_Id, att_ID, push_Id, survey_Id, S_or_C,
            systemName, company_Id;
    int value;

    public GCMIntentService() {
        super(AppsData.SENDER_ID);
    }

    protected void onRegistered(Context context, String registrationId) {
        AppsData.GCM_REGISTERED_ID = registrationId;
        SharedPreferences settings = getSharedPreferences("GCM_ID",
                MODE_PRIVATE);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString("GCM_DEVICEID", registrationId);
        editor.commit();
    }

    protected void onUnregistered(Context context, String registrationId) {
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.e("Prashant", "Action : " + intent.getAction());

        Set<String> set = intent.getExtras().keySet();
        Iterator<String> iterator = set.iterator();
        JSONObject object = new JSONObject();
        while (iterator.hasNext()) {
            String key = iterator.next();
            Log.v("Prashant ==== ", key + " : " + intent.getStringExtra(key));
            try {
                object.put(key, intent.getStringExtra(key));
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
        System.out.println(object);
        parseNotification = new ParseNotification();
        PushNotificationBean notification = ParseNotification
                .parseNotification(object);
        pushMessage = notification.getAlert();
        push_Count = notification.getBadge();
        company_Name = notification.getC_name();
        project_Name = notification.getP_name();
        config_Id = notification.getConf_id();
        systemName = notification.getSystemName();
        att_ID = notification.getAtt_id();
        push_Id = notification.getPrid();
        survey_Id = notification.getEid();
        S_or_C = notification.getSc();
        company_Id = notification.getCompany_Id();
        AppsData.COMPANY_NAME = company_Name;
        AppsData.PROJECT_NAME = project_Name;
        AppsData.SYSTEM_NAME = systemName;
        AppsData.ATTEND_ID = att_ID;
        AppsData.CONFID_ID = config_Id;
        AppsData.eventID = survey_Id;
        AppsData.COMPANY_ID = company_Id;
        value = Integer.parseInt(S_or_C);

        SharedPreferences sharedPrefs = getSharedPreferences("IS_LOGGED_IN",
                MODE_WORLD_READABLE);

     } else {

        if (AppsData.OFFLINE_DATA_FLAG == true) {
        } else {
            generateNotification(context, pushMessage);
        }

    }

    @Override
    protected void onDeletedMessages(Context context, int total) {

    }

    @Override
    public void onError(Context context, String errorId) {
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        return super.onRecoverableError(context, errorId);
    }

    public void generateNotification(Context context, String message) {
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        int icon = R.drawable.ic_launcher;
        CharSequence tickerText = message;
        long when = System.currentTimeMillis();
        Notification notification = new Notification(icon, tickerText, when);

        int pushCount = Integer.parseInt(push_Count);
        notification.number = pushCount;

        try {
        } catch (Exception e) {
            e.printStackTrace();
        }

        Intent intent = new Intent(context, AlertDialogActivity.class);
        intent.putExtra("VALUE", value);
        intent.putExtra("MESSAGE", pushMessage);
        intent.putExtra("COMPANY_NAME", company_Name);
        intent.putExtra("PROJECT_NAME", project_Name);
        intent.putExtra("SYSTEM_NAME", systemName);
        intent.putExtra("ATTEND_ID", att_ID);
        intent.putExtra("CONFID_ID", config_Id);
        intent.putExtra("EVENTID", survey_Id);
        intent.putExtra("COMPANY_ID", company_Id);
        intent.setAction("" + Math.random());

        PendingIntent contentIntent = PendingIntent.getActivity(
                getApplicationContext(), 0, intent,
                PendingIntent.FLAG_CANCEL_CURRENT);

        notification.flags = Notification.FLAG_AUTO_CANCEL;
        notification.defaults |= Notification.DEFAULT_SOUND;

        notification.setLatestEventInfo(context, "EAG", message, contentIntent);
        mNotificationManager.notify(0, notification);

    }

} 
```

在您的 androidmanifest 中添加以下服务

```
 <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="Your app package" />
            </intent-filter>
        </receiver>
        <receiver android:name="com.eag.utils.NetworkReciver" >
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" /> 
```

在应用此代码之前，请点击[此处](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:33:28.163

对于 GCM，请参阅本教程，它可能会对您有所帮助，

[http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/)

& [http://avilyne.com/?p=267](http://avilyne.com/?p=267)

这对我来说可以。

# java - 使用反射设置对象属性

> ID：14374878
> 
> 赞同：33
> 
> 时间：2013-01-17T08:28:45.920
> 
> 标签：java, reflection, accessor

我按名称获取类，我需要用各自的数据更新它们，我的问题是如何用 java 来做我想添加一些虚拟数据的方法。我不知道类类型我只是获取类名并使用反射来获取他的数据

我使用此代码来获取类实例和

```
Class<?> classHandle = Class.forName(className);

Object myObject = classHandle.newInstance();

// iterate through all the methods declared by the class
for (Method method : classHandle.getMethods()) {
    // find all the set methods
    if (method.getName().matches("set[A-Z].*") 
```

并且知道我找到了我想用数据更新它的 set 方法的列表，我该怎么做。

假设在类名中我得到了人，并且该类有 setSalary 和 setFirstName 等，我该如何通过反射来设置它们？

```
public class Person {

    public void setSalery(double salery) {
        this.salery = salery;
    }

    public void setFirstName(String FirstName) {
        this.FirstName = FirstName;
    }   
} 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-17T08:36:07.980

您也可以使用反射直接将值设置为属性，而不是尝试调用 setter。例如：

```
public static boolean set(Object object, String fieldName, Object fieldValue) {
    Class<?> clazz = object.getClass();
    while (clazz != null) {
        try {
            Field field = clazz.getDeclaredField(fieldName);
            field.setAccessible(true);
            field.set(object, fieldValue);
            return true;
        } catch (NoSuchFieldException e) {
            clazz = clazz.getSuperclass();
        } catch (Exception e) {
            throw new IllegalStateException(e);
        }
    }
    return false;
} 
```

称呼：

```
Class<?> clazz = Class.forName(className);
Object instance = clazz.newInstance();
set(instance, "salary", 15);
set(instance, "firstname", "John"); 
```

* * *

仅供参考，这是等效的*通用吸气剂*：

```
@SuppressWarnings("unchecked")
public static <V> V get(Object object, String fieldName) {
    Class<?> clazz = object.getClass();
    while (clazz != null) {
        try {
            Field field = clazz.getDeclaredField(fieldName);
            field.setAccessible(true);
            return (V) field.get(object);
        } catch (NoSuchFieldException e) {
            clazz = clazz.getSuperclass();
        } catch (Exception e) {
            throw new IllegalStateException(e);
        }
    }
    return null;
} 
```

称呼：

```
Class<?> clazz = Class.forName(className);
Object instance = clazz.newInstance();
int salary = get(instance, "salary");
String firstname = get(instance, "firstname"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-12T18:07:16.890

更新名字

*   首先找到要更新的字段
*   然后找到 mutator（它接受字段类型的参数）
*   最后在具有新值的对象上执行 mutator：

```
Field field=classHandle.getDeclaredField("firstName");
Method setter=classHandle.getMethod("setFirstName", field.getType());
setter.invoke(myObject, "new value for first name"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:33:26.840

```
if (method.getName().matches("set[A-Z].*") {
  method.invoke(person,salary)
  // and so on
} 
```

`method.getPagetParameterTypes()` 要了解您可以根据结果发出的参数，请构建您的参数并提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-06T08:34:45.330

```
package apple;

import java.lang.reflect.Field;
import java.lang.reflect.Type;
import java.util.Map.Entry;
import java.util.Set;

import com.google.gson.Gson;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonSyntaxException;

/*
* Employe Details class
 */
class Employee {

   private long id;
   private String name;
   private String userName;
   private Address address;
   private Contact contact;
   private double salary;

   public long getId() {
     return id;
   }
   public void setId(long id) {
      this.id = id;
   }
   public String getName() {
     return name;
   }
   public void setName(String name) {
    this.name = name;
   }
public String getUserName() {
    return userName;
}
public void setUserName(String userName) {
    this.userName = userName;
}
public Address getAddress() {
    return address;
}
public void setAddress(Address address) {
    this.address = address;
}
public Contact getContact() {
    return contact;
}
public void setContact(Contact contact) {
    this.contact = contact;
}
public double getSalary() {
    return salary;
}
public void setSalary(double salary) {
    this.salary = salary;
}
}

/*
 * Address class for employee
*/
class Address {

private String city;
private String state;
private String country;
private int pincode;

public String getCity() {
    return city;
}
public void setCity(String city) {
    this.city = city;
}
public String getState() {
    return state;
}
public void setState(String state) {
    this.state = state;
}
public String getCountry() {
    return country;
}
public void setCountry(String country) {
    this.country = country;
}
public int getPincode() {
    return pincode;
}
public void setPincode(int pincode) {
    this.pincode = pincode;
}

}

/*
 * Contact class for Employee
 */
 class Contact {

private String email;
private String contactNo;

public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}
public String getContactNo() {
    return contactNo;
}
public void setContactNo(String contactNo) {
    this.contactNo = contactNo;
}

}

public class Server {

public static void main(String args[]) throws JsonSyntaxException, Exception{
    Gson gson = new Gson();

    /*
     * Old Employee Data
     */
    Address address = new Address();
    Contact contact = new Contact();
    Employee employee = new Employee();
    address.setCity("shohna-road");
    address.setCountry("INDIA");
    address.setPincode(12201);
    address.setState("Hariyana");
    contact.setContactNo("+918010327919");
    contact.setEmail("shivritesh9984@gmail.com");
    employee.setAddress(address);
    employee.setContact(contact);
    employee.setId(4389573);
    employee.setName("RITESH SINGH");
    employee.setSalary(43578349.345);
    employee.setUserName("ritesh9984");
    System.out.println("Employee : "+gson.toJson(employee));

    /* New employee data */
    Employee emp = employee;
    address.setCity("OMAX");
    emp.setAddress(address);
    emp.setName("RAVAN"); 

    /* Update employee with new employee Object*/
    update(employee, gson.fromJson(gson.toJson(emp), JsonObject.class) );

    System.out.println("Employee-Update : "+gson.toJson(employee));
}

/*
 * This method update the @target with new given value of new object in json object form
 */
public static  void update(Object target, JsonObject json) throws Exception {
   Gson gson=new Gson();
   Class<? > class1 = target.getClass();

   Set<Entry<String, JsonElement>> entrySet = json.entrySet();
   for (Entry<String, JsonElement> entry : entrySet) {
       String key = entry.getKey();
       Field field = class1.getDeclaredField(key);
       field.setAccessible(true);
       Type genType = field.getGenericType();

       field.set(target,
               gson.fromJson(entry.getValue(),genType));
   }

   }

 } 
```

# .net - 如何使用 Inetlab.SMPP v. 1.0 通过 SMPP 发送多条短信，30 天评估版。

> ID：14374890
> 
> 赞同：0
> 
> 时间：2013-01-17T08:29:21.770
> 
> 标签：.net, asp-classic, smpp

我正在创建一个 asp .net 项目来使用 Inetlab.SMPP v. 1.0 实施 SMPP，30 天评估版。我可以成功发送单个按摩，但是当尝试发送多个按摩时，我没有发送。它显示成功响应，但收件人没有收到任何短信。我想知道是因为评估版的限制还是我的实施错误。这是我正在使用的方法

```
client.PrepareSubmit(SubmitMode.ShortMessage, 0, 1, "ABCDEF", destination, DataCodings.UCS2, "TEXT"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:58:16.960

这取决于您的代码中的目的地。我怀疑`destination`是一个字符串，在这种情况下你正在使用[这个重载](http://www.inetlab.com/Help/Inetlab.SMPP/html/M_Inetlab_SMPP_SmppClient_PrepareSubmit_1.htm)。

有一个不同的重载需要`List<string>`发送给多个收件人，记录[在这里](http://www.inetlab.com/Help/Inetlab.SMPP/html/M_Inetlab_SMPP_SmppClient_PrepareSubmit_3.htm)。

[常见问题页面](http://www.inetlab.com/Help/Inetlab.SMPP/html/910a3293-b5b3-47a4-8e43-6d3844516be1.htm)上有一个如何发送给多个收件人的示例：

```
List<DestinationAddress> msisdnList = new List<DestinationAddress>(); 

DestinationAddress da1 = new DestinationAddress(); 
da1.Address = "11111111111"; 
da1.Npi = byte.Parse(tbDestAdrNPI.Text); 
da1.Ton = byte.Parse(tbDestAdrTON.Text); 
msisdnList.Add(da1); 

DestinationAddress da2 = new DestinationAddress(); 
da2.Address = "22222222222"; 
da2.Npi = byte.Parse(tbDestAdrNPI.Text); 
da2.Ton = byte.Parse(tbDestAdrTON.Text); 
msisdnList.Add(da2); 

List<SubmitMulti> sMulti = client.PrepareSubmit(SubmitMode.ShortMessage, byte.Parse(tbSrcAdrTON.Text), byte.Parse(tbSrcAdrNPI.Text), tbSrcAdr.Text, msisdnList, DataCodings.UCS2, tbSend.Text); 
client.SubmitAsync(sMulti); 
```

# logging - Logback + SL4J + JBoss EAP 6.0 中的日志配置

> ID：14374891
> 
> 赞同：2
> 
> 时间：2013-01-17T08:29:25.950
> 
> 标签：logging, jboss7.x, slf4j, logback

我正在尝试在部署在 JBoss EAP 6.0 上的 Web 应用程序中使用 Logback 和 SL4J。根据[Logback 和 Jboss 7 - 不一起工作？](https://stackoverflow.com/questions/9518687/logback-and-jboss-7-dont-work-together). 但是，即使这样也行不通！该应用程序似乎忽略了`WEB-INF/classes`文件夹中的我的 logback.xml。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-20T08:49:10.917

您应该尝试使用 log4j。我记得不久前学习了本教程并且它有效。 [http://www.mastertheboss.com/jboss-log/using-log4j-with-jboss-as-7-and-wildfly](http://www.mastertheboss.com/jboss-log/using-log4j-with-jboss-as-7-and-wildfly)

您需要使用排除项，因为 JBOSS 预装了很多模块/jar。希望这可以帮助！

# html - 当菜单根据宽度换行时，css下拉菜单中的子菜单在悬停之前消失

> ID：14374893
> 
> 赞同：0
> 
> 时间：2013-01-17T08:29:36.997
> 
> 标签：html, css

我在使用下拉菜单时遇到问题。当导航的内容根据其宽度和菜单项相互堆叠的情况进行换行时，此时子菜单出现在距它一定距离处，并在我悬停之前消失。帮助！我正在处理这段代码。小提琴链接如下。

```
<nav>
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">Menu1</a>
        <ul>
            <li><a href="#">Option1</a></li>
            <li><a href="#">Option2</a></li>
            <li><a href="#">Option3</a>
                <ul>
                    <li><a href="#">Sub-option1</a></li>
                    <li><a href="#">Sub-option2</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#">Menu2</a>
        <ul>
            <li><a href="#">Option1</a></li>
            <li><a href="#">Option2</a></li>
        </ul>
    </li>
    <li><a href="#">Menu3</a></li>
</ul> 
```

CSS：

```
 nav ul ul {
    display: none;
}

nav ul li:hover > ul {
    display: block;
}
nav ul { 
    box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
    padding: 0 20px;
    list-style: none;
    position: relative;
    display: inline-table;
}
nav ul:after {
        content: ""; clear: both; display: block;
}
nav ul li {
    float: left;
}
nav ul li:hover {
    background: #4b545f;
    background: linear-gradient(top, #4f5964 0%, #5f6975 40%);
    background: -moz-linear-gradient(top, #4f5964 0%, #5f6975 40%);
    background: -webkit-linear-gradient(top, #4f5964 0%,#5f6975 40%);
}
nav ul li:hover a {
    color: #fff;
}

nav ul li a {
    display: block; padding: 25px 40px;
    color: #757575; text-decoration: none;
}
nav ul ul {
    background: #5f6975; border-radius: 0px; padding: 0;
    position: absolute; top: 100%;
}
nav ul ul li {
    float: none; 
    border-top: 1px solid #6b727c;
    border-bottom: 1px solid #575f6a;
    position: relative;
}
nav ul ul li a {
    padding: 15px 40px;
    color: #fff;
}   
nav ul ul li a:hover {
    background: #4b545f;
}
nav ul ul ul {
    position: absolute; left: 100%; top:0;
} 
```

[小提琴](http://jsfiddle.net/sagarguhe/xhABB/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:45:59.663

有几种解决方案。

**解决方案 1**

设置主**UL**元素的**宽度。**所以菜单不会在调整大小时中断。

 *** * *

**解决方案 2**

以百分比或 em 为单位设置大小，尤其是**font-size**，以便所有内容都可以缩放并且易于调整大小。

* * *

**解决方案 3（可选）**

使用响应式设计，并针对不同的分辨率（460 - 760、760 - 960、1000+）调整菜单。这需要更多的工作，但它的回报更大。:)**

# php - 保存按钮单击 jquery 后关闭 ModalPopup

> ID：14374895
> 
> 赞同：0
> 
> 时间：2013-01-17T08:29:50.397
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我正在开发一个代码点火器。在我的视图页面中，我有一个模式弹出窗口。在modalpopup中，我放了form.so我想要的是当用户点击保存按钮时..模型通过jquery弹出关闭..

这是我的保存和关闭按钮...如果我单击关闭按钮，模型会很好地关闭，但是因为保存按钮我已经将控制权交给了 jquery，所以我想在那里关闭我不知道

```
 <a href="#" class="btn" data-dismiss="modal">Close</a> 
   <a id = "save" class="btn x" data-dismiss="modal">Save changes</a>

   <script type="text/javascript">
    $('#save').click(function() { //  $("#form").serialize()

var check_no = $('#check_no').val();
var form_data = {
        check_no: $('#check_no').val(),

};

$.ajax({
    url: "<?php echo site_url('checkDetailsController/addCheckDetails'); ?>",
    type: 'POST',
    data: form_data,
    dataType: 'json',
    success: function(msg) {
        if(msg.res == 1)
        {
            alert('true')

        }
        else{
            alert("false");          
          }

    }
});

return false;
     });

  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T20:51:21.327

保存函数必须使用 $('#dialog').dialog("close"); 而不是 $(this).dialog('close')。这会导致调用附加到对话框对象的 close 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:11:10.220

如果您使用 jqueryUI 中的对话框，则可以使用按钮选项。

```
$('#yourcontainer').dialog({
        buttons : {
            // Save and close button
            'Save' : function () {
                // your javascript code for saving
                $(this).dialog('close');
            },
            // Cancel button
            'Close' : function () {
                $(this).dialog('close');
            }
        },
        // and your other settings
    }); 
```

# adobe-indesign - 如何在不复制/粘贴的情况下将多个 XML 文件导入到一个 inDesign 文档中

> ID：14374896
> 
> 赞同：1
> 
> 时间：2013-01-17T08:29:54.420
> 
> 标签：adobe-indesign

我有几个具有相同结构的 XML 文件。只是数据不同。我用 XML 标签和 InDesign 单元格之间的自动映射创建了一个 Indesign 布局。今天，我必须为每个 XML 文件创建一个新的 InDesign 文档来导入 XML 数据。一切正常。然后为了让所有 Indesign 布局一个接一个地设置为一个 Indesign 布局，我必须使用复制/粘贴功能。我的意思是，例如，在我的 Indesign 文档的第 1 页中，我需要具有第一次导入的 XML 内容。在我的 Indesign 文档的第 2 页中，我需要第二次导入的 XML 内容，等等......每个 Indesign 页面都具有相同的布局但具有不同的数据。

我的问题如下： How to repeat this process automatically known that the number of XML files could be unknown

非常感谢您的回答。

# sql-server - 在 IBM Cognos Framework Manager 上恢复项目

> ID：14374902
> 
> 赞同：2
> 
> 时间：2013-01-17T08:30:03.780
> 
> 标签：sql-server, business-intelligence, cognos

最近我安装了 Cognos 8 Business Intelligence 作为试用版。我还在 SQL Server 上恢复了示例 Great Outdoors 数据库。我可以很好地连接到 SQL Server，还可以使用 Framework Manager 开发自己的报告包。

为了继续学习产品，我正在阅读 Dean Browne 等人的书中的教程。“IBM Cognos 商业智能 V10.1 手册”。（我知道严格来说这是针对不同版本的，但我认为在这种情况下并不重要）。

我已经下载了本书附带的项目文件，并在 Framework Manager 中打开了它。一切似乎都正常，但项目中的查询主题和其他项目未正确链接到 SQL Server 数据库中的数据。

如何调整项目，使其正确链接到我机器上的数据库？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:41:12.030

Ah Fun - 1\. 打开 FM 包并检查有关数据源连接的详细信息 - 密切注意名称设置。

1.  在 Cognos 门户中创建一个新的数据源连接以正确连接到您的数据库（您可能希望尝试将其命名为与在步骤 1 中找到的名称完全相同或相似的名称。）

    *   还要确保您可以通过计算机直接连接到数据库（驱动程序/等），因为 fm 在打开模型后使用本地驱动程序与数据库交互）。***请参阅下面的注释
2.  将此新连接添加到损坏的 FM 模型，以便您可以查看连接的外观（导入表格只是为了在模型中获取新的工作连接）。观察新连接是如何在表/查询中命名和引用的。

3.  这很糟糕，但根据 FM 包中查询的性质，更新所有内容的最快/方法是在 FM XML 文件本身中进行良好的搜索和替换。实际上，其中可能有两个包含数据源名称的文件，但我可以向您保证，当您正确搜索和替换时，它会完美运行。

4.  创建 FM 模型的备份（您不会编辑的模型）。这实际上是备份文件夹树，因为 FM 模型由多个文件组成，但其中只有一个/两个包含 xml 定义，其中包含您需要搜索/替换的查询主题和数据连接。

5.  清楚地识别在您的 FM 模型中不起作用的数据源名称，并准确记下它们。您将有效地编辑 FM xml 并使用 Cognos 门户中的工作数据源连接进行全局搜索和替换。您可能需要稍微搜索一下 XML 文件，以熟悉数据源连接的存储位置，以便切实了解如何搜索/替换。

***** 很重要。在 FM 中工作时，请记住 FM 从 Cognos 门户获取数据源连接的列表和属性，但在开发 FM 应用程序时，它使用与数据库的本地连接来使用与门户中相同的名称设置与数据库交互，这意味着您应该能够使用与 Cognos Connection 中使用的相同连接信息通过计算机直接连接到数据源，而无需使用 cognos 产品，否则您将永远无法使用 FM 产品进行开发。不要认为 FM 应用程序使用 Cognos 来实际连接和使用数据库，它只使用 Cognos 来获取 Cognos 中设置的连接列表。

# rspec-rails - Rails/RSpec "it" 方法描述和字符串插值

> ID：14374903
> 
> 赞同：3
> 
> 时间：2013-01-17T08:30:04.560
> 
> 标签：rspec-rails

以下是我的 RSpec 代码片段：

```
describe UsersController do
  def mock_authentication_token(user, token_string)
    ...
    ...
  end

  def create_data
    @date_format = '%Y-%m-%d %H:%M:%S'
    today = Time.now
    @today_str = today.strftime(@date_format)
    ...
    ..
    ..
  end

  before do
    @current_user = Factory(:client)
    authtoken_str = "client auth token string"
    mock_authentication_token(@current_user, authtoken_str)
  end

  context "action: index" do
    before do
      create_data
      @params = @params.merge(limit: 5)
    end

    it "should return the more link with date set to 1 second ahead of #{@today_str}" do
      get :index, @params

      body = JSON.parse response.body

      ...
      ...
      ...
    end
end 
```

此示例**“应返回日期设置为比 #{@today_str} 提前 1 秒的更多链接”**失败时它不会在失败的示例描述中打印由帮助方法**create_data设置的实例变量 @today_str 的值。**

它只是打印：*应该返回日期设置为提前 1 秒的更多链接*

似乎**it**方法不允许字符串插值。真的是这样吗？如果是，我如何实现所需的行为。

谢谢，吉涅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T18:24:39.257

Rspec 在每个块之后重置类实例`@`变量。`it`

例如：

```
describe 'it blocks' do

  before :all
    @reset = 0
    @@global = 'will break tests'
  end

  it 'should increment' do
    @reset += 1
  end

  it "shouldn't forget it, either" do
    # but it does
    @reset.should eql 0
  end

  it 'does remember class-level variables, though' do
    @@global += ' for sure'
  end

  it 'can be demonstrated via' do
    @@global.split(' ').should > 3
  end

  # this is not the same @reset as what's in `before :all`.
  this_is_blank = @reset
  it "won't interpolate #{this_is_blank} because it's an instance level variable" do
    true.should be true
  end

  local = 'might as well hard code them into your descriptions at this point'
  it "Doesn't matter anymore because you #{local}" do
    true.should eql true
  end

  it "won't get here because class-level variables #{@@global}" do
    (2 + 2).should eql 5
  end

end 
```

看起来你必须更通用地命名你的规范测试。反正我有

# cmake - 包括 CMAKE_CURRENT_BINARY_DIR 不适用于子目录

> ID：14374905
> 
> 赞同：1
> 
> 时间：2013-01-17T08:30:11.233
> 
> 标签：cmake

项目大致有以下结构：

```
include/
  lib_name/
    public_foo.h
    public_bar.h
src/
  CMakeLists.txt
  foo.c
  foo.h
  bar.c
  bar.h
CMakeLists.txt 
```

顶层`CMakeLists.txt`文件定义了一个共享库目标

```
add_library(lib_name SHARED "src/foo.c" "src/bar.c") 
```

同时，还有一个自定义命令

```
add_custom_command(OUTPUT "${CMAKE_CURRENT_BINARY_DIR}/src/foo-impl.c" ...) 
```

`foo-impl.c`在 `foo.c' 包含的 build 目录中生成，如下所示：

```
#include <some_header.h>
#include <other.h>

#include "foo-impl.c" 
```

为了能够包括`foo-impl.c`我在`src/CMakeLists.txt`

```
include_directories("${CMAKE_CURRENT_BINARY_DIR}") 
```

看起来它应该工作，对吧？

好吧，它不起作用 - 该`src`目录没有添加到`foo.c`. 似乎包含目录仅影响在同一目录（或子目录）中定义的目标。

我知道我能做到

```
include_directories("${CMAKE_CURRENT_BINARY_DIR}/src") 
```

从根目录开始`CMakeLists.txt`（事实上，我现在就是这样做的），但这是不可接受的：每个子目录都会看到父目录的文件，这最终会导致文件名冲突。

人们如何在大型项目中克服这一点？或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:06:58.433

像大多数 cmake 命令一样，`include_directories`只影响该目录和子目录中的目标。而 IIRC 仅针对在命令之后定义的目标。那是故意的。这是您为不同模块定义不同标志的方式。

当我说像大多数 cmake 命令时，我的意思是大多数。最重要的是包括`add_definitions`和 `set`除了`CACHE`参数。

还要记住，`include_directories`苹果适用于**目标**，而不是文件。

在子目录中定义库（对我来说最有意义），将所有内容放在顶层`CMakeLists.txt`或仅使用在目标上设置标志`set_target_properties(lib_name PROPERTIES COMPILE_FLAGS "-I${CMAKE_BINARY_DIR}/src")`（必须在定义目标后完成）。

# iphone - Objective-C 或 C/C++ 中的二进制相移键控

> ID：14374909
> 
> 赞同：0
> 
> 时间：2013-01-17T08:30:19.630
> 
> 标签：iphone, binary, shift, phase

我正在制作一个将通过声音传输数据的 iphone 应用程序。它需要一个二进制字符串，每个 1 播放一个音调，每个 0 播放一个静音。

（字符串示例）

```
NSString* asciiString = @"www.google.com";
NSString* binaryString = AsciiToBinaryString(asciiString);
// binaryString == @"01110111 01110111 01110111 00101110 01100111 01101111 01101111 01100111 01101100 01100101 00101110 01100011 01101111 01101101" 
```

但是，这种简单的音调方法容易出错，我认为我需要使用二进制相移键控。

我想知道如何将二进制相移键控应用于我的二进制字符串。

我不确定如何实现这一点。任何建议或代码示例将不胜感激。

PS：

我确实对堆栈溢出和谷歌进行了搜索，但对我的发现并不满意。我查看了 GNU Radio 项目，但不懂 python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:50:40.777

如果可能的话，PSK 在 iPhone 上并不容易。频移键控（FSK）应该是可能的。但我认为您首先需要的是更高级别的协议，例如以字节为单位分解数据流，并包括一些检查。想想带有开始/停止位和奇偶校验的老式 RS-232 串行协议。

另一方面，有各种应用程序使用 iPhone 的音频端口进行数据传输。我没有看，但我可以想象人们一定写过这个。如果有开源或商业项目可以为您提供开箱即用的功能，我不会感到惊讶。

祝你好运并享受，这听起来是一个有趣的项目！

# eclipse - 在 treeviewer 选择 eclipse rcp 上打开默认编辑器（例如：因为 eclipse 知道必须在文本编辑器中打开 j.java 文件）

> ID：14374921
> 
> 赞同：1
> 
> 时间：2013-01-17T08:31:00.100
> 
> 标签：eclipse, plugins, eclipse-plugin, eclipse-rcp

我有一个扩展名为 .xyz 的文件。我想在双击它时打开一个编辑器。如何去做在扩展点和扩展文本字段中添加了一个编辑器然后默认情况下它应该打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:56:12.340

您需要添加一个*org.eclipse.ui.editors*扩展点。

```
 <extension point="org.eclipse.ui.editors">
  <editor
        name="MyEditor Name"
        extensions="my_file_extension"
        icon="icons/sample.gif"
        class="com.me.MyEditor"
        id="com.me.MyEditorID">
  </editor> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:15:01.240

好吧，如果您有自己的查看器实现，您将需要在该查看器中定义完整的行为，甚至是打开文件。由于您已经针对该扩展注册了一个编辑器，因此每当在 Eclipse 中打开该文件时，无论是通过您的查看器还是其他查看器（项目资源管理器、导航器），Eclipse 都会自动在分配的编辑器中打开该文件。

在您的双击侦听器中，您可以使用`org.eclipse.ui.actions.OpenFileAction`或类似的东西来确保 Eclipse 根据 Workbench 规则打开文件。顺便说一句，为什么要避免添加双击侦听器？

# java - 在特定日期和时间之后获取数据的条件查询

> ID：14374923
> 
> 赞同：-1
> 
> 时间：2013-01-17T08:31:08.460
> 
> 标签：java, sql, hibernate, jpa, hibernate-criteria

我使用的条件查询如下：我想在我过去的时间和日期之后获取预订。但现在我在同一日期过去的时间之前获得预订。请帮助..

```
 @GET
        @Path("/getReservationByUserIdAndTypeAndDateTime/{userid}/{type}/{date}/{time}")
        public List<Reservation> getReservationByAndUserIdAndTypeAndDateTime(@PathParam("userid") int uid, @PathParam("type") int tid,@PathParam("date") Date date,@PathParam("time") Time time) {
            CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<Reservation> criteria = builder.createQuery(Reservation.class);
            Root<Reservation> r = criteria.from(Reservation.class);
            TypedQuery<Reservation> query = em.createQuery(
                criteria.select(r).where(new Predicate[]{
                        builder.equal(r.get(Reservation_.usersId), uid), 
                        builder.equal(r.get(Reservation_.reservationsType), tid),

                        builder.greaterThanOrEqualTo(builder.concat(r.get(Reservation_.date), " "+r.get(Reservation_.time)), date.toString()+" "+time.toString())}));
            return query.getResultList();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:52:13.287

不建议比较格式化为字符串的日期和时间，结果可能取决于格式。最好`Date`在班级中有一个独特的领域`Reservation`：

```
@Temporal(TIMESTAMP) Date date; 
```

并在查询中使用日期比较：

```
 builder.greaterThanOrEqualTo(r.get(Reservation_.date), date) 
```

这样可以省略方法中的`time`参数，因为该参数将包含日期和时间。`getReservationByAndUserIdAndTypeAndDateTime``date`

# session - Safari 扩展 - 与网站共享会话 cookie

> ID：14374931
> 
> 赞同：3
> 
> 时间：2013-01-17T08:31:39.770
> 
> 标签：session, safari-extension

我有一个支持我们网站的 Safari 扩展程序。它需要与网站共享会话 cookie。该网站将会话设置为，

> 设置 Cookie：SESS=SESS_VALUE；expires=星期六，2013 年 2 月 9 日 11:59:05 GMT；路径=/; 域=.MY_DOMAIN；HttpOnly

该扩展使用**Jquery**发出请求。该会话在所有其他主要浏览器中正确共享，包括 IE 7。但在 safari 中，它维护两个会话。我的 safari 扩展在其清单文件中有正确的域 MY_DOMAIN。我会很高兴听到你的建议。

# java - 如何为 DBRef 数组创建一个字段

> ID：14374934
> 
> 赞同：0
> 
> 时间：2013-01-17T08:31:43.067
> 
> 标签：java, mongodb

我是 MongoDB 的新手。在我的 java 代码中，我必须定义一个 Document。此文档中的一个字段必须包含指向其他文档的 DBRef 数组。如何创建客户数组？如何做呢？有哪些选择？

```
@DBRef
private Customer custId; 
```

谢谢，埃亚尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T01:07:25.983

```
class DBRef {
    public static void main {String args[]) {
    int customers[][] = new int [7][];
    customers[0] = new int p[];
    customers[1] = new int p[];
    customers[2] = new int p[];
    customers[3] = new int p[];
    customers[4] = new int p[];
    customers[5] = new int p[];
    customers[6] = new int p[];

    int i, j; 
```

您可能想向数组中添加一些数据。数组是相同类型的变量的集合，由一个通用名称引用。它们可以是 java 中的一维或多维。它们用于将相关变量组合在一起。例如股票价格平均值列表或棒球“运动”统计数据列表。最容易学习的是二维数组和基本数组。

声明

# android - Android GroundOverlay 设置不正确的位置

> ID：14374937
> 
> 赞同：0
> 
> 时间：2013-01-17T08:31:51.237
> 
> 标签：android, map, location

我尝试制作基于 Android Maps API v2 的位置应用程序。我为我的位置点添加了标记，并为位置准确性添加了一个 GroundOverlay 圆圈。但 GroundOverlay 的 setPosition 函数设置略有不同。我找不到原因。

```
 package com.example.locator;

    import com.google.android.gms.maps.CameraUpdateFactory;
    import com.google.android.gms.maps.GoogleMap;
    import com.google.android.gms.maps.SupportMapFragment;
    import com.google.android.gms.maps.model.BitmapDescriptorFactory;
    import com.google.android.gms.maps.model.GroundOverlay;
    import com.google.android.gms.maps.model.GroundOverlayOptions;
    import com.google.android.gms.maps.model.LatLng;
    import com.google.android.gms.maps.model.Marker;
    import com.google.android.gms.maps.model.MarkerOptions;

    import android.location.Criteria;
    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.content.Context;
    import android.support.v4.app.FragmentActivity;
    import android.view.Menu;

    public class MainActivity extends FragmentActivity implements LocationListener
     {
        GoogleMap mMap;
        Location                lastLocation = null;
        private LocationManager locationManager;
        private String provider;
        Marker curLoc = null; 
        GroundOverlay curLocCircle = null; 

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);  
            setContentView(R.layout.activity_main);

            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(22.375675950685434, 29.83346939086914), 13));

            locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

            Criteria criteria = new Criteria();
            provider = locationManager.getBestProvider(criteria, false);
            Location location = locationManager.getLastKnownLocation(provider);

            if (location != null) {
                onLocationChanged(location);
            } else {
                //empty
            }
            locationManager.requestLocationUpdates(provider, 400, 1, this);
        } 

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

        public void onLocationChanged(Location location) {
            if (location != null) {

                if (null != curLoc) {
                    curLoc.remove();
                }
                if (null != curLocCircle) {
                    curLocCircle.remove();
                }

                LatLng loc = new LatLng(location.getLatitude(),location.getLongitude());
                curLoc = mMap.addMarker(new MarkerOptions()
                .position(loc)
                .title("My location")
                .icon(BitmapDescriptorFactory.fromResource(R.drawable.location32)));

                float accuracy = location.getAccuracy();

                curLocCircle = mMap.addGroundOverlay(new GroundOverlayOptions()
                        .image(BitmapDescriptorFactory
                                .fromResource(R.drawable.location_circle))
                        .position(loc, accuracy)
                        .transparency(0)
                );
                curLocCircle.setPosition(loc);
                mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(loc, 13));
            }
        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    } 
```

当我在线在调试器中暂停应用程序时

```
mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(loc, 13)); 
```

手表显示此数据：

```
curLocCircle.getPosition()  lat/lng: (22.397815012772206,29.954818561673164)
location.getLatitude()      22.397815
location.getLongitude()     29.9548184
loc                         lat/lng: (22.397815,29.9548184) 
```

curLocCircle.getPosition() 在 setPosition(loc) 之后以某种方式显示不正确的位置写入；请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:47:18.057

问题出在标记锚上。变成：

```
curLoc = mMap.addMarker(new MarkerOptions()
.position(loc)
.anchor(0.5f, 0.5f)
.title("My location")
.icon(BitmapDescriptorFactory.fromResource(R.drawable.location32))); 
```

一切都很好。我仍然不明白为什么 GroundOverlay 的位置与定义的位置不同，但我不在乎。这看起来不错的样子。

# javascript - jQuery.css 不适用于附加添加的元素？

> ID：14374944
> 
> 赞同：1
> 
> 时间：2013-01-17T08:32:19.783
> 
> 标签：javascript, jquery, jquery-selectors

我正在使用模块化模式来编写我的 JS 代码。我有一个引用我所有 dom 元素的对象。我已经为稍后在代码执行中添加的 div 放置了选择器。当我添加该 div 并使用存储在引用对象中的引用使用 jQuery.css 时，它不起作用。

```
NameSpace = {
    objects: {
        someButton: $('.someButton'),
        someDiv: $('.someDiv'),
        myDiv: $('.myDiv'), //This will be added later
        //Other references
        .
        .
    },

    bindHandlers: {
        NameSpace.objects.someButton.on('click', someEventHandler);
        //Other bindings
        .
        .
    },

    eventHandlers: {
        someEventHandler: function(e){
            var div = jQuery('<div class="myDiv"></div>');
            NameSpace.objects.someDiv.append(div);

            //Doesn't work! If I use jQuery('.myDiv'), then it works,
            //but kills my modular style
            NameSpace.objects.myDiv.css({ //some styles });
        },
        //Other event handlers
    }
}
//Other code 
```

这种方法适用于页面中存在的对象，但不适用于我在上面添加的 div。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:37:10.690

Javascript是程序化的，这条线`myDiv: $('.myDiv')`只计算一次，而不是每次你调用它。

这意味着您的选择器`$('.myDiv')`在页面的开头填充。

要解决此问题，您必须使变量成为函数

```
objects: {
        someButton: $('.someButton'),
        someDiv: $('.someDiv'),
        myDiv: function(){ return $('.myDiv'); }, //This will be added later
        //Other references
        .
        .
    }, 
```

每次调用它时它都应该重新计算选择器。

让我知道这个技巧是否有效。

# android - Maps API 在 animateTo() 方法上抛出 NullPointerException

> ID：14374948
> 
> 赞同：3
> 
> 时间：2013-01-17T08:32:41.420
> 
> 标签：android, android-maps, android-maps-v2, android-debug

尝试将地图动画到某个 GeoPoint 时，我遇到了一个致命的异常 - 这是异常：

```
12-20 17:53:20.400: E/Crittercism(3523): java.lang.NullPointerException
12-20 17:53:20.400: E/Crittercism(3523): at com.amazon.geo.maps.MercatorProjection.latLongToWorldPixels(MercatorProjection.java:397)
12-20 17:53:20.400: E/Crittercism(3523): at com.amazon.geo.maps.MercatorProjection.toPixels(MercatorProjection.java:69)
12-20 17:53:20.400: E/Crittercism(3523): at com.amazon.geo.maps.MapView.animateTo_AmazonInternal(MapView.java:1801)
12-20 17:53:20.400: E/Crittercism(3523): at com.amazon.geo.maps.MapController.animateTo(MapController.java:46)
12-20 17:53:20.400: E/Crittercism(3523): at com.fatattitude.myapplication.MyMapActivity.moveMapToPoint(BusMapActivity.java:1564) 
```

这是我的代码。我的日志输出还显示 GeoPoint 的值为**LatitudeE6= 51537141**和**LongitudeE6= -246271**

```
private void moveMapToPoint(GeoPoint gp, int zoomLevel) {
MapController mc = mapView.getController();

if (zoomLevel < 0)
zoomLevel = mapView.getZoomLevel();

mc.stopAnimation(true);
mc.setZoom(zoomLevel);

String strGeoPointInfo = String.format("Lat:%d, Lng:%d", gp.getLatitudeE6(), gp.getLongitudeE6() );
Log.i("GeoPoint-Info", "**moveMapToPoint: " + strTestOutput);

mc.animateTo(gp);
} 
```

如果我评论该行

```
//mc.stopAnimation(true); 
```

我不再得到例外。

谁能帮我理解为什么会发生这个异常？

请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:35:33.340

该应用程序可能会在 GPS 传感器寻找位置之前等待。

```
mMyLocationOverlay.runOnFirstFix(new Runnable() { 
    public void run() {
                    mapView.getController().animateTo(myLocation);
        }}); 
```

# php - Doctrine2 与 3 个实体的关系

> ID：14374953
> 
> 赞同：0
> 
> 时间：2013-01-17T08:33:02.397
> 
> 标签：php, mysql, doctrine-orm, relation

我有 3 个实体：用户角色公司

通常一个用户有一个角色和多个公司。我已经成功设置了这个。

但是，如果用户的角色取决于公司，我将如何建立关系？我尝试了一个额外的实体 UserCompanyRole。

在用户中：

```
/** @ORM\OneToMany(targetEntity="UserCompanyRole", mappedBy="user")*/
protected $userCompanyRoles;
public function getUserCompanyRoles() {
    return $this->userCompanyRoles;
}
public function addUserCompanyRole(UserCompanyRole $userCompanyRole) {
    $this->userCompanyRoles[] = $userCompanyRole;
} 
```

角色和公司相同

在 UserCompanyRole 中：

```
/** @ORM\ManyToOne(targetEntity="User", inversedBy="userCompanyRoles")
 * @ORM\JoinColumn(  onDelete = "CASCADE" )
 */
private $user;
public function getUser() {
    return $this->user;
}
public function setUser(User $user = null) {
    $this->user = $user;
} 
```

角色和公司的功能相同。

创建查询时，这将变得复杂。也许有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:38:54.043

如果一个用户可以拥有多个角色和公司，我会说是的。在一个公司里，一个角色有多个员工。所以我会把它设为 companyRole。

# linux-kernel - 使用从 linux 内核中的模块导出的符号

> ID：14374955
> 
> 赞同：1
> 
> 时间：2013-01-17T08:33:11.693
> 
> 标签：linux-kernel, kernel-module

我写了一个`EXPORT_SYMBOL(func)`用于导出函数func的模块。

在修改内核代码时，我`extern void func();`在顶部声明，并调用了func()。

但是在编译内核时，我得到*undefined reference to 'func'*错误。

我猜编译器找不到 func() 在哪里，但我不知道如何修复它。

有人可以帮我吗？非常感谢！

# sql - 在触发器中检查@@rowcount = 0 的目的？

> ID：14374956
> 
> 赞同：5
> 
> 时间：2013-01-17T08:33:24.367
> 
> 标签：sql, sql-server, triggers

我读过一本书，例如，*Pro SQL Server 2008 Relation Database Design And Implementation Lois Davidson*，在那里我发现了检查`@@rowcount`触发器内部的建议`if it is = 0 then return`：：

```
if @@rowcount = 0 return 
```

我想知道是否修改了 no 行如何触发触发器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T08:38:35.963

触发器为正在运行的*语句触发。*即使表为空，或者语句不影响任何行，它也会触发：

```
create table tr (i int);
go

create trigger g on tr after update
as 
print 'foo'
go

update tr set i = 2 
```

@Muflix 更新：

```
create table tr (i int);
go

create trigger g on tr after insert
as 
print 'foo'
go

insert into tr select * from tr;
go 
```

如您所见，即使没有插入任何行，触发器也会触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T08:37:06.990

因为`Trigger`无法知道触发事件影响了多少行，这就是您必须检查内部的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T08:44:02.583

触发事件被触发，因为触发事件已经发生。触发器不检查有多少行受到影响。因此，您必须检查`@@rowcount` 触发器体内。要触发触发器，触发事件很重要，而不是受影响的行数。

另请注意，`@@rowcount`当 SQL Server 2008 中的 MERGE 语句触发时，触发器中的行为与预期不同，并且有所不同。

# facebook - 跟踪 Facebook 上的用户活动

> ID：14374957
> 
> 赞同：0
> 
> 时间：2013-01-17T08:33:26.737
> 
> 标签：facebook

我已经创建了一个 Facebook 页面并为它实现了一个应用程序。现在，我的目标是，用户必须喜欢并与至少一个朋友分享页面才能参与/访问应用程序并因此使用它（玩游戏）。或者只是强迫用户喜欢和分享页面。您能否告诉我这是否可能以及如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:41:57.913

当用户访问您的 Facebook 页面时，您会收到[signed_request](http://developers.facebook.com/docs/howtos/login/signed-request/)，其中包含有关用户的一些信息，包括用户是否喜欢您的页面。对于共享，您可能需要实现[发送对话框](https://developers.facebook.com/docs/reference/dialogs/send/)。在文档中，据说用户采取了行动（发送或取消），他将被重定向到您设置的 url，如果该操作是“取消”，则会出现错误。

因此，您可能需要创建数据库来存储用户 ID 以及他之前是否共享过您的页面（因为您可以随时检查他是否喜欢该页面）。

# mysql - 在 SQL Server 2008 上编写 sql 查询时遇到问题

> ID：14374960
> 
> 赞同：-5
> 
> 时间：2013-01-17T08:33:30.740
> 
> 标签：mysql, sql, sql-server-2008, tsql

我有这张桌子

```
1   a   d
1   a   e
2   b   f
2   b   g
3   c   h
3   c   i
3   c   j
3   c   k 
```

我想要这个结果

```
1   a   d,e
2   b   f,g
3   c   h,I,j,k,l 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:40:36.897

AFAIK，SQL-Server 没有内置的方法来做到这一点，但你可以利用[`FOR XML`](http://msdn.microsoft.com/en-us/library/ms178107%28v=sql.100%29.aspx)这样做：

```
SELECT 
  t1.col1,
  t1.col2,
  STUFF((
    SELECT ', ' + t2.col3
    FROM Table1 t2
    WHERE t2.col1 = t1.col1
    FOR XML PATH (''))
  ,1,2,'') AS Groups
FROM Table1 t1
GROUP BY t1.col1, col2; 
```

这会给你：

```
| COL1 | COL2 |     GROUPS |
----------------------------
|    1 |    a |       d, e |
|    2 |    b |       f, g |
|    3 |    c | h, i, j, k | 
```

[SQL Server 小提琴演示](http://www.sqlfiddle.com/#!3/1af14/3)

**但是，** MySQL 有一个内置函数`GROUP_CONCAT()`：

```
SELECT
  col1, col2, GROUP_CONCAT( col3 SEPARATOR ',') groups
FROM Table1
GROUP BY col1, col2; 
```

[Mysql 小提琴演示](http://www.sqlfiddle.com/#!2/24278/4)

# c# - 如何从注册表读取二进制数据到字节数组

> ID：14374967
> 
> 赞同：10
> 
> 时间：2013-01-17T08:33:57.730
> 
> 标签：c#, .net, windows, registry

我使用以下代码将字节数组保存到注册表

```
Byte[] value = new byte[16]{
    0x4a,0x03,0x00,0x00, 
    0x45,0x02,0x00,0x00, 
    0xb7,0x00,0x00,0x00, 
    0x9d,0x00,0x00,0x00
};

RegistryKey key = Registry.CurrentUser.CreateSubKey(KeyName);
key.SetValue(@"Software\Software\Key", value, RegistryValueKind.Binary); 
```

这是使用上述代码创建的密钥：

```
[HKEY_CURRENT_USER\Software\Software\Key]  
    "LOC"=hex:4a,03,00,00,45,02,00,00,b7,00,00,00,9d,00,00,00 
```

现在我想将相同的数据读回字节数组格式。以下代码可以读取相同的数据，但输出是对象类型。

```
RegistryKey key = Registry.CurrentUser.OpenSubKey(KeyName);
object obj =  key.GetValue(@"Software\Software\Key", value); 
```

这里转换为 byte[] 不起作用。我知道我可以使用序列化程序或流来完成这项任务。我想知道是否有更简单的方法可以将数据读回 byte[] 类型（两行代码）？

请注意[这个问题](https://stackoverflow.com/questions/7317281/how-can-i-read-a-reg-binary-values-associated-value-from-registry)是在 C++

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T10:47:16.290

要将字节数组写入注册表，请使用以下代码

```
Byte[] value = new byte[]{
    0x4a,0x03,0x00,0x00, 
    0x45,0x02,0x00,0x00, 
    0xb7,0x00,0x00,0x00, 
    0x9d,0x00,0x00,0x00
};

RegistryKey key = Registry.CurrentUser.CreateSubKey(KeyName);
key.SetValue(@"Software\AppName\Key", value, RegistryValueKind.Binary); 
```

要将数据从注册表中检索回 Byte[] 格式，请使用以下命令：

```
RegistryKey key = Registry.CurrentUser.OpenSubKey(KeyName);
byte[] Data =  (byte[]) key.GetValue(@"Software\AppName\Key", value); 
```

注意：`CurrentUser`是您的密钥位置的根名称并指向`HKEY_CURRENT_USER`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T09:03:22.460

我在 VB.NET 中测试：

```
Dim obj As Object = key.GetValue("Software\Software\Key", value__1)`
Dim v As [Byte]() = CType(obj, Byte())` 
```

它有效

所以在 C# 中应该是：

```
Byte[] v = Convert.ToByte(obj); 
```

# eclipse - 在 Eclipse 的多个工作区中同时运行 Tomcat

> ID：14374970
> 
> 赞同：0
> 
> 时间：2013-01-17T08:34:08.243
> 
> 标签：eclipse, localhost, tomcat6, workspace

我在 Eclipse 中有两个不同的工作区，在这两个工作区中我都配置了相同的 Tomcat Web 服务器。现在，当我从一个工作区在服务器上运行 Web 应用程序时，我无法从其他工作区在服务器上运行另一个应用程序。我想将我的项目保存在不同的工作区中，并希望在 localhost 上同时运行它们。我怎样才能做到这一点 ？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:42:17.540

双击`Servers`视图中的 Tomcat 服务器。您将在编辑器中看到允许您更改端口的概述。确保为每个实例分配一组不同的端口。

# postgresql - PostgreSQL：在规则定义中使用当前表

> ID：14374972
> 
> 赞同：0
> 
> 时间：2013-01-17T08:34:11.223
> 
> 标签：postgresql, rules

有时我需要复制/重命名表。我的客户做得很好，除了一个例外：新表的规则仍然包含对旧表的引用。

有没有办法不编辑这些规则？我更喜欢一些关键字而不是表名，引用表，规则被触发......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:27:51.907

使用 s 没有简单的方法可以做到这一点，但是触发器提供了这个功能，实际上您可以跨表`RULE`重用函数。`trigger`

这是一个你会发现触发器比规则更有用的领域。

在触发器内，您可以使用`TG_RELNAME`当前表名。不幸的是，这样的系统在系统中是不可用的`RULE`。

# iphone - UITextView 的自动筛选表

> ID：14374975
> 
> 赞同：0
> 
> 时间：2013-01-17T08:34:31.050
> 
> 标签：iphone, ios, ipad

我们如何为 UITextView 创建自动过滤表格框。如下所示：

![在此处输入图像描述](../Images/98c1ab6a9032ef4def28d68099389275.png)

如果有任何示例或源代码可用，请告诉我。

# asp.net-mvc-4 - ASP.NET 捆绑和缩小包括来自数据库的动态文件

> ID：14374982
> 
> 赞同：1
> 
> 时间：2013-01-17T08:35:10.040
> 
> 标签：asp.net-mvc-4, multi-tenant, bundling-and-minification

我正在开发一个多租户 MVC 4 应用程序，用户可以在该应用程序上进行一些主题化。
他可以通过向主题表添加相对路径来覆盖每个资源（css、js、jpg、png 等），例如**/Scripts/booking.js**

使用哪个租户由 URL 确定，例如**http://myapp/tenant/Booking/New**这只是应该使用的连接字符串的名称。

因此，如果对特定资源发出请求，我首先需要检查数据库中是否存在该资源的覆盖版本，如果找到则使用它。

现在我想实现微软在 System.Web.Optimization 命名空间中提供的新的捆绑和缩小功能。但我不知道如何使用数据库中的文件来实现这一点。

我已经对自己的 JsMinify 实现进行了原型设计以实现这一目标

```
public class MyJsMinify : JsMinify
{
    private static byte[] GetContentFile(FileInfo filePath)
    {
        string fullName = filePath.FullName;
        int indexOf = fullName.IndexOf("content", StringComparison.OrdinalIgnoreCase);
        string substring = fullName.Substring(indexOf + 8).Replace(@"\\", "/").Replace(@"\", "/");

        ThemingService themingService = ObjectFactory.GetInstance<ThemingService>();
        Theming myTheming = themingService.Find(new ThemingFilter { FilePathLike = substring });
        if (myTheming == null)
        {
            return themingService.GetContentFile(fullName);
        }
        return myTheming.FileData;
    }

    public override void Process(BundleContext context, BundleResponse response)
    {
        StringBuilder newContent = new StringBuilder();
        foreach (FileInfo fileInfo in response.Files)
        {
            using (MemoryStream memoryStream = new MemoryStream(GetContentFile(fileInfo)))
            {
                using (StreamReader myStreamReader = new StreamReader(memoryStream, true))
                {
                    newContent.AppendLine(myStreamReader.ReadToEnd());
                }
            }
        }

        response.Content = newContent.ToString();

        base.Process(context, response);
    }
} 
```

如果我处于发布模式，这似乎可行，但在开发时我希望每个单独的脚本都被独立引用。这是在整个捆绑和缩小框架中自动完成的。框架生成的资源 URL 如下所示

```
<script src="/myapp/Content/Scripts/jquery-1.9.0.js"></script> 
```

但应该看起来像这样

```
<script src="/myapp/tenant/Content/Scripts/jquery-1.9.0.js"></script> 
```

我已经配置了以下路由：

```
routeCollection.MapRoute("Content1", "{mandator}/Content/{*filePath}", new { mandator = defaultMandator, controller = "Environment", action = "ContentFile" }, new { mandator = mandatorConstraints });
routeCollection.MapRoute("Content2", "Content/{*filePath}", new { mandator = defaultMandator, controller = "Environment", action = "ContentFile" }, new { mandator = mandatorConstraints }); 
```

ContentFile 方法如下所示

```
 [AcceptVerbs(HttpVerbs.Get)]
    [AcceptType(HttpTypes.All)]
    [OutputCache(CacheProfile = "ContentFile")]
    public ActionResult ContentFile(string filePath)
    {
        if (string.Compare(filePath, "Stylesheets/Import.css", StringComparison.OrdinalIgnoreCase) == 0)
        {
            return GetContentImport(CssFileArray, "Stylesheets/");
        }
        if (string.Compare(filePath, "Stylesheets/ImportOutlook.css", StringComparison.OrdinalIgnoreCase) == 0)
        {
            return GetContentImport(OutlookCssFileArray, "Stylesheets/");
        }
        if (string.Compare(filePath, "Scripts/OutlookAddin/Import.js", StringComparison.OrdinalIgnoreCase) == 0)
        {
            return GetContentImport(OutlookJsFileArray, "Scripts/");
        }
        return new FileContentResult(GetContentFile(filePath), MimeType(filePath));
    } 
```

有人知道我如何实现这一目标吗？
是否有可遵循的多租户模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:15:16.397

所以我不确定我是否完全理解你的场景，但我相信这就是 VirtualPathProviders 可以用来做的事情。

我们在 1.1-alpha1 版本中添加了支持，因此包将自动使用在 ASP.NET 中注册的 VirtualPathProvider 来获取文件的内容。

如果您要编写一个能够始终返回正确版本的 ~/Scripts/booking.js 的自定义 VPP，那么一切都应该正常工作。

# java - 如何干净地处理eclipse中的结构化选择？

> ID：14374984
> 
> 赞同：1
> 
> 时间：2013-01-17T08:35:17.980
> 
> 标签：java, eclipse, eclipse-rcp, bean-validation

我正在编写一个 Eclipse 插件，我想在其中为 JDT 包资源管理器贡献一个动作。为了执行操作，必须选择两个不同的文件。因此，我在该操作的命令处理程序中检索 JDT 包资源管理器的活动选择。这就是我的问题所在。

目前，从中提取所选文件的代码[`IStructuredSelection`](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/IStructuredSelection.html)涉及多个局部变量，其中包含多个 if 语句和多个返回，大约 30 行代码。当然，这段代码看起来至少有点难看。

我应该使用什么概念和/或模式来使这段代码更干净？

eclipse 平台[推荐](http://www.eclipse.org/articles/article.php?file=Article-Adapters/index.html)使用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)。所以我想创建一个这样的pojo：

```
public class FooCommandArgs {

    private IFile xmlFile;
    private IFile csvFile;

    //getters and setters here ...

} 
```

并从`IStructuredSelection`. 然而，这样做只会将丑陋的代码移动到其他地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:35:17.980

因此，正如字段名称所暗示的那样，我想从中提取的每个项目`IStructuredSelection`都必须满足一些条件。我的想法是为此使用**bean 验证 api**。pojo 将如下所示：

```
public class FooCommandArgs {

    @NotNull
    @FileExtension("xml")
    @Content(type=ContentType.XML, value="http://my.schema.location/schema.xsd")
    private IFile xmlFile;

    @NotNull
    @FileExtension("csv")
    private IFile csvFile;

    //getters and setters here ...

} 
```

bean 验证 api的`Validator`接口提供了`<T> Set<ConstraintViolation<T>> validateValue(Class<T> beanType, String propertyName, Object value, Class<?>... groups)`我可以使用的方法。我只需要自省 java bean 属性，然后为`IStructuredSelection`item 和 pojo 属性的每个组合调用该方法。如果结果是每个项目都可以分配给没有违反约束的 bean 属性，那么我可以继续处理实际命令。歧义也可以处理。

**编辑：**
我已经实施了这个建议，效果很好。使用这种技术，也很容易以编程方式向用户解释为什么某个命令未启用或无法执行。

我不想忘记在这一点上提到[JCommander](http://jcommander.org/)，这就是这个想法的灵感来源。

# shell - 自动将新文件复制到 Windows 上的另一个文件夹

> ID：14374993
> 
> 赞同：1
> 
> 时间：2013-01-17T08:35:36.430
> 
> 标签：shell, copy, watch

我有一个文件夹，其中一些 xml 文件不断更新，我希望将这些文件复制到另一个文件夹。软件从中收集 xml。我想观看该文件夹并仅将新文件复制到另一个文件夹中。

有没有现成的解决方案，或者可以使用 Autoit、shell 脚本或 vb.net（最后选择）来完成。

**主要担忧：**

*   知道何时添加文件。
*   将它们复制到文件夹中。
*   确保第二次未复制。

如果我安排此代码，它也可能有效

```
cd /home/webapps/project1/folder1 for f in *.csv do     cp -v $f
/home/webapps/project1/folder2/${f%.csv}$(date +%m%d%y).csv done 
```

但它又没有办法不复制那些已经复制的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:03:27.510

[同步](http://rsync.samba.org/)。将其放入 cron 中，每隔几分钟运行一次。

# magento - Magento 中的 SOLR 排序问题

> ID：14374994
> 
> 赞同：2
> 
> 时间：2013-01-17T08:35:37.680
> 
> 标签：magento, sorting, solr

我创建了 3 个属性`popularity`：`reviews_count`和`pm_flat_volume`。

这 3 个属性包含数值 (int)。我在 Solr 中定义`schema.xml`了以下动态字段：

```
<dynamicField name="attr_sort_reviews_count_*" type="sint" indexed="true" stored="true"/>
<dynamicField name="attr_sort_pm_flat_volume_*" type="sint" indexed="true" stored="true"/>
<dynamicField name="attr_sort_popularity_*" type="sint" indexed="true" stored="true"/> 
```

刷新“索引管理”中的字段后，会遇到以下结果：

*   reviews_count = 按 desc/asc 排序：正常工作
*   受欢迎程度 = 按 desc/asc 排序：正常工作
*   pm_flat_volume = 按 desc/asc 排序：无法正常工作 (*)

(*) 如果我有 [1, 54, 2, 3, 91, 87, 100]

```
ASC = [1, 100, 2, 3, 54, 87, 91] it should be [1, 2, 3, 54, 87, 91, 100]
DESC = [91, 87, 54, 3, 2, 100, 1] it should be [100, 91, 87, 54, 3, 2, 1] 
```

我尝试了不同的方法，但都没有奏效。我再说一遍，所有这 3 个属性都具有相同的配置。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:30:58.370

检查schema.xml 中条目的`class`属性以获取 the和fieldTypes。请确保他们正在使用. 我怀疑它使用的是字典顺序而不是数字顺序。`<fieldType>``sint``int``solr.TrieIntField``solr.IntField`

# debugging - 损坏的变量？将周围的记忆视为字符

> ID：14374996
> 
> 赞同：2
> 
> 时间：2013-01-17T08:36:10.083
> 
> 标签：debugging, memory-management

我正在阅读 Andrew Hunt 和 David Thomas 的“[实用程序员](http://en.wikipedia.org/wiki/The_Pragmatic_Programmer)”。在第 95 页，在名为“调试”的部分中，作者写道：

> “有时你会检查一个变量，期望看到一个小的整数值，而不是得到类似 0x6e69614d 的东西。在你卷起袖子进行一些严肃的调试之前，快速查看一下这个损坏的变量周围的内存。通常它会给你一个线索。在我们的例子中，检查周围的记忆作为字符向我们展示：
> 
> ```
> 20333231 6e69614d 2c745320 746f4e0a
>   1 2 3   M a i n    St,    \n No t
> 2c6e776f 2058580a 31323433 00000a33
>  o w n ,  \n X X   3 4 2 1  2\n\0\0 
> ```
> 
> 看起来有人在我们的柜台上喷了街道地址。现在我们知道去哪里找了。”

我不能完全理解这个例子。

1）在这种情况下，作者所说的“计数器”是什么意思？

2）为什么如果有人在那里喷洒街道地址，在我们的变量中我们应该看到内存地址而不是值“Main”？

3）上瘾，我还想问一下，哪些工具可以让你把“记忆邻居”看成角色？

注意：请注意内存地址（6e69614d），其中值：“Main”被保存，与我们在变量中找到的相同：0x6e69614d

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:07:07.780

计数器是他们开始场景的小整数值。

那不是内存地址，而是十六进制的数字。它可能是内存地址，可能是一个大数字，也可能是地址的几个字符，如第 144 位和 Main...

至于工具，取决于您工作的环境。

您应该注意到，这类问题困扰着非托管环境中的开发人员，尤其是在使用像 C 这样故意松散的语言时

您所需要的只是一个函数，该函数接受一个指向字符串的指针，该字符串在某处您已定义为 16 个字符长。

向它写入 18 个字符，你只是践踏了字符串后面的任何内容的前两个字节。

更严格的语言，如 Pascal，或更现代的管理语言，将开始对你大喊大叫。请注意，偶然做到这一点要困难得多，也意味着故意这样做要困难得多，因此更现代并不会自动转化为更好。

# jquery - jQuery UI droppable 未重新启用

> ID：14374997
> 
> 赞同：0
> 
> 时间：2013-01-17T08:36:10.507
> 
> 标签：jquery, jquery-ui, droppable

我有一个带网格的棋盘游戏。网格中的每个正方形都有一个类`.unitPosition`，该类是单位的可放置对象。我想防止超过 1 个单位在同一个方格上，所以我禁用 droppable on`drop`并重新启用它`out`。问题是重新启用不起作用。

```
$(".unitPosition").droppable({
    drop: function(event, ui) {
        ui.draggable
            .detach()
            .css({top: 0,left: 0})
            .appendTo($(this));
        $(this).droppable( "option", "disabled", true );
    },
    out: function(event, ui) {
        console.log($(this).parent());
        $(this).droppable( "option", "disabled", false );
    }
}); 
```

我尝试了这个的基本版本，它工作正常[http://jsfiddle.net/vMQVy/40/](http://jsfiddle.net/vMQVy/40/)

**更新：**

这是它不起作用的小提琴**：** http : [//jsfiddle.net/FbzSF/3/](http://jsfiddle.net/FbzSF/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:40:38.923

发现问题：

> 当您将可拖动对象悬停在可放置对象上然后将其移开时，将触发事件输出。不幸的是，当您拖动可拖动时不会。

请参阅：[stackoverflow.com/questions/1469879/](https://stackoverflow.com/questions/1469879/)