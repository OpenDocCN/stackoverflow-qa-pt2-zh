# StackOverflow 问答 13170000-13170999

# java - 当我触发我的火球创建时，它会重置我的角色 JLabel

> ID：13170002
> 
> 赞同：0
> 
> 时间：2012-11-01T02:06:02.643
> 
> 标签：java, swing, jlabel

```
package clickrpg2;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.*;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.Timer;

public class MainFrame extends javax.swing.JFrame implements ActionListener {

    static MainFrame mainFrame = new MainFrame();
    static Hero hero = new Hero();
    static JLabel fireballButton[] = new JLabel[1000000];
    static int fireballTotal = 0;
    Timer timer = new Timer(10, this);

    public MainFrame() {
        addKeyListener(new KeyThing());
        addMouseListener(new MouseThing());
        initComponents();
    }

    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/clickrpg2/StickMan1.png"))); // NOI18N

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(1454, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(597, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    public static void main(String args[]) {
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                mainFrame.setVisible(true);
            }
        });
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        int c = 0;
        int x = 0;
        int y = 0;
        int xChar = jLabel1.getX();
        int yChar = jLabel1.getY();
        while (true) {
            x = fireballButton[c].getX();
            y = fireballButton[c].getY();
            fireballButton[c].setBounds(x + 5, y, 64, 32);
            c++;
            if (c == fireballTotal) {
                break;
            }
        }
        jLabel1.setBounds(xChar,yChar,64,64);
    }

    class KeyThing extends KeyAdapter {

        @Override
        public void keyPressed(KeyEvent e) {
            int x = jLabel1.getX();
            int y = jLabel1.getY();
            int speed = hero.getSpeed();
            jLabel1.setBounds(x, y, 64, 64);
            int keycode = e.getKeyCode();

            switch (keycode) {
                case KeyEvent.VK_LEFT:
                    jLabel1.setBounds(x - speed, y, 64, 64);
                    break;
                case KeyEvent.VK_RIGHT:
                    jLabel1.setBounds(x + speed, y, 64, 64);
                    break;
                case KeyEvent.VK_DOWN:
                    jLabel1.setBounds(x, y + speed, 64, 64);
                    break;
                case KeyEvent.VK_UP:
                    jLabel1.setBounds(x, y - speed, 64, 64);
                    break;
                case KeyEvent.VK_SPACE:
                    x = jLabel1.getX();
                    y = jLabel1.getY();
                    fireballButton[fireballTotal] = new JLabel();
                    fireballButton[fireballTotal].setPreferredSize(new Dimension(x, y));
                    mainFrame.getContentPane().add(fireballButton[fireballTotal], BorderLayout.CENTER);
                    ImageIcon label = new ImageIcon("C:\\Users\\Nick\\Documents\\NetBeansProjects\\ClickRPG2\\src\\clickrpg2\\Fireball.png");
                    fireballButton[fireballTotal].setIcon(label);
                    mainFrame.setVisible(true);
                    fireballButton[fireballTotal].setBounds(x, y, 64, 64);
                    mainFrame.add(fireballButton[fireballTotal]);
                    fireballTotal++;
                    timer.start();
                    if (fireballTotal > 900000) {
                        fireballTotal = 0;
                    }
                    break;
            }
        }
    }

    class MouseThing extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent e) {
            int x = mainFrame.getX();
            int y = mainFrame.getY();
            fireballButton[fireballTotal] = new JLabel();
            ImageIcon label = new ImageIcon("C:\\Users\\Nick\\Documents\\NetBeansProjects\\ClickRPG2\\src\\clickrpg2\\Fireball.png");
            fireballButton[fireballTotal].setIcon(label);
            fireballButton[fireballTotal].setBounds(x, y, 64, 64);
            fireballTotal++;
            timer.start();
            if (fireballTotal > 900000) {
                fireballTotal = 0;
            }
        }
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    // End of variables declaration
} 
```

基本上，当我制作火球 jLabel 时，我只需要它不重置 jLabel1。\

有什么建议吗？在此先感谢，我是新来的，所以我希望代码块。因为我不知道错误发生在哪里，所以我需要保留大部分代码。抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:15:50.767

嗯，你的问题...

```
javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
getContentPane().setLayout(layout); 
```

您的容器受布局管理器的控制。任何更改任何组件的位置或大小的尝试（通过`setBounds`和`setLocation`/或`setSize`）都将失败，因为布局管理器将丢弃这些更改以支持自己的...

添加或删除任何组件的那一刻，布局管理器会将所有组件更新到它认为它们应该在的位置。

这是行不通的，而且是个坏主意。

```
while (true) {
    x = fireballButton[c].getX();
    y = fireballButton[c].getY();
    fireballButton[c].setBounds(x + 5, y, 64, 32);
    c++;
    if (c == fireballTotal) {
        break;
    }
} 
```

任何耗时或阻塞的动作（如循环）都会阻止 EDT 更新图形，基本上意味着你实际上不会看到火球......而且我不敢相信你用`Timer`这个（它会在正确的方向）并且仍然使用循环......

我的建议...

改用 a [`JLayerPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)。这允许您改为使用绝对定位（尽管如果您真的想要，您可以对其应用布局管理器......但它只是一个`JPanel`）

另外，请阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

**更新示例**

![在此处输入图像描述](../Images/402dc09002cc8e7c28e06205f78cfa55.png)

```
public class TestFireBall {

    public static void main(String[] args) {
        new TestFireBall();
    }

    public TestFireBall() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new FireBallPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class FireBallPane extends JLayeredPane {

        private JLabel character;
        private List<JLabel> fireBalls;
        private ImageIcon icoFireBall;
        private Timer timer;
        private Timer coolOffTimer;
        private int vX = 12;
        private boolean coolOff = false;

        public FireBallPane() {
            fireBalls = new ArrayList<JLabel>(25);

            ImageIcon icoCharacter = null;
            ImageIcon fireBall = null;

            try {
                icoCharacter = new ImageIcon(ImageIO.read(getClass().getResource("/BlackMage.png")));
                icoFireBall = new ImageIcon(ImageIO.read(getClass().getResource("/FireBall.png")));
            } catch (Exception e) {
                e.printStackTrace();
            }

            character = new JLabel(icoCharacter);

            add(character);

            setFocusable(true);
            requestFocusInWindow();

            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0), "fire");
            ActionMap am = getActionMap();
            am.put("fire", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if (!coolOff) {
                        coolOff = true;
                        JLabel fireBall = createFireBall();
                        fireBalls.add(fireBall);
                        if (!timer.isRunning()) {
                            timer.start();
                        }
                        coolOffTimer.restart();
                    }
                }
            });

            timer = new Timer(125, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if (fireBalls.size() > 0) {
                        JLabel[] balls = fireBalls.toArray(new JLabel[fireBalls.size()]);
                        for (JLabel fireBall : balls) {
                            if (fireBall.getParent() == null) {
                                add(fireBall);
                            }
                            Point p = fireBall.getLocation();
                            p.x += vX;
                            if (p.x + fireBall.getWidth() >= getWidth()) {
                                remove(fireBall);
                                fireBalls.remove(fireBall);
                            } else {
                                fireBall.setLocation(p);
                            }
                            repaint();
                        }
                    } else {
                        timer.stop();
                    }
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);

            coolOffTimer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    coolOff = false;
                }
            });
            coolOffTimer.setRepeats(false);
            coolOffTimer.setCoalesce(true);
        }

        protected JLabel createFireBall() {
            JLabel fireBall = new JLabel(icoFireBall);

            fireBall.setSize(fireBall.getPreferredSize());
            int x = character.getX() + character.getWidth();
            int y = character.getY() + ((character.getHeight() - fireBall.getHeight()) / 2);
            fireBall.setLocation(x, y);

            return fireBall;
        }

        @Override
        public void invalidate() {
            super.invalidate();

            character.setSize(character.getPreferredSize());
            int height = getHeight();
            int y = (height - character.getHeight()) / 2;
            character.setLocation(0, y);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }
    }
} 
```

# c# - Windows Phone 中的反射

> ID：13170003
> 
> 赞同：0
> 
> 时间：2012-11-01T02:06:12.270
> 
> 标签：c#, windows-phone

当我调用该方法时，以下代码失败。没有例外; 一切都崩溃了。此代码位于 Windows Phone 7 可移植类库中，知道发生了什么吗？

```
public static object Deserialize(string input, Type type)
{
    var castMethod = typeof(ModelBase).GetMethod("Cast").MakeGenericMethod(type);
    object castedObject = castMethod.Invoke(null, new object[] { input });
    return castedObject;
}

public static T Cast<T>(string input)
{
    return JsonConvert.DeserializeObject<T>(input);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:41:02.253

在 Silverlight for Windows Phone 中存在 MakeGenericMethod，但不受支持。

在“平台说明”下查看：http: [//msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod(v=vs.95).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T23:14:59.700

**简短的回答：**

你根本不需要在这里反思。您可以通过简单地调用来替换您的`Deserialize(string, Type)`方法（并摆脱） 。`Cast<T>`[**`JsonConvert.DeserializeObject(string, Type)`**](http://james.newtonking.com/projects/json/help/html/M_Newtonsoft_Json_JsonConvert_DeserializeObject_2.htm)

**更长的答案：**

您的`Cast<T>`方法不必要地使事情复杂化：

*   它有一个类型参数`T`并返回一个`T`对象/值，但调用方法 ( `Deserialize`) 无论如何都不关心这个；它返回一个 "untyped" `object`，所以`Cast`也可以返回`object`。

*   必须将`Type`对象转换为相应的类型参数`T`意味着您需要进行一些类型反射。但是，如果`Cast<T>`不是通用的——正如上面所指出的，它不一定是——你就不需要所有的反射。

*   事实证明，Json.NET 也不需要类型参数`T`。`JsonConvert.DeserializeObject`具有接受`Type`对象的非通用“重载”。

因此，摆脱您的`Cast<T>`方法和反射绕道而简单地使用非泛型[`JsonConvert.DeserializeObject(string, Type)`](http://james.newtonking.com/projects/json/help/html/M_Newtonsoft_Json_JsonConvert_DeserializeObject_2.htm)重载。

**PS：**关于您最初的问题，根据描述 CLI（由 .NET、.NET Compact、Silverlight 和 WP7 实现）的 ECMA-335 标准，Reflection 不是内核库的一部分，而是一个单独但可选库。如果它在特定平台上不存在（例如在 WP7、AFAIK 上），`Type`则对象本质上将被视为不透明对象，您无法从中派生其他`Type`实例。

# windows-8 - Windows 8 sdk 无法在 Win7 中安装？

> ID：13170005
> 
> 赞同：1
> 
> 时间：2012-11-01T02:06:19.353
> 
> 标签：windows-8, microsoft-metro

为了体验 Windows 8 应用程序的开发，我下载了 Windows 8 的 sdk 并绑定到 setup。

错误信息显示此 sdk 只能安装在 Os>=Windows 8 的 PC 上。

我不能在 Windows 7 中开发我的 Windows 8 应用程序吗？

有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:07:53.727

不可以，您必须使用 Windows 8 为 Windows 应用商店开发 Windows 8 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:19:15.667

您将无法`Windows Store Applications`在 Windows 7 中进行开发。

[Windows 应用商店应用入门](http://msdn.microsoft.com/en-us/library/windows/apps/br211386.aspx)

**视窗电话 8**

[视窗电话 SDK 8.0](http://www.microsoft.com/en-us/download/details.aspx?id=35471)

> **系统要求**
> 
> 支持的操作系统：Windows 8、Windows 8 Pro
> 
> •◦Windows 8 64 位 (x64) 客户端版本
> 
> •硬件： ◦4 GB 可用硬盘空间 ◦4 GB RAM ◦64 位 (x64) CPU
> 
> •Windows Phone 8 模拟器：◦Windows 8 Pro 版或更高版本◦需要支持二级地址转换 (SLAT) 的处理器 如果您的计算机满足硬件和操作系统要求，但确实满足 Windows Phone 8 模拟器的要求，则Windows Phone SDK 8.0 将安装并运行。但是，Windows Phone 8 模拟器将无法运行，您将无法在 Windows Phone 8 模拟器上部署或测试应用程序。

# jquery - jquery validate 不适用于动态内容

> ID：13170006
> 
> 赞同：2
> 
> 时间：2012-11-01T02:06:32.147
> 
> 标签：jquery, dynamic, jquery-validate, element

jquery validate 不适用于动态内容

我使用 jquery 创建包含新内容的选项卡。

```
var tabCounter = 2,
tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-    close'>Remove Tab</span></li>";
var tabs = $( "#tabs" ).tabs();
var tabContentHtml = $("#tabs-1").html(); 
```

单击按钮时添加新选项卡

```
$("#add_tab").click(function(){
    addTab();
});
function addTab() {
    var label = "Tab " + tabCounter,
        id = "tabs-" + tabCounter,
        li = $( tabTemplate.replace( /#\{href\}/g, "#" + id ).replace( /#\{label\}/g, label ) );

    tabs.find( ".ui-tabs-nav" ).append( li );
    tabs.append( "<div id='" + id + "'><p>" + tabContentHtml + "</p></div>" );
    tabs.tabs( "refresh" );
    tabCounter++;
} 
```

将表单验证到选项卡中。它适用于 tabs-1 但不适用于 tabs-2

```
 $("#Form").validate({
           rules:{
                name: "required",
                   messages:{
                        name: "Please enter your name"
                   },
           errorElement: "div",            
                   wrapper: "div",           
           errorPlacement: function(error, element) {
                   offset = element.offset();
                   error.insertBefore(element)
                   error.addClass('message');  // add a class to the wrapper
                   error.css('position', 'absolute');
                   error.css('left', offset.left + element.outerWidth());
           },
           submitHandler: function(form) {
                   form.submit();
           }

    }); 
```

代码 HTML

```
 <form id="Form" method="post" action="">       
<div id="tabs">
<ul>
    <li>
        <a href="#tabs-1">Visa 1</a> 
        <!-- <span class="ui-icon ui-icon-close">Remove Tab</span> -->
    </li>
</ul>
<div id="tabs-1">
    <table class="content-tabs">
        <tr class="fieldgroup">
            <td>Full Name</td>  
            <td><input type="text" class="txtName" name="name"></td>
        </tr>
                    <tr></td colspan="2"><input type="submit" value="submit" /></td></tr>
            </table>
        </div>
     </div>
  </form> 
```

如何验证 tabs-2 中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:11:48.733

添加新选项卡时，您需要手动添加规则以验证新内容。最简单的方法可能是使用验证插件的[规则](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)方法。

在你的`addTab`函数的底部，你会做这样的事情：

```
$('#'+id).find('input').rules('add',{
    required: true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:49:55.687

如果您不使用 live 或 on 方法，问题可能是 jquery 不知道 dom 更新

尝试将验证方法放在“打开”单击方法上，例如

```
$("#Form").on ('click',handler) 
```

请接受劳伦斯建议的答案

像这样放

```
$("#Form").on("click", function(event){
      $(this).validate({
           rules:{
                name: "required",
                   messages:{
                        name: "Please enter your name"
                   },
           errorElement: "div",            
                   wrapper: "div",           
           errorPlacement: function(error, element) {
                   offset = element.offset();
                   error.insertBefore(element)
                   error.addClass('message');  // add a class to the wrapper
                   error.css('position', 'absolute');
                   error.css('left', offset.left + element.outerWidth());
           },
           submitHandler: function(form) {
                   form.submit();
           }

    });
}); 
```

# c++ - COM msado15.dll 程序已停止运行

> ID：13170009
> 
> 赞同：11
> 
> 时间：2012-11-01T02:06:49.737
> 
> 标签：c++, windows-8, windows-7, com, ado

我们一直在我们的程序中使用旧的 msado15.dll。我们曾经导入它 #import "msado15.dll" 。现在就在几天前，我们升级到了 Windows 8。唉，我们的软件停止在没有安装 Service Pack 1 的 Windows 7 上运行。早些时候，当我们使用 Windows 7 时，我们已经升级到 Service Pack 1，并且发生了同样的问题，因此我们从所有机器上卸载了 Windows 7 的 Service Pack 1，一切正常。

但是对于 Windows 8，我想他们已经更改了 msado15.dll。我在网上做了一些研究，他们说我们应该用 msado60.tlb 替换导入，但这也不适用于我们的编译中断。

这就是我们过去在 C++ 环境中的引用方式

```
import "c:\program Files\Common Files\system\ado\msado15.dll" rename_namespace("ADOCG") rename("EOF","EndofFile") 
```

我已将其更改为

```
import "c:\program Files\Common Files\system\ado\msado28.tlb" rename_namespace("ADOCG") rename("EOF","EndofFile") 
```

&也试过

```
import "c:\program Files\Common Files\system\ado\msado60.tlb" rename_namespace("ADOCG") rename("EOF","EndofFile") 
```

正如微软[链接](http://support.microsoft.com/kb/2640696)所建议的那样。但它仍然不能在没有安装 Service Pack 1 的 XP 机器和 Windows 7 机器上工作。

任何人都可以建议我们可以遵循的正确步骤，以便让我们的程序在没有 Service Pack 1 的 Windows 7 以及 Windows 8 上运行。

已经被这个问题困扰了几天了。帮助将不胜感激。

问候， Saurabh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T13:56:35.357

这是根据 Saurabh 的评论解决的：

> 我们所做的与您建议的解决方案相似。我们取了以前的 msaso15.dll 即没有 sp1 版本的 Windows 7 并将其导入。问题消失了。我认为这意味着我们仍在使用旧的 msado15.dll。但只要它有效，我们就很高兴。

# jquery - 验证输入文本框？

> ID：13170011
> 
> 赞同：1
> 
> 时间：2012-11-01T02:07:54.013
> 
> 标签：jquery

```
<input id="edit-name" type="text" class="name"/> 
```

光标聚焦在文本中，没有输入字符失去焦点，给个提示（请输入名字）

将光标聚焦在文本框中，然后在文本框中键入一个字符，将错误信息删除。

我的代码：

```
 $('#edit-name').focus(function(){
        if($(this).val()!=''){
        $('.error-message').remove();
        }
    });
    $('#edit-name').blur(function(){
        if($(this).val()==''){
            $('.error-message').remove();
          $('#edit-name').after('<span style="color:red;" class="error-message" >please enter the name！&lt;/span>'); 
        }

}); 
```

我的代码有问题吗？尽管我在文本框中输入了一个字符，但错误消息仍然存在，除非光标再次聚焦在文本中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:11:58.350

您正在使用模糊，这意味着如果您离开输入框没有输入任何内容，它将显示工具提示。但是，您的问题表明您想要

> 光标在文本中没有输入字符，给个提示（请输入名字）

这意味着也需要关注焦点和`else`条件。你正在寻找这样的东西：

```
 $('#edit-name').on('focus change', function(){
        if($(this).val()!=''){
        $('.error-message').remove();
        } else { 
          // what you're doing in the blur function
        }
    }); 
```

只要我专注于输入框，我就会看到工具提示。`change`确保我一输入内容，工具提示就会消失。

*PS - 除非我弄错了，而且你真的希望工具提示出现在模糊中。在这种情况下，请忽略此答案。*

# excel - 当值在数十亿或更大时，VBA 中的 Mod 溢出错误

> ID：13170012
> 
> 赞同：3
> 
> 时间：2012-11-01T02:08:19.270
> 
> 标签：excel, modulo, vba

我正在尝试找到数字 x 的最大素数除数。当 x 小于 10 亿时，我的代码可以工作，但是当它大于 10 亿时，它会给出溢出错误，并且调试会突出显示其中包含 Mod 的行。

```
 Sub Largest_Divisor()
    Dim x As Double
    Dim Q As Integer
    Q = 0
    Dim L() As Double
    x = 999999999#
    Dim i As Double
    For i = 775145 To 3 Step -2
        If x Mod i = 0 Then
            If IsPrime(i) Then
                ReDim Preserve L(Q) As Double
                L(Q) = i
                Q = Q + 1
            End If
        End If
    Next i
    MsgBox (Application.Max(L))
 End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T02:26:30.610

我怀疑当`x`大于大约 20 亿时，`2,147,483,648`确切地说，你遇到了麻烦。

这是因为根据 的文档`mod`，最多`long`返回 a ，其值范围从`-2,147,483,648`到`2,147,483,647`为 32 位有符号值。帮助文档中没有明确说明，但 的参数`mod`也可能被强制使用`long`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-15T21:22:19.477

一个好的解决方法是使用此功能：

```
Function Modulus(int1 As Double, int2 As Double) As Double

' This function will return int1 Mod int2\. It is useful when |int1| exceeds 
' 2,147,483,647 as the VBA Mod function will then break.
'

Dim myInt As Integer

myInt = Int(int1 / int2)

Modulus = int1 - (myInt * int2)

End Function 
```

# .htaccess - .htaccess http 到 https

> ID：13170016
> 
> 赞同：0
> 
> 时间：2012-11-01T02:09:10.363
> 
> 标签：.htaccess

我在导致问题的几个重定向之间存在冲突。

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/
RewriteRule ^index\.php$ https://www.mywebsite.org/ [R=301,L]

RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

Options +FollowSymLinks -MultiViews
RewriteCond %{REQUEST_FILENAME} !403\.shtml
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*) index.php?a_aid=$1  [NC,L,R=301] 
```

我遇到的问题是，当有人输入非安全网址时，它会将他们转发到

```
http://www.mywebsite.org/index.php?a_aid=https://www.mywebsite.org/url 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:18:47.537

我敢打赌，您需要在行尾添加 [L] ：

```
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

L 标签告诉代码在应用规则时停止运行，在您的情况下，它会继续运行，因此应用最后一条规则。

```
 RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [L] 
```

我想这就是我的灵魂。

在本节中，您将找到可以应用于您的规则的不同标志。我建议你也添加 NC 标志（不区分大小写），这样它也匹配 HTTPS

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

# javascript - 模糊名称字段

> ID：13170018
> 
> 赞同：0
> 
> 时间：2012-11-01T02:09:24.817
> 
> 标签：javascript

我似乎无法找到一种方法让 javascript 获取我在框中输入的名称，以使其在 onblur 事件发生时出现在段落作为输出的位置。

```
<!DOCTYPE html>

<!--

INFX1606 - Starter kit for Assignment 5.

-->

    <head>

        <meta charset="utf-8">
        <meta name="author" content="Joey Fultz">
        <meta name="description" content="Assignment 5">

        <title>First Swing at Javascript</title>

        <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />

        <script type="text/javascript" src="js/scripts.js"></script>

    </head>
    <body>
        <div class="all">
            <div class="title">
                <h2>Javascript</h2>
            </div>

            <div>
                <h3>Name and Banner</h3>
            </div>
            <span>
                <label for="namebanner">Name:</label>
                <input type="text" id="namebanner" name="namefield" onblur="showname() value">
            </span>
            <p id="p1"></p>
        </div>

    </body>
</html>

function showname() {
    var x = document.getElementById("namebanner");
    x.value = x.value.to("p1");
} 
```

我想知道为什么我的 javascript 是错误的，以及为什么在 onblur 事件发生时它不会显示我的名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:18:46.390

使用 JQuery 很容易做到这一点

```
<input type="text" id="namebanner" name="namefield" />

<script>
    $(function(){
        $('#namebanner').blur(function(){
            $('#p1').text( $(this).val() );
        });
    });
</script> 
```

或纯javascript

```
<script>
    function showname(){
        var x = document.getElementById("namebanner");
        document.getElementById("p1").innerHTML = x.value;
    }
</script> 
```

# c# - 如何在运行时从可移植库中确定 .net 平台？

> ID：13170024
> 
> 赞同：2
> 
> 时间：2012-11-01T02:10:14.223
> 
> 标签：c#, silverlight, runtime, windows-runtime, portable-class-library

具体来说，我希望能够在运行时确定可移植类库代码何时在 Silverlight、WinRT 或 .NET 上运行

我现在最好的想法是：

```
typeof(object).Assembly.GetCustomAttribute<AssemblyProductAttribute>().Product 
```

在 .NET 上它返回“Microsoft® .NE​​T Framework”，在 Silverlight 上它返回“Microsoft® Silverlight”，但我不确定它是否在 WinRT 上与众不同，因为我目前没有使用 Windows 8 进行开发。

所以我想知道这是否有效或有更好的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:10:58.963

虽然通常很少有充分的理由，但这里有一个这样做的类：

[http://mvvmlight.codeplex.com/SourceControl/network/forks/onovotny/MvvmLightPortable/changeset/view/f356af74426f#GalaSoft.MvvmLight/Portable/GalaSoft.MvvmLight/Helpers/DesignerPlatformLibrary.cs](http://mvvmlight.codeplex.com/SourceControl/network/forks/onovotny/MvvmLightPortable/changeset/view/f356af74426f#GalaSoft.MvvmLight/Portable/GalaSoft.MvvmLight/Helpers/DesignerPlatformLibrary.cs)

我使用它作为逻辑的一部分来确定 PCL 的 IsInDesignTime。

# asp.net - 调试 vb.net 网站项目 - “断点当前不会被命中。没有为此文档加载任何符号”

> ID：13170026
> 
> 赞同：1
> 
> 时间：2012-11-01T02:10:55.930
> 
> 标签：asp.net, vb.net, debugging

我最近收到了一个我想调试的 vb asp.net 网站项目。该站点使用 .Net 4，因此我在 IIS 中创建了一个新站点并创建了一个应用程序池。该站点可以根据需要在本地运行，因此现在我需要对其进行调试。

我正在运行 VS2010，所以我将它附加到与我新创建的应用程序池关联的 W3WP.exe 进程，到目前为止一切顺利。问题是，当我在任何 .aspx.vb 页面中插入断点时，我会收到消息“断点当前不会被命中。没有为此文档加载任何符号”出现在断点旁边。

为了尝试让 VS2010 与 IIS 中的站点链接，我使用记事本手动将错误插入到 .aspx.vb 页面之一中。这很好地扰乱了 Internet Explorer 中的页面，但不会导致 VS2010 调试页面。

我最初并没有编写这个网站，也无法与原始开发人员交谈以了解其中的复杂性。我对这个问题做了一些研究，发现很多人在讨论这个错误，但是每个人以前都能够调试他们的页面并且它无缘无故停止，我的情况不同，因为我只能调试通过将 VS 附加到 IIS 进程来创建页面。

任何指针都会受到极大的欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:18:51.273

在调试模式下插入断点。您可能在调试之前插入断点。在调试应用程序时，打开显示所有当前运行页面的脚本资源管理器（在脚本资源管理器中作为脚本文档提供）。从其中选择您要调试的一个，然后尝试在其中插入一个调试点。

# c++ - 二叉树中的级别顺序插入

> ID：13170036
> 
> 赞同：0
> 
> 时间：2012-11-01T02:12:31.697
> 
> 标签：c++, tree, binary-tree, insertion

我们必须在二叉树中逐级插入元素，也就是说，对于一个数组：

```
a = {1,2,3,4,5,6}

1st level = [1]
2nd level = [2, 3]
3rd level = [4, 5, 6] 
```

我已经制定了一个代码，但每次都会导致 NULL 树。

```
struct node
{
    int data;
    struct node* left;
    struct node* right;
};

node* create(int x)
{
    node* tmp;
    tmp=(struct node *)malloc(sizeof(struct node));
    tmp->data=x;
    tmp->left=NULL;
    tmp->right=NULL;
    return tmp;
}

struct node* tree;

void insert(struct node* tree, int* a, int start, int n)
{
    int left =2*start+1;
    int right=2*start+2;
    if(left>n || right>n)
        return;
    if(tree==NULL)
    {
        tree=create(a[start]);
    }
    if(tree->left==NULL && tree->right==NULL)
    {
        if(left<n)
            tree->left=create(a[left]);
        if(right<n)
            tree->right=create(a[right]);
    }
    insert(tree->left,a,left,n);
    insert(tree->right,a,right,n);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:20:17.737

你是`tree`按价值传递的；调用的人在返回后`insert`仍然有一个`NULL`指针。`insert`请参阅[按引用传递与按值传递有什么区别？](https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value)对于一些背景。

# c - 如何在保持纹理坐标正确的同时使用 glDrawElements？

> ID：13170037
> 
> 赞同：15
> 
> 时间：2012-11-01T02:12:33.903
> 
> 标签：c, opengl, textures

我正在使用/定位 OpenGL 4.20、GSLSL 4.20、核心。使用 C。

我正在使用 OpenGL 探索图形，并决定制作一个基于图块的游戏。我正处于我想实际绘制一堆瓷砖的地步，并试图使用 glDrawElements 来绘制单个三角形。

相关代码：

```
const float vertexPositions[] = {
  -1.0f, -0.8f, //0
  -0.8f, -0.8f, //1
  -0.6f, -0.8f, //2
  -0.4f, -0.8f, //3
  -0.2f, -0.8f, //4
   0.0f, -0.8f, //5

  -1.0f, -1.0f, //6
  -0.8f, -1.0f, //7
  -0.6f, -1.0f, //8
  -0.4f, -1.0f, //9
  -0.2f, -1.0f, //10
   0.0f, -1.0f, //11

//The following are the texture coordinates.
  0.00f, 1.00f,
  1.00f, 1.00f,
  0.00f, 1.00f,
  1.00f, 1.00f,
  0.00f, 1.00f,
  1.00f, 1.00f,

  0.00f, 0.00f,
  1.00f, 0.00f,
  0.00f, 0.00f,
  1.00f, 0.00f,
  0.00f, 0.00f,
  1.00f, 0.00f,
};

const GLubyte indices[] = {
  0, 1, 6, 
  1, 7, 6, 
  1, 2, 7, 
  2, 8, 7, 
  2, 3, 8, 
  3, 9, 8,
  3, 4, 9,
  4, 10, 9,
  4, 5, 10,
  5, 11, 10,
}; 
```

和

```
glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, 0);
glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 0, (void *)96);

glDrawElements(GL_TRIANGLES, 30, GL_UNSIGNED_BYTE, indices); 
```

（还有其他部分，但主要是格式/属性启用等。如果需要，我会提供更多）。

基本上我得到的是：

```
0  1  2  3  4  5
+--+--+--+--+--+
|b | d|b |d |b |
+--+--+--+--+--+
6  7  8  9 10 11 
```

我想要的是：

```
0  1  2  3  4  5
+--+--+--+--+--+
|b |b |b |b |b |
+--+--+--+--+--+
6  7  8  9 10 11 
```

其中“b”是纹理/正方形的正确方向，“d”是反向/反射。

我意识到，由于顶点坐标是共享的，这将会发生，但从我自己的想法/下面的一些帖子来看，这似乎是不可避免的。我要么保存顶点并反射纹理，要么最终发送 3*2*number_of_tiles 顶点，我觉得这违背了 glDrawElements 的目的。

## 没有帮助的资源：

这些是我发现的相关的东西，但似乎（对我来说）要么被弃用/没有回答/不完全符合我的要求。*如果它确实*回答了我的问题，请随时将我指向这些帖子之一。

[这](http://www.gamedev.net/topic/602169-opengl-drawing-cube-using-gldrawelements-and-gltexcoordpointer/)似乎是说 glDrawElements 对立方体毫无用处，并且您*必须*有单独的顶点构成面。这也适用于二维网格吗？

[这个问题](https://stackoverflow.com/questions/10592974/how-i-can-use-gldrawelements-for-many-squares)的答案是（除其他外）“两个顶点位置相同的正方形，但不同的纹理坐标必须用不同的四边形表示。” 但我不明白他在说什么。

[我认为这](https://stackoverflow.com/questions/10401605/coord-texture-array-does-not-works-correctly-with-gldrawelements)很接近。答案是：第一个链接已损坏/访问被拒绝。第二[个链接](https://stackoverflow.com/questions/7818649/problems-texturing-a-cube)有一个答案，基本上说顶点必须是不同的。这是必需的吗？在第三个链接（第二个代码片段）中，它们似乎只生成了所有 36 个顶点。对于一个立方体，这可能没问题，但是对于 n 个立方体..？我是否错过了他的例子的重点，也许？

我所要求的甚至可能吗？我是否使用完全不正确的功能来实现我想要实现的目标？“你做到了”？

我想过重新安排坐标，所以它看起来像：

```
0  2  4  6  8 10
+--+--+--+--+--+
|  |  |  |  |  |
+--+--+--+--+--+
1  3  5  7  9 11 
```

但我没有看到这将如何解决问题，因为顶点仍然是共享的。

谢谢，请随时纠正我/我的问题。第一个，所以我希望它需要修改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:55:07.450

> 第二个链接有一个答案，基本上说顶点必须是不同的。这是必需的吗？

是的。您希望每个单独的四边形具有从 0 到 1 的纹理坐标。这意味着构成第一个四边形右侧的位置不能使用与构成左侧的位置相同的纹理坐标第二个四边形。

而且[由于您不能拥有具有两个不同纹理坐标的相同位置](https://stackoverflow.com/questions/11148567/rendering-meshes-with-multiple-indices)，因此您必须复制您的位置。

# algorithm - 嵌套循环的复杂性（递归关系）

> ID：13170042
> 
> 赞同：0
> 
> 时间：2012-11-01T02:13:50.740
> 
> 标签：algorithm, complexity-theory, time-complexity

```
Algorithm-1 (A:array[p..q] of integer)
    sum, max: integer
    sum = max = 0
    for i = p to q 
        sum = 0
        for j = i to q 
            sum = sum + A[j]
            if sum > max then
                max = sum
    return max 
```

嵌套循环执行多少次？

我知道第一个`for`循环具有`O(n)`复杂性，整个算法的总复杂度为`O(n^2)`. 但是，我需要内部循环的确切执行次数，以便通过递归关系证明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:17:14.120

可能不是您要找的答案。事实上，你猜对了，内循环的复杂度为 O(n)，整个程序的复杂度为 O(n^2)。只需放入一个计数器并在您的内部循环中递增它。这应该会给你确切的执行次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:17:47.743

如果您想要一个确切的数字，则调用内部循环`(n + n-1+ ...1) = n(n+1)/2 ~= O(n^2)`

这里`n = q-p`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:21:36.240

不就是`Sum(i = 1 -> n, i)`，等于`n(n+1)/2`吗？

在你的情况下，`n = q-p+1`，所以你得到`(q-p+1)(q-p+2)/2`。

扩展它——如果我做对了——你会得到`(q^2-qp+2q-pq+p^2-2p+q-p+2)/2`= `(q^2+p^2-2qp+3q-3p+2)/2`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T02:53:24.830

内循环运行q-i+1次，总执行次数为

\sum{ i=p }^{ q } (q-i+1) = \sum{ k=1 }^{ q-p+1 } (k) = n * (n+1) /2

其中 n = q-p+1。

# oracle - Oracle 9i 中的正则表达式

> ID：13170043
> 
> 赞同：0
> 
> 时间：2012-11-01T02:14:49.347
> 
> 标签：oracle

嗨，任何人都可以帮助我吗，我的情况是

```
select to_number(((replace('1*Students', 'Students','60')))) 
  from dual; 
```

如果我这样使用，Invalid Number 错误即将到来。
如何转换为数字，它应该显示结果为“60”，请帮帮我，我堆叠了。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:38:20.837

```
select
 to_number( substr ( replace('1*Students', 'Students','60'), 0,instr( replace('1*Students', 'Students','60'), '*' )-1 ),'9999.99')    

 *
 to_number(substr ( replace('1*Students', 'Students','60'), instr(  replace('1*Students', 'Students','60'), '*' )+1 ),'9999.99')

from dual 
```

[小提琴演示](http://sqlfiddle.com/#!4/d41d8/3769)

# java - 在 OrientDB 中保存 Java 枚举

> ID：13170044
> 
> 赞同：3
> 
> 时间：2012-11-01T02:15:22.103
> 
> 标签：java, enums, orientdb

我正在使用 OrientDB，我想在字段中保存一个枚举。就像是：

```
db.save(new ODocument("Car").field("color", Colors.BLUE)); 
```

这是我得到的错误：

```
线程“主”com.orientechnologies.orient.core.exception.OSerializationException 中的异常：无法序列化对象，因为它没有实现 OSerializableStream 接口

```

解决此问题的简单方法是将“颜色”属性设置为 a`String`然后将其保存，`Colors.BLUE.name()`但如果是这种情况，那么我很确定 Orient 应该有某种方法可以为我处理这个问题，或者甚至更好，某种`OType`以更有效的方式处理这个问题。

有谁知道使用枚举的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-09T09:48:58.563

为该类型注册一个自定义序列化器 - 看起来您需要为此创建一个 OObjectSerializer，并将其注册到 OObjectSerializerContext。

# php - 从 sql 输出带有 html 标记的 varchar - 输出是编码的，不应该是

> ID：13170045
> 
> 赞同：0
> 
> 时间：2012-11-01T02:15:36.287
> 
> 标签：php, mysql, string, varchar

将表单字段中的输入保存到 sql 数据库 varchar(255)... 输入将类似于：

```
<a href="test.com">Author Name</a> 
```

底线是它很可能在大多数情况下都有 html 标签。当我从数据库中检索和输出时，我得到如下信息：

```
&lt;a href=&quot;test.com&quot;&gt;Author Name&lt;/a&gt; 
```

由于这应该作为 html 回显，因此它不会在页面上正确显示。也许我只是累了，但我不知道如何将其输出为非编码，以便浏览器正确读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:55:17.243

试试这个：

```
<?php
    echo htmlspecialchars_decode("&lt;a href=&quot;test.com&quot;&gt;Author Name&lt;/a&gt;");
?> 
```

为什么要在插入数据库之前对 html 标签进行编码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:45:01.353

```
#Connect to the DB
$db = mysql_connect('localhost', 'root', '');

#Select the DB name
mysql_select_db('test');

#html tag contain in a string='$str'
$str='<a href="test'.'.com"'.'>Author Name</a>';

###insert query section ###

#Ask for UTF-8 encoding
mysql_query("SET NAMES 'utf8'");

#Set the Query
$sql = "INSERT INTO `test`.`code` (`name`) VALUES ('$str');";//Save it in a text row, that's it...

#Run the query
mysql_query($sql);

###fetching result###

#fetching required info from mysql
$sqlQuery1 = "SELECT * FROM `code` WHERE `name` LIKE '$str'";

$result1 = mysql_query($sqlQuery1);  //order executes                                                                                  
$row1 = mysql_fetch_array($result1);
if( $row1){    
echo $row1['name'] ;
}

#HOPE THIS HELP YOU ALOT 
```

# php - PHP Form Mail - 内爆函数返回错误

> ID：13170047
> 
> 赞同：0
> 
> 时间：2012-11-01T02:16:28.377
> 
> 标签：php, email, implode

我的表单正在运行，但我在 scripts.log 文件中看到以下错误

> PHP 警告：implode() [function.implode]：传递的参数无效

这是我的 HTML：

```
 <td><select name="additional_events[]" size="8" multiple="multiple" class="formFields">
 <option selected></option><?php echo $drop_down_list;?> 
    </select></td> 
```

这是PHP：

```
$additional_events = trim(stripslashes(implode("  ///  ", $_POST['additional_events']))); 
```

任何的意见都将会有帮助。

# wordpress - WordPress 超大 alt 标签

> ID：13170049
> 
> 赞同：1
> 
> 时间：2012-11-01T02:17:01.567
> 
> 标签：wordpress, integration, alt, supersized, media-library

我正在为**WordPress使用****Supersized**插件（在 ThemeForest 上找到内置的“ **Direction** ”主题），但经过多次尝试，我无法弄清楚如何让它从**WordPress 媒体库**图像中放置使用过的 alt 和 tile 标签。也许你可以给我一些帮助？滑块图像被搜索引擎爬虫索引是非常重要的，如果没有从 WP 媒体库中获取的 alt 标签，这是不可能的。大流士。

 ******我指的网站是： http: [//opal-escence.com/](http://opal-escence.com/) - 缺少 alt 标签的图像是背景滑块图像。******

# liferay - 如何在 portlet 的操作阶段创建 RenderURL？

> ID：13170052
> 
> 赞同：4
> 
> 时间：2012-11-01T02:17:13.057
> 
> 标签：liferay, portlet, liferay-6

在方法`processAction(ActionRequest request, ActionResponse response)`中，我将一条记录插入数据库并获取`ID`，然后我想重定向到该记录的查看页面。所以我需要`RenderURL`为该 ID 创建一个带有参数值的值。

`ActionResponse`不提供创建`renderURL`. Liferay 中的一些代码会做类似的事情，例如：

1.  `renderURL`在访问之前创建`actionURL`
2.  `renderURL`作为参数传递`actionURL`

但是，当时我并不知道`ID`.

其他代码也`new PortletURLImpl()`直接使用。我的 portlet 看不到那个类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:25:06.180

> 其他代码也直接使用 new PortletURLImpl()。我的 portlet 看不到那个类。

因为这个类在`portal-impl.jar`并且不建议使用这个 jar 中的类。从 Liferay 6.1 开始，如果您的类指向`portal-impl.jar`.

现在回答你的问题：

`render`任何 jsp 都由方法或[`doView`](http://docs.liferay.com/portal/6.1/javadocs-all/com/liferay/util/bridges/mvc/MVCPortlet.html#doView%28javax.portlet.RenderRequest,%20javax.portlet.RenderResponse%29 "Liferay 6.1 API：MVCPortlet#doView")方法（如果使用 liferay's ）呈现，[`MVCPortlet`](https://github.com/liferay/liferay-portal/blob/6.1.x/util-bridges/src/com/liferay/util/bridges/mvc/MVCPortlet.java "github上的MVCPortlet源代码")并且该方法将作为 portlet 正常生命周期的一部分被调用。

以下是您需要采取的步骤：

1.  最后在您的 `processAction' 方法中设置渲染参数（使用[response.setRenderParameter()](http://www.bluesunrise.com/portlet-api/javax/portlet/StateAwareResponse.html#setRenderParameter%28java.lang.String,%20java.lang.String%29 "Portlet 2.0 API：ActionResponse#setRenderParameter")方法），这将在您的渲染方法中可用，如下所示：

    ```
    actionResponse.setRenderParameter("myID", 1201); 
    ```

    [**仅供参考：**使用后`setRenderParameter`无法使用[`sendRedirect`](http://portals.apache.org/pluto/portlet-2.0-apidocs/javax/portlet/ActionResponse.html#sendRedirect%28java.lang.String%29 "Portlet 2.0 API：说明不使用 sendRedirect 的文档")方法]

2.  在您获取`"myID"`任何其他请求参数时，在您的渲染方法中获取它：

    ```
    //assuming your ID is a long
    long myUserName = ParamUtil.getLong(renderRequest, "myID"); 
    ```

    或者

    ```
    String strMyID = renderRequest.getParameter("myID");
    long myID = Long.parseLong(strMyID); 
    ```

3.  在此之后，只需使用

    ```
    include(renderPage, renderRequest, renderResponse); 
    ```

    were`renderPage`只不过是一个字符串，其中包含您的 jsp 的`docroot`路径`/html/yourportlet/view.jsp`

    [**事后才想到：**
    如果您使用的是 Liferay IDE，那么您可以尝试创建一个简单的 portlet 项目，`MVCPortlet`然后查看生成`portlet.xml`的`<init-param>`]

所以基本上你需要将信息从动作阶段传递到渲染阶段，[开发指南](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/passing-information-from-the-action-phase-to-the-render-pha-4)是详细解释这一点的好地方。

而已。
希望这可以帮助。

如果您对此有任何困惑，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T22:53:27.980

在行动阶段执行以下操作：

```
ThemeDisplay themeDisplay = (ThemeDisplay)request.getAttribute (WebKeys.THEME_DISPLAY);
PortletURL url = PortletURLFactoryUtil.create(request, this.getPortletName(), themeDisplay.getPlid(), PortletRequest.RENDER_PHASE); 
```

例如，如果您想重定向到登录页面并返回，您可以执行以下操作：

```
response.sendRedirect("/c/portal/login?redirect=" + HttpUtil.encodeURL(url.toString())); 
```

当然，您可以根据需要添加或复制参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:15:37.143

您可以包含视图页面 include(viewTemplate,actionRequest,actionResponse)，而不是创建 renderURL。或者，如果您想发送任何想要在 doView 中获取它的参数，请使用 actionResponse.setParameter(name,value) 方法

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T09:55:10.123

我`RenderURL`用占位符作为参数值创建一个，如下所示：

```
 <portlet:renderURL var="redirect">
      <portlet:param name="ID" value="__ID__" />
   </portlet:renderURL>` 
```

在`processAction`：

```
 String redirect = redirectParam.replace("__ID__", "123213");
    actionResponse.sendRedirect(redirect) ; 
```

# windows-8 - Visual Studio 2010 SP1 与 Windows 8 不兼容？

> ID：13170054
> 
> 赞同：10
> 
> 时间：2012-11-01T02:17:30.857
> 
> 标签：windows-8, visual-studio-2010

我今天在笔记本电脑上运行了 Windows 8 升级助手，我看到了一些非常有趣的东西。Visual Studio 2010 SP1 与 Windows 8 不兼容，但 Visual Studio 2010（无服务包）兼容。
Visual Studio 2010 SP1 能否在 Windows 8 上运行？如果没有，是否只有一些特定功能无法正常工作，或者只是崩溃和烧毁并变得无法使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T03:39:01.457

兼容性中心列出 Microsoft Visual Studio 2010 SP1 与 Windows 8 不兼容。但 Visual Studio 2010 Ultimate SP1、Visual Studio 2010 Professional SP1、Visual Studio 2010 Premium SP1 与 Windows 8 兼容。

您使用的是哪个版本的 Visual Studio？

有关应用程序兼容性的更多详细信息，请访问兼容性中心。

[http://www.microsoft.com/en-us/windows/compatibility/win8/CompatCenter/ProductViewerWithDefaultFilters?TempOsid=win8&Locale=en-us&TextSearch=Visual%2BStudio%2B2010%2BSP1&Type=Both&CurrentPage=0&TotalPages=1&ShowCriteria=0&SortCriteria=Relevance&Compatibility=未知&LastRequested=14](http://www.microsoft.com/en-us/windows/compatibility/win8/CompatCenter/ProductViewerWithDefaultFilters?TempOsid=win8&Locale=en-us&TextSearch=Visual%2BStudio%2B2010%2BSP1&Type=Both&CurrentPage=0&TotalPages=1&ShowCriteria=0&SortCriteria=Relevance&Compatibility=Unknown&LastRequested=14)

# c - 重新分配一个 char*

> ID：13170064
> 
> 赞同：0
> 
> 时间：2012-11-01T02:19:05.553
> 
> 标签：c, printf, realloc

我正在尝试执行一个函数，该函数将在 char 数组中存储一些要在其上打印的信息：

```
int offset = 0;
size_t size = 1;
char *data = NULL;
data = malloc(sizeof(char));

void create(t_var *var){
    size_t sizeLine = sizeof(char)*(strlen(var->nombre)+2)+sizeof(int);
    size = size + sizeLine;

    realloc(data, size);

    sprintf(data+offset,"%s=%d\n",var->name,var->value);
    offset=strlen(data);
}

list_iterate(aList, (void *)create); 
```

t_var 是一个具有两个字段的结构：名称 (char*) 和值 (int)。

这段代码有什么问题？在 Valgrind 上运行它时，它会抱怨 realloc 和 sprintf。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:22:36.070

在不知道具体的 valgrind 错误的情况下，突出的是：

`realloc(data, size);`应该`data = realloc(data, size);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-11T17:03:38.040

我很抱歉这么说，但你的代码几乎所有东西都是错误的。

**首先，不完整的代码。**

你说你的`t_var`类型有两个成员，`name`并且`value`.

但是您的代码引用了一个`nombre`成员。发布代码的时候是忘记提还是忘记重命名了？

**二是误用`sizeof`。**

你使用一个`sizeof(int)`表达式。你知道你在这里实际做什么吗？！

显然您尝试计算打印`int`值的长度。唉，运算符`sizeof`检索有关参数在内存中占用的字节数的信息。因此，例如，对于 32 位整数，其结果`sizeof(int)`为 4（32 位适合 4 个字节），但最大有符号 32 位整数值为 power(2,31)-1，即`2147483647`十进制。十位数，而不是四位数。

您可以使用`(int)(2.41 * sizeof(any_unsigned_int_type)+1)`来确定打印 的值可能需要的字符数`any_unsigned_int_type`。在有符号整数类型的情况下，为前面的减号添加一个。

魔术常数`2.41`是`256`（在第 3 位十进制数字处四舍五入）的十进制对数，因此它将以字节为单位的长度缩放为以十进制数字为单位的长度。
如果您希望避免浮点运算，您可以使用另一个近似值 29/12=2.41666...，然后计算`(sizeof(any_unsigned_int_type)*29/12+1)`.

**第三，`sizeof(char)`。**

您将结果`strlen`乘以`sizeof(char)`。

实际上，这不是一个错误，但完全没用，就像定义上的`sizeof(char)`平等一样`1`。

**第四，`realloc`。**

正如其他人已经解释的那样，您必须存储返回值：

```
 data = realloc(data, size); 
```

否则，您可能会丢失重新分配的数据并继续在先前的位置写入，这可能会导致覆盖（因此破坏）堆上的其他一些数据。

**第五，`offset`。**

您使用该值来确定要到达的位置`sprintf()`。但是，在打印之后，您*用* `offset`最后打印输出的长度代替而不是增加它。结果连续`sprintf`的 s 将覆盖以前的输出！

做：

```
 offset += strlen(data); 
```

**第六：`strlen`的`sprintf`。**

您根本不需要`strlen`在这里调用，因为 family 的所有函数都会`printf`返回打印的字符数。你可以使用它：

```
 int outputlen = sprintf(data+offset, "%s=%d\n", var->name, var->value);
    offset += outputlen; 
```

**第七：`realloc`。严重地。**

这是相当昂贵的功能。它可能需要对`malloc`新大小的数据进行内部操作，将数据复制到新位置和`free`旧块中。你为什么要强迫它？如果有一天它需要打印五千个字符串，它会对你的程序产生什么影响......？

这也是相当危险的。真的。假设您需要打印 5,000 个字符串，但只有 2,000 个空间。你会`NULL`从`realloc()`. 打印到该点的所有数据都还在当前`data`指针处，但是接下来要做什么呢？
你怎么能告诉`list_iterate`停止迭代......？
您如何通知上面的例程`list_iterate`该字符串不完整...？

没有好的答案。幸运的是，您不需要解决问题——您可以避免解决问题！

**解决方案。**

首先遍历您的列表并计算您需要的缓冲区大小。然后分配缓冲区——只需一次！- 并继续填充它。只有一个地方分配可能会失败，如果发生这种情况，您根本无法解决问题：

```
int totaloutputlength = 0;
char *outputbuffer    = NULL;
char *currentposition = NULL;

void add_var_length(t_var *var){
    const int numberlength = sizeof(var->value)*29/12 + 1;
    totaloutputlength += strlen(var->name) + 2 + numberlength;
}

void calculate_all_vars_length(t_list *aList){
    totaloutputlength = 0;
    list_iterate(aList, (void *)add_var_length);
}

void sprint_var_value(t_var *var){
    int outputlen = sprintf(currentposition, "%s=%d\n", var->name, var->value);
    currentposition += outputlen;  // advance the printing position
}

int sprint_all_vars(t_list *aList){
    calculate_all_vars_length(aList);
    outputbuffer = malloc(totaloutputlength + 1);  // +1 for terminating NUL char

    // did allocation succeed?
    if(outputbuffer == NULL) {                     // NO
        // possibly print some error message...
        // possibly terminate the program...
        // or just return -1 to inform a caller something went wrong

        return -1;
    }
    else {                                         // YES
        // set the initial printing position
        currentposition = outputbuffer;

        // go print all variables into the buffer
        list_iterate(aList, (void *)sprint_var_value);

        // return a 'success' status
        return 0;
    }
} 
```

# javascript - 我在 jQuery 中的结果给出了 NaN

> ID：13170065
> 
> 赞同：0
> 
> 时间：2012-11-01T02:19:05.967
> 
> 标签：javascript, jquery

我得到`NaN`了结果，因为我的 jquery 正在乘以看起来像的数字`"204,3 * 3"`

我该如何处理？

我无法更改价格，我该怎么办？

`"234 * 2"``','`我一得到号码就可以正常工作`NaN`。

```
<script type="text/javascript">
    $('.quantity').keyup(function () {
        var parent = $(this).parent(),
            price = parent.find('.price').html(),
            quantity = parent.find('.quantity').val(),
            result = price * quantity;
        parent.find('.price2').html(result);
    });
</script>

     <span class="price">69,9</span>
     <input type="text" class="quantity">    
     <span class="price2">69,9</span>
     <span class="total">Total:</span>
     <div class="line2"></div> 
```

[检查我的 JSfiddle 一切都在那里](http://jsfiddle.net/pFzgf/9/)

任何形式的帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:27:50.960

Javascript 使用北美数字格式，这意味着`,`is used as a`thousands seperator`和 the `.`is used `decimal separator`。

您的问题有两种解决方案：

*   教您的用户输入数字，例如`1000.25`
*   写一个例程`1.000,25`变成`1000.25`

`String.prototype.replace`将是您的第二选择的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:24:27.297

您正在尝试将字符串相乘...使用 parseFloat() 和 replace() 方法，如此处的 jsFiddle 更新[所示](http://jsfiddle.net/pFzgf/15/)

```
 $('.quantity').keyup(function () {
    var parent = $(this).parent(),
        price = parent.find('.price').html().replace(',', '.'),
        quantity = parent.find('.quantity').val().replace(',','.'),
        result = parseFloat(price) * parseFloat(quantity);
    parent.find('.price2').html(result);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:27:30.773

您在这里**将两个字符串相乘**，而不是数字..

**使用带有基数的 parseInt**转换它们

 **或者

**使用parseFloat**转换它们

 **更改此行

```
 result = price * quantity; 
```

**至**

```
result = parseInt(price,10) * parseInt(quantity,10); 
```

或者

```
result = parseFloat(price) * parseFloat(quantity); 
```****

# android - 当用户单击项目时在两个列表视图之间移动项目会使应用停止

> ID：13170066
> 
> 赞同：0
> 
> 时间：2012-11-01T02:19:11.887
> 
> 标签：android, android-listview, android-arrayadapter

我正在尝试在两个列表视图之间移动一个项目（一个包含选中的项目，另一个包含未选中的项目）。所以当一个项目被点击时，它的选中状态已经改变，所以它被移动到另一个列表视图。但它不起作用。

Java代码：

```
public class T_C_Activity extends Activity {
    /**
     * Called when the activity is first created.
     */

    //private EditText edittext;
    private Button button;
    private  ArrayAdapter<String> adapter;
    private  ArrayAdapter<String> adapter1;

    private boolean[] check = new boolean[10];

    String[] countries = new String[]{
            "India",
            "Pakistan",
            "Sri Lanka",
            "China",
            "Bangladesh",
            "Nepal",
            "Afghanistan",
            "North Korea",
            "South Korea",
            "Japan"
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ListView lvc = (ListView) findViewById(R.id.lvc);

        ListView lvnc = (ListView) findViewById(R.id.lvnc);

        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, countries);
        //lvnc.setChoiceMode(AbsListView.CHOICE_MODE_MULTIPLE);
        lvnc.setAdapter(adapter); lvnc.setAdapter(adapter);

        adapter1 = new ArrayAdapter<String>( this, android.R.layout.simple_list_item_multiple_choice, new String[0]);

                lvc.setAdapter(adapter1);

        lvnc.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                //To change body of implemented methods use File | Settings | File Templates.
                String s = adapter.getItem(i);
                adapter1.add(s);
                adapter.remove(s);
                adapter1.notifyDataSetChanged();
                adapter.notifyDataSetChanged();
            }
        });

        lvc.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                //To change body of implemented methods use File | Settings | File Templates.
                String s = adapter.getItem(i);
                adapter.add(s);
                adapter1.remove(s);
                adapter.notifyDataSetChanged();
                adapter1.notifyDataSetChanged();
            }
        });

    }
} 
```

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >

<ListView
        android:id="@+id/lvc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:choiceMode="multipleChoice"
        />

    <ListView
            android:id="@+id/lvnc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:choiceMode="multipleChoice"
            />

    </LinearLayout> 
```

这是崩溃输出：

```
11-01 04:39:15.478: ERROR/AndroidRuntime(613): FATAL EXCEPTION: main
        java.lang.UnsupportedOperationException
        at java.util.AbstractList.add(AbstractList.java:404)
        at java.util.AbstractList.add(AbstractList.java:425)
        at android.widget.ArrayAdapter.add(ArrayAdapter.java:179)
        at com.app.T_C_Activity$1.onItemClick(T_C_Activity.java:56)
        at android.widget.AdapterView.performItemClick(AdapterView.java:298)
        at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
        at android.widget.AbsListView$PerformClick.run(AbsListView.java:2859)
        at android.widget.AbsListView$1.run(AbsListView.java:3533)
        at android.os.Handler.handleCallback(Handler.java:615)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4745)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        at dalvik.system.NativeStart.main(Native Method) 
```

当单击 lvnc (ListView) 中的项目时，应用程序停止。怎么了？此外，我没有看到两个列表视图之间的分离。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:57:08.873

数组不是动态的。您不能从中添加和删除项目。

**改变：**

```
String[] countries = new String[]{
            "India",
            "Pakistan",
            "Sri Lanka",
            "China",
            "Bangladesh",
            "Nepal",
            "Afghanistan",
            "North Korea",
            "South Korea",
            "Japan"
    }; 
```

**到**

```
ArrayList<String> countries = new ArrayList<String>();
            countries.add("India");
            countries.add("Pakistan");
            countries.add("Sri Lanka");
            countries.add("China");
            countries.add("Bangladesh");
            countries.add("Nepal");
            countries.add("Afghanistan");
            countries.add("North Korea");
            countries.add("South Korea");
            countries.add("Japan"); 
```

**和**

```
adapter1 = new ArrayAdapter<String>( this, android.R.layout.simple_list_item_multiple_choice, new String[0]); 
```

**到**

```
adapter1 = new ArrayAdapter<String>( this, android.R.layout.simple_list_item_multiple_choice, new ArrayList<String>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:56:44.373

问题是您正在`ArrayAdapter`使用简单的字符串数组初始化两个 s，它们不支持动态添加/删除元素。

相反，您可以给每个`ArrayAdapter`一个`ArrayList`：

```
ArrayList<String> countryArrayList = new ArrayList<String>(countries);
adapter = new ArrayAdapter<String>(this, ..., countryArrayList);
lvnc.setAdapter(adapter); // Note: your code does this line twice

ArrayList<String> secondArrayList = new ArrayList<String>();
adapter1 = new ArrayAdapter<String>( this, ..., secondArrayList); 
```

要操作列表，请根据需要调用和`.add()`，然后调用适配器。`.remove()``countryArrayList``secondArrayList``notifyDataSetChanged()`

# python-3.x - 64位python 3.X中的MySQL连接

> ID：13170068
> 
> 赞同：1
> 
> 时间：2012-11-01T02:19:55.180
> 
> 标签：python-3.x, mysql-python

我已经构建了一个大型程序，通过脚本在`MySQL`dbs 上运行查询。`python 3.X`我在 32 位系统上工作时开发了它，但现在正试图在我的新 64 位机器上运行它。到目前为止，我一直无法找到一个明确的答案，即是否存在适用于 64 位环境的`Python 3.X`模块`MySQL`。当我尝试导入在 32 位 Windows 中运行良好的模块时，我收到此错误：

> “ImportError：DLL 加载失败：%1 不是有效的 Win32 应用程序。” .

我已经检查了模块源并考虑对其进行更改。但在我这样做之前，我想确保没有可用的模块。

简而言之，我的问题是：

> 1.  是否有任何可用于 3.X 的 64 位链接 MySQL/Python 的预构建模块
>     
>     
> 2.  如果没有......是否有其他解决方法的想法可以让我在不重写 MySQLdb 现有模块的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:23:23.367

[用于oursql](https://launchpad.net/oursql)和[MySQL-python](http://sourceforge.net/projects/mysql-python/)的预编译 Windows 64 位 Python 3.2 二进制包可从[用于 Python 扩展包的非官方 Windows 二进制](http://www.lfd.uci.edu/~gohlke/pythonlibs/)页面页面获得。

# javascript - 如果只有一项，jCarousel 不显示任何内容

> ID：13170069
> 
> 赞同：2
> 
> 时间：2012-11-01T02:19:56.880
> 
> 标签：javascript, jquery, ajax, jquery-ui-tabs, jcarousel

我在 jQuery ui 选项卡中使用 jCarousel 开发了一个页面。以下页面是我得到的： http://knowledge.teldap.tw/knowledgeFB/my_creation/?fid= [668330535](http://knowledge.teldap.tw/knowledgeFB/my_creation/?fid=668330535)

问题是：如果您单击第三个选项卡（只有一项），除非您单击左箭头进行导航，否则您什么也找不到。这很奇怪，因为第一个选项卡（不止一项）一切都是正常且可见的。

谁能找出我错过了什么？因为我已经为此苦苦挣扎了几个小时。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:20:32.967

问题是您的轮播图像的宽度没有正确调整

在您的 jquery 中，放置滚动 1

```
 jQuery('#listelements').jcarousel({
                  scroll : 1, 
```

并且还可以调整容器的高度

```
.jcarousel-skin-tango1 .jcarousel-container-horizontal {
    width: 1200px;
    height:630px;
    margin-left://adjust margin left here

} 
```

你可以看看这个[轮播示例](http://fundapass.blogspot.in/2012/05/hello-syntaxhighlighter-function.html)

# php - SimpleTest 没有被触发，但仍然使服务器最大化

> ID：13170072
> 
> 赞同：1
> 
> 时间：2012-11-01T02:21:01.610
> 
> 标签：php, simpletest

我正在与一些学生分享一个简单的 PHP MVC 框架。作为框架的一部分，它在其 core/vendors/ 中包含 SimpleTest。

少数学生从他们的共享主机收到通知，由于 SimpleTest 中 detached_test.php 的 CPU 滥用，他们的帐户被关闭：

```
We regret to inform you that your account has been suspended for the following reason:
CPU / processes abuse via
joesmith 14425 12668 0 00:07 ?        00:00:00 /usr/bin/php
/home/joesmith/public_html/dwa/core/vendors/simpletest/test/detached_test.php 
```

编辑：还有一个关于它在 simpletest/test/failing_test.php 上的报告。

我想不通的是**什么会触发这些脚本**——用户实际上并没有调用 SimpleTest。它只是随框架一起提供给我们以后使用。

此外，当我搜索 SimpleTest 文件夹的内容时，其他脚本都没有调用 detached_test.php - 所以看起来这个脚本似乎是直接触发的。

我从使用 SimpleTest 的 Pinterest 的 WordPress 插件中找到了类似的报告（未解决）： [http ://wordpress.org/support/topic/plugin-pinterest-pinboard-widget-crashed-my-site](http://wordpress.org/support/topic/plugin-pinterest-pinboard-widget-crashed-my-site)

SimpleTest 是否成为机器人的目标？

# google-apps-script - 澳大利亚与美国约会问题（我认为！）

> ID：13170074
> 
> 赞同：0
> 
> 时间：2012-11-01T02:21:42.513
> 
> 标签：google-apps-script, google-calendar-api, google-sheets

我创建了一个电子表格，可以从 Google 电子表格名册创建 Google 日历事件。

在过去的一个月里，我在我的团队中成功地使用了它，现在我遇到了所有可怕的 Date 类型的问题。

据我了解，在使用 .getValue() 等函数时，将全面使用电子表格时区来确定日期。现在，当我尝试发送 11 月花名册的日历事件时，它工作正常，直到从 2012 年 11 月 12 日更改为 2012 年 11 月 13 日。

该脚本将正确获取日期 2012 年 12 月 11 日（变量类型：日期），并将使用它来创建事件。当它试图获取下一个日期时，它只会返回一个空白字符串。然后，Utilities.formatDate() 函数会抛出一个错误，指出它无法格式化字符串变量。

下图显示了 11 月 10 日的代码和调试信息。如果它工作正常，这也是第 13 号的外观。 ![在此处输入图像描述](../Images/60db57e53db0cb42593fd5f0e9e24d2c.png)

下图显示了 11 月 13 日的代码、​​错误和调试信息。您可以看到 getDate 是一个空白字符串，而 10th 是一个日期。（getDate 变量之后的任何变量信息都是上次迭代遗留下来的） ![在此处输入图像描述](../Images/8b4f997efc73339df68c7a43bc491f96.png)

我一直在绞尽脑汁来解释这一点。.getValue() 引用的两个单元格都包含有效的澳大利亚日期。它在整个 10 月都有效，只有当日期晚于 2012 年 11 月 13 日时才会出现问题（我也使用 2012 年 11 月 17 日进行了测试，结果相同）。

这就是我的想法：.getValue 返回 13/11/2012，但随后脚本将此视为美国日期。因此它决定没有第 13 个月并回退到一个空字符串。这种解释没有说明在 10 月事件中的正确使用。该脚本处理 13/10/2012 就好了。

如果您有任何建议，请提出，我无能为力！

编辑：根据要求添加代码：

```
function sendInvites() {
  // Gather Prelim Information
  var splash = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Splash");
  var nameRange = splash.getRange("A6:B26"); // Need to change this to be the full staff list in Splash

 // var inviteSheet = Browser.inputBox("Sheet to send invites from (Number)", Browser.Buttons.OK_CANCEL)
  var days = SpreadsheetApp.getActiveSpreadsheet().getSheets()[2];
  var dayRange;

  //Initiate iteration through Names, according to the Splash sheet
  for(nameRow=nameRange.getRow(); nameRow<=26; nameRow++){ //Change to Corresponding iterate
    // Gather Name and Email information for the each person
    var col = nameRange.getColumn();
    var row = nameRow;
    var name = splash.getRange(row, col).getValue();
    var email = splash.getRange(row, col+1).getValue();
    var eventChoice = splash.getRange(row, col+2).getValue();

    //Proceed if all information and permission exists
    if(name != "" && email != "" && eventChoice == "Yes"){
      var cal = CalendarApp.getCalendarById(email);

      //Initiate iteration through Days, according to the Roster
      for(i=0; i<=6; i++){
        //Specify Day Ranges
        switch(i){
          case 0: //Saturday
            dayRange = days.getRange("A1:O6"); break;
          case 1: //Sunday
            dayRange = days.getRange("A10:O15"); break;
          case 2: //Monday
            dayRange = days.getRange("A19:O41"); break;
          case 3: //Tuesday
            dayRange = days.getRange("A45:O67"); break;
          case 4: //Wednesday
            dayRange = days.getRange("A71:O93"); break;
          case 5: //Thursday
            dayRange = days.getRange("A97:O119"); break;
          case 6: //Friday
            dayRange = days.getRange("A123:O145"); break;
        }

        //Find Name in dayRange
        for(dayRow=dayRange.getRow(); dayRow<=dayRange.getLastRow(); dayRow++){
          var searchCol = dayRange.getColumn();
          var searchRow = dayRow;        
          var searchName = days.getRange(searchRow, searchCol).getValue();

          if (name==searchName){
            // Gather and format Date and Time information for invitation
            var eventName = "Library & IT Help";
            var getDate = dayRange.getValue();

            var date = Utilities.formatDate(getDate, "GMT+1000", "EEE MMM dd yyyy");
            var startCell = days.getRange(searchRow, searchCol+1).getValue();
            var endCell = days.getRange(searchRow, searchCol+2).getValue();

            if (startCell != ""){
              var startTime = date + " " + Utilities.formatDate(startCell, "GMT+1000", "HH:mm:ss");
              var endTime = date + " " + Utilities.formatDate(endCell, "GMT+1000", "HH:mm:ss");
              //Create a calendar event with the details above
              cal.createEvent(eventName, new Date(startTime), new Date(endTime));
            }
          }
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:22:12.730

您需要确保脚本本身使用您正在使用的语言环境。您可以在脚本编辑器 > 文件 > 属性（从内存中）中进行设置。

# ruby-on-rails - 警卫为什么停下来？

> ID：13170077
> 
> 赞同：7
> 
> 时间：2012-11-01T02:22:25.897
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, guard, minitest

我有一个 Rails 应用程序，我刚刚扔掉了警卫和 minitest，我的 gaurd 文件是

```
guard 'minitest', :cli => '--drb --format doc --color' do
  # with Minitest::Unit
  watch(%r|^test/(.*)\/?test_(.*)\.rb|)
  watch(%r|^lib/(.*)([^/]+)\.rb|)     { |m| "test/#{m[1]}test_#{m[2]}.rb" }
  watch(%r|^test/test_helper\.rb|)    { "test" }

  # Rails
  watch(%r|^app/controllers/(.*)\.rb|) { |m| "test/functional/#{m[1]}_test.rb" }
  watch(%r|^app/helpers/(.*)\.rb|)     { |m| "test/helpers/#{m[1]}_test.rb" }
  watch(%r|^app/models/(.*)\.rb|)      { |m| "test/unit/#{m[1]}_test.rb" }  
end 
```

但是当我运行警卫时，我得到一个命令提示符

```
bundle exec guard
22:14:12 - INFO - Guard uses TerminalTitle to send notifications.
22:14:12 - INFO - Guard is now watching at '/Users/trace/Sites/application'
1.9.3 (main):0 > 2 + 2
=> 4 
```

为什么我会收到这个提示。任何想法......这是我正在使用的一些宝石

**更新...**

当我运行`all minitest`然后测试运行...但我为什么要运行...任何想法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T09:00:57.807

您看到的是使用[Pry](http://pryrepl.org/)的 Guard 交互器。通常提示看起来有点不同，所以我假设你有一个`~/.pryrc`带有一些配置的文件。在昨天发布的 Guard 1.5.3 中，Guard 忽略`~/.pryrc`并仅评估`~/.guardrc`Pry 配置，因此正常的 Pry 配置与 Guard Pry 交互器分离。

当你看到这个提示时，说明Guard正在等待，无事可做。您现在可以开始工作，Guard 会根据您的文件修改和观察程序配置自动开始使用 minitest 测试您的应用程序，或者您可以手动触发操作。

您可以使用 获取可用操作的列表`help guard`。一些命令是根据 Guard 插件和`Guardfile`. 这是我的一个项目的示例：

```
$ bundle exec guard 
09:58:14 - INFO - Guard uses GNTP to send notifications.
09:58:14 - INFO - Guard is now watching at '/Users/michi/Repositories/extranett'
09:58:15 - INFO - Guard::Jasmine starts Unicorn test server on port 8888 in development environment.
09:58:17 - INFO - Waiting for Jasmine test runner at http://dnndev.me:8888/jasmine
09:58:23 - INFO - Run all Jasmine suites
09:58:23 - INFO - Run Jasmine suite at http://dnndev.me:8888/jasmine
09:58:41 - INFO - Finished in 8.853 seconds
09:58:41 - INFO - 896 specs, 0 failures
09:58:41 - INFO - Done.
09:58:41 - INFO - Guard::RSpec is running
09:58:41 - INFO - LiveReload 1.6 is waiting for a browser to connect.
[1] guard(main)> help guard
Guard
  all                Run all plugins.
  backend            Run all backend
  change             Trigger a file change.
  coffeescript       Run all coffeescript
  frontend           Run all frontend
  jasmine            Run all jasmine
  livereload         Run all livereload
  notification       Toggles the notifications.
  pause              Toggles the file listener.
  reload             Reload all plugins.
  rspec              Run all rspec
  show               Show all Guard plugins.
[2] guard(main)> exit
09:59:39 - INFO - Guard::Jasmine stops server.
09:59:39 - INFO - Bye bye... 
```

# php - 在 ZenCart 的后端检索管理员电子邮件

> ID：13170081
> 
> 赞同：0
> 
> 时间：2012-11-01T02:22:56.440
> 
> 标签：php, backend, zen-cart

我的脚本中有以下代码。它使用 ZenCart 内置的 DB 查询处理程序。它应该是提取当前管理员的管理员电子邮件地址。

有没有更好的方法来提取电子邮件地址？所有这些都是从 ZenCart 后端的脚本运行的。

```
$query = "select admin_email from ". TABLE_ADMIN ." where admin_id = " . $_SESSION['admin_id'];
$admin = $db->Execute( $query );
if( $admin ) {    $admin = $admin->fields;  }

  zen_mail($customer['customers_firstname'] . " " . $customer['customers_lastname'],
       $customer['customers_email_address'],
       $subject,
       $text,
       TITLE,
       $admin['admin_email'],
       $block,
       $module_used
     ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:19:35.290

要对购物车发送的电子邮件进行通用访问，请使用电子邮件存档管理器：

[http://www.zen-cart.com/downloads.php?do=file&id=101](http://www.zen-cart.com/downloads.php?do=file&id=101)

如果您正在编写自定义代码，并且需要获取当前管理员的电子邮件地址，请执行以下操作：

```
 $admin_id = $_SESSION['admin_id'];
  $addr_query = "SELECT admin_email FROM " . TABLE_ADMIN . " WHERE admin_id = :a
dmin_id"; 
  $addr_query = $db->bindVars($addr_query, ':admin_id', $admin_id, 'integer');
  $addr_query_result =  $db->Execute($addr_query);
  echo "***" . $addr_query_result->fields['admin_email']; 
```

# git - 错误 - 在 Git 上没有可提交的内容

> ID：13170084
> 
> 赞同：1
> 
> 时间：2012-11-01T02:23:19.470
> 
> 标签：git

我正在尝试将我的 first_app 提交到 Git 上。我在命令行中输入了以下内容（见下文），但我的输出表明没有什么可提交的。

```
new-host:first_app XXXXXX$ cd /Users/XXXXXX/rails_projects/first_app
new-host:first_app XXXXXX$ git init
Reinitialized existing Git repository in /Users/XXXXXX/rails_projects/first_app/.git/
new-host:first_app XXXXXX$ git add .
new-host:first_app XXXXXX$ git status
# On branch master
nothing to commit (working directory clean)
new-host:first_app XXXXXX$ 
```

在另一个终端中，我跑来`$ rails server`创建我的 first_app。为什么没有什么可承诺的？

我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T02:24:46.250

注意输出的第一行：

> 重新初始化现有的 Git 存储库

您已经在该目录中有一个 git 存储库，并且它没有未提交的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T02:30:58.820

做完之后

```
git add . 
```

您需要*提交*刚刚暂存的更改：

```
git commit -m "my first commit" 
```

`git show`您可以使用该命令查看最新提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:31:43.630

也许您之前在第一次创建 git 存储库时添加并提交了？

我能够通过以下方式重现这一点：

```
durrantm.../aaa$ git init
Initialized empty Git repository in /home/durrantm/play/aaa/.git/
durrantm.../aaa$ l
total 16
drwxrwxr-x 14 durrantm 4096 Oct 31 22:28 ../
-rw-rw-r--  1 durrantm   11 Oct 31 22:29 ggg
drwxrwxr-x  3 durrantm 4096 Oct 31 22:29 ./
drwxrwxr-x  7 durrantm 4096 Oct 31 22:29 .git/
durrantm.../aaa$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       ggg
nothing added to commit but untracked files present (use "git add" to track)
durrantm.../aaa$ git add .
durrantm.../aaa$ git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#       new file:   ggg
#
durrantm.../aaa$ git commit
[master (root-commit) 953c83f] new
 1 file changed, 1 insertion(+)
 create mode 100644 ggg
durrantm.../aaa$ l
total 16
drwxrwxr-x 14 durrantm 4096 Oct 31 22:28 ../
-rw-rw-r--  1 durrantm   11 Oct 31 22:29 ggg
drwxrwxr-x  3 durrantm 4096 Oct 31 22:29 ./
drwxrwxr-x  8 durrantm 4096 Oct 31 22:29 .git/
durrantm.../aaa$ git init
Reinitialized existing Git repository in /home/durrantm/play/aaa/.git/
durrantm.../aaa$ l
total 16
drwxrwxr-x 14 durrantm 4096 Oct 31 22:28 ../
-rw-rw-r--  1 durrantm   11 Oct 31 22:29 ggg
drwxrwxr-x  3 durrantm 4096 Oct 31 22:29 ./
drwxrwxr-x  8 durrantm 4096 Oct 31 22:30 .git/
durrantm.../aaa$ git add .
durrantm.../aaa$ git status
# On branch master
nothing to commit (working directory clean)
durrantm.../aaa$ 
durrantm.../aaa$ git commit
# On branch master
nothing to commit (working directory clean) 
```

请注意您所看到`nothing to commit`的 a 之后的结尾如何。`git add .`

一个“修复”是删除 git 存储库并重新开始，当您这样做时，您可以正常提交最终版本，例如：

```
durrantm.../aaa$ rm -rf .git/
durrantm.../aaa$ l
total 12
drwxrwxr-x 14 durrantm 4096 Oct 31 22:28 ../
-rw-rw-r--  1 durrantm   11 Oct 31 22:29 ggg
drwxrwxr-x  2 durrantm 4096 Oct 31 22:34 ./
durrantm.../aaa$ git init
Initialized empty Git repository in /home/durrantm/play/aaa/.git/
durrantm.../aaa$ l
total 16
drwxrwxr-x 14 durrantm 4096 Oct 31 22:28 ../
-rw-rw-r--  1 durrantm   11 Oct 31 22:29 ggg
drwxrwxr-x  3 durrantm 4096 Oct 31 22:34 ./
drwxrwxr-x  7 durrantm 4096 Oct 31 22:34 .git/
durrantm.../aaa$ git add .
durrantm.../aaa$ git commit
[master (root-commit) 380863a] wewew
 1 file changed, 1 insertion(+)
 create mode 100644 ggg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T02:31:08.130

看起来你已经在那个文件夹中有一个初始化的 git repo。它可能已经提交了所有文件，当您“重新初始化”时，您实际上只是重新启动了 git 服务。也许。尝试更改其中一个文件，然后键入以下命令：

```
cd /Users/XXXXXX/rails_projects/first_app/
git add .
git commit -a -m "commit message" 
```

那应该承诺。您可能需要将 CD 命令更改为指向 firstapp/git/，但老实说，我不记得了。祝你好运！

# css - 带容器的 CSS/HTML 导航栏？

> ID：13170086
> 
> 赞同：0
> 
> 时间：2012-11-01T02:23:40.313
> 
> 标签：css, html

好的，所以我每天都在报废我的 css/html 技能，但总是遇到一些问题。我确定我在这里做的是非常菜鸟编码。无论如何，我试图在网页中心创建一个非常简单的容器，顶部有一个导航栏，没有空间分隔它们。这是我到目前为止所拥有的，：/

index.html - [http://pastie.org/5149875](http://pastie.org/5149875) style.css - [http://pastie.org/5149890](http://pastie.org/5149890)

感谢所有帮助，如果您有任何提示，请告诉我！:)

附带问题：为什么我的 navbarwidth 必须大于 800px 才能与 mytablediv 匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:33:58.100

你没有做这么糟糕的工作。`margin-left`我学到的最大的教训之一是通过分配和`margin-right`to使事物居中变得非常容易`auto`。您也可以将其简化为简单的单行代码：

```
margin: 0 auto; 
```

如果你删除`float: left`并用它替换你的边距，你的元素应该居中。中间空格的问题可能是元素内部边距的问题（是的，这些也会影响它）。如果您有`<h1>`，则可以在它们之间创建一个间隙。

侧面答案：您必须将导航栏宽度设置为超过 800 像素才能匹配的原因是因为您在底部添加了填充，这将使有效宽度为 800 像素 + 2 x 填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:33:51.550

这是您在[jsFiddle](http://jsfiddle.net/74gxm)上的 html 和样式需求的缩小版本。基本上将您的页面包装在一个容器元素中，然后设置其宽度，然后将边距设置为`margin:0 auto;`使其居中，如下所示。要查看 800px 设置的更好示例，[请转到此处](http://jsfiddle.net/74gxm/show)

```
<html>
<head>
    <title> Learning </title>
    <link type="text/css" href="style.css" rel="stylesheet" />
    <style>
        #container{
            width: 800px;
            margin: 0 auto;    
        }
        #anavbar{
            border:solid 1px #000;       
        }
        #mytable{
            padding:10px;       
        }
    </style>
</head>
<body>
<div id="container" style="width:800px;margin:0 auto;">
    <div id="anavbar">
        <a href="#">Home</a>
        <a href="#">Aboute</a>
        <a href="#">Social</a>
        <a href="#">Contact</a>
    </div>
   <div id="mytable">
        <p>A new test by the frank man.</p>
    </div>
</div> 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:40:31.077

别担心，我是来帮你的。我给你一个简单的代码。使用和学习技巧。

菜单 HTML

```
<div class="menu-bg">
<div class="menu">
<ul>
<li><a href="#">HOME</a></li>
<li><a href="#">ABOUT US</a></li>
<li><a href="#">F.A.QS</a></li>
<li><a href="#">CONTACT US</a></li>
</ul>
<div class="clear"></div>
</div>
</div> 
```

菜单 CSS

```
.menu-bg{background:#999 repeat-x; border:1px; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px;}
.menu{width:100%;}
.menu ul{list-style:none;}
.menu li{float:left;}
.menu a{font-family:Calibri; font-size:14px; font-weight:bold; text-decoration:none; color:#dcdcdc; padding-left:30px; padding-right:30px; line-height:40px;}
.menu a:hover{font-family:Calibri; font-size:14px; font-weight:bold; text-decoration:none; color:#000; padding-left:30px; padding-right:30px; line-height:40px;}
.clear{clear:both;} 
```

希望这对您有所帮助。干杯...............

# java - java.lang.NumberFormatException：无法将字符串解析为整数

> ID：13170087
> 
> 赞同：4
> 
> 时间：2012-11-01T02:23:43.023
> 
> 标签：java, android, exception-handling, type-conversion

当我遇到这个问题时，我目前正在处理我的 android 项目

我希望这可以将像“0345303709”7 这样的字符串转换为整数，但我不断收到 NumberFormatException。

我在这里搜索了所有问题，但没有找到解决我的问题的方法。

下面是我的安卓代码：

```
 String edit_cell=cellnumber.getText().toString();
        try
        {
            if(cellnumber.getText().length()==11 && TextUtils.isEmpty(edit_cell)!=true && edit_cell!=null)
            {

                cell=Integer.valueOf("03462651882");
            }
            else
            {                   
                Toast.makeText(this, "Invalid CellNumber\n Write CellNumber like this Format:\nNetworkCode Followed by your Number\n",Toast.LENGTH_LONG).show();
                Toast.makeText(this, "eg:03213213214",Toast.LENGTH_LONG).show();    
            }
        }

        catch(Exception ex)
        {
            Toast.makeText(this, "Invalid cellnumber\n Write cellNumber line this format:\n Network code followed by your number\n",Toast.LENGTH_LONG).show();
            Toast.makeText(this, "eg:03213213214",Toast.LENGTH_LONG).show();    
        } 
```

我正在使用 eclipse Helios IDE，android 版本是 2.2 api 8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T02:25:31.063

它对于整数来说太大了，你需要一个长的。

### 编辑

没有注意到它是一个电话号码 - 绝对将其存储为字符串。

至于验证，*很多*人以前都处理过这个问题。例如，请参见此处：[电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T02:25:55.680

这是因为该值对于整数来说太大而无法处理。整数可以处理的最大值是 2147483647，[这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)是.

您可以使用`long`( `Long.valueOf()`) 代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:28:39.377

整数的最大值是 2^31-1 < 3 462 651 882，所以必须使用 long 类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T02:40:02.597

因为`Int`你得到更高的价值

`java.lang.NumberFormatException: For input string: "03453037097"`

只需像这样用 long 替换 int 值

```
String edit_cell=cellnumber.getText().toString();
    try
    {
        if(cellnumber.getText().length()==11 && TextUtils.isEmpty(edit_cell)!=true && edit_cell!=null)
        {

            cell=Long.parseLong("03462651882");//=====> Change is here
        }
        else
        {                   
            Toast.makeText(this, "Invalid CellNumber\n Write CellNumber like this Format:\nNetworkCode Followed by your Number\n",Toast.LENGTH_LONG).show();
            Toast.makeText(this, "eg:03213213214",Toast.LENGTH_LONG).show();    
        }
    }

    catch(Exception ex)
    {
        Toast.makeText(this, "Invalid cellnumber\n Write cellNumber line this format:\n Network code followed by your number\n",Toast.LENGTH_LONG).show();
        Toast.makeText(this, "eg:03213213214",Toast.LENGTH_LONG).show();    
    } 
```

# linux - Bugzilla 限制错误状态

> ID：13170088
> 
> 赞同：0
> 
> 时间：2012-11-01T02:23:57.813
> 
> 标签：linux, bugzilla

我们需要一个解决方案来解决我们在 bugzilla 中的部署。

我们的场景示例如下：

**组 : 员工,学生**

**项目/产品错误：projectA、projectB**

我们需要知道有没有办法：

1）限制用户组访问项目。

```
Example= Students cannot access or view bugs in projectA. 
```

2）限制其他用户组确认或更改错误状态

```
Example= Students cannot change the bug status of projectB  from  NEW to RESOLVED 
```

3) 某些组的成员集只能提交bug，不能关闭文件

```
Example= StaffA can only file a bug in ProjectA but cannot closed it whereas StaffB can file the bug and also can close the bug 
```

根据我的搜索/谷歌，没有可用的文档可以在 bugzilla 中解释此功能。但也许我以某种方式忽略了。我们当前的 bugzilla 是**3.2rc1版本**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:10:15.280

您并没有真正说明您使用的是哪个版本的 Bugzilla，因此这些 URL 是针对最新版本 4.2 的。但是，相同的概念适用于最新版本。例如，我们使用 3.6 并控制某些用户是否可以按照我在下面描述的相同方式更改某些内容。

1) 限制不在组内的用户查看 bug 是 Bugzilla 的组安全所做的：

[http://www.bugzilla.org/docs/4.2/en/html/groups.html](http://www.bugzilla.org/docs/4.2/en/html/groups.html)

您的案例中的一个问题是组安全控制积极访问而不是消极访问。也就是说，它允许指定哪些组**可以**查看产品中的错误，而不是**不能**查看的组。为了防止 的成员`students`查看 中的错误`projectA`，您需要有一个可以访问的组，`projectA`并设计一种方法将用户`students`排除在该组之外。

或者，您可以将一些自定义代码放入`Bugzilla::User::can_see_bug`, `Bugzilla::User::visible_bugs`，或`Bugzilla::Bug::check_is_visible`施加更严格的控制，使组中的`students`用户**永远**看不到错误`projectA`

2）您可以在允许更改时使用很多粒度：

[http://www.bugzilla.org/docs/4.2/en/html/cust-change-permissions.html](http://www.bugzilla.org/docs/4.2/en/html/cust-change-permissions.html)

我们做这样的事情。我们有一组用户，我们希望授予其只读访问权限，除非我们明确允许读写访问。为此，我们有一个`allspecialusers`基于电子邮件地址的用户所属的组。我们有另一个名为`approved_specialusers`的组，其中一些用户是手动添加的。

因此，在我们的 中`Bugzilla::Bug::check_can_change_field`，我们有如下代码：

> ```
> if ($user->in_group('specialusers') &&
>     !$user->in_group('approved_specialusers')) {
>     $$PrivilegesRequired = 3;
>     return 0;
> } 
> ```

您可以通过检查错误是否在产品中`projectB`以及尝试进行更改的用户是否在组中来做您想做的事情`students`

# javascript - 在javascript（netsuite）中对项目进行分组

> ID：13170089
> 
> 赞同：0
> 
> 时间：2012-11-01T02:23:58.107
> 
> 标签：javascript, arrays, grouping, netsuite

我想将销售订单中的同名商品分组，并将价格金额合并到报表中。

例如。销售订单

```
Item A 100usd 
Item A 100usd 
Item A 100usd 
Item A 100usd 
```

在报告上，我想总结所有项目的总价格并将项目 A 显示为一行：项目 A 400usd

我知道我应该使用 for 循环和数组来执行此操作，但是它似乎不起作用。

```
//scan through all lines
for(i=1;...){
item[i]=getitemforline(i);

itemprice[i]=getitempriceforline(i);

}
//check current line one by one for any duplicates, and sum up itemprice if there is
for(k=1;...){
      for(i=1;i<k;i++){ 
      currentitem[k] = getitemforcurrentline(k);
      currentitemprice[k] = getitempriceforcurrentline(k);
       if(currentitem[k] == item[i]){
       itemprice[i] = itemprice[i] + currentitemprice[k];
       }
      }
 print(itemw[i]+itemprice[i]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:51:05.027

您的 for 循环不正确。

> for(i=1;i<k;i++){

你需要 for(i=1;i<=k;i++){

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T14:42:54.663

```
Use below method for above use case:

var getLineItemAggregateResult = function(salesOrderId) {
    if(!salesOrderId) {
        return;
    }

    var salesOrder = nlapiLoadRecord('salesorder', salesOrderId); 
    var lineItemCount = salesOrder.getLineItemCount('item');

    /*-----------------------------------------------------------------------------------------------------------------------
    "lineItem_TotalValue" this is an object, it will contain lineitem as a key and total amount as a value
    e.g.: {item1 : 400,
          item2 : 500}
          As this will a JSON object so you can use this to display your final result.
    -------------------------------------------------------------------------------------------------------------------------*/
    var lineItem_TotalValue = {};
    for(var i = 1; i <= lineItemCount; i++) {
        if (!lineItem_TotalValue[salesOrder.getLineItemValue('item', 'item', i)]) {
            lineItem_TotalValue[salesOrder.getLineItemValue('item', 'item', i)] = parseInt(salesOrder.getLineItemValue('item', 'amount', i), 10);
        }
        else {
            lineItem_TotalValue[salesOrder.getLineItemValue('item', 'item', i)] += parseInt(salesOrder.getLineItemValue('item', 'amount', i), 10);
        }
    }

    return lineItem_TotalValue;
} 
```

# python - 使用其 python api 在 shopify 中创建具有图像 URL 的新产品

> ID：13170092
> 
> 赞同：5
> 
> 时间：2012-11-01T02:24:11.607
> 
> 标签：python, shopify

我希望从现有的网络应用程序自动将项目发布到 shopify 商店。我需要能够创建带有图像的项目才能这样做。我已经能够通过 python api 在 shopify 上创建项目 - 但不确定如何添加图像。这是我现在所拥有的：

```
all_products = Product.objects.all()[0:7]
for p in all_products:
    images=[]
    image={}
    image["src"] = p.image.url

    new_product = shopify.Product()
    new_product.product_type = p.category()
    new_product.body_html = p.description
    new_product.title = p.caption
    new_product.vendor = "atisundar"
    new_product.images = images
    new_product.save() 
```

如何在其中添加图像？

new_product.images 似乎不起作用。

非常感谢任何和所有帮助。:-)

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T02:40:37.033

我想到了。:-)

```
 new_product = shopify.Product()
    new_product.product_type = p.category()
    new_product.body_html = p.description
    new_product.title = "atisundar "+ p.caption
    new_product.vendor = "atisundar"

    image1 = shopify.Image()
    image1.src = p.image.url()

    new_product.images = [image1]
    new_product.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-07T20:37:46.120

我知道这个问题已经得到解答，但这里也有另一种方法。

```
new_image = shopify.Image(dict(product_id=product.id))
new_image.src = "http://someurlhere"
new_image.save() 
```

例如，如果您已经将产品 ID 保存在数据库中，那么您可以使用此路由并为自己保存对 API 的调用。

# c# - StreamReader、ThreadSafety 和读取模式的问题

> ID：13170095
> 
> 赞同：2
> 
> 时间：2012-11-01T02:24:37.957
> 
> 标签：c#, thread-safety, streamreader

我有以下代码来读取文件

```
StreamReader str = new StreamReader(File.Open(fileName, FileMode.Open, FileAccess.Read));
string fichier = str.ReadToEnd();
str.Close(); 
```

这是 asp.net 网络服务的一部分，并且已经在生产中运行了一年。现在随着服务器负载的增加，客户开始收到“文件已在使用”错误。该文件正在从此代码中读取，并且永远不会从应用程序中写入。

我清楚地看到的一个问题是我们没有缓存文件的内容以供将来使用。我们会这样做。但我需要了解我们为什么以及如何遇到这个问题。

是因为多个线程试图读取文件吗？我读到 StreamReader 不是线程安全的，但是当我在读取模式下打开文件时为什么会出现问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T02:29:23.610

您需要在允许读取访问权限的情况下打开文件。使用此重载[`File.Open`](http://msdn.microsoft.com/en-us/library/y973b725.aspx)来指定文件共享模式。您可以使用[`FileShare.Read`](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)允许对该文件进行读取访问。

另一种可能的解决方案是在类的静态构造函数中将此文件加载到内存中，然后将内容存储在静态只读变量中。由于静态构造函数保证只运行一次并且是线程安全的，因此您无需执行任何特殊操作即可使其工作。

如果你从不改变内存中的内容，你甚至不需要在访问数据时加锁。如果您确实更改了内容，则每次要更改此数据时都需要先克隆此数据，但是再一次，您不需要锁定克隆操作，因为您的实际原始数据永远不会改变。

例如：

```
public static class FileData
{
    private static readonly string s_sFileData;

    static FileData ()
    {
        s_sFileData = ...; // read file data here using your code
    }

    public static string Contents
    {
        get
        {
            return ( string.Copy ( s_sFileData ) );
        }
    }
} 
```

这会封装您的数据并为您提供对其的只读访问权限。

仅当您的代码可能修改文件内容时才需要`String.Copy()`- 这只是强制创建新字符串实例以保护原始字符串的预防措施。由于`string`它是不可变的，因此只有在您的代码使用字符串指针时才需要这样做 - 我只添加了这一点，因为上周我在自己的代码中遇到了一个类似变量的问题，当时我使用了指向缓存数据的指针。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:31:00.943

FileMode 仅控制您可以执行的操作（读/写）。

对文件的共享访问在操作系统级别处理，您可以使用 FileShare（第 3 个参数）请求行为，请参阅[doc](http://msdn.microsoft.com/en-us/library/system.io.fileshare%28v=vs.71%29.aspx)

# r - 在 R 中生成滞后变量（和使用 zoo）时避免 for 循环

> ID：13170097
> 
> 赞同：1
> 
> 时间：2012-11-01T02:24:42.787
> 
> 标签：r, time-series, zoo

我正在为具有 79,000 个观察值的时间序列生成大量滞后变量（实际上是 365 个）。

`OrdersData`我目前在名为`prospectdrop`s的数据框中有一列。我首先将其转换为`zoo`格式以使用该`lag()`功能：

```
prospectdrops<-zoo(OrdersData$prospectdrop) 
```

然后我执行for循环：

```
for (i in 1:365){
  prospectdrops[paste("lag",i,"day",sep="")] <- lag(prospectdrops,i*24,na.pad=TRUE)
} 
```

然后我被迫再次循环使用 cbind 绑定它们为 data.frame() 做准备

```
for (i in 1:365){
cbind(prospectdrops, prospectdrops[paste("lag",i,"day",sep="")])
} 
```

可以理解的是，这对于 R 中的 for 循环函数来说是永久的。我知道“应用”可能是答案，但在函数的描述中看不到直接的比较器。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:31:44.270

`k`in`lag.zoo`可以是向量。见`?lag.zoo`。

```
x <- zoo(11:21)
lag(x,1:3) 
```

# jquery - Chrome 中 .animate() 的问题（在 Firefox 和 IE 中很好）

> ID：13170099
> 
> 赞同：0
> 
> 时间：2012-11-01T02:25:17.037
> 
> 标签：jquery, internet-explorer, google-chrome, cross-browser, jquery-animate

当您单击导航按钮时，我只是试图将主容器（以及其中的所有内容）滑开以在下方显示导航菜单。当您再次单击它时，容器 div 将移回导航菜单的顶部。它是在移动设计中流行的 UI。

无论如何，我让它在 Firefox 和 IE 中运行良好。不幸的是，Chrome 不能这样说。

[http://jsfiddle.net/aXsWz/28/](http://jsfiddle.net/aXsWz/28/)

```
$(document).ready(function() {

$('div#navNavigate').click(function(){
        $('div#navNavigateHide').show()
        $('div#navNavigate').hide()
        $('div#container').animate({'left':'+=120'});
});  

$('div#navNavigateHide').click(function(){
        $('div#navNavigate').show()
        $('div#navNavigateHide').hide()
        $('div#container').animate({'left':'-=120'});
    });
}); 
```

所以，问题是“导航”和“容器”div 没有一起移动。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:37:39.910

更新：：

您在导航上有一个固定的位置规则。如果将其更改为绝对，动画将正常运行：

```
#nav {
  background:#222222;
  width:240px;
  height:45px;
  margin:0 auto;
  position:absolute;  <-- This was previously "fixed"
  top:0;
  z-index:10000;
} 
```

工作示例：http: [//jsfiddle.net/aXsWz/30/](http://jsfiddle.net/aXsWz/30/)

看看这篇文章，看看固定定位和绝对定位的区别： http: [//css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

* * *

问题是您已经将切换嵌套在移动的容器内。如果您将它们重构为位于该容器之外，它就可以正常工作（尽管您可以对这个 js 模式进行很多改进......）。

工作示例：http: [//jsfiddle.net/aXsWz/29/](http://jsfiddle.net/aXsWz/29/)

```
<div id='nav'>
    <div id='navNavigate'>
    </div>
    <div id='navNavigateHide'>
    </div>
</div>    

<div id='container'></div> 
```

# php - 用于确定邮寄目的地的 PHP 复选框

> ID：13170107
> 
> 赞同：0
> 
> 时间：2012-11-01T02:25:56.690
> 
> 标签：php, forms, post

我有一个我使用的邮件表格。在新用法中，我添加了 2 个复选框。我希望能够根据复选框将邮件发送到不同的地址。EX: if "box1 check mail to xx, if box 2 check mail to xx, else mail to both.我用来邮寄的代码是：

```
<?

/************************
* Variables you can change
*************************/

$mailto = "";
$cc = "";
$bcc = "";
$subject = "contact";
$vname = "Enquiry";

/************************
* do not modify anything below unless you know PHP/HTML/XHTML
*************************/
/* my trial adjustment for check boxes
*/

$email = $_POST['email'];

function validateEmail($email)
{
   if(eregi('^[a-zA-Z0-9._-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,4}(\.[a-zA-Z]{2,3})?(\.[a-zA-Z]{2,3})?$', $email))
      return true;
   else
      return false;
}

if((strlen($_POST['name']) < 1 ) || (strlen($email) < 1 ) || (strlen($_POST['message']) < 1 ) || validateEmail($email) == FALSE){
    $emailerror .= '';

    if(strlen($_POST['name']) < 1 ){
        $emailerror .= '<li>Enter name</li>';
    }

    if(strlen($email) < 1 ){
        $emailerror .= '<li>Enter email</li>';
    }

    if(validateEmail($email) == FALSE) {
        $emailerror .= '<li>Enter valid email</li>';
    }

    if(strlen($_POST['message']) < 1 ){
        $emailerror .= '<li>Enter message</li>';
    }

} else {

    $emailerror .= "Your email has been sent successfully";

    // NOW SEND THE ENQUIRY

    $timestamp = date("F j, Y, g:ia");

    $messageproper ="\n\n" .
        "Name: " .
        ucwords($_POST['name']) .
        "\n" .
        "Email: " .
        ucwords($email) .
        "\n" .
        "Telephone Contact: " .
        ucwords($_POST['tel']) .
        "\n" .
        "Company: " .
        ucwords($_POST['company']) .
        "\n" .
        "Comments: " .
        $_POST['message'] .
        "\n" .
        "\n\n" ;

        $messageproper = trim(stripslashes($messageproper));
        mail($mailto, $subject, $messageproper, "From: \"$vname\" <".$_POST['e_mail'].">\nReply-To: \"".ucwords($_POST['first_name'])."\" <".$_POST['e_mail'].">\nX-Mailer: PHP/" . phpversion() );

}
?>

<div id='emailerror'>
    <ul>
        <? echo $emailerror; ?>
    </ul>
</div> 
```

复选框代码：

```
 <label>MailPersonA</label>
    <input type="checkbox" name="A" value="checkbox" id="A" />
   <label>MailPersonB</label>
      <input type="checkbox" name="B" value="checkbox" id="B" /> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:35:28.800

你可能会做得更好：

```
 <label>MailPersonA</label>
    <input type="checkbox" name="emailadd[]" value="email1@example.com" id="A" />
   <label>MailPersonB</label>
      <input type="checkbox" name="emailadd[]" value="email2@example.com" id="B" /> 
```

然后在处理中：

```
if($_POST['emailadd']) {
    foreach($_POST['emailadd'] as $email) {
         $mailto.= $email . ',';
    }

$mailto= trim($mailto,','); 
```

根据表单中的值在后端添加电子邮件可能是一个好主意，而不是像我在这里所做的那样将它们正确地放在表单中。我只是为了举例而简化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:40:14.057

您可能想要：

*   使用单选输入而不是复选框，以确保准确选择了一个
*   将收音机命名为相同
*   给他们不同的价值

所以你的 HTML 将是

```
<label>MailPersonA</label>
<input type="radio" name="toaddress" value="person1@wherever.com" id="A" />
<label>MailPersonB</label>
<input type="radio" name="toaddress" value="person2@wherever.com" id="B" /> 
```

现在`$_POST['toaddress']`将包含目标电子邮件地址。

# file - 跨平台程序读取/写入文件

> ID：13170108
> 
> 赞同：1
> 
> 时间：2012-11-01T02:26:10.937
> 
> 标签：file, platform

我想提供一个程序，例如 Python 脚本，它可以在包括 Linux、Mac 和 Windows 在内的平台上运行。我希望程序读取目录中几个文件的内容，并根据内容在该目录中创建一个新文件。具体来说，我希望程序找到`file1.txt`and `file2.txt`，并创建一个新文件`file3.txt`，该文件是前两个文件的串联。

我可能会向 Linux 用户提供 Python 脚本，用户可以运行

```
python script.py 
```

但是，Windows 没有 Python。我还有哪些其他程序选择可以让它在这些平台上运行，而无需用户安装任何额外的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:31:48.107

我不知道无需任何额外工作即可在所有操作系统上运行的任何东西。但是，Java 可能是一个不错的选择，因为它通常被安装。你可以使用 C++，但你必须在每台你希望它工作的机器（Windows、Mac、Linux）上编译它，你还必须确保你不使用任何不会转移到其他操作系统的库.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:31:57.200

您可以使用 C++，但是您必须为每个平台进行编译，这有时比您想要的要多。

大多数系统已经安装了某种形式的 Java，它可以工作。

Python 在 Windows、Mac 和 Linux 上运行，用户只需要安装它。

# c# - 对 List 和 Array 的使用感到困惑

> ID：13170113
> 
> 赞同：-3
> 
> 时间：2012-11-01T02:26:57.077
> 
> 标签：c#, xml, class, datagridview

稍后我将不得不将它们分解为两个 datagridviews，但我对 Inquiry 类持有 lineitems 数组持怀疑态度，正如我在下面的代码中所做的那样。我不确定这是否是正确的方法。

我计划稍后将这些对象放入 XML 文件中，并将其作为数据源也连接到相同的数据网格视图。

这是我正在为此准备的界面![在此处输入图像描述](../Images/48adf92960a96751a3b7f038444e63e5.png)

```
 List<Inquiry> myInquiries = new List<Inquiry>();

    class Inquiry
    {
        public string firstName { get; set; }
        public string lastName { get; set; }
        public string company { get; set; }
        public string phoneNumber { get; set; }
        public string faxNumber { get; set; }
        public string email { get; set; }
        public LineItem[] lineitems { get; set; }
    }

    class LineItem
    {
        public int quantity { get; set; }
        public string partNumber { get; set; }
        public string description { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:03:04.173

您将希望使用 DataTable 将值映射到 DataGridView。如果你不这样做，你的列名将是你的属性名。如果使用 DataTable，则可以指定自定义列名。

至于使用数组或列表。列表更易于使用，因为您可以应用 linq 或使用它实现的任何接口。我并不是说数组不好，只是列表更好。

# javascript - 这两个javascript调用有什么区别？

> ID：13170117
> 
> 赞同：0
> 
> 时间：2012-11-01T02:27:54.883
> 
> 标签：javascript, jquery

“功能”在下面做什么？

```
$('.event-row').on('mouseover',function(){
  arc.event_handler.event_row_over();
  });

$('.event-row').on('mouseover',arc.event_handler.event_row_over ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T02:33:05.763

有一个非常重要的区别。

*   第一个将调用函数，并将其值作为对象~~的上下文。~~`this``event_handler`

*   第二个将使用~~上下文~~调用函数，并将其`this`值作为处理程序绑定到的 DOM 元素。

所以第一个保留了预期的~~调用上下文~~ `this`值，这可能是函数需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T02:41:06.800

在第一种情况下，该函数`this`内部的匿名函数绑定到导致事件的 DOM 元素。这是浏览器中常见的约定，在本机绑定事件时也会这样做。然而，当调用`arc.event_handler.event_row_over();`时，`this`被重新绑定到`arc.event_handler`inside `event_row_over`；因为它被称为对象方法，并且在这种情况下`this`指向调用该方法的对象。该方法将在没有任何参数的情况下被调用。

在第二种情况下，您`arc.event_handler.event_row_over`为事件注册函数。当调用 jQuery 时，设置`this`为相关元素，因此 inside `event_row_over`，`this`指向该元素。`arc.event_handler`除非有其他变量指向它，否则在那里不可用。jQuery 还将事件对象作为第一个参数传递，因此使用该参数调用方法。

通常对象方法期望`this`成为它们的对象，因此几乎在每种情况下，您都希望使用匿名函数来包装调用。如果元素很重要，请`this`作为参数传递给方法。

另一种方法，没有匿名函数，将使用[`bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)每个函数都有的方法：

```
$('.event-row').on('mouseover', arc.event_handler.event_row_over.bind(arc.event_handler)); 
```

但是，只有现代浏览器本机支持这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:29:51.007

在第一种情况下，您将函数调用包含在匿名函数中。

在第二种情况下，您只是分配函数指针..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T02:30:41.820

首先，似乎那里有一个额外的点..`arc.event_handler.event_row_over.();`应该只是`arc.event_handler.event_row_over();`

匿名函数所做的只是调用一个以对象命名`event_row_over`的成员函数`arc.event_handler`；它不返回任何东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T02:33:03.890

'function' 关键字将创建一个新的闭包并封装范围。关于闭包的好文章[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T02:35:59.370

函数的上下文/范围将不同。

此外，与第二个，

```
$('.event-row').on('mouseover',arc.event_handler.event_row_over ); 
```

您将事件对象作为参数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-01T02:36:45.773

第一种情况，你有一个额外的函数包装器。当您想在调用真正的事件处理程序“arc.event_handler.event_row_over()”之前执行其他操作时，这很有用，例如，您可以执行以下操作：

```
$('.event-row').on('mouseover',function(){
  doPreEventHandling();
  arc.event_handler.event_row_over();
  doPostEventHandling();
}); 
```

另一方面，您甚至可以将该匿名函数提取为命名函数并调用如下：

```
var eventHandler = function(){
      doPreEventHandling();
      arc.event_handler.event_row_over();
      doPostEventHandling();
};

$('.event-row').on('mouseover', eventHandler); 
```

以上所有在行为上都是相似的，但是更多的包装函数你可以获得更多的抽象。但它会影响性能，有时还会影响可读性。

# xml - 从 XML 响应转换图像

> ID：13170121
> 
> 赞同：0
> 
> 时间：2012-11-01T02:28:09.447
> 
> 标签：xml, image, base64, encode

我在确定使用哪种方法来显示从 XML 发送的图像时遇到问题。我收到以下 XML 响应：-

```
 <?xml version="1.0" encoding="UTF-8"?>
   <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header>
         <i18n:international xmlns:i18n="http://www.w3.org/2005/09/ws-i18n">
         <i18n:locale>en_US</i18n:locale></i18n:international>
    </soapenv:Header>
     <soapenv:Body>
     <get:GetCustAreaSnapshotResponseParam  xmlns:get="http://tnb.com.my/CGIS/D/getcustareasnapshotcon">
     <ResponseHdr>
     <ns2:ResponseId xmlns:ns2="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:ns1="http://tnb.com.my/CGIS/D/getcustareasnapshotpro">02946A91565A40210000013AB9B58E97</ns2:ResponseId>
     <ns2:ResTransactionId xmlns:ns2="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:ns1="http://tnb.com.my/CGIS/D/getcustareasnapshotpro">111112100334570</ns2:ResTransactionId>
  <ns2:ProviderId xmlns:ns2="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:ns1="http://tnb.com.my/CGIS/D/getcustareasnapshotpro">CGIS</ns2:ProviderId>
   <ns2:ResTimestamp xmlns:ns2="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:ns1="http://tnb.com.my/CGIS/D/getcustareasnapshotpro">2012-11-01T10:03:34.000+08:00</ns2:ResTimestamp>
    <ns2:ResStatus xmlns:ns2="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:ns1="http://tnb.com.my/CGIS/D/getcustareasnapshotpro">SUCC</ns2:ResStatus>
  <ns2:MsgCode xmlns:ns2="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:ns1="http://tnb.com.my/CGIS/D/getcustareasnapshotpro">IM-001</ns2:MsgCode>
   <ns2:MsgDesc xmlns:ns2="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:ns1="http://tnb.com.my/CGIS/D/getcustareasnapshotpro">Map Data Successfully Return to external Systems.</ns2:MsgDesc>
   </ResponseHdr>
   <ResGetCustAreaSnapshot>
       <cmc:GetCustAreaSnapshot xmlns:cmc="http://tnb.com.my/CGIS/D/cmc_customermgnt">
              <cmc:MAP_IMAGE_ZOOM1000>iVBORw0KGgoAAAANSUhEUgAAAaQAAAGkCAYAAAB+TFE1AAAQJUlEQVR4nO3d3XbbthZGUbgj7w==</cmc:MAP_IMAGE_ZOOM1000>
              <cmc:MAP_IMAGE_ZOOM2000>iVBORw0KGgoAAAANSUhEUgAAAaQAAAGkCAYAAAB+TFE1AAAHoElEQVR4nO3d3XKaUBhA0UMn7w==</cmc:MAP_IMAGE_ZOOM2000>
              <cmc:MAP_IMAGE_ZOOM4000>iVBORw0KGgoAAAANSUhEUgAAAaQAAAGkCAYAAAB+TFE1AAAHCklEQVR4nO3dya6bMABAUVPl</cmc:MAP_IMAGE_ZOOM4000>
       </cmc:GetCustAreaSnapshot>
  </ResGetCustAreaSnapshot>
  </get:GetCustAreaSnapshotResponseParam> 
```

我应该提取出 MAP_IMAGE_ZOOM 然后使用 base64_decode。解码字符串后，当我回显结果时，我收到以下内容：-

```
 ‰PNG  IHDR¤¤~LQ5%IDATxœíÝÝvÛ¶FQ¸#ï 
```

这是什么类型的编码？？我应该如何将其显示为图像？我试过了 ：

```
 file_put_contents('test4000.png',  base64_decode($bin)); 
```

但显示的图像只是空白。

我还尝试了以下方法，还收到了一张空白图片：

```
 $img = html_entity_decode(base64_decode($bin), ENT_COMPAT,'ISO-8859-1');
 Header("Content-Type: image/png");
 die($img); 
```

将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:01:38.693

这是一个 PNG 文件，带有一个 IHDR 块和一个 IDAT 块。这些在[http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html](http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html)中有所描述， 另见上一页，[http://www.libpng.org/pub/png/spec/1.2 /PNG-Structure.html](http://www.libpng.org/pub/png/spec/1.2/PNG-Structure.html)用于整体 PNG 结构。

IHDR 内容告诉我这是一个 420x420 图像，RGBA 三元组（颜色，透明）中 8 位深。

IDAT 短得令人怀疑，但可能图像都是一种颜色，在某处有一个小曲线，或者是一个非常简单的图像。我在 Python 中玩弄了你的 base64 字符串，并将解码后的数据保存为 PNG 文件。图像阅读应用程序告诉我“读取错误”或“无法加载图像”，因此您的 IDAT 可能不好，或者使用了典型图像阅读器不知道的压缩算法。

# vb.net - 如何在 Visual Studio 2010 中嵌套引用 dll？

> ID：13170124
> 
> 赞同：-1
> 
> 时间：2012-11-01T02:28:34.107
> 
> 标签：vb.net, visual-studio-2010, visual-studio

我创建了一个项目**ClassLibrary1**，包含一个方法`Class1.Get1();` 然后创建一个项目**ClassLibrary2**，包含一个方法`Class2.Get2()`，然后引用`ClassLibrary1.dll` 然后创建一个项目**ConsoleApplication1**，并且引用`ClassLibrary2.dll,` 我只能`Class2.Get2()`从ConsoleApplication1.Program调用，但是我怎么能调用`Class1.Get1()`但不引用**ClassLibrary1。 dll** 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:16:33.633

您必须参考`ClassLibrary1`from`ConsoleApplication1`才能在那里使用它。您不能使用`ClassLibrary1`在另一个程序集 ( ) 中引用的程序集 ( `ClassLibrary2`)。

要回答有关在`Class1.Get1()`不引用的情况下调用的问题`ClassLibrary1.dll`，最简单的方法可能就是`Class1.Get1()`在`ClassLibrary2`某处包装一个方法。

# api - Places API 为某些特殊字符返回 REQUEST_DENIED

> ID：13170133
> 
> 赞同：1
> 
> 时间：2012-11-01T02:29:50.367
> 
> 标签：api, hash, character

我们在我们的应用程序中使用 Google Places API ......它正确搜索地址。

但是当地址包含一些特殊字符时，例如“#101”等，它会失败并出现**REQUEST_DENIED 错误**。而在谷歌地图网站上，同样的地址可以正常工作。

我已经验证我的**API key**、**URL**、**Address**、**Sensor 参数**等都是正确的。当我们在查询中添加特殊字符 # 时，相同的查询开始失败。

我也尝试过 javascript 的 encodeURL 函数，但没有任何好处。我也尝试用 # 替换 # 符号，但结果相同。

[示例网址](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=pizza%20highway%20#101&sensor=false&key=My_Key)

请帮忙。

# jquery - 如何在 IE 和 Opera 中修改 SELECT 标签的默认高亮行为？

> ID：13170137
> 
> 赞同：6
> 
> 时间：2012-11-01T02:30:29.587
> 
> 标签：jquery, css, selection, option

这是我的 HTML：

```
<select style="background-color:#e0f0f1">
  <option selected="selected">Select</option>
  <option class="" value="one">One</option>
  <option class="" value="two">Two</option>
</select> 
```

[看到这个代码在行动](http://jsfiddle.net/YgAGX/)

在 IE 和 Opera 中，当您选择一个选项时，它会以蓝色背景突出显示。Firefox、Chrome 和 Safari 不这样做。选择该选项时，有没有办法或技巧来删除蓝色突出显示，以便始终显示原始背景颜色？

如果这是不可能的，有没有办法在选择选项后添加一个 jQuery 行为来模拟页面上其他地方的点击？因此，基本上当您单击远离所选选项时，突出显示会消失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-05T02:17:16.450

在 IE11（不确定以前的版本）中，您可以使用以下命令从焦点选择元素中删除蓝色背景

```
select::-ms-value {background: none;} 
```

[这是一个 dabblet 演示](http://dabblet.com/gist/9986628 "这是一个 dabblet 演示")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T03:55:09.377

我想我找到了解决方案。也许不是一个非常干净的解决方案，但这个技巧很有效。

我已经在 Firefox、Chrome、Safari、Opera 和 IE 9 中对其进行了测试。适用于所有这些，但不适用于旧版本的 IE（6 和 7）。没有在 IE8 中测试过。如果有人可以在 Mac 上测试它并让我知道这是否有效，那就太好了。

我添加了一个宽度和高度为 0 的输入字段，并在单击选项时将焦点转移到它。在输入字段中使用 display:none 和 visibility:hidden 不起作用。因此，您将在角落的某处隐藏输入字段或使用 z-index 将其移动到容器后面也可能有效（但尚未尝试过）。如果有人有更好的解决方案，请告诉我。

HTML：

```
 `<select style="background-color:#e0f0f1">
    <option selected="selected">Select</option>
    <option class="" value="one">One</option>
    <option class="" value="two">Two</option>
  </select>
  <input type="text" id="abc" style="width:0; height:0;" />` 
```

jQuery：

```
$(document).ready(function(){
  $('select option').on('click', function() { $('#abc').focus(); });
}); 
```

[在小提琴中看到这个](http://jsfiddle.net/YgAGX/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T02:38:52.667

这实际上无法完成，因为它是默认浏览器行为。您最好的选择可能是用可以设置样式的类似功能替换选择框，例如[jQuery Chosen](http://harvesthq.github.com/chosen/)插件。

# class - 动态包含和创建所有类对象有缺点吗？

> ID：13170138
> 
> 赞同：0
> 
> 时间：2012-11-01T02:30:32.837
> 
> 标签：class, object, autoload

我有一个包含所有类的文件夹，我想编写一个脚本，其中将包含并创建每个类的对象。我想知道这样做有什么坏处吗？

如果不清楚，请告诉我，我会尝试写更多关于它的内容。

我问的原因是，我的网站有很多数据模型（用于文章、用户等）。我不想每次都手动包含/排除每个类，所以我想编写一个脚本来包含所有课程。

会不会影响性能？

我应该只包含我将在页面上使用的那些类吗？

由于我将自动包含类，因此我正在考虑同时创建它们的对象。

创建对象会影响性能吗？

# ios - 初学者在 ios 中使用 assimp

> ID：13170139
> 
> 赞同：1
> 
> 时间：2012-11-01T02:30:33.303
> 
> 标签：ios, opengl-es

我想在我即将到来的 ios 项目中使用 Assimp，但很难让它工作。我按照以下说明进行操作：

[如何使用 boost-library 为 iOS（设备和模拟器）构建 ASSIMP 库？](https://stackoverflow.com/questions/6691927/how-to-build-assimp-library-for-ios-device-and-simulator-with-boost-library)

但是终端一直告诉我这个：

```
rm: CMakeCache.txt: No such file or directory
/Users/hengchinsoon/Desktop/assimp/port/iOS/build_ios.sh: line 40: cmake: command not found
Building armv6 library
make: *** No rule to make target `clean'.  Stop.
make: *** No rule to make target `assimp'.  Stop.
cp: ./lib/libassimp.a: No such file or directory
rm: CMakeCache.txt: No such file or directory
/Users/hengchinsoon/Desktop/assimp/port/iOS/build_ios.sh: line 51: cmake: command not found
Building armv7 library
make: *** No rule to make target `clean'.  Stop.
make: *** No rule to make target `assimp'.  Stop.
cp: ./lib/libassimp.a: No such file or directory
rm: CMakeCache.txt: No such file or directory
/Users/hengchinsoon/Desktop/assimp/port/iOS/build_ios.sh: line 62: cmake: command not found
Building i386 library
make: *** No rule to make target `clean'.  Stop.
make: *** No rule to make target `assimp'.  Stop.
cp: ./lib/libassimp.a: No such file or directory
rm: ./lib/libassimp.a: No such file or directory 
```

所以我检查了 assimp 根文件夹，发现没有任何 lib 文件夹（来自 github 描述，用于 Windows 使用）。所以我只是制作了 lib 文件夹，然后再试一次。但仍然无法正常工作。

1.  谁能与我分享我做错了哪一部分？谢谢！

2.  说如果我成功安装了我需要安装的任何东西，那么如何真正使用该库？我应该将 lib/ios/ 文件夹复制到我的 ios 项目中吗？

我想做的是导入一些 .blend 文件，然后我可以在着色器和其他很酷的东西上进行试验。

我是体面的 ios 开发人员，对 OpenGL ES 有基本的了解。不知何故，Assimp 文档让我对它的作用感到困惑。我不太确定我是否在核心概念级别或编程级别不了解 Assimp。但我仍然相信它非常灵活和强大。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:32:43.480

我猜你正在使用“buil_ios.sh”脚本，在那个脚本中有一些错误。

您应该首先从以下位置下载 Cmake：[Cmake 下载](http://www.cmake.org/cmake/resources/software.html)

安装 Cmake，然后执行以下操作。

首先，我认为除了该输出之外，您还会收到一些消息，告诉您您在 Cmake 中放置的某些选项没有被使用。那是因为在脚本中某些变量的名称写得不好。

除此之外，您应该更改 CMakeLists.txt 文件，以免在尝试构建库时出现错误：

# 在此处定义所需的参数

set (ASSIMP_SV_REVISION 1023) <-- 应该小于 1024。

set (ASSIMP_VERSION ${ASSIMP_VERSION_MAJOR}) <--在这里你会找到一些像这样的参数。(parameter0).(parameter1)... Mac OS 不喜欢使用这个命名法来命名：parameter0.parameter1.paramter.2.a 我猜这是因为'.'。

因此，经过漫长的一天，我终于设法建立了图书馆。另一种选择是从项目 openframeworks 编译库，路径是这样的：“/addons/ofxAssimpModelLoader/libs/assimp/lib/ios/assimp.a”

[这里有图书馆的链接](https://github.com/openframeworks/openFrameworks/tree/master/addons/ofxAssimpModelLoader/libs/assimp/lib/ios)

在那里你可以找到已经为 arm6 arm7 和 i386 架构编译的库。

我要把修改后的脚本放在这里。

```
#!/bin/sh
# build.sh

#######################
# BUILD ASSIMP for iOS and iOS Simulator
#######################

BUILD_DIR="./lib/ios"

IOS_BASE_SDK="5.0"
IOS_DEPLOY_TGT="3.2"

setenv_all()
{
    # Add internal libs
    export CFLAGS="$CFLAGS"
    export CPP="$DEVROOT/usr/bin/llvm-cpp-4.2"
    export CXX="$DEVROOT/usr/bin/llvm-g++-4.2"
    export CXXCPP="$DEVROOT/usr/bin/llvm-cpp-4.2"
    export CC="$DEVROOT/usr/bin/llvm-gcc-4.2"
    export LD=$DEVROOT/usr/bin/ld
    export AR=$DEVROOT/usr/bin/ar
    export AS=$DEVROOT/usr/bin/as
    export NM=$DEVROOT/usr/bin/nm
    export RANLIB=$DEVROOT/usr/bin/ranlib
    export LDFLAGS="-L$SDKROOT/usr/lib/"

    export CPPFLAGS=$CFLAGS
    export CXXFLAGS=$CFLAGS
}

setenv_arm6()
{
    unset DEVROOT SDKROOT CFLAGS CC LD CPP CXX AR AS NM CXXCPP RANLIB LDFLAGS CPPFLAGS CXXFLAGS
    export DEVROOT=/Developer/Platforms/iPhoneOS.platform/Developer
    export SDKROOT=$DEVROOT/SDKs/iPhoneOS$IOS_BASE_SDK.sdk
    export CFLAGS="-arch armv6 -pipe -no-cpp-precomp -isysroot $SDKROOT -miphoneos-version-min=$IOS_DEPLOY_TGT -I$SDKROOT/usr/include/"
    setenv_all
    rm CMakeCache.txt
    cmake  -G 'Unix Makefiles' -DCMAKE_TOOLCHAIN_FILE=./port/iOS/IPHONEOS_ARM6_TOOLCHAIN.cmake -DENABLE_BOOST_WORKAROUND=ON -DBUILD_STATIC_LIB=ON -DASSIMP_BUILD_STATIC_LIB=ON
}

setenv_arm7()
{
    unset DEVROOT SDKROOT CFLAGS CC LD CPP CXX AR AS NM CXXCPP RANLIB LDFLAGS CPPFLAGS CXXFLAGS
    export DEVROOT=/Developer/Platforms/iPhoneOS.platform/Developer
    export SDKROOT=$DEVROOT/SDKs/iPhoneOS$IOS_BASE_SDK.sdk
    export CFLAGS="-arch armv7 -pipe -no-cpp-precomp -isysroot $SDKROOT -miphoneos-version-min=$IOS_DEPLOY_TGT -I$SDKROOT/usr/include/"
    setenv_all
    rm CMakeCache.txt
    cmake  -G 'Unix Makefiles' -DCMAKE_TOOLCHAIN_FILE=./port/iOS/IPHONEOS_ARM7_TOOLCHAIN.cmake -DENABLE_BOOST_WORKAROUND=ON -DBUILD_STATIC_LIB=ON -DASSIMP_BUILD_STATIC_LIB=ON
}

setenv_i386()
{
    unset DEVROOT SDKROOT CFLAGS CC LD CPP CXX AR AS NM CXXCPP RANLIB LDFLAGS CPPFLAGS CXXFLAGS
    export DEVROOT=/Developer/Platforms/iPhoneSimulator.platform/Developer
    export SDKROOT=$DEVROOT/SDKs/iPhoneSimulator$IOS_BASE_SDK.sdk
    export CFLAGS="-arch i386 -pipe -no-cpp-precomp -isysroot $SDKROOT -miphoneos-version-min=$IOS_DEPLOY_TGT"
    setenv_all
    rm CMakeCache.txt
    cmake  -G 'Unix Makefiles' -DCMAKE_TOOLCHAIN_FILE=./port/iOS/IPHONEOS_i386_TOOLCHAIN.cmake -DENABLE_BOOST_WORKAROUND=ON -DBUILD_STATIC_LIB=ON -DASSIMP_BUILD_STATIC_LIB=ON
}

create_outdir()
{
    for lib_i386 in `find $BUILD_DIR/i386 -name "lib*\.a"`; do
        lib_arm6=`echo $lib_i386 | sed "s/i386/arm6/g"`
        lib_arm7=`echo $lib_i386 | sed "s/i386/arm7/g"`
        lib=`echo $lib_i386 | sed "s/i386\///g"`
        echo 'Creating fat binary...'
        lipo -arch armv6 $lib_arm6 -arch armv7 $lib_arm7 -arch i386 $lib_i386 -create -output $lib
    done
    echo 'Done! You will find the libaries and fat binary library in /lib/ios'
}
cd ../../

rm -rf $BUILD_DIR
mkdir -p $BUILD_DIR/arm6 $BUILD_DIR/arm7 $BUILD_DIR/i386

setenv_arm6
echo 'Building armv6 library'
make clean
make assimp -j 8 -l
cp ./lib/libassimp.a $BUILD_DIR/arm6/

setenv_arm7
echo 'Building armv7 library'
make clean
make assimp -j 8 -l
cp ./lib/libassimp.a $BUILD_DIR/arm7/

setenv_i386
echo 'Building i386 library'
make clean
make assimp -j 8 -l
cp ./lib/libassimp.a $BUILD_DIR/i386/

rm ./lib/libassimp.a

create_outdir 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:07:26.107

我在某处读到，替代方法是使用 openframeworks，因为它已经包含 assimp lib。

[http://www.openframeworks.cc/download/](http://www.openframeworks.cc/download/)

找ios版本。里面有一个包含 example/ios/assimpExample/ 文件夹的文件夹将是一个很好的起点。

玩得开心！:D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:10:19.263

使用最新版本的 Homebrew 在 Mac 上为我提供的 boost root 如下：

```
BOOST_ROOT=~/.homebrew/Cellar/boost/1.53.0 
```

您的 boost 版本可能不同，因此最后一个文件夹会有所不同。但在最近的自制版本中，地窖安装在当前用户的主目录中。

# javascript - 从 javascript 代码调用 c# 事件

> ID：13170143
> 
> 赞同：0
> 
> 时间：2012-11-01T02:31:07.297
> 
> 标签：javascript, asp.net

您能否告诉我是否可以从 ASP.NET Web 应用程序中的 javascript 代码调用 C# 事件或方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:41:49.223

您不能直接执行 C# 事件或方法。您可以通过 AJAX 访问端点。这可以是 ASP.NET MVC 控制器或 .ashx 处理程序。

或者，您可以考虑实现诸如 SignalR 之类的东西，它通过其集线器，允许您从 javascript（以及从服务器、推送通知和类似的东西）做神奇的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:40:43.263

正如我之前指出的：

使用页面方法的示例：[http ://www.singingeels.com/Articles/Using_Page_Methods_in_ASPNET_AJAX.aspx](http://www.singingeels.com/Articles/Using_Page_Methods_in_ASPNET_AJAX.aspx) [http://sappidireddy.wordpress.com/2008/03/31/how-to-call-server-side-function-from-客户端代码-使用-pagemethods-in-aspnet-ajax/](http://sappidireddy.wordpress.com/2008/03/31/how-to-call-server-side-function-from-client-side-code-using-pagemethods-in-aspnet-ajax/)

使用 AJAX 的示例：http: [//www.codeproject.com/Articles/250582/Getting-Started-with-jqChart-HTML5-jQuery-Chart-Pl](http://www.codeproject.com/Articles/250582/Getting-Started-with-jqChart-HTML5-jQuery-Chart-Pl)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:35:22.277

你不能。C# 在服务器端执行，而 javascript 在客户端（浏览器）执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T11:58:50.990

是的，可以`C# Method`从`javascript`使用`ajax`中调用，`asp.net webforms`也可以在中执行此操作`asp.net MVC`

例如这里是`web forms`例子

```
 <script type="text/javascript">
    $(document).ready(function () {

     $.ajax({
         type: "POST",
         url: "Default.aspx/GetData",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (response) {
             alert(response.d);
         },
         failure: function (response) {
             alert(response.d);
         }
     });
 });
</script> 
```

和后面的新代码`c# method`

```
[WebMethod]
public static string GetData()
{
    return "This string is from Code behind";
} 
```

输出看起来像这样 [![在此处输入图像描述](../Images/23329561a2d87beac191f77ac39f654a.png)](https://i.stack.imgur.com/027xg.png) [![在此处输入图像描述](../Images/a0df45bb176fd3a3595f2e7249a6b530.png)](https://i.stack.imgur.com/AeuY2.png)

# objective-c - 将数据从一个视图传输到另一个视图

> ID：13170146
> 
> 赞同：0
> 
> 时间：2012-11-01T02:31:26.400
> 
> 标签：objective-c, ios, xcode, storyboard

我在一个视图控制器中有一个字符串，并试图将它的值转移到另一个视图控制器中的另一个字符串。这是我的代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  if ([segue.identifier isEqualToString:@"Check Mark Segue"])
    {
    NSLog(@"Transferring Data");
   RenewDrop *controller = segue.destinationViewController;;
   controller.transferData = self.renewString;
    }
} 
```

我认为这会起作用，因为它看起来很容易。但是，每当我 NSLog 下一个视图中的 transferData 字符串时，它都会显示它是（null）。

我在这里做错了什么？

编辑：

```
#RenewDrop.h

@interface RenewDrop : UITableViewController <UITableViewDelegate> {

NSString *transferData;
}

 @property (nonatomic, retain) NSString *transferData;

#RenewDrop.m

@implementation AutoRenewDrop
@synthesize transferData; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:16:43.463

好的，这就是发生的事情：我的 viewDidLoad 中有我没有看到的 Renew Drop 代码：

```
//AddReminder *controller = [[AddReminder alloc] init];
//self.transferData = controller.renewString; 
```

一旦我这样做了，一切都像上面一样工作。

感谢大家的帮助！

# php - 如何在 2 个不同的表中添加相同的值

> ID：13170147
> 
> 赞同：0
> 
> 时间：2012-11-01T02:31:27.663
> 
> 标签：php, database, wordpress

> **可能重复：**
> [无法将数据插入到多个 wordpress 表中](https://stackoverflow.com/questions/13169276/unable-to-insert-data-into-multiple-wordpress-tables)

![在此处输入图像描述](../Images/0d4473658a51fcc406346f589d04547a.png)

根据上图，我有 2 个表，每个表有 1 个公共列，但问题是我必须在两列行中添加相同的值。虽然`wp_terms.term_id`在数据库中有自动增量。但我不明白我如何`wp_terms.term_id`在`wp_term_taxonomy.term_id`.

我尝试了一个 sql 查询，我在下面给出：

```
// create a tag
$query = "INSERT INTO $wpdb->terms (name, slug) VALUES (%s, %s)";
$wpdb->query($wpdb->prepare($query, $name, $slug));

// create the relationship 
$query = "INSERT INTO $wpdb->term_taxonomy (term_id, taxonomy) VALUES (%d, %s)";  
$wpdb->query($wpdb->prepare($query, LAST_INSERT_ID, 'post_tag')); 
```

但是当我通过 phpmyadmin 检查数据库时运行此脚本后，我注意到`wp_terms`表格填写正确但`wp_term_taxonomy`>`term_id`列是空的。

**我的实际代码是：**

```
$file_name = $_FILES['tag_import']['name'];
$file_ext = strtolower(end(explode(".", $file_name)));
$file_size = $_FILES['tag_import']['size'];

if (( $file_ext == "xls" ) && ( $file_size < 500000 )) 
{       
    $data = new Spreadsheet_Excel_Reader();
    $data->setOutputEncoding('CP1251');
    $data->read($_FILES['tag_import']['tmp_name']);

    for ($i = 1; $i <= $data->sheets[0]['numRows']; $i++)
    {
        for ($j = 1; $j <= $data->sheets[0]['numCols']; $j++)
        {
            // add the new category 
            $query = "INSERT INTO $wpdb->terms (name, slug) VALUES (%s, %s)";
            $wpdb->query($wpdb->prepare($query, $data->sheets[0]['cells'][$i][1], $data->sheets[0]['cells'][$i][2])); 

            // create the relationship 
            $query = "INSERT INTO $wpdb->term_taxonomy (term_id, taxonomy) VALUES (%d, %s)";  
            $wpdb->query($wpdb->prepare($query, LAST_INSERT_ID, 'post_tag'));           
        }
    }
    else  
    {
        echo "<div class='error'><p>Invalid file or file size too big.</p></div>";
    }
} 
```

请指导我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:39:18.207

我没有做太多的 wordpress，但从[文档](http://codex.wordpress.org/Function_Reference/wpdb_Class#INSERT_rows)看来，最后一个 id 仅`wpdb`在您使用该`insert()`方法时才填写，而不是`query()`像您正在做的那样使用。它不是全局常量，而是类变量。

```
$wpdb->insert('terms', array(
  'name' =>  $data->sheets[0]['cells'][$i][1],
  'slug' => $data->sheets[0]['cells'][$i][2]
));

$wpdb->insert('term_taxonomy', array(
  'term_id' => $wpdb->insert_id,
  'taxonomy' => 'post_tag'
)); 
```

# asp.net - 我可以使用 asp.net 图像从这些图像中制作精灵图像吗 我在主页顶部的一个 asp.net (vb) 网站上有一行 12 个标志，以允许用户选择他们的语言。YSlow 和 Google Speed 等各种速度测试告诉我要精灵这些图像以最小化 http 请求。如果它们是 asp:image 的，并且，有一个悬停图像，我该怎么做？ 现在，我有 12 问问题 问问题 2012-11-01T02:31:33.717 690 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在主页顶部的一个 asp.net (vb) 网站上有一行 12 个标志，以允许用户选择他们的语言。YSlow 和 Google Speed 等各种速度测试告诉我要精灵这些图像以最小化 http 请求。如果它们是 asp:image 的，并且，有一个悬停图像，我该怎么做？ 现在，我有 12 个链接按钮；它们看起来像这样（注意，当您将鼠标悬停在旗帜上时，会在其上方创建悬停图像）： 这是我的图像代码： <asp:linkbutton id="btnSelectEnglish" runat="server" commandargument="en" onclick="RequestLanguageChange_Click" class="flagbutton">![View this website in English](images/flaghoveren.png) </asp:linkbutton> <asp:linkbutton id="btnSelectGerman" runat="server" commandargument="de" onclick="RequestLanguageChange_Click" class="flagbutton"> ![View this website in Deutsch](images/flaghoverde.png) </asp:linkbutton> 等等...... 12个链接按钮。这就像在 asp:Image 标记中放置一个 CssClass 一样简单吗？如果是这样，我该怎么做？或者这是更复杂的事情？ 每个标志为 26 x 15，共有 12 个。是否可以创建这些精灵图像并保留悬停效果？我认为精灵图像必须是 334 像素（24 x 12 + 11 x 2 用于中间的填充）宽 x（我不知道高度是多少）。还是我应该忘记将其拆分并保持原样？感谢任何人都可以提供的任何指导；我知道这可能是一个艰难的！ 为了通过 css sprite sheet 显示它们，您需要去掉链接按钮中的实际图像标签，因为 css sprite sheet 是通过 background-image 属性应用的。 因为看起来每个都有一个“flagbutton”类，你可以指定每个带有类标志按钮的元素都有一个背景图像（你的精灵表）。看起来像这样： .flagbutton { background-image:url(images/myspritesheet.png); width:26px; height:15px; margin-right:2px; display:block; float:left; } 然后，由于每个都有一个唯一的 ID，您可以在您的 css 文件中为每个链接按钮指定一个唯一的背景位置，这将允许您基本上在每个标志的窗口内滑动精灵表以定位它以显示正确的标志。那将是这样的： #btnSelectEnglish { background-position: 0 0; } #btnSelectGerman { background-position: 0 -26px; } 这将在英文框中显示精灵表的第一个 26px x 15px 部分，在德语框中显示精灵表的第二个 26px x 15px 部分。 您不需要在 sprite 表中的标志之间添加间距——因为这将被上面 .flagbutton 定义中的 margin-right 覆盖。如果没有翻转，我认为您的最终精灵表的高度将是 312px (26 x 12) x 15px 高。 如果您想在混合中添加翻转，只需将每个图像的翻转版本放在精灵表中对应的下方。这将使您的精灵表的高度加倍。然后，为每个 ID 添加一个悬停类以覆盖悬停，如下所示： #btnSelectEnglish:hover { background-position: -15px 0; } #btnSelectGerman:hover { background-position: -15px -26px; } 这将使您的精灵向上移动以显示悬停图像。 asp.netcssspritecss-sprites 4 1 回答 1 This answer is useful 2 为了通过 css sprite sheet 显示它们，您需要去掉链接按钮中的实际图像标签，因为 css sprite sheet 是通过 background-image 属性应用的。 因为看起来每个都有一个“flagbutton”类，你可以指定每个带有类标志按钮的元素都有一个背景图像（你的精灵表）。看起来像这样： .flagbutton { background-image:url(images/myspritesheet.png); width:26px; height:15px; margin-right:2px; display:block; float:left; } 然后，由于每个都有一个唯一的 ID，您可以在您的 css 文件中为每个链接按钮指定一个唯一的背景位置，这将允许您基本上在每个标志的窗口内滑动精灵表以定位它以显示正确的标志。那将是这样的： #btnSelectEnglish { background-position: 0 0; } #btnSelectGerman { background-position: 0 -26px; } 这将在英文框中显示精灵表的第一个 26px x 15px 部分，在德语框中显示精灵表的第二个 26px x 15px 部分。 您不需要在 sprite 表中的标志之间添加间距——因为这将被上面 .flagbutton 定义中的 margin-right 覆盖。如果没有翻转，我认为您的最终精灵表的高度将是 312px (26 x 12) x 15px 高。 如果您想在混合中添加翻转，只需将每个图像的翻转版本放在精灵表中对应的下方。这将使您的精灵表的高度加倍。然后，为每个 ID 添加一个悬停类以覆盖悬停，如下所示： #btnSelectEnglish:hover { background-position: -15px 0; } #btnSelectGerman:hover { background-position: -15px -26px; } 这将使您的精灵向上移动以显示悬停图像。 于 2012-11-01T03:03:28.093 回答 Related 1 android - ViewPager 中只有第一张地图显示有多个 SupportMapFragment 3 javascript - Web 应用程序构建，HTML 与 JavaScript 1 get - openssl s_client 在每次请求后失去连接 1 android - 查看单个选项卡时定期更新数据（android） 2 java - 如何使用 ANT 创建 SVN 统计信息？ 2 c# - MVC3 应用程序中的解耦实体框架 4 php - 如何创建函数和调用函数 2 android - 按下后退按钮时Android广播接收器未接收 0 ruby-on-rails - 在导轨中消毒 1 c# - 如何根据某些标准从现有集合中创建新列表 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13170149
> 
> 赞同：1
> 
> 时间：
> 
> 标签：asp.net, css, sprite, css-sprites

我在主页顶部的一个 asp.net (vb) 网站上有一行 12 个标志，以允许用户选择他们的语言。YSlow 和 Google Speed 等各种速度测试告诉我要**精灵这些图像**以**最小化 http 请求**。如果它们是 asp:image 的，并且，有一个悬停图像，我该怎么做？

现在，我有 12 个链接按钮；它们看起来像这样（注意，当您将**鼠标悬停在旗帜上时，会在其上方创建悬停图像**）：

![当您将鼠标悬停在标志上时，会出现弹出图像​​，如下所示：](../Images/20b69328aad55b3db58cc0416ce25218.png)

这是我的图像代码：

```
 <asp:LinkButton ID="btnSelectEnglish" runat="server"
  CommandArgument="en" OnClick="RequestLanguageChange_Click"
  class="flagbutton">      
  <asp:Image ID="Image8" runat="server" ImageUrl="~/images/flagen.png" height="15" 
  width="26"
  tooltip="View this website in English" title="View this website in English"/>
  <img class="map" src="images/flaghoveren.png" height="40" width="120" alt="View this 
  website in English"/>
  </asp:LinkButton>

  <asp:LinkButton ID="btnSelectGerman" runat="server"
  CommandArgument="de" OnClick="RequestLanguageChange_Click"
  class="flagbutton">      
  <asp:Image ID="Image7" runat="server" ImageUrl="~/images/flagde.png" height="15" 
  width="26"
  tooltip="View this website in Deutsch" title="View this website in Deutsch"/>
  <img class="map" src="images/flaghoverde.png" height="40" width="120" alt="View this
  website in Deutsch"/>
  </asp:LinkButton> 
```

等等...... 12个链接按钮。这就像在 asp:Image 标记中放置一个 CssClass 一样简单吗？如果是这样，我该怎么做？或者这是更复杂的事情？

每个标志为 26 x 15，共有 12 个。是否可以创建这些精灵图像并**保留悬停效果**？我认为精灵图像必须是 334 像素（24 x 12 + 11 x 2 用于中间的填充）宽 x（我不知道高度是多少）。还是我应该忘记将其拆分并保持原样？感谢任何人都可以提供的任何指导；我知道这可能是一个艰难的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:03:28.093

为了通过 css sprite sheet 显示它们，您需要去掉链接按钮中的实际图像标签，因为 css sprite sheet 是通过 background-image 属性应用的。

因为看起来每个都有一个“flagbutton”类，你可以指定每个带有类标志按钮的元素都有一个背景图像（你的精灵表）。看起来像这样：

```
.flagbutton {
    background-image:url(images/myspritesheet.png);
    width:26px;
    height:15px;
    margin-right:2px;
    display:block;
    float:left;
} 
```

然后，由于每个都有一个唯一的 ID，您可以在您的 css 文件中为每个链接按钮指定一个唯一的背景位置，这将允许您基本上在每个标志的窗口内滑动精灵表以定位它以显示正确的标志。那将是这样的：

```
#btnSelectEnglish {
    background-position: 0 0;
}

#btnSelectGerman {
    background-position: 0 -26px;
} 
```

这将在英文框中显示精灵表的第一个 26px x 15px 部分，在德语框中显示精灵表的第二个 26px x 15px 部分。

您不需要在 sprite 表中的标志之间添加间距——因为这将被上面 .flagbutton 定义中的 margin-right 覆盖。如果没有翻转，我认为您的最终精灵表的高度将是 312px (26 x 12) x 15px 高。

如果您想在混合中添加翻转，只需将每个图像的翻转版本放在精灵表中对应的下方。这将使您的精灵表的高度加倍。然后，为每个 ID 添加一个悬停类以覆盖悬停，如下所示：

```
#btnSelectEnglish:hover {
    background-position: -15px 0;
}

#btnSelectGerman:hover {
    background-position: -15px -26px;
} 
```

这将使您的精灵向上移动以显示悬停图像。

# ruby-on-rails - 获取关联不为空且关联满足一定条件的模型的所有记录

> ID：13170153
> 
> 赞同：0
> 
> 时间：2012-11-01T02:31:49.490
> 
> 标签：ruby-on-rails, activerecord, arel

我正在使用 Rails 3.1.0

我有两个模型，A 和 B。A has_one B，但 B 可以为空。B 属于 A。B 有一个名为“可见”的布尔字段。

我想获取所有具有非空 B 和“可见”设置为 true 的 B 的 A 记录。

进行此查询的简洁有效的方法是什么？

到目前为止我所做的：

我创建了一个范围，它可以获取带有非空 B 的 A（我认为）。

范围：has_b，包括(:b).where(B.arel_table[:id].not_eq(nil))

有没有办法将可见 == true 条件链接到这个范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:15:46.557

```
A.includes(:bs).where(:bs => { :visible => true }) 
```

扎克·坎普几乎是对的

因此，在范围内：

```
scope as_with_visible_bs includes(:bs)
  .where(B.arel_table[:id].not_eq(nil))
  .where(:bs => { :visible => true }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T02:57:50.837

看看[这里](http://guides.rubyonrails.org/active_record_querying.html)的“加入”部分。这个查询应该做你需要的：

```
A.joins(:bs).where(:bs => { :visible => true }) 
```

# macos - Cocoa webview 文本字段不接受击键

> ID：13170154
> 
> 赞同：2
> 
> 时间：2012-11-01T02:31:51.927
> 
> 标签：macos, cocoa, webview, textfield, keystrokes

我是 OSx 开发的新手。

我有一个使用 Webview 的 Cocoa 应用程序。一切正常，除了 webview 中的文本字段。我知道如何在 NSTextField 中启用击键，但在 Webview 中不知道。我整天都在网上搜索，但没有运气。我非常需要一些关于如何启用击键来实现键盘快捷键的帮助。

例子：

复制 -> 命令 + c

粘贴 -> 命令 + v

剪切->命令+ x

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:10:56.163

我现在得到了答案。我意识到我忘了实施

```
- (BOOL)performKeyEquivalent:(NSEvent *)theEvent 
```

到处理 Webview 的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-11T10:51:47.923

@Kimpoy，感谢您对 performKeyEquivalent 的引用！为了完整起见，我以这种方式实现了它......

从 WebView 子类化您的 webview 并实现该方法：

```
- (BOOL)performKeyEquivalent:(NSEvent *)theEvent {

    NSString * chars = [theEvent characters];
    BOOL status = NO;

    if ([theEvent modifierFlags] & NSCommandKeyMask){

        if ([chars isEqualTo:@"a"]){
            [self selectAll:nil];
            status = YES;
        }

        if ([chars isEqualTo:@"c"]){
            [self copy:nil];
            status = YES;
        }

        if ([chars isEqualTo:@"v"]){
            [self paste:nil];
            status = YES;
        }

        if ([chars isEqualTo:@"x"]){
            [self cut:nil];
            status = YES;
        }
    }

    if (status)
        return YES;

    return [super performKeyEquivalent:theEvent];
} 
```

感谢@aventurella 在这里：[https](https://github.com/Beats-Music/mac-miniplayer/issues/3) ://github.com/Beats-Music/mac-miniplayer/issues/3 。只需稍作修改以将超级响应作为默认值返回，因为它应该向下传播到其子视图。

作为说明，我建议在您的自定义 webview 中实现日志或类似内容，以确保您确实在使用您的课程：

```
- (void)drawRect:(NSRect)dirtyRect {
    [super drawRect:dirtyRect];

    // Drawing code here.

    NSLog(@"Custom webview running...");
} 
```

# ruby-on-rails - sqlite3_native.so: [BUG] 分段错误

> ID：13170156
> 
> 赞同：4
> 
> 时间：2012-11-01T02:32:03.560
> 
> 标签：ruby-on-rails, ruby, sqlite

我遇到了这个 sqlite3 问题，不知道为什么；我浏览了这个论坛好几个小时，找不到类似的问题。我正在使用 ruby​​ 1.9.3，但错误消息似乎调用了 ruby​​ 1.8.7 ；我什至卸载了 ruby​​ 1.8.7 然后 sqlite3 然后重新安装，但这并没有解决问题

我正在运行 rails 3.2.8

```
user1@company.com [~/rails_apps/myapp]# rails -v
Rails 3.2.8 
```

和红宝石 1.9.3

```
user1@company.com [~/rails_apps/myapp]# ruby -v
ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-linux] 
```

卸载红宝石 1.8.7

```
user1@company.com [~/rails_apps/myapp]# rvm uninstall 1.8.7
/home3/user1/.rvm/src/ruby-1.8.7-p371 has already been removed.
/home3/user1/.rvm/rubies/ruby-1.8.7-p371 has already been removed. 
```

已卸载 sqlite3

```
user1@company.com [~/rails_apps/myapp]# gem uninstall sqlit3
INFO:  gem "sqlit3" is not installed
user1@company.com [~/rails_apps/myapp]# gem uninstall sqlite3

You have requested to uninstall the gem:
    sqlite3-1.3.6
i18n-0.6.1 depends on [sqlite3 (>= 0)]
If you remove this gems, one or more dependencies will not be met.
Continue with Uninstall? [Yn]  Y
Successfully uninstalled sqlite3-1.3.6 
```

重新安装 sqlite3

```
user1@company.com [~/rails_apps/myapp]# gem install sqlite3 
Fetching: sqlite3-1.3.6.gem (100%)
Building native extensions.  This could take a while...
Successfully installed sqlite3-1.3.6
1 gem installed
Installing ri documentation for sqlite3-1.3.6...
unable to convert "\xC3" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to US-ASCII for CHANGELOG.rdoc, skipping
Installing RDoc documentation for sqlite3-1.3.6...
unable to convert "\xC3" to UTF-8 in conversion from ASCII-8BIT to UTF-8 to US-ASCII for CHANGELOG.rdoc, skipping 
```

再次出现同样的错误信息

```
user1@company.com [~/rails_apps/myapp]# rails generate scaffold project customer:string 
/home3/user1/ruby/gems/gems/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.so: [BUG] Segmentation fault
ruby 1.8.7 (2012-02-08 MBARI 8/0x6770 on patchlevel 358) [x86_64-linux], MBARI 0x6770, Ruby Enterprise Edition 2012.02

Aborted
user1@company.com [~/rails_apps/myapp]# 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T01:26:26.437

我遇到了完全相同的问题，我在网上找到了这个对我有用的解决方案。

```
gem list | cut -d" " -f1 | xargs gem uninstall -aIx
gem install bundler
bundle install 
```

这将卸载所有 gem，然后安装 bundler，然后为您的项目安装所有 gem。显然，您需要从 rails 项目运行 bundle install 。

这是我找到解决方案的博客[http://www.zlu.me/blog/2012/10/16/segmentation-fault-with-rails-and-json/](http://www.zlu.me/blog/2012/10/16/segmentation-fault-with-rails-and-json/)

# html - 对象的嵌套表单元素名称

> ID：13170157
> 
> 赞同：0
> 
> 时间：2012-11-01T02:32:10.863
> 
> 标签：html, forms, http-post

我有一个页面，我需要提交未知数量的具有这种结构的对象：

```
object
  name
  phone
  hours
    monday
      open
      close
    tuesday
      open
      close
    ...etc 
```

我试图弄清楚如何在我的 html 元素上使用 name 参数来创建这些对象。问题是，它们不一定必须具有所有属性。有些可能有电话号码，有些可能没有....与时间相同。我尝试过的一切都会导致这样的结果

```
Array ( [params] => Array ( [service[name] => Array ( [0] => service5 [1] => service5 ) [service[phone] => Array ( [0] => 1234 [1] => 12345 ) ) ) 
```

有没有办法做到这一点？

更新：我能够想出的唯一方法是找出一种使用这样的索引的方法：

```
params[service][1][name] 
```

每当从页面中添加或删除对象时，我都必须使用 javascript 生成/更新该索引...

有没有办法动态实现这个对象打包？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:40:14.060

使用 javascript，您可以提取所有值并生成[JSON](http://www.json.org)字符串，然后将其发送到服务器并维护您的分层类型数组。

# c# - 如何调用跨线程BindingList 在 C# 中

> ID：13170158
> 
> 赞同：3
> 
> 时间：2012-11-01T02:32:17.443
> 
> 标签：c#, multithreading, bindinglist

需要对当前正在生产的程序进行添加，而我实际上无法进行太多架构更改。

主线程 (T1) -> GUI 元素其他线程 (T2...) -> 计算元素（和外部事件）。

有一个对象类`Foo`在 T2 上运行。Foos 是根据各种外部事件创建的。

我需要将 DataGrid 添加到一个新表单，该表单将简单地显示不同 Foo 对象的属性。

`Foo`工具`INotifyPropertyChanged`

winform`GridForm`有一个`BindingList<Foo> FooList` 对象。GridView 的数据绑定到它。

显然，当我调用`NotifyPropertyChanged`我的时，我正在进行 x-thread 调用`Foo` ，但这不起作用。

我无法`Foo`从主线程生成对象，也无法在 Thread2 上创建表单。

关于如何调用主线程，我在这里摸不着头脑。

我确实有`Foo-Brain`一个引用主窗体的静态类（因此我可以获得 GUI 线程。）。问题是如何将这一切联系在一起。

有任何想法吗？

（我正在考虑复制`Foo`对象并在 GUI 线程上运行它们并包含`FooList`这些对象，但这似乎很笨拙且效率低下）。

谢谢。

PS。希望每个人都对桑迪好。

编辑：示例代码：

```
class Person : INotifyPropertyChanged // this is the object that will be updated from a
     //different thread; It will have the reference to the main form (GUI)
{
    public event PropertyChangedEventHandler PropertyChanged;
    string comments;  
    private Form1 mainForm = null;

    private void NotifyPropertyChanged(string name)
    {
        if (PropertyChanged == null) return;
        PropertyChanged(this, new PropertyChangedEventArgs(name));         
    }

    public Person(string comments, Form1 f) 
    {
        this.mainForm = f;
        this.comments = comments;
    }

    public string Comments 
    {
        get { return comments; }
        set
        {   comments = value;
            NotifyPropertyChanged("Comments");
        }
    }
} 
```

GUI形式的代码：

```
private void Form1_Load(object sender, EventArgs e)
{
    gridControl.DataSource = gridDataList;
}

private void runmethread()
{
    Thread t = new Thread(anotherthread);
    t.Start();
}

private void anotherthread()
{
    gridDataList[0].Comments = "NEW THREAD";
}

private void button1_Click(object sender, EventArgs e)
{
    runmethread();
}

private void button2_Click(object sender, EventArgs e)
{
    gridDataList[0].Comments = "OLD THREAD";
} 
```

显然 button1_click 会导致 x-thread 问题（我要解决的问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:17:30.533

我想这就是你要问的......

将 Foo 中的 INotifyPropertyChanged 实现更改为：

```
public class Foo: INotifyPropertyChanged
{

  public event PropertyChangedEventHandler PropertyChanged;

  private void NotifyPropertyChanged(String propertyName = "")
  {
      if (PropertyChanged != null)
      {
       if (mainForm.InvokeRequired)
       {
           mainForm.Invoke((MethodInvoker) delegate
           {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
           });
        }
        else
        {
           PropertyChanged(this, new PropertyChangedEventArgs(propertyName)); 
        }
      }
  } 
} 
```

这将确保无论何时发生 PropertyChanged 事件（以及在其运行期间的整个持续时间内），它都是 T1 将运行的唯一事件。因此，可以从两个线程中引发 PropertyChanged 没问题。

[相关文章](http://www.codeproject.com/Articles/9190/Understanding-The-COM-Single-Threaded-Apartment-Pa)您可能会觉得有教育意义或令人困惑:) 没有中间立场:)

# css - 为什么我的代码没有在网络浏览器中生成？XML、DTD、CSS

> ID：13170159
> 
> 赞同：0
> 
> 时间：2012-11-01T02:32:18.053
> 
> 标签：css, xml, web, dtd

它开始打印所有内容`29d 18h 46m`，然后停止。我知道为什么。哦

有人能告诉我为什么它会一直打印到那个时候然后停止吗？

```
<?xml version="1.0" encoding="utf-8"?>
<?DOCTYPE phones SYSTEM "http://userpages.umbc.edu/~v16/is448/hw4/hw4_phones.dtd">
<?xml-stylesheet type="text/css" href="http://userpages.umbc.edu/~v16/is448/hw4/hw4_phones.css" ?>

<phones>
    <phone>

        <title>Apple iPhone 4S - 16GB - White (Factory Unlocked) Smartphone</title>
        <gBay_id>Item: 160913150440</gBay_id>
        <user_id>Seller: milehighmobilellc</user_id>
        <category>Type: Smartphone</category>
        <condition>Condition: Used</condition>
        <brand>Brand: Apple</brand>
        <model>Model: iPhone 4s</model>
        <carrier>Carrier: Factory Unlocked</carrier>
        <color>Color: White</color>
        <OS>Operating System: Apple iOS</OS>
        <contract>Contract: Without Contract</contract>
        <style>Form Factor: Bar</style>
        <buying_format>Buy It Now</buying_format>
        <auction>
            <starting_price>N/A</starting_price>
            <duration>N/A</duration>
        </auction>
        <buy_it_now>
            <starting_price>$449.99</starting_price>
            <duration>29d 18h 46m</duration>
        </buy_it_now>
        <description>
            Just when you thought a smartphone couldn’t get any better, it just did — the
            iPhone 4S is sure to change the way you communicate. The Siri technology lets
            you talk to this Apple smartphone as you would talk to a person, turning the
            iPhone 4S into a personal assistant. The powerful dual-core A5 chip ensures that
            this Apple phone gives you a lightning-fast performance and life-like graphics.
            Shoot 1080p HD videos and click crystal-clear snaps with the 8 MP camera of this
            Apple smartphone. To make your life easier, this Apple phone runs on iOS 5 that
            lets you enjoy numerous features and an easy-to-use interface. That’s not all;
            with the iCloud feature of the iPhone 4S, you can stop worrying about managing
            your stuff, because your phone does it for you.
        </description>
        <shipping>
        <cost>$0.00</cost>
        <speed>Expedited Shipping</speed>
        <shipping>
        <payment>PayPal, Bill Me Later</payment>
    </phone>

    <phone>

        <title>HTC Droid Incredible - 8GB - Black (Verizon) Smartphone</title>
        <gBay_id>Item: 251173407738</gBay_id>
        <user_id>Seller: jpfredd710</user_id>
        <category>Type: Smartphone</category>
        <condition>Condition: Used</condition>
        <brand>Brand: HTC</brand>
        <model>Model: Droid Incredible</model>
        <carrier>Carrier: Verizon</carrier>
        <color>Color: Black</color>
        <OS>Operating System: Android 2.3.4</OS>
        <contract>Contract: Without Contract</contract>
        <style>Form Factor: Bar</style>
        <buying_format>Auction</buying_format>
        <auction>
            <starting_price price="$62.01"></starting_price>
            <duration time="50m 30s"></duration>
        </auction>
        <buy_it_now>
            <starting_price price="N/A"></starting_price>
            <duration time="N/A"></duration>
        </buy_it_now>
        <description>
            The HTC Droid Incredible lets you communicate effortlessly through its
            touchscreen interface. This HTC smartphone has a 3.7-inch, 480x800-pixels
            resolution AMOLED display. Shoot pictures and videos using the built-in
            8.0-megapixel camera. This HTC cell phone has a 1 GHz Snapdragon processor,
            and 512 MB RAM running Google’s Android 2.1 or 2.3.4 (Gingerbread) with HTC
            Sense UI. What’s more, this CDMA HTC smartphone is Wi-Fi-ready. This HTC
            mobile phone has 8 GB memory, and supports up to 32 GB microSD memory cards.
            The HTC Droid Incredible has built-in Bluetooth 2.1 with A2DP support, and
            a microUSB 2.0 port.
        </description>
        <shipping>
        <cost>$5.99</cost>
        <speed>Economy Shipping</speed>
        <shipping>
        <payment>PayPal, Bill Me Later</payment>
    </phone>

    <phone>

        <title>HTC 7 Pro - 16GB - Gray (U.S. Cellular) Smartphone</title>
        <gBay_id>Item: 181006815999</gBay_id>
        <user_id>Seller: st4mford</user_id>
        <category>Type: Smartphone</category>
        <condition>Condition: Used</condition>
        <brand>Brand: HTC</brand>
        <model>Model: 7 Pro</model>
        <carrier>Carrier: U.S. Cellular</carrier>
        <color>Color: Black</color>
        <OS>Operating System: Windows Phone 7</OS>
        <contract>Contract: Without Contract</contract>
        <style>Form Factor: Bar</style>
        <buying_format>Auction</buying_format>
        <auction>
            <starting_price price="$79.99"></starting_price>
            <duration time="1h 14m 29s"></duration>
        </auction>
        <buy_it_now>
            <starting_price price="$119.99"></starting_price>
            <duration time="1h 14m 29s"></duration>
        </buy_it_now>
        <description>
            View and edit the office docs on your phone. Quickly and easily cut through
            the clutter to see only the unread, urgent, or flagged messages in your
            Outlook inbox. And use SharePoint, when you need a little bit of help from
            your team to crack the project.The slide and tilt screen on the HTC 7 Pro
            angles perfectly to reveal a dedicated QWERTY keyboard. The keys are raised
            and nicely spaced for fast and comfortable typing. And because the screen
            tilts, the HTC 7 Pro is perfect for watching videos - hands free - when you
            have a brief moment to kick back and relax.
        </description>
        <shipping>
        <cost price="$3.99"></cost>
        <speed type="Economy Shipping"></speed>
        <shipping>
        <payment>PayPal, Bill Me Later</payment>
    </phone> 
```

款式：

```
phones  {   font-family:arial,calibri;  }
title   {   font-size:125%;     font-family:trebuchet ms, arial;    font-style:bold;    }
gBay_id     {   font-size:75%;  color: blue;    }
user_id     {   font-style:bold;    }
buying_format   {   background-color: #D8D8D8;  }
auction     {   background-color: #D8D8D8;  }
buy_it_now  {   background-color: #D8D8D8;  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:00:41.670

好吧，你有一些错误。

*   您没有正确关闭运输标签。他们应该是：

> ```
> <shipping>
>     <cost>$0.00</cost>
>     <speed>Expedited Shipping</speed> 
> </shipping> 
> ```

*   你错过了最后的结束标签：

> ```
> </phones> 
> ```

*   我发现 chrome 可以提供非常有用的错误消息来帮助修复 xml 错误。例如，在我修复结束标记之前`</phones>`，chrome 中的错误消息显示：

> ```
> This page contains the following errors:
> 
> error on line 129 at column 10: Extra content at the end of the document
> Below is a rendering of the page up to the first error. 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:51:43.777

除了 manishie 已经提到的格式正确错误之外，您还需要更正格式错误的文档类型声明：对于

```
<?DOCTYPE ... > 
```

读

```
<!DOCTYPE ... > 
```

当我修复该错误以及 WF 错误时，页面显示正常，并且 CSS 样式似乎可以按预期使用。

使用错误的 DOCTYPE 声明，解析器会识别——从而吞下您的 xml-stylesheet 指令。不过，我不知道您为什么看到文档的第一部分而不是整个文档。

# c# - C#使用后删除文件

> ID：13170167
> 
> 赞同：2
> 
> 时间：2012-11-01T02:33:22.910
> 
> 标签：c#

我试图在对其进行一些工作后删除 C# 中的文件，但它不像另一个进程正在使用该文件那样给出错误，我该怎么做任何人都知道的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T02:38:20.310

确保在完成处理后关闭文件。如果另一个进程打开了它，则跟踪句柄以查看发生了什么（进程资源管理器对此很有用）。

如果您将打开的文件包装在`using`语句中，则会在块的末尾发生这种情况。否则，请确保`Dispose()`在再次打开之前调用流。

```
using(var fs = File.Open(path))
using(var reader = new StreamReader(fs))
{
    // do stuff with the file
}   // Dispose() is called here which closes the file as well

try
{
    // should work now
    File.Delete(path);
}
catch(SomeException ex)
{
    // just in case, do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:46:35.477

我正在使用类似的代码

```
 DirectoryInfo DI = new DirectoryInfo(@"D:\TimeQImages\");
        if (DI.Exists)
        {
            progressBar1.Value = 0;
            FileInfo[] fi = DI.GetFiles();
            int size = fi.Length;
            if (size < 100)
            {
                size = 100 / size;
            }
            else
            {
                size = (int)(size / 100);
            }
            foreach (FileInfo f in fi)
            {
                progressBar1.Value += size;
                ConvertToChunks(f.FullName);                     
                f.Delete();
            }
            MessageBox.Show("Transfer completed");
        } 
```

在这里，我没有在文件信息上获得任何处置功能

# expressionengine - 将 ExpressionEngine 成员与 MailChimp 集成的最佳方式是什么？

> ID：13170168
> 
> 赞同：7
> 
> 时间：2012-11-01T02:33:39.697
> 
> 标签：expressionengine, subscription, newsletter, mailchimp

我正在开发一个使用[FreeMember](http://github.com/expressodev/freemember)来处理用户注册、登录和个人资料更新的网站。我们希望为用户提供一种在创建帐户时注册时事通讯的方式，以及通过更新他们的 EE 个人资料来（取消）订阅的选项。

是否有处理此功能的附加组件？我尝试设置[MailChimp 订阅](http://devot-ee.com/add-ons/sl-mailchimp-subscribe)，但它不允许使用 FreeMember 更新订阅。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T09:27:26.343

看看 Devot-ee [http://devot-ee.com/search/results?keywords=mailchimp&collection=addons&addon_version_support=ee2](http://devot-ee.com/search/results?keywords=mailchimp&collection=addons&addon_version_support=ee2)列出了几个选项。

Stephen Lewis 最近开源了他的附加组件，因此他的 mailchimp 附加组件可以在 github 上找到[https://github.com/experience/mailchimp_subscribe.ee_addon](https://github.com/experience/mailchimp_subscribe.ee_addon)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:51:14.447

看看我们最新的附加 Postmaster。它比 MC 集成做得更多。它专注于为所有电子邮件服务提供 1 个附加组件。您只需创建新的频道条目即可创建电子邮件营销活动。您可以创建任意数量的模板和变体，以实现真正复杂和动态的交互。它适用于 Safecracker 和常规发布条目。

但是直接对 MC 集成来说，它也有独立的订阅标签（​​标签和独立的形式）。您可以获得任何订阅者列表，甚至可以使用标签和独立表单取消订阅。所有这些集成都适用于具有相同标签（相同语法）的 MC 和 CampaignMonitor。

[https://objectivehtml.com/articles/postmaster-the-definitive-email-solution-for-expressionengine](https://objectivehtml.com/articles/postmaster-the-definitive-email-solution-for-expressionengine)

下一个版本 (v1.2) 已完成，目前处于测试阶段，其中包括对 CartThrob 和任何其他 EE 钩子的支持。例如，您现在可以使用 Mandrill 或 SendGrid 发送所有系统电子邮件。我们有很多客户抱怨他们的收据（使用 CartThrob 从 EE 发送）进入垃圾邮件或从未收到。我们通过 Postmaster 解决了这个问题，方法是将这些电子邮件重定向到适当的服务（在我们的例子中是 SendGrid），该服务具有可靠的交付系统，具有报告和分析功能。您甚至可以在特定成员组登录网站时执行诸如发送电子邮件之类的操作。

我们采用了与所有其他附加组件完全不同的方法，并试图提供一个更加抽象的实用程序，能够解决许多复杂的问题。我很乐意直接回答任何具体问题（只需使用我网站上的联系表）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T04:38:10.927

Robon Sobral 有一个[FreeMember](https://github.com/robsonsobral/freemember)的分支，当用户更新他们的个人资料时，它增加了对更新订阅的支持。这个补丁解决了我的问题。

# jquery - Ajax 延迟使用 Prototype js

> ID：13170178
> 
> 赞同：1
> 
> 时间：2012-11-01T02:35:33.667
> 
> 标签：jquery, ajax, prototypejs

原型 js 中是否有类似于 jQuery 的 ajax 延迟概念？ [http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:38:04.833

您可以使用普通的[Ajax 回调](http://api.prototypejs.org/ajax/Ajax/Request/)获得相同的结果- 或者，如果您想附加更大范围的事件，请查看[Ajax.Responders 文档](http://api.prototypejs.org/ajax/Ajax/Responders/)

# android - 支持多种屏幕尺寸的文本

> ID：13170179
> 
> 赞同：1
> 
> 时间：2012-11-01T02:35:42.323
> 
> 标签：android, android-layout, dynamic, android-emulator

我研究了许多相关主题，但主题主要围绕图像。我已经理解这一点：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)但我并没有真正理解动态调整字体大小的想法。

对于图像没有问题，我使用了 ldpi、mdpi、hdpi 和 xhdpi。但是对于字体，我不知道如何调整它们的大小。任何人？

我的代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:id="@+id/layoutHeader"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/headerimage"
android:orientation="horizontal">

<TextView
    android:id="@+id/headerTitle"
    android:layout_width ="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:textColor="#FFF"
    android:textSize="28dp"
android:textStyle="bold"
    android:text="Some Random Banner Title"
    style="@style/headerTextStyle"
 />

<ImageButton
    android:id="@+id/btnPlus"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="5dp"
    android:layout_marginTop="6dp"
    android:background="#0000"
    android:scaleType="centerCrop"
    android:src="@drawable/plus" />

<ImageButton
    android:id="@+id/btnInfo"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="6dp"
    android:background="#0000"
    android:scaleType="centerCrop"
    android:src="@drawable/info" />

<ImageButton
    android:id="@+id/btnGuide"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@+id/btnPlus"
    android:background="#0000"
    android:scaleType="centerCrop"
    android:src="@drawable/guide" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:42:08.830

我会将文本大小放在样式资源中，然后将备用样式资源文件用于屏幕大小..

因此您将拥有 res/values-large/style.xml、res/values-small/style.xml 等。这些样式中的每一个都将包含具有不同 dp 值的文本大小的项目。请记住，hdpi、mdpi、ldpi 等与像素密度有关，而不是与屏幕尺寸有关。

例如，如果在 res/values/style.xml 你有：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="headerTextStyle" >
    <item name="android:textSize">28dp</item>
   ...
</style>
</resources> 
```

在另一个资源文件中，假设对于大屏幕 (res/values-large/style.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="headerTextStyle" >
    <item name="android:textSize">46dp</item>
   ...
</style>
</resources> 
```

然后当然将此样式应用于元素，系统将根据设备的屏幕尺寸选择正确的样式。您可以在同一个文件中提供多种样式，一种用于标题文本，一种用于常规文本 - 无论不同类型的您需要的文本，类似于 CSS。

或者，您可以在类似限定的资源目录中复制您的布局文件，例如 res/layout-large/layout.xml、res/layout-small/layout.xml，并在每个目录中使用不同的文本大小，但这会不必要地复制更多 xml .

# iphone - 为什么 GameCenter 没有等待足够长的时间来填满所有玩家位置？

> ID：13170182
> 
> 赞同：0
> 
> 时间：2012-11-01T02:36:00.457
> 
> 标签：iphone, objective-c, ipad, cocos2d-iphone, multiplayer

所以我第一次使用多人游戏，我对整个 minplayer/maxplayer 选项感到困惑。当我设置 minplayer=2 和 maxplayer=4 并测试代码时，它可以很好地连接 2 个玩家，但无需等待玩家 3-4 就直接跳转到游戏场景中。在所有插槽都被填满之前，如何防止代码进入主游戏场景？如果我设置 minPlayers=maxPlayers，代码可以正常工作。我知道 match.expectedPlayerCount==0 应该在满足 minPlayers 后触发，但它根本不会等待其他玩家加入。我在这里想念什么？

```
GKMatchRequest * matchRequest = [[[GKMatchRequest alloc] init] autorelease];
matchRequest.minPlayers = 2;
matchRequest.maxPlayers = 4;

gameCenterManager.matchController = [[GKMatchmakerViewController alloc] initWithMatchRequest:matchRequest];
gameCenterManager.matchController.matchmakerDelegate = self;

AppDelegate * delegate = (AppDelegate *) [UIApplication sharedApplication].delegate;
[delegate.viewController presentViewController:gameCenterManager.matchController animated:YES completion:nil]; 
```

查找匹配代码

```
-(void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)match
{
    TXGameCenterManager *gameCenterManager = [TXGameCenterManager sharedTXGameCenterManager];
    gameCenterManager.multiplayerMatch = match;
    // The delegate of the match is HelloWorldLayer
    gameCenterManager.multiplayerMatch.delegate = self;
    AppDelegate * delegate = (AppDelegate *) [UIApplication sharedApplication].delegate;                
    [delegate.viewController dismissModalViewControllerAnimated:NO];

    if( match.expectedPlayerCount==0 )
    {
        // Launching the game without waiting for connection change messages
        NSLog(@"Begin game without waiting for match connection change messages");
        // Determine the host, local or remote
        NSArray * playerIds = match.playerIDs;
        NSLog(@"Number of players: %d", [playerIds count]);
        NSLog(@"ID of player: %@", [playerIds lastObject]);
        NSLog(@"I got the player ids");
        [GKPlayer loadPlayersForIdentifiers:playerIds withCompletionHandler:^(NSArray *players, NSError * error)
         {

//bunch of code that gets player aliases and set host player

//start match
[self schedule: @selector(StartMultiplayerGame) interval:5.];
} 
```

更改状态代码

```
-(void)match:(GKMatch *)match player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state
{

    NSArray * playerIds = [NSArray arrayWithObject:playerID];

    switch (state)
    {
    case GKPlayerStateConnected:
        // handle a new player connection.
        NSLog(@"Player connected!");

    [GKPlayer loadPlayersForIdentifiers:playerIds withCompletionHandler:^(NSArray *players, NSError * error)
     {
         //bunch of code that gets player aliases and set host player

            if (match.expectedPlayerCount==0)
            {
//start match
            [self schedule: @selector(StartMultiplayerGame) interval:5.];
            }

}];

    break;
case GKPlayerStateDisconnected:
    // a player just disconnected.
    NSLog(@"Player disconnected!");
    break;

}

-(void)StartMultiplayerGame
{

  [[CCDirector sharedDirector] replaceScene:[HelloWorldLayer node]];   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:31:36.580

```
 if (match.expectedPlayerCount==0)
 {
      //start match
      [self schedule: @selector(StartMultiplayerGame) interval:5.];
 } 
```

您自己说过，如果 minPlayers 玩家已加入（在您的情况下为 2），那么 expectedPlayerCount 为 0。因此，一旦有 2 名玩家加入，您就开始了游戏。这不是游戏中心的错。

一旦 expectedPlayerCount 为 0，您可以等待更长的时间以允许其他玩家加入。

您的代码也不考虑第二个玩家可能会加入，然后再次离开。因此，在这种情况下，您将仅由一名玩家开始游戏。

# ruby-on-rails - has_many 通过与现有对象/ActiveRecord 关联

> ID：13170183
> 
> 赞同：0
> 
> 时间：2012-11-01T02:36:09.863
> 
> 标签：ruby-on-rails, activerecord, associations, has-many-through

给定模型

```
class Composition < ActiveRecord::Base
  attr_accessible :content

  has_many :compositions_tags
  has_many :tags, :through => :compositions_tags

end

class Tag < ActiveRecord::Base
  attr_accessible :text

  has_many :compositions_tags
  has_many :compositions, :through => :compositions_tags

  validates_uniqueness_of :tag, only: [:create, :update], message: "already taken"
end

class CompositionsTag < ActiveRecord::Base
  belongs_to :composition
  belongs_to :tag
end 
```

现在，例如我做

```
Composition.create(content: "Hello").tags.create(text: "#hi") 
```

结果将是一个内容为“Hello”的组合和一个带有文本“#hi”的标签已创建。

然后我再次创建一个组合。

```
Composition.create(content: "Goodmorning") 
```

现在我不知道并且想要做的是将其与带有文本“#hi”的现有标签相关联。

我该如何以最优雅的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:00:15.130

如果您对创建记录的顺序很灵活，则可以创建标签，然后在一行中创建两个组合：

```
Tag.create(text: "#hi").compositions.create([{content: "Goodmorning"},{content: "Hello"}]) 
```

# c++ - 编译器添加的优化导致“最终”方法的不同行为

> ID：13170189
> 
> 赞同：2
> 
> 时间：2012-11-01T02:38:10.383
> 
> 标签：c++, optimization, c++11, final

```
struct B { 
  virtual void foo ()
  { cout << "B::foo()\n"; }
};

struct D : B { 
  void foo () //final
  { cout << "D::foo()\n"; }
};

int main ()
{
  B *pB = new B;
  D *pD = static_cast<D*>(pB);
  pB->foo();
  pD->foo();
} 
```

输出预期行为：

```
B::foo()
B::foo() 
```

如果我们进行`D::foo()`决赛，那么输出会非常不同：

```
B::foo()
D::foo() 
```

这意味着`virtual`当使用声明为`final`.
这也意味着，这`final`不仅是编译时检查，而且还有助于运行时行为。

它是所有编译器的标准行为吗？我已经用 g++4.7 进行了测试。

**编辑**：产生了一个澄清
的[新问题](https://stackoverflow.com/questions/13190743/compiler-added-optimization-causes-different-behavior-for-final-methods)。结束这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T02:47:11.397

```
D *pD = static_cast<D*>(pB); 
```

有了这个声明，你就放弃了拥有理智的程序行为的权利。如果给定的内容实际上不是类型或的派生类之一（它不是），则C++*不需要*此操作。`static_cast``D``D`

所以阻碍你的不是优化，而是糟糕的代码。

存在是有原因的`dynamic_cast`；一个适当的`dynamic_cast`人很快就会在这方面失败，返回`nullptr`非法演员。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T02:48:30.790

您正在进入未定义行为的领域，因为您通过指针/引用访问对象，该类型不是对象的实际类型。

`3.10 [basic.lval] p10`

> 如果程序尝试通过非下列类型之一的泛左值访问对象的存储值，则行为未定义：
> 
> *   对象的动态类型
> *   [...]

的动态类型显然`pB`是`Base*`，但动态类型*仍然*`pD`是。 *`Base*`*

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T02:43:50.227

您在这里调用未定义的行为。您不能随意向下转换指针。*

# javascript - ECMA-5 是否存在新的 typeof 运算符（或函数）？

> ID：13170191
> 
> 赞同：1
> 
> 时间：2012-11-01T02:38:38.303
> 
> 标签：javascript, ecmascript-5

我认为 JavaScript 有 5 种原始类型（null、undefined、boolean、number、string），然后是对象（包括数组、函数和自定义的伪类对象）。但有点奇怪的是

```
typeof null 
```

是`"object"`，并且没有简单的方法来获取伪经典类的对象类名称，例如`Person`, `Author`。我想知道是否有更新的运算符或函数可以返回原始类型（和`"null"`for `null`， not `"object"`）的小写名称，以及自定义伪经典对象的大写？

如果 ECMA-5 或更高版本中不存在这样的运算符或函数，那么拥有它是否有意义？否则，我们可能需要依赖我们自己的定义或任何框架，但这不是跨平台的标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:23:53.867

ECMAScript 5 对象有一个称为`[[Class]]`. 这是 ES5 中最接近您所要求的内容。您可以通过`[[Class]]`以下方式访问`Object.prototype.toString`：

```
function getClassOf(obj) {
    return Object.prototype.toString.call(obj).slice(8, -1);
}

getClassOf([ ]); // => "Array"
getClassOf(new Date()); // => "Date"
getClassOf(function() { }); // => "Function"
getClassOf(3); // => "Number"
getClassOf(true) // => "Boolean"
getClassOf(document.createElement('div')); // => "HTMLDivElement"
getClassOf(Math); // => "Math"
getClassOf(null); // => "Null"
getClassOf(undefined); // => "Undefined"
getClassOf({ x: 1 }); // => "Object" 
```

这种行为对于充分识别来自其​​他帧的对象至关重要。

但是，它不适用于用户定义的构造函数。使用用户定义的构造函数创建的对象具有`[[Class]]` `"Object"`.

```
function Foo() { }
var foo = new Foo();

getClassOf(foo); // => "Object" 
```

看起来 ECMAScript 6 可能有能力扩展返回的内容`Object.prototype.toString`，因此`getClassOf(foo)`可以`"Foo"`通过`@@toStringTag`符号。

有关即将发布的标准的更多信息，请参阅[https://mail.mozilla.org/pipermail/es-discuss/2012-September/025344.html](https://mail.mozilla.org/pipermail/es-discuss/2012-September/025344.html)。

* * *

您可以创建自己的函数来执行您想要的操作，如下所示：

```
function getTypeOf(value) {

    // Return "null" for null.
    if (value === null) return 'null';

    // Return primitive types.
    var type = typeof value;
    if (type != 'object') return type;

    // Return [[Class]] if available for objects.
    type = Object.prototype.toString.call(value).slice(8, -1);
    if (type != 'Object') return type;

    // Return "Object" if it wasn't created with another constructor.
    var proto = Object.getPrototypeOf(value);
    if (proto == Object.prototype)
        return 'Object';

    // Return the constructor name if constructor hasn't been
    // modified on the object.
    if (value.constructor && proto === value.constructor.prototype)
        return value.constructor.name;

    // Return the constructor name if constructor hasn't been
    // modified on the prototype.
    if (proto.constructor && proto === proto.constructor.prototype)
        return proto.constructor.name;

    // Return "???" if the type is indeterminable.
    return '???';

} 
```

例子：

```
getTypeOf([ ]); // => "Array"
getTypeOf(new Date()); // => "Date"
getTypeOf(function() { }); // => "Function"
getTypeOf(3); // => "number"
getTypeOf(true) // => "boolean"
getTypeOf(document.createElement('div')); // => "HTMLDivElement"
getTypeOf(Math); // => "Math"
getTypeOf(null); // => "null"
getTypeOf(undefined); // => "undefined"
getTypeOf({ x: 1 }); // => "Object"

function Foo() { }
var foo = new Foo();

getTypeOf(foo); // => "Foo"

// If the constructor property is changed, still works.
foo.constructor = function FakeConstructor() { };
getTypeOf(foo); // => "Foo"

// If the constructor property AND the prototype's constructor is
// changed, result is "???".
foo.constructor = function FakeConstructor() { };
Foo.prototype.constructor = function FakeConstructor2() { };
getTypeOf(foo); // => "???" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:32:16.510

该行为`typeof`由规范，[第 11.4.3 节](http://es5.github.com/#x11.4.3)，表 20 规定：

> **表 20 — typeof 运算符结果**

```
Type of val                      Result
-----------------------------------------------------------------------------------
Undefined                        "undefined"
-----------------------------------------------------------------------------------
Null                             "object"
-----------------------------------------------------------------------------------
Boolean                          "boolean"
-----------------------------------------------------------------------------------
Number                           "number"
-----------------------------------------------------------------------------------
String                           "string"
-----------------------------------------------------------------------------------
Object (native and does not 
implement [[Call]])              "object"
-----------------------------------------------------------------------------------
Object (native or host 
and does implement [[Call]])     "function"
-----------------------------------------------------------------------------------
Object (host and does not        Implementation-defined except may not be 
implement [[Call]])              "undefined", "boolean",  "number", or "string". 
```

（Capitalized`Null`是一种内部类型，其唯一值是`null`。）

这似乎只是一个约定；`null instanceof Object`is `false`，所以，正如所料，`null`显然不是一个对象。

您要求的操作员不存在。要找出名称，您可以使用`=== null`来测试`null`和`typeof`其他原语。至于“自定义伪经典对象”，您可以使用的工具有：

*   [`instanceof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)
*   `function.`[`prototype`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/prototype), `prototype`.[`isPrototypeOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/isPrototypeOf)
*   `object.`[`constructor`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/constructor)

[（从this question](https://stackoverflow.com/questions/1249531/how-to-get-a-javascript-objects-class)列出，您可以在其中看到一些示例。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T02:41:16.943

您现在可以在所有浏览器中执行此操作。

任何对象的`constructor`属性都将返回拥有该对象原型的函数。

```
function Person() { }
alert(new Person().constructor === Person) //true 
```

# c# - 将像素着色器应用于图像

> ID：13170197
> 
> 赞同：6
> 
> 时间：2012-11-01T02:39:32.467
> 
> 标签：c#, xaml, windows-phone-8, hlsl

我想对 c#/xaml 中的图像应用着色器效果。

我找到了这个例子：

[http://msdn.microsoft.com/en-us/library/system.windows.media.effects.shadereffect(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.shadereffect(v=vs.95).aspx)

这使得将像素着色器应用于图像非常简单。不幸的是，我不能用 Windows 8 手机 SDK 做同样的事情。

我能做这么简单的事吗？如果可能，我想避免使用 DirectX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T00:05:24.300

检查以下链接：

[创建使用 HLSL 滤镜效果的镜头应用程序](http://developer.nokia.com/Community/Wiki/Creating_a_Lens_application_that_uses_HLSL_effects_for_filters)

此解决方案使用 SharpDX api（C# DirectX 包装器）。

我最近测试过，它在模拟器下运行良好。

不幸的是，我在游戏类之外申请时没有得到相同的结果。我已经在这里发布了一个问题，但还没有回复。:-(

祝你好运！

此致，

彼得·沃洛申

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:13:55.370

不幸的是，您无法在 Windows Phone 7 或 8 中制作自定义 ShaderEffects。另请参阅：[WP7 - WPF/Silverlight 的 HLSL 效果](https://stackoverflow.com/questions/9164812/wp7-hlsl-effects-from-wpf-silverlight)

此外，XNA 似乎是不可行的： [Windows Phone 自定义着色器错误？](https://stackoverflow.com/questions/7907777/windows-phone-custom-shaders-error) 我认为 XNA 也没有从 WP7 到 WP8 的任何功能添加。

您也许可以在 Direct3D 中完成您需要的工作：( [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714072(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714072(v=vs.105).aspx) )

祝你好运！

# cloud-foundry - Cloud Foundry 中的 Java Web App 部署问题

> ID：13170213
> 
> 赞同：0
> 
> 时间：2012-11-01T02:41:10.817
> 
> 标签：cloud-foundry

我在部署 JavaWeb 应用程序时仍然遇到问题。然而，这里有一个有趣的花絮。我能够在 MCF 中部署应用程序。但是尝试通过 URL 访问应用程序失败。我以 vcap 的身份 ssh 到该框，并查看了所有进程。而且tomcat进程确实在运行。然后我发现了MCF盒子的本地IP。我也 ps & greped 启动（我相信这是用来启动 tomcat 的命令）。并且有一个带有端口（-p 49922）的此类进程。然后我去我的机器上打开了 safari，可以在端口上连接，然后看，应用程序确实在运行。

这与我在 cloudfoundry.com 和 MCF 上看到的行为相同。但是在 CloudFoundry 上我不能 SSh，所以我无法知道这是怎么回事。我可以附加推送日志 (-t) 。它在 vmc 应用程序上显示了这一点

```
+-------------+----+--------+---------------------------------+----------+
| Application | #  | Health | URLS                            | Services |
+-------------+----+--------+---------------------------------+----------+
| delements   | 1  | 0%     | delements.xxxxx.cloudfoundry.me | cfdb     |
+-------------+----+--------+---------------------------------+----------+ 
```

但我知道它正在运行，只是无法访问。有没有其他人看到过这种行为。这是怎么回事。

谢谢阿图尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T06:37:15.657

从 CF 支持票中的讨论中，请尽量不要设置数据源连接属性，让 CF 自动重新配置数据源 bean。详细文档请访问：[http ://docs.cloudfoundry.com/frameworks/java/spring/spring.html](http://docs.cloudfoundry.com/frameworks/java/spring/spring.html)

# c - 计算 2^n 的高精度程序

> ID：13170216
> 
> 赞同：5
> 
> 时间：2012-11-01T02:41:24.447
> 
> 标签：c, algorithm, bignum

我正在用 C 语言构建一个程序，它可以获得`2`. 用户输入 的值`n`，程序计算`2^n`。

这是[代码](http://pastebin.com/LWmzFEhz)。

当我输入问题时`100`

我得到了什么：

```
1,267,650,600,228,229,400,000,000,000,000 
```

我应该得到什么

```
1,267,650,600,228,229,401,496,703,205,376 
```

它必须完全用 ANSI C 编码。关于如何提高精度的任何想法？的最大值`N`必须是`256`（我想是 256 位，这意味着最大输出应该是`2^256`）。

我在这里缺乏的是精确性，我不知道如何解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T03:13:00.360

我认为如果你从一开始就在 10 号基地工作是最简单的。这是因为虽然以二进制计算 2 的幂是微不足道的，但转换回以 10 为基数要困难得多。

^(如果您有一个以 10 为底的数字1)的数组，则只需使用进位实现以 10 为底的加法即可乘以 2（通过将数字添加到自身）。循环执行这些`n`时间，您就会得到答案。

如果您希望支持更高的指数，您还可以考虑通过平方来实现求幂，但这更难，因为您需要一般乘法，而不仅仅是乘以 2。

[¹提示：如果您以相反的顺序存储数字会更方便。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T03:42:34.063

这是我对[hammar方法的快速而肮脏的实施。](https://stackoverflow.com/a/13170432/855026)，将十进制数存储为 C 字符串，其中的数字以相反的顺序排列。

[在ideone上运行代码](http://ideone.com/dh7QbM)

```
void doubleDecimal(char * decimal)
{
    char buffer[256] = "";
    char c;
    unsigned char d, carry = 0;
    int i = 0;

    while (c = decimal[i])
    {
        d = 2 * (c - '0') + carry;
        buffer[i] = (d % 10) + '0';
        carry = d / 10;
        i++;
    }

    if (carry > 0)
        buffer[i++] = (carry % 10) + '0';

    buffer[i] = '\0';
    strncpy(decimal, buffer, 256);
}

void reverse(char * str)
{
    int i = 0;
    int j = strlen(str) - 1;

    while (j > i)
    {
        char tmp = str[i];
        str[i] = str[j];
        str[j] = tmp;

        i++;
        j--;
    }
}

int main(void)
{
    char decimal[256] = "1";
    int i;

    for (i = 0; i < 100; i++)
        doubleDecimal(decimal);

    reverse(decimal);
    printf("%s", decimal);

    return 0;
} 
```

输出：

```
1267650600228229401496703205376 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:49:49.540

double 是（可能）64位值。您不能将 256 位精度存储在 64 位中。你得到一个接近的数字的原因是因为浮点数以不同的精度存储——不是所有的连续数字都可以表示，但你可以表示非常大的数字。在这种情况下非常没用。您想要的是使用任意精度库，或者由于这可能是家庭作业，您应该编写自己的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T03:11:14.923

`double`使用 64 位 IEEE 754的典型具有大约 51 位精度 IIRC。

最有可能支持高达 256 的指数的目的是超过该精度，以及 a `long double`or的精度`long long`，因此您必须自己做事。

那么，作为家庭作业，

*   将十进制数字值存储在数组中 + 数字计数
*   实现此类数组中的值加倍 + 计数
*   以 1 和 double 值开始适当的次数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T03:02:34.280

您需要考虑一些事情来解决这个问题：

1.  您只处理整数，因此您应该使用整数表示（您需要自己滚动，因为您不能使用“仅”64 位长的 long long）。
2.  你说的 2 的幂 - 多么方便 - 计算机使用 2 的幂存储数字（你只需要使用移位操作和位摆弄......不需要乘法）。
3.  如何将基数为 2 的数字转换为基数为 10 的数字以进行显示（考虑除法并一次输出一个数字（考虑硬件除数的作用以使位操作正确）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T03:06:58.173

您不能将 256 位精度存储在 64 位中。您要关闭数字的原因是因为浮点数以不同的精度存储。可以表示所有连续的数字，但可以表示非常大的数字。在这种情况下非常没用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T03:38:25.233

```
#include <conio.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

//constants
#define MAX_DIGITS 1000

//big integer number struct
struct bigint {
  char Digits[MAX_DIGITS];
};

//assign a value
void assign(struct bigint* Number,int Value) {
  if (Value!=1) {
    printf("Can not assign value other than 1\n");
    exit(0);
  }
  memset(Number,0,sizeof(bigint));
  Number->Digits[0] = Value;
}

//multiply the big integer number with value
void multiply(struct bigint* Number,int Value) {
  int Digit,New_Digit;
  int Carry = 0;

  for (int Index=0; Index<MAX_DIGITS; Index++) {
    Digit     = Number->Digits[Index];
    New_Digit = Digit*Value%10;
    if (New_Digit+Carry<10) {
      New_Digit = New_Digit+Carry;
      Carry     = Digit*Value/10;
    }
    else {
      New_Digit = (New_Digit+Carry)%10;
      Carry     = (Digit*Value/10)+1;
    }

    //set the new digit
    Number->Digits[Index] = New_Digit;
  }//for loop
}

//print out the value of big integer type
void print(struct bigint* Number) {
  int Index = MAX_DIGITS-1;
  while (Number->Digits[Index]==0 && Index>=0)
    Index--;

  //the big integer value is zero
  if (Index==-1) {
    printf("0");
    return;
  }

  while (Index>=0) {
    printf("%u",Number->Digits[Index]);
    Index--;
  }
}

//main programme entry point
int main(int Argc,char** Args) {
  int Power = 100;
  struct bigint Number;

  //assign the initial value
  assign(&Number,1);

  //do the multiplication
  for (int Index=0; Index<Power; Index++)
    multiply(&Number,2);

  //print result
  print(&Number);
  getch();
}

//END-OF-FILE 
```

# objective-c - 对绑定在一起的 NSTextField 使用 KVO

> ID：13170217
> 
> 赞同：8
> 
> 时间：2012-11-01T02:41:26.913
> 
> 标签：objective-c, cocoa, cocoa-bindings, key-value-observing, nstextfield

我无法让 KVO 处理在 Cocoa 应用程序中绑定在一起的文本字段。在使用按钮在 NSTextFields 中设置字符串时，我已经让它工作了，但它不适用于绑定。与往常一样，我们将不胜感激 Stack Overflow 的任何帮助。

我的代码的目的是：

*   将多个文本字段绑定在一起

*   在一个字段中输入数字时，让其他字段自动更新

*   观察文本字段的变化

这是我的 MainClass 代码，它是一个 NSObject 子类：

```
#import "MainClass.h"

@interface MainClass ()

@property (weak) IBOutlet NSTextField *fieldA;
@property (weak) IBOutlet NSTextField *fieldB;
@property (weak) IBOutlet NSTextField *fieldC;

@property double numA, numB, numC;

@end

@implementation MainClass

static int MainClassKVOContext = 0;

- (void)awakeFromNib {
    [self.fieldA addObserver:self forKeyPath:@"numA" options:0 context:&MainClassKVOContext];
    [self.fieldB addObserver:self forKeyPath:@"numB" options:0 context:&MainClassKVOContext];
    [self.fieldC addObserver:self forKeyPath:@"numC" options:0 context:&MainClassKVOContext];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if (context != &MainClassKVOContext) {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
        return;
    }

    if (object == self.fieldA) {
        if ([keyPath isEqualToString:@"numA"]) {
            NSLog(@"fieldA length = %ld", [_fieldA.stringValue length]);
        }
    }

    if (object == self.fieldB) {
        if ([keyPath isEqualToString:@"numB"]) {
            NSLog(@"fieldB length = %ld", [_fieldB.stringValue length]);
        }
    }

    if (object == self.fieldC) {
        if ([keyPath isEqualToString:@"numC"]) {
            NSLog(@"fieldC length = %ld", [_fieldC.stringValue length]);
        }
    }
}

+ (NSSet *)keyPathsForValuesAffectingNumB {
    return [NSSet setWithObject:@"numA"];
}

+ (NSSet *)keyPathsForValuesAffectingNumC {
    return [NSSet setWithObject:@"numA"];
}

- (void)setNumB:(double)theNumB {
    [self setNumA:theNumB * 1000];
}

- (double)numB {
    return [self numA] / 1000;
}

- (void)setNumC:(double)theNumC {
    [self setNumA:theNumC * 1000000];
}

- (double)numC {
    return [self numA] / 1000000;
}

- (void)setNilValueForKey:(NSString*)key {
    if ([key isEqualToString:@"numA"]) return [self setNumA: 0];
    if ([key isEqualToString:@"numB"]) return [self setNumB: 0];
    if ([key isEqualToString:@"numC"]) return [self setNumC: 0];
    [super setNilValueForKey:key];
}

@end 
```

这是其中一个文本字段的绑定： ![在此处输入图像描述](../Images/e14757729b0293dfc852f48623c5e75b.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-02T06:10:01.913

## NSTextFields 上的键值观察

在您的`-awakeFromNib`方法的实现中，您编写了

```
[self.fieldA addObserver:self 
              forKeyPath:@"numA" 
                 options:0 
                 context:&MainClassKVOContext]; 
```

这不会像您希望的那样做：`self.fieldA`不符合键的键值*[编码](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172-BAJEAIEE)*`numA`：如果您尝试发送`-valueForKey:`或`-setValue:forKey:`使用键`@"numA"`到`self.fieldA`，您将收到以下异常：

> **[ valueForUndefinedKey:]：此类对于键 numA 不符合键值编码。**

和

> **[ setValue:forUndefinedKey:]：此类对于键 numA 不符合键值编码。**

[因此](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOCompliance.html)，`NSTextField`实例也不*符合*的*键值**观察***`@"numA"`：对于某些键，KVO 兼容的第一个要求是该键的 KVC 兼容。

但是，它与 KVO 兼容，除其他外，`stringValue`. 这允许您执行[我之前描述的](https://stackoverflow.com/questions/13130613/controltextdidchange-not-working-for-setting-string-of-nstextfield/13132980#13132980)操作。

**注意**：这一切都不会因您在 Interface Builder 中设置绑定的方式而改变。稍后再谈。

## NSTextField 的 stringValue 上的 Key-Value 观察问题

`NSTextField`在 .上调用`@"stringValue"`时观察. 这是 KVO 内部结构的结果。`-setStringValue:``NSTextField`

### 简要介绍 KVO 内部结构

当你第一次开始观察一个键值对观察一个对象时，对象的类就改变了——它的`isa`指针也改变了。您可以通过覆盖看到这种情况`-addObserver:forKeyPath:options:context:`

```
- (void)addObserver:(NSObject *)observer 
         forKeyPath:(NSString *)keyPath 
            options:(NSKeyValueObservingOptions)options 
            context:(void *)context
{
    NSLog(@"%p, %@", self->isa, NSStringFromClass(self->isa));
    [super addObserver:observer 
            forKeyPath:keyPath 
               options:options 
               context:context];
    NSLog(@"%p, %@", self->isa, NSStringFromClass(self->isa));
} 
```

通常，类的名称从`Object`变为`NSKVONotifying_Object`。

如果我们使用键路径调用`-addObserver:forKeyPath:options:context:`了`Object`with 的`@"property"`实例`Object`——一个符合 KVC 的键——当我们接下来调用`-setProperty:`我们的实例`Object`（实际上，现在是 的实例`NSKVONotifying_Object`）时，以下消息将是发送到对象

1.  `-willChangeValueForKey:`通过`@"property"`
2.  `-setProperty:`通过`@"property"`
3.  `-didChangeValueForKey:`通过`@"property"`

打破这些方法中的任何一个都表明它们是从未记录的函数调用的`_NSSetObjectValueAndNotify`。

所有这一切的相关性在于，该方法`-observeValueForKeyPath:ofObject:change:context:`在我们添加到我们的实例的观察者上调用，以获取**来自**`Object`的关键路径。这是堆栈跟踪的顶部：`@"property"` **`-didChangeValueForKey:`**

 **```
-[Observer observeValueForKeyPath:ofObject:change:context:]
NSKeyValueNotifyObserver ()
NSKeyValueDidChange ()
-[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] () 
```

### 这与`NSTextField`和 有什么关系`@"stringValue"`？

在您[之前的设置](https://stackoverflow.com/questions/13130613/controltextdidchange-not-working-for-setting-string-of-nstextfield#comment17920328_13132980)中，您将观察者添加到您的文本字段中`-awakeFromNib`。这意味着您的文本字段已经是`NSKVONotifying_NSTextField`.

然后，您将按下一个或另一个按钮，该按钮将调用`-setStringValue`您的文本字段。您能够观察到这种变化，因为 -- 作为`NSKVONotifying_NSTextField`--your text field 的一个实例，在收到`setStringValue:value`实际收到的

1.  `willChangeValueForKey:@"stringValue"`
2.  `setStringValue:value`
3.  `didChangeValueForKey:@"stringValue"`

如上所述，从 内部`didChangeValueForKey:@"stringValue"`，所有观察文本字段值的对象都`@"stringValue"`被通知该键的值在它们自己的实现中已更改`-observeValueForKeyPath:ofObject:change:context:`。特别是，对于您添加为 中文本字段的观察者的对象，情况更是如此`-awakeFromNib`。

总之，您能够观察到文本字段值的变化，`@"stringValue"`因为您将自己添加为该键的文本字段的观察者，并且**因为`-setStringValue`在文本字段上被调用**。

### 所以有什么问题？

到目前为止，在讨论“NSTextFields 上的键值观察问题”的幌子下，我们实际上只是理解了开头的句子

> `NSTextField`在 .上调用`@"stringValue"`时观察.`-setStringValue:``NSTextField`

听起来很棒！所以有什么问题？

问题是，`-setStringValue:`当用户在文本字段中输入时，或者即使在用户结束编辑之后（例如，通过跳出文本字段），它也不会被调用。（此外，`-willChangeValueForKey:`不`-didChangeValueForKey:`手动调用。如果是，我们的 KVO 会工作；但它不会。）这意味着虽然我们的 KVO on在文本字段上调用`@"stringValue"`时工作，但当用户自己输入时它*不起作用*文本。`-setStringValue:`

 ***TL;DR**`@"stringValue"` : 上的KVO`NSTextField`不够好，因为它不适用于用户输入。

## 将 NSTextField 的值绑定到字符串

让我们尝试使用绑定。

### 初始设置

创建一个带有独立窗口控制器（我使用了创意名称`WindowController`）的示例项目，并带有 XIB。（[这是我在 GitHub 上开始的项目。](https://github.com/natechan/WindowedAppTemplate)）在类扩展中`WindowController.m`添加了一个属性：`stringA`

```
@interface WindowController ()
@property (nonatomic) NSString *stringA;
@end 
```

在 Interface Builder 中，创建一个文本字段并打开 Bindings Inspector：

![绑定检查器](../Images/c9ce0b6b98bed6a8a731b3bc14c7b024.png)

在“值”标题下，展开“值”项：

![NSControl 值绑定](../Images/cde2fda47448cc01aa1d53e488a651c0.png)

“绑定到”复选框旁边的弹出按钮目前已选中“共享用户默认控制器”。我们想将文本字段的值绑定到我们的`WindowController`实例，所以选择“文件的所有者”。发生这种情况时，“Controller Key”字段将被清空，“Model Key Path”字段将更改为“self”。

![将 NSControl 值绑定到文件的所有者](../Images/099c197f902195a8981fe0db1dfd74bc.png)

我们想将此文本字段的值绑定到我们`WindowController`实例的属性`stringA`，因此将“模型键路径”更改为`self.stringA`：

![将 NSTextField 的值绑定到文件所有者的属性 stringA](../Images/b7b323513485e3b6a7f4b12dec563020.png)

至此，我们完成了。（[到目前为止在 GitHub 上的进展。](https://github.com/natechan/TextFieldSyncDemo/tree/85b4decc78899a39df5977e77efab180c2b09dd8)）我们已经成功地将文本字段的值绑定到我们`WindowController`的属性`stringA`。

### 测试它

如果我们`stringA`在 -init 中设置某个值，当窗口加载时，该值将显示在文本字段中：

```
- (id)init
{
    self = [super initWithWindowNibName:@"WindowController"];
    if (self) {
        self.stringA = @"hello world";
    }
    return self;
} 
```

![在文本字段中显示“hello world”](../Images/31eb2a1cebcf9b90feac5a69a82fb369.png)

而且，我们已经在另一个方向上设置了绑定；在文本字段中结束编辑后，我们的窗口控制器的属性`stringA`被设置。我们可以通过覆盖它的 setter 来检查它：

```
- (void)setStringA:(NSString *)stringA
{
    NSLog(@"%s: stringA: <<%@>> => <<%@>>", __PRETTY_FUNCTION__, _stringA, stringA);
    _stringA = stringA;
} 
```

### 回复 朦胧，再试一次

在文本字段中输入一些文本并按 Tab 后，我们会看到打印出来的

```
-[WindowController setStringA:]: stringA: <<(null)>> => <<some text>> 
```

这看起来很棒。为什么我们一直没有谈论这个？？？这里有一个小问题：讨厌的**按标签**的东西。将文本字段的值绑定到字符串不会设置字符串值，直到在文本字段中结束编辑。

### 新希望

不过，希望还是有的！[Cocoa Binding Documentation for`NSTextField`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CocoaBindingsRef/BindingsText/NSTextField.html)声明可用于 an 的一个绑定选项`NSTextField`是`NSContinuouslyUpdatesValueBindingOption`. 你瞧，在 NSTextField 的值的绑定检查器中有一个对应于这个选项的复选框。继续并检查该框。

![NSTextField 的值绑定不断更新 stringA](../Images/32436b4845d04f3ea044c4732493de7f.png)

有了这个更改，当我们输入内容时，对窗口控制器`stringA`属性的更新会不断注销：

```
-[WindowController setStringA:]: stringA: <<(null)>> => <<t>>
-[WindowController setStringA:]: stringA: <<t>> => <<th>>
-[WindowController setStringA:]: stringA: <<th>> => <<thi>>
-[WindowController setStringA:]: stringA: <<thi>> => <<thin>>
-[WindowController setStringA:]: stringA: <<thin>> => <<thing>>
-[WindowController setStringA:]: stringA: <<thing>> => <<things>>
-[WindowController setStringA:]: stringA: <<things>> => <<things >>
-[WindowController setStringA:]: stringA: <<things >> => <<things i>>
-[WindowController setStringA:]: stringA: <<things i>> => <<things in>> 
```

最后，我们不断地从文本字段中更新窗口控制器的字符串。其余的很容易。作为概念的快速证明，向窗口添加更多文本字段，将它们绑定到 stringA 并将它们设置为持续更新。此时你有三个同步`NSTextField`的s！ [这是具有三个同步文本字段的项目。](https://github.com/natechan/TextFieldSyncDemo/commit/14d615b1e4bdf8a2d7b74b005592dbf75c912b80)

## 剩下的路

您想要设置三个文本字段来显示彼此有某种关系的数字。由于我们现在正在处理数字，因此我们将删除该属性并将其替换`stringA`为,和：`WindowController``numberA``numberB``numberC`

```
@interface WindowController ()
@property (nonatomic) NSNumber *numberA;
@property (nonatomic) NSNumber *numberB;
@property (nonatomic) NSNumber *numberC;
@end 
```

接下来，我们将第一个文本字段绑定到 File's Owner 上的 numberA，第二个文本字段绑定到 numberB，依此类推。最后，我们只需要添加一个属性，即以这些不同方式表示的数量。我们称之为 value `quantity`。

```
@interface WindowController ()
@property (nonatomic) NSNumber *quantity;

@property (nonatomic) NSNumber *numberA;
@property (nonatomic) NSNumber *numberB;
@property (nonatomic) NSNumber *numberC;
@end 
```

我们需要恒定的转换因子来从单位转换为`quantity`单位`numberA`等等，所以添加

```
static float convertToA = 1000.0f;
static float convertToB = 573.0f;
static float convertToC = 720.0f; 
```

（当然，使用与您的情况相关的数字。）有了这么多，我们可以为每个数字实现访问器：

```
- (NSNumber *)numberA
{
    return [NSNumber numberWithFloat:self.quantity.floatValue * convertToA];
}

- (void)setNumberA:(NSNumber *)numberA
{
    self.quantity = [NSNumber numberWithFloat:numberA.floatValue * 1.0f/convertToA];
}

- (NSNumber *)numberB
{
    return [NSNumber numberWithFloat:self.quantity.floatValue * convertToB];
}

- (void)setNumberB:(NSNumber *)numberB
{
    self.quantity = [NSNumber numberWithFloat:numberB.floatValue * 1.0f/convertToB];
}

- (NSNumber *)numberC
{
    return [NSNumber numberWithFloat:self.quantity.floatValue * convertToC];
}

- (void)setNumberC:(NSNumber *)numberC
{
    self.quantity = [NSNumber numberWithFloat:numberC.floatValue * 1.0f/convertToC];
} 
```

所有不同的数字访问器现在都只是用于访问的间接机制`quantity`，并且非常适合绑定。只有一件事需要做：我们需要确保观察者在`quantity`更改时重新轮询所有数字：

```
+ (NSSet *)keyPathsForValuesAffectingNumberA
{
    return [NSSet setWithObject:@"quantity"];
}

+ (NSSet *)keyPathsForValuesAffectingNumberB
{
    return [NSSet setWithObject:@"quantity"];
}

+ (NSSet *)keyPathsForValuesAffectingNumberC
{
    return [NSSet setWithObject:@"quantity"];
} 
```

现在，每当您在其中一个文本字段中键入内容时，其他文本字段都会相应更新。 [这是 GitHub 上项目的最终版本](https://github.com/natechan/TextFieldSyncDemo/commit/c5b6a9564166652b46060a336336bd3ea1ea16a1)。***

# android - 在android中发送带有链接的电子邮件

> ID：13170219
> 
> 赞同：2
> 
> 时间：2012-11-01T02:41:41.500
> 
> 标签：android, email, hyperlink

> **可能重复：**
> [如何发送带有链接的电子邮件以打开 Android 应用程序](https://stackoverflow.com/questions/5697899/how-to-send-email-with-link-to-open-android-application)

我正在制作一个需要发送包含两个链接的电子邮件的 Android。我通过发送带有 HTML 格式电子邮件的意图来尝试此操作。

如果用户使用内置的 Gmail 客户端，这可以正常工作，但是在 android 电子邮件客户端上进行测试时，它似乎会删除链接。

我不想强迫用户必须使用 Gmail 客户端，是否有另一种方法可以在电子邮件中包含链接，这将与内置的电子邮件客户端一起使用？

# python - 鉴于 Python 脚本中仍在返回正确的结果，TypeError 的来源是什么？

> ID：13170222
> 
> 赞同：0
> 
> 时间：2012-11-01T02:42:33.993
> 
> 标签：python, json, parsing, typeerror

我目前正在尝试从一些 JSON 中获取一个值，例如：

```
bitly_data = "https://api-ssl.bitly.com/v3/link/clicks?access_token=ACCESS_TOKEN&link=http://bit.ly/TCATL" 
```

（读取时，此数据看起来像`{"status_code": 200, "data": {"units": -1, "tz_offset": -4, "unit": "day", "link_clicks": 390}, "status_txt": "OK"}`）

然后我读取数据并尝试将整数值保存`link_clicks`为变量`clicks`：

```
src = urllib2.urlopen(bitly_data)
clicks = json.load(src)
clicks = clicks['data']['link_clicks']
print clicks 
```

打印了正确的值`clicks`（390），尽管我得到了一个 TypeError：`'NoneType' object is not subscriptable`

整个回溯如下：

```
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1358, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Library/Python/2.7/site-packages/Flask-0.9-py2.7.egg/flask/app.py", line 1344, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/Zach/Dropbox/bitly/bit.py", line 33, in settings
    clicks = clicks['data']['link_clicks'] 
```

我很困惑为什么尽管有错误，但我返回了正确的值。我尝试重写有问题的行，`clicks = clicks['data']['link_clicks'] or 0`但无济于事。我也试着把它变成一个`if statement`like，

```
if clicks['data']['link_clicks'] == None:
     clicks = 0
else:
     clicks = clicks['data']['link_clicks'] 
```

但这又没有效果。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:53:43.970

问题是在这种情况下，返回的 JSON 是：

```
{u'status_code': 403, u'data': None, u'status_txt': u'INVALID_ACCESS_TOKEN'} 
```

这可能是由于您的 URL 没有正确的访问令牌：

```
https://api-ssl.bitly.com/v3/link/clicks?access_token=ACCESS_TOKEN&link=http://bit.ly/TCATL 
```

注意它是怎么说`access_token=ACCESS_TOKEN`的：这可能来自一个演示或教程，希望您将特定的 API 访问令牌放在那里。

正如您在评论中指出的那样，一个短期修复是 put `if clicks['data'] == None`，但您可能希望解决您的 API 访问令牌的问题。

# haskell - Haskell：列表理解/哈希表条目

> ID：13170223
> 
> 赞同：1
> 
> 时间：2012-11-01T02:42:43.970
> 
> 标签：haskell, hashtable, list-comprehension

我正在尝试根据长度将一堆单词放入哈希表中。单词存储在

```
data Entry = Entry {word :: String, length :: Int} deriving Show 
```

现在，我已经将所有单词存储在“条目”中，这是一个条目列表。然后，我的哈希表定义如下：

```
type Hash = [Run]
type Run = [Entry] 
```

现在我试图弄清楚如何将条目放入哈希表中。以下是我目前的尝试

```
maxL = maximum [length e | e <- entries]
runs = [r | r <- [e | e <- entries, length e == i]] where i = [1..maxL] 
```

编译器明显告诉我 Int 不能和 [Int] 比较，但我不知道怎么说

```
e | e <- entries, e has length i 
```

任何帮助深表感谢！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:48:07.723

您正在寻找[`groupBy`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3agroupBy)来自 的功能`Data.List`。你有一个字符串列表，你想按它们的长度对其进行分组。该`groupBy`函数具有类型`(a -> a -> Bool) -> [a] -> [[a]]`。第二个参数是你的输入列表，第一个是你需要编写的函数，它应该接受两个字符串并比较它们的长度。它将返回一个字符串列表列表，其中每个子列表将包含相等长度的字符串。

顺便说一句，如果您想简洁地编写此代码，请查看[`on`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Function.html#v%3aon).`Data.Function`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:27:17.603

您的代码几乎可以：

```
maxL = maximum [length e | e <- entries]
runs = [r | r <- [e | e <- entries, length e == i]] where i = [1..maxL] 
```

除非那样`where`做。它不是 ; 的同义词`foreach`。但对于`let`：

```
runs = let i = [1..maxL] 
       in [r | r <- [e | e <- entries, length e == i]] 
```

所以，`length e`是一个整数，但是`i`是一个整数`[1..maxL]`列表。您打算一一`i`接受这些值，这是通过在列表理解中绑定来完成的：`[1..maxL]``<-`

```
runs = [ [r | r <- [e | e <- entries, length e == i]] | i <- [1..maxL]] 
```

现在，`[r | r <- xs]`与 just 相同`xs`，因此变为

```
runs = [ [e | e <- entries, length e == i] | i <- [1..maxL]] 
```

使用“标准”功能，这被写成

```
import Data.List (sortBy)
import Data.Ord  (comparing)

runs = group $ sortBy (comparing length) entries 
```

它在算法上也更好。虽然，对于不存在的长度，它不会有空运行，所以两者并不是严格等价的。但这可以通过另一个`O(n)`结果来解决，

```
-- mapAccumL :: (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y])

runs' = snd $ mapAccumL 
               (\a@ ~((k,g):t) i-> if null a || i<k then (a,[]) else (t,g))
               [ (length $ head g, g) | g<- runs]
               [ 1..maxL] 
```

# c++ - 如何确定另一个结构内的结构数组的长度

> ID：13170225
> 
> 赞同：0
> 
> 时间：2012-11-01T02:43:19.670
> 
> 标签：c++, arrays

我正在尝试编写一个函数，该函数作用于结构数组中的结构成员，该结构是另一个结构的成员:)。我需要做的第一件事是找出结构数组的长度，但我不断收到错误`expression must be class type.`

我得到这个数组的长度的合适方法是什么？（PS。函数必须将`Student`结构作为参数。）

结构：

```
struct Class
{
    string title; 
    int units;
    char grade;

};
struct Student
{
    string name;
    double gpa;
    Class classes[500];
}; 
```

我的函数看起来像这样：

```
void gpaCalculate (Student s)
{
    int size = s.classes.size() ;
    //Lots of awesome code
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T02:54:11.470

编码

```
struct Student
{
    string name;
    double gpa;
    Class classes[500];
}; 
```

表示 a`Student`最多可以参加 500 个课程，并且这是一些学校作业，您需要/要求您使用原始数组，而不是其他更合适的`std::vector`.

首先，**幻数**500 应该是一个常数，如下所示：

```
int const maxClasses = 500; 
```

然后在每个`Student`对象中，您需要存储该学生参加的实际课程数量：

```
struct Student
{
    string name;
    double gpa;
    int nClasses;
    Class classes[maxClasses];

    Student()
        : name(), gpa( 0.0 ), nClasses( 0 ), classes()
    {}
}; 
```

构造函数确保`gpa`并且`nClasses`将被归零。

由于它们是无法保证的内置类型（根据您不为不使用的东西付费的原则，所以这是*您的*决定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:26:21.783

在回答“我如何确定数组的长度？”这个问题时，使用`(sizeof(array) / sizeof(*array))`，如

```
void gpaCalculate (Student s)
{
    int size = (sizeof s.classes) / sizeof(*s.classes);
    //Lots of awesome code
} 
```

注意：这不适用于可变长度数组参数。在回答“我应该如何在 C++ 中存储项目列表”的问题时，通常应该使用向量。向量往往比数组更容易使用。例如，与数组不同的向量可以改变大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T02:52:41.040

如果将结构更改为 C++ 类会怎样？然后你可以创建一个函数来访问类数组的大小。您可以轻松地将 gpaCalulate 函数调用为 Class 类的函数。

# java - 测试秒表对象的主要方法错误

> ID：13170228
> 
> 赞同：2
> 
> 时间：2012-11-01T02:45:11.623
> 
> 标签：java, stopwatch

我有一个正在为编程课做的练习。我遇到了一个看起来非常基本的奇怪错误，但我在调试它时遇到了麻烦。

引用该代码时，会创建标准的 StopWatch 对象，其中包含与其关联的多个实例方法。我在代码底部创建了一个 main 方法，以测试 StopWatch 类中的每个方法，以确保它正常工作。

目前，当我运行程序时，我收到一条错误消息：

```
Exception in thread "main" java.lang.NoSuchMethodError: main. 
```

我显然在这个类中有一个主要方法，所以我不确定为什么会出现这个错误。

main 方法实现了 Gambler 的毁灭程序进行测试。我目前正在尝试测试 stop() 和 elapsedTime() 方法。完整代码如下：

```
/* Notes:
 * Start is the date of birth of the object. Most stopwatch don't keep track of when they were 
 * created.
 */

public class Stopwatch {

    public long startTime; //The creation time of the stopwatch
    public long totalTime; //Total time since watch was zeroed
    boolean running = false;      //This will flag if the watch is started or stopped

    public Stopwatch() //First instance method called Stopwatch. What the client will use to create Stopwatch. This serves as the constructor.
    {
            start();
    }

     public void start()
     {
         startTime = System.currentTimeMillis();
         running = true;
     }

     public void stop()
     {
         if(running) {
             totalTime += System.currentTimeMillis() - startTime;
             running = false;
         }

     }

     public double elapsedTime()
     {
         if(running){
             return System.currentTimeMillis() - startTime;
         }
         else{
             return 0; //If the watch isn't currently running, return a 0 value.
         }
     }

     public void zero()
     {
         totalTime = 0;
         start();
     }

    public static void main(String[] args)
    {
        // Run T experiments that start with $stake and terminate on $0 or $goal.

                Stopwatch program_time = new Stopwatch();
                int stake = Integer.parseInt(args[0]);
                int goal = Integer.parseInt(args[1]);
                int T = Integer.parseInt(args[2]);
                int bets = 0;
                int wins = 0;
                for (int t = 0; t < T; t++)
                { 
                    // Run one experiment

                    int cash = stake;
                    while (cash > 0 && cash < goal)
                    {
                        // Simulate one bet.

                        bets = bets + 1;
                        if (Math.random() < 0.5)
                        {
                            cash = cash + 1;
                        }
                        else 
                        {
                            cash = cash - 1;
                        }
                    } // Cash is either going to be at $0 (ruin) or $goal (win)
                if (cash == goal)
                {
                    wins = wins + 1;
                }

            }
                System.out.println(100 * wins / T + "% wins");
                System.out.println("Avg # bets: " + bets/T);
                program_time.stop();
                System.out.println(program_time.elapsedTime());

        }

} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:04:15.450

检查文件名和类名——它们必须完全匹配，即使是大写和小写。

检查[类路径](http://www.leepoint.net/notes-java/background/13files_and_directories/20classpath.html)是否正确。

# php - PHP 将两个关联数组合并为一个数组

> ID：13170230
> 
> 赞同：91
> 
> 时间：2012-11-01T02:45:20.303
> 
> 标签：php, arrays, multidimensional-array, associative-array

```
$array1 = array("$name1" => "$id1");

$array2 = array("$name2" => "$id2", "$name3" => "$id3"); 
```

我需要一个新的数组组合在一起，即它将是

```
$array3 = array("$name1" => "$id1", "$name2" => "$id2", "$name3" => "$id3"); 
```

做这个的最好方式是什么？

抱歉，我忘记了，ID 永远不会相互匹配，但从技术上讲，名称可以，但不太可能，它们都需要列在一个数组中。我查看了 array_merge 但不确定这是否是最好的方法。另外，您将如何对此进行单元测试？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-11-01T02:50:34.440

[`array_merge()`](http://php.net/manual/en/function.array-merge.php)效率更高，但有两种选择：

```
$array1 = array("id1" => "value1");

$array2 = array("id2" => "value2", "id3" => "value3", "id4" => "value4");

$array3 = array_merge($array1, $array2/*, $arrayN, $arrayN*/);
$array4 = $array1 + $array2;

echo '<pre>';
var_dump($array3);
var_dump($array4);
echo '</pre>';

// Results:
    array(4) {
      ["id1"]=>
      string(6) "value1"
      ["id2"]=>
      string(6) "value2"
      ["id3"]=>
      string(6) "value3"
      ["id4"]=>
      string(6) "value4"
    }
    array(4) {
      ["id1"]=>
      string(6) "value1"
      ["id2"]=>
      string(6) "value2"
      ["id3"]=>
      string(6) "value3"
      ["id4"]=>
      string(6) "value4"
    } 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-01T02:47:31.107

退房[`array_merge()`](http://php.net/manual/en/function.array-merge.php)。

```
$array3 = array_merge($array1, $array2); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-01-27T19:33:36.797

还有[`array_replace`](http://php.net/manual/en/function.array-replace.php)，其中原始数组被其他数组修改，保留*键 => 值*关联而不创建重复键。

*   其他数组上的相同键将导致值覆盖原始数组
*   其他数组上的新键将在原始数组上创建

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-29T10:01:27.030

我使用 array_merge 的包装器来处理 SeanWM 关于空数组的评论；我有时也想摆脱重复。我通常也想将一个数组合并到另一个数组中，而不是创建一个新数组。这最终为：

```
/**
 * Merge two arrays - but if one is blank or not an array, return the other.
 * @param $a array First array, into which the second array will be merged
 * @param $b array Second array, with the data to be merged
 * @param $unique boolean If true, remove duplicate values before returning
 */
function arrayMerge(&$a, $b, $unique = false) {
    if (empty($b)) {
        return;  // No changes to be made to $a
    }
    if (empty($a)) {
        $a = $b;
        return;
    }
    $a = array_merge($a, $b);
    if ($unique) {
        $a = array_unique($a);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-06T03:41:30.833

```
 $array = array(
            22 => true,
            25 => true,
            34 => true,
            35 => true,
        );

        print_r(
            array_replace($array, [
                22 => true,
                42 => true,
            ])
        );

        print_r(
            array_merge($array, [
                22 => true,
                42 => true,
            ])
        ); 
```

如果是数字但不是顺序关联数组，则需要使用`array_replace`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-20T02:41:09.907

我偶然发现了这个问题，试图找出一种连接两个 assoc 数组的干净方法。

我试图加入两个彼此没有关系的不同表。

这就是我想出的 PDO Query 加入两个表的方法。塞缪尔·库克（Samuel Cook）为我确定了一个解决方案，`array_merge()`他给他 +1。

```
 $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $sql = "SELECT * FROM ".databaseTbl_Residential_Prospects."";
        $ResidentialData = $pdo->prepare($sql);
        $ResidentialData->execute(array($lapi));
        $ResidentialProspects = $ResidentialData->fetchAll(PDO::FETCH_ASSOC);

        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $sql = "SELECT * FROM ".databaseTbl_Commercial_Prospects."";
        $CommercialData = $pdo->prepare($sql);
        $CommercialData->execute(array($lapi));
        $CommercialProspects = $CommercialData->fetchAll(PDO::FETCH_ASSOC);

        $Prospects = array_merge($ResidentialProspects,$CommercialProspects);
        echo '<pre>';
        var_dump($Prospects);
        echo '</pre>'; 
```

也许这会帮助别人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-10T17:51:16.013

**更新** 只是一个简短的说明，因为我可以看到这看起来很愚蠢，并且它与纯 PHP 没有什么用处，因为它`array_merge`只是在那里工作。但是，在您急于投反对票之前，请尝试使用 PHP MongoDB 驱动程序。那个家伙会出于任何原因添加索引，并且会破坏合并的对象。使用我幼稚的小功能，合并的结果与传统的`array_merge`.

* * *

我知道这是一个老问题，但我想再添加一个我最近使用 MongoDB 驱动程序查询的案例，但没有一个`array_merge`，`array_replace`也没有`array_push`工作。我在数组中包装为数组的对象结构有点复杂：

```
$a = [
 ["a" => [1, "a2"]],
 ["b" => ["b1", 2]]
];
$t = [
 ["c" => ["c1", "c2"]],
 ["b" => ["b1", 2]]
]; 
```

我需要合并它们以保持相同的结构，如下所示：

```
$merged = [
 ["a" => [1, "a2"]],
 ["b" => ["b1", 2]],
 ["c" => ["c1", "c2"]],
 ["b" => ["b1", 2]]
]; 
```

我想出的最佳解决方案是：

```
public static function glueArrays($arr1, $arr2) {
    // merges TWO (2) arrays without adding indexing. 
    $myArr = $arr1;
    foreach ($arr2 as $arrayItem) {
        $myArr[] = $arrayItem;
    }
    return $myArr;
} 
```

# apache-zest - Qi4j 两分钟无法运行教程

> ID：13170234
> 
> 赞同：0
> 
> 时间：2012-11-01T02:46:55.760
> 
> 标签：apache-zest

我正在尝试在 'Qi4j in 2 minutes' 教程中运行该项目

虽然我在 maven 存储库中找不到 Qi4j lib 文件。

谁能告诉我如何用 maven 导入 Qi4j lib 文件？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:49:07.993

Qi4j SDK 2.0 正在开发中。如果您想使用 2.0，您可以从 Qi4j 持续集成下载构建版本或从源代码构建 Qi4j SDK。

每周 SNAPSHOT 会上传到[https://repository-qi4j.forge.cloudbees.com/snapshot/](https://repository-qi4j.forge.cloudbees.com/snapshot/)，因此您需要将此 url 添加为 maven 存储库：

```
<repositories>
    [...]
    <repository>
        <id>qi4j-snapshots</id>
        <url>https://repository-qi4j.forge.cloudbees.com/snapshot/</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
    [...]
</repositories> 
```

然后你可以给 Qi4j 添加依赖：

```
<dependencies>
    [...]
    <dependency>
        <groupId>org.qi4j.core</groupId>
        <artifactId>org.qi4j.core.bootstrap</artifactId>
        <version>2.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>org.qi4j.core</groupId>
        <artifactId>org.qi4j.core.runtime</artifactId>
        <version>2.0-SNAPSHOT</version>
    </dependency>
    [...]
</dependencies> 
```

所有这些信息现在都可以在 Qi4j 网站上找到，参见[http://qi4j.org/howto-depend-on-qi4j.html](http://qi4j.org/howto-depend-on-qi4j.html)

# actionscript-3 - 从符号调用实例

> ID：13170238
> 
> 赞同：0
> 
> 时间：2012-11-01T02:47:37.030
> 
> 标签：actionscript-3, flash

我正试图让这条线工作，但它不会这样做。想不通。

```
pumpkinPage.this ["textBox" + i] = currentGuess; 
```

这不起作用，但如果我这样做

```
pumpkinPage.textBox0 = currentGuess; 
```

它工作正常。我如何让第一行工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:55:42.300

你遇到了什么错误？

假设`pumkinPage`是一个动态对象（对象、MovieClip 等），`pumpkinPage["textBox" + i] = currentGuess;`应该可以工作。

# django - Django ImportError：没有名为 django 的模块

> ID：13170239
> 
> 赞同：1
> 
> 时间：2012-11-01T02:47:37.683
> 
> 标签：django, terminal, python-2.7, virtualenv, pip

因此，我安装了 python 2.7.3，并使用 Django 网站[https://docs.djangoproject.com/en/dev/topics/install/](https://docs.djangoproject.com/en/dev/topics/install/)在我的 Mac OS x Mountain Lion 上安装 Django。我使用了 pip 和虚拟环境，我目前可以从当前终端使用 Django，但是，当我打开一个新终端并尝试说：

```
$ cd Django 
$ cd djangowork
$ cd firstproj
$ python manage.py runserver
Traceback (most recent call last):
  File "manage.py", line 8, in <module>
    from django.core.management import execute_from_command_line
ImportError: No module named django.core.management 
```

这是我得到的错误。我已经在网上寻找解决我的问题的方法。处理 PATH 似乎是一个常见问题。但是，我无法弄清楚如何解决它。任何帮助将不胜感激谢谢！

这是我的工作终端的示例：（但如果我退出，我会失去一切）

```
(my_new_env)$ cd Django
(my_new_env)$ cd djangowork
(my_new_env)$ cd firstproj
(my_new_env)$ ls
firstproj   manage.py   testdb
(my_new_env)$ python manage.py runserver
Validating models...

0 errors found
October 31, 2012 - 18:51:22
Django version 1.6.dev20121029143154, using settings 'firstproj.settings'
Development server is running at http://.../
Quit the server with CONTROL-C. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:15:54.320

请注意在第二种情况下您`(my_new_env)`在提示之前有什么情况，但在第一种情况下没有？那是因为只有在第二种情况下，您才能正确运行虚拟环境。确保`source my_new_env/bin/activate`在提示符处运行任何 python 命令之前运行。您应该始终`(my_new_env)`在提示之前有，以确保您的环境设置正确。 **您必须在打开的每个终端窗口中执行此操作。**

# php - 如何在 PHP 脚本中模拟带有争论的命令行运行？

> ID：13170240
> 
> 赞同：1
> 
> 时间：2012-11-01T02:48:06.070
> 
> 标签：php, shell, command-line

如何在 PHP 脚本中模拟带有争论的脚本的命令行运行？或者那不可能？

换句话说，假设您有以下脚本：

```
#!/usr/bin/php
<?php
require "../src/php/whatsprot.class.php";

function fgets_u($pStdn) {
    $pArr = array($pStdn);

    if (false === ($num_changed_streams = stream_select($pArr, $write = NULL, $except = NULL, 0))) {
        print("\$ 001 Socket Error : UNABLE TO WATCH STDIN.\n");
        return FALSE;
    } elseif ($num_changed_streams > 0) {
        return trim(fgets($pStdn, 1024));
    }
}

$nickname = "WhatsAPI Test";
$sender =   ""; // Mobile number with country code (but without + or 00)
$imei =     ""; // MAC Address for iOS IMEI for other platform (Android/etc) 

$countrycode = substr($sender, 0, 2);
$phonenumber=substr($sender, 2);

if ($argc < 2) {
    echo "USAGE: ".$_SERVER['argv'][0]." [-l] [-s <phone> <message>] [-i <phone>]\n";
    echo "\tphone: full number including country code, without '+' or '00'\n";
    echo "\t-s: send message\n";
    echo "\t-l: listen for new messages\n";
    echo "\t-i: interactive conversation with <phone>\n";
    exit(1);
}

$dst=$_SERVER['argv'][2];
$msg = "";
for ($i=3; $i<$argc; $i++) {
    $msg .= $_SERVER['argv'][$i]." ";
}

echo "[] Logging in as '$nickname' ($sender)\n";
$wa = new WhatsProt($sender, $imei, $nickname, true);

$url = "https://r.whatsapp.net/v1/exist.php?cc=".$countrycode."&in=".$phonenumber."&udid=".$wa->encryptPassword();
$content = file_get_contents($url);
if(stristr($content,'status="ok"') === false){
    echo "Wrong Password\n";
    exit(0);
}

$wa->Connect();
$wa->Login();

if ($_SERVER['argv'][1] == "-i") {
    echo "\n[] Interactive conversation with $dst:\n";
    stream_set_timeout(STDIN,1);
    while(TRUE) {
        $wa->PollMessages();
        $buff = $wa->GetMessages();
        if(!empty($buff)){
            print_r($buff);
        }
        $line = fgets_u(STDIN);
        if ($line != "") {
            if (strrchr($line, " ")) {
                // needs PHP >= 5.3.0
                $command = trim(strstr($line, ' ', TRUE));
            } else {
                $command = $line;
            }
            switch ($command) {
                case "/query":
                    $dst = trim(strstr($line, ' ', FALSE));
                    echo "[] Interactive conversation with $dst:\n";
                    break;
                case "/accountinfo":
                    echo "[] Account Info: ";
                    $wa->accountInfo();
                    break;
                case "/lastseen":
                    echo "[] Request last seen $dst: ";
                    $wa->RequestLastSeen("$dst"); 
                    break;
                default:
                    echo "[] Send message to $dst: $line\n";
                    $wa->Message(time()."-1", $dst , $line);
                    break;
            }
        }
    }
    exit(0);
}

if ($_SERVER['argv'][1] == "-l") {
    echo "\n[] Listen mode:\n";
    while (TRUE) {
        $wa->PollMessages();
        $data = $wa->GetMessages();
        if(!empty($data)) print_r($data);
        sleep(1);
    }
    exit(0);
}

echo "\n[] Request last seen $dst: ";
$wa->RequestLastSeen($dst); 

echo "\n[] Send message to $dst: $msg\n";
$wa->Message(time()."-1", $dst , $msg);
echo "\n";
?> 
```

要运行这个脚本，你需要进入命令行，进入文件所在的目录，然后输入类似`php -s "whatsapp.php" "Number" "Message"`.

但是，如果我想完全绕过命令行并直接在脚本中执行此操作，以便我可以随时从我的 Web 服务器运行它，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:44:52.903

首先，您应该使用[**getopt**](http://php.net/manual/en/function.getopt.php)。

在 PHP 中，它支持短格式和长格式。

使用演示记录在我链接到的页面上。在您的情况下，我怀疑您将难以检测 a 是否`<message>`包含在您的`-s`标签的第二个参数中。将消息作为自己选项的参数可能会更容易。

```
$options = getopt("ls:m:i:");

if (isset($options["s"] && !isset($options["m"])) {
  die("-s needs -m");
} 
```

至于从 Web 服务器运行东西......好吧，您使用 and 将变量传递给命令行 PHP 脚本，但是您使用and从 Web 服务器传递`getopt()`变量。如果您能找到一种明智的方法将 $_GET 变量映射到您的命令行选项，那么您应该很高兴。`$argv``$_GET``$_POST`

请注意，在获取命令行脚本并通过 Web 服务器运行它时，还存在各种其他注意事项。许可和安全齐头并进，通常是彼此的反函数。也就是说，如果您打开权限以便允许它做它需要做的事情，您可能会在您的服务器上暴露甚至创建漏洞。我不建议您这样做，除非您更有经验，或者您不介意事情是否中断或被脚本小子攻击以 0wn 您的服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T02:52:44.457

您正在寻找反引号，请参阅

[http://php.net/manual/en/language.operators.execution.php](http://php.net/manual/en/language.operators.execution.php)

或者你可以使用 shell_exec()

[http://www.php.net/manual/en/function.shell-exec.php](http://www.php.net/manual/en/function.shell-exec.php)

# ruby-on-rails - 使用 CouchRest、Rails 更新对象数组

> ID：13170247
> 
> 赞同：0
> 
> 时间：2012-11-01T02:48:39.120
> 
> 标签：ruby-on-rails, couchdb, couchrest

我正在尝试使用 Rails、CouchRest 更新对象集合中的参数。

这就是我目前正在做的事情，

```
class User
   property :country
   property :some_flag
end

@users = User.by_country(:key => 'country-name')
@users.each do |user|
  user.update_attributes({:some_flag => 'true'})
end 
```

每当 User 对象的 update_attributes 失败时，我都希望回滚整个事务。我怎样才能做到这一点？

我正在使用 CouchDB。Rails、CouchRest 和**不**使用 ActiveRecord。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:04:14.100

CouchDB 没有明确支持事务，但是有一种叫做“批量更新”的东西可能会有所帮助：

[http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API#Modify_Multiple_Documents_With_a_Single_Request](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API#Modify_Multiple_Documents_With_a_Single_Request)

更新的示例数据：

```
{
  "all_or_nothing": true,
  "docs": [
    {"_id": "0", "_rev": "1-62657917", "integer": 10, "string": "10"},
    {"_id": "1", "_rev": "2-1579510027", "integer": 2, "string": "2"},
    {"_id": "2", "_rev": "2-3978456339", "integer": 3, "string": "3"}
  ]
} 
```

# java - 读取目录中的所有文件，包括其子目录

> ID：13170250
> 
> 赞同：0
> 
> 时间：2012-11-01T02:48:53.540
> 
> 标签：java, file, recursion

这就是我设置路径的方式：

```
 dPath = dPath.replace("\\", "/");

    String iLen;
    String FileName;

    File iFolder = new File(dPath);
    File[] listOfFiles = iFolder.listFiles(); 
```

搜索时：

```
 for (int i = 0; i < listOfFiles.length; i++) 
    {
        if (listOfFiles[i].isFile()) 
        {
            FileName = listOfFiles[i].getName();

            for(String s : iEndsWith)
            {
                if(FileName.toLowerCase().endsWith(s))
                {
                    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yy h:mm aaa");
                    iLen = ReadableBytes(listOfFiles[i].length());

                    Object rowData[] = { FileName, listOfFiles[i].getAbsoluteFile(), sdf.format(listOfFiles[i].lastModified()), iLen };
                    iTableModel.addRow(rowData);

                    iTotalFiles ++;
                }
            }
        }
    } 
```

这只会查找给定目录路径中的文件，而不是子目录。我该如何改变呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:53:16.980

如果您使用的是 Java 7，则可以使用`FileVisitor`：[http ://docs.oracle.com/javase/tutorial/essential/io/walk.html](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)

如果没有，只需使用函数的简单递归版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T02:54:46.967

您可以使用Apache Commons 中的[DirectoryWalker](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/DirectoryWalker.html)来遍历目录层次结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:57:01.087

将文件夹作为要搜索的初始文件传递

```
File foldr = new File("c:/javaFolder");

public void addFilesToList(File folder) {
        File[] listofFiles = folder.listFiles();
        if (listofFiles != null) {
            for (File file : listofFiles) {
                if (file.isFile()) {

                } else
                    addFilesToList(file);

            }
        }
    } 
```

# python - Python 请求 - 是否可以在 HTTP POST 后接收部分响应？

> ID：13170258
> 
> 赞同：6
> 
> 时间：2012-11-01T02:50:18.640
> 
> 标签：python, http, post, python-requests

我正在使用[Python 请求模块](http://docs.python-requests.org/en/latest/user/quickstart/)对网站进行数据挖掘。作为数据挖掘的一部分，我必须通过 HTTP POST 表单并通过检查生成的 URL 来检查它是否成功。我的问题是，在 POST 之后，是否可以请求服务器不发送整个页面？我只需要检查 URL，但我的程序会下载整个页面并消耗不必要的带宽。代码很简单

```
import requests
r = requests.post(URL, payload)
if 'keyword' in r.url:
   success
fail 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T20:43:35.977

一个简单的解决方案，如果它对您来说是可行的。是走低级。使用套接字库。例如，您需要发送一个在其正文中包含一些数据的 POST。我在我的 Crawler 中将它用于一个站点。

```
import socket
from urllib import quote # POST body is escaped. use quote

req_header = "POST /{0} HTTP/1.1\r\nHost: www.yourtarget.com\r\nUser-Agent: For the lulz..\r\nContent-Type: application/x-www-form-urlencoded; charset=UTF-8\r\nContent-Length: {1}"
req_body = quote("data1=yourtestdata&data2=foo&data3=bar=")
req_url = "test.php"
header = req_header.format(req_url,str(len(req_body))) #plug in req_url as {0} 
                                                       #and length of req_body as Content-length
s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)   #create a socket
s.connect(("www.yourtarget.com",80))                   #connect it
s.send(header+"\r\n\r\n"+body+"\r\n\r\n")              # send header+ two times CR_LF + body + 2 times CR_LF to complete the request

page = ""
while True:
    buf = s.recv(1024) #receive first 1024 bytes(in UTF-8 chars), this should be enought to receive the header in one try
    if not buf:
        break
    if "\r\n\r\n" in page: # if we received the whole header(ending with 2x CRLF) break
        break
    page+=buf
s.close()       # close the socket here. which should close the TCP connection even if data is still flowing in
                # this should leave you with a header where you should find a 302 redirected and then your target URL in "Location:" header statement. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:07:44.507

该网站有可能使用[Post/Redirect/Get (PRG)](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式。如果是这样，那么不遵循重定向并`Location`从响应中读取标头就足够了。

例子

```
>>> import requests
>>> response = requests.get('http://httpbin.org/redirect/1', allow_redirects=False)
>>> response.status_code
302
>>> response.headers['location']
'http://httpbin.org/get' 
```

如果您需要更多关于如果您遵循重定向会得到什么的信息，那么您可以`HEAD`在标头中给出的 url 上使用`Location`。

例子

```
>>> import requests
>>> response = requests.get('http://httpbin.org/redirect/1', allow_redirects=False)
>>> response.status_code
302
>>> response.headers['location']
'http://httpbin.org/get'
>>> response2 = requests.head(response.headers['location'])
>>> response2.status_code
200
>>> response2.headers
{'date': 'Wed, 07 Nov 2012 20:04:16 GMT', 'content-length': '352', 'content-type':
'application/json', 'connection': 'keep-alive', 'server': 'gunicorn/0.13.4'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:24:51.370

如果您提供更多数据会有所帮助，例如，您尝试请求的示例 URL。话虽如此，在我看来，通常您使用以下依赖于重定向或 HTTP 404 错误的算法在 POST 请求后检查您是否有正确的 URL：

```
if original_url == returned request url:
    correct url to a correctly made request
else:
    wrong url and a wrongly made request 
```

如果是这种情况，您可以在这里做的是使用 Python`requests`库中的 HTTP HEAD 请求（另一种类型的 HTTP 请求，如 GET、POST 等）来仅获取标头而不获取页面正文。然后，您将检查响应代码和重定向 URL（如果存在）以查看您是否向有效 URL 发出了请求。

例如：

```
def attempt_url(url):
    '''Checks the url to see if it is valid, or returns a redirect or error.
    Returns True if valid, False otherwise.'''

    r = requests.head(url)
    if r.status_code == 200:
        return True
    elif r.status_code in (301, 302):
        if r.headers['location'] == url:
            return True
        else:
            return False
    elif r.status_code == 404:
        return False
    else:
        raise Exception, "A status code we haven't prepared for has arisen!" 
```

如果这不是您正在寻找的内容，那么有关您的要求的更多详细信息会有所帮助。至少，这可以让您获得状态代码和标题，而无需提取所有页面数据。

# mysql - SQL：更新查询，不影响行上的时间戳

> ID：13170260
> 
> 赞同：0
> 
> 时间：2012-11-01T02:50:23.163
> 
> 标签：mysql, sql, sql-update, row

我在下面有一些 SQL 代码，它使我能够更改数量为“0”的所有实例，并仅在“数量”列中将它们更改为“1”。它工作正常，但...

但是，我想要做的不是影响受影响行上的时间戳列（称为“entry_date”），即。保留输入的原始时间。当我运行此查询时，它会将最初创建条目的时间替换为运行以下查询的时间。

我该如何解决这个问题？我有基本的中级 PHP 知识，但我的 SQL 知识不是很好。任何帮助，将不胜感激。

> 更新`databasename`。`tablename`设置`quantity`= '1' 在
> 哪里`tablename`。`quantity`='0';

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:58:26.417

你可以尝试这样的事情：

```
UPDATE databasename.tablename SET quantity = '1'**, entry_date = entry_date**
WHERE tablename.quantity = '0'; 
```

并查看它是否不会覆盖`ON UPDATE CURRENT_TIMESTAMP`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T04:22:18.033

首先，`DESCRIBE tablename`注意“entry_date”具有“更新 CURRENT_TIMESTAMP”的*额外信息。*这是您要避免的行为。

下一个，`ALTER TABLE tablename MODIFY COLUMN entry_date TIMESTAMP [NULL | NOT NULL] DEFAULT CURRENT_TIMESTAMP;`

（您可以根据需要指定“NULL”或“NOT NULL”。）

最后，`DESCRIBE tablename`再次请注意，*额外*信息已消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:02:29.537

When you want timestamp field `entry_date` to not change automatically on update.. you need following query to execute before any update query on your table

```
ALTER TABLE `tableName` CHANGE `entry_date` `entry_date` TIMESTAMP NOT NULL
 DEFAULT CURRENT_TIMESTAMP 
```

Opposite : After this if you again want timestamp field `entry_date` to change automatically on update.. you need following query to execute before any update query on your table

```
ALTER TABLE `tableName` CHANGE `entry_date` `entry_date` TIMESTAMP ON UPDATE
 CURRENT_TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

# git - 在 Git 中合并除一个分支之外的所有更改的最简单方法是什么？

> ID：13170263
> 
> 赞同：9
> 
> 时间：2012-11-01T02:50:56.687
> 
> 标签：git, merge, branch, pom.xml, cherry-pick

这有点像我想从分支中挑选除一个之外的所有提交，但我想在一个命令中做到这一点......

• 我们剪切了一个发布，它创建了一个分支

• 该版本将我们所有 pom 中的版本号、分支上的版本号更改为一个数字，而 master 上的版本号更改为不同的数字

• 我已对分支提交了许多其他更改，并希望将这些更改复制回 master

• 我已将分支合并回master，这带来了代码更改和版本号更改，在每个pom 中产生冲突

我有什么简单的方法可以将所有 pom 文件恢复为合并前的内容，然后作为合并的结果提交？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T02:54:44.953

这是我建议做的事情。首先，进行常规合并，但不要提交：

```
git checkout master
git merge --no-commit <branch> 
```

然后，还原所有 pom 文件：

```
for file in $(find . -name 'pom.xml'); do git checkout HEAD "$file"; done 
```

那么您应该能够提交最终结果：

```
git commit 
```

# android - Android Spinner - 如何调整当前选定项目的大小？

> ID：13170264
> 
> 赞同：6
> 
> 时间：2012-11-01T02:51:25.923
> 
> 标签：android, android-spinner

似乎微调器的大小与其适配器中给出的最长项目相同。在大多数情况下，这是一个很好的行为，但在我的特定情况下是不可取的。

这可以关闭吗？通过查看源代码中的 Spinner.onMeasure()，我的猜测是否定的，但我想我会问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T07:52:54.550

我现在通过子类化 Spinner 实现了这一点：

```
public class SpinnerWrapContent extends IcsSpinner {
    private boolean inOnMeasure;

    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {       
         inOnMeasure = true;
         super.onMeasure(widthMeasureSpec, heightMeasureSpec);
         inOnMeasure = false;
    }

    public boolean isInOnMeasure() {
        return inOnMeasure;
    }
} 
```

然后在我的 SpinnerAdapter 的 getView() 中，如果我从 onMeasure() 调用，我使用当前选择的位置：

```
 public View getView(int position, View convertView, ViewGroup parent) {
        View view;

        if (convertView != null)
            view = convertView;
        else {
            int fixedPosition = (spinner.isInOnMeasure() ? spinner.getSelectedItemPosition() : position);

            // Here create view for fixedPosition
        }

        return view;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-07T08:13:24.413

这对我有用。重要的部分是这个。把上面的代码放在你的适配器上，并使用 selectedItemPosition 从对象数组中选择文本。

```
int selectedItemPosition = position;
    if (parent instanceof AdapterView) {
        selectedItemPosition = ((AdapterView) parent)
                .getSelectedItemPosition();
    } 
```

下面给出示例。

```
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = getLayoutInflater();
    final View spinnerCell;
    if (convertView == null) {
        // if it's not recycled, inflate it from layout
        spinnerCell = inflater.inflate(R.layout.layout_spinner_cell, parent, false);
    } else {
        spinnerCell = convertView;
    }
    int selectedItemPosition = position;
    if (parent instanceof AdapterView) {
        selectedItemPosition = ((AdapterView) parent)
                .getSelectedItemPosition();
    }

    TextView title = (TextView) spinnerCell.findViewById(R.id.spinnerTitle);
    title.setText(titles[selectedItemPosition]);
    return spinnerCell;
} 
```

如果您需要解释，请点击以下链接：[http ://coding-thoughts.blogspot.in/2013/11/help-my-spinner-is-too-wide.html](http://coding-thoughts.blogspot.in/2013/11/help-my-spinner-is-too-wide.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-05T08:51:41.213

如果有人正在寻找 Kotlin 答案，请按照以下步骤操作。

```
class DynamicSizeSpinner : androidx.appcompat.widget.AppCompatSpinner {

    var inOnMeasure = false
        private set

    constructor(context: Context) : super(context)
    constructor(context: Context, attrs: AttributeSet) : super(context, attrs)
    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr)

    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {
        inOnMeasure = true
        super.onMeasure(widthMeasureSpec, heightMeasureSpec)
        inOnMeasure = false
    }
} 
```

```
class SpinnerArrayAdapter(context: Context,@LayoutRes layout: Int, val entries: List<String>) : ArrayAdapter<String>(context, layout, entries) {

    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
        val selectedItemPosition = when (parent) {
            is AdapterView<*> -> parent.selectedItemPosition
            is DynamicSizeSpinner -> parent.selectedItemPosition
            else -> position
        }
        return makeLayout(selectedItemPosition, convertView, parent, R.layout.simple_spinner_dropdown_item_custom)
    }

    override fun getDropDownView(position: Int, convertView: View?, parent: ViewGroup): View {
        return makeLayout(position, convertView, parent, R.layout.simple_spinner_dropdown_item_custom)
    }

    private fun makeLayout(position: Int, convertView: View?, parent: ViewGroup, layout: Int): View {
        val view = convertView ?: LayoutInflater.from(context).inflate(layout, parent, false)
        if (position != -1) {
            (view as? TextView)?.text = entries[position]
        }
        return view
    }
} 
```

像在 XML/JAVA/Kotlin 代码中使用`DynamicSizeSpinner`默认值一样使用。`Spinner`

**PS不要忘记阅读[原文](http://coding-thoughts.blogspot.com/2013/11/help-my-spinner-is-too-wide.html)。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T03:05:07.323

如果您只想让 Spinner 更短，这是一个简单的解决方法。

通常，您可以通过给它一个权重或设置它的 layout_width 和 layout_height 来更改任何视图的高度和宽度：

```
<Spinner
    android:id="@+id/shortenedSpinner"
    android:layout_width="100dp"
    android:layout_height="50dp" /> 
```

这将迫使微调器更短

如果您希望下拉视图更短，那就不同了。在这种情况下，我想您可以在微调器适配器的 getDropDownView() 方法中提供一个自定义行，该方法具有与上述相同的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-09T10:55:34.830

这是更优雅的几乎单线解决方案：

```
class ResizingArrayAdapter<T>(context: Context, @LayoutRes layoutResId: Int, @IdRes textViewResourceId: Int, objects: List<T>) :
    ArrayAdapter<T>(context, layoutResId, textViewResourceId, objects) {

    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View =
        super.getView(if (parent is AdapterView<*>) parent.selectedItemPosition else position, convertView, parent)
} 
```

# windows-server-2008-r2 - 在使用 Windows Server 2008 R2 的构建服务器上使用 Devenv.com 构建 VS 2003 解决方案

> ID：13170267
> 
> 赞同：3
> 
> 时间：2012-11-01T02:51:47.217
> 
> 标签：windows-server-2008-r2, tfsbuild, .net-1.1, visual-studio-2003

我正在尝试在 Windows Server 2008 R2 机器上的 TFS 构建服务器 2008 上构建 .NET Framework 1.1 解决方案（VS 2003）。我正在按照本网站的说明进行操作

[http://blogs.msdn.com/b/nagarajp/archive/2005/10/26/485368.aspx](http://blogs.msdn.com/b/nagarajp/archive/2005/10/26/485368.aspx)

并寻求建议的第二种解决方案。构建服务器很好地完成了前 4 个步骤（初始化构建、获取源、标记源和编译任何 cpu/版本的源），但之后它只显示构建正在进行中并且不执行任何操作。我让工作一夜之间运行，它仍然显示 Buiid In progress。我检查了事件日志，它显示以下消息：

```
The application (Visual Studio .NET 2003, from vendor Microsoft) has the following problem: Visual Studio .NET 2003 has a known compatibility issue with this version of Windows. 
```

当我登录到构建服务器然后尝试打开 Visual Studio 2003 时，它会显示一个带有相同消息的弹出窗口，然后我必须单击“运行程序”才能更进一步。但由于我正在使用命令行构建解决方案，我想知道我该怎么做？我还尝试在兼容模式下运行该程序（windows xp service pack 3）并检查了“禁用视觉主题”和“禁用桌面组合”选项，但没有运气。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:15:28.887

这是 1.1 Framework 项目的配置文件的修改版本，用于在 Windows Server 2008 R2 上使用 Build Server 2008 进行构建：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="DesktopBuild"     xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5"> 
```

```
<ProjectExtensions>
<ProjectFileVersion>2</ProjectFileVersion>
<Description></Description>
<BuildMachine>UNKNOWN</BuildMachine>
</ProjectExtensions>
<PropertyGroup>
<TeamProject>1.1 Framework</TeamProject>
<BuildDirectoryPath>UNKNOWN</BuildDirectoryPath>
<DropLocation>\\UNKNOWN\drops</DropLocation>
<RunTest>false</RunTest>
<RunCodeAnalysis>Never</RunCodeAnalysis>
<WorkItemType>Bug</WorkItemType>
<WorkItemFieldValues>System.Reason=Build Failure;System.Description=Start the build    using Team Build</WorkItemFieldValues>
<WorkItemTitle>Build failure in build:</WorkItemTitle>
<DescriptionText>This work item was created by Team Build on a build failure. </DescriptionText>
<BuildlogText>The build log file is at:</BuildlogText>
<ErrorWarningLogText>The errors/warnings log file is at:</ErrorWarningLogText>
<UpdateAssociatedWorkItems>true</UpdateAssociatedWorkItems>
<AdditionalVCOverrides></AdditionalVCOverrides>
<CustomPropertiesForClean></CustomPropertiesForClean>
<CustomPropertiesForBuild></CustomPropertiesForBuild>
</PropertyGroup>
<ItemGroup>
</ItemGroup>
<ItemGroup>
<ConfigurationToBuild Include="Release|Any CPU">
<FlavorToBuild>Release</FlavorToBuild>
<PlatformToBuild>Any CPU</PlatformToBuild>
</ConfigurationToBuild>
</ItemGroup>
<ItemGroup>
</ItemGroup>
<PropertyGroup>
<VS2003_Devenv>C:\Program Files (x86)\Microsoft Visual Studio .NET    2003\Common7\IDE\devenv.com</VS2003_Devenv> 
<VS2003_Configuration>Release</VS2003_Configuration> 
</PropertyGroup> 
<ItemGroup>
<VS2003_OutputFiles Include="$(SolutionRoot)\DSC.STARS\Main\DSC.STARS.Web\**\*.*" />
</ItemGroup>
<Target Name="AfterCompile">  
<Exec Command="&quot;$(VS2003_Devenv)&quot; &quot;$(SolutionRoot)\DSC.STARS\Main\DSC.STARS.SOLUTION.sln&quot; /build release" />  
 <MakeDir Directories="$(BinariesRoot)\$(VS2003_Configuration)"  Condition="!Exists('$(BinariesRoot)\$(VS2003_Configuration)')" />

<Copy SourceFiles="@(VS2003_OutputFiles)" DestinationFiles="@(VS2003_OutputFiles- >'$(BinariesRoot)\$(VS2003_Configuration)\%(RecursiveDir)%(Filename)%(Extension)')"/>
</Target>
</Project> 
```

# d - 使用 scons 在 'src' 以外的目录中构建不会将 deps 复制到 variant_dir

> ID：13170269
> 
> 赞同：1
> 
> 时间：2012-11-01T02:52:02.633
> 
> 标签：d, scons

我正在尝试将 scons 用于我的项目。到目前为止，我有以下内容：

SConstruct

```
path = ['/usr/local/bin', '/usr/bin', '/bin']
libpath = ['/usr/local/lib', '/usr/lib', '/lib']
env = Environment()
env.Append(ENV = {'PATH' : path})
env.Append(DFLAGS = ['-version=placeholder', '-g'])
env.Append(LIBPATH = libpath)
env.Append(DPATH = '#/build_debug/')
Export('env')
env.SConscript('src/SConscript', variant_dir = 'build_debug',
               exports = {'DFLAGS' : '-debug'}) 
```

src/SConscript

```
Import('env')
env.Program(target = 'a.out',
            source = ['stubs.d'] + Glob('*/*.d')) 
```

但是，在尝试构建时，它会给出：

```
build_debug/foo/foo.d:9: Error: module bar is in file 'bar/bar.d' which cannot be read 
```

检查`ls build_debug`表明并非所有文件都已复制。

我认为我早先有这个工作；但从那以后我一定把事情搞砸了。

编辑：我所有的源代码都位于 project/src/ 中，我希望构建发生在 project/build/ 中；我的 SConstruct 文件位于 project/.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:49:20.200

SCons 不支持外源构建，所以不要对意外行为感到惊讶。

他们正在谈论尽快在 SCons 开发电子邮件列表中添加此功能，但他们没有说明何时。

我注意到您的脚本中有一些可以改进的地方：

在 SConstruct 中对 SConscript() 的调用中，导出的是 DFLAGS 变量，但在 SConscript 中，您只导入了“env”，因此 DFLAGS 变量不可见。您应该导入 DFLAGS，或者只是将 env 中的 DFLAGS 设置为不同的变量，然后从 SConscript 中的 env 中获取它。

另外，我不确定库路径是否可以正常工作。你有这个：

```
libpath = ['/usr/local/lib', '/usr/lib', '/lib']
env.Append(LINKFLAGS = libpath) 
```

但是，SCons 不会在`-L`每个 libpath 之前添加。SCons 将不使用`LINKFLAGS`use ，而是将.`LIBPATH``-L`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T10:00:43.880

您可以尝试将`duplicate`参数设置为`0`

```
env.SConscript('src/SConscript', variant_dir = 'build_debug',
               exports = {'DFLAGS' : '-debug'}, duplicate=0) 
```

# scala - 当我添加对 Specs2 的依赖项时，为什么我的一些使用 Mockito 的 ScalaTest 测试会失败？

> ID：13170270
> 
> 赞同：3
> 
> 时间：2012-11-01T02:52:08.727
> 
> 标签：scala, mockito, scalatest, specs2

我最近在一个项目中添加了对 Specs2 的依赖，并注意到一些使用 ScalaTest 和 Mockito 编写的现有测试失败了。删除 Specs2 后，这些测试再次通过。为什么会这样？

```
lazy val scalatestandspecscoexisting = Project(
  id = "scalatest-and-specs-coexisting",
  base = file("."),
  settings = Project.defaultSettings ++
    GraphPlugin.graphSettings ++
    Seq(
    name := "Scalatest-And-Specs-Coexisting",
    organization := "com.bifflabs",
    version := "0.1",
    scalaVersion := "2.9.2",
//  libraryDependencies ++= Seq(scalaTest, mockito)   //Tests Pass, no-specs2
    libraryDependencies ++= Seq(scalaTest, specs2, mockito)  //Tests Fail
  )
) 
```

失败的测试都使用了 Mockito，并且都设置了一个带有两个不同参数的模拟方法。对模拟的调用之一不返回它设置的值。下面的例子失败了。进一步的要求是类型必须是 Function1 （或具有应用方法）。

```
import org.scalatest.FunSuite
import org.scalatest.mock.MockitoSugar
import org.mockito.Mockito.when

trait MockingBird {
  //Behavior only reproduces when input is Function1
  def sing(input: Set[String]): String
}

class MockSuite extends FunSuite with MockitoSugar {

  val iWannaRock = Set("I wanna Rock")
  val rock = "Rock!"

  val wereNotGonnaTakeIt = Set("We're not gonna take it")
  val no = "No! We ain't gonna take it"

  test("A mock should match on parameter but isn't") {

    val mockMockingBird = mock[MockingBird]
    when(mockMockingBird.sing(iWannaRock)).thenReturn(rock)
    //Appears to return this whenever any Set is passed to sing
    when(mockMockingBird.sing(wereNotGonnaTakeIt)).thenReturn(no)

    // Succeeds because it was set up last
    assert(mockMockingBird.sing(wereNotGonnaTakeIt) === no)
    // Fails because the mock returns "No! We ain't gonna take it"
    assert(mockMockingBird.sing(iWannaRock) === rock)
  }
} 
```

输出：

```
 [info] MockSuite:
 [info] - A mock should match on parameter but isn't *** FAILED ***
 [info]   "[No! We ain't gonna take it]" did not equal "[Rock!]" (MockSuite.scala:38)
 [error] Failed: : Total 1, Failed 1, Errors 0, Passed 0, Skipped 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:58:07.060

**编辑**- 根据下面 Eric 的评论，这是 Specs2 ≤ 1.12.2 中的一个错误。应该在 1.12.3 中修复。

事实证明，Specs2 重新定义了 Mockito 中的一些行为，以便获得要匹配的按名称参数。

[埃里克回答了我的问题](https://twitter.com/etorreborre/status/261329677120049152)

> “我不喜欢这个，但这是我发现匹配别名参数的唯一方法：http: [//bit.ly/UF9bVC](http://bit.ly/UF9bVC)。你可能想要那个。”

来自 Specs2 文档

> [**按名字**](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Matchers.html#Byname)
> 
> 可以验证 Byname 参数，但如果 specs2 jar 没有放在类路径的第一个，在 mockito jar 之前，这将不起作用。实际上，specs2 重新定义了一个 Mockito 类来拦截方法调用，以便正确处理别名参数。

为了让我的测试再次通过，我做了与 specs2 文档中建议相反的操作，并在 Mockito*之后*添加了 Specs2 依赖项。我没有尝试过，但我希望按名称参数匹配失败。

```
lazy val scalatestandspecscoexisting = Project(
  id = "scalatest-and-specs-coexisting",
  base = file("."),
  settings = Project.defaultSettings ++
    GraphPlugin.graphSettings ++
    Seq(
    name := "Scalatest-And-Specs-Coexisting",
    organization := "com.bifflabs",
    version := "0.1",
    scalaVersion := "2.9.2",
//  libraryDependencies ++= Seq(scalaTest, mockito)   //Tests Pass
    libraryDependencies ++= Seq(scalaTest, mockito, specs2)  //Tests Pass
//  libraryDependencies ++= Seq(scalaTest, specs2, mockito)  //Tests Fail
  )
) 
```

我的测试现在通过了

```
[info] MockSuite:
[info] - A mock should match on parameter but isn't
[info] Passed: : Total 1, Failed 0, Errors 0, Passed 1, Skipped 0 
```

# objective-c - 将字符串对象添加到 NSMutuableArray

> ID：13170271
> 
> 赞同：2
> 
> 时间：2012-11-01T02:52:33.863
> 
> 标签：objective-c, ios, nsmutablearray

我正在尝试将 NSString 对象添加到 NSMutuableArray: `tableItems = [tableItems addObject:timeString];`。我已经初始化了数组，但是当我添加 NSString 对象时，我收到了这个错误：`Assigning to 'NSMutuableArray *_strong'from incompatible type void.`

整个代码在这里：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    UILabel *lbl;
    NSTimer *stopTimer;
    NSDate *startDate;
    BOOL running,lap;
    UIButton *bttn;
    NSMutableArray *tableItems;
    NSString *timeString;
}

@property (strong,nonatomic) IBOutlet UILabel *lbl;
@property (strong,nonatomic) IBOutlet UIButton *bttn;
@property (strong,nonatomic) NSMutableArray *tableItems;
@property (strong,nonatomic) NSString *timeString;

-(IBAction)startPressed:(id)sender;
-(IBAction)resetPressed:(id)sender;

-(void)updateTimer;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize lbl,bttn,tableItems,timeString;

- (void)viewDidLoad
{
    [super viewDidLoad];
    lbl.text = @"00.00.00.000";
    running = FALSE;
    lap = FALSE;
    startDate = [NSDate date];
    tableItems = [[NSMutableArray alloc] init];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)startPressed:(id)sender{
    if(!running){
        running = TRUE;
        lap = TRUE;
        [sender setTitle:@"Stop" forState:UIControlStateNormal];
        [bttn setTitle:@"Lap" forState:UIControlStateNormal];
        if (stopTimer == nil) {
            stopTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                         target:self
                                                       selector:@selector(updateTimer)
                                                       userInfo:nil
                                                        repeats:YES];
        }
    }else{
        running = FALSE;
        lap = FALSE;
        [sender setTitle:@"Start" forState:UIControlStateNormal];
        [bttn setTitle:@"Restart" forState:UIControlStateNormal];
        [stopTimer invalidate];
        stopTimer = nil;
    }

}
-(void)updateTimer{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.SSS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    timeString=[dateFormatter stringFromDate:timerDate];
    lbl.text = timeString;
}

-(IBAction)resetPressed:(id)sender{
    if (!lap) {
        [stopTimer invalidate];
        stopTimer = nil;
        startDate = [NSDate date];
        lbl.text = @"00.00.00.000";
        running = FALSE;
    }
    else{
        tableItems = [tableItems addObject:timeString];
    }

}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return tableItems.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    //Step 1:Check whether if we can reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    //If there are no new cells to reuse,create a new one
    if(cell ==  nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"cell"];
        //UIView *v = [[UIView alloc] init];
        //v.backgroundColor = [UIColor redColor];
        //cell.selectedBackgroundView = v;
        //changing the radius of the corners
        //cell.layer.cornerRadius = 10;

    }

    //Set the image in the row
    //cell.imageView.image = [images objectAtIndex:indexPath.row];

    //Step 3: Set the cell text content
    cell.textLabel.text = [tableItems objectAtIndex:indexPath.row];

    //Step 4: Return the row
    return cell;

}

@end 
```

不知道我的错误是什么。需要一些指导。对不起，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T02:58:01.113

不要这样做：

```
tableItems = [tableItems addObject:timeString]; 
```

这样做：

```
[tableItems addObject:timeString]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T02:57:08.477

由于这是一个可变数组，因此更改：

```
tableItems = [tableItems addObject:timeString]; 
```

至：

```
[tableItems addObject:timeString]; 
```

该`addObject`方法被声明为: , （如此[处](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html "这里")`- (void)addObject:(id)anObject`所示）并且由于返回类型是它不返回任何内容。`void`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:56:50.350

这条线

```
tableItems = [tableItems addObject:timeString]; 
```

不完全按照你的想法。`tableItems`是一个可变数组，您只想向其中添加时间字符串。您不需要将返回值重新分配给任何内容，因为此方法添加了项目并且不返回任何内容 (void)。

编译器的错误在这里是一个提示：它无法弄清楚你为什么将`void`（返回值；什么都没有）分配给它知道应该是`NSMutableArray`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T02:57:42.707

改变

```
tableItems = [tableItems addObject:timeString]; 
```

至

```
[tableItems addObject:timeString]; 
```

你不必分配它。`[tableItems addObject:timeString];`是返回类型`void`，您不能将其分配给`NSArray`对象。这就是编译器所说的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T02:57:35.530

首先，您应该始终像这样初始化您的数组。

`NSMutableArray *anArray = [NSMutableArray array];`

接下来，以下行：

`tableItems = [tableItems addObject:timeString];`

应该：

`[tableItems addObject:timeString];`

没有必要重新声明它。

最后，你确定那`timeString`不是空的吗？

# solr - Solr 优化太频繁？

> ID：13170276
> 
> 赞同：1
> 
> 时间：2012-11-01T02:53:04.250
> 
> 标签：solr

我们在一台服务器上有 16 个核心，每个核心都有 450 万个客户订单。最近，我们每小时向每个核心提交 200 个新订单，然后优化所有核心。我们发现每次优化操作至少需要 30 分钟。我有几个问题：

1.  我们应该在每次提交后进行优化吗？如果我们每天进行优化，在我们的情况下会显着降低查询性能吗？

2.  我们只会将新订单添加到 solr 中，绝不会更新或删除 solr 中的任何订单。那么，我们可以只优化我们提交的索引，换句话说，我们可以按日期范围优化索引吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:04:42.353

不，不要在每次提交后进行优化。您应该优化的频率取决于您更新的频率。

来自[http://wiki.apache.org/solr/SolrPerformanceFactors#Optimization_Considerations](http://wiki.apache.org/solr/SolrPerformanceFactors#Optimization_Considerations)

> 如果您有一个快速变化的索引，而不是优化，您可能只想使用较低的合并因子。优化是非常昂贵的，如果索引是不断变化的，那么轻微的性能提升不会持续很长时间。对于非静态索引，这种折衷通常是不值得的。

“它会显着降低查询性能”的问题是您必须自己测试的问题，但要测量、测量、测量。然后，确定性能是否真的有问题。如果一个 50 毫秒的查询变成一个 60 毫秒的查询，响应时间会增加 20%，但这有关系吗？只有你能回答这些权衡。但是你必须有数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:15:52.717

您应该分批提交并间隔优化。由于优化是一项非常繁重的操作，其中索引段组合成单个段以提高性能。

但是，使用最新的 Lucene，您甚至可能不需要使用[Optimize](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/index/IndexWriter.html#optimize%28%29)。
最新版本已弃用优化：-

> 这种方法已被弃用，因为它效率极低，而且很少被证明是合理的。Lucene 的多段搜索性能随着时间的推移而提高，默认的 TieredMergePolicy 现在以删除段为目标。

# javascript - 如何从 html 输入生成自定义 URL？

> ID：13170286
> 
> 赞同：0
> 
> 时间：2012-11-01T02:54:09.200
> 
> 标签：javascript, html, url, search, search-engine

我想创建一个搜索栏，它接受查询并添加 URL 的其余部分，然后转到该站点。例如

输入： **沃尔玛**
输出： [http ://www.example.com/?t=w&p=0&q=](http://www.example.com/?t=w&p=0&q=) **walmart**

然后程序导航到生成的链接。这就像谷歌浏览器的多功能框的工作方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:02:00.003

只是简单的html表单

```
<form method="GET" action="http://www.example.com/">
   <input type="text" name="q">
   <input type="hidden"  name="t" value="w">
   <input type="hidden"  name="p" value="0">
</form> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T01:01:06.667

这是我为我的网站制作的东西：

trapper.site90.net/luckysearch

如果你愿意，你可以使用我的代码。我测试了它。只需在我的页面上使用检查元素。:D

# visual-studio-2010 - 指定的模块无法找到。（来自 HRESULT 的异常：0x8007007E 在尝试在 Visual Studio 中显示表数据时

> ID：13170291
> 
> 赞同：0
> 
> 时间：2012-11-01T02:54:33.613
> 
> 标签：visual-studio-2010, sql-server-ce

当我尝试显示来自 SQL Server CE 数据库的表数据时，我收到了该错误。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:54:33.613

卸载 Visual Studio 2012 后，Visualt Studio 2010 出现该错误。再次安装 Visual Studio 2012，一切都会恢复正常。看起来 vs2012 要么删除了太多文件，要么没有足够的 dll 注册表链接。

# c# - C#有限次可以按下按钮并弹出显示和流式写入文件

> ID：13170295
> 
> 赞同：0
> 
> 时间：2012-11-01T02:54:52.473
> 
> 标签：c#, winforms

好的，所以我正在编写一个程序，它应该只允许用户单击某个按钮随机次数（1-25 次），这是每次用户启动程序时生成的。我的代码对此不起作用，该程序当前在 ListBox 中保留一个总计值，当用户点击他们可以点击按钮的“限制”数量时，它假设将该总计值写入我已经保存的文件. 另外，当激活此“随机次数”时，您将如何合并消息显示？这是我的代码，谢谢：

```
 public Form1()
       {
        InitializeComponent();
        }
        private int lose()
        {

        // int High_Score;

        Random rand = new Random();
        lost = rand.Next(23) + 2;
        return lost;
        MessageBox.Show(" you lose");

       }

       private void begingameButton_Click(object sender, EventArgs e)
        {   
        lose();
        //Begin game button disable
        begingameButton.Enabled = false;
        //The roll button is enabled
        rolldieButton.Enabled = true;
        //Makes the beginning instructions visible
        beginLabel.Visible = false;
        //Makes the other instructions visible
        diceBox1.Visible = true;
        //Enables the start over button
        startoverButton.Enabled = true;
        //Displays a total of 0 dollars at the beginning of game
        int beginTotal = 0;
        totalmoneyLabel.Text = beginTotal.ToString("c");

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:09:59.807

您只需要初始化`Random`一次类，否则每次调用都会得到相同的数字`.Next()`。

假设滚动按钮是需要点击次数有限的按钮......

```
private Random Rand = new Random();

private int RollCount;
private int RollLimit;

private void begingameButton_Click(object sender, EventArgs e)
{
    RollCount = 0;
    RollLimit = Rand.Next(1, 25);

    //...other prep work
}

private void rolldieButton_Click(object sender, EventArgs e)
{
    RollCount++;

    if (RollCount == RollLimit)
    {
        // limit reached
    }
} 
```

# c# - WPF Radiobutton TwoWay Binding 总是导致两个属性调用。如何区分？

> ID：13170299
> 
> 赞同：0
> 
> 时间：2012-11-01T02:55:15.440
> 
> 标签：c#, wpf, radio-button

我有几个 RadioButtons 组合在一个组中，因此只能检查一个。RadioButtons 绑定到布尔属性。

这很好用，我的程序会对这些属性的变化做出反应。

假设`optA`被选中。接下来我选择`optB`， 的值`PropertyB`设置为 true ，我的程序会做出相应的反应。但是，此时两者`optA`和`optB`都为真，直到单选按钮组更新`optA`为假，这再次触发我的“IsSelected”事件。

我认为这是完全正确的行为......但是我如何区分来自用户的更改和来自组的自动更改？

编辑：代码

```
<RadioButton Name="featureCheckBox" GroupName="featureRadioButtonGroup" IsChecked="{Binding Path=IsSelected, Mode=TwoWay}" />

 public bool IsSelected { 

        get{ return _isSelected; }
        set { PropertyChanged.ChangeAndNotify(ref _isSelected, value, () => IsSelected); }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:46:20.843

**首先回答你的问题。**

更改 IsSelected 属性的设置部分，如下所示。（您当然必须为 if 语句编写实际代码）

```
public bool IsSelected 
{ 

    get{ return _isSelected; }
    set 
    {
        //If two options are true wait for the second change of values
        //You will now only get One notification per change.
        if (twoOptions are selected) return;
        else PropertyChanged.ChangeAndNotify(ref _isSelected, value, () => IsSelected); 
    }
} 
```

您可以改为只侦听错误值，但随后您必须将任意选项设置为 true 开始。或者您可以只监听真值并忽略所有假值，这意味着您将遇到多个属性为真的问题，直到组框将旧选项更新为假。

**现在寻求建议。**

一个更好的模型将是这个。

1.  为每个选项创建一个布尔属性。（optA、optB、optC 等）
2.  当这些属性之一设置为 true 时，通过声明属性的模型中的代码将所有其他选项设置为 false。
3.  将每个单选按钮绑定到一个选项`but do NOT group them`。（将它们分组会导致 UI 强制只选择一个。这不利于 UI 和业务逻辑的分离。）

这样做有几个好处。

1.  您可以删除 UI 并将其更改为其他内容，而无需更改业务逻辑。（换句话说，您可以将属性绑定到 RadioButtons、ToggleButtons 等，而无需更改`ANY`代码。）
2.  您可以更轻松地对业务逻辑进行单元测试，因为甚至不需要 UI。
3.  您可以实现选项的自定义分组。（也许您将添加实际有效的 optZ 以与 optC 一起选择。在这种情况下，您希望从单选按钮切换，因为它们表明一次只能选择一个选项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:16:30.213

我想你可以通过它的价值来区分它。`True`始终从用户设置，因为您无法取消选择单选按钮，并且`false`始终来自设置为的另一个值`true`。

# twitter-bootstrap - Bootstrap：如何在媒体列表上放置滚动条

> ID：13170300
> 
> 赞同：1
> 
> 时间：2012-11-01T02:55:32.163
> 
> 标签：twitter-bootstrap, scrollbar

我正在尝试容器流体，但无法在垂直分隔线上获得滚动条。（我想在该 div 中放置一个可滚动列表）

jsfiddle 结果：http: [//jsfiddle.net/wMHGQ/3/embedded/result/](http://jsfiddle.net/wMHGQ/3/embedded/result/)

我希望媒体列表可以滚动

jsfiddle 编辑：http: [//jsfiddle.net/wMHGQ/3/](http://jsfiddle.net/wMHGQ/3/)

有内置的类来做到这一点吗？谢谢

代码

```
 <div class="container-fluid">
     <div class="row-fluid">
        <div id="main_part" class="span9 main_part"></div>
        <div id="my_list" class="span3 pull-right">
        <ul class="media-list">
            <li class="media">
                <a class="pull-left" href="#">
                  <img class="media-object" src="http://placehold.it/64x64">
                </a>
                <div class="media-body">
                  <h4 class="media-heading">Media heading</h4>
                  <p>Cras sit amet nibh libero, in gravida nulla.</p>
               </div>
              </li>
            <li class="media">
                <a class="pull-left" href="#">
                  <img class="media-object" src="http://placehold.it/64x64">
                </a>
                <div class="media-body">
                  <h4 class="media-heading">Media heading</h4>
                  Cras sit amet nibh libero, in gravida nulla.</div>
            </li>
            ... scrollable for more requests ..

            </ul>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:58:43.720

为 div 设置一个特定的高度，然后在你的 css 中设置 overflow : auto 。这样，如果您的内容不适合您的 div，则会出现一个滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-31T13:19:04.830

您可以将最大高度设置为您的媒体 Ul 和溢出：自动。

# algorithm - 使用什么类型的平滑？

> ID：13170305
> 
> 赞同：6
> 
> 时间：2012-11-01T02:56:08.357
> 
> 标签：algorithm, filter, smoothing

不确定这在 SO 上是否有效，但我希望有人可以建议使用正确的算法。

我有以下 RAW 数据。 ![在此处输入图像描述](../Images/e22545882af5948ece4565743297baa5.png)

在图像中，您可以看到“步骤”。本质上我希望得到这些步骤，然后得到所有数据的移动平均值。在下图中，您可以看到移动平均线：

![在此处输入图像描述](../Images/c130c1a23d9924cf6b28799ed6662826.png)

但是您会注意到，在“台阶”处，移动平均线会降低我希望保持高垂直梯度的梯度。

是否有任何平滑技术可以考虑较大的垂直“偏移”，但平滑其他数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:08:08.517

我建议首先检测步骤，然后单独平滑每个步骤。

您知道如何进行平滑处理，并且边缘/步长检测也很容易（例如，请参见[此处](http://en.wikipedia.org/wiki/Edge_detection)）。一个典型的边缘检测方案是平滑您的数据，然后将其与一些过滤器相乘/卷积/交叉相关（例如，数组 [-1,1] 将向您显示步骤所在的位置）。在数学上下文中，这可以被视为研究绘图的导数以找到拐点（对于某些过滤器）。

另一种“hackish”解决方案是进行移动平均，但从平滑中排除异常值。*您可以通过使用某个阈值t*来确定异常值是什么。换句话说，对于每个值为*v的点**p*，取其周围的*x个点，并找到介于**v* - *t*和*v* + *t*之间的那些点的子集，并将这些点的平均值作为*p*的新值。

 **** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T03:26:30.180

是的，我不得不对来自宇宙飞船的图像做类似的事情。

**简单技术#1：**使用宽度适中的中值滤波器——比如大约 5 个样本或 7 个样本。这提供了一个输出值，该输出值是相应输入值及其两侧的几个直接邻居的中值。它将摆脱那些尖峰，并很好地保留台阶边缘。

我所知道的所有数字运算工具包中都提供了中值滤波器，例如 Matlab、Python/Numpy、IDL 等，以及用于编译语言的库，例如 C++、Java（尽管现在还没有想到具体的名称。 ..)

**技术 #2，可能不太好：**使用 Savitzky-Golay 平滑滤波器。这通过使用相应的输入样本和点的邻域（很像中值滤波器）在每个输出样本处有效地对数据进行最小二乘多项式拟合来工作。SG 平滑器以在保持峰值和尖锐过渡方面相当出色而闻名。

SG 滤波器通常由大多数信号处理和数字运算包提供，但可能不像中值滤波器那样常见。

**技术#3，工作量最大，需要最多经验和判断力：** 继续使用更平滑的方法——移动箱平均、高斯，等等——然后创建一个混合原始数据和平滑数据的输出。由您创建的新数据系列控制的混合从全原始（以 0% 的平滑混合）到全平滑 (100%) 不等。

要控制混合，请从边缘检测器开始检测跳跃。您可能希望首先对数据进行中值过滤以消除尖峰。然后加宽（图像处理术语中的膨胀）或平滑并重新归一化边缘检测器的输出，然后翻转它，使其在跳跃处和附近给出 0.0，在其他任何地方给出 1.0。也许你想要一个平稳的过渡加入他们。做到这一点是一门艺术，这取决于如何使用数据——对我来说，通常是人类可以查看的图像。如果进行不同的调整，自动化嵌入式控制系统可能效果最好。

这种技术的主要优点是您可以插入您喜欢的任何类型的平滑滤波器。在混合控制值为零的情况下，它不会产生任何影响。主要缺点是跳跃，即由受控边缘检测器输出定义的小邻域，将包含噪声。***

# iphone - iOS 不使用 -568h@2x.png

> ID：13170306
> 
> 赞同：9
> 
> 时间：2012-11-01T02:56:13.830
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有 3 张图片：

```
test.png
test@2x.png
test-568@2x.png 
```

在 IBOutlet 中，一个 UIImageView 被设置为显示 test.png。

在没有视网膜的 iPhone 3.5in 上，它显示 test.png

在带有视网膜的 iPhone 3.5in 上，它显示 test@2x.png

但是在带有视网膜的 iPhone 4in 上，它显示 test@2x.png ！！！

这是怎么回事？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T02:58:16.220

该`-568@2x`后缀仅适用于 Default.png 启动图像。`UIImage imageNamed:`（或其他`UIImage`方法）没有使用特殊的后缀。如果您需要 4" 屏幕上的特殊图像，您需要添加代码以自己获取所需的图像。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-03T14:00:56.310

以下适用于 iPhone。对于 iPad，您需要额外的图像。

对于背景图像的三个版本，请使用以下名称：

1.  背景-480h.png (320x480)
2.  背景-480h@2x.png (640x960)
3.  背景-568h@2x.png (640x1136)

（您不需要“-568h.png”图像，因为没有 320x568 iPhone 屏幕。）

设置背景图像时，只需将屏幕高度附加到图像名称：

```
NSString* imageName = [NSString stringWithFormat: @"background-%ih", (int)[[UIScreen mainScreen] bounds].size.height];
[view setBackgroundColor: [UIColor colorWithPatternImage: [UIImage imageNamed: imageName]]]; 
```

如果适用，iOS 会自动附加“@2x”。

您可以在图像名称的高度之后省略“h”，但我认为模拟默认图像的 iOS 约定很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-28T15:42:19.087

我知道这是一个旧线程，但我在使用 iPhone 6/6+ 的新屏幕尺寸时遇到了问题。

我所做的是对不同的图像文件使用这个命名约定：

*   **如果@1x 小型旧手机则**没有****
***   **@2x**适用于 iPhone 4*   **-568h@2x**适用于 iPhone 5*   **-667h@2x**适用于 iPhone 6*   **@3x**适用于 iPhone 6 Plus**

 **然后只需在项目中包含此 Gist 中的代码即可自动生成（全尺寸）图像： [https ://gist.github.com/kevindelord/fe2e691d06ab745fbb00](https://gist.github.com/kevindelord/fe2e691d06ab745fbb00)

你没有别的事可做。当您在代码中实例化图像时：

```
[UIImage imageNamed:@"background.png”]; 
```

Gist 中的分类类将`automatically`创建与当前设备对应的图像。

在 CocoaDocs上记录了一个用于[UIImage+Autoresize](https://github.com/kevindelord/UIImage-Autoresize)[的](http://cocoadocs.org/docsets/UIImage+Autoresize)Pod 。**

# java - Channel.read 返回 -2

> ID：13170312
> 
> 赞同：1
> 
> 时间：2012-11-01T02:56:56.937
> 
> 标签：java, sockets, stream, nio

我正在使用 Java NIO 进行套接字操作。在过去使用流时，`read`调用（您正在读取字节数组，或在本例中为 a `ByteBuffer`）返回从流中读取的字节数，如果流已关闭，则返回 -1。所以你基本上可以做到

```
while(channel.read(buffer) != -1){
  //do stuff
} 
```

但是，我注意到我正在杀死我的服务器。当我添加一些日志语句时，我注意到`read()`调用在流的末尾返回 -2。根据文档：

> *返回：读取的字节数，可能为零，如果通道已到达流尾，则为 -1*

以前有人经历过吗？我将代码更改为在值 >0 上循环，但我想确保我了解发生了什么。

# ruby-on-rails - 用于更新或创建子句的更好的 Rails 代码？

> ID：13170314
> 
> 赞同：2
> 
> 时间：2012-11-01T02:57:03.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

代码有异味，我确定我缺少一个帮手来进行简单的更新或创建如下代码段的查询：

```
 @user_answer = current_user.user_answers.find_by_question_id(params[:a_question])
  if @user_answer.nil?
    @user_answer = current_user.user_answers.build({ :answer_id => params[:an_answer] , :question_id => params[:a_question] })      
    @user_answer.save  
  else
    @user_answer.update_attributes(:answer_id => params[:an_answer])
    @user_answer.save 
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T03:15:19.407

您可能正在寻找`find_or_initialize_by`方法。例如：

```
@user_answer = current_user.user_answers.find_or_initialize_by_question_id(params[:a_question])
@user_answer.answer_id = params[:an_answer]
@user_answer.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:15:25.180

怎么样，

```
@user_answer = current_user.user_answers.find_or_create_by_question_id(params[:a_question]) 
```

这将避免显式保存

# java - 在没有 JRuby 的 WAS 中运行 Rake 任务

> ID：13170317
> 
> 赞同：0
> 
> 时间：2012-11-01T02:57:11.430
> 
> 标签：java, ruby-on-rails, jruby, warbler

相关：[在没有安装 jruby 的情况下在 tomcat 上执行 rake 任务](https://stackoverflow.com/questions/6210222/executing-rake-tasks-on-an-exploded-war-on-tomcat-without-jruby-being-installed)

我正在尝试在没有安装 JRuby 的 Tomcat 服务器中运行 rake 任务。我正在使用莺创建一个战争文件。

使用链接问题的答案，我运行：

```
java -cp lib/jruby-core*.jar:lib/jruby-stdlib*.jar org.jruby.Main -S rake -T 
```

这让我得到了错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/jruby/Main
Caused by: java.lang.ClassNotFoundException: org.jruby.Main
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217) 
```

`ls lib`得到我：

```
ems-gems-activerecord-jdbc-adapter-1.2.2-lib-arjdbc-jdbc-adapter_java.jar
gems-gems-jdbc-sqlite3-3.7.2-lib-sqlite-jdbc-3.7.2.jar
gems-gems-jruby-jars-1.6.8-lib-jruby-core-1.6.8.jar
gems-gems-jruby-jars-1.6.8-lib-jruby-stdlib-1.6.8.jar
gems-gems-jruby-rack-1.1.10-lib-jruby-rack-1.1.10.jar
gems-gems-json-1.7.5-java-lib-json-ext-generator.jar
gems-gems-json-1.7.5-java-lib-json-ext-parser.jar
gems-gems-therubyrhino_jar-1.7.4-jar-rhino-1.7R4.jar
gems-gems-warbler-1.3.6-lib-warbler_jar.jar
jruby-core-1.6.8.jar
jruby-rack-1.1.10.jar
jruby-stdlib-1.6.8.jar
ojdbc6.jar 
```

打开`jruby-core-1.6.8.jar`文件，我可以看到确实有一个`org/jruby/Main.class`文件。

从文件列表中可以看出，没有`jruby-complete`jar 文件，所以我无法从[https://stackoverflow.com/a/9982556/684934运行命令](https://stackoverflow.com/a/9982556/684934)

我做错了什么，现在有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:32:25.130

2 个月前我正在处理一个类似的问题，所以事情可能已经改变，但我需要在我的类路径中包含所有 jar，必须使用 bin 存根，并且必须设置 GEM_HOME 才能让一切正常工作。它可能更简单，但你引用的帖子对我也不起作用。

我实际上已经安装了 jruby，（但我只是用它来构建连接的类路径），所以我的设置是这样的：

```
cd /path/to/application/
export GEM_HOME=/path/to/application/gems
export CLASSPATH=$(jruby -e 'puts Dir["lib/*.jar"].join(":")')

RAILS_ENV=production java -cp $CLASSPATH org.jruby.Main bin/rake -T 
```

同样有用的是，[jruby-jars](https://rubygems.org/gems/jruby-jars) gem 可以包含在您的 gemfile 中以设置 warbler 包含的 jruby 版本（我使用`gem 'jruby-jars', '1.7.0.preview2'`的是 1.7.0 尚未发布）

# api - Zend_Rest_Controller 中的 POST 参数为空

> ID：13170324
> 
> 赞同：0
> 
> 时间：2012-11-01T02:58:08.587
> 
> 标签：api, zend-framework, post, zend-rest

我正在使用 Zend_Rest_Controller 来实现一个 RESTful API。

GET 操作工作正常，例如当我发出`/user/id/1`请求`:id`时，当我使用`$request->getParams()`.

但是，当我向 发出 POST 请求时`/user`，它`postAction()`被调用得很好，但`$request->getParams()`or中没有 POST 数据`$request->getPost()`。`$request->getRawBody()`表明他们可以很好地到达服务器。

ZF 是否有任何理由不使用这些参数填充请求对象？我如何访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:05:00.880

仔细检查请求的 http 标头上的内容类型。应该是多部分/表单数据。

# security - MDX 表达式限制对度量值组的访问

> ID：13170326
> 
> 赞同：1
> 
> 时间：2012-11-01T02:58:19.057
> 
> 标签：security, mdx, role, ssas-2008

假设我有一堆度量值，我希望某些人无法看到（反之亦然，只允许他们看到）我会在 SSAS 角色中添加什么样的 MDX 表达式？

我可以通过 USERNAME 函数获取用户身份。

甚至可能吗？

我可以轻松地构建基于维度的安全表达式，但我看不出如何可以类似地减少度量维度访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:41:08.230

这是角色文件中的单元格数据选项卡。

当您启用读取权限时，将不允许用户访问多维数据集中的单元格数据。

在这个地方，您必须通过提供正确的 MDX epression 来定义用户能够看到的度量值集。

[范围](http://msdn.microsoft.com/en-us/library/ms145515.aspx)声明将为您提供信息以编写用于定义数据集的 MDX 表达式。（**SCOPE 用于完全不同的目的，不应用于权限 - 仅供参考所需的 MDX 表达式**）

# c++ - 自定义 C++ Linux 应用程序中的 Google 地球

> ID：13170328
> 
> 赞同：6
> 
> 时间：2012-11-01T02:58:37.797
> 
> 标签：c++, google-maps, kml, google-earth, google-earth-plugin

我正在为 Linux 编写的 C++ 应用程序中探索使用 Google 地球。此应用程序将以非常高的分辨率（约 6000 x 3000 像素）运行。我对 Google 地球在高分辨率和 Linux 环境下的图形性能充满信心。我的问题是：将 Google 地球集成到我的 Linux C++ 应用程序中的最佳方式是什么？我已经阅读了有关 Google Earth COM API 的信息（现在它已经过时了）。将 Google 地球集成到我的应用程序中的首选方法是什么？

集成细节：我希望 Google Earth 在“背景”中覆盖整个 6000 x 3000 分辨率，并带有一个与地球交互的小型“控制框”覆盖。

感谢您的回复！

kf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:07:22.897

据我所知，只有两个 API 可以访问 Google 地球内容 - Javascript API 和基于 Windows 的 C# API（它们似乎只是调用 Javascript API 的包装类。）我不知道，但我相信Google Maps API 也使用 Javascript。

鉴于您在 Linux 中并使用 C++，我的建议是在您的应用程序中嵌入浏览器并创建 C++ 包装器以进行所需的 Javascript 调用（如 Windows C# API。）

如果您启动一个开源项目，其他人可能愿意帮助您创建 C++ 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:47:46.010

据我所知，您不能在 Linux 中使用 Google Earth Api。Google 地球提供的唯一 API 是 Javascript API（仅适用于 MacO 或 Windows，但不适用于 Linux）和 COM API（现在似乎已死）即使在 ChromeOS 中也无法使用

# java - 当我从服务器获取 JSON 字符串时，JSONArray 不起作用

> ID：13170333
> 
> 赞同：5
> 
> 时间：2012-11-01T02:59:39.523
> 
> 标签：java, android, json

我已经查找了一些答案，但不确定为什么我的完全失败了......

代码看起来像这样

```
 HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        String json = EntityUtils.toString(httpEntity);

        //Convert to JsonArray
        JSONArray jsonArray = new JSONArray(json);

        Log.i(DEBUG_TAG, Integer.toString(jsonArray.length()));

        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            Log.i(DEBUG_TAG, jsonObject.getString(KEY_ID));

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            // adding each child node to HashMap key => value
            map.put(KEY_ID, jsonObject.getString(KEY_ID));
            map.put(KEY_TITLE, jsonObject.getString(KEY_TITLE));
            map.put(KEY_ARTIST, jsonObject.getString(KEY_ARTIST));
            map.put(KEY_DURATION, jsonObject.getString(KEY_DURATION));
            map.put(KEY_VOTECOUNT, jsonObject.getString(KEY_VOTECOUNT));
            map.put(KEY_THUMB_URL, jsonObject.getString(KEY_THUMB_URL));
            map.put(KEY_GENRE, jsonObject.getString(KEY_GENRE));

            //Adding map to ArrayList
            if (Integer.parseInt(jsonObject.getString(KEY_VOTECOUNT)) == -1){
                //If VoteCount is -1 then add to header
                headerList.add(map);
            }else {
                songsList.add(map);
            }
        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

当我在 String json 上运行 logcat 时，它似乎显示了正确的信息，有点像这样......

```
 {
"userdata": [
    {
        "id": "8",
        "title": "Baby One More Time",
        "artist": "Britney Spears",
        "duration": "03:24:00",
        "votes": "0",
        "thumb_url": "http://api.androidhive.info/music/images/dido.png",
        "genre": null
    },
    {
        "id": "2",
        "title": "As Long As You Love Me",
        "artist": "Justin Bieber",
        "duration": "05:26:00",
        "votes": "0",
        "thumb_url": "http://api.androidhive.info/music/images/enrique.png",
        "genre": "Rock"
    }
]
} 
```

和logcat

```
JSONArray jsonArray = new JSONArray(json); 
```

告诉我 jsonArray.length()

> 10-31 22:57:28.433: W/CustomizedListView(26945): 错误！无效索引 0，大小为 0

请告诉我

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:09:12.277

问题是它不是 JSON 数组。它是一个 JSON 对象，JSON 数组以 [ 开头并以 ] 结尾

![在此处输入图像描述](../Images/aa753fbcfd0c978a588bd5fde0ebea54.png)

JSON 对象以 { 开头并以 } 结尾

![在此处输入图像描述](../Images/191b2cc533bb078ee4141ac6529ceddd.png)

如需进一步参考，您可以在此处查看 -> [http://www.json.org/](http://www.json.org/)

要修复它，您应该首先将您的 json 字符串转换为 json 对象，然后解析 json 对象以获取 json 数组

这是从 jsonobject 解析 json 数组的示例

```
void ParseAPIWithJSON()
    {
     String readGooglePlace = readGooglePlaceAPI();
     try
     {

      InputStream is = new ByteArrayInputStream(readTwitterFeed.getBytes("UTF-8"));
      byte [] buffer = new byte[is.available()];
      while (is.read(buffer) != -1);
      String jsontext = new String(buffer);
      JSONObject entries = new JSONObject(jsontext);

      JSONArray hasil = entries.getJSONArray("results");
      results = hasil.getString(o);
      Log.i("TAG", results);
      int i;
      Log.i("TAG", Integer.toString(hasil.length()));
      numberofPlaces = hasil.length();
      for (i=0;i<hasil.length();i++)
      {
       JSONObject data = hasil.getJSONObject(i);
       namePlaces[i] = data.getString("name");
       Log.i("TAG", namePlaces[i]);
       JSONObject geometry = data.getJSONObject("geometry");
       JSONObject location = geometry.getJSONObject("location");
       latPlaces[i] = location.getDouble("lat");
       longPlaces[i] = location.getDouble("lng");
       Log.i("TAG", "Lat : "+latPlaces[i]+" Long : "+longPlaces[i]);
         }

     }
     catch (Exception je)
     {
      Log.e("TEST1", je.getMessage());
     }
    } 
```

从整个代码中，我认为您只需要了解这一点

```
 String jsontext = new String(buffer);
 JSONObject entries = new JSONObject(jsontext);
 JSONArray hasil = entries.getJSONArray("results"); 
```

转换字符串->jsonobject->jsonarray->获取值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:57:57.813

尝试这个。

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(url);
    String response_string;

    try {
        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

        HttpEntity httpEntity = response.getEntity();

        InputStream is = httpEntity.getContent();
        InputStreamReader isr = new InputStreamReader(is);

        char[] arr = new char[8*1024]; // 8K at a time
        StringBuffer buf = new StringBuffer();;
        int numChars;

        while ((numChars = isr.read(arr,0,arr.length))>0)
        {
            buf.append(arr,0,numChars);
        }

        response_string = buf.toString();

    } 
    catch (ClientProtocolException e) 
    {
        response_string = "Network Error : " + e.getMessage();
        e.printStackTrace();
    } 
    catch (IOException e) 
    {
        response_string = "Network Error : " + e.getMessage();
        e.printStackTrace();
    }
    catch(Exception e)
    {
        response_string = "Network Error : " + e.getMessage();
        e.printStackTrace();
    }

 JSONArray jsonArray = new JSONArray(response_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:27:30.747

在您的情况下，JSON 是从 jsonobject 而不是 jsonArray 开始的，所以首先您要声明 jsonobject 而不是 jsonarray。

```
 try {

        JSONObject jsonObject = new JSONObject();
        JSONArray jsonArray = jsonObject.getJSONArray("userdata");

        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonUserdata = jsonArray.getJSONObject(i);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            // adding each child node to HashMap key => value
            map.put(KEY_ID, jsonUserdata.getString(KEY_ID));
            map.put(KEY_TITLE, jsonUserdata.getString(KEY_TITLE));
            map.put(KEY_ARTIST, jsonUserdata.getString(KEY_ARTIST));
            map.put(KEY_DURATION, jsonUserdata.getString(KEY_DURATION));
            map.put(KEY_VOTECOUNT, jsonUserdata.getString(KEY_VOTECOUNT));
            map.put(KEY_THUMB_URL, jsonUserdata.getString(KEY_THUMB_URL));
            map.put(KEY_GENRE, jsonUserdata.getString(KEY_GENRE));

        }

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

有关更多信息，请访问链接：

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T03:28:46.323

您需要更换：

```
JSONArray jsonArray = new JSONArray(json); 
```

和

```
JSONArray jsonArray = new JSONObject(json).getJSONArray("userdata"); 
```

# linux - 读取 entropy_avail 文件似乎消耗熵

> ID：13170334
> 
> 赞同：9
> 
> 时间：2012-11-01T02:59:43.487
> 
> 标签：linux, entropy

这个问题在这里[http://www.gossamer-threads.com/lists/linux/kernel/1210167](http://www.gossamer-threads.com/lists/linux/kernel/1210167)被问到了，但我没有看到答案。

AFAIK /proc/sys/kernel/random/entropy_avail 应该返回可用熵的大小，但不应该消耗它。至少我看不出有什么理由。

但是，我已经注意到与 OP 相同的事情至少一年了，现在我快速连续执行

```
% cat /proc/sys/kernel/random/entropy_avail 
3918
% cat /proc/sys/kernel/random/entropy_avail
3447
% cat /proc/sys/kernel/random/entropy_avail
2878
% cat /proc/sys/kernel/random/entropy_avail
2377
% cat /proc/sys/kernel/random/entropy_avail
1789
% cat /proc/sys/kernel/random/entropy_avail
1184
% cat /proc/sys/kernel/random/entropy_avail
577
% cat /proc/sys/kernel/random/entropy_avail
161
% cat /proc/sys/kernel/random/entropy_avail
133
% cat /proc/sys/kernel/random/entropy_avail
171 
```

过了一会儿，我做了同样的事情，结果相同，所以我很确定熵的消耗是由 cat 命令引起的。

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T03:37:51.783

在这里找到答案[http://blog.flameeyes.eu/2011/03/entropy-broken](http://blog.flameeyes.eu/2011/03/entropy-broken)

启动一个进程会消耗熵

# wso2 - wso2什么时候支持bpmn 2.0

> ID：13170335
> 
> 赞同：4
> 
> 时间：2012-11-01T02:59:45.653
> 
> 标签：wso2, bpel, bpmn

我只是想知道 WSO2 何时计划在流程引擎中支持 BPMN 2.0？

我希望这是一个优先事项，因为它比构建业务流程的 BPEL 具有更好的标准基础。

这会是 BPEL 流程引擎的替代品/替代品还是与 BPEL 流程引擎一起使用？

问候

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:10:34.307

对 BPMN 2.0 的支持已经在路线图中。BPEL 和 BPMN 都用于描述和执行业务流程，您可以自由选择使用哪种表示法。BPEL 非常适合对某些类型的流程进行建模，而 BPMN 非常适合对其他类型的流程进行建模，或者有时您可以在单个组合中进行混合和匹配。

WSO2 BPS 执行使用 WS-BPEL 2.0、BPEL4WS 1.1 编写的业务流程，并且它还支持具有人工交互的工作流（WS-Human Task 1.1、BPEL4People 1.1）。

更多信息[http://docs.wso2.org/wiki/display/BPS300/BPS+Features](http://docs.wso2.org/wiki/display/BPS300/BPS+Features)

谢谢

蒂利尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-01T13:03:24.100

我遇到了有关 WSO2 Business Process Server **3.5.0**未来版本的文档，它是当前发布版本 (3.2.0) 的后续版本。

它说 BPMN 支持随 3.5.0 一起提供：[https ://docs.wso2.com/display/BPS350/About+this+Release](https://docs.wso2.com/display/BPS350/About+this+Release)

似乎他们将**activiti**业务流程引擎与 WSO2 BPS 集成：[https ://docs.wso2.com/display/BPS350/Managing+BPMN](https://docs.wso2.com/display/BPS350/Managing+BPMN)

# assembly - 关于代码中MIPS指令的问题

> ID：13170336
> 
> 赞同：1
> 
> 时间：2012-11-01T03:00:02.500
> 
> 标签：assembly, mips

我对下面代码中的几个 MIPS 指令有疑问
1.`addi`是算术指令，它的目的是什么？
2\. 为什么and`nop`后面有一个s，后面有多个s ？ 谢谢 ！`j``beq``nop``addi`

```
if(a==b)  x=3; /* simple C code */
else      x=4;
y=5;  

       lw   $1,a       # possible unoptimized assembly language
       lw   $2,b       # no ($0) shown on memory access
       nop             # wait for b to get into register 2
       nop             # wait for b to get into register 2
       beq  $1,$2,lab1
       nop             # branch slot, always executed *********
       addi $1,4       # else part
       nop             # wait for 4 to get into register 1
       nop             # wait for 4 to get into register 1
       sw   $1,x       # x=4;
       j    lab2
       nop             # branch slot, always executed *********    
lab1:  addi $1,3       # true part  
       nop             # wait for 3 to get into register 1
       nop             # wait for 3 to get into register 1
       sw   $1,x       # x=3;  
lab2:  addi $1,5       # after if-else, always execute
       nop             # wait for 5 to get into register 1
       nop             # wait for 5 to get into register 1
       sw   $1,y       # y=5; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:47:32.733

addi 是“添加立即数”，它将立即数（常量，整数）添加到寄存器的内容。其他添加变体是使用寄存器添加寄存器。

从 mips 的角度来看，addi 之后的 nops 和描述完全没有意义。Mips 很好地用于教育目的，您正在使用或正在教授的特定实现可能需要时间让 addi 指令解码和执行并将结果存储到寄存器文件，然后该寄存器可以用作另一条指令的输入。通常，mips 核心（或任何现代流水线处理器）将阻止下一条指令或使用其他解决方案来缩短作为下一条指令输入的一条指令的结果。

它不仅是 addi，而且是 lw，您可以在其中看到这些 nop 用于延迟时间，正如评论所说的那样，将结果存储在寄存器中。

至少要考虑基本步骤，获取、解码、执行、存储结果。即使真正的 mips 不需要，这段代码似乎也允许至少其中一些步骤完成。

在分支之后有延迟槽是非常重要的事情（当然其他人会这样做，但它比常见的更罕见）。最简单的方法是在每个分支或跳转后放一个 nop 并浪费循环。最终，您将了解何时可以将其中一条指令放在分支之前并将其放在之后，否则如果找不到则使用 nop。

一般来说，代码看起来不错。为了使 addi 指令工作以使代码代表 C 代码，addi 确实需要使用始终为零的寄存器 0。Addi 接受一个寄存器，然后立即将它们加在一起，然后将结果放入另一个寄存器中，一个 addi 有两个寄存器，一个常量...您拥有的代码仅显示一个寄存器。对于该代码中所有 addi 的使用，如果您这样想的话：

```
addi $1,4 
changes to 
addi $1,$0,4
register $0 is always zero so this instruction really means
$1 = 0 + 4 = 4
$1 = 4 
```

我从正式的角度和机器代码的角度了解 mips 指令，也许 addi $1,4 是代表更正式的 addi $1,$0,4 的快捷方式。汇编代码然后检查该指令的机器代码，您可能会看到两个寄存器 $1 和 $0 以及立即数 4。

Mips 没有 mov 指令，您可以在其中一次移动整个寄存器大小的立即数。lui 指令用于在寄存器的上半部分放置位，在下半部分放置零。Lui 后跟一个 addi 或一个 ori 可以用作一个团队来加载立即数。或者，如果高位为零，则可以使用带有寄存器 0 ($0) 的 addi 或 ori 在单个指令中设置低位。为了让这个 asm 表示 C 代码，必须是后者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:17:22.397

我不知道 MIP 汇编器我猜如下（在阅读了 Wiki 文章[MIPS Architecture](http://en.wikipedia.org/wiki/MIPS_architecture)之后）

1.  作者知道 a = 0，因此 $1 = 0，因此 addi $1, 4 将 $1=4 设置为 x 为 sw 做好准备。
2.  NOP 没有意义——除非作者知道指令是并行的，因此插入时钟周期等待以确保前面的指令完成。

代码是否有更多上下文（即 x 和 a、b 等的设置）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T22:12:33.367

在普通的 MIPS 汇编程序中，`addi $1,4`是 的简写`addi $1,$1,4`，即 $1 加 4。将常量加载到寄存器中的正常速记是`li $1,4`汇编程序通常翻译成的`ori $1,$0,4`。（寄存器 $0 始终包含零。）

讲师的示例似乎不正确，除非`a`已知始终为零。在这种情况下，有更好的方法来实现此代码。

# c++ - 对类中的变量感到困惑

> ID：13170339
> 
> 赞同：0
> 
> 时间：2012-11-01T03:00:26.120
> 
> 标签：c++, sdl

我对课程有点困惑，希望有人能解释一下。

我正在制作一门课程来为游戏菜单创建按钮。有四个变量：

`int m_x` `int m_y` `int m_width` `int m_height`

然后我想在类中使用渲染函数，但我不明白如何在类中使用 4 个 int 变量并将其传递给类中的函数？

我的课是这样的：

```
class Button
{
private:
    int m_x, m_y;            // coordinates of upper left corner of control
    int m_width, m_height;   // size of control

public:
Button(int x, int y, int width, int height)
{
   m_x = x;
   m_y = y;
   m_width = width;
   m_height = height;
}

void Render(SDL_Surface *source,SDL_Surface *destination,int x, int y)
{
    SDL_Rect offset;
    offset.x = x;
    offset.y = y;

    SDL_BlitSurface( source, NULL, destination, &offset );
}

} //end class 
```

我感到困惑的是如何将创建的值`public:Button`传递给`void render`我不完全确定我是否正确，如果到目前为止我有它的纯粹运气，因为我仍然有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:02:52.953

在深入了解复杂的编程项目之前，您可能需要花一些时间学习 C++。

要回答您的问题，在构造函数 ( `Button`) 中初始化的变量是类实例的一部分。因此它们在任何类方法中都可用，包括`Render`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:09:52.720

也许一个例子会有所帮助：

```
#include <iostream>
class Button
{
private:
    int m_x, m_y;            // coordinates of upper left corner of control
    int m_width, m_height;   // size of control

public:
    Button(int x, int y, int width, int height) :
        //This is initialization list syntax. The other way works,
        //but is almost always inferior.
        m_x(x), m_y(y), m_width(width), m_height(height)
    {
    }

    void MemberFunction()
    {
        std::cout << m_x << '\n';
        std::cout << m_y << '\n';
        //etc... use all the members.
    }
};

int main() {
    //Construct a Button called `button`,
    //passing 10,30,100,500 to the constructor
    Button button(10,30,100,500);
    //Call MemberFunction() on `button`.
    //MemberFunction() implicitly has access
    //to the m_x, m_y, m_width and m_height
    //members of `button`. 
    button.MemberFunction();
} 
```

# ruby-on-rails - Heroku db:pull db:push Taps 加载错误 sqlite3

> ID：13170343
> 
> 赞同：0
> 
> 时间：2012-11-01T03:00:58.260
> 
> 标签：ruby-on-rails, sqlite, postgresql, heroku, gem

尝试通过这样做来推或拉heroku的数据库：

```
heroku db:pull OR heroku db:push 
```

我得到了下一个输出

```
!    Taps Load Error: no such file to load -- sqlite3
!    You may need to install or update the taps gem to use db commands.
!    On most systems this will be:
!    
!    sudo gem install taps 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:00:58.260

有两种方法可以做到这一点。第一个是在项目的 gem 文件中添加下一行（如果您使用 postgres db 则无关紧要）

```
gem 'sqlite3' 
```

另一个解决方案是查看`taps`gem的源代码`path/to/taps/lib/taps`并从文件中删除`cli.rb`第 10 行：

```
require 'sqlite3' 
```

# java - 如何在不使用引号字符的分隔文件上使用 Super CSV？

> ID：13170345
> 
> 赞同：3
> 
> 时间：2012-11-01T03:01:15.170
> 
> 标签：java, csv, supercsv

我正在使用 Super CSV 解析管道（“|”）分隔的文件。该文件不使用“文本限定符”或 Super CSV 所称的引号字符。问题是 Super CSV[需要](http://supercsv.sourceforge.net/apidocs/org/supercsv/prefs/CsvPreference.Builder.html#CsvPreference.Builder%28org.supercsv.prefs.CsvPreference%29)引号字符。我看不到跳过这个或提供空字符的方法。目前我正在传递一些希望永远不会出现在输入文件中的古怪 unicode 字符。

有没有办法让 Super CSV 在不使用引号字符的情况下解析文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:31:41.487

我猜您无法控制要解析的文件的编写方式，并且它永远不会在数据中包含嵌入的管道字符？

我能看到的解决方案是：

*   使用永远不会出现在文件中的字符（如您所建议的那样）。这有点狡猾，但会起作用。

*   在构建 Reader 时提供您自己的 Tokenizer（您可以复制[Super CSV 实现](http://supercsv.sourceforge.net/xref/org/supercsv/io/Tokenizer.html)并删除引用功能）。

*   向我们发送[功能请求](https://sourceforge.net/p/supercsv/feature-requests/)，我们会考虑添加它。这可能只是添加另一个在解析时禁用引用的首选项的情况。

我会考虑一下，看看我是否能想到实现这一目标的最佳方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-07T15:21:51.260

使用分隔符作为引号字符。例如：

```
CsvPreference cp = new CsvPreference('|'/*quote char*/,'|'/*delimiter char*/, "\n"); 
```

# vb.net - 使用 VB.NET 在动态创建的 Excel 工作表中命名范围

> ID：13170347
> 
> 赞同：2
> 
> 时间：2012-11-01T03:01:48.393
> 
> 标签：vb.net, excel, range

我想在动态创建的 Excel 工作表中命名一个范围。我尝试关注但它不起作用。

```
With oWB
  For intCount = 1 To wbnum1
    .Worksheets.Add(After:=.Worksheets(intCount + 1)) 
    .Sheets(intCount + 1).Name = "Sheet" & intCount.ToString()
    .Sheets(intCount + 1).Cells(19, 2).value = "Sheet" & intCount.ToString
    .Sheets(intCount+1).Range("A1:Z1")
    .Range.Name = "Numbers"
  Next 
```

这有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:01:16.553

您没有指定范围。

大概，你应该合并你的最后一行和倒数第二行：

```
.Sheets(intCount+1).Range("A1:Z1").Name = "Numbers" 
```

但是，从实验看来，以这种方式分配名称会创建工作簿级别的名称，从而导致在您遍历工作表后只有最后一个分配有效。

另一种/更安全的方法是通过工作表的名称集合将名称添加为工作表特定名称：

```
.Sheets(intCount+1).Names.Add "Numbers", .Sheets(intCount+1).Range("A1:Z1") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:35:41.947

```
Dim uniqueName as String = "A_NamedRangeName_" & i
Dim rnArea as Range = .ActiveSheet.Range(leftCol & startRow, rightCol & endRow)
Name name = .ActiveBook.Names.Add(uniqueName, rnArea) 
```

名称范围名称不能：
- 以数字开头
- 包括 , : ; 字符
- 是重复的名称，每个必须有一个唯一的名称
- 是一个保留的 Excel 函数名称

# php - PHP in_array 和如果检查不起作用

> ID：13170348
> 
> 赞同：0
> 
> 时间：2012-11-01T03:01:54.500
> 
> 标签：php

我有一个脚本和简单的 if 检查值是否在数组中。我似乎无法找出为什么 if 标记在数组中时运行。

```
else if (!in_array($type, $avatarformats)) {

$error .= '<div class="alert error">You\'re image is not a allowed format</div>';

unlink($_FILES['file']['tmp_name']);

} 
```

当脚本读取 $type 和 $avatarformats 时，它的 = 如下。

```
$avatarformats = Array ( [0] => .jpg [1] => .jpeg [2] => .png ) 

$type = .png 
```

if 标记在不应该运行时运行，因为 .png 在数组中。或者我不明白我在做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:14:35.023

我不确定您是如何确定类型的，但通常`['type']`来自`$_FILES`内容类型（例如`'image/jpeg'`），而不是文件名本身的扩展名。

要测试文件扩展名，您可以使用以下代码：

```
// get file extension (without leading period)
$ext = pathinfo($_FILES['file']['name'], PATHINFO_EXTENSION);

// ...
elseif (!in_array($ext, array('png', 'jpg', 'jpeg'))) {
    // error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:27:21.150

注意：使用exif_imagetype()，请阅读[http://www.php.net/manual/en/function.exif-imagetype.php](http://www.php.net/manual/en/function.exif-imagetype.php)

```
function image_allowed($imgfile) {
  $types = array(IMAGETYPE_JPEG, IMAGETYPE_PNG);
  return in_array(exif_imagetype($imgfile), $types);
} 
```

然后在你的代码中。

```
else if (!image_allowed($_FILES['file']['tmp_name'])) {

$error .= '<div class="alert error">You\'re image is not a allowed format</div>';

unlink($_FILES['file']['tmp_name']);

} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-01T03:15:49.033

我怀疑这正在返回 true，因为由于句号，`in_array()`该语句正在评估为 true。由于小数位，`!in_array($type, $avatarformats)`它正在将 的值评估为整数。`$type`

话虽如此，您有 2 个选项： 1）尝试从文件扩展名中剥离点，即“.png”到“png”，然后首先将其添加到数组中，然后进行测试。2）或将您的条件更改为以下内容：`else if (in_array($type, $avatarformats) == false) {`

`in_array()`是一种奇怪的野兽，我尽量避免它。isset() 是您的朋友，无论如何在大多数情况下都比 in_array 快得多。

# gis - 不确定如何处理多个纬度

> ID：13170351
> 
> 赞同：1
> 
> 时间：2012-11-01T03:02:03.393
> 
> 标签：gis, distance, latitude-longitude, geocode

我正在创建一个 web 应用程序，我想在其中根据纬度和经度按半径进行搜索。但是，如果用户只输入他们的城市和州，许多城市将匹配多个邮政编码，而这些邮政编码又将匹配多个纬度和经度点。我的问题是，处理多纬度的推荐方法是什么？取平均值是一种选择吗？我认为这会违反距离计算的原则..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:15:57.533

通常，当您只有一个纬度/经度点时，会执行基于半径的搜索。否则，如果您有多个点，那么它们一定会形成一个多边形。然后，您可以进行边界计算以确定给定点是否在多边形的边界内。您还可以在多边形之外设置阈值距离。

# java - 只有数组被修改

> ID：13170362
> 
> 赞同：0
> 
> 时间：2012-11-01T03:03:18.320
> 
> 标签：java, variable-assignment

这是我的代码，请在阅读问题之前查看它

```
 package ict201jansem2012;

public class Qn3b {

    public static void main(String[] args) {
        int a = 1;
        int b[] = {4,5};
        String s = "Good luck!";
        method1(b[1]);
        System.out.println("(1) b[0] = "+b[0]+"; b[1] = "+b[1]);
        method2(b);
        System.out.println("(2) b[0] = "+b[0]+"; b[1] = "+b[1]);
        method3(a);
        System.out.println("(3) a = " + a );
        method4(s);
        System.out.println("(4) s = " + s );
    }
    public static void method1(int b) {
        b = 7;
    }
    public static void method2(int[] b) {
        b[0] = 3;
    }
    public static void method3(int a) {
        a = 3;
    }
    public static void method4(String s) {
        s = "UniSIM";
    }
} 
```

输出：(1) b[0] = 4；b[1] = 5

(2) b[0] = 3；b[1] = 5

(3) a = 1

(4) s = 祝你好运！

所以我的问题是，作为学习程序员，这对我来说很有趣。int b 数组 0 的索引值已更改，但未更改其他变量，例如 String s 和 int a。在我运行这个程序之前，我大致认为变量会随着方法被调用而改变它们的值，这是因为方法被调用并且主方法变量如 a、s 和 b 数组被传递，然后它们正在修改。

那么简而言之，为什么 b 数组 0 的索引被改变而其他变量没有改变呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T04:08:52.787

因为你说你是一个初学者程序员，所以我会写一些文章来解释（或尝试解释）**到底**发生了什么。

这是因为您将参数传递给您的*method1* - *method4*方法

这些参数本身就是对其他对象的引用。

当您使用赋值运算符（一个等号）时，您会覆盖当前**作用域中**值的引用- 其中变量可以“看到”。

***在您的代码中：***

在*method1*的情况下，您正在创建一个新引用，该变量只能在该范围内看到。也就是说，当您接着执行*b = << expr >> 时，您正在为**method1*范围内的变量 b 分配值，而不是*主*范围内的 b 。*您的method3*和*method4*方法也是如此，您正在为该范围**内**的各个变量分配一个新值，因为您正在创建新引用而不是更改原始对象。

但是，*method2*的代码行为不同，这是因为您正在改变该代码中的对象。您正在直接更改对象 - 而不是在该范围内创建新引用。

考虑下面的代码

```
int[] array = new int[] {1, 2};

public void test()
{
    method1(array);
    System.out.println(array[0] + ", " + array[1]);
    method2(array);
    System.out.println(array[0] + ", " + array[1]);
}

//  because we are working with objects, the identifier, can be different to the arrays identifier
//  in this case, I've chosen to use 'a' instead of 'array' to show this
public void method1(int[] a)
{
    //  this mutates the array object
    a[0] = 2;
}

public void method2(int[] array)
{
    //  this overwrites the method2.array but not the global array
    array = new int[] { 1, 2, 3 };
} 
```

我们创建一个新数组，在全局范围内具有标识符“数组”。（在 Java 中，这将是类自己的范围）

在*method1*中，我们接受一个参数，它是作为全局数组对象传递的同一个对象，所以当我们改变它时，两个对象都会改变。所以，第一个打印语句将是

“2、2”

数组 [0] 已更改的位置

注意因为我们处理的是对象，所以变量的“名称”并不重要——它仍然是对同一个对象的引用

然而，在*method2*中，我们接受一个参数，就像在*method1*中一样，但这次我们使用赋值运算符将该变量分配给它当前所在范围内的新值 - 所以全局*数组*没有改变，所以我们仍然打印出

“2、2”

对于初学者程序员，我会亲自编写一些测试程序，让您充分了解变量和作用域的工作原理。

但是要知道，每次创建新的代码**块时，都会创建一个新的****作用域**，该作用域的局部变量只能在该作用域及其下方的变量中看到。

例如：

```
public void test()
{
    int a = 5;
    method1(a);
    System.out.println(a);  //  prints 5
}

public void method1(int a)
{
    // a is only viewable in the method1 scope
    //  and any scopes below it, that is, any scopes created within method1
    //  and since we use an assignment operator, we assign method1.a a value, not global 'a' a value
    a = 123;
    if (true)
    {
        // this is a new scope, variables created in this block cannot be seen outside it
        //  but can see variables from above it

        System.out.println(a);  // prints 123
    }
} 
```

*在这里，我们在 if 语句中的method1*内部创建了一个新范围，可以看到它上面的 a。但是，因为*method1*和*test*的作用域都是独立的，所以当我们使用赋值运算符时，我们将*a*的值赋给了本地作用域。所以*a*在*test*和*method1上都不同*

我希望你现在能更好地理解。我不太擅长传达东西，但如果它对理解范围有一点帮助，我做得很好，另外，这很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T03:10:25.710

Java 是按值传递的，但大多数值（不是原始的所有值，在本例中为 int[] 和字符串）都是引用，这意味着它们的行为类似于按引用传递。

这是一篇不错的文章：http: [//javadude.com/articles/passbyvalue.htm](http://javadude.com/articles/passbyvalue.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T03:08:51.590

`arrays`是特殊类型的对象，内存将在 HEAP 上分配。当您将数组作为参数传递给方法时，它将作为参考值（参考的副本）传递。

这意味着初始`b`并且这个新的引用指向同一个对象。除非新的引用指向另一个对象，否则对这个引用的更改将反映在同一个对象上。这就是为什么您看到价值反映在原始阵列上的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T03:17:46.907

所有的值都传递给了内部方法，但内部方法什么也没返回。但是，method2 修改了传递给它的数组的内部值，因此内部值在返回时出现了修改。

请注意，method2 是唯一一个您*没有*分配给变量（参数）本身，而是分配给其引用被传入的对象*的元素的方法。*

修改对对象的引用（指针）和修改对象本身之间有一个关键的区别。

# javascript - 如何通过更改菜单上的图像来突出显示当前页面？

> ID：13170366
> 
> 赞同：0
> 
> 时间：2012-11-01T03:04:16.373
> 
> 标签：javascript, jquery, css, asp.net-mvc-3

这是我的 div 导航中的一行：

```
<a href="/Home/ShoppingCart"><img class="swap5" src="/Static/Images/Meny_normal_06.png"  alt="" /></a> 
```

当有人单击此图像时，他们将被重定向到另一个页面，我希望此图像交换到我的另一个较暗的图像，从而突出显示当前页面。

![在此处输入图像描述](../Images/8b94d8cea07a988c89c50e6e0c6d4514.png)

至

![在此处输入图像描述](../Images/cc43f50ba17206a487acdc3a4c5fccc3.png) <--- 突出显示我要更改的当前页面

这是我的jQuery：

```
<script type="text/javascript">
        $(document).ready(function () {
            $('.swap5').click(function () {
                $(this).attr('src', '/Static/Images/Meny_clicked_01.png');

         });  
        });
</script 
```

>

我意识到这不会这样做，因为当我被重定向到另一个页面时，新图像已经消失了..

我怎样才能顺利地做到这一点？我正在使用 MVC 3 顺便说一句

任何形式的帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:23:51.600

忘记 jquery，我可以使用 css 来完成。

`.active`在当前页面上使用一个类。

前任：-

1.  定义一个类

    .active{background:url(/image/activemenu.jpg);}

2.  使用当前页面上的类来突出显示导航。

    li> class="active"> a href="#"> ORDER /a> /li>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:08:16.183

您可以使用纯 javascript 来实现这一点。给图像元素一个 id，比如说“我”。做类似 document.getELmentById("me").setAttribute("src", "link to your other image"); 这

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:12:06.180

在这种情况下，您可以使用 cookie。单击按钮后，您可以将该信息存储在 cookie 中。

在下一页检查 cookie，如果存储了您期望的值，则替换重定向页面上的新图像..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T03:12:11.050

在您重定向到的视图而不是您重定向的页面上运行它怎么样？

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.swap5').attr('src', '/Static/Images/Meny_clicked_01.png');
    });
</script> 
```

# python - django没有反向匹配

> ID：13170367
> 
> 赞同：0
> 
> 时间：2012-11-01T03:04:25.793
> 
> 标签：python, django, web-applications

好的，我在这个问题上得到了一个好心人的帮助，想看看是否有人可以帮助这是我的代码。网址.py

```
urlpatterns = patterns('',

url(r'^venues/(?P<venue_id>\d+)/$','venues.views.venue', name='venue'), 
```

视图.py

```
def venue(request,venue_id):
venue= get_object_or_404(VenueProfile,
                           venue__pk=venue_id).select_related('venue')

return render_to_response('venues/venueprofile',{'venue',venue},
    context_instance=RequestContext(request)) 
```

模板

```
{% load url from future %}
{% for v in venues %}
    {% with ven=v.venue profile=v %}
<a href="{% url 'venue' venue_id=venue.pk %}">{{ven.name}}</a> 
```

现在，当我尝试使用它时，我得到 Reverse for 'venue' with arguments '()' 和关键字参数 '{'venue_id': ''}' not found。有人可以在这里帮助我吗，请记住我离开了输出一些代码，例如在视图中定义的 {{venues}} 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T04:23:40.863

您`venue`模板中的对象是无，因此它没有`pk`. 在您的模板中，您也没有传递任何`venues`对象。也许稍微简化你的代码会有所帮助：

稍微调整一下视图方法：

```
from django.shortcuts import render

def venue(request,venue_id):
    the_venue = get_object_or_404(Venue,pk=venue_id)
    return render(request,'venues/venueprofile',{'venue',the_venue}) 
```

您的模板：

```
{% load url from future %}
<a href="{% url 'venue' venue_id=venue.pk %}">{{venue.name}}</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:42:41.343

场地.pk 的值是空字符串，因为它不匹配你的正则表达式，它显示没有反向匹配问题。

```
{% load url from future %}
{% for v in venues %}
    {% with ven=v.venue profile=v %}
<a href="{% url 'venue' venue_id=venue.pk %}">{{ven.name}}</a> # Problem is that venue.pk is empty string 
```

> 使用参数 '()' 和关键字参数 '{'venue_id': ''}' 反转'venue' 在这里检查venue_id 的值是''。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:25:23.170

代替

```
{% url 'venue' venue_id=venue.pk %} 
```

和

```
{% url 'venue' venue_id=ven.pk %} 
```

# java - 方法参数

> ID：13170368
> 
> 赞同：1
> 
> 时间：2012-11-01T03:04:28.197
> 
> 标签：java

尝试编写一个程序来询问用户是否需要说明。如果用户输入，控制台可能会响应“请输入是或否答案”并重复该问题。

我很难列出方法 askYesNoQuestion 的方法参数。参数只是字符串是，字符串否？我也被困在如何让程序在有人进入后重复这个问题？我的代码对于我正在尝试做的事情看起来一般正确吗？

```
import acm.program.*;

public class Instructions extends ConsoleProgram{

    public void run(){
        String answer  = readLine("Would you like instructions? : ")
        {
            if (answer.equals("maybe")) {
                println ("Please enter a yes or no answer.");  
            }
        }
    }   

    private boolean askYesNoQuestion(String yes, String no ){

        if (askYesNoQuestoin ("would you like instructions? "))
            if (answer.equals("yes")) {
                return yes;
            } else {
                if (answer.equals("no"))
                    return no;
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:22:43.303

首先，传递问题，而不是答案（你还不知道答案；你只知道问题），所以你的方法应该如下所示：

```
private boolean askYesNoQuestion(String question) 
```

接下来，循环直到你得到一个是或否的回应：

```
private boolean askYesNoQuestion(String question) {
    println (question);
    while (true) {
         String answer = // read answer
         if (!answer.equalsIgnoreCase("yes") && !answer.equalsIgnoreCase("no")) {
             println ("Please enter a yes or no answer.");
         } else {
             return answer.equalsIgnoreCase("yes");
         }
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:14:01.543

由您决定如何做，但实际上您是在尝试将用户的字符串输入转换为更容易让 Java 使用的东西。

我建议`askYesNoQuestion()`将问题提出来，然后返回 true 表示是，false 表示否。如果你真的想处理“也许”，那么使用和 int（或者更好的是枚举）来处理响应。

```
boolean askYesNoQuestion(String question)
{
     while(true) {
     // print the question
     // get the answer
     // if answer.equals("yes") return true 
     // if answer.equals("no") return false
     // any other answer asks the question again
     }
     return false;
}

// call looks like
if (askYesNoQuestion("Do you want instructions?")) {
  // do instructions
}
// Do the rest of the app.
// 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:47:04.767

嗯……这里发生了很多事情。不要为此感到难过，但在这种状态下它不会工作 - 编译器会向你抛出很多东西。让我们一步一步来看看。

在我们看语法之前，让我们看一下程序流程。我们想做什么？根据您的描述，您希望完成以下任务：

*   让用户回答问题以获取说明。
*   如果他们回答是，则给他们指示并退出。
*   如果他们回答没有，则退出。
*   如果他们回答可能，请澄清他们应该只有是或否的答案，然后再问你的问题。

现在，我们可以看看语法来完成这个。一般来说，我们需要一种方法来捕获用户的响应，并使用它来决定下一步要做什么。 `readLine()`不是您要使用的（因为该方法不存在）；你会想要使用[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html). API 中的文档应该足以让您入门。

接下来，现在我们有了输入，如果用户没有回答是或否，我们需要一种重复的方法。您有一个选择 -`while`循环或`do...while`循环都可以。我们必须检查我们的条件是否满足，如果不满足，我们就继续。

第三，字符串“yes”不同于“Yes”和“YeS”和“YEs”。大小写对字符串很重要，因此比较它们的想法是[`equalsIgnoreCase()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29).

第四，被创建的方法应该只接受一个参数——响应是什么。在你真正开始工作之前，你不知道那会是什么——这是一个`if else-if else-if else`声明。我认为该方法没有理由自称。

最后，您不要在任何地方调用该方法`run`！您必须这样做，否则该方法的作用并不重要；只要它在语法上是正确的，如果它从未被调用，Java 会很乐意忽略它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T03:17:34.993

我不知道你的`readline`方法，但我认为它是有效的。所以你的`run`方法应该是：

```
public String run(){
   while(true) {
      String answer = readLine("Would you like instruction?: ");
      if (answer.equals("maybe") {
          System.out.println("Please enter a yes or no answer");
      }
      else {
          return answer;
      }
   }
} 
```

所以，当这个方法运行时，它会循环直到用户没有输入“也许”（并希望他们输入是或否）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T03:14:11.877

如果您使用的是 Java 7，则 Switch 语句现在支持字符串。我是说：

```
switch(inputString){
case "yes": /*do something */ break;
case "no": /*do something */ break;
case "maybe": /*do something */ break;
default: /*do something */ break;
} 
```

所以根据你的要求，你可以写相应的案例。例如，如果用户输入“可能”或“是”或“否”以外的其他内容（使用`case "maybe"`and `default`），您可以显示消息“输入是或否”。理想情况下，“也许”不是必需的。默认情况下用于处理此问题。

您可以将其包含在一个 do-while 循环中，并根据您的条件，选择`continue`或`break`

# sql - 将 DATE 字段与 GETDATE 的日期值进行比较的更简单方法？

> ID：13170371
> 
> 赞同：1
> 
> 时间：2012-11-01T03:04:53.627
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在表中有一个字段，`Event.EventDate`它是数据类型`DATE`，而不是`DATETIME`然后我有一个包含以下`WHERE`子句的视图：

```
WHERE e.EventDate >= CAST(CONVERT(VARCHAR(MAX), GETDATE(), 101) AS DATETIME) 
```

如您所见，我只是想获取`>=`今天的所有事件**date**。上面的代码有效，但很难看。我试过这个...

```
WHERE e.EventDate >= CONVERT(VARCHAR(MAX), GETDATE(), 101) 
```

... 和这个 ...

```
WHERE e.EventDate >= CONVERT(DATETIME, GETDATE(), 101) 
```

...但是那些没有用，他们给了我`>`今天的每一个活动的**日期**。但是，即使上述方法有效，它仍然很丑陋。

没有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T03:12:07.760

尝试：

`WHERE e.EventDate >= cast(getdate() as date)`

将 getdate() 转换为日期时间。这是 SQL Server 2008 中的一种简洁方式，可以去除 datetime 类型的时间部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:08:59.807

使用 Shan Plourde 的方法肯定更干净、更快捷，但对于更一般的情况，当你想将 a 舍`datetime`入到特定的时间间隔时，我使用

```
dateadd(dd,datediff(dd,0,[datetime column]),0) 
```

where`dd`代表日，可以用`mm`（月）、`hh`（小时）、`mi`（分钟）等替换。

如果你想花哨和四舍五入，比如 15 分钟的间隔，你可以使用

```
dateadd(mi, 
        -datepart(mi,[datetime column])%15,
        dateadd(mi,datediff(mi,0,[datetime column]),0)
        ) 
```

`%`模运算符在哪里。如果您不使用平均划分 60 的间隔，您将得到古怪的结果。

# android - Android中的地理围栏

> ID：13170374
> 
> 赞同：0
> 
> 时间：2012-11-01T03:05:04.547
> 
> 标签：android

我正在尝试在我的 android 应用程序中构建地理围栏。但是我不清楚这个想法。每当用户打开我的应用程序时，我想看看他是否在任何 AMC 剧院。我怎么做？我应该使用纬度经度值还是应该使用物理地址？如果我使用 lat lon 值，输出的准确性如何？如果我去物理地址，它的时间效率如何？我目前已经编写了一个代码，其中我对值进行了硬编码。但这不适用于真正的应用程序。我的应用程序可以跟踪用户坐标，但我不清楚如何使用这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:44:22.677

您需要使用精度非常低的纬度和经度（可能是 20 米或更小），并且只需查找卫星 GPS 坐标。如果设备获得卫星 GPS 定位，它将具有非常高的精度（有时接近 5m），并在此基础上执行您想要执行的任何任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:52:13.833

最好的办法是从 Google Places API 获取附近 AMC 剧院的纬度/经度坐标。计算到任何点的距离并使用阈值来确定您是否在建筑物的大致附近。地理定位点必然位于建筑物的边缘，而不是建筑物的中心（甚至可能在街道上），因此您不太可能只使用该点的简单半径。

对于地理围栏，最好的办法是扫描该地区的 WiFi 网络，如果有任何与您所需位置的属性相匹配，那么您就在其中。当然，祝你好运获得这些数据。确保用户在场的另一件事是在建筑物中放置 NFC 标签并让他们扫描标签。同样，这可能只有在您与 AMC 签订合同时才可行。二维码太容易复制了。任何人都可以随时拍照并扫描。

# javascript - 为什么我在调试这个文件时 chrome 会压缩我的 javascript 文件

> ID：13170376
> 
> 赞同：1
> 
> 时间：2012-11-01T03:05:06.840
> 
> 标签：javascript, google-chrome

我在本地有一些未压缩的 javascript 文件。当我用谷歌浏览器测试其中一个文件时，它会被chrome压缩，所以我不能用Chrome开发者工具调试这个文件，但同时其他一些js文件是正常的，可以调试。

谁能告诉我原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:31:02.857

将其作为答案，因为它最终成为问题。我的猜测是您的 javascript 文件中有非常规的行结尾，您的编辑器显示为换行符，但 Chrome 调试器没有。Chrome 不压缩任何东西。

# microdata - 如何将结构化数据添加到包含事件和事件评论的页面？

> ID：13170379
> 
> 赞同：2
> 
> 时间：2012-11-01T03:05:13.533
> 
> 标签：microdata, schema.org

我有一个显示事件的 HTML 页面。与事件一起有评论和汇总评级。

现在我想添加带有 schema.org 的结构化数据，以供搜索引擎提取。

项目类型[http://schema.org/Event](http://schema.org/Event)不支持属性“aggregateRating”或“review”。

我试图将不同的项目范围放在一起。我通过使用“itemReviewed”属性作为“itemid”的链接来链接它们：

```
<div itemid="#myevent" itemtype="http://schema.org/Event" itemscope>

    ....

    <dl itemtype="http://schema.org/AggregateRating" itemscope>
      <link href="#myevent" itemprop="itemReviewed">
      <meta content="4.5" itemprop="ratingValue">
      <meta content="6" itemprop="reviewCount">
      ...
    </dl>

    <dl itemtype="http://schema.org/Review" itemscope>
      <link href="#myevent" itemprop="itemReviewed">
      <p itemtype="http://schema.org/Rating" itemscope 
         itemprop="reviewRating">Rating: <img src="...">
         <meta content="4" itemprop="ratingValue">
       </p>
      ...
    </dl>

</div> 
```

[Google Rich Snippet Tool](http://www.google.com/webmasters/tools/richsnippets)不会抱怨。但在预览中它只显示一个评论项目。不显示活动日期或地点。不显示汇总评论。

我不知道这是否只是 Snippet Tool 的问题，或者真正的 Google 搜索是否提取了相同的内容。

你能告诉我如何改进我的标记吗？

itemid / link 的使用是否正确？

是否有任何具有 startdate、enddate 和 aggregateRating 和评论的架构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:05:44.257

我正在处理同样的问题。我发现的最佳解决方案是使用 Microformats。因此，您计算事件的平均评分（您希望在 Google 的丰富网页摘要中显示的评分）并执行以下操作：

```
<div itemid="#myevent" itemtype="http://schema.org/Event" itemscope class="hreview-aggregate">

    <h1 class="fn" itemprop="name">Event</h1>

    <div>
        Rated <span class="rating">3.5</span>/5 based on <span class="count">11</span> reviews
    </div>

    <dl itemtype="http://schema.org/AggregateRating" itemscope>
      <link href="#myevent" itemprop="itemReviewed">
      ...

</div> 
```

这应该够了吧。唯一的问题是你会得到警告 `Warning: If count is specified in review aggregate, page should contain reviews. Otherwise you may want to use votes. More information about aggregate reviews.`

# log4j - Log4j，基于 .getLogger("") 参数的动态文件名

> ID：13170380
> 
> 赞同：1
> 
> 时间：2012-11-01T03:05:31.497
> 
> 标签：log4j

我的应用程序控制任意数量的设备。我想拥有每个设备的日志文件。基本上，我希望能够调用`LogManager.getLogger(deviceId)`并记录相应的事情。

我在这里和其他网站上浏览了许多主题，但我仍然不太确定这是否可能。我不太确定是否应该扩展附加程序或记录器。

如何解决这一任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:13:13.990

一种解决方案，虽然不是最优的，但是在你的设备对象的构造函数中添加一个 fileappender：

```
String device = "thing"
Logger log1 = Logger.getLogger("org.path."+device);
log1.setAdditivity(false);
log1.addAppender(new FileAppender(new SimpleLayout(), "org.path."+device )); 
```

# php - preg_match php 正则表达式 guillemet

> ID：13170382
> 
> 赞同：0
> 
> 时间：2012-11-01T03:05:42.867
> 
> 标签：php, regex, preg-match

我有这个字符：

```
<span class=\"studySummaryOval arial_14 bold neutral\" title=\"NEUTRE\">XXX</span>
<span class=\"studySummaryOval arial_14 bold buy\" title=\"buy\">XXX</span>
<span class=\"studySummaryOval arial_14 bold buy\" title=\"sell\">XXX</span> 
```

如何用 php、preg_match 取 XXX？

我的工作只是与销售而不是与其他！

我有这个代码（使用 php，preg_match）：

```
|<span class=\\\\"studySummaryOval arial_14 bold sell\\\\" title=\\\\"(.*)\\\\">(.*)</span>| 
```

我不知道 ！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:41:33.477

```
<span class=\\\"studySummaryOval arial_14 bold .*?\\\" title=\\\"sell\\\">(.*?)<\/span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:12:37.207

您在正则表达式中有一个卖词，将其更改为：

```
|<span class=\\\\"studySummaryOval arial_14 bold .*\\\\" title=\\\\"(.*)\\\\">(.*)</span>| 
```

# java - 使用java将时间戳从mysql解析为csv

> ID：13170384
> 
> 赞同：0
> 
> 时间：2012-11-01T03:05:51.520
> 
> 标签：java, mysql, csv

我有一个 mysql 数据库，我有一个表，其中包含许多列，包括一个时间戳。我想读取表格并将其写入 csv 文件。然后我将从 csv 文件中读取数据并将其插入另一个数据库和表中。所有这些都是通过java完成的。我可以从第一个 db 中读取表日期和时间戳，但时间戳未正确写入 csv 文件。仅写入最后几位数字。例如，如果我有一个时间戳 2012-11-01 02:18:00.0 只有 18:00.0 将被写入 csv。所有其他的东西都很好。例如，如果我硬写时间戳，我可以将其写入第二个数据库。那里有读取 mysql 和写入 csv 的代码：

```
 con = DriverManager.getConnection("jdbc:mysql://localhost/campdb", "...", "...");

                    stmt = (Statement) con.createStatement();
                    fw = new FileWriter(filename);
                    PrintWriter a = new PrintWriter(fw);
                    ResultSet res = stmt.executeQuery("SELECT * FROM CAMPREQ;");
                    while (res.next()) 
                    {
                        String ID = res.getString(1);
                        java.sql.Date date = res.getDate(2);
                        //java.util.Date jdate = new java.util.Date(date.getTime());
                        String company = res.getString(3);
                        String time = res.getString(4);
                        String origin = res.getString(5);
                        String dest = res.getString(6);
                        String timestamp = res.getString(7);
                        System.out.println(timestamp);
                        a.print(ID);
                        a.print(',');
                        a.print(date);
                        a.print(',');
                        a.print(company);
                        a.print(',');
                        a.print(time);
                        a.print(',');
                        a.print(origin);
                        a.print(',');
                        a.print(dest);
                        a.print(',');
                        a.print(timestamp);
                        a.print('\n');
                        a.flush();

                    } 
```

System.out 命令打印应写入的时间戳，但在 csv 中未正确写入 :( 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:15:26.457

不要在 Java 中做 MySQL 自己可以做的事情。

```
con = DriverManager.getConnection("jdbc:mysql://localhost/campdb", "...", "...");
stmt = (Statement) con.createStatement();

String q = 
  "SELECT * INTO OUTFILE '" + filename + "'"
  + " FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"'"
  + " LINES TERMINATED BY '\n'"
  + " FROM " + tablename;

stmt.execute(q); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:23:51.387

尝试使用下面的代码，它适用于大多数数据库，并以正确的格式正确获取所有数据类型。这不仅可以解决 mysql 的问题，还可以解决任何其他数据库的问题

```
 public static StringBuffer resultSetToStringCsv(ResultSet resultSet) throws Exception{
StringBuffer stringwriter = new StringBuffer();

ResultSet rs = resultSet;
ResultSetMetaData rsmd = rs.getMetaData();
int numberOfColumns = rsmd.getColumnCount();

//Write column names
for(int i=1;i<=numberOfColumns;i++){
 stringwriter.append(rsmd.getColumnName(i));
 stringwriter.append(',');
}
stringwriter.append('\n');
//Write rows
while(rs.next()){
 for(int i=1;i<=numberOfColumns;i++){
  try{
   stringwriter.append(""+rs.getObject(i));
  stringwriter.append(',');
  }catch (Exception e) {
   stringwriter.append("null");
 stringwriter.append(',');
}
}    
 stringwriter.append('\n');
} 
```

您可以查看[http://bmukorera.blogspot.com/2012/11/resultset-query-to-string-generating.html](http://bmukorera.blogspot.com/2012/11/resultset-query-to-string-generating.html)以获取完整代码

# c# - 为什么 JSON 字符串中的 System.Version 不能正确反序列化？

> ID：13170386
> 
> 赞同：23
> 
> 时间：2012-11-01T03:06:12.190
> 
> 标签：c#, deserialization, json.net, system.version

上下文：我需要传递一个包含大量属性/字段的对象（从中间层到 UI 层）。在这个属性列表中，一个是没有从 JSON 字符串格式正确反序列化的 Version 类型。我在 XML 上选择了 JSON 格式，因为 JSON 序列化为字符串将返回短字符串结果。

问题：System.Version 没有正确反序列化。我尝试了两个不同的 .NET 库。以下是每个的代码片段：

[使用ServiceStack .NET 库](http://www.servicestack.net/mythz_blog/?p=344)的代码片段 1 ：

```
 var version = new Version(1, 2, 3, 0);
        string reportJSON = JsonSerializer.SerializeToString<Version>(version);
        //{"Major":1,"Minor":2,"Build":3,"Revision":0,"MajorRevision":0,"MinorRevision":0}

        Version report2 = JsonSerializer.DeserializeFromString<Version>(reportJSON);
        string reportJSON2 = JsonSerializer.SerializeToString<Version>(report2);
        //{"Major":0,"Minor":0,"Build":-1,"Revision":-1,"MajorRevision":-1,"MinorRevision":-1} 
```

[使用Newtonsoft .NET 库](http://james.newtonking.com/projects/json-net.aspx)的代码片段 2，但结果相同：

```
 var version = new Version(1, 2, 3, 0);
        string reportJSON = JsonConvert.SerializeObject(version);
        //{"Major":1,"Minor":2,"Build":3,"Revision":0,"MajorRevision":0,"MinorRevision":0}

        Version report2 = JsonConvert.DeserializeObject<Version>(reportJSON);
        string reportJSON2 = JsonConvert.SerializeObject(report2);
        //{"Major":0,"Minor":0,"Build":-1,"Revision":-1,"MajorRevision":-1,"MinorRevision":-1} 
```

如何解决这个问题？或者还有哪些其他 JSON.NET 库可以正常工作？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-09T21:51:34.430

该`Newtonsoft.Json`库在命名空间中提供了一组通用转换器`Newtonsoft.Json.Converters`，包括**`VersionConverter`**可用于序列化和反序列化的转换器`System.Version`。

**请注意，您必须同时使用`VersionConverter`两者进行序列化和反序列化**。
这是因为标准序列化会生成例如：`{"Major":1,"Minor":2,"Build":3,"Revision":0,"MajorRevision":0,"MinorRevision":0}`而`VersionConverter`反序列化需要一个简单的字符串，如`"1.2.3"`.

所以用法是：

```
using Newtonsoft.Json;
using Newtonsoft.Json.Converters;  

string s = JsonConvert.SerializeObject(version, new VersionConverter());
Version v = JsonConvert.DeserializeObject<Version>(s, new VersionConverter()); 
```

我不确定`Newtonsoft.Json`包含该转换器的第一个版本是什么。我的有它，它是 5.0.6。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-01T12:43:01.073

类的属性`Version`没有设置器。他们只是返回相应私有字段的值。因此，解串器无法更改它们的值。

但是使用 Json.NET，您可以编写一个自定义转换器类来处理该类的反序列化`Version`。

*当心：*此代码尚未经过很好的测试...

```
public class VersionConverter : JsonConverter
{
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        // default serialization
        serializer.Serialize(writer, value);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        // create a new Version instance and pass the properties to the constructor
        // (you may also use dynamics if you like)
        var dict = serializer.Deserialize<Dictionary<string, int>>(reader);
        return new Version(dict["Major"], dict["Minor"], dict["Build"], dict["Revision"]);
    }

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(Version);
    }
} 
```

然后您必须指定要使用转换器：

```
var v = new Version(1, 2, 3, 4);
string json = JsonConvert.SerializeObject(v);

var v2 = JsonConvert.DeserializeObject<Version>(json, new VersionConverter()); 
```

Json.NET 自行决定是否使用您指定的转换器之一。因此，您始终可以指定转换器，如下所示。Json.NET 将使用您的转换器之一，如果它们匹配`SomeClass`.

```
var result = JsonConvert.DeserializeObject<SomeClass>(json, new VersionConverter()); 
```

# java - 使用外部绑定生成具有多个前缀的 JAXB 类

> ID：13170388
> 
> 赞同：3
> 
> 时间：2012-11-01T03:06:32.890
> 
> 标签：java, jaxb, jaxb2, xjc

我有一组 XSD 文件，如下：

*   [http://www.iana.org/assignments/xml-registry/schema/contact-1.0.xsd](http://www.iana.org/assignments/xml-registry/schema/contact-1.0.xsd)
*   [http://www.iana.org/assignments/xml-registry/schema/domain-1.0.xsd](http://www.iana.org/assignments/xml-registry/schema/domain-1.0.xsd)
*   [http://www.iana.org/assignments/xml-registry/schema/epp-1.0.xsd](http://www.iana.org/assignments/xml-registry/schema/epp-1.0.xsd)
*   [http://www.iana.org/assignments/xml-registry/schema/eppcom-1.0.xsd](http://www.iana.org/assignments/xml-registry/schema/eppcom-1.0.xsd)
*   [http://www.iana.org/assignments/xml-registry/schema/host-1.0.xsd](http://www.iana.org/assignments/xml-registry/schema/host-1.0.xsd)

它们中的大多数相互依赖，因此我创建了以下目录文件以允许 JAXB 编译器 (XJC) 生成类。

```
<catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog">
    <public publicId="urn:ietf:params:xml:ns:contact-1.0" uri="contact-1.0.xsd"/>
    <public publicId="urn:ietf:params:xml:ns:domain-1.0" uri="domain-1.0.xsd"/>
    <public publicId="urn:ietf:params:xml:ns:epp-1.0" uri="epp-1.0.xsd"/>
    <public publicId="urn:ietf:params:xml:ns:eppcom-1.0" uri="eppcom-1.0.xsd"/>
    <public publicId="urn:ietf:params:xml:ns:host-1.0" uri="host-1.0.xsd"/>
    <public publicId="urn:ietf:params:xml:ns:rgp-1.0" uri="rgp-1.0.xsd"/>
</catalog> 
```

不幸的是，一些生成的类名之间存在一些冲突，我必须解决这些冲突 - 根据一些研究，我需要创建一个外部绑定文件。

**我想为从每个 XSD*直接生成的所有类添加前缀。***

导入的 XSD 应该被忽略（例如 epp-1.0 导入 eppcom-1.0.xsd），因为如果我对每个 XSD 重复该过程，它们就已经生成了。（即如果可能，以 XSD 命名空间为前缀）

**有谁知道我该如何解决这个问题？**

由于 XSD 文件由第 3 方维护，因此我没有直接修改 XSD 的选项。我尝试了以下外部绑定，但它不起作用：

```
<jxb:bindings version="2.0"
              xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
              xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <jxb:bindings scd="x-schema:epp" node="/xs:schema">
        <jxb:schemaBindings>
            <jxb:nameXmlTransform>
                <jxb:typeName prefix="Epp" />
                <jxb:elementName prefix="Epp" />
                <jxb:modelGroupName prefix="Epp" />
                <jxb:anonymousTypeName prefix="Epp" />
            </jxb:nameXmlTransform>
        </jxb:schemaBindings>
    </jxb:bindings>
    <jxb:bindings scd="x-schema:eppcom" node="/xs:schema">
        <jxb:schemaBindings>
            <jxb:nameXmlTransform>
                <jxb:typeName prefix="EppCom" />
                <jxb:elementName prefix="EppCom" />
                <jxb:modelGroupName prefix="EppCom" />
                <jxb:anonymousTypeName prefix="EppCom" />
            </jxb:nameXmlTransform>
        </jxb:schemaBindings>
    </jxb:bindings>
</jxb:bindings> 
```

输出：

```
parsing a schema...
[ERROR] XPath evaluation of "/xs:schema" results in empty target node
line 4 of file:/C:/Users/Jin%20Kim/workspace/registry/server/src/main/resources/xsd/bindings.xjb

[ERROR] XPath evaluation of "/xs:schema" results in empty target node
line 14 of file:/C:/Users/Jin%20Kim/workspace/registry/server/src/main/resources/xsd/bindings.xjb

Failed to parse a schema. 
```

# python - 如何将提要聚合成一个字符串然后解析它们？

> ID：13170389
> 
> 赞同：0
> 
> 时间：2012-11-01T03:06:48.537
> 
> 标签：python, xml, concatenation, feed

我正在尝试聚合一些 youtube 提要，将它们连接起来，然后解析提要。当我自己解析单个提要时，我没有任何问题，而且代码似乎可以工作。但是，当我尝试将提要聚合为一个长字符串然后使用 etree.fromstring(aggregate_partner_feed) 时，出现错误。我得到的错误是 ParseError: unbound prefix 和 etree 行（前面引用过）作为错误给出。关于如何解决这个问题的任何建议？

```
aggregated_partners_list = [cnn, teamcoco, buzzfeed]

i = 1 
number_of_partners = len(aggregated_partners_list)
aggregate_partner_feed = '' 

for entry in aggregated_partners_list:
    #YOUTUBE FEED
    #download the file:
    file = urllib2.urlopen('http://gdata.youtube.com/feeds/api/users/'+entry+'/uploads?v=2&max-results=50')
    #convert to string:
    data = file.read()
    #close file because we dont need it anymore:
    file.close()

    if i == 1:
        #remove ending </feed>
        data = data[:-7]

    if i>1 and i != number_of_partners:
        data = data[data.find('<entry'):]
        data = data[:-7]
        #remove everything before first <entry> in the new feed and the last </entry>

    #if last, then only remove everything before first <entry>
    if i == number_of_partners:
        data = data[data.find('<entry'):]

    #append the current feed to the existing feed
    aggregate_partner_feed += data

    #increment the counter  
    i=i+1

print isinstance(data, basestring)                      #returns true
print isinstance(aggregate_partner_feed, basestring)    #returns true

#apply the parsing to the aggregated feed

#entire feed
root = etree.fromstring(aggregate_partner_feed)     #this is the line that give an error
#all entries
entries = root.findall('{http://www.w3.org/2005/Atom}entry')
#more code that seems to work... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:03:32.227

我单独解析每个提要，然后使用 .append 而不是将字符串连接在一起然后解析。

# javascript - 从 javascript 数组加载 jstree

> ID：13170390
> 
> 赞同：1
> 
> 时间：2012-11-01T03:06:51.077
> 
> 标签：javascript, jstree

我正在尝试使用 jstree 来提供一棵树。树的节点应从 javascript 数组元素中提取。例如，我的数组是 Library={Milk,Bread,Cheese,...} 所以我希望父节点是 Milk, Bread, Cheese, ... 这是我尝试过的部分代码，我想初始化jstee_data 基于数组。在这里，我只是初始化那个 manullay。但是我可以循环执行此操作吗？因为如果说数组有 20 个元素，那么很难编写 manullay 代码！

```
<script type="text/javascript">
$(function() {
    var lib_info = new Array();
    lib_info[0]= new library_Object("Milk");
    lib_info[1]= new library_Object("Bread");
    lib_info[2]= new library_Object("Cheese");
    $("#someButton").click(function() {
        $("#treeContainer").jstree({
            "json_data": {
                "data": [
                    { "data": lib_info[0].libData, "children": ["Child 1", "A Child 2"] }, { "data": lib_info[1].libData, "children": ["Child 1", "A Child 2"] }, { "data": "Last node" },                ]
            },
            "plugins": ["ui", "json_data", "themes"]
        });
    });

});
function library_Object(lib_data) {
    this.libData = lib_data;
}
</script> 
```

非常感谢任何帮助。

# restkit - 在 Development Branch 0.20 中清理 RestKit DELETE 后的核心数据

> ID：13170394
> 
> 赞同：0
> 
> 时间：2012-11-01T03:07:24.647
> 
> 标签：restkit

任何人都知道从核心数据中删除对象并通过 RestKit 成功删除到服务器的最新首选方法？

专门讲开发分支0.20

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:28:30.807

Per Blake（RestKit 的作者）： [http ://restkit.org/api/0.20.0-dev/Classes/RKManagedObjectRequestOperation.html](http://restkit.org/api/0.20.0-dev/Classes/RKManagedObjectRequestOperation.html)

基本上，您设置用于处理孤立对象的代码（本地存在的对象，但在服务器上检查时不会返回）。

# ruby-on-rails - pg_dump：Rails“schema_format = :sql”迁移中的“无法连接到服务器”

> ID：13170395
> 
> 赞同：2
> 
> 时间：2012-11-01T03:07:34.733
> 
> 标签：ruby-on-rails, postgresql, rails-migrations

到目前为止，在我的 rails 应用程序（v 3.2.8）中，我使用迁移没有问题。

我使用 PostgreSQL 9.2 作为数据库。我调整了我`application.rb`的使用 sql 而不是模式转储程序（未注释`config.active_record.schema_format = :sql`）。

之后，我开始在迁移时收到此错误：

```
 $ rake db:migrate

    [ALL MIGRATION STUFF IS PRINTED HERE]

    pg_dump: [archiver (db)] connection to database "my_dev_db" failed: could not connect to server: Connection refused
        Is the server running on host "localhost" (::1) and accepting
        TCP/IP connections on port 5432?
    could not connect to server: Connection refused
        Is the server running on host "localhost" (127.0.0.1) and accepting
        TCP/IP connections on port 5432?
    could not connect to server: Connection refused
        Is the server running on host "localhost" (fe80::1) and accepting
        TCP/IP connections on port 5432?
    rake aborted!
    Error dumping database

I tried manually on the command line(logged in as the same user on my Mac)

<!-- language: lang-sh -->

    $ pg_dump my_dev_db > /tmp/db.sql

No problems with that...happily dumps into `/tmp/db.sql`

Why is rails having trouble with `pg_dump`? (I am on Mac OSX Lion)

===========

Adding more diagnosis information

===========

    $tail -10 /usr/local/var/postgres9.2/pg_hba.conf 

    local   all             all                                     md5
    # IPv4 local connections:
    host    all             all             127.0.0.1/32            md5
    # IPv6 local connections:
    host    all             all             ::1/128                 md5
    # Allow replication connections from localhost, by a user with the
    # replication privilege.
    #local   replication     rogert                                trust
    #host    replication     rogert        127.0.0.1/32            trust
    #host    replication     rogert        ::1/128                 trust

    $ sudo lsof -p 62444 | awk '$5 == "unix" && $NF ~ /\// { print $NF }'
    /tmp/.s.PGSQL.5432

    $ ps auxw | grep post
    postgres        1403   0.0  0.0  2435492    640 s007  S+   21Oct12   0:00.05 bash
    root            1401   0.0  0.0  2498096    128 s007  S    21Oct12   0:00.02 su postgres
    rogert  62517   0.0  0.0  2426700    388 s001  R+    9:21PM   0:00.00 grep post
    rogert  62448   0.0  0.0  2481656    500   ??  Ss    8:46PM   0:00.03 postgres: wal writer process     
    rogert  62447   0.0  0.0  2481656    752   ??  Ss    8:46PM   0:00.07 postgres: writer process     
    rogert  62446   0.0  0.0  2481656   1040   ??  Ss    8:46PM   0:00.00 postgres: checkpointer process     
    rogert  62444   0.0  0.1  2481656   5368 s001  S     8:46PM   0:00.02 /usr/local/Cellar/postgresql/9.2.1/bin/postgres -D /usr/local/var/postgres9.2

    $ rake db:migrate --trace

    [ALL MIGRATION STUFF IS PRINTED HERE]

    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:393:in `block (3 levels) in <top (required)>'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
    /Users/rogert/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:162:in `block (2 levels) in <top (required)>'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
    /Users/rogert/.rvm/gems/ruby-1.9.3-p194@rails_3.2.8/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
    /Users/rogert/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'

$sudo vi /usr/local/var/postgres9.2/postgresql.conf

[search for listen address]

# - Connection Settings -

listen_addresses = 'localhost'          # what IP address(es) to listen on;
                                        # comma-separated list of addresses;
                                        # defaults to 'localhost'; use '*' for all
                                        # (change requires restart)
port = 5432                             # (change requires restart)
max_connections = 100                   # (change requires restart) 
```

奇怪的是，如果我从我的 rails 应用程序中完全删除这两行，迁移工作。因此，如果它是 TCP 连接和侦听的问题，迁移本身是如何工作的（但一旦我再次打开这两个就不会）

1.  application.rb - config.active_record.schema_format = :sql
2.  在我的一个迁移文件中 - t.hstore :attributes

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T04:21:39.327

很可能您的 PostgreSQL 实例配置为不侦听 TCP/IP，至少在 localhost 上。

在`postgresql.conf`检查`listen_addresses`中。请参阅[文档](http://www.postgresql.org/docs/current/interactive/runtime-config-connection.html)。很可能它设置为`''`（空字符串），因此服务器只侦听 UNIX 域套接字。

`psql`等`pg_dump`如果 Pg 没有在 TCP/IP 上侦听，它们仍然可以工作，因为它们默认连接到本地 unix 域套接字。Ruby `pg`gem 是一个包装器`libpq`，与 etc 使用的客户端库相同`psql`，并且它还默认使用 unix 域套接字，除非显式指定连接参数。

然而，Rails 似乎将一个明确的 IP 地址传递给`pg_dump`- 导致它尝试通过 TCP/IP 进行连接，而 Pg 似乎没有在监听，从而导致观察到的“连接被拒绝”错误。

或者，您的 PostgreSQL 可能被编译为默认到 5432 以外的端口。相同的设置被编译为 libpq 中的默认值，因此它会自动连接到新端口。但是，如果 Rails 在尝试运行它时指定了一个明确的端口`pg_dump`，它将优先使用该端口而不是内置默认值。检查`port`指令`postgresql.conf`；如果它*没有*被注释掉或设置为`5432`这可能是你的问题。该`port`指令记录在与上面链接的同一页面中。

顺便说一句，在 Pg 运行时定位运行`postgresql.conf`。`psql template1 -c "SHOW config_file;"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:37:52.520

根本原因是第 3 方防火墙包认为过滤本地环回接口上的连接是个好主意。

请参阅[评论线程](https://stackoverflow.com/questions/13170395/pg-dump-could-not-connect-to-server-in-rails-schema-format-sql-migration/13170908#comment17923787_13170908)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:21:57.583

`pg_dump`从命令行将使用 UNIX 域套接字访问 PostgreSQL，而 rails 工具正在尝试创建到 localhost 的 TCP 连接。

查看您的 pg_hba.conf（对我来说，这是在 /var/lib/pgsql/data/ 中）并检查是否有这样一行，其中 md5 表示将使用密码身份验证：

```
host    all         all         127.0.0.1/32          md5 
```

（如果您要在生产环境中运行它，请确保您完全理解这一点！）

`-h localhost`您可以通过在运行 pg_dump 时在命令行上显式指定来测试通过 TCP 的连接。如果您对 pg_hba.conf 进行任何更改，请记住重新启动 PostgreSQL。

# prolog - 无需重新访问即可找到所有可能的路径

> ID：13170401
> 
> 赞同：3
> 
> 时间：2012-11-01T03:08:44.397
> 
> 标签：prolog

我需要一个谓词路由，它给出开始和结束之间的所有城市。例如：

```
path(chicago,atlanta).
path(chicago,milwaukee).
path(milwaukee,detroit).
path(milwaukee,newyork).
path(chicago,detroit).
path(detroit, newyork).
path(newyork, boston).
path(atlanta,boston).
path(atlanta, milwaukee).

?- routing(chicago,newyork,X).
X=[chicago,milwaukee,newyork];
X=[chicago,detroit,newyork];
X=[chicago,milwaukee,detroit,newyork];
X=[chicago,atlanta,milwaukee,newyork];
X=[chicago,atlanta,milwaukee,detroit,newyork] 
```

我已经尝试过这个，并继续回来。

```
routing(FromCity,ToCity,[FromCity|ToCity]) :-
  path(FromCity,ToCity).

routing(FromCity,ToCity,[FromCity|Connections]) :- 
  path(FromCity,FromConnection), 
  path(FromConnection,ToConnection),
  path(ToConnection,ToCity),
  routing(ToConnection,ToCity,Connections).

routing(FromCity,ToCity,[]). 
```

但它只是不断给予

```
X=[chicago,milwaukee,newyork];
X=[chicago,chicago,newyork];
X=[chicago,chicago,chicago,newyork]
...
.. 
```

有人可以指出我正确的方向吗...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T07:22:55.597

如果你确定（根据定义）你的图是非循环的，你可以简化你的规则，利用 Prolog 深度优先搜索：

```
routing(FromCity, ToCity, [FromCity, ToCity]) :-
  path(FromCity, ToCity).

routing(FromCity, ToCity, [FromCity|Connections]) :- 
  path(FromCity, ToConnection),
  routing(ToConnection, ToCity, Connections). 
```

这会在回溯中找到所有可用路径：

```
?- routing(chicago,newyork,X).
X = [chicago, atlanta, milwaukee, newyork] ;
X = [chicago, atlanta, milwaukee, detroit, newyork] ;
X = [chicago, milwaukee, newyork] ;
X = [chicago, milwaukee, detroit, newyork] ;
X = [chicago, detroit, newyork] ;
false. 
```

注意列表构造的第一种和第二种模式之间的区别：`[FromCity, ToCity]`vs `[FromCity|Connections]`。这是因为当规则成功时`Connections`将是一个`list`，而`ToCity`将是一个原子。

如果您的图表包含循环，则此代码将循环。对于处理此问题的简单模式，您可以参考[另一个答案](https://stackoverflow.com/a/10800569/874024)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-03T22:48:21.310

怎么处理如下？

首先，我们选择一个比 更好的谓词名称`path`。怎么样`edge`？

```
edge(chicago  , atlanta  ).
edge(chicago  , milwaukee).
edge(milwaukee, detroit  ).
edge(milwaukee, newyork  ).
edge(chicago  , detroit  ).
edge(detroit  , newyork  ).
edge(newyork  , boston   ).
edge(atlanta  , boston   ).
edge(atlanta  , milwaukee). 
```

如上所述，`edge/2`显然不是[对称](https://en.wikipedia.org/wiki/Symmetric_relation)的，否则下面的查询不会成功！

```
?- edge(X, Y), \+ edge(Y, X).
  X = chicago  , Y = atlanta
; X = chicago  , Y = milwaukee
; X = milwaukee, Y = detroit
; X = milwaukee, Y = newyork
; X = chicago  , Y = detroit
; X = detroit  , Y = newyork
; X = newyork  , Y = boston
; X = atlanta  , Y = boston
; X = atlanta  , Y = milwaukee. 
```

接下来，我们定义`connected_to/2`为 的对称闭包`edge/2`：

```
connected_to(X, Y) :- edge(X, Y).
connected_to(X, Y) :- edge(Y, X). 
```

最后，我们将[元谓词](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") [`path/4`](https://stackoverflow.com/q/30328433/4609915)与`connected_to/2`：

```
?- path(connected_to, Path, From, To).
; From = To                   , Path = [To]
; From = chicago, To = atlanta, Path = [chicago,atlanta]
; From = chicago, To = boston , Path = [chicago,atlanta,boston]
; From = chicago, To = newyork, Path = [chicago,atlanta,boston,newyork]
... 
```

那么... `path/4`(with `connected_to/2`) 的最一般查询是否普遍终止？

```
?- path(connected_to, Path, From, To), false。
假的。% 普遍终止

```

最后，让我们统计一下不同地面路径的总数：

```
?- setof(P, From^To^(path(connected_to,P,From,To),ground(P)), _Ps),
   length(_Ps, N_Ps).
N_Ps = 244. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T21:38:14.497

这是我的解决方案，适用于有向或无向图，有或没有循环。

它还尝试找到所有路径，而无需重新访问。

```
c(1,2).
% ... c(X,Y) means X and Y are connected

d(X,Y):- c(X,Y).
d(X,Y):- c(Y,X).
% Use d instead of c to allow undirected graphs

findPathHelper(_, Begin, [], End):- d(Begin, End).
findPathHelper(Front, Begin, [Next|NMiddle], End):-
    not(member(Begin,Front)),
    d(Begin, Next),
    append([Front,[Begin]], NFront),
    findPathHelper(NFront, Next, NMiddle, End).

findPath(Start, End, Path):-
    findPathHelper([], Start, Middle, End),
    append([[Start],Middle,[End]], Path). 
```

# c++ - 致命错误 LNK1104：无法打开 .lib (glloaD)

> ID：13170406
> 
> 赞同：2
> 
> 时间：2012-11-01T03:09:15.747
> 
> 标签：c++, visual-studio-2010, opengl, glut, freeglut

我正在尝试阅读一本名为现代 3d 图形编程的在线书籍，但他们为读者提供源代码的方式非常奇怪。我已经无数次阅读此页面并尝试按照他的写作方式设置文件夹，但每次我尝试都会在标题中发布错误。链接是：

[http://www.arcsynthesis.org/gltut/Building%20the%20Tutorials.html](http://www.arcsynthesis.org/gltut/Building%20the%20Tutorials.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T03:29:35.167

在运行我的教程程序之前，我忘记了构建我的 openGL sdk 库。

# git - 使用 TortoiseGit 检查 LLVM 时遇到问题

> ID：13170407
> 
> 赞同：0
> 
> 时间：2012-11-01T03:09:46.403
> 
> 标签：git, svn, llvm, msysgit, tortoisegit

我正在尝试检查并构建 LLVM。在此过程中，我试图了解 Windows Git 安装。

我采取了此页面上列出的步骤： [https ://tortoisegit.org/](https://tortoisegit.org/)

我首先安装了 TortoiseGit 1.7.10

然后我安装了 Git-1.8.0-preview20121022.exe

我不确定这与 msysgit 有什么区别。它似乎是相同的保存不同的图标。

安装后（每次都重新启动），我用乌龟上下文菜单做了一个 git clone 。

如此处所述：http: [//llvm.org/docs/GettingStarted.html#checkout](http://llvm.org/docs/GettingStarted.html#checkout) 我将 URL 设置为[http://llvm.org/svn/llvm-project/llvm](http://llvm.org/svn/llvm-project/llvm)

我单击了来自 SVN 存储库，并使用了默认复选框 Trunk、Tags 和 Branch，它们的值分别是 Trunk、Tags 和 Branches。

我在有和没有我的腻子键的情况下都试过了。

我得到的错误是：

```
git did not exit cleanly (exit code 1) 
```

我难住了。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:18:08.927

您尝试使用 GIT 工具克隆 SVN 存储库。您应该使用 URL 克隆 LLVM 存储库的 GIT 镜像：http: [//llvm.org/git/llvm.git](http://llvm.org/git/llvm.git)

# jquery - 在 Wordpress 上切换 HTML/JQuery 选项卡

> ID：13170409
> 
> 赞同：2
> 
> 时间：2012-11-01T03:10:21.747
> 
> 标签：jquery, html, css, wordpress, tabs

我需要切换标签的帮助，这里是示例链接：[http ://app.seed-ville.com/357-2/#1](http://app.seed-ville.com/357-2/#1)

这只是头部，我不确定它有什么问题。

```
 <ul class="nav">
            <li><a class="active" href="javascript:void(0);">Terms</a></li>
            <li><a href="#1" data-toggle="tab">Privacy</a></li>
            <li><a href="#2" data-toggle="tab">FAQ</a></li>
            <li><a href="#3" data-toggle="tab">Contact</a></li>
            <li><a href="#">Help</a></li>
            <li><a href="#">Media</a></li>
            <li><a href="#">About Us</a></li>
        </ul>

    ----------

    <section id="tab_panes">
    <div class="tab_pane active">Hello</div>
    <div class="tab_pane active"></div>
    <!-- we'll copy/paste the other panes -->
    <div class="tab_pane"><img class="alignleft" src="http://cssdeck.com/uploads/media/items/4/40Ly3VB.jpg" alt="" /></div>
    <div class="tab_pane">Hi1</div>
    <div class="tab_pane">Hi2</div>
    <div class="tab_pane">Hi3</div>
    </section>

    ---------- 
```

这很可能是问题所在。我不确定我是否在页面上正确调用和执行它。

```
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">// <![CDATA[

$(function() {

    $('.nav a').on('click', function() {

        var $el = $(this);
        var index = $('.nav a').index(this);
        var active = $('.nav').find('a.active');

        /* if a tab other than the current active
        tab is clicked */

        if ($('nav a').index(active) !== index) {

            // Remove/add active class on tabs
            active.removeClass('active');
            $el.addClass('active');

            // Remove/add active class on panes
            $('.tab_pane.active')
                .hide()
                .removeClass('active');
            $('.tab_pane:eq('+index+')')
                .fadeIn()
                .addClass('active');

        }
    });

}());
</script> 
```

调用 .redactor 函数时可能出现错误

```
/* Ready function */
sprout.ready = function($) {
// WYSIWYG
$('.redactor, #gb_deal_description, #gb_deal_highlights, #gb_deal_fine_print, #gb_contact_merchant_description').redactor();
jQuery('.masonry_loop').masonry({
itemSelector: '.loop_deal',
gutterWidth: 15,
isAnimated: true,
isResizable: true,
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:25:38.473

您可以找到父`li`元素的索引，请注意您的代码中存在语法错误。如果您想避免页面中的冲突，您应该将 jQuery 作为参数传递给自调用函数。

```
(function($){

    $('.nav a').on('click', function(event) {
        event.preventDefault();

        $('.active').removeClass('active')
        var ind = $(this).addClass('active').parent().index()

        $('.tab_pane.active').hide().removeClass('active');
        $('.tab_pane:eq('+ind+')').addClass('active').fadeIn();
    });

})(jQuery) 
```

[http://jsfiddle.net/dLQV8/](http://jsfiddle.net/dLQV8/)

# php - 带有控件的轨迹栏的元素不移动

> ID：13170411
> 
> 赞同：3
> 
> 时间：2012-11-01T03:10:27.870
> 
> 标签：php, html, audio, html5-audio

我有一个`<audio>`带有这样控件的元素：

```
<audio controls="controls" id="audio-sample" preload="auto">
    <source src="../../music-sample.php?type=ogg&amp;id=<?php echo $item->custom_5; ?>" type="audio/ogg" />
    <source src="../../music-sample.php?type=mp3&amp;id=<?php echo $item->custom_5; ?>" type="audio/mp3" />
</audio> 
```

播放器出现了，声音播放得很好，但是轨迹栏没有移动以反映经过的时间，也不能拖动它来寻找。为什么不？我需要发送某种额外的标题吗？这是所有相关的 PHP，没什么特别的：

```
header('Content-Type: ' . $mimetype[$type]);

$file = fopen($filename, 'rb');
fpassthru($file);
fclose($file);
exit(); 
```

[你可以在这里看到问题。](http://www.musiklus.com/anthology/item/1516/a-companion-on-the-road-words-by-sheelah-megill)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T04:46:31.007

尝试设置`Content-Length`标题...

```
header("Content-Length: " . filesize($filename)); 
```

出于某种原因，如果没有预先提供这些信息，它就无法进行必要的数学运算来放置轨迹栏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T22:18:49.587

让它在 Firefox 和 Safari 上运行的技巧是发送一个`Content-Range`标头，[如此处所述](https://stackoverflow.com/a/3300910/707111)。

```
$length = filesize($filename);

header('Content-Type: ' . $mimetype[$type]);
header('Content-Length: ' . $length);
header('Content-Range: bytes 0-' . ($length - 1) . '/' . $length);

readfile($filename); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T22:30:42.663

, `Content-Type = audio/ogg`,和**最重要**的是`Content-Length`，我认为响应标头对我有用。`Accept-Ranges = bytes`**`X-Content-Duration`**

 **标`X-Content-Duration`头告诉客户端 ogg 文件的持续时间（以秒为单位）。这是有关它的更多信息[https://developer.mozilla.org/en-US/docs/Configuring_servers_for_Ogg_media](https://developer.mozilla.org/en-US/docs/Configuring_servers_for_Ogg_media)。

ogg 文件的每一帧都可能使用可变位数进行编码，因此仅知道以字节为单位的文件大小并不能告诉您以秒为单位的文件长度。`X-Content-Duration`对于带有标题的 ogg vorbis 文件，您可以明确地告诉客户这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T13:58:34.857

## 我的经验

您的代码没有任何问题。我曾经遇到过这个问题，而且..这是一个简单的缓存问题`Firefox`，`Content-Length`您已经发现了

`c.php`

```
<audio controls="controls" id="audio-sample" preload="auto">
    <source src="a.php?type=ogg&id=0" type="audio/ogg" />
    <source src="a.php?type=mp3&id=1" type="audio/mp3" />
</audio> 
```

`a.php`

```
$id = intval($_GET['id']);
$files = array(0 => "audio.ogg",1 => "audio.mp3");
$filename = $files[$id];

header('Content-Type: ' . mime_content_type($filename));
header("Content-transfer-encoding: binary");
header("Content-Length: " . filesize($filename));

ob_clean();
flush();
readfile($filename);
exit(); 
```

这`100%`在 Firefox 中有效，但是当我`readfile($filename)`改为

```
 readfile("SIMPLE ERROR ERROR"); 
```

Firefox sill 为我支付音频费用，而不是不支付任何文件费用，唯一让它意识到错误的方法是在`src`文件中添加一个随机字符串

```
<source src="a.php?type=ogg&id=0&<?php echo mt_rand(); ?>" type="audio/ogg" />
                                             ^---- rand string 
```

这种方式请求 URL Firefox 立即停止播放音频

## 问题

因为您之前尝试过流式传输内容，`Zero Content-Length`这仍然是您的音频不付费的原因...... Firefox 已经缓存了最初的无效内容

## 解决方案

清除所有缓存..在代码上方使用以下代码应该可以正常工作，或者只需在代码中添加 rand 参数进行测试

![在此处输入图像描述](../Images/0b5f30794995da811d194e9037d449af.png)

## 无效的相对位置

永久使用`mt_rand()`会导致难以`Firefox`缓存音频文件，从而导致无效的相对解决方案。

清除`mt_rand`缓存后删除，这将得到修复**

# javascript - 输入中的 Jquery 工具提示

> ID：13170412
> 
> 赞同：1
> 
> 时间：2012-11-01T03:10:48.253
> 
> 标签：javascript, jquery, tooltip

我正在尝试实现具有不同内容但根本不显示的工具提示。并在 js jQuery 中的这一行出现错误：

```
if ( targetElem.nodeType === 9 ) {
        targetWidth = target.width();
        targetHeight = target.height();
        basePosition = { top: 0, left: 0 };
    // TODO: use $.isWindow() in 1.9
    } 
```

我的代码是这样的：

```
<script type="text/javascript">
        $(document).ready(function () {
            $("#MyInput").tooltip({
                content: function (response) {
                    return "Hi";
                },
                open: function () {
                    $(this).tooltip("widget").stop(false, true).hide().slideDown("fast");
                },
                close: function () {
                    $(this).tooltip("widget").stop(false, true).show().slideUp("fast");
                }
            }).tooltip("widget").addClass("ui-state-highlight");
        });
    </script> 
```

输入

```
@Html.TextBoxFor(m => m.Table1.Id, new { @readonly = "readonly", id = "MyInput" }) 
```

代码有什么问题？

更新

jQuery UI 插件有问题，最好切换到另一个插件“QTIP”，效果很好。

谢谢！

# mysql - mysql计数查询

> ID：13170413
> 
> 赞同：1
> 
> 时间：2012-11-01T03:10:49.193
> 
> 标签：mysql, sql

在此查询中，我需要删除重复的导师 ID 并计算它们..

```
SELECT COUNT(t.tutor_id) FROM tutors AS t
    INNER JOIN tutor_category_subject as tcs ON t.tutor_id = tcs.tutor_id   
    INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
WHERE s.subjects LIKE '%business%' 
```

这是查询输出：

```
+-------------------+
| COUNT(t.tutor_id) |
+-------------------+
|                 6 |
+-------------------+ 
```

但应该是 4 .. 为什么导师 id 是 3, 6, 15, 15, 16, 16

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:11:48.237

利用`distinct`

```
SELECT COUNT(DISTINCT t.tutor_id) FROM tutors AS t
    INNER JOIN tutor_category_subject as tcs ON t.tutor_id = tcs.tutor_id   
    INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
WHERE s.subjects LIKE '%business%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:14:40.873

例如，将一个名为“total”的别名放在包含计数的列中，然后在查询末尾添加一个 GROUP BY 总计。

# python - 在谷歌应用引擎 python 上与 memcache 苦苦挣扎

> ID：13170421
> 
> 赞同：0
> 
> 时间：2012-11-01T03:11:52.270
> 
> 标签：python, google-app-engine, memcached

我一直在努力让 memcache 在我的应用程序上运行一段时间。我以为我终于让它在从不从数据库读取的地方工作了（当然，除非 memcache 数据丢失），只是因为数据存储读取的数量过多而导致我的站点关闭！我目前正在使用免费的 apppot，并希望尽可能长时间地保持这种状态。无论如何，这是我的代码，也许有人可以帮助我找到其中的漏洞。

我目前正在尝试通过覆盖 db.Model.all()、delete() 和 put() 方法来首先查询 memcache 来实现 memcache。我设置了 memcache，其中数据存储中的每个对象都有自己的 memcache 值，其 id 作为键。然后对于每个模型类，我在一个知道如何查询的键下都有一个 id 的列表。我希望我解释得足够清楚。

```
""" models.py """
         @classmethod
         def all(cls, order="sent"):
                 result = get_all("messages", Message)
                 if not result or memcache.get("updatemessages"):
                         result = list(super(Message, cls).all())
                         set_all("messages", result)
                         memcache.set("updatemessages", False)
                         logging.info("DB Query for messages")

                 result.sort(key=lambda x: getattr(x, order), reverse=True)
                 return result

         @classmethod
         def delete(cls, message):
                 del_from("messages", message)
                 super(Message, cls).delete(message)

         def put(self):
                 super(Message, self).put()

                 add_to_all("messages", self)

""" helpers.py """

 def get_all(type, Class):
         all = []
         ids = memcache.get(type+"allid")
         query_amount = 0
         if ids:
                 for id in ids:
                         ob = memcache.get(str(id))
                         if ob is None:
                                 ob = Class.get_by_id(int(id))
                                 if ob is None:
                                         continue
                                 memcache.set(str(id), ob)
                                 query_amount += 1
                         all.append(ob)
                 if query_amount: logging.info(str(query_amount) + " ob queries")
                 return all
         return None

 def add_to_all(type, object):
         memcache.set(str(object.key().id()), object)
         all = memcache.get(type+"allid")
         if not all:
                 all = [str(ob.key().id()) for ob in object.__class__.all()]
                 logging.info("DB query for %s" % type)
         assert all is not None, "query returned None.  Send this error code to ____: 2 3-193A"
         if not str(object.key().id()) in all:
                 all.append(str(object.key().id()))
         memcache.set(type+"allid", all)

 @log_on_fail
 def set_all(type, objects):
         assert type in ["users", "messages", "items"], "set_all was not passed a valid type.  Send this error code to ____: 33-205"
         assert not objects is None, "set_all was passed None as the list of objects.    Send this error code to _________: 33-206"
         all = []
         for ob in objects:
                 error = not memcache.set(str(ob.key().id()), ob)
                 if error:
                         logging.warning("keys not setting properly. Object must not be pickleable")
                 all.append(str(ob.key().id()))
         memcache.set(type+"allid", all)

 @log_on_fail
 def del_from(type, object):
         all = memcache.get(type+"allid")
         if not all:
                 all = object.__class__.all()
                 logging.info("DB query %s" % type)
         assert all, "Could not find any objects.  Send this error code to _____: 13-    219"
         assert str(object.key().id()) in all, "item not found in cache.  Send this error code to ________: 33-220"
         del all[ all.index(str(object.key().id())) ]
         memcache.set(type+"allid", all)
         memcache.delete(str(object.key().id())) 
```

我为所有的混乱和缺乏优雅道歉。希望有人能够提供帮助。我曾考虑过切换到 ndb，但现在我宁愿坚持使用自定义缓存。你会注意到`logging.info("some-number of ob queries")`. 我经常收到此日志。也许每半小时一次或两次。memcache 真的经常丢失数据还是我的代码有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T05:19:18.867

简单的解决方案：切换到[NDB](https://developers.google.com/appengine/docs/python/ndb/)。

NDB 模型会将值存储在 memcache 和实例缓存（100% 免费）中，当您更新/删除对象时，这些模型也会使缓存失效。检索将首先尝试从实例缓存中获取，然后如果失败则从 memcache 中获取，最后从数据存储中获取，它将设置任何在途中丢失的缓存中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:11:54.957

App Engine 内存缓存通过优化的逐出算法删除对象，因此以您描述的频率显示此日志消息会导致两种可能的解释。

要么这些数据不经常访问，要么你的内存缓存中的数据量非常大，因此有时会删除其中的一些数据。

我还建议转移到 ndb，它可以非常有效地处理 memcache 和实例缓存的使用。

希望这可以帮助！

# html - 在 div 中加载表单动作

> ID：13170427
> 
> 赞同：2
> 
> 时间：2012-11-01T03:12:40.830
> 
> 标签：html, forms, load

我有一个表单，我想将它的结果加载到一个 div 中。我已经搜索了一些关于此的主题，我认为这个[jquery 提交表单然后在现有 div 中显示结果](https://stackoverflow.com/questions/1218245/jquery-submit-form-and-then-show-results-in-an-existing-div)会起作用，但它不起作用。

到目前为止，这是我的代码：

```
<script type="text/javascript"> $('#form').submit(function() { // catch the form's submit event
$.ajax({ // create an AJAX call...
    data: $(this).serialize(), // get the form data
    type: $(this).attr('method'), // GET or POST
    url: $(this).attr('action'), // the file to call
    success: function(response) { // on success..
        $('#test').html(response); // update the DIV
    }
});
return false; // cancel original event to prevent form submitting }); </script>

<DIV id="test"></DIV>

<FORM id="form" name="pcc" method="post" action="http://wl.breedbandwinkel.nl/postcodecheck" onSubmit="return validatePcc(this);">
             <div class="one_third firstcols">
                <H4>Ik ben op zoek naar:</H4>

        <DIV class="ff"><INPUT type="radio" class="pccrad radio" name="sub" value="alles-in-een-pakketten" id="pcc-alles-in-een-pakketten" onclick="$('#pcc-no').hide(); $('#pcc-fpcon').css('visibility', 'visible'); if($('#pcg').val() == '') $('#pcg').focus();"><LABEL class="left pcm" for="pcc-alles-in-een-pakketten" onmouseover="mpopup('Alles-in-&eacute;&eacute;n pakketten','Extra voordelig pakket met internet, digitale telefonie en/of digitale televisie.');" onmouseout="kill();">Alles-in-&eacute;&eacute;n pakketten</LABEL></DIV>         <DIV class="ff"><INPUT type="radio" class="pccrad radio" name="sub" value="internet" id="pcc-internet" onclick="$('#pcc-no').hide(); $('#pcc-fpcon').css('visibility', 'visible'); if($('#pcg').val() == '') $('#pcg').focus();"><LABEL class="left pcm" for="pcc-internet" onmouseover="mpopup('Internet','Altijd supersnel onbeperkt online tegen een vast bedrag per maand.');" onmouseout="kill();">Internet</LABEL></DIV>                      <DIV class="ff"><INPUT type="radio" class="pccrad radio" name="sub" value="digitale-televisie" id="pcc-digitale-televisie" onclick="$('#pcc-no').hide(); $('#pcc-fpcon').css('visibility', 'visible'); if($('#pcg').val() == '') $('#pcg').focus();"><LABEL class="left pcm" for="pcc-digitale-televisie" onmouseover="mpopup('Digitale Televisie','Geniet van haarscherp digitaal beeld en geluid inclusief de gratis digitale programmagids.');" onmouseout="kill();">Digitale Televisie</LABEL></DIV>
            </div><!-- end .one_third -->
            <div class="one_third">
                <H4>Mijn postcode en huisnummer zijn:</H4>

            <TABLE border="0" cellspacing="0" cellpadding="0">
              <TR>
                <TD height="14" colspan="2">Postcode</TD>
                <TD>Huisnr.</TD>
              </TR>
              <TR>
                <TD width="51"><INPUT type="text" class="text" maxlength="4" size="5" value="" name="pcg" id="pcg" onKeyUp="autoTab(event,this,4,pcl);" onFocus="chBg(pcc,'pcg');" onBlur="chBg(pcc,'reset');" style="width: 41px;"></TD>
                <TD width="46"><INPUT type="text" class="text" maxlength="2" size="2" value="" name="pcl" id="pcl" onKeyUp="autoTab(event,this,2,hn);" onKeyDown="backSpace(event,this,pcg);" onFocus="chBg(pcc,'pcl');" onBlur="chBg(pcc,'reset'); upperCase(event,this);" style="width: 26px;"></TD>
                <TD width="36"><INPUT type="text" class="text" maxlength="6" size="4" value="" name="hn" id="hn" onKeyDown="backSpace(event,this,pcl);" onFocus="chBg(pcc,'hn');" onBlur="chBg(pcc,'reset');" style="width: 36px;"></TD>
              </TR>
            </TABLE>

            <U class="dot small" onmouseover="popup('Waarom mijn postcode invullen?','Om te kunnen controleren welke abonnementen op uw adres leverbaar zijn hebben wij uw postcode en huisnummer nodig.<br>Uiteraard respecteren wij uw privacy. Deze gegevens worden niet opgeslagen.');" onmouseout="kill();">
            Waarom mijn postcode invullen?</U>
            </div><!-- end .one_third -->
            <div class="one_third lastcols">
                <INPUT type="submit" name="submit" value="Vergelijk de aanbiedingen op uw adres" class="button">
            </div><!-- end .one_third -->
            </FORM> 
```

所以我发现这是行不通的。我真的很想将操作 url ( [http://wl.breedbandwinkel.nl/postcodecheck](http://wl.breedbandwinkel.nl/postcodecheck) ) 的结果显示到`<div id="test">`. 目前我正在 iframe 中执行此操作，但这看起来并不“专业”。我希望我提供了足够的信息，如果不让见面知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:39:13.390

最重要的是，如果您的网页不是在[http://wl.breedbandwinkel.nl](http://wl.breedbandwinkel.nl)中运行，那么 AJAX 调用可能根本不会运行，因为大多数浏览器都禁用了跨站点脚本。您不能从 bar.com 提供的页面向 foo.com 发出 AJAX 请求。为了避免这种情况，我通常会编写一个诸如“bar.com/ajaxActions.php”之类的文件，然后使用该 PHP 脚本向外部站点发出 GET 或 POST 请求。一旦它检索到结果，我只需将该结果打印到标准输出，然后它就会成为您的 AJAX 请求的结果。

我要做的另一件事是`<form>`放弃标签中的“方法”和“动作”属性，并将它们放入您尝试使用 jQuery 编写的 AJAX 请求中。在您的提交按钮中使用 onClick() 侦听器，例如：

```
<INPUT type="submit" name="submit" onClick="doAjaxRequest()" value="Vergelijk de aanbiedingen op uw adres" class="button"> 
```

然后在该函数中，使用您已经为初学者准备的代码：

```
<script type="text/javascript"> 
function doAjaxRequest() {
    $.ajax({ // create an AJAX call...
        data: $("#form").serialize(), // get the form data
        type: GET, // GET or POST
        url: "ajaxActions.php", // the file to call -- postcodecheck if you're on that same domain, otherwise ajaxActions.php
        success: function(response) { // on success..
            $('#test').html(response); // update the DIV
        }
    });
} 
```

最后，如果您不在同一个域中，我将留给您找出 GET 请求（使用 file_get_contents()）或 POST 请求（使用 cURL）的 PHP 代码。或者，如果您不能使用 PHP，则使用您选择的后端语言。在 PHP 中，假设您的邮政编码检查器接受了 GET 请求，您的 ajaxActions.php 文件将如下所示：

```
$response = file_get_contents("http://wl.breedbandwinkel.nl/postcodecheck?pcg=" . $_GET["pcg"] . "&pcl=" . $_GET["pcl"] . "&hn=" . $_GET["hn"] );
print $reponse; 
```

# android - 更改 Toast 中 ListView 的位置

> ID：13170428
> 
> 赞同：0
> 
> 时间：2012-11-01T03:12:44.590
> 
> 标签：android, listview, position, toast

当我单击第一项时，此代码吐司显示位置 0。当我单击第一项时，我希望吐司向我显示位置 1。

```
ListView myListView = (ListView) findViewById(R.id.myListView);
    final EditText myEditText = (EditText) findViewById(R.id.myEditText);

    final ArrayList<String> todoItem = new ArrayList<String>();
    final ArrayAdapter<String> aa;
    aa = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, todoItem);
    myListView.setAdapter(aa);

    myEditText.setOnKeyListener(new OnKeyListener() {

        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if(event.getAction() == KeyEvent.ACTION_DOWN)
                if((keyCode == KeyEvent.KEYCODE_DPAD_CENTER) || keyCode == KeyEvent.KEYCODE_ENTER){
                    todoItem.add(0, myEditText.getText().toString());
                    aa.notifyDataSetChanged();
                    myEditText.setText("");
                    return true;
                }
            return false;
        }
    });

    myListView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            Toast.makeText(getApplicationContext(), "this is to do list " + position, Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:16:14.977

由于适配器中视图的位置从 开始`0`，所以位置加1，显示在`Toast`

```
myListView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
            long arg3) {
        Toast.makeText(getApplicationContext(), "this is to do list " + (position+1), Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:18:15.803

只需将 1 添加到位置，因为索引位置从值 0 开始。

```
 public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
     Toast.makeText(getApplicationContext(), "this is to do list " + (position+1), Toast.LENGTH_SHORT).show();
 } 
```

# java - 无法使用画布绘制两个类

> ID：13170429
> 
> 赞同：0
> 
> 时间：2012-11-01T03:12:44.920
> 
> 标签：java, android, android-canvas

我正在为 android 做我的第一个游戏。

我想做一件非常简单的事情，那就是有一个背景和一个会在其中“生成”的球。

所以我制作了我的 GameView：

```
package com.example.newarkanoid;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.MotionEvent;
import android.view.View;

public class Tela extends View {
    Paint paint;
    int x,y;
    int lastx,lasty;
    Bola bola;

    public Tela(Context context, Bola BOLA) {
        super(context);
        paint = new Paint();
        x=0;lastx=0;
        y=0;lasty=0;
        bola = BOLA;
        bola.paint.setColor(Color.BLACK);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        paint.setColor(Color.WHITE);
        canvas.drawPaint(paint);
        bola.invalidate();
    }

    public boolean onTouchEvent(MotionEvent event) {
        x = (int)event.getX();
        y = (int)event.getY();
        if(lastx !=x || lasty !=y){
            lastx=x;
            lasty=y;
            bola.x = x;
            bola.y = y;
            bola.invalidate();
        }
    return false;
    }

} 
```

好吧，上面是我的 MainDisplay，现在我需要一个球：

```
package com.example.newarkanoid;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.View;

public class Bola extends View {
    Paint paint;
    float x,y,raio;

    public Bola(Context context, float x, float y, float raio) {
        super(context);
        this.x = x;
        this.y = y;
        this.raio = raio;
        paint = new Paint();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        paint.setStyle(Paint.Style.FILL);
        canvas.drawCircle(x, y, raio, paint);
    }

} 
```

所以，我确实喜欢那样，因为我的老师告诉我，你不必为内部主显示调用 invalidate，你可以只为你的球调用 invalidate，所以我制作了我的球绘图代码，以及它的属性。

因此，正如您在代码中看到的，当我单击触摸屏中的某个位置时，我的球 x 和 y 将更改为单击位置，然后调用 invalidate。

问题是，当我创建我的 mainDisplay 时，球甚至没有出现，所以我想知道，是否有类似上下文问题的东西？为什么我的球没有抽出来？

另外，这是我的 MainActivity：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Bola bola = new Bola(this,20,20,5);
        Tela t = new Tela(this,bola);

        setContentView(t);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:57:34.680

使用 bola.draw(canvas); 在你的 onDraw()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:26:06.060

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    paint.setColor(Color.WHITE);
    canvas.drawPaint(paint);
    bola.invalidate();
} 
```

当 bola 无效时，bola 将使用其画布进行绘制，与 Tela 的画布不同。您可以使用 draw 方法创建一个类，而不是扩展视图

```
public void draw(Canvas canvas) {
    paint.setStyle(Paint.Style.FILL);
    canvas.drawCircle(x, y, raio, paint);
} 
```

并拨打电话：

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    paint.setColor(Color.WHITE);
    canvas.drawPaint(paint);
    bola.draw(canvas);
} 
```

# python - Python：通常如何解决“超出最大允许尺寸”错误？

> ID：13170435
> 
> 赞同：0
> 
> 时间：2012-11-01T03:13:11.923
> 
> 标签：python, numpy, multidimensional-array, large-data

我正在尝试制作一个 2^nx 2^n numpy 数组，其中包含一组*非常大*的向量的所有可能的点积排列。我的测试数组“数据”是一个 (129L, 222L) numpy 数组。我的功能似乎（在我的新手看来）非常简单。只是我有太多数据需要处理。程序员通常如何解决这个问题？有什么建议么？

**我的数据**：

```
>>> data
array([[  1.36339199e-07,   6.71355407e-09,   2.13336419e-07, ...,
          8.44471296e-10,   6.02566662e-10,   3.38577178e-10],
       [  7.19224620e-08,   5.64739121e-08,   1.49689547e-07, ...,
          3.85361972e-10,   3.17756751e-10,   1.68563023e-10],
       [  1.93443482e-10,   1.11626853e-08,   2.66691759e-09, ...,
          2.20938084e-11,   2.56114420e-11,   1.31865060e-11],
       ..., 
       [  7.12584509e-13,   7.70844451e-13,   1.09718565e-12, ...,
          2.08390730e-13,   3.05264153e-13,   1.62286818e-13],
       [  2.57153616e-13,   6.08747557e-13,   2.00768488e-12, ...,
          6.29901984e-13,   1.19631816e-14,   1.05109078e-13],
       [  1.74618064e-13,   5.03695393e-13,   1.29632351e-14, ...,
          7.60145676e-13,   3.19648911e-14,   8.72102078e-15]])` 
```

**我的功能**：

```
import numpy as np
from itertools import product, count

def myFunction(data):
    S = np.array([])
    num = 2**len(data)
    y = product(data, repeat = 2)
    for x in count():
        while x <= num:
            z = y.next()
            i, j = z
            s = np.dot(i, j)
            S = np.insert(S, x, s)
            break #for the 'StopIteration' issue
        return np.reshape(S, (num,num)) 
```

**我的错误**：

`>>> theMatrix = myFunction(data)`

> 回溯（最近一次通话最后）：
> 
> > 文件“C:\Python27\lib\site-packages\IPython\core\interactiveshell.py”，第 2721 行，run_code exec code_obj in self.user_global_ns, self.user_ns
> > 
> > 文件“”，第 1 行，`<module>` 矩阵 = myFunction(data)
> > 
> > 文件“E:\Folder1\Folder2\src\myFunction.py”，第 16 行，在 myFunction 中返回 np.reshape(S, (num,num))
> > 
> > 文件“C:\Python27\lib\site-packages\numpy\core\fromnumeric.py”，第 171 行，reshape return reshape(newshape, order=order)
> 
> ValueError：超出最大允许尺寸

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T03:16:55.200

你为什么要通过`num,num`重塑，而不是你正在重塑的实际事物？

也许你想要类似的东西`return np.reshape(S, (num, num))`？

* * *

至于实际的错误，2^129 是一个相当大的数字——即使你的常规 64 位整数也只能索引到 2^64。您机器的内存可能不能包含 2^129 x 2^129 矩阵。

你确定你真的想要处理那么多吗？即使使用 GHz 处理器，如果您可以在单个 cpu 周期内对元素进行操作（您可能不能），这仍然是大约 2^100 秒的处理时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T05:24:47.860

[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)是 O(n^2)而不是 O(2^n)，（你很幸运）。可能这也是您的“StopIteration”问题的原因

```
S = np.array([])
num = len(data) ** 2  # This is not the same as 2 ** len(data) !!
y = product(data, repeat=2)
for x in count():
    while x <= num:
        z = y.next()
        i, j = z
        s = np.dot(i, j)
        S = np.insert(S, x, s)
        break #for the 'StopIteration' issue
    return np.reshape(S, (num, num)) 
```

# wordpress - robots.txt 让谷歌停止索引我的网站？

> ID：13170436
> 
> 赞同：1
> 
> 时间：2012-11-01T03:13:42.470
> 
> 标签：wordpress, robots.txt

这是我的机器人：

```
User-agent: *

Disallow: /feed/
Disallow: /trackback/
Disallow: /wp-admin/
Disallow: /wp-content/
Disallow: /wp-includes/
Disallow: /xmlrpc.php
Disallow: /wp-

Sitemap: http://chineselearnonline.com/sitemap.xml 
```

奇怪，我是从博客上拿来的。但我注意到它让谷歌停止索引我的 WordPress 网站。

那里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:39:16.373

正如所指出的，您将需要重定向，但对于 robots.txt，您缺少`allow`robots.txt 中的行：

```
User-agent: *
Allow: /

Disallow: /feed/
Disallow: /trackback/
Disallow: /wp-admin/
Disallow: /wp-content/
Disallow: /wp-includes/
Disallow: /xmlrpc.php 
```

这行没有意义 `Disallow: /wp-`，所以删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:28:56.673

听起来，当您将站点移动到另一台服务器时，您可能无意中更改了用于访问您站点的基本 URL。例如，您提到您的网站曾经在[http://chineselearnonline.com/v4](http://chineselearnonline.com/v4)访问，现在它位于[http://chineselearnonline.com/](http://chineselearnonline.com/)，没有 v4。

考虑到站点主题，其他人可能通过博客或其他形式的共享链接到您。如果搜索引擎试图遍历您的链接并发现它们已损坏，您在搜索引擎中的排名就会下降。

请注意，这与更改代码在实际服务器上的位置不同，只是指向该文件夹的 url。

要解决此问题，您可以编辑您的 htaccess 文件以添加规则以将所有 /v4 链接 301 重定向到新的基本 url，以便任何用户或搜索引擎实体将自动重定向到有效 url。这也告诉搜索引擎您的内容已永久移动到新位置。

如果您的链接在 Google 中消失了，建立 301 重定向可能会修复 Internet 上任何损坏的链接，并防止每个人都需要在其博客和网站中实际更新链接。这应该有助于建立您的 SEO 备份。

# hlsl - Visual Studio 2012 中的 DGSL（有向图着色器语言）编辑器

> ID：13170437
> 
> 赞同：4
> 
> 时间：2012-11-01T03:13:44.870
> 
> 标签：hlsl, maya

我在 VS 2012 中使用 DGSL（有向图着色器语言）编辑器来创建我希望导出到 HLSL 然后在 MAYA 中加载的着色器

[http://msdn.microsoft.com/en-us/library/hh315733.aspx](http://msdn.microsoft.com/en-us/library/hh315733.aspx)

在这个阶段，我一生都无法弄清楚为输入创建自定义命名并公开变量，以便我可以在 Maya 中建立连接。

关于 VS 的此功能的文档很少或根本没有。有没有人有使用此编辑器为 Maya 或 max 等程序创建着色器的经验？

# java - 连接到 Android 时是否必须为每个 CRUD 方法创建单独的 php 文件？

> ID：13170438
> 
> 赞同：0
> 
> 时间：2012-11-01T03:13:46.160
> 
> 标签：java, php, android, mysql, connect

我一直在网上查看有关使用 Android 连接 PHP 的示例，例如[http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/](http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/)。我见过的大多数示例都是这样的，它们只为一种数据库方法（如获取、读取或删除）创建一个 php 文件。因此，这是否意味着我必须为要查询的数据库表的每个不同的 CRUD 方法创建一个单独的 PHP 文件？有没有办法遵循通常的“模型”模型并在单个 PHP 文件中拥有所有 CRUD 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:16:29.637

您最好的选择是使用 JSON 接口与您的 PHP/MySQL 服务器通信。如果您愿意，您可以轻松地将所有 CRUD 方法放在一个文件中。

这是入门指南： http: [//andrewbrobinson.com/2011/01/29/building-an-android-app-with-php-json-backend-introduction/](http://andrewbrobinson.com/2011/01/29/building-an-android-app-with-php-json-backend-introduction/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:16:17.550

尝试

```
$hostname_localhost ="localhost";
$database_localhost ="mydatabase";
$username_localhost ="root";
$password_localhost ="";

$localhost = mysql_connect($hostname_localhost,$username_localhost,$password_localhost)
or
trigger_error(mysql_error(),E_USER_ERROR); 
```

好读

[http://www.coderzheaven.com/2011/07/27/android-phpmysql-connection-redone/](http://www.coderzheaven.com/2011/07/27/android-phpmysql-connection-redone/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:31:56.107

您可以使用 POST 或 GET 方法对同一个 PHP 文件执行不同的操作。

例如，在安卓上，

1.  要获取所有表格，请访问 yoururl.com/?iwantto=select
2.  要插入，您可以访问 yoururl.com/?iwantto=insert&data=asdf

在 php 中：

```
<?php
mysql_connect("host","username","password");
mysql_select_db("Deal");
$iwantto = $_GET['iwantto'];
if($iwantto=="select"){
    $sql=mysql_query("select * from CITY");
    while($row=mysql_fetch_assoc($sql))
        $output[]=$row;
    print(json_encode($output));
}
else if($iwantto=="insert")
{
    $data=$_GET['data'];
    mysql_query("delete from CITY where CITY_NAME like '".$data."'");
}
mysql_close();
?> 
```

# delphi - TClientDataSet 的 OnValidate

> ID：13170446
> 
> 赞同：5
> 
> 时间：2012-11-01T03:14:54.057
> 
> 标签：delphi, validation, tclientdataset, tfield

我正在尝试在 TClientDataSet 上的字段上编写 OnValidate 事件，类似于

```
procedure TForm8.ClientDataSet1MyFieldValidate(Sender: TField);
begin
  if Sender.AsFloat > 30 then
     raise Exception.Create('Too Much!!!');
end; 
```

但是 Sender.AsFloat 始终为 0 - 我如何进行字段级验证（我意识到在这种情况下我可以使用约束或设置 Min/Max 值）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:01:09.293

这是在 Delphi XE3 中引入的一个错误，这是[QC 报告](http://qc.embarcadero.com/wc/qcmain.aspx?d=110075)，以及我制作的快速[电影以清楚地说明问题。](http://youtu.be/_i0MPDIMF44)希望这将在下一次更新中得到修复。如果您需要立即修复，QC 页面上的其中一条评论中有一个热修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:14:37.127

这在 D2010 上运行良好，区别在哪里......

```
procedure TForm3.FloatValidate(Sender: TField);
begin
  if sender.AsFloat > 30 then Showmessage('No');

end;

procedure TForm3.Button1Click(Sender: TObject);
begin
   With Clientdataset1 do
    begin
      FieldDefs.add('ID',ftInteger,0);
      FieldDefs.add('Floatfield',ftFloat,0);
      Createdataset;
      Fields[1].OnValidate := FloatValidate;
    end;

end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T22:03:08.237

您可能想检查 Sender.NewValue 是否包含您所追求的值。如果客户端数据集上的更新缓存处于活动状态，您可以使用字段的 OldValue、Value 和 NewValue。

# ruby - facebook 数据到电子表格

> ID：13170451
> 
> 赞同：0
> 
> 时间：2012-11-01T03:15:35.007
> 
> 标签：ruby, facebook, google-app-engine, web-scraping, watir

我读过的一些问题 [http://facebook.stackoverflow.com/questions/1927676/scraping-a-facebook-app-for-data](http://facebook.stackoverflow.com/questions/1927676/scraping-a-facebook-app-for-data)

[http://facebook.stackoverflow.com/questions/2028940/access-to-facebook-data](http://facebook.stackoverflow.com/questions/2028940/access-to-facebook-data)

我想创建一个电子表格，其中包含我在 Facebook 游戏中拥有的所有差异项目，即武器盔甲。我认为这将相当容易。我已经创建了一些使用 c++、javascript、php 和较小程度的 python 的经验。我已经能够将项目导入 Excel 电子表格。但它会导入网页上的所有内容。我希望能够为每种类型的项目提供单独的电子表格，并自动更新电子表格。所以我去了谷歌数据API。一个问题是facebook不会让我的google电子表格脚本访问任何它将我重定向到登录页面的东西（或者至少这是我怀疑的，因为当我运行调试时它会显示一个重定向的url）。然后我读到了 javascript 如何在 coss 域中不起作用。[跨域javascript](https://stackoverflow.com/questions/9284768/cross-domain-javascript). 和 sience google spript 是基于 java 的，我认为这可能是问题所在。所以我去了 scraperwiki [https://scraperwiki.com/](https://scraperwiki.com/)并在 php 中创建了一个可以解决问题的脚本。现在我应该提到，我已经测试了我是否可以在不登录 facebook 的情况下访问此页面（这意味着我退出了 facebook 并调用了该站点，并且我能够在浏览器中拉出该站点并使用 java shell 来获取我想要的数据然后当我单击另一个需要我登录到 facebook 的链接时，登录屏幕会显示我会单击书签到我想要从中获取数据的页面，我可以看到它并从 javashell 获取数据。 )

所以在那长话之后，我的问题是 1\. oauth 会解决这个障碍吗？

2.  如果我创建了一个 FB 应用程序，我是否能够获取我想要的数据，然后能够将其获取到谷歌电子表格？

3.  像 Watin [https://stackoverflow.com/questions/tagged/watin](https://stackoverflow.com/questions/tagged/watin)这样的东西会是更好的方法吗？（我不知道它有什么能力）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:40:47.463

更新了工作解决方案！

致所有像我这样的新手程序员。停下来休息一下！几周以来，我一直在努力解决这个问题。我阅读了无数的博客、帖子、教程，我学习了 3 种新语言（好到让我头疼）。学习了我不知道有多少网络工具、爬虫网站、应用程序引擎、浏览器扩展，以及我什至不记得的一堆其他垃圾。一些女巫可能工作得更快。但经过几天的沮丧和头痛之后。看来老学校是要走的路。当我第一次开始研究 [我需要从 Facebook 游戏中抓取数据时看到这篇文章 - 使用 ruby](https://stackoverflow.com/questions/9695214/i-need-to-scrape-data-from-a-facebook-game-using-ruby)但我放弃了 ruby​​ 的想法，因为现在一切都已经过去了。似乎喜欢 java、php、python 或 Jquery。最后，红宝石让我免于更多的头痛。您仍然需要为自己弄清楚一些事情，但是如果您使用这些技巧，希望它对您来说会比对我更容易！

我用windows安装程序下载的。 [下载红宝石](http://www.ruby-lang.org/en/downloads/)

我使用谷歌浏览器来检查元素，因为它突出显示了您悬停在屏幕上的元素的位置。

这是一些入门代码

```
require 'rubygems'
require 'watir-webdriver' # or whichever gem you choose
require 'google_drive'
b = Watir::Browser.new
b.goto 'facebookgame url'
b.text_field(:id => 'email').set 'your email'
b.text_field(:id => 'pass').set 'your passwork'
b.button(:name => 'login').click
b.goto 'next url' # or find/get element value 
```

# objective-c - UIViewController 在 prepareForSegue 上抛出无法识别的选择器异常

> ID：13170453
> 
> 赞同：7
> 
> 时间：2012-11-01T03:15:49.973
> 
> 标签：objective-c, interface-builder, ios6, segue, cs193p

我正在尝试跟随斯坦福 CS193p iOS 编程讲座。其中一个名为“Happiness”的演示程序创建了两个 UIViewController，一个“PsychViewController”和一个“HappinessViewController”。它使用目标操作方法从 PsychViewController 到 HappinessViewController。

以下代码不断抛出此异常：“-[UIViewController setHappiness:]: unrecognized selector sent to instance”

这是有问题的代码：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString:@"ShowDiagnosis"]) {
    [segue.destinationViewController setHappiness:7];
}
} 
```

我搜索了这个站点和其他站点，通常出现此错误时，这是​​因为通用 UIViewController 没有正确设置为程序中使用的特定视图控制器对象，在本例中为“HappinessViewController”。但是我已经使用 IB 中的身份检查器将通用 UIViewController 设置为 HappinessViewController，但我仍然遇到异常。我正在撕扯我的头发，如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-01T03:32:54.420

让我们看一下异常：

```
-[UIViewController setHappiness:]: unrecognized selector sent to instance 
```

这会告诉您关于无法识别的消息的两件事。它告诉你选择器，`setHappiness:`. 它还告诉您接收器的实际运行时类，`UIViewController`.

当然，`UIViewController`没有名为 的方法`setHappiness:`。这就是你得到例外的原因。

您编写了一个`UIViewController`被调用的子类，`HappinessViewController`它*确实*有一个`setHappiness:`方法（或一个名为 的读/写属性`happiness`，它生成该方法）。并且您打算让接收者（目标视图控制器）成为该子类 ( `HappinessViewController`) 的一个实例。

但例外是告诉您目标视图控制器只是一个普通的`UIViewController`. 因此，即使您认为您做到了，您也可能没有*在*情节提要中设置视图控制器的自定义类。也许你设置了*其他*视图控制器的自定义类，但你没有设置这个 segue 目的地的类。

您需要在 Identity Inspector 中设置目标视图控制器的自定义类，如下所示：

![在身份检查器中设置自定义类](../Images/2b5e390a9096bf8173579868cff66b76.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T20:20:05.860

我解决了这个问题。尽管我已正确指定相关的 UIViewController 是幸福视图控制器，但链接器由于某种原因没有链接到正确的文件。修复方法是双击 Xcode 中的 .xcodeproj 文件，然后转到 Build Phases 并在“Compile Sources”下手动添加文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-16T08:06:10.943

对我来说，改变故事板中视图控制器的类是有效的。![在此处输入图像描述](../Images/91bc525eb4c3046e92bd366806084b95.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T03:19:27.867

试试这样：

```
HappinessViewController *controller = segue.destinationViewController;
[controller setHappiness:7]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-09T06:23:19.623

我今天遇到了同样的问题，这是因为我的自定义类在库中。库本身在构建阶段被链接，但这本身不足以吸引课程。所以最后我通过将以下行添加到我的 AppDelegate 来解决它。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   [ CustomClass class ];
} 
```

这迫使链接器拉入类。否则，仅在库中链接可能不足以引入类，除非它在应用程序中的某处被引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-12T19:00:34.357

我尝试添加一个 Cast 并且它对我有用，我遇到了同样的问题：

```
 FirstViewController *detailViewController =
    (FirstViewController *)[segue destinationViewController]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-21T00:57:51.363

检查哪个 prepareForSegue 正在触发。我的问题是在当前的 viewController 和传入的 viewController 中触发了 2 个 segue。解决方案，并且始终是一个好的做法是检查 segues 标识符。

```
- (void)prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
     if ([segue.identifier isEqualToString:@"segueIdentifier"]) {
    }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-05-13T19:36:42.527

分配前投射

```
HappinessViewController *controller = (HappinessViewController *)segue.destinationViewController;
[controller setHappiness:7]; 
```

确保在你的故事板中，HappinessViewController 被设置为你 VC 的类

# ruby - 仅当在模板中定义变量时才执行 Puppet 3 循环

> ID：13170457
> 
> 赞同：3
> 
> 时间：2012-11-01T03:16:09.923
> 
> 标签：ruby, templates, loops, erb, puppet

我正在尝试仅在`index`定义时才创建循环。但看起来 erb 无法处理 if 子句中的循环。

```
<% if(@index) %>
index <% index_files.each do |i| %> <%= i %> <% end %>;
<% end %> 
```

预期结果是： `index index.html index.php` 或 `""`

我得到的语法错误：

我的扁平化方法按预期失败了：

```
<% if(@index_files) %> try_files <% end %>  <% index_files.each do |i| %> <%= i %> <% end %> 
```

我定义`index_files`为`undef`=> 打破了每个循环我定义了一个空数组 => 因为定义了一个空数组，所以它不起作用。

也许我可以检查的长度`index_files`？还是我需要一种完全不同的方法来解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:40:41.567

我也在做同样的事情，它适用于我，也适用于 nginx ;)。

例如：`<% if @proxy_ignore_headers %> proxy_ignore_headers<% proxy_ignore_headers.each do |i| -%> <%= i %><% end -%>;`

这就像一个魅力，与你的唯一区别是使用 () 作为 if 条件，但我敢打赌 puppet 支持 ()。这很奇怪，也许你按下了一个错误的组合，生成了一个看不到的字符，但它弄乱了你的代码，尝试从头开始编写以防万一。

[你可以在这里看到完整的模板](https://github.com/guruHub/puppet-nginx/blob/guzmandev/templates/vhost/vhost_location_proxy.erb)

祝你好运

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T04:15:24.760

乍一看你只需要改变

```
index_files.each 
```

至

```
@index_files.each 
```

# java - 尝试在 Java 中使用 MouseListeners 绘制矩形会导致程序崩溃并且不会生成异常

> ID：13170463
> 
> 赞同：1
> 
> 时间：2012-11-01T03:16:37.890
> 
> 标签：java, applet, awt, mouselistener

小程序应绘制基于使用 MouseListener 拖出的矩形，同时球在小程序周围反弹。侦听器似乎工作，打印出鼠标工作的位置，并且球工作得很好。但是，一旦程序运行并拖动鼠标，小程序/浏览器就会冻结，并且没有输出到控制台。

这是所有的代码。我只是发布绘图方法，但我认为它可能不只是在那里。

```
import java.awt.*;
import java.applet.*;
import java.awt.event.*;
import java.util.Vector;

public class Bounce2 extends Applet implements ActionListener, AdjustmentListener, MouseListener, MouseMotionListener, Runnable
{
  //runtime variables
  boolean running = false;
  boolean kill = false;

  //buttons
  Button runbutton = new Button("Run");
  Button pausebutton = new Button("Pause");
  Button quitbutton = new Button("Quit");

  //text
  Label speedlabel = new Label("Speed");
  Label sizelabel = new Label("Size");

  Panel drawingpanel;

  //scrollbars
  private final int barHeight = 20, SLIDER_WIDTH = 10, MAXSPEED = 110, MINSPEED = 0, MAX_SIZE = 110, MIN_SIZE = 10;
  Scrollbar speedbar = new Scrollbar(Scrollbar.HORIZONTAL, MAXSPEED/2, SLIDER_WIDTH, MINSPEED, MAXSPEED);
  Scrollbar sizebar = new Scrollbar(Scrollbar.HORIZONTAL, MAX_SIZE/2, SLIDER_WIDTH, MIN_SIZE, MAX_SIZE);

  //drawn objs
  Ball ball;
  int size = 50;
  private Graphics obj;
  Image offscreen = null;
  Point loc = new Point(100,100); //location of the ball
  private Thread ballThread;

  //boundaries
  int boundx = 640;
  int boundy = 400;

  //directions
  int dx = 1; //1 = left, -1 = right
  int dy = 1; //1 = up, -1 = down

  //speed
  int speed = MAXSPEED/2;
  int delay = MAXSPEED - speed;

  //rectangle vector and associated things
  Vector r = new Vector();
  boolean flag = false;
  Point start, cur, end;

  //initialize the applet and draw everything
  public void init()
  {
    double colWeight[] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};//15 cols
    double rowWeight[] = {1,1,1,1,1,1,1,1,1,1}; //10 rows
    int colWidth[] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};//15 cols
    int rowHeight[] = {1,1,1,1,1,1,1,1,1,1}; //10 rows
    GridBagConstraints c = new GridBagConstraints();
    GridBagLayout gbl = new GridBagLayout();
    gbl.rowHeights = rowHeight;
    gbl.rowWeights = rowWeight;
    gbl.columnWeights = colWeight;
    gbl.columnWidths = colWidth;
    c.anchor = GridBagConstraints.CENTER;

    setBounds(0,0,480,640);
    setLayout(new BorderLayout());
    Panel controlpanel = new Panel();
    controlpanel.setLayout(gbl);
    controlpanel.setSize(640,80);

    drawingpanel = new Panel();
    drawingpanel.setSize(640,400);
    ball = new Ball();
    drawingpanel.setLayout(new BorderLayout());
    drawingpanel.add("Center",ball);

    //speed scrollbar
    c.weightx = 1;
    c.weighty = 1;
    c.gridwidth = 3;
    c.gridheight = 1;
    c.gridx = 1;
    c.gridy = 7;
    c.fill= GridBagConstraints.HORIZONTAL;
    gbl.setConstraints(this.speedbar,c);

    //run button
    c.weightx = 1;
    c.weighty = 1;
    c.gridwidth = 2;
    c.gridheight = 1;
    c.gridx = 5;
    c.gridy = 7;
    c.fill= GridBagConstraints.HORIZONTAL;
    gbl.setConstraints(this.runbutton,c);

    //pause button
    c.weightx = 1;
    c.weighty = 1;
    c.gridwidth = 2;
    c.gridheight = 1;
    c.gridx = 8;
    c.gridy = 7;
    c.fill= GridBagConstraints.HORIZONTAL;
    gbl.setConstraints(this.pausebutton,c);

    //size scrollbar
    c.weightx = 1;
    c.weighty = 1;
    c.gridwidth = 3;
    c.gridheight = 1;
    c.gridx = 11;
    c.gridy = 7;
    c.fill= GridBagConstraints.HORIZONTAL;
    gbl.setConstraints(this.sizebar,c);

    //speed text label
    c.weightx = 1;
    c.weighty = 1;
    c.gridwidth = 3;
    c.gridheight = 1;
    c.gridx = 1;
    c.gridy = 8;
    c.fill= GridBagConstraints.HORIZONTAL;
    gbl.setConstraints(this.speedlabel,c);

    //size text label
    c.weightx = 1;
    c.weighty = 1;
    c.gridwidth = 3;
    c.gridheight = 1;
    c.gridx = 11;
    c.gridy = 8;
    c.fill= GridBagConstraints.HORIZONTAL;
    gbl.setConstraints(this.sizelabel,c);

    //quit button
    c.weightx = 1;
    c.weighty = 1;
    c.gridwidth = 3;
    c.gridheight = 1;
    c.gridx = 6;
    c.gridy = 9;
    c.fill= GridBagConstraints.HORIZONTAL;
    gbl.setConstraints(this.quitbutton,c);

    //add to the screen
    controlpanel.add(this.speedbar);
    controlpanel.add(this.runbutton);
    controlpanel.add(this.pausebutton);
    controlpanel.add(this.sizebar);
    controlpanel.add(this.speedlabel);
    controlpanel.add(this.sizelabel);
    controlpanel.add(this.quitbutton);

    //add listners
    speedbar.addAdjustmentListener(this);
    runbutton.addActionListener(this);
    pausebutton.addActionListener(this);
    sizebar.addAdjustmentListener(this);
    quitbutton.addActionListener(this);
    ball.addMouseListener(this);
    ball.addMouseMotionListener(this);

    //add the panels
    add("South", controlpanel);
    add("Center", drawingpanel);

    //drawing paramaters
    loc = new Point(loc.x+dx, loc.y+dy);
  }

  public void start()
  {
    if (ballThread == null)
    {
      ballThread = new Thread(this);
      ballThread.start();
    }
  }

  public void run()
  {
    Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
    while (!kill)
    {
      if (running)
      {
        ball.repaint();
      }
      try
      {
        Thread.sleep(delay);
      }
      catch(InterruptedException e){System.err.println("Interrupted.");}
    }
    stop();
  }

  public void paint(Graphics g)
  {
    super.paint(g);
  }

  //class to handle animations
  class Ball extends Canvas
  {     
    public void move()
    {
      //if it will hit the right or left, flip the x direction and set it
      if (loc.x+size >= boundx || loc.x <= 0)
      { dx *= -1; }
      loc.x += dx;
      //if it will hit the top or bottom, flip the y direction and set it
      if (loc.y+size >= boundy || loc.y <= 0)
      { dy *= -1; }
      loc.y += dy;
    }

    public void update(Graphics g)
    {
      super.update(g);
      Graphics buffer;
      if (offscreen == null)
      {
        offscreen = createImage(getWidth(), getHeight());
      }
      buffer = offscreen.getGraphics();
      buffer.setColor(getBackground());
      buffer.fillRect(loc.x,loc.y,boundx, boundy);
      mypaint(buffer);
      g.drawImage(offscreen, 0, 0, this);

    }

    public void mypaint(Graphics g)
    {
      //update loc
      move();

      //draw
      g.setColor(Color.BLACK);
      g.drawOval(loc.x, loc.y, size, size);
      g.fillOval(loc.x, loc.y, size, size);

      if (flag)
      {
        if (!r.isEmpty())
        {
            int i = 0;
            while (i <= r.size())
            {
                g.drawRect(start.x,start.y,(cur.x-start.x),(cur.y-start.y));
                g.setColor(Color.gray);
                g.fillRect(start.x,start.y,(cur.x-start.x),(cur.y-start.y));
            }
          System.err.println(start + ", " + cur);
        }
      }
    }
  }

    public void mouseClicked(MouseEvent m)
    {
        Point p = m.getPoint();
        //if p intersects rect in r, remove all r
    }

    public void mousePressed(MouseEvent m)
    {
        flag = true;
        start = m.getPoint();
    }

    public void mouseDragged(MouseEvent m)
    {
        if (flag == true)
        {
            cur = m.getPoint();
        }
    }

    public void mouseReleased(MouseEvent m)
    {
        end = m.getPoint();
        flag = false;
    r.add(new Rectangle(start.x,start.y,end.x,end.y));
    } 

    public void mouseEntered(MouseEvent m){}
    public void mouseExited(MouseEvent m){}
    public void mouseMoved(MouseEvent m){}

  public void actionPerformed(ActionEvent e)
  {
    Object source = e.getSource();
    if (source == this.runbutton)
    {
      running = true;
    }
    else if (source == this.pausebutton)
    {
      running = false;
    }
    else if (source == this.quitbutton)
    {
      //kill processes
      kill = true;
      //remove listeners
      stop();
    }
  }

  public void adjustmentValueChanged(AdjustmentEvent e)
  {
    Object source = e.getSource();
    //set the new size.
    if (source == sizebar)
    {
      //check for clipping
      int newsize = sizebar.getValue();

      // x
      if (loc.x+newsize >= boundx)
      {
        newsize = boundx - loc.x - 1;
        sizebar.setValue(newsize);
      }

      // y
      if (loc.y+newsize >= boundy + 100)
      {
        newsize = boundy+100 - loc.y - 1;
        sizebar.setValue(newsize);
      }
      size = newsize;
    }
    if (source == speedbar)
    {
      speed = speedbar.getValue();
      delay = MAXSPEED - speed;
    }
  }

  public void stop()
  {
    this.speedbar.removeAdjustmentListener(this);
    this.runbutton.removeActionListener(this);
    this.pausebutton.removeActionListener(this);
    this.sizebar.removeAdjustmentListener(this);
    this.quitbutton.removeActionListener(this);
    this.removeMouseListener(this);
    this.removeMouseMotionListener(this);
    Thread.currentThread().setPriority(Thread.MIN_PRIORITY);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:27:29.083

嗯，有你的问题...

```
int i = 0;
while (i <= r.size()) {
    g.drawRect(start.x, start.y, (cur.x - start.x), (cur.y - start.y));
    g.setColor(Color.gray);
    g.fillRect(start.x, start.y, (cur.x - start.x), (cur.y - start.y));
} 
```

你有一个无限循环。 `i`永远不会是其他任何东西`0`......

虽然我们选择它`i <= r.size()`也会导致问题，因为它`Vector`是基于 0 的（即 0-size() - 1）。

尝试类似的东西；

```
for (int i = 0; i < r.size(); i++) {
    g.drawRect(start.x, start.y, (cur.x - start.x), (cur.y - start.y));
    g.setColor(Color.gray);
    g.fillRect(start.x, start.y, (cur.x - start.x), (cur.y - start.y));
} 
```

反而

# objective-c - objC中的initWith vs arrayWith？

> ID：13170466
> 
> 赞同：5
> 
> 时间：2012-11-01T03:16:57.490
> 
> 标签：objective-c, xcode, memory-management, collections, initialization

创建数组（或使用其各自工厂方法的任何其他集合）的优缺点是什么

```
[[NSArray alloc] init] 
```

对比

```
[NSArray array] 
```

在目标 C? 似乎后一种工厂方法让我们不必担心内存管理，所以我很好奇使用 alloc + init 是否有任何意义，尽管我现在对这两者之间的所有差异更感兴趣，以及为什么会选择一个而不是另一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T03:20:38.200

在 ARC 之前，有一个关键的区别。`alloc/init`案例返回一个*保留*的对象，而`array`案例返回一个*自动释放*的对象。

使用 ARC，差异就不那么重要了。可能第一种情况是头发效率更高，但在大多数情况下它们是可以互换的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:32:58.490

在第一个中，您拥有数组对象的所有权并且您必须释放它们。

```
NSMutableArray* p = [[NSMutableArray alloc] init]; 
```

[p 释放];

& 最后一个你不需要释放，因为你没有数组对象的所有权。

```
NSMutableArray* p = [NSMutableArray]; //this is autoreleased 
```

如果您在此调用 release，那么它将使您的应用程序崩溃。

# mysql - 模拟表锁定问题

> ID：13170468
> 
> 赞同：8
> 
> 时间：2012-11-01T03:17:15.357
> 
> 标签：mysql, locking

我继承了一个使用 InnoDB 表构建在 MySQL 数据库上的系统。该系统有一个在重负载下出现的错误。我创建了一些 jmeter 测试来加载系统，希望在受控环境中看到错误。但是，我没有正确强调系统，并且该错误从未出现。当前的理论是，严重锁定的表会导致回滚，从而使用户的数据处于奇怪状态。这可能意味着交易结构不正确，我想找到并修复它，但我需要先找到问题。

我推测如果我可以在数据库中创建各种受控的“表锁定负载”，我就可以在整个系统上运行我的模拟用户并强制错误发生或证明理论错误，但我不确定如何创建这样的一个东西。有谁知道如何最好地做到这一点？在这一点上，我什至不确定糟糕的第一个版本会是什么样子，所以任何让我入门的想法都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T05:00:11.443

如果您正在专门为表中的一行寻找锁定状态（我假设这就是您的意思，除非您正在对表本身进行动态更改）。您可以通过让第二个脚本在一组行上启动事务，然后在回滚或提交事务之前暂停一段时间来实现这一点。

假设您有这个表结构，例如：

```
CREATE TABLE `allkindsofvalues` (
  `value1` int(11) NOT NULL,
  `value2` int(11) NOT NULL,
  `irrelevant_value3` int(11) NOT NULL,
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

打开 MySQL 提示并启动事务：

```
BEGIN;

UPDATE allkindsofvalues SET irrelevant_value3 = '32143234232'; 
```

现在启动您的应用程序。此时，任何使用这些行的尝试都将等待启动的事务完成。

在 MySQL 提示符中 COMMIT 或 ROLLBACK 事务的那一刻，事情应该继续正常，但在那之前，行将处于锁定状态，无法访问。这听起来像是你试图复制的条件。

# android - 同步时删除代码生成的日历事件

> ID：13170469
> 
> 赞同：1
> 
> 时间：2012-11-01T03:17:15.347
> 
> 标签：android, calendar

我正在尝试使用仅与 API 14 及更高版本一起提供的新日历提供程序，我正在遵循本指南[http://developer.android.com/guide/topics/providers/calendar-provider.html](http://developer.android.com/guide/topics/providers/calendar-provider.html) 它的工作原理就像魅力一样，但是当我同步日历或日历自动同步时，我的事件消失或删除了，有人知道出了什么问题吗？

提前致谢

# java - 同义词集中的wordnet词短语

> ID：13170473
> 
> 赞同：3
> 
> 时间：2012-11-01T03:17:56.350
> 
> 标签：java, nlp, wordnet

我们如何在同义词集中找到词组？特别是，将这个同义词用于 adj “booked”：

> 预订、订婚、搁置——（提前预订）

我使用 RitaWN Java 包（WordNet 版本为 2.1），但似乎找不到短语。在上面的示例中，当我运行

```
RiWordnet wordnet = new RiWordnet(null);
String[] syn = wordnet.getSynset(word, "a", true);
for(int i = 0; i < syn.length; i++)
            System.out.println(syn[i]); 
```

它只输出

> 订婚

虽然没有列出“搁置”。

我已经测试了很多，但没有找到所有短语。另一个例子：

> 商品，贸易商品，商品——（商品）

那么 getSynset() 方法不会返回“贸易商品”。那么我们如何才能真正得到短语呢？

（ritawn 包从[http://rednoise.org/rita/wordnet/documentation/index.htm](http://rednoise.org/rita/wordnet/documentation/index.htm)获得）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T11:47:08.053

RiTaWN 似乎默认忽略“复合词”。您可以禁用此功能以获取完整的短语列表（下面的第 2 行）。

```
RiWordnet wordnet = new RiWordnet();
wordnet.ignoreCompoundWords(false);
String[] syn = wordnet.getSynset("booked", "a", true);
System.out.println(Arrays.asList(syn)); 
```

结果：

```
[INFO] RiTa.WordNet.version [033]
[booked, engaged, set-aside] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:47:11.137

这个答案有点偏离正确的领域，但无论如何......

Idilia 有一个类似 Wordnet 的在线数据库，它实际上比 Wordnet 更完整、更丰富。根据您在应用程序中的位置，这可能是有意义的，所以我要提到它。网站上有 Java 访问的编码示例。

在这种情况下，查询：

> [{"fs":"booked/J1", "引理":[], "definition":null}]

会回来

> { "fs" : "booked/J1", "lemma" : [ "set_aside", "set-aside", "engaged", "booked" ], "definition" : "提前预订。" }

# ios - iOS 嵌入视图

> ID：13170474
> 
> 赞同：0
> 
> 时间：2012-11-01T03:18:08.940
> 
> 标签：ios, view, controller, containers

我有一个使用故事板的应用程序，我想在我的主视图中有一个视图，并让它在我场景中的不同视图之间切换。

所以目前我有“容器对象”，我可以在其中嵌入另一个 viewController，但是当用户按下按钮时，我不知道如何更改嵌入的 viewController。

我猜这几乎就像我正在创建自己的 tabBarController。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:40:34.503

您可能需要一个视图控制器容器。

[创建自定义容器视图控制器](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ImplementingaContainerViewController.html#//apple_ref/doc/uid/TP40007457-CH11-SW1)

# jquery - 使 Mobiscroll 高度和宽度响应

> ID：13170476
> 
> 赞同：0
> 
> 时间：2012-11-01T03:18:11.137
> 
> 标签：jquery, css, mobiscroll

使用 Mobiscroll，高度和宽度在原始 JQuery 实现中设置。当屏幕尺寸改变时，我目前的宽度和高度随着 CSS @media 查询而改变。我想知道原始 JQuery 实现是否有办法。

我的 jQuery

```
$('ul.scroll-list select').scroller({
    preset: 'select',
    theme: 'ios',
    display: 'inline',
    mode: 'scroller',
    inputClass: 'i-txt',
    width: 50,
    height:50,
    onShow: function (html, instance) {
       $("input[id$='_dummy'], .scroll-list label").hide();
    }
}); 
```

我的 CSS

```
@media only screen and (max-width: 959px) {
    .ios .dww li {font-size:0.7em;}
    .dww.dwrc {height:150px !important;}
} 
```

想知道是否有更清洁的方法，通过主题或一些 JQuery 实现。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:20:22.573

您可以通过获取屏幕宽度来做到这一点`.width()`

```
$(selector).width(); //get the width you want 
$(window).width();   // returns width of browser viewport
$(document).width(); // returns width of HTML document 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:35:46.763

我解决了这个问题，这是最终代码：

```
// Add mobi scroller to fares page
    var scrollWidth = $('.scroll-list li').width() - 10;
    var scrollHeight = $('.scroll-list li').height();

    $('ul.scroll-list select').scroller({
        preset: 'select',
        theme: 'ios',
        display: 'inline',
        mode: 'scroller',
        inputClass: 'i-txt',
        width: scrollWidth,
        height: scrollHeight,
        onShow: function (html, instance) {
           $("input[id$='_dummy'], .scroll-list label").hide();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:46:21.443

这是我为调整方向更改的 mobiscroll 日期控件大小所做的操作：

```
 function setDatePickerWidthAndHeight()
 { 
    var scrollWidth = ($("div[id='main_content']").width()) / 4;
    var scrollHeight = scrollWidth / 2.5;
    var selectorBase1 = "date_1";
    $("#input_" + selectorBase1).eq(0).scroller('option', 'width', scrollWidth);
    $("#input_" + selectorBase1).eq(0).scroller('option', 'height', scrollHeight);
 }

 $(function () {
 $(window).bind('orientationchange', function (event) {
                setTimeout(setDatePickerWidthAndHeight(),100);
            });
 } 
```

另外，我在媒体查询中使用了与此类似的 css（与您的差别不大）来调整字体大小（“.dwwr td”不在媒体查询中）：

```
.dww li {
    font-size: 3.25em;
    }
.dwwr td {
    padding: 0;
} 
```

我使用类似于您的代码来初始化宽度和高度。

我不确定 .eq(0) 是什么，我不记得我在哪里看到其他人这样做但它有效......唯一的问题是在一些旧手机上它似乎变慢并最终在一些方向更改后使手机的浏览器崩溃。

注意：我认为宽度和高度属性适用于一个滚动条，因此是“/ 4”。由于有 3 个滚动条，如果我将宽度除以 4，它应该始终适合页面并考虑填充和边距。

在他们的[文档](http://docs.mobiscroll.com/22/mobiscroll-core)中没有“.eq(0)”的示例

编辑：

[这](https://stackoverflow.com/questions/11852970/using-mobiscroll-for-a-date-range)是我看到“.eq(0)”的地方。

编辑：

在这篇[文章](https://stackoverflow.com/questions/13710834/problems-with-mobiscroll-orientationchange-and-access-address-bar-crashes-some)中，我找到了一种让方向改变更好地工作的方法。

# perl - Perl Mechanize 绕过证书验证但遇到 auth/login

> ID：13170478
> 
> 赞同：2
> 
> 时间：2012-11-01T03:18:25.427
> 
> 标签：perl, https, www-mechanize

我在我的公司网络中工作并为他们的系统开发一个新模块。但是，他们已使所有 ssl 证书无效，因此我不得不绕过证书验证。

使用mechanize的功能忽略ssl，

```
my $mech = WWW::Mechanize->new(
ssl_opts => {
    verify_hostname => 0,
}, 
```

我能够绕过证书验证，但是遇到以下错误 `Error GETing https://192.168.100.82/login;jsessionid=legizzgnfjd6g73szziuhboc: Could not resolve view with name 'auth/login' in servlet with name 'mvc'`。

我不明白是因为我无法访问 https 站点的不被接受的证书，还是我做错了什么。请帮助我了解出了什么问题。

我要连接的站点是公司网络中的模块网站

这是初始化 mechanize 以忽略 ssl 后我的代码的运行。

```
my $url = 'https://192.168.100.82';
$mech->get( $url );
die $mech->response->status_line unless $mech->success; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:55:06.687

我发现可以通过使用 WWW::Mechanize::Firefox 控制 firefox 来成功加载页面。然而，缺点是它需要启动 firefox 浏览器才能运行。

我使用 cpan 安装 cpanm ，它允许我安装具有依赖关系的模块，它会自动检测这些依赖关系并将它们与您选择的模块一起安装。

首先，运行`install cpan`（可选），更新 cpan。并刷新`reload cpan`。

然后通过键入安装 cpanm`install App::cpanminus`并让它完成它的工作。

然后。输入 cmd 关闭 cpan 并启动 cpanm `cpanm`。然后键入`install WWW::Mechanize::Firefox`。让它完全下载一切

接下来 Firefox 需要用于 WWW::Mechanize::Firefox 的 Mozrepl 插件来控制浏览器，因此请前往浏览器并获取插件。

一旦完成，在工具下，从浏览器中的工具选项卡启动 MozRepl，脚本就可以启动了。

PS mechanize::firefox 对象仍初始化为`verify_hostnames=>0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:59:50.503

`Could not resolve view with name 'auth/login' in servlet with name 'mvc'`这是来自 Spring Framework 的错误消息。对我来说，这意味着您已经通过了证书检查，您正在访问该站点并且您无法使用有效的 Web 会话 ( authenticate )。我建议你替换 ; 在网址中使用 ? 传递 JSESSIONID 参数。

# javascript - JSLint 中出现意外的“=”错误

> ID：13170479
> 
> 赞同：0
> 
> 时间：2012-11-01T03:18:29.640
> 
> 标签：javascript, jslint

我在 zepto 扩展 js 文件上使用了 JSLint

它抛出了错误：

```
Unexpected '='. line 33 character 37 
```

第 33 行：

```
return (document.cookie = [encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value), options.expires ? '; expires=' + options.expires.toUTCString() : '', options.path ? '; path=' + options.path : '', options.domain ? '; domain=' + options.domain : '', options.secure ? '; secure' : ''].join('')); 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T03:20:37.067

将其拆分为 2 个语句：

```
document.cookie = [encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value), options.expires ? '; expires=' + options.expires.toUTCString() : '', options.path ? '; path=' + options.path : '', options.domain ? '; domain=' + options.domain : '', options.secure ? '; secure' : ''].join('');
return document.cookie; 
```

通常你不会在`return`表达式中使用赋值。

# objective-c - 获取 UIAlertView 以响应键盘上的返回，结果与 OK 按钮相同

> ID：13170480
> 
> 赞同：1
> 
> 时间：2012-11-01T03:18:53.577
> 
> 标签：objective-c, ios

如果按下警报上的按钮或按下键盘上的返回键，我想运行相同的代码。

`- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex` 适用于警报上的 OK 按钮，但我找不到返回键的等效项。

我一直在尝试`- (BOOL)textFieldShouldReturn:(UITextField *)alertTextField`，无济于事。

一年前，[本站](http://mobile.tutsplus.com/tutorials/iphone/ios-5-sdk-uialertview-text-input-and-validation/)评论中的三个人有同样的问题，没有得到回答：

> 如何让 alertview 响应键盘上的“Return”，其结果与点击“OK”按钮的结果相同？我似乎在 Google 上找不到任何适用于 iOS 5 SDK 的内容。

完成此操作所需的所有步骤是什么？

**编辑：**

进一步来说：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    [[NSUserDefaults standardUserDefaults] setObject:[alertView textFieldAtIndex:0].text forKey:@"url_preference"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

当用户按下 OK 时，该代码将运行。与键盘上的 Return 键类似的简单等效项是什么？

目前，我正在尝试这个：

```
- (BOOL)textFieldShouldReturn:(UITextField *)alertTextField {
    [alertTextField resignFirstResponder];
    NSLog(@"test");
    return YES;
} 
```

什么都不做。

这是我的警报的定义：

```
-(void) noUrl {

    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Add a URL" message:@"Change it later in Settings" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Load",nil]; //If you change button name, change it in the other alertView function
    alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    UITextField * alertTextField = [alert textFieldAtIndex:0];
    alertTextField.keyboardType = UIKeyboardTypeURL;
    alertTextField.returnKeyType = UIReturnKeyGo;
    alertTextField.enablesReturnKeyAutomatically = YES;
    alertTextField.placeholder = @"http://www.example.com";
    [alert show];
    return;

} 
```

如果需要将代码添加到另一个文件或另一个地方，我将不胜感激详细的细节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T03:24:44.450

放

```
[alert textFieldAtIndex:0].delegate = self; 
```

然后实施

```
- (BOOL)textFieldShouldReturn:(UITextField *)alertTextField {//add any method you want to execute to here. This method will be called when user taps on the textfield in alertview.
 [alertTextField resignFirstResponder];// to dismiss the keyboard.
 [alert dismissWithClickedButtonIndex:0 animated:YES];//this is called on alertview to dismiss it.
} 
```

也把`UITextFieldDelegate`你的 .h 文件作为，

```
@interface CustomViewController : UIViewController <UIAlertViewDelegate, UITextFieldDelegate> 
```

根据问题中的当前编辑，您错过了，

```
alertTextField.delegate = self; 
```

**更新：**

根据您的评论，将 alert 作为类级别变量，

```
@interface CustomViewController : UIViewController <UIAlertViewDelegate, UITextFieldDelegate> {
  UIAlertView *alert;
} 
```

然后将此方法更改为，

```
-(void) noUrl {

   alert = [[UIAlertView alloc] initWithTitle:@"Add a URL" message:@"Change it later in Settings" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Load",nil]; //If you change button name, change it in the other alertView function
   //rest of the code here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T10:12:47.100

我也有这个问题，提出的解决方案看起来不错，但不知何故我`[alertView dismissWithClickedButtonIdex:1 animated:YES]`关闭了 AlertView 但没有调用 AlertView 的委托方法

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    //...
} 
```

在单击按钮正确调用委托 UIAlertView 方法时，在键盘上按 enter 不会以编程方式触发它。我在这里想念什么？

调试显示 AlertView 的委托在 UITextFieldDelegate 方法中正确设置，所以我们在这里也不是在谈论 nil ：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:32:31.533

编辑：基于更新问题的全新答案。

根据更新的问题，ACB 的答案将起作用。如果用户点击警报视图上的确定按钮，警报视图委托方法将被调用。

如果用户点击返回，文本字段的委托将被调用，这反过来会关闭警报视图，而警报视图又会调用警报视图委托方法。

因此，在这两种情况下，警报视图都会被关闭，并且在这两种情况下都会调用警报视图委托方法。

如果您不希望在点击返回键时解除警报，那么答案就不同了。在这种情况下，创建一个可以从警报视图委托方法和文本字段委托方法调用的通用方法。并且不要从文本字段委托方法中关闭警报视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-23T16:58:25.937

有一种更简单的方法可以做到这一点，至少在 iOS 10 中是这样。我相信@iDev 的回答也有效，但我更喜欢这种基于配置的方法。

我不确定这适用于哪些其他版本的 iOS，或者在 API 文档中记录此行为的位置（例如：它[不在此处](https://developer.apple.com/library/tvos/documentation/UIKit/Reference/UIAlertAction_Class/#//apple_ref/c/tdef/UIAlertActionStyle)）。

## 在键盘关闭时保持警报打开：

如果您添加两个操作，两者都具有`.default`样式，则关闭键盘不会关闭警报或调用任何处理程序。例如：

```
let cancel = UIAlertAction(title: "Cancel", style: .default,  handler: nil)
let ok     = UIAlertAction(title: "Ok",     style: .default,  handler: nil)
// Both buttons are .default, so the framework doesn't know which action to take 
```

如果您正在阅读此问答，这不是您想要的行为，但它作为前后示例很有用。

## `.default`在键盘关闭时触发处理程序：

如果您仅将其中一项操作设置为`.default`，则关闭键盘将自动触发默认操作并关闭 alertView。例如：

```
let alert = UIAlertController(title: "Your Name", message: "What is your name?, preferredStyle: .alert)
// Note the `.cancel` style. This is key
let cancelBtn = UIAlertAction(title: "Cancel", style: .cancel,  handler: { (action) in print("cancel()") })
let okBtn     = UIAlertAction(title: "Ok",     style: .default, handler: { (action) in
  let text = alert.textFields?[0].text ?? ""
  print("User Entered: \(text)")
})
alert.addAction(cancelBtn)
alert.addAction(okBtn)
alert.preferredAction = okBtn // Make this button the highlighted/bold one
alert.addTextField {
  $0.returnKeyType = .done // optional, but has appearance of a dismissing button
} 
```

你可以看到我也在设置`preferredAction`，所以我的取消按钮不是粗体，并指定键盘的主按钮应该是亮蓝色的“完成”样式。这些都不是执行默认处理程序所必需的，但对我来说似乎是更好的用户体验。

# php - 请帮我调整此脚本以加载外部 XML 而不是本地

> ID：13170481
> 
> 赞同：0
> 
> 时间：2012-11-01T03:19:18.397
> 
> 标签：php, xml

我需要帮助来编辑这个 PHP 脚本。目前它在本地服务器上查找最新的 XML 文件，但我希望让它从另一台服务器加载特定的 XML 文件。

```
 define('XML_LOCATION', "../"); //relative to this file 
```

……

```
function load_xpath($dir=XML_LOCATION) {
    if ($_REQUEST[SORTORDER] == DEFAULTSORT) {
        //$dom = new DOMDocument;
        //$dom->load($this->latest_xml_file($dir));
        $dom = $this->load_xslt($this->latest_xml_file($dir), $this->xslprops[LENGTHDESC][XSL], $this->xslprops[LENGTHDESC][SORT]);
    }
    else {
        $dom = $this->load_xslt($this->latest_xml_file($dir), $this->xslprops[$_REQUEST[SORTORDER]][XSL], $this->xslprops[$_REQUEST[SORTORDER]][SORT]);
    }
    $xp = new DOMXPath($dom);
    $xp->registerNamespace(NS, "http://www.starstandard.org/STAR/5");
    return($xp);
}

function load_xslt($xml, $xsl="", $sort_order="ascending") {
    $domxml = new DOMDocument;
    $domxsl = new DOMDocument;
    if ($domxml->load($xml) && $domxsl->load($xsl)) {
    //if ($domxml->loadXML($xml) & $domxsl->loadXML($xsl)) {
        $proc = new XSLTProcessor();
        $proc->importStylesheet($domxsl);
        $proc->setParameter(NS, 'sortorder', $sort_order);
        return $proc->transformToDoc($domxml);
    }
    else {
        //TODO: decide on error out method
    }
}

function latest_xml_file ($dir=XML_LOCATION) {
    $xml_list = array();
    if (is_dir($dir)) {
        if ($dh = opendir($dir)) {
            while (($file = readdir($dh)) !== false) {
                if (preg_match('/.*\.xml$/i', $file)) {
                    array_push ($xml_list, $dir.$file);
                }
            }
            closedir($dh);
        }
    }

    rsort($xml_list);
    return $xml_list[0];
} 
```

我确定不需要很多代码，因为我不需要它来计算最新的文件，只需加载外部文件即可。
例如： [https](https://services.boatwizard.com/bridge/events/ae0324ff-e1a5-4a77-9783-f41248bfa975/boats) ://services.boatwizard.com/bridge/events/ae0324ff-e1a5-4a77-9783-f41248bfa975/boats 将是外部 XML。

我真的不知道 php 或 xml ......但我确定如果有人可以帮助我更改代码，它会一切正常！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:17:16.940

像这样的东西：

```
$remoteFile = file_get_contents('https://services.boatwizard.com/bridge/events/ae0324ff-e1a5-4a77-9783-f41248bfa975/boats'); 

function load_xpath($remoteFile) {
    $dom = $this->load_xslt($remoteFile, $this->xslprops[LENGTHDESC][XSL], $this->xslprops[LENGTHDESC][SORT]);
    $xp = new DOMXPath($dom);
    $xp->registerNamespace(NS, "http://www.starstandard.org/STAR/5");
    return($xp); 
```

}

# android - 如何对特定的 BroadcastReceiver 意图做出反应

> ID：13170484
> 
> 赞同：3
> 
> 时间：2012-11-01T03:19:40.847
> 
> 标签：android, android-intent

我正在尝试做基本的接收器，并让它在电池状态发生变化时显示祝酒词，但是当一个人发生变化时，所有其他祝酒词也会被执行。

我正在通过 telnet 使用 AVD 操作电池

```
public class battery1 extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        String strCharge = null, strHealth = null, strPlug = null;
        int status, health, plugged, temp;

        status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
        String action = intent.getAction();

        if (intent.hasExtra(BatteryManager.EXTRA_STATUS)) {
            switch(status) {
            case BatteryManager.BATTERY_STATUS_CHARGING:
                strCharge = "Charging";
                break;
            case BatteryManager.BATTERY_STATUS_DISCHARGING:
                strCharge = "Discharging";
                break;
            case BatteryManager.BATTERY_STATUS_FULL:
                strCharge = "Full";
                break;
            case BatteryManager.BATTERY_STATUS_UNKNOWN:
                strCharge = "Unknown";
                break;
            }

            Toast.makeText(context,"Charging status: " + strCharge, Toast.LENGTH_SHORT).show();
        }

        health = intent.getIntExtra(BatteryManager.EXTRA_HEALTH, -1);
        if (intent.hasExtra(BatteryManager.EXTRA_HEALTH))
        {
            switch (health) {
            case BatteryManager.BATTERY_HEALTH_DEAD:
                strHealth = "Dead";
                break;
            case BatteryManager.BATTERY_HEALTH_GOOD:
                strHealth = "Good";
                break;
            case BatteryManager.BATTERY_HEALTH_OVER_VOLTAGE:
                strHealth = "Over voltage";
                break;
            case BatteryManager.BATTERY_HEALTH_OVERHEAT:
                strHealth = "Overheat";
                break;
            case BatteryManager.BATTERY_HEALTH_UNKNOWN:
                strHealth = "Unknown";
                break;
            }

            Toast.makeText(context,"Battery health is " + strHealth, Toast.LENGTH_SHORT).show();
        }

    }
} 
```

# android - android为什么会得到不同的wifi连接状态

> ID：13170489
> 
> 赞同：0
> 
> 时间：2012-11-01T03:20:24.713
> 
> 标签：android, wifi

我希望做一个 getConnectState() 布尔函数。我在下面使用两种方式。我不知道为什么在某些情况下会有不同的结果。就像我打开 WiFi 时，有时第一个会返回 true，但第二个会返回 false；在这种情况下，WiFi正在打开但尚未连接，我希望我能弄错。谁能向我解释为什么第一个功能告诉我 WiFi 已启用。

```
 WifiManager wifiManager=(WifiManager) context.getSystemService(Context.WIFI_SERVICE);
    if(wifiManager.getWifiState()==WifiManager.WIFI_STATE_ENABLED)
        return true;
    else
        return false; 
```

和

```
 ConnectivityManager conManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networInfo = conManager.getActiveNetworkInfo(); 
    if (networInfo == null || !networInfo.isAvailable()) { 
        return false;
    }
    return true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:40:37.363

```
WifiManager.WIFI_STATE_ENABLED 
```

只检查wifi连接是否开启，不检查是否连接。您可以使用以下命令检查连接状态：

```
ConnectivityManager conManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo networInfo = conManager.getActiveNetworkInfo();
if(networInfo.getState()==State.CONNECTED) 
```

如果您想确保网络正在使用 WIFI，您可以使用

```
networInfo.getType()==connection.TYPE_WIFI 
```

# msbuild - 使用 msdeploy 和 Visual Studio 2012 构建一次并部署到多个环境

> ID：13170493
> 
> 赞同：39
> 
> 时间：2012-11-01T03:21:01.840
> 
> 标签：msbuild, msdeploy

致力于为多种解决方案集中配置、应用程序设置和连接字符串，同时切换到使用命令行中的 msdeploy 来部署 Web 应用程序。理想情况下，我希望构建包一次，并在将包部署到每个环境时获得最新的配置。我需要一些关于最佳方法的建议。

1.  使用 Parameters.xml 和 SetParameters.xml 文件动态换出设置和连接字符串。见[http://vishaljoshi.blogspot.com/2010/07/web-deploy-parameterization-in-action.html](http://vishaljoshi.blogspot.com/2010/07/web-deploy-parameterization-in-action.html)
2.  使用 machine.config 或服务器级别的 web.config 文件来存储常见的应用程序设置和连接字符串。
3.  [使用来自https://github.com/sayedihashimi/package-web](https://github.com/sayedihashimi/package-web)的 packageweb NuGet 包，它可以使用 web.config 转换和 msdeploy。
4.  使用 file 或 configSource 属性以及 SetParameters 来指向不同的配置文件，但必须与 Web 根目录相对。
5.  使用发布配置文件。请参阅 [使用发布配置文件部署现有包](https://stackoverflow.com/questions/11683243/deploying-an-existing-package-using-publish-profiles)

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-11T22:04:50.883

我可以详细说明选项#1/#3 并比较它们。之前的回复是不准确的说你必须用PackageWeb构建多次，你只需要构建一次。

### 选项 1：Parameters.xml 和 SetParameters.xml

在这种方法中，您将在您的 Web 项目中创建一个 parameters.xml 文件，该文件将声明其他 Web 部署参数。

构建 Web 部署包时，将在包中创建在 parameters.xml 中声明的参数。创建此 Web 部署包时，web.config 文件将根据构建配置进行转换（[现在也可能是特定于配置文件的转换](http://sedodream.com/2012/08/19/ProfileSpecificWebconfigTransformsAndTransformPreview.aspx)）。

您可以使用该包和 setparameters.xml 来发布指定 Web 部署参数值的包。您可以创建不同的 setparameters.xml 文件并将其与同一个包一起使用以发布到多个目标。要使用此技术发布，您可以使用 VS 生成的 deploy.cmd 或使用正确的参数集调用 msdeploy.exe。

### 选项 3：PackageWeb

PackageWeb 扩展了包过程，因此当您创建 Web 部署包时，包中包含 web.config 转换以及可以执行转换的程序集。

除此之外，当您创建 Web 部署包时，还会生成一个 publish-interactive.ps1 文件。你可以使用这个文件来发布你的包。它会提示您；要应用的 web.config 转换、Web 部署参数值和 Web 部署端点信息本身。当您运行发布时，您提供的值将保存到`publish-configuration.ps1.readme`. 您可以删除 .readme 并且 publish-interactive.ps1 将使用该文件中的值来自动发布。您还可以[指定要用于设置的文件](https://github.com/sayedihashimi/package-web/pull/17)。

如果您在 VS 创建 web 部署包时创建了 parameters.xml 文件，它将导致 web 部署参数包含在包中。PackageWeb 会选择这些并提示您。

那么这些方法之间有什么区别呢？

使用选项#1，进入包的 web.config 已经被转换。您将没有机会再次转换文件。使用这两种方法，您都可以指定 Web 部署参数值，以便满足您的需求。如果您将大块的 XML 从一个环境修改到另一个环境，那么 web.config 转换可能会有所帮助。所以 PackageWeb 可能是更好的选择。

使用选项#1，您必须手动创建 SetParameters.xml 文件。使用 PackageWeb，您可以使用 WhatIf 选项运行该过程。系统将提示您输入值，它会为您创建设置文件。

您可以轻松地自动化这两种方法。PackageWeb 本质上建立在parameters.xml/setparameters.xml 技术之上，并提供了一个超集的功能。

如果您想用最少的移动部件使事情尽可能简单，我会推荐选项 #1，因为如果需要，您可以直接调用 msdeploy.exe。

如果您想简化发布的自动化并且您更喜欢 PowerShell 而不是标准命令提示符，那么请尝试 PackageWeb。

[我在http://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx](http://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx)在 PackageWeb 上有一个 5 分钟的视频。如果您要发布 Web 部署包，我鼓励你们尝试一下。如果它不能满足您的需求，请告诉我，因为我们以后可能会以更正式的方式使用我们在 PackageWeb 中学到的东西。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-06T19:47:20.430

我们使用选项#1，效果很好。我们使用这种方法部署到大约 30-40 个站点和应用程序。

我认为选项 #2 会给您或开发人员带来麻烦。您必须确保在部署时从配置中删除带有设置的部分，或者将它们锁定在服务器上，以便本地配置无法添加它们。

对于选项 #3，您将必须进行多次构建才能获得转换后的配置文件。如果您要部署大量站点，这也不是很可行。

选项 #4 可以工作，但您可能会在此处遇到限制。要么整个​​部分在一个单独的文件中，要么全部在主文件中，因此没有中间。

选项 #5 看起来很有趣，但我没有使用它，所以我不能多说。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-11T23:14:04.463

我们使用#5，效果很好。使用 MSBuild 发布配置文件提供了很多灵活性（项目特别有用）。

在我们的部署管道中，只有网站包、构建/部署目标和发布配置文件可用于部署阶段。源代码（包括项目文件）仅由构建/测试阶段使用。

仅供参考，我们专门使用了发布配置文件，因为您很快就会遇到将特定环境的服务器详细信息/凭据、跳过子句和参数值保存在一起的问题。WPP / Publish Profiles 跟踪文件中的所有这些内容`pubxml`，MSBuild 的功能允许为常见但“嘈杂”的任务提供一些不错的约定优于配置的“帮助程序”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-15T23:16:01.447

我最终解决了这个问题，结合在 TeamCity 上运行的 msbuild 来创建可供[OctopusDeploy](http://www.octopusdeploy.com)使用的 NuGet 包。

Octopus 允许打包成 nuget 包（构建一次）的应用程序通过多个环境推送。可以使用标准 ms 转换在每个环境甚至每台机器上转换配置。下面是相关 Octopus 文档的链接。

[八达通包装](http://docs.octopusdeploy.com/display/OD/Packaging+applications)

[配置配置转换](http://docs.octopusdeploy.com/display/OD/Configuration+files)

# javascript - 通过动态加载 javascript 来提高网站性能？

> ID：13170495
> 
> 赞同：0
> 
> 时间：2012-11-01T03:21:15.367
> 
> 标签：javascript, jquery

我想知道这是否是通常完成的事情或可能的事情（我是新手）假设你有一个沉重的 javascripted 网站。基本上是一个 Web 应用程序页面。如果页面的一部分是邮箱怎么办......并且用户不一定立即使用它。您能否在页面加载后下载邮箱所需的 javascript，或者甚至在他们需要使用邮箱时下载？我从另一个问题中看到了这一点：

```
$.getScript("my_lovely_script.js", function(){

alert("Script loaded and executed."); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T03:24:01.110

是的，您可以“稍后”加载非必要脚本以避免在显示初始页面之前对其进行处理。

有几种方法：

1.  您可以将脚本标记标记为延迟或异步（[有关详细信息，请参阅 MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/script)），因此浏览器将异步加载它，并且不会为加载或运行脚本而暂停页面显示。
2.  您只能根据需要动态加载它。
3.  `<body>`在标记之前的右侧末尾加载脚本，`</body>`以便页面可以在加载之前显示。

在您继续这条路之前，我强烈建议您测量页面的加载资源并找出时间的真正去向。在您测量时间实际去向之前过早优化很少是改进事情的最有效方法。Chrome 调试器可以显示大量有关资源加载时间的数据。

另外，请记住，优化有效缓存的设计可能非常有效，因为您的脚本是为您网站的第一页加载的，它们将被缓存用于所有未来的页面，并且将从浏览器磁盘或内存中非常非常快速地加载缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:25:32.000

是的，这是可能的并且已经完成。

您可以随时将脚本标签添加到文档中。您还可以使用 LabJs 之类的实用程序来帮助您完成这项工作。

[http://labjs.com/](http://labjs.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:25:35.060

是的，您可以延迟加载脚本，但是您可能应该做的是转到[https://developers.google.com/speed/pagespeed/](https://developers.google.com/speed/pagespeed/)之类的东西，看看花了这么长时间并对此进行优化。通过使用同时从多个域加载等技术以及使用[https://github.com/mishoo/UglifyJS2](https://github.com/mishoo/UglifyJS2)等工具来组合、压缩和缩小 js 代码，您很有可能会看到更多的整体性能

# php - 如何在 drupal 7 中制作像 Stackoverflow 这样的主菜单？

> ID：13170496
> 
> 赞同：3
> 
> 时间：2012-11-01T03:21:38.220
> 
> 标签：php, drupal, drupal-7, drupal-theming

如何在drupal 7中自定义输出菜单，如堆栈。主菜单链接出现在上面，子菜单链接出现在下面，或者像这样的一些菜单样式。

在 Bartik 主题中，$main_menu 变量仅包含主菜单信息，但没有子菜单。所以我必须自定义这个变量或做其他事情来解决我的问题？这就是我所说的：

```
<div id="main-menu" class="navigation">
    <?php print theme('links__system_main_menu', array(
      'links' => $main_menu,
      'attributes' => array(
        'id' => 'main-menu-links',
        'class' => array('links', 'clearfix'),
      ),
      'heading' => array(
        'text' => t('Main menu'),
        'level' => 'h2',
        'class' => array('element-invisible'),
      ),
    )); ?>
  </div> <!-- /#main-menu --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:27:10.927

您可以将 drupal 的标准菜单输出与`parent menu items`和一起使用`sub menu items`，然后使用 CSS 和 javaScript 根据自己的喜好自定义外观。

您可以受益于这样的事实，即`sub menu items`仅会出现在活跃的父母身上。

只要确保`Mark as expanded`for ALL`parent menu items`被选中，这样它们就不会默认显示。

**更新**：

不要打印模板文件中的菜单。相反，在相同位置创建一个区域，然后安装[菜单块模块](http://drupal.org/project/menu_block)。

这种方式比您的更灵活，并为您提供了更多控制菜单的选项（例如子项的深度）。

查看[模块文档](http://drupal.org/node/748022)以获取更多详细信息。`Configuring menu blocks`部分。

希望这会有所帮助……穆罕默德。

# c# - 如何使用网络将 XML 文件发送到另一台服务器？

> ID：13170497
> 
> 赞同：0
> 
> 时间：2012-11-01T03:21:49.893
> 
> 标签：c#, web-services, webrequest

我有一个 xml 文件，我想使用网络将它发送到另一台服务器。所以我写下面的代码

```
private string GetTextFromXMLFile(string file)
{
    StreamReader reader = new StreamReader(file);
    string ret = reader.ReadToEnd();
    reader.Close();
    return ret;
}

public ActionResult Index()
{
    WebRequest req = null;
    WebResponse rsp = null;

    try
    {
        string fileName = Server.MapPath("~\\client-authentication.xml");
        string uri = "http://10.3.4.84/";
        req = WebRequest.Create(uri);
        req.Method = "POST";        
        req.ContentType = "text/xml\r\n"; 
        StreamWriter writer = new StreamWriter(req.GetRequestStream());
        writer.WriteLine(this.GetTextFromXMLFile(fileName));
        writer.Close();

        rsp = req.GetResponse(); 
        StreamReader sr = new StreamReader(rsp.GetResponseStream());
    }
} 
```

但它不起作用。有什么问题？如何发送“client-authentication.xml”文件？

# java - java repaint() 问题

> ID：13170502
> 
> 赞同：0
> 
> 时间：2012-11-01T03:22:38.443
> 
> 标签：java, swing, repaint

在使用任何类型的转换调用重绘时我遇到了一些问题，例如： g2D.scale(1.1,1.1) 请参阅代码示例 repaint() 没有问题，但是如果您调用 repaint(x,y,w,h) 则重绘都是梨形的，不起作用。你如何解决这个问题？

```
import javax.swing.SwingUtilities;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.BorderFactory;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseMotionListener;
import java.awt.event.MouseMotionAdapter;

public class RepaintDemo {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI(); 
            }
        });
    }

    private static void createAndShowGUI() {
        JFrame f = new JFrame("Swing Paint Demo");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
        f.add(new MyPanel());
        f.setSize(400,400);
        f.setVisible(true);
    } 
}

class MyPanel extends JPanel {

    private int squareX = 50;
    private int squareY = 50;
    private int squareW = 20;
    private int squareH = 20;

    public MyPanel() {

        setBorder(BorderFactory.createLineBorder(Color.black));

        addMouseListener(new MouseAdapter() {
            public void mousePressed(MouseEvent e) {
                moveSquare(e.getX(),e.getY());
            }
        });

        addMouseMotionListener(new MouseAdapter() {
            public void mouseDragged(MouseEvent e) {
                moveSquare(e.getX(),e.getY());
            }
        });

    }

    private void moveSquare(int x, int y) {
        int OFFSET = 1;
        if ((squareX!=x) || (squareY!=y)) {
          repaint(squareX,squareY,squareW+OFFSET,squareH+OFFSET);
            squareX=x;
            squareY=y;
            repaint(squareX,squareY,squareW+OFFSET,squareH+OFFSET);
        } 
    }

    protected void paintComponent(Graphics g) {
        super.paintComponent(g);       
       Graphics2D g2D = (Graphics2D)g; 
       g2D.scale(1.1,1.1);
        g.setColor(Color.RED);
        g.fillRect(squareX,squareY,squareW,squareH);
        g.setColor(Color.BLACK);
        g.drawRect(squareX,squareY,squareW,squareH);
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:40:38.227

像这样的东西怎么样

```
 if ((squareX!=x) || (squareY!=y)) {
        repaint(squareX,squareY,squareW+OFFSET,squareH+OFFSET);
        squareX=x;
        squareY=y;
        repaint(squareX+x,squareY+y,squareW+x+OFFSET,squareH+y+OFFSET);
 } 
```

显然，您可以根据您的特定需求修改和改进行为

# mysql - 狮身人面像获得数百万个结果

> ID：13170509
> 
> 赞同：0
> 
> 时间：2012-11-01T03:24:43.437
> 
> 标签：mysql, performance, sphinx

我使用**MySQL** + **Sphinx**来存储数百万行数据。我们有网站可以查看我们数据库中的所有信息。

例如，电影标题（**100,000,000**行）。我需要在我们的网站上查看所有这些内容，每页 100 个标题。另外，我需要按演员受欢迎程度排序。

对于前 10 页，一切都很好。但在那之后我达到了[max_matches](http://sphinxsearch.com/docs/1.10/conf-max-matches.html)限制。增加此限制将强制 sphinx 使用更多 CPU/RAM。

另外，我什至无法将 max_matches 设置为**20,000,000**。

> 警告：max_matches=20000000 越界；使用默认 1000

我可以使用 MySQL 执行如下查询：

```
SELECT * FROM titles WHERE tid >= $start AND tid <= $end 
```

使用**tid**索引。但我无法按**tid**对其进行排序。我需要按其他表中的信息对我的标题进行排序。

访问数百万行、排序并快速完成的最佳方法是什么。请帮忙。

**更新**：来自狮身人面像来源：**/src/searchd.cpp**

```
if ( iMax<0 || iMax>10000000 )
{
    sphWarning ( "max_matches=%d out of bounds; using default 1000", iMax );
} else
{
    g_iMaxMatches = iMax;
} 
```

**10000000**是极限吗？我怎样才能得到更多的补偿？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:35:15.163

如果您的排序顺序基于属性（演员受欢迎程度） - 而不是狮身人面像计算的重量 - 那么可以只使用游标。

因为可以通过这个属性过滤。

[http://sphinxsearch.com/forum/search.html?q=cursors&f=1](http://sphinxsearch.com/forum/search.html?q=cursors&f=1)

我确实想知道你是否真的需要它。每页 100 个项目，max_matches 为 1M，意味着 10,000 页结果。您的访问者真的会阅读 10,000 页的结果吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:42:44.150

使用`LIMIT`( [select api](http://sphinxsearch.com/docs/2.0.6/sphinxql-select.html) ) 检索特定页面。

您想要订购的任何东西都需要包含在索引中，您不能在此处使用连接。

# java - 带有 PHP 的 Android JSON，重音字符未正确处理

> ID：13170512
> 
> 赞同：1
> 
> 时间：2012-11-01T03:24:51.423
> 
> 标签：java, php, android, json

简而言之，在将字符串从我的 android 应用程序发送到 php 并使用 JSON 对其进行解码时，法语字符会造成麻烦。这是我在我的 android 应用程序 (Java) 中所做的事情

```
 HttpPost httppost = new HttpPost(//my server and filename);

    try {
       List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);

       nameValuePairs.add(new BasicNameValuePair("payload", jsonObj.toString()));
       httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

       // Execute HTTP Post Request
       HttpResponse response = httpclient.execute(httppost);
     }.... 
```

这是我的php代码

```
$_POST['payload'] = stripslashes($_POST['payload']); 
$payload = $_POST['payload'];
error_log(" $payload ", 0);
$payloadObj = json_decode($payload);
error_log(" $payloadObj ", 0); 
```

当使用英文字母时，一切都很完美，但是很完美，但是当我重音法语字母时，它就不起作用了。我插入了上面的错误日志以查看我得到了什么，我注意到对于法语字母，有效负载将法语字母显示为 �，而 payloadObj 为空，所以我猜解码失败。

请帮帮我，问题到底出在哪里（在什么阶段）？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:35:53.143

您是否尝试使用 iconv() 修复它？

```
//$payload = $_POST['payload'];
$payload = (isset($_POST['payload'])) ? iconv("UTF-8","UTF-8//IGNORE",$_POST['payload']) ? '';
error_log(" $payload ", 0);
$payloadObj = json_decode($payload);
error_log(" $payloadObj ", 0); 
```

# python - 当我在 Python 中裁剪图像时，它返回“NoneType”

> ID：13170514
> 
> 赞同：2
> 
> 时间：2012-11-01T03:24:57.027
> 
> 标签：python, python-imaging-library

```
croppedImage = image.crop(200, 200, 200, 200)

window = Window(800, 800)

window.add(croppedImage)

window.wait()

window.close()

Error message: ParameterTypeError: Incorrect type for parameter 'graphic' : NoneType, expected GraphicalObject 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T03:29:43.750

这通常意味着该`crop`函数通过更改它应用到的图像对象来工作，而不是创建一个新对象 - 即，您想要这样做：

```
image.crop(200, 200, 200, 200)
window.add(image)
window.wait()
window.close() 
```

# media-queries - 检测 div 何时使用 jQuery 更改宽度的最佳方法是什么？

> ID：13170516
> 
> 赞同：1
> 
> 时间：2012-11-01T03:25:14.880
> 
> 标签：media-queries, jquery, window-resize

我正在使用媒体查询调整 div 的宽度。当该 div 更改宽度时，我需要页面做出反应。

但是，我使用`.resize`了 ，它会触发两次，并在用户进一步与 div 交互时导致问题。我不能使用`.live()`，因为这需要用户进行交互才能达到预期的效果。最后，我调查`DOMSubtreeModified`过，但已经贬值了。

简单来说，这就是我想要做的：

```
$('#element').watchForChange(function(){
     *...do stuff here when the change happens...*
}); 
```

感谢你的协助。

- - - 编辑 - - - -

让我澄清一下我在此示例中看到的 resize 常见问题：

```
<div id="box"></div>
<span id="button">Open</span> 
```

在上面的例子中假设`#box`是 400x400 并且处于“打开”状态`(display:block)`。当窗口大小调整为 800 像素时，我希望该框关闭（显示：无）。“打开”按钮将使用 jquery 再次打开该框`($('#button').click(function(){...});)`

我一直在唱的问题是，当我单击“打开”时，框会打开然后关闭。第二次点击工作正常。

Jquery 在事件处理程序中保留了第二个调用。我无法解绑它，因为我需要再次检查大小。

我没有使用打开关闭功能。相反，我正在使用滑块上的下一个按钮。我需要在调整大小时将项目重置回开始。我可以让他们重置，没问题。问题是：“下一步”的第二次单击将其重置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T03:37:38.243

使用此处找到的技术：

[JQuery：如何仅在完成调整大小后才调用 RESIZE 事件？](https://stackoverflow.com/questions/4298612/jquery-how-to-call-resize-event-only-once-its-finished-resizing)

[http://jsfiddle.net/Zevan/c9UE5/1/](http://jsfiddle.net/Zevan/c9UE5/1/)

```
var id;
$('#element').resize(function() {
    clearTimeout(id);
    id = setTimeout(doneResizing, 500);

});

function doneResizing(){
    // do something
    console.log("done resizing");
}​ 
```

该事件仍会触发多次，但 doneResizing 函数只会在最后一个触发后 500 毫秒被调用。当然，您可以调整该数字以满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:34:51.040

好的-根据您编辑的问题，这就是问题所在。切换功能会跟踪它为上次单击运行的功能，并将始终为下次单击运行另一个功能。因此，当您单击它一次时，它会运行第一个功能，再次单击它会运行第二个功能，然后返回第一个功能，依此类推。

但是，您的窗口调整大小事件正在折叠窗口，所以如果您最后一次单击 h1 是为了展开它，那么下一次单击，toggle 将尝试关闭它。因此，您的窗口调整大小事件将其关闭，然后按钮再次将其关闭。这就是为什么在调整窗口大小后第一次单击按钮时看不到任何结果的原因。

我修改了您的代码以不使用切换 - 而是使用状态变量：

[http://jsfiddle.net/SVy6m/1/](http://jsfiddle.net/SVy6m/1/)

```
var target;
var isCollapsed = true;

$('h1').click(function() {
    if(isCollapsed) {
        $('.box-1').slideDown();
    } else {
        $('.box-1').slideUp();   
    }
    isCollapsed = !isCollapsed;
});   

var id;
$(window).resize(function() {
    clearTimeout(id);
    id = setTimeout(doneResizing, 10);

});

function doneResizing(){
    // do something
    $('.box-1').slideUp();
    isCollapsed = true;
}    ​ 
```

您仍然需要添加一些代码来检查窗口大小是否小于 800。希望这会有所帮助！

# algorithm - 存储形状（或线条）数据的有效数据结构是什么

> ID：13170525
> 
> 赞同：1
> 
> 时间：2012-11-01T03:26:43.780
> 
> 标签：algorithm, graphics, data-structures

在我的应用程序中，客户端用户可以绘制一些形状或线条，然后这些形状数据应该发送到服务器并保存到数据库中。形状应该可以在客户端上重新绘制。

我的问题是如何设计一种有效的数据结构来表示形状，数据结构应该易于传输和保存到数据库。

谢谢！

EDTION：这些形状包括规则形状（如圆形）和用户可以自由绘制的不规则形状。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:17:38.567

我认为这取决于您如何让用户绘制形状。他们只是在画布上移动光标吗？如果是这种情况，那么它没有太多的数学知识，所以 cbranch 的解决方案可能是一个不错的选择。它只需要是一个开/关位数组。您甚至可以使用某种压缩技术对其进行优化。

但是，如果您为他们提供特定的绘制方式，例如方形工具、圆形工具、贝塞尔工具，那么它们中的每一个都可以比像素数据更有效地存储。正方形可以存储为一个简单的结构，例如：

```
struct square {
    int x;
    int y;
    int length;
} 
```

一个圆圈：

```
struct circle {
    int x;
    int y;
    int radius;
} 
```

贝塞尔曲线：

```
struct bezier {
    int x1;
    int y1;
    int x2;
    int y2;
} 
```

然后，当您将其重新绘制到屏幕上时，只需从数据中重新创建适当类型的形状。

# javascript - ajax 代码没有在后台将我导航到 url

> ID：13170526
> 
> 赞同：2
> 
> 时间：2012-11-01T03:26:49.247
> 
> 标签：javascript, jquery, ajax

我正在尝试使用 ajax 在后台导航到一个 php 脚本，以便它执行一些命令，但问题是它没有执行命令，这告诉我我的 ajax 不正确或者我做错了它没有调用ajax。你能看看代码并说明我做错了什么吗？我知道 php 脚本应该导航到`insertQuestion.php`确实有效，因为如果我使用表单操作导航到该页面，那么它会执行该脚本中的命令，但是当我尝试使用 ajax 在后台导航到脚本时，它只是不这样做：

代码：

```
<form id="QandA" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return myClickHandler()">

....

</form> 
```

```
 function myClickHandler()
    {
        if (!validation())
            return false;

        if (!confirm("Make sure that your details are correct, once you proceed after this stage you would not be able to go back and change any details towards Questions, Options and Answers for your Assessment." + "\n" + "\n" + "Are you sure you want to Proceed?" + "\n" ))
            return false;

        $.ajax({
            url: "insertQuestion.php",
            data: $("#QandA").serialize(),
            async: false
        });

        return true;
    } 
```

更新：

它仍然没有导航到 insertQuestion.php 页面，现在的问题是它没有检查验证并且没有在 javascript 函数中显示确认框。下面我更新了当前代码现在的样子：

```
<form id="QandA" action="<?php echo htmlentities($action); ?>" method="post" onsubmit="return myClickHandler(); return false;">

....

</form>

         <script type="text/javascript">

    function myClickHandler()
    {
        if (!validation())
            return false;

        if (!confirm("Make sure that your details are correct, once you proceed after this stage you would not be able to go back and change any details towards Questions, Options and Answers for your Assessment." + "\n" + "\n" + "Are you sure you want to Proceed?" + "\n" ))
            return false;

       $.ajax({
            url: "insertQuestion.php",
            data: $("#QandA").serialize(),
            async: false
            type: "POST"
        });

        return true;
    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:54:03.613

使用类型：“POST”，因为

> type String 默认值：'GET' 请求的类型（“POST”或“GET”），默认为“GET”。注意：这里也可以使用其他 HTTP 请求方法，例如 PUT 和 DELETE，但并非所有浏览器都支持。

[.ajax](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
            url: "insertQuestion.php",
            data: $("#QandA").serialize(),
            async: false,
            type: "POST"
        }); 
```

关于提交：HTML：

```
<form id="QandA">
...
</form> 
```

JS：

```
$(function() {
myClickHandler=function(e)
    {
        if (!validation())
            return false;

        if (!confirm("Make sure that your details are correct, once you proceed after this stage you would not be able to go back and change any details towards Questions, Options and Answers for your Assessment." + "\n" + "\n" + "Are you sure you want to Proceed?" + "\n" ))
            return false;

        $.ajax({
            url: "insertQuestion.php",
            data: $("#QandA").serialize(),
            async: false,
            type: "POST"
        });

        return true;
    };

$('#QandA').submit(myClickHandler);

}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T03:31:11.787

请删除 htmlentities()

```
<form id="QandA" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" onsubmit="return myClickHandler()">

....

</form> 
```

或者通过添加“return false;”尝试另一种方式 提交。

```
<form id="QandA" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return myClickHandler(); return false;">

....

</form> 
```

# python - 如何在 django python 中进行这个复杂的查询

> ID：13170528
> 
> 赞同：0
> 
> 时间：2012-11-01T03:27:14.677
> 
> 标签：python, django

我有模型称为 `Plan`

计划具有`state`并`city`与之相关联

我有另一个模型`Weather`，它在每天的不同时间都有`city`数据`state`

现在我想用称为天气的额外字典获取所有计划对象。

步骤是

1.  获取所有计划对象
2.  现在根据州和城市，每个计划将在天气表中有很多行
3.  我想聚合所有列。例如，如果我对该城市和州有五行，并且温度值是 `20 , 21 , 22 , 23 , 24`。然后我想取所有温度的平均值，即 22 并存储在计划模型中的新字典中

这样我就可以访问`Plan.weather.temperature`它了`22`

我可以使用 for 循环，但这将是很多数据库查询。可以在一个查询或任何可能的选项上做到这一点

编辑：

```
class Plan(model.model):
    name = tinymce_models.HTMLField(blank=True, null=True)
    region = models.ForeignKey(Region)
    district = models.ForeignKey(District) 
```

* * *

```
 class Weather(model.model):

        region = models.ForeignKey(Region)
        district = models.ForeignKey(District)
        temp_max = models.IntegerField(blank=True, null=True, verbose_name='Max temperature (C)')
        temp_min = models.IntegerField(blank=True, null=True, verbose_name='Min temperature (C)') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:25:00.000

取决于您的型号，但类似这样：

`Plan.objects.filter(region__name="CA").annotate(avg_temperature=Avg("region__weather__temp_max"))`

该`avg_temperature`字段现在可用于查询返回的对象。此名称可根据提供给注释的关键字参数进行自定义。

或者看看这里：[https ://docs.djangoproject.com/en/dev/topics/db/aggregation/](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)

Django 内置了这些类型的查询。如果聚合和注释 api 不能促进这一点（似乎是开箱即用的有力候选者），那么您可以选择编写原始查询：

[https://docs.djangoproject.com/en/dev/topics/db/sql/](https://docs.djangoproject.com/en/dev/topics/db/sql/)

# c# - 在 Settings.settings 中保存属性

> ID：13170535
> 
> 赞同：2
> 
> 时间：2012-11-01T03:28:12.363
> 
> 标签：c#, .net, visual-studio-2010, properties, settings

我正在尝试在运行时保存一些数据：

```
SettingsProperty property = new SettingsProperty("tabSetting");
property.Name = "tab";
property.PropertyType=typeof(string);
property.DefaultValue = "path";
Settings.Default.Properties.Add(property);
Settings.Default.Save(); 
```

但此代码不会在文件 Settings.settings 中保存任何更改。

此外，我尝试从 VisualStudio 中更改 Settings.settings，我打开此文件并手动编写设置。之后我运行上面提到的代码并得到这个异常：

```
Item has already been added. Key in dictionary: 'tab'  Key being added: 'tab' 
```

为什么 `Settings.Default.Save()`代码不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:47:58.280

您没有说您的设置是用户还是范围内的应用程序。它会影响您的设置文件的保存位置。听起来好像您的设置是**用户**范围，并且您正在应用程序设置文件中查找它们。例外是设置已经存在的线索。查看此问题/答案以获取更多信息。[在 .NET 中使用 Settings.settings 文件时，配置实际存储在哪里？](https://stackoverflow.com/questions/1075204/when-using-a-settings-settings-file-in-net-where-is-the-config-actually-stored)

# java - 如何在使用 java 取消部署应用程序之前终止或关闭 activemq 连接？

> ID：13170540
> 
> 赞同：0
> 
> 时间：2012-11-01T03:29:04.940
> 
> 标签：java, servlets, jms, activemq

我在 Tomcat Web 服务器中有 3 个应用程序。所有 3 个应用程序都使用 activemq 连接来发送 JMS 消息。我只想找到来自特定应用程序的连接并在 java 或 servlet 中关闭它们，然后再从服务器取消部署我的应用程序。

但我检查并坚持了这一点。我没有找到任何方法来找出特定应用程序的连接。

```
public class ConnFactory {

    private static QueueConnectionFactory conFactory;
    private static final Class[] SSA = new Class[] { String.class };

    public static QueueConnectionFactory getSingleFactory() {
        if (conFactory == null) {
            try {
                conFactory = GetConnectionFactory();
            } catch (Exception e) {
                System.err.println("Exception in getSingleFactory....");
                e.printStackTrace();

            }
        }

        return conFactory;

    }

    public static QueueConnectionFactory GetConnectionFactory()
            throws Exception {
        Object o = Class.forName("org.apache.activemq.ActiveMQConnectionFactory", true, ConnFactory.class.getClassLoader()).newInstance();
        Method pm = o.getClass().getMethod("setBrokerURL", SSA);
        String cfgStr = "keepAlive=true&wireFormat.stackTraceEnabled=true";
        String transCfgStr = "maxReconnectAttempts=3&startupMaxReconnectAttempts=3&timeout=10000";
        pm.invoke(o, new Object[] { "failover://(tcp://" + "localhost" + ":"
                + "61616" + "?" + cfgStr + ")?" + transCfgStr });
        ActiveMQConnectionFactory cd = (ActiveMQConnectionFactory) o;
        RedeliveryPolicy rd = cd.getRedeliveryPolicy();
        rd.setMaximumRedeliveries(5);
        rd.setMaximumRedeliveryDelay(5000);
        rd.setInitialRedeliveryDelay(5000);
        cd.setRedeliveryPolicy(rd);
        QueueConnectionFactory conf = cd;
        System.out.println("ConnectionFactory Initialized.......");
        return conf;
    }

    public QueueConnection getConnection() throws Exception {
        QueueConnection con = null;
        con = getSingleFactory().createQueueConnection();
        // con.setClientID("leo1");
        return con;
    }

    public void sendJMSMsg(QueueConnection qConn) throws Exception {

        TextMessage message = null;

        try {
            QueueSession queueSession = qConn.createQueueSession(false,
                    Session.AUTO_ACKNOWLEDGE);
            javax.jms.Queue queue1 = queueSession.createQueue("JQ1");
            QueueSender queueSender = queueSession.createSender(queue1);

            message = queueSession.createTextMessage();

            message.setText("This is message " + (new Date().getTime()));
            System.out.println("Sending message: " + message.getText());
            queueSender.send(message);
            qConn.close();
        } catch (JMSException e) {
            System.out.println("Exception occurred: " + e.toString());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:42:07.457

我也使用activemq很长一段时间只是一个初学者，可能是我的回答可以帮助你。首先，即使您使用多个应用程序与单个 activemq 一起使用，您的 3 个应用程序是否使用相同的队列？一种解决方案是在 activemq 代理中为您的应用程序使用多个队列。因此，如果您在 JMShandler 中收到一条消息，您可以取消部署您的应用程序。即使他们使用相同的队列，您也可以在每个应用程序的消息中添加一个属性。并且您可以在取消部署之前在您的客户端 java 应用程序中验证这一点。

# php - 用于换行的php正则表达式以从html中的表中获取行

> ID：13170541
> 
> 赞同：0
> 
> 时间：2012-11-01T03:29:13.610
> 
> 标签：php, html, regex

我有一个远程 html 文件，我正在从中提取一个表。现在，我正在尝试使用正则表达式从该表中获取单个行。

这是此表的示例格式：

```
<tbody style="text-align: left;">
<tr class=" even" style="text-align: left;">
<td style="text-align: left;"><a href="http://www.sdfkhy.com/%7Epbdsfby">TEXT1 </a></td>
<td style="text-align: left;">TEXT2</td>
<td style="text-align: left;">TEXT3</td>
</tr>
<tr style="text-align: left;">
<td style="text-align: left;"><a href="http://www.JDKSF.COM/index.html">TEXT3</a><br /><span class="style3">TEXT4</span></td>
<td style="text-align: left;">TEXT5</td>
<td style="text-align: left;">TEXT6</td>
</tr>
</tbody> 
```

我尝试了以下方法：

```
#<tr[^>]*>(\r\n.*)*</tr>#
#<tr[^>]*>(.*?)*</tr>#
#<tr[^>]*>(.*)*</tr># 
```

这些似乎都不起作用。我需要将 and 标记之间的所有内容，即每一行分别放入一个数组中。请帮忙。

编辑：我需要根据要求使用 REGEX，所以请不要建议使用 DOM PARSER。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:43:19.660

# 不要使用正则表达式来解析 HTML 文件

Html 并不严格..（例如，有时 html 可以有结束标签，有时它没有）

`Regex`用于正则一致表达式**而不是**不规则表达式

使用[DOMDocument->loadHTML()](http://docs.php.net/manual/en/domdocument.loadhtml.php)来解析 HTML。

相信我，**解析**html 比使用简单`regex`

* * *

如果你准备好冒险

这是正则表达式

```
/<tr.*?>(.*?)</tr>/ 
```

使用`s`(PCRE_DOTALL) 选项

# xcode - 对于 1view/scene 到 2view/scene 应用程序，我应该在 Xcode 中选择什么应用程序？

> ID：13170542
> 
> 赞同：0
> 
> 时间：2012-11-01T03:29:17.827
> 
> 标签：xcode, view, scene

这个问题对其他人来说可能很简单，但我已经为此苦苦挣扎了一段时间。我想要的应用程序是这样的：第一个场景/视图有两个大按钮（没有工具栏项），单击每个按钮进入两个新场景。所以一共三个场景。在 Xcode 中，我应该选择什么应用程序？在情节提要中，我应该如何/应该拖动/绘制？谢谢。

更新：感谢您的链接，大用户。在我问之前，我实际上阅读了该教程。到目前为止我得到的一点更新：

1，我选择了“单一视图”，所以情节提要中有视图控制器1（VC1）。

2、拖拽一个导航控制器（NC），并移动指向NC的初始视图箭头

3、control-drag链接NC和VC1，弹出一些小对话框时选择“relationship segue root view controller”。这个对吗？

4、另外创建了两个VC，VC3和VC4，分别控制拖拽链接到NC。选择“推”，这是正确的吗？

5、在VC1中，我添加了两个按钮，showVC3和showVC4。现在我不知道如何将 IBAction 添加到按钮 showVC3 和 showVC4。我试图将其控制拖到 ViewController.m 文件的@interface 和@end 部分，但失败了。接下来我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:51:17.743

您可以通过`Single View`在情节提要中选择基于应用程序来做到这一点

对于故事板，请参阅本教程：[http ://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

你可以通过谷歌搜索找到许多其他教程。

* * *

您的故事板节目的结构如下：

```
Navigation Controller => VC1 
```

添加按钮到 VC1

```
- Button 1
- Button 2 
```

在情节提要上添加 VC3 和 VC4 并进行如下切换：

```
- Button 1 to VC3
- Button 2 to VC4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:57:52.167

哦，是的，我想我想通了。我现在会回答我自己的问题。

1，我选择了“单一视图”，所以情节提要中有视图控制器1（VC1）。

2、拖拽一个导航控制器（NC），并移动指向NC的初始视图箭头

3、control-drag链接NC和VC1，弹出一些小对话框时选择“relationship segue root view controller”。这个对吗？--- 我想这是对的。

4、另外创建了两个VC，VC3和VC4，分别控制拖拽链接到NC。选择“推”，这是正确的吗？---应该是对的。

5、在VC1中，我添加了两个按钮，showVC3和showVC4。现在我不知道如何将 IBAction 添加到按钮 showVC3 和 showVC4。我试图将其控制拖到 ViewController.m 文件的@interface 和@end 部分，但失败了。接下来我该怎么办？----- 我想我可以将 IBAction 添加到 showVC3 和 showVC4 按钮，但我可以分别控制并拖动它们到 VC3 和 VC4，然后选择“push”。

运行项目，显示showVC3和showVC4按钮，点击它们，我可以进入VC3和VC4！我想就是这样。希望这对其他有我这样的问题的人有所帮助。

# java - 为什么服务器套接字不进行？

> ID：13170548
> 
> 赞同：0
> 
> 时间：2012-11-01T03:30:05.997
> 
> 标签：java, sockets, stream

我的大学工作应用程序..

文档转PDF

==

我的服务器：

**每个申请一个线程**

```
 server = new ServerSocket(5000);

        while (true) {
            Socket cliente = server.accept();
            Thread thread = new Thread(new Requisitor(cliente));
            thread.start();
        } 
```

我的班级申请者（运行方法）

```
@Override
public void run() {
    // receive doc binary
    receive();
    // doc to pdf
    Conversor converson = new Conversor(new File("docs/"+cliente.getInetAddress().getHostAddress()+".doc"),new File("pdfs/"+cliente.getInetAddress().getHostAddress()+".pdf"));
    converson.converter();
    //response pdf binary to client
    response();
} 
```

但是没有调用方法receive（）..只有当我断开客户端套接字时。

我的客户端套接字：

```
 Client cliente = new Client();
    cliente.connect();
    cliente.send(); // send doc binary

    boolean flag = true;

    while (flag) {
        if(!cliente.streamIsEmpty()){ // wait for conversion
            cliente.receive(); // receive pdf
            flag = false;
        }
    }

    cliente.disconect() 
```

我的接收方法

```
 InputStream in = cliente.getInputStream();
        BufferedInputStream stream = new BufferedInputStream(in);
        FileOutputStream out = new FileOutputStream("docs/"+cliente.getInetAddress().getHostAddress()+".doc");

        byte[] buffer = new byte[1024];
        int length = 0;

        while((length = stream.read(buffer, 0, 1024)) != -1) {
            out.write(buffer, 0, length);
        }

        out.flush();
        stream.close(); 
```

任何的想法？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:10:34.510

你的问题不清楚。看起来您有两种称为接收的方法（一种在客户端，另一种在服务器中）。你说“方法 receive() 没有被调用”，但你没有说哪个没有被调用。

但绝对错误的一件事是：

```
boolean flag = true;
while (flag) {
    if (!cliente.streamIsEmpty()) { // wait for conversion
        cliente.receive(); // receive pdf
        flag = false;
    } 
```

您的代码正忙于等待，这很糟糕。再说了，哪里没必要这么等。只需调用`cliente.receive()`... 这将阻塞，直到有东西到达 ... 或服务器断开连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:08:58.903

在这里你一直读到 -1 被读取的流返回。当套接字关闭时会发生这种情况。在写入文档后，尝试在 cliente.send() （而不是整个套接字）中关闭 OutputStream。

```
 while((length = stream.read(buffer, 0, 1024)) != -1) {
        out.write(buffer, 0, length);
    } 
```

# database - 打开防火墙时，Visual Studio 2012 将数据库项目发布到单独服务器上的 sql 实例失败

> ID：13170549
> 
> 赞同：2
> 
> 时间：2012-11-01T03:30:08.467
> 
> 标签：database, visual-studio, publish, firewall

计算机 A 具有带有 sql 数据库项目的 Visual Studio 2012。计算机 B 有 windows server 2008 r2 和 sql server 2008 r2。我正在尝试将数据库项目从 Visual Studio 发布到 sql 实例。在计算机 B 上关闭 Windows 防火墙后，一切正常；上面的防火墙失败了。错误消息是“找不到服务器或无法访问服务器。验证实例名称是否正确以及 sql server 配置为允许远程连接（提供程序：命名管道提供程序，错误：40 - 无法打开与 Sql 的连接服务器”。

我尝试为 1433 和 1434 的 udp 和 tcp 传入端口创建规则。我还添加了程序 sqlservr.exe。每个例外/规则都应用于域。私人的和公共的。我不知道我还需要做什么才能允许 Visual Studio 将数据库发布到防火墙打开的 sql 实例。

感谢您的任何帮助！

# java - 在这种情况下如何使用 String.split？

> ID：13170551
> 
> 赞同：1
> 
> 时间：2012-11-01T03:30:22.757
> 
> 标签：java, regex

我想写一个这样的函数：

```
- Input: "1" -> return : "1"
- Input: "12" -> return : ["1","2"] 
```

如果我使用函数 split():`String.valueOf("12").split("") -> ["","1","2"]` 但是，我只想得到结果： `["1","2"].`

最好的方法是什么？

事实上，我可以这样做：

```
private List<String> decomposeQuantity(final int quantity) {
    LinkedList<String> list = new LinkedList<String>();
    int parsedQuantity = quantity;
    while (parsedQuantity > 0) {
        list.push(String.valueOf(parsedQuantity % 10));
        parsedQuantity = parsedQuantity / 10;
    }
    return list;
} 
```

但是，我想使用 split() 来获得情感代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T03:31:31.517

```
String input = "123";
String regex = "\\d";
Matcher m = Pattern.compile(regex).matcher(input);

String[] output = new String[input.length()];
int index = 0;

while (m.find())
    output[index++] = m.group();

for (String s : output)
    System.out.println(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:39:11.220

你不能只用分裂来做到这一点。您要么必须删除第一个元素（从索引 1 开始复制到不同的数组），要么只`s.toCharArray()`返回一个字符数组，而不是字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T03:59:51.610

要描述两个数字之间[的位置，您可以使用环视](http://www.regular-expressions.info/lookaround.html)机制，例如：

```
String[] digits= "12".split("(?<=\\d)(?=\\d)"); //->[1, 2]
//(?<=\\d) points place before digit
//(?=\\d) points place after digit
//(?<=\\d)(?=\\d) place that is before one digit and after another 
```

虽然`split`你只能使用后视`(?<=\\d)`，它仍然可以工作

```
String[] digits= "123".split("(?<=\\d)"); //->[1, 2, 3] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T04:04:23.000

```
public String[] split(String input) {
    if (input.length() == 0) {
        return new String[] { "" };
    }

    String[] output = new String[input.length()];
    int index = 0;
    for (char c : input.toCharArray()) {
        output[index++] = Character.toString(c);
    }

    return output;
}

split("") -> [""]
split("1") - > ["1"]
split("12") - > ["1", "2"]
split("123") - > ["1", "2", "3"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T04:40:10.833

如果您想要可读性和可维护性与性能，解决方案将取决于您。在测试了所有发布的答案并尝试了基本实现之后，最佳性能是基本实现。这是更多代码，但可能对您有用：

```
public interface IEvaluable {
    void evaluate();
}

public class BasicImplementation implements IEvaluable {

    private String string;

    public BasicImplementation(String string) {
        this.string = string;
    }

    //using the power of shadowing
    public String[] getDigitsAsArray(String string) {
        String[] data = new String[string.length()];
        int j = 0;
        for(int i = 0; i < string.length(); i++) {
            if (Character.isDigit(string.charAt(i))) {
                data[j++] = Character.toString(string.charAt(i));
            }
        }
        String[] realData = new String[j];
        for(int i = 0;i < j ;i++) {
            realData[i] = data[i];
        }
        return realData;
    }

    @Override
    public void evaluate() {
        getDigitsByArray(string);
    }
} 
```

为了测试答案的性能，我实现了一个方法来测试结果：

```
public final class PerformanceEvaluator {

    private IEvaluable evaluable;

    public PerformanceEvaluator(IEvaluable evaluable) {
        this.evaluable = evaluable;
    }

    public void evaluate() {
        long initialTime;
        long endTime;
        initialTime = System.nanoTime();
        try {
            evaluable.evaluate();
        } catch (Exception e) {
            e.printStackTrace(System.out);
        }
        endTime = System.nanoTime();
        System.out.println("Ellapsed time: " + (endTime - initialTime));
    }
} 
```

和主班

```
public class Main {

    public static void main(String[] args) {
        Main oMain = new Main();
        oMain.evaluate("12");
        oMain.evaluate("123456789098_)(56765432145");
        oMain.evaluate("wbfiwyfwbn74g0t3h7t394mhg983hhon504n0er0n");
        oMain.evaluate(
            "1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
        oMain.evaluate("no digits");
    }

    public void evaluate(String string) {
        PerformanceEvaluator performanceEvaluator =
            new PerformanceEvaluator(new BasicImplementation(string));
        performanceEvaluator.evaluate();
    }
} 
```

只需使用提供的解决方案创建实现`IEvaluable`接口的其他类并自行测试。测试是在英特尔®酷睿™ i7-2675QM CPU @ 2.20GHz × 8 上的 Java 1.7.0_09 HotSpot 64 位服务器 VM 中完成的，Ubuntu 12.04 LT 上具有 8 GB RAM。

在我看来，仅基于这些测试用例：

*   如果您想使用正则表达式并更喜欢性能，请选择 @BlueBullet 答案。
*   如果您想坚持使用`String#split`，请选择@Pshemo 答案。

# algorithm - 二叉搜索树算法

> ID：13170552
> 
> 赞同：0
> 
> 时间：2012-11-01T03:30:58.850
> 
> 标签：algorithm, binary-tree, binary-search-tree

```
Search(T,k)
x<- root[T]
while x != NULL and k != key[x] 
do 
  if k<key[x]
    then x <- left[x]
  else x <- right[x]
    return x 
```

我刚从算法开始，我经常看到“<-”这个和 key[x] 术语有人能告诉我什么是 key 是数组吗？x 正在获取根值，然后将其用作索引？我无法理解这一点。请解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T03:45:52.167

它是伪代码（不是真正的语言）。

在这种情况下`<-`，意味着“被分配”并且可以被认为是在做`=`现代语言中所做的事情。是结构/对象属性的`key[x]`简写（这并不意味着它一定是类的成员，它可以从地图等数据结构中检索。实际实现由算法实现者决定。`key``x``x`

所以上面的算法可以用 C 写成：

```
Node* Search(Tree* T, Key k)
{
    Node* x = T->Root();
    while ((x != NULL) && (k != x->Key())
    {
        if (k < x->Key())
            x = x->Left();
        else
            x = x->Right();
    }

    return x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:48:07.333

这看起来像伪代码。将视为Java`<-`中的赋值运算符。`=`您有时还会看到`:=`其他伪代码变体中的情况。

`x`用作指向树中节点的指针。`key`是绘制树时通常在圆圈中找到的值，并且`left`是`right`节点的两个子节点。

编辑：那个伪代码也有点偏离。詹姆斯的例子很好。

# jquery - 如何将这些不同的语句合并成更优雅的代码

> ID：13170553
> 
> 赞同：0
> 
> 时间：2012-11-01T03:31:02.517
> 
> 标签：jquery

```
$('.search-input').focus(function () {
    $(this).val('');
});
$('.search-input').blur(function () {
    if ($(this).val() == '') {
        $(this).val('enter the place');
    }

});

$('#edit-name').keyup(function () {
    if ($(this).val() != '') {
        $('.username .error-message').remove();
    } else {
        $('#edit-name').after('<span style="color:red;" class="error-message" >enter the name！&lt;/span>');
    }
});

$('#edit-name').blur(function () {
    if ($(this).val() == '') {
        $('.username .error-message').remove();
        $('#edit-name').after('<span style="color:red;" class="error-message" >enter the name！&lt;/span>');
    }

});

$('#edit-pass').keyup(function () {
    if ($(this).val() != '') {
        $('.password .error-message').remove();
    } else {
        $('#edit-pass').after('<span style="color:red;" class="error-message"> enter the password！&lt;/span>');
    }
});

$('#edit-pass').blur(function () {
    if ($(this).val() == '') {
        $('.password .error-message').remove();
        $('#edit-pass').after('<span style="color:red;" class="error-message" >enter the password！&lt;/span>');
    }

}); 
```

有没有办法合并或美化代码？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:40:28.413

jQuery 最好的功能之一是链接，您可以在其中使用一个选择器放置多个事件。因此，您可以像这样简单地使用前两个功能：

```
$('.search-input').focus(function(){
    $(this).val('');
}).blur(function(){
    if($(this).val()==''){
      $(this).val('enter the place');  
    }
}); 
```

另一种选择是将所有这些都放在事件映射下，如下所示：

```
$('.search-input').on({
    focus: function(){
        $(this).val('');
    }, blur: function(){
        if($(this).val()=='') $(this).val('enter the place');  
    }
}); 
```

`.bind`如果您有相同的功能但有多个事件，您实际上可以通过使用或`.on`（更优选）一次将它们全部绑定，然后将所有事件添加到一个中。然后，如果您想选择多个元素，也可以通过在选择器内用逗号分隔它们来实现。您可以使用 引用相关元素`$(this)`。

```
$('#edit-name, #edit-pass').on('keyup blur', function(){
    if($(this).val()!=''){
    $('.username .error-message').remove();
    }else{    
        $(this).after('<span style="color:red;" class="error-message" >enter the name！&lt;/span>');
    }
}); 
```

所以你看，你只需要两个函数，而不需要一遍又一遍地复制相同的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:39:06.997

您可以在每个选择器中选择多个元素，并使用它`this`来引用触发事件的特定元素。

例子：

```
$("#foo, #bar").keyup(function() {
  $(this).after('a');
}); 
```

当您在其中一个上键入时，`#foo`它`#bar`会`a`在该元素之后添加。

使用这种技术，您可以将两个 keyup 和 blur 块合并为一个。

另一件事是连锁事件：

```
$("#foo, #bar").keyup(function() {
  $(this).after('a');
}).blur(function(){
  $(this).after('b'); 
}); 
```

这对 keyup 和 blur 事件使用相同的选择器。

[这是一个演示](http://jsbin.com/ulotod/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:52:16.843

```
$('.search-input').focus(function () {
    $(this).val('');
});
$('.search-input').blur(function () {
    if ($(this).val() == '') {
        $(this).val('enter the place');
    }

}); 
```

您可以使用占位符属性而不是上面的代码。

```
<input type="text" name="search" class="search-input" placeholder="enter the place" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T03:39:55.777

利用 jquery 链接。无需双选。

例如：

```
$('.search-input').focus(function(){
    $(this).val('');
}).blur(function(){
      if( $(this).val()=='' ){
          $(this).val('enter the place');  
    }
}); 
```

您也可以与其他人一起执行此操作。

尽可能使用 $(this)：

```
$('#edit-name').blur(function(){
    if( $(this).val()=='' ){
       $('.username .error-message').remove();
  -->>>$(this).after('<span style="color:red;" class="error-message" >enter the name！&lt;/span>'); 
    }

}); 
```

# java - 使用流布局初始化多个 JPanel（作业）

> ID：13170559
> 
> 赞同：1
> 
> 时间：2012-11-01T03:31:35.637
> 
> 标签：java, swing, jpanel, layout-manager, flowlayout

我正在尝试使用 FlowLayout 创建一个在其中插入两个 JPanel 的 JFrame。我在一个单独的文件中初始化了框架，但这就是我的名字

```
public class FlowInFlow extends JFrame
{
public FlowInFlow() {

    setLayout(new FlowLayout());

    JPanel panel1 = new JPanel(new FlowLayout(FlowLayout.LEFT));
    panel1.setBackground(Color.RED);

    JPanel panel2 = new JPanel(new FlowLayout(FlowLayout.RIGHT));
    panel2.setBackground(Color.BLUE);   

}
} 
```

编辑：当我运行它时，我只得到一个空白框，当我需要两个框并排时

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T03:43:52.483

正如我已经说过的，a 的默认首选大小`JPanel`是 0x0...

这意味着当您将它添加到类似 的布局`FlowLayout`时，使用首选大小，它会出现......嗯......它不会

![在此处输入图像描述](../Images/ce99a316dc531a734874fa837eecf200.png)

```
public class TestFlowLayout {

    public static void main(String[] args) {
        new TestFlowLayout();
    }

    public TestFlowLayout() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JPanel master = new JPanel(new FlowLayout(FlowLayout.LEFT));
                JPanel left = new JPanel();
                left.setBackground(Color.RED);
                left.add(new JLabel("Lefty"));

                JPanel right = new JPanel();
                right.setBackground(Color.BLUE);
                right.add(new JLabel("Righty"));

                master.add(left);
                master.add(right);

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(master);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T03:41:51.283

除了更改外部布局的建议外，这些组件从未被添加到任何东西中（因此永远不会可见）。

![网格中的红/蓝流](../Images/99b6a8341f85321c62630c14b65ede5d.png)

```
import java.awt.*;
import javax.swing.*;

public class FlowInGrid extends JFrame  {

    public FlowInGrid() {

        setLayout(new GridLayout(1,0));

        JPanel panel1 = new JPanel(new FlowLayout(FlowLayout.LEFT));
        panel1.setBackground(Color.RED);
        // ADD Them to something!
        add(panel1);

        JPanel panel2 = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        panel2.setBackground(Color.BLUE);   
        // ADD Them to something!
        add(panel2);
    }

    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JFrame f = new FlowInGrid();
                f.setSize(300,100);
                f.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

# php - PHP如何检查返回的行是否包含重复值？

> ID：13170561
> 
> 赞同：0
> 
> 时间：2012-11-01T03:31:42.147
> 
> 标签：php, mysql, database

```
<?php
include('includes/connection.php');

$query = 'select a, c from b';
$result = mysql_query($query, $con);
$num_rows = mysql_num_rows($result);

if ($num_rows > 0)
{
    echo '<p>';
    while($row = mysql_fetch_array($result))
    {
         echo "{$row["a"]}";
    }
    echo '</p>';
}
?> 
```

表“b”在“a”列中有这些值

```
Table b
-------
a     c
-     -
1     a
1     a1
1     a2
2     a
3     b
4     b 
```

我希望能够在我的 while 循环中确定返回的行是否重复并丢弃它。在这种情况下，我只希望数字 1 出现一次。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:35:36.173

您应该在 sql 端执行此操作，因为 db 服务器经过优化以运行此类操作，而不是在 php 端使用迭代和验证。在您的 sql 选择中使用 DISTINCT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:34:25.107

我不认为 distinct 对你的情况有帮助。原因是 distinct 对具有完全相同行的元素起作用，但在你的情况下，即使你的列 a 与你的列 c 不匹配

a 和 c 上的不同将为 1 提供 3 行（在一列中）。

我可能做得过火了，但这是我想出的

依次通过`a`

```
 FOR x IN (SELECT a from table)

SELECT *   FROM (SELECT ROW_NUMBER () OVER (ORDER BY user_id) user_row_no, A.* FROM table A WHERE A.a=x.a )  

END LOOP; 
```

# jquery-ui - 对 CSS 解决方案的建议，以制作更小的预览 div

> ID：13170562
> 
> 赞同：0
> 
> 时间：2012-11-01T03:31:45.890
> 
> 标签：jquery-ui, css, transform

![在此处输入图像描述](../Images/e1de52d487baa5c8fec0e9fd2f0cc2b6.png)

如图所示，您可以看到左侧的 div 较大，右侧的 div 较小。较小的 div 基本上是一个预览 div，因此添加到左侧较大 div 的任何内容都应该重新调整大小并进入较小的 div。类似于 powerpoint 的东西
目前我正在这样做

```
$('#slideContent0').css('-ms-transform', 'scale(0.5, 0.5)'); 
```

但这似乎不起作用，我的意思是最初它运行良好，但是当我添加一些东西来滑动预览 div 看起来像这样 ![在此处输入图像描述](../Images/9ffde15511926b9f674ce8f6868d6a11.png)

预览幻灯片的 HTML 类似于

```
<div class="leftPanelContent" id="leftPanelContent">
    <div id="slidePreview0" class="slidePreview">
        <div id="slideContent0" class="slideContent"></div>
    </div>
</div> 
```

我正在使用的 CSS 是

```
.slidePreview {
    width: 98% !important;
    height: 150px !important;
    background-color: #FFFFFF;
    border-bottom: 20px solid #BCBCBC;
    cursor: pointer;
}

.slideContent {
    width: 100% !important;
    height: 130px !important;
    background-color: #fff;
    cursor: inherit;
} 
```

有什么建议么

# postgresql - 将 varchar 字段的类型更改为整数：“无法自动转换为整数类型”

> ID：13170570
> 
> 赞同：186
> 
> 时间：2012-11-01T03:33:10.583
> 
> 标签：postgresql, casting, postgresql-9.1, fieldtype

我有一张小桌子，某个字段包含“**字符变化**”类型。我正在尝试将其更改为“**整数**”，但它给出了一个错误，即无法进行转换。

有没有办法解决这个问题，或者我应该创建另一个表并使用查询将记录带入其中。

该字段仅包含整数值。

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2012-11-01T03:47:21.260

没有从`text`或`varchar`到的隐式（自动）强制转换`integer`（即，您不能将 a 传递`varchar`给期望的函数`integer`或将`varchar`字段分配给一个），因此您必须使用[ALTER TABLE ... ALTER COLUMN ... TYPE](http://www.postgresql.org/docs/current/static/sql-altertable.html)`integer`指定显式强制转换。 [.. 使用](http://www.postgresql.org/docs/current/static/sql-altertable.html)：

```
ALTER TABLE the_table ALTER COLUMN col_name TYPE integer USING (col_name::integer); 
```

请注意，您的文本字段中可能有空格；在这种情况下，使用：

```
ALTER TABLE the_table ALTER COLUMN col_name TYPE integer USING (trim(col_name)::integer); 
```

在转换之前去除空白。

如果命令在 中运行，这应该从错误消息中显而易见`psql`，但是 PgAdmin-III 可能没有向您显示完整的错误。如果我`psql`在 PostgreSQL 9.2 上测试它会发生以下情况：

```
=> CREATE TABLE test( x varchar );
CREATE TABLE
=> insert into test(x) values ('14'), (' 42  ');
INSERT 0 2
=> ALTER TABLE test ALTER COLUMN x TYPE integer;
ERROR:  column "x" cannot be cast automatically to type integer
HINT:  Specify a USING expression to perform the conversion. 
=> ALTER TABLE test ALTER COLUMN x TYPE integer USING (trim(x)::integer);
ALTER TABLE 
```

感谢@muistooshort 添加`USING`链接。

另请参阅[此相关问题](https://stackoverflow.com/q/12603498/398670)；这是关于 Rails 迁移的，但根本原因是相同的，答案适用。

如果错误仍然发生，那么它可能与列值无关，但此列或列默认值的索引可能无法进行类型转换。需要在 ALTER COLUMN 之前删除索引并在之后重新创建索引。应适当更改默认值。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2014-07-30T08:35:04.280

[这](http://makandracards.com/makandra/18691-postgresql-vs-rails-migration-how-to-change-columns-from-string-to-integer)对我有用。

将 varchar 列更改为 int

```
change_column :table_name, :column_name, :integer 
```

拿到：

```
PG::DatatypeMismatch: ERROR:  column "column_name" cannot be cast automatically to type integer
HINT:  Specify a USING expression to perform the conversion. 
```

改为

```
change_column :table_name, :column_name, 'integer USING CAST(column_name AS integer)' 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-05-09T08:55:10.077

你可以这样做：

```
change_column :table_name, :column_name, 'integer USING CAST(column_name AS integer)' 
```

或试试这个：

```
change_column :table_name, :column_name, :integer, using: 'column_name::integer' 
```

如果您有兴趣了解有关此主题的更多信息，请阅读本文：[https ://kolosek.com/rails-change-database-column](https://kolosek.com/rails-change-database-column)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-04-15T12:56:46.560

试试这个，它肯定会起作用。

在编写 Rails 迁移以将字符串列转换为整数时，您通常会说：

```
change_column :table_name, :column_name, :integer 
```

然而，PostgreSQL 会抱怨：

```
PG::DatatypeMismatch: ERROR:  column "column_name" cannot be cast automatically to type integer
HINT:  Specify a USING expression to perform the conversion. 
```

“提示”基本上告诉您，您需要确认您希望发生这种情况，以及如何转换数据。只需在迁移中这样说：

```
change_column :table_name, :column_name, 'integer USING CAST(column_name AS integer)' 
```

以上将模仿您从其他数据库适配器中了解的内容。如果您有非数字数据，结果可能会出乎意料（但毕竟您要转换为整数）。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-05-17T15:33:49.153

我遇到了同样的问题。比我意识到我尝试更改的列有一个默认字符串值。删除默认值使错误消失:)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-06-03T09:01:52.673

我遇到过同样的问题。我开始重置列的默认值。

```
change_column :users, :column_name, :boolean, default: nil
change_column :users, :column_name, :integer, using: 'column_name::integer', default: 0, null: false 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-29T13:10:25.493

如果您正在开发环境（或生产环境。它可能是备份您的数据），那么首先从 DB 字段中清除数据或将值设置为 0。

```
UPDATE table_mame SET field_name= 0; 
```

之后运行以下查询并成功运行查询后，到 schemamigration，然后运行 ​​migrate 脚本。

```
ALTER TABLE table_mame ALTER COLUMN field_name TYPE numeric(10,0) USING field_name::numeric; 
```

我想它会对你有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-08T07:40:09.300

如果您不小心将整数与文本数据混合在一起，您应该首先执行以下更新命令（如果不是高于 alter table 将失败）：

```
UPDATE the_table SET col_name = replace(col_name, 'some_string', ''); 
```

# c# - GridView 触发了未处理的事件 RowEditing

> ID：13170571
> 
> 赞同：7
> 
> 时间：2012-11-01T03:33:22.333
> 
> 标签：c#, asp.net, gridview

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.IO;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace AppManagementConsole
{
    public partial class _Default : Page
    {
        string BuildUploadPath = ConfigurationManager.AppSettings["DirectoryPath"] + "Files/";
        string ReleaseNotesUpPath = ConfigurationManager.AppSettings["DirectoryPath"] + "ReleaseNotes/";

    protected void Page_Load(object sender, EventArgs e)
    {
        cpBuildDate.SelectedDate = DateTime.Now;
        getBuildData();
    }

    public void getBuildData()
    {
        //Select Build List
        SqlCommand selectCommand = new SqlCommand("Select * from tblBuildList");

        try
        {
            //Connect to DB
            using (SqlConnection conRDB = new SqlConnection(ConfigurationManager.ConnectionStrings["conRDB"].ConnectionString))
            {
                SqlDataAdapter selectAdapater = new SqlDataAdapter(selectCommand.CommandText, conRDB);

                DataSet dsBuilds = new DataSet();
                selectAdapater.Fill(dsBuilds);

                //Populate Webpage GV
                gvDataBind(dsBuilds);
            }
        }

        catch (Exception ex)
        {
        }
    }

    public void gvDataBind(DataSet dsBuilds)
    {
        gvBuildList.Dispose();
        gvBuildList.DataSource = dsBuilds;
        gvBuildList.DataBind();
    }

    protected void gvBuildList_RowEditing(object sender, GridViewEditEventArgs e)
    {
        gvBuildList.PageIndex = e.NewEditIndex;
        //Bind data to the GridView control.
        getBuildData();
    }

    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        //Upload Files
        UploadFiles();

        //Update SQL Table
        AddBuildInfo(txtProduct.Text, txtPlatform.Text, cpBuildDate.SelectedDate, txtPublisher.Text, txtVersion.Text, BuildUploadPath,FileUpBuild.FileName, ReleaseNotesUpPath, FileUpRelease.FileName, txtComments.Text);
    }

    private void UploadFiles()
    {
        #region Build
        string tempfileDir = @"C:\Publish\TempFileStorage\";
        if (FileUpBuild.HasFile)
        {
            try
            {
                if (!Directory.Exists(tempfileDir))
                {
                    Directory.CreateDirectory(tempfileDir);
                }
                FileUpBuild.SaveAs(@"C:\Publish\TempFileStorage\" + FileUpBuild.FileName);
                FTP.FtpUpload(BuildUploadPath, FileUpBuild.FileName, tempfileDir + FileUpBuild.FileName);
                //FileUpBuild.SaveAs();
                //FileUpBuild.FileContent();
            }
            catch (Exception ex)
            {
            }
            finally
            {
                File.Delete(@"C:\Publish\TempFileStorage\" + FileUpBuild.FileName);
            }
        }
        #endregion

        #region ReleaseNotes
        if (FileUpRelease.HasFile)
        {
            try
            {
                if (!Directory.Exists(tempfileDir))
                {
                    Directory.CreateDirectory(tempfileDir);
                }
                FileUpRelease.SaveAs(@"C:\Publish\TempFileStorage\" + FileUpRelease.FileName);
                FTP.FtpUpload( ReleaseNotesUpPath, FileUpRelease.FileName, tempfileDir + FileUpRelease.FileName);
                //FileUpBuild.SaveAs();
                //FileUpBuild.FileContent();
            }
            catch (Exception ex)
            {
            }
            finally
            {
                File.Delete(@"C:\Publish\TempFileStorage\" + FileUpRelease.FileName);
            }
        }
        #endregion

    }

    private void AddBuildInfo(string product, string platform, DateTime builddate, string publisher, string version, string location, string filename, string releaseloc, string releasefile, string comment)
    {
        try
        {
            using (SqlConnection conRDB = new SqlConnection(ConfigurationManager.ConnectionStrings["conRDB"].ConnectionString))
            {
                SqlCommand insertCommand = new SqlCommand("Insert into tblBuildList " +
                                                "Values('" + product + "'," +
                                                        "'" + platform + "'," +
                                                        "'" + builddate + "'," +
                                                        "'" + publisher + "'," +
                                                        "'" + version + "'," +
                                                        "'" + location + "'," +
                                                        "'" + filename + "'," +
                                                        "'" + releaseloc + "'," +
                                                        "'" + releasefile + "'," +
                                                        "'" + comment + "')", conRDB);
                conRDB.Open();
                insertCommand.ExecuteNonQuery();

                getBuildData();
                conRDB.Close();
            }
        }

        catch (Exception ex)
        {
        }
    }

    protected void btnUpBuild_Click(object sender, EventArgs e)
    {
        string tempfileDir = @"C:\Publish\TempFileStorage\";
        if (FileUpBuild.HasFile)
        {
            try
            {
                if (!Directory.Exists(tempfileDir))
                {
                    Directory.CreateDirectory(tempfileDir);
                }
                FileUpBuild.SaveAs(@"C:\Publish\TempFileStorage\" + FileUpBuild.FileName);
                FTP.FtpUpload(BuildUploadPath, FileUpBuild.FileName, tempfileDir + FileUpBuild.FileName);
                //FileUpBuild.SaveAs();
                //FileUpBuild.FileContent();
            }
            catch (Exception ex)
            {
            }
            finally
            {
                File.Delete(@"C:\Publish\TempFileStorage\" + FileUpBuild.FileName);
            }
        }
    }

    protected void btnUpRelease_Click(object sender, EventArgs e)
    {
        string tempfileDir = @"C:\Publish\TempFileStorage\";
        if (FileUpRelease.HasFile)
        {
            try
            {
                if (!Directory.Exists(tempfileDir))
                {
                    Directory.CreateDirectory(tempfileDir);
                }
                FileUpRelease.SaveAs(@"C:\Publish\TempFileStorage\" + FileUpRelease.FileName);
                FTP.FtpUpload( ReleaseNotesUpPath, FileUpRelease.FileName, tempfileDir + FileUpRelease.FileName);
                //FileUpBuild.SaveAs();
                //FileUpBuild.FileContent();
            }
            catch (Exception ex)
            {
            }
            finally
            {
                File.Delete(@"C:\Publish\TempFileStorage\" + FileUpRelease.FileName);
            }
        }
    }

} 
```

以上是我的代码

下面是我的 .aspx 页面

```
<div id="Addnewbuild">
    <h3>Add a New Build</h3>
    <table>
        <tr>
            <th>
                <asp:Label ID="lblHeader1" runat="server">Product</asp:Label>
            </th>
            <th>
                <asp:Label ID="lblHeader2" runat="server">Platform</asp:Label>
            </th>
            <th>
                <asp:Label ID="lblHeader3" runat="server">Build Date</asp:Label>
            </th>
            <th>
                <asp:Label ID="lblHeader31" runat="server">Publisher</asp:Label>
            </th>
            <th>
                <asp:Label ID="lblHeader4" runat="server">Version #</asp:Label>
            </th>
            <th>
                <asp:Label ID="lblHeader5" runat="server">Build</asp:Label>
            </th>
            <th>
                <asp:Label ID="lblHeader6" runat="server">Release Notes</asp:Label>
            </th>
            <th>
                <asp:Label ID="lblHeader7" runat="server">Comments</asp:Label>
            </th>
        </tr>
        <tr>
            <td>
                <asp:TextBox ID="txtProduct" runat="server" Width="150px"></asp:TextBox>
            </td>
            <td>
                <asp:TextBox ID="txtPlatform" runat="server" Width="75px"></asp:TextBox>
            </td>
            <td>
                <ew:CalendarPopup ID="cpBuildDate" ControlDisplay="TextBoxButton" Text="Change Date"
                    runat="server" SelectedDate="" VisibleDate="" Visible="True" Enabled="True" Width="100px">
                </ew:CalendarPopup>
            </td>
            <td>
                <asp:TextBox ID="txtPublisher" runat="server" Width="75px"></asp:TextBox>
            </td>
            <td>
                <asp:TextBox ID="txtVersion" runat="server" Width="75px"></asp:TextBox>
            </td>
            <td>
                <asp:FileUpload ID="FileUpBuild" runat="server" />
                <!--<asp:Button ID="btnUpBuild" runat="server" Text="Upload Build" OnClick="btnUpBuild_Click" />-->
            </td>
            <td>
                <asp:FileUpload ID="FileUpRelease" runat="server" />
                <!--<asp:Button ID="btnUpRelease" runat="server" Text="Upload Release Notes" OnClick="btnUpRelease_Click" />-->
            </td>
            <td>
                <asp:TextBox ID="txtComments" runat="server" Width="100px" TextMode="MultiLine"></asp:TextBox>
            </td>
        </tr>
    </table>

    <asp:Button ID="btnSubmit" Text="Submit" runat="server" OnClick="btnSubmit_Click" />
</div>
<br />
<br />
<br />

<div id="buildlist">
    <h3>Build List</h3>
            <asp:GridView ID="gvBuildList" runat="server" AutoGenerateColumns="False" AllowPaging="True" OnRowEditing="gvBuildList_RowEditing" AutoGenerateEditButton="True">
                <Columns>
                    <asp:TemplateField HeaderText="Product">
                        <ItemTemplate>
                            <asp:Label ID="lblProduct" runat="server" Text='<%#Eval("ProductName")%>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtGVProduct" runat="server" Text='<%#Eval("ProductName")%>'></asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Platform">
                        <ItemTemplate>
                            <asp:Label ID="lblplatform" runat="server" Text='<%#Eval("Platform")%>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtGVPlatform" runat="server" Text='<%#Eval("Platform")%>'></asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Build Date">
                        <ItemTemplate>
                            <asp:Label ID="lblbldDate" runat="server" Text='<%#Eval("BuildDate")%>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtGVbldDate" runat="server" Text='<%#Eval("BuildDate")%>'></asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Publisher">
                        <ItemTemplate>
                            <asp:Label ID="lblPublisher" runat="server" Text='<%#Eval("Publisher")%>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtGVPublisher" runat="server" Text='<%#Eval("Publisher")%>'></asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Version #">
                        <ItemTemplate>
                            <asp:Label ID="lblVersion" runat="server" Text='<%#Eval("VersionNumber")%>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtGVVersion" runat="server" Text='<%#Eval("VersionNumber")%>'></asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Build">
                        <ItemTemplate>
                            <asp:Label ID="lblbldLocation" runat="server" Text='<%#Eval("FileName")%>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtGVbldLocation" runat="server" Text='<%#Eval("FileName")%>'></asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Release Notes">
                        <ItemTemplate>
                            <asp:Label ID="lblRelease" runat="server" Text='<%#Eval("ReleaseFileName")%>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtGVRelease" runat="server" Text='<%#Eval("ReleaseFileName")%>'></asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Comments">
                        <ItemTemplate>
                            <asp:Label ID="lblComments" runat="server" Text='<%#Eval("Comments")%>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtGVComments" runat="server" Text='<%#Eval("Comments")%>'></asp:TextBox>
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <asp:CommandField ShowEditButton="True" ButtonType="Button" />
                    <asp:CommandField ShowDeleteButton="True" ButtonType="Button" />
                    <asp:TemplateField HeaderText="Actions">
                        <ItemTemplate>
                            <asp:ImageButton ID="btnDwnld" runat="server" ImageURL="Images/hard-drive-download.png" Width="20" Height="20" />
                            <asp:ImageButton ID="btnEmail" runat="server" ImageURL="Images/email-icon.png" Width="20" Height="20" />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
</div> 
```

以上是我的 GridView 代码，我还有大约 8 个其他列，但我删除了它们。

即使我有行编辑方法来捕获任何编辑，我的页面仍然会抛出错误：

> GridView 'gvBuildList' 触发了未处理的事件 RowEditing。

描述：

> 当前 Web 请求执行期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详情：

> System.Web.HttpException：GridView 'gvBuildList' 触发了未处理的事件 RowEditing。

源错误：

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

> HttpException (0x80004005)：GridView 'gvBuildList' 触发了未处理的事件 RowEditing。
> System.Web.UI.WebControls.GridView.OnRowEditing(GridViewEditEventArgs e) +1588857 System.Web.UI.WebControls.GridView.HandleEdit(Int32 rowIndex) +43
> System.Web.UI.WebControls.GridView.HandleEvent(EventArgs e, Boolean CauseValidation, String validationGroup) +611
> System.Web.UI.WebControls.GridView.RaisePostBackEvent(String eventArgument) +205
> System.Web.UI.WebControls.GridView.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +13
> System .Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
> System.Web.UI.Page.RaisePostBackEvent（NameValueCollection postData）+9643314 System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+1724

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-31T16:28:51.837

您可以通过添加一个空事件来修复它

```
protected void grd_RowDeleting(object sender, GridViewDeleteEventArgs e)
{

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-15T06:47:55.097

只需将“编辑”或“删除”按钮的“CommandName”属性从“编辑”更改为“Editttt”“删除”更改为“Deleteee”（或其他与您相关但确保它不是“编辑”的内容或“删除”）。它会正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T07:18:35.693

从您的 gridview 代码中删除此

```
AutoGenerateEditButton="True" 
```

这不是必需的。因为您在创建 gridview 时采用了自定义模板。我猜 gridview 比您所做的更简单。

```
<asp:GridView ID="gvBuildList" runat="server" AutoGenerateColumns="False" AllowPaging="True" OnRowEditing="gvBuildList_RowEditing">
                                        <AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>
                                        <Columns>
 <asp:BoundField DataField="ProductName" HeaderText="Product Name" SortExpression="ProductName" />
 <asp:BoundField DataField="Platform" HeaderText="Platform" SortExpression="Platform" />
 <asp:BoundField DataField="BuildDate" HeaderText="Build Date" SortExpression="BuildDate" />
 <asp:BoundField DataField="Publisher" HeaderText="Publisher" SortExpression="Publisher" />
 <asp:BoundField DataField="VersionNumber" HeaderText="Version #" SortExpression="VersionNumber" />
 <asp:BoundField DataField="FileName" HeaderText="Build" SortExpression="FileName" />
 <asp:BoundField DataField="ReleaseFileName" HeaderText="Release Notes" SortExpression="ReleaseFileName" />
 <asp:BoundField DataField="Comments" HeaderText="Comments" SortExpression="Comments" />

 <asp:ButtonField ButtonType="Image" CommandName="Edit" HeaderText="Edit"
                                                ImageUrl="Images/hard-drive-download.png" ShowHeader="True" Text="Edit" /> 
```

如果要在 gridview 中使用自定义模板，则必须使用命令名称属性。因为 Gridview 将找不到 Edit 事件。

用这个替换你的gridview，你的代码就可以工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T03:41:02.513

重新构建您的应用程序 [编译您的代码]，您的错误将不再存在。

因为您在 Code behind 中编写了代码但未编译。所以 gridview 没有得到 Row_editing 事件。

转到 -> 构建 -> 重建解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T23:29:22.617

所以，在尝试了一些不同的东西之后，最简单的解决方案。

我在页面加载中有我的 gridview 绑定。这就是造成这个问题的原因。我所要做的就是将 GV 绑定移动到

```
 if (!Page.IsPostBack)
    {
        getBuildData();
    } 
```

在 Page_Load 方法中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-22T20:09:29.067

今天，我也遇到了这个问题。一小时后，我注意到 Gridview 事件选项卡中有两个事件。应注意事件名称：

1.  行更新事件

2.  行更新事件

确保您为代码使用正确的事件。

# php - 使用模型中的函数

> ID：13170573
> 
> 赞同：0
> 
> 时间：2012-11-01T03:33:44.683
> 
> 标签：php, yii

用户.php（模型）：

```
...
public function hashPassword($password){
    $hashed = hash('sha256', $password . self::HASH_CODE);
    return $hashed;
}
... 
```

用户身份.php

```
...
else if($user->password!==Users::hashPassword($this->password))
... 
```

错误：

```
Non-static method Users::hashPassword() should not be called statically, assuming $this from incompatible context 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:35:46.447

您需要将其定义`hashPassword()`为静态函数才能调用它`Users::hashPassword()`：

```
public static function hashPassword($password) {
    ... 
```

否则，您可以创建`Users`该类的实例并以非静态方式调用它：

```
$users = new Users();
$users->hashPassword($password); 
```

严格`yii`来说，您可以使用以下方式调用它（取决于您的设置）：

```
Yii::app()->Users->hashPassword($password); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:36:11.407

```
else if($user->password!==Users::model()->hashPassword($this->password)) 
```

这不是静态方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T03:37:07.630

制作函数`static`

```
public static function hashPassword($password){
    $hashed = hash('sha256', $password . self::HASH_CODE);
    return $hashed; } 
```

# reference - 使用 ajaxtoolkit 部署 C# Web 应用程序会引发异常

> ID：13170574
> 
> 赞同：0
> 
> 时间：2012-11-01T03:33:52.920
> 
> 标签：reference

我的 Web 应用程序在我的开发计算机上正常运行，但是当我尝试将其部署为 ISS 6.0 Windows server 2003 时，它会出现以下错误：

> 请求的脚本资源“Common.Common.js”需要 ASP.NET AJAX 框架的版本“AjaxControlToolkit, Version=4.1.60623.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e”。要使用此资源，请确保应用程序引用版本“AjaxControlToolkit, Version=4.1.60623.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e”。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:37:10.503

将 ajax AjaxControlToolkit.dll 放在 Bin 文件夹中，并将项目引用添加到该 Bin DLL。构建和部署。

即使它不起作用，也将 system.Extension.dll 放入 Bin 文件夹并提供参考。

希望这会奏效..

# c# - 在 WPF (Windows.Controls.WebBrowser) 中使用 WebBrowser 视图时确定页面何时完成加载

> ID：13170578
> 
> 赞同：2
> 
> 时间：2012-11-01T03:35:15.590
> 
> 标签：c#, .net, wpf, wpf-controls

我使用了“LoadCompleted”事件，基本上一旦收到事件，我需要截取屏幕截图（我已经构建）。问题是一旦这个事件消失，屏幕截图只是空白（页面尚未加载），只有我延迟 5-10 秒，屏幕截图才会起作用

现在如何确定网页何时完全呈现？加载所有方面等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:50:44.160

您的问题是 LoadCompleted 事件在页面加载后立即调用，但在呈现之前。我不知道有什么方法可以准确判断它何时完成渲染，但您可以使用 Dispatcher 确保您的代码在任何渲染发生后运行。

```
private void Browser_LoadCompleted(object sender, NavigationEventArgs e)
{
    Dispatcher.Invoke(TakeScreenshot, System.Windows.Threading.DispatcherPriority.Background);
}

private void TakeScreenshot()
{
    //insert your screenshot code here
} 
```

您可能需要稍微尝试一下优先级，但背景似乎对我有用。

# android - 无法呈现pdf

> ID：13170580
> 
> 赞同：1
> 
> 时间：2012-11-01T03:35:26.013
> 
> 标签：android, pdf

尝试呈现 pdf 页面时出现问题，我正在使用 pdfviewer 库（从[https://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)获得）。

我将我的 pdf 文件存储到设备的内部存储器中。当我尝试显示 pdf 时，它只在应该显示 pdf 的区域显示带有空白白页的界面。奇怪的是，它还显示了页码。

logcat 中的声明指出：“11-01 11:30:37.240: E/AWTPDF.pdfimage(8675): image too large (OutOfMemoryError)”

这就是它的样子：http: [//i.stack.imgur.com/Pes6w.png](http://i.stack.imgur.com/Pes6w.png)

# ruby - 深度嵌套元素的 XPath？

> ID：13170587
> 
> 赞同：9
> 
> 时间：2012-11-01T03:36:41.937
> 
> 标签：ruby, xml, xpath, nokogiri

我正在使用 Nokogiri。

假设我有一个深度嵌套的路径：

```
//h1/h2/h3/h4/h5 
```

我想我可以使用以下路径：

```
//h1/*/*/*/h5 
```

有什么办法可以避免使用多个星号？像`//h1/.../h5`什么？

我不想继续计算嵌套的级别。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T03:45:04.467

对于从 h1 下降的所有 h5 元素，请使用：

```
//h1//h5 
```

或者您可能喜欢更简单的 css 样式：

```
h1 h5 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T03:41:28.473

只需使用：`//`，即：`//h5`。此 XPath 将选择所有`h5`元素。见规范：[http ://www.w3.org/TR/xpath/#path-abbrev](http://www.w3.org/TR/xpath/#path-abbrev)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T04:18:33.280

**如果要选择所有`h5`低于其 h1 祖先 4 级的所有内容，请使用：**

```
//h5[ancestor::*[4][self::h1]] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select="//h5[ancestor::*[4][self::h1]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<t>
 <head/>
 <body>
  <h1>First Main title
    <a>
     <b>
       <c>
         <h5 id="id1"/>
         <d>
           <h5 id="id2"/>
         </d>
       </c>
     </b>
    </a>
  </h1>
 </body>
</t> 
```

**对 XPath 表达式求值，并将求值结果（所选`h1`元素（在本例中为一个））复制到输出**：

```
<h5 id="id1"/> 
```

**如果您不想计算中间级别的数量，但要确保它们不超过某个数字（比如 7），您可以编写**：

```
//h1[descendent::*[not(position() > 7)][self::h1]] 
```

**这将选择 any`h5`的任何后代`h1`，其中 the`h1`和后代之间的级别“距离”`h5`不超过 7**。

**请注意**：

**像下面这样的表达式 - 正如其他答案中所建议的那样：**

```
//h1//h5 
```

**错误地选择了上述文件**：

```
<h5 id="id1"/>
<h5 id="id2"/> 
```

**两个选定元素中的第二个元素与其祖先`h5`的距离大于想要的元素`h1`**。

# html - 倒数计时器 - 达到零时删除 DIV

> ID：13170589
> 
> 赞同：0
> 
> 时间：2012-11-01T03:36:50.770
> 
> 标签：html, timer, countdown

我想知道如何在屏幕上设置倒数计时器，当它达到零时，它会删除特定的 DIV。

基本上我正在设计一个一次性报价的报价页面，他们必须在一个时间范围内响应它，否则它将永远消失。

我有一个名为#offer-wrapper 的div 和一个名为#offer-timer 的div。第二个 div 中的计时器应该导致第一个 div 从页面中删除。

可以从获取 HTML/JS 倒计时脚本开始，但从那里我迷路了，请指教谢谢 :)

编辑。如果可能的话，还有什么可以阻止用户刷新页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:54:59.637

```
$(document).ready(function() {

    jQuery.fn.countDown = function(settings, to) {
        settings = jQuery.extend({
            startFontSize : '40px',
            endFontSize : '12px',
            duration : 1000,
            startNumber : 10,
            endNumber : 0,
            callBack : function() {
            }
        }, settings);
        return this.each(function() {

            if (!to && to != settings.endNumber) {
                to = settings.startNumber;
            }

            // Set the countdown to the starting number
            $(this).text(to).css('fontSize', settings.startFontSize);

            // Loopage
            $(this).animate({
                'fontSize' : settings.endFontSize
            }, settings.duration, '', function() {
                if (to > settings.endNumber + 1) {
                    $(this).css('fontSize', settings.startFontSize).text(to - 1).countDown(settings, to - 1);
                } else {
                    settings.callBack(this);
                }
            });

        });
    };

    $('#countdown').countDown({
        startNumber : 100,
        callBack : function(me) {
            $('#countdown').remove();
            alert("TIME IS OVER!!");
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:53:01.650

您可以使用 window.setInterval 和一个简单的函数来更新全局变量，然后使用 jQuery 的 .remove() 函数（或者甚至只是将 CSS 设置为 display:none）来执行此操作

```
var time = 60;

window.setInterval(test, 1000);

function test()
{
    //update time
    time -=1;
    //update the div to show the time
    $('#testDiv').html(time); 

    //hide the div if the time is 0
    if(time == 0)        
    {
        $('#testDiv').remove();
    }
} 
```

jsFiddle = [http://jsfiddle.net/9sAce/](http://jsfiddle.net/9sAce/) ​</p>

# c - 如何为不同范围的值创建查找表

> ID：13170593
> 
> 赞同：0
> 
> 时间：2012-11-01T03:37:10.503
> 
> 标签：c, opencv

我想尝试使用查找表（cvLUT）来检查它是否比我现在正在做的当前方式快。问题是如果我有不同的值集，我真的不明白查找表是如何工作的，例如。

```
if(mean < 50)
 //do gamma correction
else if(mean > 50 && mean < 100)
 // do gamma correction
else 
 //do do gamma correction 
```

我看到我们需要先计算查找表，但平均值是使用本地窗口在本地计算的。我怎样才能做到这一点？我尝试将平均值存储在向量中然后使用它，但是当它存储在向量中时它非常慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:54:47.827

我认为查找表不适合您正在做的事情，因为转换取决于本地窗口中的信息。如果您想要对所有像素进行仅取决于像素值而不依赖于其他像素值的转换，则查找表是很好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:36:58.097

如果性能是您正在寻找的东西，那么很难击败内联汇编。

```
int mean;

asm {
cmp mean, 99
jg _else      
cmp mean, 50
jl _if
_else_if:
}
// gamma correction
asm { _else: }
// gamma correction
asm { _if: }
// gamma correction 
```

# visual-studio-2010 - 将我的 RDLC 架构从 2008/01 升级到 2010/01

> ID：13170608
> 
> 赞同：2
> 
> 时间：2012-11-01T03:39:37.960
> 
> 标签：visual-studio-2010, reporting-services, rdlc, page-break

问的第一个问题！！:)

我有一个 Visual Studio 2010 项目，其中有一些 RDLC 报告定义。我被要求通过在组休息时重置页数和总页数来满足要求。我不认为这有什么大不了的——好吧，我错了。:)

我找到了一种通过报告上的代码重置页码的方法，但似乎找不到重置总页数的方法。即：X 的第 1 页，X 的第 2 页......“X”部分是我似乎无法在小组休息时重置的部分。

无论如何，通过更多搜索，我发现这似乎是 Reporting Services 中受支持的功能...请参阅此链接... [http://sqlserverpedia.com/blog/sql-server-bloggers/group-level-page-编号-使用-报告-服务-2008-r2/](http://sqlserverpedia.com/blog/sql-server-bloggers/group-level-page-numbering-using-reporting-services-2008-r2/)

但是，这在我的属性页面中对我不可用，通过更多搜索，我发现此属性是 2010/01 模式及以后的一部分，而不是我的项目似乎正在使用的 2008/01 模式的一部分。

所以我真正的问题......有没有办法将我的 RDLC 报告模式从 2008/01 模式升级到 2010/01 模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:16:05.230

当您使用 BIDS 2008R2 编辑报告时，报告架构将自动更新。如果不是，那么您没有使用 2008R2 工具编辑报告。将 Business Intelligence Development Studio 2008R2 安装到您的计算机上。它可以在 SQL 安装介质上找到。

在执行此操作之前，请确保将要部署这些的服务器正在运行 SSRS 2008R2！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T20:18:58.497

> **免责声明：**我对这个答案感到非常肮脏，但它对我有用。与所有未记录的黑客行为一样，风险自负。
> 
> 必须有更好的方法来做到这一点，但我找不到。我相信您的 .rdlc 文件在源代码管理中，并且如果以下过程导致问题，您可以回滚到以前的工作版本。

您的 RDLC 文件的命名空间声明将如下所示：

![使用 2008 架构的 RDLC 文件](../Images/1d4f2dff4ac492797c1f8e786aeabd0f.png)

要强制 Visual Studio（在我的情况下为 2013；我尚未使用任何其他版本对其进行测试）升级到 2010 架构，请执行以下操作：

1.  打开工具箱
2.  将指标拖到您的报告中
3.  保存您的报告
4.  从您的报告中删除新添加的指标
5.  保存您的报告

或者，以动画 gif 形式：

![在此处输入图像描述](../Images/370efd2e80a362a56395e327301d87e5.png)

之后，您的 RDLC 文件的命名空间声明应如下所示：

![在此处输入图像描述](../Images/998d19e38df8d8554873dbb0dba3805f.png)

希望这可以帮助。

# c++ - 使用 C++/CLI 打开和读取 Excel 文件

> ID：13170609
> 
> 赞同：4
> 
> 时间：2012-11-01T03:39:43.920
> 
> 标签：c++, .net, excel, command-line-interface

我正在尝试使用 C++/CLI 创建一个程序，该程序使用 Visual Studio 从 Excel 工作簿中读取一些数据。我已将 Microsoft.Office.Interop.Excel (v12) 添加到项目属性中的引用中。我的基本目标只是将单元格的值作为字符串获取（工作簿仅包含文本值）。我当前的代码如下（当然只包括主要部分）：

```
using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;
using namespace Microsoft::Office::Interop::Excel;

start(void){
        Microsoft::Office::Interop::Excel::Application^ exApp= gcnew Microsoft::Office::Interop::Excel::ApplicationClass();
        String^ filename="e:\\test.xls";
        Workbook^ wb = exApp->Workbooks->Open(filename, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing);
        Worksheet^  exWs  = safe_cast<Worksheet^>(exApp->ActiveSheet);
        int row=1;
        int col=1;
        String^ tmp=((Microsoft::Office::Interop::Excel::Range^)exWs->Cells[(System::Object^)row, (System::Object^)col])->Value2->ToString();
        MessageBox::Show(tmp);
} 
```

当我运行它时，它崩溃并出现以下错误：

```
An unhandled exception of type 'System.Runtime.InteropServices.COMException' occurred in exc2.exe

Additional information: Old format or invalid type library. (Exception from HRESULT: 0x80028018 (TYPE_E_INVDATAREAD)) 
```

当我尝试打开工作簿时，xls 和 xlsx 文件都会发生这种情况（在以“Workbook^ wb = exApp->Workbooks->Open”开头的行 - 所以我什至无法检查其余部分是否正常工作）。请问有什么帮助，我错过了什么/做错了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T15:59:43.373

好的，我终于得到了主要问题，如果其他人遇到同样的问题：

打开 Excel 文件时，Windows 和已安装的 Excel 程序的区域设置必须相同。我住在匈牙利，在 Windows 中使用匈牙利区域设置 [注意：我使用英文 Windows，只是区域设置不同]，我有一个英文版的 Excel。一旦我将 Windows 中的区域设置切换到美国 [与 Excel 的区域相同]，清理并重建解决方案，一切都开始像魅力一样工作。

（我不确定消息框部分是否在我的代码中工作，我同时更改了它，主要问题是打开文件）

# c# - 棘手的递归函数

> ID：13170613
> 
> 赞同：0
> 
> 时间：2012-11-01T03:40:17.960
> 
> 标签：c#, recursion

```
public class look
{
    public int takeALook (int a)
    {
        if (a == 1)
            return 1;
        else if (a == 0)
            return 0;
        else
            return takeALook(a-2) + takeALook(a-1);

    }
} 
```

主程序，

```
int a = 6;

look lk = new look();

int r = lk.takeALook(a);

Console.WriteLine("r is" + r); 
```

答案是 8。但谁能解释为什么？这让我很困惑，因为它称自己为 2x。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T03:48:34.473

```
takeALook(0) == 0
takeALook(1) == 1
takeALook(2) == takeALook(0) + takeALook(1) == 0 + 1 == 1
takeALook(3) == takeALook(1) + takeALook(2) == 1 + 1 == 2
takeALook(4) == takeALook(2) + takeALook(3) == 1 + 2 == 3
takeALook(5) == takeALook(3) + takeALook(4) == 2 + 3 == 5
takeALook(6) == takeALook(4) + takeALook(5) == 3 + 5 == 8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T03:47:33.290

归结起来是这样的：

```
takeALook(6) =>
(takeALook(4) + takeALook(5)) =>
(((2 + 3)) + ((3 + 4))) =>
((((0 + 1) + (1 + 2))) + (((1 + 2) + (2 + 3)))) =>
((((0 + 1) + (1 + (0 + 1)))) + (((1 + (0 + 1)) + ((0 + 1) + (1 + 2))))) =>
((((0 + 1) + (1 + (0 + 1)))) + (((1 + (0 + 1)) + ((0 + 1) + (1 + (0 + 1)))))) =>
0 + 1 + 1 + 0 + 1 + 1 + 0 + 1 + 0 + 1 + 1 + 0 + 1 =>
8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T05:14:48.317

只需使用跟踪器修改您的程序，该跟踪器可能对任何递归函数都非常方便。

```
const string space = "  ";
static string StrMultiplier(string str,int multiplier)
{
    return string.Concat(Enumerable.Repeat(str,multiplier).ToArray());
}

static int F(int a,int level = 0)
{
    Console.WriteLine("{0}->F({1})",StrMultiplier(space,level),a);//Trace line
    if (a == 1)
        return 1;
    else if (a == 0)
        return 0;
    else
        return F(a-2,level + 1) + F(a-1,level+1);

} 
```

结果：

```
->F(6)
  ->F(4)
    ->F(2)
      ->F(0)
      ->F(1)
    ->F(3)
      ->F(1)
      ->F(2)
        ->F(0)
        ->F(1)
  ->F(5)
    ->F(3)
      ->F(1)
      ->F(2)
        ->F(0)
        ->F(1)
    ->F(4)
      ->F(2)
        ->F(0)
        ->F(1)
      ->F(3)
        ->F(1)
        ->F(2)
          ->F(0)
          ->F(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T03:51:56.147

这是一个将递归显示为树的小图像。修剪已经计算过的孩子![在此处输入图像描述](../Images/d8733c11af8bb228115e4abb6ee68ad6.png)

# asp.net-mvc - MVC 在会话中保存令牌

> ID：13170618
> 
> 赞同：4
> 
> 时间：2012-11-01T03:40:41.583
> 
> 标签：asp.net-mvc, session, authentication, asp.net-membership

我正在调用一项服务，并且我需要在我提出的每个请求中传递用户的永久安全令牌。

为此，我将此方法添加到我的基本控制器类中：

```
protected UserData getUsr()
{
        try
        {
            UserData usr = new UserData();
            usr.SecurityToken = Session["secToken"].ToString();

            MembershipUser mvcUser = Membership.GetUser(HttpContext.User.Identity.Name);
            usr.Id = (int)mvcUser.ProviderUserKey;

            return usr;
        }
        catch (Exception ex)
        {
            log.Debug("Could not create usr object", ex);
            throw new Exception("Could not authenticate");
        }
    } 
```

这里的问题是，有时 User.Identity 数据比会话数据更持久，导致用户看到他们已登录但随后他们的请求失败时发生奇怪的错误。

有没有更好的方法来存储这个令牌/我可以以这样的方式存储它，只要 User.Identity 对象过期，它就会过期吗？

此外，如果有人知道一些关于 HttpContext 和 MVC 授权过滤器的基本理解示例/文档，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T09:47:39.983

我会去将用户的安全令牌存储在表单身份验证 cookie 本身中。该类`FormsAuthenticationTicket`包含一个`UserData`属性，您可以在其中包含您的附加信息。

> 属性中指定的值`UserData`包含在身份验证票证 cookie 中，并且与其他票证字段一样，根据表单身份验证系统的配置进行加密和验证。

这是一篇[文章](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.aspx)，描述了如何将附加信息存储到表单身份验证 cookie。

[这](http://www.asp.net/web-forms/tutorials/security/introduction/forms-authentication-configuration-and-advanced-topics-vb)是一篇大文章，它解释了有关将附加数据存储到表单身份验证中的许多内容。cookie 以及如何阅读它。代码是用VB编写的，格式不正确。您必须向下滚动到*第 4 步：在工单中存储其他用户数据*。

该[主题](https://stackoverflow.com/questions/6059972/formsauthentication-userdata-lost-but-in-cookie)将为您提供如何`UserData`从 cookie 中读取的快速答案。

我会去创建一个像[这里](http://prideparrot.com/blog/archive/2012/7/how_to_create_a_custom_session_value_provider)`ValueProvider`描述的那样的自定义，它将从身份验证中读取安全令牌。cookie 并提供给操作参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T14:47:54.740

您可以将用户安全令牌、IP 地址和时间戳放在字符串中。使用对称算法（如 AES）加密字符串并将其作为 cookie 放置。然后更改您的代码以从 cookie 中读取。您可以验证 cookie 中的 ip 地址是否与用户的 ip 地址匹配，这将防止有人窃取 cookie 值并重放它。 [这里](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged.aspx)是关于 AES 的 MSDN 文档（Rjindael 是原始名称）。在此方案中，令牌不会过期，直到 cookie 过期和/或达到您的超时时间。我强烈建议你设置一个超时，而不是让它永远或持久化，它会使排除超时的方案不那么安全。还要将时间戳放在 cookie 值的开头，因为这些算法的 CBC 模式会影响加密字符串的外观，因为开头的位发生变化（雪崩效应）。

ASP.NET 成员身份提供程序还有一个身份验证 cookie，因此该 cookie 不应在成员身份 cookie 之前过期。会话必须在超时时过期，因为无法保证用户仍然存在，因为 HTTP 是无状态的，而 cookie 处于用户的控制之下，并且每次发出请求时都会传递。

**getUsr 函数**

```
protected UserData getUsr()
{
    try
    {
        UserData usr = new UserData();

        string token = Request.Cookies["secToken"].Value;

        // implement RijndaelManaged encryption/decryption scheme
        // this can also be serialized as an object to make cleaner
        var tokenValues = Decrypt(token).Split(',');

        // The timeout expired
        if (DateTime.Now > DateTime.Parse(tokenValues[1]))
        {
            throw new Exception("Timeout");
        }

        // someone stole this cookie or is on a different internet connection
        if (tokenValues[0] != System.Web.HttpContext.Current.Request.UserHostAddress)
        {
            throw new Exception("Invalid IP");
        }

        // You're ok everything checks out
        usr.SecurityToken = tokenValues[3].ToString();

        MembershipUser mvcUser = Membership.GetUser(HttpContext.Current.User.Identity.Name);
        usr.Id = (int)mvcUser.ProviderUserKey;

        return usr;
    }
    catch (Exception ex)
    {
        log.Debug("Could not create usr object", ex);
        throw new Exception("Could not authenticate");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T12:14:50.037

也许我说的很愚蠢，但过去我也遇到过类似的问题，我通过简单地将会话过期时间设置为大于登录的过期时间来解决它。Whenerver，您可以使用刷新会话数据的安全令牌进入网站 b，因此可以肯定它们将在用户登录的整个过程中持续存在。会话持续时间更长的事实不会导致问题，因为只有登录的用户可以使用该数据，并且当新用户登录时，旧会话条目将被替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-31T21:22:58.933

如果`User.Identity`超过 Session，为什么不将令牌作为 a 存储`Claim`在 Identity 中？就像是：

```
var claims = new[]
{
    new Claim("access_token", string.Format("Bearer {0}", token)),
};

var identity = new ClaimsIdentity(claims, DefaultAuthenticationTypes.ApplicationCookie);

Request.GetOwinContext().Authentication.SignIn(options, identity); 
```

# c# - 我可以在 WPF 中设置窗口边框颜色吗？

> ID：13170620
> 
> 赞同：17
> 
> 时间：2012-11-01T03:40:50.607
> 
> 标签：c#, wpf

我可以知道如何设置窗口样式或颜色吗？下图是我的 WPF ![在此处输入图像描述](../Images/9e62b8c6cd530bc541255be26e4a5036.png)

我想将我的窗口设置为类似于下面的应用程序：

![在此处输入图像描述](../Images/a8ab7f12ebcac554199b4d3b5a905aac.png)

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T09:12:52.963

据我所知（4 年多前），您可以创建一种与 WPF 窗口一起使用的样式。

**这是一个示例窗口样式：**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"> 
    <Style x:Key="MainWindow" 
           TargetType="{x:Type Window}"> 
        <Setter Property="Foreground" 
                Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}" /> 
        <Setter Property="Template"> 
            <Setter.Value> 
                <ControlTemplate TargetType="{x:Type Window}"> 
                    <Grid> 
                        <Border x:Name="MainBorder" 
                                BorderBrush="{DynamicResource MainWindowBorderBrush}" 
                                BorderThickness="1" 
                                CornerRadius="2" 
                                Background="{DynamicResource MainWindowBackgroundBrush}"> 
                            <DockPanel LastChildFill="True"> 
                                <Rectangle x:Name="PART_LEFT_BORDER" 
                                           Width="2" 
                                           Cursor="SizeWE"> 
                                    <Rectangle.Fill> 
                                        <SolidColorBrush Color="Transparent" /> 
                                    </Rectangle.Fill> 
                                </Rectangle> 
                                <Rectangle x:Name="PART_RIGHT_BORDER" 
                                           Cursor="SizeWE" 
                                           Width="2" 
                                           DockPanel.Dock="Right"> 
                                    <Rectangle.Fill> 
                                        <SolidColorBrush Color="Transparent" /> 
                                    </Rectangle.Fill> 
                                </Rectangle> 
                                <Rectangle x:Name="PART_TOP_BORDER" 
                                           Cursor="SizeNS" 
                                           DockPanel.Dock="Top" 
                                           Height="2"> 
                                    <Rectangle.Fill> 
                                        <SolidColorBrush Color="Transparent" /> 
                                    </Rectangle.Fill> 
                                </Rectangle> 
                                <Rectangle x:Name="PART_BOTTOM_BORDER" 
                                           Cursor="SizeNS" 
                                           Height="2" 
                                           DockPanel.Dock="Bottom"> 
                                    <Rectangle.Fill> 
                                        <SolidColorBrush Color="Transparent" /> 
                                    </Rectangle.Fill> 
                                </Rectangle> 
                                <Border x:Name="PART_TITLEBAR" 
                                        Margin="2,0,2,2" 
                                        Height="40" 
                                        DockPanel.Dock="Top" 
                                        CornerRadius="2" 
                                        Background="Transparent"> 
                                    <DockPanel LastChildFill="False"> 
                                        <TextBlock Margin="8,0,0,4" 
                                                   VerticalAlignment="Center" 
                                                   FontStretch="UltraExpanded" 
                                                   Foreground="Black" 
                                                   TextTrimming="CharacterEllipsis" 
                                                   TextWrapping="NoWrap" 
                                                   Text="{TemplateBinding Title}" 
                                                   FontSize="16" /> 
                                        <Button x:Name="PART_CLOSE" 
                                                DockPanel.Dock="Right" 
                                                Style="{DynamicResource FlatButton}" 
                                                VerticalAlignment="Center" 
                                                Margin="0,0,4,0"> 
                                            <Image Source="/MixModes.Synergy.Resources;
                        component/Resources/Close.png" 
                                                   Stretch="None" 
                                                   Margin="4" /> 
                                        </Button> 
                                        <Button x:Name="PART_MAXIMIZE_RESTORE" 
                                                DockPanel.Dock="Right" 
                                                HorizontalAlignment="Center" 
                                                VerticalAlignment="Center" 
                                                Style="{DynamicResource FlatButton}"> 
                                            <Image x:Name="MaximizeRestoreImage" 
                                                   Source="/MixModes.Synergy.Resources;
                        component/Resources/Restore.png" 
                                                   Stretch="None" 
                                                   Margin="4" /> 
                                        </Button> 
                                        <Button x:Name="PART_MINIMIZE" 
                                                HorizontalAlignment="Center" 
                                                Style="{DynamicResource FlatButton}" 
                                                VerticalAlignment="Center" 
                                                DockPanel.Dock="Right"> 
                                            <Image Margin="4" 
                                                   Source="/MixModes.Synergy.
                        Resources;component/Resources/
                        Minimize.png" 
                                                   Stretch="None" /> 
                                        </Button> 
                                    </DockPanel> 
                                </Border>

                                <!-- Title bar separator--> 
                                <Border Height="1" 
                                        DockPanel.Dock="Top" 
                                        Background="{DynamicResource 
                    MainWindowTitleBarSeparator}" />

                                <!-- Actual Window Content --> 
                                <AdornerDecorator DockPanel.Dock="Bottom"> 
                                    <ContentPresenter /> 
                                </AdornerDecorator> 
                            </DockPanel> 
                        </Border> 
                    </Grid> 
                    <ControlTemplate.Triggers>                        
                        <DataTrigger Binding="{Binding RelativeSource=
                {RelativeSource Self}, Path=Maximized}" 
                                     Value="False"> 
                            <Setter TargetName="MaximizeRestoreImage" 
                                    Property="Source" 
                                    Value="/MixModes.Synergy.Resources;
                component/Resources/Maximize.png" /> 
                        </DataTrigger> 
                    </ControlTemplate.Triggers> 
                </ControlTemplate> 
            </Setter.Value> 
        </Setter> 
    </Style> 
</ResourceDictionary> 
```

**结果将如下所示：**

![http://www.codeproject.com/KB/WPF/CustomWPFWindow/8.png](../Images/053e4442131d9d050babdc6252f06f6b.png)

阅读有关[在 WPF 中轻松创建自定义窗口的更多信息](http://www.codeproject.com/Articles/140267/Create-Custom-Windows-in-WPF-with-Ease)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-01T05:42:23.187

您可以使用下面的 XAML 在 WPF 中实现圆角窗口，这种方法的问题是您必须实现自己的最小化、最大化和关闭按钮。

[幸运的是， code plex](http://wpfwindow.codeplex.com/)上有一个库可以为您完成所有这些工作

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    AllowsTransparency="True"
    WindowStyle="None"
    Padding="0"
    WindowStartupLocation="CenterScreen" Height="200" Width="200" >
    <Border BorderBrush="Blue" BorderThickness="2" CornerRadius="6" >
    </Border>
</Window> 
```

# java - 对象集合到 JSON

> ID：13170622
> 
> 赞同：0
> 
> 时间：2012-11-01T03:41:06.047
> 
> 标签：java, json, rest, jackson

我有一个在 Tomcat 上运行的 RESTful Web 服务（Spring、Hibernate、c3p0、Sybase）。

它是一种搜索服务，根据搜索条件返回一组对象。每个对象都有一个非常深的包含对象的结构，有时会运行到一百个对象（大约）。目前，在我们收到集合后，我们将它们更改为 XML 并将其作为响应发送。

由于超出此处问题范围的原因，我现在需要用 JSON 和 XML 回复。因此，REST 服务的客户端可以选择以 XML 或 JSON 格式获取响应。

在这种情况下，现在的问题是

1.  什么是建议的框架/库来处理从对象集合创建 JSON 响应的要求（每个对象可能嵌入大约 100 个左右的对象）。我现在在看杰克逊。但是，如果您使用了其他任何东西并且得到了好/坏的结果，请告诉我。

2.  什么是处理两种不同类型响应（即 XML 和 JSON）的请求的好方法，从同一个服务中分配出来？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:48:46.253

杰克逊很棒，别再看了。

Jackson 实际上支持 JAXB 注释，因此您可以将它用于 JSON 和 XML：[http ://wiki.fasterxml.com/JacksonJAXBAnnotations](http://wiki.fasterxml.com/JacksonJAXBAnnotations)

[这里](http://www.ibm.com/developerworks/web/library/wa-restful/)有一个关于如何使用`HttpMessageConverter`配置不同表示的示例。

# regex - 使用 sed 附加文本的正则表达式

> ID：13170623
> 
> 赞同：0
> 
> 时间：2012-11-01T03:41:24.963
> 
> 标签：regex, sed

我有这样的文字

> 你好世界（some_text，some_other_text）

我想像这样在上面的文本末尾附加一个数字，比如 16

> 你好世界（some_text，some_other_text）16

我知道这个正则表达式`^HELLO WORLD \(([a-z],[a-z])`匹配它。我不确定如何将匹配的正则表达式存储在变量中，然后将 16 附加到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T03:48:16.797

`&`字符包含模式空间中的所有内容：

```
sed 's/^HELLO WORLD ([a-z_]*, [a-z_]*)/& 16/' file 
```

看看[使用 & 作为匹配的字符串](http://www.grymoire.com/Unix/Sed.html#uh-3)

并[使用 \1 保留部分模式](http://www.grymoire.com/Unix/Sed.html#uh-4)

# solr - 有多少组结果可用？

> ID：13170628
> 
> 赞同：1
> 
> 时间：2012-11-01T03:41:55.527
> 
> 标签：solr

考虑以下查询：

```
/solr/select?q=linux 
```

它返回这个 XML 响应：

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">0</int>
        <lst name="params">
            <str name="q">linux</str>
        </lst>
    </lst>
    <result name="response" numFound="10943" start="0"> 
```

从这里我们可以看到有 10943 个文档与我们的查询匹配。但是，请考虑使用分组的相同查询：

```
/solr/select?q=linux&group=true&group.field=tag 
```

它返回这个 XML 响应：

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">10</int>
        <lst name="params">
            <str name="group">true</str>
            <str name="group.field">tag</str>
            <str name="q">linux</str>
        </lst>
    </lst>
    <lst name="grouped">
        <lst name="tag">
            <int name="matches">10943</int>
            <arr name="groups">
                <lst>
                    <str name="groupValue">linux</str>
                    <result name="doclist" numFound="1224" start="0"> 
```

从这里我们可以看到有 10943 个文档满足我们的查询（显然，它与第一个示例中的查询相同）。我们还可以看到我们有 1224 个带有“linux”标签的文档。但是，没有提到有多少匹配组。因此，不能使用分页来呈现标签列表，因为无法计算需要多少页。

**如何获得返回的组数，以计算可用的分页页数？**

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T04:09:52.247

对于组数，请使用 groups.ngroups 请求参数，该参数将给出分页组数的计数。

[文档](http://wiki.apache.org/solr/FieldCollapsing#Request_Parameters)：-

```
group.ngroups
true/false
If true, includes the number of groups that have matched the query. Default is false. 
```

# ruby-on-rails - Rails在控制器中设置超时

> ID：13170637
> 
> 赞同：2
> 
> 时间：2012-11-01T03:43:06.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, timeout

在我的 Rails 控制器中，我想将文件下载到`public`项目的文件夹中（使用 Linux 系统命令`wget`）。然后我希望文件在那里停留一个小时，然后再调用命令`rm`删除它。我可以设置一个超时，以便代码执行在稍后恢复之前暂停吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T03:58:48.793

你不能设置超时有两个原因：
首先，该进程将被Web服务器超时杀死。
其次，即使你设置了适合你需要的超时时间，负责等待的进程也会吃掉资源，并且无法使用。要解决这个问题，你将不得不分叉另一个服务器进程，你真的需要这个吗？

但是你可以使用[https://github.com/jmettraux/rufus-scheduler](https://github.com/jmettraux/rufus-scheduler)

例如，在您的控制器中

```
require 'rubygems'
require 'rufus/scheduler'

def download_using_wget
  ...
  if some_method_to_wget_file
    scheduler = Rufus::Scheduler.start_new

    scheduler.in '1h' do
      some_code_to_rm_file(file)
    end
  end
  ... 
```

并且 some_code_to_rm_file 将在您 wget 文件后一小时内启动

# asp.net - ASP 网页中缺少重音字符

> ID：13170638
> 
> 赞同：0
> 
> 时间：2012-11-01T03:43:10.047
> 
> 标签：asp.net, globalization

尽管尝试显示重音字符的所有尝试和变化，我都无法在我的 ASP Net 应用程序中这样做。

*   我试过将它添加到网络配置中

*   我已将主页面和默认页面都保存为 UTF-8

但无论我做什么，我似乎都无法显示重音字符

我的 html 标记看起来像这样 `<h3 class="p5">¿Por qué una “Tercera” Luz de Freno?</h3>`

但我只看到
Por qu una Tercera...

它忽略 é 并且根本不显示它。该页面是[http://www.suplitekcr.com/motos.aspx](http://www.suplitekcr.com/motos.aspx)，以防您想查看。

如果我查看源代码，我可以看到 é 并且 Fiddler 说“Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3”，这意味着它正在接受具有 é 的 8859-1

想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:37:09.090

（@Pal R：当我进行更新和部署时，该页面暂时不可用）

我确实找到了显示字符但没有解决问题的解决方案。我从 templatemonster 购买了模板，它有一个 cufon js 库，即用“更好”的字体替换了当前字体。

它只适用于常规字符，但不适用于更好的字符。js的链接如下：

[http://suplitekcr.com/js/cufon-replace.js](http://suplitekcr.com/js/cufon-replace.js)

我刚刚删除了它并使用了不太好的字体。

关于为什么它不适用于这个库的任何想法？也许字体只是没有那些字符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T14:50:47.367

Cufon 是相当过时且有缺陷的技术。

切换到WEB字体会好得多。

# php - Jquery在提交表单时验证更改所需的值

> ID：13170639
> 
> 赞同：0
> 
> 时间：2012-11-01T03:43:09.970
> 
> 标签：php, javascript, jquery-validate

我想将 jquery validate 中的所需值从 false 更改为 true 并将 true 更改为 false。

如果 textbxox1 为空，我想设置 gobalvar=true 否则 gobalvar=false，

但在 jquery 中验证不改变值。它只记住真正的价值。

怎么解决 ？

PHP代码：

```
<form id="form1" name="form1"   method="post">
      <input type='text' id='textbox1' name='textbox1'/>
      <input type='text' id='textbox2' name='textbox2'/>
      <input type='submit' value='submit' id='save' name='save'/>
</form> 
```

我的js

```
 var gobalvar=true;

    if($('#textbox1').val()==""){
        gobalvar=true;
    }else{
        gobalvar=false;
    }
    alert(gobalvar);
    $("#from1").validate({ 
    rules: {
        textbox2:{required:gobalvar}, 
               },
        messages: {
        textbox2:'required'
        }
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:50:55.427

```
if($('#textbox1').val()==""){
                   // ^------missing brackets
        gobalvar=true;
    }else{
        gobalvar=false;
    } 
```

此外，您的表单 ID 与您的 jquery 选择器不同

```
 var gobalvar=true;

    if($('#textbox1').val()==""){
        gobalvar=true;
    }else{
        gobalvar=false;
    }

    $("#form1").validate({ 
      //^----different selector value
    rules: {
        textbox2:{required:gobalvar}, 
               },
        messages: { //missing semicolon
        textbox2:'required'
        }
});​ 
```

[工作演示](http://jsfiddle.net/6ujLy/)

# [更新 2](http://jsfiddle.net/6ujLy/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:52:17.127

你能试试这个吗？

```
 var gobalvar=true;

    $("#form1").validate({
    rules: {
        textbox2:{required:(globalvar = ($("#textbox1").val().length == 0))},
               },
             message{textbox2:'required'}
}); 
```

# jquery-ui - 具有隐藏值的 jQuery 按钮集和 CakePHP 单选集

> ID：13170645
> 
> 赞同：1
> 
> 时间：2012-11-01T03:43:36.647
> 
> 标签：jquery-ui, cakephp

我正在使用 CakePHP 2.2.3 生成一个无线电集，然后我将一个 jQuery 按钮集应用到该无线电集。

CakePHP 片段：

```
echo $this->Form->input('contact_address_type', array(
    'type' => 'radio',
    'legend' => false,
    'options' => array('domestic' => 'Domestic', 'po_box' => 'Domestic PO Box', 'foreign' => 'Foreign'),
    'div' => array('class' => 'contact address_type')
)); 
```

jQuery UI 片段：

```
$('.contact.address_type').buttonset(); 
```

生成 HTML 时，有一个隐藏字段与收音机集同名。这样做是为了在提交表单时，即使未选择无线电集，我仍然会在我的 request->data 中获得一个值（尽管是空白）。

但是，jQuery UI 按钮集代码在选择其中一个选项时不喜欢这样，因为它希望表单中与所选单选选项名称相同的所有元素都具有与之关联的按钮小部件。此时，[关联的 jQuery UI 票证](http://bugs.jqueryui.com/ticket/8761)是 wontfix 。

我不愿意向 CakePHP 提交票证，因为有一个具有相同名称的隐藏字段来默认未选择的无线电集的值是一种合法的做法。

这个[jsFiddle](http://jsfiddle.net/reubenhelms/z86Rk/1/)展示了一个例子。您需要打开 javascript 控制台才能在选择按钮时查看生成的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:43:36.647

一种可能的答案是生成一个没有标签的虚假单选选项。

这将阻止它包含在呈现的按钮集中，但它仍然会获得一个附加到它的按钮对象。您还需要将单选默认设置为选中，这样如果没有选择其他按钮，则将提交该默认值。

```
echo $this->Form->input('contact_address_type', array(
    'type' => 'radio',
    'legend' => false,
    'options' => array('domestic' => 'Domestic', 'po_box' => 'Domestic PO Box', 'foreign' => 'Foreign'),
    'value' => false,
    'before' => $this->Form->radio('contact_address_type', array('' => ''), array('legend' => false, 'checked' => 'checked', 'value' => false, 'label' => false)),
    'div' => array('class' => 'contact address_type')
)); 
```

另一种选择是强制用户进行默认选择，因此您知道将选择一个选项。

```
echo $this->Form->input('contact_address_type', array(
    'type' => 'radio',
    'legend' => false,
    'options' => array('domestic' => 'Domestic', 'po_box' => 'Domestic PO Box', 'foreign' => 'Foreign'),
    'value' => 'domestic',
    'div' => array('class' => 'contact address_type')
)); 
```

但我想看看是否有更好的选择。

# asp.net-mvc-3 - 在删除之前处理 验证的最佳方法？

> ID：13170647
> 
> 赞同：0
> 
> 时间：2012-11-01T03:43:38.137
> 
> 标签：asp.net-mvc-3

我需要在控制器中的删除操作期间执行验证。ASP.net MVC3 有什么可以帮助进行这种类型的验证吗？我知道您可以使用属性来处理编辑验证，但删除呢？

例如，我需要检查实体对象的状态，如果满足某个条件，则不允许删除它们。检查和显示错误的最佳方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:32:29.543

您可以让您的删除操作如下所示，您可以通过像下面的示例中的方法`CanThiBeDeleted()`那样进行调用来检查您的条件，如果没有，那么您可以将错误添加到模型状态并将其发送回视图，将显示此错误消息的位置。

```
public ActionResult Delete(string id)
{
    if(!_service.CanThisBeDeleted(id))
    {
        ModelState.AddModelError("", "Sorry this cannot be deleted !");
        return View();
    }

    bool isItemDeleted = false;
    isItemDeleted = _service.DeleteItem(id);

    if(isItemDeleted)
    {
        // if deleted send where you want user to go.
        return RedirectToAction("Index");
    }
    else
    {
        ModelState.AddModelError("", "Delete operation failed.");
        return View();
    }
} 
```

您的视图可以`@Html.ValidationSummary`用来显示您想要显示的错误/警告。

# ant - 并行运行 Selenium 测试，完成后的第一个并行任务会关闭 selenium 服务器

> ID：13170650
> 
> 赞同：0
> 
> 时间：2012-11-01T03:43:46.950
> 
> 标签：ant, selenium, junit, parallel-processing

我有三个 selenium 测试类，并为此创建了三个 ant 目标。在 PARALLEL 模式下执行这些目标时，会启动三个测试窗口。

```
<target>
  <some task is done here>
  <parallel>
    <target test1>
    <target test2>
    <target test3>
  </parallel>
</target> 
```

一切都很好，直到一个测试类完成运行其所有方法并以某种方式关闭 selenium 服务器导致其他测试用例失败。

我的基类 tearDown() 方法具有 selenium.stop() 因为我需要在测试执行完成后关闭浏览器窗口。我尝试使用 selenium.close() 但这给了我一个弹出窗口，并且我有三个窗口，包括单个测试用例的 selenium 日志窗口。

有什么办法可以实现并行测试运行。

我需要从 ANT 执行这些测试用例。

我正在使用硒 2.21.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:46:06.443

你最好使用 selenium 网格而不是使用 ant。Selenium 网格是并行执行测试用例的最佳方式。

# android - NodeJS + Android SSL 认证

> ID：13170654
> 
> 赞同：0
> 
> 时间：2012-11-01T03:44:29.850
> 
> 标签：android, node.js

我不知道如何调试这个，现在已经有一段时间了，任何指针都将不胜感激。

我正在尝试在 Android 应用程序和 Nodejs 服务器之间进行 ssl/tls 身份验证。运行 android 应用程序时遇到此错误消息：

```
10-31 23:33:58.260: D/ExampleActivity(26199): Response code: 401
10-31 23:34:05.901: W/DefaultRequestDirector(26199): Authentication error: Unable to respond to any of these challenges: {} 
```

**请注意**，我已经注释掉了客户端身份验证部分，只是试图让基本的 SSL 身份验证正常工作。即使这样也给了我同样的警告/错误。

## NodeJs-Server.js

```
var https = require('https'),
    fs = require('fs');

var options = {
    key: fs.readFileSync('certs/server_key.pem'),
    cert: fs.readFileSync('certs/server.pem'),
   // ca: [fs.readFileSync('certs/client.pem')],
    passphrase: '33333',
   // requestCert: true,
   // rejectUnauthorized: false
};

https.createServer(options, function (req, res) {
    if (req.client.authorized) {
        res.writeHead(200, {"Content-Type": "application/json"});
        res.end('{"status":"approved"}');
    } else {
        res.writeHead(401, {"Content-Type": "application/json"});
        res.end('{"status":"denied"}');
    }
}).listen(8000); 
```

## 安卓

```
public class SecureHttpClient extends DefaultHttpClient {
    private String ks = "11111";
    private String ts = "22222";
    private Context context;

    public SecureHttpClient(final Context context) {
        super();
        this.context = context;
    }

    @Override
    protected ClientConnectionManager createClientConnectionManager() {
        SchemeRegistry registry = new SchemeRegistry();
        SSLSocketFactory factory = newSslSocketFactory();
        factory.setHostnameVerifier((X509HostnameVerifier) SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

        registry.register(new Scheme("https", factory, 443));
        HttpParams httpParams = new BasicHttpParams();
        return new SingleClientConnManager(httpParams, registry);
    }

    private SSLSocketFactory newSslSocketFactory() {
        try {
            KeyStore keyStore = KeyStore.getInstance("BKS");
            KeyStore trustStore = KeyStore.getInstance("BKS");
            InputStream inKey= context.getResources().openRawResource(R.raw.client);
            InputStream inTrust = context.getResources().openRawResource(R.raw.clienttruststore);
            try {
                keyStore.load(inKey, ks.toCharArray());
                trustStore.load(inTrust, ts.toCharArray());
            } finally {
                inKey.close();
                inTrust.close();
            }
            return new SSLSocketFactory(trustStore);
        } catch (Exception e) {
            throw new AssertionError(e);
        }
    }
} 
```

// 主要活动

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        setStrictMode();

        final HttpClient client = new SecureHttpClient(this);

        // Provide ip or address to where your test server is runnning
        final HttpGet request = new HttpGet("https://192.168.0.105:8000/");

        HttpResponse response = null;
        try {
            response = client.execute(request);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Log.d("ExampleActivity", "Response code: " + response.getStatusLine().getStatusCode());
    }

    @TargetApi(9) 
    private void setStrictMode() {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:37:03.423

好吧，您的服务器似乎在端口 8000 上运行，而您的 Android 应用程序仅注册了`SSLSocketFactory`443 端口，因此它实际上是在尝试与 HTTPS 服务器进行 HTTP 通信。要么为服务器使用 443 端口，要么在`SchemeRegistry`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:10:14.837

用 pkcs12 替换客户端密钥+证书 bks 文件似乎可以解决问题。我不知道为什么。

# iphone - iOS 6 在设备旋转时崩溃

> ID：13170655
> 
> 赞同：-1
> 
> 时间：2012-11-01T03:44:46.840
> 
> 标签：iphone, ios6, orientation, device-orientation

这不是一个重复的问题。尚未提供最终的工作解决方案。在我接受答案或找到并为此提供我自己的解决方案之前，请不要关闭此问题。谢谢！

==================================================== ================ 使用 Xcode 4.5.1，我有一个标签栏应用程序，其中有 5 个标签。每个选项卡都包含一个 UINavigationController。因此，整个应用程序需要在纵向模式下查看，除了一个唯一的 ViewController - 一个以全屏模式打开并打算在横向模式下查看的“模态” VC。

这在 iOS5 中运行得非常好——我只是在那个特定的 ViewController 中使用了以下代码：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

但是现在应用程序崩溃了，并给出了这个错误：

```
Terminating app due to uncaught exception 'UIApplicationInvalidInterfaceOrientation',    
reason: 'preferredInterfaceOrientationForPresentation must return a supported interface orientation!' 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T04:08:47.870

请检查您使用的 xcode 版本。

您使用了 XCODE 4.5：`shouldAutorotateToInterfaceOrientation`委托折旧。

您在项目中使用以下行。

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
    }

-(BOOL)shouldAutorotate
{
    return YES;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T04:40:13.327

您需要使用它来避免 iOS6 崩溃。

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_6_0
- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskAllButUpsideDown; //Getting error here? then update ur xcode to 4.5+
}
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:13:16.520

记住一件事。在 iOS 6 中

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

已弃用。

你不能在 iOS 6 中使用它。为了在 UINavigationController 的 viewControllers 中支持不同的界面方向，你需要继承 UINavigationController 或创建一个 Category。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T06:10:27.483

代码看起来不错。它不应该仅仅因为这些方法而崩溃。问题可能出在代码的另一部分。但是，在这里我想告诉你。上述`shouldAutorotateToInterfaceOrientation`方法的方向方法在 iOS 6 中已弃用。如果您想了解更多如何解决方向问题 [，您应该看看这个](https://stackoverflow.com/questions/13023936/orientation-issue-in-ios-6/13024015#13024015)

# php - MySQL查询INSERT INTO问题

> ID：13170658
> 
> 赞同：1
> 
> 时间：2012-11-01T03:45:19.150
> 
> 标签：php, mysql

我正在尝试进行一个简单的查询，该查询将使用用户上次登录的时间更新用户数据库。我的 SQL 数据库有几列`id | first_name | last_name | username| password | date_created | last_login`我要运行的查询是：

```
$sql="INSERT INTO (CLL_users) SET last_login= $dateCreated WHERE username= $username";
$result=mysql_query($sql); 
```

这是成功验证后加载的页面的整个代码，我确实意识到它是由于 SQL 注入而使用的最糟糕的方法，但是一旦我得到正确的查询，我将为 PDO 准备语句重新编码，这只是我发现的一个例子另一个网站，我正在修改它以添加 last_login 参数。

```
<?php
session_start();
$host="localhost"; // Host name 
$username="user"; // Mysql username 
$password="XXXXX"; // Mysql password 
$db_name="DB"; // Database name 
$tbl_name="users"; // Table name 
date_default_timezone_set('America/Chicago');
$dateCreated = date('m/d/Y h:i:s a', time());

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$sql="INSERT INTO (CLL_users) SET last_login= $dateCreated WHERE username= $username";
$result=mysql_query($sql);

if(!session_is_registered(myusername)){
header("location:main_login.php");
}
?>

<html>
    <head>
        <title> Welcome</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <LINK href="CLL.css" rel="stylesheet" type="text/css">
    </head>
 <body>
     <?php echo $dateCreated ?>
<p>Login Successful</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T03:51:14.567

```
$sql="update CLL_users SET last_login= $dateCreated WHERE username= $username";
$result=mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T03:47:29.377

您需要在 dateCreated 和 username 变量周围加上单引号。

Also, you need to use an update statement to update an existing record rather than doing an insert. If you echo the $sql variable you will see that your insert statement isn't valid and wont work if you try to run it manually on the database.

eg. `$sql="UPDATE CLL_users SET last_login='$dateCreated' WHERE username='$username'";`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T03:50:21.723

Well first of all i will suggest to surround you variables with single quotes and next i will suggest you to use the following syntax for your insert. INSERT INTO table (COLUMN1, COLUMN2,COLUMN3) VALUES('value1','value2','value3')

Also replace INSERT INTO for UPDATE if what you want is update the row rather than insert something.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T03:52:29.270

Cause of error is, you dont have insert query with Set option if you would like to update the table follow this for sql variable

```
 $sql = "UPDATE CLL_users SET last_login= '$dateCreated' WHERE username='$username'"; 
```

[Document For Insert](http://www.tizag.com/mysqlTutorial/mysqlinsert.php) [Document for update](http://www.tizag.com/mysqlTutorial/mysqlupdate.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T03:48:55.783

You can't use INSERT to update existing records in the table. Use UPDATE query

```
$sql="UPDATE CLL_users SET last_login= '$dateCreated' WHERE username= '$username'"; 
```

# php - 放置从服务器返回的 Javascript

> ID：13170664
> 
> 赞同：1
> 
> 时间：2012-11-01T03:46:35.557
> 
> 标签：php, jquery, codeigniter, google-maps-api-3

我有以下代码可以从服务器获取一些 Javascript：

```
 $.ajax({
            url: '<?=base_url()?>index.php/guide/getMap',
            success: function(data) {
                $('.result').text(data);
                alert('Load was performed.');
            }
        }); 
```

这成功返回了我想要的代码：

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript">
        //<![CDATA[

        var map; // Global declaration of the map
        var iw = new google.maps.InfoWindow(); // Global declaration of the infowindow
        var lat_longs = new Array();
        var markers = new Array();
        function initialize() {

             var myLatlng = new google.maps.LatLng(37.4419, -122.1419);
            var myOptions = {
                zoom: 13,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP}
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        }

    function createMarker(markerOptions) {
        var marker = new google.maps.Marker(markerOptions);
        markers.push(marker);
        lat_longs.push(marker.getPosition());
        return marker;
    }

        window.onload = initialize;

        //]]>
</script> 
```

我的问题是，代替我目前对 succsufull 回调的警报，如何将此 javascript 放置在 HTML 文档的正文（或头部）中，以便显示 Google 地图？（注意：我还会有另一个 ajax 调用来返回所需的 html）。

我不只是直接使用 JS 调用 GMaps API 的原因是我需要在服务器上进行一些处理以从数据库中获取适当的标记以放在地图上等。我在服务器上使用[这个](http://biostall.com/codeigniter-google-maps-v3-api-library)库侧生成显示地图所需的 js/html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:54:36.163

与其让你的初始化函数出现在任何地方，不如把它与你的回调函数联系起来，做一些类似的事情：

```
$.ajax({
    url: '<?=base_url()?>index.php/guide/getMap',
    success: function(data) {

        function initialize() {
            var myLatlng = new google.maps.LatLng(data.lat, data.lng);
            var mapCanvas = document.getElementById("map_canvas");
            var myOptions = {
                zoom: 13,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP}
                map = new google.maps.Map(mapCanvas, myOptions);
        }
    }
}); 
```

你当然可以移动东西，让它们看起来很漂亮，或者你喜欢它的布局。重要的是，在从地图取回数据并加载地图 API 之后调用初始化函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:54:55.817

试试这个。我认为这会起作用。将以下代码放在页面底部：

```
 $.ajax({
                url: '<?=base_url()?>index.php/guide/getMap',
                success: function(data) {
                    $('.result').text(data);
                    initialize();
                }
            }); 
```

# android - 替换 actionbarsherlock 选项卡中的片段

> ID：13170667
> 
> 赞同：1
> 
> 时间：2012-11-01T03:46:49.183
> 
> 标签：android, android-viewpager, actionbarsherlock, fragment

我想用其他 SherlockListFragment 替换 SherlockListFragment 但我不知道如何完成

我使用此代码创建片段选项卡：

```
public class MyTabsViewPager extends SherlockFragmentActivity
{
....

    @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);

            mViewPager = new ViewPager(this);
            mViewPager.setId(R.id.pager);           

            setContentView(mViewPager);
            bar = getSupportActionBar();
            bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
            bar.setTitle("TAB");

            mTabsAdapter = new TabsAdapter(this, mViewPager);

            mTabsAdapter.addTab(
                    bar.newTab().setIcon(R.drawable.icon),  
                    Fragment1.class, null);

            mTabsAdapter.addTab(
                    bar.newTab().setIcon(R.drawable.icon2),     
                    FragmentList.class, null);

        }
} 
```

我需要的是在同一个选项卡中将 FragmentList.class 替换为其他片段类

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:03:20.850

那么实际上你可以在那里替换类的名称。那是你想要达到的目标吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:36:26.967

不知道这是否为时已晚，但您可以动态替换片段。只有一个问题，在这种情况下，您不能静态地将片段添加到布局中。有关更多详细信息 - 请参阅[此 StackOverflow 帖子的解决方案](https://stackoverflow.com/questions/7431516/how-to-change-fragments-class-dynamically)

# mysql - 向我的查询添加过滤器会导致错误。mysql

> ID：13170671
> 
> 赞同：1
> 
> 时间：2012-11-01T03:47:11.040
> 
> 标签：mysql

我有这个工作正常的查询。它从两个表 manager_details 和 users 中获取数据。我需要的是**从第 1 周到第 7 周**带来经理分数的总和。Week 是 manager_details 表中的另一个字段，它的值可以是 0-x。

```
SELECT
  SUM(mng.score) AS accumulated_score,
  mng.manager_id AS manager_id,
  users.id,
  users.fname,
  users.lname
FROM manager_details AS mng
  JOIN users
    ON users.id = mng.manager_id
GROUP BY manager_id
ORDER BY accumulated_score DESC
LIMIT 5 
```

为了从第 1 周到第 7 周获得分数，我尝试添加

```
SELECT
  SUM(mng.score) AS accumulated_score,
  mng.manager_id AS manager_id,
  users.id,
  users.fname,
  users.lname
FROM manager_details AS mng
WHERE  mng.week >= 1 AND mng.week <= 6    -- this line
  JOIN users
    ON users.id = mng.manager_id
GROUP BY manager_id
ORDER BY accumulated_score DESC
LIMIT 5 
```

得到了这个

> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'join users on users.id = mng.manager_id GROUP BY manager_id 附近使用的正确语法

也试过

```
 ...         
     HAVING mng.week >= 1 AND mng.week <= 6  -- <-- 
     ... 
```

我还将 HAVING 类放在 GROUP BY 之后，GROUP BY 之前，最后并没有工作，得到 mysql 错误检查语法..等等。

我做错了什么，但不确定是什么。

那么，要使用什么子句，我在哪里设置该条件来过滤我的 mng.score 并仅获得位于第 1-7 周之间的分数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:01:06.730

```
SELECT
  SUM(mng.score) AS accumulated_score,
  mng.manager_id AS manager_id,
  users.id,
  users.fname,
  users.lname
FROM manager_details AS mng
  JOIN users
    ON users.id = mng.manager_id
WHERE  mng.week >= 1 AND mng.week <= 6  
GROUP BY manager_id
ORDER BY accumulated_score DESC
LIMIT 5 
```

# php - 警告：mysqli_query() 期望参数 1 是 mysqli，对象在

> ID：13170672
> 
> 赞同：0
> 
> 时间：2012-11-01T03:47:11.620
> 
> 标签：php, mysqli

我在我的数据库类中以这种方式实例化 $db 对象

```
class MysqlDB {

    protected $_mysql;
    protected $_where = array();
    protected $_query;
    protected $_paramTypeList;
    protected $_crudType = null;

    public function __construct($host, $username, $password, $db) {
        $this->_mysql = new mysqli($host, $username, $password, $db) or die('There was a problem connecting to the database');
    }

    public function query($query)
    {
        $this->_query = filter_var($query, FILTER_SANITIZE_STRING);

        $stmt = $this->_prepareQuery();
        $stmt->execute();
        $results = $this->_dynamicBindResults($stmt);
        return $results;
    }
        protected function _prepareQuery()
    {
        echo $this->_query;
        if (!$stmt = $this->_mysql->prepare($this->_query)) {
            trigger_error("Problem preparing query", E_USER_ERROR);
        }
        return $stmt;
    }

} 
```

我在另一个类（配置文件类）中使用这个 $db 对象作为链接标识符

```
$db = new MysqlDb('localhost','root','','xxx');

$query=mysqli_query($db,"SELECT id, parent_id, name FROM categories_general"); 
```

我怎样才能摆脱这个错误？实际上，我最近从 MySQL 转到了 mysqli。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T03:49:08.673

尝试

```
$db = mysqli_connect('localhost','root','XXX','XXX'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T03:48:18.707

```
$db = new mysqli('localhost','root','','test');
$sql = "select * from user";
$result = $db->query($sql);
var_dump($result->fetch_assoc()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-20T21:04:46.293

您正在使用 mysqli 的程序样式。所以你必须在 db 类中创建查询方法。

```
class db{
  private $connection;

  public function __construct(){
    $this->connect();
  }
  public function connect(){
    $this->connection=mysqli_connect('localhost','root','','new5');
  }
  //add these methods
  public function query($query_string){
    return mysqli_query($this->connection, $query_string);
  }
  public function fetch_row($mysqli_result){
    return mysqli_fetch_row($this->connection, $mysqli_result);
  }
  //and other functions you need
} 
```

或者您可以使用带扩展方法的面向对象样式；

```
class db extends mysqli{
  function __construct($host, $username, $password, $databaseName, $port=3306){
    mysqli::__construct($host, $username, $password, $databaseName, $port);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T05:10:40.253

添加一个功能

```
public function getDB()
{
    return $this->_mysql;
}

 $query=mysqli_query($db->getDB(),"SELECT id, parent_id, name FROM categories_general"); 
```

# ios - 关闭视图后，父视图工具栏上的工具栏按钮项消失

> ID：13170677
> 
> 赞同：2
> 
> 时间：2012-11-01T03:47:46.583
> 
> 标签：ios, ios6

在 ios6 上，执行`[parentView dismissModalViewControllerAnimated:FALSE];`父视图工具栏上的工具栏按钮项后消失。这些工具栏按钮项是在情节提要中创建的。

虽然它在 ios5 上运行良好...

这里发生了什么？

# c++ - 减少指令缓存未命中（在 C++ 中）

> ID：13170687
> 
> 赞同：4
> 
> 时间：2012-11-01T03:48:50.657
> 
> 标签：c++, localityofreference

假设我有一个 C++ 类，其实现如下所示：

```
// ...

MyClass::iterativeFunction() {
     for (int i = 0; i < 1000000; i++) {
          performAction(i);
     }
}

MyClass::performAction(int index) {
     // Block of code (non-inline-able)
}

// ... 
```

在 C++ 级别，我是否可以控制这些方法的空间局部性，还是只希望编译器会注意到相关方法并相应地优化其程序集？理想情况下，我希望它们彼此相邻，以便将它们一起加载到指令缓存中，但我不知道如何让编译器知道我真的希望发生这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T04:03:41.283

无论哪种情况，代码在进入缓存之前都无法运行。在任何一种情况下，对于代码流去向的 CPU 来说都是同样明显的，因为流是无条件的。所以它不会有任何区别。现代代码缓存不会在地址空间中提前获取，而是在指令流中提前获取，遵循无条件分支并根据需要预测条件分支。

所以没有理由关心这个。它不会有任何区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T03:56:16.703

从技术上讲，没有。但是，在现代处理器上，您*通常*不需要像对数据缓存一样担心指令缓存，除非您有一个非常大的可执行文件或到处都有非常可怕的分支。

原因是缓存行只有大约 64 字节长，这意味着如果您的方法大于 64 字节（并且确实如此），即使它们直接相邻，也需要将它们加载到多个缓存条目中在物理内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T03:54:04.707

如果您需要那种级别的控制和优化，那么 C++ 不适合您。

但您问题的实际答案是“否”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T03:53:59.947

不，据我所知，您无法指定方法的位置。如果 C++ 允许嵌套过程，那将是确保被调用过程是本地的一种方法。

# javascript - 在 url 安全中禁用 Firefox 7.0.1 javascript

> ID：13170689
> 
> 赞同：0
> 
> 时间：2012-11-01T03:49:07.843
> 
> 标签：javascript

似乎 Firefox 已经禁用了从 URL 运行 javascript: 的能力......有人知道解决这个问题的方法吗？

当该用户登录时，我的网站需要从另一个网站的 html 中提取的 id。我没有让用户搜索“查看源”页面，而是设计了一个 javascript 链接来抓取它并将其自动发送到该网站，但它没有不能在 Firefox 上工作。

我试图运行的实际代码：

```
javascript:void(window.open('http://mysite.com/login?u=' + encodeURIComponent(window.location) + '&s=' + SessionId)); 
```

从游戏中删除会话 id 以便为玩家提取数据，这与 facebook hack 或任何恶意行为类似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:25:18.907

我必须查看您的代码，但您确实不应该在尝试做的事情时遇到问题。如果您需要另一种选择，尽管我有一个，您可以尝试。如果您要抓取的页面内容与您的其他网站在同一个域中，您可以使用 iframe 来获取 ID。

这里有一些代码需要考虑：

您的数据收集页面：

```
<!DOCTYPE html>
<html>
<head>
    <title>Disable Firefox 7.0.1 javascript in url security</title>    
    <script type="text/javascript">
    function scrapeData() {
        var frame = document.getElementById("otherPage");
        var otherPagesObj = frame.contentWindow.document.getElementById("otherContent");
        alert("Your data: " + otherPagesObj.innerHTML);
    }
    </script>
</head>
<body onload="scrapeData();">
    <iframe id="otherPage" src="otherpage.htm" width="1" height="1" />
</body>
​&lt;/html>​​​​​​​​​​​​​​​​​​​​​​​​ 
```

您要抓取的页面（otherpage.htm）：

```
<!DOCTYPE html>
<html>
<head>
    <title>Other Page - Disable Firefox 7.0.1 javascript in url security</title>    
</head>
<body>
    <div id="otherContent">1</div>
</body>
​&lt;/html>​​​​​​​​​​​​​​​​​​​​​​​​ 
```

使用上面的代码，您可以看到从另一个页面的 div 发出的“1”警报。这是一个简单的、跨浏览器兼容的选项，适合您尝试执行的操作。

希望这可以帮助。

# asp.net - 如何释放使用的HttpRequest和HttpRespone的资源

> ID：13170693
> 
> 赞同：1
> 
> 时间：2012-11-01T03:49:44.987
> 
> 标签：asp.net, garbage-collection, httpwebrequest, httpwebresponse

全部，通常如果我们想释放类似`Connection`or的资源`Stream`。我们必须像`close()`在 Asp.net 中那样调用方法。但是我没有找到任何`HttpWebRequest`喜欢`close()`让 Asp.Net 释放资源的方法。所以，通常如果我想使用`HttpWebRequest`or `HttpWebResponse`，代码片段就像这样。请在下面查看。有什么问题吗？我不确定。谢谢。

```
try
{
    HttpWebRequest request = createGetHttpRequest(detailModel, RequestServiceType.GetToken,null);

    string returnedContent = string.Empty;
    using (var response = (HttpWebResponse)request.GetResponse())
    {
        using (var responseStream = response.GetResponseStream())
        {
            using (StreamReader reader = new StreamReader(responseStream))
            {
                returnedContent = reader.ReadToEnd();
                reader.Close();
            }
        }
        //  string statusCode = response.StatusCode.ToString();
        response.Close();
    }
}
catch (Exception e)
{
    Log.Write(e);
} 
```

# c# - 无法在 VS 2010 IDE 中查看屏幕的设计器

> ID：13170698
> 
> 赞同：1
> 
> 时间：2012-11-01T03:50:49.187
> 
> 标签：c#, .net

我们无法在 VS 2010 IDE 中查看屏幕的设计器，它总是抛出异常。异常的调用栈如下

> 无法加载文件或程序集 'xxxxx'，版本 = 2.1.8.0，文化 = 中性，PublicKeyToken = dba69d426c69de49' 或其依赖项之一。该系统找不到指定的文件。

我们最近将屏幕项目从 VS 2008 移植到 VS 2010。我们从未在 VS 2008 IDE 中遇到设计器问题。

屏幕引用的程序集 'xxxxx' 版本 2.1.8.0 存在于项目的引用路径中，并且程序集已签名（具有强名称）。

我们在 wpf 屏幕中也面临同样的问题，调用堆栈如下所示。

> **System.Reflection.TargetInvocationException 调用的目标已引发异常。**
> 
> 在 System.RuntimeMethodHandle._InvokeMethodFast（IRuntimeMethodInfo 方法，对象目标，Object[] 参数，SignatureStruct& sig，MethodAttributes methodAttributes，RuntimeType typeOwner）
> 
> 在 System.RuntimeMethodHandle.InvokeMethodFast>（IRuntimeMethodInfo 方法，对象目标，对象 [] 参数，签名 sig，MethodAttributes 方法属性，RuntimeType typeOwner）
> 
> 在 System.Reflection.RuntimeMethodInfo.Invoke（Object obj，BindingFlags invokeAttr，Binder binder，Object[] 参数，CultureInfo 文化，布尔 skipVisibilityChecks）在 System.Delegate.DynamicInvokeImpl（Object[] args）
> 
> 在 System.Windows.Threading.ExceptionWrapper.InternalRealCall（委托回调，对象 args，Int32 numArgs）
> 
> 在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen（对象源，委托方法，对象 args，Int32 numArgs，委托 catchHandler）*
> 
> **System.IO.FileNotFoundException 无法加载文件或程序集 'xxxxx'，版本 = 2.1.8.0，文化 = 中性，PublicKeyToken = 04c8ff473e9eec03' 或其依赖项之一。该系统找不到指定的文件。**
> 
> 在PreventiveMaintenance.ToolTipConverter.Convert（对象值，类型targetType，对象参数，CultureInfo 文化）
> 
> 在 System.Windows.Data.BindingExpression.TransferValue（对象 newValue，布尔 isASubPropertyChange）
> 
> 在 System.Windows.Data.BindingExpression.Activate（对象项）
> 
> 在 System.Windows.Data.BindingExpression.AttachToContext（AttachAttempt 尝试）
> 
> atSystem.Windows.Data.BindingExpression.MS.Internal.Data.IDataBindEngineClient.AttachToContext（布尔最后机会）
> 
> 在 MS.Internal.Data.DataBindEngine.Task.Run(Boolean lastChance)
> 
> 在 MS.Internal.Data.DataBindEngine.Run（对象 arg）
> 
> 在 MS.Internal.Data.DataBindEngine.OnLayoutUpdated（对象发送者，EventArgs e）
> 
> 在 System.Windows.ContextLayoutManager.fireLayoutUpdateEvent()
> 
> 在 System.Windows.ContextLayoutManager.UpdateLayout()
> 
> 在 System.Windows.UIElement.UpdateLayout()
> 
> 在 System.Windows.Interop.HwndSource.SetLayoutSize()
> 
> 在 System.Windows.Interop.HwndSource.set_RootVisualInternal（视觉值）
> 
> 在 System.Windows.Interop.HwndSource.set_RootVisual（视觉值）
> 
> 在 MS.Internal.DeferredHwndSource.ProcessQueue（对象发送者，EventArgs e）

# regex - Zend 框架：如何处理“没有与请求匹配的路由”错误？

> ID：13170702
> 
> 赞同：0
> 
> 时间：2012-11-01T03:51:52.400
> 
> 标签：regex, exception, zend-framework, bootstrapping, zend-route

在 Bootstrap.php 中，我有一些使用 Zend_Controller_Router_Route_Regex 的自定义路由。一切正常，除非用户在地址栏中输入错误的链接。

前任 ：

`http://mysite/en/1-some-article.html`=> 这是与 Bootstrap 中的 ROUTE 匹配的有效链接。

但是当用户犯了一个错字时，比如：

`http://mysite/en/1-some-article.**html'** or http://mysite/en/1-some-article.**hhtml**`，它们与 Bootstrap 中的任何 ROUTE 都不匹配，然后 Zend Framework 会抛出一个异常，例如：No route matching the request

有没有办法处理它，比如重定向到“没有匹配的路由”的自定义页面？

任何帮助将不胜感激。感谢提前！

配置（*来自下面的评论*）

```
[production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
phpSettings.date.timezone = "Europe/London"
;includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = ""
;resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules = ""
autoloaderNamespaces.Fxml = "Mycms_"
autoloaderNamespaces.Fxml = "Fxml_" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:31:34.113

要使用`ErrorController`，您需要将前端控制器`throwExceptions`属性设置为`false`。把它放在你的`[production]`配置部分

```
resources.frontController.params.throwExceptions = 0 
```

请参阅[http://framework.zend.com/manual/1.12/en/zend.controller.exceptions.html](http://framework.zend.com/manual/1.12/en/zend.controller.exceptions.html)和[http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html#zend .controller.plugins.standard.errorhandler.fourohfour](http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html#zend.controller.plugins.standard.errorhandler.fourohfour)。

我在上面的评论中提到了这一点，但您似乎错过了它（您已`displayExceptions`设置为`false`但未设置`throwExceptions`）。

# .net - 使用 CookieContainer 的 HttpWebRequest/HttpWebResponse 未登录

> ID：13170710
> 
> 赞同：1
> 
> 时间：2012-11-01T03:52:35.650
> 
> 标签：.net, cookies, login, httpwebrequest, httpwebresponse

在这上面花了一个晚上的大部分时间，但不知道出了什么问题。数据被发布到登录页面并得到很好的处理 - 错误的登录/密码会作为错误页面出现，成功的登录/密码会得到一个带有“位置”标题的空白响应。但是，尝试去那里或任何其他受保护的页面都会返回登录页面。我想我一定是在某处遗漏了一些小东西。下面是完整的代码，当然少了实际的用户/密码。我希望有人知道出了什么问题:)

```
$class Program
{
    static void Main(string[] args)
    {
        try
        {
            var cookieContainer = new CookieContainer();
            var username = "user";
            var password = "pwd";

            // LOGIN
            Console.WriteLine("Logging in...");

            var postData = string.Format("username={0}&password={1}&remote=&action=auth&submit=Login&from=", username, password);
            var req = (HttpWebRequest)WebRequest.Create("https://freedns.afraid.org/zc.php");
            req.CookieContainer = cookieContainer;
            req.Method = "POST";
            req.ContentLength = postData.Length;
            req.ContentType = "application/x-www-form-urlencoded";

            // This is necessary to capture cookies
            // The response will contain a "Location" header for redirect
            req.AllowAutoRedirect = false;

            req.KeepAlive = true;
            req.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1) ; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)";

            var encoding = new ASCIIEncoding();
            var loginDataBytes = encoding.GetBytes(postData);
            req.ContentLength = loginDataBytes.Length;
            var stream = req.GetRequestStream();
            stream.Write(loginDataBytes, 0, loginDataBytes.Length);

            var webResp = (HttpWebResponse)req.GetResponse();

            var datastream = webResp.GetResponseStream();
            if (datastream == null) { throw new Exception("Data stream is null."); }

            var reader = new StreamReader(datastream);
            var response = reader.ReadToEnd();

            if (response.IndexOf("Invalid UserID/Pass") != -1) { throw new Exception("Invalid user/password."); }
            if (response.IndexOf("must enable cookies") != -1) { throw new Exception("Cookies not enabled."); }

            // ACCESS PAGE
            Console.WriteLine("Accessing page...");

            req = (HttpWebRequest)WebRequest.Create("https://freedns.afraid.org/dynamic/");
            req.CookieContainer = cookieContainer;
            req.Method = "GET";
            req.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1) ; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; .NET CLR 3.0.04506.648; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)";

            webResp = (HttpWebResponse)req.GetResponse();

            datastream = webResp.GetResponseStream();
            if (datastream == null) { throw new Exception("No response received."); }

            reader = new StreamReader(datastream);
            response = reader.ReadToEnd();
            Console.WriteLine(response);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        finally
        {
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T23:24:31.470

您可能需要使用`HttpUtility.UrlEncode(string)`才能发布特殊字符，例如`!@#$%^&*()_+<>?:;"'{[}]|\`

您需要将其添加为对项目的引用，并在命名空间中引用它。

# objective-c - 更改属性值时使用 Core Data 时出现 EXC_BAD_ACCESS 错误

> ID：13170712
> 
> 赞同：0
> 
> 时间：2012-11-01T03:52:50.953
> 
> 标签：objective-c, macos, cocoa, core-data

总的来说，我对 Core Data 编程和 Cocoa 很陌生，所以难怪我会遇到麻烦 :)

所以这是我的 managedObjectModel 方法：

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (managedObjectModel != nil)
    {
        return managedObjectModel;
    }
    NSString *modelPath = [[NSBundle mainBundle] pathForResource:@"Model" ofType:@"momd"];
    NSURL *modelURL = [NSURL fileURLWithPath:modelPath];

    NSAssert(modelURL != nil,@"modelURL == nil");
    managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return managedObjectModel;
} 
```

这是崩溃的代码部分：

```
NSManagedObjectModel *mom = [self managedObjectModel];

managedObjectModel = mom;

if (applicationLogDirectory() == nil)
{
    NSLog(@"Could not find application logs directory\nExiting...");
    exit(1);
}

NSManagedObjectContext *moc = [self managedObjectContext];
NSProcessInfo *processInfo = [NSProcessInfo processInfo];

NSEntityDescription *newShotEntity = [[mom entitiesByName] objectForKey:@"Entity"];

Entity *shEnt = [[Entity alloc] initWithEntity:newShotEntity insertIntoManagedObjectContext:moc];

shEnt.pid = [processInfo processIdentifier]; // EXC_BAD_ACCESS (code=1, address=0x28ae) here !!!

NSError *error;

if (![moc save: &error])
{
   NSLog(@"Error while saving\n%@",
        ([error localizedDescription] != nil) ? [error localizedDescription] : @"Unknown Error");
        exit(1);
} 
```

我真的很困惑为什么会出现这个错误，因为当我硬编码数据模型而不是使用 .xcdatamodeld 文件时，它工作得很好！

任何形式的帮助都非常感谢！

编辑1：因为我问了所有这些问题，所以我想把一切都说清楚，很抱歉之前没有提供所有这些。

```
 // Entity.h

    #import <CoreData/CoreData.h>

    @interface Entity : NSManagedObject

    @property (strong) NSDate *date;
    @property (assign) NSInteger pid;

    @end

   //Entity.m

   #import "Entity.h"

   @interface Entity ()
   @property (strong) NSDate *primitiveDate;
   @end

   @implementation Entity

  @dynamic date,primitiveDate,pid;

  - (void) awakeFromInsert
  {
    [super awakeFromInsert];
    self.primitiveDate = [NSDate date];
  }

  - (void)setNilValueForKey:(NSString *)key
  {
    if ([key isEqualToString:@"pid"]) {
        self.pid = 0;
    }
    else {
        [super setNilValueForKey:key];
    }

  }
  @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:10:33.007

在核心数据中使用标量值比使用推荐的`NSNumber`. 这在核心数据编程指南的[这一部分](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdNSAttributes.html#//apple_ref/doc/uid/TP40001919-SW13)中有详细描述。

我强烈建议您将此属性切换为 NSNumber。你的赋值语句将是：

```
shEnt.pid = [NSNumber numberWithInt:[processInfo processIdentifier]]; 
```

# java - 具有方法调用转换的类型的多重界限

> ID：13170716
> 
> 赞同：-1
> 
> 时间：2012-11-01T03:53:27.143
> 
> 标签：java, generics, type-erasure

考虑这个小测试类：

```
import java.util.List;

public abstract class Test {

    // CAN modify this constructor interface
    public <T extends Runnable & Comparable<T>> Test(List<T> l) {
        setList((List<Runnable>)l);   // <-- (a) warning
        setList(l);                   // <-- (b) error
    }

    // CANNOT modify this interface
    public abstract void setList(List<Runnable> l);
} 
```

这简洁地代表了我的问题，因为我想使用泛型方法来获取类型的对象`T`（它们都是`Runnable`和`Comparable<T>`），就像`Test`的构造函数一样，但是我被限制使用具有接口的其他方法`setList`来获取`T`.

**(a)**为什么编译器会警告未经检查的转换为`List<Runnable>`when`l`是`List<T>`where`T`扩展的实例，并且具有类型擦除`Runnable`（根据[JLS SE7 §4.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)）？

**(b)**编译器引发以下错误：

```
error: method setList in class Test cannot be applied to given types;
    setList(l);   // <-- compiler error
    ^   
required: List<Runnable>   
found: List<T>   reason: actual argument List<T> cannot be converted to 
                         List<Runnable> by method invocation conversion   
where T is a type-variable:
    T extends Runnable,Comparable<T> declared in constructor <T>Test(List<T>) 
```

我在这里的理解是[方法调用转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3)无法转换`T`为，`Runnable`因为这可能被认为是缩小操作，但这是违反直觉的，因为我预计它可以与和`T`相交。`Runnable``Comparable<T>`

在这种情况下，我必须求助于`T`to实例的未经检查的转换 (a)吗？`List<Runnable>`

**编辑**

答案是肯定的，正如 Bhesh 在下面指出的那样，泛型类型在 Java 中是不变的。如果我可以使用以下内容，则不会发生错误（b）：

```
public abstract void setList(List<? extends Runnable> l); 
```

有关更多信息，请参阅[此出色的教程和](http://www.javacodegeeks.com/2011/04/java-generics-quick-tutorial.html)[JLS SE7 §5.1.10](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.10)中有关捕获转换的本节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:18:11.157

a) `T`is-a`Runnable`但`List<T>`is-not-a `List<Runnable>`。*泛型类型在 Java 中是不变的。*

b) 原因同上。*方法参数在 Java 中也是不变的。*（注意：方法参数是协变的。）

* * *

演员表`setList((List<Runnable>)l);`应该是安全的，因为我们知道这`T`总是会实现`Runnable`的。这是注释`@SuppressWarnings("unchecked")`存在的情况类型。

* * *

还有一个问题可能是（取决于您的情况）您正在从构造函数调用可覆盖的方法。

# sql - MS Access SQL 查询 - 连接 3 个表以接收总订单价格

> ID：13170717
> 
> 赞同：2
> 
> 时间：2012-11-01T03:53:30.423
> 
> 标签：sql, ms-access

我想知道特定订单 ID 的总价。这些信息包含在这些表格中：

order_line_t

```
Order_ID    Product_ID    Quantity
--------    ----------    --------
1006        4             1
1006        5             2
1006        7             2 
```

用途_t

```
Product_ID    Material_ID    Footage
----------    -----------    -------
4             16             20
5             15             13
7             10             16 
```

Raw_Materials_t

```
Material_ID    Unit_Price
-----------    ----------
16             05.70
15             16.72
10             15.55 
```

总成本由下式计算

```
Multiplying SUM ( Order_line_t.Quantity * Uses_t.Footage * Raw_Materials_t.Unit_Price) AS Total 
```

我当前的查询只返回一个错误：

```
SELECT Order_line_t.Order_ID, Order_line_t.Product_ID, Uses_t.Product_ID   ,Uses_t.Footage , 
SUM ( Order_line_t.Quantity * Uses_t.Footage * Raw_Materials_t.Unit_Price) AS Total
FROM Order_line_t, Uses_t , Raw_Materials_t
WHERE  Order_line_t.Order_ID = 1006; 
```

帮助表示赞赏！我究竟如何加入这些表？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:04:27.603

首先你错过了表之间的实际连接，其次你错过了你的组

```
SELECT  Order_line_t.Order_ID, 
            Order_line_t.Product_ID, 
            Uses_t.Product_ID   ,
            Uses_t.Footage , 
            SUM ( Order_line_t.Quantity * Uses_t.Footage * Raw_Materials_t.Unit_Price) AS Total
FROM    Order_line_t  INNER JOIN
            Uses_t  ON  Order_line_t.Product_ID = Uses_t.Product_ID INNER JOIN
            Raw_Materials_t     ON  Uses_t.Material_ID = Raw_Materials_t.Material_ID
WHERE   Order_line_t.Order_ID = 1006;
    GROUP BY Order_line_t.Order_ID, 
            Order_line_t.Product_ID, 
            Uses_t.Product_ID   ,
            Uses_t.Footage 
```

**编辑**

试试这个

```
SELECT  Order_line_t.Order_ID, 
        Order_line_t.Product_ID, 
        Uses_t.Product_ID, 
        Uses_t.Footage, 
        Sum([Order_line_t].[Quantity]*[Uses_t].[Footage]*[Raw_Materials_t].[Unit_Price]) AS Total
FROM    (Order_line_t INNER JOIN 
        Uses_t ON Order_line_t.Product_ID = Uses_t.Product_ID) INNER JOIN 
        Raw_Materials_t ON Uses_t.Material_ID = Raw_Materials_t.Material_ID
GROUP BY    Order_line_t.Order_ID, 
            Order_line_t.Product_ID, 
            Uses_t.Product_ID, 
            Uses_t.Footage; 
```

**编辑**

按订单 ID 总计

```
SELECT  Order_line_t.Order_ID,
        Sum([Order_line_t].[Quantity]*[Uses_t].[Footage]*[Raw_Materials_t].[Unit_Price]) AS Total
FROM    (Order_line_t INNER JOIN 
        Uses_t ON Order_line_t.Product_ID = Uses_t.Product_ID) INNER JOIN 
        Raw_Materials_t ON Uses_t.Material_ID = Raw_Materials_t.Material_ID
GROUP BY    Order_line_t.Order_ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:28:49.433

我认为您需要计算每一行的成本，然后对整个订单求和。就像是：

```
select 
    Order_ID, sum(RowCost) as OrderCost

from (

    select
        o.Order_ID, o.Product_ID, o.Quantity,
        u.Material_ID, u.Footage,
        r.Unit_Price,
        (o.Quantity * u.Footage * r.UnitPrice) as RowCost

    from
        order_line_t o INNER JOIN
        uses_t u on o.Product_ID = u.Product_ID INNER JOIN
        Raw_materials_t r on u.Material_ID = r.Material_ID

    where
        o.Order_ID = 1006

    ) z

group by
    Order_ID 
```

# ios - NSMutableArray Global 没有适用于 iOS 的应用程序委托

> ID：13170718
> 
> 赞同：0
> 
> 时间：2012-11-01T03:53:30.543
> 
> 标签：ios, xcode, core-data, uiviewcontroller

如果我在 ViewController 中声明一个 NSMutable 数组，有没有一种方法可以在不使用应用程序委托的情况下使其全局化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:04:23.243

您可以使用类方法`NSMutableArray`从您的`UIViewController`子类返回，例如：

```
static NSMutableArray *array;

+ (NSMutableArray *)array {
    if (!array) {
        array = [NSMutableArray arrayWithCapacity:8];
    }
    return array;
} 
```

然后，您可以使用 . 从任何地方获取数组实例`[MyViewController array]`。

# ios - 将可变数组推入 TableView

> ID：13170719
> 
> 赞同：0
> 
> 时间：2012-11-01T03:53:35.693
> 
> 标签：ios, nsmutablearray

我正在尝试将一个可变数组推送到 UITableView。但是当我按下按钮时，我的 UITableView 没有得到更新。表格视图仍然是空的...我已经创建了表格项的 NSLog 及其计数。输出中显示的值是正确的。不知道错误是什么。

ViewController.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>{
    UILabel *lbl;
    NSTimer *stopTimer;
    NSDate *startDate;
    BOOL running,lap;
    UIButton *bttn;
    NSMutableArray *tableItems;
    NSString *timeString;
}

@property (strong,nonatomic) IBOutlet UILabel *lbl;
@property (strong,nonatomic) IBOutlet UIButton *bttn;
@property (strong,nonatomic) NSMutableArray *tableItems;
@property (strong,nonatomic) NSString *timeString;

-(IBAction)startPressed:(id)sender;
-(IBAction)resetPressed:(id)sender;

-(void)updateTimer;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize lbl,bttn,tableItems,timeString;

- (void)viewDidLoad
{
    [super viewDidLoad];
    lbl.text = @"00.00.00.000";
    running = FALSE;
    lap = FALSE;
    startDate = [NSDate date];
    tableItems = [[NSMutableArray alloc] init];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)startPressed:(id)sender{
    if(!running){
        running = TRUE;
        lap = TRUE;
        [sender setTitle:@"Stop" forState:UIControlStateNormal];
        [bttn setTitle:@"Lap" forState:UIControlStateNormal];
        if (stopTimer == nil) {
            stopTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                         target:self
                                                       selector:@selector(updateTimer)
                                                       userInfo:nil
                                                        repeats:YES];
        }
    }else{
        running = FALSE;
        lap = FALSE;
        [sender setTitle:@"Start" forState:UIControlStateNormal];
        [bttn setTitle:@"Restart" forState:UIControlStateNormal];
        [stopTimer invalidate];
        stopTimer = nil;
    }

}
-(void)updateTimer{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.SSS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    timeString=[dateFormatter stringFromDate:timerDate];
    lbl.text = timeString;
}

-(IBAction)resetPressed:(id)sender{
    if (!lap) {
        [stopTimer invalidate];
        stopTimer = nil;
        startDate = [NSDate date];
        lbl.text = @"00.00.00.000";
        running = FALSE;
    }
    else{
        [tableItems addObject:timeString];
        NSLog(@"%@",tableItems);
        NSLog(@"%i",tableItems.count);
    }

}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return tableItems.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    //Step 1:Check whether if we can reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    //Step2: If there are no new cells to reuse,create a new one
    if(cell ==  nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"cell"];
    }

    //Step 3: Set the cell text content
    cell.textLabel.text = [tableItems objectAtIndex:indexPath.row];

    //Step 4: Return the row
    return cell;

}
@end 
```

已将数据源和委托链接到界面构建器中的表格视图。不知道我的错误是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:00:36.397

将对象添加到`tableItems`数组不会加载表。

你需要打电话`[tableView reloadData];`

此外，为此，您需要在接口文件中创建表的出口。

# java - Spring Roo DBRE JDBC 驱动程序不适用于“org.postgresql.Driver”

> ID：13170728
> 
> 赞同：1
> 
> 时间：2012-11-01T03:54:25.317
> 
> 标签：java, spring-roo

我在 Spring Roo 中使用 postgres，当我在安装时尝试使用 DBRE

```
database introspect --schema no-schema-required 
```

回应是

```
addon search --requiresDescription "#jdbcdriver,driverclass:org.postgresql.Driver" found no matches
JDBC driver not available for 'org.postgresql.Driver' 
```

甚至手动搜索

```
addon search --requiresDescription "#jdbcdriver,driverclass:org.postgresql.Driver" 
```

结果是

```
0 found, sorted by rank; T = trusted developer; R = Roo 1.2 compatible
ID T R DESCRIPTION -------------------------------------------------------------
--------------------------------------------------------------------------------
[HINT] use 'addon info id --searchResultId ..' to see details about a search result
[HINT] use 'addon install id --searchResultId ..' to install a specific search result, or
[HINT] use 'addon install bundle --bundleSymbolicName TAB' to install a specific add-on version 
```

我使用的是 STS 3.1，我有互联网连接。

我以前试过这个，它奏效了。会发生什么？

# eclipse - 带有 JBoss 工具的 Java Eclipse 中缺少 GIt Repository 选项卡

> ID：13170730
> 
> 赞同：1
> 
> 时间：2012-11-01T03:54:37.910
> 
> 标签：eclipse, jboss, eclipse-plugin, egit

我刚刚在我的 Macbook 中安装了 Eclipse Java EE IDE。（Eclipse 版本：Indigo Service Release 2 Build id：20120216-1857）。

然后我为 Indigo 安装了 JBoss Tool。之后，我重新启动了 Eclipse。现在从“已安装的软件”选项卡中，我可以找到“名称-JBoss Tools EGit 集成（实验）版本-2.3.1.v20120715-0255-H145-Final Id-org.jboss.tools.openshift.egit.integration.feature。功能组”。但是，当我在 Eclipse 中打开 Java EE 透视图时，我找不到“GIt Repository 选项卡”。我确实有以下顺序的其他选项卡：标记---属性---服务器---数据源资源管理器---片段

任何人都可以提供任何可能的线索，说明为什么 Git Repository 选项卡丢失，即使包含它的 JBoss 工具已经安装？

谢谢！

# javascript - 如何在浏览器中调试angularjs的$rootScope对象

> ID：13170732
> 
> 赞同：72
> 
> 时间：2012-11-01T03:54:47.147
> 
> 标签：javascript, angularjs

有没有办法在浏览器中加载 angularjs 应用程序时对其进行调试？

IE。我希望得到`$rootScope`我当前的应用程序。我该怎么做？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-01T06:30:23.133

+1 巴达朗

此外，您可以通过从控制台执行以下命令从 DOM 中的任何元素获取范围

```
angular.element(DOMNODE).scope() 
```

其中 DOMNODE，当然是对 DOM 节点的引用。

例如，在**元素**选项卡中的 Chrome 中，您可以选择`ng-app`指令所在的节点，并获取根范围

```
angular.element($0).scope() 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-08-01T15:24:21.990

在开发者控制台中试试这个

```
$rootScope = angular.element(document).scope() 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-01T04:26:39.147

[Batarang](http://blog.angularjs.org/2012/07/introducing-angularjs-batarang.html) -- AngularJS 的 Google Chrome 插件

安装后，你可以这样做

控制台.log($rootScope);

并检查 chrome 控制台中的范围对象。

顺便说一句，如果你想获得 $rootScope，你需要注入你的控制器

像

```
app.controller('MainCtrl', function($scope, $rootScope) {

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-23T12:31:11.783

对于那些使用`$compileProvider.debugInfoEnabled(false);`并将`ng-strict-di`其粘贴到控制台中的人，`$rootScope`将被记录并添加到`window`：

```
function getRootScope($rootScope){ console.log(window.$rootScope = $rootScope); }
getRootScope.$inject = ["$rootScope"];
angular.element(document.querySelector('[data-ng-app],[ng-app]')).injector().invoke(getRootScope); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-04T12:02:40.343

您可以在源代码开发者工具-> 源代码中看到 $rootScope

![$rootScope](../Images/0043a30cea5c4361c6790ff07e367734.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-24T18:46:25.157

在开发者控制台类型`angular.element('body').scope();`中，如果您的应用是`<body data-ng-app="SomeApp">`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-09-23T19:07:53.420

只是想补充一下，有一个名为“Angular Scope Inspector”（[当前商店网址](https://chrome.google.com/webstore/detail/angular-scope-inspector/aaglpchhlnofjbbpopfdfgllfkhnljnl)）的免费 Chrome 扩展程序将自动检查开发人员工具元素选项卡中选定元素的范围

我今天才发现它，它非常有用，IMO

# c - 使用 clang 编译简单的 UDP 服务器得到错误：使用未声明的标识符 'SA'

> ID：13170735
> 
> 赞同：-1
> 
> 时间：2012-11-01T03:54:58.410
> 
> 标签：c, sockets, clang

我试图使简单的服务器代码工作：

```
/*
NAME:        udpServer0 
SYNOPSIS:    udpServer0 
DESCRIPTION:    The program creates a datagram socket in the inet 
                domain, binds it to port 12345 and receives any message
                arrived to the socket and prints it out
*/

#include <stdio.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>

int main(void)
{
   int   sd;
   struct   sockaddr_in server;
   char buf[512];
   int rc;

   server.sin_family = AF_INET;
   server.sin_addr.s_addr = htonl(INADDR_ANY);
   server.sin_port = htons(12345);

   sd = socket (AF_INET,SOCK_DGRAM,0);

    bind( sd, (SA *) &server, sizeof(server));

   for(;;){
      rc=recv (sd, buf, sizeof(buf), 0);
      buf[rc]= (char) NULL;
      printf("Received: %s\n", buf);
   }
} 
```

我收到这些错误：

```
clang udp_server.c                
udp_server.c:27:16: error: use of undeclared identifier 'SA'
    bind( sd, (SA *) &server, sizeof(server));
               ^
udp_server.c:27:20: error: expected expression
    bind( sd, (SA *) &server, sizeof(server));
                   ^
2 errors generated. 
```

我需要一些标题来避免这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:35:22.080

正如评论所说，你想要：（struct sockaddr *）而不是（SA *）。

SA 必须是 typedef。如果您想要套接字编程的最佳指南，请参阅：[http ://beej.us/guide/bgnet/output/html/multipage/index.html](http://beej.us/guide/bgnet/output/html/multipage/index.html)

# javascript - 如何将引用的可打印内容解码为 node.js 中的普通字符串？

> ID：13170749
> 
> 赞同：6
> 
> 时间：2012-11-01T03:57:37.870
> 
> 标签：javascript, node.js

例如，我有一个字符串“this=20is=20a=20string”，我想将其转换为“this is a string”。

是否有一个库函数或一个 npm 模块可以做到这一点，或者我应该创建自己的函数来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T04:34:47.200

使用 mimelib：

```
var mimelib = require("mimelib");
mimelib.decodeQuotedPrintable("this=20is=20a=20string") === "this is a string"
mimelib.decodeMimeWord("=?iso-8859-1?Q?=27text=27?=") === "'text'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-15T18:43:59.187

```
 function decodeQuotedPrintable(data)
{
    // normalise end-of-line signals 
    data = data.replace(/(\r\n|\n|\r)/g, "\n");

    // replace equals sign at end-of-line with nothing
    data = data.replace(/=\n/g, "");

    // encoded text might contain percent signs
    // decode each section separately
    let bits = data.split("%");
    for (let i = 0; i < bits.length; i ++)
    {
        // replace equals sign with percent sign
        bits[i] = bits[i].replace(/=/g, "%");

        // decode the section
        bits[i] = decodeURIComponent(bits[i]);
    }

    // join the sections back together
    return(bits.join("%"));
} 
```

# oop - SOA 设计、Web 服务和 OOP

> ID：13170750
> 
> 赞同：0
> 
> 时间：2012-11-01T03:58:34.853
> 
> 标签：oop, jakarta-ee, soap, jax-ws, middleware

在工作（银行）中，我们正在重新设计我们的 MW / Web 服务。我们正在使用自下而上的方法来构建这些服务。我们正在使用Java，jax-ws。所以我需要创建要遵循的规则。所以到目前为止我有两个问题：

1.  我们应该为我们的对象字段创建类型，即在类 Client 中，我们应该创建一个 CellPhone 对象还是简单地使用字符串。我可以看到优点和缺点，对象会变得很重，但易于验证和控制。

还有其他想法吗？

1.  我们应该使用 SOAP 内置错误还是创建我们自己的错误状态代码（可能在 SOAP 标头中）。我真的很喜欢 SOAP 错误，因为它直接映射到 Java Exception。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:41:27.747

一些答案：
1\. 请记住，Web 服务（我假设您正在谈论基于 SOAP 的 WS，
正如您提到的 jax-ws 而不是 jax-rs）使用 SOAP，它是一种基于 XML 的协议。
2\. 对于您创建的每个类，您的 WSDL 文件中都会有一个类型。
3\. SOAP 信封（包含消息的“主体”）还将包含额外的 XML 元素来表示手机 - 您正在创建更多流量。

总结 1 - 3 和你在谈论手机的事实，我不明白你为什么需要为此上课。
您是在讨论实际上模拟 CellPhone 的 CellPhoen 类
（即，具有“供应商”、“运营商”等属性的手机设备）还是在谈论手机号码？
如果这只是手机号码，那么我基于 1-3 的建议仍然有效。

处理验证：
您可以使用许多验证器框架来验证电话号码。
Java中甚至还有一个用于验证的[JSR](http://en.wikipedia.org/wiki/Bean_Validation)。
我建议您查看此处以了解符合 JSR 303的[Hibernate-Validator框架。](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html_single/)
您也可以下载[oVirt](http://www.ovirt.org)开源项目的源代码，
并在我们的 BusinessEntiies 中查看 oVirt-engine（查看 ovirt-engine/backend/manager/modules/common）并查看一些“现实生活”中的使用示例这些验证器。

关于故障 - 您可以创建自己的故障，并将它们映射到 Java 异常，我认为这没有什么坏处。

# c - 为什么这个 ppid == 1？我错过了一些关于 fork() 的东西吗？

> ID：13170757
> 
> 赞同：8
> 
> 时间：2012-11-01T03:59:40.323
> 
> 标签：c, fork

```
#include <stdio.h>

int main(void)
{
    fork();
    fork();
    printf("ppid %d pid %d\n", getppid(), getpid());
    return 0;
} 
```

上面的代码有时会打印

```
$ ./a.out 
ppid 3389 pid 3883
ppid 3883 pid 3885
ppid 1 pid 3884
ppid 3884 pid 3886 
```

为什么进程 3884 的 ppid 为 1？不是应该是3883吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-01T04:02:34.427

我猜想在第三个孩子检查父进程的 PID 时父进程已经完成运行并退出。`init`这将导致孩子在进程 ID 为 1的 下重新成为父母。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T04:26:10.280

取自：

[http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2Fgetppid.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2Fgetppid.htm)

“getppid()返回的值是调用进程的父进程的进程ID。进程ID值为1表示没有与调用进程关联的父进程。”

该 printf 指令在父进程中执行，因此它返回 1，因为它没有父进程。这是要打印的第三行，这是完全正常的，因为叉子同时运行它的进程，并且没有保证特定的顺序。

# android - 为什么我在尝试通过 http 上传时使用代码删除了一些信息？

> ID：13170758
> 
> 赞同：1
> 
> 时间：2012-11-01T03:59:43.257
> 
> 标签：android, http, upload

我正在使用**HttpClient**上传我的文件。我尝试上传 19 个文件
，但只有 3 个文件成功上传。

请告诉我为什么这不起作用并在可能的情况下给我一些建议或代码示例？

我的代码如下：

```
public void uploadLog() {

new Thread(new Runnable() {
        @Override
        public void run() {

            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(UPLOAD_LOG_URL);
            InputStreamEntity reqEntity;
            try {
                File file=new File(Environment.getExternalStorageDirectory()
                        + "/wlantest/report/");
                Log.v("report/", file.getCanonicalPath());
                File[] files=file.listFiles();
                for(int i=0;i<files.length;i++)
                {
                    reqEntity = new InputStreamEntity(new FileInputStream(
                            files[i].getCanonicalPath()), -1);
                    Log.v("test", "" + files[i].getCanonicalPath());
                reqEntity.setContentType("application/x-zip-compressed");
                reqEntity.setChunked(true);
                post.setEntity(reqEntity);
                HttpResponse response = client.execute(post);
                Log.v("test", "" + response.getStatusLine().toString());
                Log.v("test", "" + response.getStatusLine().getStatusCode());
                if (response.getStatusLine().getStatusCode() == 200) {
                    MainActivity.this.runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            Toast.makeText(MainActivity.this, "sucessed", Toast.LENGTH_SHORT).show();
                            File filetotal = new File(Environment.getExternalStorageDirectory() + "/wlantest/report/");
                            if (filetotal.listFiles().length != 0) {
                                report_total.setText("You have saved" + filetotal.listFiles().length
                                        + "reports" + "\n" + "click to upload");
                            }
                            else {
                                report_total.setText("You have no report\nafter saving will display");
                                progress.dismiss();
                            }

                        }
                    });
                }
                files[i].delete();

                }

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            /*
             * sendMesssage(MESSAGE_FINISH, 0); } else {
             * sendMesssage(MESSAGE_FAILED, 0); } } catch (IOException e) {
             * e.printStackTrace(); sendMesssage(MESSAGE_FAILED, 0); }
             */

        }
    }).start();
} 
```

**和我的日志猫**

> 11-01 14:34:25.110: V/test(874): HTTP/1.1 200 OK 11-01 14:34:25.110: V/test(874): 200 11-01 14:34:25.470: V/test （874）：/mnt/sdcard/wlantest/report/1351643286085.zip 11-01 14:34:25.470：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:25.470：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:25.540: V/test(874): HTTP/1.1 200 OK 11-01 14:34:25.540: V/test(874): 200 11-01 14:34:25.550: V/test （874）：/mnt/sdcard/wlantest/report/1351644284660.zip 11-01 14:34:25.550：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:25.550：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:25.630: V/test(874): HTTP/1.1 200 OK 11-01 14:34:25.630: V/test(874): 200 11-01 14:34:25.640: V/test(874): /mnt/sdcard/ wlantest/report/1351649375578.zip 11-01 14:34:25.640：W/SingleClientConnManager(874)：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:25.640：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:25.790: V/test(874): HTTP/1.1 200 OK 11-01 14:34:25.790: V/test(874): 200 11-01 14:34:25.790: V/test （874）：/mnt/sdcard/wlantest/report/1351650552047.zip 11-01 14:34:25.790：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:25.790：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:26.700：V/测试（874）：HTTP/1。1 200 OK 11-01 14:34:26.700: V/test(874): 200 11-01 14:34:28.620: V/test(874): /mnt/sdcard/wlantest/report/1351652247364.zip 11- 01 14:34:28.640：W/SingleClientConnManager(874)：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:28.640：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:28.780: V/test(874): HTTP/1.1 200 OK 11-01 14:34:28.780: V/test(874): 200 11-01 14:34:28.780: V/test （874）：/mnt/sdcard/wlantest/report/1351652447759.zip 11-01 14:34:28.780：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:28.780：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:28.900: V/test(874): HTTP/1.1 200 OK 11-01 14: 34:28.900: V/test(874): 200 11-01 14:34:28.910: V/test(874): /mnt/sdcard/wlantest/report/1351652790670.zip 11-01 14:34:28.920: W /SingleClientConnManager(874)：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:28.920：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:28.940: V/test(874): HTTP/1.1 200 OK 11-01 14:34:28.940: V/test(874): 200 11-01 14:34:28.950: V/test （874）：/mnt/sdcard/wlantest/report/1351652906642.zip 11-01 14:34:28.950：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:28.950：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.070: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.070: V/test(874): 200 11-01 14:34:29.080: V/test(874): /mnt/sdcard/wlantest/report/1351653878048.zip 11-01 14:34:29.090: W/SingleClientConnManager(874 ): SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.090：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.110: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.110: V/test(874): 200 11-01 14:34:29.110: V/test （874）：/mnt/sdcard/wlantest/report/1351654209724.zip 11-01 14:34:29.110：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.110：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.200: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.200: V/test(874): 200 11-01 14:34:29.210: V/test(874): /mnt/sdcard/wlantest/report/1351661911878.zip 11-01 14:34:29.210: W/SingleClientConnManager(874): SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.210：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.310: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.310: V/test(874): 200 11-01 14:34:29.320: V/test （874）：/mnt/sdcard/wlantest/report/1351662101340.zip 11-01 14:34:29.320：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.320：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.440: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.440: V/test(874): 200 11-01 14:34: 29.440：V/test(874)：/mnt/sdcard/wlantest/report/1351662348097.zip 11-01 14:34:29.450：W/SingleClientConnManager(874)：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.450：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.550: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.550: V/test(874): 200 11-01 14:34:29.550: V/test （874）：/mnt/sdcard/wlantest/report/1351662414224.zip 11-01 14:34:29.560：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.560：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.650: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.650: V/test(874): 200 11-01 14:34:29.660: V/test (874): /mnt/sdcard/wlantest/report/1351662757528.zip 11-01 14:34:29.660：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.660：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.770: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.770: V/test(874): 200 11-01 14:34:29.770: V/test （874）：/mnt/sdcard/wlantest/report/1351662878154.zip 11-01 14:34:29.780：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.780：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.810: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.810: V/test(874): 200 11-01 14:34:29.840: V/test (874): /mnt/sdcard/wlantest/report/1351663009338.zip 11-01 14:34:29.840：W/SingleClientConnManager(874)：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.840：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.880: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.880: V/test(874): 200 11-01 14:34:29.880: V/test （874）：/mnt/sdcard/wlantest/report/1351664456648.zip 11-01 14:34:29.880：W/SingleClientConnManager（874）：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.880：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.920: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.920: V/test(874): 200 11-01 14:34:29.920: V/test (874): /mnt/sdcard/wlantest/report/1351665696886.zip 11-01 14:34:29.930：W/SingleClientConnManager(874)：SingleClientConnManager 的使用无效：连接仍然分配。11-01 14:34:29.930：W/SingleClientConnManager(874)：确保在分配另一个连接之前释放连接。11-01 14:34:29.960: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.960: V/test(874): 200 11-01 14:34:30.010: D/memalloc （874）：离子：取消映射缓冲区基数：0x5d3d2000 大小：196608 11-01 14:34:30.010：D/memalloc（874）：离子：取消映射缓冲区基数：0x5cf9a000 大小：196608 11-01 14:34:30.010：D /memalloc（874）：离子：取消映射缓冲区基数：0x5cfca000 大小：196608 确保在分配另一个连接之前释放连接。11-01 14:34:29.960: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.960: V/test(874): 200 11-01 14:34:30.010: D/memalloc （874）：离子：取消映射缓冲区基数：0x5d3d2000 大小：196608 11-01 14:34:30.010：D/memalloc（874）：离子：取消映射缓冲区基数：0x5cf9a000 大小：196608 11-01 14:34:30.010：D /memalloc（874）：离子：取消映射缓冲区基数：0x5cfca000 大小：196608 确保在分配另一个连接之前释放连接。11-01 14:34:29.960: V/test(874): HTTP/1.1 200 OK 11-01 14:34:29.960: V/test(874): 200 11-01 14:34:30.010: D/memalloc （874）：离子：取消映射缓冲区基础：0x5d3d2000 大小：196608 11-01 14:34:30.010：D/memalloc（874）：离子：取消映射缓冲区基础：0x5cf9a000 大小：196608 11-01 14:34:30.010：D /memalloc（874）：离子：取消映射缓冲区基数：0x5cfca000 大小：196608

# asp.net - 在 ASP.NET Web 应用程序中引用自定义类

> ID：13170764
> 
> 赞同：0
> 
> 时间：2012-11-01T04:00:01.607
> 
> 标签：asp.net, class, master-pages

所以我在将我的网站转换为 Web 应用程序时遇到了问题。我有一个 MasterPage，它用于继承一个名为 MasterParent 的自定义类。当我现在尝试引用它时，它根本无法识别它。

这两个文件都在主应用程序文件夹中。一些示例代码如下：

MasterPage.master.cs

```
public partial class MasterPage : MasterParent
{
} 
```

MasterParent.cs（不能从上面的代码继承）

```
namespace PortfolioApplication
{
    /// <summary>
    /// Summary description for MasterContent
    /// </summary>
    public abstract partial class MasterParent : System.Web.UI.MasterPage
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        }

        #region "Navigation Buttons"

        protected void btnPortfolio_Click(object sender, EventArgs e)
        {
            Server.Transfer("Portfolio.aspx");
        }
        protected void btnHome_Click(object sender, EventArgs e)
        {
            Server.Transfer("Default.aspx");
        }
        protected void btnContact_Click(object sender, EventArgs e)
        {
            Server.Transfer("Contact.aspx");
        }
        protected void btnResume_Click(object sender, EventArgs e)
        {
            Server.Transfer("Resume.aspx");
        }

        #endregion
    }
} 
```

我错过了一些非常简单的东西还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:55:10.623

问题是当我将所有课程从网页导入应用程序时。我提到的用于此传输的网站说将文件拖放到其中。我必须手动重新创建每个文件并从以前的项目中复制代码才能被引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:05:56.687

将文件从网站复制到 Web 应用程序后，IIRC 您还需要右键单击新项目并选择转换为 Web 应用程序（另请参见：http: [//msdn.microsoft.com/en-us/library/aa983476 (VS.100).aspx](http://msdn.microsoft.com/en-us/library/aa983476(VS.100).aspx) )。这会导致标记文件从使用 CodeFile 属性（在运行时即时编译）转换为使用 CodeBehind（在设计时编译 - 网站和 Web 应用程序项目之间的关键区别）。

Convert To Web Application 命令还将您的 App_Code 重命名为 Old_App_Code，因此这些文件也将在设计时进行编译。在 VS2012 中，进行了一些更改，以便 App_Code 中的内容也可以在设计时使用，但以前 App_Code 在 Web 应用程序项目中被 VS 忽略。

# jquery - jQuery .animate() 在 Chrome 中不起作用（跳转到新的起始位置）

> ID：13170767
> 
> 赞同：-1
> 
> 时间：2012-11-01T04:00:23.407
> 
> 标签：jquery, google-chrome, cross-browser, jquery-animate

所以，这个小提琴： http: [//jsfiddle.net/aXsWz/31/](http://jsfiddle.net/aXsWz/31/)实际上是按照我想要的方式工作的。但是，这不是我的实际代码发生的情况（尚无法让 Fiddle 复制该问题）。但是，希望我能彻底解释它以获得帮助。它适用于 Firefox 和 IE，但不适用于 Chrome。

```
 $(document).ready(function() {

$('div#navNavigate').click(function(){
        $('div#navNavigateHide').show()
        $('div#navNavigate').hide()
        $('div#sideNav').show()
        $('div#container').animate({'left':'+=120'});
    });  

$('div#navNavigateHide').click(function(){
        $('div#navNavigate').show()
        $('div#navNavigateHide').hide()
        $('div#container').animate({'left':'-=120'});
    });
}); 
```

而不是刚刚移动的“容器” div，它首先向左跳到一个新的起始位置，然后按指定的距离进行动画处理。另外，我想注意跳跃的距离比指定的动画距离更大（即我的容器几乎跳出屏幕，然后动画回到部分视图。如果它跳跃的距离相等，它会动画回到原来的位置）。

当我可以复制它时，我会发布更多代码/更新的小提琴，但如果有人能在此之前提供帮助，我将不胜感激。谢谢！

**编辑***因此，当放入常规文件并在 Chrome 中查看时，小提琴不起作用。不幸的是，没有办法使用 jsfiddle 复制它。但是，任何愿意帮助并希望看到问题的人，只需将小提琴复制粘贴到三个文件中并打开 html。您将看到问题的实际效果。

**编辑***我只是在想......如果它只是发生在我的电脑上，那么也许是我的 jQuery？我目前下载了 1.7.1。所以也许我会去抢最新版本。也许这会奏效...

**编辑***已修复！这是 jQuery 版本。现在可以走了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:52:07.033

我修好了它！好吧，我下载了最新版本的 jQuery，现在它可以工作了。简单的修复。最后！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T04:04:44.243

尝试更换

```
 $('div#container').animate({'left':'+=120'}); 
```

和

```
 $('div#container').animate({'left':'-=120'}); 
```

和

```
 $('div#container').stop().animate({'left':'+=120'}); 
```

和

```
 $('div#container').stop().animate({'left':'-=120'}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T04:49:56.703

看起来您可以将您的功能整合为一个。有时这可以帮助解决时序/排序问题。

试试这个：

```
var hidden = true;
$('div#navNavigate').click(function(){
if (hidden) {    
    $('div#container').animate({'left':'+=120'});
} else {
    $('div#container').animate({'left':'-=120'});
}
    hidden = !hidden;
}); 
```

[小提琴](http://jsfiddle.net/scrimothy/PdHFJ/) ​</p>

# teamcity - 声纳的 TeamCity dotCover 报告路径

> ID：13170780
> 
> 赞同：12
> 
> 时间：2012-11-01T04:02:37.440
> 
> 标签：teamcity, sonarqube, dotcover, sonar-runner, teamcity-7.1

我正在尝试将声纳分析集成到 TeamCity 构建过程中。我有一个 NUnit 构建步骤，它运行我的单元测试，然后运行 ​​dotCover 进行覆盖。

我的下一步是声纳运行器。当前存在的配置是；gallio.mode=dotCover, sonar.gallio.mode=reuseReport 但我还需要 sonar.gallio.reports.path。

有人知道上一步生成的 dotCover 报告的路径吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-26T15:53:39.693

在同一问题上花费了一些时间，但使用了较新的 Sonar c# 插件 (v.2.3) - 已放弃对 Gallio 的支持，但仍需要报告。

为了直接回答这个问题，TeamCity 将 dotcover*快照*文件放入一个名为`coverage_dotcover27574681205420364801.data`（其中数字是随机的）的临时文件夹中。所以

### 程序是：

1.  在包含测试和覆盖的步骤之后，在 Team City 中创建一个 PowerShell 构建步骤
    *   如果您愿意，可以使用命令行
2.  在临时文件夹中获取完整的 dotCover*快照*名称
3.  运行 dotCover 以从快照生成 HTML 报告
    *   注意 - Sonar (c# plugin v 2.3) 仅支持 dotCover HTML 报告
4.  将生成的 HTML 报告传递给声纳

### PowerShell 脚本：

```
$snapshot = Get-ChildItem "%system.teamcity.build.tempDir%" `
     -Filter coverage_dotcover*.data `
     | select -ExpandProperty FullName -First 1

%teamcity.dotCover.home%\dotCover.exe report `
    /ReportType=HTML /Source="$snapshot" `
    /Output="%sonar.coverageReport%" 
```

* * *

现在您可以在 Sonnar runner 中指定您的报告为`sonar.cs.dotcover.reportsPaths='%sonar.coverageReport%'`

其中 %sonar.coverageReport% 是 TeamCity 中定义的属性

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-22T04:43:55.713

TeamCity 2017 似乎不再创建 coverage_dotcover*.data 文件。相反，它会创建 *.dcvr 文件。

在创建报告之前，可能需要合并多个文件。因此，powershell 需要更新。

因此，使用**Oleksandr**提供的步骤，只需将脚本更新为：

```
$snapshotfiles = Get-ChildItem "%system.teamcity.build.tempDir%" `
 -recurse -Filter *.dcvr `
 | select -ExpandProperty Name

$snapshots = $snapshotfiles -join ";"

%teamcity.dotCover.home%\dotCover.exe merge /Source=$snapshots 
/Output=dotcovermerge.dcvr

%teamcity.dotCover.home%\dotCover.exe report `
/ReportType=HTML /Source=dotcovermerge.dcvr `
/Output="%sonar.coverageReport%" 
```

然后可以将属性 %sonar.coverageReport% 传递给 sonarqube 扫描仪。顺便说一句，您需要在 TC 中为 %sonar.coverageReport% 创建一个参数，例如“sonarcoverage.html”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T10:07:59.867

我找不到使用内置 NUnit 运行器的方法。我设法通过使用 powershell 构建步骤手动调用所需的命令来使其工作。

第一步是在 dotCover 封面调用中通过 Gallio 运行 NUnit 测试：

```
& dotCover cover `
/TargetExecutable="C:\Program Files\Gallio\bin\Gallio.Echo.exe" `
/TargetArguments="/report-type:XML /report-name-format:test-report /runner:IsolatedProcess /report-directory:.\Gallio .\Path\Test.dll" `
/Filters="+:WhatToCover" `
/Output=coverage.snapshot 
```

然后，Sonar 可以使用重用报告获取 Gallio 测试报告，TeamCity 会自动检测测试结果。

[您可以通过将服务消息](http://confluence.jetbrains.net/display/TCD7/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ServiceMessages)写入标准输出来使 TeamCity 直接处理覆盖快照：

```
Write-Host "##teamcity[importData type='dotNetCoverage' tool='dotcover' path='coverage.snapshot']" 
```

要将覆盖信息转换为 Sonar 可用的格式，您需要使用 dotCover 报告命令和[未记录的报告类型 TeamCityXML](http://jira.codehaus.org/browse/SONARDOTNT-185)：

```
& dotCover report /Source=coverage.snapshot /Output=coverage-report.xml /ReportType=TeamCityXML 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-25T11:08:21.660

我们正在[为 MSBuild 使用 SonarScanner，](https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-msbuild/)并且需要将团队城市临时构建路径添加到开始步骤。

1.  运行 SonarScanner.MSBuild.exe 开始命令，[将临时构建目录指定为报告可用](https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-msbuild/)的 位置

```
 /d:sonar.cs.dotcover.reportsPaths="%system.teamcity.build.tempDir%". 
```

2.  使用 MSBuild 构建项目

3.  运行您的测试工具，指示它在之前为 MSBuild SonarQube Runner 指定的相同位置生成报告

4.  运行 SonarScanner.MSBuild.exe 结束命令

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-24T23:44:34.810

nunit/dotcover 构建步骤的覆盖率报告存储在 teamcity 隐藏工件目录中。您需要在声纳步骤中将其添加为工件依赖项。我不会推荐隐藏的工件路线，但可以做到。

这是我用来发布报告的工件路径，它工作了几周然后开始失败：

`%env.TEAMCITY_DATA_PATH%/system\artifacts\**\%teamcity.build.id%\.teamcity\.NETCoverage\dotCover.snapshot`

一旦你有了报告，你就可以免费回家了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-10T09:37:25.027

虽然这可能是一个有点麻烦的解决方案，但我正在使用两个链式构建。

第一个构建配置构建解决方案并运行测试/覆盖，并将 dotCover 快照保存为工件。

另一个构建依赖于第一个构建`.teamcity/.NETCoverage/dotCover.snapshot`并运行 `"C:\Program Files (x86)\JetBrains\dotCover\v2.7\bin\dotCover.exe" report /ReportType=HTML /Source="dotCover.snapshot" /Output="dotCover.html"`，并且作为最新步骤，执行 SonarRunner（您的项目属性文件将指向“dotCover.html”）。

（尝试使用 SonarQube 5、dotCover 2.7、TC8）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-28T12:07:06.083

以下是对我有用的。我在 TC 2018.2.4 上，dotCover 的捆绑版本没有生成任何东西，所以我也将它升级到了最新版本，即 2019.1.1

我无法让代理使用最新版本的 dotcover 工具，因此我必须为此构建文件夹路径，而不是使用默认的 %teamcity.dotCover.home% 变量。

我也不想使用临时文件夹，因为那里的东西被构建删除了。

```
$snapshot_file_list = Get-ChildItem "%system.teamcity.build.tempDir%" -recurse -Filter coverage_dotcover*.data | select -ExpandProperty FullName
Echo "dotCover Snapshot files"
Echo $snapshot_file_list
$joined_snapshot_files = $snapshot_file_list -join ";"
Echo "Merging data files to %system.teamcity.build.checkoutDir%\dotcovermerge.dcvr"
& "%teamcity.agent.tools.dir%\JetBrains.dotCover.CommandLineTools.2019.1.1\dotCover.exe" merge /Source=$joined_snapshot_files /Output="%system.teamcity.build.checkoutDir%\dotcovermerge.dcvr" /LogFile="%system.teamcity.build.checkoutDir%\dotCover.log"
Echo "Generating dotCover Html report"
Echo "%system.teamcity.build.checkoutDir%\%sonar.coverageReport%"
& "%teamcity.agent.tools.dir%\JetBrains.dotCover.CommandLineTools.2019.1.1\dotCover.exe" report /ReportType=HTML /Source="%system.teamcity.build.checkoutDir%\dotcovermerge.dcvr" /Output="%system.teamcity.build.checkoutDir%\%sonar.coverageReport%" 
```

# php - FILTER_VALIDATE_EMAIL 未验证

> ID：13170781
> 
> 赞同：-1
> 
> 时间：2012-11-01T04:02:42.367
> 
> 标签：php, validation, email

这是我正在使用的代码：

```
if (filter_var($desired_username, FILTER_VALIDATE_EMAIL) || ((strlen($desired_username)) > 32)) {
    $usernamevalidate=FALSE;
} else {
    $usernamevalidate=TRUE;
} 
```

`strlen`工作正常，但 filter_var 或`FILTER_VALIDATE_EMAIL`不是。不要让变量名欺骗您，“ `$desired_username`”链接到电子邮件的字段，但它只是不起作用。

我可以输入“test”而不是“ `test@test.com`”甚至“ `test@test`”，它仍然有效。我也尝试过`preg_match`其他方法，但都没有正确验证。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:07:28.587

几件事：

*   您似乎混淆了用户名和电子邮件。许多电子邮件的长度超过 32 个字符。
*   你已经知道如何`filter_var`倒退。`$usernamevalidate=FALSE`将使用您的代码设置有效的电子邮件。

你应该这样做：

```
if(filter_var($desired_username, FILTER_VALIDATE_EMAIL)) {
  $usernamevalidate=TRUE;
} else {
  $usernamevalidate=FALSE;
} 
```

# c# - 基于条件绑定

> ID：13170783
> 
> 赞同：0
> 
> 时间：2012-11-01T04:03:02.110
> 
> 标签：c#, wpf, binding, listbox, expander

你好。我遇到了`RadExpander`在`RadListBox`. 基本上，我有类似[here](https://stackoverflow.com/a/1183404/640607)或[here](https://stackoverflow.com/a/11199811/640607)的东西。

我有一个`OneWayToSource`绑定，但我希望绑定仅在`RadExpander`展开时发生，而不是在折叠时发生。

有没有办法可以有条件地绑定两个 UI 元素？

**编辑**：（让一些反对者高兴的示例代码）

```
<DataTemplate x:Key="ListBoxItemTemplate" DataType="{x:Type telerik:RadListBoxItem}">
    <!--<DataTemplate.Triggers>
        <DataTrigger Binding="{Binding ElementName=listExpander, Path=IsExpanded, Mode=TwoWay}" Value="True">
            <Setter Property="IsSelected" Value="True" />
        </DataTrigger>
    </DataTemplate.Triggers>-->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <telerik:RadExpander x:Name="listExpander"
                             IsExpanded="{Binding Mode=TwoWay, IsAsync=True, Path=IsSelected, RelativeSource={RelativeSource AncestorType=telerik:RadListBoxItem, Mode=FindAncestor}}"
                             VerticalContentAlignment="Top" ToolTip="Double click on the List name to edit it">
            <telerik:RadExpander.Header>
                <Grid>
                    <TextBlock x:Name="listNameCaption" MouseDown="listName_txtblk_MouseDown"
                               Text="{Binding ListName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource HighlightedDetailsStyleForTextBlock}" />
                    <TextBox LostFocus="listName_txtbox_LostFocus" Visibility="Collapsed"
                             Text="{Binding ListName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource HighlightedDetailsStyleForTextBox}" />
                </Grid>
            </telerik:RadExpander.Header>
            <telerik:RadExpander.Content>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Border BorderBrush="#FFDADADA" BorderThickness="0,0,1,1" MinHeight="20" MinWidth="200" CornerRadius="3" Margin="5">
                        <Border BorderBrush="#B2ADBDD1" BorderThickness="1" CornerRadius="2">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <Label FontFamily="Segoe UI" FontSize="11" Content="List Type:" FontStyle="Italic" />
                                    <Label FontFamily="Segoe UI" FontSize="11" Content="{Binding ListType}" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <Label FontFamily="Segoe UI" FontSize="11" Content="Tree:" FontStyle="Italic" />
                                    <Label FontFamily="Segoe UI" FontSize="11" Content="{Binding TreeName}" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <Label FontFamily="Segoe UI" FontSize="11" Content="Discount Date:" FontStyle="Italic" />
                                    <Label FontFamily="Segoe UI" FontSize="11" Content="{Binding DiscountDate}" />
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Border>
                </Grid>
            </telerik:RadExpander.Content>
            <!--<telerik:RadExpander.Style>
                <Style TargetType="{x:Type telerik:RadExpander}">
                    <Style.Triggers>
                        <Trigger Property="IsExpanded" Value="True">
                            <Setter Property="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem, Mode=FindAncestor}, Path=IsSelected}" Value="True"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </telerik:RadExpander.Style>-->
        </telerik:RadExpander>
    </Grid>
</DataTemplate>

<telerik:RadListBox x:Name="allListBox"
                    Style="{StaticResource ListBoxStyle}"
                    ItemsSource="{Binding Lists, Mode=TwoWay}"
                    ItemTemplate="{StaticResource ListBoxItemTemplate}"
                    SelectedItem="{Binding SelectedListItem, Mode=TwoWay}">
    <telerik:RadListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel Orientation="Vertical" />
        </ItemsPanelTemplate>
    </telerik:RadListBox.ItemsPanel>
</telerik:RadListBox> 
```

**编辑 2**：

修复了它，但来自后面的代码。希望有一种更简洁的方式，我们可以只说：“RadExpander - 仅当您从 XAML 获得 IsExpanded=True 时，您才绑定到 RadListBoxItem 的 IsSelected 属性”。

这是解决方法代码：

```
private void ListItemExpanded(object sender, RadRoutedEventArgs e)
{
    var listItem = sender as RadExpander;
    if(listItem == null)
        return;

    if (!listItem.IsExpanded) return;

    var parent = VisualTreeHelper.GetParent(listItem);
    while (parent != null && !(parent is RadListBoxItem))
    {
        parent = VisualTreeHelper.GetParent(parent);
    } 

    if(parent == null)
        return;

    var listBoxItem = parent as RadListBoxItem;
    if (!listBoxItem.IsSelected)
        listBoxItem.IsSelected = true;
} 
```

和

```
<telerik:RadExpander x:Name="listExpander" Expanded="ListItemExpanded" VerticalContentAlignment="Top" ToolTip="Double click on the List name to edit it"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:29:25.627

解决方案 1\. 响应展开事件并通过代码更改元素的绑定。

解决方案 2：使用 MultiBinding 和 IMultiValueConverter：[http ://www.switchonthecode.com/tutorials/wpf-tutorial-using-multibindings](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-multibindings)

# python - python中sqlite的嵌套插入和选择子句中的反逗号

> ID：13170789
> 
> 赞同：1
> 
> 时间：2012-11-01T04:04:10.427
> 
> 标签：python, sqlite

我在以下 sqlite 语句中放置正确的 qoutes 时遇到问题，该语句将客户表的主键 customer id(c_id) 放入地点表的外键 c_id 中。

我可以通过取消嵌套代码来提取 c_id，并分别执行“从 fname =？的客户中选择 c_id”部分。但是我希望我的代码更简洁。

```
t = (fname,)
place = (postal_code , place_name)
cur.execute(""insert into place(postal_code ,place_name,c_id) values(?,?,("select c_id from customers where fname =?"),t)""",place) 
```

引号全部不合适，感谢您的帮助以进行修复。

顺便说一句：这个问题与这个问题[Insert Data Into Tables Linked by Foreign Key](https://stackoverflow.com/questions/1997998/insert-data-into-tables-linked-by-foreign-key)类似，我从中复制了嵌套的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:10:07.530

我完全在这里猜测，但你有没有尝试过。

```
cur.execute("insert into place(postal_code ,place_name,c_id) values(?,?,(select c_id from customers where fname = ?))", (postal_code , place_name, fname)) 
```

**编辑** 看到这个问题[插入...值（SELECT ... FROM ...）](https://stackoverflow.com/questions/25969/sql-insert-into-values-select-from)

```
INSERT INTO TableA (colA, colB, colC) SELECT ?, ?, (SELECT c_id FROM customers WHERE fname = ?) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:45:08.487

这个问题的解决方法不是放适量的报价，而是用sqlite语句的形式。

一种解决方案是用三个值设计变量place，其中一个带有客户id（c_id）的外键

```
place = (postal_code , place , f_name) 

cur.execute("insert into place(postal_code ,place,f_name) values(?,?,(select c_id from customers where fname =?))",place) 
```

# mysql - 如何将匹配“x”的行中的所有字段更新为“y”而不单独循环遍历每个字段？

> ID：13170790
> 
> 赞同：2
> 
> 时间：2012-11-01T04:04:12.917
> 
> 标签：mysql, sql-update

我很好奇是否可以在 MySQL 中一次用新值更新一行中的所有匹配字段。

我知道我可以`ALTER TABLE`用来更改默认值，但我只对一行感兴趣，而不是更改整个表的默认值。如有必要，我可以循环遍历每一个，但我很好奇是否有一种方法可以更优雅地完成此任务。

想象一下我的行看起来像这样：

```
| 1 | Joe | Smith | null | X | X | X | Y | X | Y | Y | X | null | Y | X | null | 
```

是否可以一次更新所有匹配`X`的字段`Y`？

所以结果看起来像这样：

```
| 1 | Joe | Smith | null | Y | Y | Y | Y | Y | Y | Y | Y | null | Y | Y | null | 
```

（假设`1`是主键，id ...如果有帮助的话）

这可以只用一个`UPDATE`查询来完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T04:19:51.577

如果它们是“x”，这会将所有列的值更改为“y”，否则保持不变。

```
update mytable set
col1 = if(col1 = 'x', 'y', col1),
col2 = if(col2 = 'x', 'y', col2),
col3 = if(col3 = 'x', 'y', col3),
...
where id = ?; 
```

实际上，否则它会将其更新为原始值，但在语义上与保持不变相同，并且在 mysql 中是相同的（即它无论如何都不算​​作“更新”）

# php - 在 Magento 中使用缩略图切换基本图像

> ID：13170795
> 
> 赞同：2
> 
> 时间：2012-11-01T04:04:31.940
> 
> 标签：php, javascript, jquery, image, magento

在定制的产品视图页面上，我正在处理基本图像（大图像）和缩略图列表，这些缩略图是与媒体库中的产品相关联的其他图像（它们只是普通图像，而不是定义的缩略图），我的任务是获取它，以便当您单击缩略图时，它会更改上面的基本图像

我有这个工作但是我有一个问题，当我更改图像时，它更改为非常像素化的图像，基本图像最初是 737x578，所以我知道如果图像更小它会被拉伸，但是缩略图来自的图像与原始基本图像的大小大致相同，只是它们已重新调整为 48x48

查看 Firefox 中“查看图像信息”中的信息表明图像的 src 来自 magento 缓存（media/catalog/product/cache/1/thumbnail/48x/9df78eab33525d08d6e5fb8d27136e95/images/），而不是来自我拥有的原始文件在媒体文件夹中

基础图像是这样创建的

```
<a class="product-image image-zoom" id="main-image" title="<?php echo $this->htmlEscape($_product->getImageLabel()); ?>" href="<?php echo $this->helper('catalog/image')->init($_product, 'image'); ?>">
    <?php
        $_img = '<img src="'.$this->helper('catalog/image')->init($_product, 'image')->resize(737, 578).'" width="737" height="578" alt="'.$this->htmlEscape($_product->getImageLabel()).'" title="'.$this->htmlEscape($_product->getImageLabel()).'" />';
        echo $_helper->productAttribute($_product, $_img, 'image');
    ?>
</a> 
```

当缩略图像这样生成时

```
<ul id="image-list">
    <?php foreach ($this->getGalleryImages() as $_image): ?>
        <li>
            <img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(48); ?>" width="48" height="48" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" />

        </li>
    <?php endforeach; ?>
</ul> 
```

这是我用来切换图像的javascript

```
 jQuery(document).ready(function()
    {
        jQuery("#image-list li img").click(function()
        {
            jQuery("#main-image img").attr("src", jQuery(this).attr("src"));
        });
    }); 
```

为了用缩略图使用的原始图像替换基本图像，我需要对我的 javascript 进行什么更改，显然仅更改标记中的 src 属性是不够的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T04:25:37.853

当您单击缩略图时，您的 jQuery 会将主图像的 src 设置为缩略图 src（即 48x48）。单击缩略图应将主图像设置为缩略图图像的大尺寸。

因此，您需要一种从缩略图图像元素中引用大图像 src 的方法。您可以在缩略图元素中创建一个名为 data-main-image-src 的属性，以便稍后在 jQuery 中引用它：

```
<ul id="image-list">
    <?php foreach ($this->getGalleryImages() as $_image): ?>
        <li>
            <img data-main-image-src="<?php echo $this->helper('catalog/image')->init($_product, 'image')->resize(737, 578)?>" src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(48); ?>" width="48" height="48" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" />
        </li>
    <?php endforeach; ?>
</ul> 
```

然后你会像这样修改你的 jQuery，以便将主图像 src 更改为更大的图像：

```
jQuery(document).ready(function()
{
    jQuery("#image-list li img").click(function()
    {
        jQuery("#main-image img").attr("src", jQuery(this).attr("data-main-image-src"));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-11T10:05:04.357

Manishie 的回答几乎对我有用，我猜 Magento 1.9 版的情况可能会有所不同。我已将 PHP 更新如下：

```
<ul class="product-image-thumbs">
    <?php $i=0; foreach ($this->getGalleryImages() as $_image): ?>
        <?php if ($this->isGalleryImageVisible($_image)): ?>
            <li>
                <img data-main-image-src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'large', $_image->getFile())->resize(560, 393)?>" src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(75); ?>" width="75" height="75" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" />
            </li>
        <?php endif; ?>
    <?php $i++; endforeach; ?>
</ul> 
```

主要变化在于我如何调用`data-main-image-src`由于某种原因，Manishie 的版本正在为每个拇指调用当前主 img 的 src。相反，我使用了他在拇指中调用的相同方法，但改为调用大图像：

```
data-main-image-src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'large', $_image->getFile())->resize(560, 393)?>" 
```

jQuery 很好，我只需要更新目标类：

```
$j(".product-image-thumbs li img").click(function(){
    $j("#image-main").attr("src", $j(this).attr("data-main-image-src"));
}); 
```

# javascript - 使用Jquery从对话框中获取表单元素

> ID：13170797
> 
> 赞同：0
> 
> 时间：2012-11-01T04:04:33.017
> 
> 标签：javascript, jquery, dialog, salesforce

我在标准的销售人员页面上使用 jQuery。我只能将我的 jQuery 脚本放在主页上。当我单击内联编辑元素时，会打开一个对话框，该对话框有几个输入字段。我想知道如何从放置在主页中的 jQuery 访问对话框中的输入字段。

请帮忙！！

问候萨米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:12:20.063

本教程可能会帮助您从某个地方开始：[http ://www.youtube.com/watch?v=b16V25eNyJY&feature=relmfu](http://www.youtube.com/watch?v=b16V25eNyJY&feature=relmfu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:07:33.517

如果您粘贴代码，我们可以准确地向您展示。您可以通过例如指定它的 id 来访问它：

```
$("#the_id_element") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:07:37.027

```
<html lang="en">
<head>
  <title></title>
  <link type="text/css" href="js/themes/base/ui.all.css" rel="stylesheet" />
  <script type="text/javascript" src="js/jquery-1.3.2.js"></script>
  <script type="text/javascript" src="js/ui/ui.core.js"></script>
  <script type="text/javascript" src="js/ui/ui.dialog.js"></script>
  <script type="text/javascript" src="js/ui/ui.resizable.js"></script>
  <script type="text/javascript" src="js/ui/ui.draggable.js"></script>
  <link type="text/css" href="js/demos.css" rel="stylesheet" />
  <script type="text/javascript">
    $(function() {
        var cancel = function() {
            $("#myDialog").dialog("close");
        }
        var getResponse = function(){
          var answer;
          $("input").each(function(){
            (this.checked == true) ? answer = $(this).val() : null;
          });
          $("<p>").text(answer).insertAfter($("#poll"));
          $("#myDialog").dialog("close");
        }
        var dialogOpts = {
          modal: true,
          buttons: {
            "Done": getResponse,
            "Cancel": cancel
          },
          autoOpen: false
        };
        $("#myDialog").dialog(dialogOpts);
        $("#poll").click(function() {
          $("#myDialog").dialog("open");
        });  
    });
  </script>
</head>
<body>
    <button id="poll">Poll</button>
    <div id="myDialog" class="flora" title="This is the title">
      <p>Question?</p>
      <label for="yes">Yes!</label><input type="radio" id="yes" value="yes" name="question"><br>
      <label for="no">No!</label><input type="radio" id="no" value="no" name="question">
    </div>
</body>
</html> 
```

# c# - IntPtr 和 UIntPtr 的区别

> ID：13170801
> 
> 赞同：13
> 
> 时间：2012-11-01T04:05:29.680
> 
> 标签：c#, .net, pointers, intptr

[`RegOpenKeyEx`](http://www.pinvoke.net/default.aspx/advapi32/RegOpenKeyEx.html)当我注意到页面上的这条评论时，我正在查看 P/Invoke 声明：

> 更改`IntPtr`为`UIntPtr`：当`IntPtr`为句柄调用时，您将遇到溢出。`UIntPtr`如果您希望它在 32 位和 64 位平台上正常工作，是正确的选择。

这对我来说没有多大意义：两者`IntPtr`都`UIntPtr`应该表示指针，因此它们的大小应该与操作系统的位数相匹配——32 位或 64 位。由于这些不是数字而是指针，因此它们的带符号数值无关紧要，只有表示它们指向的地址的位。我想不出为什么这两者之间会有区别，但是这个评论让我不确定。

是否有特定的理由使用`UIntPtr`而不是`IntPtr`？根据[文档](http://msdn.microsoft.com/en-us/library/system.uintptr%28v=vs.80%29.aspx)：

> `IntPtr`类型符合 CLS，而类型`UIntPtr`不符合。只有`IntPtr`类型在公共语言运行时中使用。提供该`UIntPtr`类型主要是为了与该类型保持体系结构对称`IntPtr`。

当然，这意味着没有区别（只要有人不尝试将值转换为整数）。那么上面来自 pinvoke.net 的评论不正确吗？

**编辑**：

~~在阅读[了 MarkH 的回答](https://stackoverflow.com/a/13171595/682404)后，我做了一些检查，发现 .NET 应用程序不支持大地址，在 32 位模式下编译时只能处理 2GB 的虚拟地址空间。（可以使用[hack](https://stackoverflow.com/questions/1346480/how-to-make-a-net-application-large-address-aware)来打开大地址感知标志，但 MarkH 的回答表明 .NET Framework 内部的检查会破坏事情，因为地址空间被假定为只有 2GB，而不是 3GB。）~~

~~这意味着指针可以拥有的所有正确虚拟内存地址（就 .NET Framework 而言）将介于 0x00000000 和 0x7FFFFFFF 之间。当这个范围被转换为有符号`int`时，没有值会是负数，因为最高位没有设置。这强化了我的信念，即使用 IntPtr 和 UIntPtr 没有区别。我的推理正确吗？~~

Fermat2357 指出上面的编辑是错误的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T05:05:43.833

`UIntPtr`并`IntPtr`在内部实现为

```
private unsafe void* m_value; 
```

您都是对的，只是只管理代表地址的位。

我唯一能想到的溢出问题是如果您尝试执行指针算术。这两个类都支持添加和减去偏移量。但在这种情况下，在这种操作之后二进制表示也应该没问题。

根据我的经验，我也更喜欢`UIntPtr`，因为我认为指针是无符号对象。但这无关紧要，只是我的意见。

`IntPtr`如果您使用或`UIntPtr`在您的情况下，它似乎没有任何区别。

编辑：

`IntPtr`是符合 CLS 的，因为 CLR 之上的某些语言不支持无符号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T05:43:33.020

> 当然，这意味着没有区别（只要有人不尝试将值转换为整数）。

不幸的是，框架试图准确地做到这一点（当专门为 x86 编译时）。`IntPtr(long)`构造函数和方法都`ToInt32()`尝试将值转换为`int`表达式`checked`中的 an。这是使用框架调试符号时看到的实现。

```
 public unsafe IntPtr(long value)
    { 
        #if WIN32
            m_value = (void *)checked((int)value);
        #else
            m_value = (void *)value; 
        #endif
    } 
```

当然，如果值超出范围，检查表达式将抛出异常。相同的`UIntPtr`值不会溢出，因为它会尝试转换为`uint`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T09:40:34.520

IntPtr\UIntPtr 之间的差异与 Int32\UInt32 之间的差异相同（即，这完全取决于如何解释数字。）

通常，您选择哪个并不重要，但如前所述，在某些情况下，它可能会回来咬您。

（我不确定为什么 MS 选择 IntPtr 以（CLS 合规性等）开头，内存作为 DWORD（u32）处理，这意味着它是无符号的，因此，首选方法应该是 UIntPtr，而不是 IntPtr，对吗？ )

偶数：UIntPtr.Add()

对我来说似乎是错误的，它需要一个 UIntPtr 作为指针，以及一个“int”作为偏移量。（什么时候，对我来说，'uint' 会更有意义。为什么要将有符号值提供给无符号方法，当代码很可能将其转换为引擎盖下的 'uint' 时。/facepalm）

我个人更喜欢 UIntPtr 而不是 IntPtr 仅仅是因为无符号值与我正在使用的底层内存的值匹配。:)

* * *

顺便说一句，我最终可能会创建自己的指针类型（使用 UInt32），专门为直接使用内存而构建。（我猜 UIntPtr 不会捕获所有可能的坏内存问题，即 0xBADF00D 等，等等。这是一个等待发生的 CTD ......我将不得不看看内置类型首先处理事情，希望空\零检查正确过滤掉这样的东西。）

# haskell - 键入代数和 Knuth 的向上箭头符号

> ID：13170803
> 
> 赞同：17
> 
> 时间：2012-11-01T04:05:59.557
> 
> 标签：haskell, types, functional-programming, algebraic-data-types

通读[这个问题](https://stackoverflow.com/questions/9190352/abusing-the-algebra-of-algebraic-data-types-why-does-this-work)和[这篇博文](http://www.haskellforall.com/2012/01/haskell-for-mainstream-programmers.html)让我对类型代数有了更多的思考，特别是如何滥用它。

基本上，

1）我们可以将`Either A B`类型视为加法：`A+B`

2）我们可以将有序对`(A,B)`视为乘法：`A*B`

3）我们可以把函数想象`A -> B`成幂：`B^A`

这里有一个明显的模式：乘法是重复加法，求幂是重复乘法。这导致[Knuth 定义了向上箭头](https://en.wikipedia.org/wiki/Knuth's_up-arrow_notation)↑ 定义为取幂，↑↑ 定义为重复取幂，↑↑↑ 定义为重复 ↑↑，依此类推。因此，10↑↑↑↑10 是一个巨大的数字。

我的问题是：函数↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑如何用代数数据类型表示？似乎 ↑ 应该是一个具有无限个参数的函数，但这没有多大意义。`A↑B`将只是是，`[A] -> B`因此`A↑↑↑↑B`是？`[[[[A]]]]->B`

如果您能解释[阿克曼函数](https://en.wikipedia.org/wiki/Ackermann_function)的外观或任何其他[超增长函数](http://www.mrob.com/pub/math/largenum.html)，则可以加分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T07:51:36.923

# android - Android重绘覆盖透明位图

> ID：13170804
> 
> 赞同：1
> 
> 时间：2012-11-01T04:06:12.590
> 
> 标签：android, bitmap, drawing

我有一个透明的位图（钟面），我重新绘制它以模仿计时码表，它完美地工作（覆盖不同的表盘）使用基本的空面板 PNG，并在上面画上一些三角/高中的东西

问题：我需要循环通过这个更新针的值并覆盖几个刻度盘。它可以工作，但是我循环越多，边框就会变得粗糙，如果我使用不透明的底座面板就可以了......我一直在尝试各种事情/建议都没有成功，我需要透明度来进行覆盖。

一些调整大小继续进行，因为`ImageView`绘制它的最终尺寸可能与基本面板尺寸不同，尝试过`createScaleBitmap`，使用 Matrix 与基本面板没有区别`drawBitmap(bmp, rect1, rect2, myPaint)`

*   是否使用了`ARG_8888`创建我的位图
*   有一个方法可以正确地返回透明位图
*   我在 ImageView 上绘制这个，并`setImageBitmapm`尝试先在位图上绘制，但没有区别
*   尝试在绘制之前清除位图`dials(PorterDuff.mode)`，没有区别

Android处理透明重绘有什么技巧或未知方式吗？将 Alpha 设置为零会有什么不同吗？我的位图已经是透明的。

# c - 在 Mac OS X 10.6 上编译 SDL 2.0 时出现 libiconv 问题

> ID：13170806
> 
> 赞同：2
> 
> 时间：2012-11-01T04:06:50.460
> 
> 标签：c, makefile, sdl

我正在尝试在 OS X 10.6 上编译 SDL 2.0，但我收到了以下消息：

```
Undefined symbols:
  "_libiconv_open", referenced from:
      _SDL_iconv_string in SDL_iconv.o
      _SDL_iconv_string in SDL_iconv.o
  "_libiconv", referenced from:
      _SDL_iconv in SDL_iconv.o
      _SDL_iconv_string in SDL_iconv.o
  "_libiconv_close", referenced from:
      _SDL_iconv_string in SDL_iconv.o
      _SDL_iconv_string in SDL_iconv.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

我已经阅读了[https://github.com/mxcl/homebrew/issues/894](https://github.com/mxcl/homebrew/issues/894)上的问题以及[如何用 Mac 的默认 64 位版本替换 MacPort 的 libiconv？](https://stackoverflow.com/questions/8104889/how-to-replace-macports-libiconv-with-macs-default-64-bit-version)看看他们是否有帮助。我卸载了 MacPorts 的所有内容，因为这两个似乎表明问题与同一个库的多个版本有关（它安装的 libiconv 有太多依赖项，无法手动卸载它们，我不再需要它们了），但我仍然得到同样的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T07:47:52.727

事实证明，在卸载 MacPorts 副本后，我的计算机上仍然有 2 个不同的 libiconv 副本。一个在 /usr/lib 中，另一个在 /usr/local/lib 中。使用 /usr/lib 中的那个进行编译会产生上述错误，但是将 -L/usr/local/lib 添加到 Makefile 中的 EXTRA_LDFLAGS 变量是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-05T09:27:54.560

我找到了一个简单的解决方案。配置 SDL 源时只需添加 2 个参数：

```
./configure CPPFLAGS='-I/opt/local/include' LDFLAGS='-L/opt/local/lib' 
```

# android - 服务器客户端 android 应用程序与仅客户端

> ID：13170808
> 
> 赞同：0
> 
> 时间：2012-11-01T04:07:03.253
> 
> 标签：android, sockets, client

嗨，我对 android 编程比较陌生，我正在尝试执行以下操作。我想创建一个不需要立即响应的消息传递系统（至少现在是必要的）。我对网络/套接字编程完全陌生，但遵循了这一点：

[http://www.tutorialspoint.com/python/python_networking.htm](http://www.tutorialspoint.com/python/python_networking.htm)

并且有点理解它。

关于最佳实践，我有以下问题。

方法 A 和 B 的优缺点是什么？

方法 A：在应用程序上运行服务器和客户端。

方法 B：让客户端在应用程序上运行，并每分钟 ping 服务器以获取数据。

除了明显的方法 B 不允许实时之外，哪个更好？服务器应用程序是否占用太多内存/CPU/电池等？我知道存在很多 IM 应用程序，它们是如何工作的？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:13:29.750

为什么不使用推送通知？ [http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:19:43.840

我会推荐 Google Cloud Messaging，但上次我检查你需要一个专用服务器来安装它。还是我错了？我只有一个共享服务器，所以：

方法 A：考虑到它是移动设备，困难的部分是当您的手机更改 IP（例如另一个 wifi 网络）时保持连接处于活动状态，并且

方法 B：您可以制作一些简单的小消息，以检查是否有新内容并在这种情况下进行更新。我的应用每 30 秒发送大约 500 个字节，我没有遇到任何与电池相关的问题。它也没有减慢电话的速度。

# yacc - yacc 中的条件编译

> ID：13170812
> 
> 赞同：1
> 
> 时间：2012-11-01T04:07:42.033
> 
> 标签：yacc

如何在 yacc 中进行条件编译。类似于在 C 中使用 ifdef 完成的。
我想根据条件创建规则。yacc中可以吗？例子。基于条件规则A定义如下：

```
ruleA : A | B, /* For condition 1 */  
ruleA : C      /* If condition 1 is not satisfied */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:26:43.020

[btyacc](https://github.com/ChrisDodd/btyacc)具有基于定义标志的条件编译，类似于 C 预处理器。你可以说：

```
%ifdef VERSION_A
ruleA: A | B ;
%endif
%ifdef VERSION_B
ruleA: C ;
%endif 
```

然后使用`-DVERSION_A`or`-DVERSION_B`命令行参数来获取一个或另一个版本。它非常原始（每个 只能测试一个标志`%ifdef`，不能嵌套`%ifdef`s 并且没有`%else`），但对于简单的事情来说已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:21:28.177

如果您无法使用适当的预处理器预处理您的 Yacc 语法，那么您可以使用基于操作的解决方案：

```
ruleA : A { if  (condition1) { process OK; } else YYERROR; }
      | B { if  (condition1) { process OK; } else YYERROR; }
      | C { if (!condition1) { process OK; } else YYERROR; }
      ; 
```

YYERROR 动作触发 Yacc 的正常错误处理机制。这意味着就 Yacc 而言，您的语法必须与运行中的两组规则一起“工作”。如果这由于移位/减少（甚至减少/减少）冲突而导致复杂性，那么预处理就是要走的路。结果语法将更小，更集中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:09:09.260

我的建议是您将条件标志公开为终端符号，我们可以将其称为*模式终端。*（因此，从技术上讲，它是运行时而非编译时条件。）

您需要在每一个对解析产生影响的地方都返回模式终端。您的语法在收到额外的语法时可以忽略它。它只能在“条件 1”的情况下返回模式终端，只能在“非条件 1”的情况下返回，或者您可以在两种情况下都返回不同的终端。所以假设你有两个令牌 C1 和 C2，每个模式一个。

如果您正在解析现有的语法，这可能效果不佳，但如果您将语法和解析器一起设计，所有问题都是可以解决的。

然后你最终得到：

```
ruleA : C1 A | C1 B | C2 C ; 
```

# android - 为什么我的 Android 应用程序因某个特定库的 NoClassDefFoundError 而崩溃？

> ID：13170813
> 
> 赞同：4
> 
> 时间：2012-11-01T04:07:59.283
> 
> 标签：android

我有一个 Android 应用程序项目 (A) 和一个 Android 库项目 (L)。A 使用 L 作为库。

L 库项目已经使用了一些外部库：Apache Commons Codec 1.7、Apache Commons Lang3 3.1、Android 支持库 V4 和 ActionBarSherlock 4.0，作为库项目引用。所有这些库以及调用它们的代码都可以正常工作，并且已经正常工作了一段时间。

但是，我最近又添加了一个库：Apache Commons IO 2.4。现在，每当库代码（在 L 中）尝试调用 Commons IO 中的方法时，我的应用程序就会崩溃。

我添加 IO 库的方式与添加其他所有外部库的方式完全相同：![构建路径](../Images/30060af6e5f6ecfa6d36b647cebf671f.png)

当我的应用程序第一次启动时，我得到：

```
11-01 12:32:14.243: I/dalvikvm(3815): Could not find method org.apache.commons.io.FileUtils.copyInputStreamToFile, referenced from method au.com.grdc.alib.helpers.LibraryCommon.download
11-01 12:32:14.243: W/dalvikvm(3815): VFY: unable to resolve static method 7039: Lorg/apache/commons/io/FileUtils;.copyInputStreamToFile (Ljava/io/InputStream;Ljava/io/File;)V 
```

后来我得到：

```
11-01 14:50:48.913: E/AndroidRuntime(10030): FATAL EXCEPTION: AsyncTask #1
11-01 14:50:48.913: E/AndroidRuntime(10030): java.lang.RuntimeException: An error occured while executing doInBackground()
...
11-01 12:35:10.268: E/AndroidRuntime(4493): Caused by: java.lang.NoClassDefFoundError: org.apache.commons.io.FileUtils
11-01 12:35:10.268: E/AndroidRuntime(4493):     at au.com.grdc.alib.helpers.LibraryCommon.download(LibraryCommon.java:89) 
```

我看到有人建议将我的“lib”文件夹重命名为“libs”，我已经这样做了——这并没有解决问题。

我还看到了标记要导出的外部库的建议，我也这样做了，但也没有解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T00:01:56.420

1.  更新你的 eclipse-android-plugin 和 android-tools (他们已经改变了库的处理方式)
2.  确保您的项目中有“libs”（不是“lib”）文件夹。
3.  将所有库 jar 放在“libs”文件夹中。
4.  确保“libs”文件夹中的库 jar 没有像在普通 java 项目中那样添加到构建路径中。Android 会自动添加它们。如果您查看项目 > 属性 > Java 构建路径 > 库：
    1.  确保顶层没有显示任何一个库 jar（否则将其删除）
    2.  检查是否有一个名为“Android Dependencies”的自动创建的顶级依赖组。
    3.  检查 libs 文件夹中的所有 jar 是否已自动添加到“Android Dependencies”组

对 (A) 和 (L) 执行上述步骤。

还要确保 (A) 对 (L) 没有纯 java 样式的项目依赖项。Project > Properties > Java Build Path > Projects for (A) 不应列出 (L)，否则删除。

确保在库部分项目 (L) 中列出 Project > Properties > Android for (A)，否则添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:47:20.390

可能是 org.apache.commons.io.FileUtils 存在于多个 jar 中，并且 JVM 无法解析使用哪一个 .. 你能交叉检查一下吗？

# apache - 什么是 .htaccess 文件？

> ID：13170819
> 
> 赞同：41
> 
> 时间：2012-11-01T04:08:34.620
> 
> 标签：apache, .htaccess, webserver

我是 Zend 框架的初学者，我想了解更多关于**.htaccess 文件及其用途的**信息。有人可以帮助我吗？

我发现了一个这样的例子：

.htacess 文件

```
AuthName "Member's Area Name"  
AuthUserFile /path/to/password/file/.htpasswd  
AuthType Basic  
require valid-user  
ErrorDocument 401 /error_pages/401.html  
AddHandler server-parsed .html 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-01T04:10:20.960

它不是 PHP 的一部分；它是 Apache 的一部分。

[http://httpd.apache.org/docs/2.2/howto/htaccess.html](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

> .htaccess 文件提供了一种基于每个目录进行配置更改的方法。

本质上，它允许您采用通常放在 Apache 主配置文件中的指令，并将它们放在特定于目录的配置文件中。它们主要用于您无法访问主要配置文件（例如共享主机）的情况。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-01T04:13:14.090

> **.htaccess**是一个配置文件，用于运行 Apache Web Server 软件的 Web 服务器。

当 .htaccess 文件被放置在一个目录中时，该目录又“通过 Apache Web 服务器加载”，然后 .htaccess 文件被 Apache Web 服务器软件检测并执行。

这些 .htaccess 文件可用于更改 Apache Web 服务器软件的配置，以启用/禁用 Apache Web 服务器软件必须提供的附加功能和特性。

这些设施包括基本的重定向功能，例如，如果发生 404 文件未找到错误，或者更高级的功能，如内容密码保护或图像热链接预防。

每当任何请求发送到服务器时，它总是通过 .htaccess 文件。定义了一些规则来指导工作。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-09-16T05:58:20.630

以下是服务器中 htaccess 文件的一些用法：

**1) AUTHORIZATION, AUTHENTICATION：** .htaccess 文件通常用于指定特定目录的安全限制，因此文件名为“access”。.htaccess 文件通常伴随着一个 .htpasswd 文件，该文件存储有效的用户名及其密码。

**2) 自定义错误响应：**更改发生服务器端错误时显示的页面，例如 HTTP 404 Not Found。示例：错误文档 404 /notfound.html

**3) 重写 URL：**服务器经常使用 .htaccess 将“丑陋”的 URL 重写为更短更漂亮的 URL。

**4) 缓存控制：** .htaccess 文件允许服务器控制 Web 浏览器使用的用户代理缓存，以减少带宽使用、服务器负载和感知滞后。

更多信息：[http ://en.wikipedia.org/wiki/Htaccess](http://en.wikipedia.org/wiki/Htaccess)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T04:16:05.557

您可以使用**php_value**更改 .htaccess 文件中的 php 设置。和 php.ini 一样。

例子：

```
php_value date.timezone Asia/Kuala_Lumpur 
```

对于其他 php 设置，请阅读[http://www.php.net/manual/en/ini.list.php](http://www.php.net/manual/en/ini.list.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-14T10:13:50.880

htaccess 是 apache 的一个配置文件，用于在目录基础上对配置进行更改。Htaccess 文件用于更改 apache 服务器的功能和特性。Htaccess 用于重写 URL。它用于使站点地址受到保护。还要限制 IP 地址，因此特定 IP 地址站点将不会被打开

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T04:14:06.880

你可以认为它就像 php.ini 文件的子文件.. php.ini 文件存储了大部分关于 php 的配置，如 curl enable disable。其中 .htaccess 仅针对特定目录进行此设置，并为其服务器的所有目录设置 php.ini 文件存储设置...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-24T07:57:59.797

向人们说出会议或特定项目或产品的特定地址并不容易。防止诸如 SQL 注入攻击等黑客攻击可能更安全。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-14T06:00:08.573

# .htaccess 文件在目录 /var/www/html/.htaccess 中创建

```
<IfModule mod_rewrite.c>

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-13T11:55:42.297

## 什么

*   服务器的设置文件
*   最终用户无法访问
*   无需重启服务器，更改立即生效
*   它可以作为您的代码和服务器之间的桥梁

## 我们能做的

*   网址重写
*   自定义错误页面
*   缓存
*   重定向
*   屏蔽ip

# r - R不等式运算符错误？

> ID：13170820
> 
> 赞同：1
> 
> 时间：2012-11-01T04:08:38.103
> 
> 标签：r, inequality

> **可能重复：**
> [R中的数字比较困难](https://stackoverflow.com/questions/2769510/numeric-comparison-difficulty-in-r)

我正在使用 R 2.15.2 并在 R 不等式运算符中发现了一个不寻常但严重的错误。

```
> 0.015 -0.005 
[1] 0.01
> 0.015 - 0.005 == 0.01
[1] FALSE
> 0.025 - 0.005 == 0.02
[1] TRUE 
```

这可能吗？

只有当我与 比较时才会发生这种`0.015 - 0.005`情况`0.01`。

有任何想法吗？

用你的电脑试试这个，看看这真的发生了！

谢谢，那我该怎么办？

```
> 0.015 - 0.005 < 0.01 
[1] TRUE 
> 0.025 - 0.005 < 0.02 
[1] FALSE 
> 
```

# vb.net - 如何通过函数调用表值

> ID：13170826
> 
> 赞同：0
> 
> 时间：2012-11-01T04:09:04.323
> 
> 标签：vb.net

使用 VB.Net

我想编写一个函数或子过程来调用表值

我有 n 个文本框，每个文本框我想填充不同的值，我不想为每个文本框离开事件编写重复的代码，而不是我可以在每个文本框离开事件上调用函数或子过程。每个文本框的值都是不同的。

哪个是最好的建议..？怎么做。

任何人都可以帮助我并提供一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:01:45.037

什么表？数据表还是datagridvew？

如果它是datagridview，这里是一个示例：

```
Function getValueFromDG(ByVal colIndex As Integer, ByVal rowIndex As Integer, ByVal dg As DataGridView) As String

return dg.Item(ColIndex, rowIndex).ToString

End Function 
```

数据表：

```
Function getValueFromDT(ByVal colIndex As Integer, ByVal rowIndex As Integer, ByVal dt As DataTable) 
 dg.Item(ColIndex, rowIndex) As String

 return myDataTable.Rows.Item(rowIndex).Item(colIndex ).ToString()

End Function 
```

之后，您可以在文本框事件上调用它：

```
tb1.Text = getValueFromDG(0,0,myDG)  
tb2.Text = getValueFromDG(0,2,myDG) 
```

这只是一个基本的，你可以即兴发挥。

对不起，如果它没有帮助。

# c# - 重新启动 C# 应用程序而不实际关闭和重新打开？

> ID：13170827
> 
> 赞同：4
> 
> 时间：2012-11-01T04:09:11.063
> 
> 标签：c#, restart

如何让我的所有内部代码像使用 Application.Restart() 一样工作，但实际上不必关闭并重新打开程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:58:21.590

根据您的应用程序的设计，它可以像启动主表单的新实例并关闭任何现有的表单实例一样简单。表单变量之外的任何应用程序状态也需要重置。对于听起来像您正在搜索的应用程序，没有神奇的“重置”按钮。

一种方法是添加一个循环以`Program.cs`在“重置”后表单关闭时保持应用程序运行：

```
static class Program
{
    public static bool KeepRunning { get; set; }

    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        KeepRunning = true;
        while(KeepRunning)
        {
            KeepRunning = false;
            Application.Run(new Form1());
        }
    }
} 
```

并在您的表单（或工具栏等）中将`KeepRunning`变量设置为`true`：

```
private void btnClose_Click(object sender, EventArgs e)
{
    // close the form and let the app die
    this.Close();
}

private void btnReset_Click(object sender, EventArgs e)
{
    // close the form but keep the app running
    Program.KeepRunning = true;
    this.Close();
} 
```

# javascript - 运行 HTML5 Web Worker 时 Google Chrome 无响应

> ID：13170828
> 
> 赞同：1
> 
> 时间：2012-11-01T04:09:16.043
> 
> 标签：javascript, performance, html, google-chrome, web-worker

我正在使用以下代码运行 webworker 以在最新的 Google Chrome 的网页中使用质数

[https://dl.dropbox.com/u/655237/project/prime.html](https://dl.dropbox.com/u/655237/project/prime.html)

但是，在单击启动 Worker 按钮后，停止按钮会在一段时间内无响应。大约 30 秒后，它在鼠标悬停时变为活动状态。这在 Firefox 中不会发生。

代码中是否有任何缺陷？

**素数.html**

```
 <section>
            Last Prime Found:-  <p id="number">NA</p>
            <button id="prime">Find &nbsp; Prime</button>
            <button id="primew">Start &nbsp;Worker</button>
            <button id="primes">Stop &nbsp;Worker</button>
        </section>
        <script>
            var worker;
            document.querySelector('#prime').addEventListener('click', function () {
                findPrime();
            }, false);
            document.querySelector('#primew').addEventListener('click', function () {
                findPrimeW();
            }, false);
            document.querySelector('#primes').addEventListener('click', function () {
                stopWorker();
            }, false);

            function findPrime(){
                var n = 1;
                search: while (true) {
                    n += 1;
                    for (var i = 2; i <= Math.sqrt(n); i += 1)
                        if (n % i == 0)
                            continue search;
                    // found a prime!
                    document.querySelector("#number").textContent=n;
                }
            }
            function findPrimeW(){
                worker = new Worker('js/worker1.js');
                worker.onmessage = function (event) {
                    document.querySelector("#number").textContent = event.data;
                };
            }

            function stopWorker()
            { 
                worker.terminate();
            }
        </script> 
```

**worker1.js**

```
 var n = 1;
search: while (true) {
  n += 1;
  for (var i = 2; i <= Math.sqrt(n); i += 1)
    if (n % i == 0)
     continue search;
  // found a prime!
  postMessage(n);
} 
```

另一个例子是这个 [https://dl.dropbox.com/u/655237/events/gdg-html5/index.html#/webworkers](https://dl.dropbox.com/u/655237/events/gdg-html5/index.html#/webworkers)

单击“Start Worker”按钮后，您将有一段时间无法更改幻灯片。理想情况下，它不应该发生，因为重量级计算被委派给单独的网络工作者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T23:50:13.113

我相信这个对话在这里是相关的：[https ://code.google.com/p/chromium/issues/detail?id=85686](https://code.google.com/p/chromium/issues/detail?id=85686)

在自己尝试之后，[LatinSuD 的评论](https://code.google.com/p/chromium/issues/detail?id=85686#c4)似乎是正确的：

> 我想我有一个解释。工作人员和主页之间的通信过多。我将worker修改为每1000只报告一个素数，并且运行流畅。那种“最初的数百万中素数密度太高”。

# jekyll - 断言失败 md - Jekyll

> ID：13170830
> 
> 赞同：1
> 
> 时间：2012-11-01T04:09:26.737
> 
> 标签：jekyll, redcarpet

我最近注意到我的 Jekyll 网站完全是空白的。当我在本地运行 jekyll 服务器时，它可以正常启动，但是当我更改文件时，它会失败。我记得做的唯一不同寻常的事情是使用 Redcarpet。

```
~/code/ryanjm[temp*]% jekyll --server        
Configuration from /Users/ryanjm/code/ryanjm/_config.yml
Auto-regenerating enabled: /Users/ryanjm/code/ryanjm -> /Users/ryanjm/code/ryanjm/_site
[2012-10-31 22:01:27] regeneration: 49 files changed
[2012-10-31 22:01:28] INFO  WEBrick 1.3.1
[2012-10-31 22:01:28] INFO  ruby 1.9.3 (2012-04-20) [x86_64-darwin11.4.0]
[2012-10-31 22:01:28] INFO  WEBrick::HTTPServer#start: pid=41778 port=4000
[2012-10-31 22:01:32] regeneration: 1 files changed
Assertion failed: (md->work_bufs[BUFFER_BLOCK].size == 0), function sd_markdown_render, file markdown.c, line 2528.
[1]    41778 abort      jekyll --server 
```

任何人都知道如何解决这个问题？

如果你想看的话，我在[github](https://github.com/ryanjm/ryanjm.github.com)上有我的项目。

我正在使用 rbenv 和 1.9.3-p194。

# c++ - 令牌之前的预期不合格 ID

> ID：13170832
> 
> 赞同：0
> 
> 时间：2012-11-01T04:09:42.917
> 
> 标签：c++

编辑：我看过的网站之一让我相信我的语法是正确的：[http ://www.cprogramming.com/tutorial/templates.html](http://www.cprogramming.com/tutorial/templates.html)

在来这里问这个问题之前，我已经在谷歌周围进行了很多探索，因为据我所知，我已经根据我所看到的例子正确地写了一些东西。对于家庭作业，编写一个模板类来处理一些非常基本的数学内容（总和、平均值、最小值、最大值等）。当我尝试编译以尝试开始调试时，最终出现以下错误。

```
error: expected unqualified-id before '<' token 
```

以下是错误代码块之前的代码、原型和几行代码。代码在第二行抛出错误（以 lessthansymbol myType greaterthansymbol 开头的错误）。我敢肯定，一旦我克服了这个问题，我将有更多的东西可以用程序进行调试，但这完全让我受不了。

```
template <class myType>
class simpleSet
{
    public:

    static const int VALUE_MAX = 1000;
    static const int CNT_MIN = 10;
    static const int CNT_MAX = 500;

    simpleSet();
    simpleSet(int, myType[]);
    ~simpleSet();
    void gnomeSort();
    void generateNewSet(int);
    myType minimum() const;
    myType maximum() const;
    myType median() const;
    myType sum() const;
    myType average() const;
    myType linearRegression(const simpleSet&) const;
    myType getDatum(int) const;
    void setDatum(int, myType);
    int getLength() const;
    void printSet() const;
    int readCount();

private:

    int setLength;
    myType *mySet;
};

template <class myType>
void simpleSet<myType>::generateNewSet(int size)
{
    setLength = size;
    for (int i = 0; i < setLength; i++)
    {
        mySet[i] = static_cast<myType>((myType(rand()%VALUE_MAX)));
        if (mySet[i] < 1 || mySet[i] > VALUE_MAX)
        {
            i--;
            continue;
        }
    }
}

template <class myType>
<myType> simpleSet<myType>::maximum() const
{
    myType worker = mySet[0];
    for (int i = 0; i < setSize; i++)
    {
        if (worker < mySet[i]) worker = mySet[i];
    }
    return worker;
}

template <class myType>
<myType> simpleSet<myType>::minimum() const
{
    myType worker = mySet[0];
    for (int i = 0; i < setSize; i++)
    {
        if (worker > mySet[i]) worker = mySet[i];
    }
    return worker;
}

template <class myType>
<myType> simpleSet<myType>::median() const
{
    if (setSize == 1) return mySet[0];
    else if ((setSize % 2) == 1) return (mySet[(setSize/2)]);
    else return (average((mySet[setSize/2] + mySet[(setSize/2)-1])));
}

template <class myType>
<myType> simpleSet<myType>::sum() const
{
    myType temp;
for (i = 0; i < setSize; i++) temp = temp + mySet[i];
return temp;
}

template <class myType>
<myType> simpleSet<myType>::average() const
{
    return (mySet.sum()/setSize);
}

template <class myType>
<myType> simpleSet<myType>::getDatum(int item) const
{
    return(myset[item]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:16:24.823

您不需要`<myType>`所有的返回值。只是`myType`（没有尖括号）也不需要包含`<myType>`在类范围内（即`myType simpleSet::median()`.

# json - CouchDB 批量文档 API 上的 UTF-8 JSON 无效

> ID：13170841
> 
> 赞同：1
> 
> 时间：2012-11-01T04:10:56.167
> 
> 标签：json, node.js, couchdb

我有一个节点控制台应用程序，我试图将一些记录发布到本地 CouchDB 实例上的批量文档 api 并获得“无效的 UTF-8 JSON”。让这特别奇怪的是，我在对象文字上使用 JSON.stringify 生成我的 JSON。

[我在http://jsonlint.com/](http://jsonlint.com/)测试了实际的 json，据说它是有效的。我无法在此处发布完整的 json，因为它是目录中的名称和编号，但我可以向您展示一个模拟记录，为您提供基本结构。

```
{
 "family" : "Smith",
        "people":{
            "Bob":{
                 "name":"Bob", 
                 "active" : true,
                "birthday" : "1/01"
            },
            "Sue":{
                "name": "Sue", 
                "active" : true,
                "birthday" : "1/01"
            }
        },
        "address": {
            "street" :"1111 Cool Road",
            "city" : "Cincinnati",
            "state" : "OH",
            "zip" : "11111"
        },
        "phone" : "923-4908"            
}; 
```

我将我的记录数组包装在一个带有[此处](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API)指定的属性“docs”的 json 对象中。我正在尝试做的事情有什么明显的错误吗？

更新：按照lammmj的建议，我将节点生成的字符串写入文件，然后使用curl将其发布到批量文档上传。那工作得很好。不过，我仍然希望有人帮助我更正我的节点代码，以便它在节点内工作。这是构建和发布请求的确切代码

```
 //The result variable is my array of 'family' objects, 
  //It's generated by parsing a text file, not show here
  var postOptions = {
  host: 'localhost',
  port: '5984',
  path: '/members/_bulk_docs',
  method: 'POST',
  headers: {
      'Content-Type': 'application/json',
      'Content-Length': result.length
  }
};
var request = http.request(postOptions, function(res){
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
      console.log('Response: ' + chunk);
    });
});
var body = { "docs": result};
var stringData = JSON.stringify(body);
console.log(stringData);
request.write(stringData); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:00:22.703

我能够使用以下命令使您的示例正常工作：

```
curl -X POST -H "Content-type:application/json" \
    http://localhost:5984/test/_bulk_docs -d @family.json 
```

其中`family.json`包含以下内容。我添加了第二个系列，以便数组中有多个元素。

```
{"docs": [
  {"family" : "Smith",
    "people":{
        "Bob":{
             "name":"Bob", 
             "active" : true,
            "birthday" : "1/01"
        },
        "Sue":{
            "name": "Sue", 
            "active" : true,
            "birthday" : "1/01"
        }
    },
    "address": {
        "street" :"1111 Cool Road",
        "city" : "Cincinnati",
        "state" : "OH",
        "zip" : "11111"
    },
    "phone" : "923-4908"
  },
  {"family" : "Jones",
    "people":{
        "John":{
             "name":"John",
             "active" : true,
            "birthday" : "1/01"
        },
        "Mary":{
            "name": "Mary",
            "active" : true,
            "birthday" : "1/01"
        }
    },
    "address": {
        "street" :"1112 Cool Road",
        "city" : "Cincinnati",
        "state" : "OH",
        "zip" : "11111"
    },
    "phone" : "923-4909"
  }
]} 
```

JSON 与包装在数组中的提供相同，并作为`docs`传递给 CouchDB 的 JSON 的属性值提供。您给出的示例中还有一个尾随分号 ( `;`)。如果其他所有内容都正确格式化，那可能就是问题所在。

更新：

好的，这是答案节点代码。如代码中所述，我进行了 3 处更改：

```
#!/usr/bin/env node

var http = require("http");

// Embedding the family object here so that this test program will compile/run.

result = {
     "family" : "Smith",
            "people":{
                "Bob":{
                     "name":"Bob",
                     "active" : true,
                    "birthday" : "1/01"
                },
                "Sue":{
                    "name": "Sue",
                    "active" : true,
                    "birthday" : "1/01"
                }
            },
            "address": {
                "street" :"1111 Cool Road",
                "city" : "Cincinnati",
                "state" : "OH",
                "zip" : "11111"
            },
            "phone" : "923-4908"        
    };

var body = { "docs": [result]};                 // Change #1: docs takes an array.

var stringData = JSON.stringify(body);          // Change #2: stringify first.

var postOptions = {
  host: 'localhost',
  port: '5984',
  path: '/members/_bulk_docs',
  method: 'POST',
  headers: {
      'Content-Type': 'application/json',
      'Content-Length': stringData.length       // Change #3: send the length of the stringified data.
  }
};

var request = http.request(postOptions, function(res){
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
      console.log('Response: ' + chunk);
    });
});

console.log(stringData);

request.write(stringData);

request.end(); 
```

这是我从节点得到的输出：

```
{"docs":[{"family":"Smith","people":{"Bob":{"name":"Bob","active":true,"birthday":"1/01"},"Sue":{"name":"Sue","active":true,"birthday":"1/01"}},"address":{"street":"1111 Cool Road","city":"Cincinnati","state":"OH","zip":"11111"},"phone":"923-4908"}]}

Response: [{"ok":true,"id":"721b8cde7a1e22b4cc106adbb3f41df9","rev":"1-306b71ff83df48c588a174fd5feafa34"}] 
```

# c# - WPF 窗口最小化/最大化行为不一致

> ID：13170842
> 
> 赞同：2
> 
> 时间：2012-11-01T04:11:10.353
> 
> 标签：c#, wpf

我第一次涉足 WPF，并决定创建一个基本应用程序以在系统托盘中运行。我添加了一个 winforms NotifyIcon 并且能够最小化到托盘并隐藏窗口，以便一切正常。

这就是事情变得奇怪的地方。

我决定始终从任务栏中隐藏应用程序，并始终`notifyicon`在系统托盘中显示。我添加了单击事件处理程序，以便在窗口打开时单击通知图标会导致它隐藏，然后在它关闭时单击会导致它显示，非常标准的东西。

最后，窗口开始最小化到托盘。

所以，我启动我的应用程序，我只有一个系统托盘图标。我单击它，窗口将按您的预期显示。我再次单击通知图标，窗口再次消失，正如您所怀疑的那样。我第三次单击它，而不是弹出窗口，我只在左下角看到标题栏（左上角的图标，右上角的最小化/关闭按钮等）。我相信这是“崩溃”的行为。让这件事变得奇怪的最后一件事是我正在使用`WindowLayout = none`所以我的窗口甚至没有标题栏..但一个显示在左下角。

如果我第四次单击，该栏就会消失。等等。

所以隐藏/显示是第一次工作，之后就变得很奇怪。

真的在这个问题上摸不着头脑。有人见过这样的事情或有什么建议吗？

[https://stackoverflow.com/questions/12088892/impossible-to-restore-application-hidden-programmatically](https://stackoverflow.com/questions/12088892/impossible-to-restore-application-hidden-programmatically) 这个家伙几乎完全解释了我所看到的行为，但不幸的是他没有回答他的问题。

这是**XAML**：

```
 <Window x:Class="Tagalong.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Tagalong Beta .1" Height="350" Width="500" Icon="content/tagalong_icon.ico"     
    ResizeMode="CanMinimize" Topmost="True"
    WindowStyle="None" Background="Transparent" AllowsTransparency="True" ShowInTaskbar="false" >
    <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="250"  />
        <ColumnDefinition Width="250" />
    </Grid.ColumnDefinitions>
    <Border Name="LeftPane" Grid.Row="0" Grid.Column="0" BorderBrush="Black"
    BorderThickness="1.5" Height="350" Width="250" CornerRadius="10"  Background="Blue" >
        <Grid>
        </Grid>
    </Border>
    <Border Name="RightPane" BorderBrush="Black" Grid.Row="0" Grid.Column="1"  
    BorderThickness="1.5" Height="350" Width="250" CornerRadius="10" Background="Green">
        <Grid>
        </Grid>
    </Border>
    </Grid>
    </Window> 
```

这是**代码**：

```
 void InitializeSystemTrayOptions()
    {
        notifyIcon = new NotifyIcon();
        notifyIcon.Icon = new System.Drawing.Icon(@"C:\dev\desktop\Tagalong\Tagalong\tagalong_icon.ico");
        notifyIcon.MouseClick += new System.Windows.Forms.MouseEventHandler(notifyIcon_MouseClick);            
        notifyIcon.Visible = true;
        this.Visibility = Visibility.Hidden; 
        this.WindowState = WindowState.Minimized;
    }

    void notifyIcon_MouseClick(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            if (this.WindowState == WindowState.Normal)
            {
                this.WindowState = WindowState.Minimized;
                this.Visibility = Visibility.Hidden;
            }
            else if (this.WindowState == WindowState.Minimized)
            {
                this.WindowState = WindowState.Normal;
                this.Visibility = Visibility.Visible;
            }
        }
    }

    private NotifyIcon notifyIcon; 
```

# xml - XML 解析错误：XML 声明格式不正确

> ID：13170843
> 
> 赞同：5
> 
> 时间：2012-11-01T04:11:18.007
> 
> 标签：xml

我创建了一个 XML 提要，它在我的本地开发环境中输出正常，但在实时服务器上，我收到以下错误：

```
XML Parsing Error: XML declaration not well-formed
Location: http://realaussieadventures.com/home/tourFeed
Line Number 1, Column 15:

<?xml version=1.0 ?>
--------------^ 
```

我已经尝试了带引号 ( `<?xml version="1.0" ?>`) 的版本 - 适用于本地 - 不带引号 ( `<?xml version=1.0 ?>`) - 不适用于本地或实时 - 带有转义引号 () - 适用于本地。

Local 是一个 MAMP 开发环境。

这有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-01T19:12:25.983

认为答案有点过时，但由于问题在 Google 中非常重要，我将把它留在这里。

提示：重新检查您的双引号 (") 是否是实际的双引号，例如 ANSI 代码 34，而不是任何 Unicode 双引号 (U+201C / U+201D)，它们可能会偶尔滑入输出文件并且在视觉上很难追踪。

单引号也是如此，您最喜欢的用于编写脚本的 Unix 编辑器可能会插入撇号/重音符号对而不是单引号。

你觉得这就够了吗？不，我曾经偶然发现 Unicode 不可破坏的空格字符 (U+00A0) 在元素属性之间滑动而不是简单的 ANSI 代码 32 空格。解析器惨遭失败。

长话短说：使用严格的 ANSI 编辑器来准备 XML 生成样板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:46:15.803

我有同样的问题。我意识到我留下了版本、编码和引号。格式良好的 xml 具有版本和编码。

`<?xml version="1.0" encoding="UTF-8"?>` 这应该可以工作。不要遗漏引号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-09T22:24:46.957

我遇到了类似的问题，当我尝试在浏览器中打开配置文件时，这就是我的情况：

```
XML Parsing Error: XML declaration not well-formed
Location: http://localhost:8080/job/MyProject/config.xml
Line Number 1, Column 16:
<?xml version='1.1' encoding='UTF-8'?>
---------------^ 
```

我尝试将单引号更改为双引号，但没有帮助。

但是我将 XML 版本从更改`1.1`为`1.0`似乎可以解决我的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T08:21:03.290

尝试这个：

```
header("Content-Type: text/xml")
echo " xml version='1.0' encoding='UTF-8' standalone='yes' "; 
```

在“1.0”、“UTF-8”等中使用单引号。它对我有用。

# scala - Scala - 将数组填充到一定大小

> ID：13170845
> 
> 赞同：8
> 
> 时间：2012-11-01T04:12:29.193
> 
> 标签：scala

我有一个方法：

```
def loadRom(filename: String) : Array[Int] = {
  val is = new FileInputStream(filename)
  Stream.continually(is.read).takeWhile(-1 !=).toArray
} 
```

它返回一个数组`0x8000`（我总是可以保证）。我想将它加载到一个`0x200000`大小数组中。有没有一种优雅的方式来做到这一点？怎么填充它`0x200000`？

**编辑：哎呀。我只是注意到 padTo 方法做了我想要的。关？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T12:15:43.870

为了完整起见，有`SeqLike.padTo`（数组隐式扩展`SeqLike`）。假设您想用零字节填充，只需附加`.padTo(0x200000, 0)`到结果表达式就可以了。

# ios - iOS Facebook SDK 3.1检索返回null的朋友生日

> ID：13170850
> 
> 赞同：5
> 
> 时间：2012-11-01T04:13:17.053
> 
> 标签：ios, facebook, sdk

我正在尝试检索 facebook 朋友的生日数据，但它返回 null。我正在使用这段代码：

```
FBRequest* friendsRequest = [FBRequest requestForMyFriends];
[friendsRequest startWithCompletionHandler: ^(FBRequestConnection *connection,
                                  NSDictionary* result,
                                  NSError *error) {
    NSArray* friends = [result objectForKey:@"data"];
    NSLog(@"Found: %i friends", friends.count);
    for (NSDictionary<FBGraphUser>* friend in friends) {
        NSLog(@"I have a friend named %@ - birthday %@", friend.name, friend.birthday);
    }
}]; 
```

朋友姓名没问题，但朋友生日或不是基本朋友数据之一的所有数据都返回 null。请注意，我已经在 facebook.com 应用页面和 openSession 方法（登录）中添加了 user_birthday 和 friends_birthday 权限：

```
- (void)openSession
{

    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_birthday",
                            @"friends_birthday",
                            nil];

    [FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];
     }];
 } 
```

在这里需要一些帮助，我已经尝试了一切。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-06T10:02:38.650

我有同样的问题，我用这种方式解决。

*   首先，请确保您拥有正确的权限。

    ```
     NSArray *permissions = @[@"user_birthday", @"friends_hometown",
                            @"friends_birthday", @"friends_location"];
    [FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:YES completionHandler: ..... 
    ```

*   然后，不要使用 requestForMyFriends。我尝试了几种方式（改变 FBRequest 和这种事情

*   检查权限并确保它是您需要的权限。

    ```
    NSLog(@"permissions::%@",FBSession.activeSession.permissions); 
    ```

*   现在以这种方式生成 FBRequest。

    ```
    FBRequest *friendRequest = [FBRequest requestForGraphPath:@"me/friends?fields=name,picture,birthday,location"];
     [ friendRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        NSArray *data = [result objectForKey:@"data"];
        for (FBGraphObject<FBGraphUser> *friend in data) {
            NSLog(@"%@:%@", [friend name],[friend birthday]);
     }}]; 
    ```

我终于得到了这个数据。希望对你有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-04T17:32:38.663

在 Graph API v2.0 中，您无法获取某人的朋友生日 - 该`friends_birthday`权限已被弃用。

在此处阅读有关这些更改的更多信息：[https ://developers.facebook.com/docs/apps/changelog](https://developers.facebook.com/docs/apps/changelog)

# php - JQuery 加载 (Ajax) 和 PHP 验证

> ID：13170851
> 
> 赞同：-1
> 
> 时间：2012-11-01T04:13:28.237
> 
> 标签：php, jquery

好的，我有一个小问题。我有一个页面，其中有一个 DIV。当页面加载时，它将在 DIV 中加载另一个页面。为此，我使用了 JQuery 加载函数，即 AJAX，代码如下：

```
$(document).ready(function() {
    $(".div").hide().load("page.php").fadeIn(5000);
}); 
```

很好，一切都很好，当页面加载并出现在 DIV 时，我没有任何问题。

现在，在这个出现在 DIV 中的页面中，它有一个文本区域。该页面具有文本区域的 PHP 验证代码。如果 textarea 为空，则用户会在发送前收到一条消息以填充它。这是下面的PHP代码：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
if (isset($_POST['textfirst'])) {

$textarea = strip_tags($_POST['textfirst']);

if (empty($textarea)) {
echo "You have to fill your answer";    
} else {
bla bla bla bla bla......
}
}
} 
```

同样在这里，没有任何问题，PHP 验证工作正常。

问题来了，当表单为空并提交时，我的页面将页面加载到 DIV 中，并且没有出现来自 PHP 的错误消息。为什么？换句话说，如果用户没有填写textarea，他/她会收到消息来填写它，但是当用户提交表单为空时，它会重新加载页面再次加载DIV中的其他页面，因此没有错误出现信息。

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:23:08.600

这取决于加载到 div 中的表单的目标是什么。听起来您正在发布没有 for 的原始页面。处理逻辑。Tis 本质上只会重新加载原始页面。

通过 AJAX 加载的 div 中的表单需要指向执行实际表单处理的页面。您不能简单地重新加载原始页面，希望在初始页面加载后通过 AJAX 加载的页面能够处理您的帖子。

# php - 添加一个类来标记

> ID：13170858
> 
> 赞同：-4
> 
> 时间：2012-11-01T04:14:12.963
> 
> 标签：php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:17:30.113

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:17:46.753

您可以添加到生成标签`class="whatever"`的适当语句中。`echo``<a>`

# android - 如何在 android 中以编程方式连接 VPN 网络？

> ID：13170859
> 
> 赞同：3
> 
> 时间：2012-11-01T04:14:20.963
> 
> 标签：android, api, vpn

API-14 可用于为 android 实现 vpn 服务。如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:22:56.207

您可以参考开源项目 openvpn 以了解如何在 android 中实现 VPN 服务。您可能还想看[这个](https://stackoverflow.com/questions/8921457/how-to-programmatically-create-a-new-vpn-interface-with-android-4-0)

[http://code.google.com/p/ics-openvpn/](http://code.google.com/p/ics-openvpn/)

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T04:22:59.920

首先，您需要在您的代码中 decalre VPN 服务，如下所示

```
 <service android:name=".ExampleVpnService"
         android:permission="android.permission.BIND_VPN_SERVICE">
     <intent-filter>
         <action android:name="android.net.VpnService"/>
     </intent-filter>
 </service> 
```

[您还可以查看此链接以获取更多详细信息](http://developer.android.com/reference/android/net/VpnService.html)

# maven - 未能执行目标 org.apache.maven.plugins:maven-surefire-plugin:2.10:test

> ID：13170860
> 
> 赞同：140
> 
> 时间：2012-11-01T04:14:40.563
> 
> 标签：maven, maven-2, playn

我已经在互联网上搜索了近五天来寻找解决这个问题的方法，但我似乎无法自己找到并修复它，主要是因为我对 Maven 和 PlayN 都很陌生，所以我不完全确定我在看什么。但是，它显然正在努力构建核心。似乎它无法下载“神器过滤器”，并且无法运行 Surefire 的测试。但是，我只是在猜测我不太了解的事情，即使我一直在疯狂地研究这些事情。来自更有经验的人的任何帮助将非常非常感激。我正在失去我的想法。

```
[INFO] Building Synthesis Core 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ synthesis-core ---
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ synthesis-core ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] skip non existing resourceDirectory C:\Users\Josiah\synthesis\core\src\main\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3:compile (default-compile) @ synthesis-core ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ synthesis-core ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\Josiah\synthesis\core\src\test\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3:testCompile (default-testCompile) @ synthesis-core ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ synthesis-core ---
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.pom
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Synthesis Metaproject ............................. SUCCESS [1.059s]
[INFO] Synthesis Core .................................... FAILURE [3.538s]
[INFO] Synthesis Java .................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.997s
[INFO] Finished at: Wed Oct 31 23:57:38 EDT 2012
[INFO] Final Memory: 6M/109M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.10:test (default-test) on project synthesis-core: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.10:test failed: Plugin org.apache.maven.plugins:maven-surefire-plugin:2.10 or one of its dependencies could not be resolved: Failed to collect dependencies for org.apache.maven.plugins:maven-surefire-plugin:jar:2.10 (): Failed to read artifact descriptor for org.apache.maven.shared:maven-common-artifact-filters:jar:1.3: Could not transfer artifact org.apache.maven.shared:maven-common-artifact-filters:pom:1.3 from/to central (http://repo.maven.apache.org/maven2): Remotely Closed [id: 0x0847a8f3, /192.168.1.54:65153 :> repo.maven.apache.org/93.184.215.223:80] -> [Help 1] 
```

**然后我让它打印整个调试日志，并详细说明了 Surefire 位，显示了所有调用的异常：**

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.
10:test (default-test) on project synthesis-core: Execution default-test of goal
 org.apache.maven.plugins:maven-surefire-plugin:2.10:test failed: Plugin org.apa
che.maven.plugins:maven-surefire-plugin:2.10 or one of its dependencies could no
t be resolved: Failed to collect dependencies for org.apache.maven.plugins:maven
-surefire-plugin:jar:2.10 (): Failed to read artifact descriptor for org.apache.
maven.shared:maven-common-artifact-filters:jar:1.3: Could not transfer artifact
org.apache.maven.shared:maven-common-artifact-filters:pom:1.3 from/to central (h
ttp://repo.maven.apache.org/maven2): Connection reset -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal o
rg.apache.maven.plugins:maven-surefire-plugin:2.10:test (default-test) on projec
t synthesis-core: Execution default-test of goal org.apache.maven.plugins:maven-
surefire-plugin:2.10:test failed: Plugin org.apache.maven.plugins:maven-surefire
-plugin:2.10 or one of its dependencies could not be resolved: Failed to collect
 dependencies for org.apache.maven.plugins:maven-surefire-plugin:jar:2.10 ()
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:225)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBu
ild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycl
eStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Laun
cher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.jav
a:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La
uncher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:
352)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-t
est of goal org.apache.maven.plugins:maven-surefire-plugin:2.10:test failed: Plu
gin org.apache.maven.plugins:maven-surefire-plugin:2.10 or one of its dependenci
es could not be resolved: Failed to collect dependencies for org.apache.maven.pl
ugins:maven-surefire-plugin:jar:2.10 ()
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(Default
BuildPluginManager.java:82)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:209)
        ... 19 more
Caused by: org.apache.maven.plugin.PluginResolutionException: Plugin org.apache.
maven.plugins:maven-surefire-plugin:2.10 or one of its dependencies could not be
 resolved: Failed to collect dependencies for org.apache.maven.plugins:maven-sur
efire-plugin:jar:2.10 ()
        at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.re
solve(DefaultPluginDependenciesResolver.java:211)
        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.createPlug
inRealm(DefaultMavenPluginManager.java:353)
        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.setupPlugi
nRealm(DefaultMavenPluginManager.java:321)
        at org.apache.maven.plugin.DefaultBuildPluginManager.getPluginRealm(Defa
ultBuildPluginManager.java:175)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(Default
BuildPluginManager.java:78)
        ... 20 more
Caused by: org.sonatype.aether.collection.DependencyCollectionException: Failed
to collect dependencies for org.apache.maven.plugins:maven-surefire-plugin:jar:2
.10 ()
        at org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectD
ependencies(DefaultDependencyCollector.java:258)
        at org.sonatype.aether.impl.internal.DefaultRepositorySystem.collectDepe
ndencies(DefaultRepositorySystem.java:308)
        at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.re
solve(DefaultPluginDependenciesResolver.java:199)
        ... 24 more
Caused by: org.sonatype.aether.resolution.ArtifactDescriptorException: Failed to
 read artifact descriptor for org.apache.maven.shared:maven-common-artifact-filt
ers:jar:1.3
        at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.
loadPom(DefaultArtifactDescriptorReader.java:296)
        at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.
readArtifactDescriptor(DefaultArtifactDescriptorReader.java:186)
        at org.sonatype.aether.impl.internal.DefaultDependencyCollector.process(
DefaultDependencyCollector.java:412)
        at org.sonatype.aether.impl.internal.DefaultDependencyCollector.process(
DefaultDependencyCollector.java:544)
        at org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectD
ependencies(DefaultDependencyCollector.java:240)
        ... 26 more
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not
 transfer artifact org.apache.maven.shared:maven-common-artifact-filters:pom:1.3
 from/to central (http://repo.maven.apache.org/maven2): Connection reset
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(Def
aultArtifactResolver.java:538)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArti
facts(DefaultArtifactResolver.java:216)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArti
fact(DefaultArtifactResolver.java:193)
        at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.
loadPom(DefaultArtifactDescriptorReader.java:281)
        ... 30 more
Caused by: org.sonatype.aether.transfer.ArtifactTransferException: Could not tra
nsfer artifact org.apache.maven.shared:maven-common-artifact-filters:pom:1.3 fro
m/to central (http://repo.maven.apache.org/maven2): Connection reset
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(W
agonRepositoryConnector.java:951)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(W
agonRepositoryConnector.java:941)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.
run(WagonRepositoryConnector.java:669)
        at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(Run
nableErrorForwarder.java:60)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
utor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.maven.wagon.TransferFailedException: Connection reset
        at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInput
Data(AbstractHttpClientWagon.java:799)
        at org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:11
6)
        at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
        at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.
run(WagonRepositoryConnector.java:601)
        ... 4 more
Caused by: java.net.SocketException: Connection reset
        at java.net.SocketInputStream.read(SocketInputStream.java:168)
        at org.apache.maven.wagon.providers.http.httpclient.impl.io.AbstractSess
ionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:149)
        at org.apache.maven.wagon.providers.http.httpclient.impl.io.SocketInputB
uffer.fillBuffer(SocketInputBuffer.java:110)
        at org.apache.maven.wagon.providers.http.httpclient.impl.io.AbstractSess
ionInputBuffer.readLine(AbstractSessionInputBuffer.java:264)
        at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultRes
ponseParser.parseHead(DefaultResponseParser.java:98)
        at org.apache.maven.wagon.providers.http.httpclient.impl.io.AbstractMess
ageParser.parse(AbstractMessageParser.java:252)
        at org.apache.maven.wagon.providers.http.httpclient.impl.AbstractHttpCli
entConnection.receiveResponseHeader(AbstractHttpClientConnection.java:281)
        at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultCli
entConnection.receiveResponseHeader(DefaultClientConnection.java:247)
        at org.apache.maven.wagon.providers.http.httpclient.impl.conn.AbstractCl
ientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:219)
        at org.apache.maven.wagon.providers.http.httpclient.protocol.HttpRequest
Executor.doReceiveResponse(HttpRequestExecutor.java:298)
        at org.apache.maven.wagon.providers.http.httpclient.protocol.HttpRequest
Executor.execute(HttpRequestExecutor.java:125)
        at org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultR
equestDirector.tryExecute(DefaultRequestDirector.java:645)
        at org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultR
equestDirector.execute(DefaultRequestDirector.java:464)
        at org.apache.maven.wagon.providers.http.httpclient.impl.client.Abstract
HttpClient.execute(AbstractHttpClient.java:820)
        at org.apache.maven.wagon.providers.http.httpclient.impl.client.Abstract
HttpClient.execute(AbstractHttpClient.java:754)
        at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.execute(A
bstractHttpClientWagon.java:674)
        at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInput
Data(AbstractHttpClientWagon.java:793)
        ... 8 more 
```

**编辑：添加我的 pom.xml 进行分析。**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>com.googlecode.playn</groupId>
    <artifactId>playn-project</artifactId>
    <version>1.3.1</version>
  </parent>

  <groupId>com.hijackedlongboat</groupId>
  <artifactId>synthesis</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>Synthesis Metaproject</name>

  <properties>
    <playn.version>1.3.1</playn.version>
  </properties>

  <profiles>
    <profile>
      <id>java</id>
      <activation><activeByDefault>true</activeByDefault></activation>
      <modules><module>java</module></modules>
    </profile>
    <profile>
      <id>android</id>
      <modules><module>android</module></modules>
    </profile>
    <profile>
      <id>ios</id>
      <modules><module>ios</module></modules>
    </profile>
    <profile>
      <id>html</id>
      <modules><module>html</module></modules>
    </profile>
    <profile>
      <id>flash</id>
      <modules><module>flash</module></modules>
    </profile>
  </profiles>

  <modules>
    <module>core</module>
  </modules>
</project> 
```

**编辑2：** 已解决通过使用命令“mvn dependency::tree”，我能够找到一个未显示在调试和堆栈跟踪中的丢失存储库。缺少的存储库是“forplay-legacy”，然后我将其添加到 pom.xml 中，如下所示：

```
 <repositories>
    <repository>
      <id>forplay-legacy</id>
      <url>http://forplay.googlecode.com/svn/mavenrepo</url>
    </repository>
  </repositories> 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-01-09T11:20:26.267

我有类似的问题，我能够使用 -U 选项和 mvn 命令解决它

```
mvn clean install -U 
```

这对我有用，希望它有所帮助。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-11-01T08:27:59.530

您可能缺少一些依赖项。

使用 找到您缺少的依赖项`mvn dependency:tree`，然后手动安装它们，并使用`-o`(offline) 选项构建您的项目。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-01-15T21:36:21.463

我有一个类似的问题，但这里的所有答案都没有帮助我。

对我来说，问题是测试失败。如果您正在进行测试驱动开发，那么失败或未实施的测试不应破坏构建。我仍然希望我的项目能够构建。

为了解决这个问题，我向 surefire 添加了一个配置，以便它忽略失败的测试。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.19.1</version>
    <configuration>
        <testFailureIgnore>true</testFailureIgnore>
    </configuration>
</plugin> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-07-08T16:09:53.447

如果某些单元测试用例失败，则会发生此错误。

在我的应用程序中，某些单元测试与 Java 8 不兼容，因此它们失败了。我的错误在更改`jdk1.8.0_92`为`jdk1.7.0_80`.

构建将成功，`mvn clean install -DskipTests`但这将跳过单元测试。因此，只需确保在构建完成后单独运行即可。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-12-30T12:13:32.137

更新 Maven 项目：

脚步：

1.  右键单击“项目”
2.  转到“Maven”>>“更新”
3.  等待应用所有更改
4.  提交更改（如果代码在 repo 上）
5.  跑

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-11-09T15:37:27.350

我尝试按照该线程的大多数评论中给出的说明进行操作，包括选择的答案，但错误仍然存​​在。我做了一些研究，发现这个[页面](https://maven.apache.org/surefire/maven-surefire-plugin/examples/class-loading.html)提供了一个帮助我的解决方案（好吧，虽然我有一些猜测）。

所以我所做的就是将maven surefire插件中的版本号替换为如下： `<groupId>org.apache.maven.plugins</groupId> <artifactId>maven-surefire-plugin</artifactId> <version>3.0.0-M1</version>`

我希望这有帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-29T16:26:29.810

我遇到了同样的错误，但在我的情况下，删除`/target`文件夹和`nbactions.xml`文件后问题得到解决。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-13T09:24:56.577

我有同样的问题，我从以下步骤解决：

1.  右键项目->maven->更新项目
2.  在这里我选择了“强制更新快照/发布”
3.  之后我再次编译了我的项目并解决了问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-23T09:31:54.377

当我遇到问题时，`changes.xml`文档格式错误（缺少结束标记）。解决方法是编辑 XML 以使其格式正确。

因此检查 XML 格式是否*正确可能很*重要，尤其是当发布插件没有抱怨时。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-06T03:36:36.160

对我来说，更改 Jenkins 版本有帮助。

```
 <parent>
    <groupId>org.jenkins-ci.plugins</groupId>
    <artifactId>plugin</artifactId>
    <version>1.642.4</version><!-- which version of Jenkins is this plugin built against? -->
  </parent> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-08T09:41:37.327

有时你会遇到类似的错误，但原因与工具无关——在这种情况下是 Surefire 插件。

对我来说，我遇到了类似的错误，但原因是我没有指向正确的 DB url！

在很多冗长（使用 mvn -X 标志）中，我看到了一条超时消息。

我做的一个技巧是在构建服务器上安装 IntelliJ（用于调试目的）并首先通过它修复问题，然后卸载它并确保一切在构建服务器上也能正常工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-07-11T10:45:23.743

[![右键单击项目 -> Maven -> 更新项目 -> 选择强制更新快照](../Images/11bf3a254d7785f90a6cf097ab3c875d.png)](https://i.stack.imgur.com/If9tS.png)

或者

导航到项目根文件夹并使用以下命令：

mvn clean install -U 或 mvn clean install --update-snapshots

这里 -U 将强制检查远程存储库上丢失的版本和更新的快照

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-26T14:04:25.767

我有一个类似的问题，我的解决方案与其他用户发布的完全不同。

我的问题与我去年工作的项目有关，该项目需要在 maven 设置（位于`<path to maven folder>\maven\conf\settings.xml`和`C:\Users\<my user>\.m2\settings.xml`）上有一定的代理。代理阻止下载所需的外部包。

解决方案是将原始文件 ( ) 放回`settings.xml`那些地方。一旦事情恢复，我就可以下载软件包并且一切正常。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-10T19:06:04.063

请遵循本教程： [https ://www.petrikainulainen.net/programming/maven/creating-code-coverage-reports-for-unit-and-integration-tests-with-the-jacoco-maven-plugin/](https://www.petrikainulainen.net/programming/maven/creating-code-coverage-reports-for-unit-and-integration-tests-with-the-jacoco-maven-plugin/)

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-surefire-plugin</artifactId>
<version>2.15</version>
<configuration>
    <!-- Sets the VM argument line used when unit tests are run. -->
    <argLine>${surefireArgLine}</argLine>
    <!-- Skips unit tests if the value of skip.unit.tests property is true -->
    <skipTests>${skip.unit.tests}</skipTests>
    <!-- Excludes integration tests when unit tests are run. -->
    <excludes>
        <exclude>**/IT*.java</exclude>
    </excludes>
</configuration> 
```

# php - 使用 IE 浏览器进行 ajax 调用时出现 304 错误

> ID：13170861
> 
> 赞同：1
> 
> 时间：2012-11-01T04:15:16.463
> 
> 标签：php, javascript, mysql, ajax, internet-explorer

我写了一个 ajax 调用，但我的 IE 网络浏览器有问题，因为在 Chrome 中，`ajaxFunction(1)`它工作正常（它`200 OK`在我浏览时进入我浏览器的网络部分）。另一方面，使用 IE 具有相同操作的同一页面，函数返回`304 error`。我尝试`call.php?which=1`使用 IE 手动（），它正在工作。在这种情况下我找不到什么问题？

PS。我的代码正在手动运行。我想知道我的IE浏览器有什么问题。哪些代码在浏览器中运行不同？

这是一些代码：

```
function ajaxFunction(a)
{
    var ajaxRequest;
    try {
        ajaxRequest = new XMLHttpRequest();
    } catch (e) {
        try {
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
                alert("Your browser broke!");
                return false;
            }
        }
    }
    ajaxRequest.open("GET","call.php?which="+a,true);
    ajaxRequest.send(); 
} 
```

除此之外，

```
/* in call.php after connection codes */
$came = $_GET['which'];
mysql_query("UPDATE ..."); 
```

**更新**

我正在使用 IE 9.0（更新版本 9.0.10）

我也将此代码添加到 call.php

```
header("Cache-Control: no-cache, must-revalidate"); 
```

**回答**

使用浏览器的缓存控制和缓存清理后效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:25:03.997

我相信这些链接解决了根本原因和可能的解决方案：

*   [解析 HTTP 304 - 在通过 GWT 进行的 AJAX 调用中未修改](https://stackoverflow.com/questions/2475886/resolve-http-304-not-modified-in-ajax-call-made-via-gwt)

*   [jQuery AJAX 在不应该产生 304 响应时](https://stackoverflow.com/questions/5502002/jquery-ajax-producing-304-responses-when-it-shouldnt)

*   [https://blog.httpwatch.com/2009/08/07/ajax-caching-two-important-facts/](https://blog.httpwatch.com/2009/08/07/ajax-caching-two-important-facts/)

显然，IE“积极缓存 ajax 请求”。上面的链接应该可以帮助您解决问题。

PS：

哪个版本的 IE 遇到这个问题？

# ios5 - 从 sqlite 表中获取数据并创建 json，删除签名

> ID：13170866
> 
> 赞同：0
> 
> 时间：2012-11-01T04:15:51.127
> 
> 标签：ios5

我需要在 iphone 应用程序中从 Sqlite 数据库创建 JSON。我的 sqlite 数据库中有 200 个表。我需要将这 200 个表中所有记录的组合 json 发送到 WCF 服务。目前我正在通过附加字符串制作 json，如下所述，但这需要太多时间。

```
 NSMutableString* jsonTypeStr = [NSMutableString string];
        [jsonTypeStr appendString:@"["]; 
```

我是iphone新手，所以对此不太了解。有没有比附加字符串公式更快的替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:22:51.213

[http://restkit.org/](http://restkit.org/)

Restkit 使这很容易，但请确保您阅读了它。将它集成到您​​的项目中需要一些工作，但它肯定比手动完成要容易。

此外，还有其他库，例如[http://stig.github.com/json-framework/](http://stig.github.com/json-framework/)，它们非常擅长在 NSDictionaries 和 JSON 对象之间进行转换，但这些库与 core-data 和 restkit 不相关。

# java - 当从特定类调用某些方法时执行 AOP

> ID：13170871
> 
> 赞同：1
> 
> 时间：2012-11-01T04:16:05.230
> 
> 标签：java, aop, aspectj, spring-aop

我是 AOP 的新手。当某个类的某些方法被执行时，我可以成功执行AOP。但是当某个类的某些方法被其他类调用时，我想执行AOP。这种类型的实现在 SpringAOP 或 AspectJ 中是否可行？

例如，我有具有方法 getA 的“A”类。我已经成功实现了，“当 getA 执行时，做点什么”。但我想要“当从类“B”调用 getA 时，做一些事情”。在 Spring AOP 或 AspectJ 中是否有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:30:18.237

> 当从类“B”调用 getA 时，做某事“。在 Spring AOP 或 AspectJ 中是否可能？

是的，只要注入了`Class A`in的对象。`Class B`这是因为，AOP 是由 spring 使用代理实现的，因此注入的实例将是包装了定义了方面的类的对象的代理。因此，只要您`getA()`在 spring 管理的 bean 上调用方法，连接点就会被执行。

# c# - 在 Datagrid (WPF) 中获取 ComboBoxColumn 的选定值

> ID：13170876
> 
> 赞同：0
> 
> 时间：2012-11-01T04:17:23.033
> 
> 标签：c#, wpf, datagrid, combobox

我使用 XAML 在 Datagrid 中实现了 DataGridComboBoxColumn。我可以以编程方式访问 comboboxColumn1，但是如何在值更改时获取所选项目？

```
 <DataGrid x:Name="dgData" AutoGenerateColumns="False" Margin="131,93,13,101" Grid.Column="1" SelectionChanged="dgData_SelectionChanged">
       <DataGrid.Columns>

            <DataGridComboBoxColumn Header="Subject" x:Name="comboboxColumn1"/>

       </DataGrid.Columns>
 </DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:46:56.070

试试这个方法

```
<DataGridComboBoxColumn Header="Life Area" SelectedItemBinding="{Binding YourSelectedItem}">
    <DataGridComboBoxColumn.ElementStyle>
        <Style TargetType="ComboBox">
            <Setter Property="ItemsSource" Value="{Binding YourItemSource}"/>
            <Setter Property="IsReadOnly" Value="True"/>
        </Style>
    </DataGridComboBoxColumn.ElementStyle>
    <DataGridComboBoxColumn.EditingElementStyle>
        <Style TargetType="ComboBox">
            <Setter Property="ItemsSource" Value="{Binding YourItemSource}"/>
        </Style>
    </DataGridComboBoxColumn.EditingElementStyle>
</DataGridComboBoxColumn> 
```

# algorithm - 为什么 2 种情况下的第 2 步不同？

> ID：13170879
> 
> 赞同：0
> 
> 时间：2012-11-01T04:17:41.597
> 
> 标签：algorithm, string-matching, boyer-moore

在将*Boyer–Moore 字符串搜索算法*应用于字符串时：

```
SSIMPLE EXAMPLE 
```

有一个模式：

```
EXAMPLE 
```

算法流程如下：

```
SSIMPLE EXAMPLE ---------------------(1)
EXAMPLE

SSIMPLE EXAMPLE ----------------------------(2)
      EXAMPLE

SSIMPLE EXAMPLE ----------------------------------(3)
        EXAMPLE 
```

但是当将相同的算法应用于相同的字符串时：

```
SSIMPLE EXAMPLE 
```

但模式略有不同：（将第一个 E 替换为 T）

```
TXAMPLE 
```

算法流程如下：

```
SSIMPLE EXAMPLE ------------------- (1)
TXAMPLE

SSIMPLE EXAMPLE ----------------------(2)
       TXAMPLE

SSIMPLE EXAMPLE ---------------------------(3)
        TXAMPLE 
```

从第一个例子： *在第二步，`E`是在`E`*

而在第二个例子中： *在第二步中，`T`不是在空格下`E`而是在空格下*

这是为什么 ？`T`字母表和分别`E`在单词`TXAMPLE`和中有什么区别`EXAMPLE`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:28:58.980

在EXAMPLE中，第一个字符和最后一个字符是相同的，所以如果匹配最后一个字符，那么你就知道字符串在那个位置有一个E。因此，当您尝试移动EXAMPLE 时，您必须假设该位置的E 与示例中的第一个E 匹配。

在 TXAMPLE 中，最后一个字符仅出现在字符串的末尾，因此如果匹配最后一个字符，则可以将字符串移动到下一个尝试的匹配与第一个完全不重叠的位置，因为 E 不' 不匹配字符串末尾以外的任何地方。

# node.js - node js步骤库中发生错误时如何跳过功能？

> ID：13170882
> 
> 赞同：0
> 
> 时间：2012-11-01T04:17:50.317
> 
> 标签：node.js, asynchronous

我正在使用步骤库进行同步行为以验证和保存联系人，

以下是我现在正在使用的代码

```
exports.actions = function(req, res, ss) {

var Step= require('step');
req.use('session');

return {

        addCon:function(contactObject){

        Step(
        function validation(){
            var accounts =contactObject.contacts.accounts;
            accounts.forEach(function(){
                //database call
                services.user.get(updateObj,function(err,rec){

                    if(err || rec == null)
                     {
                        res("Saving Contact Failed,user Does Not Exist");
                        //here responding to client for showing alert message
                        return false;
                    }
                    if(userId === rec.friendId){
                        res("Error");
                        //here responding to client for showing alert message
                        return false;
                    }

                });
            });
        },
        function saving(){
            //saving 
        }
        ,
        function pusblishing tofriend(){
            //stuff
        }
        )

        }
 }

  } 
```

实际上，如果验证功能发生任何错误，我想跳过保存功能。并且任何打破循环的想法， return false 都行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:50:42.833

我不是 100% 一步，但看起来你可以将它`this`作为回调函数传递，这将使你能够传递错误然后抛出错误（如[文档](https://github.com/creationix/step)中所示）。

你遇到的问题是你在循环的函数中返回，所以它将结束那个函数而不是更大的`Step`函数。您最好在这样的`this`函数之一的末尾传递一个函数，然后再进行错误检查：

```
Step(
    function hello() {
        console.log('Hello');
        this(err, 'Hello');
    },
    function howareyou (err, greeting) {
        if (err) return something ... 
```

当您返回它试图单步执行的主要功能之一时，Step 将停止。

但是，它会寻找您的用例，最好使用异步库的[瀑布](https://github.com/caolan/async#waterfall)，它具有类似于您所描述的内置内容，并且您最终可以在单个错误函数中处理错误。

# java - “掩盖”小地图

> ID：13170884
> 
> 赞同：1
> 
> 时间：2012-11-01T04:18:10.737
> 
> 标签：java, image, masking

我不确定如何解释我正在尝试做的事情。我正在制作一个头顶射击游戏，它由屏幕左上角的小地图组成。

这是我正在尝试做的（编辑后的图像）

![](../Images/36edfa73b4214fc8ff67d52e0ca9ab43.png)

在这种情况下，我只需要显示黄色框中的地图部分，而以红色突出显示的部分完全不可见。当玩家移动时，（在这种情况下，让我们说向右），作为响应，地图图像将向左平移。

同样，在黄色框内 = 可见

红色突出显示 = 不可见

![](../Images/7e89e2b0380c63be0a8f421884f9ec91.png)

这很像在一张纸上剪一个洞，然后在它下面放一张照片，只不过这张纸和洞外的任何东西都是看不见的。

我认为这被称为“掩蔽”，但不确定。

我觉得自己像个白痴一样努力解释这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:23:55.227

对于这个用例，我倾向于保留一个代表“地形”和敌舰的模型，并`Graphics`在绘画时简单地翻译实例。或者，“地形”可能只是一个图像，如果它不是游戏的相关部分（例如星空背景）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:50:25.270

BufferedImage 有一个方法[getSubimage](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getSubimage%28int,%20int,%20int,%20int%29)。应该可以将整个小地图绘制到一个 BufferedImage 中，然后使用 getSubimage 仅获取您需要的部分。

# flash - 允许使用 Flash 访问网络摄像头时避光

> ID：13170885
> 
> 赞同：0
> 
> 时间：2012-11-01T04:18:24.043
> 
> 标签：flash, webcam

当用户单击flash客户端的“安全设置”的允许按钮时，有什么方法可以避免看到相机的光。我们只需要从音频开始，但是当允许访问麦克风时，相机的灯会亮一秒钟，然后我们才能切换到仅音频。

我们还希望用户能够单击允许并关闭相机（并关闭灯），直到我们想要在大约 15 秒后打开它。

# java - 使用 JQuery 在 Javascript 中解析外部 JSON 文件（包含数组元素）

> ID：13170888
> 
> 赞同：2
> 
> 时间：2012-11-01T04:18:48.377
> 
> 标签：java, javascript, jquery, html, json

我想用 javascript 解析外部 JSON 文件，其中包含一个数组和其他元素。这是名为“TotalUsers.json”的 JSON 文件

```
{"@version":"1.0",
"@generatedDate":"12/20/10 5:24 PM",
"day":[{"@value":"53819","@date":"2010-12-01"},
    {"@value":"57558","@date":"2010-12-02"},
    {"@value":"61141","@date":"2010-12-03"}]} 
```

我想在两个单独的数组 daysTotal 和 valuesTotal 中获取 day 数组的“value”和“day”元素。我正在尝试使用 JQuery 的 getJSON 方法来实现这一点。但是，我对 day 数组的内部格式感到困惑。

格式化后，两个输出数组应如下所示：

值总计 = [53819, 57558, 61141]; daysTotal = [2010-12-01, 2010-12-02, 2010-12-03];

这是我到目前为止，

```
$.getJSON('TotalUsers.json', function(data) {
    var valuesTotal  = [];
    var daysTotal = [];
    $.each(data, function(key, val) {
        if (key == day)
        {
            daysTotal.push('<li id="' + key.key + '">' + key.val + '</li>');
        }
        else
        {
            valuesTotal .push('<li id="' + key + '">' + val + '</li>');
        }
    });
}); 
```

请帮我解释一下逻辑，我对 JSON 和 javascript 还是很陌生。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T04:26:57.110

`day`未定义，您可能的意思是`'day'`，尽管您真正想要的是：

```
$.getJSON('TotalUsers.json', function(data) {
    var valuesTotal = [];
    var daysTotal = [];
    $.each(data.day, function(key, obj) {
        valuesTotal.push('<li id="value-' + key + '">' + obj["@value"] + '</li>');
        daysTotal.push('<li id="day-' + key + '">' + obj["@date"] + '</li>');
    });
});​ 
```

只需遍历 day 数组，填充您的两个子数组。

演示：http: [//jsfiddle.net/hjjTU/](http://jsfiddle.net/hjjTU/)

# java - 在服务器端缓存jsp页面

> ID：13170893
> 
> 赞同：1
> 
> 时间：2012-11-01T04:19:47.687
> 
> 标签：java, jsp, caching

我正在使用以下步骤在服务器端缓存 jsp 页面在服务器端的以下 url [缓存中定义](http://docs.oracle.com/cd/E26576_01/doc.312/e24930/webapps.htm#beagw)

我在 java 构建路径中有 web-glue.jar，并且在以下步骤中定义了 tld，但是在执行所有步骤后我收到以下错误

```
java.lang.NullPointerException
    at org.apache.jasper.compiler.Jsr199JavaCompiler.compile(Jsr199JavaCompiler.java:172)
    at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:342)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:411)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:344)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:470)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:364)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Unknown Source) 
```

那么我该如何解决这个问题，或者请告诉任何其他方式在服务器端缓存jsp

实际上，我正在开发一个 vxml 应用程序，在该应用程序中我动态地从 xml 提供文本，因此我 wabt 在服务器端缓存一些内容

缓存.jsp 页面

```
<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.0" application = "eFMS_approot.vxml" xmlns="http://www.w3.org/2001/vxml" xml:lang = "hi-IN">
<%@ taglib uri="Sun ONE Application Server Tags" prefix="mycache" %>

<mycache:cache>

<form id="Dealer_id_mobile_input">

<var name = "choice" />
    <block>
        <assign name = "node_name"  expr = "'DEALER_CALLER ID ENTRY NODE'" />
    </block>

    <!-- Entering the reg id -->
    <field name = "reg_id" type="digits?minlength=6;maxlength=6">
        <property name="termchar" value="*" />

        <prompt xml:lang= "lang_mode+'-IN'">
            <audio src = "../eFMS/audio/enterregidno.wav"  fetchhint="prefetch">
              Please enter your name
            </audio>
        </prompt> 
</field>
</form>
</mycache:cache>
</vxml 
```

谢谢

# c# - 按字母顺序插入列表 C#

> ID：13170896
> 
> 赞同：17
> 
> 时间：2012-11-01T04:19:51.767
> 
> 标签：c#, .net

谁能教我如何在 C# 中按字母顺序将项目插入列表中？

所以每次我添加到列表中时，我想按字母顺序添加一个项目，理论上列表可能会变得非常大。

示例代码：

```
Public Class Person
{
     public string Name { get; set; }
     public string Age { get; set; }
}

Public Class Storage
{
    private List<Person> people;

    public Storage
    {
        people = new List<Person>();
    }

    public void addToList(person Person)
    {
        int insertIndex = movies.findindex(
            delegate(Movie movie) 
            {
              return //Stuck here, or Completely off Track.

            }
        people.insert(insertIndex, newPerson);
    }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T04:27:30.293

定义一个比较器实现[`IComparer<T>`接口](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)：

```
public class PersonComparer : IComparer<Person>
{
    public int Compare(Person x, Person y)
    {
        return x.Name.CompareTo(y.Name);
    }
} 
```

然后使用[`SortedSet<T>`Class](http://msdn.microsoft.com/en-us/library/dd412070.aspx)：

```
 SortedSet<Person> list = new SortedSet<Person>(new PersonComparer());
        list.Add(new Person { Name = "aby", Age = "1" });
        list.Add(new Person { Name = "aab", Age = "2" });
        foreach (Person p in list)
            Console.WriteLine(p.Name); 
```

* * *

如果您仅限于使用 .NetFramework3.5，则可以使用[`SortedList<TKey, TValue>`Class](http://msdn.microsoft.com/en-us/library/ms132319.aspx)：

```
SortedList<string, Person> list = 
          new SortedList<string, Person> (StringComparer.CurrentCulture);
Person person = new Person { Name = "aby", Age = "1" };
list.Add(person.Name, person);
person = new Person { Name = "aab", Age = "2" };
list.Add(person.Name, person);

foreach (Person p in list.Values)
    Console.WriteLine(p.Name); 
```

特别是阅读MSDN 文章中的*备注部分，比较这个类和*[`SortedDictionary<TKey, TValue>`类](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-06-07T23:54:31.063

旧线程，但这个线程 IMO 中的答案忽略了 OP 的实际问题。问题很简单——如何按排序顺序插入列表。这与“仅使用 SortedSet / SortedList”不同。基于使用以下内容与使用 SortedList 会有不同的特征和含义。

SortedSet 和 SortedList 都基于 Dictionary，并且不允许您添加具有相同密钥 AFAIK 的两个项目。

那么，您如何解释 { a, b, c, c, d } 之类的列表？

这是插入有序列表以使项目保持有序的正确方法：

```
var binarySearchIndex = list.BinarySearch(item, itemComparer);
//The value will be a negative integer if the list already 
//contains an item equal to the one searched for above
if (binarySearchIndex < 0)
{
    list.Insert(~binarySearchIndex, item);
}
else
{
    list.Insert(binarySearchIndex, item);
} 
```

通过 2010 年的这篇精彩文章回答：[https ://debugmode.net/2010/09/18/inserting-element-in-sorted-generic-list-list-using-binary-search/](https://debugmode.net/2010/09/18/inserting-element-in-sorted-generic-list-list-using-binary-search/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-16T20:56:21.320

如果您绝对希望使用列表，请尝试以下操作：

```
int loc;
for(loc = 0; loc < people.Count && people[loc].Name.CompareTo(personToInsert.Name) < 0; loc++);
people.Insert(loc, personToInsert); 
```

您可以替换`people[loc].Name.CompareTo(personToInsert.Name) < 0`为您正在测试的任何条件 - 您可以更改符号以使其下降而不是上升。`people[loc].Age < personToInsert.Age`例如，按年龄排序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T04:26:36.563

看看[`SortedSet<T>`](http://msdn.microsoft.com/en-us/library/dd412070.aspx)课堂。只需使用它而不是`List<T>`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-01T04:33:10.007

`SortedList`是你所需要的。创建一个 StringComparer 对象并将其传递给 sortedlist 的构造函数。元素在插入新项目时自动排序。

```
StringComparer stringComp = StringComparer.CurrentCulture;
SortedList sl = new SortedList(stringComp);
sl.Add("B", "SECOND");
sl.Add("A", "FIRST");
sl.Add("C", "THIRD"); 
```

# ninject - Ninject 3：如何将命名绑定与模块一起使用？

> ID：13170898
> 
> 赞同：0
> 
> 时间：2012-11-01T04:19:58.533
> 
> 标签：ninject

我是 Ninject 的新手（使用最新的 v3）。我的基础工作正常（包括没有模块的命名绑定，即直接在内核上），但我无法让它与模块一起使用。

该模块如下所示：

```
public class MainModule : NinjectModule
{
    public override void Load()
    {
        Bind<Window>().ToMethod(context => App.Current.MainWindow).Named("MainWindow");
    }
} 
```

我正在这样使用它：

```
 public MainViewModel Main
    {
        get
        {
            return kernel.Get<MainViewModel>("MainWindow");
        }
    } 
```

这导致 ActivationException 告诉我“没有匹配的绑定可用”。如果没有命名绑定，它可以正常工作。

如何将命名绑定与模块一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:07:09.693

您具有约束力`Window`，但请求`MainViewModel`. 这两件事之间没有相关性。所以我不知道为什么你认为这应该有效。

没有名字它就可以工作，因为像这样的自绑定对象`MainViewModel`是隐式绑定到自己的。这就是它起作用的原因。

更新：

如果我理解正确，那么你想要

```
Bind<Window>().ToMethod(context => App.Current.MainWindow).WhenParentNamed("MainWindow");
Bind<MainViewModel>().ToSelf().Named("MainWindow"); 
```

# css - 图像在 CSS 中设置但未在 HTML 中显示

> ID：13170899
> 
> 赞同：-1
> 
> 时间：2012-11-01T04:20:20.930
> 
> 标签：css, image

出于某种原因，我为我的图像设置的类没有显示我设置的图像，但是我已经计算出如果我`.book li, a.foo`可以让它们显示一个设置类的 5 个图像。

我怎样才能让我的课程显示每个单独的图像？

**HTML：**

```
 <div class="book">
                        <ul>
                            <li><a class="twitter" href="#"></a></li>
                            <li><a class="facebook" href="#"></a></li>
                            <li><a class="flickr" href="#"></a></li>
                            <li><a class="linkedin" href="#"></a></li>
                        </ul>
                </div> 
```

**CSS：**

```
.book ul{
    width:250px;
    height:70px;
    list-style:none;
    display:block;
    margin:-15px 0 25px 0;
}
.book li{
    width:70px;
    height:70px;
    display:inline-block;
    float:left;
    margin:0 0 0 -30px;
    padding:0 20px 0 0;
}

.book li a.twitter{
    background: url(images/twitter.png) no-repeat;
    height:70px;
    width:70px;
}
.book li a.facebook{
    background: url(images/facebook.png) no-repeat;
    height:70px;
    width:70px;
}
.book li a.flickr{
    background: url(images/flickr.png) no-repeat;
    height:70px;
    width:70px;
}
.book li a.linkedin{
    background: url(images/linkedin.png) no-repeat;
    height:70px;
    width:70px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:30:25.140

`<a>`标签本质上是内联元素，因此它们通常不会友好地添加背景图像而不在前景中添加某种内容/文本。

尝试添加`display:block;`到您的`.book li a`元素

您还可以通过将它们添加到泛型（非基于 id）来整合您的`height`和属性。`width``.book li a`

```
.book li a {
  display: block
  height: 70px;
  width: 70px;
} 
```

然后你只需要为 id 指定背景

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T04:32:51.050

给`float:left`你的`.book li a`

**像这样**

```
.book li a{
float:left;
} 
```

## ---------

**或者**

```
.book li a{
display:inline-block;
vertical-align:top;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T04:35:03.910

将 a 设置为块级元素并将其浮动到左侧。

```
a {
   display:block;
   float:left;
  } 
```

# php - 如何将 date_from 和 date_to 从一个 php 传递到另一个 php 以进行数据库查询

> ID：13170904
> 
> 赞同：0
> 
> 时间：2012-11-01T04:21:12.680
> 
> 标签：php

我使用 jquery ui 日历让用户选择开始和结束日期，单击第一个 php 页面中的链接在第二个 php 页面中执行 mydql 查询以将查询结果导出为下载 csv 文件（有些人说不可能这样做在一页中，它必须是两个 php 页面）。

我的问题是如何从第一个 php 传递 $date_from 和 $date_to 以及如何在第二页中获取这些值。

谢谢

这行得通！像这样的查询字符串：check.php?date_from=2012-09-01&date_to=2012-09-30

在 check.php 中，值可以是这样的：

```
$export_type = $_GET['export_type'];
$date_from = $_GET['date_from'];
$date_to = $_GET['date_to']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:28:00.807

在您的 html 表单中，您可以设置具有“名称”属性和`$date_from`变量值的元素，并将其传递给另一个页面，例如：

```
<form action="next_page.php" method="post">
<input type="text" name="text_name" value=<?= $date_from ?> />
</form> 
```

在 next_page.php 中，您可以使用**$_POST**变量访问它：

```
<? echo $_POST['text_name'] ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:30:12.367

您可以在一页上使用 Ajax 执行此操作。您也可以在只刷新一页的情况下在一页上执行此操作。有几种方法可以做到这一点。我能想到的一种方法是通过表单中的“提交”按钮接受来自 javascript 日历的数据（这也填充了来自您的 javascript 日历的数据）。像这样的东西：

页面.php：

```
<?php
  if(isset($_POST['formsubmit'])) {
    grab_form_data();
  }
?>
<html>...<body>
...
<script type="text/javascript">
  jquery_calendar();
  populates_form_field1_below_on_select();
</script>
...
<form method="POST" action="page.php">
<input id="field1" name="field1"></input>
<input type="submit" name="submit" value="submit"></input>
</form>
<?php
  create_csv_download_link_from_PHP_data_at_top_of_page();
?>
...
</html> 
```

# javascript - 我是否需要使用 TypeScript 在 JQueryStatic 定义文件中声明我的所有 JQuery 原型？

> ID：13170905
> 
> 赞同：2
> 
> 时间：2012-11-01T04:21:16.800
> 
> 标签：javascript, jquery, typescript

我有以下代码：

```
///<reference path="../typescript/jquery.d.ts" />

function addThemePrototypes() {
    var templateSetup = new Array();
    $.fn.addTemplateSetup = function(func, prioritary)
    {
        if (prioritary)
        {
            templateSetup.unshift(func);
        }
        else
        {
            templateSetup.push(func);
        }
    };
} 
```

当我尝试添加以下内容时：

```
 $('a').addTemplateSetup( 
```

在同一个文件中，我注意到没有智能感知，打字稿似乎不知道我刚刚添加的 addTemplateSetup 原型。

这是它工作的正确方式还是我总是需要将诸如 addTemplateSetup 的定义之类的内容添加到 JQueryStatic 定义文件中然后包含它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:59:05.797

您需要以某种方式声明它以使 Typescript 不会抱怨，最简单的方法是将其声明为 any：

```
interface JQuery {
    addTemplateSetup: any;
} 
```

但要获得最佳智能感知支持，还要添加有关参数类型的信息：

```
interface JQuery {
    addTemplateSetup: (func: Function, priority: bool) =>void;
} 
```

# networking - ESET - 网络中的 ARP 缓存中毒和相同 IP

> ID：13170906
> 
> 赞同：2
> 
> 时间：2012-11-01T04:21:30.060
> 
> 标签：networking, network-protocols, arp

我的 ESET SS5 防火墙在过去 24 小时内不断检测到相同的 IP 地址和 ARP 缓存中毒攻击（每 2 分钟一次）

我对 ARP 缓存中毒攻击进行了一些研究，例如如何将其用作 MiM 并将其用作默认网关

所以我安装了 Wireshark 并开始捕获网络...... 90% 的捕获记录是从不同来源到不同目的地的 ARP 广播数据包。我（从计算机网络教科书）了解到现代 ISP 不允许广播数据包，但有趣的是，90% 的捕获记录是 ARP 数据包。此外，“默认网关”通常是局域网中的路由器/交换机，那么为什么不同的计算机要求不同的 IP 地址“以它们的 MAC 地址响应”？

如果这是一个有网络打印机的联网区域（一家公司），那么通过 ARP 请求广播并询问谁拥有这个 IP 可能是合理的。但是在这种情况下，除非出于某种欺骗/黑客目的，否则为什么有人需要特定的 IP 地址。

这些是一直困扰着我的要点..以下是问题

1.  ISP 是否允许广播 ARP 数据包？
2.  ARP 请求局域网中其他 IP 的 IP 地址（同一子网 183.82.xx.xx ）是否感染了导致此问题的病毒？
3.  如果没有防火墙，结果会是什么？- // 虽然很蹩脚但想知道

我对网络和黑客的了解是半生不熟（仍在学习过程中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:31:27.867

1.  大多数 ARP 数据包是广播数据包，并且 ISP 必须允许这样做。否则 IP 到 MAC 的解析将无法发生，并且没有主机能够通过 IP 进行通信。

2.  不一定，但可能是。如果您、A 和 B 共享同一个 ISP 网关，并且 A 想与 B 通信，那么 A 和 B 必须将彼此的 IP 地址解析为 MAC 地址。这样做时，ARP 广播数据包将被广播到同一 IP 子网中的所有主机，包括您。

3.  ARP 广播包（实际上是所有 IP 广播包）只在同一个 IP 子网内广播，永远不会跳转到不同的 IP 子网。否则整个互联网都会因为广播包的网络风暴而崩溃。换句话说，即使您没有配置防火墙，ARP 广播数据包也不会从路由器的 WAN 接口跳转到 LAN 接口。

现在我已经写了所有的答案，我有点困惑。您在哪里安装了 Wireshark 以及在哪个界面上捕获？如果您在 LAN 内的机器上看到 ARP 数据包，那么 ARP 广播数据包一定来自内部，除非路由器配置错误或以某种方式损坏，它让 ARP 广播数据包从 WAN 到 LAN。这是一个非常不可能的情况。

# ruby-on-rails - 有什么方法可以使用“before_filter :authenticate_user！” 连同表中的布尔值？

> ID：13170907
> 
> 赞同：5
> 
> 时间：2012-11-01T04:21:32.673
> 
> 标签：ruby-on-rails, devise

我正在使用**设计**。我在表中添加了一个`admin`布尔列`users`：

```
class AddAdminToUsers < ActiveRecord::Migration
  def self.up
    add_column :users, :admin, :boolean, :default => false
  end

  def self.down
    remove_column :users, :admin
  end
end 
```

我只想让管理员销毁用户。`before_filter :authenticate_user!`通过仅允许登录用户执行操作来设计的作品。有没有办法添加一些东西，`:authenticate_user`以便只有用户`:admin => true`才能执行操作（例如销毁操作）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T04:46:05.230

```
before_filter :authenticate_user!
before_filter :is_admin?

def is_admin?
  if current_user.admin?
    true
  else
    render :text => 'Who are you to doing this? :)'
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T04:47:16.540

我强烈建议将所有管理操作放在应用程序中的管理命名空间下，并使用 CanCanCan 之类的 gem 进行授权。

例如，删除`User`对象的操作将在命名空间`UsersController`下方`Admin`。控制器基本上是这样定义的：

```
 class Admin::UsersController < Admin::BaseController
   def destroy
     user = User.find(params[:id])
     user.destroy
     redirect_to admin_users_path
   end
 end 
```

这里`Admin::BaseController`引用的是为您的管理命名空间提供基础的控制器。它应该授权用户，如下所示：

```
 class Admin::BaseController < ApplicationController
   before_filter :authenticate_user!
   before_filter :authorize_admin

   def authorize_admin
     authorize! :manage, :all
   end
 end 
```

`authorize!`助手将由`CanCan`提供。我不会重复[CanCan wiki](https://github.com/ryanb/cancan/wiki/Defining-Abilities)关于设置`Ability`课程的内容。CanCan 也包含在[作者的精彩截屏视频中](http://railscasts.com/episodes/192-authorization-with-cancan)。

在这个`Ability`类中，您应该检查该布尔字段，然后让 CanCan 处理授权。

要实际路由到这个 new ，请在文件`Admin::UsersController`中定义它：`config/routes.rb`

```
namespace :admin do
  resources :users
end 
```

如果您不想使用 CanCanCan，还有[Pundit](https://rubygems.org/gems/pundit)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T04:48:17.770

建议不要修改 :authenticate_user! 等第三方方法的行为。您可以通过设置第二个过滤器轻松实现，可能如下所示：

```
before_filter :ensure_admin, :only => [:new, :create]

private

def ensure_admin
 unless current_user && current_user.admin?
   render :text => "You are not authorised to perform this action", :status => :unauthorized
 end
end 
```

# actionscript-3 - 在 Flash 中绘制位图会产生 Alpha 通道问题

> ID：13170909
> 
> 赞同：1
> 
> 时间：2012-11-01T04:21:43.027
> 
> 标签：actionscript-3, flash, drawing, alpha-transparency

我正在使用 AS3 在 Flash 中创建绘图应用程序。“笔触”是用位图创建的。当笔触分散时，此代码似乎可以正常工作。[见图1]

但是当在同一个地方重复点击同一个笔触时，很明显，笔触不仅添加了 alpha，而且还删除了它。[参见图 2] 我想消除笔触周围的“盒子”形状。

我目前使用的代码片段如下。是否有“alpha add”之类的东西，这样不会发生这种 alpha 减法？笔触斑点在这里供参考。[见图3]

1 [绘图应用程序 http://theluv.is/downloading/drawImg1.png](http://theluv.is/downloading/drawImg1.png) 2 [绘图应用程序 http://theluv.is/downloading/drawImg2.png](http://theluv.is/downloading/drawImg2.png) 3 [绘图应用程序 http://theluv.is/downloading/brushBlob.png](http://theluv.is/downloading/brushBlob.png)

```
function stampImage(){
var matrix:Matrix = new Matrix();
matrix.translate(mouseX + brushOffsetX, mouseY + brushOffsetY);

maskSprite.graphics.beginBitmapFill(blob, matrix, false, false);
maskSprite.graphics.drawRect(mouseX + brushOffsetX, mouseY + brushOffsetY, blob.width, blob.height);
maskSprite.graphics.endFill();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:09:43.633

使用[BitmapData.copyPixels](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyPixels%28%29)方法。您可以在那里指定 alpha 混合。当然，您必须修改您的代码。首先，您将拥有一个画布位图数据。

```
var bmpd:BitmapData; 
```

要在屏幕上绘制它，您只需创建一个 Bitmap 对象。

```
var bmp:Bitmap = new Bitmap(...);
bmp.bitmapData = bmpd;
addChild(bmp); 
```

当你想画一些东西时，使用

```
bmpd.copyPixels(blob, blob.rect, new Point(x,y), null, null, true); 
```

其中 blob 是带有画笔纹理的 BitmapData。

问题是如果你想旋转画笔纹理。在这种情况下使用[BitmapData.draw](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#draw%28%29)。

# java - Java 绘制特定对象

> ID：13170910
> 
> 赞同：2
> 
> 时间：2012-11-01T04:22:03.977
> 
> 标签：java, swing, optimization, paint

我正在用 Java 编写一个基于网格自上而下视图的游戏。我对 JPanel paintComponent() 和 repaint() 方法不是很熟悉，并且在创建快速屏幕绘制功能时遇到了麻烦。每个图块都是一个带有 Tile.paintTile(g,x,y) 的对象，用于在 g 上的 (x,y) 处绘制图块。我想找到一种只绘制特定瓷砖的好方法，但是我不知道如何做到这一点。我有一个带有 TileAt(x,y) 的 World 类来获取瓷砖，但我所做的每一次尝试都会导致口吃或抛出错误。任何帮助表示赞赏！-Renmusxd

编辑：我试过的：我还不太习惯Java图形，我尝试覆盖paintComponent并添加paintComponent（g，x，y）但它不喜欢我不调用repaint。我不再拥有代码，因为我用paintAll 版本替换了它。对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:05:52.267

通常，每次重新绘制整个屏幕会更容易——在大多数现代机器上使用 Swing 应该足够快。

如果你真的想做部分更新，那么最好的方法可能是：

*   创建一个 offscreen `BufferedImage`，它应该与您的游戏显示区域大小相同（或者如果您想允许滚​​动，则稍微大一些）
*   将您的图块绘制到此屏幕外图像中。
*   当您重绘视图（即在`paintComponent`方法中）时，只需将整个缓冲图像一次性绘制到屏幕上。

# jquery - JQuery tablesorter背景图像问题

> ID：13170912
> 
> 赞同：0
> 
> 时间：2012-11-01T04:22:22.647
> 
> 标签：jquery, tablesorter

[我已经从http://tablesorter.com/docs/](http://tablesorter.com/docs/)实现了 JQuery 表排序器 。

排序部分工作正常，但我无法将背景图像放入表头。

**HTML表格代码：**

```
echo '<table id="viewAll" class="tablesorter">';
            echo '<thead>';
            echo '<tr>';
            echo '<th>Product</th>';
            echo '<th>PBI</th>';
                echo '<th>Status</th>';
            echo '<th>Summary</th>';
            echo '<th>Record Created</th>';
            echo '<th>Record Updated</th>';

            echo '</tr>';
            echo '</thead>'; 
```

**获取背景图片的 CSS 代码：**

```
table.tablesorter thead tr  .header {
    background-image: url(images/tablesorter/bg.gif);
    background-repeat: no-repeat;
    background-position: left top;
    cursor: pointer;
} 
```

正如我所说的排序工作正常，我可以获得光标指针，但似乎无法打开背景图像。

我错过了什么..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:47:48.033

我觉得css选择器很糟糕。根据您要放置背景的内容，`<thead>`或者每个`<th>`这可能会起到作用[http://jsfiddle.net/MVCmx/1/](http://jsfiddle.net/MVCmx/1/)。此外，请检查图像 url 是否实际上引用了您的应用程序中的某些内容，图像路径可能是错误的。

```
table.tablesorter > thead {
  background-image: url('yourimagepath')
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T04:45:13.763

正确检查您的图像路径，相对路径应如下所示并给出背景 url 而不是背景图像

```
background:url("../images/header-bg.gif"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:28:29.157

你在windows 7上使用apache吗？我有类似的问题。尝试了很多东西，我发现我什至无法直接从 URL 访问图像。它说“禁止”

我的问题是主题文件夹中的 bg.gif、as.gif 和 desc.gif 图像都是加密的。（你可以通过他们在 Vista 或 7 中的绿色文件名来判断）

只需通过单击文件->属性->高级来取消加密，然后取消选中加密框。这应该可以解决问题。

# php - WP 中的高级自定义字段 - 图像

> ID：13170913
> 
> 赞同：0
> 
> 时间：2012-11-01T04:22:38.527
> 
> 标签：php, wordpress, field

我无法让 ACF 显示图像。

我创建了一个字段类型为 image-1 的字段

```
<img src="<?php the_field('image-1'); ?>" alt="" /> 
```

它所显示的只是 chrome 中损坏的图像。有没有人熟悉这个插件并且知道如何让图像字段工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:20:54.763

我假设您的意思是字段类型是“image”，而不是“image-1”。你的代码是完全正确的。您更有可能遇到其他不相关的问题。我猜你可能有某种权限问题，并且图像实际上并没有被上传。

首先，检查 javascript 控制台。在 Chrome 中，右键单击（在 mac 上按住 ctrl 单击）图像，选择“检查元素”以打开 Chrome 开发工具，然后查看 img src 是什么。在开发工具中，右键单击 img src 并选择“在新选项卡中打开”。那应该直接打开图像。我的预感是图像不会以这种方式打开。如果是这种情况，那么 ACF 没有正确上传图像，并且该错误与您用于显示它的 PHP 代码无关（正如我所说的完全正确）。

您需要研究各种与权限相关的问题。这是一个此类问题的链接：http: [//support.advancedcustomfields.com/discussion/3395/image-upload-bug/p1](http://support.advancedcustomfields.com/discussion/3395/image-upload-bug/p1)。

更新：

根据您关于使缩略图正常工作的评论，这是您需要的代码：

```
$attachment_id = get_field('image-1');
$size = "thumbnail"; // (thumbnail, medium, large, full or custom size)

$image = wp_get_attachment_image_src( $attachment_id, $size );
// url = $image[0];
// width = $image[1];
// height = $image[2];
?>
<img src="<?php echo $image[0]; ?>" />
<?php 
```

# android - jquery 移动下拉菜单在 android 2.2.1 及更高版本中不起作用

> ID：13170914
> 
> 赞同：2
> 
> 时间：2012-11-01T04:22:40.310
> 
> 标签：android, cordova

我对电话间隙很陌生。我只是尝试一个 android phone-gap 应用程序，在这个应用程序中我使用下拉列表，它在 android 2.2 设备中工作正常。但它不适用于android2.2.1及以上版本的android设备。我搜索了这个问题，最后找到“data-native-menu="false"" 如果我​​使用这个意味着它的工作但我只想要原生菜单样式，如果我使用 data-native-menu="false" 意味着，在android 键盘下一个按钮被禁用。

如果我单击文本框意味着键盘即将到来，那么我单击上一个或下一个意味着时间下拉菜单即将到来。但是如果我直接点击下拉，那个时候下拉就来了。

如何解决这个问题呢？。请问有人可以帮助我吗？

# asp.net - 在asp.net网站项目的3层架构中传递大量参数

> ID：13170920
> 
> 赞同：0
> 
> 时间：2012-11-01T04:23:09.433
> 
> 标签：asp.net, 3-tier

我刚刚开始使用 3 层架构实现应用程序开发。此外，我正在遵循一些良好的编码实践。在应用程序中，我需要传递一些大量数据来保存（大约 20 个参数）学生详细信息。但是正如良好的编程习惯所说，“不要在函数中传递超过 5 个参数。如果必须传递更多，则使用对象将数据作为单个实体传递”。

我应该如何将大量数据从表示层传递到 DAL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:31:32.927

创建一个学生的属性类并将其对象用作参数，例如

```
 [Serializable]
public class CStudentProps
{
    public String StudentID { get; set; }
    public String StudentName { get; set; }
    public String StudentEmailID { get; set; }
    public String Status { get; set; }
    ...
    ...
} 
```

并像这样创建一个 CStudentProps 的实例

```
CStudentProps student=new CStudentProps()
student.name="";
.....
..... 
```

然后调用函数

```
addStudent(CStudentProps  ob); 
```

# web - 当网站被点赞时，图像没有出现在时间轴上，在 Linter 中的工作不一致

> ID：13170921
> 
> 赞同：0
> 
> 时间：2012-11-01T04:23:13.973
> 
> 标签：web, facebook-like, facebook-opengraph, facebook-wall

我正在为我的教会创建一个网站，并且对 html 相当缺乏经验。但是，除了让图像加载到时间轴上之外，我已经设法让 Like 按钮工作。我运行 linter 工具，有时它会显示图像，有时它不会。这是我的元标记：

```
<head>
<meta name="description" content="Burnt Chimney United Methodist Church" />
<meta name="keywords" content="Burnt Chimney, Church, United Methodist" />
<meta property="og:title" content="Burnt Chimney United Methodist Church" />
<meta property="og:type" content="non_profit" />
<meta property="og:image" content="http://www.gbgm-umc.org/fbcumc/fb_outside.jpg" />
<meta property="og:url" content="http://www.gbgm-umc.org/fbcumc/index.html" />
<meta property="og:site_name" content="Burnt Chimney UMC" />
<meta property="fb:admins" content="cline.m.a" />
</head> 
```

Linter 工具始终给出以下警告：

> 应该显式提供“og:description”属性，即使可以从其他标签推断出一个值

每隔一段时间，它就会发出这样的警告：

> og:image标签的url引用的图片无法下载

我正在使用我使用 Like Button 创建工具创建的 Like 按钮的 iframe 版本。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:44:04.717

确保您没有在脚本中使用 fbml，因为 facebook 不支持 fbml，您可以调用 php API 而不是 fbml。

元或内容标签不会发生这种情况，您可以调用调用 google api 来加载您的脚本。

这是 Facebook 调用 Facebook 的任何 API 来运行脚本所必需的。

[https://www.facebook.com/Usiipage/app_429241580427755](https://www.facebook.com/Usiipage/app_429241580427755)

看到这个 fangetting 应用程序。

# mysql - MySQL 列到行

> ID：13170927
> 
> 赞同：1
> 
> 时间：2012-11-01T04:24:15.200
> 
> 标签：mysql

> **可能重复：**
> [MYSQL - 行到列](https://stackoverflow.com/questions/1241178/mysql-rows-to-columns)

我在 MySQL 中有下表：

[原始表](https://dl.dropbox.com/u/8840372/table.png)

有谁知道如何在表格上进行选择以获得以下结果：

```
GivenName | FamilyName | EMailHome       | PhoneNrHome
--------------------------------------------------------
Angus     | Young      | angus@gmail.com | (123) 456 789 
```

因此，链接到相同 UserID 的字段应按列排列。

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:30:07.953

```
Please try self as per below example :

SELECT  
  IFNULL(empId,'Totals') AS EmpId,       -- outer query labels rollup row 
  sums.2005, sums.2006, sums.2007,       -- and calculates horizontal sums 
  sums.2005 + sums.2006 + sums.2007 AS Sums 
FROM (                                   -- inner query groups by employee 
  SELECT                                 -- with an expression for each column 
    EmpID, 
    SUM(IF(Yr=2005,sales,0)) As '2005', 
    SUM(IF(Yr=2006,sales,0)) As '2006', 
    SUM(IF(Yr=2007,sales,0)) As '2007' 
  FROM Sales 
  GROUP BY EmpID WITH ROLLUP 
) AS sums; 
+--------+----------+----------+----------+-----------+ 
| EmpId  | 2005     | 2006     | 2007     | Sums      | 
+--------+----------+----------+----------+-----------+ 
| 1      | 12000.00 | 18000.00 | 25000.00 |  55000.00 | 
| 2      | 15000.00 |  6000.00 |     0.00 |  21000.00 | 
| 3      |     0.00 | 20000.00 | 24000.00 |  44000.00 | 
| Totals | 27000.00 | 44000.00 | 49000.00 | 120000.00 | 
+--------+----------+----------+----------+-----------+ 
```

# r - R：生存包中的KM曲线图改变x轴范围

> ID：13170929
> 
> 赞同：1
> 
> 时间：2012-11-01T04:24:19.887
> 
> 标签：r, plot

我正在使用生存包为两个群体生成 KM 曲线，但是当我尝试定义 xmax 参数时，我无法将 x 轴范围从 0-15 扩展到 0-50。

这是我的代码：

```
 library(sm)
library(survival)
comb = read.csv("S:/Novocure/ChemoSKTime2Resp.csv", head = TRUE)
comb
survobj = with(comb, Surv(SK.response.time,Censored))
survobj

# Compare the survival distributions of nonresponders(0) and responders(1)

fitresp = survfit(survobj ~ response, data=comb)
fitresp
summary(fitresp)

# plot the survival distributions by response

plot(fitresp, xlab="Tumor Progression Time in Months", 
  ylab="% Progressed", yscale=100, col=c("red","blue"),
  main="Chemo Time to Tumor Progression Distribution", xmax = 50) 
  legend("topright", title="Chi-sq = 5.2, P = 0.0222", 
  c("Non-responders", "Responders"), fill=c("red", "blue")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:12:46.607

to的`xmax`参数`plot.survfit`似乎只缩短了 x 轴的范围。要扩展它，请改用参数`xlim`：

```
plot(fitresp, xlab="Tumor Progression Time in Months", 
  ylab="% Progressed", yscale=100, col=c("red","blue"),
  main="Chemo Time to Tumor Progression Distribution", xlim = c(0,50)) 
```

# python - 有什么方法可以将新位置添加到 nltk 查找 wordnet 语料库的位置列表中？

> ID：13170933
> 
> 赞同：2
> 
> 时间：2012-11-01T04:25:04.957
> 
> 标签：python, ubuntu, nltk

我无法使用 nltk wordnet lemmatizer，因为由于访问权限问题，我无法在我的大学计算机上下载 wordnet 语料库。

尝试这样做时出现以下错误：

```
**********************************************************************   Resource 'corpora/wordnet' not found.  Please use the NLTK   Downloader to obtain the resource:  >>> nltk.download()   Searched in:
    - '/home/XX/nltk_data'
    - '/usr/share/nltk_data'
    - '/usr/local/share/nltk_data'
    - '/usr/lib/nltk_data'
    - '/usr/local/lib/nltk_data'
********************************************************************** 
```

当我在家里遇到同样的问题时，我可以通过两种方式解决它：

1.  使用 nltk.download()，标准方式和
2.  在 /home/XX/nltk_data 位置创建一个新文件夹，然后将语料库目录粘贴到其中。

现在在大学里，我只能访问 /home/XX/bin 而不能直接访问 /home/XX。那么无论如何我可以将 wordnet 语料库粘贴到 /home/XX/bin 中，然后以某种方式让 nltk 在该文件夹中查找语料库吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T04:55:42.133

设置[NLTK_DATA 环境变量](http://nltk.org/data.html)：

```
export NLTK_DATA=/path/to/nltk_data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:16:02.077

在这种情况下，virtualenv 也是一种选择。

# asp.net-mvc - 带有 ASP.NET MVC 的 Kendo UI 中的分层网格

> ID：13170936
> 
> 赞同：0
> 
> 时间：2012-11-01T04:25:24.803
> 
> 标签：asp.net-mvc, grid, kendo-ui

我正在使用 Kendo UI MVC 控件实现 3 级层次结构网格。在第一级将有用户角色，扩展用户角色将显示为该角色定义的所有功能，扩展功能将显示为该功能定义的所有功能操作。

在功能和功能操作网格的第一列中将有复选框，以便用户选中复选框以将功能操作分配给功能并将功能分配给用户角色。在功能操作网格下方将有提交按钮以保存数据（通过选中复选框分配给角色的所有功能操作和功能）。

现在，我对此有几个问题。

1.  如何在单击提交按钮时将功能和功能操作网格数据模型提交到我的操作方法？
2.  我想如果选中任何功能复选框，那么默认情况下所有功能操作都会被选中？
3.  是否可以在层次结构网格中使用剑道 UI 网格的默认保存更改按钮。我尝试使用工具栏实现此功能。保存（）按钮，但按钮未显示在网格中。

# c++ - STL Map - 何时使用自定义比较器？

> ID：13170937
> 
> 赞同：0
> 
> 时间：2012-11-01T04:25:35.173
> 
> 标签：c++, map

我`std::map`用来存储指向我用来包装不同类型对象的类的指针。它用于表示来自 Lua 脚本语言以及其他 Lua 类型的表。在制作表格包装器时，我意识到`std::map`将指针存储在树中时会使用默认比较器。起初这对我来说似乎是一个问题，但后来我想了更多，并决定它不会。无论默认比较是什么，这都不重要（我认为）。

所以，我要问的是这个。这真的不重要吗？如果是这样，什么时候想要使用自定义比较器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:30:49.350

我认为您的问题缺乏明确性。假设您的意思是：

1.  std::map 中的*键*是指向类的指针。这些*值*是其他未指定的值。
2.  尽管您使用的是有序关联容器，但您并不真正关心密钥的存储顺序，因为您只会进行精确查找。

在这种情况下，按地址比较指针就可以了。但是，对于这个用例，您可能希望使用`unordered_map`C++11 中正式可用的（也称为哈希表），但通常在 C++ 库中可用，即使是 C++03。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T04:50:46.677

map 基于 key 的弱等价性存储和检索值。假设您在映射 m1 中查找键 k1 - （因为映射实现为平衡 b 树）搜索将从根节点开始并根据节点处的值小于或大于 k1 向左或向右进行k1。如果 "value_at_node < k1" 和 "k1 < value_at_node" 比较结果为假，则映射得出结论，即在当前节点处找到了键。

如果 key 是指针类型，则指针值由默认比较器进行比较。指针值的弱等价与强等价（= 运算符）的结果相同。如果在键位置（内存中的地址）上进行的键比较不是您想要的，而是希望根据地址处的值进行比较，那么应该使用自定义比较器。就此而言，任何没有定义 < 运算符的键类型都不能使用映射容器 - 将会出现编译器错误。

比较器应该很好地符合弱等价规则 - !(v < k) && !(k < v) 与 v == k 相同。这应该由定制的比较器正确实施和维护。

# c# - 使用未分配的局部变量“bar”

> ID：13170939
> 
> 赞同：-2
> 
> 时间：2012-11-01T04:25:49.623
> 
> 标签：c#

为什么这样做：

```
Object bar;
Foo(bar); 
```

在 C# 中我得到一个

```
Use of unassigned local variable 'bar' 
```

错误？

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:27:32.603

如错误消息所述，如何在使用变量之前为其赋值。

如果您将变量传递给一个方法，您可能想看看使用[out 关键字](http://msdn.microsoft.com/en-us/library/ee332485.aspx)

> out 关键字导致参数通过引用传递。这类似于 ref 关键字，只是 ref 要求在传递变量之前对其进行初始化。要使用 out 参数，方法定义和调用方法都必须显式使用 out 关键字。

从链接中，您可以看到如果您希望传递给方法并期望在此之后初始化变量，如何使用该变量。

```
class OutExample
{
    static void Method(out int i)
    {
        i = 44;
    }
    static void Main()
    {
        int value;
        Method(out value);
        // value is now 44
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T04:26:58.923

分配一些东西给酒吧。

```
Object bar = new Object(); 
```

或将其分配为 null

```
Object bar = null; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T04:29:02.977

您的变量“bar”尚未实例化，因此无法使用。只需将其设置为 null，C# 将允许您使用它。C# 这样做是为了在变量可以使用之前强制对其进行初始化。真的，这只是一种很好的编程习惯。

```
Object bar = null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T04:27:05.097

您需要在使用变量之前对其进行初始化：

```
Object bar = null; 
```

将其初始化为`null`与未初始化相同，但将使其可用。如果您想要一个实际的值/类实例，请尝试：

```
Object bar = new Object(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T04:27:45.747

为其赋值：

```
Object bar = new Object(); 
```

或者

```
Object bar = null; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T04:28:42.897

使用前赋值。null 将适用于对象。默认适用于任何类型。

```
Object bar = default (Object) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T05:20:40.187

最初，您必须分配`null`给`bar`

```
Object bar = null; 
```

# java - java中以下代码中导致空指针异常的原因是什么？

> ID：13170946
> 
> 赞同：2
> 
> 时间：2012-11-01T03:25:23.967
> 
> 标签：java, exception

当我运行以下代码时，我得到空指针异常。我无法弄清楚为什么会这样。

```
public class LinkedList<T> {
private Link head = null;
private int length = 0;

public T get(int index) {
    return find(index).item;
}

public void set(int index, T item) {
    find(index).item = item;
}

public int length() {
    return length;
}

public void add(T item) {
    Link<T> ptr = head;
    if (ptr == null) {
        // empty list so append to head
        head = new Link<T>(item);
    } else {
        // non-empty list, so locate last link
        while (ptr.next != null) {
            ptr = ptr.next;
        }
        ptr.next = new Link<T>(item);
    }
    length++; // update length cache
}

// traverse list looking for link at index
private Link<T> find(int index) {
    Link<T> ptr = head;
    int i = 0;
    while (i++ != index) {
        if(ptr!=null) {
            ptr = ptr.next;
        }
    }
    return ptr;
}

private static class Link<S> {
    public S item;
    public Link<S> next;

    public Link(S item) {
        this.item = item;
    }
}

public static void main(String[] args) {
    new LinkedList<String>().get(1);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:56:50.107

```
new LinkedList<String>().get(1) 
```

返回

```
find(1).item 
```

`find(1)`返回`head`。但是`head`是空的，所以你要返回

```
null.item 
```

这是一个空指针异常。您应该检查是否`find(index)`为 null in `get`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:31:30.487

您永远不会验证它`ptr`不在`null`.`find()`

# c# - opencv_imgproc.dll 抛出 BadImageFormatException

> ID：13170952
> 
> 赞同：0
> 
> 时间：2012-11-01T04:27:09.857
> 
> 标签：c#, opencv, emgucv, badimageformatexception

我正在使用 Emgu CV（用于 x64）构建图像处理应用程序，并且我想对图像使用过滤功能。所以，我使用`opencv_imgproc.dll`但它抛出 [`BadImageFormatException`](http://msdn.microsoft.com/en-us/library/system.badimageformatexception.aspx)

```
Solution Platform : x86 
Operating System : Windows 7 - 64
Language: C# 
IDE: Visual C# 2010 express 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:56:55.543

[Emgu](http://www.emgu.com/wiki/index.php/Main_Page)是 OpenCV 的托管包装器。由于 OpenCV 是非托管的，因此您需要确保使用您正在使用的 Emgu 版本的正确设置进行编译。

根据评论中发布的例外情况（[http://pastie.org/5170481](http://pastie.org/5170481)和[http://pastie.org/5170499](http://pastie.org/5170499)供参考），正在编译的 Emgu 版本是 x86 版本，这意味着它依赖的 OpenCV DLL on 将需要编译为 32-bit 。要运行您的代码，无论您运行的操作系统的位数如何，`Platform target`您项目的 Build 设置中的 都需要设置为。`x86`

要使用 64 位版本的 Emgu，您需要下载为 64 位编译的版本（您可以在[此处](http://sourceforge.net/projects/emgucv/files/emgucv/2.4.2/)查看不同的选项），然后将其设置`Platform target`为`x64`.

# scala - 使用 Ensime + SBT 浏览 scala 库

> ID：13170953
> 
> 赞同：6
> 
> 时间：2012-11-01T04:27:13.800
> 
> 标签：scala, emacs, sbt, ensime

是否可以使用 Ensime 和 SBT 去定义 Scala 库类？

我知道可以看到元素的定义（使用 M-. 或 Control+Left-Click），并且可以从那里看到文档页面。有没有办法将此功能也绑定到 src 中？

更新：

我的项目配置（.ensime 文件）：

```
(
  :root-dir "/Users/eugene/tmp/scrap"
  :sources (
    "/Users/eugene/tmp/scrap"
  )
  :reference-source-roots (
    "/usr/local/Cellar/scala/2.9.2/libexec/src"
  )
 :compile-deps (
    ""
  )
  :target "/Users/eugene/tmp/scrap"
) 
```

/usr/local/Cellar/scala/2.9.2/libexec/src 包含：

```
scala-compiler-src.jar scala-library-src.jar  scala-swing-src.jar
scala-dbc-src.jar      scala-partest-src.jar  scalap-src.jar 
```

构建.sbt：

```
name := "scrap"

version := "0.1-SNAPSHOT"

scalaVersion := "2.9.2" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:29:52.120

下载 scala-library 的源代码，然后`:reference-source-roots`在您的[项目配置文件](http://aemoncannon.github.com/ensime/index.html#tth_sEc3.3)中进行设置。

# java - 在运行时为 JTable 创建行标题

> ID：13170969
> 
> 赞同：2
> 
> 时间：2012-11-01T04:29:10.177
> 
> 标签：java, swing, jtable, jtableheader

![在此处输入图像描述](../Images/7d6fe6357015fa84547e555c5b66d19c.png)

我刚刚开始使用`JTable`. 这是我的表格示例。添加行按钮将行添加到表中。我想为此表创建行标题。我怎样才能做到这一点？

任何人都可以帮助我吗？

示例表的代码是：

```
package test;

import javax.swing.*;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

import javax.swing.table.*;

import test.InsertRows.CellEditor;

public class SampleTable extends JFrame {

JTable table;
JPanel panel;
DefaultTableModel dataModel;

public SampleTable () {
    super("My Table Example");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    onInit();
} 

void onInit()
{
    JButton b=new JButton("Add Row");
    b.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e)
        {
            // TODO Auto-generated method stub
            insertNewRow();

        }

    });

    panel = new JPanel(new BorderLayout());

    String[] columnNames = {
            "Name",
            "OID",
            "Index",
            "Value",
    };
    Object[][] data = {
            {"sysLocation","1.3.6.1.2.1.1.6","0",""},
                {"sysContact","1.3.6.1.2.1.1.4","0",""},
                    {"sysDescr","1.3.6.1.2.1.1.1","0",""}

    };

    dataModel = new DefaultTableModel();
    for (int col = 0; col < columnNames.length; col++) {
        dataModel.addColumn(columnNames[col]);
    }
    for (int row = 0; row < 3; row++) {
        dataModel.addRow(data[row]);
    }

    table = new JTable(dataModel);
    table.setDefaultEditor(Object.class, new CellEditor(this, table));
    table.setPreferredScrollableViewportSize(new Dimension(600, 120));
    table.setFillsViewportHeight(true);

    //Create the scroll pane and add the table to it.
    JScrollPane scrollPane = new JScrollPane(table);

    //Add the scroll pane to this panel.
    panel.add(scrollPane,BorderLayout.CENTER);
    panel.add(b,BorderLayout.SOUTH);
    panel.setOpaque(true); //content panes must be opaque
    setContentPane(panel);

    //Display the window.
    pack();
    setVisible(true);
}
public static void main(String[] args) {
    SampleTable myFrame = new SampleTable();
} 
private void insertNewRow()
{

    if(vaidCheck(table)){
        dataModel.insertRow(table.getRowCount(),
                new Object[] {"", "", "", ""}
                );
        dataModel.fireTableRowsInserted(
                dataModel.getRowCount(),
                dataModel.getRowCount()
        );
    }
    else{
        JOptionPane.showMessageDialog(null,"Field is empty");                                                                            
    }

}
public boolean vaidCheck(JTable table)
{
      if(table.getCellEditor()!=null){
          table.getCellEditor().stopCellEditing();
      }
      for(int row=0;row< table.getRowCount();row++){
          for (int col=0;col<table.getColumnCount();col++){
              String om=table.getValueAt(row,col).toString();
              if(om.trim().length()==0){
                  return false;
              }
          }
      }
      return true;
 }

 public class CellEditor extends DefaultCellEditor
  {

        /**
         * 
         */
        private static final long serialVersionUID = 1L;
        private JTable m_Table = null;
        public CellEditor(JFrame parentFrame, JTable table) { 
            super(new JTextField());
            super.setClickCountToStart(1);
            m_Table = table;
        }
        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, final int row, int column)
        {
            if(column == 0){
                 Object[] objectArray = {"Nikhil","Nijil"};
                    JComboBox comboBox = new JComboBox(objectArray);
                    comboBox.setEditable(true);
                    comboBox.setSelectedItem(value);

                    ItemListener itemListener = new ItemListener() {
                        public void itemStateChanged(ItemEvent e) {
                            if(e.getStateChange() == ItemEvent.SELECTED) {
                                if(null != m_Table.getCellEditor()){ 
                                    m_Table.getCellEditor().stopCellEditing();
                                }

                                m_Table.setValueAt(e.getItem(), row, 0);
                            }
                        }
                    };
                    comboBox.addItemListener(itemListener);
                    return comboBox;
            }
            if(column == 2){

            }
            JTextField textField = (JTextField)super.getTableCellEditorComponent(table, value, isSelected, row, column);
            return textField;

        }
  }
} 
```

![在此处输入图像描述](../Images/8694ff31cfca5039b60fb6a14ab1c4bb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T05:35:03.550

我希望我对这个问题的解释是正确的。要显示行标题，您需要创建一个新的单元格渲染器并将其设置在所需的列上。例如，这是一个模拟表头的基本渲染器：

```
static class RowHeaderRenderer extends DefaultTableCellRenderer {
    public RowHeaderRenderer() {
        setHorizontalAlignment(JLabel.CENTER);
    }

    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
            int column) {
        if (table != null) {
            JTableHeader header = table.getTableHeader();

            if (header != null) {
                setForeground(header.getForeground());
                setBackground(header.getBackground());
                setFont(header.getFont());
            }
        }

        if (isSelected) {
            setFont(getFont().deriveFont(Font.BOLD));
        }

        setValue(value);
        return this;
    }
} 
```

要设置它，您可以执行以下操作：

```
table.getColumnModel().getColumn(0).setCellRenderer(new RowHeaderRenderer()); 
```

这是基于发布的代码的样子：

![在此处输入图像描述](../Images/20aa26de9c2fdd212d2249132555e803.png)

# php - 在php中包含文件

> ID：13170970
> 
> 赞同：1
> 
> 时间：2012-11-01T04:29:10.963
> 
> 标签：php

我是一名 jsp 程序员，自己做了一些功课来学习 php ;) 所以我的问题是在 php 文档中包含文件。这里要解释的是代码。

**索引.php**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Home</title>
</head>
<body>
<?php include("/php/lib/banner.php"); ?>
</body>
</html> 
```

**横幅.php**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Banner</title>
</head>
<body>
<table width="100%">
<tr>
<td>
<img src="../../images/banner.jpg" width="100%" /></td>
</tr>
</table>
</body>
</html> 
```

**文件位置：**

```
main\index.php  
main\php\lib\banner.php  
main\images\banner.jpg 
```

我得到的错误是索引页面中没有显示图像，但是当我直接访问banner.php时它可以工作

请建议。

问候 Sworoop Mahapatra

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:32:09.803

包含字面意思是将一个文件的内容放入另一个文件中，因此您希望路径是您将在 index.php (images/banner.jpg) 中使用的路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T04:39:24.107

当您使用 include 函数包含一个 php 文件时，解析器实际上从“banner.php”中获取内容并插入到它被调用的位置。

现在图像源虽然您引用了banner.php的目录，但在`include`使用时应该使用正确的指针引用index.php的目录（调用它的文件的目录）

在您的情况下，它是从两个目录请求图像**UP**图像不存在的主目录！

工作使用：

`<img src="images/banner.jpg" width="100%" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:33:12.270

```
This should work:

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Banner</title>
</head>
<body>
<table width="100%">
<tr>
<td>
<img src="images/banner.jpg" width="100%" /></td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T04:39:07.410

当您加载 index.php 时，banner.php 的位置从...开始

`main\`

当您单独加载banner.php时，位置是......

`main\php\lib\`

您不能真正拥有一个同时适用于两者的 URL。您需要单独加载横幅吗？如果您只需要横幅在您的 index.php 中工作，那么将该行更改为...

`<img src="images/banner.jpg" width="100%" /></td>`

它会在 index.php 中运行，但在加载banner.php 时不会。

要让它同时工作，您需要将它们复制到同一个文件夹，或者至少稍微修改一下文件夹的结构。

编辑：如果你能告诉我这个横幅需要放在其他文件的位置，只需列出，我会尝试看看它是如何排序的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T04:43:13.950

只需将代码留在banner.php 文件的body 元素中即可。PHP 将按字面意思获取文件的内容并将其插入到包含函数所在的位置。在当前的代码形式中，您将在页面的 body 元素中添加一个 html 元素，这是完全错误的，可能会导致浏览器出现意外行为。

此外，路径必须相对于您在浏览器中实际访问的 URL，而不是相对于 HTML 代码来自的文件。

像这样的布局将起作用：

索引.php

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Home</title>
</head>
<body>
<?php include("php/lib/banner.php"); ?>
</body>
</html> 
```

横幅.php

```
<table width="100%">
<tr>
<td>
<img src="images/banner.jpg" width="100%" /></td>
</tr>
</table> 
```

相同的文件位置：

```
main\index.php  
main\php\lib\banner.php  
main\images\banner.jpg 
```

请记住，包含将获取一个 PHP 文件，对其进行处理并逐字包含其结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T05:02:14.027

另一种解决方案是拥有图像的完整路径。

例如：

```
<img src="http://yoururl/image_path"/> 
```

# php - 无法使用简单 HTML DOM 删除特定信息

> ID：13170972
> 
> 赞同：0
> 
> 时间：2012-11-01T04:29:33.317
> 
> 标签：php, html, simple-html-dom

我如何只剪掉第一组`<tr class="ismResult">`，`<tr class="ismFixtureSummary">`而不是第二组？

我希望只删除前两个`<tr>`标签和内容。有没有办法将这两个都设置为变量，例如`$Result`？我希望将 html 保留为其中的一部分。

```
<table>
    <tbody>
        <tr class="ismResult">
            <td>2-0</td>
        </tr>

        <tr class="ismFixtureSummary">
            <td>Player1</td>
            <td>Player2</td>
        </tr>

         <tr class="ismResult">
            <td>1-1</td>
        </tr>

        <tr class="ismFixtureSummary">
            <td>Player3</td>
            <td>Player4</td>
        </tr>
    </tbody>
</table> 
```

**我试过的：**

```
include('simple_html_dom.php');
$url = 'http://www.test.com';
$html = file_get_html($url);

$FullTable = $html->find('table');

foreach($FullTable->find('tr[class=ismResult]') as $Heading)
    {
    echo $Heading;

    foreach($FullTable->find('tr[class=ismFixtureSummary]') as $Summary)    
    {
        echo $Summary;
    }
    } 
```

这不起作用，因为它将 all 的内容发布`<tr class="ismFixtureSummary">`到 each中`<tr class="ismResult">`。我想把它们剪成一对。

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:44:11.363

我会使用 XPATH 解决这个问题

```
$xpath = new DOMXPath($html);

$ismResult = $xpath->query("//tr[@class='ismResult']/td");
$ismFixtureSummary= $xpath->query("//tr[@class='ismFixtureSummary']/td");

echo $ismResult->item(0)->nodeValue;
echo $ismFixtureSummary->item(0)->nodeValue; 
```

您可以在此处阅读有关 xpath 的更多信息。 [http://phpmaster.com/php-dom-using-xpath/](http://phpmaster.com/php-dom-using-xpath/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:46:14.503

只需将 find 操作的结果设置为两个单独的数组，然后执行一个 for 循环并回显您要查找的结果。

```
include('simple_html_dom.php');
$url = 'http://www.test.com';
$html = file_get_html($url);

$FullTable = $html->find('table');

$headings = $FullTable->find('tr[class=ismResult]');
$summaries = $FullTable->find('tr[class=ismFixtureSummary]');

for ($i = 0; $i < count($headings); $i++;) {
    echo $headings[$i] . $summaries[$i];
} 
```

# javascript - 为什么在将每个结果添加到列表之前，此循环要等待完成？带 JSFiddle

> ID：13170974
> 
> 赞同：1
> 
> 时间：2012-11-01T04:29:51.863
> 
> 标签：javascript, while-loop, rendering

我做了一个简单的循环来演示我的问题：

```
 var listMaker = function() {
     document.getElementById('list').innerHTML = "";
     var i = 1;
     while (i < 150) {
        document.getElementById('list').innerHTML += "<li>" + i + "</li>";
        i++;
    }
};​ 
```

我认为这个函数会立即开始打印到一个列表中，一次添加一个数字。

相反，它一直等到完成，然后推送 150 个号码的完整列表。

[http://jsfiddle.net/mholubowski/CFQ8K/1/](http://jsfiddle.net/mholubowski/CFQ8K/1/) <- 工作示例，看看吧！

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:39:21.253

浏览器运行 JS 并在同一线程上进行页面更新。这意味着它不会在您的函数运行时更新显示。因此，从某种意义上说，这些项目是一次添加一个，但在它们全部添加后重新绘制显示之前，您无法看到它们。

从用户的角度来看，浏览器将被锁定直到 JS 完成，因此长时间运行的循环是一个坏主意。

您可以使用重写循环`setTimeout()`，然后您可以看到它们一次出现在第一页上。

```
var listMaker = function() {
    var list = document.getElementById('list'),
        i = 1;
    function doNext() {
        if (i < 150){
            list.innerHTML += "<li>" + i + "</li>";
            setTimeout(doNext, 100);
            i++;
        }
    }
    doNext();
};​ 
```

演示：http: [//jsfiddle.net/CFQ8K/2/](http://jsfiddle.net/CFQ8K/2/)

该[`setTimeout()`函数](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)将一个函数的执行排队等待稍后执行，从而允许当前函数完成，进而允许浏览器重新绘制屏幕。

的第二个参数`setTimeout()`是以毫秒为单位的延迟 - 显然你会根据你所追求的效果适当地设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:26:15.207

这是我的尝试（与第一个答案基本相同，尽管是独立得出的，但具有立即调用的匿名函数（IIAF）：

[小提琴](http://jsfiddle.net/LWQWt/)

```
(function() {
    var i = 1,
        list = document.getElementById('list');
        list.innerHTML = "";
    function addToList() {
         if (i < 16) {
             list.innerHTML += "<li>" + i + "</li>";
             i++;
             window.setTimeout(addToList, 300);
         }
    }
    addToList();
})();​ 
```

# makefile - gnu-make 在编译期间发现错误的目标文件

> ID：13170976
> 
> 赞同：0
> 
> 时间：2012-11-01T04:29:56.090
> 
> 标签：makefile, gnu-make

首先让我描述一下我的文件夹结构

```
| SourceCode folder
| | Build folder
| | | makefile 
| | | buildrules.mak

| | Integration_Tests folder
| | | Subsystem_1_Test folder
| | | | buildfiles folder
| | | | test.cpp
| | | | makefile

| | Subsystem_1 folder
| | | buildfiles folder
| | | source1.cpp
| | | source2.cpp
| | | source3.cpp
| | | makefile

| | Subsystem_2 folder
| | | buildfiles folder
| | | source4.cpp
| | | source5.cpp
| | | source6.cpp
| | | makefile 
```

因此 build 文件夹中的 makefile 将通过调用较低的 makefile 来构建所有子系统和集成测试。每个子系统创建一个可执行文件，每个子系统测试创建一个可执行文件。buildfiles 文件夹存储依赖文件、目标文件和最终的可执行代码。这些都是在构建时由 makefile 填充的。

集成测试是使用被测子系统代码构建的，并且也构建子系统，但在子系统文件夹中本地。每个子系统集成测试的 makefile 使用 vpath 来设置子系统文件夹的路径。即，对于子系统 1 测试，vpath 是：

```
vpath = ../../Subsystem_1 
```

我面前没有确切的代码，但编译行基本上定义如下，它位于 buildrules.mak 中并被所有 makefile 使用

```
./buildfiles/%.o : %.cpp
     compile the code 
```

所以我看到的问题是当我构建集成测试时，虽然它在技术上应该构建和链接正常，但它似乎是在 Subsystem_1/buildfiles 文件夹中找到目标文件并说子系统代码已构建并且仅构建 test.cpp。

这是一个错误，因为测试已经定义了构建定义，它需要再次构建子系统以进行正确的测试。

现在，如果子系统 1 尚未构建，即没有目标文件，那么我的集成测试将按预期构建文件，将目标文件放入本地集成测试构建文件文件夹中。

我相信这是由于在集成测试 make 文件中设置了 vpath。似乎在 subsystem_1 文件夹中搜索目标文件并不幸找到了它们。

如果我正在构建 Subsystem_1 文件夹并且测试已经构建，我看不到任何问题，这可能是因为 Subsystem_1 中的 vpath 没有测试路径，它不应该。

我似乎无法弄清楚如何解决这个本质上是文件路径问题的问题。看来我需要更具体地说明我需要在编译行中匹配哪个 buildfiles 文件夹，但我没有路径。

我不能使用 $(CURDIR) 因为那是一个绝对路径，我被告知我必须使用相对路径。我猜路径有空格和括号存在问题。在使用它之前我可能会避开它们，但有人告诉我必须用相对路径来做所有事情。

我在 buildrules.mak 中有一个变量，它是从执行 make 的目录到 buildrules.mak 的相对路径。这是使用以下方法完成的：

```
BUILD_FOLDER_PATH := $(dir $(word $(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST))) 
```

有没有办法解析 $(CURDIR) 让我进入像 sourcecod 这样的公共文件夹？然后可以做类似的事情：

```
$(BUILD_FOLDER_PATH)/../[path extracted from $(CURDIR)]/buildfiles 
```

因此，如果 $(CURDIR) 是 c:/a/b/sourcecode/Integration_Tests/Subsystem_Test 那么我可以从中提取“/Integration_Tests/Subsystem_Test”以放入上述路径。

如果有其他方法可以做到这一点，我也愿意接受建议。

谢谢！

编辑：测试生成文件

```
# used when make is executed without any arguments, must be first thing in the file
all: default

##########################################################################
#                                                                        #
# Source Files                                                           #
#                                                                        #
##########################################################################

# These files are not shared with other processes
CPP_SRC := \
cmdclientmq.cpp \
cmdservermq.cpp \
ConvertUTF.cpp \
crcutil.cpp \
deka_cpu.cpp \
deka_debug.cpp \
deka_file.cpp \
deka_mutex.cpp \
deka_sem.cpp \
deka_serial.cpp \
deka_sharedMem.cpp \
deka_thread.cpp \
deka_time.cpp \
deka_timer.cpp \
encryptionutils.cpp \
exec_client.cpp \
logclient.cpp \
procstatus.cpp \
syserror.cpp

# These files are shared with other processes
EXPORTED_SRC :=

# These files are analyzed by the manifest tool
# Not all header files are listed because the manifest tool automatically checks if there is a .h file
# with the same name as a .cpp file
MANIFEST_SRC := \
$(CPP_SRC) \
$(EXPORTED_SRC)

##########################################################################
#                                                                        #
# makefile includes                                                      #
#                                                                        #
##########################################################################

# Basic compiler definitions, must be listed after source files
include ../../build/buildrules.mak

##########################################################################
#                                                                        #
# build flags                                                            #
#                                                                        #
##########################################################################

# Position Independent Code flag
GCC_FLAGS += -fPIC

##########################################################################
#                                                                        #
# Subsystem build paths                                                  #
#                                                                        #
##########################################################################

# directory include paths need for files external to the current subsystem
INCDIRS := \
$(EXECUTIVE_INC_PATH) \
$(LOGGER_INC_PATH) \
$(OS_INTERFACE_INC_PATH) \
$(SYSERROR_INC_PATH) \
$(SYSTEMDEFS_INC_PATH) \
$(UTILITIES_INC_PATH)

# list of directories in the current subsystem
VPATH := \
$(EXECUTIVE_PATH)/exec_client \
$(EXECUTIVE_PATH)/exec_core \
$(LOGGER_PATH)/main \
$(OS_INTERFACE_PATH) \
$(SYSERROR_PATH) \
$(UTILITIES_PATH)

##########################################################################
#                                                                        #
# Targets                                                                #
#                                                                        #
##########################################################################

# default target to build and link the subsystem code
default: $(LIB_DIR)/libpycommon.a
     @echo 
     @echo Common Library default: Done.
     @echo ----------------------------------------------------------------------------
     @echo

# remove the subsystem build folders and create the neccessary directories
clean:  REMOVE_INTEGRATION_DIRS CREATE_INTEGRATION_OUTPUT_DIRS
    @echo
    @echo Common Library clean: Done.
    @echo ----------------------------------------------------------------------------
    @echo

##########################################################################
#                                                                        #
# Build Rules                                                            #
#                                                                        #
##########################################################################

# Do not build archives or call ranlib in parallel:
#  http://www.gnu.org/software/make/manual/make.html#Archive-Pitfalls
.NOTPARALLEL:
$(LIB_DIR)/libpycommon.a: $(LIB_DIR)/libpycommon.a($(CPP_OBJS))
              $(RANLIB) $(LIB_DIR)/libpycommon.a 
```

构建规则.mak

```
# get relative path to the current makefile by examining the $(MAKEFILE_LIST), which is
# dynamically updated.  Determine the number of words in $(MAKEFILE_LIST) and grab the
# last word.  Then extract the directory path up to the found last word.
# the include order is important, do not adjust
include $(dir $(word $(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST)))toolset.mak
include $(dir $(word $(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST)))common.mak

##########################################################################
#                                                                        #
# Build rules for creating subsystem and project folder structure        #
#                                                                        #
##########################################################################
CREATE_SUBSYSTEM_OUTPUT_DIRS :
    -@echo Creating directory: $(BUILD_PATH)
    -@mkdir -p $(BUILD_PATH)
    -@echo Creating directory: $(DEP_DIR)
    -@mkdir -p $(DEP_DIR)
    -@echo Creating directory: $(OBJ_DIR)
    -@mkdir -p $(OBJ_DIR)
    -@echo Creating directory: $(LINT_DIR)
    -@mkdir -p $(LINT_DIR)
    -@echo Creating directory: $(CCK_DIR)
    -@mkdir -p $(CCK_DIR)
    -@echo Creating directory: $(UNCRUST_DIR)
    -@mkdir -p $(UNCRUST_DIR)
    -@echo Creating directory: $(MET_DIR)
    -@mkdir -p $(MET_DIR)

REMOVE_SUBSYSTEM_DIRS :
    -@echo ----------------------------------------------------------------------------
    -@echo Removing directory: $(BUILD_PATH)
    -@echo ----------------------------------------------------------------------------
    -@rm -rf $(BUILD_PATH)
    -@echo

CREATE_PROJECT_OUTPUT_DIRS :
    -@echo Creating directory: $(IMAGE_DIR)
    -@mkdir -p $(IMAGE_DIR)
    -@echo Creating directory: $(PROJECT_OBJ_DIR)
    -@mkdir -p $(PROJECT_OBJ_DIR)

REMOVE_PROJECT_OUTPUT_DIRS :
    -@echo Removing directory: $(DIALYSIS_DIR)
    -@rm -rf $(DIALYSIS_DIR)
    -@echo Removing directory: $(ETC_DIR)
    -@rm -rf $(ETC_DIR)
    -@echo Removing directory: $(IMAGE_DIR)
    -@rm -rf $(IMAGE_DIR)
    -@echo Removing directory: $(PROJECT_OBJ_DIR)
    -@rm -rf $(PROJECT_OBJ_DIR)
    -@echo Removing directory: $(TAR_DIR)
    -@rm -rf $(TAR_DIR)
    -@echo Removing directory: $(QUAL_DIR)
    -@rm -rf $(QUAL_DIR)
    -@echo Removing directory: $(PYTHON_OUT)
    -@rm -rf $(PYTHON_OUT)

##########################################################################
#                                                                        #
# Integration Build Rules                                                #
#                                                                        #
##########################################################################
CREATE_INTEGRATION_OUTPUT_DIRS :
    -@echo Creating directory: $(BUILD_PATH)
    -@mkdir -p $(BUILD_PATH)
    -@echo Creating directory: $(DEP_DIR)
    -@mkdir -p $(DEP_DIR)
    -@echo Creating directory: $(OBJ_DIR)
    -@mkdir -p $(OBJ_DIR)
    -@echo Creating directory: $(LIB_DIR)
    -@mkdir -p $(LIB_DIR)
    -@echo Creating directory: $(PYTHON_OUT)
    -@mkdir -p $(PYTHON_OUT)

REMOVE_INTEGRATION_DIRS :
    @echo Removing directory: $(BUILD_PATH)
    @rm -rf $(BUILD_PATH)
    @echo

##########################################################################
#                                                                        #
# Unit Test Build Rules                                                  #
#                                                                        #
##########################################################################
CREATE_UNIT_TEST_OUTPUT_DIRS :
    -@echo Creating directory: $(BUILD_PATH)
    -@mkdir -p $(BUILD_PATH)
    -@echo Creating directory: $(DEP_DIR)
    -@mkdir -p $(DEP_DIR)
    -@echo Creating directory: $(OBJ_DIR)
    -@mkdir -p $(OBJ_DIR)

REMOVE_UNIT_TEST_DIRS :
    @echo Removing directory: $(BUILD_PATH)
    -@rm -rf $(BUILD_PATH)
    @echo

##########################################################################
#                                                                        #
# Create dependancy files from all cpp files                             #
#                                                                        #
##########################################################################

# convert the file extensions from .o to .d and strip the relative path and add the dependancy path
DEP_OBJS = $(patsubst %.o, $(DEP_DIR)/%.d, $(Call_OBJ))

##########################################################################
#                                                                        #
# Create object files from all cpp files                                 #
#                                                                        #
##########################################################################

# convert the file extensions from .cpp to .o
Cxx_OBJS = $(CPP_SRC:.cpp=.o)

# strip the relative path and add the object path
CPP_OBJS = $(patsubst %.o, $(OBJ_DIR)/%.o, $(Cxx_OBJS))

##########################################################################
#                                                                        #
# Create object files from all exported files                            #
#                                                                        #
##########################################################################

# Files needed by other subsystems
# convert the file extensions from .cpp to .o
Exx_OBJS = $(EXPORTED_SRC:.cpp=.o)

# strip the relative path and add the path to the subsystem object folder
EXPORTED_OBJ = $(patsubst %.o, $(OBJ_DIR)/%.o, $(Exx_OBJS))

# strip the relative path and add the project object folder
EXPORTED_OUT = $(patsubst %.o, $(PROJECT_OBJ_DIR)/%.o, $(Exx_OBJS))

##########################################################################
#                                                                        #
# List of files within the subsystem                                     #
#                                                                        #
##########################################################################

# create the list of all files associated with this subsystem
Call_OBJ = $(Cxx_OBJS) $(Exx_OBJS)

##########################################################################
#                                                                        #
# Files needed by Lint                                                   #
#                                                                        #
##########################################################################

# convert the file extensions from .o to .lob and strip the relative path and add the lint path
LINT_OBJS = $(patsubst %.o, $(LINT_DIR)/%.lob, $(Call_OBJ))

##########################################################################
#                                                                        #
# Interface Rules to create dependancy files from project source code    #
#                                                                        #
##########################################################################

# function used to create dependancy files
define DEPENDS_COMMAND
@echo
@echo ----------------------------------------------------------------------------
@echo -Depend: $@
@echo ----------------------------------------------------------------------------
@$(CC_DEP) -MM -MT '$(OBJ_DIR)/$*'.o $(INCDIRS) $< > $ $@.tmp
@$(SED) 's,\($*\)\.o[ :]*,\1.o $(LINT_DIR)/\1.lob $@ : ,g' < $@.tmp > $@;
@rm -f $@.tmp
endef

# rule to create dependency for C++ code
$(DEP_DIR)/%.d: %.cpp
    $(DEPENDS_COMMAND)

##########################################################################
#                                                                        #
# Interface Rules to compile project source code                         #
#                                                                        #
##########################################################################

# function used to compile code
define COMPILE_COMMAND
@echo
@echo ----------------------------------------------------------------------------
@echo -Compiling: $@
@echo ----------------------------------------------------------------------------
@$(CC) $(CPU_GCC_FLAGS) $(GCC_FLAGS) $(INCDIRS) $< -o $@
endef

# build object files in subsytem ojbect folder for all cpp files
$(OBJ_DIR)/%.o: %.cpp
    @$(COMPILE_COMMAND)

##########################################################################
#                                                                        #
# Build exported object files and copy them to the build folder          #
#                                                                        #
##########################################################################

# move shared object files to the proper directory
$(EXPORTED_OUT): $(PROJECT_OBJ_DIR)/%.o : $(OBJ_DIR)/%.o
         @echo
         @echo Copying Shared File $< to $@ ...
         @cp  $<  $@

##########################################################################
#                                                                        #
# Build Rules to link files to create the final executable               #
#                                                                        #
##########################################################################

# Commands for linking final executable [LINK_DB_LIBS vs LINK_LIBS]
define LINK_EXECUTABLE
@echo
@echo "**********************************"
@echo "****  Linux Linking $@"
@echo "**********************************"
$(CC) $^ $(LINK_LIBS) $(LIB_FLAGS) -o $(IMAGE_DIR)/$@
@$(DEKA_TOOLS)/imagecrc.exe $(IMAGE_DIR)/$@ 2>&1
@echo
@echo LINK_EXECUTABLE Completed
@echo ----------------------------------------------------------------------------
endef

# Commands for linking final executable for subsystems using the database [LINK_DB_LIBS vs LINK_LIBS]
define LINK_DB_EXECUTABLE
@echo
@echo "********************************************"
@echo "****  Linux Linking $@"
@echo "********************************************"
@$(CC) $^ $(LINK_DB_LIBS) $(LIB_FLAGS) -o $(IMAGE_DIR)/$@
@$(DEKA_TOOLS)/imagecrc.exe $(IMAGE_DIR)/$@ 2>&1
@echo
@echo LINK_DB_EXECUTABLE Completed
@echo ----------------------------------------------------------------------------
endef

define LINK_EXECUTABLE_INTEGRATION
@echo
@echo "**********************************"
@echo "****  Linux Linking $@"
@echo "**********************************"
$(CC) $^ $(LINK_LIBS) $(LIB_FLAGS) -o $(PYTHON_OUT)/$@
@$(DEKA_TOOLS)/imagecrc.exe $(PYTHON_OUT)/$@ 2>&1
@echo ----------------------------------------------------------------------------
endef

define LINK_EXECUTABLE_UNIT_TEST
@echo
@echo "**********************************"
@echo "****  Linux Linking $@"
@echo "**********************************"
$(CC) $^ $(LINK_LIBS) $(LIB_FLAGS) $(CANTPP_LIB) -L$(GCC_LIB_PATH) -o $(OBJ_DIR_UT)/$@
@echo ----------------------------------------------------------------------------
endef

##########################################################################
#                                                                        #
# Build rules for Lint of C++ files                                      #
#                                                                        #
##########################################################################

# function used to lint C++ files
define LINT_COMMAND
@echo
@echo ----------------------------------------------------------------------------
@echo -Lint: $<
@echo ----------------------------------------------------------------------------
-@$(LINT) -dRELEASE_BUILD -u -b $(LINT_SYS_DIRS) $(INCDIRS) $(LINT_RULES) '-passes(2)' '-oo($@)' '-os($(@D)/$(*F).txt)' $<
@$(PYTHON) $(LINT_PYTHON_SCRIPT) --out $(@D)/$(*F).txt --src $(CURDIR)/$<
endef

# rule to create lint output for C++ code
$(LINT_DIR)/%.lob: %.cpp
    @$(LINT_COMMAND)

lint:   $(LINT_OBJS)
    @echo
    @echo lint: Done.
    @echo ----------------------------------------------------------------------------

lintclean:
    @rm -rf $(LINT_DIR)
    @mkdir $(LINT_DIR)
    @echo
    @echo lintclean: Done
    @echo ----------------------------------------------------------------------------

##########################################################################
#                                                                        #
# Build rules for Uncrustify of C++ files                                #
#                                                                        #
##########################################################################
uncrustify: $(UNCRUST_DIR)
    @python $(UNCRUST_PYTHON_FILE) $(UNCRUST_EXECUTABLE) -nooverwrite
    @echo
    @echo uncrustify: Done
    @echo ----------------------------------------------------------------------------

uncrustifyclean:
    @rm -rf $(UNCRUST_DIR)
    @mkdir $(UNCRUST_DIR)
    @echo
    @echo uncrustifyclean: Done
    @echo ----------------------------------------------------------------------------

##########################################################################
#                                                                        #
# Build rules for Understand CodeCheck of C++ files                      #
#                                                                        #
##########################################################################
codecheck.udb: $(CCK_DIR)
    @echo
    @cp -rf $(UND_RULES_ARCHIVE) $(UND_RULES)
    @$(UND) create -db $@ -languages c++
    @$(UND) -db $@ settings -c++MacrosAdd RELEASE_BUILD=1
    @$(UND) add $(CURDIR) -db $@
    -@$(UND) remove unittest -db $@
    @$(UND) analyze -all -db $(CURDIR)/$@ > $(CCK_DIR)/analyze.log 2>&1
    @$(UND) -db $(CURDIR)/$@ codecheck -html $(CCK_RULES_FILE) $(CCK_DIR) > $(CCK_DIR)/codecheck.log 2>&1
    @$(UPERL) $(UND_PERL_SCRIPT) $(CURDIR) -db $@
    @rm $@
    @echo
    @echo codecheck: Done
    @echo ----------------------------------------------------------------------------

codecheckclean:
    @rm -rf $(CCK_DIR)
    @mkdir $(CCK_DIR)
    @echo
    @echo codecheckclean: Done
    @echo ----------------------------------------------------------------------------

##########################################################################
#                                                                        #
# Build rules for Metrics/Complexity of C++ files using Understand       #
#                                                                        #
##########################################################################
metric.udb: $(MET_DIR)
    @echo
    @$(UND) create -db $@ -languages c++
    @$(UND) -db $@ settings -c++MacrosAdd RELEASE_BUILD=1
    @$(UND) settings -metricsShowDeclaredInFile on -db $@
    @$(UND) settings -metrics MaxNesting CyclomaticModified -db $@
    @$(UND) add $(CURDIR) -db $@
    -@$(UND) remove unittest -db $@
    @$(UND) analyze -all -db $@ > $(UND_METRICS_LOG) 2>&1
    @$(UND) metrics -db $@
    -@mv -f metric.csv $(MET_DIR)/
    @rm $@
    @echo
    @echo metrics: Done
    @echo ----------------------------------------------------------------------------

metricclean:
    @rm -rf $(MET_DIR)
    @mkdir $(MET_DIR)
    @echo
    @echo metricclean: Done
    @echo ----------------------------------------------------------------------------

##########################################################################
#                                                                        #
# Build Rules to create a manifest of static analysis tool results       #
#                                                                        #
##########################################################################
manifestall: manifestclean uncrustifyclean lintclean codecheckclean metricclean uncrustify codecheck.udb metric.udb
    @$(MAKE) -j $(NUMBER_OF_PROCESSORS) lint
    @python $(MANIFEST_SCRIPT_LOCATION) --cpp $(MANIFEST_SRC) --searchpath $(VPATH)
    @echo
    @echo manifestall: Done
    @echo ----------------------------------------------------------------------------

manifest:
    @python $(MANIFEST_SCRIPT_LOCATION) --cpp $(MANIFEST_SRC) --searchpath $(VPATH)
    @echo manifest: Done
    @echo ----------------------------------------------------------------------------

manifestclean:
    @rm -f $(CURDIR)/manifest.csv
    @echo manifestclean: Done
    @echo ----------------------------------------------------------------------------

##########################################################################
#                                                                        #
# Build rules for PyLint of Python files                                 #
#                                                                        #
##########################################################################

# TODO in the future

# rule to create lint output for Python code
#$(PYLINT_DIR)/%.pylint: %.py
#   @echo ----------------------------------------------
#   @echo -PyLint: $<
#   @echo ----------------------------------------------
#   @$(PYTHON) $(PYLINT) --include-ids=y --rcfile=$(PYLINT_CONFIG) $< > $@

##########################################################################
#                                                                        #
# Build rules for PEP8 (CodeCheck) of Python files                       #
#                                                                        #
##########################################################################

# TODO in the future

# rule to create codecheck for Python code
#$(CCK_DIR)/%.pep8: %.py
#   @echo ----------------------------------------------
#   @echo PEP8: $<
#   @echo ----------------------------------------------
#   @$(PYTHON) $(PEP) --statistics --show-source --repeat $< > $@

##########################################################################
#                                                                        #
# Dependancy File Creation                                               #
#                                                                        #
##########################################################################

# alwawys try to create a dependancy file unless $(MAKECMDGOALS) is one of the listed targets
ifneq ($(MAKECMDGOALS),clean)
ifneq ($(MAKECMDGOALS),lint)
ifneq ($(MAKECMDGOALS),lintclean)
ifneq ($(MAKECMDGOALS),uncrustify)
ifneq ($(MAKECMDGOALS),uncrustifyclean)
ifneq ($(MAKECMDGOALS),codecheck.udb)
ifneq ($(MAKECMDGOALS),codecheckclean)
ifneq ($(MAKECMDGOALS),metric.udb)
ifneq ($(MAKECMDGOALS),metricclean)
ifneq ($(MAKECMDGOALS),manifestall)
ifneq ($(MAKECMDGOALS),manifest)
ifneq ($(MAKECMDGOALS),manifestclean)
include $(DEP_OBJS)
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:45:56.833

“绕过源树以到达各种文件夹”正是问题所在。

我建议您尝试在`buildrules.mak`. 在顶部附近，就在两个`include`语句之后，输入

```
OBJ_DIR := buildfiles 
```

**这是一个黑客。**如果它有效，请不要把它留在那里，这个 makefile 系统需要大量清理。如果它不起作用，请还原、发布`common.mak`，我们将尝试更温和的方法。

# c# - 使用 YouTube API 在 YouTube 上上传视频时出错

> ID：13170984
> 
> 赞同：0
> 
> 时间：2012-11-01T04:30:37.700
> 
> 标签：c#, asp.net, youtube-api

```
protected void Button1_Click(object sender, EventArgs e)
{
    YouTubeRequestSettings settings = new YouTubeRequestSettings("youtube", "developer key", "ID", "PAswd");
    YouTubeRequest request = new YouTubeRequest(settings);

    Video newVideo = new Video();

    newVideo.Title = txttitle.Text.Trim();
    newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
    newVideo.Keywords = txtkeyword.Text.Trim();
    newVideo.Description = txtdesc.Text.Trim();
    newVideo.YouTubeEntry.Private = false;
    newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag", YouTubeNameTable.DeveloperTagSchema));

    newVideo.YouTubeEntry.Location = new GeoRssWhere(37, -122);

    newVideo.YouTubeEntry.MediaSource = new MediaFileSource("C:\\AVISample.avi", "video/quicktime");

    Video createdVideo = request.Upload(newVideo);
} 
```

上传 2MB 文件并显示此错误需要太多时间：

> 在写入所有字节之前无法关闭流。

# java - 在jira中获取问题时出现异常

> ID：13170987
> 
> 赞同：6
> 
> 时间：2012-11-01T04:31:35.623
> 
> 标签：java, maven-2, jira, jira-rest-java-api

我是 JIRA 新手，使用 JIRA REST API 从远程主机获取问题。我根据本[教程](https://studio.atlassian.com/wiki/display/JRJC/Tutorial)编写了一个简单的程序来获取问题 以下是代码

```
public class JIRAClient
{
     public static void main(String[] args) throws URISyntaxException {
            final JerseyJiraRestClientFactory factory = new JerseyJiraRestClientFactory();
            final URI jiraServerUri = new URI("http://jira.companyname.net:8080/jira/");
            final JiraRestClient restClient = factory.createWithBasicHttpAuthentication(jiraServerUri, "abc", "xyz");
            final NullProgressMonitor pm = new NullProgressMonitor();
            final Issue issue = restClient.getIssueClient().getIssue("RRT-123456", pm);//<--line 24

            System.out.println(issue);
} 
```

除了这个例外

```
Exception in thread "main" com.atlassian.jira.rest.client.RestClientException: com.sun.jersey.api.client.UniformInterfaceException: Client response status: 404
    at com.atlassian.jira.rest.client.internal.jersey.AbstractJerseyRestClient.invoke(AbstractJerseyRestClient.java:70)
    at com.atlassian.jira.rest.client.internal.jersey.AbstractJerseyRestClient.getAndParse(AbstractJerseyRestClient.java:80)
    at com.atlassian.jira.rest.client.internal.jersey.JerseyIssueRestClient.getIssue(JerseyIssueRestClient.java:145)
    at com.atlassian.jira.rest.client.internal.jersey.JerseyIssueRestClient.getIssue(JerseyIssueRestClient.java:136)
    at client.JIRAClient.main(JIRAClient.java:24)
Caused by: com.sun.jersey.api.client.UniformInterfaceException: Client response status: 404
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:676)
    at com.sun.jersey.api.client.WebResource.get(WebResource.java:191)
    at com.atlassian.jira.rest.client.internal.jersey.AbstractJerseyRestClient$1.call(AbstractJerseyRestClient.java:84)
    at com.atlassian.jira.rest.client.internal.jersey.AbstractJerseyRestClient.invoke(AbstractJerseyRestClient.java:54)
    ... 4 more 
```

对于我`**cisco vpn**`用来连接到主机的记录（否则它会给出 UnknownHostException），我还安装了**m2e**插件并创建了一个 maven 项目。

异常的原因是什么？我使用了错误的 URL 还是应该尝试使用其他身份验证方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T06:40:20.960

```
try with the following rest client 
package com.rest.client;
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.filter.HTTPBasicAuthFilter;
public class RESTclient {
    public static void main(String[] args) {
        try {
    Client client = Client.create();    
    client.addFilter(new HTTPBasicAuthFilter("admin", "admin"));
    WebResource webResource = lient.resource("http://localhost:8080/rest/api/2/issue");
    ClientResponse response = webResource.accept("application/json").get(ClientResponse.class);
    String output = response.getEntity(String.class);
    System.out.println("Output from Server .... \n");
    System.out.println(output);         
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:47:41.580

`404`错误意味着

> 404 或 Not Found 错误消息是一个 HTTP 标准响应代码，表示客户端能够与服务器通信，但服务器找不到请求的内容。（来源[维基百科](http://en.wikipedia.org/wiki/HTTP_404)）

所以可能有两种可能。

要么是网址

```
http://jira.companyname.net:8080/jira/ 
```

不存在。确认它确实存在。

第二

您尝试在此处访问的资源

```
restClient.getIssueClient().getIssue("RRT-123456", pm); 
```

不可用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T04:41:24.403

响应状态为 404 意味着客户端可以联系服务器，但服务器找不到请求的内容。

也许您应该尝试获取托管的 jira Web 服务的确切 URL

# php - 如何更新 postgresql 中的视图？

> ID：13170993
> 
> 赞同：-1
> 
> 时间：2012-11-01T04:33:05.530
> 
> 标签：php, postgresql, drupal-6, sql-update

> **可能重复：**
> [无法更新视图？](https://stackoverflow.com/questions/13151566/cannot-update-view)

我的网站是使用 Drupal 版本 6 开发的，而 db 是`PostgreSQL 8.3.8 on x86_64-pc-linux-gnu, compiled by GCC gcc-4.4.real (Ubuntu 4.4.1-3ubuntu3) 4.4.1`（来自`SELECT version()`）。

我的问题是当我更新记录时它显示失败错误。我的查询有什么错误吗？

查询是：

```
UPDATE uac_institution_view SET status = '2' WHERE nid = '9950' 
```

错误是：

```
failed : ERROR: infinite recursion detected in rules for relation "uac_institution_view" 
```

我是这个数据库的新手。谁能帮助我如何更新视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:35:50.660

视图就是这样：以不同的方式看待其他事物。

不要更新视图；更新视图所基于的任何表。（另请参阅[无法更新视图？](https://stackoverflow.com/questions/13151566/cannot-update-view?rq=1)）

# javascript - 在 Telerik TabStrip (MVC) 中，如何获取选定的选项卡索引？

> ID：13170994
> 
> 赞同：1
> 
> 时间：2012-11-01T04:33:07.463
> 
> 标签：javascript, jquery, asp.net-mvc, telerik

我的页面看起来像这样，根据所选选项卡的索引，保存按钮的行为需要有所不同。

[![菜单](../Images/8752e4ddda230a695bf1efdba8593050.png)](https://i.stack.imgur.com/Xb1v4.gif)

这是 jQuery 代码。

```
$("#btnSave").click(function () {
    var selectedTabIndex = $('#TabStrip').select().index()

    if (selectedTabIndex == 1) {
        InflowsSave();
    }

    if (selectedTabIndex == 2) {
        OutflowsSave();
    }

}); 
```

我`$('#TabStrip').select().index()`在 Inspect Elements 控制台中输入。选择哪个选项卡无关紧要，它总是返回 2。

```
>>> $("#TabStrip").select().index()

2 
```

**$("#TabStrip").select()**

```
<ul class="t-reset t-tabstrip-items">
    <div id="TabStrip-1" class="t-content">
    <div id="TabStrip-2" class="t-content t-state-active" style="display:block">
    <div id="TabStrip-3" class="t-content"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T06:07:51.977

如果您使用的是 Telerik Extensions for ASP.NET MVC - 请查看以下有关 TabStrip 客户端事件处理的文档

[TabStrip 客户端 API 和事件](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-tabstrip-client-api-and-events.html)

从 JavaScript 中选择任何 Telerik Extension 控件的方法如下：

看法：

```
<%= Html.Telerik().TabStrip()
        .Name("TabStrip")
        .Items(items =>{/*items definition */})
%> 
```

JavaScript：

```
<script type="text/javascript">
        function getTabStrip(){

            var tabStrip = $("#TabStrip").data("tTabStrip");

            return tabStrip;

        }
</script> 
```

在您的场景中，为了知道选择了哪个选项卡，我建议您收听 tabstrip 选择事件并设置一个关于选择哪个 tabstrip 的标志。这是处理客户端事件的代码：

看法：

```
<% 
  Html.Telerik().TabStrip()
  .Name("TabStrip")
  .Items(items =>{/*items definition */})
  .ClientEvents(events =>
    {
        events.OnSelect("Select");
        events.OnError("Error");
        events.OnContentLoad("ContentLoad");
        events.OnLoad(() =>
            {%>
                function(e) {
                /*TODO: actions when the control is loaded.*/
                // "this" is the tabstrip.
                }
            <%});
    })
  .Render(); %> 
```

Javascript：

```
<script type="text/javascript">              
      function Select(e) {
              // "this" in this event handler will be the component.
              // the "e" is an object passed by the jQuery event trigger. 
      }
      function Error(e) {
        //code handling the error
      }
      function ContentLoad(e) {
        //code handling the content load
      }
</script> 
```

如您所见，您可以设置一个标志，说明在 Select() 方法中选择了哪个选项卡，然后在保存按钮中单击检查标志并采取相应措施

如果您浏览我在顶部提供的文档链接 - 它会告诉您控件公开的所有客户端事件和 API

希望这能回答你的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T08:54:45.377

答案并不明显。活动选项卡具有`.t-item.t-state-active`css 类。所以我们需要使用 jQuery 找到它。希望这对将来的某人有所帮助。

```
var selectedTabIndex = $("#TabStrip > ul").find(".t-item.t-state-active").index(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T09:09:56.757

我这样做了，对我来说它正在工作：

```
var selectedTabId = $("#TabStrip > ul").find(".t-item.t-state-active")[0].id; 
```

# c# - DotNetNuke -- 是否在任何地方跟踪所有登录？

> ID：13170998
> 
> 赞同：4
> 
> 时间：2012-11-01T04:33:40.257
> 
> 标签：c#, .net, dotnetnuke

我知道您可以在名为“LastModifiedOnDate”的列中找到用户上次从“用户”表登录的时间。但我有兴趣找到用户登录时时间戳的完整历史记录。这可能吗？如果是这样，此信息存储在哪个表中？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:01:35.930

`EventLog`每次成功登录都会在日志查看器（即表）中存储一个事件。但是，默认设置是仅存储这些事件中的最后 10 个。您可以转到日志查看器页面（在管理员下）并编辑日志设置，然后编辑登录成功事件以保留更多条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T05:50:33.653

DotNetNuke`Events Module`开箱即用，已经记录了登录和注销活动。

相关表是`EventLogs`。如果您需要更深入的日志记录，您可以[激活站点日志](http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/39/View/Details/How-to-activate-the-site-log-feature.aspx)，并查看`sitelogs`表格。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:54:14.167

您也许还可以尝试 admin>site log

# ios - iOS 浏览器编程技术

> ID：13170999
> 
> 赞同：1
> 
> 时间：2012-11-01T04:34:12.597
> 
> 标签：ios, cocoa, safari, webkit

除了 Safari，大多数 iOS 浏览器，如 dolphin、chrome、mercury、opera 等，都没有使用标准的可可对象，并且 UI 与标准元素有很大不同。有人知道这些浏览器使用什么技术吗？任何帮助都将是可观的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:19:13.423

如果你的意思是 UI 定制，首先检查本机这个[链接](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html)的自然 UI 元素 - 这对 ios 开发人员来说太酷了，你应该寻找定制[可可控件](http://www.cocoacontrols.com/)