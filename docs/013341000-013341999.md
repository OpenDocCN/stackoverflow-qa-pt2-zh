# StackOverflow 问答 13341000-13341999

# colors - 从 16 位 RGB 转换为 24 位 RGB 的工具，反之亦然

> ID：13341001
> 
> 赞同：2
> 
> 时间：2012-11-12T09:18:26.033
> 
> 标签：colors, lcd, color-depth

是否有任何图像编辑或研究工具，希望是 OSS，这将使我能够：

*   将颜色（图像）从 16 位 RGB (565) 映射到 24 位 RGB (888) 空间，反之亦然
*   以 PNG、GIF 或 JPEG 格式保存文件
*   让用户能够控制颜色如何从 16 位空间映射到 24 位空间。

我发现了一个讨论类似问题的问题，但我希望我能够在不编写任何代码的情况下运行这些测试。 [将 24 位 RGB 转换为 ARGB16](https://stackoverflow.com/q/1553502/981380)

这是此请求的一些背景知识。

我正在做一个评估 LCD 显示面板的项目。面板的原始位深度为 24 位 (RGB 888)，目前可用于使用仅支持 24 位输出的 LCD 控制器的评估套件。

正在评估此面板的产品上的 LCD 控制器仅支持 16 位输出 (RGB 565)。在最终设计中，面板上每个颜色通道的剩余位将以某种方式连接。

评估套件不接受 RGB 输入（如上所述，它只接受 PNG、JPEG 或 GIF）。我正在寻找一种方法来创建 16 位和 24 位 RGB 文件，然后将其转换为 PNG。通过操纵源文件（16 位和 24 位）中 R、G 和 B 通道的值，我想比较用 24 位颜色和 16 位颜色驱动 24 位显示器之间的区别（扩展到 24 位）。

我也有兴趣了解其他人在这种评估方面的经验以及我提出的测试方法的合理性。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:34:37.140

我已经在图形设计堆栈交换上发布了这个问题，并收到了一些有用的评论和答案。

[https://graphicdesign.stackexchange.com/q/12648/8539](https://graphicdesign.stackexchange.com/q/12648/8539)

# eclipse - 在 Ubuntu 中启动 Eclipse 时出错

> ID：13341007
> 
> 赞同：0
> 
> 时间：2012-11-12T09:18:49.757
> 
> 标签：eclipse, ubuntu-10.04

> **可能重复：**
> [无法运行 Eclipse；JVM 终止。退出代码=13](https://stackoverflow.com/questions/4945178/cannot-run-eclipse-jvm-terminated-exit-code-13)

```
Java was started but returned exit code=13
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-XX:MaxPermSize=256m
-Xms128m
-Xmx512m
-Djava.library.path=/usr/lib/x86_64-linux-gnu/jni/:/usr/lib/jni
-Djava.class.path=/home/giri/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
-os linux
-ws gtk
-arch x86
-showsplash /home/giri/eclipse//plugins/org.eclipse.platform_4.2.1.v201209141800/splash.bmp
-launcher /home/giri/eclipse/eclipse
-name Eclipse
--launcher.library /home/giri/eclipse//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_1.1.200.v20120522-1813/eclipse_1502.so
-startup /home/giri/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.overrideVmargs
-product org.eclipse.epp.package.jee.product
-vm /usr/lib/jvm/java-6-openjdk/jre/bin/../lib/i386/client/libjvm.so
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-XX:MaxPermSize=256m
-Xms128m
-Xmx512m
-Djava.library.path=/usr/lib/x86_64-linux-gnu/jni/:/usr/lib/jni
-Djava.class.path=/home/giri/eclipse//plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:26:09.540

请参见此处：[Eclipse Helios 未启动](https://stackoverflow.com/questions/3781124/eclipse-helios-not-launching)

> 当使用带有 x64 JDK 的 x86 Eclipse 时会发生这种情况（反之亦然）。只需在 eclipse.ini 文件中指向与 Eclipse 具有相同架构的 JDK，例如：
> 
> `-vm /opt/java/jdk1.6.0_25_x86/jre/bin/javaw.exe`

# javascript - 如何使用纯 Javascript 选择表格的一部分

> ID：13341012
> 
> 赞同：0
> 
> 时间：2012-11-12T09:19:19.760
> 
> 标签：javascript, html, html-table, css-selectors

我为此使用 jQuery，但我现在不能使用它（没有理由这样做）。我需要选择表格的一部分然后打印它。

我使用这段代码：

```
function Printon(this)
{
    newWin= window.open('','','toolbar=yes,location=no,directories=yes,menubar=yes,scrollbars=yes,width=800, height=1000, left=10, top=25');
    newWin.document.write('<table>' + document.getElementsByName(this).innerHTML + '</table>');
    newWin.document.close();
    newWin.focus();
    newWin.print();
    newWin.close();
    return false;
} 
```

然后使用名称参数调用函数时，`<tr>`我只得到一个文档：

```
12-11-12

undefined 
```

我确定我的 HTML 是正确的，但仍然是我的 HTML：

```
<tr name="Print_1">
    <td>dhr Kees-jan ckc Von fleppenstein</td>
    <td>aquaduct straat 66<br>0606 OP ORK</td>
    <td>WDB-1352303696</td>
    <td>2822.00</td>
    <td><input type="button" value="Print this" onclick="Printon('Print_1')"></td>
    <td> &nbsp;</td>
</tr>
<tr name="Print_1">
    <td>-</td>
    <td> &nbsp;</td>
    <td> &nbsp;</td>
    <td>46.00</td>
    <td>2</td>
    <td>Actiesalade herfst</td>
</tr>
<tr name="Print_1">
    <td>-</td>
    <td> &nbsp;</td>
    <td> &nbsp;</td>
    <td>46.00</td>
    <td>2</td>
    <td>Actiesalade herfst</td>
</tr> 
```

在@Muthu Kumaran 的启发下，我使用了这个：

```
function Printon(dit)
{
    var arr = new Array(); 
    arr = document.getElementsByName(dit); 
    var tabel = '';
    for(var i = 0; i < arr.length; i++){
         tabel += document.getElementsByName(dit)[i].outerHTML;
    }

    newWin= window.open('','','toolbar=yes,location=no,directories=yes,menubar=yes,scrollbars=yes,width=800, height=1000, left=10, top=25');
    newWin.document.write('<table border=\"2\" cellpadding=\"2\" cellspacing=\"0\">' + tabel + '</table>');
    newWin.document.close();
    newWin.focus();
    newWin.print();
    newWin.close();
    return false;
} 
```

修复它现在可以工作了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:26:26.857

不要`this`在函数中用作参数。给出一个适当的变量，如名称。也`document.getElementsByName`将返回元素数组，因此您必须通过使用来获取值`document.getElementsByName(name)[0]`

试试这个，

```
function Printon(name)
{
    newWin= window.open('','','toolbar=yes,location=no,directories=yes,menubar=yes,scrollbars=yes,width=800, height=1000, left=10, top=25');
    newWin.document.write('<table>' + document.getElementsByName(name)[0].innerHTML + '</table>');
    newWin.document.close();
    newWin.focus();
    newWin.print();
    newWin.close();
    return false;
} 
```

**工作演示：http:** [//jsfiddle.net/muthkum/RxNKn/1/](http://jsfiddle.net/muthkum/RxNKn/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:24:35.360

您正在传递一个字符串“Print_1”，并且在您正在使用它的函数中。“this”将不包含“Print_1”。

最好使用变量而不是这个。将您的功能更改为如下所示。

```
function Printon(var tableName)
                {
                    newWin= window.open('','','toolbar=yes,location=no,directories=yes,menubar=yes,scrollbars=yes,width=800, height=1000, left=10, top=25');
                    newWin.document.write('<table>' + document.getElementsByName(tableName).innerHTML + '</table>');
                    newWin.document.close();
                    newWin.focus();
                    newWin.print();
                    newWin.close();
                    return false;
                } 
```

希望这可以帮助！！！

# javascript - 从Javascript中的逗号分隔值获取字符串的第一个和其余部分

> ID：13341016
> 
> 赞同：2
> 
> 时间：2012-11-12T09:19:32.000
> 
> 标签：javascript, string

给定这样的字符串：

```
"boy, girl, dog, cat" 
```

什么是获得第一个单词和其余单词的好方法，所以我可以这样：

```
var first_word = "boy";
var rest = "girl, dog, cat"; 
```

现在我有这个：

`my_string.split(",");`但这给了我逗号之间的所有单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:23:20.680

您可以同时使用`split`和[`splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)：

```
var str = "boy, girl, dog, cat";
var arr = str.split(",");
var fst = arr.splice(0,1).join("");
var rest = arr.join(","); 
```

或类似的

```
// returns an array with the extracted str as first value
// and the rest as second value
function cutFirst(str,token){
   var arr = str.split(token);
   var fst = arr.splice(0,1);
   return [fst.join(""),arr.join(token)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:23:54.983

使用[`substring()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)（返回两个索引之间的子字符串或字符串的结尾）和[`indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)（返回另一个字符串中子字符串的第一个位置）的组合：

```
var input = "boy, girl, dog, cat",
    pos = input.indexOf( ',' );

console.log( input.substring( 0, pos ) );
console.log( input.substring( pos + 1 ) ); 
```

也许您想添加[`trim()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)对结果的调用以删除空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:23:37.543

您可以使用正则表达式来匹配第一个逗号前后的两个字符串：

```
var v = "boy, girl, dog, cat";
var strings = v.match(/([^,]*),(.*)/); 
```

现在`strings`将是一个三元素数组，其中

*   `strings[0]`包含完整的字符串
*   `strings[1]`包含第一个逗号之前的字符串
*   `strings[2]`包含第一个逗号后的所有内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:27:12.173

另一种选择是拆分数组，先获取并加入其余部分：

```
var my_string = "boy, girl, dog, cat";
var splitted = my_string.split(',');
var first_item = splitted.shift();
var rest_of_the_items = splitted.join(',');

console.log(first_item); // 'boy'
console.log(rest_of_the_items); // 'girl, dog, cat'
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T09:30:53.470

您可以以惰性方式创建一个数组，然后只检索第一个元素。

```
var ArrayFromString = "boy, girl, dog, cat".split(",");
firstElement = ArrayFromString.pop();
alert(firstElement); //boy
alert(ArrayFromString); //girl, dog, cat​​​​​​​​​​​​​​​​​ 
```

# c# - 在 XNA 中读取 spritesheet XML 文件

> ID：13341017
> 
> 赞同：2
> 
> 时间：2012-11-12T09:19:34.717
> 
> 标签：c#, xml, xna, sprite-sheet

嘿，我已经四处寻找了一段时间，但我仍然找不到这个问题的直接答案。我有一个 XNA 游戏，其中部分 UI 显示一个图标，该图标会经常更改（多久不相关）。我决定使用一个简单的 spritesheet 制作器来输出 spritesheet 以及一个简单的 XML 文件，其中包含每个单独图标的位置。

我想要做的是从 XML 文件中读取适当图标的精灵表位置和图标大小到`Rectangle`. 然后我可以将其用作绘图位的源矩形。

但是，我还没有遇到一个简单的解释，说明如何在不编写自己的内容管道的情况下将 XML 文件加载到 XNA 4.0 项目中（如果可能的话，我想避免这样做），并且一旦加载，如何（通常）有效地提取`Rectangle`变量中的数据。

XML 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with TexturePacker http://texturepacker.com-->
<!-- $TexturePacker:SmartUpdate:748fc56befb00c22540f953093f731a7$ -->
<!--Format:
n  => name of the sprite
x  => sprite x pos in texture
y  => sprite y pos in texture
w  => sprite width (may be trimmed)
h  => sprite height (may be trimmed)
oX => sprite's x-corner offset (only available if trimmed)
oY => sprite's y-corner offset (only available if trimmed)
oW => sprite's original width (only available if trimmed)
oH => sprite's original height (only available if trimmed)
r => 'y' only set if sprite is rotated
-->
<TextureAtlas imagePath="Loadout_Icons.png" width="185" height="86">
    <sprite n="Charge_Down.png" x="0" y="0" w="37" h="43"/>
    <sprite n="Charge_Up.png" x="37" y="0" w="37" h="43"/>
    <sprite n="Damage_Down.png" x="74" y="0" w="37" h="43"/>
    <sprite n="Damage_Up.png" x="111" y="0" w="37" h="43"/>
    <sprite n="FireRate_Down.png" x="148" y="0" w="37" h="43"/>
    <sprite n="FireRate_Up.png" x="0" y="43" w="37" h="43"/>
    <sprite n="Health_Down.png" x="37" y="43" w="37" h="43"/>
    <sprite n="Health_Up.png" x="74" y="43" w="37" h="43"/>
    <sprite n="Speed_Down.png" x="111" y="43" w="37" h="43"/>
    <sprite n="Speed_Up.png" x="148" y="43" w="37" h="43"/>
</TextureAtlas> 
```

我也不确定我是否会因为不制作自己的 XML 文件而自取其辱，那会更容易吗？

我已经阅读了 msdn 提供的大部分内容，但无济于事，但任何指向相关页面或问题的链接将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:29:06.000

以下应该可以工作，但是，它完全未经测试：

```
[XmlRoot("TextureAtlas", IsNullable = false)]
public class TextureAtlasXml
{
    public static TextureAtlasXml FromFile(String file)
    {
        using (var stream = File.OpenRead(file))
        {
            return FromStream(stream);
        }
    }

    public static TextureAtlasXml FromStream(Stream stream)
    {
        var serializer = new XmlSerializer(typeof(TextureAtlasXml));
        return (TextureAtlasXml)serializer.Deserialize(stream);
    }

    [XmlAttribute("imagePath")]
    public String ImagePath;

    [XmlAttribute("width")]
    public Int32 Width;

    [XmlAttribute("height")]
    public Int32 Height;

    [XmlElement("sprite")]
    public List<SpriteXml> Sprites;
}

public class SpriteXml
{
    [XmlAttribute("n")]
    public String Name;

    [XmlAttribute("x")]
    public Int32 X;

    [XmlAttribute("y")]
    public Int32 Y;

    [XmlAttribute("w")]
    public Int32 Width;

    [XmlAttribute("h")]
    public Int32 Height;

    public Rectangle Rectangle { get { return new Rectangle(this.X, this.Y, this.Width, this.Height); } }
} 
```

我建议您考虑使用内容管道，因为它提供了一个很好的解决方案，但是，代码应该像您想要的那样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T05:26:39.570

如果您愿意使用 Sprite Vortex（实际上是特定版本），您可以使用以下类。您必须使用 Sprite Vortex 1.2.2，因为在较新的版本中 XML 格式发生了变化。确保您添加属性的 XML 文件更改为“不编译”。

如果您需要一个工作示例，我可以给您发送一个非常简单的示例。

ps Sprite Vortex 应该做与使用其他程序相同的事情，但是 v 1.2.2 有很多错误，但还不错。

课程在这里： http: [//pastebin.com/sNSa7xgQ](http://pastebin.com/sNSa7xgQ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T01:01:11.123

由于仅在评论中提到，我决定说我最终使用 Niko Drašković 的建议，该建议是专门为纹理打包器制作的专用管道扩展，可在[http://thirdpartyninjas.com/blog/2012/08/找到02/texturepacker-xna-content-pipeline-extension/](http://thirdpartyninjas.com/blog/2012/08/02/texturepacker-xna-content-pipeline-extension/)。这使得使用纹理打包器生成的 XML 文件变得非常容易。

然而，作为一个旁注和我重新审视这个问题的另一个原因是说我最近一直在使用 XML 做一些工作（试图更好地理解它们）以及我发现的最佳方法处理读取自定义 XML 文件而不为每个文件编写新的管道扩展（就像现在看起来那样优雅）如下。我将 XML 文件添加到内容目录，就像您添加任何其他纹理等一样。在 XML 的属性中，我将*构建操作*设置为“内容”，然后*将复制到输出目录*设置为“始终复制”。从这里我有一个单独的类，我在其中传递文件的名称，并在其中处理我需要的来自 XML 的所有内容。这些课程以：

```
Stream stream = TitleContainer.OpenStream("Content\\" + fileName + ".xml");
XDocument doc = XDocument.Load(stream); 
```

and then go on (using the rest of the System.Xml.Linq library) to read and store the appropriate data, with methods to access data easily. This may **not** be the best approach to tackling the problem but it has since worked for me and is simple enough to understand and implement quickly. Hope this can help anyone else with a similar issue.

# ios - Mac OSX 在构建 MonoDevelop iOS App 时要求访问钥匙串

> ID：13341024
> 
> 赞同：3
> 
> 时间：2012-11-12T09:20:19.397
> 
> 标签：ios, macos, monodevelop, osx-mountain-lion, keychain

在 Mac 上的 MonoDevelop 中构建项目时，我收到消息“MAC OS X 想要进行更改。键入管理员的名称和密码以允许这样做。MAC OSX 想要使用系统钥匙串。”

我发现[Mac OS X 想要在编译项目时使用系统钥匙串](https://stackoverflow.com/questions/10204320/mac-os-x-wants-to-use-system-keychain-when-compiling-the-project)的帖子， 但这并不能完全回答我的问题。我安装的配置文件是通过 XCode 完成的，并且是我在 Provisioning Profile 上的当前/有效配置文件，所以我认为这些是好的 - XCode 报告它们是有效的。

我已将我的开发环境从 Macbook（编译应用程序运行良好，没有此错误）移至另一台 Mac，并且这已经开始出现。如果我输入我的用户名/密码，它会编译并运行。

任何想法为什么会发生这种情况？

（我想知道的一件事可能会导致问题......当我最初在我的 Macbook 上设置开发环境时，我将我的证书导出/备份为 Jonny WIlson.p12。然而，在我的新 Mac 上，我无法导入这个.我尝试重新导出它并再次导入它，这也失败了。这个初始证书（用于生成供应配置文件中的开发/分发证书）是让它工作的重要部分吗？我问这个是因为我读过拥有 Apple 证书后，在论坛中不再需要此密钥？这是正确的吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:23:32.213

就我而言，我去了钥匙串访问，在“钥匙串”（左上角）中选择了“系统”。然后对于每个项目：右键单击，“获取信息”，“访问控制”并在“始终允许这些应用程序访问：”列表中添加 Xcode。

（我没有使用MonoDevelop，但猜测问题原因类似）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-11T12:22:44.743

帽子提示：[https ://forums.developer.apple.com/thread/25092](https://forums.developer.apple.com/thread/25092)

自 El Capitan 以来，您不能再以编程方式单击“允许”或“始终允许”。

这包括来自屏幕共享！

假设您可以将鼠标插入无头 Mac，然后单击“始终允许”。在我关闭所有活动的屏幕共享会话之前，这对我不起作用。

然后我插入显示器、鼠标和键盘，单击“始终允许”，生活很好；直到我必须处理新证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-14T11:15:26.017

修复 El Capitan：

1.  将证书导出到 .p12
2.  打开终端
3.  跑：`security import <pathToP12> -k <keychain_name>.keychain -t priv -f pkcs12 -A`

您将被要求输入钥匙串密码，仅此而已。

# c# - 重绘复选框

> ID：13341028
> 
> 赞同：0
> 
> 时间：2012-11-12T09:20:36.117
> 
> 标签：c#, winforms, checkbox, wndproc

我想知道是否可以`checkBox`为文本和刻度绘制自定义颜色？我听说可以通过覆盖[`WndProc`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)和使用来实现[`WM_PAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213%28v=vs.85%29.aspx)，但我没有这样做的经验。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:29:56.633

Here is an exceptionally basic example of how you can redraw a CheckBox:

```
 public class CustomCheckBox : CheckBox
    {
        public CustomCheckBox()
        {
            this.SetStyle(ControlStyles.UserPaint, true);
            this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
        }

        protected override void OnPaint(PaintEventArgs pevent)
        {
            base.OnPaint(pevent);
            if (this.Checked)
            {
                pevent.Graphics.FillRectangle(new SolidBrush(Color.Blue), new Rectangle(0, 0, 16, 16));
            }
            else
            {
                pevent.Graphics.FillRectangle(new SolidBrush(Color.Red), new Rectangle(0, 0, 16, 16));
            }
        }
    } 
```

It works, but its very rough around the edges! However it does illustrate very basically how you can draw custom controls.

# jquery - jQuery ~ 只获取内部 div id 名称

> ID：13341030
> 
> 赞同：2
> 
> 时间：2012-11-12T09:20:40.660
> 
> 标签：jquery

单击红色区域时会提示“红色”，单击蓝色区域时会提示“蓝色”和“红色”！如何让它只警告“蓝色”然后停止。因为我只需要 div 名称的前面。

[http://jsfiddle.net/FFZuD/1/](http://jsfiddle.net/FFZuD/1/)

HTML

```
<div id="block1" style="width: 300px; height: 200px; background-color: red;">
        <div id="block2" style="width: 100px; height: 100px; background-color: #09F; ">
        </div>
</div> 
```

JS

```
$('div').click(function(){
  alert($(this).attr('id'));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:22:00.593

您需要使用[**event.stopPropagation()**](http://api.jquery.com/event.stopPropagation/) jquery 函数。最好使用`this.id`而不是`$(this).attr('id')`; 因为它会更有效率。

**[现场演示](http://jsfiddle.net/FFZuD/3/)**

```
$('div').click(function(event){
  event.stopPropagation()
  //alert($(this).attr('id'));
  alert(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:30:55.763

您正在寻找的是 stopPropagation 它可以防止事件冒泡。

演示：http: [//jsfiddle.net/meo/FFZuD/5/](http://jsfiddle.net/meo/FFZuD/5/)

```
$(".block").click(function(e) {
        e.stopPropagation();            
        /*etc...*/
});​​ 
```

# javascript - 在光标附近添加帮助文本

> ID：13341031
> 
> 赞同：0
> 
> 时间：2012-11-12T09:20:41.410
> 
> 标签：javascript, jquery, css

当光标悬停在对象上时，我正在尝试找到如何通过光标添加帮助文本的提示。当鼠标在该 DIV 上时，有一个 DIV 元素（200px x 200px）我需要帮助文本出现在光标附近（例如，请选择 smth...）并跟随该 div 元素中的光标。也许有人知道是否有 JS 插件或 smth？到处搜索，但找不到类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:26:52.533

您可以尝试使用 JQuery UI 库[工具提示功能](http://jqueryui.com/tooltip/) 下载并按此顺序将库包含在您的 html 头标记中，

```
<link href="css/smoothness/jquery-ui-1.9.0.custom.css" rel="stylesheet">
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
<script src="js/jquery-ui-1.9.0.custom.js"></script> 
```

用于使用光标跟随器初始化工具提示功能的 Jquery 代码

```
<script language="javascript" type="text/javascript">
$(document).ready(function() {
        $(document).tooltip({
            track: true
        });
}); 
</script> 
```

在您的 html 正文中，您可以在 title 属性内使用这样的 div 标签和您的工具提示文本

```
<div id="divElement" class="tooltip" title="Your text here" style="width:200px; height:200px; border:#F00 1px solid">DIV TAG</div> 
```

# c - C 项目中的 Eclipse 和 IDL 文件

> ID：13341032
> 
> 赞同：1
> 
> 时间：2012-11-12T09:20:44.420
> 
> 标签：c, eclipse

我正在使用 Eclipse CDT 进行 C 编程（MinGW），我必须在 ECLIPSE 上安装一个 sdk “称为 Decklink SDK”。我的问题是 SDK 是 IDL 文件的形式，所以我必须编译它们以获得一些 .h 和 .c 文件，这样我才能正确使用它们。我的问题是如何在 Eclipse 中为 C 编译 IDL。

在 Visual Studio 中这很容易，但我不能在工作中使用它。

# php - 有没有更好的方法来确定 php 5.3 中的空关联数组？

> ID：13341036
> 
> 赞同：1
> 
> 时间：2012-11-12T09:20:55.770
> 
> 标签：php

php 5.3 中的 empty() 函数不适用于关联数组。我有一个关联数组，它可能有大约 30 多个元素。

```
$arr = array(
             'one'=>kwara, 
             'two'=>osun,
             ...
             'thirty'=>lagos
            ) 
```

如果关联数组为空，如下所示：

```
$arr = array(
             'one'=>'', 
             'two'=>'',
             ...
             'thirty'=>''
            ) 
```

我需要检查数组是否为空，以下在 php 5.3 中不起作用。

```
if(empty($arr))
{
  echo "array is empty<br />>";
}
else
{
  echo "array is NOT empty<br />";
} 
```

并将返回“数组不为空”。我知道[php 5.4](http://uk3.php.net/manual/en/function.empty.php)中的行为有所不同，但我当前的平台是 php 5.3。

为了克服这个问题，我使用了以下方法：

```
if(strlen(implode('',array_values($arr))) > 0)       
{

 echo "array is NOT empty<br />>";
}
else
{
  echo "array is empty<br />";
} 
```

**问题是**：在 php 5.3 中实现这一点有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:23:22.773

你有没有尝试过：

```
if (sizeof(array_filter($array)) === 0) // do your stuff 
```

你原来的也可以改进如下：

```
if (implode($array) !== '') // do your stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:24:08.353

简短的回答：没有

更长的答案：您正在查看的数组*根本*不是空的，它包含一堆长度为零的字符串的键。您的解决方案可能是最短*且*可读的解决方案之一。不过，您可能希望将其包装在您自己的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:28:22.010

Empty 仅适用于真正的空值，您的数组已分配键，因此它不为空。您的解决方案可能是做您想做的事情的最佳方式 - 很难说，您需要进行一些基准测试，它可以通过许多其他方式完成：

```
if (array_filter($arr) === array()) {}
// or
if (!implode('', $arr)) {} 
```

# java - tomcat WAR的泽西错误

> ID：13341043
> 
> 赞同：1
> 
> 时间：2012-11-12T09:21:25.353
> 
> 标签：java, tomcat, jersey

我无法让我的 tomcat 服务器使用我的 WAR 文件。我正在使用 jersey 1.14，它在 eclipse 中通过 tomcat 6 运行良好。但是当我将战争上传到我的远程 tomcat 6 服务器时，当我尝试访问该站点时收到以下错误。

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Servlet.init() for servlet Jersey REST Service threw exception
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:679)
root cause

java.lang.UnsupportedClassVersionError: com/shafer/server/server : Unsupported major.minor version 51.0 (unable to load class com.shafer.server.server)
org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2822)
org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
java.lang.Class.forName0(Native Method)
java.lang.Class.forName(Class.java:264)
com.sun.jersey.core.reflection.ReflectionHelper.classForNameWithException(ReflectionHelper.java:238)
com.sun.jersey.spi.scanning.AnnotationScannerListener$AnnotatedClassVisitor.getClassForName(AnnotationScannerListener.java:222)
com.sun.jersey.spi.scanning.AnnotationScannerListener$AnnotatedClassVisitor.visitEnd(AnnotationScannerListener.java:186)
org.objectweb.asm.ClassReader.accept(Unknown Source)
org.objectweb.asm.ClassReader.accept(Unknown Source)
com.sun.jersey.spi.scanning.AnnotationScannerListener.onProcess(AnnotationScannerListener.java:136)
com.sun.jersey.core.spi.scanning.uri.FileSchemeScanner$1.f(FileSchemeScanner.java:86)
com.sun.jersey.core.util.Closing.f(Closing.java:71)
com.sun.jersey.core.spi.scanning.uri.FileSchemeScanner.scanDirectory(FileSchemeScanner.java:83)
com.sun.jersey.core.spi.scanning.uri.FileSchemeScanner.scan(FileSchemeScanner.java:71)
com.sun.jersey.core.spi.scanning.PackageNamesScanner.scan(PackageNamesScanner.java:225)
com.sun.jersey.core.spi.scanning.PackageNamesScanner.scan(PackageNamesScanner.java:141)
com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:80)
com.sun.jersey.api.core.PackagesResourceConfig.init(PackagesResourceConfig.java:104)
com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:78)
com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:89)
com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:700)
com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:678)
com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203)
com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)
javax.servlet.GenericServlet.init(GenericServlet.java:212)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:679)
note The full stack trace of the root cause is available in the Apache Tomcat/6.0.35 logs.` 
```

这是我的网络 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>shafer</display-name>
  <servlet>
<servlet-name>Jersey REST Service</servlet-name>
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
<init-param>
  <param-name>com.sun.jersey.config.property.packages</param-name>  
  <param-value>com.shafer.server</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
<servlet-name>Jersey REST Service</servlet-name>
<url-pattern>/</url-pattern>
 </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:26:22.440

您的 .war 是在比远程 tomcat 上可用的 JRE 更新的 JDK 下编译的。在远程服务器上安装匹配的 JRE，或者使用正确版本的 JDK 重新编译您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:24:13.407

这条线应该给你一个 clou：

```
java.lang.UnsupportedClassVersionError: com/shafer/server/server :
Unsupported major.minor version 51.0
(unable to load class com.shafer.server.server) 
```

是什么`com.shafer.server.server`？检查库的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:26:14.900

UnsupportedClassVersionError 表示该类是使用比您在运行时中使用的版本更新的 Java 编译器编译的。

我不知道版本号，但您可能应该使用 JRE 6 或更高版本来运行 Tomcat。

# android - 无法在 android 模拟器上运行 AIR .apk 文件

> ID：13341044
> 
> 赞同：1
> 
> 时间：2012-11-12T09:21:37.360
> 
> 标签：android, apache-flex, android-emulator, apk, flex4.6

我在 Flex 4.6 中开发了一个移动应用程序，并通过以下方式生成了一个 .apk 文件

![在此处输入图像描述](../Images/752ee220f55e7df142993a33381313ac.png)

并安装在安卓模拟器上。安装成功，但当我尝试运行该应用程序时，弹出对话框显示`application stopped unexpectedly Please try again`. 请告诉我如何摆脱该错误并在 android 模拟器中运行该应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:16:37.770

解决方案非常简单，如果您在模拟器上运行 App，则必须为位于`C:\Program Files\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0\runtimes\air\android\emulator\Runtime.apk`您的 App 中的模拟器安装 air run time 才能按您的意愿运行。编程愉快，祝你一切顺利，亲爱的 Arshay。

# ruby-on-rails-3 - 为什么这个协会有效？

> ID：13341045
> 
> 赞同：0
> 
> 时间：2012-11-12T09:21:38.160
> 
> 标签：ruby-on-rails-3, activerecord

我有一个小应用程序，允许用户上传食谱并保存最喜欢的食谱。我有一个名为 country 的单独模型，其中包含世界上所有的国家，然后允许用户从下拉列表中选择一个。

最初我的协会是

食谱

```
has_one :country 
```

国家

```
belongs_to :recipe 
```

经过一些研究，正确的关联是

食谱

```
belongs_to :country 
```

国家

```
belongs_to :recipe 
```

配方模型中的外键 country_id。

我打算再读一些，但想知道是否有人可以解释为什么是这种关联而不是第一个关联

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:43:38.140

我邀请您像这样建立关联：

*   国家可以有很多食谱
*   食谱属于一个国家

如果是这样，您应该将关联定义为：

国家：

```
has_many :recipes 
```

食谱：

```
belongs_to :country 
```

而且我认为您的第二个关联也不正确。

当您`belongs_to :country`在 Recipe 模型中定义时，这意味着您的 Recipe 表必须有一个名为 的列`country_id`。它是 Country 模型的外键。

在第一个定义关联中，`Country`模型将有一个名为 的列`recipe_id`，因此，每个国家/地区只有一个配方，这不是您想要的，对吧？为什么它不起作用？因为一个国家只有一个记录，所以一个国家只能有一个食谱，通过`recipe_id`.

对于第一个关联，您的关联是**一对一的**（一个国家有一个食谱），而您实际上希望您的关联是**一对多的**（一个国家有很多食谱）。所以这就是为什么第一个关联不起作用的原因（第二个也是）。

The main thing you need to remember here is, what model you put a `belongs_to` association, that model will have a column called `'association name'_id`. The different between using `has_one` and `belongs_to` only is **where you put foreign key** and **the meaning of association**. Check [here](http://guides.rubyonrails.org/association_basics.html#choosing-between-belongs_to-and-has_one) to clearer.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:33:32.607

我不确定这是正确的协会。belongs_to 关联总是用在具有外键的模型中（见[这里](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)）。据我所知，在两个表中都有外键不是一个好主意。你能解释一下为什么你认为最后一个关联是正确的吗？

顺便说一句，我认为正确的关联是：国家有_许多食谱和食谱属于_国家

# sql-server - Sql server 死锁问题 - 查询以找出长时间运行的 trans 不返回任何内容

> ID：13341047
> 
> 赞同：0
> 
> 时间：2012-11-12T09:21:45.133
> 
> 标签：sql-server, sql-server-2005

我有一个查询要找出长期运行的事务以解决死锁问题-

```
SELECT spid, cmd, status, loginame, open_tran, datediff(s, last_batch, getdate ()) AS [WaitTime(s)] 
FROM master..sysprocesses p 
WHERE open_tran > 0 
AND spid > 50 
AND datediff (s, last_batch, getdate ()) > 30 
ANd EXISTS (SELECT * FROM master..syslockinfo l 
WHERE req_spid = p.spid AND rsc_type <> 2) 
```

但它没有返回任何 rcord，而且我的应用程序仍然遇到死锁问题。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:27:31.147

*   `DBCC TRACEON(1222,-1)`- 启用跟踪标志，死锁信息将被记录到日志文件
*   `DBCC TRACESTATUS (1222, -1)`- 检查跟踪标志的状态
*   `DBCC TRACEOFF (1222,-1)`- 禁用跟踪标志

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:01:50.927

我意识到在某些方面这是要求澄清，但重要的是它属于答案。

死锁是一个非常特殊的事件，其中 2 个进程正在等待相同的资源，并且它们处于无法通过等待解决它的 catch-22 情况。很好的阅读[有一个非常简单的解释](http://msdn.microsoft.com/en-us/library/aa213032%28v=sql.80%29.aspx)，即使它说的是 SQL Server 2000。也可以看看[这个伟大的脚本来重现它](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=49692)。了解死锁最重要的一点可能是它们通常非常快。您进入了死锁情况，而 SQL Server 足够聪明，可以识别它并终止其中一个进程。

因此，如果您仍然认为自己遇到了死锁，请听答案＃1，因为海报是正确的。如果您认为您遇到了人们更宽松地使用术语“死锁”的意思，即锁定和阻塞进程占用资源并且所有其他进程需要等待的位置。您可以通过运行 SQL Server Profiler 并在问题过程中慢慢磨练来解决这些问题。

希望这将有助于为未来的读者澄清，如果不是原始海报的话。确保你知道你实际上在研究什么！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:55:35.997

您可以尝试使用 DBCC TRACEON (1204)

# uml - 绘制类似 UML 的图来表示数学算法

> ID：13341048
> 
> 赞同：3
> 
> 时间：2012-11-12T09:21:47.973
> 
> 标签：uml

假设我有数学算法，例如

```
A = B + C
C = D + E
F = B + D 
```

我想画一个图来表示它和算法的流程，即人们知道 A 的值是如何计算的。有没有工具或者UML图的名字可以看一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:26:24.560

UML 图是关于静态结构（类/组件/包）或*实体之间的*交互（活动/序列图/状态机）。

UML 不涵盖算法或算法设计（与任何其他类型的具体方法规范非常相似）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T12:02:47.107

也许是[数据流图](http://en.wikipedia.org/wiki/Data_flow_diagram)？

像这样的东西：

![数据流图示例](../Images/96318889dbca92226ac259d8bfdf6865.png)

它不是 UML 的一部分，但可以是显示计算的一种非常有用的方式。

hth。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-25T09:38:40.283

有一个建议是用称为[KOPENOGRAM](http://www.kopenogram.org)的图来补充 UML 图。而数据流则侧重于算法结构、条件、循环等。由于这是一个提议，存在有限的特定工具来从源代码生成或绘制 kopenograms（AFAIK 有用于 BlueJ 或 NetBeans 的 Java 插件）。但是，可以使用 Excel 或任何电子表格应用程序来制作表格和边框。

您的示例将如下所示：

[![在此处输入图像描述](../Images/8a21ec3bb5553ef9ff9106aae6af3cee.png)](https://i.stack.imgur.com/QwrHp.png)

与前面的示例一样，操作没有显示依赖关系，因为这是任务而不是编译器。

# android - 当我选择列表下方的项目时，我的 ListView 获取 nullpointerException

> ID：13341049
> 
> 赞同：1
> 
> 时间：2012-11-12T09:21:52.483
> 
> 标签：android, android-layout, listview

我有一个从包含 22 个项目的数据库中填充的 listView。当我将数据库中的项目绑定到我的 listView 时，所有项目都会显示在列表中。

但这是问题所在。我只能从 listView 中选择前 7 个项目。当我尝试在视图中选择第 8 - 22 个项目时，我得到一个 nullpointerException。

有谁知道为什么以及如何解决这个问题？

在列表中选择项目时我的代码：

```
 listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
              //ListView lv = (ListView) arg0;
              TextView tv = (TextView) ((ListView) findViewById(R.id.list_view)).getChildAt(arg2);
              //error here \/
              if (tv == null) {
                  Log.v("TextView", "Null");
              }

              String s = tv.getText().toString();
              _listViewPostion = arg2;

              Toast.makeText(CustomerPick.this, "Du valde: " + s, arg2).show();
        }
    }); 
```

将值绑定到 listView 时的代码：

```
 public ArrayAdapter<Customer> BindValues(Context context){
    ArrayAdapter<Customer> adapter = null;
    openDataBase(true);

    try{ 

        List<Customer> list = new ArrayList<Customer>(); 
        Cursor cursor = getCustomers();

        if (cursor.moveToFirst()) 
        {
            do 
            {  
                list.add(new Customer(cursor.getInt(0), cursor.getString(1)));   
            } 
            while (cursor.moveToNext());  
        } 
        _db.close();  
        Customer[] customers = (Customer []) list.toArray(new Customer[list.size()]);  
        Log.v("PO's",String.valueOf(customers.length));  

        adapter = new ArrayAdapter<Customer>(context, android.R.layout.simple_list_item_single_choice, customers);

        }  
        catch(Exception e)  
        {  
            Log.v("Error", e.toString());
        }  
        finally{
            close();
        }
    return adapter;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:32:05.387

您试图直接从 listview 元素中获取数据，这绝不是一个好主意。你得到空值是因为屏幕上真的只有 7 个项目。当您滚动时，这七个项目会重新排列，并更改它们的数据，使其看起来像是在滚动，从而保持资源意识。列表视图应被视为仅用于查看目的。如果您需要数据，请通过位置或 Id 或其他方式引用**数据源，在本例中为您的数组列表。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:36:22.633

请参阅：http: [//developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)

修改后的代码：

```
 listView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {

            //arg1 -> The view within the AdapterView that was clicked (this will be a view provided by the adapter)
            //arg0 -> The AdapterView where the click happened.
            //arg2 -> The position of the view in the adapter.
            //arg3 -> The row id of the item that was clicked. 

          TextView tv = (TextView) arg1.findViewById(R.id.list_view);

          if (tv == null) {
              Log.v("TextView", "Null");
          }

          String s = tv.getText().toString();
          _listViewPostion = arg2;

          Toast.makeText(CustomerPick.this, "Du valde: " + s, arg2).show();
    }
}); 
```

# java - 开始备忘单测试时的 I18n 问题/异常

> ID：13341050
> 
> 赞同：0
> 
> 时间：2012-11-12T09:21:59.200
> 
> 标签：java, eclipse, testing, functional-testing, jubula

我正在评估 GUI 测试工具 Jubula。在阅读备忘单的过程中，我偶然发现了一些我不太了解的错误。

我通过 cheet 表工作，当我尝试开始测试时没有任何反应。以下 Stacktraces 被打印到 clinet 日志文件中。有没有人遇到过这些错误并给我提示，如何解决这些问题？

* * *

```
2012-11-12 09:11:01.323 [ModalContext] 错误 oejubula.tools.i18n.CompSystemI18n - 在资源包中找不到 I18N 键：1
java.util.MissingResourceException：没有找到键的条目：1
    在 org.eclipse.jubula.tools.i18n.CompSystemI18n.getStringInternal(CompSystemI18n.java:128) ~[org.eclipse.jubula.tools_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.tools.i18n.CompSystemI18n.getString(CompSystemI18n.java:80) ~[org.eclipse.jubula.tools_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.initMap(StringHelper.java:154) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.(StringHelper.java:56) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.getInstance(StringHelper.java:85) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.initDefaultNames(ComponentNamesBP.java:743) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.(ComponentNamesBP.java:158) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.getInstance(ComponentNamesBP.java:167) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.persistence.ProjectPM.loadProjectInROSession(ProjectPM.java:507) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.ui.rcp.handlers.project.OpenProjectHandler$OpenProjectOperation.load(OpenProjectHandler.java:274) [org.eclipse.jubula.client.ui.rcp_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.ui.rcp.handlers.project.OpenProjectHandler$OpenProjectOperation.run(OpenProjectHandler.java:121) [org.eclipse.jubula.client.ui.rcp_1.3.0.201210161256.jar:na]
    在 org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) [org.eclipse.jface_3.7.0.v20110928-1505.jar:na]
2012-11-12 09:11:01.339 [ModalContext] 错误 oejubula.tools.i18n.CompSystemI18n - 在资源包中找不到 I18N 键：2
java.util.MissingResourceException：没有找到键的条目：2
    在 org.eclipse.jubula.tools.i18n.CompSystemI18n.getStringInternal(CompSystemI18n.java:128) ~[org.eclipse.jubula.tools_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.tools.i18n.CompSystemI18n.getString(CompSystemI18n.java:80) ~[org.eclipse.jubula.tools_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.initMap(StringHelper.java:154) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.(StringHelper.java:56) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.getInstance(StringHelper.java:85) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.initDefaultNames(ComponentNamesBP.java:743) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.(ComponentNamesBP.java:158) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.getInstance(ComponentNamesBP.java:167) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.persistence.ProjectPM.loadProjectInROSession(ProjectPM.java:507) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.ui.rcp.handlers.project.OpenProjectHandler$OpenProjectOperation.load(OpenProjectHandler.java:274) [org.eclipse.jubula.client.ui.rcp_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.ui.rcp.handlers.project.OpenProjectHandler$OpenProjectOperation.run(OpenProjectHandler.java:121) [org.eclipse.jubula.client.ui.rcp_1.3.0.201210161256.jar:na]
    在 org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) [org.eclipse.jface_3.7.0.v20110928-1505.jar:na]
2012-11-12 09:11:01.339 [ModalContext] 错误 oejubula.tools.i18n.CompSystemI18n - 在资源包中找不到 I18N 键：3
java.util.MissingResourceException：没有找到键的条目：3
    在 org.eclipse.jubula.tools.i18n.CompSystemI18n.getStringInternal(CompSystemI18n.java:128) ~[org.eclipse.jubula.tools_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.tools.i18n.CompSystemI18n.getString(CompSystemI18n.java:80) ~[org.eclipse.jubula.tools_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.initMap(StringHelper.java:154) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.(StringHelper.java:56) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.getInstance(StringHelper.java:85) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.initDefaultNames(ComponentNamesBP.java:743) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.(ComponentNamesBP.java:158) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.getInstance(ComponentNamesBP.java:167) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.persistence.ProjectPM.loadProjectInROSession(ProjectPM.java:507) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.ui.rcp.handlers.project.OpenProjectHandler$OpenProjectOperation.load(OpenProjectHandler.java:274) [org.eclipse.jubula.client.ui.rcp_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.ui.rcp.handlers.project.OpenProjectHandler$OpenProjectOperation.run(OpenProjectHandler.java:121) [org.eclipse.jubula.client.ui.rcp_1.3.0.201210161256.jar:na]
    在 org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) [org.eclipse.jface_3.7.0.v20110928-1505.jar:na]
2012-11-12 09:11:01.339 [ModalContext] 错误 oejubula.tools.i18n.CompSystemI18n - 在资源包中找不到 I18N 键：百分比
java.util.MissingResourceException：找不到键的条目：百分比
    在 org.eclipse.jubula.tools.i18n.CompSystemI18n.getStringInternal(CompSystemI18n.java:128) ~[org.eclipse.jubula.tools_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.tools.i18n.CompSystemI18n.getString(CompSystemI18n.java:80) ~[org.eclipse.jubula.tools_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.initMap(StringHelper.java:154) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.(StringHelper.java:56) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.utils.StringHelper.getInstance(StringHelper.java:85) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.initDefaultNames(ComponentNamesBP.java:743) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.(ComponentNamesBP.java:158) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.businessprocess.ComponentNamesBP.getInstance(ComponentNamesBP.java:167) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.core.persistence.ProjectPM.loadProjectInROSession(ProjectPM.java:507) [org.eclipse.jubula.client.core_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.ui.rcp.handlers.project.OpenProjectHandler$OpenProjectOperation.load(OpenProjectHandler.java:274) [org.eclipse.jubula.client.ui.rcp_1.3.0.201210161256.jar:na]
    在 org.eclipse.jubula.client.ui.rcp.handlers.project.OpenProjectHandler$OpenProjectOperation.run(OpenProjectHandler.java:121) [org.eclipse.jubula.client.ui.rcp_1.3.0.201210161256.jar:na]
    在 org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) [org.eclipse.jface_3.7.0.v20110928-1505.jar:na]

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:22:09.703

Jubula Bugzilla 中有一个错误条目。它已在当前的开发平台中修复，并将与 Kepler 版本一起发布。这并不重要，但确实使日志文件更完整：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=393124](https://bugs.eclipse.org/bugs/show_bug.cgi?id=393124)

# matlab - 如何从由错误字符集编码的字符串正确重建字符串

> ID：13341052
> 
> 赞同：2
> 
> 时间：2012-11-12T09:22:02.480
> 
> 标签：matlab, encoding, urlread

**编辑**添加了一些新信息以使问题更清楚。

在 2012B 之前的 matlab 中，`urlread`如果 Web 内容的字符集不是 utf8，该方法将返回由错误字符集构造的字符串。（在 Matlab 2012B 中有所改进）

例如

```
% a chinese website whose content encoding by gb2312
url = 'http://www.cnbeta.com/articles/213618.htm'; 
html = urlread(url) 
```

因为 Matlab 使用 utf8 而不是 gb2312 对 html 进行编码。您会看到 html 中的汉字显示不正确。

如果我阅读一个带有 utf8 编码的中文网站，那么一切正常：

```
% a chinese website whose content encoding by utf8
url = 'http://www.baidu.com/'; 
html = urlread(url) 
```

那么有什么方法可以从html正确重建字符串？我尝试了以下方法，但没有奏效：

```
>> bytes = unicode2native(html,'utf8');
>> str = native2unicode(bytes,'gb2312') 
```

但是，我知道有一种方法可以解决`urlread`'s 的问题：`edit urlread.m`在控制台中输入，然后在第 108 行（在 matlab 2011B 中）附近替换代码：

```
output = native2unicode(typecast(byteArrayOutputStream.toByteArray','uint8'),'UTF-8'); 
```

经过：

```
output = native2unicode(typecast(byteArrayOutputStream.toByteArray','uint8'),'gb2312'); 
```

保存文件，现在`urlread`将适用于由 gb2312 编码的网站。实际上，这个解决方案指出了为什么`urlread`有时不起作用。该方法`urlread`始终使用 utf8 字符集对字符串进行编码，即使内容不是由 utf8 编码的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T15:59:32.470

看来您已经有了解决方案，只需创建一个名为的函数`urlread_gb`即可读取`gb2312`.

# sql - Sugar crm suctom字段sql选择错误

> ID：13341054
> 
> 赞同：1
> 
> 时间：2012-11-12T09:22:13.617
> 
> 标签：sql, sugarcrm

我在 Accounts 模块中添加了一些额外的字段。还在详细搜索中添加了相同的字段。一个字段是十进制，另一个是文本，从下拉菜单中填充。运行测试搜索后，一切看起来都很好。但不久前，我需要查看搜索中的所有项目。使用我新添加的字段作为参数进行搜索。您可能已经知道，在 Sugar crm 中搜索仅显示前 20 个项目。因此，在尝试访问另外 20 个项目后，我得到了一个空列表。Sugarcrm.log 向我展示了 sql 查询错误：

```
11/12/12 00:09:33 [6300][ca4960aa-6cce-065a-be1d-4fa7b40db052][FATAL]  Query Failed:SELECT TOP 21 * FROM
(SELECT  ROW_NUMBER()
OVER (ORDER BY accounts.name) AS row_number,
accounts.id  ,
**accounts_cstm.print_srv_prov_c**, 
accounts.name , 
accounts.billing_address_city , 
accounts.billing_address_country , 
accounts.phone_office  , 
LTRIM(RTRIM(ISNULL(jt0.first_name,'')+N' '+ISNULL(jt0.last_name,'')))     assigned_user_name , 
jt0.created_by assigned_user_name_owner  , 
N'Users' assigned_user_name_mod, 
accounts.annual_revenue , 
accounts.account_type , 
**accounts_cstm.print_srv_prov_c** , 
accounts.assigned_user_id  
FROM accounts   
LEFT JOIN accounts_cstm ON accounts.id = accounts_cstm.id_c   
LEFT JOIN  users jt0 ON accounts.assigned_user_id=jt0.id AND jt0.deleted=0 AND jt0.deleted=0 
where ((accounts.account_type in (N'potencial_client') ) AND (     accounts_cstm.print_srv_prov_c in (N'itel'))) AND accounts.deleted=0 
) AS a
WHERE row_number > 20::: [Microsoft][SQL Server Native Client 10.0][SQL Server]The     column 'print_srv_prov_c' was specified multiple times for 'a'. 
```

所有字段均使用 Studio 工具添加，源代码完好无损。发生 sql 错误，因为列`accounts_cstm.print_srv_prov_c`被使用了两次。为什么会发生这种情况以及如何解决它。

我正在使用 SugarCRM CE 6.4.4

# r - 使用 ggplot 在时间序列中绘制多个变量的平均值

> ID：13341056
> 
> 赞同：11
> 
> 时间：2012-11-12T09:22:15.803
> 
> 标签：r, ggplot2

我有一个文件，其中包含从 a 到 k 的多个变量的时间序列数据。

我想创建一个图表，绘制变量 a 到 k 随时间变化的平均值，在该平均线之上和之下添加一个平滑区域，表示每天的最大和最小变化。

所以类似于置信区间，但在平滑版本中。

这是数据集： [https ://dl.dropbox.com/u/22681355/co.csv](https://dl.dropbox.com/u/22681355/co.csv)

这是我到目前为止的代码：

```
library(ggplot2)
library(reshape2)
meltdf <- melt(df,id="Year")
ggplot(meltdf,aes(x=Year,y=value,colour=variable,group=variable)) + geom_line() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T10:09:42.487

这描绘了自举的 95 % 置信区间：

```
ggplot(meltdf,aes(x=Year,y=value,colour=variable,group=variable)) +
  stat_summary(fun.data = "mean_cl_boot", geom = "smooth") 
```

![ggplot 平滑引导置信度](../Images/1b91600e7579eb6586b498573b368bad.png)

这描绘了所有变量 +-1SD 的所有值的平均值：

```
ggplot(meltdf,aes(x=Year,y=value)) +
  stat_summary(fun.data ="mean_sdl", mult=1, geom = "smooth") 
```

![在此处输入图像描述](../Images/3e08b8e672596794df7c0b560a68ae26.png)

您可能想在计算变量的均值和 SD 之前计算年份均值，但我将其留给您。

但是，我相信 boostrap 置信区间会更明智，因为分布显然不是对称的。它也会更窄。;)

当然，您可以对您的值进行对数转换。

# php - 解析错误：语法错误，意外的 '$result' (T_VARIABLE)

> ID：13341057
> 
> 赞同：0
> 
> 时间：2012-11-12T09:22:16.890
> 
> 标签：php, mysql

运行以下代码时出现问题：

```
function newUser($email,$pwd,$pwd2,$firstname,$surname,$isAdmin=0){
  $email = $this->verify('Email',$email,10,40);
  $pwd = $this->verify('Password',$pwd,6,20);
  $pwd2 = $this->verify('Password',$pwd2,6,20);
  $firstname = $this->strToTitle($this->verify('Name',$firstname,2,40));
  $surname = $this->strToTitle($this->verify('Title',$surname,2,40));
  if ($pwd != $pwd2)
    return -1;
    $key=md5("secure")
  $result = $this->query("INSERT INTO user (email, pw, firstname, surname, isAdmin) VALUES (".$email.", AES_ENCRYPT(".$pwd.",".$key."), ".$firstname.", ".$surname.", ".$isAdmin.")");
  if (mysql_affected_rows()>0)
    return mysql_insert_id();
  else
    return 0;
} 
```

它总是提示“Parse error: syntax error, unexpected '$result' (T_VARIABLE) in F:\xampp\htdocs\sql.php on line 76”

任何人都可以给我一些建议？非常感谢！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T09:23:45.723

将查询结果分配给 的行缺少分号`$result`，它应该是：

```
$key = md5("secure"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T09:23:49.543

```
$key=md5("secure") 
```

导致错误。你忘记了分号。这就是为什么拥有一个带有内置 PHP 解析器的 IDE 可以节省您的时间和精力的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T09:24:21.913

之后你失踪`;`了`$key=md5("secure")`。

找出遗漏分号的最简单方法是查看发生错误的行的前一行。

# android - 插入 android 日历的事件后返回到 android 中的上一个活动

> ID：13341058
> 
> 赞同：2
> 
> 时间：2012-11-12T09:22:21.310
> 
> 标签：android, android-intent, android-activity, android-calendar

我正在向**android calendar**添加事件。插入事件后，我希望该控件从调用它的位置返回到活动，以便我可以获得该事件的详细信息。我正在使用此代码，但它有一些问题

```
 Uri uri = null;
            CalendarID = getNewEventId(getContentResolver(), uri);

            Intent intent = new Intent(Intent.ACTION_EDIT);
            intent.setType("vnd.android.cursor.item/event");
            intent.putExtra("beginTime", SelectedDate);
            intent.putExtra("allDay", false);
            intent.putExtra("rrule", "FsREQ=DAILY");
            intent.putExtra("endTime", SelectedDate + 60 * 60 * 1000);
            intent.putExtra("title", "Advance Scheduler Event");
            startActivity(intent);

            CalendarData Event_Data = EventDetails(CalendarID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:29:17.963

只需使用`startActivityForResult` 请参阅：http: [//developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:57:23.117

日历应用程序在其 Intent 处理中存在一些错误。请参阅我[关于日历的 Intents 的博客文章](http://www.grokkingandroid.com/intents-of-androids-calendar-app/)。

您应该将您的代码作为另一条评论添加到此问题：[问题 28704](http://code.google.com/p/android/issues/detail?id=28704)。不要忘记为这个问题投票（点击蓝色标题中的星号）。

# asp.net-mvc - 嵌入谷歌地图 IFRAME

> ID：13341061
> 
> 赞同：2
> 
> 时间：2012-11-12T09:22:35.523
> 
> 标签：asp.net-mvc, google-maps

我似乎无法让它工作，而我过去一直这样做，成功......

我正在尝试在网页中嵌入谷歌地图 iframe。iframe 不会加载，显示错误消息，说：

Chrome，在控制台中：拒绝显示文档，因为 X-Frame-Options 禁止显示。

IE9，页面上：此内容不能在框架中显示

我采取的步骤是：

*   在浏览器中访问谷歌地图
*   去我想嵌入的地方
*   点击链接图标
*   复制粘贴“粘贴 HTML 以嵌入网站”标签下显示的链接。

我正在使用 ASP.NET MVC4，在 IIS Express 中本地运行，但在 IIS7 中的服务器上也发生了同样的情况。

奇怪的是，当我只是创建一个本地 HTML 文件并从文件系统打开它时，我没有遇到问题。

在 jsfiddle 中粘贴代码时，它似乎确实有效。

我是否需要配置 IIS 或在我的标头中添加一些东西，或者类似的东西？

HTML 片段

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.be/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Kortrijk,+Belgium&amp;aq=0&amp;oq=kortrijk,+bel&amp;sll=50.802805,3.279785&amp;sspn=0.351067,0.617294&amp;t=h&amp;ie=UTF8&amp;hq=&amp;hnear=Kortrijk,+West+Flanders,+Vlaams+Gewest&amp;ll=50.802897,3.280106&amp;spn=0.350496,0.617294&amp;z=11&amp;iwloc=A&amp;output=embed"></iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:02:44.097

感谢我的一位同事敏锐而富有洞察力的眼光，我们发现了这个问题。

首先，它似乎只出现在比利时地图[http://maps.google.be](http://maps.google.be)（显然是afaik）上，而不是[http://maps.google.com](http://maps.google.com)上。

调用 IFRAME 内容时，google 会将 IFRAME 内容重定向到相同的 URL，但带有`?wmode=transparent`附加。

浏览器不允许多个“？” 在一个 url 中，所以它中止了这个动作。

修理：

使用与 Google 地图生成的 URL 相同的 URL，但只需附加以下内容：

```
&amp;wmode=transparent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:04:48.610

您`&amp;output=embed`在 iframe 源中肯定有 querystring 参数吗？如果您不包含它，那么 Google 将不会发送正确的 X-Frame-Options 响应标头，并且您会收到您所描述的错误。

你能显示正在渲染地图的 MVC 视图的片段吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T18:23:07.857

我无法在网络上获得任何各种建议来将谷歌地图链接嵌入到 iframe 中。

我最终使用了谷歌地图 API，通过填写以下框来生成初始代码：

[http://www.map-embed.com/](http://www.map-embed.com/)

并修改结果代码以适合我的目的。

您可以使用上面的链接为您自己的地图生成代码，然后可以选择使用我的代码，并将上述网站生成的经度和纬度复制到我的代码中。您还可以将自己的 html 插入到下面的“内容”中，而与上述网站产生的内容无关。

```
<?php

// IE won't work with percentage height and FF won't work with em units.
// Simple code here assumes if  browser isn't IE, then is FF; 
// And I don't care about other browsers.
//

$height =  "$browser" == 'ie' ? '25em' : '99%' ;

$width  =  "$browser" == 'ie' ? '99%'  : '99%' ;

echo <<<XXXEODXXX

  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"> </script>

  <div                    style="height:$height; width:$width; overflow:hidden;">

    <div id="gmap_canvas" style="height:$height; width:$width;">

    </div>

    <style>

      #gmap_canvas 

        img

        {
          max-width:none!important; 
          background:none!important
        } 

    </style>

  </div>

  <script type="text/javascript">

    google.maps.event.addDomListener               ( window, 'load', init_map );

    function init_map ()

      { var myOptions = { zoom:12, center:new google.maps.LatLng ( 41.1889495, -104.1781593 ), mapTypeId:google.maps.MapTypeId.ROADMAP };

        map           = new google.maps.Map        ( document.getElementById ( "gmap_canvas" ), myOptions );

        marker        = new google.maps.Marker     ( {map: map, position: new google.maps.LatLng( 41.1889495, -104.1781593 ) } );

        infowindow    = new google.maps.InfoWindow ( { content:"<b>Biz Name</b><br/>Biz Street Address<br/>Biz City, State Zip<br/>Biz Phone" } );

        google.maps.event.addListener              ( marker, "click", function () { infowindow.open ( map, marker ); } );

        infowindow.open                            ( map, marker );
      }

  </script>

XXXEODXXX; 
```

?>

# android - AbsoluteLayout 与 Horizo ntalScrollView 相结合。AL 的这种用法不正确吗？

> ID：13341064
> 
> 赞同：1
> 
> 时间：2012-11-12T09:22:58.127
> 
> 标签：android, layout

我有点惊讶于绝对布局已被弃用。我知道使用它不是很灵活，并且可能会导致动态屏幕布局出现问题。此外，我还找到了使用 RelativeLayout 并使用边距偏移模拟 x 和 y 的替代方案，但这似乎完全是胡说八道，因为它仍然具有固定的 x 和 y 值。

无论如何，我正在做的 ATM 正在编写一个 Gallery 替换（因为它也已被弃用），这增加了缺少的视图重用。不幸的是，我无法让 EcoGallery 表现得很好——平板电脑上的滚动功能完全关闭。

替换的 Gallery 使用 Horizo​​ntalScrollView，里面有一个 AbsoluteLayout。使用 HSV 的滚动位置和宽度，很容易计算哪些子视图在 AL 中可见（给定我正在使用的固定子宽度）。

所以 AbsoluteLayout 只有那些实际可见的子视图，它们是与滚动匹配的位置。在我看来，这是 AbsoluteLayout 的一个非常有效的用例。或者我错过了什么，这会打破吗？

# javascript - 角度指令 - 相关请求

> ID：13341067
> 
> 赞同：0
> 
> 时间：2012-11-12T09:23:03.010
> 
> 标签：javascript, angularjs, directive

我为以下小部件属性创建了一个自定义指令：

```
<div widget></div> 
```

基本上，该指令只是创建一些模板代码并将 html 放在小部件标签中。这是指令：

```
skdApp.directive("widget", function() {
  return {
    restrict: 'A',
    template: htmlTemplate,
    link: function($scope, element, attri) {
      /*
       * setup event handler and twitter bootstrap components here
       */
    }
  } 
```

htmlTemplate 是基本的 html 代码，它也使用自定义指令（例如`<seal>`标签）：

```
var htmlTemplate = '<div ng-controller="OfferCtrl">' +
                     '<div class="container">' +
                       <seal></seal>' +
                       '...'+
                     '</div>' +
                   '</div>'; 
```

在我的控制器中，我首先请求在 <div widget> 中显示一些数据。我有一个“提供”服务，它封装了从服务器请求数据的所有逻辑。我使用的方法称为 Offer.query()。

```
skdApp.controller('OfferCtrl', function OfferCtrl ($scope, Offer) {
  var o = Offer.query({id: 1}, function (response) {
    $scope.offer = response;
  });
}); 
```

在响应处理程序中，我将结果绑定到范围。我现在面临的问题是指令也请求数据，但这个请求取决于从 Offer.query() 接收到的数据。即来自 Offer.query() 的响应返回一个 ID（我们称之为 myID），这是 seal 指令请求更多数据所必需的。因此，我只是将我所有的逻辑都放在了回调 Offer.query 回调函数中。这似乎不是最好的方法。

所以我想把这部分移到`<seal>`指令的链接函数中：

```
skdApp.directive("seal", function() {

  var sealHTML = '<div>{{offer.data.foobar}}</div>';

  return {
    restrict: 'E',
    template: sealHTML,
    link: function($scope, element, attrs) {

      $scope.$watch('offer.myId', function (newValue, oldValue) {

       if (typeof newValue !== "undefined") {

         /* request more data with myId 
          * and bind the result to offer.data
          */    

       }

      });

    }
}); 
```

这种方法是“角度”兼容的还是有其他更好的方法（在结构方面）可以在角度上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:27:11.800

您可以在 child 指令中查看 offer.myId，因为 parent(widget) 和 child(seal) 共享相同的范围。默认情况下，指令不会创建新范围。

我认为您广播自定义事件以通知子指令并在需要时隔离范围以避免范围破坏。

[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope](http://docs.angularjs.org/api/ng.%24rootScope.Scope)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T03:16:21.320

我将采用这种 Reverse-Jeopardy 风格（以答案形式提出的问题）。我一直在考虑解决我最近看到的这个问题。它显然有效，但它有一些行为特征，我最初很想将其标记为“错误”。经过深入思考，我意识到这些特征**在某些非常具体的场景中**可能是可取的。

我当然不会将其作为每次遇到需要绑定异步返回的数据时使用的通用解决方案。我提出它是为了强调这样一个事实，即这种情况提出的问题有多个可能的答案。在某些情况下，可能存在真正的业务逻辑需要阻止 UI 呈现，直到服务调用返回。在其他情况下，保持 UI 活跃并响应不相关的工作可能更合适。

例如，在订单处理系统的情况下，我可能非常希望阻止客户端线程与视图元素交互，直到知道销售交易的结果。对于具有服务器端公式计算的基于 Web 的电子表格应用程序，情况并非如此。

我认为满足这种需求的异步和同步模式可以共存是一件很棒的事情。也就是说，返回一个 Promise 对象并不会强制客户端使用它，就像将返回值放在范围内会强制客户端观察它们一样。

以下演示了一种与先前探索的异步样式*同步处理此要求的方法：*`watch( )`

```
var servicesModule = servicesModule || angular.module('myModule', []);

servicesModule.factory('thingClient', 
    ['$http', '$q', function( $http, $q ) {
        return new ThingClient($http, $q);
    }]
);

function ThingClient($http, $q) {
    function callService(scopeObject) {
        var defer = $q.defer();
        var promise = defer.promise;
        $http({
            method: 'POST',
            url: 'http://at/some/url/',
            data: { x: 'y', y: 'z', z: 'x', one: 1, two: 2, three: 3},
            cache: false
        }, function(data) {
            scopeObject.data = data;
            defer.resolve(data);
        }, function() {
            scopeObject.data = null;
            defer.resolve(null)
        });

        return promise;
    }
} 
```

客户端服务.js

```
function ConsumingController( $scope, thingClient ) {
    // Be careful to use an object (so you have data wrapped such that it
    // is eligible for prototypical inheritance and call by reference without
    // passing the scope itself).  Leave the 'data' element undefined so you
    // can trigger the transition from undefined -> null in the failure case
    // and not just the on-success case. 
    $scope.dto = { data: undefined };
    var promise = thingClient.callService(scope.dto);

    // Asynchronous strategy
    $scope.$watch('offer.myId', function (newValue, oldValue) {
        if( newValue == null ) {
            // Fail!
        } else {
            // Succeed!
        }
    }

    // Synchronous strategy
    if( promise.then( 
        function(data) { 
            if( data == null ) { 
                // Fail
            } else {
                // Succeed
            }
        }
    }
} 
```

消费控制器.js

# java - 了解设备是否已移动并注册 gps 坐标

> ID：13341068
> 
> 赞同：0
> 
> 时间：2012-11-12T09:23:02.927
> 
> 标签：java, android, gps

我正在做一个应用程序，我想在互联网上查看一些信息，但我只想在设备移动*X*米时才这样做。例如，如果用户移动了 300 米，则调用服务器，如果没有，则不执行任何操作。但我认为我不能启动一项服务，一直在听 gps 坐标和计算距离，因为电池会很快耗尽。

我的问题是：Android 有什么方法可以启动服务或发送广播警告我 GPS 坐标已更改 X 米？

目前我有一个 AlarmManager，每 30 分钟获取一次 gps 坐标，但我需要更准确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:03:50.307

使用`LocationManager.requestLocationUpdates();`方法；您可以指定应发送更新的最短时间（以秒为单位），以及更新前的最小计量数。

应该看起来像这样：

> //以毫秒为单位
> private final int MINIMUM_TIME_BETWEEN_UPDATES = 5000;
> 
> //以米为单位
> private final int MINIMUM_DISTANCE_BETWEEN_UPDATES = 1;
> 
> ```
> LocationManager lManager =(LocationManager)this.getSystemService(Context.LOCATION_SERVICE); 
> LocationListener = listener = new LocationListener() {
> 
>           public void onStatusChanged(String provider, int status, Bundle extras) {           
> }
> 
>           public void onProviderEnabled(String provider) {
>           }
> 
>           public void onProviderDisabled(String provider) {
>           }
> 
>           public void onLocationChanged(Location location) {
>           }
> 
>       };
> 
> lManager.requestLocationUpdates(bestProvider, MINIMUM_TIME_BETWEEN_UPDATES, MINIMUM_DISTANCE_BETWEEN_UPDATES, listener); 
> ```

这将创建一个`LocationManager`具有指定位置提供商（GPS 或网络）、指定秒数和指定量表的数据。位置管理器将更新发送到`LocationListener。每当收到更新时都会调用 onLocationChanged。可以使用 LocationManager.getBestProvider() 找到 bestProvider 变量；和标准类。

# c++ - 如何获取列表中对象的最小值（C++）

> ID：13341072
> 
> 赞同：0
> 
> 时间：2012-11-12T09:23:21.307
> 
> 标签：c++, search, stl

我有个问题要问。

因此，我有一个名为**Node**的结构，如下所示：

```
struct Node
{
    int xKoor, yKoor;

    Node *parent;                                                                   
    char nodeId;                                                                    

    float G;
    float H;
    float F;

    Node(int x, int y, int id, Node * par)
    {
        xKoor = x;
        yKoor = y;
        nodeId = id;
        parent = 0;
    }

    Node(int x, int y, char id)                                                     
    {
        xKoor = x;
        yKoor = y;
        nodeId = id;
    }
}; 
```

我有包含此结构元素的列表：

```
list<Node*> OPEN; 
```

该列表的大小随时间而变化。

我需要做的是**找到具有最小 F 值的 Node 对象**，然后从列表中弹出该对象。

因此，我尝试编写如下所示的函数：

```
void enKucukFliNodeBul(list<Node*> OPEN)
{

    list<Node*>::iterator it = OPEN.begin();

    for(it = OPEN.begin(); it != OPEN.end(); it++)
    {
        if(it._Ptr->_Myval->F < it._Ptr->_Next->_Myval->F)
        {

        }
    }
} 
```

但我被困住了。我是 STL 的新手。我该如何解决这个问题？

我最诚挚的问候...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T09:26:25.683

您可以为此使用带有合适比较函数的[std::min_element 。](http://en.cppreference.com/w/cpp/algorithm/min_element)

```
bool nodeComp(const Node* lhs, const Node* rhs) {
  return lhs->F < rhs->F;
}

#include <algorithm> // for std::min_element

list<Node*>::iterator it = std::min_element(OPEN.begin(), OPEN.end(), nodeComp); 
```

这假设`list<Node*>`是`std::list<Node*>`，在这种情况下，您应该知道它`std::list`本身是一个链表。

其他有用的操作，根据您的意见：

从列表中删除一个最小值节点并将其删除：

```
OPEN.erase(it);
delete *it; // 
```

如果您的节点相互依赖，您可能需要执行其他操作。

对列表进行排序：

```
OPEN.sort(nodeComp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:28:12.557

使用`std::min_element`算法和重载比较函数

```
bool compareF(Node *lhs, Node *rhs) 
{
 return lhs->F < rhs->F; 
} 
```

如果您使用的是 C++03：

```
std::<Node*>::itertor ter = std::min_element(OPEN.begin(),OPEN.end(), compareF); 
```

如果您使用的是 C++11：

```
auto iter = std::min_element(OPEN.begin(),OPEN.end(), compareF); 
```

要对列表进行排序，您可以调用`OPEN.sort(compareF);`使用`compareF`函数对列表进行排序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:35:28.843

尝试添加这个：

```
bool compare_node_F(Node* n1, Node* n2)
{
  return n1-> F< n2-> F;
}

#include <list>
#include <algorithm>
#include <cstdlib>
#include <iostream>

int main()
{
  std::list<Node*> nodes;
  for(int i= 100; i--;)
  {
    Node* n= new Node(42, 42, 42);
    n-> F= i;
    nodes.push_back(n);
  }
  std::list<Node*>::iterator min_element_iter= std::min_element(nodes.begin(), nodes.end(), compare_node_F);
  std::cout<< "Min F: "<< (*min_element_iter)-> F<< '\n';
  for(std::list<Node*>::iterator d= nodes.begin(); d!= nodes.end(); ++ d)
    delete *d;
} 
```

# android - 如何在 android 中制作自定义媒体可视化工具？

> ID：13341074
> 
> 赞同：-3
> 
> 时间：2012-11-12T09:23:42.243
> 
> 标签：android, animation, media-player

> **可能重复：**
> [如何绘制Android音乐播放器的波形？](https://stackoverflow.com/questions/6317842/how-to-draw-waveform-of-androids-music-player)

现在我有麻烦了。我想制作自定义媒体播放器皮肤。就像 windows 播放器一样，可以应用许多不同的主题。我需要其中之一，比如波形。我在网上找到了，但他们只是帮助了解 simpal ui 皮肤。像上一个下一个暂停按钮。我找到了其中[一个](https://i.stack.imgur.com/wjzoa.jpg)，

**它应该是什么样子？**

![在此处输入图像描述](../Images/0e3beee020af5869b4505651ca4ea100.png)

实际上我**只需要**整个图像中的蓝色波浪皮肤。其他是可选的。

所以，请指导我如何实现这一点。是否需要动画来完成此任务？

任何指导或建议都应该不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:33:09.217

您正在寻找的不是皮肤，而是可视化 UI。查看[`Visualizer`](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)有关如何“*检索当前播放的音频的一部分以用于可视化目的*”的信息。

# java - 在嵌入式 Jetty 中部署 ear

> ID：13341075
> 
> 赞同：1
> 
> 时间：2012-11-12T09:23:44.880
> 
> 标签：java, jetty, embedded-jetty

是否可以在嵌入式 Jetty 中部署 ear（Jersey 和 Metro）存档？Google 仅显示有关 Jetty + JBoss 的文章和手册。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:05:24.043

我要补充一点，很多人部署到 JBoss 或其他完整的 Java EE 堆栈中确实不需要完整的堆栈，并且通常可以使用 servlet 引擎和少量组件。我知道有些人已经使用了诸如 jetty + open ejb 之类的聚合解决方案来实现一个轻量级堆栈，该堆栈可以满足他们的需要，而无需添加所有 Java EE 的花里胡哨。例如，如果您打算有一个嵌入式场景，那么您不需要部署一个耳朵，您可以一点一点地部署应用程序，使用码头处理 servlet，使用 openejb 或任何您喜欢的 *bean 解决方案处理 ejb。

如果您需要完整的 Java EE 容器，那么一定要使用一个……但是如果您使用的是这些 Java EE 功能的一小部分，那么还有其他方法可以组装您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T09:42:21.400

据我了解，Jetty 不应该有这样的功能。这是因为 jetty 被设计为仅用于 Servlet 和 JSP 的 Web 容器。您可以将码头视为 Tomcat Web 服务器的替代品。所以 Jetty 只能处理基于 Web 的东西（阅读 WAR）。

另一方面，JBoss 是一个成熟的 Java EE 容器，因此它也可以处理耳朵。您所看到的可能是将码头嵌入到 jboss 中。我知道 Jboss 已经在内部使用 tomcat 来处理 servlet 和 jsps，因此可以将底层实现从 tomcat 切换到 jetty。

希望这可以帮助

# macos - VLCJ 在 Mac 上不起作用 - 插件 libvlccore.5.dylib

> ID：13341080
> 
> 赞同：5
> 
> 时间：2012-11-12T09:24:02.830
> 
> 标签：macos, vlcj

我正在尝试让 VLCJ 在 Mac 和 PC 上工作。它在 Windows 7（64 位）下运行良好，但是当我尝试在我的 Mac 上运行它时它崩溃了。我指向 VLC dylib 文件的正确目录，但我收到“...在使用 libvlccore.5.dylib 插件时意外退出”消息。详情如下：

```
Process:         java [48664]
Path:            /usr/bin/java
Identifier:      com.apple.javajdk16.cmd
Version:         1.0 (1.0)
Code Type:       X86-64 (Native)
Parent Process:  java [48543]

PlugIn Path:       /Applications/VLC.app/Contents/MacOS/lib/libvlccore.5.dylib
PlugIn Identifier: libvlccore.5.dylib
PlugIn Version:    7.0.0 (compatibility 7.0.0)

Date/Time:       2012-11-09 17:42:13.389 +1300
OS Version:      Mac OS X 10.6.8 (10K549)
Report Version:  6

Interval Since Last Report:          416266 sec
Crashes Since Last Report:           2
Per-App Interval Since Last Report:  369 sec
Per-App Crashes Since Last Report:   2
Anonymous UUID:                      2E883C97-CC99-4700-90ED-BA9554F46C71

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000038
Crashed Thread:  30 
```

...

请问有人有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T15:23:57.073

I bet you are using the libraries of VLC 2.0.4\. I was experiencing the same problems and I downgraded to 2.0.3 version. It works fine now!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:43:28.690

我有同样的问题，但我检查了所有 VLC 版本：2.0.1、2.0.3、2.0.4 和 2.0.5，但它仍然无法正常工作。

你能提供我你的配置信息，让它像你一样工作吗？MAC OSX, JAVA 版, VLCj 版 & VLC 版？

你可以关注 github 上的帖子[https://github.com/caprica/vlcj/issues/138](https://github.com/caprica/vlcj/issues/138)

非常感谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T19:34:34.423

这已在 vlc 2.0.7 中修复。

它也应该在 vlc 2.1.0 中修复。

如果您检查 vlc 2.0.7 的 NEWS 文件，您将看到：

视频输出：* 修复在 3rd 方应用程序中使用 libvlc 时的崩溃（仅限 Mac）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-14T20:01:09.460

最新的 VLC 3 (Git) 发生在我身上

```
# Change dir to VLC lib
cd /Applications/VLC.app/Contents/MacOS/lib/

# Search for LC_RPATH entries
otool -l libvlc.dylib

# If not LC_RPATH entries found we can "statically" link libvlccore.dylib 
install_name_tool -change @rpath/libvlccore.dylib /Applications/VLC.app/Contents/MacOS/lib/libvlccore.dylib /Applications/VLC.app/Contents/MacOS/lib/libvlc.dylib 
```

所以现在如果我们再次使用 otool ：

```
otool -l libvlc.dylib
[...]
Load command 9
          cmd LC_LOAD_DYLIB
      cmdsize 88
         name /Applications/VLC.app/Contents/MacOS/lib/libvlccore.dylib (offset 24)
   time stamp 2 Thu Jan  1 01:00:02 1970
      current version 9.0.0
compatibility version 9.0.0
[...] 
```

将在正确的目录中搜索“libvlccore.dylib”。

这不是最好的解决方案，每次更新 VLC 时都必须重新链接它，但它确实有效！

# tinymce - 动态加载js时无法启动tiny mce

> ID：13341087
> 
> 赞同：4
> 
> 时间：2012-11-12T09:24:21.550
> 
> 标签：tinymce, initialization, init, dynamic-loading

我在使用 tinyMCE 时遇到问题，当我将 init 代码放在 之前`<script type="text/javascript" src="/scripts/tiny_mce/tiny_mce.js">`，它工作正常。初始化代码是这样的：`<head>``<textarea class="tinyMceEditor">`

```
 tinyMCE.init({
                        mode : "specific_textareas",
                        editor_selector : "tinyMceEditor",
                        plugins : "inlinepopups,advlink",
                        convert_urls : false,
                        theme : "advanced",
                        theme_advanced_buttons1 : "link,unlink",
                        width: "602",
                        height: "175",
                        theme_advanced_statusbar_location : "none"}); 
```

但是现在，我想推迟加载 tiny_mce.js，当用户第一次单击按钮时，将加载 tiny_mce.js，然后附加`<textarea class="tinyMceEditor">`到`<body>`，然后使用前面的代码执行 init，但这时间，它不会启动 tinyMCE 编辑器，它只会显示`<textarea class="tinyMceEditor">`

google了一下，没找到相关的，有谁遇到过这个问题？

任何建议将不胜感激。

我查看了 chrome web 开发人员工具，发现如果我动态加载 tinymce.js，其他需要的 js，如 en.js、editor_template.js、editor_plugin.js 等将不会被加载。即使我将这些 js 文件添加到动态加载，tinymce 仍然无法启动。

* * *

感谢您的帮助，我在 firebug 中观看了，我确实在 append `<textarea`to之前加载了 tinymce.js `<body>`，然后我追加`<textarea>`了 tinymce `init()`，我正在使用 LazyLoad（jQuery 插件）动态加载 js 文件。

这就是我所做的

```
if(typeof TinyMCE == "undefined"){
    //dynamically load the tinymce.js
    LazyLoad(['tinymce.js'],function(){
        //callback function, called after tinymce is loaded
        $('body').append('<textarea class="TinyMceEditor"/>');
        tinyMCE.init({init settings});
    });
} 
```

如果我不动态加载tinymce.js，只需在其中添加一个`<script>`标签`<head>`，即可启动tinymce，但是当我动态加载tinymce.js时，它不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-13T13:25:42.707

经过一天的工作，终于找到了解决办法，就放

```
 window.tinymce.dom.Event.domLoaded = true; 
```

前

```
 tinymce.init(); 
```

然后可以正确启动tinymce。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-19T07:48:52.163

我通过创建一个单独的咖啡脚本文件解决了这个问题。然后我在下面声明了具有窗口范围的函数以在视图中访问。

```
window.initialize_tiny_mce = () ->
  if (typeof tinymce != 'undefined' && tinymce != null)
    tinymce.remove();

  tinymce.init
    height: '180'
    menubar: false
    statusbar: false
    cleanup: true
    selector: '.new-tinymce-printable-html'
    plugins: [ 'autolink link image code lists advlist' ]
    toolbar: 'styleselect | bold underline italic | bullist numlist outdent indent | link image | code'
    browser_spellcheck: true
    setup: (editor) ->
      editor.on 'keyup', ->
        tinymce.triggerSave()
      editor.on 'change', ->
        console.log editor.getContent()
        return
      return 
```

然后在部分视图中，我调用了这个函数：

```
:coffeescript
  initialize_tiny_mce() 
```

现在动态创建的元素被分配了一个 tinymce 编辑器。

# html - HTML5标签类型="时间"

> ID：13341088
> 
> 赞同：0
> 
> 时间：2012-11-12T09:24:25.063
> 
> 标签：html

我使用这样的html5输入标签：

```
<input type="time" name="usr_time" value="19:47:13"> 
```

但是当我提交时它是无效的值。此外，我无法更改该框中的第二个，它已禁用。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T09:29:45.907

尝试设置 step 属性。如果不够详细，也可以使用浮点值。

```
<input type="time" step="1" /> 
```

[http://www.w3.org/TR/html-markup/input.time.html](http://www.w3.org/TR/html-markup/input.time.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T06:45:57.430

```
<input type="time" name="usr_time" value="19:47:AM/PM"> 
```

在这里，`value="1:47:AM"`您不能更改 seconds ，它是 12 小时格式，如果我们如上所述添加 step=1 then `value="1:47:55:AM"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T02:30:29.610

由于这仅（目前）在 MS Edge 和 Chrome 中受支持，因此我编写了一个小型组件 - [Timepicker](https://github.com/jonataswalker/timepicker.js) - 您可以轻松地将其用于主要浏览器。

用法是这样的：

```
var timepicker = new TimePicker('time', {
  lang: 'en',
  theme: 'dark'
});

var input = document.getElementById('time');

timepicker.on('change', function(evt) {

  var value = (evt.hour || '00') + ':' + (evt.minute || '00');
  evt.element.value = value;

});
```

```
body {
  font: 1.2em/1.3 sans-serif;
  color: #222;
  font-weight: 400;
  padding: 5px;
  margin: 0;
  background: linear-gradient(#efefef, #999) fixed;
}
input {
  padding: 5px 0;
  font-size: 1.5em;
  font-family: inherit;
  width: 100px;
}
```

```
<script src="http://cdn.jsdelivr.net/timepicker.js/latest/timepicker.min.js"></script>
<link href="http://cdn.jsdelivr.net/timepicker.js/latest/timepicker.min.css" rel="stylesheet"/>

<div>
  <input type="text" id="time" placeholder="Time">
</div>
```

# java - Netbeans：为多个开发环境设置 VM 选项？

> ID：13341090
> 
> 赞同：0
> 
> 时间：2012-11-12T09:24:33.797
> 
> 标签：java, netbeans, build, netbeans-7

[在这里查看](http://lwjgl.org/installation.php)LWJGL 安装。

我必须更改 VM 选项行（在 Project Properties->Run 下）以在 Mac 下运行，即使我继续在 Windows 上并行开发。

这真的很乏味，因为我不想每次切换时都必须改变路径——这将一直如此。

关于我如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:58:37.853

您可以创建两组配置：在项目属性 > 运行 > 新配置中。

使用各自的 VM 选项创建 2 个配置（例如“Win”和“Mac”）。

然后，您可以通过右键单击 Project > Set Configuration > Win / Mac 从一个切换到另一个。

# oracle - 有限长度数据类型的利润

> ID：13341093
> 
> 赞同：1
> 
> 时间：2012-11-12T09:24:45.000
> 
> 标签：oracle, ddl

如果事先知道数据长度限制，那么在声明表时限制数据类型是否有任何好处？

```
create table "user"."table" (
    ...
    "is_there_any_profit" number (1, 0)
) 
```

对比

```
create table "user"."table" (
    ...
    "is_there_any_profit" number
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:39:55.327

从技术上讲不是，所有数字都以相同的方式存储（尾数+指数）。利润在于业务逻辑规则的实现。如果您希望将整数存储到数据库中，最好通过设置正确的数据类型（例如 NUMBER(10,0)）来强制执行此操作。您声明，其他值无效。

# asp.net-mvc - 使用 Ninject 和 MVC 对服务层的依赖

> ID：13341094
> 
> 赞同：3
> 
> 时间：2012-11-12T09:24:55.127
> 
> 标签：asp.net-mvc, dependency-injection, ninject

我在尝试使用 Ninject 的使用 MVC 的沼泽标准三层项目时遇到问题。我有一个 MemberRepository：

```
public class MemberRepository : IMemberRepository{
     public bool Save(Member member){
          //saves member
     }
} 
```

然后我有我的服务层：

```
public class MemberService : IMemberService{
     public bool Register(string email){
        //Do Stuff & Populate Member Object
        _repo.Save(member);
     }
} 
```

鉴于我将使用 Ninject，我设置 AccountController 的最佳方式是什么。我是否应该像这样将 MemberService 传递给构造函数：

```
public class AccountController : Controller
{
    IMemberService _memberService;

    public AccountController(IMemberService memberService)
    {
        _memberService = memberService;
    }
} 
```

或者传入存储库：

```
public class AccountController : Controller
{
    IMemberService _memberService;

    public AccountController(IMemberRepository memberRepo)
    {
        _memberService = new MemberService(memberRepo);
    }
} 
```

或两者？

我最初只有一个存储库（没有服务层），但我必须实现一个服务层，我不确定在我的 NinjectWebCommon.cs 文件中注册内核时如何处理“依赖关系”。最初只是这样：

```
 kernel.Bind<IMemberRepository>().To<SqlMemberRepository>(); 
```

但现在我想知道是否需要注册 IMemberService 并将 repo 作为某种参数。

:s 感觉有点失落。希望我说得通，有人可以帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T13:37:02.063

I've never used Ninject, I've been using Unity, but the same principles exist so hopefully this might help.

The service layer is the thing that is exposed to the controller - the controller needs to know nothing about the underlying repository. The flow is as follows, and each layer doesn't know about the layers above it:

Controller -> Service > Repository

So I would go with option 1, and then inject the repository into the constructor of the service.

```
public class MemberService : IMemberService {
     private readonly IMemberRepository _repo;

     [Inject]
     public MemberService (IMemberRepository repo){
        this._repo = repo;
     }

     public bool Register(string email){
        //Do Stuff & Populate Member Object
        _repo.Save(member);
     }
} 
```

and

```
public class AccountController : Controller
{
    private readonly IMemberService _memberService;

    [Inject]
    public AccountController(IMemberService memberService)
    {
        _memberService = memberService;
    }
} 
```

That example obviously uses constructor injection but you can use property/field injection if you want instead. When you register your dependencies, you'll have to register both:

```
kernel.Bind<IMemberRepository>().To<SqlMemberRepository>();
kernel.Bind<IMemberService>().To<MemberService>(); 
```

# javascript - 如何获取innerHTML 的id 值？

> ID：13341095
> 
> 赞同：0
> 
> 时间：2012-11-12T09:24:57.497
> 
> 标签：javascript, html, javascript-events

我创建了一个这样的html。

```
<body onload = callAlert();loaded()>
<ul id="thelist">
<div id = "lst"></div>          
</ul>
</div>
</body> 
```

callAlert() 在这里：

```
function callAlert()
    {
        listRows = prompt("how many list row you want??");
        var listText = "List Number";
                for(var i = 0;i < listRows; i++)
                {
                    if(i%2==0)
                    {
                        listText = listText +i+'<p style="background-color:#EEEEEE" id = "listNum' + i + '" onclick = itemclicked(id)>';
                    }                   
                    else
                    {
                        listText = listText + i+ '<p  id = "listNum' + i + '" onclick = itemclicked(id)>';
                    }                                   
                    listText = listText + i;

                    //document.getElementById("lst").innerHTML = listText+i+'5';
                }
                document.getElementById("lst").innerHTML = listText+i;
    } 
```

**在 callAlert() 内部，**我在`<p>`标签内创建了 id 运行时，最后在 for 循环中，我设置了这样的段落。`document.getElementById("lst").innerHTML = listText+i;`

现在我在单击 listItem 时感到困惑，然后如何访问所选项目的值。

**我正在使用这个：**

```
function itemclicked(id)
    {
        alert("clicked at :"+id);
        var pElement = document.getElementById(id).value;
        alert("value of this is: "+pElement);
    } 
```

但是获得价值为**undefined**。任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:33:04.370

尝试`onclick = itemclicked(this.id)`代替`onclick = 'itemclicked(id)'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:31:17.900

您可以像这样只传递 var`i`并搜索 id：

你的 p 构造函数是动态的，只传递`i`

```
<p  id = "listNum' + i + '" onclick = itemclicked(' + i + ')> 
```

功能

```
function itemclicked(id)
    {
        id='listNum'+i;
        alert("clicked at :"+id);
        var pElement = document.getElementById(id).value;
        alert("value of this is: "+pElement);
    } 
```

是你想要的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:55:07.427

我不确定，但 onclick 函数不应该像这样用双引号括起来：

你有这个

```
onclick = itemclicked(id)>' 
```

应该是这个

```
onclick = "itemclicked(id)">' 
```

您必须修改 itemclicked 函数以检索 p 元素的“值”。

```
function itemclicked( id ) {

    alert( "clicked at :" + id );
    var el = document.getElementById( id );

    // depending on the browser one of these will work
    var pElement = el.contentText || el.innerText; 

    alert( "value of this is: " + pElement );
} 
```

演示[在这里](http://jsbin.com/owakeq/3/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T13:22:07.497

伙计，你真的应该在你的 CodingStyle 上工作。此外，编写简单、干净的代码。

首先，html 代码应该看起来像这样：

```
 <body onload="callAlert();loaded();">
        <ul id="thelist"></ul>
    </body> 
```

没有 div 或类似的东西。`ul`并且只能`ol`与 结合使用`li`。此外，您应该始终以正确的顺序关闭 html-tags。否则，就像在您的示例中一样，您有不同的开始标签和结束标签。（在您的 html-example 的第 5 行的结尾`div`不是指打开的 div-tag）...

这是固定代码：

```
 <script type="text/javascript">
         function callAlert() {
            var rows = prompt('Please type in the number of required rows');
            var listCode = '';
            for (var i = 0; i < rows; i++) {
                var listID = 'list_' + i.toString();
                if (i % 2 === 0) {
                    listCode += '<li style="background-color:#EEEEEE" id="' + listID + '" onclick="itemClicked(this.id);">listItem# ' + i + '</li>';
                }
                else {
                    listCode += '<li id="' + listID + '" onclick="itemClicked(this.id);">listItem# ' + i + '</li>';
                }
            }
            document.getElementById('thelist').innerHTML = listCode;
        }

        function itemClicked(id) {
            var pElement = document.getElementById(id).innerHTML;
            alert("Clicked: " + id + '\nValue: ' + pElement);
        }
    </script> 
```

[您可以在这个fiddle](http://jsfiddle.net/CwYq7/20/)中观看一个工作示例。

问题是：

1.  您必须使用`this.id`已经提到的@Varada 提交单击项目的 id。
2.  在此之前，您必须构建一个有效的 id，使用以下方法将数字解析为字符串`.toString()`
3.  你确实写了一些乱七八糟的代码。应该产生的不是一个列表，而是`div`包装在一个`ul`-tag 中的各种 -containers。天啊。

顺便说一句：永远不要检查某事是否。正在`0`使用`==`- 运算符。最好始终使用`===`- 运算符。[在此处](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)阅读有关问题的信息

BTW++：我不知道`value`你想在你的`itemClicked()`-function 中阅读什么。我没有测试它是否会读取`innerHTML`但通常，您只能从之前写入信息的位置读取信息。在这个示例中，`value`我猜应该是空的..

希望我没有忘记任何事情。如您所见，该代码现在可以使用。如果您还有其他问题，请尽管提问。

干杯!

# jquery - jQuery：加载和使用大型 XML 文件的最快方法

> ID：13341098
> 
> 赞同：2
> 
> 时间：2012-11-12T09:25:00.430
> 
> 标签：jquery, html, xml, json, jquery-xml

我有一个相当大的 XML 文件（大约 5MB），需要用 jQuery 加载它。之后，我想在我的 html 文件中查询和显示一些数据（我正在考虑一种类似的方式来做到这一点，因为 .NET/C# 提供了它）。

加载这么大文件的最快方法是什么？

将 xml 文件转换为 json 对象（使用[此](http://www.fyneworks.com/jquery/xml-to-json/)插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:31:55.217

1.  使用 JSON 而不是 XML
2.  如果要加载树，可以利用“延迟加载”原则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:27:55.260

最快的方法是在开始处理之前*不*加载整个文件；按需打开文件，以便出于所有实际目的，它已准备好供用户使用，然后分批加载，要么缓冲，因此无论如何都会及时加载，或者根据需要，无论如何都会加载使用.

# r - 为什么在未指定 TZ 的情况下，从数据框创建 xts 对象时，xts 会将日期向后移动？

> ID：13341104
> 
> 赞同：3
> 
> 时间：2012-11-12T09:25:13.047
> 
> 标签：r, xts

首先让我说我看了看`?xts`，意识到这是一个与时区相关的问题，并且似乎已经解决了它，但我不明白*为什么*会这样。所以：我有一个简单的价格数据数据框。当我将其转换为`xts`对象时，对象的第一个日期`xts`比数据框中的第一个日期早一天。如果我指定时区，日期匹配问题就会消失。起初我认为这可能是因为`xts()`假设`order.by`没有指定 TZ 的日期是 UMT，并`Sys.timezone()`为我提供了“JST”，但我不明白为什么这会导致日期提前一整天......？

**问：为什么会这样？**

```
require(xts)
aa <- structure(list(Date = structure(c(6822, 6823, 6824, 6825, 6826,
6829), class = "Date"), Open = c(2145, 2126, 2130, 2148, 2144,
2137), High = c(2148, 2131, 2141, 2152, 2146, 2151), Low = c(2124,
2111, 2128, 2140, 2135, 2136), Close = c(2124, 2120, 2141, 2140,
2140, 2149), Volume = c(0L, 0L, 0L, 0L, 0L, 0L)), .Names = c("Date",
"Open", "High", "Low", "Close", "Volume"), row.names = c(NA,
6L), class = "data.frame")

str(aa)
aa

bb <- xts(aa[5], order.by = aa$Date)
str(bb)
bb ## first date is a day earlier than the first day of the data frame

bb <- xts(aa[5], order.by = aa$Date, tzone = Sys.getenv("TZ"))
str(bb)
bb ## first dates in xts object and data frame match... 
```

这是在：

```
sessionInfo():
R version 2.15.1 (2012-06-22)

Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252
[2] LC_CTYPE=English_United Kingdom.1252   
[3] LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C                           
[5] LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
 [1] gridExtra_0.9.1 scales_0.2.2    plyr_1.7.1      ggplot2_0.9.2.1
 [5] lubridate_1.2.0 quantmod_0.3-17 TTR_0.21-1      xts_0.8-8      
 [9] zoo_1.7-9       Defaults_1.1-1 

loaded via a namespace (and not attached):
 [1] colorspace_1.2-0   dichromat_1.2-4    digest_0.5.2       gtable_0.1.1      
 [5] labeling_0.1       lattice_0.20-10    MASS_7.3-22        memoise_0.1       
 [9] munsell_0.4        proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1    
[13] stringr_0.6.1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T16:10:04.847

我不知道，我无法完全重现您的问题，但我相信这与`Date`s 被强制返回`POSIXct`和返回有关。

这一行在`xts`函数的代码中：

```
if (inherits(order.by, "Date") && !missing(tzone)) 
    order.by <- .POSIXct(unclass(order.by) * 86400, tz = tzone) 
```

在您的第一次通话中，`tzone`缺少，因此不会执行此代码。在您的第二次调用中，`tzone`is not `missing`，因此它被执行。

如果您单步执行 xts.R 中的代码，您会看到（如果`tzone`是 `missing`）`Dates`in`aa$Date`被强制转换为`POSIXct`.

```
index <- as.numeric(as.POSIXct(order.by)) 
```

* * *

我认为问题在于它`as.Date.POSIXct`的默认值为`tz="UTC"`, 因此除非您指定不同的，否则会使用它。

```
x <- structure(1290125760, 
               tzone = structure("America/Chicago", .Names = "TZ"), 
               tclass = c("POSIXt", "POSIXct"), 
               class = c("POSIXct", "POSIXt"))
x
#[1] "2010-11-18 18:16:00 CST"
str(x)
#POSIXct[1:1], format: "2010-11-18 18:16:00"
as.Date(x)
#[1] "2010-11-19"
as.Date(x, origin=as.Date("1970-01-01"), tz="America/Chicago")
#[1] "2010-11-18" 
```

# linux - 在 bash 中仅获取 uname -r 的一部分

> ID：13341109
> 
> 赞同：2
> 
> 时间：2012-11-12T09:25:26.717
> 
> 标签：linux, bash, ubuntu, uname

我只需要在 bash 中获取“uname -r”命令的前两个数字

常规输出示例：

```
uname -r
3.5.0-18-generic 
```

我期望使用魔术 bash 选项：

```
3.5 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T09:28:59.330

假设您想要第二个点之前的所有内容，这将满足您的需求：

```
uname -r | cut -d. -f1-2 
```

uname 本身不支持削减输出，afaik。贯穿切口的管道将显示字段 1 和 2 ( )，由点 ( )`-f1-2`分隔`-d.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T09:28:46.847

```
uname -r | sed 's/\([0-9]\+\.[0-9]\+\)\..*/\1/' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T09:38:33.327

您还可以通过参数扩展来完成此操作：

```
$ r="$(uname -r)"
$ echo ${r%.*}
3.5 
```

`${VAR%pat}`非贪婪地`pat`从`VAR`. 请注意，这`pat`是一个 glob 模式，即 dot 仅表示“点”，star 表示“任意数量的字符”。

# cuda - Cuda C中的加法赋值运算符

> ID：13341110
> 
> 赞同：4
> 
> 时间：2012-11-12T09:25:30.803
> 
> 标签：cuda, gpgpu, gpu, pycuda

我在 Cuda C 中遇到了加法赋值运算符的问题。我收到以下错误：

```
kernel.cu(5): error: expression must have integral or enum type 
```

我的代码是：

```
import pycuda.driver as drv
import pycuda.autoinit
from pycuda.compiler import SourceModule
import numpy as np

mod=SourceModule("""
__global__ void addition(float* a,float* b,float*c){
int i=threadIdx.x + blockIdx.x * blockDim.x;
c[a[i]]+=b[i];
}
""")

addition=mod.get_function("addition")
a=np.array([1,2,3,1,2,3,2,1]).astype(np.float32)
b=np.array([0.1,0.2,0.1,0.5,0.1,0.2,0.1,0.5]).astype(np.float32)
c=np.zeros_like(a)
addition(drv.Out(c),drv.In(a),drv.In(b),block=(32,1,1))
print c 
```

我想要的输出是 c = [0,1.1,0.4,0.3,0,0,0,0]。任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:30:49.260

问题出在您的内核中，您使用 A 在 C 中进行索引
。A 是浮点类型。

另请注意，您正在启动 32 个线程，但您只会索引 8 个位置，这意味着您将索引超出范围。

您将面临的最后一个问题是，由于 a 中的索引重复，多个线程试图更改 C 中的相同位置。解决它的一种方法是使用 AtomicAdd。

`__global__ void addition(float* a,float* b,float*c, int n)
{
int i=threadIdx.x + blockIdx.x * blockDim.x;
if(i < n)
atomicAdd(&c[(int)a[i]],b[i]);
}`

以相同的方式启动内核，但不要忘记传递 a 或 b 的大小的 n。
您还可以在启动内核时消除 n 并更改线程块尺寸。

# unix - Unix命令更改目录名称

> ID：13341114
> 
> 赞同：0
> 
> 时间：2012-11-12T09:25:37.837
> 
> 标签：unix

嗨，这是一个简单的问题，但目前我还没有找到解决方案..

我可以找到要更改名称的文件夹名称，并且我知道更改文件夹名称的命令是`mv`

所以从当前目录如果我去

```
ls ~/relevant.directory.containing.directory.name.i.want.to.change 
```

我得到的目录名称叫做say`lorem-ipsum-v1-3`

但是目录名称将来可能会更改，但它是目录中唯一的目录：~/relevant.directory. contains.directory.name.i.want.to.change

如何以编程方式将其更改为特定名称，例如`correct-files`

我可以通过做类似的事情来正常做

```
 mv lorem-ipsum-v1-3 correct-files 
```

但我想开始自动化这个，这样我就不需要继续复制和粘贴目录名......

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:43:45.670

就像是：

```
find  . -depth -maxdepth 1 -type d | head -n 1 | xargs -I '{}' mv '{}' correct-files 
```

只要只移动一个目录，就应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:36:27.420

如果您绝对确定`relevant.directory.containing.directory.name.i.want.to.change`只包含要重命名的目录，那么您可以简单地使用通配符：

```
mv ~/relevant.directory.containing.directory.name.i.want.to.change/*/ ~/relevant.directory.containing.directory.name.i.want.to.change/correct-files 
```

这也可以进一步简化，使用 bash 大括号扩展，以：

```
mv ~/relevant.directory.containing.directory.name.i.want.to.change/{*/,correct-files} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:37:10.973

```
cd ~/relevant.directory.containing.directory.name.i.want.to.change 
find . -type d -print | while read a ;
do
  mv $a correct-files ;
done 
```

注意事项：

*   无错误处理
*   可能有一种将参数反转为 mv 的方法，因此您可以使用 xargs 而不是 while 循环，但这不是标准的（据我所知）
*   未参数化
*   如果有任何子目录，它将不起作用。find 命令上的深度参数（同样，AFAIK）不是标准的。它们在 GNU 版本上确实存在，但在 Solaris 上似乎没有
*   应该是别人...

# java - 在java中格式化

> ID：13341115
> 
> 赞同：2
> 
> 时间：2012-11-12T09:25:48.633
> 
> 标签：java, formatting

再会。

我需要在java中格式化一个数字。到目前为止，我有这个：

```
DecimalFormat df2 = new DecimalFormat( "#,###,###,##0.00" );
System.out.println(new Double(df2.format(balance)).doubleValue()); 
```

但它打印出这个

```
110.0
121.0
133.1
146.41
161.05 
```

但我需要它在小数部分有两位数。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:32:13.400

您不必从格式化字符串中获取双精度值。只需使用从`format()`方法返回的格式化字符串`DecimalFormat`。因此，您的代码应如下所示：

```
DecimalFormat df2 = new DecimalFormat( "#,###,###,##0.00" );
...
System.out.println(df2.format(balance)); 
```

您的原始代码：

```
System.out.println(new Double(df2.format(balance)).doubleValue()); 
```

您在代码中所做的是：将双精度值格式化为字符串（按照您在`DecimalFormat`实例中指定的格式）。然后将格式化字符串转换为`Double`实例并从对象中获取双精度值，即双精度值。然后将其打印到控制台。所以格式化的字符串消失了，双精度值正常打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:31:13.647

“但我需要它的小数部分有两位数。我该怎么做？”

```
DecimalFormat df2 = new DecimalFormat( );
df2.setMinimumFractionDigits(2);
df2.setMaximumFractionDigits(2);

System.out.println(df2.format(balance)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:31:19.927

您也可以使用以下`setMinimumFractionDigits`方法`DecimalFormat`

```
df2.setMinimumFractionDigits(2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:36:35.523

您的十进制格式是正确的，但是在打印出来之前您正在做的是`new Double(df2.format(balance))`创建新的双倍瞬间，这会忽略您的格式。

所以如果你想显示或记录你的价值 `df2.format(balance)`，这应该足够了

IE：

```
System.out.println(df2.format(balance)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T09:28:19.440

试试这个模式进行格式化`#,###,###,##.##`-

```
DecimalFormat df2 = new DecimalFormat( "#,###,###,##.##" );
System.out.println(df2.format(balance)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T09:30:59.837

这应该足够了：

```
DecimalFormat df2 = new DecimalFormat("#,##0.00");
System.out.println(df2.format(balance)); 
```

分隔符的分组将遵循“最后一个与整数末尾之间的间隔”。因此，过度指定没有任何好处。文档中的示例[`DecimalFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)：

> 分组分隔符通常用于千位，但在某些国家/地区，它分隔万位。分组大小是分组字符之间的恒定位数，例如 3 表示 100,000,000 或 4 表示 1,0000,0000。如果您提供具有多个分组字符的模式，则最后一个和整数末尾之间的间隔就是所使用的间隔。所以`"#,##,###,####" == "######,####" == "##,####,####"`。

另一件事是该`.format()`方法已经输出了一个字符串，因此将其转换为`double`. `balance`超过1000（分隔符生效，`Double`类无法解析带分隔符的字符串）时会引发异常。

# vba - VBA texttocolumns 忽略一列

> ID：13341119
> 
> 赞同：0
> 
> 时间：2012-11-12T09:26:08.073
> 
> 标签：vba, excel, excel-2010

我有以前导入 Excel 的数据，并希望将这些数据自动放入正确的格式。

现在我的日期看起来像这样： 28122012 应该是 28.12.2012 我的代码，我把我在网上找到的一些资源放在一起，效果很好，除了一个障碍......它忽略了第 V 列：

```
 Dim rngS As Range
    For Each rngS In .Range("F:F,U:W").Columns
        rngS.TextToColumns Destination:=rngS.Cells(1, 1),  _ 
DataType:=xlFixedWidth, FieldInfo:=Array(0, 4)
    Next 
```

我不确定它为什么这样做。我已经尝试写出每一列，但不行。V 列保持原样，而它周围的所有内容都已正确格式化。

任何想法为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:37:33.480

The problem is the field it pastes to is treating the value as numerical.

The only real remedy is to set the type to Text for that and other columns that might have such a date value. Then 01122012 will not lose its starting zero.

Alternatively you could let your follow up code or formula anticipate the missing zeroes and work back to date values using `LEFT()`, `RIGHT()` and like functions.

# c - 当数组在其他文件中并且函数在其他文件中时，查找整数或浮点数组的大小？

> ID：13341120
> 
> 赞同：1
> 
> 时间：2012-11-12T09:26:08.073
> 
> 标签：c, arrays

> **可能重复：**
> [如何找到 sizeof（指向数组的指针）](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

我知道这是为了找到数组的大小=`sizeof(arr)/sizeof(arr[0])`

但我必须实现以下（这只是一个演示）：

演示.h

```
#ifndef __DEMO_H
#define __DEMO_H
void heap_sort(int *);
#endif 
```

演示.c

```
void heap_sort(int *ptrA)
{
//implementing heap sort 
But here it requires length of array 
} 
```

主程序

```
#include "demo.h"
int main(void)
{
 int A[10];
 heap_sort(A)
 return 0;
} 
```

仅供参考..这只是一个演示..但在这里我必须在其他一些场景中实现它，其中存在“不要更改头文件中的任何内容”的限制，这意味着我无法更改函数签名。那么如何在 For char 中获取数组长度很`demo.c`容易`strlen()`得到`int``float` `double`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:30:06.093

我看到的唯一选择是：

*   使用特殊值作为终止符（就像`strlen`那样）。
*   使用 Pascal 技巧，并将数组长度放在第一个元素中。
*   将数组大小存储在全局外部变量中。
*   使用单独的功能。

例如：

```
int arraySize(int newSize)
{
    static int arraySize = 0;
    int oldSize;
    oldSize = arraySize;
    if (newSize)
        arraySize = newSize;
    return oldSize;
} 
```

在`main.c`：

```
 arraySize(10); 
```

在`demo.c`：

```
 arraylen = arraySize(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:28:22.190

如果您不能更改函数签名，那么也许您可以在第一个元素中传递数组的大小。

```
A[0] = 10;
heap_sort(A); 
```

或者用一些特殊值标记数组的末尾，但我不喜欢这个，因为你必须迭代整个数组才能找到长度，并且你需要确保数组中没有使用这个值：

```
A[LENGTH-1] = END//some value;

void array_length(A) {
    while (*A++ != END) {
          length++;
    }
} 
```

这只是您施加的限制的解决方案，我*通常会*做的是将数组的大小作为第二个参数传递，或者将 a`struct`用于数组：

```
struct array_t {
    int *data; //allocate this
    int size;
}; 
```

注意：其他可怕的解决方案包括全局变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:31:52.967

思考的`strlen()`方向是正确的。

字符串是具有`'\0'`as 数组终止符的字符数组，作为最后一个元素。

您可以对任何其他类型的数组采用相同的方法。

只需将一个值定义为指示数组中最后一个元素的值。搜索此值可帮助您找到数组的大小。

* * *

**更新：**

我喜欢*mux*使用数组中第一个元素的想法。

无论如何，使用它来存储其中的元素数量可能会导致问题，以防数组中的元素数量大于可以存储在数组元素中的数量（`char`例如，一个数组，然后限制为 255 个元素）。

另一方面，我的方法有一个缺点，即用作数组终止符的值不能用作 arra 本身的实际值。

结合前一种和后一种方法，我建议使用数组的第一个元素来存储用作数组终止符的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:39:12.267

约束似乎有点奇怪，但无论如何。

为什么不使用全局变量来存储大小。

# ios - 使用 dpkg 构建我自己的包时，应用程序无法在后台运行

> ID：13341122
> 
> 赞同：0
> 
> 时间：2012-11-12T09:26:11.597
> 
> 标签：ios, background, debian, dpkg

我使用 iOSOpenDev 编写了一个越狱应用程序，它可以在计时器触发时在后台播放音频。

当我使用 iOSOpenDev 构建一个 .deb 包时，将其 scp 到我的 iphone 并使用 iFile 安装它，它工作正常。但是当我将 .app 提取到 fold `~/temp`，控制文件到`~/temp/DEBIAN/`，使用 command 构建一个 .deb 包`dpkg-deb -b ~/temp ~/myapp.deb`时，安装并运行它。在我把它带回前台之前，它不会在后台播放音乐。

构建软件包时我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:58:48.313

无需使用 scp 和 iFile。

使用[iOSOpenDev](http://iOSOpenDev.com)的命令行工具`iosod`，有一些命令可以执行您正在尝试执行的操作：

`iosod build`：构建一个 Debian 软件包（不需要 dpkg）。

`iosod install`：在 iDevice 上安装 Debian 软件包。

甚至还有从 iDevice ( `iosod remove`, `iosod purge`) 中删除和清除软件包的命令。要查看提供的所有命令，请在终端类型`iosod`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:17:28.853

我不仅要在构建包时使用终端，而且要提取文件，这样我们就可以避免Finder添加一些我们不需要的文件，例如.DS_Store。

# c# - 高级安装程序损坏的注册表路径

> ID：13341134
> 
> 赞同：3
> 
> 时间：2012-11-12T09:27:04.103
> 
> 标签：c#, class, installation, advanced-installer

[高级安装程序](http://www.advancedinstaller.com)版本 (8.9) 我开发了一个简单的 .Net 安装程序类。它的特点是提供了一个特定的用户界面，基于 *ini 文件。据我所知，高级安装程序不支持这样的事情。如果我错了，请纠正我！但这不是我问题的重点。根据用户的选择，我的安装程序类会在注册表中合并一个特定的 *.reg 文件。这是我用于该目标的代码：

```
Process proc = new System.Diagnostics.Process();
proc.EnableRaisingEvents=false;
proc.StartInfo.FileName="regedit.exe";
proc.StartInfo.Arguments = " \"" + regFilePath + "\"";
proc.StartInfo.UseShellExecute = true;
proc.Start(); 
```

因此，如果我有一个 sample.reg 文件排序

```
Windows Registry Editor Version 5.00
[HKEY_CURRENT_USER\Software\NIKOLETA]
... 
```

**当我在Windows 安装程序**（内置于 VS）中导入我的安装程序类时- sample.reg 被很好地合并并且 NIKOLETA 密钥出现在**HKEY_CURRENT_USER\SOFTWARE**下。不幸的是，当在**Advanced Installer**下导入安装程序类时- sample.reg 再次合并，但不在所需位置，但 NIKOLETA 键出现在**HKEY_USERS.DEFAULT\SOFTWARE**下。我被告知 Advanced Installer 的 HKEY_USERS 的默认路径是 HKEY_USERS.DEFAULT\Software[Manufacturer][ProductName]。但是它如何以及为什么会影响 .Net 安装程序类？我该如何解决这个问题，以便正确合并我的 *.reg 文件？谢谢你的期待！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:45:20.650

HKEY_USERS.DEFAULT 它实际上是本地系统帐户的配置文件，因此如果您的自定义操作设置为延迟运行且没有模拟，则可以将注册表项重定向到那里，这意味着它设置为在具有完全管理员权限的 SYSTEM 帐户下运行.

此外，如果您只想根据条件创建某个注册表项，您可以从注册表页面创建条目，并从组织页面为其组件设置安装条件。

# asp.net - MS SQL 2008 R2 SSAS & ASP.Net 与 Windows 集成验证

> ID：13341137
> 
> 赞同：1
> 
> 时间：2012-11-12T09:27:21.937
> 
> 标签：asp.net, sql-server-2008, iis-7, ssas

我的要求是开发一个允许用户访问 SSAS 多维数据集进行数据分析的 ASP.Net 站点。这些用户属于域（MS Active Directory）。AD 位于总部，我无法访问它。我们也不能要求对 AD 的设置进行任何更改，因为它处理多个公司……等等。

我也在我的站点和模拟上激活了 Windows 身份验证。问题是，与 SSAS 的连接始终是使用此特定网站的应用程序池中提到的用户 ID 创建的。当用户连接到此网站时，需要使用针对 AD 验证的 uid 进行连接。

谢谢和最好的问候克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:43:52.933

如果您的方案如 Bill 所指出的那样（听起来确实如此），那么避免双跳的唯一方法就是按照他的建议，将 IIS 和 SSAS 放在同一台服务器上。

如果确实需要将 IIS 和 SSAS 保留在不同的服务器上，建议阅读以下文章：

为 Microsoft SharePoint 2010 产品配置 Kerberos 身份验证 [http://sqlcat.com/sqlcat/b/whitepapers/archive/2010/07/22/configuring-kerberos-authentication-for-microsoft-sharepoint-2010-products.aspx](http://sqlcat.com/sqlcat/b/whitepapers/archive/2010/07/22/configuring-kerberos-authentication-for-microsoft-sharepoint-2010-products.aspx)

如何配置 SQL Server 2008 Analysis Services 和 SQL Server 2005 Analysis Services 以使用 Kerberos 身份验证[http://support.microsoft.com/kb/917409?wa=wsignin1.0](http://support.microsoft.com/kb/917409?wa=wsignin1.0)

！

# css - CSS 浮动在锚点或其他内联元素内的内容上

> ID：13341138
> 
> 赞同：1
> 
> 时间：2012-11-12T09:27:22.620
> 
> 标签：css, css-float, anchor, image, conventions

假设我有以下标记：

```
<li style="width: 200px;">
    <a href="....">
        <img style="width: 50px;" src="..." />
    </a>
    Lorem ipsum...
</li> 
```

我希望图像向左浮动。

应该`float: left`应用于图像标签还是包含它的锚标签？无论如何，两者都是内联元素。对此有推荐的做法或**惯例**吗？

编辑：也许我忘了指定图像后面有文本，并且所需的结果是图像应该与文本和右对齐当然左对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:30:13.570

标签内联`img`到`a`标签，并且由于其中没有其他内容，因此几乎没有区别-与浮动类似，除非您的外部元素比内部元素更宽；元素的`a`显示模式也将与其父元素相关，所以这可能是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:31:32.500

具有非显式宽度的浮动元素是不可预测的，所以我会使用图像，或者更好的是给锚一个显式宽度并使其阻塞，以尽量减少任何间接变化。

请注意，如果您在锚未浮动时浮动图像，则锚将折叠为零宽度（和高度）。这是因为图像在浮动时脱离了页面的正常流程。如果您浮动锚，这将发生在锚的父级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:33:15.987

取决于，如果它只是一个图像列表并且你想浮动它们中的每一个，你也可以浮动整个列表项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-25T21:48:20.830

您要将类应用于锚链接而不是图像的原因就像 Asad 所说的那样，将类应用于图像会将锚从页面流中取出并删除其宽度和高度。

这很重要的原因是因为当用户在页面中切换时，整个元素应该在 :focused 时突出显示： http: [//cl.ly/fFwI](http://cl.ly/fFwI)

如果将类应用于图像，则会出现此行为：[http ://cl.ly/fFxh](http://cl.ly/fFxh)

如果选项卡焦点对您很重要，请将类应用于锚点。

# jquery - 迭代复选框以检索选中的值

> ID：13341151
> 
> 赞同：0
> 
> 时间：2012-11-12T09:28:18.640
> 
> 标签：jquery

我在 jquery 中有以下小提琴：

```
 var checks = $('input[name= "ScheduleCharge[hspecialty][]"]:checked');
 $(checks).each(function(){ 
     alert($(this).value()); 
 }); 
```

这只是刷新页面。如果我替换`$(this).value()`为`1`，`1`则根据复选框的数量警告正确的次数。有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:29:07.270

您需要使用`val()`而不是`value()`value() 不是由 jquery 定义的，并且错误会导致页面刷新。

```
var checks = $('input[name= "ScheduleCharge[hspecialty][]"]:checked');
$(checks).each(function(){ 
    alert($(this).val()) ; 
}) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:36:52.617

这`$(this)`是一个**jQuery 对象**，值不是它的有效属性

`.val()`改为使用

```
alert($(this).val()) ;  $(this)  jQuery Object 
```

如果要使用**value 属性**，请使用**DOM 对象**

```
alert( this.value ) ;   this DOM Object 
```

# php - 在 mac os 10.8.2 上使用 php 列出完整的主目录

> ID：13341153
> 
> 赞同：0
> 
> 时间：2012-11-12T09:28:19.867
> 
> 标签：php, directory, osx-mountain-lion

我写了一个 php 脚本来输出目录的内容。例如，它与“/usr/local/”完美配合，但无法使用“/Users/der_/Pictures/”运行相同的代码...输出为：“打开目录 /Users/der_/Pictures/ 读取失败”。检查此目录的权限给出：所有者-der_，组-staff。谢谢。运行 php 5.4.6... 是否有必要将权限更改为“root”？我的回答是“是”：更改目录权限，即 chown user:group myexemple_directory 但要小心...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:40:29.040

用户配置文件不应具有 root 权限

这个对我有用

```
#!/usr/bin/php

<?php

if ($handle = opendir('/Users/der_/Pictures')) {
    echo "Content:\n";

    /* This is the correct way to loop over the directory. */
    while (false !== ($entry = readdir($handle))) {
        echo "$entry\n";
    }

    closedir($handle);
}
?> 
```

# oop - Servlet设计，并发访问字段

> ID：13341171
> 
> 赞同：0
> 
> 时间：2012-11-12T09:29:45.797
> 
> 标签：oop, design-patterns, servlets, concurrency, reentrantreadwritelock

我有一个比较笼统的问题，请指教。

我有一个小服务程序。

这个 servlet 有私有字段。

私有字段是一种元数据的东西（公共类元数据{//bla-bla-bla}）。

**处理GET**请求时，此元数据用于执行某些操作。

我想在同一个 servlet 中实现 POST 方法。用户上传文件并更新元数据字段。

**问题**：使用一个 servlet 实例在多个 web 线程之间共享元数据对象并发访问此私有字段。POST 方法操作（更新元数据对象）会导致元数据状态不一致，并发 GET 请求可能会失败。

**问题**：在 GET 请求运行时更新元数据对象的最佳方法是什么？

**虚拟解决方案**：

1.  在每个 GET 请求期间，一开始

2.  同步元数据对象并将其克隆在一个块中，然后释放它。

3.  并发 GET 请求与一致的元数据对象的克隆版本一起使用。

4.  在每个 POST 请求期间。

5.  同步元数据对象并更新其字段。

6.  释放元数据对象。

请建议或批评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:45:50.550

在 Metadata 类中使用同步方法 set 和 get 很好，但如果您有多个阅读器和（很多）较少的编写器，可能会减慢您的 Web 应用程序：

> Java synchronized 关键字用于获取对象的排他锁。当一个线程获取一个对象的锁用于读取或写入时，其他线程必须等待直到该对象上的锁被释放。想象一个场景，有许多读取器线程频繁读取共享数据，而只有一个写入器线程更新共享数据。读取时不必专门锁定对共享数据的访问，因为多个读取操作可以并行完成，除非有写入操作。

（摘自那篇不错[的帖子](http://www.javacodegeeks.com/2012/04/java-concurrency-with-readwritelock.html)）

因此，在某些情况下，使用多读单写策略在性能方面可能会更好，这在同一个 Java5 [**ReadWriteLock**](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html)接口文档中也有解释：

> 与互斥锁相比，读写锁在访问共享数据时允许更高级别的并发性。它利用了这样一个事实：虽然一次只有一个线程（写入线程）可以修改共享数据，但在许多情况下，任意数量的线程可以同时读取数据（因此读取线程）。理论上，使用读写锁所允许的并发性的增加将导致比使用互斥锁的性能提高。在实践中，这种并发性的增加只有在多处理器上才能完全实现，而且只有在共享数据的访问模式合适的情况下。
> 
> 读写锁是否会比使用互斥锁提高性能取决于数据被读取与修改相比的频率、读写操作的持续时间以及数据的争用——即即，将尝试同时读取或写入数据的线程数。例如，最初填充了数据并随后不经常修改但经常被搜索（例如某种目录）的集合是使用读写锁的理想候选者。但是，如果更新变得频繁，则数据大部分时间都被排他锁定，并且并发性几乎没有增加。更远，如果读取操作太短，则读写锁实现的开销（本质上比互斥锁更复杂）会主导执行成本，特别是因为许多读写锁实现仍然通过一小部分序列化所有线程的代码。最终，只有分析和测量才能确定读写锁的使用是否适合您的应用程序。

一个现成的实现是[**ReentrantReadWriteLock**](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)。

查看上[一篇](http://www.javacodegeeks.com/2012/04/java-concurrency-with-readwritelock.html)文章，了解如何使用它的不错的教程。

# django - 从多对多字段中获取对象

> ID：13341173
> 
> 赞同：45
> 
> 时间：2012-11-12T09:30:03.597
> 
> 标签：django, django-models, many-to-many

我在模型中有一个名为“admins”的 m2m 字段，我需要从视图中获取该字段中所有选定的条目，它们是用户 ID。然后使用用户 ID 获取每个用户的电子邮件。是否可以？

我想要做的确切的事情是向该平台内空间的所有管理员发送大量电子邮件。

空间模型：

```
class Space(models.Model):

    """     
    Spaces model. This model stores a "space" or "place" also known as a
    participative process in reality. Every place has a minimum set of
    settings for customization.

    There are three main permission roles in every space: administrator
    (admins), moderators (mods) and regular users (users).
    """
    name = models.CharField(_('Name'), max_length=250, unique=True,
        help_text=_('Max: 250 characters'))
    url = models.CharField(_('URL'), max_length=100, unique=True,
        validators=[RegexValidator(regex='^[a-z0-9_]+$',
        message='Invalid characters in the space URL.')],
        help_text=_('Valid characters are lowercase, digits and \
    admins = models.ManyToManyField(User, related_name="space_admins", verbose_name=_('Administrators'), help_text=_('Please select the \
        users that will be administrators of this space'), blank=True,
        null=True)
    mods = models.ManyToManyField(User, related_name="space_mods",
        verbose_name=_('Moderators'), help_text=_('Please select the users \
        that will be moderators of this space.'), blank=True, null=True)
    users = models.ManyToManyField(User, related_name="space_users", verbose_name=_('Users'), help_text=_('Please select the users that \
        can participate on this space'), blank=True, null=True) 
```

查看仅发送一封电子邮件：

```
@login_required
def add_intent(request, space_url):

    """
    Returns a page where the logged in user can click on a "I want to
    participate" button, which after sends an email to the administrator of
    the space with a link to approve the user to use the space.

    :attributes:  space, intent, token
    :rtype: Multiple entity objects.
    :context: space_url, heading
    """
    space = get_object_or_404(Space, url=space_url)
    #admins = space.admins??

    try:
        intent = Intent.objects.get(user=request.user, space=space)
        heading = _("Access has been already authorized")

    except Intent.DoesNotExist:
        token = hashlib.md5("%s%s%s" % (request.user, space,
                            datetime.datetime.now())).hexdigest()
        intent = Intent(user=request.user, space=space, token=token)
        intent.save()
        subject = _("New participation request")
        body = _("User {0} wants to participate in space {1}.\n \
                 Please click on the link below to approve.\n {2}"\
                 .format(request.user.username, space.name,
                 intent.get_approve_url()))
        heading = _("Your request is being processed.")
        send_mail(subject=subject, message=body,
                  from_email="noreply@ecidadania.org",
                  recipient_list=[space.author.email])

        # Send a notification to all the admins in that space
        #send_mass_mail()

    return render_to_response('space_intent.html', \
            {'space_name': space.name, 'heading': heading}, \
            context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-12T09:41:26.393

您可以使用：

```
space.related.all() 
```

返回用户的 QuerySet

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-06-20T14:12:21.113

对于 Django >= 1.9

```
space.admins.all() 
```

正如[Salvatore Iovene 所提到的](https://stackoverflow.com/questions/13341173/django-get-objects-from-a-many-to-many-field#comment18206080_13341346)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-06-25T09:33:56.587

获取所有 many_to_many 对象（不适用于特定空间），对我来说有效

```
Space.admins.through.objects.all() 
```

(Django 2.14)

# security - 测试 GWT 应用程序

> ID：13341175
> 
> 赞同：1
> 
> 时间：2012-11-12T09:30:06.237
> 
> 标签：security, owasp, penetration-testing

你能给我一些关于如何对 GWT 应用程序进行渗透测试的信息吗？是否有任何类型的 GWT 渗透测试文档（如 owasp 测试指南）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:15:06.920

它仍然是所有 HTTP。您不需要与非 GWT 应用程序有太大不同，但您确实需要熟悉多年来在 GWT 中发现的各种漏洞，并针对这些特定项目进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T13:12:25.597

检查[GWT-Penetration-Testing-Toolset](https://github.com/GDSSecurity/GWT-Penetration-Testing-Toolset)。

# c - 一个关于 getchar() 函数的有趣实践

> ID：13341177
> 
> 赞同：3
> 
> 时间：2012-11-12T09:30:08.433
> 
> 标签：c, getchar, console-input

当我在 K&R 上练习时，我发现了一个非常有趣的问题：

代码如下：

* * *

```
include <stdio.h>
main()                                                                                              
{                                                                                                   
    int c;
    int bn;
    bn=0;
    while((c=getchar())!=EOF)                                                                       
    {                                                                                               
        if(c==' ')                                                                                  
        bn++;                                                                                   
    }                                                                                           
    printf("blanks counter:%d\n",bn);                                                               
} 
```

* * *

代码函数是统计空格数

我一次输入所有单词，没有使用退格键，就完成了。

* * *

```
$ ./a.out

I have a dream

blanks counter:3 
```

* * *

但是，如果我使用退格键，输入过程中可能会发生什么？

我推测当按下空格键时，getchar()函数应该得到这个事件，然后执行bn++，所以即使我后来按下退格键删除这个空格，bn变量的值也不会改变。但实践的结果与我的推测不同，实践的程序如下：

第一步：输入第一个空格 ![在此处输入图像描述](../Images/b6543371e8e2847e358646c8c454dad3.png)

第二步：使用退格键删除空格 ![在此处输入图像描述](../Images/298f3393601eeb8ea97ea4cbcfcf90ee.png) 第三步：完成剩余字符的输入 ![在此处输入图像描述](../Images/900bf24e4e5876adf6f3eb066f4876c4.png)

为什么结果是 3 而不是 4？为什么按下退格键会改变 bn 变量的值？

请给我一些想法，谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T09:33:09.000

您的控制台是行缓冲标准输入。这意味着您的程序在您点击 之前不会接收任何输入`Return`，并且它将接收*编辑*后的文本，而不是实际的击键序列。

# java - 如何使用 Hibernate 为我的 JPA 实体设置唯一性级别？

> ID：13341179
> 
> 赞同：0
> 
> 时间：2012-11-12T09:30:16.950
> 
> 标签：java, hibernate, jpa, unique

假设我有 2 个 JPA 实体：

```
@Entity
public class OwnerEntity {

    private List<OwnedEntity> subEntities

    // ...
}

@Entity
public class OwnedEntity {

    private String quasiUniqueSid;

    private OwnerEntity ownerEntity

    // ...
} 
```

如您所见，它们具有多对一的关系：an`OwnerEntity`可以有许多`OwnedEntity`s。

我想要实现的是`OwnedEntity`根据其所有者为每个分配一个唯一的 sid。因此，我可以拥有例如 2 个拥有相同的实体，`quasiUniqueSid`但它们不能拥有相同的所有者。Hibernate 有针对此类问题的一些内置功能吗？我记得其他可以做到这一点的 ORM（与 Java 无关）因此是我的问题。我正在使用最新的 Hibernate 版本（4.1.8）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:38:32.377

看来您需要一个复合键，如下所示：

```
@Entity
@Table(uniqueConstraints=@UniqueConstraint(columnNames={"quasiUniqueSid","ownerEntity_id"}), name="myUniqueConstraint")
public class OwnedEntity {
    ...
    String quasiUniqueSid;
    @ManyToOne
    OwnerEntity ownerEntity;
    ...
} 
```

您可以在[此处](http://docs.oracle.com/cd/E17802_01/products/products/persistence/javadoc-1_0-fr/javax/persistence/UniqueConstraint.html)找到完整的文档。

如果要显式定义 ownerEntity 的列名，可以使用：

```
@JoinColumn(name="ownerEntity_id") 
```

# php - 如何在 mysqli 中为带有 IN 的 SELECT 提供参数

> ID：13341180
> 
> 赞同：2
> 
> 时间：2012-11-12T09:30:17.840
> 
> 标签：php, sql, mysqli

我准备好的查询如下所示：

```
 $sql = "SELECT $t1.id FROM $t1 WHERE $t1.name IN (?)"; 
```

当我尝试：

```
 $stmt = Sql::$select->prepare($sql);
   $string="'aaa','bbb','ccc'";
   $stmt->bind_param('s', $string); 
```

...它没有返回预期的结果。它将字符串视为一个名称，而不是多个单独的名称。如何解决？

其余功能：

```
 $stmt->execute();
   $stmt->store_result();
   return $stmt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:10:20.083

尝试像这样更改查询

```
$sql = "SELECT $t1.id FROM $t1 WHERE FIND_IN_SET($t1.name, ?)>0";
$stmt = Sql::$select->prepare($sql);
$string='aaa,bbb,ccc';
$stmt->bind_param('s', $string); 
```

而且这个解决方案并不可靠。请参阅[FIND_IN_SET(str,strlist)](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

正确的方法是对 IN 语句中的每个元素使用单独的占位符。

另一个建议，去掉 IN 语句并在 php 中运行一个循环来生成查询并绑定参数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-12T10:19:15.727

问题是带有 's' 的 bind_param 函数将参数作为单个字符串威胁，因此它基本上将您的查询转换为：

```
"SELECT $t1.id FROM $t1 WHERE $t1.name IN (''aaa','bbb','ccc'')"; 
```

一个快速的解决方法是将字符串变量更改为：

```
$string="aaa','bbb','ccc"; 
```

*注意：没有前导/尾随引号（您可以使用`trim($string, "'")`*

**您也可以尝试反转引号：`"``'`**如果这不起作用，则使用**而不是。**

一个更可靠和健壮的解决方案是更改查询以包含`?`每个字符串（使用带有`expolode() / implode()`php 函数的数组）。

# android - 设置可扩展列表视图的底部分隔符/分隔符

> ID：13341183
> 
> 赞同：0
> 
> 时间：2012-11-12T09:30:34.593
> 
> 标签：android, android-layout, android-listview, expandablelistview

我正在尝试为我的可扩展列表视图添加一个底部/页脚分隔符，但现在可以使用。目前我有一个可扩展的列表视图，它显示在[链接图像](http://tinypic.com/r/5zffaa/6)中。

我在定义可扩展列表视图但没有骰子的 xml 文件中设置了 android:footerDividersEnabled="true"。

我还定义了一个 1dp 高的视图作为底部分隔线，但同样没有运气。

我缺少一些简单的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:33:50.020

如果您希望出现页脚分隔符，我认为您需要添加一个页脚视图（即使是空的）：

```
 listView.setFooterDividersEnabled(true);
    listView.addFooterView(new View(listView.getContext())); 
```

# c# - 从excel到数据表

> ID：13341184
> 
> 赞同：1
> 
> 时间：2012-11-12T09:30:37.450
> 
> 标签：c#, excel, datatable, export

我想将数据从我的 excel 表导出到数据表，但不知道如何将数据放入数据表。有人可以帮我吗？

我的代码是：

```
Excel.Application xlApp = new Excel.Application();
Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(userSelectedFilePath2);
Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
Excel.Range xlRange = xlWorksheet.UsedRange;

DataTable excelTb = new DataTable();

for (int i = 0; i <= xlRange.Rows.Count - 1; i++)
{
     for (int j = 1; j <= xlRange.Columns.Count; j++)
     {
          excelTb.Columns.Add(xlRange.Cells[0,j].Value2.ToString());
          foreach (DataRow extb in excelTb.Rows)
          {
              DataRow newDataRow = excelTb.NewRow();
              // Here should be something to put data in DataTable
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:46:57.393

试试这个：

```
 for (int row = 0; row < xlRange.Rows.Count; row++)
    {
        DataRow dataRow = null;
        if (row != 0) dataRow = excelTb.NewRow();

        for (int col = 0; col < xlRange.Columns.Count; col++)
        {
            if (row == 0) //Headers
            {
                excelTb.Columns.Add(xlRange.Cells[row + 1, col + 1].Value2.ToString());
            }
            else //Data rows
            {
                dataRow[col] = xlRange.Cells[row + 1, col + 1].Value2.ToString();

            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:45:28.037

如果您只需要处理 xlsx 和 xlsm 文件，请使用 epplus，它比互操作快得多。它是一个用于读取/写入 excel 文件的包。此外，它有一个非常好的许可证并且不花钱。

对于您的数据表，您可以沿着这条线走（vb.net codeE）

```
 Dim tbl As New DataTable
     for cols = 0 to j 'you have to define the columns first
         tbl.Columns.Add()
     next

    for cols = 0 to j
       for rows = 0 to your_rowcount
            Dim row = tbl.NewRow
'Here is the critical part: iterate over the worksheet, and take each value from the sheet. put the value into the datatable. The datatable needs to get a new row for each worksheet.row
    Dim value = yourworksheet.cells(cols+1,rows+1).value
     row(cols)=Value
   next
next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:51:06.583

```
 private void grabData(string filename)
            {
                    // Clear DataTaable before generating new Table Data/
                    ds.Clear();

                    // Connection String to the previously selected file. 
                    // HDR=Yes advises that spreadsheet has columns. 

                    OleDbConnection con = new OleDbConnection(
                    "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + filename +
                    ";Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=1\"");

                    // The criteria required to Build DataTable. Select specific columns                 //from spreadsheet where teh Site Statuse is LIVE.
                    string strSQL = "SELECT * FROM [YOURTABLE]";

                    // The Command that we will use with our DataAdapter.
                    OleDbCommand cmd = new OleDbCommand(strSQL, con);

                    OleDbDataAdapter da = new OleDbDataAdapter(cmd);
                    da.Fill(ds, "YourTable");

            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:55:37.150

将工作表中的数据读取到二维对象数组中，如下所示：

```
//Convert from interop object to native C# object, indexed 1 to length
object[,] data = (object[,])xlWorksheet.UsedRange.Value2; 
```

现在您可以像这样向 DataRow 添加一个单元格：

```
 for (int row = 1; row < data.GetUpperBound(0); row++)
    {
        DataRow newDataRow = excelTb.NewRow();
        newDataRow["AStringColumn"] = data[row,1].ToString();
        newDataRow["ADoubleColumn"] = Convert.ToDouble(data[row, 2]);
        //repeat for each column OR replace with a column loop and use newDataRow[col] = data[row, col].ToString();

        excelTb.Rows.Add(newDataRow);
    } 
```

请注意，双数组从 1 开始索引，而不是像 C# 中的数组通常从 0 开始索引。

# regex - 通过 RegEx 按最后一个单词对 Yahoo Pipes 条目进行排序

> ID：13341186
> 
> 赞同：0
> 
> 时间：2012-11-12T09:30:48.150
> 
> 标签：regex, yahoo-pipes

我正在尝试通过生成项目的条目之一的最后一个单词对 CSV 文件中由 Yahoo Pipes 生成的项目进行排序：

[此管道](http://pipes.yahoo.com/pipes/pipe.info?_id=5f6972eb6c93cd86b1380d012b16419d)生成的示例 JSON 项：

```
"items": [
  {
    "name": "Prof. Dr.-Ing. Richard Bamler",
    "link": "http:\/\/www.lmf.bv.tum.de",
    "lehrstuhl": "Lehrstuhl f\u00fcr Methodik der Fernerkundung",
    "y:row": "1",
    "description": null,
    "title": null
  }, 
```

我想我需要一个正则表达式来提取名称字符串的最后一个单词（第一个问题），我不太清楚。

一如既往，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:28:13.157

[我对你的管道做了一点修改](http://pipes.yahoo.com/pipes/pipe.info?_id=d0a889244a548cd417a983e3ff304b80)。我不熟悉本地化的标题，但似乎是“komm”。是后缀而不是名称，因此我在正则表达式的末尾构建了一个异常。

规则应如下所示：

替换`^.* ([^ \.]+)( komm\.)?$`为`$1`

* * *

这`$1`是对第一个匹配组的反向引用`([^ \.]+)`。匹配组匹配最后一组不是空格或句点的连续字符。

这种形式是必要的，因为正则表达式将在 Javascript 环境中运行，并且 Javascript 不能正确处理非 ascii 字符`ü`（它认为它是非单词）。

它`( komm\.)?`的末尾也有 ，因此它可以忽略该后缀（如果存在）。

除此之外，我进行了一些更改以清理输出，使其更加清晰。

# git - Git 权限被拒绝

> ID：13341192
> 
> 赞同：1
> 
> 时间：2012-11-12T09:30:56.560
> 
> 标签：git, sudo

因此，当我按照教程设置我的 git 帐户时，我似乎对 sudo 有点不知所措，这就是我输入的内容

```
458  git credential-osxkeychain
459  curl -s -O http://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain
460  git credential-osxkeychain
461  which git
462  sudo mv git-credential-osxkeychain /usr/bin/git
463  git config --global credential.helper osxkeychain
464  sudo git config --global credential.helper osxkeychain 
```

现在每当我尝试任何类型的 git 命令时，我都会收到消息

```
-bash: /usr/bin/git: Permission denied 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T09:40:14.763

尝试：

```
chmod a+x /usr/bin/git 
```

或者：

```
chmod 755 /usr/bin/git 
```

# castle-windsor - 如何在温莎城堡中仅注册特定的接口/实现对？

> ID：13341194
> 
> 赞同：0
> 
> 时间：2012-11-12T09:31:00.133
> 
> 标签：castle-windsor, registration

我有这个层次结构：

```
IRepository
    |
    |_____IRepository<T>_______________________________________________
              |                                                        |
              |_____Repository<TModelContainer, TEntity>               |
                        |                                              |
                        |_____SpecificRepository<TEntity>          IEntityRepository
                                  |                                    |
                                  |__________EntityRepository__________| 
```

我**只想**拥有以下注册对：

```
IRepository<T> / Repository<T>
IEntityRepository / EntityRepository 
```

基于[http://docs.castleproject.org/Windsor.Registering-components-by-conventions.ashx](http://docs.castleproject.org/Windsor.Registering-components-by-conventions.ashx)，我无法理解如何实现这一目标......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:26:42.837

`.WithServiceDefaultInterface()`应该做的伎俩

# expressionengine - 使用 Multisite Manager 搜索多个 ExpressionEngine 站点

> ID：13341195
> 
> 赞同：0
> 
> 时间：2012-11-12T09:31:06.217
> 
> 标签：expressionengine

有没有办法使用内置的 EE 搜索标签和多站点管理器在多个站点中的多个渠道进行搜索？

我无法在搜索标签或 MSM 的文档中找到任何指示如何执行此操作的内容，或者即使有可能。

现在还为时尚早，但到目前为止，我已经尝试过包含 site_id 或 site 参数（如下所示），并且还尝试在 channel 参数中指定 site_name:channel_name 但到目前为止还没有成功。

```
{exp:search:simple_form channel="news|pages" site="site1|site2|site3" result_page="search/results" search_in="everywhere" where="all"} 
```

更新：从 2011 年 1 月起，这似乎无法使用搜索标签，并且需要自定义查询。 [http://expressionengine.com/forums/viewthread/178300/](http://expressionengine.com/forums/viewthread/178300/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:06:58.350

如果您有 120 美元的预算，那么 Solspace 的超级搜索模块[支持](http://www.solspace.com/docs/detail/super_search_search/#site)MSM 搜索。或者，您可以轻松地将[Google 自定义搜索](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=70322&ctx=cb&src=cb&cbid=rjn0hklridhb)放在一起。

# java - vimrc 括号/括号 java,c 缩进新行

> ID：13341197
> 
> 赞同：0
> 
> 时间：2012-11-12T09:31:13.553
> 
> 标签：java, vim, code-formatting

如果我们的代码看起来像

```
for(...){

} 
```

重新格式化后，我希望它看起来像

```
for(...)
{

} 
```

以及所有函数、方法、类等。我在 stackoverflow 的其他文章中发现了类似的东西，但它是一个正则表达式，每次都需要在 vim 控制台中输入。我正在寻找一些东西放在 vimrc 文件中（如果可能的话）并且每次打开它时都可以工作。

好吧，这是我找到的：

```
:%s/^(\s*).*\zs{\s*$/\r\1{/ 
```

在[http://stackoverflow.com/questions/4463211/is-there-a-way-to-reformat-braces-automatically-with-vim](https://stackoverflow.com/questions/4463211/is-there-a-way-to-reformat-braces-automatically-with-vim)但问题是即使括号在正确的位置它也会添加一个新行...并且仍然不知道如何将其映射到组合键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:39:26.393

（用更准确的模式编辑）

这应该可以解决问题：

```
nnoremap <F9> :%s/^\(\s*\).\+\zs{\ze\s*$/\r\1{<cr> 
```

但这对我来说听起来并不“安全”。

相反，您可以这样做：

```
nnoremap <F9> :%s/^\(\s*\).\+\zs{\ze\s*$/\r\1{/c<cr> 
```

这将要求对每场比赛进行确认。

或录制宏并使用`:global`.

***编辑***

您的模式 ,`:%s/^(\s*).*\zs{\s*$/\r\1{/`是错误的，因为：

*   捕获括号没有正确转义，`(\s*)`而不是`\(\s*\)`

*   `.*`将匹配*任意*数量的任意字符，`0`这就是为什么替换也适用于带有单个`{`.

# javascript - 为什么 new Date() 输出错误的位置？

> ID：13341198
> 
> 赞同：0
> 
> 时间：2012-11-12T09:31:14.217
> 
> 标签：javascript, node.js, datetime

在我的机器上，mac-os，node v0.8.7，为什么`GMT+0900`

```
> new Date()
Mon Nov 12 2012 17:23:51 GMT+0800 (CST)
> new Date(553964400000)
Thu Jul 23 1987 00:00:00 GMT+0900 (CST)
> 
```

在我的服务器上，ubuntu，node v0.8.6，为什么会这样`GMT+0800`

```
> new Date();
Mon Nov 12 2012 17:27:55 GMT+0800 (CST)
> new Date(553964400000)
Wed Jul 22 1987 23:00:00 GMT+0800 (CST) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:47:44.433

您应该检查您的机器和服务器上设置的时区。OSX 机器可能会观察夏令时，而服务器可能不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:03:52.893

这取决于语言环境设置和日期。

[1987-7月](http://www.timeanddate.com/worldclock/timezone.html?n=470&syear=1980)，重庆/上海夏令时。因此，您的捐赠时间点是 UTC+9。

除非您提供非常详细的语言环境设置，否则无法解释。

我 100% 确定的是，CST 的事情是错误的，它应该是 CDT。您可以更改其他一些时间点来验证我的理论。

# ios - iOS - 消息应用发送图片

> ID：13341199
> 
> 赞同：1
> 
> 时间：2012-11-12T09:31:14.887
> 
> 标签：ios, uiimageview, uiimage

我正在开发一个消息传递应用程序，我想知道如何在发送图片时获得这些效果（是否已经有一个库，因为它在大多数消息传递应用程序中非常常用）：

*   拍照并单击“使用”按钮后，消息窗口将显示我要发送的图片的阴影图像，并显示已上传的百分比

![在此处输入图像描述](../Images/d77ae1265401d2b239c5faa7fcf92821.png)

*   图像完全上传后，显示没有阴影的图像

![在此处输入图像描述](../Images/e017638af9feb7e154e14f51db566ef3.png)

*   如果按下图像，它将显示完整尺寸

![在此处输入图像描述](../Images/9006c6a44094ee17ce25d2e241fe245e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T21:10:23.123

为此，您只需要跟踪图像的总大小以及传输了多少。这将取决于您发送图像的方式。我正在使用套接字连接，我发送的图像是这样的：

网络数据包 - [（int）数据包长度] [图像数据]

第一个字节一到，我就知道图像的大小。然后我记录了迄今为止转移的金额。然后我将此信息传递给 MBProgressHUD，它可以选择显示百分比。[MBProgressHUD](https://github.com/jdg/MBProgressHUD)

# php - 选择两个日期之间的数据

> ID：13341202
> 
> 赞同：2
> 
> 时间：2012-11-12T09:31:30.160
> 
> 标签：php, html, mysql, date

我有六个下拉菜单用于选择两个日期我有以下代码，无论我选择哪个日期，它都不会给我任何结果

```
$year1 = $_POST['year1'];
$month1 = $_POST['month1'];
$day1 = $_POST['day1'];
$date1 = $year1 . "/" . $month1 . "/" . $day1;
$year2 = $_POST['year2'];
$month2 = $_POST['month2'];
$day2 = $_POST['day2'];
$date2 = $year2 . "/" . $month2 . "/" . $day2;
$result = mysql_query("SELECT * FROM services WHERE date between  '%" . $date1 . "%' AND '%" . $date2 . "%' ORDER BY id " ); 
```

但是如果我用特定日期替换最后一行中的变量 $date1 和 $date2 我会得到正确的结果。

```
$result = mysql_query("SELECT * FROM services WHERE date between  '2012/10/01' AND '2012/11/12' ORDER BY id " ); 
```

谁能告诉变量 $date1 和 $date2 有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:32:18.663

您需要`%`从查询中删除符号并使用

```
$result = mysql_query("SELECT * FROM services WHERE date between  '" . $date1 . "' AND '" . $date2 . "' ORDER BY id " ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:35:59.700

% 用于通配符搜索...您必须将其从代码中删除...

```
$sql = "SELECT * FROM services WHERE date between  '" . $date1 . "' AND '" . $date2 . "' ORDER BY id ";
mysql_query($sql); 
```

# debugging - 我可以在 IntelliJ Idea 中停止自定义循环迭代吗？

> ID：13341205
> 
> 赞同：4
> 
> 时间：2012-11-12T09:31:34.280
> 
> 标签：debugging, intellij-idea

嗨，我的问题是我的 for 循环中有很大的数组要循环，并且在第 400 次迭代中，某些方法失败了。当我达到例如 i=400 时，我可以让 Idea 调试器停止吗？如果是，那我该怎么做？先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T09:44:20.677

您可以通过配置[将](http://www.jetbrains.com/idea/webhelp/configuring-breakpoints.html)在`i==400`.

# php - 如何找出 httpd.conf 文件的位置？

> ID：13341210
> 
> 赞同：13
> 
> 时间：2012-11-12T09:32:04.887
> 
> 标签：php, apache

如何在 apache (PHP) 上找到 httpd.conf 文件的路径？我不知道我的脚本是否会在 windows apache 或 linux 中运行，我需要知道在哪里可以找到这个文件以便从那里找到参数。谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-12T09:44:13.940

我认为它没有暴露于 PHP。在终端中运行`httpd -V`，您会在那里找到它（命令名称取决于您的系统/apache 版本，也可以是`apache -V`）：

```
bash-3.2# httpd -V
Server version: Apache/2.2.22 (Unix)
Server built:   Aug 24 2012 17:16:58
Server's Module Magic Number: 20051115:30
Server loaded:  APR 1.4.5, APR-Util 1.3.12
Compiled using: APR 1.4.5, APR-Util 1.3.12
Architecture:   64-bit
Server MPM:     Prefork
  threaded:     no
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR="server/mpm/prefork"
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_FLOCK_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT="/usr"
 -D SUEXEC_BIN="/usr/bin/suexec"
 -D DEFAULT_PIDLOG="/private/var/run/httpd.pid"
 -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
 -D DEFAULT_LOCKFILE="/private/var/run/accept.lock"
 -D DEFAULT_ERRORLOG="logs/error_log"
 -D AP_TYPES_CONFIG_FILE="/private/etc/apache2/mime.types"
 -D SERVER_CONFIG_FILE="/private/etc/apache2/httpd.conf"     <-- HERE IT IS 
```

但是如果您只想知道某个配置变量的值，那么`phpinfo()`，`getenv()`或者`apache_getenv()`应该足够了

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-14T09:06:36.487

这是定位 httpd.conf 文件的经典方法：

```
# find / -name 'httpd.conf' -print 
```

您也可以使用文件定位文件

```
locate httpd.conf 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T09:35:07.097

查看从 phpinfo() 获得的输出的开头，那里显示了基本的 apache 配置文件。最简单的方法是制作一个简单的 php 脚本并调用一次：

```
<?php phpinfo(); ?> 
```

同样，您也可以直接查询这些设置。检查文档！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-10T04:12:47.683

**httpd -V**

它将显示所有编译设置，在结果中间你会发现：

*   **Apache 根目录**： **`/usr/local/apache`**
***   根目录中的**Apache 配置文件路径：**`conf/httpd.conf`**

 **> 阿帕奇配置文件：`/usr/local/apache/conf/httpd.conf`

`**root@host [~]# httpd -V** Server version: Apache/2.4.16 (Unix) Server built: Dec 15 2015 10:01:02 Cpanel::Easy::Apache v3.32.6 rev9999 Server's Module Magic Number: ... Server loaded: APR 1.5.2, APR-UTIL 1.5.4 Compiled using: APR 1.5.2, APR-UTIL 1.5.4 Architecture: 64-bit Server MPM: prefork threaded: no forked: yes (variable process count) Server compiled with.... -D APR_HAS_SENDFILE -D APR_HAS_MMAP -D APR_HAVE_IPV6 (IPv4-mapped addresses disabled) -D APR_USE_SYSVSEM_SERIALIZE -D APR_USE_PTHREAD_SERIALIZE -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT -D APR_HAS_OTHER_CHILD -D AP_HAVE_RELIABLE_PIPED_LOGS -D DYNAMIC_MODULE_LIMIT=256 **-D HTTPD_ROOT="/usr/local/apache"** -D __SUEXEC_BIN="/usr/local/apache/bin/suexec" -D DEFAULT_PIDLOG="logs/httpd.pid" -D DEFAULT_SCOREBOARD="logs/apache_runtime_status" -D DEFAULT_ERRORLOG="logs/error_log" -D AP_TYPES_CONFIG_FILE="conf/mime.types" **-D SERVER_CONFIG_FILE="conf/httpd.conf"**`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T09:38:57.020

如果它没有在 phpinfo() 中列出，也许使用

```
apache_getenv(/* variable */) 
```

[http://www.php.net/manual/en/function.apache-getenv.php](http://www.php.net/manual/en/function.apache-getenv.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T09:38:31.033

如果您使用的是 xampp，该文件将位于此目录 xampp\apache\conf**

# jquery - 如何在 jQuery 数据表中显示复杂的行

> ID：13341213
> 
> 赞同：0
> 
> 时间：2012-11-12T09:32:15.500
> 
> 标签：jquery, html, jquery-ui, datatables

目前我正在使用带有`sAjaxSource`and的数据表`bServerSide: true`。得到了定义的列`aoColumns`并且标记是应该的，`table`带有`thead`and `th`'s...

我正在尝试获取从服务器返回的一些列，并将它们显示在`<p>`实际行内的标签中。

例如，现在有 5 个列从服务器返回，每个列有 5 个单元格`tr`来显示它们。我想要做的是将 更改`table`为仅显示返回的前 3 列，而其他 2 列将显示`<p>`在每个表格行内的标签内。

希望我解释得对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:41:43.423

尝试像这样使用 fnRowCallback：

```
"fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                        $('td:eq(4)', nRow).replaceWith('<p>data1</p>');
                        $('td:eq(5)', nRow).replaceWith('<p>data2</p>');
                        return nRow;
} 
```

**由于评论更新：**

因此将回调更改为“fnCreatedRow”应该可以解决问题：

```
 "fnCreatedRow": function( nRow, aData, iDataIndex ) {                    
                oTable.fnOpen( nRow, 
                    fnFormatDetails('<div><p>'+aData.columndata+'</p></div>'));
    } 
```

# objective-c - 在 iPad 中调用 ABNewPersonViewController 时选择照片时出错

> ID：13341217
> 
> 赞同：0
> 
> 时间：2012-11-12T09:32:38.583
> 
> 标签：objective-c, uiviewcontroller, uiinterfaceorientation, uiapplication

我设法将 ABNewPersonViewController 推送到我的导航控制器。但是，当我选择“添加照片”->“选择照片”时遇到此错误：

> ***由于未捕获的异常“UIApplicationInvalidInterfaceOrientation”而终止应用程序，原因：“支持的方向与应用程序没有共同的方向，并且 shouldAutorotate 正在返回 YES”

此错误是由于我希望我的 iPad 应用程序仅具有横向方向这一事实引起的。

知道如何解决这个问题吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:00:08.590

希望这可以帮助任何有此问题的人：

@App Delegate，添加这行代码

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
return UIInterfaceOrientationMaskAll; 
```

}

@你的观点，添加这行代码

```
- (NSUInteger)supportedInterfaceOrientations{
return UIInterfaceOrientationMaskLandscape; 
```

}

这将使照片选择器视图认为它具有 UIInterfaceOrientationMaskPortrait，但应用程序仍保持为横向！瞧！

# node.js - 超过 9 条记录的猫鼬抛出错误按日期排序

> ID：13341218
> 
> 赞同：1
> 
> 时间：2012-11-12T09:32:42.853
> 
> 标签：node.js, mongodb, mongoose

我正进入（状态

```
错误：sort() 的数据过多，没有索引

```

同时按升序排序。如果记录数超过 9，我只会收到此异常。有人可以告诉我我做错了什么吗？或任何解决方法？

我的排序语法是：

```
image.find({reviewed:true },null,{sort:{"submittedDate":-1}}, function (err, images){});

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:48:49.043

从这里的文档：[http](http://www.mongodb.org/display/DOCS/Indexes#Indexes-Using) ://www.mongodb.org/display/DOCS/Indexes#Indexes-Using {{sort%28%29}}withoutanIndex

> 如果要返回的数据集很小（在 2.0 版中小于 32 兆字节，在 1.8 及更早版本中小于 4 兆字节），您可以使用 sort() 按顺序返回数据而无需索引。对于这些情况，最好同时使用 limit() 和 sort()。

这 9 个文档有可能实际上大于 32 兆字节吗？或者，与以前的版本一样，超过 4 兆字节？

# database - oracle 和用户输入

> ID：13341219
> 
> 赞同：0
> 
> 时间：2012-11-12T09:32:42.640
> 
> 标签：database, oracle

所以我有点卡在我需要做的这个查询上，我不知道它甚至意味着什么。

我需要能够从名为 Vehicle_Details 的表中找到车辆编号，并检查它当前是否在我想使用它的时间段内使用，如下所述。

当安排新行程时，管理员必须找到在行程期间尚未使用的车辆。由于此查询将经常需要，因此可以轻松地针对任意开始和结束日期运行它很重要。因此，它应该使用替换变量，以便可以在运行时提供行程开始和结束日期。

确保在运行时只提示用户提供一次开始和结束日期。还要确保显示的任何车辆在指定的整个期间都可用 - 您必须在 where 子句中包含多个测试

任何代码都会有所帮助，但甚至可以链接到可以帮助我自己编写代码的东西，因为我不知道。

```
Example data from the three tables:
Trip_ID     Departure       Return_Date    Duration Registration
73180   07-FEB-12   08-FEB-12   1   PY09 XRH
73181   07-FEB-12   08-FEB-12   1   PY10 OPM
73182   07-FEB-12   10-FEB-12   3   PY56 BZT
73183   07-FEB-12   08-FEB-12   1   PY56 BZU
73184   07-FEB-12   09-FEB-12   2   PY58 UHF

Registration   Make          Model           Year
4585 AW        ALBION        RIEVER          1963
SDU 567M       ATKINSON      N/A             1974
P525 CAO       DAF           FT85.400        1996
PY55 CGO       DAF           FTGCF85.430     2005
PY06 BYP       DAF           FTGCF85.430     2006

Weight  Registration Body   Vehicle ID
20321   4585 AW     N/A      1
32520   SDU 567M    N/A      2
40000   P525 CAO    N/A      3
40000   PY55 CGO    N/A      4
40000   PY06 BYP    N/A      5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:23:44.340

您需要查找特定日期范围是否与任何预订相交。这是区间相交算法。考虑以下区间`[A,B]`和`[x,y]`：

```
-----------[xxxxxxxxxxx]-------------
           A           B

---------------------[xxxxxx]--------
                     x      y 
```

当且`[x,y]`仅`[A,B]`当：

1.  `B >= x`
2.  和`A <= y`

因此，您的查询将如下所示：

```
SELECT * 
  FROM registrations reg
 WHERE reg.registration = :searched_vehicle
   AND NOT EXISTS (SELECT NULL
                     FROM reservations res
                    WHERE res.registration = reg.registration
                      AND res.return_date >= :interval_start 
                      AND res.departure <= :interval_end) 
```

这是针对一辆车的。如果查询返回一行，则该车辆在给定的时间间隔内可用`[:interval_start, :interval_end]`。

# python - `zip` 和 `zip_longest` 之间是否存在中间地带

> ID：13341224
> 
> 赞同：7
> 
> 时间：2012-11-12T09:33:08.723
> 
> 标签：python

假设我有这三个列表：

```
a = [1, 2, 3, 4]
b = [5, 6, 7, 8, 9]
c = [10, 11, 12] 
```

是否有这样的内置函数：

```
somezip(a, b) == [(1, 5), (2, 6), (3, 7), (4, 8)]
somezip(a, c) == [(1, 10), (2, 11), (3, 12), (4, None)] 
```

行为介于`zip`和之间`zip_longest`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T09:40:50.333

不，没有，但是您可以轻松地结合[takewhile](http://docs.python.org/2/library/itertools.html#itertools.takewhile)和[izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)的功能来实现您想要的

```
from itertools import takewhile, izip_longest
from operator import itemgetter
somezip = lambda *p: list(takewhile(itemgetter(0),izip_longest(*p))) 
```

（如果第一个迭代器可能有评估为 False 的项目，您可以将 itemgetter 替换为 lambda 表达式 - 请参阅 @ovgolovin 的评论）

```
somezip = lambda *p: list(takewhile(lambda e: not e[0] is None,izip_longest(*p))) 
```

例子

```
>>> from itertools import takewhile, izip_longest
>>> from operator import itemgetter
>>> a = [1, 2, 3, 4]
>>> b = [5, 6, 7, 8, 9]
>>> c = [10, 11, 12]
>>> somezip(a,b)
[(1, 5), (2, 6), (3, 7), (4, 8)]
>>> somezip(a,c)
[(1, 10), (2, 11), (3, 12), (4, None)]
>>> somezip(b,c)
[(5, 10), (6, 11), (7, 12), (8, None), (9, None)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T09:37:22.510

```
import itertools as it

somezip = lambda *x: it.islice(it.izip_longest(*x), len(x[0]))

>>> list(somezip(a,b))
[(1, 5), (2, 6), (3, 7), (4, 8)]

>>> list(somezip(a,c))
[(1, 10), (2, 11), (3, 12), (4, None)] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T10:04:09.397

您的输出似乎受到第一个迭代器的输出的限制`it1`。所以我们可以`it1`按原样使用，并`it2`用无限产生的`None`迭代器和`zip`它们填充。

```
>>> from itertools import repeat,izip,chain
>>> somezip = lambda it1,it2: izip(it1,chain(it2,repeat(None)))

>>> list(somezip(a,b))
[(1, 5), (2, 6), (3, 7), (4, 8)]
>>> list(somezip(a,c))
[(1, 10), (2, 11), (3, 12), (4, None)] 
```

[`repeat(None)`](http://docs.python.org/2/library/itertools.html#itertools.repeat)`None`创建无限产生的迭代器。

[`chain`](http://docs.python.org/2/library/itertools.html#itertools.chain)胶水`it2`和`repeat(None)`。

`izip`一旦`it1`用尽就会停止屈服。

其他解决方案有一些缺陷（我在评论中留下了评论）。它们可能运行良好，但有一些输入可能会意外失败。

* * *

正如**glglgl**在评论中建议的那样，这个函数宁愿接受参数中可变数量的迭代器。

所以我更新了代码来工作：

```
from itertools import repeat,izip,chain,imap
somezip = lambda it1,*its: izip(it1,*imap(chain,its,repeat(repeat(None)))) 
```

测试：

```
>>> print(list(somezip(a,b)))
    print(list(somezip(a,c)))
    print(list(somezip(b,a,c)))

[(1, 5), (2, 6), (3, 7), (4, 8)]
[(1, 10), (2, 11), (3, 12), (4, None)]
[(5, 1, 10), (6, 2, 11), (7, 3, 12), (8, 4, None), (9, None, None)] 
```

`imap`尽管没有必要这样做，但我不得不在这里使用（因为参数稍后会被解包，所以很简单`map`）。原因是`map` [不接受不同长度的迭代器](https://stackoverflow.com/questions/13348263/map-on-iterators-of-different-length)`imap`，而在消耗最小的迭代器时停止。

因此，`imap`适用`chain`于除第一个迭代器和`chain`s之外的所有迭代器`repeat(None)`。为`its`我在`repeat`上面使用的每个迭代器提供服务`repeat(None)`（注意，这在其他项目中可能非常危险，因为外部`repeat`生成的所有对象都是同一个对象`repeat(None)`，所以最后它们所有的`chain`编辑迭代器共享它）。然后我解压缩`imap`对象以生成参数到`izip`，它返回值直到`it1`被消耗（因为`chain`ed`its`现在每个生成无限的值序列）。

请注意，所有操作都在纯 C 中工作，因此不涉及解释器开销。

为了阐明它的工作原理，我添加了以下详细说明：

```
def somezip(it1,*its): #from 0 to infinite iterators its
    # it1 -> a1,a2,a3,...,an
    # its -> (b1,b2,b3,...,bn),(c1,c2,c3,...,cn),...
    infinite_None = repeat(None) # None,None,None,...
    infinite_Nones = repeat(infinite_None) # infinite_None,infinite_None,... (share the same infinite_None)
    chained = imap(chain,its,infinite_Nones) # [(b1,b2,b3,...,bn,None,None,...),(c1,c2,c3,...,cn,None,None,...),...]
    return izip(it1,*chained) 
```

单线就是：

```
somezip = lambda it1,*its: izip(it1,*imap(chain,its,repeat(repeat(None)))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:43:08.463

定义自己的功能：

```
In [64]: def myzip(*args):
    lenn=len(args[0])
    return list(izip_longest(*[islice(x,lenn) for x in args],fillvalue=None))
   ....: 

In [30]: myzip(a,b)
Out[30]: [(1, 5), (2, 6), (3, 7), (4, 8)]

In [31]: myzip(b,c)
Out[31]: [(5, 10), (6, 11), (7, 12), (8, None), (9, None)]

In [32]: myzip(a,c)
Out[32]: [(1, 10), (2, 11), (3, 12), (4, None)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T10:41:59.240

这比其他的要长，但相对容易理解，如果这很重要的话。;-)

```
a = [1, 2, 3, 4]
b = [5, 6, 7, 8, 9]
c = [10, 11, 12]
def g(n): return xrange(n)  # simple generator

def my_iter(iterable, fillvalue=None):
    for i in iterable: yield i
    while True: yield fillvalue

def somezip(*iterables, **kwds):
    fillvalue = kwds.get('fillvalue')
    iters = [my_iter(i, fillvalue) for i in iterables]
    return [tuple(next(it) for it in iters) for i in iterables[0]]

print 'somezip(a, b):', somezip(a, b)
print 'somezip(a, c):', somezip(a, c)
print 'somezip(a, g(2)):', somezip(a, g(2))
print 'somezip(g(2), a):', somezip(g(2),a)
print 'somezip(a, b, c):', somezip(a, b, c)
print 'somezip(a, b, c, g(2)):', somezip(a, b, c, g(2))
print 'somezip(g(2), a, b, c):', somezip(g(2), a, b, c) 
```

输出：

```
somezip(a, b): [(1, 5), (2, 6), (3, 7), (4, 8)]
somezip(a, c): [(1, 10), (2, 11), (3, 12), (4, None)]
somezip(a, g(2)): [(1, 0), (2, 1), (3, None), (4, None)]
somezip(g(2), a): [(1, 1)]
somezip(a, b, c): [(1, 5, 10), (2, 6, 11), (3, 7, 12), (4, 8, None)]
somezip(a, b, c, g(2)): [(1, 5, 10, 0), (2, 6, 11, 1), (3, 7, 12, None), (4, 8, None, None)]
somezip(g(2), a, b, c): [(1, 1, 5, 10)] 
```

# asp.net - asp.net 中的日历控件问题

> ID：13341231
> 
> 赞同：1
> 
> 时间：2012-11-12T09:33:24.660
> 
> 标签：asp.net, calendar-control

我正在使用带有 ASP.NET 的日历控件来填充带有所选日期的文本框。选择日期时，应显示在标签中，但标签不显示所选日期。请帮忙。谢谢你。

这是我将日期放入标签的代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<script runat="server">

    protected void Calendar1_SelectionChanged(object sender, EventArgs e)
    {
        Label1.Text = Calendar1.SelectedDate.ToString();
    }
</script>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    MakeAppointment
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <form id="form1" runat="server" style="height: 388px">

    <h2>MakeAppointment<asp:Calendar ID="Calendar1" runat="server" 
            onselectionchanged="Calendar1_SelectionChanged"></asp:Calendar>
    </h2>

    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    </form>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:38:50.890

尝试指定`language="c#"`.

```
<script language="c#" runat="server">
protected void Calendar1_SelectionChanged(object sender, EventArgs e)
{
  Label1.Text = Calendar1.SelectedDate.ToString();
}
</script> 
```

只是一个建议，你应该去**[jQuery UI Datapicker](http://jqueryui.com/datepicker/)**

演示：[数据选择器](http://jqueryui.com/datepicker/)

代码示例：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Datepicker - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#datepicker" ).datepicker();
    });
    </script>
</head>
<body>

<p>Date: <input type="text" id="datepicker" /></p>

</body>
</html> 
```

# android - 在 Android 中更改 Dropbox 用户

> ID：13341233
> 
> 赞同：1
> 
> 时间：2012-11-12T09:33:38.077
> 
> 标签：android, dropbox, dropbox-api

我正在开发一个需要使用 DropBox 的应用程序，我第一次使用 DropBox，使用 android DropBox API 验证成功，但是当我尝试更改已通过身份验证的用户时，它说错误为 > Invalid User “Only a limited set的用户可以在此应用程序处于开发模式时接收访问令牌”。任何人都可以指导此错误消息的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:13:29.547

此消息表明您的应用处于开发模式，这意味着您只能链接注册它的帐户：

[Dropbox - 核心概念](https://www.dropbox.com/developers/start/core)

如果您还没有准备好申请生产，但需要与其他用户一起测试，请参见此处：

[与最多五个用户一起测试您的应用](https://www.dropbox.com/developers/blog/13)

# blackberry-10 - 解压从服务器下载的文件

> ID：13341234
> 
> 赞同：1
> 
> 时间：2012-11-12T09:33:41.277
> 
> 标签：blackberry-10

您好我正在开发一个应用程序来从服务器下载附件并使用 Blackberry 10 Cascades(QNX Momentics IDE) 读取这些文件。我已下载附件，但附件是 .Zip 文件。如何解压缩文件夹？谁有样品请分享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:28:41.953

我使用了[OSDaB Project](http://osdab.42cows.org/snippets/zip.php?mode=advanced)中的 PKZIP 2.0 兼容存档处理程序，它做得非常好。他们提供 Zip 和 UnZip 类。您还需要通过添加`-lz`到 .pro 文件中的 LIBS 变量来包含与已安装压缩库的链接：

```
LIBS += -lz 
```

示例代码：

```
 UnZip unzip;
        UnZip::ErrorCode ec = unzip.openArchive(fileName);
        if (ec != UnZip::Ok) {
            emit errorString(fileName + " could not open archive.");
        } else {
            QList<UnZip::ZipEntry> fileNames = unzip.entryList();

            ec = unzip.extractAll(dirName);
            if (ec != UnZip::Ok) {
                emit errorString(
                        newFileName + " could not extract data to "
                                + dirName);
            } else {
                UnZip::ZipEntry file;
                foreach(file, fileNames) {
                    // do something with file if needed.
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:41:01.553

您可以使用 quazip 库来解压缩存档，此处为 Blackberry 10 级联的 quazip 移植 [https://github.com/hakimrie/quazip](https://github.com/hakimrie/quazip)

此处示例函数使用 quazip 解压缩文件以将文件提取到 /data/ 文件夹中

```
bool ZipUtils::extractArchive(QString m_filename) {
// check if file exists
QFile file(m_filename);
if (!file.exists()){
    qDebug() << "file is not exists gan";
    return false;
}

bool result = true;
QuaZip *m_zip = new QuaZip(m_filename);

QString dataFolder = QDir::homePath();
QString bookname = m_filename.split("/").last().split(".").first();

QString dest = dataFolder + "/" + bookname;
QDir dir(dest);
if (!dir.exists()) {
    // create destination folder
    dir.mkpath(".");
}

qDebug() << "destination folder: " + dest;

m_zip->open(QuaZip::mdUnzip);

if (!m_zip) {
    return false;
}
QuaZipFile *currentFile = new QuaZipFile(m_zip);
int entries = m_zip->getEntriesCount();
int current = 0;
for (bool more = m_zip->goToFirstFile(); more; more =
        m_zip->goToNextFile()) {
    ++current;
    // if the entry is a path ignore it. Path existence is ensured separately.
    if (m_zip->getCurrentFileName().split("/").last() == "")
        continue;

    QString outfilename = dest + "/" + m_zip->getCurrentFileName();
    QFile outputFile(outfilename);
    // make sure the output path exists
    if (!QDir().mkpath(QFileInfo(outfilename).absolutePath())) {
        result = false;
        //emit logItem(tr("Creating output path failed"), LOGERROR);
        qDebug() << "[ZipUtil] creating output path failed for:"
                << outfilename;
        break;
    }
    if (!outputFile.open(QFile::WriteOnly)) {
        result = false;
        //emit logItem(tr("Creating output file failed"), LOGERROR);
        qDebug() << "[ZipUtil] creating output file failed:" << outfilename;
        break;
    }
    currentFile->open(QIODevice::ReadOnly);
    outputFile.write(currentFile->readAll());
    if (currentFile->getZipError() != UNZ_OK) {
        result = false;
        //emit logItem(tr("Error during Zip operation"), LOGERROR);
        qDebug() << "[ZipUtil] QuaZip error:" << currentFile->getZipError()
                << "on file" << currentFile->getFileName();
        break;
    }
    currentFile->close();
    outputFile.close();

    //emit logProgress(current, entries);
}

return result; 
```

}

请确保更新您的 pro 文件以包含 quazip 库（假设您的项目和 quazip 项目在同一个工作区/文件夹中）：

```
INCLUDEPATH += ../src  ../../quazip/src/
SOURCES += ../src/*.cpp
HEADERS += ../src/*.hpp ../src/*.h
LIBS += -lbbsystem
LIBS   += -lbbdata
LIBS += -lz

lupdate_inclusion {
    SOURCES += ../assets/*.qml
}

device {
CONFIG(release, debug|release) {
    DESTDIR = o.le-v7
    LIBS += -Bstatic -L../../quazip/arm/o.le-v7 -lquazip -Bdynamic
}
CONFIG(debug, debug|release) {
    DESTDIR = o.le-v7-g
    LIBS += -Bstatic -L../../quazip/arm/o.le-v7-g -lquazip -Bdynamic    
}
}

simulator {
CONFIG(release, debug|release) {
    DESTDIR = o
    LIBS += -Bstatic -L../../quazip/x86/o-g/ -lquazip -Bdynamic     
}
CONFIG(debug, debug|release) {
    DESTDIR = o-g
    LIBS += -Bstatic -L../../quazip/x86/o-g/ -lquazip -Bdynamic
}
} 
```

# jquery - 消失的孩子 '当位置：'固定'

> ID：13341235
> 
> 赞同：0
> 
> 时间：2012-11-12T09:33:48.133
> 
> 标签：jquery, css

我正在尝试实现一个“粘性”导航菜单 - 当导航栏在滚动时到达屏幕顶部时切换到固定位置的菜单项。

这在 Firefox 和 Chrome 中是一种享受，但在 Internet Explorer 中（在 9 中测试），当滚动到达某个点并且位置切换到固定时，所有 child`<li>`的消失（但`<ul>`它们包含在其中的位置保持不变尺寸。

我正在尝试使用 jQuery 来做到这一点（这是我拥有的代码）：

```
<script type="text/javascript">
    $(function() {

        // grab the initial top offset of the navigation 
        var sticky_navigation_offset_top = $('#navigation').offset().top;

        // our function that decides weather the navigation bar should have "fixed" css position or not.
        var sticky_navigation = function(){
            var scroll_top = $(window).scrollTop(); // our current vertical position from the top

            // if we've scrolled more than the navigation, change its position to fixed to stick to top, otherwise change it back to relative
            if ((scroll_top + 40) > sticky_navigation_offset_top) { 
                $('#navigation').css({ 'position': 'fixed', 'top':40, 'left':0 });
            } else {
                $('#navigation').css({ 'position': 'static', 'margin-top': 0 }); 
            }
        };

        // run our function on load
        sticky_navigation();

        // and run it again every time you scroll
        $(window).scroll(function() {
             sticky_navigation();
        }); 
    });
</script> 
```

不幸的是，我无法证明这一点，因为它是在我们需要登录的安全网站上实现的。希望我说得有道理。如有必要，我可以提供屏幕截图。

**编辑**：我应该提一下，当位置是`static`IE9 中正确显示的菜单项时。当我向下滑动菜单变为 时`fixed`，菜单项消失了！

**另一个编辑**：我第一次使用 jsfiddle.net 所以希望它可以工作[http://jsfiddle.net/ecm5L/](http://jsfiddle.net/ecm5L/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:01:32.047

嗨 Gareth，您的 js 代码没有问题，但 css 过滤器属性有问题只需替换它或尝试将过滤器代码删除到您的#navigation css 类：

这是你的：

```
#navigation {
    width:100%;
    height:48px;
    background: #27b4ec;
    background: -moz-linear-gradient(top, #37c6ff 0%, #27b4ec 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#37c6ff), color-stop(100%,#27b4ec)); 
    background: -webkit-linear-gradient(top, #37c6ff 0%,#27b4ec 100%); 
    background: -o-linear-gradient(top, #37c6ff 0%,#27b4ec 100%); 
    background: -ms-linear-gradient(top, #37c6ff 0%,#27b4ec 100%); 
    background: linear-gradient(to bottom, #37c6ff 0%,#27b4ec 100%); 

  //*****REMOVE THIS******>
   filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#37c6ff', endColorstr='#27b4ec',GradientType=0 );
  //*****REMOVE THIS******>

    -webkit-box-shadow:0 0 10px rgba(0,0,0,0.5);
    -moz-box-shadow:0 0 10px rgba(0,0,0,0.5);
    -o-box-shadow:0 0 10px rgba(0,0,0,0.5);
    box-shadow:0 0 10px rgba(0,0,0,0.5);
    margin-bottom:10px;
    min-width:1100px;
    z-index:10000;
 }

OR PASTE IT:

#navigation {
width:100%;
height:48px;
background: #27b4ec;
background: -moz-linear-gradient(top, #37c6ff 0%, #27b4ec 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#37c6ff), color-stop(100%,#27b4ec)); 
background: -webkit-linear-gradient(top, #37c6ff 0%,#27b4ec 100%); 
background: -o-linear-gradient(top, #37c6ff 0%,#27b4ec 100%); 
background: -ms-linear-gradient(top, #37c6ff 0%,#27b4ec 100%); 
background: linear-gradient(to bottom, #37c6ff 0%,#27b4ec 100%); 
-webkit-box-shadow:0 0 10px rgba(0,0,0,0.5);
-moz-box-shadow:0 0 10px rgba(0,0,0,0.5);
-o-box-shadow:0 0 10px rgba(0,0,0,0.5);
box-shadow:0 0 10px rgba(0,0,0,0.5);
margin-bottom:10px;
min-width:1100px;
z-index:10000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T23:24:39.637

我遇到了同样的问题，这似乎是一个错误，当页面内部发生太多事情时，您的计算机规格无法正确处理它，因为浏览器正在中间进行渲染，我能够通过将以下转换代码添加到固定位置元素 ( `transform: translateZ(0);-webkit-transform: translateZ(0);`) 来修复它，这会强制浏览器使用硬件加速来访问设备的图形处理单元 (GPU) 以使像素飞起来。另一方面，Web 应用程序在浏览器的上下文中运行，这使软件可以完成大部分（如果不是全部）渲染，从而减少了转换的动力。但是 Web 一直在迎头赶上，现在大多数浏览器供应商都通过特定的 CSS 规则提供图形硬件加速。

使用-webkit-transform: translate3d(0,0,0); 将为 CSS 过渡启动 GPU，使它们更平滑（更高的 FPS）。

**注意：** translate3d(0,0,0) 对您看到的内容没有任何作用。它在 x、y 和 z 轴上将对象移动 0px。这只是一种强制硬件加速的技术。

```
ul > li {
    position: fixed;
    /* MAGIC HAPPENS HERE */
    transform: translateZ(0);
    -moz-transform: translatez(0);
    -ms-transform: translatez(0);
    -o-transform: translatez(0);
    -webkit-transform: translateZ(0);
    -webkit-font-smoothing: antialiased; /* seems to do the same in Safari Family of Browsers*/
} 
```

# c# - 在不阻塞当前线程的情况下显示表单（对话框）（进度条示例）

> ID：13341241
> 
> 赞同：2
> 
> 时间：2012-11-12T09:34:12.043
> 
> 标签：c#, .net, multithreading, devexpress

我正在尝试创建一个 ProgressBar 表单，该表单使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)在显示进度条的同时在不同的线程上执行操作。

目前，我的 ProgressBar 类包含一个 ProgressBarControl，代码如下所示：

```
public partial class QTProgressBar : DevExpress.XtraEditors.XtraForm
{
    private BackgroundWorker m_backgroundWorker;
    private AutoResetEvent m_resetEvent;

    public QTProgressBar()
    {
        InitializeComponent();

        InitializeProgressBar();

        m_backgroundWorker = new BackgroundWorker();
        m_backgroundWorker.WorkerReportsProgress = true;
        m_backgroundWorker.WorkerSupportsCancellation = true;
        m_backgroundWorker.DoWork += new DoWorkEventHandler(m_backgroundWorker_DoWork);
        m_backgroundWorker.ProgressChanged += new ProgressChangedEventHandler(m_backgroundWorker_ProgressChanged);
        m_backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(m_backgroundWorker_RunWorkerCompleted);
        m_resetEvent = new AutoResetEvent(false);
    }

    void m_backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        m_resetEvent.Reset();

        CloseProgressBar();
    }

    void CloseProgressBar()
    {
        if (InvokeRequired)
        {
            Invoke( new MethodInvoker(CloseProgressBar));
            return;
        }
        this.Close();
    }

    void m_backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        Action operation = e.Argument as Action;
        operation();
    }

    public void StartAsyncTask(Action operation)
    {
        m_resetEvent.Set();
        m_backgroundWorker.RunWorkerAsync(operation);
    }
} 
```

现在，当我想显示一个弹出窗口时，我这样做：

```
QTProgressBar op = new QTProgressBar();
op.StartAsyncTask(() => LongDurationOperation(5, 5));
op.ShowDialog(); // i would like to move this inside the ProgressBar class.
//Thread gets blocked here until operation finishes. 
```

其中 LongDurationOperation 是：

```
public void LongDurationOperation(int n, int m)
{
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < n; j++)
        {
            Thread.Sleep(100);
        }
    }
} 
```

我想避免阻塞任何调用

```
ShowDialog() 
```

progressBar 类的方法。如果我将其移动到 ProgressBar 类线程中的任何位置，则会被阻塞并且操作不会执行。

是否可以避免阻塞调用 Showdialog() 方法的线程？

另外，你能给我一些关于如何改进这门课的提示吗？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:15:01.367

表单中存在两种不同的调用：

```
myForm.ShowDialog(); 
```

是阻止线程调用它的模态版本。它用于必须阻止其他操作发生的弹出窗口（如保存对话框）。

```
myForm.Show(IWin32Window owner); 
```

是非模态版本。它不会阻塞当前线程，但不会返回任何结果。但是，您必须将它的所有者传递给它，通常是这样的：

```
myForm.Show(this); 
```

# javascript - 使用 JavaScript/Jquery 在点击导航上添加标签？

> ID：13341245
> 
> 赞同：0
> 
> 时间：2012-11-12T09:34:39.143
> 
> 标签：javascript, jquery, html

我希望能够单击标签以导航到新页面，我不想使用链接来做到这一点，因为它必须有按钮的感觉！

html：

```
<label id="+"pagego"+" style="+"text-align:center;"+"font-size:x-large;"+">"+ data[i].ProcessName +"</label> 
```

我知道它看起来很奇怪，但是我在 jquery 的 for 循环中使用该标签来用我从 Web 服务获得的数据填充标签，现在我怎样才能让这个标签被点击，我看到人们在谈论*window.location.href*甚至还有一些人在谈论*$(#pagego).click(function(){*我在这方面很新，我想知道如何让这个标签将我导航到新页面！谢谢！

使用：cordova1.9/html5/javascript/jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:46:04.137

```
<label id="+"pagego"+" style="+"text-align:center;"+"font-size:x-large;"+">"+ data[i].ProcessName +"</label> 
```

请注意，一个 DOM 中的多个项目不能有相同的 ID。所以我们必须改变代码

```
<label id="+"pagego"+i+" style="+"text-align:center;"+"font-size:x-large;"+" onclick='redirectme()'>"+ data[i].ProcessName +"</label>

<script>
function redirectme()
{
location.href='example.html'
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:45:46.433

我建议，首先将您的样式移动到 CSS 块中。完成后，您可以执行类似的操作

CSS：

```
<style type="text/css">
    #pagego {
        text-align:center;
        font-size:x-large;
    }
</style> 
```

脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#pagego').value = data[i].ProcessName;

        $('#pagego').onclick(function(){
            // to submit the form:
            $('#formID').submit();

            // to navigate:
            document.location.href = "new page address";
        });
    }
</script> 
```

和你的html：

```
<input id="pagego"><input> 
```

# php - 显示/隐藏按钮 javascript

> ID：13341246
> 
> 赞同：1
> 
> 时间：2012-11-12T09:34:41.553
> 
> 标签：php, javascript, html

我正在使用 php，我正在尝试从数据库中检索一些数据。这些数据是带有一对字符串的数字列表。我只是简单地获取所有数据，并在一系列`<tr>`元素中使用一个回显了一系列`<td>`元素。它工作得很好。

现在我正在尝试创建一个过滤器来显示和隐藏一些元素。例如，起初我只想显示奇数，然后按我的按钮，我将显示所有数字。

有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:33:41.760

您可以使用 jquery 轻松完成：

```
$('table tr:even').hide();
$('#button-id').click(function()
{
   $('table tr:even').show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:28:34.450

我仍然不明白您在寻找什么，但这可能会有所帮助。

**javascript**

```
<script type="text/javascript">
$(document).ready(function() {
    $("#gdRows td").each(function() {
        var cellText = $(this).text();
        if ($.trim(cellText) == '') {
            $(this).css('background-color', 'cyan');
        }
    });

    $('#btnHide').click(function() {
        $("#gdRows tr td").each(function() {
            var cell = $.trim($(this).text());
            if (cell.length == 0) {
                $(this).parent().hide();
            }
        });
    });
    $('#btnReset').click(function() {
        $("#gdRows tr").each(function() {
            $(this).show();
        });
    });
});
</script> 
```

**css**

```
body
{
   font-family: Calibri;
   font-size : 11pt;
   padding : 10px;
}

th
{
   font-weight:bold;
   padding:5px;
   background-color: Lightgrey;
}

table
{
    width: 450px;
}
td
{
    width:30px;
    padding:5px;
}

input
{
   font-family: Calibri;
   font-size : 12pt;
} 
```

**HTML**

```
<table border="1" id="gdRows">
        <tr align="left">
            <th scope="col">ID</th><th scope="col">ProductName</th><th scope="col">Quantity</th><th scope="col">Price</th><th scope="col">Description</th>
        </tr><tr>
            <td>1</td>
    <td>Mouse</td>
    <td>10</td>
    <td>100</td>
    <td>Great Quality</td>
        </tr><tr>
            <td>2</td><td>Speaker</td><td>15</td><td>990</td><td>&nbsp;</td>
        </tr><tr>
            <td>3</td><td>Hard Drive</td><td>35</td><td>3580</td><td>500 GB available</td>
        </tr><tr>
            <td>4</td><td>RAM</td><td>22</td><td>399</td><td>&nbsp;</td>
        </tr><tr>
            <td>5</td><td>Keyboard</td><td>10</td><td>3500</td><td>Wireless</td>
        </tr><tr>
            <td>6</td><td>Wi-Fi Router</td><td>&nbsp;</td><td>3990</td><td>&nbsp;</td>
        </tr><tr>
            <td>7</td><td>LCD</td><td>62</td><td>3000</td><td>17 inch</td>
        </tr><tr>
            <td>8</td><td>Intel Processor</td><td>5</td><td>7000</td><td>&nbsp;</td>
        </tr><tr>
            <td>9</td><td>HeadPhones</td><td>&nbsp;</td><td>350</td><td>Great Quality</td>
        </tr><tr>
            <td>10</td><td>Monitor</td><td>25</td><td>1990</td><td>&nbsp;</td>
        </tr>
</table>
<br/>
<input type="button" id="btnHide" Value=" Hide Empty Rows " />
<input type="button" id="btnReset" Value=" Reset " /> 
```

现场版本：http: [//jsfiddle.net/jquerybyexample/4RpVv/](http://jsfiddle.net/jquerybyexample/4RpVv/)

# javascript - 当源关闭时，防止可嵌入的 iframe 将客户端关闭。

> ID：13341247
> 
> 赞同：0
> 
> 时间：2012-11-12T09:34:42.010
> 
> 标签：javascript, jquery, iframe

我有一个作为插件提供的可嵌入表单。我制作了一个可嵌入的 iframe，其他用户可以嵌入。我们托管在 EC2 上，最近 EC2 一直在下降。因此，当我们的站点因服务器或任何其他错误而出现故障时，嵌入 iframe 的站点也会出现故障。我们该如何预防呢？

# php - SQL 语法错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“-10,10”附近使用正确的语法

> ID：13341248
> 
> 赞同：0
> 
> 时间：2012-11-12T09:34:43.170
> 
> 标签：php, mysql, sql-delete

我有一个表，列出了数据库中的所有员工，但是当我使用删除所有员工时`$query = mysql_query("DELETE FROM $this->emp_tbl");`

我收到了这个错误：

> 成功删除！数据库失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“-10,10”附近使用正确的语法

作为测试以查看错误是否会消失，我尝试通过 phpmyadmin 添加一条记录，并且确实此错误消失了，它现在将显示 1 条记录。我将如何修复此错误，如果没有，仍然显示“空白表”记录找到了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:38:05.607

试试这个...对象变量可能无法解析

```
mysql_query("DELETE FROM {$this->emp_tbl}"); 
```

否则你为什么不能使用`Truncate`命令？

```
mysql_query("TRUNCATE TABLE {$this->emp_tbl}"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T10:30:11.097

我有同样的问题。我在官方文档中找不到有关此案例的任何信息，但请尝试：

*   不要在查询中使用“-”（用于值和表名）
*   使用 PDO。

# java - 如何通过本地网络向服务器发送请求

> ID：13341249
> 
> 赞同：1
> 
> 时间：2012-11-12T09:34:52.570
> 
> 标签：java, spring, jsp, tomcat, servlets

我做了一个服务器。它接收用户名并将其发送回用户。我希望我的服务器使用 tomcat 例如（localhost/test）在我的笔记本电脑上运行。现在我想使用java从本地网络中的另一台计算机向该服务器发送请求......？我已经使用 httpClient 库向 localhost 服务器发送请求。但是如何通过本地 notwork 向服务器发送请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:40:55.493

如果您的本地网络是在 TCP/IP 上配置的，那么您应该不会有任何问题。只需找到您的笔记本电脑的 IP 地址（例如 192.168.0.1），然后从使用 httpClient 库的客户端调用 192.168.0.1/test

如果您的笔记本电脑服务器位于防火墙后面，请不要忘记检查正确端口的权限。

# c# - 是否可以为gridview中的所有列设置格式日期？

> ID：13341250
> 
> 赞同：0
> 
> 时间：2012-11-12T09:34:54.193
> 
> 标签：c#, asp.net, gridview

属性`AutoGenerateColumns`设置在`true`.
带有日期的列可能有不同的索引。

```
 OracleDataAdapter adapter = new OracleDataAdapter();
        DataTable tableD = new DataTable();
        tableD.Locale = System.Globalization.CultureInfo.InvariantCulture;
        adapter.SelectCommand = oracleCom;
        adapter.Fill(tableD);
        tableResults.DataSource = tableD.AsDataView();
        tableResults.DataBind(); 
```

具有日期类型值的列是从 db 中的不同表中获取的。他们有不同的名字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:45:16.773

我会[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)用来格式化你的列。

```
protected void gridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DataRow row = ((DataRowView)e.Row.DataItem).Row;
        foreach (DataColumn col in row.Table.Columns)
        {
            if (col.DataType == typeof(DateTime))
            { 
                DateTime dt = row.Field<DateTime>(col);
                e.Row.Cells[col.Ordinal].Text = dt.ToString("D");
            }
        }
    }
} 
```

[**标准日期和时间格式字符串**](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

如果`AutoGenerateColumns`将设置为`false`您可以使用该[`DataFormatString`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)属性来`BoundFields`代替。

# mysql - 如何在 mysql 中创建具有变体列的视图

> ID：13341256
> 
> 赞同：0
> 
> 时间：2012-11-12T09:35:11.123
> 
> 标签：mysql, sql, view

我有一张`tbl_settings`总是只有一条记录的表。和其中的一个领域`show_messages_in_log`。另一个`table tbl_logs`存储所有日志。当然，`tbl_logs`有一个消息字段。

我需要一个视图来显示日志：

*   如果`tbl_settings.show_messages_in_log`是真的，显示`tbl_logs.message`，
*   如果`tbl_settings.show_messages_in_log`是假的，就不显示了`tbl_logs.message`。

任何机构可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:40:37.550

你不能。在关系数据库中，关系（表、视图）总是必须有固定数量的列。

您唯一能做的就是始终拥有该列，但在视图中将其显示为 NULL。为此，您需要连接两个表并在视图中使用 case 表达式：

```
case 
   when show_messages_in_log = 'true' then tbl_logs.message
   else null
end as message 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:52:11.640

也许只是加入表格，像这样

```
create table tbl_settings 
(show_messages_in_log boolean);

create table tbl_logs
(message varchar(200));

insert into tbl_logs
values ('msg1'), ('msg2');

insert into tbl_settings 
values (true);

select tbl_logs.message
from tbl_logs inner join tbl_settings on tbl_settings.show_messages_in_log = TRUE 
```

这将返回所有行。

```
update tbl_settings set show_messages_in_log = false;

select tbl_logs.message
from tbl_logs inner join tbl_settings on tbl_settings.show_messages_in_log = TRUE 
```

这将根本不返回任何行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:42:31.743

```
IF tbl_settings.show_messages_in_log = TRUE THEN tbl_logs.message
ELSE NULL
END IF 
```

# cordova - JQM 页面内容大小问题

> ID：13341257
> 
> 赞同：0
> 
> 时间：2012-11-12T09:35:15.570
> 
> 标签：cordova, jquery-mobile

![在此处输入图像描述](../Images/fb80478783be8cc4d0c9eb151fcf772e.png)所以当谈到 Jquery Mobile 开发时，我是一个真正的新手，我想知道是否有人可以帮助我理解 JQM 库的一个小方面。

我的问题与页面内容和 iOS 键盘有关。我有几页内容大小不一。例如，在一个页面上我有五个输入字段，而下一页我只有四个。当我使用 iOS 的“下一步”按钮在不同字段之间导航并最终到达最后一个字段时，页脚会自动出现在键盘上方，这正是我所需要的。

但是，在只有四个输入字段的下一页上，当我使用“下一步”按钮在字段之间导航并最终到达最后一个字段时，页脚不会直接出现在键盘上方，而是出现在上面，一旦键盘消失，最后一个输入字段和页脚之间就会产生一个空白。

任何想法为什么会发生这种情况？我猜它与页面内容有关，但我不确定。我附上了一张图片，向您展示停用键盘时会发生什么。

```
<div data-role="page" data-theme="f" id="some id">
        <div data-role="header">
            <a href="#some href" data-icon="arrow-l" data-direction="reverse" data-iconpos="notext"></a>
            <h1>Text</h1>
            <a href="#some href" data-icon="arrow-r" data-iconpos="notext"></a>
        </div>
<div data-role="content">
        <label for="some label">Text</label>
        <select name="some name" id="some id">
            <option value="Default">Select </option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>
        <label for="some label">Text:</label>
        <select name="some name" id="some id">
            <option value="Default">Select  Status</option>
            <option value="Some value">Text</option>
            <option value="Some value">Text</option>
            <option value="Some value">Text</option>
            <option value="Some value">Text</option>
            <option value="Some value">Text</option>
            <option value="Some value">Text</option>
        </select>
        <label for="some label">Text (YYYY-MM-DD):</label>
        <input type="date" name="some name" id="some id" value="" class="required"/>
        <label for="some label">Text (YYYY-MM-DD):</label>
        <input type="date" name="some name" id="some id value="" class="required"/>

    </div>
    <div data-role="footer" data-position="fixed" class="ui-btn-right" style="min-height: 42px;">
        <a href="#some href" data-icon="arrow-l" data-direction="reverse" data-iconpos="left" style="margin-left: 10px; margin-top: 5px">Done</a>
        <a href="#main_menu" data-icon="home" data-direction="reverse" data-iconpos="notext" style="float: right; margin-right: 10px; margin-top: 5px"></a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:33:47.133

这看起来与[iOS6、UIWebView 和 position:fixed](https://stackoverflow.com/questions/12529796/ios6-uiwebview-and-positionfixed/13410741)密切相关- 与您实际希望页脚移动不完全相同，但可能与高度更新的时间有关。

您可能可以通过覆盖 jquery mobile 从 javascript 所做的位置更改来解决此问题。该脚本在那里是因为 jquery mobile 还支持不原生处理固定定位的旧版浏览器。如果只需要支持最新版本的iOS，使用纯CSS可以获得更好的效果。

# c++ - 向量元素似乎没有连续存储

> ID：13341264
> 
> 赞同：1
> 
> 时间：2012-11-12T09:35:40.630
> 
> 标签：c++, vector

为什么最后的预期输出与以下代码中的实际输出不同？

```
#include<iostream>
#include<fstream>
#include<istream>
#include<sstream>
#include<vector>

using namespace std;

int main()
{
        vector<int> v;
        for(int ii = 0; ii < 4; ii++){
            v.push_back(0);
        }

        vector<vector<int>> twoDv;

        for(int ii = 0; ii < 5; ii++){
            twoDv.push_back(v);
        }

        cout<<"Expected Output : " << &twoDv[0][0] <<'\t'<< (&twoDv[0][0] + 3) <<'\t'<< (&twoDv[0][3] + 1)<<'\n';
        cout<<"Actual Output   : " << &twoDv[0][0] <<'\t'<< &twoDv[0][3] <<'\t'<< &twoDv[1][0] << '\n';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T09:39:46.493

`vector< vector< int > >`不是二维数组，如`int[5][5]`. 它是一个指向数组的指针数组。[^(（更准确地说，它包含一系列`std::vector`对象，其中包含指向整数的指针。）)]只有“行”是连续的。不同的行彼此不连续，因为它们可能存储在不同的 malloc'ed 内存块中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T09:41:11.563

A`vector`确实将其元素存储在连续内存中。但是 的元素`vector<vector<int>> twoDv;`是向量，而不是整数，并且整数在内部存储在连续内存中，**每个向量**。

![在此处输入图像描述](../Images/6cb06012129cc165ceb320914aff9d32.png)

考虑一个指针数组：

```
int* x[10]; 
```

`10`指针存储在连续内存中，但*它们指向的内容*不必在连续内存中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T09:42:09.040

标准并没有说`&twoDv[1][0]`等于`&twoDv[0][3] + 1`. 它说`&twoDv[1]`等于`&twoDv[0] + 1`， 那`&twoDv[0][1]`等于`&twoDv[0][0] + 1`。

假设一会儿等于`&twoDv[1][0]` *，*`&twoDv[0][3] + 1`然后你做了`twoDv[0].resize(5);`。突然我们发生冲突，`&twoDv[0][3] + 1`不能是 的地址`&twoDv[1][0]`，*也*不能是 的地址`&twoDv[0][4]`。因此，调整大小操作`twoDv[0]`必须使迭代器和对另一个 vector 元素的引用无效`twoDv[1]`。这将是非常不受欢迎的行为。

# objective-c - 调用 popToRootViewControllerAnimated 导致崩溃。我应该怎么做？

> ID：13341265
> 
> 赞同：0
> 
> 时间：2012-11-12T09:35:46.983
> 
> 标签：objective-c, ios, xcode, uinavigationcontroller, uistoryboard

该应用程序用于进行身体测量。用户可以说我要测量：腿、手臂和脖子，在设置选项卡和主选项卡中，有一个视图可以循环进行每次测量。
这是这样实现的：

我有选项卡控制器第一个选项卡有一个导航控制器故事板上的第一个视图控制器，并且有一个自身的 segue 板循环直到它具有所有测量值，然后它转到另一个控制器

问题是：如果用户更改了他们在设置选项卡中进行的测量，第一个选项卡需要完全重新加载，就像应用程序刚刚启动一样，清除整个导航堆栈等。

目前选项卡控制器在测量选项卡中的导航控制器上调用 popToRootViewControllerAnimated ，但这会导致崩溃。每个屏幕都有一个滑块控件和对 titleForRow:forComponent: 的调用正在被删除的视图上调用，导致它崩溃。

我究竟做错了什么？！

这是标签栏控制器代码

```
//  TabBarController.m
//

#import "TabBarController.h"
#import "TodaysMeasurementObject.h"
#import "AppDelegateProtocol.h"
#import "AddMeasurementViewController.h"
#import "ReadPerson.h"
#import "AppDelegate.h"

@interface TabBarController () <UITabBarControllerDelegate>

@end

@implementation TabBarController

bool resetWizardView = false;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.delegate = self;

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:)
                                                 name:UIDeviceOrientationDidChangeNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(measurementsSettingsUpdated:) name:@"MeasurementsSettingsUpdated" object:nil];

}

- (void) measurementsSettingsUpdated:(NSNotification *) notification
{
//    UINavigationController *navigationController = [self.viewControllers objectAtIndex:0];
//    AddMeasurementViewController *addMeasurement = [[AddMeasurementViewController alloc] init];
//    [navigationController setViewControllers: [[NSArray alloc] initWithObjects:addMeasurement, nil]];
    resetWizardView = YES;
}

- (void) viewDidAppear:(BOOL)animated
{
    if (![ReadPerson userHasRecords]) {
        [self setSelectedIndex:3];
    }
}

- (void)orientationChanged:(NSNotification *)notification
{
    // We must add a delay here, otherwise we'll swap in the new view
    // too quickly and we'll get an animation glitch
    [self performSelector:@selector(showGraphs) withObject:nil afterDelay:0];
}

- (void)showGraphs
{
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    if (deviceOrientation == UIDeviceOrientationLandscapeLeft && !isShowingLandscapeView)
    {
        [self performSegueWithIdentifier: @"toGraph" sender: self];
        isShowingLandscapeView = YES;
    }

    else if (deviceOrientation != UIDeviceOrientationLandscapeLeft && isShowingLandscapeView)
    {
        [self dismissModalViewControllerAnimated:YES];
        isShowingLandscapeView = NO;
    }
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if(interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
        [self performSegueWithIdentifier: @"toGraph" sender: self];
    }

    return false;
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    int tbi = tabBarController.selectedIndex;
    if (tbi == 0) {
        [[viewController view] setNeedsDisplay];
        if (resetWizardView) {
            [(UINavigationController*)[self.viewControllers objectAtIndex:0] popToRootViewControllerAnimated: NO]; // ******* POP CALLED HERE ******
            resetWizardView = false;
        }
    }
}

- (TodaysMeasurementObject*) theAppDataObject
{
    id<AppDelegateProtocol> theDelegate = (id<AppDelegateProtocol>) [UIApplication sharedApplication].delegate;
    TodaysMeasurementObject* theDataObject;
    theDataObject = (TodaysMeasurementObject*) theDelegate.theAppDataObject;
    return theDataObject;
}

- (BOOL)shouldAutorotate {
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

@end 
```

**更新**

```
- (void) measurementsSettingsUpdated:(NSNotification *) notification
{
    NSMutableArray *viewControllers = [[NSMutableArray alloc] initWithArray: self.viewControllers];
    UINavigationController *navigationController = [viewControllers objectAtIndex:0];
    AddMeasurementViewController *addMeasurement = [[AddMeasurementViewController alloc] init];
    [navigationController setViewControllers: [[NSArray alloc] initWithObjects:addMeasurement, nil]];

    [viewControllers setObject:navigationController atIndexedSubscript:0];

    self.viewControllers = viewControllers;
} 
```

并从 - tabBarController:didSelectViewController 中删除了代码：

但仍然是同样的错误。我认为问题在于它试图在视图被删除后获取滑动控件的值。但是视图的某些部分必须仍然存在......？无论如何要杀死它？还是让它活着？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:39:53.480

在您的代码中：

```
 [[viewController view] setNeedsDisplay];
    if (resetWizardView) {
        [(UINavigationController*)[self.viewControllers objectAtIndex:0] popToRootViewControllerAnimated: NO]; // ******* POP CALLED HERE ****** 
```

几点：

1.  您可能只需要`setNeedsDisplay`when `resetWizardView == NO`。我认为你根本不需要它来告诉你真相。

2.  我认为你想要定位`viewController`而不是`[self.viewControllers objectAtIndex:0]`最后一行。

`[(UINavigationController*)viewController popToRootViewControllerAnimated:NO]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:13:24.877

最后我放弃了直接解决这个问题。相反，我在视图控制器中捕获通知，然后用一个按钮弹出一个 UIAlertView。当用户按下这个 popToRootViewControllerAnimated 时被调用。我认为这实际上也是一种更好的用户体验，因为用户会收到有关其标签内容为何发生更改的消息。

希望这可以为将来节省一些时间/压力。

# iphone - 错误实例方法 -initwithFrame:imageName:imgname not found Objective-C

> ID：13341266
> 
> 赞同：0
> 
> 时间：2012-11-12T09:35:49.240
> 
> 标签：iphone, objective-c, ios, xcode, compiler-errors

我现在在 GalleryScrollView.m 中只收到 1 个错误。我想我声明画廊按钮是错误的。

错误是：

```
Instance Method -initwithFrame:imageName:imgname not found 
```

有了这条线：

```
 GalleryButton *btnAttachment = [[GalleryButton alloc] initWithFrame:CGRectMake(startX, startY, width, height) imageName:imgName]; 
```

我努力了`- (void) removeAttachment:(GalleryButton *)button imageName;`

但这似乎不起作用。下面是我的代码。

任何评论或答案都非常感谢。

谢谢。

**GalleryScrollView.h**

```
#import <UIKit/UIKit.h>
#import "AttachmentItem.h"
#import "GalleryButton.h"

@protocol GAlleryScrollDelegate;

@interface GalleryScrollView : UIView <GalleryButtonDelegate>

{

id <GAlleryScrollDelegate> delegate;

// MAIN WINDOW WHERE YOU CAN DRAG ICONS
UIView *mainView;

UIScrollView *_scrollView;
NSMutableArray *_attachments;

NSInteger *_totalSize;

UIImageView *_recycleBin;
CGRect recycleBinFrame;
}
@property (nonatomic, retain) id <GAlleryScrollDelegate> delegate;

@property (nonatomic, retain) UIView *mainView;
@property (nonatomic, retain) NSMutableArray *attachments;

@property (nonatomic, retain) UIImageView *recycleBin;
@property (nonatomic) CGRect recycleBinFrame;

- (void) addAttachment:(AttachmentItem *)attachment withImageNamed:(NSString *)imgName;
- (void) removeAttachment:(GalleryButton *)button;
- (void) reloadData;

@end

// EVENTS IF YOU WANT TO DISABLE SOME SCROLL ON DID PRESS AND ENABLE IT ON DROP
@protocol GAlleryScrollDelegate
- (void) didPressButton;
- (void) didDropButton;
@end 
```

**GalleryScrollView.m**

```
#import <QuartzCore/QuartzCore.h>
#import "GalleryScrollView.h"
#import "GalleryButton.h"

@implementation GalleryScrollView

@synthesize delegate;
@synthesize mainView;
@synthesize attachments = _attachments;
@synthesize recycleBin = _recycleBin, recycleBinFrame;

int padding = 0;

#pragma mark - INIT

- (id) init
{
self = [super init];
if (self) {
    // Initialization code here.
}
return self;
}

- (id) initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self){
    ;
}
return self;
}

- (void) awakeFromNib
{
// INIT ATTACHMENT ARRAY
if (_attachments == nil){
    _attachments = [[NSMutableArray alloc] init];
}

// SCROLL VIEW
UIScrollView *scrollTemp = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.frame.size.width-0, 450)];
_scrollView = scrollTemp;
_scrollView.backgroundColor = [UIColor clearColor];

// RECYCLE BIN
UIImageView *imageViewTemp = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"mozambique-wenge.png"]];
self.recycleBin = imageViewTemp;
self.recycleBin.frame = CGRectMake(0, 0, 320, 270);

[self addSubview:_scrollView];
[self addSubview:self.recycleBin];
[scrollTemp release];
[imageViewTemp release];
}

- (void) dealloc {
[super dealloc];

}

#pragma mark - ATTACHMENTS ADD / REMOVE

- (void) addAttachment:(AttachmentItem *)attachment withImageNamed:(NSString *)imgName
{
// SAVE ATTACHMENT
[_attachments addObject:attachment];

// RESIZE CONTENT VIEW FOR INSERTINT NEW ATTACHMENT
_scrollView.contentSize = CGSizeMake([_attachments count]*70, 70);

CGFloat startX = (70.0f * ((float)[_attachments count] - 1.0f) + padding);
CGFloat startY = 370;
CGFloat width = 64;
CGFloat height = 64;

GalleryButton *btnAttachment = [[GalleryButton alloc] initWithFrame:CGRectMake(startX, startY, width, height) imageName:imgName];
btnAttachment.tag = [_attachments count];
btnAttachment.scrollParent = _scrollView;
btnAttachment.mainView = self.mainView;
btnAttachment.delegate = self;

if (attachment.type == 1){
}else if (attachment.type == 2){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"mozambique-wenge"];
    [btnAttachment addSubview:imageView];
    [imageView release];
} else if (attachment.type == 3){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"recyclebin.png"];
    [btnAttachment addSubview:imageView];
    [imageView release];
}

[_scrollView addSubview:btnAttachment];
[btnAttachment release];

}

- (void) removeAttachment:(GalleryButton *)button
{

}

#pragma mark - RELOAD DATA

- (void) reloadData
{

}

#pragma mark - GALLERY BUTTON DELEGATE

-(void) touchDown
{
[self.delegate didPressButton];
}

-(void) touchUp
{
[self.delegate didDropButton];
_scrollView.scrollEnabled = YES;
}

-(BOOL) isInsideRecycleBin:(GalleryButton *)button touching:(BOOL)finished;
{
CGPoint newLoc = [self convertPoint:self.recycleBin.frame.origin toView:self.mainView];
CGRect binFrame = self.recycleBin.frame;
binFrame.origin = newLoc;

if (CGRectIntersectsRect(binFrame, button.frame) == TRUE){
    if (finished){
        [self removeAttachment:button];
    }
    return YES;
}
else {
    return NO;
}

}

@end 
```

**GalleryButton.m**

```
#import <QuartzCore/QuartzCore.h>
#import "GalleryButton.h"
#import "GalleryScrollView.h"

@implementation GalleryButton

@synthesize delegate;
@synthesize originalPosition = _originalPosition;
@synthesize mainView, scrollParent;
@synthesize images;

- (id)init
{
self = [super init];
if (self) {
    // Initialization code here.
}

return self;
}

- (id)initWithFrame:(CGRect)frame imageName:(NSString *)imgName
{
self = [super initWithFrame:frame];
if (self) {
    isInScrollview  = YES;

    CGRect myImageRect = CGRectMake(0, 0, 64, 64);
    images = [[UIImageView alloc] initWithFrame:myImageRect];

    // here's the change:
    // instead of a constant name, use the `imgName` parameter
    [images setImage:[UIImage imageNamed:imgName]];
    [self addSubview:images];

    self.backgroundColor = [UIColor blackColor];
    self.layer.borderWidth = 2;
    self.layer.borderColor = [UIColor blackColor].CGColor;
    self.layer.masksToBounds = YES;
    self.layer.cornerRadius = 5;
}
return self;
}
#pragma mark - DRAG AND DROP

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

[self.delegate touchDown];
self.originalPosition = self.center;
self.scrollParent.scrollEnabled = NO;

if (isInScrollview == YES) {
    CGPoint newLoc = CGPointZero;
    newLoc = [[self superview] convertPoint:self.center toView:self.mainView];
    _originalOutsidePosition = newLoc;

    //      [self.superview touchesCancelled:touches withEvent:event];
    [self removeFromSuperview];

    self.center = newLoc;
    [self.mainView addSubview:self];
    [self.mainView bringSubviewToFront:self];
    isInScrollview = NO;
}
else {
    ;
}

}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

[UIView beginAnimations:@"stalk" context:nil];
[UIView setAnimationDuration:.001];
[UIView setAnimationBeginsFromCurrentState:YES];

UITouch *touch = [touches anyObject];
self.center = [touch locationInView: self.superview];

[UIView commitAnimations];

if ([delegate isInsideRecycleBin:self touching:NO]){

}

}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

if ([delegate isInsideRecycleBin:self touching:YES]){

    CGRect myImageRect = CGRectMake(0, 0, 320, 300);
    images = [[UIImageView alloc] initWithFrame:myImageRect];
    [images setImage:[UIImage imageNamed:@"light-cherry.png"]];
    [self.mainView addSubview:images];

    UIImageView * animation = [[UIImageView alloc] init];
    animation.frame = CGRectMake(self.center.x - 32, self.center.y - 32, 40, 40);

    animation.animationImages = [NSArray arrayWithObjects:
                                 [UIImage imageNamed: @"iconEliminateItem1.png"],
                                 [UIImage imageNamed: @"iconEliminateItem2.png"],
                                 [UIImage imageNamed: @"iconEliminateItem3.png"],
                                 [UIImage imageNamed: @"iconEliminateItem4.png"]
                                 ,nil];
    [animation setAnimationRepeatCount:1];
    [animation setAnimationDuration:0.35];
    [animation startAnimating];
    [self.mainView addSubview:animation];
    [animation bringSubviewToFront:self.mainView];
    [animation release];
    ;
    [UIView beginAnimations:@"goback" context:nil];
    [UIView setAnimationDuration:0.4f];
    [UIView setAnimationBeginsFromCurrentState:YES];
    self.center = _originalOutsidePosition;
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector: @selector(animationDidStop:finished:context:)];
    //        loadingView.frame = CGRectMake(rect.origin.x, rect.origin.y - 80, rect.size.width, rect.size.height);
    [UIView commitAnimations];

} else{
    [UIView beginAnimations:@"goback" context:nil];
    [UIView setAnimationDuration:0.4f];
    [UIView setAnimationBeginsFromCurrentState:YES];
    self.center = _originalOutsidePosition;
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector: @selector(animationDidStop:finished:context:)];
    //        loadingView.frame = CGRectMake(rect.origin.x, rect.origin.y - 80, rect.size.width, rect.size.height);
    [UIView commitAnimations];

}

[self.delegate touchUp];

}

-(void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {
if ([animationID isEqualToString:@"goback"] && finished) {
    [self removeFromSuperview];
    self.center = _originalPosition;
    [self.scrollParent addSubview:self];
    isInScrollview = YES;
}
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:47:47.923

我认为您在这里面临的唯一问题是您没有声明您的`- (id) initWithFrame:(CGRect)frame imageName:(NSString *)imageName`方法。确保您在头文件中声明了此方法：`GalleryButton.h`具有相同的[签名](http://en.wikipedia.org/wiki/Type_signature)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:42:38.313

`initWithFrame`将方法编辑为

```
 - (id) initWithFrame:(CGRect)frame imageName:(NSString *)imageName
    {
    self = [super initWithFrame:frame];
    if (self){
        ;
    }
    return self;
    } 
```

不要忘记在 .h 文件中声明此方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:41:56.987

只需检查 GalleryButton.m 是否包含 initWithFrame 方法。另外，检查您是否在 GalleryButton.h 类中声明了方法签名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:43:03.837

检查类会非常有用`GalleryButton`，因为问题在于：

```
 GalleryButton *btnAttachment = [[GalleryButton alloc] initWithFrame:CGRectMake(startX, startY, width, height) imageName:imgName]; 
```

但是您似乎没有在该类上实现该方法。

# mercurial - Teamcity 忽略了 mercurial 不同分支的变化

> ID：13341271
> 
> 赞同：2
> 
> 时间：2012-11-12T09:36:23.833
> 
> 标签：mercurial, teamcity

我正在尝试使我的团队城市构建配置触发构建在我的 mercurial 存储库的任何分支中的任何新标签上。我添加了一个构建触发，如下所示：

```
+:/.hgtags
-:. 
```

我的问题是 team-city 仅检测当前提示分支的 .hgtags 更改。如果有人将新标签推送到另一个分支，team-city 似乎没有检测到 .hgtags 中的这种更改（因为它不是当前标签中的更改）并且不会触发新构建。

我该如何克服这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:22:38.743

来自[TeamCity Mercurial](http://confluence.jetbrains.net/display/TCD7/Mercurial)页面

> 从 TeamCity 7.1 开始，您可以在 VCS 根目录中的构建配置中配置要监控的分支：
> 
> **分支规范** 在此区域中列出您希望监控更改的所有分支。语法类似于结帐规则：+|-:branch_name ...（带有可选的 * 占位符）。请注意，只允许使用一个星号，并且每条规则都必须以新行开头。

# grails - 在 GRAILS 2.0.4 中，Bean 属性“eraseCredentialsAfterAuthentication”不可写或设置方法无效

> ID：13341274
> 
> 赞同：0
> 
> 时间：2012-11-12T09:36:41.233
> 
> 标签：grails, spring-security, grails-2.0

我已经从 grails 1.3.x 升级到 2.0.4，它没有运行。

```
 Caused by NotWritablePropertyException: Invalid property 'eraseCredentialsAfterAuthentication' of bean class [org.springframework.secur
ity.authentication.ProviderManager]: Bean property 'eraseCredentialsAfterAuthentication' is not writable or has an invalid setter metho
d. Does the parameter type of the setter match the return type of the getter?
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   619 | run . .  in java.lang.Thread 
```

我已经安装了插件，并在我的插件依赖项中`spring-security-core:1.2.7.3`添加了行。`compile ':spring-security-core:1.2.7.3'`

[正如它所说](http://grails.1312388.n4.nabble.com/Trying-to-upgrade-an-existing-project-from-grails-1-3-5-to-2-1-0-arrrrrg-td4637293.html)，我也删除了 .grails 目录。

这是什么原因。如何解决这个问题，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:51:29.973

看起来您拥有其中一个 Spring Security jar 的旧版本。此属性是在 中的`org.springframework.security.authentication.ProviderManager`类上设置的`spring-security-core-3.0.7.RELEASE.jar`。运行`grails war`并解压缩在目标目录中创建的 war 文件 - 您应该会在 WEB-INF/lib 文件夹中看到该 jar 的旧版本。

您是否正在使用任何其他可能会引入此 jar 的旧版本的插件？

# hadoop - hadoop中的JobTracker没有运行

> ID：13341275
> 
> 赞同：5
> 
> 时间：2012-11-12T09:36:46.140
> 
> 标签：hadoop

实际上我使用安装和配置了我的hadoop单集群

[http://wiki.apache.org/hadoop/Running_Hadoop_On_Ubuntu_Linux_%28Single-Node_Cluster%29](http://wiki.apache.org/hadoop/Running_Hadoop_On_Ubuntu_Linux_%28Single-Node_Cluster%29)

现在当我使用

NameNode - ( [http://localhost:50070)/](http://localhost:50070)/)（对于我的名称节点）它运行良好，但对于

JobTracker - ( [http://localhost:50030)/](http://localhost:50030)/) 它不工作

可能是什么情况

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:54:04.427

运行 $HADOOP_HOME/bin/start-all.sh 后，您可以键入命令“jps”来检查是否所有必要的 hadoop 进程都已启动。如果一切正常，应该是这样的：

```
hd0@HappyUbuntu:/usr/local/hadoop$ jps
18694 NameNode
19576 TaskTracker
19309 JobTracker
19225 SecondaryNameNode
19629 Jps
18972 DataNode 
```

您的 JobTracker 进程可能无法正常工作。所以先检查一下。如果是真的，那么您应该查看日志目录中的日志文件以了解更具体的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-17T08:54:14.457

*   hd0@HappyUbuntu:/usr/local/hadoop$ bin/hadoop jobtracker
*   您可能会看到有关凭据的错误。类型：
*   sudo chown -R hd0 /usr/local/hadoop
*   现在，输入“jps”并检查 JobTracker 是否正在运行
*   稍后，如果您获得“org.apache.hadoop.mapred.SafeModeException: JobTracker is in safe mode”，可能需要输入“bin/hadoop dfsadmin -safemode leave”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-29T03:30:21.933

在新版本的 hadoop 中，您可以监控正在执行的作业

`localhost:8088`

你会在哪里找到新 hadoop 的 webUI

链接：[https ://stackoverflow.com/a/24105597/1971660](https://stackoverflow.com/a/24105597/1971660)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T13:07:59.890

使用以下命令格式化您的名称节点。

```
$ <path_to_hadoop.x.xx>/bin/hadoop namenode -format 
```

这将解决您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-04T06:11:50.107

回复可能有点晚，但我希望对其他读者有用。

在 Hadoop 2.0 中，JobTracker 和 TaskTracker 不再存在，取而代之的是三个组件：

**ResourceManager**：一个调度程序，它在集群中的竞争应用程序之间分配可用资源。

**NodeManager**：在集群中的每个节点上运行，并从 ResourceManager 获取指导。它负责管理单个节点上可用的资源。

**ApplicationMaster**：框架特定库的实例，ApplicationMaster 运行特定的 YARN 作业并负责从 ResourceManager 协商资源，并与 NodeManager 一起执行和监视容器。

因此，只要您看到 ResourceManager（在 NN 上）和 NodeManager（在 DN 上）进程，您就可以开始了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T01:00:45.953

好吧.. Hadoop 使用的是什么发行版/版本？我已经很久没有使用 hadoop-site.xml 了。对于 Hadoop 1.0.x，它是 core-site.xml 和 mapred-site.xml。基本上，我认为 start-all 根本没有启动你的 jobtracker，因为它没有正确配置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-20T02:12:50.237

请尝试这个命令--- hadoop dfsadmin -safemode leave --- 更有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-08T18:21:34.300

开始

```
 $HADOOP_HOME/sbin/mr-jobhistory-daemon.sh --config $HADOOP_CONF_DIR start historyserver 
```

# php - 移动上传的文件问题

> ID：13341279
> 
> 赞同：0
> 
> 时间：2012-11-12T09:37:04.857
> 
> 标签：php

```
<?php
ini_set('display_errors',1);
error_reporting(E_ALL); 
    session_start();
    $targ_w = $targ_h = 150;
    $jpeg_quality = 90;
    $ext=$_GET['ext'];
    $src = $_GET['p'];

    $img_r = imagecreatefromjpeg($src);
    $dst_r = imagecreatetruecolor( $targ_w, $targ_h );

    imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
    $targ_w,$targ_h,$_POST['w'],$_POST['h']);

    unlink($src);
    imagejpeg($dst_r,$src,$jpeg_quality);
    rename($src,"img/temp_images/".$_SESSION['userid'].".".$ext);

    $result=move_uploaded_file(
                        "/img/temp_images/".$_SESSION['userid'].".$ext",

                        "/img/".$_SESSION['userid'].".$ext");
    if($result)
    echo "Success";
    else
    echo "<br>Fail";

?> 
```

1.  安全模式已关闭
2.  尽管输入了以下代码，但没有显示错误

    ini_set('display_errors',1); 错误报告（E_ALL）；

3.  系统在本地主机上运行

4.  一切正常，除了 move_uploaded_file() 函数
5.  代码是从 iframe 调用的。
6.  我也尝试过目录（**FILE**）和许多替代方案

请提出问题的解决方案或原因。我是否需要使用前 3 行在某处捕获错误/警告？我在 XAMPP 设置版本 2.5.8 上运行它。我假设因为我能够创建文件，所以我有权将文件移动到文件夹中。而且我猜在本地主机上没有权限的麻烦？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:42:03.790

您正在使用 GD 库创建新图像。而不是`move_uploaded_file()`尝试使用`copy`which 将文件从一个位置移动到另一个位置

[http://php.net/manual/en/function.copy.php](http://php.net/manual/en/function.copy.php)

代码示例，

```
if (copy($old_file, $new_file)) {
    unlink($old_file);
} 
```

# java - 使用 oracle jdbc 连接时如何获取数据库模式名称？

> ID：13341286
> 
> 赞同：8
> 
> 时间：2012-11-12T09:37:39.133
> 
> 标签：java, oracle, jdbc

我正在尝试使用 DatabaseMetaData.getTables() 方法获取所有数据库表。但是这种方法需要数据库模式名称模式。是否可以获得当前数据库连接的模式名称？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T09:44:23.593

当前连接的标准架构是您用于登录的用户名。因此，如果您的用户是`SCOTT`您必须使用`SCOTT`for `DatabaseMetaData.getTables()`。

您可以通过 获取用户名`DatabaseMetaData.getUserName()`。

但请记住，在 JDBC 驱动程序中比较模式/用户名是区分大小写的，并且通常用户名是大写的。

我不是 100% 确定是否`DatabaseMetaData.getUserName()`会在所有情况下以正确的大小写返回名称。可以肯定的是，您可能希望在使用该值之前执行一个 upperCase()。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T09:42:47.877

尝试使用 getCatalogs()。这是一个快速草稿

```
 public List<String> getDatabases(DBEnv dbEnv) {

        Connection conn = getConnection(dbEnv);
        List<String> resultSet = new ArrayList<String>();

        try {
            DatabaseMetaData metaData = conn.getMetaData();
            ResultSet res = metaData.getCatalogs();

            while (res.next()) {
                resultSet.add(res.getString("TABLE_CAT"));
            }

        } catch (SQLException e) {
            logger.error(e.toString());
        }

        return resultSet;

    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-01T02:13:32.423

从 Java 7 开始，`Connection`有一个`getSchema`方法：[https ://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html#getSchema--](https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html#getSchema--)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-16T16:08:41.737

不幸的是，答案是没有一致的解决方案。如果 John 有权访问 Sally.Table ... 查询将起作用，但 getUserName() 将返回 John 而不是 Sally 模式。对于 Oracle，用户拥有他们的模式，而其他人可能有权访问，该用户 ID 是该连接上的*默认*模式。

此外，getSchemaName() 和 getCatalog() 都不会返回模式名称。

@horse_with_no_name 对 Oracle 有最接近的答案，因为给定的用户名是（默认）模式名称，除非在对象引用中被覆盖，如图所示。

对于其他数据库，相同的规则并不适用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T09:56:47.037

您可以使用获取架构名称

```
Connection conn = 
DriverManager.getConnection("jdbc:oracle:thin:@server:port:SID",prop);    
DatabaseMetaData databaseMetaData = conn.getMetaData();
System.out.println("schema name >>>> "+databaseMetaData.getUserName()); 
```

# php - 如何在 PHP 和 SOAP 中接收传输/接收参数？

> ID：13341290
> 
> 赞同：0
> 
> 时间：2012-11-12T09:37:49.433
> 
> 标签：php, soap

我是 SOAP 新手，现在已经坚持了 2 天。基本上我不能从传递给函数的数组中“拉”参数。有谁知道为什么？我的 WSDL 文件在这里：[链接](http://eqa-webservice.denobi.org/EQA.wsdl)

我正在尝试这样调用函数：

```
$client = new SoapClient("http://mydomain.com/EQA.wsdl",array('cache_wsdl' => WSDL_CACHE_NONE));

$data = array('SearchValue' => 'road', 'Referrer' => 's' , 'BuyerOrganisation' => 'c');

echo $client->SearchByContractorName($data); 
```

谢谢你的帮助，

爱乐隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:48:08.360

尝试这个

```
$client->__call('SearchByContractorName', $data) 
```

# youtube - YouTube API 基于浏览器的上传，带有进度条

> ID：13341291
> 
> 赞同：3
> 
> 时间：2012-11-12T09:37:52.953
> 
> 标签：youtube, youtube-api, cors

我已经成功实现了“使用 Ajax 进度条的基于浏览器的 YouTube API 上传”（感谢 youtube API 团队最近对“uploads.gdata.youtube.com”的 CORS 支持）

但是，有一个障碍...在从 youtube API 返回的最终响应中，它尝试通过发送回位置重定向标头 (302) 来重定向浏览器...

虽然这可能在非 AJAX 场景下按预期工作，但在 AJAX 请求中是不允许的......

我看到了 3 种可能的解决方案，其中任何一种都可以正常工作......

1.  如果 youtube API 允许简单地取回刚刚上传的视频的“视频 ID”，而无需重定向到任何地方，这对每个人来说都会变得更加简单和容易......我忽略的API？

2.  或者在 AJAX 中有没有办法告诉请求，而不是遵循重定向标头？

3.  或者有什么方法可以“允许”AJAX 请求场景中的跨域重定向？（重定向由 youtube.com 发起，而用户在另一个域上，因此存在跨域重定向问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T00:05:07.880

GData API 的 v1/v2 将不支持此功能。

对于 YouTube 数据 API v3，我在 https://youtube-api-samples.googlecode.com/git/yt-upload-javascript/index.html 有一个粗略但有效的示例[（](https://youtube-api-samples.googlecode.com/git/yt-upload-javascript/index.html)源文件位于[https： //code.google.com/p/youtube-api-samples/source/browse/#git%2Fyt-upload-javascript](https://code.google.com/p/youtube-api-samples/source/browse/#git%2Fyt-upload-javascript)）显示上传流程，使用 Google+ 登录按钮处理 OAuth 2（您可以使用如果您愿意，可以使用普通的 OAuth 2 浏览器客户端流程）并带有进度指示器。它还展示了如何在上传后轮询视频处理状态，并在处理后将生成的视频嵌入页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T15:19:54.170

这是一个已知[问题](http://code.google.com/p/gdata-issues/issues/detail?id=4050)，应该修复，但实际上并没有修复。基于浏览器的上传方法（仅在 V2 上可用）不完全支持 CORS。您唯一的选择是通过您的服务器代理视频上传（很可能）或要求用户注册一个谷歌帐户并登录以使用 V3 API 上传视频（不好）。

# c++ - 通过更改代码格式来计算结构向量中包含的双变量的平均值的不同结果？

> ID：13341292
> 
> 赞同：6
> 
> 时间：2012-11-12T09:37:59.027
> 
> 标签：c++, image-processing, opencv

我目前正在与 OpenCV/C++ 的一个非常奇怪的行为作斗争。这就是我正在做的事情：

更新1：这里有更多信息：

我计算一组像素的梯度方向并将它们存储在`double`一个自我声明的字段中`struct`。结构元素存储在向量中。

```
myfunct1() {
    (...)
    c.grad_orientation = (sum_ori / highgrads.size()) + M_PI; // +M_PI because i just  want to rotate the angle around 180°.
    (...)
    my_struct_vector.push_back(c);
} 
```

后来我将几个`c`存储在一个向量中，并想估计每个`grad_orientation`存储在向量的每个结构元素中的平均值，如下所示：

```
myfunct0() {
    myfunct1(); //adds element to the my_struct_vector
    (...)
    int n = 0;
    double total_ori = 0.0;
    for (uint i = 0; i < my_struct_vector.size(); ++i) {
        total_ori += my_struct_vector[i].grad_orientation;
        n++;
    }

    azimuth = (total_ori / n);
    cout << "Average: " << azimuth * 180/M_PI << endl; // print out in degrees
} 
```

现在是有趣的部分：如果我在某些情况下这样做，`cout`打印`215.963`。这是我最常得到的结果（正是这个结果）。在某些情况下，如果我添加上面命名的这些矩阵，或者（是的，真的）如果我将结构中的双字段移动到`grad_orientation`更高的一列，我得到的代码`223.442`。所以这两个结果在代码中的区别*只有*以下几点：

```
struct my_struct {

std::vector<cv::Point> contour_shadow;
std::vector<cv::Point> contour_light;
cv::RotatedRect rect;
cv::Point pf; 
cv::Point pc;
double grad_orientation; // this line moved one column down, beneath "grad_flag" results in a differing result.
bool grad_flag;
double grad_magnitude; 
```

};

打印的结果不仅取决于结构声明中列的位置，还取决于我更改代码的不同部分时。

这可能与双精度有关，但是如果我移动代码列，为什么它会改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:36:17.017

好的，感谢 Rolle 帮助我解决这个问题。我希望可以回答我自己的问题只是为了标记它已回答？
问题确实是在结构内部使用了未初始化的内存和布尔标志（在错误的决定之后）（如果未初始化，当然不是零）。很明显的事情，但是代码中的行交换（甚至在结构之外！）导致错误（但不知何故非随机）值的事实让我有点困惑。

请参阅此处[C++ 结构的成员是否默认初始化为 0？](https://stackoverflow.com/questions/1069621/are-members-of-a-c-struct-initialized-to-0-by-default)

# javascript - Javascript 中的对象说明符

> ID：13341293
> 
> 赞同：14
> 
> 时间：2012-11-12T09:38:00.613
> 
> 标签：javascript, function, object

在 Douglas Crockford 的书“Javascript: The Good Parts”中，他在将值传递给新对象时提到了对象说明符。本质上，他建议传递一个包含参数的对象，而不是按特定顺序将参数传递给函数，如下所示：

```
var myObject = someFunction({a: 1, b: 2, c: 3}); 
```

然而，没有解释的是如何在这些参数通过后处理这些参数。而不是执行以下操作来设置默认值：

```
function someFunction(params){
    this.a = params.a || 0; 
    this.b = params.b || 0;
    ...
} 
```

处理大量参数而又不那么冗长的另一种方法是什么？

* * *

**编辑：**看看下面的答案，使用 for-in 循环是一个不错的选择。在为每个属性设置不同的默认值时，还有什么方法可以做到这一点？有没有办法创建一个具有各种默认值的对象并与之进行比较？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T23:27:11.290

通常它是使用一个`defaults`对象来完成的，如果参数中不存在属性，您可以从中复制属性。该对象可能是私有的或可供公众使用以进行配置。

```
var defaults = { a:null, b:1, ...};
function someFunction(params) {
    for (var prop in defaults)
        if (prop in params)
            this[prop] = params[prop];
        else
            this[prop] = defaults[prop];
} 
```

或者

```
function someFunction(custom) {
    var params = { a:null, b:1, ...};
    for (var prop in custom)
        params[prop] = custom[prop];
    // now use params
} 
```

有时`custom/params`，传递给函数的对象本身也会被扩展，但是在文档中应该明确提到该对象可以被修改：

```
var defaults = { a:null, b:1, ...};
function someFunction(params) {
    // modifies params object!
    for (var prop in defaults)
        if (! (prop in params))
            params[prop] = defaults[prop];
    // now use params
} 
```

如果您正在使用带有`extend`函数的库，则通常可以将此初始化缩短为

```
 var params = $.extend({}, defaults, custom);
    // create an empty object, copy the defaults, and overwrite with custom properties 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T09:42:10.327

如何使用**for-in**循环

```
function someFunction(params){

    for(var key in params){
       if( params.hasOwnProperty(key){
           var def = null;
           if(key == 'a' || key == 'b'){
              def = 10;
           }
           if(key == 'c' || key == 'd'){
              def = undefined;
           }
           this[key] = params[key]  || def ;
       }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:41:43.730

循环遍历作为参数传递的对象中的字段，将每个字段创建为 this 对象上的字段。

```
function someFunction(params){
   for(x in params){
     this[x] = params[x];
   }
} 
```

工作示例：http: [//jsfiddle.net/59kzD/](http://jsfiddle.net/59kzD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-31T01:35:14.607

Bergi的扩展答案： `var params = $.extend({}, defaults, custom);`

我们现在可以`Object.assign({}, defaults, custom)`在没有任何库的情况下在 ES6 中使用。

# c++ - 从 GPU 复制到 CPU 比从 CPU 复制到 GPU 慢

> ID：13341295
> 
> 赞同：5
> 
> 时间：2012-11-12T09:38:07.073
> 
> 标签：c++, performance, parallel-processing, cuda, gpu

我已经开始学习cuda一段时间了，我有以下问题

看看我在下面是怎么做的：

**复制 GPU**

```
int* B;
// ...
int *dev_B;    
//initialize B=0

cudaMalloc((void**)&dev_B, Nel*Nface*sizeof(int));
cudaMemcpy(dev_B, B, Nel*Nface*sizeof(int),cudaMemcpyHostToDevice);
//...

//Execute on GPU the following function which is supposed to fill in 
//the dev_B matrix with integers

findNeiborElem <<< Nblocks, Nthreads >>>(dev_B, dev_MSH, dev_Nel, dev_Npel, dev_Nface, dev_FC); 
```

**再次复制CPU**

```
cudaMemcpy(B, dev_B, Nel*Nface*sizeof(int),cudaMemcpyDeviceToHost); 
```

1.  将数组 B 复制到 dev_B 只需要几分之一秒。但是将数组 dev_B 复制回 B 需要很长时间。
2.  findNeiborElem 函数涉及每个线程的循环，例如它看起来像这样

    ```
    __ global __ void findNeiborElem(int *dev_B, int *dev_MSH, int *dev_Nel, int *dev_Npel, int *dev_Nface, int *dev_FC){

        int tid=threadIdx.x + blockIdx.x * blockDim.x;
        while (tid<dev_Nel[0]){
            for (int j=1;j<=Nel;j++){
                 // do some calculations
                 B[ind(tid,1,Nel)]=j// j in most cases do no go all the way to the Nel reach
                 break; 
            }
        tid += blockDim.x * gridDim.x; 
        }
    } 
    ```

非常奇怪的是，将 dev_B 复制到 B 的时间与 j 索引的迭代次数成正比。

例如，如果`Nel=5`那么时间大约是`5 sec`。

当我增加的`Nel=20`时间大约是`20 sec`.

我希望复制时间应该独立于需要分配 Matrix 值的内部迭代`dev_B`。

此外，我希望从 CPU 复制相同矩阵的时间将具有相同的顺序。

你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:01:49.140

您应该使用事件，而不是使用 clock() 来测量时间：

对于事件，您将拥有如下内容：

```
 cudaEvent_t start, stop;   // variables that holds 2 events 
  float time;                // Variable that will hold the time
  cudaEventCreate(&start);   // creating the event 1
  cudaEventCreate(&stop);    // creating the event 2
  cudaEventRecord(start, 0); // start measuring  the time

  // What you want to measure
  cudaMalloc((void**)&dev_B, Nel*Nface*sizeof(int));
  cudaMemcpy(dev_B, B, Nel*Nface*sizeof(int),cudaMemcpyHostToDevice);

  cudaEventRecord(stop, 0);                  // Stop time measuring
  cudaEventSynchronize(stop);               // Wait until the completion of all device 
                                            // work preceding the most recent call to cudaEventRecord()

  cudaEventElapsedTime(&time, start, stop); // Saving the time measured 
```

**编辑**：附加信息：

“内核启动在完成之前将控制权返回给 CPU 线程。因此，您的计时结构正在测量内核执行时间以及第二个 memcpy。当在内核之后对副本计时时，您的计时器代码将立即执行，但是cudaMemcpy 正在等待内核在启动之前完成。这也解释了为什么您的数据返回时间测量似乎因内核循环迭代而异。它还解释了为什么花在内核函数上的时间“可以忽略不计”。归功于[罗伯特·克罗维拉](https://stackoverflow.com/users/1695960/robert-crovella)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:52:53.603

至于你的第二个问题

```
 B[ind(tid,1,Nel)]=j// j in most cases do no go all the way to the Nel reach 
```

在 GPU 上执行计算时，由于同步的原因，每个完成工作的线程都不会执行任何计算，直到同一个工作组中的所有线程都完成。

*换句话说，您需要执行此计算的时间将是最坏情况下的时间，如果大多数*线程没有一路下降也没关系。

我不确定你的第一个问题，你如何测量时间？我对 cuda 不太熟悉，但我认为当从 CPU 复制到 GPU 时，实现会缓冲您的数据，隐藏所涉及的有效时间。

# graph - 如何在图表中设置默认系列/样式？

> ID：13341298
> 
> 赞同：3
> 
> 时间：2012-11-12T09:38:12.540
> 
> 标签：graph, charts, axapta, dynamics-ax-2012

在 Ax2012 中使用图表，我工作正常。但是我想更改它在启动时显示的图形类型，例如“样条”图表，而不是默认的“列”图表。

这就是我现在拥有的：http: [//i.stack.imgur.com/RyR9v.png](http://i.stack.imgur.com/RyR9v.png)

这就是我想要的：http: [//i.stack.imgur.com/4cIIO.png](http://i.stack.imgur.com/4cIIO.png)

这是我的一些基本代码：

```
Graphics    graphics;
Microsoft.Dynamics.AX.Framework.Client.Controls.ChartToolBar chartToolbarControl1;
#MACROLIB.ChartFx
;

chartToolbarControl1 = chartToolbarControlHostChart.control();
chartToolbarControl1.set_ChartControl(Chart.control());

graphics = new graphics();
graphics.ManagedHostToControl(Chart);

graphics.parmCreateType(#ct_cluster| #cT_tool);
Graphics.parmSeriesType(#line);

graphics.create(); 
```

在此代码之后，我加载所有数据并显示图表。这可行，但我希望它以样条图的形式开始。这可以在加载后通过使用图表上方的图表控件并选择样条类型轻松完成，但我无法使用此设置加载图表。

如果我尝试使用 Graphics.parmSeriesType(#line); （或#pie 或其他）我的代码中没有错误，但是当我运行它时，我得到了错误：

> 无法获得空值。

我已经尝试过使用其中的几个宏，但它们都会产生相同的错误，除非我使用#series_point。我也尝试只插入 1-25 的常规整数，看看这是否有效，但它们给了我同样的错误。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:16:27.350

我查看了`Graphics`类和`ChartFX`宏，发现了列样式的设置方式和位置。要设置您自己的图表样式并遵循 AX 中的当前模式，请尝试以下操作：

1.  通过搜索此列表查找`SeriesChartType`枚举整数值：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.seriescharttype.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.seriescharttype.aspx)（此列表按顺序排列，为 0-基于。样条是枚举值 4)。

2.  `ChartFX`在like中为此值创建一个宏`#DEFINE.SERIES_SPLINE(4)`。`ChartFX`宏中已经定义了像这样的三个值（用于点、条形和柱形） 。

3.  修改`classDeclaration`类的`Graphics`以添加另一个宏：`#DEFINE.SeriesChartTypeEnum_Spline("Spline")`

4.  修改类的`setChartType`方法`Graphics`。在方法中存在的当前`if`语句之后，添加以下内容：

    ```
    else if (seriesType == #SERIES_SPLINE)
    {
        newChartType = ClrInterop::parseClrEnum(#SeriesChartTypeEnum, #SeriesChartTypeEnum_Spline);
    } 
    ```

5.  现在你可以回到你原来的代码示例，代替`Graphics.parmSeriesType(#line);`, 把`Graphics.parmSeriesType(#SERIES_SPLINE);`

# xml - 如何获取不同的值节点 XML

> ID：13341305
> 
> 赞同：4
> 
> 时间：2012-11-12T09:38:41.440
> 
> 标签：xml, xpath, distinct

我是 XML 新手，希望对您有所帮助。我有以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
    <Students> -<Student Id="001">
        <Name>Peter</Name>
        <LastName>Kohen</LastName> -<Courses> -<Course Id="01">
                <Name>C#</Name>
            </Course> -<Course Id="02">
                <Name>Java</Name>
            </Course>
        </Courses>
    </Student> -<Student Id="002">
        <Name>Nick</Name>
        <LastName>Nikes</LastName> -<Courses> -<Course Id="02">
                <Name>Java</Name>
            </Course> -<Course Id="03">
                <Name>Oracle</Name>
            </Course>
        </Courses>
    </Student> -<Student Id="003">
        <Name>Rafi</Name>
        <LastName>rafifa</LastName> -<Courses> -<Course Id="02">
                <Name>Java</Name>
            </Course> -<Course Id="03">
                <Name>Oracle</Name>
            </Course>
        </Courses>
    </Student> -<Student Id="004">
        <Name>Yosi</Name>
        <LastName>Koen</LastName> -<Courses> -<Course Id="04">
                <Name>SQL</Name>
            </Course> -<Course Id="03">
                <Name>Oracle</Name>
            </Course>
        </Courses>
    </Student>
</Students> 
```

我需要知道两件事：

1.  所有课程
2.  以及每门课程有多少学生学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:47:05.737

***纯*****XPath *1.0***：
课程：

```
//Course[not(preceding::Course/@Id = @Id)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T13:29:25.457

> 我需要知道两件事：1.所有课程

**使用**：

```
/*/*/Courses/Course[not(Name = preceding::Course/Name)] 
```

> 2.每门课程有多少学生。

**对于给定的课程使用**：

```
count(/*/Student[Courses/Course/@Id = $vCourseId]) 
```

where`$vCourseId`必须替换为实际的课程 ID。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*/*/Courses/Course[not(Name = preceding::Course/Name)]"/>
     ===============
     <xsl:for-each select=
     "/*/*/Courses/Course[not(Name = preceding::Course/Name)]">

     <xsl:variable name="vCourseId" select="@Id"/>

     Course Id = <xsl:value-of select="@Id"/>, Students = <xsl:text/>
     <xsl:value-of select="count(/*/Student[Courses/Course/@Id = $vCourseId])"/>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Students> -
    <Student Id="001">
        <Name>Peter</Name>
        <LastName>Kohen</LastName> -
        <Courses> -
            <Course Id="01">
                <Name>C#</Name>
            </Course> -
            <Course Id="02">
                <Name>Java</Name>
            </Course>
        </Courses>
    </Student> -
    <Student Id="002">
        <Name>Nick</Name>
        <LastName>Nikes</LastName> -
        <Courses> -
            <Course Id="02">
                <Name>Java</Name>
            </Course> -
            <Course Id="03">
                <Name>Oracle</Name>
            </Course>
        </Courses>
    </Student> -
    <Student Id="003">
        <Name>Rafi</Name>
        <LastName>rafifa</LastName> -
        <Courses> -
            <Course Id="02">
                <Name>Java</Name>
            </Course> -
            <Course Id="03">
                <Name>Oracle</Name>
            </Course>
        </Courses>
    </Student> -
    <Student Id="004">
        <Name>Yosi</Name>
        <LastName>Koen</LastName> -
        <Courses> -
            <Course Id="04">
                <Name>SQL</Name>
            </Course> -
            <Course Id="03">
                <Name>Oracle</Name>
            </Course>
        </Courses>
    </Student>
</Students> 
```

**评估两个 XPath 表达式（每门课程重复第二个），并将这些评估的结果复制到输出**：

```
<Course Id="01">
   <Name>C#</Name>
</Course>
<Course Id="02">
   <Name>Java</Name>
</Course>
<Course Id="03">
   <Name>Oracle</Name>
</Course>
<Course Id="04">
   <Name>SQL</Name>
</Course>
     ===============

     Course Id = 01, Students = 1

     Course Id = 02, Students = 3

     Course Id = 03, Students = 3

     Course Id = 04, Students = 1 
```

# c# - 全球地址列表的asp.net快速查询

> ID：13341306
> 
> 赞同：1
> 
> 时间：2012-11-12T09:38:47.287
> 
> 标签：c#, asp.net, ldap, gal

我需要做的是实现从网页查询GAL。我尝试了标准方式（使用 Querying LDAP `DirectoryServices`），但由于 GAL 中有大量记录（大约 150 000），它对我没有多大帮助。我需要的是获取以下查询的用户信息：

```
(&(objectCategory=person)(objectClass=user)(|(SAMAccountName=*{0}*)(displayname=*{0}*)(userprincipalname=*{0}*))), 
```

where`{0}`代表我从用户那里获得的数据。

Outlook 做这些事情的速度非常快。我猜它在某处存储数据，并以某种方式与 GAL 同步。

我想做的是维护 GAL 的同步副本（我只需要 3 个字段），但我不知道如何为“新”项目生成查询，例如上周添加的用户。

有没有办法获得这样的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:50:47.263

我建议弄清楚如何使 LDAP 查询响应，因为我非常怀疑 Outlook 缓存这些数据。您可能希望将[不明确的名称解析](http://support.microsoft.com/kb/243299?wa=wsignin1.0)作为起点。

话虽如此，您想在搜索`whenChanged`属性或`whenCreated`属性时添加一个参数。您可以查看[本文](http://blogs.technet.com/b/heyscriptingguy/archive/2006/01/25/how-can-i-get-a-list-of-all-the-objects-that-have-been-added-to-active-directory-since-a-specified-date.aspx)以了解如何从这些属性之一进行搜索。

# javascript - 在不嵌套事件侦听器的情况下侦听数组中对象的更改

> ID：13341307
> 
> 赞同：0
> 
> 时间：2012-11-12T09:38:49.027
> 
> 标签：javascript, jquery, event-bubbling, event-listener

（免责声明：这个问题比标题所暗示的要简单得多！）

我的程序架构中再次出现一个问题，即监听模型的更改。

我已经设置了一些集合（很像 in `Backbone.js`），它们只是围绕数组构建的轻量级类。该集合是模型的集合。当用户对模型进行更改时，我总是以可怕的嵌套事件告终。这是我试图避免的典型、简单的场景：

```
$("#user-details").on("click", "#save", onSaveClick);

function onSaveClick()
{       
    var givennames = $("#givenname").val(),

    // Get the model from the collection
    var user = users.get($(this).attr("data-id"));

    // set the property
    user.set("GivenNames", givennames);

    // listen for the save event
    $(user).on("save", function(){
        // Alert the view
    });

    user.save();    // save event triggers a "save" event on the model
} 
```

如果同一用户被保存两次，则事件会被多次添加/触发。有没有更好的模式呢？

事件是否应该通过集合冒泡并以这种方式处理？

这是一个实际的例子（我最感到羞耻的一个）

```
$("#user-devices").on("click", ".device button", function(){

            var button = $(this),
                deviceId = $(this).closest(".device").attr("data-id"),
                device = userDevices.get(deviceId);

            $(device).on("activate", function(event, device){

                button.removeClass("btn-danger").addClass("btn-success")

                $("#activation-dialog").modal("show");
            })

            if (device.get("Active") === "1")
            {
                $("#reactivation-warning-dialog").modal("show");
                $("#reactivation-warning-dialog .btn-primary").on("click", function(){
                    device.activate();
                });

            }
            else
            {
                device.activate();  
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:46:15.733

您可以检查`save`事件是否已经绑定，在这种情况下不要再次绑定它，如下所示：

```
// if no 'save' event already binded
if (!$(user).data('events') || !$(user).data('events').save) { 
    // listen for the save event
    $(user).on("save", function(){
        // Alert the view
    });
} 
```

查看工作[**示例**](https://tinker.io/481f6)

* * *

为了在上面加点糖，我们可以将“**检查事件是否存在**”逻辑放入自定义 jquery 伪选择器中，其定义如下：

```
$.expr[':'].hasEvent = function(obj, idx, meta, stack) {
    return ($(obj).data('events') != undefined 
            && $(obj).data('events')[meta[3]] != undefined);
}; 
```

然后你可以这样使用它：

```
$(user).not(":hasEvent(save)").on("save", function(){
     // Alert the view
}); 
```

工作[**示例**](https://tinker.io/481f6/1)

* * *

**JQUERY的更新> = 1.8**

从**jQuery 1.8**开始，事件对象发生了一些变化，这使得我上面的代码无法工作，请参阅[jQuery 1.8 发行说明](http://blog.jquery.com/2012/08/09/jquery-1-8-released/)的摘录：

> **$(element).data(“events”)：**在 1.6 版本中，jQuery 将其内部数据与用户数据分开以防止名称冲突。但是，有些人正在使用内部未记录的“事件”数据结构，因此我们仍然可以通过 `.data()`. 这现在在 1.8 中被删除，但您仍然可以通过`$._data(element, "events")`. 请注意，这不是受支持的公共接口；实际数据结构可能因版本而异。

所以在这里我发布了上面示例的**jQuery >= 1.8**更新版本：

检查保存事件是否已经绑定，在这种情况下不要再次绑定它：

```
// if no 'save' event already binded
if (!$._data(user, 'events') || !$._data(user, 'events').save) { 
    // listen for the save event
    $(user).on("save", function(){
        // Alert the view
    });
} 
```

和自定义 jquery 伪选择器：

```
$.expr[':'].hasEvent = function(obj, idx, meta, stack) {
    return ($._data(obj, 'events') != undefined 
            && $._data(obj, 'events')[meta[3]] != undefined);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:53:39.247

我同意嵌套侦听器有点奇怪——毕竟，您已经在保存侦听器中，只是为了单击按钮而不是模型对象。

我想我会像这样重写代码：

```
$("#user-devices").on("click", ".device button", function(){

    var button = $(this),
        deviceId = $(this).closest(".device").attr("data-id"),
        device = userDevices.get(deviceId);

    if (device.get("Active") === "1")
    {
        $("#reactivation-warning-dialog").modal("show");
        $("#reactivation-warning-dialog .btn-primary").on("click", device.activate);

    }
    else
    {
        device.activate();
    }
});

//in the device "class"
{ 
   ...
   ...

   activate: function() {
     //persist and stuf.

     //on success...
     this.render();
   }

   render: function() {
      button.removeClass("btn-danger").addClass("btn-success");
      $("#activation-dialog").modal("show");
   }
} 
```

# c++ - 2个向量对象指向同一个分配的内存

> ID：13341311
> 
> 赞同：-2
> 
> 时间：2012-11-12T09:39:05.213
> 
> 标签：c++, vector, copy

在 C++ 中，如何复制指向相同分配内存的现有向量？

例如：

```
vector<int> o1;
o1.push_back(1);

vector<int> o2;
//Make o2 share same memory as o1
o2[0]=2;

cout << o1[0]; //display 2 
```

编辑：我还不清楚目标：如果 o1 在堆上分配并被销毁，我如何创建一个对象 o2 来指向与 o1 相同的分配内存以使其保持在 o1 范围之外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:41:38.640

`o2`参考_`o1`

```
std::vector<int> &o2 = o1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:01:46.330

有一个`boost::shared_array`模板。

但是，这共享一个固定大小的数据数组，您无法修改大小。

如果您想共享可调整大小的矢量，请使用

`boost::shared_ptr< vector< int > >`

您还可以做的是`swap`将向量内存转换为不同的向量。

```
{
   std::vector< int > o1; // on the stack
     // fill o1
   std::vector< int > * o2 = new std::vector< int >; // on the heap
   o2->swap( o1 );
    // save o2 somewhere or return it
} // o2 now owns the exact memory that o1 had as o1 loses scope 
```

`C++11`将引入“移动”语义，从而允许您将实际内存保留在 o1`std::move`中

```
std::vector<int> && foo()
{
      std::vector<int> o1;
       // fill o1
      return std::move( o1 );
}

// from somewhere else
std::vector< int > o2( foo() ); 
```

# jquery - jQuery填充隐藏输入但保留现有内容

> ID：13341313
> 
> 赞同：0
> 
> 时间：2012-11-12T09:39:15.197
> 
> 标签：jquery, forms, input

我有以下代码用页面上所有复选框的值填充隐藏的输入表单，但是我也想保留复选框的预填充值，但不知道如何执行此操作。

这是我当前的代码，任何帮助将不胜感激！

```
$(function(){

  function Populate(){
  vals = $('input[type="checkbox"]:checked').map(function() {
      return this.value;
  }).get().join(', ');
  console.log(vals);
  $('#hidden_form_id').val(vals);
  }

  $('input[type="checkbox"]').on('change', function() {
  Populate()
  }).change();

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:40:25.200

您可以修改您的声明

改变

```
$('#hidden_form_id').val(vals); 
```

至

```
$('#hidden_form_id').val($('#hidden_form_id').val() + vals); 
```

您可以使用`+= operator`javascript 来保留现有价值

```
$('#hidden_form_id')[0].value += vals; 
```

你的代码是

```
 function Populate(){
  vals = $('input[type="checkbox"]:checked').map(function() {
      return this.value;
  }).get().join(', ');
  console.log(vals);
  $('#hidden_form_id')[0].value += vals;
  } 
```

# iphone - 将类传递给函数

> ID：13341319
> 
> 赞同：3
> 
> 时间：2012-11-12T09:39:46.260
> 
> 标签：iphone, ios

我有一个函数可以创建几个不同的 NSOperation 子类。

它们都使用相同的参数，唯一不同的是类名。

目前我有一个函数，其中有一个重复的代码块在函数中运行。是否可以将 Class 传递给函数，以便该函数可以为我创建对象？

IE

```
- (void)createOperationSubclass:(Class*)class withParam:(int)parameter
{
    class *operation = [[class alloc] init];

    operation.parameter = parameter;

    [self.queue addOperation:operation];
} 
```

或类似的东西？即一个不关心类是什么的通用类加载器。

那我就可以跑了...

```
[self createOperationSubclass:MyOperationSubclass withParam:10];
[self createOperationSubclass:MyOtherOperationSubclass withParam:5]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:05:49.783

使用 API，例如 -

```
 NSStringFromClass(Class aClass); 
```

或者

```
NSClassFromString(NSString *aClassName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:50:44.807

你为什么不做一个 if/else 组合，看看你上的是哪个课

```
if ([myObject isKindOfClass:[AnObject class]]) {
    // create object
} 
```

那岂不是容易多了？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T09:54:57.480

试试这个：

```
- (void)createOperationSubclass:(Class)aClass withParam:(int)parameter
{
    id operation = [[aClass alloc] init];

    [operation setParameter:parameter];

    // If your parameter is an NSNumber: [operation setParameter:@(parameter)];

    [self.queue addOperation:operation];
} 
```

然后你就这样称呼它：

```
[self createOperationSubclass:[WhateverClass class] withParam:1]; 
```

PS：请注意，这`class`是一个保留关键字，因此将其更改为`aClass`

# frama-c - 如何指定 Frama-C 包含文件的路径？

> ID：13341324
> 
> 赞同：2
> 
> 时间：2012-11-12T09:40:17.987
> 
> 标签：frama-c

我有一些问题要决定如何告诉[Frama-C](http://frama-c.com/) 使用哪些包含文件。我通常添加选项：

```
-cpp-extra-args="-I $(frama-c -print-path)/libc" 
```

为了获得 Frama-C 的标准规格。但我经常需要一些不在 Frama-C 库中的东西。

例如，我要分析的源文件之一使用了定义在 中的宏`<sys/wait.h>`，但因为 Frama-C 有自己的`frama-c/libc/sys/wait.h`，所以不包括 gcc 文件。不幸的是，Frama-C 没有定义宏，并且定义最终丢失了。当然，我不想更改源文件！

`my_libc/sys/wait.h`我正在考虑使用包含 Frama-C 文件的文件构建一个本地目录，并且我可以在其中复制 GCC 文件中缺少的内容。

然后我会使用：

```
-cpp-extra-args="-I my_libc -I $(frama-c -print-path)/libc" 
```

但我对我的解决方案有点担心，因为从 GCC 包含文件中提取定义可能非常棘手......

你怎么看？这似乎是个好主意？您对更好的组织有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:35:56.507

This solution seems fine (extracting definitions from gcc's headers can indeed be complicated, but you don't have much choice there: you must provide the macro at some point, and you probably don't want to have the whole header ending up in Frama-C).

I'm no pre-processing expert, but I'm not sure that you'll be able to include both `my_libc/sys/wait.h` and `$FRAMAC_SHARE/libc/sys/wait.h` with the `-cpp-extra-args` option you propose: you end up with two `sys/wait.h` headers and `cpp` will always pick the first one. I see two solutions:

*   you define your own standard headers (potentially with copy'n paste from Frama-C's libc), and use only them
*   you define your headers, with `#include <libc/sys/wait.h>`, and have `-cpp-extra-args=... -I$(frama-c -print-path)`, avoiding confusion on the relative path of the headers.

Note that in both cases, you must provide files for all the headers that are used by your application, even if most of them are merely a redirection to or a copy of the corresponding Frama-C file. But I guess that you should be done with a few shell commands.

# git - 如何将 PHPed 与 Git 集成

> ID：13341326
> 
> 赞同：2
> 
> 时间：2012-11-12T09:40:22.783
> 
> 标签：git, phped

我正在使用 PHPEd 进行开发。我们公司刚刚迁移到 Git。关于 Nusphere 支持，PHPEd 中没有对 Git 的原生支持——应该使用 shell 脚本。由于我没有这方面的经验，请你们中的任何人帮助我编写脚本和设置 - 任何提示？你们中有人真正体验过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:14:13.093

TortoiseGIT 是这样做的正确方法。安装和配置 Tortoise 后，您将能够直接从 Windows Explorer 以及 PHPEd 自己的窗口运行 git 命令。请参阅弹出菜单中的 Shell。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-04T15:57:07.517

我从 Eclipse PDT Kepler 切换到 phpED。作为Eclipse git插件Egit的replacemnet，我开始使用SourceTree。我发现它功能强大，界面不错，但有点慢。

编辑：托管在网络共享上的存储库有点慢，但在本地存储库上很快

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T12:40:27.923

最后，我没有找到自动的方法，所以目前我使用 SmartGit 作为外部工具......

# php - 动态单选按钮，具有无限名称的不同

> ID：13341332
> 
> 赞同：1
> 
> 时间：2012-11-12T09:40:42.673
> 
> 标签：php, html, mysql, forms, radio-button

我正在做一个在数据库中显示问题和答案的表单，现在我需要保存用户标记的答案。

我需要每个 RadioButton 的名称或选择下拉菜单。问题：我结合了 php 和 html，但我不知道如何传递单选按钮的名称或选择语法正确的下拉名称。单选按钮的答案名称是它们的 ID 以显示所有这些（RADIO17、Radio18、RADIO19、RADIOX...），现在我需要保存用户检查的单选按钮的特定 ID，例如 RADIO19。请帮忙。

```
 <!--RADIO BUTTON--> 

                <div>
                    <label class="desc"name="question" value=" <?php $row_questionset['QuestionIDFKPK'];?>">
                    <?php echo $row_questionset['QuestionValue']; ?>

                    </label>
                </div>
                    <?php while ($row_Answer=mysql_fetch_array($AnswersValue)){ ?>  
                    <fieldset class="radios">

                        <label class="label_radio">

                        **<input name="RADIO<?= $row_Answer['AnswerIDPK'] ?>" value="  <?= $ValueIDradio=$row_Answer['AnswerIDPK'] ?>" type="radio"  />**
                        <?php echo $row_Answer['AnswerValue']; ?> 
                        </label>

                    <?php }  ?>
                    </fieldset>

        <!--INSERTING ANSWERS-->
                                <?php

                                    $name=$_POST['RADIO1']; 

                                if(isset($_POST['submit'])){

                    ??????? -> $name=$_POST['RADIO$row_Answer['AnswerIDPK']'];  

                                $query_AnswerSelected="SELECT * FROM tblanswer WHERE tblanswer.AnswerIDPK = '".$name."' ";
                                $AnswersValueSelected= mysql_query($query_AnswerSelected);                                                                      
                                $row_AnswersValueSelected=mysql_fetch_array($AnswersValueSelected);
                                $Avalue= $row_AnswersValueSelected['AnswerValue'];
                                $useranswer= "INSERT INTO `nuevaspruebas`.`tbluseranswer` (`UserIDFKPK`, `AnswerIDFKPK`, `QuestionIDFK`, `AnswerValue`) VALUES ('$UserId','$name', '$QuestionID',  '$Avalue')";
                                mysql_query($useranswer);   
                                <?= $nameradio=$row_Answer['AnswerIDPK'] ?>;
                                }
                                    ?>
                                <!--INSERTING ANSWERS-->

            <!--RADIO BUTTON--> 

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:12:41.670

对于答案，您必须在名称 attrbuite 中传递问题 ID，并且答案的值必须在值 attr 中传递

**运行此代码以获得想法：**

```
<?php
    if($_POST['submit']){
        #you can loop through answers using
        foreach($_POST['question'] as $quesID => $ansID){
            //action goes here
        }
        #view all the posted data
        echo "<pre>";
        print_r($_POST);
        echo "</pre>";
    }
?>
<?php
    $FirstQuestionID = 1;
    $SecondQuestionID = 2;
?>
<form method=post action=<?=$_SERVER['PHP_SELF'];?> >
    first question
    <br />
    <input type="radio" name="question['<?=$FirstQuestionID;?>']" value='1' />
    <input type="radio" name="question['<?=$FirstQuestionID;?>']" value='2' />
    <input type="radio" name="question['<?=$FirstQuestionID;?>']" value='3' />
    <input type="radio" name="question['<?=$FirstQuestionID;?>']" value='4' />
    <br />
    second question
    <br />
    <input type="radio" name="question['<?=$SecondQuestionID;?>']" value='1' />
    <input type="radio" name="question['<?=$SecondQuestionID;?>']" value='2' />
    <input type="radio" name="question['<?=$SecondQuestionID;?>']" value='3' />
    <input type="radio" name="question['<?=$SecondQuestionID;?>']" value='4' />
    <br />
    <input type=submit name=submit value=submit />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:52:09.133

如果您有相互排斥的单选按钮，则所有单选按钮都必须使用相同的名称。从这个意义上说，您命名 RADIO1、RADIO19、RADIOxx 等的策略会给您带来问题，因为您的所有无线电都可以检查（不是唯一的）。

尝试类似：

```
<input name="radioName" value="<?= $ValueIDradio=$row_Answer['AnswerIDPK'] ?>" type="radio" /> 
```

插入答案时，您可以知道此处检查的收音机：

$radioChecked = $_REQUEST['radioName'];

# maven - cucumber 和 junit 在 jenkins 中的测试数量错误（surefire）

> ID：13341333
> 
> 赞同：4
> 
> 时间：2012-11-12T09:40:43.810
> 
> 标签：maven, junit, jenkins, cucumber, surefire

当我尝试通过 Maven (surefire) 一起使用 Cucumber 和 Junit 时，报告的测试数量错误。我只有 250 个测试，但 Jenkins 向我展示了 1200 个测试。所以当我调查它时，我只能找到一个参考，那就是肯定插件的问题。

[https://github.com/cucumber/cucumber-jvm/issues/322](https://github.com/cucumber/cucumber-jvm/issues/322)

如何纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:00:21.927

我只能用万无一失来创造黑客。如果您愿意，可以使用：

1.  有必要通过 Cucumber 创建 junit 报告到某个文件夹 (1) 'cucumber'
2.  将surefire报告（不包括surefire生成的Cucumber报告）复制到黄瓜生成报告的某个文件夹（2）“surefire-reports-fixed”。
3.  将黄瓜 junit-report 从 (1) 复制到 (2)
4.  jenkins 必须使用文件夹 (2) 'surefire-reports-fixed'

Maven 中的示例更改：

```
 <plugin>
            <plugin>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.6</version>
                <executions>
                    <execution>
                        <id>change-bad-cucumber-test-file</id>
                        <!-- here the phase you need -->
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${basedir}/target/surefire-reports-fixed</outputDirectory>
                            <resources>
                                <resource>
                                    <directory>${basedir}/target/cucumber</directory>
                                </resource>
                                <resource>
                                    <directory>${basedir}/target/surefire-reports</directory>
                                    <excludes>
                                        <exclude>**/*CucumberTest.*</exclude>
                                    </excludes>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

CucumberTest.java 中的变化：

```
@RunWith(Cucumber.class)
@Cucumber.Options(format = { "pretty", "junit:target/cucumber/TEST-packageHereToClass.CucumberTest.xml", "json:target/cucumber.json" })
public class CucumberTest {
 ...
} 
```

在詹金斯将用于测试的surefire文件夹设置为（2）'surefire-reports-fixed'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T19:49:28.230

以下链接似乎是相关的。

讨论步骤定义算作测试的核心问题：

[https://github.com/cucumber/cucumber-jvm/issues/577](https://github.com/cucumber/cucumber-jvm/issues/577)

单独的问题在评论中讨论了从将步骤计数为测试更改为将场景计数为junit测试的修复程序即将发布，但与 Gherkin 3 开发工作相关：

[https://github.com/cucumber/cucumber-jvm/issues/263](https://github.com/cucumber/cucumber-jvm/issues/263)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-28T05:08:11.953

以下内容对我有用-我在@cucumbeOptions 中添加了黄瓜-junit 报告格式，即- **“junit:target/surefire-reports/TEST-TestSuite.xml”**，然后当我在 Eclipse（也在 VSO 中）运行它时，Junit报告是在**TEST-TestSuite.xml**文件中生成的，具有适当的计数。

下面的代码-->

```
 @CucumberOptions(
                features= {"src/test/resources/Features"},
                plugin   = {"pretty:STDOUT","html:Reports/cucumber-pretty","junit:target/surefire-reports/TEST-TestSuite.xml",               "com.cucumber.listener.ExtentCucumberFormatter:Reports/Reporting/Quixxi_Report.html"},
                monochrome = true,
                dryRun=false
           ) 
```

# mvvm - 淘汰赛验证与 jQuery 验证

> ID：13341338
> 
> 赞同：0
> 
> 时间：2012-11-12T09:40:56.880
> 
> 标签：mvvm, jquery-validate, client-side-validation, knockout-validation

我正在开发一个 ASP.Net WebAPI 项目并将 Knockout.js 用于客户端 MVVM。我现在正在考虑客户端验证并发现了[Knockout-Validations](https://github.com/ericmbarnard/Knockout-Validation)。由于这也是微软推荐的验证框架，我愿意在我的项目中使用它，但我也在考虑使用[jQuery 验证](http://docs.jquery.com/Plugins/Validation)。

那么如果我使用 Knockout-Validation 而不是 jQuery 验证呢？我的意思是，Knockout-Validations 对于该领域来说是相当新的，但 jQuery Validations 自 2006 年以来就在那里。如果我使用 Knockout-Validations 而不是 jQuery Validations，我会错过什么？jQuery Validations 可以做一些 Knockout-Validations 不能做的事情吗？

仅供参考，我项目的客户预计该产品将在未来十年内使用。因此，即使选择的验证框架也是一个非常重要的决定。

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:44:18.890

Knockout 验证插件在引擎盖下使用“jquery 验证”，但只是将它很好地封装在敲除扩展器框架中。这封装了您提到的必要的 jquery 验证，请查看底部的淘汰赛扩展程序文档 [http://knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html)

# java - Spring TransactionProxyFactoryBean 没有为服务加载 dao

> ID：13341339
> 
> 赞同：1
> 
> 时间：2012-11-12T09:40:57.180
> 
> 标签：java, spring, hibernate, gwt, dao

我在 GWT 框架下使用 Hibernate 设置 Spring 时遇到问题。我对 GWT 相当陌生。我已经设置并加载了应用程序上下文而没有输出错误，但我目前的主要问题是我的服务层实现（PobaseServiceImpl）需要我在 appcontext 中设置的 DAO，但它没有包装 DAO。自然地，我的 RPC 试图调用导致 NullPointerException 的 dao 方法。当我初始化 pobaseDao 时，它没有被 TransactionProxyFactoryBean 设置。

**总结：** DAO 应该像我的其他服务一样由 Spring 创建（即配置到）。然后通过 Spring 注入到服务中。然后使用 DAO，将其包装在 Spring 事务代理 (org.springframework.transaction.interceptor.TransactionProxyFactoryBean) 中，并给它一个 Hibernate SessionFactory (org.springframework.orm.hibernate4.LocalSessionFactoryBean)。但由于某种原因，它没有设置道

所以我的应用程序上下文是通过 ServletContextListener 加载的。这是我的应用程序上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

  <!--
    Spring Framework application context definition for the POBASE Website.
  -->

<beans>

  <!-- Configurer that replaces ${...} placeholders with values from a properties file -->
  <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
      <list>
         <value>classpath:/pobase.properties</value>
         <value>file:${user.home}/pobase.properties</value>
      </list>
    </property>
    <property name="ignoreResourceNotFound" value="no"/>
  </bean>

  <!-- Hibernate Data Source -->
  <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${pobase.database.driver}" />
    <property name="url" value="${pobase.database.url}" />
    <property name="username" value="${pobase.database.user}" />
    <property name="password" value="${pobase.database.password}" />
  </bean>

  <!-- Hibernate SessionFactory -->
  <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource">
      <ref bean="dataSource" />
    </property>
    <property name="packagesToScan" value="nz.co.doltech.pobase.client.entity"/>
    <property name="hibernateProperties">
      <props>
        <prop key="hibernate.dialect">${pobase.hibernate.dialect}</prop>
        <prop key="hibernate.show_sql">${pobase.hibernate.show_sql}</prop>
        <prop key="javax.persistence.validation.mode">none</prop>
      </props>
    </property>
  </bean>

  <!-- Transaction manager for a single Hibernate SessionFactory (alternative to JTA) -->
  <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <!-- Default transaction proxy, defining the transactional behaviour for
    a typical Dao configuration -->
  <bean id="baseDaoTransactionProxy" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"
    abstract="true">
    <property name="transactionManager" ref="transactionManager" />
    <property name="transactionAttributes">
      <value>*=PROPAGATION_MANDATORY</value>
    </property>
  </bean>

  <!-- Default transaction proxy, defining the transactional behaviour for
    a typical Service configuration -->
  <bean id="baseServiceTransactionProxy" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"
    abstract="true">
    <property name="transactionManager" ref="transactionManager" />
    <property name="transactionAttributes">
      <value>*=PROPAGATION_REQUIRED</value>
    </property>
  </bean>

  <!-- ========================= BUSINESS OBJECT DEFINITIONS ========================= -->

  <bean id="pobaseDao" parent="baseDaoTransactionProxy">
    <property name="target" ref="pobaseDaoTarget" />
  </bean>
  <bean id="pobaseDaoTarget" class="nz.co.doltech.pobase.server.dao.PobaseHibernateDao">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <bean id="pobaseService" parent="baseServiceTransactionProxy">
    <property name="target" ref="pobaseServiceTarget" />
  </bean>
  <bean id="pobaseServiceTarget" class="nz.co.doltech.pobase.server.service.PobaseServiceImpl">
    <property name="pobaseDao" ref="pobaseDao" />
    <!-- property name="accessControlService" ref="accessControlService" />
    <property name="lookupService" ref="lookupService"/>
    <property name="notificationService" ref="notificationService"/ -->
  </bean>

</beans> 
```

这是我的 RPC servlet 实现：

```
package nz.co.doltech.pobase.server.service;

/**
 * Extends RSS and implements the PobaseService
 * @author Ben
 */
@SuppressWarnings("serial")
public class PobaseServiceImpl extends RemoteServiceServlet implements PobaseService {

    @SuppressWarnings("unused")
    private static final Logger logger = Logger.getLogger(PobaseServiceImpl.class.getName());

    private PobaseDao pobaseDao;
    private final HashMap<Integer, PobaseEntity> pobaseEntities = new HashMap<Integer, PobaseEntity>();

    private void fetchExternPobase()
    {
        pobaseEntities.clear();
        List<PobaseEntity> pobaseList = pobaseDao.getAllPobase();
        for (int i = 0; i < pobaseList.size(); i++)
        {
            PobaseEntity en = pobaseList.get(i);
            if(en != null) {
                pobaseEntities.put(en.getId(), en);
            }
        }
    }

    public void setPobaseDao(PobaseDao dao)
    {
        this.pobaseDao = dao;
    }

    public PobaseDao getPobaseDao()
    {
        return this.pobaseDao;
    }

    public PobaseData addLocalPobase(PobaseData pobase)
    {
        PobaseEntity entity = new PobaseEntity();
        entity.mirrorObjectData(pobase);

        pobase.setId(pobaseEntities.size());
        pobaseEntities.put(pobase.getId(), entity); 

        return entity.getDataObject();
    }

    public PobaseData updateLocalPobase(PobaseData pobase)
    {
        PobaseEntity entity = new PobaseEntity();
        entity.mirrorObjectData(pobase);

        pobaseEntities.remove(entity.getId());
        pobaseEntities.put(entity.getId(), entity);

        return entity.getDataObject();
    }

    public Boolean deleteLocalPobase(int id)
    {
        pobaseEntities.remove(id);
        return true;
    }

    public ArrayList<PobaseData> deleteLocalPobases(ArrayList<Integer> ids)
    {
        for (int i = 0; i < ids.size(); ++i) {
            deleteLocalPobase(ids.get(i));
        }

        return getLocalPobaseData();
    }

    public ArrayList<PobaseData> getLocalPobaseData()
    {
        ArrayList<PobaseData> pobaseList = new ArrayList<PobaseData>();
        Iterator<Integer> it = pobaseEntities.keySet().iterator();
        while(it.hasNext())
        {
            PobaseData pobase = pobaseEntities.get(it.next()).getDataObject();
            pobaseList.add(pobase);
        }
        return pobaseList;
    }

    public PobaseData getLocalPobase(int id)
    {
        return pobaseEntities.get(id).getDataObject();
    }

    public ArrayList<PobaseData> resyncExternPobase()
    {
        fetchExternPobase();
        return getLocalPobaseData();
    }

} 
```

这里还有 Web 应用程序的启动日志：

```
ServletContextListener started
Nov 12, 2012 8:20:33 PM nz.co.doltech.pobase.SpringInitialiser initSpringContext
INFO: Creating new Spring context. Configs are [/nz/co/doltech/pobase/appcontext.xml]
Nov 12, 2012 8:20:33 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@8423321: startup date [Mon Nov 12 20:20:33 NZDT 2012]; root of context hierarchy
Nov 12, 2012 8:20:33 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [nz/co/doltech/pobase/appcontext.xml]
Nov 12, 2012 8:20:33 PM org.springframework.core.io.support.PropertiesLoaderSupport loadProperties
INFO: Loading properties file from class path resource [pobase.properties]
Nov 12, 2012 8:20:33 PM org.springframework.core.io.support.PropertiesLoaderSupport loadProperties
INFO: Loading properties file from URL [file:/home/ben/pobase.properties]
Nov 12, 2012 8:20:33 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4c56666d: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,dataSource,sessionFactory,transactionManager,baseDaoTransactionProxy,baseServiceTransactionProxy,pobaseDao,pobaseDaoTarget,pobaseService,pobaseServiceTarget]; root of factory hierarchy
Nov 12, 2012 8:20:33 PM org.springframework.jdbc.datasource.DriverManagerDataSource setDriverClassName
INFO: Loaded JDBC driver: org.postgresql.Driver
Nov 12, 2012 8:20:33 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
Nov 12, 2012 8:20:33 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.7.Final}
Nov 12, 2012 8:20:33 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
Nov 12, 2012 8:20:33 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
Nov 12, 2012 8:20:34 PM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
Nov 12, 2012 8:20:34 PM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
Nov 12, 2012 8:20:34 PM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
Nov 12, 2012 8:20:34 PM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
Nov 12, 2012 8:20:34 PM org.springframework.orm.hibernate4.HibernateTransactionManager afterPropertiesSet
INFO: Using DataSource [org.springframework.jdbc.datasource.DriverManagerDataSource@55acc0d4] of Hibernate SessionFactory for HibernateTransactionManager
Starting Jetty on port 8888 
```

任何人都知道为什么它不起作用？这里的一些规格：

*   春天 3.2.0
*   休眠4
*   GWT SDK 2.4.0

感谢我能得到的任何帮助！

干杯，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:43:16.633

你的`PobaseServiceImpl`类不是线程安全的。在 Java 中，任何远程调用的服务（当然容器中的单例也是如此）应该准备好从不同的线程调用它的方法，并且可以在不同的线程中同时执行相同的方法。

整个班级都需要详细检查。

首先，您应该使用`ConcurrentHashMap`而不是`HashMap`. 并且所有方法都需要仔细重写——例如返回 ArrayList( `public ArrayList<PobaseData> resyncExternPobase()`) 的方法应该对数据进行防御性的复制。

作为替代方案，您应该考虑将公共方法设置为您的服务方法**同步**，但是，这将强制方法按顺序执行，并且如果期望从不同线程主动使用服务，则会降低性能。

作为参考，请考虑阅读 Brian Goetz [Java Concurrency In Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)，第 5 章*。Building Blocks*，尤其是*5.1 Synchronized collections*和*5.2。并发集合*

**更新**：您的*PobaseServiceImpl*似乎是由 servlet 容器实例化的 servlet - 要使用 Spring bean 填充其字段，您应该使用 Spring 实用程序方法 - 例如`WebApplicationContextUtils`- 互联网上有很多示例，如[http:// pgt.de/2009/07/17/non-invasive-gwt-and-spring-integration-reloaded/](http://pgt.de/2009/07/17/non-invasive-gwt-and-spring-integration-reloaded/)

# alloy - 了解合金中的特征

> ID：13341342
> 
> 赞同：0
> 
> 时间：2012-11-12T09:41:16.963
> 
> 标签：alloy

我在合金网站上读到签名定义了一个集合。鉴于此定义，我试图理解以下合金代码：

```
enum dooroptype { unlocked, locked, opened}
enum enginetype {on,off}
enum motortype { ismoving, still}
enum key_location { in_car, faralone}

abstract sig state{
  inside,far, near : set Person,
  car_action : motortype,
  engine : enginetype,
  key_position : (Person + key_location),
  door : dooroptype
} 
```

如果签名实际上定义了一个集合，那么为什么我们在签名定义中有这么多参数，因为集合是一元关系？如果我错了，如何解释这个定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:09:33.813

我正在Alloy中迈出第一步，但我会尝试回答。这就是您在上面的代码中所拥有的：

1.  dooroptype = 恰好有 3 个原子的集合（一元关系）。
2.  enginetype = set（一元​​关系）正好有 2 个原子。
3.  motortype = 恰好有 2 个原子的集合（一元关系）。
4.  key_location = 设置（一元关系）正好有 2 个原子。
5.  state = 具有 0 个或更多原子的集合（一元关系）。
6.  inside, far and near = 二元关系定义为`state -> set Person`
7.  car_action = 二元关系定义为`state -> one motortype`
8.  引擎 = 二元关系定义为`state -> one enginetype`
9.  key_position = 两个二元关系的并集`state -> Person`和`state -> key_location`（但具有限制每个状态最多出现一次的多重性，因此状态可以与 a`Person`或 a相关联`key_location`，但不能同时与两者相关联）
10.  门 = 定义为的二元关系`state -> dooroptype`

简而言之，上面定义的一切都是关系，有些是一元的，有些是二元的。二元关系`inside, far and near`用`set`多重性定义，而所有其他关系用多重性定义。

换句话说，签名是一个集合，关系在签名内部定义，但全局可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:13:44.467

两个小修正：

1.  从技术上讲，枚举引擎类型 {on,off} 是

    ```
    sig enginetype {}
    one sig on, off extends engine type {} 
    ```

所以它声明了 3 个集合，其中两个（开和关）是单例。

1.  字段 key_position 的声明

    ```
    abstract sig state{
      key_position : (Person + key_location)
      } 
    ```

确实可以被视为两个关系的联合（通过 state -> Person 和 state -> key_location），但多重性约束是任何 state s 都只有一个 s.key_position 值，而不是 Aviad 公式建议的两个值.

# flash - 构建用于实时语音通信的 Web 应用程序

> ID：13341345
> 
> 赞同：0
> 
> 时间：2012-11-12T09:41:24.670
> 
> 标签：flash, voice

我的老板问我，我是否能够为两个用户之间的实时语音通信制作一个网络应用程序。

我想它应该是类似于服务器端软件 + Flash 客户端的东西。

是否有任何工具可用于构建这样的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:31:47.923

查看 Adob​​e Media Server，它是为处理流数据/媒体的多用户连接而设计的。

[http://www.adobe.com/products/adobe-media-server-family.html](http://www.adobe.com/products/adobe-media-server-family.html)

# actionscript-3 - Flash 横幅混合效果

> ID：13341359
> 
> 赞同：0
> 
> 时间：2012-11-12T09:42:15.020
> 
> 标签：actionscript-3, flash, timeline

我知道我可以在谷歌上找到这个，但我很着急。有没有办法将 Flash 中的帧与 AS 混合？我正在制作一个带有 3 帧的 Flash 横幅，每个帧都包含动画和内容。我的客户希望看到不同的混合效果，而我在谷歌上只能找到复杂的时间线解决方案。有没有办法用代码解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:20:50.727

将所有 3 个包含动画的影片剪辑放在同一帧上。

将两个对象的不透明度设置为 0。

使用代码（我推荐 TweenLite：[http](http://www.greensock.com/tweenlite/) ://www.greensock.com/tweenlite/ ）为对象的不透明度设置动画以创建交叉淡入淡出。

例如

```
TweenLite.to(objectOne, 2, {alpha:0});
TweenLite.to(objectTwo, 2, {alpha:1}); 
```

# linux - ARM 平台上 Linux 内核（3.5.2 之前）中的互斥锁实现

> ID：13341362
> 
> 赞同：1
> 
> 时间：2012-11-12T09:42:22.290
> 
> 标签：linux, locking, arm, mutex

我有一个关于在 ARM 平台上的 Linux 内核中实现互斥锁的问题。

```
__mutex_fastpath_lock(atomic_t *count, void (*fail_fn)(atomic_t *))
{
    int __ex_flag, __res;

    __asm__ (

             "ldrex  %0, [%2]        \n\t"
             "sub    %0, %0, #1      \n\t"
             "strex  %1, %0, [%2]    "  //for ARMv6+ ,kernel use ldrex/strex implement mutex lock.

              : "=&r" (__res), "=&r" (__ex_flag)
              : "r" (&(count)->counter)
              : "cc","memory" );

             __res |= __ex_flag;    //How can we know the "strex" operation is successfully finished or not? 
                                    //The status of (atomic_t *count) is different in these two cases. 
                                    //I wonder this is a bug ,or I did not understand the lock mechanism so well.

      if (unlikely(__res != 0))
           fail_fn(count);
      } 
```

非常感谢您对此问题的建议或回答。任何事情都会受到赞赏。

有关源代码的更多信息，请参阅；[http://lxr.oss.org.cn/source/arch/arm/include/asm/mutex.h?v=3.5.2;a=arm](http://lxr.oss.org.cn/source/arch/arm/include/asm/mutex.h?v=3.5.2;a=arm)

文件路径为：

```
linux-3.5.2/arch/arm/include/asm/mutex.h 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:56:21.117

`__res`如果成功则为零

> STREX{cond} Rd, Rm, [Rn] 存储到 Rn 中的地址，如果成功则在 Rd 中标记（如果成功，则 Rd = 0）

注意`__res`is or'd with`__ex_flag`

```
 __res |= __ex_flag; 
```

因此，如果`ldrex`或`strex`操作中的任何一个失败，则检查失败。

注意：如果该值是在`ldrex`独占访问失败后访问的；`strex`失败并且该值将不会被存储。[在信息中心](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dht0008a/ch01s02s01.html)有更多关于此的信息：

> STREX 指令将一个字有条件地存储到内存中。**如果独占监视器允许存储，则操作更新内存位置并**在目标寄存器中返回值 0，表示操作成功。如果独占监视器不允许存储，**则操作不会更新内存位置并**在目标寄存器中返回值 1。

关键是，如果独占访问失败，无论是在加载还是存储时，内核都会知道它，因为`__ex_flags=1`或者`__res=1`，如果它没有失败，但互斥体已经被锁定，我们仍然会知道它，因为`__res=0xFFFFFFFF`那时它不会不管独占访问是否因为互斥锁被**锁定**而失败。

现在，我看到的唯一问题是它将存储`0xFFFFFFFF`到计数中，但是当锁定互斥锁的人*解锁*它时，它可能会再次增加，这意味着它可能是多个线程在互斥锁上等待的一种方式。这是来自您链接中的评论：

> **如果一旦递减它就不是零，或者如果它的回存由于独占存储的争议而失败**，我们只需通过缓慢的路径立即退出，在该路径**中重新尝试锁定直到成功**。

# java - SimpleDateFormat Java 中的错误值

> ID：13341363
> 
> 赞同：3
> 
> 时间：2012-11-12T09:42:22.993
> 
> 标签：java, date-format, simpledateformat

我正在尝试将日历值设置为其基数（0），以便稍后将其与另一个值进行比较。当我尝试打印结果时，我在使用 SimpareDateFormat 时得到了月份值。有什么想法吗？我做得对吗？

```
SimpleDateFormat DataDateFormat = new SimpleDateFormat("yyyy-MM-dd");
SimpleDateFormat DataDateFormatMonth = new SimpleDateFormat("MM");

Calendar cld = Calendar.getInstance();
cld.set(1, 1, 1);

System.out.println(DataDateFormat.format(cld.getTime()));       //  ->  0001-02-01
System.out.println(DataDateFormatMonth.format(cld.getTime()));  //  ->  02      !!!!
System.out.println(cld.get(Calendar.MONTH));                    //  ->  1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:45:31.580

Calendar API 中的月份间隔为 0 到 11。

```
JAN--->0
.......
DEC--->11 
```

**Calendar.MONTH**将返回一个**int 值 (2)**，在您的情况下是 MM 的值。即**Calander.MONTH 是一个常数**

分解：

```
System.out.println(cld.get(Calendar.MONTH));                    //  ->  1
Calaender.MONTH--- 2
cld.get(2); will get the value at the given calendar field. (in this case 2, your month field whihc is 1) 
```

例如将您的最后一个打印语句更改为

```
 Calendar cld = Calendar.getInstance();
 cld.set(10, 10, 1100); (format is MM,dd,YYYY)
 System.out.println(cld.get(Calendar.YEAR)); 
```

输出将为 10（它将以格式返回月份值），因为**Calendar.YEAR 将返回 1**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T09:45:10.303

月份以 0 开头`calander`。一月-> 0，二月-> 1 ...十二月-> 11

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:50:18.760

来自set() 参数的[API ：](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)

*   year - 用于设置 YEAR 时间字段的值。
*   月 - 用于设置 MONTH 时间字段的值。**月份值从 0 开始。例如，0 表示一月。**
*   date - 用于设置 DATE 时间字段的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:45:05.450

这就是您想要获得的内容，因为`new SimpleDateFormat("MM")`它将格式化输入日期并仅返回`MM`月份的值。

# java - JAXB 2：在没有 xml 声明的情况下解组 xml

> ID：13341366
> 
> 赞同：2
> 
> 时间：2012-11-12T09:42:37.940
> 
> 标签：java, xml-parsing, jaxb2

美好时光！

我有一个xml：

```
<fieldSet name="Test" desc="Test">
  <field name="id">
    <fieldinfo>
        <name>id</name>
        <type>String</type>
        <fieldsize>50</fieldsize>
    </fieldinfo>
    <validators />
  </field>
</fieldSet> 
```

我需要使用 JAXB 解析它。我试过这个：

```
 try {
            JAXBContext jaxbContext = JAXBContext.newInstance(CustomFieldSet.class);
            Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();

            StringReader reader = new StringReader(xml);
            CustomFieldSet fieldSet = (CustomFieldSet) unmarshaller.unmarshal(reader);

        } catch (Exception e) {
            logger.error(e.getMessage(), e); 
        } 
```

CustomFieldSet 类的开头是：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "fieldSet")
public class CustomFieldSet {

@XmlAttribute(name = "name", required = true)
private String tableName;

@XmlAttribute(name = "desc", required = true)
private String tableDescription;

    ... 
```

当调用 unmarshal() 函数时，会抛出以下异常：

```
javax.xml.bind.UnmarshalException - with linked exception: [org.xml.sax.SAXParseException: Content is not allowed in prolog.] 
```

我认为问题与我的 xml 不包含 xml 声明 ( `<?xml ...`) 的事实有关。

有人知道这里的解决方法是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:21:20.670

我已将代码更改为使用 InputStream 而不是 StringReader，现在一切正常：

```
try {
            XMLInputFactory xif = XMLInputFactory.newFactory();
            InputStream bis = new ByteArrayInputStream(tableDescription.getBytes("UTF-8"));
            XMLStreamReader xsr = xif.createXMLStreamReader(bis, "UTF-8");

            xsr.nextTag();

            JAXBContext jaxbContext = JAXBContext.newInstance(CustomFieldSet.class);
            Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();

            JAXBElement<CustomFieldSet> jb = unmarshaller.unmarshal(xsr, CustomFieldSet.class);
            xsr.close();

            fieldSet = jb.getValue();

        } catch (Exception e) {
            logger.error(e.getMessage(), e);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:07:34.847

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不需要 XML 标头（即`<?xml version="1.0" encoding="UTF-8"?>`），请参见下面的示例。我怀疑您的示例中的 XML 字符串有一些特别之处。

**Java 模型 (Foo)**

```
package forum13341366;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    private String bar;

} 
```

**演示代码**

```
package forum13341366;

import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StringReader xml = new StringReader("<foo><bar>Hello World</bar></foo>");
        Foo foo = (Foo) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<foo>
    <bar>Hello World</bar>
</foo> 
```

* * *

# wpf - 如何使用 Printdialog 在 WPF 中打印 Gridview 的内容

> ID：13341368
> 
> 赞同：0
> 
> 时间：2012-11-12T09:42:42.353
> 
> 标签：wpf, gridview, printing, printdialog

我有一个包含几行（〜20-30）和几列（4-5）的gridview，我想打印它的内容。我尝试使用 PrintDialog' PrintVisual 方法，例如：

```
 private void PrintBtn_Click(object sender, RoutedEventArgs e)

{

PrintDialog printDialog = new PrintDialog();

if (printDialog.ShowDialog() == true)

{

printDialog.PrintVisual(grid, "My First Print Job");

}

} 
```

当然，它并没有完全工作，因为它只打印屏幕中的可见行。我怎样才能打印完整的内容？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:01:44.443

在 WPF 中打印并非易事。其实远非如此。

我建议使用[SUT.PrintEngine](http://www.codeproject.com/Articles/238135/WPF-Print-Engine-Part-I)然后您可以执行以下操作：

```
 public static void PrintElement(FrameworkElement _PrintMe)
    {
        var suPrintVm = PrintControlFactory.Create(_PrintMe);
        suPrintVm.ShowPrintPreview();
    } 
```

# javascript - 移动背景图像

> ID：13341369
> 
> 赞同：-1
> 
> 时间：2012-11-12T09:42:45.910
> 
> 标签：javascript, background-image

今天是个好日子！

如果有人可以帮助我解决我遇到的问题。我试图制作一个背景与此完全相同的网站。

[http://clearairchallenge.com/](http://clearairchallenge.com/)

我真的很喜欢水平移动的背景图像（云）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:21:06.320

[http://jsfiddle.net/LwPX6/](http://jsfiddle.net/LwPX6/)

听到你有一个例子:)

```
var intval = null;
var pos = 0;

$(document).ready(function() {

    intval = window.setInterval(moveBg, 200);
});

function moveBg() {

    pos++;

    $(".clouds").css({backgroundPosition: (pos * 10) + "px 0px"});
} 
```

问候 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:51:38.693

你可以尝试类似的东西

```
 $('#divId').animate(function() {
                backgroundPosition: '(-5000px 100px)'}, 5);
    }); 
```

这里背景 x 位置将在 5 秒内从 0 变为 -5000px，您可以更改时间和位置 px-s 以获得理想的结果。

**更新**你应该使用jquery库，你可以下载或在线使用

例如，从 url 使用，把它放在你的 head 部分

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script> 
```

你也应该写这个，无论是在头部还是在正文中，都没有关系，但是在前面的脚本标签之后什么是**重要的**

```
<script type="text/javascript">

    $(document).ready(function() {
         $('#divId').animate(function() {
                backgroundPosition: '(-5000px 100px)'}, 5);
    });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T14:38:13.430

这么小的功能不需要jQuery！

尝试...

```
<script type="text/javascript">
    var pos = 0;

    window.setInterval(function(){
      pos++;
      document.getElementsByClassName('clouds')[0].style.backgroundPosition = pos + "px 0px";
    }, 50);
</script> 
```

Swap out: `getElementsByClassName('clouds')[0].style`for `getElementById('clouds').style`or I would attach it to the body so simple:`body.style`会做。

# objective-c - XCode 如何处理编辑器上的提示？

> ID：13341372
> 
> 赞同：1
> 
> 时间：2012-11-12T09:42:52.760
> 
> 标签：objective-c, xcode, formatting

![在此处输入图像描述](../Images/4bee547e36e5832591346ee29396dae9.png)

我输入NSLog，它显示`NSLog(id, ...)`，它在编辑器中为我显示了一些提示，当我将文本复制到时`TextEdit`，它显示它是`NSLog(<#id, ...#>)`，所以，我尝试`NSLog(<#id, ...#>)`手动输入，但它无法显示第一行之类的提示。XCode 是如何处理的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:15:27.433

正如您发现的那样，它通过替换`<#sometext#>`为蓝色气泡占位符来处理它，但这不会影响您直接在 Xcode 编辑器中自己键入时的情况（因为直接在代码中键入它没有任何意义，您通常会在那里输入真实内容）。

如果您键入一些包含`<#sometext#>`在 TextEdit 中的代码，然后将其**复制/粘贴**`<#...#>`回 Xcode 编辑器中，Xcode 将在您输入文本的位置插入蓝色气泡作为占位符。

* * *

一种用法是生成代码片段。只需在 Xcode 编辑器中选择一段代码，然后将其拖放到代码片段库中；然后，您可以稍后将其拖放回代码编辑器中，以重用同一段代码。如果此代码片段包含一些`<#placeholder#>`Xcode 将在此位置插入蓝色气泡。
**有关更多信息，请参阅[文档中的此页面，](http://developer.apple.com/library/mac/#recipes/xcode_help-source_editor/CreatingaCustomCodeSnippet/CreatingaCustomCodeSnippet.html)其中包含一个很好的视频，详细解释了它。**

# javascript - 在 HTML 中呈现任意 JSON

> ID：13341373
> 
> 赞同：4
> 
> 时间：2012-11-12T09:42:54.703
> 
> 标签：javascript, html, json

我正在编写一个数据查看器页面来呈现从服务器作为 JSON 发送的对象。JSON 对象的内容和复杂性各不相同，从具有少量属性的平面对象到具有多层嵌套和数组字段的较大结构。我想做的是渲染对象的简单表示，可能是 ul。从那里我可以添加东西以允许可点击的展开/折叠行为或其他东西。

我知道这将需要一个递归函数，我可以在顶层调用它，然后它会在它发现的每一层嵌套中再次调用它。我只是对 Javascript 不是很有信心，而且我对它的了解也不远。我也遇到了我不知道属性名称的问题 - 不同的对象将具有不同的属性，具有不同的名称。

有没有一种相对简单的方法来呈现这样的对象，还是我必须改变服务器发送的 JSON 的形式？

编辑： JSON 样本可能不会有太大帮助；它们变化很大。就像我说的，有些很简单，有些非常复杂。最简单的对象是这样的：

```
{
    "id": "5",
    "category": "12",
    "created": "25-Sep-2012"
} 
```

而我目前最复杂的一个是这样的：

```
{
   "Attempted":"EditUser",
   "Exception":{
      "Message":"Something",
      "TargetSite":"somewhere",
      "Inner Exception":{
         "Message":"Something else",
         "TargetSite":"somewhere.core",
             "Inner Exception":{
            "Message":"Another message",
            "TargetSite":"something.core.subr",
            "Inner Exception":{
               "Message":"Object reference not set to an instance of an object.",
               "TargetSite":"System.Web.Mvc.ActionResult Update(Int32, System.String, System.String)",
               "StackTrace":[
                  "at Application.Controllers.AdminController.Update(Int32 id, String email, String password) in c:\\Docs\\Apps\\Main\\MyBranch\\Source\\Application\\Application\\Controllers\\AdminController.cs:line 123"
               ],
               "Inner Exception":{

               }
            }
         }
      }
   },
   "details":{
      "userEmail":"test@email.com",
      "userId":"25",
      "userRole":"User"
   }
} 
```

如您所见，它是错误日志的 JSON 表示，包括软件抛出的异常（敏感细节已被掩盖）。JSON 对象是从审计日志的“详细信息”字段生成的，因此将来可能会记录其他事件，其详细信息的格式与我现在预测的任何内容不同，这就是为什么我希望处理任意 JSON 而不依赖于知道格式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T10:27:13.410

您可以使用 BFS 算法之类的东西。这是一个简单的示例（取决于 jQuery）：

**css**

```
ul {
    margin-left: 1em;
}

.json-key {
    font-weight: bold;
} 
```

**​html**

 **```
<div id="json-viewer"></div>​ 
```

**javascript**

```
function visitObj($container, obj) {
    var $ul = $('<ul>');

    for (var prop in obj) {

        var $li = $('<li>');
        $li.append('<span class="json-key">' + prop + ': </span>');
        if (typeof obj[prop] === "object") {
             visitObj($li, obj[prop]);
        } else {
            $li.append('<span class="json-value">'+obj[prop]+'</span>');                   
        }
        $ul.append($li);
    }
    $container.append($ul);
} 
```

所以用你的例子来调用它：

```
visitObj($('#json-viewer'), {
   "Attempted":"EditUser",
   "Exception":{
      "Message":"Something",
      "TargetSite":"somewhere",
      "Inner Exception":{
         "Message":"Something else",
         "TargetSite":"somewhere.core",
             "Inner Exception":{
            "Message":"Another message",
            "TargetSite":"something.core.subr",
            "Inner Exception":{
               "Message":"Object reference not set to an instance of an object.",
               "TargetSite":"System.Web.Mvc.ActionResult Update(Int32, System.String, System.String)",
               "StackTrace":[
                  "at Application.Controllers.AdminController.Update(Int32 id, String email, String password) in c:\\Docs\\Apps\\Main\\MyBranch\\Source\\Application\\Application\\Controllers\\AdminController.cs:line 123"
               ],
               "Inner Exception":{

               }
            }
         }
      }
   },
   "details":{
      "userEmail":"test@email.com",
      "userId":"25",
      "userRole":"User"
   }
}); 
```

有关工作示例，请参阅[此 fiddle](http://jsfiddle.net/ccmGs/4/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T10:14:56.910

吹响我自己的号角，您可能可以根据您的需要调整[JSON2HTML](http://json.bloople.net/ "JSON2HTML")。源代码位于[https://github.com/bloopletech/json2html](https://github.com/bloopletech/json2html) - 有关解析 JSON 并生成 HTML 的核心，请参见 scripts/parse.js。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T05:28:35.430

查看[Visualizer.json2html.com](http://visualizer.json2html.com)的源代码，因为它几乎可以可视化你扔给它的任何 json。

这是可视化器对上面的 json 示例所做的屏幕截图。再次，代码都在那里并且成熟的采摘:)

![在此处输入图像描述](../Images/bf5a8d0f8fa1d156ac21f9042369c52a.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T11:09:59.893

您可以使用预先存在的库来自动执行 JSON 到 HTML 呈现和转换。但是如果你想在读取/渲染 JSON 之后做更多个性化的事情，你可以很好地依赖普通的旧 JavaScript（毕竟所有的 .js 库都是用普通的旧 JS 编写的）

基本上，您需要渲染 JSON 并从中提取数据。获得所需数据后，您可以将其转换为所需的任何格式。您需要做的是，检查对象的类型，如果它是原始数据类型，则提取数据，如果不是，则执行递归调用，直到找到原始数据类型。

代码片段是：

```
function renderJson(jsonObject){   
    for(var objType in jsonObject){
        if(typeof jsonObject[objType] === 'object'){
            renderJson(jsonObject[objType]);
        }
        else{
            alert(' name=' + objType + ' value=' + jsonObject[objType]);
        }
    }
} 
```

[在这里试试](http://jsfiddle.net/nGak6/1/)

这是一个非常基本的代码片段。您可以修改此代码段以满足您的需要。

有关如何使用 JS 处理 JSON 对象和数组的更多详细信息，请参阅[http://www.json.org/js.html 。](http://www.json.org/js.html)**

# git - git 忽略目录“build”及其所有内容，但不忽略“build.xml”

> ID：13341374
> 
> 赞同：14
> 
> 时间：2012-11-12T09:43:02.460
> 
> 标签：git, ant, gitignore

我在**Ant**是构建系统的项目中使用**git 。**由于我不希望将“构建”目录添加到**git**但需要添加**build.xml**文件，因此我在**.gitignore**文件中使用了以下两行：

 ******```
build/
!build.xml 
```

有没有更好/更简洁的方法？

**更新：** 结果**build.xml**被忽略，因为**.gitignore**在路径更高的目录中。删除后，**build/**正确地只忽略 build 文件夹，而不是它旁边的**build.xml**文件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-12T09:56:57.117

不，没有更好的方法，这几乎就是这样做的方法。准确地说，

```
build/*
!build/build.xml 
```

因为您想要拥有该文件夹并忽略其中除了 build.xml 之外的所有其他文件。

请注意，尽管 Ant 的常见目录布局是 build.xml 位于应用程序根文件夹中，而 build 文件夹仅包含在构建期间创建的文件。例如，请参见[此处](http://www.developer.com/java/other/article.php/994991/Building-with-Ant-Directory-Structure.htm)的更多理由。

* * *

编辑。如果您实际上在应用程序根目录中有 build.xml，只需

```
build 
```

在 .gitignore 中应该足够了。但是，应该注意它仅适用于检测新条目，如果您已经向 git 提交了某些内容，则必须自己删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T23:24:10.153

您也可以忽略 /build/，这将只忽略名为 build 的文件夹，不忽略文件。******

# php - PHP Parse 错误：语法错误，意外的 T_PUBLIC

> ID：13341378
> 
> 赞同：19
> 
> 时间：2012-11-12T09:43:11.773
> 
> 标签：php

我在第 3 行的这个 PHP 代码中遇到了这个错误，可能是什么问题？此代码取自[frank at interinet dot com 的 php manual user notes](http://www.php.net/manual/en/language.types.boolean.php#103757)

```
<?php

public function myMethod()
{
return 'test';
}

public function myOtherMethod()
{
return null;
}

if($val = $this->myMethod())
{
 // $val might be 1 instead of the expected 'test'
}

if( ($val = $this->myMethod()) )
{
// now $val should be 'test'
}

// or to check for false
if( !($val = $this->myMethod()) )
{
// this will not run since $val = 'test' and equates to true
}

// this is an easy way to assign default value only if a value is not returned:

if( !($val = $this->myOtherMethod()) )
{
$val = 'default'
}

?> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-12T09:44:32.860

该`public`关键字仅在声明类方法时使用。

由于您声明的是一个简单的函数而不是一个类，因此您需要`public`从代码中删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T10:03:25.123

您可以从函数中删除 public 关键字，因为您必须定义一个**类**才能声明**公共、私有或受保护的函数**

# webdriver - 如何通过网络驱动程序获取文本框中给出的文本

> ID：13341381
> 
> 赞同：0
> 
> 时间：2012-11-12T09:43:36.937
> 
> 标签：webdriver

如何通过 Web 驱动程序获取文本框中给出的文本。我知道给定的文本将作为值存储在该字段中。但是如何获取该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:34:50.737

*   存储为值：`webdriver.findElement(By...).getAttribute("value"))`
*   存储为封闭文本：`webdriver.findElement(By...).getText())`

# git - git pull：来自远程的坏对象，但远程 fsck 没有显示错误

> ID：13341385
> 
> 赞同：4
> 
> 时间：2012-11-12T09:43:53.600
> 
> 标签：git

我的主目录中有一个 git 存储库，外部硬盘上有一个副本。但是，当我尝试从`$HOME`硬盘拉出时，我得到了

```
remote: fatal: bad object afea5e5fc05d21431756099f941d776ca2d76b31
error: git upload-pack: git-pack-objects died with error.
fatal: git upload-pack: aborting due to possible repository corruption on the remote side.
remote: aborting due to possible repository corruption on the remote side.
fatal: protocol error: bad pack header 
```

回到 $HOME 上的存储库，`git fsck --full afea5e5fc05d21431756099f941d776ca2d76b31`没有输出。

这个破碎的物体在哪里？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-10T15:33:06.140

带有一些十六进制数字的坏对象往往意味着`ta`g 其中包含无效的参考编号，但也可能在其他一些情况下发生。

检查您的标签并在`fsck`没有 sha-1 的情况下运行

```
git fsck --full 
```

# ios - Pushviewcontroller 动画从右到左

> ID：13341387
> 
> 赞同：2
> 
> 时间：2012-11-12T09:44:17.837
> 
> 标签：ios, ios5, ios6

我正在创建一个交互式 iPad 应用程序，它使用了很多*Swiping*。我想要从右向左滑动时，动画也应该从右向左移动。从左到右的另一种方式是可能的：

**示例从左向右滑动，调用方法**：
`[self.navigationController pushViewController:viewcontroller animated:YES];`
**结果：GOOD！**动画从左到右，这是正确的。但现在换一种方式......

**问题：**如何设置动画以从右到左转到另一个 UIViewController？

**可能的解决方案？：**我尝试使用 PopViewController，但我并不总是想返回到以前的 ViewController。有没有办法操纵以前的 ViewController

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:00:40.300

在下面的函数中传递您想要动画的视图。它会从左到右为视图设置动画。推送视图控制器

```
[self.navigationController pushViewController:viewcontroller animated:NO]; 
```

然后在下面的函数中传递viewcontroller的视图

```
-(void) imgSlideInFromLeft:(UIView *)vew 
{
     CATransition *transition = [CATransition animation];
     transition.duration = 0.4;
     transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
     transition.type = kCATransitionPush;
     transition.subtype =kCATransitionFromLeft;
     transition.delegate = self;
     [vew.layer addAnimation:transition forKey:nil];
 } 
```

# c# - 从 SQL Server 数据库中获取大量数据的最快方法

> ID：13341392
> 
> 赞同：2
> 
> 时间：2012-11-12T09:44:32.953
> 
> 标签：c#, asp.net, sql, sql-server, linq

我的数据库中有超过 50,000 条记录，我必须在我的应用程序中处理这些记录（并且数量至少每天增加 2000 条）。

我目前使用的方式是：Linq 到具有数据库中存储过程的实体，该存储过程返回一个对象的集合，以便我可以处理它。

但是我注意到它很慢，从数据库中获取这么多记录的最有效方法是什么？

我的代码示例：

```
 items = (from f in db.spItems().OrderByDescending(f => f.date)
                  group f by f.ID into g
                  select g.FirstOrDefault()).Take(9).ToList();
                  join ar in db.anothertable on f.ID equals ar.ID
                  join t in db.thirdtable on ar.tid equals t.ID 
```

spItems 是一个获取结果的存储过程，但有时我必须对其进行多次连接

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T09:55:07.093

我会首先尝试优化您的查询。SSMS 速度慢吗？你使用正确的索引吗？你需要所有的列。最重要的是：您是否需要显示所有 50000 行？

50000 条记录不算多，但在 Web 应用程序中显示所有记录并不常见，因为这意味着您必须为所有记录生成 HTML 并将其显示在客户端的浏览器中（甚至可能使用`ViewState`）。所以我建议使用数据库分页（fe via [`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)function）来分区你的结果集并只查询你想要显示的数据（fe 中每页 100 行`GridView`）。

[高效地对大量数据进行分页](http://www.asp.net/web-forms/tutorials/data-access/paging-and-sorting/efficiently-paging-through-large-amounts-of-data-vb)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-07T15:42:04.970

请考虑以下步骤。对于这类问题，我们需要在不止一层上工作。

**1.使用标准方式使用 ADO.net 获取结果**。因为 LINQ to SQL 最终是一个 ORM（附加层），所以很明显它会降低性能，就像你的情况一样。[**看这里**](http://www.codeproject.com/Articles/70169/LINQ-to-SQL-Performance-Considerations)

**2.如果您没有错过任何事情，例如添加索引、选择错误的数据类型等，**请再次检查您的表格设计。****

 ****3\. 提高存储过程性能**：[见这里](http://www.techrepublic.com/article/increase-sql-server-stored-procedure-performance-with-these-tips/)

**4\. 划分您的数据。**：将旧数据移至其他表，如果它是只读的（或不再使用），因为您告诉我们每天至少添加 2000 行。所以你的桌子大小会显着减少。**请非常谨慎地决定这个决定。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T15:50:49.940

将本文视为对先前答案的有价值的补充：http: [//blogs.msdn.com/b/wriju/archive/2010/06/09/ado-net-entity-framework-4-0-loading-data- in-4-ways.aspx](http://blogs.msdn.com/b/wriju/archive/2010/06/09/ado-net-entity-framework-4-0-loading-data-in-4-ways.aspx)**

# css - 用于功能区末端的 CSS

> ID：13341399
> 
> 赞同：6
> 
> 时间：2012-11-12T09:44:56.853
> 
> 标签：css, pseudo-element, css-shapes

如何仅使用 CSS 绘制此图像左侧的功能区末端？ ![在此处输入图像描述](../Images/2b23723160c3481d25dc8458479db4bc.png)

我知道我可以利用 CSS 中的角是斜接的这一事实，所以我可以有一个`div`大小为 0 的边框和其他更大的边框来给我三角形。有没有办法只用 1 做到这一点`div`？还是我需要堆叠一些三角形？我真的更喜欢 1`div`这样用户就不必考虑这个，我可以使用 CSS`:before`伪元素来插入它。实现这一点的最佳方法是什么？

只需要支持 IE9+ 和其他浏览器的现代版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T09:53:24.520

**HTML**

```
<div class="ribbon">
   <strong class="ribbon-content">Everybody loves ribbons</strong>
</div>​ 
```

**CSS**

```
 .ribbon {
     font-size: 16px !important;
     width: 50%;
     position: relative;
     background: #ba89b6;
     color: #fff;
     text-align: center;
     padding: 1em 2em; /* Adjust to suit */
     margin: 2em auto 3em; 
    }
    .ribbon:before {
     content: "";
     position: absolute;
     display: block;
     bottom: -1em;
     border: 1.5em solid #986794;
     z-index: -1;
    }
    .ribbon:before {
     left: -2em;
     border-right-width: 1.5em;
     border-left-color: transparent;
    }

.ribbon .ribbon-content:before {
 content: "";
 position: absolute;
 display: block;
 border-style: solid;
 border-color: #804f7c transparent transparent transparent;
 bottom: -1em;
}
.ribbon .ribbon-content:before {
 left: 0;
 border-width: 1em 0 0 1em;
} 
```

**[看演示](http://jsfiddle.net/cszLX/)**

**[参考](http://css-tricks.com/snippets/css/ribbon/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:49:57.877

网上有很多资源展示了如何做到这一点。一个非常好的教程是在线的 css-tricks 在这里[http://css-tricks.com/snippets/css/ribbon/](http://css-tricks.com/snippets/css/ribbon/)

我还把它放在了一个 jsfiddle 中，供你在这里玩[http://jsfiddle.net/WqNQU/](http://jsfiddle.net/WqNQU/)

```
<h1 class="ribbon">
   <strong class="ribbon-content">Everybody loves ribbons</strong>
</h1>

.ribbon {
 font-size: 16px !important;
 /* This ribbon is based on a 16px font side and a 24px vertical rhythm. I've used em's to position each element for scalability. If you want to use a different font size you may have to play with the position of the ribbon elements */

 width: 50%;

 position: relative;
 background: #ba89b6;
 color: #fff;
 text-align: center;
 padding: 1em 2em; /* Adjust to suit */
 margin: 2em auto 3em; /* Based on 24px vertical rhythm. 48px bottom margin - normally 24 but the ribbon 'graphics' take up 24px themselves so we double it. */
}
.ribbon:before, .ribbon:after {
 content: "";
 position: absolute;
 display: block;
 bottom: -1em;
 border: 1.5em solid #986794;
 z-index: -1;
}
.ribbon:before {
 left: -2em;
 border-right-width: 1.5em;
 border-left-color: transparent;
}
.ribbon:after {
 right: -2em;
 border-left-width: 1.5em;
 border-right-color: transparent;
}
.ribbon .ribbon-content:before, .ribbon .ribbon-content:after {
 content: "";
 position: absolute;
 display: block;
 border-style: solid;
 border-color: #804f7c transparent transparent transparent;
 bottom: -1em;
}
.ribbon .ribbon-content:before {
 left: 0;
 border-width: 1em 0 0 1em;
}
.ribbon .ribbon-content:after {
 right: 0;
 border-width: 1em 1em 0 0;
} 
```

# java - 从 ArrayList 中查找项目索引的更好方法

> ID：13341401
> 
> 赞同：11
> 
> 时间：2012-11-12T09:44:58.227
> 
> 标签：java, search, arraylist, indexof

首先，如果我错了，请纠正我。我想在`ArrayList<CustomType>`不使用 For 循环的情况下查找项目的索引（即字符串值）。

POJO：

```
id;
name; 
```

代码：

```
ArrayList<POJO> list = new ArrayList<POJO>;

//Lots of data added to these list... 
```

**现在我想从 arraylist 中找到特定名称的 id，而不使用下面的 for 循环。**

```
String id = null;
// TODO Auto-generated method stub
for (int i = 0; i < list.size(); i++) {
    if("ABCD".equalsIgnoreCase(list.get(i).getName())) {
        id = list.get(i).getId();
        break;
    }
} 
```

理想情况下，我不想实现 For 循环，因为在某些情况下，我在 List 中有 500 多个数据，并且使用 For 循环查找索引并不是一个好方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T09:48:46.983

您可以使用`list.indexOf()`，但为了使其工作，您需要覆盖`equals`您`hasCode`的`POJO`.

默认情况下，如果两个对象具有相同的引用，则它们将被视为相等。您可以覆盖`equals`为您的案例工作：

```
public boolean equals(Object o) {
  if (!(o instanceof POJO)) {
    return false;
  }
  POJO other = (POJO) o;
  return name.equalsIgnoreCase(other.getName());
} 
```

覆盖 equals 会建议你覆盖`hashCode`. 例如：

```
public int hashCode() {
  return name.hashCode();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T09:48:39.533

以这种方式找到复杂性会给您带来 BIG-O (n) 的元素。我认为，如果您使用地图，那会给您带来更好的结果。

`HashMap`会是更好的选择。- 复杂度为 O(1)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T13:40:09.127

谢谢大家的友好和快速的回​​应。但要特别感谢[Joachim Sauer](https://stackoverflow.com/users/40342/joachim-sauer)。您绝对正确，**500 个元素并不多，这个循环很可能对您的代码性能没有真正的影响（即使它效率低下）。**即使我尝试了多达 5000 个元素，但仍然对性能没有负面影响。

再次感谢大家，并感谢您对[Joachim Sauer](https://stackoverflow.com/users/40342/joachim-sauer)的评论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T09:48:37.173

如果您需要搜索字符串值，您应该使用 a`HashMap`而不是`ArrayList`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-12T09:49:03.640

你可以使用`List.indexOf()`- 但你必须**确保你也覆盖`POJO.equals()`**- （并且作为约定的一部分 - 也是`hashCode()`.

请注意，尽管如此 - 结果将是`O(n)`- 一种替代方法可能是使用*排序数组*( `POJO[]`) 并使用[`Arrays.binarySearch()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28java.lang.Object%5B%5D,%20java.lang.Object%29)或[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)/ [`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)。

如果您使用数组并且`binarySearch()`- 您必须确保它`POJO`也实现[`Comparable<POJO>`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

* * *

请注意，对于静态数据（您的列表不会经常/根本不更改） - 尽管数组并且`binarySearch()`“更糟糕”然后`HashSet`就大 O 表示法而言，实际上 - 它通常要快得多，尤其是对于相对较短的列表。
就大 O 表示法而言，基于散列的解决方案提供了`O(1)`平均案例访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-20T17:46:19.767

为了回答这个问题，我使用 JMH 启动了一个基准测试。

毫无疑问，经典循环是做到这一点的有效方法。

我使用了`DATA_ARRAY`包含 17576 个元素的 a，搜索到的元素位于索引 7733 处。

使用经典循环 - 0,030 ± 0,001 ms/op：

```
int i = 0;
for (String str : DATA_ARRAYLIST) {
    if (str.equals("lll")) break;
    i++;
} 
```

使用 indexOf 并覆盖 equals 方法：0,030 ± 0,002 ms/op

```
MY_DATA_ARRAYLIST.indexOf("lll"); 
```

使用数据范围：0,082 ± 0,003 ms/op

```
OptionalInt integer = IntStream.range(0, DATA_ARRAYLIST.size())
            .filter(i -> DATA_ARRAYLIST.get(i).equals("lll"))
            .findFirst(); 
```

在找到流后使用 indexOf：0,074 ± 0,008 ms/op

```
String result = DATA_ARRAYLIST.stream().filter(e -> e.equals("lll")).findFirst().get();
DATA_ARRAYLIST.indexOf(result); 
```

找到并行流后使用 indexOf：0,087 ± 0,023 ms/op

```
String result = DATA_ARRAYLIST.parallelStream().filter(e -> e.equals("lll")).findFirst().get();
DATA_ARRAYLIST.indexOf(result); 
```

但是，如果搜索到的元素在最后一个索引中：

*   经典循环：0,066 ± 0,002 毫秒/操作
*   并行流：0,121 ± 0,023 ms/op
*   流：0,161 ± 0,024 毫秒/操作

然后如果你有 456 976 个元素：

*   经典循环：2,172 ± 0,297 毫秒/操作
*   并行流：3,145 ± 0,380 ms/op
*   流：6,081 ± 0,097 毫秒/操作

如您所见，击败 Loop 真的很难！

# android - SUP 不支持 Android 平台

> ID：13341406
> 
> 赞同：2
> 
> 时间：2012-11-12T09:45:10.103
> 
> 标签：android, sybase, sup

我想使用 Android 构建本机应用程序，但是当我尝试在 SUP 中“生成代码”时，我在选项中找不到 Android 平台。

有人可以帮帮我吗 ？

在 SUP 安装中，我选择了“评估许可证（30 天试用）”。这可能是问题吗？我的意思是，如果我选择 Unserved 或 Served 许可证，我会在其中找到 Android 平台吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T12:25:25.820

SUP 仅在 SUP 2.0 发布后才支持 Android。请检查您使用的版本并更新 SUP 移动 SDK 以获得支持

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T11:43:35.313

为了从 SUP 生成 Android 代码，您必须：

*   在您的计算机上安装[Android SDK 。](http://dl.google.com/android/installer_r21.1-windows.exe "安卓 SDK")
*   启动 android SDK，并安装至少 1 个版本的 Android API（例如 Android 4.0）
*   将 Android 开发人员工具 (ADT) 安装到您的 Sybase Unwired Workspace ide。ADT 的安装指南在[这里](http://developer.android.com/sdk/installing/installing-adt.html "这里")

# c# - c# 命名迭代器和产量

> ID：13341408
> 
> 赞同：-1
> 
> 时间：2012-11-12T09:45:16.700
> 
> 标签：c#, yield

我发现这个例子以相反的顺序返回自定义类型 Car 对象。有人可以解释一下这段代码。谢谢

```
public IEnumerable GetTheCars(bool returnReversed)
{
   if(returnReversed)
   {
     for(int i=cars.Length; i!=0; i--)
     {
        yield return cars[i-1]; //this line makes me confused
     }
   }
   else {...}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:57:19.443

您在评论中指出您需要解释反向排序的工作原理。

```
 for(int i=cars.Length; i!=0; i--)
   {
        yield return cars[i-1]; //this line makes me confused
   } 
```

假设您的列表中有 4 辆车。

您的`for`循环从 4 的值开始。`cars.Length`对于每次迭代，它都会递减 1。它会在`i!=0`满足条件时继续执行此操作。因此，循环将使用以下值进行迭代`i`：4、3、2、1。

如果`i`用作数组/列表的元素索引，那么您将收到 cars[4]、cars[3]、cars[2]、cars[1]（倒序！）。但是因为 C# 中的数组从 0（而不是 1）开始，所以在访问元素时需要减 1 `cars[i-1]`：.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:56:08.037

首先`yield`声明：使用`yield`时返回一个集合，但不是定义一个集合，而是将所有项目放入其中然后返回它，而是 yield return 它，这意味着您的代码一次返回 1 个项目，运行时将保持跟踪所有收益回报，从中收集并让方法返回。

例如：

```
public IEnumable GetInts
{
    get
    {
        yield return 1;
        yield return 2;
        yield return 3;
        yield return 4;
    }
} 
```

和

```
public IEnumable GetInts
{
    get
    {
        var arr = new int[]{1,2,3,4};
        return arr;
    }
} 
```

这些是 2 个相同的代码。但是在循环中工作时，有时使用 yield 比自己跟踪你的集合更方便。

# android - 广播接收器 - Whatsapp 和类似服务

> ID：13341411
> 
> 赞同：5
> 
> 时间：2012-11-12T09:45:29.020
> 
> 标签：android, broadcastreceiver, whatsapp

我在任何地方都找不到答案。我需要知道是否有 Whatsapp 消息的广播接收器，就像 SMS 和电话广播接收器一样。如果没有，当在 Whatsapp 等应用程序上收到消息时，是否有办法执行某些操作？

# linux - 检查 3g 路由器是否启动并运行的最佳方法是什么？

> ID：13341415
> 
> 赞同：2
> 
> 时间：2012-11-12T09:45:47.333
> 
> 标签：linux, networking, 3g-network

我有一种情况，我需要编写一个应用程序来监控 3g 路由器是否启动并运行，因为有时 3g 连接不稳定。我必须确保带宽使用不会超过限制。

我不确定以最少的 3g 连接带宽使用来监控 3g 连接状态的最佳方法是什么。有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:51:39.590

如果 ping 没有被阻止，您可以简单地执行`ping -c 10 8.8.8.8 | grep -oE "[0-9]* received" | sed "s/ received//g"`. 如果连接正常，您应该得到非零值（>7 对于任何相当好的连接）值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:03:58.010

任何质量合理的路由器都应该有一个 SNMP 服务，可以通过轮询来检查每个接口的状态，以及每个接口上的流量。

如果你的路由器有这个，用各种脚本语言编写你需要的东西就很简单了。我过去曾使用 Perl[`Net::SNMP`](http://search.cpan.org/~dtown/Net-SNMP-v6.0.1/)库来处理这类事情。

# blackberry - 黑莓网络工作焦点问题

> ID：13341419
> 
> 赞同：2
> 
> 时间：2012-11-12T09:46:02.940
> 
> 标签：blackberry, blackberry-webworks

我正在研究黑莓网络工程项目，其中使用基于焦点的导航。

现在我的问题是我专注于一个按钮，通过单击该按钮，我正在调用 ajax，它反过来为另一个页面加载新的 html 并将其加载到指定的 div。

现在我需要将焦点设置为加载的 html 中的一个元素，但它不起作用并且焦点仍然在最后一个焦点元素上。

等待解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:47:39.567

分配给页面元素的焦点模式事件处理程序是在页面首次加载（HTTP 请求）时注入的，而不是在每次后续 DOM 更改之后（无论是通过 AJAX 还是直接 JavaScript）。

这是关于焦点模式导航的官方文档： [https ://developer.blackberry.com/html5/documentation/using_the_navigation_mode_1866978_11.html](https://developer.blackberry.com/html5/documentation/using_the_navigation_mode_1866978_11.html)

建议使用 appendChild() 将 DOM 元素添加到页面，而不是 innerHTML = ""，然后查看那些新添加的元素是否有焦点事件。

# php - 为什么来自网页的 WebResponse 有尾随空格？

> ID：13341423
> 
> 赞同：-2
> 
> 时间：2012-11-12T09:46:19.087
> 
> 标签：php, .net, webrequest, streamreader, webresponse

我`PHP`在网站上写了一个页面来回应`OK`。在`PHP`中，这是通过以下方式完成的：

```
echo 'OK'; 
```

当我请求页面`.NET`并将响应读入字符串时，生成的字符串有一个尾随空格，所以它是`'OK '`. 字符串的长度为 3 个字符。为什么会这样，我该如何解决？

`.NET`代码是：

```
Private Function GetStrFromPostRequest(ByVal url As String, ByVal encoding As Text.Encoding, ByVal params As String) As String

    Dim strWebResponse As String
    Dim Request As HttpWebRequest = WebRequest.Create(url)
    Request.Method = "POST"
    Request.ContentType = "application/x-www-form-urlencoded"
    Using writer As StreamWriter = New StreamWriter(Request.GetRequestStream(), encoding)
        writer.Write(params)
    End Using
    Using Response As WebResponse = Request.GetResponse
        Using reader As StreamReader = New StreamReader(Response.GetResponseStream(), encoding)
            strWebResponse = reader.ReadToEnd
        End Using
    End Using

    Return strWebResponse

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:51:53.527

尝试将您的`PHP`来源更改为：

```
<?php echo 'OK'; 
```

那应该删除空间。任何以 PHP 代码结尾的 PHP 文件都不应该有结束符`?>`，因为它只会导致烦人的问题。

# android - 滚动活动标题

> ID：13341424
> 
> 赞同：2
> 
> 时间：2012-11-12T09:46:27.850
> 
> 标签：android, android-activity, title

我在 Activity 中动态加载标题；每当标题太长时，我希望它滚动以便可以阅读整个标题。

我已经尝试过自定义 XML 文件和 requestFeature，

```
android:singleLine="true" 
android:ellipsize="marquee"
android:marqueeRepeatLimit ="marquee_forever"
android:scrollHorizontally="true"
android:focusable="true"
android:focusableInTouchMode="true" 
```

我试过的另一种方法

```
TextView textView = (TextView) findViewById(android.R.id.title);
textView.setSelected(true); 
textView.setEllipsize(TruncateAt.MARQUEE);
textView.setMarqueeRepeatLimit(1);

textView.setFocusable(true);
textView.setFocusableInTouchMode(true);
textView.requestFocus();
textView.setSingleLine(true); 
```

在 ellipsize() 处给了我空指针。我很茫然，真的。我怎样才能达到这个效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:06:43.503

您的第二种方法将不起作用，因为`(TextView) findViewById(android.R.id.title)`返回 null。

我建议遵循 Bhuro 的[回答](https://stackoverflow.com/questions/3438276/change-title-bar-text-in-android)，特别是关于如何自定义标题栏。本质上，您将需要一个自定义 titlebar.xml 来定义您想要的自定义标题栏中的内容（在您的情况下，只是一个 TextView）。一个 titlebar.xml 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">

    <TextView
        android:id="@+id/myTitle" 
        android:text="This is my new title and it is very very long"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:singleLine="true" 
        android:ellipsize="marquee"
        android:marqueeRepeatLimit ="marquee_forever"
        android:scrollHorizontally="true"
        android:focusable="true"
        android:focusableInTouchMode="true" 
    />
</LinearLayout> 
```

然后在 Activity 中指定它：

```
final boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

if (customTitleSupported) {
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.titlebar);
} 
```

# emacs - emacs：选择时关闭缓冲区列表

> ID：13341426
> 
> 赞同：15
> 
> 时间：2012-11-12T09:46:37.800
> 
> 标签：emacs, elisp

当在此类窗口中选择缓冲区时，是否有配置挂钩可以使“*缓冲区列表*”缓冲区自动关闭？每次打开缓冲区列表并且我选择一个缓冲区时，我都必须使用它手动关闭它 `C-x C-k` ，这很烦人，还因为它使帧分成至少两个窗口。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-12T09:58:02.477

不确定配置选项，但您始终可以使用`q`（或`C-x 1`在当前缓冲区中）而不是`C-x C-k`关闭临时缓冲区。

`buffer-list`PS这些天几乎没有人使用。大多数 Emacs 用户只需将其重新映射到**ibuffer**（它更智能，您可能喜欢它的临时缓冲区默认消失的事实）：

```
(global-set-key (kbd "C-x C-b") 'ibuffer) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:57:24.373

您可以根据需要调整此功能：

```
(defun kill-other-buffers ()
  "Kill all other buffers."
  (interactive)
  (mapc 'kill-buffer (delq (current-buffer) (buffer-list)))) 
```

此代码将杀死除当前缓冲区之外的所有缓冲区。来源：[Emacs 维基](http://www.emacswiki.org/emacs/KillingBuffers#toc2)

# unix - 如何从 tcl 脚本运行 csh 脚本？

> ID：13341427
> 
> 赞同：4
> 
> 时间：2012-11-12T09:46:39.737
> 
> 标签：unix, tcl, csh

我正在尝试从 tcl 脚本运行 csh 脚本。

下面的tcl脚本调用了一个csh脚本

```
#!/usr/bin/tclsh

set scripts_path /scratch/TCL_scripts/scripts_adders

set synthesis /scratch/TCL_scripts/synthesis.csh

set files [glob -directory $scripts_path *]
split $files
set files [lsort $files]
set i 1

foreach script $files {

     puts "hello"
     # puts [pwd]
     exec /bin/csh -c $synthesis
     puts $i

} 
```

并且（开始的）csh 文件如下：

```
#!/bin/csh -f

echo abcdefgh 
```

当我只从我的 unix 终端执行 csh 文件时，它工作正常。当我调用我的 Tcl 脚本时，它会运行并且确实会写入“hello”并打印 i，但不会执行 csh 文件，因为“abcdefgh”从未出现在终端中。我也尝试过其他命令，但我总是遇到同样的问题：当我从 Tcl 脚本运行 csh 脚本时，它永远不会执行，即使当我直接从终端运行它时它运行良好。

（我的 Tcl 脚本和 csh 脚本都是可执行的）

为了从我的 Tcl 脚本运行我的 csh 脚本，我必须做什么？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:29:01.567

csh 脚本确实是为您运行的，但默认情况下，它的标准输出成为Tcl命令的*结果*`exec`（如果它在标准错误中产生任何内容，那将成为 的*错误*结果`exec`）。要使输出和错误出现在终端上，您必须修改`exec`如下：

```
exec /bin/csh -c $synthesis >@stdout 2>@stderr 
```

说“将`>@`标准输出重定向到以下通道”（`stdout`在这种情况下），并且`2>@`对标准错误执行相同的操作。

# string - 在Excel中提取部分字符串

> ID：13341429
> 
> 赞同：0
> 
> 时间：2012-11-12T09:46:49.360
> 
> 标签：string, excel, vba

我以这种方式有一个字符串

> "来自东京的汽车 5 33:53:03 到达。13:56:39 奥地利汽车 5 33:53:07 到达。13:56:43 印度汽车 5 33:53:03 到达时间 13:56:39"

在excel的同一个单元格中。

我需要将字符串的这些部分`at 13:56:39` `at 13:56:43` `13:56:39`显示在单独的单元格中。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:04:49.397

我会有一个不同的方法，使用一个公式：

![在此处输入图像描述](../Images/1c5cda474d6c2aab65da32bffef388e8.png)

B 列使用以下公式：

```
B1=IFERROR(SEARCH("at ??:??:??",A$1,1),"")
B2=IFERROR(SEARCH("at ??:??:??",A$1,B1+11),"") 
```

C 列使用以下公式：

```
C1=IFERROR(PART(A$1,B1,11),"") 
```

这些将适用于大量事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:24:30.747

如果您的数据在单列中，我认为`Regexp`带有变体数组的 a 是有意义的。

但作为一个更灵活的选项您可以使用以下 UDF 作为数组 - 输入公式来拆分字符串

如果您的字符串被输入`A1`并且您预计最多有 5 个匹配项

1.  选择`B1:F1`
2.  在公式栏中添加`=AtTime(A1)`
3.  按[shift](/questions/tagged/shift "显示标记为“班次”的问题") [ctrl](/questions/tagged/ctrl "显示标记为“ctrl”的问题")[回车](/questions/tagged/enter "显示标记为“输入”的问题")一起

![在此处输入图像描述](../Images/f0b9c897b58f4cfc968d52776854fa77.png)

*额外的不匹配将有#N/A*

**代码**

*`updated to handle single matches`*

```
 Function AtTime(strIN As String) As Variant
    Dim objRegex As Object
    Dim objRMC As Object
    Dim strOut() As String
    Dim lngCnt As Long
    Set objRegex = CreateObject("vbscript.regexp")
    With objRegex
        .Global = True
        .Pattern = "at \d{2}:\d{2}:\d{2}"
        If .test(strIN) Then
            Set objRMC = .Execute(strIN)
            If objRMC.Count > 1 Then
                ReDim strOut(1 To objRMC.Count)
                For lnGCnt = 1 To UBound(strOut)
                    strOut(lnGCnt) = objRMC(lnGCnt - 1)
                Next
            Else
                'handle single matches
                ReDim strOut(1 To 2)
                strOut(1) = objRMC(0).Value
                strOut(2) = "#N/A"
            End If
            AtTime = strOut
        Else
            AtTime = "no match"
        End If
    End With
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:56:38.133

Down and dirty string manipulation:

```
Option Explicit

Sub Test()
    Dim cellValue As String
    Dim newCellArray() As String
    Dim valueYouWant As String
    Dim cellCounter As Integer
    Dim x As Integer
    Dim myRange As Range
    Const SEPERATOR_VALUE = "at "
    Const ASCII_A = 65

    For cellCounter = 1 To 10 '10 represents the last row...there are ways to set this dynamically if needed

        cellValue = Sheet1.Range("A" & cellCounter)
        newCellArray = Split(cellValue, "at ")

        'Array is zero-based, but we want to start at first split value
        For x = 1 To UBound(newCellArray)
            valueYouWant = Trim$(Left$(newCellArray(x), InStr(1, newCellArray(x), " "))) 'You could prefix this with "at " if you really needed it
            Sheet1.Range(Chr$(ASCII_A + x) & cellCounter).Value = valueYouWant
        Next x
    Next cellCounter

End Sub 
```

# javascript - 使用 knockout.js 将两个数组相互绑定

> ID：13341432
> 
> 赞同：1
> 
> 时间：2012-11-12T09:47:05.480
> 
> 标签：javascript, knockout.js

我有一个包含两个数组的 ViewModel：`arr1`和`arr2`. 我想`arr2`准确地包含所`arr1`包含的内容。我怎样才能做到这一点？

```
var myViewModel = function() {
    this.arr1 = ko.observableArray([]);
    this.arr2 = ko.observableArray(this.arr1); //Doesn't work - I need to bind arr2 to changes in arr1
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:51:45.900

如果要存储对数组元素的引用，请使用 unwrap observable：

```
var myViewModel = function() {
    this.arr1 = ko.observableArray([]);
    this.arr2 = ko.observableArray(this.arr1());
} 
```

如果要克隆数组使用数组`Slice`的功能：

```
var myViewModel = function() {
    this.arr1 = ko.observableArray([]);
    this.arr2 = ko.observableArray(this.arr1.slice(0)); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:07:44.333

如果您想将第一个数组复制到第二个**，**您可以使用函数`ko.toJS`或`ko.toJSON`

```
var myViewModel = function() {
    this.arr1 = ko.observableArray([]);
    this.arr2 = ko.observableArray(ko.toJS(this.arr1)); 
} 
```

如果你想每次改变第二个数组，当第一个被改变时使用订阅者

```
var myViewModel = function() {
    this.arr1 = ko.observableArray([]);
    this.arr2 = ko.observableArray([]);
    this.arr2.subscribe(function(newValue) {
       this.arr2(ko.toJS(this.arr1));
    });
} 
```

# iframe - 使用 SoundCloud oembed API 调用时如何使高度适合内容？

> ID：13341436
> 
> 赞同：0
> 
> 时间：2012-11-12T09:47:20.793
> 
> 标签：iframe, soundcloud, oembed

我正在使用 API 中的[/oembed 调用](http://developers.soundcloud.com/docs/api/reference#oembed)嵌入 SoundCloud 播放器。

首先，关于响应中 iframe 的高度，文档似乎不正确/过时。文档说关于`maxheight`参数：

> 以 px 为单位的最大高度。曲目的默认值为 81，所有其他曲目的默认值为 305。

但是，实际接收到的高度值似乎是轨道的 166 像素和集合的 450 像素。

现在到我的实际问题：

当调用 /oembed 设置/播放列表时，曲目列表下方会有空白区域。有没有办法消除这个空间？换句话说，我可以根据播放列表中的项目数以某种方式设置接收到的 iframe 的高度吗？

我自己检查这个并动态设置高度是行不通的，因为我不允许检查 iframe 的内容，因为 Web 浏览器中的同源策略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:29:09.993

感谢您发现不正确的措辞。我们会尽快解决这个问题。

关于您的问题，是的，您可以`maxheight`在查询中发送参数并将其设置为对您有意义的任何内容。

“当前播放的声音”的高度，连同当前播放列表的标题为 196px，因此要使列出所有声音的可滚动区域的高度为 100px，您可以这样做：

```
var div = document.createElement('div');

$.get(
  'http://soundcloud.com/oembed?' + 
  'url=http://soundcloud.com/eric' + 
  '&format=json&maxheight=296'
)
  .done(function (response) {
    div.innerHTML = response.html;
    document.body.appendChild(div);
  }); 
```

这是一个工作示例：http: [//jsbin.com/aduxex/1/edit](http://jsbin.com/aduxex/1/edit)

# android - 如何使用 Intent 使用官方 Twitter 应用发布推文，然后返回到您的应用？

> ID：13341450
> 
> 赞同：4
> 
> 时间：2012-11-12T09:48:40.937
> 
> 标签：android, twitter, android-intent

我使用此代码开始使用官方 Twitter 应用在​​ Twitter 上发帖：

```
 Intent twitterIntent = new Intent(Intent.ACTION_VIEW); //Intent.ACTION_VIEW
    twitterIntent.setAction("android.intent.action.SEND");
    twitterIntent.setFlags(0x3000000);  
    twitterIntent.setType("text/plain");    
    twitterIntent.setClassName("com.twitter.android", "com.twitter.android.PostActivity");
    twitterIntent.putExtra(Intent.EXTRA_TEXT, ("Random post"));
    startActivity(twitterIntent); 
```

在使用它之前，我还会检查此意图是否可用：

```
public static boolean canReceiveIntent (Intent intent, Context c) {

    PackageManager packageManager = c.getPackageManager();
    List<ResolveInfo> activities = packageManager.queryIntentActivities(intent, 0);
    boolean isIntentSafe = activities.size() > 0;

    return isIntentSafe;
} 
```

它工作正常，但在发布推文（在提要上）后 Twitter 应用程序仍然打开。我也尝试使用 startActivityForresult()，但它崩溃并出现错误：

```
java.lang.RuntimeException: android.util.AndroidRuntimeException: FORWARD_RESULT_FLAG used while also requesting a result 
```

发布推文后如何返回我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:35:22.733

IMO官方Twitter应用程序不尊重Android Intent生命周期，在通过startActivityForResult方法调用接收到ACTION_VIEW或ACTION_SEND Intent后自行完成，而是保持打开状态并破坏任何发送此类Intent的应用程序的体验。

# apache - Apache 显示 MP4 文件的内容而不是下载提示

> ID：13341453
> 
> 赞同：1
> 
> 时间：2012-11-12T09:48:50.870
> 
> 标签：apache, mp4

我在 Linux 上运行 Apache，当我转到一个 .mp4 文件的 url 而不是让我下载文件时，它会显示文件的内容（作为损坏的文本）

例如输出是

���ftypisom���isomiso2avc1mp41��*moov���lmvhd����̴�d̴�d�������������������������� �������������������������@�������������������������� ��������Htrak���\tkhd���̴�d̴�d������������������������������ ����������������������������@������������$edts...elst... ����������������mdia��� mdhd����̴�d̴�d������������-hdlr������ ����������������VideoHandler����kminf����vmhd��������������

如何让 Apache 正确地服务它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:06:30.657

添加`AddType`指令：

```
AddType video/mp4 .mp4 
```

这将导致 Apache 将正确的标头发送到您的浏览器，然后浏览器将选择正确的方法来下载或播放媒体文件。

确保您已`mod_mime`安装并激活（但我认为它是默认设置的；我从来没有遇到过任何问题）。

更多信息在这里：[http ://httpd.apache.org/docs/2.2/mod/mod_mime.html](http://httpd.apache.org/docs/2.2/mod/mod_mime.html)

# arrays - MATLAB 初始化一个数组属性

> ID：13341454
> 
> 赞同：2
> 
> 时间：2012-11-12T09:48:52.040
> 
> 标签：arrays, matlab

我有一个名为 class_geometry 的类，它保存网格中每个单元格的几何量。这些数量中的一个是单元格四个角中每个角的 x 位置。然后我初始化这些类对象的数组（不确定我的术语是否正确）。我的问题是我不知道如何在我的类 def 中初始化一个数组。这是我的课：

```
classdef class_geometry
    properties
        dx1;
        dx2;
        dx3;
        dx4;
    end
end 
```

我希望只有 dx 包含四个不同的值：

```
classdef class_geometry
    properties
        dx;
    end
end 
```

所以最后我可以做这样的事情：

```
for i = 1:IL+1
    for j = 1:JL+1
        cell(i,j).dx(1) = x_grid(i+1,j)   - x_grid(i,j);
        cell(i,j).dx(2) = x_grid(i+1,j+1) - x_grid(i+1,j);
        cell(i,j).dx(3) = x_grid(i,j+1)   - x_grid(i+1,j+1);
        cell(i,j).dx(4) = x_grid(i,j)     - x_grid(i,j+1);
    end
end 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:04:46.843

*如果问题是在*类中初始化一个数组，则必须定义一个[构造函数](http://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29)。初始化对象时调用构造函数，旨在为对象成员分配内存。

这是您如何初始化和清空数组的方法`dx`

```
 classdef class_geometry
       methods

         function obj = class_geometry()   //Constructor function
             obj.dx = zeros(1,4);   //because you had 4 entries
             ...

         end

        end
        .....
   end 
```

此外，如果要初始化`dx`构造函数中包含的值，则必须将当前网格单元的索引/索引传递给它

```
 function obj = class_geometry(i,j)   //Constructor function, 2nd version
                                            //i,j indices of the cell
             obj.dx = zeros(1,4);   //because you had 4 entries
              dx(1) = x_grid(i+1,j)   - x_grid(i,j);
              dx(2) = x_grid(i+1,j+1) - x_grid(i+1,j);
              dx(3) = x_grid(i,j+1)   - x_grid(i+1,j+1);
              dx(4) = x_grid(i,j)     - x_grid(i,j+1);

       end 
```

现在，您可以将单元格初始化为

```
 cell(i,j) = class_geometry(i,j); //forall i,j. 
```

* * *

相反，如果问题是*对象数组的初始化*，您可能需要考虑[这个参考](http://www.mathworks.it/it/help/matlab/matlab_oop/creating-object-arrays.html#bsw8dee)。

* * *

最后，我的猜测是您正在尝试的矢量化是次优的。

因为你在矩阵中有你的网格，所以`x_grid`像（对于第一种情况）这样的矢量化

```
 dx_1 = diff(x_grid,1,1); //computes x_grid(i+1,j) - x_grid(i,j); 
                           //forall i,j producing the difference matrix 
```

会更有效率。它会为你节省很多*外部*周期（在课堂上）。

# jvm-crash - JVM 在 Full GC 期间崩溃

> ID：13341455
> 
> 赞同：3
> 
> 时间：2012-11-12T09:48:57.923
> 
> 标签：jvm-crash

我正在使用 JDK1.5 运行应用程序，并且在完整 gc 运行期间，JVM 崩溃并且应用程序终止。我试图找到答案并搜索所有博客但无济于事。请帮助解决这个问题。

## 下面是我对 JVM 的配置。

```
$JAVA -server -Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.port=55555 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Xms200m -Xmx200m -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -Xloggc:/tmp/gc.log -cp $CLASSPATH org.jpos.q2.Q2 $* -d $DEPLOYDIR 
```

## 下面是 gc.log 的最后一部分，直到它在完全 GC 期间终止。

```
781871.288: [GC [PSYoungGen: 2112K->64K(2304K)] 10821K->8773K(13504K), 0.0008360 secs]
781883.248: [GC [PSYoungGen: 2112K->96K(2304K)] 10821K->8805K(13504K), 0.0007630 secs]
781895.307: [GC [PSYoungGen: 2144K->128K(2304K)] 10853K->8837K(13504K), 0.0006810 secs]
781907.313: [GC [PSYoungGen: 2176K->128K(2304K)] 10885K->8837K(13504K), 0.0007420 secs]
781918.598: [GC [PSYoungGen: 2176K->160K(2304K)] 10885K->8869K(13504K), 0.0006410 secs]
781918.755: [GC [PSYoungGen: 2208K->224K(2304K)] 12837K->10869K(13504K), 0.0007600 secs]
781919.345: [GC [PSYoungGen: 2272K->320K(2368K)] 12917K->11032K(13568K), 0.0008320 secs]
781922.512: [GC [PSYoungGen: 2344K->353K(2368K)] 13056K->11139K(13568K), 0.0011440 secs]
781926.274: [GC [PSYoungGen: 2337K->416K(2432K)] 13123K->11978K(14464K), 0.0012700 secs]
781926.275: [Full GC [PSYoungGen: 416K->0K(2432K)] [PSOldGen: 11562K->8899K(11776K)] 11978K->8899K(14208K) [PSPermGen: 24042K->23972K(24064K)], 0.0793210 secs]
781935.368: [GC [PSYoungGen: 1984K->96K(2688K)] 10883K->8995K(14464K), 0.0008100 secs]
781947.380: [GC [PSYoungGen: 2080K->183K(2752K)] 10979K->9082K(14528K), 0.0006650 secs]
781959.390: [GC [PSYoungGen: 2167K->96K(2624K)] 11066K->8995K(14400K), 0.0007680 secs]
781971.064: [GC [PSYoungGen: 2080K->160K(2688K)] 10979K->9059K(14464K), 0.0007760 secs]
781971.424: [GC [PSYoungGen: 2144K->259K(2560K)] 11043K->9158K(14336K), 0.0009450 secs]
781983.433: [GC [PSYoungGen: 2243K->259K(2624K)] 11142K->9158K(14400K), 0.0007780 secs]
781993.612: [GC [PSYoungGen: 2243K->192K(2496K)] 11142K->9130K(14272K), 0.0009680 secs]
781995.461: [GC [PSYoungGen: 2176K->323K(2560K)] 11114K->9286K(14336K), 0.0008130 secs]
782007.473: [GC [PSYoungGen: 2307K->227K(2560K)] 11270K->9266K(14336K), 0.0008820 secs]
782018.965: [GC [PSYoungGen: 2211K->96K(2560K)] 11250K->9223K(14336K), 0.0014000 secs]
782019.160: [GC [PSYoungGen: 1686K->192K(2432K)] 10813K->9359K(14208K), 0.0007610 secs]
782023.473: [GC [PSYoungGen: 2176K->160K(2496K)] 11343K->10191K(14272K), 0.0008520 secs]
782031.512: [GC [PSYoungGen: 2144K->128K(2496K)] 12175K->10246K(14272K), 0.0007880 secs]
782043.523: [GC [PSYoungGen: 2112K->64K(2496K)] 12230K->10214K(14272K), 0.0007840 secs]
782055.490: [GC [PSYoungGen: 2048K->160K(2496K)] 12198K->10310K(14272K), 0.0006450 secs]
782067.496: [GC [PSYoungGen: 2144K->64K(2048K)] 12294K->10246K(13824K), 0.0006570 secs]
782075.577: [GC [PSYoungGen: 2048K->64K(2432K)] 12230K->10254K(14208K), 0.0007760 secs]
782087.591: [GC [PSYoungGen: 2048K->64K(2432K)] 12238K->10254K(14208K), 0.0009330 secs]
782099.604: [GC [PSYoungGen: 2048K->32K(2432K)] 12238K->10222K(14208K), 0.0008650 secs]
782107.616: [GC [PSYoungGen: 2016K->304K(2432K)] 12206K->10495K(14208K), 0.0008760 secs]
782110.893: [GC [PSYoungGen: 2288K->176K(2368K)] 12479K->10367K(14144K), 0.0009830 secs]
782112.649: [GC [PSYoungGen: 2160K->288K(2432K)] 12351K->11246K(14208K), 0.0008730 secs]
782112.649: [Full GC [PSYoungGen: 288K->0K(2432K)] [PSOldGen: 10958K->9293K(12352K)] 11246K->9293K(14784K) [PSPermGen: 23990K->23990K(24064K)], 0.0742820 secs]
782123.637: [GC [PSYoungGen: 1984K->32K(2368K)] 11277K->9325K(14720K), 0.0010350 secs]
782135.653: [GC [PSYoungGen: 2016K->64K(2432K)] 11309K->9357K(14784K), 0.0006410 secs]
782147.664: [GC [PSYoungGen: 2048K->64K(2432K)] 11341K->9357K(14784K), 0.0007670 secs]
782159.671: [GC [PSYoungGen: 2048K->64K(2432K)] 11341K->9357K(14784K), 0.0008380 secs]
782171.684: [GC [PSYoungGen: 2048K->64K(2432K)] 11341K->9357K(14784K), 0.0007230 secs]
782183.655: [GC [PSYoungGen: 2048K->64K(2048K)] 11341K->9357K(14400K), 0.0006930 secs]
782195.712: [GC [PSYoungGen: 2048K->64K(2368K)] 11341K->9357K(14720K), 0.0007440 secs]
782205.358: [GC [PSYoungGen: 2048K->64K(2368K)] 11341K->9357K(14720K), 0.0007200 secs]
782215.760: [GC [PSYoungGen: 2048K->64K(2368K)] 11341K->9357K(14720K), 0.0006480 secs]
782227.776: [GC [PSYoungGen: 2048K->64K(2048K)] 11341K->9357K(14400K), 0.0006730 secs]
782239.736: [GC [PSYoungGen: 2048K->96K(2304K)] 11341K->9389K(14656K), 0.0008810 secs]
782251.795: [GC [PSYoungGen: 2080K->128K(2304K)] 11373K->9421K(14656K), 0.0007560 secs]
782262.947: [GC [PSYoungGen: 2112K->128K(2304K)] 11405K->9421K(14656K), 0.0006640 secs]
782271.840: [GC [PSYoungGen: 2112K->160K(2304K)] 11405K->9453K(14656K), 0.0006750 secs]
782283.855: [GC [PSYoungGen: 2144K->160K(2304K)] 11437K->9453K(14656K), 0.0007630 secs]
782295.866: [GC [PSYoungGen: 2144K->160K(2304K)] 11437K->9453K(14656K), 0.0007420 secs]
782307.880: [GC [PSYoungGen: 2144K->128K(2304K)] 11437K->9421K(14656K), 0.0008340 secs]
782319.895: [GC [PSYoungGen: 2112K->128K(2304K)] 11405K->9421K(14656K), 0.0008680 secs]
782331.885: [GC [PSYoungGen: 2112K->96K(2368K)] 11405K->9389K(14720K), 0.0008060 secs]
782343.920: [GC [PSYoungGen: 2208K->160K(2368K)] 11501K->9453K(14720K), 0.0007720 secs]
782355.936: [GC [PSYoungGen: 2272K->96K(2368K)] 11565K->9389K(14720K), 0.0009360 secs]
782367.952: [GC [PSYoungGen: 2208K->128K(2368K)] 11501K->9421K(14720K), 0.0008270 secs]
782379.982: [GC [PSYoungGen: 2240K->96K(2368K)] 11533K->9389K(14720K), 0.0009960 secs]
782391.997: [GC [PSYoungGen: 2208K->128K(2368K)] 11501K->9421K(14720K), 0.0007990 secs]
782404.016: [GC [PSYoungGen: 2240K->128K(2368K)] 11533K->9421K(14720K), 0.0007950 secs]
782416.021: [GC [PSYoungGen: 2240K->128K(2368K)] 11533K->9445K(14720K), 0.0007770 secs]
782428.037: [GC [PSYoungGen: 2240K->128K(2368K)] 11557K->9445K(14720K), 0.0007330 secs]
782440.060: [GC [PSYoungGen: 2240K->96K(2368K)] 11557K->9413K(14720K), 0.0007770 secs]
782452.080: [GC [PSYoungGen: 2208K->128K(2432K)] 11525K->9445K(14784K), 0.0007520 secs]
782464.099: [GC [PSYoungGen: 2304K->96K(2368K)] 11621K->9413K(14720K), 0.0008620 secs]
782476.120: [GC [PSYoungGen: 2272K->96K(2368K)] 11589K->9413K(14720K), 0.0008520 secs]
782490.779: [GC [PSYoungGen: 2272K->192K(2368K)] 11589K->9509K(14720K), 0.0006790 secs]
782500.125: [GC [PSYoungGen: 2368K->224K(2432K)] 11685K->9541K(14784K), 0.0009220 secs]
782512.153: [GC [PSYoungGen: 2400K->224K(2432K)] 11717K->9541K(14784K), 0.0008990 secs]
782524.172: [GC [PSYoungGen: 2400K->224K(2496K)] 11717K->9541K(14848K), 0.0009810 secs]
782536.195: [GC [PSYoungGen: 2400K->224K(2496K)] 11717K->9541K(14848K), 0.0008980 secs]
782548.215: [GC [PSYoungGen: 2400K->224K(2496K)] 11717K->9541K(14848K), 0.0007980 secs]
782559.372: [GC [PSYoungGen: 2249K->288K(2496K)] 11566K->9669K(14848K), 0.0007870 secs]
782559.720: [GC [PSYoungGen: 2464K->352K(2496K)] 13765K->11725K(14848K), 0.0008590 secs]
782560.883: [GC [PSYoungGen: 2464K->419K(2560K)] 13837K->11885K(14912K), 0.0009040 secs]
782575.903: [GC [PSYoungGen: 2531K->483K(2624K)] 13997K->11949K(14976K), 0.0010410 secs]
782585.920: [GC [PSYoungGen: 2531K->419K(2688K)] 13997K->11885K(15040K), 0.0016260 secs]
782596.276: [GC [PSYoungGen: 2467K->320K(2688K)] 13933K->11929K(15040K), 0.0008940 secs]
782608.291: [GC [PSYoungGen: 2368K->320K(2432K)] 13977K->11929K(14784K), 0.0007790 secs]
782620.307: [GC [PSYoungGen: 2368K->256K(2624K)] 13977K->11865K(14976K), 0.0010760 secs]
782632.318: [GC [PSYoungGen: 2304K->288K(2624K)] 13913K->11897K(14976K), 0.0011900 secs]
782644.333: [GC [PSYoungGen: 2336K->256K(2496K)] 13945K->11865K(14848K), 0.0009720 secs]
782656.348: [GC [PSYoungGen: 2304K->288K(2560K)] 13913K->11897K(14912K), 0.0008570 secs]
782668.362: [GC [PSYoungGen: 2336K->256K(2560K)] 13945K->11865K(14912K), 0.0008460 secs]
782680.382: [GC [PSYoungGen: 2304K->256K(2560K)] 13913K->11865K(14912K), 0.0008630 secs]
782692.397: [GC [PSYoungGen: 2304K->288K(2432K)] 13913K->11897K(14784K), 0.0010490 secs]
782704.412: [GC [PSYoungGen: 2336K->320K(2496K)] 13945K->11929K(14848K), 0.0007630 secs]
782716.390: [GC [PSYoungGen: 2368K->224K(2496K)] 13977K->11897K(14848K), 0.0008310 secs]
782728.394: [GC [PSYoungGen: 2272K->192K(2496K)] 13945K->11913K(14848K), 0.0009370 secs]
782740.448: [GC [PSYoungGen: 2240K->160K(2496K)] 13961K->12001K(14848K), 0.0007460 secs]
782752.456: [GC [PSYoungGen: 2208K->64K(2496K)] 14049K->11905K(14848K), 0.0011290 secs]
782764.461: [GC [PSYoungGen: 2112K->96K(2560K)] 13953K->11937K(14912K), 0.0007870 secs]
782773.051: [GC [PSYoungGen: 2143K->64K(2560K)] 13985K->11921K(14912K), 0.0011620 secs]
782784.530: [GC [PSYoungGen: 2112K->128K(2432K)] 13969K->11985K(14784K), 0.0007680 secs]
782796.553: [GC [PSYoungGen: 2176K->96K(2496K)] 14033K->11953K(14848K), 0.0007890 secs]
782808.567: [GC [PSYoungGen: 2144K->128K(2496K)] 14001K->11985K(14848K), 0.0006670 secs]
782820.583: [GC [PSYoungGen: 2176K->96K(2496K)] 14033K->11953K(14848K), 0.0007790 secs]
782832.595: [GC [PSYoungGen: 2144K->128K(2496K)] 14001K->11985K(14848K), 0.0006820 secs]
782844.611: [GC [PSYoungGen: 2176K->96K(2496K)] 14033K->11953K(14848K), 0.0007800 secs]
782856.630: [GC [PSYoungGen: 2144K->128K(2368K)] 14001K->11985K(14720K), 0.0007110 secs]
782868.645: [GC [PSYoungGen: 2176K->96K(2432K)] 14033K->11953K(14784K), 0.0007570 secs]
782880.660: [GC [PSYoungGen: 2144K->96K(2432K)] 14001K->11953K(14784K), 0.0007800 secs]
782892.668: [GC [PSYoungGen: 2144K->96K(2432K)] 14001K->11953K(14784K), 0.0008600 secs]
782904.681: [GC [PSYoungGen: 2144K->128K(2432K)] 14001K->11985K(14784K), 0.0006960 secs]
782916.706: [GC [PSYoungGen: 2176K->96K(2176K)] 14033K->11953K(14528K), 0.0008780 secs]
782928.720: [GC [PSYoungGen: 2144K->128K(2368K)] 14001K->11985K(14720K), 0.0007100 secs]
782940.733: [GC [PSYoungGen: 2176K->128K(2368K)] 14033K->11985K(14720K), 0.0006950 secs]
782952.746: [GC [PSYoungGen: 2176K->96K(2368K)] 14033K->11969K(14720K), 0.0008680 secs]
782961.450: [GC [PSYoungGen: 2144K->128K(2368K)] 14017K->12017K(14720K), 0.0007920 secs]
782972.796: [GC [PSYoungGen: 2176K->96K(2368K)] 14065K->11985K(14720K), 0.0008230 secs]
782988.776: [GC [PSYoungGen: 2208K->96K(2368K)] 14097K->11985K(14720K), 0.0007900 secs]
783000.782: [GC [PSYoungGen: 2208K->96K(2368K)] 14097K->11985K(14720K), 0.0007880 secs]
783012.787: [GC [PSYoungGen: 2208K->64K(2368K)] 14097K->11953K(14720K), 0.0011260 secs]
783024.795: [GC [PSYoungGen: 2176K->96K(2368K)] 14065K->11985K(14720K), 0.0007960 secs]
783036.856: [GC [PSYoungGen: 2208K->64K(2368K)] 14097K->11953K(14720K), 0.0011490 secs]
783048.881: [GC [PSYoungGen: 2176K->160K(2368K)] 14065K->12057K(14720K), 0.0007650 secs]
783060.896: [GC [PSYoungGen: 2272K->128K(2368K)] 14169K->12025K(14720K), 0.0006980 secs]
783072.913: [GC [PSYoungGen: 2240K->96K(2368K)] 14137K->11993K(14720K), 0.0007010 secs]
783084.934: [GC [PSYoungGen: 2208K->64K(2368K)] 14105K->11961K(14720K), 0.0011290 secs]
783096.954: [GC [PSYoungGen: 2176K->128K(2368K)] 14073K->12025K(14720K), 0.0008070 secs]
783108.971: [GC [PSYoungGen: 2240K->64K(2368K)] 14137K->11961K(14720K), 0.0015050 secs]
783120.988: [GC [PSYoungGen: 2176K->96K(2368K)] 14073K->11993K(14720K), 0.0008080 secs]
783133.004: [GC [PSYoungGen: 2208K->96K(2368K)] 14105K->11993K(14720K), 0.0008700 secs]
783145.012: [GC [PSYoungGen: 2208K->160K(2368K)] 14105K->12081K(14720K), 0.0007960 secs]
783157.035: [GC [PSYoungGen: 2272K->96K(2368K)] 14193K->12017K(14720K), 0.0011550 secs]
783169.051: [GC [PSYoungGen: 2208K->128K(2368K)] 14129K->12049K(14720K), 0.0008070 secs]
783171.978: [GC [PSYoungGen: 2240K->227K(2368K)] 14161K->12201K(14720K), 0.0010940 secs]
783171.981: [GC [PSYoungGen: 2339K->227K(2816K)] 14313K->18089K(20928K), 0.0036700 secs]
783171.984: [Full GC 
```

## 下面是我遇到的hs_err_pid22926。

```
#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0x0000002a95aa0a8c, pid=22926, tid=1084606816
#
# Java VM: Java HotSpot(TM) 64-Bit Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# V  [libjvm.so+0x51ca8c]
#

---------------  T H R E A D  ---------------

Current thread (0x0000002aebf9a230):  VMThread [id=22935]

siginfo:si_signo=11, si_errno=0, si_code=128, si_addr=0x0000000000000000

Top of Stack: (sp=0x0000000040a5b800)

Instructions: (pc=0x0000002a95aa0a8c)
0x0000002a95aa0a7c:   48 8b 34 c7 48 8b 4e 08 48 8b 51 10 48 8d 79 10
0x0000002a95aa0a8c:   ff 92 b0 00 00 00 48 8b 13 8b 02 85 c0 75 d5 eb 

Stack: [0x000000004095c000,0x0000000040a5d000),  sp=0x0000000040a5b800,  free space=1022k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)

VM_Operation (0x0000000043181e80): parallel gc failed allocation, mode: safepoint,     requested by thread 0x0000002af3225d20

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x0000002af3c1b360 JavaThread "RMI TCP Connection(396)-190.252.10.99" daemon [_thread_blocked, id=29055]
  0x0000002af4e1d6a0 JavaThread "JMX server connection timeout 7033" daemon [_thread_blocked, id=5785]
  0x0000002aef262c70 JavaThread "RMI LeaseChecker" daemon [_thread_blocked, id=23378]
  0x0000002aef1a4740 JavaThread "Timer-1" daemon [_thread_blocked, id=23012]
  0x0000002af352c660 JavaThread "Thread-5" [_thread_blocked, id=23001]
  0x0000002af2ed1f00 JavaThread "Thread-2" daemon [_thread_blocked, id=22948]
  0x0000002af2e9b920 JavaThread "RMI TCP Accept-0" daemon [_thread_in_native, id=22946]
  0x0000002af2e7cf90 JavaThread "RMI TCP Accept-11223" daemon [_thread_in_native, id=22945]
  0x0000002af2e79640 JavaThread "RMI TCP Accept-0" daemon [_thread_in_native, id=22944]
  0x0000002af2e760d0 JavaThread "Timer-0" daemon [_thread_blocked, id=22943]
  0x0000002aeedfe740 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=22942]
  0x0000002aeedfcb20 JavaThread "CompilerThread1" daemon [_thread_blocked, id=22941]
  0x0000002aeedfb580 JavaThread "CompilerThread0" daemon [_thread_blocked, id=22940]
  0x0000002aeedf9e30 JavaThread "AdapterThread" daemon [_thread_blocked, id=22939]
  0x0000002aeedf8ce0 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=22938]
  0x0000002aebf9ef20 JavaThread "Finalizer" daemon [_thread_blocked, id=22937]
  0x0000002aebf9e640 JavaThread "Reference Handler" daemon [_thread_blocked, id=22936]
  0x00000000401171b0 JavaThread "main" [_thread_blocked, id=22926]

Other Threads:
=>0x0000002aebf9a230 VMThread [id=22935]

VM state:at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x0000000040115f60/0x0000000040115fb0] Threads_lock - owner thread: 0x0000002aebf9a230
[0x0000000040116650/0x0000000040116680] Heap_lock - owner thread: 0x0000002af3225d20

Heap
 PSYoungGen      total 2816K, used 227K [0x0000002ae7b10000, 0x0000002ae8270000, 0x0000002aebdb0000)
  eden space 2560K, 0% used [0x0000002ae7b10000,0x0000002ae7b10000,0x0000002ae7d90000)
  from space 256K, 88% used [0x0000002ae7d60000,0x0000002ae7d98f00,0x0000002ae7da0000)
  to   space 18014398509481792K, 0% used     [0x0000002ae7d90000,0x0000002ae7d90000,0x0000002ae7d60000)
 PSOldGen        total 18112K, used 17862K [0x0000002adf5b0000, 0x0000002ae0760000, 0x0000002ae7b10000)
  object space 18112K, 98% used [0x0000002adf5b0000,0x0000002ae0721890,0x0000002ae0760000)
 PSPermGen       total 24064K, used 23990K [0x0000002ada3b0000, 0x0000002adbb30000, 0x0000002adf5b0000)
  object space 24064K, 99% used [0x0000002ada3b0000,0x0000002adbb1d940,0x0000002adbb30000)

Dynamic libraries:
40000000-4000e000 r-xp 00000000 08:06     2114894                            /usr/java/jdk1.5.0_06/bin/java

VM Arguments:
jvm_args: -Dcom.sun.management.jmxremote=true -    Dcom.sun.management.jmxremote.port=11223 -    Dcom.sun.management.jmxremote.authenticate=false -Xms200m -Xmx200m -XX:+PrintGCTimeStamps -    XX:+PrintGCDetails -Xloggc:/tmp/gc.log
java_command: org.jpos.q2.Q2 -d /home/server/deploy
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=/usr/java/jdk1.5.0_06
PATH=/home/server/deploy:/home/server/bin:/usr/java/jdk1.5.0_06/bin:/opt/apache-ant-    1.6.2/bin:/usr/lib64/qt-    3.3/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/home/server/bin LD_LIBRARY_PATH=/usr/java/jdk1.5.0_06/jre/lib/amd64/server:/usr/java/jdk1.5.0_06/jre/lib/amd64:/usr/java/jdk1.5.0_06/jre/../lib/amd64
SHELL=/bin/bash

Signal Handlers:
SIGTERM: [libjvm.so+0x5549e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x14000004

---------------  S Y S T E M  ---------------

OS:Red Hat Enterprise Linux AS release 4 (Nahant Update 8)

uname:Linux 2.6.9-89.ELsmp #1 SMP Mon Apr 20 10:33:05 EDT 2009 x86_64
libc:glibc 2.3.4 NPTL 2.3.4 
rlimit: STACK 10240k, CORE 0k, NPROC 278528, NOFILE 1024, AS infinity
load average:0.06 0.04 0.04

CPU:total 8 em64t ht

Memory: 4k page, physical 32934232k(90420k free), swap 30716272k(30151460k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (1.5.0_06-b05) for linux-amd64, built on Nov 10 2005 11:45:12 by java_re with gcc 3.2.2 (SuSE Linux) 
```

提前谢谢(^o^)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T01:34:49.877

看起来可能是内存泄漏的迹象。我建议自动添加 HeapDump

> -XX:+HeapDumpOnOutOfMemoryError

切换到 Java 参数。并通过 VisualVM 或[Eclipse Memory Analyzer等各种工具运行](http://www.eclipse.org/mat/)

# c++ - C++ 隐式生成的赋值运算符的异常安全性

> ID：13341456
> 
> 赞同：18
> 
> 时间：2012-11-12T09:48:59.387
> 
> 标签：c++, exception, assignment-operator, exception-safety

我的理解是 C++*隐式生成*的赋值运算符会按**成员进行复制（这似乎也被**[这个答案](https://stackoverflow.com/a/1810320/1629821)证实了）。但是，如果在成员复制期间抛出异常（例如，因为无法分配该成员的资源），被复制的对象是否会陷入无效状态？

换句话说，隐式生成的赋值运算符是否只实现了*基本保证*，而不是强保证？

如果我们想为我们的类副本提供*强有力*的保证，我们是否必须使用**复制和交换**习语*手动实现赋值运算符？*

 *** * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T09:52:09.517

如果您想提供异常保证，并且默认赋值运算符不是 nothrow，那么通常您需要编写一个。

默认的复制分配甚至不一定能达到基本的保证，即没有资源泄漏*并且类不变量被保留*。分配一些数据成员但不是全部可能会使目标处于不满足类不变量的状态，具体取决于特定的类。

所以你必须评估你的类的默认运算符——如果它可以抛出，并且通过抛出使对象处于“无效”状态，那么你必须抑制它。或者削弱定义的类不变量，但这对用户没有多大帮助。

有（至少）一种特殊情况。如果除了一个之外的所有数据成员都没有赋值，并且特殊的具有强异常安全赋值，并且是类中的*第一个*数据成员，那么默认赋值运算符也将是强安全的。如果您依赖它，您可能需要非常仔细地评论它，但是，它可能被证明非常脆弱！**

# amazon-s3 - 限制亚马逊 s3 以限制预算

> ID：13341460
> 
> 赞同：5
> 
> 时间：2012-11-12T09:49:11.337
> 
> 标签：amazon-s3, amazon-web-services, bandwidth-throttling

我正在创建一个小型站点，并希望使用 Amazon 的 S3 来托管和交付用户上传的图像。但是，我有点担心带宽使用（和账单），因为我读过一些关于恶意用户发送高额账单的恐怖故事。显而易见的事情是防止盗链。但这只会关闭只想包含图像的人。仍然有可能有人故意提出大量请求。除了在 EC2 中运行您自己的前端（这有点违背 S3 的目的？！）和运行一个关闭服务的监控脚本之外，我还能做些什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T03:22:40.350

一种选择是设置[CloudWatch 账单警报](http://aws.amazon.com/about-aws/whats-new/2012/05/10/announcing-aws-billing-alerts/)，当您的使用量达到某个阈值时，它将向您发送一封电子邮件。达到阈值时，您将收到一封电子邮件，然后您可以调查原因并采取适当的措施。

虽然我没有尝试过，但您应该能够设置更自动化的方法。这些 CloudWatch 警报发布到名为“CloudWatchNotifications”的 SNS 主题。您可以向该主题添加订阅，以将通知传送到 HTTP 端点。此端点可以自动限制对您的 S3 存储桶的访问，直到您确定要采取的操作。

关于您对特定恶意用户的担忧，请参阅[这篇文章](http://blog.petecheslock.com/2012/05/01/how-to-setup-aws-s3-access-from-specific-ips/)，了解如何在识别恶意用户后实施 IP 地址限制。

# windows - windows批处理多行命令？

> ID：13341462
> 
> 赞同：1
> 
> 时间：2012-11-12T09:49:12.193
> 
> 标签：windows, batch-file, command

有人可以告诉我以下命令行中不正确的内容是什么吗？

```
${WORKSPACE} = C:\jenkins\workspace\compile-job

cmd.exe /s /c START /b /BELOWNORMAL
mkdir C:\jenkins\workspace\old
move /Y %WORKSPACE%\* C:\jenkins\workspace\old
rmdir /q /s C:\jenkins\workspace\old 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:27:30.227

很多。

1.  `${WORKSPACE} = ...`既不`cmd`是 PowerShell 语法，也不是 PowerShell 语法，这毫无意义。利用

    ```
    set WORKSPACE=C:\jenkins\workspace\compile-job 
    ```

    反而。

2.  您可以通过以 . 结束之前的行来获得多行命令`^`。但是，您想要执行三个命令，而不仅仅是一个。一种选择是编写一个批处理文件来执行（当然是最干净的方法）。但既然你已经有了一个，你可以变得聪明：

    ```
    if not %1==x (
      START "" /b /BELOWNORMAL %0 x
      goto :eof
    )

    set WORKSPACE=C:\jenkins\workspace\compile-job

    mkdir C:\jenkins\workspace\old
    move /Y %WORKSPACE%\* C:\jenkins\workspace\old
    rmdir /q /s C:\jenkins\workspace\old 
    ```

    这将再次执行批处理文件，但带有一个参数，在批处理中，我们查看该参数是否存在并完成工作。

# c++ - 找出 Windows 无法关闭的原因

> ID：13341469
> 
> 赞同：1
> 
> 时间：2012-11-12T09:50:15.123
> 
> 标签：c++, windows, reboot

我有一个有时需要重新启动 Windows 的 C++ 应用程序，我们使用 ExitWindowsEx 执行此操作

```
if (!ExitWindowsEx(EWX_REBOOT | EWX_FORCE, SHTDN_REASON_MINOR_MAINTENANCE))
    return false; 
```

ExitWindowsEx 的返回值表示参数是否被理解以及 Windows 是否成功处理了关机请求，但关机本身是异步的，仅从返回值无法判断重启是否真的有效。

我们有一种情况，ExitWindowsEx 总是成功返回，但有时重启失败，我们不知道为什么。除了调用此函数之外，我还有什么方法可以跟踪重新启动，或者查询它失败的原因？

谢谢，

账单。

# r - 使用 ggplot 绘制每日数据的问题

> ID：13341472
> 
> 赞同：1
> 
> 时间：2012-11-12T09:50:20.537
> 
> 标签：r, ggplot2

我试图从 ggplot 中的 9 个变量中绘制每日数据，但我得到的图表无法正确处理日期变量。x 轴不可读，无法读取该图。我猜日期处理存在问题。

这是数据： [https ://dl.dropbox.com/u/22681355/su.csv](https://dl.dropbox.com/u/22681355/su.csv)

这是我一直在使用的代码：

```
su=read.csv(file="su.csv", head=TRUE)

meltdf=melt(su)

ggplot(meltdf, aes(x=Date, y=value, colour=variable, group=variable))+geom_line() 
```

这是输出：

```
https://dl.dropbox.com/u/22681355/output.jpg 
```

这是在excel中完成的相同情节，为什么看起来完全不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:14:26.170

现在`Date`是一个因素，而不是真正的 R 日期对象。您可以使用`strptime`将字符串解析为`POSIXct`对象。这将产生更好的结果。

* * *

与您的问题没有直接关系，但此外，您可以使用`facet_wrap`拆分时间序列并将它们堆叠在一起。我写了一个小函数来计算所需的索引`facet_wrap`：

```
createTimeseriesCutupIdx = function(ncuts, nrows, labels) {
  if(missing(labels)) labels = LETTERS[1:ncuts]
  pointsPerCutup = floor((1/ncuts) * nrows)
  idx = rep(labels, each = pointsPerCutup)
  if(length(idx) < nrows) {
    idx[(length(idx) + 1):nrows] <- idx[length(idx)]
  }   
  return(idx)
} 
```

以及如何使用它的示例：

```
require(ggplot2); theme_set(theme_bw())
tserie_length = 5000
df = data.frame(t = as.POSIXct("2006-01-01") + (1:tserie_length) * 3600, 
                value = runif(tserie_length))
ggplot(df, aes(x = t, y = value)) + geom_line() 
```

![在此处输入图像描述](../Images/f0e2588e0222d9252d11e6976ba33fe4.png)

```
df$idx = createTimeseriesCutupIdx(ncuts = 5, nrows = nrow(df))
ggplot(df, aes(x = t, y = value)) + 
   geom_line() + 
   facet_wrap(~ idx, scales = "free_x", ncol = 1) 
```

![在此处输入图像描述](../Images/51af43d5b8f3be331f79f1ed861f45b6.png)

这使得以有意义的方式绘制更大的时间序列成为可能。

# syntax - 这里的 && 语法有什么问题？

> ID：13341474
> 
> 赞同：0
> 
> 时间：2012-11-12T09:50:24.253
> 
> 标签：syntax

```
function lastfm_entity_update($entity, $type){
    if (isset($type)) && (entity_get_info($type) == 'subject') {

    };
}; 
```

我想检查类型是否存在以及类型是否等于主题，但代码给出了语法错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:51:58.290

尝试：-

```
 if (isset($type) && entity_get_info($type) == 'subject') { 
```

（括号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:54:22.930

我认为问题不在于“&&”运算符，而在于您的括号。“如果”语法要求的是

```
if (...) { .. } 
```

但你写道：

```
if (...) && (...) {} 
```

看？

只需添加另一个括号对：

```
if ((isset($type)) && (entity_get_info($type) == 'subject')) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:51:34.933

试试 if (isset($type)) && ((entity_get_info($type) == 'subject'))

# php - PHP 表格和标题的位置歪斜

> ID：13341478
> 
> 赞同：1
> 
> 时间：2012-11-12T09:50:43.950
> 
> 标签：php, html

我正在编写的这个 php 代码大纲显示了 3 个表和表名的组合。当一次显示一个时，标题在表格上方，但是当所有三个都显示时，标签内的文本会堆积在表格上方。知道如何解决这个问题吗？

```
<?php

if($_GET["pokemon"] == 'P')
     {
     #query to find pokemon cards in a deck
     <h2>Pokemon</h2>
     <table> #print a table based on query
     }

if($_GET["trainer"] == 'T')
     {
     #query to find trainer cards in a deck
     <h2>Trainers</h2>
     <table> #print a table based on query
     }

if($_GET["energies"] == 'E')
     {
     #query to find energy cards in a deck
     <h2>Energies</h2>
     <table> #print a table based on query
     }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:56:19.503

确保关闭`<table></table>`标签

您的其他标签也是如此：

```
<tr>
    <th></th>
</tr>
<tr>
    <td></td>
</tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:58:09.107

您需要关闭所有打开的标签..

恕我直言，您正在打开三个表格标签，并且可能只关闭一次..

另外，在您的帖子中添加更多代码..

# java - 性能改进 - 如何开始

> ID：13341481
> 
> 赞同：0
> 
> 时间：2012-11-12T09:50:51.643
> 
> 标签：java, performance, jakarta-ee, jboss, httpclient

我有一个在 jboss 5 上运行的应用程序，使用 struts2、JAXB、Apache HTTP 客户端来联系业务逻辑中的其他服务器，使用 oracle db 进行一些选择操作和插入日志。大量使用并发哈希图进行会话管理，那里大量静态数据也缓存在 servletcontext 中。我现在获得的 TPS 约为 150 TPS，要求获得 3000 TPS，

1.  这是现实的吗？
2.  我可以开始看什么？

现在使用 java 5

感谢您的任何指示和帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:44:15.647

1.  您必须使用 JProfiler、yourkit 或任何其他分析工具来了解代码级别的瓶颈在哪里。

关于可能看的地方的一些想法：

XML 和序列化：
1\. 我看到了 JAXB 的一些性能问题。
XML 是必需品吗？我知道的大多数 JSON 序列化程序在性能方面都比 JAXB 好。
2.另外，想想如果你需要序列化所有的数据，而不是有一些暂时的（我也遇到过）。3\. 使用 XML 文档 (DOM) 会造成性能损失。

DB：
1\. 使用 explain 分析您的 oracle DB 查询（我希望它在 oracle 中是这样调用的——它会向您展示执行计划并解释它，以便您找到改进的方法）。
2\. 考虑使用存储过程——它们在 Oracle 服务器上编译并且具有更好的性能（与生成的查询相比）。
3\. 在数据库上使用适当的索引。
4\. 在某些情况下，甚至可以考虑数据重复（是的，这很丑，我知道）如果它会消除一些连接。
5\. 了解 IN 与 EXISTS 等问题以及应该使用哪一个。

数据访问层：
1\. 尝试看看是否可以使用一些实体缓存（即——hibernate 的一级或二级缓存，或者你自己的实现）来避免对DB 的冗余查询。

6\. 并发 -
您没有提供足够的信息。
1.您应该考虑使用例如 ReaderWriterLock 而不是“同步”在可能的情况下。
2\. 尝试同步尽可能短的代码区域。

3\. 迁移到JDK 6！我听说他们在那里同步提高了性能。7\. 交易：
1\. 记住事务是昂贵的资源，确保不要为“只读”代码流打开它们。
2\. 确保交易尽可能短。

我可以继续说下去，但你真的必须更多地解释你的结果+系统，这样我们才能真正指导你。

# ios - 如何使用 startMonitoringSignificantLocationChanges 检测位置变化

> ID：13341483
> 
> 赞同：1
> 
> 时间：2012-11-12T09:50:58.430
> 
> 标签：ios, cllocationmanager

根据苹果文档，我使用 iOS4 后的方法 startMonitoringSignificantLocationChanges 方法：

```
For applications that do not need a regular stream of location events, consider using the startMonitoringSignificantLocationChanges method to start the delivery of events instead. This method is more appropriate for the majority of applications that just need an initial user location fix and need updates only when the user moves a significant distance. This interface delivers new events only when it detects changes to the device’s associated cell towers, resulting in less frequent updates and significantly lower power usage. 
```

所以这个接口只有在检测到位置变化时才会传递新的事件，我到底可以用什么方法来检测位置已经发生了显着变化，到目前为止，我是这样的：

```
if ([CLLocationManager significantLocationChangeMonitoringAvailable]) {

        [locationManager startMonitoringSignificantLocationChanges];

    } 
```

我应该使用什么显式方法来显式检测位置已发生重大变化。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:54:49.883

我这样做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

// Override point for customizatio-n after application launch.
id locationValue = [launchOptions objectForKey:UIApplicationLaunchOptionsLocationKey];
if (locationValue)
{
    // create a new manager and start checking for sig changes
    [self log:@"didFinishLaunchingWithOptions location key"];
    m_locManager = [[CLLocationManager alloc] init];
    [self log:@"didFinishLaunchingWithOptions created manager"];
    m_locManager.delegate = self;
    [self log:@"didFinishLaunchingWithOptions set delegate"];
    [m_locManager startMonitoringSignificantLocationChanges];
    [self log:@"didFinishLaunchingWithOptions monitoring sig changes"];
    return YES;
}

[self log:@"didFinishLaunchingWithOptions"];    
return YES;
}

 - (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation 
```

# android - 字符串资源 xml 中的 URL

> ID：13341487
> 
> 赞同：0
> 
> 时间：2012-11-12T09:51:25.543
> 
> 标签：android, string, url, encoding, resources

我在`strings.xml`文件中存储了几个 url。我想在不编码的情况下存储它们（作为原始文本），但是会为and`strings.xml`引发错误。`=``&`

例如：

```
http://www.example.org/index.php?p=616687&ac=some_q 
```

如果我按原样存储链接，它将引发错误：

```
The reference to entity "ac" must end with the ';' delimiter. 
```

但是，如果我替换`&`为`%26`：

```
http://www.example.org/index.php?p=616687%26ac=some_q 
```

虽然这可以正常工作，但不会在浏览器中打开正确的页面。

有什么方法可以在`strings.xml`不格式化或 uri 编码的情况下存储链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:56:42.533

您不能`&`直接使用，因为 XML 文档应该是[格式良好的](http://www.w3.org/TR/2004/REC-xml-20040204/#sec-well-forme)，而问题在于`&`字符本身。对于 XML/HTML，您必须使用`&amp;`实体（或`&#38;`），但对于 URL，请使用[URL 编码](http://en.wikipedia.org/wiki/Percent-encoding)并将`&`其替换为`%26`（就像您所做的那样），这应该可以简单地工作，因为浏览器确实可以理解它们必须要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:59:36.057

您可以使用[http://developer.android.com/reference/android/util/Base64.html对您的 URL 字符串进行 Base64 编码和解码](http://developer.android.com/reference/android/util/Base64.html)

# c# - 在 Windows 窗体应用程序中托管 WPF 应用程序

> ID：13341493
> 
> 赞同：0
> 
> 时间：2012-11-12T09:51:49.253
> 
> 标签：c#, .net, wpf, winforms

我正在使用以下代码在我的 Windows 窗体应用程序中托管 WPF 应用程序：

```
var clientApplication = Process.Start("C:\\WpfApplication1.exe");

SetParent(clientApplication.MainWindowHandle, this.Handle); 
```

WPF 应用程序作为独立应用程序打开，如何强制它使用主窗口窗体打开

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:47:41.677

一个“完整的应用程序”，如果它是一个桌面应用程序，至少包含一个`Window`对象，因为它是一个窗口，所以它不能托管在任何东西中。您需要做的是从 WPF 应用程序中删除任何顶级 Windows，然后您可以使用[ElementHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)托管单个视图（UserControls 或其他类型的非窗口元素） 。

编辑：请注意，为了做到这一点，您必须从您的 winforms 项目中引用 WPF 应用程序项目，或者通过反射在运行时加载所有内容。您无法将 .Exe 文件托管在另一个窗口中。

# c# - 动态创建一个列表（或任何变量），将数据添加到每个列表，然后在 C# 中比较它们

> ID：13341504
> 
> 赞同：-2
> 
> 时间：2012-11-12T09:52:33.197
> 
> 标签：c#, list

我有`list`一些字符串，我想在循环中动态地为每个字符串创建一个列表。

主要思想是通过循环从中获取每个字符串，`list`并以该字符串作为名称创建一个列表。然后向其中添加一些数据。

例子：

```
 List<string> names = new List<string>(); // this is the main list with strings

   foreach (string nm in name)
   {
     // Here create a new list with this name
     // Add data to the list
   }  

   // Now, compare all of them to find duplicate data

   // Give message if any duplicate data found 
```

更新：基本上，我将`list`在运行时使用一些数据库 API 添加数据，字符串名称是该 API 中的键。因此，对于主列表中的每个名称，我将从数据库中检索一些数据，使用该名称创建一个列表并向其中添加数据。稍后我们会将它们放在一起进行比较。所以基本问题仍然是如何`list`在运行时创建这些 s。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:02:39.623

使用通用字典：

```
List<string> names = new List<string>(); // this is the main list with strings
Dictionary<string, List<string>> dict = new Dictionary<string, List<string>>();

foreach (string name in names)
{
    if (!dict.ContainsKey(name))
        dict.Add(name, new List<string>());
    dict[name].Add("another one bytes the dust :)");
} 
```

在上面的示例中，您将拥有一个字典，其中键的数量等于唯一名称的数量，并且您可以通过在其关联列表中具有多个项目的键来查找重复项。

例如：

```
string[] dupes = dict.Keys.ToList().Find(k => dict[k].Count > 1).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:13:36.690

您可以使用`IList<KeyValuePair<String,IList<SomethingData>>>`或`Hastable<String,IList<SomethingData>>`

```
 //fill data to lists
 IList<KeyValuePair<String,IList<SomethingData>>> dataSets=new  List<KeyValuePair<String,IList<SomethingData>>>();
 IList<string> names = new List<String>();
 foreach (string nm in names)
 {
     IList<SomethingData> data = new List<SomethingData>();
     //...fill data
     dataSets.Add(new KeyValuePair<string, IList<SomethingData>>(nm, data));
 } 

 //search lists by name
 String nameForSearch = "test";
 IEnumerable<KeyValuePair<String,IList<SomethingData>>> dataSetsByName = dataSets.Where(ds => ds.Key == nameForSearch); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:00:29.427

使用 Linq to Object 判断列表是否有重复记录

```
bool IsDuplicate  = (names.Count != names.Distinct().Count());

if(IsDuplicate) {
    // Message : List has duplicate values.
} 
```

祝你好运

# java - 使用 EL 调用列表中的方法

> ID：13341506
> 
> 赞同：0
> 
> 时间：2012-11-12T09:52:40.533
> 
> 标签：java, jsp, servlets, jstl, el

假设我有这个代码

```
ArrayList<ArrayList<SomeObject>> listOfObjects = new ArrayList<SomeObject>();

public ArrayList<SomeObject> getFirstObject(){
    return listOfObjects.get(0);
} 
```

`getFirstObject()`如果此方法在 someEntity bean 中，我将如何使用 EL 或 JSTL 在 JSP 中调用方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:56:32.430

如果要通过 JSP 表达式语言调用此函数，则需要创建自定义表达式语言函数。查看本教程：[http ://blog.idleworx.com/2010/04/custom-tags-and-custom-el-functions-in.html](http://blog.idleworx.com/2010/04/custom-tags-and-custom-el-functions-in.html)

# iphone - 核心情节中的触摸事件

> ID：13341508
> 
> 赞同：1
> 
> 时间：2012-11-12T09:52:43.313
> 
> 标签：iphone, objective-c, ios, xcode, core-plot

我正在将此代码用于触摸事件，但它不起作用

```
-(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index 
```

如何在核心图中添加触摸事件，或者我想在每个条形图的顶部显示条形图值。 ![在此处输入图像描述](../Images/564b0087e1b98de1965296f63426afde.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:14:05.020

根据[谷歌论坛中的这个主题](http://code.google.com/p/core-plot/issues/detail?id=168)，对于触摸事件，您使用的委托方法应该可以工作。检查错误是否与设置委托有关。检查`CPTestApp`应用程序以获取示例。

对于第二个问题，如此[处所述](https://groups.google.com/forum/?fromgroups=#!topic/coreplot-discuss/4eJ1JX451gw)，为了在条形图顶部显示条形图值，您可以通过设置添加简单标签`barLabelTextStyle`。您还可以查看以下条形图数据源方法：

```
-(CPTextLayer *)barLabelForBarPlot:(CPBarPlot *)barPlot recordIndex: 
(NSUInteger)index; 
```

再次检查`CPTestApp`示例。您可以使用该`barLabelOffset`属性来设置条的末端和标签之间的空间，如那里所述。

# java - 如何初始化 log4j 2.0 ？LogManager.getContext 带来空指针异常

> ID：13341509
> 
> 赞同：0
> 
> 时间：2012-11-12T09:52:46.583
> 
> 标签：java, log4j

我正在尝试使用 log4j 的当前版本 2.0 beta。我已经包含了所有必要的 log4j jar 文件。启动应用程序只会带来：

```
Exception in thread "main" java.lang.NullPointerException
    at org.apache.logging.log4j.LogManager.getContext(LogManager.java:203)
    at org.apache.log4j.LogManager$PrivateManager.getContext(LogManager.java:62)
    at org.apache.log4j.LogManager.reconfigure(LogManager.java:50)
    at org.apache.log4j.BasicConfigurator.configure(BasicConfigurator.java:28) 
```

两者都不

```
org.apache.log4j.BasicConfigurator.configure(); 
```

也不

```
 private static final Logger log = LogManager.getLogger("..."); 
```

工作了。

有谁知道是什么问题 ？

问候

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T14:46:50.637

您的问题是 BasicConfigurator 未在 log4j v2 中实现。您可以通过从 log4j 1.2 到 log4j 2 的桥访问 BasicConfigurator 类。如果您使用的是 Log4j v2，则不能再使用 BasicConfigurator。

桥接库此时命名为 log4j-1.2-api-2.2.jar。这个问题被问到已经有几年了。

因此，如果您拥有桥接器，则可以访问大多数 Log4j 1.2 类，但它们背后可能没有实现。BasicConfigurator 就是这种情况的一个例子。这就是您收到空指针异常的原因。

如果您可以使用类似的设置，但将级别设置为错误而不是调试，则无需进行任何配置。如果您希望日志消息的级别低于错误，您可能需要创建自己的 BasicConfigurator 版本，或者需要将 log4j2.[xml|yaml|json] 文件放在类路径中。

# .net - 为什么我们每个进程有一个 GC 和一个托管堆？

> ID：13341510
> 
> 赞同：4
> 
> 时间：2012-11-12T09:52:49.367
> 
> 标签：.net, memory-management, garbage-collection

据我了解，在 .NET 中，每个进程有一个 GC，每个进程有一个托管堆（它分为 SOH 和 LOH）。

所以我对此有几个问题：

1.  如果我们在一个进程中有几个应用程序域，那么每个域将在其他域之间共享堆。安全吗？域之间的这种分离是如何执行的？

2.  当 GC 开始工作时，它会暂停工作线程。因此，如果一个应用程序域需要经常启动 GC，它将影响根本不需要垃圾收集的其他域。再一次，域之间的 0、1、2 代或所有对象的 0 代是否来自存储在同一个 0 代区域中的不同域的任何分隔？

3.  为什么 GC 和托管堆是按进程而不是按域实现的？

# javascript - 向 FullCalendar 添加额外的按钮

> ID：13341512
> 
> 赞同：1
> 
> 时间：2012-11-12T09:53:09.937
> 
> 标签：javascript, jquery

我们可以根据需要修改或更改**[FullCalendar](http://arshaw.com/fullcalendar/)**的视图吗？

我想为其添加一个额外的按钮并在其上写入事件。请尽快建议我。任何帮助将不胜感激。

# python - 在 Python 中解析代理后面的主机名

> ID：13341513
> 
> 赞同：1
> 
> 时间：2012-11-12T09:53:11.873
> 
> 标签：python, sockets, proxy, python-sockets

我正在学习python套接字。但是，由于我在代理后面，我无法从不在本地网络（如互联网网站）上的地址解析主机名的 IP。我该怎么做呢 ？这是我的代码：

```
import socket   #for sockets
import sys  #for exit

try:
    #create an AF_INET, STREAM socket (TCP)
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
except socket.error, msg:
    print 'Failed to create socket. Error code: ' + str(msg[0]) + ' , Error message : ' + msg[1]
    sys.exit();

print 'Socket Created'

host = 'www.google.com'
port = 80

try:
    remote_ip = socket.gethostbyname( host )

except socket.gaierror:
    #could not resolve
    print 'Hostname could not be resolved. Exiting'
    sys.exit()

print 'Ip address of ' + host + ' is ' + remote_ip

#Connect to remote server
s.connect((remote_ip , port))

print 'Socket Connected to ' + host + ' on ip ' + remote_ip 
```

# c# - GETDATE() 的默认数据库字段值仍然返回 SqlDateTime 溢出

> ID：13341520
> 
> 赞同：2
> 
> 时间：2012-11-12T09:53:31.903
> 
> 标签：c#, datetime, linq-to-sql, getdate

> **可能重复：**
> [Linq To Sql - SQL 默认约束问题](https://stackoverflow.com/questions/2743797/linq-to-sql-sql-default-constraint-problem)

我的数据库表作为一个名为列的`date_created`定义如下：

```
date_created DATETIME NOT NULL DEFAULT GETDATE() 
```

我正在使用 Linq-to-SQL 类。我创建了一个新对象，填充它（省略了一个`date_created`应该自行排序的值），一旦我调用`SubmitChanges`它就会返回一个错误：

> *SqlDateTime 溢出。必须在 1753 年 1 月 1 日上午 12:00:00 到 9999 年 12 月 31 日晚上 11:59:59 之间*

知道为什么吗？谢谢

# php - 我可以定义自己的表单标记并映射到使用 Gravity Form（wordpress 插件）生成的表单吗？

> ID：13341521
> 
> 赞同：1
> 
> 时间：2012-11-12T09:53:31.820
> 
> 标签：php, wordpress, gravity

我在我的 wordpress 网站中使用 Gravity Forms。我想要一种方法，我可以定义自己的表单标记并将其映射到使用重力表单生成的表单，因此当有人提交表单时，它会邮寄到重力表单中定义的电子邮件 ID，并添加到 wordpress 后端的重力表单部分.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:35:22.823

这将允许在重力形式的文本输入中使用占位符文本。

[重力形式占位符文本](http://www.wpbeginner.com/wp-tutorials/how-to-add-placeholder-text-in-gravity-forms/)

`<?php`您可能必须从该代码块中删除第一个。然后，您将在 Gravity Forms 编辑器中为文本输入添加一个额外的“占位符”输入。

# php - 为什么我的 PHP 数组不起作用？

> ID：13341527
> 
> 赞同：0
> 
> 时间：2012-11-12T09:53:57.127
> 
> 标签：php, arrays, if-statement

我正在尝试在购物车中添加促销部分。这是一个临时黑客，但代码不起作用。

```
/cart.php?promocode=1&productcode=434_red
// WILL ECHO NO

/cart.php?promocode=sale20&productcode=555_red
// WILL ECHO YES BUT NOT WORKING 
```

这是 PHP 代码，我已将其全部分解，我正在考虑与我的`&&`or `in_array`?? 感谢帮助。

```
<?
// PROMO CODE
$promocode=$_GET["promocode"];
$productcode=$_GET["productcode"];

// SALE LIST (ONLY SALE20 WORKS ON THIS)
$saleitemlist=array("555_red, 305_black, 582_elecblue, 593_black");

// PROMO CODE VALIDATION CHECK

// ALLOW EXISTING CODES TO WORK
if($promocode=="chocolate2" || $promocode=="post") {
        $promocode_validate_check = $_POST['promocode']; // APPLY CART FUNCTION
    } else {
        // NOT AN EXISTING CODE - IF SALE20, APPLY THE CODE OTHERWISE DO NOTHING
        if($promocode=="sale20" && in_array($productcode, $saleitemlist)) {
            $promocode_validate_check = $_POST['promocode']; // APPLY CART FUNCTION
            echo "YES"; 
        } else {
            echo "NO";
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:54:56.047

这不是你想要的数组

```
 $saleitemlist=array("555_red, 305_black, 582_elecblue, 593_black"); 
```

尝试

```
 $saleitemlist=array("555_red", "305_black", "582_elecblue", "593_black"); 
```

它与 in_array()[检查键盘工作正常](http://codepad.org/u7Is4U2s)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T09:57:15.420

```
$saleitemlist=array("555_red, 305_black, 582_elecblue, 593_black"); 
```

这一行意味着这`$saleitemlist`是一个仅包含一个元素的数组，即`"555_red, 305_black, 582_elecblue, 593_black"`.

如果你想要那`555_red`是一个元素，`305_black`另一个元素等等。您必须执行以下操作：

```
$saleitemlist=array("555_red", "305_black", "582_elecblue", "593_black"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:01:12.633

这个是错的：

```
 $saleitemlist=array("555_red, 305_black, 582_elecblue, 593_black"); 
```

正确的应该是这样的：

```
 $saleitemlist=array("555_red", "305_black", "582_elecblue", "593_black"); 
```

数组的每个元素都应该用 qutes 单独包装。

# javascript - 在 JavaScript 中创建类似于 Number 的对象

> ID：13341530
> 
> 赞同：4
> 
> 时间：2012-11-12T09:54:14.620
> 
> 标签：javascript, numbers

如何创建可以使用 Number 中使用的运算符的新原语或对象？

我想创建一个像 Number 这样的新对象，具有不同的名称、其他属性以及可以在哪里使用运算符，即 4+5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:00:22.783

如果您希望它专门用于数字，您可以使用 Number 对象。如果您想要它用于其他用途并且仅使用 Number 作为示例，则您不能这样做，因为 JavaScript 不支持运算符重载。

你最好的办法是通过返回函数来链接在一起`this`，`plus`所以你可以这样做：

```
var n1 = new MyNumber(1);
var n2 = new MyNumber(2);
var n3 = new MyNumber(3);
var sum = n1.plus(n2).plus(n3);

// sum: 6 
```

您还必须确保`MyNumber`创建一个新的`MyNumber`并返回它，除非您想要可变数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:07:46.313

您可以覆盖对象`valueOf`原型来创建自己的原语：

```
var N = function(n) {
    this._value = n;
}
N.prototype.valueOf = function() {
    return this._value+1;
};
console.log( new N(4) + 4 ); // 9 
```

在此处查看示例和更多信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/valueOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/valueOf)

# html - 在 li 导航中将 p 对齐到中心并跨到相同的高度

> ID：13341531
> 
> 赞同：1
> 
> 时间：2012-11-12T09:54:21.957
> 
> 标签：html, css, navigation

我有一个我构建的导航，在导航中还有一个'p'标签，我希望这里位于导航的中心（“配置文件被''”锁定），还有一个我想要的跨度在其他导航项上具有相同的高度（“''已登录”）。

代码可以在这里找到： [https ://dl.dropbox.com/u/107452929/nav/index.html](https://dl.dropbox.com/u/107452929/nav/index.html)

这也是html：

```
<body>
      <ul class="nav" style="">
    <li class="test">
        <a href="#" class="parent">Home</a>
        <ul>
            <li>
                <a href="#" class="parent">Womens</a>
                <ul>
                    <li><a href="#">Sandals</a></li>
                    <li><a href="#">Sneakers</a></li>
                    <li><a href="#">Wedges</a></li>
                    <li><a href="#">Heels</a></li>
                    <li><a href="#">Loafers</a></li>
                    <li><a href="#">Flats</a></li>
                </ul>
            </li>
            <li>
                <a href="#" class="parent">Mens</a>
                <ul>
                    <li><a href="#">Loafers</a></li>
                    <li><a href="#">Sneakers</a></li>
                    <li><a href="#">Formal</a></li>
                </ul>
            </li>
        </ul>
    </li>

    <li>
        <a href="/about">About us</a>

    </li>

    <li>
        <a href="/faq">FAQ</a>

    </li>
    <li>
        <a href="/contact">Contact us</a>

    </li>
    <li class="">
        <a href="/InvitationRequest/" class="parent">Invitation Request</a>
        <ul>
            <li class="">
                <a href="#" class="parent">Womens</a>
                <ul>
                    <li><a href="#">Belts</a></li>
                    <li><a href="#">Bags</a></li>
                    <li><a href="#">Jewelery</a></li>
                    <li><a href="#">Hats</a></li>
                    <li><a href="#">Eyewear</a></li>
                </ul>
            </li>
            <li>
                <a href="#" class="parent">Mens</a>
                <ul>
                    <li><a href="#">Belts</a></li>
                    <li><a href="#">Hats</a></li>
                    <li><a href="#">Eyewear</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li class="">
        <a href="/cws/login">CWS Login</a>
    </li>

        <li class="">

<p id="spnLockedBy" name="spnLockedBy" align="center">Profile locked by ''</p> 

        </li>

    <li class="lastTopNav">
        <a href="/cws/logout">Logout &gt;&gt;</a>
    </li>
    <span id="LoggedIn" class="login userdetialsName">'<b></b>' is logged-in</span>
</ul>

</body> 
```

这是CSS：

```
 html, body {
         margin: 0;
        width: 100%;
        height: 100%;
        position: relative; 
    }

    a {text-decoration: none;}

    .toggleMenu {
        display:  none;
        background: #666;
        padding: 10px 15px;
        color: #fff;
    }
    .nav {
        list-style: none;
         *zoom: 1;
        background:  #014DAA;

    }
    .nav:before,
    .nav:after {
        content: " "; 
        display: table; 
    }
    .nav:after {
        clear: both;
    }
    .nav ul {
        list-style: none;
        width: 9em;
    }
    .nav a {
        padding: 10px 15px;
        color:#fff;
    }
    .nav li {
        position: relative;
    }
    .nav > li {
        float: left;
    }
    .nav > li > .parent {
        background-image: url("images/downArrow.png");
        background-repeat: no-repeat;
        background-position: right;
    }
    .nav > li > a {
        display: block;
    }
    .nav li  ul {
        position: absolute;
        left: -9999px;
    }
    .nav > li.hover > ul {
        left: 0;
    }
    .nav li li.hover ul {
        left: 100%;
        top: 0;
    }
    .nav li li a {
        display: block;
        position: relative;
        z-index:100;
        background: #014DAA;
    }
    .nav li li li a {
        z-index:200;
        border-top: 1px solid #014DAA;
        background: #014DAA;
    }

    .lastTopNav{float:right !important;}

    #spnLockedBy{
        font-size:14px;
        color:#f53454;
        font-size:0.7em;
        position: relative;

    }

    .userdetialsName{
        position:relative;
        padding:0% 1% 0% 0%;
        font-family: "Trebuchet MS", Helvetica, sans-serif;
        font-weight:bold;
        display:inline-block;
        float:right;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:02:02.617

尝试添加 top 以使元素与其他元素对齐：

```
.userdetialsName{
    position:relative;
    padding:0% 1% 0% 0%;
    font-family: "Trebuchet MS", Helvetica, sans-serif;
    font-weight:bold;
    display:inline-block;
    float:right;
    top: 10px; /* add top */
} 
```

要将块元素内的文本居中，首先，将其放在列表之外并添加 text-align：

```
<p align="center" name="spnLockedBy" id="spnLockedBy">Profile locked by ''</p>
<ul class="nav" style="">
.
.
</ul>

#spnLockedBy{ text-align:center; margin-top:1em } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:09:32.080

只需添加 `line-height: 40px;`到：userdetialsName 类并添加`line-height:0px; margin:0px; padding:0px;`到 spnLockedBy id。

完整的CSS是：

```
 html, body {
         margin: 0;
        width: 100%;
        height: 100%;
        position: relative; 
    }

    a {text-decoration: none;}

    .toggleMenu {
        display:  none;
        background: #666;
        padding: 10px 15px;
        color: #fff;
    }
    .nav {
        list-style: none;
         *zoom: 1;
        background:  #014DAA;

    }
    .nav:before,
    .nav:after {
        content: " "; 
        display: table; 
    }
    .nav:after {
        clear: both;
    }
    .nav ul {
        list-style: none;
        width: 9em;
    }
    .nav a {
        padding: 10px 15px;
        color:#fff;
    }
    .nav li {
        position: relative;
    }
    .nav > li {
        float: left;
    }
    .nav > li > .parent {
        background-image: url("images/downArrow.png");
        background-repeat: no-repeat;
        background-position: right;
    }
    .nav > li > a {
        display: block;
    }
    .nav li  ul {
        position: absolute;
        left: -9999px;
    }
    .nav > li.hover > ul {
        left: 0;
    }
    .nav li li.hover ul {
        left: 100%;
        top: 0;
    }
    .nav li li a {
        display: block;
        position: relative;
        z-index:100;
        background: #014DAA;
    }
    .nav li li li a {
        z-index:200;
        border-top: 1px solid #014DAA;
        background: #014DAA;
    }

    .lastTopNav{float:right !important;}

    #spnLockedBy{
        font-size:14px;
        color:#f53454;
        font-size:0.7em;
        position: relative;
        line-height: 40px;
        margin:0px;
        padding:0px;

    }

    .userdetialsName{
        position:relative;
        padding:0% 1% 0% 0%;
        font-family: "Trebuchet MS", Helvetica, sans-serif;
        font-weight:bold;
        display:inline-block;
        float:right;
         line-height: 40px;

    } 
```

# visual-studio-2012 - vs2012 中的 Team Foundation 服务登录窗口保持空白，但状态为“完成”

> ID：13341533
> 
> 赞同：6
> 
> 时间：2012-11-12T09:54:32.337
> 
> 标签：visual-studio-2012, azure-devops

当我尝试使用 [project].visualstudio.com 连接我的 VS2012 时，弹出的登录窗口显示它正在连接，然后它保持空白，如下图所示：

![空白登录窗口 Team Foundation Service](../Images/85a2a6df3b65cfa13695873bcec18b68.png)

我尝试了以下但没有帮助：

*   将IE设置为我的默认浏览器；
*   清除 IE 浏览器历史记录：临时文件、Cookies、历史记录和密码；
*   清除vs2012中的tfs服务器列表；
*   清除 Windows 7 中的凭据管理器条目；
*   手动将 tfs 服务添加到 vs2012。

你可以猜到，我无法从 vs2012 登录 tfs。

亲切的问候，

塞斯·范阿尔特纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:40:48.087

更新补丁后，我可以使用 CCleaner 解决此问题。有时由于某种原因它不会加载登录屏幕。我相信这里有关于此问题的官方补丁的信息，并[在](http://www.microsoft.com/en-us/download/details.aspx?id=29082)[此处](http://support.microsoft.com/kb/2662296)下载补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-16T14:40:29.067

两种方法对我有用：

1.  在受信任的站点中添加以下网址

> [https://app.vssps.visualstudio.com](https://app.vssps.visualstudio.com)

2.  在 IE 中打开相同的 url 并首先登录，然后尝试从 Visual Studio 连接服务器。

# javascript - XML 数据到 javascript 变量

> ID：13341534
> 
> 赞同：0
> 
> 时间：2012-11-12T09:54:32.030
> 
> 标签：javascript, xml

我是 xml 新手，需要一点帮助。

我想从 xml 文件中只提取一条数据并将其放入 javascript 变量中，以便我可以用它进行数学计算。

xml文件是：

```
<?xml version="1.0" encoding="windows-1250"?>
<ExchRates>
  <ExchRate>
    <Bank>Privredna banka Zagreb</Bank>
    <CurrencyBase>HRK</CurrencyBase>
    <Date>08.11.2012.</Date>
    <Currency Code="036">
      <Name>AUD</Name>
      <Unit>1</Unit>
      <BuyRateCache>6,005217</BuyRateCache>
      <BuyRateForeign>6,065876</BuyRateForeign>
      <MeanRate>6,158250</MeanRate>
      <SellRateForeign>6,250624</SellRateForeign>
      <SellRateCache>6,313130</SellRateCache>
    </Currency>
    <Currency Code="124">
      <Name>CAD</Name>
      <Unit>1</Unit>
      <BuyRateCache>5,798460</BuyRateCache>
      <BuyRateForeign>5,857030</BuyRateForeign>
      <MeanRate>5,946223</MeanRate>
      <SellRateForeign>6,035416</SellRateForeign>
      <SellRateCache>6,095770</SellRateCache>
    </Currency>
    <Currency Code="203">
      <Name>CZK</Name>
      <Unit>1</Unit>
      <BuyRateCache>0,286575</BuyRateCache>
      <BuyRateForeign>0,290939</BuyRateForeign>
      <MeanRate>0,296877</MeanRate>
      <SellRateForeign>0,302815</SellRateForeign>
      <SellRateCache>0,305843</SellRateCache>
    </Currency>
    <Currency Code="208">
      <Name>DKK</Name>
      <Unit>1</Unit>
      <BuyRateCache>0,984366</BuyRateCache>
      <BuyRateForeign>0,994309</BuyRateForeign>
      <MeanRate>1,009451</MeanRate>
      <SellRateForeign>1,024593</SellRateForeign>
      <SellRateCache>1,034839</SellRateCache>
    </Currency>
    <Currency Code="348">
      <Name>HUF</Name>
      <Unit>100</Unit>
      <BuyRateCache>2,575364</BuyRateCache>
      <BuyRateForeign>2,614583</BuyRateForeign>
      <MeanRate>2,667942</MeanRate>
      <SellRateForeign>2,721301</SellRateForeign>
      <SellRateCache>2,748514</SellRateCache>
    </Currency>
    <Currency Code="392">
      <Name>JPY</Name>
      <Unit>100</Unit>
      <BuyRateCache>7,118160</BuyRateCache>
      <BuyRateForeign>7,226558</BuyRateForeign>
      <MeanRate>7,374039</MeanRate>
      <SellRateForeign>7,521520</SellRateForeign>
      <SellRateCache>7,596735</SellRateCache>
    </Currency>
    <Currency Code="578">
      <Name>NOK</Name>
      <Unit>1</Unit>
      <BuyRateCache>1,002503</BuyRateCache>
      <BuyRateForeign>1,012629</BuyRateForeign>
      <MeanRate>1,028050</MeanRate>
      <SellRateForeign>1,043471</SellRateForeign>
      <SellRateCache>1,053906</SellRateCache>
    </Currency>
    <Currency Code="752">
      <Name>SEK</Name>
      <Unit>1</Unit>
      <BuyRateCache>0,858113</BuyRateCache>
      <BuyRateForeign>0,866781</BuyRateForeign>
      <MeanRate>0,879981</MeanRate>
      <SellRateForeign>0,893181</SellRateForeign>
      <SellRateCache>0,902113</SellRateCache>
    </Currency>
    <Currency Code="756">
      <Name>CHF</Name>
      <Unit>1</Unit>
      <BuyRateCache>6,022565</BuyRateCache>
      <BuyRateForeign>6,083399</BuyRateForeign>
      <MeanRate>6,239384</MeanRate>
      <SellRateForeign>6,395369</SellRateForeign>
      <SellRateCache>6,459323</SellRateCache>
    </Currency>
    <Currency Code="826">
      <Name>GBP</Name>
      <Unit>1</Unit>
      <BuyRateCache>9,192388</BuyRateCache>
      <BuyRateForeign>9,285240</BuyRateForeign>
      <MeanRate>9,426640</MeanRate>
      <SellRateForeign>9,568040</SellRateForeign>
      <SellRateCache>9,663720</SellRateCache>
    </Currency>
    <Currency Code="840">
      <Name>USD</Name>
      <Unit>1</Unit>
      <BuyRateCache>5,698195</BuyRateCache>
      <BuyRateForeign>5,755753</BuyRateForeign>
      <MeanRate>5,903336</MeanRate>
      <SellRateForeign>6,050919</SellRateForeign>
      <SellRateCache>6,171937</SellRateCache>
    </Currency>
    <Currency Code="977">
      <Name>BAM</Name>
      <Unit>1</Unit>
      <BuyRateCache>3,727751</BuyRateCache>
      <BuyRateForeign>3,803828</BuyRateForeign>
      <MeanRate>3,850028</MeanRate>
      <SellRateForeign>3,896228</SellRateForeign>
      <SellRateCache>3,905969</SellRateCache>
    </Currency>
    <Currency Code="978">
      <Name>EUR</Name>
      <Unit>1</Unit>
      <BuyRateCache>7,470000</BuyRateCache>
      <BuyRateForeign>7,480000</BuyRateForeign>
      <MeanRate>7,530000</MeanRate>
      <SellRateForeign>7,580000</SellRateForeign>
      <SellRateCache>7,590000</SellRateCache>
    </Currency>
    <Currency Code="985">
      <Name>PLN</Name>
      <Unit>1</Unit>
      <BuyRateCache>1,768112</BuyRateCache>
      <BuyRateForeign>1,795038</BuyRateForeign>
      <MeanRate>1,831671</MeanRate>
      <SellRateForeign>1,868304</SellRateForeign>
      <SellRateCache>1,886987</SellRateCache>
    </Currency>
  </ExchRate>
</ExchRates> 
```

我只想从 Currency Code="978" Name EUR /Name BuyRateForeign 7,480000 /BuyRateForeign 中提取数据（值）。

这个数据 7,480000 对我很重要，我希望将其提取到 javascript 变量并转换为 number()，以便我可以用它进行数学运算。

我尝试了一些代码，但我只将其发布到屏幕上，无法将其放入变量中。我试过的代码是这样的：

```
<!DOCTYPE html>
<html>
<body>
<script>
function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest();
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xhttp.open("GET",dname,false);
xhttp.send("");
return xhttp.responseXML;
}

xml=loadXMLDoc("pbz.xml");
path="/ExchRates/ExchRate/Currency[13]/BuyRateForeign"
// code for IE
if (window.ActiveXObject)
{
var nodes=xml.selectNodes(path);

for (i=0;i<nodes.length;i++)
  {
  document.write(nodes[i].childNodes[0].nodeValue);
  document.write("<br>");
  }
}
// code for Mozilla, Firefox, Opera, etc.
else if (document.implementation && document.implementation.createDocument)
{
var nodes=xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
var result=nodes.iterateNext();

while (result)
  {
  document.write(result.childNodes[0].nodeValue);
  document.write("<br>");
  result=nodes.iterateNext();
  }
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:10:04.200

使用这个 XPath：

```
/ExchRates/ExchRate/Currency[@Code='978']/BuyRateForeign 
```

或者

```
/ExchRates/ExchRate/Currency[Name='EUR']/BuyRateForeign 
```

要获取数字，您可以执行以下操作：

```
var buyRate = Number(nodes[i].childNodes[0].nodeValue); 
```

# objective-c - 单击本地文件中的外部链接时未调用 shouldStartLoadWithRequest

> ID：13341535
> 
> 赞同：1
> 
> 时间：2012-11-12T09:54:35.237
> 
> 标签：objective-c, ios

我正在加载一个本地文件：

```
[web loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle]
                                                                          pathForResource:@"about" ofType:@"html"]isDirectory:NO]]]; 
```

并尝试在 Safari 中使用以下命令打开此文件中的任何外部链接：

```
-(BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request     navigationType:(UIWebViewNavigationType)navigationType {

    NSURL *url = [request URL];
if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"]) {
    [[UIApplication sharedApplication] openURL:url];
    return NO;
} else
return YES;
} 
```

但这永远不会被调用。阅读我可以看到 shouldStartLoadWithRequest 不会被本地文件调用，但是在打开外部链接时应该调用它？

* * *

添加 web.delegate = self;

viewDidLoad 修复了它。哎呀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T20:38:43.580

检查您是否分配了一个委托，并检查您的委托是否是仍然保留的 uiviewcontroller。

# php - Javascript 不适用于 $.ajax POST 的结果

> ID：13341537
> 
> 赞同：0
> 
> 时间：2012-11-12T09:54:43.293
> 
> 标签：php, javascript, jquery, post

编辑：我在 index.php 中包含 jquery 文件和函数，我必须将它们包含在 select.php 中吗？

我想现在我会清楚地解释我的问题。

首先，我想`select.php`通过 jquery发送数据`$.ajax`。这部分没有错。但是当我将返回的数据写入我的页面时，javascripts 不起作用。

这是我的代码：

```
$('#sdata').change(function(){

    var id=$('#s_temsilci').val();

    $.ajax({
          type:"POST",          
          url: "select.php?do=delete_list",
          data: {id:id},
          success: function(result){

            $(".s_del").html(result);
                                    }   
        });

    }); 
```

选择.php

```
 $id=$data->clean($_POST["id"]); 
```

我的表格真的很大，所以我只写需要 jquery 的部分。

```
 <a href="javascript:$('#fileUpload2').fileUploadStart()">start upload</a> |  
    <a href="javascript:$('#fileUpload2').fileUploadClearQueue()">Clean Queue</a>

    <input type="text" name="edit_d" class="datepicker" value="Date" /> 
```

这些是行不通的。如果我在我的 index.php 中使用相同的代码，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:15:53.313

要让日期选择器在使用 ajax 加载表单后工作，您需要在它存在后对其进行初始化......在成功回调中

```
 $.ajax({
      type:"POST",          
      url: "select.php?do=delete_list",
      data: {id:id},
      success: function(result){

        $(".s_del").html(result);
       /* datepicker element now exists*/
        $(".s_del .datepicker").datepicker({/* options*/})
       }   
    });

}); 
```

编辑：还必须确保 JQueryUI 已加载到主页以及可能包含在独立页面中的任何其他文件中

# php - 使用 php 在 Box 中创建文件夹

> ID：13341539
> 
> 赞同：0
> 
> 时间：2012-11-12T09:54:47.940
> 
> 标签：php, api, curl, box-api

我正在尝试在 Box 上创建一个简单的文件夹，但我遇到了困难。我不断收到此错误：

> {"type":"error","status":404,"code":"not_found","help_url":"http://developers.box.com/docs/#errors","message":"不是找到","re​​quest_id":"71794126250a0c2f00fe35"}

这是我的代码：

```
$parent = array();
$parent['id'] = '0';
$params = array();
$params['name'] = 'Testfolder';
$params['parent'] = $parent;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.box.com/2.0/folders");
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $params);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: BoxAuth api_key={myAPIkey}&auth_token={myToken}"));
$result = curl_exec($ch);
curl_close($ch);
print_r($result); 
```

我错过了什么。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:30:22.297

根据[BOX 文档](http://developers.box.com/docs/)

> 默认情况下，请求正文数据应为 JSON，响应正文数据以 JSON 格式发回。

```
$parent = array();
$parent['id'] = '0';
$params = array();
$params['name'] = 'Testfolder';
$params['parent'] = $parent;

$params = json_encode($params);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.box.com/2.0/folders");
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $params);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("'Content-Type: application/json',                                                                                
    'Content-Length: ' . strlen($params), Authorization: BoxAuth api_key={myAPIkey}&auth_token={myToken}"));
$result = curl_exec($ch);
curl_close($ch);
print_r($result); 
```

# ios - Xcode重复目标不会运行

> ID：13341547
> 
> 赞同：1
> 
> 时间：2012-11-12T09:55:16.600
> 
> 标签：ios, xcode, target

周围有很多类似的问题，但在我的情况下没有一个答案有效，所以我们又来了......

我的工作区有一 (1) 个项目，该项目有一 (1) 个目标。

我决定复制那个目标，这样我就可以构建我的应用程序的变体（想想精简版/付费版，但不同）。

任何涉及重复目标的方案都可以构建，但不会运行。具体来说，在模拟器上我得到：

> **无法在所选目标上运行**
> 
> 所选目标不支持构建所选软件的体系结构。切换到支持该架构的目的地以运行所选软件。

...当然，在设备上：

> **Xcode 无法使用所选设备运行。**
> 
> 选择具有受支持架构的目标，以便在此设备上运行。

**笔记**

1.  任何涉及原始（旧）目标的方案都可以构建并运行正常。
2.  产品名称包含**no_spaces**。
3.  我尝试了“架构”/“有效架构”/“仅构建活动架构”等的所有组合，但无济于事......
4.  我已经部署到 4.3 或更高版本，所以我不需要/想要 armv6。
5.  我使用的是 Xcode 4.5，基础 SDK 6.0，所以 armv6 无论如何都不应该是一个选项。
6.  当我尝试通过 iTunes 安装 AdHoc 版本时，我收到错误 0xE8008001
7.  当我尝试通过 Xcode Organizer 安装 AdHoc 构建时，我收到以下三个警告：

**验证警告** iPhone/iPod Touch：应用程序可执行文件缺少所需的架构。必须至少存在以下架构之一：armv7 (-19033)

**验证警告** 应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。(-19011)

**验证警告** 无法从应用程序中提取权利：(null) (-19045)

有什么线索吗？

**更新**

我尝试从头开始创建一个新目标（“空 iOS 应用程序”），并一一添加所有类/框架/资源。同样的错误。猜猜库比蒂诺的某个人不希望你重用任何代码......

**更新 2**

只是为了看看会发生什么，我更改了***原始***目标（运行的目标）的“产品名称”（在“构建设置 -> 打包”下），现在我得到了同样的错误。需要明确的是：旧的和新的产品名称都是字母和下划线。**已修复**此问题是由于 plist 上的可执行文件名称与构建设置上的产品名称不匹配。通常 plist 包含一个 $() 变量，但我对该字段进行了硬编码......仍然，重复的目标不会运行......

**固定的**

现在它正在工作......我想我不是在清理新目标，而是在清理旧目标。以为“干净”会清除所有内容，但 Xcode 窗口中间的实时日志视图显示不同......

# ember.js - 如何在 ember-data 中回滚不成功的 GET 请求

> ID：13341548
> 
> 赞同：0
> 
> 时间：2012-11-12T09:55:18.227
> 
> 标签：ember.js, ember-data

使用 ember-data 非常棒，它开箱即用地解决了我的大部分数据处理挑战。然而，有一个问题我一直在通过谷歌搜索来寻找答案。

假设我向服务器发出 GET 请求以查找记录，`App.Fruit.find('banana');`. 如果此记录不存在，则后端向客户端发回状态代码 (404)。

现在，在以后的任何给定时间，“香蕉”记录可能由其他人创建，因此存在于服务器上的数据库中。

但是，此时，任何进一步的调用`App.Fruit.find('banana');`都不会向服务器发出新的 GET 请求。

*   我试过调用两者`banana = App.Fruit.find('banana');`，然后`banana.get('transaction').rollback();`从服务器返回 404。

*   我也试过`App.store.get('defaultTransaction').rollback();`看看这是否有效。

*   我什至尝试将事务状态设置为“已删除” - 就像这样：`banana.get('stateManager').goToState('deleted');`- 希望它会在之后使`App.Fruit.find('banana');`问题成为一个新的 GET 请求。不幸的是，它没有。

我的问题是：如果先前的请求没有返回任何数据（404），我如何让 ember-data 再次发出 GET 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:14:47.410

似乎没有官方的方法可以做到这一点，这似乎是设计使然。存储（通过它代理对记录的所有请求`find`）会记住您给它的 id，如果该 id 已经被看到，则跳过服务器调用。

但是，在查看代码时，可能有一些技巧可以强制重复查找。

**1.按ID搜索**

商店不记得您用于复杂查找的查询。如果您调整 Rails 控制器的索引操作以支持这些搜索，您可以像这样重复查询：

```
fruit = App.Fruit.find({id: 'banana'}); 
```

因为它是一个搜索，所以它实际上会返回一个数组——`DS.AdapterPopulatedRecordArray`准确地说是 a 。这意味着您会知道它在`fruit.get('length')`大于时起作用`0`。这也意味着您必须从数组中获取第一条记录才能使用它：

```
banana = fruit.objectAtContent(0); 
```

为了支持这一点，您的 Rails 控制器操作必须如下所示：

```
def index
  if params[:id]
    respond_with Fruit.find_all_by_id(params[:id])
  else
    # ...
  end
end 
```

*注意：*确保返回一个数组，因为这就是 Ember Data 所期望的。

**2.手动GET，然后Sideload**

如果你能忍受它，你可以向服务器执行手动请求。如果/当服务器响应记录时，您可以将其 JSON 侧载到存储中：

```
store.load(App.Fruit, json) 
```

这将自动将属性添加到您在内存中的该记录的任何实例中。

# javascript - 预编译 javascript 模板

> ID：13341549
> 
> 赞同：4
> 
> 时间：2012-11-12T09:55:32.737
> 
> 标签：javascript, templates, handlebars.js, mustache, client-side-templating

看完[Mustache.js 和 Handlebars.js 有什么区别？](https://stackoverflow.com/questions/10555820/what-are-the-differences-between-mustache-js-and-handlebars-js)我被一个问题迷惑了：

**javascript模板的预编译是什么意思？**

以前我使用的是一个简单的客户端缓存，它的工作原理是这样的：

```
var tmpCache = {};
if (tmpIneed is in tmpCache){
  use it
} else {
  take it from DOM / upload from external file
  put save it in tmpCache
  use it
} 
```

这与我的技术有什么根本不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:15:00.390

由于 Handlebars.js 在模板中可以有不同的表达式/渲染逻辑，这些表达式通常在运行时处理。为了获得更好的性能和更小的依赖性，可以在部署之前预编译模板。例如，这是一个简单的车把模板：

```
<div class="entry">
  <h1>{{title}}</h1>
  <div class="body">
    {{body}}
  </div>
</div> 
```

这是预编译的输出

```
(function() {
var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};
templates['test.handlebar'] = template(function (Handlebars,depth0,helpers,partials,data) {
helpers = helpers || Handlebars.helpers;
var buffer = "", stack1, foundHelper, functionType="function",   escapeExpression=this.escapeExpression;

buffer += "<div class=\"entry\">\r\n  <h1>";
foundHelper = helpers.title;
if (foundHelper) { stack1 = foundHelper.call(depth0, {hash:{}}); }
else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1() : stack1; }
buffer += escapeExpression(stack1) + "</h1>\r\n <div class=\"body\">\r\n    ";
foundHelper = helpers.body;
if (foundHelper) { stack1 = foundHelper.call(depth0, {hash:{}}); }
else { stack1 = depth0.body; stack1 = typeof stack1 === functionType ? stack1() : stack1; }
buffer += escapeExpression(stack1) + "\r\n  </div>\r\n</div>";
return buffer;});
})(); 
```

更多关于预编译的信息可以在[这里找到](http://handlebarsjs.com/precompilation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:24:05.057

简短的回答是，对于要评估/应用的模板，必须首先将其转换为 javascript 函数。这个过程就是编译，它与下载或存储原始模板代码（即`<div....><h1>{{var}}</h1></div>`预先下载或存储模板代码）是分开的。

# sencha-touch - 将“itemtap”事件动态触发到列表项

> ID：13341553
> 
> 赞同：0
> 
> 时间：2012-11-12T09:55:58.477
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

使用 Sencha Touch 2 时，我想将`itemtap`事件动态地触发到列表中的一个项目 ( `Ext.List`)，我是这样做的：

```
Ext.getCmp(LIST_ID).container.fireEvent('itemtap', null, null, ITEM_INDEX,
    new Event('itemtap')); 
```

运行这条线，`itemtap`事件`ITEM_INDEX`在`LIST_ID`. 现在，当将我的框架更新到 sencha touch 2.1 时，这种方式不再起作用了......

他们是动态触发此事件的另一种方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:33:59.270

一个工作示例是

```
listobj.fireEvent('itemtap',listobj,indexofListInt); 
```

一般来说，如果您有一个事件（在 st api 文档中）定义为： itemtap( this, index, target, record, e, eOpts )

要触发事件，您必须：

```
obj.fireEvent('eventname',this, index, target, record, e, eOpts ) 
```

'eventname' 之后的参数与事件签名的 api 文档中的顺序完全相同！

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:58:38.163

我使用这种语法：fireEvent('itemtap', index, node)。要获取节点对象，您应该使用[getNode()](http://docs.sencha.com/touch/1-1/#!/api/Ext.DataView-method-getNode)或[getAt()](http://docs.sencha.com/touch/2-1/#!/api/Ext.Container-method-getAt)。

```
// For example, to tap the first item
// sencha 1.1
Ext.getCmp(LIST_ID).fireEvent('itemtap', 0, Ext.getCmp(LIST_ID).getNode(0)); 
// sencha 2.1
Ext.getCmp(LIST_ID).fireEvent('itemtap', 0, Ext.getCmp(LIST_ID).getAt(0)); 
```

问候

# jquery - 使用 jQuery 触发的多个动画 onScroll 事件

> ID：13341555
> 
> 赞同：2
> 
> 时间：2012-11-12T09:56:04.553
> 
> 标签：jquery, events, animation, triggers, onscroll

我有一个功能可以在滚动到视图时淡化特定的 DIV。我在这些 DIV 中有一些子元素，我想在每个淡入淡出动画结束时对其进行动画处理。如何在以下函数中添加其他函数？

```
$(window).scroll(function(d,h) {
tiles.each(function(i) {
    a = $(this).offset().top + $(this).height();
    b = $(window).scrollTop() + $(window).height();
    if (a < b) $(this).fadeTo(500,1) ???AND SLIDE CHILD ELEMENT ALSO!!???;
    ///how to I target each child element to do something in the above line???
    });
}); 
```

这是一个[jsFiddle 演示](http://jsfiddle.net/BP6rq/451/)，它将帮助您可视化我的概念。动画已经起作用，问题是滑动子元素最初开始，我想做的是在每个 onScroll 淡入淡出开始时连续启动每个滑动功能。提前非常感谢。这将极大地帮助我解决我在 jQuery 上的经历和磨难！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:37:21.867

如果你想在淡入淡出完成后做一些事情，创建一个回调函数，当动画结束时触发：

```
var that = $(this);
if (a < b) $(this).fadeTo(500,1, function() {
    alert ("Do something afterwards");
    that.children().someAction();
}); 
```

我希望，这就是你想要的。

要使您的示例正常工作，您可以使用以下命令：

```
$(window).scroll(function(d,h) {
    tiles.each(function(i) {
        a = $(this).offset().top + $(this).height();
        b = $(window).scrollTop() + $(window).height();
        var that = $(this);
        if (a < b && true != $(this).data('faded')) {
            $(this).data('faded', true).fadeTo(500,1, function() {
                that.find('div').animate({left: '+=300', top: '+=12'}, 4500);
            });
        }
    });
}); 
```

这是一个演示：http: [//jsfiddle.net/mSRsA/](http://jsfiddle.net/mSRsA/)

# android - 如何在android中创建自定义对话框？

> ID：13341560
> 
> 赞同：391
> 
> 时间：2012-11-12T09:56:19.527
> 
> 标签：android, android-dialogfragment, android-dialog

我想创建一个自定义对话框，如下所示

![在此处输入图像描述](../Images/654309cde24137b0a1f391d90c4ad1b3.png)

我尝试了以下事情。

1.  我创建了**AlertDialog.Builder**的子类，并使用了自定义标题和自定义内容视图并使用了它，但结果与预期不符。

2.  另一种尝试是**继承 DialogFragment**并自定义 onCreateDialog 中的对话框，但结果与预期不符。

3.  然后我尝试使用一个普通的**Dialog**类。结果并不如预期。

在这三种情况下，问题是当我忽略标题视图时，对话框的大小不符合预期，当我使用标题视图时，结果是内容视图周围有一个粗边框（这看起来很糟糕）。现在我脑子里有两个问题...

1.  我怎样才能做到这一点？由于我已经尝试了很多事情，因此将更加感谢直接回答。

2.  在 android 应用程序中显示错误或警报对话框的最佳方式是什么？

**编辑** [Android 开发人员文档](http://developer.android.com/guide/topics/ui/dialogs.html)建议我们应该使用 DialogFragments 或 Dialogs 向用户显示错误/警报消息。然而，他们有一次说......

> 提示：如果您想要自定义对话框，则可以将 Activity 显示为对话框，而不是使用对话框 API。只需创建一个活动并将其主题设置为清单元素中的 Theme.Holo.Dialog。

**那是什么意思？仅仅为了显示错误信息而使用 Activity 是不是太过分了？？？**

* * *

## 回答 #1

> 赞同：630
> 
> 时间：2012-11-12T10:35:15.683

在这里，我创建了一个简单的对话框，例如：

![对话框](../Images/b701d50c26e5b379dd448d6601af40c0.png)

**custom_dialog.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="80dp"
    android:background="#3E80B4"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txt_dia"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_margin="10dp"
        android:text="Do you realy want to exit ?"
        android:textColor="@android:color/white"
        android:textSize="15dp"
        android:textStyle="bold"/>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="#3E80B4"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btn_yes"
            android:layout_width="100dp"
            android:layout_height="30dp"
            android:background="@android:color/white"
            android:clickable="true"
            android:text="Yes"
            android:textColor="#5DBCD2"
            android:textStyle="bold" />

        <Button
            android:id="@+id/btn_no"
            android:layout_width="100dp"
            android:layout_height="30dp"
            android:layout_marginLeft="5dp"
            android:background="@android:color/white"
            android:clickable="true"
            android:text="No"
            android:textColor="#5DBCD2"
            android:textStyle="bold" />
    </LinearLayout>

</LinearLayout> 
```

你必须`extends Dialog`和`implements OnClickListener`

```
public class CustomDialogClass extends Dialog implements
    android.view.View.OnClickListener {

  public Activity c;
  public Dialog d;
  public Button yes, no;

  public CustomDialogClass(Activity a) {
    super(a);
    // TODO Auto-generated constructor stub
    this.c = a;
  }

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.custom_dialog);
    yes = (Button) findViewById(R.id.btn_yes);
    no = (Button) findViewById(R.id.btn_no);
    yes.setOnClickListener(this);
    no.setOnClickListener(this);

  }

  @Override
  public void onClick(View v) {
    switch (v.getId()) {
    case R.id.btn_yes:
      c.finish();
      break;
    case R.id.btn_no:
      dismiss();
      break;
    default:
      break;
    }
    dismiss();
  }
} 
```

**如何调用对话框？**

```
R.id.TXT_Exit:
CustomDialogClass cdd=new CustomDialogClass(Values.this);
cdd.show(); 
```

# 更新

很长一段时间后，我的一个朋友要求我制作一个带有透明背景的曲线形状对话框。所以，在这里我已经实现了它。

![在此处输入图像描述](../Images/65f49f050534a5c79fd504cbd01bbf39.png)

要制作弯曲的形状，您需要创建一个单独的形状`curve_shap.XML`，如下所示，

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="#000000" />

    <stroke
        android:width="2dp"
        android:color="#ffffff" />

    <corners
        android:bottomLeftRadius="20dp"
        android:bottomRightRadius="20dp"
        android:topLeftRadius="20dp"
        android:topRightRadius="20dp" />

</shape> 
```

现在，将其添加`curve_shap.XML`到您的主视图布局中。就我而言，我使用过`LinearLayout`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="80dp"
        android:background="@drawable/curve_shap"
        android:orientation="vertical" >
...
</LinearLayout> 
```

**这个怎么称呼？**

```
CustomDialogClass cdd = new CustomDialogClass(MainActivity.this);
cdd.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
cdd.show(); 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：207
> 
> 时间：2015-07-07T21:18:47.400

这是一个示例对话框，使用 xml 创建。

![在此处输入图像描述](../Images/c15c54dea3ada3b1cf79da7e928fe290.png)

下面的代码xml只是一个例子，设计或视图在这里实现：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="#ffffffff">

<ImageView
    android:layout_width="match_parent"
    android:layout_height="120dp"
    android:id="@+id/a"
    android:gravity="center"
    android:background="#DA5F6A"
    android:src="@drawable/dialog_cross"
    android:scaleType="fitCenter" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TEXTO"
    android:id="@+id/text_dialog"
    android:layout_below="@+id/a"
    android:layout_marginTop="20dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:layout_marginBottom="20dp"
    android:textSize="18sp"
    android:textColor="#ff000000"
    android:layout_centerHorizontal="true"
    android:gravity="center_horizontal" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="30dp"
    android:text="OK"
    android:id="@+id/btn_dialog"
    android:gravity="center_vertical|center_horizontal"
    android:layout_below="@+id/text_dialog"
    android:layout_marginBottom="20dp"
    android:background="@drawable/btn_flat_red_selector"
    android:layout_centerHorizontal="true"
    android:textColor="#ffffffff" />

</RelativeLayout> 
```

这行代码是drawable的资源：

```
android:src="@drawable/dialog_cross"
android:background="@drawable/btn_flat_red_selector" 
```

你可以做一个类扩展对话框，也是这样的：

```
public class ViewDialog {

    public void showDialog(Activity activity, String msg){
        final Dialog dialog = new Dialog(activity);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setCancelable(false);
        dialog.setContentView(R.layout.dialog);

        TextView text = (TextView) dialog.findViewById(R.id.text_dialog);
        text.setText(msg);

        Button dialogButton = (Button) dialog.findViewById(R.id.btn_dialog);
        dialogButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });

        dialog.show();

    }
} 
```

最后是调用的形式，例如在您的 Activity 上：

```
ViewDialog alert = new ViewDialog();
alert.showDialog(getActivity(), "Error de conexión al servidor"); 
```

我希望它对你有用。

**更新**

对话框的可绘制 XML：

```
<shape xmlns:android="schemas.android.com/apk/res/android"> <stroke android:width="2dp" android:color="#FFFFFF" /> <gradient android:angle="180" android:endColor="@color/NaranjaOTTAA" android:startColor="@color/FondoActionBar" /> <corners android:bottomLeftRadius="7dp" android:bottomRightRadius="7dp" android:topLeftRadius="7dp" android:topRightRadius="7dp" /> </shape> 
```

此 xml 由 @GastónSaillén 提供。

* * *

## 回答 #3

> 赞同：112
> 
> 时间：2013-02-04T08:54:26.803

另一种简单的方法来做到这一点。

步骤 1) 创建一个具有正确 id 的布局。

第 2 步）在任何需要的地方使用以下代码。

```
LayoutInflater factory = LayoutInflater.from(this);
final View deleteDialogView = factory.inflate(R.layout.mylayout, null);
final AlertDialog deleteDialog = new AlertDialog.Builder(this).create();
deleteDialog.setView(deleteDialogView);
deleteDialogView.findViewById(R.id.yes).setOnClickListener(new OnClickListener() {    
    @Override
    public void onClick(View v) {
        //your business logic 
        deleteDialog.dismiss();
    }
});
deleteDialogView.findViewById(R.id.no).setOnClickListener(new OnClickListener() {    
    @Override
    public void onClick(View v) {
        deleteDialog.dismiss();    
    }
});

deleteDialog.show(); 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2017-01-21T10:27:04.717

**简单先创建一个类**

```
 public class ViewDialog {

        public void showDialog(Activity activity, String msg){
            final Dialog dialog = new Dialog(activity);
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog.setCancelable(false);
            dialog.setContentView(R.layout.custom_dialogbox_otp);
            dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));

            TextView text = (TextView) dialog.findViewById(R.id.txt_file_path);
            text.setText(msg);

            Button dialogBtn_cancel = (Button) dialog.findViewById(R.id.btn_cancel);
            dialogBtn_cancel.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
//                    Toast.makeText(getApplicationContext(),"Cancel" ,Toast.LENGTH_SHORT).show();
                    dialog.dismiss();
                }
            });

            Button dialogBtn_okay = (Button) dialog.findViewById(R.id.btn_okay);
            dialogBtn_okay.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
//                    Toast.makeText(getApplicationContext(),"Okay" ,Toast.LENGTH_SHORT).show();
                    dialog.cancel();
                }
            });

            dialog.show();
        }
    } 
```

**然后创建一个 custom_dialogbox_otp**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="330dp"
    android:layout_height="160dp"
    android:background="#00555555"
    android:orientation="vertical"
    android:padding="5dp"
    android:weightSum="100">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/round_layout_otp"
        android:orientation="vertical"
        android:padding="7dp"
        android:weightSum="100">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="60"
            android:orientation="horizontal"
            android:weightSum="100">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="80"
                android:gravity="center">

                <ImageView
                    android:id="@+id/a"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:background="#DA5F6A"
                    android:gravity="center"
                    android:scaleType="fitCenter"
                    android:src="@mipmap/infoonetwo" />

            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="20">

                <TextView
                    android:id="@+id/txt_file_path"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:singleLine="true"
                    android:text="TEXTO"
                    android:textColor="#FFFFFF"
                    android:textSize="17sp"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="40"
            android:background="@drawable/round_layout_white_otp"
            android:orientation="vertical"
            android:weightSum="100">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_gravity="center"
                android:layout_weight="60">

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:gravity="center"
                    android:text="Do you wanna Exit..?"
                    android:textColor="#ff000000"
                    android:textSize="15dp"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="40"
                android:orientation="horizontal"
                android:weightSum="100">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_marginRight="30dp"
                    android:layout_weight="50"
                    android:gravity="center|right">

                    <Button
                        android:id="@+id/btn_cancel"
                        android:layout_width="80dp"
                        android:layout_height="25dp"
                        android:background="@drawable/round_button"
                        android:gravity="center"
                        android:text="CANCEL"
                        android:textSize="13dp"
                        android:textStyle="bold"
                        android:textColor="#ffffffff" />

                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_marginLeft="30dp"
                    android:layout_weight="50"
                    android:gravity="center|left">

                    <Button
                        android:id="@+id/btn_okay"
                        android:layout_width="80dp"
                        android:layout_height="25dp"
                        android:background="@drawable/round_button"
                        android:text="OKAY"
                        android:textSize="13dp"
                        android:textStyle="bold"
                        android:textColor="#ffffffff" />

                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

**然后在你的drawable中创建xml文件。
对于 round_layout_white_otp.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <!-- <corners android:radius="10dp" /> -->
    <corners
        android:bottomLeftRadius="18dp"
        android:bottomRightRadius="16dp"
        android:topLeftRadius="38dp"
        android:topRightRadius="36dp" />
    <solid android:color="#C0C0C0" />
    </shape> 
```

**对于 round_layout_otp.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <!-- <corners android:radius="10dp" /> -->
    <corners
        android:bottomLeftRadius="18dp"
        android:bottomRightRadius="16dp"
        android:topLeftRadius="38dp"
        android:topRightRadius="38dp" />
    <solid android:color="#DA5F6A" />
    </shape> 
```

**圆形按钮**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <!-- <corners android:radius="10dp" /> -->
    <corners
        android:bottomLeftRadius="7dp"
        android:bottomRightRadius="7dp"
        android:topLeftRadius="7dp"
        android:topRightRadius="7dp" />
    <solid android:color="#06A19E" />
    </shape> 
```

**然后最后使用下面的代码来可视化你的对话框:)**

```
ViewDialog alert = new ViewDialog();
        alert.showDialog(ReceivingOTPRegActivity.this, "OTP has been sent to your Mail "); 
```

**你的输出:)**

[![在此处输入图像描述](../Images/82fcb2d23fe2dd38921d4253aa45592b.png)](https://i.stack.imgur.com/MCQGU.png)

答案更新：对于 kotlin

```
 class ViewDialog {
        fun showResetPasswordDialog(activity: Activity?) {
            val dialog = Dialog(activity!!)
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE)
            dialog.setCancelable(false)
            dialog.setContentView(R.layout.resetpass_popup)
            dialog.window!!.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT))
            val dialogBtn_remove = dialog.findViewById<TextView>(R.id.txtClose)
            dialogBtn_remove.setOnClickListener {
                dialog.dismiss()
                activity!!.finish()
            }
            dialog.show()
        }
    } 
```

还有你的 xml 设计，

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:ignore="MissingDefaultResource">

    <androidx.cardview.widget.CardView
        android:layout_width="340dp"
        android:layout_height="290dp"
        android:layout_marginLeft="12dp"
        android:layout_marginRight="12dp"
        app:cardCornerRadius="11dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical">

            <ImageView
                android:layout_width="61dp"
                android:layout_height="61dp"
                android:layout_gravity="center"
                android:layout_marginTop="12dp"
                android:src="@drawable/tickmark"
                tools:ignore="ContentDescription"></ImageView>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="22dp"
                android:layout_marginTop="18dp"
                android:layout_marginRight="12dp"
                android:fontFamily="@font/opensans_semibold"
                android:text="@string/apasswordreset"
                android:textColor="@color/gender_txt"
                android:textSize="15dp"
                tools:ignore="HardcodedText,RtlHardcoded,SpUsage"></TextView>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="22dp"
                android:layout_marginRight="12dp"
                android:fontFamily="@font/opensans_semibold"
                android:text="@string/toyourmail"
                android:textColor="@color/gender_txt"
                android:textSize="15dp"
                tools:ignore="HardcodedText,RtlHardcoded,SpUsage">

            </TextView>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="22dp"
                android:layout_marginTop="18dp"
                android:layout_marginRight="12dp"
                android:fontFamily="@font/opensans_regular"
                android:text="@string/followthe"
                android:textColor="@color/gender_txt"
                android:textSize="14dp"
                tools:ignore="HardcodedText,RtlHardcoded,SpUsage"></TextView>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="22dp"
                android:layout_marginRight="12dp"
                android:fontFamily="@font/opensans_regular"
                android:text="@string/inyouremail"
                android:textColor="@color/gender_txt"
                android:textSize="14dp"
                tools:ignore="HardcodedText,RtlHardcoded,SpUsage"></TextView>

            <TextView
                android:id="@+id/txtClose"
                android:layout_width="150dp"
                android:layout_height="40dp"
                android:layout_gravity="center"
                android:layout_marginTop="38dp"
                android:background="@drawable/nextbtn"
                android:fontFamily="@font/opensans_semibold"
                android:gravity="center"
                android:text="Close"
                android:textColor="@color/white_o"
                android:textSize="16dp"
                tools:ignore="HardcodedText,RtlHardcoded,SpUsage"></TextView>

        </LinearLayout>

    </androidx.cardview.widget.CardView>
</androidx.constraintlayout.widget.ConstraintLayout> 
```

现在，您可以致电

```
val alert = ViewDialog()
alert.showResetPasswordDialog(activity) 
```

而你的结果，

[![在此处输入图像描述](../Images/95d244423b59c15dd70f194616cacb36.png)](https://i.stack.imgur.com/hebDx.jpg)

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2012-11-12T10:08:17.280

添加以下主题`values -> style.xml`

```
<style name="Theme_Dialog" parent="android:Theme.Light">
     <item name="android:windowNoTitle">true</item>
     <item name="android:windowBackground">@android:color/transparent</item>
</style> 
```

`onCreateDialog`在您的方法中使用此主题，如下所示：

```
Dialog dialog = new Dialog(FlightBookActivity.this,R.style.Theme_Dialog); 
```

定义您的对话框布局，包括 xml 文件中的标题栏，并像这样设置该 xml 文件：

```
dialog.setContentView(R.layout.your_dialog_layout); 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-01-12T12:18:00.887

```
public static void showCustomAlertDialog(Context context, String name,
            String id, String desc, String fromDate, String toDate,
            String resions) {
        final AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                context);
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.dialog, null);
        alertDialogBuilder.setView(view);
        alertDialogBuilder.setCancelable(false);
        final AlertDialog dialog = alertDialogBuilder.create();
        dialog.show();
        txt_empId = (TextView) view.findViewById(R.id.txt_dialog_empcode);
        txt_empName = (TextView) view.findViewById(R.id.txt_dialog_empname);
        txt_desc = (TextView) view.findViewById(R.id.txt_dialog_desc);
        txt_startDate = (TextView) view.findViewById(R.id.txt_dialog_startDate);
        txt_resions = (TextView) view.findViewById(R.id.txt_dialog_endDate);
        txt_empId.setTypeface(Utils.setLightTypeface(context));
        txt_empName.setTypeface(Utils.setLightTypeface(context));
        txt_desc.setTypeface(Utils.setLightTypeface(context));
        txt_startDate.setTypeface(Utils.setLightTypeface(context));
        txt_resions.setTypeface(Utils.setLightTypeface(context));

        txt_empId.setText(id);
        txt_empName.setText(name);

        txt_desc.setText(desc);
        txt_startDate.setText(fromDate + "\t to \t" + toDate);
        txt_resions.setText(resions);

        btn_accept = (Button) view.findViewById(R.id.btn_dialog_accept);
        btn_reject = (Button) view.findViewById(R.id.btn_dialog_reject);
        btn_cancel = (Button) view.findViewById(R.id.btn_dialog_cancel);
        btn_accept.setTypeface(Utils.setBoldTypeface(context));
        btn_reject.setTypeface(Utils.setBoldTypeface(context));
        btn_cancel.setTypeface(Utils.setBoldTypeface(context));

        btn_cancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                dialog.dismiss();

            }
        });

    } 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-04-20T07:13:03.970

**创建自定义对话框的最简单方法：**

1.  初始化并显示对话框：

    ```
     ViewDialog alertDialoge = new ViewDialog();
     alertDialoge.showDialog(getActivity(), "PUT DIALOG TITLE"); 
    ```

2.  创建方法：

    ```
    public class ViewDialog {

      public void showDialog(Activity activity, String msg) {

        final Dialog dialog = new Dialog(activity);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setCancelable(false);
        dialog.setContentView(R.layout.custom_dialoge_feedback);

        TextView text = (TextView) dialog.findViewById(R.id.text_dialog_feedback);
        text.setText(msg);

        Button okButton = (Button) dialog.findViewById(R.id.btn_dialog_feedback);
        Button cancleButton = (Button) dialog.findViewById(R.id.btn_dialog_cancle_feedback);
        final EditText edittext_tv = (EditText) dialog.findViewById(R.id.dialoge_alert_text_feedback);

        okButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                //Perfome Action
            }
        });
        cancleButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                dialog.dismiss();
            }
        });

        dialog.show();

        }
    } 
    ```

3.  创建您想要或需要的布局 XML。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-10-27T20:51:23.603

### 我发现这是显示自定义对话框的最简单方法。

你有布局`your_layout.xml`

```
public void showCustomDialog(final Context context) {
    Dialog dialog = new Dialog(context);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    view = inflater.inflate(R.layout.your_layout, null, false);
    findByIds(view);  /*HERE YOU CAN FIND YOU IDS AND SET TEXTS OR BUTTONS*/
    ((Activity) context).getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE | WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);
    dialog.setContentView(view);
    final Window window = dialog.getWindow();
    window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);
    window.setBackgroundDrawableResource(R.color.colorTransparent);
    window.setGravity(Gravity.CENTER);
    dialog.show();
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-12-30T11:00:02.567

这是创建自定义对话框的一种非常简单的方法。

***对话框.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
xmlns:app="http://schemas.android.com/apk/res-auto"
android:orientation="vertical">
<!--  Put your layout content  -->
</LinearLayout> 
```

***MainActivity.java***

```
ShowPopup(){
LayoutInflater li = LayoutInflater.from(this);
View promptsView = li.inflate(R.layout.dialog, null);
android.app.AlertDialog.Builder alertDialogBuilder = new 
android.app.AlertDialog.Builder(this);
alertDialogBuilder.setView(promptsView);
alertDialogBuilder.setCancelable(true);
AlertDialog alertDialog = alertDialogBuilder.create();
alertDialog.show();
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-01-08T18:25:49.257

创建自定义警报布局 custom_aler_update.xml

然后将此代码复制到 Activity ：

```
AlertDialog basic_reg;
AlertDialog.Builder builder ;
builder = new AlertDialog.Builder(ct, R.style.AppCompatAlertDialogStyle);
LayoutInflater inflater = ((Activity) ct).getLayoutInflater();
View v = inflater.inflate(R.layout.custom_aler_update, null);
builder.setView(v);
builder.setCancelable(false);
builder.create();
basic_reg = builder.show(); 
```

将此代码复制到样式：

```
<style name="AppCompatAlertDialogStyle" parent="Theme.AppCompat.Light.Dialog.Alert">
    <item name="colorAccent">@color/colorAccent</item>
    <item name="android:textColorPrimary">@color/primaryTextColor</item>
    <item name="android:background">@color/white</item>
</style> 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-04-09T22:20:59.350

你可以试试这个简单的[android 对话框弹出库](https://github.com/00ec454/pop)来减少混乱的对话框代码。在您的活动中使用它非常简单。之后，您可以在活动中使用此代码以显示对话框

```
Pop.on(this).with().title(R.string.title).layout(R.layout.custom_pop).show(); 
```

其中**R.layout.custom_pop**是您想要装饰对话框的自定义布局。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-09-11T01:43:05.717

Kotlin 中的全屏自定义警报对话框类

1.  创建 XML 文件，就像创建活动一样

2.  创建 AlertDialog 自定义类

    ```
    class Your_Class(context:Context) : AlertDialog(context){

     init {
      requestWindowFeature(Window.FEATURE_NO_TITLE)
      setCancelable(false)
     }

     override fun onCreate(savedInstanceState: Bundle?) {
      super.onCreate(savedInstanceState)
      setContentView(R.layout.your_Layout)
      val window = this.window
      window?.setLayout(WindowManager.LayoutParams.MATCH_PARENT,
                         WindowManager.LayoutParams.MATCH_PARENT)

      //continue custom code here
      //call dismiss() to close
     }
    } 
    ```

3.  在活动中调用对话框

    ```
    val dialog = Your_Class(this)
    //can set some dialog options here
    dialog.show() 
    ```

注意**：如果您不希望对话框全屏显示，请删除以下行

```
 val window = this.window
      window?.setLayout(WindowManager.LayoutParams.MATCH_PARENT,
                         WindowManager.LayoutParams.MATCH_PARENT) 
```

然后将 XML 文件中顶部布局的 layout_width 和 layout_height 编辑为 wrap_content 或固定的 DP 值。

我通常不建议使用固定 DP，因为您可能希望您的应用程序能够适应多种屏幕尺寸，但是如果您将尺寸值保持足够小，您应该没问题

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-04-08T16:41:55.963

更改背景颜色和文本样式的最简单方法是为 android 警报对话框制作自定义主题，如下所示：-

：只需将以下代码放入 styles.xml ：

```
 <style name="AlertDialogCustom" parent="@android:style/Theme.Dialog">
    <item name="android:textColor">#999999</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:typeface">monospace</item>
    <item name="android:backgroundDimEnabled">false</item>
    <item name="android:textSize">@dimen/abc_text_size_medium_material</item>
    <item name="android:background">#80ff00ff</item>
</style> 
```

：现在定制的事情已经完成，现在只适用于您的 alertBuilder 对象：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this,R.style.AlertDialogCustom); 
```

希望对你有帮助 ！

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-05-19T09:11:34.303

创建自定义警报对话框

cumstomDialog.xml

```
<ImageView
    android:id="@+id/icon"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_gravity="center"
    android:layout_margin="5dp"
    app:srcCompat="@drawable/error" />

<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:fontFamily="@font/muli_bold"
    android:text="Title"
    android:layout_marginTop="5dp"
    android:textColor="@android:color/black"
    android:textSize="15sp" />

<TextView
    android:id="@+id/description"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="10dp"
    android:fontFamily="@font/muli_regular"
    android:text="Message"
    android:textColor="@android:color/black"
    android:textSize="12dp" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="20dp"
    android:gravity="center"
    android:orientation="horizontal">

    <Button
        android:id="@+id/cancelBTN"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_margin="5dp"
        android:background="@drawable/bground_radius_button_white"
        android:text="No"
        android:textColor="@color/black" />

    <Button
        android:id="@+id/acceptBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_margin="5dp"
        android:background="@drawable/bground_radius_button"
        android:text="Yes"
        android:textColor="@color/white" />
</LinearLayout> 
```

在您的活动中显示您的自定义对话框：

```
 public void showDialog(String title, String des, int icon) {

    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.custom_dialog);
    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));

    Button cancelBTN = dialog.findViewById(R.id.cancelBTN);
    Button acceptBTN = dialog.findViewById(R.id.acceptBtn);
    TextView tvTitle = dialog.findViewById(R.id.title);
    TextView tvDescription = dialog.findViewById(R.id.description);
    ImageView ivIcon = dialog.findViewById(R.id.icon);

    tvTitle.setText(title);
    tvDescription.setText(des);
    ivIcon.setImageResource(icon);

    cancelBTN.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            dialog.dismiss();
        }
    });

    acceptBTN.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

        }
    });

    dialog.show();
} 
```

像这样调用：

showDialog("标题", "消息", R.drawable.warning);

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-03-29T07:22:21.187

Dialog Fragment 是创建自定义警报对话框的最简单方法。按照上面的代码为您的对话框创建自定义视图，然后使用 Dialog Fragment 实现它。将以下代码添加到您的布局文件中：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="80dp"
    android:background="#3E80B4"
    android:orientation="vertical">

    <TextView
        android:id="@+id/txt_dia"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_margin="10dp"
        android:text="Do you realy want to exit ?"
        android:textColor="@android:color/white"
        android:textSize="15dp"
        android:textStyle="bold" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="#3E80B4"
        android:orientation="horizontal">

        <Button
            android:id="@+id/btn_yes"
            android:layout_width="100dp"
            android:layout_height="30dp"
            android:background="@android:color/white"
            android:clickable="true"
            android:text="Yes"
            android:textColor="#5DBCD2"
            android:textStyle="bold" />

        <Button
            android:id="@+id/btn_no"
            android:layout_width="100dp"
            android:layout_height="30dp"
            android:layout_marginLeft="5dp"
            android:background="@android:color/white"
            android:clickable="true"
            android:text="No"
            android:textColor="#5DBCD2"
            android:textStyle="bold" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-09-26T07:14:02.637

它是警报对话框的类，因此您可以从任何活动中调用该类以重用代码。

```
public class MessageOkFragmentDialog extends DialogFragment {
Typeface Lato;
String message = " ";
String title = " ";
int messageID = 0;

public MessageOkFragmentDialog(String message, String title) {
    this.message = message;
    this.title = title;
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    LayoutInflater inflater = getActivity().getLayoutInflater();

    View convertview = inflater.inflate(R.layout.dialog_message_ok_box, null);

    Constants.overrideFonts(getActivity(), convertview);
    Lato = Typeface
            .createFromAsset(getActivity().getAssets(), "font/Lato-Regular.ttf");

    TextView textmessage = (TextView) convertview
            .findViewById(R.id.textView_dialog);

    TextView textview_dialog_title = (TextView) convertview.findViewById(R.id.textview_dialog_title);

    textmessage.setTypeface(Lato);
    textview_dialog_title.setTypeface(Lato);

    textmessage.setText(message);
    textview_dialog_title.setText(title);

    Button button_ok = (Button) convertview
            .findViewById(R.id.button_dialog);
    button_ok.setTypeface(Lato);

    builder.setView(convertview);
    button_ok.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            dismiss();

        }
    });

    return builder.create();

}
} 
```

相同的xml文件是：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    android:gravity="center_vertical|center"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="vertical">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/blue_color"
            android:gravity="center_horizontal"
            android:orientation="horizontal">

            <TextView
                android:id="@+id/textview_dialog_title"
                android:layout_width="wrap_content"
                android:layout_height="50dp"
                android:gravity="center"
                android:textColor="@color/white_color"
                android:textSize="@dimen/txtSize_Medium" />

        </LinearLayout>

        <View
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="@color/txt_white_color" />

        <TextView
            android:id="@+id/textView_dialog"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_margin="@dimen/margin_20"
            android:textColor="@color/txt_gray_color"
            android:textSize="@dimen/txtSize_small" />

        <View
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="@color/txt_white_color"
            android:visibility="gone"/>

        <Button
            android:id="@+id/button_dialog"
            android:layout_width="wrap_content"
            android:layout_height="@dimen/margin_40"
            android:layout_gravity="center"
            android:background="@drawable/circular_blue_button"

            android:text="@string/ok"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="@dimen/margin_10"
            android:textColor="@color/txt_white_color"
            android:textSize="@dimen/txtSize_small" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2017-07-10T09:52:43.643

创建类似这样的警报对话框布局

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <Button
        android:id="@+id/btn"
        android:layout_width="match_parent"
        android:text="Custom Alert Dialog"
        android:layout_height="40dp">
    </Button>
</LinearLayout> 
```

并在您的 Activity 类上添加以下代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LayoutInflater inflate = LayoutInflater.from(this);
    alertView = inflate.inflate(R.layout.your_alert_layout, null);
    Button btn= (Button) alertView.findViewById(R.id.btn);

    showDialog();
  }

 public void showDialog(){
        Dialog alertDialog = new Dialog(RecognizeConceptsActivity.this);
        alertDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        alertDialog.setContentView(alertView);
        alertDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
        alertDialog.show();
    } 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-06-22T06:55:56.677

导入自定义警报：

```
LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.dse_location_list_filter, null);
final Dialog dialog = new Dialog(Acitvity_name.this);
dialog.setContentView(view);
dialog.setCancelable(true);
dialog.setCanceledOnTouchOutside(true);
dialog.show(); 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-08-19T06:29:14.220

使用此代码正确显示自定义对话框的简单方法

dialog_choose_photo.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@android:color/transparent"
android:orientation="vertical">

<LinearLayout
    android:id="@+id/l_buttons"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="@dimen/_5sdp"
    android:layout_marginRight="@dimen/_5sdp"
    android:layout_marginBottom="@dimen/_5sdp"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/bg_dialog_smallround_white"
        android:orientation="vertical">

        <TextView
            android:id="@+id/txt_camera"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:paddingTop="@dimen/_10sdp"
            android:paddingBottom="@dimen/_10sdp"
            android:text="Take a Photo"
            android:textColor="#3080C7"
            android:textSize="18sp" />

        <View
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="#F1F0F0" />

        <TextView
            android:id="@+id/txt_gallery"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:paddingTop="@dimen/_10sdp"
            android:paddingBottom="@dimen/_10sdp"
            android:text="Choose from Gallery"
            android:textColor="#3080C7"
            android:textSize="18sp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="@dimen/_5sdp"
        android:background="@drawable/bg_dialog_smallround_white"
        android:orientation="vertical">

        <TextView
            android:id="@+id/txt_cancel_dialog"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:paddingTop="@dimen/_10sdp"
            android:paddingBottom="@dimen/_10sdp"
            android:text="Cancel"
            android:textColor="@color/colorPrimary"
            android:textSize="18sp" />
    </LinearLayout>

</LinearLayout>

</RelativeLayout> 
```

只需调用此函数

```
 public void openPhotoDialog() {
    final Dialog dialog = new Dialog(this);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.dialog_choose_photo);
    dialog.setCancelable(true);

    // Setting dialogview

    final Window window = dialog.getWindow();
    window.setLayout(AbsListView.LayoutParams.MATCH_PARENT, AbsListView.LayoutParams.WRAP_CONTENT);
    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
    WindowManager.LayoutParams wlp = window.getAttributes();

    wlp.gravity = Gravity.BOTTOM;
    window.addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
    window.setDimAmount(0.5f);
    window.setAttributes(wlp);

    TextView txt_camera = dialog.findViewById(R.id.txt_camera);
    TextView txt_gallery = dialog.findViewById(R.id.txt_gallery);
    TextView txt_cancel_dialog = dialog.findViewById(R.id.txt_cancel_dialog);

    txt_camera.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
            dialog.dismiss();
        }
    });
    txt_gallery.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
            dialog.dismiss();
        }
    });
    txt_cancel_dialog.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
            dialog.dismiss();
        }
    });

    dialog.show();

} 
```

bg_dialog_smallround_white.xml 可绘制资源

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="@color/white" />

<corners
    android:radius="@dimen/_5sdp" />
</shape> 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-03-08T12:02:47.587

我正在发布我正在使用的 kotlin 代码，它对我来说很好用。您还可以为对话框按钮设置点击侦听器。

这是我的 XML 代码：

**layout_custom_alert_dialog.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layoutDirection="ltr"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <View
        android:id="@+id/view6"
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:background="@color/colorPrimary" />

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/view6"
        android:layout_marginStart="8dp"
        android:layout_marginTop="8dp"
        android:layout_marginEnd="8dp"
        android:layout_marginBottom="8dp">

        <TextView
            android:id="@+id/txt_alert_title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="8dp"
            android:layout_marginStart="8dp"
            android:layout_marginTop="8dp"
            android:layout_marginEnd="8dp"
            tools:text="are you sure?"
            android:textAlignment="center"
            android:textColor="@android:color/black"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent" />

        <Button
            android:id="@+id/btn_alert_positive"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/textView2"
            android:layout_marginTop="8dp"
            android:background="@android:color/transparent"
            tools:text="yes"
            android:textColor="@color/colorPrimaryDark"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintHorizontal_bias="0.5"
            app:layout_constraintStart_toEndOf="@+id/btn_alert_negative"
            app:layout_constraintTop_toBottomOf="@+id/txt_alert_title" />

        <Button
            android:id="@+id/btn_alert_negative"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:background="@android:color/transparent"
            tools:text="no"
            android:textColor="@color/colorPrimaryDark"
            app:layout_constraintEnd_toStartOf="@+id/btn_alert_positive"
            app:layout_constraintHorizontal_bias="0.5"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/txt_alert_title" />

    </androidx.constraintlayout.widget.ConstraintLayout>
</RelativeLayout> 
```

**警报对话框.kt**

```
class mAlertDialog(context: Context) {

    private val btn_positive : Button
    private val btn_negative : Button
    private val txt_alert_title : TextView
    private val dialog : AlertDialog
    init {
        val view = LayoutInflater.from(context).inflate(R.layout.layout_custom_alert_dialog,null)

        val dialog_builder = AlertDialog.Builder(context)
        dialog_builder.setView(view)

        btn_negative = view.findViewById(R.id.btn_alert_negative)
        btn_positive = view.findViewById(R.id.btn_alert_positive)
        txt_alert_title = view.findViewById(R.id.txt_alert_title)

        dialog = dialog_builder.create() 
    }

    fun show()
    {
        dialog.show()
    }

    fun setPositiveClickListener(listener :onClickListener)
    {
        btn_positive.setOnClickListener { v ->
            listener.onClick(btn_positive)
            dialog.dismiss()
        }
    }

    fun setNegativeClickListener(listener: onClickListener)
    {
        btn_negative.setOnClickListener { v ->
            listener.onClick(btn_negative)
            dialog.dismiss()
        }
    }

    fun setPoitiveButtonText(text : String)
    {
        btn_positive.text = text
    }

    fun setNegativeButtonText(text : String)
    {
        btn_negative.text = text
    }

    fun setAlertTitle(title : String)
    {
        txt_alert_title.text = title
    }
} 
```

点击监听器接口：

**onClickListener.kt**

```
interface onClickListener{
    fun onClick(view : View)
} 
```

**示例使用**

```
val dialog = mAlertDialog(context)
                dialog.setNegativeButtonText("no i dont")
                dialog.setPoitiveButtonText("yes is do")
                dialog.setAlertTitle("do you like this alert dialog?")

                dialog.setPositiveClickListener(object : onClickListener {
                    override fun onClick(view: View) {
                        Toast.makeText(context, "yes", Toast.LENGTH_SHORT).show()
                    }
                })

                dialog.setNegativeClickListener(object : onClickListener {
                    override fun onClick(view: View) {
                        Toast.makeText(context, "no", Toast.LENGTH_SHORT).show()
                    }
                })

                dialog.show() 
```

我希望这能帮到您！

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-12-11T13:56:22.063

以下是使用 kotlin 创建自定义视图对话框的代码。以下是对话框布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical" android:layout_width="300dp"
    android:layout_height="400dp">

    <TextView
        android:id="@+id/tvTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout> 
```

在文本视图中创建对话框并更新文本

```
val dialog = Dialog(activity!!)
dialog.setContentView(R.layout.my_dialog_layout)
dialog.tvTitle.text = "Hello World!!"
dialog.show() 
```

# ios - 如何设置navigationItem titleView的按钮？

> ID：13341562
> 
> 赞同：6
> 
> 时间：2012-11-12T09:56:29.003
> 
> 标签：ios, xcode, uiview, uibutton, uinavigationitem

我想以编程方式为 navigationItem.titleView 设置按钮。

我尝试使用以下代码但没有成功；

```
UIBarButtonItem *navigationTitleButton = [[UIBarButtonItem alloc] initWithTitle:@"Custom" style:UIBarButtonItemStyleBordered target:self action:@selector(backToHOmePage)];

navigationTitleButton.image = [UIImage imageNamed:@"title.png"];

self.navigationItem.titleView = navigationTitleButton; 
```

警告说：从 'UIBarButtonItem *__strong' 分配给 'UIView *' 的指针类型不兼容

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T10:02:33.613

尝试使用此代码，看看它是否适合您

```
UIView * container = [[UIView alloc]initWithFrame:CGRectZero];
UIButton * button = [[UIButton alloc]initWithFrame:CGRectZero];
[button addTarget:self action:@selector(backToHOmePage) forControlEvents:UIControlEventTouchUpInside];
[button setImage:[UIImage imageNamed:@"clanak_default.png"] forState:UIControlStateNormal];
[button sizeToFit];
[container addSubview:button];
[button release];
[container sizeToFit];
self.navigationItem.titleView = container;
[container release]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-12T10:01:24.707

您不必创建 BarItem，您需要创建 UIView 类对象；

弧

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
view.backgroundColor = [UIColor clearColor];

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = view.frame;

[view addSubview:button];

self.navigationItem.titleView = view; 
```

或者

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
   button.frame = CGRectMake(0, 0, 40, 40);
   self.navigationItem.titleView = button; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-13T15:56:21.780

斯威夫特版本：

```
var button =  UIButton.buttonWithType(UIButtonType.Custom) as UIButton
button.frame = CGRectMake(0, 0, 100, 40) as CGRect
button.backgroundColor = UIColor.redColor()
button.setTitle("Button", forState: UIControlState.Normal)
button.addTarget(self, action: Selector("clickOnButton:"), forControlEvents: UIControlEvents.TouchUpInside)
self.navigationItem.titleView = button 
```

在这里你可以看到最后一行按钮被直接设置为navigationItem的titleView，它将在导航栏的中心添加按钮。

按钮的操作方法如下：

```
func clickOnButton(button: UIButton) {

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-12T22:14:28.423

您可以直接将 UIImageView 添加为 navigationItem 的 titleView，但是如果您不确定它的大小，它将不可见。最简单的调整大小的方法是使用 sizeToFit()。

在此示例中，我还圆角并添加了知道是否被点击的功能。

```
override func viewDidLoad() {
    super.viewDidLoad()

    let titleIconButton = UIButton(type: .Custom)
    titleIconButton.setImage(UIImage(named: "login-icon"), forState: .Normal)
    titleIconButton.addTarget(self, action: #selector(titleIconTap), forControlEvents: .TouchUpInside)
    titleIconButton.clipsToBounds = true
    titleIconButton.layer.cornerRadius = 4
    titleIconButton.sizeToFit()
    navigationItem.titleView = titleIconButton
} 
```

[![在此处输入图像描述](../Images/c8ace898564a7eda74099c133ca4bc82.png)](https://i.stack.imgur.com/0wHN6.jpg)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-18T05:52:05.013

这是@Esqarrouth 答案的**Swift 4**移植版本。

```
let button = UIButton(type: .custom)
button.frame = CGRect(x: 0, y: 0, width: 100, height: 40)
button.backgroundColor = .red
button.setTitle("Button", for: .normal)
button.addTarget(self, action: #selector(clickedButton(_:)), for: .touchUpInside)
self.navigationItem.titleView = button 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-16T13:03:15.023

斯威夫特 3 版本：

```
 let logoButton = UIButton(type: .custom)
    logoButton.setImage(#imageLiteral(resourceName: "Logo"), for: .normal)
    logoButton.sizeToFit()
    logoButton.addTarget(self, action: #selector(tapLogo), for: .touchUpInside)

    self.navigationItem.title = ""
    self.navigationItem.titleView = logoButton 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-15T05:33:30.060

如果您计划在运行时更改 button.title，并且将标题更改为更长的文本，它将不会居中。如果您执行 button.sizeToFit()，它将居中，但将新标题显示为“T..e”。

解决方案是将 UIButton 放在 UIView 中。并将按钮约束到 UIView 的所有侧面。然后只需将 navigationItem.titleView 设置为该 UIView。它将完美地处理程序化的标题更改。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-12T10:00:49.747

尝试为您的按钮创建一个 UIButton 对象，而不是 UIBarButtonItem 一个。UIButton 是 UIView 的子类，因此您应该能够将 titleView 属性设置为您创建的 UIButton。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-12T10:01:46.313

您可以在视图上添加按钮，然后将该视图作为导航栏的标题视图，然后您可以在运行时轻松更改按钮的标题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-28T12:53:49.720

这种基于 UISegmentedControl 的方法可能会对您有所帮助：[https](https://stackoverflow.com/a/16792575/171933) ://stackoverflow.com/a/16792575/171933享受吧！

# c++ - 如何正确传递指针

> ID：13341565
> 
> 赞同：2
> 
> 时间：2012-11-12T09:56:46.183
> 
> 标签：c++, new-operator

***编辑*****：我更改了标题，因为它几乎不适合问题，因为`new`操作员不是问题。**以前的标题是“新操作员会失败吗？”

在下面的代码中，在客户端连接到服务器之前，我创建了一个新的 Socket 对象指针。当客户端连接时，我使用`new`. 但不知何故，当我使用调试器（Eclipse CDT，g++ Ubuntu/Linaro 4.6.3-1ubuntu5）单步执行代码时，我发现在调用`new`操作员之后指针仍然为 NULL。

```
class Socket
{
public:
    Socket( int domain, int type, int protocol = 0 );
    ~Socket();
    [...]
    int accept( Socket * socket );
    [...]
private:
    Socket();
    int mSocketDescriptor;
    int mNetworkProtocol;
    int mTransportProtocol;
};

[...]

int Socket::accept( Socket * socket )
{
    // Accept one connection (blocking)
    struct sockaddr_in cli_addr;
    socklen_t clilen = sizeof(cli_addr);
    int ret = ::accept(mSocketDescriptor, (struct sockaddr *) &cli_addr, &clilen);
    if ( ret >= 0 ){
        socket = new Socket();  // <- Here's the problem, socket remains NULL
        socket->mSocketDescriptor  = ret;
        socket->mNetworkProtocol   = this->mNetworkProtocol;
        socket->mTransportProtocol = this->mTransportProtocol;
    }
    return ret;
} 
```

主循环：

```
// Accept all incoming connections in a loop
while(true){

    // Accept one connection (blocking)
    net::Socket * newConn = NULL;
    if (socket.accept(newConn) < 0){
        perror("accept()");
        exit(EXIT_FAILURE);}

    // Create a new thread that is talking to the client
    pthread_t nThreadID;
    pthread_create(&nThreadID, NULL, ClientMainThreadProc, newConn);
} 
```

我通读了 C++ 参考资料。`new`它告诉我如果失败应该引发 bad_alloc 异常。但这不是事实，所以我不知道出了什么问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:20:42.990

好的，问题的解决方案是，正如 hmjd 所说：

> 我想你的意思是 newConn 在调用者中仍然是 NULL ？如果是这样，则通过引用传递指针，因为指针的副本被传递给accept()，因此任何更改都对accept() 函数是本地的。

不幸的是，我的调试器把我引向了错误的方向，显示套接字指针注释甚至在本地发生了变化。但是当通过引用传递指针时，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:05:04.033

如果您使用的是旧编译器（来自上一千年）或在禁用异常的模式下编译，则`new`对象的结果可能为空。对于现代编译器，如果内存分配失败，则会引发异常。

从您的代码来看，您确定`new`返回 null 吗？...因为您将指针分配给通过值而不是通过引用传递的变量，即更改仅在函数内可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:16:23.440

简短的回答是**肯定**的。[C++ new 运算符](http://msdn.microsoft.com/en-us/library/kftdy56f%28v=vs.90%29.aspx)可能会失败并在失败时抛出`std::bad_alloc`异常。这应该发生在任何启用了异常的现代编译器上。

*但是*，如果您使用的是相当旧的编译器，或者您禁用了异常，则`new`操作员**可能会**默默地失败。

此外，刚刚注意到这一点 - 您不应该`socket = new Socket();`使用空白构造函数。改为使用`socket = new Socket;`。注意缺少的括号！

另一件要担心的事情（在你的情况下不太确定，只是把它扔在那里，以防万一）是[heap corruption](http://www.efnetcpp.org/wiki/Heap_Corruption)。它真的会以奇怪的、意想不到的方式把事情搞砸，而且最初需要很长时间才能找到。

# php - 无法使用 TinyMCE 编辑器让 Ajax 填充 textarea

> ID：13341568
> 
> 赞同：2
> 
> 时间：2012-11-12T09:57:04.100
> 
> 标签：php, mysql, ajax, jquery, tinymce

我已经为此工作了将近 4 个小时，但我无法让它工作。

我有一个带有文本区域和下拉列表的表单。下拉数据来自 MySQL 数据库。当我在下拉列表中选择和项目时，它确实会在 textarea 中填充数据，并且工作正常。

现在我添加了一个 TinyMCE 作为 textarea 编辑器，但现在数据不会显示。我知道 TinyMCE 替换了 textarea 但我不能让它工作。

下面是我正在使用的完整代码。任何人都可以帮助我在启用 TinyMCE 的情况下使其正常工作。非常感谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="../jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,nonbreaking,xhtmlxtras,template,visualchars",

        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,formatselect,|,cut,copy,paste,pastetext,pasteword,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,|,forecolor,backcolor,|,tablecontrols,hr,removeformat,|,sub,sup",
        theme_advanced_buttons2 : ",charmap,advhr,|,fullscreen,|,cite,abbr,acronym,|,visualchars,nonbreaking,|,cleanup,help,code",
        theme_advanced_buttons3 : "",
        theme_advanced_buttons4 : "",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        skin : "o2k7",
        skin_variant : "silver"

});
</script>

<!-- JQUERY -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<script type="text/javascript">

(function($) {
        $.fn.autoSubmit = function(options) {
                return $.each(this, function() {
                        // VARIABLES: Input-specific
                        var input = $(this);
                        var column = input.attr('name');

                        // VARIABLES: Form-specific
                        var form = input.parents('form');
                        var method = form.attr('method');
                        var action = form.attr('action');

                        // VARIABLES: Where to update in database
                        var where_val = form.find('#where').val();
                        var where_col = form.find('#where').attr('name');

                        // ONBLUR: Dynamic value send through Ajax
                        input.bind('blur', function(event) {
                                // Get latest value
                                var value = input.val();
                                // AJAX: Send values
                                                               $.ajax({
                                        url: action,
                                        type: method,
                                        data: {
                                                val: value,
                                                col: column,
                                                w_col: where_col,
                                                w_val: where_val
                                        },
                                        cache: false,
                                        timeout: 10000,
                                        success: function(data) {
                                                // Alert if update failed
                                                if (data) {
                                                        alert(data);
                                                }
                                                // Load output into a P
                                                else {
                                                        $('#notice').text('Updated');
                                                        $('#notice').fadeOut().fadeIn();
                                                }
                                        }
                                });
                                // Prevent normal submission of form
                                return false;
                        })
                });
        }
})(jQuery);
// JQUERY: Run .autoSubmit() on all INPUT fields within form
$(function(){
        $('#ajax-form TEXTAREA').autoSubmit();
});
</script>
<!-- STYLE -->
<style type="text/css">
        INPUT { margin-right: 1em }
</style>

<script language="JavaScript">
function updateThis(obj){
var option = document.getElementById('option').selectedIndex;
var option = document.getElementById('option').options[document.getElementById('option').selectedIndex].text;
//alert("running updateThis function and the variable named option is: " + option);
      if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
         xmlhttp=new XMLHttpRequest();
      }
      else
      {// code for IE6, IE5
         xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.onreadystatechange=function()
         {
           if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            tinyMCE.execCommand("mceAddControl", true, "pfdnote");
            document.getElementById("pfdnote").innerHTML=xmlhttp.responseText;
                        }
         }
      xmlhttp.open("GET","getNote.php?lname="+option,true);
      xmlhttp.send();
}
</script>

</head>
<body>

<?php
require("DB_connector.php");
require("Functions.php");

$stk = $stmt->prepare("select stk_id, stk_name, stk_type, stk_summary, stk_description from stk_pfd WHERE stk_summary = 'sample data only'");
$stk->execute();
$row = $stk->fetchAll();

?>

<form id="ajax-form" class="autosubmit" method="POST" action="">
    <textarea id="pfdnote" name="notes" value="<?php echo $row['stk_description']?>" /></textarea>
</form>

<p id="notice"></p>

<?php

$stk1 = $stmt->prepare("select stk_id, stk_name, stk_type, stk_summary, stk_description from stk_stk");
$stk1->execute();
$stk2 = $stk1->fetchAll();

echo '<select id="option" onChange="updateThis(this)" lake="something">';

foreach ($stk2 as $d) {
        echo '<option id="lname" value="'.$d['stk_id'].'">'.$d['stk_id'] . "+".  $d['stk_name']." + ".$d['stk_type'].'</option>';
}

?>

<script>
jQuery(function(){
        $('#option').change(function(){
        var selectedLakeName = $('#option :selected').text();
        });
});
</script>

</body>
</html> 
```

这是从数据库中提取数据并在文本区域中显示的 getNote.php 代码。

```
<?php

$stk_id = $_GET['lname'];

require("DB_connector.php");
require("Functions.php");

$stk = $stmt->prepare("select stk_id, stk_name, stk_type, stk_summary, stk_description from stk_pfd WHERE stk_id = '$stk_id'");
$stk->execute();
$r = $stk->fetchAll();

foreach ($r as $row) {
        $stk_desc = $row['stk_description'];
}
echo $stk_desc;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:56:35.783

其他答案没有考虑到 tinymce 不是文本区域。tinymce 使用前一个 html 元素（通常是 textarea）的内容创建一个 contenteditable iframe，并将其放入 iframe 正文中。以前的 html 元素变为隐藏。

这是解决方案。而不是调用处理文本区域的代码：

```
document.getElementById("pfdnote").innerHTML=xmlhttp.responseText; 
```

您需要解决 tinymce（并使用其 API 作为 iframe 的主体）。用这个

```
tinymce.get('pfdnote').setContent(xmlhttp.responseText); 
```

此外，您应该知道调用

```
tinyMCE.execCommand("mceAddControl", true, "pfdnote"); 
```

第二次不使用`mceRemoveControl`和关闭编辑器将导致错误/问题。您应该检查编辑器是否已经存在，并且只有在它没有初始化它的情况下：

```
if (!tinymce.get('pdfnote')) tinyMCE.execCommand("mceAddControl", true, "pfdnote"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:17:18.070

尝试`<textarea>VALUE</textarea>`

`<textarea id="pfdnote" name="notes" /><?php echo $row['stk_description'];?></textarea>`

代替

`<textarea id="pfdnote" name="notes" value="<?php echo $row['stk_description']?>" /></textarea>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T11:06:51.060

好的，这是我的作弊。

我花了几个小时来解决这个问题，最后认为我可以通过创建一个新的文本框来覆盖整个文本框，然后将控件添加到其中。所以这是我的工作

我的 HTML

```
<div id="text1"><textarea id="textdescid" name="txt_desc" cols="60" rows="20"><strong>fdsfsdfsdfs</strong></textarea></div/> 
```

我的 Javascript

```
 var divbox=document.getElementById('text1');

     if(http.readyState == 4 && http.status == 200)  
     {  
         var response = http.responseText;  

         if(response.length > 0){
             divbox.innerHTML='<textarea id="textdescid2" name="txt_desc" cols="60" rows="20"><strong>tretdsgtdsfdsfdsf</strong></textarea>'
             tinyMCE.execCommand("mceRemoveControl", true, "textdescid");
             tinyMCE.execCommand("mceAddControl", true, "textdescid2");
         }  
     } 
```

希望这可以帮助你们。当然，您需要做一些修改，就像我在静态输出上使用的那样，以证明我的代码确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:38:38.470

从选择标签中删除它

```
onChange="updateThis(this)" 
```

并替换这个

```
<script language="JavaScript">
function updateThis(obj){
var option = document.getElementById('option').selectedIndex;
var option = document.getElementById('option').options[document.getElementById('option').selectedIndex].text;
//alert("running updateThis function and the variable named option is: " + option);
      if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
         xmlhttp=new XMLHttpRequest();
      }
      else
      {// code for IE6, IE5
         xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.onreadystatechange=function()
         {
           if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            tinyMCE.execCommand("mceAddControl", true, "pfdnote");
            document.getElementById("pfdnote").innerHTML=xmlhttp.responseText;
                        }
         }
      xmlhttp.open("GET","getNote.php?lname="+option,true);
      xmlhttp.send();
}
</script> 
```

和

```
<script>
jQuery(function(){
        $('select#option').live('change', function(){
             var selectedLakeName = $(this).val();

             $.ajax({
                 type:'get',
                 url: 'getNote.php',
                 data: {'lname':selectedLakeName},
                 success:function(ret)
                 {
                    $('#pfdnote').html(ret);
                 }

             });
        });
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-27T14:51:43.173

今天在类似的情况下，这对我非常*有用（tinymce 版本 4+）*

```
tinymce.get('textarea_id').setContent(your_new_content); 
```

`textarea_id`你的 textarea 的原始 ID在哪里，`your_new_content`是来自 AJAX 调用（或任何你想要的）的新内容

[TinyMCE 文档](https://www.tinymce.com/docs-3x/api/class_tinymce.Editor.html/#setcontent)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-27T05:16:34.593

```
<textarea id="editor" name="editor" type="text"></textarea>

 tinyMCE.triggerSave();
    var content = $("textarea[name=editor]").val();
    var formData = new FormData();
    formData.append("content", content);

 $.ajax({
            url: '../boot/newBlog.php',
            method: 'POST',
            type: 'POST',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                switch (response){

                }
              }
        }); 
```

# javascript - 如何删除 JSON 标头？

> ID：13341569
> 
> 赞同：0
> 
> 时间：2012-11-12T09:57:05.187
> 
> 标签：javascript, json, node.js

我有以下 JSON：

```
 {
"folder": [
    {
        "$": {
            "id": "471841542",
            "name": "Manajemen Pemasaran",
            "description": "",
            "user_id": "186868958",
            "shared": "1",
            "shared_link": "https://www.box.com/s/b0nupgg8boe25nyfz781",
            "permissions": "kcfgtedopnhsuvy",
            "size": "2258167",
            "file_count": "5",
            "created": "1352203782",
            "updated": "1352260971"
        },
        "tags": [
            {}
        ]
    },
    {
        "$": {
            "id": "469509910",
            "name": "C++",
            "description": "",
            "user_id": "186868958",
            "shared": "1",
            "shared_link": "https://www.box.com/s/byyidt02k4sglbuvxlw3",
            "permissions": "kcfgtedopnhsuvy",
            "size": "1322331",
            "file_count": "128",
            "created": "1352101667",
            "updated": "1352203670"
        },
        "tags": [
            {}
        ]
    },
    {
        "$": {
            "id": "469476618",
            "name": "Default Sync Folder",
            "description": "",
            "user_id": "186868958",
            "shared": "0",
            "shared_link": "",
            "permissions": "kcfgtedopnhsuvy",
            "size": "49509",
            "file_count": "1",
            "created": "1352098703",
            "updated": "1352098713"
        },
        "tags": [
            {}
        ]
    },
    {
        "$": {
            "id": "469469972",
            "name": "My Box Files",
            "description": "",
            "user_id": "186868958",
            "shared": "0",
            "shared_link": "",
            "permissions": "kcfgtedopnhsuvy",
            "size": "32426",
            "file_count": "1",
            "created": "1352097877",
            "updated": "1352097977"
        },
        "tags": [
            {}
        ]
    }
 ]
 } 
```

我希望它变成这样：

```
 {
"folder": [{
            "id": "471841542",
            "name": "Manajemen Pemasaran",
            "description": "",
            "user_id": "186868958",
            "shared": "1",
            "shared_link": "https://www.box.com/s/b0nupgg8boe25nyfz781",
            "permissions": "kcfgtedopnhsuvy",
            "size": "2258167",
            "file_count": "5",
            "created": "1352203782",
            "updated": "1352260971"
                "tags": [
            {}
        ]
    },
    {
            "id": "469509910",
            "name": "C++",
            "description": "",
            "user_id": "186868958",
            "shared": "1",
            "shared_link": "https://www.box.com/s/byyidt02k4sglbuvxlw3",
            "permissions": "kcfgtedopnhsuvy",
            "size": "1322331",
            "file_count": "128",
            "created": "1352101667",
            "updated": "1352203670",
                "tags": [
            {}
        ]
    },
    {
            "id": "469476618",
            "name": "Default Sync Folder",
            "description": "",
            "user_id": "186868958",
            "shared": "0",
            "shared_link": "",
            "permissions": "kcfgtedopnhsuvy",
            "size": "49509",
            "file_count": "1",
            "created": "1352098703",
            "updated": "1352098713",
            "tags": [
            {}
        ]
    },
    {
        "$": {
            "id": "469469972",
            "name": "My Box Files",
            "description": "",
            "user_id": "186868958",
            "shared": "0",
            "shared_link": "",
            "permissions": "kcfgtedopnhsuvy",
            "size": "32426",
            "file_count": "1",
            "created": "1352097877",
            "updated": "1352097977"
                "tags": [
            {}
        ]
    }
 ]
 } 
```

有没有办法从上面的 JSON 中删除 $？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:20:41.377

这应该会创建您想要的结果：

```
var json = { ... };    // your JSON data
var newJson = { folder: [] };

for (var i = 0, l = json.folder.length; i < l; ++i) {
    var tmp = json.folder[i].$;
    tmp.tags = json.folder[i].tags;
    newJson.folder.push(tmp);
}

console.log(newJson); 
```

# javascript - 为什么当我在我的 aspx 页面中的 html 图像点击事件中调用 JavaScript 函数时，我的网页会刷新？

> ID：13341570
> 
> 赞同：1
> 
> 时间：2012-11-12T09:57:05.080
> 
> 标签：javascript, asp.net, html

我在 mt aspx 页面中使用 html 图像控件，并且我在该控件的单击事件上调用 javascript 函数，但是在这里我的页面每次单击时都会刷新

这是我的代码：

```
<input id="wbsnew1" type="image" value="New" onclick="showHideDiv()" src="images/New.png" /> 
```

这是我的javascript代码：

```
function showHideDiv() {
        document.getElementById("newdata2").style.display = "block";
    } 
```

“newdata2”是一个 div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:59:51.887

```
<input id="wbsnew1" type="image" value="New" onclick="return showHideDiv();" src="images/New.png" />

function showHideDiv() {
    document.getElementById("newdata2").style.display = "block";
    return false;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:13:33.180

`<input type="image" />`元素用于提交表单（在 ASP.NET 中相当于回发）。

你有几个选择：

1.  （最好）将`<input>`标签替换为`<img />`. 其他属性相同（除了`type`不需要该属性）。
2.  添加`return false`到`onclick`处理程序：`<input onclick="showHideDiv(); return false;"`.
3.  从方法本身返回`false`值并将`return`keywork添加到方法中

    ```
    <input onclick="return showHideDiv();" />

    function showHideDiv() {
        ....
        return false;
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:04:15.440

我想输入标签位于触发重新加载的其他 html 元素内。尝试停止冒泡：

```
<input id="wbsnew1" type="image" value="New" onclick="showHideDiv(event)" src="images/New.png" />

function showHideDiv(event) {
        event.stopPropagation();
        document.getElementById("newdata2").style.display = "block";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:03:20.433

应用函数后尝试返回，如下代码：

```
`<input id="wbsnew1" type="image" value="New" onclick="showHideDiv(); return false;" src="images/New.png" />` 
```

也让你的函数返回 false

```
function showHideDiv() {  
     document.getElementById("newdata2").style.display = "block";

return false;
} 
```

# mongodb - 在所有应用程序中使用 Morphia、MongoClient 和 Datastore 作为静态变量是否合理？

> ID：13341579
> 
> 赞同：0
> 
> 时间：2012-11-12T09:57:47.587
> 
> 标签：mongodb, static, thread-safety, morphia

我们正在开发一个应用程序，每分钟左右就有数百个用户请求。

对于 mongodb 上的所有保存、获取和更新请求，使用 morphia、mongoclient 和数据存储作为静态变量是否合理，或者我应该为每个请求使用单独的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:45:28.343

共享一个 Mongo 实例不是一个好习惯，除非您的所有读/写操作共享相同的 ReadPreference/WritePreference。通常，我们可以为每个单独的操作指定首选项。但是在代码中到处指定首选项并不好。而如果我们使用 GridFS，我们只能在全局范围内指定读首选项和写首选项。

我经常创建几个数据存储，每个存储都有不同的读取偏好和写入关注点。我使用 Spring IoC 或任何 IoC 框架来管理它。

# java - Java替换特定字符

> ID：13341581
> 
> 赞同：1
> 
> 时间：2012-11-12T09:57:56.143
> 
> 标签：java, string, replace

这是我在这个网站上的第一个问题，所以我会尽量不成为一个完全的菜鸟..

我目前正在用java创建刽子手游戏。所以我的问题是如果给我们一个单词“ghost”并且ghost被替换为“_”，

```
hiddenWord = ghost.length();
for (i=0; i < ghost.lenth(); i ++)
System.out.print("_ ") 
```

给我们一个输出

“_ _ _ _ _”

假设我们猜测字母“O”，字母“o”被猜测，我该如何替换`

```
"_ _ _ _ _" with 
"_ _ o _ _ " 
```

我当前的类文件

```
public void pickWord()
    {
        String[] listOfWords;
        listOfWords = new String[10];
        listOfWords[0] = "shenanigans";
        listOfWords[1] = "conversely";
        listOfWords[2] = "octopus";
        listOfWords[3] = "dizzy";
        listOfWords[4] = "malicious";
        listOfWords[5] = "goosebumps";
        listOfWords[6] = "flying";
        listOfWords[7] = "staff";
        listOfWords[8] = "xylophone";
        listOfWords[9] = "zapping";
        Random generator = new Random();
        int lineNumber = generator.nextInt(9);
        disguisedWord = listOfWords[lineNumber];

    }   
    public void displayMark()
    {
        for( int i = 0; i < disguisedWord.length(); i ++)
            underscore = underscore + "_ ";
        System.out.println(underscore);

    }
    public void makeGuess() throws IOException
    {
        System.out.println("Your word is " + disguisedWord.length() + " letters long.");
        System.out.println("Feel free to guess a letter.");
        guess = (char)System.in.read(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:09:52.783

为什么不使用另一个真/假值数组来标记哪些字母已被猜到，哪些字母仍然未知？我不认为使用正则表达式和字符串替换是让刽子手工作的简单方法，尤其是当他们猜测另一个字母时。

可能是这样的。

```
String answer = "someword";
boolean[] knownLetters = new boolean[answer.length()];
for (int i = 0; i < answer.length(); i++) {
    if(knownLetters[i]) {
        System.out.print(answer.charAt(i));
    } else {
        System.out.print("_");
    }
}
System.out.println(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:01:28.660

最简单的方法是在目标词上使用 Java 正则表达式。因此，每当用户输入字母时，您都会在正则表达式匹配中查找该字母。该匹配将为您返回匹配字符的索引，然后您可以使用它来替换`__`字符串版本中的字母。

```
...    
    listOfWords[9] = "zapping";
    Random generator = new Random();
    int lineNumber = generator.nextInt(9);
    disguisedWord = listOfWords[lineNumber];
    char[] hidden = disguisedWord.replaceAll("*","_").toCharArray();
}

public void makeGuess() throws IOException {
    System.out.println("Your word is " + disguisedWord.length() + " letters long.");
    System.out.println("Feel free to guess a letter.");
    String guess = System.in.read();

    Pattern pat = new Pattern(guess);
    Matcher mat = pat.matcher(disguisedWord);
    while (mat.find()) {
        int start = mat.start();
        hidden[start] = guess.toCharArray()[0];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:03:42.113

```
String ghost = "ghost";
String input = "o";
for (int i = 0; i < ghost.length(); i++) {
    if (String.valueOf(ghost.charAt(i)).equalsIgnoreCase(input)) {
        System.out.print(input + " ");
    } else {
        System.out.print("_ ");
    }
} 
```

您可以使用三元运算符*简化*if 语句：

```
System.out.print(String.valueOf(ghost.charAt(i)).equalsIgnoreCase(input) ? input + " " : "_ "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:21:34.457

我认为最简单的方法是将状态存储在变量中，并通过循环现实世界替换匹配的字符。

```
private String word; 
private char[] state;

public void guess(char input){
    for (int i = 0; i < word.length(); i++) {
        if (word.toLowerCase().charAt(i) == input){
            state[i] = word.charAt(i);
        }
    }
} 
```

之后您可以打印“状态”的内容。

# android - 如何在android中访问url返回数据

> ID：13341582
> 
> 赞同：1
> 
> 时间：2012-11-12T09:58:00.847
> 
> 标签：android

[http://mascwt.oicp.net:7080/Monitoring/Data/getOrgData/](http://mascwt.oicp.net:7080/Monitoring/Data/getOrgData/) 这是一个url地址。如何访问 url 返回数据？url需要返回json数据。它可以访问返回数据。我想使用安卓 HttpClient。怎么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:06:09.827

```
public class WebServices {
public JSONObject RequestUrl(String url) {
    JSONObject jsonResponse = null;
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        Log.v("URL request", "--->" + url);
        URI uri = new URI(url);
        HttpGet httpget = new HttpGet(uri);
        httpget.setHeader("Accept", "application/json");
        httpget.setHeader("Content-type", "application/json; charset=utf-8");
        HttpResponse response = httpClient.execute(httpget);
        HttpEntity responseEntity = response.getEntity();
        String changeTIDRec = EntityUtils.toString(responseEntity);
        System.out.println(changeTIDRec);
        jsonResponse = new JSONObject(changeTIDRec);
        Log.v("WebService", "Response : " + jsonResponse);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return jsonResponse;
}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:03:03.960

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
new AsyncTask<Void,Void,Void>() {

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        JSONObject jObject = getJSONfromURL("http://mascwt.oicp.net:7080/Monitoring/Data/getOrgData/");
        return null;
    }
}.execute();
}
  public JSONObject getJSONfromURL(String url) {

// initialize
InputStream is = null;
String result = "";
JSONObject jArray = null;

// http post
try {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(url);
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();

} catch (Exception e) {
    Log.e("log_tag", "Error in http connection " + e.toString());
}

// convert response to string
try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(
            is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    result = sb.toString();
} catch (Exception e) {
    Log.e("log_tag", "Error converting result " + e.toString());
}

// try parse the string to a JSON object
try {
    jArray = new JSONObject(result);
} catch (JSONException e) {
    Log.e("log_tag", "Error parsing data " + e.toString());
}

return jArray; 
```

}

# c# - Awesomnium 帖子参数

> ID：13341584
> 
> 赞同：1
> 
> 时间：2012-11-12T09:58:07.657
> 
> 标签：c#, post, parameters, awesomium

目前我正在 C# 环境中使用 Awsomnium 1.7。我只是在使用 Core 并尝试定义自定义帖子参数。现在，我用谷歌搜索了很多，我什至在 asomnium 论坛上发帖，但没有答案。我理解这个概念，但最近的更改只是删除了建议的机制和示例。

我发现了什么：http: [//support.awesomium.com/kb/general-use/how-do-i-send-form-values-post-data](http://support.awesomium.com/kb/general-use/how-do-i-send-form-values-post-data)

问题在于，WebView 类不再包含“OnResourceRequest”事件。到目前为止，我已经实现了 IResourceInterceptor 并且“OnRequest”-Function 覆盖了 public ResourceResponse OnRequest(ResourceRequest request) 是签名，但我没有机会到达那里以添加请求标头。这里有人知道吗？我试图查看文档，但我没有找到任何内容......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T16:06:18.080

您需要将 IResourceInterceptor 附加到 WebCore，而不是 WebView。这是一个工作示例：

资源拦截器：

```
public class CustomResourceInterceptor : ResourceInterceptor
{
    protected override ResourceResponse OnRequest(ResourceRequest request)
    {
        request.Method = "POST";
        var bytes = "Appending some text to the request";
        request.AppendUploadBytes(bytes, (uint) bytes.Length);
        request.AppendExtraHeader("custom-header", "this is a custom header");

        return null;
    }
} 
```

主要应用：

```
public MainWindow()
{
    WebCore.Started += WebCoreOnStarted;
    InitializeComponent();
}

private void WebCoreOnStarted(object sender, CoreStartEventArgs coreStartEventArgs)
{
    var interceptor = new CustomResourceInterceptor();

    WebCore.ResourceInterceptor = interceptor;
    //webView is a WebControl on my UI, but you should be able to create your own WebView off WebCore
    webView.Source = new Uri("http://www.google.com");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-17T13:41:52.480

HotN 上面的回答很好；事实上，这是我的回答所依据的。然而，我花了一周的时间搜索这些信息并整理出一些可行的东西。（上面的答案有几个问题，至少在 Awesomium 的 v1.7 中无法使用。）我正在寻找的是可以直接使用的东西。

这就是解决方案。它需要改进，但它适合我目前的需求。我希望这对其他人有帮助。

```
// CRI.CustomResourceInterceptor
//
// Author:   Garison E Piatt
// Contact:  {removed}
// Created:  11/17/14
// Version:  1.0.0
//
// Apparently, when Awesomium was first created, the programmers did not understand that someone would
// eventually want to post data from the application. So they made it incredibly difficult to upload
// POST parameters to the remote web site. We have to jump through hoops to get that done.
//
// This module provides that hoop-jumping in a simple-to-understand fashion. We hope. It overrides
// the current resource interceptor (if any), replacing both the OnRequest and OnFilterNavigation
// methods (we aren't using the latter yet).
//
// It also provides settable parameters. Once this module is attached to the WebCore, it is *always*
// attached; therefore, we can simply change the parameters before posting to the web site.
//
// File uploads are currently unhandled, and, once handled, will probably only upload one file. We
// will deal with that issue later.
//
// To incoroprate this into your application, follow these steps:
// 1\. Add this file to your project. You know how to do that.
// 2\. Edit your MainWindow.cs file.
//   a. At the top, add:
//       using CRI;
//   b. inside the main class declaration, near the top, add:
//       private CustomResourceInterceptor cri;
//   c. In the MainWindow method, add:
//       WebCore.Started += OnWebCoreOnStarted;
//       cri = new CustomResourceInterceptor();
//     and (set *before* you set the Source value for the Web Control):
//       cri.Enabled = true;
//       cri.Parameters = String.Format("login={0}&password={1}", login, pw);
//     (Choose your own parameters, but format them like a GET query.)
//   d. Add the following method:
//       private void OnWebCoreOnStarted(object sender, CoreStartEventArgs coreStartEventArgs) {
//         WebCore.ResourceInterceptor = cri;
//       }
// 3\. Compile your application. It should work.

using System;
using System.Runtime.InteropServices;
using System.Text;
using Awesomium.Core;
using Awesomium.Windows.Controls;

namespace CRI {
  //* CustomResourceInterceptor
  // This object replaces the standard Resource Interceptor (if any; we still don't know) with something
  // that allows posting data to the remote web site. It overrides both the OnRequest and OnFilterNavigation
  // methods. Public variables allow for run-time configuration.
  public class CustomResourceInterceptor : IResourceInterceptor {
    // Since the default interceptor remains overridden for the remainder of the session, we need to disable
    // the methods herein unless we are actually using them. Note that both methods are disabled by default.
    public bool RequestEnabled = false;
    public bool FilterEnabled = false;

    // These are the parameters we send to the remote site. They are empty by default; another safeguard
    // against sending POST data unnecessarily. Currently, both values allow for only one string. POST
    // variables can be combined (by the caller) into one string, but this limits us to only one file
    // upload at a time. Someday, we will have to fix that. And make it backward-compatible.
    public String Parameters = null;
    public String FilePath = null;

    /** OnRequest
    ** This ovverrides the default OnRequest method of the standard resource interceptor. It receives
    ** the resource request object as a parameter.
    **
    ** It first checks whether or not it is enabled, and returns NULL if not. Next it sees if any
    ** parameters are defined. If so, it converst them to a byte stream and appends them to the request.
    ** Currently, files are not handled, but we hope to add that someday.
    */
    public ResourceResponse OnRequest(ResourceRequest request) {
      // We do nothing at all if we aren't enabled. This is a stopgap that prevents us from sending
      // POST data with every request.
      if (RequestEnabled == false) return null;

      // If the Parameters are defined, convert them to a byte stream and append them to the request.
      if (Parameters != null) {
        var str = Encoding.Default.GetBytes(Parameters);
        var bytes = Encoding.UTF8.GetString(str);

        request.AppendUploadBytes(bytes, (uint)bytes.Length);
      }

      // If either the parameters or file path are defined, this is a POST request. Someday, we'll
      // figure out how to get Awesomium to understand Multipart Form data.
      if (Parameters != null || FilePath != null) {
        request.Method = "POST";
        request.AppendExtraHeader("Content-Type", "application/x-www-form-urlencoded"); //"multipart/form-data");
      }

      // Once the data has been appended to the page request, we need to disable this process. Otherwise,
      // it will keep adding the data to every request, including those that come from the web site.
      RequestEnabled = false;
      Parameters = null;
      FilePath = null;

      return null;
    }

    /** OnFilterNavigation
    ** Not currently used, but needed to keep VisualStudio happy.
    */
    public bool OnFilterNavigation(NavigationRequest request) {
      return false;
    }
  }
} 
```

# c# - 将简单的数据类定义为抽象、接口或只是类？

> ID：13341588
> 
> 赞同：2
> 
> 时间：2012-11-12T09:58:22.940
> 
> 标签：c#, class

对 OOP 来说相当新。

我将构建一些支持我们主要业务的小型应用程序。

这些应用程序：

- 将需要一些常见的数据类

- 就属性而言，上述类将来可能会发生变化（将在ERP版本推进时添加属性）。

例如我有一个类：

```
public class Lot
    {
        public string SSCC { get; set; }
        public InventoryItem Item { get; set; }
        public string DescriptionLocalLot { get; set; }
        public string DescriptionEnglishLot { get; set; }
        public DateTime ProductionDate { get; set; }
        public string Shift { get; set; }
        public string WorkOrder { get; set; }
        public string ProductionLine { get; set; }
        public string BarcodeEAN14 { get; set; }
        public decimal Boxes { get; set; }
        public decimal Units { get; set; }
        public decimal Pieces { get; set; }
        public DateTime LastUpdated { get; set; }
        public string LastUser { get; set; }
        public Warehouse LastWarehouse { get; set; }
        public string ProductionLot { get; set; }
        public string PalletSequence { get; set; }
    } 
```

几乎所有应用程序（Windows 窗体或 ASP 页面）都将使用上述类。我已将此定义放在一个名为 CommonClasses 的单独文件中。

我应该更好地将这些类定义为抽象类还是接口类？在大多数情况下，这些类不包含方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:38:07.830

一个类应该描述一个对象的所有属性以及可以作用于它的方法。并非所有内容都将立即使用；但是提供它们是为了理解所有行为并跟踪对象的状态。

您的代码中描述的类似乎是具体类的候选者。它提供了一组存储在内存中并与一个对象相关的属性。如果您稍后需要其他功能，您可以`extend`使用该类来提供此功能。

但是，如果类的每个实例都需要不同的实现；那么你应该考虑`abstract`上课，或者也许`interface`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:05:48.820

如果更改对于使用这些类的所有应用程序来说都是常见的，那么您应该在您的情况下使用具体类。

# css - 如何在无序列表中均匀分布 HTML 列表项

> ID：13341589
> 
> 赞同：21
> 
> 时间：2012-11-12T09:58:26.663
> 
> 标签：css, css-float, html-lists, spacing

我希望`li`形成水平菜单的元素均匀分布在`ul`元素的宽度上。我通常将`float`我的`li`元素放在左边并添加一些边距。但是如何放置适当的间距，以便它们从`ul`元素的左侧延伸到右边缘？

这是[一个未分布](http://jsfiddle.net/UqcQc/)在`ul`.

每个之间的间距必须相同`li`。但是`li`元素可能有不同的长度。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-14T19:09:08.020

还有另一种方法。这是我尝试在页面上均匀地跨越菜单时使用的东西。如果您有一个动态菜单，该菜单会根据某些条件发生变化（例如仅当您以管理员身份登录时才会显示的管理页面），那就太好了。

CSS：

```
nav div ul {
display: table;
width: 100%;
list-style: none;
}
nav div ul li {
display: table-cell;
text-align: center;
}
nav div ul li a {
display: block;
} 
```

我有点懒，只是从我当前的项目中复制了这个，所以你必须调整它以适应你的代码，但这是我创建水平菜单的首选方法

编辑：您可以通过添加以下内容使其看起来更好：

CSS：

```
nav div ul li:first-child {
    text-align: left;
}
nav div ul li:last-child {
    text-align: right;
} 
```

再次，未经测试，只是输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:15:28.090

您需要设置 li 元素的宽度以强制它们填充空间：

```
ul {
    width: 100%;
}
li {
    float: left;
    width: 33%;
} 
```

（[小提琴演示](http://jsfiddle.net/UqcQc/2/)）

如果您向列表中添加更多项目，则需要调整百分比宽度 - 例如，如果有四个项目，宽度将为 25%。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:02:43.687

我有两个答案给你。

**如果你想坚持`float`模型**：

您的`ul`元素需要设置溢出属性（没有此属性，您的`ul`（或任何包含浮动元素的元素）没有指定高度（这是预期的行为，请注意：[http ://www.quirksmode.org/css/clearing .html](http://www.quirksmode.org/css/clearing.html)），因此默认高度为 0 - 这样做的效果是，如果您为`ul`/`li`和 body设置不同的背景颜色，您的背景`ul`似乎不会显示）。

```
ul {
    text-align: center;
    width: 300px;
    overflow: auto;
} 
```

您的`li`元素需要设置宽度，否则 - 作为浮动元素 - 它们的宽度将设置为它们包含的任何内容。我在下面使用了像素，但您也可以使用百分比值。

```
li {
    float: left;
    margin: 5px 0 5px 0;
    width: 100px;
    text-align: center;
} 
```

**`display:inline-block`为您的 li 元素使用该**属性（如果对旧浏览器的支持不是优先事项）。IE 7 不支持这一点，因此如果您需要广泛的跨浏览器支持，它就没有用，但它会产生您想要的效果 - 尽管确保您随后删除您的`</li>`和`<li>`标签之间的任何空格，否则它们将被计入总宽度并将显示为元素之间的空格。

`ul`此方法的一个优点是，如果您在包含的元素上使用百分比宽度，您不必知道或设置容器的宽度`li`，您仍然可以使用已有的 text-align 属性免费获得居中。这使您的布局非常敏感。

这是我认为您要求的标记和CSS：

标记：

```
<ul>
<li>banana</li><li>orange</li><li>apple</li>
</ul> 
```

CSS：

```
li {
    display:inline-block;
    margin:5px 0 5px 0;
    width:33.33%;
}
ul {
    text-align: center;
} 
```

*   `li`如果您希望将标记保留在多行上，那么您将不得不在 CSS 中调整元素的左右边距。
*   如果添加`li`元素，则必须更改百分比宽度以匹配（例如，`li`标记中有四个元素，您需要将 CSS 更改为每个元素的宽度为 25%）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-18T13:52:33.973

html:

```
 <ul>
    <li>1</li>
    <li>2 <br>4</li>
    <li>3</li>
</ul> 
```

CSS：

```
ul {
    list-style: none;
    font-size: 0;
    text-align: justify;
}

ul:after {
    content: '';
    display: inline-block;
    width: 100%;
}

li {
    font-size: 100px;
    display: inline-block;
} 
```

[密码笔](https://codepen.io/kozhinova-olga/pen/vwZvMB)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T10:08:37.430

我没有清楚地得到你的问题，所以我假设你可能想要这个：

```
li {
    border:solid 1px red;
    clear:both;
    display:block;
    float: left;
    margin: 5px;
    width:100%;
}
ul {
    text-align: center;
    width:300px;
} 
```

# jquery - 如何获取 aTargets 的数组长度？

> ID：13341593
> 
> 赞同：0
> 
> 时间：2012-11-12T09:58:46.307
> 
> 标签：jquery, datatables

我正在使用 Datatable jQuery 库中的 aoColumnDefs。所以我可以使用`"aTargets": [1, 2]`or 这样来定义我想通过这个函数改变哪一列。但是我的表是动态的，我想将此函数应用于除第一列之外的所有列。那么我该如何实现呢？
抱歉没有发布我使用的代码，这里是：

```
jQuery('.summary_tables').dataTable({
    "aoColumnDefs": [
     {
         "aTargets": [1,2,-1],
         "bUseRendered": false,
         "fnRender": function ( o ) {
             return o.oSettings.fnFormatNumber( parseInt( o.aData[ o.iDataColumn ] ) );
         }
     }
 ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:02:52.150

使用特殊值`"_all"`定位所有列，然后用另一行覆盖第一列的设置。例如：

```
aoColumnDefs: [
    { aTargets: ["_all"], bSortable: false },
    { aTargets: [1], bSortable: true }
] 
```

# postgresql - postgres 分区号

> ID：13341595
> 
> 赞同：1
> 
> 时间：2012-11-12T09:58:54.690
> 
> 标签：postgresql

我有一个按时间字段划分的表。我有 25 个分区。现在我考虑使用对象类型字段进一步对其进行分区。我有十个对象类型，所以它会产生 250 个分区。根据我阅读的内容，推荐的分区数是几十个，但在我的情况下，架构非常简单并且不包含任何连接，所以我想知道定义这么多分区是否可以。我正在使用 postgres 版本 9.1.2

```
CREATE TABLE metric_store.lc_aggregated_data_master_10_minutes
(
  from_time integer,
 object_id integer,
 object_type integer,
 latencies_client_fetch_sec_sum bigint,
 latencies_client_rttsec_sum bigint,
 latencies_db_bci_res_sec_sum bigint,
 latencies_net_infrastructure_ttlb_sec_sum bigint,
 latencies_retransmissions_sec_sum bigint,
 latencies_ttfbsec_sum bigint,
 latencies_ttlbsec_sum bigint,
 latencies_ttlbsec_sumsqr bigint,
 latencies_ttlbsec_histogram_level0 integer,
 latencies_ttlbsec_histogram_level1 integer,
 latencies_ttlbsec_histogram_level2 integer,
 latencies_ttlbsec_histogram_level3 integer,
 latencies_ttlbsec_histogram_level4 integer,
 latencies_ttlbsec_histogram_level5 integer,
 latencies_ttlbsec_histogram_level6 integer,
 latencies_ttlbsec_histogram_level7 integer,
 usage_bytes_total bigint,
 usage_hits_total integer,
 latencies_server_net_ttlbsec_sum bigint,
 latencies_server_rttsec_sum bigint,
 avaiability_errors_total integer
)
  WITH (
  OIDS=FALSE
  );
  ALTER TABLE metric_store.lc_aggregated_data_master_10_minutes
  OWNER TO postgres;

CREATE TABLE metric_store.lc_aggregated_data_10_minutes_from_1353070800
(
  CONSTRAINT lc_aggregated_data_10_minutes_from_1353070800_pkey PRIMARY KEY (from_time , object_id ),
  CONSTRAINT lc_aggregated_data_10_minutes_from_1353070800_from_time_check CHECK (from_time >=      1353070800 AND from_time < 1353190800)
   )
    INHERITS (metric_store.lc_aggregated_data_master_10_minutes)
   WITH (
   OIDS=FALSE
);
ALTER TABLE metric_store.lc_aggregated_data_10_minutes_from_1353070800
OWNER TO postgres;

CREATE INDEX lc_aggregated_data_10_minutes_from_1353070800_obj_typ_idx
ON metric_store.lc_aggregated_data_10_minutes_from_1353070800
USING btree
(from_time , object_type ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:34:29.993

当前版本（9.2）有这个[关于分区数的指导](http://www.postgresql.org/docs/9.2/static/ddl-partitioning.html)。（该指南自 8.3 以来没有改变。）

> 在约束排除期间会检查主表所有分区上的所有约束，因此大量分区可能会大大增加查询计划时间。使用这些技术进行分区可以很好地处理多达一百个分区；不要尝试使用数千个分区。

通过阅读 PostgreSQL 邮件列表，我相信增加查询计划的时间是您面临的主要问题。

如果您的分区可以将热数据与冷数据隔离开来，或者如果您的分区可以对您经常查询的集群数据集进行分组，那么您可能会没事的。但是测试是你最好的选择。`EXPLAIN ANALYZE`未分区表中的代表性查询，然后在分区后执行相同的操作。在分析其中任何一个之前选择有代表性的查询。

# authentication - SharePoint 2010 NTLM - 身份验证错误

> ID：13341596
> 
> 赞同：0
> 
> 时间：2012-11-12T09:58:55.680
> 
> 标签：authentication, sharepoint-2010, ntlm

问题如下：-我在服务器 A（域控制器）上定义了用户，-我在服务器 B 上安装了 SharePoint Farm（全新安装）

安装后，我已经启动了配置文件同步过程，所以我已经同步了所有需要的用户。创建站点后，我将 USER1 分配为其管理员/所有者。

据我了解，USER1 用户应该有权访问： - 站点设置/权限 - 站点内容

不幸的是，我坚持用户可以登录他的 my-domain\USER1 帐户，并且他可以访问大部分页面的情况。其余的部分：

*   example.net/（http://example.net/default.aspx 可以访问）
*   example.net/test/（http://example.net/test/SitePages/Home.aspx 可以访问）
*   example.net/test/SitePages/

导致重新认证。

通过将 PDC 中定义的用户/组添加到本地 WSS_WPG 组来解决这个问题真的很容易，但我不认为这是解决方案。

我将非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:13:15.207

问题出在 AD 配置中。

域用户必须启用绕过遍历检查以避免该问题。

有关更多信息，您可以查看以下链接：

*   [http://technet.microsoft.com/en-us/library/cc787794%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc787794%28v=ws.10%29.aspx)
*   [http://technet.microsoft.com/en-us/library/cc739389%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc739389%28v=ws.10%29.aspx)
*   www.windowsitpro.com/article/performance/how-to-use-the-bypass-traverse-checking-user-right

# jmeter - 如何让 Jmeter 将 CSV 数据用于 GET 参数？

> ID：13341597
> 
> 赞同：3
> 
> 时间：2012-11-12T09:59:00.023
> 
> 标签：jmeter

我想在 JMETER 中实现以下目标

1.  Jmeter 加载带有 ID 号的 CSV 文件
2.  Jmeter 中的每个用户/线程选择一个 ID 号并将其添加到他们的 HTTP 请求中，例如**http:www.testsite.com/test.php?id=x**
3.  重复步骤 2，选择文件中的下一个 ID 号。

这样我就可以测试我的 servlet 是否正在使用连接池执行多个线程。

我试过在这里手动输入值![在此处输入图像描述](../Images/82bd7ab9ea1f1ff1ed5d37b6c487f079.png)

但是，这是行不通的。

架构布局：

![在此处输入图像描述](../Images/1b5f70013595e839df9d23e14ea89f3c.png)

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T11:08:59.330

您可以尝试如下实现您的架构：

**1.**在 csv 文件中准备您的测试 ID，例如采用以下格式：

> ```
> id1
> id2
> ...
> idN 
> ```

**2.**使用以下架构：

```
CSV 数据集配置
文件名：[带有测试 ID 的 csv 文件的路径]
变量名：testID   *//提取的id可以参考${testID}*
在 EOF 上回收？错误的
在 EOF 上停止线程？真的
共享模式：当前线程 *// 此模式允许每个线程使用 csv*
线程组中的所有值 线程
数：N     *// 您的测试线程数（用户）*
循环计数：永远
. . .
    HTTP 请求 *// 你的 http 调用*
    服务器名称或 IP：www.testsite.com
    路径：/test.php?id=${testID}  *// 使用带有提取 ID 的变量*
. . .

```

# phpmyadmin - 页面下载了一个名为 download 的未知文件，没有未知的扩展名

> ID：13341601
> 
> 赞同：1
> 
> 时间：2012-11-12T09:59:21.810
> 
> 标签：phpmyadmin

更新： ip/phpmyadmin 不会去任何地方，然后在每次页面加载时下载一个文件。当我尝试这个命令时，服务 mysqld 状态；它说' **mysqld：无法识别的服务**'。

我已经尝试重新安装 linux xampp。我仍然有同样的问题。

问题：我在服务器上的 phpmyadmin 中创建了一个密码，现在我无法访问数据库。

这就是我输入地址/phpmyadmin 时的内容：错误 MySQL 说：

无法连接：无效设置。phpMyAdmin 尝试连接 MySQL 服务器，但服务器拒绝连接。您应该检查配置中的主机、用户名和密码，并确保它们与 MySQL 服务器管理员提供的信息相对应。

服务器是 centOs 我正在运行 linux XAMPP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T00:49:21.893

您可能已经安装了 suPHP，并且不允许从 phpmyadmin 提供页面，因为它们位于 /usr/share/ 目录中，该目录受 suPHP 限制，无法执行此处的页面，这是一个指向工作环境[https://serverfault 的链接。 com/questions/211935/running-phpmyadmin-and-suphp](https://serverfault.com/questions/211935/running-phpmyadmin-and-suphp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:12:26.873

如错误消息所述，您需要查看 phpMyAdmin 的配置设置。这些设置应该允许它连接到数据库。PhpMyAdmin 需要它来验证任何登录尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:42:12.363

请检查 phpmyadmin 的配置文件。

config.inc.php 配置-db.php

在 config-db.php 中，您可以找到 phpmyadmin 用于连接数据库的用户的 MySQL 登录数据。请使用此凭据从命令行登录，如果正确并且可以登录，则应检查 config.inc.php。您将在那里找到身份验证配置：

$cfg['Servers'][$i]['auth_type'] config - 它将使用配置文件中定义的凭据 cookie - 提示输入 MySQL 用户名和密码 http - 提示输入 MySQL 用户名和密码

如果设置为“cookie”，请清除网络浏览器缓存并再次尝试登录。如果您无法登录，请尝试通过命令行使用相同的凭据登录。

# jquery - Twitter Bootstrap - 当标签内容很长时标签无法正常工作

> ID：13341602
> 
> 赞同：1
> 
> 时间：2012-11-12T09:59:27.257
> 
> 标签：jquery, twitter-bootstrap

HTML：

```
<ul class="nav nav-tabs">
  <li><a href="#home" data-toggle="tab">Home</a></li>
  <li><a href="#profile" data-toggle="tab">Profile</a></li>
  <li><a href="#messages" data-toggle="tab">Messages</a></li>
  <li><a href="#settings" data-toggle="tab">Settings</a></li>
</ul>

<div class="tab-content">
                <div class="tab-pane active" id="home">
                    <p>a</p>
                    <p>very</p>
                    <p>long</p>
                    <p>content</p>
                    <p>string</p>
                    <p>to</p>
                    <p>simulate</p>
                    <p>very</p>
                    <p>long</p>
                    <p>paragraphs</p>
                    <p>for</p>
                    <p>testing</p>
                    <p>purposes</p>
                    <p>only</p>
                    <p>thank</p>
                    <p>you</p>
                    <p>and</p>
                    <p>good</p>
                    <p>morning</p>
                    <p>to</p>
                    <p>you</p>
                    <p>foo</p>
                    <p>bar</p>
                </div>
                <div class="tab-pane" id="profile">
                   Profile Content Here
                </div>
                <div class="tab-pane" id="messages">
                    Messages Content Here
                </div>
                <div class="tab-pane" id="settings">
                    Settings Content Here
                </div>
            </div> 
```

Javascript

```
if (location.hash !== '')
    {
        $('a[href="' + location.hash + '"]').tab('show');
    }

    $('a[data-toggle="tab"]').on('shown', function(e) {
          return location.hash = $(e.target).attr('href').substr(1);
    });

    $(window).on("hashchange", function(){
        $('a[href="' + location.hash + '"]').tab('show');
    });​ 
```

我[在这里有代码和演示](http://jsfiddle.net/nVU3r/)

单击#home 以外的其他选项卡时，选项卡工作正常。但是，如果我单击包含超过页面的长内容的选项卡，则页面会聚焦在 div 上，这会导致视口位于相应的 div 上。从美学上讲，我希望该页面不要进入该 div。

有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:19:03.390

`focus()`在返回之前添加对显示的事件处理程序的调用。

```
$('a[data-toggle="tab"]').on('shown', function(e) {
    location.hash = $(e.target).attr('href').substr(1);
    $(this).focus();
    return false; // or true - whichever you prefer
}); 
```

看小提琴 - [http://jsfiddle.net/nVU3r/3/](http://jsfiddle.net/nVU3r/3/)

更新了小提琴。我`$()`在元素周围添加了允许焦点调用。设置时`location.hash`，浏览器会自动移动到元素。我们只需将其切换回来。

如果您不需要，`location.hash`那么您可以删除整个代码块，并且新呈现的选项卡不会获得焦点。

# iphone - 是否可以更改 UITabBarItem 徽章颜色

> ID：13341603
> 
> 赞同：30
> 
> 时间：2012-11-12T09:59:29.320
> 
> 标签：iphone, objective-c, ios, uitabbar, uitabbaritem

我想更改`UITabBarItem` **徽章**的背景颜色，但找不到任何有关如何制作它的资源。

![在此处输入图像描述](../Images/88ba234acb567c4cf2a078bce8f08774.png)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2016-09-28T16:32:58.503

`UITabBarItem`从 iOS 10 开始就有这个功能了。

```
var badgeColor: UIColor? { get set } 
```

它也可以通过外观获得。

```
if #available(iOS 10, *) {
   UITabBarItem.appearance().badgeColor = .green
} 
```

参考文档： [https ://developer.apple.com/reference/uikit/uitabbaritem/1648567-badgecolor](https://developer.apple.com/reference/uikit/uitabbaritem/1648567-badgecolor)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-08-29T22:39:49.733

iOS 10 和更高版本现在原生支持更改徽章颜色，`badgeColor`使用`UITabBarItem`. 有关该属性的更多信息，请参阅[苹果文档](https://developer.apple.com/reference/uikit/uitabbaritem/1648567-badgecolor)。

例子：

*   斯威夫特 3：`myTab.badgeColor = UIColor.blue`
*   目标-C：`[myTab setBadgeColor:[UIColor blueColor]];`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-04-03T09:41:29.537

我为我的应用程序编写了这段代码，但我只在 iOS 7 中对其进行了测试。

```
for (UIView* tabBarButton in self.tabBar.subviews) {
    for (UIView* badgeView in tabBarButton.subviews) {
        NSString* className = NSStringFromClass([badgeView class]);

        // looking for _UIBadgeView
        if ([className rangeOfString:@"BadgeView"].location != NSNotFound) {
            for (UIView* badgeSubview in badgeView.subviews) {
                NSString* className = NSStringFromClass([badgeSubview class]);

                // looking for _UIBadgeBackground
                if ([className rangeOfString:@"BadgeBackground"].location != NSNotFound) {
                    @try {
                        [badgeSubview setValue:[UIImage imageNamed:@"YourCustomImage.png"] forKey:@"image"];
                    }
                    @catch (NSException *exception) {}
                }

                if ([badgeSubview isKindOfClass:[UILabel class]]) {
                    ((UILabel *)badgeSubview).textColor = [UIColor greenColor];
                }
            }
        }
    }
} 
```

您只能使用图像而不是颜色来更新徽章背景。如果您想以某种方式更新它，我还公开了徽章标签。

需要注意的是，此代码必须在设置后调用`tabBarItem.badgeValue`！

编辑：2014 年 4 月 14 日

上面的代码在任何地方调用时都可以在 iOS 7 中运行。要让它在 iOS 7.1 中工作，请在视图控制器中调用它`-viewWillLayoutSubviews`。

编辑：14 年 12 月 22 日

这是我目前正在使用的更新片段。为简单起见，我将代码放在类别扩展中。

```
- (void)badgeViews:(void (^)(UIView* badgeView, UILabel* badgeLabel, UIView* badgeBackground))block {
    if (block) {
        for (UIView* tabBarButton in self.subviews) {
            for (UIView* badgeView in tabBarButton.subviews) {
                NSString* className = NSStringFromClass([badgeView class]);

                if ([className rangeOfString:@"BadgeView"].location != NSNotFound) {
                    UILabel* badgeLabel;
                    UIView* badgeBackground;

                    for (UIView* badgeSubview in badgeView.subviews) {
                        NSString* className = NSStringFromClass([badgeSubview class]);

                        if ([badgeSubview isKindOfClass:[UILabel class]]) {
                            badgeLabel = (UILabel *)badgeSubview;

                        } else if ([className rangeOfString:@"BadgeBackground"].location != NSNotFound) {
                            badgeBackground = badgeSubview;
                        }
                    }

                    block(badgeView, badgeLabel, badgeBackground);
                }
            }
        }
    }
} 
```

然后当你准备好调用它时，它看起来像这样。

```
[self.tabBar badgeViews:^(UIView *badgeView, UILabel *badgeLabel, UIView *badgeBackground) {

}]; 
```

编辑：11/16/15

我注意到有些人需要更清楚地了解这段代码中发生的事情。for 循环正在搜索一些不可公开访问的视图。通过检查视图类名称是否包含预期名称的一部分，可以确保到达预期视图，同时不会引发 Apple 的任何可能的危险信号。一旦找到所有内容，就可以轻松访问这些视图来执行一个块。

值得注意的是，此代码有可能在未来的 iOS 更新中停止工作。例如，这些内部视图有朝一日可能会获得不同的类名。然而，这种可能性几乎为零，因为即使在内部，Apple 也很少将类重构为这种性质。但即使他们这样做，它也将是类似标题的东西`UITabBarBadgeView`，它仍然会达到代码中的预期点。由于 iOS9 已经推出，而且这段代码仍在按预期工作，你可以期望这个问题永远不会出现。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-05-18T16:18:42.143

我有同样的问题，并通过创建一个小类别将 BadgeView 替换为您可以轻松自定义的 UILabel 来解决它。

[https://github.com/enryold/UITabBarItem-CustomBadge/](https://github.com/enryold/UITabBarItem-CustomBadge/)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-03-07T14:18:44.403

对于使用 Swift 的人，我设法改进了 TimWhiting 的答案，以使徽章视图可以在**任何屏幕尺寸和任何方向上**工作。

```
 extension UITabBarController {

    func setBadges(badgeValues: [Int]) {

        for view in self.tabBar.subviews {
            if view is CustomTabBadge {
                view.removeFromSuperview()
            }
        }

        for index in 0...badgeValues.count-1 {
            if badgeValues[index] != 0 {
                addBadge(index, value: badgeValues[index], color:UIColor(paletteItem: .Accent), font: UIFont(name: Constants.ThemeApp.regularFontName, size: 11)!)
            }
        }
    }

    func addBadge(index: Int, value: Int, color: UIColor, font: UIFont) {
        let badgeView = CustomTabBadge()

        badgeView.clipsToBounds = true
        badgeView.textColor = UIColor.whiteColor()
        badgeView.textAlignment = .Center
        badgeView.font = font
        badgeView.text = String(value)
        badgeView.backgroundColor = color
        badgeView.tag = index
        tabBar.addSubview(badgeView)

        self.positionBadges()
    }

    override public func viewDidLayoutSubviews() {
        super.viewDidLayoutSubviews()
        self.positionBadges()
    }

    // Positioning
    func positionBadges() {

        var tabbarButtons = self.tabBar.subviews.filter { (view: UIView) -> Bool in
            return view.userInteractionEnabled // only UITabBarButton are userInteractionEnabled
        }

        tabbarButtons = tabbarButtons.sort({ $0.frame.origin.x < $1.frame.origin.x })

        for view in self.tabBar.subviews {
            if view is CustomTabBadge {
                let badgeView = view as! CustomTabBadge
                self.positionBadge(badgeView, items:tabbarButtons, index: badgeView.tag)
            }
        }
    }

    func positionBadge(badgeView: UIView, items: [UIView], index: Int) {

        let itemView = items[index]
        let center = itemView.center

        let xOffset: CGFloat = 12
        let yOffset: CGFloat = -14
        badgeView.frame.size = CGSizeMake(17, 17)
        badgeView.center = CGPointMake(center.x + xOffset, center.y + yOffset)
        badgeView.layer.cornerRadius = badgeView.bounds.width/2
        tabBar.bringSubviewToFront(badgeView)
    }
}

class CustomTabBadge: UILabel {} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-01-26T15:22:32.917

**Swift 3**这是 Swift 3 的 @Kirualex 答案的更新版本（改进了 @TimWhiting 的答案）。

```
extension UITabBarController {

    func setBadges(badgeValues: [Int]) {

        for view in self.tabBar.subviews {
            if view is CustomTabBadge {
                view.removeFromSuperview()
            }
        }

        for index in 0...badgeValues.count-1 {
            if badgeValues[index] != 0 {
                addBadge(index: index, value: badgeValues[index], color: UIColor.blue, font: UIFont(name: "Helvetica-Light", size: 11)!)
            }
        }
    }

    func addBadge(index: Int, value: Int, color: UIColor, font: UIFont) {
        let badgeView = CustomTabBadge()

        badgeView.clipsToBounds = true
        badgeView.textColor = UIColor.white
        badgeView.textAlignment = .center
        badgeView.font = font
        badgeView.text = String(value)
        badgeView.backgroundColor = color
        badgeView.tag = index
        tabBar.addSubview(badgeView)

        self.positionBadges()
    }

    override open func viewDidLayoutSubviews() {
        super.viewDidLayoutSubviews()
        self.positionBadges()
    }

    // Positioning
    func positionBadges() {

        var tabbarButtons = self.tabBar.subviews.filter { (view: UIView) -> Bool in
            return view.isUserInteractionEnabled // only UITabBarButton are userInteractionEnabled
        }

        tabbarButtons = tabbarButtons.sorted(by: { $0.frame.origin.x < $1.frame.origin.x })

        for view in self.tabBar.subviews {
            if view is CustomTabBadge {
                let badgeView = view as! CustomTabBadge
                self.positionBadge(badgeView: badgeView, items:tabbarButtons, index: badgeView.tag)
            }
        }
    }

    func positionBadge(badgeView: UIView, items: [UIView], index: Int) {

        let itemView = items[index]
        let center = itemView.center

        let xOffset: CGFloat = 12
        let yOffset: CGFloat = -14
        badgeView.frame.size = CGSize(width: 17, height: 17)
        badgeView.center = CGPoint(x: center.x + xOffset, y: center.y + yOffset)
        badgeView.layer.cornerRadius = badgeView.bounds.width/2
        tabBar.bringSubview(toFront: badgeView)
    }
}

class CustomTabBadge: UILabel {} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-08-30T12:36:47.430

不，您不能更改颜色，但您可以使用自己的徽章。在文件范围内添加此扩展名，您可以根据需要自定义徽章。只需调用`self.tabBarController!.setBadges([1,0,2])`您的任何根视图控制器。

需要明确的是，这是一个包含三个项目的标签栏，徽章值从左到右。

```
extension UITabBarController {
    func setBadges(badgeValues:[Int]){

        var labelExistsForIndex = [Bool]()

        for value in badgeValues {
            labelExistsForIndex.append(false)
        }

        for view in self.tabBar.subviews {
            if view.isKindOfClass(PGTabBadge) {
                let badgeView = view as! PGTabBadge
                let index = badgeView.tag

                if badgeValues[index]==0 {
                    badgeView.removeFromSuperview()
                }

                labelExistsForIndex[index]=true
                badgeView.text = String(badgeValues[index])

            }
        }

        for var i=0;i<labelExistsForIndex.count;i++ {
            if labelExistsForIndex[i] == false {
                if badgeValues[i] > 0 {
                    addBadge(i, value: badgeValues[i], color:UIColor(red: 4/255, green: 110/255, blue: 188/255, alpha: 1), font: UIFont(name: "Helvetica-Light", size: 11)!)
                }
            }
        }

    }

    func addBadge(index:Int,value:Int, color:UIColor, font:UIFont){

        let itemPosition = CGFloat(index+1)
        let itemWidth:CGFloat = tabBar.frame.width / CGFloat(tabBar.items!.count)

        let bgColor = color

        let xOffset:CGFloat = 12
        let yOffset:CGFloat = -9

        var badgeView = PGTabBadge()
        badgeView.frame.size=CGSizeMake(17, 17)
        badgeView.center=CGPointMake((itemWidth * itemPosition)-(itemWidth/2)+xOffset, 20+yOffset)
        badgeView.layer.cornerRadius=badgeView.bounds.width/2
        badgeView.clipsToBounds=true
        badgeView.textColor=UIColor.whiteColor()
        badgeView.textAlignment = .Center
        badgeView.font = font
        badgeView.text = String(value)
        badgeView.backgroundColor = bgColor
        badgeView.tag=index
        tabBar.addSubview(badgeView)

    }
}

class PGTabBadge: UILabel {

} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-11-12T10:10:31.693

看来没有。您只能设置该值。来自 Apple 的文档徽章是：

> 显示在项目右上角的文本，周围有一个**红色**椭圆。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-10T04:03:37.950

您需要在索引处指定选项卡项以更改徽章颜色，#available in iOS 10 ，

```
 if #available(iOS 10.0, *) 
    {
        self.kAppTabBarController.tabBar.items![1].badgeColor = YOUR_COLOR
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-17T11:27:50.347

您现在也可以在情节提要中执行此操作，方法是选择您的标签栏项目并转到属性检查器。

[![在此处输入图像描述](../Images/c96c02d6c90a79f7604294f177ac0685.png)](https://i.stack.imgur.com/6IAf9.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-12T10:14:00.997

是的，但唯一可能的解决方案是创建自定义标签栏并创建自定义标签栏徽章图标。您会发现许多用于创建自定义标签栏的文章/代码。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-11-22T18:48:57.947

嗯……很简单。[[self tabBarItem] setBadgeColor:[UIColor greenColor]];

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-09-08T13:21:28.350

```
// change TabBar BadgeView background Color
-(void)changeTabBarBadgeViewBgColor:(UITabBar*)tabBar {
    for (UIView* tabBarButton in tabBar.subviews) {
        for (UIView* badgeView in tabBarButton.subviews) {
            NSString* className = NSStringFromClass([badgeView class]);

            // looking for _UIBadgeView
            if ([className rangeOfString:@"BadgeView"].location != NSNotFound) {
                for (UIView* badgeSubview in badgeView.subviews) {
                    NSString* className = NSStringFromClass([badgeSubview class]);

                    // looking for _UIBadgeBackground
                    if ([className rangeOfString:@"BadgeBackground"].location != NSNotFound) {
                        @try {
                            [badgeSubview setValue:nil forKey:@"image"];
                            [badgeSubview setBackgroundColor:[UIColor blueColor]];
                            badgeSubview.clipsToBounds = YES;
                            badgeSubview.layer.cornerRadius = badgeSubview.frame.size.height/2;
                        }
                        @catch (NSException *exception) {}
                    }

                    if ([badgeSubview isKindOfClass:[UILabel class]]) {
                        ((UILabel *)badgeSubview).textColor = [UIColor greenColor];
                    }
                }
            }
        }
    }
} 
```

[![在此处输入图像描述](../Images/4cbf5c0f63d4b24861afdde3ed6dc339.png)](https://i.stack.imgur.com/rHeph.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-29T11:02:21.797

由于 iOS 15 有不同的方法，所以在我的情况下有效：

```
let appearance = UITabBarAppearance()
appearance.configureWithTransparentBackground()

let barAppearance = UITabBarItemAppearance()

barAppearance.normal.badgeBackgroundColor = .green
barAppearance.normal.badgeTextAttributes = [NSAttributedString.Key.foregroundColor: UIColor.red]

appearance.stackedLayoutAppearance = barAppearance

tabBar.standardAppearance = appearance 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2016-11-22T15:14:36.853

看看这里@ [UITabbarItem-CustomBadge](https://github.com/ratulSharker/UITabbarItem-CustomBadge)。

下面是一个完整的演示

[![示范](../Images/49e72b70d89116547ead31226bfd90e8.png)](https://i.stack.imgur.com/Ou7di.gif)

如果要使用默认实现，只需要两行代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

  //supplying the animation parameter
  [UITabBarItem setDefaultAnimationProvider:[[DefaultTabbarBadgeAnimation alloc] init]];
  [UITabBarItem setDefaultConfigurationProvider:[[DefaultSystemLikeBadgeConfiguration alloc] init]];

  //rest of your code goes following...

  return YES;
} 
```

# api - Trello取卡时获取会员头像Hash

> ID：13341606
> 
> 赞同：1
> 
> 时间：2012-11-12T09:59:45.537
> 
> 标签：api, avatar, trello

根据 Trello API 文档，可以将成员的 avatarHash 作为列表中卡片数据的一部分返回。我应该能够使用以下任一方式的提要：

*   https://trello.com/1/lists/[LIST_ID]/cards?member_fields=all
*   https://trello.com/1/lists/[LIST_ID]/cards?member_fields=avatarHash

但是，无论如何，对我来说，无论有没有查询参数，数据都是完全相同的。我还尝试将我的应用程序密钥和令牌添加到 URL，但仍然没有成功。

我真正想做的是获取成员头像的 URI，我相信我可以使用哈希构建正确的 URI。任何帮助或任何关于我做错了什么的指示都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T13:45:17.330

Trello 的[API](https://trello.com/docs/api/card/index.html)文档显示有可选字段，但不清楚甚至没有说明（尽管在阅读后相当明显）要使`member_fields`参数有效，还应该将其`members=true`指定为 URI 的一部分。

我在检查 Trello 自己创建的 API 调用并删除了所有内容时遇到了这个问题，但是`member_fields`，他们甚至丢失了一些东西，但添加`members`回来按预期工作。

现在，我的 API 调用终于开始工作了，看起来像这样：

*   https://trello.com/1/lists/[LIST_ID]/cards?members=true&member_fields=avatarHash

# javascript - Javascript 匹配两个至少有 n 个字符的字符串

> ID：13341607
> 
> 赞同：3
> 
> 时间：2012-11-12T09:59:50.317
> 
> 标签：javascript

我想匹配至少 n 个字符的字符串，比如 3。

例如，如果我有两个单词，如果两个单词有 3 个字符的公共子字符串，我想返回 true

即，如果我匹配California 和Unical，我希望得到正确，因为两者都将“Cal”作为公共字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:12:44.323

```
function findCommonSubstring(s1, s2, n) {

    s1 = s1.toLowerCase();
    s2 = s2.toLowerCase();
    var min = s1.length < s2.length ? s1 : s2;
    var max = min == s1 ? s2 : s1;

    if(n <= 0 || n > min.length) {
        return false;
    }

    var substring;
    for(var i=0; i<=min.length-n; i++) {
        if(max.indexOf((substring = min.substring(i, i+n))) > -1) {
            return substring;
        }
    }

    return false;
} 
```

称呼：

```
alert(findCommonSubstring("California", "Unical", 3));​ 
```

印刷：

```
cal 
```

[演示](http://jsfiddle.net/2kUDw/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:10:32.130

```
function test(first,second,nl)
{
    first=first.toLowerCase();
    second=second.toLowerCase();

   if(first.length>second.length)
   {
       var len=first.length ;
   }
   else
   {
       var len=second.length;
       var t=first;
       first=second;
       second=t;
   }

   //var len=first.length>second.length?first.length:second.length;

   var count=0;
   while(len>=nl)
   {
       str=first.substr(count,nl);
       if(second.indexOf(str)!=-1)
       {
           return str;
           break;
       }
       count++;
       len--;
   }
   return false;        
}
 alert(test('Cal','unicbbl',4))  
 alert(test('California','unicali',3));
 alert(test('California','unicali',4));
[test here][1]

  [1]: http://jsfiddle.net/tuMRg/5/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:06:47.893

```
function matchStrings(s1, s2, charnum) {
    var found = false;
    var i = 0;
    if ( charnum>0 && charnum<s2.length ) {
        s1=s1.toLowerCase();
        s2=s2.toLowerCase();
        for (i=0; i<=s2.length - charnum; i++) {
            if ( s1.indexOf(s2.substr(i, charnum)) > -1 ) {
                found = true;
                break;
            }
        }
    }
    return found;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:43:32.887

以下是相当复杂的，但如果您从大型内容中搜索字符串，这是一个不错的选择。它首先过滤可能的匹配，然后测试这些可能性。

```
var atLeastMatch = function(search, content, atLeast) {
    var search = search,
        content = content,
        regex = new RegExp('[' + search + ']{' + atLeast + ',}', "i", "g"),
        possibleMatches = content.match(regex);

    for (var i = 0, j = possibleMatches.length; i < j; i++) {
        if (possibleMatches[i].length > atLeast) {
            for (var k = 0, l = possibleMatches[i].length - atLeast; k <= l; k++) {
                if ((new RegExp(possibleMatches[i].slice(k, k + atLeast), "i")).test(search)) {
                    return true;
                }

            }

        } else {
            if ((new RegExp(possibleMatches[i], "i")).test(search)) {
                return true;
            }

        }

    }

    return false;

}

console.log(atLeastMatch('California', 'Unical', 3)); 
```

# java - Java 向量 引用 int[] 还是复制？

> ID：13341609
> 
> 赞同：2
> 
> 时间：2012-11-12T09:59:53.780
> 
> 标签：java, vector

我正在创建整数数组的组合并将它们添加到 Vector 以存储它们以供以后使用。我通过循环 int[] 进行组合，然后将元素添加到向量中。

Vector 是否仅添加对 int[] 的引用，因此我将在最后保留对同一 int[] 的大量引用，还是将副本添加到 Vector？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:01:07.303

数组，包括Java`int[]`中`Object`的 s。这意味着您`Vector`持有对您的`int[]`元素的引用。

但是，`ArrayList`如果`Vector`您`Collections.synchronizedList`确实需要同步版本的`List`.

# maven - Intellij IDEA 无法解析多模块项目中的依赖关系

> ID：13341610
> 
> 赞同：3
> 
> 时间：2012-11-12T09:59:54.763
> 
> 标签：maven, intellij-idea

我决定尝试 Intellij Idea，并将现有的 Maven 多模块项目从 Eclipse 导入到 Idea。但是Idea无法解析与GWT类相关的依赖以及maven模块之间的一些依赖。我试图重新导入 Maven 项目 - 它没有帮助。

我该如何解决这个问题？

附加信息：项目是从 Eclipse 的工作区导入的（带有 Eclipse 特定文件，例如`.project`等。但我认为这不是问题）。GWT 依赖项存在于 中`pom.xml`，但 GWT 中的所有类都以红色突出显示。在eclipse中这个项目工作正常。

# error-handling - 我可以以编程方式访问应用配置中设置的错误级别吗？

> ID：13341611
> 
> 赞同：2
> 
> 时间：2012-11-12T09:59:58.627
> 
> 标签：error-handling, trigger.io

有没有办法访问配置定义的应用程序错误级别？

像这样的东西`forge.logging.level`应该非常适合以编程方式处理某些情况，例如调试（即，加载 Catalyst 库/启用调试等，而无需手动更改文件，而是依赖于真正的错误级别）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:24:42.137

你应该可以看到`forge.config.modules.logging.level`。

# google-chrome-extension - 如何为 Chrome 扩展程序创建动态参数？

> ID：13341612
> 
> 赞同：2
> 
> 时间：2012-11-12T10:00:00.513
> 
> 标签：google-chrome-extension

我将 Chrome 扩展程序与软件捆绑在一起。
在安装过程中，我正在创建一个用户 ID 并将其写入注册表。
我也希望我的扩展“知道”这个值，我可以在没有 NPAPI 插件的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:19:16.023

如果您的产品有网站，您可以执行以下操作。在安装期间向您的站点提交新`UserID`的（除了将其写入注册表），然后在 Chrome 中打开您站点上的特定页面，该页面应包含相同`UserID`的参数。您的扩展可以读取传出请求，因此它可以解析出`UserID`. 接下来它应该检查来自您的服务器的响应，它必须比较`UserID`从浏览器获得的值和从您的安装中获得的值。这将防止`UserID`欺骗。

另外，虽然我不确定你不会认为下一个建议是*矫枉过正*（所以 NPAPI 插件看起来也是可以接受的解决方案），但这是我在 Chrome 扩展程序和外部程序之间进行绑定的方式（还有更多复杂的目的，而不仅仅是读取注册表）。

您可以在专用端口上构建一个最小的本地 web 服务器（或 websockets 服务器）处理请求，为其提供注册信息（`UserID`等），然后仅通过普通 http-request 的方式从扩展中请求所需的数据（例如、AJAX 或 websockets 客户端）。

这些方法有一个缺点，即需要设置用户的防火墙，因此它将允许来自您的安装程序或来自本地 Web 服务器的流量。

# sql-server - Visual Studio 数据库项目约束失败

> ID：13341620
> 
> 赞同：1
> 
> 时间：2012-11-12T10:00:47.740
> 
> 标签：sql-server, visual-studio-2012

我有一个 Visual Studio 数据库项目，其中包含一系列具有外键约束的表。

发布脚本包括添加约束脚本：

```
ALTER TABLE [dbo].[AttributeValue] WITH NOCHECK
ADD CONSTRAINT [FK_AttributeValue_Attribute] 
FOREIGN KEY ([AttributeId]) REFERENCES [dbo].[Attribute] ([AttributeId]); 
```

在脚本的最后，它启用了约束：

```
ALTER TABLE [dbo].[AttributeValue] WITH CHECK CHECK CONSTRAINT [FK_AttributeValue_Attribute]; 
```

问题是，它无法启用约束，因为它认为它不存在。如果我检查表格，我可以确认它不存在。

为什么没有创建约束？

如果我单独运行脚本，则创建工作和启用工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:02:49.120

这确实将成为每日 WTF 的条目。

有人在项目中添加了构建后脚本，该脚本执行以下步骤。

1.  通过检查系统表删除所有约束

2.  添加一些数据

3.  尝试通过检查系统表再次创建约束

当然，步骤 3 什么也不做，因为在系统表中找不到任何内容，因为它删除了步骤 1 中的所有内容。

我真的对这个计划感到震惊，并将其替换为以下内容：

第1步

```
EXEC sp_MSforeachtable @command1="print 'Disabling constraints: ?'", @command2="ALTER TABLE ? NOCHECK CONSTRAINT all" 
```

第 3 步

```
EXEC sp_MSforeachtable @command1="print 'Enabling constraints: ?'", @command2="ALTER TABLE ? WITH CHECK CHECK CONSTRAINT all" 
```

# php - 在数据库/cms 中存储带有 alt 标签的图像的想法？PHP/MySQL

> ID：13341626
> 
> 赞同：1
> 
> 时间：2012-11-12T10:01:08.013
> 
> 标签：php, mysql

我正在构建一个简单的 CMS 并拥有登录、编辑页面等。

那些已经建立了自己的 CMS 的人，如何使用 alt 标签存储用户上传的图像？

数据库中的文件名/路径和 alt 标签也在那里？

然后在写出图片的时候抓取id，创建一个充当图片的php页面？

例如： `<?php include image.php?id=1; ?>`

image.php 输出：

```
get id
connect to db
echo '<img src="nameofimageandextension" alt="alttag">'; 
```

或者这不是一个好主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:07:03.483

存储名称和替代文本似乎是最好的解决方案。然后可以将路径配置为静态的，即，`/user/upload`或类似的东西。

然后必须通过 php 路由需要的图像以确保显示 alt 文本。

```
 <img src="<?php echo $imagePath . $imageNameFromDB; ?>" alt="<?php echo $imageAltFromDB; ?>"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:18:17.363

创建这样的表（或用户表的扩展）的问题在哪里？

```
+----+----------------+------------------+
| id | name           | alt_tag          |
+----+----------------+------------------+
|  1 | myimage.png    | My image         |
|  2 | otherimage.jpg | Some other image |
+----+----------------+------------------+ 
```

并像这样访问它：

```
$query = "SELECT name, alt_tag FROM images WHERE id = ?";
$params = array( 1 );

$path = "http://mysite.com/path/to/image/";

$stmt = $db->prepare( $query );
$stmt->execute( $params );
$row = $stmt->fetchAll( PDO::FETCH_ASSOC );

echo '<img src="{$path.$row[name]}" alt="{$row[alt_tag]}" title="{$row[alt_tag]}" />'; 
```

我相信这是最干净、最简单（*最好？*）的方法。

并回答第二个问题：

取决于您要如何保护图像，但通常情况下，**不**，最好显示真实的图像链接。您不希望用户将所有图像视为`myimage.php?id=1`样式，除非它们是*验证码*或其他`one time use only`图像。
使用 PHP 作为图像 url 会弄乱一些浏览器缓存，因此这意味着用户每次访问时都必须加载**您的整个站点。**

对用户或您的服务器流量来说并不愉快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:22:49.773

该路径是我存储在数据库中的路径，例如 resources/myimage.png 。但要让它工作，你必须将它插入到数据库 mysql as--resources 中。myimage.png 我是这样做的--->

$upload_path = '资源/'; // 文件将上传到的位置（当前为“文件”目录）。$filename = $_FILES['userfile']['name']; // 获取文件名（包括文件扩展名）。$ext = substr($filename, strpos($filename,'.'), strlen($filename)-1); // 从文件名中获取扩展名。$头像 = $upload_path 。$文件名；//这里是关键。Asighn var 和 dot= your /(forward-slash) 在它们之间。然后当你使用这样的查询插入它时进行清理并检查它 - mysql_query('update users set avatar="'.$avatar.'" where id= 就是这样。

# c# - 安装配置文件服务 - 配置文件安装失败（从 iOS 获取 UDID）

> ID：13341630
> 
> 赞同：1
> 
> 时间：2012-11-12T10:01:24.947
> 
> 标签：c#, asp.net, ios

所以我按照[本教程](http://bendytree.com/tips/Getting-an-iPhone-UDID-from-Mobile-Safari)学习如何使用 ASP.NET 和 C# 从 iOS 设备获取 UDID。我让 .mobileconfig 正常工作，它在 iPad 上加载。我现在的问题是，当我点击“安装”（见下图）时，它会给我错误“配置文件安装失败”-“无效配置文件”。

![在此处输入图像描述](../Images/034c3d28633f78731b0f8e74c040047b.png)

我可以看到 iPad 访问了我的页面并给了我 UDID，但我似乎找不到一个页面来显示 iPad 想要返回的内容。

现在我只是返回一些 xml，但这不起作用：

```
<plist version="1.0">
<key>status</key>
<string>OK</string>
</plist> 
```

[这是我正在使用的 .mobileconfig](http://pastebin.com/bGYWFemY)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:32:45.067

经过高低搜索后，我发现了 Lakitu 的这[条评论，它说要进行 301 重定向。](https://stackoverflow.com/questions/5781314/getting-a-device-udid-from-mobileconfig)

如果有人对这里感兴趣的是我用于重定向的代码：

```
 context.Response.Status = "301 Moved Permanently";
        context.Response.AddHeader("Location", "/device/enroll.aspx");
        context.Response.End(); 
```

我读到您需要重定向到一个目录，但任何文件似乎都很好。

快乐编码！

# ruby-on-rails - Heroku 上未定义的方法“to_d”

> ID：13341635
> 
> 赞同：1
> 
> 时间：2012-11-12T10:01:45.337
> 
> 标签：ruby-on-rails, heroku, currency, bigdecimal

我有一个应用程序部署到 Heroku，当我尝试`Choice`在数据库中创建一个新应用程序时，它给了我以下错误。我正在使用[虚拟属性](http://railscasts.com/episodes/16-virtual-attributes-revised)将应用程序中的钱作为整数处理。它在我自己的机器上工作得很好但是当部署到 Heroku 到`to_d`方法失败..为什么:)

```
2012-11-12 09:48:54+00:00 app web.1 - -
2012-11-12 09:48:54+00:00 heroku router - - POST www.mydomain.com/choices dyno=web.1 queue=0 wait=0ms service=68ms status=500 bytes=643
2012-11-12 09:48:54+00:00 app web.1 - -
2012-11-12 09:48:54+00:00 app web.1 - - Started POST "/choices" for 87.60.190.9/x1-6-00-16-cb-c1-a8-b7.k989.webspeed.com at 2012-11-12 09:48:54 +0000
2012-11-12 09:48:54+00:00 app web.1 - -
2012-11-12 09:48:54+00:00 app web.1 - - NoMethodError (undefined method `to_d' for 6600:Fixnum):
2012-11-12 09:48:54+00:00 app web.1 - - app/models/choice.rb:27:in `value_in_currency'
2012-11-12 09:48:54+00:00 app web.1 - - app/controllers/choices_controller.rb:9:in `create'
2012-11-12 09:48:54+00:00 app web.1 - -
2012-11-12 09:48:54+00:00 app web.1 - -
2012-11-12 09:48:54+00:00 app web.1 - - Processing by ChoicesController#create as HTML
2012-11-12 09:48:54+00:00 app web.1 - - Parameters: {"utf8"=>"✓", "authenticity_token"=>"YygjksxB+1SXnJ8j4jvTtxnh2JfJELpCeHysGrvItcU=", "choice"=>{"spotarea_id"=>"1", "product_id"=>"1", "value_in_currency"=>"66", "exposure"=>"80", "deliverydate"=>"2012-11-13"}, "commit"=>"Create Choice"}
2012-11-12 09:48:54+00:00 app web.1 - - Completed 500 Internal Server Error in 38ms 
```

我的`Choice`模型包含以下内容：

```
class Choice < ActiveRecord::Base
  belongs_to :user
  belongs_to :spotarea
  belongs_to :product
  has_many   :bets,       :dependent => :destroy

  attr_accessible     :deliverydate, :exposure, :value_in_currency, :user_id, :spotarea_id, :product_id
  attr_accessible     :deliverydate, :exposure, :value_in_currency, :user_id, :spotarea_id, :product_id, as: :admin

  # Validations
  validates   :spotarea, :product, :value_in_currency, :exposure, :presence => { :message => "is missing!" }
  validates   :value_in_currency, :exposure, :numericality => { :message => "is not numeric!" }
  validates   :value_in_currency, :format => { :with => /^\d+\.?\d{0,2}$/, :message => "is not correctly formatted!" }

  def value_in_currency
    value.to_d/100 if value?
  end

  def value_in_currency=(currency)
    self.value = currency.to_d*100 if currency.present?
  end
end 
```

编辑：

我想我找到了解决办法。我重写了代码，所以它现在包含以下内容。仍然看不到为什么`to_d`不起作用..

```
def value_in_currency
  BigDecimal(value.to_s)/100 if value?
end

def value_in_currency=(currency)
  self.value = BigDecimal(currency.to_s)*100 if currency.present?
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:22:17.410

我想我找到了解决办法。我重写了代码，所以它现在包含以下内容。仍然看不出为什么 to_d 不起作用..

```
def value_in_currency
  BigDecimal(value.to_s)/100 if value?  
end

def value_in_currency=(currency)
  self.value = BigDecimal(currency.to_s)*100 if currency.present?
end 
```

# icons - 如何更改 JavaFx 本机 Bundle exe 图标

> ID：13341638
> 
> 赞同：7
> 
> 时间：2012-11-12T10:01:46.857
> 
> 标签：icons, bundle, native, javafx-2, exe

我正在尝试使用 exe 文件的图标创建 javafx 打包的本机捆绑，但它仍然包含默认图标。请建议

```
 primaryStage.getIcons().add(FileUtility.loadImage("icon.png")); 
```

没有帮助，它只更改标题栏和任务栏图标。

![默认图标](../Images/44d4740d8ba499d2c6caa1782a1d7e6b.png)

ico 文件仍然会生成，exe 文件的图标仍然是默认的

我也尝试在项目属性->部署->图标中分配一个图标但没有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:57:41.843

我相信我遇到了同样的问题，解决方案在[以下](https://stackoverflow.com/questions/13683335/including-an-icon-into-a-self-contained-javafx-application-exe)线程中进行了描述。

作为旁注 - 在**build.xml**文件中或通过*部署*部分中的项目选项指定您的图标到目前为止都不会起作用，但它似乎在即将发布的**7u10版本中得到**[修复](https://blogs.oracle.com/talkingjavadeployment/entry/packaging_improvements_in_jdk_7)。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T14:38:05.263

我在那里添加了 src/main/deploy/package/windows/myapp.ico ，它终于起作用了:)

为你：

创建 src/main/deploy/package/windows/ 文件夹 添加名称为 ${project.build.finalName}.ico 的图标 运行 mvn jfx:build-native 我没有广泛使用它 - 只是让它工作并想要分享。所以如果你想使用不同名称的图标，我不知道怎么做。至少现在还没有。config部分中的...部分似乎是针对webstart的，所以我一直没有使用它。希望你让它工作！

已回答[如何在 Windows 上为 javafx 本机包图标设置自定义图标](https://stackoverflow.com/questions/15880102/how-to-set-custom-icon-for-javafx-native-package-icon-on-windows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T08:06:50.693

我在此处添加了响应[How to set custom icon for javafx native package icon on Windows](https://stackoverflow.com/questions/15880102/how-to-set-custom-icon-for-javafx-native-package-icon-on-windows)并认为这与您开始时遇到的问题相同。但是，您似乎已经继续前进，但其他人可能会觉得这很有趣...**

# mac-address - mac地址顺序

> ID：13341645
> 
> 赞同：0
> 
> 时间：2012-11-12T10:02:34.160
> 
> 标签：mac-address, endianness

我在 ifconfig -a - HWaddr 00:1a:92:9c:9b:bb 中找到了我的网络设备的 MAC 地址

如何在我的代码中与此地址相关联？

```
struct ethhdr {
        unsigned char   h_dest[ETH_ALEN];       /* destination eth addr */
        unsigned char   h_source[ETH_ALEN];     /* source ether addr    */
        __be16          h_proto;                /* packet type ID field */
} __attribute__((packed)); 
```

我正在努力写信给 h_dest

```
memcpy(eth->h_dest,dest_mac,ETH_ALEN); 
```

但我不知道我必须以什么字节顺序和字节顺序传递 MAC 地址值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:27:15.677

它们应该按从左到右的顺序排列，所以`h_dest[0] = 0x00`.

# objective-c - UITableViewCell 行高

> ID：13341646
> 
> 赞同：3
> 
> 时间：2012-11-12T10:02:37.097
> 
> 标签：objective-c, ios, cocoa-touch

有没有这样的方法或解决方案可以根据内容自动调整tableview的行高。我的意思是我不想指定行高，而是要根据行的内容来指定行高。如果没有这样的方法，那么告诉我当设备的方向改变时如何改变高度的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:08:09.480

您必须找到内容的高度并可以使用它

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
 {
     return "your content height + your padding height value";
 } 
```

在方向更改时，只需重新加载您的表格视图即可；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:08:07.297

看一下这个

```
// --dynamic cell height according to the text--
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

  NSString *text = <your text>;
  CGSize constraint = CGSizeMake(210, 20000.0f); 
  CGSize size = [text sizeWithFont:[UIFont fontWithName:@"Helvetica-Light" size:14] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap]; 
  // constratins the size of the table row according to the text

  CGFloat height = MAX(size.height,60);

  return height + (15);
  // return the height of the particular row in the table view
} 
```

希望这可以帮助

**编辑**方向你试过这个方法吗？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations

    return YES;
} 
```

或者，如果您的表格单元格是使用标签和图像视图等自定义的，那么您可以在每个单元格上使用 setAutoresizingMask: 来自动调整方向。

```
[yourview setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:05:16.163

您可以实施 `- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

UITableView 的委托方法。

如果你谷歌它，你应该能够找到很多关于它的教程。

这是一个例子：

[http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:28:07.030

你必须使用：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

是的 - 我知道你非常了解这种方法，我已经仔细阅读了你的问题。

1.  您必须使用该委托方法来动态控制行的高度。我的建议是检查来自 tableview 后端数据模型的每个单元格的内容，并返回一个适合该单元格的数字，例如：

`NSDictionary *thisCell = (NSDictionary *)[myArray objectAtIndexPath:indexPath.row];`

```
NSString *myCellContents = [thisCell valueForKey:@"MyStringIWantToCheckOut"];

if ([mycellContents length] > 25) {        
    return 80; 
} else {        
    return 40;
} 
```

1.  至于方向发生变化时，您必须在委托方法中执行此操作：

    `-(void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration`

然后`reloadData`开火`TableView`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-09T07:33:03.053

```
- (CGFloat)tableView:(UITableView *)aTableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    switch (indexPath.row){
        case 0:
            if(indexPath.section == 0)
                //title 
                return  75;
        default:
            return 75;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-08T09:29:31.167

**func tableView(_ heightForRowAttableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat { return UITableViewAutomaticDimension }**

for dynamic height for row otherwise you can give static height instead of "UITableViewAutomaticDimension"

# .htaccess - .htaccess 在本地工作，但在 GoDaddy 上给出 404

> ID：13341650
> 
> 赞同：0
> 
> 时间：2012-11-12T10:02:54.117
> 
> 标签：.htaccess, http-status-code-404

我的 .htaccess 文件中有这段代码：

```
Options +FollowSymLinks -MultiViews -Indexes
RewriteEngine On

RewriteRule ^(design|JS|css|images|remoteLibraries|remoteLibraries/xAJAX/xajax_js/)($|/) - [L]
RewriteRule ^([a-zA-Z_]+)$ index.php?action=$1
RewriteRule ^([a-zA-Z_]+)/([a-z_A-Z]+)$ index.php?action=$1&tip=$2 
```

它在我的本地 Apache 服务器上运行良好，但是在将其上传到 GoDaddy 时，我得到的只是 404 Not found 错误...

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:00:56.540

1）我建议你设置一个RewriteBase，通常只是

```
RewriteBase / 
```

这有助于标准化重写生效的位置，因为本地服务器和远程服务器之间的目录结构可能不同。

2）我还建议，每当出现意外的重写行为时，设置

```
ErrorDocument 404 default 
```

这样 Go Daddy 404 页面也不会被重定向。

# html - seo标签中的标签

> ID：13341654
> 
> 赞同：1
> 
> 时间：2012-11-12T10:03:09.623
> 
> 标签：html, seo

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:27:28.360

这是一个糟糕的句号——嵌套`<a>`元素在 HTML中是[非法的。](http://www.w3.org/TR/html401/struct/links.html#h-12.2.2)

像这样的东西会满足您的需求吗？

```
<a href="test.html">
    <span class="class1">Image</span>
    <span class="class2">Title</span>
    <span class="class3">Download</span>
</a> 
```

# javascript - node.js 中如何使用客户端库？

> ID：13341656
> 
> 赞同：2
> 
> 时间：2012-11-12T10:03:16.563
> 
> 标签：javascript, jquery, node.js, d3.js

我是 node.js 的新手，刚刚发现了 npm，这是一个非常方便的工具。但是，我注意到我之前在客户端 JavaScript 编程中使用过的很多库，例如 jquery 和 d3，都可以使用 npm 安装。将这些库安装为节点模块对我来说似乎很奇怪，因为我不明白如何在节点中使用像 d3 这样对数据可视化有用的东西。仅仅是因为 npm 是一种下载 JavaScript 代码的便捷方式，即使这些库不与 node 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:05:44.943

[还记得不应该使用 regex 解析 html](https://stackoverflow.com/a/1732454/995876)吗？是的，您应该将 html 解析为 dom 并对其进行操作。jQuery 和 d3 使这在服务器端更容易。

即使是 PHP也有一个[jQuery 端口](http://code.google.com/p/phpquery/)

# c++ - C ++中的类（cpp文件和h文件）

> ID：13341659
> 
> 赞同：1
> 
> 时间：2012-11-12T10:03:22.143
> 
> 标签：c++, class

创建和定义类之后（在“h 文件”中）。除了“h文件”（属于该类）之外，我如何决定创建（或不创建）“cpp文件”（仅适用于该类）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:17:37.070

这里有一个小例子可以帮助你。

* * *

这是 Foo 的头文件。让我们称之为“foo.h”

```
#pragma once
#ifndef FOO_H
#define FOO_H

class Foo{
public:
    void function();
protected:
private:
};
#endif 
```

* * *

这是 Foo 的源文件。让我们称之为“foo.cpp”

```
#include "foo.h"
void Foo::function(){
    // ... implement ...
    return;
} 
```

* * *

将它们编译在一起，我们可以创建一个目标文件。我们将其称为“foo.o”。只要链接“foo.o”，您就可以在程序中使用您的类。
例子：

```
#include "foo.h"
int main(){

    Foo foo;
    foo.function();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:22:12.457

h 文件是一个描述符文件，它描述了您的函数/类的签名，以便其他 cpp 文件中的其他类可以使用它。

您需要将 h 文件视为合同。您正在声明一项义务。

稍后，当您决定实施 cpp 时，您正在履行义务。

其他类/cpp 文件可以仅依赖于您的义务，假设您还将在 cpp 中实现该义务。

例如：

1.  您创建一个 .h 文件“myClassA.h”并使用名为 myClassA.SayHello() 的成员方法声明一个名为 myClassA 的类
2.  您将 myClassA.h 包含在您创建 myClassB.cpp 的另一个类中，这样 myClassB 就知道 myClassA 有一个名为 SayHello() 的方法，并且它可以调用它。
3.  如果你不包含 myClassA.h 并且你尝试在 myClassB.cpp 中调用 myClassA.SayHello()，你会从你的编译器中得到一个错误，因为 myClassB 不“知道”myClassA。
4.  如果您确实包含了 h 文件，但没有费心在 myClassA.cpp 中实际创建和实现 myClassA，您将收到编译错误，因为没有找到实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:14:37.603

最佳做法是将头文件和实现文件分开，以便在头文件 .h 中定义类并在 .cpp 文件中实现它，这将帮助您跟踪和调试错误并显示干净的代码，

只需在模板类中注意它必须在单独的头文件中定义，以通过将模板与普通类分开来保持代码结构良好和干净

# mysql - 行之间的差异 Mysql Query

> ID：13341661
> 
> 赞同：2
> 
> 时间：2012-11-12T10:03:25.513
> 
> 标签：mysql, sql

我有一张有四个字段的表：

```
trip_paramid, creation_time, fuel_content,vehicle_id 
```

我想找出两行之间的差异。在我的表中，我有一个字段fuel_content。每两分钟我获取数据包并插入数据库。由此我想找出总加油量。如果两个数据包之间的燃料含量大于2，我将其视为加油量。同一天可能发生多次加油。所以我想找出车辆一天的总加油量。我在sqlfiddle中创建了一个表模式和示例数据。谁能帮我找到解决方案。这里是表模式的链接.. [http://www.sqlfiddle.com/#!2/4cf36](http://www.sqlfiddle.com/#!2/4cf36)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:26:35.040

这是一个很好的查询。

查询中注入参数(vehicle_id=13)和(date='2012-11-08')，但它们是需要修改的参数。

您可以注意到我是否使用`creation_time<..`and `creation_time>..`in 而不是选择了一个表达式`DATE(creation_time)='...'`，这是因为第一个表达式可以使用“creation_time”上的索引，而第二个则不能。

```
SELECT
SUM(fuel_content-prev_content) AS refuel_tot
, COUNT(*) AS refuel_nbr
FROM (
  SELECT
  p.trip_paramid
  , fuel_content
  , creation_time
  , (
    SELECT ps.fuel_content
    FROM trip_parameters AS ps
    WHERE (ps.vehicle_id=p.vehicle_id)
    AND (ps.trip_paramid<p.trip_paramid)
         ORDER BY trip_paramid DESC
         LIMIT 1
    ) AS prev_content
  FROM trip_parameters AS p
  WHERE (p.vehicle_id=13)
  AND (creation_time>='2012-11-08')
  AND (creation_time<DATE_ADD('2012-11-08', INTERVAL 1 DAY))
  ORDER BY p.trip_paramid
) AS log
WHERE (fuel_content-prev_content)>2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:51:02.753

测试它：

```
select sum(t2.fuel_content-t1.fuel_content) TotalFuel,t1.vehicle_id,t1.trip_paramid as rowIdA,
t2.trip_paramid as rowIdB,
t1.creation_time as timeA,
t2.creation_time as timeB, 
t2.fuel_content fuel2,
t1.fuel_content fuel1,
(t2.fuel_content-t1.fuel_content)  diffFuel
from trip_parameters  t1, trip_parameters  t2
where t1.trip_paramid<t2.trip_paramid 
and t1.vehicle_id=t2.vehicle_id 
and t1.vehicle_id=13
and t2.fuel_content-t1.fuel_content>2 
order by rowIdA,rowIdB 
```

其中 (rowIdA,rowIdB) 是所有可能的元组，没有重复，diffFuel 是燃料量之间的差，TotalFuel 是所有燃料量的总和。

该查询比较同一车辆的所有燃料含量差异（在此示例中，对于 id=13 的车辆），并且仅当差异燃料大于 2 时对燃料量求和。

问候。

# android - 在 4.1.2 中调用 market:// 链接

> ID：13341667
> 
> 赞同：0
> 
> 时间：2012-11-12T10:03:56.703
> 
> 标签：android, webview, android-webview, android-4.2-jelly-bean

我们在 android 应用程序中嵌入了一个 WebView Widget 以显示一些到其他应用程序的链接，使用[market:// 样式链接](http://developer.android.com/distribute/googleplay/promote/linking.html#OpeningDetails)

它工作正常，直到带有 android 4.1.2 的 nexus 7，chrome 浏览器显示页面显示`market://`链接无法打开。

我们能做些什么？如何解决？TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:14:41.943

[使用Intent](http://developer.android.com/reference/android/content/Intent.html)注册您的“market://”方案

# html - 在网络上使用 ios 5 定位用户

> ID：13341672
> 
> 赞同：0
> 
> 时间：2012-11-12T10:04:13.657
> 
> 标签：html, ios, ios5, responsive-design, media-queries

我正在编写一个网络应用程序，该应用程序使用用户可以从他们的手机/计算机上传的图片，我发现 ios 5 不允许您上传任何内容（请参阅[A html5 web app for mobile safari to upload images from the照片.app？](https://stackoverflow.com/questions/3891831/a-html5-web-app-for-mobile-safari-to-upload-images-from-the-photos-app)）。

由于这似乎几乎不可能，我想向那些想要使用我的应用程序的用户显示一条消息，要求他们升级或将他们指向上面链接（piccup 等）中描述的替代解决方案。

我可以通过媒体查询或类似的方式将此消息仅发送给 ios 5 用户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:03:14.887

您是在寻找服务器端解决方案（例如 PHP）还是客户端（JavaScript）？：

这是一个 JavaScript 解决方案：

```
<script type="text/javascript">
    if (navigator.userAgent.match(/OS 5(_\d)+ like Mac OS X/i))
        // this helps detect minor versions such as 5_0_1
        document.write("You have iOS 5! Aren't you special!");
</script> 
```

来源：[https ://stackoverflow.com/a/13087526/1800369](https://stackoverflow.com/a/13087526/1800369)

对于 PHP，您可以跟踪： [Detect iOS version with PHP](https://stackoverflow.com/questions/7768324/detect-ios-version-with-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:05:58.123

当您提到媒体查询时，我猜您想在 CSS 中执行此操作。也许检测 1136px 的屏幕宽度（根据方向）会为您解决问题？

[更多在这里](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T23:38:27.617

您应该使用 jQuery 检查文件输入支持。请检查有关如何执行此操作的[此问题的答案。](https://stackoverflow.com/a/4128395/1231961)请注意，作者指出，即使某些 Android 设备不支持输入元素，此代码段也会返回 true，但由于您专门询问了 iPhone，我认为它应该可以完成这项工作。

# c# - EF中这两个异步调用有什么区别？

> ID：13341673
> 
> 赞同：5
> 
> 时间：2012-11-12T10:04:14.347
> 
> 标签：c#, entity-framework, asynchronous, async-await

我在 EF6 中看到了一个新功能，即异步方法。我找到一个例子。

第一种方式是正常调用，例如 EF5：

```
public Store FindClosestStore(DbGeography location)
{
    using (var context = new StoreContext())
    {
        return (from s in context.Stores
           orderby s.Location.Distance(location)
           select s).First();
    }
} 
```

以及新的调用，在 EF6 中使用异步方法。

```
public async Task<Store> FindClosestStore(DbGeography location)
{
    using (var context = new StoreContext())
    {
        return await (from s in context.Stores
            orderby s.Location.Distance(location)
            select s).FirstAsync();
    }
} 
```

但是，我可以执行以下操作（语法是近似的，我是靠记忆来做的）：

```
public async Task<Store> MyAsyncMethod(DbGeography location)
{
     return await Task.Run(() => FindClosestStore());
} 
```

我的意思是，我可以使用 Task.Run 来调用第一个方法，即非异步，以等待结果。目前，是我用来调用异步任何方法的方式，而不仅仅是 EF。这也是异步调用还是真正的异步调用是在我使用 EF6 异步方法时？

为什么在新版本的 EF6 中需要异步方法？只是为了简单？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T10:39:42.973

这里的区别在于代码如何等待。

在这段代码中：

```
public async Task<Store> FindClosestStore(DbGeography location)
{
    using (var context = new StoreContext())
    {
        return await (from s in context.Stores
            orderby s.Location.Distance(location)
            select s).FirstAsync();
    }
} 
```

EF 将对数据库发出查询，然后返回。

一旦结果返回，任务将完成，等待块将继续执行。

也就是说，.NET 本身中没有等待响应的线程。（希望）有一个来自 db 驱动程序的较低级别的回调，它在结果到达时通知 .NET。

（这至少是其他异步 IO 在 .NET 中的工作方式，我假设 ADO.NET 异步也是如此）

在另一种情况下：

```
public async Task<Store> MyAsyncMethod(DbGeography location)
{
     return await Task.Run(()=> FindClosestStore());
} 
```

将有一个线程等待数据库的响应。也就是说，您将有阻塞 IO，但它将通过您的 task.run 技巧对消费者隐藏。

这两种情况对消费者的行为都是相同的，不同之处在于您在上一个示例中占用了资源。

# c++ - 检查是否存在重载成员函数的模板

> ID：13341676
> 
> 赞同：5
> 
> 时间：2012-11-12T10:04:22.330
> 
> 标签：c++, templates, metaprogramming

如果一个类有一个像这样的特殊成员函数，我会尝试专门化一个模板（在另一个例子中找到）：

```
template <typename T>
class has_begin
{
    typedef char one;
    typedef long two;

    template <typename C> static one test( decltype( &C::AnyFunc) ) ;
    template <typename C> static two test(...);

public:
    enum { value = sizeof(test<T>(0)) == sizeof(char) };
    enum { Yes = sizeof(has_begin<T>::test<T>(0)) == 1 };
    enum { No = !Yes };
}; 
```

这`AnyFunc`在重载之前运行良好：

```
class B : public vector<int>
{
public:
    void AnyFunc() const;
    void AnyFunc();
}; 
```

如何重写我的测试代码以从我的模板中获得“是”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:10:37.697

使用不带参数的重载函数名 (13.4p1) 必须解析为单个重载 (13.4p4)，否则会发生替换失败。

如果您正在测试成员函数的存在，那么您应该知道您计划调用它的参数：

```
 template <typename C> static one test(
        typename std::add_pointer<decltype(std::declval<C>().AnyFunc())>::type); 
```

通常，您可以使用可变参数模板和类似于以下的模式`result_of`：

```
 template <typename C, typename... Args> static one test(
        typename std::add_pointer<decltype(
            std::declval<C>(std::declval<Args>()...).AnyFunc())>::type); 
```

Using`add_pointer`允许它处理不允许作为函数参数类型的函数返回类型（例如`void`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:37:21.370

找到有效的版本：

```
 template <typename C> static one test( decltype(((C*)0)->AnyFunc())* ) ; 
```

如果要验证对象是否具有 const 函数，请使用以下命令：

```
 template <typename C> static one test( decltype(((const C*)0)->AnyFunc())* ) ; 
```

此版本不会检测带参数的函数：

```
class B : public std::vector<int>
{
public:
    //void AnyFunc() const;
    //void AnyFunc();
    int AnyFunc(int);
}; 
```

# android - 程序停止了。为什么？

> ID：13341678
> 
> 赞同：-2
> 
> 时间：2012-11-12T10:04:28.527
> 
> 标签：android, runtime-error

我编写了有两个类的程序，但是当我点击地图按钮时，程序已经停止。当我删除构造函数时，程序正确运行！我编写了主程序的一部分。

位置.java：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.location);

    initButtons();

    //Not complete this method
    text_location.setOnKeyListener(new OnKeyListener(){
        public boolean onKey(View view, int keyCode,KeyEvent event){
            if(keyCode==KeyEvent.KEYCODE_ENTER){
                Geocoder geo=new  Geocoder(getApplicationContext(),Locale.getDefault());

                List<Address> address;
                try {
                    address = geo.getFromLocationName(text_location.getText().toString(),3);
                    if(address.size()>0){
                        searchLocation=new GeoPoint((int)(address.get(0).getLatitude()*1e6),(int)(address.get(0).getLongitude()*1e6));

                        controller.animateTo(searchLocation);
                        controller.setZoom(12);

                        mapOverlays=map.getOverlays();
                        drawable=getResources().getDrawable(R.drawable.marker);
                        itemizedOverlay=new SimpleItemizedOverlay(drawable,map);
                            textLocation=text_location.getText().toString();
                        //

                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                return true;
            }
            return false;
        }
    });
}
private void initButtons(){
    listButton=(Button)findViewById(R.id.button_list);
    listButton.setOnClickListener(onClickListener);
}
private OnClickListener onClickListener=new OnClickListener(){

    public void onClick(View v){
    case R.id.button_list:
        ListLocation listLocation=new ListLocation(textLocation);
        Intent k=new Intent(Location.this,ListLocation.class);
        startActivity(k);
        break;

    }
 }
}; 
```

ListLocation.java

```
public class ListLocation extends Activity{
TextView text_location;
String textLocation="NOTHING";

public ListLocation(String text){
    textLocation=text;
} 
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_location);

    text_location=(TextView)findViewById(R.id.list_location);
    text_location.setText(textLocation);

}
} 
```

日志猫：

```
11-12 13:22:41.959: W/dalvikvm(26132): threadid=1: thread exiting with uncaught exception (group=0x40a891f8)
11-12 13:22:41.966: E/AndroidRuntime(26132): FATAL EXCEPTION: main
11-12 13:22:41.966: E/AndroidRuntime(26132): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.example.loyaltier/org.example.loyaltier.ListLocation}: java.lang.InstantiationException: can't instantiate class org.example.loyaltier.ListLocation; no empty constructor
11-12 13:22:41.966: E/AndroidRuntime(26132):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1879)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at android.app.ActivityThread.access$600(ActivityThread.java:122)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at android.os.Looper.loop(Looper.java:137)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at android.app.ActivityThread.main(ActivityThread.java:4340)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at java.lang.reflect.Method.invokeNative(Native Method)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at java.lang.reflect.Method.invoke(Method.java:511)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at dalvik.system.NativeStart.main(Native Method)
11-12 13:22:41.966: E/AndroidRuntime(26132): Caused by: java.lang.InstantiationException: can't instantiate class org.example.loyaltier.ListLocation; no empty constructor
11-12 13:22:41.966: E/AndroidRuntime(26132):    at java.lang.Class.newInstanceImpl(Native Method)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at java.lang.Class.newInstance(Class.java:1319)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-12 13:22:41.966: E/AndroidRuntime(26132):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
11-12 13:22:41.966: E/AndroidRuntime(26132):    ... 11 more
11-12 13:22:43.591: D/dalvikvm(26132): GC_CONCURRENT freed 265K, 3% free 15269K/15623K, paused 7ms+2ms
11-12 13:22:43.607: I/Process(26132): Sending signal. PID: 26132 SIG: 9 
```

谢谢。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:07:50.060

您不能以这种方式将值传递给活动，它们应该有空的构造函数..为了实现您的目标，请使用意图..

```
Intent k=new Intent(Location.this,ListLocation.class);
k.putExtra("Location", textLocation);
startActivity(k); 
```

ListLocation.java

```
public class ListLocation extends Activity{
TextView text_location;
String textLocation="NOTHING";

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_location);

    text_location=(TextView)findViewById(R.id.list_location);
    text_location.setText(getIntent().getStringExtra("Location"));
}
} 
```

# svg - SVG 使用元素来克隆 SVG

> ID：13341679
> 
> 赞同：5
> 
> 时间：2012-11-12T10:04:30.800
> 
> 标签：svg, d3.js

是否可以在单独的 svg 中“使用”整个其他 svg？我想使用 d3 生成的地图作为同一页面上的图标。这是我尝试过的，但它不起作用。

```
 <svg id="map">
    svg stuff here
 </svg>

 <svg id="bar"> 
     svg stuff here
     <use xlink:href="#map" height="20" width="30" ...>
 </svg> 
```

还尝试了克隆方法，但最终在另一个 svg 中有一个完整的 svg 并且无法使其扩展。例如。makeicon("#map", "#icon")

```
function makeicon(source, destination) {
    //https://groups.google.com/forum/?fromgroups=#!topic/d3-js/-EEgqt29wmQ
    var src = d3.select(source);
    var dest = d3.select(destination);

    if (!src.empty() && !dest.empty()) {

        var newNode = d3.select(dest.node().insertBefore(src.node().cloneNode(true),
            src.node().nextSibling))
            .attr("id", "newnode")
            .attr("width", null)  // remove height and width of original svg
            .attr("height", null)

            .attr("viewBox", "0 0 20 30");   // try to make it smaller

        return newNode; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:35:22.000

它应该可以正常工作。

这是一个在 Firefox、Opera 和 Chrome 中运行良好的简单示例：http: [//jsfiddle.net/gew54/](http://jsfiddle.net/gew54/)

资源：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <style type='text/css'>
            svg {
                width: 100px;
                height: 100px;
            }
        </style>
    </head>
    <body>
        <svg id="map" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="20" fill="lime"/>
        </svg>
        <svg id="bar" viewBox="0 0 100 100">
            <use xlink:href="#map" />
        </svg>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:39:00.477

You can use [svgWeb](http://code.google.com/p/svgweb/) to make it work in webkit browsers.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:35:44.213

考虑到目前支持非常有限（仅限*Gecko 引擎*），这可以使用 CSS 3[`element()`](https://developer.mozilla.org/en-US/docs/CSS/element)函数来完成。

MDN 文档还将您的案例指定为常见用例：

> ...使用它的一个特别有用的场景是在 HTML <canvas> 元素中呈现图像，然后将其用作背景。

* * *

### [现场演示](http://jsfiddle.net/7XG65/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-03T20:43:32.977

从 SVG 2 开始，[ xlink:href ] 属性被弃用，取而代之的是 [ href ]。

```
<use xlink:href="#myId" /> 
```

> 已弃用：不再推荐使用此功能。尽管某些浏览器可能仍然支持它，但它可能已经从相关的 Web 标准中删除，可能正在被删除，或者可能仅出于兼容性目的而保留。避免使用它，并尽可能更新现有代码；请参阅本页底部的兼容性表以指导您的决定。请注意，此功能可能随时停止工作。[信息...](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use)

```
<use href="#myId" /> 
```

```
<svg viewBox="0 0 30 10" width="300" height="100" xmlns="http://www.w3.org/2000/svg">
  <circle id="myCircle" cx="5" cy="5" r="4" stroke="blue"/>
  <use href="#myCircle" x="10" fill="blue"/>
  <use href="#myCircle" x="20" fill="white" stroke="red"/>
  <!--
stroke="red" will be ignored here, as stroke was already set on myCircle.
Most attributes (except for x, y, width, height and (xlink:)href)
do not override those set in the ancestor.
That's why the circles have different x positions, but the same stroke value.
  -->
</svg>
```

[演示-codepen.io](https://codepen.io/pedro404/pen/JjJRjPm)

# html - 定位图像，使其始终显示在 div 的底部

> ID：13341684
> 
> 赞同：0
> 
> 时间：2012-11-12T10:05:20.750
> 
> 标签：html, css

以下页面上的年轻女士的形象：http: [//secretgenius.co.uk/document/document_index.html](http://secretgenius.co.uk/document/document_index.html)

如果右侧的内容较长，则需要移动到页面底部。您可以在上面的 URL 中看到她漂浮在页脚行上方，但我希望她始终出现在页脚行上，无论右侧有多少内容。我正在为这个站点使用 960.gs 网格。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:13:35.910

`position:relative`在图像父容器和`position:absolute; bottom:0; left:0`图像上使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:09:19.057

`vertical-align: bottom`在`img`标签上添加

截屏：

![在此处输入图像描述](../Images/a2ccb96c9b2c246bd4467c6aa5bb5885.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:20:20.467

```
#mainFooter{ background: url(../images/footerbg.png) repeat-x left bottom; bottom:0px; width: 100%; position:fixed; }
#footer { position: relative; margin: 0 auto; padding:10px 0; } 
```

尝试这些设置以及是否有任何先前的 CSS 设置。mainFooter：用于img & footer：用于img下面的文字

# memory-management - 内存管理常用模式

> ID：13341689
> 
> 赞同：6
> 
> 时间：2012-11-12T10:05:45.103
> 
> 标签：memory-management, design-patterns, allocator

我正在编写一个内存分配器，我想针对程序中最常见的模式（对 malloc 和 free 的调用）对其进行测试。

是否曾经识别出内存管理中的常见模式？如果是这样，是否有任何关于此的好书或互联网资源？

我既对单线程程序的模式感兴趣，也对多线程程序的模式感兴趣。

**附加**：

我目前认为一些典型的数学模型可以描述这种模式。

sin/cos 函数可以描述生产者（malloc）/消费者（免费）算法，其中生产者必须完成所有产品的生产，然后消费者才能出售这些产品。

斐波那契数列可以描述一个程序，其中 malloc(ed) 区域的数量自然增长（例如在建模一些现实世界的问题时）。

如果您有任何其他想法，将不胜感激。但同样，最好有一本关于它的书/论文/博士论文。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:13:11.840

我非常喜欢“囤积”。看看这里： http: [//people.cs.umass.edu/~emery/hoard/asplos2000.pdf](http://people.cs.umass.edu/~emery/hoard/asplos2000.pdf)

及其网站： http: [//www.hoard.org/](http://www.hoard.org/)

但老实说，这样做只是为了研究/自学。你可以很容易地把事情搞砸（或者比以前更糟;-)）

# ubuntu - 用于 ubuntu 的新软件的 deb 包

> ID：13341692
> 
> 赞同：0
> 
> 时间：2012-11-12T10:05:53.963
> 
> 标签：ubuntu, package, deb

我想为 ubuntu 和 debian 构建 mysoftware.deb 包。

每个关于构建**deb**文件的教程都不是为了维护您自己的软件，而只是为了为准备好的源代码制作 deb 文件。就我而言，我希望在一个 Makefile 中构建和安装软件以及构建 deb 包。所以我可以：

```
make
make install
make deb 
```

如何编写那个makefile？我假设我已经准备好 debian/* 文件并在我的版本控制系统下。

对我来说非常神秘的是创建 mysoftware.orig.tar.gz 并将其解压缩，以便我可以在该文件夹中调用 debuild。！？！？......

有人有一些简短而准确的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:46:28.713

如果您已经有一个`debian/rules`文件并且只想创建一个简单的目标来从您的 main 创建您的 Debian 软件包`Makefile`，您可以执行以下操作：

```
.PHONY: deb
deb:
        # maybe invoke dch here to add a new entry to debian/Changelog ...
        debuild -us -uc -rfakeroot -b 
```

只要确保这不是您的默认目标（假设您像通常那样`debian/rules`调用 main `Makefile`）。

* * *

有了`dh-make`你可以创建一个简单的“本机”包，这意味着没有上游。

```
debian$ dh_make --native --other-options ... 
```

我同意上游的假设有点分散注意力。另一方面，制作原生包非常简单，几乎不需要太多教程。

# java - JSF 视图范围不关闭

> ID：13341693
> 
> 赞同：0
> 
> 时间：2012-11-12T10:05:55.617
> 
> 标签：java, jsf, jsf-2

第一的：

我有两个托管 Bean。

豆A：

*   @ViewScope
*   包含一个延迟加载数据表，具体取决于某个会话值，在 @PostConstruct 中初始化

豆B：

*   @ViewScope
*   更改 Bean A 中使用的会话值

我做以下；

*   使用 Bean B 设置与 JSF 站点的会话数据
*   加载使用 Bean A 的 jsf 站点
*   使用 Bean B 设置其他会话数据
*   再次加载使用 Bean A 的 jsf

问题如下：

如果我再次使用 Bean A 加载 JSF 站点，则不会再次加载正在初始化数据表的 PostConstruct。

我认为如果我使用视图范围，如果我浏览不同的 JSF 站点，ManagedBean 将被销毁。

请帮助我理解这个问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:31:47.567

应该是的。只要您保持在同一个视图上，视图范围就应该保持不变。

然而，在过去的 JSF 版本中，这个范围存在很多问题，包括与 PostConstruct 相关的问题；你现在用的是哪个版本？应该在应用程序启动期间的日志中提到这一点。

# python - 在 ConfigParser 中，为什么以 `REM ` 开头的行会被忽略？

> ID：13341697
> 
> 赞同：1
> 
> 时间：2012-11-12T10:06:18.630
> 
> 标签：python, config

代码是这样的：

```
 if line.split(None, 1)[0].lower() == 'rem' and line[0] in "rR":
            # no leading whitespace
            continue 
```

我认为这意味着如果我编写这样的配置：

```
[memo]
rem ember_last = True 
```

以开头的`rem ember_last`行将被忽略。为什么 ConfigParser 是这样设计的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:18:52.837

它有点受编程语言 BASIC 的影响。`REM`表示备注并介绍评论。也`comment`应被视为评论。其他注释语句是`#`和`;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:14:59.887

[`rem`](http://technet.microsoft.com/en-us/library/bb490986.aspx)in Batch 用于添加注释，即它是一个基本上什么都不做的命令。似乎这个决定被转移到配置文件中：

> 使您能够在批处理文件或配置文件中包含注释（备注）。

但是，`rem`实际的注释总是用空格分隔，因此`remember`忽略配置选项（只会`rem ember`）是没有意义的。您发布的代码证实了这一点，如下所示：

```
>>> line = 'remember_last = True'
>>> line.split(None, 1)[0].lower()
'remember_last' 
```

所以，你的问题似乎是别的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:15:31.763

小实验：

```
In [190]: line = 'remember_last = True'

In [191]: line.split(None, 1)[0].lower() == 'rem' and line[0] in "rR"
Out[191]: False 
```

表明你的担忧是没有根据的。您是否需要解释 - 或者您可以自己弄清楚？

PS布尔表达式的第二部分绝对是多余的

# javascript - 函数表达式前面的 JavaScript 加号

> ID：13341698
> 
> 赞同：896
> 
> 时间：2012-11-12T10:06:23.017
> 
> 标签：javascript, function, operators, iife, self-invoking-function

我一直在寻找有关立即调用函数的信息，在某个地方我偶然发现了这个符号：

```
+function(){console.log("Something.")}() 
```

有人可以向我解释`+`函数前面的标志是什么意思/作用吗？

* * *

## 回答 #1

> 赞同：1346
> 
> 时间：2012-11-12T10:07:25.483

它强制解析器将后面的部分`+`视为表达式。这通常用于立即调用的函数，例如：

```
+function() { console.log("Foo!"); }(); 
```

如果没有`+`那里，如果解析器处于期望语句（可以是表达式或几个非表达式语句）的状态，则该单词`function`看起来像函数*声明*的开头而不是函数*表达式*，因此`()`紧随其后（上面行末尾的那些）将是一个语法错误（在那个例子中，没有名称也是如此）。*使用*，`+`它使它成为一个函数表达式，这意味着名称是可选的，并导致对该函数的引用，该函数可以被调用，因此括号是有效的。

`+`只是其中一种选择。它也可以是`-`, `!`,`~`或几乎任何其他一元运算符。或者，您可以使用括号（这更常见，但在语法上既不正确也不正确）：

```
(function() { console.log("Foo!"); })();
// or
(function() { console.log("Foo!"); }()); 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2012-11-12T10:54:10.957

@TJCrowder 的答案的补充，`+`通常用于强制对值进行数字转换，[正如这个 SO 答案所解释](https://stackoverflow.com/questions/5450076/whats-the-significant-use-of-unary-plus-and-minus-operators)的那样。在这种情况下，它被称为“一元加运算符”（为了便于搜索）。

```
var num = +variant; 
```

因此，在函数前面，它可以是一种强制将函数的结果解释为数字的方法。我怀疑它是否会发生，但理论上 JIT 可以使用它来将函数编译为仅限数字的函数等。但是，为了防止在更大的表达式中使用一元加号作为连接，您需要括号：

```
blah + (+(function(){ var scope; return "4"; })()); 
```

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2012-11-16T16:45:29.140

所以简短的回答是，它通过以一种或另一种方式使用函数结果来防止语法错误。

您还可以使用运算符指示引擎您甚至对返回值不感兴趣`void`：

```
void function() { console.log("Foo!"); }(); 
```

当然，在整个东西周围放置大括号也可以达到这个目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-05T15:11:09.657

# 解决方案和起源

函数前面的`+`符号，实际上称为[一元加号](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Unary_plus)，是一[元运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators#unary_operators)和（一元加号）组的一部分，用于将字符串和其他表示形式转换为数字（整数或浮点数）。

> 一元运算是只有一个操作数的运算，即单个输入。这与使用两个操作数的二元运算相反

## 基本用途：

```
const x = "1";
const y = "-1";
const n = "7.77";

console.log(+x);
// expected output: 1

console.log(+n);
// expected output: 7.77

console.log(+y);
// expected output: -1

console.log(+'');
// expected output: 0

console.log(+true);
// expected output: 1

console.log(+false);
// expected output: 0

console.log(+'hello');
// expected output: NaN 
```

当`+`符号位于变量、函数或任何返回的字符串表示之前，输出将被转换为整数或浮点数；一元运算符 ( `+`) 也转换非字符串值`true`,`false`和`null`.

## 高级用途

使用您上面提到的功能的正确方法是：

```
+function(){return "3.141"}()
// expected output: 3.141 
```

我喜欢用来`+`将`new Date()`对象转换为**时间戳**，如下所示：

```
+new Date()
// expected output: 1641387991035 
```

## 其他一元运算符

> `-`一元否定运算符将其操作数转换为数字类型，然后将其取反。
> 
> `~`按位 NOT 运算符。
> 
> `!`逻辑非运算符。
> 
> `delete`delete 操作符从对象中删除一个属性。
> 
> `void`void 运算符丢弃表达式的返回值。
> 
> `typeof`typeof 运算符确定给定对象的类型。

# unix - 如何在 Unix 上关闭 tar 命令的输出？

> ID：13341702
> 
> 赞同：180
> 
> 时间：2012-11-12T10:06:42.403
> 
> 标签：unix

我查看了选项，但似乎没有什么明显的方式可以在解压缩文件时关闭输出。以下是我目前正在使用的代码......我只需要关闭输出的选项。

```
tar -zxvf tmp.tar.gz -C ~/tmp1 
```

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-11-12T10:10:49.690

只需放弃该选项`v`。

`-v`是冗长的。如果您不使用它，则它不会显示：

```
tar -zxf tmp.tar.gz -C ~/tmp1 
```

# algorithm - 有什么有效的方法可以找到这样的颜色吗？

> ID：13341708
> 
> 赞同：2
> 
> 时间：2012-11-12T10:07:19.497
> 
> 标签：algorithm, math

在我们的项目中，我们将尝试为不同的图形使用不同的颜色。这些颜色应满足以下条件：

1.  所有颜色应满足：abs(AR - AG) + abs(AG - AB) + abs(AB - AR) > 250
2.  所有颜色都应该足够不同。如果颜色 A 和 B 相遇：abs(AR - BR) + abs(AG - BG) + abs(AB - BB) >= 50，那么它们就足够不同了。问题是我们最多可以获得多少种颜色？有没有什么快速的方法可以在不枚举所有组合的情况下获得颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:15:27.920

这取决于您需要颜色的位置（网站、图片等）。我曾经遇到过一个非常相似的问题，下面是我发现的。最后，我只使用了 HSV 颜色空间（这在我的应用程序中很简单），它允许您将色调范围划分为大小相等的间隔并每次获得不同的颜色。

这是我发现有用的：

[在图形中生成明显不同的 RGB 颜色](https://stackoverflow.com/questions/309149/generate-distinctly-different-rgb-colors-in-graphs)

[如何自动生成 N 个“不同”颜色？](https://stackoverflow.com/questions/470690/how-to-automatically-generate-n-distinct-colors)

[生成独特的颜色](https://stackoverflow.com/questions/773226/generate-unique-colours)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T12:02:49.393

我认为获得准确结果的最简单方法是通过拉斯维加斯算法，在该算法中，您尝试通过逐步添加不会使当前集无效的随机颜色来组合尽可能大的颜色集。如果没有这样的颜色可用（例如，因为最后 100 次尝试找到这样的颜色失败），则当前集形成结果。

请注意，当它卡住时，它不会尝试“撤消”可能的错误添加，它只是终止，这使得算法报告许多次优集，但速度非常快。因此，您将需要多次（数千次？）运行此算法，以查看您可以组合多大的集合。

我认为这是以相对较少的编程或分析工作获得体面结果的更快方法之一。

**编辑**：做了几次快速运行：我发现的由非冲突颜色组成的最大设置大小是**273**。

**编辑 2**根据要求，相应的（相关）源代码：

```
public class Colour
{
    public int Red;
    public int Green;
    public int Blue;

    public int Primality
    {
        get { return Math.Abs(Red - Green) + Math.Abs(Green - Blue) + Math.Abs(Blue - Red); }
    }

    public int Difference(Colour other)
    {
        return Math.Abs(this.Red - other.Red) + Math.Abs(this.Green - other.Green) + Math.Abs(this.Blue - other.Blue);
    }

    public Colour(int red, int green, int blue)
    {
        Red = red;
        Green = green;
        Blue = blue;
    }

    public static Colour Generate(Random rnd)
    {
        return new Colour(rnd.Next(256), rnd.Next(256), rnd.Next(256));
    }

    public static Colour GeneratePrimal(Random rnd)
    {
        Colour candidate = null;
        do
        {
            candidate = Generate(rnd);
        } while (candidate.Primality <= 250);

        return candidate;
    }
} 
```

使用此类，所描述的算法的单次运行将如下所示：

```
private Random _rnd = new Random();

public List<Colour> Run()
{
    List<Colour> resultSet = new List<Colour>();

    //Shouldn't find a set larger than 1000 Colours.
    for (int colourCount = 0; colourCount < 1000; colourCount++)
    {
        Colour candidate = null;
        bool found = false;

        //100000 means: Try *very* hard to find a next candidate
        for (int index = 0; index < 100000; index++)
        {
            candidate = Colour.GeneratePrimal(_rnd);
            if (resultSet.Any(col => candidate.Difference(col) < 50) == false)
            {
                resultSet.Add(candidate);
                found = true;
                break;
            }
        }

        if (found == false)
            return resultSet;
    }

    return resultSet;
} 
```

# javascript - XML 可从 URL 行访问，但不能从脚本访问

> ID：13341712
> 
> 赞同：1
> 
> 时间：2012-11-12T10:07:37.420
> 
> 标签：javascript, xmlhttprequest

当我在 FF 中键入某个 URL 时，我会在屏幕上显示返回的 XML，因此 Web 服务显然正在工作。但是，当我尝试从运行 JS 的本地 HTML 文档访问它时，我得到了意外的行为。返回的代码是“200 OK” **，但**`null`根据 FireBug，响应部分中没有文本（或者更确切地说是空字符串）也没有 xml（它是）。

这就是我打电话的方式。

```
var httpObject = new XMLHttpRequest();
httpObject.open("GET", targetUrl, true);
httpObject.onreadystatechange = function () {
  if (httpObject.readyState == 4) {
    var responseText = httpObject.responseText;
    var responseXml  = httpObject.responseXML;
  }
}
httpObject.send(null); 
```

为什么会发生，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:13:15.380

这可能是 HTTP 标头问题（例如缺少`Accept`标头）；观察 FF 发送的标头（您可以使用 Firebug）并尝试在您的脚本中复制它们（`setRequestHeader`）。

否则，这可能是“同源策略”问题。

# module - 当用户从页面中删除模块时运行代码

> ID：13341716
> 
> 赞同：2
> 
> 时间：2012-11-12T10:07:57.560
> 
> 标签：module, dotnetnuke

我目前正在开发一个 DNN 模块。如果我们能够在用户从页面中删除模块时以及从回收站恢复模块时运行自定义代码，那就太好了。

我还没有找到任何关于如何做到这一点的例子，所以我不确定这是否可能？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:26:53.763

我不知道 DNN 中的任何事件机制，您可以在其中设置挂钩。您可能可以调试 DNN 代码并跟踪调用堆栈，直到找到可以注入一些代码的可用位置（可能会在下一次 DNN 更新后被销毁），或者可能检测到打算由核心团队。

但是，如果从页面中删除模块，**则 Modules 表中的 IsDeleted 字段设置为 true**。如果它从 bin 中恢复，则再次设置为 false。

您可以**在 Sql Server**中使用触发模块表更新时触发的触发器，检查更新是否引用 IsDeleted 字段，将内容写入通知表，并使用基于 SqlDependency 的Sql**查询通知来运行一些代码（参见**[http ://www.codeproject.com/Articles/144344/Query-Notification-using-SqlDependency-and-SqlCach](http://www.codeproject.com/Articles/144344/Query-Notification-using-SqlDependency-and-SqlCach)进行介绍）。

要走一些步骤，但它应该可以工作（并且比攀登马特宏峰更容易:-)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-28T14:44:19.490

DNN 平台 (DotNetNuke) 中绝对有开发人员可以附加 C# 代码的钩子。

虽然我目前无法提供交钥匙示例，但请查看以下内容：

[https://github.com/dnnsoftware/Dnn.Platform/blob/c35fdc7fb75db0438f3b872ce4e279e3ea73e7c2/DNN%20Platform/Library/Entities/EventManager.cs](https://github.com/dnnsoftware/Dnn.Platform/blob/c35fdc7fb75db0438f3b872ce4e279e3ea73e7c2/DNN%20Platform/Library/Entities/EventManager.cs)

您正在寻找通过它的声音挂钩到 ModuleRemoved 事件。

这是用户登录的示例，您可以适应您的事件：

[当用户登录时，DNN 会触发事件吗？](https://stackoverflow.com/questions/34646529/does-dnn-fire-an-event-when-a-user-logs-in)

我希望这对未来有所帮助。

# javascript - 为什么不使用 jquery 在 HTML 中加载我的外部内容？

> ID：13341719
> 
> 赞同：1
> 
> 时间：2012-11-12T10:08:09.527
> 
> 标签：javascript, jquery, html

我有一个带有垂直菜单的 HTML 页面。我想单击一个菜单项以在 div 标签内容项之间打开。

这是 HTML

```
 <div id="navigation">
  <ul id="list-links">
    <li ><a id="pollo" href="">Pollo</a></li>
    <li><a id="tacchino" href="">Tacchino</a></li>
    <li><a id="prodotti" href="">Prodotti</a></li>
</ul>

<div id="contentPro">

</div>

     </div> 
```

这就是 JS：

```
 $('#list-links li a' ).click(function(){  
        $clicked = $(this);
        var idToLoad = $clicked.attr("id")
        var url=idToLoad+'.html';

         $('#contentPro').load(url);

}); 
```

为什么外部 HTML 不能在 DIV 标记之间加载？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:15:34.057

当您单击锚标记`<a>`页面时，页面会被重定向。您必须使用停止该操作`event.preventDefault();`

这是更新的代码

```
$('#list-links li a' ).click(function(event){
        event.preventDefault();       
        $clicked = $(this);
        var idToLoad = $clicked.attr("id")
        var url=idToLoad+'.html';

        $('#contentPro').load(url);
}); 
```

如果问题没有解决，那么您应该检查路径`pollo.html`是否`tacchino.html`正确`prodotti.html`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:21:39.747

将您的代码包装在`ready`事件中，例如

```
$(document).ready(function(){
    $('#list-links li a' ).click(function(e){ 
        e.preventDefault();
        $clicked = $(this);
        var idToLoad = $clicked.attr("id")
        var url=idToLoad+'.html';
        $('#contentPro').load(url);
     });
}); 
```

# google-apps-script - Google 协作平台列表页面模板中的新 ListItem 没有通知事件

> ID：13341722
> 
> 赞同：3
> 
> 时间：2012-11-12T10:08:19.933
> 
> 标签：google-apps-script, google-sites

当新项目添加到 Google 网站列表页面模板中的列表时，我需要一个通知事件。像 Page.listUpdated(e) 这样的东西会很棒，其中 e.Item 可以是新的 ListItem。

最初它是在新项目上启用条件格式，但我可以想到更多用途。

任何人都可以为此提出解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:57:59.850

我有一个在电子表格中运行的脚本，我用它来跟踪日历中的变化，并且我稍微修改了一下以检查 SitePage 列表......它需要一些“美容增强”，但它可以工作。例如，您可以设置一个时间触发器，让它每 30 分钟运行一次，如果您选择的任何页面发生任何更改，它都会向您发送一封邮件。

您唯一需要做的就是在“主表”上添加您要检查的页面的 url，并在尝试之前运行一次“init”函数。记录器表也将跟踪更改。

测试表[可在此处获得](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dF9vazZuOHQzMHFHWlJ2QXpiWnlSaGc)（请复制运行它），脚本如下所示（将其视为“正在进行的工作”）：

```
 var email = 'test@gmail.com';
  var ss = SpreadsheetApp.getActiveSpreadsheet();// this spreadsheet
  var sh = ss.getSheetByName('master');
  var pageList = sh.getDataRange().getValues();
  var logsheet = ss.getSheetByName('logger');
  var last = logsheet.getLastRow();
  var FUS1=new Date().toString().substr(25,6)+":00";

function onOpen() {
  var menuEntries = [ {name: "initialize", functionName: "init"},
                      {name: "Lauch autoTest", functionName: "autoCheckAllPages"},
                     ];
    var sheet = SpreadsheetApp.getActiveSpreadsheet();
    sheet.addMenu("Tracking utilities",menuEntries);//
    SpreadsheetApp.setActiveSheet(sheet.getSheetByName('logger'));// start on logger page  
}

function init(){
   ScriptProperties.setProperties({'lastTest': 'empty'}, true); 
}

function autoCheckAllPages(){
    var message = ScriptProperties.getProperty('lastTest')
    var newVal = ''
    ss.setActiveSheet(logsheet)
  for(nn=0;nn<pageList.length;++nn){
    var pageName = pageList[nn][0];
    var pageUrl = pageList[nn][1];   
    var items = SitesApp.getPageByUrl(pageUrl).getListItems()
      for (var i = 0; i < items.length; i++) {
        Logger.log(items[i].getDatePublished()+'    '+items[i].getValueByIndex(1))
        newVal+= pageName+','+items[i].getDatePublished()+','+items[i].getValueByIndex(1)+'|'
        }
      }
    ScriptProperties.setProperties({'lastTest': newVal}, true);    // write to script properties       
    logsheet.insertRowAfter(last)
    logsheet.getRange(last+1,1).setValue('Autotest on '+ Utilities.formatDate(new Date(),FUS1,"MMM-dd-yy @ hh:mm"))
      if(message != newVal){
        var addedItem = sendMail_(message,newVal)
        logsheet.getRange(last+1,2).setValue('new list Item : '+addedItem)
        }
}

function sendMail_(message,newVal){
  Logger.log('send mail')
  var newItem=''
  var old=message
  var newI = newVal.split('|');
  for(n=0;n<newI.length;++n){
    if(message.match(newI[n])!=newI[n]){ newItem += newI[n] + '|'
    }
}
//MailApp.sendEmail(email,'new listItem Added',newItem);// this should be developped with HTML body to show date in a table for example...
return newItem
} 
```

# jquery - jquery隐藏/显示的IE9渲染问题

> ID：13341730
> 
> 赞同：0
> 
> 时间：2012-11-12T10:08:59.090
> 
> 标签：jquery, internet-explorer

我有一些用 jQuery 编码的灯箱式弹出窗口。它适用于所有像样的浏览器，除了 IE9（如果被认为是像样的浏览器）。如果您单击它，它工作正常：弹出窗口打开，没有什么异常。然而，只要你移动你的光标，一切都会开始闪烁、消失或任何 IE9 能够破坏功能的行为。

我不知道这是怎么发生的（也因为它不会在 IE8 中发生）。我已经给出了我使用正确位置和 z 索引的所有元素。问题不在于黑屏覆盖（它只是一个具有透明背景的 div，z-index 远低于居中内容），我已经通过从代码中完全删除该元素进行了测试。

这是我用来隐藏/显示 div 的代码：

```
 //open popup
$(".pop").click(function(){
    $refselector = "." + $(this).attr("rel")
    $($refselector).fadeIn(500);
    $(".ui-overlay").fadeIn(50);
positionPopup();
});  

//close popup
$(".close").click(function(){
    $(".overlay-form").fadeOut(500);
    $(".ui-overlay").fadeOut(500);
});

//close popup by clicking outside the box
$(".ui-overlay").click(function(){
    $(".overlay-form").fadeOut(500);
    $(".ui-overlay").fadeOut(500);
}); 
```

如果您想查看它的实际效果：[http](http://www.puurtrainingen.nl/referenties) ://www.puurtrainingen.nl/referenties并单击四个框中的任何一个。

如果有人遇到过这样的问题并知道解决方案：感谢您的帮助！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:18:17.690

我想我在打开一个嵌套在无序列表中的弹出窗口时遇到了一些类似的问题。也许您可以尝试将弹出 html 放在 ul 之外？

无论如何，我一直对[http://fancybox.net/](http://fancybox.net/)很满意，它会为你做那些弹出式的事情。如果你还没有听说过这个，我建议你看看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:29:53.127

`.page-item`的`overflow: hidden`问题。

您可以更改 CSS 规则`.page-item`或移动`.overflay-form`到另一个容器。

# c# - 在 stringbuilder 类型上正确使用子字符串

> ID：13341735
> 
> 赞同：0
> 
> 时间：2012-11-12T10:09:19.357
> 
> 标签：c#

我正在使用子字符串构建一串数据。我想要的数据格式是

```
[1,2,3,4,5,6,7,8,9,10] 
```

所以我正在构建它如下

```
StringBuilder sb = new StringBuilder();
sb.append("1,");
sb.append("2,");
sb.append("3,");
.
.
. 
```

我遇到的问题是当我想`,`在添加结束之前修剪决赛`]`。

我可以做

```
sb.ToString();
sb.Substring(0, (sb.Length - 1));
sb += "]"; 
```

但是使用 += 不是很有效，因为这会创建一个新字符串。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:11:44.663

```
var str = "[" + String.Join(", ",Enumerable.Range(1,10)) + "]"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T10:12:42.713

`,`如果不需要，请不要添加 final ：

```
var sb = new StringBuilder().Append('[');
var first = true;
foreach (var item in collection)
{
    if (first)
        first = false;
    else
        sb.Append(',');
    sb.Append(item);
}
sb.Append(']');
var result = sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T10:11:54.090

最简单的是`-=`在`StringBuilder`'s上使用，[`Length`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.length.aspx)因为它是可写的：

```
sb.Length -= 1; // removes the last char 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-12T10:12:40.077

**更新**

经过一点测试

```
var result = string.Concat("[", string.Join(",", someEnumerable), "]"); 
```

比构建器方法更简单、更快

* * *

你总是可以做

```
var result = string.Format("[{0}]", string.Join(",", someEnumerable)); 
```

序列可以是任何你想要的，例如

```
var someEnumerable = Enumerable.Range(1, 10); 
```

这似乎比重新发明轮子更简单，并且避免了中间字符串。

这确实对实现做出了假设，`String.Join`但是，我认为你应该假设它对于这个目的来说已经足够好了。

* * *

有关更多信息，[此问题](https://stackoverflow.com/questions/585860/string-join-vs-stringbuilder-which-is-faster)`String.Join`在和之间进行比较`StringBuilder`。

[这个问题](https://stackoverflow.com/questions/6785/is-string-format-as-efficient-as-stringbuilder)表示`String.Format`使用`StringBuilder`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T10:26:55.300

**这是一个很好的清洁方法的示例：**

```
 public static string WriteValues(int start, int end)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("[");
        for (int index = start; index <= end; index++)
        {
            sb.Append(index).Append(",");
        }
        sb.Length -= 1;
        sb.Append("]");
        return sb.ToString();
    } 
```

这完成了 StringBuilder 中的所有工作，然后传回单个字符串。您还可以指定开始和结束值！

# mysql - MySQL 顺序错误

> ID：13341736
> 
> 赞同：0
> 
> 时间：2012-11-12T10:09:21.490
> 
> 标签：mysql, sql

目前我正在建立一个市场信息查询。这是我的查询：

```
SELECT 
    `data`.s AS Simbol,
    format( ( (`data`.c - `data`.p) / `data`.p ), 3 ) AS pctChange, 
    lu
FROM 
    jos_marketinfo AS `data`
WHERE 
    `data`.s LIKE '%.%' 
ORDER BY pctChange ASC 
LIMIT 10 
```

如您所见，我正在计算查询中的百分比变化，我想重新排序。问题是订单是错误的，我在中间看到很大的负 pctChange 值，反之亦然。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:12:20.827

您应该按无格式排序以避免字母顺序并获得数字顺序：

```
ORDER BY (data.c-data.p)/data.p 
```

# iphone - 怎么修 文件未找到？

> ID：13341741
> 
> 赞同：1
> 
> 时间：2012-11-12T10:09:40.687
> 
> 标签：iphone

我通过wsdl2objc 开发了一个通过soap 与WSDL 连接的简单应用程序。我在 google 中使用 wsdl2objc 应用程序，生成许多 .h 和 .m 类型的文件。

当我将包含这些文件的文件夹添加到我的项目中时，我添加了 libxml2.dylib，例如：

![http://i.stack.imgur.com/dCenf.png](../Images/c1b121a5dc515519bdd9d2285ccbc200.png)

并在我的项目设置中配置：

![http://i.stack.imgur.com/NuyJj.png](../Images/801b629fad2e08b5b4446d4be2c06d26.png)

![http://i.stack.imgur.com/mmYUy.png](../Images/ea8e8f5be7bd5515a4bbf4faf4519140.png)

但我仍然找不到错误文件！

![http://i.stack.imgur.com/UW9RM.png](../Images/1006faf9f227c20aa9e7d98cd383e0ac.png)

我该如何解决这个错误

不是：我在项目目标中配置了任何东西。我该怎么做？在我的项目中，它有 2 个目标：projectname 和 projectname.ipa。

这个项目继承自旧的 xcode 版本，现在我在 xcode 版本 4.3.3 中制作它

预先感谢。

# c++ - CoCreateInstance 在发布中效果很好，但在调试中却不行

> ID：13341742
> 
> 赞同：4
> 
> 时间：2012-11-12T10:09:42.050
> 
> 标签：c++, debugging, dll, com

我是 COM 的新手，在调试 dll 时遇到问题。在这段代码中：

```
 _Check_return_ HRESULT CoCreateInstance(_In_ REFCLSID rclsid, _In_opt_ LPUNKNOWN pUnkOuter = NULL, _In_ DWORD dwClsContext = CLSCTX_ALL)  
throw()  
    {  
        ATLASSERT(p == NULL);  
        return ::CoCreateInstance(rclsid, pUnkOuter, dwClsContext, __uuidof(T), (void**)&p);  
    } 
```

作为回报，我有错误 R6034：应用程序试图错误地加载 C 运行时库。

另外：在 VS 2008 的输出窗口中，我注意到调试在某些消息处停止：

```
'OmpClimApp.exe': Loaded '\\omegaserver\omega\app32\OMEGA.DLL\RWUXThemeS.dll', Binary was not built with debug information. 
```

哪里有错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:00:06.840

看起来问题在于 MS CRT 库的混合`Debug`和`Release`组装版本。`Microsoft.VC80.CRT`和`Microsoft.DebugVC80.CRT`程序集使用相同的公共 publicKeyToken `"1fc8b3b9a1e18e3b"`，因此它们不能同时加载到单个应用程序中。

在您的情况下，清单是`RWUXThemeS.dll`指，`Microsoft.VC80.CRT`但您的应用程序在`Debug`构建中的清单是指`Microsoft.DebugVC80.CRT`。尝试加载`RWUXThemeS.dll`会导致描述实际上不正确的错误，应该是“无法加载程序集，其公钥已被另一个程序集使用”。

**可能的解决方案：**您需要`RWUXThemeS.dll`在调试版本中将调试版本链接到您的应用程序。假设它的名字是`RWUXThemeSD.dll`.

有关更多详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms235560%28v=vs.80%29.aspx)（社区内容，主要文章看起来与您的问题无关）。

`RWUXTheme`库是 Rogue Wave Stingray Studio 的一部分，请参阅[文档](http://www.roguewave.com/search.aspx?q=RWUXTheme)。

# .htaccess - 使用 htaccess 将 wordpress 类别设置为子域

> ID：13341746
> 
> 赞同：0
> 
> 时间：2012-11-12T10:09:53.907
> 
> 标签：.htaccess, mod-rewrite, redirect

我有自定义分类法[http://thedripple.com/country/india](http://thedripple.com/country/india)并且我想在有人打开[http://in.thedripple.com](http://in.thedripple.com)时显示此类别。我想这可以使用 htaccess 来完成，我尝试了以下代码，但没有成功。还有其他选择吗？我想将子域保留在地址栏中。

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^in.thedripple.com [NC]
RewriteRule ^/(.*)$ /country/india/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:19:13.980

以下应该做魔术：

```
RewriteEngine On
RewriteRule ^country/india(.*)$ http://in.thedripple.com [R=301,L] 
RewriteRule ^country/india/(.*)$ http://in.thedripple.com/$1 [R=301,L] 
```

# android - 在galaxy选项卡中单击“Mini Apps Tray”会调用哪种方法？

> ID：13341747
> 
> 赞同：0
> 
> 时间：2012-11-12T10:09:54.813
> 
> 标签：android, android-layout, android-widget

我正在尝试通过单击银河选项卡中的“迷你应用程序托盘”中的任何应用程序（即计算器、日历等）来完成我当前的活动。

我注意到单击应用程序时会调用 onWindowFocusChanged() ，但使用它来完成应用程序并不是一个好主意，因为任何系统生成的中断都可能让它被调用。

即使我无法禁用此迷你应用程序托盘。

请让我知道是否有任何解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:41:50.950

当用户打开一个小应用程序时，没有调用特定的方法。此功能由三星实现，我们无法更深入地了解它的工作原理。

我认为这`onWindowFocusChanged()`可以解决这个问题。您说过它是在其他情况下调用的，而不是在打开应用程序时调用的，对吗？你能看到`Boolean hasFocus`传递给方法的属性有什么不同吗？

# java - 调用 rs.next() 或 rs.previous() 时结果集指针的不均匀增量

> ID：13341756
> 
> 赞同：0
> 
> 时间：2012-11-12T10:10:44.260
> 
> 标签：java, debugging, jdbc, resultset, database

当我在 Eclipse IDE 中调试时调用 res.next() 时，我遇到了关于结果集指针移动的问题。

代码：

```
 query="Select * from emp"
    res=stmt.executeQuery(query);
    System.out.println("Statement executed");
    System.out.println("-----------------------");
    int count=0;
    while(res.next()){
    count++;
    //some useful code
    } 
```

查询执行返回两条记录。所以我正常运行程序，while循环结束后计数值为2，这是预期的结果但是当我尝试在eclipse中调试相同的代码时，while循环结束后计数值仍然为0，这意味着控制不是进入while循环，但确定表中有2条记录。这里会有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:18:29.920

我找到了原因。

我有一个调试表达式，`res.next();` 所以每次按 F6（在 Eclipse 调试模式下转到下一个语句的键）时，该语句都会被执行，所以当我进入 while 循环时，该语句被执行了三次，导致实际结果集指针自身移动到最后一个位置之后。

我在调试模式下使用 res.next() 的原因是检查它是否返回 true。

我们在调试模式下添加表达式时需要谨慎。不仅是上面的语句，还有像 pre-increment 或 post-increment 这样的语句或任何可以为变量分配新值的表达式，因为调试表达式实际上作用于我们程序中的实际变量。

# installation - 无法在 Opentaps 中创建 java 虚拟机

> ID：13341758
> 
> 赞同：0
> 
> 时间：2012-11-12T10:10:49.410
> 
> 标签：installation, crm, opentaps

我正在按此说明安装 Opentaps 的开源代码，请访问[http://www.opentaps.org/docs/index.php/General_Installation_of_Opentaps](http://www.opentaps.org/docs/index.php/General_Installation_of_Opentaps)

但我收到一个错误：

> 无法创建Java虚拟机。

这就是我所做的：

1.  打开 cmd 并转到目录 c:\opentaps
2.  `set JAVA_HOME=C:\Program Files\Java\jdk1.7.0_04`
3.  使用命令`startofbiz.bat`

最后我得到了错误：

> 无法创建Java虚拟机
> 
> 发生了致命异常。程序将会退出。

解决方案 2 失败。[当我通过此指令](http://www.opentaps.org/docs/index.php/Recommended_Memory_Settings)更改“startofbiz.bat”文件中的某些内容时， 我会遇到与上述相同的问题。

解决方案 3 失败。我还将内存设置更改为`-Xms256M -Xmx512M -XX:MaxPermSize=128M`. 现在我在控制台中遇到内存不足异常。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:16:14.367

对于上述问题，我们有几个解决方案

解决方案 1：您可以重新安装所有组件。即这意味着您已经安装了整个软件。对于错误：无法创建 Java 虚拟机。

解决方案 2：最大堆大小取决于机器架构，例如 32 位或 64 位，JVM 位大小，例如 32 位 JVM 或 64 位 JVM 和操作系统。

在 32 位机器中，虽然最大堆大小的理论限制为 4GB，但它因操作系统而异，例如在 32 位 Windows XP 上，由于各种原因，最大堆大小限制为 1.5G，而在 64 位 Solaris 机器上，即使使用 32 位 JVM你可以负担得起大约 3.5GB。因此，当您在 32 位 Windows XP 机器上运行以下 java 命令时

解决方案3：提供堆空间时另一个值得注意的语法错误是数字文字和单位之间的空格，如下例所示：（1）正确：~/java java -Xmx1500 M 和（2）不正确：~/java java -Xmx1500MB 和 (3) 不正确：~/java java -Xmx 1400M

问候， 拉文德拉·西拉姆

# drupal-7 - 在厨师（ubuntu）中安装食谱时在哪里指定属性？

> ID：13341759
> 
> 赞同：2
> 
> 时间：2012-11-12T10:10:57.240
> 
> 标签：drupal-7, chef-infra, recipe, cookbook

厨师世界的新手。

我发现了这个有用的食谱：[https ://github.com/mdxp/drupal-cookbook](https://github.com/mdxp/drupal-cookbook)

我看到以下默认属性：

```
default['drupal']['version'] = "7.14"
default['drupal']['checksum'] = "..."
default['drupal']['dir'] = "/var/www/drupal"
default['drupal']['db']['database'] = "drupal"
default['drupal']['db']['user'] = "drupal"
default['drupal']['db']['host'] = "localhost"
default['drupal']['site']['admin'] = "admin"
default['drupal']['site']['pass'] = "drupaladmin"
default['drupal']['site']['name'] = "Drupal7"
default['drupal']['apache']['port'] = "80" 
```

在 node.json 我有：

```
{
        "run_list": [
        "recipe[drupal]"
    ]
} 
```

当我经营厨师时；它安装具有默认属性的drupal；这不是我想要的。

愚蠢的问题：我在哪里覆盖“默认”属性？

找不到具体而简单的例子。维基太混乱了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:41:33.147

如果您在该 JSON 块中指定信息，它应该可以工作。

例如

```
{
        "drupal": {
          "db": {
            "user": "foo",
            "host": "bar"
          }
        },
        "run_list": ["recipe[drupal]"]
} 
```

# java - 具有嵌套接口的类作为泛型类型（在 maven 中找不到符号错误但在 eclipse 中有效）

> ID：13341762
> 
> 赞同：0
> 
> 时间：2012-11-12T10:11:17.257
> 
> 标签：java, maven, gwt-platform

我有一个奇怪的（或者可能没有）问题。我正在使用 MVP 框架并以下列方式定义我的一些类：

```
public class SomePresenter extends 
    Presenter<SomePresenter.MyView, SomePresenter.MyProxy> 
{
    public interface MyView extends View {}
    public interface MyProxy extends Proxy {}
} 
```

在 Eclipse 中，它编译得很好（我猜是因为它使用了 Eclipse 编译器），但是当我使用 maven（oracle jdk7 或 6）时，我得到一个*符号未找到*接口的错误`View`。

如果我执行以下操作之一，它可以与 maven 一起编译：

*   将接口放在一个单独的 java 文件中
*   将导入语句移动`View`到导入列表的顶部。

在 oracle java 编译器中使用嵌套接口作为泛型类型是否存在已知问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:50:41.393

在你的 POM 中试试这个。关键部分是依赖部分。它将使用 eclipse 编译器。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
        <compilerArgument>-proc:none</compilerArgument>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>org.codehaus.plexus</groupId>
            <artifactId>plexus-compiler-eclipse</artifactId>
            <version>1.8.2</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:13:08.437

我认为这不是 Oracle 编译器的问题，只是为了确保您可以尝试在 Eclipse 中使用它？

更有可能的是，我认为这是一个依赖问题 - 请向我们展示您的 POM 文件？另外，复制具体的编译错误。

`View`接口是在工件中定义的，`com.gwtplatform:gwtp-mvp-client`它应该在某个地方。您说如果您将 View `import to the top of the import list - is there another`View` 移到您可能需要摆脱的某个地方，它会起作用（Ctrl-Shift-O 用于“优化导入”在 Eclipse 中很方便）。

干杯，

# javascript - 如何在 HTML5 或 JavaScript 中播放带有动态 URL 的 MP3 音频？

> ID：13341765
> 
> 赞同：2
> 
> 时间：2012-11-12T10:11:34.170
> 
> 标签：javascript, html5-audio

在 JavaScript 或 HTML5 中，如何使用*动态*而不是*静态*URL 播放 MP3 音频？

示例 - 以下内容不起作用：

```
<audio controls="controls">
  <source src="http://translate.google.com/translate_tts?tl=en&q=Hello%2C+World" type="audio/ogg">
</audio> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T10:16:29.020

从标题中可以看出，这是音频/mpeg，而不是音频/ogg：

```
Content-Type:audio/mpeg 
```

试试这个：

```
<audio controls="controls">
  <source src="http://translate.google.com/translate_tts?tl=en&q=Hello%2C+World" type="audio/mpeg">
</audio> 
```

[http://jsfiddle.net/ZCwHH/](http://jsfiddle.net/ZCwHH/)

适用于播放 mp3 的浏览器，例如 google chrome。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:21:14.677

我不确定您要在示例中实现什么，但就使用 HTML5 播放音频而言，您可以通过以下方式简单地做到这一点：

`Static Url:`

```
<audio controls="controls">
  <source src="mySong.mp3" type="audio/mpeg">
</audio> 
```

`Dynamic Url:`（只需在 src 属性中打印该 url）

```
<audio controls="controls">
  <source src="<%Reponse.Write(url);%>" type="audio/mpeg">
</audio> 
```

希望它能解决这个问题。

# android - 安卓游戏的多个玩家

> ID：13341766
> 
> 赞同：0
> 
> 时间：2012-11-12T10:11:36.463
> 
> 标签：android

我正在尝试制作一款游戏，非常简单，一种你只需要解决一些问题的游戏。现在我想让制作多个玩家成为可能。一种方法是与玩家一起制作一个 sql 表，然后将每个分数、每个问题、每个玩家放在其中。要知道哪个玩家是最后一个，我可以将它保存到表'currentplayer'或其他东西。

现在我在想，这是不是有点过分了？有没有更简单或更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:46:08.360

在游戏过程中更新一个 sqlite 表并不是一个好主意。这就像让冰箱打开只是因为你会知道你会在一天中以增量方式使用它。我会制作一个记分对象，为每个演奏的人初始化一个。然后最后，您可以将其放入数据库或其他任何内容中。

# javascript - Facebook 连接而不刷新页面。姜戈

> ID：13341772
> 
> 赞同：1
> 
> 时间：2012-11-12T10:11:54.320
> 
> 标签：javascript, jquery, django, django-facebook

在我的 django 应用程序中，我使用 django-facebook。

我希望我的用户能够在页面上进行 fb 连接。连接后，页面上会进行一些更改。

我想做的是允许用户连接并且不刷新页面显示页面的新元素。

这是我的 Facebook 按钮：

```
 <div class="inner_content">

    <form action="{% url facebook_connect %}?facebook_login=1&next=/mysite/" method="post">

    <input type="hidden" value="{{ request.path }}" name="next" />

   <div id="facebook_login_js">
   <input onclick="F.connect(this.parentNode.parentNode); return false;" type="image" src="myfbbutton.png" /><br />
   </div>               
   </form>          
   </div>   

   <script src="{{ STATIC_URL }}js/facebook_connect.js" type="text/javascript"></script> 
```

如何在不刷新页面的情况下将用户重定向到他所在的同一页面？这个想法是在用户连接后能够显示其他内容而不是按钮。

我正在寻找提示或教程 - 我的猜测是我需要一些 jquery，但我不知道如何开始。

任何帮助都会非常受欢迎。非常感谢。

# c++ - C++ 类和构造函数

> ID：13341775
> 
> 赞同：-1
> 
> 时间：2012-11-12T10:12:17.600
> 
> 标签：c++, class, constructor

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

有人想为我节省一些关于类和构造函数如何在 c++ 中工作的时间？这就是我得到的 - 它不起作用。我希望这个类有一个构造函数，它接受一个文件名并从文件系统中读取一个具有该名称的文件。

这是标题和实现

```
#ifndef __narcissism__Histogram__
#define __narcissism__Histogram__

#include <iostream>
#include <sstream>  // for ostringstream
#include <iomanip>  // for setw, setfill
#include <ios>      // for hex stream manipulator
using namespace std;
#include "random.h" // for randomInteger
#include "strlib.h" // for integerToString
#include "error.h"  // for error

class Histogram {
public:

/** Constructor:
  * 
  *  */
Histogram(string filename)
{
    readfile(filename);

}

private:

int readfile(string filename);

};

#endif /* defined(__narcissism__Histogram__) */ 
```

*.cpp

```
 #include "Histogram.h"

 int readfile(string filename)
 {
 return 0;
 } 
```

错误信息：

```
Undefined symbols for architecture i386:
"Histogram::readfile(std::string)", referenced from:
  Histogram::Histogram(std::string) in narcissism.o
ld: symbol(s) not found for architecture i386 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:18:00.253

您必须添加`Histogram::`成员函数的定义：

```
 int Histogram::readfile(string filename)
 {
 return 0;
 } 
```

否则它将定义一个具有相同名称的新全局函数，而成员函数未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:18:42.270

您的错误是 readfile 是 Histogram 的成员，因此在 .cpp 文件中它应该是：

```
int Histogram::readfile( string filename )
{
     // implement
} 
```

您编写的函数实际上在这一点上是一个有效的函数。（如果它试图访问任何直方图的成员，它将在编译中失败，这可能是 readfile 的正确实现：目的肯定是从它从文件中读取的数据中设置这些成员）。

相反，您得到了一个链接错误，因为没有为名为 readfile 的函数定义实现，该函数是 Histogram 类的成员。

# python - 安全退出多处理 python 应用程序

> ID：13341780
> 
> 赞同：4
> 
> 时间：2012-11-12T10:12:38.640
> 
> 标签：python, multiprocessing

我注意到`os._exit(<num>)`::

> 以状态 n 退出进程，不调用清理处理程序、刷新 stdio 缓冲区等。

那`sys.exit()`::

> “only”引发异常，只有在主线程调用时才会退出进程

我需要一个解决方案来关闭一个多处理应用程序，以确保所有进程都关闭（没有留下孤立的）并且它以可能的最佳状态退出。

附加功能：

我正在使用 python 多处理库创建进程，方法是创建继承自的类`multiprocessing.Process`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:27:00.103

我最终为每个进程创建了一个管道。然后当主进程关闭时，它可以向所有子进程发送一条消息，它们也应该关闭。

为了使这项工作正确，您必须定期检查子进程的“do loop”以查看管道中是否有消息，如果有，请检查它们是否是“立即退出”信息。

# entity-framework - 三个或更多表的实体框架多对多

> ID：13341781
> 
> 赞同：2
> 
> 时间：2012-11-12T10:12:38.753
> 
> 标签：entity-framework, many-to-many, code-first

是否可以使用 EF Code First 为三个或更多表创建桥接表？

```
User      Role      Node
+UserId   +RoleId   +NodeId
+Name     +Name     +Name

UserRoleNode
+UserId
+RoleId
+NodeId 
```

谢谢你。

编辑：我为桥表创建了一个实体，然后在 UserRoleNode 和其他表之间建立了一对多的连接。嗯？

# ios - 应用程序图标未刷新

> ID：13341790
> 
> 赞同：5
> 
> 时间：2012-11-12T10:13:09.750
> 
> 标签：ios, ios6, icons

我在我的新版本应用程序中更改了图标图像，并且我已经在设备中安装了旧版本应用程序，然后我安装了新版本，它在 iOS 5 中运行良好，但在 iOS 6 中，图标没有刷新，它仍然显示旧版本图标/徽标。如果没有安装旧版本的应用程序，该设备在iOS 5和iOS 6都可以正常运行。为什么？有谁能够帮助我 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T00:05:36.730

多年来，这一直是 iOS 中的一个错误，但在 iOS 6 中，它似乎每次都会发生。

1.  您可以在从 Xcode 运行之前删除您的应用程序（如果您不介意丢失所有文档和缓存）。

2.  您可以重新启动设备（如果您不介意等待几分钟）。

3.  您可以打开设置应用程序并转到常规 -> 重置 -> 重置主屏幕布局（如果您不介意您的图标全部重新排列）。

4.  您可以提交错误报告（如果您不介意长时间浪费时间的徒劳练习）。

（我个人最喜欢的是用于仅开发设备的#3）。

编辑：请参阅 Craig Watkinson 的答案以获得更好的方法，即将图标拖入和拖出文件夹。谢谢克雷格！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T13:52:16.547

您还可以将旧图标拖到文件夹中（即将其拖到另一个图标上），然后在它完成摆动之前，再次将其拖回。嘿，很快，图标更新了。

问题与跳板缓存的图标文件有关，出于某种原因，此操作会刷新缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:34:08.370

你试过*清洁*吗？你检查你的*MyApp-Info.plist*了吗？

# performance - 在 Matlab 中学习加速和矢量化技巧的最佳资源

> ID：13341794
> 
> 赞同：4
> 
> 时间：2012-11-12T10:13:22.620
> 
> 标签：performance, matlab, optimization, vectorization

对于 Matlab 代码优化的初学者，有一些资源，但不是都非常清晰易懂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:37:22.527

最好的资源是好奇的头脑。

您在 Matlab 中拥有一个出色的工具，可以快速原型化常见计算问题的替代解决方案。在许多情况下，为同一问题编写 2 种或更多不同的解决方案并发展您自己对如何优化使用 Matlab 的理解，特别是您对如何为自己的问题集挤出最佳性能的理解，这将是值得的。

不要丢弃不受欢迎的解决方案，将它们归档在您的代码存储库中，并针对新版本再次测试以找出可能发生的变化。然后回到 SO，教我们老狗新技巧。

阿尔夫，阿尔夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:22:30.647

我知道的最标准的参考是：

Acklam (2003) “Matlab 阵列操作：提示和技巧”

可在线免费使用 - 只需谷歌即可。

[其他好的资源是 comp.soft-sys.matlab 新闻组、stackoverflow 以及Loren Shure](http://blogs.mathworks.com/loren/)编写的几乎所有内容

最后一点：为了充分利用 SO，请尝试发布您自己的一些答案。没有什么比将自己的代码提交同行评审更能帮助您学习交易技巧和窍门的了。即使是点击“提交答案”按钮的过程也会让你对你写的每一行都三思而后行。提交后，您可以通过将您的答案与更有经验的用户的答案进行比较，并了解他们如何改进您自己的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:13:22.620

这个页面对我很有帮助。它非常清晰和直接，有很好的例子。推荐给在 Matlab 中使用代码加速的每个人。

[http://yagtom.googlecode.com/svn/trunk/html/speedup.html](http://yagtom.googlecode.com/svn/trunk/html/speedup.html)

# iphone - 我有一个我正在尝试为 iPhone 5 调整大小的 xib 文件

> ID：13341797
> 
> 赞同：-1
> 
> 时间：2012-11-12T10:13:29.467
> 
> 标签：iphone, ios, xcode

我尝试了很多不同的方法，如果有人可以给我一个对你有用的方法，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:12:09.080

不要为 iPhone 5 创建单独的 Xib。而是添加一个名为`Default-568h@2x.png`. 这会将您的应用程序识别为支持 iPhone 5 指标的应用程序。

当应用程序被加载时 - 无论是在 iPhone 5 设备上 - 还是在配备 Retina 4 英寸显示屏的 sim 卡上，您都会看到您的应用程序在 568 像素高度模式下运行。

您可能会看到一些空白区域，或者按钮位置错误，等等。那是因为您没有在 Interface Builder 中正确配置自动调整大小的属性。一定要这样做，使用下面的控件来指定控件的“粘性”，以及它们应该如何扩展到额外的空间。

![自动调整控件](../Images/7711b1be5ca9db83ae34003a33a0ebe2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:45:01.323

在这里你可以应用我的逻辑。

您可以为单独的设备创建单独的 XIB，如 iPhone（普通）、4 英寸和 iPad 设备。无需将 XIB 调整为任何特定设备。只需创建单独的 XIB

```
 - (void)createSeperateXIB
      {
       YourViewController* yourVC  
      if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
      {
        if([UIScreen mainScreen].bounds.size.height == 568)//for 4inches device
        {
        yourVC  = [[YourViewController alloc] initWithNibName:@"YourViewController_iPhone5" bundle:nil];
       }
       else{//normal iphone/iPod device
          yourVC  = [[YourViewController alloc] initWithNibName:@"YourViewController_iPhone" bundle:nil];
       }
      }
       else{//for ipad 
       yourVC  = [[YourViewController alloc] initWithNibName:@"YourViewController_iPad" bundle:nil];
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:19:55.740

有一个隐私问题，在你问之前你应该好好搜索一下；）

这里有一些很好的答案，我相信它会帮助你：

[关联](https://stackoverflow.com/questions/12420521/handling-the-larger-device-size-of-iphone-5)

[链接 2](https://stackoverflow.com/questions/12582283/how-can-i-create-xibs-for-both-iphone-4-and-iphone-5-using-xocde-4-5)

如果我理解正确你想要什么，这将是 100% 有帮助的，否则写更多解释。

# javascript - 如何在基于 Backbone.js 的应用程序中干净地获取 401

> ID：13341800
> 
> 赞同：8
> 
> 时间：2012-11-12T10:13:33.057
> 
> 标签：javascript, backbone.js, requirejs, amd

在我的基于 Backbone.js 的应用程序中，我正在与我的 API 交谈，该 API 以 401 响应，以防在没有或使用无效身份验证令牌的情况下发出底层请求。每次收到 401 时，我想通过导航到 #login 页面来检测它。

为了获取 401，我成功地包装了 Backbone.sync，但那时我有点卡住了。我在这里尝试了几种策略：

1.  `throw 'unauthorized'`在 Backbone::sync 中向下并尝试在我的路由器中获取。失败：“未获授权”

2.  尝试`#.navigate '#login'`在 Backbone::sync 中关闭，这不仅看起来很奇怪，而且伴随着我的应用程序基于 AMD/require.js 的问题，我不能简单地在我的包装`sync`函数中访问我的 Backbone.Router 实例。

到目前为止，我看到的唯一解决方案是创建一个“全局可用”的缓存对象，它获取对我的路由器实例的引用，然后将其`define`作为依赖项放入需要的地方。那个缓存对象必须是一个单例并且破坏了我的整个“请禁止全局和禁止命名空间”策略。

我有点卡在这里。谁能指出我对这个常见问题的更干净的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T11:53:43.017

您可以在 ajaxError 中进行重定向：

```
$.ajaxError(function (event, xhr) {
            if (xhr.status == 401)
                window.location = '#login';
        }); 
```

如果一切设置正确，则无需手动访问路由器实例。转到该 url 应该触发与其关联的路由功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-02T00:46:13.703

对于使用 jQuery 1.8 或更高版本的用户，语法已更改：

```
$(document).ajaxError(function (event, xhr) {
        if (xhr.status == 401)
            window.location = '#login';
    }); 
```

有关详细信息，请参阅[jQuery 手册](http://api.jquery.com/ajaxerror/)。

# tsql - 显示不满足关系的行：这是正确的，还是有更简单的方法？

> ID：13341801
> 
> 赞同：0
> 
> 时间：2012-11-12T10:13:33.507
> 
> 标签：tsql, join

对于我们的一位客户，我必须为没有该角色的每个人打开一个 ASP.NET 角色。我当前的查询（有效）如下，但我认为这个查询可以变得更容易/更简单，并且我采取了迂回的方式。

ASP.NET 成员资格模型如下：aspnet_Users 与 aspnet_Roles 的多对多。这种多对多关系存储在 aspnet_UsersInRoles 中。

```
SELECT 
  u2.UserId,
  u2.UserName,
  r2.RoleId,
  r2.RoleName   
FROM .[dbo].[aspnet_Users] u2
CROSS JOIN .[dbo].[aspnet_Roles] r2
WHERE not exists (
  SELECT 
    r.[ApplicationId]
    ,r.[RoleId]
    ,r.[RoleName]
    ,ur.[UserId]
    ,u.UserName
  FROM .[dbo].[aspnet_Roles] r
  INNER JOIN .[dbo].[aspnet_UsersInRoles] ur on r.RoleId = ur.RoleId
  INNER JOIN .[dbo].[aspnet_Users] u on u.UserId = ur.UserId
  WHERE r.RoleId = '73635AD6-0282-4289-85C4-7B4359D1D640' and u.UserId = u2.UserId
) AND r2.RoleId = '73635AD6-0282-4289-85C4-7B4359D1D640' 
```

因此，基本上，我首先计算具有该角色的所有用户的交叉连接，然后减去已经处于该角色的每个人，以获得*不*处于该角色的用户的结果集。

感觉就像是一种迂回的方式来解决这个问题。是否有更简单（或更直观）的方法来获得相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:53:04.273

如果您使用的是 Sql Server 2005 或更高版本；

```
;WITH cte AS (
 select u.userId from aspnet_Users u inner join aspnet_UsersInRoles ur
 on u.UserId = ur.UserId
 where ur.RoleId = '73635AD6-0282-4289-85C4-7B4359D1D640'
)
SELECT u.UserId,u.UserName,r.RoleId,r.RoleName 
FROM    aspnet_Users u INNER JOIN
        aspnet_UsersInRoles ur ON u.UserId = ur.UserId INNER JOIN
        aspnet_Roles r ON ur.RoleId = r.RoleId
WHERE u.UserId NOT IN (select UserId from cte) 
```

# iphone - 从当前用户位置绘制一条彩色轨迹线到 ios 中的所需位置

> ID：13341804
> 
> 赞同：0
> 
> 时间：2012-11-12T10:13:41.960
> 
> 标签：iphone, ios, google-maps, mkmapview

我们如何通过在 ios 中使用 Google Maps API 从当前用户位置（开始经纬度）到所需位置（结束经纬度）绘制一条彩色轨迹线。我有很多教程，但找不到正确的指导。请正确指导我。

# jdbc - Seam 连接到数据库并检索数据

> ID：13341813
> 
> 赞同：0
> 
> 时间：2012-11-12T10:14:15.800
> 
> 标签：jdbc, seam

我正在为我的 Web 应用程序使用 Seam Framework-Java EE。最终用户将连接到数据库并在我的 Web 应用程序（它有一个 GUI）中使用 SQL（或 HQL）命令检索一些记录。

参数（字段）将是：数据库 url (jdbc:oracle:thin:@...)、用户名、密码和用于检索记录的 SQL 命令。GUI 有这些字段。是否可以使用 entityManager 执行此操作？或者有什么建议吗？

顺便说一句，不仅适用于 Oracle，还适用于其他数据库和驱动程序。我是否需要将驱动程序 jar 放在某个地方，或者 Seam 是否已经有内置驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:46:05.993

这里有很多问题

为了：

EntityManager - 我从来没有使用实体管理器连接到随机数据库（这就是你正在做的）。

驱动程序：您需要为计划支持的每种数据库类型提供驱动程序。

将军：你确定这是实现你想要做的最好的方式吗？从本质上讲，您让用户能够对您的数据库做他们想做的事。

# libxml2 - 在 OSX Mountain Lion 上使用自制软件安装 libxml2 时出现问题

> ID：13341814
> 
> 赞同：2
> 
> 时间：2012-11-12T10:14:19.887
> 
> 标签：libxml2, homebrew

我第一次尝试在 OSX Mountain Lion 上使用 homebrew 安装 libxml2，但我遇到了以下问题

```
brew install libxml2
==> Downloading ftp://xmlsoft.org/libxml2/libxml2-2.8.0.tar.gz
######################################################################## 100.0%
######################################################################## 100.0%==> ./configure --prefix=/usr/local/Cellar/libxml2/2.8.0 --without-python
==> make
==> make install
Error: No such file or directory - /private/tmp/libxml2-Nsul/libxml2-2.8.0/Copyright 
```

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:50:04.410

这个问题似乎在这里得到了解决 [https://github.com/mxcl/homebrew/issues/16008](https://github.com/mxcl/homebrew/issues/16008)

# wpf - 如何在 WPF 控件中为Thikness 属性添加最小和最大限制？

> ID：13341821
> 
> 赞同：0
> 
> 时间：2012-11-12T10:14:37.750
> 
> 标签：wpf, wpf-controls, dependency-properties

我想创建具有少量依赖属性的自定义控件。

Thikness 返回类型的那些属性。

我的控件将被 Blend 中的设计师使用。

在 Blend 中，一些厚度属性是有限的。例如 BorderThickness 不能小于 0。

如何创建最小值为 1 和最大值为 3 的思维属性？（Blend 应该以与 BorderThickness 相同的方式验证数据 - 不允许用户输入）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:54:11.413

您可以在注册时定义验证/强制属性回调。这个[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms745795.aspx)对实现依赖属性验证有更详细的描述。

简而言之 - 您可以在注册时为任何属性指定验证和强制回调，并检查这些回调中的厚度值。

例如，下面是`Border`'s`BorderThickness`属性的注册方式（来自 ILSpy 的代码）：

```
public static readonly DependencyProperty BorderThicknessProperty = 
    DependencyProperty.Register(
        "BorderThickness", 
        typeof(Thickness), 
        typeof(Border), 
        new FrameworkPropertyMetadata(default(Thickness), 
        FrameworkPropertyMetadataOptions.AffectsMeasure | FrameworkPropertyMetadataOptions.AffectsRender,
        new PropertyChangedCallback(Border.OnClearPenCache)),
        new ValidateValueCallback(Border.IsThicknessValid)); 
```

这是验证方法本身：

```
private static bool IsThicknessValid(object value)
{
    return ((Thickness)value).IsValid(false, false, false, false);
} 
```

# linux - 并排显示两个文件

> ID：13341832
> 
> 赞同：110
> 
> 时间：2012-11-12T10:15:29.400
> 
> 标签：linux, shell, unix, command-line, gnu-coreutils

2个不同长度的未排序文本文件如何并排显示*（在列*中）`shell`

给定`one.txt`和`two.txt`：

```
$ cat one.txt
apple
pear
longer line than the last two
last line

$ cat two.txt
The quick brown fox..
foo
bar 
linux

skipped a line 
```

展示：

```
apple                               The quick brown fox..
pear                                foo
longer line than the last two       bar 
last line                           linux

                                    skipped a line 
```

`paste one.txt two.txt`几乎可以做到这一点，但不能很好地对齐列，因为它只是在第 1 列和第 2 列之间打印一个选项卡。*我知道如何使用 emacs 和 vim 进行此操作，但希望将输出显示到 stdout 以进行管道等。*

我想出的解决方案使用`sdiff`然后管道到 sed 以删除输出`sdiff`添加。

`sdiff one.txt two.txt | sed -r 's/[<>|]//;s/(\t){3}//'`

我可以创建一个函数并将其粘贴在我的`.bashrc`但肯定已经存在此命令（或者可能是*更清洁*的解决方案）？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-11-12T12:44:51.757

You can use `pr` to do this, using the `-m` flag to merge the files, one per column, and `-t` to omit headers, eg.

```
pr -m -t one.txt two.txt 
```

outputs:

```
apple                               The quick brown fox..
pear                                foo
longer line than the last two       bar
last line                           linux

                                    skipped a line 
```

### See Also:

*   **[Print command result side by side](https://askubuntu.com/a/918859/12607)**
*   **[Combine text files column-wise](https://unix.stackexchange.com/questions/16443/combine-text-files-column-wise/16465)**

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-05-08T13:40:53.663

To expand a bit on [@Hasturkun](https://stackoverflow.com/users/20270/hasturkun)'s answer: by default `pr` uses only 72 columns for its output, but it's relatively easy to make it use all available columns of your terminal window:

```
pr -w $COLUMNS -m -t one.txt two.txt 
```

Most shell's will store *(and update)* your terminal's screenwidth in the `$COLUMNS` environment variable, so we're just passing that value on to `pr` to use for its output's width setting.

This also answers [@Matt](https://stackoverflow.com/users/193244/matt)'s question:

> Is there a way for pr to auto-detect screen width?

So, no: `pr` itself can't detect the screenwidth, but we're helping out a bit by passing in the terminal's width via the `-w` option.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-25T06:11:09.003

If you know the input files have no tabs, then using `expand` simplifies [@oyss](https://stackoverflow.com/users/249545/oyss)'s [answer](https://stackoverflow.com/a/13343584/4263262):

```
paste one.txt two.txt | expand --tabs=50 
```

If there could be tabs in the input files, you can always expand first:

```
paste <(expand one.txt) <(expand two.txt) | expand --tabs=50 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-12T10:47:54.813

```
paste one.txt two.txt | awk -F'\t' '{
    if (length($1)>max1) {max1=length($1)};
    col1[NR] = $1; col2[NR] = $2 }
    END {for (i = 1; i<=NR; i++) {printf ("%-*s     %s\n", max1, col1[i], col2[i])}
}' 
```

Using `*` in a format specification allows you to supply the field length dynamically.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-04T14:43:11.040

There is a `sed` way:

```
f1width=$(wc -L <one.txt)
f1blank="$(printf "%${f1width}s" "")"
paste one.txt two.txt |
    sed "
        s/^\(.*\)\t/\1$f1blank\t/;
        s/^\(.\{$f1width\}\) *\t/\1 /;
    " 
```

Under [bash](/questions/tagged/bash "show questions tagged 'bash'"), you could use `printf -v`:

```
f1width=$(wc -L <one.txt)
printf -v f1blank "%${f1width}s"
paste one.txt two.txt |
    sed "s/^\(.*\)\t/\1$f1blank\t/;
         s/^\(.\{$f1width\}\) *\t/\1 /;" 
```

[(Of course @Hasturkun 's solution `pr` is the **most accurate**!)]:

### Advantage of `sed` over `pr`

You can finely choose separation width and or separators:

```
f1width=$(wc -L <one.txt)
(( f1width += 4 ))         # Adding 4 spaces
printf -v f1blank "%${f1width}s"
paste one.txt two.txt |
    sed "s/^\(.*\)\t/\1$f1blank\t/;
         s/^\(.\{$f1width\}\) *\t/\1 /;" 
```

Or, for sample, to mark lines containing `line`:

```
f1width=$(wc -L <one.txt)
printf -v f1blank "%${f1width}s"
paste one.txt two.txt |
    sed "s/^\(.*\)\t/\1$f1blank\t/;
  /line/{s/^\(.\{$f1width\}\) *\t/\1 |ln| /;ba};
         s/^\(.\{$f1width\}\) *\t/\1 |  | /;:a" 
```

will render:

```
apple                         |  | The quick brown fox..
pear                          |  | foo
longer line than the last two |ln| bar 
last line                     |ln| linux
                              |  | 
                              |ln| skipped a line 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-12T12:17:33.753

remove dynamically field length counting from Barmar's answer will make it a much shorter command....but you still need at least one script to finish the work which could not be avoided no matter what method you choose.

```
paste one.txt two.txt |awk -F'\t' '{printf("%-50s %s\n",$1,$2)}' 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-01-12T10:12:55.153

If you want to know the actual difference between two files side by side, use `diff -y`:

```
diff -y file1.cf file2.cf 
```

You can also set an output width using the `-W, --width=NUM` option:

```
diff -y -W 150 file1.cf file2.cf 
```

and to make `diff`'s column output fit your current terminal window:

```
diff -y -W $COLUMNS file1.cf file2.cf 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-29T15:01:00.493

Find below a python based solution.

```
import sys

# Specify the number of spaces between the columns
S = 4

# Read the first file
l0 = open( sys.argv[1] ).read().split('\n')

# Read the second file
l1 = open( sys.argv[2] ).read().split('\n')

# Find the length of the longest line of the first file
n = len(max(l0, key=len))

# Print the lines
for i in  xrange( max( len(l0), len(l1) ) ):

    try:
        print l0[i] + ' '*( n - len(l0[i]) + S) + l1[i]
    except:
        try:
            print ' ' + ' '*( n - 1 + S) + l1[i]
        except:
            print l0[i] 
```

**Example**

```
apple                            The quick brown fox..
pear                             foo
longer line than the last two    bar 
last line                        linux

                                 skipped a line 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-01T11:49:18.667

```
diff -y <file1> <file2>

[root /]# cat /one.txt 
```

```
apple
pear
longer line than the last two
last line

```

```
[root /]# cat /two.txt 
```

```
The quick brown fox..
foo
bar
linux

```

```
[root@RHEL6-64 /]# diff -y one.txt two.txt 
```

```
apple                                                         | The quick brown fox..
pear                                                          | foo
longer line than the last two                                 | bar
last line                                                     | linux

```

# java - 如何在共享首选项的 web 视图中以对齐模式对齐数据

> ID：13341836
> 
> 赞同：0
> 
> 时间：2012-11-12T10:15:43.560
> 
> 标签：java, android

我有一个共同的偏好，其中一段正在存储。该值正确写入共享首选项，我可以从中读取并将其显示到 webview 上；没有错误。

我在 XML 文件中使用了一个 sting 声明，并在 justify 模式下对齐它，我成功地显示了数据。

我的问题是当我动态使用字符串时，如何在对齐模式下将上述文本与 web 视图对齐；

**问题解释**

假设我从用户那里获取了一段数据，或者我在活动中为字符串分配了一个大数据，而不是在 string.xml 文件中，那么应该如何对齐对齐；

下面的代码是我成功地从 string.xml 文件中以 justify 模式显示数据。

```
public class MainActivity extends Activity {
    SharedPreferences pref;
    SharedPreferences.Editor edi;
    String prefname="Test";
    static final  String Id ="Desc";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

             String s=getResources().getString(com.testwebviewalign.R.string.MyDesc);

       //writing to shared 
        pref=getSharedPreferences(prefname, MODE_PRIVATE);
        edi=pref.edit();
        edi.putString(Id,s );
        edi.commit();

        //reading from shared
        pref=getSharedPreferences(new MainActivity().prefname, MODE_PRIVATE);
        String D=pref.getString(new MainActivity().Id, null);

        WebView wv=(WebView)findViewById(com.testwebviewalign.R.id.webView1);
        //wv.setVerticalScrollBarEnabled(true);
        wv.loadData(D, "text/html", "utf-8");

    }

  } 
```

用于字符串声明的 XML 文件

```
 <string name="MyDesc">
       <![CDATA[
        <html>
             <body style="text-align:justify;color:black">
This valuse is for testing the alignment of the android file when using the webview, Actual thing is to convert the local text view activity in to the webview so that we can align text in justify mode. Justify mode that we can align with two sides porerly and text will display in a decen manner and well aligned format. Only with webview its posiible in native android activity. Thak you
            </body>
        </html>
       ]]>

    </string> 
```

我需要的是如何在对齐模式下显示数据，当它没有从 xml 文件中读取时，假设它是在如下代码中声明和初始化的

```
public class MainActivity extends Activity {
    SharedPreferences pref;
    SharedPreferences.Editor edi;
    String prefname="Test";
    static final  String Id ="Desc";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

             String s="This valuse is for testing the alignment of the android file when using the webview, Actual thing is need to convert the local text view activity in to the webview so that we can align text in justify mode. Justify mode is sthat we can align with two sides porerly and text will display in a decen manner and well aligned format. ONly with webview its posiible in native android activity. Thak you";

       //writing to shared 
        pref=getSharedPreferences(prefname, MODE_PRIVATE);
        edi=pref.edit();
        edi.putString(Id,s );
        edi.commit();

        //reading from shared
        pref=getSharedPreferences(new MainActivity().prefname, MODE_PRIVATE);
        String D=pref.getString(new MainActivity().Id, null);

        WebView wv=(WebView)findViewById(com.testwebviewalign.R.id.webView1);
        //wv.setVerticalScrollBarEnabled(true);
        wv.loadData(D, "text/html", "utf-8");

    }

  } 
```

请帮忙，感谢您的帮助；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:23:50.533

在我找到了我自己的解决方案时，我使用了以下代码；只需通过此更改 webview 显示字符串

```
wv.loadData("<html><body style=text-align:justify;color:black>"+D+"</body></html>", "text/html", "utf-8"); 
```

我们可以直接添加 HTML 标签以在 web 视图中设置文本样式。谢谢大家。

# asp.net-mvc-3 - 读取条形码并将信息发送到 ASP.NET

> ID：13341837
> 
> 赞同：0
> 
> 时间：2012-11-12T10:15:45.153
> 
> 标签：asp.net-mvc-3, barcode-scanner

我有一个要在商店中使用的应用程序，员工需要读取商品的条形码并将其详细信息显示在屏幕上。该应用程序将在 ASP.NET 中构建。

这是可行的吗？我需要第三方库吗？像 ASP.NET 这样的服务器端可以读取客户端条形码吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:23:12.837

条形码阅读器通常在系统中作为键盘可见，因此在您的应用程序中拥有一个文本字段就足够了 - 用户只需扫描代码，同时专注于该文本字段。

如果您想与读者进行更直接的联系，则需要一些*ActiveX*驱动程序才能通过浏览器客户端代码访问。

# serena - Serena Dimensions - “工作区根”删除

> ID：13341838
> 
> 赞同：2
> 
> 时间：2012-11-12T10:15:47.273
> 
> 标签：serena

我已从 Serena Dimenions 将软件基线的副本检索到我 PC 上的本地文件夹中进行测试，但在某些情况下，我不需要在我的机器上保留副本，因此我将其删除。当我这样做时，我收到错误消息“此文件夹是工作区根目录。您要继续删除吗”。

谁能告诉我维度中的“工作区根”是什么，如果我删除它是否可能会导致任何问题？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T17:53:04.560

使用维度时，您可以将文件签出或获取到工作区。顶层目录是包含所有项目/基线文件和 Dimension 元数据的地方。

如果您删除本地文件，Dimensions 会发出警告，以确保您知道该区域在 Dimensions 配置控制之下。

如果文件夹/工作区位于维度下，则删除可能涉及维度服务器上的删除。只要您不交付/提交删除，就应该没问题。

如果您真的想从服务器中删除文件，那么删除 CM 文件与特定项目/基线之间的关系是另一回事（可能在Dimensions 客户端中处理得更好）。它们最终仍将保留在 CM 中（如果您愿意，则为孤立文件），但不再作为该项目的一部分直接可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T10:03:22.650

从Dimensions 更新您的工作区将通过目录结构写入元数据。当您尝试删除结构时会检测到这一点。您始终可以通过右键单击文件夹并在“维度”上下文菜单中选择“与源代码管理解除关联”来删除元数据。嗯......只是注意到这是一个相当古老的问题。

# asp.net - 如何防止 Facebook 应用程序被机器人使用

> ID：13341839
> 
> 赞同：0
> 
> 时间：2012-11-12T10:15:50.987
> 
> 标签：asp.net, facebook, security, captcha

我需要构建一个 Facebook iFrame 应用程序来运行用户通过在网站上进行各种活动来赚取积分的比赛。比赛的获胜者将是得分最多的用户。
如何防止有人使用机器人在网站上获取积分？我不认为使用验证码真的可行，因为网站有很多不同的区域用户可以赚取积分，我不希望用户每次进入网站时都必须进行验证码。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:39:20.947

您可以分析进行活动之间的时间，如果太规律则禁止该用户。您还可以分析执行中的模式，例如“单击 A，最多等待 0.5 秒，然后 B，然后重复”。

当然，这不是万无一失的（机器人可能会在操作之间添加随机时间延迟），但如果任务足够琐碎，可以由机器人执行，并且您不想要 Captcha 式的人工验证，这可能就足够了。这可能只对积分最多的用户值得做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:22:57.887

您可以依赖[Facebook 签名请求](https://developers.facebook.com/docs/howtos/login/signed-request/)- 它存储有关每个登录用户的唯一信息。所以一个单一的场景是检查Facebook上下文的存在（签名请求的存在）一些用户ID等。如果没有这样的想法，你应该重定向到应用程序的主页。

# php - Codeigniter：逐步加载视图

> ID：13341840
> 
> 赞同：0
> 
> 时间：2012-11-12T10:15:51.897
> 
> 标签：php, performance, codeigniter

我最近将我的抓取/解析 PHP 代码移到了 Codeigniter。它使用*cURL*和*SimpleHtmlDom*类从目标 URL 检索数据，这些数据随后由模型函数几个其他库处理。

有**几个对外部 Web 和 API 的请求，**因此原始 PHP 脚本**最多需要 20 秒**才能加载完整的页面，但**没关系**，因为 PHP 被分成几个块，并且当较低的进程正在运行时，页面已经呈现HTML，在处理和显示其余数据时，用户可以阅读该 HTML。

切换到 Codeigniter 的问题是，**在完全执行 Controller 脚本之前不会呈现 HTML**，即使数据进程被拆分为块并由单独的 View 加载也是如此。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class HomePage extends CI_Controller {

public function index()
{
    $this->load->library('simple_html_dom');
    $this->load->library('library1');
    $this->load->library('library2');
    $this->load->library('library3');

    $this->load->model('HomePage_model');
    $this->load->view('templates/header');

    $targeturl = 'http://www.example.com';

      $variable1 = library1::method1($targeturl);
      $variable2 = $this->HomePage_model->method2($targeturl);
      $data1 = array('variable1' => $variable1, 'variable2' => $variable2);

    $this->load->view('first_set_of_data', $data1);

      $variable3 = library2::method2($targeturl);
      $variable4 = $this->HomePage_model->method3($targeturl);
      $data2 = array('variable3' => $variable3, 'variable4' => $variable4);

    $this->load->view('second_set_of_data', $data2);

      $curlinfo = $this->HomePage_model->cURLmethod($targeturl);
      $data3 = array('curlinfo' => $curlinfo);

    $this->load->view('third_set_of_data', $data3);

    $this->load->view('sidebar');
    $this->load->view('templates/footer');
    }
}

/* End of file homepage.php */
/* Location: ./application/controllers/homepage.php */ 
```

我并没有试图优化我的代码以使其运行得更快，它已经被修改了好几次......我想做的是随着每个视图对应的数据准备好而**逐步加载视图**，而正在处理其他视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:58:37.760

听起来像是一个不优雅的解决方案的问题。我想你被迫砍掉所有视图，以便在另一个视图中不调用视图，并根据请求加载每个相关视图。

因此，而不是`views/index.php`：

```
<html>
<body>
<? $this->load->view('content') ?>
</body>
</html> 
```

你会有`view/index_start.php`：

```
<html>
<body> 
```

和`view/index_end.php`：

```
</body>
</html> 
```

在它们之间，在每个请求之后加载单独的视图。从控制器加载所有视图。同样，*不*推荐这种设计。

```
echo $this->load->view('file', array(), TRUE) 
```

# sml - 为变量列表赋值

> ID：13341848
> 
> 赞同：0
> 
> 时间：2012-11-12T10:16:20.673
> 
> 标签：sml, smlnj

我想输入两个长度相等的列表并将一个列表的值分配给另一个列表的变量。我希望它自动实现第一个列表作为变量列表，第二个作为值。例如，我想为`[1,2,3,4,5,6]`变量列表中的元素分配值`[9,10,11,12,13,14]`，即 1 作为 9 的值，2 作为列表中的 10 的值。

```
exception error

fun assign([],_) = raise error
  | assign(_,[]) = raise error
  | assign(l::ls,b::ls) = (val l=b ; assign(ls,bs)); 
```

我知道有几个问题。首先，函数应该返回值对吗？关于我如何处理的任何建议？我的意思是创建一个有意义的函数，根据需要分配值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:03:54.933

赋值对不可变类型没有意义。我假设你想这样做：

*有一个列表和一个使用默认值初始化 `int` `[1,2,3,4,5,6]`的 int[引用](http://www.cs.cornell.edu/courses/cs312/2008sp/recitations/rec15.html)`[ref 0, ref 0, ref 0, ref 0, ref 0, ref 0]`列表。您想更新对`[ref 1, ref 2, ref 3, ref 4, ref 5, ref 6]`.*

你只需要对你的函数做一个小的修改：

```
fun assign([], []) = ()
  | assign(_, []) = raise error
  | assign(_, []) = raise error
  | assign(l::ls, r::rs)= (r := l ; assign(ls, rs)) 
```

该函数返回`unit`并在调用之后`assign`，引用列表包含新值。

但是，对于这些具有破坏性更新的场景，最好使用[值数组](http://www.standardml.org/Basis/array.html)。

# git - Git 推送失败，因为一切都是最新的

> ID：13341851
> 
> 赞同：1
> 
> 时间：2012-11-12T10:16:24.573
> 
> 标签：git, push

我在使用 git 时遇到了一些奇怪的问题。我已经添加并提交了我的更改。但是当推送到远程仓库时：我被告知一切都是最新的，但事实并非如此。我尝试按照[此处](https://stackoverflow.com/questions/999907/git-push-says-everything-up-to-date-even-though-i-have-local-changes)的指示进行操作，但它仍然无法正常工作，看来我不必处理分离的头部。（有关信息，我正在处理的分支用于推送到单独的遥控器）。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:17:14.653

看来您需要指定远程的名称，以便推送您的更改。

即，`.git/config`它应该是这样的：

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = ssh://git.company-repo.com/repo.git

[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:20:35.507

```
git remote -v 
```

查看包含 (push) 的链接的输出，例如

```
origin  git@github.com:username/repo_name.git (fetch)
origin  git@github.com:username/repo_name.git (push) 
```

如果不是这种情况，您需要通过执行以下命令来添加遥控器：

```
git remote add [repo_name] git@github.com:username/repo_name.git 
```

然后尝试`git pull`

# list - 使用 Python 将字符串转换为嵌套列表

> ID：13341853
> 
> 赞同：1
> 
> 时间：2012-11-12T10:16:29.767
> 
> 标签：list, python-3.x

简短的问题，如何使用 Python 进行这种转换？

```
a["1-3-6-3-6"] ---> a[1][3][6][3][6] 
```

我有一个嵌套列表，我希望能够直接从传递给方法的字符串参数中获取该项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:28:01.307

```
>>> path = '1-3-6-3-6'
>>> element = a
>>> for segment in path.split('-'):
        element = element[int(segment)] 
```

之后，`element`等于`a[1][3][6][3][6]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:22:53.550

这可能是你想要的

```
>>> i="1-3-6-3-6"
>>> b=i.split("-")
>>> b
['1', '3', '6', '3', '6'] 
```

然后，您可以使用 b 中的索引通过递归下降到嵌套列表中。

# java - 如何在 Java Swing 中使用鼠标平移图像

> ID：13341857
> 
> 赞同：6
> 
> 时间：2012-11-12T10:16:55.803
> 
> 标签：java, image, swing, point, jviewport

我正在创建一个 Java 应用程序，它允许用户查看图像并使用鼠标平移图像。为了实现图像的平移，我使用了JViewports`mouseClicked`和事件的组合。`mouseDragged`大部分代码在 mouseDragged 方法中

```
public void mouseDragged(MouseEvent e, WindowWrapper w) {
    final JViewport vp = someFieldViewPort;

    //Getting the point that the mouse is dragged to to
    Point cp = e.getPoint();
    final Point vPoint = vp.getViewPosition();

    //I found the image went off the content to show the white border so I included this 
    // Here pp is a field that I sent when the mouse is clicked in a separate method

    if(vPoint.getX()+pp.x-cp.x>=0 & vPoint.getY()+pp.y-cp.y>=0)
        vPoint.translate(pp.x-cp.x, pp.y-cp.y);
    else if(vPoint.getX()+pp.x-cp.x>=0 & vPoint.getY()+pp.y-cp.y<0)
        vPoint.translate(pp.x-cp.x, (int) -vPoint.getY());
    else if(vPoint.getX()+pp.x-cp.x<0 & vPoint.getY()+pp.y-cp.y>=0)
        vPoint.translate((int) -vPoint.getX(), pp.y-cp.y);

    //finally set the position of the viewport
    vp.setViewPosition(vPoint);
    vp.repaint();
} 
```

虽然这可行，但我觉得必须有一种更简单的方法来完成所有这些工作。如果不是全部，是否可以替换防止视口离开图像到周围边框的代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T13:11:12.487

尝试使用`scrollRectToVisible(...)`方法而不是`JViewport#setViewPosition(...)`：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import javax.swing.*;
public class HandScrollDemo {
  static class HandScrollListener extends MouseAdapter {
    private final Point pp = new Point();
    @Override public void mouseDragged(MouseEvent e) {
      JViewport vport = (JViewport)e.getSource();
      JComponent label = (JComponent)vport.getView();
      Point cp = e.getPoint();
      Point vp = vport.getViewPosition();
      vp.translate(pp.x-cp.x, pp.y-cp.y);
      label.scrollRectToVisible(new Rectangle(vp, vport.getSize()));
      //vport.setViewPosition(vp);
      pp.setLocation(cp);
    }
    @Override public void mousePressed(MouseEvent e) {
      pp.setLocation(e.getPoint());
    }
  }
  public JComponent makeUI() {
    JLabel label = new JLabel(new Icon() {
      TexturePaint TEXTURE = makeCheckerTexture();
      @Override public void paintIcon(Component c, Graphics g, int x, int y) {
        Graphics2D g2 = (Graphics2D)g.create();
        g2.setPaint(TEXTURE);
        g2.fillRect(x,y,c.getWidth(),c.getHeight());
        g2.dispose();
      }
      @Override public int getIconWidth()  { return 2000; }
      @Override public int getIconHeight() { return 2000; }
    });
    label.setBorder(BorderFactory.createLineBorder(Color.RED, 20));
    JScrollPane scroll = new JScrollPane(label);
    JViewport vport = scroll.getViewport();
    MouseAdapter ma = new HandScrollListener();
    vport.addMouseMotionListener(ma);
    vport.addMouseListener(ma);
    return scroll;
  }
  private static TexturePaint makeCheckerTexture() {
    int cs = 20;
    int sz = cs*cs;
    BufferedImage img = new BufferedImage(sz,sz,BufferedImage.TYPE_INT_ARGB);
    Graphics2D g2 = img.createGraphics();
    g2.setPaint(Color.GRAY);
    for(int i=0; i*cs<sz; i++) { for(int j=0; j*cs<sz; j++) {
      if((i+j)%2==0) { g2.fillRect(i*cs, j*cs, cs, cs); }
    }}
    g2.dispose();
    return new TexturePaint(img, new Rectangle(0,0,sz,sz));
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() { createAndShowGUI(); }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new HandScrollDemo().makeUI());
    f.setSize(320, 320);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T10:22:50.667

我会以不同的方式来做。我可能会定义一个名为`Image`或类似的对象。它将定义一个`BufferedImage`和两个`int`值：`x`和`y`。

该`Image`对象还将有一个`draw()`方法，该方法只知道如何将图像绘制到该位置的`Graphics2D`对象。`x, y`

在鼠标事件上，我会修改对象内部和我要调用的组件的`x`和`y`值。`Image``paint``image.draw(g2)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T13:48:46.683

+1 @Dans 回答。

这是我制作的一个示例，基本上使用带有添加`MouseAdapter`和覆盖`mousePressed()`和`mouseDragged()`方法的 JPanel。`mouseDragged()`方法将相应地增加图像的坐标`x`和`y`坐标，并通过`paintComponent(...)`of`JPanel`和绘制`Graphics2D#drawImage(Image img,int x,int y,ImageObserver io)`。

在点击和拖动鼠标之前：

![在此处输入图像描述](../Images/3ebd4d1cadf89f4bd9e8f2dbd6b78904.png)

单击并拖动鼠标后：

![在此处输入图像描述](../Images/9027f4db74908e1e6f2db5f283af75ca.png)

```
//necessary imports
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Test {

    /**
     * Default constructor
     */
    public Test() {
        initComponents();
    }

    /**
     * Initialize GUI and components (including ActionListeners etc)
     */
    private void initComponents() {
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);

        PanPanel pp = null;
        try {
            pp = new PanPanel(ImageIO.read(new URL("http://www.sellcar.co.za/wp-content/uploads/2011/01/Porsche_911_Turbo.jpg")));
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        frame.add(pp);
        //pack frame (size JFrame to match preferred sizes of added components and set visible
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        /**
         * Create GUI and components on Event-Dispatch-Thread
         */
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    //set nimbus look and feel
                    for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            UIManager.setLookAndFeel(info.getClassName());
                            break;
                        }
                    }
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e) {
                    e.printStackTrace();
                }
                //create GUI instance
                Test test = new Test();
            }
        });
    }
}

class PanPanel extends JPanel {

    private int x, y;
    private int width = 400, height = 400;
    BufferedImage img;
    private final static RenderingHints textRenderHints = new RenderingHints(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    private final static RenderingHints imageRenderHints = new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    private final static RenderingHints renderHints = new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    static int startX, startY;

    public PanPanel(BufferedImage img) {
        x = 0;
        y = 0;
        this.img = img;

        addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent me) {
                super.mousePressed(me);
                startX = me.getX();
                startY = me.getY();
            }
        });

        addMouseMotionListener(new MouseMotionAdapter() {
            @Override
            public void mouseDragged(MouseEvent me) {
                super.mouseDragged(me);

                if (me.getX() < startX) {//moving image to right
                    x -= 2;
                } else if (me.getX() > startX) {//moving image to left
                    x += 2;
                }

                if (me.getY() < startY) {//moving image up
                    y -= 2;
                } else if (me.getY() > startY) {//moving image to down
                    y += 2;
                }
                repaint();
            }
        });
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);
        Graphics2D g2d = (Graphics2D) grphcs;

        //turn on some nice effects
        applyRenderHints(g2d);

        g2d.drawImage(img, x, y, null);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }

    public static void applyRenderHints(Graphics2D g2d) {
        g2d.setRenderingHints(textRenderHints);
        g2d.setRenderingHints(imageRenderHints);
        g2d.setRenderingHints(renderHints);
    }
} 
```

# c# - LINQ 连接查询（表之间的引用可以为空）

> ID：13341858
> 
> 赞同：3
> 
> 时间：2012-11-12T10:16:56.883
> 
> 标签：c#, linq, entity-framework, nullable

我有 3 张桌子。

例如**客户**、**公司**和**地址**。

*   客户已获得公司的参考。

*   公司有 2 个可空的地址引用（账单和运输），所以地址在某些情况下可能不存在。

我需要进行连接查询，但如果 when`Company.BillingAddress`或`Company.ShippingAddress`equals `null`，我不会得到所有数据）。

我试过了（但它是错误的查询）：

```
var res = (from client in context.Clients
    join clientCompany in context.Companies 
    on client.ClientCompanyId equals clientCompany.Id

    into clientCompanyJoin

    from company in clientCompanyJoin
    join addressBilling in context.Addresses
    on company.BillingAddressId equals addressBilling.Id

    join addressShipping in context.Addresses
    on company.ShippingAddressId equals addressShipping.Id

    select new
    {
        Client = client,
        Company = company,
        BillingAddress = ???????
        ShippingAddress = ???????
    }
); 
```

你能帮我做一个连接查询或解释怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:33:36.793

试试这段代码片段：

```
var res = (from client in context.Clients
            join clientCompany in context.Companies 
            on client.ClientCompanyId equals clientCompany.Id
            into clientCompanyJoin
            from company in clientCompanyJoin
            join addressBilling in context.Addresses
            on company.BillingAddressId equals addressBilling.Id
            where !String.IsNullOrEmpty(addressBilling.Address)
            join addressShipping in context.Addresses
            on company.ShippingAddressId equals addressShipping.Id
            where !String.IsNullOrEmpty(addressShipping.Address)
            select new
            {
                Client = client,
                Company = company,
                BillingAddress = addressBilling.Address,
                ShippingAddress = addressShipping.Address
            }); 
```

**添加：**根据您的评论，这是您需要的一段代码片段。您现在可以拥有您的客户*和*公司*数据*，即使`ShippingAddressId`或`BillingAddressId`与.`null``Left Join``SQL`

```
var res = (from client in context.Clients
            join company in context.Companies 
            on client.ClientCompanyId equals company.Id
            join addressBilling in context.Addresses
            on company.BillingAddressId equals addressBilling.Id 
            into addrBillingGroup
            from gAddrBilling in addrBillingGroup.DefaultIfEmpty() // left join
            join addressShipping in context.Addresses
            on company.ShippingAddressId equals addressShipping.Id 
            into addrShippingGroup
            from gAddrShipping in addrShippingGroup.DefaultIfEmpty() // left join
            select new
            {
                Client = client,
                Company = company,
                BillingAddress = 
                    gAddrBilling == null ? null : gAddrBilling.Address,
                ShippingAddress = 
                    gAddrShipping == null ? null : gAddrShipping.Address
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:26:05.307

我猜你想做一个外部连接。以下是如何在“Northwind”数据库中为客户和订单执行此操作的示例：

```
var ctx = new NorthwindDataContext();
var customers = from c in ctx.Customers
    join o in ctx.Orders
    on c.CustomerID equals o.CustomerID into inJoin
    from outJoin in inJoin.DefaultIfEmpty()
    orderby c.CustomerID, outJoin.OrderID
    select new
    {
        c.CustomerID,
        c.CompanyName,
        OrderID = (int?)outJoin.OrderID,
        OrderDate = (DateTime?)outJoin.OrderDate
    }; 
```

# java - 如何自动化一系列涉及 Eclipse Ant 构建、运行配置和批处理文件的操作？

> ID：13341859
> 
> 赞同：2
> 
> 时间：2012-11-12T10:17:00.613
> 
> 标签：java, eclipse, ant, automation

在正常的一天中，我多次运行以下序列，希望将其自动化以能够通过单击/键盘组合键运行它。

1.  蚂蚁构建 X
2.  蚂蚁构建 Y
3.  启动一个批处理文件（如果重要，它会启动 Jboss）
4.  等待特定行显示在命令行输出中。
5.  在 Eclipse 中启动特定的调试配置
6.  在 Eclipse 中启动特定的运行配置

批处理文件已经使用键盘快捷键运行，我想我也可以自动化下一个 - 但是我怎样才能将它们绑定到 Eclipse 部分？

谢谢 ！

（我使用的是 Windows 7，Eclipse Juno）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:24:19.470

我认为默认情况下这是不可能的（尽管自定义插件可能会对您有所帮助）。

1-4 可以通过创建执行封装这些任务的批处理文件的外部运行配置来完成。

# r - 在 R 中创建多个数据集

> ID：13341860
> 
> 赞同：2
> 
> 时间：2012-11-12T10:17:15.607
> 
> 标签：r, dataframe

我有一个带有 5 个变量（`v1, v2, v3, v4, v5`）的巨大 data.frame。我需要基于单个变量创建几个子集。例如：

```
DATA
v1   v2    v3 ... 
1    1231  0.1
1    2653  0.3
1    4545  0.4
2    4545  0.6
2    3345  0.1
2    5675  0.7
3    6754  0.2
3    9989  0.85
3    3456  0.4
.
.
.
70000
70000
70000 
```

我想使用一个函数为 v1 上的每个值创建子集，该函数可以轻松地以自动方式生成每个数据集，因为我有超过 70000 个该变量的测量值。然后，一旦我有了数据集，我想对 v2 和 v3 执行相关性，并在单独的列中输出 p 值和 rho。抱歉，我还没有尝试任何命令，但我在理解如何生成函数时遇到了麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:22:40.310

这是一个 R Base 解决方案

```
DF <- read.table(text="v1   v2    v3 
1    1231  0.1
1    2653  0.3
1    4545  0.4
2    4545  0.6
2    3345  0.1
2    5675  0.7
3    6754  0.2
3    9989  0.85
3    3456  0.4", header=TRUE)

# Correlations and P-values
Result <- sapply(split(DF[,-1], DF$v1), function(x)
        c(cor.test(x$v2, x$v3)$estimate, P.val=cor.test(x$v2, x$v3)$p.value))

Result
              1         2         3
cor   0.9632826 0.9393458 0.6717314
P.val 0.1730489 0.2228668 0.5311018 
```

如果您想将这些`Result`s 添加到原始 data.frame 然后使用`transform()`

```
transform(DF, 
          correlation=rep(Result[1,], table(DF[,1])),
          Pval=rep(Result[2,], table(DF[,1])))
  v1   v2   v3 correlation      Pval
1  1 1231 0.10   0.9632826 0.1730489
2  1 2653 0.30   0.9632826 0.1730489
3  1 4545 0.40   0.9632826 0.1730489
4  2 4545 0.60   0.9393458 0.2228668
5  2 3345 0.10   0.9393458 0.2228668
6  2 5675 0.70   0.9393458 0.2228668
7  3 6754 0.20   0.6717314 0.5311018
8  3 9989 0.85   0.6717314 0.5311018
9  3 3456 0.40   0.6717314 0.5311018 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:33:45.953

该`plyr`包有一些很好的功能来执行这种分析，最重要的是现在`ddply`：

```
res = ddply(DF, .(v1), function(sub_data) {
   cor_result = cor.test(sub_data$v2, sub_data$v3)
   return(data.frame(p.value = cor_result$p.value, rho = cor_result$estimate))
})

> res
  v1   p.value       rho
1  1 0.1730489 0.9632826
2  2 0.2228668 0.9393458
3  3 0.5311018 0.6717314 
```

请注意，您需要使用`cor.test`才能获得 p 值。

# java - @ManyToMany 启动 LazyInitializationException

> ID：13341861
> 
> 赞同：0
> 
> 时间：2012-11-12T10:17:16.680
> 
> 标签：java, hibernate, jpa, many-to-many, lazy-evaluation

出于某些测试目的，我试图让 JUnit 测试抛出 LazyInitializationException。

我的情况是我有 3 个实体

```
@Entity(name = "Role")
public class Role {
    @LazyCollection(LazyCollectionOption.TRUE)
    @ManyToMany(mappedBy = "roles", fetch=FetchType.LAZY)
    private Set<AppUser> appUsers;
    ...

}

@Entity(name = "Group")
public class Group {
    @LazyCollection(LazyCollectionOption.TRUE)
    @ManyToMany(mappedBy = "groups", fetch=FetchType.LAZY)
    private Set<AppUser> appUsers;
    ...
}

@Entity(name = "AppUser")
public class AppUser {
    @LazyCollection(LazyCollectionOption.TRUE)
    @ManyToMany(fetch= FetchType.LAZY)
    @JoinTable(name = "APPUSER_ROLE", joinColumns = @JoinColumn(name = "USER_ID", referencedColumnName = "ID"), inverseJoinColumns = @JoinColumn(name = "ROLE_ID", referencedColumnName = "ID"))
    private Set<Role> roles;
    ...

    @LazyCollection(LazyCollectionOption.TRUE)
    @ManyToMany(fetch= FetchType.LAZY)
    @JoinTable(name = "APPUSER_GROUP", joinColumns = @JoinColumn(name = "USER_ID", referencedColumnName = "ID"), inverseJoinColumns = @JoinColumn(name = "GROUP_ID", referencedColumnName = "ID"))
    private Set<Group> groups;
    ...

} 
```

我生成了一些测试数据，其中所有这 3 个数据都与关系正确地保存在数据库中。然后我提交交易。

但随后我尝试使用相同的测试方法读取`Role`（基于 id），但我也读取了所有其他相关实体（似乎急切地加载）。为什么会这样？我怎么来`LazyInitializationException`？

**编辑**：好的，我对一般描述不感兴趣，而是需要一个代码示例，因为我无法在我的情况下启动它。一般描述并不能解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:35:02.223

> 我怎样才能来到 LazyInitializationException？

当你有：

1.  延迟加载的实体成员（例如 OneToMany 或 ManyToMany）
2.  没有活动事务（实体已分离）
3.  该成员尚未加载
4.  您尝试访问实体成员，这应该会触发延迟加载，但这是不可能的，因为实体已分离

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:51:20.317

问题在于，即使我在测试方法中提交了事务，我也必须关闭 EntityManager 并再次重新打开它以`LazyInitializationException`在我的设置中触发。

最后我得到了以下实体代码：

```
@Entity(name = "Role")
public class Role {
    @ManyToMany(mappedBy = "roles")
    private Set<AppUser> appUsers;
    ...

}

@Entity(name = "Group")
public class Group {
    @ManyToMany(cascade = {CascadeType.PERSIST})
    @JoinTable(name = "GROUP_APPUSER", joinColumns = @JoinColumn(name = "GROUP_ID", referencedColumnName = "ID"), inverseJoinColumns = @JoinColumn(name = "USER_ID", referencedColumnName = "ID"))
    private Set<AppUser> appUsers;
    ...
}

@Entity(name = "AppUser")
public class AppUser {
    @ManyToMany(cascade = {CascadeType.PERSIST})
    @JoinTable(name = "APPUSER_ROLE", joinColumns = @JoinColumn(name = "USER_ID", referencedColumnName = "ID"), inverseJoinColumns = @JoinColumn(name = "ROLE_ID", referencedColumnName = "ID"))
    private Set<Role> roles;
    ...

    @ManyToMany(mappedBy = "appUsers")
    private Set<Group> groups;
    ...

} 
```

所以而不是：

```
Group <- AppUser -> Role 
```

我有：

```
Group -> AppUser -> Role 
```

即使很难，也没有必要，因为一开始就出现了延迟加载（`Group -> AppUser`）延迟问题。

而测试代码本身，最​​重要的部分是：

```
em.getTransaction().begin();
em.persist(group);
em.getTransaction().commit();
em.close();

// reinit em
...

// load group from DB and afterwards close em
em.close();
...
// following throws LazyInitializationException :)
group.getAppUsers().iterator().next(); 
```

# html - 如果内容 div 短于或长于窗口高度，则在底部粘贴页脚

> ID：13341868
> 
> 赞同：1
> 
> 时间：2012-11-12T10:17:45.450
> 
> 标签：html, css, footer

已经有很多关于这个的问题，但我没有找到完全解决这个问题的问题，也没有找到答案。

我有 3 个 div：

```
<div id="header">
  Header
</div>
<div id="content">
  Content
</div>
<div id="footer">
  Footer
</div> 
```

我想：

1.  始终停留在`footer`页面底部。

2.  如果所有 3 个 div的`footer`大小加在一起小于窗口高度，则位于窗口底部。

3.  如果有足够的东西`content` `div`使整个页面高于窗口高度，则页面应该扩展，但不能以页脚覆盖和隐藏部分内容的方式。

我已经看到了针对 2 或 3 的答案，但不是两者兼而有之。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:03:09.907

我向您介绍[CSS 粘滞页脚](http://www.cssstickyfooter.com)！

去阅读并学习代码。它非常强大，并且完全按照您的描述进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:32:38.967

试试这种风格。希望这是你想要的。

```
#header
{
    position: absolute;
    height: 100px;
    width: 100%;
}

#content
{
    position: absolute;
    top: 100px;
    bottom: 100px;
    overflow-y: scroll;
    width: 100%;
}
#footer
{        
    bottom: 0;
    height: 100px;
    position: fixed;
    width: 100%;
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:04:43.010

HTML：

```
<div id="main">
<div id="header">Header</div>
<div id="content">
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium mque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
</div>
<div id="footer">Fixed FOOTER</div>
</div> 
```

CSS：

```
body{width:100%; background:#FFFFFF; font:Verdana, Geneva, sans-serif; font-size:16px; line-height:20px;}
#main{width:960px; margin:0 auto; background:#999999;}
#header{width:reminder; background:#0000FF; height:60px; padding:20px;}
#content{width:reminder; background:#CCC; color:#333333; padding:50px;}
#footer{width:940px; position:fixed; bottom:0; background:#000; color:#fff; padding:10px;} 
```

猜猜它对你有帮助。

# mysql - 插入触发器之前的mysql

> ID：13341869
> 
> 赞同：0
> 
> 时间：2012-11-12T10:17:46.290
> 
> 标签：mysql, mysql-5.1

我尝试创建以下触发器：

```
DELIMITER $$

CREATE trigger insert_processor
BEFORE INSERT ON tbl
FOR EACH ROW BEGIN

set new.val = trim(new.val);
set new.val2 = upper(new.val);

END$$ 
```

它失败并显示以下错误消息

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 8 
```

可能是什么原因？

MySql服务器版本：`5.1.40-community`

客户：`phpMyAdmin 3.3.8`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:31:24.183

看看你的 phpmyadmin 版本中是否有 DILIMITER 字段，就在 SQL 编辑器的下方。在那里设置你的分隔符，例如 - '$$'，然后编写这个 SQL 代码 -

```
CREATE trigger insert_processor
BEFORE INSERT ON tbl
FOR EACH ROW BEGIN

set new.val = trim(new.val);
set new.val2 = upper(new.val);

END$$ 
```

# linux - 发出信号并中断比较

> ID：13341870
> 
> 赞同：44
> 
> 时间：2012-11-12T10:18:00.003
> 
> 标签：linux, signals, posix, interrupt, isr

根据各种参考资料，我对**Linux 中信号的主观定义是“用于通知进程发生特定事件的触​​发器。这里的事件可能是指软件异常。此外，信号也可能用于 IPC 机制。 "** 我的问题是

*   我认为只有异常（软件中断）是通过信号通知的。硬件中断的情况呢？
*   信号的各种来源是什么？在我看来，内核始终是信号的来源。（用于 IPC 时除外）
*   信号处理程序和 ISR 之间的区别？
*   信号阻塞和中断屏蔽的区别？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-11-14T14:29:23.113

中断可以看作是 CPU 和 OS 内核之间的一种通信方式。信号可以看作是操作系统内核和操作系统进程之间的一种通信方式。

中断可能由 CPU（异常 - 例如：除零、页面错误）、设备（硬件中断 - 例如：输入可用）或 CPU 指令（陷阱 - 例如：系统调用、断点）启动。它们最终由 CPU 管理，它“中断”当前任务，并调用 OS 内核提供的 ISR/中断处理程序。

信号可以由操作系统内核（例如：SIGFPE、SIGSEGV、SIGIO）或进程（kill()）发起。它们最终由操作系统内核管理，将它们传递给目标线程/进程，调用通用操作（忽略、终止、终止和转储核心）或进程提供的信号处理程序。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-11-21T11:25:24.527

## 我认为只有异常（软件中断）是通过信号通知的。硬件中断的情况呢？

从哪里开始？有很多不同的情况。请记住，中断是调用 CPU 的硬件。中断本质上由“需要注意的硬件”和一个介于 0 到 255 之间的数字组成。信号类似但有 2 个参数：目标进程 ID 和一个 int（32 位或 64 位，取决于架构）。硬件中断总是在内核空间处理，而信号只是用户空间的东西。内核出于各种原因使用硬件中断。

与信号无关的硬件中断的一个示例是 VM 子系统。您知道在现代操作系统上，您可以分配比系统上实际存在的内存更多的内存。那么这是如何工作的呢？好吧，它通过利用硬件中断来工作。当您分配内存时，内核会记下它，但实际上根本不做任何事情。然后，当你尝试访问分配的内存时，cpu 会报错“但是这个内存不存在”，这会产生一个硬件中断。内核将查看它的注释，发现您确实请求了该内存，清除一些它有空闲的内存，并告诉 cpu 将该内存“映射”到预期的位置。

多任务处理也是通过利用硬件中断来实现的。所有驱动程序通常通过解释中断来工作。

信号用于进程之间的通信。linux 守护进程在 SIGHUP 上重新加载其配置的常见行为是非常“信号-y”的东西，受到各地系统管理员的喜爱和憎恨。例如，当您修改 apache 配置时，该过程不会自动开始使用新配置。您可能会终止并重新启动该过程，但这意味着您的 http 服务器将在 4-5 秒内停止运行。因此，您可能会“killall -HUP apache”。这将在 apache 进程中调用一个子例程，这将使它重新读取它的配置文件。

进程挂起是通过信号 (ctrl-z)、进程中断 (ctrl-c)、进程退出 (ctrl-)、终端断开连接 (sighup) 来实现的……更完整的列表可以在这里找到：[http://en .wikipedia.org/wiki/Unix_signal](http://en.wikipedia.org/wiki/Unix_signal)。

一个结论可能是它们有点相似，但它们在不同的级别上运行：硬件中断是，嗯，硬件需要注意，而最低级别的软件需要。通常内核处理所有硬件，并且通知进程在某种程度上独立于硬件中断。对于许多信号，提供了默认处理（例如 ctrl-z、ctrl-c、...），对于其他信号，实现非常依赖于应用程序（例如 SIGHUP）。

说到信号，这些只是软件定义的。他们做任何你想让他们做的事，而且 linux 提供了方便的方法来调用这些子例程。在某些情况下，内核可能会调用一个信号例程（例如 SIGSEGV、SIGCHILD、...），但它几乎不涉及硬件。它们只是在应用程序中触发特定例程的便捷方式。

曾经有一个特殊情况：DOS 21h 中的“OS”中断。这不再使用（尽管仍然有效），但想法是这样的。程序可以触发特定的中断来要求内核执行特定的操作。系统调用的操作（打开文件，关闭套接字，你有什么）。正如我所说，有趣，但不再真正使用。

## 信号的各种来源是什么？在我看来，内核始终是信号的来源。（用于 IPC 时除外）

信号来自进程本身 (SIGABRT)、内核 (SIGSEGV, ...) 或来自其他进程，例如 shell (ctrl-z, ctrl-c, ctrl-\, ...) 或从杀。但是它们可以通过使用 kill libc 函数来自任何其他程序：

```
 #include <sys/types.h>
   #include <signal.h>

   int kill(pid_t pid, int sig); 
```

## 信号处理程序和 ISR 之间的区别？

主要区别在于 ISR 存在于内核空间中，并且必须考虑到整个计算机在执行期间被冻结。这意味着他们可以中断任何进程，以及内核中的任何内容。他们还“阻止了世界”。在处理中断时，不会发生其他任何事情。因此，如果中断处理程序等待某些东西，机器就会冻结。如果中断处理程序进入循环，您唯一的选择是重新启动机器。

ISR 真的很难做到正确。关于它们有很多理论，在 linux 上它们有上半部分和下半部分，具有各种优先级处理、特殊内存分配……这是一个雷区。在 ISR 中朝着错误的方向迈出一步会杀死机器。ISR 中的错​​误会导致数据丢失，甚至可能导致彻底的硬件故障。事实上，从经验来看，仅仅怀疑你可能计划在 ISR 中做错事会立即导致完全不可预测的机器行为。

您不能在 ISR 中使用任何内核工具。打开一个文件，忘记它。分配内存，算了。调用内核的任何其他部分，忘记它（有一些，但只有少数例外）。名单还在继续。

信号只是被调用的特定进程中的函数。信号可能会阻塞（例如 ctrl-z），这将阻止进程继续进行，但例如您的 shell 会话仍会响应。该过程需要考虑到程序的任何部分当然可能已被中断，但它仍然是正常的用户空间。你可以阻塞，你可以循环，你可以打开文件，分配内存，......任何你想要的。

## 信号阻塞和中断屏蔽的区别？

它们非常相似。除了信号阻塞是在每个进程的基础上完成的。在这两种情况下都有不可阻塞的信号，并且有一个 NMI（不可屏蔽中断）（两者都表示严重错误）。

最后，信号和中断正在向内核或特定进程发送一个数字。信号阻塞和中断屏蔽只是意味着告诉系统忽略特定数字。

一个区别是中断屏蔽是在硬件中实现的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T10:35:22.407

信号和中断的行为方式非常相似。不同之处在于信号发生在进程（位于虚拟环境中），而异常是系统范围的。

CPU 将某些故障标记为异常，然后映射到内核传递给进程的信号。内核可以选择对进程隐藏任何异常（例如，对未映射内存的访问通过分页静默修复）。

硬件中断只是一种异常，内核可能会选择将其映射到信号（例如，如果您使用`alarm(2)`）。

内核生成信号以响应各种事件，其中包括异常、I/O 完成、显式用户空间请求……

信号处理程序的行为类似于 ISR——它们可以随时被调用，因此它们不能对程序的状态做出任何假设，就像 ISR 一样——阻塞信号在虚拟地址空间中的行为方式与屏蔽中断相同在物理机上。

# c# - StreamWriter - “\”和“/”之间的区别

> ID：13341875
> 
> 赞同：1
> 
> 时间：2012-11-12T10:18:23.293
> 
> 标签：c#, streamwriter

做streamwriter`\`和when 有什么区别？`/`

例如

**示例 1：**

```
Streamwriter sw = new Streamwriter("/test folder/Output/test.txt"); 
```

和

**示例 2：**

```
Streamwriter sw = new Streamwriter(@"\test folder\Output\test.txt"); 
```

我看到您也需要`@`第二个示例前面的符号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:21:11.997

没有区别，因为 .NET 可以同时识别路径中的[一个](http://msdn.microsoft.com/en-us/library/system.io.path.directoryseparatorchar.aspx)和[另一个](http://msdn.microsoft.com/en-us/library/system.io.path.altdirectoryseparatorchar.aspx)。

但是，由于`\`出现在字符串文字中时具有特殊含义（它是转义序列的开头），因此第二个示例使用[逐字字符串文字](http://msdn.microsoft.com/en-us/library/362314fe.aspx)语法。它本可以用来`\\`代替`\`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:28:26.793

仅添加`@`可提高可读性，以 开头的字符串将在编译期间`@`简单地将其所有`\`' 替换为并在需要时添加。`\\``\`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:20:26.097

两者都是 .NET 中的有效路径分隔符。

IOW，这完全一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T10:20:59.150

通常`\`在 Windows 中用于分隔目录，但我认为它`/`在大多数情况下也可以接受。

`\`也需要转义，因此是符号`@`。你也可以`\\`用来转义这个字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T10:21:28.233

因为`\`开始转义字符。例如`"\""`将打印`"`. 如果要`\`用作字符，则需要`@`在字符串前面添加或使用`\\`. 如您所见，它与 path-s 无关，两种形式都适用于`streamwriter`.

# junit - 是否有机会向 JUnit 测试添加描述？

> ID：13341877
> 
> 赞同：6
> 
> 时间：2012-11-12T10:18:23.983
> 
> 标签：junit, junit4

JUnit 是否有可能为每个测试方法添加描述文本，以便描述文本稍后出现在surefire/failsave xml 报告中！？

背景：我在一个受监管的环境中工作，必须编写大量文档、测试规范和测试报告。JUnit 测试报告是文档的一部分，我们希望将测试描述直接放在 JUnit 测试中，以便将它们放在一个地方。由于测试不断发展并出现，有些被删除，因此很难将测试描述放在与测试不同的工具或位置。

我喜欢的是这样的：

```
public class MyTest {

   @Test
   @TestDescription("The test will do this and that. Preconditions are: 
                      1\. bla blubb
                      2\. bla fasel"
  public void testDoMyTestShouldCheckSomething {
    [...]
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:31:56.387

我会看一个与我对[使用 JavaDoc 丰富 JUnit 测试报告](https://stackoverflow.com/questions/8084773/junit-test-report-enrichment-with-javadoc/8165750#8165750)的回答类似的方案。

基本上，使用 RunListener 生成基于测试结果的报告，使用测试上的注释来提供描述。

# c++ - 你如何在 Windows 中构建 node.js？

> ID：13341879
> 
> 赞同：1
> 
> 时间：2012-11-12T10:18:25.960
> 
> 标签：c++, node.js, compilation

第一的， `C:\Users\User\Desktop\nodejs\node-v0.8.14>vcbuild.bat >> build.output.txt`

然后我得到这个`build.output.txt`：

```
{ 'target_defaults': { 'cflags': [],
                       'default_configuration': 'Release',
                       'defines': [],
                       'include_dirs': [],
                       'libraries': []},
  'variables': { 'clang': 0,
                 'gcc_version': 46,
                 'host_arch': 'ia32',
                 'node_install_npm': 'true',
                 'node_install_waf': 'true',
                 'node_prefix': '',
                 'node_shared_openssl': 'false',
                 'node_shared_v8': 'false',
                 'node_shared_zlib': 'false',
                 'node_unsafe_optimizations': 0,
                 'node_use_dtrace': 'false',
                 'node_use_etw': 'true',
                 'node_use_openssl': 'true',
                 'target_arch': 'ia32',
                 'v8_no_strict_aliasing': 1,
                 'v8_use_snapshot': 'true'}}
creating  config.gypi
creating  config.mk
Project files generated.
  http_parser.c
  js2c, and also js2c_experimental
  http_parser.vcxproj -> C:\Users\User\Desktop\nodejs\node-v0.8.14\Release\lib\http_parser.lib
  node_etw
src\res\node_etw_provider.man : error : Failed to open file for write: 'C:\Users\User\Desktop\nodejs\node-v0.8.14\Release\obj\global_intermediate\node_etw_providerTEMP.BIN' [C:\Users\User\Desktop\nodejs\node-v0.8.14\node_etw.vcxproj]
MC : error : Failed creating  provider resources for manifest 2 [C:\Users\User\Desktop\nodejs\node-v0.8.14\node_etw.vcxproj]
  node_js2c
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\x86cpuid.asm to Release\obj\openssl\x86cpuid.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\bf\bf-686.asm to Release\obj\openssl\bf-686.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\ripemd\rmd-586.asm to Release\obj\openssl\rmd-586.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\cast\cast-586.asm to Release\obj\openssl\cast-586.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\rc4\rc4-586.asm to Release\obj\openssl\rc4-586.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\rc5\rc5-586.asm to Release\obj\openssl\rc5-586.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\bn\x86-mont.asm to Release\obj\openssl\x86-mont.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\bn\x86.asm to Release\obj\openssl\x86.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\des\des-586.asm to Release\obj\openssl\des-586.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\des\crypt586.asm to Release\obj\openssl\crypt586.obj.
  uv-common.c
  cares.c
  fs-poll.c
  loop-watcher.c
  process.c
  util.c
  stream.c
  getaddrinfo.c
  poll.c
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\camellia\cmll-x86.asm to Release\obj\openssl\cmll-x86.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\aes\aes-586.asm to Release\obj\openssl\aes-586.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\sha\sha256-586.asm to Release\obj\openssl\sha256-586.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\sha\sha1-586.asm to Release\obj\openssl\sha1-586.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\sha\sha512-586.asm to Release\obj\openssl\sha512-586.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\whrlpool\wp-mmx.asm to Release\obj\openssl\wp-mmx.obj.
  Assembling C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\asm\x86-win32-masm\md5\md5-586.asm to Release\obj\openssl\md5-586.obj.
  s2_pkt.c
  s3_enc.c
  s23_pkt.c
  threadpool.c
  fs-event.c
  handle.c
  tty.c
  timer.c
  dl.c
  winapi.c
  udp.c
  thread.c
  req.c
  fs.c
  pipe.c
  tcp.c
  core.c
  async.c
  process-stdio.c
  error.c
  winsock.c
  ares_parse_ptr_reply.c
  ares_timeout.c
  ares_process.c
  inet_net_pton.c
  ares_version.c
  ares_init.c
  ares_gethostbyname.c
  ares_getsock.c
  ares_free_hostent.c
  ares_getenv.c
  ares_cancel.c
  ares_strcasecmp.c
  ares_writev.c
  ares_mkquery.c
  ares_destroy.c
  ares_parse_txt_reply.c
  circular-queue.cc
  full-codegen.cc
  inspector.cc
  execution.cc
  ares_gethostbyaddr.c
  t1_meth.c
  ssl_lib.c
  ares_parse_mx_reply.c
  ares_expand_name.c
  ares__close_sockets.c
  ssl_asn1.c
  ares_getopt.c
  inet_ntop.c
  ares_library_init.c
  hydrogen.cc
  s23_lib.c
  ares_fds.c
  ssl_txt.c
  ares_expand_string.c
  ares_strdup.c
  ssl_algs.c
  ares_llist.c
  s23_srvr.c
  ares_parse_a_reply.c
  d1_both.c
  ares_free_string.c
  ares_platform.c
  s3_meth.c
  ares_options.c
  ares_parse_aaaa_reply.c
  ssl_err2.c
  ares_parse_srv_reply.c
  ares__timeval.c
  ares__read_line.c
  bio_ssl.c
  s2_meth.c
  bitncmp.c
  ares_parse_ns_reply.c
  ares_search.c
  ares__get_hostent.c
  ares_strerror.c
  s3_clnt.c
  s3_lib.c
  windows_port.c
  ares_data.c
  ares_nowarn.c
  debug.cc
  ares_send.c
  kssl.c
  t1_enc.c
  ares_getnameinfo.c
  ares_query.c
  d1_clnt.c
  t1_lib.c
  t1_srvr.c
  ssl_cert.c
  t1_clnt.c
  ssl_stat.c
  uv.vcxproj -> C:\Users\User\Desktop\nodejs\node-v0.8.14\Release\lib\uv.lib
  ssl_sess.c
  s3_both.c
  d1_pkt.c
  s23_clnt.c
  s2_lib.c
  t1_reneg.c
  s2_enc.c
  ssl_rsa.c
  d1_lib.c
  ssl_ciph.c
  s23_meth.c
  s2_srvr.c
  ssl_err.c
  builtins.cc
  global-handles.cc
  trees.c
  s2_clnt.c
  inffast.c
  uncompr.c
  inftrees.c
  infback.c
  compress.c
  zutil.c
  crc32.c
  adler32.c
  inflate.c
  gzio.c
  deflate.c
  zip.c
  iowin32.c
  unzip.c
  ioapi.c
  s3_pkt.c
  d1_srvr.c
  s3_srvr.c
  d1_meth.c
  d1_enc.c
  zlib.vcxproj -> C:\Users\User\Desktop\nodejs\node-v0.8.14\Release\lib\zlib.lib
openssl\ssl\s3_srvr.c(3307): warning C4018: '>' : signed/unsigned mismatch [C:\Users\User\Desktop\nodejs\node-v0.8.14\deps\openssl\openssl.vcxproj]
  cversion.c
  ex_data.c
  mem_dbg.c
  o_dir.c
  o_time.c
  cryptlib.c
  platform-win32.cc
  regexp-macro-assembler-irregexp.cc
  o_str.c
  uid.c
  ebcdic.c
  mem.c
  cpt_err.c
  krb5_asn.c
  rand_lib.c
  rand_os2.c
  rand_err.c
  rand_win.c
  rand_egd.c
  rand_unix.c
  rand_nw.c
  randfile.c
  md_rand.c
  v3_skey.c
  dtoa.cc
  debug-agent.cc
  v3_sxnet.c
  v3err.c
  v3_ocsp.c
  v3_ncons.c
  v3_lib.c
  pcy_node.c
  v3_bcons.c
  v3_pci.c
  pcy_data.c
  v3_ia5.c
  v3_utl.c
  v3_cpols.c
  objects-printer.cc
  v3_conf.c
  token.cc
  code-stubs.cc
  v3_akeya.c
  v3_pku.c
  v3_addr.c
  v3_int.c
  pcy_lib.c
  v3_pcons.c
  v3_genn.c
  objects-debug.cc
  v3_purp.c
  pcy_tree.c
  v3_enum.c
  v3_pmaps.c
  v3_alt.c
  v3_bitst.c
  v3_crld.c
  pcy_map.c
  v3_info.c
  v3_asid.c
  v3_prn.c
  win32-math.cc
  v3_akey.c
  pcy_cache.c
  v3_extku.c
  v3_pcia.c
  store-buffer.cc
  txt_db.c
  ech_lib.c
  ech_key.c
  ech_err.c
  ech_ossl.c
  p12_attr.c
  p12_asn.c
  p12_utl.c
  p12_add.c
  p12_crt.c
  type-info.cc
  p12_key.c
  p12_crpt.c
  p12_p8d.c
  pk12err.c
  p12_decr.c
  runtime-profiler.cc
  p12_mutl.c
  p12_kiss.c
  p12_p8e.c
  p12_init.c
  p12_npas.c
  conf_mod.c
  conf_def.c
  conf_lib.c
  conf_err.c
  conf_mall.c
  conf_sap.c
  conf_api.c
  ocsp_ext.c
  ocsp_asn.c
  ocsp_cl.c
  disassembler.cc
  ocsp_vfy.c
  ocsp_lib.c
  ocsp_srv.c
  ocsp_ht.c
  ocsp_prn.c
  ocsp_err.c
  sha256.c
  sha1_one.c
  sha512.c
  sha1dgst.c
  sha_dgst.c
  sha_one.c
  ts_req_utils.c
  ts_rsp_verify.c
  ts_rsp_print.c
  ts_rsp_sign.c
  ts_conf.c
  ts_verify_ctx.c
  ts_asn1.c
  ts_rsp_utils.c
  ts_err.c
  ts_lib.c
  ts_req_print.c
  evp_asn1.c
  x_sig.c
  t_x509a.c
  n_pkey.c
  a_object.c
  scopes.cc
  factory.cc
  d2i_pr.c
  tasn_new.c
  x_attrib.c
  x_info.c
  t_spki.c
  x_long.c
  a_time.c
  tasn_typ.c
  asn1_gen.c
  a_utctm.c
  tasn_prn.c
  x_bignum.c
  a_bool.c
  t_bitst.c
  api.cc
  asn_pack.c
  x_algor.c
  t_crl.c
  x_pkey.c
  a_bytes.c
  t_req.c
  a_set.c
  bio_asn1.c
  a_utf8.c
  asn1_lib.c
  asn_mime.c
  x_x509.c
  a_enum.c
  a_strex.c
  a_sign.c
  a_int.c
  a_strnid.c
  nsseq.c
  i2d_pu.c
  tasn_dec.c
  p5_pbe.c
  a_dup.c
  x_nx509.c
  date.cc
  t_pkey.c
  x_x509a.c
  a_octet.c
  p8_pkey.c
  a_mbstr.c
  f_string.c
  d2i_pu.c
  tasn_fre.c
  x_crl.c
  a_digest.c
  f_int.c
  asn1_par.c
  f_enum.c
  accessors.cc
  a_d2i_fp.c
  tasn_utl.c
  x_exten.c
  a_gentm.c
  ameth_lib.c
  asn1_err.c
  a_bitstr.c
  a_print.c
  x_req.c
  p5_pbev2.c
  a_type.c
  x_spki.c
  bio_ndef.c
  a_verify.c
  x_pubkey.c
  dateparser.cc
  x_name.c
  a_i2d_fp.c
  i2d_pr.c
  func-name-inferrer.cc
  asn_moid.c
  tasn_enc.c
  x_val.c
  t_x509.c
  pem_pk8.c
  pem_info.c
  pem_seal.c
  pem_x509.c
  pem_lib.c
  pem_oth.c
  scopeinfo.cc
  pem_all.c
  pem_pkey.c
  pem_xaux.c
  pvkfmt.c
  string-stream.cc
  pem_sign.c
  pem_err.c
  lh_stats.c
  lhash.c
  ecs_sign.c
  ecs_err.c
  ecs_ossl.c
  ecs_asn1.c
  ecs_vrf.c
  ecs_lib.c
  str_mem.c
  str_err.c
  str_meth.c
  str_lib.c
  dsa_err.c
  dsa_asn1.c
  bootstrapper.cc
  dsa_key.c
  dsa_prn.c
  dsa_gen.c
  dsa_pmeth.c
  dsa_vrf.c
  dsa_ossl.c
  dsa_lib.c
  dsa_ameth.c
  dsa_depr.c
  dsa_sign.c
  eng_openssl.c
  eng_list.c
  fixed-dtoa.cc
  log.cc
  tb_rsa.c
  tb_cipher.c
  tb_asnmth.c
  eng_err.c
  frames.cc
  eng_ctrl.c
  tb_dh.c
  eng_cryptodev.c
  eng_table.c
  eng_dyn.c
  eng_pkey.c
  tb_dsa.c
  eng_fat.c
  tb_store.c
  tb_digest.c
  eng_init.c
  tb_pkmeth.c
  eng_lib.c
  tb_rand.c
  eng_all.c
  tb_ecdh.c
  eng_cnf.c
  tb_ecdsa.c
  bio_cb.c
  compiler.cc
  b_print.c
  bss_bio.c
  bss_sock.c
  bf_buff.c
  bss_mem.c
  bf_null.c
  bss_acpt.c
  bss_file.c
  bio_err.c
  bio_lib.c
  bss_null.c
  bss_log.c
  b_sock.c
  bss_fd.c
  b_dump.c
  bf_nbio.c
  bss_dgram.c
  bss_conn.c
  bf_ecb.c
  bf_skey.c
  bf_cfb64.c
  bf_ofb64.c
  wp_dgst.c
  wp_block.c
  dh_ameth.c
  dh_err.c
  preparse-data.cc
  dh_depr.c
  regexp-stack.cc
  dh_check.c
  dh_key.c
  dh_asn1.c
  dh_pmeth.c
  dh_prn.c
  dh_lib.c
  dh_gen.c
  x509_req.c
  x509_txt.c
  by_file.c
  x509_obj.c
  cpu-profiler.cc
  x509_vpm.c
  x509_d2.c
  x509_set.c
  x509spki.c
  x_all.c
  x509type.c
  x509_def.c
  x509_vfy.c
  x509_cmp.c
  counters.cc
  x509_att.c
  x509_v3.c
  x509_lu.c
  x509_ext.c
  x509_err.c
  x509_r2x.c
  string-search.cc
  x509rset.c
  by_dir.c
  x509name.c
  x509_trs.c
  x509cset.c
  comp_err.c
  c_zlib.c
  c_rle.c
  comp_lib.c
  bn_lib.c
  bn_gf2m.c
  log-utils.cc
  bn_add.c
  bn_blind.c
  bn_kron.c
  bn_nist.c
  bn_gcd.c
  bn_word.c
  bn_mont.c
  bn_mod.c
  lithium-allocator.cc
  bn_exp2.c
  bn_exp.c
  bn_print.c
  bn_prime.c
  bn_mpi.c
  version.cc
  bn_sqrt.c
  bn_err.c
  bn_mul.c
  bn_recp.c
  bn_ctx.c
  bn_shift.c
  bn_sqr.c
  bn_const.c
  bn_depr.c
  bn_rand.c
  bn_div.c
  rsa_depr.c
  rsa_pk1.c
  rsa_pmeth.c
  rsa_ssl.c
  utils.cc
  incremental-marking.cc
  rsa_asn1.c
  rsa_saos.c
  rsa_err.c
  rsa_pss.c
  rsa_none.c
  rsa_null.c
  rsa_x931.c
  rsa_eay.c
  rsa_gen.c
  rsa_sign.c
  rsa_lib.c
  rsa_ameth.c
  rsa_oaep.c
  rsa_chk.c
  rsa_prn.c
  pqueue.c
  o_names.c
  obj_xref.c
  obj_dat.c
  obj_err.c
  obj_lib.c
  buffer.c
  deoptimizer.cc
  buf_err.c
  ecp_nist.c
  ec_lib.c
  ec2_mult.c
  ec_key.c
  ec_curve.c
  ec_ameth.c
  eck_prn.c
  ec2_smpl.c
  ec_check.c
  ec_asn1.c
  ec_pmeth.c
  ecp_smpl.c
  ec_print.c
  ec_cvt.c
  ec_err.c
  ec_mult.c
  ecp_mont.c
  md2_one.c
  md2_dgst.c
  dso_beos.c
  dso_null.c
  dso_openssl.c
  dso_err.c
  dso_lib.c
  stack.c
  md4_dgst.c
  md4_one.c
  md5_one.c
  md5_dgst.c
  aes_wrap.c
  aes_ige.c
  aes_ecb.c
  aes_cfb.c
  aes_ctr.c
  aes_misc.c
  aes_ofb.c
  rmd_dgst.c
  rmd_one.c
  cbc128.c
  ofb128.c
  cfb128.c
  ctr128.c
  cts128.c
  err_all.c
  err_prn.c
  assembler.cc
  err.c
  set_key.c
  cfb64enc.c
  cbc_enc.c
  ofb_enc.c
  enc_writ.c
  read2pwd.c
  rpc_enc.c
  fcrypt.c
  ecb3_enc.c
  cbc_cksm.c
  cfb_enc.c
  xcbc_enc.c
  ecb_enc.c
  handles.cc
  enc_read.c
  des_old.c
  ofb64ede.c
  qud_cksm.c
  str2key.c
  cfb64ede.c
  ofb64enc.c
  des_old2.c
  pcbc_enc.c
  rand_key.c
  ede_cbcm_enc.c
  rc2ofb64.c
  rc2cfb64.c
  rc2_cbc.c
  rc2_ecb.c
  rc2_skey.c
  pk7_asn1.c
  pk7_lib.c
  allocation.cc
  liveobjectlist.cc
  preparser.cc
  pk7_mime.c
  pk7_attr.c
  ic.cc
  pk7_smime.c
  bio_pk7.c
  pkcs7err.c
  pk7_doit.c
  c_ofb64.c
  c_skey.c
  c_cfb64.c
  c_ecb.c
  ui_err.c
  ui_compat.c
  ui_util.c
  ui_openssl.c
  ui_lib.c
  bio_b64.c
  m_wp.c
  bio_ok.c
  m_dss1.c
  p_enc.c
  m_md4.c
  e_bf.c
  p_sign.c
  evp_lib.c
  c_all.c
  p_seal.c
  spaces.cc
  evp_pkey.c
  m_ecdsa.c
  m_sha.c
  p5_crpt2.c
  e_seed.c
  m_sha1.c
  evp_key.c
  e_old.c
  m_dss.c
  v8-counters.cc
  e_des.c
  pmeth_gn.c
  c_allc.c
  e_null.c
  e_des3.c
  e_rc2.c
  isolate.cc
  e_rc4.c
  bio_md.c
  m_md5.c
  p_open.c
  m_mdc2.c
  evp_pbe.c
  p5_crpt.c
  m_ripemd.c
  p_verify.c
  m_null.c
  evp_err.c
  evp_acnf.c
  e_xcbc_d.c
  names.c
  encode.c
  e_camellia.c
  m_sigver.c
  p_dec.c
  bio_enc.c
  e_cast.c
  digest.c
  e_aes.c
  p_lib.c
  pmeth_lib.c
  cached-powers.cc
  property.cc
  m_md2.c
  c_alld.c
  e_rc5.c
  evp_enc.c
  safepoint-table.cc
  pmeth_fn.c
  hm_pmeth.c
  hmac.c
  hm_ameth.c
  e_atalla.c
  e_4758cca.c
  e_cswift.c
  e_aep.c
  e_nuron.c
  e_gmp.c
  e_chil.c
  e_capi.c
  stub-cache.cc
  e_ubsec.c
  e_sureware.c
  compilation-cache.cc
  data-flow.cc
  checks.cc
  conversions.cc
  bignum.cc
  heap-profiler.cc
  snapshot-common.cc
  interface.cc
  openssl.vcxproj -> C:\Users\User\Desktop\nodejs\node-v0.8.14\Release\lib\openssl.lib
  jsregexp.cc
  regexp-macro-assembler.cc
  v8utils.cc
  liveedit.cc
  scanner.cc
  interpreter-irregexp.cc
  heap.cc
  elements-kind.cc
  scanner-character-streams.cc
  parser.cc
  variables.cc
  v8conversions.cc
  unicode.cc
  objects-visiting.cc
  flags.cc
  objects.cc
  prettyprinter.cc
  hydrogen-instructions.cc
  runtime.cc
  codegen.cc
  bignum-dtoa.cc
  zone.cc
  elements.cc
  serialize.cc
  regexp-macro-assembler-tracer.cc
  messages.cc
  v8.cc
  profile-generator.cc
  lithium.cc
  v8threads.cc
  atomicops_internals_x86_gcc.cc
  once.cc
  fast-dtoa.cc
  diy-fp.cc
  ast.cc
  strtod.cc
  contexts.cc
  rewriter.cc
  mark-compact.cc
  ic-ia32.cc
  debug-ia32.cc
  cpu-ia32.cc
  lithium-ia32.cc
  macro-assembler-ia32.cc
  frames-ia32.cc
  code-stubs-ia32.cc
  lithium-codegen-ia32.cc
  regexp-macro-assembler-ia32.cc
  full-codegen-ia32.cc
  builtins-ia32.cc
  disasm-ia32.cc
  codegen-ia32.cc
  deoptimizer-ia32.cc
  stub-cache-ia32.cc
  lithium-gap-resolver-ia32.cc
  assembler-ia32.cc
  externalize-string-extension.cc
  gc-extension.cc
  v8_base.vcxproj -> ..\..\..\..\build\Release\lib\v8_base.lib 
```

...但是，`node.exe`文件夹中没有。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-30T15:06:14.100

这可能为时已晚，无法帮助您，但我遇到了类似的问题，因此它也可能对其他人有所帮助。

看来 Node 的 vcbuild 脚本并不能很好地处理错误。如果发生构建错误，它只会继续，然后这些项目根本不会被构建。

因此，在您的情况下，问题可能是顶部附近的此错误：

```
src\res\node_etw_provider.man : error : Failed to open file for write: 'C:\Users\User\Desktop\nodejs\node-v0.8.14\Release\obj\global_intermediate\node_etw_providerTEMP.BIN' [C:\Users\User\Desktop\nodejs\node-v0.8.14\node_etw.vcxproj]
MC : error : Failed creating  provider resources for manifest 2 [C:\Users\User\Desktop\nodejs\node-v0.8.14\node_etw.vcxproj]
  node_js2c 
```

我遇到了与 OpenSSL 相关的另一个错误，因此，vcbuild 会简单地跳过一半目标，然后默默地完成，而没有清楚地表明在构建的早期发生了错误。

# xml - 在 IE9 xml 响应中将 XML 内容包装在和

> ID：13341880
> 
> 赞同：1
> 
> 时间：2012-11-12T10:18:26.740
> 
> 标签：xml, internet-explorer-9, response

在 ie9 ajax xml 响应没有作为 XML 对象获取，它作为文本返回，并且 xml 内容包含在`<span>`和中`<div>`。即使我的响应内容类型是“text/xml”。

前任：-

```
"<DIV class=e>< Span class=b>&nbsp;< /SPAN>< SPAN Class=m>&lt;?< /SPAN> <SPAN class=pi>xml version="1.0" encoding="UTF-8"< /SPAN>< SPAN Class=m>&lt;?< /SPAN>< /DIV>" 
```

这种类型的响应正在得到，但我想要实际的 XML 对象。请任何知道解决方案的人帮忙。

# php - 如何更改 Moodle 消息中的发件人地址 (noreply@localhost)？

> ID：13341886
> 
> 赞同：0
> 
> 时间：2012-11-12T10:18:41.500
> 
> 标签：php, moodle

我正在开发我的第一个 Moodle 系统，并且大多数事情都按照我想要的方式工作，但我被困在一件事情上，我似乎无法通过谷歌搜索找到答案。

当我向课程的参与者发送消息时，电子邮件的发件人地址是 noreply@localhost。我想将此地址更改为其他地址，但不知道我需要在哪里执行此操作。有谁知道我可以如何改变这个？

在此先感谢齐亚德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:05:14.210

以系统管理员身份登录并转到 [您的 Moodle 根目录]/admin/settings.php?section=mail，然后更新“无回复地址”——我想这就是您所需要的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T05:01:52.250

如果必须**即时**更改`from`或（同时仍保留默认设置），可以执行以下操作：`noreplyaddress`

 **1）在`$from`（恰好是一个`stdClass()`对象）中，`$from->maildisplay`可以将 的值设置为所需的地址 2）在调用 时`email_to_user()`，应将第 8 个参数设置为`true`。

因此，`email_to_user()`将注意在发送的邮件中显示上述步骤 1 中设置的值。

**仅供参考 -**该`email_to_user()`功能可在*[your-moodle-root]/lib/moodlelib.php***

# objective-c - Xcode - Web 服务和我的困惑

> ID：13341887
> 
> 赞同：-2
> 
> 时间：2012-11-12T10:18:48.800
> 
> 标签：objective-c, ios, xcode, web-services

我这里有问题。我对服务器和网络服务的概念完全陌生，并且能够在不同的设备上上传和检索数据，但我想学习它，比如说我想创建一个像 Instagram 这样的应用程序。

但这正是我不想要的，一个指向互联网上关于如何创建最复杂的应用程序的**长**教程的链接，我想慢慢开始。在亚马逊上进行了广泛的电力搜索之后，基本上没有任何书籍可以帮助我。所以我想慢慢开始，这是我的**目标**：

*深入了解 Web 服务后端和服务器的工作原理，并能够将其应用到我拥有并希望开始开发的其他应用程序创意中*

我想首先创建一个允许用户在字段中输入一些文本的应用程序，然后将其上传到服务器，另一台设备可以按下按钮来检索文本并将其显示在文本视图中。

我不懂php，我在这个网站上输入的每一个教程都是字面意思的，原因是**每个人**都有不同的解决方案，将web服务后端与Core Data、MySQL、parse、Rails同步，它**真的**让我不知所措因为我不知道该选哪一个！更糟糕的是，有些人提供了代码，但我对此**一无所知**，这就像在看一种全新的语言！

我不是要代码，实际上恰恰相反。我要求有人真正展示他们的知识，这一切是如何运作的？什么是最好的工具？一些资源和链接。没什么太复杂的...

我希望你能真正理解我极度的困惑和沮丧。我想原因可能是我可能还没有为这一切做好准备，但我想推进并执行我的应用程序想法！

谢谢...

更新：

我**终于**决定了我想使用的网络服务，它是 Amazon S3 网络服务，但我仍然没有完全理解完整的过程，有什么帮助或想法！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:17:20.703

由于您想创建一个 Instagram 类型的应用程序，请查看：[http ://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend -第 12 部分](http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12)

这是一个很好的服务器链接：[http](http://www.youtube.com/playlist?list=PLC71D7CFB6AF935E6&feature=plcp) ://www.youtube.com/playlist?list=PLC71D7CFB6AF935E6&feature=plcp 。观看列表以了解服务器。

也许你想阅读 sql。了解 sql 会有所帮助。再次：[http](http://www.youtube.com/course?list=EC32BC9C878BA72085&feature=plcp) ://www.youtube.com/course?list=EC32BC9C878BA72085&feature=plcp 。观看列表以了解 sql...

我可以把链接传给你，你必须做这项工作....

希望这可以帮助...

# iphone - 如何从 iOS 中的另一个类调用方法？

> ID：13341891
> 
> 赞同：1
> 
> 时间：2012-11-12T10:19:03.050
> 
> 标签：iphone, ios, class, methods, label

我有2节课。第一个是Label，另一个是LabelGestureRecognizer。在 LabelGestureRecognizer 中有一个名为 getName 的方法，我想通过 Label 类调用该方法。

下面是我的问题的一个简单示例。
我正在尝试调用方法 'getName'，但我收到一条错误消息：“No visible @interface for 'LabelGestureRecognizer' 声明选择器 'getName:'”</p>

视图控制器.h：

```
@property (nonatomic, strong) UILabel *valueLabel; 
```

视图控制器.m：

```
- (void)viewDidLoad
{
    valueLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 366, 320, 50)];
    valueLabel.textAlignment = UITextAlignmentCenter;
    valueLabel.backgroundColor = [UIColor lightGrayColor];
    [self.view addSubview:valueLabel]; 
}

- (void) wheelDidChangeValue:(NSString *) newValue {
    self.valueLabel.text = newValue;
} 
```

标签.h：

```
@protocol LabelDelegate <NSObject> 
@required
 -(void) wheelDidChangeValue:(NSString *) newValue;
@end

@class LabelGestureRecognizer; 
```

标签手势识别器.m：

```
- (NSString *) getName:(int) position
{
    NSString *resultat = @"";
    switch (position) {
        case 0:
            resultat = @"Test 1";
            break;
        case 1:
            resultat = @"Test 2";
            break;
        default:
            break;
    }
    return resultat;
} 
```

标签手势识别器.h：

```
 @interface LabelGestureRecognizer : UIGestureRecognizer
 {
     NSDate *previous;
     double current;
 } 
```

标签.m：

```
 LabelGestureRecognizer *recognizer = [[LabelGestureRecognizer alloc] init];
 [self.delegate wheelDidChangeValue:[self getName:0]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:23:56.883

它可能发生的原因有很多，但通常是说在它标记的代码行中，它没有看到任何证据表明您引用的选择器位于它认为对象具有的类型的接口中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:23:57.977

当您使用`self`in 时`Label.m`，它代表当前的类对象。如果您需要表示`LabelGestureRecognizer`对象，则需要使用它来代替`self`as，

```
[self.delegate wheelDidChangeValue:[recognizer getName:0]]; 
```

此外，您应该在`LabelGestureRecognizer.h`文件中声明以下内容，

```
@interface LabelGestureRecognizer : UIGestureRecognizer
 {
     NSDate *previous;
     double current;
 }
- (NSString *) getName:(int) position;
@end 
```

您的错误消息是说它无法`getName`在`LabelGestureRecognizer.h`类文件中看到方法的声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:28:29.260

需要在 LabelGestureRecognizer.h 的接口中声明选择器

```
 @interface
 - (NSString *) getName:(int) position;
 @end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:27:43.053

您好，您可以简单地通过 alloc 类创建一个类的实例并调用该方法，使用后您可以释放

```
LabelGestureRecognizer *labelGestureRecognizer = [[LabelGestureRecognizer alloc] init];

[self.delegate wheelDidChangeValue:[labelGestureRecognizer getName:0]];
[labelGestureRecognizer release]; 
```

但作为你的代码，我会建议创建类方法

```
+ (NSString *) getName:(int) position
{
    NSString *resultat = @"";
    switch (position) {
        case 0:
            resultat = @"Test 1";
            break;
        case 1:
            resultat = @"Test 2";
            break;
        default:
            break;
    }
    return resultat;
} 
```

你可以通过

```
 [self.delegate wheelDidChangeValue:[LabelGestureRecognizer getName:0]]; 
```

有关类方法的更多信息，您可以点击此链接[编写 Objective-C 类方法](http://www.techotopia.com/index.php/Writing_Objective-C_Class_Methods)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T10:44:08.850

只需创建该方法所在类的对象，最后使用该对象调用该方法。非常简单...

# powershell - 让脚本在远程服务器上工作

> ID：13341893
> 
> 赞同：0
> 
> 时间：2012-11-12T10:19:10.297
> 
> 标签：powershell, powershell-2.0

我希望下面的代码在多台计算机上工作 - 知道如何做到这一点吗？我有以下内容，但它失败了，因为我目前没有调用我认为有问题的服务器。

谢谢，

代码：

```
Write-Host "Script to check Storage Write, Read and Delete Times"
Write-Host "`n"

$computer = Get-Content -path d:\temp\servers.txt
$path = "f:\temp\test.txt"

Foreach ($storage in $computer)
{

$date = Get-Date
Write-Host "Script being run on $date"

$write = Measure-Command { new-item -Path $path -ItemType File -Force } | select TotalMilliseconds 

Write-Host "Writing file on $storage took $write"

$read = Measure-Command { Get-Content -Path $path } | select TotalMilliseconds 

Write-Host "Reading file on $storage took $read"

$delete = Measure-Command {Remove-Item -Path $path -Force } | select TotalMilliseconds 

Write-Host "Deleting file on $storage took $delete"
Write-Host "`n"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:12:47.967

您需要退后一步，重新考虑该方法。您每次都向本地系统上的 f:\temp 发出文件系统命令。

有两种方法可以让远程计算机执行文件系统任务。最简单的方法是使用 UNC 路径。也就是`\\server\share`格式。假设您具有本地管理员访问权限：

```
Foreach ($storage in $computer) {
$uncpath = $("\\{0}\f`$\temp\text.txt" -f $storage)
$write = Measure-Command { new-item -Path $uncpath -ItemType #...
# rest of code uses $uncpath for access
} 
```

请注意，使用 UNC 路径会给 LAN 带来一些压力，因此这种类型的测试可能不够准确，也可能不够准确。

第二种方法是使用 Powershell 远程连接远程系统并在那里发出命令。查看[New-PSSession](http://technet.microsoft.com/en-us/library/hh849717.aspx "新PSSession")、[Enter-PSSession](http://technet.microsoft.com/en-us/library/hh849707.aspx "输入-PSSession")和[Exit-PSSession](http://technet.microsoft.com/en-us/library/hh849743.aspx "退出-PSSession") cmdlet。

# http - 我可以阻止从 winlogon.exe 和 lsass.exe 发送的 HTTP 请求吗？

> ID：13341894
> 
> 赞同：1
> 
> 时间：2012-11-12T10:19:10.210
> 
> 标签：http, inject, malware, winlogon

你知道有恶意软件注入系统进程，如 winlogon.exe 和 lsass.exe，并通过 HTTP 流量与外部服务器通信。阻止从 winlgon.exe 和 lsass.exe 发送的 HTTP 流量是否合理？有可能出现误报吗？

非常感谢。

# android - 如何让我的 SQLite 数据库井井有条？安卓

> ID：13341897
> 
> 赞同：1
> 
> 时间：2012-11-12T10:19:15.257
> 
> 标签：android, sqlite, organization

假设我的 SQLite Databate 有 2 列，第一列是自动递增的 ID，第二列是一些字符串。说现在是

1 随机 2 软糖 3 ImTired

如果我要删除条目 2，那么它将是

1 随机 3 厌倦

我想要的是一种方法，所以当你删除条目 2 时，它会变成

1 随机 2 厌倦

我考虑过更新条目以将它们全部向下移动并删除最后一个，但即使它有效（在我的情况下，它删除了我的所有条目，但无论如何......），即使我确实得到了它1 随机 2 厌倦

下次我创建一个新条目时，它将是条目 4。我认为这对我的应用程序没有必要，但它严重困扰我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:39:47.903

数据库上的 ID 列用作主键，它是用于唯一标识行的一列或一组列。一旦你在一行上设置了主键，你就不应该改变它，否则你可能会失去数据库的一致性。例如，假设您稍后创建另一个表来引用第一个表中的行。该引用将使用主键进行，如果您稍后更改它，您的数据将不再有意义。

如果您希望 ID 列不断变化以反映表中的行数，您可以使用其他方法解决该问题。例如。SQL 提供了一个 COUNT 运算符，它将返回表中的行数：

```
SELECT COUNT(*) FROM Table_name; 
```

# bash - zsh：如何设置自动完成，以便在光标位于文本之间时插入完成？

> ID：13341900
> 
> 赞同：3
> 
> 时间：2012-11-12T10:19:21.017
> 
> 标签：bash, autocomplete, zsh, bash-completion

在我的 bash shell 中，当我的光标位于文本之间，并且我点击`Tab`时，它会自动完成文件名，当我点击 时`Enter`，它会在光标处插入完成，并且光标之后的所有内容都会保留，例如

```
 $ cp foo.ba¦r.baz.py 
             ^  <== cursor position 
```

按下`Tab`键，现在我看到了：

```
 $ cp foo.bar.baz.py¦r.baz.py
                     ^ <== cursor position 
```

我喜欢这种行为，尤其是在执行`mv`or`cp`并且想要修改原始文件名时。我怎样才能让**zsh**做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:52:53.130

使用**expand-or-complete-prefix**，将其添加到您的*.zshrc*文件中：

```
bindkey '^i' expand-or-complete-prefix 
```

阅读[此页面以获取有关](http://zsh.sourceforge.net/Guide/zshguide06.html)*zsh*完成的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T06:06:30.123

或者，您可以在 zshrc`_prefix`中的命令末尾添加控制功能`zstyle ':completion:*' completer`，因此它看起来像这样：

```
zstyle ':completion:*' completer _force_rehash _complete _list _match _prefix 
```

您还需要启用`completeinword`此功能：

```
setopt completeinword 
```

这样你就不会像绑定那样被迫使用扩展`expand-or-complete-prefix`。

# sql-server - dd/MM/yyyy 格式的 SQL Server 中的 OpenXML 会导致转换错误

> ID：13341904
> 
> 赞同：1
> 
> 时间：2012-11-12T10:19:32.967
> 
> 标签：sql-server, openxml

我有一个带有 XML 字符串作为参数的 SQL Server 存储过程。XML 字符串具有`dd/MM/yyyy`日期格式的日期标签。使用`OpenXML`时会出现转换错误。即使我有 sql 用户登录，默认语言设置为`British English`. 它适用于`MM-dd-yyyy`日期格式。

这是我的代码

```
Declare    @XML Nvarchar(MAX)                  
Set @XML=   '<root><ContractNo>100213</ContractNo><ContractDate>25/6/2012</ContractDate></root>'

Declare @idoc int

-- Create an internal representaion of XML                          
EXEC sp_xml_preparedocument @idoc OUTPUT, @XML                          

-- Get the data from XML into respective variables                          
SELECT   ContractNo                          
,ContractDate                             
FROM OPENXML(@idoc,'root',2)                          
WITH ( ContractNo nvarchar(30)                          
,ContractDate Datetime                         
) 
```

**错误：**

> *消息 241，级别 16，状态 1，第 10 行
> 从字符串转换日期和/或时间时转换失败。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:27:29.480

作为参考，由于您使用的是 SQL Server 2005+，因此您应该开始使用 XML 数据类型和 XQuery。

```
Declare @XML nvarchar(max);
Set @XML = '<root><ContractNo>100213</ContractNo>
            <ContractDate>25/6/2012</ContractDate></root>';
DECLARE @realXML xml;
set @realXML = @XML;

SELECT @realXML.value('(/root/ContractNo)[1]', 'varchar(max)') ContractNo,
       CONVERT(DATETIME,
               @realXML.value('(/root/ContractDate)[1]', 'varchar(max)'),
               103) ContractDate; 
```

`CONVERT()`使您可以灵活地处理日期，但如果必须，您可以设置**`dateformat`**设置。英式英语有一个“dmy”设置，应该可以处理您的数据。检查其他东西是否没有重置日期格式。否则，在批处理之前显式设置它。例如这有效：

```
set dateformat dmy;

Declare @XML nvarchar(max);
Set @XML = '<root><ContractNo>100213</ContractNo>
            <ContractDate>25/6/2012</ContractDate></root>';
DECLARE @realXML xml;
set @realXML = @XML;

SELECT @realXML.value('(/root/ContractNo)[1]', 'varchar(max)') ContractNo,
       @realXML.value('(/root/ContractDate)[1]', 'datetime') ContractDate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:24:36.443

您可以使用样式 103获取日期`varchar`并在字段列表中使用[convert](http://msdn.microsoft.com/en-us/library/ms187928.aspx?ppud=4)`dd/mm/yyyy`。

```
SELECT   ContractNo                          
,CONVERT(datetime, ContractDate, 103) as ContractDate
FROM OPENXML(@idoc,'root',2)                          
WITH ( ContractNo nvarchar(30)                          
,ContractDate varchar(10)                         
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:28:18.730

```
 Declare    @XML Nvarchar(MAX)                  
        Set @XML=   '<root><ContractNo>100213</ContractNo><ContractDate>25/6/2012</ContractDate></root>'

        Declare @idoc int

        -- Create an internal representaion of XML                          
        EXEC sp_xml_preparedocument @idoc OUTPUT, @XML                          

        -- Get the data from XML into respective variables                          
        SELECT   ContractNo                          
        ,Convert(Datetime, ContractDate,103)                            
        FROM OPENXML(@idoc,'root',2)                          
        WITH ( ContractNo nvarchar(30)                          
        ,ContractDate nvarchar(10)                        
        ) 
```

# wolfram-mathematica - 这是mathematica 8的错误吗？

> ID：13341907
> 
> 赞同：3
> 
> 时间：2012-11-12T10:19:47.067
> 
> 标签：wolfram-mathematica, integrate

```
Clear["Global`*"]
Integrate[t f[x, y], {y, 0, 1}] - 
  t Integrate[f[x, y], {y, 0, 1}] // FullSimplify 
```

为什么 M@ 不知道结果为零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:47:34.297

这不是一个错误。由于您`f[x,y]`没有定义，因此 Mathematica 不能假设任何关于被积函数`t f[x, y]`

您可以制定一个规则来帮助 Mathematica，如下所述。但是没有规则，Mathematica 在这里做的是正确的事情。

这个以前很多地方都讨论过。这里有一些链接

[https://groups.google.com/forum/#!msg/comp.soft-sys.math.mathematica/jsiYo9tRj04/rQYCy-X3SXQJ](https://groups.google.com/forum/#!msg/comp.soft-sys.math.mathematica/jsiYo9tRj04/rQYCy-X3SXQJ)

[https://mathematica.stackexchange.com/questions/5610/how-to-simplify-symbolic-integration](https://mathematica.stackexchange.com/questions/5610/how-to-simplify-symbolic-integration)

例如，您可以添加以下规则：

```
Clear["Global`*"]
Unprotect[Integrate];
Integrate[t_Symbol*f_,dom_]:=t*Integrate[f,dom];
Protect[Integrate]; 
```

现在它将为零

```
Simplify@Integrate[t f[x,y],{y,0,1}]-t Integrate[f[x,y],{y,0,1}]
(*--->  0 *) 
```

# c++ - 如何使用 c/c++ 读写“Excel”（在智能手机应用程序开发中）

> ID：13341910
> 
> 赞同：0
> 
> 时间：2012-11-12T10:19:51.047
> 
> 标签：c++, c, cocos2d-x

我是一名智能手机应用程序开发人员。我想制作一个在 iOS、android、winphone 上运行的应用程序。我使用 cocos2d-x 平台工具来制作这个应用程序。它是 c/c++ 语言的基础。所以，任何人都可以告诉我如何用 c/c++ 读写 excel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:24:59.283

出于什么目的？只需将文件视为不透明的字节流即可完成读取，就像任何其他文件一样。

不过，我怀疑这就是你的真正意思。

如果您想*解释*文件的内容，并呈现/更新计算，那么您肯定必须意识到“如何”完成的答案必须是巨大的？Excel 是一个庞大、庞大且非常古老的应用程序，可能是数百万行代码的结果。

没有人可以在这里用一个简单的答案告诉您“如何”解释这一点。

您可能在这里得到的最接近的东西是关于要使用的库的推荐。我快速浏览了一下，[LibXL](http://www.libxl.com/)是我为 C++ 找到的第一个。这是一个商业图书馆，我没有使用它的经验。

# javascript - JavaScript 没有提醒 JSON 数据

> ID：13341911
> 
> 赞同：2
> 
> 时间：2012-11-12T10:19:52.057
> 
> 标签：javascript, json

下面给出的 URL 中的 JSON 数据如下所示：

```
{
   "datum":[
      {
         "id":"19",
         "song":"The Age of Worry",
         "path":"audio/age.mp3",
         "artist":"John Mayer",
         "album":"Born And Raised",
         "genre":"Blues-Rock",
         "year":"2012",
         "filename":"age",
         "extension":".mp3",
         "size":"6.1539077758789 MB ",
         "duration":"2:40",
         "downloads":"0"
      }
   ]
} 
```

我想提醒歌曲名称。下面的代码只提醒 id 而不是歌曲。我无法弄清楚这里出了什么问题。

* * *

```
switch(id){
        case "1":
            alert(id);              
            $.getJSON("http://localhost/musicstore/search.php?media=audio&search_by=song&search_string=age", function(d) {
                 $.each(d.datum, function (i, res) {
                       alert(res.song);                     
                    });

            }); 

            break;
        case 2:
            break;
        case 3:
            break;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:27:52.753

我添加了这个[小提琴](http://jsfiddle.net/zcfJq/)。假设您的 JSON 数据像您的示例所说的那样返回，您的 .each 逻辑工作得很好。所以问题一定出在您返回 JSON 的 PHP 脚本中。

这是简化的小提琴，仅用于测试您的 .each 逻辑：

```
var jsonData = {"datum":[{"id":"19", "song":"The Age of Worry", "path":"audio/age.mp3", "artist":"John Mayer", "album":"Born And Raised", "genre":"Blues-Rock", "year":"2012", "filename":"age", "extension":".mp3", "size":"6.1539077758789 MB ", "duration":"2:40", "downloads":"0" }]};
$.each(jsonData.datum, function (i, res) {
    alert(res.song);                     
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:24:58.093

假设响应有效，验证来自服务器的响应的 Content-Type 标头是否正确设置为 application/json

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:22:07.670

据我所知，当你想提醒 json 数据时，它只显示`[object Object]`，使用 console.log() 代替，需要为此安装 firebug

# java - 如何在 Java 中的数据驱动测试中将数组作为参数传递？

> ID：13341917
> 
> 赞同：0
> 
> 时间：2012-11-12T10:20:07.960
> 
> 标签：java, automation, testng, data-driven

目前我必须知道没有。我传递给测试函数的参数。有没有办法将参数从数据提供者作为不定数量的元素数组传递给测试函数？我正在从 Excel 表中读取数据行，其想法是将每一行作为单独的测试执行。我正在使用 testNG 来运行这些测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:03:04.307

为什么不简单地将这个参数作为数组传递呢？（这实际上是 JVM 在声明 varargs 参数时所做的事情）

# java - 编码问题（4 字节日文字符）

> ID：13341918
> 
> 赞同：2
> 
> 时间：2012-11-12T10:20:09.887
> 
> 标签：java

我正在尝试为日语字符串获取给定位置的字符。我得到

"`?"` 而不是 Character 专门用于 4 个字节。

下面是我试图执行的代码片段。

```
 String jp=""; 
```

我正在尝试通过打印此字符串中的第一个字符

```
jp.charAt(0)

ouput="?" 
```

请告知合适的解决方案。

我们已经尝试过`UTF-8`编码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T10:35:33.983

Java 无法将这些字符表示为`char`，因为它们需要 2 个 UTF-16 单位来表示。`charAt`这里只给你前半部分，单独没有意义。请参阅[http://en.wikipedia.org/wiki/UTF-16](http://en.wikipedia.org/wiki/UTF-16)。

你可以这样做：

```
import java.lang.Character;

...

    public static String stringAt( String str, int index )
    {
        int codePoint = Character.codePointAt(str, index);
        return new String( Character.toChars(codePoint));
    }

    public static void main(String args[])
    {
         String jp="";

         System.out.println(stringAt(jp, 0)); //Prints 

    }

... 
```

要遍历字符，您将执行以下操作：

```
 String jp="";
    int len = jp.length();
    for( int i = 0; i < len; ++i) {
        String character = stringAt(jp, i);

        i += ( character.length() -1 );
        System.out.println( character );
    }
    //
    //
    //
    // 
```

注意：

> Java 2 平台在 char 数组以及 String 和 StringBuffer 类中使用 UTF-16 表示。

所以输入也可能是 UTF-8，但它不会改变内部表示和随之而来的问题。只有 UTF-32 是真正的固定宽度编码，其中一个字符可以真正单独代表任何 unicode 字符。

编辑：

子字符串示例（这很乏味，您可能想为此找到一个库）：

```
public static String substring( String str, int start, int end) {
    int codePointIndex = 0,
        len = str.length();

    StringBuilder sb = new StringBuilder();

    //There's no random access in variable width encoding, so
    //loop must be used
    for( int i = 0; i < len; ++i) {
        String character = stringAt(str, i);
        if( codePointIndex >= start ) {
            sb.append(character);
        }
        if( codePointIndex >= end -1 ) {
            break;
        }
        i += (character.length() - 1);
        codePointIndex++;

    }

    return sb.toString();

}

    String jp = "asdf";
    System.out.println(substring(jp, 0,8)); // asdf
    System.out.println(substring(jp, 0,4)); //as
    System.out.println(substring(jp, 7,8)); // 
```

# ios - APN 自定义通知声音问题

> ID：13341919
> 
> 赞同：7
> 
> 时间：2012-11-12T10:20:11.230
> 
> 标签：ios, objective-c, xcode, apple-push-notifications, audio

我有远程通知设置并且工作正常。但是，我必须在收到通知时播放自定义声音（当应用程序不在前台时）。我在我的应用程序包中添加了一个名为 customSound.wav 的文件，并确保在将其拖放到我的项目中时选择了“添加到目标”（这是正确的方法吗？）。服务器端：同名文件已被指定为“sound”：“customSound.wav”。在我的 didReceiveRemoteNotification 中，我正在打印 userInfo 字典，它的出现是这样的：

```
aps =     
{
    alert = "Good Evening Sir";
    badge = 1;
    "custom_filed1" = 1;
    "custom_field2" = "AAA-BBB-CCC";
    name = "Sir Hubert";
    sound = default;
}; 
```

如您所见，声音仍然是“默认”的。我知道如果找不到指定的声音，则播放默认声音 - 字典中的声音值也将是“默认”还是应该是有效载荷 json 中指定的文件名。这些在有效载荷中指定的顺序是否重要。我已经尝试过其他线程的建议，但对我不起作用。我无法显示 json，因为我目前无法访问系统。关于我可能做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T10:36:14.187

不，您的声音键应该具有您要播放的声音文件名。

```
{
  aps =
  {
    alert = "message";
    sound = "sound file name.extension";
    badge = 1;
  };
} 
```

例如：{ aps = { alert = "message"; 声音=“tone.caf”；}; }

我正在使用它并在我的通知中获得成功的自定义警报； **保持声音持续时间尽可能小**。我使用了这种文件格式：aiff, caf

*如果你想测试通知，那么你可以试试这个应用程序[https://itunes.apple.com/us/app/easy-apns-provider-push-notification/id989622350?mt=12](https://itunes.apple.com/us/app/easy-apns-provider-push-notification/id989622350?mt=12_)*

**我没有对这个应用程序做任何标记，但它有利于测试推送通知**

# java - 执行操作时获取通知/侦听器（chimpChat / monkeyrunner 工具）

> ID：13341921
> 
> 赞同：1
> 
> 时间：2012-11-12T10:20:21.853
> 
> 标签：java, android, listener, functional-testing

如果有人从应用程序外部在 android 应用程序中执行了操作，我想收到通知。我不想进行任何（android）代码更改。为了执行这些操作，我使用 Chimpchat.jar，monkeyrunner 工具使用的 .jar。需要明确的是：我可以从应用程序外部获取通知或注册组件的侦听器吗？例如

1.  运行我的安卓应用
2.  我的 java 应用程序通过 adb 使用 chimpChat 链接到设备
3.  用户触摸按钮
4.  我的 java 应用程序收到执行的通知 => 我能够获得该信息吗？如果没有，我能否获得有关选项卡所在位置的信息？

希望很清楚我想要做什么。

谢谢，索伦

# google-visualization - 使用 Google Chart Image API

> ID：13341923
> 
> 赞同：1
> 
> 时间：2012-11-12T10:20:30.137
> 
> 标签：google-visualization

我的 Appengine 仪表板上有以下图表[http://bit.ly/WXn4kb](http://bit.ly/WXn4kb)。

*   我不推荐使用图像 API 是否正确？如果是，我应该使用哪些设置来使用新的 API 绘制类似的图表？
*   是否有任何服务可以查看解码的图表参数？
*   如何在图表中使用相对日期 (-1d)？

# php - 在不刷新页面的情况下形成验证码

> ID：13341924
> 
> 赞同：1
> 
> 时间：2012-11-12T10:20:38.317
> 
> 标签：php, javascript, jquery, html, mysql

您好，我有以下代码，它可以工作，我的意思是它可以很好地验证验证码，但它不会在 sign_form.php 中发布值

```
<script>

$(document).ready(function() { 

     $('#Send').click(function() {  

            $.post("sign_form.php?"+$("#sign_form").serialize(), {

            }, function(response){

            if(response==1)
            {
                $("#after_submit").html('');
                $("#Send").after('<div id="after_submit">Your message has been submitted.</div>');
                change_captcha();
                clear_form();
            }
            else
            {
                $("#after_submit").html('');
                $("#Send").after('<div id="after_submit">Error ! invalid captcha code .</div>');

            }

        });

        return false;
     });

     // refresh captcha
     $('img#refresh').click(function() {  

            change_captcha();
     });

     function change_captcha()
     {
        document.getElementById('captcha').src="get_captcha.php?rnd=" + Math.random();
     }

     function clear_form()
     {
        $("#name").val('');
        $("#email").val('');
        $("#message").val('');

     }
}); 
```

表格代码

```
<form id="sign_form" name="sign_form" method="POST" action="#">
                        <fieldset class="step">
                            <legend>Podepsat tuto petici</legend>
                            <p>
                                <label for="first_name">Křestní jméno:</label>
                                <input type="text" name="first_name"  id="first_name">
                            </p>
                            <p>
                                <label for="last_name">Příjmení:</label>
                                <input type="text" name="last_name"  id="last_name">
                            </p>

                            <p>
                                <label for="email">Email:</label>
                                <input type="text" name="email"  id="email">
                            </p>
                             <p>
                                <label for="email">Mesto:</label>
                                <input type="text" name="city"  id="city">
                            </p>
                            <p>
                            <div id="wrap" align="center">
        <img src="get_captcha.php" alt="" id="captcha" />

        <br clear="all" />
        <input name="code" type="text" id="code">
    </div>
    <img src="refresh.jpg" width="25" alt="" id="refresh" />

    </p>
                            <p>

                                <input type="hidden" value="'.$id.'" name="id" id="id">
                            </p>
                            <p>
                             Emailová adresa nebude zveřejněna a nebude <br>předána žádné třetí straně.
                            </p>
                            <p>
                            <button  type="submit" value="send" id="Send"></button>
                            <div id="status"></div>
                            </p>
                            </form> 
```

sign_form.php 代码

```
session_start();
 require_once('engine/db.php');
 mysql_query("SET NAMES utf8");
if(($_REQUEST['code'] == $_SESSION['random_number']) || @strtolower($_REQUEST['code']) == strtolower($_SESSION['random_number']) )
{

$first_name=$_POST['first_name'];
            $last_name=$_POST['last_name'];
            $email=$_POST['email'];
            $city=$_POST['city'];
$id=$_POST['id'];

            $insert = "INSERT INTO petition_vote
         (id_petition,first_name,last_name,email,city)

        VALUES ('".$id."','".mysql_real_escape_string($first_name)."','".mysql_real_escape_string($last_name)."','".mysql_real_escape_string($email)."','".mysql_real_escape_string($city)."')";
            //$add_member = mysql_query($insert);
            $result = mysql_query($insert)
                or die("query failed: " . mysql_error());
          echo 1;
}
else
{
echo 0;
} 
```

我对代码进行了更新，但随后它刷新了我的页面

```
if(response==1)
{
submitform();
}
else
… 
```

* * *

```
function submitform()
{
document.forms.sign_form.submit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:57:11.153

将您的 index.php 替换为

```
<?php
session_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="jquery-1.6.2.min.js"></script>
<script>

$(document).ready(function() { 

     $('#Send').click(function() {  

        serializedData=$("#MYFORM").serialize();
        $.ajax({
        url: "post.php",
        type: "post",
        data: serializedData,
        // callback handler that will be called on success
        success: function(response){
            alert(response);
            if(response==1)
            {
                $("#after_submit").html('');
                $("#Send").after('<label class="success" id="after_submit">Your message has been submitted.</label>');
                change_captcha();
                clear_form();
            }
            else
            {
                $("#after_submit").html('');
                $("#Send").after('<label class="error" id="after_submit">Error ! invalid captcha code .</label>');
            }
        }       

        });

        return false;
     });

     // refresh captcha
     $('img#refresh').click(function() {  

            change_captcha();
     });

     function change_captcha()
     {
        document.getElementById('captcha').src="get_captcha.php?rnd=" + Math.random();
     }

     function clear_form()
     {
        $("#name").val('');
        $("#email").val('');
        $("#message").val('');
     }
});

</script>        

<style>
body{ font-family:Georgia, "Times New Roman", Times, serif; font-size:14px}
#wrap{
    border:solid #CCCCCC 1px;
    width:203px;
    -webkit-border-radius: 10px;
    float:left;
    -moz-border-radius: 10px;
    border-radius: 10px;
    padding:3px;
    margin-top:3px;
    margin-left:80px;
}

.error{ color:#CC0000; font-size:12px; margin:4px; font-style:italic; width:200px;}

.success{ color:#009900; font-size:12px; margin:4px; font-style:italic; width:200px;}

img#refresh{
    float:left;
    margin-top:30px;
    margin-left:4px;
    cursor:pointer;
}

#name,#email{float:left;margin-bottom:3px; height:20px; border:#CCCCCC 1px solid;}

#message{ width:260px; height:100px;float:left;margin-bottom:3px; border:#CCCCCC 1px solid;}

label{ float:left; color:#666666; width:80px;}

#Send{ border:#CC0000 solid 1px; float:left; background:#CC0000; color:#FFFFFF; padding:5px;}

</style>
</head>
<body>

<br clear="all" />

<br clear="all" />
<br clear="all" />

<div align="left" style="padding:30px;">

<form action="#" name="MYFORM" id="MYFORM">

    <label>Name</label>
    <input name="name" size="30" type="text" id="name">
    <br clear="all" />
    <label>Email</label>
    <input name="email" size="30" type="text" id="email">
    <br clear="all" />
    <label>Message</label>
    <textarea id="message" name="message"></textarea>
    <br clear="all" />

    <div id="wrap" align="center">
        <img src="get_captcha.php" alt="" id="captcha" />

        <br clear="all" />
        <input name="code" type="text" id="code">
    </div>
    <img src="refresh.jpg" width="25" alt="" id="refresh" />

    <br clear="all" /><br clear="all" />
    <label>&nbsp;</label>
    <input value="Send" type="submit" id="Send">

</form>

</div>

<br clear="all" /><br clear="all" /><br clear="all" /><br clear="all" />
<br clear="all" /><br clear="all" /><br clear="all" /><br clear="all" />
<br clear="all" /><br clear="all" />              

</body>
</html> 
```

和 post.php 作为

```
 <?php
    session_start();
//print_r($_SESSION);   

    if(($_REQUEST['code'] == $_SESSION['random_number']) || @strtolower($_REQUEST['code']) == strtolower($_SESSION['random_number']) )
    {

            //$email=$_REQUEST['email'];

        $first_name=$_POST['first_name'];
            $last_name=$_POST['last_name'];
            $email=$_POST['email'];
            $city=$_POST['city'];
           $id=$_POST['id'];

            echo $insert = "INSERT INTO petition_vote
         (id_petition,first_name,last_name,email,city)

        VALUES ('".$id."','".mysql_real_escape_string($first_name)."','".mysql_real_escape_string($last_name)."','".mysql_real_escape_string($email)."','".mysql_real_escape_string($city)."')";
            //$add_member = mysql_query($insert);
            $result = mysql_query($insert)or die("query failed: " . mysql_error());
          echo 1;

        echo 1;// submitted 
        //echo''.$email.'';
    }
    else
    {
        echo 0; // invalid code
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:45:18.613

我已将其测试为：

表单页面为：

```
<?php
session_start();
?>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"     type="text/javascript"></script>
    <script>

    $(document).ready(function() { 

         $('#Send').click(function() {  

                $.post("sign_form.php?"+$("#sign_form").serialize(), {

                }, function(response){
                 alert(response);
                if(response==1)
                {
                    $("#after_submit").html('');
                    $("#Send").after('<div id="after_submit">Your message has been submitted.</div>');
                    change_captcha();
                    clear_form();
                }
                else
                {
                    $("#after_submit").html('');
                    $("#Send").after('<div id="after_submit">Error ! invalid captcha code .</div>');

                }

            });

            return false;
         });

         // refresh captcha
         $('img#refresh').click(function() {  

                change_captcha();
         });

         function change_captcha()
         {
            document.getElementById('captcha').src="get_captcha.php?rnd=" + Math.random();
         }

         function clear_form()
         {
            $("#name").val('');
            $("#email").val('');
            $("#message").val('');

         }
    });

    </script>

    <form id="sign_form" name="sign_form" method="POST" action="#">
                            <fieldset class="step">
                                <legend>Podepsat tuto petici</legend>
                                <p>
                                    <label for="first_name">K?estní jméno:</label>
                                    <input type="text" name="first_name"  id="first_name">
                                </p>
                                <p>
                                    <label for="last_name">P?íjmení:</label>
                                    <input type="text" name="last_name"  id="last_name">
                                </p>

                                <p>
                                    <label for="email">Email:</label>
                                    <input type="text" name="email"  id="email">
                                </p>
                                 <p>
                                    <label for="email">Mesto:</label>
                                    <input type="text" name="city"  id="city">
                                </p>
                                <p>
                                <div id="wrap" align="center">
            <img src="get_captcha.php" alt="" id="captcha" />

            <br clear="all" />
            <input name="code" type="text" id="code">
        </div>
        <img src="refresh.jpg" width="25" alt="" id="refresh" />

        </p>
                                <p>

                                    <input type="hidden" value="'.$id.'" name="id" id="id">
                                </p>
                                <p>
                                 Emailová adresa nebude zve?ejn?na a nebude <br>p?edána žádné t?etí stran?.
                                </p>
                                <p>
                                <button  type="submit" value="send" id="Send"></button>
                                <div id="status"></div>
                                </p>
                                </form> 
```

php 页面 sign_form.php

```
<?php
session_start();
 //require_once('engine/db.php');
 //mysql_query("SET NAMES utf8");

 echo print_r($_REQUEST);
if(($_REQUEST['code'] == $_SESSION['random_number']) || @strtolower($_REQUEST['code']) == strtolower($_SESSION['random_number']) )
{

$first_name=$_POST['first_name'];
            $last_name=$_POST['last_name'];
            $email=$_POST['email'];
            $city=$_POST['city'];
$id=$_POST['id'];

            $insert = "INSERT INTO petition_vote
         (id_petition,first_name,last_name,email,city)

        VALUES ('".$id."','".mysql_real_escape_string($first_name)."','".mysql_real_escape_string($last_name)."','".mysql_real_escape_string($email)."','".mysql_real_escape_string($city)."')";
            //$add_member = mysql_query($insert);
            $result = mysql_query($insert)
                or die("query failed: " . mysql_error());
          echo 1;
}
else
{
echo 0;
}
?> 
```

提交时它会提醒所有值。那么你的问题是什么？

# java - 如何找出 Java 中的货币子单位（又名次要单位）符号？

> ID：13341925
> 
> 赞同：20
> 
> 时间：2012-11-12T10:20:37.500
> 
> 标签：java, currency

Currency.getSymbol 会给我主要符号（例如“$”代表美元），但我想获得次要单位（例如“p”代表英镑或美分符号代表美元），而不需要编写我自己的查找表。

是否有标准，即内置的方式来做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T11:56:15.177

我想建议在这种情况下使用 custom `custom currency format`。使用`DecimalFormat`或 包装`NumberFormat`。`java.text.*`有很多例子。

例子

```
public class CurrencyFormatExample {
    public void currencyFormat(Locale currentLocale) {
        Double currency = new Double(9843.21);
        NumberFormat currencyFormatter;
        String currencyOut;
        currencyFormatter = NumberFormat.getCurrencyInstance(currentLocale);
        currencyOut = currencyFormatter.format(currency);
        System.out.println(currencyOut + " " + currentLocale.toString());
    }

    public static void main(String args[]) {
        Locale[] locales = new Locale[]{new Locale("fr", "FR"),
            new Locale("de", "DE"), new Locale("ca", "CA"),
            new Locale("rs", "RS"),new Locale("en", "IN")
        };
        CurrencyFormatExample[] formate = new CurrencyFormatExample[locales.length];
        for (int i = 0; i < locales.length; i++) {
            formate[i].currencyFormat(locales[i]);
        }
    }
} 
```

输出：

```
9Â 843,21 â?¬ fr_FR

9.843,21 â?¬ de_DE

CAD 9.843,21 ca_CA

RSD 9,843.21 rs_RS

Rs.9,843.21 en_IN 
```

参考[这里](http://www.roseindia.net/tutorials/i18n/currency-format.shtml)：

**次要货币更新**

```
 Locale locale = Locale.UK;
  Currency curr = Currency.getInstance(locale);

  // get and print the symbol of the currency
  String symbol = curr.getSymbol(locale);
  System.out.println("Symbol is = " + symbol); 
```

输出 ：

```
Symbol is = £ 
```

# c++ - 在使用 c++ 的类中使用 pthread

> ID：13341928
> 
> 赞同：0
> 
> 时间：2012-11-12T10:20:45.527
> 
> 标签：c++, pthreads

> **可能重复：**
> [类中的 pthread 函数](https://stackoverflow.com/questions/1151582/pthread-function-from-a-class)

谁能举一个简单的例子，这样我就可以理解如何在课堂上使用 pthread ？

互联网上的例子太复杂了，我不明白这个概念。

我在不使用类的时候写了一个代码。

编辑：

我需要编译这样的东西：

```
#include<stdio.h>
#include<pthread.h>
using namespace std;
class test
{
private:
    int i = 0;
public:

static void *fun()
{
    i = i+1;
    cout << i<< endl;
}
};

int main()
{
pthread_t th;
test newTest;
pthread_create(&th, NULL, newTest.fun, NULL);
} 
```

# html - 用c#重命名html标签类

> ID：13341930
> 
> 赞同：2
> 
> 时间：2012-11-12T10:20:58.397
> 
> 标签：html, class, tags, rename

当 c# 在后面的代码中执行方法时，我想替换标记的类名。有什么解决办法吗？什么是合适的代码？

例如：转换为

仅在代码后面而不是 jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:23:32.803

使用服务器端 ( `runat="server"`) 控件并更改其 CssClass 属性。

[MSDN 参考](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)。

# haskell - 当前功能响应式编程实现的状态如何？

> ID：13341937
> 
> 赞同：90
> 
> 时间：2012-11-12T10:21:08.560
> 
> 标签：haskell, functional-programming, erlang, reactive-programming

我试图在 Haskell 中可视化一些简单的自动物理系统（如钟摆、机械臂等）。通常这些系统可以用如下等式来描述

`df/dt = c*f(t) + u(t)`

其中`u(t)`代表某种“智能控制”。这些系统看起来非常适合功能响应式编程范式。

因此，我拿起了 Paul Hudak 的书“The Haskell School of Expression”，发现那里介绍的领域特定语言“FAL”（用于功能动画语言）实际上对我的简单玩具系统非常有效（尽管有些功能，特别是`integrate`，似乎有点懒惰而无法有效使用，但很容易修复）。

我的问题是，对于当今更高级甚至实际的应用程序，更成熟、最新、维护良好、性能调整的替代方案是什么？

[这个 wiki 页面](http://www.haskell.org/haskellwiki/Functional_Reactive_Programming)列出了 Haskell 的几个选项，但我不清楚以下方面：

1.  “反应式”的状态，来自 Conal Eliott 的项目，他（据我所知）是这种编程范式的发明者之一，看起来有点陈旧。我喜欢他的代码，但也许我应该尝试其他更新的替代方案？在语法/性能/运行时稳定性方面，它们之间的主要区别是什么？

2.  引用 2011 年的一项[调查](http://www.cs.rit.edu/~eca7215/frp-independent-study/Survey.pdf)，第 6 节，“ *...... FRP 实现在性能上仍然不够高效或可预测，无法在需要延迟保证的领域中有效使用......* ”。尽管调查提出了一些有趣的可能优化，但考虑到 FRP 已经存在超过 15 年这一事实，我的印象是，至少在几年内，这个性能问题可能*非常难以解决，甚至本来就难以解决。*这是真的？

3.  [该调查的同一作者在他的博客](http://blog.edwardamsden.com/2011/03/demonstrating-time-leak-in-arrowized.html)中谈到了“时间泄漏” 。这个问题是 FRP 独有的，还是我们在使用纯非严格语言编程时通常遇到的问题？如果性能不够，您是否曾经发现随着时间的推移稳定基于 FRP 的系统太难了？

4.  这仍然是一个研究级项目吗？工厂工程师、机器人工程师、金融工程师等人是否真的在使用它们（以适合他们需要的任何语言）？

虽然我个人更喜欢 Haskell 实现，但我愿意接受其他建议。例如，拥有一个 Erlang 实现会特别有趣 --- 这样就很容易拥有一个智能、自适应、自学习的服务器进程！

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-12T13:08:33.067

现在主要有两个实用的 Haskell 库用于函数式反应式编程。两者都由一个人维护，但也收到了其他 Haskell 程序员的代码贡献：

*   [Netwire](http://hackage.haskell.org/package/netwire)专注于效率、灵活性和可预测性。它有自己的事件范式，可用于传统 FRP 无法工作的领域，包括网络服务和复杂的模拟。风格：应用和/或箭头。最初的作者和维护者：Ertugrul Söylemez（这是我）。

*   [reactive-banana](http://hackage.haskell.org/package/reactive-banana)建立在传统的 FRP 范式之上。虽然使用它很实用，但它也可以作为经典 FRP 研究的基础。它的主要重点是用户界面，并且有一个现成的 wx 界面。风格：适用。最初的作者和维护者：Heinrich Apfelmus。

您应该尝试这两种方法，但根据您的应用程序，您可能会发现其中一种更合适。

对于游戏、网络、机器人控制和模拟，您会发现 Netwire 非常有用。它为这些应用配备了现成的*电线*，包括各种有用的微分、积分和许多用于透明事件处理的功能。有关教程，请访问`Control.Wire`我链接的页面上的模块文档。

对于图形用户界面，目前最好的选择是响应式香蕉。它已经有一个 wx 接口（作为一个单独的库 reactive-banana-wx），并且 Heinrich 在此上下文中写了很多关于 FRP 的博客，包括代码示例。

回答您的其他问题：FRP 不适用于需要实时可预测性的场景。这主要归功于 Haskell，但不幸的是，FRP 很难在低级语言中实现。一旦 Haskell 本身成为实时就绪，FRP 也将到达那里。从概念上讲，Netwire 已为实时应用程序做好了准备。

时间泄漏不再是一个真正的问题，因为它们在很大程度上与一元框架有关。实际的 FRP 实现根本不提供单子接口。Yampa 已经开始了这个，Netwire 和 reactive-banana 都建立在这个基础上。

我知道目前没有使用 FRP 的商业或其他大型项目。图书馆已经准备好，但我认为人们还没有——还没有。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-12T15:12:24.830

尽管已经有一些很好的答案，但我将尝试回答您的具体问题。

1.  由于时间泄漏问题，reactive 不适用于严肃的项目。（见#3）。当前设计最相似的库是响应式香蕉，它是在响应式的启发下开发的，并与 Conal Elliott 进行了讨论。

2.  尽管 Haskell 本身不适用于硬实时应用程序，但在某些情况下可以将 Haskell 用于软实时应用程序。我不熟悉当前的研究，但我不认为这是一个无法克服的问题。我怀疑像 Yampa 这样的系统，或者像 Atom 这样的代码生成系统，可能是解决这个问题的最佳方法。

3.  “时间泄漏”是可切换 FRP 特有的问题。当系统无法释放旧对象时会发生泄漏，因为如果将来某个时间发生切换，它可能需要它们。除了内存泄漏（可能非常严重）之外，另一个后果是，当切换发生时，系统必须暂停，同时遍历旧对象链以生成当前状态。

不可切换的 frp 库（例如 Yampa 和旧版本的反应香蕉）不会受到时间泄漏的影响。可切换的 frp 库通常采用以下两种方案之一：要么它们具有特殊的“创建单子”，在其中创建 FRP 值，要么它们使用“老化”类型参数来限制可以发生切换的上下文。 [elerea](http://hackage.haskell.org/package/elerea)（可能还有 netwire？）使用前者，而最近的反应性香蕉和葡萄柚使用后者。

我所说的“可切换frp”是指实现Conal的功能`switcher :: Behavior a -> Event (Behavior a) -> Behavior a`或相同语义的一种。这意味着网络的形状可以在运行时动态切换。

这并不真正与@ertes 关于 monadic 接口的声明相矛盾：事实证明，`Monad`为 an 提供实例`Event`会使时间泄漏成为可能，并且使用上述任何一种方法都不再可能定义等效的 Monad 实例。

最后，尽管 FRP 还有很多工作要做，但我认为一些较新的平台（reactive-banana、elerea、netwire）足够稳定和成熟，您可以从中构建可靠的代码。但是您可能需要花费大量时间来学习细节，以了解如何获得良好的性能。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-11-12T13:26:31.527

我将列出 Mono 和 .Net 空间中的一些项目，以及我不久前发现的 Haskell 空间中的一个项目。我将从 Haskell 开始。

## 榆树 -[链接](http://elm-lang.org/)

根据其网站的描述：

> Elm 旨在让前端 Web 开发更愉快。它引入了一种新的 GUI 编程方法，可以纠正 HTML、CSS 和 JavaScript 的系统性问题。Elm 允许您快速轻松地使用可视化布局、使用画布、管理复杂的用户输入以及逃离回调地狱。

它有自己的[FRP](http://elm-lang.org/learn/What-is-FRP.elm)变体。从玩它的例子来看，它似乎很成熟。

## 反应式扩展 -[链接](http://msdn.microsoft.com/en-us/data/gg577609)

其首页的描述：

> Reactive Extensions (Rx) 是一个库，用于使用可观察序列和 LINQ 样式的查询运算符组成异步和基于事件的程序。使用 Rx，开发人员可以使用 Observables 表示异步数据流，使用 LINQ 运算符查询异步数据流，并使用调度程序参数化异步数据流中的并发性。简单地说，Rx = Observables + LINQ + Schedulers。

Reactive Extensions 来自 MSFT，实现了许多简化事件处理的优秀操作符。它是在几天前[开源的。](https://github.com/Reactive-Extensions)它非常成熟并用于生产；在我看来，对于 Windows 8 API，它会是比 TPL 库提供的更好的 API；因为 observables 既可以是热的也可以是冷的，可以重试/合并等，而任务总是代表热的或已完成的计算，这些计算要么正在运行，要么出现故障，要么已完成。

我已经使用 Rx 为异步编写了服务器端代码，但我必须承认，在 C# 中编写函数式可能有点烦人。F# 有几个封装器，但很难跟踪 API 开发，因为该组相对封闭，不像其他项目那样由 MSFT 推广。

它的开源来自其 IL-to-JS 编译器的开源，因此它可能与 JavaScript 或 Elm 一起工作。

您可以使用消息代理（如 RabbitMQ 和 SocksJS）将 F#/C#/JS/Haskell 很好地绑定在一起。

## Bling UI 工具包 -[链接](https://bling.codeplex.com/)

其首页的描述：

> Bling 是一个基于 C# 的库，用于在 Microsoft 的 WPF/.NET 上轻松编程图像、动画、交互和可视化。Bling 面向设计技术人员，即有时会编程的设计师，以帮助快速制作丰富的 UI 设计理念的原型。学生、艺术家、研究人员和业余爱好者也会发现 Bling 作为快速表达想法或可视化的工具很有用。Bling 的 API 和结构针对丢弃代码的快速编程进行了优化，而不是生产代码的仔细编程。

免费[LtU 文章](http://lambda-the-ultimate.org/node/2906)。

我已经对此进行了测试，但没有为客户项目使用它。它看起来很棒，有很好的 C# 运算符重载，形成值之间的绑定。它使用 WPF/SL/(WinRT) 中的依赖属性作为事件源。它的 3D 动画在合理的硬件上运行良好。如果我最终从事需要可视化的项目，我会使用它；可能将其移植到 Windows 8。

## ReactiveUI -[链接](http://www.reactiveui.net/)

Paul Betts，之前在 MSFT，现在在 Github，编写了这个框架。我已经非常广泛地使用它并且喜欢这个模型。它比 Blink 更解耦（本质上与使用 Rx 和它的抽象） - 使用它更容易对代码进行单元测试。Windows 的 github git 客户端就是用这个写的。

## 注释

对于大多数性能要求高的应用程序来说，反应式模型的性能已经足够了。如果您正在考虑硬实时，我敢打赌大多数 GC 语言都有问题。Rx，ReactiveUI 创建了一些需要 GC 的小对象，因为这就是创建/处理订阅的方式，并且中间值在回调的反应性“monad”中进行处理。一般来说，在.Net上，我更喜欢反应式编程而不是基于任务的编程，因为回调是静态的（在编译时知道，没有分配），而任务是动态分配的（未知，所有调用都需要一个实例，垃圾创建） - 并且 lambdas 编译成编译器生成的类。

显然 C# 和 F# 是经过严格评估的，所以这里的时间泄漏不是问题。JS也是一样。不过，这可能是可重放或缓存的 observables 的问题。

# jquery - 切换 jquery div 滑出

> ID：13341938
> 
> 赞同：0
> 
> 时间：2012-11-12T10:21:10.000
> 
> 标签：jquery, toggle, slide, slidetoggle

我让 Jquery div 在幻灯片中滑出。我已经使用这个[文档](http://docs.jquery.com/UI/Effects/Slide)来构建它。

如果你在[这里查看](http://tommywebdesigner.com/Albert/index.html)我的案例，你会发现 Jquery div 在幻灯片中滑出，如果你点击箭头，潜水就会出来，但我不能提供一旦幻灯片出来，点击它就可以关闭的功能*箭头*回来。

可能有一种更简单更好的方法可以做到这一点，这就是我正在使用的代码。

我怎样才能让我的箭头返回工作以关闭 div 滑出？如果您认为有更好的方法可以实现这一目标，请告诉我。

希望解释清楚

谢谢你的帮助

```
 <script>
      $(document).ready(function()
      {
          $(".click").click(function ()
          {
             $(".slideout").toggle("slide", {}, 100);
             $('.click').hide();
             $('.back').toggle();
          });
     });
</script> 
```

我的 CSS 代码：

```
 .slideout { display: none; margin: 0px; width: 300px; height: 450px; background: url("img/rejilla.png") repeat scroll 0 0 transparent; position: absolute; z-index: 101; top:15px;
    -webkit-border-top-left-radius: 16px; -webkit-border-bottom-left-radius: 4px; -moz-border-radius-topleft: 16px; -moz-border-radius-bottomleft: 4px; border-top-left-radius: 16px; border-bottom-left-radius: 4px; opacity: 0.5; }
    .click { z-index: 102; left:-15px; position: absolute; top: 10px; z-index:102; }
    .back {float: right; position: absolute; z-index: 102; left: 285px; top: 15px; display: none;} 
```

HTML 代码

```
<div id="slideshow">
        <div id="example">
            <img src="img/arrow.png" class="click" alt="arrow" width="50" height="100" /><div class="slideout">bla bla bla</div><img src="img/arrow-prev.png" class="back" alt="arrow" width="50" height="100" /> 
                <div id="slides">
                    <div class="slides_container">
                        <a href="" title="Slide 1" target="_blank"><img class="slide" src="img/slide-1.jpg" alt="slide-1" width="1020" height="450" /></a>
                        <a href="" title="Slide 2" target="_blank"><img class="slide" src="img/slide-2.jpg" alt="slide-2" width="1020" height="450" /></a>
                        <a href="" title="Slide 3" target="_blank"><img class="slide" src="img/slide-3.jpg" alt="slide-3" width="1020" height="450" /></a>
                    </div>
                </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:54:51.157

如何使用这样的东西：

```
$(".click").click(function() {
    margin = +$('.slideout').css('margin-left').replace('px', '');
    if (margin < 0)
    {
        $('.slideout').animate({marginLeft: "0px"}, 500 );
        $('.click').text('<');
    } else {
        $('.slideout').animate({marginLeft: "-200px"}, 500 );
        $('.click').text('>');
    }        
});​ 
```

显然你可以花点心思（不使用 < 和 > 来表示方向将开始）但是滑出工作，[这是一个演示](http://jsfiddle.net/qZ6q7/2/)，虽然它没有使用你的 html

编辑 - 这是一个更新的[小提琴](http://jsfiddle.net/qZ6q7/3/)，使用了你的 html 的一个非常轻微的修改版本。我减少了幻灯片的宽度并重新排列了一些滑出的东西（带有点击图像等），以使其更容易理解。

让我知道这是否像您现在想要的那样工作，它应该很容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:51:39.813

尝试这样的事情

HTML 代码

```
<img id="myImg" class="click" width="50" height="100" alt="arrow" src="img/arrow.png"> 
```

Javascript

```
<script>
  $(document).ready(function()
  {
      $("#myImg").click(function ()
      {
         $(".slideout").toggle("slide", {}, 100);
         if($(this).hasClass('click')){
            $(this).removeClass('click');
            $(this).addClass('back');
         }else{
            $(this).removeClass('back');
            $(this).addClass('click');
         }
      });
 });
</script> 
```

我没有检查代码，所以这只是粗略的想法

# python - python csv写列而不是行

> ID：13341939
> 
> 赞同：0
> 
> 时间：2012-11-12T10:21:10.687
> 
> 标签：python, csv, row

我有一个生成 10 行的脚本，每行都在单独的行上。我希望它生成 10 列，而不是行。

```
 import csv
    import os
    import random
    for dirname, dirnames, filenames in os.walk(r"C:/Users/s/Desktop/filme/"):
        for subdirname in dirnames:
        foldere_filme = os.path.join(dirname, subdirname)
        numarul_folderelor = foldere_filme.replace("C:/Users/s/Desktop/filme/", "")
        print numarul_folderelor #1,2,3,4,5...
        root_text = "C:/Users/s/Desktop/text/tags"+numarul_folderelor+".csv"
        fisier_text_tags = csv.writer(open(root_text,'wb'))
        for filenames in os.listdir(foldere_filme):
            tags = filenames.replace("<SP>", " ").replace(".avi", "")
            test = ['blah '+varible+' test, blah '+varible+' aaaaah clip, blah '+varible+' putlocker, download '+varible+' clip',
                    'blah '+varible+' free tuttiing, blah '+varible+' clip free, blah '+varible+' test clip, download '+varible+' aaaaah clip',
                    'blah '+varible+' 2012, blah '+varible+' test free, download '+varible+' 2012 clip, free tuttiing '+varible+'',
                    'blah '+varible+' free aaaaah clip, blah '+varible+' test 2012, where to blah '+varible+', '+varible+' aaaaah clip test',
                    'strem '+varible+' test free, blah '+varible+' free 2012, blah '+varible+' test for free, '+varible+' aaaaah clip test',
                    'putlocker 2012, blah '+varible+' free, download '+varible+' test, blah test '+varible+' for free, free clip tuttiing']
            random.shuffle(test)
            fisier_text_tags.writerow(test[0:1]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:27:21.213

```
import csv
    import os
    import random
    for dirname, dirnames, filenames in os.walk(r"C:/Users/s/Desktop/filme/"):
        for subdirname in dirnames:
        foldere_filme = os.path.join(dirname, subdirname)
        numarul_folderelor = foldere_filme.replace("C:/Users/s/Desktop/filme/", "")
        print numarul_folderelor #1,2,3,4,5...
        root_text = "C:/Users/s/Desktop/text/tags"+numarul_folderelor+".csv"
        fisier_text_tags = csv.writer(open(root_text,'wb'))

        row_test = []

        for filenames in os.listdir(foldere_filme):
            tags = filenames.replace("<SP>", " ").replace(".avi", "")
            test = ['blah '+varible+' test, blah '+varible+' aaaaah clip, blah '+varible+' putlocker, download '+varible+' clip',
                    'blah '+varible+' free tuttiing, blah '+varible+' clip free, blah '+varible+' test clip, download '+varible+' aaaaah clip',
                    'blah '+varible+' 2012, blah '+varible+' test free, download '+varible+' 2012 clip, free tuttiing '+varible+'',
                    'blah '+varible+' free aaaaah clip, blah '+varible+' test 2012, where to blah '+varible+', '+varible+' aaaaah clip test',
                    'strem '+varible+' test free, blah '+varible+' free 2012, blah '+varible+' test for free, '+varible+' aaaaah clip test',
                    'putlocker 2012, blah '+varible+' free, download '+varible+' test, blah test '+varible+' for free, free clip tuttiing']
            random.shuffle(test)

            row_test.append(test[0])

       fisier_text_tags.writerow(row_test) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:33:45.380

您可以传递一个可迭代对象`writerow`以写入多个列：

```
writer.writerow(['hello', 'world']) 
```

该代码将在写入文件时生成此 csv 文档：

```
hello,world 
```

# javascript - 如何为不同的android屏幕尺寸创建相对布局钛tableViewRow？

> ID：13341942
> 
> 赞同：0
> 
> 时间：2012-11-12T10:21:14.503
> 
> 标签：javascript, titanium, titanium-mobile

我创建了简单的表格视图应用程序，在 tableViewRow 中显示一些数据.. 目前，我只使用固定测量这是我的代码：

```
 function addTableView(){
        var tableData = [];

        for (var i = 0; i<10; i++){
            var row = Ti.UI.createTableViewRow({
                className:'forumEvent', // used to improve table performance
                rowIndex:i, // custom property, useful for determining the row during events
                selectionStyle:0,
            });

            var checkBox = Ti.UI.createSwitch({
                style:Ti.UI.Android.SWITCH_STYLE_CHECKBOX,
                value:false,
                left:5
            }); 

            var lblField = Ti.UI.createLabel({
                realValue: 'Value',
                text:'Field : Value',
                font:{fontFamily:'Arial', fontSize:DefaultFontSize, fontWeight:'normal'},
                color:'#222',
                top:5,
                left:80
            });

            var lblField2 = Ti.UI.createLabel({
                realValue: 'Value',
                text:'Field : Value',
                font:{fontFamily:'Arial', fontSize:DefaultFontSize, fontWeight:'normal'},
                color:'#222',
                top:35,
                left:80
            });

            var lblField3 = Ti.UI.createLabel({
                realValue: 'Value',
                text:'Field : Value',
                font:{fontFamily:'Arial', fontSize:DefaultFontSize, fontWeight:'normal'},
                color:'#222',
                top:65,
                left:80
            });

            row.add(checkBox);
            row.add(lblField);
            row.add(lblField2);
            row.add(lblField3);

            checkBox.addEventListener('click',function(e){
                alert(checkBox.toImage().width);
            });

            tableData.push(row);
        }

        var tempTable =  Titanium.UI.createTableView({
            data:tableData,
            editable: Titanium.Platform.osname === 'iphone' ? true : false,
            name:'Picking table'
        });

        return tempTable;
    } 
```

在更大的屏幕上，它可以完美显示如下： ![HVGA 布局](../Images/dce05514d38986c209586f146c5f8391.png)

但是如果我把我的模拟器屏幕改成QVGA，它就不能像以前那样显示了，像这样： ![QVGA 布局](../Images/d586e3b0c195e51db69d14873b4885fd.png)

有谁知道如何创建相对布局，以便在小屏幕和大屏幕上都能完美显示？先谢谢了。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T05:55:12.577

```
var _p = function(densityPixels) {
        return densityPixels * Ti.Platform.displayCaps.dpi / 160;
    }

var logoView = Ti.UI.createView({
        backgroundImage : '/images/logo.png',
        top : _p(100),
        width : _p(200),
        height : _p(360)
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:38:45.440

迈克尔，看看下面的链接，它可能对你也有用

1.  [钛处理不同的分辨率](https://stackoverflow.com/questions/7326632/titanium-handling-different-resoutions)
2.  [http://developer.appcelerator.com/blog/2011/06/new-defaults-for-android-layouts-in-1-7.html](http://developer.appcelerator.com/blog/2011/06/new-defaults-for-android-layouts-in-1-7.html)
3.  [https://wiki.appcelerator.org/display/guides/Titanium+2.0+Layout+Changes](https://wiki.appcelerator.org/display/guides/Titanium+2.0+Layout+Changes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T06:13:05.060

使用百分比肯定会有所帮助。但是您应该查看布局属性。 [http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.View-property-layout](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.View-property-layout)

您可以将 layout:'horizo​​ntal' 属性添加到行

```
 var row = Ti.UI.createTableViewRow({
            className:'forumEvent', // used to improve table performance
            rowIndex:i, // custom property, useful for determining the row during events
            selectionStyle:0,
            layout:'horizontal'
        }); 
```

使用此属性集，对象将立即从左到右彼此相邻堆叠。

然后将三个标签放置在一个容器中，其中包含 layout:'vertical' 和一个较小的 left 属性以用于填充。此外，从标签中删除 left 属性（这将由父容器处理）

```
 var labelContainer = Ti.UI.createView({
            layout:'vertical',
            height:Ti.UI.SIZE,
            width:Ti.UI.SIZE,
            left:5 //adjust this accordingly
        })

        var lblField = Ti.UI.createLabel({
            realValue: 'Value',
            text:'Field : Value',
            font:{fontFamily:'Arial', fontSize:DefaultFontSize, fontWeight:'normal'},
            color:'#222',
            top:5,

        });

        var lblField2 = Ti.UI.createLabel({
            realValue: 'Value',
            text:'Field : Value',
            font:{fontFamily:'Arial', fontSize:DefaultFontSize, fontWeight:'normal'},
            color:'#222',
            top:5,

        });

        var lblField3 = Ti.UI.createLabel({
            realValue: 'Value',
            text:'Field : Value',
            font:{fontFamily:'Arial', fontSize:DefaultFontSize, fontWeight:'normal'},
            color:'#222',
            top:5,

        });

        labelContainer.add()

        row.add(checkBox);
        labelContainer.add(lblField);
        labelContainer.add(lblField2);
        labelContainer.add(lblField3);
        row.add(labelContainer); 
```

该行将直接在复选框旁边添加整个标签容器（将标签从上到下直接堆叠在彼此下方）。TI.UI.SIZE 的 width 和 height 属性强制对象具有其子对象的宽度和高度。

一旦我开始使用与 TI.UI.SIZE/Ti.UI.FILL 结合的布局属性（取其父级的大小），布局就变得容易多了:) 希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:41:09.630

不确定您正在使用什么，但是您可以使用响应式设计技术很好地更改布局。

看看这个链接： [http ://www.html5rocks.com/en/mobile/responsivedesign/](http://www.html5rocks.com/en/mobile/responsivedesign/)

我相信你会发现一些好的和漂亮的技巧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T11:34:01.130

您可以使用百分比值来声明控件的宽度和高度。就像

```
var checkBox = Ti.UI.createSwitch({
    style:Ti.UI.Android.SWITCH_STYLE_CHECKBOX,
    value:false,
    left:'2%'
}); 

var lblField = Ti.UI.createLabel({
    realValue: 'Value',
    text:'Field : Value',
    font:{fontFamily:'Arial', fontSize:DefaultFontSize, fontWeight:'normal'},
    color:'#222',
    top:5,
    left:'40%',
    width :'80%'
}); 
```

以百分比进行测量对所有屏幕尺寸都有效，它会根据屏幕尺寸自动调整

# javascript - 带有计时器的jQuery addClass removeClass

> ID：13341945
> 
> 赞同：1
> 
> 时间：2012-11-12T10:21:25.517
> 
> 标签：javascript, jquery, infinite-loop

我对“最新消息”模块有疑问。请查看[http://www.proudfootsupermarkets.com/](http://www.proudfootsupermarkets.com/)以查看该模块的示例（它是靠近页面顶部的 div，其中包含大图像）。

目前我已经设置好了，当用户点击一个标签时，主文章就会显示出来。用于此的 jQuery 是：

```
 jQuery(document).ready(function() {

    $(".moduletable.latestnews article:first-child").addClass("atfront")

    $(".moduletable.latestnews article").click(function(){
        $(".moduletable.latestnews article").css("zIndex",1).addClass("atback").removeClass("atfront");
        $(this).css("zIndex",100).addClass("atfront").removeClass("atback");
    });
}); 
```

这一切都非常简单明了。我遇到的问题是我希望文章在几秒钟后自动更改。然后这将进入一个无限循环，从文章 1 开始，然后在几秒钟后显示文章 2 等等……

我确信这相当简单，但我已经用尽了我对 JavaScript 的了解。感谢您提供的任何帮助:)

我创建了一个 jsfiddle [http://jsfiddle.net/Bempv/](http://jsfiddle.net/Bempv/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:31:50.203

您可以使用 setTimeout 更改前面的文章。如果您选择带有“.atfront”类的文章，然后使用`.next()`选择器，您应该会获得您正在寻找的功能

```
$(function(){
    var articleToggler = function articleToggler(){
    var front = "atfront",
        back = "atback";
    return function(){
       var selection = $(".moduletable.latestnews")
                          .find("article.atfront")
                          .addClass(back)
                          .removeClass(front);
           next = selection.next("article"); 
           next = next.length ? next : $(".moduletable.latestnews")
                                   .find("article").first();
           next.addClass(front)
               .removeClass(back);
           console.log(selection.length,next[0])  

       setTimeout(articleToggler(),1000); //changes every second
    };
};

//start the rotation
(articleToggler())();
}); 
```

一旦超时到期， setTimeout 将调用作为第一个参数传递的函数。超时参数以毫秒为单位，因此上面的代码在调用函数之前等待 1 秒。由于上述函数将其自身添加为回调，这将无限重复

# java - Android - 在更改选项卡上重新加载 WebView

> ID：13341951
> 
> 赞同：3
> 
> 时间：2012-11-12T10:21:48.247
> 
> 标签：java, android

主要活动：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    Resources ressources = getResources(); 
    TabHost tabHost = getTabHost(); 

    Intent intentHome = new Intent().setClass(this, Home.class);
    TabSpec tabHome = tabHost
      .newTabSpec("Android")
      .setIndicator("", ressources.getDrawable(R.drawable.home_icon))
      .setContent(intentHome);

    tabHost.addTab(tabHome);
    } 
```

主页活动：

```
public class Home extends Activity {

private WebView browser;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

    this.browser = (WebView) findViewById(R.id.browser);
    this.browser.setWebViewClient(new WebViewClient());
    this.browser.loadUrl("http://google.com");
}
} 
```

当我更改我的 Home.activity 和 WebView 重新加载选项卡时，我该如何关闭它？感谢帮助 ：）

# mysql - 替换mysql中的字符串

> ID：13341952
> 
> 赞同：2
> 
> 时间：2012-11-12T10:21:52.257
> 
> 标签：mysql, regex, replace

如果满足以下查询，我想在 mysql 中替换`"|"`为`"_"`

```
SELECT COUNT(*) FROM wp_posts WHERE post_content REGEXP 'text\\(584\\|([a-zA-Z0-9_]+)\\|([a-zA-Z0-9_])' 
```

所以如果找到例如`text(584|g345|2344`应该看最后 `text(584_g345_2344`

如果我使用 REGEXP 来查找匹配项，是否有可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:24:34.293

您可以使用：

```
REPLACE(text_string, from_string, to_string) 
```

更多信息可以在[这里](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)找到。

**编辑：**
但是，你不能混合`REGEX`和`REPLACE`.
你需要用几个查询来完成它，你看到[了](https://stackoverflow.com/q/6397285/1031900)吗？

# c++ - 在 Cython 中使用键盘中断“while 循环”

> ID：13341953
> 
> 赞同：3
> 
> 时间：2012-11-12T10:22:00.060
> 
> 标签：c++, python, interrupt, cython, keyboard-events

我希望能够使用通常的 CTRL+C 中断命令用 cython 中断一个长函数。我的 C++ long 函数在 Cython 代码的 while 循环内重复调用，但我希望能够在循环期间发送“中断”并阻止 while 循环。

中断还应等待 longFunction() 完成，以免数据丢失或保持未知状态。

这是我的第一个实现之一，显然不起作用：

```
computed=0;

print "Computing long function..."
    while ( computed==0 ):
        try:
            computed = self.thisptr.aLongFunction()
        except (KeyboardInterrupt, SystemExit):
            computed=1
            print '\n! Received keyboard interrupt.\n'
            break; 
```

（ps`self.thisptr`是指向当前实现的类的指针`aLongFunction()`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:29:04.720

我不是 Python C-Api foo 大师，但是这可行，但也许不是最好的方法：

```
cdef extern from "Python.h":
    int PyErr_CheckSignals()

def test_interrupt():
    cdef int i = 0
    while i < 9999999999 and not PyErr_CheckSignals():
        # do fancy stuff.
        i += 1 
```

当然这不是异步的，这可能是可能的，但我不知道，这会破坏任何信号的循环，而不仅仅是 Ctrl+C。另外，最好不要在每次循环迭代时检查信号，至少如果所做的工作非常便宜的话。

如果没有返回，您可以调用`PyErr_Occurred`等，然后查看特定的特定杀戮信号。（无论如何，请查看python C-Api以获取详细信息......）`PyErr_CheckSignals``0``Exception``KeybordInterrupt`

* * *

如果您在 while 循环中调用 cython`cdef`函数，您也可以通过添加`except *`：

```
cdef function(...) except *:
    pass 
```

另请参阅[http://docs.cython.org/src/userguide/language_basics.html#error-return-values](http://docs.cython.org/src/userguide/language_basics.html#error-return-values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:52:03.800

你应该能够做这样的事情：

```
import signal

class Test():
    def __init__(self):
        self.loop_finished = False
        signal.signal(signal.SIGINT, self.abort_loop)

    def abort_loop(self, signal, frame):
        self.loop_finished = True

    def go(self):
        while not self.loop_finished:
            print "Calculating"

            # Do your calculations
            # Once calcations are done, set self.loop_finished to True

        print "Calculating over"

Test().go() 
```

您还可以使用其他变量来跟踪计算是否被手动中止。

# bash - 如何在 shell 脚本中的 curl 命令中传递变量

> ID：13341955
> 
> 赞同：44
> 
> 时间：2012-11-12T10:22:08.223
> 
> 标签：bash, shell, curl

我有一个 curl 命令：

```
curl -u ${USER_ID}:${PASSWORD} -X GET 'http://blah.gso.woo.com:8080/rest/job-execution/job-details/${job_id}' 
```

该变量`job_id`中有一个值，例如 1160。当我在 shell 中执行 curl 命令时，它给了我以下错误：

```
{"message":"Sorry. An unexpected error occured.", "stacktrace":"Bad Request. The request could not be understood by the server due to malformed syntax."} 
```

如果我直接在命令中传递数字'1160'，如下所示，curl命令有效。

```
curl -u ${USER_ID}:${PASSWORD} -X GET 'http://blah.gso.woo.com:8080/rest/job-execution/job-details/1160' 
```

我希望能够在 curl 命令中传递变量的值。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-12T10:23:11.700

在[shell](/questions/tagged/shell "显示标记为“外壳”的问题")中使用变量时，只能使用双引号，不能使用单引号：单引号内的变量不展开。了解 ' 和 " 和 ` 之间的区别。参见[http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)和[http://wiki.bash-hackers.org/syntax/words](http://wiki.bash-hackers.org/syntax/words)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2020-01-30T18:02:12.303

我在传递时也遇到了这个问题，它是通过使用'“$1”'解决的

请参阅下面的**connection.uri**

```
curl -X POST -H "Content-Type: application/json" --data '
  {"name": "mysql-atlas-sink",
   "config": {
     "connector.class":"com.mongodb.kafka.connect.MongoSinkConnector",
     "tasks.max":"1",
     "topics":"mysqlstock.Stocks.StockData",
     "connection.uri":"'"$1"'",
     "database":"Stocks",
     "collection":"StockData",
     "key.converter":"io.confluent.connect.avro.AvroConverter",
     "key.converter.schema.registry.url":"http://schema-registry:8081",
     "value.converter":"io.confluent.connect.avro.AvroConverter",
     "value.converter.schema.registry.url":"http://schema-registry:8081",
     "transforms": "ExtractField",
     "transforms.ExtractField.type":"org.apache.kafka.connect.transforms.ExtractField$Value",
     "transforms.ExtractField.field":"after"
}}' http://localhost:8083/connectors -w "\n" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-06-04T19:57:15.140

如何使用[shell变量将](/questions/tagged/shell "show questions tagged 'shell'")[json](/questions/tagged/json "显示标记为“json”的问题")传递给[curl](/questions/tagged/curl "显示标记为“卷曲”的问题")：

```
myvar=foobar
curl -H "Content-Type: application/json" --data @/dev/stdin<<EOF
{ "xkey": "$myvar" }
EOF 
```

使用 switch`-d`或`--data`，**POST**请求是*隐式的*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-01T18:38:17.530

```
userdetails="$username:$apppassword"
base_url_part='https://api.XXX.org/2.0/repositories'
path="/$teamName/$repoName/downloads/$filename"
base_url="$base_url_part$path"**strong text**
curl  -L -u "$userdetails" "$base_url" -o "$downloadfilename" 
```

# visual-studio - dotless.comple.exe。为什么会停止？我做错了什么？或者建议我和替代方法

> ID：13341960
> 
> 赞同：1
> 
> 时间：2012-11-12T10:22:39.107
> 
> 标签：visual-studio, less, nuget

我正在尝试将我的`less`文件编译为`css`，我正在使用`dotless`

我用`nuget`. 这是我在项目“预构建事件命令行”中设置的设置

```
“$(SolutionDir)packages\dotless.1.3.1.0\tool\dotless.compiler.exe” 
“$(ProjectDir)Content\style.less” 
“$(ProjectDir)Content\style_less.css” 
```

构建时发生的事情是它只是`style.less`在记事本中打开文件并停在那里。当我关闭`less`文件时，它会打开输出`css`（空）和相同的故事在这里它只是停止，当我关闭`css`它时它会进行常规构建。

想法？需要时间吗？这种行为正常吗？

**编辑**

有没有其他方法可以在 Windows 环境中编译 LESS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:56:51.783

正如我在一些问题评论中所说，因为 DotLess 对我不起作用，所以我改用其他方法：使用官方 LESS 编译器（JavaScript 编译器）编译 LESS 并使用 Windows Script Host 执行。

在您的解决方案目录中创建一个文件夹*（即为您的特定解决方案存储您的**.sln和项目目录的位置）。***将您的文件夹称为**Build**。

**你需要这些脚本（在Build**文件夹中为每个脚本创建一个文件，我给你整个文件名）：

**lessc.wsf**

```
<!--
Less.js compiler for Windows Script Host
http://blog.dotsmart.net/

Copyright (c) 2010, Duncan Smart
Licensed under the Apache 2.0 License.
-->
<job>
<script language="jscript">
     // Stub out globals
    var window = this;
    var location = window.location = { 
        port: 0,
        href: ''
    };
    var fso = new ActiveXObject("Scripting.FileSystemObject");
    var input = null;

    var util = {
        readText: function (filename) {
            //WScript.StdErr.WriteLine("readText: " + filename);
            var file = fso.OpenTextFile(filename);
            // Don't error on empty files
            var text = file.AtEndOfStream ? '' : file.ReadAll();

            // Strip off any UTF-8 BOM
            var utf8bom = String.fromCharCode(0xEF, 0xBB, 0xBF);
            if (text.substr(0, utf8bom.length) == utf8bom) {
                text = text.substr(utf8bom.length);
            }
            file.Close();
            return text;
        }
    };

    // XMLHttpRequest that just gets local files. Used when processing "@import"
    function XMLHttpRequest(){}
    XMLHttpRequest.prototype = {
        open: function (method, url, async) {
            this.url = url;
        },
        send: function () {
            // get the file path relative to the input less file/directory
            var currDir = fso.folderExists(input) ? input : fso.getParentFolderName(input);
            var filename = fso.BuildPath(currDir, this.url);

            //WScript.StdErr.WriteLine("XHR.send " + filename);

            // Little hack so *.less will resolve to *.less.css also. Helps with Visual Studio 
            // ensuring that file BuildAction is set to Content and you get rudimentary syntax highlighting with no set up.
            if (filename.match(/.less$/i) && !fso.FileExists(filename)) {
                filename = filename.replace(/.less$/i, '.less.css');
            }

            try {
                this.status = 200;
                this.responseText = util.readText(filename);
            }
            catch (e) {
                this.status = 404;
                this.responseText = e.description;
            }
        },
        setRequestHeader:  function () {},
        getResponseHeader: function () {}
    };

    // Fake document
    var document = {
        _dummyElement: {
            childNodes: [], 
            appendChild: function(){},
            style: {}
        },
        getElementsByTagName: function(){ return []; },
        getElementById: function(){ return this._dummyElement; },
        createElement:  function(){ return this._dummyElement; },
        createTextNode: function(){ return this._dummyElement; }
    };        

</script>

<!-- less.js from https://github.com/cloudhead/less.js/tree/master/dist/ -->
<script language="jscript" src="less.js" />

<script language="jscript"> 
    // Parse args
    var args = {};
    for (var i = 0; i < WScript.Arguments.Length; i++) {
        var arg = WScript.Arguments.Item(i);
        // Handle "-switch" and "--switch"
        var match = arg.match(/^--?([a-z][0-9a-z-]*)$/i);
        if (match) {
            i = match[1];
            arg = true;
        }
        args[i] = arg;
    }

    input = args[0];
    var output = args[1];

    if (fso.folderExists(input)) {
        input = fso.getAbsolutePathName(input);
        var files = getFiles(input, /\.less$/i);
        for (var i = 0; i < files.length; i++) {
            var file = files[i];
            convert(file.path, output + '\\' + file.name.replace( /\.less$/i, '.css'));
        }
    }
    else {
        if (fso.folderexists(output)) {
            output = fso.getAbsolutePathName(output) + '\\' + fso.getfile(input).name.replace(/\.less$/i, '.css');
        }
        convert(input, output);
    }

    // Returns array of {name:'foo.bar', path:'c:\baz\foo.bar'} for given directory and pattern
    function getFiles(dir, regex) {
        var e = new Enumerator(fso.getFolder(dir).files);
        var files = []
        for (; !e.atEnd(); e.moveNext()) {
            if (regex.test(e.item().path)) {
                files.push({
                    name: e.item().name, 
                    path: e.item().path
                });
            }
        }
        return files;
    }

    function convert(input, output) {
        if (!input) {
            WScript.StdErr.WriteLine("lessc.wsf: no input files");
            WScript.StdErr.WriteLine("Usage:");
            WScript.StdErr.WriteLine("  Single file: cscript //nologo lessc.wsf input.less [output.css] [-compress]");
            WScript.StdErr.WriteLine("  Directory:   cscript //nologo lessc.wsf inputdir outputdir [-compress]");
            WScript.Quit(1);
        }

        var data;
        if (input == '-') {
            var chunks = [];
            while (!WScript.StdIn.AtEndOfStream)
            chunks.push(WScript.StdIn.ReadAll());
            data = chunks.join('');
        }
        else {
            data = util.readText(input);
        }

        var parser = new less.Parser({
            filename: input
        });

        try {
            parser.parse(data, function (err, tree) {

                if (err) {
                    WScript.StdErr.WriteLine("ERR: ");
                    for (var i in err) {
                        if (err[i]) {
                            WScript.StdErr.WriteLine("  " + i + ': ' + err[i]);
                        }
                    }
                    WScript.Quit(2);
                }
                else {
                    var css = tree.toCSS({
                        compress: args.compress
                    });
                    if (output) {
                        if(fso.FileExists(output))
                    {
                       var checkfile = fso.GetFile(output);
                       if(checkfile.Attributes & 1)
                       {
                           checkfile.Attributes = checkfile.Attributes ^ 1
                       }
                    }
                        var outputfile = fso.CreateTextFile(output);
                        outputfile.Write(css);
                        outputfile.Close();
                    }
                    else {
                        WScript.StdOut.Write(css);
                    }
                }
            });
        }
        catch (e) {
            WScript.StdErr.WriteLine("ERROR:");
            for (var i in e) {
                if (e[i]) {
                    WScript.StdErr.WriteLine("  " + i + ': ' + e[i]);
                }
            }
            WScript.Quit(3);
        }

        // Sometimes less will return errors inside the fake HTML element
        if (document._dummyElement.innerHTML && document._dummyElement.innerHTML.match(/Syntax Error/i)) {
            var s = document._dummyElement.innerHTML;
            s = s.replace(/<[^>]+(\/?)>/g, function (m) { return m.indexOf('/') > 0 && m !== '</label>' ? "\n" : '' });
            s = s.replace(/\n+/g, '\n');

            WScript.StdErr.WriteLine("ERR: ");
            WScript.StdErr.WriteLine(s);
            WScript.Quit(2);
        }
    }
</script>
</job> 
```

**小号.cmd**

```
::For convenience
@cscript //nologo "%~dp0lessc.wsf" %* 
```

**少目标**

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<PropertyGroup>
  <DotLessCompilerPath>$(SolutionDir)Build\lessc.cmd</DotLessCompilerPath>
</PropertyGroup>
  <Target Name="AllLessToCss" AfterTargets="AfterBuild">
    <CreateItem Include="$(ProjectDir)**\*.less">
      <Output TaskParameter="Include" ItemName="LessFile" />
    </CreateItem>

    <Message Text="" Importance="high" />
    <Message Text="Now compiling LESS files..." Importance="high" />
    <Message Text="------------------------------------------------------------" Importance="high" />
    <Message Text="" Importance="high" />
    <Message Text="File: &quot;%(LessFile.FullPath) ======>>>>> &quot;%(LessFile.RootDir)%(LessFile.Directory)%(LessFile.FileName).css&quot;" Importance="high" />

    <Exec Command="&quot;$(DotLessCompilerPath)&quot; &quot;%(LessFile.FullPath)&quot; &quot;%(LessFile.RootDir)%(LessFile.Directory)%(LessFile.FileName).css&quot; -compress"  />

    <Message Text="" Importance="high" />
    <Message Text="------------------------------------------------------------" Importance="high" />
    <Message Text="" Importance="high" />
  </Target>
</project> 
```

一旦您在**Build**文件夹中创建了整个文件，您需要修改您的 ASP.NET 应用程序项目文件（即**.csproj**）。为了修改项目文件，您需要在 Visual Studio IDE 中卸载项目*（在解决方案资源管理器中右键单击项目节点并选择“卸载项目”）*。

现在再次右键单击卸载的项目并选择“编辑项目文件”。转到项目文件的末尾，在`</project>`添加以下 XML 代码之前：

```
<Import Project="$(SolutionDir)Build\less.targets" /> 
```

最后，在 Visual Studio 中重新加载您的 ASP.NET 项目，构建它，如果一切顺利，您将找到任何 ASP.NET 项目 LESS (.less) 文件的“.css”对应项！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:03:05.133

我在我的项目中手动安装了 Less.net，这是在我的 Pre-Build 活动中：

```
If "$(ConfigurationName)" == Debug (
FOR %%i IN ("$(ProjectDir)css\*.less") DO ("$(ProjectDir)Tools\dotless.Compiler.exe" "%%i" )
) Else (
FOR %%i IN ("$(ProjectDir)css\*.less") DO ("$(ProjectDir)Tools\dotless.Compiler.exe" -m "%%i" )
) 
```

此代码将查看 css 文件夹并将所有 .less 文件转换为 css 文件，当项目处于调试模式时 css 将是可读的，否则它将被压缩。不要忘记更改路径，以便它在您的环境中工作。如果您的 .less 文件中有错误，则错误和行号将显示在“输出”窗口中。

# jquery - Wordpress：jQuery.load 一些 php 文件

> ID：13341962
> 
> 赞同：0
> 
> 时间：2012-11-12T10:22:42.550
> 
> 标签：jquery, wordpress

我想在文档加载后用 jQuery 加载一些动态数据。例如，让它成为标签云：

```
<script type="text/javascript">
jQuery(document).ready(function() {
jQuery('#sidebar-tags').load('<?php echo bloginfo('template_url'); ?>/tag_cloud.php');
});
</script> 
```

在 tag_cloud.php 中是这样的：

```
<? wp_tag_cloud(''); ?> 
```

而且ofcoz不起作用，“内部服务器错误”。我怎样才能使这个想法奏效？

**解决了：**

按照 Plamen Nikolov 的链接，想出了这个：

```
<script type="text/javascript">
jQuery(document).ready(function() {
jQuery.ajax({
         type : "post",
         dataType : "json",
         url : "/wp-admin/admin-ajax.php",
         data : ({action: "get_tag_cloud"}),
         success: function(response) {
            alert(response);}
         })
});
</script> 
```

在functions.php中：

```
add_action('wp_ajax_get_tag_cloud', 'get_tag_cloud');
add_action('wp_ajax_nopriv_get_tag_cloud', 'get_tag_cloud');
function get_tag_cloud() {
    echo json_encode(wp_tag_cloud('echo=0'));
    die();
} 
```

它几乎可以工作：如果我用 Firebug 检查它，我可以看到响应，但不会弹出警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:31:38.457

要发送 XHR 请求（Ajax），您必须坚持推荐的方式，使用正确的钩子：

请参阅此处的示例：[WordPress Ajax 钩子](http://codex.wordpress.org/AJAX_in_Plugins#Ajax_on_the_Viewer-Facing_Side)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:30:02.470

tag_cloud.php 中的代码功能错误，它响应内部服务器错误。为了开发 wordpress 小部件，您可以查看以下教程

[http://wp.tutsplus.com/tutorials/plugins/creating-a-wordpress-network-widget](http://wp.tutsplus.com/tutorials/plugins/creating-a-wordpress-network-widget)

还要确保，您在 jquery 加载函数中调用了正确的 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:32:36.007

```
$("#sidebar").html($.get('<?php echo bloginfo("template_url"); ?>/tag_cloud.php'); 
```

您必须转义单引号`template_url`或使用双引号。阅读您的服务器日志以进行进一步调试。

# asp.net - 工作 iis 和视觉工作室的错误

> ID：13341970
> 
> 赞同：0
> 
> 时间：2012-11-12T10:23:08.843
> 
> 标签：asp.net, iis, installation

我安装了visual studio 2010，但我忘记在它之前安装iis，所以现在当我想运行asp.net程序时，它给了我这个错误：虚拟目录没有被配置为iis中的应用程序，我现在该怎么办？我在另一个站点上看到一些内容：右键单击虚拟目录-选择属性，然后单击“应用程序”标签和文本框旁边的“创建”。它将使用虚拟目录的名称自动创建“应用程序”。现在可以访问应用程序了。2\. 当您的应用程序中有子目录时，您可以为子目录创建 web.config 文件。但是，有些属性不能在子目录的 web.config 中设置，例如身份验证、会话状态（您可能会看到错误消息显示了在子目录的 web.config 中声明身份验证或会话状态的行号）。原因是，这些设置不能在子目录级别被覆盖，除非子目录也被配置为应用程序（如上所述）。大多数情况下，如果我们想保护对子目录文件的访问（例如，目录是 admin 并且我们希望保护管理页面免受未经授权的用户的访问），我们通常会在子目录中添加 web.config。

我这样做，但它不起作用

# average - 平均折叠变化的问题

> ID：13341976
> 
> 赞同：3
> 
> 时间：2012-11-12T10:23:40.893
> 
> 标签：average, mean

我使用维基百科文章中定义的折叠更改：

[http://en.wikipedia.org/wiki/Fold_change](http://en.wikipedia.org/wiki/Fold_change)

我使用折叠变化已经有一段时间了，但从来没有真正需要计算我所有折叠变化的平均折叠变化。当我昨天这样做时，我意识到这并不是一个直截了当的方法，因为它只是取所有倍数变化值的平均值。这是一个演示我的问题的示例：

让我们考虑 6 折变化：

```
A = 1.1635710
B = 0.9284593
C = 1.1688855
D = 1.6400114
E = 1.2073252
F = 1.2830912 
```

我总是做的是通过将-1除以折叠变化将低于1的折叠变化转换为-1格式：

```
A = 1.1635710
B = -1.077053
C = 1.1688855
D = 1.6400114
E = 1.2073252
F = 1.2830912 
```

然后为了计算平均倍数变化，我取了所有倍数变化值的平均值，结果为 0.8976386，这表明平均倍数变化减少了，即使从值本身来看，平均倍数变化应该增加，因为它们中的大多数是以更高的幅度增加。

然后我想在将低于 1 的倍数变化转换为负格式之前计算平均倍数变化。然后我得到了 1.231891 的平均值，这似乎更合理。但是，我也怀疑这是否正确。

让我们进一步简化它。假设我们有两次变化，值为 0.8 (-1.25) 和 1.25。显然，当查看 -1.25 和 1.25 时，平均倍数变化应该是 1，所以没有平均变化。这是有道理的。但取 0.8 和 1.25 的平均值得出 1.025，因此略有增加。

长话短说，我不确定如何最好地平均折叠变化列表以获得具有代表性的平均折叠变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T22:31:02.060

这是一个很好的问题，我自己一直在寻找答案。这是我想出的：1）记录折叠变化（从0到无穷大）；2）平均日志值；3）计算反对数；4) 然后在必要时转换为 +/- 值

在您的第二个示例中：

对数（0.8）=-0.09691

日志（1.25）= 0.09691

平均 = 0

10^0 = 1（平均倍数变化 1）

对于您使用 6 个数字并使用此方法的第一个示例，我得到您的平均值为 1.214425 倍。

# android - 将 OverlayItems 添加到 MapView 真的很慢，如何使它更快？

> ID：13341979
> 
> 赞同：1
> 
> 时间：2012-11-12T10:23:47.673
> 
> 标签：android, android-mapview, android-maps, itemizedoverlay

在我的应用程序中有一个 MapView，我向其中添加了 OverlayItems，**大约 500**，**但将来它会更多甚至数千......**

我的问题是：当我切换到这个活动时，**我遇到了 3-4 秒的大停电**，然后它会正确切换，我可以导航并点击地图。

几个月前，当应用程序在 mapView 中仅包含 50-150 个 GeoPoints 时，并没有停电。所以我认为我的 OverlayItem 添加到 mapView 有问题，它确实会减慢应用程序的速度。

我在 Activity 启动时通过一个简单的循环添加我的 GeoPoints。

我能做些什么来**加快这个活动并防止停电？**

编辑：

多亏了评论，我才意识到我在每次**addOverlay(MyOverlayItem myoverlay)**函数调用之后**调用 populate() 。**

 **我编辑了代码，现在在循环之后我只调用它一次：

```
public void populateNow()
    {

        populate();

    } 
```

但我刚刚得到了一个很好的空指针异常......有什么想法吗？

```
11-12 15:54:03.398: E/MapActivity(1534): Couldn't get connection factory client
11-12 15:54:03.531: E/AndroidRuntime(1534): FATAL EXCEPTION: main
11-12 15:54:03.531: E/AndroidRuntime(1534): java.lang.NullPointerException
11-12 15:54:03.531: E/AndroidRuntime(1534):     at com.google.android.maps.ItemizedOverlay.getIndexToDraw(ItemizedOverlay.java:211)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at com.google.android.maps.ItemizedOverlay.draw(ItemizedOverlay.java:240)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at com.google.android.maps.Overlay.draw(Overlay.java:179)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at com.google.android.maps.MapView.onDraw(MapView.java:530)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.View.draw(View.java:6933)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.View.draw(View.java:6936)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.View.draw(View.java:6936)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1904)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.ViewRoot.draw(ViewRoot.java:1527)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1263)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.os.Looper.loop(Looper.java:123)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at android.app.ActivityThread.main(ActivityThread.java:3687)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at java.lang.reflect.Method.invokeNative(Native Method)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at java.lang.reflect.Method.invoke(Method.java:507)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
11-12 15:54:03.531: E/AndroidRuntime(1534):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:30:09.100

尝试在线程或异步任务中加载叠加项目，并使其在加载时显示。这样您就可以停止停电。但是叠加层可能会延迟显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T11:24:14.823

您可以`ItemizedOverlay`通过以下方式显着缩短加载时间：

`Trick 1:`

这是最重要的一个。确保您不是`populate()`每次添加一项时都调用。相反，加载所有项目并在加载所有项目`populate()`后仅调用一次。这大大提高了加载速度，1000 个项目应该在几毫秒内加载。

`Trick 2:` 如果在上述步骤之后加载仍然变慢，则延迟可能来自您获取要加载的项目的位置（sqlite、文件等）。例如，根据您的数据库结构，从 sqlite 加载 1000 个项目可能需要 3 到 4 秒。为了改进这一点，您可以重新设计您的数据库结构或将项目从数据库加载到`AsyncTask`.

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:35:45.797

直接来自官方指南：http: [//developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

```
Any slow, blocking operations in an activity should be done in a new thread,
to avoid slowing down the user interface 
```

只有 50 到 150 个元素，它的处理速度仍然足够快，因此 UI 不会注意到，但在主 UI 线程上进行所有处理已经是一个坏主意。

我建议使用加载器，因为它们是一种非常聪明的系统管理方式，可以很好地进行后台处理。[http://developer.android.com/guide/components/loaders.html](http://developer.android.com/guide/components/loaders.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T10:36:51.753

MapView 可以处理的叠加项目的数量是有限制的。关于这个限制是什么没有官方消息，但一段时间后，您会在缩放/平移期间看到缓慢的行为。

一些解决方案是：

1.  [MapviewOverLay 延迟加载](http://code.google.com/p/mapview-overlay-manager/wiki/LazyLoading)

2.  仅加载尽可能多的可见标记，根据缩放级别和跨度执行此操作。

3.  10 个 99 点的叠加层比 1 个 900 点的叠加层快。**

# java - 网络浏览器中的 IllegalThreadStateException（Windows）

> ID：13341982
> 
> 赞同：1
> 
> 时间：2012-11-12T10:23:50.507
> 
> 标签：java, applet

我收到了 IllegalThreadStateException。

在 Eclipse 的调试器下一切正常，但是当我尝试在 Firefox 上对其进行测试时，它开始失败。第一次运行没问题，刷新网页后我得到了那个异常。

这是代码：

```
public void init() {
    try {           
        SwingUtilities.invokeAndWait(new Runnable() 
        {
            public void run() 
            {                   
                createGUI();
                createConnection();
            }
        });
    } 
    catch (Exception e) 
    { 
        System.err.println("createGUI didn't complete successfully");
        e.printStackTrace();
        System.err.println(e.toString());
    }
}

private void createConnection()
{       
    _connectionThread = ConnectionThread.getInstance();
    _connectionThread.setServer(getCodeBase().getHost());
    _connectionThread.start(); <------ Exception        
} 
```

我是 Java 新手，这是我的第一个小程序。我知道我做错了什么，但我找不到它是什么。

编辑：从控制台

```
java.lang.reflect.InvocationTargetException
at java.awt.EventQueue.invokeAndWait(Unknown Source)
at javax.swing.SwingUtilities.invokeAndWait(Unknown Source)
at com.onlinegame.gameclient.GameClient.init(GameClient.java:76)
at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalThreadStateException
    at java.lang.Thread.start(Unknown Source)
    at com.onlinegame.gameclient.GameClient.createConnection(GameClient.java:175)
    at com.onlinegame.gameclient.GameClient.access$100(GameClient.java:34)
    at com.onlinegame.gameclient.GameClient$1.run(GameClient.java:81)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
java.lang.reflect.InvocationTargetException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:08:24.887

```
 _connectionThread = ConnectionThread.getInstance(); 
```

看起来 ConnectionThread 是一个单例（是真的吗？）并扩展了 Thread。如果这是正确的，您可能会遇到问题，因为线程只能启动一次（[Thread.start()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#start%28%29)）。如果您尝试再次启动同一个 Thread 实例，它将失败并显示`java.lang.IllegalThreadStateException`.

要解决这个问题，请在每个请求上创建一个新的 Thread 对象或将执行结果缓存在单例中。如何准确地实现它取决于你想用线程实现什么以及你的应用程序的设计。

# xcode - 缺少卸载脚本时如何在 Snow Leopard 上删除 Xcode 3.0？

> ID：13341986
> 
> 赞同：1
> 
> 时间：2012-11-12T10:24:05.800
> 
> 标签：xcode, osx-snow-leopard, uninstallation

至于 Snow Leopard，没有可用的更新和免费 Xcode，因为我只需要 Ror，所以我决定使用 osx-gcc-installer（也小得多），并且自制软件警告应该先删除 Xcode。

问题是，常规`$ sudo /Developer/Library/uninstall-devtools --mode=all`将无法工作，因为它应该运行的卸载脚本丢失了（不要问我为什么）。

我什至无法重新安装 Xcode，因为 3.0 适用于 Leopard，据我所知，新版本不会覆盖旧版本，但会在其旁边添加另一个 Xcode。

App Cleaner 无法工作，因为 Xcode 足够复杂，不能被应用程序视为一个程序。

另一种方法是手动丢弃所有类似于 Xcode 的东西 - 太糟糕了，因为问题开始于我无法安装新的 Ruby 版本，我需要它干净整洁来清理一些东西。

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:28:43.470

sudo rm -rf /Developer /Libary/Developer ~/Libary/Developer

我不认为它在某处存储了任何其他数据。

**然后安装**xcode4****

# javascript - list-jquery newb 的选择器

> ID：13341998
> 
> 赞同：0
> 
> 时间：2012-11-12T10:24:47.850
> 
> 标签：javascript, jquery, html, sorting, html-table

我有一张这样的桌子

```
<table>
    <tr>
        <td>Item1<td>
        <td><p>Description<p><br><td>
    </tr>
    <tr>
        <td>Item2<td>
        <td><p>Description1</p><p>Description2</p><br><td>
    </tr>
    <tr>
        <td>Item3<td>
        <td><p>Description3<p><br><td>
    </tr>
</table> 
```

这是我的 javascript 来获取一系列项目

```
var iList = document.querySelectorAll('td:first'); 
```

这是获取所有映射的`td p`内容

```
var iDesc = document.querySelectorAll('td:second p'); 
```

顺便说一下，我想创建一个映射然后在 onload 事件中对其内容进行排序。我在做什么正确吗？我的意思是选择器`td:first`，第二个是我的示例表

在上面的示例中，有一个包含 2的`td`元素`p`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:22:45.417

伪选择器`:first`并不`:second`存在，（`:first`存在于 jQuery 中但它不是 CSS 选择器）。这是[CSS 选择器的官方列表](http://www.w3.org/TR/selectors/#selectors)。

您需要的是`:nth-child`伪选择器：

```
var iList = document.querySelectorAll('td:nth-child(1)');    
var iDesc = document.querySelectorAll('td:nth-child(2) p'); 
```

PS：注意你的代码，你不要关闭`<td>s`而是重新打开新的，[`<td>`不必关闭](http://www.w3.org/TR/html5/syntax.html#optional-tags)，这意味着`<tr>`你有4个`<td>`s：

```
<tr>
    <td>Item1
    <td>
    <td><p>Description<p><br>
    <td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:47:20.677

您应该为每个 tr 元素运行一个循环，并从 td 元素中获取键和值。接下来，将它们推入一个数组。

```
var arr = new Array();
$('table tr').each(function() {
    var $row = $(this);
    var key = $row.find('td:first').html();
    var value = $row.find('td:last').html();
    arr.push([key, value]);
}); 
```

最后，按数组的第一个索引对数组进行排序。

```
arr.sort(function(a, b) {
    var valueA, valueB;
    valueA = a[0]; // Where 1 is your index, from your example
    valueB = b[0];
    if (valueA < valueB) {
        return -1;
    }
    else if (valueA > valueB) {
        return 1;
    }
    return 0;
}); 
```

[现场演示](http://jsfiddle.net/JUTxU/)