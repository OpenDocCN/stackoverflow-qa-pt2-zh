# StackOverflow 问答 15438000-15438999

# java - 无法处理 DOMSource：检查 saxon9-dom.jar 是否在类路径中

> ID：15438011
> 
> 赞同：3
> 
> 时间：2013-03-15T16:55:41.600
> 
> 标签：java, xml, dom, jar

当我运行一个简单的函数来更新没有 jar 的 DOM XML 时，它运行正常。如果我将其代码放入包含许多 jar 的现有项目中，则会出现此异常

> 线程“主”java.lang.RuntimeException 中的异常：net.sf.saxon.trans.XPathException：无法处理 DOMSource：检查 saxon9-dom.jar 是否在类路径中

这里

```
 transformer.transform(source, result); 
```

在哪里

```
 TransformerFactory transformerFactory = TransformerFactory.newInstance();
  Transformer transformer = transformerFactory.newTransformer();
  DOMSource source = new DOMSource(docBuilder.parse(filepath)); 
```

如何在不引入对这个 jar 的依赖的情况下解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:56:23.473

此消息来自较旧版本的 Saxon，您可以按照建议将 saxon9-dom 放在类路径中，或者将 Saxon jar 文件替换为更新的版本来解决它。

一般来说，我建议不要使用 JAXP TransformerFactory 机制来加载 XSLT 处理器。您需要决定要使用哪个 XSLT 处理器，用它测试您的应用程序，然后确保在生产环境中加载该处理器，而不管类路径中可能存在什么。如果您希望您的应用程序与多个 XSLT 处理器一起工作，那么您可以实现这一点，但它应该以受控的方式完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:57:03.340

从 API doc for 中[`TransformerFactory.html#newInstance()`](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/TransformerFactory.html#newInstance%28%29)，我们可以看到有几种方法可以实现这一点。

1.  如果您有任何其他转换器实现，例如**xalan**，请将其 JAR 移动到类路径的开头。
2.  添加 JVM 选项：`-Djavax.xml.transform.TransformerFactory=<any transformer class you need>`.
3.  在 JRE 目录的属性文件“lib/jaxp.properties”中指定属性。
4.  制作一个只有一个文件的假 JAR，`META-INF\services\javax.xml.transform.TransformerFactory`这个文件只包含 JDK 的默认转换器工厂：`com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl`. 然后将其添加到类路径的开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-22T02:27:34.020

获取 net.sf.saxon.event.Sender 的源（异常来自哪里）并查看导致错误的行：

```
 if (source instanceof DOMSource) {
        throw new XPathException("DOMSource cannot be processed: check that saxon9-dom.jar is on the classpath");
    } 
```

惊人的。

我们停止使用 net.sf.saxon.TransformerFactoryImpl，然后开始使用 org.apache.xalan.processor.TransformerFactoryImpl。在那之后一切都很好。

# python - 使用参考手册语法 Pyparsing Ada 2005 Scoped Identifiers 时堆栈溢出

> ID：15438015
> 
> 赞同：2
> 
> 时间：2013-03-15T16:55:53.147
> 
> 标签：python, stack-overflow, grammar, ada, pyparsing

我目前正在使用 Pyparsing 和参考手册语法规则实现 Ada 2005 解析器。我们需要它来分析我们老化的 Ada 代码库的部分并将其转换为 C/C++。

大多数事情都有效。

但是，仍然存在一个令人讨厌的小问题：

`name`解析范围标识符（规则**selected_component**）（例如表达式）时的语法规则`"Global_Types.Integer2"`失败，因为它是左关联语法规则循环的一部分。

我认为这条规则写错了： sub-rule`direct_name`应该放在 sub-rule 之后`direct_name`。事实上，它应该放在替代品列表的最后。否则`direct_name`，依次`name`匹配并且`"Global_Types"`仅然后期望字符串在那之后结束。不是我想要的。

因此，我现在将规则`direct_name`移至 -alternatives 的末尾`name`......但随后我得到了 Pyparsing 无限递归，Python 吐出超出的最大递归深度。

我相信这个问题是由以下事实引起的

*   语法规则**selected_component**的关联性是*right-to-left*。我搜索了 Pyparsing 的参考手册，但没有找到任何相关内容。我们应该将 dot ( `.`) 视为具有从右到左关联性的运算符，还是可以通过语法规则的扩展和重组来解决它？

*   或者因为在 Pyparsing 无限递归中没有检查。我相信这不会太难实现。使用从当前活动规则（函数）到源位置/偏移量 ( `getTokensEndLoc()`) 的映射，并且如果当前源输入位置/偏移量等于与刚刚输入的规则相关的位置，则始终使规则失败。

[pyparsing 的递归表达式](https://stackoverflow.com/questions/4571441/recursive-expressions-with-pyparsing)可能与我的问题有关。

该问题似乎也与[需要帮助解析部分python语法](http://pyparsing.wikispaces.com/message/view/home/51617848)密切相关 ，不幸的是还没有答案。

这是导致无限递归的 Ada 2005 语法规则循环：

*   [名字](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-4-1.html#S0091)=>
*   [selected_component](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-4-1-3.html#S0098) =>
*   [前缀](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-4-1.html#S0093)=>
*   [姓名](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-4-1.html#S0091)

请注意，这个问题不是 Ada 特有的问题，而是与所有包含左递归规则的语法有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:20:43.303

作为参考，如[*GNAT: The GNU Ada Compiler*](http://www2.adacore.com/gap-static/GNAT_Book/html/main.htm) , [*§2.2 The Parser*](http://www2.adacore.com/gap-static/GNAT_Book/html/node6.htm#SECTION03220000000000000000)中所述，“[in] [ARM](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-TOC.html)中给出的 Ada 语法是模棱两可的，表驱动的解析器将被迫修改语法以使其为 LL 所接受(1) 或 LALR (1) 技术。”

# jquery - 单击正文链接时更改选项卡选择

> ID：15438020
> 
> 赞同：0
> 
> 时间：2013-03-15T16:56:15.457
> 
> 标签：jquery

我有一个用于在内容之间交替的简单选项卡脚本。当前，该脚本在单击时启用了对选项卡类的更改，但我想从选项卡正文副本中链接到选项卡，并确保活动选项卡接收到要选择的正确类。

[http://jsfiddle.net/jdmcculley/aMBj2/2/](http://jsfiddle.net/jdmcculley/aMBj2/2/)

```
$(document).ready(function() {

    $('.tabs a').click(function(){
        switch_tabs($(this));
    });

    switch_tabs($('.defaulttab'));

    $('.tab-content .img-frame a').click(function(){
        switch_tabs($(this));
    });

});

function switch_tabs(obj)
{
    $('.tab-content').hide();
    $('.tabs a').removeClass("selected");
    var id = obj.attr("rel");

    $('#'+id).show();
    obj.addClass("selected");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:08:03.387

最简单的方法是替换它：

```
 obj.addClass("selected"); 
```

有了这个：

```
 $('a[rel='+id+']').addClass("selected"); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/aMBj2/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:05:26.220

**CSS**

```
.selected {
    background-color: #387C2B !important;
    border: 1px solid #006633 !important;
} 
```

**Javascript**

```
$('.tabs a').click(function(){
    switch_tabs($(this));
});

switch_tabs($('.defaulttab'));

$('.tab-content .img-frame a').click(function(){
    switch_tabs($(this));
});

function switch_tabs(obj)
{
    $('.tab-content').hide();
    $('.tabs a').removeClass("green").removeClass("selected").addClass("gray");
    var id = obj.attr("rel");

    $('#'+id).show();
    obj.addClass("selected").removeClass("gray");
} 
```

**工作示例：http:** [//jsfiddle.net/aMBj2/4/](http://jsfiddle.net/aMBj2/4/)

# c++ - 构建发布/调试 VS2010 C++

> ID：15438023
> 
> 赞同：1
> 
> 时间：2013-03-15T16:56:25.170
> 
> 标签：c++, visual-studio-2010, build

为什么必须在发布配置下构建，然后在 VS2010 C++ 的调试配置中构建相同项目的另一个构建才能让调试看到更新的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:03:03.847

你不必。您只需构建要更新的配置。也就是说，如果您更改代码并希望 Debug “看到”更新的代码，只需构建 Debug。您不必构建 Release。

当然，在您再次构建之前，您的 Release 构建将不会“看到”新代码。

如果您问为什么必须单独构建它们 - 因为这些设置中的每一个生成的代码根本不同，所以现在有办法以某种方式“重用”它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T17:01:00.180

因为每个构建链接到不同的核心库，使用不同的编译器/链接器设置，创建不同的汇编代码，因此不同的可执行文件，版本可能更优化。顺便说一句，`Batch Build`菜单下有一个菜单项，`Build`允许一键构建所有内容。

# java - 从不同的 java 类访问 jdialog 的一个实例

> ID：15438025
> 
> 赞同：1
> 
> 时间：2013-03-15T16:56:32.377
> 
> 标签：java, swing, scope, jframe, jdialog

我有一个 JFrame，其中包含我的许多 JPanel，这些 JPanel 代表我的应用程序的不同部分，您可以在其中进行某些计算。

我有一个在我的 Main.java 类（扩展 JFrame）中创建的 JDialog，旨在用作输出窗口（即在不同的 JPanel 类中执行的任何计算，结果应附加到此输出窗口 JTextArea） .

我的问题是，如何从我的其他类访问这个 JDialog？我不想实例化另一个 Jdialog，而是使用现有的窗口...我有 JDialog 的 getter 和 setter，但我对如何在 Main java 文件中的 OutputWindow 类的实例和包含我的应用程序不同部分的其他 JPanel。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:02:57.540

如果您想要的只是提供对其他地方定义的类的内部类的访问，只要它是公共的和静态的，您就应该能够访问它。

如果您打算在整个项目中只有一个实例，您应该使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式来正确确保这一点。

# python - 在 python 中编辑字符串以查找字谜

> ID：15438026
> 
> 赞同：-4
> 
> 时间：2013-03-15T16:56:33.127
> 
> 标签：python, python-3.x, anagram

给定字符串... `able\nacre\nbale\nbeyond\nbinary\nboat\nbrainy\ncare\ncat\ncater\ncrate\nlawn\nlist\nrace\nreact\nsheet\nsilt\nslit\ntrace\n`

我试图弄清楚如何将字符串中的每个单词分配给一个变量，然后按字母顺序对每个单词进行排序，这将允许我比较它们以查看哪些是字谜，哪些不是。我有大约一个月的 Python 经验，如果可以的话，一切都会变得愚蠢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:00:16.697

与其将每个单词保存到变量中，不如将它们全部保存到列表中。以下是我将如何解决完整的问题：

```
from itertools import groupby
from operator import itemgetter

s = 'able\nacre\nbale\nbeyond\nbinary\nboat\nbrainy\ncare\ncat\ncater\ncrate\nlawn\nlist\nrace\nreact\nsheet\nsilt\nslit\ntrace\n'
words = s.strip().split()
sorted_words = (''.join(sorted(line)) for line in words)
grouped = sorted((v, i) for i, v in enumerate(sorted_words))
anagrams = [[words[i] for v, i in g] for k, g in groupby(grouped, itemgetter(0))] 
```

结果：

```
>>> import pprint
>>> pprint.pprint(anagrams)
[['able', 'bale'],
 ['binary', 'brainy'],
 ['boat'],
 ['acre', 'care', 'race'],
 ['cater', 'crate', 'react', 'trace'],
 ['cat'],
 ['lawn'],
 ['beyond'],
 ['sheet'],
 ['list', 'silt', 'slit']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:02:02.263

```
s = 'able\nacre\nbale\nbeyond\nbinary\nboat\nbrainy\ncare\ncat\ncater\ncrate\nlawn\nlist\nrace\nreact\nsheet\nsilt\nslit\ntrace\n'
words = sorted(s.split('\n')[:-1]) # the last one will be '', so you want to get rid of that 
```

测试一个字符串是否是另一个字符串的变位词：

```
def isAnagram(a, b):
    aLtrs = sorted(list(a)) # if a='test', aLtrs=['e', 's', 't', 't']
    bLtrs = sorted(list(a)) # same as above
    return True if aLtrs==bLtrs else False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:58:17.000

```
In [27]: s = 'able\nacre\nbale\nbeyond\nbinary\nboat\nbrainy\ncare\ncat\ncater\ncrate\nlawn\nlist\nrace\nreact\nsheet\nsilt\nslit\ntrace\n'

In [28]: words = s.split()

In [29]: [''.join(sorted(w)) for w in words]
Out[29]: 
['abel',
 'acer',
 'abel',
 'bdenoy',
 'abinry',
 'abot',
 'abinry',
 ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:00:11.547

你可以做到`yourstring.split('whattosplitat')`。在这种情况下，那将是

```
l='able\nacre\nbale\nbeyond\nbinary\nboat\nbrainy\ncare\ncat\ncater\ncrate\nlawn\nlist\nrace\nreact\nsheet\nsilt\nslit\ntrace\n'.split('\n') 
```

然后，您可以`l.sort()`按字母顺序对列表进行排序。

# javascript - 将“onchange”属性添加到详细信息视图绑定字段

> ID：15438034
> 
> 赞同：0
> 
> 时间：2013-03-15T16:57:09.853
> 
> 标签：javascript, asp.net, vb.net, boundfield

我正在设计一个带有表单的页面，用于编辑数据库中的字段。起初我使用的是 FormView 控件，但由于各种原因，我将它们更改为 DetailsView 控件。这些代码编写起来要快得多，代码也更整洁，因为您只需为要显示的每个字段添加一个 Boundfield。没有文本框、标签等。到目前为止一切都很好。

但是，我的 FormViews 中的文本框都指定了**onchange**属性，该属性称为 JavaScript 函数。基本上，它是一种提醒用户已进行更改并需要保存的机制，并且运行良好。

不幸的是，您不能将**onchange**属性添加到 DetailsView Boundfield。我尝试在 DetailsView 的 DataBound 事件中以编程方式在代码后面 (VB) 中添加它，研究理论是，当页面加载时，Boundfields 呈现为文本框，但正如预期的那样，它不起作用。

谁能建议一种方法来复制我的 FormViews 中文本框的功能，当 Boundfield 中的文本发生更改时调用 JavaScript 函数？如果可以的话，我真的很想坚持使用 DetailsViews 和 Boundfields。如果我可以在代码隐藏中实现这一点，也许通过字段迭代来添加功能，这意味着每个 DetailsView 只需几行代码，而不是为每个 Boundfield 声明性地添加它（有很多！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:05:51.680

这比我想象的要容易得多。可以将**onchange**属性添加到 DetailsView 本身。完成后，对 DetailsView 中任何字段的任何更改都会调用 JavaScript 函数。

# javascript - 在ready函数中获取dom元素的值

> ID：15438037
> 
> 赞同：0
> 
> 时间：2013-03-15T16:57:18.167
> 
> 标签：javascript, jquery

我希望我的 textArea 在页面完全加载时调整大小。我找到

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

可以帮助我，所以我尝试对其进行测试并将下一个代码放入该函数中：

```
$(document).ready(function() {
      var element = $('#elementId');
      alert(element.value);
}); 
```

但是当页面加载时，警报显示textArea 的**未定义**值，但是里面有文本。如何在就绪函数中获取这些值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:58:00.207

```
$(document).ready(function() {
      var element = $('#elementId');
      alert(element.val());
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T16:58:15.263

`element`不是 DOM 元素而是 jQuery 包装的对象，它没有任何`value`属性。

采用

```
$(document).ready(function() {
      var element = $('#elementId');
      alert(element.val());
}); 
```

或者

```
$(document).ready(function() {
      var element = document.getElementById('elementId');
      alert(element.value);
}); 
```

或者

```
$(document).ready(function() {
      var element = $('#elementId');
      alert(element.get(0).value);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:58:48.887

您需要使用 DOM 对象来使用 value 属性，并且您有 jQuery 对象需要在其上使用[val()](http://api.jquery.com/val/)。

```
$(document).ready(function() {
      var element = $('#elementId');
      alert(element[0].value);
      //or  
      alert(element.val());           
}); 
```

# wordpress - Wordpress 多主数据库复制：更新 wp_options 中的 cron 表时出现死锁

> ID：15438038
> 
> 赞同：0
> 
> 时间：2013-03-15T16:57:18.650
> 
> 标签：wordpress, cron, innodb, deadlock, database-replication

我们在负载均衡器后面具有多主数据库的环境中运行 Wordpress。当 WP 尝试更新 wp_options 中的 cron 表时，错误日志充满了死锁错误。我们完全禁用了 wp-cron 但仍然看到错误，所以，有两个问题：

1) 是什么导致 wp_options 中的 cron 表被更新？

2）它*似乎*在每次页面加载时运行。可以禁用此功能并设置 cronjob 以在 crontab 中定期运行它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:51:09.453

当用户无法访问或想要通过 Unix 设置 cronjobs 时，Wordpress 使用 wp-cron.php 作为运行计划任务的一种方式。此过程查看 wp_options 中 cron 表中的计划作业，如果指定的时间（或更长时间）已过，则该作业将执行。

wp-cron.php 使用 wp-includes/cron.php（Wordpress Cron API）来运行预定的作业。在 cron.php 中，您会发现许多更新 cron 表的函数，这些函数都围绕事件的调度。

任何需要预定事件的 Wordpress 或插件功能都使用 Cron API 来执行此操作。但是，调度事件的操作（即使它已经存在）会更新 wp_options 中的 cron 表。即使 wp-cron.php 完全禁用，Wordpress/插件的这些元素仍在加载和安排它们的事件，试图更新进程中的 cron 表。

除了知道它必须与数据库/站点配置相关之外，我还没有弄清楚死锁发生的确切原因，但我现在知道 Wordpress 的行为本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T13:39:19.067

我遇到了同样的问题——数据库很快就会不同步。某些插件使它发生得更快（他们安排了大量的 cron 作业），但即使禁用它们，最终错误也会阻止复制。

我能够通过做两件事来保持复制工作。

第一个是在**my.ini**中添加：

```
slave-skip-errors = 1062 
```

当重复键已经存在时，这指示 MySql 跳过创建条目。我的集群设置为主动-被动，因此理论上，除非主动节点关闭，否则不应有“真实”写入被动 MySql 节点，在这种情况下，不会有“真实”写入该节点。写入被动节点的唯一内容是 wp-cron 作业的结果，该作业（理论上）也在主动节点上运行。

第二个，在每个站点的**wp-config.ini**中，添加：

```
/** disable cron */
define('DISABLE_WP_CRON', true); 
```

这会阻止 wp-cron 运行，因此这些解决方案中的任何一个都应该独立运行。

另一种选择是禁用 wp-cron，但保留完整的数据库同步，并安排一个脚本来调用每个站点的 wp-cron.php（您将手动完成 wp-cron 服务自动执行的操作）。这样，它只会在主动节点上运行，并且数据应该毫无问题地同步到被动节点。

# java - JPA双向@OneToOne和级联合并

> ID：15438040
> 
> 赞同：3
> 
> 时间：2013-03-15T16:57:25.340
> 
> 标签：java, jpa

如果我有这两个实体：

```
@Entity class A { 
    @OneToOne(cascade = CascadeType.MERGE, mappedBy = "a") B b; 
    //getters+setters
}
@Entity class B { 
    @OneToOne(cascade = CascadeType.MERGE) A a; 
    //getters+setters
} 
```

JPA 规范是否*保证*这一点？

```
A a = new A();
B b = new B();
a.setB(b);
b.setA(a);
A managedA = entityManager.merge(a);
// after commit, managedA will have a reference to a managed B which JPA implementation will link to managedA instead of original unmanaged A
Assert.assertTrue(managedA.getB().getA() == managedA); 
```

我的理解是它可以工作（至少在最新的 EclipseLink 中，至少有时是这样），但规范并不能保证这一点。

欢迎反例/规范摘录:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:47:53.007

你是对的，JPA 规范不保证这一点。实际上，在大多数情况下，merge() 的语义是它返回一个新实例——由实体管理器创建的托管实例，给定对象的状态被合并到该实例中——但这只是一种简化。如果它附加了您放入的对象，那么该方法实际上可以返回 void（就像 persist() 方法一样）。我不知道为什么要这样设计——实际上，拥有这种不同的语义有点让人头疼，而且我们花了一些时间将所需的行为封装在我们的应用程序代码中。

合并操作的实际语义可以在JPA 规范最终版本**的 3.2.7.1 Merging Detached Entity State 中找到。**根据您放入的对象和当前的持久性上下文，它的行为确实有所不同。

旁注：只要您不使用扩展的持久性上下文，实体就会在事务结束后立即分离。

另请注意，您通常不应使用 == 运算符比较对象，因为这实际上不是您希望进行对象比较的语义（jvm 标识不等于业务对象标识）

# jquery - 如何通过 jQuery 在 XML 中找到相似的元素名称？

> ID：15438042
> 
> 赞同：-1
> 
> 时间：2013-03-15T16:57:30.277
> 
> 标签：jquery

我有一个像

```
 <Name1> A </Name1>
  <Name2> B </Name2>
  <Name3> C </Name3>
  ... 
```

现在，如何通过 jQuery 找到所有具有相似名称的元素。例如 SQL Server 中的“LIKE”

```
Where something LIKE '% %' 
```

我需要在 jQuery 中执行以下操作

```
if(elements in XML like 'Name%') 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:21:33.083

我认为你可以使用这样的东西

```
var names = $(xml).find('*').filter(function() {
    return this.nodeName.match(/^Name[0-9]+$/i);
}); 
```

这将首先选择所有元素，然后过滤所有以数字开头`Name`和结尾的节点。

[**还要检查这个例子。**](http://jsfiddle.net/TaKtq/1/)

# html - 无法在浏览器中显示希腊字母

> ID：15438046
> 
> 赞同：7
> 
> 时间：2013-03-15T16:57:51.020
> 
> 标签：html, css, encoding, character-encoding, metadata

我正在使用 html 和 css 开发一个网站，但我看不到希腊字母。而不是这个，我只看到符号。我的 html 文件中有以下行：

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" /> 
```

我也试过：

```
<meta http-equiv="content-type" content="text/html;charset=windows-1253" />
<meta http-equiv="content-type" content="text/html;charset=ibm869" />
<meta http-equiv="content-type" content="text/html;charset=ibm737" />
<meta http-equiv="content-type" content="text/html;charset=iso-8859-7"/>
<meta http-equiv="content-type" content="text/html;charset=x-mac-greek"/>
<meta http-equiv="content-type" content="text/html;charset=x-EBCDIC-GreekModern "/>
<meta http-equiv="content-type" content="text/html;charset=x-EBCDIC-Greek "/> 
```

没有任何效果！ps 我在 Firefox 和 Internet Explorer 中试过这个

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T17:58:03.040

根据你的评论

在记事本中打开文件，从顶部菜单中的文件 -> 另存为，然后在另存为对话框中有一个下拉菜单，您可以在其中选择字符编码。确保选择 UTF-8 而不是 ANSI

将文件保存为 UTF-8 后，添加希腊字母（或俄语、希伯来语、日语或其他）应该没有问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T18:01:45.633

根据此处的评论/答案，您需要检查编码设置的内容。最好的方法是通过检查响应标头来准确了解服务器是如何发送它的。您可以在大多数浏览器上使用开发人员工具执行此操作。

我刚刚使用 Chrome 检查了此页面的标题：

![在此处输入图像描述](../Images/767a18be9252ec759db4b68751a4b823.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-06T18:54:06.233

我在用希腊语开发页面时遇到了同样的问题。问题不在于 utf-8。我不得不更正CSS。

问候，

缺口

# ios - shouldShowMenuForRowAtIndexPath 和复制菜单位置

> ID：15438047
> 
> 赞同：1
> 
> 时间：2013-03-15T16:57:53.330
> 
> 标签：ios, tableview, uimenucontroller

我需要从 UITableView 复制一些文本。我正在使用方法 shouldShowMenuForRowAtIndexPath，它确实工作得很好！但是，我想设置“复制”菜单项的位置（在 x 轴上，水平方向）。怎么做 ？

谢谢你的帮助！

真挚地，

赫维 D.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-28T07:40:44.423

你最好有一个习惯`UILongPressGEstureRecognizer`并`UIMenuController`自己处理。

检查此[答案](https://stackoverflow.com/a/4079896/1049134)的第 4) 点。

# sql-server - 使用 get-member 维护属性顺序

> ID：15438048
> 
> 赞同：5
> 
> 时间：2013-03-15T16:58:00.037
> 
> 标签：sql-server, powershell

我有一个从表中获取所有列的查询，然后我对其进行了一些工作。问题是我使用插入的列名，但由于 Get-Member，它们的顺序不同。有没有办法获取属性名称（列名）并维护顺序或重新排序 System.Data.DataRow。我必须维护属性类型。

**命令：** $dataColumns = $dataGatherOut | Get-Member -MemberType 属性 | Select-Object -ExpandProperty 名称 $dataColumns

**结果：** PS C:\Windows\system32> $dataColumns

α

查看

贷款

* * *

**命令：** $dataGatherOut

**结果：**

检查：1234

贷款：测试值

阿尔法：4568

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T17:09:01.443

```
$dataGatherOut.psobject.properties | select -ExpandProperty Name 
```

# cordova - 无法使用 cordova iOS 在 iframe 中正确加载外部 URL

> ID：15438054
> 
> 赞同：3
> 
> 时间：2013-03-15T16:58:11.320
> 
> 标签：cordova, iframe, ssl, external

我需要帮助。有人知道为什么我不能始终将 URL 加载到 phonegap/cordova iOS 中的 iframe 中吗？我注意到有些页面只是拒绝在 iframe 中加载，而其他页面则可以正常加载。我似乎也无法加载基于 SSL 的网站。例子：

```
<iframe src="http://ucla.edu"></iframe> //loads correctly
<iframe src="http://google.com"></iframe> //refuses to load
<iframe src="http://www.ufrj.br"></iframe> //loads correctly
<iframe src="http://192.168.20.95"></iframe> //loads correctly (this a local server I have inside my work network)
<iframe src="https://192.168.30.15"></iframe> //refuses to load (this also a local server but with a valid ssl cert (signed by startcom/startSSL) 
```

我在 config.xml 中添加了stay-in-webview 和访问源标签（我可以在 iframe 中加载一些外部页面），但不确定为什么这种行为不一致。我用来开发的 Mac 可以正确加载所有这些。

我是新手，所以在开始将我的旧 webApps “移植”到移动平台之前，我正在尝试一些事情来围绕基础知识。我的开发系统有： Lion Cordova 2.5 xCode 4.6

欢迎任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:28:57.743

我想我明白了。如果其他人陷入与我相同的误解，我会将其发布在这里。

查看我的常规桌面浏览器中的响应标头，我注意到不会在移动应用程序 iframe 中加载的页面`X-Frame-Options: SAMEORIGIN`在其响应标头中有设置。此选项告诉网络浏览器不要在框架中加载该页面，除非该窗口属于同一来源。由于我的 iframe 不符合条件，因此无法加载页面。[https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)

我也（错误地）理解了 config.xml 的目标，而列表：白名单是应用程序可以访问的地方。它与应用程序可以接收的内容无关。我的错。

我将尝试使用 cordova 的 childbrowser 插件，并希望获得更好的结果。 [https://github.com/macdonst/phonegap-plugins/tree/master/Android/ChildBrowser](https://github.com/macdonst/phonegap-plugins/tree/master/Android/ChildBrowser)

-竿

# javascript - DOJO：TreeGrid - 在页面重新加载后保持展开的节点打开

> ID：15438057
> 
> 赞同：0
> 
> 时间：2013-03-15T16:58:23.547
> 
> 标签：javascript, dojo, treegrid

在 LazyTreeGrid 或 TreeGrid 中重新加载页面后是否可以保持扩展节点打开？

也许我可以阅读开放节点列表，也许可以设置在启动时要扩展哪些节点？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:05:03.963

cookie 插件可以在这方面为您提供帮助：

[http://dojotoolkit.org/reference-guide/1.8/dojox/grid/EnhancedGrid/plugins/Cookie.html](http://dojotoolkit.org/reference-guide/1.8/dojox/grid/EnhancedGrid/plugins/Cookie.html)

它通过将网格属性保存在 cookie 中来保持网格的持久性。

卢西安

# sas - 将 Prophet Projection 文件导入 SAS

> ID：15438061
> 
> 赞同：3
> 
> 时间：2013-03-15T16:58:30.647
> 
> 标签：sas, prophet

我们的客户向我们提供了一个 Prophet “.projection”文件，它看起来是一个二进制文件（在记事本中打开时有很多特殊字符 - `?Š…kÿd?Š…kÿd?`）。

我的问题是 - 如何将这个文件导入 SAS？该文件是从 Prophet 版本 8.1 (PE) 生成的。在 Prophet 7.3 中，可以使用 Readbin73 进行 PRJ 等的二进制->文本转换。8.1 中是否有类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T09:21:12.610

1.  Open the Prophet Workspace (.PRW) file to which your .projection file relates.
2.  Click on Results & Runlogs in the sidebar and expand the option that says "ResultType: Projection".
3.  In the upper left corner of the ribbon you will see two options:
4.  "Copy Grid" allows you to copy the data to the clipboard, after which you can paste the tab separated data in the programme of your choice.
5.  "Copy Grid to Excel" allows you to export the data directly to Excel.

You can then prepare the data for SAS.

These steps work in Prophet 8.2.

# java - 模块化 java ee 应用程序

> ID：15438062
> 
> 赞同：6
> 
> 时间：2013-03-15T16:58:32.407
> 
> 标签：java, jakarta-ee, architecture

我需要重构一个 Java EE 应用程序，因为当前的设计不是非常模块化，实际上它是一团糟。有一个商业门面，但由于该应用程序是由几个人开发的，因此原始设计已被多次忽略。该应用程序当前在带有 JSF 的 tomcat 上运行，但很快将移植到 websphere。我已经对不同的设计模式进行了一些研究，以从视图中封装业务逻辑，以及如何使应用程序模块化，以便更容易为其添加更多功能，因为将来应用程序将得到增强。我读过关于 OSGI 的文章，但我认为那是矫枉过正。

该应用程序已被拆分为多个层。但我离定义 API 还很遥远。我已经稍微清理了应用程序。现在所有的 bean 都通过业务外观方法访问业务逻辑。但是业务外观由大约 40 种方法组成，我认为这不是很好。

**第三方编辑**

例如我有这些模型类

*   `ManageLdap``createAccount`使用和之类的方法`deleteAccount`
*   `GroupManager`管理 ldap 组

在业务门面我有一个`createAccount`方法

*   调用`ManagerLdap`该类来创建一个 ldap 帐户和
*   做一些记录，还有
*   来电`GroupManager`

这个伪代码

```
package Model.ManageLdap

public class ManageLdap 
{
  public ldapAccount createAccount() {  }

  public ldapAccount deleteAccount() {  }
}

public class GroupManager
{
  public bool addAccountToGroup(var account) {  }
} 
```

而在商业门面

```
package BusinessFacade.Foo

public class SomeFoo
{
  public ldapAccount createAccount() 
  { 
    var ldapAccount = new ManageLdap.createAccount();
    Logger.log("Account created");
    var accountWasAdded = GroupManager.addAccountToGroup(ldapAccount);
  }     
} 
```

现在，如果我想为应用程序添加其他功能，例如为用户创建颠覆存储库的选项

*   我必须实现一个模型类来创建存储库，
*   将一些方法放在业务外观中，并
*   创建一个额外的 bean 以供视图访问。

这使得立面更大更混乱，但除此之外，这不是我所说的模块化设计。

那么如何在没有庞大的业务外观的情况下将业务逻辑与视图分离呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:16:08.493

首先尝试将您的应用程序拆分为多个层，例如：

*   道
*   服务
*   安全
*   看法
*   等等。

然后从每一层提取一些API（如dao-api，service-api等。每个api模块都应该有一组接口）。

然后创建一组模块（如`service-api`, `service-impl`, `dao-api`, `dao-impl`）并使用一些构建工具（*gradle*或*maven*）来管理它们。

不允许一个实现模块依赖于另一个实现模块（仅 impl -> api 或 api -> api）**。**

每个模块 - 分隔的 jar 文件。

在这样的重构之后，将来破坏应用程序设计将变得更加困难。

# opencv - 如何计算openframeworks中ofColors之间的距离

> ID：15438063
> 
> 赞同：2
> 
> 时间：2013-03-15T16:58:36.410
> 
> 标签：opencv, colors, openframeworks

我想做的是将 ofColor 转换为 l*a*b 颜色空间并测量欧几里得距离。但我不知道我应该如何在openframeworks中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T17:43:16.243

我对 C++ 不是很有经验，但我[把这个片段](http://cookbooks.adobe.com/post_Useful_color_equations__RGB_to_LAB_converter-14227.html)移植了过来：

```
//ported from http://cookbooks.adobe.com/post_Useful_color_equations__RGB_to_LAB_converter-14227.html
struct Color{
    float R,G,B,X,Y,Z,L,a,b;
};

#define REF_X 95.047; // Observer= 2°, Illuminant= D65
#define REF_Y 100.000;
#define REF_Z 108.883;

Color rgb2xyz(int R,int G,int B){
    float r = R / 255.0;
    float g = G / 255.0;
    float b = B / 255.0;

    if (r > 0.04045){ r = pow((r + 0.055) / 1.055, 2.4); }
    else { r = r / 12.92; }
    if ( g > 0.04045){ g = pow((g + 0.055) / 1.055, 2.4); }
    else { g = g / 12.92; }
    if (b > 0.04045){ b = pow((b + 0.055) / 1.055, 2.4); }
    else {  b = b / 12.92; }

    r = r * 100;
    g = g * 100;
    b = b * 100;
    //Observer. = 2°, Illuminant = D65
    Color xyz;
    xyz.X = r * 0.4124 + g * 0.3576 + b * 0.1805;
    xyz.Y = r * 0.2126 + g * 0.7152 + b * 0.0722;
    xyz.Z = r * 0.0193 + g * 0.1192 + b * 0.9505;
    return xyz;
}
Color xyz2lab(float X,float Y, float Z){
    float x = X / REF_X;
    float y = Y / REF_X;
    float z = Z / REF_X;

    if ( x > 0.008856 ) { x = pow( x , .3333333333f ); }
    else { x = ( 7.787 * x ) + ( 16/116.0 ); }
    if ( y > 0.008856 ) { y = pow( y , .3333333333f ); }
    else { y = ( 7.787 * y ) + ( 16/116.0 ); }
    if ( z > 0.008856 ) { z = pow( z , .3333333333f ); }
    else { z = ( 7.787 * z ) + ( 16/116.0 ); }

    Color lab;
    lab.L = ( 116 * y ) - 16;
    lab.a = 500 * ( x - y );
    lab.b = 200 * ( y - z );
    return lab;
}
Color lab2xyz(float l, float a, float b){
    float y = (l + 16) / 116;
    float x = a / 500 + y;
    float z = y - b / 200;

    if ( pow( y , 3 ) > 0.008856 ) { y = pow( y , 3 ); }
    else { y = ( y - 16 / 116 ) / 7.787; }
    if ( pow( x , 3 ) > 0.008856 ) { x = pow( x , 3 ); }
    else { x = ( x - 16 / 116 ) / 7.787; }
    if ( pow( z , 3 ) > 0.008856 ) { z = pow( z , 3 ); }
    else { z = ( z - 16 / 116 ) / 7.787; }

    Color xyz;
    xyz.X = x * REF_X;
    xyz.Y = y * REF_Y;
    xyz.Z = z * REF_Z;
    return xyz;
}
Color xyz2rgb(float X,float Y,float Z){
    //X from 0 to  95.047      (Observer = 2°, Illuminant = D65)
    //Y from 0 to 100.000
    //Z from 0 to 108.883
    X = ofClamp(X, 0, 95.047);

    float x = X * .01;
    float y = Y * .01;
    float z = Z * .01;

    float r = x * 3.2406 + y * -1.5372 + z * -0.4986;
    float g = x * -0.9689 + y * 1.8758 + z * 0.0415;
    float b = x * 0.0557 + y * -0.2040 + z * 1.0570;

    if ( r > 0.0031308 ) { r = 1.055 * pow( r , ( 1 / 2.4f ) ) - 0.055; }
    else { r = 12.92 * r; }
    if ( g > 0.0031308 ) { g = 1.055 * pow( g , ( 1 / 2.4f ) ) - 0.055; }
    else { g = 12.92 * g; }
    if ( b > 0.0031308 ) { b = 1.055 * pow( b , ( 1 / 2.4f ) ) - 0.055; }
    else { b = 12.92 * b; }

    Color rgb;
    rgb.R = round( r * 255 );
    rgb.G = round( g * 255 );
    rgb.B = round( b * 255 );
    return rgb;
}
Color rgb2lab(int R,int G,int B){
    Color xyz = rgb2xyz(R, G, B);
    return xyz2lab(xyz.X, xyz.Y, xyz.Z);
}
Color lab2rgb(int L,int a,int b){
    Color xyz = lab2xyz(L, a, b);
    return xyz2rgb(xyz.X, xyz.Y, xyz.Z);
} 
```

测量距离将是微不足道的事情：

```
float distLab(Color c1,Color c2){
    float dL = c1.L - c2.L;
    float da = c1.a - c2.a;
    float db = c1.b - c2.b;
    return sqrt(dL*dL + da*da + db*db);
} 
```

或者`ofVec3f(c1.L,c1.a,c1.b).distance(ofVec3f(c2.L,c2.a,c2.b));`

另请参阅[此答案](https://stackoverflow.com/questions/15583514/image-retrieval-system-by-colour-from-the-web-using-c-with-openframeworks/15721464#15721464)以获取 openframeworks 基本示例。 ![按颜色搜索图像](../Images/b9b60ea8ba8b7dd5c87285c729fdf2d2.png)

# c# - .NET 使用记录的最佳实践 - 文本文件？数据库？

> ID：15438065
> 
> 赞同：3
> 
> 时间：2013-03-15T16:58:42.273
> 
> 标签：c#, .net, database, sqlite, usage-statistics

我有一个工具，我的团队用于各种管理任务，它处理各种远程调用、Active Directory 查找、调用脚本等，以支持数千台机器。我有大约十几个人在积极使用它，但是为了极客和进一步的发展，我想建立一些统计和使用记录（不是个人的，只是为了看看使用了什么以及使用了多少）。

我的问题是，在 .NET（特别是 C#）中记录这些信息的好（甚至是最好的）方式是什么？

我的第一个想法是 TXT 文件甚至是 XML 文件，但我不知道我真的想在以后一遍又一遍地加载一个未知大小的文件。所以我想到了 SQLite，但我不想在每台机器上安装 .SQlite，尽管也许我可以将它嵌入到 exe 中（它从共享运行，而不是大多数用户的安装，尽管我也有一个安装包它。

我真的不想使用很多文本文件，只是为了干净的文件夹。

任何符合以下标准的建议：

1.  轻的
2.  快速地
3.  客户端没有安装
4.  稳定 不易腐败
5.  本地数据库，如

我试图用谷歌搜索，但我没有得到任何对我来说真正有意义的东西，可能是我不知道应该用谷歌搜索什么，因为这对我来说不是典型的使用模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:04:57.473

[Microsoft SQL Server Compact](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/compact.aspx)是一个可嵌入、免费、可再分发的数据库引擎，具有适用于 .NET 的良好 API。无需安装；您只需从 .NET 项目中引用数据库引擎库即可。数据库是简单的文件，您可以存储在任何地方并像其他任何地方一样四处移动。

它与“真正的”SQL Server 非常相似，因此如果您需要，两者之间的数据迁移应该很容易，并且有很多工具可以帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:08:55.520

您可以使用[db4o](http://www.db4o.com)。它是一个面向对象的数据库（无 SQL），可以直接保存您的对象 - 不需要对象映射、属性或任何配置开销，只需获取您的 POCO 并保存它们。您可以对查询使用不同的方法，例如 Query by example 或 SODA（类似于 Hibernate 的条件），它还具有完整的 LINQ 支持。可以将db4o用作嵌入式数据库（使用文件），内存占用非常小。无需安装，只需将 lib 包含到您的项目中即可。

例子：

```
var persons = db.Query<Person>( s => s.Age > 50 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:24:21.883

使用*[Log4Net](http://logging.apache.org/log4net/)*并将数据接收器与您的应用程序分离。Log4Net 允许您登录到文件、数据库、Windows 事件日志等。您甚至可以通过日志记录级别（致命、错误、警告、信息等）和其他过滤条件，根据它来自的程序集/类将日志输出定向到不同的目的地。

您甚至可以编写自己的附加程序来满足您的需要。

全部通过更改您的 log4net 配置。您甚至可以在应用程序运行时调整 log4net 配置。例如，考虑一个长时间运行的守护进程，它设置了日志记录来捕获整个应用程序中相当高级别的消息。如果您的日志突然开始显示记录的错误突然增加，您可能希望将日志调低到更细粒度的级别以了解发生了什么。或者也许将其调低到可疑类或程序集的非常精细的级别，以隔离问题细节。

使用 log4net，您只需调整配置文件就可以做到这一点，而无需反弹守护程序。

# c# - 为什么这个进度条码会导致进度条“挂起”？

> ID：15438073
> 
> 赞同：0
> 
> 时间：2013-03-15T16:59:18.413
> 
> 标签：c#, progress-bar, windows-ce, remote-debugging, freeze

在我正在处理的遗留代码中，有几个文件检索步骤 - 首先是这组数据，然后是那组数据，它们更新一个带有标签的进度条，显示进程的哪个部分当前处于活动状态，以及进度bar 本身当然会更新其位置。不过，其中一部分是挂起，通过使用`MessageBox.Show()`s （我必须这样做，不能在调试器中单步执行），我已经缩小了挂起发生的位置，但不能不*知道为什么*会发生。

警告：下面的代码是非正统的，很可能需要像“这里是龙”或“这条路是疯狂的”这样的警告标志。继续自担风险/谨防危险。

```
 MessageBox.Show("Made it just before the pbDialog code");//<-- it hangs after this is displayed
    using (pbDialog = new pbDialogs())
    {
        ProgressBar = new frmProgress( this, true);
        ProgressBar.SetProgressLabelText("Vendor/Dept/Expense Data");
        typeProgress = (int)ProgressStates.ProgressQRY;

        ProgressBar.label1.Text += " (Receiving)";
        if( pbDialog != null )
        {
            pbDialog.ShowDialog( ProgressBar, this );
        }
        else
        {
            ProgressBar.ShowDialog();
        }
        ProgressBar = null;
        evt.Set();  
    }
    MessageBox.Show("Made it just after the pbDialog code"); //This is not seen 
```

`pbDialog`以与此代码片段相同的形式声明：

```
public pbDialogs pbDialog; 
```

`pbDialogs`是另一种形式的类（frmProgress.cs）：

```
public class pbDialogs : IDisposable 
```

`ProgressBar`是frmProgress.cs中定义的匿名类的一个实例（frmProgress，也就是说，它派生自System.Windows.Forms.Form）

```
public  static  frmProgress ProgressBar; 
```

`typeProgress`是本地定义的 int：

```
public static int typeProgress = 0; 
```

`evt`是传递给此代码段所源自的方法的 arg 的名称：

```
private void FetchVendorDepartmentData(ManualResetEvent evt) 
```

`ManualResetEvent`，如您所知，是`System.Threading`

有没有人在这里看到任何令人惊讶的东西（除了这一切的普遍不正统）？

## 更新

我添加了更多消息：

```
 MessageBox.Show("Made it just before the pbDialog code");//<-- it hangs after this. TODO: Remove before deploying
    using (pbDialog = new pbDialogs())
    {
        MessageBox.Show("Made it just before ProgressBar = new frmProgress");// TODO: Remove
        ProgressBar = new frmProgress( this, true);
        MessageBox.Show("Made it just after ProgressBar = new frmProgress");// TODO: Remove
        ProgressBar.SetProgressLabelText("Vendor/Dept/Expense Data");
        typeProgress = (int)ProgressStates.ProgressQRY;
        MessageBox.Show("Made it just after assignment to typeProgress");// TODO: Remove
        ProgressBar.label1.Text += " (Receiving)";
        if( pbDialog != null )
        {
            MessageBox.Show("pbDialog was not null");// TODO: Remove
            pbDialog.ShowDialog( ProgressBar, this );
        }
        else
        {
            MessageBox.Show("pbDialog was null");// TODO: Remove
            ProgressBar.ShowDialog();
        }
        ProgressBar = null;
        MessageBox.Show("ProgressBar set to null");// TODO: Remove
        evt.Set();  
        MessageBox.Show("evt.Set called");// TODO: Remove
    }
    MessageBox.Show("Made it just after the pbDialog code");//TODO: Remove
} 
```

...我看到的最后一个是“pbDialog 不为空”

## 更新 2

根据“500 - 内部服务器错误”的答案，我在前面添加了一行来显示 ProgressBar：

```
ProgressBar.ShowDialog(); 
if( pbDialog != null ) . . . 
```

...但它没有区别；事实上，有了它，我什至没有它——我没有看到“pbDialog 不为空”的消息。

提前向比利布莱克道歉，但是：什么锤子？什么链子？什么铁砧？这里发生了什么可怕的事情？

## 更新 3

因此，显然这些行中的任何一条都会导致挂起：

```
ProgressBar.ShowDialog(); // with this, "pbDialog was not null" is not seen

pbDialog.ShowDialog( ProgressBar, this ); // if make it to here (line above commented out), "ProgressBar set to null" is not seen. 
```

## 更新 4

毕竟问题可能不在这段代码中，因为我在同一个类中发现了另一个使用完全相同代码的位置，并且数据检索的那部分完成得很好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:08:03.250

您在此处指定希望 ProgressBar 作为 pbDialog 的模式所有者：

```
pbDialog.ShowDialog( ProgressBar, this ); 
```

但此时您似乎还没有实际显示 ProgressBar （所有者）。

# ruby-on-rails - Rails 渲染 json - 如何下载响应？

> ID：15438078
> 
> 赞同：1
> 
> 时间：2013-03-15T16:59:27.370
> 
> 标签：ruby-on-rails, activeadmin

如何设置响应，以便浏览器下载动态生成的 json 数据，而不是显示？

我正在使用活动管理员

```
 member_action :download, :method => :get do
    application = Application.find(params[:id])
    respond_to do |format|
      format.json { render json: application.to_json( include: { categories: { include: { my_cases: { include: [{ questions: { include: :answers } }, :keys ] } } } } ) }
    end
  end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T06:02:43.520

使用`send_data`方法：

```
respond_to do |format|
  format.json { send_data application.to_json( include: { categories: { include: { my_cases: { include: [{ questions: { include: :answers } }, :keys ] } } } } ), type: :json, disposition: "attachment" }
end 
```

# joomla2.5 - Chronoform 邮件未显示字段值

> ID：15438083
> 
> 赞同：0
> 
> 时间：2013-03-15T16:59:41.167
> 
> 标签：joomla2.5

我有一个网站是 joomla 2.5 版本。我用过chronoform。我已经使用像 Nombre{Nombre} 这样的字段值配置了 chronoform 邮件。但是邮件进入垃圾邮件并且在正文中我得到如下所示..

```
Nombre    {Nombre}
Apellido    {Apellido}
Ciudad    {Ciudad}
Telefono    {Telefono}
Correo electrónico    {Correo electronico}
Mensaje    {Mensaje}

I     am    not    getting the values of {Nombre} etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:23:20.657

您需要确保在 chronoforms 中声明了字段名称。如果您进入表单并单击向导（如果您使用了向导） - 您将看到您的表单字段。单击以编辑您的表单字段，您的选项窗口将出现。

您将看到“标签文本”、“字段名称”、“字段默认值”等。

您必须填写每个字段的名称，以便将它们的值放入电子邮件中。因此，例如 Nombre 将是：

标签文本： 名称：

字段名称：名词

然后您可以在您的电子邮件模板中执行“Nombre: {Nombre}”来获取值。

# android - 设置相机尺寸 - 参数与意图？

> ID：15438085
> 
> 赞同：13
> 
> 时间：2013-03-15T16:59:52.583
> 
> 标签：android, android-camera

我目前正在使用意图拍照，如下所示：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
intent.putExtra("return-data", true);
startActivityForResult(intent, CAMERA_REQUEST); 
```

但我确实需要将图像大小设置为尽可能接近正方形。因此，经过研究，您似乎需要执行以下操作：

```
Camera camera = Camera.open();
Parameters params = camera.getParameters();
List<Camera.Size> sizes = params.getSupportedPictureSizes();

// Once you will see the supported Sizes, you can define them with the method :

setPictureSize(int width, int height); 
```

我的问题是，这些是一起工作还是非此即彼？哪种方法最适合我的需求？

同样，我有 96 像素 x 96 像素的用户资料图片框。用户拍照后，我希望图像填充整个框而不拉伸。最好的方法是在拍摄照片时设置尺寸，还是在事后更改`imageView`或（或...？）？`bitmap`或者，我应该让用户裁剪图片，然后我可以定义裁剪区域的尺寸吗？

**编辑：请参阅赏金以获取更新的问题。**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T20:11:11.233

此代码允许我从图库中选择图像。裁剪并使用我的纵横比。我为使用相机做了类似的代码。用户拍照后，它立即启动一个活动来裁剪图片。

```
 Intent photoPickerIntent = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                photoPickerIntent.setType("image/*");
                photoPickerIntent.putExtra("crop", "true");
                photoPickerIntent.putExtra("outputX", 150);
                photoPickerIntent.putExtra("outputY", 150);
                photoPickerIntent.putExtra("aspectX", 1);
                photoPickerIntent.putExtra("aspectY", 1);
                photoPickerIntent.putExtra("scale", true);
                photoPickerIntent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri());
                photoPickerIntent.putExtra("outputFormat",
                        Bitmap.CompressFormat.JPEG.toString());
                startActivityForResult(photoPickerIntent, RESULT_LOAD_IMAGE); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T03:08:32.607

您可以使用`Bitmap.createScaleBitmap(Bitmap src, int destWidth, int destHeight, boolean filter)`来调整位图的大小

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T14:26:03.190

> 这些是一起工作还是非此即彼？哪种方法最适合我的需求？

不，他们不一起工作。当您将相机与 一起使用时`Intent`，您是在要求系统为您拍照（即，用户会收到使用默认相机应用程序的提示并拍照或从图库中选择一张）。

当您使用第二种方法时，您将创建自己的`Camera`对象，它比第一种方法更可定制。

使用第一种方法，您必须在之后缩放图像，而使用第二种方法，您可以直接以正确的尺寸拍摄图片，因此主要区别在于第一种由android控制，第二种由您的应用程序直接控制，所以**第二种方法最适合您的需求。**如果您以后不想扩展。

如果您无论如何都要缩放（请阅读下文），那么您使用哪种方法拍照并不重要，我会说在这种情况下，**使用默认应用程序**。

> 在拍摄照片时设置大小或事后更改 imageView 或位图（或...？）的最佳方法是什么？或者，我应该让用户裁剪图片，然后我可以定义裁剪区域的尺寸吗？

这取决于您的需求。在第一种情况下，您的应用程序会更改拍摄的图片，因此**您选择**原始图片的哪个部分将成为最终的 96x96 图片。这种方法的问题在于，您可能会意外地以错误的方式（或至少是出乎意料的方式）对图像进行裁剪/拉伸/操作（即移除他们的部分面部）。

当您使用第二种方法时，您可以让用户**自由选择**他们想要的图片的哪一部分。

如果您能够自动检测到原始图像的最佳部分，您应该使用第一种方法，但是当您实际上询问哪种方法是最好的方法时，**您应该使用第二种**方法，因为它提供了更大的**灵活性**最终用户。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T20:01:35.357

*(1) 如何自动裁剪以适合我的 ImageView (96dp x 96dp)，*

看来您已经有了正确处理作物的解决方案。如果要将密度像素单位转换为与手机对应的像素单位，则需要使用

```
public int dpToPixel(int dp) {
Resources r = getResources();
float px = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp, r.getDisplayMetrics());
} 
```

所以你可以使用以下作为额外的

```
photoPickerIntent.putExtra("outputX", dpToPixel(96));
photoPickerIntent.putExtra("outputY", dpToPixel(96)); 
```

*(2) 如何缩小图片的大小（制作新的位图？）。这些需要在 ListViews 上快速加载。因此，与其上传 1MB 的图片，我还需要一张 2,000k 的图片。*

如果您使用大小约为 96dp 的图像，则无需担心图像大小。当您尝试在一个活动中执行多个位图时，创建和销毁新位图通常非常危险。您很容易遇到“内存不足”等问题。因此，更建议使用 Uri 代替。因此，保存您放入意图中的 uri，并制作一个 uri 列表，以根据需要显示在列表视图上。

在 imageview 上，它是 setImageURI(Uri uri)。

希望能回答你所有的问题。

# angularjs - 动态加载的输入框什么都不做

> ID：15438092
> 
> 赞同：0
> 
> 时间：2013-03-15T17:00:23.060
> 
> 标签：angularjs

所以我有一些 html 会根据用户所在的 questionNumber 动态加载到#panel div 中。这不是所有代码，而是我认为的所有相关代码。无论如何，`<input>`get 已加载到页面中，但实际上并没有做任何事情。我在这里想念什么？当 questionNumber === 1 时，我遇到了同样的问题，其中绑定的变量只是显示为`{{variable}}`etc

```
var readingController = function (scope, Romanize){
        scope.usersRomanization;
        //alert(scope.usersRomanization);
}

var app = angular.module('Tutorials', ['functions', 'tutorials']).controller('getAnswers', function ($scope, $element, Position, Romanize) {
$scope.sectionNumber = Position.sectionNumber;
if ($scope.sectionNumber === 0){
    $('#panel').html('<div ng-controller="readingController"><input ng-model="usersRomanization"></input></div>');
    readingController($scope, Romanize);
}

<body ng-controller="getAnswers">
    <div  id="panel">
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:19:58.540

如果你将 HTML 添加到 DOM，你必须告诉 Angular 编译它。这应该在指令中完成。您需要注入`$compile`然后执行以下操作：

```
var content = '<div ng-controller=...></div>';
var compiled = $compile(content)(scope);
// then put the content where you want 
```

或者更好的是，定义一个指令并使用 a `template`，它将由 Angular 自动为您编译。

其他替代方案是 ng-include（它将为您编译加载的内容）和 ng-switch，它允许您将模板放入 HTML。

# javascript - 通过代理服务器请求 http 调用

> ID：15438100
> 
> 赞同：1
> 
> 时间：2013-03-15T17:00:31.693
> 
> 标签：javascript, node.js, http

我们的服务器在没有代理服务器的情况下进行 http 调用。是否可以通过代理服务器进行相同的调用？（我们想使用请求。）

示例代理服务器：112.175.18.180 端口 80

应用程序.js：

```
var http = require('http');

http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/');

var request = require("request");

var parseMyAwesomeHtml = function(html) {
   console.log(html);
};

request("http://checkip.dyndns.org/", function (error, response, body) {
    if (!error)
        parseMyAwesomeHtml(body);
    else
        console.log(error);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:31:18.820

我们找到了正确的语法。效果很好。

应用程序.js：

```
var http = require('http');
var request = require("request");

http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/');

var parseMyAwesomeHtml = function(html) {
    console.log(html);
};

request({uri:"http://checkip.dyndns.org/",proxy: 'http://112.175.18.180/', port: 80 }, function (error, response, body) {
    if (!error)
        parseMyAwesomeHtml(body);
    else
        console.log(error);
}); 
```

# visual-c++ - 由于跟踪引用导致堆损坏？

> ID：15438103
> 
> 赞同：1
> 
> 时间：2013-03-15T17:00:52.817
> 
> 标签：visual-c++, c++-cli, heap-corruption

我正面临托管堆损坏。以下功能可能会导致损坏吗？

```
void EE::config(PT::DId^%dId){
  dpId = gcnew PT::DId(String::Format("{0}new", dId->Name));
} 
```

# java - 使用 Matlab javabuilder 进行 Web 部署

> ID：15438110
> 
> 赞同：0
> 
> 时间：2013-03-15T17:01:21.300
> 
> 标签：java, matlab, deployment

我尝试了给出的示例 magicSquare 来创建一个 Web 应用程序。我使用了 Tomcat 服务器并将构建的 .war 文件导入到 eclipse 中。但是，当我运行 .jsp 页面时，它只会转到 UI 并且调用 mcr 的实例不会运行。服务器在那里停止。每当在 servlet 中调用已部署的 matlab 函数时，它都会停止。谁能帮我找出这个错误！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T09:55:08.697

也许为时已晚，但它可能对其他人有用......我解决了这个问题，改变了 MCR_ROOT_CACHE 变量。在我的 Ubuntu 服务器上，我设置：

```
export MCR_CACHE_ROOT=/path/to/temp/folder 
```

# c# - 将 ActionResult 渲染为字符串，将其作为 ContentResult 返回

> ID：15438115
> 
> 赞同：0
> 
> 时间：2013-03-15T17:01:40.753
> 
> 标签：c#, asp.net-mvc-3, html-agility-pack

我有一些代码几乎可以将 actionresult 转换为字符串。

在我执行 EditableItem 方法后，它将 html 流响应输出到字符串编写器，然后我获取 html 并对其进行修改，然后将 html 放入字符串中（带有转义字符）。

我的问题是在代码末尾，我无法返回内容结果。我认为这是因为我弄乱了 ControllerContext。我完全确定这是否是问题所在，但这段代码为我返回了一个空白的 html 页面。但最后，readonlyHtmlString 字符串充满了很棒的 html 代码。并且呈现常规 ContentResult 也不起作用。我该如何补救？

谢谢

```
 public ActionResult Readonly(long Id = 0, long id2 = 0)
    {

         var localWriter = new StringWriter();
         var response = ControllerContext.RequestContext.HttpContext.Response;
         response.Output = localWriter;
         this.EditableItem( Id, id2 ).ExecuteResult(ControllerContext);
         localWriter.Flush();
         var htmlStringWithEscapes = localWriter.ToString();

         var htmlDoc = new HtmlDocument();
         htmlDoc.LoadHtml(htmlStringWithEscapes);

         foreach (HtmlNode inputNode in htmlDoc.DocumentNode.SelectNodes("//input"))
         {
            //var disabledNode = inputNode.Clone();
            inputNode.Attributes.Add("disabled", "disabled");
            //inputNode.ParentNode.ReplaceChild(inputNode, disabledNode);
         }

         var readonlyHtmlString = htmlDoc.DocumentNode.OuterHtml;

         //should return a readonly view at this point!!
         //return Content(readonlyHtmlString, "text");

         //this code doesn't work anymore either 
         return Content(String.Format("This is the Material Item Controller > Readonly and Id is {0} and id2 is {1}",Id, id2),"text");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:33:43.087

我不确定为什么它不起作用，所以我放弃了代码以支持这里使用的方法......

[从 WCF REST 服务方法将 MVC3 操作呈现为字符串](https://stackoverflow.com/questions/7114351/render-an-mvc3-action-to-a-string-from-a-wcf-rest-service-method/7125190#7125190)

# admob - 如何显示多个 Admob 插页式广告？

> ID：15438116
> 
> 赞同：1
> 
> 时间：2013-03-15T17:01:41.970
> 
> 标签：admob, interstitial

我有两部分代码

预载

```
interestial = [[GADInterstitial alloc] init];
[interestial loadRequest:request] 
```

显示

```
[interestial presentFromRootViewController:] 
```

下次我应该怎么做才能正确显示插页式广告？有 ARC 和没有

预载

```
if(arc) [interstitial release];
interstitial = [[GADInterstitial alloc] init];
[interstitial loadRequest:request] 
```

显示

```
[interstitial presentFromRootViewController:self] 
```

- 或者

在里面

```
interstitial = [[GADInterstitial alloc] init]; 
```

预载

```
[interstitial loadRequest:request] 
```

显示

```
[interstitial presentFromRootViewController:self] 
```

- 或者

在里面

```
interstitial = [[GADInterstitial alloc] init];
[interstitial loadRequest:request]; 
```

预载

```
// nothing 
```

显示

```
[interstitial presentFromRootViewController:self];
[interstitial loadRequest:request]; 
```

如果最后一个选项不正确，那么在调用 present 后我应该等待多长时间预加载？或者我应该听委托还是等待一些用户操作开始预加载？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T00:14:01.463

您应该收听[GADInterstitialDelegate](https://developers.google.com/mobile-ads-sdk/docs/admob/advanced#gadinterstitialdelegate)`interstitialDidDismissScreen:`中的方法。当您完成第一个插页式广告时，它会告诉您，您可以开始为下一个插页式广告做准备。

所以你会有类似的东西：

```
// During init time.
self.interstitial = [[GADInterstitial alloc] init];
self.interstitial.adUnitID = MY_INTERSTITIAL_UNIT_ID;
self.interstitial.delegate = self;
[self.interstitial loadRequest:[GADRequest request]];

...

// During show time.
[self.interstitial presentFromRootViewController:self];

...

// When user dismisses the interstitial.
- (void)interstitialWillDismissScreen:(GADInterstitial *)interstitial {
  self.interstitial.delegate = nil;
  if (!arc) {
    [self.interstitial release];
  }

  // Prepare next interstitial.
  self.interstitial = [[GADInterstitial alloc] init];
  self.interstitial.adUnitID = MY_INTERSTITIAL_UNIT_ID;
  self.interstitial.delegate = self;
  [self.interstitial loadRequest:[GADRequest request]];
} 
```

# ruby-on-rails - rails new - 捆绑安装

> ID：15438118
> 
> 赞同：0
> 
> 时间：2013-03-15T17:01:45.153
> 
> 标签：ruby-on-rails, bundle

我只是尝试在新的 ubuntu 12.10 上安装 rvm/ruby/gems/rails，经过许多错误和谷歌搜索后，我想创建我的第一个应用程序，但我收到了这个错误。我怎样才能让它工作？

```
 root@filip-Ideapad-Z570:/rails_projects# rails new my_fisrt_app
  create  
  create  README.rdoc
  create  Rakefile
  create  config.ru
  create  .gitignore
  create  Gemfile
  create  app
  create  app/assets/images/rails.png
  create  app/assets/javascripts/application.js
  create  app/assets/stylesheets/application.css
  create  app/controllers/application_controller.rb
  create  app/helpers/application_helper.rb
  create  app/views/layouts/application.html.erb
  create  app/mailers/.gitkeep
  create  app/models/.gitkeep
  create  config
  create  config/routes.rb
  create  config/application.rb
  create  config/environment.rb
  create  config/environments
  create  config/environments/development.rb
  create  config/environments/production.rb
  create  config/environments/test.rb
  create  config/initializers
  create  config/initializers/backtrace_silencers.rb
  create  config/initializers/inflections.rb
  create  config/initializers/mime_types.rb
  create  config/initializers/secret_token.rb
  create  config/initializers/session_store.rb
  create  config/initializers/wrap_parameters.rb
  create  config/locales
  create  config/locales/en.yml
  create  config/boot.rb
  create  config/database.yml
  create  db
  create  db/seeds.rb
  create  doc
  create  doc/README_FOR_APP
  create  lib
  create  lib/tasks
  create  lib/tasks/.gitkeep
  create  lib/assets
  create  lib/assets/.gitkeep
  create  log
  create  log/.gitkeep
  create  public
  create  public/404.html
  create  public/422.html
  create  public/500.html
  create  public/favicon.ico
  create  public/index.html
  create  public/robots.txt
  create  script
  create  script/rails
  create  test/fixtures
  create  test/fixtures/.gitkeep
  create  test/functional
  create  test/functional/.gitkeep
  create  test/integration
  create  test/integration/.gitkeep
  create  test/unit
  create  test/unit/.gitkeep
  create  test/performance/browsing_test.rb
  create  test/test_helper.rb
  create  tmp/cache
  create  tmp/cache/assets
  create  vendor/assets/javascripts
  create  vendor/assets/javascripts/.gitkeep
  create  vendor/assets/stylesheets
  create  vendor/assets/stylesheets/.gitkeep
  create  vendor/plugins
  create  vendor/plugins/.gitkeep
     run  bundle install
/var/lib/gems/1.9.1/gems/bundler-1.3.4/lib/bundler/ui.rb:36:in `initialize': undefined method `[]' for #<Thor::Shell::Color:0x8720238> (NoMethodError)
from /usr/lib/ruby/vendor_ruby/bundler/cli.rb:14:in `new'
from /usr/lib/ruby/vendor_ruby/bundler/cli.rb:14:in `initialize'
from /usr/lib/ruby/vendor_ruby/bundler/vendor/thor.rb:246:in `new'
from /usr/lib/ruby/vendor_ruby/bundler/vendor/thor.rb:246:in `dispatch'
from /usr/lib/ruby/vendor_ruby/bundler/vendor/thor/base.rb:389:in `start'
from /var/lib/gems/1.9.1/gems/bundler-1.3.4/bin/bundle:20:in `block in <main>'
from /var/lib/gems/1.9.1/gems/bundler-1.3.4/lib/bundler/friendly_errors.rb:3:in `with_friendly_errors'
from /var/lib/gems/1.9.1/gems/bundler-1.3.4/bin/bundle:20:in `<main>' 
```

我是 ruby​​ on rails 的新手，我真的无法在这里或在谷歌上找到如何解决这个问题，有人可以帮我解决这个问题吗？

```
 /var/lib/gems/1.9.1/gems/bundler-1.3.4/lib/bundler/ui.rb:36:in `initialize': undefined method `[]' for #<Thor::Shell::Color:0x8720238> (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:48:43.967

听起来不兼容`ruby`并`rails`尝试安装`https://rvm.io/`. 然后`rvm install 1.9.3`

返回什么`ruby -v`？

# java - JSOUP - 从页面中以特定格式直接提取数据

> ID：15438120
> 
> 赞同：0
> 
> 时间：2013-03-15T17:01:50.063
> 
> 标签：java, web, web-scraping, jsoup

我目前正在试验 jsoup，我的目标是从这个零售网站中提取数据，形式如下：

```
 Title: blabl
 Link: foba
 Grösse: 9999
 KP: FALSE
 Miete: TRUE
 Preis: 1923,23 
```

到目前为止，我已经编写了这个测试程序：

```
public class jsoup_test {
    public static void main(String[] args) throws IOException {
        String url = "http://derstandard.at/anzeiger/immoweb/Suchergebnis.aspx?Regionen=9&Bezirke=&Arten=&AngebotTyp=&timestamp=1363305908912";
        print("Fetching %s...", url);

        Document doc = Jsoup.connect(url).get();
        Elements price = doc.select("tr.topangebot");
        Elements price1 = doc.select("tr.white");

        System.out.println("--------------------------------"); 
        System.out.println(price);  
        System.out.println("--------------------------------"); 
        System.out.println(price1); 

    }

    private static void print(String msg, Object... args) {
        System.out.println(String.format(msg, args));
    }

} 
```

但是，这个程序给了我这样的数据：

```
<tr id="ctl00_Body_mc_cErgebnisListe1_ctl02_InseratInfoTR" class="topangebot"> 
 <td class="BildTD" rowspan="2"> <a href="/anzeiger/immoweb/Detail.aspx?InseratID=6847212&amp;FromTopAngebot=true"><img border="0" src="http://images.derstandard.at/t/22/upload/imagesanzeiger/immoupload/2013/02/27/277515f7-f935-4a13-83fb-dbe3af930e28.jpg" alt="" /></a> </td> 
 <td class="TitleTD" rowspan="2"> <span class="neu">TOP!</span> <strong><a href="/anzeiger/immoweb/Detail.aspx?InseratID=6847212&amp;FromTopAngebot=true">Gehobene Qualit&auml;t, Design und exquisite Ausf&uuml;hrung: Dachausbau mit Weitblick und 100 m&sup2; Terrasse</a></strong><br /><a href="/anzeiger/immoweb/Detail.aspx?InseratID=6847212&amp;FromTopAngebot=true">Wien 16.,Ottakring, Dachgeschoss</a><br /><span style="color: gray">Erstbezug, K&uuml;che, Parkettboden, Hauptmiete, Terrasse, Lift, Keller, Altbau, Kabel/Sat-TV, Barrierefrei</span> </td> 
 <td class="GroessenTD" rowspan="2"> <span class="strong">125 m&sup2;</span><br /><span class="strong">4&nbsp;</span>Zimmer </td> 
 <td class="PreisTD" style="border:none;"> <span class="light">Miete</span>&nbsp;2.190&nbsp;<br /> </td> 
</tr>
<tr id="ctl00_Body_mc_cErgebnisListe1_ctl02_MerklisteTR" class="topangebot"> 
 <td class="merkliste"> </td> 
</tr>
<tr id="ctl00_Body_mc_cErgebnisListe1_ctl03_InseratInfoTR" class="topangebot"> 
 <td class="BildTD" rowspan="2"> <a href="/anzeiger/immoweb/Detail.aspx?InseratID=6871213&amp;FromTopAngebot=true"><img border="0" src="http://images.derstandard.at/t/22/upload/imagesanzeiger/immoimporte/justimmo2/files.justimmo.at/public/pic/big/AEs_YegpKC.JPG" alt="" /></a> </td> 
 <td class="TitleTD" rowspan="2"> <span class="neu">TOP!</span> <strong><a href="/anzeiger/immoweb/Detail.aspx?InseratID=6871213&amp;FromTopAngebot=true">HS-IMMO: 14\. PREISSENSATION Eckzinshaus 1414m&sup2; Leerstand - Gesamtnutzfl&auml;che 1670m&sup2; + Rohdachboden ca. 700m&sup2; erzielbar ( Baubescheid ) € 1555.-/m&sup2; NFL</a></strong><br /><a href="/anzeiger/immoweb/Detail.aspx?InseratID=6871213&amp;FromTopAngebot=true">Wien 14.,Penzing, Zinshaus</a><br /><span style="color: gray">Parkettboden, Altbau, Kabel/Sat-TV</span> </td> 
 <td class="GroessenTD" rowspan="2"> <span class="strong">1.670 m&sup2;</span><br /> </td> 
 <td class="PreisTD" style="border:none;"> <span class="light">KP</span>&nbsp;2.590.000&nbsp;<br /> </td> 
</tr>... 
```

这不是人类可读的格式。因此我的问题是。如何获得 jsoup，它以我想要的格式直接提取数据？

谢谢你的回复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:05:58.760

例如选择*标题*你需要做这样的事情

```
String title = doc.select("tr.topangebot > td.TitleTD").first.text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:04:31.390

如果您知道页面结构，则可以使用 DOM 导航页面：

[http://jsoup.org/cookbook/extracting-data/dom-navigation](http://jsoup.org/cookbook/extracting-data/dom-navigation)

这个问题有一堆很好的网络爬虫

[使用 Java 进行网页抓取](https://stackoverflow.com/questions/3202305/web-scraping-with-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T19:37:09.653

我喜欢使用 Jsoup，因为它的方法实际上是为 DOM 遍历而构建的。因此，如果您擅长 HTML、CSS 和 Jquery，那么这个库就是为您构建的。是的，Jsoup 方法可能太快了。是的，它可能不适合您的需求。但是，当涉及从任何类型的网站收集任何类型的信息时，Jsoup 足够灵活，可以满足您的需求。

# php - PHP 如何访问 smarty 模板文本框输入？

> ID：15438121
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:01:56.120
> 
> 标签：php, input, smarty

我对 PHP 和 smarty 模板（昨天开始学习）真的很陌生，现在我必须使用它们做一个项目。

有人可以告诉我，如果在 tpl 文件中我有一个文本框供用户输入内容，我如何将该输入传递给 php 文件进行处理？对你们来说可能是个很愚蠢的问题，但我只用过 .NET

还有一件事，什么是 PHP5？项目经理说我只能用它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:13:31.003

如果您对它不熟悉，您会想要找到一两个介绍性教程来获得 PHP 的“感觉”，但要给您一些建议：

*   PHP 是服务器端语言，它将处理应用程序中的所有数据
*   “PHP5”仅表示“PHP，版本 5”；有一段时间，人们仍在为 PHP 4 编写和维护代码，因为这两个版本之间发生了一些重大变化，但现在已经有一段时间没有真正相关（自 2007 年底以来，PHP 4 不被支持）
*   Smarty 是一种建立在 PHP 之上的模板语言，用于生成实际发送到浏览器的 HTML
*   HTML 表单（在 ASP.net 之外，它有自己独特的处理方式）将数据提交到您放置在标签`action="..."`属性中的任何页面。`<form>`然后，该页面可以是一个 PHP（或 Ruby、Python 等）脚本，它查看数据并对其进行适当的处​​理。

希望这会引导您朝着正确的方向前进。快乐编码！:)

# javascript - 任何 URL 的彩盒模式

> ID：15438124
> 
> 赞同：0
> 
> 时间：2013-03-15T17:02:06.560
> 
> 标签：javascript, jquery, colorbox

我正在尝试创建一个打开任何 URL 的模式，其中`a`标签具有特定的类。

在 colorbox 文档中，它有一个例子：

```
// ColorBox can accept a function in place of a static value:
$("a.gallery").colorbox({rel: 'gal', title: function(){
  var url = $(this).attr('href');
  return '<a href="' + url + '" target="_blank">Open In New Window</a>';
}}); 
```

我的 HTML 结构是：

" 类="模态" rel="gal">

```
 <h2 id="post-<?php the_ID(); ?>"><?php the_title(); ?></h2>

        <div class="entry">
            <?php the_excerpt(); ?>
        </div>

</div> 
```

我的JS是：

```
jQuery(".modal").colorbox({rel: 'gal', title: function(){
  var url = jQuery(this).attr('href');
  return '<a href="' + url + '" target="_blank">Open In New Window</a>';
}}); 
```

但这只是没有触发 - 我没有收到任何控制台 JS 错误 - 任何人都可以看到这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:15:57.597

您正在元素上使用该`colorbox()`方法`<div>`，这些元素对于该方法不是有效的元素。此方法只能用于`<a>`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:16:14.437

完全误解了该功能 - 如果您尝试执行我在开篇文章中概述的内容，请使用 iframe 功能。

例如

```
jQuery(function () {
    jQuery(".modal").colorbox({iframe:true, innerWidth:425, innerHeight:344});    
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:11:42.703

parent.$.colorbox.resize({ 宽度: 460, 高度: 130 });

# java - Apache Felix 设置 Classloader 以限制 Android 上的类访问

> ID：15438131
> 
> 赞同：0
> 
> 时间：2013-03-15T17:02:27.547
> 
> 标签：java, android, osgi, classloader, apache-felix

我在 Android 应用程序中将 Apache Felix 作为捆绑加载器运行。由于那里无法访问 Jaca SecurityManager，我正在寻找一种解决方案来防止捆绑包访问某些包，例如 java.io.*。只编写一个自定义类加载器，在请求此类类时返回 null 或抛出异常的想法似乎是最好的，但是，我找不到如何为 Felix 管理的所有包设置全局类加载器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:45:35.777

尝试设置此属性：

> **org.osgi.framework.system.packages** - 指定应通过 System Bundle 从框架类加载器导出的包的逗号分隔列表。框架会将其设置为合理的默认值。如果指定了值，它将替换任何默认值。

默认情况下，所有 java.* 类对任何包都是可见的。如果您覆盖它，您可以更改该行为。尝试导入您未包含的包（例如 java.io）的包在安装期间将无法解析，因此无法启动。

有关更多信息，请参见：http: [//felix.apache.org/site/apache-felix-framework-configuration-properties.html](http://felix.apache.org/site/apache-felix-framework-configuration-properties.html)

# configuration - Spring.NET PropertyPlaceholderConfigurer 使用 ${my value}

> ID：15438132
> 
> 赞同：1
> 
> 时间：2013-03-15T17:02:31.913
> 
> 标签：configuration, spring.net

我的 Spring.NET 配置使用以下类型语法并且工作正常。

```
<object id="JohnUsingVariableSource"
    type="XmlConfig.StringInjection.Person, XmlConfig">
  <property name="Name" value="${JohnsFullName}" />
</object> 
```

${JohnsFullName} 占位符的值在 app.config 文件中配置。我的要求已经改变，我知道需要在启动时从数据库中获取名称。如何覆盖 app.config 文件中的值？我可以在不打开 app.config 的情况下在代码中执行此操作（如此处 App.Config[更改值](https://stackoverflow.com/questions/11149556/c-sharp-app-config-change-value)），spring.NET 是否有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:35:50.243

是的，您可以在不修改 app.config 文件的情况下执行此操作。只需实现一个自定义[`IVariableSource`](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-variablesource)：

```
public interface IVariableSource
{
  string ResolveVariable(string name);
} 
```

在`ResolveVariable`您从数据库中读取的方法中。

如果我没记错的话，配置中配置的第一个变量源将是 spring 配置使用的变量源。

# android - 从图库中选择图像并使用 httpPost 通过 API 上传到服务器

> ID：15438135
> 
> 赞同：0
> 
> 时间：2013-03-15T17:02:35.510
> 
> 标签：android, image, http, image-uploading

我正在开发一个 android 应用程序，我需要从图库中选择图像并将其上传到服务器。我有 URI 并且能够使用 getRealPathFromURI 获取图像文件的实际路径。当我必须使用 httpPost 将其上传到 API 时，问题就开始了（我也需要传递一些参数）。我不断收到 nullpointerException。我浏览了各种帖子，但似乎无法找出问题所在。以下是我的代码

```
@Override
      public void onActivityResult(int requestCode, int resultCode, Intent data) {

      if (resultCode == Activity.RESULT_OK) {
            switch (requestCode) {
              case 1:

                  String action = "update_user_image";
                  HashMap<String, String> user = session.getUserDetails();       
                  String token = user.get(SessionManagement.KEY_TOKEN);

                  List<NameValuePair> params = new ArrayList<NameValuePair>();
                  params.add(new BasicNameValuePair("action", action));
                  String  device_identifier =   android.os.Build.ID; 

                  currImageURI = data.getData();
                  Intent intent = new Intent(this, ProfilePrivateActivity.class);
                  intent.putExtra("imageUri", currImageURI.toString());

                  String selectedImagePath = getRealPathFromURI(currImageURI).toString();

                  try {

                     HttpClient httpClient = new DefaultHttpClient();
                    HttpPost postRequest = new HttpPost(UPLOAD_URL);
                    postRequest.setEntity(new UrlEncodedFormEntity(params));
                    postRequest.addHeader(BasicScheme.authenticate(
                             new UsernamePasswordCredentials(device_identifier, token),"UTF-8", false));

                    bm = BitmapFactory.decodeFile(selectedImagePath);

                    ByteArrayOutputStream bos = new ByteArrayOutputStream();
                    bm.compress(CompressFormat.JPEG, 20, bos);
                    byte[] data2 = bos.toByteArray();

                    ByteArrayBody bab = new ByteArrayBody(data2, selectedImagePath);
                    // File file= new File("/mnt/sdcard/forest.png");
                    // FileBody bin = new FileBody(file);
                    MultipartEntity reqEntity = new MultipartEntity(
                            HttpMultipartMode.BROWSER_COMPATIBLE);
                    reqEntity.addPart("uploaded", bab);
                    //reqEntity.addPart("photoCaption", new StringBody("sfsdfsdf"));
                    postRequest.setEntity(reqEntity);
                    HttpResponse response = httpClient.execute(postRequest);
                    BufferedReader reader = new BufferedReader(new InputStreamReader(
                            response.getEntity().getContent(), "UTF-8"));
                    String sResponse;
                    StringBuilder s = new StringBuilder();

                    while ((sResponse = reader.readLine()) != null) {
                        s = s.append(sResponse);
                    }
                    System.out.println("Response: " + s);

                } catch (Exception e) {
                    e.printStackTrace();
                }

                  startActivity(intent);

                break; 
```

这是我获取实际路径的代码

```
private Object getRealPathFromURI(Uri currImageURI2) {
        try
        {
            String[] proj = {MediaStore.Images.Media.DATA};
            Cursor cursor = managedQuery(currImageURI2, proj, null, null, null);
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        }
        catch (Exception e)
        {
            return currImageURI2.getPath();
        } 
```

以下是日志：

```
03-15 19:52:54.718: I/ResolverActivity(5574): mcc=234
03-15 19:52:56.428: D/CLIPBOARD(5574): Hide Clipboard dialog at Starting input: finished by someone else... !
03-15 19:52:58.578: D/AndroidRuntime(5574): Shutting down VM
03-15 19:52:58.578: W/dalvikvm(5574): threadid=1: thread exiting with uncaught exception (group=0x40c621f8)
03-15 19:52:58.583: E/AndroidRuntime(5574): FATAL EXCEPTION: main
03-15 19:52:58.583: E/AndroidRuntime(5574): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content:xxxxx (has extras) }} to activity {com.example.threesixty_android/com.example.threesixty_android.MyDialogBox}: java.lang.NullPointerException
03-15 19:52:58.583: E/AndroidRuntime(5574):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2991)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3034)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at android.app.ActivityThread.access$1100(ActivityThread.java:127)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1188)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at android.os.Looper.loop(Looper.java:137)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at android.app.ActivityThread.main(ActivityThread.java:4511)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at java.lang.reflect.Method.invokeNative(Native Method)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at java.lang.reflect.Method.invoke(Method.java:511)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:986)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:753)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at dalvik.system.NativeStart.main(Native Method)
03-15 19:52:58.583: E/AndroidRuntime(5574): Caused by: java.lang.NullPointerException
03-15 19:52:58.583: E/AndroidRuntime(5574):     at com.example.threesixty_android.MyDialogBox.onActivityResult(MyDialogBox.java:156)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at android.app.Activity.dispatchActivityResult(Activity.java:4654)
03-15 19:52:58.583: E/AndroidRuntime(5574):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2987)
03-15 19:52:58.583: E/AndroidRuntime(5574):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:08:02.663

您必须将 http 代码放在线程或异步任务中。您的清单文件中需要 INTERNET 权限。为什么还要创建意图并开始活动？

# windows - 如何在命令行 .cmd 中使用参数

> ID：15438138
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:02:44.917
> 
> 标签：windows, for-loop, batch-file, cmd, command-line-arguments

这是我第一次编写 .cmd 文件

我需要使用一些命令解密文件..让我们使用一个简单的例子。我需要的是如何让用户在双击 .cmd 文件后输入参数以及如何在 cmd 中使用参数。

假设我需要用户在双击 .cmd 文件后输入他的名字：

> 你好
> ，请输入你的名字：//在这里用户应该输入他的名字让我们说彼得你好吗
> 彼得//这里文件正在使用 arg0 并等​​待用户输入他的名字，然后程序将继续，
> 请输入你的路径want ... : // 用户在此处输入他想要保存输出文件的路径 ...
> 该文件已在 //path 中成功解密

所以我需要的代码必须类似于：

```
echo hello
wait()//till the user enters his name
echo hello arg0
echo please enter the path that you want ... 
echo the file has been succefully decrypted in arg1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:46:56.737

把它放在一个 .cmd 文件中：

```
@echo off &setlocal &cls
echo.hello
set /p "name=please enter your name: "
echo.how are u %name%
set /p "fpath=please enter the path that you want ... : "
echo.the file has been succefully decrypted in %fpath%
endlocal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:08:55.013

试试这个：

```
set /p name=enter your name:
echo how are you %name% ? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:07:47.843

我认为不可能从键盘接收输入并将其用作批处理文件中的变量。

为什么不试试 C++ 控制台应用程序？

# perl - 算法的迭代

> ID：15438141
> 
> 赞同：0
> 
> 时间：2013-03-15T17:02:51.380
> 
> 标签：perl, iteration

我编写了一个程序，从 2 列文件中加载数据，进行算法计算，然后在文件中写入具有该系数的一对元素，并将它们放入一个名为`@blackPair`. 我想迭代 N 次算法从文件中获取数据，而不是那些在`@blackPair`数组中的数据。

我想到了这样的事情：

```
#!/usr/bin/perl
use strict;
use warnings;
use feature 'say';

my $iter;
my $startNode;
my $endNode;
my %k;
my %end;
my %node;
my %edge;
my @blackPair=();
my $counts=0;
my $inputfile = "file3";
################# DATA ABSORTION

open(DAT,$inputfile) || die("Could not open file!");
while(<DAT>)
{
    my ($entry) = $_;
    chomp($entry);
    my ($startNode, $endNode) = split(/ /,$entry);
    $k{$endNode}++;
    $k{$startNode}++;
    $edge{$startNode}{$endNode}=1;
    $edge{$endNode}{$startNode}=1;
}
################# ALGORITHM
my $minCentrality=2;
foreach my $i (keys %edge) {
    foreach my $j (keys %{$edge{$i}}){
    my @couple =($j,$i);
    if($i<$j){
         if (($k{$i}-1) !=0 && ($k{$j}-1) !=0){
        my $triangleCount=0;
        @couple=($i,$j) if ($k{$i}<$k{$j});
        foreach (keys %{$edge{$couple[0]}}){
            $triangleCount++ if exists $edge{$couple[1]}{$_};
        }
        my $centrality=($triangleCount+1)/($k{$couple[0]}-1);
        if ($centrality<$minCentrality){
            $minCentrality=$centrality;
            @blackPair=@couple;
          } 
        }
      }
    }
}
foreach (@blackPair){
say; 
}
Close(DAT); 
```

该文件如下：

```
1 2
1 3
1 4  
1 5
1 6
1 9
2 3
4 5
5 9
6 7
6 8
6 16
7 8
9 10
9 11
10 11
10 12
10 14
11 12
11 13
12 13
12 14
14 15
16 17
16 18
17 18
17 19
18 19
18 20
19 20 
```

出现在的第一对`@blackPair`是 6 和 1。找到它们后，我希望程序重新开始搜索，但避免将第 1 和第 6 对充电到数组中。这样做第二对将是 6 和 16。我想重复这个过程 N 次（例如 N = 4）。我想`while(<DAT>)`在“DATA ABSORTION”之前放另一个`while(counts<=4){`和`while(<DAT>)`一个`if(<DATA> != @blackPair){`. 有我想的

```
 while(counts <= 4) { 

 while(<DAT>)
 {
 if(<DAT> != @blackPair){
       my ($entry) = $_;
       chomp($entry);
       .....
 }
     #### ALGORITHM
 counts++;
 } 
```

但它不起作用。有什么帮助吗？

4次迭代后，`@blackPair`应该有以下对：

```
 6 1
 16 6
 9 1
 9 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:24:58.557

`<DAT> != @blackPair`绝对不是你想要的。

*   `!=`用于数值比较。您想要进行字符串比较（`ne`运算符）或者可能使用智能匹配运算符来检查列表成员资格（`~~ \@blackPair`）
*   但是使用正确的运算符不会真正帮助您，因为`@blackPair`已经破坏了输入数据（`@blackPair`可能包含元素`(6,1)`，对应于原始输入行`"1 6\n"`）

相反，如何在每次迭代中更新您的图表？

```
for my $count (1..4) {
    my $minCentrality = 2;
    ...

    say join " ", @blackPair;
    # now update the graph
    delete $edge{$blackPair[0]}{$blackPair[1]};
    delete $edge{$blackPair[1]}{$blackPair[0]};
    $k{$blackPair[0]}--;
    $k{$blackPair[1]}--;
} # next iteration 
```

# regex - 正则表达式：如何捕获后面跟着“+”（贪婪加号）的组？

> ID：15438142
> 
> 赞同：0
> 
> 时间：2013-03-15T17:02:55.750
> 
> 标签：regex

只是说我有以下文本要由正则表达式处理：

```
 red red red blue 
```

为了匹配文本，我使用以下正则表达式：

```
 (red\s*)+(blue) 
```

现在，我的问题是如何捕获第一**组**（不是第一**组**）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:04:59.677

只需在要捕获的内容周围添加括号，在本例中为整个`+`ed 组：

```
((red\s*)+)(blue) 
```

# javascript - 是否可以在 Javascript 中附加一个 sqlite 数据库？

> ID：15438149
> 
> 赞同：0
> 
> 时间：2013-03-15T17:03:14.490
> 
> 标签：javascript, html, sqlite, web-sql

有可能做这样的事情吗？

```
mDB = openDatabase("mainDB","1.0","Main Database",5 * 1024 * 1024);
sDB = openDatabase("subDB","1.0","Sub Database",5 * 1024 * 1024);

mDB.transaction(function(tx){
    tx.executeSql("ATTACH DATABASE subDB as sub", []);
}); 
```

但是，此代码不起作用。在 SQL 语句中，根据规范，subDB 这个词实际上应该是一个文件引用。这在 sqlite3 CLI 中运行良好，但在 Javascript 代码中应该是什么？使用 openDatabase 命令中指定的 shortName 似乎很自然，但显然这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:32:47.923

WebSQL 不授予对数据库文件名的访问权限，因此这是不可能的。

# knockout.js - KnockoutJS foreach 循环限制到第一个数组

> ID：15438150
> 
> 赞同：1
> 
> 时间：2013-03-15T17:03:21.937
> 
> 标签：knockout.js, foreach

我正在使用 KnockoutJS 来呈现 JSON。某些结果有超过 1 个“应用程序”。是否可以在 foreach 中使其始终只返回 1 ？无论哪个先来。

在下面的示例中，TEST1 在 Applications 下有 2 个结果。我只想在渲染中显示一个。

**HTML**

```
<table>
<thead>
<tr>
<th>AppId</th>
<th>Name</th>
<th>App Token</th>

</tr>
</thead>
<tbody data-bind="foreach: { data: APPS, as: 'APP' }">
  <tr data-bind="foreach:  Applications">
    <td><span data-bind="text: appId"></span></td>
    <td><span data-bind="text: $parent.name"></span></td>
    <td><span data-bind="text: AppToken"></span>
  </tr>
</tbody>
</table> 
```

**JSON**

```
{
   "APPS":{
      "bad":{
         "Name":"TEST1",
         "Applications":[
            {
               "AppId":"bab",
               "AppToken":null
            },
            {
               "AppId":"bab",
               "AppToken":null
            }
         ]
      },
      "good":{
         "Name":"TEST2",
         "Applications":[
            {
               "AppId":"bab",
               "AppToken":null
            }
         ]
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:29:37.043

APPS 不是一个数组，所以你不能循环遍历它。应用程序是，您可以循环通过它。但是由于您希望它成为第一项，因此只需对 APPS 和应用程序使用 With 绑定即可。

此外，更正 HTML 中绑定的大小写。另一件事，Applications 数组不属于“Apps”的“好”或“坏”属性，因此您必须对其进行限定。

这是相同的小提琴。

[http://jsfiddle.net/sujesharukil/tyJwX/1](http://jsfiddle.net/sujesharukil/tyJwX/1)

```
<tbody data-bind="with: APPS.bad">
    <tr data-bind="with:  Applications[0]">
        <td><span data-bind="text: AppId"></span></td>
        <td><span data-bind="text: $parent.Name"></span></td>
        <td><span data-bind="text: AppToken"></span></td>
  </tr>
</tbody> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:38:35.687

好的，我用过：

```
<!-- ko if: $index() === 0 --> 
```

Got answer from here. [knockout.js using $index with if binding](https://stackoverflow.com/questions/11318441/knockout-js-using-index-with-if-binding)

# java - Thrift TServer 服务不返回主线程

> ID：15438155
> 
> 赞同：0
> 
> 时间：2013-03-15T17:03:37.197
> 
> 标签：java, thrift

以下是我实现`thrift`服务器的方式，但在调用后它不会返回到 main therad `serve()`。

```
public class ThriftServerRunner implements Runnable {
    private int thriftServerPort;
    public ThriftServerRunner(int thriftServerPort, LogWriter logWriter) {
        this.thriftServerPort = thriftServerPort;   
    }
    @Override
    public void run() {
        try {
            SetupThriftServer();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }               
    }

    private void SetupThriftServer() throws Exception {
    try {
            TServerSocket serverTransport = new TServerSocket(this.thriftServerPort);
            ThriftService.Processor<ThriftService.Iface> processor = new ThriftService.Processor(new ThriftServiceImpl());
            TServer server = new TThreadPoolServer(new TThreadPoolServer.Args(serverTransport).processor(processor));
        server.serve();      
    } catch (TTransportException e) {
            e.printStackTrace();
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:07:23.047

您确实调用`start()`启动线程（这将创建一个新线程，然后`run()`从这个新线程调用对象函数），而不是`run()`（它将仅从`run()`您当前所在的同一线程运行），对吗？

`serve()`不打算返回，除非您停止服务器（从另一个线程）。

# python - 霍夫过滤后没有结果

> ID：15438156
> 
> 赞同：1
> 
> 时间：2013-03-15T17:03:39.010
> 
> 标签：python, opencv, hough-transform

在程序中，我使用了一个像这样的精明过滤器：

```
circles = cv2.HoughCircles(cannyresult,cv2.cv.CV_HOUGH_GRADIENT,1,10)
    if circles is None:
        print'no ' 
```

然后终端打印`no`，表示没有返回结果，`cannyresult`是一张有很多圆圈的图片。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:27:02.493

从[文档](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html#cv2.HoughCircles)中，用法是：

> ```
>  Python: cv2.HoughCircles(image, method, dp, minDist[, circles[,
>     param1[, param2[, minRadius[, maxRadius]]]]]) → circles 
> ```

在哪里

> ```
>  circles – Output vector of found circles. Each vector is encoded as a
>  3-element floating-point vector (x, y, radius) 
> ```

示例用法：

```
#include <cv.h>
#include <highgui.h>
#include <math.h>

using namespace cv;

int main(int argc, char** argv)
{
    Mat img, gray;
    if( argc != 2 && !(img=imread(argv[1], 1)).data)
        return -1;
    cvtColor(img, gray, CV_BGR2GRAY);
    // smooth it, otherwise a lot of false circles may be detected
    GaussianBlur( gray, gray, Size(9, 9), 2, 2 );
    vector<Vec3f> circles;
    HoughCircles(gray, circles, CV_HOUGH_GRADIENT,
                 2, gray->rows/4, 200, 100 );
    for( size_t i = 0; i < circles.size(); i++ )
    {
         Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));
         int radius = cvRound(circles[i][2]);
         // draw the circle center
         circle( img, center, 3, Scalar(0,255,0), -1, 8, 0 );
         // draw the circle outline
         circle( img, center, radius, Scalar(0,0,255), 3, 8, 0 );
    }
    namedWindow( "circles", 1 );
    imshow( "circles", img );
    return 0;
} 
```

需要注意的重要一点是，而不是：

```
circles = HoughCircles(gray, CV_HOUGH_GRADIENT... 
```

你需要给它一个向量：

```
 vector<Vec3f> circles;

    HoughCircles(gray, circles, CV_HOUGH_GRADIENT,
                 2, gray->rows/4, 200, 100 ); 
```

这更像是一种 C 风格的编程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:28:43.003

**[这都是关于参数的](https://stackoverflow.com/a/6500949/176769)**，它总是如此。HoughCircles 中使用的参数起着[基本的作用](https://stackoverflow.com/a/10985330/176769)。

我希望我能为您提供更多帮助，但是没有输入图像可以用我的双手被束缚。我与您分享的最后一个参考资料提供了指向其他答案的链接，其中包含实际源代码，展示了调整函数参数直到它们为您工作的重要性。

# android - Android：对话框和 AsyncTask - 为什么我会收到 IllegalArgumentException？

> ID：15438159
> 
> 赞同：1
> 
> 时间：2013-03-15T17:03:44.067
> 
> 标签：android, android-asynctask

我有一个这样的活动：

```
public class StudentActivity extends Activity {
static final int DIALOG_PROGRESS = 0;

public void btnSyncStudentsClick(View view) {
    syncStudents();
}

@Override
protected Dialog onCreateDialog(int id) {
    Dialog d = null;
    switch (id) {
    case DIALOG_PROGRESS:
        ProgressDialog dialog = new ProgressDialog(this);
        dialog.setMessage(getText(R.string.txt_refreshing_students));
        d = dialog;
        break;

    return d;
}

private class RefreshStudentTask extends
        AsyncTask<Void, Integer, AccountRefreshResult> {

    @Override
    protected void onPreExecute() {
        showDialog(DIALOG_PROGRESS);
    }

    @Override
    protected AccountRefreshResult doInBackground(Void... params) {
        //some network requests
    }

    @Override
    protected void onPostExecute(AccountRefreshResult result) {
        dismissDialog(DIALOG_PROGRESS);             //this throws an exception

        //some other stuff
    }
}   
} 
```

由于对话框在 onPreExecute() 中显示并在 onPostExecute() 中关闭，我不知道为什么有些用户会出现异常：

```
Uncaught exception handled :/ , thread: Thread[main,5,main]
java.lang.IllegalArgumentException: no dialog with id 0 was ever shown via Activity#showDialog
    at android.app.Activity.missingDialog(Activity.java:2606)
    at android.app.Activity.dismissDialog(Activity.java:2591)
    at pl.mobireg.eparent.activities.StudentActivity$RefreshStudentTask.onPostExecute(StudentActivity.java:390)
    at pl.mobireg.eparent.activities.StudentActivity$RefreshStudentTask.onPostExecute(StudentActivity.java:364)
    at android.os.AsyncTask.finish(AsyncTask.java:417)
    at android.os.AsyncTask.access$300(AsyncTask.java:127)
    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3691)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
    at dalvik.system.NativeStart.main(Native Method) 
```

我无法在我这边复制这个问题，所以很难调试。

编辑：活动应该只在纵向模式下运行：

```
android:screenOrientation="portrait" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:09:24.813

您的对话框已关闭。这是一个比较常见的竞争条件。只需捕获异常并继续前进，结果都是一样的——对话框消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:11:22.753

您可以通过执行任何启动对话框然后更改方向来复制此操作，因为活动将在没有对话框的情况下重新创建。这是处理对话的众多烦恼之一，因此，Google 建议您改用[`DialogFragment`](http://developer.android.com/reference/android/app/DialogFragment.html)它，因为它为您管理了很多这些边缘情况。

# python - 在 Windows 上使用 Git 访问 Mercurial 存储库

> ID：15438165
> 
> 赞同：3
> 
> 时间：2013-03-15T17:03:55.327
> 
> 标签：python, windows, git, mercurial, msysgit

由于版本 1.8.1 git 包括 Felipes [git-remote-hg](http://felipec.wordpress.com/2012/11/13/git-remote-hg-bzr-2/)。[不幸的是，使用TortoiseGit 1.8.1](http://code.google.com/p/tortoisegit/wiki/Download)和[Git for Windows 1.8.1.2](http://code.google.com/p/msysgit/downloads/detail?name=Git-1.8.1.2-preview20130201.exe&can=2&q=full+installer+official+git)从 Hg 存储库中获取/克隆以以下错误结束：

**致命的：git 是在不支持 git-core\git-remote-hg (NO_PYTHON=YesPlease) 的情况下构建的。**

如何在我的 Git 中获得 python 支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:22:52.940

正如前面的答案中提到的，Windows 的基于 msys 的 git 解决方案都没有 python 支持。最终他们可能有时间添加它，但谁知道什么时候会发生。

同时， git-remote-hg*确实*可以与 Cygwin 的 git 一起使用。这是我为尝试它所做的：

1.  下载最新的[Cygwin setup.exe](http://cygwin.com/setup.exe)

2.  运行 setup.exe 并安装最新的 git、mercurial 和 openssl 包（除了它想要安装的任何包）。我把我的安装在`c:\cygwin`.

3.  下载[`git-remote-hg`](https://raw.github.com/git/git/v1.8.4.3/contrib/remote-helpers/git-remote-hg)并放入`c:\cygwin\bin`。（可能有一个更合适的地方来放置这个文件，但我没有费心去弄清楚它可能在哪里。）

4.  我添加`c:\cygwin\bin`到我的 PATH 中，这样我就可以在 Windows 命令提示符下使用 git 命令。

    值得注意的是，如果您使用 TortoiseHg 或其他一些 mercurial 或 python，则放入`c:\cygwin\bin`您的路径可能会导致这些程序行为异常。一个更强大的解决方案是制作一个`.cmd`修改 PATH 以包含 Cygwin 的 bin 目录的文件，或者只使用 Cygwin 的 bash shell。

5.  找一些 hg repo 来克隆。（我创建了一个`c:\hg\test`并使用了`hg serve`）。

6.  用 git 克隆：

    `git clone hg::http://localhost:8000/`

# c - C - 与 GSL 的（数学）集成导致分段错误

> ID：15438166
> 
> 赞同：1
> 
> 时间：2013-03-15T17:03:55.703
> 
> 标签：c, math, mex, gsl

所以我正在尝试在 C 中对选项模型进行集成。该函数从 Matlab 调用并编译为 mex 文件。函数 hestonIntegrand1 在 gsl_integration_qaigu 外部调用时确实返回一个值，因此该错误必须在此集成函数内部发生。有什么想法有什么问题吗？这只是一个数学问题吗？

```
#include "mex.h"
#include "math.h"
#include "complex.h"
#include <gsl/gsl_integration.h>

#define MAX_WORKSPACE_SIZE 1000

struct hestonIntegrandParams 
{
    double _Complex K;
    //double X;
    double St;
    double tau;
    double theta;
    double kappa;
    double sigmaV;
    double sigma;
    double rho;
    double gamma;
    double r;
};

double hestonIntegrand1 (double _Complex phi, void * p) {

    /*
     double _Complex im = 0.0f + 1.0f * _Complex_I ;
     double _Complex re = 1.0f + 0.0f * _Complex_I ;
     */

    struct hestonIntegrandParams * params = (struct hestonIntegrandParams *)p;

    double _Complex K = (params->K);
    //double X = (params->X);
    double St = (params->St);
    double tau = (params->tau);
    double theta = (params->theta);
    double kappa = (params->kappa);
    double sigmaV = (params->sigmaV);
    double sigma = (params->sigma);
    double rho = (params->rho);
    double gamma = (params->gamma);
    double r = (params->r);

    double x = log (St);

    double u1 = 0.5f;

    //double b1 = kappa+lambda-rho*sigma;

    // under EMQ lambda falls out
    double b1 = kappa-rho*sigma;

    double _Complex i = 0.0f + 1.0f * _Complex_I;

    double _Complex d1 = sqrt(pow((rho*sigma*phi*i-b1),2) - (sigma*sigma)*(2*u1*phi*i-phi*phi) );

    double _Complex g1 = (b1-rho*sigma*phi*i+d1) / (b1-rho*sigma*phi*i-d1);

    double _Complex D1 = (b1-rho*sigma*phi*i+d1)/(sigma*sigma) * ((1.0f-exp(d1*tau))/(1.0f-g1*exp(d1*tau)));

    double _Complex C1 = r*phi*i*tau + (kappa*theta/(sigma*sigma))* (
                                                                     (b1-rho*sigma*phi*i+d1)*theta -
                                                                     2 - log( (1- g1*exp(d1*theta) ) / (1-g1) )
                                                                     );

    double _Complex f1 = exp(C1 + D1*sigmaV + i*phi*x);

    double _Complex Re = 1.0f + 0.0f * _Complex_I;

    double _Complex integrand = Re*(exp(-i*phi*log(K))*f1)/(i*phi);

    // returning just the real part
    return (creal(integrand));

}

// -callHestoncf(u, X, v, r, q, v0, vT, rho, k, sigma, implVol )
double hestonCallOption ( double St, double K,
                         double tau, double r, double theta, double kappa, double sigma, double sigmaV,
                         double rho, double gamma) {

    gsl_integration_workspace *work_ptr =
    gsl_integration_workspace_alloc (MAX_WORKSPACE_SIZE);
    gsl_integration_workspace *work_ptr2 =
    gsl_integration_workspace_alloc (MAX_WORKSPACE_SIZE);

    double lower_limit = 0.0f;  /* start integral from 1 (to infinity) */
    double abs_error = 1.0e-8;  /* to avoid round-off problems */
    double rel_error = 1.0e-8;  /* the result will usually be much better */
    /* the result from the integration
     and  the estimated errors from the integration
     */
    double result1, result2, error1, error2;

    double alpha = 2.0;
    double expected = -0.16442310483055015762;  /* known answer */

    gsl_function F1;
    gsl_function F2;

    struct hestonIntegrandParams params = {
        K, St, tau, theta, kappa, sigmaV, sigma, rho, gamma, r
    };

    F1.function = &hestonIntegrand1;
    F1.params = &params;
    F2.function = &hestonIntegrand2;
    F2.params = &params;

    mexWarnMsgTxt("YOLO");

    gsl_integration_qagiu (&F1, lower_limit,
                           abs_error, rel_error, MAX_WORKSPACE_SIZE, work_ptr, &result1,
                           &error1);

    gsl_integration_qagiu (&F2, lower_limit,
                           abs_error, rel_error, MAX_WORKSPACE_SIZE, work_ptr2, &result2,
                           &error2);

    mexWarnMsgTxt("YOLO2");

    gsl_integration_workspace_free (work_ptr);
    gsl_integration_workspace_free (work_ptr2);
    // df = discount factor
    double df = exp(-r*tau);

    //StP1 ? KP(t, T)P2
    double price = St*result1-K*df*result2;
    //double price = hestonIntegrand1(1, &params);
    //double price = 2.0f;
    return price;
}

/* the gateway function */
void mexFunction( int nlhs, mxArray *plhs[],
                 int nrhs, const mxArray *prhs[])
{
    double *y,*z;
    double  x;
    mwSize mrows,ncols;

    /*  check for proper number of arguments */
    /* NOTE: You do not need an else statement when using mexErrMsgTxt
     within an if statement, because it will never get to the else
     statement if mexErrMsgTxt is executed. (mexErrMsgTxt breaks you out of
     the MEX-file) */
    char buf[256];
    snprintf(buf, sizeof buf, "11 inputs required, but only %i provided", nrhs);

    if(nrhs!=1)
        mexErrMsgTxt(buf);
    if(nlhs!=1)
        mexErrMsgTxt("1 output required.");

    /* check to make sure the first input argument is a scalar */
    /*
     if( !mxIsDouble(prhs[0]) || mxIsComplex(prhs[0]) ||
     mxGetN(prhs[0])*mxGetM(prhs[0])!=1 ) {
     mexErrMsgTxt("Input x must be a scalar.");
     }
     */

    /*  set the output pointer to the output matrix */
    plhs[0] = mxCreateDoubleMatrix(mrows,ncols, mxREAL);

    /*  create a C pointer to a copy of the output matrix */
    //z = mxGetPr(plhs[0]);

    mxArray *xData;
    double *xValues, *outArray;

    //Copy input pointer x
    xData = prhs[0];
    xValues = mxGetPr(xData);

    double price = hestonCallOption ( xValues[0] , xValues[1], xValues[2] ,
                                     xValues[3], xValues[4], xValues[5], xValues[6], xValues[7],
                                     xValues[8], xValues[9] );    

    //Allocate memory and assign output pointer
    plhs[0] = mxCreateDoubleMatrix(1, 1, mxREAL); //mxReal is our data-type
    outArray = mxGetPr(plhs[0]);
    outArray[0] = price;
    /*  call the C subroutine */
    //xtimesy(x,y,z,mrows,ncols);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:01:48.607

您`hestonIntegrand1`（我相信`hestonIntegrand2`）函数将复数作为第一个参数，但`gsl_function`只允许使用`double`. 如果您启用了最高警告级别，您应该会看到不兼容的指针分配。

您可以通过为复杂函数的每个组件创建单独的函数并集成两次来解决此限制，一次用于实部，一次用于虚部。将结果组合在一起应该会给您带来复杂的结果。

# sql - SQL Join 超过 3 个表

> ID：15438171
> 
> 赞同：0
> 
> 时间：2013-03-15T17:04:10.017
> 
> 标签：sql

我正在尝试从基于另一个表的两个表中提取数据。

所以..我有这些表：

```
 **tblCategory**
 CategoryID, CategoryName

 **tblProdCat**
 prodCatID, productID, categoryID

 **tblProducts**
 productID, description, price 
```

我需要加入表格并从 tblProdCat 和 tblProducts 中找到信息，而我只能使用 CategoryName。

```
 SELECT tblProducts.name, 
                       tblProducts.description, 
                       tblProducts.price, 
                       tblProducts.qtyInStock, 
                       tblProducts.image,
                       tblProducts.colour,
                       tblProducts.size,
                       tblProducts.style,
                       tblProdCat.prodCatID   
                  FROM
                        tblProducts, tblProdCat,tblCategory 
                  WHERE tblCategory.categoryName='Pens' 
                  AND   tblProdCat.categoryID = tblProducts.categoryID 
```

我已经尝试了上述方法，还尝试了其他连接，但将我的头发拉了出来。我读过教程，只是不明白连接是如何工作的。有人可以帮忙吗？请..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:06:45.020

您将需要使用以下`JOIN`语法：

```
SELECT p.name, 
  p.description, 
  p.price, 
  p.qtyInStock, 
  p.image,
  p.colour,
  p.size,
  p.style,
  pc.prodCatID,
  c.CategoryName
FROM tblProducts p
INNER JOIN tblProdCat pc 
  ON p.productID = pc.productID
INNER JOIN tblCategory c
  ON pc.categoryID = c.categoryID
WHERE c.categoryName='Pens' 
```

我`INNER JOIN`在每个表之间使用了一个，它将返回每个表之间匹配的所有行。

如果您在学习`JOIN`语法方面需要帮助，这里有一个很好[的 Joins 可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

现在，如果你想返回所有`Products`它是否有一个类别，那么你可以使用 a `LEFT JOIN`：

```
SELECT p.name, 
  p.description, 
  p.price, 
  p.qtyInStock, 
  p.image,
  p.colour,
  p.size,
  p.style,
  pc.prodCatID,
  c.CategoryName
FROM tblProducts p
LEFT JOIN tblProdCat pc 
  ON p.productID = pc.productID
LEFT JOIN tblCategory c
  ON pc.categoryID = c.categoryID
  AND c.categoryName='Pens' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:13:37.427

这是内连接的正确语法，它将只保留具有匹配行类别 ID 的记录。

```
 SELECT tblProducts.name, 
    tblProducts.description, 
    tblProducts.price, 
    tblProducts.qtyInStock, 
    tblProducts.image,
    tblProducts.colour,
    tblProducts.size,
    tblProducts.style,
    tblProdCat.prodCatID 

  FROM tblProducts
  INNER JOIN tblProdCat ON tblProdCat.productId= tblProducts.productId
  INNER JOIN tblCategory ON tblCategory ON tblCategory.categoryId = tblProdCat.categoryId
  WHERE tblCategory.categoryName='Pens' 
```

如果某些类别 ID 可能丢失并且您想要这些行，那么谨慎的做法是进行 LEFT JOIN：

```
 SELECT tblProducts.name, 
    tblProducts.description, 
    tblProducts.price, 
    tblProducts.qtyInStock, 
    tblProducts.image,
    tblProducts.colour,
    tblProducts.size,
    tblProducts.style,
    tblProdCat.prodCatID 

  FROM tblProducts
  LEFT JOIN tblProdCat ON tblProdCat.productId= tblProducts.productId
  LEFT JOIN tblCategory ON tblCategory ON tblCategory.categoryId = tblProdCat.categoryId
  WHERE tblCategory.categoryName='Pens' 
```

这将返回来自 tblProducts 的所有记录，而不管其他两个表中是否存在相应的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:17:24.027

```
You missed to add one more condition.    
 SELECT tblProducts.name, 
                           tblProducts.description, 
                           tblProducts.price, 
                           tblProducts.qtyInStock, 
                           tblProducts.image,
                           tblProducts.colour,
                           tblProducts.size,
                           tblProducts.style,
                           tblProdCat.prodCatID   
                      FROM
                           tblProducts, tblProdCat,tblCategory 
                      WHERE 
                            tblCategory.categoryName='Pens' 
                      **AND   tblProdCat.categoryID = tblCategory.categoryID
                      AND   tblProducts.productID = tblProdCat.productID** 
```

# php - 我无法让上一篇/下一篇文章链接在 wordpress 网站上工作

> ID：15438177
> 
> 赞同：0
> 
> 时间：2013-03-15T17:04:32.450
> 
> 标签：php, html, wordpress, hyperlink

我正在构建一个 wordpress 网站并在子页面上创建了一个博客页面。一切都很好，除了我无法让上一个/下一个帖子工作。

我对 PHP 很陌生，所以可能离这里很远，但已经让其他一切工作了，只是无法弄清楚。

谢谢你的帮助！

这是PHP：

```
get_header(); ?>
<div id="background">
<div id="content">
        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
    <div id="blogheader">
        <div id="logo"><img src="http://lynchbryan.com/clients/wp-content/themes/journalist/images/Wordmark-LBC_onwhite.s.png"></div>
    </div>
    <div class="main">
        <?php the_content(); ?>
    </div>

    <?php endwhile; ?>

    <?php endif; ?>

    <?php
    $catquery = new WP_Query( 'cat=4&posts_per_page=1' );
    while($catquery->have_posts()) : $catquery->the_post();
    ?>
    <div id="blog">
        <h3><?php the_title(); ?> | <span class="date"><?php the_time('F jS Y') ?></span></h3>

        <?php the_content(); ?> 
    </div>

    <div class="navigation"><p><?php posts_nav_link(); ?></p></div>

    <?php endwhile; ?>

</div>
</div>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:08:13.297

`$paged`在上面设置你的分页变量`catquery =`

`$paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1;`

然后将其添加到您的 args 里面`new WP_Query($args)`

所以你可以像这样重写它

```
$args = array('cat' => 4, 'paged' => $paged,'posts_per_page' => 1);
$catquery = new WP_Query($args); 
```

然后像这样访问您的下一个和上一个页面：

```
'<div>'.get_next_posts_link('Older', $catquery->max_num_pages).'</div>';
'<div>'.get_previous_posts_link('Newer', $catquery->max_num_pages).'</div>'; 
```

# xml - JAXB XML 创建

> ID：15438179
> 
> 赞同：1
> 
> 时间：2013-03-15T17:04:42.010
> 
> 标签：xml, jaxb, schema, xjc

我有以下课程

```
@XmlRootElement
Class A{

    private int id;
    private String name;

    //getter and setter

} 
```

我想为此类创建架构和 xml，其中 XML 可以具有 A 类列表，但我不想创建另一个包含 A 类列表的类。是否有任何注释告诉 JAXB 生成的架构和 xml 将具有无界A 对象的列表。

任何帮助，将不胜感激！！！！！

# sql-server - 为什么 t-sql 允许我违反使用 UDP 的检查约束？

> ID：15438184
> 
> 赞同：2
> 
> 时间：2013-03-15T17:04:57.413
> 
> 标签：sql-server, tsql, check-constraints

我的数据库中的表有一个检查约束。我对检查的理解是它为表中的记录设置了一个逻辑条件，该条件必须为真。

```
USE [myDB]
GO

ALTER TABLE [dbo].[myTable]  WITH CHECK ADD  CONSTRAINT [oneProgramPerTest] CHECK  (([dbo].[howManyProgPerTest]([TestId])<(2)))
GO

ALTER TABLE [dbo].[myTable] CHECK CONSTRAINT [oneProgramPerTest]
GO 
```

但我能够对打破约束的表进行更新。更新后，此查询返回 9 条记录：

```
select COUNT (*) from myDB.dbo.myTable where myDB.[dbo].[howManyProgPerTest](testID)>1 
```

可能会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:26:16.020

出于这个原因，请注意在检查约束中使用 UDF。 [这篇博文描述了您的问题。](http://sqlblog.com/blogs/tibor_karaszi/archive/2009/12/17/be-careful-with-constraints-calling-udfs.aspx)总结一下：

> （一个UDF）会在表面上做它的工作，只要你`INSERT`进入表。但是如果你更新了一行并且只将某行的 otherColumn 设置为 0 到 1，那么检查约束将不会被检查。
> 
> **优化器足够聪明，可以理解更新不会改变我们在 CHECK 约束中引用的任何内容，那么为什么还要检查约束呢？**
> 
> 这里的最终结果是约束没有做我们希望它做的事情。**改用触发器（或其他方法）**。

（重点补充）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T23:05:31.073

如果可以，根据您的约束名称，您是否试图确保每次测试只有一个程序？如果程序和测试在同一个表中可用，则添加唯一约束。

# jquery-ui - 使用 jQuery UI Range Slider 获取特定句柄值的语法

> ID：15438188
> 
> 赞同：0
> 
> 时间：2013-03-15T17:05:05.657
> 
> 标签：jquery-ui, handle, key-value, jquery-ui-slider

使用 jQuery UI Range Slider 获取特定句柄的值的正确语法是什么？演示中给出并在下面的函数中使用的方法获取两个句柄的值`$("#selector").slider("option", "values");`

我都试过了：`("option", "values[0]")`和`("option", "ui.values[0]")`

下面的函数允许我分别显示每个句柄的值，但我还需要设置它们关联的表单元素的值，并且相同的语法似乎不适用于此。我在这里发布了这个功能的小提琴：http: [//jsfiddle.net/chayacooper/Xn9sf/](http://jsfiddle.net/chayacooper/Xn9sf/)

```
$("#priceRange").slider({
    range: true,
    min: 0,
    max: 1000,
    values: [0, 1000],
    step: 25,
    slide: function (event, ui) {
        $("#min_price").text("$" + ui.values[0]);
        $("#max_price").text("$" + ui.values[1]);
        var minPriceRange = $("#priceRange").slider("option", "values");     
        $("#min_price_range").val(minPriceRange);
        var maxPriceRange = $("#priceRange").slider("option", "values");
        $("#max_price_range").val(maxPriceRange);
    }
}); 
```

HTML

```
<div id="priceRange"></div>
<div id="min_price">$0</div>
<div id="max_price">$1000</div>
<input type=text name="min_price_range" id="min_price_range" />
<input type=text name="max_price_range" id="max_price_range" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:20:14.183

您已经在设置`#minprice`​​and`#maxprice`时使用了这些值，因此请使用相同的值来设置 的值`inputs`：

```
$("#priceRange").slider({
    range: true,
    min: 0,
    max: 1000,
    values: [0, 1000],
    step: 25,
    slide: function (event, ui) {
        $("#min_price").text("$" + ui.values[0]);
        $("#max_price").text("$" + ui.values[1]);

        $("#min_price_range").val(ui.values[0]);
        $("#max_price_range").val(ui.values[1]);
    }
}); 
```

# c# - 为什么我的公共变量返回旧数据？

> ID：15438190
> 
> 赞同：0
> 
> 时间：2013-03-15T17:05:33.673
> 
> 标签：c#, .net, string, methods, public

我有一个带有一个主窗口的简单 .net 应用程序。那里有一些单选按钮，我想在处理数据之前检查它们。我有两组 CS 文件。Form1.cs（主窗口代码）和 database.CS（实际运行 DB 查询的代码。） database.cs 需要能够从 Form1.cs 中读取一些设置。

在 form1.cs 我有这个：

```
public string GetWorld
{
    get
    {

        if (this.radioButton_Dev.Checked == true)
        {
            MessageBox.Show("Returning Dev!");
            return "Dev";
        }
        else if (this.radioButton_Prod.Checked == true)
        {
            MessageBox.Show("Returning Prod!");
            return "Prod";
        }
        else
        {
            MessageBox.Show("Returning default!");
            return "Dev";
        }
    }
} 
```

在 database.cs 我有这个：

```
 public SqlConnection GetConnectionString () {
        Form1 MainWindow;
        MainWindow = new Form1();
        if (MainWindow.GetWorld == "Dev" )
         {             
            SqlConnection Connection = new SqlConnection("Data Source = Dev .... blah blah blah...");
            return Connection;
        }
        else if (MainWindow.GetWorld == "Prod")
        {
            SqlConnection Connection = new SqlConnection("Data Source = Prod .... blah blah blah...");
            return Connection;
        }           
        else
        {
            SqlConnection Connection = new SqlConnection("Data Source = Dev .... blah blah blah...");
            return Connection;
        }   
    } 
```

我遇到的问题是，无论我检查了什么单选按钮，它总是选择顶部开发选项。

我可以采取一些解决方法（使单选按钮作为对 database.CS 的调用的一部分传递），但我不明白为什么这不能正常工作。对我来说，GetConnectionString() 方法似乎基本上是在应用程序启动时提取表单数据，而从未真正查找它。

如果在 Form1 中运行这段代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        string blah = GetWorld;
        MessageBox.Show(blah);
    } 
```

它正确更新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:09:17.217

您`Form`每次调用`GetConnectionString`方法时都在创建新方法，它不会由您选择，而是采用默认值 ( `Dev`)。

这个问题有几个解决方案，您可以将您的选择作为参数传递：

```
GetConnectionString(string world) {}
// or
GetConnectionString(MyEnum world) {} 
```

然后在你的`Form`：

```
string str = GetConnectionString(this.GetWorld); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T17:09:53.647

在这一行：

```
MainWindow = new Form1(); 
```

您正在创建一个全新的`Form1`. 这不是对您在程序中显示的窗口的引用，它的单选按钮将位于初始位置，因此它总是返回相同的值。

您有几个选择：

*   将对您的主窗口的引用传递给该`GetConnectionString()`方法。
*   `MainWindow.GetWorld`将值传递给`GetConnectionString()`方法（首选）。

# list - 水平列表到垂直列表，反之亦然 - Sublime Text 2

> ID：15438191
> 
> 赞同：13
> 
> 时间：2013-03-15T17:05:37.707
> 
> 标签：list, keyboard-shortcuts, sublimetext2, horizontallist, vertical-text

我不记得我在哪里看到或读过它，但显然有一个快捷方式可以将用逗号分隔甚至没有逗号的单词水平列表转换为垂直列表，让我可以快速构建一个带有 LI 标签的 UL垂直列表。

我只需要使用常用句子制作垂直列表的快捷方式，我有一个 Windows 8 操作系统。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-15T17:08:43.633

1.  选择要转换的文本
2.  `Command``J`Mac上的+或Windows上的`CTRL`+`J`

这里还有一些更有用的快捷方式列表 [https://docs.sublimetext.io/reference/keyboard_shortcuts_osx.html](https://docs.sublimetext.io/reference/keyboard_shortcuts_osx.html)

其他很棒的资源

[http://www.sublimetext.com/docs/2/](http://www.sublimetext.com/docs/2/)

[https://tutsplus.com/course/improve-workflow-in-sublime-text-2/](https://tutsplus.com/course/improve-workflow-in-sublime-text-2/)

[https://docs.sublimetext.io/guide/customization/key_bindings.html](https://docs.sublimetext.io/guide/customization/key_bindings.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-12T12:07:51.060

反之亦然 - 水平到垂直

假设不是最好的方法，但我使用它

适用于 A,B,C,... 等列表可能也适用于其他

1 )找到所有 {your delimiter} ( `Ctrl`++ `F` `,` `Alt`)`Enter`

`Shift`2）从分隔符（ + `<-` `->`）中删除多选

3)`Enter`

注意：即使 Alt + F3 也可以一键完成！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-14T13:21:54.650

CTRL-H（查找和替换）

查找 = "," 或您的分隔符替换为 = "\n"

确保在搜索模式块中选择了扩展单选按钮

[查找和替换值](https://i.stack.imgur.com/4bpjI.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-28T06:59:58.603

1.  选择要转换的文本
2.  ctrl+shift+j

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-01T05:55:38.143

`CTRL`++`Shift`将`J`垂直转换为水平。

`CTRL`+`J`将垂直转换为水平

# css - 某个字母点后的背景图像未显示在本地构建上？

> ID：15438194
> 
> 赞同：1
> 
> 时间：2013-03-15T17:05:50.840
> 
> 标签：css, eclipse, tomcat

这是我最近删除的一个问题的第二个版本，对问题的方向有更深入的了解。它与代码无关。

由于没有明显的触发因素（开发人员没有进行任何更改），网络应用程序中用于 CSS`background`属性的大多数图像都会自发停止显示。

检查显示两件事：浏览器可以看到 CSS 正确指向所有图像，第二，正确显示的十几个图像恰好是按字母顺序列出的前十几个资源文件。

**当我更改未显示的文件的名称以使其在按字母顺序排列之前，它开始完美显示。**

**如果我运行我邻居机器上托管的代码的相同副本，它会完美运行。**

这完全超出了我的理解范围。有任何想法吗？我什至不知道为什么会发生这种情况，它工作了几个月，直到这突然出现。标记你，是的，我已经反复清除缓存和 cookie 以及所有相关的类似内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:17:38.593

最终，通过将所有资源文件复制到不同的文件夹，从项目中删除它们，然后用副本替换它们来解决问题。某处的一些疯狂的缓存错误。这一切都发生在 Eclipse 中。

下次我尝试清理 Tomcat 服务器时，一位同事建议我尝试一下！

# entity-framework - OData 异常复杂类型“WebTools.Order”通过属性“Customer”引用实体类型“WebTools.Customer”

> ID：15438195
> 
> 赞同：4
> 
> 时间：2013-03-15T17:05:51.643
> 
> 标签：entity-framework, asp.net-web-api, odata

我开始使用 OData 和实体框架。

我创建了一个公开客户的控制器。在模型（edmx）中只有一个实体（客户）并且一切正常（正在呈现数据）。

现在，当我添加第二个实体（订单）（从数据库更新模型，选择订单）时，1 到多（1 客户到多订单）会自动设置。

我什么都不做，当我编译/运行控制器时，我得到这个错误：

```
Line 23:         builder.EntitySet(Of Customer)("Customers")
Line 24:         Return builder.GetEdmModel()  --> Exception Here
Line 25: 
Line 26:     End Function 
```

复杂类型“WebTools.Order”通过属性“Customer”引用实体类型“WebTools.Customer”。

如果我删除订单实体，它会起作用。

我不确定问题出在方程式的 OData/WebAPI 部分的“配置”还是“实体框架”上。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T18:24:58.793

我假设模型构建器无法找出实体类型 Order 的关键属性。您可以通过几种方式帮助模型构建者，

1.  `builder.EntitySet<Order>("orders");`. 这添加了一个新的实体集“订单”，并且还具有将类型“订单”标记为实体类型的效果。您还必须指定“订单”的关键属性。

2.  使用属性标记“订单”类型上的关键属性（或属性）`[Key]`。

3.  如果您讨厌属性并喜欢在代码中执行它，您可以这样做，`builder.EntitySet<Order>("orders").EntityType.HasKey(o => order.KeyProperty);`

# c# - 可重用日期时间过滤器的谓词

> ID：15438199
> 
> 赞同：1
> 
> 时间：2013-03-15T17:05:55.627
> 
> 标签：c#, date, filter, predicate

我有许多包含日期时间的对象。我发现我正在重用 lambda 语句：

```
Where(x => EntityFunctions.TruncateTime(x.Date.Value) >= EntityFunctions.TruncateTime(startDate) &&
    EntityFunctions.TruncateTime(x.Date.Value) <= EntityFunctions.TruncateTime(endDate)); 
```

在多个位置。我想用一个谓词替换这个表达式，该谓词可以在我的带有日期的对象列表中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:09:30.443

定义另一个谓词方法，它将检查是否`YourType`有正确的日期

```
private static bool IsObjectHasNeccesaryDate(YourType obj, DateTime startDate, DateTime endDate)
{
    return EntityFunctions.TruncateTime(obj.Date.Value) >= EntityFunctions.TruncateTime(startDate) 
        && EntityFunctions.TruncateTime(obj.Date.Value) <= EntityFunctions.TruncateTime(endDate);
} 
```

然后您可以使用 lambda 语法来使用它，如下所示：

```
myobjects.Where(obj => IsObjectHasNeccesaryDate(obj, startDate, endDate)); 
```

请注意，它将捕获您的`startDate`和`endDate`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:11:32.463

您可以将表达式定义为 Func：

```
Func<object,bool> exp = x => 
    EntityFunctions.TruncateTime(x.Date.Value) >= EntityFunctions.TruncateTime(startDate) 
    && EntityFunctions.TruncateTime(x.Date.Value) <= EntityFunctions.TruncateTime(endDate); 
```

用您正在使用的任何类型替换对象。然后将 Func 传递给 Where：

```
Where(exp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:16:35.403

如果`startDate`和`endDate`是类级别的变量，你可以只使用一个方法：

```
bool FilterDate(YourEntityType x)
{
    return EntityFunctions.TruncateTime(x.Date.Value) >= EntityFunctions.TruncateTime(startDate) &&
           EntityFunctions.TruncateTime(x.Date.Value) <= EntityFunctions.TruncateTime(endDate));
} 
```

这将通过以下方式调用：

```
var results = myobjects.Where(FilterDate); 
```

但是，如果它们是本地变量，则您的 lambda 将关闭两个局部变量 (`startDate`和`endDate`)，如果您重用单个委托，这可能会导致行为发生变化，除非范围始终保持不变。

一种选择可能是制作一个辅助方法：

```
static Func<YourEntityType, bool> CreateFilter(DateTime startDate, DateTime endDate)
{
     Func<YourEntityType, bool> func = x => EntityFunctions.TruncateTime(x.Date.Value) >= EntityFunctions.TruncateTime(startDate) &&
EntityFunctions.TruncateTime(x.Date.Value) <= EntityFunctions.TruncateTime(endDate));
     return func;
} 
```

然后你可以这样写：

```
var results = myobjects.Where(CreateFilter(startDate, endDate)); 
```

# c# - 从 c# 获取 DIV 高度

> ID：15438203
> 
> 赞同：1
> 
> 时间：2013-03-15T17:06:06.473
> 
> 标签：c#

是否可以在不使用 JavaScript 的情况下获得渲染 DIV 的高度？

原因是使用以下代码来获取页面的返回 html，但没有任何 JavaScript 触发：

```
Server.Execute(url, htmlStringWriter);
string htmlCodeToConvert = htmlStringWriter.GetStringBuilder().ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:09:14.743

在一般情况下，不，这是不可能的。HTML 背后的哲学一直是浏览器在呈现它时有一定的选择自由。所以不，您无法预测用户的浏览器将如何处理您的 div。

# javascript - 循环遍历 json 对象时遇到问题

> ID：15438206
> 
> 赞同：1
> 
> 时间：2013-03-15T17:06:20.270
> 
> 标签：javascript, json, underscore.js

我有如下数组

```
 var data = [
            {
                title: 'This is title',
                desc: 'This is desc',
                date: '07:12'
            },
            {
                title: 'This is title2',
                desc: 'This is desc2',
                date: '04:12'
            },
            {
                title: 'This is title3',
                desc: 'This is desc3',
                date: '09:12'
            }
        ]; 
```

现在我想遍历这些数据以使用 underscorejs 模板显示。我正在尝试以下哪个不起作用。

```
<% _.each(function () { %>
        <li>
            <span class="time"><%= date %></span>
            <p><%= title %></p>
            <p><%= desc %></p>
        </li>
    <% }); %> 
```

上面的代码没有显示任何内容，也没有在控制台中显示任何错误。如何遍历这个数组数据以显示所有数据？

**更新**

这是更多代码。我正在从主干视图传递这些数据

```
var Message = Backbone.View.extend({
    className: 'tops',

    render: function () {
        console.log(this.model.toJSON()); //<-- see output for this below
        this.$el.html(_.template(MessageTemplate, this.model.toJSON()));
        return this;
    }
}); 
```

console.log() 输出

```
Object {title: "This is title", desc: "This is desc", date: "07:12"} message.js:6
Object {title: "This is title2", desc: "This is desc2", date: "04:12"} message.js:6
Object {title: "This is title3", desc: "This is desc3", date: "09:12"} 
```

我将上面的对象传递给我的模板，然后循环显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:07:41.060

您需要指定要循环的对象：

```
<% _.each(data,function (elem) { %>
    <li>
        <span class="time"><%= elem.date %></span>
        <p><%= elem.title %></p>
        <p><%= elem.desc %></p>
    </li>
<% }); %> 
```

请参阅[下划线文档](http://underscorejs.org/#each)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:32:59.997

来自[underscorejs.org](http://underscorejs.org/#template)

> 当您评估模板函数时，传入一个数据对象，该对象具有与模板的自由变量对应的属性。如果您正在编写一次性，您可以将数据对象作为第二个参数传递给模板，以便立即呈现而不是返回模板函数。

您在模板中使用的下划线代码的工作方式与您正常写出它的方式相同。`_.each`至少需要两个参数。首先是您想要迭代的项目列表，其次是对每个项目采取的操作。

```
_.each([1, 2, 3], alert); 
```

您需要对模板执行相同的操作。

```
<% _.each(dataSet, function (item) { %>
    <li>
        <span class="time"><%= item.date %></span>
        <p><%= item.title %></p>
        <p><%= item.desc %></p>
    </li>
<% }); %>

var rendered_html = _.template(template, {dataSet: data}) 
```

请注意传入的第二个对象如何`_.template`包含`dataSet`. 我们传入的键`_.template`可以在我们的模板代码中用于引用与它们关联的值。

你可以在这里看到一个例子：http: [//jsbin.com/upugaz/1/edit](http://jsbin.com/upugaz/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:56:41.297

将数组传递给模板时，您必须为其命名：

```
this.$el.html(_.template(MessageTemplate, { 'items': this.model.toJSON() })); 
```

现在您可以在模板中引用要循环的数组：

```
<% _.each(items, function (item) { %>
    <li>
        <span class="time"><%= item.date %></span>
        <p><%= item.title %></p>
        <p><%= item.desc %></p>
    </li>
<% }); %> 
```

# javascript - 新的浏览器会以不同的方式优化循环吗？

> ID：15438213
> 
> 赞同：13
> 
> 时间：2013-03-15T17:07:18.837
> 
> 标签：javascript, performance

我正在阅读 Nicholas Zackas 的[高性能 Javascript](https://rads.stackoverflow.com/amzn/click/com/059680279X)，他在其中讨论了通过反转 for 循环并最小化其属性查找来优化它。

代替：

```
for (var i = 0; i < items.length; i++ ) {
  processItems(items[i]);
} 
```

你得到：

```
for (var i = items.length; i--; ) {
  processItems(items[i]);
} 
```

在撰写本文时，执行时间“*比原来快了 50%-60%* ”。然而，我创建了一个[**jsperf**](http://jsperf.com/minimizing-for-loops)，在 Firefox 和 Chrome 中，我注意到*优化*的 for 循环实际上明显变慢，尤其是在 Firefox 中。

![在此处输入图像描述](../Images/c7dd127ee6ffe4bb2c868cfb4ac487df.png)

**较新的浏览器是否以不同的方式优化循环？**现在编写 for 循环的最有效方法是否只是基本方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:03:54.957

也许您也可以包含测试用例，而不是强制浏览器将答案转换为布尔值？

```
var i, arr = [...];
for (i = arr.length; i > 0; i -= 1) { arr[i-1] = 1; } 
```

首先，您的循环将 0 强制转换为结束条件，其次，`arr[i]`其中`i = arr.length`未定义，这意味着由于隐式类型，Chrome 将在 Chrome 的引擎盖下取消优化循环以访问该数组。

所以现在，就 Chrome 而言，Zakas 的用例中发生了两个大的反优化。

JavaScript 引擎在过去 3 年中确实取得了长足的进步，就他们如何优化幕后事物而言。现在，不再是编写代码来欺骗引擎进行更好的优化（这现在可能与现代浏览器的 JS 编译器中内置的实际优化智能相悖），而更多的是编写常规意义上的优化代码——知道使用哪些数据类型，何时使用等等。

我想你会发现，如果你再次尝试测试，改变我在上面的代码示例中推荐的那两件事，虽然数字可能不完全匹配，但它们会更接近前瞻表现。

# android - 安卓后台问题

> ID：15438216
> 
> 赞同：0
> 
> 时间：2013-03-15T17:07:21.593
> 
> 标签：android

我的背景有问题。根据我的清单设置，当我调出这样的软键盘时，背景会被压扁：

![在此处输入图像描述](../Images/a7aea7e383e2d7048796743a82fa85a8.png)

否则我会通过将图形推离屏幕来得到这个： ![在此处输入图像描述](../Images/df3723431c346e76007ca53b29a7a48a.png)

如果我点击黑色区域，图形会下降，但现在 EditText 被按下如下： ![在此处输入图像描述](../Images/35ee4a73f789ece12f6c11ce121af98b.png)

我该如何解决？顶部应该总是看起来像最后一张图片，但我应该总是看到编辑文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:12:23.877

把它放在`onCreate`你的活动方法中。这是一个快速修复。

`getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);`

你也应该检查一下。

`android:windowSoftInputMode`这基本上处理了很多关于android中软键盘的问题。

- -编辑 - -

[软键盘](http://android-developers.blogspot.in/2009/04/updating-applications-for-on-screen.html)这东西对你很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:15:08.580

取决于您的布局中是否有空间来缩小内容。键盘以两种模式之一出现，在您的活动的 android:winowSoftInputMode 中设置。

*   Pan- 移动应用程序以确保焦点编辑文本保留在屏幕上（或至少光标区域保留）。
*   调整大小 - 调整应用程序大小以适合屏幕。这意味着如果可能的话，事情会被破坏。当然，唯一可以缩小的是高度为 fill_parent 的项目。如果它无法调整应用程序的大小并使其正常工作，则会将内容移出屏幕

**它会做这两件事中的一件。在我看来，您的 UI 中有太多内容无法调整大小，除了挤压顶部。在这种情况下，您将滚动。问题是当用户点击黑色区域时，该区域会变得聚焦。因此，Android 平移以使该区域出现在屏幕上。它甚至不会尝试确保其下方的内容保持在屏幕上。**

换句话说，你无能为力。

# powershell - 输出文件问题（空管道元素）

> ID：15438221
> 
> 赞同：3
> 
> 时间：2013-03-15T17:07:31.700
> 
> 标签：powershell

我有我想要的输出，但我的问题是把它放到一个输出文件中。我不在乎叫什么 cmdlet，我只需要它能够附加到 CSV。

这是我当前的解决方案，它提供了正确的输出（只是不写入文件）：

```
Param(
    [string]$clusterName
    )

Import-Module failoverclusters

get-cluster -name $clusterName | get-clusterresource | where-object {
    $_.ResourceType.name -eq "SQL Server"
        } |
        %{
            $virtualServerName = get-clusterparameter -InputObject $_ VirtualServerName; 
            $instanceName = get-clusterparameter -InputObject $_ InstanceName; 
            $nodeName = $_.OwnerNode;
            $IPAddress = [System.Net.Dns]::GetHostAddresses($virtualServerName.Value) | where-object {$_.IsIPv6LinkLocal -eq $False}
            echo ("{0},{1}\{2},{3},{4},{5},{6}" -f $nodeName,$virtualServerName.Value, $instanceName.Value,$virtualServerName.Value,$instanceName.Value,$IPAddress,$clusterName);
        } 
```

我已将其添加到结尾，这会返回错误：

```
| out-file -filepath "D:\Path\To\File\ClusterInstances.txt" -Encoding ASCII -append 
```

返回：不允许有空的管道元素。

如何将其输出到 CSV 文件并追加？它将运行多次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:39:42.067

您是添加与`| out-file`最后一个“}”在同一行还是在单独的行上的行？如果你有一个“|” 作为新行上的第一个非空白字符，您需要转义前面的换行符，否则会出现“空管道元素”错误。

您的代码*应*如下所示（注意倒数第二行“}”后的反引号）：

```
Param(
    [string]$clusterName
    )

Import-Module failoverclusters

get-cluster -name $clusterName | get-clusterresource | where-object {
    $_.ResourceType.name -eq "SQL Server"
        } |
        %{
            $virtualServerName = get-clusterparameter -InputObject $_ VirtualServerName; 
            $instanceName = get-clusterparameter -InputObject $_ InstanceName; 
            $nodeName = $_.OwnerNode;
            $IPAddress = [System.Net.Dns]::GetHostAddresses($virtualServerName.Value) | where-object {$_.IsIPv6LinkLocal -eq $False}
            echo ("{0},{1}\{2},{3},{4},{5},{6}" -f $nodeName,$virtualServerName.Value, $instanceName.Value,$virtualServerName.Value,$instanceName.Value,$IPAddress,$clusterName);
        } `
        | out-file -filepath "D:\Path\To\File\ClusterInstances.txt" -Encoding ASCII -append 
```

或者这个，虽然我认为上面更优雅：

```
Param(
    [string]$clusterName
    )

Import-Module failoverclusters

get-cluster -name $clusterName | get-clusterresource | where-object {
    $_.ResourceType.name -eq "SQL Server"
        } |
        %{
            $virtualServerName = get-clusterparameter -InputObject $_ VirtualServerName; 
            $instanceName = get-clusterparameter -InputObject $_ InstanceName; 
            $nodeName = $_.OwnerNode;
            $IPAddress = [System.Net.Dns]::GetHostAddresses($virtualServerName.Value) | where-object {$_.IsIPv6LinkLocal -eq $False}
            echo ("{0},{1}\{2},{3},{4},{5},{6}" -f $nodeName,$virtualServerName.Value, $instanceName.Value,$virtualServerName.Value,$instanceName.Value,$IPAddress,$clusterName);
        } | out-file -filepath "D:\Path\To\File\ClusterInstances.txt" -Encoding ASCII -append 
```

实际上，与您使用的样式保持一致，以下内容也应该起作用：

```
Param(
    [string]$clusterName
    )

Import-Module failoverclusters

get-cluster -name $clusterName | get-clusterresource | where-object {
    $_.ResourceType.name -eq "SQL Server"
        } |
        %{
            $virtualServerName = get-clusterparameter -InputObject $_ VirtualServerName; 
            $instanceName = get-clusterparameter -InputObject $_ InstanceName; 
            $nodeName = $_.OwnerNode;
            $IPAddress = [System.Net.Dns]::GetHostAddresses($virtualServerName.Value) | where-object {$_.IsIPv6LinkLocal -eq $False}
            echo ("{0},{1}\{2},{3},{4},{5},{6}" -f $nodeName,$virtualServerName.Value, $instanceName.Value,$virtualServerName.Value,$instanceName.Value,$IPAddress,$clusterName);
        } |
        out-file -filepath "D:\Path\To\File\ClusterInstances.txt" -Encoding ASCII -append 
```

底线是“|” 除非你已经转义了前面的换行符，否则它不能是第一个字符，因为它被解释为一个新命令，所以第一个管道元素丢失，因此出现“空管道元素”错误。

# ios - objectForKey 返回 null 但 nsdictionary 已满

> ID：15438223
> 
> 赞同：1
> 
> 时间：2013-03-15T17:07:33.833
> 
> 标签：ios, nsarray, nsdictionary

我想提取字典的值却返回null。为什么？

我的代码：

```
 - (void)viewDidLoad
 {

    //....
  self.mutableArray =[[NSMutableArray alloc]init];
  self.mutableDictionary =[NSMutableDictionary dictionaryWithObjectsAndKeys:@"Carrello", @"Name List", @"18", @"Number", nil];
  [mutableArray addObject:self.mutableDictionary];
    //....
  } 
```

后

```
 - (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

       static NSString *CellIdentifier = @"Login";

       self.cellCustom = (CellCustomTableList*)[aTableView 
                 dequeueReusableCellWithIdentifier:CellIdentifier];

      if(self.cellCustom == nil){
              self.cellCustom = [[CellCustomTableList alloc] 
              initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
       }

   NSDictionary * dictionary = [self.mutableArray objectAtIndex:indexPath.row];
   NSLog(@"the dictionary %@", dictionary);
   /*the dictionary {
          "Name List" = Carrello;
          "Number" = 18;
    }*/

   NSLog(@"%@", [dictionary objectForKey:@"Name List"]);
   // (null)
   NSLog(@"%@", [dictionary objectForKey:@"Number"]);
   // (null)
   NSLog(@"%@", [dictionary allKeys]);
   /*(
        "Name List",
        "Number"
    )
    */

    int i =[self.mutableArray indexOfObject:dictionary];
     NSLog(@"%d", i); 
     //0

   return self.cellCustom;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:28:10.603

如果您的 tableView 中有更多行表明您的字典中有对象，只需进行简单的检查，如下所示：

```
//if you want some specific object
NSUInteger objIdx = [self.mutableArray indexOfObject: someObject];
if(objIdx != NSNotFound) {
    // Do some alter stuff here
}

//or simple checking
if (indexPath.row <= [self.mutableArray count]){
// Do some alter stuff here
} 
```

# php - 两个日期之间的 PHP Mysql 搜索

> ID：15438230
> 
> 赞同：5
> 
> 时间：2013-03-15T17:07:53.083
> 
> 标签：php, mysql

我有这样的mysql表：

```
id      start_date         username
1       2013-04-04         18
2       2013-03-31         19
3       2013-04-04         19
4       2013-04-02         19 
5       2013-04-03         18 
```

我正在尝试通过以下查询获取 start_date 在 2013-03-31 到 2013-05-01 之间的**用户名：**

```
// $from = 2013-03-31 and $to = 2013-03-01 (example)

$search = mysql_query("SELECT username FROM oc_calendar WHERE start_date >'$from' AND 
start_date < '$to'"); 
$re_search = mysql_fetch_array($search);
echo $search_p_id = $re_search['username']; 
```

但它只是打印用户名 = 18，它应该是打印 18 和 19 数字用户名。为什么它不显示？任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T17:17:06.043

**询问：**

```
$search = mysql_query("SELECT username FROM oc_calendar WHERE 
start_date between '$from' AND '$to'"); 
```

你需要一个 while 循环来显示多个用户名和一个正确的 SQL 查询（见上文）：

```
while($re_search = mysql_fetch_array($search)) {
  $re_search['username'] . '<br>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:11:05.040

```
SELECT username FROM oc_calendar WHERE start_date between '$from' AND '$to' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:09:53.957

您可以使用此查询：

```
$search = mysql_query("SELECT username FROM oc_calendar WHERE start_date between '$from' AND '$to'"); 
```

关于您使用的条件：

```
where start_date >'$from' 
```

您的 fromdate = 2013-03-31 所以上述条件不适用于用户名 = 19。相反，您应该使用

```
where start_date >= '$from' and startdate <='$to' 
```

# asp.net - 如何更改使用 Entity Framework Power Tools 生成的类名

> ID：15438237
> 
> 赞同：1
> 
> 时间：2013-03-15T17:08:07.857
> 
> 标签：asp.net, database, entity-framework, database-first, visual-studio-power-tools

伙计们正在开发一个 Asp.Net MVC 项目，该项目已经使用存储库模式从 MS SQL Server 数据库中获取数据。

我现在打算将实体框架用于我们项目的一些新的特定需求，而不会干扰旧的存储库逻辑。我使用了 EF Power 工具 Beta 3 并从 Visual Studio 对我的数据库表进行了逆向工程，但生成的类与我现有的一些存储库类冲突，这些存储库类与数据库中的相应表同名，导致项目无法编译。我看过[这个](https://stackoverflow.com/questions/14958143/change-the-generated-file-name-in-ef-power-tools-beta-3)教程

但这讲述了将“tbl”前缀附加到表名而不更改生成的类名。但是，我自己尝试更改模板中生成的类名（存在于 CodeTemplates\ReverseEngineerCodeFirst 下，但它们仍然会产生冲突。

我的问题是我应该怎么做才能达到我的预期结果（与项目中的现有类没有冲突），还是应该完全采用其他替代方案？感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:19:21.110

我不知道如何让工具执行您所要求的操作，但是如何更改生成文件中的命名空间，这样重复的名称就无关紧要了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:16:19.700

好的，考虑到@jlew 的建议，我找到了一种解决方法，是的，它点击了：

这里是：

首先，我通过从以下链接下载的自定义模板覆盖了在“CodeTemplates/ReverseEngineerCodeFirst”文件夹下生成的默认模板：

[http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)

（注意：这样做是为了使用 Data Annotations 进行配置，而不是 Fluent API，以便使用 Data Annotations 完成列和表映射。有关详细信息，请参阅上面的链接）。

然后我做了以下事情：

1.  在 Context.tt 文件中替换

    ```
    using <#= code.EscapeNamespace(efHost.MappingNamespace) #>;

    namespace <#= code.EscapeNamespace(efHost.Namespace) #> 
    ```

和

```
<#
    var hostMapNamespace = code.EscapeNamespace(efHost.MappingNamespace);
    hostMapNamespace = hostMapNamespace.Replace(".Models", ".ModelsEF");

    var hostNamespace = code.EscapeNamespace(efHost.Namespace);
    hostNamespace = hostNamespace.Replace(".Models", ".ModelsEF");
#>
using <#= hostMapNamespace #>;

namespace <#= hostNamespace #> 
```

2- 在 Entity.tt 文件中替换

```
 namespace <#= code.EscapeNamespace(efHost.Namespace) #> 
```

和

```
<#
    var hostNamespace = code.EscapeNamespace(efHost.Namespace);
    hostNamespace = hostNamespace.Replace(".Models", ".ModelsEF");
#>
namespace <#= hostNamespace #> 
```

3-在 Mapping.tt 文件中替换

```
 namespace <#= code.EscapeNamespace(efHost.Namespace) #> 
```

和

```
<#
    var hostMapNamespace = code.EscapeNamespace(efHost.Namespace);
    hostMapNamespace = hostMapNamespace.Replace(".Models", ".ModelsEF");
#>
namespace <#= hostMapNamespace #> 
```

简而言之，我对自定义模板中的命名空间生成进行了一些更改，以避免与任何现有的项目类发生任何冲突，尤其是在 Models 命名空间中。好消息是……它有效！

# javascript - 使用 jquery 随机播放一些 div

> ID：15438238
> 
> 赞同：0
> 
> 时间：2013-03-15T17:08:08.977
> 
> 标签：javascript, jquery, html

我想打乱我`div`桌子上的单元格。我尝试使用该`.shuffle()`插件，但无法使其工作。这是我的代码：

```
<div class="sprites">
    <div class="row">
        <span id="draggable0" class="draggable"></span> 
        <span id="draggable1" class="draggable"></span> 
        <span id="draggable2" class="draggable"></span>
    </div>
    <div class="row">
        <span id="draggable3" class="draggable"></span> 
        <span id="draggable4" class="draggable"></span> 
        <span id="draggable5" class="draggable"></span>
    </div>
    <div class="row">
        <span id="draggable6" class="draggable"></span> 
        <span id="draggable7" class="draggable"></span> 
        <span id="draggable8" class="draggable"></span>
    </div>
</div> 
```

这就是我尝试洗牌的方式：

```
$(document).ready(function () {
    $('.sprites').shuffle();
}); 
```

你知道我怎么能洗牌所有这些东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:16:17.887

# [小提琴](http://jsfiddle.net/AaronBlenkush/Vhh59/)

这只会打乱 class 的元素`sprites`。你想洗牌`div`里面的 s `.sprites`，对吧？

```
$('.sprites div').shuffle(); 
```

编辑：正确的语法实际上可能是：

```
$.shuffle('.sprites div'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:22:11.453

`shuffle()`将传递给它的元素打乱...您需要将盒子内的项目传递给它...

只需使用这个：[**现场演示**](http://jsfiddle.net/nYh9Q/)

```
$('.draggable').shuffle(); 
```

或者

```
$('.row').shuffle(); 
```

**更新**

使用它重新启用拖动。

```
$(document).ready(function() {
       $('.draggable').draggable(); 
});

function shuffle () {
    $('.draggable').draggable("destroy");
    $('.draggable').shuffle();
    $('.draggable').draggable();
} 
```

*洗牌代码*

```
(function(d){
    d.fn.shuffle=function(c){
        c=[];
        return this.each(function()
            {
                c.push(d(this).clone(true))
            }).each(function(a,b)
            {
                d(b).replaceWith(c[a=Math.floor(Math.random()*c.length)]);
                c.splice(a,1)
            })
    };
    d.shuffle=function(a){
        return d(a).shuffle()
    }
})(jQuery); 
```

# symfony - 一个听众中的教义 PostPersist 和 PostUpdate

> ID：15438239
> 
> 赞同：3
> 
> 时间：2013-03-15T17:08:14.607
> 
> 标签：symfony, doctrine, listener

我正在使用侦听器来坚持**和**更新教义。

唯一的问题是，当侦听器被调用时，它会创建并更新一个新的/当前实体，因此它会再次调用自己，从而创建两个实体。

我能想到阻止这种情况的唯一方法是拥有一个全局变量，它会知道我们是否正在持久化（创建）一个实体，而不是调用使用更新侦听器。

我知道这是错误的，必须有更好的方法来创建一个监听器，它可以更新和创建其他实体，而无需再次调用自己。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:38:25.943

避免与学说侦听器发生递归循环的一种方法是让侦听器在进行任何更新/持久之前从事件管理器中删除自己。

例如，在我处理过的一些代码中，我有这样的东西：

```
// $evm is the Event Manager grabbed from the Entity Manager that
// is part of the Event passed to the listener function
public function removeThyself($evm)
{
    $evm->removeEventListener(Events::postFlush, $this);
    $evm->removeEventListener(Events::onFlush, $this);
}

public function readdTheyself($evm)
{
    $evm->addEventListener(Events::postFlush, $this);
    $evm->addEventListener(Events::onFlush, $this);
} 
```

这些函数从监听器注册的任何事件中删除事件监听器。

然后在从影响数据库的侦听器执行任何操作之前，我调用这些以确保不会调用事件侦听器。例如

```
// $em is the Entity Manager, $evm is the Event Manager
$this->removeThyself($evm);
$em->flush($toFlush);
$this->readdTheyself($evm); 
```

# c# - 当我对过滤后的搜索结果进行排序时，我的 gridview 显示全部而不是排序

> ID：15438240
> 
> 赞同：0
> 
> 时间：2013-03-15T17:08:19.850
> 
> 标签：c#, asp.net, sql

我有一个gridview，当我搜索特定字符串时，我对过滤后的结果进行了排序，但gridview 显示所有排序，并且我丢失了过滤后的结果。有任何想法吗？

ASP：

```
 <asp:GridView ID="GridViewWinners" runat="server" AutoGenerateColumns="False" 
            CellPadding="4" DataKeyNames="PlayerID" DataSourceID="SqlDataSource4" ForeColor="#333333" 
            GridLines="Horizontal" Width="858px" 
            onselectedindexchanged="GridViewWinners_SelectedIndexChanged" 
            AllowSorting="True" Visible="False">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            <Columns>
                <asp:CommandField ShowSelectButton="True" />
                <asp:BoundField DataField="PlayerID" HeaderText="PlayerID" ReadOnly="True" 
                    SortExpression="PlayerID" Visible="False" />
                <asp:BoundField DataField="LastName" HeaderText="Last Name" 
                    SortExpression="LastName" />
                <asp:BoundField DataField="FirstName" HeaderText="First Name" 
                    SortExpression="FirstName" />
                <asp:BoundField DataField="UserName" HeaderText="Login" 
                    SortExpression="UserName" />
                <asp:BoundField DataField="ClubNumber" HeaderText="Club Number" 
                    SortExpression="ClubNumber" />
                <asp:BoundField DataField="DOB" HeaderText="DOB" SortExpression="DOB" />
            </Columns>
            <EditRowStyle BackColor="#999999" />
            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
            <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
            <SortedAscendingCellStyle BackColor="#E9E7E2" />
            <SortedAscendingHeaderStyle BackColor="#506C8C" />
            <SortedDescendingCellStyle BackColor="#FFFDF8" />
            <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
        </asp:GridView>

<asp:SqlDataSource ID="SqlDataSource4" runat="server" 
                ConnectionString="<%$ ConnectionStrings:GameCenterPrizesConnectionString1 %>" 
                DeleteCommand="DELETE FROM [Players] WHERE [PlayerID] = @PlayerID" 
                InsertCommand="INSERT INTO [Players] ([UserName], [ClubNumber], [FirstName], [LastName], [DOB]) VALUES (@UserName, @ClubNumber, @FirstName, @LastName, @DOB)" 
                ProviderName="<%$ ConnectionStrings:GameCenterPrizesConnectionString1.ProviderName %>" 
                SelectCommand="SELECT [PlayerID], [UserName], [ClubNumber], [FirstName], [LastName], [DOB] FROM [Players]" 
                UpdateCommand="UPDATE [Players] SET [UserName] = @UserName, [ClubNumber] = @ClubNumber, [FirstName] = @FirstName, [LastName] = @LastName, [DOB] = @DOB WHERE [PlayerID] = @PlayerID">
            <DeleteParameters>
                <asp:Parameter Name="PlayerID" Type="Int64" />
            </DeleteParameters>
            <InsertParameters>
                <asp:Parameter Name="UserName" Type="String" />
                <asp:Parameter Name="ClubNumber" Type="String" />
                <asp:Parameter Name="FirstName" Type="String" />
                <asp:Parameter Name="LastName" Type="String" />
                <asp:Parameter Name="DOB" Type="DateTime" />
            </InsertParameters>
            <UpdateParameters>
                <asp:Parameter Name="UserName" Type="String" />
                <asp:Parameter Name="ClubNumber" Type="String" />
                <asp:Parameter Name="FirstName" Type="String" />
                <asp:Parameter Name="LastName" Type="String" />
                <asp:Parameter Name="DOB" Type="DateTime" />
                <asp:Parameter Name="PlayerID" Type="Int64" />
            </UpdateParameters>
        </asp:SqlDataSource> 
```

排序前： [http ://tinypic.com/view.php?pic=j82tcx&s=6](http://tinypic.com/view.php?pic=j82tcx&s=6)

排序后： [http ://tinypic.com/view.php?pic=rvcz07&s=6](http://tinypic.com/view.php?pic=rvcz07&s=6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:25:45.797

gridview 控件实际上并不进行排序，它使用数据源控件对数据进行排序。gridview 控件将排序表达式传递给数据源控件，数据源控件将根据表达式进行排序，如果它能够这样做的话。

[http://msdn.microsoft.com/en-us/library/hwf94875.aspx](http://msdn.microsoft.com/en-us/library/hwf94875.aspx)

希望这可以帮助。--文档

# vba - 如何将对象设置为可以进行布尔检查的空值？

> ID：15438241
> 
> 赞同：3
> 
> 时间：2013-03-15T17:08:20.073
> 
> 标签：vba

我有一个返回字典的 VBA 函数，然后如果在构建字典时出现错误，则采取某种措施。像这样：

```
Public Sub takeAction(s as string)

Dim dict as Dictionary
Set dict=makeADictionary(s)
If dictionaryIsOK(dict) Then
 doSomething
Else
 doSomethingElse
End If

End Sub 
```

我在制作`dictionaryIsOK`函数时遇到了麻烦，因为如果我尝试将 Dictionary 设置`Nothing`为指示空值的一种方式，似乎无法检查该值。例如：

```
Sub testNothing()

Dim d As New Dictionary

Set d = Nothing
Debug.Print d Is Nothing

End Sub 
```

这会打印`false`，即使我设置`d`为`Nothing`. 这似乎也适用于所有其他对象类型。

那么，我可以将什么空值分配给一个对象，在这种情况下是一个字典，以及它的布尔检查是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:23:07.353

```
Dim d As New Dictionary 
```

在 VBA/VB6 中，上面的意思是“声明变量总是包含`d`一个`Dictionary`.`Nothing``Dictionary`

您要删除`New`：

```
Dim d As Dictionary 
```

然后你可以检查变量是否`Is Nothing`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:27:26.947

您需要正确实例化。这有效：

```
Dim d As Dictionary
Set d = New Dictionary
Set d = Nothing
Debug.Print d Is Nothing 
```

# html - 在整个宽度上固定高度背景图像

> ID：15438243
> 
> 赞同：0
> 
> 时间：2013-03-15T17:08:33.123
> 
> 标签：html, css, image, background

现在我正在使用以下代码将图像缩放到屏幕的整个宽度和高度。我实际上想要完成的是图像本身保持其原始高度，但如果用户缩小浏览器，它会切断图像的两侧。有谁能帮帮我吗？

```
html{
    background: url(jup.png) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='jup.png',     sizingMethod='scale');
    -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='jup.png', sizingMethod='scale');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:16:55.097

您可以在背景大小中使用值：

```
background-size:500px auto; 
```

# extjs - 覆盖下一个和上一个按钮分页工具栏 sencha extjs 4.1

> ID：15438244
> 
> 赞同：1
> 
> 时间：2013-03-15T17:08:33.980
> 
> 标签：extjs, overriding, paging

我的应用程序中的分页工具栏有问题。我的商店由将 MySQL 数据库表转换为 JSON 数据的 PHP 脚本填充。

在我的窗口中，我有一个面板，其中包含用于过滤网格的表单。所有“过滤器”都`store.load()`作为参数在调用中传递，PHP 脚本完成查询并返回数据。

我的问题是，当我有一些过滤器并单击分页工具栏的下一个按钮时，我的过滤器会消失，并且在没有额外参数的情况下加载存储。如何在 nextPage()/prevPage() 调用中发送额外的参数？

编辑：我解决了使用`store.on('beforeload')`，这是我的解决方案：

```
store.on('beforeload', function(store, operation, opts){
   operation.params={
       // yuor params here
       param1: param1Value,
       param2: param2Value
   };
}, this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T09:10:15.793

我不知道你是否找到了答案，但我遇到了同样的问题，这就是我发现的。

希望能帮助到你。

带参数调用时，只有一次。在以前的版本中，Sencha 告诉使用 baseParams，但我无法在较新的版本中找到它。所以我以这种方式使用了 Proxy 的 extraParams：

这是我用来过滤数据的表单按钮

```
text: 'Filter',
handler: function() {
        /*
        get the form
        get a record object and set its data
        */
        var form = this.up('form').getForm();
        var record = form.getRecord();
        form.updateRecord(record);

        for(name in record.data){
            if (record.data.hasOwnProperty(name))
                envelopeStore.setExtraParam(name, record.data[name]);
        }
        /*
        envelopeStore.getProxy().extraParams = record.data;
        *I have some constant params so I needed to add them in a loop as above
        *you can simply use this
        */

        envelopeGrid.child('pagingtoolbar').moveFirst(); 
        /*
        do not load store data. It does not change paging. go to first page instead
        */
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:39:34.423

您需要覆盖分页工具栏的 moveNext 和 movePrevious 方法，在这些方法中，您可以传递一个对象，该对象包含您需要传递给 PHP 的所有自定义参数

```
/**
 * Move to the next page, has the same effect as clicking the 'next' button.
 */
moveNext : function(){
    var me = this,
        total = me.getPageData().pageCount,
        next = me.store.currentPage + 1;

    if (next <= total) {
        if (me.fireEvent('beforechange', me, next) !== false) {
            me.store.nextPage({
                // all the custom params should go here
                param1 : 'value1'
            });
        }
    }
} 
```

这将很容易解决您当前的问题，但是如果您想要一个通用修复程序，每次从商店获取上一页/下一页时，商店都会提供这些自定义参数，那么您可以覆盖 loadPage 方法并在那里添加自定义参数

```
loadPage: function(page, options) {
    var me = this;

    me.currentPage = page;

    // add your custom params
    options = Ext.apply({
        param1 : 'value1'
    }, options);

    // Copy options into a new object so as not to mutate passed in objects
    options = Ext.apply({
        page: page,
        start: (page - 1) * me.pageSize,
        limit: me.pageSize,
        addRecords: !me.clearOnPageLoad
    }, options);

    if (me.buffered) {
        return me.loadToPrefetch(options);
    }
    me.read(options);
} 
```

参考：

[http://docs.sencha.com/ext-js/4-1/source/Paging.html#Ext-toolbar-Paging](http://docs.sencha.com/ext-js/4-1/source/Paging.html#Ext-toolbar-Paging)

[http://docs.sencha.com/ext-js/4-1/source/Store.html#Ext-data-Store-method-nextPage](http://docs.sencha.com/ext-js/4-1/source/Store.html#Ext-data-Store-method-nextPage)

# javascript - 使用 Javascript 和正则表达式提取数据

> ID：15438251
> 
> 赞同：-4
> 
> 时间：2013-03-15T17:08:50.243
> 
> 标签：javascript, regex

我正在使用 rss 提要将数据拉入我的网站。一条数据是一个日期，其格式如下：2013 年 2 月 22 日

我需要使用正则表达式（或替代的 javascript 方法）从完整日期中提取当天（22）。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:15:37.180

```
var parsed = Date.parse("Feb 22 2013");//NaN if invalid
var date = new Date(parsed);
date.getDate() //==22 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:23:12.510

你可以这样做

```
var data= "Feb 22 2012";
var splitted = data.split(" ");
alert(splitted[1]); 
```

试试看

[http://jsfiddle.net/fTSCu/](http://jsfiddle.net/fTSCu/)

虽然不是最优雅的解决方案

# php - MySQL 用一个变量查询多个字段

> ID：15438256
> 
> 赞同：0
> 
> 时间：2013-03-15T17:09:03.157
> 
> 标签：php, mysql, codeigniter

我在 Code Igniter 模型中使用下面的代码从数据库中提取数据。但是我的数据库有 2 个 Cust_Phone 字段。我想对其进行设置，以便在用户输入电话号码时搜索电话字段。我认为有一种方法可以在 mysql 查询中使用类似的东西来做到这一点

```
select distinct Phone from 
(SELECT Cust_Phone1 AS Phone 
  FROM Customer

UNION

SELECT Cust_Phone2 AS Phone 
  FROM Customer) as t where Phone <> '' 
```

在我的另一个选择查询中，但我不确定如何去做，或者我是否以正确的方式这样做。

--- CodeIgniter 模型函数 ---

```
public function customerQuery($First,$Last,$Zip,$Phone) {
    $sql = "SELECT * FROM Customer WHERE Cust_First LIKE ? AND Cust_Last LIKE ? AND Cust_Zip LIKE ? AND Cust_Phone1 Like ?"; 
    if($First == null || $First == '') {
        $First = '%';
    }else{
        $First = '%' . $First . '%';
    }
    if($Last == null || $Last == '') {
        $Last = '%';
    }else{
        $Last = '%' . $Last . '%';
    }
    if($Zip == null || $Zip == '') {
        $Zip = '%';
    }else{
        $Zip = '%' . $Zip . '%';
    }
    if($Phone == null || $Phone == '') {
        $Phone = '%';
    }else{
        $Phone = '%' . $Phone . '%';
    }
    $query = $this->db->query($sql, array($First,$Last,$Zip,$Phone));
    return $query->result();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:13:01.977

尝试这个：

```
$sql = "SELECT * FROM Customer WHERE Cust_First LIKE ? AND Cust_Last LIKE ? AND Cust_Zip LIKE ? AND (Cust_Phone1 LIKE ? OR Cust_Phone2 LIKE ?)";
...
...
if($Phone == null || $Phone == '') {
    $Phone = '%';
}else{
    $Phone = '%' . $Phone . '%';
}
$query = $this->db->query($sql, array($First,$Last,$Zip,$Phone,$Phone)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:12:43.750

您可以像这样检查两个电话字段...

```
$sql = "SELECT * FROM Customer WHERE Cust_First LIKE ? AND Cust_Last LIKE ? AND Cust_Zip LIKE ? AND (Cust_Phone1 Like ? OR Cust_Phone2 Like ?)";

...

$query = $this->db->query($sql, array($First,$Last,$Zip,$Phone,$Phone)); 
```

# ios - iOS：使用证书和签名验证文件 - 公钥错误，验证失败

> ID：15438257
> 
> 赞同：4
> 
> 时间：2013-03-15T17:09:09.000
> 
> 标签：ios, objective-c, encryption, keychain

我有三样东西：一个文件、一个签名文件和一个 X509 证书文件 .cer。该文件必须使用证书中的公钥和签名文件进行验证。我想用 Security.h/CommonCrypto 来做。

到目前为止我尝试了什么：

```
// load all the files
NSData* fileData = [NSData dataWithContentsOfFile:(...)];
NSData* signatureData = [NSData dataWithContentsOfFile:(...)];
NSData* certificateData = [NSData dataWithContentsOfFile:(...)];  

SecCertificateRef certificate = SecCertificateCreateWithData(NULL, CFBridgingRetain(certificateData)); // load the certificate 
```

证书加载得很好。它的名称可以使用检查

```
CFStringRef certificateDescription = SecCertificateCopySubjectSummary(certificate); 
```

哪个有效。由于iOS上似乎没有直接复制公钥的方法，所以我先创建一个信任。

```
SecTrustRef trust;
OSStatus statusTrust = SecTrustCreateWithCertificates( certificate, secPolicy, &trust);
SecTrustResultType resultType;
OSStatus statusTrustEval =  SecTrustEvaluate(trust, &resultType); 
```

这一切都适用于 errSecSuccess 结果。

现在我尝试获取公钥。

```
SecKeyRef publicKey;
publicKey = SecTrustCopyPublicKey(trust);
size_t keysize = SecKeyGetBlockSize(publicKey); 
```

但是publicKey的内容

```
NSData* keyData = [NSData dataWithBytes:publicKey length:keysize]; 
```

与我打开 .cer 文件时看到的公钥不同。所以这是第一个问题。

然后我尝试验证签名，即使我知道公钥是错误的。填充是正确的。

```
OSStatus verficationResult = SecKeyRawVerify(publicKey,  kSecPaddingPKCS1, [fileData bytes], [fileData length], [signatureData bytes], [signatureData length]); 
```

此操作失败，OSStatus 为 -9809（操作无法完成）。我希望它是 –25293 errSecAuthFailed。

我在做一些根本错误的事情吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T14:35:10.170

[我在Apple Dev Forums 的提示](https://devforums.apple.com/message/795434#795434)的帮助下解决了这个问题。

这个问题与钥匙串无关。但是我将错误的参数传递给了验证函数。它需要数据的摘要（散列），而不是直接的数据。

```
NSData* fileData = [NSData dataWithContentsOfFile:(...)];
NSData* signatureData = [NSData dataWithContentsOfFile:(...)];
NSData* certificateData = [NSData dataWithContentsOfFile:(...)];  

SecCertificateRef certificateFromFile = SecCertificateCreateWithData(NULL, (__bridge CFDataRef)certificateData); // load the certificate

SecPolicyRef secPolicy = SecPolicyCreateBasicX509();

SecTrustRef trust;
OSStatus statusTrust = SecTrustCreateWithCertificates( certificateFromFile, secPolicy, &trust);
SecTrustResultType resultType;
OSStatus statusTrustEval =  SecTrustEvaluate(trust, &resultType);
SecKeyRef publicKey = SecTrustCopyPublicKey(trust);

uint8_t sha1HashDigest[CC_SHA1_DIGEST_LENGTH];
CC_SHA1([fileData bytes], [fileData length], sha1HashDigest);

OSStatus verficationResult = SecKeyRawVerify(publicKey,  kSecPaddingPKCS1SHA1, sha1HashDigest, CC_SHA1_DIGEST_LENGTH, [signatureData bytes], [signatureData length]);
CFRelease(publicKey);
CFRelease(trust);
CFRelease(secPolicy);
CFRelease(certificateFromFile);
if (verficationResult == errSecSuccess) NSLog(@"Verified"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:20:09.050

您的问题是当您尝试获取关键数据时：

```
SecKeyRef publicKey;
publicKey = SecTrustCopyPublicKey(trust);
size_t keysize = SecKeyGetBlockSize(publicKey);
But the content of publicKey

NSData* keyData = [NSData dataWithBytes:publicKey length:keysize]; 
```

那不是公钥。那是`SecKeyRef`数据结构的前“X”个字节（“X”是公钥的大小）。这没什么特别有用的。

不幸的是，我不知道直接从 a`SecKeyRef`到 a 的方法`NSData`。你要做的就是把它`SecKeyRef`放入钥匙串（`SecItemAdd`），然后取回它（`SecItemCopyMatching`用`kSecReturnData`set）。当您取回它时，您将拥有公钥作为`NSData`.

（我不知道为什么 Apple 让 Security.framework 使用起来异常复杂......）

# css - 测试媒体查询

> ID：15438265
> 
> 赞同：0
> 
> 时间：2013-03-15T17:09:32.487
> 
> 标签：css, cross-browser, media-queries

我已经写了一些媒体查询如下，但是当我尝试测试它们时，它们似乎不起作用，我认为媒体查询测试屏幕尺寸而不是浏览器尺寸是否正确？

如果是这样，您如何测试媒体查询是否在 15 英寸笔记本电脑上以即时通讯方式工作，连接到 22 英寸外部显示器，并且我要测试的样式适用于 1300 像素以下的屏幕，即。13" 及以下

```
@media only screen 
and (min-device-width : 500px) 
and (max-device-width : 1300px)  {          

    h1      {font-size:90px; margin-bottom: 60px;}

    h2      {font-size:27px; padding: 0 0 20px 0; }

    p       {font-size:18px; -webkit-font-smoothing: subpixel-antialiased;}

} 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-15T18:05:46.630

媒体查询与屏幕大小不匹配——它们与浏览器大小匹配。只需调整窗口大小。

[Firefox 中](https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_View)有这方面的工具，Chrome 中也有同样的东西。

# c# - WPF MeasureOverride 不适用于我的自定义控件

> ID：15438271
> 
> 赞同：3
> 
> 时间：2013-03-15T17:09:57.937
> 
> 标签：c#, .net, wpf, layout

我有一个“托管”在自定义面板（都是我的）中的自定义控件。

我的自定义面板有这样的代码：

```
protected override Size MeasureOverride(Size availableSize)
{
  foreach (UIElement child in Children)
  {
     child.Measure(availableSize);

     // Do stuff with the Desired Size.  (This is an example)
     resultSize.Width += child.DesiredSize.Width;
     resultSize.Height = Math.Max(resultSize.Height, child.DesiredSize.Height);

  }
  //.. Other Measure Stuff
} 
```

我放在面板中的所有标准控件都可以正常工作。但我的自定义控件已`DesiredSize`设置为非常小的宽度（5 像素）。即使它上面有一个`Label`至少需要 40 个像素才能显示的内容。

所以我把这段代码放到我的自定义控件中：

```
protected override Size MeasureOverride(Size constraint)
{
    var baseSize = base.MeasureOverride(constraint);
    var labelTextWidth = GetStringWidth(label.Content.ToString(), label);

    if (baseSize.Width == 0)
        baseSize.Width = 100;

    if (baseSize.Width < labelTextWidth)
        baseSize.Width = labelTextWidth;

    return baseSize;
} 
```

这将返回一个`Size`正确的。但是在我的面板的 MeasureOverride 中，child.DesiredSize 并没有反映我从子控件的 MeasureOverride 返回的内容。

**任何想法为什么会这样做？我能做些什么来让它在 DesiredSize 中正确地将我计算的 Measure 传递给面板？** （您不能只设置 DesiredSize。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T16:20:39.447

如果自定义控件的 MeasureOverride 返回正确的大小，但没有反映在 DesiredSize 属性中，我只有一个建议。您的子元素被某个容器包裹，您可以在自定义面板的 MeasureOverride 过程中检查子元素的类型。

# drupal - module_invoke：使用视图并作为块显示 Drupal 6

> ID：15438272
> 
> 赞同：0
> 
> 时间：2013-03-15T17:10:02.423
> 
> 标签：drupal, views

好的，这对常规块很有用：

```
 <?php $block = module_invoke('block', 'block', 'view', '15');
   print $block['content']; ?> 
```

但我有一个块视图的显示并将鼠标悬停在管理/块页面中的编辑上，我得到：

/views/sc_file_view-block_4

所以我尝试的第一件事是：

```
 <?php $block = module_invoke('views','view','block', 'sc_file_view_4');
           print $block['content']; ?> 
```

但是没有输出。还有另一种拉块的方法（实际上是块的显示视图？）

我试过改变视图/块等但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:04:09.127

您可以尝试按`views_get_view_result`功能获取块内容。

检查更多信息：[http ://api.drupal.org/api/views/views.module/function/views_get_view_result/7](http://api.drupal.org/api/views/views.module/function/views_get_view_result/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T11:48:39.263

我不确定，但它现在在我的情况下有效

```
print render($block['content']); 
```

# php - 使用 PHP 循环生成 JavaScript 代码时出现 $().click() 的问题

> ID：15438274
> 
> 赞同：0
> 
> 时间：2013-03-15T17:10:12.127
> 
> 标签：php, javascript

问候。我正在使用这样的 php 循环为我的表的每个元素生成一个 .click 事件：

```
<?php foreach ($elements as $element){ ?>
    var element_id = <?= json_encode($element['element_id']));?>;

    $('#'+element_id+'_button').click(function() {
        $('#'+element_id+'_interval').toggle();
        if ($(this).hasClass('active')){
            $(this).removeClass('active');
        }
        else{
            $(this).addClass('active');
        }
    });
    <?php }?> 
```

问题是，当`$('#'+element_id+'_interval').toggle();`元素没有响应但它正确添加和删除类时，请有人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:18:22.617

使用一个类，让你的代码更干净，但是如果你必须这样做，你应该知道你的 element_id 变量不断被重写。

尝试类似：

```
<button class="toggler" data-target="#interval_1"></button>

$(".toggler").click(function (ev) {
    ev.preventDefault();
    var target = $(this).data("target"); // would return #interval_1
    $(target).toggle();

    if ($(this).hasClass('active')) {
        $(this).removeClass('active');
    } else {
        $(this).addClass('active');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:20:08.347

将绑定事件放入单独的方法中，并在 document.ready 脚本中调用该方法：

```
 $(document).ready(function() {
      bindBtns();
});

function bindBtns()
{
    <?php foreach ($elements as $element){ ?>
    var element_id = <?= json_encode($element['element_id']));?>;

    $('#'+element_id+'_button').click(function() {
        $('#'+element_id+'_interval').toggle();
        if ($(this).hasClass('active')){
            $(this).removeClass('active');
        }
        else{
            $(this).addClass('active');
        }
     });
     <?php }?>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:16:07.060

我建议您首先将您的 php 与您的 javascript 分开。
否则（在其他之间）将难以维护。

首先，您可以使用 javascript 进行循环

# groovy - Groovy/Gremlin 类命名方案（需要大写字母）

> ID：15438275
> 
> 赞同：0
> 
> 时间：2013-03-15T17:10:15.973
> 
> 标签：groovy, gremlin

以下 Groovy/Gremlin 片段之间有什么区别？（都保存为 *.groovy 文件并使用 运行`./gremlin.sh -e [filename].groovy`）

```
class user
{
    String username

    static void main(String[] args)
    {
        user mtm = new user()
        mtm.username = "MuffinTheMan"
        println mtm.username
    }
} 
```

和

```
class User
{
    String username

    static void main(String[] args)
    {
        User mtm = new User()
        mtm.username = "MuffinTheMan"
        println mtm.username
    }
} 
```

第一个给出了 3 个与此类似的编译错误：

```
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Script1.groovy: 7: Apparent variable 'mtm' was found in a static scope but doesn't 
refer to a local variable, static field or class. Possible causes:
You attempted to reference a variable in the binding or an instance variable from
a static context.
You misspelled a classname or statically imported field. Please check the spelling.
You attempted to use a method 'mtm' but left out brackets in a place not allowed
by the grammar.
@ line 7, column 14.
user mtm = new user() 
```

第二个编译并运行得很好并输出：

```
MuffinTheMan 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:10:15.973

事实证明，唯一的区别是第一个中的类名以小写字母开头，而第二个中的类名以大写字母开头。[**这里**](http://groovy.329449.n5.nabble.com/Class-name-uppercase-problem-td372450.html)有一些讨论，但很难找到很多关于这个问题的好信息。我决定发布这篇文章是因为我正在拼命（不是字面意思）试图弄清楚为什么我的代码（类名的第一个字母为小写）无法编译，也许其他人可能有这个问题。

如果其他人有更好的链接指向关于该问题的更完整/清晰的讨论，请发布！

# statistics - 非“是/否”朴素贝叶斯分类器的介绍性阅读

> ID：15438278
> 
> 赞同：1
> 
> 时间：2013-03-15T17:10:27.027
> 
> 标签：statistics

我想为某些短字符串手动实现一个分类器，为每个字符串获得一个“好”等级。我制作了一个简单的贝叶斯分类器，它基本上类似于垃圾邮件过滤器，并根据之前的“好”/“坏”评级对字符串进行评分。到目前为止，一切都很好。现在，我想解决两个问题（通过正确理解事物）......

**问题是**- 下面什么是好的介绍性材料，不是“食谱”种类，而是更系统，但理想情况下比大学统计学课程短:) 比书短的文章集，或者是一本好书。理想地针对程序员。

问题是：首先，在我的系统中，实际上有 3 种类型的用户反馈——“好”、“坏”和“中立”。大多数项目都是中性的，现在我根本不将它们包括在排名中。我想知道如何正确处理这些事情（我仍然需要为每个项目获得一个“好概率”，所以如果我分别计算好和坏的概率，是否有任何陷阱/适当的方法来组合这些）。然后，我想从我的分类器中删除幼稚的部分（即考虑单词之间的关系），因此可能需要一些不同的分类器。或者，我可以添加所有对 - 三元组等。单词作为特征，因为字符串很短 - 这感觉就像一个黑客，但我的 CS / 数学背景再次生锈和/或不足以说明这是否是一种有效的技术。

# ruby-on-rails - 如何在集成测试的默认 url 选项中设置语言环境

> ID：15438281
> 
> 赞同：1
> 
> 时间：2013-03-15T17:10:43.957
> 
> 标签：ruby-on-rails, integration-testing, ruby-on-rails-4

使用 Rails 4.0.0beta1，我正在尝试创建一些集成测试。我所有的 URL 都在我的范围内`locale`（例如`/en/user/new`），每次我尝试调用时都会出现以下错误`new_user_url`：

```
ActionController::UrlGenerationError: No route matches {:action=>"new", :controller=>"user"} missing required keys: [:locale] 
```

我已经尝试了@Balint Erdi 在[以下问题中给出的解决方案](https://stackoverflow.com/a/2565277/1872168)

```
class ActionController::Integration::Session
  def url_for_with_default_locale(options)
    options = { locale: I18n.locale }.merge(options)
    url_for_without_default_locale(options)
  end

  alias_method_chain :url_for, :default_locale
end 
```

它有效，但由于 rails4 给了我一个弃用警告：

```
DEPRECATION WARNING: ActionController::Integration is deprecated and will be removed, use ActionDispatch::Integration instead. (called from <top (required)> at /path/to/project/test/test_helper.rb:46)
DEPRECATION WARNING: ActionController::IntegrationTest is deprecated and will be removed, use ActionDispatch::IntegrationTest instead. (called from <top (required)> at /path/to/project/test/test_helper.rb:46) 
```

对于我的控制器测试，我添加了这个：

```
class ActionController::TestCase

  module Behavior
    def process_with_default_locale(action, http_method = 'GET', parameters = nil, session = nil, flash = nil)
      parameters = { locale: I18n.locale }.merge( parameters || {} ) 
      process_without_default_locale(action, http_method, parameters, session, flash)
    end

    alias_method_chain :process, :default_locale
  end 
end 
```

我还测试了将`default_url_options`方法直接添加到测试中，但它不起作用。

如何在集成测试中设置默认 url 参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-28T04:26:01.290

对我有用的一个选项（至少在 Rails 4.2.0 中）是`ActionDispatch::IntegrationTest`在我的类中添加一个 setup 方法`test/test_helper.rb`：

```
class ActionDispatch::IntegrationTest
  def setup
    self.default_url_options = { locale: I18n.default_locale }
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:04:46.027

好的，看起来就像替换`ActionController`为`ActionDispatch`. 我不知道为什么它以前不起作用，但自从我更新到最新的 rails 后，它不赞成`rake test:integration`它`rails test integration`似乎起作用：

```
class ActionDispatch::Integration::Session
  def url_for_with_default_locale(options)
    options = { locale: I18n.locale }.merge(options)
    url_for_without_default_locale(options)
  end

  alias_method_chain :url_for, :default_locale
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-16T18:19:28.583

Rails 5，Minitest 示例：

```
class SomeTest < ActionDispatch::IntegrationTest
  setup do
    self.default_url_options = { locale: I18n.default_locale }
  end

  def test_something
    ...
  end
end 
```

# jquery - 读取提交给 html 页面的表单数据

> ID：15438286
> 
> 赞同：1
> 
> 时间：2013-03-15T17:11:05.710
> 
> 标签：jquery, forms, post

我正在尝试使用 jQuery/Javascript 来读取提交给 html 页面的表单数据。这是场景

我有一个页面“Page1.html”，用户被引导到该页面注册会议。在这个页面上，我有一个按钮可以让他们付款。当他们点击此按钮时，他们会被带到一个支付网关，在那里他们可以支付。然后，该支付提供商将他们的响应以表单的形式发回“Page2.html”。

一切正常，但我似乎无法访问 Page2.html 中的表单数据。我无法在页面的查看源代码中看到表单。我知道数据就在那里，因为当我使用 Chrome 中的开发人员工具查看标题时，我可以看到数据。我认为 $("[name=value]").val() 会起作用，但它返回未定义。

我如何访问提交给该页面中的 html 页面的表单数据的任何想法。我不想使用像 asp.net 这样的服务器端脚本来获取数据，虽然这确实有效，但我只想使用 Jquery 或 javascript。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:22:44.983

您需要使用服务器端来捕获表单数据。仅 jQuery 无法做到。

# excel - Countif 直到填充特定列中的最后一行

> ID：15438289
> 
> 赞同：0
> 
> 时间：2013-03-15T17:11:22.090
> 
> 标签：excel, vba

我在完成宏时遇到问题。它使用 COUNTIF 函数并根据来自 B2 的数据检查整个 A 列（A:A - 无排除项）。我想在 C 列中进行自动填充，直到 B 列中的最后一个值 - 就像下图所示：

![在此处输入图像描述](../Images/09a5dd8d1b4a7db60eea29a75773fbbb.png)

谁能帮我我应该在我的代码中添加什么来使这个自动填充成为可能？

```
Sub Countif()

Range("C2").Select
ActiveCell.FormulaR1C1 = "=COUNTIF(C[-2],RC[-1])"
Selection.AutoFill Destination:=Range("C2:C10"), Type:=xlFillDefault
Range("C2:C10").Select

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:30:09.960

如果您想使用 VBA 实现，请尝试以下代码。只需运行宏，它就会填满 B 列中的 C 列 uptil 值。

```
Sub sample()

Dim LastRowColumnB As Long
LastRowColumnB = Range("B65000").End(xlUp).Row

For i = 2 To LastRowColumnB
    Cells(i, 3) = Application.CountIf(Range("A:A"), Cells(i, 2))
Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:19:28.567

您可以像这样获取列的最后一行：

```
Dim LastRowColumnB as Long
LastRowColumnB = Activesheet.Cells(Activesheet.Rows.Count, "B").End(xlUp).Row 
```

然后修改您的自动填充以使用该值。

```
Selection.AutoFill Destination:=Range("C2:C" & LastRowColumnB), Type:=xlFillDefault 
```

# android - 我的条形码应用程序在运行时强制关闭

> ID：15438291
> 
> 赞同：0
> 
> 时间：2013-03-15T17:11:26.877
> 
> 标签：android, barcode

我让我的应用程序读取一个应用程序，然后告诉我代码的内容，但现在我试图让它将字符串编码回条形码并将其显示为屏幕上的图像。但是，它总是在启动之前强制关闭应用程序。这是我的代码，请帮助：

```
import java.util.EnumMap;
import java.util.Map;

import android.os.Bundle;
import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.drawable.BitmapDrawable;
import android.view.Gravity;
import android.view.Menu;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;
import com.google.zxing.BarcodeFormat;
import com.google.zxing.EncodeHintType;
import com.google.zxing.MultiFormatWriter;
import com.google.zxing.WriterException;
import com.google.zxing.common.BitMatrix;

public class Main extends Activity {

IntentIntegrator integrator = new IntentIntegrator(this);

private static final int WHITE = 0xFFFFFFFF;
private static final int BLACK = 0xFF000000;
LinearLayout myLayout = (LinearLayout)findViewById(R.id.myLayout);
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //LinearLayout myLayout = (LinearLayout)findViewById(R.id.myLayout);

    Button btn =(Button)findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            integrator.initiateScan();
        }
    });
}
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
      IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
      if (scanResult != null) {
          Toast.makeText(Main.this,
                    "works",
                    Toast.LENGTH_SHORT).show();
          String contents = intent.getStringExtra("SCAN_RESULT");
          String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
          Toast.makeText(Main.this,
                    contents,
                    Toast.LENGTH_SHORT).show();
          Bitmap bitmap = null;
          ImageView iv = new ImageView(this);
          try {

                bitmap = encodeAsBitmap(contents, BarcodeFormat.CODE_128, 600, 300);
                iv.setImageBitmap(bitmap);

            } catch (WriterException e) {
                e.printStackTrace();
            }
          myLayout.addView(iv);
          TextView tv = new TextView(this);
            tv.setGravity(Gravity.CENTER_HORIZONTAL);
            tv.setText(contents);

            myLayout.addView(tv);
      }

    }
Bitmap encodeAsBitmap(String contents, BarcodeFormat format, int img_width, int img_height) throws WriterException {
    String contentsToEncode = contents;
    if (contentsToEncode == null) {
        return null;
    }
    Map<EncodeHintType, Object> hints = null;

        hints = new EnumMap<EncodeHintType, Object>(EncodeHintType.class);
        hints.put(EncodeHintType.CHARACTER_SET, "UTF-8");

    MultiFormatWriter writer = new MultiFormatWriter();
    BitMatrix result;
    try {
        result = writer.encode(contentsToEncode, format, img_width, img_height, hints);
    } catch (IllegalArgumentException iae) {
        // Unsupported format
        return null;
    }
    int width = result.getWidth();
    int height = result.getHeight();
    int[] pixels = new int[width * height];
    for (int y = 0; y < height; y++) {
        int offset = y * width;
        for (int x = 0; x < width; x++) {
        pixels[offset + x] = result.get(x, y) ? BLACK : WHITE;
        }
    }
    Bitmap bitmap = Bitmap.createBitmap(width, height,
            Bitmap.Config.ARGB_8888);
        bitmap.setPixels(pixels, 0, width, 0, 0, width, height);
        return bitmap;

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

IntentResult 和 IntentIntegrator 均来自 ZXing。

原木猫：

```
03-15 13:05:04.303: E/AndroidRuntime(4363): FATAL EXCEPTION: main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:32:00.900

在您的吐司中，`Main.this`您应该尝试`getApplicationContext()`. 还记得 an`Activity`是 的一种`Context`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:14:46.507

尝试移动这个：

```
LinearLayout myLayout = (LinearLayout)findViewById(R.id.myLayout); 
```

在下面：

```
setContentView(R.layout.main); 
```

# eclipse - Eclipse 本地文件历史

> ID：15438292
> 
> 赞同：2
> 
> 时间：2013-03-15T17:11:28.727
> 
> 标签：eclipse

在eclipse中，您可以右键单击一个文件，然后选择`Team / Show local history`. 这显示了您的本地保存并且非常有用。

现在，我对文件进行了一些更改。我100%确定是我做的。但他们已经消失了。我猜被别人覆盖了。但是当我检查我的本地历史时，我看不到我的文件更改。

我的问题是：

Eclipse 是否总是为每次保存更新本地文件历史记录？它有多可靠？

注意：我很欣赏人们正在考虑其他人如何覆盖您的文件。我在 force.com 项目中工作。当您对文件进行更改时，它们会被推送到中央服务器。有源代码控制本身。就像每个人都在使用共享文件夹一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:47:01.140

这取决于。在删除或更改文件时，每个处理工作空间工件的 Eclipse 插件都可以选择在其对工作空间资源管理的 API 调用中为本地历史设置一个标志。如果设置了标志，更改的文件肯定会被复制到本地历史记录中。但是每个插件都可以设置不同的这个标志。

因此，即使您可能有一个在保存编辑文件时始终使用本地历史记录的编辑器插件，另一个插件也可能会在不使用本地历史记录的情况下删除/修改文件，因此会产生干扰。

摘要：本地历史记录不是返回以前保存的文件版本的可靠方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-18T00:21:56.563

如果其他人遇到此问题，请检查以确保您没有意外编辑构建或目标目录中的文件。例如，如果您正在处理 jsp 页面并进行编辑，发誓您更改了它，但当您打开文件时它们不再存在于编辑器或本地历史记录中，请检查以确保您没有编辑构建版本事故。

如果您快速使用`ctrl-shift-R`快捷方式打开资源，有时会发生这种情况。为避免这种情况，您可以`derived`通过右键单击文件夹并选中`derived`复选框来设置您的构建或目标文件夹。这将阻止资源显示在`Open Resource`视图中，这可能会在以后让您头疼。

为了取回代码，我打开了目标版本并使用`undo`了编辑后的版本。

# c++ - OpenCV：用标量划分 Mat 的最简单方法是什么

> ID：15438293
> 
> 赞同：17
> 
> 时间：2013-03-15T17:11:30.863
> 
> 标签：c++, opencv

我认为它几乎在标题中，显然我可以迭代和划分。但我认为有一种内置的方式。我看到了`cvConvertScale`，但这不适用于 type `cv::Mat`。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-15T17:37:11.753

我知道乘以标量的缩放操作：

```
cv::Mat M;
float alpha;
cv::Mat Result = M * alpha; 
```

让我们试试这个：

```
cv::Mat Result = M / alpha; 
```

或者：

```
float beta = 1.0f / alpha;
cv::Mat Result = M * beta; 
```

# jquery - 如何使用 CSS 缩放属性根据浏览器高度放大/缩小？

> ID：15438295
> 
> 赞同：1
> 
> 时间：2013-03-15T17:11:32.883
> 
> 标签：jquery, html, css, zooming

我有一个包含一个大正方形的网站（与宽度相同的高度）。

我希望正方形始终将浏览器窗口高度的 95% 作为其高度。但我不想真正改变正方形的定义高度/宽度。我想使用 CSS`zoom`属性。如果我将浏览器窗口更改为小尺寸，它应该缩小以使正方形仍然完全可见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:56:40.720

这是一个起点（为 Firefox 和 Opera 添加了跨浏览器支持）：[JSFiddle Demo](http://jsfiddle.net/YDwds/7/)

**HTML**

```
<div class="square"></div> 
```

**CSS**

```
html, body {
    margin: 0;
    height: 100%;
}
.square {
    width: 300px;
    height: 300px;
    margin: 0 auto;
    background-color: #7ad;
    -moz-transform-origin: center top;
      -o-transform-origin: center top;
} 
```

**jQuery**

```
function zoomSquare() {
    var $square = $('.square');

    var viewportHeight = $(window).height();
    var squareHeight = $square.height();
    var desiredHeight = Math.round(viewportHeight * 0.95);
    var zoom = (desiredHeight / squareHeight);

    $square.css('zoom', zoom);
    $square.css('-moz-transform', 'scale(' + zoom + ')');
    $square.css(  '-o-transform', 'scale(' + zoom + ')');
}

// When the browser is resized
$(window).on('resize', function(){ zoomSquare(); });

// When the page first loads
$(document).ready(function(){
    zoomSquare();
}); 
```

**更新：**

上面的代码放大了方形元素，而不是整个页面。如果需要缩放整个页面（如果页面上正方形之外还有其他内容可能会出现这种情况），请尝试[第二个 JSFiddle Demo](http://jsfiddle.net/Matt_Coughlin/6XNxW/1/)。

缩放整个页面时，发现放大会导致所有浏览器都出现水平滚动条，这对可用性非常不利。为避免这种情况，请缩小小浏览器窗口，但不要放大大窗口。这就是[第二个 Demo](http://jsfiddle.net/Matt_Coughlin/6XNxW/1/)的行为方式（它只会在浏览器非常小的时候进行缩放）。

# ruby-on-rails - 优化查询 mongodb/mongoid

> ID：15438299
> 
> 赞同：1
> 
> 时间：2013-03-15T17:11:50.263
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

```
class Job
  field :occupation, :type => String
  field :experience, :type => String
end 
```

在我的 api 文件中：

```
get :searches do
  Cv.search({query: "*#{params[:q]}*"}).map{ |cv| {id: cv.id, text: cv.occupation } }
end 
```

这会生成一个 json 文件：

```
[{"id":"513dbb61a61654a845000005","text":"industrial engineer"},{"id":"513a11d4a6165411b2000008","text":"javascript engineer"}] 
```

我使用 mongodb 作为数据库，使用 mongoid 作为 orm/odm。

**这适用于 10 或 100 或 1000 个结果，但我的问题是是否可以针对大型数据集合优化 api 查询 * *1.000.000****或**2.000.000**个结果。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:38:15.897

根据您的查询，如果您想查询，`occupation`您需要创建一个索引`occupation`

```
class Job
  include Mongoid::Document
  field :occupation, :type => String
  field :experience, :type => String
  index({ occupation: 1 })
end 
```

Mongoid 会自动创建和索引，`_id`因此如果您始终在查询中包含它，它将保持快速，除非您的数据库索引开始超过可用内存。

`Job.where(:occupation => "javascript engineer")`将使用索引

# c++ - C++ 向量内存不足

> ID：15438301
> 
> 赞同：5
> 
> 时间：2013-03-15T17:11:57.867
> 
> 标签：c++, memory-management, memory-leaks, stdvector

我有一个非常大的向量（数百万个条目，每个条目 1024 字节）。我超出了向量的最大大小（出现错误的内存分配异常）。我正在对需要访问向量中其他元素的项目向量进行递归操作。操作需要快速完成。出于速度原因，我试图避免写入磁盘。有没有其他方法可以存储不需要写入磁盘的数据？如果我必须将数据写入磁盘，最理想的方法是什么>

编辑以获取更多详细信息。

我对数据集执行的操作是根据向量中的其他数据点递归地生成一个字符串。数据在读入时进行排序。数据集范围从50,000到50,000,0000。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T17:19:34.180

解决此问题的最简单方法是使用[STXXL](http://stxxl.sourceforge.net/)。这是对 STL 的重新实现，用于在数据无法放入内存时透明地写入磁盘的大型结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T17:48:14.940

您的问题无法按照评论中所述和澄清的方式解决。

您已请求在 32 位系统上拥有 50,000,000 个大小为 1024 的条目的连续内存缓冲区。

32 位系统只有 4294967296 字节的可寻址内存。您要求 51200000000 字节的可寻址内存，或系统上内存地址空间量的 11.9 倍。

如果您不要求您的数据是连续的和内存可寻址的，如果您不要求您的数据一次都在内存中，或者如果您放宽其他要求，那么您的问题可能会有答案。即，一些操作系统通过一些hacky接口或其他方式公开访问与RAM相对应的值的非内存空间（在8 gig windows系统中使用超过4 gigs总RAM的方法）。

但如前所述，答案是“不，你不能那样做”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:37:33.460

因为您的数据必须是连续的，并且您知道需要存储多少元素，所以只需创建一个`std::vector`并使用该`reserve()`函数来尝试获得所需大小的连续内存块。

存储向量的开销很小（只需几个指针来管理开始和结束）。这和你能做的一样好。

如果失败：

*   为您的机器添加更多内存（如果您遇到寻址或实现限制，可能实际上没有帮助）
*   切换到原始数组
*   找到减小元素大小的方法
*   尝试找到可以解决小块问题的解决方案

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T17:16:29.620

即 1GB 内存 (1024KB * 10^6 = 1MB * 10^3 = 1GB)。理想情况下，对于 32 位机器，最多可以执行 4GB 内存操作。要回答您的问题，请先尝试正常的 malloc() 调用并分配 1 GB 内存。这应该在没有任何错误的情况下完成。另外，请粘贴您在使用向量时得到的确切错误消息。

# php - 我正在使用 curl 下载个人资料照片。这是正确的方法吗？

> ID：15438304
> 
> 赞同：0
> 
> 时间：2013-03-15T17:12:04.200
> 
> 标签：php, facebook, facebook-graph-api

```
function getFacebookPhoto($img,$fullpath) {

$curl = curl_init();
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_URL, $img);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 0);
$user_curl_image = curl_exec($curl);
curl_close($curl);

if(file_exists($fullpath)){
    @unlink($fullpath);
}
$fp = fopen($fullpath,'x');
fwrite($fp, $user_curl_image);
fclose($fp); 
} 
```

这是我用来下载照片的脚本。这样做是否正确？

我在 Facebook 应用程序中使用此功能。

# javascript - Ajax 在 setInterval 上被调用两次

> ID：15438305
> 
> 赞同：3
> 
> 时间：2013-03-15T17:12:07.773
> 
> 标签：javascript, html, ajax, jquery

我正在使用 javascript setInterval 函数在特定时间间隔内进行 ajax 调用，但是 ajax 代码被执行了两次，所以我得到了两次相同的响应，我不知道为什么会这样，这是代码：

```
 setInterval(function () {ajaxCall();},15000);

        function ajaxCall(){
            var uri = "url here";
            $.ajax({
            type: "GET",
            url: uri,
            dataType: "jsonp",
            success: function(response){
                    console.log(response);
                    var txt = $("#textarea");
                    txt.val( txt.val() + response.user + " (" + response.time + ") > " 
                    + response.text + '\n');
                    }
            });
        } 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:23:20.457

好的，所以我想通了，我在 html body 标记内有该脚本，但是如果我将它移动到 head 标签内，它会停止调用它两次，不知道为什么会这样，但它解决了问题。很抱歉浪费你的时间做一些简单的事情xD

# sugarcrm - 如何用 flexrelate 字段替换内置关系字段

> ID：15438306
> 
> 赞同：0
> 
> 时间：2013-03-15T17:12:10.823
> 
> 标签：sugarcrm

例如，在 Opportunities 和 Cases 中有直接指向客户的关系字段。我有一个集成到这些模块中的自定义模块。我可以为自定义模块添加一个单独的关联字段，但我想要的是一个仅允许帐户和自定义模块的 flexrelate。这可以通过在 parent_name 中设置一个特殊选项列表来正常工作。但会在 db 中产生 parent_type 和 parent_id 字段。

如何配置 flexrelate 以便在选择帐户作为 parent_type 时保存到 account_id 并在选择自定义模块时保存到它的 id 字段？

flexrelate 的选项：

```
$app_list_strings['parent_type_display_custom']['CustomMod'] = 'CustomMod';
$app_list_strings['parent_type_display_custom']['Accounts'] = 'Accounts';
$app_list_strings['record_type_display_custom']['CustomMod'] = 'CustomMod';
$app_list_strings['record_type_display_custom']['Accounts'] = 'Accounts'; 
```

案例的附加 vardef：

```
$dictionary["Case"]["fields"]["parent_type"] = array (
  'name' => 'parent_type',
  'type' => 'link',
            'vname' => 'LBL_PARENT_TYPE',
            'type' => 'parent_type',
            'dbType' => 'varchar',
            'group' => 'parent_name',
            'options' => 'parent_type_display_custom',
            'len' => '255',

        );
$dictionary["Case"]["fields"]['parent_name'] =
        array(
            'name' => 'parent_name',
            'parent_type' => 'record_type_display',
            'type_name' => 'parent_type',
            'id_name' => 'parent_id', 
            'vname' => 'LBL_RELATED_TO',
            'type' => 'parent(_custom)',
            'source' => 'non-db',
            'options' => 'record_type_display_custom',
        );
$dictionary["Case"]["fields"]['parent_id'] =
        array(
            'name' => 'parent_id',
            'vname' => 'LBL_PARENT_ID',
            'type' => 'id',
            'required' => false,
            'reportable' => true,
            'comment' => 'eighter the Id of an account or a custommodule'
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:45:19.680

这篇 SugarCRM 开发人员博客文章有帮助吗？

[http://developers.sugarcrm.com/wordpress/2011/05/16/howto-create-a-flex-relate-for-other-modules/](http://developers.sugarcrm.com/wordpress/2011/05/16/howto-create-a-flex-relate-for-other-modules/)

# jquery - 数据表引导分页 - 仅显示上一个/下一个

> ID：15438307
> 
> 赞同：4
> 
> 时间：2013-03-15T17:12:11.330
> 
> 标签：jquery, ruby-on-rails-3, datatables

通过 rweng/jquery-datatables-rails gem 将 jquery DataTables 插件集成到我的 rails 应用程序中。这很棒。我什至甚至用引导程序来设计它。

所以，我有 bootstrap 和 kaminari 用于分页（不确定这是否重要）。还有一个 kaminari-bootstrap gem。

无论如何，DataTables 表显示了前一个 1 2 3 4 5 下一个，而且它很粗。我怎样才能丢失数字，然后只有 previoius 下一个？

当前调用数据表：

```
jQuery ->
  $('#companyBoxList').dataTable
    sDom: "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>"
    sPaginationType: "bootstrap"
    bJQueryUI: true
    bProcessing: true
    bServerSide: true
    sAjaxSource: $('#companyBoxList').data('source') 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-10T17:00:06.327

您有 6 个选项：

*   `numbers`- 仅页码按钮
*   `simple`- 仅“上一个”和“下一个”按钮
*   `simple_numbers`- “上一个”和“下一个”按钮，加上页码
*   `full`- “第一个”、“上一个”、“下一个”和“最后一个”按钮
*   `full_numbers`- “第一个”、“上一个”、“下一个”和“最后一个”按钮，以及页码
*   `first_last_numbers`- “第一”和“最后”按钮，加上页码

最近添加了`numbers`和`first_last_numbers`选项。

*（来源：[http](http://www.datatables.net/examples/basic_init/alt_pagination.html) ://www.datatables.net/examples/basic_init/alt_pagination.html ）*

* * *

所以在你的情况下：

```
// Code jQuery.
$('#companyBoxList').dataTable({
  pagingType: "simple"
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T17:20:23.043

请注意，此答案指的是旧版本的 DataTables。现在有六个[分页选项](https://datatables.net/reference/option/pagingType)：

> **numbers** - 仅限页码按钮 (1.10.8)
> **simple** - 仅限“上一个”和“下一个”按钮
> **simple_numbers -“上一个”和“下一个”按钮，加上**
> **完整**的页码-“第一”、“上一个”、“下一个”和“最后一个”按钮
> **full_numbers** - “第一”、“上一个”、“下一个”和“最后一个”按钮，加上页码
> **first_last_numbers** - “第一”和“最后一个”按钮，加上页码

* * *

[http://www.datatables.net/usage/options](http://www.datatables.net/usage/options)

> **sPaginationType**
> 
> DataTables 具有两种不同的内置分页交互方法（“twobutton”或“fullnumbers”），它们向最终用户呈现不同的页面控件。可以使用 API 添加更多方法（见下文）。

更新：显然 Bootstrap 插件强制使用自己的分页布局。你可以这样做：

```
#my_table .pagination li {display: none;}
#my_table .pagination li.prev, #my_table .pagination li.next {display: inline;} 
```

# nhibernate - nhibernate验证器和envers一起

> ID：15438311
> 
> 赞同：2
> 
> 时间：2013-03-15T17:12:34.593
> 
> 标签：nhibernate, nhibernate-validator, nhibernate-envers

我正在尝试在同一个项目中同时使用 nhibernate 验证器和 nhibernate envers ......但我得到了空期望：

如果我稍后初始化验证器，我会收到错误消息：

```
Mesage: Object reference not set to an instance of an object.
StackTrace:
   at NHibernate.Validator.Engine.SystemTypeExtensions.ShouldNeedValidation(Type clazz)
   at NHibernate.Validator.Engine.ValidatorEngine.GetClassValidator(Type entityType)
   at NHibernate.Validator.Engine.ValidatorEngine.AddValidator(Type entityType, IValidatableSubElementsInspector inspector)
   at NHibernate.Validator.Event.ValidatePreInsertEventListener.Initialize(Configuration cfg)
   at NHibernate.Event.EventListeners.InitializeListeners(Configuration cfg, Object[] list) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\EventListeners.cs:line 618
   at NHibernate.Event.EventListeners.InitializeListeners(Configuration cfg) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\EventListeners.cs:line 592
   at NHibernate.Cfg.Configuration.GetInitializedEventListeners() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Cfg\Configuration.cs:line 1189
   at NHibernate.Cfg.Configuration.BuildSessionFactory() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Cfg\Configuration.cs:line 1246
   at ....Installers.NHibernateInstaller.SessionFactoryFactory(INHibernateConfigurator nHibernateConfigurator, INHibernateEnversConfigurator nHibernateEnversConfigurator) in ...\Installers\NHibernateInstaller.cs:line 81 
```

但如果我反过来做，我会得到错误：

```
Mesage: Object reference not set to an instance of an object.
StackTrace:
   at NHibernate.Validator.Cfg.ValidatorInitializer.ApplyValidatorToDDL(PersistentClass persistentClass, ValidatorEngine ve)
   at NHibernate.Validator.Cfg.ValidatorInitializer.Initialize(Configuration cfg, ValidatorEngine ve)
   at NHibernate.Validator.Cfg.ValidatorInitializer.Initialize(Configuration cfg)
   at ....NHibernateInstaller.SessionFactoryFactory(INHibernateConfigurator nHibernateConfigurator, INHibernateEnversConfigurator nHibernateEnversConfigurator) in ...\Installers\NHibernateInstaller.cs:line 83 
```

有没有人试过这个？？如何解决这个问题？

谢谢，哈里什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T23:09:01.700

我相信这是 NHV 的一个已知问题，[https:](https://nhibernate.jira.com/browse/NHV-117) //nhibernate.jira.com/browse/NHV-117 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:26:42.540

Envers 初始化应该总是发生在 Validator 之后。

另一个解决方法是，删除 set ApplyToDDL 为假...然后错误不会出现...

只是有一些twiks让它工作......

# jquery - 自动完成在视图中不起作用

> ID：15438316
> 
> 赞同：0
> 
> 时间：2013-03-15T17:12:42.610
> 
> 标签：jquery, asp.net-mvc

我刚刚在视图中添加了自动完成功能。它不起作用，当我将焦点设置在文本框上并键入一个字母时，什么也没有出现。我不确定我在这里做错了什么，但这里是代码：

**引用的 jQuery 文件：**

```
<script src="@Url.Content("~/Scripts/jquery-1.8.3.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui.js")"        type="text/javascript"></script> 
```

**看法：**

```
$(function () {
    $("#rootcause").autocomplete({
        source: function (request, response) {
            alert("x");
            $.ajax({
                url: "/ServiceEntry/FindRootCause",
                type: "POST",
                dataType: "json",
                data: {
                    searchText: request.searchText,
                    maxResult: 10
                },
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.FullName,
                            value: item.RootCauseName,
                            id: item.Id
                        }
                    }))
                }
            })
        },
        select: function (event, ui) {
            alert(ui.item 
                ? ("You picked '" + ui.item.label + 
                  "' with an ID of " + ui.item.id)
                : "Nothing selected, input was " + this.value
            );
        }
    });
}); 
```

```
<div class="bodyContent">
    <span class="leftContent">@Html.Label("Root Cause")</span>
    <span class="rightContent">
        <input id="rootcause" type="text" />
    </span>
</div> 
```

**控制器动作：**

```
[HttpPost]
public JsonResult FindRootCause(string searchText, int maxResult)
{
    var result = RunLog.Domain.Lists.GlobalList.GetRootCause(searchText, maxResult);
    return Json(result);
}

public static List<RunLog.Domain.Entities.RootCause> GetRootCause(string search, int maxResult)
{
    //List<String> list = new List<String>();

    EFDbContext db = new EFDbContext();

    var list = (from rc in db.RootCause
                where rc.RootCauseName.Contains(search)
                orderby rc.RootCauseName
                select rc).ToList();

    return list.Take(maxResult).ToList();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:15:56.080

尝试调试您是否正在执行操作或不使用这些

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script type="text/javascript">
    $(function () {
        $("#brandname").autocomplete({
            source: "/CAdmin/Stores/Search",
            minLength: 1,
            select: function (event, ui) {
                if (ui.item) {
                    alert(ui.item.value);
                    alert(ui.item.id);
                }
            }
        });
    });
</script> 
```

和控制器功能。

```
 public JsonResult Search(string term)
    {
        var suggestions = Uow.BrandRepository.All.Where(c => c.BrandName.Contains(term));
        var list = suggestions.Select(i => new { id = i.BrandID, value = i.BrandName }).Take(10).ToList();
        var json = Json(list, JsonRequestBehavior.AllowGet);
        return json;
    } 
```

# jquery - 第一个 jQuery 教程不起作用

> ID：15438322
> 
> 赞同：-2
> 
> 时间：2013-03-15T17:13:01.010
> 
> 标签：jquery

嗨，我尝试了 jquery.com 的第一个 jQuery 教程。我从那里复制了代码。html 链接有效，但带有 jquery 的警报窗口不起作用。到目前为止我尝试了什么：

*   检查是否启用了 javascript
*   删除了旧的 jquery 文件
*   将 google jquery api 作为脚本标签中的源（而不是 jqueryfile 的路径）
*   哭了
*   搜索语法错误（错别字不可能是因为我复制了代码片段）
*   下载萤火虫
*   用firefox和chrome试了代码

但到目前为止没有任何效果。提前致谢。

```
<!doctype html>
<html>
    <head>
       <meta charset="utf-8">
       <title>Demo</title>
    </head>
    <body>
       <a href="http://jquery.com/">jQuery</a>
       <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">       </script>    
       <script>
     // your code here 
        $( document ).ready(function() {
        $( "a" ).click(function( event ) {
          alert( "Thanks for visiting!" );
         });
         });
      </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-15T17:14:50.097

您的脚本源丢失并且 http 或 https

```
<!doctype html>
<html>
    <head>
       <meta charset="utf-8">
       <title>Demo</title>
    </head>
    <body>
       <a href="http://jquery.com/">jQuery</a>
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">       </script>    
       <script>
        $(document).ready(function() {
        $( "a" ).click(function() {
              alert( "Thanks for visiting!" );
         });
         });
      </script>
  </body>
</html> 
```

# java - 转义字符“|” 错误（Linux 命令）

> ID：15438324
> 
> 赞同：2
> 
> 时间：2013-03-15T17:13:03.507
> 
> 标签：java, linux, ffmpeg, escaping, character

我正在尝试用 Java 运行 Linux 命令。

这是命令：

> “ffmpeg -i rtmp://192.168.1.112/garage/stream26g -f mpegts -acodec libmp3lame -ar 48000 -ab 64000 -s 480x320 -r 30 -vcodec libx264 -b 544k -flags +loop -cmp +chroma -partitions + parti4x4+partp8x8+partb8x8 -subq 5 -trellis 2 -refs 0 -coder 0 -me_range 16 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 200k -maxrate 544k -bufsize 544k -rc_eq 'blurCplx^(1-qComp)' - qcomp 0.6 -qmin 10 -qmax 30 -qdiff 4 -level 30 -aspect 480:320 -g 30 -async 2 - | vod - 10 stream/stream26g/sample stream/stream26g/stream.m3u8 [http://www.tshizerbia。 com//视频/](http://www.tshizerbia.com//video/) 5";

但这给了我一个错误：

> 无法为 | 找到合适的输出格式

而且我不知道是什么问题

我用它来运行命令

```
Process p = Runtime.getRuntime().exec(command); 
```

如果我`\\|`输入字符串，则消息错误是：

> 无法为 \| 找到合适的输出格式

我怎样才能逃脱这个角色？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:17:21.790

尝试引用管道字符。我不认为它需要被 Java 转义。我认为它需要被shell引用。当然，您必须对双引号字符进行 Java 转义：

```
...-async 2 - \"|\" vod - 10 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:18:35.143

管道“|” 是特定于外壳的。尝试通过 shell 执行它，例如

```
String[] bashCommand = {"/bin/bash", "-c", command}; 
```

并改为执行此 bashCommand。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:15:36.070

```
Process p = Runtime.getRuntime().exec("ffmpeg -i rtmp://192.168.1.112/garage/stream26g -f mpegts -acodec libmp3lame -ar 48000 -ab 64000 -s 480x320 -r 30 -vcodec libx264 -b 544k -flags +loop -cmp +chroma -partitions +parti4x4+partp8x8+partb8x8 -subq 5 -trellis 2 -refs 0 -coder 0 -me_range 16 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 200k -maxrate 544k -bufsize 544k -rc_eq 'blurCplx^(1-qComp)' -qcomp 0.6 -qmin 10 -qmax 30 -qdiff 4 -level 30 -aspect 480:320 -g 30 -async 2 - \\| vod - 10 stream/stream26g/sample stream/stream26g/stream.m3u8 http://www.tshizerbia.com//video/ 5"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:16:02.607

尝试使用`\\|`. 适用于Java，但我不确定具体适用于您所要求的linux命令。

# jquery - CoffeeScript：选中复选框后，LI 上的 Line-Through

> ID：15438325
> 
> 赞同：1
> 
> 时间：2013-03-15T17:13:05.123
> 
> 标签：jquery, html, coffeescript

我将 CoffeeScript 用于 Rails 上的应用程序，现在在更改复选框后，我调用 jquery 函数以使用 ajax 更新其在数据库中的值，但如果选中了复选框，我还想插入一行。

HTML：

```
 <ul>
       <li class="side-bar-element">
           <input class="task" id="1" name="1" type="checkbox" value="Element 1"/>
           Element 1
       </li>
       <li class="side-bar-element">
           <input class="task" id="2" name="2" type="checkbox" value="Element 2"/>
           Element 2
       </li> 
       <li class="side-bar-element">
           <input class="task" id="3" name="3" type="checkbox" value="Element 3"/>
           Element 3
       </li> 
       <li class="side-bar-element">
           <input class="task" id="4" name="4" type="checkbox" value="Element 4"/>
           Element 4
       </li>  
    </ul> 
```

咖啡脚本：

```
$(".task").live "change", ->
  id = $(this).attr("id")
  isChecked = $(this).attr("checked")
  $.ajax
    url: "/update"
    type: "post"
    data: { id }

    success: ->
      alert "Updated Succesfully."
      if(isChecked)
        alert "For Testing: Is Checked."
        $(this).closest('li').css "text-decoration", "line-through"

    error: ->
      alert "Changes were not saved." 
```

我不明白为什么警报“已检查”工作正常，但它从不更新 CSS。我也尝试使用 parent(), prev() 但没有运气。任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:15:26.337

`this`成功回调里面不是你想的那样。

> 所有回调中的 this 引用是设置中传递给 $.ajax 的 context 选项中的对象；如果未指定上下文，则这是对 Ajax 设置本身的引用。

采用

```
$.ajax
    context: this,
    url: "/update"
    type: "post"
    data: { id }
    //..... 
```

`$.ajax`还有很多其他选项[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# python - Python PEP 8 文档字符串行长度

> ID：15438326
> 
> 赞同：19
> 
> 时间：2013-03-15T17:13:11.017
> 
> 标签：python, coding-style, pep8

我最近开始认为遵循 PEP 8 是一个好主意。我让我的编辑器显示 80 列标记，现在正尝试换行以适应它。我的问题是这个。在 PEP 8 中它说：

> 将所有行限制为最多 79 个字符。

说得通。

> [...] 对于流动的长文本块（文档字符串或注释），建议将长度限制为 72 个字符。

为什么是72？为什么 79 不适用于文档字符串或注释？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T17:16:23.150

我相信这是文本文件的后遗症：

> 在打字机时代结束时，大多数设计都面向 72 CPL，这是从每英寸 12 个字符的间距乘以 6 英寸得出的（例如，参见 IBM Selectric）。这将确保每个边距至少有 1 英寸，当时美国政府已在 8 1/2×11" 纸上标准化。

[资源](http://en.wikipedia.org/wiki/Characters_per_line)

> 许多纯文本文档仍然不符合传统的 72 CPL。

我认为这就像文档字符串经常在代码之外的上下文中使用一样，因此符合大多数纯文本文档用来尝试并尽可能保持一致的样式是有意义的。例如，`man`页面的文本通常被换行到 72 个字符。通过将文档字符串限制为 72 个字符，输出`help()`反映了这一点。

[这个关于程序员的问题](https://softwareengineering.stackexchange.com/questions/148677/why-is-80-characters-the-standard-limit-for-code-width)也可能是相关的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T17:16:16.510

文档字符串通常以其功能缩进，并以三引号开头和结尾：

```
def foo(bar, baz):
    """Frobnicate the foobars into baz

    Parameters are ham and spammed.

    """ 
```

剩下 79 - 4 - 3 = 72 个字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T17:16:18.007

行应该是 79 个字符的原因是它们可以适应 80 个字符宽的终端（显然它们仍然存在）。在文档字符串上使用 72 个字符的原因是，这意味着您在两边都有相等的填充（毕竟文档字符串是缩进的）并且仍然适合 80 个字符的宽度。

# sql - sql NOCOUNT 的语义

> ID：15438327
> 
> 赞同：1
> 
> 时间：2013-03-15T17:13:18.053
> 
> 标签：sql, sql-server, tsql, nocount

`NOCOUNT`这是关于语句的用法和语义的一个小问题。我已经看到它使用了几种不同的方式，我想知道实际需要什么。

我在 MSDN 上看到它带有尾随分号和 GO 语句，如下所示：

```
SET NOCOUNT ON;
GO 
```

我已经看到没有尾随分号：

```
SET NOCOUNT ON
GO 
```

我已经看到它没有 GO 语句

```
SET NOCOUNT ON 
```

我意识到这`GO`只是一个批次结束的信号，但是应该调用它以`NOCOUNT`使其生效吗？

分号的意义何在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:56:00.627

一个 ';' 是一个内存终止符，我一直认为 GO 语句是一个批处理终止符。

因此，如果您创建 DDL，例如创建 proc、视图、函数或其他对象，您可以执行以下操作：

创建 proc blah 为 .... GO

创建 proc blah2 为 .... GO

然后你可以有一个很好的创建脚本。如果您没有 GO，它会中断，因为它会说：“Create (thing) must be the first statement in a creation ....” 这意味着 SQL 认为您正在为两者执行单个操作。'GO' 说：“新范围，新对象”。所以它解决了这个问题。如果您查看 pubs 和 Northwind（旧的 MS 测试数据库）的创建脚本，我相信他们都在为单个“*.sql”文件使用批处理终止符。它使在单个文件中进行大量创建成为可能。

一个 ; 只会将内存终止到一个语句。大多数时候省略它们是可以的，但是你们中的一些 SQL 专家会知道你无法摆脱它的一个很大的地方是...... CTE！

是的，CTE 会立即对您大喊大叫，因为它以“with”开头，但您也可以使用带有“with”的 (nolock) 提示，因此它需要区分两个事务，因此您应该使用“;”。

例如：

```
Select * from table -- standard SQL no biggie 
```

或者

```
Select * from table 
Select * from table2  -- these are fine stacked and will run 
```

但...

```
Select * from table
with a as (select * from table2) select * from a 
```

将立即中断，因为它不知道 'with' 的上下文已更改为新语句。如果您一丝不苟，正确的 SQL 应该是这样的：

```
Set NoCount ON;  -- No thank you engine I don't need to see counts
Set Transaction Level Isolation Level Read Uncommitted;  -- Set me to dirty reads as default

Select 
    * 
from table
;

Select 
  * 
from table2
; 
```

SQL 引擎将其视为：

Set NoRead ON;-- 不，谢谢引擎，我不需要查看计数\nSet Transaction Level Isolation Level Read Uncommitted;\n-- 将我设置为默认脏读\n\nSelect\n*\nfrom table\n ;\n\n从表2中选择\n*\n\n;

所以它需要告诉它空白在哪里终止的人的一点帮助。否则它不是人类，不知道一个语句在哪里停止，另一个语句从哪里开始。

不管你做什么，如果你是为别人写的，并且根据明确的指导方针，我总是被告知要做';' 终结者使其成为正式的结束序列。

GO 是一个批处理终止器，但您可以使用它更改上下文，这对于切换数据库非常有用，例如：

使用数据库1 GO

从 TableOnDatabase1 中选择 *；

使用 Database2 GO

从 TableOnDatabase2 中选择 *；

另外为了节省空间，我做了一行，但实际上你应该在单独的行上执行主要的 sql 语法以及子语法，例如：

```
Select 
    ColumnA
,   ColumnB
,   count(ColumnC) as cnt
From table
Where thing happens
Group by 
    ColumnA
,   ColumnB
Having Count(ColumnC) > 1
Order by ColumnA 
```

编辑常见的现实世界示例：

```
set nocount on;

declare @Table table ( ints int);
declare @CursorInt int = 1;

while @CursorInt <= 100 
begin 
  insert into @Table values (@CursorInt)

  set @CursorInt += 1
End

-- wait a second engine you did not tell me what happened in the 'Messages' section?!
-- aw come on I want to see each transaction!

Set nocount off;

while @CursorInt <= 200 
begin 
  insert into @Table values (@CursorInt)

  set @CursorInt += 1
End

-- okay that is annoying I did not have to see 100: "(1 row(s) affected)" 
```

您可以在过程范围内根据需要打开和关闭带有内存终止符的“nocount”。当我想在我的过程中看到一些插入并忽略其他插入时，我总是这样做。在某些情况下，如果我想将它们传递出去，我会设置一个输出变量或一个简单的最终行数选择以返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:16:05.530

分号结束当前的 SQL 语句。

据我所知，在 SET NOCOUNT ON 之后不需要它。

你不应该需要'GO'来让 NOCOUNT 生效，尽管我不太确定。

# android - 用 ListActivity 看不到我的页脚

> ID：15438328
> 
> 赞同：0
> 
> 时间：2013-03-15T17:13:31.897
> 
> 标签：android, android-layout, footer

我正在尝试为我的自定义列表添加页脚，但仍然无法解决。我的目标只是在列表末尾添加一些按钮。我试过这个：

```
adapter = new GeneralRssAdapter(this,R.layout.titlesrss, data);
    LayoutInflater inflater = getLayoutInflater();
    lv.addFooterView( inflater.inflate( R.layout.footer_layout, null ), null, false);
    lv.setAdapter(adapter); 
```

但仍然看不到任何页脚。这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
  <LinearLayout
        android:id="@+id/linearLa"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/iconremove"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:layout_margin="5dip"
            android:scaleType="centerCrop"
            android:src="@drawable/delete"
            android:visibility="gone" />

        <ImageView
            android:id="@+id/iconfav"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:layout_margin="5dip"
            android:scaleType="centerCrop"
            android:src="@drawable/rss" />

        <TextView
            android:id="@+id/textView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal|center"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:textSize="20dip" />

    </LinearLayout>
  <ListView android:id="@+id/ListView01"
       android:layout_width="wrap_content" 
       android:layout_height="wrap_content"/>

     </RelativeLayout> 
```

和页脚：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <ImageView
            android:id="@+id/image"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1.20"
            android:src="@drawable/tutorialrss"
      />

</LinearLayout> 
```

希望你能帮我：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:44:10.000

尝试这个

```
 adapter = new GeneralRssAdapter(this,R.layout.titlesrss, data);
         LayoutInflater mInflater = (LayoutInflater)getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    final View footer = mInflater.inflate(R.layout.footer_layout, null);
choicelist.addFooterView(footer);
    choicelist.setAdapter(adapter); 
```

我已经编辑了这个 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <ImageView
            android:id="@+id/image"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/tutorialrss"
      />

</LinearLayout> 
```

对我来说，它的工作请检查一次。

![在此处输入图像描述](../Images/80408f6c33665f8a4762469ae6eb06fb.png)

```
adapter = new ListAdapter(this, data);
        ListView lvMain = (ListView) findViewById(R.id.list);
        LayoutInflater mInflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        final View footer = mInflater.inflate(R.layout.footer, null);
        lvMain.addFooterView(footer);
        lvMain.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:01:10.717

我所做的是设置我的页脚/页眉，`setContentView()`然后在适配器中使用`list`xml。我通常不喜欢单行答案，但这就是我所做的一切

# python - 如何序列化包含 TextChildAnchor 的 gtk.TextBuffer

> ID：15438332
> 
> 赞同：4
> 
> 时间：2013-03-15T17:13:41.470
> 
> 标签：python, textview, pygtk

我无法序列化包含锚点的 TextBuffer。我希望将文本序列化到每个锚点，跳过锚点并重复。但是缓冲区中存在锚点会阻止序列化，即使锚点不在序列化范围内。这是一个错误还是我做错了什么？或者，如果我删除它的锚点。有没有办法创建 TextBuffer 的副本？使用 copy.copy 我得到“TypeError：gobject.GObject 后代的实例是不可复制的”

这是一个有效的测试代码：

```
import gtk

window = gtk.Window()
window.set_default_size(300, 300)
window.connect("destroy", lambda w: gtk.main_quit())

vb = gtk.VBox()
window.add(vb)

tv1 = gtk.TextView()
tb1 = tv1.get_buffer()
vb.pack_start(tv1)

def on_bt1_clicked(button, ):
    """ Case1: We delete anchor... it is possible to serialize buffer range."""
    serialFormat = tb1.register_serialize_tagset()
    print("Button 1 was clicked")

    iter_at_anchor = tb1.get_iter_at_child_anchor(anchor1)
    iter_at_anchor.forward_char()
    tb1.backspace(iter=iter_at_anchor, interactive=True, default_editable=True)

    tb1.serialize(tb1, serialFormat, tb1.get_start_iter(), iter_at_anchor)
    print("serialize was sucessful")

bt1 = gtk.Button("click me 1")
bt1.connect("clicked", on_bt1_clicked)
txt = "Some not so random text."
iter=tb1.get_start_iter()
tb1.insert(iter=iter, text=txt)
iter.set_offset(char_offset=10)
anchor1 = tb1.create_child_anchor(iter)
tv1.add_child_at_anchor(bt1, anchor1)

tv2 = gtk.TextView()
tb2 = tv2.get_buffer()
vb.pack_start(tv2)

def on_bt2_clicked(button, ):
    """ Case2: We leave anchor but don't include it in range to be 
        serialized... it is not possible to serialize buffer range as process
        freezes."""
    serialFormat = tb2.register_serialize_tagset()
    print("Button 2 was clicked")

    iter_at_anchor = tb2.get_iter_at_child_anchor(anchor2)
    iter_at_anchor.backward_char()

    tb2.serialize(tb2, serialFormat, tb2.get_start_iter(), iter_at_anchor)
    print("serialize was sucessful") # does not reach here

bt2 = gtk.Button("click me 2")
bt2.connect("clicked", on_bt2_clicked)
txt = "Some not so random text."
iter=tb2.get_start_iter()
tb2.insert(iter=iter, text=txt)
iter.set_offset(char_offset=10)
anchor2 = tb2.create_child_anchor(iter)
tv2.add_child_at_anchor(bt2, anchor2)

window.show_all()
gtk.main() 
```

感谢您的任何意见

# php - 使用时间戳

> ID：15438333
> 
> 赞同：0
> 
> 时间：2013-03-15T17:13:41.543
> 
> 标签：php, codeigniter, timestamp

不确定如何格式化时间戳值，因此它现在显示为“2013 年 2 月 15 日下午 12:34”，它现在只是显示“2013-03-15 12:04:11”。

我已经阅读了大量帖子，但它们似乎都对我的情况没有帮助或向我展示正确的答案以及如何实施它。任何帮助将非常感激。

这是我的看法

```
<section class="noteinfo">
      <p><span>Note:</span>&nbsp; <?php echo $row->folderName; ?></p> 
      <p><span>Created:</span> &nbsp;<?php echo $row->time; ?></p>
</section> 
```

这是我的控制器代码

```
function create() {
    if(array_key_exists('createFolder',$_POST)) {
        $data = array(
          'folderName' => $this->input->post('folderName')
          // 'time' => date('Y-m-d H:i:s',now())
        );
        $data = str_replace(array(' ', '.', '?', '*', '%', '/'), '_', $data);
        $datestring = "Year: %Y Month: %m Day: %d - %h:%i %a";
        $time = time();
        // $data = str_replace(' ', '_', $data);
        $this->index_model->createFolder($data, $datestring, $time);
     }
     $this->foldercreated();
} 
```

这是我的模型代码

```
function createFolder($data) {
    $this->db->where('time', 'time');
    $this->db->where('folderName', 'folderName');
    $this->db->insert('senior', $data);
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:17:47.120

使用[date()](http://www.php.net/manual/en/function.date.php)和 strtotime()

2013 年 2 月 15 日下午 12:34 格式为 'F j, Y g:ia'

```
<p><span>Created:</span> &nbsp;<?php echo date('F j, Y g:ia', strtotime($row->time)); ?></p> 
```

# google-apps-script - 使用 Google Apps 脚本连接 Twilio

> ID：15438334
> 
> 赞同：1
> 
> 时间：2013-03-15T17:13:41.750
> 
> 标签：google-apps-script, twilio

我遵循 GAS 团队的本教程。 [使用 Twilio 和 Apps 脚本向 Google Apps 添加语音和 SMS](https://developers.google.com/live/shows/11404657/) 但是，当我[根据 Twilio Docs 修改 TwiML](https://www.twilio.com/docs/api/twiml)以在超时时添加`<Redirect>`时，我收到“应用程序错误”。

```
<Response>
   <Gather action="https://script.google.com/macros/s/SCRIPT_ID/exec" numDigits="1" timeout="10">
     <Say>Welcome to Yard Stars</Say>
     <Say>To schedule a Sprinkler Service visit, press 1.</Say>
     <Say>To discuss a new Sprinkler System, press 2.</Say>
     <Say>To speak with someone in accounting, press 3.</Say>
   </Gather>
   <Say>Sorry, I didn't get your response.</Say>
   <Redirect method="GET">https://script.google.com/macros/s/SCRIPT_ID/exec</Redirect>
</Response> 
```

我注意到的一件事是 GAS 正在发回 Twilio 不支持的“传输编码块”。然而，它似乎只影响重定向调用。
知道如何对 Apps 脚本进行重定向调用的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:11:59.883

我自己回答了......这个问题原来是 Twilio 不支持“分块”请求。该错误是由 Twilio 截断我的请求引起的（因此认为 XML 由于缺少结束标签而无效）我通过他们的支持页面联系了 Twilio 支持，他们能够给我一个解决方法（他们指出了我的应用程序到不同的代理服务器）。

# php - Web 服务创建 AWS

> ID：15438341
> 
> 赞同：0
> 
> 时间：2013-03-15T17:14:05.970
> 
> 标签：php, json, amazon-web-services

所以我正在尝试 AWS（亚马逊网络服务），我想出了如何将我的数据库及其信息放在他们的服务器上，但是我不确定我将把我的 php web 服务放在哪里，它会给出一个 JSON 响应。是否有教程或有人可以告诉我如何完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:53:21.530

假设您要使用 LAMP 堆栈。我会在您的 EC2 实例上安装 LAMP，或者找到已安装 LAMP 的社区映像并使用该映像创建实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T11:29:51.940

您可以从 Amazon [Lightsail](https://aws.amazon.com/de/lightsail/)开始，它是一种适合初学者的应用程序部署服务。

或者，您可以将您的应用程序放在 Elastic Beanstalk 中，并为您的数据库使用其内置的 RDS 功能。在附件中，您可以看到[部署 PHP 应用程序](https://docs.aws.amazon.com/en_en/elasticbeanstalk/latest/dg/create_deploy_PHP_eb.html)的文档。

# linux - Net::SSH::Perl 不工作但已更新

> ID：15438342
> 
> 赞同：0
> 
> 时间：2013-03-15T17:14:07.820
> 
> 标签：linux, perl, ssh, cpan

当我尝试运行 SSH 登录时，我不断收到此信息

> 无法在 @INC 中找到 Net/SSH/Perl.pm（@INC 包含：/usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi /usr/lib/perl5/site_perl/5.8\. 8 /usr/lib/perl5/site_perl /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl / usr/lib/perl5/5.8.8/i386-linux-thread-multi /usr/lib/perl5/5.8.8 .) 在 /scripts/test/ssh 第 2 行。 BEGIN 失败——编译在 /scripts/test 中止/ssh 第 2 行。

但是 perl 说它是最新的

```
[root@SCRIPTS /]# cpanm Net::SSH::Perl
Net::SSH::Perl is up to date. (1.35)
[root@SCRIPTS /]# 
```

该模块说它是最新的，所以我不确定问题出在哪里脚本开始如下：

```
#!/usr/bin/perl
use Net::SSH::Perl; 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-05T21:47:29.703

`cpanm`使用不同的 perl 也是如此。也许你有一个`/usr/local/bin/perl`which cpanm 使用。

尝试`/usr/bin/perl -S cpanm`为您的系统 5.8.8 安装模块

尝试的提示`perldoc -l Net::SSH::Perl`也应该使用`/usr/bin/perl -S perldoc -l Net::SSH::Perl`，因为 perldoc 也可能使用不同的 perl。

# java - 将单元测试嵌套在它测试的类中而不是另一个（外部）类中的目的是什么？

> ID：15438345
> 
> 赞同：1
> 
> 时间：2013-03-15T17:14:23.470
> 
> 标签：java, unit-testing, junit

我一直在查看[一个特定的开源库](https://github.com/Netflix/Hystrix/blob/master/hystrix-core/src/main/java/com/netflix/hystrix/HystrixCommand.java#L1830)，其中所有单元测试都定义为它们测试的类中的静态嵌套类，例如：

```
public class Foo {

    public int bar() { ... }

    public static class UnitTest {
        @Test
        public void testBar() { ... }
    }
} 
```

我以前从未见过这样做的项目或 Java 代码库，我真的很好奇它背后的想法。

*   `FooTest`与在另一个源文件夹中拥有一个单独的类相比，这种模式有什么优势`src/test/java`吗？

*   这是使用[Gradle](http://www.gradle.org)作为构建工具的项目惯例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:52:10.207

正如 Jon Skeet 建议的那样，我[在相关项目的文档中](https://github.com/Netflix/Hystrix/wiki/FAQ)找到了答案：

> Hystrix 将其所有单元测试作为内部类而不是在单独的 /test/ 文件夹中。
> 
> 为什么？
> 
> *   低摩擦
> *   语境
> *   封装
> *   重构
> *   自我记录
> 
> 关于推理的更多信息可以在这篇博客文章中找到：[JUnit Tests as Inner Classes](http://benjchristensen.com/2011/10/23/junit-tests-as-inner-classes/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:55:32.043

除了访问私有成员之外，将单元测试编写为嵌套内部类似乎没有任何优势。我能想到的缺点是：

*   它使您的 Java 类非常庞大且笨拙。
*   最终的 jar 文件将包含测试代码，这在生产运行时可能是不必要的，并且通常不是一个好的做法（将生产代码与测试代码分开）。

此外，根据[Java 插件](http://www.gradle.org/docs/current/userguide/java_plugin.html)的 Gradle 文档，它建议将测试保存在 src/test/java 中，所以我认为这根本不是 Gradle 特定的约定。

# bash - 查找/匹配变量文件名并将文件移动到相应目录

> ID：15438347
> 
> 赞同：0
> 
> 时间：2013-03-15T17:14:34.233
> 
> 标签：bash, variables, find, filenames, mv

我从来***没有***来过问“做我的功课”，但我真的不知道从哪里开始。

在使用 JSignPdf 自动签名后，我有一堆文档被转储到目录中（`--output-directory`选项似乎无法输出与输入相同的内容）：

```
/some/dir/Signed/PDF1_signed.pdf
/some/dir/Signed/PDF2_signed.pdf
/some/dir/Signed/PDF2_signed.pdf 
```

然后我想找到他们的来源/未签名的同行：

```
/some/dir/with/docs/PDF1.pdf
/some/dir/where/is/PDF2.pdf
/some/dir/why/this/PDF3.pdf 
```

...并将签名的 PDF 移动到相应的目录中。

我使用命令来查找各种目录中的所有 PDF：

```
find . -name '*.pdf' -exec sh -c 'exec java -jar jsignpdf-1.4.3/JSignPdf.jar ... ' sh {} + 
```

...而且我尝试过将`find`输出设为变量，然后使用 IF THEN 匹配但没有成功。我需要将`find`输出制成多个变量吗？我迷路了:(

我想在某个 shell 中完成这项工作，但如果那里有 Perl 爱好者或其他任何东西，我会非常高兴有另一个*可移植*的解决方案。

我试图打破它，但仍然不明白如何完成它......

*   查找匹配 VarName 而没有 _signed 的文件
*   将具有匹配名称的 _signed 文件移动到找到的文件的目录

感谢您的任何帮助/指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:39:04.793

使用`while`循环读取找到的每个文件`find`并将其移动到正确的位置：

```
find /some/dir -name "*.pdf" ! -name "*_signed.pdf" -print0 | while IFS= read -d '' -r file
do
  f="${file##*/}"
  mv "/some/dir/Signed/${f%.*}_signed.pdf" "${file%/*}"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:37:18.947

我有一个类似的问题，我一直在研究。由于转换`/some/dir/where/is/PDF2.pdf`为所需的路径操作`/some/dir/Signed/PDF2_signed.pdf`相当简单，但比在简单的单行中完成的要复杂得多，因此我一直在使用`find`定位第一组，并使用一个简单的循环一次处理一个。你确实提到了作业，所以我尽量不给你太多代码。

```
find /dir/containing/unsigned -name '*.pdf' -print0 | while IFS= read -d path; do
    fetch_signed_version "$path"
done 
```

您编写的 shell 函数在哪里`fetch_signed_version`，给定一个路径，例如`/some/dir/where/is/PDF2.pdf`，提取目录 ( `/some/dir/where/is`)，计算签名 PDF 的名称 ( `PDF2_signed.pdf`)，然后执行必要的移动 ( `mv /some/dir/Signed/$signed_pdf /some/dir/where/is`)

* * *

`fetch_signed_version`其实很简单：

```
fetch_signed_version () {
   dir=${1%/*}
   fname=${1##*/}
   signed_name=${fname%.pdf}_signed.pdf
   mv "/some/dir/Signed/$signed_name" "$dir"
} 
```

# windows - Haskell：http-wget 在 Windows 中挂起我的程序

> ID：15438353
> 
> 赞同：3
> 
> 时间：2013-03-15T17:14:50.833
> 
> 标签：windows, haskell, cygwin, wget

我已经在两台电脑上试过了。这是我的步骤：

1.  在cygwin上安装wget
2.  `cabal install http-wget`
3.  升级我的 PATH 环境变量以包含 C:\cygwin\bin
4.  打开 WinGHCi 并输入：

从提示：

```
GHCi, version 7.4.2: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Prelude> :m + Network.HTTP.Wget
Prelude Network.HTTP.Wget> wget "http://www.google.com" [] []
Loading package bytestring-0.9.2.1 ... linking ... done.
Loading package Win32-2.2.2.0 ... linking ... done.
Loading package filepath-1.3.0.0 ... linking ... done.
Loading package old-locale-1.0.0.4 ... linking ... done.
Loading package old-time-1.1.0.0 ... linking ... done.
Loading package directory-1.1.0.2 ... linking ... done.
Loading package process-1.1.0.1 ... linking ... done.
Loading package failure-0.1.2 ... linking ... done.
Loading package transformers-0.2.2.0 ... linking ... done.
Loading package http-wget-0.6.2.3 ... linking ... done. 
```

在这条线之后没有其他任何事情发生。命令未完成。它只是永远挂起。我对 Haskell 很陌生，不知道如何调试这个问题。

```
$ ghc --version
The Glorious Glasgow Haskell Compilation System, version 7.4.2 
```

我已经在 cygwin 提示符下尝试了 wget 命令，它按预期工作。

这适用于 WinGHCi：

```
let getGoogle = do (_, Just hout, _, _) <- createProcess (proc "wget" ["-q", "www.google.com", "-O", "-"]){ std_out = CreatePipe }; hGetContents hout 
```

我是从一位名叫 mcstar 的绅士那里从 IRC 那里得到的

# python - 获取列表索引超出范围，python生成器误解

> ID：15438356
> 
> 赞同：0
> 
> 时间：2013-03-15T17:15:08.487
> 
> 标签：python, python-2.7

鉴于这种：

```
class DataFromBls:
    """this is a spitout of data in BLS dump"""

    def __init__(self, dataSource, yearOfData, inflationAdjusted):
        self.dataSource = dataSource
        self.yearOfData = yearOfData
        self.inflationAdjusted = inflationAdjusted

    def printData(self):
        for value in self.dataSource:
            yield self.dataSource[value] 
```

那么假设`x = DataFromBls([2, 3, 5, 6, 6, 7], 2010, "yes")`

然后假设将以下内容提供给解释器，

```
for value in x.printData():
    print value 
```

然后我让解释器吐出 5、6、7，然后给我一个 Traceback IndexError:list index out of range

我不明白它是如何超出范围的，或者为什么只有 5 到 7 出

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:20:45.943

下一个元素是`6`，并且`self.dataSource[6]`超出范围（最后一个元素是`self.dataSource[5]`）。

你的意思是写：

```
def printData(self):
    for value in self.dataSource:
        yield value 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:23:44.987

让我们仔细看看以下循环的每次迭代：

```
for value in self.dataSource:
    yield self.dataSource[value] 
```

假设这`self.dataSource`是列表`[2, 3, 5, 6, 6, 7]`：

*   第一次迭代：  `value`将是`2`，    `self.dataSource[2]`将是第三个元素，或`5`
*   第二次迭代：`value`将是`3`，    `self.dataSource[3]`将是第四个元素，或`6`
*   第 3 次迭代：  `value`将是`5`，    `self.dataSource[5]`将是第 6 个元素，或`7`
*   第 4 次迭代：  `value`will be `6`，    `self.dataSource[6]`导致`IndexError`

您的问题是您直接遍历列表中的元素，而不是索引。您想要执行以下操作之一：

```
for value in self.dataSource:
    yield value 
```

或者...

```
for i in range(len(self.dataSource)):
    yield self.dataSource[i] 
```

显然，第一种方法是首选，第二种方法只是说明了如果您需要的话，如何获得索引。

请注意，在 Python 3.3 及更高版本上，您可以使用`yield from self.dataSource`来获得与`for value in self.dataSource: yield value`.

# java - java嵌套JSONArray

> ID：15438358
> 
> 赞同：0
> 
> 时间：2013-03-15T17:15:12.720
> 
> 标签：java, json, parsing, arrays

我想知道是否可以使用 java 检查某些 jsonArray 中是否存在某些键。例如：假设我有这个 json 字符串：

```
{'abc':'hello','xyz':[{'name':'Moses'}]} 
```

让我们假设这个数组存储在 Type 的 jsnArray 中`JSONArray`。我想检查 jsnArray 中是否存在“abc”键，如果存在，我应该得到`true`，否则我应该得到`false`（在“abc”的情况下，我应该得到真）。思卡斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:40:58.973

你发布的是一个`JSONObject`，里面有一个`JSONArray`。在此示例中，您拥有的唯一数组是 array `'xyz'`，它只包含一个元素。

JSONArray 示例如下：

```
{
 'jArray':
          [
           {'hello':'world'},
           {'name':'Moses'},
           ...
           {'thisIs':'theLast'}
          ]
} 
```

您可以使用以下函数测试是否包含在给定（类似于上面示例的情况）中的被调用包含键“hello” `JSONArray`：`jArray``JSONObject`

```
boolean containsKey(JSONObject myJsonObject, String key) {
    boolean containsHelloKey = false;
    try {
        JSONArray arr = myJsonObject.getJSONArray("jArray");
        for(int i=0; i<arr.length(); ++i) {
            if(arr.getJSONObject(i).get(key) != null) {
               containsHelloKey = true;
               break;
            }
        }
    } catch (JSONException e) {}

    return containsHelloKey;
} 
```

并以这种方式调用：

```
containsKey(myJsonObject, "hello"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:31:13.573

如果您在 Java 中使用 JSON 智能库来解析 JSon 字符串 -

您可以使用以下代码片段解析 JSon 数组 -

喜欢 -

```
JSONObject resultsJSONObject = (JSONObject) JSONValue.parse(<<Fetched JSon String>>);
JSONArray dataJSon = (JSONArray) resultsJSONObject.get("data");
JSONObject[] updates = dataJSon.toArray(new JSONObject[dataJSon.size()]);

for (JSONObject update : updates) {
            String message_id = (String) update.get("message_id");
            Integer author_id = (Integer) update.get("author_id");
            Integer createdTime = (Integer) update.get("created_time");
            //Do your own processing...
            //Here you can check null value or not..
} 
```

您可以在 - [https://code.google.com/p/json-smart/获得更多信息](https://code.google.com/p/json-smart/)

希望这可以帮助你...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:24:30.057

JSON 数组没有键值对，JSON 对象有。

如果将其存储为 json 对象，则可以使用以下方法检查密钥：http: [//www.json.org/javadoc/org/json/JSONObject.html#has(java.lang.String)](http://www.json.org/javadoc/org/json/JSONObject.html#has(java.lang.String))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T17:22:56.713

由于开括号和右括号，使用正则表达式将不起作用。

您可以使用 JSON 库（如[google-gson](https://code.google.com/p/google-gson/)）将您的 JSON 数组转换为 java 数组，然后对其进行处理。

# gwt - 在 GWT 应用程序中更改 UiBinder 布局中的小部件顺序

> ID：15438359
> 
> 赞同：0
> 
> 时间：2013-03-15T17:15:16.840
> 
> 标签：gwt, uibinder

我有一个用 UiBinder 声明的小部件。此小部件的实例广泛用于构建不同视图的应用程序中。我的任务是实现一个新视图，其中几个面板应该重新排序。

```
<g:FlowPanel ui:field="text" styleName="...">
...
<g:FlowPanel>

<g:FlowPanel ui:field="images" styleName="...">
...
</g:FlowPanel> 
```

对于给定的示例结构，我需要将图像放在文本顶部以获取新的自定义视图。我不想复制小部件的代码。而且我不想用虚拟容器替换面板，然后在代码中对该容器进行添加，因为样式已经在这里并且其他代码依赖于这种结构。

我现在要解决的问题是将这两个面板与容器 FlowPanel 包装在 UiBinder 中（到目前为止它是无害的），并根据上下文在代码中执行以下操作：

```
if (isSwapRequired) {
   images.removeFromParent();
   container.insert(images, 0);
} 
```

问题是 - 是否有更优雅的重新排序方式，或者给定的方法足够好？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:41:24.027

我建议您使用一些视图实现，并且演示者通过接口与它们进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:48:03.513

最终使用现有的简单解决方案。

# core-data - 核心数据只读线程上的托管对象不将结果返回给委托

> ID：15438368
> 
> 赞同：0
> 
> 时间：2013-03-15T17:15:56.960
> 
> 标签：core-data, ios6

我需要在 NSOperation 中使用一些核心数据托管对象。问题是核心数据不是线程安全的，显然无法从新线程加载对象。有人知道这方面的好教程吗？我需要只读对象......所以线程不会以任何方式修改它们。在后台使用这些对象时，可能会在主线程上添加一些其他不相关的实体，但根本不需要修改后台实体。

嗯似乎我解决了后台运行问题，但现在问题是没有返回给代表......为什么？如果我在 nslog 中显示所有结果，但对委托的调用永远不会发生

这是代码：

```
-(void)evaluateFormula:(Formula *)frm runNo:(NSUInteger)runCount{
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [queue setMaxConcurrentOperationCount:2];

    NSManagedObjectID *formulaId = frm.objectID;

    for (int i = 0; i < runCount; i++) {
        NSInvocationOperation * op = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(runFormula:) object:formulaId];
        [queue addOperation:op];
    }

}

-(void)runFormula:(NSManagedObjectID *)fId {

    NSManagedObjectContext *thredContext =[[NSManagedObjectContext alloc] init];
    NSPersistentStoreCoordinator *coord = (NSPersistentStoreCoordinator *)[(PSAppDelegate *)[[UIApplication sharedApplication] delegate] persistentStoreCoordinator];
    [thredContext setPersistentStoreCoordinator:coord];
    Formula *f = (Formula *)[thredContext objectWithID:fId];

        NSDictionary *vars = [self evaluateVariables:[f.hasVariables allObjects]];
        NSMutableString *formula = [NSMutableString stringWithString:f.formula];
        for (NSString *var in [vars allKeys]) {
            NSNumber *value =[vars objectForKey:var];
            [formula replaceOccurrencesOfString:var withString:[value stringValue] options:NSCaseInsensitiveSearch range:NSMakeRange(0, [formula length])];
        }
        //parse formula
        NSNumber *result = [formula numberByEvaluatingString];
    // NSLog(@" formula %@ result : %d",formula,[result intValue]);
        //aggregate results
         [self performSelectorOnMainThread:@selector(aggregate:) withObject:result waitUntilDone:YES]; // the delegate doesn't get called ... 

}

-(void)aggregate:(NSNumber *)res {
     [self.delegate didReceiveResult:res];
} 
```

# jquery - li.click 不适用于动态创建的元素

> ID：15438370
> 
> 赞同：1
> 
> 时间：2013-03-15T17:16:01.590
> 
> 标签：jquery

我正在动态创建新的列表元素。单击这些元素时，我想执行代码。该事件`$("li").click()`仅针对我的默认列表项触发，`<li>I am a default list element</li>`但不会针对任何新创建的列表项触发。请在下面查看我的代码：

```
<script type="text/JavaScript">
$(document).ready(function() {
    console.log('document.ready callback');

    $("input#input2").click( function() {
        console.log('input#input2.click: ' + $("input#input1").val() + ' added to list');
        $("ul").append('<li>'+$("input#input1").val()+'</li>');
    });

    $("li").click( function() {
        console.log('li.click: ' +$(this).text());
    });

    // Info
    // .on('click', function()
    // .live('click', function()
    // did not solve this problem
});<script><html>
<body>
    Enter some stuff: <input type="text" id="input1" value="stuff">
    <br>
    <input type="submit" id="input2" value="Submit stuff to List">
    <p>stuff list!</p>
    <ul>
        <li>I am a default list element</li>
    </ul>
</body> 
```

[我在这里](https://stackoverflow.com/questions/6658752/jquery-click-event-doesnt-work-on-dynamically-generated-elements#_=_)发现了一个类似的问题，但不幸的是，这并没有解决我目前的情况。

谢谢你们！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:17:14.307

用于动态创建元素[**的**](http://api.jquery.com/on/)绑定事件，而不是单击并将事件委托给父元素或文档。[您可以在此处](http://api.jquery.com/on/)阅读更多信息。

```
$(document).on("click", "li", function() {
    console.log('li.click: ' +$(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:19:26.737

将其委托给最近的静态父级（存在于文档中）比使用`document`（性能方面）更好

试试这个

```
$("ul").on("click", "li", function() {
  console.log('li.click: ' +$(this).text());
}); 
```

[您可以在此处](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)阅读有关`on()`活动的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:18:47.147

click 事件仅绑定到`$("li")`调用时选择的元素。尝试将单击事件绑定器添加到您用于添加元素的脚本中，以便在每次添加元素时绑定新的单击行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:19:17.527

该`live`方法可以工作，但它被使用该`on`方法来创建委托所取代。您需要提供一个父元素来应用委托，以及一个选择器来过滤掉应该触发事件的元素：

```
$("ul").on("click", "li", function() { 
```

# sql - Oracle SQL - 使用下一条记录的内容更新数据库字段

> ID：15438382
> 
> 赞同：0
> 
> 时间：2013-03-15T17:16:19.643
> 
> 标签：sql, oracle, rownum

我正在尝试匿名化客户表的“名称”字段。我想用下一条记录中客户的名称替换每条记录的“名称”。（我知道：这不是真正的匿名，但在那之后'name'和'customerId'将不匹配。这对我的目的来说已经足够了）

我试过这个，但我得到一个 ORA-01747 错误。

```
UPDATE Customer A
   SET NAME =
          (SELECT NAME
             FROM Customer 
            WHERE ROWNUM = A.ROWNUM + 1) 
```

怎么了？如何使用表中下一个“名称”字段的内容更新每个“名称”字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:23:47.300

`ROWNUM`是一个伪列，它不与数据一起存储，它是结果集的一部分。此外，通常关系数据库没有行顺序的概念。

我们可能会想出一个笨拙的方法来做到这一点，但相反，你不能做一些类似的事情：

```
UPDATE CUSTOMER SET NAME = DBMS_RANDOM.STRING('a', 10); 
```

在 Oracle 中，这会使用 10 个字母数字的随机字符串更新每个客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:27:29.027

您需要使用 LEAD()。

根据“a_horse_with_no_name”评论更正：LEAD(sal, 1, sal)

```
UPDATE emp_test a 
   SET sal = 
 (
  SELECT LEAD(sal, 1, sal) OVER (ORDER BY sal) AS sal_next
    FROM scott.emp b
   WHERE a.empno = b.empno
 )
 / 
```

与 ename 相同：

```
SELECT empno, ename, job, sal,
       LEAD(ename, 1, ename) OVER (ORDER BY ename) AS name_next
  FROM scott.emp
 /

 EMPNO    ENAME    JOB        SAL    NAME_NEXT
 --------------------------------------------
 7876    ADAMS    CLERK       1100    ALLEN
 7499    ALLEN    SALESMAN    1600    BLAKE
 7698    BLAKE    MANAGER     2850    CLARK
 7782    CLARK    MANAGER     2450    FORD
 ....
 7844    TURNER   SALESMAN    1500    WARD
 7521    WARD     SALESMAN    1250    WARD 
```

这将不起作用：

```
SELECT * FROM scott.emp
  WHERE ROWNUM = 5
/ 
```

但这将：

```
SELECT * FROM scott.emp
 WHERE ROWNUM <= 5
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:52:29.977

全部混合！！！

```
merge into Customer dest
using (
   select r, name from
   (select name, row_number() over (order by dbms_random.value) n from Customer)
   join (select rowid r, rownum n from Customer) using(n) 
) src
on (dest.rowid = src.r)
when matched then update set
   dest.name = src.name; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-15T17:24:41.450

这可能有效，但未经测试。

```
UPDATE Customer A
   SET NAME =
          (SELECT NAME
             FROM Customer 
            WHERE ROWNUM = (SELECT (A.ROWNUM + 1)) 
```

# c - C 中的内联 ASM，使用 MinGW/GCC 编译，使用 "-masm=intel": "undefined reference"

> ID：15438383
> 
> 赞同：4
> 
> 时间：2013-03-15T17:16:20.550
> 
> 标签：c, gcc, mingw32

我一直在寻找使用内联 ASM 的示例，并且看到了一些不同的方法。

我在编译时使用了 -masm=intel 选项。据我了解，使用此选项时，您可以像使用 intel 语法一样编写内联 ASM。

我还看到人们使用“.intel_syntax”的方法

当我编译时，我收到以下消息。

```
 i586-mingw32msvc-gcc -masm=intel -o KDOS.exe KDOS.c
    /tmp/ccVIXhRF.o:KDOS.c:(.text+0x5f): undefined reference to `address'
    /tmp/ccVIXhRF.o:KDOS.c:(.text+0x6a): undefined reference to `ipAddr'
    /tmp/ccVIXhRF.o:KDOS.c:(.text+0x79): undefined reference to `csAddr'
    /tmp/ccVIXhRF.o:KDOS.c:(.text+0x11d): undefined reference to `address'
    collect2: ld returned 1 exit status 
```

我四处寻找解决方案，但似乎找不到。我看到线程说你不能将 C 变量传递到内联 ASM，但我也看到一些东西说有解决方法。它们并不完全适用于我正在做的事情，所以我不太确定该怎么做。对不起，如果这是一个明显的答案，但这是我第一次使用内联 ASM 更不用说转换语法了。

这是我的代码。我正在阅读一本书，这是其中的一些示例代码。书中没有用 gcc 编译，所以这就是我需要转换为 intel 语法的原因，因为我显然需要它在 windows 上运行。这是我修改后的代码版本：

```
// KDOS.c
// Chapter 2

#include<stdio.h>

#define WORD unsigned short

#define IDT_001_ADDR    0        //start address of first IVT vector
#define IDT_255_ADDR    1020     //start address of last IVT vector
#define IDT_VECTOR_SZ   4        //size of each IVT Vector (in bytes)

#define BP    __asm{ int 0x3 }    //break point

void main()
{
    WORD csAddr;                 //Code segment of given interrupt
    WORD ipAddr;                 //Starting IP for given interrupt
    short address;               //address in memory (0-1020)
    WORD vector;                 //IVT entry ID (i.e., 0..255)
    char dummy;                  //strictly to help pause program execution

    vector = 0x0;

    printf("\n---Dumping IVT from bottom up---\n");
    printf("Vector\tAddress\t\n");

    for
     (
        address=IDT_001_ADDR;
        address<=IDT_255_ADDR;
        address=address+IDT_VECTOR_SZ,vector++
    )
    {
        printf("%03d\t%08p\t",vector,address);

        //IVT starts at bottom of memory, so CS is alway 0x0

        __asm__
        (
           ".intel_syntax;"
           "PUSH ES;"
           "MOV AX, 0;"
           "MOV ES,AX;"
           "MOV BX,address;"
           "MOV AX,ES:[BX];"
           "MOV ipAddr,AX;"
           "INC BX;"
           "INC BX;"
           "MOV AX,ES:[BX];"
           "MOV csAddr,AX;"
           "POP ES;"
    );
        printf("[CS:IP]=[%04X,%04X]\n",csAddr,ipAddr);
    }

    printf("press [ENTER] key to continue:");
    scanf("%c",&dummy);

    printf("\n---Overwrite IVT from top down---\n");

    /*
        Program will die somwhere around 0x4*
        Note: can get same results via DOS debug.exe -e command
    */

    for
    (
        address=IDT_255_ADDR;
        address>=IDT_001_ADDR;
        address=address-IDT_VECTOR_SZ,vector--
    )
    {
        printf("Nulling %03d\t%08p\n",vector,address);
         __asm__
        (
        ".intel_syntax;"
            "PUSH ES;"
            "MOV AX,0;"
            "MOV ES,AX;"
            "MOV BX,address;"
            "MOV ES:[BX],AX;"
            "INC BX;"
            "INC BX;"
            "MOV ES:[BX],AX;"
            "POP ES;"
    );
    }
    return;
}/*end main()------------------------------------------------------------*/ 
```

任何帮助将不胜感激。如果这是显而易见的事情，我再次道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T08:53:49.393

实际上，您可以将`C`参数传递给 inline `asm`。但是您必须在 asm 代码部分之后定义它。

在您的情况下，这样的事情可能会起作用（您应该添加`-masm=intel`到`gcc`'s 命令行）：

```
asm(
    ".intel_syntax noprefix;\n\t"
    ...
    "MOV BX,%[address];\n\t"
    ...
    ".intel_syntax prefix;\n\t"
    :: [address] "m" address, ...
    : "AX", "BX", /* all changed registers to inform compiler to save them if needed */
); 
```

[请参阅类似问题](https://stackoverflow.com/questions/16354348/how-to-pass-variables-to-intel-format-inline-asm-code-compiled-with-gcc)中的示例。

# iphone - 应用在后台运行时访问和保存位置信息 - iOS

> ID：15438392
> 
> 赞同：1
> 
> 时间：2013-03-15T17:16:50.577
> 
> 标签：iphone, ios, gps, location

所以我的问题是，在后台运行的应用程序是否可以访问设备的位置信息并将其保存在堆中或将数据发送到服务器？我知道它必须与委托做一些事情，但我不确定当应用程序在后台时可以完成这种复杂的过程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:59:18.577

是的你可以！

在苹果的 Location Awareness Guide 中描述了需要在后台接收 GPS 的应用程序必须设置一个特定的值：

`location`在文件的`UIBackgroundModes`数组中设置键`Info.plist`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:29:14.533

是的。你能行的。

通过在 info.plist 文件中设置正确的键值，您的应用程序即使在后台也能够获取位置。

使用 ASIHttpRequest ( [Link](http://allseeing-i.com/ASIHTTPRequest/) )，您可以使用 Web 服务上传数据。为此，创建 的对象`ASIHTTPRequest`并将 的值保持 `shouldContinueWhenAppEntersBackground`为 TRUE。

# bash - 如何在bash脚本中传递多个参数以提示？

> ID：15438398
> 
> 赞同：1
> 
> 时间：2013-03-15T17:17:08.420
> 
> 标签：bash, unix

在我的 bash 脚本中，我正在调用一个命令，该命令提示来自 STDin 的 2 个答案（连续）。我如何输入两者的答案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:25:42.047

使用heredoc，如下所示：

```
$ myscript.sh << EOF
answer1
answer2
EOF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:27:34.020

只需将输入分成两行。例如，

```
cat file.txt | your_command 
```

哪里`file.txt`有

```
input1
input2 
```

# ios - XCode 标头搜索路径

> ID：15438400
> 
> 赞同：0
> 
> 时间：2013-03-15T17:17:13.900
> 
> 标签：ios, xcode, zxing

我正在尝试在我的 ios 项目中使用名为 ZXingObjC 的第三方库。通过将库的 .xcodeproj 文件拖到我的项目中，我已将库添加到我的项目中。当我尝试构建时，我收到此错误：

```
Lexical or Preprocessor Issue
 'ZXingObjC/ZXAztecDecoder.h' file not found 
```

这是有问题的代码行：

```
#import <ZXingObjC/ZXAztecDecoder.h> 
```

.h 文件的实际路径（在我的 Mac 的文件系统上）是：

```
/Users/jalmberg/Documents/ios/projects/ZXingObjC/ZXingObjC/aztec/decoder/ZXAztecDecoder.h 
```

我已使用以下内容将路径添加到标题搜索路径：

```
/Users/jalmberg/Documents/ios/projects/ZXingObjC         recursive 
```

我在这个搜索路径上尝试了几种变体，但没有任何效果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:39:44.937

您的问题看起来像您的路径。如果你使用这个：

```
/Users/jalmberg/Documents/ios/projects/ZXingObjC         recursive 
```

路径是：

```
/Users/jalmberg/Documents/ios/projects/ZXingObjC/ZXingObjC/aztec/decoder/ZXAztecDecoder.h 
```

然后你就可以使用

```
#import <ZXAztecDecoder.h> 
```

请注意，它会根据您在导入中定义的相对路径进行搜索。所以

```
#import <ZXingObjC/ZXAztecDecoder.h> 
```

正在寻找包含 ZXAztecDecoder.h 文件的目录 ZXingObjC 的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:22:11.107

不是每个人的答案，但你看过可可豆荚吗，使使用 3rd 方库变得更加容易，让我喜欢再次开发 ios。

设置简单

[http://cocoapods.org/](http://cocoapods.org/)

# objective-c - 核心数据和 NSTableView 绑定

> ID：15438402
> 
> 赞同：1
> 
> 时间：2013-03-15T17:17:15.433
> 
> 标签：objective-c, cocoa, core-data, nstableview, cocoa-bindings

我正在尝试将我的核心数据绑定到 NSTableView。我从 API 获取信息，然后想将其添加到 NSTableView。看起来它设置正确，因为每次我让它调用 API 并获取信息时，都会在 NSTableView 数据中添加一个空行。

为什么它添加一个空行而不是我绑定的数据？

**应用控制器.h**

```
@property (nonatomic, strong) NSManagedObjectContext *managedObjectContext; 
```

然后我在自动合成器的地方使用新的 Xcode。

**项目.h**

```
@class TimeLog;

@interface Items : NSManagedObject

@property (nonatomic, retain) NSNumber * itemId;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * itemType;
@property (nonatomic, retain) TimeLog *relationship;

@end 
```

**项目.m**

```
@implementation Items

@dynamic itemId;
@dynamic title;
@dynamic itemType;
@dynamic relationship;

@end 
```

**项目对象.h**

```
@interface ItemObject : NSObject

@property (nonatomic, retain) NSString * itemId;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * itemType;

@end 
```

**项目对象.m**

```
@implementation ItemObject

@end 
```

**方法制作 API 调用**

此方法进行 API 调用并将其添加到临时对象。然后它将该临时对象添加到核心数据中。

```
+ (void)searchForItemByType:(NSString *)itemType andId:(NSString *)searchId
{
    NSLog(@"Search Feature By ID: %@", searchId);
    RKObjectMapping *itemMapping = [RKObjectMapping mappingForClass:[ItemObject class]];

    [itemMapping addAttributeMappingsFromDictionary:@{
        @"id": @"itemId",
        @"name": @"title",
        @"item_type": @"itemType"
     }];

    RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:itemMapping pathPattern:nil keyPath:@"data" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

    RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];
    // The entire value at the source key path containing the errors maps to the message
    [errorMapping addPropertyMapping:[RKAttributeMapping attributeMappingFromKeyPath:nil toKeyPath:@"errorMessage"]];
    NSIndexSet *statusCodes = RKStatusCodeIndexSetForClass(RKStatusCodeClassClientError);
    // Any response in the 4xx status code range with an "errors" key path uses this mapping
    RKResponseDescriptor *errorDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:errorMapping pathPattern:nil keyPath:@"error_description" statusCodes:statusCodes];
    RKObjectManager *manager = [RKObjectManager sharedManager];
    NSLog(@"HTTP Client: %@", manager.HTTPClient);

    [manager addResponseDescriptorsFromArray:@[ responseDescriptor, errorDescriptor ]];
//    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"false", @"with_lock"
                            , nil];
    NSString *path = [NSString stringWithFormat:@"/api/v1/%@/%@", [itemType lowercaseString], searchId];
    NSLog(@"Manager: %@", manager);
    [manager getObjectsAtPath:path parameters:params success:^(RKObjectRequestOperation *operation, RKMappingResult *result) {

        NSLog(@"Results: %@", [result firstObject]);
        Items *insertItem = [NSEntityDescription insertNewObjectForEntityForName:@"Items" inManagedObjectContext:[[CoreDataHelper sharedInstance] managedObjectContext]];
        insertItem = [result firstObject];
        NSLog(@"Name: %@", [insertItem title]);

        // Handled with articleDescriptor
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        // Transport error or server error handled by errorDescriptor
        NSLog(@"Error: %@", [error localizedDescription]);
        NSAlert *alert = [NSAlert alertWithMessageText:@"Error" defaultButton:@"OK" alternateButton:nil otherButton:nil informativeTextWithFormat:@"%@", [error localizedDescription]];
        [alert runModal];

    }];
} 
```

**从上面的代码记录**

```
2013-03-15 10:15:21.817 Project[59074:403] Results: <ItemObject: 0x1034ab360>
2013-03-15 10:15:21.818 Project[59074:403] ManagedObjectContext
2013-03-15 10:15:21.818 Project[59074:403] Name: Custom Mod is missing from Face Lift 
```

**国际文凭组织**

![在此处输入图像描述](../Images/0e2a07a0a03bf1f99cf1b7135a7db305.png)

![在此处输入图像描述](../Images/4bdbd2a906aa2d3b14dee8ecf0515106.png)

![在此处输入图像描述](../Images/c1d47ddfe27a84cde46374d8830026ad.png)

![在此处输入图像描述](../Images/4bbb8f728d6c98d2bbdf0b4a7d0552cd.png)

![在此处输入图像描述](../Images/d8612fd4bf4468081e2bd2c2993bfeaa.png)

![在此处输入图像描述](../Images/9628fcd2f600a71a92a0196621fc465a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:22:25.387

我认为问题可能出在这段代码中：

```
NSLog(@"Results: %@", [result firstObject]);
Items *insertItem = [NSEntityDescription insertNewObjectForEntityForName:@"Items" inManagedObjectContext:[[CoreDataHelper sharedInstance] managedObjectContext]];
insertItem = [result firstObject];
NSLog(@"Name: %@", [insertItem title]); 
```

在您的日志中，看起来 [result firstObject] 是“ItemObject”类而不是“Items”类的一部分。即使它们共享相同的结构，“ItemObject”也不会从 NSManagedObject 继承，而是被分配给一个。系统不知道如何将“ItemObject”对象转换为“Items”对象，因此它只是将 insertItem 中的所有值保留为空白，这将转换为显示在表中的空白行。试试这个：

```
Items *insertItem = [NSEntityDescription insertNewObjectForEntityForName:@"Items" inManagedObjectContext:[[CoreDataHelper sharedInstance] managedObjectContext]];
ItemObject *tempObject = [result firstObject];
insertItem.itemID = tempObject.itemID;
insertItem.title = tempObject.title;
insertItem.itemType = tempObject.itemType; 
```

# delphi - 为什么 GetLastError 在 DLL 库中调用时返回 0？

> ID：15438409
> 
> 赞同：6
> 
> 时间：2013-03-15T17:17:28.577
> 
> 标签：delphi, delphi-2009

假设我有一个带有这个伪代码的 DLL 库：

```
var
  LastError: DWORD;

procedure DoSomethingWrong; stdcall;
var
  FileStream: TFileStream;
begin
  try
    FileStream := TFileStream.Create('?', fmCreate);
  except
    on EFCreateError do
      LastError := GetLastError; // <- why does GetLastError return 0 here ?
  end;
end; 
```

为什么[`GetLastError`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)函数在如上所示的 DLL 库中使用时返回 0？有没有办法获得这种情况下的最后一个错误代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T17:35:29.667

您对`GetLastError`返回的调用是`0`因为在`CreateFile`返回后还会调用其他 API，并且您的异常代码会执行。

由线程局部变量返回的错误代码，`GetLastError`在线程中运行的所有代码之间共享。因此，为了捕获错误代码，您需要`GetLastError`在失败的函数返回后立即调用。

[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms679360.aspx)是这样解释的：

> 调用线程执行的函数通过调用 **SetLastError**函数设置此值。当函数的返回值表明这样的调用将返回有用的数据时，您应该立即调用**GetLastError函数。**这是因为某些函数在成功时调用 **SetLastError**时使用零，从而消除了最近失败函数设置的错误代码。

如果您正在使用，`TFileStream.Create`那么该框架不会让您有机会`GetLastError`在适当的时候打电话。如果您真的想获得该信息，则必须给`CreateFile`自己打电话并使用 a`THandleStream`而不是`TFileStream`.

那里的想法是，与`THandleStream`您一起负责合成您传递给的构造函数的文件句柄`THandleStream`。这使您有机会在发生故障时捕获错误代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T07:16:58.623

在更高的层次上，这段代码的真正问题是它混合了模型。您正在尝试使用一个系统（VCL TStream 系统）创建或打开文件，但您正在测试由不同系统（Win32 API）产生的错误。

您可以依赖 Win32 GetLastError 结果的唯一方法是您自己调用 Win32 函数。为什么？因为这是确保在您的 Win32 函数调用和对 GetLastError 的调用之间没有对 Win32 函数的其他调用的唯一方法。每个 Win32 API 调用都有可能（重新）设置 GetLastError。

尽管 VCL 位于 Win32 之上，但在发生错误和异常到达您的处理程序之间，仍有很多机会发生其他 Win32 API 调用。即使今天一切正常，VCL 实施中的一些未来变化也很容易破坏当前情况的快乐巧合。

在您需要的数据容易被覆盖的情况下，避免这种“挂起时间”的最佳方法是在尽可能接近故障点的位置捕获 GetLastError 值并将其合并到 VCL 异常对象的属性中。这几乎可以消除异常处理程序和消除 GetLastError 全局状态的故障点之间的一些无辜闯入者的风险。

# ios - 使用块在现场创建代表

> ID：15438410
> 
> 赞同：6
> 
> 时间：2013-03-15T17:17:30.597
> 
> 标签：ios, objective-c, macos, objective-c-blocks

我喜欢积木，当我不能使用它们时，我会感到难过。特别是，这主要发生在我每次使用委托时（例如：使用 UIKit 类，主要是预块功能）。

所以我想知道......是否有可能 - 使用 ObjC 的疯狂力量 - 做这样的事情？

```
 // id _delegate; // Most likely declared as class variable or it will be released
   _delegate = [DelegateFactory delegateOfProtocol:@protocol(SomeProtocol)];
   _delegate performBlock:^{
       // Do something
   } onSelector:@selector(someProtocolMethod)]; // would execute the given block when the given selector is called on the dynamic delegate object.
   theObject.delegate = (id<SomeProtocol>)_delegate;
   // Profit! 
```

`performBlock:onSelector:`

如果`YES`，如何？我们是否有理由不尽可能多地这样做？

**编辑**

看起来这是可能的。当前的答案集中在问题的第一部分，即如何。但最好能就“*我们应该这样做*”部分进行一些讨论。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T20:32:46.313

好的，我终于把[WoolDelegate 放到](https://github.com/woolsweater/WoolDelegate)了 GitHub 上。现在我只需要再花一个月的时间来写一个合适的 README（尽管我想这是一个好的开始）。

委托类本身非常简单。它只是维护一个字典映射`SEL`s 到 Block。当一个实例收到一条它没有响应的消息时，它最终会进入`forwardInvocation:`并在字典中查找选择器：

```
- (void)forwardInvocation:(NSInvocation *)anInvocation {

    SEL sel = [anInvocation selector];
    GenericBlock handler = [self handlerForSelector:sel]; 
```

如果找到，则将 Block 的调用函数指针拉出并传递给 juicy bits：

```
 IMP handlerIMP = BlockIMP(handler);

    [anInvocation Wool_invokeUsingIMP:handlerIMP];
} 
```

（该`BlockIMP()`功能以及其他块探测代码感谢[Mike Ash](http://www.mikeash.com/pyblog/friday-qa-2011-10-28-generic-block-proxying.html)。实际上，这个项目的很多内容都是基于我从他的周五问答中学到的东西。如果你还没有读过这些文章，你就错过了.)

我应该注意到，每次发送特定消息时，这都会通过完整的方法解析机制；那里有一个速度。[另一种方法是 Erik H. 和EMKPantry](https://github.com/BenedictEMK/EMKPantry/tree/origin/Classes/EMKPantry/Foundation)各自采用的路径，即为您需要的每个委托对象创建一个新类，并使用`class_addMethod()`. 由于每个实例`WoolDelegate`都有自己的处理程序字典，我们不需要这样做，但另一方面，没有办法“缓存”查找或调用。方法只能添加到*类*，不能添加到实例。

我这样做有两个原因：这是一个练习，看看我是否可以解决接下来的部分——从`NSInvocation`到 Block 调用的切换——以及为每个需要的*实例创建一个新**类*似乎简单对我不优雅。它是否不如我的解决方案优雅，我将留给每个读者的判断。

 *继续前进，这个过程的核心实际上是在项目中找到的[`NSInvocation`类别](https://github.com/woolsweater/WoolDelegate/blob/master/WoolDelegate/NSInvocation%2BFFITranslation.m)中。这利用[libffi](http://sourceware.org/libffi/)调用一个直到运行时才知道的函数——块的调用——使用在运行时之前也是未知的参数（可以通过 访问`NSInvocation`）。通常，这是不可能的，原因与 a`va_list`不能传递的原因相同：编译器必须知道有多少参数以及它们有多大。libffi 包含每个知道/基于这些平台的[调用约定](http://en.wikipedia.org/wiki/Calling_convention)的平台的汇编程序。

这里有三个步骤： libffi 需要一个被调用函数的参数类型列表；它需要将参数值本身放入特定的格式；然后需要通过 libffi 调用函数（块的调用指针）并将返回值放回`NSInvocation`.

第一部分的实际工作主要由 Mike Ash 编写的函数处理，该函数从[`Wool_buildFFIArgTypeList`](https://github.com/woolsweater/WoolDelegate/blob/master/WoolDelegate/NSInvocation%2BFFITranslation.m#L58). libffi 有 internal `struct`s 用于描述函数参数的类型。在准备调用函数时，库需要指向这些结构的指针列表。`NSMethodSignature`允许访问每个参数的`NSInvocation`编码字符串；从那里翻译到正确`ffi_type`的由一组`if`/`else`查找处理：

```
arg_types[i] = libffi_type_for_objc_encoding([sig getArgumentTypeAtIndex:actual_arg_idx]);

...

if(str[0] == @encode(type)[0]) \
{ \
    if(sizeof(type) == 1) \
        return &ffi_type_sint8; \
    else if(sizeof(type) == 2) \
        return &ffi_type_sint16; \ 
```

接下来，libffi 想要指向参数值本身的指针。这是在 中完成的[`Wool_buildArgValList`](https://github.com/woolsweater/WoolDelegate/blob/master/WoolDelegate/NSInvocation%2BFFITranslation.m#L82)：再次从 中获取每个参数的大小`NSMethodSignature`，并分配一块该大小的内存，然后返回列表：

```
NSUInteger arg_size;
NSGetSizeAndAlignment([sig getArgumentTypeAtIndex:actual_arg_idx], 
                      &arg_size, 
                      NULL);
/* Get a piece of memory that size and put its address in the list. */
arg_list[i] = [self Wool_allocate:arg_size];
/* Put the value into the allocated spot. */
[self getArgument:arg_list[i] atIndex:actual_arg_idx]; 
```

（顺便说一句：代码中有几个关于跳过 的注释`SEL`，这是任何方法调用的（隐藏的）第二个传递参数。块的调用指针没有一个插槽来保存`SEL`；它只是将自己作为第一个参数，其余的是“正常”参数。由于用客户端代码编写的块，无论如何都无法访问该参数（它当时不存在），我决定忽略它。）

libffi 现在需要做一些“准备”；只要成功（并且可以为返回值分配空间），现在可以“调用”调用函数指针，并且可以设置返回值：

```
ffi_call(&inv_cif, (genericfunc)theIMP, ret_val, arg_vals);
if( ret_val ){
    [self setReturnValue:ret_val];
    free(ret_val);
} 
```

在项目的 main.m 中有一些功能演示。

最后，关于你“应该这样做吗？”的问题，我认为答案是“是的，只要它能让你更有效率”。`WoolDelegate`是完全通用的，实例可以像任何完全写出的类一样工作。不过，我的意图是制作简单的一次性委托——只需要一两个方法，并且不需要经过委托——比编写一个全新的类更少工作，而且更易读/maintainable 比将一些委托方法粘贴到视图控制器中，因为这是最容易放置它们的地方。像这样利用运行时和语言的活力有望提​​高代码的可读性，就像[基于块的`NSNotification`处理程序](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000219-SW1)一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T19:33:47.797

我只是整理了一个小项目，让你做到这一点......

```
@interface EJHDelegateObject : NSObject

+ (id)delegateObjectForProtocol:(Protocol*) protocol;

@property (nonatomic, strong) Protocol *protocol;
- (void)addImplementation:(id)blockImplementation forSelector:(SEL)selector;

@end

@implementation EJHDelegateObject
static NSInteger counter;

+ (id)delegateObjectForProtocol:(Protocol *)protocol 
{
    NSString *className = [NSString stringWithFormat:@"%s%@%i",protocol_getName(protocol),@"_EJH_implementation_", counter++];
    Class protocolClass = objc_allocateClassPair([EJHDelegateObject class], [className cStringUsingEncoding:NSUTF8StringEncoding], 0);
    class_addProtocol(protocolClass, protocol);
    objc_registerClassPair(protocolClass);
    EJHDelegateObject *object = [[protocolClass alloc] init];
    object.protocol = protocol;
    return object;
}

- (void)addImplementation:(id)blockImplementation forSelector:(SEL)selector
{
    unsigned int outCount;
    struct objc_method_description *methodDescriptions = protocol_copyMethodDescriptionList(self.protocol, NO, YES, &outCount);
    struct objc_method_description description;
    BOOL descriptionFound = NO;
    for (int i = 0; i < outCount; i++){
        description = methodDescriptions[i];
        if (description.name == selector){
            descriptionFound = YES;
            break;
        }
    }
    if (descriptionFound){
        class_addMethod([self class], selector, imp_implementationWithBlock(blockImplementation), description.types);
    }
}

@end 
```

并使用 EJHDelegateObject：

```
self.alertViewDelegate = [EJHDelegateObject delegateObjectForProtocol:@protocol(UIAlertViewDelegate)];
[self.alertViewDelegate addImplementation:^(id _self, UIAlertView* alertView, NSInteger buttonIndex){
    NSLog(@"%@ dismissed with index %i", alertView, buttonIndex);
} forSelector:@selector(alertView:didDismissWithButtonIndex:)];

UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Example" message:@"My delegate is an EJHDelegateObject" delegate:self.alertViewDelegate cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
[alertView show]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T17:22:38.407

**编辑：**这是我在了解您的要求后提出的。这只是一个快速破解，一个让你开始的想法，它没有正确实施，也没有经过测试。它应该适用于将发送者作为唯一参数的委托方法。~~它工作~~它应该与正常和返回结构的委托方法一起工作。

```
typedef void *(^UBDCallback)(id);
typedef void(^UBDCallbackStret)(void *, id);

void *UBDDelegateMethod(UniversalBlockDelegate *self, SEL _cmd, id sender)
{   
    UBDCallback cb = [self blockForSelector:_cmd];
    return cb(sender);
}

void UBDelegateMethodStret(void *retadrr, UniversalBlockDelegate *self, SEL _cmd, id sender)
{
    UBDCallbackStret cb = [self blockForSelector:_cmd];
    cb(retaddr, sender);
}

@interface UniversalBlockDelegate: NSObject

- (BOOL)addDelegateSelector:(SEL)sel isStret:(BOOL)stret methodSignature:(const char *)mSig block:(id)block;

@end

@implementation UniversalBlockDelegate {
    SEL selectors[128];
    id blocks[128];
    int count;
}

- (id)blockForSelector:(SEL)sel
{
    int idx = -1;
    for (int i = 0; i < count; i++) {
        if (selectors[i] == sel) {
            return blocks[i];
        }
    }

    return nil; 
}

- (void)dealloc
{
    for (int i = 0; i < count; i++) {
        [blocks[i] release];
    }
    [super dealloc];
}

- (BOOL)addDelegateSelector:(SEL)sel isStret:(BOOL)stret methodSignature:(const char *)mSig block:(id)block
{
    if (count >= 128) return NO;

    selectors[count] = sel;
    blocks[count++] = [block copy];

    class_addMethod(self.class, sel, (IMP)(stret ? UBDDelegateMethodStret : UBDDelegateMethod), mSig);

    return YES;
}

@end 
```

用法：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectZero];
UniversalBlockDelegate *d = [[UniversalBlockDelegate alloc] init];
webView.delegate = d;
[d addDelegateSelector:@selector(webViewDidFinishLoading:) isStret:NO methodSignature:"v@:@" block:^(id webView) {
    NSLog(@"Web View '%@' finished loading!", webView);
}];
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com"]]]; 
```*

# javascript - 这在 javascript 中没有按预期填充数据

> ID：15438415
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:17:46.463
> 
> 标签：javascript, oop, dom, object, this

我的代码 -

```
<script type="application/javascript">
var firstObject = {
sayHello : function(){
        document.write("My name is "+ this.myName +"<br>");
},
myName : "Swapnesh Sinha"
};
var secondObject = {myName : "Sanjay Sinha"};

document.write("First one " + firstObject.sayHello() );
document.write("<br>");
document.write("Second one "+ secondObject.myName); 
</script> 
```

**来源**- [http://learn.jquery.com/javascript-101/this-keyword/](http://learn.jquery.com/javascript-101/this-keyword/)

预期输出 -

```
First one Swapnesh Sinha
Second one Sanjay Sinha 
```

意外的输出（从我的感觉）-

```
My name is Swapnesh Sinha
First one undefined
Second one Sanjay Sinha 
```

让我知道为什么它返回`undefined`但源提到返回名称的情况？或者我在我身边做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:20:54.010

在您的 first`document.write`中，您调用一个函数，并要求将函数的返回值连接到字符串“First one”。

该函数被评估，此时“我的名字是 Swapnesh Sinha”通过`document.write`对象内部的调用输出。然而，该函数调用不返回一个值，因此它是`undefined`，并且它被连接到“第一个”，然后被打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:25:18.367

**这是工作小提琴**：[JsFIDDLE](http://jsfiddle.net/alexflav23/pDXnU/)

作为大多数 jQuery 开发人员，这是您无法理解的：JavaScript 范围。

基本上，为了通过 访问属性`this`，它必须嵌套在`Object.prototype`.

**更正**

当您内联定义对象属性时，调用`this`仍将指向正确的对象。然而，我给你的模式虽然不太流行，但它是一种更整洁、更好的方法。

这`prototype`是OOP的JavaScript方式。如果您正在寻找可靠的 OOP 风格的 JS 以及正确定义模型、提高代码可维护性和更好的编码风格，最好使用我给您的模式定义类，因为它可以让您在静态函数之间做出明显的区分和班级。这也是 JavaScript 的自然流程，一切都是对象。

在高级 JavaScript 编程（强大的 Ajax 应用程序或由于某种原因浏览器必须执行更高级计算的应用程序）中，始终首选以下样式。放置在命名空间下的静态函数仍然单独定义：

```
var namespace = {};
namespace.firstStaticFunc = function() {/*do stuff etc;*/};
namespace.secondStaticFunc = function() { return !1; }; 
```

使用定义模式的唯一原因是枚举和哈希映射。例如：

```
var typesOfChicken = {
    RED: 'red',
    BLUE: 'blue'
}; 
```

以上始终用于国际化和避免硬编码值之类的事情。此外，它可以帮助 JS 缩小器更好地工作。鉴于上述情况，您可以说：

```
console.log(typesOfChicken.RED);// will print red.
console.log("red");// wil still print red 
```

但是，当我想将红色更改为其他东西时，使用枚举我只需要进行一次更改。此外，缩小器可以替换`typesOfChicken.RED`为 ab，而`"RED"`始终为“RED”。这是不可缩小的。

```
var firstObject = function() { };
firstObject.prototype.myName = "Swapnesh Sinha";//this will not be nested as an instance property.
firstObject.prototype.sayHello = function() {
    alert(this.myName);// will now correctly display Swapnesh Sinha
};
// to use your first object.
var instance = new firstObject();
instance.sayHello(); 
```

要正确使用范围，请使用我给您的模式，这是一种面向对象的模式，也是在 JS 中定义类的正确方法。

现在你有一个很好的方式来组织你的 JavaScript 代码，它更容易维护，范围更明显，最重要的是你可以立即区分静态函数和类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:25:45.937

在 sayHello 函数中用 return 替换 document.write()

# java - 使用 Class.forname 时出现 ClassNotFoundException

> ID：15438420
> 
> 赞同：2
> 
> 时间：2013-03-15T17:18:12.090
> 
> 标签：java, arrays, class, methods

我正在写一个通用的解释器。它包含原始过程（例如方法调用、方法返回、控制语句等），这些过程由读取源代码、以任何语言编写并激活原始代码的翻译器运行。这个翻译器的核心是由一个字符串数组构成的，该数组包含实现方法的过程和动态激活的方法的名称。

下面的代码用于调用索引procIndex所指向的方法。它基于我找到的一个示例，并且与其他示例相同：

```
try {
    Class<?> c = Class.forName("FinalTestDecoder");
    Method  commandExe = 
         c.getDeclaredMethod (commandsTable[commandIndex][methodName], (Class<?>[])null);
    commandExe.invoke (commandExe, (Object []) null);
} catch (IllegalAccessException| IllegalArgumentException| 
       InvocationTargetException| EmptyStackException | 
        ClassNotFoundException | NoSuchMethodException | SecurityException  e) { 
  handleErr(cmdMethodNotFound, "Command: "+ commandsTable[commandIndex][programCommand]); 
} finally {
   found = true; 
}   // Cause the loop to terminate 
```

handleErr 方法正在处理错误条件并获取十进制错误代码和字符串。任何异常都可以调用错误处理程序。

问题出在`Class<?> c = Class.forName("FinalTestDecoder");`抛出 ClassNotFoundException 的行中。为了克服这个问题，我做了两个实验：最初，被调用的方法与调用代码在同一个类中；第二次我创建了一个包含调用方法的嵌入类。结果是一样的。

好吧，我在这个问题上花了几个小时，但没有任何想法。任何帮助都将受到欢迎

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:20:04.853

您必须使用全限定类名，这是[forName](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#forName%28java.lang.String%29)方法所必需的。像这样的东西： -

```
Class.forName("com.test.class.file.diretory.FinalTestDecoder"); 
```

# c# - 测试项目数组是否在预定义数组中的最佳方法是什么

> ID：15438421
> 
> 赞同：1
> 
> 时间：2013-03-15T17:18:16.173
> 
> 标签：c#, arrays, ienumerable

通过给出一个字符串数组，我想测试数组中的每个元素是否包含在预定义的字符串数组中。

例如：

```
var a = new[] { "test1", "test2" };

var b = new[] { "test1", "test4" };

var c = new[] { "test1", "test3", "test1", "test3" };

var predefined = new[] { "test1", "test2", "test3" }; 
```

变量 a 和 c 将返回 true，b 将返回 false。

C# 代码最有效的方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:21:26.733

订购对您来说重要吗？如果没有，我会使用 LINQ：

```
if (!a.Except(predefined).Any())
{
    // predefined contains every element of a
    // (Way to read this: there is no element of a which isn't also in predefined)
} 
```

这通常是 O(N + M) 而不是`All`...`Contains`解决方案是 O(N * M)。当然，这并没有说明*绝对*性能。如果您使用的是小型集合，则`All`...`Contains`实际上可能更快。随着所涉及的集合越来越大，这更有可能更快。

编辑：如评论中所述，如果您可以创建一个`HashSet<T>`并重`predefined`用它，它可以更有效......实际上也更具可读性：

```
var predefinedSet = new HashSet<string>(predefined);
...

if (predefinedSet.IsSupersetOf(a))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:21:20.800

不确定最有效但最容易阅读和标准的代码是否是

```
arrayToCheck.All(a => predefined.Contains(a)) 
```

# eclipse - Maven - 处理 POM 时出错：必须匹配开始标签名称

> ID：15438422
> 
> 赞同：1
> 
> 时间：2013-03-15T17:18:18.433
> 
> 标签：eclipse, maven, pom.xml

我有一个非常奇怪的问题。

当我尝试从 Maven 运行任何命令时，会显示以下错误：

```
Some problems were encountered while processing the POMs:
[FATAL] Non-parseable POM C:\Users\user\Documents\User\Desenvolvimento\workspace\project\pom.xml: end tag name </dependencies> must match start tag name <proj
ect> from line 1 (position: TEXT seen ...</dependency> -->\r\n\r\n\r\n\t</dependencies>...) 
```

查看异常，看起来很简单：“标签丢失或不在这些标签中”。

但是看看我的 POM.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.project</groupId>
    <artifactId>myProject</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>

    <properties>
        <jmockit.version>0.0.1</jmockit.version>
    </properties>

    <build>
        <testSourceDirectory>src/test/java/junit</testSourceDirectory>
        <resources>
            <resource>
                <directory>src/main/java</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>
            <resource>
                <directory>src/main/resources/desenv</directory>
                <excludes>
                    <exclude>**/*</exclude>
                </excludes>
            </resource>
            <resource>
                <directory>src/main/resources/conf</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>
        </resources>

        <testResources>
            <testResource>
                <directory>src/test/java/selenium</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </testResource>
        </testResources>

        <pluginManagement>
            <plugins>
                <!-- Need Java 5, which is the default since v2.3 of the maven-compiler-plugin. -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.5.1</version>
                </plugin>
            </plugins>
        </pluginManagement>

        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jaxb2-maven-plugin</artifactId>
                <version>1.5</version>
                <executions>
                    <execution>
                        <id>schema1-xjc</id>
                        <goals>
                            <goal>xjc</goal>
                        </goals>
                        <configuration>
                            <schemaDirectory>src/main/resources/schema</schemaDirectory>
                            <schemaFiles>include.xsd</schemaFiles>
                            <packageName>com.project.projectws.schema.include</packageName>
                            <staleFile>${project.build.directory}/jaxb2/.schema1XjcStaleFlag</staleFile>
                        </configuration>
                    </execution>
                    <execution>
                        <id>schema2-xjc</id>
                        <goals>
                            <goal>xjc</goal>
                        </goals>
                        <configuration>
                            <schemaDirectory>src/main/resources/schema</schemaDirectory>
                            <schemaFiles>include.xsd</schemaFiles>
                            <packageName>com.project.projectws.schema.include</packageName>
                            <staleFile>${project.build.directory}/jaxb2/.schema2XjcStaleFlag</staleFile>
                            <clearOutputDir>false</clearOutputDir>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <argLine>
                        -javaagent:"${settings.localRepository}"/mockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar
                    </argLine>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>asm</groupId>
            <artifactId>asm</artifactId>
            <version>1.5.3</version>
        </dependency>
        <dependency>
            <groupId>bouncycastle</groupId>
            <artifactId>bcprov-jdk14</artifactId>
            <version>140</version>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1</version>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0-oracle-thin-extras</artifactId>
            <version>0.9.0.2</version>
        </dependency>
        <dependency>
            <groupId>commons-betwixt</groupId>
            <artifactId>commons-betwixt</artifactId>
            <version>0.7</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-email</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>net.sf.ehcache</groupId>
            <artifactId>ehcache-core</artifactId>
            <version>2.4.2</version>
        </dependency>
        <dependency>
            <groupId>com.googlecode.ehcache-spring-annotations</groupId>
            <artifactId>ehcache-spring-annotations</artifactId>
            <version>1.1.3</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.4.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.4.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.3.2.GA</version>
        </dependency>
        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.1.2</version>
        </dependency>
        <dependency>
            <groupId>net.sf.json-lib</groupId>
            <artifactId>json-lib</artifactId>
            <version>2.4</version>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>2.5.6</version>
        </dependency>
        <dependency>
            <groupId>net.fckeditor</groupId>
            <artifactId>java-core</artifactId>
            <version>2.4</version>
        </dependency>
        <dependency>
            <groupId>backport-util-concurrent</groupId>
            <artifactId>backport-util-concurrent</artifactId>
            <version>3.1</version>
        </dependency>
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc14</artifactId>
            <version>10.2.0.1.0</version>
        </dependency>
        <dependency>
            <groupId>com.ibm.icu</groupId>
            <artifactId>icu4j</artifactId>
            <version>3.8</version>
        </dependency>
        <dependency>
            <groupId>mockit</groupId>
            <artifactId>jmockit</artifactId>
            <version>${jmockit.version}</version>
        </dependency>
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>2.0</version>
        </dependency>
        <dependency>
            <groupId>com.lowagie</groupId>
            <artifactId>itext</artifactId>
            <version>2.1.0</version>
        </dependency>
        <dependency>
            <groupId>atg.taglib.json</groupId>
            <artifactId>json-taglib</artifactId>
            <version>0.4.1</version>
        </dependency>
        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
            <version>3.1</version>
        </dependency>
        <dependency>
            <groupId>net.sourceforge.jexcelapi</groupId>
            <artifactId>jxl</artifactId>
            <version>2.6</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.8.5</version>
        </dependency>
        <dependency>
            <groupId>org.quartz-scheduler</groupId>
            <artifactId>quartz</artifactId>
            <version>1.8.4</version>
        </dependency>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-server</artifactId>
            <version>2.25.0</version>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring</artifactId>
            <version>2.5.6.SEC03</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-agent</artifactId>
            <version>2.5.6.SEC03</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>2.5.6.SEC03</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-config-browser-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-convention-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-jasperreports-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-jfreechart-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-json-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-spring-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity</artifactId>
            <version>1.6.3</version>
        </dependency>
        <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity-tools</artifactId>
            <version>1.3</version>
        </dependency>
        <dependency>
            <groupId>com.yahoo.platform.yui</groupId>
            <artifactId>yuicompressor</artifactId>
            <version>2.4.6</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>net.sf.jodreports</groupId>
            <artifactId>jodreports</artifactId>
            <version>2.4.0</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>1.5.9</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core</artifactId>
            <version>1.5.9</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-oxm-tiger</artifactId>
            <version>1.5.9</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core-tiger</artifactId>
            <version>1.5.9</version>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-xjc</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.commons.axiom
            </groupId>
            <artifactId>axiom-api</artifactId>
            <version>1.2.5</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.commons.axiom
            </groupId>
            <artifactId>axiom-impl</artifactId>
            <version>1.2.5</version>
        </dependency>
        <dependency>
            <groupId>javax.xml</groupId>
            <artifactId>jaxrpc-api</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>org.seleniumhq.selenium.client-drivers</groupId>
            <artifactId>selenium-java-client-driver</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
        </dependency>
        <dependency>
            <groupId>org.acegisecurity</groupId>
            <artifactId>acegi-security</artifactId>
            <version>1.0.7</version>
        </dependency>
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.4</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>jasperreports</groupId>
            <artifactId>jasperreports</artifactId>
            <version>3.5.3</version>
        </dependency>
    </dependencies>
</project> 
```

我已经尝试清理我的项目（项目>清理..），但问题仍然存在。还尝试了“mvn clean”、“Maven update”和 F5 进入 Eclipse！

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T11:08:18.937

In my case it was malformed parent. (I mistakenly left Git conflict unresolved.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-18T15:26:11.587

我也面临同样的问题，并试图用旧版本的 maven 和新版本的 maven 解决这个问题，但对我来说没有任何工作..

然后我尝试使用新的工作区，我没有再遇到这个问题。

# java - HTML5 无缓存

> ID：15438425
> 
> 赞同：0
> 
> 时间：2013-03-15T17:18:30.330
> 
> 标签：java, html, jsp, tomcat

我不想在我的网站上缓存任何内容。我的 cache.manifest 看起来像这样：缓存清单

```
# Cache manifest version 1.1

CACHE:
#nothing to cache.

NETWORK:
#force no cache
* 
```

这是在标题处标明的

```
<html manifest="/cache.manifest"> 
```

包含在每个页面中。

```
<%@ include file="/WEB-INF/html/header.html" %> 
```

内容仍在缓存中。Firefox 仍然显示警告“此网站 {example.com} 要求将数据存储在您的计算机上以供离线使用”。

**详细规格：**
Apache 2.2
Tomcat 7
cache.manifest 位于根目录。
app 是 ROOT.war ，它服务于域的根目录。
我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:25:25.790

清单用于指定要缓存哪些内容以*供离线使用*。它与常规缓存无关。

`manifest`只要元素上有属性，Firefox 就会提示存储数据以供离线使用`html`，即使它的值没有做任何有用的事情。

如果要控制常规缓存，请使用[缓存控制 HTTP 标头](http://www.mnot.net/cache_docs/#EXPIRES)，例如：

一个`Expires`过去。

```
Expires: Fri, 30 Oct 1998 14:19:41 GMT 
```

和/或`Cache-Control`：

```
Cache-Control: max-age=0, no-store 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:24:41.097

使用清单的原因是什么？

HTTP 标头是缓存控制的地方。添加`Cache-Control: no-cache`您的响应标头。[http://condor.depaul.edu/dmumaugh/readings/handouts/SE435/HTTP/node24.html](http://condor.depaul.edu/dmumaugh/readings/handouts/SE435/HTTP/node24.html)

# r - 轴标签不是用英文绘制的

> ID：15438429
> 
> 赞同：4
> 
> 时间：2013-03-15T17:18:36.510
> 
> 标签：r, ggplot2

R 不会自动绘制英语轴标签（例如，月份是法语）。我使用（如果信息有用......）：

*   windows（我已经在 .../Programs/R/etc/Rconsole 中更改了“language = en”以使 R 说英语）
*   工作室
*   ggplot2

我知道我不是唯一遇到此问题的人，但我从未找到解决方案。

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252 LC_MONETARY=French_France.1252 LC_NUMERIC=C LC_TIME=French_France.1252 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T22:05:57.797

要更改环境的语言，请使用以下命令：

```
Sys.setenv("LANGUAGE"="En") 
```

要将语言环境更改为英语：

```
Sys.setlocale("LC_ALL", "English") 
```

语言环境的名称取决于系统上安装的内容（例如，您可以使用“en_GB.UTF-8”而不是“English”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:42:50.690

您看到的语言环境`sessionInfo()`是系统范围的特定设置，转到 Windows 区域选项并从法语更改为英语，然后重新启动 R，您应该会看到英语而不是法语......但这只有在您想要快速而肮脏的情况下，它才会然后在系统范围内应用。否则`?locale`应该解释并做更多的手术

# mysql - 嵌套 SQL 选择查询并用 Rails 编写

> ID：15438439
> 
> 赞同：0
> 
> 时间：2013-03-15T17:18:58.947
> 
> 标签：mysql, sql, ruby-on-rails, activerecord

我拥有的是一个 Skus 模型/表，它有几个代表类别的列。还有三列用于描述主要、次要、微格式的版本号。

我想根据三个 Sku 类别选择每个 Sku 的最高版本。

最初我尝试使用 MAX 和 'group'，但在三个版本号列中效果不佳（0 0 5 被认为大于 0 1 0）。所以我在三个版本列上使用“order by”，然后使用“group by”执行“select”，得到我想要的结果：

```
 SELECT * FROM 
(
  SELECT *
  FROM skus
  WHERE category1_id = 3
  ORDER BY ver_major, ver_minor, ver_micro
) 
GROUP BY category2_id, category3_id, category4_id 
```

我想知道的是，这是否特别低效（因为嵌套选择或其他原因）？

最重要的是，我将如何使用 Rails ActiveRecord 编写这个（或更好的）查询？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:41:31.260

从数据库设计的角度来看，将类别 id 放入 skus 表中从来都不是一个好主意。

一个sku可能有很多分类，一个分类可能有很多sku。您需要一个包含两个字段（sku_id 和 category_id）的连接表来存储关系。

Rails 中的建模看起来像

```
class Sku < ActiveRecord::Base
  has_and_belongs_to_many :categories
end

class Category < ActiveRecord::Base
  has_and_belongs_to_many :skus
end 
```

参考： http: [//guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

# c++ - c++：没有匹配的函数调用，特别是它被声明为参数类型不匹配

> ID：15438445
> 
> 赞同：1
> 
> 时间：2013-03-15T17:19:22.857
> 
> 标签：c++, compiler-errors, constants, mismatch

g++ 编译器抱怨：

```
error: no matching function for call to ‘AddressSpace::resolve(ClassOne&, ClassTwo*&, ClassThree&) const’
note: candidates are: bool AddressSpace::resolve(ClassOne&, ClassTwo*, ClassThreer) <near match> 
```

导致此错误的代码是

```
void Class::handler(ClassOne& objOne, ClassTwo& objTwo,
        ClassThreer objThree) {

    obj.getAddressSpaceObj().resolve(objOne, objTwo.pointer, objThree);   
} 
```

我深入研究了代码，发现这个错误是由`getOtherObj()`. 我让它在类定义中返回对 AddressSpace 对象的 const 引用，请参阅

```
const AddressSpace &getAddressSpaceObj(){
   return addressSpace;
} 
```

在我更改此定义以返回正常引用后，

```
AddressSpace &getAddressSpaceObj(){
    return addressSpace;
} 
```

编译器不再抱怨它了。我想知道为什么这个错误被声明为参数不匹配错误？为什么编译器不复制内容作为函数调用的参数，而是将它们作为引用传递？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:22:40.763

如果`resolve`没有`const`说明符，那么您不能在`const`引用上调用它，因此这与将其更改为非`const`并且现在可以工作是一致的。这是一个非常简单的例子：

```
#include <iostream>

class A
{
   public:
      void someFuncA() {};
      void someFuncB() const {} ;
} ;

int main()
{
   A
    a1 ;
   const A &aRef = a1 ;

   a1.someFuncA() ;

   // Below won't work because aRef is a const & but someFuncA() not const
   //aRef.someFuncA() ;

   // Below will work since someFuncB() is const
   aRef.someFuncB() ;
} 
```

为了完整起见，如果您取消注释，`aRef.someFuncA()`那么您将收到的错误将类似于以下内容：

```
19:19: error: no matching function for call to 'A::someFuncA() const'
19:19: note: candidate is:
6:12: note: void A::someFuncA() <near match> 
```

# jquery - jquery $.ajax 备份网址

> ID：15438446
> 
> 赞同：0
> 
> 时间：2013-03-15T17:19:26.400
> 
> 标签：jquery, ajax, json

我编写了这段代码来根据浏览器语言获取页面的语言文件：

```
$.ajax({
      'async': false,
      'global': false,
      'url': "./languages/"+navigator.language.substring(0,2)+".json",
      'dataType': "json",
      'success': function (testo) {
        $.each( testo, function(originalstring, newstring){
        $('body').html($('body').html().replace(originalstring, newstring));
        });
      }
  }); 
```

是否有一种简单的方法来管理“找不到文件”错误并因此加载默认语言 json 文件（即英语）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:29:05.103

使用ajax的错误回调

```
$.ajax({
  async: false,
  global: false,
  url: "./languages/"+navigator.language+".json",
  dataType: "json",
  success: function (testo) {
    $.each( testo, function(originalstring, newstring){
    $('body').html($('body').html().replace(originalstring, newstring));
    }
  },
 error:function( obj, textStatus, errorThrown){
    //load default lang file here
 } 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:22:25.490

```
 $.ajax({
              'async': false,
              'global': false,
              'url': "./languages/"+navigator.language+".json",
              'dataType': "json",
               complete: function(e, xhr, settings){
                   if(e.status === 404){

                    call the same function by passing the language as english

                   }
                },
              'success': function (testo) {
                $.each( testo, function(originalstring, newstring){
                $('body').html($('body').html().replace(originalstring, newstring));
                });
              }
          }); 
```

# visual-studio-2010 - SQL Server Data Tools 2010 未解决的参考错误 SQL71561

> ID：15438450
> 
> 赞同：3
> 
> 时间：2013-03-15T17:19:29.517
> 
> 标签：visual-studio-2010, sql-server-data-tools

在单个解决方案中将 SSDT 2010（最新更新，v10.3.21208.0）与多个数据库项目一起使用时出现错误。错误内容如下：

```
SQL71561: View: [dbo].[View] has an unresolved reference to object [OtherDatabase].[dbo].[OtherTable] 
```

我已经阅读了可以在 Stack Overflow 和 Google 上找到的所有其他资源。以下是我已经尝试过的一些事情：

*   设置对解决方案中其他项目的**数据库引用。**
*   清除**数据库变量**选项以绕过根据配置选项动态更改数据库名称的 SQLCLR 变量。
*   确保在所有项目上禁用**为公共对象启用扩展 Transact-SQL 验证**
*   将**数据库位置**选项设置为：**不同的数据库，相同的服务器**
*   确保**项目构建顺序**合理安排
*   尝试了[这篇](https://stackoverflow.com/questions/12161392/using-ssdt-how-do-i-resolve-sql71561-errors-when-i-have-a-view-that-references)文章的建议

似乎没有什么对我有用。任何帮助将非常感激。这是一个屏幕截图，可能会更清楚地说明我的问题：

![显示我的 Visual Studio 窗口的图像有错误](../Images/d87f79e398913cbf08118b2215479466.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-11T17:38:06.217

已经有一段时间了，但我仍然想与其他可能正在关注我最初丢失的链接的其他人分享这个解决方案。密切注意第 4 步。这为我解决了问题。

一种可能的解决方案是向具有缺失对象的数据库添加数据库引用。该引用需要一个数据层应用程序（dacpac 文件），该应用程序可以在解决方案上轻松生成，该解决方案具有缺少对象的数据库项目。在数据库项目上按鼠标右键并选择快照项目。dacpac 文件是在 Snapshots 文件夹中创建的。然后应将该文件复制到一个公共文件夹以供重复使用。

在出现错误的项目中，在 References 上按鼠标右键并选择`Add Database Reference`. 出现`Add Database Reference`对话框：

1.  选择 dacpac 文件
2.  选择数据库位置。最常见的选项是“不同的数据库，相同的服务器”
3.  确认数据库名称字段与预期一致
4.  清除对话框中的“数据库变量”字段。如果此字段具有值，则查询必须使用此变量而不是数据库名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:18:00.647

如果引用的数据库项目已构建，但引用未解析，请尝试清理并重建引用的项目并清理执行引用的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T16:45:30.093

我正在使用 VS2015，但它可能仍然适用。在我的例子中，引用的数据库在引用属性中指定了一个“数据库变量名称”，例如`$(SomeDb)`. 如果有人试图使用实际数据库名称而不是变量来引用引用数据库中的项目，我们会收到有关未解析引用的警告。将那些更改为像`[$(SomeDb)].[dbo].[SomeTable]`解决了引用。

# makefile - 根据目标定义变量

> ID：15438451
> 
> 赞同：0
> 
> 时间：2013-03-15T17:19:31.797
> 
> 标签：makefile, gnu-make

我有一个看起来像这样的 Makefile：

```
gator: LIB=-lm
gatorgpu : GPU=-DG

 ....
STATIC=
ifdef STATIC
  $(info CPU static)    
endif 
```

但我想有类似的东西：

```
gator: LIB=-lm
gatorgpu : GPU=-DG

 ....
STATIC=
ifdef STATIC
   ifdef GPU
     $(info GPU static) 
   else
    $(info CPU static)
   endif
 endif 
```

因此，当有人键入时`$make gatorgpu STATIC=1`，`$make gator STATIC=1`它将根据目标使用静态库进行编译，在这种情况下是 CPU 或 GPU。不幸的是，`STATIC`被读取但`GPU`变量不是，所以它总是适用于`CPU static`. 有没有优雅的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:39:33.113

根据您的描述，我想说可以使用以下方法：

```
ifdef STATIC
gator: LIB:=-static -lstaticlib
gatorgpu: GPU:=-DSTATICDEF
else
gator: LIB:=-lm
gatorgpu: GPU:=-DG
endif 
```

`STATIC`您还没有明确说明在定义时与未定义时要使用或更改的选项，因此我制作了一些示例值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:54:19.440

出于某种原因，目标特定变量仅在相应的配方中可用。不同的目标可以为其配方使用相同变量的不同版本。

尽管如果您决定使用特定于目标的变量来实现您想做的任何事情，这将起作用：

```
gator: export LIB := -lm
gatorgpu : export GPU := -DG
STATIC ?= 0
ACTUAL ?= 0

export STATIC

ifeq ($(ACTUAL),1)
ifeq ($(STATIC), 1)
    ifneq ($(GPU),)
        $(info GPU static) 
    else
        $(info CPU static)
    endif
endif
endif

.gator:
    @echo LIB=$(LIB) GPU=$(GPU)

.gatorgpu:
    @echo LIB=$(LIB) GPU=$(GPU)

gator:
    @$(MAKE) .gator ACTUAL=1

gatorgpu:
    @$(MAKE) .gatorgpu ACTUAL=1

PHONY: .gator .gatorgpu gator gatorgpu 
```

*   这具有使用正确的导出变量集调用额外的 make（每个目标）的开销。
*   导出确保为从 运行的任何子流程设置变量`make`。

这是我看到的结果：

```
$ make gatorgpu
make[1]: Entering directory `/home/ash/.scratch/make-test'
LIB= GPU=-DG
make[1]: Leaving directory `/home/ash/.scratch/make-test'

$ make gator
make[1]: Entering directory `/home/ash/.scratch/make-test'
LIB=-lm GPU=
make[1]: Leaving directory `/home/ash/.scratch/make-test'

$ make gatorgpu STATIC=1
GPU static
make[1]: Entering directory `/home/ash/.scratch/make-test'
LIB= GPU=-DG
make[1]: Leaving directory `/home/ash/.scratch/make-test'

$ make gator STATIC=1
CPU static
make[1]: Entering directory `/home/ash/.scratch/make-test'
LIB=-lm GPU=
make[1]: Leaving directory `/home/ash/.scratch/make-test' 
```

一些小的更正，尽管它不会对结果产生太大影响：

*   （`?=`称为[`conditional variable assignment operator`](http://ftp.gnu.org/old-gnu/Manuals/make-3.79.1/html_chapter/make_toc.html#TOC64)）仅在变量未赋值时才执行赋值。因此，当您运行时`make mytarget STATIC=1`，不会分配变量 STATIC `0`。
*   `ifeq`并且`ifneq`与 相比，检查更为稳健`ifdef`，因为您可以将变量与您感兴趣的特定值进行比较。
*   `:=`应该优先于常规`=`，以避免不必要的 make 减速，除非你真的需要[`recursively expanded variables`](http://ftp.gnu.org/old-gnu/Manuals/make-3.79.1/html_chapter/make_toc.html#TOC59).

更好的方法是重构您的 Makefile，这样您就可以根据以下值定义不同的特定于目标的变量或规则`STATIC`

```
ifeq ($(STATIC), 1)
gator: LIB := -lm
gatorgpu : GPU := -DG
else
gator: LIB := <SOMETHING_ELSE_HERE>
gatorgpu : GPU := <SOMETHING_ELSE_HERE>
endif 
```

还有一种不那么推荐的方法，它涉及检查 的值`$(MAKECMDGOALS)`，其中包含调用 make 的目标。

```
ifeq ($(MAKECMDGOALS),gatorgpu)
    GPU := -DG
endif 
```

# jquery - 带有 Rails 3.2 的 active_scaffold 对搜索、编辑、新操作等没有可见的响应

> ID：15438455
> 
> 赞同：2
> 
> 时间：2013-03-15T17:19:37.653
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.2, prototypejs, activescaffold

我添加了几个带有活动脚手架的模型和控制器。但是，每当我单击任何操作（例如新建、编辑、搜索、显示等）时，浏览器中都看不到任何内容。似乎服务器正在响应它，因为日志显示：

```
Started GET "/organisms/1" for 127.0.0.1 at 2013-03-15 12:55:35 -0400
Processing by OrganismsController#show as JS
  Parameters: {"id"=>"1"}
  Organism Load (0.4ms)  SELECT "organisms".* FROM "organisms" WHERE "organisms"."id" = $1 LIMIT 1  [["id", "1"]]
   (0.4ms)  SELECT COUNT(*) FROM "genes" WHERE "genes"."organism_id" = 1
  Rendered /opt/local/lib/ruby1.9/gems/1.9.1/gems/active_scaffold-3.2.19/frontends/default/views/_show_columns.html.erb (2.9ms)
  Rendered /opt/local/lib/ruby1.9/gems/1.9.1/gems/active_scaffold-3.2.19/frontends/default/views/_show.html.erb (15.4ms)
Completed 200 OK in 32ms (Views: 26.0ms | ActiveRecord: 0.9ms) 
```

但是浏览器窗口中没有任何变化。Firebug 'Net' 日志显示响应标头：

```
 Cache-Control  max-age=0, private, must-revalidate Connection  close
 Content-Type   text/javascript; charset=utf-8
 Etag   "c08465bfa6a67a8fb4f88964513a6b23" Server   thin 1.5.0 codename
 Knife X-Request-Id 6ee347aa85988460733ffbda65ea12ee X-Runtime  0.036693
 X-UA-Compatible    IE=Edge 
```

对我来说，响应看起来像 html：

```
<h4></h4>

<dl>
  <dt>Name</dt>
    <dd class="name-view">
    - &nbsp;
  </dd>
  <dt>Genes</dt>
    <dd class="genes-view">
    - &nbsp;
  </dd>
</dl>

<p class="form-footer">
  <a href="/organisms" class="as_cancel" data-remote="true">Close</a>
  <img alt="loading indicator" class="loading-indicator" id="as_organisms-create-1-loading-indicator" src="/assets/active_scaffold/indicator.gif" style="visibility:hidden;" />
</p> 
```

我怀疑问题有两个问题：

1.  响应头中提到了 js，但响应体是 HTML。尽管我认为 AJAX 可能会发生这种情况。
2.  我在我的资产（application.js 标头）中使用 jquery，而 active_scaffold 可能正在尝试使用原型。我该如何检查？请注意，在 Rails 3.2 中，安装 active_scaffold gem 时没有提及原型或 jquery：[https ://github.com/activescaffold/active_scaffold/wiki/Getting-Started](https://github.com/activescaffold/active_scaffold/wiki/Getting-Started)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:32:21.630

页面上的数据是否发生变化？我认为`activescaffold`是使用 ajax 重新渲染页面的一部分，所以你不会看到洞页面的变化。如果屏幕上没有什么不同，那么它看起来就像什么都没发生。

答：使用 git master`gem 'active_scaffold', :git => 'git://github.com/activescaffold/active_scaffold.git'`详见下文

# java - 如何使用 Swing 访问字体系列的所有字体

> ID：15438457
> 
> 赞同：3
> 
> 时间：2013-03-15T17:19:49.267
> 
> 标签：java, macos, swing, fonts, awt

我安装的 OS X 10.8 预装了*Helvetica Neue*系列中的 11 种字体。我正在尝试找到一种方法来访问具有*medium*或*condensed*等样式的字体，这些样式不能由位掩码值`Font.BOLD`和`Font.ITALIC`.

`GraphicsEnvironment.getAllFonts()`返回`Font`所有这些字体的对象，但应用它们`JLabel.setFont()`似乎只使用上述位掩码可表示的样式。这显示在下面屏幕截图的左侧，将其与在*TextEdit*中使用的所有字体的样本进行比较。

如果`Font`使用字体的全名或其 PostScript 名称构造对象，也会发生同样的情况。

有没有办法使用所有这些字体，无论是通过将它应用到*Swing*组件还是在绘制到`Graphics2D`（或`Graphics`）实例时？

![左侧是 Swing 应用程序的输出，右侧是所有字体的示例。](../Images/b7a0da059597803d2fc55e5871fc2985.png)

下面是我用来在上面的屏幕截图中生成对话框的代码。

```
package fahrplan;

import java.awt.*;
import javax.swing.*;

public class FontsMain {
    public static void main(String[] a) {
        GraphicsEnvironment e = GraphicsEnvironment.getLocalGraphicsEnvironment();

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BoxLayout(contentPane, BoxLayout.PAGE_AXIS));

        for (Font i : e.getAllFonts()) {
            String name = i.getFontName();

            if (name.startsWith("HelveticaNeue")) {
                JLabel label = new JLabel(name);

                label.setFont(i.deriveFont(18f));

                contentPane.add(label);
            }
        }

        JFrame frame = new JFrame("Fonts");
        frame.setContentPane(contentPane);
        frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:04:16.147

我会这样做。

```
int size=12, style=0;

GraphicsEnvironment e = GraphicsEnvironment.getLocalGraphicsEnvironment();
final Font[] fonts = e.getAllFonts();
for(int i=0; i<fonts.length; i++)
    {
        JLabel label = new JLabel(Font[i].getName);
        label.setFont(new Font(Font[i].getName, size, style));
        contentPane.add(label);
    } 
```

我希望这有帮助。

# elasticsearch - 如何在 elasticsearch 中获取数组的计数/大小

> ID：15438458
> 
> 赞同：4
> 
> 时间：2013-03-15T17:19:53.913
> 
> 标签：elasticsearch, mvel

我想在我的一个数组上做一个统计方面。我希望像

```
"script" : "doc['myField'].doubleValue 
```

或者

```
"script" : "doc['myField'].count 
```

会工作。我还没有在 mvel 中找到任何数组计数方法，我什至不知道访问脚本中的数组字段是否真的给了我数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:41:41.093

我可能有它。看来我需要计算数组内的一个字段而不是数组本身。这可能只是因为我所拥有的只是对象数组。

```
"script" : "doc['arrayField.objectField'].values.length" 
```

# hex - 如何理解二进制 stl 文件以便我可以使用 Python 解析它们？

> ID：15438459
> 
> 赞同：0
> 
> 时间：2013-03-15T17:19:54.623
> 
> 标签：hex, binaryfiles

我正在尝试编写一个 python 程序，该程序采用二进制 STL 文件并解析所有顶点，但我无法使用十六进制编辑器找出二进制文件。我已经阅读了一些关于十六进制的教程，并且我知道每 2 个十六进制数字代表一个字节，你可以将它们以偶数相加来表示数字或字符，但是当我查看它们的含义时，它仍然没有意义。我在这里找到了二进制 stl 文件的格式（[http://en.wikipedia.org/wiki/STL_(file_format)](http://en.wikipedia.org/wiki/STL_(file_format))）。但是十六进制编辑器只是吐出像@这样的随机字符，一大堆. （这些是做什么的？），@，“，*等。我怎样才能找到哪些十六进制字符代表哪些顶点，哪些是间距字符，哪些是普通字符等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:22:58.860

`struct`在python中搜索有关包的文档
这就是您要读取二进制数据的方式

# c++ - Sublime Text 2 问题与 Boost

> ID：15438461
> 
> 赞同：0
> 
> 时间：2013-03-15T17:19:59.177
> 
> 标签：c++, g++, sublimetext2, build-system

我有一个构建系统配置为使用 boost 构建项目（v1.53，Mac OS X Mountain Lion）

```
{
    "cmd": ["g++", "${file}", "-o", "${file_path}/${file_base_name}", "-I/usr/local/include -L/usr/local/lib -lboost_system"],
    "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
    "working_dir": "${file_path}",
    "selector": "source.c, source.c++",

    "variants":
    [
        {
            "name": "Run",
            "cmd": ["bash", "-c", "g++ '${file}' -o '${file_path}/${file_base_name}' && '${file_path}/${file_base_name}'"]
        }
    ]
} 
```

但是，当我尝试使用一个简单的程序对其进行测试时：

```
#include <iostream>
#include <boost/asio.hpp>

int main(){
    std::cout << "Hello world! - boost" << std::endl;
    return 0;
}; 
```

我收到以下错误（来自 sublime text 2 输出）：

```
Undefined symbols for architecture x86_64:
  "boost::system::system_category()", referenced from:
      __static_initialization_and_destruction_0(int, int)in cct7f9yj.o
      boost::asio::error::get_system_category()    in cct7f9yj.o
  "boost::system::generic_category()", referenced from:
      __static_initialization_and_destruction_0(int, int)in cct7f9yj.o
ld: symbol(s) not found for architecture x86_64
collect2: [Finished in 1.1s with exit code 1]ld returned 1 exit status 
```

控制台输出为：

```
Running g++ /Users/xxxx/Desktop/event_system/main.cpp -o /Users/xxxx/Desktop/event_system/main -I/usr/local/include -L/usr/local/lib -lboost_system 
```

当我将相同的命令复制并粘贴到终端时，它可以正常工作。这只是 Sublime Text 2 无法正确使用 g++ 的问题吗？还是有其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:49:06.633

在 Sublime Text 2 构建系统中，命令的每个参数都应该是 array 中的一个单独的项目`cmd`。如果您在一项中指定三个参数，它们将仅作为一个参数传递。以下面的设置为例，python 脚本只会接收一个值为`"arg1 arg2 arg3"`.

```
{
    "cmd"       : ["python", "${file_path}/${file_base_name}.py", "arg1 arg2 arg3"],
    "selector"  : "source.py",
    "working_dir": "${file_path}"
} 
```

因此，在您的构建系统中，`"-I/usr/local/include -L/usr/local/lib -lboost_system"`将被视为一个参数，也就是说，`g++`不知道您指定了两个链接选项。

# matlab - MATLAB 每次迭代更改矩阵的名称

> ID：15438464
> 
> 赞同：2
> 
> 时间：2013-03-15T17:20:06.833
> 
> 标签：matlab, matrix, iteration

我只是想知道是否有一种干净的方法可以在每次迭代后以不同的名称存储矩阵？我希望能够将每个矩阵（uMatrix）存储在不同的名称下，具体取决于我在哪个模拟上，例如 Sim1、Sim2、.... 等。所以 Sim1 = uMatrix 在第一次运行之后，然后 Sim2 = uMatrix 之后2次贯穿。这样每次我都可以为每个不同的模拟存储不同的 uMatrix。

任何帮助将不胜感激，如果这是一个愚蠢的问题，我们深表歉意。此外，有关是否可以清理此代码的任何指针也会很棒

我在下面使用的代码

```
d = 2;            
kij = [1,1];
uMatrix = [];
RLABEL=[];
SimNum = 2;

for i =1:SimNum
    Sim = ['Sim',num2str(i)] %Simulation number
    for j=1:d
        RLABEL = [RLABEL 'Row','',num2str(j) ' '];
        Px = rand;
        var = (5/12)*d*sum(kij);
        invLam = sqrt(var);
        u(j) = ((log(1-Px))*-invLam)+kij(1,j);
        uMatrix(j,1) = j;
        uMatrix(j,2) = u(j);
        uMatrix(j,3) = kij(1,j);
        uMatrix(j,4) = Px;
        uMatrix(j,5) = invLam;
        uMatrix(j,6) = var;
    end
    printmat(uMatrix,'Results',RLABEL,'SECTION u kij P(Tij<u) 1/Lambda Var')
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T17:53:12.903

真的有太多的选择。去描述将数据放入和获取数据我们的一些方法：

**在变量名中编码**

我真的非常不喜欢这种方法，但这似乎是您特别要求的。要保存`uMatrix`为变量`Sim5`（第 5 次运行后），请在循环末尾添加以下代码：

```
eval([Sim ' = uMatrix;']);  %Where the variable "Sim" contains a string like 'Sim5' 
```

*访问数据*

```
listOfStoredDataNames = who('Sim*')
someStoredDataItem = eval(listOfStoredDataNames {1})  %Ugghh
%or of you know the name already
someStoredDataItem = Sim1; 
```

现在，请不要这样做。让我试着说服你有更好的方法。

**使用结构**

做同样的事情，使用一个名为（例如）的结构`simResults`

```
simResults.(Sim) = uMatrix; 
```

甚至更好

```
simResults.(genvarname(Sim)) = uMatrix; 
```

*访问数据*

```
listOfStoredDataNames = fieldnames(simResults)
someStoredDataItem = simResults.(listOfStoredDataNames{1})
%or of you know the name already
someStoredDataItem = simResults.Sim1 
```

这避免了总是有问题的`eval`语句，更重要的是使附加代码更容易编写。例如，您可以轻松地将所有内容传递`simResults`给函数以进行进一步处理。

**使用地图**

要用map做同样的存储，先初始化map

```
simResults = containers.Map('keyType','char','valueType','any'); 
```

然后在每次迭代中将值添加到地图

```
simResults(Sim) = uMatrix; 
```

*访问数据*

```
listOfStoredDataNames = simResults.keys
someStoredDataItem = simResults(listOfStoredDataNames{1})
%or of you know the name already
someStoredDataItem = simResults('Sim1') 
```

地图在可用于名称的字符串中更灵活一些，如果您觉得舒服，可能是更好的解决方案。

**使用元胞数组**

为了简单，没有废话存储结果

```
simResults{i} = uMatrix; 
```

*访问数据*

```
listOfStoredDataNames = {};  %Names are Not available using this method
someStoredDataItem = simResults{1} 
```

或者，使用轻微的废话

```
simResults{i,1} = Sim;      %Store the name in column 1
simResults{i,2} = uMatrix;  %Store the result in column 2 
```

*访问数据*

```
listOfStoredDataNames = simResults(:,1)
someStoredDataItem = simResults{1,2} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T18:24:05.693

只是为了添加@Pursuit给出的详细答案，我喜欢另一种方法：

**使用结构数组**

数组中的每一项都是一个存储结果和任何附加信息的结构：

```
simResults(i).name = Sim;         % store the name of the run
simResults(i).uMatrix = uMatrix;  % store the results 
simResults(i).time = toc;         % store the time taken to do this run 
```

等等。数组中的每个元素都需要具有相同的字段。您可以使用快速操作从数组中提取所有元素，例如一目了然地查看每次运行的时间，您可以这样做：

```
[simResults.time] 
```

您还可以使用`arrayfun`to 对数组中的每个元素进行处理：

```
anon_evaluation_func = @(x)( evaluate_uMatrix( x.uMatrix ) );
results = arrayfun( anon_evaluation_func, simResults ); 
```

或更简单的语法，

```
for i = 1:length(simResults)
    simResults(i).result = evaluate_uMatrix( simResults(i).uMatrix );
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:24:10.890

我会尝试使用存储`<name, matrix>`. 可能的方法是使用[http://www.mathworks.com/help/matlab/map-containers.html](http://www.mathworks.com/help/matlab/map-containers.html)

# sql-server - 数据库项目 - INSERT 语句出错

> ID：15438469
> 
> 赞同：1
> 
> 时间：2013-03-15T17:20:26.113
> 
> 标签：sql-server, visual-studio-2012, sqlcmd, database-project, post-build-event

我正在尝试使用 Visual Studio 2012 中的数据库项目为我的数据库播种。作为我的部署后脚本的公园，我有一个类似于以下内容的语句：

```
INSERT INTO SomeTable (SomeTextCol) Values (N'$(function(){});') 
```

该列定义为`NVARCHAR(MAX)`

这会导致构建后事件失败。然而奇怪的是，如果我使用 SSMS 执行语句，它会成功。

这是由于数据库项目在后台使用 SQLCMD 造成的吗？

如何修复此错误（同时仍然能够将 jQuery 插入表中） - 更改列值对我来说不是一个选项，因为我不拥有架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:36:12.287

You are right, this is caused by sqlcmd for which $ is a special character. One solution to fix this would be to concatenate two strings:

```
INSERT INTO SomeTable (SomeTextCol) Values (N'$'+'(function(){});'); 
```

It is a little ugly, but it works. An alternative would be to use a different symbol for jQuery like its complete name:

```
INSERT INTO SomeTable (SomeTextCol) Values (N'jQuery(function(){});'); 
```

Or, if you have a lot of references to jQuery inside the function:

```
(function(JQ){
  JQ(
     function(){
     //other references to JQ
     }
  );
 }
)(jQuery); 
```

This last solution has the added advantage that anyone defining `$` or `JQ` anywhere else on the page won't break your code, as "your" `JQ` is defined in a closure visible only to your code.

# c++ - openCV 警告组件数据类型不匹配

> ID：15438470
> 
> 赞同：2
> 
> 时间：2013-03-15T17:20:30.407
> 
> 标签：c++, opencv, jpeg2000

我在 Cent OS 机器上使用 OpenCV 2.4.4。我的代码当前加载带有警告的图像：组件数据类型不匹配

这是代码：

```
#include <cv.h>
#include <highgui.h>
#include "imglib.h"

int main( int argc, char** argv )
{
    Mat image = imread( argv[1], CV_LOAD_IMAGE_ANYDEPTH);
    imwrite("debugwriteout.jp2", image);
} 
```

我在 args 中传递了一个 .jp2 灰度文件的名称。该图像具有 14 位像素深度，但是当我打印出像素值时，我得到的值超过 20000，并且我的图像现在是一个完全黑色的正方形。任何意见，将不胜感激。

附加信息：当我将 imread 标志更改为 CV_LOAD_IMAGE_GRAYSCALE 时，它成功地将图像转换为 8 位像素深度并打印有用的输出，因此我可以判断 jasper 模块至少在某种程度上正确地工作。

任何意见，将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T23:58:08.373

思曼，

我解决了我的问题。解决方案是高位的位置。在 16 位上，对于 14 位深度，您有 xxxxxxxxxxxxxx00 而不是 00xxxxxxxxxxxxxx。如果你想要正确的值，你必须在右边贴上 2 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:42:47.073

请使用这些标志阅读图像

```
Mat image = imread( argv[1], CV_LOAD_IMAGE_ANYDEPTH | CV_LOAD_IMAGE_ANYCOLOR); 
```

# r - 随机几何图连通性

> ID：15438471
> 
> 赞同：0
> 
> 时间：2013-03-15T17:20:32.913
> 
> 标签：r, graph

给定均匀分布在单位正方形中的 N 个随机点，距离为 d，i 可以生成如下格式的矩阵：

```
 E V1 V2
[1,] 0.5564821  1  2  
[2,] 0.3373116  1  3
[3,] 0.3973278  1  4
[4,] 0.6066518  1  5
[5,] 0.9603731  1  6
[6,] 0.3612895  1  7
# more rows... 
```

其中 E 是顶点 V1 和 V2 之间的边。我刚开始学习图论，所以我问：

我如何确定这个随机几何图是否连接？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:56:36.333

与@user1317221_G 不同，我收到一条带有 ?igraph 的未找到消息。igraph 包可以安装：

```
install.packages("igraph")  # then load
library("igraph")
help( package="igraph" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-31T15:37:41.700

您的图表已连接。

这是您描述的网络图的一部分（使用 mtx 作为矩阵对象）。

```
dput(mtx)
structure(list(E = c(0.5564821, 0.3373116, 0.3973278, 0.6066518, 
0.9603731, 0.3612895), V1 = c(1L, 1L, 1L, 1L, 1L, 1L), V2 = 2:7), .Names = c("E", 
"V1", "V2"), class = "data.frame", row.names = c("[1,]", "[2,]", 
"[3,]", "[4,]", "[5,]", "[6,]")) 
```

然后使用`igraph`包来绘制图形：

```
library(igraph)
onagraph <- graph.data.frame(mtx, directed=F) 

set.seed(19)
plot(onagraph) 
```

![在此处输入图像描述](../Images/143b2effe41e2a4bd011422ee716b3c8.png)

根据 Benjamin、Chartrand 和 Zhang*在 The Fascinating World of Graph中的说法，“连通图”是“可以沿着 [图] 的边缘从 [图] 的任何顶点走到 [图] 的任何其他顶点”的图。理论*（普林斯顿大学出版社，2015 年），第 46 页。

# java - 没有命名 bean 但定义了 bean

> ID：15438472
> 
> 赞同：0
> 
> 时间：2013-03-15T17:20:39.147
> 
> 标签：java, spring, grails, groovy, spring-security

我正在开发支持去年 spring-oauth 的 grail-oauth-plugin 的更新版本

我的插件版本运行良好，并且我已经实现了一个工作 oauth2 服务器。

但现在我想添加一个像这样定义的自定义授权

```
def doWithSpring = {

    myTokenGranter(MyTokenGranter)

    xmlns oauth:"http://www.springframework.org/schema/security/oauth2"

    oauth.'authorization-server'( /* ... many definitions here ... */){
        /* ... many definitions here ... */
        oauth.'custom-grant'('token-granter-ref': "myTokenGranter")
    }
} 
```

但我得到一个例外告诉我：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'myTokenGranter' 
```

但是 bean myTokenGranter 的定义如您所见。如果我删除自定义授权定义，项目就会启动，我可以访问 myTokenGranter bean。

查看完整堆栈跟踪，我发现异常发生在[spring oatuh2 服务器 bean 定义解析 AuthorizationServerBeanDefinitionParser.java](https://github.com/SpringSource/spring-security-oauth/blob/master/spring-security-oauth2/src/main/java/org/springframework/security/oauth2/config/AuthorizationServerBeanDefinitionParser.java)中它尝试查找我的 bean 的行中

```
parserContext.getRegistry().getBeanDefinition(customGranterRef); 
```

其中 customGranterRef = "myTokenGranter"

所以我怀疑 Spring Ouath 或 Grails BeanBuilder 中存在一个错误，它不会让我的“myTokenGranter”在服务器解析器中可见。或者在 grails bean 定义 DSL 中出错。

* * *

感谢您的关注。

更深入地调试应用程序我发现问题可能在于 grails BeanBuilder 在翻译命名空间的 spring DSL 时的工作方式。

如果我调试检查我的 bean 的点（在[AuthorizationServerBeanDefinitionParser.java](https://github.com/SpringSource/spring-security-oauth/blob/master/spring-security-oauth2/src/main/java/org/springframework/security/oauth2/config/AuthorizationServerBeanDefinitionParser.java)中）

在行

```
parserContext.getRegistry().getBeanDefinition(customGranterRef); 
```

如果我检查 che 结果

```
 parserContext.getRegistry().getBeanDefinitionNames() 
```

它只给我看这个豆子

```
[org.springframework.context.annotation.internalConfigurationAnnotationProcessor
 org.springframework.context.annotation.internalAutowiredAnnotationProcessor
 org.springframework.context.annotation.internalRequiredAnnotationProcessor
 org.springframework.context.annotation.internalCommonAnnotationProcessor
 org.springframework.context.annotation.internalPersistenceAnnotationProcessor
 org.springframework.aop.config.internalAutoProxyCreator
 org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0
 org.springframework.transaction.interceptor.TransactionInterceptor#0
 org.springframework.transaction.config.internalTransactionAdvisor
 oauth2TokenGranter
 oauth2AuthorizationCodeServices
 oauth2AuthorizationRequestManager] 
```

并不是所有其他的清除豆子……

* * *

即使我将 ouath 服务器声明移动到 resources.xml 中，问题仍然存在，将我的自定义令牌授予者 bean 声明保留在 resources.groovy 中。

但是，如果我在 resources.xml 中移动自定义令牌 bean 声明，问题就解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:26:24.950

Solved hacking Spring Security Oauth

see this [commit](https://github.com/ftaiolivista/spring-security-oauth/commit/90c7337f4b08eb41852cfab4a44c76b2639246b7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:19:55.923

我真的不知道 BeanBuilder DSL 是如何工作的，但如果出现问题，问题似乎就存在（您的示例在 XML 中工作得很好）。能不能分两步做，所以在处理 OAuth2 命名空间时，myTokenGranter 的 bean 定义肯定是可用的？

# android - 为什么我不能从另一个包含 Toast 的类中调用静态方法？

> ID：15438473
> 
> 赞同：0
> 
> 时间：2013-03-15T17:20:39.343
> 
> 标签：android, static-methods

在发布此之前，我进行了研究，但我很难准确理解问题所在。所以这是我在第 1 课中的方法：

```
public static void scan() {
    for( int j=0; j< objarray.size();j++)
    {

        locationB.setLatitude(objarray.get(j).getlat());
        locationB.setLongitude(objarray.get(j).getlon());

        float distance = locationA.distanceTo(locationB);

        if((distance < 600)&&(distance > 0.0) )
        {
            Toast.makeText(getApplicationContext(),"You can go to" +objarray.get(j).gettitle(),Toast.LENGTH_SHORT).show(); 

        }

    } 
```

此方法中的所有内容都是静态的，唯一给我错误的是 Toast.makeText 调用。我是否需要向包含 scan 方法的 class1 传递一些东西？

像这样：

```
Class1.Scan(something); 
```

我认为这可能与 Toast 中的 getApplicationContext() 有关，但我不确定我需要做什么才能解决这个问题。任何解释表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:23:47.977

> 我是否需要向包含 scan 方法的 class1 传递一些东西？

是的，您需要将当前 Activity 上下文传递`Scan`给显示 Toast 的方法，而不是直接调用 `getApplicationContext()`（`Class1`来自非 Activity 类）中的方法。将扫描方法更改为：

```
public static void Scan(Context context) {
   //...your code here....
    Toast.makeText(context,"You can go to"  
                  +objarray.get(j).gettitle(),Toast.LENGTH_SHORT).show(); 

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:24:39.110

您是否尝试过将应用程序上下文传递给方法？`Class1.Scan(getApplicationContext())`

```
public static void scan(Context context) {
    for( int j=0; j< objarray.size();j++)
    {

        locationB.setLatitude(objarray.get(j).getlat());
        locationB.setLongitude(objarray.get(j).getlon());

        float distance = locationA.distanceTo(locationB);

        if((distance < 600)&&(distance > 0.0) )
        {
            Toast.makeText(context,"You can go to" +objarray.get(j).gettitle(),Toast.LENGTH_SHORT).show(); 

        }

    } 
```

# c# - 列表框数据源更新 ms 访问 winform

> ID：15438476
> 
> 赞同：0
> 
> 时间：2013-03-15T17:20:49.897
> 
> 标签：c#, winforms, ms-access, listbox, datasource

我使用来自 ms access 数据库的列表框数据源创建了一个 winform 应用程序。问题是当我单击更新按钮时，列表框没有得到更新。例如，我将“ITEM1”更改为 ITEM2”，它只是不工作，但数据库可以，因为我执行了一个将更新数据库的命令。我需要重新加载（重新打开）我的应用程序，然后到那时我会看到我的修改.我如何更新列表框？我以前读过一些关于这个问题的东西，但我不太清楚..我希望有人能帮助我..

```
 private BindingList<PRODUCTLIST> _productlist;
    public Form1()
    {
        InitializeComponent();
    }

    public class PRODUCTLIST
    {
        public string ID { get; set; }
        public string ITEM { get; set; }
        public string ITEM_DESC { get; set; }
    }

    private static OleDbConnection GetConnection()
    {
        OleDbConnection mdbConn = new OleDbConnection();
        try
        {
            string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=shop.mdb;Jet OLEDB:Database Password=xxxxx;";
            mdbConn = new OleDbConnection(connectionString);
            mdbConn.Open();
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
        return mdbConn;
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        // make ID textbox un editable
        textBoxID.Enabled = false;

        _productlist = new BindingList<PRODUCTLIST>();
        string strSQL = "SELECT * FROM Item ORDER BY ITEM";
        OleDbDataAdapter myCmd = new OleDbDataAdapter(strSQL, GetConnection());
        DataSet dtSet = new DataSet();
        myCmd.Fill(dtSet, "Item");
        DataTable dTable = dtSet.Tables[0];
        foreach (DataRow dtRow in dTable.Rows)
        {
            _productlist.Add(new PRODUCTLIST() { ID = dtRow["ID"].ToString(), ITEM = dtRow["ITEM"].ToString(), ITEM_DESC = dtRow["ITEM_DESC"].ToString() });
        }
        listBox1.DisplayMember = "ITEM";
        listBox1.DataSource = _productlist;
        //listBox1.DataBindings = _productlist;
        listBox1.ValueMember = "ID";

        // set the textbox binding and DataSourceUpdateMode to Never because i have other button to add the new item
        textBoxID.DataBindings.Add("Text", _productlist, "ID", false, DataSourceUpdateMode.Never);
        textBoxITEM.DataBindings.Add("Text", _productlist, "ITEM", false, DataSourceUpdateMode.Never);
        textBoxITEMDESC.DataBindings.Add("Text", _productlist, "ITEM_DESC", false, DataSourceUpdateMode.Never);
    }

    private void buttonUpdate_Click(object sender, EventArgs e)
    {
        // update data on database
        OleDbCommand cmd = new OleDbCommand("UPDATE Item SET ITEM = @ITEM, ITEM_DESC = @ITEM_DESC WHERE ID = @ID", GetConnection());
        cmd.Parameters.AddWithValue("@ITEM", textBoxITEM.Text);
        cmd.Parameters.AddWithValue("@ITEM_DESC", textBoxITEMDESC.Text);
        cmd.Parameters.AddWithValue("@ID", Convert.ToInt32(textBoxID.Text));
        cmd.ExecuteNonQuery();

        // make the listbox datasource update
        //listBox1.Refresh();
        //listBox1.DataSource = null;
        //listBox1.DataSource = _productlist;

        //_productlist = new BindingList<PRODUCTLIST>();
        //string strSQL = "SELECT * FROM Item ORDER BY ITEM";
        //OleDbDataAdapter myCmd = new OleDbDataAdapter(strSQL, GetConnection());
        //DataSet dtSet = new DataSet();
        //myCmd.Fill(dtSet, "Item");
        //DataTable dTable = dtSet.Tables[0];
        //foreach (DataRow dtRow in dTable.Rows)
        //{
        //    _productlist.Add(new PRODUCTLIST() { ID = dtRow["ID"].ToString(), ITEM = dtRow["ITEM"].ToString(), ITEM_DESC = dtRow["ITEM_DESC"].ToString() });
        //}
        //listBox1.DisplayMember = "ITEM";
        //listBox1.DataSource = _productlist;
        ////listBox1.DataBindings = _productlist;
        //listBox1.ValueMember = "ID";

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:49:32.483

您执行此操作的方式需要清除并重新填充您的列表框。

您应该将该代码作为方法从 FormLoad 事件处理程序中提取出来，并在运行更新查询后调用它。

很难说你想走哪条路。根据您的要求。您应该做的是使您的产品数据表成为私有财产。创建并打开它并绑定到列表框。

那么你的更新功能应该改变数据表。然后您会在列表框中看到更改。不过要欣赏的是，直到您将对数据表所做的更改（ApplyChanges 方法）刷新回数据库服务器，您所做的只是更改数据的本地副本。这可能是好是坏。取决于您要如何处理多个用户同时更新产品。

所以你有一个带有本地副本的数据表并显示它。然后你更新了你复制的表，现在你的副本不同步了。如果您运行应用程序的另一个副本并更改您已经在第一个副本中显示的记录之一，那么您将遇到完全相同的问题。

# sql - 在 SQL 中使用外连接进行查询

> ID：15438479
> 
> 赞同：2
> 
> 时间：2013-03-15T17:20:53.713
> 
> 标签：sql, sql-server, left-join

我有一个包含地理信息的 SQL 数据库。这个数据库有三个表：

```
PostalCode
----------
Code  (char(10))
StateID (uniqueidentifier)

State
-----
ID (uniqueidentifier)
Name (nvarchar(max))
CountryID (uniqueidentifier)

Country
-------
ID (uniqueidentifier)
Name 
```

关系是：一个国家有国家。州有邮政编码。我正在尝试创建一个查询，我可以在其中找到特定邮政编码所属国家/地区的所有州。目前，我正在尝试以下方法：

```
SELECT 
  s.*
FROM 
  [PostalCode] p, 
  [State] s,
  [Country] c
WHERE
  p.[Zip]='90028' AND 
  p.[StateID]=s.[ID] AND 
  s.[CountryID]=c.[ID] 
```

不幸的是，此结果返回 1 条记录（与加利福尼亚关联的州记录）。然而，实际上，我需要它返回 50 条记录（美国每个州一个）。如何修改此查询以执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:22:42.093

您正在使用 a `INNER JOIN`，您需要将语法更改为 a `LEFT JOIN`：

```
SELECT  s.*
FROM [State] s
LEFT JOIN [PostalCode] p
  ON p.[StateID]=s.[ID]
  AND p.[Zip]='90028'
LEFT JOIN [Country] c
  ON s.[CountryID]=c.[ID] 
```

您会注意到我更改为使用`ANSI JOIN`语法，而不是使用逗号和`WHERE`子句连接表。

即使其他表中没有匹配的行，A`LEFT JOIN`也会返回表中的所有行。`state`

如果要返回邮政编码等于特定代码的国家/地区的所有州，则可以使用：

```
select s.*
from state s
inner join
(
  SELECT s.countryid
  FROM [State] s
  INNER JOIN [PostalCode] p
    ON p.[StateID]=s.[ID]
  INNER JOIN [Country] c
    ON s.[CountryID]=c.[ID]
  WHERE p.[Zip]='90028'
) c
  on s.countryid = c.countryid; 
```

或者您可以使用：

```
select s1.*
from state s1
where exists (select s2.countryid
              from state s2
              inner join country c
                on s2.countryid = c.id
              inner join postalcode p
                on s2.id = p.stateid
              where p.zip = 90028
               and s1.countryid = s2.countryid) 
```

# c# - 使用线程安全的 .NET 4+ 集合时是否可能导致死锁？

> ID：15438481
> 
> 赞同：3
> 
> 时间：2013-03-15T17:21:00.037
> 
> 标签：c#, .net, multithreading

System.Collections.Concurrent 中的集合在所有情况下都是完全线程安全的吗？或者在使用来自多个线程的多个并发集合时理论上可能导致死锁？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T17:44:54.023

好吧，某些类型当然可以以导致死锁的方式使用。例如，[BlockingCollection.Take](http://msdn.microsoft.com/en-us/library/dd287085.aspx)阻塞直到一个元素可用，所以如果你在 UI 线程和一些后台线程上调用它，Take 的生成项目最终不得不通过 UI 线程同步某些东西（比如有一个 COM 依赖项在后台默默地编组），你可以死锁。与处理线程一样，即使使用“线程安全”类，也建议保持合理的偏执程度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T17:30:21.467

如 MSDN 中所述，这些类（大部分）是线程安全的。例如，[文档`ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)明确指出：

> ConcurrentQueue 的所有公共和受保护成员都是线程安全的，并且可以从多个线程同时使用。

所有需要的同步都在内部处理。

另请注意，某些类型有一些较小的线程安全问题，例如`BlockingCollection<T>.Dispose()`，它不是线程安全的，但[在 MSDN 上再次记录](http://msdn.microsoft.com/en-us/library/dd267312.aspx)：

> Dispose 方法不是线程安全的。BlockingCollection 的所有其他公共和受保护成员都是线程安全的，并且可以从多个线程同时使用。

话虽如此，如果您自己进行同步，则可能会导致与这些类型的使用无关的死锁。如果您遇到死锁，很可能是由于您的代码或您正在使用的库中的其他一些同步。

# intuit-partner-platform - 使用 .NET IPP 数据服务 SDK 创建账单

> ID：15438490
> 
> 赞同：1
> 
> 时间：2013-03-15T17:21:40.677
> 
> 标签：intuit-partner-platform

我有一个 SaaS 应用程序，可以在 QuickBooks Online 中创建费用。在 IPP 文档（[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Bill](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Bill)）中，它表明您可以在行对象上指定 AccountID （它是文档中的最后一个字段），即需要创建基于帐户的费用。

但是，在 BillLine 的 .NET 对象中，似乎无法指定该数据。有谁知道如何使用 .NET SDK 创建“基于帐户的账单费用”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:11:02.497

```
Intuit.Ipp.Data.Qbo.BillLine billLine = new Intuit.Ipp.Data.Qbo.BillLine();
billLine.ItemsElementName = new ItemsChoiceType1[] {ItemsChoiceType1.AccountId, ItemsChoiceType1.AccountName};
billLine.Items = new object[] {new IdType() {idDomain = idDomainEnum.QB, Value = "123"}, "MyAccountName"}; 
```

任何未直接公开的属性都在 ItemsElementName 属性中定义，并且值在 Items 对象数组中的相应索引中传递。您将在 .NET DevKit 中的大多数实体中看到这一点。

# php - 如何读取传递给视图的数组

> ID：15438498
> 
> 赞同：0
> 
> 时间：2013-03-15T17:22:20.923
> 
> 标签：php, codeigniter

我在控制器端有一个多维数组 $data 。我用 G1 - G100 之间的任何组值填充 $data[$group]。然后我通过控制器将数组传递给视图：

```
$this->load->view('example', $data); 
```

在视图端，我可以访问变量，例如 $G1、$G2。问题是我事先不知道会通过什么。我可以尝试在视图中像这样访问我的变量：

```
if (isset($G1)) echo $G1;
if (isset($G2)) echo $G2;
if (isset($G3)) echo $G3; 
```

但是，当控制器端 $data[$group] 中的组变量可以具有许多不同的值时，这变得非常不切实际。

有没有办法事先从视图中检查正在发送的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:31:16.633

我认为不可能知道将传递什么，但是您可以将 $data 本身放入一个数组中并将该数组传递给视图，然后在视图中使用 foreach 遍历 $data：

```
//controller
$newdata = array(
    //maybe other data
    'data' => $data
);

$this->load->view('someview', $newdata);

//view

foreach($data as $key => $value){
    //do whatever you like
} 
```

# ios - 游戏类的 Objective C 多态性

> ID：15438501
> 
> 赞同：1
> 
> 时间：2013-03-15T17:22:27.253
> 
> 标签：ios, objective-c, cocos2d-iphone, polymorphism

我的情况是我的应用程序中有几个不同的小游戏。游戏在表格视图中列出，当其中一个被选中时，我创建了相应的游戏对象。我需要游戏对象有一个共同的父类，这样我就可以做一些常见的事情，比如暂停和恢复。

我有一个通用的 GameScene 类，它有一个通用的 GameLayer 属性：

```
@interface GameScene : CCScene {

}

@property (nonatomic, strong) GameLayer* gameLayer; 
```

然而，GameScene 的每个子类都有自己的 GameLayer 类型。例如，SuperMarioBros_GameScene 有一个 SuperMarioBros_GameLayer。当我初始化 SuperMarioBros_GameScene 时出现问题：

```
-(id) init
{
    if( (self = [super init])) {
        self.gameLayer = (SuperMarioBros_GameLayer*)[SuperMarioBros_GameLayer node];
        [self addChild: self.gameLayer];

        SuperMarioBros_InputLayer *inputLayer = [SuperMarioBros_InputLayer node];
        inputLayer.delegate = self.gameLayer; //ERROR (see below)
        [self addChild:inputLayer z:1 tag:2];
    }
    return self;
} 
```

一般来说，每个游戏都会有一个输入层，它会向游戏层发送 UI 消息。我收到此错误：

```
Assigning to 'id <SuperMarioBros_FireDelegate> from incompatible type GameLayer* 
```

我知道这是因为 SuperMarioBros_GameLayer 实现`<SuperMarioBros_FireDelegate>`了，但 GameLayer 没有。

所以我的问题是如何让 GameScene 类拥有可以是 GameLayer 的任何子类的多态属性？请记住，每种类型的 GameLayer 可能会根据其相应的输入层实现不同的协议？或者也许有更好的方法来解决这个问题？

同样，最终目标是能够从主游戏控制器进行调用，例如

```
[currentGameScene pause]; 
```

这反过来会做类似的事情：

```
[self.gameLayer pauseGameLoop]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:31:37.853

在`SuperMarioBros_GameScene`类的实现文件中，可以覆盖`gameLayer`类扩展中属性的属性声明：

```
@interface SuperMarioBros_GameScene ()
@property (nonatomic, strong) SuperMarioBros_GameLayer *gameLayer;
@end 
```

那么你不应该再得到编译器错误了。

这不会创建新的 getter 或 setter 函数（这些仍然在超类中调用），并且不会引入新的实例变量作为后备存储。它只告诉编译器这`self.gameLayer`是这个实现文件中子类的一个实例。

# java - 如何将巨大的 TIFF 图像转换为 PNG/JPEG 而不会出现内存不足错误？

> ID：15438506
> 
> 赞同：5
> 
> 时间：2013-03-15T17:22:43.713
> 
> 标签：java, image, image-processing, java-2d

我有一个 18000 * 18000 尺寸和**1.20 GB**大小的 tiff 文件。tiff 有 72 DPI。

我想使用 400 DPI 将此 TIFF 转换为 PNG/JPEG。

我正在使用以下代码来做到这一点

```
public static void ConvertTiffToJpg(String str_TiffUrl,
                String str_JpgFileDestinationUrl) throws Exception {
            try {
                FileSeekableStream obj_FileSeekableStream = new FileSeekableStream(
                        new File(str_TiffUrl));
                ImageDecoder obj_ImageDecoder = ImageCodec.createImageDecoder(
                        "tiff", obj_FileSeekableStream, null);
                RenderedImage obj_RenderedImage = obj_ImageDecoder
                        .decodeAsRenderedImage();
                JAI.create("filestore", obj_RenderedImage,
                        str_JpgFileDestinationUrl, "jpeg");
                obj_RenderedImage = null;
                obj_ImageDecoder = null;
                obj_FileSeekableStream.close();
            } catch (Exception ex) {
                throw ex;
            } 
```

上面的代码非常适用于较小的图像，然后指定的图像，例如尺寸小于 5000 * 5000 的 tiff 图像可以轻松转换为 JPEG / PNG [虽然我需要更改 PNG 编码器]，

但是当我尝试为上述文件运行相同的代码时，它会引发以下异常

```
Error: One factory fails for the operation "encode"
    Occurs in: javax.media.jai.ThreadSafeOperationRegistry
    java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
        at com.sun.media.jai.opimage.FileStoreRIF.create(FileStoreRIF.java:138)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)
        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
        at javax.media.jai.JAI.createNS(JAI.java:1099)
        at javax.media.jai.JAI.create(JAI.java:973)
        at javax.media.jai.JAI.create(JAI.java:1621)
        at com.vs.graphics.concepts.TiffToJpeg.ConvertTiffToJpg(TiffToJpeg.java:30)
        at com.vs.graphics.svg.SvgRefresh$1.actionPerformed(SvgRefresh.java:106)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
        at java.awt.Component.processMouseEvent(Component.java:6216)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3265)
        at java.awt.Component.processEvent(Component.java:5981)
        at java.awt.Container.processEvent(Container.java:2041)
        at java.awt.Component.dispatchEventImpl(Component.java:4583)
        at java.awt.Container.dispatchEventImpl(Container.java:2099)
        at java.awt.Component.dispatchEvent(Component.java:4413)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4556)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4220)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4150)
        at java.awt.Container.dispatchEventImpl(Container.java:2085)
        at java.awt.Window.dispatchEventImpl(Window.java:2475)
        at java.awt.Component.dispatchEvent(Component.java:4413)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
    Caused by: java.lang.OutOfMemoryError: Java heap space
        at java.awt.image.DataBufferByte.<init>(DataBufferByte.java:42)
        at java.awt.image.Raster.createInterleavedRaster(Raster.java:253)
        at java.awt.image.Raster.createInterleavedRaster(Raster.java:194)
        at com.sun.media.jai.codecimpl.JPEGImageEncoder.encode(JPEGImageEncoder.java:182)
        at com.sun.media.jai.opimage.EncodeRIF.create(EncodeRIF.java:70)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
        at com.sun.media.jai.opimage.FileStoreRIF.create(FileStoreRIF.java:138)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
        at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
        at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
        at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
        at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)
        at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
        at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
        at javax.media.jai.JAI.createNS(JAI.java:1099)
        at javax.media.jai.JAI.create(JAI.java:973)
        at javax.media.jai.JAI.create(JAI.java:1621)
        at com.vs.graphics.concepts.TiffToJpeg.ConvertTiffToJpg(TiffToJpeg.java:30)
        at com.vs.graphics.svg.SvgRefresh$1.actionPerformed(SvgRefresh.java:106)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    Error: One factory fails for the operation "filestore"
    Occurs in: javax.media.jai.ThreadSafeOperationRegistry 
```

这是因为内存不足错误。

**是否有可用的 Tiled Image Writer 或 Fragment Image Writer 使用它我们将一次只转换图像的一部分，因此我们可以使用可用的普通内存我认为它可能被称为使用图像分割进行转换。**

**编辑**

*使用 pngJ 直接编写 png 文件。*

**我的目的是将 SVG 画布转码为 400 DPI 的 PNG**

如果我为此使用[PNGTranscoder](http://xmlgraphics.apache.org/batik/javadoc/org/apache/batik/transcoder/image/PNGTranscoder.html)，它会为提到的图像大小引发内存不足异常。

所以我使用[了 TiledImageTranscoder](http://svn.apache.org/repos/asf/xmlgraphics/batik/trunk/contrib/tiledTranscoder/TiledImageTranscoder.java) ，它使用以下代码将 SVG 转码为图像。

```
protected void transcode(Document document, String uri,
            TranscoderOutput output) throws TranscoderException {

        // Sets up root, curTxf & curAoi
        super.transcode(document, uri, output);

        Filter f = this.root.getGraphicsNodeRable(true);

        RenderContext rc = new RenderContext(curTxf, null, null);
        RenderedImage img = f.createRendering(rc);

        // prepare the image to be painted
        int w = img.getWidth();
        int h = img.getHeight();

        try {
            int bands = img.getSampleModel().getNumBands();
            int[] off = new int[bands];
            for (int i = 0; i < bands; i++)
                off[i] = i;
            SampleModel sm = new PixelInterleavedSampleModel(
                    DataBuffer.TYPE_BYTE, w, (100000 + w - 1) / w, bands, w
                            * bands, off);

            RenderedImage rimg = new FormatRed(GraphicsUtil.wrap(img), sm);

            TIFFImageEncoder enc = new TIFFImageEncoder(output
            .getOutputStream(), null);
                    enc.encode(rimg);
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    } 
```

**如您所见，上面的代码最终使用 TIFFImageEncoder 逐步写入磁盘并在我的情况下生成 1.30 GB 的 TIFF 文件。**

所以这就是为什么我需要将这个生成的文件转换为 PNG 文件。

我的问题是专门针对@leonbloy

**我们可以在这里使用 pngJ 库中的 PNGWriter 直接使用 400 DPI 写入 png 文件而不会出现内存不足的错误，这样我们也可以节省时间并避免不必要的转换。**

或者

**我们可以用 pngJ 库覆盖[PngImageWriter](http://xmlgraphics.apache.org/batik/javadoc/org/apache/batik/ext/awt/image/codec/png/PNGImageWriter.html)的 writeImage 方法，从而实现我们的目标吗？**

谢谢你米希尔帕雷克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:01:27.610

您可能会尝试找到一些支持渐进式（例如，一次一行）处理的 TIFF 解码器和 JPEG/PNG 编码器。这个[TIFF 解码器](http://painterly.costar.sfu.ca/browser/trunk/libs/jiu/net/sourceforge/jiu/codecs/tiff/TIFFDecoder.java?rev=372)似乎支持它； [PNGJ](https://code.google.com/p/pngj/)支持它。

更新：尝试将 PNGJ 插入 PNGTrasncoder 似乎是可行的方法，但这并不容易：您（或我，或某人）必须编写 RenderedImage 格式和 PNGJ 期望的格式之间的桥梁。（PNGJ 有意与 解耦`java.awt.*`）。有时间的时候可能会看一下，这似乎是一个有趣的替代方案，可以包含在 Batik 中，我预见的唯一限制是我不支持交错书写，但我认为这无关紧要。

# ruby-on-rails - Mongoid 字段类型：Moped::BSON::ObjectId 和 rabl

> ID：15438507
> 
> 赞同：0
> 
> 时间：2013-03-15T17:22:46.470
> 
> 标签：ruby-on-rails, mongoid, rabl

场景：Rails + Mongoid + Rabl

我有一个像

```
class User
   has_many :cards
   field    :name 
```

和

```
class Card
   belongs_to :user
   field      :anotheruser, type:Moped::BSON::ObjectId 
```

我是 rabl 新手，所以我对你们 rabl 专家的问题是，有没有一种优雅的方法可以通过 BSON:ObjectId 直接从 rabl 查询“另一个用户”对象。我可以肯定地在我的控制器中施展魔法，但如果有的话，这将是非常方便的功能。

谢谢。

磷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:17:07.343

你的课程看起来不对，应该是这样的

```
class User
  include Mongoid::Document
  has_and_belongs_to_many :cards
  field    :name

class Card
   include Mongoid::Document
   has_and_belongs_to_many :user 
```

您应该能够使用正常的关系`user.cards`和`cards.users`

# c# - Graphics.DrawImage() - 抛出内存不足异常

> ID：15438509
> 
> 赞同：3
> 
> 时间：2013-03-15T17:22:54.213
> 
> 标签：c#

我有一些图像需要做一些粗略的调整大小的工作——为了这个例子的目的，假设我需要将给定图像的宽度和高度增加 4 个像素。我不确定为什么对 Graphics.DrawImage() 的调用会引发 OOM——这里的任何建议将不胜感激。

```
class Program
{
    static void Main(string[] args)
    {
        string filename = @"c:\testImage.png";

        // Load png from stream
        FileStream fs = new FileStream(filename, FileMode.Open);
        Image pngImage = Image.FromStream(fs);
        fs.Close();

        // super-hacky resize
        Graphics g = Graphics.FromImage(pngImage);
        g.DrawImage(pngImage, 0, 0, pngImage.Width + 4, pngImage.Height + 4); // <--- out of memory exception?!

        // save it out
        pngImage.Save(filename, System.Drawing.Imaging.ImageFormat.Png);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-26T23:17:34.200

我只是有同样的问题。但是修复输出图形的大小并没有解决我的问题。我意识到我尝试使用非常高质量的图像来绘制图像，当我在大量图像上使用代码时会消耗太多内存。

```
g.CompositingQuality = CompositingQuality.HighQuality;
g.InterpolationMode = InterpolationMode.HighQualityBicubic;
g.SmoothingMode = SmoothingMode.HighQuality; 
```

在注释掉这些行之后，代码运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:27:25.343

您的 Graphics 表面仅足以容纳原始大小的图像。您需要创建正确大小的新图像并将其用作 Graphics 对象的源。

```
Image newImage = new Bitmap(pngImage.Width + 4, pngImage.Height+4);
Graphics g = Graphics.FromImage(newImage); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:31:38.880

这可能无法完成您想做的事情，因为图像的大小与 指定的大小相同`FromImage`，而是可以使用`Bitmap`该类：

```
using (var bmp = new Bitmap(fileName))
{
    using (var output = new Bitmap(
        bmp.Width + 4, bmp.Height + 4, bmp.PixelFormat))
    using (var g = Graphics.FromImage(output))
    {
        g.DrawImage(bmp, 0, 0, output.Width, output.Height);

        output.Save(outFileName, ImageFormat.Png);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:28:40.410

你能试试这个修复吗？

```
 class Program
    {
        static void Main(string[] args)
        {
            string filename = @"c:\testImage.png";

            // Load png from stream
            FileStream fs = new FileStream(filename, FileMode.Open);
            Image pngImage = Image.FromStream(fs);
            fs.Close();

            // super-hacky resize
            Graphics g = Graphics.FromImage(pngImage);
            pngImage = pngImage.GetThumbnailImage(image.Width, image.Height, null, IntPtr.Zero);
            g.DrawImage(pngImage, 0, 0, pngImage.Width + 4, pngImage.Height + 4); // <--- out of memory exception?!

            // save it out
            pngImage.Save(filename, System.Drawing.Imaging.ImageFormat.Png);
        }
    } 
```

受此问题启发：[Help to resolve 'Out of memory' exception when calling DrawImage](https://stackoverflow.com/questions/5288204/help-to-resolve-out-of-memory-exception-when-calling-drawimage)

# ruby-on-rails - Rails - options_from_collection_for_select - 根据下拉列表中当前突出显示的内容显示其他字段？

> ID：15438512
> 
> 赞同：0
> 
> 时间：2013-03-15T17:22:57.213
> 
> 标签：ruby-on-rails

我有一个返回正确集合的 options_from_collection_for_select 调用。许多记录的名称显示为空白值。有没有办法在下拉列表中显示当前突出显示的记录的其他属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:49:32.813

您不仅限于数据库中表示的对象的属性，因此您可以简单地在模型中定义一个替代方法，如果 name 为 nil，则返回 name/替代属性，例如：

```
class User
  def name_or_alternative
    name || alternative
  end
end 
```

然后从你那里调用这个方法`options_from_collection_for_select`。

# algorithm - 文本处理的形式化方法

> ID：15438520
> 
> 赞同：3
> 
> 时间：2013-03-15T17:23:20.690
> 
> 标签：algorithm, computer-science, compiler-theory, automata

在一次编码面试中，我被问到下一个问题：

> 编写一个程序，计算输入流中的字数和行数。
> 假设您有一个使用 nextChar() 方法的阅读器。

乍一看，它看起来很简单。但后来你意识到，你需要处理很多状态，比如：

*   连续的字/行分隔符
*   不同的词尾条件 - 单词分隔符或行分隔符或 EOF
*   以单词分隔符开头的新字符串
*   ETC

在面试中，我想出了一种带有许多 if-else 和标志的意大利面条代码。

但是我认为对于这类问题应该有一个正式的方法，它可以让你保证你处理了所有可能的情况，并且可以给出一个结构化的解决方案。

我认为这可能来自自动机理论或编译器理论（我以前从未深入研究过这两个领域中的任何一个）。

因此，如果您在上述问题中识别出某种类型的问题，或者您知道哪种理论涵盖了此类问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:26:27.110

[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)。

这本质上是一个小的[词法分析](http://en.wikipedia.org/wiki/Lexical_analysis)任务。解决方案永远不会很漂亮，但是如果您以以下方式编写代码，您可以对正确性充满信心：

```
curState <- NONE
while(c <- getChar)
    switch(curState) {
       case NONE:
           switch(c) {
               // ....
           }
           break;
       // .....
    }
} 
```

您还可以使用数据结构来存储转换函数（给定一个状态和一个字符，下一个状态是什么？）但对于您的情况，只编写代码可能是最好的选择。

...不要忘记您的文本编码！UTF-16，对吧？:)

您可能想查看 Unix`wc`实用程序的实现：

*   [忙箱](https://github.com/mozilla-b2g/busybox/blob/master/coreutils/wc.c)
*   [GNU](http://git.savannah.gnu.org/gitweb/?p=coreutils.git;a=blob_plain;f=src/wc.c;hb=HEAD)
*   [蜻蜓 BSD](http://code.metager.de/source/xref/DragonFly-BSD/usr.bin/wc/wc.c)
*   [Mac OS X（来自 FreeBSD）](http://www.opensource.apple.com/source/text_cmds/text_cmds-84/wc/wc.c)

这些将比你在面试中所做的更精致和更有特色，但无论如何都很高兴看到。

# jquery - jQuery 自定义内容滚动器在 Chrome 中不起作用

> ID：15438521
> 
> 赞同：0
> 
> 时间：2013-03-15T17:23:21.480
> 
> 标签：jquery, google-chrome

我有一个[网站](http://www.blackjackcafe.it/ferrarichallenge/facebook)，其中 [jQuery 自定义内容滚动](http://manos.malihu.gr/jquery-custom-content-scroller)器在 Chrome 中不起作用。

如您所见，在名为“Lista Foto”和“Foto Album”的照片列表中，照片下方有一个水平滚动条。

但它仅适用于 Firefox，不适用于 Chrome。

有没有人可以帮助我？

马可

[编辑] 这是我调用库的脚本：

```
(function($){
jQuery(document).ready(function($) {
    $('#loader').fadeIn();
    $('#preloader').hide();
    $(".fotothumb,.fotothumb2").mCustomScrollbar({horizontalScroll: true});
});

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:19:07.390

问题是文件.htaccess。现在的文件是

```
RewriteEngine On
RewriteBase /

RewriteRule ^ferrarichallenge/?$ ferrari.php [NC,L]
RewriteRule ^ferrarichallenge/facebook/?$ ferrarifacebook.php
RewriteRule ^ferrarichallenge/youtube/?$ ferrariyoutube.php [NC,L]

#<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
#Header set Expires "Wed, 15 Apr 2020 20:00:00 GMT"
#Header set Cache-Control "public"
#</FilesMatch>

#SetOutputFilter DEFLATE
#AddOutputFilter DEFLATE text/plain
#AddOutputFilter DEFLATE text/xml
#AddOutputFilter DEFLATE application/xhtml+xml
#AddOutputFilter DEFLATE text/css
#AddOutputFilter DEFLATE application/xml
#AddOutputFilter DEFLATE image/svg+xml
#AddOutputFilter DEFLATE application/rss+xml
#AddOutputFilter DEFLATE application/atom_xml
#AddOutputFilter DEFLATE application/x-javascript
#AddOutputFilter DEFLATE application/x-httpd-php
#AddOutputFilter DEFLATE application/x-httpd-fastphp
#AddOutputFilter DEFLATE application/x-httpd-eruby
#AddOutputFilter DEFLATE text/html
#SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
#SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
#SetEnvIfNoCase Request_URI \.pdf$ no-gzip dont-vary
#SetEnvIfNoCase Request_URI \.avi$ no-gzip dont-vary
#SetEnvIfNoCase Request_URI \.mov$ no-gzip dont-vary
#SetEnvIfNoCase Request_URI \.mp3$ no-gzip dont-vary
#SetEnvIfNoCase Request_URI \.mp4$ no-gzip dont-vary
#SetEnvIfNoCase Request_URI \.rm$ no-gzip dont-vary
#BrowserMatch ^Mozilla/4 gzip-only-text/html
#BrowserMatch ^Mozilla/4\.0[678] no-gzip
#BrowserMatch \bMSIE !no-gzip !gzip-only-text/html 
```

如果我取消注释所有前一行，水平滚动条将隐藏。

我没有时间深入研究这个问题，但这解决了我的问题。

# jquery - object20Object Validation 插件 Flask

> ID：15438524
> 
> 赞同：0
> 
> 时间：2013-03-15T17:23:33.070
> 
> 标签：jquery, python, jquery-validate, flask

我正在尝试将 Validation jQuery 插件与烧瓶框架一起使用。这是我的代码：

```
email: {
    required: true,
    email: true,
    remote: {
        url: $.getJSON($SCRIPT_ROOT + "/_check_mail"),  
         }              
}, 
```

此请求应发送到检查邮件是否已存在于数据库中的服务器是或否：

```
@app.route('/_check_mail')
def check_mail():
    mail = request.args.get('email')
    check = database.check_mail(mail)
    return check 
```

如果邮件不存在，检查变量为“True”，如果邮件已经存在，则保存字符串“This mail already exists”。

但是，当我尝试将其发送到服务器时，我收到此错误消息：

*   请求网址：http://0.0.0.0:5000/[object%20Object]?email=arnoutaertgeerts%40gmail.com
*   请求方法：GET
*   状态码：404 未找到

已经尝试了一些其他的东西，但没有任何效果。有任何想法吗？

我想我可以使用 costum 方法使它工作，但是我需要做一个同步的 AJAX 请求......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:41:18.830

我怀疑您是否设置了处理程序来处理`[object Object]`路线。;-)

问题似乎在于`$SCRIPT_ROOT`它实际上是某种 JavaScript 对象 - 确保您传递给的最终 URL`getJSON`是一个字符串（指向正确的端点）。

在您确认您点击了正确的端点后，您需要确保您返回的是有效的 JSON：

```
from flask import jsonify

# additional code

@app.route("/_check_mail")
def check_mail():
    # ... snip ...
    return jsonify(valid=check) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:33:13.433

$SCRIPT_ROOT 可能未定义。您必须自己明确定义它。

[来自烧瓶文档](http://flask.pocoo.org/docs/patterns/jquery/#where-is-my-site)：

```
<script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script> 
```

编辑 ：

你的代码很神秘。$.getJSON 是 $.ajax 只做 GET 请求并接收 json 响应的快捷方式。$.getJSON 返回 javascript 对象，而不是字符串。您实际上是如何将您的请求发送到的`check_mail`？

示例代码是：

```
$.ajax({
  type : 'GET',
  data : { email : /* argument to be supplied into `mail` var of flask's `check_email` view */ },
  url : $SCRIPT_ROOT + '/_check_email',
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T11:09:42.993

我设法修复它（现在是真实的）

问题来自 .getJSON 方法。这个方法是一个简短的方法

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

验证插件的远程调用实际上已经在使用它！

所以我唯一需要做的就是：

```
email: {
    required: true,
    email: true,
    remote: {
        url: "_check_mail",
        data: {
            email: function() {
                return $("#email").val();
                }
            }
         }
    }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T21:41:53.093

使用该`messages`选项而不是尝试从远程响应中读取它。

```
$(document).ready(function() {

    $('#myform').validate({
        rules: {
            email: {
                required: true,
                email: true,
                remote: $.getJSON($SCRIPT_ROOT + "/_check_mail") // make sure it just returns true or false
            }
        },
        messages:{
            email: {
                remote: "custom error message"
            }
        }           
    });

}); 
```

# version-control - 为什么在 Visual Studio 2012 中默认启用自动解决冲突？

> ID：15438530
> 
> 赞同：8
> 
> 时间：2013-03-15T17:23:48.293
> 
> 标签：version-control, tfs, visual-studio-2012

我们最近安装了 Visual Studio 2012，我正在与我们团队的另一位成员一起开发一个全新的项目，使用 Team Foundation Server 2010 进行源代码控制。我最近注意到我的一些文件在我签入时随机损坏。然后在输出窗口中注意到有关冲突的通知，这些冲突已自动解决！？

事实证明这是 Visual Studio 2012 中的默认设置！

我在 MSDN 上找到了一篇文章，详细介绍了如何关闭此设置（[http://msdn.microsoft.com/en-gb/library/vstudio/ms181432.aspx#automatic_options](http://msdn.microsoft.com/en-gb/library/vstudio/ms181432.aspx#automatic_options)），但我很好奇是否有人知道为什么这可能毁灭性的设置会默认开启吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T19:09:38.050

因为它是大多数其他工具中的默认设置，而使用 Team Foundation Server 的人发现他们必须明确告诉该工具进行自动合并而感到沮丧。更重要的是，人们甚至没有发现他们必须*明确*告诉工具自动合并，并抱怨合并分支产生的大量冲突，因为在许多工具中，用户甚至没有被告知“合并冲突”，直到它*无法*自动合并。因此，Team Foundation Server 似乎未能正确执行三向合并。

显然，这里正确的默认值是判断调用。我没有成功，但我支持它。

不过，我担心默认值的这种更改会暴露合并工作流程中的一些问题。Automerge[*绝对*可以产生人类不会产生的结果](https://www.edwardthomson.com/blog/conflict-resolution-in-teamprise.html)，这是毫无疑问的。但这是一个完善的标准，通常被认为是安全、有用且*普遍*正确的。

如果这在某种程度上是“危险的”，那么您的流程应该在您签入之前很久就捕捉到。希望您在签入之前很久就已经在本地构建并运行完整的测试通过，如果您未能成功，您的持续集成构建*也会*捕捉到这些错误这样做。

如果 automerge 产生不正确的输出，您始终可以手动合并文件。而且，当然，您也可以将自动合并选项设置为“关闭”。

# spring - Hibernate (4.1.2) 和 Spring (3.1.2) – ManyToMany 关系不在 JoinTable 中存储记录

> ID：15438531
> 
> 赞同：1
> 
> 时间：2013-03-15T17:23:55.673
> 
> 标签：spring, hibernate, jpa

我有一个问题，需要你的帮助来解决这个问题。希望这个胎面可以成为类似问题的参考……</p>

在我最小化的业务模型中，有用户和标题。Title 应该先创建，并且可以分配给多个用户，并且用户可以共享相同的 Title。因此，我创建了两个名为 User 和 Title 的实体，它们具有 @ManyToMany 关系，并决定 Title 应该拥有这种关系。此外，我有一个 UnitTest 来运行这个示例。

**用户实体**

```
public class User {

    Long id;
    String name;
    Set<Title> titles = new HashSet<Title>();

    @Id
    @GeneratedValue
    @Column(name = "id")    
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column(name = "name")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    /*============ Approach1 ============*/
//  @ManyToMany(mappedBy = "users")
    /*============ Approach2 ============*/
//  @ManyToMany
    /*============ Approach3 ============*/
    @ManyToMany
    @JoinTable( name = "tb_title_user",
                joinColumns = @JoinColumn(name = "user_id"),
                inverseJoinColumns = @JoinColumn(name = "title_id"))
    public Set<Title> getTitles() {
        return titles;
    }
    public void setTitles(Set<Title> titles) {
        this.titles = titles;
    }

} 
```

**标题实体**

```
public class Title {

    Long id;
    String description;
    Set<User> users = new HashSet<User>();

    @Id
    @GeneratedValue
    @Column(name = "id")    
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column(name = "description")
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }

    /*============ Approach1 & Approach2 & Approach3 ============*/
    @ManyToMany
    @JoinTable( name = "tb_title_user",
                joinColumns = @JoinColumn(name = "title_id"),
                inverseJoinColumns = @JoinColumn(name = "user_id"))
    public Set<User> getUsers() {
        return users;
    }
    public void setUsers(Set<User> users) {
        this.users = users;
    }
} 
```

**单元测试**

```
public class UserTest {

    @Autowired
    private SessionFactory sessionFactory;

    @Test
    @Rollback(false)
    @Transactional
    public void saveUser(){
        Session session = sessionFactory.getCurrentSession();
        String now = new Date().toString();

        Title title = new Title();
        title.setDescription("TitleDescription: " + now);
        session.save(title);

        User user = new User();
        user.setName("UserName: " + now);
        user.getTitles().add(title);

        session.saveOrUpdate(user);
    }

} 
```

如果您查看上面的代码，您将看到三种不同的方法。下面描述了数据是否正确存储在数据库表中：

```
 Title      User     JoinTable
Approach1    Yes        Yes      No
Approach2    Yes        Yes      Yes
Approach3    Yes        Yes      Yes 
```

以下是我对每种方法的想法：

**方法1**

根据 Hibernate 文档（[http://docs.jboss.org/hibernate/core/4.1/manual/en-US/html/ch07.html#d5e5537](http://docs.jboss.org/hibernate/core/4.1/manual/en-US/html/ch07.html#d5e5537)），我应该遵循 Approach1。特别是，因为文档明确提到：

> “如前所述，对方不必（不得）描述物理映射：包含所有者方属性名称的简单 mappedBy 参数将两者绑定。”</p>

如果我理解正确，我不必（不得）在 User 实体中添加 @JoinTable。

**方法2**

它可以工作，但它忽略了我的 @JoinTable 定义并创建了自己的名为: 的表`tb_user_tb_title`。我闻起来很腥。

**方法3**

它有效，但文档说不要使用它。因此，在我看来，我可能会后悔在企业产品中使用这种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:04:40.140

唯一正确的方法是第一种：

```
@ManyToMany(mappedBy = "users")
public Set<Title> getTitles() {
    return titles;
}

...

@ManyToMany
@JoinTable(name = "tb_title_user",
           joinColumns = @JoinColumn(name = "title_id"),
           inverseJoinColumns = @JoinColumn(name = "user_id"))
public Set<User> getUsers() {
    return users;
} 
```

反方用`mappedBy`属性说：“我是反方，去看看`users`目标实体中的属性，看看这个关联是怎么映射的。”

你做错的是你只修改了测试中的反面。JPA/Hibernate 只考虑所有者方知道是否存在关联。所以而不是做

```
user.getTitles().add(title); 
```

你应该做

```
title.getUsers().add(user); 
```

甚至更好的是，两者都做，以确保对象图是连贯的。

我真的希望这个步骤能成为类似问题的参考，但我对此表示怀疑，因为我已经回答了这个问题无数次，而且它一次又一次地出现，尽管它在文档中得到了明确的解释：

> 如果关联是双向的，则一侧必须是所有者，一侧必须是反向端（即在更新关联表中的关系值时将被忽略）：
> 
> [下面是一个示例，在双向多对命名关联的每一侧都有适当的注释]

# javascript - setTimeout() 方法中的 clearTimeout() 在 JS 中不起作用

> ID：15438532
> 
> 赞同：8
> 
> 时间：2013-03-15T17:24:03.437
> 
> 标签：javascript, timer, settimeout

`clearTimeout()`内部`setTimeout()`方法在 JavaScript 中不起作用

```
var c = 0;
var t;

function timedCount() {
    document.getElementById('txt').value = c;
    c = c + 1;
    if (c == 5) {
        clearTimeout(t);
    }
    t = setTimeout(function () {
        timedCount()
    }, 1000);
} 
```

[jsFiddle](http://jsfiddle.net/askkathir/SEGtY/5/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T17:30:29.440

您需要阻止执行其余代码，实际上您是`t`在清除`setTimeout`. [小提琴](http://jsfiddle.net/bVFd2/)

```
var c = 0;
var t;

function timedCount() {
    document.getElementById('txt').value = c;
    c = c + 1;
    if (c == 5) {
        clearTimeout(t);
        return false;
    }
    t = setTimeout(timedCount, 1000);
} 
```

或者只使用以下`else`语句：

```
if (c == 5) {
  clearTimeout(t);
  // do something else
}else{
  t = setTimeout(timedCount, 1000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:30:48.333

当您调用时，永远不会有超时来清除，`clearTimeout`因为最后一个已经触发，而下一个尚未设置。

你想改变你的逻辑，这样`if (c !== 5) { setTimeout(etc etc) }`

# selenium - 有没有办法真实地测试网站的移动性能？

> ID：15438534
> 
> 赞同：0
> 
> 时间：2013-03-15T17:24:04.927
> 
> 标签：selenium, android-emulator, ios-simulator

以实际方式测试移动网站性能的最佳做法是什么？

我对收集指标本身并不太感兴趣，但更多的是关于如何从 selenium（或其他）驱动真实设备（iOS、Android）。或者使用具有相似特性的模拟器（模拟目标设备的 CPU 和内存）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:11:46.390

至少对于诺基亚手机，您可以使用诺基亚远程设备访问。[http://www.developer.nokia.com/Devices/Remote_device_access/](http://www.developer.nokia.com/Devices/Remote_device_access/)

不确定其他制造商是否提供这样的服务，并在实时网络上的真实设备上进行开发访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:11:52.803

我相信您正在寻找的是 Selenium 内置的 AndroidDriver。它完全符合您的要求：

> Android WebDriver 测试可以在模拟器或手机和平板电脑的真实设备上运行。

查看[此](https://code.google.com/p/selenium/wiki/AndroidDriver)链接了解更多信息

编辑：[这](https://code.google.com/p/selenium/wiki/IPhoneDriver)是iOS驱动程序

祝你好运！

# c - 检查字符串输入中定义的字符

> ID：15438536
> 
> 赞同：0
> 
> 时间：2013-03-15T17:24:09.327
> 
> 标签：c

我一直在阅读一些关于 C 的东西，我是一个初学者，此时这就是我所处的位置：

此函数保留来自键盘的输入：

```
void store_sequence(char *arg) {
    strcpy(estado.seq, arg);
    estado.tamanho = strlen(arg);
} 
```

这就是我到目前为止检查键盘上插入的字符串上是否有 As 的内容：

```
void sequence_does_contain_As_and_Bs(char *arg) {

  char buf [] = estado.seq;

  s = strchr (buf, 'A');

  if (s != NULL)
    printf ("found a 'A' at %s\n", s);

} 
```

所以，基本上，我需要检测输入字符串是否只有 As 和 Bs

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:26:55.780

看看这个 - [http://www.cplusplus.com/reference/cstring/](http://www.cplusplus.com/reference/cstring/)

特别是`strspn()`和`strcspn()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:30:50.673

尝试这个：

```
char buf [] = estado.seq;
int len = estado.tamanho;
int i;
int contains = 1;
for (i = 0; i < len; ++i)
    if (buf[i] != 'A' && buf[i] != 'B') {
        contains = 0;
        break;
    }
if (contains)
  // do whatever you want if the string contains only As and Bs 
```

# php - 为简单的 PHP 登录脚本设置配置文件

> ID：15438540
> 
> 赞同：0
> 
> 时间：2013-03-15T17:24:25.067
> 
> 标签：php, mysql, login

我正在为一个站点创建一个简单的 PHP 登录页面，但是我在正确查询数据库时遇到了问题，因为我不习惯设置这种东西。有人可以让我知道我在这里缺少什么吗？

基本前提是登录页面只需要一个密码，该密码已在 P_page 表中名为“密码”的字段下设置，但我不清楚如何完全设置它。

此外，我意识到我正在使用的一些东西已经贬值，但我并不是 100% 清楚使用更新的功能。

```
<?php
$db_username="XY";
$db_password="ZZ";
$db_name="XYZ";
$db_host="localhost";
$Plogin = mysql_pconnect($db_host, $db_username, $db_password) or trigger_error(mysql_error(),E_USER_ERROR);
?>

<?php 
mysql_select_db($db_name, $Plogin);
$query_iFp = "SELECT * FROM P_page ORDER BY title";
$rsiFp = mysql_query($query_iFp, $Plogin) or die(mysql_error());
$row_iFp = mysql_fetch_assoc($rsIfp);
?>

<?php
session_start();
$secured = false;
$password = "$row_iFp";
?> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:38:26.233

你只需要这样做：

```
$password = $row_iFp['Password']; 
```

此外，如果您只选择密码字段并且您真的只需要 1 个结果，您可以将查询优化为：

```
$query_iFp = "SELECT Password FROM `P_page` ORDER BY title LIMIT 0, 1"; 
```

使用`SELECT *`通常被认为是不好的做法。始终指定您真正需要的字段。

# asp.net-mvc-4 - 检测 html table Knockout/ASP.NET MVC 中的选定行

> ID：15438542
> 
> 赞同：2
> 
> 时间：2013-03-15T17:24:28.153
> 
> 标签：asp.net-mvc-4, knockout.js

我已经使用 ko.mapping.fromJS(Model) 将 ASP.NET MVC viewModel 加载到 KnockoutJS 中。

我的 viewModel 看起来像这样：

```
public IEnumerable<FunkyThing>funkyThings;
public FunkyThing selectedFunkyThing; 
```

然后我在我的 HTML 视图中得到了一个看起来像这样的表格

```
<tbody data-bind="foreach: funkyThings">
    <tr>
        <td data-bind="text:name"></td>  
        <td data-bind="text:funkiness"></td>  
        <td><a href='#' title="Select Funky Thing" data-bind="click: $root.selectFunkyThing"></a>
       </td>
    </tr>
</tbody> 
```

这张桌子一切都很好。点击 select funky thing 链接愉快地调用 selectFunkyThing 函数：

```
 model.selectFunkyThing= function (funkyThing) {
        window.location = '@Url.Action(MVC.FunkyThingController.Index())' + "?funkyThingID=" + funkyThing.funkyThingID();

    }; 
```

这反过来又刷新了页面。重新加载 MVC 视图模型，并用选定的 FunkyThing 填充 selectedFunkyThing，然后从 MVC 视图模型中重新读取淘汰视图模型。到目前为止，一切都很好。

然后我想更新表格以突出显示所选条目。所以我更新了 tr 行如下：

```
<tr data-bind="css:{'selected': $root.isSelected()}"> 
```

并创建了新的淘汰赛功能：

```
 model.isSelected = function (funkyThing) {
            return funkyThing.funkyThingID== model.selectedFunkyThing.funkyThingID;

        }; 
```

但是......它不起作用。Chrome 会抛出一个 JavaScript 异常，指出 FunkyThing 参数未定义。从技术上讲，我认为我可以通过更改 MVC viewModel 以在数组中的每个 FunkyThing 上实际设置一个 isSelected 来解决它。但是我认为必须远离淘汰赛？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:12:17.347

你很亲近！我添加了`ko.utils.unwrapObservable`调用，因为我打赌 funkyThingID 是一个可观察的，而不仅仅是一个直接的属性——你自己在你的`selectFunkyThing`函数中做了这个。你也可以执行它们。不过，我喜欢 unwrap 的冗长。

```
model.isSelected = function (funkyThing) {
  var thisId = ko.utils.unwrapObservable(model.selectedFunkyThing.funkyThingID);
  return ko.utils.unwrapObservable(funkyThing.funkyThingID) == thisId;
}; 
```

然后在您的文档中，当 ko 解析绑定时，您实际上必须执行此函数

```
<tr data-bind="css:{'selected': $root.isSelected($data)}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:11:25.270

这些属性不是都可观察的，所以您需要将它们作为函数引用吗？我认为，您还需要使您的函数成为计算的 observable：

```
model.isSelected = ko.computed(function (funkyThing) {
    return funkyThing().funkyThingID() == model.selectedFunkyThing().funkyThingID();
}); 
```

# c# - 更新表格不更新详细信息

> ID：15438543
> 
> 赞同：0
> 
> 时间：2013-03-15T17:24:29.933
> 
> 标签：c#, asp.net, sql, sql-update

我创建了一个简单的表单来显示用户详细信息，其中包含以下字段：

```
First Name
Surname
Team Name
Team Stadium
Email
Receive Reminder
Receive Summary 
```

我检索登录用户的详细信息，并允许编辑字段以更新。但是，当更新按钮的点击事件被触发时，这些字段会恢复到它们的原始值。

这是我在 C# 中的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(WebConfigurationManager.ConnectionStrings["RaiseFantasyLeagueConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand("[dbo].[GetUsersProfile]", conn);
    cmd.CommandType = CommandType.StoredProcedure;

    string userId = Membership.GetUser().ProviderUserKey.ToString();
    SqlParameter userIDParam = new SqlParameter("@userId", userId);

    cmd.Parameters.Add(userIDParam);

    conn.Open();
    SqlDataReader dReader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
    while (dReader.Read())
    {
        FirstName.Text = (dReader["ManagerFirstName"].ToString());
        Surname.Text = (dReader["ManagerSurname"].ToString());
        TeamName.Text = (dReader["TeamName"].ToString());
        StadiumName.Text = (dReader["TeamStadium"].ToString());
        Email.Text = (dReader["Email"].ToString());
        Reminder.Checked = (bool)dReader["RecieveReminder"];
        Prediction.Checked = (bool)dReader["RecieveSummary"];
    }
    dReader.Close();
    conn.Close();
}

protected void UpdateDetailsButton_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(WebConfigurationManager.ConnectionStrings["RaiseFantasyLeagueConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand("[dbo].[UpdateUserDetails]", conn);
    cmd.CommandType = CommandType.StoredProcedure;

    string userId = Membership.GetUser().ProviderUserKey.ToString();
    SqlParameter userIDParam = new SqlParameter("@userId", userId);

    TextBox FirstNameTextBox = (TextBox)Master.FindControl("ContentPlaceHolderMain").FindControl("FirstName");
    SqlParameter FirstNameParam = new SqlParameter("@ManagerFirstName", FirstNameTextBox.Text);

    TextBox SurnameTextBox = (TextBox)Master.FindControl("ContentPlaceHolderMain").FindControl("Surname");
    SqlParameter SurnameParam = new SqlParameter("@ManagerSurname", SurnameTextBox.Text);

    TextBox TeamNameTextBox = (TextBox)Master.FindControl("ContentPlaceHolderMain").FindControl("TeamName");
    SqlParameter TeamNameParam = new SqlParameter("@TeamName", TeamNameTextBox.Text);

    TextBox TeamStadiumNameTextBox = (TextBox)Master.FindControl("ContentPlaceHolderMain").FindControl("StadiumName");
    SqlParameter TeamStadiumNameParam = new SqlParameter("@TeamStadium", TeamStadiumNameTextBox.Text);

    TextBox EmailTextBox = (TextBox)Master.FindControl("ContentPlaceHolderMain").FindControl("Email");
    SqlParameter EmailParam = new SqlParameter("@Email", EmailTextBox.Text);

    SqlParameter RecieveReminderParam = new SqlParameter("@RecieveReminder", 1);

    SqlParameter RecieveSummaryParam = new SqlParameter("@RecieveSummary", 1);
    cmd.Parameters.Add(userIDParam);
    cmd.Parameters.Add(FirstNameParam);
    cmd.Parameters.Add(SurnameParam);
    cmd.Parameters.Add(TeamNameParam);
    cmd.Parameters.Add(TeamStadiumNameParam);
    cmd.Parameters.Add(EmailParam);
    cmd.Parameters.Add(RecieveReminderParam);
    cmd.Parameters.Add(RecieveSummaryParam);

    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close();
} 
```

而对于 ASP

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolderMain" runat="server">
<div class="row">
    <div class="span12">
        <h3>
            My Profile</h3>
    </div>
</div>
<div class="row">
    <div class="span2">
        <label class="control-label" for="firstNameTextBox">
            First Name:</label>
    </div>
    <div class="span3">
        <asp:TextBox ID="FirstName" runat="server"></asp:TextBox>
    </div>
</div>
<div class="row">
    <div class="span2">
        <label class="control-label" for="surnameTextBox" >
            Surname:</label>
    </div>
    <div class="span3">
        <asp:TextBox ID="Surname" runat="server"></asp:TextBox>
    </div>
</div>
<div class="row">
    <div class="span2">
        <label class="control-label" for="teamNameTextBox">
            Team Name:</label>
    </div>
    <div class="span3">
        <asp:TextBox ID="TeamName" runat="server"></asp:TextBox>
    </div>
</div>
<div class="row">
    <div class="span2">
        <label class="control-label" for="stadiumNameTextBox">
            Stadium Name:</label>
    </div>
    <div class="span3">
        <asp:TextBox ID="StadiumName" runat="server"></asp:TextBox>
    </div>
</div>
<div class="row">
    <div class="span2">
        <label class="control-label" for="emailTextBox">
            Email Address:</label>
    </div>
    <div class="span3">
        <asp:TextBox ID="Email" runat="server"></asp:TextBox>
    </div>
</div>
<div class="row">
    <div class="span2">
        <label class="control-label" for="reminderCheckBox">
            Recieve Reminder Email:</label>
    </div>
    <div class="span3">
        <input type="checkbox" id="Reminder" runat="server"/>
    </div>
</div>
<div class="row">
    <div class="span2">
        <label class="control-label" for="predictionCheckBox">
            Recieve Prediction Email:</label>
    </div>
    <div class="span3">
        <input type="checkbox" id="Prediction" runat="server"/>
    </div>
</div>
<div class="row">
    <div class="span5">
        <asp:Button ID="UpdateDetailsButton" 
            CssClass="btn btn-primary rightAlignButton" runat="server" Text="Confirm" 
            onclick="UpdateDetailsButton_Click" />
    </div>
</div> 
```

我尝试在 SQL Management Studio 中使用存储过程，它按预期更新，因此由于某种原因，单击更新时字段未读取更新的值。

任何建议都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:28:32.327

在 Page_Load 事件中使用 IsPostBack

```
if(!IsPostBack)
{
        SqlConnection conn = new SqlConnection(WebConfigurationManager.ConnectionStrings["RaiseFantasyLeagueConnectionString"].ConnectionString);
        SqlCommand cmd = new SqlCommand("[dbo].[GetUsersProfile]", conn);
        cmd.CommandType = CommandType.StoredProcedure;

        string userId = Membership.GetUser().ProviderUserKey.ToString();
        SqlParameter userIDParam = new SqlParameter("@userId", userId);

        cmd.Parameters.Add(userIDParam);

        conn.Open();
        SqlDataReader dReader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
        while (dReader.Read())
        {
            FirstName.Text = (dReader["ManagerFirstName"].ToString());
            Surname.Text = (dReader["ManagerSurname"].ToString());
            TeamName.Text = (dReader["TeamName"].ToString());
            StadiumName.Text = (dReader["TeamStadium"].ToString());
            Email.Text = (dReader["Email"].ToString());
            Reminder.Checked = (bool)dReader["RecieveReminder"];
            Prediction.Checked = (bool)dReader["RecieveSummary"];
        }
        dReader.Close();
        conn.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:28:31.740

您应该只在第一次从数据库中加载数据，因此您必须检查它是否不是回发。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        LoadDataFromDatabase();
    }
}

private void LoadDataFromDatabase()
{
    SqlConnection conn = new SqlConnection(WebConfigurationManager.ConnectionStrings["RaiseFantasyLeagueConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand("[dbo].[GetUsersProfile]", conn);
    cmd.CommandType = CommandType.StoredProcedure;

    string userId = Membership.GetUser().ProviderUserKey.ToString();
    SqlParameter userIDParam = new SqlParameter("@userId", userId);

    cmd.Parameters.Add(userIDParam);

    conn.Open();
    SqlDataReader dReader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
    while (dReader.Read())
    {
        FirstName.Text = (dReader["ManagerFirstName"].ToString());
        Surname.Text = (dReader["ManagerSurname"].ToString());
        TeamName.Text = (dReader["TeamName"].ToString());
        StadiumName.Text = (dReader["TeamStadium"].ToString());
        Email.Text = (dReader["Email"].ToString());
        Reminder.Checked = (bool)dReader["RecieveReminder"];
        Prediction.Checked = (bool)dReader["RecieveSummary"];
    }
    dReader.Close();
    conn.Close();
} 
```

# python - Virtualenv / pip 安装日志？

> ID：15438550
> 
> 赞同：10
> 
> 时间：2013-03-15T17:24:43.477
> 
> 标签：python, virtualenv, pip

`pip`记录或`virtualenv`保留安装日志？

例如，假设我创建了一个 virtualenv 并在其中安装了一个包。

```
> source [my virtual env]/bin/activate
> pip install matplotlib 
```

是否有保存软件包安装日志的地方？

如果不是，那么记录软件包安装的好方法是什么？（除了手动将输出复制`pip install`到文本文件之外）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T18:05:16.403

运行 pip 时，可以指定日志文件。

```
pip install matplotlib --log LOG_FILE 
```

该文件将包含详细日志

例如，

```
pip install matplotlib --log log.txt 
```

这将在同一目录中创建一个`log.txt`并将日志放入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-21T17:12:07.047

如果您关心保留日志，您可能还关心 pip 的[详细选项](https://pip.pypa.io/en/stable/reference/pip/#verbose)

> -v, --verbose 提供更多输出。选项是添加剂，最多可使用 3 次。

# javascript - 根据单选按钮选择隐藏确定按钮

> ID：15438554
> 
> 赞同：1
> 
> 时间：2013-03-15T17:25:09.623
> 
> 标签：javascript, sharepoint, sharepoint-2007, sharepoint-list

我有一个带有单选按钮字段的 Sharepoint 列表。如果有人检查否，则应禁用确定按钮，但如果选择是，则应启用确定按钮。我需要在 CEWP 中编写一个 javascript 来实现这一点而无法访问 SPD，有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:33:06.767

你可以这样做

```
function show_hide(show, hide)
{
document.getElementById(show).style.display="block";
document.getElementById(hide).style.display="none";
}

<form method="post" action="aaa.php">
<input type="radio" name="search" value="standard" onClick="show_hide('standard', 'advanced')" checked />Standard Search
<div id="standard" style="display: block;">
Standard search div
</div>
<br />
<input type="radio" name="search" value="advanced" onClick="show_hide('advanced', 'standard')" />Advanced search
<div id="advanced" style="display: none;">
Advanced search div
</div>
<br />
<input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:08:56.713

```
<script type = "text/javascript">
function test_enable(id,id2)
/*parameter "id" should be id of "no" radiobutton and "id2" is of yes button 
*/
{
if(document.getElementById(id).checked==true)
{
document.getElementById(id2).enabled==false;
}
else
{
document.getElementById(id2).enabled==true;
}
}
</script>

<input type = "radio" id = "id" onchange = "test_enable('id','id2')" value = "No">

<input type = "button" id = "id2" onclick = "foo()" value = "click me!"> 
```

简单的！

# php - 在phps之间传递变量

> ID：15438555
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:25:11.543
> 
> 标签：php, facebook

我目前正在开发一个 facebook 应用程序，在我的 index.php 中我有我的`$facebook` `$loginURL`和其他常见的变量。现在我还有一个“likes.php”文件，我需要 index.php 中的一些变量。
如何才能做到这一点？我是新手，如果这是一个愚蠢的问题，很抱歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:29:20.910

如果您在“index.php”中包含（），include_once（），require（）或require_once（）“likes.php”，那么您可以访问index.php中的所有变量（从您拥有的范围包括文件）。但是最好创建一个“喜欢”类并将变量传递给它的构造函数。

[PHP 文档](http://php.net/manual/en/function.include.php)说：“当一个文件被包含时，它包含的代码继承了包含发生的行的变量范围。从那时起，调用文件中该行中可用的任何变量都将在被调用文件中可用. 但是，包含文件中定义的所有函数和类都具有全局范围。”

# java - Java-CardLayout如何从正在切换的卡片中切换卡片

> ID：15438556
> 
> 赞同：0
> 
> 时间：2013-03-15T17:25:14.617
> 
> 标签：java, swing, debugging, menu, cardlayout

我正在尝试熟悉 CardLayout，所以我正在制作一个模拟游戏菜单。这个菜单应该有三个按钮，但布局部分很简单。

所以，我想做的是从一个带有三个按钮的菜单开始。单个播放器按钮应该将用户看到的内容更改为单个按钮，这可以将其更改回原始菜单。

我在网上遵循了一个示例，然后对此应用了相同的方法。但是，菜单本身是一张卡片，它是更改卡片命令的来源，而不是一个单独的容器。

每当我运行它时，我都会收到一个错误：

```
public class GameMenuCards extends JFrame{

private int currentCard = 1;
private JPanel cardPanel;
private CardLayout cl;
private GridBagConstraints gbc;

public GameMenuCards(){
    initUI();
}

public void initUI(){

    //set the properties for the window
    setTitle("Game Menu With Cards");
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setExtendedState(MAXIMIZED_BOTH);

    cardPanel = new JPanel();
    cl = new CardLayout();

    JPanel game = new JPanel();
    game.setBackground(Color.BLACK);

    //the menu panel
    JPanel menu = new JPanel();
    menu.setLayout(new GridBagLayout());
    menu.setBackground(Color.BLACK);

    cardPanel.add(menu, "1");
    cardPanel.add(game, "2");

    //set up the buttons for the menu
    JButton single = new JButton("Single Player");
    single.setPreferredSize(new Dimension(300, 30));
    single.setBackground(Color.GRAY);
    single.setForeground(Color.CYAN);
    single.setBorder(BorderFactory.createLineBorder(Color.CYAN, 3));

    JButton multi = new JButton("Multi Player");
    multi.setPreferredSize(new Dimension(300, 30));
    multi.setBackground(Color.GRAY);
    multi.setForeground(Color.CYAN);
    multi.setBorder(BorderFactory.createLineBorder(Color.CYAN, 3));

    JButton score = new JButton("High Scores");
    score.setPreferredSize(new Dimension(300, 30));
    score.setBackground(Color.GRAY);
    score.setForeground(Color.CYAN);
    score.setBorder(BorderFactory.createLineBorder(Color.CYAN, 3));

    gbc = new GridBagContraints();

    //add everything to the menu
    gbc.insets = new Insets(35, 50, 0, 50);

    gbc.gridwidth = 1;
    gbc.gridheight = 1;
    gbc.gridx = 1;
    gbc.gridy = 1;

    menu.add(single, gbc);

    gbc.gridx = 1;
    gbc.gridy = 2;

    label(menu);

    gbc.gridx = 1;
    gbc.gridy = 3;

    menu.add(multi, gbc);

    gbc.gridx = 1;
    gbc.gridy = 4;

    label(menu);

    gbc.gridx = 1;
    gbc.gridy = 5;
    gbc.insets = new Insets(35, 50, 35, 50);

    menu.add(score, gbc);

    single.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent event){
            currentCard = 2;
            cl.show(cardPanel, "" + (currentCard));
        }
    });

    JButton returnBut = new JButton("Back To Menu");
    returnBut.setPreferredSize(new Dimension(300, 30));
    returnBut.setBackground(Color.GRAY);
    returnBut.setForeground(Color.CYAN);
    returnBut.setBorder(BorderFactory.createLineBorder(Color.CYAN, 3));

    returnBut.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent event){
            currentCard = 1;
            cl.show(cardPanel, "" + (currentCard));
        }
    });

    game.add(returnBut);

    getContentPane().add(cardPanel);

}

public void label(Container c){
    JLabel j1 = new JLabel();
    j1.setPreferredSize(new Dimension(300, 40));
    j1.setBackground(Color.BLACK);
    c.add(j1, gbc);
}

public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable(){
        public void run(){
            GameMenuCards gm = new GameMenuCards();
            gm.setVisible(true);
        }
    });

}

} 
```

我知道我可以用标签上的按钮做类似的事情，但我只考虑了两个按钮，所以在那个阶段需要更长的时间。

我会以正确的方式解决这个问题吗？你能纠正我在代码中犯的任何错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:32:35.293

> 每当我运行这个我得到一个错误

您的应用程序在`NPE`这里抛出

```
gbc.insets = new Insets(35, 50, 0, 50); 
```

因为你还没有初始化你的`GridBagConstraints` `gbc`.

此外，您同时看到两个面板的原因*是*，即使您创建`CardLayout`了`cardPanel`. 因此，您仍在使用默认`FlowLayout`的`JPanel`. 你可以这样做：

```
cardPanel = new JPanel(cl); 
```

# ruby - 如何检测何时从线程内杀死 Ruby 线程

> ID：15438559
> 
> 赞同：5
> 
> 时间：2013-03-15T17:25:26.190
> 
> 标签：ruby, multithreading

如果我使用以下代码启动了一个线程，如何从线程本身捕获/检测退出调用，以便在它终止之前进行一些清理？

```
thr = Thread.new { sleep }
thr.status # => "sleep"
thr.exit
thr.status # => false 
```

我在想也许它会像下面这样，但我不确定。

```
thr = Thread.new {
    begin
        sleep
    rescue StandardError => ex
        puts ex.message
    rescue SystemExit, Interrupt
        puts 'quit'
    ensure
        puts 'quit'
    end
}
thr.status # => "sleep"
thr.exit #=> "quit"
thr.status # => false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T00:57:32.930

这是未经测试的，但是像任何东西一样的线程都可以通过在 GC 激活之前跳入来专门化。因此，我认为您可以添加一个 ObjectSpace 终结器方法，该方法在 Thread 被垃圾收集之前执行以执行您想要的操作。

[Ruby：析构函数？](https://stackoverflow.com/questions/5956067/ruby-destructors)

# scala - 从 Lift 中的代码段访问 bind-at 值

> ID：15438562
> 
> 赞同：0
> 
> 时间：2013-03-15T17:25:29.230
> 
> 标签：scala, lift

我有一个看起来像这样的模板：

```
<lift:surround name="default" at="page-content">
  <lift:bind-at name="page-title">Home</lift:bind-at>
  ...
</lift:surround> 
```

默认模板如下所示：

```
<html>
 <head>
  <title>Title Prefix | </title>
 </head>
 <body>
    <h1><lift:bind name="page-title" /></h1>
    <div id="page-content">
      <lift:bind name="page-content" />
    </div>
 </body>
</html> 
```

我想使用一个片段将`<title>`内容替换为一个结合了“标题前缀”和值`<lift:bind-at name="page-title">`（即：“Home”）的字符串。`<h1>`我想继续在in 中使用相同的值`<body>`

如何`bind-at`从周围模板中使用的代码段中访问值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:01:22.720

我不相信你可以用`bind-at`指令做你想做的事情，或者至少，我还没有找到办法。不过，您应该能够使用片段来完成类似的事情。

例如，如果您使用`SiteMap`，则以下内容应大致等效。

```
class TitleSnippet {
  //Store the value in a requestVar
  private var titleVar:String = ""

  def first = {
    //Retrieve the title for the current Loc as defined in the Sitemap
    val locTitle = for (request <- S.request;
      loc <- request.location) yield loc.title

    //Retrieve the text portion of the tag, and append it to the sitemap title. 
    //If no sitemap title exists, just display the text
    "* *" #> { ns => 
      val myTitle = locTitle.map{ t => 
        "%s | %s".format(ns.text, t) 
      } openOr ns.text 
      titleVar = myTitle
      Text(myTitle)
    }
  }

  def title = {
    "* *" #> titleVar
  }
} 
```

然后，在您的模板中，您所要做的就是说：

```
<title data-lift="TitleSnippet.first">Home</title> 
```

所以，如果我们在站点地图中有这样定义的页面：

```
Menu("Sub Page 1") / "subpage" 
```

如果一切正常，您应该会看到类似的标题：`<title>Home | Sub Page 1</title>`如果您在页面的其他地方需要它，您所要做的就是：`<h1 data-lift="TitleSnippet.title"></h1>`.

如果您需要从其他代码片段访问，您还可以拆分`titleVar`为伴随对象并使用`RequestVar`.

# c - 如何将指针传递给大小由 C 中的指针定义的二维数组？

> ID：15438564
> 
> 赞同：0
> 
> 时间：2013-03-15T17:25:39.570
> 
> 标签：c, struct

我正在开发一个具有多个输入参数的项目（其中一些需要在代码中计算），所以我将它们全部放在一个结构中。

```
typedef struct{
    int N_cell;
    int N_node;
}INPUT; 
```

在主函数中，我声明

```
INPUT in; 
```

之后有几行用于计算 in.N_cell 和 in.N_node。现在我定义

```
double *pos_node[in.N_node];
for (i = 0; i < in.N_node; i++)
    pos_node[i] = (double *) calloc(3, sizeof(double)); 
```

然后我需要将此数组的指针传递给我将其定义为的函数

```
void func(double *pos_node[????]){....} 
```

我的问题是，我应该在“？？？”中写什么？地方？我应该使用 in.Node 并在参数列表中添加“INPUT in”吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:32:08.717

您还需要为 pos_node 分配内存：

```
double **pos_node = calloc (in.N_node, sizeof (double *)); 
```

（c99 中提供了可变长度数组，但大多数人还不喜欢使用 c99）

然后很容易看到如何传递数组。C 中的数组只是一个内存块，因此`double *array[]`可以正确地写为`double **array`：将地址保存为双倍的内存块的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:32:26.907

尝试在堆上分配 pos_node：

```
double **pos_node = calloc(in.N_node, sizeof(double*));
for (i = 0; i < in.N_node; i++)
    pos_node[i] = (double *) calloc(3, sizeof(double));

void func(double **pos_node){....} 
```

# javascript - 检查数组中两个项目的更好方法

> ID：15438569
> 
> 赞同：1
> 
> 时间：2013-03-15T17:25:58.587
> 
> 标签：javascript, jquery, arrays, angularjs

我有一个像这样的数组：

```
var data = [
    {
        "title" : "Title 1",
        "slideText" : "",
        "startTime" : 0
    },
    {
        "title" : "Title 2",
        "slideText" : "",
        "startTime" : 60
    },
    {
        "title" : "Title 3",
        "slideText" : "",
        "startTime" : 120
    }
]; 
```

我`seeked`在 HTML5 视频上有一个事件监听器。当用户寻找时，我需要检查他们在哪里，并确定他们在数组中的哪个索引。例如，他们寻求 72 秒，他们将在 array[1]

现在我有这个：

```
player.addEventListener("seeked", function(event)
{
    currentTime = player.currentTime;
    angular.forEach($scope.data, function(value, key)
    {
        if (currentTime >= $scope.data[key].startTime && currentTime <= $scope.data[key + 1].startTime)
        {
            $scope.$apply(function()
            {
                $scope.setActive(key);
            });
        }
    });
}); 
```

这一切都有效，直到寻找的时间到达数组的末尾并且`$scope.data[key + 1].time`未定义。我应该如何处理这个？我的思绪现在没有走上正轨，我还没有喝咖啡：|

**编辑**

新功能工作

```
player.addEventListener("seeked", function(event)
{
    currentTime = player.currentTime;
    for (var i = 0; i <= $scope.data.length; i++)
    {
        if ($scope.data[i + 1] != undefined)
        {
            if (currentTime < $scope.data[i + 1].startTime)
            {
                $scope.$apply(function()
                {
                    $scope.setActive(i);
                });
                break;
            }
        }
        else
        {
            $scope.$apply(function()
            {
                $scope.setActive($scope.data.length - 1);
            });
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:31:06.733

首先测试数组元素的存在。如果失败，其他测试将被忽略：

```
if ($scope.data[key+1] && currentTime>=$scope.data[key].startTime && currentTime<=$scope.data[key+1].startTime) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:48:39.040

您将需要检查`[key + 1]`以确保您不会尝试访问超出数组长度的元素。

```
player.addEventListener("seeked", function(event)
{
    currentTime = player.currentTime;
    angular.forEach($scope.data, function(value, key)
    {
        if ( ($scope.data[key+1] != undefined) && currentTime < $scope.data[key+1].startTime)
        {
           // this is the one we are after
           return false; // exit foreach
        } else {
          // we are on the last one.
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:43:15.500

这是有效的最终解决方案

```
player.addEventListener("seeked", function(event)
{
    currentTime = player.currentTime;
    for (var i = 0; i <= $scope.data.length; i++)
    {
        if ($scope.data[i + 1] != undefined)
        {
            if (currentTime < $scope.data[i + 1].startTime)
            {
                $scope.$apply(function()
                {
                    $scope.setActive(i);
                });
                break;
            }
        }
        else
        {
            $scope.$apply(function()
            {
                $scope.setActive(i - 1);
            });
        }
    }
}); 
```

# php - Magento 添加 Flash 消息以从愿望清单移动到购物车

> ID：15438570
> 
> 赞同：0
> 
> 时间：2013-03-15T17:26:02.240
> 
> 标签：php, magento, cart

我正在尝试在将单个项目从愿望清单移动到 Magento 的购物车时添加一条消息。当所有物品都添加到购物车时，这已经发生了，但当单个物品从愿望清单移动到购物车时不会发生。对此的任何帮助将不胜感激。

谢谢。

编辑：为了澄清，这是我想在从愿望清单添加单个项目到购物车时添加的内容。当您从愿望清单中单击“全部添加到购物车”时，它会向您发送一条消息，但当您只从愿望清单中将一件商品单独添加到购物车时，它不会提供此消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:22:09.110

您在使用 Magento Enterprise 吗？我检查了代码库，看起来他们已经显示了将单个项目从愿望清单移动到购物车的消息。

```
app/code/core/Enterprise/Wishlist/controllers/SearchController.php:260 
```

# jenkins - 使用 jenkins-cli.jar 运行从属作业时如何等待作业完成？

> ID：15438578
> 
> 赞同：3
> 
> 时间：2013-03-15T17:26:32.250
> 
> 标签：jenkins, continuous-integration, hudson

我有一个詹金斯奴隶（在 localhost:8000 ），**[我正在](https://gist.github.com/djangofan/5165442)**从詹金斯大师（在 localhost:8080 ）执行它（链接）。这里的基本思想是运行远程作业并等待作业完成。

```
java -jar jenkins-cli.jar -s http://localhost:8000 build "Test Suite" 
```

现在，这不等待。我在奴隶上开始工作，詹金斯大师说任务立即完成，尽管奴隶再运行 30 分钟。

有谁知道我如何阻止或检查从站上的信号以验证它是否已完成并获取作业的退出状态代码？

注意：我的从属测试必须在从属上运行，因为它不会从 Jenkins master 运行，它作为服务运行并且不允许从测试中启动 webbrowser 的权限。所以，我在一个可见的控制台中运行从站。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T04:20:51.777

```
java -jar jenkins-cli.jar -s http://localhost:8000 build "Test Suite" -s 
```

在构建命令中添加参数`-s`应该会触发作业并在作业完成后返回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T06:19:02.340

每个 Windows 应用程序都会向其父级返回一个退出代码。使用 Windows 批处理文件检查退出代码。例子：

```
java -jar jenkins-cli.jar -s http://127.0.0.1:9090 build "Test Suite" -s
echo The exit code is %errorlevel% 
```

成功完成工作后，您将获得：

```
Completed "Test Suite" #72 : SUCCESS
The exit code is 0 
```

检查一些错误场景（错误的作业名称、作业创建失败等）

注意：运行 jenkins 大师而不是 windows 服务可能更容易。

# php - 模板 KendoUI 变量 Json ${ } 到变量 php

> ID：15438579
> 
> 赞同：0
> 
> 时间：2013-03-15T17:26:43.413
> 
> 标签：php, html, kendo-ui

我的 json 数据源为我带来了 $ {filename} 中的文件名，希望将其传递给 php 变量。

```
<script type="text/x-kendo-tmpl" id="template">
    <div class="product">
        <?php 
            $filename = "${filename}";
            echo $imgSrc = $RUTA_IMG_SMALL . $filename;
            $imgBinary = fread(fopen($imgSrc, "r"), filesize($imgSrc));
            $imgStr = base64_encode($imgBinary);
        ?>
        <a href="vista_producto.php?codigo_producto=${codigo_producto}&codigo_sublinea=<?php echo $_GET["codigo_sublinea"]?>&nicename=<?php echo $_GET["nicename"]?>&codigo_grupo=<?php echo $_GET["codigo_grupo"]?>&sublinea=<?php echo $_GET["sublinea"]?>&codigo_sublinea=<?php echo $_GET["codigo_sublinea"]?>" target="_self">
            <?php echo '<img src="data:image/jpg;base64,'.$imgStr.'" />';?>        
        </a>
        <h3>${nombre}</h3>
        <p>${codigo_producto}</p>
    </div>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:35:41.853

#= # , ${} 等 Kendo 表达式在**客户端**上执行，因此无法从中创建服务器变量。

# javascript - 引用的 JavaScript 数组/函数对象

> ID：15438580
> 
> 赞同：3
> 
> 时间：2013-03-15T17:26:49.163
> 
> 标签：javascript, arrays, function, object, pass-by-reference

鉴于：

```
function shout(){ alert('Hello!'); }
var dasarray = [ shout ];

shout();
dasarray[0]();

shout = function(){ alert('World!'); }

shout();
dasarray[0](); 
```

输出：

```
Hello!

Hello!

World!

Hello! 
```

我原以为会`dasarray`收到对该函数的引用`shout`，但遗憾的是第四个输出也是*hello*。如果我假设正确，我能够`shout`正确修改函数，但这导致我假设函数没有通过引用传递到`dasarray`.

我已经用一个对象尝试了这个例子，而不是一个数组：

```
dasarray = { myfunction: shout } 
```

同样令人失望的结果。

我的意图是有一个数组/对象/具有按顺序运行并且可以实时扩展的函数。

例如，使用新功能扩展 JavaScript 代码并向以正确顺序运行的现有事件添加额外的函数调用。

那么，如何通过引用将函数放入数组/对象中？

* * *

谢谢你的好答案。我只是想解释一下我选择了[Eli 的答案](https://stackoverflow.com/questions/15438580/javascript-array-object-of-functions-by-reference/15438703#15438703)，因为它引导我进入这个设置：

```
zzz = {
    calls: [],
    shout: function(message) {
        alert('Shouting: ' + message);
    },
    initialize: function () {
        zzz.calls.push(['shout','Hello World']);
        zzz.calls.push(['shout','this is']);
        zzz.calls.push(['shout','my last shout!']);
        zzz.run();

        zzz.shout = function(){ alert('modified!'); };
        zzz.run();
    },
    run: function () {
        $.each(zzz.calls, function(){ zzz[this[0]](this[1]); }); // <- Using jQuery $.each here, just to keep it easy
    }
};

zzz.initialize(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:29:10.023

> 我原以为 dasarray 收到了对该函数的引用`shout`

确实如此。它*没有*收到对*变量* `shout`的引用。（在函数声明中由函数名称定义的符号实际上是一个变量——这就是为什么你可以稍后分配给它的原因。）所以你后面的行*改变*了这个变量：

```
shout = function(){ alert('World!'); } 
```

...对 . 中早期函数的引用没有影响`dasarray`。

将对象引用视为一个值，说明在哪里可以找到对象。当你这样做时：

```
function shout(){ alert('Hello!'); } 
```

...符号`shout`接收一个*值*，说明该函数的位置，如下所示：

![指向函数对象的变量喊](../Images/913aff7264d1bbfd566d10bf5d2264b8.png)

那么当你这样做时：

```
var dasarray = [ shout ]; 
```

...该*值*放在数组的第一个条目中。现在符号`shout`和第一个条目`dasarray`都具有相同的值，这告诉 JavaScript 引擎在内存中的哪里可以找到该函数对象。所以我们有这个：

![指向同一个函数对象的变量喊和 dasarray 条目 0](../Images/c674264518673e5dca759df3a0803434.png)

但是变量`shout`和 in 之间的条目`dasarray`没有任何联系。

然后你这样做：

```
shout = function(){ alert('World!'); } 
```

...创建一个新函数并将一个新值存储在变量`shout`中，说明该新函数在哪里。`dasarray`但这对存储在's 条目中的值没有影响`0`。我们最终得到了这个：

![var 喊指向第二个函数，dasarray 条目 0 指向第一个函数](../Images/070ec72b51748609549af84256d86446.png)

我在上面说了很多“值”，因为这就是“对象引用”的含义：一个值，就像值一样`5`。只是 value 的使用方式是*查找*对象的位置。当您将该值从一个变量分配给另一个变量时，该值将被复制，就像您将值从一个变量复制`5`到另一个变量时一样。

我不能说我很喜欢[Eli 的解决方法](https://stackoverflow.com/questions/15438580/javascript-array-object-of-functions-by-reference/15438703#15438703)，我宁愿对它更直接，并以简单的方式使用对象：

```
var obj = {
    shout: function() { alert("Hello!"); }
};
var dasarray = [ obj ];

obj.shout();                               // Hello!
dasarray[0].shout();                       // Hello!

obj.shout = function() { alert("World"); };

obj.shout();                               // World!
dasarray[0].shout();                       // World! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T17:34:09.723

我同意[TJ 的回答](https://stackoverflow.com/questions/15438580/javascript-array-object-of-functions-by-reference/15438619#15438619)。但是，如果您想做某种解决方法，您可以创建一个始终从函数缓存中进行“及时”查找的函数。看到这个[小提琴](http://jsfiddle.net/ZvZ98/)

```
var getFunctionRef = function(funcName)
{
    return function() { global[funcName](); };
}

var global = { };
var arr = [];

global.shout = function() { alert('hello'); }

arr[0] = getFunctionRef('shout');

global.shout = function() { alert('world'); }

arr[0](); 
```

这是一个非常基本的例子。有更广泛的方法来做到这一点。但这应该证明这个概念。

# android - Google Maps v2 上的膨胀错误

> ID：15438585
> 
> 赞同：1
> 
> 时间：2013-03-15T17:27:03.613
> 
> 标签：android, google-maps-android-api-2

我尝试将 Google 地图添加到我的应用程序并使用[本](https://developers.google.com/maps/documentation/android/start?hl=tr#the_google_maps_api_key)教程生成 API 代码，添加所有必要的元数据、权限等。每当我单击按钮开始新活动时，应用程序在我的 Galaxy S3 上崩溃

onClickListener

```
Button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (v == Button) {
                    startActivity(new Intent(MainActivity.this, ShowMap.class));
                }
            }
        }); 
```

地图类

```
public class ShowMap extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.show_map);

    }
} 
```

show_map.xml

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:name="com.google.android.gms.maps.MapFragment"/> 
```

错误

```
03-15 20:14:51.825: E/AndroidRuntime(18318): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.appname.subappname/com.appname.subappname.ShowMap}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.os.Looper.loop(Looper.java:137)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at java.lang.reflect.Method.invokeNative(Native Method)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at java.lang.reflect.Method.invoke(Method.java:511)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at dalvik.system.NativeStart.main(Native Method)
03-15 20:14:51.825: E/AndroidRuntime(18318): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:308)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.app.Activity.setContentView(Activity.java:1924)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at com.appname.subappname.ShowMap.onCreate(ShowMap.java:11)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.app.Activity.performCreate(Activity.java:5206)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-15 20:14:51.825: E/AndroidRuntime(18318):    ... 11 more
03-15 20:14:51.825: E/AndroidRuntime(18318): Caused by: java.lang.ClassCastException: com.google.android.gms.maps.MapFragment cannot be cast to android.support.v4.app.Fragment
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.support.v4.app.Fragment.instantiate(Fragment.java:394)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
03-15 20:14:51.825: E/AndroidRuntime(18318):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
03-15 20:14:51.825: E/AndroidRuntime(18318):    ... 20 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:38:55.430

`com.google.android.gms.maps.MapFragment`找不到该类。检查库`google-play-services_lib`是否正确链接到项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:32:12.470

您的 ShowMap 应该`FragmentActivity`对此进行扩展以使其无法正常工作`Activity`，请检查 google-play-service 库中包含的示例以获取 google 地图，它们是一个很大的帮助。

**编辑**

确保您包含 google-play-service 库项目，因为例外情况是`ClassNotFoundException: com.google.android.gms.maps.MapFragment`

检查[此](https://developers.google.com/maps/documentation/android/intro)链接以了解如何包含库项目

# python - Python 可以避免在语句中重新评估吗？

> ID：15438586
> 
> 赞同：1
> 
> 时间：2013-03-15T17:27:15.993
> 
> 标签：python

我在 Python 中有以下语句，其中 ori 是一个字符串

```
[ori[ori.rfind('') + 1:], ori[:ori.rfind('')]]

```

我们可以看到 ori.rfind(' ') 被调用了两次，解释器是否足够聪明，只评估函数一次？

我们可以做到以下几点：

```
    s = ori.rfind(' ')
    返回 [ori[s+1:], ori[:s]]

```

但这使用了两条线。我打算在对字符串列表的列表理解中使用这个语句，并希望这个函数是一行。

在这种情况下，解释器实际上更容易弄清楚，因为字符串是不可变的。我的猜测可能是解释器可以聪明地避免重新评估。一般来说，如果对象是不可变的，解释器是否足够聪明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:31:27.907

我认为你不能指望解释器只评估一次函数，但是这里有一个等效的替代你当前代码的替代方法，它更短，效率与两行方法相似：

```
ori.rsplit(' ', 1)[::-1] 
```

示例和时序比较：

```
In [1]: ori = 'foo bar baz'

In [2]: [ori[ori.rfind(' ') + 1:], ori[:ori.rfind(' ')]]
Out[2]: ['baz', 'foo bar']

In [3]: ori.rsplit(' ', 1)[::-1]
Out[3]: ['baz', 'foo bar']

In [4]: %timeit [ori[ori.rfind(' ') + 1:], ori[:ori.rfind(' ')]]
1000000 loops, best of 3: 732 ns per loop

In [5]: %timeit ori.rsplit(' ', 1)[::-1]
1000000 loops, best of 3: 514 ns per loop

In [6]: %timeit s = ori.rfind(' '); [ori[s+1:], ori[:s]]
1000000 loops, best of 3: 490 ns per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:34:54.950

解释器可以安全地执行子表达式`ori.rfind(' ')`一次的唯一方法是，如果它知道

1.  rFind 表达式没有执行任何突变
2.  第一次和第二次使用之间没有表达`rFind`导致任何突变

如果其中任何一个不正确，那么缓存结果和重用将是不安全的。鉴于 Python 的动态特性，几乎不可能有这些保证，因此这样的操作不能被缓存+重用

# magento - Magento-在模块内添加新菜单项

> ID：15438587
> 
> 赞同：1
> 
> 时间：2013-03-15T17:27:15.953
> 
> 标签：magento, module, magento-1.7

目前我想在菜单选项卡上添加一个新的菜单链接，但是可以在不更改其他模块模板的情况下完成，而只需在我的模块中添加？我想这样做的原因是因为我希望当我禁用我的模块时，菜单链接也将消失。

page.xml（其他模块布局文件）

```
<block type="page/html_header" name="header" as="header">
                <block type="page/template_links" name="top.links" as="topLinks"/>
                <block type="page/switch" name="store_language" as="store_language" template="page/switch/languages.phtml"/>
                <block type="core/text_list" name="top.menu" as="topMenu" translate="label">
                    <label>Navigation Bar</label>
                    <block type="page/html_topmenu" name="catalog.topnav" template="page/html/topmenu.phtml"/>
                </block>
                <block type="page/html_wrapper" name="top.container" as="topContainer" translate="label">
                    <label>Page Header</label>
                    <action method="setElementClass"><value>top-container</value></action>
                </block>
            </block> 
```

转介.xml（我的模块）？？？我应该怎么办？ ![在此处输入图像描述](../Images/839efcc568e2f056be438ae7ad298186.png)

顶部菜单.phtml

```
<?php $_menu = $this->getHtml('level-top') ?>
    <?php if($_menu): ?>
    <div class="nav-container">
        <ul id="nav">
            <?php $active = is_numeric(stripos($_SERVER['REQUEST_URI'], 'aboutus')) ? 'active' : ''; ?>
            <li class="level0 nav-2 last level-top <?php echo $active; ?>">
                <a class="level-top" href="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB);?>aboutus">
                    <span>About Us</span>
                </a>
            </li>
            <?php echo $_menu ?>
            <?php $active = is_numeric(stripos($_SERVER['REQUEST_URI'], 'redemption/store')) ? 'active' : ''; ?>
            <li class="level0 nav-2 last level-top <?php echo $active; ?>">
                <a class="level-top" href="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB);?>redemption/store">
                    <span>Redemption Store</span>
                </a>
            </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:32:55.157

对我来说，这看起来像是一个自定义导航，没有办法开箱即用地将项目添加到主导航（无论如何都没有类别项目）。

默认情况下它只会显示类别，所以你的看起来可能是硬编码到模板中的。

在使用过很多模块和主题之后，如果它是一个自定义主题，并且能够通过 XML 配置或管理选项添加链接，我会感到非常惊讶。

您能否为我从您的 topmenu.phtml 文件中发布一些代码，然后我可以为您提供最佳操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T13:15:05.240

为此，您必须在自定义模块中编写导航类，该类将扩展`Mage_Catalog_Block_Navigation`该类是`renderCategoriesMenuHtml`您需要在本地导航类中覆盖的函数 ()。但问题是，实时用户大多有不同的主题，他们改变类等，这可能会在设计实现中发生冲突。

# html - 如何在不知道其名称的情况下将网页链接到自身？

> ID：15438588
> 
> 赞同：9
> 
> 时间：2013-03-15T17:27:20.000
> 
> 标签：html, hyperlink, href

要将页面链接到自身（例如[http://example.com/folder/ThisPage.html](http://example.com/folder/ThisPage.html)），我们可以简单地创建一个 href ：

**这个页面.html**：

```
<a href="ThisPage.html">Link</a> 
```

这可行，但缺点是需要在文件名更改时进行*更新。*例如，如果文件名更改为`ThatPage.html`，我们的 href 需要相应更改为`<a href="ThatPage.html">Link</a>`.

我正在寻找没有这个缺点的替代方案。我试过了：

*   `<a href="?">Link</a>`

    不能正常工作`<a href="ThisPage.html">Link</a>`，因为它将“空白查询部分”（问号）附加到 URL。

*   `<a href="">Link</a>`

    `<a href="ThisPage.html">Link</a>`在某些浏览器（例如 Opera）上不能正常工作。

我们如何将页面链接到自身，而无需在页面名称更改时更新相关部分？

[注意：不允许使用 JavaScript。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:52:18.690

只需使用`<a href="?">Link</a>`. 没有人关心附加在 URL 上的问号。它满足要求，这才是正确的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:31:19.373

如果你想让它无处可去，你可以使用

```
<a href="javascript:;">link</a> 
```

但是，如果您希望它重新加载页面，则必须使用 JavaScript。

如果你想重新加载页面，你可以使用 Meta refresh 标签

[http://www.w3.org/TR/WCAG20-TECHS/H76.html](http://www.w3.org/TR/WCAG20-TECHS/H76.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-03T23:54:52.930

很简单，`href=""`留空即可。就是这样：

```
<a href="">Click me to refresh page</a> 
```

但这不一定是一个好主意，因为缓存可能不会被清除，无论您需要什么，如果页面在此期间发生了更改，尽管重新加载，更改可能不会出现。可能一个更好的主意是使用 javascript 代码`location.reload();`。但是其他网站上已经有足够的解释了，所以我就不在这里解释了。当然，您也可以使用问号 (?)，但这是不必要的，实际上不是为此而设计的，并且可能会根据程序引起问题。

* * *

## 以下是常见超链接的简短列表：

指向根页面

```
<a href="/">Link</a> 
```

指向相对于根页面的文件

```
<a href="/file.ext">Link</a> 
```

指向相对于当前文件的文件

```
<a href="file.ext">Link</a> 
```

指向上一个文件夹中的文件

```
<a href="../file.ext">Link</a> 
```

指向上一个文件夹中的文件

```
<a href="../../file.ext">Link</a> 
```

指向下面文件夹中的文件

```
<a href="folder/file.ext">Link</a> 
```

指向当前文件

```
<a href="">Link</a> 
```

指向具有不同主机但协议相同的页面

```
<a href="//domain.tld/file.ext">Link</a> 
```

我希望我的回答对某些人有所帮助，因为我是通过搜索引擎找到的，发现没有正确答案。这是我在这里的第一个答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T11:33:43.577

只需这样做：

```
<a href = "/">This Very Site</a> 
```

[来源：我在Matthew Alger 网站](http://www.matthewja.com)的源代码中看到了这一点。亲自检查一下！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T18:01:19.890

如果你想**重新加载**页面，你真的应该看看 javascript。这是最好的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-28T22:49:09.490

为什么不试试`<a href="./"></a>`？

我查了一些东西，结果发现`./`是指当前目录。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-17T03:35:54.333

您可以只链接到同一页面。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-17T03:31:37.527

您是否尝试过简单地将“/”放在锚标签中，链接

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-03-15T17:32:10.980

给你。希望这是您正在寻找的

```
 <a href="#">Link</a> 
```

# asp.net-mvc-routing - WebAPI 路由 - 更好的路由

> ID：15438595
> 
> 赞同：0
> 
> 时间：2013-03-15T17:27:43.297
> 
> 标签：asp.net-mvc-routing

目前这有效：

```
/api/Company/1089?children=branches 
```

控制器：

```
public IEnumerable<Branch> Get(int id, string children) 
```

我希望我的网址是这样的：

```
/api/Company/1089/branches 
```

我不知道如何配置路由。

这不起作用：

```
routes.MapRoute(    
    name: "cb",
    url: "{controller}/{action}/{id}/{children}",    
    defaults: new { controller = "Company", action = "Get", 
              id = UrlParameter.Optional, children = UrlParameter.Optional }    
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:35:03.357

api/{controller}/{id}/{children}

# php - Wordpress front-page.php 模板

> ID：15438599
> 
> 赞同：2
> 
> 时间：2013-03-15T17:27:48.387
> 
> 标签：php, wordpress

我将首页设置为静态页面，并正在尝试构建我的自定义模板。如何在 front-page.php 中实际显示选定的首页？我用谷歌搜索和搜索，但似乎无法弄清楚如何做到这一点。

front-page.php 实际上像它应该加载的那样加载，但我似乎无法找到关于如何准确显示分配为静态主页的页面的文档。有什么建议么？

我试过了

```
<?php while ( have_posts() ) : the_post(); ?>
    <?php get_template_part( 'content', 'page' ); ?>
    <?php comments_template( '', true ); ?>
<?php endwhile; // end of the loop. ?> 
```

但这似乎不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:38:10.960

您的静态页面使用页面模板（通常 page.php 作为默认模板）

如果您愿意，可以为主页创建一个新的。请参阅： [Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)复制`page.php`到`homepage.php`并更改模板名称

示例模板（homepage.php）：

```
<?php
/*
Template Name: Homepage
*/

//the content of page.php and now you can do what you want.
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:32:42.977

```
$id = 0; /* The id of your page */
$page = get_page($id);
echo apply_filters('the_content', $page->post_content); 
```

如果它是静态页面，我不应该使用循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:36:44.983

首先，查看[主题以仅在主页上显示一些内容](http://wordpress.org/support/topic/show-something-only-on-home-page-1)。一个相关的问题是[Wordpress Post Thumbnail Issue (Only 1 thumbnail on frontpage)](https://stackoverflow.com/questions/12557268/wordpress-post-thumbnail-issue-only-1-thumbnail-on-frontpage)。[此外，如何在 wordpress 中创建静态首页](http://themes.required.ch/news/how-to-create-a-static-front-page-in-wordpress/)也很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:54:39.077

我错过了一些明显的东西。我使用的循环是从 wordpress 模板中复制出来的。它实际上调用了另一个模板文件。我应该使用的是：

```
<?php while ( have_posts() ) : the_post(); ?>
            <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
                <header class="entry-header">
                    <h1 class="entry-title"><?php the_title(); ?></h1>
                </header>

                <div class="entry-content">
                    <?php the_content(); ?>
                    <?php wp_link_pages(array('before' => '<div class="page-links">' . __('Pages:', 'twentytwelve'), 'after' => '</div>')); ?>
                </div><!-- .entry-content -->
                <footer class="entry-meta">
                    <?php edit_post_link(__('Edit', 'twentytwelve'), '<span class="edit-link">', '</span>'); ?>
                </footer><!-- .entry-meta -->
            </article><!-- #post -->
<?php   endwhile;?> 
```

# c# - C# 列出具有空白值的联合

> ID：15438600
> 
> 赞同：1
> 
> 时间：2013-03-15T17:28:00.227
> 
> 标签：c#, asp.net

我有 2 个包含电子邮件地址的列表。我使用列表联合加入他们以获得最终的电子邮件列表，但是有时，任何一个列表都可能是空的。发生的情况是，当列表为空时，它会将其添加到最终列表中作为联合之后的“”，这导致电子邮件 .Send() 在空电子邮件地址上崩溃。如何告诉工会忽略空值？这就是我所拥有的

```
List<string> _RecordOwnerEmailList = new List<string>();

List<string> _SubmissionEmailList = new List<string>();
List<string> _EmailList = new List<string>();

string _RecordOwnerEmails = String.Empty;
string _SubmissionEmails = String.Empty;

if (dsRecordOwner.Tables[0].Rows.Count > 0 && !String.IsNullOrEmpty(dsRecordOwner.Tables[0].Rows[0]["UpdateEmail"].ToString()))
    _RecordOwnerEmails = dsRecordOwner.Tables[0].Rows[0]["UpdateEmail"].ToString().Replace(" ", "");

if (this.ID > 0)
    _RecordOwnerEmailList = new List<string>(_RecordOwnerEmails.Replace(" ", "").Split(';').ToList());

if (dsEmails.Tables[0].Rows.Count > 0 && !String.IsNullOrEmpty(dsEmails.Tables[0].Rows[0]["Emails"].ToString()))
    _SubmissionEmails = dsEmails.Tables[0].Rows[0]["emails"].ToString().Replace(" ", "");

_SubmissionEmailList = new List<string>(_SubmissionEmails.Replace(" ", "").Split(';').ToList());

_EmailList = _RecordOwnerEmailList.Union(_SubmissionEmailList).ToList();

string[] emails = _EmailList.ToArray();

foreach (string emailAddress in emails)
{ 
    //send email
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:30:21.897

`Where`使用子句过滤掉这些空值

```
_EmailList = _RecordOwnerEmailList
  .Union(_SubmissionEmailList)
  .Where(address => !String.IsNullOrEmpty(address))
  .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:45:56.647

(_RecordOwnerEmails +";"+_SubmissionEmails).Split(new []{';'},StringSplitOptions.RemoveEmptyEntries).ToList()

# ruby-on-rails - 使DelayedJob在开发环境中同步

> ID：15438603
> 
> 赞同：1
> 
> 时间：2013-03-15T17:28:05.113
> 
> 标签：ruby-on-rails, background, ruby-on-rails-3.2, delayed-job

如何使 DelayedJob 不推送数据库中的作业，而是在开发环境中同步执行它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:28:05.113

从 DelayedJob 2.1.3 开始，您可以`Delayed::Worker.delay_jobs = false`在初始化程序中使用。

您还可以检查 ENV 变量设置，以便在开发中强制作业异步：

```
Delayed::Worker.delay_jobs = Rails.env.production? || ENV['DELAYEDJOB'].present? 
```

# c++ - 一个 VBO 可以绑定多个 VAO 吗？

> ID：15438605
> 
> 赞同：6
> 
> 时间：2013-03-15T17:28:08.647
> 
> 标签：c++, c, opengl, glsl

我试图通过将其纹理坐标视为顶点位置数组来渲染模型的 UV 贴图。我为模型设置了一个完美渲染的 VAO，然后尝试添加第二个 VAO 并将纹理坐标缓冲区绑定到它。不幸的是它没有渲染任何东西。

我已经为 UV 贴图编写了第二组顶点和片段着色器，编译得很好。缓冲区的绑定方式与模型 VAO 和顶点属性集的绑定方式相同。我能看到的唯一区别是我没有重新指定缓冲区数据。

这是我设置模型 VAO 的代码：

```
// Create model VAO

glGenVertexArrays( 1, &modelVAO );
glBindVertexArray( modelVAO );

// Create position buffer

glGenBuffers( 1, &positionBuffer );
glBindBuffer( GL_ARRAY_BUFFER, positionBuffer );
glBufferData( GL_ARRAY_BUFFER, sizeof( GLfloat ) * vertexCount * 4, positions, GL_STATIC_DRAW );
glVertexAttribPointer( 0, 4, GL_FLOAT, GL_FALSE, 0, 0 );
glEnableVertexAttribArray( 0 );

// Create normal buffer

glGenBuffers( 1, &normalBuffer );
glBindBuffer( GL_ARRAY_BUFFER, normalBuffer );
glBufferData( GL_ARRAY_BUFFER, sizeof( GLfloat ) * vertexCount * 3, normals, GL_STATIC_DRAW );
glVertexAttribPointer( 1, 3, GL_FLOAT, GL_FALSE, 0, 0 );
glEnableVertexAttribArray( 1 );

// Create texture coordinate buffer

glGenBuffers( 1, &textureCoordinateBuffer );
glBindBuffer( GL_ARRAY_BUFFER, textureCoordinateBuffer );
glBufferData( GL_ARRAY_BUFFER, sizeof( GLfloat ) * vertexCount * 2, textureCoordinates, GL_DYNAMIC_DRAW );
glVertexAttribPointer( 2, 2, GL_FLOAT, GL_FALSE, 0, 0 );
glEnableVertexAttribArray( 2 );

// Unbind model VAO

glBindVertexArray( 0 ); 
```

然后我像这样设置UV贴图VAO：

```
// Create new UV map VAO

glGenVertexArrays( 1, &uvMapVAO );
glBindVertexArray( uvMapVAO );

// Bind texture coordinate buffer

glBindBuffer( GL_ARRAY_BUFFER, textureCoordinateBuffer );
glVertexAttribPointer( 0, 2, GL_FLOAT, GL_FALSE, 0, 0 );
glEnableVertexAttribArray( 0 );

// Unbind UV map VAO

glBindVertexArray( 0 ); 
```

是否可以将同一个 VBO 与多个这样的 VAO 一起使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T18:18:50.110

[是](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Array_Object)的。[VAO 仅存储对 VBO 的引用，以及glVertexAttribPointer](http://www.opengl.org/wiki/GLAPI/glVertexAttribPointer)指定的格式、偏移量等相关数据。[索引 VBO](http://www.opengl.org/wiki/Vertex_Specification#Index_buffers)的语义略有不同。

# android - 如何在 android 中使用 google 日历 api

> ID：15438606
> 
> 赞同：3
> 
> 时间：2013-03-15T17:28:22.280
> 
> 标签：android, google-calendar-api

我正在为 android 创建一个应用程序，它将使用 google calendar api。我将创建一个将集成到谷歌日历的调度程序。但是，我不知道我将如何开始。有人可以启发我并说明我将如何开始吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T17:36:49.130

我建议您首先选择一个 Java/Android API 包装库，以便在与 Google 日历交互时使用。是的，您可以直接调用他们的 API，但是通过使用一组预先构建的包装器对象，您可以省去相当多的挫败感。

Google 日历 API 使用 OAuth 身份验证，如果您以前没有使用过，这可能会有些令人生畏。理想情况下，您选择的库应包含 OAuth 方法。

Google 的 OAuth 游乐场 ( [https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/) ) 是开始使用 OAuth 流程的有用工具。

为简单起见，作为第一步，您可能会考虑构建一个与 Google 日历交互的 Java 应用程序，这样您就无需担心 Android 线程模型、UI 框架等，同时您正在熟悉如何使用 API。

Temboo 库包含有关 Google 日历 API 的相当有用的文档，Temboo Android SDK 包含与 Google 日历交互的方法。看看[https://live.temboo.com/library/Library/Google/Calendar/](https://live.temboo.com/library/Library/Google/Calendar/)

（全面披露：我在 Temboo 工作）

# liferay - 改变Liferay6.1的DLFileEntry的范围

> ID：15438611
> 
> 赞同：0
> 
> 时间：2013-03-15T17:28:45.120
> 
> 标签：liferay

我有许多文件已由一位用户添加。现在我需要将这些文件显示给所有用户（不仅仅是添加的用户）。我尝试直接对 db 进行更新（ResourcePermissin 范围 = 2）。但是没什么变化。。

如何解决这个问题？（通过代码或数据库查询）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:33:51.103

如果您只想向登录用户显示文件，我认为您可以更新文件的权限并授予角色`VIEW`权限`Guest`或授予角色`VIEW`权限。`USER`

概述步骤：

1.  获取文件
2.  将权限应用于文件
3.  保存更新的文件

关于 liferay 如何更新权限的想法可以从[`portal-web/docroot/html/portlet/portlet_configuration/edit_permissions_algorithm_5_to_6.jsp`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-web/docroot/html/portlet/portlet_configuration/edit_sharing.jsp "Github 上的代码")和

# java - 更改 TableViewer 的默认键绑定

> ID：15438620
> 
> 赞同：0
> 
> 时间：2013-03-15T17:29:09.960
> 
> 标签：java, swt, jface

默认情况下，当用户按下向上或向下箭头键时，JFace TableViewer 会上下移动选择。大多数情况下这是有道理的，但在我的应用程序中，业务逻辑会有所不同。

如何覆盖此行为？我尝试添加一个 KeyListener 并调用它，但默认操作仍然发生：选择更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:03:19.980

我发现我必须使用 TableViewerFocusCellManager 和 CellNavigationStrategy。我希望 FocusCellManager 是 TableViewer 的一个属性，但事实并非如此。显然，FocusCellManager 在幕后进行接线。

```
 CellNavigationStrategy navigationStrategy = new CellNavigationStrategy() {
        @Override
        public boolean shouldCancelEvent(ColumnViewer viewer, Event event) {
            return true;
        }
        @Override
        public boolean isNavigationEvent(ColumnViewer viewer, Event event) {
            return false;
        }
    };
    TableViewerFocusCellManager focusCellManager = new TableViewerFocusCellManager(tableViewer, new FocusCellOwnerDrawHighlighter(tableViewer), navigationStrategy); 
```

# mysql - 如何同时运行两个更新查询？

> ID：15438621
> 
> 赞同：0
> 
> 时间：2013-03-15T17:29:10.933
> 
> 标签：mysql

我正在尝试将 2 个更新查询作为一个`$result 运行，这可能吗，如果可以，有人可以告诉我下面的查询哪里出错了吗？

```
$query = "INSERT INTO ptb_users (id, user_id, first_name, last_name, email, password )
    VALUES('NULL','NULL','" . $firstname . "','" . $lastname . "','" . $email . "',MD5('" . $password . "'))";

mysql_query($query) or dieerr();
$result = mysql_query("UPDATE ptb_users SET ptb_users.user_id=ptb_users.id UPDATE ptb_users SET ptb_users.account_type= \"Client\""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:33:55.853

由于您的 s 上没有`WHERE`子句`UPDATE`，您可以像这样组合它们：

```
UPDATE ptb_users SET ptb_users.user_id = ptb_users.id,
  ptb_users.account_type = 'Client' 
```

**编辑**：如果您想要`UPDATE`该行，您只需`INSERT`编辑，然后只需添加`WHERE ptb_users.id = $id`（您可以使用它`mysql_insert_id()`来获取 ID）。

```
$query = "INSERT INTO ptb_users (id, user_id, first_name, last_name, email, password )
    VALUES('NULL','NULL','" . $firstname . "','" . $lastname . "','" . $email . "',MD5('" . $password . "'))";

mysql_query($query) or dieerr();
$id = mysql_insert_id();
$result = mysql_query("UPDATE ptb_users SET ptb_users.user_id = ptb_users.id,
      ptb_users.account_type = 'Client' WHERE ptb_users.id =".$id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:34:38.750

不推荐使用 Mysql* 函数。请改用[PDO/mysqli](http://php.net/manual/en/book.mysqli.php)。

作为一项安全措施，mysql* 函数不允许您执行多个查询。您可以使用 Mysql* 但是，您应该在执行之前准备好您的语句。

# c - 我的简单游戏中的内存分配

> ID：15438623
> 
> 赞同：1
> 
> 时间：2013-03-15T17:29:19.813
> 
> 标签：c, memory

我正在用 C 编写扫雷游戏。我希望能够玩具有不同大小和数量的地雷的不同雷区的游戏我创建了这样的结构来描述我的数据：

```
typedef struct t_Place Place;

struct t_Place{
    unsigned numberOfMinesNear;
    int mine;
    int state;
};

typedef struct t_Minefield Minefield;

struct t_Minefield{
    int xSize;
    int ySize;
    unsigned minesNumber;
    Place **places; 
}; 
```

所以，现在我正在尝试初始化我的雷区。我执行以下操作：

```
void makeGame(Minefield *minefield, unsigned x, unsigned y, unsigned mines){
    int i, j;  
minefield->places = malloc(x * y * sizeof(Place));       
    for(i = 0; i < x; i++)
        for(j = 0; j < y; j++){
            minefield->places[i][j].mine = EMPTY;
            minefield->places[i][j].state = HIDDEN;
            minefield->places[i][j].numberOfMinesNear = 0;
        }

minefield->xSize = x;
    minefield->ySize = y;

    unsigned minesToPlace = mines;
    srand(time(NULL));
    while(minesToPlace > 0){
        i = rand() % x;
        j = rand() % y;

        if(minefield->places[i][j].mine)
            continue;

        minefield->places[i][j].mine = MINE;
        minesToPlace--;      
    }  
    minefield->minesNumber = mines;
    // here will be call of play(minefield) function to start the game
}

int main(){
    Minefield *gameField = (Minefield *) malloc(sizeof(Minefield));

    makeGame(gameField, DEFAULT_X, DEFAULT_Y, DEFAULT_MINES);

    // DEFAULT_X = DEFAULT_Y = DEFAULT_MINES =  10

    free(gameField);
    return 0;
} 
```

我在 makeGame 函数的第一行代码中遇到了段错误。我做错了什么？我想动态地而不是静态地为我的雷区分配内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:10:40.913

```
minefield->places = malloc(x * y * sizeof(Place)); 
```

上面的内存分配可能是问题的根源，`places`是一个两星指针，所以必须有两个`malloc()`调用，一个分配行号`**place`指针，另一个`malloc()`分配列号`*place`类型的指针`place`。

这是分配/初始化包含在结构中的两星指针的[SSCCE 。](http://sscce.org/)

```
#include <stdio.h>
#include <stdlib.h>

#define ROW_SZ 5
#define COL_SZ 25

typedef struct demo{
char **str;
}demo;

int main()
{

demo *d = malloc( sizeof(demo) );

d->str = malloc(ROW_SZ * sizeof(char*) );             //d->str is assigned char**
  for ( i = 0; i < ROW_SZ; i++ )
        d->str[i] = malloc(COL_SZ * sizeof(char) );   //d-str[i] is assigned char*

// code here to use d->str[ROW_SZ][COL_SZ]

for ( i = 0; i < ROW_SZ; i++ )
  free(d->str[i]);

free(d->str);
free(d);

return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:16:10.883

这就是我通常看到分配的二维数组的方式：

```
minefield->places = malloc(x * sizeof(Place *));       

for(i = 0; i < x; i++)
{
    minefield->places[i] = malloc(x * sizeof(Place));
} 
```

试试这个，看看它是否会让你的段错误消失。

# iphone - 如何让我的段 UISegmentedControl 做出响应？

> ID：15438625
> 
> 赞同：0
> 
> 时间：2013-03-15T17:29:28.253
> 
> 标签：iphone, ios, objective-c, cocoa-touch

在我的 ViewController 中，我添加了一个 UISegmentedControl 来执行不同的任务来选择不同的分段控件。它是一款纸牌配对游戏。

一切似乎都很好，除了分段控件没有对选择做出反应..，我创建了一个开关来在“twoCardGame”和“threeCardGame”的情况下做一些事情。

据我了解，用枚举定义这些变量会很好，我在控制器的顶部做了这些，但似乎我在其中遗漏了一些东西..

抱歉，如果它不是那么直接，但我的控制器非常简短，如果你能告诉我我在 UISegmentedControl 方面做错了什么，我将不胜感激。

这里是：

```
#import "CardGameViewController.h"
#import "PlayingCardsDeck.h"
#import "CardMatchingGame.h"

enum CardGame {
    twoCardGame,
    threeCardGame
};

@interface CardGameViewController ()

@property (weak, nonatomic) IBOutlet UILabel *notificationLabel;
@property (weak, nonatomic) IBOutlet UILabel *scoreCounter;
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *cardButtons;
@property (strong, nonatomic) CardMatchingGame *game;
@property (weak, nonatomic) IBOutlet UISegmentedControl *numberOfCardsToPlayWith;

@end

@implementation CardGameViewController

//creating the getter method that creates a new card game.
- (CardMatchingGame *)game {
    if (!_game) {
        _game = [[CardMatchingGame alloc] initWithCardCount:self.cardButtons.count
                                                  usingDeck:[[PlayingCardsDeck alloc] init]];
        _game.numberOfCardsToPlayWith  = [self selectNumberOfCardsToPlayWith];
    }
    return _game;
}

//creating a setter for the IBOutletCollection cardButtons
-(void)setCardButtons:(NSArray *)cardButtons {
    _cardButtons = cardButtons;
    [self updateUI];
}

- (void)updateUI {

    for (UIButton *cardButton in self.cardButtons) {
        Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:cardButton]];
        [cardButton setTitle:card.contents forState:UIControlStateSelected];
        [cardButton setTitle:card.contents
                    forState:UIControlStateSelected|UIControlStateDisabled];
        cardButton.selected = card.isFaceUp;
        cardButton.enabled = !card.isUnplayable;
        cardButton.alpha = card.isUnplayable ? 0.3 : 1.0;

    }
    self.scoreCounter.text = [NSString stringWithFormat:@"Score: %d", self.game.score];
}

//Here I created a method to flipCards when the card is selected, and give the user a random card from the deck each time he flips the card. After each flip i'm incrementing the flipCount setter by one.
- (IBAction)flipCard:(UIButton *)sender {

    [self.game flipCardAtIndex:[self.cardButtons indexOfObject:sender]];;
    [self updateUI];
}

//sending an alert if the user clicked on new game button
- (IBAction)newGame:(UIButton *)sender {

   UIAlertView* mes=[[UIAlertView alloc] initWithTitle:@"Think about it for a sec..?" message:@"This will start a new game" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];

    [mes show];
}

- (NSUInteger)selectNumberOfCardsToPlayWith {
    switch (self.numberOfCardsToPlayWith.selectedSegmentIndex) {
        case twoCardGame:
            return 2;
        case threeCardGame:
            return 3;
        default:
            return 2;
    }

    [self updateUI];
}

//preforming an action according to the user choice for the alert yes/no to start a new game
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

    if (buttonIndex != [alertView cancelButtonIndex]) {

        self.game = nil;
        for (UIButton *button in self.cardButtons) {
            Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:button]];
            card.isUnplayable = NO;
            card.isFaceUp = NO;
            button.alpha = 1;
        }

        self.notificationLabel.text = nil;
        [self updateUI];

    }
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:43:16.003

我认为您最好创建一个选择器并将其添加到分段控制目标中，如下所示：

```
[segmentedControl addTarget:self
                         action:@selector(selectNumberOfCardsToPlayWith:)
               forControlEvents:UIControlEventValueChanged];

- (NSUInteger)selectNumberOfCardsToPlayWith:(UISegmentedControl *)control {
        switch (control.selectedSegmentIndex) {
            case twoCardGame:
                return 2;
            case threeCardGame:
                return 3;
            default:
                return 2;
        }

        [self updateUI];
} 
```

这应该可以正常工作。目前我自己使用类似的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:38:23.440

好吧，我没有看到任何`addTarget:`对分段控制的调用。所以你可能在 Interface Builder 中设置它们。检查 IB 连接。如果 IB 中的一切看起来都不错——尝试以`addTarget:`编程方式。

# java - 获得二次方程的精确根

> ID：15438627
> 
> 赞同：0
> 
> 时间：2013-03-15T17:29:29.987
> 
> 标签：java, performance

这是我到目前为止的代码。该项目的目标是让用户为方程输入任何整数`a`, `b`, 。出于某种原因，我没有得到输入到程序中的任何数字的正确根。谁能指出我的错误行为？`c``ax^2+bx+c`

```
import java.util.*;

public class Quad_Form {

public static void main(String[] args){

    Scanner sc = new Scanner(System.in);

    double a = 0;
    double b = 0;
    double c = 0;
    double discrim = 0;
    double d = 0;

    System.out.println("Enter value for 'a'");
    String str_a = sc.nextLine();
    a = Integer.parseInt(str_a);

    System.out.println("Enter value for 'b'");
    String str_b = sc.nextLine();
    b = Integer.parseInt(str_b);

    System.out.println("Enter value for 'c'");
    String str_c = sc.nextLine();
    c = Integer.parseInt(str_c);

    double x1 = 0, x2 = 0;
    discrim = (Math.pow(b, 2.0)) - (4 * a * c);
    d = Math.sqrt(discrim);

    if(discrim == 0){
        x1 = (-b + d) / (2* a);
        String root_1 = Double.toString(x1);
        System.out.println("There is one root at: " + root_1);
        }

    else {
        if (discrim > 0)
        x1 = (-b + d) / (2 * a);
        x2 = (-b - d) / (2 * a);
        String root_1 = Double.toString(x1);
        String root_2 = Double.toString(x2);
        System.out.println("There are two real roots at:"  + root_1 + "and"  + root_2);
        }

    if (discrim < 0){

        x1 = (-b + d) / (2 * a);
        x2 = (-b - d) / (2 * a);
        String root_1 = Double.toString(x1);
        String root_2 = Double.toString(x2);
        System.out.println("There are two imaginary roots at:" + root_1 + "and" + root_2);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:35:08.633

@Smit 关于其中一个问题是正确的，但还有第二个问题。

`Math.sqrt(discrim)``discrim`为负数时不起作用。你应该`Math.sqrt(Math.abs(discrim))`取而代之。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:31:10.643

`a`, `b`, `c`,`d`是双精度的，您将它们解析为整数。所以这可能是问题之一。

利用

```
 Double.parseDouble(); 
```

另一个问题是你不能做负数的平方根。这将导致`NaN`. 对于以下用途，但您应该正确处理以获得准确的结果。

```
 Math.sqrt(Math.abs()); 
```

此外，您应该使用以下公式来获取根源

![根由二次公式给出[](../Images/866aeb49188d77b8169824f8d3d9f15d.png)

取自维基百科[二次方程](http://en.wikipedia.org/wiki/Quadratic_equation)

[双班](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html)

[数学课](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#abs(double))

# perl - Perl：从网络目录下载所有 .jpgs

> ID：15438631
> 
> 赞同：1
> 
> 时间：2013-03-15T17:29:57.040
> 
> 标签：perl, file, download

```
#!/usr/bin/perl

use strict;
use warnings;
use WWW::Mechanize;
use FindBin qw($Bin);
print $Bin;
my $folder = "$Bin/Resources";
mkdir($folder, 0700) unless(-d $folder );
chdir($folder) or die "can't chdir $folder\n";
my $url = 'http://www.ukgamingcomputers.co.uk/images/zalmanz11plus.jpg';
my $local_file_name = 'pic.jpg';
my $mech = WWW::Mechanize->new;
$mech->get( $url, ":content_file" => $local_file_name ); 
```

我目前正在使用此代码下载 .jpg 并将其放在名为 Resources 的文件夹中。我想下载[http://www.ukgamingcomputers.co.uk/images/](http://www.ukgamingcomputers.co.uk/images/)目录中的所有 .jpg。我完全不知道我将如何实现这一目标。如果您有代码解决方案，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:50:36.727

I'm afraid you can't do that. It is also unlikely that the web site owner would want you to.

There is no practical problem with downloading an image in that path, but to fetch them all you need to know what they are called, and there is no way to get a directory listing using `HTTP`.

You *could* crawl the site, fetch all the HTML pages from it, and find the names of all the image files those pages link to, but that would be awkward to do and even less likely to be acceptable to the site owner. It would also get you only the images used on the site, and not all the images in the directory.

Some HTTP servers are configured to return a listing of the directory in HTML if no specific file is specified in the URL and there is no default `index.html` file to send, but that is unusual nowadays as it represents a security breach.

If you think the site owner won't mind you helping yourself to his pictures, why not just send an email asking for a copy of them?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:15:53.193

有点像你的例子，这会从你列出的那个网站中提取 jpgs。

```
#!/usr/bin/perl 
use strict;
use warnings;

use WWW::Mechanize;
use WWW::Mechanize::Link;
use Getopt::Long;

exit int main( parse_args() );

sub main {
    my $opts = shift;

    my $folder = $opts->{folder};
    chdir($folder) or die "can't chdir $opts->{folder}\n";

    my $mech = WWW::Mechanize->new;
    $mech->get( $opts->{url} );

    for my $link ( $mech->links() ) {
        next unless $link->text() =~ /jpg$/;
        $mech->get( $link->url() );
        $mech->save_content( $link->text() );
    }
}

sub parse_args {
    my %opts = (
        url    => "http://www.ukgamingcomputers.co.uk/images/",
        folder => "/home/kprice/tmp",
    );

    GetOptions( \%opts, 'url|u=s', 'folder|d=s', ) or die $!;

    return \%opts;
} 
```

如果您在 linux 上，这将起作用，但从该链接中提取所有内容：

`$ wget -r http://www.ukgamingcomputers.co.uk/images/`

编辑：在快速复制/粘贴之后，我稍微更正了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:44:12.400

你必须使用`WWW::Mechanize`吗？

`HTML::LinkExtor`这是一个例子`LWP::Simple`

编辑：这实际上从给定地址提取所有图像。

```
#!/usr/bin/perl

use warnings;
use strict;

use LWP::Simple;
use HTML::LinkExtor;
use Data::Dumper;
$Data::Dumper::Indent=1;

die "usage: $0 url\n" if @ARGV != 1;
my $url = shift;
$|++;

if ( $url !~ /^http/ ) { 
  print "usage: url ( http(s)://www.example.com/  )\n"; 
  exit(1);
}

my %images = (); 
my $html = get($url) 
  or die "could not get $url\n";

my $parser = HTML::LinkExtor->new(undef, $url);
$parser->parse($html);

my @all_link_refs = $parser->links();

for my $link_ref ( @all_link_refs  ) { 
  my ( $html_tag, $attr_name, $this_url ) = @$link_ref;
  if ( ($html_tag eq 'img') ) { 
    my $image_name = (split("/", $this_url))[-1];
    $images{$image_name}++;

    if ( $images{$image_name} == 1  ) { 
        print "Downloading $this_url to $image_name...\n";
        open my $PIC, ">", "$image_name";
        my $image = get($this_url);
        print $PIC $image;
    }   
  }
} 
```

输出：

```
$ test.pl http://google.com
Downloading http://google.com/intl/en_ALL/images/srpr/logo1w.png to logo1w.png... 
```

# python - SciPy 插值错误

> ID：15438634
> 
> 赞同：3
> 
> 时间：2013-03-15T17:30:16.497
> 
> 标签：python, numpy, scipy, interpolation

我`scipy.interpolate.interp1d`用来插值一些数据（这是〜二次的），但我得到了一些奇怪的结果（非常小的周期性数值差异）。为了说明这一点，我采用了插值数据的导数，您可以在其中看到周期性的窥视，这表明数据中存在一些不连续性。我知道它很小，但就我而言，它很重要。所以当你看原始函数的插值函数看起来不错，但是当我稍后做一些微积分时，我发现了一些奇怪的结果。

谢谢！！

图片：http: [//img37.imageshack.us/img37/9444/resultskx.png](http://img37.imageshack.us/img37/9444/resultskx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:44:13.093

确保您使用正确的顺序狐狸`x`值，例如（线性插值）：

```
def interp_normalize(x, y):
   dorder = {}
   for i, e in enumerate(x):
       dorder[e] = y[i]
   dorder = OrderedDict(sorted(dorder.items()))
   interpolate_x = list(dorder.keys())
   interpolate_y = list(dorder.values())
   return(interpolate_x, interpolate_y) 
```

# ms-access - 重新查询子表单显示没有效果

> ID：15438636
> 
> 赞同：1
> 
> 时间：2013-03-15T17:30:20.487
> 
> 标签：ms-access, vba, subform

如果有人可以帮助我的 Requery 编码，我有一些编码需要用于自动请求表单，而不是我必须按下刷新按钮来显示结果，编码已经发布在下面而且我也尝试了一些不同的方法，但它不会自动刷新。如果有人有任何答案，请告诉我。

```
Private Sub Form_AfterUpdate
    Form![Drinks].Requery
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:30:18.413

那么必须更新子表单才能触发 _AfterUpdate 事件，所以让我们假设它正在触发，试试 Me.Requery

# android - 多次组合3个相对布局

> ID：15438648
> 
> 赞同：0
> 
> 时间：2013-03-15T17:30:48.287
> 
> 标签：android, android-layout, android-relativelayout, layout-inflater

我有 3 个相对布局，我需要创建一个 setcontetntview，它是这些布局的组合，每个布局添加 3 次并共享相等的屏幕空间，并且需要以编程方式完成。我首先创建了一个新布局，只添加了 2 个屏幕，

```
 RelativeLayout primaryLayout = new RelativeLayout(this);
    LayoutInflater layoutInflater = (LayoutInflater)this.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
    RelativeLayout newLayout = (RelativeLayout)layoutInflater.inflate(R.layout.layout3, null, false);
    RelativeLayout newLayout1 = (RelativeLayout)layoutInflater.inflate(R.layout.layout4, null, false);
    primaryLayout.addView(newLayout);
    primaryLayout.addView(newLayout1);
    setContentView(primaryLayout); 
```

这仅显示layout4。另外，如果我再次添加相同的布局，它给出的错误说明指定的孩子已经有一个父母，你必须先在孩子的父母上调用 removeview()。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:37:29.103

您必须使用`addRule`布局参数来设置视图之间的关系。至于重新添加视图的抱怨，您可以尝试两个独立的视图实例。虽然它将是相同的布局，但父母不会知道这一点。

编辑：

要占据半屏，您必须告诉父视图为子视图分配多少空间：

```
RelativeLayout.LayoutParams forChild = new RelativeLayout.LayoutParams(30,40);
childView.setLayoutParams(forChild); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:39:02.317

它只显示 layout4 的原因是 primaryLayout 是一个相对布局。除非你指定一些东西告诉它他们在那个布局中去哪里，否则它都在左上角。所以一切都被叠放在一起。

您不能多次添加相同的布局。您必须为所需的每个版本重新充气一次，然后添加结果。它就像 OOP-RelativeLayout 是布局的一个实例，膨胀实例化一个新的。

# bash - 剥离管道输出的第一部分

> ID：15438653
> 
> 赞同：2
> 
> 时间：2013-03-15T17:31:01.247
> 
> 标签：bash, sed

我有一个输出以下内容的 bash 脚本：

```
SUM = 137892134.0000000 
```

我需要去掉字符串的第一部分，只留下数字，如果可能的话，格式化为整数。我假设我需要使用`sed`，但我似乎学习它的能力为零。

我需要能够编写一个条件语句，如果值小于 100 则可以操作。我不知道我是否可以在 bash 脚本中执行此操作，但这将是我挑战的第二部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:03:03.830

使用 sed 进行替换的基本形式是：

```
s/replace this/with this/ 
```

其中“replace this”和“with this”都是正则表达式。在您的情况下，您希望完全摆脱开头的文字字符串“SUM =”和结尾的小数。所以：

```
#!/bin/bash
sum=$(your_script.sh | sed 's/^SUM = //' | sed 's/\..*//')
if ! egrep -q '^[0-9]+$' <<< $sum; then
    echo "your_script.sh printed unexpected output!"
    exit 1
fi
if [ $sum -lt 100 ]; then
    echo "$sum is less than 100"
else
    echo "$sum is not less than 100"
fi 
```

第一行是将“SUM = 137892134.0000000”变成“137892134”。第一个 sed 将字符串 ( ) 开头的 "SUM = " 替换为空`^`内容（即删除它）。第二个 sed 找到第一个句点字符 ( `\.`) 并将它和它之后的所有内容 ( `.*`) 替换为空。然后将生成的字符串保存到使用的变量`$sum`中`$(...)`。

使用 egrep 的 if 语句正在检查以确保我们保存的值`$sum`实际上是一个整数，如果不是，则放弃。

第二个 if 语句将 $sum 的值（我们现在知道它是一个整数）与 100 进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:20:48.843

我不清楚您想如何处理“123.789”（打印为整数时是打印 124 还是 123）。考虑：

```
if $( echo SUM = 137892134.0000000 | awk '{printf "%d", $3}' ) -lt 100; then
   echo the value is less than 100!!
fi 
```

你也可以这样做：

```
if echo SUM = 137892134.0000000 | awk '$3 >= 100 { exit 1}'; then
    echo the value is less than 100!!
fi 
```

或者

```
if ! echo SUM = 137892134.0000000 | awk '{exit $3 < 100}'; then
     echo the value is less than 100!!
fi 
```

请注意，由于返回 1 的计算结果为失败，因此逻辑有点复杂`awk`，因此比较运算符与预期相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:59:05.987

这是`sed`执行此操作的一种方法：

```
echo 'SUM = 137892134.0000000' | sed 's/[^0-9.]//g' | sed 's/\..*//g' 
```

输出应该是这样的：`137892134`.

**关于命令的一些解释：**

*   `sed 's/[^0-9.]//g'`告诉`sed`删除任何不是数字 ( `0`- `9`) 或句点 ( `.`)的字符

*   `sed 's/\..*//g'`告诉`sed`删除`.*`小数点 ( ) 后的所有字符 ( `\.`)

*   此外，`echo`您可以将原始脚本的输出用于第一部分，而不是使用，然后可以通过管道将其输入`sed`以最终获得您想要的最终“int”。

*注意：这没有考虑William Pursell 提出的任何**舍入问题。***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:05:35.383

我建议：

```
bashScript | sed 's/.* \(.*\)\.0*/\1/' 
```

用英语：“取一堆东西，然后是一个空格，然后是*某物，然后是一个点，也许还有一些零，然后用**某物*替换所有这些。”

# excel - VBA 代码 - 保留复制到不同工作表的数据的格式

> ID：15438654
> 
> 赞同：1
> 
> 时间：2013-03-15T17:31:06.167
> 
> 标签：excel, vba, formatting, copy-paste

作为 Excel 中 VBA 的新用户，我正在尝试完成以下操作：
1）检查名为“索引”的工作表中一列的多行是否存在条件（我的条件是在 J 列的单元格中查找字母 Y )
2) 将满足条件的每一行中的选定列复制到 VBA 代码中编程的另一个工作表中，例如“Sheet2”
3) 保留被复制单元格的格式，即特别是公式和粗体字体。

我之前在 VBA 代码中问了一个问题[，将满足条件的行中的选定列复制到另一张纸上](https://stackoverflow.com/questions/15394524/vba-code-to-copy-selected-columns-from-rows-that-meet-a-condition-to-another-she)，并且 ATl LED 友好地给出了以下代码，该代码可以工作并复制值但不复制格式（我忘了在我的问题中包含这个)

我对代码进行了试验，并在 IF 语句中将 .Value 调整为 .FormulaR1C1。公式被复制并在复制到的工作表中工作，即 Sheet2，但我无法使格式正常工作。

我错过了什么？

```
Sub try3()
Dim i, x As Long
Dim Y as String
Dim ws1 As Worksheet: Set ws1 = ActiveWorkbook.Sheets("Index")
Dim ws2 As Worksheet: Set ws2 = ActiveWorkbook.Sheets("Sheet2")
x = 5
Y = "Y"
For i = 2 To 500:
If ws1.Cells(i, 10) = Y Then
   Range(ws2.Cells(x, 1), ws2.Cells(x, 7)).Value = Range(ws1.Cells(i, 3), ws1.Cells(i, 9)).Value
  x = x + 1
End If
Next i
End Sub 
```

谢谢，约翰M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:42:24.093

放置以下代码行：

```
Range(ws1.Cells(i, 3), ws1.Cells(i, 9)).Copy Range(ws2.Cells(x, 1), ws2.Cells(x, 7)) 
```

而不是你的线：

```
Range(ws2.Cells(x, 1), ws2.Cells(x, 7)).Value = Range(ws1.Cells(i, 3), ws1.Cells(i, 9)).Value 
```

或者，如果 ws1 表中有任何您不想复制的公式（但值），则将两者保持相同的顺序。

# batch-file - 如何使用 ftp 命令覆盖应用程序正在使用的文件

> ID：15438670
> 
> 赞同：1
> 
> 时间：2013-03-15T17:32:01.720
> 
> 标签：batch-file, ftp, overwrite

我需要使用以下 ftp 脚本通过网络将文件分发到其他服务器*（操作系统：Windows Server 2003） 。**（请参阅附件 1）*我正在尝试覆盖一些当前由应用程序使用的文件。在执行此操作时，我不应该停止应用程序。当我尝试使用这个脚本时，我收到了一个错误*（见附件 2）*并且文件没有被覆盖。

**附件一**
ftp_command.txt

```
username
password
lcd C:\deploy
bin
prompt
mput *.txt
disconnect
bye 
```

runner_command.bat

```
ftp -s:/home/script/ftp_script.txt <IP Address> 
```

**附件 2**
错误消息：
*550 请求的操作无法在打开了用户映射部分的文件上执行。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:49:47.480

There is no way around that with ftp. The file is in use--if it were to be replaced, the application that's using it would likely fail because it would not be aware of the change. You will have to find a way to stop the application that is using the file.

# ios - 在 Objective-c 中从 .bundle 加载 png 时出错

> ID：15438673
> 
> 赞同：4
> 
> 时间：2013-03-15T17:32:08.990
> 
> 标签：ios, objective-c, xcode, png, bundle

我正在我的 Xcode 项目中构建一个框架。为了构建框架，我创建了一个聚合目标。该框架由静态库、头文件和 .png 资产包组成，`MyFrameworkResources.bundle`. 当我构建聚合时，一切都已成功创建，并且捆绑包存在于我的 Products 目录中。

在我的 Xcode 项目中还有一个目标应用程序。此应用程序用于测试框架产品（静态库、头文件和捆绑包）。我已经添加了静态库和`MyFrameworkResources.bundle`目标应用程序的目标依赖项。我还在`MyFrameworkResources.bundle`目标应用程序的构建阶段添加了复制捆绑资源。

我可以很好地使用静态库中的所有文件，但是在尝试从包中加载资源时出现错误。这就是我从包中加载资产的方式：

```
NSString *mainBundlePath = [[NSBundle mainBundle] resourcePath];
NSString *frameworkBundlePath = [mainBundlePath stringByAppendingPathComponent:@"MyFrameworkResources.bundle"];
NSBundle *frameworkBundle = [NSBundle bundleWithPath:frameworkBundlePath];
NSLog(@"bundle: %@", frameworkBundle);

NSError *error;
[frameworkBundle loadAndReturnError:&error]; // <-- THIS RETURNS AN ERROR
NSLog(@"error: %@", error);
UIImage *image = [UIImage imageWithContentsOfFile:[frameworkBundle pathForResource:@"AnyImage" ofType:@"tiff"]]; // <-- EDIT, USE "tiff", NOT "png" 
```

当我记录捆绑包时，我得到了这个：

捆绑包： **NSBundle /Users/my_comp/Library/Application Support/iPhone Simulator/6.1/Applications/blah-blah-blah/MyApp.app/MyFrameworkResources.bundle（尚未加载）**

当我记录错误时，我得到这个：

错误： **错误域 = NSCocoaErrorDomain 代码 = 4“无法加载捆绑包“MyFrameworkResources”，因为无法找到其可执行文件。” UserInfo=0x7535ee0 {NSLocalizedRecoverySuggestion=尝试重新安装捆绑包。, NSLocalizedFailureReason=找不到捆绑包的可执行文件。, NSLocalizedDescription=捆绑包“MyFrameworkResources”无法加载，因为找不到它的可执行文件。, NSBundlePath=/Users /my_comp/Library/Application Support/iPhone Simulator/6.1/Applications/blah-blah-blah/MyApp.app/MyFrameworkResources.bundle}**

`/Users/my_comp/Library/Application Support/iPhone Simulator/6.1/Applications/blah-blah-blah/MyApp.app/`所以为了仔细检查，我在我的电脑上cd'd ，`MyFrameworkResources.bundle`它实际上就在那里。所以现在我很茫然。我试过清理聚合目标，清理目标应用程序，删除目标应用程序，没有运气。

**知道为什么我不能从捆绑包中加载图像吗？**（抱歉描述太长了）

仅供参考，我一直在使用[这个很棒的教程](https://github.com/jverkoey/iOS-Framework#step-4-loading-bundle-resources)作为构建框架和包的指南。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T04:16:54.337

啊，在为此苦苦挣扎之后，我 cd'd`MyFrameworkResources.bundle`只是为了仔细检查所有资产是否都包括在内。事实证明，Xcode 将 .png 文件重命名为 .tiff 文件，并删除了视网膜资源。经过进一步调查，我发现**Xcode 自动将视网膜和非视网膜 .png 文件组合成“一个多页 TIFF”**。这是一个[参考](https://stackoverflow.com/a/5568317/931746)。

解决方案，使用`ofType:@"tiff"`代替`ofType:@"png"`：

```
UIImage *image = [UIImage imageWithContentsOfFile:[frameworkBundle pathForResource:@"AnyImage" ofType:@"tiff"]]; 
```

# android - PullToRefreshScrollView 中的 Android PullToRefresh 库剪辑视图问题

> ID：15438678
> 
> 赞同：2
> 
> 时间：2013-03-15T17:32:23.060
> 
> 标签：android

[问题视频在这里](https://www.youtube.com/watch?v=YxtZzw32r5s)

[链接到图书馆](https://github.com/chrisbanes/Android-PullToRefresh)

视频可能有点难以看清，但是当我向 Activity 添加新片段时，正在发生的事情是 ScrollView 中的内容出现了奇怪的剪辑。不是平滑地向下动画，而是创建大约 55 像素的额外边距（在 720 x 1280 手机上），然后在动画完成后自行纠正。

我翻遍了源代码，发现如果我将这两个方法从 PullToRefreshBase 类的 onSizeChanged() 方法中注释掉，动画将正常工作：

```
@Override
protected final void onSizeChanged(int w, int h, int oldw, int oldh) {
    if (DEBUG) {
        Log.d(LOG_TAG, String.format("onSizeChanged. W: %d, H: %d", w, h));
    }

    super.onSizeChanged(w, h, oldw, oldh);

    //TODO both of these methods below combined cause the glitchy issue

    // We need to update the header/footer when our size changes
    refreshLoadingViewsSize();

    // Update the Refreshable View layout
    refreshRefreshableViewSize(w, h);

    //TODO both of these methods above combined cause the glitchy issue

    /**
     * As we're currently in a Layout Pass, we need to schedule another one
     * to layout any changes we've made here
     */
    post(new Runnable() {
        @Override
        public void run() {
            requestLayout();
        }
    });
} 
```

refreshLoadingViewsSize() 和 refreshRefreshableViewSize() 方法共同导致了问题。但是，当我将它们注释掉时，PullToRefresh 功能不再起作用。这是因为第一个设置标题大小的方法没有被调用。这意味着标题高度始终为 0，这破坏了下拉功能，该功能依赖于标题的高度来工作。此外，标题本身甚至不会出现，这是行不通的。

不幸的是，只评论一个会使剪辑问题变得更糟。

我还尝试了一个 hacky 修复，我只在第一次调用 onSizeChanged 时运行这两个方法，然后忽略它们。像这样：

```
if(mFirstGo) {
    // We need to update the header/footer when our size changes
    refreshLoadingViewsSize();

    // Update the Refreshable View layout
    refreshRefreshableViewSize(w, h);

    mFirstGo = false;
} 
```

除了一个问题外，这很好用。添加片段时，填充设置不正确，导致 ScrollView 的内容高于应有的内容。这是因为填充是第一次设置的，但之后再也不会重置。就好像padding一直都是0没问题，但是如果一开始就设置了，每次view size变化时都需要继续reset。

我认为这个问题的原因是独立于视图变化发生的填充变化，但我不确定。如果有人在这里有一些见识，我将不胜感激。谢谢！

# java - 如何使用 CDI（焊接）编写可插拔应用程序？

> ID：15438680
> 
> 赞同：1
> 
> 时间：2013-03-15T17:32:23.997
> 
> 标签：java, plugins, cdi, pluggable

我想编写一个小型 SE 应用程序来运行特定于操作系统的命令。这些命令作为“插件”提供给主应用程序，以便能够**在运行时**添加新的命令实现。这是一个强制性要求：执行新插件不需要重新部署主应用程序。

因此，我开始尝试使用 CDI 进行设置：

```
// On a common dependency 
@Qualifier
@Retention(RUNTIME)
@Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface Plugin {
    String value();
}

public interface Pluggable {
    void execute(PluginContext context);    
} 
```

插件实现将是这样的（在单独的 jar 中）：

```
@Plugin("greeting")
public class GreetingPlugin implements Pluggable {
    public void execute(PluginContext context) {
        String greet = context.get("hello.world");
        System.out.println(String.format("Hello, %s", greet));
    }
} 
```

这很好用，当使用以下注入点加载时，加上一个 select() 调用：

```
@Inject @Any Instance<Pluggable> plugin; 
```

**但是，我想知道添加在运行时**添加类的能力的最佳方法是什么，以便将新文件添加到“插件”目录的事件自动将其注册到 ClassLoader**和**Weld 容器上。

有什么建议么？我还没有考虑过的陷阱？我在 CDI 方面的经验相当有限，也许它甚至可能不是解决这个问题的合适选择。

**免责声明**由于公司许可政策，OSGI 被排除在外。在这方面无能为力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:04:05.667

在我看来，您正在寻找的是 CDI 1.1 所要求的功能，但即使对于 CDI 2.0，它也不太可能进入，请参阅此[JIRA](https://issues.jboss.org/browse/CDI-114)。您可能需要考虑其中讨论的几种替代方案。

简单的答案是 - 不，CDI 本身不提供此类功能。也就是说，假设您可以自己实现动态类加载，在 SE 环境中，只需重新启动 CDI 容器就可以轻松地使用新加载的插件动态重新配置您的应用程序 - 请参阅[Bootstrapping CDI](http://docs.jboss.org/weld/reference/latest/en-US/html/environments.html#d0e5506)。

所以你会[观察你的`/plugins`目录是否有变化](http://docs.oracle.com/javase/tutorial/essential/io/notification.html#overview)。这反过来会触发动态类加载，然后重新启动焊接。动态类加载部分可能会变得很复杂，所以我会让你弄清楚这一点。

希望这可以帮助。

# c# - C#如何找到一个类的非创建对象？

> ID：15438683
> 
> 赞同：2
> 
> 时间：2013-03-15T17:32:34.387
> 
> 标签：c#, class, linked-list

我有这门课

```
class Node
{
    public bool is_end;
    public int prefix_count;
    public Node[] child = new Node[26];
} 
```

我的问题是，该类仅在必要时创建节点，但在程序的后期，我需要检查所有创建的节点，但由于我不知道创建了哪些节点，因此我不能为其使用循环.

有没有办法让我知道创建了哪些节点，是否有代码来检查这个节点是否存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:36:32.007

尝试使用 a`List<Node>`而不是固定长度的数组。然后你可以使用诸如

```
var nodeList = new List<Node>();
nodeList.Add(someRandomNode);
if (nodeList.Contains(someRandomNode)) 
{
    // your logic
} 
```

你也可以迭代你的`Node`集合。

```
foreach(var node in nodeList) { } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T17:34:52.740

在这种情况下，您的`child`数组是预先创建的，但不会分配每个单独的节点。您可以检查`null`是否`Node`已创建 a：

```
bool ChildCreated(Node parent, int childIndex)
{
    return parent.child[childIndex] != null;
} 
```

* * *

> 我必须找出创建了哪些子节点，例如从 0 到 25 的循环，并且它必须给出一个消息，如 node[2] 和 node[11] 已创建，其他的则没有。

使用此方法，您可以轻松做到：

```
var created = Enumerable.Range(0, node.child.Length).Where(i => ChildCreated(node, i)).ToList();
if (!created.Any())
{
    Console.WriteLine("No children created.");
}
else
{
    Console.WriteLine("Children {0} created, all others aren't.", string.Join(", ", created));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:34:22.890

您需要做的就是检查`Node[]`元素是否为空：

```
int nodeIndex = 0;
if(child[nodeIndex] == null)
{
    // node doesn't exist
}
else
{
    // node exists
} 
```

# iphone - iOS UIActivity 视图控制器：添加到阅读列表按钮？

> ID：15438686
> 
> 赞同：9
> 
> 时间：2013-03-15T17:32:45.083
> 
> 标签：iphone, ios, safari, uiactivityviewcontroller

是否有能够从应用程序中将 URL 添加到 iOS Safari 阅读列表的服务。

我将有一个要添加的 url 和一个 UIWebView，但我已经研究过，我找不到任何东西。

这是我工作的 UIActivityViewController。

```
 -(IBAction)actionButton:(id)sender;{
    NSLog(@"shareButton pressed");
    NSURL *URL = [NSURL URLWithString:self.feedItem[@"url"]];//this is your text string

    NSArray *activityItems = @[URL];
    ARChromeActivity *chromeActivity = [[ARChromeActivity alloc] init];

    TUSafariActivity *TUSafari = [[TUSafariActivity alloc] init];
    MLCruxActivity *cruxActivity = [[MLCruxActivity alloc] init];

    NSArray *applicationActivities = [NSArray arrayWithObjects:TUSafari,chromeActivity,cruxActivity, nil];
    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities: applicationActivities];
    activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:applicationActivities];

    activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact];
    [self presentViewController:activityVC animated:TRUE completion:nil];
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:30:10.393

**更新：** iOS 7 添加了一个 API 来完成此操作：

```
#import <SafariServices/SafariServices.h>

SSReadingList * readList = [SSReadingList defaultReadingList];
NSError * error = [NSError new];

BOOL status =[readList addReadingListItemWithURL:[NSURL URLWithString:urlToAdd] title:titleToAdd previewText:previewText error:&error];

if(status)
{
        NSLog(@"Added URL");

}
else    NSLog(@"Error"); 
```

* * *

目前（iOS SDK 6.1）无法从第三方应用程序将项目添加到阅读列表。

您可以使用一些替代方案，例如[Readability 。](http://www.readability.com/)

# java - 列表视图在结束时加载更多项目

> ID：15438689
> 
> 赞同：0
> 
> 时间：2013-03-15T17:32:58.083
> 
> 标签：java, android

我想实现一个listView，当我到达终点时，它将加载更多项目，

我实现了这个类：

```
public class ProfileActivity extends ListActivity  {

    protected static final int STATIC_INTEGER_VALUE = 500;

    protected static final int STATIC_INTEGER_GROUP = 501;

    private  ListView lv;
    private TextView profileNameText;
    private TextView emailText;
    private TextView phoneText;
    private TextView addressText;

    private Button saleBtn;
    private Button groupBtn;
    private Button deliverBtn;

    private ProfilePictureView profilePic;
    private MyCustomAdapter adapter;

    EditText edittext;

    private List<String> text = new ArrayList<String>();
    private List<Bitmap> listImages;

     int textlength = 0;

     ArrayList<String> text_sort = new ArrayList<String>();
     ArrayList<Bitmap> image_sort = new ArrayList<Bitmap>();

        public void onScroll(AbsListView view,
                int firstVisible, int visibleCount, int totalCount) {

                boolean loadMore = /* maybe add a padding */
                    firstVisible + visibleCount >= totalCount;

                if(loadMore) {
                    adapter.count += visibleCount; // or any other amount
                    adapter.notifyDataSetChanged();
                }
            }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                  setContentView(R.layout.profile_page);

         lv = getListView();
         lv.setOnScrollListener(new OnScrollListener() {

             @Override
             public void onScrollStateChanged(AbsListView view, int scrollState) {
                 // TODO Auto-generated method stub

             }

             @Override
             public void onScroll(AbsListView view, int firstVisibleItem,
                     int visibleItemCount, int totalItemCount) {

                 boolean loadMore = /* maybe add a padding */
                         firstVisibleItem + visibleItemCount >= totalItemCount;

                        if(loadMore) {
                            adapter.count += visibleItemCount; // or any other amount
                            adapter.notifyDataSetChanged();
                        }

             }
         });
         LayoutInflater inflater = getLayoutInflater();
        View header = inflater.inflate(R.layout.profile_header, (ViewGroup) findViewById(R.id.header_layout_root));
        lv.addHeaderView(header, null, false);

         adapter =new MyCustomAdapter(text,listImages);
          lv.setAdapter(adapter);
          edittext= (EditText) findViewById(R.id.EditText01);

    class MyCustomAdapter extends BaseAdapter{

        int count = 1;
          public   List<String> text_array = new ArrayList<String>();
          public   List<Bitmap> image_array = new ArrayList<Bitmap>();
          public int getCount(){
               return text_array.size();
          }

          MyCustomAdapter(List<String> text, List<Bitmap> image)
          {
           text_array = text;
           image_array = image;
          }
          public long getItemId(int position){
               return position;
          }
          public String getItem(int position){
               return null;
          }
          public View getView(final int position, View convertView, ViewGroup parent) {
            LayoutInflater inflate = getLayoutInflater();
            View v = inflate.inflate(R.layout.listview, parent, false);
            final ImageView image = (ImageView) v.findViewById(R.id.ImageView01);
            TextView txtUnderImage =(TextView) v.findViewById(R.id.TextView01);

             if(listImages.get(position) != null) {
                         Bitmap bitmap = image_array.get(position);
                        image.setImageBitmap(bitmap);
                        ByteArrayOutputStream stream = new ByteArrayOutputStream();
                        bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
                        final byte[] byteArray = stream.toByteArray();

                         image.setOnClickListener(new View.OnClickListener() {

                            public void onClick(View v) {
                                // Switching to Register screen
                             Intent i = new Intent(getApplicationContext(), itemSaleActivity.class);
                             i.putExtra("picture", byteArray);
                            startActivity(i);

                                }
                        });
                         txtUnderImage.setText(text_array.get(position));
                         image.setVisibility(View.VISIBLE);
              } else {
                         image.setVisibility(View.GONE);
                         image.setImageBitmap(null);
                          image.setVisibility(View.VISIBLE);
          }
         return v;

        }
         public void addObject(String text, Bitmap bitmap) {
                text_array.add(text);
                image_array.add(bitmap);
            notifyDataSetChanged();
         } 

         public void addFirst(String text, Bitmap bitmap) {

                image_array.add(0,bitmap);
                text_array.add(0,text);

                notifyDataSetChanged();
             } 
         public void removeObject(String text,Bitmap bitmap) {

                int indexToRemove = image_array.indexOf(bitmap);
                image_array.remove(indexToRemove);
                text_array.remove(indexToRemove);
                notifyDataSetChanged();
         }
         public void deleteAll() {
             image_array.clear();
             text_array.clear();
             notifyDataSetChanged();
         }
    }
    } 
```

这是logcat：

```
03-15 15:12:57.885: E/AndroidRuntime(2027): FATAL EXCEPTION: main
03-15 15:12:57.885: E/AndroidRuntime(2027): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sale/com.example.sale.TabMainActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sale/com.example.sale.ProfileActivity}: java.lang.NullPointerException
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.os.Looper.loop(Looper.java:137)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at java.lang.reflect.Method.invokeNative(Native Method)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at java.lang.reflect.Method.invoke(Method.java:511)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at dalvik.system.NativeStart.main(Native Method)
03-15 15:12:57.885: E/AndroidRuntime(2027): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sale/com.example.sale.ProfileActivity}: java.lang.NullPointerException
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:2023)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:749)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.widget.TabHost.setCurrentTab(TabHost.java:413)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.widget.TabHost.addTab(TabHost.java:240)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at com.example.sale.TabMainActivity.addTab(TabMainActivity.java:82)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at com.example.sale.TabMainActivity.setTabs(TabMainActivity.java:57)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at com.example.sale.TabMainActivity.onCreate(TabMainActivity.java:53)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.Activity.performCreate(Activity.java:5104)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-15 15:12:57.885: E/AndroidRuntime(2027):     ... 11 more
03-15 15:12:57.885: E/AndroidRuntime(2027): Caused by: java.lang.NullPointerException
03-15 15:12:57.885: E/AndroidRuntime(2027):     at com.example.sale.ProfileActivity$3.onScroll(ProfileActivity.java:323)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.widget.AbsListView.invokeOnItemScrollListener(AbsListView.java:1340)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.widget.AbsListView.setOnScrollListener(AbsListView.java:1329)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at com.example.sale.ProfileActivity.onCreate(ProfileActivity.java:306)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.Activity.performCreate(Activity.java:5104)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-15 15:12:57.885: E/AndroidRuntime(2027):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-15 15:12:57.885: E/AndroidRuntime(2027):     ... 23 more 
```

正如我从 logcat 中看到的那样，我在这一行中得到了一个空指针异常：

```
lv.setOnScrollListener(new OnScrollListener() { 
```

我没有发现问题...

这也是我的 xml 文件：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/linearLayout1"
        android:orientation="vertical" >

                <EditText android:id="@+id/EditText01"
                                android:layout_height="wrap_content"
                                android:layout_width="fill_parent"
                                android:hint="Search">                               
                </EditText>

                <ListView android:id="@+id/android:list"
                                android:layout_height="wrap_content"
                                android:layout_width="fill_parent">
                </ListView>

    </LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:49:56.040

首先创建适配器。然后设置 onscrolllistener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:38:57.113

试试`android:id="@android:id/list"`你的布局，而不是`android:id="@+id/android:list"`.

（@Raghav Sood 比我快 :)）

# java - 如何迁移到新的 TokenBasedRememberMeServices API

> ID：15438691
> 
> 赞同：1
> 
> 时间：2013-03-15T17:33:01.023
> 
> 标签：java, spring, spring-security

切换到 Spring 3.1 后，Eclipse 开始抱怨我们当前的`TokenBasedRememberMeServices`. 扩展它的类有一个已被弃用的无参数构造函数。新的[构造函数接受两个参数](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/rememberme/TokenBasedRememberMeServices.html#TokenBasedRememberMeServices%28java.lang.String,%20org.springframework.security.core.userdetails.UserDetailsService%29)。

摘自 applicationContext-security.xml ：

```
<bean id="rememberMeServices" class="MyRememberMeServices"
  p:key="${rememberMeServices.key}">
    <property name="userDetailsService" ref="userDetailsService"/>
</bean> 
```

迁移到新 API 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:50:20.177

Use constructor injection:

```
<bean id="rememberMeServices" class="MyRememberMeServices">
    <constructor-arg value="${rememberMeServices.key}" />
    <constructor-arg ref="userDetailsService" />
</bean> 
```

Obviously you'd add a corresponding constructor in your `MyRememberMeServices` which calls the parent class.

# ruby-on-rails - 如何使用 Rails 在浏览器的时区中显示 DateTime？

> ID：15438692
> 
> 赞同：4
> 
> 时间：2013-03-15T17:33:10.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, ruby-on-rails-3.2, timezone

Rails 将所有`DateTime`s 存储在 UTC 时区中。我现在需要在他们的浏览器报告他们所在的时区中向用户显示那个时间。有没有简单的方法可以做到这一点？

使用最新的 Rails (3.2.13)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-20T01:40:54.013

有人将解决方案变成了宝石：

[https://github.com/basecamp/local_time](https://github.com/basecamp/local_time)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:10:28.230

> 在客户端（js）中：

```
function set_time_zone_offset() {
    var current_time = new Date();
    $.cookie('time_zone', current_time.getTimezoneOffset());
} 
```

> 在应用程序控制器中：

```
before_filter :set_timezone 

def set_timezone  
 min = request.cookies["time_zone"].to_i
 Time.zone = ActiveSupport::TimeZone[-min.minutes]
end 
```

信用：[https ://stackoverflow.com/a/5930596/643500](https://stackoverflow.com/a/5930596/643500)

# java - 如何在spring中使用java枚举作为bean

> ID：15438694
> 
> 赞同：5
> 
> 时间：2013-03-15T17:33:24.317
> 
> 标签：java, spring, spring-3

我想要实现的目标是将枚举注入 Spring 托管 bean。

我不希望我的 bean 在 XML 中配置（没有理由这样做，除了这个不工作的枚举）。

我有简单的 Maven 项目：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>net.betlista</groupId>
    <artifactId>test.spring.enum-injection</artifactId>
    <version>1.0-SNAPSHOT</version>

    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.5.4</version>
        </dependency>

        <!-- testing -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.1.3.RELEASE</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <properties>
        <junit.version>4.11</junit.version>
    </properties>
</project> 
```

我创建了简单的测试

```
import net.betlista.spring.enum_injection.EnumInjectionComponent;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:applicationContext.xml")
public class TestClass {

    @Autowired
    EnumInjectionComponent component;

    @Test
    public void test() {
        Assert.assertNotNull(component.roundingMode);
    }

} 
```

我的豆子是

```
package net.betlista.spring.enum_injection;

import java.math.RoundingMode;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class EnumInjectionComponent {

    @Autowired
    public RoundingMode roundingMode;

} 
```

当我试图运行我的测试时，Ipm 得到

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'enumInjectionComponent': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: public java.math.RoundingMode net.betlista.spring.enum_injection.EnumInjectionComponent.roundingMode; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.math.RoundingMode] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: public java.math.RoundingMode net.betlista.spring.enum_injection.EnumInjectionComponent.roundingMode; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.math.RoundingMode] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:513)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 39 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.math.RoundingMode] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:948)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:817)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:731)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:485)
    ... 41 more 
```

但在日志中我可以看到：

> INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@236527f: defining beans [org.springframework.context.config.internalBeanConfigurerAspect,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,enumInjectionComponent,rounding,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy

So I have rounding bean in context.

What I missed?

edit: I just found, the problem is with Spring version 3.1.x only, in 3.2.x it works, any workaround available?

edit2: here is definition of beans

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    ">

    <context:spring-configured />
    <context:annotation-config />
    <context:component-scan base-package="net.betlista"/>

    <bean id="rounding" class="java.math.RoundingMode" factory-method="valueOf">
        <constructor-arg value="UP" />
    </bean>

</beans> 
```

edit3:

as workaround I used Dev Blanked's workaround to specify the list, and use @Value in my bean as

```
@Value("#{roundingModes[0]}")
public RoundingMode roundingMode; 
```

if there is a better (nicer) solution I'd like to see it ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:01:43.737

It should be possible to provide the bare enum name and specify the value-type. below is an example where the rounding mode has been injected to a list. should be the same for a property as well.

```
<util:list id="roundingModes" value-type="java.math.RoundingMode">
    <value>UP</value>
</util:list> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:58:50.870

Another approach one can use is to specify UP as String and in bean implement [InitializingBean interface](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/InitializingBean.html) and create the enum in `afterPropertiesSet()` from that String.

```
@Override
public void afterPropertiesSet() throws Exception {
    roundingMode = RoundingMode.valueOf(roundingModeName);
} 
```

# javascript - 在 JavaScript 中将 onclick 事件添加到附加的 div 标签

> ID：15438695
> 
> 赞同：1
> 
> 时间：2013-03-15T17:33:34.337
> 
> 标签：javascript, jquery, html, css, dom

我正在尝试将点击事件添加到我通过附加它们创建的一堆 div 元素中，但我遇到了一些麻烦。

我有一堆 id 为 a0 ---> an 的 div 元素。我试图在创建 div 后创建一个 for 循环以分配它们的点击事件。问题是当点击事件发生时我这样做的方式我没有任何方法可以跟踪哪个 div 触发了事件。下面的代码可能会使这一点更清楚。所以我遇到的问题是 #a + i 总是返回最后一个 div，我希望它返回被点击的 div 编号。

```
$(document).ready(function () {
            traverse(oo);
            for (i = 0; i <= groupNum; i += 1) {
                $("#a" + i).click(function () {
                    console.log("#a" + i + "clicked");
                });
            }
        }); 
```

我考虑过返回一个闭门器，但这似乎会让它变得更加复杂。有人对如何做到最好有任何建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T17:37:27.143

我不确定您要做什么，但如果您只想将点击事件分配给一堆元素，请使用正确的选择器（注意使用`$(this)`来获取点击的元素）：

```
$("div").click(function(){
   var clickedDiv = $(this);
   var id = clickedDiv.attr("id");
}); 
```

* * *

如果您不想要所有`div`元素，那么您可以向它们添加一个类并使用不同的选择器：

```
$(".MyDivClass").click(function(){... 
```

或没有类，在`id`（以下获取属性以“a”开头的所有`div`元素）上的“开始于”：`id`

```
$("div[id^='a']").click(function(){... 
```

* * *

如果您正在使用其他 javascript 动态添加 div，并且希望它们自动具有点击事件，请使用该`on`函数...

```
$(document).on("click", ".MyDivClass", function(){... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:36:50.120

如您所见，该变量`i`将包含上次迭代时设置的值。改变

```
console.log("#a" + i + "clicked"); 
```

经过

```
console.log(this.id + " clicked"); 
```

在事件处理程序中，`this`是事件的目标 DOM 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:40:31.070

你可以这样做：

```
$('[id^="a"]').click(function () {
  console.log(this.id+" clicked");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:51:40.380

You may assign a click event to a class instead of to specific ID's and use conditional statements within the click function to do different things base on ID.

```
 $(documnet).ready(function(){
        $('.clickclass').click(function(){
                  /* conditional code here */
        });
    }); 
```

# javascript - 如何合并两个对象中的数组？

> ID：15438706
> 
> 赞同：0
> 
> 时间：2013-03-15T17:34:28.750
> 
> 标签：javascript, jquery

我有类似的东西：

```
var object1 = { 'tab1' : [{ test : 10 }, { test : 15 }], 'tab2' : [{ test : 15 }] };

var object2 = { 'tab2' : [{ test : 35 }, { test : 25 }], 'tab3' : [{ test : 40 }] }; 
```

我需要结果：

```
var object3 = { 
    'tab1' : [{ test : 10 }, { test : 15 }],
    'tab2' : [{ test : 35 }, { test : 25 }, { test : 15 }],
    'tab3' : [[{ test : 40 }]
}; 
```

我怎样才能做到这一点？

`$.extend(true, object1, object2)`返回没有`{ test : 15 }`in 的对象`tab2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:41:48.470

我会在这里使用javascript，比如

```
var merged = [];
for (var key in object1) {
    if (object1.hasOwnProperty(key)){
       var obj1Arr, obj2Arr;
       obj1Arr = object1[key];
       obj2Arr = object2[key];

       if (obj1Arr) merged = merged.concat(obj1Arr);
       if (obj2Arr) merged = merged.concat(obj2Arr);
       object3[key] = merged;
        merged = [];
    }
}

for (var key in object2) {
    if (object2.hasOwnProperty(key) && !object3[key]){ // ignore the keys we already found
       var obj1Arr, obj2Arr;
       obj1Arr = object1[key];
       obj2Arr = object2[key];

       if (obj1Arr) merged = merged.concat(obj1Arr);
       if (obj2Arr) merged = merged.concat(obj2Arr);
       object3[key] = merged;
       merged = []; 
    }
} 
```

console.log(object3) 和小提琴

[http://jsfiddle.net/H4UGb/1/](http://jsfiddle.net/H4UGb/1/)

您可以通过将 if 语句中的通用代码放入函数中来稍微清理一下...

# php - 替换确切的内容或标签

> ID：15438707
> 
> 赞同：0
> 
> 时间：2013-03-15T17:34:33.753
> 
> 标签：php, preg-replace, str-replace

我认为要替换一个标签，最好是使用`preg_replace`. 我尝试`str_replace`并替换了所有字符。例如，如果我想`<?php print "Hello parents"; ?>`通过使用替换两个 PHP 标记，`str_replace`我这样做：

```
$char1=array("<?php","?>");
$char_2=array("","");

str_replace($char1,$char2,$content); 
```

结果将是这样的：

```
Hello parents 
```

**`str_replace`“替换所有字符”**

我怎样才能做同样的事情`preg_replace`？因为我不明白如何放置字符或分隔符

这是我尝试过的：

```
$content="<?php Hello parents?>"
$chars='/(\<?php),(?>)/i';
$sus="";
echo preg_replace($chars, $sus, $content); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:44:37.037

```
$content="<?php Hello parents?>"
$chars = "/(<\?php|\?>)/i";
$sus="";
echo preg_replace($chars, $sus, $content); 
```

您可以使用`|`分隔符来表示替换`<?php`或`?>` 并且该`?`字符需要转义，因为在正则表达式中它意味着 0 或 1 次出现

# scala - 在scala中使用变量值设置对象的属性

> ID：15438714
> 
> 赞同：1
> 
> 时间：2013-03-15T17:34:54.810
> 
> 标签：scala, playframework-2.0

我正在尝试创建一个宁静的方法来更新数据库中的数据，我在 Play 上使用 Scala！框架。我有一个名为 Application 的模型，我希望能够更新数据库中的应用程序。所以 put 请求只需要你要更新的应用程序的 id，然后是你要更新的可选属性。

所以在我的路线中，我有这个：

```
PUT     /v1/auth/application        controllers.Auth.update_application(id: Long) 
```

我目前的方法是这样的：

```
def update_application(id: Long) = Action { implicit request =>
        var app = Application.find(id)
        for((key, value) <- request.queryString) {
             app."$key" = value(0)
             //app.name = value(0)
        }
        val update = Application.update(id, app)
        Ok(generate(
            Map(
                "status" -> "success",
                "data"   -> update
            )
        )).as("application/json")
   } 
```

在上面的方法中，我将请求和应用对象作为地图实例进行循环，然后使用模型更新要更新的应用模型。我知道有一种更简单的方法是将请求字符串创建为映射并仅遍历对象，但我这样做是为了学习目的。我是 and 的新手`Play!`，`Scala`刚接触一周。

有没有办法以这种方式动态地使用变量设置属性？在循环结束的上述方法中，我将如何在`Groovy`. 所以我正在寻找 Scala 中的等价物。如果 Scala 不能做到这一点，那么完成这项任务的最佳方法是什么？`Reflection`? 我不想让事情过于复杂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:45:58.767

玩！提供了`play.api.data.Forms`它允许创建一个使用案例类的`apply()`和方法的表单。`unapply()`然后您可以调用`form.fill(app)`以创建具有初始状态`bindFromRequest(request)`的表单，使用请求参数更新表单，并`get()`获取具有更新字段的新实例。

只定义一次表单：

```
val appForm = Form(
  mapping(
    "field1" -> text,
    "field2" -> number
  )(Application.apply)(Application.unapply)
) 
```

然后在你的控制器中：

```
val app = appForm.fill(Application.find(id)).bindFromRequest(request).get
val update = Application.update(id, app) 
```

查看文档中的[Constructing complex objects](http://www.playframework.com/documentation/2.0/ScalaForms)。

# java - 从 jdo 数据存储中获取数据

> ID：15438720
> 
> 赞同：0
> 
> 时间：2013-03-15T17:35:09.703
> 
> 标签：java, gwt, serialization, jdo

我在客户端创建了两个类，它们使用 GWT JDO 存储。
父类如下所示：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION)  
public class Park implements Serializable{

    @PrimaryKey
    @Persistent
    private String parkId;  

    //...
    @Persistent(mappedBy = "park", defaultFetchGroup = "true")
    private List<Facility> facilityList;

    // other stuff 
```

孩子看起来像：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION)
public class Facility implements Serializable{

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    private String encodedKey;

    @Persistent
    private Park park;

    // other stuff 
```

在服务器端，我有一个获取所有内容的方法：

```
public Park[] getParks(){
    PersistentManager pm = getPersistentManager();
    ArrayList<Park> parkList = new ArrayList<Park>();
    try {
        Query q = pm.newQuery(Park.class);
        List<Park> parks = (List<Park>) q.execute();
        for(Park p:parks)
            parkList.add(p);
    } finally {
        pm.close();
    }
    return parkList.toArray(new Park[parkList.size()]);
} 
```

当我调用此方法时，它会引发异常：
com.google.gwt.user.client.rpc.SerializationException: Type 'org.datanucleus.store.types.sco.backed.ArrayList' is not included in the set of types which可以通过此 SerializationPolicy 进行序列化，否则无法加载其 Class 对象。出于安全目的，此类型不会被序列化。

我不知道出了什么问题。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T14:33:42.917

不久前我遇到了这个问题，这非常令人沮丧。而且我也很确定您的问题不是因为您导入了错误的包。您可能已经解决了这个问题，但是如果其他人需要解决这个问题。

试试下面的示例代码：

```
public Park[] getParks(){
    PersistentManager pm = getPersistentManager();
    List<Park> parkList = null;
    try {
        Query q = pm.newQuery(Park.class);
        parkList = (List<Park>) q.execute();
        parkList = pm.detachCopyAll(parkList);
    } finally {
        pm.close();
    }
    return parkList.toArray(new Park[parkList.size()]);
} 
```

在上面的示例中，我将 ArrayList 更改为仅 List（不确定是否有必要）并使用 detachCopyAll 复制列表，因此它不再连接到数据存储区，这是为我消除错误的魔力。

有一个可以使用的注释，我从[文档](https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata)中引用：

> 您可以在 PersistenceManager 关闭后通过将类声明为“可拆卸”来修改对象。为此，请将可拆卸属性添加到 @PersistenceCapable 注释：

```
@PersistenceCapable(detachable="true") 
```

不确定这是否意味着你可以做你最初做的事情，但值得一试，因为我认为我的解决方案并不“漂亮”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:44:01.483

更改`ArrayList`声明以使用 Java 的`ArrayList`：

```
 java.util.ArrayList<Park> parkList = new java.util.ArrayList<Park>(); 
```

`GWT`无法序列化没有默认构造函数的对象，并且`ArrayList`您导入的 (org.datanucleus.store.types.sco.backed.ArrayList) 不提供默认构造函数，导致序列化失败。

您可能错误地导入了此类，在这种情况下，您只需更改导入声明即可。但是，如果您在其他地方使用它，那么您将不得不使用完整的限定符，如图所示。

# android - Google Maps v2 - 如何在 infowindowadapter 中填充两个以上的 TextView？

> ID：15438724
> 
> 赞同：1
> 
> 时间：2013-03-15T17:35:26.807
> 
> 标签：android, google-maps-android-api-2

很惊讶我已经找不到答案了，但是我在使用谷歌地图的信息窗口做一些非常简单的事情时遇到了问题。我想创建一个自定义信息窗口，其中包含三段文本，其中一段具有可自定义的颜色（取决于文本，但最好在放置标记时通过传入参数来设置此颜色）。这在 v1 中非常容易，但在 v2 中似乎完全搞砸了。

在我的主要活动中，我有这一部分将我的自定义布局添加到 InfoWindowAdapter：

```
class MyInfoWindowAdapter implements InfoWindowAdapter{
    private final View myContentsView;

    MyInfoWindowAdapter(){
        myContentsView = getLayoutInflater().inflate(R.layout.popup, null);
    }

    @Override
    public View getInfoContents(Marker marker) {

        TextView textStationName = (TextView) myContentsView.findViewById(R.id.textStationName);
        textStationName.setText(marker.getTitle());

        TextView textAPI = ((TextView)myContentsView.findViewById(R.id.textAPI));
        textAPI.setText(marker.getSnippet());

        return myContentsView;
    }   

    @Override
    public View getInfoWindow(Marker marker) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

创建标记时，我可以获得两条文本，“标题”和“片段”。但是我想在那里显示三段文本。到目前为止，我看到的所有示例都仅限于两段文本 - 无法获得第三个（或第四个，......）元素。

我正在使用 v4-support 库（使用 API 版本 8） ，不幸的是，[这里给出](http://bon-app-etit.blogspot.hk/2012/12/using-infowindowadapter-part-1.html)的操作方法对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:55:08.167

我可以建议将您的地图标记的内容存储`Map<Marker, InfoWindowContent`在您的活动中，其中`InfoWindowContent`一些类具有用于填充标记的信息窗口的字段。

将标记添加到地图后，`put`带有信息窗口内容的标记将添加到`Map`. 然后，在您的信息窗口内容适配器中，从`Map`.

这是一个例子：

```
public class MyActivity extends Activity {

    private static class InfoWindowContent {
        public String text1;
        public String text2;
        public String text3;
        // ... add other fields if you need them
    }

    private Map<Marker, InfoWindowContent> markersContent = new HashMap<Marker, InfoWindowContent>();

    private void addMarker() {
        Marker marker = map.addMarker(...);
        InfoWindowContent markerContent = new InfoWindowContent();
        // ... populate content for the marker

        markersContent.put(marker, markerContent);
    }

    class MyInfoWindowAdapter implements InfoWindowAdapter {

        @Override
        public View getInfoContents(Marker marker) {
            InfoWindowContent markerContent = markersContent.get(marker);

            // ... populate info window with your content
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:08:26.480

或者，您可以将附加信息作为 an`JSONObject`放在 中，并以如下方法`Marker`访问它`getInfoContents`

```
 JSONObject content = new JSONObject(marker.getSnippet());
    textView1.setText(content.getString("myFirstInfo"));
    textView2.setText(content.getString("mySecondInfo")); 
```

# java - 如果我在同一个类上同步了两个方法，它们可以同时运行吗？

> ID：15438727
> 
> 赞同：189
> 
> 时间：2013-03-15T17:35:33.760
> 
> 标签：java, multithreading, synchronized, java-threads

如果我在同一个类上同步两个方法，它们可以**在同一个对象上**同时运行吗？例如：

```
class A {
    public synchronized void methodA() {
        //method A
    }

    public synchronized void methodB() {
        // method B
    }
} 
```

我知道我不能`methodA()`在两个不同的线程中对同一个对象运行两次。同样的事情`methodB()`。

但是我可以在仍在运行的`methodB()`同时在不同的线程上运行吗？`methodA()`（同一个对象）

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-03-15T17:36:33.783

两种方法都锁定同一个监视器。因此，您不能同时在不同线程的同一个对象上执行它们（两种方法之一将阻塞，直到另一个完成）。

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2013-03-15T17:39:23.983

在示例中 methodA 和 methodB 是实例方法（与静态方法相反）。使用`synchronized`实例方法意味着线程必须在调用该方法的对象实例上获取锁（“内在锁”），然后线程才能开始执行该方法中的任何代码。

如果您有两个不同的实例方法标记为同步，并且不同的线程在同一个对象上同时调用这些方法，那么这些线程将竞争同一个锁。一旦一个线程获得锁，所有其他线程都将被该对象上的所有同步实例方法关闭。

为了使这两种方法同时运行，它们必须使用不同的锁，如下所示：

```
class A {
    private final Object lockA = new Object();
    private final Object lockB = new Object();

    public void methodA() {
        synchronized(lockA) {
            //method A
        }
    }

    public void methodB() {
        synchronized(lockB) {
            //method B
        }
    }
} 
```

其中同步块语法允许指定执行线程需要获取内部锁定才能进入块的特定对象。

需要理解的重要一点是，即使我们在各个方法上加上了“同步”关键字，核心概念是幕后的内在锁。

以下是[Java 教程](https://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)描述这种关系的方式：

> 同步是围绕称为内在锁或监视器锁的内部实体构建的。（API 规范通常将此实体简称为“监视器”。）内在锁在同步的两个方面都发挥作用：强制对对象状态的独占访问和建立对可见性至关重要的先发生关系。
> 
> 每个对象都有一个与之关联的内在锁。按照惯例，需要对对象字段进行排他和一致访问的线程必须在访问对象之前获取对象的内在锁，然后在完成访问时释放内在锁。在获得锁和释放锁之间，线程被称为拥有内在锁。只要一个线程拥有一个内在锁，其他线程就不能获得相同的锁。另一个线程在尝试获取锁时会阻塞。

锁定的目的是保护共享数据。仅当每个锁保护不同的数据成员时，您才可以使用上面示例代码中所示的单独锁。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-15T17:47:10.157

Java线程进入***实例***同步java方法时获取**对象级锁**，进入***静态*****同步java方法时获取类级锁**。

 ****在您的情况下，方法（实例）属于同一类。因此，当一个线程进入 java 同步方法或阻塞时，它会获取一个锁（调用该方法的对象）。因此，在第一个方法完成并释放 lock(on object) 之前，不能在同一对象上同时调用其他方法。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-03-15T17:49:10.227

在您的情况下，您在同一个类实例上同步了两个方法。所以，这两个方法不能同时在同一个A类实例的不同线程上运行。但是它们可以在不同的A类实例上运行。

```
class A {
    public synchronized void methodA() {
        //method A
    }
} 
```

是相同的：

```
class A {
    public void methodA() {
        synchronized(this){
            // code of method A
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-01-05T02:18:16.803

将您的代码视为以下代码：

```
class A {

public void methodA() {
    synchronized(this){        
      //method A body
    }
}

public void methodB() {
    synchronized(this){
      // method B body
    }
} 
```

因此，方法级别的同步只是意味着同步（this）。如果任何线程运行这个类的方法，它会在开始执行之前获得锁，并持有它直到方法执行完成。

> 但是我可以在 methodA() 仍在运行时在不同的线程上运行 methodB() 吗？（同一个对象）

确实，这是不可能的！

因此，多个线程将无法同时在同一个对象上运行任意数量的同步方法。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-02-21T10:06:21.843

来自 oracle 文档[链接](https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

使方法同步有两个效果：

> 首先，同一对象上的同步方法的两次调用不可能交错。当一个线程正在为一个对象执行同步方法时，所有其他为同一对象调用同步方法的线程都会阻塞（暂停执行），直到第一个线程处理完该对象。
> 
> 其次，当同步方法退出时，它会自动与任何后续对同一对象的同步方法调用建立起之前的关系。这保证了对对象状态的更改对所有线程都是可见的

这将回答您的问题：在同一个对象上，当第一个同步方法执行正在进行时，您不能调用第二个同步方法。

查看此文档[页面](https://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)以了解内在锁和锁定行为。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-07-13T13:55:07.593

只是为了清楚起见，静态同步和非静态同步方法都可能同时或并发运行，因为一个具有对象级锁和其他类级锁。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-04-08T18:51:56.227

同步的**关键思想不容易陷入困境，它只有在****同一个对象**实例上调用方法时才会生效- 它已经在答案和评论中突出显示 -

下面的示例程序是为了清楚地指出相同的 -

```
public class Test {

public synchronized void methodA(String currentObjectName) throws InterruptedException {
    System.out.println(Thread.currentThread().getName() + "->" +currentObjectName + "->methodA in");
    Thread.sleep(1000);
    System.out.println(Thread.currentThread().getName() + "->" +currentObjectName + "->methodA out");
}

public synchronized void methodB(String currentObjectName)  throws InterruptedException {
    System.out.println(Thread.currentThread().getName() + "->" +currentObjectName + "->methodB in");
    Thread.sleep(1000);
    System.out.println(Thread.currentThread().getName() + "->" +currentObjectName + "->methodB out");
}

public static void main(String[] args){
    Test object1 = new Test();
    Test object2 = new Test();
    //passing object instances to the runnable to make calls later
    TestRunner runner = new TestRunner(object1,object2);
    // you need to start atleast two threads to properly see the behaviour
    Thread thread1 = new Thread(runner);
    thread1.start();
    Thread thread2 = new Thread(runner);
    thread2.start();
}
}

class TestRunner implements Runnable {
Test object1;
Test object2;

public TestRunner(Test h1,Test h2) {
    this.object1 = h1;
    this.object2 = h2;
}

@Override
public void run() {
    synchronizedEffectiveAsMethodsCalledOnSameObject(object1);
    //noEffectOfSynchronizedAsMethodsCalledOnDifferentObjects(object1,object2);
}

// this method calls the method A and B with same object instance object1 hence simultaneous NOT possible
private void synchronizedEffectiveAsMethodsCalledOnSameObject(Test object1) {
    try {
        object1.methodA("object1");
        object1.methodB("object1");
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}

// this method calls the method A and B with different object instances object1 and object2 hence simultaneous IS possible
private void noEffectOfSynchronizedAsMethodsCalledOnDifferentObjects(Test object1,Test object2) {
    try {
        object1.methodA("object1");
        object2.methodB("object2");
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}
} 
```

请注意，如果在不同的对象实例上调用方法，则如何*按预期*允许同时访问的输出差异。

带有*noEffectOfSynchronizedAsMethodsCalledOnDifferentObjects()* **注释**的输出 - 输出顺序为 methodA in > methodA Out .. methodB in > methodB Out [![输出带有 *noEffectOfSynchronizedAsMethodsCalledOnDifferentObjects()* 的评论](../Images/d06bc498ac063b680b0eb33655b91d6e.png)](https://i.stack.imgur.com/2FOTF.png)

和带有*synchronizedEffectiveAsMethodsCalledOnSameObject()的输出* **注释**- 输出显示 Thread1 和 Thread0 在突出显示的部分同时访问 methodA -

[![输出带有 *synchronizedEffectiveAsMethodsCalledOnSameObject()* 的评论](../Images/afac4b5699233727a22298fd5fe4bc04.png)](https://i.stack.imgur.com/pCcUJ.png)

增加线程数将使其更加明显。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-14T22:44:22.710

不，这是不可能的，如果可能的话，那么两种方法都可以同时更新同一个变量，这很容易破坏数据。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-15T17:37:33.860

您正在将它同步到对象而不是类上。所以他们不能同时在同一个对象上运行

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-07T19:51:46.753

两个不同的线程在同一个对象上执行一个共同的同步方法，由于对象是相同的，当一个线程使用同步方法时，它必须验证锁，如果锁被启用，这个线程将进入等待状态，如果锁被禁用，那么它可以访问对象，而它将访问它将启用锁，并且只有在它执行完成时才会释放锁。当另一个线程到达时，它将验证锁，因为它已启用，它将等待第一个线程完成执行并释放对象上的锁，一旦锁被释放，第二个线程将获得对该对象的访问权并且它将启用锁，直到它被执行。所以执行不会不是并发的，两个线程都会一一执行，

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-05-23T10:42:02.570

是的，它们可以同时运行两个线程。如果您创建该类的 2 个对象，因为每个对象仅包含一个锁，并且每个同步方法都需要锁。因此，如果您想同时运行，请创建两个对象，然后尝试使用这些对象引用运行。****

# php - -> 在 PDO PHP 中是什么意思？

> ID：15438728
> 
> 赞同：3
> 
> 时间：2013-03-15T17:35:41.490
> 
> 标签：php, mysql, pdo

我是学习 PHP 的 PDO 的完整初学者，实际上我还没有学习过 MySQL 或 MySQLi。

（请查看下面的代码）我试图理解这个“->”箭头的含义，但我在其他任何地方都找不到答案。箭头在语义上是否等同于日常英语中的动作词“perform”？

EG 下面的代码，$stmt (perform) -> closeCursor();

代码：

```
$stmt = $db->prepare($sql);
$stmt->execute(array($title,$entry));
$stmt->closeCursor(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T17:39:12.180

箭头是 PHP**对象语法**的一部分，它表示：

```
$object->method(); 
```

英文是：

> 在**对象**上运行**方法**

 **它也用于访问属性。

由于**PDO**是 PHP 中的一个类，而变量 like`$db`是该类的实例，因此您可以使用这些实例中的方法和属性。

查看[PHP 的对象文档](http://php.net/manual/en/language.types.object.php)以获取有关该主题的更多信息，如果您是**面向对象编程**的新手，那么您需要研究该主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:41:06.550

那是 php 的对象表示法，相当于`.`Java 和 Javascript。基本上它用于访问对象的方法或属性。

请参阅[对象和类文档](http://www.php.net/manual/en/language.oop5.basic.php)。**

# windows-8 - 安装 Windows 商店应用程序后运行脚本

> ID：15438729
> 
> 赞同：2
> 
> 时间：2013-03-15T17:35:42.807
> 
> 标签：windows-8, microsoft-metro, windows-runtime, windows-store-apps, winjs

安装 Windows Store 应用程序后，有什么方法可以运行某些活动？

我想从 web 服务中获取一些数据（数据很少更改），但我不想在第一次启动时进行查询，因为这可能需要一些时间，而且我不想破坏用户体验.

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:44:04.067

您可以让它在单独的后台线程上运行，同时同时运行主线程。您可以将有限的资源分配给这个单独的后台线程，然后让它自行消退。

您也可以从您的应用程序执行异步操作，请参阅 MSDN 中的链接：http: [//msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx#AsyncOps](http://msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx#AsyncOps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:01:17.377

我的 codeSHOW 应用程序在首次启动时异步加载数据，并将异步承诺存储为应用程序级别变量，以便应用程序中的任何其他内容都可以等待它。这不是您正在寻找的内容，但如果有帮助，请访问[http://codeshow.codeplex.com](http://codeshow.codeplex.com)。

# excel - 如何突出显示 Excel 2010 中给定范围或选择的同一单元格中的每个单词实例？

> ID：15438731
> 
> 赞同：3
> 
> 时间：2013-03-15T17:35:45.653
> 
> 标签：excel, vba, format

我想以红色和粗体突出显示我的 Excel 工作表的选定列中的每个单词/短语实例（使用 Excel 2010）。例如，如果列 A1:A10 包含句子“棕狐喜欢另一只棕狐”，我想突出显示此范围内的每个“棕狐”实例。

[我在这里](http://www.mrexcel.com/forum/excel-questions/26200-cells-there-code-bold-color-word-s-cell-2.html)找到了一个宏，它仅突出显示每个单元格中的“棕狐”的第一个实例：

```
Sub colorText()

Dim cl As Range
Dim startPos As Integer
Dim totalLen As Integer
Dim searchText As String

' specify text to searh.
searchText = "brown fox"

' loop trough all cells in selection/range
For Each cl In Selection

  totalLen = Len(searchText)
  startPos = InStr(cl, searchText)

  If startPos > 0 Then
    With cl.Characters(startPos, totalLen).Font
      .FontStyle = "Bold"
      .ColorIndex = 3
    End With
  End If
Next cl

End Sub 
```

我想编辑这个宏，使它突出显示“棕狐”的每个实例，而不仅仅是第一个。作为尝试，我尝试了以下方法：

```
Sub colorText()

Dim cl As Range
Dim startPos As Integer
Dim totalLen As Integer
Dim searchText As String
Dim endPos As Integer
Dim testPos As Integer

' specify text to search.
searchText = "brown fox"

' loop trough all cells in selection/range
For Each cl In Selection

  totalLen = Len(searchText)
  startPos = InStr(cl, searchText)
  testPos = 0

  Do While startPos > testPos
    With cl.Characters(startPos, totalLen).Font
      .FontStyle = "Bold"
      .ColorIndex = 3
    End With

    endPos = startPos + totalLen
    testPos = testPos + endPos
    startPos = InStr(testPos, searchText)
  Loop

Next cl

End Sub 
```

但是，这仍然只格式化“brown fox”的第一个实例。

任何想法/编辑将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:19:17.473

你的错误在你的逻辑上。您应该更正以下代码：

```
 startPos = InStr(testPos, cl, searchText, vbTextCompare) 
```

而不是这样做：

```
 startPos = InStr(testPos, searchText) 
```

在第二个子。你现在看到了吗？:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T17:13:53.647

当我想在一系列单元格中格式化特定单词时，我遇到了同样的问题。经过多次尝试和大量互联网搜索，这是效果最好的一个......

```
Sub FormatWords()
Dim Rng As Range, cl As Range, Red As Integer
Dim oStrg As String
Set Rng = Range(Range("D1"), Range("D" & Rows.Count).End(xlUp))
On Error Resume Next
oStrg = "Apple"
If oStrg = "" Then Exit Sub

For Each cl In Rng
    Red = InStr(1, cl, oStrg, vbTextCompare)

    Do Until Red = 0
        With cl.Characters(Red, Len(oStrg))
        .Font.Color = RGB(230, 25, 55)
        .Font.Bold = True
         End With
         Red = InStr(Red + 1, cl, oStrg, vbTextCompare)
    Loop
Next cl

oStrg = "Mango"
If oStrg = "" Then Exit Sub

For Each cl In Rng
    Orange = InStr(1, cl, oStrg, vbTextCompare)
    Do Until Orange = 0
        With cl.Characters(Orange, Len(oStrg))
        .Font.Color = RGB(250, 200, 0)
        .Font.Bold = True
        End With

        Orange = InStr(Orange + 1, cl, oStrg, vbTextCompare)
    Loop
Next cl

End Sub 
```

# mips - 将 mips 转换为 c

> ID：15438732
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:35:56.127
> 
> 标签：mips

所以在这里我在mips中有这个功能。我正在尝试将其转换为 c。

```
1 mystery:  bne $0, $a0, recur  # 
2           li $v0, 0       #
3           jr $ra          #
4 recur:        sub $sp, $sp, 8     #
5           sw $ra, 4($sp)  #
6           sub $a0, $a0, 1     #
7           jal mystery         #
8           sw $v0, 0($sp)  #
9           jal mystery         #
10          lw $t0, 0($sp)  #
11          addu $v0, $v0, $t0  #
12          addu $v0, $v0, 1    #
13          add $a0, $a0, 1     #
14          lw $ra, 4($sp)  #
15          add $sp, $sp, 8     #
16          jr $ra          # 
```

我的意思是只看这个，它看起来是递归的

诠释神秘（诠释n）{

}

看起来事情从 8 点开始，但我很快就迷失了，因为我很快就迷失了。似乎最终情况是它等于 0

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:19:39.193

这似乎是一种复杂的计算方式，函数的输入在`2^n-1`哪里。`n`

AC 翻译可能看起来像这样：

```
int mystery(int n)
{
  if (n != 0) {
    return mystery(n - 1) + mystery(n - 1) + 1;
  } else {
    return 0;
  }
} 
```

# c - 递归下降解析器C程序

> ID：15438733
> 
> 赞同：0
> 
> 时间：2013-03-15T17:35:57.543
> 
> 标签：c, parsing, recursive-descent

我有以下语法，需要用 C 编写递归下降解析器

```
E->E+E|E*E|(E)|i 
```

我使用左分解得到以下语法

```
E->EX|Y
X->+E|*E
Y->(E)|i 
```

现在，我消除了左递归以获得以下语法

```
E->YE`
X->+E|*E
Y->(E)|i
E`->XE`|e 
```

e 表示ε

现在我已经为这个语法编写了 C 程序，但是我遇到了分段错误

```
#include<stdio.h>
static char c[10];
int j=0;
int main()
{
    printf("Enter a string\n");
    scanf("%s",c);
    E();
    if(c[j]=='$')
        printf("Valid string\n");
    else
        printf("Invalid string\n");
    return 0;
}
E()
{
    Y();
    Eprime();
    return;
}
X()
{
    if(c[j]=='+')
    {
        j++;
        E();
    }
    else if(c[j]=='*')
    {
        j++;
        E();
    }
    return;
}
Y()
{
    if(c[j]=='(')
    {
        j++;
        E();
        if(c[j]==')')
            j++;
    }
    else if(c[j]=='i')
        j++;
    return;
}

Eprime()
{
    X();
    Eprime();
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:43:12.423

在您的实现中，您将 ε 处理从`Eprime()`移至`X()`：

*   `Eprime()`不允许 ε 直接
*   `X()`确实允许匹配 ε

当尝试将 ε 与 匹配时，这会导致以下序列的堆栈溢出`Eprime`：

*   `Eprime`调用`X`，匹配 ε
*   `Eprime`总是调用`Eprime`（保证堆栈溢出，如果`Eprime`曾经被调用）

# javascript - 提交操作期间功能未成功执行

> ID：15438735
> 
> 赞同：0
> 
> 时间：2013-03-15T17:36:14.620
> 
> 标签：javascript

我在 Javascript 文件中有以下代码。当单击此表单时，我希望`postAction`执行该功能。现在虽然我看到里面的代码行`postAction`得到处理（通过网络开发人员），但由于某种原因，该`postAction`函数似乎确实被成功执行了。我怀疑它必须与`preventDefault`or做某事`return false`。看到下面的代码有任何问题吗？

```
ssoWelcome: (function () {
    var $p = $('<form class="full controls"><p>Welcome <span class="username"></span>!</p><input type="submit" value="Continue" name="welcome" class="welcomeBtn"></form>');
    $p.submit(function (e) {
        C.options.postAction('redirect');
        preventDefault(e);
        return false;
    });
    return $p;
}()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:06:26.773

这可以简单地在文档中获取附加表单并执行如下实时功能：

```
var $p = $('<form class="full controls"><p>Welcome <span class="username"></span>!</p><input type="submit" value="Continue" name="welcome" class="welcomeBtn"></form>');
$(document).append($p);

$('.welcomeBtn').live('click', (function (e) {
    //do your function here
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:46:27.643

我认为你是对的，因为它与`preventDefault`. 线

```
preventDefault(e); 
```

应该

```
e.preventDefault(); 
```

但是，假设这是 jQuery，则`return false`它的作用与此相同，`e.preventDefault()`因此您无需自己调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:47:44.933

首先，您不应该这样做：

```
e.preventDefault(); 
```

也许这会有所帮助。

# xml - 使用 adobe air 保存 XML 文件会在开始时创建虚假符号

> ID：15438736
> 
> 赞同：3
> 
> 时间：2013-03-15T17:36:15.637
> 
> 标签：xml, actionscript-3, flash, air

我正在制作一个在 XML 文件中保存和加载属性的应用程序。一切都在正常工作，除了一件事。

```
function save(){
    var item:XML = new XML(<node></node>);

    var file = new File();
    file = File.applicationStorageDirectory.resolvePath("generated.xml");

    //children of the main node and attributes and stuff are managed here but
    //they're working fine so i've removed them from this example.

    var fileStream = new FileStream();
    fileStream.open(file, FileMode.WRITE);
    fileStream.writeObject(item);
    fileStream.close();
} 
```

当上面的代码被执行时，它应该保存一个如下所示的 xml：

```
<node/> 
```

或者如果它里面有一个孩子：

```
<node>
    <child> whatever </child>
</node> 
```

但是，当我在 sublime text 2 中打开 XML 文件时，它看起来像这样

![http://i46.tinypic.com/15h1k5h.png](../Images/b4206ccc54618a1bf4e39de6ac3be830.png)

并且 CS6 调试器会抛出错误 #1088：文档中根元素之后的标记必须格式正确。

如果我手动进入并删除虚假字符，air 能够很好地读取它，但是当我保存对 XML 的任何更改时，我将不得不手动进入并再次删除虚假字符。

您对我如何解决此问题有任何想法吗？谢谢你。

PS：假人物好像变了。[VT] 每次都一样，但 [SI] 不一样。我不知道这意味着什么或者它是否相关，但它可能是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:44:23.480

你不想在`writeObject`这里使用。除了字符串，也许还有数字，writeObject 实际上写入与实际对象相关的数据（公共属性、内存标识符等）。您想要保存 XML 的字符串版本（`XML.toString()`应该可以）或使用 writeUTFBytes()。我个人从来没有使用过writeUTFBytes()，但是如果我的理解是正确的，它只会写入对象的文本而不是对象数据本身。我也会尝试一下。

# c# - 事后有任何免费软件工具来设置 LAA 吗？

> ID：15438739
> 
> 赞同：-2
> 
> 时间：2013-03-15T17:36:25.310
> 
> 标签：c#, visual-studio-2010, memory

我已经进行了一些挖掘和戳戳，但结果不足。我正在寻找一个免费软件工具，我可以在我给我的应用程序之后给我的用户设置大地址感知。

背景：我正在开发一款拥有约 500 个用户的软件。这些用户中有一小部分（可能是 25 个？）在进行多次大型搜索时遇到了内存问题。该应用程序是 32 位的，可以在任何设备上运行，从具有 2 个 ram（如果幸运的话）的 Win XP 机器到运行 64 位 Windows 7 和 4 个以上 ram 的用户。

我的团队考虑在编译后使用构建后事件设置 LAA，但我遇到的一些网站表示旧系统可能存在问题。如果这个信息是错误的，并且它可以与旧的（少量内存）机器一起工作，我就不需要这个工具了。

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:45:16.400

我个人喜欢 CFF Explorer。它可以标记程序 LAA 以及大量其他功能。

[http://www.ntcore.com/exsuite.php](http://www.ntcore.com/exsuite.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:43:53.337

一个快速的谷歌搜索出现了这个，[http://www.techpowerup.com/forums/showthread.php](http://www.techpowerup.com/forums/showthread.php?t=112556) ?t=112556 。![在此处输入图像描述](../Images/3038293001ea39946fa6897375f09dfc.png)

# mongoose-web-server - mongoose Web 服务器是否有关闭处理程序？

> ID：15438743
> 
> 赞同：0
> 
> 时间：2013-03-15T17:36:35.593
> 
> 标签：mongoose-web-server

我正在为我的项目使用[Mongoose](https://github.com/cesanta/mongoose) Web 服务器。

Mongoose 有关闭处理程序吗？

我想在猫鼬关闭时做一些操作。

是否可以查看该端口是否已被另一个进程使用或猫鼬服务器是否已在运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T19:39:08.887

问题 1：没有关闭处理程序。老实说，没有必要。客户端代码启动服务器，然后停止它，因此可以准确地知道服务器何时关闭。

问题 2：使用最新版本，您会收到每个选项集的错误消息，例如

```
 const char *err_msg = mg_set_option(server, "listening_port", "80"); 
```

这样您就可以知道绑定到端口是否失败。

# matlab - 如何让matlab在windows中屏蔽shell？

> ID：15438744
> 
> 赞同：0
> 
> 时间：2013-03-15T17:36:39.633
> 
> 标签：matlab, cygwin

我使用win7和matlab2012a。我想编写一个 shell 脚本来测试我的 matlab 脚本与不同的参数。我使用 cygwin 来完成这项任务。例如，alpha 是参数，matlab 脚本是 getall.m。matlab 脚本将从 txt 文件“param.txt”中读取参数。

```
#!/bin/sh
# List=`seq 0.1 0.01 1`
List=`seq 0.1 0.1 0.2`
for alpha in $List
do
    echo -ne "20\n61\n80\n1\n0.3\n${alpha}" > param.txt
    matlab -nodesktop -r "getall;quit;" #time consuming
done 
```

我的问题是脚本“getall.m”很耗时，所以我想一次执行一个。但我发现 matlab 命令立即返回。所以上层脚本会同时启动很多matlab实例。我还尝试了 cmd 中的 matlab 命令，但没有任何变化。在 ubuntu 中，matlab 默认阻止 shell。

我的问题是如何使 matlab 命令阻止 Windows 中的 shell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:49:06.443

There's a `matlab -wait` command line switch on Windows that will make it block.

[http://www.mathworks.com/help/matlab/ref/matlabwindows.html](http://www.mathworks.com/help/matlab/ref/matlabwindows.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:25:13.917

我不知道执行此操作的“正确”方法-但我确实为您准备了一些技巧：

使 matlab 脚本在退出前在 /tmp 目录中创建一个名为“matlabDone”的文件；您的 shell 脚本可以循环查找该文件。一旦它存在，你就知道 matlab 已经完成了。删除文件，然后再次循环。像这样的东西：

```
List=`seq 0.1 0.1 0.2`
for alpha in $List
do
    echo -ne "20\n61\n80\n1\n0.3\n${alpha}" > param.txt
    matlab -nodesktop -r "getall;quit;" #time consuming
    while [ ! -e /tmp/matlabDone ]
    do
      sleep 1
    done
    rm /tmp/matlabDone
done 
```

然后让你的matlab脚本的最后一行创建文件`/tmp/matlabDone`...

正如我所说 - 这是一个黑客......

PS 我不是 100% 确定 cygwin 中有哪些功能。如果您不能使用`sleep`，我看到了一篇有趣的帖子，建议`ping -n 2 127.0.0.1 > /dev/null`（或等效的……取决于 ping 的版本，您可能需要`-c 2 -i 1`获得“每次 ping 一秒钟，计数两个”）可以替代`sleep()`.

# jquery - 如何为动态生成的文本框分配名称并检索它们的值？

> ID：15438746
> 
> 赞同：0
> 
> 时间：2013-03-15T17:36:48.583
> 
> 标签：jquery, dynamic, textbox

我有动态生成的文本框。我想为文本框分配名称和 ID，并检索动态生成的文本框的值以插入数据库。怎么做到呢？

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>

<select id="sel2" multiple>
<option value="first">first option</option>
<option value="second">sec option</option>
<option value="third">third option</option>
<option value="fourth">fourth option</option>
<option value="fifth">fifth option</option>
<option value="sixth">six option</option>
</select>

<table id="tab2">
<tbody>

</tbody>
</table>

<button id="add" value="Add">Add</button>

<script>
$(document).ready(function()
{

$("#add").click(function()
{
    var selectval = $('#sel2').val();

    var len = selectval.length;

    for(var i=0; i < len; i++){
        $("#tab2 tbody").append("<tr><td>"+selectval[i]+"</td><td><input type='text'</td></tr>");
    }

});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:42:38.427

试试下面的方法，它会帮助你...

```
$("#tab2 tbody").append("<tr><td>"+selectval[i]+"</td><td><input type='text' id='text" + i + "' /></td></tr>"); 
```

它将生成像 text0、text1、text2 一样的 Id ...

要从文本框中**获取值**，请添加以下代码并尝试...

小提琴示例：http: [//jsfiddle.net/RDz5M/4/](http://jsfiddle.net/RDz5M/4/)

**HTML：**

```
<button id="Get" value="Get">Get</button> 
```

**查询：**

```
$("#Get").click(function(){
$('#tab2 tr').each(function(){
    $("#divResult").html($("#divResult").html() + ($(this).find("input[id^='text']").val()) + "<br>")
});
}); 
```

# pdf - 如何使用 php 创建高级 PDF 文件加密和保护？

> ID：15438751
> 
> 赞同：0
> 
> 时间：2013-03-15T17:36:53.250
> 
> 标签：pdf, encryption, protection

我有一个关于使用 php 加密 PDF 文件的问题。

案例：假设我有一个本地系统（基于 Web）来上传和下载文件，例如 4sh*red (dot) com，但它只允许 PDF 文件。用户注册并登录以使用他或她自己的个人计算机下载 PDF 文件。***用户从我的系统下载 PDF 文件后，只能在他们下载文件的计算机上查看该文件。但是，如果另一个用户将它（我的意思是：下载的 PDF 文件）复制到另一台计算机上，则无法在该计算机上查看该文件***。

注意：我在这里并不是说要使用密码保护 PDF 文件，因为现在有很多软件用来删除 PDF 的密码保护。但是，如果将文件复制到另一台计算机，则根本无法查看该文件。

我们可以在 php 中做到这一点吗？如果是，您知道解决此案的任何算法吗？我非常感谢您的回复或回答。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:13:56.653

PDF 格式是 Adob​​e 的开放格式。这意味着有很多程序可以读取它并且可以修改它。

如果您编写自己的程序并向 PDF 添加一些内容，那么也许您可以这样做。

另一个问题是 - 为什么不让用户在 Web 浏览器中看到该文档？当然，对于精明的用户来说，仍然有办法获得它，但大多数菜鸟不知道如何并且您可以轻松关闭最简单的块（如右键单击/保存）。

可能有趣的是现在很多公司都在处理视频：您可以动态地将一些隐藏或可见的“信息”添加到 PDF 中，以识别您将其发送给谁。这样，如果 PDF 出现在其他地方 - 你知道是谁传播了它......再次 - PDF 是一种开放格式，所以任何人都可以随时删除你在主要内容中写的任何内容，所以你必须添加一个隐藏图像到内容或其他东西。

# iphone - 核心数据和 iCloud (iOS5)

> ID：15438758
> 
> 赞同：0
> 
> 时间：2013-03-15T17:37:23.173
> 
> 标签：iphone, objective-c, core-data, icloud

将新的 NSManagedObject 添加到我的核心数据存储后，我尝试调用：

> ```
>  if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) { 
> ```

并得到以下异常（奇怪的是我没有错误，结果也是积极的！）

> 2013-03-15 18:32:09.753 Nick copy[28782:3407] CoreData：Ubiquity：日志文件导出期间发生异常：NSInternalInconsistencyException 保存通知内容：NSConcreteNotification 0x3891b0 {name = _NSSQLCoreTransactionStateChangeNotification; object = (URL: file://localhost/var/mobile/Applications/FCAF7FC6-7DC8-4E0B-A114-38778255CA90/Documents/MyApp.sqlite); userInfo = { "_NSSQLCoreActiveSaveRequest" = ""; "_NSSQLCoreTransactionType" = 2; "_NSSQLCoreTransientSequenceNumber" = 1; }}

我可以从“保存”方法中捕获所有异常，并且应用程序运行良好。只是想知道这是否真的可以节省，因为感觉完全不安全。

编辑：尝试删除对象时的另一个异常：

```
Catched Exception: Failed to process pending changes before save.  The context is still dirty after 100 attempts.  Typically this recursive dirtying is caused by a bad validation method, -willSave, or notification handler. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:08:44.663

安全吗？可能不是。该错误表明底层泛在系统未能创建 SQL 日志文件。这可能意味着它未能创建 iCloud 用于同步更改的事务日志。抓住它并继续意味着您的数据*可能*保存在本地，具体取决于框架代码的详细信息。但这几乎可以肯定意味着 iCloud 不会同步这些更改。更糟糕的是，你很可能会因为同样的原因，未来的保存也会失败。

我不完全确定第二个例外，但它很可能是第一个例外的副作用。

如果您尝试在 iOS5 上使用 Core Data 的内置 iCloud 支持，这只是奇怪的、莫名其妙的错误的开始。我已经完成了大量的 iCloud/Core Data 工作，我真的不推荐在 iOS 5 上使用它。即使 iOS 6 充其量也是冒险的，但问题的可能性比 iOS 5 小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:51:31.170

不幸的是，我再也找不到线程了，但它告诉我必须确保始终只在**创建它们的线程/dispatch_queue 中使用****NSManagedObject**类。

 **问题是，如果您确实从不同的队列访问它，它可能会在随机间隔后工作或崩溃。

我确保我只从专用的 dispatch_queue 调用 NSManagedObject 并且从那时起没有记录任何奇怪的异常。**

# visual-studio - 如何刷新 Visual Studio 扩展中的属性窗口？

> ID：15438763
> 
> 赞同：2
> 
> 时间：2013-03-15T17:37:31.187
> 
> 标签：visual-studio, inotifypropertychanged, visual-studio-extensions, system.componentmodel

我正在编写一个 Visual Studio 扩展，它允许在属性窗口中编辑对象的属性。我使用 ITrackSelection 界面选择要编辑的对象，一切正常，属性显示在窗口中，我可以编辑它们。

但是，在外部更改属性时，我无法让 Visual Studio 刷新属性窗口。我尝试实现 INotifyPropertyChanged，但从未订阅 PropertyChanged 事件。我还尝试实现 ICustomTypeDescriptor 并返回自定义 PropertyDescriptor 对象，并覆盖 AddValueChanged 和 SupportsChangeEvents，但这些对象从未被调用。

我错过了什么？如何告诉 Visual Studio 我的对象的属性已更改并且必须更新属性窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-27T20:41:49.150

[IVsUIShell.RefreshPropertyBrowser](https://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivsuishell.refreshpropertybrowser(v=vs.120).aspx)应该可以解决问题并更新属性窗口。

# jquery - 通过表单与 jquery/ajax 发送 json

> ID：15438768
> 
> 赞同：1
> 
> 时间：2013-03-15T17:37:54.000
> 
> 标签：jquery, ajax, json, forms, post

我有一个简单的表格，我可以使用 Asana 的 API 成功创建一个新项目

```
<form action="https://app.asana.com/api/1.0/projects" id="newProject" method="post" name="myform">
    <input id="name" name="name" type="text" value="">
    <input id="workspace" name="workspace" type="text" value="498346170860">
    <input id="new" type="submit" value="Send">
  </form> 
```

这工作正常。创建了一个项目，并在浏览器窗口中返回了 json 输出。

但是当我尝试使用 .post .ajax 方法时，我得到“请求数据必须是 JSON 对象，而不是 null”。例如（coffeescript）：

```
$("form").submit ->
    $.post $(this).attr("action"), $(this).serialize(), ((jsonData) ->
        console.log jsonData
    ), "json" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:57:16.837

放在`jQuery.support.cors = true;`跨域 ajax 请求上方的某个位置。 [阅读更多关于此](https://stackoverflow.com/q/7852225/945875)的信息。

此外，您可能需要指定 contentType`"application/json"`

# excel - VBA Excel：粘贴到工作簿之间的匹配行

> ID：15438770
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:38:05.230
> 
> 标签：excel, vba

我正在尝试开发代码来执行以下操作：

```
1)Copy cells K4: M4 in Workbook 1, Sheet 1 <- I can do this step;

2)Find a cell in Workbook2, Sheet1, column C that matches cell B4 in
Workbook1, Sheet1;

3)Paste the copied values in columns P:R of the matching row in
Workbook 2, Sheet 1 as determined in Step 2. 
```

对于无法将我自己的工作推进到第 1 步之外，我提前道歉。正如我所说，我对此完全陌生，并且在此之前一直在网上搜索答案/学习，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:41:02.440

我对此进行了测试，并且有效。这有助于您入门吗？

```
Sub CopyToMatchedRow()
    Dim copyRng As Range, matchVal As Variant, matchRng As Range, matchRow As Integer

    Set copyRng = Worksheets("Sheet1").Range("K4:M4")
    Set matchRng = Worksheets("Sheet2").Range("C:C")
    matchVal = Worksheets("Sheet1").Range("B4")
    matchRow = matchRng.Find(What:=matchVal, After:=ActiveCell, LookIn:=xlFormulas, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

    copyRng.Copy Destination:=Worksheets("Sheet2").Range("P" & matchRow & ":R" & matchRow)
End Sub 
```

# c++ - 从 C++ 中的另一个构造函数调用构造函数时出错

> ID：15438771
> 
> 赞同：2
> 
> 时间：2013-03-15T17:38:05.637
> 
> 标签：c++, c++11, constructor, ctor-initializer

我有一个`struct A`具有多个初始化不同数据成员的构造函数。

```
template<typename T>
    struct A {

    typedef std::vector<T> type1
    type1 a;
    type1 b;
    type1 c;

    A(type1 i_a): a(i_a) {
    }

    A(type1 i_a, type1 i_b): A(i_a), b(i_b) {
    }

    A(type1 i_a, type1 i_b, type1 i_c): A(i_a, i_b), c(i_c) {
    }
}; 
```

我得到的错误是当我用 say 实例化它时`custom_type`，错误 `type A<custom_type> is not direct base of A<custom_type>`突出显示了我在另一个构造函数中调用的构造函数。我正在使用 C++11。有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:43:06.453

构造函数可以初始化它的基类和成员，或者委托给同一类的另一个构造函数，而不是两者。

`A(i_a)`构造一个完整的`A`对象，复制成员`a`和默认构造`b`and `c`。所以没有意义`A(type1 i_a, type1 i_b): A(i_a), b(i_b) {}`- 第一个初始化程序已经初始化`b`。你可以改为

```
A(type1 i_a, type1 i_b) : A(i_a) { b = std::move(i_b); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:38:05.967

aschepler 提供了答案，但我想解释导致问题的原因并展示委托构造函数以避免它的“最佳实践”。

在您的代码中，您有一系列构造函数，每个构造函数都比它们委托的构造函数更通用。那就是你试图让一个构造函数委托给一个更专业的构造函数，它不会做任何事情，然后你需要做一些工作来处理额外的通用性。这与支持它的早期语言中被证明是最实用的构造委托方式相反。

相反，您想要的是让最通用的构造函数成为委托的“根”（其他语言中的“指定初始化程序”或“指定构造函数”）。更专业的构造函数将使用更通用的构造函数来完成它们的工作，将数据传递给它们以供处理特殊情况。

在您的情况下，专门的行为是对某些成员使用默认值，而不是从用户那里获取初始值。因此，您更专业的构造函数将通过传递它们给出的参数以及其他成员的默认值来完成他们的工作。

```
template<typename T>
struct A
{
    typedef std::vector<T> type1;
    type1 a;
    type1 b;
    type1 c;

    A(type1 i_a, type1 i_b, type1 i_c): a(i_a), b(i_b), c(i_c) {}

    A(type1 i_a, type1 i_b): A(i_a, i_b, {}) {}

    A(type1 i_a): A(i_a, {}) {}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:12:04.087

但是您仍然可以从构造函数的主体中调用同一类的不同构造函数（如果出于某种原因您想要）

```
class CComplex{
public:
    CComplex(int real1,int image1,char c)
    {
        cout<<"RealImg";
        real=real1;
        image=image1;
        char* x; char xc=c;x=&xc;
        void* v;
        f(x);
        CComplex ccc(x,v); //this is OK
        CComplex cccc(1,2,3); //as this too
    }
    CComplex():real(0),image(0){cout<<"DEFAULT";}
    CComplex(const CComplex &c)
    {
        real=c.real;
        image=c.image;
        cout<<"COPY";
    }
    CComplex& operator=(CComplex const& ref){ 
        cout<<"ASSIGN";
        //CComplex* c;
        CComplex cobj(43,45,'x');
        //c=&cobj;
        //CComplex* c=new CComplex(44,45); 
        return cobj;
    }

    CComplex(int i1, int i2, int i3){cout<<"\n123!";}
    CComplex(const char* y,void* v){cout<<"\nCrefvoid!";}
    ~CComplex(){cout<<"\n~CComplex(){}";}
public:
    void Display(void)
    {
        cout<<real<<"+"<<image<<"i"<<endl;
    }
    static bool CComplexComparator(CComplex c1, CComplex c2){return true;}
    static void CComplexInit(CComplex& c){
        c.real=100;
    }
    int real,image;
}; 
```

# css - 在 DIV 上方和下方留出空间

> ID：15438774
> 
> 赞同：14
> 
> 时间：2013-03-15T17:38:15.677
> 
> 标签：css

我想在其内容上方和下方提供一个 DIV 空间。

如何使用 CSS 做到这一点？

我的 DIV 代码是：

```
<div class="input">
    <label for="pseudo">choisir un pseudo*:</label>
    <br>
    <input type="text" name="pseudo">
</div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T17:39:57.090

您使用 CSS[**`padding`属性**](https://developer.mozilla.org/en-US/docs/CSS/padding)。在您的情况下，您可能想单独使用`padding-top`和。`padding-bottom`

语法如下：

```
padding: top right bottom left; 
```

或者

```
padding: vertical horizontal; 
```

一些例子：

```
// This will set the top space to 1px, the right to 2px the bottom to 3px
// and the left to 4px
.input {
    padding: 1px 2px 3px 4px;
}

// This will set both the top and the bottom to 20px and the right and the
// left to 10px;
.input {
    padding: 20px 10px;
}

// This will set only the bottom space, leaving everything else
// to be automatically determined
.input {
    padding-bottom: 20px;
} 
```

**阅读有关[HTML 框模型的更多信息](http://www.w3.org/TR/CSS2/box.html)**

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-15T17:48:11.723

我不确定你是什么意思。内部空间还是外部空间？

假设你的意思是在外面：

```
.input {
   margin: 20px 0;
} 
```

如果您的意思是在 div 内，则可以使用填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:44:15.777

我猜你正在寻找填充物。

```
<div class="input" style="padding-top:10px;padding-bottom:10px">
  <label for="pseudo">choisir un pseudo*:</label>
  <br />
  <input type="text" name="pseudo">
</div> 
```

希望它有帮助，维戈

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-30T16:35:45.980

如果您想要 div 行之间的额外空间（超过默认空间），那么您可以在 div 行开始之前/之后添加以下代码，具体取决于您想要额外空间的位置。

```
<div class="row">
   </br>
 </div> 
```

这更容易，但会增加固定数量的差距。如果您希望间隙更具体，则可以使用上述填充选项。

# list - 删除列表项中的多余空格 - Sublime Text 2

> ID：15438778
> 
> 赞同：0
> 
> 时间：2013-03-15T17:38:30.380
> 
> 标签：list, keyboard-shortcuts, sublimetext2, spaces

![例子：](../Images/d71f6f218f634547dd5f8ba963b80167.png)

有时我需要使用快捷方式将标签放在列表项的末尾：[Ctr] + [Shift] + [L] + [End] 以使用多个光标编辑多个列表项。当列表项的末尾有额外的空格时，这并不总是那么好用，使项目的实际结尾比项目的文本长几个空格。

有没有我可以与 [Ctr] + [Shift] + [L] 一起使用的快捷方式来删除那些多余的空格并基本上使文本结束的“结束”？

如果您需要对我的问题进行澄清，请提出问题，我会尽力使其最清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:18:44.277

我还没有找到这方面的捷径。所以我写了一个。它将修剪当前行的尾随空格。比如你输入后`ctrl+shift+l`发现有多余的空格，输入`ctrl+f`然后`ctrl+t`删除。其他行中的空格不会受到影响。

键映射：

```
{ "keys": ["ctrl+f", "ctrl+t"], "command": "delete_trailing_white_space" } 
```

delete_trailing_white_space.py （把它`Sublime Text 2\Packages\User`）

```
import sublime
import sublime_plugin

class DeleteTrailingWhiteSpaceCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        for region in self.view.sel():
            line = self.view.line(region)
            line_content = self.view.substr(line)
            trimed_line = line_content.rstrip()
            self.view.replace(edit, line, trimed_line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:20:58.483

如果您不想删除空格，可以将结束键重新绑定到修改行为的插件。我在玩一些虚拟空白空间的东西时写了这个，所以它只是经过最低限度的测试（[链接](https://gist.github.com/skuroda/5177615)）。将其保存到`Packages/User`. 文件名无关紧要，只要确保它具有`.py`扩展名即可。然后，添加以下内容作为自定义键绑定。

```
{
    "keys": ["end"], "command": "custom_move_to_end_line"                              
} 
```

# python - 在 matplotlib 路径中获得一致的破折号/长度

> ID：15438783
> 
> 赞同：8
> 
> 时间：2013-03-15T17:38:51.150
> 
> 标签：python, matplotlib

我正在使用`matplotlib.patheffects`虚线绘制路径。我的目标是将每条路径精确地划分为沿路径均匀分布的 N 段。由于需要以像素长度而不是数据坐标来指定破折号，因此我正在使用`ax.transData.transform_point()`，并且我在大多数情况下都可以使用，但是在需要按比例缩小图形的情况下，破折号无法适当缩放.

这是一个演示问题的代码示例：

```
import sys
import matplotlib.pyplot as plt
import matplotlib.patheffects as PathEffects
from matplotlib.patches import PathPatch
from matplotlib.path import Path
import numpy as np

MIN=1 if len(sys.argv) <= 1 else int(sys.argv[1])
MAX=MIN if len(sys.argv) <=2  else int(sys.argv[2])
SCALE=4 if len(sys.argv) <=3  else int(sys.argv[3])
COUNT=MAX-MIN+1

fig = plt.figure(1, figsize=(COUNT*SCALE,SCALE))

for i in range(MIN, MAX+1):
    ax = plt.subplot(1, COUNT, i-MIN+1)
    ax.set_xlim(0, i)
    ax.set_ylim(0, i)
    path = Path([(0,0), (0,i) ,(i,i)], [Path.MOVETO, Path.CURVE3, Path.CURVE3])
    pp = PathPatch(path, fill=False)

    def path_length(path):
        QI_SAMPLES=1000
        v = path.vertices
        v = [ax.transData.transform_point(p) for p in v ]
        if len(v) > 2:
            v = [ quad_interpolate( i/(1.0 * QI_SAMPLES), v[0], v[1], v[2])
                  for i in range(0, QI_SAMPLES)]
        dv = np.diff(v, axis=0)
        return np.sum(np.sqrt(np.sum(dv**2, axis=-1)))

    def quad_interpolate(i, A, B, C):
        (ax, ay) = A
        (bx, by) = B
        (cx, cy) = C
        ii = 1.-i
        i2 = i*i
        ii2 = ii*ii
        rx = ax*ii2 + 2*bx*ii*i + cx*i2
        ry = ay*ii2 + 2*by*ii*i + cy*i2
        return (rx, ry)

    ax.add_patch(pp)

    length = path_length(path)
    dash_length = length/(2*i)
    space_length = length/(2*i)
    offset=-(space_length/2)

    pe = [PathEffects.withStroke(linewidth=3,
                                 dashes=[offset, (dash_length, space_length)],
                                 foreground="b")]
    pp.set_path_effects(pe)

plt.show() 
```

命令行参数是（最小段）（最大段）（子图比例）。您可能必须使用不同的命令行参数运行它才能触发问题，具体取决于您的显示大小——在我的系统上，使用“1 8 3”运行显示如下：

![好情节](../Images/8b75d74c7b1caa5bbd0df48b8122be32.png)

在运行“1 8 4”时显示：

![糟糕的情节](../Images/d6068f12f59aa45d11af812070682a8e.png)

如您所见，第二个情节不太正确——第八个子情节只有七个破折号，其他情节也有点偏离。

我怎样才能做到这一点，以便将破折号长度可靠地转换为基础轴的坐标空间，而不管比例如何？或者是否有其他方法可以沿着不依赖于以像素长度指定它们的路径获取虚线？

**更新：** 这是绘制直线而不是曲线的样子。好的：

![好情节2](../Images/0c26a8f71a3f2d3a299f8db59e29dcc8.png)

坏的：

![糟糕的情节2](../Images/4b57ef6afe6755941d763c69675270e0.png)

正如评论中所指出的，看起来即使是“好”的地块也略有偏差，因为子地块不是很方正。但是`ax.transData.transform_point`转型不应该解决这个问题吗？

# jquery - jQuery安全注入html

> ID：15438791
> 
> 赞同：4
> 
> 时间：2013-03-15T17:39:19.240
> 
> 标签：jquery, ajax, xss, javascript-security

因此，我通过 json 从外国不受信任的来源接收 html。我想在 div 容器中显示 html，如下所示：

```
$('#container').html(dangerousHTMLCode); 
```

如何防止最重要的 javascript 注入，其次是更改页面的样式。这都是客户端。容器 div 应该是一个灵活的高度以匹配内容的高度（可能排除一些 iframe 解决方案）。

**更新**：目标是从 html 中删除所有 javascript 和 css。这包括 dom 项的属性中存在的 js 和 css（style=""、onclick="" 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:18:04.377

好的，我的第一次尝试失败了。我同意 Jan Dvorak 的评论，即最好的方法可能是使用服务器端代理中的 XSS 工具来执行此操作，特别是因为您可能不得不通过某种代理，因为您正在执行跨站点请求如果您使用的是 JSONP，那么一切都已经丢失了。

但是，*由于*问题要求使用 jQuery 方法来执行此操作...

理想情况下，您会找到一个用 javascript 编写的 HTML 解析器，使用它来构建元素树，并删除任何与安全属性白名单不匹配的元素或属性。

由于我不知道这样的解析器，并且由于您使用的是具有解析器的浏览器，因此我们将尝试使用它。但我们必须小心，该解析器附加到 javascript 引擎和 HTTP 客户端等。

首先，正如我在第一次尝试的反馈中指出的那样，在我们做任何会创建 DOM 元素的事情之前，我们必须做一些工作，因为有些事件可以在插入 DOM 之前运行。我们至少需要确保在创建任何 DOM 对象之前不会解析任何 onX 属性。一般来说，对预加载进行一些干扰可能也是一个好主意。为此，让我们做一些简单的文本转换：

```
var xmlNameStartChars = "a-zA-Z_\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u02ff\\0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u2218f\\u2c00-\\u2fef\\u3001-\\udbbf\\udc00-\\udfff\\uf900-\\ufdcf\\ufdf0-\\ufffd";
var xmlNsPfx = "[" + xmlNameStartChars + "][-.0-9\\u00b7\\u0300-\\u036f\\u203f-\\u2040" + xmlNameStartChars + "]*:";
var tagStartRE = new RegExp("<\\/?(" + xmlNsPfx + ")?", "g");
var tagStartDeZRE = new RegExp("(<\\/(" + xmlNsPfx + ")?)z", "g");
dangerousHTMLCode = dangerousHTMLCode.replace(/on/gi, "z$&"); // run interference with onX
// run interference with preloading
// But don't interfere with namespaces
dangerousHTMLCode = dangerousHTMLCode.replace(/<\/?(\w*:)?/g, "$&z"); 
```

现在我们已经尽最大努力确保构建 DOM 树的安全性。但是，请注意，这种最大努力并**不能**保证安全 - 很可能存在我没有考虑过的攻击，可能围绕过去、现在*或将来的*浏览器或插件中的错误。一个特别担心的是，我假设唯一危险到足以在这一点上进行干预的属性以“on”开头；我*认为*是这样，但我对它还没有 100% 的信心。

**继续自担风险**

正如 Jan 在我第一次尝试的评论中向我指出的那样，白名单方法可能优于黑名单方法。我将从一个非常基本的白名单元素列表开始，添加/删除以品尝；我们将在它们前面加上`z`s，因为我们的文本操作也这样做了。

```
var wlElements = "zdiv, zspan, zem, zstrong, zp, za, zimg, ztable, zthead, ztbody, ztfoot, ztr, zth, ztd";
var nonWlSelector = ":not(" + wlElements + ")";
var dangerousDOM = $("<div/>").html(dangerousHTMLCode);
dangerousDOM.find(nonWlSelector).remove(); 
```

现在对于有趣的部分，您必须删除危险属性。这次我将其列入黑名单，部分原因是我懒得考虑我想列入白名单的所有属性......但我*在*src 和 href 中将 URL 方案列入白名单，不仅仅是“javascript:”可能不安全，“ vbscript:" 和 "livescript:" 在某些浏览器中至少是危险的。您可能应该将属性列入白名单，例如，我很有可能忘记或从未知道不以“on”开头的脚本属性。我还没有找到一种在不进行暴力 DOM 遍历的情况下找到“坏”属性的方法，所以让我们这样做：

```
var badAttrs = /^(.*:)(zon|style|background)/i;
var suspectAttrs = /^(.*:)(src|href)$/i;
var goodSchemes = /^\s*([^:]*$|ftp:|tel:|https?:)/i;
function processAttributes(element) {
    var toRemove = [];
    var attrs = element.attributes;
    for (var i = 0; i < attrs.length; i++) {
        var name = attrs[i].name, val = attrs[i].value;
        if (badAttrs.test(name) || (suspectAttr.test(name) && !goodSchemes.test(val)) {
            toRemove.push(attrs[i].name);
        }
    }
    while (toRemove.length) {
        element.removeAttribute(toRemove.pop());
    }
}

// Start walking from the root of our DOM fragment
var root = dangerousDOM[0];
var elements = [root];

// Walk until we have no more elements, processing their attributes and adding their children
while (elements.length) {
    var elem = elements.pop();
    if (elem.hasAttributes()) {
        processAttributes(elem);
    }

    // Find children of this element and queue them up
    child = elem.firstChild;
    while (child) {
        if (child.nodeType == 1) {
            // It's an element
            elements.push(child);
        }
        child = child.nextSibling;
    }
} 
```

现在我们准备撤消我们在开始时所做的文本操作并注入片段。同样，我们为使其更安全所做的最大努力可能没有考虑到今天有效的攻击，并且仍然可能允许对未来的浏览器/插件错误进行攻击。所以，再次，继续自担风险。

```
var lessDangerousHtml = dangerousDOM.html();
lessDangerousHtml = lessDangerousHtml.replace(/z(on)/gi, "$1");
lessDangerousHtml = lessDangerousHtml.replace(tagStartDeZRE, "$1");
$("#container").html(lessDangerousHtml); 
```

非常感谢 t.niese 的建设性批评。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T14:43:13.833

您可以在该 iframe 中使用`iframe`并加载不受信任的 HTML。您拥有的 iframe 将使用该`sandbox`属性来防止在 iframe 内注入的任何 JavaScript 修改 iframe 外部的环境。

```
<iframe class="untrusted" src="http://unsafe.example.com/" sandbox /> 
```

或者，如果不受信任的 HTML 是 JSON，则在您的服务器上解析 JSON。

```
<iframe class="untrusted" src="/Unsafe?url=http://unsafe.example.com/foo.json" sandbox /> 
```

# c - 解释这个 C 程序的输出？

> ID：15438794
> 
> 赞同：4
> 
> 时间：2013-03-15T17:39:26.490
> 
> 标签：c

```
#include<stdio.h>
#define CUBE(x) (x*x*x)

int main()
{
int a, b=3;
a = CUBE(++b);
printf("%d, %d\n", a, b);
return 0;
} 
```

此代码返回 和 的`a=150`值`b=6`。请解释一下。

我认为当它执行时， 的值`a`将被计算为`a=4*5*6=120`但根据编译器它不是真的，所以请解释逻辑....

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T17:41:21.987

没有逻辑，这是未定义的行为，因为

```
++b * ++b * ++b; 
```

修改和读取`b`3 次，没有交错序列点。

奖励：如果你尝试，你会看到另一个奇怪的行为`CUBE(1+2)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T17:59:47.723

除了 Luchian Grigore 所说的（这解释了为什么你会观察到这种奇怪的行为），你应该注意到这个宏是*可怕*的：它可能会导致微妙且非常难以追踪的错误，尤其是当使用具有副作用的语句调用时(like `++b`) 因为这将导致语句执行多次。

你应该从中学到三件事：

1.  **切勿**在宏中多次引用宏参数。虽然这条规则有例外，但您应该更愿意将其视为绝对规则。

2.  如果可能，尽量**避免**使用包含副作用的语句调用宏。

3.  尽可能**避免**使用类似函数的宏。请改用内联函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T18:24:36.873

在序列中多次更改相同变量的[未定义行为。](http://www.stroustrup.com/bs_faq2.html#evaluation-order)并且因为这个原因，您将使用不同的编译器为您的代码获得不同的结果。

碰巧我`a = 150 and b = 6`的编译器也得到了相同的结果。

```
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
```

您的宏表达式 `a = CUBE(++b);` 扩展为

```
a = ++b * ++b * ++b; 
```

并且在[完整表达](http://c-faq.com/sx1/index.html#full%20expression)`b`结束之前改变不止一次。.

但是我的编译器如何在低级别转换这个表达式（*可能你的编译器做类似的事情，你可以尝试使用相同的技术*）。为此，我使用`-S`选项编译了源 C，并得到了汇编代码。

```
gcc x.c -S 
```

你会得到`x.s`文件。

我正在展示部分有用的 asm 代码（*阅读评论*）

[因为您想知道如何`150`输出，这就是我添加答案的原因]

```
movq    %rsp, %rbp
.cfi_def_cfa_register 6
subq    $16, %rsp
movl    $3, -8(%rbp)    // b =  3 

addl    $1, -8(%rbp)    // b =  4
addl    $1, -8(%rbp)    // b =  5

movl    -8(%rbp), %eax  // eax = b  
imull   -8(%rbp), %eax  // 5*5 = 25

addl    $1, -8(%rbp)    // 6  `b` become 6 and

imull   -8(%rbp), %eax  // 6 * 25 = 150 
movl    %eax, -4(%rbp)  // 150 assign to `a` become 150 

movl    $.LC0, %eax     // printf function stuff...
movl    -8(%rbp), %edx
movl    -4(%rbp), %ecx
movl    %ecx, %esi
movq    %rax, %rdi 
```

`a = 5 * 5 * 6`在检查这个汇编代码时，我可以理解它像这样评估表达式 ，并且在三个增量之后`a`变成. `150``b``6`

[虽然不同的编译器会产生不同的结果，但我认为， `150`cab 只能评估这个序列`b=3`和你的表达式`5*5*6`]

# jsf - JSF EL 表达式在 HtmlInputText 的必需属性中不起作用

> ID：15438796
> 
> 赞同：1
> 
> 时间：2013-03-15T17:39:30.480
> 
> 标签：jsf, el

我正在将 JSF 组件动态添加到使用带有 facelets 的 JSF 1.2 创建的 XHTML 页面中。仅当单击页面中的特定按钮时，才必须对其中一些组件进行所需的验证。因此，我使用以下代码将所需的属性添加为 EL 表达式：

```
String requiredExpression = "#{not empty param['form:button']}")
component.setValueExpression("required", 
                       createValueExpression(requiredExpression, String.class)); 
```

我已经通过将 EL 表达式放置在页面中静态组件之一的 required 属性中来验证它是否有效。我还通过调试代码验证了 EL 表达式已添加到组件中。但它只是在动态组件中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:50:58.533

表达式必须计算为 a `boolean`，而不是 a `String`。

代替

```
createValueExpression(requiredExpression, String.class) 
```

经过

```
createValueExpression(requiredExpression, boolean.class) 
```

# django - 使用 POST 数据进行身份验证后保存表单数据

> ID：15438799
> 
> 赞同：1
> 
> 时间：2013-03-15T17:39:36.707
> 
> 标签：django

我有一个需要用户登录的视图。它将一些数据写入数据库，因此我使用以下方式查找表单提交`request.method == 'POST'`

流程是这样的：如果用户没有登录，他们会被重定向到登录页面。`next`登录后，我使用参数将它们重定向到我的初始视图。问题是重定向不再是 POST 而是 GET。

如何将此请求设为 POST？我应该使用其他模式来做到这一点吗？

编辑：这是我的看法：

```
@login_required
def some_view(request):
    if request.method == 'POST':
        # Do something
        return HttpResponseRedirect('some_url') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:58:50.810

1.  在他们通过身份验证之前，您可能不应该让他们发布。
2.  如果您必须接受来自未经身份验证的用户的 POST，但需要用户在执行某些提交操作之前登录...

我会按照以下方式做一些事情：

```
def my_view(request):
    if not request.user.is_authenticated():
        if request.method == "POST":
            request.session['post'] = request.POST
        redirect_to_login(request.path)
    else :
        if request.method == "POST":
            form = form_class(request.POST, request.FILES)
            if form.is_valid():
                # DO STUFF
        else:
            form = form_class(initial=request.session['post'] if 'post' in request.session else {}) 
```

本质上，将未经身份验证的发布数据保存到您的会话中，并将它们用作您重定向用户时表单的初始数据。是的，他们将不得不再次查看/点击提交按钮，但我认为这比通过表单的 is_valid 函数自动传递会话字典更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:49:54.267

这是此类事情的通常模式：

```
@login_required
def some_view(request):
    if request.method == 'POST':
        form = form_class(request.POST, request.FILES)
        if form.is_valid():
             # process form
             return HttpResponseRedirect('some_url')
    else:
        form = form_class()
    return render_to_response('template', {'form':form}) 
```

这需要用户登录才能访问视图。用户登录后，他/她使用`GET`方法访问视图。这将向用户显示表单。然后在他使用 POST 提交表单后，它被验证。如果表单有效，则返回重定向，如果无效，请注意无效表单将被传递到与 GET 相同的模板，因此允许您显示错误。

# google-maps - 谷歌地图 - 标记在缩放时漂移了 100 英里

> ID：15438802
> 
> 赞同：0
> 
> 时间：2013-03-15T17:39:43.173
> 
> 标签：google-maps, google-maps-markers

我的地图应用程序的简化版本在这里（来自谷歌电子表格的虚拟地图数据通过 JSON）：

[http://jsfiddle.net/mpAKk/](http://jsfiddle.net/mpAKk/)

我注意到地图上的标记在 6 级到 4 级及以上范围内缩小时会偏离其预期位置 100 英里。我之前在之前的地图项目中没有注意到这种影响。

正常，还是有什么地方做错了？

示例：注意明尼苏达州的红色标记（在初始缩放 4 处）。它真的属于威斯康星州的阿什兰。当您放大超过 6 级时，它似乎定位更准确。

```
Any ideas/suggestions? 
```

谢谢！

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:33:22.867

iconHotSpotOffset 必须是`new google.maps.Point(6,20)` ，而不是`(9,34)`
![在此处输入图像描述](../Images/5b7096e56b439d4ff75c0515b7750afd.png)

但是，不推荐使用 MarkerImage，您应该改用[**Icon**](https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons)。

# c++ - 是否有自动方法来检测我应该编译哪些 .cpp 源文件（取决于#include *.h）

> ID：15438806
> 
> 赞同：2
> 
> 时间：2013-03-15T17:39:51.440
> 
> 标签：c++, c, compilation

我有旧的大型代码库，并且由于我只需要主要功能的一小部分，我正在寻找一种自动检测所需 .cpps 的方法（假设它们位于同一文件夹中并且具有与 .h 文件匹配的名称）。
不幸的是，我仍然需要很多代码，所以手工编写代码是不可能的。是否有工具可以从我的“main.cpp”中递归找出所需的所有 .h 文件，这样我就可以进行简单的字符串替换（.h -> .cpp）并将其提供给编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:13:27.527

大多数编译器都可以为您执行此操作，例如 GCC 和 Clang 提供`-M`并`-MM`列出源文件的所有依赖项。还有其他选项可以排除系统头文件等。有关更多信息，请参阅编译器的文档，或者，如果您需要帮助，请告诉我们您正在使用哪个编译器。

但是，您的方法存在一个问题：您可以找出包含的头文件`main.cpp`，没问题，但是如果您想`.cpp`为头文件编译相应的文件，这些实现文件通常需要其他未直接或间接包含的头文件from`main.cpp`并且您还需要*这些*`.cpp`标头的文件。冲洗并重复。:)

 *如果手动迭代查找`.cpp`文件的过程不是一个选项，您可以使用 Makefile：

```
CPPFILES := $(wildcard *.cpp)
DEPFILES := $(CPPFILES:%.cpp=%.d)

%.d: %.cpp
    g++ -MM $< -o $@

include $(DEPFILES)

%.o: %.cpp
    @echo "$@"

%.h: %.o
    @: 
```

然后打电话

```
make main.o 
```

并让 make 找出需要哪些其他文件。上面当然是一个简化的例子，你可能有一个更复杂的目录结构，你可能需要添加一些编译选项`g++`，但我希望这是一个开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:16:12.787

将您的代码库编译成静态库（Windows 上的 .lib）。除非您修改代码库，否则您只需执行一次 - 即使这样您也只需要重新编译您更改的代码。

在您的可执行项目中，包含您正在使用的任何标头，并将库包含在您的链接器设置中。链接器只会将可执行文件实际使用的编译定义（来自静态库中的目标文件）链接到最终的 .exe 中。*

# c - glib 的哈希容器中的 flex+bison 输出

> ID：15438810
> 
> 赞同：0
> 
> 时间：2013-03-15T17:40:01.177
> 
> 标签：c, hashtable, bison, glib, flex-lexer

我在解析 bib 文件方面取得了相当大的进展，但下一步对于我目前的理解水平来说相当困难。我已经创建了野牛和 flex 代码，可以正确解析上面的 bib 文件：

```
%{
#include <stdio.h>
%}

// Symbols.
%union
{
    char    *sval;
};
%token <sval> VALUE
%token <sval> KEY
%token OBRACE
%token EBRACE
%token QUOTE
%token SEMICOLON 

%start Input
%%
Input: 
     /* empty */ 
     | Input Entry ;  /* input is zero or more entires */
Entry: 
     '@' KEY '{' KEY ','{ printf("===========\n%s : %s\n",$2, $4); } 
     KeyVals '}' 
     ;
KeyVals: 
       /* empty */ 
       | KeyVals KeyVal ; /* zero or more keyvals */
KeyVal: 
      KEY '=' VALUE ',' { printf("%s : %s\n",$1, $3); };

%%

int yyerror(char *s) {
  printf("yyerror : %s\n",s);
}

int main(void) {
  yyparse();
} 
```

和

```
%{
#include "bib.tab.h"
%}

%%
[A-Za-z][A-Za-z0-9]*      { yylval.sval = strdup(yytext); return KEY; }
\"([^\"]|\\.)*\"|\{([^\"]|\\.)*\}     { yylval.sval = strdup(yytext); return VALUE; }
[ \t\n]                   ; /* ignore whitespace */
[{}@=,]                   { return *yytext; }
.                         { fprintf(stderr, "Unrecognized character %c in input\n", *yytext); }
%% 
```

我想将这些值放在容器中。在过去的几天里，我阅读了大量的 glib 文档，并提出了最适合我的情况的哈希容器。下面是一个基本的哈希码，一旦将值放入数组键和 vals 中，它就会正确地得到哈希值。

```
#include <glib.h>
#define slen 1024

int main(gint argc, gchar** argv) 
{
  char *keys[] = {"id", "type", "author", "year",NULL};
  char *vals[] = {"one",  "Book",  "RB", "2013", NULL};
  gint i;
  GHashTable* table = g_hash_table_new(g_str_hash, g_str_equal);
  GHashTableIter iter;
  g_hash_table_iter_init (&iter, table);
  for (i= 0; i<=3; i++)
  {
    g_hash_table_insert(table, keys[i],vals[i]);
    g_printf("%d=>%s:%s\n",i,keys[i],g_hash_table_lookup(table,keys[i]));
  }
} 
```

问题是，我如何整合这两个代码，即在 C 代码中使用解析后的数据。任何帮助表示赞赏。

编辑：解释@UncleO 的回复：@UncleO，

谢谢你的评论。我不知道如何更好地解释它。这是一个尝试。我的代码（野牛）的最新状态是：

```
%{
#include <stdio.h>
#include <glib.h>
%}

// Symbols.
%union
{
    char    *sval;
};
%token <sval> VALUE
%token <sval> KEY
%token OBRACE
%token EBRACE
%token QUOTE
%token SEMICOLON 

%start Input
%%
Input: 
     /* empty */ 
     | Input Entry ;  /* input is zero or more entires */
Entry: 
     '@' KEY '{' KEY ','{ printf("===========\n%s : %s\n",$2, $4); } 
     KeyVals '}' 
     ;
KeyVals: 
       /* empty */ 
       | KeyVals KeyVal ; /* zero or more keyvals */
KeyVal: 
      KEY '=' VALUE ',' { printf("%s : %s\n",$1, $3); };

%%

int yyerror(char *s) {
  printf("yyerror : %s\n",s);
}

int main(void) {
 GHashTable* table = g_hash_table_new(g_str_hash, g_str_equal);
  char *keys[] = {"id", "type", "author", "year",NULL};
  char *vals[] = {"one",  "Book",  "RB", "2013", NULL};
  gint i;
  yyparse();
  GHashTableIter iter;
  g_hash_table_iter_init (&iter, table);
  for (i= 0; i<=3; i++)
  {
    g_hash_table_insert(table, keys[i],vals[i]);
    g_printf("%d=>%s:%s\n",i,keys[i],g_hash_table_lookup(table,keys[i]));
  }
} 
```

lex 文件不变。数组键和值的元素用于测试目的。输入文件的一个例子是

```
@Booklet{ab19,
    Author="Rudra Banerjee and A. Mookerjee",
    Editor="sm1",
    Title="sm2",
    Publisher="sm3",
    Volume="sm4",
    Issue="sm5",
    Page="sm6",
    Month="sm8",
    Note="sm9",
    Key="sm10",
    Year="1980",
    Add="osm1",
    Edition="osm2",
} 
```

因此，在解析时，代码会正确解析该值。我想使用解析输入中的这些值插入到哈希表中，这对于每个输入都是不同的。所以，我的最终目标是从代码中删除数组键和值；和线

```
g_hash_table_insert(table, keys[i],vals[i]); 
```

应该用类似的东西代替：

```
g_hash_table_insert(table, <$1 from bison>,<$3 from bison>); 
```

这有意义吗？

编辑：=======================================

@Uncle0：这是更新的代码；可能我的意图很明确。我正在努力解决这个问题，但是虽然从野牛行打印按预期打印东西，但从哈希表打印时并非如此（代码的最后一行）

```
%{
#include <stdio.h>
#include <glib.h>
#define slen 1024
GHashTable* table;
%}

// Symbols.
%union
{
    char    *sval;
};
%token <sval> VALUE
%token <sval> KEY
%token OBRACE
%token EBRACE
%token QUOTE
%token SEMICOLON 

%start Input
%%
Input: 
     /* empty */ 
     | Input Entry ;  /* input is zero or more entires */
Entry: 
     '@' KEY '{' KEY ','{ g_hash_table_insert(table, "TYPE", $2);
                  g_hash_table_insert(table, "ID", $4);
              g_printf("%s: %s\n", $2, $4);
              } 
     KeyVals '}' 
     ;
KeyVals: 
       /* empty */ 
       | KeyVals KeyVal ; /* zero or more keyvals */
KeyVal: 
      KEY '=' VALUE ',' { g_hash_table_insert(table, $1, $3);
                          g_printf("%s: %s\n", $1, $3); };

%%

int yyerror(char *s) {
  printf("yyerror : %s\n",s);
}

int main(void) {
  table = g_hash_table_new(g_str_hash, g_str_equal);
gint i;
do{
   g_hash_table_remove_all (table);
   yyparse();
   parse_entry (table);
//  g_printf("%s:%s\n","Author=>",g_hash_table_lookup(table,"Author"));
//  g_printf("%s:%s\n","KEY=>",g_hash_table_lookup(table,"KEY"));
  }
  while(!EOF);
}
void parse_entry (GHashTable *table)
{
  GHashTableIter iter;
  gchar *key, *val;
  char *keys[] = {"id", "type", "author", "year", "title", "publisher", "editor", 
    "volume", "number", "pages", "month", "note", "address", "edition", "journal",
    "series", "book", "chapter", "organization", NULL};
  char *vals[] = {NULL,  NULL,  NULL, NULL, NULL,
    NULL,  NULL,  NULL, NULL, NULL,
    NULL,  NULL,  NULL, NULL, NULL,
    NULL,    NULL,  NULL, NULL, NULL};

  gchar **kiter;
  gint i;
  g_hash_table_iter_init (&iter, table);
  while (g_hash_table_iter_next (&iter, (void **)&key, (void **)&val))
  {
    for (kiter = keys, i = 0; *kiter; kiter++, i++)
    {
      if (!g_ascii_strcasecmp(*kiter, key))
      {
    vals[i] = g_strndup(val,slen);
    break;
      }
    g_printf("%d=>%s:%s\n",i,keys[i],vals[i]);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:26:16.587

你还不清楚你想用输入做什么，但这里有一个解释让你开始。

flex 将获取您的正则表达式文件并生成一个名为 yylex() 的函数。

bison 将获取您的语法文件并生成一个名为 yyparse() 的函数，该函数重复使用 yylex() 函数来标记字符串。main() 函数只会调用 yyparse() 一次，每次 yyparse() 函数匹配语法中的某个规则时，都会执行你指定的代码片段。现在，您只是打印值，但您可以执行其他操作，例如插入哈希表或任何您想要的。

Grammar.y 文件包含 yyparse() 定义之前的代码和之后的代码。如果您愿意，可以将 main() 函数放在此文件的末尾，但最好将其放在另一个文件中并链接两者。通常，main() 函数会执行诸如打开输入以进行读取等操作，然后调用 yyparse() 来执行大部分工作。yyparse() 返回后， main 可以清理。

编辑：嗨鲁德拉，

我看到您想将 main() 保留在语法文件中。没关系。

您现在需要做的就是更改片段中的 printf 语句以插入到表中，该`table`变量必须在 main() 之外声明，以便 yyparse() 看到它。

```
%{
#include <stdio.h>
#include <glib.h>

GHashTable* table;

%}

// Symbols.
%union
{
    char    *sval;
};
%token <sval> VALUE
%token <sval> KEY
%token OBRACE
%token EBRACE
%token QUOTE
%token SEMICOLON 

%start Input
%%
Input: 
     /* empty */ 
     | Input Entry ;  /* input is zero or more entires */
Entry: 
     '@' KEY '{' KEY ','{ printf("===========\n%s : %s\n",$2, $4); } 
     KeyVals '}' 
     ;
KeyVals: 
       /* empty */ 
       | KeyVals KeyVal ; /* zero or more keyvals */
KeyVal: 
      KEY '=' VALUE ',' { g_hash_table_insert(table, $1, $3); printf("%s : %s\n",$1, $3); };

%%

int yyerror(char *s) {
  printf("yyerror : %s\n",s);
}

int main(void) {
  table = g_hash_table_new(g_str_hash, g_str_equal);

  yyparse();
} 
```

您确定不想对数据中的第一个术语做任何事情吗？似乎您没有将它们用于任何事情。

# sql - 是否可以添加到 TSQL 游标？

> ID：15438811
> 
> 赞同：0
> 
> 时间：2013-03-15T17:40:01.223
> 
> 标签：sql, tsql

给定一个简单的游标语句：

```
DECLARE vend_cursor CURSOR
    FOR SELECT * FROM Purchasing.Vendor
    --say my Purchasing.Vendor table did not have 'Company ABC', 'Company F'
    --can I explicitly add 'Company ABC' and 'Company F' to the Cursor without
    --adding them to the database?
OPEN vend_cursor
FETCH NEXT FROM vend_cursor; 
```

是否可以为游标添加显式值以进行迭代？

实际上，我对此的应用回答了一个显而易见的问题：“你到底为什么不将它们添加到数据库中？” 只是看看语法会是什么样子直接添加到光标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:45:03.443

```
 DECLARE vend_cursor CURSOR
        FOR SELECT * FROM Purchasing.Vendor
            UNION ALL select .... 'Company ABC'
            UNION ALL select .... 'Company F'
    --say my Purchasing.Vendor table did not have 'Company ABC', 'Company F'
    --can I explicitly add 'Company ABC' and 'Company F' to the Cursor without
    --adding them to the database?
   OPEN vend_cursor
   FETCH NEXT FROM vend_cursor; 
```

# javascript - 访问 Javascript 中应用于元素的样式来源

> ID：15438812
> 
> 赞同：0
> 
> 时间：2013-03-15T17:40:04.230
> 
> 标签：javascript, css, dom, styles, stylesheet

我希望能够使用 Javascript 查询将特定 CSS 属性分配给元素的位置。例如，如果一个元素的高度是 40px，我想知道这是通过样式表分配的，是通过内联规则分配的，还是布局引擎的自动结果。

对于某些属性，例如“高度”，我似乎无法仅通过查看计算样式或元素本身的样式属性来区分它们。

事实证明，我可以通过样式属性解析来检测内联样式，并且可以通过文档样式表和规则数组来找到一些样式表。

我目前检查样式表/内联规则的方法可以工作，但失败了，因为由于相同的源策略，Javascript 无法访问从不同域/协议加载的样式表。

关于如何做到这一点的任何想法？

谢谢！杰夫

# python - Python线程错误

> ID：15438813
> 
> 赞同：1
> 
> 时间：2013-03-15T17:40:14.000
> 
> 标签：python, sockets, tcp

我正在开发一个 Python 应用程序来使用 TCP 传输文件，并且是 Python 语言的新手。我已经编写了客户端代码和服务器端代码，如果我单独运行它们，它就可以工作。不幸的是，我需要将它们全部放在同一个文件中，即。main.py，它将运行服务器端代码和客户端代码。例如，每个网络节点都应该同时充当服务器和客户端。因此，我需要它不断监听来自其他节点的新请求（因此需要运行服务器端代码），同时将新请求发送到充当服务器的其他节点（所以在这种情况下，它充当一个客户）。我曾想过使用线程，但一直卡在服务器端代码的线程上。

这是我处理线程的 main.py 代码示例。

```
if __name__ == '__main__':
    serverThread_stop = Event()
    serverThread = Thread(target = TCPServer, args = (1111,'test.txt'))
    serverThread.start()
    serverThread.join()
    clientThread_stop = Event()
    clientThread = Thread(target = TCPClient, args = ('127.0.0.1',1111,'test.txt'))
    clientThread.start()
    clientThread.join()
    clientThread_stop.set()
    serverThread_stop.set() 
```

由于我对 Python 和套接字编程很陌生，所以我可能在线程代码方面犯了一些错误。有人可以帮我解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:02:54.817

`serverThread.join()`您在开始第二个线程之前立即调用。

问题是[连接阻塞，直到线程终止](http://docs.python.org/2/library/threading.html#threading.Thread.join)。

我会移动或完全删除对`join`.

# date - 服务中的 g:formatDate 替代项

> ID：15438815
> 
> 赞同：4
> 
> 时间：2013-03-15T17:40:23.033
> 
> 标签：date, grails, service, date-format

我能否以类似于 g:formatDate 标签的方式格式化日期，但在服务中？包括i18n和l10n？

在服务中执行此操作可能不是最佳实践，因为这更可能是视图逻辑的一部分，但我需要返回一个日期作为 JSON 响应的一部分，我不想处理这个在 JS 中（主要是因为 l10n）。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-12T09:38:24.480

您可以在这样的服务或控制器中使用 formatDate：

```
g.formatDate( date: new Date(), type: "date", style:"MEDIUM" ) 
```

**编辑：** 在服务中不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-26T11:16:19.710

这里有几个选项，不涉及从 grails 应用程序中拉入 tagLib bean。

**选项 1：** 如果您不太担心 i18n 使用默认的 groovy 方法格式化服务中的日期。

```
static final String DATE_FORMAT = 'dd-MM-yyyy'
// ...
Date date = new Date()
String formattedDate = date.format(DATE_FORMAT) 
```

（这就是你所需要的，没有额外的进口）

**选项2：** 如果你担心i18n，仍然想在服务中格式化日期，那么你可以得到默认的日期格式

但首先你需要在服务中获取语言环境，（这是警钟应该开始响起的地方）

```
// Don't do this...
import org.springframework.context.i18n.LocaleContextHolder;
// ...
String locale = LocaleContextHolder.getLocale()
// Don't do that ^^^ 
```

这将获取与当前线程关联的区域设置（如果有）或系统默认区域设置。但是我们想要请求或会话中的用户语言环境。

（那些警钟现在应该加入红色闪光灯）

但是，如果您确实想这样做，请通过方法调用从控制器传递请求。

然后你可以使用

```
import org.springframework.web.servlet.support.RequestContextUtils
// ...
def locale = RequestContextUtils.getLocale(request) 
```

所以我们有了语言环境，现在我们可以得到消息

```
// include the grailsApplication bean in the service
def grailsApplication
// ...

// Get the date format
def dateFormat = grailsApplication.mainContext.getMessage('default.date.format', null, 'dd-MM-yyyy', locale)

// Then you can use the groovy default method
String formattedDate = date.format(dateFormat) 
```

不要使用静态方法在服务中获取请求。如果你这样做，警钟和闪烁的红灯将伴随着你所在的建筑物的剧烈震动。只需从控制器传递它。

**选项 3：** 在视图中格式化日期

```
<g:set var="formattedDate" value="${g.formatDate(date: date)}" /> 
```

这无疑是最简洁的方法，但有时您不使用模板来返回输出。

**选项 4：**

获取服务中的数据后，使用 tagLib 并从控制器输出。例如

```
def model = service.getModel()
def output = myTagLib.myOutputHtmlMethod(model) 
```

然后你可以在 myTagLib 中使用 g.formatDate

# python - Scikit LogisticRegression 无法学习 or 和布尔函数

> ID：15438817
> 
> 赞同：3
> 
> 时间：2013-03-15T17:40:37.557
> 
> 标签：python, scikit-learn

scikit-learn 中实现的 LogisticRegression 似乎无法学习简单的布尔函数 AND 或 OR。我会理解 XOR 给出不好的结果，但 AND 和 OR 应该没问题。难道我做错了什么？

```
from sklearn.linear_model import LogisticRegression, LinearRegression
import numpy as np

bool_and = np.array([0., 0., 0., 1.])
bool_or  = np.array([0., 1., 1., 1.])
bool_xor = np.array([0., 1., 1., 0.])

x = np.array([[0., 0.],
              [0., 1.],
              [1., 0.],
              [1., 1.]])

y = bool_and
logit = LogisticRegression()
logit.fit(x,y)

#linear = LinearRegression()
#linear.fit(x, y)

print "expected: ", y
print "predicted:", logit.predict(x)
#print linear.predict(x) 
```

给出以下输出：

```
expected:  [0 0 0 1]
predicted: [0 0 0 0] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:02:15.763

这个问题似乎与正则化有关。以下使分类器工作：

```
logit = LogisticRegression(C=100) 
```

不幸的是，文档有点稀疏，所以我不确定`C`参数的范围是多少。

# java - 每 X 秒打印一个单词

> ID：15438818
> 
> 赞同：4
> 
> 时间：2013-03-15T17:40:39.193
> 
> 标签：java

我刚开始学习如何使用界面，我试图弄清楚如何每 10 秒打印一个特定的单词（在本例中为“你好”）。我使用`TimerTask`and`Timer`类来安排我的任务每 10 秒运行一次，但我这样做是否正确？

```
import java.awt.event.*;
import javax.swing.*;
import javax.swing.Timer;
import java.util.*;

public class Howdy2 {

    class PrintHowdy extends TimerTask {
        public void run() {
           System.out.println("Howdy!"); 
        }
     }

     public static void main(String[] args){
     Timer timer = new Timer();
     timer.schedule(new PrintHowdy(), 10000);

     }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:54:30.840

这样的事情应该可以解决问题，并且不需要使用`Timer`or `TimerTask`：

```
public class Test
{
    public static void main(String... args)
    {
        Thread thread = new Thread()
        {

            public void run()
            {
                while (true){
                    System.out.println("Hello World");
                    try
                    {
                        Thread.sleep(1000); // 1 second
                    } catch (Exception e)
                    {
                        e.printStackTrace();
                    }
                }
            }
        };
        thread.start();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:49:34.797

像这样的东西，

```
 public static void main(String[] args){
   while(true) {
new PrintHowdy().run();
Thread.sleep(10000)
}

     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:20:06.653

在这些解决方案中，您还应该考虑在给定条件下停止流动的情况；

```
 public class TestExecution02 implements Runnable {

        public boolean doLoop = true;

        public void run() {
                //------
            while(doLoop) {
                try {
                    Thread.sleep(10000); // 10 second
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } 
                // do your job until it is closed
            }

            System.out.println("Thread closed !");
        }

        public static void main(String[] args) {

            TestExecution02 testExecution = new TestExecution02();
            Thread myThread = new Thread (testExecution);
            myThread.start();

            // do something.....
            testExecution.doLoop = false;

        }
    } 
```

# android - 为什么我的时钟小部件在 CACHED PROCESSES 中占用大量内存？我该如何解决？

> ID：15438823
> 
> 赞同：1
> 
> 时间：2013-03-15T17:40:51.423
> 
> 标签：android, process, widget, memcached

我创建了一个简单的时钟小部件，`ImageView`它显示`Bitmap`每分钟创建一个。

小部件从实现 a 的服务更新，`BroadcastReceiver`以使用`ACTION_TIME_TICK`. 我没有找到其他解决方案。这是最好的吗？

几分钟后，如果我点击`"SHOW CACHED PROCESSES"`（在设置/应用程序/运行中），我的小部件将占用大约 200 mb 的内存，我不知道为什么。

有没有办法释放这个内存？

这是小部件代码的一部分：

```
public class Widget_01_Clock extends AppWidgetProvider {

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    Bitmap bmpClock = WidgetPaint.getClockBitmap(String textTime, 100, Color.White); 
    RemoteViews updateViews = new  RemoteViews(context.getPackageName(),R.layout.w_01_clock);    
    updateViews.setImageViewBitmap(R.id.w_01_clock, bmpClock);
    bmpClock.recycle();    

    }
} 
```

制作时钟位图的代码

```
public Bitmap getClockBitmap(String textTime, float textSize, int textColor) {
    Paint paint = new Paint();
    paint.setTextSize(textSize);
    paint.setColor(textColor);
    paint.setTextAlign(Paint.Align.CENTER);
    Typeface tf = Typeface.createFromAsset(c.getAssets(),typeface);
    paint.setTypeface(tf);
    int width = (int) (paint.measureText(text) + 0.5f); // round
    float baseline = (int) (paint.ascent() + 0.5f);
    int height = (int) (baseline + paint.descent() + 0.5f);
    Bitmap image = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(image);
    canvas.drawText(text, 0, baseline, paint);
    return image;
} 
```

非常感谢。

# html - 在溢出隐藏的div之外扩展位置绝对div

> ID：15438828
> 
> 赞同：21
> 
> 时间：2013-03-15T17:41:12.307
> 
> 标签：html, css, overflow, css-position

我已经几个月没有做过css了，所以我可能会错过一些简单的东西，但无论解决方案是什么，我都想不通。所以这就是问题所在。

这是我的代码的简化版本：

```
<div id="wrapper" style="position: fixed; overflow: hidden; height: 100%; width: 200px;">
  <div id="test" style="position: absolute; margin-left: -200px;"></div>
</div> 
```

所以基本上，我需要内部 div 测试在外部 div 包装器之外向左扩展 200px。问题是我的包装溢出：隐藏，它不允许出去。由于我正在使用一些 js 插件，我需要它保持溢出：隐藏。

那么有什么解决方法吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T17:45:38.280

唯一的选择是将 div 移到 div 之外`overflow:hidden`。你不能说*隐藏这个 div 中溢出的所有东西——除了这个 div ......让我们做一个例外*。

您可以在层次结构中再引入一层，内部 div 是溢出隐藏的，而外部 div 不是。然后将该定位元素放在外部 div 中。一个伪示例是：

```
<div class="outer">
  <div class="inner" style="overflow: hidden;">
    ....
  </div>

  <div class="abs-positioned">
  </div>
</div> 
```

如果碰巧您在旧 div 上使用 进行了定位`overflow:hidden`，您可以将该设置移动到`outer`div 中，以便正确定位。

所以简短的回答：没有解决方案可以让你做你想做的事而不改变你的 CSS`overflow:hidden`或不改变你的标记。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-19T00:54:39.723

Expanding on Piyas De:

[an example](http://jsfiddle.net/5m3RE/1/)

Do note, that if the overflow hidden has

```
position: relative 
```

then it will not work

[not working example](http://jsfiddle.net/5m3RE/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-31T15:09:27.483

如果遵守以下规则，实际上可以忽略溢出隐藏：

*   溢出的子元素具有绝对定位
*   隐藏溢出的父级具有静态定位
*   添加了具有相对定位的第二个父包装器

**HTML**

```
<div class="outer-wrapper">
  <div class="wrapper">
    <div class="overflowed">(Overflowing the wrapper)</div>
  </div>
</div> 
```

**CSS**

```
.outer-wrapper {
  position: relative;
}
.wrapper {
  overflow: hidden;
}
.overflowed {
  position: absolute;
} 
```

**小提琴** [http://jsfiddle.net/vLsmmrz6/](http://jsfiddle.net/vLsmmrz6/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-15T17:52:51.943

就像是 -

```
<div id="textChange" style="overflow:hidden; padding-left:250px;">This is wrapper Div
This is wrapper Div<br/>
This is wrapper Div<br/>
<div id="textChange1" style="position:absolute;left:50; top: 50;">
This is inner div but extend 200px to the left<br/>
This is inner div but extend 200px to the left<br/>
This is inner div but extend 200px to the left<br/>
This is inner div but extend 200px to the left<br/>
This is inner div but extend 200px to the left<br/>
</div>
This is wrapper Div<br/>
This is wrapper Div<br/>
This is wrapper Div<br/>
</div> 
```

可以解决你的问题。

看看..是否有帮助...

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-09-11T13:12:44.587

这是一个不需要 Javascript 或移动任何东西的修复程序。只需添加一个具有#wrapper 宽度和高度的父包装器。

```
<div id="parent_wrapper" style="width:200px">
  <div id="wrapper" style="position: absolute; overflow: hidden; height: 100%; width: 300px;">
    <div id="test" style="position: absolute; margin-left:200px;">Test</div>
  </div>
</div> 
```

另请参阅我的实时示例：http: [//jsfiddle.net/ovjdqj4o/](http://jsfiddle.net/ovjdqj4o/)

# java - 验证未包含在根标记中的 xml 标记

> ID：15438829
> 
> 赞同：1
> 
> 时间：2013-03-15T17:41:16.650
> 
> 标签：java, xml

我在 String(xmlStr) 中有一些 XML 标签，如下所示：

```
<mainTag1>
    <tagA>lyrics</tagA>
    <tagB>com.example.action.Lyrics</tagB>
</mainTag1>
<mainTag2>
    <tagC>lyrics</tagC>
    <tagD>/lyrics</tagD>
</mainTag2> 
```

我正在使用以下代码验证此 XML：

```
final InputStream inputStream = new ByteArrayInputStream(xmlStr.getBytes());
final DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder;
docBuilder = factory.newDocumentBuilder();
final Document document = docBuilder.parse(inputStream); 
```

docBuilde.parse，抛出异常：

> 文档中根元素之后的标记必须格式正确。

对于我的代码要求，我不能添加任何根标签。有什么方法可以验证我的标签，而不会出现此错误？

# jquery - jQuery 同位素过滤效果

> ID：15438834
> 
> 赞同：0
> 
> 时间：2013-03-15T17:41:23.343
> 
> 标签：jquery, drupal

我在我的 drupal 页面中嵌入了 jquery Isotope 过滤功能，您可以在此处看到：

[http://sarahraaber.com/artwork_v2](http://sarahraaber.com/artwork_v2)

过滤器工作正常，我唯一不明白的是，为什么你可以在这里看到“过滤器效果”：

[http://isotope.metafizzy.co/demos/filtering.html](http://isotope.metafizzy.co/demos/filtering.html)

不会工作。我在一个简单的 html 页面上尝试了相同的东西，2 分钟后一切正常。

知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:34:25.307

通过添加所需的 CSS 代码解决了它-.-

[http://isotope.metafizzy.co/docs/animating.html](http://isotope.metafizzy.co/docs/animating.html)

# java - 我在从 Spring XML 迁移到 Java-config 时不知所措

> ID：15438835
> 
> 赞同：4
> 
> 时间：2013-03-15T17:41:23.377
> 
> 标签：java, spring, hibernate, spring-mvc, spring-security

我有一个`spring-secuiry.xml`和一个`database.xml`我需要进入 Java-config 但我不知道如何..

这是我的`sercuirty.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <global-method-security pre-post-annotations="enabled" />

    <http use-expressions="true">
        <intercept-url access="hasRole('ROLE_VERIFIED_MEMBER')" pattern="/mrequest**" />
        <intercept-url pattern='/*' access='permitAll' />
        <form-login default-target-url="/visit" />

        <logout logout-success-url="/" />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="cpilling04@aol.com.dev" password="testing" authorities="ROLE_VERIFIED_MEMBER" />
            </user-service>

        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

这是我的`database.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:jee="http://www.springframework.org/schema/jee"

    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                            http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/context 
                            http://www.springframework.org/schema/context/spring-context-3.1.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                            http://www.springframework.org/schema/jdbc
                            http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
                            http://www.springframework.org/schema/jee
                            http://www.springframework.org/schema/jee/spring-jee-3.0.xsd">

    <!-- Last changed: $LastChangedDate: 2012-11-19 08:53:13 -0500 (Mon, 19 
        Nov 2012) $ @author $Author: johnathan.smith@uftwf.org $ @version $Revision: 
        829 $ -->

    <context:property-placeholder location="classpath:app.properties" />

    <context:component-scan base-package="org.uftwf" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <jee:jndi-lookup id="dataSource" jndi-name="java:jboss/datasources/mySQLDB"
        expected-type="javax.sql.DataSource" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>org.uftwf.inquiry.model.MemberInquiryInformation</value>

            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.use_sql_comments">${hibernate.use_sql_comments}</prop>
                <prop key="format_sql">${format_sql}</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

有人可以告诉我如何更改以下 Java-config 以拥有它们：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages= {"com.johnathanmsmith.mvc.web"})
public class WebMVCConfig extends WebMvcConfigurerAdapter {

    private static final String MESSAGE_SOURCE = "/WEB-INF/classes/messages";

    private static final Logger logger = LoggerFactory.getLogger(WebMVCConfig.class);

    @Bean
    public  ViewResolver resolver() {
        UrlBasedViewResolver url = new UrlBasedViewResolver();
        url.setPrefix("/WEB-INF/view/");
        url.setViewClass(JstlView.class);
        url.setSuffix(".jsp");
        return url;
    }

    @Bean(name = "messageSource")
    public MessageSource configureMessageSource() {
        logger.debug("setting up message source");
        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
        messageSource.setBasename(MESSAGE_SOURCE);
        messageSource.setCacheSeconds(5);
        messageSource.setDefaultEncoding("UTF-8");
        return messageSource;
    }

    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver lr = new SessionLocaleResolver();
        lr.setDefaultLocale(Locale.ENGLISH);
        return lr;
    }

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        logger.debug("setting up resource handlers");
        registry.addResourceHandler("/resources/").addResourceLocations("/resources/**");
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        logger.debug("configureDefaultServletHandling");
        configurer.enable();
    }

    @Override
    public void addInterceptors(final InterceptorRegistry registry) {
        registry.addInterceptor(new LocaleChangeInterceptor());
    }

    @Bean
    public SimpleMappingExceptionResolver simpleMappingExceptionResolver() {
        SimpleMappingExceptionResolver b = new SimpleMappingExceptionResolver();

        Properties mappings = new Properties();
        mappings.put("org.springframework.web.servlet.PageNotFound", "p404");
        mappings.put("org.springframework.dao.DataAccessException", "dataAccessFailure");
        mappings.put("org.springframework.transaction.TransactionException", "dataAccessFailure");
        b.setExceptionMappings(mappings);
        return b;
    }

    @Bean
    public RequestTrackerConfig requestTrackerConfig()
    {
        RequestTrackerConfig tr = new RequestTrackerConfig();
        tr.setPassword("Waiting#$");
        tr.setUrl("https://uftwfrt01-dev.uftmasterad.org/REST/1.0");
        tr.setUser("root");

        return tr;
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T12:40:48.403

正如评论中所指出的，Java 配置中尚不支持 Spring 安全性。

不久前，我将一个基本的 Spring mvc webapp 转换为完整的（或当时尽可能多的）代码配置。

您可以在 github 上查看[整个项目](https://github.com/robhinds/spring-code-configuration-webapp)，这一切都应该开箱即用，并且还使用 inializr/bootstrap 的东西来实现 web/html5 的良好实践。

[我的代码配置文件都在这里](https://github.com/robhinds/spring-code-configuration-webapp/tree/master/src/main/java/com/tmm/web/configuration)

正如你在我的安全课上看到的那样，它有点作弊！

```
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.ImportResource;

/**
 * Spring doesn't yet support pure java configuration of spring security
 * so this will just have to import the old fashioned xml file.
 * 
 * @author rob
 *
 */
@Configuration
@ImportResource("classpath:META-INF/spring/security.xml")
public class SecurityConfiguration {} 
```

* * *

**更新**

从 Spring-security 3.2 开始，您已经能够将 Spring-security 转换为基于 Java 的代码配置。我已经把它写在我的博客上：http: [//automateddeveloper.blogspot.co.uk/2014/02/spring-4-xml-to-annotation-configuration.html](http://automateddeveloper.blogspot.co.uk/2014/02/spring-4-xml-to-annotation-configuration.html)

（包括源代码和使用 Spring 4 的完整 spring mvc 项目）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T14:39:07.050

## Let's do it - 没有任何 XML 的数据库配置，即基于注释的所有内容。

我首先创建一个数据库凭据属性文件，并打算将它保存在应用程序的类路径中。我将以 MySQL 和 Hibernate 为例。

```
database.properties
-------------------
db.driver.class=com.mysql.jdbc.Driver
db.url=jdbc:mysql://hostname:port/dbname
db.username=myusername
db.password=mypassword 
```

现在我将创建一个 Spring 托管类来表示这个配置文件。

```
@Component
@PropertySource(value={"classpath:database.properties"})
public class DatabaseConfiguration
{
    @Value("${db.driver.class}")
    private String mDriverClass;

    @Value("${db.url}")
    private String mConnectionURL;

    @Value("${db.username}")
    private String mUserID;

    @Value("${db.password}")
    private String mPassword;

    //Getters and setters for the above private variables.
} 
```

同样，我创建了一个用于定义休眠特定属性的属性文件。这些属性也是，我打算保留在类路径中。

```
hibernate.properties
--------------------
hibernate.dialect= org.hibernate.dialect.MySQLDialect
hibernate.id.new_generator_mappings=true
hibernate.show_sql=false 
```

还有定义这个属性文件的spring托管类。

```
@Component
@PropertySource(value={"classpath:hibernate.properties"})
public class HibernateConfiguration
{
    @Value("${hibernate.dialect}")
    private String mHibernateDialect;

    @Value("${hibernate.id.new_generator_mappings}")
    private boolean mUseNewIdGeneratorMappings;

    @Value("${hibernate.show_sql}")
    private boolean mHibernateShowSQL;

    //Setters and getters for above fields
} 
```

使用上面的 HibernateConfiguration 类还有一个小属性类（有用的）。

```
@Component
public class HibernateProperties
extends Properties
{
    @Autowired
    public HibernateProperties(HibernateConfiguration config)
    {
        setProperty("hibernate.dialect", config.getDialect());

        setProperty("hibernate.id.new_generator_mappings", config.useNewIdGeneratorMappings() ? "true" : "false");

        setProperty("hibernate.show_sql", config.showSQL() ? "true" : "false");
    }
} 
```

现在我将使用 Spring 托管配置类（替换具有数据库相关配置的应用程序上下文 xml 文件的类）。让我将其命名为 DbAppConfig。

```
@Configuration
@EnableTransactionManagement
public class DbAppConfig
{

    @Autowired
    LocalSessionFactoryBean factory;

    @Bean
    @Autowired
    public DataSource getDataSource(DatabaseConfiguration config)
    {
        DriverManagerDataSource datasource = new DriverManagerDataSource();

        datasource.setDriverClassName(config.getDriverClass());

        datasource.setUrl(config.getConnectionURL());

        datasource.setUsername(config.getUserID());

        datasource.setPassword(config.getPassword());

        return datasource;
    }

    @Bean
    @Autowired
    public LocalSessionFactoryBean getSessionFactoryBean(DataSource datasource, HibernateProperties properties)
    {
        LocalSessionFactoryBean factory = new LocalSessionFactoryBean();

        factory.setDataSource(datasource);

        factory.setHibernateProperties(properties);

        factory.setPackagesToScan(new String[]{"my.entity.packages.to.scan"});

        return factory;
    }

    /**
     * Since the LocalSessionFactoryBean is available on the context, the LocalSessionFactoryBean.getObject will supply
     * the session factory by the auto detection of spring.
     *
     * @param factory
     * @return
     */
    @Bean
    @Autowired
    public HibernateTransactionManager getTransactionManager(SessionFactory factory)
    {
        return new HibernateTransactionManager(factory);
    }

    /**
     * inclusion The PropertySourcesPlaceholderConfigurer automatically lets the
     * annotation included property files to be scanned. setting it static to spawn on startup.
     * @return
     */
    @Bean
    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() 
    {
        PropertySourcesPlaceholderConfigurer ph = new PropertySourcesPlaceholderConfigurer();

        ph.setIgnoreUnresolvablePlaceholders(true);

        return ph;
    }
} 
```

就是这样！您可以使用 spring 管理的事务管理器。只需使用 @Transactional 装饰服务（@Service steriotypes）类并在其中使用您的 DAO（@Repository 原型）。

# angularjs - 在指令中嵌套指令

> ID：15438837
> 
> 赞同：7
> 
> 时间：2013-03-15T17:41:32.940
> 
> 标签：angularjs, angularjs-directive

关于 AngularJS 指令，我遇到了从另一个指令中调用指令的情况，我有以下问题。

1.  为什么我不能在我的链接函数中引用 scope.bindValue？有没有办法可以从 scope.bindValue 计算一个值并将其设置为范围？
2.  为什么子指令可以在 scope:{} 中使用“@”绑定，但在链接函数中不能使用 scope.value = attrs.value？

以下所有内容都可以在[http://jsfiddle.net/sdg9/AjDtt/13/上看到](http://jsfiddle.net/sdg9/AjDtt/13/)

HTML：

```
<directive bind-value="12" value="7"></directive> 
```

JS：

```
var myApp = angular.module('myApp', []);
var commonTemplate = '<div>{{name}} bind-value is: {{bindValue}} </div><div>{{name}} value is: {{value}} </div><div>{{name}} add one to bind-value is: {{addOneBindValue}} </div><div>{{name}} add one to value is: {{addOneValue}} </div><br/>';

myApp.directive('directive', function () {
    return {
        scope: {
            bindValue: "@",
        },
        template: commonTemplate + '<br/><sub-directive bind-value="{{value}}" value="{{value}}"></sub-directive>',
        restrict: 'E',
        link: function (scope, element, attrs) {
            scope.name = "Directive";
            scope.value = attrs.value;
            scope.addOneBindValue = parseInt(scope.bindValue) + 1;
            scope.addOneValue = parseInt(scope.value) + 1;
        }
    };
});

myApp.directive('subDirective', function () {
    return {
        scope: {
            bindValue: "@"
        },
        template: commonTemplate,
        restrict: 'E',
        link: function (scope, element, attrs) {   
            scope.name = "SubDirective";
            scope.value = attrs.value;
            scope.addOneBindValue = parseInt(scope.bindValue) + 1;
            scope.addOneValue = parseInt(scope.value) + 1;
        }
    };
}); 
```

输出：

```
Directive bind-value is: 12
Directive value is: 7
Directive add one to bind-value is: null    <--- why?
Directive add one to value is: 8    

SubDirective bind-value is: 7
SubDirective value is:                      <--- why?
SubDirective add one to bind-value is: null
SubDirective add one to value is: null 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T17:54:35.053

当链接函数运行时，内插属性（即使用 {{}} 的属性）和使用“@”定义的隔离范围属性不可用。您需要使用`attrs.$observe()`(or `scope.$watch( @ property here, ...)`) 来获取值（异步）。

因此，`scope.bindValue`当您尝试使用它时不可用。

同样，在您的 subDirective 中，属性`value`具有 {{}}，因此当您尝试使用它时，它的值也将不可用。您还需要为此定义一个“@”指令属性。

工作[小提琴](http://jsfiddle.net/mrajcok/rTsxt/)。

异步要求的原因是 {{}} 中的项目可能会更改，并且您通常希望您的指令注意到（然后做一些事情——比如更新“addOne”值）。当属性值包含 {{}} 时，“@”通常与隔离范围一起使用。

如果属性值是常量，并且您不打算在模板（或 templateUrl）中使用这些值，那么可能不应该使用“@”。在链接函数中，`attrs.attrName`如果值是字符串，或者`scope.$eval(attrs.attrName)`属性是数字或布尔值（或者`parseInt(attrs.attrName)`如果您知道它是数字），则只需使用。

# mysql - mysql错误1364字段没有默认值

> ID：15438840
> 
> 赞同：133
> 
> 时间：2013-03-15T17:41:47.910
> 
> 标签：mysql

我的桌子看起来像

```
create table try ( name varchar(8), CREATED_BY varchar(40) not null); 
```

然后我有一个触发器来自动填充 CREATED_BY 字段

```
create trigger autoPopulateAtInsert BEFORE INSERT on try for each row set new.CREATED_BY=user(); 
```

当我使用

```
insert into try (name) values ('abc'); 
```

该条目是在表中进行的，但我仍然收到错误消息

```
Field 'CREATED_BY' doesn't have a default value Error no 1364 
```

有没有办法在不使字段为空且不删除触发器的情况下抑制此错误？否则我的休眠将看到这些异常（即使已经进行了插入），然后应用程序将崩溃。

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-05-29T05:11:46.293

这是由`STRICT_TRANS_TABLES`定义的 SQL 模式引起的

> %PROGRAMDATA%\MySQL\MySQL 服务器 5.6\my.ini

文件。删除该设置并重新启动 MySQL 应该可以解决问题。

见[https://www.farbeyondcode.com/Solution-for-MariaDB-Field--xxx--doesn-t-have-a-default-value-5-2720.html](https://www.farbeyondcode.com/Solution-for-MariaDB-Field--xxx--doesn-t-have-a-default-value-5-2720.html)

如果编辑该文件不能解决问题，请参阅[http://dev.mysql.com/doc/refman/5.6/en/option-files.html](http://dev.mysql.com/doc/refman/5.6/en/option-files.html)了解配置文件的其他可能位置。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2014-10-19T15:41:43.187

打开 phpmyadmin 并转到“更多”选项卡并选择“变量”子菜单。向下滚动以找到 sql 模式。编辑 sql 模式并删除 'STRICT_TRANS_TABLES' 保存。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2016-08-26T07:43:00.603

在 phpmyadmin 中，执行以下操作：

```
select @@GLOBAL.sql_mode 
```

就我而言，我得到以下信息：

```
ONLY_FULL_GROUP_BY, STRICT_TRANS_TABLES ,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION 
```

复制此结果并删除`STRICT_TRANS_TABLES`. 然后执行以下操作：

```
set GLOBAL sql_mode='ONLY_FULL_GROUP_BY,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-03-15T17:47:34.647

`Created_By`为（例如：空）设置默认值，`VARCHAR`触发器无论如何都会更新该值。

```
create table try ( 
     name varchar(8), 
     CREATED_BY varchar(40) DEFAULT '' not null
); 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2014-09-15T13:37:59.980

当我在使用 Homebrew 安装 mysql5.6.20 时遇到同样的问题时，我通过进入 my.cnf 解决了这个问题

```
nano /usr/local/Cellar/mysql/5.6.20_1/my.cnf 
```

找到如下所示的行：

```
sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES 
```

将上面的行注释掉并重新启动mysql服务器

```
mysql.server restart 
```

错误消失了！

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2018-08-17T08:22:17.177

运行 mysql 控制台：

```
mysql -u your_username -p 
```

，选择数据库：

```
USE your_database; 
```

并运行（也从 mysql 控制台）：

```
SET GLOBAL sql_mode=''; 
```

这将关闭严格模式，mysql 不会再抱怨了。

为了清楚起见：您的数据库定义说“这个字段必须定义默认值”，并且通过执行上面的步骤，您对 MySql 说“好吧，忽略它”。因此，如果您只想在本地进行一些快速修复，这个解决方案是可以的。但通常你应该调查你的数据库定义并检查字段是否真的需要默认值，如果需要设置它。如果不需要默认值，则应删除此要求以保持干净的情况。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2018-08-24T12:35:35.197

正如其他人所说，这是由`STRICT_TRANS_TABLES`SQL 模式引起的。

要检查是否`STRICT_TRANS_TABLES`启用了模式：

```
SHOW VARIABLES LIKE 'sql_mode'; 
```

要禁用严格模式：

```
SET GLOBAL sql_mode=''; 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2017-03-22T17:12:31.370

在每个插入操作之前，我在下面添加并解决了我的问题，

```
SET SQL_MODE = ''; 
```

我不确定这是否是最好的解决方案，

```
SET SQL_MODE = ''; INSERT INTO  `mytable` (  `field1` ,  `field2`) VALUES ('value1',  'value2'); 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2018-02-15T09:05:36.393

修改您的查询并将“IGNORE”添加为：

```
INSERT IGNORE INTO  `mytable` (  `field1` ,  `field2`) VALUES ('value1',  'value2'); 
```

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2016-08-30T07:44:49.493

它的工作和测试复制到配置文件：/etc/mysql/my.cnf OR /bin/mysql/my.ini

```
[mysqld]
port = 3306
sql-mode="" 
```

然后重启 MySQL

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2015-04-24T17:52:37.987

这似乎是由 MySQL 中一个**长期存在的**（自 2004 年以来）[错误 (#6295)](http://bugs.mysql.com/bug.php?id=6295)引起的，标题为

> *不为 NOT NULL 列处理触发器*。

据称，它在 2013 年[的 MySQL 5.7.1 版本（变更日志，最后一个条目）](http://dev.mysql.com/doc/relnotes/mysql/5.7/en/news-5-7-1.html)中得到修复，使 MySQL 的行为符合“SQL 标准”（同上）。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2017-04-21T16:23:26.377

对于 Windows **WampServer**用户：

WAMP > MySQL > my.ini

搜索文件`sql-mode=""`

取消注释它。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-12-03T18:14:05.613

在 Windows Server 中编辑 my.ini（例如 program files\mysql\mysql server nn\my.ini）

我不会简单地设置 sql-mode=""，而是建议从该行中删除 STRICT_TRANS_TABLES，让所有内容保持原样，然后从服务实用程序重新启动 MySQL。为您是谁以及您所做的未来程序员添加评论。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-11-25T01:34:21.703

我将字段设置为不为空并解决了问题，当命令将信息存储在其中时它会更新，不再显示字段为空的 msqli 消息，因为您没有向它插入值，这个解决方案的应用程序可以在一些项目取决于您的项目结构。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-06-02T09:58:18.090

我解决了更改位于数据文件夹中的 my.ini 文件的问题。对于 mysql 5.6 my.ini 文件移动到数据文件夹而不是 bin 或 mysql 安装文件夹。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-25T05:56:51.077

我认为在这种情况下，名称列中有空值。

```
update try set name='abc' where created_by='def'; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-06-17T19:05:29.597

我正在为 Linux 使用 Xampp 7.3.28-1。它使用 MariaDB 10.4.19。它的配置文件是：/opt/lampp/etc/my.cnf

它不包含定义 sql_mode 的条目。但是查询“选择@@GLOBAL.sql_mode;” 确实返回一个结果，并且它包含有问题的 STRICT_TRANS_TABLES。我想它现在是默认的。

我的解决方案是通过在 [mysqld] 下面添加这一行来明确定义模式： sql_mode=NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

您可以定义所需的模式或将其留空。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-11-21T10:34:37.460

我发现一旦我删除了外键和主键的加倍，当我可以只使用外键作为表中的主键时。然后我的所有代码都可以正常工作，并且我能够上传到数据库。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-09T06:32:25.597

***这适用于 SYNOLOGY 设备用户：***

* * *

*   如何在 SYNOLOGY 设备上设置全局变量（严格模式关闭）。
    （检查 DSM 7.0.1-42218 - 设备型号 DS418）

使用 PUTTY 连接：以**root**
身份登录和**sudo su**后...（总管理员）

 *****   如果不存在，则在以下位置创建**my.cnf**：

MariaDB 5：
/var/packages/MariaDB/etc
MariaDB 10：
/var/packages/MariaDB10/etc

*   这应该在文件中（至少对于严格模式关闭）

```
# custom configs
[mysqld]
innodb_strict_mode = OFF
sql_mode = ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION 
```

*   重启 mysqld 守护进程：
    MariaDB 5：
    /usr/syno/bin/synopkg 重启 MariaDB
    MariaDB 10：
    **/usr/syno/bin/synopkg 重启 MariaDB10**

*   检查在这两个全局选项中启用的严格模式 - 两者都不应该存在或关闭（参见上面的配置）

*   登录mysql：
    **mysql -u root -p**

*   输入密码：

显示像'sql_mode'这样的变量；
显示变量，如“%STRICT%”；

* * *****

# magento - magento忘记密码电子邮件未发送

> ID：15438844
> 
> 赞同：5
> 
> 时间：2013-03-15T17:42:04.137
> 
> 标签：magento

我正在使用 magento 1.7.2。但遇到电子邮件发送问题。当客户使用忘记密码表单请求新密码时，他们没有收到任何电子邮件。但是消息“如果有与 arif04cuet2@gmail.com 关联的帐户，您将收到一封电子邮件，其中包含重置密码的链接。” 正在显示。

我在这里发现了类似的问题，但对我不起作用。 [忘记密码不发送电子邮件](https://stackoverflow.com/questions/8923150/forgot-password-not-sending-email) [Magento 不发送忘记密码电子邮件](https://stackoverflow.com/questions/9192427/magento-not-sending-forgot-password-emails) 我正在使用自定义模板。

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:51:39.360

First step would be to switch to the default Magento template, then see if the password reset emails are working. If they do, then it's most likely an issue specific to your template.

If it still doesn't work, it could be an issue with the local email server settings itself.

For emailing issues, I would recommend installing SMTP Pro by ASchroder.

[https://github.com/aschroder/Magento-SMTP-Pro-Email-Extension](https://github.com/aschroder/Magento-SMTP-Pro-Email-Extension)

After installing:

1.  go to `System > Configuration > System (under Advanced)`

2.  Open `SMTP Pro Email General Settings`

3.  For `Choose extension option` select `SMTP`

4.  Set `Log all messages` to `Yes`

5.  Expand the `SMTP Pro Email SMTP Settings` section

6.  Set `Authentication to None` and leave `Username` and `Password` blank (this is assuming the apache user your Magento is running on is allowed to send emails through SMTP. If not, you should enter in the correct SMTP login settings for this area.

7.  Set `Host` to `localhost` and `Port` to `25`

8.  Save your configuration, and then click `Run Self Test` under the `SMTP Pro Email General Settings` section.

If the test was successful, password reset emails should now be working. If the user did not receive the email, it may of either been blocked by their incoming mail server, or filtered into their spam folder. If you have access to your server's mail logs, you can see if the emails being sent from Magento are being accepted by the mail servers they are being sent to.

You can view a log of emails being sent from Magento under `System > Tools > Email Log` after this extension is enabled and `Log All Messages` is set to yes in the configuration.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-29T06:46:18.670

Magento 1.9 不发送电子邮件，当客户使用忘记密码表单请求新密码时，他们没有收到任何电子邮件。

我修复这个问题其实方法很简单

管理系统 > 配置 > 高级 > 系统 > 邮件发送设置 > 设置返回路径 > 是

我希望工作顺利

# css - 如何在不裁剪溢出-x 的情况下创建滚动 DIV？

> ID：15438848
> 
> 赞同：5
> 
> 时间：2013-03-15T17:42:21.843
> 
> 标签：css, scroll, overflow

我有一个只应该垂直滚动的 DIV。我希望这个 DIV 中有一个元素水平溢出而不被裁剪。这是想要的效果：

![在此处输入图像描述](../Images/a003bf75ba271207d643a0d2c689e735.png)

我以为如果我只指定`overflow-y:scroll`，它只会裁剪垂直溢出。但是，我错了，这就是真正发生的事情：

![在此处输入图像描述](../Images/dff593d60b17307f38056e7de4dd9b03.png)

**CSS：**

```
ol {
    border: 1px solid red;
    overflow-y: scroll;
    height: 20em;
    width: 7em;
} 
```

**JSF中：**

[http://jsfiddle.net/u6d6W/1/](http://jsfiddle.net/u6d6W/1/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T18:22:32.073

# database - 互联网连接失败时延迟同步到主数据库

> ID：15438855
> 
> 赞同：2
> 
> 时间：2013-03-15T17:42:34.643
> 
> 标签：database, data-synchronization

我对这种情况的解决方案有疑问：

1，我希望 Web 应用程序在几个不同位置的本地 Web 服务器上运行。

2，每个位置都有本地Web服务器，带有该应用程序的副本，主要跟踪仓库中的更改并在数据库中创建插入。

3，所有这些应用程序都应该通过互联网连接访问服务器上的相同数据库。

如何解决互联网连接中断并且我想继续在应用程序中工作的情况。连接恢复后，应用程序应将所有数据更改传递给数据库服务器。

这种情况有什么通用的解决方案吗？任何人都知道可以找到解决这个问题和另一个常见编程/架构问题的模型的网页吗？

谢谢你们

# c# - 将html转换为pdf时，iTextSharp中的HtmlTags不起作用

> ID：15438856
> 
> 赞同：2
> 
> 时间：2013-03-15T17:42:37.377
> 
> 标签：c#, pdf, itextsharp

出于某种原因，我似乎无法在我的 htmlElements 上应用样式。我为测试目的创建了一个样式包，但该样式并未应用于每个 div 元素。谁能发现我做错了什么？

```
try
{
    // set the file name
    string file = "C:/MyPdf.pdf";

    // create a pdf document
    Document document = new Document();

    // set the page size, set the orientation
    document.SetPageSize(PageSize.A4);

    // create a writer instance
    PdfWriter pdfWriter = PdfWriter.GetInstance(document, new FileStream(file, FileMode.Create));

    // open the document
    document.Open();

    // THIS STYLE IS SET FOR TESTING PURPOSES
    StyleSheet styles = new StyleSheet();
    styles.LoadTagStyle(HtmlTags.DIV, HtmlTags.BGCOLOR, "#ff0000");

    // html pagina inlezen
    string htmlText = File.ReadAllText("C:\\afl.html");

    // html pagina parsen in een arraylist van IElements
    List<IElement> htmlElements = HTMLWorker.ParseToList(new StringReader(htmlText), styles);

    // add the IElements to the document
    for (int i = 0; i < htmlElements.Count; i++)
    {
        // cast the element
        IElement htmlElement = ((IElement)htmlElements[i]);
        document.Add(htmlElement);
    }

    // close the document
    document.Close();

    // open the pdf document
    //Process.Start(file);
} 
catch (Exception ex)
{
    var derp = ex.Message;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:29:18.647

HTMLWorker 不再被积极维护，而是鼓励您使用 XMLWorker。

也就是说，您会发现除了可能基于表格的标签外，大多数标签都不支持背景颜色。这背后的原因是 PDF 规范本身不支持背景颜色。要实现这一点，iText 需要使用复杂的注释或在文本后面绘制形状。

查看[当前 XMLWorker 文档的此链接](http://demo.itextsupport.com/xmlworker/itextdoc/index.html)，单击左侧导航中的 CSS 支持以查看支持的各种属性。

您的代码本身是正确且有效的，它只是一个不受支持的属性，不会引发任何错误。

# windows-phone-7 - 做绑定总是需要一个列表吗？视窗电话 7

> ID：15438858
> 
> 赞同：0
> 
> 时间：2013-03-15T17:42:41.977
> 
> 标签：windows-phone-7, data-binding

我想在它们旁边制作一些带有文本的矩形。然后是当您通过群组查看联系人时的人员中心。

我想知道虽然我需要根据每个项目制作 X 个矩形，但我不知道如何让它重复。

我能想到的唯一方法是使用列表，然后尝试获取包含文本的矩形。

我不确定我是否可以像重复堆栈面板或重复网格一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:03:52.650

这真的取决于你想做什么。

**如果您有固定数量的项目，并且您知道它们在设计时应该是什么样子**

那么您可以简单地`ListBoxItem`在 XAML 中添加一个：

```
 <ListBox>
                <ListBox.Items>
                    <ListBoxItem>
                        <Border Background="Green" Width="70" Height="70">
                            <Grid>
                                <Rectangle Width="50" Height="50" 
                                           Fill="Red" Margin="10" />
                                <TextBlock Text="1" HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center" />
                            </Grid>
                        </Border>
                    </ListBoxItem>
                    <ListBoxItem>
                        <Border Background="Blue" Width="70" Height="70">
                            <Grid>
                                <Rectangle Width="50" Height="50" 
                                           Fill="Yellow" Margin="10" />
                                <TextBlock Text="2" HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                            </Grid>
                        </Border>
                    </ListBoxItem>
                </ListBox.Items>
            </ListBox> 
```

**如果您事先不知道有多少项，并且希望它们都具有相同的外观**

那么是的，绑定是唯一的方法

根据数据绑定项的 ui 复杂性，您可能希望将该 ui 逻辑包装在单独的（用户）控件中，并将其用作项的 DataTemplate：

```
 <ListBox ItemsSource={Binding TheItemsToBind}>
               <ListBox.ItemTemplate>
                    <DateTemplate>
                        <mycontrols:MySpecializedControl 
                            [...whatever it takes to bind to the data item...]/>
                    </DateTemplate>
               </ListBox.ItemTemplate>
           </ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:31:15.930

绑定列表本身并不知道元素在`ListBox`. 您需要`DataTemplate`为每个项目定义一个（更多细节[在这里](http://tonychampion.net/blog/index.php/2011/12/9th-day-of-silverlight-implicit-data-templates/)）。

现在，由于您正在讨论在 People Hub 中完成的分组，您可以使用控件（[此处](http://www.geekchamp.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api)和[此处](http://www.geekchamp.com/articles/wp7-longlistselector-in-depth--part2-data-binding-scenarios)`LongListSelector`的教程）。

# r - master 在 Rmpi 程序中消耗 100% CPU

> ID：15438859
> 
> 赞同：1
> 
> 时间：2013-03-15T17:42:42.440
> 
> 标签：r, mpi, hpc

我正在使用 Rmpi​​ (v. 0.6-2) 包来并行化我的 R (v. 2.15) 代码。我有以下代码和平：

```
library(Rmpi)
source("slaveFunction04.r")
mpi.spawn.Rslaves(nslaves=2)
mpi.bcast.Robj2slave(slaveFunction04)
mpi.remote.exec(slaveFunction04())
mpi.close.Rslaves()
mpi.quit() 
```

当从属正在执行 slaveFunction04 时，我希望主进程处于空闲状态，消耗很少的资源，就像您将 MPI 与 C 或 Fortran 一起使用时那样。但是相反，主进程消耗 100% 的 CPU，就像从属进程一样（每个进程都在自己的内核中运行）。

知道为什么会发生这种情况，我该如何解决？

对于 MPI，我在 OpenSuse 12.3 上使用 OpenMPI v. 1.6-3.1.2。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:12:31.347

这并不罕见，事实上，这几乎是我期望在 C 或 Fortran 中看到的，以及主从分解。

MPI 是为高性能并行计算而设计的，通常如果任务被阻塞等待消息，没有比尽快获取消息更重要的事情要做，因此实现“忙等待”，反复轮询以查看如果消息已到达，则占用 CPU。这会消耗 CPU 时间，但假设没有其他事情可做，并且当消息*确实*到达时，它会将延迟时间缩短几微秒。在大多数 MPI 实现中，这种操作模式通常是默认的。它在 OpenMPI 中称为“积极”模式，并在[此处](http://www.open-mpi.org/faq/?category=running#oversubscribing)进行了描述。

对于许多问题，这是一个非常明智的默认行为，但并不总是您想要的，因此有一些方法可以将其关闭。如果这是您所看到的原因，您应该能够通过将环境变量设置`OMPI_MCA_mpi_yield_when_idle`为 1（或非零）来[退出积极模式，](http://www.open-mpi.org/faq/?category=running#force-aggressive-degraded)从而在一定程度上减少主服务器上的 CPU 负载。

# sql - Oracle 从 1 开始序列

> ID：15438861
> 
> 赞同：5
> 
> 时间：2013-03-15T17:43:05.133
> 
> 标签：sql, database, oracle, oracle10g

我正在使用 Oracle 10g 维护一个数据库，并且我希望有一个从 1 开始并随着每行增加 1 的序列。

为了实现这一点，我创建了以下语句：

```
CREATE SEQUENCE PATIENTS_SEQ START WITH 1 INCREMENT BY 1 NOMINVALUE NOCACHE NOCYCLE; 
```

但是，在将第一个条目插入到具有值 (PATIENTS_SEQ.NEXTVAL) 的表中时，计数从 2 而不是 1 开始。如果我将序列修改为从 0 开始，则会收到一个错误，即以值开头的值不能小于比最小值。谁能帮助解决如何让我的计数从 1 开始正确开始？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T17:46:21.527

只需将最小值也设置为 0：

```
CREATE SEQUENCE PATIENTS_SEQ 
  START WITH 0 
  INCREMENT BY 1 
  MINVALUE 0 
  NOCACHE 
  NOCYCLE; 
```

# ios - UITextView 文本背景颜色

> ID：15438869
> 
> 赞同：2
> 
> 时间：2013-03-15T17:43:25.233
> 
> 标签：ios, uikit, uitextview, core-text

我正在尝试获得一个透明的 UITextView，并且我知道如何设置它。我还想要的是在已显示的文本下方的彩色背景。再次，文本视图背景会将整个视图矩形设置为给定的颜色，我想要的是文本下方的颜色。有什么简单的方法可以实现这样的事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:54:43.543

据我所知，您正在尝试对文本进行突出显示。如果是这种情况，您可以使用 NSAttributedString。它允许您设置文本的背景颜色而不是视图背景。

```
NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:@"Test String"];
[attributedString addAttribute:NSBackgroundColorAttributeName value:[UIColor lightGrayColor] range:NSMakeRange(0, 11)]; 
```

然后在你的 UITextView 上设置属性文本属性：

```
textView.attributedText = attributedString; 
```

# java - 如何获取子类的 Logger？

> ID：15438871
> 
> 赞同：10
> 
> 时间：2013-03-15T17:43:31.673
> 
> 标签：java, java.util.logging

我有一个子类和一个超类。在超类中，我有一个记录一些东西的方法。当我创建子类的实例时，记录器会为超类创建一条日志消息。为什么会这样？

代码示例：

超类.java

```
import java.util.logging.Level;
import java.util.logging.Logger;

public abstract class SuperClass {
    public void logAndPrintClass(){
        String name = this.getClass().getName();
        System.out.println(name);
        Logger logger = Logger.getLogger(name);
        logger.log(Level.INFO, "Logmessage");
    }
} 
```

子类.java

```
public class SubClass extends SuperClass {
} 
```

TestLogBubClass.java

```
public class TestLogBubClass {

    public static void main(String[] args){
        SuperClass obj = new SubClass();
        obj.logAndPrintClass();
    }
} 
```

输出：

```
SubClass
Mar 15, 2013 6:30:04 PM SuperClass logAndPrintClass
INFO: Logmessage 
```

如您所见，类的名称已正确打印，但在日志消息中显示不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T18:31:09.560

这个原因在[LogRecord](http://docs.oracle.com/javase/6/docs/api/java/util/logging/LogRecord.html)的 JavaDoc 中：

> 请注意，如果客户端应用程序没有明确指定源方法名称和源类名称，则 LogRecord 类将在首次访问它们时（由于对 getSourceMethodName 或 getSourceClassName 的调用）通过分析调用堆栈自动推断它们。

在这种情况下，调用堆栈以 定义的方法结束`SuperClass`，因此`LogRecord`假定它是被调用的类。如果您想看到它的实际效果，请执行以下代码：

```
public class Example {

    public static class Superclass {
        public void foo() {
            new Exception().printStackTrace();
        }
    }

    public static class Subclass extends Superclass {
        // nothing here
    }

    public static void main(String[] argv)
    throws Exception
    {
        Superclass s = new Subclass();
        s.foo();
    }
} 
```

编辑：我不使用 jul，但希望有一种简单的方法来配置输出（就像所有其他记录器实现提供的一样）。看来您必须实现自己的[Formatter](http://docs.oracle.com/javase/6/docs/api/java/util/logging/Formatter.html)类，并使用该`java.util.logging.ConsoleHandler.formatter`属性指定它。

如果可能，我建议切换到 SLF4J。您可以通过 SLF4J 将所有现有的 jul 代码桥接到一个实际的记录器，让您可以更好地控制其输出（如 Log4J 或 Logback）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:37:19.030

这段`java.util.logging`代码很奇怪.. Logging 不使用`name`，而是试图找出源类本身（然后被记录）。看看`private void inferCaller()`类中的方法`java.util.logging.LogRecord`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:44:37.573

@Parsifal 解释了为什么会发生这种情况，我将尝试解释一种解决方法。

如果您想查看调用方法的确切类，我建议使用[log4j](http://logging.apache.org/log4j/1.2/)或[slf4j](http://slf4j.org/)。如果您确实需要使用`java.util.Logger`，请查看[jul-to-slf4j](http://www.slf4j.org/legacy.html)。

我已经尝试过，对于我来说，具有相同类的输入在我的标准输出中如下所示：

> 子类
> 
> 2013 年 3 月 15 日晚上 8:39:44 超级类 logAndPrintClass
> 
> 信息：日志消息
> 
> 20:39:44,478 信息子类：12 - 日志消息

在日志文件中只有：

> 20:39:44,478 信息子类：12 - 日志消息

它可能看起来不太好，但在某些情况下，这可能是合适的解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:28:38.007

我想我有一个解决方法，即使我无法提供完整的解释。

`logAndPrintClass`只需一个`super`调用即可覆盖，如下所示`SubClass`：

```
class SubClass extends SuperClass {
    protected void logAndPrintClass(){ super.logAndPrintClass(); }
} 
```

我仍然得到相同的输出。

```
SubClass
Mar 15, 2013 11:22:10 AM SuperClass logAndPrintClass
INFO: Logmessage 
```

然后我简单地将方法体复制到子类中：

```
class SubClass extends SuperClass {
    protected void logAndPrintClass(){
        String name = this.getClass().getName();
        System.out.println(name);
        Logger logger = Logger.getLogger(name);
        logger.log(Level.INFO, "Logmessage");
    }
} 
```

然后我得到了不同的输出：

```
SubClass
Mar 15, 2013 11:23:31 AM SubClass logAndPrintClass 
```

我不知道为什么会这样，但我似乎发现的唯一区别是该`Logger`对象现在是在子类内部而不是在超类内部实例化。

# java - Tomcat 上的 Java 持久性 - 没有名为 EntityManager 的持久性提供程序

> ID：15438876
> 
> 赞同：4
> 
> 时间：2013-03-15T17:43:59.940
> 
> 标签：java, hibernate, jpa, persistence, tomcat7

我正在尝试学习使用持久性，并且已经设法在本地机器上的 glassfish 上成功运行该项目。现在对我来说下一步是在我的 Tomcat 上的服务器上运行它，但这不起作用。

我总是收到错误“没有名为 MyPersistence 的 EntityManager 的持久性提供程序”

这就是战争的结构

```
.
|____index.jsp
|____WEB-INF
| |____classes
| | |____Mainpackage
| | | |____Ente.class
| | |____META-INF
| | | |____persistence.xml
| |____lib
| | |____javax.persistence.jar
| | |____mysql-connector-java-5.1.24-bin.jar
| |____web.xml 
```

我的jsp的内容是

```
 EntityManagerFactory fac = Persistence.createEntityManagerFactory("MyPersistence");
  EntityManager mgr = fac.createEntityManager();
  mgr.getTransaction().begin();
  Ente e = new Ente();
  e.setName("Quietscheente");
  mgr.persist(e);
  mgr.getTransaction().commit();
  mgr.close();
  fac.close(); 
```

我的 persistence.xml 看起来像

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">

    <persistence-unit name="MyPersistence">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.connection.url" value="jdbc:mysql://h2134265.stratoserver.net/persistencetest"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.username" value="persistence"/>
            <property name="hibernate.connection.password" value="XXXXXXXXX"/>
            <property name="hibernate.archive.autodetection" value="class"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hbm2ddl.auto" value="update"/>
        </properties>
        <class>Mainpackage.Ente</class>
    </persistence-unit>
</persistence> 
```

我确实尝试将 persistence.xml 移动到另一个位置，但根据互联网上的几个来源，该位置应该是正确的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:20:14.180

根据您的`WEB-INF/lib`内容，没有 Hibernates 的库。

所以请[下载](http://sourceforge.net/projects/hibernate/files/hibernate4/)它的库并将它们添加到您的`WEB-INF/lib`文件夹中。

以下是必要库的列表（请注意，`javax.persistence.jar`您需要将其删除以避免可能的 JAR 冲突）：

*   antlr-2.7.7.jar
*   dom4j-1.6.1.jar
*   hibernate-commons-annotations-4.0.1.Final.jar
*   hibernate-core-4.1.8.Final.jar
*   hibernate-entitymanager-4.1.8.Final.jar
*   hibernate-jpa-2.0-api-1.0.1.Final.jar
*   javassist-3.15.0-GA.jar
*   jboss-logging-3.1.0.GA.jar
*   jboss-transaction-api_1.1_spec-1.0.0.Final.jar

# .net - 实体框架可以做到这一点吗？

> ID：15438877
> 
> 赞同：0
> 
> 时间：2013-03-15T17:44:00.213
> 
> 标签：.net, database, entity-framework, c#-4.0

假设您有一个 SQL Server 数据库 (TestDB)，其中仅包含两个表，可以通过执行以下 Transact-SQL 创建：

```
CREATE TABLE Person(
   personId INT PRIMARY KEY IDENTITY(1,1),
   name VARCHAR(50)
)

CREATE TABLE House(
   personId INT,
   houseId INT,
   builtDate DATETIME,
   PRIMARY KEY(personId, houseId)
) 
```

理想情况下，表**House中的字段****personId**将是引用表**Person中的字段****personId**的外键，但如您所见，**它不是**。**此外，假设不能**修改数据库模式。

 ******我希望有以下类通过使用实体框架来表示这些表

```
[Table("Person")]
public class Person
{
   [Column("personId")]
   public int Id{ get; set; }

   [Column("name")]
   public string Name{ get; set; }

   public List<House> Houses{ get; set; }
}

[Table("House")]
public class House
{
   [Column("personId")]
   public int OwnerId { get; set; }

   [ForeignKey("OwnerId")] 
   public Person Owner { get; set; }

   [Column("houseId")]
   public int HouseId{ get; set; }

   [Column("builtDate")]
   public DateTime BuiltDate{ get; set; }
}

public class EFDbContext : DbContext
{
   public DbSet<Person> Persons {get; set;}

   public DbSet<House> Houses {get; set;}
} 
```

我认为如果 Person(personId) 和 House(personId) 在数据库中存在关系，这将是 Entity Framework 将生成的类模型，但请记住数据库中没有外键约束。

我认为关键问题是：**当您实际上没有外键时，您将如何模拟拥有外键？**

记住我不能触摸数据库。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:53:56.030

我以前做过这个：

1）获取数据库的副本

2）创建相关外键

3) 从您的副本创建实体框架模型

4) 更改连接字符串以指向“实时”数据库。

一个不错的选择是首先使用[逆向工程代码](http://blogs.msdn.com/b/adonet/archive/2013/01/30/ef-power-tools-beta-3-available.aspx)来创建数据库的代码优先版本。然后您可以在代码中手动添加关系。******

# c# - 在调试期间更改 IsPostBack

> ID：15438880
> 
> 赞同：0
> 
> 时间：2013-03-15T17:44:09.030
> 
> 标签：c#, asp.net, visual-studio-2010, postback, webforms

我知道不可能在代码中更改 IsPostBack：

```
IsPostBack = false; 
```

因为它没有二传手。但是我可以在调试期间更改它吗？我试过了，但做不到。那么，不可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:55:37.957

调试器提供的唯一优点是它允许您在没有设置器时修改支持字段，或者在无法访问时调用设置器。在这种情况下，没有设置器，也没有支持字段。该`Page.IsPostBack`属性是一个计算属性，并且在几个难以修改的值上执行此操作。

您可以尝试修改一些影响计算的表达式`IsPostBack`。例如，如果该字段`_isCrossPagePostBack`是`true`和`_requestValueCollection`不是`null`，那么`IsPostBack`将评估为`true`. 但是改变这两个会影响更多，`IsPostBack`因为其他属性值也会改变。这会起作用，但会产生意想不到的后果。这不是我会尝试的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:02:04.973

有几件事浮现在脑海中，您可以做一些事情来管理它。- 移动任何你可以进入的逻辑

```
(!IsPostBack)
{

} 
```

-设置创建控件的断点（如果它们是动态的）。通过这种方式，您可以知道回发中正在更改的内容。

# php - 显示从 SQL 查询返回的日期/时间后 PHP 中断

> ID：15438885
> 
> 赞同：0
> 
> 时间：2013-03-15T17:44:13.683
> 
> 标签：php

我从 sql 查询中提取了几个值（见下文），一切正常，直到我尝试在页面上显示 LastMessageTime（日期/时间）。当我尝试在页面上显示 LastMessageTime 时，页面不会在此之后呈现任何内容或 LastMessageTime 。我直接通过 sql 查询提取了值并得到了这个 2013-03-15 17:32:10.000。我不确定我是否需要逃避某些东西，或者是否缺少其他东西

```
$sql = "SELECT Name, DNSName, LastMessageTime, IDENumber, Version FROM Computers where Name = '$assetname'";

echo "<table border=1 bordercolor=#FFCC00 style=background-color:#FFFFCC width=100%  cellpadding=3 cellspacing=5>";

echo "<tr>";
echo "<td><b>Information</b></td>";
echo "</tr>";
echo "<p style=font-family:verdana,arial,sans-serif;font-size:10px;</p>";
echo "</table>";
echo "<table border =1 width=100% cellpadding=3 cellspacing=5>";
echo "<td> Installed</td>";
echo "<td>".$SAVI2."</td>";
echo "</tr>";
echo "<tr>";
echo "<td> Version</td>";
echo "<td>".$row['Version']."</td>";
echo "</tr>";
echo "<tr>";
echo "<td> IDE Number</td>";
echo "<td>".$row['IDENumber']."</td>";
echo "</tr>";
echo "<tr>";
echo "<td> Last Report time</td>";
echo "<td>".$row['LastMessageTime']."</td>";
echo "</tr>";
echo "</table>"; 
```

$vard = $row['LastMessageTime']; 回声 var_dump($vard);

返回页面对象（日期时间）#1 (3) { ["date"]=> string(19) "2013-03-15 16:47:52" ["timezone_type"]=> int(3) ["timezone "]=> 字符串(14) "美国/丹佛" }

$sql = "SELECT Name, DomainName, OperatingSystem, ServicePack, IPAddressText, DNSName, SAVInstalled, LastLoggedOnUser, SAVVersion, IDENumber, SAVOnAccess, LastMessageTime FROM Computers where Name = '$assetname'";

```
$stmt = sqlsrv_query( $conn, $sql );

// Check for 0 results

if( $stmt === false) {
die( print_r( sqlsrv_errors(), true) );
}

while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC) ) {

echo "<table border=1 bordercolor=#FFCC00 style=background-color:#FFFFCC width=100% cellpadding=3 cellspacing=5>";
echo "<tr>";
echo "<td><b>Information</b></td>";
echo "</tr>";
echo "<p style=font-family:verdana,arial,sans-serif;font-size:10px;</p>";
echo "</table>";
echo "<table border =1 width=100% cellpadding=3 cellspacing=5>";
echo "<td> Installed</td>";
echo "<td>".$SAVI2."</td>";
echo "</tr>";
echo "<tr>";
echo "<td> Version</td>";
echo "<td>".$row['SAVVersion']."</td>";
echo "</tr>";
echo "<tr>";
echo "<td> IDE Number</td>";
echo "<td>".$row['IDENumber']."</td>";
echo "</tr>";
echo "<tr>";
echo "<td>last date</td>";
echo "<td>".$row['LastMessageTime']."</td>";
echo "</tr>";

echo "</table>";
$vard = $row['LastMessageTime'];
echo var_dump($vard);

}

/* Close the connection. */
sqlsrv_close( $conn); 

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:47:39.167

在最后一行之前的行中，您缺少一个 ; 在行尾。打开 PHP 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:28:17.103

如果`$vard = $row['LastMessageTime']; echo var_dump($vard);`返回：

```
object(DateTime)#1 (3) {
    ["date"]=> string(19) "2013-03-15 16:47:52"
    ["timezone_type"]=> int(3)
    ["timezone"]=> string(14) "America/Denver"
} 
```

然后这应该可以输出最后一条消息时间：

```
echo $row['LastMessageTime']->date; 
```

# mysql - mysql加入同一张表，不重复

> ID：15438888
> 
> 赞同：3
> 
> 时间：2013-03-15T17:44:19.617
> 
> 标签：mysql, join, self-join

我有一个`instructors`包含以下结构/数据的表：

```
-----------------
|id  | name     |
-----------------
|1   | saad     |
|2   | imran    |
----------------- 
```

我想在不返回重复结果的情况下对同一个表进行连接。

如果我做一个简单的连接，查询返回 4 rows `[saad, saad], [saad, imran], [imran, imran], [imran, saad]`。

如果我添加一个 where 子句，它会返回 2 rows `[saad, imran], [imran, saad]`。

但是，我只想返回 1 行，（即如果`[saad, imran]`已经返回，则查询不应该返回`[imran, saad]`）。

到目前为止，这是我的查询：

```
SELECT DISTINCT
    i1.name AS name1,
    i2.name AS name2
FROM 
    instructors i1, instructors i2
WHERE
    i1.name != i2.name
ORDER BY
    name1, name2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T17:47:35.337

试试这个：

```
SELECT DISTINCT
   i1.name AS name1,
   i2.name AS name2
FROM 
   instructors i1, instructors i2
WHERE
   i1.id < i2.id
ORDER BY
   name1, name2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T17:47:04.373

尝试：

```
SELECT DISTINCT
    i1.name AS name1,
    i2.name AS name2
FROM 
    instructors i1, instructors i2
WHERE
    i1.name > i2.name
ORDER BY
    name1, name2 
```

# android - sqlite错误打开跟踪文件

> ID：15438889
> 
> 赞同：0
> 
> 时间：2013-03-15T17:44:22.750
> 
> 标签：android, sqlite

当谈到 android 编程时，我是一个菜鸟，而且我在了解 SQLite 时遇到了特别的麻烦。当我运行我的应用程序时，它加载正常，但出现错误“打开跟踪文件时出错：没有这样的文件或目录（2）”。然后，当我单击我的按钮时，应该将字符串 awesome 插入到我的数据库中，然后在 textView 中返回它，这些错误出现并且应用程序崩溃：

```
03-15 17:35:01.523: E/Trace(794): error opening trace file: No such file or directory (2)
03-15 17:35:02.223: D/gralloc_goldfish(794): Emulator without GPU emulation detected.
03-15 17:37:48.623: E/SQLiteLog(794): (1) no such column: _id
03-15 17:37:48.623: D/AndroidRuntime(794): Shutting down VM
03-15 17:37:48.623: W/dalvikvm(794): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
03-15 17:37:48.673: E/AndroidRuntime(794): FATAL EXCEPTION: main
03-15 17:37:48.673: E/AndroidRuntime(794): java.lang.IllegalStateException: Could not execute method of the activity
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.view.View$1.onClick(View.java:3591)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.view.View.performClick(View.java:4084)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.view.View$PerformClick.run(View.java:16966)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.os.Handler.handleCallback(Handler.java:615)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.os.Looper.loop(Looper.java:137)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-15 17:37:48.673: E/AndroidRuntime(794):  at java.lang.reflect.Method.invokeNative(Native Method)
03-15 17:37:48.673: E/AndroidRuntime(794):  at java.lang.reflect.Method.invoke(Method.java:511)
03-15 17:37:48.673: E/AndroidRuntime(794):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-15 17:37:48.673: E/AndroidRuntime(794):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-15 17:37:48.673: E/AndroidRuntime(794):  at dalvik.system.NativeStart.main(Native Method)
03-15 17:37:48.673: E/AndroidRuntime(794): Caused by: java.lang.reflect.InvocationTargetException
03-15 17:37:48.673: E/AndroidRuntime(794):  at java.lang.reflect.Method.invokeNative(Native Method)
03-15 17:37:48.673: E/AndroidRuntime(794):  at java.lang.reflect.Method.invoke(Method.java:511)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.view.View$1.onClick(View.java:3586)
03-15 17:37:48.673: E/AndroidRuntime(794):  ... 11 more
03-15 17:37:48.673: E/AndroidRuntime(794): Caused by: android.database.sqlite.SQLiteException: no such column: _id (code 1): , while compiling: SELECT _id, content FROM exampletable WHERE _id = 4
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
03-15 17:37:48.673: E/AndroidRuntime(794):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1238)
03-15 17:37:48.673: E/AndroidRuntime(794):  at com.example.sqlite.MainActivity.insertButton(MainActivity.java:38)
03-15 17:37:48.673: E/AndroidRuntime(794):  ... 14 more 
```

我的 MainActivity.java：

```
package com.example.sqlite;

import android.app.Activity;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity {

    DBHelper dbhelper = new DBHelper(this);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void insertButton(View view){
        SQLiteDatabase db = dbhelper.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put("content", "Awesome");

        long newRowId = db.insert("exampletable", null, values);

        String[] projection = {"_id", "content"};

        Cursor c = db.query("exampletable", projection, "_id = " + newRowId, null, null, null, null, null);

        c.moveToFirst();

        String content = c.getString(c.getColumnIndex("content"));

        TextView textView = (TextView) findViewById(R.id.textView1);
        textView.setText(content);

    }

} 
```

我的 DBHelper.java：

```
package com.example.sqlite;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DBHelper extends SQLiteOpenHelper {

    public static final int DATABASE_VERSION = 1;
    public static final String DATABASE_NAME = "ExampleDB";

    private String ONCREATE_SQL = "CREATE TABLE exampletable(_id INTEGER PRIMARY KEY AUTOINCREMENT, content TEXT);";

    public DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(ONCREATE_SQL);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

} 
```

我究竟做错了什么？并且是由于初始错误而单击按钮时的错误还是它们是单独的？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:56:05.957

SQL 语句无法执行，因为您的数据库中没有“_id”列。您是否尝试过重新创建表？

**确保正确创建表：**

只需增加您`DATABASE_VERSION`并实施该`onUpgrade`方法：

```
@Override
public void onUpgrade(SQLiteDatabase database) {
    database.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
    onCreate(database);
} 
```

然后在创建数据库表时检查日志是否有任何错误。如果没有，请查看`/data/data/packename`以找到您的 SQLite DB；[将其拉](https://stackoverflow.com/questions/7002085/how-access-existing-sqlite-database-on-android-emulator)入 DDMS 透视图并[检查](http://sqlitebrowser.sourceforge.net/)表是否已成功创建。

# android - android布局覆盖问题

> ID：15438891
> 
> 赞同：0
> 
> 时间：2013-03-15T17:44:48.537
> 
> 标签：android, xml, layout, admob

我是 android 的初学者。我使用 webview 和集成的 admob 广告横幅制作了一个 flash 游戏 android 应用程序，但它覆盖了 webview。我需要它看起来像这张图片[http://i46.tinypic.com/2cosrjp.png](http://i46.tinypic.com/2cosrjp.png) 这是我的代码：

```
 <?xml version="1.0" encoding="utf-8"?>

 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<RelativeLayout
android:id="@+id/lay"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</RelativeLayout>

<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="a1513fab869115a"
    ads:loadAdOnCreate="true"
    ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-11T22:59:55.270

我遇到了相反的错误，我希望我的应用程序显示为您的应用程序，但我无法得到它，我得到了您想要的答案。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="1">

    <com.google.android.gms.ads.AdView android:id="@+id/adView"
        android:layout_width="355dp"
        android:layout_height="wrap_content"
        ads:adUnitId="000000000000000000"
        ads:adSize="BANNER"
        android:layout_gravity="center_horizontal|bottom" />

    <WebView
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:id="@+id/tropas"
        android:layout_weight="1.01" />

</LinearLayout> 
```

这是我的代码并在顶部显示 Aadmob 不覆盖 webview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:51:30.480

Even though RelativeLayout might be the first choice for many use cases, for this simple view I would use a [LinearLayout](http://developer.android.com/guide/topics/ui/layout/linear.html), that's much easier.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:52:00.507

`android:layout_below="+id/lay"`在你的 webView 视图中添加

```
<RelativeLayout
android:id="@+id/lay"
android:layout_below="@+id/adView"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</RelativeLayout> 
```

添加`android:layout_alignParentTop="true"`广告视图

```
<com.google.ads.AdView
android:id="@+id/adView"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
ads:adSize="BANNER"
ads:adUnitId="a1513fab869115a"
ads:loadAdOnCreate="true"
ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID" /> 
```

# regex - 正则表达式搜索文本文件中的多行字段

> ID：15438893
> 
> 赞同：1
> 
> 时间：2013-03-15T17:44:57.473
> 
> 标签：regex, search, vim, notepad++

我有一个日志文本文件。在其中我有兴趣使用一些正则表达式搜索字段（我在 Win 上使用 notepad++，但甚至在 Ubuntu 上使用 vim 来解析/读取这个日志文本文件，所以任何一个都可以）

文本文件具有如下条目。

```
src.type= DEVICE_1     <-- there is a space and then a newline char after the last letter which is 1
dst.type= ZONE_1
someparam1

src.type= DEVICE_1 
dst.type= ZONE_2
someparam2 
```

此类条目在日志文本文件中不断重复。

我有兴趣找到其中包含 DEVICE_1 的那些行，但仅适用于那些在其后具有 dst.type= ZONE_2 的行，即

我打算找

```
src.type= DEVICE_1 
dst.type= ZONE_2 
```

但不是

```
src.type= DEVICE_1
dst.type= ZONE_1 
```

Notepad++ 允许使用关键字作为正则表达式进行搜索。我可以获得一个有效的正则表达式或任何其他方式（不一定涉及正则表达式）来找到我在文本文件中寻找的此类事件。

我在notepad ++搜索中尝试使用正则表达式但没有成功：

```
src.type= DEVICE_1 \ndst.type= ZONE_2 
```

还尝试了`[ ]`字符类。

如何搜索我要查找的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:33:47.893

在 Vim 中，以下模式似乎符合您的要求：

```
DEVICE_1\s*\n.*ZONE_2 
```

用于`/DEVICE_1\s*\n.*ZONE_2`跳转到下一场比赛。

用于在每场比赛`:g/DEVICE_1\s*\n.*ZONE_2/command`中执行。`command`

用于`:vim DEVICE_1\s*\n.*ZONE_2 % | cw`列出 quicfix 窗口中的所有匹配项。

请注意，您可以轻松地重用最新的搜索模式`//`。这是一种常见的策略来处理您的搜索模式`/foo`，一旦您感到满意，请执行如下替换：

```
:%s//bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:54:20.967

在 Notepad++ 中，使用以下正则表达式，启用“.matches newlines”复选框：

```
src.type= DEVICE_1\s+dst.type= ZONE_2 
```

![在此处输入图像描述](../Images/f61992807970107c6c24d5473394b2ba.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T01:18:19.817

你去Vim：

```
/^\zssrc.type= DEVICE_1\ze\_.\{2,2}\_^dst.type= ZONE_2$/ 
```

重要表达式的分解：

1.  `\zs`- 从这里开始比赛（将从这里突出显示）；
2.  `\ze`- 在此处结束比赛（将在此处突出显示）；
3.  `\_.`- 与 相同`.`，但也包括新行；
4.  `\_^`-like `^`, but`\_`是必需的，因为我们正处于正则表达式的中间。

对于其他人，我建议您参考 Vim 的文档。

# ruby-on-rails - Ruby on Rails - nil:NilClass 的未定义方法“pods”

> ID：15438896
> 
> 赞同：0
> 
> 时间：2013-03-15T17:45:05.123
> 
> 标签：ruby-on-rails

我是开发新手，也是 Rails 新手。

我有 2 个资源项目和 Pod。//Pods 就像子项目

-----config/routes.rb------

```
 resources :projects
  resources :pods 
```

------模型/project.rb------

```
 class Project < ActiveRecord::Base
      attr_accessible :description, :name

      **has_many :pods, dependent: :destroy**

      before_save { |project| project.name = name.upcase }

      validates :name, presence: true, length: { maximum: 50 }, uniqueness: { case_sensitive: false }
      validates :description, presence: true
    end 
```

------模型/pod.rb------

```
 class Pod < ActiveRecord::Base
      attr_accessible :description, :name

      belongs_to :project

      before_save { |pod| pod.name = name.upcase }

     validates :name, presence: true, length: { maximum: 50 }, uniqueness: { case_sensitive: false }
      validates :description, presence: true
      validates :project_id, presence: true

      default_scope order: 'pods.created_at DESC'
    end 
```

* * *

在项目视图中，我有一个创建 pod 的链接

```
<p> <%= link_to "Create new Pod", new_pod_path(project: @project.id) %></p> 
```

在这里，我将项目 ID 发送到 new_pod_path，以便在创建 pod 时，它可以与这个特定项目相关联。

------Pod 控制器-----

```
def new
  @project = Project.find_by_id(params[:project])
  @pod = Pod.new
end

def create
  @pod = @project.pods.build(params[:pod])
    if @pod.save
      flash[:success] = "Congratulaions! You have created a new pod."
      redirect_to @pod
    else
      render 'new'
    end
  end 
```

=======================

当我单击“创建新 pod”链接时，会显示表单并在调试参数中看到

```
project: '1'
action: new
controller: pods 
```

我填写详细信息并单击提交，我收到以下错误

```
NoMethodError in PodsController#create

undefined method `pods' for nil:NilClass 
```

我不确定这里发生了什么。我现在不想拥有嵌套资源，因为 pod 将拥有测试套件，然后测试套件将拥有测试用例。

任何帮助将不胜感激

====================================== 编辑----

我不知道出了什么问题。让我说得更清楚。我有一个项目展示页面，其中包含带有项目 ID 的 new_pod_path ----"

<%= link_to "创建新 Pod", new_pod_path(project_id: @project.id) %>

" ---------- 这将在 pod 控制器中执行新操作.. 我的代码为 -----

```
 def new
    @project = Project.find(params[:project_id])
    @pod = Pod.new
  end 
```

我是否需要在新的行动中找到项目？

new 的 pod 视图：

```
 <%= f.hidden_field  :project_id, value: @project.id %> 
```

//我从新方法中猜测，视图将能够看到@project.id，并将上述代码包含在新操作中以查找项目是有意义的 //如果我错了请纠正我------- -

然后我进行创建--------

```
 def create
        @project = Project.find_by_id(params[:project_id])
        @pod = @project.pods.build(name: params[:name], description: params[:description])
        if @pod.save ... 
```

我不知道发生了什么事。例如，如果您能告诉我流程——项目显示页面——调用 new_pod_path 并在参数中使用项目 ID。新的 pod 操作采用该 id 并找到项目或以某种方式使其以新的 pod 形式可用。新的 pod 表单使用 taht id 并作为 hidden_​​field 传递.. 然后创建操作通过参数获取隐藏字段并找到项目并创建 project.pods.build(... 我真的很感激

------------- 服务器日志 ------------- 似乎只有项目 id 有问题 ---------- Started POST "/pods " for 127.0.0.1 at 2013-03-15 17:55:56 -0700 由 PodsController#create 作为 HTML 参数处理：{"utf8"=>"✓", "authenticity_token"=>"fXCOH0kUgHHVtrH79d4VCrHWJakdGQ8cKQmiJlE0OV4=", "pod" =>{"project_id"=>"1", "name"=>"sdf", "description"=>"df"}, "commit"=>"Create new pod"} 用户负载 (0.4ms) SELECT " users".* FROM "users" WHERE "users"."remember_token" = '70InmWq61iFCnjzuxhBP6g' LIMIT 1 Project Load (0.2ms) SELECT "projects".* FROM "projects" WHERE "projects"."id"IS NULL LIMIT 1 Completed 500 Internal Server Error in 4ms

NoMethodError（未定义的方法`pods' for nil:NilClass): app/controllers/pods_controller.rb:23:in`创建'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:49:45.900

in create you are missing

```
@project = Project.find(params[:project]) 
```

Make sure the `project_id` is in params key `:project`

On requests the view variables `@` need to be recreated.

Edit:

How are you putting the project_id in the params hash it looks wrong (`project_id"=>{"1"=>""},`) (to get that id you do `params[:project_id].first.key`, but that's ugly)

If you do like codeit suggested,

```
<%= hidden_field 'project', @project.id %> <!--@project initialized in new --> 
```

Or you can do

```
<%= hidden_field 'project', params[:project] %> <!--params[:project] coming from the new request --> 
```

Then `params[:project]` will give you the id 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:14:18.770

您的实例变量`@pod`为零，这意味着您的方法将引发异常。你必须先完成你`@pod`的某事，然后才能使用它的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:02:37.323

使用`hidden_field_tag`形式`new pod`：

```
<%= hidden_field_tag 'project_id', @project.id %>   #Add this line in new pod form 
```

控制器变化：

```
def create
  @project = Project.find(params[:project_id])
  @pod = @project.pods.build(params[:pod])
  if @pod.save
    flash[:success] = "Congratulaions! You have created a new pod."
    redirect_to @pod
  else
    render 'new'
  end
end 
```

# ruby-on-rails - 是否有将图像上传到 heroku 的最佳目录？

> ID：15438897
> 
> 赞同：0
> 
> 时间：2013-03-15T17:45:06.887
> 
> 标签：ruby-on-rails, ruby, heroku, carrierwave

我正在使用carrierwave，我想更改存储图像的目录。

现在图像 URL 是 /uploads/modelname/image/51/nameofile.jpg

ImageUploader 中的 store_dir 是

```
def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end 
```

我绝对不希望显示模型名称是否有一个公认的理想路径，图像应该存储在 heroku 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:47:17.793

Heroku 不允许上传到他们的服务器。您需要使用另一种存储介质，例如 Amazon 的 S3。

我实际上使用 Parse 的 (www.parse.com) API 将图像存储在他们的解决方案中。但这取决于您需要如何访问您的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:25:16.560

您可以将文件上传到 Heroku dyno 文件系统，但文件系统是易腐烂的，并且不会在您的 dyno 之间共享。这是一个要点，展示了如何在 AWS S3 中制作 Carrierwave 存储上传的文件，这是一个更好的选择：[https ://gist.github.com/cblunt/1303386](https://gist.github.com/cblunt/1303386)

这是使用 PaperClip 完成此任务的 Heroku 指南：[https ://devcenter.heroku.com/articles/paperclip-s3](https://devcenter.heroku.com/articles/paperclip-s3)

# vbscript - 显示 vbs 脚本的日志记录

> ID：15438904
> 
> 赞同：0
> 
> 时间：2013-03-15T17:45:19.390
> 
> 标签：vbscript, uninstallation

我有一个用于卸载应用程序的脚本

```
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" _
    & strComputer & "\root\cimv2")
Set colSoftware = objWMIService.ExecQuery _
  ("Select * from Win32_Product " _
      & "Where Name = 'Personnel database'")
For Each objSoftware in colSoftware
  Wscript.Echo "Name: " & objSoftware.Name
  Wscript.Echo "Version: " & objSoftware.Version
    objSoftware.Uninstall()
Next 
```

问题是我不知道是否

1.  已开始运行或已完成

2.  卸载已完成

3.  已完成

有没有办法在日志文件或控制台中显示这一点。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:15:36.113

[`Uninstall`](http://msdn.microsoft.com/en-us/library/aa393941)当返回代码为 0时，卸载已完成。不过，让您的脚本记录某些内容完全取决于您。您可以将内容写入日志文件或事件日志，`MsgBox`向控制台显示或写入文本（使用 运行时`cscript.exe`）。

前段时间我写了[这个](http://www.planetcobalt.net/sdb/clogger.shtml)来简化处理（如果你能原谅这个无耻的插件）。你可以像这样使用它：

```
'insert class code here

Set clog = New CLogger
clog.LogToConsole = False
clog.LogFile = "C:\path\to\your.log"
clog.IncludeTimestamp = True

clog.Log "Starting"

'...

For Each objSoftware in colSoftware
  clog.Log "Uninstalling " & objSoftware.Name & " (v" & objSoftware.Version & ")"
  rc = objSoftware.Uninstall()
  If rc = 0 Then
    clog.Log "Uninstall complete"
  Else
    clog.LogError "An error occurred: " & rc
  End If
Next
clog.Log "Finished" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:54:33.893

你总是可以将 msgbox 放在你的 for each 循环中的脚本中

```
 MsgBox("Uninstalling " + objSoftware.Name) 
```

或者你可以在你的每个循环中做一个简单的

```
 Wscript.Echo "Uninstalling " + objSoftware.Name 
```

只需从打开的管理员命令提示符窗口运行您的 vbs

```
 wscript uninstallfile.vbs 
```

这将显示在您的命令控制台中。

# jquery - 使用 jquery 显示 ajax 响应

> ID：15438907
> 
> 赞同：6
> 
> 时间：2013-03-15T17:45:30.153
> 
> 标签：jquery, ajax, coldfusion, coldfusion-9

我有一个 Coldfusion cfc 可以查询数据库中的数据。我想调用该 cfc 并在 div 中显示 ajax 响应。最终我想用html格式化响应。目前我无法显示响应。这就是我到目前为止所拥有的。

这是cfc：**Asset.cfc**

```
<cffunction name="Asset" access="remote" returntype="array">
        <cfargument name="asset_id" type="string" required="yes">

         <!--- Define the local scope. --->
          <cfset var LOCAL = {} />    
          <cfset var qPics = "" />
          <cfset var result = arrayNew(1) />
          <cfset var PicStruct  = '' />

        <cfquery name="Pics">
        SELECT DISTINCT aq.ID
        FROM AAssignment a 
        INNER JOIN Assets aq ON aq.ID = a.Asset
        WHERE a.AssetItem = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.assetgrp_id#">                
        </cfquery>

         <cfloop query="Pics">
            <cfset PicStruct = StructNew() />
            <cfset PicStruct["value"] = ID />
            <cfset ArrayAppend(result,PicStruct) />
          </cfloop>

        <cfset myResult="#result#">
        <cfreturn myResult>
    </cffunction> 
```

这是jquery

```
 <script>
    var caseid = <cfoutput>'#URL.ID#'</cfoutput>

    $.ajax({
          type:'GET',
          url:'Asset.cfc?method=Asset&returnformat=json',
          dataType: "json",
          data: {
              asset_id:     caseid,
            },
          success:function(data) {
            if(data) {   // DO SOMETHING     
                $('#picoutput').html(data);
            } else { // DO SOMETHING }
          }
        }
       });
    </script>

<div id="picoutput"></div> 
```

现在我从 Firebug 中的 cfc 得到这个响应。

```
[{"value":"3277C2B9-155D-D714-40143A59A8290252"}] 
```

但是它不会显示在 div 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T17:47:58.510

使用数据.值

```
 success:function(data) {
    if(data) {   // DO SOMETHING     
        $('#picoutput').html(data[0].value);
    } else { // DO SOMETHING }
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T17:49:58.087

use datatype as HTML if you are sending response as html

```
$.ajax({
      type:'GET',
      url:'Asset.cfc?method=Asset&returnformat=json',
      dataType: "html",  //<---- here
      data: {
          asset_id:     caseid,
        },
      success:function(data) {
        if(data) {   // DO SOMETHING     
            $('#picoutput').html(data);
        } else { // DO SOMETHING }
      }
    }
   }); 
```

# symfony - HWIOAuthBundle 自定义服务提供者参数

> ID：15438908
> 
> 赞同：1
> 
> 时间：2013-03-15T17:45:31.183
> 
> 标签：symfony, service, oauth, fosuserbundle, hwioauthbundle

我正在尝试设置`HWIOAuthBundle`与`FOSUserBundle`.

在制作自己的扩展用户提供程序时`FOSUBUserProvider`，我执行了以下操作：

```
namespace Naroga\Reader\CommonBundle\Service\Security;

use HWI\Bundle\OAuthBundle\Security\Core\User\FOSUBUserProvider;
use HWI\Bundle\OAuthBundle\OAuth\Response\UserResponseInterface;

class NarogaUserProvider extends FOSUBUserProvider {

    public function loadUserByOAuthUserResponse(UserResponseInterface $response) {

        [...]

    }

} 
```

我的 services.yml 如下：

```
naroga.reader.common.security.user_provider:
    class: Naroga\Reader\CommonBundle\Service\Security\NarogaUserProvider
    arguments: [ @fos_user.user_manager ] 
```

每当我运行程序时，我都会收到以下错误：

`Argument 2 passed to HWI\Bundle\OAuthBundle\Security\Core\User\FOSUBUserProvider::__construct() must be of the type array, none given, called in`

这很有意义，因为`FOSUBUserProvider::__construct`' 的签名是`public function __construct(UserManagerInterface $userManager, array $properties)`.

我不知道将什么定义为我的服务的第二个参数，以便它可以覆盖`FOSUBUserProvider`. 我一直在谷歌上搜索它，我发现的只是人们有同样的问题，没有答案。

我将永远感谢温柔的灵魂告诉我第二个参数必须是什么才能符合 FOSUBUserProvider 的签名。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:37:34.717

第二个参数用于映射。据我了解，这是您实体中对应 OAuth 服务的名称和字段名称。

例如，您可以按如下方式发送它们：

```
naroga.reader.common.security.user_provider:
    class: Naroga\Reader\CommonBundle\Service\Security\NarogaUserProvider
    arguments: [ @fos_user.user_manager, { facebook: facebookId, twitter: twitterId } ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-13T19:53:18.937

如果您还想传递一些额外的参数，假设使用调度程序触发一个事件，这是我的情况，只需覆盖构造函数。

```
use HWI\Bundle\OAuthBundle\Security\Core\User\FOSUBUserProvider as BaseClass;

FOSUBUserProvider extends BaseClass
{
    /**
     * @var EventDispatcherInterface
     */
    private $eventDispatcher;

    /**
     * Constructor.
     *
     * @param UserManagerInterface $userManager FOSUB user provider.
     * @param array $properties Property mapping.
     * @param EventDispatcherInterface $eventDispatcher
     */
    public function __construct(
        UserManagerInterface $userManager,
        array $properties,
        EventDispatcherInterface $eventDispatcher)
    {
        $this->userManager     = $userManager;
        $this->properties      = array_merge($this->properties, $properties);
        $this->accessor        = PropertyAccess::createPropertyAccessor();
        $this->eventDispatcher = $eventDispatcher;
    } 
```

以及服务定义：

```
tb_user_provider:
    class: "%tb_user_provider.class%"
    arguments: [@fos_user.user_manager, { facebook: facebook_id }, @event_dispatcher] 
```

# git - 克隆存储库和 refspecs

> ID：15438909
> 
> 赞同：1
> 
> 时间：2013-03-15T17:45:31.917
> 
> 标签：git

我一直在使用 refspecs 来跟踪我们的软件，我有点困惑。我创建的 refspecs 在我们的主存储库中，因为我可以获取它们，就像这样

```
git fetch origin '+refs/magic/*:refs/magic/*' 
```

但是当我克隆存储库时它们不会被获取。我在手册页中找不到任何内容来指示我如何做到这一点。

我想克隆一个存储库，好吧，克隆它。那么我真的需要在克隆后进行提取，还是我缺少一些命令行参数来克隆？（如果是这样，是什么？）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T21:04:45.830

你试过这个`--mirror`论点`git clone`吗？

> --mirror 设置源存储库的镜像。这意味着 --bare。与 --bare 相比，--mirror 不仅将源的本地分支映射到目标的本地分支，它还映射所有 refs（包括远程跟踪分支、注释等）并设置 refspec 配置，以便所有这些 refs被目标存储库中的 git 远程更新覆盖。

# mysql - 通过一次数据库调用，在产品列表中获取每个产品的评级和类别数量

> ID：15438911
> 
> 赞同：1
> 
> 时间：2013-03-15T17:45:48.263
> 
> 标签：mysql, join, count, group-by

我有 4 个表：1 个项目表、1 个类别表、1 个 item_to_category 表和一个包含每个项目评论的评论表。

一个项目可以属于许多类别。

我想得到一个 PHP 数组，其中列出了每个项目、项目所在的类别以及项目的评论数量。

这可以使用单个数据库调用吗？

这个查询

```
 $q = 'SELECT `items`.`id` as item_id, `category`.`id` as category_id, COUNT(`review_id`) AS review_count
    FROM  `items`
    JOIN  `item_to_category` ON  `item_to_category`.`item_id` =  `items`.`id`
    JOIN  `category` ON  `category`.`id` =  `item_to_category`.`id`
    JOIN  `reviews` ON `items`.`id` = `reviews`.`item_id`
    WHERE `items`.`type` = 3
    GROUP BY `items`.`id` 
```

返回这样的一行：

```
item_id    category_id    review_count
1          CAT1           4
2          CAT3           2 
```

问题是，我的评论计数乘以项目所在的类别数，但查询只返回一个类别。

任何人都可以帮忙吗？

我基本上希望我的 php 数组像：

```
array(
    [0] => array(
        "item_id"=1,
        "categories"=>array("CAT1","CAT3"),
        "review_count"=>2
     )
    [1] => etc
) 
```

补充：我遵循了 Mike Brant 的建议，这是一个改进，但它不能 100% 正确工作。查询的输出是这样的：

```
item_id    category_id            review_count
1          CAT1,CAT2,CAT2,CAT1    4   <--- Incorrect number of reviews. Actual number is 2
2          CAT3,CAT3              2   <--- Correct number of reviews.
3          CAT1,CAT1,CAT1         3   <--- Correct number of reviews. 
```

所以基本上，只有当项目属于 1 个类别时，返回的评论数量才是正确的。返回的类别几乎是正确的，但它们与实际评论数量重复。

如果我删除评论表上的 JOIN，我会得到 100% 正确的类别，如果我删除类别上的 JOIN，我会得到 100% 的评论计数。

谁能解释这里发生了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:55:08.633

您可能希望利用 MySQL 中的 GROUP_CONCAT 功能来执行此操作

```
SELECT `items`.`id` as item_id, GROUP_CONCAT(DISTINCT `category`.`id`) as categories, COUNT(DISTINCT `reviews`.`review_id`) AS review_count
FROM  `items`
JOIN  `item_to_category` ON  `item_to_category`.`item_id` =  `items`.`id`
JOIN  `category` ON  `category`.`id` =  `item_to_category`.`id`
JOIN  `reviews` ON `items`.`id` = `reviews`.`item_id`
WHERE `items`.`type` = 3
GROUP BY `items`.`id` 
```

这将使您的结果集看起来像

```
item_id    category_id    review_count
1          CAT1,CAT2      4
2          CAT3,CAT4      2 
```

然后，当您遍历结果集时，您可以通过 将 GROUP_CONCAT 值转换为数组`explode()`。

IE

```
$result_array = array();
while($row = [WHATEVER YOUR DB FUNCTION IS HERE]) {
    $row['categories'] = explode(',', $row['categories']);
    $result_array = $row;
} 
```

**更新：**

我看到您遇到的类别 ID 和评论计数重复的问题。我已经更新了上面的查询以利用`DISTINCT`关键字，这应该可以解决问题。

# python - python中的实时时间计时器

> ID：15438914
> 
> 赞同：0
> 
> 时间：2013-03-15T17:45:57.940
> 
> 标签：python, time, clock, ticker

我想在 python 中实时获取时间记录器。这里的想法是我一次又一次地执行一组函数，但我想在再次执行之前给出 10 分钟的时间间隔。例如：

现在我这样做

```
lst = [1,2,3,4,5]

while lst:

    do something
    lst.pop(0)
    time.sleep(600) 
```

这将等待 10 分钟，然后再次循环。

我想实时打印，剩下的几秒钟可以再次开始循环。即我想打印

等待 600 秒
等待 500 秒，依此类推。

最好的办法是只更改每秒不打印“等待”的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:55:53.217

您可以使用这样的函数来打印倒计时：

```
>>> def countdown(seconds):
...     while seconds:
...         sys.stdout.write("\rsleeping for {0}".format(seconds))
...         seconds -= 1
...         time.sleep(1) 
```

（该`\r`字符是没有换行符的回车 - 每次执行输出文本的行时，它都会覆盖之前的内容。）因此您的代码看起来更像：

```
while lst:

    # do something
    lst.pop(0)
    countdown(600) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:53:11.257

首先，我认为你必须在一个单独的线程中做一个代码，然后在另一个线程中输入“做某事”。要更新刻度，您可以使用 Clock.tick。

# git - git diff 按文件名过滤

> ID：15438915
> 
> 赞同：24
> 
> 时间：2013-03-15T17:46:00.167
> 
> 标签：git, bash, git-diff, git-bash

我希望`git diff`按文件名过滤结果。

特别是，我想要所有名为“AssemblyInfo.cs”但位于 git 存储库中任何位置的文件的差异。

我在 Cygwin 上使用 git，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-08-28T00:31:11.783

最简单的方法是简单地使用通配符：

```
git diff -- '*AssemblyInfo.cs' 
```

至少这适用于我的 Git v1.8.4、bash 3.2 和 zsh 5.7。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-15T18:09:48.517

文件参数`git diff`需要被分隔`--`- 试试这个：

```
find . -name <pattern> | xargs git diff -- 
```

xargs 确保正确处理空格、制表符、换行符等。

您可以`--name-status`使用`git diff`. 你也可以试试：

```
git diff --name-only | grep <pattern> 
```

[编辑] 尝试：

```
git diff --name-status -- `find . -name '<pattern>'`
ebg@taiyo(98)$ git diff --name-status -- `find . -name '*.scm'`
M       scheme/base/boolean.scm
M       surf/compiler/common.scm
M       surf/compiler/compile.scm
M       surf/compiler/expand.scm 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-23T01:43:04.980

可能最简单的选择是使用：

```
git diff "*/*AssemlyInfo.cs" 
```

从 git 2.20.1 开始工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-06T23:15:28.310

While [the answer given by GoZoner](https://stackoverflow.com/a/15439340/1347968) works for some (hundred?) files, it executes `git diff` multiple times (in the case of `xargs`) or fails (in the case of `git diff … -- `find …``) if there is a large number of files to diff. This might be a problem or not, depending on your use case.

A possible solution is to create a commit containing only changes to files of interest and diff the commits. Based on [an answer on unstaging files matching some pattern](https://stackoverflow.com/a/4228119/1347968) I came up with this solution:

```
git co <new_branch> --detach
git reset --soft <old_branch> 
```

Now `git status --porcelain | grep <pattern>` shows all files that should be compared. All other files can be listed by passing `-v` to `grep`, i.e. `git status --porcelain | grep -v <pattern>`. This files need to be reset to the state of `<old_branch>`:

```
# Remove the destination of renamed and copied files not matching <pattern>
git status --porcelain | grep -v <pattern> | grep '^R \|^C ' | sed 's/.* -> //' | xargs git rm -f --
# Remove added files not matching <pattern>
git status --porcelain | grep -v <pattern> | grep '^A ' | cut -c 4- | xargs git rm -f --
# Restore deleted files not matching <pattern>
git status --porcelain | grep -v <pattern> | grep '^M \|^D ' | cut -c 4- | xargs git checkout HEAD -- 
```

(Note that using `xargs` is not a problem in this case, as calling `git rm` and `git checkout` multiple times is ok.)

Now the index (and working copy) only contains changes to the files matched by `<pattern>`. The next thing to do is to commit this changes:

```
git commit -m "Changes between <old_branch> and <new_branch> in files matching <pattern>" 
```

That's it! Now we can use `git diff` as usual:

```
git diff HEAD^..HEAD 
```

You can use all options or arguments you like.

Note: This solution is not tested extensively and may fail e.g. on files with special characters or other special cases… Suggestions to improve the solution are welcome ;-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T17:49:53.613

You can use [pipeline](http://en.wikipedia.org/wiki/Pipeline_%28Unix%29)

```
find . -name AssemblyInfo.cs | git diff 
```

Use `find` to filter all the files named "AssemblyInfo.cs", then use the output as the parameter of `git diff`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-23T13:04:31.477

```
find . -iregex AssemblyInfo\.cs -exec git diff {} + 
```

你可以`AssemblyInfo\.cs`用你的正则表达式替换。

# jakarta-ee - 如何将 WAS 8 联合回购 LDAP 组绑定到应用程序？

> ID：15438922
> 
> 赞同：1
> 
> 时间：2013-03-15T17:46:27.443
> 
> 标签：jakarta-ee, websphere, java-ee-6, ear, websphere-8

我在 WAS v8.0.0.5 中使用联合存储库。该联合存储库包含一个 JDBC 存储库、3 个 Active Directory LDAP 存储库和一个基于文件的存储库。存储库被设置为一个领域和域，供 Java EE 6 企业应用程序使用。我正在实现 Java EE 6 安全性，特别是 Servlet Spec 3.0 身份验证。

在应用程序中，我可以从所有存储库中登录并验证用户身份，但是我无法获取除 JDBC 存储库之外的所有存储库的用户角色。具体来说，我的意思是使用Servelet Spec 3.0 的request.isUserInRole()。正确的组和用户出现在 WAS 的管理控制台 (VMM) 中。我正在通过 .ear 项目的 ibm-application-bnd.xml 将组映射到应用程序角色。我检查了映射的拼写/空格。一切都是正确的。我也检查了 .war 项目的 web.xml 是否有任何拼写错误。一切看起来都很好。由于 JDBC 存储库可以正常工作，因此我将其 .ear 和 .war 角色到组映射与 LDAP 映射进行了比较。

我发现如果我将特定用户映射到 ibm-application-bnd.xml 中用于 LDAP 存储库的组，则可以确认用户的角色。这表明我的 Active Directory 用户和组之间的映射配置有问题。

就配置而言，我将讨论 LDAP 存储库中的 1 个：
我在 LDAP 实体类型中定义了组，映射到对象类组；groupOfNames；groupOfUniqueNames （我认为组只是需要，但我一直在尝试任何可以解决这个问题的方法）。
PersonAccount 映射到对象类用户。
出于绝望，我还创建了一个名为 memberOf 的 Supported LDAP 属性，并将其映射到 PersonAccount 实体类型。
至于组属性定义，我将“组成员属性的名称”设置为“memberof”，并指定了“Direct”的范围。我还尝试了“memberOf”，它没有改变任何东西。

使用 Apache Directory Studio 浏览 Active Directory，我可以确认用户和组是我正在寻找的两个对象类。

有人可以解释一下我的配置有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:45:57.390

我花了一段时间，但我终于弄明白了！

我需要在 ibm-application-bnd.xml 的组标签中声明一个 access-id 属性。

在 WAS 管理控制台中，点击 Security --> Security domain --> Your domain --> Expand User Realm (Customize for this domain 应该被选中) --> 然后点击 Manage users，你会看到一个列表您的所有组，无论它们是来自 JDBC 自定义用户注册表、LDAP 存储库还是平面文件存储库的组。

您想为 LDAP 存储库使用唯一名称字段。复制该名称，然后将其粘贴到您的 ibm-application-bnd.xml 中，如下所示：

```
<security-role name="ADMIN">
    <group name="SomeArbitraryGroupName" access-id="group:yourRealm/CN=SomeArbitraryGroupName,OU=Groups,OU=SomeDivision,OU=SomeLocatoin,o=distinguishedNameOfABaseEntry"/>
</security-role> 
```

如果有更好的方法来完成这项任务，那就太好了。否则，我希望这篇文章能帮助其他人通过 IBM 对该主题的混淆、缺失和/或分散的文档进行清理。

# c# - 实体框架按组跳过

> ID：15438928
> 
> 赞同：11
> 
> 时间：2013-03-15T17:47:00.423
> 
> 标签：c#, linq, group-by

我目前正在通过一个表（“Table1”）“分页”，该表具有以下字段 { Policy、Name、Amount、Date}，并且“Table1”中可以有多个记录用于策略，如下所示：

```
return context.Table1s.Orderby(i => i.Policy)
                      .Skip(endingRecord).Take(page)
                      .ToList(); 
```

如果我想首先按策略分组，然后跳过并采用不同的策略（基本上是试图确保“页面”包含页面中包含的策略的所有记录），我该怎么做？

我正在使用 C#、实体框架，如果可能的话，我更喜欢“lambda”语法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T18:00:49.977

```
return context.Table1s.GroupBy(i => i.Policy)
                      .Select(g => g.First())
                      .Orderby(i => i.Policy)
                      .Skip(endingRecord).Take(page)
                      .ToList(); 
```

这会生成这样的 SQL（来自 LinqPad 的 Linq to SQL 示例）：

```
SELECT [t4].[test], [t4].[Name], [t4].[Policy], [t4].[Amount], [t4].[Date]
FROM (
    SELECT ROW_NUMBER() OVER (ORDER BY [t3].[Policy]) AS [ROW_NUMBER], [t3].[test], [t3].[Name], [t3].[Policy], [t3].[Amount], [t3].[Date]
    FROM (
        SELECT [t0].[Policy]
        FROM Table1s AS [t0]
        GROUP BY [t0].[Policy]
        ) AS [t1]
    OUTER APPLY (
        SELECT TOP (1) 1 AS [test], [t2].[Name], [t2].[Policy], [t2].[Amount], [t2].[Date]
        FROM Table1s AS [t2]
        WHERE (([t1].[Policy] IS NULL) AND ([t2].[Policy] IS NULL)) OR (([t1].[Policy] IS NOT NULL) AND ([t2].[Policy] IS NOT NULL) AND ([t1].[Policy] = [t2].[Policy]))
        ) AS [t3]
    ) AS [t4]
WHERE [t4].[ROW_NUMBER] BETWEEN @p0 + 1 AND @p0 + @p1
ORDER BY [t4].[ROW_NUMBER] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:51:22.373

以下给了我想要的结果

```
 return context.Tables1
                .Where(i =>
                    context.Tables1
                    .GroupBy(t => t.Policy)
                    .OrderBy(t => t.Key)
                    .Skip(previousRecordCount).Take(page)
                    .Select(t => t.Key)
                    .Contains(i.Policy))
                    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:54:42.213

您可以使用`SkipWhile`and`TakeWhile`方法，但您需要将其分开如下：

```
var policyStart = context.Table1s.Orderby(i => i.Policy).ToList().SkipWhile(i => i.Policy == endingRecord.Policy);
var firstPolicy = policyStart.FirstOrDefault().Policy;
return policyStart.TakeWhile(i => i.Policy == firstPolicy).ToList(); 
```

# ios - 不知道如何使用从 Web 服务返回的 JSON 数据

> ID：15438930
> 
> 赞同：0
> 
> 时间：2013-03-15T17:47:04.317
> 
> 标签：ios, web-services, asp.net-web-api

抱歉，如果这不是正确的论坛，我想不出其他任何地方来回答我的问题！

我正在尝试使用以下网址获取某个位置的最新天气预报[http://datapoint.metoffice.gov.uk/public/data/val/wxobs/all/json/354379?res=hourly&key=47fbc7c3- dac4-424a-874d-7c8ff5b45b79](http://datapoint.metoffice.gov.uk/public/data/val/wxobs/all/json/354379?res=hourly&key=47fbc7c3-dac4-424a-874d-7c8ff5b45b79)

我想获取天气类型。[这里](http://www.metoffice.gov.uk/datapoint/product/uk-hourly-site-specific-observations)的文档说 Weather Type 将是来自`0-30`. 然而，来自 Web 服务的响应（您可以按照上面的长超链接自己查看）是这样的：

```
{"SiteRep":{"Wx":{"Param":[{"name":"G","units":"mph","$":"Wind Gust"},{"name":"T","units":"C","$":"Temperature"},{"name":"V","units":"m","$":"Visibility"},{"name":"D","units":"compass","$":"Wind Direction"},{"name":"S","units":"mph","$":"Wind Speed"},{"name":"W","units":"","$":"Weather Type"},{"name":"P","units":"hpa","$":"Pressure"}]},"DV":{"dataDate":"2013-03-15T17:00:00Z","type":"Obs"}}} 
```

现在我可以毫不费力地将这些信息读入我的 IOS 应用程序中的 NSDictionary 对象中。但我只是看不到哪个位包含 0-30 的代码编号！

如果您想知道我是否使用了正确的请求 url，我很确定我是，我从[这里的文档中得到它。](http://www.metoffice.gov.uk/datapoint/product/uk-hourly-site-specific-observations/detailed-documentation)（向下滚动一点。）

我只是对如何提取天气类型代码感到困惑。我可能把自己完全弄糊涂了，并且提出了错误的要求，他们的文档对用户不是很友好。作为一个新手，我在使用这项服务时确实需要帮助，但我在谷歌上找不到任何教程。真的很感谢任何花时间看的人！获得第二意见会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:35:49.250

实际上你得到的回复是不完整的......完整的回复如下

```
{
"SiteRep": {
    "Wx": {
        "Param": [
            {
                "name": "G",
                "units": "mph",
                "$": "Wind Gust"
            },
            {
                "name": "T",
                "units": "C",
                "$": "Temperature"
            },
            {
                "name": "V",
                "units": "m",
                "$": "Visibility"
            },
            {
                "name": "D",
                "units": "compass",
                "$": "Wind Direction"
            },
            {
                "name": "S",
                "units": "mph",
                "$": "Wind Speed"
            },
            {
                "name": "W",
                "units": "",
                "$": "Weather Type"
            },
            {
                "name": "P",
                "units": "hpa",
                "$": "Pressure"
            }
        ]
    },
    "DV": {
        "dataDate": "2012-12-10T13:00:00Z",
        "type": "Obs",
        "Location": {
            "i": "3772",
            "lat": "51.479",
            "lon": "-0.449",
            "name": "HEATHROW",
            "country": "ENGLAND",
            "continent": "EUROPE",
            "Period": [
                {
                    "type": "Day",
                    "value": "2012-12-09Z",
                    "Rep": [
                        {
                            "D": "W",
                            "P": "1016",
                            "S": "14",
                            "T": "9.0",
                            "V": "40000",
                            "W": "7",
                            "$": "840"
                        },
                        {
                            "D": "W",
                            "P": "1016",
                            "S": "14",
                            "T": "9.0",
                            "V": "40000",
                            "W": "7",
                            "$": "900"
                        },
                        {
                            "D": "W",
                            "P": "1016",
                            "S": "10",
                            "T": "8.6",
                            "V": "45000",
                            "W": "7",
                            "$": "960"
                        },
                        {
                            "D": "W",
                            "P": "1016",
                            "S": "10",
                            "T": "8.2",
                            "V": "40000",
                            "W": "7",
                            "$": "1020"
                        },
                        {
                            "D": "WNW",
                            "P": "1016",
                            "S": "9",
                            "T": "7.9",
                            "V": "40000",
                            "W": "7",
                            "$": "1080"
                        },
                        {
                            "D": "WNW",
                            "P": "1016",
                            "S": "10",
                            "T": "7.1",
                            "V": "30000",
                            "W": "0",
                            "$": "1140"
                        },
                        {
                            "D": "WNW",
                            "P": "1016",
                            "S": "10",
                            "T": "6.5",
                            "V": "28000",
                            "W": "0",
                            "$": "1200"
                        },
                        {
                            "D": "WNW",
                            "P": "1017",
                            "S": "11",
                            "T": "6.2",
                            "V": "27000",
                            "W": "0",
                            "$": "1260"
                        },
                        {
                            "D": "W",
                            "P": "1017",
                            "S": "8",
                            "T": "5.2",
                            "V": "26000",
                            "W": "0",
                            "$": "1320"
                        },
                        {
                            "D": "WNW",
                            "P": "1017",
                            "S": "9",
                            "T": "4.8",
                            "V": "25000",
                            "W": "0",
                            "$": "1380"
                        }
                    ]
                },
                {
                    "type": "Day",
                    "value": "2012-12-10Z",
                    "Rep": [
                        {
                            "D": "WNW",
                            "P": "1017",
                            "S": "8",
                            "T": "4.6",
                            "V": "23000",
                            "W": "0",
                            "$": "0"
                        },
                        {
                            "D": "WNW",
                            "P": "1017",
                            "S": "8",
                            "T": "4.1",
                            "V": "22000",
                            "W": "0",
                            "$": "60"
                        },
                        {
                            "D": "WNW",
                            "P": "1018",
                            "S": "9",
                            "T": "3.9",
                            "V": "22000",
                            "W": "0",
                            "$": "120"
                        },
                        {
                            "D": "NW",
                            "P": "1018",
                            "S": "9",
                            "T": "3.8",
                            "V": "24000",
                            "W": "0",
                            "$": "180"
                        },
                        {
                            "D": "NW",
                            "P": "1018",
                            "S": "10",
                            "T": "3.3",
                            "V": "26000",
                            "W": "0",
                            "$": "240"
                        },
                        {
                            "D": "NW",
                            "P": "1019",
                            "S": "9",
                            "T": "3.1",
                            "V": "30000",
                            "W": "0",
                            "$": "300"
                        },
                        {
                            "D": "NW",
                            "P": "1019",
                            "S": "9",
                            "T": "2.9",
                            "V": "30000",
                            "W": "0",
                            "$": "360"
                        },
                        {
                            "D": "NW",
                            "P": "1020",
                            "S": "8",
                            "T": "2.8",
                            "V": "28000",
                            "W": "0",
                            "$": "420"
                        },
                        {
                            "D": "NW",
                            "P": "1020",
                            "S": "6",
                            "T": "2.4",
                            "V": "19000",
                            "W": "0",
                            "$": "480"
                        },
                        {
                            "D": "NW",
                            "P": "1021",
                            "S": "8",
                            "T": "2.8",
                            "V": "25000",
                            "W": "1",
                            "$": "540"
                        },
                        {
                            "D": "NNW",
                            "P": "1022",
                            "S": "9",
                            "T": "3.9",
                            "V": "26000",
                            "W": "1",
                            "$": "600"
                        },
                        {
                            "D": "NNW",
                            "P": "1022",
                            "S": "8",
                            "T": "4.7",
                            "V": "25000",
                            "W": "1",
                            "$": "660"
                        },
                        {
                            "D": "N",
                            "P": "1022",
                            "S": "9",
                            "T": "5.5",
                            "V": "27000",
                            "W": "1",
                            "$": "720"
                        },
                        {
                            "D": "N",
                            "P": "1023",
                            "S": "10",
                            "T": "5.6",
                            "V": "30000",
                            "W": "3",
                            "$": "780"
                        }
                    ]
                }
            ]
        }
    }
}
} 
```

# javascript - 隐藏其 innerhtml 包含某个字符的类的任何元素？

> ID：15438935
> 
> 赞同：0
> 
> 时间：2013-03-15T17:47:18.863
> 
> 标签：javascript

我不是开发人员，我是通过第三方 whatsit 服务工作的 Google 员工；我知道 MINIMAL Javascript 并且一直坚持使用内联脚本，直到副老板从疾病中恢复并更改我的权限。所有相关的东西我都能找到参考 jQuery。有没有办法做我需要的——隐藏一个类的元素，它的 innerhtml 包含某个字符——没有这个传说中的 jQuery 的好处？

感谢您的耐心等待！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:56:55.290

这是一个隐藏所有包含特定字符的元素的变体：

```
window.onload = function ()
{
    var character = "x", // The character to search for
        elements = document.body.getElementsByClassName("className");

    for (var i = 0, length = elements.length; i < length; i++)
    {                   
        if (elements[i].innerHTML.indexOf(character) !== -1)
        {
            elements[i].style.display = "none";
        }
    };
} 
```

还有一个用于搜索字符数组的版本：

```
window.onload = function ()
{   // The pattern to search for:
    var characters = ["x", "y", "z", "some words", "@&"],
        elements = document.body.getElementsByClassName("className");

    for (var i = 0, length = elements.length; i < length; i++)
    {    
        for (var c in characters)
        {
            if (elements[i].innerHTML.indexOf(characters[c]) !== -1)
            {
                elements[i].style.display = "none";
            }
        };
    };
} 
```

# c# - 使异步代码可取消

> ID：15438937
> 
> 赞同：3
> 
> 时间：2013-03-15T17:47:24.570
> 
> 标签：c#, .net, multithreading

我有一些耗时的方法：

```
public class TimeConsumingClass
{
   public void TimeConsumingMethod()
   {
      //let's imagine my method works this way
      for (var i = 0; i < 10000; i++)
         Thread.Sleep();
   }
} 
```

它之前在主线程中执行。然后我需要在辅助线程中调用它以不阻塞 UI：

```
Task.Factory.StartNew(() => { new TimeConsumingClass().TimeConsumingMethod(); }); 
```

现在我需要让这个方法可以随时停止。所以我想让我的方法以某种方式处理 CancellationToken，同时我想保持同步调用这个方法的可能性（没有 CancellationToken）。我想到的最好的主意是在我的方法中添加可选的 CancellationToken 参数，默认情况下该参数为空（对于同步调用）：

```
public class TimeConsumingClass
{
   public void TimeConsumingMethod(CancellationToken cancellationToken = null)
   {
      //let's imagine my method works this way
      for (var i = 0; i < 10000; i++)
      {
         if (cancellationToken.IsCancellationRequested)
           return;
         Thread.Sleep();
      }
   }
} 
```

但是最近 .NET 多线程有很多创新，我觉得这是一种更好的方式来完成我将要做的事情。有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:54:22.677

如果您正在寻找一种更“现代”的方式来做到这一点，最好的办法是研究 c# 中的 new`async`和`await`关键字。它们是迄今为止实现异步性的最直接的方法。

`async`你可以在这里找到一个很好的介绍`await`：

**使用 Async 和 Await 进行异步编程（C# 和 Visual Basic）**
[http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

要了解如何报告进度和取消异步方法，请阅读此处：

**4.5 中的异步：在异步 API 中启用进度和取消**
[http://blogs.msdn.com/b/dotnet/archive/2012/06/06/async-in-4-5-enabling-progress-and-cancellation-in -async-apis.aspx](http://blogs.msdn.com/b/dotnet/archive/2012/06/06/async-in-4-5-enabling-progress-and-cancellation-in-async-apis.aspx)

要以与您在问题中使用的代码相同的样式取消任务，请查看此处：

**任务取消**
[http://msdn.microsoft.com/en-us/library/dd997396.aspx](http://msdn.microsoft.com/en-us/library/dd997396.aspx)

# python - django get_choices_display() 在 shell 中显示标签并在视图中显示值

> ID：15438947
> 
> 赞同：0
> 
> 时间：2013-03-15T17:47:56.067
> 
> 标签：python, django

当我在 shell 中尝试 instance.get_choices_display() 时，它显示了标签。

但是，我在视图中做同样的事情，它是打印价值。

可能是什么原因？

我希望在视图中返回/打印标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:08:43.570

如果你想要这个标签，我相信你想要使用`instance.label`.

# python - PEP8 E112 不应该出现缩进错误？

> ID：15438950
> 
> 赞同：1
> 
> 时间：2013-03-15T17:48:05.553
> 
> 标签：python, coding-style, pep8

我已经阅读了关于错误的大部分内容，但我看不出它与我正在写的这个类有什么关系。

```
# Copyright (C) 2013 Marco Ceppi <marco@ceppi.net>.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

import os
import ConfigParser

from bzrlib.bzrdir import BzrDir

class Mr:
    def __init__(self, directory=False, config=False, trust_all=False):
        self.directory = directory or os.getcwd()
        self.control_dir = os.path.join(self.directory, '.bzr')
        self.trust_all = trust_all
        self.config_file = config or os.path.join(self.directory, '.mrconfig')

        if self._check_repository_exists():
            if not config or not os.path.exists(config):
                raise Exception('No .mrconfig specified')
            cp = ConfigParser.ConfigParser()
            self.config = ConfigParser.read(config)
            self.bzr_dir = BzrDir.open(self.directory)
        else:
            self.config = ConfigParser.RawConfigParser()
            self.bzr_dir = BzrDir.create(self.directory)
            self.bzr_dir.create_repository(shared=True)

    def update(self):
        #print 'Not today'

    def add(self, name=False, repository='lp:charms'):
        if not name:
            raise Exception('No name provided')

    def checkout(self):
        #t

    def remove(self, name=False):
        if not name:
            raise Exception('No name provided')

    def _write_cfg(self):
        #t

    def _read_cfg(self):
        #t

    def _check_repository_exists(self):
        # Eventually do more checks to make sure it is a shared repository
        # and not a branch, etc.
        return os.path.exists(self.control_dir) 
```

它在这些方面抱怨：

```
def add(self, name=False, repository='lp:charms'):
def remove(self, name=False):
def _read_cfg(self):
def _check_repository_exists(self): 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:49:49.133

在这 4 个函数之前，您有“空”函数。在这些函数中添加一条`pass`语句：

```
def update(self):
    #print 'Not today'
    pass

def checkout(self):
    #t
    pass

def _write_cfg(self):
    #t
    pass

def _read_cfg(self):
    #t
    pass 
```

# c++ - 将 WICBitmap 绘制到窗口？

> ID：15438951
> 
> 赞同：1
> 
> 时间：2013-03-15T17:48:06.000
> 
> 标签：c++, image, mfc, bitmap, wic

我的 MFC 程序中有一个`WICBitmap`包含图像的图像。有没有办法将此位图绘制到设备上下文上？

```
void DrawBitmap(IWICBitmapSource source, HDC targetDC, int X, int Y, int cx, int cy)
{
   //source: The Bitmap to draw
   //TargetDC: The HDC to draw onto (e.g. a printer or screen DC)
   //X,Y: The location on the DC to draw the bitmap

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:58:01.123

MSDN 上有许多示例展示了如何使用 GDI、GDI+、Direct2D 等显示 WIC 位图。

*   MSDN：[图像解码示例](http://msdn.microsoft.com/en-us/library/ee872001%28v=vs.85%29.aspx) *（[存档](https://archive.is/NItdZ)）*
*   [WIC简介：如何使用WIC加载图片，并用GDI绘制？](http://www.nuonsoft.com/blog/2011/10/17/introduction-to-wic-how-to-use-wic-to-load-an-image-and-draw-it-with-gdi/comment-page-1/) *（[存档](https://archive.fo/B6IiJ)）*

* * *

Microsoft 提供了一个[使用 GDI 示例的 WIC Image Viewer](https://msdn.microsoft.com/en-us/library/windows/desktop/ee720059.aspx) *（[GitHub 镜像](https://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/multimedia/wic/wicviewergdi)）*

基本思想是：

*   将**IWicBitmapSource**转换为标准的 Windows **BITMAP** *( [`CreateDibSectionFromBitmapSource`](https://github.com/Microsoft/Windows-classic-samples/blob/master/Samples/Win7Samples/multimedia/wic/wicviewergdi/WicViewerGdi.cpp#L354))*
*   使用标准工具使用**BITMAP**进行绘制

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T17:59:22.797

该文件可以作为 bmp 文件单独编辑，然后可以加载 WIC 对象，如您在[如何从文件中加载位图](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756686%28v=vs.85%29.aspx)中所见。

# python - Pandas DataFrame 和系列的矩阵乘法

> ID：15438952
> 
> 赞同：9
> 
> 时间：2013-03-15T17:48:07.683
> 
> 标签：python, pandas, matrix, matrix-multiplication, dot-product

我想做一个熊猫数据框和一个系列的矩阵乘法

```
df = pandas.DataFrame({'a':[4,1,3], 'b':[5,2,4]},index=[1,2,3])
ser = pandas.Series([0.6,0.4]) 
```

df 是，

```
 a  b
1  4  5
2  1  2
3  3  4 
```

ser是，

```
0    0.6
1    0.4 
```

我想要的结果是矩阵产品，就像这样

答案是，

我可以通过使用 numpy 点运算符并重建我的数据帧来做到这一点

```
c = a.values.dot(b.transpose())
c = pandas.DataFrame(c, index = a.index, columns = ['ans'])
print c

   ans
1  4.4
2  1.4
3  3.4 
```

pandas 中是否有本地方法可以做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T17:58:55.163

pandas 隐式对齐系列的索引，使用 dot 函数

```
In [3]: df = pd.DataFrame({'a' : [4,1,3], 'b' : [5,2,4]},index=[1,2,3])

In [4]: s = pd.Series([0.6,0.4],index=['a','b'])

In [5]: df.dot(s)
Out[5]: 
1    4.4
2    1.4
3    3.4 
```

# r - 在 R 中的不同列中对值进行分组

> ID：15438953
> 
> 赞同：1
> 
> 时间：2013-03-15T17:48:11.003
> 
> 标签：r

我是 R 新手，我通过以下方式获取数据，这些是 2 列

```
Broker_ID_Buy            Broker_ID_Sell

  638                       423
  546                       728
  423                       321
  546                       423 
```

它继续有大约 28 个不同的经纪人出现在不同时间的买入或卖出头寸

我需要像这样排列数据

```
Broker_ID_638           Broker_ID_423         Broker_ID_546

BP                         SP                   IP
IP                         IP                   BP
IP                         BP                   IP
IP                         SP                   BP 
```

其中BP=买入头寸，SP=卖出头寸，IP=闲置头寸

我想使用这三种不同的状态来预测使用马尔可夫链

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:00:16.960

这似乎让你在正确的球场：

```
library(reshape2)
x <- data.frame(BP = c(638,546,423,546), SP = c(423, 728, 321, 423))
x$index <- 1:nrow(x)
x.m <- melt(x, id.vars = "index")
out <- dcast(index ~ value, data = x.m, value.var="variable")
out[is.na(out)] <- "IP"
out
    #---
  index 321 423 546 638 728
1     1  IP  SP  IP  BP  IP
2     2  IP  IP  BP  IP  SP
3     3  SP  BP  IP  IP  IP
4     4  IP  SP  BP  IP  IP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:27:13.153

这是另一种可能的解决方案：

```
# create your table
txt <-
"Broker_ID_Buy,Broker_ID_Sell
638,423
546,728
423,321
546,423"
dt1 <- read.csv(text=txt)

# turn "Time, Broker_ID_Buy, Broker_ID_Sell" data.frame 
# into "Time, Broker_ID, Position"
buyers  <- data.frame(Time=1:nrow(dt1),
                      Broker_ID=dt1$Broker_ID_Buy,
                      Position="BP",
                      stringsAsFactors=F)
sellers <- data.frame(Time=1:nrow(dt1),
                      Broker_ID=dt1$Broker_ID_Sell,
                      Position="SP",
                      stringsAsFactors=F)           
longDT <- rbind(buyers,sellers)

# pivot the brocker ids on the columns 
wideDT <- reshape(data=longDT,direction="wide",
                  timevar="Broker_ID", idvar="Time", v.names="Position")

# well-format column names and turn NAs into "IP"
names(wideDT) <- sub(x=names(wideDT),pattern="Position.","Broker_ID_")
wideDT[is.na(wideDT)] <- "IP" 
```

结果：

```
> wideDT
  Time Broker_ID_638 Broker_ID_546 Broker_ID_423 Broker_ID_728 Broker_ID_321
1    1            BP            IP            SP            IP            IP
2    2            IP            BP            IP            SP            IP
3    3            IP            IP            BP            IP            SP
4    4            IP            BP            SP            IP            IP 
```

# facebook - FB.ui 返回错误：未指定元素

> ID：15438961
> 
> 赞同：1
> 
> 时间：2013-03-15T17:48:40.200
> 
> 标签：facebook, jquery-mobile, facebook-javascript-sdk

使用[开发者网站上的示例：](https://developers.facebook.com/docs/reference/javascript/FB.ui/)

```
FB.ui(
  {
    method: 'feed',
    name: 'Facebook Dialogs',
    link: 'https://developers.facebook.com/docs/reference/dialogs/',
    picture: 'http://fbrell.com/f8.jpg',
    caption: 'Reference Documentation',
    description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
  },
  function(response) {
    if (response && response.post_id) {
      alert('Post was published.');
    } else {
      alert('Post was not published.');
    }
  }
); 
```

我得到以下信息：

```
Error: element not specified
innerError: undefined
message: "element not specified" 
```

起初我以为我错过了“fb-root”元素，但我的身体里有它：

```
<body onLoad="onLoad()">
    <div id="fb-root"></div>
</body> 
```

现在我认为这与我的 Backbone/jQuery Mobile 使用有关，因为一旦加载第一页，正文就会被清除。但是，`FB`对象已加载，所以我真的不知道出了什么问题。有什么想法可以尝试解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T13:17:36.310

我有同样的问题，我发现这只是发生在 Chrome 上。您使用的是哪个浏览器？对我有用的是指定

```
display: 'popup' 
```

在 FB.ui {} 内

目前我检查浏览器，如果 Chrome 我使用'popup'，如果不是'iframe'

```
 var display = 'iframe';

  if (navigator.userAgent.toLowerCase().indexOf("chrome") != -1){
          display = "popup"
  }

  FB.ui({
        method: 'share',
        display: display,
        href: 'https://developers.facebook.com/docs/reference/dialogs/'
        },
   function (response) {}
  ); 
```

应该也适用于提要，但我还没有测试过。

# c++ - （初学者）以Java示例为起点的构造函数和方法中的C++继承

> ID：15438963
> 
> 赞同：2
> 
> 时间：2013-03-15T17:48:42.143
> 
> 标签：c++, inheritance, constructor

我正在学习 c++ 继承，我来自 Java。为了训练，我制作了一个小型 java 示例并尝试将其转换为 c++，但我的 c++ 实现有很多问题。

这是我的接口 IShape.java。它代表了 Shape 的抽象。

```
public interface IShape {
    public void draw();
} 
```

这是我实现Shape的Triangle.java。

```
public class Triangle implements IShape{
    @Override
    public void draw() {
        //draw code
    }
} 
```

现在是 Main.java：

```
public class Main {
    public static void main(String[] args) {
        IShape someShape = new Triangle();
        someShape.draw();
    }
} 
```

在java中一切都很好，但我的c++版本甚至没有编译：S 这是我的IShape.h c++文件。它应该类似于 IShape.java 接口。

```
#ifndef ISHAPE_H_
#define ISHAPE_H_

class IShape{

public:
    virtual void draw() = 0;

    //must have this because of compiler
    virtual ~IShape();
private:
    //an awesome thing in c++ is that I can also define private methods for my children to implement!
    virtual int compute_point() = 0;
};

#endif 
```

现在我的 Triangle.cpp 文件：

```
#include "IShape.h"

class Triangle: public IShape {

protected:
    int max_size;

public:
    Triangle(){
        max_size = 255;//This triangle has a limited max size!
    }

    void draw() {
        //implementation code here
    }

private:
    int compute_point() {
        //implementation code here
    }
}; 
```

现在完成，我的 C++ 主要：

```
#include <iostream>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>

#include "IShape.h"
#include "Triangle.cpp"

using namespace std;

int main( int argc, char *argv[]){

    IShape myShape = Triangle();
    myShape.draw();

    return EXIT_SUCCESS;
} 
```

我的 C++ 主程序中有什么错误。因为我有几个问题，我会尝试列举它们：

1.  它告诉我“mySHApe”是抽象的，而不是因为我在三角形类中实现了它！
2.  即使我修复了第一个错误，我也无法调用“myShape.draw()”
3.  我的朋友说我永远不应该包含 cpp 文件。但是如果我不包括三角形，我的 Main.cpp 怎么知道它存在？
4.  有没有更好的方法在 C++ 中移植这个例子？还是我太“java-ed”了？

我已经阅读了几个关于 c++ 的链接和教程，每个链接和教程都以不同的方式教给我一些东西，因此我最终得到了很多定义并且有点困惑。我也搜索了 StackOverflow，但我发现的帖子对我没有帮助，它们通常指的是更复杂的问题。

我做错了什么，您可以提供哪些提示来改进我的代码风格？另外，对于文字墙感到抱歉，我正在努力解释自己，而不是被否决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:51:34.760

在 C++ 中，为了实现多态性，您必须使用**指针**或**引用**。具有自动存储的对象会被切片，在你的情况下，甚至不会被实例化。事实上，这条指令：

```
IShape myShape = Triangle(); 
```

将尝试实例化一个类型的对象`IShape`并为其分配一个临时`Triangle`对象。绝对不是你想要的。另一方面，这可以完成工作：

```
IShape* myShape = new Triangle(); // Using 
// ...
delete myShape; 
```

*但是，在现代 C++ 中，使用智能*指针通常是个好主意。尝试以这种方式重写您的`main()`函数：

```
#include <memory> // For std::shared_ptr<>

int main( int argc, char *argv[])
{
    std::shared_ptr<IShape> myShape = std::make_shared<Triangle>();
    myShape->draw();

    return EXIT_SUCCESS;
} 
```

另请注意，您有一个未提供定义的虚拟析构函数：

```
virtual ~IShape(); 
```

你应该提供一个。最简单的方法是以这种方式内联空主体：

```
virtual ~IShape() { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:51:37.547

`IShape myShape = Triangle();`这是试图创建一个`IShape`实例并将其分配给一个三角形。`IShape`如您所知，它是抽象的，所以我们不能这样做。

你想要的是一个指针。

`IShape* myShape = new Triangle();`

同时替换：

`virtual ~IShape();`和`virtual ~IShape() {}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:52:17.117

这一切都源于您试图在这里实例化一个`IShape` *对象*：

```
IShape myShape = ...; 
```

这与 RHS 上的内容无关。编译器会告诉你为什么你不能这样做。您需要一个`IShape`指针（如果您使用动态分配，则需要一个智能指针）。在此示例中，为简单起见，我们使用自动存储分配，但这只是一个细节：

```
Triangle t;           // default construct a Triangle object
IShape* myShape = &t; // IShape pointer points to a Triangle instance.
myShape->draw();      // calls Triangle::draw() 
```

动态分配的一个例子是

```
std::unique_ptr<IShape> myShape(new Triangle());
myShape->draw(); 
```

其他问题：

1.  缺少析构函数实现。给`~IShape()`一个空的主体，这样派生类就不会在不需要析构函数时强制实现。
2.  受保护的数据可能会导致代码混乱。您应该考虑将其设为`max_size`私有。
3.  使用构造函数初始化列表来初始化数据成员，而不是在构造函数体中为它们赋值：`Triangle() : max_size(255) {}`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T17:52:48.237

这条线是你的问题：

```
IShape myShape = Triangle(); 
```

它创建一个临时`Triangle`对象，然后尝试`IShape`通过复制临时三角形来创建一个对象。但是`IShape`是抽象的，你不能创建这样的对象。

你想要的是有一个`Triangle`对象的句柄。在 C++ 中，句柄分为三种：引用、指针和智能指针。大多数情况下，您应该使用智能指针。

试试这个：

```
unique_ptr<IShape> myShape = new Triangle(); 
```

在 Java 中，每个具有非原始类型的变量都会自动成为对象的句柄。在 C++ 中，您可以将句柄和实际对象都存储在变量中，因此您需要告诉编译器您打算何时拥有句柄以及使用哪种类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T17:56:42.703

**1）**它告诉你是因为你声明的是一个真实的对象，而不是一个指向对象的指针。动态绑定仅适用于指向对象的指针。

让我们看看这个：

```
IShape cShape = IShape();
Triangle cTriangle = Triangle(); 
```

两者在语法上都是正确的，您正在声明具有正确类型的对象。但是你不能实例化`IShape`，因为它是抽象的。

```
IShape pShape = Triangle(); 
```

Syntactically correct but since `pShape` is concrete, the space for it is already reserved on stack, this means that everything in addition to what a `IShape` already is will be discarded and this ends up in [object slicing](http://en.wikipedia.org/wiki/Object_slicing). You can't use polymorphism with this situation.

```
IShape* pTriangle = new Triangle();
pTriangle->draw();
...
delete pTriangle; 
```

Correct, you are declaring a pointer to a shape and initialize it with a dynamically allocated triangle instance. This is how it should be done and this is how it works in Java (when you just have references to objects).

**3)** You should never include a .cpp file indeed. You should move your `Triangle` class declaration from the `.cpp` to the `.h` file. Then it's your choice if to implement the body methods in the header file or create a `.cpp` file in which you implement Triangle `draw` method.

# java - 迭代同步集合

> ID：15438966
> 
> 赞同：8
> 
> 时间：2013-03-15T17:48:53.117
> 
> 标签：java, multithreading, vector, synchronized

我在这里问了一个关于迭代 a 的问题`Vector`，我得到了一些很好的解决方案。但我读到了另一种更简单的方法。我想知道这是否是一个好的解决方案。

```
synchronized(mapItems) {
    Iterator<MapItem> iterator = mapItems.iterator();
    while(iterator.hasNext())
        iterator.next().draw(g);
} 
```

mapItems 是一个同步集合：Vector。这是否使迭代`Vector`安全`ConcurrentModificationException`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:55:41.970

`ConcurrentModificationException`是的，它将以牺牲本质上是单线程的一切为代价使其安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:58:17.840

是的，我相信这将防止`ConcurrentModificationException`. 您正在同步`Vector`. 修改它的所有方法`Vector`也是`synchronized`，这意味着它们也会锁定同一个对象。`Vector`因此，在您对其进行迭代时，没有其他线程可以更改。

`Vector`此外，您在迭代时不会修改自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T18:25:51.827

简单地同步整个集合不会阻止 ConcurrentModificationException。这仍然会引发 CME

```
synchronized(mapItems) {
   for(MapItem item : mapsItems){
      mapItems.add(new MapItem());
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T18:15:19.907

您可能需要考虑使用 ReadWriteLock。

对于迭代列表而不修改其内容的进程，获取共享 ReentrantReadWriteLock 的读锁。这允许多个线程对锁具有读访问权。

对于将修改列表的进程，获取共享锁上的写锁。这将阻止所有其他线程访问列表（甚至是只读的），直到您释放写锁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T18:19:35.170

> 这是否使对 Vector 的迭代不受 ConcurrentModificationException 的影响？

**是**的，它使对 Vector 的迭代安全`ConcurrentModificationException`。如果它不同步，那么在这种情况下，如果您通过各种线程访问 Vector，并且在创建迭代器后的任何时间其他线程在结构上修改 Vector，迭代器将扔`ConcurrentModificationException`。考虑运行以下代码：

```
import java.util.*;
class VVector 
{
    static Vector<Integer> mapItems = new Vector<Integer>();
    static
    {
        for (int i = 0 ; i < 200 ; i++)
        {
            mapItems.add(i);
        }
    }
    public static void readVector()
    {
        Iterator<Integer> iterator = mapItems.iterator();
        try
        {
            while(iterator.hasNext())
            {
                System.out.print(iterator.next() + "\t");
            }
        }
        catch (Exception ex){ex.printStackTrace();System.exit(0);}
    }
    public static void main(String[] args) 
    {
        VVector v = new VVector();
        Thread th = new Thread( new Runnable()
        {
            public void run()
            {
                int counter = 0;
                while ( true )
                {
                    mapItems.add(345);
                    counter++;
                    if (counter == 100)
                    {
                        break;
                    }
                }
            }
        });
        th.start();
        v.readVector();

    }
} 
```

在我的系统中，它在执行时显示以下输出：

```
0       1       2       3       4       5       6       7       8       9
java.util.ConcurrentModificationException
        at java.util.AbstractList$Itr.checkForComodification(Unknown Source)
        at java.util.AbstractList$Itr.next(Unknown Source)
        at VVector.readVector(VVector.java:19)
        at VVector.main(VVector.java:38) 
```

但另一方面，如果您使用 as 锁使包含`Iterator`访问该`Vector`同步的代码块`mapItems`，它将阻止与该块相关的其他方法的执行，`Vector`直到该`synchronized` 块以原子方式完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T19:17:13.220

如果我们在 while 循环中调用 add 方法，则会引发异常。

```
synchronized(mapItems) {
    Iterator<MapItem> iterator = mapItems.iterator();
    while(iterator.hasNext())
        iterator.next();
         mapItems.add("Something");  //  throws ConcurrentModificationException
} 
```

# c++ - vswprintf 在 Mac OS X 下对于某些 unicode 代码点失败

> ID：15438968
> 
> 赞同：3
> 
> 时间：2013-03-15T17:49:11.787
> 
> 标签：c++, c, macos, gcc, darwin

我在`vswprintf`使用 GCC 和 Mac OS X（在 Mac OS X 10.6 和 10.8 下使用 gcc 4.0 和 4.2.1 测试。Linux 下的 GCC**不受影响**。Visual Studio 也**不受影响**）时遇到了莫名其妙的故障（返回值 -1 ）。

为了演示这个问题，我对[此处](http://www.cplusplus.com/reference/cwchar/vswprintf/)的示例进行了最低限度的修改，以便打印出`vswprintf`的返回值：

```
/* vswprintf example */
#include <stdio.h>
#include <stdarg.h>
#include <wchar.h>

void PrintWide ( const wchar_t * format, ... )
{
    wchar_t buffer[256];
    va_list args;
    va_start ( args, format );
    int res = vswprintf ( buffer, 256, format, args );
    wprintf ( L"result=%d\n", res );
    fputws ( buffer, stdout );
    va_end ( args );
}

int main ()
{
    wchar_t str[] = L"test string has %d wide characters.\n";
    PrintWide ( str, wcslen(str) );
    return 0;
} 
```

从我的测试看来，根据 的值`str`， `vswprintf`有时会失败。例子：

```
wchar_t str[] = L"test string has %d wide characters.\n"; // works
wchar_t str[] = L"ßß® test string has %d wide characters.\n"; // works
wchar_t str[] = L"日本語 test string has %d wide characters.\n"; // FAILS
wchar_t str[] = L"Π test string has %d wide characters.\n"; // FAILS
wchar_t str[] = L"\u03A0 test string has %d wide characters.\n"; // FAILS 
```

似乎任何包含上述 Unicode 代码点字符的字符串`0xff`都会触发此问题。任何人都可以解释为什么会这样吗？这似乎是一个太大的问题，以前没有注意到！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:15:39.963

如果你设置了语言环境，它应该没问题。要获取环境变量，您可以执行以下操作：

```
setlocale(LC_CTYPE, "");   // include <locale.h> 
```

或明确设置。这是因为所有的输出函数都需要知道使用哪种编码。

OS X 根本无法执行`vswprintf`，而 Linux 运行它（尽管如果打印字符会不正确）。

这是 glibc 文档中的相关部分：

> ```
>  If  the  format  string contains non-ASCII wide characters, the program
>    will only work correctly if the LC_CTYPE category of the current locale
>    at  run time is the same as the LC_CTYPE category of the current locale
>    at compile time.  This is because the wchar_t representation  is  plat‐
>    form-  and  locale-dependent.   (The  glibc  represents wide characters
>    using their Unicode (ISO-10646) code point, but other  platforms  don't
>    do  this. 
> ```

# c# - MigraDoc - 如何避免段落之间的换行

> ID：15438970
> 
> 赞同：2
> 
> 时间：2013-03-15T17:49:12.617
> 
> 标签：c#, line-breaks, paragraph, pdfsharp, migradoc

我想知道是否有办法避免某些段落之间的**换行。**例如：

```
Paragraph PjourneyTitle = sec.AddParagraph(journeyTitle, "Heading2");
Paragraph Pjourney = sec.AddParagraph();
Pjourney.Format.Font.Bold = true;
Pjourney.AddText(offer.Destination); 
```

在 PjourneyTitle 和 Pjourney 之间发生了**换行符**，我想避免这种情况。

今天我一直在谷歌上搜索，但无济于事。

任何帮助是极大的赞赏。提前致谢！

编辑：使用你们建议的代码后：这似乎对我不起作用......不管是什么原因。虽然 KeepWithNext 似乎是 ParagraphFormat 中的一个选项，但将其设置为 true 对我没有任何作用。我正在设置一个样式（Heading2），我在上面发布的 MigraDoc 代码中使用它。

这是 Heading2 的样式代码：

```
style = document.Styles["Heading2"];
style.ParagraphFormat.LeftIndent = "0cm";
style.ParagraphFormat.KeepWithNext = true;
//style.ParagraphFormat.KeepTogether = true;
style.Font.Size = 10;
style.Font.Bold = true;
style.ParagraphFormat.PageBreakBefore = false;
style.ParagraphFormat.SpaceBefore = 6;
style.ParagraphFormat.SpaceAfter = 6; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:10:45.137

我认为您正在寻找 keepWithNext 属性。将其设置为真。

[http://msdn.microsoft.com/en-us/library/system.windows.documents.paragraph.keepwithnext.aspx](http://msdn.microsoft.com/en-us/library/system.windows.documents.paragraph.keepwithnext.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:24:38.670

KeepWithNext 将确保第一段的最后一行和第二段的第一行在同一页上。所以它可以防止这两个段落之间的分页符，但不能防止段落内的分页符。

KeepTogether 将防止段落内出现分页符。

如果您想将两个段落都视为牢不可破的块，则在两个段落上使用 KeepTogether 并在第一段上使用 KeepWithNext 应该可以解决问题。

设计使每个段落都从新行开始。没有办法防止段落之间换行（对不起，我应该更仔细地阅读这个问题）。

您可以使用 AddFormattedText 在段落中混合不同的格式（例如粗体和正常）。

You can use a table (maybe with hidden borders) to have two different columns.

So depending on your needs, AddFormattedText or a table may be the best option.

# python - Going through a list

> ID：15438972
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:49:17.710
> 
> 标签：python, list

Say you have a list [1,2,3,4] And I want to get [2,3,4,1] or [3,4,1,2]. Basically I am using the list with a different starting point each time, but then continuing through the list. How would I create something to recognize that in python.

What i have now is list[n:] where n is the shifted value, say 2, making you start at three.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:56:06.000

```
someList[n:] + someList[:n] 
```

会解决你的目的`if n <= len(someList)`

此外，`collections.deque`是有效的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:54:57.487

我相信这就是你想要的

```
>>> def startAt(index, list):
...     print list[index:] + list[:index]
... 
>>> l = [0,1,2,3,4,5]
>>> startAt(3, l)
[3, 4, 5, 0, 1, 2]
>>> 
```

# c# - fmod Sound.setMusicSpeed 返回不支持的格式错误

> ID：15438973
> 
> 赞同：0
> 
> 时间：2013-03-15T17:49:20.713
> 
> 标签：c#, c++, mp3, wav, fmod

每当我尝试使用 Sound.getMusicSpeed() 或 Sound.setMusicSpeed 时，返回的结果都是“不支持的文件或音频格式”。我尝试使用 .mp3、.ogg 和 .wav，但它们都返回相同的错误。我在 C++ 和 C# 包装器中都试过了。关于 get/setMusicSpeed() 有什么我应该知道的具体信息吗？这个函数的文档非常简单。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:40:31.820

在互联网上进行了一些搜索，发现了这个链接

[http://zwischenwelt.org/~hagish/irisdocs/trunk/doc/api_cpp/html/fmod_8hpp-source.html](http://zwischenwelt.org/~hagish/irisdocs/trunk/doc/api_cpp/html/fmod_8hpp-source.html)

进一步搜索将我引向此评论

`"00246 // For MOD/S3M/XM/IT/MID sequenced formats only."`

更多的谷歌搜索导致发现 mp3、ogg 和 wav 不是这样的序列格式。

# css - 在 Bootstrap 导航栏上方添加徽标

> ID：15438974
> 
> 赞同：0
> 
> 时间：2013-03-15T17:49:21.173
> 
> 标签：css, html, twitter-bootstrap

我正在使用这个[引导示例尝试 Twitter Bootstrap](http://twitter.github.com/bootstrap/examples/justified-nav.html)

我想用 PNG 图形替换文本徽标（项目名称），但似乎无法使用以下代码完成：

```
<div class="container">

  <div class="masthead">
    <h3 class="muted">Bull</h3>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Projects</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Downloads</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>
      </div>
    </div><!-- /.navbar --> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:52:39.100

在`<div class="masthead">`您的内部`<h3 class="muted">`包含“项目名称”文本。

摆脱`<h3>`并将其替换为：

`<img src="foo.png" alt="" />`

（当然你可能想在你的图像周围放一个`<figure>`或`<h1>`，但它应该像上面一样简单）

# php - separate string based on shortcodes

> ID：15438976
> 
> 赞同：0
> 
> 时间：2013-03-15T17:49:24.813
> 
> 标签：php, preg-match, preg-split

I need a preg function which do the following job for following string-

```
string = {my_special_shortcode_name var1='some_var1' var2='some_var2' var3='some_var3'} 
```

and the extracted string must look like-

```
Array( 'var1' =>  'some_var1',
       'var2' => 'some_var2',
       'var3' => 'some_var3'
) 
```

Obviously I need the some pref function, but I have tried separating the string based on space formatting, but when I include spaces in any parameter of var1/var2/var3, for ex-

When I given this input instead-

```
string = {my_special_shortcode_name var1='some var1' var2='some_var2' var3='some_var3'} 
```

NOTE THE SPACE IN SOME VAR1 (INSTEAD OF SOME_VAR1)

The following output is obtained-

```
Array( 'var1' =>  'some',
       'var1' => 'var2',
       'some_var2' => 'var3'
) 
```

So I need a function which separate the string based on space **outside** the `""` , not the space within `""` .

Any idea how?

**EDIT**: I have successfully extracted the string into array. Problem lies in URL containing '?' which makes the separate string within "". So now, I need someone to suggest how to escape '?' and separate string into array?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T10:50:03.507

我会使用[preg_match_all](http://www.php.net/manual/en/function.preg-match-all.php)函数，如：

```
$str = "{my_special_shortcode_name var1='some var1' var2='some_var2' var3='some_var3'}";
preg_match_all("~(\w+)\s*=\s*'([^']+)'~", $str, $m);
print_r($m); 
```

**输出：**

```
Array
(
    [0] => Array
        (
            [0] => var1='some var1'
            [1] => var2='some_var2'
            [2] => var3='some_var3'
        )

    [1] => Array
        (
            [0] => var1
            [1] => var2
            [2] => var3
        )

    [2] => Array
        (
            [0] => some var1
            [1] => some_var2
            [2] => some_var3
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:01:15.040

你总是可以把它从`/[^\\]' /`. 所以这会得到`'_`，但不是`\'_`（其中 _ 是你的空间），这样你就可以在撇号的值中包含一个转义字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T12:29:37.710

```
$string = "{my_special_shortcode_name var1='http://stackoverflow.com/q/15438976/1020526?test' var2='some_var2' var3='some_var3'}";
preg_match_all("/\b(\w+)='([^']+)'/", $string, $matches);
$arr = array_combine($matches[1], $matches[2]); // first captured groups as key, and the second as the array values
print_r($arr); 
```

**输出**：

```
Array
(
    [var1] => http://stackoverflow.com/q/15438976/1020526?test
    [var2] => some_var2
    [var3] => some_var3
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:48:46.143

你可以像 /var[\d]+='([\w ]+)'/ 这样的正则表达式

```
$pattern = "/var[\d]+='([\w ]+)'/";
$subject = "{my_special_shortcode_name var1='some var1' var2='some_var2' var3='some_var3'}";
preg_match_all( $pattern, $subject, $matches); 
```

$matches 将填充：

```
array (
  0 => 
  array (
    0 => 'var1=\'some var1\'',
    1 => 'var2=\'some_var2\'',
    2 => 'var3=\'some_var3\'',
  ),
  1 => 
  array (
    0 => 'some var1',
    1 => 'some_var2',
    2 => 'some_var3',
  ),
) 
```

# jquery - jQuery Mobile 滑块图像序列

> ID：15438979
> 
> 赞同：2
> 
> 时间：2013-03-15T17:49:29.890
> 
> 标签：jquery, jquery-mobile, slider, html5-canvas

我使用 jQuery Mobile 框架构建了一个移动应用程序，用于在智能手机上显示医学图像。我有多个图像（有时超过 100 个）要显示在单个画布上，并且我想使用滑块尽可能流畅地浏览图像，因为它们是创建动画的系列的一部分。

目前，我已经使用下面的代码做到了这一点，但是当在图像中滑动时，从另一个到另一个并不平滑，并且存在滞后。您必须将其移动到特定索引处才能显示图像，然后移动到下一个，因为在您滑动值时它不会显示它。

我的另一个选择是将所有图像放在 img 标签中，并在您使用幻灯片浏览数组索引时隐藏/显示它们。但我想在某些时候使用画布来缩放/过滤图像。

任何想法、插件/库都会非常有帮助。

```
var a=document.getElementById("myCanvas");
var a_ctx=a.getContext("2d");

var images = [];

$("#slider").attr("max", instUrlArr.length).slider("refresh");

//on page init it will preload all images from array
for(var i = 0;i<instUrlArr.length;i++){
    images[i] = new Image();
    images[i].src = instUrlArr[i];
}
$('#slider').slider({
        stop: function(event,ui){
        var sliderVal = $('#slider').val();
        var img = images[sliderVal];
        console.log('source ' + img.src);

        a_ctx.drawImage(img,400,300);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:00:15.817

我设法通过使用更改事件而不是使用滑块开始/停止事件来解决这个问题。当我在图像中滑动时，它们会从一个平滑地绘制到另一个。

```
$('#slider').change(function(){
    var sliderVal = $(this).val();
    var img = images[sliderVal];
    console.log('source ' + img.src);
    a_ctx.drawImage(img,300,300); 
}); 
```

# javascript - Re-apply click binding on context switch

> ID：15438983
> 
> 赞同：0
> 
> 时间：2013-03-15T17:49:40.610
> 
> 标签：javascript, jquery, html

I have several `<div class="some_class">` . I bind to it an `event` to it through

```
$('.some_class').on('click',function() {...}) 
```

Now. When I change context and I creat dynamically new `<div class="some_class">` the event is not binded enough. How I can solve this without repeating the binding in the context switch `function` ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:51:46.343

利用

```
$(document).on('click','.some_class',function() {...}) 
```

代替

```
$('.some_class').on('click',function() {...}) 
```

有关详细信息，请参阅[`.on()`](http://api.jquery.com/on)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:51:52.340

尝试使用：

```
$(document).on('click', '.some_class', function() {...}) 
```

反而

# jquery - jquery prevent multi selection in multi-select

> ID：15438989
> 
> 赞同：2
> 
> 时间：2013-03-15T17:49:51.683
> 
> 标签：jquery, multi-select

I everybody,

I've a multi-select like this:

```
<select multiple="multiple" id="lista">
    <option value="a">Mario</option>
    <option value="b">Maria</option>
    <option value="c">Mark</option>
</select> 
```

How can I prevent to select multiple option by a user? (*shift+arrow up/down*)

thanks in advance

ciao h.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:52:54.590

您需要为其提供 size 属性..

```
<select id="lista" size="3">
    <option value="a">Mario</option>
    <option value="b">Maria</option>
    <option value="c">Mark</option>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T17:51:30.140

Although I'm not sure why you can't simply remove `multiple="multiple"` in the HTML, here's how you would do it with jQuery:

```
// Wait until the DOM is loaded
$(function(){
    $('#lista').removeAttr("multiple");
}); 
```

# couchdb - 本地网络上的 CouchDB

> ID：15438994
> 
> 赞同：5
> 
> 时间：2013-03-15T17:50:02.963
> 
> 标签：couchdb, localhost

我正在运行沙发并在我的计算机上设置了一个本地静态 IP，这样我就可以有一个本地网络运行，127.0.0.1:5984/_utils 工作，但我的静态 IP 192.168.1.4:5984/_utils 没有。我试过 ping 192.168.1.4，但是 192.168.1.4:5984 没有。想法？

编辑：我在 Windows 环境中工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T18:01:27.330

看看`etc/couchdb/local.ini`沙发上读取的文件。部分中有一个`bind_address`选项`[httpd]`。如果将其设置为`0.0.0.0`CouchDB 将侦听所有接口。

# c# - ASP .NET (c#) 中的可点击标签

> ID：15438995
> 
> 赞同：0
> 
> 时间：2013-03-15T17:50:15.160
> 
> 标签：c#, asp.net

我的问题是我创建了一个方法，它将返回 SQL 表中的所有链接，我可以将它们传递给标签，但我的问题是这些链接不可点击......有没有办法修复这？或者可能是一种将链接传递到表格或其他东西的方法？谢谢！

代码如下所示：

```
service1.WebServiceLinks a1 = new service1.WebServiceLinks();
        string result = a1.GetLinks();

        Label1.Text = result; 
```

这是 GetLinks() 的代码：

```
public static string GetLinks()
{

    string query = string.Format("SELECT Link FROM Linkovi");
    StringBuilder result = new StringBuilder();
    try
    {
        conn.Open();
        command.CommandText = query;

        SqlDataReader reader = command.ExecuteReader();

        while (reader.Read())
        {
            result.Append(reader["Link"].ToString());
        }
        reader.Close();
    }
    finally
    {
        conn.Close();
    }
    return result.ToString();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:53:09.063

为什么不使用[超链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx)控件而不是标签？它呈现一个链接（锚元素）。因此您应该能够在其上设置可点击链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:11:13.717

由于您可以控制 Web 服务的两端，请帮自己一个忙并返回有意义的信息，而不仅仅是一个巨大的字符串。至少，返回一个集合`List<string>`：

```
public static List<string> GetLinks()
{
    string query = string.Format("SELECT Link FROM Linkovi");
    List<string> result = new List<string>();
    try {
        conn.Open();
        command.CommandText = query;
        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read()) {
            result.Add(reader["Link"].ToString());
        }
        reader.Close();
    } finally {
        conn.Close();
    }
    return result;
} 
```

`Repeater`然后为了显示结果，使用绑定到结果的控件之类的东西，用 a`HyperLink`来显示可点击的链接：

```
<asp:Repeater ID="LinkDisplay" runat="server">
<ItemTemplate>
    <asp:HyperLink ID="TheLink" runat="server"
        NavigateUrl='<%#Container.DataItem%>' Text='<%#Container.DataItem%>'>
    </asp:HyperLink>
</ItemTemplate>
</asp:Repeater> 
```

并将转发器绑定到结果`Page_Load`：

```
void Page_Load(object sender, EventArgs e) {
    service1.WebServiceLinks a1 = new service1.WebServiceLinks();
    LinkDisplay.DataSource = a1.GetLinks();
    LinkDisplay.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:56:18.003

将其包裹在锚标签内

`<a href="your_link" >text</a>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:30:21.630

你的`<label>`标签必须有一个`for`属性，引用有问题`id`的`<input>`元素。一旦你明白了，`<label>`对于任何符合标准的浏览器，[应该] 都是热门且可点击的。

这是您想要的那种 HTML 标记的示例：

```
<li><input id="options-rb1" type="checkbox" name="options" value="1"/><input<label for="options-rb1">&nbsp;Option 1</label></li>
<li><input id="options-rb2" type="checkbox" name="options" value="2"/><input<label for="options-rb2">&nbsp;Option 2</label></li>
<li><input id="options-rb3" type="checkbox" name="options" value="4"/><input<label for="options-rb3">&nbsp;Option 3</label></li>
<li><input id="options-rb4" type="checkbox" name="options" value="8"/><input<label for="options-rb4">&nbsp;Option 4</label></li> 
```

曾经不应该该`<label>`元素不需要与`<input>`它所绑定的元素相邻（或什至靠近）。