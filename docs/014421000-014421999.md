# StackOverflow 问答 14421000-14421999

# twitter-bootstrap - Rails.application.config.assets.paths，这个输出正确吗？

> ID：14421002
> 
> 赞同：1
> 
> 时间：2013-01-20T02:04:04.607
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.1, ruby-on-rails-3.2, asset-pipeline

我正在尝试对我的 Rails 3.2 Twitter Bootstrap 主题进行故障排除。有些事情不能正常工作。当我运行此命令时，我得到以下看起来不正确或根本不显示路径的输出。有谁知道我做错了什么？

## 1.9.3p125:003 > y Rails.application.config.assets.paths

*   !binary |- L1VzZXJzL21hcmtydXNzb24vRG9jdW1lbnRzL3dlYnNpdGVzL2hvc3Rpbmcv ZmxldGNoZXIvYXBwL2Fzc2V0cy9mb250
*   !binary |- L1VzZXJzL21hcmtydXNzb24vRG9jdW1lbnRzL3dlYnNpdGVzL2hvc3Rpbmcv ZmxldGNoZXIvYXBwL2Fzc2V0cy9pY28=
*   !binary |- L1VzZXJzL21hcmtydXNzb24vRG9jdW1lbnRzL3dlYnNpdGVzL2hvc3Rpbmcv ZmxldGNoZXIvYXBwL2Fzc2V0cy9pbWFnZXM=
*   !binary |- L1VzZXJzL21hcmtydXNzb24vRG9jdW1lbnRzL3dlYnNpdGVzL2hvc3Rpbmcv ZmxldGNoZXIvYXBwL2Fzc2V0cy9qYXZhc2NyaXB0cw==
*   !binary |- L1VzZXJzL21hcmtydXNzb24vRG9jdW1lbnRzL3dlYnNpdGVzL2hvc3Rpbmcv ZmxldGNoZXIvYXBwL2Fzc2V0cy9zdHlsZXNoZWV0cw==
*   !binary |- L1VzZXJzL21hcmtydXNzb24vRG9jdW1lbnRzL3dlYnNpdGVzL2hvc3Rpbmcv ZmxldGNoZXIvdmVuZG9yL2Fzc2V0cy9qYXZhc2NyaXB0cw==
*   !binary |- L1VzZXJzL21hcmtydXNzb24vRG9jdW1lbnRzL3dlYnNpdGVzL2hvc3Rpbmcv ZmxldGNoZXIvdmVuZG9yL2Fzc2V0cy9zdHlsZXNoZWV0cw==
*   !binary |- L1VzZXJzL21hcmtydXNzb24vLnJ2bS9nZW1zL3J1YnktMS45LjMtcDEyNUBm bGV0Y2hlci9nZW1zL2pxdWVyeS1yYWlscy0yLjAuMi92ZW5kb3IvYXNzZXRz L2phdmFzY3JpcHRz
*   !binary |- L1VzZXJzL21hcmtydXNzb24vLnJ2bS9nZW1zL3J1YnktMS45LjMtcDEyNUBm bGV0Y2hlci9nZW1zL2NvZmZlZS1yYWlscy0zLjIuMi9saWIvYXNzZXRzL2ph dmFzY3JpcHRz
*   !ruby/object:路径名 path: !binary |- L1VzZXJzL21hcmtydXNzb24vRG9jdW1lbnRzL3dlYnNpdGVzL2hvc3Rpbmcv ZmxldGNoZXIvYXBwL2Fzc2V0cy9mb250 => nil

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:54:07.267

你的输出是绝对正常的。它表示由命令返回的 Ruby 对象。您可以在控制台上尝试此代码：

```
Rails.application.config.assets.paths.each do |p|
  puts p
end 
```

您的申请中还有哪些不正确的地方？

# azure - How to optimize transactions costs from testing existence of keys?

> ID：14421006
> 
> 赞同：0
> 
> 时间：2013-01-20T02:04:54.647
> 
> 标签：azure, azure-storage, azure-table-storage, azure-blob-storage

I'm designing an application using Azure Storage Blobs/Table/Queue, handling massive amount of data. One important aspect of the application, is that **work will be done if a given key don't exist**, and determining the existence of a key is a frequent and intensive task.

I need to optimize as much possible billable transactions from existence checks of keys. It could be either against blobs or tables.

I looked at this document [Understanding Windows Azure Storage Billing – Bandwidth, Transactions, and Capacity](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx) It seems that 404 errors are not counted only from anonymous requests.

I was also thinking of using a BatchTableOperation to check 100 keys at once, maybe using a Replace or Merge, and determine in the results if the key indeed existed (haven't tried, actualy I got the idea while writing)

Any good hack are welcomed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:12:18.700

您应该使用[Windows Azure 缓存](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)：

*   加载缓存中的所有现有密钥
*   每次将记录添加到表存储时，也将其添加到缓存中

完成此操作后，请先让您的应用程序检查缓存。如果该项目不存在，请检查表存储以确保（以涵盖边缘情况）。但是在 99% 的情况下，如果项目已经被处理，则密钥将在缓存中可用，并且您不需要查询表存储（这将大大减少表存储的事务）。

如果不能使用 Windows Azure 缓存，还有其他选择，例如使用[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)，将所有键保存在文件中，...

# c++ - 使用 C++ Socket 仅接收必要的数据

> ID：14421008
> 
> 赞同：2
> 
> 时间：2013-01-20T02:05:06.017
> 
> 标签：c++, sockets

我只是想获取带有标题的页面内容...但是对于通过的最后一个信息包来说，我的大小为 1024 的缓冲区似乎太大或太小...我不想要得到太多或太少，如果这是有道理的。这是我的代码。它可以很好地打印出包含所有信息的页面，但我想确保它是正确的。

```
//Build HTTP Get Request
std::stringstream ss;
ss << "GET " << url << " HTTP/1.0\r\nHost: " << strHostName << "\r\n\r\n";
std::string req = ss.str();

// Send Request
send(hSocket, req.c_str(), strlen(req.c_str()), 0);

// Read from socket into buffer.
do
{
     nReadAmount = read(hSocket, pBuffer, sizeof pBuffer);
     printf("%s", pBuffer);

}
while(nReadAmount != 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T03:50:25.260

读取 HTTP 回复的正确方法是读取直到收到完整的`LF`分隔行（有些服务器使用`bare LF`，即使官方规范说使用`CRLF`），其中包含响应代码和版本，然后继续阅读 LF 分隔的行，哪些是标头，直到遇到一个 0 长度的行，表示标头的结尾，然后您必须分析标头以找出剩余数据的编码方式，以便您知道读取它的正确方法并知道它是如何编码的被终止。有几种不同的可能性，有关实际规则，请参阅[RFC 2616 第 4.4 节。](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)

换句话说，您的代码需要改用这种结构（伪代码）：

```
// Send Request
send(hSocket, req.c_str(), req.length(), 0);

// Read Response
std::string line = ReadALineFromSocket(hSocket);
int rescode = ExtractResponseCode(line);
std::vector<std::string> headers;
do
{
     line = ReadALineFromSocket(hSocket);
     if (line.length() == 0) break;
     headers.push_back(line);
}
while (true);

if (
    ((rescode / 100) != 1) &&
    (rescode != 204) &&
    (rescode != 304) &&
    (request is not "HEAD")
)
{
    if ((headers has "Transfer-Encoding") && (Transfer-Encoding != "identity"))
    {
        // read chunks until a 0-length chunk is encountered.
        // refer to RFC 2616 Section 3.6 for the format of the chunks...
    }
    else if (headers has "Content-Length")
    {
       // read how many bytes the Content-Length header says...
    }
    else if ((headers has "Content-Type") && (Content-Type == "multipart/byteranges"))
    {
        // read until the terminating MIME boundary specified by Content-Type is encountered...
    }
    else
    {
        // read until the socket is disconnected...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T02:37:45.997

```
 nReadAmount = read(hSocket, pBuffer, sizeof pBuffer);
 printf("%s", pBuffer); 
```

这已破了。您只能将`%s`格式说明符用于 C 样式（以零结尾）字符串。应该如何`printf`知道要打印多少字节？该信息在 中`nReadAmount`，但您不使用它。

`printf`此外，即使`read`失败，您也会打电话。

最简单的修复：

```
 do
 {
     nReadAmount = read(hSocket, pBuffer, (sizeof pBuffer) - 1);
     if (nReadAmount <= 0)
         break;
     pBuffer[nReadAmount] = 0;
     printf("%s", pBuffer);
 } while(1); 
```

# vim - Vim 不正确地突出显示“非常神奇”和“非常神奇”的正则表达式

> ID：14421009
> 
> 赞同：2
> 
> 时间：2013-01-20T02:05:13.253
> 
> 标签：vim, syntax-highlighting, vim-syntax-highlighting

我正在`.vim`vim 本身中编辑一个语法文件，并且我正在使用“非常神奇”和“非常神奇”的正则表达式，只是因为我认为它们更有意义。不幸的是，vim 并没有以任何方式正确地突出显示这些内容。例如，这个正则表达式，使用非常nomagic：

```
/\V[/ 
```

应该匹配一个左括号。不幸的是，vim 认为这是一个未终止的集合，所以它用紫色突出显示文件，直到找到下一个`]`.

有没有办法让 vim 正确突出这些正则表达式模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:06:40.853

您必须覆盖一些默认`syntax/vim.vim`语法定义（在 中`~/.vim/after/syntax/vim.vim`），因为语法不考虑这种情况，并假定默认的`'magic'`正则表达式语法。

我猜这个语法的作者 Chip Campbell 不想使（已经相当大的）语法进一步复杂化，并避免增加测试工作量。询问他是否包含对`\V`/`\M`原子的支持当然是个好主意，或者他是否至少会接受一个补丁来包含这样的增强。

# java - 我正在尝试找出 url 语法以将参数传递给我的“Sikuli 服务器”

> ID：14421013
> 
> 赞同：1
> 
> 时间：2013-01-20T02:05:30.367
> 
> 标签：java, jetty, sikuli

enix12enix 编写了一个独立的 sikuli 服务器来远程启动 sikuli 脚本。我正在运行服务器，现在我正在尝试将值与 url 一起传递。我想它看起来像这样：

```
http://server:9000/test.do?script=/yourscript&argv[1]=arg1value 
```

& 之前的所有内容都可以正常工作。我知道答案在此处找到的 java 中的某处：

```
https://github.com/enix12enix/sikuliserver/blob/master/java/src/org/sikuli/SikuliScriptParamProcessor.java 
```

因为有一个名为 extractparameters 的函数。任何人都可以帮助找出 url 的语法吗？

非常感谢，

雅各布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:23:24.140

根据用于检查参数名称是否正确的模式，您应该使用以下格式发送参数：`argv## (1-99)`. 因此，`argv[1]`您应该发送 url而不是发送`argv1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:30:07.680

谢谢 Jair，我也想出了如何在 Sikuli 脚本中引用它。我想那些熟悉 Java / Python / Jython 的人已经意识到了这一点，但我只是一个设置远程 Sikuli 服务器的菜鸟。

参数可以通过url传递如下：

```
http://server:9000/test.do?script=/yourScriptName.sikuli&argv1=value1&argv2=value2 
```

依此类推，通过 argv99。

通常，在从命令行 (--args value1 value2) 运行脚本时，您会像这样引用 Sikuli 脚本中的参数：

```
import sys
var1 = sys.argv[1]
var2 = sys.argv[2] 
```

在使用 Java 方面时，参考有点不同：

```
import java
var1 = java.lang.System.getProperty('argv1')
var2 = java.lang.System.getProperty('argv2') 
```

等等。

# c# - 条件文本块格式

> ID：14421015
> 
> 赞同：0
> 
> 时间：2013-01-20T02:05:50.150
> 
> 标签：c#, xaml, windows-phone-8

我是 C# 和 XAML 的新手，我正在制作某种阅读应用程序。

`TextBlock`因此，如果标题需要超过 1 行来适应，我需要一个自动换行。但是当它变得超过 2 行以适应时，将 a 包裹`ScrollView`在上面。

通过这样做，我可以将其余元素紧密对齐，只要它是`1`或`2(max)`行高。

如何在 XAML 或 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:36:42.697

如果您可以使用 a`TextBox`而不是 a `TextBlock`，那会更容易。A`TextBox`支持滚动并具有`LineCount`可以关闭的属性。因此，例如，我将几个控件放入`StackPanel`：

```
<Grid>
    <StackPanel HorizontalAlignment="Left" Height="100" Margin="105,127,0,0" VerticalAlignment="Top" Width="184">
        <TextBox Height="23" TextWrapping="Wrap" Text="TextBox" Name="TextBox1"/>
        <Button Content="Button" Click="Button_Click_2"/>
    </StackPanel>
</Grid> 
```

然后我有一些代码来更新文本。当我达到 2 行时，我增长了`TextBox`，当我达到 3 行时，我添加了滚动条：

```
private void Button_Click_2(object sender, RoutedEventArgs e)
{
    TextBox1.Text += "More Text";

    if (TextBox1.LineCount >= 2)
    {
        TextBox1.Height = 38; 
    }
    if (TextBox1.LineCount >= 3)
    {
        TextBox1.VerticalScrollBarVisibility = ScrollBarVisibility.Visible;
    }
} 
```

# c# - 将数据从 Html.Action 传递到局部视图

> ID：14421016
> 
> 赞同：3
> 
> 时间：2013-01-20T02:05:53.113
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, asp.net-mvc-3-areas

我对 MVC 3 还比较陌生。我需要将数据从我的 @Html.Action 方法通过控制器传递到局部视图。

所以这是我的流程。

我会像这样调用@Html.Action：

```
@Html.Action("SidebarMain", "Home", new List<int>(new int[] {1, 2, 3})) 
```

然后它会击中我的控制器。这是我在家庭控制器中的方法：

```
public ActionResult SidebarMain(List<int> items)
{
    return View(items);
} 
```

然后我的部分视图应该能够像这样访问数据：

```
@model List<int>

@{
    ViewBag.Title = "SidebarMain";
    Layout = null;
}

<div>
@foreach (int item in Model)
{
    <div>@item</div>
}
</div> 
```

但是：我得到模型的空异常，这意味着它没有通过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T02:10:05.213

尝试这个：

```
Html.Action("SidebarMain", "Home", new { items = new List<int>(new int[] {1, 2, 3}) }) 
```

并在你的 SidebarMain Action 中放置一个断点来查看，如果你得到`items`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T02:20:41.070

**简而言之：****您**的代码在`Html.Action()`. 除此之外，代码应该是功能性的。

```
Html.Action("SidebarMain", "Home", new {items = new List<int>(new int[] {1, 2, 3}) }) 
```

作为建议的做法，我会`ViewModel`在我的视图中使用专用的，而不仅仅是发送整数数组。因为，以这种清洁方式`ViewModel`- 您在视图中显示的属性的容器，您的代码可能会在以后添加其他属性，因为我们的代码总是在发展。

参考 ViewModel 概念的用法：[**练习 5：创建视图模型**](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic7.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T17:39:02.683

DarthVader 的建议可能奏效了。这就是我最终做的事情：

1) 移除控制器

2）这样称呼它：

```
@{Html.RenderPartial("SidebarMain", new int[] {1,3,4,2});} 
```

3）这是我的视图代码：

```
@model int[]
@foreach( int item in Model){
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T02:15:18.290

达斯维德的好答案。您是否将其作为 Ajax 返回？如果您将它嵌入到主视图中，您应该将其作为 PartialView 返回

```
return PartialView("SidebarMain", model); 
```

这是 SidebarMain 是您要返回的局部视图的名称。结合 DarthVader 的建议尝试此操作，并确保您获得了一个模型以传回视图。

发布后，我意识到您正在使用 Html.Action。如果这是一个真正的侧边栏，它应该加载 ajax 作为局部视图，你应该调用

```
Ajax.ActionLink("SidebarMain", "Home", new { items = new List<int>(new int[] {1, 2, 3}) }) 
```

这将允许您停留在当前页面上。如果您不是在寻找 ajax 功能，我为兔子足迹道歉 :)

# mongodb - 如何在mongodb中删除深层嵌套对象

> ID：14421017
> 
> 赞同：11
> 
> 时间：2013-01-20T02:06:09.820
> 
> 标签：mongodb

假设我有一个代表这样的书籍的文档：

```
{
   "_id":"1234567890",
   "title":"Lord Of The Rings",
   "books": {
      "1234567890":{
         "_id":"123456789890",
         "title":"The Two Towers",
         "page_count":{
            "en":6000,
            "de":7000
         }
      },
      "2234567890":{
         "_id":"223456789890",
         "title":"The Return Of The King",
         "page_count":{
            "en":6000,
            "de":7000
         }
      },
   }
} 
```

我将如何删除第二本书的页数？我试过

```
{$unset : {"books.2234567890.page_count":""}} 
```

没用。有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-20T02:30:31.783

我试了一下，看起来你正在尝试做的事情应该可以正常工作。我会检查您的查询以找到要更新的正确文档，并确保它找到了您想要的内容。

```
> db.books.findOne()
{
        "_id" : "1234567890",
        "title" : "Lord Of The Rings",
        "books" : {
                "1234567890" : {
                        "_id" : "123456789890",
                        "title" : "The Two Towers",
                        "page_count" : {
                                "en" : 6000,
                                "de" : 7000
                        }
                },
                "2234567890" : {
                        "_id" : "223456789890",
                        "title" : "The Return Of The King",
                        "page_count" : {
                                "en" : 6000,
                                "de" : 7000
                        }
                }
        }
}
> db.books.update({'_id': "1234567890"}, {$unset: {'books.2234567890.page_count': ""}})
> db.books.findOne()
{
        "_id" : "1234567890",
        "books" : {
                "1234567890" : {
                        "_id" : "123456789890",
                        "title" : "The Two Towers",
                        "page_count" : {
                                "en" : 6000,
                                "de" : 7000
                        }
                },
                "2234567890" : {
                        "_id" : "223456789890",
                        "title" : "The Return Of The King"
                }
        },
        "title" : "Lord Of The Rings"
}
> 
```

# html - 使用 HTML/CSS 将图片上移

> ID：14421020
> 
> 赞同：1
> 
> 时间：2013-01-20T02:06:33.857
> 
> 标签：html, css

我对 HTML/CSS 比较陌生，并且很难将两张图片与 ASP MVC 网站对齐。我们用于菜单栏的书挡图片无法与其余的背景图片对齐。下面是问题的屏幕截图，HTML 和 CSS。未正确调整的书挡图片为 NAV-Left-Corner，CSS 中的 id 为“#menuLeft”。导航栏的其余部分使用水平重复的蓝色小图片。CSS 的那部分可以在“ul#Menu”部分找到。（我对正确的书挡也有同样的问题，只是想为了这篇文章而简化一些事情）

![行外菜单图片](../Images/ed1add6c65a642cedd0b12898f95514f.png)

HTML

```
 <body>
    @using Monet.Common

            <div class="page">
                <header>            
                <div style="margin: 20px;">
    @*                <a href="Home" style="color: white; font-size: 36px; font-weight: bold;text-decoration: none;" onclick="DoFun();">Monet </a>*@
                    <span href="Home" style="color: white; font-size: 36px; font-weight: bold;text-decoration: none;" onclick="DoFun();">Monet </span>
                    <span style="color: white; font-size: 18px; ">&nbsp;&nbsp; </span>
                </div>
    @*            </a>*@
    @*            <div id="logindisplay">
                    @Html.Partial("_LogOnPartial")
                </div>*@
                    <nav>                               
                        <ul id="menu">     
                            <img src="../../Content/images/NAV-Left-Corner.gif" id="menuLeft" alt="mLeft"/>
                            <li id="mTop">@Html.MenuLink("Agents", "Index", "Agent")</li>
                            <li class="mProducts">@Html.MenuLink("Products", "Index", "Product")</li>
                            <li class="mPt">@Html.MenuLink("Product Training", "Index", "Course")</li>
                            <li class="mCe">@Html.MenuLink("Continuing Ed", "Index", "ContEdCourse")</li>
                            <li id="mBottom">@Html.MenuLink("Help", "About", "Home")</li>                        
                            <img src="../../Content/images/NAV-Right-Corner.gif" id="menuRight" alt="mRight"/>
                         </ul>                    
                    </nav>
            </header> 
            <img src="../../Content/images/TEST2body_top.png"  id="topPic" alt="tag"/>       
                <section id="main">            
                @RenderBody()
            </section>
            <footer>
                <span style="color: Gray;"> Copyright © 2012 For Internal Use Only. </span>
            </footer>
            </div>
    </body> 
```

CSS

```
 ul#menu {
        /*border-bottom: 1px #5C87B2 solid;*/
        background-image: url('../../Content/Images/Nav-Background.gif');
        background-position:center;
        background-repeat:repeat-x;
        padding: 0 0 2px;
        position: relative;
        margin: 0;
        text-align: right;
    }

    #menuLeft
    {
        vertical-align:middle;
    }

    #menuRight
    {
        vertical-align:middle;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:19:49.147

我同意 Nile 的评论（“不要这样做”）。

无论如何-您可以通过添加一些填充或边距来向上或向下移动任何东西。您还可以使用负填充顶部，将图像向上移动，甚至在其容器之外。

```
ul#menu {
    /*border-bottom: 1px #5C87B2 solid;*/
    background-image: url('../../Content/Images/Nav-Background.gif');
    background-position:center;
    background-repeat:repeat-x;

    /* HERE */
    padding: -5 0 2px; 

    position: relative;
    margin: 0;
    text-align: right;
} 
```

我不确定这是否适合您，但这可能是定位物品的好技巧。

* * *

稍后编辑/添加：

也许你不应该在这样的严肃应用中尝试 CSS。应用程序“仅供内部使用”不需要花哨的效果。

阅读有关 CSS 的优秀教程并在工作中使用它之前进行一些练习（定位、渐变、浏览器支持）:)

[新波士顿](http://thenewboston.com)是一个非常好的网站，拥有我见过的最专业的免费课程和教程。

# three.js - 反向运动动画

> ID：14421031
> 
> 赞同：4
> 
> 时间：2013-01-20T02:09:44.060
> 
> 标签：three.js

我正在尝试在three.js 中查找或创建反向运动姿势的工作示例。理想情况下，我想通过他们的 Collada 导出器从 Makehuman 导出人体模型，使用 THREE.ColladaLoader 加载它们，并以编程方式或通过一些 dat.GUI 界面在 three.js 中将它们设置为不同的姿势。有点像艺术家玩偶的实现——我不需要动画，但是调整姿势时的实时反馈会很好，并且反向运动风格的姿势会非常受欢迎。

这几天我一直在研究和搜索信息。这个[http://www.youtube.com/watch?v=6om9xy6rnc0](http://www.youtube.com/watch?v=6om9xy6rnc0)非常接近，但我找不到任何示例代码或下载。我发现的最接近的工作示例是：http: [//mrdoob.github.com/three.js/examples/webgl_animation_skinning.html](http://mrdoob.github.com/three.js/examples/webgl_animation_skinning.html)然而，这似乎使用了预定义的动画帧，而这又似乎在前向运动学中操纵骨骼方式所以这也没有多大帮助。

我什至找不到用于测试的模型，因为我不知道在搜索与 Three.js 兼容的 IK rigs/skinning/bones 的东西时要寻找什么。Makehuman 似乎确实有很多索具导出选项，我不知道其中任何一个是否可用。

Three.js 中是否有可用的 IK 系统，如果有，是否有任何工作示例、工作人体模型或任何关于应该研究哪些精确装配系统/工作流程来完成此操作的提示？如果无法直接支持 Collada，在 Blender 中创建角色并导出它们也是一种选择。

编辑：找到这个现场演示[http://www.akjava.com/demo/poseeditor/](http://www.akjava.com/demo/poseeditor/)但代码完全不可读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-11T16:24:55.213

这似乎很有希望。

Fullik : Three.js 上逆运动学的 javascript 快速迭代求解器

是从 java 到 Caliko 3D 库的转换 Caliko 库是 FABRIK 逆运动学 (IK) 算法的实现

[https://github.com/lo-th/fullik](https://github.com/lo-th/fullik)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-12T07:34:07.383

I don’t feel competent enough to answer your question, but I’ll post three links which may put you on the right track.

*   [wylieconlon/kinematics](https://github.com/wylieconlon/kinematics)
    – a great demo of 2D inverse kinematics animation. The code is totally readable.

*   [https://www.khanacademy.org/computer-programming/inverse-kinematics/1191743453](https://www.khanacademy.org/computer-programming/inverse-kinematics/1191743453)
    – another demo, this time less flexible but more terse.

*   [How to calculate inverse kinematics](https://stackoverflow.com/questions/3518130/how-to-calculate-inverse-kinematics)
    – a rabbit hole of links. Just in case you’d want to dive right into the thing.

# jquery - 可以使用 jquery 在网页的不同部分使用 keydown 吗？

> ID：14421039
> 
> 赞同：1
> 
> 时间：2013-01-20T02:12:18.183
> 
> 标签：jquery

假设我有以下内容，

```
<div id="sectionA"></div>
<div id="sectionB"></div>
<div id="sectionC"></div> 
```

```
$("#sectionA").bind(keydown, function(events)
{
    alert("section A");
    return false;
});

$("#sectionB").bind(keydown, function(events)
{
    alert("section B");
    return false;
});

$("#sectionA").bind(keydown, function(events)
{
    alert("section C");
    return false;
}); 
```

这可能吗，如果没有，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:15:46.773

它可以处理具有焦点的项目。您可以制作它们`contenteditable`，或者正如 Marc 提到的那样，给它们 a`tabindex`并且它会起作用。

您还需要确保将事件引用为字符串，而不是变量：

```
$("#sectionA").bind(keydown, function(events) 
```

应该

```
$("#sectionA").bind('keydown', function(events) 
```

演示：http: [//jsfiddle.net/5upvR/](http://jsfiddle.net/5upvR/)

# c# - 反序列化 EventValidation 对象

> ID：14421041
> 
> 赞同：1
> 
> 时间：2013-01-20T02:12:31.907
> 
> 标签：c#, asp.net, serialization, viewstate, eventvalidation

我正在尝试序列化和反序列化事件验证存储。我已经使用 MSDN 上的代码对视图状态执行相同的操作。我似乎无法从 EventValidation 对象中获取数据。

```
System.Web.UI.LosFormatter los = new System.Web.UI.LosFormatter();
var t = los.Deserialize("/wEdAAXD48AAvF6Ff7P5UOQbT3VqkrDKlMWdnNXfGOHHYL4xn7VF+rYDddmo2pWyOYlEzR9ytSa0+vS8Kw5xkFTTwf/ogY5mU3PIFIVTnINRkldVDi8fjE6FJuo5OYrccfM1phFxAalSeL3MjHSQK44wYPDs")
HashSet<object> h = new HashSet<object>();
foreach (object d in t)
{
   DoSomething()
} 
```

System.Web.UI.EventValidationStore 是对象类型（？）

我曾尝试使用哈希集、列表等。我对此并不陌生，这超出了我所知道的范围，但我很想学习它。

我得到的错误是：“foreach 语句不能对 'object' 类型的变量进行操作，因为 'object' 不包含 'GetEnumerator' 的公共定义”

我在 MSDN 上找不到任何关于 System.Web.UI.EventValidationStore 的信息。

如果这是一个令人困惑的帖子，我深表歉意，我只是不知道如何问它。

**更新：** 我成功反序列化了一个 EventValidation base64 字符串，但其他人被证明是难以捉摸的。代码段中的那个似乎不起作用。

摘要：我需要能够在 .NET 中对 eventvalidation base64 字符串进行解码/反序列化和编码/序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:51:45.337

`__EVENTVALIDATION`字段结构是 ASP.NET 内部的，可能会发生变化。不支持尝试反序列化/序列化它。支持的交互方式是通过页面`ValidateEvent`和`RegisterForEventValidation`API。

你到底想完成什么？也许我们可以找到一种支持的方式来做到这一点。

# wcf - WCF 服务行为

> ID：14421042
> 
> 赞同：2
> 
> 时间：2013-01-20T02:12:47.210
> 
> 标签：wcf, wcf-binding, http.sys

我有一个托管在 Windows 服务中的自托管 WCF 服务。我的绑定设置为 basicHttpBinding。

当我运行服务时，我运行 netsh http show servicestate 并且我看到我的服务正在监听；但是，我似乎无法正确配置参数。

在 IIS 下托管时，它的执行速度会慢 20%，所以我想自己托管。如何配置我的自托管 WCF 服务的参数以匹配 IIS？我特别关注的参数是超时、最大连接数、超时和最大请求​​数。我试图提出服务行为；但是，它什么也没做。我在 HTTP/Parameters 下的注册表中添加了 MaxConnections 也没有运气。任何帮助表示赞赏。

以下是在 IIS 下托管时的输出：

```
Server session ID: F9000000200015DA

    Version: 2.0
    State: Active
    Properties:
        Max bandwidth: 4294967295
        Timeouts:
            Entity body timeout (secs): 120
            Drain entity body timeout (secs): 120
            Request queue timeout (secs): 65535
            Idle connection timeout (secs): 120
            Header wait timeout (secs): 120
            Minimum send rate (bytes/sec): 240
    URL groups:
    URL group ID: F600000040001737
        State: Active
        Request queue name: MyService
        Properties:
            Max bandwidth: inherited
            Max connections: 4294967295
            Timeouts:
                Entity body timeout (secs): 120
                Drain entity body timeout (secs): 120
                Request queue timeout (secs): 65535
                Idle connection timeout (secs): 120
                Header wait timeout (secs): 0
                Minimum send rate (bytes/sec): 0
            Logging information:
                Log directory: C:\inetpub\logs\LogFiles\W3SVC2
                Log format: 0
            Authentication Configuration:
                Authentication schemes enabled:
            Number of registered URLs: 1
            Registered URLs:
                HTTP://*:80/

Request queues:
    Request queue name: MyService
        Version: 2.0
        State: Active
        Request queue 503 verbosity level: Basic
        Max requests: 3000
        Number of active processes attached: 1
        Controller process ID: 1400
        Process IDs: 
```

这是我自托管时的输出：

```
Server session ID: FC00000120000229

    Version: 2.0
    State: Active
    Properties:
        Max bandwidth: 4294967295
        Timeouts:
            Entity body timeout (secs): 120
            Drain entity body timeout (secs): 120
            Request queue timeout (secs): 120
            Idle connection timeout (secs): 120
            Header wait timeout (secs): 120
            Minimum send rate (bytes/sec): 150
    URL groups:
    URL group ID: FB000001400005DE
        State: Active
        Request queue name: Request queue is unnamed.
        Properties:
            Max bandwidth: inherited
            Max connections: inherited
            Timeouts:
                Timeout values inherited
            Number of registered URLs: 1
            Registered URLs:
                HTTP://+:80/MyService/

Request queues:
    Request queue name: Request queue is unnamed.
        Version: 2.0
        State: Active
        Request queue 503 verbosity level: Basic
        Max requests: 1000 
```

这是我的服务配置文件：

```
<?xml version="1.0"?> <configuration>   <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyThrottle">
          <serviceThrottling maxConcurrentCalls="3000" maxConcurrentSessions="3000"
            maxConcurrentInstances="12500" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="MyConfig" closeTimeout="00:10:00"
          openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
          maxReceivedMessageSize="10485760" useDefaultWebProxy="false">
          <readerQuotas maxDepth="999999999" maxStringContentLength="999999999"
            maxArrayLength="999999999" maxBytesPerRead="999999999" maxNameTableCharCount="999999999" />
          <security mode="None">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="MyThrottle" name="This.MyService">
        <endpoint address="http://localhost:80/MyService" binding="basicHttpBinding"
          bindingConfiguration="MyConfig" name="MyService"
          contract="This.IMyService" />
      </service>
    </services>   </system.serviceModel> </configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:36:42.833

以下是 Microsoft HTTP.SYS 团队的官方回应：

“Max Connections” = HttpServerConnectionsProperty 输出与“Max Requests” = HttpServerQueueLengthProperty 的含义不同。

HttpListener 不允许您为 URL 组设置 Max Connections 属性 (HttpServerConnectionsProperty) 或为请求队列设置 Max requests 属性 (HttpServerQueueLengthProperty)，因此 WCF 在通过代码自托管时无法设置 http.sys 设置。

# ios - 强制 iPad 视网膜模拟器适合 MacBook Air 屏幕

> ID：14421048
> 
> 赞同：3
> 
> 时间：2013-01-20T02:13:38.830
> 
> 标签：ios, xcode, ios-simulator

在我的 MB Air 上，iPad（视网膜）模拟器，即使是最小尺寸（50% 比例）也不适合屏幕，需要 awkard 滚动。有谁知道可以编辑的属性或使其小于 50% 的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-21T08:50:43.393

您可以使用 cmd 键修饰符来更改大小：

*   Cmd+1 - 原始
*   Cmd+2 - 更小
*   Cmd+3 - 最小（这在我的 Macbook Air 11 上最适合我）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T02:42:03.067

不幸的是，从我发现的情况来看不是。[这个来自类似问题的链接](https://stackoverflow.com/questions/1446135/reduce-the-size-of-the-iphone-simulator-window)解释说，

> 保持 1 比 1 的像素比率对于准确的渲染分析似乎是合理的，否则它必须对像素进行二次采样，从而导致分析不正确。

我使用的是 13" MB，所以我知道很难将 iPad 模拟器放在屏幕上。

# javascript - ListVIew 中的动态绑定项

> ID：14421051
> 
> 赞同：2
> 
> 时间：2013-01-20T02:13:55.577
> 
> 标签：javascript, listview, windows-8, windows-store-apps, winjs

在我的 Windows 8 JavaScript 应用程序中，我有一个 ListView。我需要添加一条消息或链接到一行，具体取决于当前用户的状态。所以我基本上需要根据一些标志显示或隐藏项目。如何使用 ListView 的 JavaScript API 在项目级别解析项目？根据 MSDN，ListView 控件上没有项目集合，我需要访问行级别的数据和项目。

我确定我以某种方式想念它，只是进入这个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:44:13.907

我不完全清楚你想做什么，但我会试一试。如果您需要有条件地显示或隐藏项目（或项目的某些部分），您可以使用几种方法。

首先是创建一个命令式模板渲染函数。首先，告诉您 ListView 它的项目模板是一个类似`myListView.itemTemplate = myCustomFunction`. 然后编写如下函数：

```
function myCustomFunction(itemPromise) {
    //you have to return a promise
    return itemPromise.then(function (item) {
        //get the right item template (declared in your HTML),
        //render the item data into it, and return the result
        var itemTemplate;
        if (item.data.key === "foo")
            itemTemplate = q("#fooItemTemplate", element); //return foo template
        else if (item.data.key === "bar")
            itemTemplate = q("#barItemTemplate", element);
        return itemTemplate.winControl.render(item.data);
    });
} 
```

如果其中一个项目模板具有显示或隐藏部分的显式样式代码，而另一个没有，那么您将获得所需的结果。

另一种方法是等到 ListView 完成加载，然后根据您的条件遍历和操作 DOM。

要捕获 ListView 完成加载的时刻，请执行以下操作：

```
myListViewControl.onloadingstatechanged = function (e) {
    if (myListViewControl.loadingState == "complete") {
        ...
    }
} 
```

ListView 在加载时会经历几个加载状态，最后一个是“完成”。完成后，您可以使用强大的 CSS 选择器和 ECMAScript 5 提供的新 querySelector/querySelectorAll 方法来查找所有 ListView 项目，如下所示：

```
myListView.querySelectorAll(".win-item") 
```

这将返回所有 ListView 项目的 NodeList，您可以使用 DOM 操作中的忍者技能来处理它们。

希望有帮助！！

PS 查看 codeSHOW 了解更多 Windows 8 中的 HTML/JS 开发（[aka.ms/codeshowapp](http://aka.ms/codeshowapp) | [codeshow.codeplex.com](http://codeshow.codeplex.com)）

# ocmock - 编译器对模拟对象感到困惑

> ID：14421054
> 
> 赞同：3
> 
> 时间：2013-01-20T02:14:04.983
> 
> 标签：ocmock

我正在使用 OCMock 来帮助我使用 Xcode 为 iPad 应用程序做的测试驱动开发。我有这样的测试代码：

```
id mock = [OCMockObject mockForProtocol:@protocol(SomeProtocol)];
Vector direction = { 1.0f, 2.0f, 3.0f };
[[mock expect] setDirection:direction]; 
```

当我尝试编译时，我收到如下警告和错误：

> 警告：找到多个名为“setDirection：”的方法
> 
> 错误：将“向量”发送到不兼容类型
> “UISwipeGestureRecognizerDirection”的参数（又名“枚举 UISwipeGestureRecognizerDirection”）

显然，编译器无法确定 mock 应该是什么类型的对象。我不确定如何指定它应该处理来自 SomeProtocol 协议的 setDirection 方法，而不是来自另一个类的 setDirection 方法。

可以做些什么来成功构建这样的测试用例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T21:39:21.713

用演员来限定模拟将消除歧义：

```
[(id<SomeProtocol>)[mock expect] setDirection:direction]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-26T18:36:47.580

对于 OCMock 3 现代语法：

```
id protocolMock = OCMProtocolMock(@protocol(MYProtocol));
OCMExpect([(id <MYProtocol>)protocolMock ambiguousMethod]); 
```

# ruby - rails 3中的standforn-core-nlp gem'找不到JAR文件'

> ID：14421064
> 
> 赞同：2
> 
> 时间：2013-01-20T02:15:28.190
> 
> 标签：ruby, ruby-on-rails-3, gem, nlp, stanford-nlp

我正在尝试将[standford-core-nlp](https://github.com/louismullie/stanford-core-nlp) gem 与 rails 3 一起使用，但我不断收到错误消息“找不到 JAR 文件（在 ../standford-core-nlp-full/joda-time.jar 中查找）。”。该文件位于它要查找的位置。有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T00:18:25.743

我尝试使用[stanford-core-nlp](https://github.com/louismullie/stanford-core-nlp) gem 并没有遇到您描述的问题。

我将**stanford-core-nlp-full**的内容放入gem的**bin目录中。**要查看 gem 的安装位置，请使用以下命令：

```
$ gem env
  RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2013-05-16 patchlevel 392) [java]
  - INSTALLATION DIRECTORY: /home/george/.rvm/gems/jruby-1.7.4
  - RUBY EXECUTABLE: /home/george/.rvm/rubies/jruby-1.7.4/bin/jruby
  - EXECUTABLE DIRECTORY: /home/george/.rvm/gems/jruby-1.7.4/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - universal-java-1.7
  - GEM PATHS:
     - /home/george/.rvm/gems/jruby-1.7.4
     - /home/george/.rvm/gems/jruby-1.7.4@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "install" => "--no-rdoc --no-ri"
     - "update" => "--no-rdoc --no-ri"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

**GEM PATHS**告诉你路径。现在将您的模型放入 stanford 解析器的 bin 目录中。就我而言，它是*/home/george/.rvm/gems/jruby-1.7.4/gems/stanford-core-nlp-0.5.1/bin/*

如果您绝对想让您的模型与 gem 分开，只需指定模型的完整路径。

# c - 是否可以在函数原型和定义中使用宏？

> ID：14421065
> 
> 赞同：2
> 
> 时间：2013-01-20T02:15:28.943
> 
> 标签：c, function, macros, prototype

我有一些函数共享我想要传递的公共参数，那么是否可以使用宏来避免重复写出公共参数？

例如，以下工作是否可行？

```
#define STD_ARGS arg1, int arg2, int arg3

foo(int STD_ARGS, int foo_arg1, int foo_arg2);
foo(int STD_ARGS, int foo_arg1, int foo_arg2) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T02:17:40.467

当然，这是合法的。-d 宏的扩展`#define`只不过是替换标记，忽略这些标记的含义（如果有的话）。

（这是否是一个好主意取决于它的记录程度、使用的传播范围等等。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T02:21:24.887

是的，它有效。宏的工作只是`STD_ARGS`用`arg1, int arg2, int arg3`. 在编译之前。所以，这是合法的。

# opencl - OpenCL 头文件难度

> ID：14421067
> 
> 赞同：1
> 
> 时间：2013-01-20T02:15:56.307
> 
> 标签：opencl, header-files

所以我正在尝试建立一种方法来轻松开发 OpenCL 程序，结果证明这是迄今为止学习这门语言最难的部分。我在源文件中包含 CL/cl.h，但我不断收到头文件不存在的编译器错误。当我将包含更改为仅 cl.h 时，它可以工作，但到目前为止我看到的每个程序都使用 CL/cl.h，所以我假设它是某种宏来允许任一文件。有什么想法可以解决这个问题或可能的修复吗？

这是我的makefile

项目=ocl_intro

CC=mingw32-g++

CFLAGS=-std=c99 -Wall

LIB=-lOpenCL

ifdef INTELOCLSDKROOT

```
INC_DIRS="$(INTELOCLSDKROOT)include\CL"

LIB_DIRS="$(INTELOCLSDKROOT)lib\x86 
```

万一

$（项目）：$（项目）.cpp

```
$(CC) $(CFLAGS) -o $@ $^ -I$(INC_DIRS) -L$(LIB_DIRS) $(LIB) 
```

.PHONY：干净

干净的：

```
rm $(PROJ).exe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:47:04.183

改变：

```
INC_DIRS="$(INTELOCLSDKROOT)include\CL" 
```

到：

```
INC_DIRS="$(INTELOCLSDKROOT)include" 
```

您正在寻找“CL/cl.h”，显然它不会在“include\CL”中找到名为“CL”的文件夹，因为您已经将“CL”文件夹作为搜索路径。就像现在一样，您实际上是在要求编译器找到“\include\CL\CL\cl.h”，显然编译器将失败，因为该文件不存在。

您只需提供“包含”文件夹的路径 - 其余的将由约定完成。

# ios - 将数据视图控制器传递给 NSObject

> ID：14421069
> 
> 赞同：0
> 
> 时间：2013-01-20T02:16:31.843
> 
> 标签：ios, objective-c, nsobject

我在一个项目上遇到了一点问题。该项目以用户选择帐户（ACAccount）的视图开始。问题是如何将用户选择的帐户发送到 NSObject。

例子：

ViewControllerGetAccounts（选择帐户）-> NSObject（加载数据）-> ViewControllerViewDataOfAccount（显示数据）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-20T02:50:10.437

你给你的 NSObject 子类一个公共方法，比如

```
 - (myData*)loadData:(id)accountID; 
```

因此，您可以从 viewController 向对象发送 loadData: 消息，并且 - 假设您已经正确定义了`loadData:`方法 - 期望收到一些`myData*`数据。

在您的视图控制器中：

```
 MyData* myData = [myObject loadData:accountID]; 
```

现在你有了数据，你可以用它做你想做的事。

# ios - 方法从未调用过？

> ID：14421071
> 
> 赞同：0
> 
> 时间：2013-01-20T02:16:43.200
> 
> 标签：ios, objective-c, methods

我的标题

```
@interface WirelessController : UIViewController {
    Server *_server;
}
@property(nonatomic, retain) Server *server; 
```

我的主要课程

```
@synthesize server = _server;
NSData *data = [@"Some encoded text." dataUsingEncoding:NSUTF8StringEncoding];
/* BOOL test = */ [self.server sendData:data error:nil]; 
```

我在 sendData 方法（在服务器类内部）设置了一个断点，但它从未被触发，并且 BOOL 测试返回 false。似乎那条线对设备来说是不可见的，并且没有运行或其他东西。

**编辑：** 我没有将 self.server 链接到最初分配的一个（恰好是 ivar）。有什么办法可以访问该 ivar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:18:57.943

你如何分配服务器？

某处，应该有一行有点像：

```
self.server = [[Server alloc] initWithURL:anURL]; // assuming ARC, so implied double retain matters not. 
```

（显然，用您的特定应用程序的详细信息替换`initWithURL:`和。）`Server`

* * *

好的 - 所以你在其他课程中有这个：

```
other.server = [[Server alloc] initWithProtocol:type]; 
```

(1) 确定正在执行？

(2) 在正在执行的代码中，在前面`sendData:`放一个`assert(self.server);`，然后再试一次（即检查是否为nil）。

# backbone.js - 将“this”引用传递给 Backbone 函数

> ID：14421077
> 
> 赞同：0
> 
> 时间：2013-01-20T02:17:40.827
> 
> 标签：backbone.js, requirejs, handlebars.js

我正在尝试使用require.js、AMD 和handlebars 为模板构建一个Backbone 应用程序。这是我的索引视图的代码。

```
define([
  'jquery',
  'underscore',
  'backbone',
  'handlebars',
  'collection/questions',
  'helpers'
], function($, _, Backbone, Handlebars, QuestionsCollection, Helpers){
// Main Index View
var IndexView = Backbone.View.extend({
    el: "#content",
    template: Helpers.template('index'),

    initialize: function(){
        this.questions = new QuestionsCollection();
        this.questions.on('sync', this.render, this);
        this.questions.fetch();
    },

    render: function(){
        this.$el.html(this.template(this));
        this.questions.each(this.addQuestion, this);
        return this;
    },

    addQuestion: function(question){
        var view = new IndexView.Question({ model: question });
        view.render();
    },

    count: function(){
        console.log(this);
        return this.questions.length;
    }
});

// Individual Question View
IndexView.Question = Backbone.View.extend({
    render: function(){
        // console.log(this.model);
    }
});

return IndexView;
}); 
```

在这里，一切都按预期工作。但现在我想要一个辅助函数 count 来返回集合中模型的数量。这样我就可以用`{{count}}`我`handle bar template`的来打印类似的东西。`'There are 8 questions'`. 但我的范围有问题。

内部`count`函数 this 指的是`window`而不是指`collection`. 我将如何`count`在`question collection`. 我计划在我的应用程序中使用许多这些辅助功能。所以需要一些可靠的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T03:11:09.123

您可以使用 Underscore.js 中的“ [bindAll](http://underscorejs.org/#bindAll) ”函数，如下所示：

```
initialize: function () {
    _.bindAll(this, 'count');
    // your initialize code
} 
```

基本上，它用类似于以下的代码替换了您的“计数”方法：

```
var thisReference = this;
var originalCount = this.count;

this.count = function () {
    originalCount.apply(thisReference, Array.prototype.slice.call(arguments));
}; 
```

即，它只是保存原始的“this”引用，并在调用“count”方法时传递它。

今天的浏览器已经内置了对这个习惯用法的支持（参见 参考资料 [`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)）。

不过，在这种情况下，最好将 传递`count`为模板变量：

```
render: function () {
    this.template({
        count: this.count()
    });
} 
```

# ruby-on-rails - Ruby on Rails 命令行看起来很奇怪

> ID：14421079
> 
> 赞同：2
> 
> 时间：2013-01-20T02:18:28.457
> 
> 标签：ruby-on-rails, windows, command-line

我刚开始使用 railstutorial.org 的资料学习 RoR。当作者使用命令行时，生成的文本总是井井有条并着色。当我做同样的事情时，我经常得到“奇怪”的字符和杂乱无章的文本。

[http://i.imgur.com/2Q0kzwf.jpg](http://i.imgur.com/2Q0kzwf.jpg) 示例

[http://i.imgur.com/mZP4SI9.jpg](http://i.imgur.com/mZP4SI9.jpg) 我尝试做同样的事情

我不太确定如何使我的命令行更有条理，就像教程中显示的那样。任何帮助，将不胜感激。如果您需要知道，我使用的是 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:26:04.090

这是因为默认情况下 Windows 命令提示符不知道 ANSI 颜色序列。您可以尝试[https://github.com/adoxa/ansicon](https://github.com/adoxa/ansicon) ，它应该可以让它知道。教程作者看起来像这样的原因是他们使用了一个能够理解颜色代码的 *nix shell（如果我不得不猜测的话，可能是 linux 或 osx 上的 bash 或 zsh）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:28:41.200

正如[Doon 所指出的](https://stackoverflow.com/a/14421118/527152)，[Windows 控制台无法识别 ANSI 序列](http://en.wikipedia.org/wiki/ANSI_escape_code#Windows_and_DOS)。正如建议的那样，您现在最好的选择是使用外部工具。

然而，由于使用大多数外部工具存在一些痛点，[Ruby 2.0 将在 Ruby 中提供对 ANSI 转义码](http://bugs.ruby-lang.org/issues/6418)的开箱即用支持，而无需依赖外部 gem 或工具。

# javascript - 条件语句只对滑块的初始值做出反应

> ID：14421081
> 
> 赞同：0
> 
> 时间：2013-01-20T02:18:51.497
> 
> 标签：javascript, jquery-ui, uislider, conditional-statements

我的页面上有一个滑块（带范围），我希望图像根据用户设置的范围出现或消失。我在代码末尾使用条件语句执行此操作。条件语句对滑块的初始值 [1500,1600] 做出正确反应，但对用户移动滑块没有反应，因此会更改值。

```
$(function() {
    $( "#slider-range" ).slider({
        range: true,
        min: 300,
        max: 3000,
        values: [ 1500, 1600 ],
        step: 10,
        slide: function( event, ui ) {
            $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
        }
    });

    $( "#amount" ).val(
        "$" + $( "#slider-range" ).slider( "values", 0 ) +
        " - $" + $( "#slider-range" ).slider( "values", 1 )
    );

    var handlevalues = ( $("#slider-range").slider('values') );

    var dot0001 = { price: 1300 }

    if (handlevalues[0] > dot0001.price) {
        $("#dot0001").css("visibility", "hidden")
    } else {
        $("#dot0001").css("visibility", "visible")
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:27:27.453

将相同的条件语句添加到您的`slide`函数中：

```
slide: function( event, ui ) {
    $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );

    var dot0001 = { price: 1300 };
    if (handlevalues[0]>dot0001.price){
        $("#dot0001").css("visibility", "hidden");
    } else{
        $("#dot0001").css("visibility", "visible");
    }

} 
```

为避免重复代码，您可以将该语句放在单独的函数中，并从两个位置调用它。

# json - 如何使用 Jquery 创建以下内容？

> ID：14421085
> 
> 赞同：-5
> 
> 时间：2013-01-20T02:19:26.463
> 
> 标签：json, jquery-ui, jquery

我想知道如何使用 jquery 创建类似于下图的内容？有一个以 30 分钟为增量的网格，允许用户单击一个段，它们显示为三个选项，在线、离开和关闭。一旦选择，该信息将使用 json 发送到服务器端。

我刚开始使用 jquery，不知道从哪里开始或在 google 上搜索什么来开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:30:31.303

我会创建一个矩阵，其中行是时间，列是星期几。

然后我将创建一个具有四种状态的对象，在线、离线、离开、关闭，它将占据矩阵中的每个位置。每个元素的声明会根据用户和 UI（即那些按钮）之间的交互而改变

您可以通过 ajax 轻松地将每个元素的 json 信息发送到服务器，方法是在状态更改时对其进行压缩。

祝你好运。

# javascript - 过滤骨干集合时的内存泄漏

> ID：14421086
> 
> 赞同：3
> 
> 时间：2013-01-20T02:19:38.660
> 
> 标签：javascript, backbone.js, backbone-events

我有一个过滤器正在处理我的骨干集合。在搜索框中键入搜索并列出实时过滤器。效果很好，至少我是这么认为的。当我查看 chrome 中的内存堆快照时，我可以看到每次搜索都会泄漏内存...... 6 megs 8 megs... 不久之后堆快照就超过了 100 megs。

我在下面的视图中隔离了问题。如果我在初始化函数中注释掉 this.listenTo ，我似乎不再泄漏内存。

所以我的问题是如何保持这些事件侦听器和集合上的实时过滤而不会泄漏。

```
var View = Backbone.View.extend({

    tagName: 'tr',

    initialize: function() {
        this.listenTo(this.model, 'change', this.render);
        this.listenTo(this.model, 'destroy', this.remove);
    },

    events: {
        'click .edit': 'edit',
        'click .delete': 'delete',
    },

    edit: function() { /* EDIT */ },

    delete: function() {
        this.model.destroy(); //backbone
    },

    render: function () {
        var template = _.template( ProductTemplate )
        this.$el.html( template({ this.model.toJSON() }) )
        return this;
    }

})

var ListView = Backbone.View.extend({

    initialize: function()
    {
        this.collection = new Collection( Products ) //products are bootstrapped on load
    },

    render: function (terms)
    {
        this.$el.html( ListTemplate );

        var filtered = Shop.products.collection.search(terms)

        _.each(filtered, this.addOne, this)

        //append list to table
        $('#products').html( this.el )

        return this
    },

    addOne: function (product)
    {
        this.$el.find('tbody').append(
            new View({ model: product }).render().el
        )

        return this
    },

});

var Collection = Backbone.Collection.extend({

    model: Model,

    search : function(letters){

        //set up a RegEx pattern
        var pattern = new RegExp(letters,"gi")

        //filter the collection
        return this.filter(function(model)
        {
            if(letters == "") return true //if search string is empty return true
            return pattern.test(model.attributes['Product']['name'])
        });
    }

}); 
```

解决了：

这是我的新搜索方法。我不再过滤集合并重新渲染。我只是遍历集合，如果模型与搜索匹配，我们触发“显示”事件，如果它不在搜索中，我们触发“隐藏”事件。然后我们在视图中订阅这些事件并采取相应的行动。

集合中的搜索功能：搜索：功能（查询）{

```
 //set up a RegEx pattern
    var pattern = new RegExp(query,"gi")

    //filter the collection
    this.each(function(model){
      if ( pattern.test(model.attributes['Product']['name']) ){
        model.trigger('show')
      }
      else{
        model.trigger('hide')
      }
});
} 
```

新视图： var ProductView = Backbone.View.extend({

```
 tagName: 'tr',

    initialize: function() {
        this.listenTo(this.model, 'show', this.show);
        this.listenTo(this.model, 'hide', this.hide);
    },

    hide: function()
    {
      this.$el.addClass('hide')
    },

    show: function()
    {
      this.$el.removeClass('hide')
    },

    render: function ()
    {
        var template = _.template( ProductTemplate )
        this.$el.html( template( {data: this.model.toJSON(), Utils: Shop.utils} ) )
        return this;
    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T05:31:50.127

要扩展 @mu 已经评论过的内容，您不会删除您创建的视图。它们不在 DOM 中，但它们仍然在内存中徘徊，因为它们引用了您的模型（因此，垃圾收集器不会为您删除它们）。

你有几个选择：

1.  跟踪所有正在实例化的视图，并在`addOne`每次`render`调用时删除它们。
2.  每次更改过滤条件时，让您的代码显示/隐藏视图而不是实例化/销毁。这是更多的工作，但肯定是更优化的解决方案。

# php - PHP 保护目录免受直接 URL 访问

> ID：14421087
> 
> 赞同：3
> 
> 时间：2013-01-20T02:19:39.910
> 
> 标签：php, apache, security, .htaccess, authentication

我有一个管理员脚本。

```
admin/index.php 
```

所有活动都是通过这个`index.php`文件完成的。
用户在访问程序功能之前登录。
`$_SESSION['user_authenticated']`被创建并设置为**true**。

```
admin/template/.. 
```

此文件夹包含`images`, `css`,`javascript`文件。
它们仅在此 ADMIN 中使用。（仅在后端）

**问题：**

`admin/template/..`我需要保护目录中的所有内容不被**直接访问**。
它应该只对经过身份验证的用户可用。

我想必须有一个`.htaccess`重定向请求`check_session_auth_variable.php`，它看起来`$_SESSION['user_authenticated']`是**真**还是**假**并**重定向到请求的文件**或**抛出 404 错误**？

*我知道最好的选择是将目录放在 Web 根目录之外，但在我的情况下，我需要保持目录结构不变，无需修改。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T02:22:23.460

**管理员/.htaccess：**

```
RewriteCond %{REQUEST_FILENAME} !check_auth.php
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* check_auth.php?file=$0 [QSA,L] # pass everything thru php 
```

**管理员/check_auth.php：**

```
$file = $_GET['file'];
if($_SESSION['user_authenticated']) {
    // please mind you need to add extra security checks here (see comments below)
    readfile($file); // if it's php include it. you may need to extend this code
}else{
   // bad auth error
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T13:35:42.610

好的，这是我的答案——最好的答案是“不”。但是 images/js/css 在开发中相对重要（在上线之前公开），并且客户端预览表明我们不能执行基于 IP 的 apache 规则。所以，规则（从上面，稍微修改）是

```
RewriteEngine On

# Exclude the public and error directories from authentication
RewriteRule ^(public|error)($|/) - [L]

# Perform authentication via php
RewriteCond %{REQUEST_FILENAME} !auth.php
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* auth.php?requested_file=$0 [QSA,L] 
```

（因为我需要一些内容确实公开的子目录，请阅读：登录页面上使用的 images/css/js）

相关的php如下；为了

```
 if($authenticated){
            if($extension == 'php'){    

                call_user_func(function(){

                    $file_name = func_get_arg(0);

                    $path = getcwd();
                    chdir(pathinfo($file_name,PATHINFO_DIRNAME));
                    return include($file_name);
                    chdir($path);

                }, $file_name);

            } else {

                //set cache headers so the browsers don't have to refresh all the
                // static content
                header_remove('X-Powered-By');
                header_remove('Transfer-Encoding');
                header_remove('Cache-Control');
                header_remove('Pragma');
                header_remove('Expires');
                //header('Expires:');

                header('Content-type: '.$mime_type);
                readfile($file_name);
            }
        } 
```

它的作用是执行 php using`call_user_func()`以停止命名空间污染，`include()`执行 PHP，并`chdir()`确保脚本获得正确的当前工作目录。

那是“容易”的部分；内容标题和 mime 类型必须“猜测”（我使用 finfo 作为 mime 类型，但它在 2013 年有一个错误，这只会加剧问题）但即使是 apache 也不能 100% 正确地做到这一点...

然后删除图像的缓存控制标头，否则您不仅会经常成为 php 页面...

可以说；如果你有粗管道和很多你不需要的 CPU 周期，你只需要这样做......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T18:33:43.773

我通常用这个

```
$redi_ext = $_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
$php_verify = strpos($redi_ext, ".php");
if($php_verify !== false){ header('location: PAGE_NOT_FOUND_URL'); } 
```

# java - 防止第一列在 JTable 中重新排序

> ID：14421089
> 
> 赞同：1
> 
> 时间：2013-01-20T02:19:59.670
> 
> 标签：java, swing, jtable

> **可能重复：**
> [如何防止单个列在 JTable 中重新排序？](https://stackoverflow.com/questions/1155137/how-to-keep-a-single-column-from-being-reordered-in-a-jtable)

使用：

```
getTableHeader().setReorderingAllowed(false); 
```

将防止所有列重新排序。但是，我只想防止第一列被重新排序。

谷歌搜索后，这是我发现的最接近的：

```
setColumnModel(new DefaultTableColumnModel() {  
    public void moveColumn(int columnIndex, int newIndex) {  
        if (columnIndex == 0 || newIndex == 0) return; // don't allow  
        super.moveColumn(columnIndex, newIndex);  
    }  
}); 
```

但是，这会在尝试拖动第一列时导致奇怪的视觉缺陷。任何人都可以完美解决这个问题？

# c++ - 字节的大小能否大于八位字节 8 位

> ID：14421101
> 
> 赞同：1
> 
> 时间：2013-01-20T02:22:35.170
> 
> 标签：c++, byte

我正在浏览[http://www.parashift.com/c++-faq/index.html](http://www.parashift.com/c++-faq/index.html)，在那里我发现字节也可以是 64 位[http://www.parashift.com/c++-faq/very-large-字节.html](http://www.parashift.com/c++-faq/very-large-bytes.html)。有可能吗？一个字节这么多的存储容量有什么用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T02:27:48.317

关键不是大字节“本身”的用处，而是事实上，对于标准，一个字节是系统上最小的可寻址数量¹；如果系统不能以小于 64 位的单位寻址其内存，`char`则将是 64 位。

显然，在现代通用计算机上几乎不可能找到这种奇怪的东西，这些奇怪的东西出现在非常专业的硬件上（我听说 DSP 特别容易出现这种东西），通常是出于性能原因。

[您可以在其他常见问题解答](http://www.parashift.com/c++-faq/bytes-review.html)中查看更多相关信息。

* * *

1.  大于 8 位并且能够保存一组基本字符（字母数字字符加上一些符号，IIRC）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T02:36:16.153

您正在寻找的关键定义是 CHAR_BIT，它仅在 C99（以及相应的现代 C++ 系统）中保证 >=8。POSIX 要求 CHAR_BIT == 8。

如前所述，并非所有系统都将其固定为 8 的真正原因是 DSP，它简化了它们的寻址机制以提高速度，只允许对架构字长进行一次对齐。大多数现代 DSP 都是 16 位或 32 位的，但我想有些也是 64 位的。

如果您确实有重要的代码，您可以使用 CHAR_BIT 从字节计算 8 位块，这应该在 CHAR_BIT==8 平台上进行优化。

# java - 为什么java给我这个NullPointerException？

> ID：14421104
> 
> 赞同：-1
> 
> 时间：2013-01-20T02:22:47.213
> 
> 标签：java, plugins, nullpointerexception, minecraft, bukkit

好的，所以我一直在使用 Eclipse 为 Minecraft 制作 Bukkit 插件。出于某种原因，我收到了很多看似不合理的 NullPointerExceptions。我发现当您尝试使用值为 null 的变量类型的值和函数时，会发生 NullPointerExceptions。我在我的代码中找不到它，所以我想看看其他人是否能找到它。

错误：

```
20:16:58 [SEVERE] java.lang.NullPointerException
20:16:58 [SEVERE]       at com.tommy3244.plugins.MakeYourOwnBlocks.MakeYourOwnBl
ocks.onDisable(MakeYourOwnBlocks.java:73)
20:16:58 [SEVERE]       at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlug
in.java:219)
20:16:58 [SEVERE]       at org.bukkit.plugin.java.JavaPluginLoader.disablePlugin
(JavaPluginLoader.java:481)
20:16:58 [SEVERE]       at org.bukkit.plugin.SimplePluginManager.disablePlugin(S
implePluginManager.java:400)
20:16:58 [SEVERE]       at org.bukkit.plugin.SimplePluginManager.disablePlugins(
SimplePluginManager.java:393)
20:16:58 [SEVERE]       at org.bukkit.plugin.SimplePluginManager.clearPlugins(Si
mplePluginManager.java:434)
20:16:58 [SEVERE]       at org.bukkit.craftbukkit.v1_4_6.CraftServer.reload(Craf
tServer.java:563)
20:16:58 [SEVERE]       at org.bukkit.Bukkit.reload(Bukkit.java:184)
20:16:58 [SEVERE]       at org.bukkit.command.defaults.ReloadCommand.execute(Rel
oadCommand.java:23)
20:16:58 [SEVERE]       at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCo
mmandMap.java:186)
20:16:58 [SEVERE]       at org.bukkit.craftbukkit.v1_4_6.CraftServer.dispatchCom
mand(CraftServer.java:514)
20:16:58 [SEVERE]       at org.bukkit.craftbukkit.v1_4_6.CraftServer.dispatchSer
verCommand(CraftServer.java:506)
20:16:58 [SEVERE]       at net.minecraft.server.v1_4_6.DedicatedServer.al(Dedica
tedServer.java:260)
20:16:58 [SEVERE]       at net.minecraft.server.v1_4_6.DedicatedServer.r(Dedicat
edServer.java:225)
20:16:58 [SEVERE]       at net.minecraft.server.v1_4_6.MinecraftServer.q(Minecra
ftServer.java:494)
20:16:58 [SEVERE]       at net.minecraft.server.v1_4_6.MinecraftServer.run(Minec
raftServer.java:427)
20:16:58 [SEVERE]       at net.minecraft.server.v1_4_6.ThreadServerApplication.r
un(SourceFile:849)
```

这是我的实际插件代码：

```
package com.tommy3244.plugins.MakeYourOwnBlocks;

import java.io.File;
import java.util.*;

import org.bukkit.block.*;
import org.bukkit.command.*;
import org.bukkit.configuration.ConfigurationSection;
import org.bukkit.entity.Player;
import org.bukkit.event.*;
import org.bukkit.event.block.Action;
import org.bukkit.event.player.PlayerInteractEvent;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.meta.ItemMeta;
import org.bukkit.plugin.java.JavaPlugin;

public class MakeYourOwnBlocks extends JavaPlugin implements Listener
{
    public Map<NewItem, List<ItemStack>> items;
    public File configfile;
    @SuppressWarnings("unchecked")
   public void onEnable()
 {
      try
        {
          Map<List<Map<String, Object>>, NewItem> smap;
            smap = SaveLoadAPI.load(this.getDataFolder().getPath()+"\\Items.data");
          for(List<Map<String, Object>> maps : smap.keySet())
            {
              NewItem item = smap.get(maps);
             List<ItemStack> stacks = new ArrayList<ItemStack>();
               for(Map<String, Object> map : maps)
              {
                  stacks.add(ItemStack.deserialize(map));
                }
              items.put(item, stacks);
           }
      }
      catch(Exception e)
     {
          items = new HashMap<NewItem, List<ItemStack>>();
       }
      try
        {
          this.getDataFolder().mkdirs();
     }
      catch(Exception e)
     {

       }
      configfile = new File(getDataFolder(), "config.yml");
        if(!configfile.exists())
       {
          saveResource("config.yml", false);
       }
      try
        {
          getConfig().load(configfile);
      }
      catch(Exception error)
     {
          getLogger().severe("Could not load config!");
            error.printStackTrace();
       }
      getServer().getPluginManager().registerEvents(this, this);
     getLogger().info("MakeYourOwnBlocks successfully enabled!");
 }
  public void onDisable()
    {
      try
        {
          Map<List<Map<String, Object>>, NewItem> smap = new HashMap<List<Map<String, Object>>, NewItem>();
          for(NewItem item : items.keySet())
         {
              List<ItemStack> stacks = items.get(item);
                List<Map<String, Object>> stacks2 = new ArrayList<Map<String, Object>>();
              for(ItemStack stack : stacks)
              {
                  stacks2.add(stack.serialize());
                }
              smap.put(stacks2, item);
           }
          SaveLoadAPI.save(smap, this.getDataFolder().getPath()+"\\Items.data");
       }
      catch (Exception e)
        {
          getLogger().severe("Was unable to save the items file to the default path of: "+this.getDataFolder().getPath()+"\\Items.data");
            e.printStackTrace();
       }
  }
  @EventHandler(priority = EventPriority.HIGHEST)
    public void onItemStackRightClick(PlayerInteractEvent e)
   {
      Player player = e.getPlayer();
     //getLogger().info("Player "+player.getName()+" has right clicked.");
      for(NewItem item : items.keySet())
     {
          for(ItemStack curstack : items.get(item))
          {
              ItemMeta lore = ((ItemStack)curstack).getItemMeta();
               List<String> lore2 = player.getItemInHand().getItemMeta().getLore();
             if(lore == null || lore2 == null)
              {
                  getLogger().info("Pointer null!");
                   if(lore == null)
                   {
                      getLogger().info("Pointer 1 null");
                  }
                  else
                   {
                      getLogger().info("Pointer 2 null");
                  }
              }
              if(lore2.equals(lore))
             {
                  getLogger().info(player.getDisplayName()+" right clicked with the same item!");
                  boolean right = e.getAction() == Action.RIGHT_CLICK_AIR || e.getAction() == Action.RIGHT_CLICK_BLOCK;
                  boolean block = e.getAction() == Action.RIGHT_CLICK_BLOCK || e.getAction() == Action.LEFT_CLICK_BLOCK;
                 boolean worked;
                    if(right)
                  {
                      worked = item.onRightClick(player, right, block);
                  }
                  else
                   {
                      worked = item.onLeftClick(player, right, block);
                   }
                  if(!worked)
                    {
                      player.sendMessage("Script fault! Error raised.");
                   }
              }
          }
      }
  }
  public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args)
   {
      if(sender instanceof Player)
       {

       }
      else
       {
          sender.sendMessage("You must be a player to perform this command!");
         return false;
      }
      if(cmd.getName().equalsIgnoreCase("makeitem"))
       {
          if(args.length < 4)
         {
              return false;
          }
          String name = args[0];
         String type = args[1];
         String data = args[2];
         String damage = args[3];
           try
            {
              int dmg = Integer.parseInt(damage);
                byte dta = (byte)Integer.parseInt(data);
               int id = Integer.parseInt(type);
               if(getConfig().contains("items."+name))
              {
                  ConfigurationSection section = getConfig();
                    List<List<String>> lines = new ArrayList<List<String>>();
                  lines.add(null);
                   lines.add(null);
                   if(getConfig().contains("items."+name+".onrightclick"))
                    {
                      List<String> cur = getConfig().getStringList("items."+name+".onrightclick");
                     lines.set(0, cur);
                 }
                  else
                   {
                      lines.set(0, null);
                    }
                  if(getConfig().contains("items."+name+".onleftclick"))
                 {
                      List<String> cur = getConfig().getStringList("items."+name+".onleftclick");
                      lines.set(1, cur);
                 }
                  else
                   {
                      lines.set(1, null);
                    }
                  List<ItemStack> stacks = new ArrayList<ItemStack>();
                   ItemStack stack = new ItemStack(id, 1, dta);
                   ItemMeta meta = stack.getItemMeta();
                   meta.setDisplayName(name);
                 List<String> lore;
                   if(getConfig().contains("items."+name+".description"))
                 {
                      lore = getConfig().getStringList("items."+name+".description");
                    }
                  else
                   {
                      lore = new ArrayList<String>();
                  }
                  lore.add(name);
                    NewItem item = new NewItem(lore, name, id, dta, lines, dmg, false, section);
                   meta.setLore(lore);
                    stack.setItemMeta(meta);
                   getLogger().info(stack.toString());
                    stacks.add(stack);
                 if(items == null)
                  {
                      getLogger().info("unused");
                  }
                  items.put(item, stacks);
                   Player player = (Player)sender;
                    player.getLocation().getWorld().dropItem(player.getLocation(), stack);
                 player.sendMessage("Here you go!");
              }
              else
               {
                  sender.sendMessage("No configuration section at \""+"items."+name+"\"");
                   return true;
               }
          }
          catch(Exception error)
         {
              //sender.sendMessage("Error: "+error.getLocalizedMessage());
             //System.out.println(error);
               //throw error;
             //makeitem test 272 0 0
                error.printStackTrace();
               return true;
           }
          sender.sendMessage("Error: No command specified");
       }
      return true;
   }
} 
```

更新：

nakib 回答了我的问题，错误已修复！非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T02:28:15.820

在第 73 行，您有

```
for(NewItem item : items.keySet()) 
```

调用时该属性`items`为空`onDisable()`。

要解决这个问题，您应该初始化`items`on 声明

```
public Map<NewItem, List<ItemStack>> items = new HashMap<NewItem, List<ItemStack>>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T02:29:13.770

`items`变量必须`null`是。您可以在班级顶部使用它来修复它：

```
public Map<NewItem, List<ItemStack>> items = new HashMap<NewItem, List<ItemStack>>(); 
```

您看起来好像有几个区域假设它已被初始化，所以我要么在类的顶部执行它，要么在您的构造函数中执行它（尚不存在:)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T02:29:45.617

从它的外观来看，我敢打赌`items`（在第 73 行）是空的，你需要它的值。添加一些内容以确保如果第 28 行的 for 块至少没有运行一次，则不会调用该方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T02:34:45.873

堆栈跟踪告诉您`NullPointerException`来自：

```
 20:16:58 [SEVERE] java.lang.NullPointerException
    20:16:58 [SEVERE]       at com.tommy3244.plugins.MakeYourOwnBlocks.MakeYourOwnBl
    ocks.onDisable(MakeYourOwnBlocks.java:73) <-- HELPFUL ADVICE FROM STACK TRACE

68     public void onDisable()
69        {
70          try
71            {
72              Map<List<Map<String, Object>>, NewItem> smap = new HashMap<List<Map<String, Object>>, NewItem>();
73              for(NewItem item : items.keySet()) <--- THIS LINE IS PUKING, SO items is probably null! 
```

学习如何解释这些消息以及使用调试器在现代 IDE 中逐步执行代码至关重要。如果没有这些工具，您就无法真正具备导航大型代码库的能力。

我要给出的另一条建议是它`smap`不是非常面向对象的。某种封装在这里会有所帮助，因此您不需要 a `Map`of `List`a `Map`of a .....我们又在谈论什么？

# ruby-on-rails - 如何让 Rails 为 ember.js 生成正确格式的 JSON？

> ID：14421109
> 
> 赞同：5
> 
> 时间：2013-01-20T02:23:55.777
> 
> 标签：ruby-on-rails, json, ember.js

在关于模型的 Ember 指南[http://emberjs.com/guides/models/the-rest-adapter/#toc_relationships](http://emberjs.com/guides/models/the-rest-adapter/#toc_relationships)我看到关联应该指定为一个 id 数组：

> {“帖子”：{“评论”：[1、2、3]}}

我无法确定如何在 rails 控制器中生成 id 数组。虽然我可以 :include 关联的模型，但它们被包含为哈希数组：

> {"name":"Jane's Place","rooms":[{"id":1},{"id":2},{"id":3}]}

关于如何获得数组形式的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T02:37:22.050

Ember 建议使用 active_model_serializers gem 以兼容格式生成 JSON。

这是 active_model_serializer 文档中的一个示例，可以完全按照您的要求进行操作。是`embed :ids`关键。

```
class PostSerializer < ActiveModel::Serializer
  embed :ids

  attributes :id, :title, :body
  has_many :comments
end 
```

[https://github.com/rails-api/active_model_serializers](https://github.com/rails-api/active_model_serializers)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T03:02:47.520

另一种方法是在创建响应传递时：root => true

```
respond_to do |format|
  format.html # index.html.erb
  format.json { render :json => @posts, :root => true }
end 
```

# ios - 代码符号错误。添加新的mac进行开发

> ID：14421112
> 
> 赞同：0
> 
> 时间：2013-01-20T02:25:08.007
> 
> 标签：ios, xcode

我已经做了很多搜索，尝试了很多东西，它就是不起作用。我一直在用 macbook 设计，现在我想添加另一个 mac pro 进行开发。当我尝试在我的 iPhone 上打包时，它给了我一个错误。

```
Code Sign error: The identity 'iPhone Developer' doesn't match any valid, non-expired certificate/private key pair in your keychains 
```

在管理器中，在我的设备/配置文件下，状态为未找到有效签名身份。

我想使用这两个 mac 进行开发。我能做些什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:31:02.577

您需要从您的 macbook 导出您的配置文件，然后在新机器上导入它们。查看[将密钥和证书复制到另一台 Mac 以进行 iPhone 开发](https://stackoverflow.com/questions/10404931/copying-keys-and-certificates-to-another-one-mac-for-iphone-development)。

# node.js - 在 node.js 中使用 Parse.com REST API 和查询 - 如何使用来自 CURL 的数据编码

> ID：14421113
> 
> 赞同：6
> 
> 时间：2013-01-20T02:25:11.260
> 
> 标签：node.js, curl, parse-platform

我正在尝试复制下面的 parse.com REST API 的示例：

```
curl -X GET \
  -H "X-Parse-Application-Id: APP_ID" \
  -H "X-Parse-REST-API-Key: API_KEY" \
  -G \
  --data-urlencode 'where={"playerName":"John"}' \
  https://api.parse.com/1/classes/GameScore 
```

因此，基于 Stackoverflow 上的一个示例，我实现了该功能：

```
var https = require("https");
exports.getJSON = function(options, onResult){

    var prot = options.port == 443 ? https : http;
    var req = prot.request(options, function(res){
        var output = '';
        res.setEncoding('utf8');
        res.on('data', function (chunk) {
            output += chunk;
        });

        res.on('end', function() {
            var obj = JSON.parse(output);
            onResult(res.statusCode, obj);
        });
    });

    req.on('error', function(err) {
    });

    req.end();
}; 
```

我这样称呼：

```
var options = {
host: 'api.parse.com',
port: 443,
path: '/1/classes/GameScore',
method: 'GET',
headers: {
    'X-Parse-Application-Id': 'APP_ID',
    'X-Parse-REST-API-Key': 'APP_KEY'
}
};

rest.getJSON(options,
    function(statusCode, result)
    {
        // I could work with the result html/json here.  I could also just return it
        //console.log("onResult: (" + statusCode + ")" + JSON.stringify(result));
        res.statusCode = statusCode;
        res.send(result);
    }); 
```

我的问题是，如何发送 "--data-urlencode 'where={"playerName":"Sean Plott","cheatMode":false}' 位？我尝试通过在像这样的选项：'/1/classes/GameScore?playerName=John，但这不起作用，我收到了所有的 GameScore，而不是来自 John 的

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T04:15:43.640

> 我尝试通过在选项中设置路径来将其附加到路径：`/1/classes/GameScore?playerName=John`

它似乎期望`where`作为键/名称的值是整个 JSON 值：

```
/1/classes/GameScore?where=%7B%22playerName%22%3A%22John%22%7D 
```

你可以得到这个[`querystring.stringify()`](http://nodejs.org/api/querystring.html#querystring_querystring_stringify_obj_sep_eq)：

```
var qs = require('querystring');

var query = qs.stringify({
    where: '{"playerName":"John"}'
});

var options = {
    // ...
    path: '/1/classes/GameScore?' + query,
    // ...
};

// ... 
```

（可选`JSON.stringify()`）格式化来自对象的值：

```
var query = qs.stringify({
    where: JSON.stringify({
        playerName: 'John'
    })
}); 
```

# ocaml - Ocaml定点实现

> ID：14421115
> 
> 赞同：1
> 
> 时间：2013-01-20T02:25:23.227
> 
> 标签：ocaml, fixed-point-iteration

我试图弄清楚如何在 Ocaml 中实现定点迭代。也就是说，给定一个函数`f`和一个`x`，我想计算最终的值是什么`f(f(f(x)...))`。

例如，如果我的函数是`x/2`和我的`x=50`，我的答案应该是 0。

到目前为止，我有

```
 let rec computed_fixed_point eq f x =
        if (x == f x) then 
            x
        else
            computed_fixed_point eq f (f x) 
```

这适用于函数`x/2`和`x=50`（给我 0），但对于无穷大或非 0 的函数，它似乎不起作用。

另一个可以给我一些建议吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T03:11:26.327

理解这个问题的基本原理有点困难。不是每个函数都有一个固定点。例如`fun x -> (x + 1) mod 5`. 并非每个具有固定点的函数都会通过从不同起点重复应用而达到固定点。（我只是做了一些谷歌搜索，像这样的固定点被称为“有吸引力的固定点”。）

以下是一些评论：

*   您不应该使用`==`，这是物理相等运算符。您可能想使用`=`, 值相等。

*   但是，我看不到该`eq`参数的用途。也许调用者被允许指定使用什么相等。如果是这样，您应该使用 this 而不是`==`.

# java - Java：集合和“数据结构”之间的区别

> ID：14421121
> 
> 赞同：12
> 
> 时间：2013-01-20T02:27:13.327
> 
> 标签：java, data-structures, collections

在 Java 中，我不了解集合与“数据结构”。在我看来，集合指的是列表、集合、映射、队列，而“数据结构”指的是用于实现集合的数据结构，例如数组、链表或树。例如 ArrayList 和 LinkedList 都是集合，但它们的数据结构分别是一个数组和一个链表。我是正确的，还是我混淆了术语？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-20T02:32:40.117

数据结构是数据在内存存储中的表示方式。集合是如何访问它的。我强调“可以”这个词。

如果将数据存储在 LinkedList 中并对其进行排序，则性能会下降。如果使用 ArrayList 相同的算法，性能将会提高。仅仅通过改变它在内存中的表示方式将有助于各种因素。

您“可以”使用集合表示访问它，您“可以”还使用“索引”来访问数据。你“可以”也去getFirst、getNext、getPrev。

您的困惑在于内部存储和访问存储之间。将 2 分开。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-20T02:30:44.373

数据结构是表示某种数据的对象的总称，所以链表、数组等都是数据结构。Java 意义上的集合是指实现该`Collection`接口的任何类。一般意义上的集合只是一组对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T02:33:24.987

数据结构具有某种模式的概念，例如，房屋的表示会列出平方英尺、卧室等内容。这就是通常的意思：域的结构如何表示为数据？

正如 Jeff 所说，集合只是一组对象。集合确实有结构，但它们的结构只是组织性的，例如树、列表或链接列表。

# javascript - 如何使用图形 dracula 在多个节点上进行矩形选择？

> ID：14421128
> 
> 赞同：6
> 
> 时间：2013-01-20T02:28:38.777
> 
> 标签：javascript, graph, nodes

我正在研究一些图形可视化，并且正在使用 JavaScript 库[图形 Dracula](http://www.graphdracula.net/)。现在，有了这个库，当我想移动一个节点时，我必须单击我想移动的节点并将其移动到所需的位置（通过拖放）。但是，我想做的是选择更多节点并移动所有节点。我不知道如何做到这一点，因为我在 JavaScript 编程方面没有那么丰富的经验。所以，我的问题是：

1.  如何使用矩形选择选择多个节点并移动它们？
2.  如何使用 Ctrl + 左键单击选择多个节点并选择更多节点然后移动它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T06:48:49.173

从表面上看，几乎所有的`Dracula's`图形渲染都是由[`RaphaelJS`](http://raphaeljs.com/).

在这种情况下，事情对你来说可能会容易一些。似乎[其他人问过如何在 RaphaelJS 中移动元素](https://stackoverflow.com/questions/5844927/selecting-multiple-svg-elements-and-dragging-them-in-raphael-js)。

# css - 媒体查询在浏览器中响应但不在移动设备中

> ID：14421129
> 
> 赞同：0
> 
> 时间：2013-01-20T02:28:42.367
> 
> 标签：css, media-queries

我有这个媒体查询，里面有一些 CSS，查询在我使用过类似 CSS 的其他网站上运行良好，当我调整浏览器大小时，我得到了想要的效果。但是当我在 iPad 或 android 上看时，我看不到任何效果，如果媒体查询不存在

```
@media only screen and (max-width: 767px) {
.menu-button{
display: block;
height: 42px;
background-image: url(/sites/all/themes/dream/images/menu-icon.png);
background-repeat: no-repeat,repeat-x;
background-position: 98% 50%,0 0;
text-align: right;
font-weight: 700;
font-family: 'SweetSans';
text-transform: uppercase;
color: #333333;
line-height: 42px;
cursor: pointer;
padding-right: 36px;
font-size: 13px;
margin-right: 106px;
}

.menu-button {
    display: block;
    height: 34px;
    background-image: url(/sites/all/themes/dream/images/menu-icon.png);
    background-repeat: no-repeat, repeat-x;
    background-position: 98% 50%, 0 0;
    text-align: right;
    font-weight: 700;
    font-family: 'SweetSans';
    text-transform: uppercase;
    color: #333333;
    line-height: 42px;
    cursor: pointer;
    padding-right: 36px;
    font-size: 13px;
}

#main {
  width: 100%;
}

#block-menu-primary-links ul.menu li {

  float: none;
  padding: 0px 0px;
  width: 100%;
  display: none;
  float: left;

  background-color: rgb(172, 173, 184);

}

#main li {
  float: none;
  list-style-type: none;
  font-weight: 400;
}

#main li.first a {
    border-left: 0px;
}

#main li a {
    width: 100%;
}

#main li ul, #main li ul li, #main li ul li a {
    position: relative;
    float: none;
    width: 100%;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:30:12.527

您必须将[`veiwport`](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)标签添加到您的 HTML（在 中`head`）：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T02:36:32.617

我认为问题在于您将这件作品放在顶部：

```
@media only screen and (max-width: 767px) {
.menu-button{
display: block;
height: 42px;
background-image: url(/sites/all/themes/dream/images/menu-icon.png);
background-repeat: no-repeat,repeat-x;
background-position: 98% 50%,0 0;
text-align: right;
font-weight: 700;
font-family: 'SweetSans';
text-transform: uppercase;
color: #333333;
line-height: 42px;
cursor: pointer;
padding-right: 36px;
font-size: 13px;
margin-right: 106px;
} 
```

它被覆盖

```
.menu-button {
    display: block;
    height: 34px;
    background-image: url(/sites/all/themes/dream/images/menu-icon.png);
    background-repeat: no-repeat, repeat-x;
    background-position: 98% 50%, 0 0;
    text-align: right;
    font-weight: 700;
    font-family: 'SweetSans';
    text-transform: uppercase;
    color: #333333;
    line-height: 42px;
    cursor: pointer;
    padding-right: 36px;
    font-size: 13px;
} 
```

尝试将媒体查询及其内容放在底部。

让我知道这是否有效。

问候

# python - 在等待事件的程序中捕获键盘中断

> ID：14421133
> 
> 赞同：7
> 
> 时间：2013-01-20T02:29:31.177
> 
> 标签：python, windows, multithreading, windows-7, python-3.x

以下程序挂起终端，使其忽略`Ctrl+C`. 这很烦人，因为每次有一个线程挂起时我都必须重新启动终端。

有什么办法可以捕捉到`KeyboardInterrupt`等待事件的时间吗？

```
import threading
def main():
    finished_event = threading.Event()
    startThread(finished_event)
    finished_event.wait()#I want to stop the program here
    print('done!')
def startThread(evt):
    """Start a thread that will trigger evt when it is done"""
    #evt.set()
if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-14T16:24:23.607

如果要避免轮询，可以使用[信号](https://docs.python.org/2/library/signal.html#signal.pause)`pause()`模块的功能来代替. 是一个阻塞函数，当进程接收到信号时被解除阻塞。在这种情况下，当按下 ^C 时，SIGINT 信号会解除对函数的阻塞。请注意，根据文档，该功能在 Windows 上不起作用。我已经在 Linux 上尝试过了，它对我有用。`finished_event.wait()``signal.pause()`

[我在这个 SO线程](https://stackoverflow.com/a/3102501/2557681)中遇到了这个解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T03:02:31.143

**更新：**在当前的 Python 3`finished_event.wait()`上，我的 Ubuntu 机器上工作（从 Python 3.2 开始）。您无需指定`timeout`参数，即可使用`Ctrl+C`. 您需要`timeout`在 CPython 2 上传递参数。

这是一个完整的代码示例：

```
#!/usr/bin/env python3
import threading

def f(event):
    while True:
        pass
    # never reached, otherwise event.set() would be here

event = threading.Event()
threading.Thread(target=f, args=[event], daemon=True).start()
try:
    print('Press Ctrl+C to exit')
    event.wait()
except KeyboardInterrupt:
    print('got Ctrl+C') 
```

可能存在与[Ctrl+C](https://bugs.python.org/issue23237)相关的[错误](https://bugs.python.org/issue8844)。测试它是否适用于您的环境。

* * *

^(旧投票答案：)

您可以尝试让解释器运行主线程：

```
while not finished_event.wait(.1): # timeout in seconds
    pass 
```

如果您只想等到子线程完成：

```
while thread.is_alive():
    thread.join(.1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-03T10:38:11.093

您还可以通过以下方式修补 Event.wait() 函数：

```
def InterruptableEvent():
    e = threading.Event()

    def patched_wait():
        while not e.is_set():
            e._wait(3)

    e._wait = e.wait
    e.wait = patched_wait
    return e

>>> event = InterruptableEvent()
>>> try:
...     event.wait()
... except KeyboardInterrupt:
...     print "Received KeyboardInterrupt"
... 
^CReceived KeyboardInterrupt 
```

这是有效的，因为带有超时参数的 wait()*将*引发 KeyboardInterrupt。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-18T12:36:54.267

基于@Pete's answer，但使用子类化和使用实际`Event.wait`方法，只是使用较小的超时来允许`KeyboardInterrupt`在两者之间处理 s 等：

```
class InterruptableEvent(threading.Event):
    def wait(self, timeout=None):
        wait = super().wait  # get once, use often
        if timeout is None:            
            while not wait(0.01):  pass
        else:
            wait(timeout) 
```

# zend-framework2 - 使用 ZF2 进行嵌套选择

> ID：14421156
> 
> 赞同：6
> 
> 时间：2013-01-20T02:34:14.920
> 
> 标签：zend-framework2

试图使用嵌套选择`Zend\Db\Sql\Select`，但在文档或谷歌上根本看不到任何东西。

想做这样的事情：

```
SELECT 
    table1.*,
    (SELECT x,y,z FROM table2 WHERE table2.a = table1.a) as b
FROM table1 
```

如果没有嵌套选择，它看起来像这样：

```
$select = new Zend\Db\Sql\Select;
$select
 ->columns(array(
    '*'
 ))
 ->from('table1') 
```

ZF1 考虑创建一个 subSelect 项，然后将其作为表达式添加到列列表中，但在 ZF2 中它抱怨表达式需要是一个字符串。

编辑：嵌套选择需要作为一列，因为当在同一列名上使用 GROUP BY 时，我最终会得到相乘的行。这是我试图进入的正确查询`Zend\Db\Sql\Select`：

```
SELECT
    users.id, 
    (SELECT count(explorations.id) FROM explorations WHERE user_id = users.id) as total_explorations, 
    count(villages.id)
FROM 
    users
INNER JOIN
    villages
        on (villages.user_id = users.id)
GROUP BY 
    users.id 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T23:27:34.207

Ralph Schindler 有一个他专门在 Zend\Db 中实现的不同 DB 模式的存储库。这是一个子选择：[https ://github.com/ralphschindler/Zend_Db-Examples/blob/master/example-20.php](https://github.com/ralphschindler/Zend_Db-Examples/blob/master/example-20.php)

内容是这样的：

```
<?php

/** @var $adapter Zend\Db\Adapter\Adapter */
$adapter = include ((file_exists('bootstrap.php')) ? 'bootstrap.php' : 'bootstrap.dist.php');
refresh_data($adapter);

use Zend\Db\Sql;
use Zend\Db\ResultSet\ResultSet;

$sql = new Sql\Sql($adapter);

$subselect = $sql->select();
$subselect->from('artist')
    ->columns(array('name'))
    ->join('album', 'artist.id = album.artist_id', array())
    ->where->greaterThan('release_date', '2005-01-01');

$select = $sql->select();
$select->from('artist')
    ->order(array('name' => Sql\Select::ORDER_ASCENDING))
    ->where
        ->like('name', 'L%')
        ->AND->in('name', $subselect);

$statement = $sql->prepareStatementForSqlObject($select);

$result = $statement->execute();

$rows = array_values(iterator_to_array($result));

assert_example_works(
    count($rows) == 2
    && $rows[0]['name'] == 'Lady Gaga'
    && $rows[1]['name'] == 'Linkin Park'
); 
```

基本上，您可以使用一个选择作为另一个选择的谓词的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T04:33:20.240

我建议你重组你的 SQL 查询。我不确定您使用的是哪个数据库，但如果您使用的是 MySQL，则 COUNT 函数可以使用 DISTINCT 关键字。这样你就不会计算重复的 id。我已将您的 SQL 查询调整为我将使用的，这样您就无需内部选择。

```
SELECT
    users.id,
    COUNT(DISTINCT explorations.id) AS total_explorations,
    COUNT(DISTINCT villages.id) AS total_villages
FROM users
    INNER JOIN villages ON villages.user_id = users.id
    INNER JOIN explorations ON explorations.user_id = users.id
GROUP BY users.id 
```

我没有运行这个查询，但我确信它应该可以工作并给你你想要的结果。希望我没有误解你的情况。下面是等效的 Zend Framework 2 选择。

```
$select = $sql->select('users');
$select->columns(array('id'));
$select->join('villages', 
              'villages.user_id = users.id', 
               array(
                   'total_villages' => new Expression("COUNT(DISTINCT villages.id)")
               )
);
$select->join('explorations', 
              'explorations.user_id = users.id', 
               array(
                   'total_explorations' => new Expression("COUNT(DISTINCT explorations.id)")
               )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T04:14:16.137

我希望我能正确解决您的问题...

仍然没有将自己升级到 ZF2，但如果您使用 MVC 架构，这是您可以在 ZF1 中创建嵌套 Select 语句的一种方式（也可以在 ZF2 中尝试）。

 ~~~~```
 $table1 = new table1();
    $table1->select()->from('table1',array('*',
         'b' => '(SELECT x,y,z FROM table2 WHERE table2.a = table1.a)',
    )); 
```~~ 

~~更新：~~

 ~~在您发表评论后回到这一点，并意识到我编写的代码不起作用，因为您将无法从另一个表中选择多个列到单个列中（即 b 中的 x、y、z）。

但是是的，如果你必须执行一些聚合，它会起作用。另一个表上的函数，它给出一列。例如

```
 $table1 = new table1();
    $table1->select()->from('table1',array('*',
         'b' => '(count (*) FROM table2 WHERE table2.a = table1.a)',
    )); 
```

所以这会起作用。通过这种方式，您可以获得一些对其执行某些功能的列。您可以使用连接获得另一个表（table2）中的其余列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T09:44:02.647

您所描述的内容被定义为[JOIN](http://dev.mysql.com/doc/refman/5.1/de/join.html)。有一些不同的连接场景，我不会介绍它们的区别，但最常见的是 INNER JOIN 或 LEFT JOIN。

这确实可以在[Zend\Db\Sql#Join 的 ZF2 文档中找到](http://framework.zend.com/manual/2.0/en/modules/zend.db.sql.html#join)

查询将如下所示：

```
Select
    t1.*,
    t2.field1,
    t2.field2,
    t2.field3
FROM
    tablename1 t1,
    tablename2 t2
WHERE
    t1.field = t2.field 
```

查看[Zend\Db\Sql#Join 的 ZF2-Documentation 的文档](http://framework.zend.com/manual/2.0/en/modules/zend.db.sql.html#join)，我**认为**Select 看起来像这样：

```
$select = new \Zend\Db\Sql\Select();

$select->columns(array(
    'id',
    'title',
    // List ALL Columns from TABLE 1 - * is bad/slow!
), true)->from(array(
    't1' => 'tablename1'
))->join(
    'tablename2',
    'id = t1.id',
    array(
        'username',
        'email',
        // List ALL Columns from TABLE 2 u want to select
    ),
    $select::JOIN_INNER
) 
```

另一个**我认为**：如果你不使用`columns()`你`SELECT *`自己，而是为了你自己，开始编写好的查询；）对你的代码有更多的控制！

不能保证这段代码有效，因为我自己不使用 Zend\Db，但是在正确的位置使用文档应该可以让你运行。~~~~

# java - gwt 远程过程调用错误

> ID：14421162
> 
> 赞同：0
> 
> 时间：2013-01-20T02:36:11.943
> 
> 标签：java, gwt, servlets, web

我是 GWT 的新手，我的 Web 应用程序没有任何结果。

当我尝试调试时，出现“找不到源”之类的错误

这是所有项目中编写的代码

<---------------------------------------------------- ---------------------------------------------------->

入口点类

```
package body.test.combo.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.VerticalPanel;

public class Combo implements EntryPoint {

    private final FileReaderServiceAsync serviceAsync = GWT
            .create(FileReaderService.class);

    String content;

    /**
     * This is the entry point method.
     */
    public void onModuleLoad() {

    VerticalPanel vPanel = new VerticalPanel();
        serviceAsync.readMyFilePlease(new AsyncCallback<String>() {

            @Override
            public void onSuccess(String result) {
                content = result;

            }

            @Override
            public void onFailure(Throwable caught) {
                System.out.println("Tezak");

            }
        });

        Label lb = new Label(content);
        vPanel.add(lb);
        RootPanel.get().add(vPanel);
    }
} 
```

<---------------------------------------------------- ---------------------------------------------------->

服务接口

```
package body.test.combo.client;

import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;

@RemoteServiceRelativePath("readmeplease")
public interface FileReaderService extends RemoteService {
    String readMyFilePlease();
} 
```

<---------------------------------------------------- ---------------------------------------------------->

服务异步

```
package body.test.combo.client;

import com.google.gwt.user.client.rpc.AsyncCallback;

public interface FileReaderServiceAsync {
    void readMyFilePlease(AsyncCallback<String> callbackVariable);
} 
```

<---------------------------------------------------- ---------------------------------------------------->

服务器实现类

```
package body.test.combo.server;

import com.google.gwt.user.server.rpc.RemoteServiceServlet;

import body.test.combo.client.FileReaderService;

public class FileReaderServiceImplementation extends RemoteServiceServlet implements FileReaderService {

    @Override
    public String readMyFilePlease() {
        String allContent = "ezayak yad ya sayed";
        return allContent;
    }

} 
```

<---------------------------------------------------- ---------------------------------------------------->

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5"
         xmlns="http://java.sun.com/xml/ns/javaee">

  <!-- Servlets -->
  <servlet>
    <servlet-name>readMyFilePlease</servlet-name>
    <servlet-class>body.test.combo.server.FileReaderServiceImplementation</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>readMyFilePlease</servlet-name>
    <url-pattern>/combo/readmeplease</url-pattern>
  </servlet-mapping>

  <!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>Combo.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

项目名称是“组合”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:54:46.397

您的项目 xml 文件 (Combo.gwt.xml) 是否包含以下内容：

`<module rename-to='combo'>`

您可能还想尝试这篇[文章](https://stackoverflow.com/questions/6775106/gwt-rpc-service-not-found)中的一些建议。

发布该项目 xml 文件以及错误本身对您非常有用。

# sql - 如何创建一个 SQL 查询，获取不同行的值并将它们连接到同一行（需要可变数量的连接）

> ID：14421165
> 
> 赞同：1
> 
> 时间：2013-01-20T02:36:28.867
> 
> 标签：sql

不知道如何真正表达这个问题，但这就是我所拥有的，这就是我需要的。

我有一个看起来像这样的表：

```
Name             K%      Year
Albert Pujols   7.90%   2006
Albert Pujols   8.50%   2007
Albert Pujols   8.40%   2008
Albert Pujols   9.10%   2009
Albert Pujols   10.90%  2010
Albert Pujols   8.90%   2011
Albert Pujols   11.30%  2012 
```

我想创建一个查询，该查询将产生如下所示的输出：

```
Albert Pujols   7.90%   8.50%   8.40%   9.10%   10.90%  8.90%   11.30% 
```

虽然这个特定的播放器有 7 排，但我不能保证这样的播放器会存在。

这甚至可能吗？

我会很感激任何帮助。如果我知道只有 2 行（名称上的内部连接），我不会有任何麻烦......但是可变的行数让我陷入循环。

编辑**

Peter Wooster 对旋转的回答是我需要的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:49:35.473

如果您这样做是为了打印报告，最好的办法是使用支持交叉表的报告编写器。贾斯珀报告确实如此。

SQL 并不擅长这种东西。有一些棘手的方法可以让它给你结果，但它们会很愚蠢。

# css - 我正在 Mac 上开发一个网站，所有主流浏览器都能正确呈现它。但是，我对如何使它在 IE 中正确显示感到困惑

> ID：14421168
> 
> 赞同：0
> 
> 时间：2013-01-20T02:37:01.940
> 
> 标签：css, internet-explorer, css-float, margins

这是网站：[http ://dev.oonasboston.com](http://dev.oonasboston.com)

在 IE 中，它呈现时没有某些标题，徽标向右移动，菜单将链接堆叠在另一个之上（而不是并排），并且看起来好像页脚内容中的边距'阅读不正确。

我想弄清楚如何解决这个问题。我对它在 Chrome、Firefox 和 Safari 中的显示方式感到满意。

我正在使用 Wordpress 并使用我自己的 css。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T02:41:08.433

最重要的是，为了跨浏览器兼容性，doctype 声明（`<!doctype html>`例如）应该是源代码的第一行。[*****](http://hsivonen.iki.fi/doctype/)

[http://validator.w3.org/](http://validator.w3.org/)会通知您这一点，以及可能的其他事情。（对于 CSS， [http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)。）

因此，您需要找到该代码所在的 WordPress 头文件并进行更改。如果需要，您可以在[http://webchat.freenode.net/?nick=stephanie&channels=#wordpress](http://webchat.freenode.net/?nick=stephanie&channels=#wordpress)获得帮助。

# android - Android SDK 上的 adb 错误。使用 Linux Ubuntu 64 位 12.10

> ID：14421171
> 
> 赞同：12
> 
> 时间：2013-01-20T02:37:35.067
> 
> 标签：android, linux, ubuntu-12.10

我在这个网站上查看了我遇到的这个错误：

```
Stopping ADB server failed (code -1).
Unable to run 'adb': Cannot run program "/home/ariel/Downloads/adt-bundle-linux-x86_64/sdk/platform-tools/adb": error=2, No such file or directory.
Starting ADB server failed (code -1). 
```

我在本主题提供的终端上使用了此命令。

[64 位 Linux 机器上的 Android SDK](https://stackoverflow.com/questions/2710499/android-sdk-on-a-64-bit-linux-machine/10473415#10473415)

编辑：我试过在终端上使用这个命令：

```
sudo apt-get install ia32-libs 
```

可悲的是，它什么也没做，它表明了这一点：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Package libc6-i386 is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'libc6-i386' has no installation candidate 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-30T23:33:34.393

我有同样的问题，但现在用这些命令没问题：

***`sudo apt-get install libstdc++6:i386 libgcc1:i386 zlib1g:i386 libncurses5:i386`

要运行模拟器，您需要该附加包：

***`sudo apt-get install libsdl1.2debian:i386`

然后安装 ia32-libs：

***`apt-get install ia32-libs`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T10:32:29.197

您需要将 i386 包添加到 apt

```
dpkg --add-architecture i386 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-06T16:49:26.807

我刚用

```
sudo apt-get install lib32bz2-1.0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-04T09:33:23.243

对于这个问题，可以尝试：

```
sudo apt-get install libc6-i386 lib32stdc++6 lib32gcc1 lib32ncurses5 
```

# ruby-on-rails - 查看源代码时不显示元标记描述

> ID：14421175
> 
> 赞同：-1
> 
> 时间：2013-01-20T02:37:48.593
> 
> 标签：ruby-on-rails, html, heroku, meta-tags, erb

我使用此代码显示描述标签和关键字

```
<meta name="description" content="search thousands of humor, funny images<%= yield :description %>" />
    <meta name="keywords" content="funny, fun, comics, jokes, images, pictures, photos, humor, safe for work<%= yield :keywords %>" /> 
```

但是在开发环境中显示时它没有在生产环境中显示我的生产环境是 rails 3.2.11 和 heroku 所以我错过了什么吗？我什至试过这段代码

```
<meta name="keywords" content="funny, fun, comics, jokes, images, pictures, photos, humor, safe for work" /> 
```

结果是一样的，所以我想念什么？我真的开始吓坏了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:51:46.047

解决了我使用 html5.validator.nu 并且有一些 html 错误，我解决了 html 错误然后上传到 heroku 和元标记问题自动解决

# unit-testing - 如何构建一个 Haskell 项目？

> ID：14421178
> 
> 赞同：33
> 
> 时间：2013-01-20T02:38:11.580
> 
> 标签：unit-testing, testing, tdd, haskell

我目前正在尝试使用测试驱动开发方法来做一个 Haskell 项目。在 Java 中，我们可以创建一个包含 src 和 bin 文件夹的结构良好的项目，然后有 main 和 test 文件夹用于使用 JUnit 进行单元测试。我只是想知道是否有一种标准方法可以在 Haskell 中获得这样的结构？源文件夹 二进制文件夹，源文件夹中有两个文件夹，一个用于测试，一个用于主源。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-20T03:38:43.597

我的参考始终是[Haskell 项目的结构](http://www.haskell.org/haskellwiki/Structure_of_a_Haskell_project)和[如何编写 Haskell 程序](http://www.haskell.org/haskellwiki/How_to_write_a_Haskell_program)，其中说明了社区或多或少遵循的一些默认设置。到目前为止，它对我来说效果很好，但我的项目还不是很大。

[Haskell 项目结构中的](http://www.haskell.org/haskellwiki/Structure_of_a_Haskell_project)建议听起来与您在帖子中概述的内容相似，只是做了一些小的修改，例如 testing 文件夹与 src 文件夹位于同一目录中。

编辑：

`cabal init`如果您至少有任何带有导入的文件，将为您生成最少的数量，包括具有相关依赖项的 cabal 文件。这是一个很好的开始，但只是您正在寻找的一部分。

理想情况下，随着项目的增长，cabal 文件和目录层次结构将自动保持最新，但我不知道有任何公开的工具会这样做。它在我也许一天的清单上，因为我相信它适用于许多其他人。

`-odir`并且`-hidir`可以与 ghc 一起使用，将 *.o 和 *.hi 文件放在不同的目录中。您可以在[GHC 用户指南的单独编译部分](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/separate-compilation.html)阅读更多内容）

编辑2：

其他相关/重叠的帖子：

*   [Haskell 程序的基本结构](https://stackoverflow.com/questions/9153574/basic-structure-of-a-haskell-program)
*   [Haskell 模块命名约定](https://stackoverflow.com/questions/11594983/haskell-module-naming-conventions)
*   [Haskell 中的大规模设计？](https://stackoverflow.com/questions/3077866/large-scale-design-in-haskell)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-24T04:13:20.183

对此的现代答案是使用[Haskell Tool Stack](https://docs.haskellstack.org/ "Haskell 工具栈")。这将使用健全的默认值为您构建项目。

# iphone - iPhone SDK：如何在 UITableView 上创建部分

> ID：14421188
> 
> 赞同：1
> 
> 时间：2013-01-20T02:40:59.940
> 
> 标签：iphone, xcode, uitableview, sections

我有这些数据需要放入其中，`UITableView`但我对如何正确实施它感到困惑。我无法正确分离这些值以将男孩数据与女孩数据分开。

```
{
"QUERY": {
    "COLUMNS": [
        "NAME",
        "GENDER"
    ],
    "DATA": [
    [
        "Anne",
        "Girl"
    ],
    [
        "Alex",
        "Boy"
    ],
    [
        "Vince",
        "Boy"
    ],
    [
        "Jack",
        "Boy"
    ],
    [
        "Shiela",
        "Girl"
    ],
    [
        "Stacy",
        "Girl"
    ]
  ]
},
"TOTALROWCOUNT": 6
} 
```

我有这个代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [genderArray count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [genderArray objectAtIndex:section];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [namesArray count];
} 
```

namesArray 包含 NAME 返回的所有值，而 genderArray 包含 GENDER 的所有值。我越来越糊涂了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T03:23:05.067

当您感到困惑时，请将您的数据分解成碎片。您需要两个数组，每个部分一个。所以你想要一组男孩的名字，和另一组女孩的名字。

您可以通过迭代嵌入的 DATA 数组来获得它。

将您的数据转换为 NSDictionary 对象。你的数据看起来像 JSON 所以......

```
 NSDictionary* myDict =  [NSJSONSerialization JSONObjectWithData:myJsonData 
                                                            options:0 error:&error]; 
```

提取数据...

```
 NSArray* dataArray = [myDict objectForKey:@"DATA"]; 
```

迭代...

```
 NSMutableArray* boys = [[NSMutableArray alloc] init];
    NSMutableArray* girls = [[NSMutableArray alloc] init];
    for (id person in dataArray) {
         if ([[person objectAtIndex:1] isEqualToString:@"Girl"])
              [girls addObject:[person objectAtIndex:0]];
         else [boys  addObject:[person objectAtIndex:0]]; 
     } 
```

现在您有两个数组，一个用于每个表格部分。制作一个部分数组，并将这些数组放入其中：

```
 NSArray* sections = [NSArray arrayWithObjects:boys,girls,nil]; 
```

为您的节标题创建一个单独的数组：

```
 NSArray* headers = [NSArray arrayWithObjects:@"Boys",@"Girls",nil]; 
```

现在您的数据源方法如下所示：

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return [sections count];
    }

    - (NSString *)tableView:(UITableView *)tableView 
    titleForHeaderInSection:(NSInteger)section
    {
        return [headers objectAtIndex:section];
    }

    - (NSInteger)tableView:(UITableView *)tableView 
     numberOfRowsInSection:(NSInteger)section
    {
        return [[sections objectAtIndex:section] count];
    } 
```

最后

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
          cellForRowAtIndexPath:(NSIndexPath *)indexPath

    ...

       cell.textLabel.text = (NSString*)[[self.sections objectAtIndex:indexPath.section]   
                                                        objectAtIndex:indexPath.row]; 
```

# gwt - Intellij IDEA：Tomcat7 服务器的终极版

> ID：14421191
> 
> 赞同：0
> 
> 时间：2013-01-20T02:41:09.850
> 
> 标签：gwt, tomcat, deployment, intellij-idea

如何将我在 intellij IDEA: Ultimate 中创建的 GWT 应用程序部署到远程 tomcat 服务器？我唯一想到的是通过管理器应用程序上传 .war 文件，但我不知道如何编译 .war 文件...

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:48:05.890

让它像这样工作：

使用 webAppCreator 创建 webapp

[https://developers.google.com/web-toolkit/doc/1.6/RefCommandLineTools](https://developers.google.com/web-toolkit/doc/1.6/RefCommandLineTools)

（将 -maven 标志传递给它）

然后，在 Intellij 中，在现有资源上创建一个新项目......

导入maven项目，清理。

maven deploy 创建战争文件。

登录到tomcat管理器，上传war文件。

# symfony - 在 Doctrine 的 createQuery 方法中使用通配符

> ID：14421192
> 
> 赞同：7
> 
> 时间：2013-01-20T02:41:26.367
> 
> 标签：symfony, doctrine

谁能告诉我为什么这个查询不起作用？我也尝试在单引号和双引号之间交替。

```
$em = $this->getDoctrine()->getManager();

$query = $em->createQuery('SELECT t FROM AcmeBlogBundle:BlogTag t WHERE t.title LIKE \'%:title%\'')
->setParameter('title', $keyword); 
```

教义简单地返回`Invalid parameter number: number of bound variables does not match number of tokens`。

此外，使用 createQuery 方法或 createQueryBuilder 执行这样的查询更好吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-20T05:10:53.010

[PDO 将关键字和 % 通配符视为单个标记。您不能在占位符旁边添加通配符。绑定 params 时，必须将它们附加到字符串中](https://stackoverflow.com/a/3761976/1041885)。

另请参阅php 文档上的[此评论。](http://www.php.net/manual/en/pdostatement.bindparam.php#99698)

因此，您需要执行以下操作：

```
$qb = $em->createQueryBuilder();

$qb
    ->select('tag')
    ->from('AcmeBlogBundle:BlogTag', 'tag')
    ->where($qb->expr()->like('tag.title', ':title'))
    ->setParameter('title', '%' . $keyword . '%')
; 
```

或者

```
$query = $em->createQuery('SELECT t FROM AcmeBlogBundle:BlogTag t WHERE t.title LIKE :title');
$query->setParameter('title', '%' . $keyword . '%'); 
```

我更喜欢使用查询生成器，因为它更适合结构化并使您的语句更易于维护

# c++ - std::string 的默认构造函数是不抛出的吗？

> ID：14421193
> 
> 赞同：4
> 
> 时间：2013-01-20T02:41:29.693
> 
> 标签：c++, stdstring, c++03, default-constructor, nothrow

可以 std::string s; 在任何情况下抛出？这是否受标准规范（对 C++03 感兴趣，以防有差异）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T02:52:49.027

在 C++11 中，默认构造函数实际上采用一个（默认）参数，即分配器（21.4.2）：

```
explicit basic_string(const Allocator& a = Allocator()); 
```

此构造函数未声明为`noexcept`. （~~我想这将要求分配器有一个非抛出的复制构造函数。~~）正如 Jonathan 和 Bo 指出的，分配器的复制构造函数不能抛出任何异常，但允许字符串的构造函数执行抛出操作（例如分配一个初始一段记忆）。当然应该可以编写一个类似字符串的类作为不抛出`constexpr`构造函数，但标准库字符串没有指定为那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-12T15:32:06.307

[WG21/N4002 对此](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4002.pdf)进行了更改。我看到的第一份工作文件是[WG21/N4296](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf)： `// 21.4.2, construct/copy/destroy: basic_string() noexcept : basic_string(Allocator()) { }`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-20T03:34:09.537

当然，如果由于任何原因无法进行分配，它会抛出

# php - 将字符串除以数组

> ID：14421194
> 
> 赞同：-1
> 
> 时间：2013-01-20T02:41:46.523
> 
> 标签：php

> **可能重复：**
> [按大写字母拆分单词](https://stackoverflow.com/questions/9645445/split-word-by-capital-letter)

如何使用大写字母规则转换一个数组中的一个字符串？前任：

$string = "蒂姆伯顿";

$array[0] = "蒂姆";

$array[1] = "伯顿";

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T02:43:04.137

```
$array = preg_split('/(?=[A-Z])/', $string); 
```

在此处查看实际操作：[http ://codepad.viper-7.com/0E2DqO](http://codepad.viper-7.com/0E2DqO)

# php - 自发送php表单并将mysql数据拉到php中的html

> ID：14421198
> 
> 赞同：0
> 
> 时间：2013-01-20T02:43:01.563
> 
> 标签：php, mysql, html

我正在构建一个迷你图书馆管理系统，但遇到了一些问题，希望能得到一些提示和建议。

目前我有两页：一页`insert.php`和`HTML`一页。

当我成功地将一本书或交易插入数据库时​​，会打开一个新页面，并且我会收到一条成功状态消息。

1.  是否可以将这两个页面合并为一个并在提交按钮下方返回成功消息？

2.  我尝试使用以下方法直接从数据库中提取 lms_status_types_status_id 但失败了：

    ```
    <select  name="lms_status_types_status_id" id="individual" multiple="multiple">
    <option value="0" SELECTED>Select User</option> 
    <?php foreach($RET as $userdata){ ?>
    <option value="<?php echo $userdata['lms_status_types_status_id']; ?>"></option>
    <?php } ?>
    </select> 
    ```

知道我在这里做错了什么吗？

我曾尝试向 Google 寻求帮助，但发现很难实现浮动的内容。我对php完全陌生，所以请原谅！

*`insert.php`*

```
<?php

$con = mysql_connect("localhost","username","password");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

$RET = DBGet(DBQuery("SELECT * FROM lms_transactions")); 

mysql_select_db("my_db", $con);

$sql="INSERT INTO lms_books (book_id, tag, title, author, year)
  VALUES
('$_POST[book_id]','$_POST[tag]','$_POST[title]' ,'$_POST[author]' ,'$_POST[year]')";

$sql="INSERT INTO lms_transactions (student_id, lms_books_tag, lms_books_book_id, lms_status_types_status_id)
VALUES
('$_POST[student_id]','$_POST[lms_books_tag]','$_POST[lms_books_book_id]','$_POST[lms_status_types_status_id]')";

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
echo "1 record added";

mysql_close($con);
?> 
```

*`HTML File`*

```
<h2> Library Management System</h2>

<h3>Check-In/Check-Out Book:</h3>
<form action="/insert.php" method="post">
Student ID: <input type="text" name="student_id">
Book Tag: <input type="text" name="lms_books_tag">
Book ISBN: <input type="text" name="lms_books_book_id">
Status: <select name="lms_status_types_status_id">
    <option value="Checked-In">Checked-In</option>
    <option value="Checked-Out">Checked-Out</option>
    </select>
<input type="submit">
</form>

<h3>Insert Book:</h3>
<form action="/insert.php" method="post">
Book ISBN: <input type="text" name="book_id">
Tag: <input type="text" name="tag"> 
Title: <input type="text" name="title">
Author: <input type="text" name="author">
Year: <input type="text" name="year">
<input type="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:17:50.363

您声明了变量 $sql 两次，这意味着当涉及到 mysql_query() 函数时，只会使用第二个查询字符串。

是的，可以在同一页面上组合 HTML 和 PHP。您可以将 PHP 放在 HTML 之上并将其包装在 if($_POST){}（或 if(!$_POST){} 中，具体取决于您要执行的操作）。然后，您将表单提交到其自己的页面。

此外，您应该在将 POST 输入插入数据库之前清理它们，否则您将面临 datasage 提到的安全风险。

# javascript - 不能汇总超过 9 个输入的 javascript

> ID：14421202
> 
> 赞同：0
> 
> 时间：2013-01-20T02:43:29.527
> 
> 标签：javascript

我的脚本中有一个小问题，我无法获得超过 9 个输入的总和。

最多 9 个工作正常，但如果您添加一个新的输入字段，这将停止工作。

Div whit 输入和按钮：

```
<div id="valuesContainer">
<input type="text" id="value01" />
<input type="text" id="value02" />
<input type="text" id="value03" />
<input type="text" id="value04" />
<input type="text" id="value05" />
<input type="text" id="value06" />
<input type="text" id="value07" />
<input type="text" id="value08" />
<input type="text" id="value09" />

</div>
<input type="button" value="Add Value" id="addMore" onclick="addInput();" />
<input type="button" value="Calculate Total" onclick="getTotal();" />
<div id="total"></div> 
```

Javascript 使用函数进行求和以添加新的输入字段。

```
 <script type="text/javascript">
var max = 9;

function getValues(id){
    var result = document.getElementById(id).value;
    return (result ? result : 0);
}

function addInput(){
    max++;
    var input = '<input type="text" id="value'+ max +'" />';
    document.getElementById("valuesContainer").innerHTML += input;
}

function getTotal(){
    var sum = 0;
    for(var i=1; i <= max; i++){
        sum = sum + parseFloat(getValues("value0" + i));
    }
    document.getElementById("total").innerHTML = sum;
}
    </script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T02:45:48.380

请注意，在您的代码中，您在以下索引之前明确添加了“value0”：

```
sum = sum + parseFloat(getValues("value0" + i)); 
```

使用该代码，您的第十个索引应该是“value010”

* * *

仅当索引小于 10 时，您才可以在前面添加“0”：

```
if (i < 10)
   sum = sum + parseFloat(getValues("value0" + i)); 
else
   sum = sum + parseFloat(getValues("value" + i)); 
```

然后你可以对第十个索引使用“value10”，这可能是你最初想要的。

您可以为更大的数量或其他情况做类似的工作。对于更通用的解决方案，您可以使用函数[将字符串填充到给定大小](http://eureka.ykyuen.info/2011/08/23/javascript-leftright-pad-a-string/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T02:46:28.553

你如何命名它们？

我的猜测是您正在使用`value10`，但您的 getValues 代码将 i 附加到`value0`. 我敢打赌，如果您使用`value010`，它会起作用。

如果下一个值必须是 value10，您有两种选择：

1.) 将 through 重`value01`命名`value09`为`value1`through`value9`

2.) 仅在 i < 10 时附加 0：

```
for(var i=1; i <= max; i++){
     parseFloat(getValues("value" + ((i<10)? "0" + i : i)));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-20T02:46:47.960

你的代码说

```
getValues("value0" + i) 
```

因此对于 i > 9 的值，它将查找 ID“value010”等。因此，如果您的其他输入具有类似的 ID

```
<input type="text" id="value10" /> 
```

那么“value010”将与“value10”不匹配，您将找不到您要查找的内容。

# google-search - 使用机器人进行多个谷歌搜索和输出

> ID：14421203
> 
> 赞同：0
> 
> 时间：2013-01-20T02:43:37.970
> 
> 标签：google-search

我有大量制造代码，我需要为它们获取产品名称，通常我会使用谷歌一次搜索一个，搜索结果通常有产品名称，但现在我有 20,000 个要转换:(

有谁知道是否有办法编写此过程的脚本并将结果输出到文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:56:08.923

您可以执行以下任务：

1.  从 Google 搜索中抓取您提供的搜索查询的结果。因为这个脚本可以用你知道的任何语言编写。但在确定没有之后。请求中，Google 会将您识别为机器人并阻止您。

2.  另一种方法是使用 Google 的[自定义搜索 API](https://developers.google.com/custom-search/v1/overview)。您从 google 搜索中获得 JSON 或 Atom 格式的前 20 个结果。然后，您可以从那里获取结果。你仍然有局限性。最大数量 免费用户每天的搜索次数为 100。

# vb.net - 在表达式中使用 IIf

> ID：14421205
> 
> 赞同：2
> 
> 时间：2013-01-20T02:43:41.447
> 
> 标签：vb.net

假设`totallvl`是一个整数并且`chclass1`已经创建但`chclass2`没有，为什么我可以这样做：

```
totallvl = chclass1.level
If chclass2 IsNot Nothing Then
    totallvl = totallvl + chclass2.level
End If 
```

但不是这个？

```
totallvl = chclass1.level + IIf(chclass2 Is Nothing, 0, chclass2.level) 
```

就像编译器假设我将`chclass2`在此示例中使用但不在第一个示例中使用一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T02:51:25.817

`IIf`只是一个函数；`chclass2.level`无论第一个参数是什么，都会对其进行评估。如果您想要一个类似于其他语言的内联条件运算符，请使用实际的内联`If`（在 VB 2008 及更高版本中可用）：

```
If(chclass2 Is Nothing, 0, chclass2.level) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T02:50:26.910

这是因为调用函数时所有函数参数都已解析。if 语句仅在语句块的“true”部分运行代码。

# azure - Azure Blob - 未保存缓存控制

> ID：14421212
> 
> 赞同：2
> 
> 时间：2013-01-20T02:45:44.767
> 
> 标签：azure, azure-blob-storage

我在为 blob 设置缓存控制标头时遇到问题。

我正在使用 Azure 存储资源管理器设置 CacheControl。我只是选择 blob，单击属性，然后用“public, max-age=31536000”（不带引号）填写 CacheControl 字段。

我直接从 *.blob.core.windows.net/coreimages/test.png 下载 blob。

但是，在谷歌浏览器中查看标题时，它显示：max-age=0

难道我做错了什么？我已经尝试设置 mime 并且它被正确保存。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:11:40.863

我已经测试过了，它工作得很好：

![Azure 标头](../Images/30c148ee03c5135d026edf9ca79bfd73.png)

需要检查的几件事：

*   您确定 Azure 存储资源管理器支持`Cache-Control`标头吗？我使用 CloudBerry 并且标题没有问题。
*   你确定你设置了正确的标题名称：`Cache-Control`而不是`CacheControl`（[链接](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:35:15.837

我也在 Azure 存储资源管理器中对此进行了测试，它确实有效。尽管它似乎将值保存到 blob（图像），但当您再次打开它时，它无法将其显示回来。我刚刚检查过，这是 Azure 存储资源管理器的一个已知问题，请转到此链接并投票修复它：

[http://azurestorageexplorer.codeplex.com/workitem/7580](http://azurestorageexplorer.codeplex.com/workitem/7580)

如果您必须对多个文件执行此操作，这里有一个很好的脚本片段：

[将 Cache-Control 和 Expires 标头添加到 Azure 存储 Blob](https://stackoverflow.com/questions/4507657/add-cache-control-and-expires-headers-to-azure-storage-blobs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-15T13:48:14.453

通常，默认 Blob 存储不使用缓存控制。为此，您应该在云中创建一个 CDN（有一个选项，然后您将端点设置为指向该 blob 存储容器（公共），以及它缓存内容的 CDN。

[https://azure.microsoft.com/pt-pt/documentation/articles/cdn-manage-expiration-of-cloud-service-content/](https://azure.microsoft.com/pt-pt/documentation/articles/cdn-manage-expiration-of-cloud-service-content/)

# jquery - Fancybox 通过添加边距来推动背景

> ID：14421217
> 
> 赞同：1
> 
> 时间：2013-01-20T02:46:14.040
> 
> 标签：jquery, fancybox, margin

我的测试站点：rockitmembers.us

网站是 Wordpress.org，不使用插件。

**header.php 中的代码是：**

```
<link rel="stylesheet" href="http://www.rockitmembers.us/wp-content/themes/acosmin-v3/fancybox/source/jquery.fancybox.css" type="text/css" media="screen" /> 
```

**footer.php 中的这段代码：**

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.rockitmembers.us/wp-content/themes/acosmin-v3/fancybox/source/jquery.fancybox.pack.js"></script>
    <script>
    $(document).ready(function() {
    $(".iframe").fancybox({
       fitToView : false,
       autoSize : false,
       scrolling : 'no',
    maxWidth        : 820,
    maxHeight       : 600,
    width           : 800,
    height          : 600,
    type            : 'iframe'
        });
    });
    </script> 
```

**在我的 wordpress 帖子中，此代码用于购买许可证按钮：**

```
<a href="http://www.rockitmembers.us/fancyboxtest.html" class="iframe rollover"><span class="displace">Buy A Beat</span></a> 
```

单击第一篇文章（我的反思）上的购买许可证按钮。Fancybox 功能很好，只是它为 fancybox-lock 添加了 17px 的边距，这会弄乱背景的外观，我认为它会将滚动条推出？我不知道。当您在 Chrome 中检查它时，它会`<body class="fancybox-lock" style="margin-right: 17px;">`在单击购买许可证按钮时添加。

我尝试了这篇文章中的建议[Jquery Fancybox 2 添加了边距，对吗？](https://stackoverflow.com/questions/12902531/jquery-fancybox-2-adds-a-margin-right)通过编辑 jquery.fancybox.css 并取出，`overflow-y: scroll;`但这仍然没有解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:14:00.817

看起来它真的与Fancybox无关。看看你的实现，看起来你在每个“细节”部分的硬编码宽度都`<ul>`在推动 Fancybox 的边缘。您应该能够消除 中的大多数浮动`cartstyles.css`，然后您不需要在这些元素上指定宽度。

**编辑：**我不建议将此作为一种习惯，但如果唯一的抱怨是额外的边距，请尝试将此规则添加到您的样式表中：

```
.fancybox-lock{
    margin-right:0 !important;
} 
```

`!important`覆盖正常的级联，并允许您覆盖 Fancybox 应用的内联样式。不过，它只会掩盖真正的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T15:31:43.040

这是我对同一问题的解决方案。在研究了几个答案之后，结合我的发现就可以了。在 jquery.fancybox.css 中，对覆盖帮助程序部分进行以下更改。

**前**

```
.fancybox-lock {
    overflow: hidden !important;
    width: auto;
}

.fancybox-lock body {
    overflow: hidden !important;
}

.fancybox-lock-test {
    overflow-y: hidden !important;
}

.fancybox-overlay {
 position: absolute;
 top: 0;
 left: 0;
 overflow: hidden;
 display: none;
 z-index: 99999998010;
 background: url('fancybox_overlay.png');
}

.fancybox-overlay-fixed {
 position: fixed;
 bottom: 0;
 right: 0;
}

.fancybox-lock .fancybox-overlay {
 overflow: auto;
 overflow-y: scroll;
} 
```

**后**

```
.fancybox-lock {

}

.fancybox-lock body {

}

.fancybox-lock-test {

}

.fancybox-overlay {
 position: absolute;
 top: 0;
 left: 0;

 display: none;
 z-index: 99999998010;
 background: url('fancybox_overlay.png');
}

.fancybox-overlay-fixed {
 position: fixed;
 bottom: 0;
 right: 0;
}

.fancybox-lock .fancybox-overlay {

} 
```

# ruby - 什么时候应该使用 OpenStruct 而不是 Hash？

> ID：14421218
> 
> 赞同：29
> 
> 时间：2013-01-20T02:46:15.027
> 
> 标签：ruby, ruby-1.9.3, openstruct

我喜欢“任意属性的定义”，并且我认为 ruby​​ 中的 OpenStruct 有时感觉比使用哈希更干净，但我很好奇是否还有其他特定优势或用例使 OpenStruct 成为比简单使用更好的选择一个哈希。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-20T02:50:38.093

`OpenStruct`当您需要一些东西来适应某个方法调用接口时（即发送响应`#name`and的鸭子类型对象`#value`），或者当您想要封装实现细节但又想要避免过度设计解决方案时，对象很有用。它们还制作了一个很棒的存根对象，当我不需要存根/模拟的开销时，我经常使用它们来代替框架存根。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-20T02:48:32.937

我认为这主要归结为性能决定。来自[Ruby 文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)：

> OpenStruct 利用 Ruby 的方法查找结构来查找和定义属性的必要方法。这是通过方法method_missing 和define_method 完成的。
> 
> 如果担心所创建对象的性能，这应该是一个考虑因素，因为与使用 Hash 或 Struct 相比，设置这些属性的开销要大得多。

此外，类似 a 的东西`Hash`在它提供的所有方法中都具有附加功能（`has_key?`、`include?`等）。从这个角度来看，这`OpenStruct`是一个非常简单的对象，但是如果您从性能的角度来看没有任何顾虑并且只想要一个简单的对象来使用，`OpenStruct`那么它是一个不错的选择。

# lua - 如何查看 RbxGui 方法的事件？

> ID：14421219
> 
> 赞同：1
> 
> 时间：2013-01-20T02:46:26.523
> 
> 标签：lua, roblox

所以，我正在为 ROBLOX Studio 制作一个插件，并被 RbxGui 方法所吸引。我使用在框架内创建了一个滑块

```
local sGui = Instance.new("ScreenGui", game.CoreGui)
local PaceFrame = Instance.new("Frame", sGui)
PaceFrame.Size = UDim2.new(0, 210, 0, 200)
local PaceSlider = RbxGui.CreateSlider(10,200,UDim2.new(0, 5, 0, 175))
PaceSlider.Parent = PaceFrame 
```

所以我的问题是，如何检测滑块值何时移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:37:33.237

[RbxGui.CreateSlider](http://wiki.roblox.com/index.php/CreateSlider_%28Function%29)返回两个值，一个用于滑块的框架以及一个带有位置的 IntValue。

您应该能够使用[IntValue.Changed](http://wiki.roblox.com/index.php/Changed_%28Event%29/value)来检测更改：

```
local sGui = Instance.new("ScreenGui", game.CoreGui)
local PaceFrame = Instance.new("Frame", sGui)
PaceFrame.Size = UDim2.new(0, 210, 0, 200)
local PaceSlider, PaceSliderPosition = RbxGui.CreateSlider(10,200,UDim2.new(0, 5, 0, 175))
PaceSlider.Parent = PaceFrame
PaceSliderPosition.Changed:connect(function(position)
    print("Slider position is now " .. position)
end) 
```

# java - 在 JOptionPane 中打印堆栈跟踪

> ID：14421229
> 
> 赞同：0
> 
> 时间：2013-01-20T02:48:34.180
> 
> 标签：java, printing, error-handling, stack-trace, joptionpane

我的问题：如何将文本 e.printStackTrace 打印到 JOptionPane 窗口中

我的代码目前如下：
请原谅糟糕的格式：P

```
try {
  //SOME CODE
} catch (Exception e) {
  e.printStackTrace();
  JOptionPane.showMessageDialog(null,
     "An unexpected error has occurred:\n" + e.getMessage() + '\n' + Thread.currentThread().getStackTrace() +  "\nPlease send this error to ." + email + "\nThanks for your help.",
     "Error", JOptionPane.ERROR_MESSAGE);
} 
```

这两者都在命令行界面中打印堆栈跟踪（我正在使用终端）并创建一个 JOptionPane 但与 e.printStackTrace() 的信息不同。从 jar 文件运行我的程序时，命令行界面将不可见，因此用户只会获得 JOptionPane 窗口，该窗口没有我成功识别问题所需的所有信息

提前致谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T03:19:20.093

在这里，这只是我想出的一些通用代码，它将为您提供与`e.printStackTrace()`.

```
try {
    // some code
} catch (Exception e) {
    StringBuilder sb = new StringBuilder(e.toString());
    for (StackTraceElement ste : e.getStackTrace()) {
        sb.append("\n\tat ");
        sb.append(ste);
    }
    String trace = sb.toString();
    // Now, trace contains the stack trace
    // (However, you can only use it inside the catch block)
} 
```

但是，如前所述，您可能想要一个可以滚动的窗口，因为我认为它不太适合`JOptionPane`.

# ruby-on-rails - 通过 Rails 表单静默传递参数

> ID：14421232
> 
> 赞同：0
> 
> 时间：2013-01-20T02:49:15.540
> 
> 标签：ruby-on-rails, ruby, forms

我需要通过 Rails 表单传递参数并在控制器中访问它。我会使用隐藏字段标记，但我不希望用户能够在 HTML 中编辑这些数据并提交它。如何秘密传递此参数并在提交时访问它`parameter[:my_parameter]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T02:52:51.180

虽然用户可以在几乎任何现代浏览器中查看隐藏字段数据，但他们不能直接在浏览器本身中修改它。但是，他们可以构建表单数据并使用他们选择的其他一些客户端（curl、fiddler 等）传递它——您对此无能为力。我建议不要依赖这种方法来处理敏感数据。

一种可能的解决方法是提前以某种形式对其进行加密，这可以让您确定它在发布时是否被篡改。正确执行此操作可能会很棘手，并且传递参数不是常见的做法。

也许如果你能澄清你到底想要完成什么，有人可能会提出一个合适的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T03:08:31.783

最好的做法是不要通过 HTML 传递参数，而是将其绑定到用户的会话，并将实际的敏感数据存储在数据库或缓存中。您可以尝试对其进行加密，但是，如果用户有权访问数据，那么他们就有能力尝试对其进行解密。

# google-apps-script - 如何在 Google 电子表格脚本中定义 HTML 参数？

> ID：14421233
> 
> 赞同：2
> 
> 时间：2013-01-20T02:49:22.857
> 
> 标签：google-apps-script

我正在使用以下脚本在提交表单时生成电子邮件回复。我想知道是否有办法进一步完善 htmlBody var 的 HTML 代码。例如，我想定义 "font face = "tahoma" 但是添加引号会导致变量中断。我该怎么做？

```
function onFormSubmit(e) {
 var custName = e.values[2];
  var toAddress = e.values[3];
  var subject = "Thank you for your Support Request";
  var htmlBody = "<h2>Hi " + custName + ",</h2><br/><Thank you for contacting our support team. Your support ticket has been created and one of our support engineers will be in touch shortly to help you resolve your issue and answer any questions you may have. Please do not reply to this message via e-mail. This address is automated, unattended, and cannot help with questions or requests.<br/><hr><i>Company Name: " + e.values[1] + "<br/>Ticket type: " + e.values[4] + "<br/> Priority: " + e.values[5] + "<br/>Ticket Subject: " + e.values[6] + "<br/>Description: " + e.values[7] + "</p1></i>";
  var optAdvancedArgs = {name: "Support Team", htmlBody: htmlBody, replyTo: "no-reply@domain.com"};
  MailApp.sendEmail(toAddress, subject, htmlBody, optAdvancedArgs);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:54:05.413

`\"`需要`"`在字符串中使用时使用。

`\`用于在大多数（如果不是所有）语言中转义字符串中的某些字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:04:33.797

您还可以像在此示例中一样使用单引号和双引号“播放”变量`color`需要在引号之间：

```
 var html = "One (or more) event removed <B>in RED</B> as shown below<BR><BR><TABLE border = 1 cellpadding = 5 bgcolor='"+color+"'><EVENTS></table>" 
```

# ruby-on-rails - 无法在没有预编译的情况下在 localhost 上编写新的 javascript

> ID：14421234
> 
> 赞同：1
> 
> 时间：2013-01-20T02:49:35.083
> 
> 标签：ruby-on-rails

在编译资产后，我制作了一个 Rails 应用程序并部署到 Heroku。但是，既然我已经编译了一次资产，如果我想对本地主机上的 javascript 进行更改，我每次都必须重新编译资产，否则新的 javascript 无法正确注册并且我看不到更改在本地主机上，这使得开发非常缓慢，因为我必须等待它为每次更改进行编译。

有没有我可以添加的设置来避免这个问题？

这些是我的环境/development.rb 文件中的设置。

```
 config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = false

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin

  # Do not compress assets
  config.assets.compress = false

  # Expands the lines which load the assets
  config.assets.debug = true 
```

# sql - 查询获取有条件的当前日期

> ID：14421238
> 
> 赞同：0
> 
> 时间：2013-01-20T02:50:09.640
> 
> 标签：sql, date, db2, datediff

我需要从日期表中获取日期减去 3 天（具体为工作日）。下面是结构：

```
      日期工作日
      2013 年 1 月 1 日  
      13 年 1 月 2 日 N
      2013 年 1 月 3 日
      2013 年 1 月 4 日
      2013 年 1 月 5 日

```

假设如果`todays`日期是`1/5/13`那么我需要得到`current_date - 3`（营业）日，即`1/1/13`（因为 1/2/13 是非营业日）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:25:13.470

这可以通过所谓的“窗口”功能来完成。以下内容应该适用于所有（最近的）DB2 版本（但未经测试，因为我离开了我的实例）：

```
SELECT calendar_date
FROM (SELECT calendar_date, ROW_NUMBER() OVER(ORDER BY calendar_date DESC) as rownum
      FROM Calendar
      WHERE calendar_date < CURRENT_DATE
            AND business_day = 'Y') c
WHERE ROW_NUM = 3 
```

这应该导致`2013-01-01`.

如果你正在做很多类似的数学运算，我实际上建议为这类事情创建存储过程，比如`addBusinessDays(calendar_date, days_to_add)`. 尽管您必须访问一个表才能使其工作，但您应该能够将其标记为`DETERMINISTIC`（好吧，假设编译器允许您摆脱它，并且那些日子不会突然切换......）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T03:58:06.067

我怀疑您是否可以仅使用 SQL 找到解决此问题的方法。您将需要一些帮助来以编程方式解决此问题（使用存储过程或类似方法）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T03:44:28.017

如果是 MSSQL，那么你可以使用，

```
GETDATE() - 3 
```

如果是 MYSQL，那么您可以在[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html查看日期函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

我相信`CURDATE()`它将适用于 MYSQL。

# java - 绘图框错误 - 线条太细

> ID：14421243
> 
> 赞同：1
> 
> 时间：2013-01-20T02:50:36.347
> 
> 标签：java

所以我的任务之一是我必须创建一个具有不同颜色边和不同粗细线条的盒子。听起来很简单。这就是我的想法，但我遇到的问题是当厚度设置为“40”时，我的盒子的最后一行是纸薄。我知道 40 应该更粗，因为所有其他线都更粗并且设置为低于 40 的值。有什么建议吗？

```
public class SketchPadDrawing
{
    public static void main(String[] args)
    {
        SketchPad box = new SketchPad();

        box.drawLine(100, 200, 100, 0);
        box.setPenColor("RED");
        box.setPenThickness(10);

        box.drawLine(100, 0, 0, 0);
        box.setPenColor("BLUE");
        box.setPenThickness(20);

        box.drawLine(0, 0, 0, 200);
        box.setPenColor("GREEN");
        box.setPenThickness(30);

        box.drawLine(0, 200, 100, 200);
        box.setPenColor("BLACK");
        box.setPenThickness(40);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T02:57:13.247

改变：

```
box.drawLine(0, 200, 100, 200);
box.setPenColor("BLACK");
box.setPenThickness(40); 
```

至：

```
box.setPenColor("BLACK");
box.setPenThickness(40);
box.drawLine(0, 200, 100, 200); 
```

到第一个代码段的最后 2 行执行完毕时，所有绘图都已完成。因此它们没有效果。

# sql - 轨道接合！错误（无法批量分配受保护的属性：用户）

> ID：14421250
> 
> 赞同：2
> 
> 时间：2013-01-20T02:52:01.897
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我正在安装[Engage！](http://engagecsm.com/)

我按照此处的安装说明进行操作：http: [//engagecsm.com/readme](http://engagecsm.com/readme)

我做的安装步骤：

1.  添加参与！到应用程序的 Gemfile：gem 'engagecsm'。
2.  安装它：捆绑安装。
3.  运行生成器：rails generate 参与用户。
4.  运行迁移：rake db:migrate。

现在，我可以去 localhost:3000/engage

![做的结果图片](../Images/e25f5ad5f1eab72157c1960f365065d7.png)

这是显示的内容：

![这是订婚的照片！ 论坛，我在其中输入了要用于创建新主题的数据。 有一个](../Images/14887d0e6e1d7e2a6c68a60bf9e62993.png)

现在，当我点击“创建主题”时，网站上什么也没有发生。我查看我的 Rails 服务器控制台，我看到了这个：（更容易在此处查看[http://i.stack.imgur.com/xKBER.png](https://i.stack.imgur.com/xKBER.png)，在底部找到完整的堆栈跟踪）

![开始 POST](../Images/09dc657f543d6e1c04fb90cf2c062b59.png)"✓&quot;," "authenticity_token"=">"aRKQAwMsnc1DJJ62S6bb7EkhFkzuCDtNL0kV756LIP4="," "topic"=">{"style"=>"question"," "title"=">"ww"," "message"=">"www"," "follow"=">"1"}," "commit"=">"Create" topic"}="" user="" load="" (0.3ms)="" select="" "users".*="" from="" "users"="" where="" "users"."id"="1" limit="" 1="" engage::userprofile="" (0.4ms)="" "engage_user_profiles".*="" "engage_user_profiles"="" "engage_user_profiles"."user_id"="1" (0.1ms)="" begin="" transaction="" inner="" join="" on="" ."id"="" sql="" (1.2ms)="" insert="" into="" "engage_topics"="" ("comments_count",="" "created_at",="" "followers_count",="" "message",="" "private",="" "status",="" "string",="" "style",="" "title",="" "updated_at",="" "user_id",="" "votes_count")="" values="" (?,="" ?,="" ?)="" [["comments_count",="" 0],="" ["created_at",="" sun,="" 20="" jan="" 2013="" 02:48:26="" utc="" +00:00],="" ["followers_count",="" ["message",="" "www"],="" ["private",="" false],="" ["status",="" "pending"],="" ["string",="" nil],="" ["style",="" "question"],="" ["title",="" "ww"],="" ["updated_at",="" ["user_id",="" 1],="" ["votes_count",="" 0]]="" engage::following="" "engage_followings".*="" "engage_followings"="" "engage_followings"."topic_id"="7" and="" "engage_followings"."user_id"="1" (0.2ms)="" binary="" data="" inserted="" <code>string<="" code>="" type="" column="" <code>token<="" (0.9ms)="" ("created_at",="" "token",="" "topic_id",="" "user_id")="" [["created_at",="" ["token",="" "5813db34aaedfa6226cf77b7a17d5dfbcf8d4560"],="" ["topic_id",="" 7],="" 1]]="" engage::topic="" "engage_topics".*="" "engage_topics"."id"="7" order="" created_at="" desc="" (0.8ms)="" update="" set="" "followers_count"="COALESCE("followers_count"," 0)="" +="" in="" (select="" desc)="" (3.8ms)="" commit="" rollback="" completed="" 500="" internal="" server="" error="" 71msactivemodel::massassignmentsecurity::error="" (can't="" mass-assign="" protected="" attributes:="" user):="" activemodel="" (3.2.11)="" lib="" active_model="" mass_assignment_security="" sanitizer.rb:48:in="" <code>process_removed_attributes'="" sanitizer.rb:20:in<="" code>debug_protected_attribute_removal'="" sanitizer.rb:12:in="" `sanitize'"="">

所以我开始用谷歌搜索，我看到这样的事情：

*   [无法批量分配受保护的属性：用户](https://stackoverflow.com/questions/12447937/cant-mass-assign-protected-attributes-user)
*   [http://guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)

我已经将 attr_accessible :user 添加到我的用户模型中，但这不起作用。

这是我的用户模型：

![class User < ActiveRecord::Base include Engage::Extensions::User has_many :resources has_many :resource_views, :class_name => 'UserResourceView' has_many :viewed_resources, :through => :resource_views, :source => :resource has_many :evaluations,班级名称：](../Images/3f1596fed74958545bc948421ff25a4e.png)

另外，我看不到我如何访问 Engage 模型等，请参阅这里的目录：

![我的目录列表：控制器、助手、模型和视图。 其中没有一个是特定于 Engage 的。 我找不到 Engage 的控制器等在哪里。 它在宝石中。](../Images/af520ac17ee41a6d7c93cb90483246e3.png)

有谁知道如何解决这一问题？如果您需要任何其他信息，请告诉我，我将提供屏幕截图。

任何帮助是极大的赞赏。谢谢！

编辑 #1 - 添加应用程序控制器图片和完整堆栈跟踪

这是我唯一可以通过 Engage 看到任何东西的地方！在控制器中（此时我没有用户控制器）

![application_controller.rb 文件。 类 ApplicationController < ActionController::Base 包括 Engage::Extensions::Helpers protect_from_forgery end](../Images/8279f96283db124f011b84b866f5402d.png)

这是完整的堆栈跟踪：

![开始 POST](../Images/d994578d980893e9c26879b26e89ece9.png)"✓&quot;," "authenticity_token"=">"aRKQAwMsnc1DJJ62S6bb7EkhFkzuCDtNL0kV756LIP4="," "topic"=">{"style"=>"question"," "title"=">"ww"," "message"=">"www"," "follow"=">"1"}," "commit"=">"Create" topic"}="" user="" load="" (0.3ms)="" select="" "users".*="" from="" "users"="" where="" "users"."id"="1" limit="" 1="" engage::userprofile="" (0.4ms)="" "engage_user_profiles".*="" "engage_user_profiles"="" "engage_user_profiles"."user_id"="1" (0.1ms)="" begin="" transaction="" inner="" join="" on="" ."id"="" sql="" (1.2ms)="" insert="" into="" "engage_topics"="" ("comments_count",="" "created_at",="" "followers_count",="" "message",="" "private",="" "status",="" "string",="" "style",="" "title",="" "updated_at",="" "user_id",="" "votes_count")="" values="" (?,="" ?,="" ?)="" [["comments_count",="" 0],="" ["created_at",="" sun,="" 20="" jan="" 2013="" 02:48:26="" utc="" +00:00],="" ["followers_count",="" ["message",="" "www"],="" ["private",="" false],="" ["status",="" "pending"],="" ["string",="" nil],="" ["style",="" "question"],="" ["title",="" "ww"],="" ["updated_at",="" ["user_id",="" 1],="" ["votes_count",="" 0]]="" engage::following="" "engage_followings".*="" "engage_followings"="" "engage_followings"."topic_id"="7" and="" "engage_followings"."user_id"="1" (0.2ms)="" binary="" data="" inserted="" <code>string<="" code>="" type="" column="" <code>token<="" (0.9ms)="" ("created_at",="" "token",="" "topic_id",="" "user_id")="" [["created_at",="" ["token",="" "5813db34aaedfa6226cf77b7a17d5dfbcf8d4560"],="" ["topic_id",="" 7],="" 1]]="" engage::topic="" "engage_topics".*="" "engage_topics"."id"="7" order="" created_at="" desc="" (0.8ms)="" update="" set="" "followers_count"="COALESCE("followers_count"," 0)="" +="" in="" (select="" desc)="" (3.8ms)="" commit="" rollback="" completed="" 500="" internal="" server="" error="" 71ms"=""> ![SQL (0.9ms) 插入](../Images/060f70f3ba93a979cc8e56e922227893.png)

![activesupport (3.2.11) lib/active_support/callbacks.rb:215:in <code>block in _conditional_callback_around_4085' activesupport (3.2.11) lib/active_support/callbacks.rb:326:in</code>around' activesupport (3.2 .11) lib/active_support/callbacks.rb:310:in <code>_callback_around_127' activesupport (3.2.11) lib/active_support/callbacks.rb:214:in</code>_conditional_callback_around_4085' activesupport (3.2.11) lib/ active_support/callbacks.rb:414:in <code>_run__2010401100414174750__process_action__2035169522325419882__callbacks' activesupport (3.2.11) lib/active_support/callbacks.rb:405:in</code>__run_callback' activesupport (3.2.11) lib/active_support/callbacks.rb :385:in <code>_run_process_action_callbacks'activesupport (3.2.11) lib/active_support/callbacks.rb:81:in</code>run_callbacks' actionpack (3.2.11) lib/abstract_controller/callbacks.rb:17:in <code>process_action' actionpack (3.2.11) lib/action_controller/metal/rescue.rb:29:in</code>process_action' actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:30:in <code>block in process_action' activesupport (3.2.11) lib/active_support/notifications.rb:123:in</code>block in instrument' activesupport (3.2.11) lib/active_support/notifications/instrument.rb:20:in <code>instrument' activesupport (3.2.11) lib/active_support/notifications.rb:123:in</code>instrument' actionpack (3.2 .11) lib/action_controller/metal/instrumentation.rb:29:in <code>process_action' actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:207:in</code>process_action'activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:18:in <code>process_action' actionpack (3.2.11) lib/abstract_controller/base.rb:121:in</code>process' actionpack (3.2 .11) lib/abstract_controller/rendering.rb:45:in <code>process' actionpack (3.2.11) lib/action_controller/metal.rb:203:in</code>dispatch' actionpack (3.2.11) lib/ action_controller/metal/rack_delegation.rb:14:in <code>dispatch' actionpack (3.2.11) lib/action_controller/metal.rb:246:in</code>block in action' actionpack (3.2.11) lib/action_dispatch /routing/route_set.rb:73:in <code>call' actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in</code>dispatch' actionpack (3.2.11) lib/action_dispatch/ routing/route_set.rb:36:in <code>call' 旅程 (1.0.4) lib/journey/router.rb:68:in</code>block in call' Journey (1.0.4) lib/journey/router.rb:56:in <code>each' Journey (1.0.4) lib /journey/router.rb:56:in</code>call' actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in <code>call' railties (3.2.11) lib/rails/ engine.rb:479:in</code>call' railties (3.2.11) lib/rails/railtie/configurable.rb:30:in <code>method_missing' Journey (1.0.4) lib/journey/router.rb :68:in</code>block in call' 旅程 (1.0.4) lib/journey/router.rb:56:in <code>each' 旅程 (1.0.4) lib/journey/router.rb:56:在</code>call'actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in <code>call'warden (1.2.1) lib/warden/manager.rb:35:in</code>代码>阻止调用'warden (1.2.1) lib/warden/manager.rb:34:in <code>catch'warden (1.2.1) lib/warden/manager.rb:34:in</code>call' actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in <code>call' rack (1.4.3) lib/rack/etag.rb:23:in</code>call' rack (1.4.3) lib/rack/conditionalget.rb:35:in <code>call' actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in</code>call' actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in 'call'11) lib/action_dispatch/middleware/head.rb:14:in</code>call' actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in 'call'11) lib/action_dispatch/middleware/head.rb:14:in</code>call' actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in 'call'](../Images/c50630c4de643e25099d0f36a6a2d18c.png)

![actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in <code>call' rack (1.4.3) lib/rack/session/abstract/id.rb:210:in</code>context ' rack (1.4.3) lib/rack/session/abstract/id.rb:205:in <code>call' actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in</code> call' activerecord (3.2.11) lib/active_record/query_cache.rb:64:in <code>call' activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in</code>call ' actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in <code>block in call' activesupport (3.2.11) lib/active_support/callbacks.rb:405:in</code>_run__4377122496359715927__call__4128007891844716680__callbacks' activesupport (3.2.11) lib/active_support/callbacks.rb:405:in <code>__run_callback' activesupport (3.2.11) lib/active_support/callbacks.rb:385:in</code>_run_call_callbacks' activesupport (3.2.11) lib/active_support/callbacks.rb:81:in <code>run_callbacks' actionpack (3.2 .11) lib/action_dispatch/middleware/callbacks.rb:27:in</code>call' actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in <code>call' actionpack (3.2\. 11) lib/action_dispatch/middleware/remote_ip.rb:31:in</code>call' actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in <code>call' actionpack (3.2.11 ) lib/action_dispatch/middleware/show_exceptions.rb:56:in</code>call' railties (3.2.11) lib/rails/rack/logger.rb:32:in <code>call_app' railties (3.2.11) lib/rails/rack/logger.rb:16:in</code>block in call'activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in <code>tagged' railties (3.2.11) lib/rails/rack/logger.rb:16:in</code>call' actionpack (3.2 .11) lib/action_dispatch/middleware/request_id.rb:22:in <code>call' rack (1.4.3) lib/rack/methodoverride.rb:21:in</code>call' rack (1.4.3) lib/rack/runtime.rb:17:in <code>call' activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in</code>call' rack (1.4.3) lib /rack/lock.rb:15:in <code>call' actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in</code>call' railties (3.2.11) lib/rails/ engine.rb:479:in <code>call' railties (3.2.11) lib/rails/application.rb:223:in</code>call' rack (1.4.3) lib/rack/content_length.rb:14 :in <代码>调用'railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in</code>call' rack (1.4.3) lib/rack/handler/webrick.rb:59:in <code>service' /用户/johndoe/.rbenv/versions/1.9.3-p327-perf/lib/ruby/1.9.1/webrick/httpserver.rb:138:in</code>service' /Users/johndoe/.rbenv/versions/ 1.9.3-p327-perf/lib/ruby/1.9.1/webrick/httpserver.rb:94:in <code>run' /Users/johndoe/.rbenv/versions/1.9.3-p327-perf/lib/ ruby/1.9.1/webrick/server.rb:191:in</code>block in start_thread'运行'/Users/johndoe/.rbenv/versions/1.9.3-p327-perf/lib/ruby/1.9.1/webrick/server.rb:191:in</code>block in start_thread'运行'/Users/johndoe/.rbenv/versions/1.9.3-p327-perf/lib/ruby/1.9.1/webrick/server.rb:191:in</code>block in start_thread'](../Images/9879fccc81dab37e18f881d634612e60.png)

编辑#2 - 添加参与环境：

此外，我们还安装了 Devise（我相信还有 OmniAuth……）。因此，我们有“current_user”，但我不知道我们是否有“用户名”或“电子邮件”方法，除非这是 Devise 或其他东西的标准 ![这是engage.rb 文件。 Engage.configure 做 |config|  config.layout = 'application' config.user_model = 'User' config.mailer_sender = 'engage@knowledgethief.com' config.internal_authentication = false config.current_user_method = Proc.new { current_user } config.login_link = { :path => ： new_user_session_path, :opts => { :remote => true } } config.username_method = Proc.new { username } config.email_method = Proc.new { email } end](../Images/4a04546c6df662dff82606c2eef60333.png)

编辑#3 - 正如 Geoff 建议的那样，我查看了 topic_controller 的第 46 行。该行如下：

@topic.votes.create(:user =>engage_current_user)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:36:23.780

这是订婚之一！开发商在这里。我可以看到 Engage 有两个问题！如上所述。

我们已经找到了第一个（您已经解决的那个`attr_accessible :user`）的解决方案，所以期待 Rubygems 的更新很快。

第二个（主题实际上并未显示在索引页面上的事实）与 cancan gem 中的更改有关。我们仍然需要找出解决这个问题的最佳方法，但一个快速的解决方法是在 Gemfile 中锁定 cancan 版本，如下所示`gem 'cancan', '1.6.7'`：

我们将在 Rubygems 上发布解决这些问题的更新时通知您。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:13:27.427

根据所提供的信息，恐怕我不知道发生了什么，但我可以帮助对您遇到的错误进行一些解释。

跟踪中的最后一个非库行是：

engagecsm (1.0.8) app/controllers/engage/topics_controller.rb:46：在“创建”中

此代码可能在您的默认 gem 路径中。可能`/usr/lib/ruby/gems`或者`/home/user_name/.gem/ruby`如果你在 *nix 上。

在处理那行代码的某个时候，它遇到了批量分配安全错误。

它可能会帮助您查看该行代码以了解它所击中的模型。*不要*在这里发布那行代码。Engage 的许可证！似乎不是标准的开源之一，如果您在此处发布，您可能违反了许可。我很可能是错的，但安全总比抱歉好。

有两个变量可以使您因批量分配安全性而绊倒。它们是属性和角色。`attr_accessible :user`仅当他们使用默认角色时，添加到适当的模型才会有所帮助。如果他们正在使用该`:admin`角色，那么您需要添加`attr_accessible :user, as: :admin`. 我认为您的`User`模型没有属性，`:user`因此可能需要将其添加到其他地方。

如果我不得不猜测你做错了什么，我想你可能已经遵循了这里的安全指南：

[http://guides.rubyonrails.org/security.html](http://guides.rubyonrails.org/security.html)

在该指南中，他们建议将您的配置设置为默认将所有内容列入白名单。

```
config.active_record.whitelist_attributes = true 
```

如果您这样做并参与！没有使用 MassAssignment 支持编写，这可以解释您看到的错误。

抱歉，我无法确定地解释您的问题，但我希望它仍然对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T18:15:34.693

查看您![堆栈跟踪](../Images/66a7d8b8e9e0cab33c181a64927279f9.png)的问题在 topices_controller 中 - 因此可能意味着您需要添加`:user_id`到模型中`attr_accessible`。`Engage/Topic`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T03:38:00.807

我需要将以下行添加到参与/投票模型

```
attr_accessible :user 
```

现在它会说“主题成功创建”。

但是，我看不到列出的主题。但是，我相信我已经解决了这部分问题。我去的时候可以看到主题

```
http://localhost:3000/engage/topics/1 
```

# ruby-on-rails - RoR rspec 错误消息

> ID：14421253
> 
> 赞同：0
> 
> 时间：2013-01-20T02:52:27.707
> 
> 标签：ruby-on-rails, windows, rspec

Web 开发新手在这里。今天是我第一次接触 rspec，它给了我一些令人困惑的错误消息。一切正常，直到我关闭 RoR 命令行休息一下。当我回来时，它开始给我错误，如下图链接所示。

[http://i.imgur.com/EzUYUsB.jpg](http://i.imgur.com/EzUYUsB.jpg)

我重新安装了捆绑包和 rspec gem 无济于事。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T03:16:31.940

您得到的错误是来自 Ruby 的语法错误，而不是来自 Rspec。运行`ruby -c app/controllers/static_pages_controller.rb`以查看语法错误是什么（特别是，看起来您有一个额外的`end`，或者文件中缺少一个`end`。

# java - 在Java中遍历父类的ArrayList时使用Subclass方法

> ID：14421259
> 
> 赞同：2
> 
> 时间：2013-01-20T02:53:04.800
> 
> 标签：java, methods, arraylist, instanceof

在这个循环中，我将遍历一个 ArrayList 类型`Entity`，其中包含 Entity 类型的对象以及 Projectile 类型的对象，后者扩展了 Entity。如果对象是 Projectile 的实例，我希望执行以下代码。但是，该`getVelocity()`方法仅在子类 Projectile 中，而不在 Entity 中。所以我无法编译下面的代码。

我可以想办法解决这个问题，例如使用单独的 ArrayList。但是，关键是将所有实体保留在一个全局列表中，而不是将它们分开。这个问题有一个简单的解决方案，还是我需要改变我的代码结构？

```
for (Entity f: glo.getList()) {
           if (f instanceof Projectile)
              f.setX(f.getVelocity()/rawFPS);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T03:01:43.050

这似乎是一个循环，在游戏引擎的每一次滴答声中都会以某种方式更新您的实体。

在我看来，更清洁的解决方案是：

```
class Entity {
  ...
  public void update() {}
  ...
}

class Projectile extends Entity {
  ...
  @Override
  public void update() {
    setX(velocity/rawFPS);
  }
  ...
} 
```

我不知道你的架构，你可能需要也可能不需要传递`rawFPS`给`update()`. （正如@Naveen 非常正确地指出的那样，这不是很干净，所以如果可以的话，请避免使用它）。此外，如果您`Entity`是抽象的，本身没有任何功能，请考虑`interface`首先将其设为一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T02:55:06.603

甚至`if(f instanceof Projectile)`是真的，您的引用是`Entity`不知道您在子类中声明的类型，因此编译失败

`Entity`在类中提供具有相同签名的空白方法，而不是`override`在子类中提供并删除`instanceof`检查，如果它适合您的类模型

或者

使用铸造

```
if(f instanceof Projectile){
  ((Projectile)f).setX(..);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T02:55:15.603

您必须将其转换为 a`Projectile`才能编译。尝试这个：

```
for (Entity f: glo.getList()) {
           if (f instanceof Projectile)
              f.setX(((Projectile)f).getVelocity()/rawFPS);
        } 
```

发生这种情况是因为 java 总是检查对象声明为的类型；在你的情况下，这是`Entity`.

您可能想要添加一个`@SuppressWarnings("unchecked")`，以便您的 IDE 和阅读您的代码的任何人都知道未经检查的强制转换是故意的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T02:58:05.410

`Entity`应该真的是一个`interface`, 上面定义了一个`getVelocity()`方法。当然，您可以解决问题并进行投射，但问问自己，对于您正在构建的东西，正确的逻辑模型是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T03:01:30.263

认真的，伙计们？很烂的例子。每个 Java 指南都会告诉你这一点。

这里有一些问题：您正在循环一组实体并使用另一个数据项改变子集（子类实例）的内部状态：FPS。如果您在构建 Projectile 时没有 FPS，那么稍后让这个外部类注入它似乎有点随机。只在 FPS 上调用一个集合并随后更新位置可能会更干净。

外部类可能只需要 Projectiles。

# html - 如何确保背景水平延伸？

> ID：14421261
> 
> 赞同：0
> 
> 时间：2013-01-20T02:53:42.933
> 
> 标签：html, css, background

这是我的网站

[http://albuquerqueautomotiveservice.com/](http://albuquerqueautomotiveservice.com/)

但我在我的旧电脑上对其进行了编码，它的显示器是方形的，而不是宽屏的。

我刚刚注意到在我的笔记本电脑中页面的右侧是灰色的。

如何确保它仅水平拉伸？

```
 body {
        background:#333 url(bg.jpg) no-repeat;
        width: 100%;
        font-family:Arial;
        cursor: url(images/wrench.cur);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T02:54:33.867

这就是[`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)：

```
background-size: cover; 
```

* * *

如果您支持 IE < 9，则必须使用[他们的专有过滤器](http://msdn.microsoft.com/en-us/library/ms532920%28v=vs.85%29.aspx)：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/path/to/bg.jpg', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/path/to/bg.jpg', sizingMethod='scale')"; 
```

* * *

IE 的另一个选择是将图像作为`img`HTML 中的实际标签：

```
<img src="/path/to/bg.jpg" class="page-background" /> 
```

然后在你的 CSS 中使用这段代码：

```
.page-background {
    width: 100%;
    height: auto;
    z-index: -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T03:01:33.647

你为什么不把你的页面居中而不是拉伸呢？

HTML

```
<body>
<div id="wrap">

</div>
</body> 
```

CSS

```
 body 
 {
    background:#333 url(bg.jpg) no-repeat center top;
    font-family:Arial;
    cursor: url(images/wrench.cur);
 }

 #wrap
 { 
   width: 1250px; 
   margin: 0 auto; 
 } 
```

# c# - 将字符串值从一种形式传递到另一种形式

> ID：14421279
> 
> 赞同：0
> 
> 时间：2013-01-20T02:56:51.763
> 
> 标签：c#, .net, winforms

> **可能重复：**
> [在winforms之间传递变量](https://stackoverflow.com/questions/4247807/passing-variable-between-winforms)

我有两种形式，一种称为 Form1，另一种称为 TicTacToeMainMenu。

在 TicTacToeMainMenu 我创建了两个变量

```
string Player1;
string Player2; 
```

我已经为这两个变量分配了两个文本字段。

```
pvpPl1.Text = Player1;
pvpPl2.Text = Player2; 
```

我想从 TicTacToeMainMenu 中获取字符串值并以另一种形式使用它们，Form1 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T03:09:28.913

如果您从 TicTacToeMainMenu 窗体实例化 form1，则可以将变量传递给 Form1 的构造函数：

```
public string Player1 { get; set; }
public string Player2 { get; set; }
public Form1(string player1, string player2)
{

    InitializeComponent();

    this.Player1 = player1;
    this.Player2 = player2;

} 
```

然后调用它，您只需：

```
Form1 f = new Form1(Player1, Player2);
f.ShowDialog(); 
```

# javascript - 如何确定字符串是否是有效的 html4 tagName？

> ID：14421284
> 
> 赞同：1
> 
> 时间：2013-01-20T02:57:40.607
> 
> 标签：javascript, html, dom

给定一个字符串“div”或“abc”，有没有办法确定该字符串是否是有效的 html4 tagName？

尝试使用`document.createElement()`，但它对任何事情都很满意：

```
document.createElement('trash')
=> <trash></trash> 
```

不能使用`HTML<tag>Element`。例如

```
document.createElement('tbody')
=> HTMLTableSelectorElement 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T03:00:22.257

*最好*的方法是列出所有有效的 HTML4 元素并进行检查。这将为您提供 100% 的“有效 HTML4 元素”的正确结果。[从这里](http://www.w3.org/TR/html4/index/elements)：

```
var html4 = ["A","ABBR","ACRONYM","ADDRESS","APPLET","AREA","B","BASE","BASEFONT","BDO","BIG","BLOCKQUOTE","BODY","BR","BUTTON","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HEAD","HR","HTML","I","IFRAME","IMG","INPUT","INS","ISINDEX","KBD","LABEL","LEGEND","LI","LINK","MAP","MENU","META","NOFRAMES","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","P","PARAM","PRE","Q","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRIKE","STRONG","STYLE","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL","VAR"];

var valid = html4.indexOf(name.toUpperCase()) !== -1; 
```

如果您出于某种原因绝对不想这样做，或者实际上并不是指 HTML4，并且不担心 IE8 兼容性，那么您可以这样做：

```
var valid = !(document.createElement(name) instanceof HTMLUnknownElement); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-13T13:49:46.240

正在寻找解决方案，但更完整。下面的片段是围绕 Stack 和 Google 搜索的最终结果。它不像那里的 HTML4 数组检查那么简单，但也没有那么复杂。

方法很简单。调用它，将字符串作为参数传递，`true`如果它是有效的 HTML5 标签，将返回。到目前为止，它适用于我能想到的每个标签。

还有第二个参数，名为“allowObsolete”。顾名思义，它将允许过时的标签`applet`也返回 true，否则，[**过时的标签**](http://www.w3.org/TR/html5/obsolete.html#obsolete)会自动返回 false。

还有一件事！作为第二个参数传递`-1`以完全绕过过时的检查。过时检查是根据[W3C HTML5 标准](http://www.w3.org/TR/html5/)组成的数组执行的，该数组说明截至 2014 年 10 月 28 日哪些标签已过时。

一点额外的。只是添加了一点，如果您尝试传入 CSS 选择器/比较符号，它也会返回 false。基本上任何不是字母数字字符的东西都会导致它返回 false。如果您决定编辑，请记住，它不能仅限于 alpha，因为 tehre 是`h1`.

## 简单的片段

```
/** isValidHTMLTag(String, Mixed Var)
 * 
 *  @description Simple and effective way of checking whether an string is a valid HTML Tag Name.
 *
 *  @note Not yet tested on all Browsers. Use discreetly.
 *
 *  @example isValidHTMLTag('input');   //  returns `true`
 *  @example isValidHTMLTag('blink');   //  returns `false` because `blink` is obsolete
 *  @example isValidHTMLTag('blink', true); //  returns `true`
 *  @example isValidHTMLTag('blink', -1);   //  returns `false` in an HTML5 browser
 *  
 *  @param {String} tagName *Required | The string to check for validity.
 *  @param {Boolean|Integer} Determine whether or not to allow possible Obsolete Tag Names to return true. Set to `-1` to completely bypass this option. [undefined==false]
 *  @returns {Boolean} `true` if valide, otherwise `false`
 */
function isValidHTMLTag(tagName, allowObsolete) {   //  use `-1` as second parameter to completely bypass allowObsolete check
    var obsolete = ['acronym', 'applet', 'basefont', 'bgsound', 'big', 'blink', 'center', 'dir', 'font', 'frame', 'frameset', 'hgroup', 'isindex', 'listing', 'marquee', 'multicol', 'nextid', 'nobr', 'noembed', 'noframes', 'plaintext', 'spacer', 'strike', 'tt', 'xmp'];
    return tagName.match(/[^a-zA-Z0-9]/) ? !1 : -1 !== allowObsolete && -1 !== obsolete.indexOf(tagName) ? allowObsolete || !1 : "[object HTMLUnknownElement]" !== Object.prototype.toString.call(document.createElement(tagName));
} 
```

## 一个班轮！

```
function isValidHTMLTag(a,b){var c="acronym applet basefont bgsound big blink center dir font frame frameset hgroup isindex listing marquee multicol nextid nobr noembed noframes plaintext spacer strike tt xmp".split(" ");return a.match(/[^a-zA-Z0-9]/)?!1:-1!==b&&-1!==c.indexOf(a)?b||!1:"[object HTMLUnknownElement]"!==Object.prototype.toString.call(document.createElement(a))}; 
```

> **淘气提示** [*修改DOM！在下面使用*]

```
Object.defineProperty && !Element.prototype.hasOwnProperty("isValidTag") ? Object.defineProperty(Element.prototype, "isValidTag", {
        value: function(b) {
            if (this.tagName) {
                var c = "acronym applet basefont bgsound big blink center dir font frame frameset hgroup isindex listing marquee multicol nextid nobr noembed noframes plaintext spacer strike tt xmp".split(" "),
                    a = this.tagName;
                return a.match(/[^a-zA-Z0-9]/) ? !1 : -1 !== b && -1 !== c.indexOf(a.toLowerCase()) ? b || !1 : "[object HTMLUnknownElement]" !== Object.prototype.toString.call(document.createElement(a))
            }
            return !1
        }
    }) :
    Element.prototype.isValidTag = function(b) {
        if (this.tagName) {
            var c = "acronym applet basefont bgsound big blink center dir font frame frameset hgroup isindex listing marquee multicol nextid nobr noembed noframes plaintext spacer strike tt xmp".split(" "),
                a = this.tagName;
            return a.match(/[^a-zA-Z0-9]/) ? !1 : -1 !== b && -1 !== c.indexOf(a.toLowerCase()) ? b || !1 : "[object HTMLUnknownElement]" !== Object.prototype.toString.call(document.createElement(a))
        }
        return !1
    };

//  Use like:
var blinky = document.createElement('blink');
if (!blinky.isValidTag()) {
    var head = document.head || document.getElementsByTagName("head")[0],
        style = document.createElement("style");
    style.appendChild(document.createTextNode("@keyframes blink { from { opacity: 1; } to { opacity: 0; } }"));
    style.appendChild(document.createTextNode("@-webkit-keyframes blink { from { opacity: 1; } to { opacity: 0; } }"));
    style.appendChild(document.createTextNode("blink { -webkit-animation: blink 600ms infinite; animation: blink 600ms infinite; text-decoration: blink; }"));
    head.appendChild(style);
} 
```

然后你可以做类似这个片段的事情！

```
Object.defineProperty&&!Element.prototype.hasOwnProperty("isValidTag")?Object.defineProperty(Element.prototype,"isValidTag",{value:function(b){if(this.tagName){var c="acronym applet basefont bgsound big blink center dir font frame frameset hgroup isindex listing marquee multicol nextid nobr noembed noframes plaintext spacer strike tt xmp".split(" "),a=this.tagName;return a.match(/[^a-zA-Z0-9]/)?!1:-1!==b&&-1!==c.indexOf(a.toLowerCase())?b||!1:"[object HTMLUnknownElement]"!==Object.prototype.toString.call(document.createElement(a))}return!1}}):
Element.prototype.isValidTag=function(b){if(this.tagName){var c="acronym applet basefont bgsound big blink center dir font frame frameset hgroup isindex listing marquee multicol nextid nobr noembed noframes plaintext spacer strike tt xmp".split(" "),a=this.tagName;return a.match(/[^a-zA-Z0-9]/)?!1:-1!==b&&-1!==c.indexOf(a.toLowerCase())?b||!1:"[object HTMLUnknownElement]"!==Object.prototype.toString.call(document.createElement(a))}return!1};

$('body > *:not(hr)').each(function(i) {
  $(this).find('.tag-name').text(this.tagName);
  $(this).find('.is-not').html('is' + (this.isValidTag(i==5?-1:null) ? '' : ' <b>NOT</b>'));
});
```

```
/* Standard (Mozilla) */
@keyframes blink { from { opacity: 1; } to { opacity: 0; } }
/* Chrome & Safari */
@-webkit-keyframes blink { from { opacity: 1; } to { opacity: 0; } }
blink { -webkit-animation: blink 600ms infinite; animation: blink 600ms infinite; text-decoration: blink; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</div>
<hr />
<blink>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</blink>
<hr />
<p>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</p>
<center>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal <sub>but is still supported in most browsers. Thus use the bypass param "-1"</sub></center>
<hr />
<center>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</center>
<hr />
<article>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</article>
<hr />
<header>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</header>
<hr />
<a href="javascript:void 0">Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</a>
<hr />
<penguin>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</penguin>
<hr />
<pre>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</pre>
<hr />
<footer>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</footer>
<hr />
<bob>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</bob>
<hr />
<h9>Tag Name [<b><span class="tag-name"></span></b>] [<i><span class="is-not"></span></i>] legal</h9>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T03:02:39.963

一个相当简单的技术是定义你自己的一组有效的 HTML 元素

```
Array.prototype.contains = function(k) {
   return (this.indexOf(k) > -1;
}
var ValidTags = ['html', 'head', ....];
//Then compare
if(ValidTags.contains('trash')) {
   //Then its valid
} 
```

# c - 如何在 Windows 7 x64 中使用 cmd.exe 编译 C

> ID：14421286
> 
> 赞同：0
> 
> 时间：2013-01-20T02:58:16.537
> 
> 标签：c, windows, ide, cmd

> **可能重复：**
> [如何在 Windows 7 中编译 C 编程？](https://stackoverflow.com/questions/5691795/how-to-compile-c-programming-in-windows-7)

所以我一直在玩 Python 和 Ruby。我可以从 cmd.exe 运行 .py 和 .rb。在不久的将来，我可能会在 Win 7 上进行全新安装并将我的驱动器分区以使用 Ubuntu 进行双启动。无论如何，我试图用 C 做同样的事情，但我想不通。我对使用 Turbo C 之类的 IDE 进行编码不感兴趣。谁能指出我正确的方向？提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T03:08:08.930

命令行 C/C++ 编译

[演练：在命令行 (C++) 上编译本机 C++ 程序](http://msdn.microsoft.com/en-us/library/ms235639%28v=vs.110%29.aspx)。您需要安装[Visual Studio Express 2012 产品](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

[使用 MinGW GCC 编译](http://www.mingw.org/)

[使用 Cygwin GCC 编译](http://cygwin.com/packages/gcc-g++/)

C/C++ 解释器

[铛](http://clang.llvm.org/get_started.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T03:19:00.347

我的印象是你不会编译，你不会执行 c 脚本，看这里：

[http://bellard.org/tcc/](http://bellard.org/tcc/)

使用 tcc，您可以从命令行运行 c 脚本。

# opengl - 体素锥追踪定向光柔和阴影

> ID：14421290
> 
> 赞同：1
> 
> 时间：2013-01-20T02:59:15.550
> 
> 标签：opengl, shadow, voxel

我目前正在尝试实现锥形跟踪软阴影，如本文第 8.3.1 节[所述](http://maverick.inria.fr/Membres/Cyril.Crassin/thesis/CCrassinThesis_EN_Web.pdf)。

我在 3D 纹理中获得了分层 mip 映射体素结构，通过在片段着色器中绘制 Sponza 场景进行体素化，并将“体素片段”存储到 3D 纹理中。mip-mapping 在计算着色器中完成。

作者解释了如何为点光源和区域光源创建柔和的阴影，这很容易理解，但他没有解释 Sponza 场景使用的定向光源。

对于点光源，锥体是从点光源开始追踪的，当它穿过场景的每个部分时，它的半径会增加，在场景中被描述为“体积”。但是，定向灯没有特定的光源点，只有一个方向。我如何将这个概念转化为与定向灯一起使用？圆锥体必须是不同的形状，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:13:33.570

如果我太天真了，请原谅我，但也许你可以为场景计算一个边界球体，并考虑一个以相同半径穿过球体中心的单个圆柱体，根据光的方向定向。然后您继续使用点光源（或聚光灯），但保持半径不变（即，圆柱体而不是圆锥体）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-28T18:47:34.030

如果尚未修复，您可以尝试从查询点（所以一个锥形）行进，直到到达 3D 纹理的边缘。由于纹理可能具有较大的尺寸，您可以考虑使用可参数化的步长进行行进。要生成软阴影，请在查询点附近生成额外的随机样本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-04T16:41:45.113

在（无限）定向光的情况下，您希望将一个紧密的锥形跟踪到光并累积不透明度。如果不透明度达到 1.0，它将被完全阻挡。如果圆锥退出场景范围的 AABB，您还可以安全地终止圆锥跟踪并返回遮挡，该遮挡将用于确定有多少阴影落在圆锥的原点。

此处的锥形孔径将控制阴影的柔和程度。

# android - Android - 如何从命令行在模拟器上运行本地应用程序？

> ID：14421292
> 
> 赞同：1
> 
> 时间：2013-01-20T03:01:13.707
> 
> 标签：android, apk, avd, nook, nook-tablet

我正在尝试运行 NOOK 模拟器。这是一款来自 Barnes and Noble 的平板电脑。

这是我正在尝试的命令：

```
C:\Program Files (x86)\Android\android-sdk\add-ons\addon-nooksdk-nook-15\skins>emulator-arm -avd BNTV600 -skin NOOKcolor -skindir
"C:\Program Files (x86)\Android\android-sdk\add-ons\addon-nookcolor-barnes_and_noble_inc-8\skins 
```

我不确定我需要在哪个目录中才能识别该命令。我得到的错误是这样的：

```
'emulator-arm' is not recognized as an internal or external command,
operable program or batch file. 
```

另外，我如何告诉它使用哪个 .apk？我有多个 apk

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:44:54.233

```
$ adb shell am
usage: am [start|instrument]
       am start [-a <ACTION>] [-d <DATA_URI>] [-t <MIME_TYPE>]
                [-c <CATEGORY> [-c <CATEGORY>] ...]
                [-e <EXTRA_KEY> <EXTRA_VALUE> [-e <EXTRA_KEY> <EXTRA_VALUE> ...]
                [-n <COMPONENT>] [-D] [<URI>]
       ... 
```

资料来源：[仪器测试](http://www.kandroid.org/online-pdk/guide/instrumentation_testing.html)。

您还可以查看[ADB 的文档以](http://developer.android.com/tools/help/adb.html)了解各种选项。

在 StackOverflow 上查看这个[问题](https://stackoverflow.com/questions/4974568/how-do-i-launch-the-android-emulator-from-the-command-line)。

# php - PHP最近的字符串比较

> ID：14421303
> 
> 赞同：3
> 
> 时间：2013-01-20T03:02:45.370
> 
> 标签：php, string-comparison, similarity

> **可能重复：**
> [PHP 中的字符串相似性：用于长字符串的 levenshtein 类似函数](https://stackoverflow.com/questions/5092708/string-similarity-in-php-levenshtein-like-function-for-long-strings)

我有我的主题字符串

`$subj = "Director, My Company";`

以及要比较的多个字符串的列表：

`$str1 = "Foo bar";`
`$str2 = "Lorem Ipsum";`
`$str3 = "Director";`

我想在这里实现的是找到与`$subj`. 有可能做到吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-20T03:08:54.360

该`levenshtein()`功能将执行您的预期。Levenshtein 算法计算将某个字符串转换为另一个字符串所需的插入和替换操作的数量。结果称为`edit distance`. 距离可用于根据您的要求比较字符串。

此示例源自 PHP[`levenshtein()`](http://php.net/manual/en/function.levenshtein.php)函数的文档。

```
<?php

$input = 'Director, My Company';

// array of words to check against
$words  = array('Foo bar','Lorem Ispum','Director');

// no shortest distance found, yet
$shortest = -1;

// loop through words to find the closest
foreach ($words as $word) {

    // calculate the distance between the input word,
    // and the current word
    $lev = levenshtein($input, $word);

    // check for an exact match
    if ($lev == 0) {

        // closest word is this one (exact match)
        $closest = $word;
        $shortest = 0;

        // break out of the loop; we've found an exact match
        break;
    }

    // if this distance is less than the next found shortest
    // distance, OR if a next shortest word has not yet been found
    if ($lev <= $shortest || $shortest < 0) {
        // set the closest match, and shortest distance
        $closest  = $word;
        $shortest = $lev;
    }
}

echo "Input word: $input\n";
if ($shortest == 0) {
    echo "Exact match found: $closest\n";
} else {
    echo "Did you mean: $closest?\n";
} 
```

脚本输出是

```
Input word: Director, My Company
Did you mean: Director? 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T03:04:40.430

您可以使用[http://php.net/manual/en/function.levenshtein.php](http://php.net/manual/en/function.levenshtein.php)来确定两个字符串之间的距离。

```
$subj = "Director, My Company";
$str = array();
$str[] = "Foo bar";
$str[] = "Lorem Ipsum";
$str[] = "Director";

$minStr = "";
$minDis = PHP_INT_MAX;
for ($str as $curStr) {
  $dis = levenshtein($subj, $curStr);
  if ($dis < $minDis) {
    $minDis = $dis;
    $minStr = $curStr;
  }
}
echo($minStr); 
```

# list - 为什么在 Prolog 中构造真值列表时会得到错误的结果？

> ID：14421307
> 
> 赞同：2
> 
> 时间：2013-01-20T03:03:18.630
> 
> 标签：list, prolog

我正在尝试创建一个谓词，如果第三个列表由`T`和`F`值组成，则该谓词为真，这取决于第一个和第二个列表中相同索引的两个元素是否相等的事实。像这样的查询`truth_list(['abc','def'],['zui','def'],L).`应该给出`L=['F','T']`.

这是我的尝试：

```
truth_list([],[],_).
truth_list([H1|T1],[H2|T2],TL):-
    (H1==H2)->(H3='T');(H3='F'),
    Temp=TL,
    TL=[H3|Temp],
    truth_list(T1,T2,TL). 
```

如果有人能解释为什么这不能按预期工作，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T06:10:27.360

所以我们都在同一个页面上，当我运行查询时，我得到了这个结果：

```
L = ['F'|L]. 
```

所以首先想到的是您可能正在重用一个变量，实际上，以下子句看起来很可疑：

```
Temp=TL,
TL=[H3|Temp], 
```

Prolog 中的变量并不像其他语言那样真正“可赋值”。你真正能做的就是建立一个绑定，所以上面的代码就是这样说的：

```
TL=[H3|TL] 
```

这就是为什么我们的结果看起来像这样：L=['F'|L]。我稍微重写了正文以解决问题并使用以下代码结束：

```
truth_list([H1|T1],[H2|T2],[H3|TL]):-
    (H1=H2 -> H3='T' ; H3='F'),
    truth_list(T1,T2,TL). 
```

你需要在整个条件周围加上括号，否则你会得到奇怪的行为。从那里，我刚刚删除了不必要的`TL`绑定（它们无论如何都不能工作，因为 Prolog 中的变量不是可赋值的）。事实证明，一旦你解决了这些问题，你会发现另一个问题，那就是你会得到这个：

```
L = ['F', 'T'|_G297]. 
```

如果不明显，这是因为您的基本情况太模糊，应该看起来像这样：

```
truth_list([], [], []). 
```

所以最终修正后的版本是这样的：

```
truth_list([],[],[]).
truth_list([H1|T1],[H2|T2],[H3|TL]):-
    (H1=H2 -> H3='T' ; H3='F'),
    truth_list(T1,T2,TL). 
```

这通常是@false 出现并指出我们在使用具有不同实例化的谓词时遇到问题的地方，所以让我们现在检查一下并避免一些愤怒：

```
?- truth_list(['abc','def'],['zui','def'],['T','F']).
false.
?- truth_list(['abc','def'],['zui','def'],['F','T']).
true.
?- truth_list(['abc','def'],['zui','def'],['F','T','T']).
false.
?- truth_list(['abc','def'],['zui','def','def'],['F','T','T']).
false. 
```

这些看起来都很好，所以当所有的参数都被实例化时，看起来我们并不是在幻觉谎言。那挺好的。现在让我们检查部分实例化：

```
?- truth_list([X, 'def'], ['abc', Y], ['T', 'T']).
X = abc,
Y = def. 
```

酷，这工作。

```
?- truth_list([X, 'def'], ['abc', Y], ['F', 'T']).
false. 
```

嗯。好吧，看起来 Prolog 不知道为该`'F'`值幻觉其他一些绑定。不确定这是否是一个问题，但我没有看到明显的解决方案。这意味着以下可能不起作用：

```
?- truth_list(X, Y, ['T', 'T']).
X = Y, Y = [_G296, _G302]. 
```

令人惊讶，但它确实有效，分配给两个未知数的相同列表。凉爽的。我认为我们的状态很好。

**编辑**：让我们结合@false 的改进。然后我们得到以下信息：

```
truth_list([], [], []).
truth_list([H1|T1], [H2|T2], [H3|TL]) :-
  (H1 = H2, H3 = 'T' ; dif(H1,H2), H3 = 'F'),
  truth_list(T1, T2, TL). 
```

现在我们得到了想要的行为：

```
?- truth_list([X, 'def'], ['abc', Y], ['F', 'T']).
Y = def,
dif(X, abc) ; 
```

所以 Prolog 已经推断出 Y 是 'def'，并得出结论 X 至少不是 'abc'，所以这是一个改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T08:40:32.953

maplist/4 可以简化您的代码：

```
truth_list(A, B, C) :-
  maplist(truth_, A, B, C).
truth_(A, B, C) :-
  A == B -> C = 'T' ; C = 'F'. 
```

您还可以考虑增强您的代码以便（最终）重用。

代替任意常量 'T','F' 您可以使用*可调用*谓词如`true`and`false`或`1`来`0`获取可直接用于 CLP(FD) 的表达式

# android-listview - 在 ListView 中添加元素并刷新不起作用

> ID：14421314
> 
> 赞同：-1
> 
> 时间：2013-01-20T03:04:55.157
> 
> 标签：android-listview, android-arrayadapter, listviewitem

当我单击一个按钮时，我想在 ListView 中添加元素。我为此搜索太多，但无法解决问题。

如果你想要我不能把代码发给你，我到底想要什么。

```
package com.example.listrefreshdemo;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

public class MainActivity extends Activity {
private EditText editText;
private Button button;
private String[] myStringArray = null;
ArrayAdapter<String> adapter = null;
ListView listView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myStringArray = new String[] { "hello", "hi" };
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, myStringArray);
    listView = (ListView) findViewById(R.id.listView);
    listView.setAdapter(adapter);

    editText = (EditText) findViewById(R.id.editText);
    button = (Button) findViewById(R.id.button);
    button.setOnClickListener(buttonClickListener);

}

private OnClickListener buttonClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        String toAdd = editText.getText().toString().trim();
        if (toAdd.length() > 0) {
            editText.setText("");
            String[] tempArray = new String[myStringArray.length + 1];
            int i = 0;
            for (i = 0; i < myStringArray.length; i++)
                tempArray[i] = myStringArray[i];
            tempArray[i] = toAdd;
            myStringArray = tempArray;
            adapter.notifyDataSetChanged();
        }
        editText.setText("");
    }
};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:52:39.757

您可能想尝试使用 listView 的自定义适配器。[您可以在此处](https://github.com/asnehal/ListViewExample.git)找到带有自定义适配器的列表视图示例并更新列表视图。

# c - 在系统调用和命令提示符中调用“cd”的区别

> ID：14421316
> 
> 赞同：0
> 
> 时间：2013-01-20T03:05:26.800
> 
> 标签：c, linux

我正在使用 linux 命令提示符，我注意到在命令提示符中使用命令“cd”和在 C 程序中将该命令用作系统调用的参数时有所不同。

当我使用命令提示符时，目录会变为$home环境变量中的目录，但是如果我使用系统调用来调用它，那么目录不会改变吗？

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T03:08:37.137

该`cd`命令是一个 shell 内置命令——当它由 shell 脚本或在命令提示符处执行时，它直接由该 shell 解释，并更改 shell 进程的工作目录。

当您`cd`从`system()`调用中运行命令时，该命令将传递给 shell 子进程，并更改该进程的工作目录，该目录会立即退出。父进程的工作目录保持不变。

如果需要改变当前进程的工作目录，`chdir()`直接调用。请注意，您不能更改其他进程的工作目录（子进程独立于其父进程）。

# actionscript-2 - 在 Flash AS2 中检测碰撞并反射 MovieClip

> ID：14421317
> 
> 赞同：-1
> 
> 时间：2013-01-20T03:05:53.243
> 
> 标签：actionscript-2, flash-cs6

我正在开发一个涉及两名玩家的小游戏。有两个宇宙飞船（MovieClips）和一个球。我面临的问题是我想在两艘宇宙飞船发生碰撞时立即反射它们（与飞船与球碰撞相同）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:43:24.687

这个问题太笼统了，您可以使用现有的物理引擎（其中很多）或自己制作。对于简单的命中或不命中方法，有一个本机函数调用 hitTest。不过，它不会帮助您计算如何反弹

这是一个帮助我了解过去如何进行简单碰撞检测的教程[http://www.metanetsoftware.com/technique/tutorialA.html](http://www.metanetsoftware.com/technique/tutorialA.html)

# php - 如何使用命名空间将 Wordpress 集成到 Web 应用程序中？

> ID：14421324
> 
> 赞同：1
> 
> 时间：2013-01-20T03:07:32.490
> 
> 标签：php, wordpress, namespaces

我正在将 Wordpress 集成到现有的网络应用程序中。为了检索帖子，我包含了导致函数冲突的 wp-load.php。这是网络应用程序的结构：

```
<?php
/* web app code */

include('wordpress/wp-load.php'); //collision happens here

/* web app code */
?> 
```

如何使用命名空间来避免函数冲突？

# javascript - 使用 xml 文件填充选择选项文件夹

> ID：14421326
> 
> 赞同：0
> 
> 时间：2013-01-20T03:07:50.693
> 
> 标签：javascript, jquery, html, xml

这是我选择 ID 的 HTML 代码：

```
<select class="dropdown-toggle" id="combo"></select> 
```

我有这个 HTML 文件，我需要使用位于名为 xml 的根文件夹中的 XML 文件填充选项。我在标题中导入了 JQuery。我已经尝试了很多例子，但我无法让它工作。XML 文件位于 /XML 文件夹中。

提前致谢！

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
<script type="text/javascript">
  $(function(){
  $.ajax({
  url: '/xml',
  success: function(d){
    $.each(d.split(/[\r\n]+/),function(i,e){

      $('<option>',{ value: e }).text(e),'</option>'.appendTo('#combo');
       });
      }
  });
</script> 
```

我试过这段代码，但它不工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:35:08.787

简短的回答：您必须使用一些服务器端代码来生成列表。

* * *

这是 PHP 中的一个示例：

```
header('Content-type: application/json');

$folder = opendir('path/to/xml');
$list = array();

while ( $file_name = readdir( $folder ) ) {
    // Only get the XML files
    if ( pathinfo($file_name, PATHINFO_EXTENSION) !== 'xml' ) continue;

    $list[] = pathinfo($file_name, PATHINFO_FILENAME);
}

closedir( $folder );

echo json_encode( $list ); 
```

* * *

或者，正如@charlietfl 在上面的评论中指出的那样，您可以使用[`glob`](http://php.net/manual/en/function.glob.php)：

```
header('Content-type: application/json');

$list = array();

foreach(glob('path/to/xml/*.xml') as $file_name) {  
    $list[] = pathinfo($file_name, PATHINFO_FILENAME);
}

echo json_encode( $list ); 
```

* * *

一旦在服务器上设置了该脚本，就可以在 JavaScript 中循环遍历数组：

```
$.ajax({
    url: 'path/to/list_xml_files.php',
    success: function (data) {

        var $select = $('#combo');

        $.each(data, function(i, v) {
            $('<option>', {
                value: v,
                text: v
            }).appendTo( $select );
        });
    }
}); 
```

`append`您可以通过一次完成所有操作来进一步优化这一点，但这是另一天的讨论......

# ruby-on-rails-3 - 为什么我的 rspec 测试未通过用户确认？

> ID：14421334
> 
> 赞同：1
> 
> 时间：2013-01-20T03:08:47.370
> 
> 标签：ruby-on-rails-3, authentication, rspec

这是失败的测试：

```
context "when password does not match confirmation" do
  before { build(:user, :password_confirmation => 'mismatch') }
  it { should_not be_valid }
end 
```

我正在`build`为这个测试套件使用 Factory Girl 的方法。

我的用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  validates :password_confirmation, presence: true
  validates :password, presence: true, length: { minimum: 5 }
end 
```

更新：使用 has_secure_password 时，您不需要用 :confirmation => true 标记 :password 字段。已处理：请参阅源代码：[https ://github.com/rails/rails/blob/master/activemodel/lib/active_model/secure_password.rb](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/secure_password.rb)

验证工作正常 - 当我尝试在控制台上创建新用户时，我收到了正确的错误消息。那么为什么测试失败了呢？错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T03:14:46.013

验证不能正常工作，您没有验证`password_confirmation`与`password`. 有关详细信息，请参阅[http://guides.rubyonrails.org/active_record_validations_callbacks.html#confirmation](http://guides.rubyonrails.org/active_record_validations_callbacks.html#confirmation)。

此外，您需要确保您实际上正在测试您想要测试的内容 - 这些测试的主题是`build(:user)`何时需要将`build(:user, password_confirmation: 'mismatch')`. `before`将上面代码中的更改为 a `subject`，以正确设置测试主题。

# r - 如何在 R 中按组创建订单统计信息？

> ID：14421338
> 
> 赞同：4
> 
> 时间：2013-01-20T03:09:43.467
> 
> 标签：r

如何在 R 中按组计算订单统计信息。我想根据列聚合结果，然后每组只返回 1 行。根据某种顺序，该行应该是组的第 n 个元素。理想情况下，我只想使用基本功能。

```
x <- data.frame(Group=c("A","A", "A", "C", "C"), 
                Name=c("v", "u", "w", "x", "y"), 
                Quantity=c(3,3,4,2,0))
> x
  Group Name Quantity
1     A    v        3
2     A    u        3
3     A    w        4
4     C    x        2
5     C    y        0 
```

我想根据数量和名称的顺序获得第 n 高。对于 N=2，这是

```
 Group Name Quantity
1     A    u        3
5     C    y        0

For N=1
  Group Name Quantity
3     A    w        4
4     C    x        2 
```

我尝试了以下操作，但收到一条信息不完整的错误消息。

```
 aggregate.data.frame(x, list(x$Group), function(y){ max(y[,'Quantity'])})
 Error in `[.default`(y, , "Quantity") (from #1) : incorrect number of dimensions" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T03:45:25.900

```
x <- 
    data.frame(
        Group = c("A","A", "A", "C", "C", "A", "A") , 
        Name = c("v", "u", "w", "x", "y" ,"v", "u") , 
        Quantity = c(3,3,4,2,0,4,1)
    )

# sort your data to start..
# note that Quantity vs. Group and Name
# are sorted in different directions,
# so the -as.numeric() flips them
x <- 
    x[ 
        order( 
            -as.numeric( x$Group ) , 
            x$Quantity , 
            -as.numeric( x$Name ) , 
            decreasing = TRUE 
        ) , 
    ]
# once your data frame is sorted the way you want your Ns to occur, the rest is easy

# rank your data..  
# just create the numerical order, 
# but within each group..
# (or you could add those ranks directly to the data frame if you like)
ranks <- 
    unlist( 
        tapply( 
            order( x$Group ) , 
            as.numeric( x$Group ) , 
            order 
        ) 
    )

# N = 1
x[ ranks == 1 , ]

# N = 2
x[ ranks == 2 , ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T03:42:30.530

一些聚合合并魔法：

```
f <- function(x, N) {
  sel <- function(x) {                                   # Choose the N-th highest value from the set, or lowest element if there < N unique elements.  Is there a built-in for this? 
    z <- unique(x)                                       # This assums that you wan the N-th highest unique value.  Simply don't filter by unique if not.
    z[order(z, decreasing=TRUE)][min(N, length(z))]
  }

  xNq <- aggregate(Quantity ~ Group, data=x,   sel)      # Choose the N-th highest quantity within each "Group"
  xNm <- merge(x, xNq)                                   # Add the matching "Name" values
  x <- aggregate(Name ~ Quantity + Group, data=xNm, sel) # Choose the N-th highest Name in each group
  x[c('Group', 'Name', 'Quantity')]                      # Put into original order
}

> f(x, 2)
##   Group Name Quantity
## 1     A    u        3
## 2     C    y        0

> f(x, 1)
##   Group Name Quantity
## 1     A    w        4
## 2     C    x        2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T06:16:06.623

```
# define ordering function, increasing on Quantity, decreasing on Name
in.order <- function(group) with(group, group[order(Quantity, -rank(Name)), ])

# set desired rank for each Group
N <- 2

# get Nth row by Group, according to in.order
group.rows <- by(x, x$Group, function(group) head(tail(in.order(group), N), 1))

# collapse rows into data.frame
do.call(rbind, group.rows)

#   Group Name Quantity
# A     A    u        3
# C     C    y        0 
```

您看到该错误的原因`aggregate.data.frame`是因为此函数`FUN`根据`by`参数应用于每一列，而不是完整的每个子集`data.frame`（这就是`by`函数的用途，如上所示）。使用时`aggregate`，您提供的任何内容都`FUN`应该接受列，而不是`data.frame`s。在您的示例中，您尝试`y`像 a 那样索引向量`data.frame`，因此出现尺寸错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T22:47:20.527

我和

```
do.call(rbind, by(x, x$Group, function(x)
      x[order(-x$Quantity, x$Name),][1,])) 
```

按照别人的建议。我发现它比其他发布的解决方案更适合我的思维过程（我很欣赏）。

# xcode - 如何在 xcode 调试器中查看局部变量/对象内容

> ID：14421339
> 
> 赞同：1
> 
> 时间：2013-01-20T03:09:56.897
> 
> 标签：xcode

我在 xcode 中有以下代码，想检查“link”的内容，它是在 for 循环中声明的本地对象“ReaderDocumentLink *link”，我在“result = [self annotationLinkTarget:link”行设置断点。字典];” 如下图：

```
-(id)singleTap:(UITapGestureRecognizer *)recognizer
{
    id result = nil; // Tap result object

    if (recognizer.state == UIGestureRecognizerStateRecognized)
    {
        if (_links.count > 0) // Process the single tap
        {
            CGPoint point = [recognizer locationInView:self];

            for (ReaderDocumentLink *link in _links) // Enumerate links
            {
                if (CGRectContainsPoint(link.rect, point) == true) // Found it
                {
                    result = [self annotationLinkTarget:link.dictionary]; 
                    break;
                }
            }
        }
    }

    return result;
} 
```

我尝试了“po link”，但它不起作用。（它报告错误如下：

错误：“链接”的类型未知；将其转换为其声明的类型以使用它

error: 1 解析表达式错误

那么我该怎么做才能打印出“链接”对象中的详细信息呢？包括 link.dictionary 的内容。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:29:13.130

Xcode 添加了日志断点的概念。这就是OP所要求的。而且他遇到了最大的停止点之一： po 必须在具有描述方法的类型上放松。出于这个原因，我不经常使用这些：在您想要检查的代码中仍有太多的整数类型。

您可以将项目变成断点内的对象，但这也很麻烦，例如 [NSNumber numberWithFloat:5.5] 然后 po 。

链接应该在这里工作。也许您正试图在超出范围的线路上执行 po ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T03:25:29.787

无论`NSLog`是每个属性`ReaderDocumentLink`

或`description`覆盖 mdthod`ReaderDocumentLink`并使用`NSLog(@"%@",link):`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T03:41:51.200

我同意 Rob 的观点，它应该在这里工作。

但是我已经看到“po”发生了奇怪的事情，尤其是“点语法”。
因此，如果您尝试`po link.dictionary`但失败了，我建议您`po [link dictionary];`使用或不使用“;” 我不认为这有什么不同。（我不知道为什么有时点语法可以完美地工作而其他时候却不能）

此外，如果我在“po”中打错字并收到错误消息，无论我在失败后尝试“po”什么，我都见过很多次，所以添加到继续（或杀死我没有的应用程序）回忆）并再次转到那个断点。

当然，请确保您`link`在范围内执行“po”。

如果没有任何效果，请尝试关闭 Xcode，有时它是解决方案。

# opengl - 使用着色器绘制的速度

> ID：14421341
> 
> 赞同：0
> 
> 时间：2013-01-20T03:10:22.453
> 
> 标签：opengl

当我使用：

```
glUseProgramObjectARB(program);
  DrawCube();
glUseProgramObjectARB(0); 
```

其中函数 DrawCube() 是：

```
DrawCube(){
  glBegin(GL_QUADS);
    glVertex3f(... data ...);
    glVertex3f(... data ...);
    glVertex3f(... data ...);
    glVertex3f(... data ...);
  glEnd();
} 
```

我的问题是：这个功能是在显卡上执行的吗？如果我使用直接模式 [glBegin() - glEnd()] 还是使用 VBO 会更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:58:32.197

尽管[此](https://stackoverflow.com/questions/430555/when-are-vbos-faster-than-simple-opengl-primitives-glbegin)链接中的测试表明使用固定模式与可编程模式没有明显的性能差异，但我必须说**我没有“购买”它**。测试人员没有显示他的基准源代码。我怀疑他的可编程测试是不够“干净”。我只能从我的个人经验中说。我有一个用旧（GL 2.1）编写的旧引擎，然后我们将其重写为 GL4.2 完全可编程的管道。我们很清楚，至少 80% 的性能boost 并且在某些模块中，例如屏幕外 FBO 渲染，我们获得了 300% 的性能提升。而且我什至没有触及效果和后期处理的东西，其中大部分实际上是缓慢的，或者如果不使用可编程管道是不可能的。

另请查看[此](https://stackoverflow.com/questions/6733934/what-does-immediate-mode-mean-in-opengl)链接，该链接解释了固定与可编程管道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T12:09:21.827

着色器的使用和用于发送几何图形的方法是正交的，即一件事与另一件事无关。

即时模式的最大问题是，它会占用你的 CPU，因为所有这些小调用都会通过大量代码上下波动。第二个问题是，即时模式和客户端顶点阵列都受到系统总线带宽的限制。用数字表示：具有 16 个通道的 PCI-Express Gen 3 可以传输大约 15GiB/s（在实际应用中它更像是 10GiB/s）。GPU 内存连接的带宽至少是其 10 倍。通过使用 VBO^1，您可以让 GPU 通过仅发送几个字节（无论 glDrawElements 命令转换成什么）来绘制大量几何图形。

着色器 OTOH 是在 GPU 上执行的小程序，可将几何数据转换为屏幕位置并用像素值填充它们。着色器不关心数据以哪种方式发送到 GPU。同样“不使用”着色器并不意味着事情不会在 GPU 上发生。一方面，有原位编写的默认着色器以匹配配置的固定功能状态。即使不是这样，是什么让你认为不使用着色器会使 GPU 上的东西消失？

* * *

[1] 顶点数组对象只是抽象状态持有者，收集一组 VBO 以及它们绑定到哪些顶点属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-31T15:05:14.910

现在，大多数图形管道中都删除了 OpenGL 固定管道。一切都是用着色器完成的。为了保持兼容性，GL 驱动程序会生成一个模拟固定功能的着色器。

如果你想获得性能提升，你必须使用带有着色器的 VAO、VBO 并执行你自己的数学。有很多数学库与新版本的 GLSL 实现兼容。示例： http: [//glm.g-truc.net/](http://glm.g-truc.net/)

VBO 用于将原始数据从计算机内存复制到 GPU 内存。VAO 是 VBO 的集合，可以使用一个 VAO 调用来实现。

同样在着色器的实现过程中，您必须检查所使用的着色器版本，因为许多功能在更高版本的 GLSL 实现中已被弃用。参考资料：[http ://en.wikipedia.org/wiki/GLSL](http://en.wikipedia.org/wiki/GLSL)

# actionscript-3 - 如何使用参数操作脚本 3 调用函数

> ID：14421344
> 
> 赞同：0
> 
> 时间：2013-01-20T03:10:54.437
> 
> 标签：actionscript-3, flash, actionscript

我试图制作一个将在多个项目中使用的功能，并根据输入的参数保存、加载或显示高分表。我目前的代码是

```
function test(action:String):void {
    if (action == "loadHS") {
        trace("loading")
    } else if (action == "save") {
        trace("saveinghs")
    } else if (action == null) {
        trace("please provide an operation for high score table")
    } else {
        trace(" the action" + action + "is not a valid action");
    }
}

test(loadHS); 
```

女巫创建以下编译器错误。

```
Scene 1, Layer 'Layer 1', Frame 1, Line 14  1120: Access of undefined property loadHS. 
```

我究竟做错了什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:02:49.490

您需要使用引号来[定义字符串文字](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7ef8.html)。

```
test("loadHS"); 
```

如果没有引号，ActionScript 期望找到`variable`您创建的名为`loadHS`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T03:14:12.843

变量**loadHS**尚未*定义*。这意味着它是*声明*的，但你需要给它一个值来*定义*它。

`var loadHS:String = "loadHS";`

# javascript - 是否可以使用 Javascript 访问 XML 元素的 css 样式？

> ID：14421345
> 
> 赞同：0
> 
> 时间：2013-01-20T03:10:56.260
> 
> 标签：javascript, css, dom

> **可能重复：**
> [在浏览器中呈现后使用 javascript 和 css 设置 XML（不是 HTML）样式](https://stackoverflow.com/questions/1904378/styling-xml-not-html-with-javascript-css-after-rendering-in-browser)

是否可以访问正在浏览器中显示的 XML 文档的 CSS 样式属性？

该元素可以使用，例如，访问`.getElementsByTagName()`。并且浏览器正确地应用了 CSS 样式。调试面板（FF 中的 Firebug，Chrome 中的开发工具）报告样式。所以数据就在某个地方。

但所有这些都返回 null 或 undefined：

```
document.getElementsByTagName("pb")[1].style
document.getElementsByTagName("pb")[1].css
document.getElementsByTagName("pb")[1].getAttribute('style')
document.getElementsByTagName("pb")[1].getAttribute('css') 
```

DOM 不公开样式吗？

**更新：**未决问题询问有关*更改*样式的问题。这个仅询问有关访问样式的问题。

如果实际上只需要只读访问权限，请使用`.getComputedStyle()`.

# python - python 正则表达式模式在字符串中不匹配，甚至在测试人员中匹配（重试，正则表达式教练，http://ksamuel.pythonanywhere.com）

> ID：14421347
> 
> 赞同：1
> 
> 时间：2013-01-20T03:11:14.170
> 
> 标签：python, regex, pattern-matching

我已经为我的目标构建了一个正则表达式模式：一个包含从 CSV 文件中获取的数据的字符串。我是一个几乎完全是编程新手，但我真的被困在这一步，我努力解决这个问题，因为正则表达式是（我认为......）我的问题的最佳选择，是从 CSV 文件中搜索数据，它们之间存在一些差异，但具有遵循正式协议的模式（MIAME 文件，来自生物信息学领域）。这是我的代码

```
import re
    ficheiro=open(raw_input('write the name of the file (formato CSV):'), 'r')
    lista_file=ficheiro.readlines()
    str_file=str(lista_file)
    list_spr=[]
    value_spr=[]
    for a in str_file:
        regex_spr = re.search(r"(spr[0-9]{4})[^\t.]*\t([0-9.]+)", a, re.I|re.M)
        print regex_spr.group()
        list_spr +=regex_spr.group(1)
        value_spr +=regex_spr.group(2) 
```

但结果总是带有`'NoneType'`，比如

```
Traceback (most recent call last):
  File "C:\EDPython27\test\put_words_in_dict.py", line 112, in <module>
    print regex_spr.group()
AttributeError: 'NoneType' object has no attribute 'group' 
```

接下来是我用来测试模式的一些 str_file 范围：

```
('Reporter Identifier\tVALUE\n', 'spr0320060100000320\t4.784064198\n', 'spr0963060100000963\t3.646246197\n', 'spr1586060100001584\t5.755770215\n', 'spr1102060100001101\t5.794439261\n', 'spr1727060100001725\t6.452100774\n', 'spr0552060100000552\t6.816527711\n', 'spr0807060100000807\t3.185267941\n', 'spr0322060100000322\t5.889496662\n', 'spr0971060100000971\t3.112604228\n', 'spr0490060100000490\t6.608164616\n', 'spr0471060100000471\t6.807244139\n', 'spr0321060100000321\t5.331036948\n', 'spr1070060100001069\t6.408937689\n', 'spr1585060100001583\t6.157044216\n', 'spr1189060100001188\t3.481847857\n', 'spr1191060100001190\t3.523784616\n', 'spr1081060100001080\t6.708517655\n', 'spr1071060100001070\t7.092586967\n', 'spr1101060100001100\t6.294650154\n', 'spr0561060100000561\t7.52495517\n', 'spr0802060100000802\t8.299020685\n', 'spr1195060100001194\t6.143485258\n', 'spr0470060100000470\t5.869271803\n', 'spr1944060100001941\t7.060765363\n', 'spr0968060100000968\t6.276636704\n', 'spr1072060100001071\t7.267895537\n', 'spr0972060100000972\t5.535911422\n', 'spr1821060100001819\t7.660640949\n', 'spr0316060100000316\t6.399083059\n', 'spr0129060100000129\t6.693897057\n', 'spr0966060100000966\t6.208969299\n', 'spr0323060100000323\t6.230187159\n', 'spr1466060100001465\t7.609506586\n', 'spr0964060100000964\t6.286528191\n', 'spr1665060100001663\t5.597969101\n', 'spr0969060100000969\t5.122425278\n', 'spr1394060100001393\t7.310099682\n', 'spr0683060100000683\t7.397780719\n', 'spr1649060100001647\t6.121430945\n', 'spr0536060100000536\t7.936838283\n', 'spr1020060100001020\t7.339227818\n', 'spr0682060100000682\t7.435907739\n', 'spr0606060100000606\t6.251491879\n', 'spr0491060100000491\t5.400560984\n', 'spr0939060100000939\t6.928170725\n', 'spr1492060100001491\t7.451461913\n', 'spr0965060100000965\t5.610110186\n', 'spr1188060100001187\t3.384989187\n', 'spr1296060100001295\t5.927021756\n') 
```

我提前感谢所有顾问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:24:19.103

从[`docs`](http://docs.python.org/2/library/re.html#re.search)开始`re.search()`：

> 扫描字符串以查找正则表达式模式产生匹配的位置，并返回相应的 MatchObject 实例。如果字符串中没有位置与模式匹配，则返回**None**

因此，这里的解决方法是检查是否`regex_spr` 存在`None`。

```
for a in str_file:
    regex_spr = re.search(r"(spr[0-9]{4})[^\t.]*\t([0-9.]+)", a, re.I|re.M)
    if regex_spr is not None:
        print regex_spr.group()
        list_spr +=regex_spr.group(1)
        value_spr +=regex_spr.group(2)
    else:
         #do something else 
```

# java - 禁用石英记录

> ID：14421353
> 
> 赞同：10
> 
> 时间：2013-01-20T03:13:58.947
> 
> 标签：java, quartz-scheduler

如何禁用 Quartz 日志记录？Quartz 在我的控制台上打印 INFO 语句。我尝试使用 log4j.properties 文件中的以下语句禁用它

```
log4j.logger.org.quartz=ALL, CONSOLE 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T15:29:26.860

[可能与在 Java 中禁用 Log4J 输出](https://stackoverflow.com/questions/571960/disabling-log4j-output-in-java)重复。

试试这个：

```
 log4j.logger.org.quartz=OFF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-15T16:34:23.320

将此添加到我的 log4j.xml 文件中有效！

```
 <logger name="org.quartz" additivity="false">
     <level value="ERROR"/>
 </logger> 
```

# php - php-nuke 日期显示在新闻的主要页脚

> ID：14421361
> 
> 赞同：0
> 
> 时间：2013-01-20T03:16:06.473
> 
> 标签：php, footer

我无法弄清楚如何在新闻的主要页脚上添加“发布日期”。每当我想检查帖子的日期时，我都必须单击“更多”图标。我需要将它放在主页脚上。

猜猜我找到了相关代码在哪里。它们在 theme.php 中：

主要页脚：

```
 <div class="NewsFooter">
    <div class="foot-r">
    <?=$MoreLinkRight?>
    </div>
    <div class="foot-l">
    <?=$MoreLinkLeft?>
    </div>
    <div class="foot-m">

      <div class="Author">
        <?=_AUTHOR?>
        :
        <?=$aid?>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <?=_VISIT?>
        :
        <?=$counter?>
      </div> 
```

子页脚（这是一个条件）：

```
<?php
}

function themearticle($aid, $informant, $datetime, $title, $bodytext, $hometext, $topics, $topicname_link, $topicimage_link, $topictext_link, $printpage, $notes, $counter, $score, $ratings, $sid, $topic_link)
{
    global $admin, $tipath;
    $ThemeSel = get_theme();
    theme_lang();
    if(file_exists("themes/$ThemeSel/images/topics/$topicimage_link")){
    $t_image = "themes/$ThemeSel/images/topics/$topicimage_link";
    }else{
    $t_image = "$tipath$topicimage_link";
    }
    $posted = ""._POSTEDON." $datetime "._BY." "; 
    $posted .= get_author($aid);
    $notes = str_replace(" ","_",$notes);
    $notes = explode(":",$notes);
    foreach($notes as $tag){
        $tags .= "<i><a href=\"modules.php?name=News&file=tags&tags=$tag\">".str_replace("_"," ",$tag)."</a></i> ";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:40:37.207

哇……我​​成功了……

我刚刚添加

```
> <?=$datetime?> 
```

在下面

```
> <?=_AUTHOR?> 
```

和baAm。我不知道这个想法是从哪里来的，但它正在发挥作用，这才是最重要的。不管怎么说，还是要谢谢你...

# c - C 使用 strdup() 等从文件中读取/打印单词

> ID：14421365
> 
> 赞同：1
> 
> 时间：2013-01-20T03:16:30.680
> 
> 标签：c, segmentation-fault

在这里的 C 初学者，我得到了一个家庭作业，我们将使用 gedit 设计一个程序来从命令行读取文件名并设计一个 getNextWord 方法。我们将简单地每次打开每个文件并返回单词，忽略除字母数字字符之外的所有内容（并将大写字母转换为小写字母）。我挂断的事情是我的导师给了我们 strdup() 函数来帮助我们以及 isspace、alnum 等。无论如何，在这个网站上查找 strdup() 以及 C 基础知识和网站和其他人一定有一些我不理解的东西。我的程序编译（我使用 gcc -Wall -pedantic -std=c99 words.c -o words）并且它编译时只是警告 strdup() 被隐式使用。在同一目录中运行带有几个文本文件的程序，它会打印 gobbly gook，就好像它超出了堆的边界，然后给出了分段错误（核心转储）。我想我也给了它正确的检查，例如在返回指针的 strdup 之前将 \0 放在字符数组的末尾等。这是我的代码；我不指望任何人为我做我的硬件，也许观察会有所帮助，因为我已经研究了一整天并且找不到问题。感谢您阅读本文（它没有显示，但我包括了 stdio、stdlib.h、string.h、ctype.h 也许观察会有所帮助，因为我已经研究了一整天并且找不到问题。感谢您阅读本文（它没有显示，但我包括了 stdio、stdlib.h、string.h、ctype.h 也许观察会有所帮助，因为我已经研究了一整天并且找不到问题。感谢您阅读本文（它没有显示，但我包括了 stdio、stdlib.h、string.h、ctype.h

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#define MAX_WORD_SIZE 256

char* getNextWord(FILE* fd)
{

    int index = 0;
    int c;

    char str[MAX_WORD_SIZE];

    while((c = fgetc(fd)) != EOF){

        c = fgetc(fd);

        if (isspace(c)){
            str[index] = '\0';
            return (char*) strdup(str);
        }

        if (((index+1) != (MAX_WORD_SIZE-1)) && (isalnum(c))){
            c = tolower(c);
            str[index] = c;
            index++;
        }
        else {
            index++;
            str[index] = '\0';
            return (char*) strdup(str);
        }

    }

    return NULL;
}

int main(int argc, char* argv[])
{
    char** current = argv;
    char* heapedString = NULL;

    while (*current)
    {
        char* filename = *current;
        FILE* fd = fopen(filename, "r");
        if (fd == NULL)
        {
            fprintf(stderr,"can't read the file\n");
            exit(-1);
        }

        while ((heapedString = getNextWord(fd)) != NULL)
        {
            heapedString = getNextWord(fd);
            printf("%s\n", heapedString);
            free(heapedString);         
        }   
        fclose(fd);
        current++;  

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T03:27:42.073

也许是因为你正在丢弃所有其他字符和单词。在这两种情况下您都有相同的错误：

```
while((c = fgetc(fd)) != EOF){

    c = fgetc(fd);

    ....
} 
```

您应该在每个循环中调用一次 fgetc（或 getNextWord）。你应该这样做：

```
while((c = fgetc(fd)) != EOF){
    ....
} 
```

或这个：

```
while(1){
    c = fgetc(fd);
    if (c == EOF) break;
    ....
} 
```

但不是两者的结合

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T03:27:51.997

这只是一种预感，但我相信以下两行是导致错误的原因。

```
while((c = fgetc(fd)) != EOF){
c = fgetc(fd); 
```

每次使用时，内部文件位置指示器都会前进到下一个字符。所以它在调用while循环时被推进。这可能会弄乱您想要的结果。

查看此处找到的代码，并注意使用了 do while。祝你好运！
[http://www.cplusplus.com/reference/cstdio/fgetc/](http://www.cplusplus.com/reference/cstdio/fgetc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T03:25:42.453

您在每次迭代中调用 fgetc 两次 - 偶尔 () 条件和之后。调用 getNextWord 时也会犯同样的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T09:16:44.703

至于`strdup`部分问题的隐式声明：`strdup`像许多其他常用函数一样，不是C99标准库的一部分。如果您查看`man strdup`并检查“glibc 的功能测试宏要求”部分，您会看到`#define`在包含该库之前您必须要做的事情。例如：

```
#define _POSIX_C_SOURCE 200809L
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    const char *foo = "foo";
    char *bar = strdup(foo);
    puts(bar);
    free(bar);
} 
```

如果您想使用 POSIX 功能并同时使用 -std=c99 选项以尽可能保持与 ISO C99 兼容，您会遇到这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T03:34:27.523

小问题，但你为什么要使用

```
if (((index+1) != (MAX_WORD_SIZE-1)) && (isalnum(c))) 
```

作为你的支票？我认为从索引中删除 +1 就足够了。对于我正在使用的此作业的代码

```
if ( isalnum( c ) && ( j <= ( MAX_WORD_SIZE - 1 ) ) ) 
```

并且它完全按照作业 AFAICT 的要求工作（显然我有 j 作为我的“索引”并且顺序无关紧要）

您需要在 main 中添加一个检查以查看 heapedString[0] == '\0' 是否也是如此，否则您将打印出很多空行。虽然这可能仍然可以满足任务，但最好不要将它们打印出来。

# php - imagemagick 在 /usr/bin 中执行，但新版本在 /usr/local/bin - php exec 路径

> ID：14421369
> 
> 赞同：0
> 
> 时间：2013-01-20T03:17:07.380
> 
> 标签：php, linux, path, centos, exec

似乎我遇到的问题是 imagemagick 是从 /usr/bin 执行的，其中我的服务器上安装了旧版本的 imagemagick，我不知道如何使 php exec() 看起来正确的方向是 /usr /local/bin - 这是转换的实际位置，如果我尝试使用 exec /usr/local/bin/convert 的完整路径，那么它不起作用，以 127 退出

我在 cent os 6.3 上使用 php 5.3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:24:41.783

你试过这样做吗？

```
exec('/usr/local/bin/convert ... 
```

# asp.net-mvc-4 - asp.net 登录拒绝匿名用户查看该网站

> ID：14421371
> 
> 赞同：0
> 
> 时间：2013-01-20T03:18:04.247
> 
> 标签：asp.net-mvc-4, authorization

在我的网站上，只有授权用户才能查看价目表。但是，匿名用户被拒绝访问网站的任何页面。我想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:37:27.733

简而言之：在您的身份验证中配置不正确。一种解决方案是在返回价格视图的`Controller`or之上设置 Authorize 属性。`ActionResult`

```
[Authorize(Roles="CanAccessPriceList")]
public class AccountController : Controller 
```

或`ActionResult`级别代码，例如：

```
[AuthorizeUser(AccessLevels="ReadPrices, UpdatePrices")]
public ActionResult PriceList(int parameter)
{
   // some code...
   return View();
} 
```

# ruby-on-rails - 如何忽略 Cucumber paths.rb 中的 URL 参数？

> ID：14421372
> 
> 赞同：0
> 
> 时间：2013-01-20T03:18:12.390
> 
> 标签：ruby-on-rails, url, dynamic, cucumber

在我的 support/paths.rb 文件中，我的 case 子句之一是：

```
when /the checkout page/ then '/store/checkout' 
```

但是，在某些流程中，到结帐页面的重定向会向 URL 添加一些参数，因此重定向不是到“/store/checkout”而是到（例如）“/store/checkout?email_confirmation=1”。

问题是这会导致 Cucumber 的一些断言失败，例如下面的第 3 行：

```
Given I am on the checkout page
When I proceed with a blank email address
Then I should be on the checkout page
And I should see "You must provide an email address." 
```

第 3 步失败：

```
 Then I should be on the checkout page                              # features/step_definitions/web_steps.rb:185
  expected: "/store/checkout",
       got: "/store/checkout?email_confirmation=1" (using ==) 
```

如何让 Cucumber 忽略“？”之后的参数？在重定向的 URL 中？

`Then I should be on the checkout page`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:52:56.323

我听从了 Geoff 的建议，通过修改 web_steps.rb 解决了这个问题。具体来说，在固定步骤定义中

```
Then /^(?:|I )should be on (.+)$/ do |page_name| 
```

我改变了这个断言

```
current_path.should == path_to(page_name) 
```

对此，它只比较任何 '?...' 参数字符串之前的 URL 部分：

```
current_path.gsub(/\?.*$/, '').should == path_to(page_name).gsub(/\?.*$/, '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:55:01.777

对于后代，答案（在评论中很深）是执行以下操作之一：

1.  更新到`cucumber-rails-training-wheels`包含预期行为的新内容。

2.  确保`web_steps.rb`正确设置`current_path`变量。

    ```
    current_path = URI.parse(current_url).path 
    ```

    而不是这个：

    ```
    current_path = URI.parse(current_url).select(:path, :query).compact.join('?') 
    ```

# ios - IOS 选择器不执行

> ID：14421377
> 
> 赞同：0
> 
> 时间：2013-01-20T03:20:40.827
> 
> 标签：ios, cocoa, selector

@selector(apiRequest:didFinishWithData:) 不会执行，即使 fetcher 确实完成了数据。我试图用断点调试问题。当我循环通过断点时，我从选择器调用的方法没有被执行和绕过。这是因为选择器不在主线程上运行吗？我该如何纠正？

```
 OADataFetcher *fetcher = [[OADataFetcher alloc] init];
   [fetcher fetchDataWithRequest:request
                        delegate:self
               didFinishSelector:@selector(apiRequest:didFinishWithData:)
                 didFailSelector:@selector(apiRequest:didFailWithError:)];

   (void)apiRequest:(OAServiceTicket *)ticket didFinishWithData:(NSData *)data {
   if (ticket.didSucceed) {
   NSString *responseBody = [[NSString alloc] initWithData:data
                                                  encoding:NSUTF8StringEncoding];
   NSLog(responseBody);
    //could use this to implement errors
   NSError* error;
   NSDictionary* json = [NSJSONSerialization
                         JSONObjectWithData:data //1
                         options:kNilOptions
                         error:&error];}
   } 
```

# bash - 如何将标准输出同时重定向到变量和文件？

> ID：14421378
> 
> 赞同：1
> 
> 时间：2013-01-20T03:20:56.770
> 
> 标签：bash, io-redirection

这个问题来自**Chris Johnson**在**第 2 章练习 2**中的**Pro Bash Programming**：

 ****使用 $RANDOM 编写脚本，将以下输出写入文件和变量。以下数字仅用于显示格式；你的脚本应该产生不同的数字：

```
 1988.2365
13798.14178
10081.134
 3816.15098 
```

这是我的解决方案：

```
printf -v var "%5d.%-5d\n" $RANDOM $RANDOM $RANDOM $RANDOM $RANDOM $RANDOM $RANDOM $RANDOM > FILE 
```

看来输出直接进入var，FILE为空。

我的问题是，有没有办法将标准输出同时重定向到变量和**文件**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T03:23:05.050

你可以写：

```
var="$(printf '%5d.%-5d\n' $RANDOM ... | tee FILE)" 
```

使用[命令`tee`](http://en.wikipedia.org/wiki/Tee_%28command%29)“拆分”标准输出，以便它进入`FILE`和进入一个新的标准输出，可以使用命令替换在您的变量[中](http://en.wikipedia.org/wiki/Tee_%28command%29)[捕获](http://www.gnu.org/software/bash/manual/bash.html#Command-Substitution)。****

# java - 为什么我的画布不工作？

> ID：14421379
> 
> 赞同：0
> 
> 时间：2013-01-20T03:21:23.817
> 
> 标签：java, swing, canvas, awt, illegalstateexception

我正在创建一个游戏画布，但由于某种原因我无法让它正常工作。我得到一个 InvalidStateException ，但我不知道是什么原因造成的。任何人都可以解释一下吗？

我的主要入口点...

```
public class GameTemplate {

    public static void main(String[] args) {
        new GameFrame();
    }

} 
```

我的 JFrame 子类...

```
import java.awt.Dimension;

import javax.swing.JFrame;

public class GameFrame extends JFrame {

    public static final short WIDTH = 1024;
    public static final short HEIGHT = WIDTH / 16 * 9;
    public static final Dimension size = new Dimension(WIDTH, HEIGHT);

    public GameFrame() {
        super("Game Frame");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(size);
        this.setLocationRelativeTo(null);
        this.setResizable(false);
        GameCanvas canvas = new GameCanvas(size);
        this.add(canvas);
        canvas.start();
        this.setVisible(true);
    }

} 
```

我的画布子类...

```
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferStrategy;

public class GameCanvas extends Canvas implements Runnable {

    private boolean isRunning = false;
    private Thread thread = null;

    private BufferStrategy bs = null;
    private Graphics g;
    private Graphics2D g2d;

    public GameCanvas(Dimension size) {
        this.setSize(size);
        this.setVisible(true);
    }

    public synchronized void start() {
        isRunning = true;
        thread = new Thread(this);
        thread.start();
    }

    public synchronized void stop() {
        isRunning = false;
        try {
            thread.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void run() {
        while (isRunning) {
            update();
            draw();
            render();
            try {
                Thread.sleep(10);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    private void update() {

    }

    private void render() {
        bs = this.getBufferStrategy();
        if (bs == null) {
            this.createBufferStrategy(3);
            return;
        }
        bs.show();
    }

    private void draw() {
        if (bs != null) {
            g = bs.getDrawGraphics();
            g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                    RenderingHints.VALUE_ANTIALIAS_ON);
            g.setColor(Color.BLACK);
            g.drawRect(0, 0, WIDTH, HEIGHT);
        }
    }

} 
```

错误...

```
Exception in thread "Thread-1" java.lang.IllegalStateException: Component must have a valid peer
at java.awt.Component$FlipBufferStrategy.createBuffers(Unknown Source)
at java.awt.Component$FlipBufferStrategy.<init>(Unknown Source)
at java.awt.Component$FlipSubRegionBufferStrategy.<init>(Unknown Source)
at java.awt.Component.createBufferStrategy(Unknown Source)
at java.awt.Canvas.createBufferStrategy(Unknown Source)
at java.awt.Component.createBufferStrategy(Unknown Source)
at java.awt.Canvas.createBufferStrategy(Unknown Source)
at GameCanvas.render(GameCanvas.java:63)
at GameCanvas.run(GameCanvas.java:47)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:08:13.457

```
java.lang.IllegalStateException: Component must have a valid peer 
```

这可能是您调用`createBufferStrategy()`组件时必须隐藏的原因。

**更新：**

正如@Andrew 所建议的那样，您正在混合[轻型和重型](http://www.oracle.com/technetwork/java/index.html)组件。依赖默认的 BufferStrategy。正如我们所见，`Canvas`在您将其添加到`Frame`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T15:33:58.310

在框架初始化程序中，在您的情况下：

```
public GameCanvas(Dimension size) {...} 
```

您需要调用方法“frame.addNotify()”，例如：

```
 public GameCanvas(Dimension size) {
    this.setSize(size);
    this.setVisible(true);
    this.addNotify();
 } 
```

然后稍后在您的代码中，您想要包含代码：

```
@Override
public void addNotify() {
    super.addNotify();
} 
```

这只是通知框架您希望此类使用缓冲区。当框架不知道要为请求的任务使用哪个组件的缓冲区时，您在哪里做的是试图让框架使用缓冲区来创建图形类型缓冲区策略。

# c - 来自 fgets() 的分段错误

> ID：14421389
> 
> 赞同：3
> 
> 时间：2013-01-20T03:24:02.237
> 
> 标签：c, segmentation-fault, fgets

我在一个文本文件中有一个 url 列表，我正在尝试将它们保存在一个结构中作为主机和页面。我对这段代码有问题。它返回**sigsegv**。有任何想法吗？

```
char buf[100];
.......
while ( fgets ( buf, 100, fin ) != NULL )
{
    buf [ strlen (buf) - 1 ] = '\0';
    informatii.intrari++;
    informatii.urluri[informatii.intrari-1].status=-1;
    printf("BUFFER: %s\n", buf);

    if( strncmp ("http://",buf,7) == 0 )
        memmove (buf, buf+7, strlen (buf));

    if( strncmp("https://",buf,8) == 0 )
        memmove (buf, buf+8, strlen (buf));

    printf("BUFFER: %s\n", buf);
    if ( strchr ( buf , '/' ) ==  NULL)
    {
        strcpy ( informatii.urluri [ informatii.intrari - 1 ].host, buf);
        strcpy ( informatii.urluri [ informatii.intrari - 1 ].page, "/");
    }
    else
    {
        memmove ( informatii.urluri [ informatii.intrari - 1 ].page, 
                  buf+(strchr ( buf , '/' )-buf), 
                  strlen(buf) );  
    }
    memset(buf , 0 , 100 );
} 
```

* * *

**来自 OP 评论的**编辑结构****

 **```
struct urlinfo 
{ 
    unsigned short status; 
    char* serror; 
    char host[100]; 
    char page[100]; 
}; 

struct informati 
{ 
    int intrari; 
    int time; 
    char* email; 
    struct urlinfo urluri[50]; 
} informatii; 
```

**结束编辑**

编辑：在遵循您的一些建议后，我设法使其工作，但有些事情我不明白。这是最终代码。

```
`struct urlinfo
{
unsigned short status;
char* serror;
char host[100];
char page[100];
};
struct informati
{
int intrari;
int time;
char* email;
struct urlinfo urluri [MAX_URLS];
}informatii;
int configurare(char* fisier)//citim si memoram fisierul de configurare
{
     FILE* fin;
     char buf[100];
     char* temp;
     int i;
     if((fin = fopen(fisier,"r")) == NULL)//verificam fisierul de intrare
   {
      printf("Eroare la fisierul de configurare.Se va folosi fisierul default configurare.txt.\n");
      fin = fopen("configurare.txt","r");
   }
    informatii.intrari = 0;
    informatii.time = 30;
    informatii.email = NULL;`
while ( fgets ( buf, 100, fin ) != NULL )
                {
                //buf [ strlen (buf) - 1 ] = '\0';
                 if (informatii.intrari >= 50) {
                    printf("URLs overflow...!\n");
                    break;}
                informatii.urluri[ informatii.intrari ].status=-1;
                informatii.urluri[ informatii.intrari ].serror= NULL;
                if( strncmp ("http://",buf,7) == 0 )
                    memmove (buf, buf+7, strlen (buf)  );
                if( strncmp("https://",buf,8) == 0 )
                    memmove (buf, buf+8, strlen (buf)  );
                temp = strchr ( buf , '/' );
                if ( temp ==  NULL)
                {
                    memcpy ( informatii.urluri [ informatii.intrari  ].host, buf,strlen(buf)+1);
                    strncpy ( informatii.urluri [ informatii.intrari  ].page, "/\0",2);
                }
                else
                {
                    memcpy ( informatii.urluri [ informatii.intrari  ].host, buf,strlen(buf)-strlen(temp));
                    memmove ( informatii.urluri [ informatii.intrari ].page, temp, strlen(temp));
                }
                informatii.intrari++;
                memset(buf , '\0' , 100 );
                }
    }
 fclose(fin);
   return 0;
}` 
```

如果我使用它`buf [ strlen (buf) - 1 ] = '\0';`来删除托盘'\ n'，当我使用 printf 时，字符串中的第一个字符不会被打印（例如，如果我有 printf(" Buf %s", buf) 它将打印 "uf"然后是 buf 字符串。如果`if( strncmp ("http://",buf,7) == 0 ) memmove (buf, buf+7, strlen (buf) -7 );`再次尝试使用我有一个错误的返回字符串，则在字符串中的 '\n' 字符之后复制字符串末尾的一些字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:02:52.020

除了来自 WhozCraig 的相关评论（*buf*在其空间之外阅读）之外，我没有看到任何方法可以防止循环存储超过 50 个 URL。如果读取的 URL 超过 50 个，则*urluri*数组会溢出，并且可能会损坏堆。其结果可能是*fin*文件描述符（更可能是其指针）被更改，导致fgets 中*出现**sigsev*。

 **   一个易于确保您阅读 50 个或更少的 URL 被阅读，在第一个指令中添加

    ```
    while ( fgets ( buf, 100, fin ) != NULL )
    {
      if (informatii.intrari >= 50) {
        printf("URLs overflow...!\n");
        break;
      } 
    ```

*   *在while*之前`informatii.intrari`初始化到`0`某个地方？

**   顺便说一句，你可以抓住机会命名常数 50

    ```
    #define MAX_URLS  50 
    ```

    并在程序中使用`MAX_URLS`而不是 50。

    *   另外，你可以把

    信息.intrari++;

    *在while*末尾的行，因此在循环中使用`[informatii.intrari]`而不是。`[informatii.intrari - 1]`

    *   并且`buf+(strchr ( buf , '/' )-buf)`是`strchr ( buf , '/')`，因为*strchr在**buf*中返回一个指针。（并且由于相同的*strchr*被使用了两次，而*buf*同时没有改变，你应该把它的返回值放在一个`char *pos = strchr(buf, '/');`变量中，并使用*pos*代替，以避免重复调用*strchr*。****

# jquery-mobile - 禁用移动浏览器中特定元素的触摸和滚动

> ID：14421392
> 
> 赞同：0
> 
> 时间：2013-01-20T03:24:24.130
> 
> 标签：jquery-mobile, mobile-safari

我目前正在开发适合移动/平板电脑的布局，并且遇到了有关触摸/滚动事件的问题。现在我有一个类似于 Facebook 的移动/平板电脑界面的滑动菜单，它从左侧滑出。

我想禁用任何触摸按键或在此菜单之外滚动，直到它关闭。现在我一直在移动/平板电脑 Safari 中测试该网站，但我也需要它在 Android 中工作。

有什么简单的方法可以做到这一点——理想情况下在 body 元素上创建一个监听器，如果触摸/滚动不在滑动菜单中，它会忽略它？我正在使用 jQuery Mobile 库的触摸事件，那么 touchstart 可能在这种情况下工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:28:55.090

最终找到了解决它的方法。使用 touchstart 和 touchmove 事件并检查 event.target 以查看我是否在菜单内，否则如果它在菜单外，我将忽略任何操作。

# .htaccess - 将 windows web.config 规则转换为 .htaccess 规则

> ID：14421399
> 
> 赞同：0
> 
> 时间：2013-01-20T03:25:35.513
> 
> 标签：.htaccess, iis, iis-7, web-config

我在 Windows 机器上的 web.config 文件中有以下规则。它接受任何包含`http://domain.com/shop/[stuff]`并将其路由到的请求`/category.php`。我正在将该站点移动到 PHP 服务器，但我不确定如何将此规则设为 .htaccess 规则。

请注意，web.config 规则会保留查询字符串（如果存在）。

```
 <rule name="Rule for shop pages.">
      <match url="(.*/)?shop/*" />
      <action type="Rewrite" url="/category.php" appendQueryString="true" />
    </rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:32:12.580

尝试以下

```
RewriteRule (.*/)?shop/* /category.php [] 
```

以后如果需要更多帮助，我建议你使用[http://tohtaccess.com/](http://tohtaccess.com/)一个网站，将 web.config 重写规则转换为 htaccess 格式。

# kinect - 使用 FAAST 代替鼠标

> ID：14421402
> 
> 赞同：0
> 
> 时间：2013-01-20T03:26:17.350
> 
> 标签：kinect

我在使用 FAAST 时遇到问题。我目前通过选择速度使用该程序代替鼠标。但是鼠标移动非常抖动，用户很难导航。有什么办法可以让它更流畅吗？或者更好，还有其他更好的替代品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:28:13.023

官方 Kinect for Windows SDK 内置了平滑参数：

```
kinectSensorManager.TransformSmoothParameters =
    new TransformSmoothParameters
    {
        // as the smoothing value is increased responsiveness to the raw data
        // decreases; therefore, increased smoothing leads to increased latency.
        Smoothing = 0.5f,
        // higher value corrects toward the raw data more quickly,
        // a lower value corrects more slowly and appears smoother.
        Correction = 0.5f,
        // number of frames to predict into the future.
        Prediction = 0.5f,
        // determines how aggressively to remove jitter from the raw data.
        JitterRadius = 0.05f,
        // maximum radius (in meters) that filtered positions can deviate from raw data.
        MaxDeviationRadius = 0.04f
    }; 
```

我不知道 OpenNI 是否直接调用平滑函数。可以使用标准算法对这些概念进行手动编码。

您还可以添加移动缓冲区。在更新位置之前检查手坐标是否移动了特定的增量。这有助于消除抖动，但光标会更明显地跳跃。这都是一种权衡，并有助于展示手势输入如何不适合控制需要更精确的东西。

# php - 更新查询不起作用

> ID：14421404
> 
> 赞同：-2
> 
> 时间：2013-01-20T03:26:34.607
> 
> 标签：php, mysql, json

```
<?php
session_start();
include('MySQL.php');

$Name = $_SESSION['Name'];
$Check = 'SELECT * FROM Users WHERE FName = "'.$Name.'"';
$Query = mysql_query($Check);

if($Row = mysql_fetch_assoc($Query))
{
    $Admin = $Row['Admin'];

    if($Admin == 1)
    {
        $ID = $_POST['ID'];
        $Username = $_POST['User'];
        $EMail = $_POST['EMail'];
        $FName = $_POST['FName'];
        $LName = $_POST['LName'];
        $IP = $_POST['IP'];
        $Active = $_POST['Active'];
        $Admin = $_POST['Admin'];

         mysql_query('UPDATE Users SET Username="'.$Username.'", EMail="'.$EMail.'", FName="'.$FName.'", LName="'.$LName.'", IP="'.$IP.'", Active="'.$Active.'", Admin="'.$Admin.'"');
        $Val['Msg'] = 'Those Values Have Been Updated';
    }
    else
    {
        $Val['Re'] = 'Home.php';    
    }
}

echo json_encode($Val);
?> 
```

每次我运行查询时都没有任何反应。我知道这不是我的 jQuery，所以不要担心，因为我检查了三次并且我的所有变量都很好。如果我将它们取下或戴上，MySQL 行标题周围的引号没有任何作用。我已经尝试了几个小时，但似乎找不到解决方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:33:23.710

我相信这是查询末尾的 ID。当它很可能是一个整数并且不应该有引号时，您在它周围使用引号。

-- 编辑：似乎代码已更改，WHERE 部分不再存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T03:52:27.817

您必须按照以下几个步骤进行调试。

1.  回显'`UPDATE Users SET Username="'.$Username.'", EMail="'.$EMail.'", FName="'.$FName.'", LName="'.$LName.'", IP="'.$IP.'", Active="'.$Active.'", Admin="'.$Admin.'"'`并查看查询是否正确。
2.  复制查询并在 PHPMyAdmin 上运行它并查看查询是否被执行并更新您想要的行。
3.  您的查询缺少 where 子句。因此，每次执行查询时，您的整个表都会更新。
4.  试试下面的查询。

`"UPDATE Users SET Username='".$Username."', EMail='".$EMail."', FName='".$FName."', LName='".$LName."', IP='".$IP."', Active='".$Active."', Admin='".$Admin."' "`

# android - AlertDialog Buttons - 如何设置颜色并将文本字体更改为 +ve 和 -ve 按钮

> ID：14421405
> 
> 赞同：2
> 
> 时间：2013-01-20T03:26:51.280
> 
> 标签：android, android-layout, android-alertdialog, android-button, android-dialog

我正在尝试将颜色设置为具有绿色和红色的正负按钮，并为按钮中的文本设置一些字体。你能告诉我这是怎么做到的吗？

```
public void onClick(View v) {
// TODO Auto-generated method stub
switch (v.getId()){
case R.id.bNewTicket:    
    // custom dialog 
    LayoutInflater li = LayoutInflater.from(context);
    final View promptsView = li.inflate(R.layout.homepagedialognewticket, null);
    AlertDialog.Builder alertDialogBuilder  = new AlertDialog.Builder(context); 
    alertDialogBuilder.setView(promptsView); 

    // set dialog message
    alertDialogBuilder.setPositiveButton("Go", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) { 

            }
          })
          .setNegativeButton("Back",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {  
            }
          });

    AlertDialog alertDialog = alertDialogBuilder.create(); 
    alertDialog.show();  
    break;  
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:09:17.967

可能有两种方法可以完成您所追求的目标。

**1) 使按钮成为自定义布局的一部分。**

您可能必须创建一个普通的`Dialog`而不是`AlertDialog`防止自动添加按钮。

**2）尝试在设置后进行修改`AlertDialog`。**

`AlertDialog`您可以在创建后通过调用[`getButton(int)`](http://developer.android.com/reference/android/app/AlertDialog.html#getButton%28int%29)并传入指示正、负和中性按钮的常量来获取默认按钮。从那里开始，您应该能够根据颜色等设置您喜欢的按钮样式。

以这种方式设置自定义字体可能会稍微困难一些。您可以尝试将按钮文本设置为[`TextAppearanceSpan`](http://developer.android.com/reference/android/text/style/TextAppearanceSpan.html)or[`TypefaceSpan`](http://developer.android.com/reference/android/text/style/TypefaceSpan.html)并将其传递给相关按钮，但从内存中它们仅支持平台字体。扩展其中之一以支持从例如资产文件夹加载一些字体文件并不是太棘手，但您必须自己在那里做一些令人费解的事情。

* * *

选项 1 肯定会给您最大的灵活性，并且可能需要更少的摆弄。我可能会走这条路。

# linux - 需要一些帮助来在 Ubuntu 上设置 PostgreSQL

> ID：14421406
> 
> 赞同：-1
> 
> 时间：2013-01-20T03:27:10.277
> 
> 标签：linux, postgresql

不想对我的问题进行冗长的描述让您感到厌烦，但我最终在一个 Ubuntu 操作系统上拥有两个 Postgres 数据库（旧版本和新版本，只是因为我在 Linux 上不太聪明）。

Postgres 1 设置不正确，我无法访问它等。但它默认启动并且位于所有默认位置。

Postgres 2 是我想要使用的，我的 PGAdmin 可以看到它，它有用户、表等。但它安装在这个目录下：

```
/opt/PostgreSQL/9.2/ 
```

所以我想弄清楚如何删除 Postgres1 并使 Postgres2 默认启动。

我试图运行这个：

```
/opt/PostgreSQL/9.2/bin/postgres -D /opt/PostgreSQL/9.2/data 
```

它给了我权限被拒绝的错误。

当我执行 grep 命令时，我确实看到了一些 Postgres 进程。

目前我看到的唯一选择是重新安装我的 Ubuntu 并尝试再次安装 Postgres。但工作量太大，我想也许有人可以在我这样做之前调查我的问题。

将欣赏任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:55:47.177

您可能都安装为 deb 包并且它们在不同的端口上运行，对吗？

您的正确方法是使用`apt-get`删除您不想要的那个，然后编辑 postgresql.conf 以将您想要的端口更改为 5432，然后重新启动服务。

请注意，您不能`pg_ctl`以 root 身份运行。这是因为 PostgreSQL 不会作为系统超级用户运行。

# excel - 使用VBA制作函数，不知道哪里出了问题

> ID：14421411
> 
> 赞同：0
> 
> 时间：2013-01-20T03:28:03.853
> 
> 标签：excel, vba

假设我有一列条目，其中条目是等级，例如这个例子是四年级。我只需要有数值。

```
Function CleanCode(entry) As Integer
    If entry Like "[4]" Then entry = 4
End Function 
```

为什么这个功能不做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T03:56:45.833

首先，要“清理”以数字字符开头的字符串，请使用“Val（”函数。我认为您还期望 CleanCode 函数更改“entry”参数，但是您必须显式返回该值.

```
Function CleanCode(entry) As Integer
    entry = Val(entry)
    If entry Like "[4]" Then
       entry = 4
    Else
       entry = -1
    End If
    CleanCode = entry
End Function 
```

我们可以从另一个函数调用这个函数，看看它是如何运行的：

```
Sub CallCC()
  Dim entry As Variant
  entry = "9th"
  Dim Result As Integer
  Result = CleanCode(entry)
  MsgBox "Result = " & Result
  'Result is -1
  entry = "4th grade"
  Result = CleanCode(entry)
  MsgBox "Result = " & Result
  ' Result = 4

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:15:24.917

使用正则[表达式](/questions/tagged/regexp "显示标记为“正则表达式”的问题")有效地清理您的字符串。要清除字符串 in `A1`，`B1`您可以输入

`=CleanString(A1)`

```
Sub Tester()
     MsgBox CleanString("3d1fgd4g1dg5d9gdg")
End Sub

Function CleanString(strIn As String) As String
    Dim objRegex
    Set objRegex = CreateObject("vbscript.regexp")
    With objRegex
     .Global = True
     .Pattern = "[^\d]+"
    CleanString = .Replace(strIn, vbNullString)
    End With
End Function 
```

# spring - 如何在春季测试会话钝化

> ID：14421414
> 
> 赞同：3
> 
> 时间：2013-01-20T03:29:15.113
> 
> 标签：spring, session, scope

我想在我的 spring 3 应用程序中使用会话范围的 bean，我偶然发现了[这篇文章](http://justonjava.blogspot.hk/2011/02/session-passivation-and-spring-part-1.html)。

现在我想测试我的会话 bean 是否被正确地钝化和重新激活，但是我该如何在春天做到这一点呢？我正在寻找一种方法来设置会话钝化超时或强制会话以编程方式钝化的函数。

# wolfram-mathematica - 数学方程标记

> ID：14421415
> 
> 赞同：0
> 
> 时间：2013-01-20T03:29:18.157
> 
> 标签：wolfram-mathematica, format

这似乎是一个显而易见的问题，但我找不到任何答案。我正在使用 Mathematica 8 并使用 (Format->Style->DisplayFormulaNumbered) 对我的方程进行顺序编号。这很好用，但是我如何在文本中引用特定的方程，以便如果我在引用的方程之前添加新的方程，它们会相应地改变？

我知道 LateX 做得非常好，这似乎是一个简单的过程。具体来说，如果我有方程式，

废话=废话 (1)

nerg=flag (2)

将等式（2）插入等式（1）......但是我想在等式（1）之前添加一个等式，我怎样才能自动将文本更改为“将等式（3）插入等式（2）。 ..”？

另外，无论如何对编号有更多的控制权吗？比如我可以用等式（2.1）代替等式（2）吗？这会有所帮助，因为我有部分可以使这种编号样式更好。

谢谢！我希望这不是一个常见问题，但我搜索并找不到答案。

# android - Bitmap.createBitmap 只接受一种分辨率

> ID：14421416
> 
> 赞同：0
> 
> 时间：2013-01-20T03:29:31.933
> 
> 标签：android, bitmap

我对 Android 编程有点陌生，所以也许我错过了一些东西。在我的代码中，我试图通过调用来创建新的位图`Bitmap.createBitmap(W, H, Bitmap.Config.ARGB_8888)`。它返回`(-1, -1)`任何大小为 的位图，`W`而`H`不是`640x480`. 有什么理由允许我只创建固定大小的位图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:49:46.557

如果你这样做，`Bitmap.createBitmap(W, H, Bitmap.Config.ARGB_8888)`那么它将创建一个“具有指定宽度和高度的可变位图。它的初始密度是根据 getDensity()”。可变位图是可以修改的。因此，正如 Habib 提到的，您可以使用 Canvas 绘制位图。

# c - 在eclipse项目中一起编译C和fortran

> ID：14421417
> 
> 赞同：1
> 
> 时间：2013-01-20T03:29:46.703
> 
> 标签：c, eclipse, dll, fortran

我想编译 C 和 fortran 并将它们与 gcc -lgfortran 链接。我已经使用命令行使它工作，并且可以在需要时编写脚本，但我想知道是否可以使用 eclipse C 项目，在该项目中我可以将 C 和 fortran 文件添加到项目中。

我面临的问题是这个项目没有编译 fortran 文件（因此没有链接它们）。有人可以帮我编译和链接这些 fortran 文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:38:47.667

好的。这就是答案。

转到您的 C/C++ 项目属性。

C/C++ Build -> Tool Chain Editor -> 点击选择工具按钮。

在此处添加 GNU fortran 编译器（或您正在使用的任何编译器）。

就是这样 ！！！

# java - 在 LWJGL/OpenGL 上获得“鼠标悬停在对象上”？

> ID：14421419
> 
> 赞同：0
> 
> 时间：2013-01-20T03:30:25.453
> 
> 标签：java, opengl, vector, lwjgl, collision

我正在开发一个“基于块的游戏”（类似于 Minecraft），但我被困在一件事上：

假设我可以控制世界上的一切（块和实体），并且每个人都有一个 AABB（位置、大小等）......我怎么能得到我的鼠标正在查看/指向的内容？玩家有一个根据鼠标移动的旋转系统。我只是不知道如何获取我正在查看的块/实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T03:33:53.983

您可以使用来自眼睛矢量的[光线投射形式。](http://en.wikipedia.org/wiki/Ray_casting)基本上将该射线延伸到您希望能够考虑到的玩家可以触及的距离，然后测试该射线与附近块的交点。具有最近交叉点的街区应该是您关注的街区。

要测试该射线与块的交点，您需要对照块上的每个平面检查它。您可以使用光线平面相交算法来完成此操作。

显然，尽量减少您测试的块和平面的数量以提高性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T12:05:57.370

除了 Marc 的变体，您可以使用按颜色选择。为此，您需要执行以下步骤：

1) 关闭光照、混合、多重采样、纹理等。如果您使用着色器，只需设置最简单的着色器程序（它应该准备好，以便您只需要一次`glUseProgram`调用），它只转换您的几何体并用指定的颜色渲染它的每个部分。不要关闭 z 缓冲区！

2) 将您的场景渲染到应用了所有变换的屏幕外缓冲区。您想要区分的每个项目都应该有自己的颜色。如果 3 个颜色通道中的每一个都有 8 位，那么您将能够在 2^(3*8)=16777216 个项目中进行选择。

3) 在您感兴趣的点，即在鼠标指针的窗口坐标处，从屏幕外缓冲区中选取颜色值。第一步我们没有关闭z-buffer，所以你会得到鼠标指向的最近物体的颜色。

4) 重置渲染状态（开启多重采样，选择合适的着色器或开启光照等效果）并将场景渲染到窗口缓冲区。

在我看来，这种技术比光线投射更容易实现，因为您只需调整渲染器的状态，而硬件会执行所有艰苦的工作。

[当您通过使用平截头体剔除](http://www.lighthouse3d.com/tutorials/view-frustum-culling/)、[八叉树](http://en.wikipedia.org/wiki/Octree)、[bsp](http://en.wikipedia.org/wiki/Binary_space_partitioning)等提高常规渲染的性能时，此技术的性能会自动提高。

有关帧缓冲区对象的更多信息：

*   [http://www.songho.ca/opengl/gl_fbo.html](http://www.songho.ca/opengl/gl_fbo.html)
*   [http://www.opengl.org/wiki/Framebuffer_Object](http://www.opengl.org/wiki/Framebuffer_Object)

关于颜色选择的话题：

*   [OpenGL中的颜色编码拾取问题](https://stackoverflow.com/questions/4550350/color-coded-picking-problem-in-opengl)
*   [http://www.lighthouse3d.com/opengl/picking/index.php3?color1](http://www.lighthouse3d.com/opengl/picking/index.php3?color1)
*   [openGL 中的颜色选择](https://stackoverflow.com/questions/8780871/color-picking-in-the-opengl)

我相信您可以在 google 中找到更多关于颜色编码挑选的教程。

# java - 对 Cglib MethodInterceptor 调用方法感到困惑

> ID：14421421
> 
> 赞同：2
> 
> 时间：2013-01-20T03:30:31.760
> 
> 标签：java, aop, cglib

正如文档描述的那样，我对 Cglib MethodInterceptor 有一些困惑：所有生成的代理方法都调用此方法而不是原始方法。原始方法可以使用 Method 对象通过正常反射调用，也可以使用 MethodProxy（更快）调用。

但是下面的代码有 java.lang.reflect.InvocationTargetException 引起的错误；为什么？任何建议将不胜感激。

```
public class CglibInterceptor implements MethodInterceptor {
@Override
public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {
    System.out.println(" CglibInterceptor do something");
    return method.invoke(obj, args);

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-01T23:29:30.193

您发布的代码创建了一个无限循环。使用普通反射和使用普通反射的区别在于`MethodProxy`，`MethodProxy`将调用被代理类的子类实现，而反射调用将被再次代理。

您可以考虑以下两个选项：

```
 class NormalClass {
   void m() { }
 }

 class CglibClass extends NormalClass {
   void m() {
     // This would be like the reflective invocation
     this.m();
     // This has the same effect as the MethodProxy
     super.m();
   }
 } 
```

问题是反射调用是动态绑定的。因此，它们总是会命中代理，而代理只不过是一个动态创建的子类。选择两个调用选项之一与速度无关，它与您是否要访问代理有关。

# ios - 如何提高 UICollectionViewCell 渲染性能

> ID：14421423
> 
> 赞同：0
> 
> 时间：2013-01-20T03:31:06.137
> 
> 标签：ios, uikit, uicollectionview

滚动浏览 UICollectionView 时，似乎并非所有内容`cellForItemAtIndexPath`都被一致地调用。我想知道这是否是因为在方法完成之前细胞被回收了。

例如（我使用来自 AFNetworking 的 UIImageView 类别）：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
THMovieCell* cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"cell" forIndexPath:indexPath];

NSNumber* position = [[NSNumber alloc] initWithInteger:indexPath.row + 1];
THMovie* movie = [self.Movies objectForKey:position];

if (movie.ImageUrl) {
    [cell.Cover setImageWithURL:movie.ImageUrl];
}

cell.Title.text = movie.Title;

return cell;
} 
```

...但是，虽然`cell.Title`我的自定义单元格中的 UILabel 一直在更改，但图像却没有。

提高快速滚动单元格性能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:45:33.673

在不了解`THMovieCell`内部结构的情况下很难说，但仍然如此。您将图像 URL 设置为`movie.ImageUrl`. 如果它是一个远程 URL 并且它的图像还没有被缓存，那么缓慢的封面更新是不可避免的，因为它必须加载这个图像。另一个可能的原因是图像大小。如果您在屏幕上挤压了 10 张 1024x1024 的图像，这可能会导致滚动延迟很大。

1.  检查您的图像缓存性能（如果有）。使其异步，取消任何不需要的图像加载操作，因为电影已经超出屏幕。
2.  检查图像尺寸。尽可能使用缩略图。
3.  将封面的图像设置为默认的本地图像，指示加载过程，并且仅在此之后设置新的图像 URL。这样，用户将被通知封面即将更改。
4.  修复封面更新逻辑。现在，如果电影没有图像，则单元格的图像将不会更新，并将继续显示它用于的上一部电影的图像。

# google-fusion-tables - 合并表中的 KML 名称列

> ID：14421424
> 
> 赞同：0
> 
> 时间：2013-01-20T03:31:20.913
> 
> 标签：google-fusion-tables

我在这里有一个合并表，在“级别”字段中合并：

[https://www.google.com/fusiontables/DataSource?docid=1JJHwwJLW1CqrG3PZv3kMBrRJio-5f_28g_rJrYU#map:id=3](https://www.google.com/fusiontables/DataSource?docid=1JJHwwJLW1CqrG3PZv3kMBrRJio-5f_28g_rJrYU#map:id=3)

当我尝试将其导出为 KML 时，尽管存在名为“名称”的列，但标记最终会用“级别”字段中的值标记。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:37:38.390

列名必须完全正确`name`（不是`Name`，它区分大小写）

转到编辑>更改列。

在这里，您可以：

*   将列的名称更改为`name`
*   或将`Name`-column 移到顶部（当不`name`存在 -column 时，第一列将用作地标的名称，当前`level`为第一列）

# java - 我必须在 lucene 中索引大约 4000 个文件。它总是给我一个 eclipse 的堆空间异常。

> ID：14421425
> 
> 赞同：0
> 
> 时间：2013-01-20T03:31:29.910
> 
> 标签：java, lucene

我必须在 lucene 中索引大约 4000 个文件。它总是给我一个 eclipse 的堆空间异常。总文件大小为 5.9 Gb。是 6 GH i5 处理器 有没有其他方法可以做到这一点。请帮助各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:21:37.123

在 Eclipse 中，您可以在运行按钮旁边的上下文菜单中打开运行配置对话框。在 VM 参数下添加`-Xmx1024M -Xms1024M`，这会将堆空间设置为 1024 MB 或 1 GB。如果它仍然抛出 OutOfMemoryError 则尝试 2048 而不是 1024，或任何 2 的幂。不过，请确保您的计算机具有那么多 MB RAM。如果这仍然不起作用，我不知道除了用 C 语言编写程序之外还有什么...希望这会有所帮助...

# android - android java中的图像颜色校正

> ID：14421427
> 
> 赞同：2
> 
> 时间：2013-01-20T03:31:55.027
> 
> 标签：android, image, colors

我正在编写一个程序，允许用户比较两张照片，一张作为样本颜色，另一张进行编辑。我将从第一个收集像素信息，然后应用以下方法来编辑后者。

结果照片：[http ://www.flickr.com/photos/92325795@N02/8392038944/in/photostream](http://www.flickr.com/photos/92325795@N02/8392038944/in/photostream)

我的照片正在更新，尽管质量/噪音/颜色，但这里和那里都有奇怪的颜色。任何人都知道我应该怎么做才能删除它？或者甚至更好地改进我正在使用的方法？继承人的代码：

输入是要编辑的位图，inColor 是要编辑的照片中鼻子的颜色，reqcolor 是样本/最佳照片中我的鼻子的颜色。

```
public Bitmap shiftRGB(Bitmap input, int inColor, int reqColor){

    int deltaR = Color.red(reqColor) - Color.red(inColor);
    int deltaG = Color.green(reqColor) - Color.green(inColor);
    int deltaB = Color.blue(reqColor) - Color.blue(inColor);

    //--how many pixels ? --
    int w = input.getWidth();
    int h = input.getHeight();

    //-- change em all! --
    for (int i = 0 ; i < w; i++){
        for (int  j = 0 ; j < h ; j++ ){
            int pixColor = input.getPixel(i,j);

            //-- colors now ? --
            int inR = Color.red(pixColor);
            int inG = Color.green(pixColor);
            int inB = Color.blue(pixColor);

            if(inR > 255){ inR = 255;}
            if(inG > 255){ inG = 255;}
            if(inB > 255){ inB = 255;}
            if(inR < 0){ inR = 0;}
            if(inG < 0){ inG = 0;}
            if(inB < 0){ inB = 0;}

            //-- colors then --
            input.setPixel(i,j,Color.argb(255,inR + deltaR,inG + deltaG,inB           + deltaB));
        }
    }

    return input; 
```

非常感谢您对我的帮助！除了提前再次感谢您之外，我无法表达我的感激之情！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:54:45.960

该功能似乎按预期工作。

但是，我确实注意到的一件事是，在实际设置新像素的最终输出之前，您将“如果”案例用于验证边界。

```
 if(inR > 255){ inR = 255;}
        if(inG > 255){ inG = 255;}
        if(inB > 255){ inB = 255;}
        if(inR < 0){ inR = 0;}
        if(inG < 0){ inG = 0;}
        if(inB < 0){ inB = 0;}
        input.setPixel(i,j,Color.argb(255,inR + deltaR,inG + deltaG,inB + deltaB)); 
```

我相信这就是你真正想要做的。

```
 inR += deltaR
        inG += deltaG
        inB += deltaB
        if(inR > 255){ inR = 255;}
        if(inG > 255){ inG = 255;}
        if(inB > 255){ inB = 255;}
        if(inR < 0){ inR = 0;}
        if(inG < 0){ inG = 0;}
        if(inB < 0){ inB = 0;}
        input.setPixel(i,j,Color.argb(255,inR,inG,inB)); 
```

# javascript - 将 click() 事件附加到 Twitter 关注按钮？

> ID：14421429
> 
> 赞同：3
> 
> 时间：2013-01-20T03:32:19.427
> 
> 标签：javascript, twitter

当用户单击“关注”按钮时，我想在页面上添加一条警报消息。我怎样才能做到这一点？

这是代码：

```
<a href="https://twitter.com/prajapat2010" class="twitter-follow-button"
data-show-count="false" data-dnt="true">Follow @prajapat2010</a>
<script>
    ! function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = "//platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);
        }
    }(document, "script", "twitter-wjs");
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T03:48:42.160

您可以使用 Twitter 事件回调来实现此目的。

```
//Here is you normal twitter button code

//My custom function
function mycustom() {
  alert('this is a test')
}

//Bind the custom function with twitter event
twttr.ready(function (twttr) {
  twttr.events.bind('click', mycustom);
}); 
```

更多活动请阅读官方文档：[https ://dev.twitter.com/docs/intents/events](https://dev.twitter.com/docs/intents/events)

# websocket - 如何有效地向应用程序中的选定用户发送推送通知？

> ID：14421430
> 
> 赞同：3
> 
> 时间：2013-01-20T03:32:41.050
> 
> 标签：websocket, push-notification

我正在尝试使用 nodejs 和 websockets 实现推送通知服务器。我尝试实现的服务器需要能够发送特定于应用程序中每个用户的通知（例如：人 A 对您的帖子发表评论等......）。服务器还可以为许多应用程序提供服务。因此，使用该服务的用户数量非常多。

问题是如何管理频道。我在互联网上做了一些研究，但找不到可靠的解决方案。这个[问题也](https://stackoverflow.com/questions/12993099/websockets-correct-approach-for-creating-channels-and-pushing-data) [问](https://stackoverflow.com/questions/12993099/websockets-correct-approach-for-creating-channels-and-pushing-data)了类似的问题。但没有可靠的答案。

我想到的一种实现方式是，每个用户有一个频道，那么它可能无法很好地扩展到为许多用户提供服务。

我认为的另一种方法是将相同的消息组织成组，然后为这些组创建频道。然后缺点是登录用户需要订阅多个频道，并且可能有许多组只包含一个用户。另一方面，分组过程也影响效率。

我的问题是处理这个问题的有效方法是什么。你能给我一些见解吗？任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:20:47.547

> 我想到的一种实现方式是，每个用户有一个频道，那么它可能无法很好地扩展到为许多用户提供服务。

这取决于渠道（主题、主题）是如何实现的。如果每个频道订阅都会产生一个新的持久连接，那么这将无法很好地扩展。但是，如果通道是在协议级别表示的，那么您将从每个客户端一个连接中受益，并且该技术将处理通道上的消息仅路由到适当的客户端。

> 我的问题是处理这个问题的有效方法是什么。你能给我一些见解吗？任何帮助是极大的赞赏。谢谢。

因此，如果您使用通过单个连接实现[PubSub](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)的解决方案，那么扩展就不是问题（或者不会很快成为问题），并且您可以让每个用户订阅他们自己的通知频道。恕我直言，这是解决此问题的最佳方法，也是常见做法。

由于您正在查看 Node.js，因此您可以查看 Faye - 请参阅[订阅频道](http://faye.jcoglan.com/browser/subscribing.html)。您还可以查看托管服务，例如 Pusher（我为之工作） - 请参阅：[Pusher 频道](http://pusher.com/docs/client_api_guide/client_channels)。

### Web PubSub 安全性

下一个考虑因素是安全性：如何阻止任何客户端订阅频道。Faye 文档提供了一个[很好的安全概述](http://faye.jcoglan.com/security.html)，包括问题的解决方案。

Pusher 使用[用户身份验证机制](http://pusher.com/docs/authenticating_users)和[私有通道](http://pusher.com/docs/client_api_guide/client_private_channels)，这也为这个问题提供了可靠的解决方案。

# javascript - 选择表格中每一行的第二个单元格

> ID：14421432
> 
> 赞同：-2
> 
> 时间：2013-01-20T03:33:05.187
> 
> 标签：javascript, jquery, css

我有一个表格，我能够成功选择每一行的第一个单元格，但我不能使用相同的代码来选择每一行的第二个单元格。请帮我选择和更改每行第二个单元格的 CSS。我不使用普通 CSS 的原因是因为这些是表格的未来单元格。

```
$("#part_rows tr td:first-child").css("width","150px"); 
```

上面的工作正常，但以下不起作用。

```
$("#part_rows tr td:second-child").css("width","150px"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T03:34:49.427

使用[`nth-child`选择器](http://api.jquery.com/nth-child-selector/)：

```
$("#part_rows tr td:nth-child(2)").css("width","150px"); 
```

如果您打算使用 jQuery，花一个小时浏览[整个 jQuery 方法和选择器列表](http://api.jquery.com/)将为您节省大量时间……

> *“我不使用普通 CSS 的原因是因为这些是表格的未来单元格。”*

您是否尝试过使用“普通”CSS？我想你会发现它适用于动态添加的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T03:34:57.733

您正在寻找[**`:nth-child`选择器**](http://api.jquery.com/nth-child-selector/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T03:35:36.773

```
$("#part_rows tr").find('td:eq(1)') 
```

在 jQuery 组合`.find()`中 - 你可以使用 2 个很好的人来完成这项工作。你可以看看：

[http://api.jquery.com/find/](http://api.jquery.com/find/)
[http://api.jquery.com/eq/](http://api.jquery.com/eq/)
[http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

# jquery - 移动应用不滚动

> ID：14421445
> 
> 赞同：0
> 
> 时间：2013-01-20T03:35:04.450
> 
> 标签：jquery, cordova, mobile, scroll

我有一个简单的方程式参考应用程序，我想让它适合移动设备，但用户无法滚动到正面或侧面。这是头：

```
<!DOCTYPE html> 
<html>
<head>
 <script type="text/javascript">

        function onBodyLoad()
        {       
            document.addEventListener("deviceready", onDeviceReady, false);
        }

        function onDeviceReady()
        {
        }

        </script>
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes;" />
<meta charset="utf-8">
<title>jQuery Mobile Web App</title>
<link href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="http://code.jquery.com/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
</head> 
```

如果有人可以帮助我，我将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:39:22.440

改变这个：

`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes;" />`

对此：

`<meta name="viewport" content="width=device-width" />`

我相信问题是你的`maximum-scale=1.0`属性。因为这与`user-scalable=yes`属性冲突。

更多信息：[http ://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/](http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/)

# apache - 如何仅在后端重写 URL

> ID：14421447
> 
> 赞同：0
> 
> 时间：2013-01-20T03:35:18.600
> 
> 标签：apache, mod-rewrite

我正在尝试采用我拥有的这个重写规则，并且只让它在后端重写（处理），我不希望用户的 URL 实际改变。我的目标是获取 i.website.com 并将其放在 CDN 上，但不要将网站的其余部分放在 CDN 上。现在 i.website.com 转发到 www.website.com/images/ 但我只想让它在后端处理并使其在用户访问 i.website.com/asdasd.jpg 时不会t 转发 URL 以便 CDN 工作？

我想我是对的......无论如何这是我目前的重写，也许有更好的方法来做到这一点，我愿意接受建议并愿意回答任何进一步的问题。

谢谢

```
RewriteCond %{HTTP_HOST} ^i\.website\.com [NC]
RewriteRule ^(.+)$ http://www.website.com/images/$1 [L,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:16:40.727

根据您的评论，我认为这种情况可能是您正在寻找的：

在您的本地服务器上，您托管 www.website.com，包括 www.website.com/images，就像您现在所做的一样。

在 CDN 上，您托管 i.website.com。您可以设置 CDN 以从 www.website.com/images 拉取 i.website.com 的内容，就像您现在的重写规则一样（现在您的服务器上不需要重写规则）。

唯一的问题是，当您说“该应用程序旨在获取 www.website.com/images/ 并将其提供给正确的脚本，而不是 i.website.com”时，您的意思是应用程序/脚本拉来自 www.website.com/images 的内容进行处理，还是您的意思是应用程序/脚本写出链接到 www.website.com/images 而不是 i.website.com 上的图像的网页？

如果只是应用程序/脚本需要从 www.website.com/images/ 拉取内容的问题，那么只要站点的页面可以使用指向 i.website.com 的图像链接编写就可以了。在这种情况下，最后一点是，您从本质上反转您的重写规则，将所有外部流量从 www.website.com/images/ 引导到 i.website.com，以便处理较旧的链接，同时保持内部流量（您的应用程序/脚本）从 www.website.com/images/ 中提取。

# java - 在“if”语句中将 String 转换为 int

> ID：14421461
> 
> 赞同：0
> 
> 时间：2013-01-20T03:39:01.963
> 
> 标签：java, string, if-statement, integer, int

我正在学习我的 Intro Java 编程课程，想知道是否有捷径可以让我在`if`声明中尝试做的事情。

基本上，我的程序接收扑克牌的两个字符缩写并返回完整的牌名（**即“QS”返回“黑桃皇后”。**）

现在我的问题是：当我`if`为编号为 2-10 的卡片编写语句时，我是否需要为每个数字单独使用一个语句，或者我可以将它们组合在一个`if`语句中吗？

检查我的代码在哪里说**IS AN INTEGER**（显然不是 Java 表示法。）这是我要澄清的代码片段：

```
 public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        System.out.print("Enter the card notation: ");
        String x = in.nextLine();
        if (x.substring(0,1).equals("A")){
            System.out.print("Ace");
        }
        else if(x.substring(0,1) IS AN INTEGER) <= 10)){   // question is about this line
            System.out.print(x);
        }
        else{
            System.out.println("Error.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T03:42:35.053

你可以这样做：

```
 char c = string.charAt(0);
    if (Character.isDigit(c)) {
        // do something
    } 
```

`x.substring(0,1)`几乎相同`string.charAt(0)`。区别在于 charAt 返回 a`char`和 substring 返回 a `String`。

如果这不是家庭作业，我建议你[`StringUtils.isNumeric`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isNumeric%28java.lang.String%29)改用。你可以说：

```
 if (StringUtils.isNumeric(x.substring(0, 1))) {
        System.out.println("is numeric");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T03:46:13.907

将字符串转换为 int 的另一种方法是：

```
Integer number = Integer.valueOf("10"); 
```

您可能会考虑的另一种方法是使用类或枚举。

```
public class Card {
    // Feel free to change this
    public char type; // 1 - 10, J, Q, K, A
    public char kind; // Spades, Hearts, Clubs, Diamonds

    public Card(String code) {
        type = code.charAt(0);
        kind = code.charAt(1);
    }

   public boolean isGreaterThan(Card otherCard) {
       // You might want to add a few helper functions
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T03:45:45.863

这是我能想到的最简洁的解决方案：

```
private static Map<String, String> names = new HashMap<String, String>() {{
    put("A", "Ace"); 
    put("K", "King"); 
    put("Q", "Queen"); 
    put("J", "Jack"); 
}}; 
```

然后在你的主要：

```
String x = in.nextLine();
if (x.startsWith("10")) { // special case of two-character rank
    System.out.print("Rank is 10");
} else if (Character.isDigit(x.charAt(0)){
    System.out.print("Rank is " + x.charAt(0));
} else
    System.out.print("Rank is: " + names.get(x.substring(0,1));
} 
```

# c - 不寻常的 C 数组语法

> ID：14421467
> 
> 赞同：-1
> 
> 时间：2013-01-20T03:40:20.380
> 
> 标签：c, arrays

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

我在我的 C 书籍中遇到了以下代码，我很困惑你什么时候会使用它：

```
int doses[] = {1, 2, 3, 1000};
printf("Issue dose %i", 3[doses]); 
```

我只用过： **dose[3]**，从未见过**3[doses]**。

这种类型的数组叫什么，你什么时候使用它？

*（我编译了它，它是完全有效的 C 语法，它按预期返回“问题剂量 1000”）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T03:46:16.673

a[b] 大致转换为 *(a+b)。通常指针（在这种情况下是数组的名称）在前，但这不是必需的。

# c# - 使用 XAML 绑定属性

> ID：14421469
> 
> 赞同：0
> 
> 时间：2013-01-20T03:41:15.413
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps

我有`userControl`一个`GridView`（`GridViews`一个`GridView`谁的数据上下文是另一个`GridView`），所以当我将它设置`itemssource`为一个集合的集合时，我可以看到一个分层视图。

例如：

> 父集合是`List<ClassRoom>`并且父集合有一个`Property` `List<Student>`

上述类已定义，我无法修改类（因为我们认为它在模型层中）以使用我的 UserControl。

因为我正在开发一个 UserControl，所以我定义了一个名为`bool ShowChildItems`.

如果 ShowChildItems 设置为 false 我希望 childGridView 为`Collapsed`。

如何将用户控件的属性绑定到 childGridView.Visisbility。（ShowChildItems 属性值可能会在运行时发生变化，具体取决于 UserControl 的实例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T04:55:26.897

无法在所有 XAML 框架中修改的模型层项目的解决方法是使用 MVVM 模式，您实际上不会绑定到 ClassRoom 列表，而是创建另一种名为 ClassroomViewModel 的类型，它添加了驱动您需要的属性和方法看法。

完成此操作后，您可以向 ClassroomViewModel 添加一个名为 StudentListVisibility 的属性。然后，您的用户控件绑定到的主视图模型将具有 ShowChildItems 属性和 Classrooms 列表属性。用户控件会将其 ShowChildItems 依赖属性绑定到视图模型的 ShocChildItems 可绑定属性，并且在更改 ShowChildItems 值时视图模型将迭代其 ClassroomViewModel 项目列表，并适当地设置它们的 StudentListVisibility。StudentListVisibility 当然会绑定到（子）GridView.Visibility 属性。

所有这一切——从用户体验和工程的角度来看，嵌套 GridViews 听起来都是一个糟糕的设计。也许更好的解决方案是使用 SemanticZoom 控件并使用绑定到 Classrooms 的 GridView 来实现其缩小视图，并使用 GridView 以及按教室分组的学生来实现放大视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T07:47:25.480

要在您的`ShowChildItems`财产中`UserControl`管理`Visibility`您的孩子`GridView`，您首先需要将其设为`DependencyProperty`：

```
public static readonly DependencyProperty ShowChildItemsProperty =
    DependencyProperty.Register("showChildItems", typeof (bool), typeof (MyUserControl), new PropertyMetadata(true));

public bool ShowChildItems
{
    get { return (bool) GetValue(ShowChildItemsProperty); }
    set { SetValue(ShowChildItemsProperty, value); }
} 
```

在内部，`UserControl`您将`GridView` `Visibility`使用`ElementName`语法将 the 绑定到该属性 - 这样，绑定的内容无关紧要`GridView` `DataContext`：

```
<GridView Visibility="{Binding ShowChildItems, ElementName=ControlRoot, Converter={StaticResource VisibilityConverter}}" ItemsSource="{Binding ChildItems}"> 
```

为此，您需要将名称设置为`UserControl`的根节点（我省略了其余属性）：

```
<UserControl
    x:Name="ControlRoot"> 
```

我还使用转换器将`bool`属性绑定到`Visibility`：

```
<UserControl.Resources>
    <local:BoolToVisibilityConverter x:Key="VisibilityConverter" />
</UserControl.Resources> 
```

这是它的代码：

```
public class BoolToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        if (!(value is bool)) return Visibility.Collapsed;

        return (bool) value ? Visibility.Visible : Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

我希望这是你所要求的。根据您的问题，我不太确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T04:20:36.197

该`Visibility`属性不是布尔类型。您是否尝试将 childGridView.Visibility 绑定到 type 的属性`Visibility`？像这样：

```
private bool _showChildItems;
public Visibility showChildItems
{
    get
    {
        if (_showChildItems)
            return System.Windows.Visibility.Visible;
        else
            return System.Windows.Visibility.Collapsed;
    }
} 
```

# ios - 在索引 X 处获取的对象有一个乱序的部分名称'X。对象必须按部分名称排序'

> ID：14421481
> 
> 赞同：0
> 
> 时间：2013-01-20T03:43:35.067
> 
> 标签：ios, objective-c

我知道这已被各种问题所涵盖，但我无法弄清楚这一点。

据我所知，我的设置是正确的。我的第一个排序描述符`sectionNameKeyPath`完全匹配。

我的客户很少遇到这种崩溃，可能是因为它不在通常打开那么长时间的屏幕上。因为崩溃很少见，所以我根本无法重现它。

它在 viewWillAppear->table reloadData->numberOfSectionsInTableView->accessor for nsfetchedresultscontroller 执行 fetch 时崩溃。

它总是记录给我的崩溃报告者的相同错误消息，但编号不同： **索引 9 处的已获取对象有一个乱序部分名称 '2。对象必须按部分名称排序'**

我使用 statusId 字段，它始终是 1-5 的数字。

代码：

```
- (NSFetchedResultsController *)unitsFetchedResultsController
{
    if (unitsFetchedResultsController != nil) {
        return unitsFetchedResultsController;
    }

    // SELECT * from Unit
    NSFetchRequest* fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Unit" inManagedObjectContext:self.guestCard.managedObjectContext];
    [fetchRequest setEntity:entity];
    // make this more defensive by limiting the status ids (1-14ish are valid on the backend, we only display these) 
    NSPredicate *availablePredicate = [NSPredicate predicateWithFormat:@"available = 1"];
    [fetchRequest setPredicate:availablePredicate];
    // ORDER BY ready DESC, availableDate ASC  (ATGT - must sort by 'ready' first or else 'sectionNameKeyPath' in the NSFetchedResultsController won't work)
    NSSortDescriptor* readySortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"statusId" ascending:YES];
    NSSortDescriptor* bedroomsSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"floorplan.bedrooms" ascending:YES];
    NSSortDescriptor* bathroomsSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"floorplan.baths" ascending:YES];
    NSSortDescriptor* availableDateSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"availableDate" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObjects:readySortDescriptor, bedroomsSortDescriptor, bathroomsSortDescriptor, availableDateSortDescriptor, nil]];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.guestCard.managedObjectContext sectionNameKeyPath:@"statusId" cacheName:@"unitsAvailable"];
    aFetchedResultsController.delegate = self;
    self.unitsFetchedResultsController = aFetchedResultsController;

    // Clean up
    [aFetchedResultsController release];
    [fetchRequest release];

    NSError *error = nil;
    if (![[self unitsFetchedResultsController] performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        [CoreDataErrorWriter writeCoreDataErrorToFile:error];

        perimeterAppDelegate *appDelegate = APP_DELEGATE;
        [appDelegate showCoreDataError];

        [NSException raise:@"Core Data Error" format:@"Core Data Error in %@", NSStringFromClass([self class])];
    }

    return self.unitsFetchedResultsController; // I recognize I should just return the iVar, but not the problem.
} 
```

# android - 如何在 Qualcomm 的 Vuforia AR for android 中启动我自己的示例？

> ID：14421485
> 
> 赞同：1
> 
> 时间：2013-01-20T03:44:35.643
> 
> 标签：android, augmented-reality, vuforia

大家好，我已经在 android 中启动了增强现实应用程序。我已经看过很多框架，但我正在关注 VUforia 开发人员站点。在该开发人员站点中，他们提供了一些示例。我已经运行了该示例，但我的问题是如果我想开始我自己的示例如何开始开发。任何人都可以帮助我。

谢谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:38:26.890

首先尝试分享您想从这些样本中制作的内容。该项目中有六个样本。对于理解和开发，最有帮助的基本示例是

```
ImageTarget Project 
```

通过这个项目，您可以更改数据集并加载您自己的数据集，而不是茶壶。您还可以在此示例项目中在触摸时应用缩放、平移和旋转。

之后可以`Virtual Button Project`帮助您进行虚拟交互，您甚至可以将其从虚拟触摸交互转换为物理触摸交互。

有一个项目，`Video playback project`您可以使用它来随机加载您自己的视频或图像。这取决于你想从什么开始。您的所有起点在所有 6 个项目中都可用

# actionscript-3 - 如何访问不同函数中的字符串？

> ID：14421487
> 
> 赞同：0
> 
> 时间：2013-01-20T03:45:01.220
> 
> 标签：actionscript-3, flash, actionscript

如何访问不同函数内的字符串？我需要访问 myArrayOfLines。

```
public var myTextLoader:URLLoader = new URLLoader;

myTextLoader.addEventListener(Event.COMPLETE, GameEnter.onLoaded) //GameEnter is the document class
myTextLoader.load(new URLRequest("Test.txt")); //loads the text file Test.txt

public static function onLoaded(e:Event):void 
{
    var myArrayOfLines:Array = e.target.data.split(/\n/); //splits it up every new line
    trace(myArrayOfLines); //trace the text in Test.txt
    //Test.txt contains the word "Test"
}

public function foo()
{
    //how do i access myArrayOfLines? Example below
    //Name.text = ""+myArrayOfLines; DOES NOT WORK
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:54:12.217

只需在 onLoaded 函数之外定义变量。然后可以在其他地方访问它：

```
var myArrayOfLines:Array;

public function onLoaded(e:Event):void 
{
    myArrayOfLines = e.target.data.split(/\n/); //splits it up every new line
    //...etc
}

public function foo()
{
    //display first item in array
    Name.text = ""+myArrayOfLines[0];
} 
```

# javascript - 使翻转图像向左弹出

> ID：14421489
> 
> 赞同：0
> 
> 时间：2013-01-20T03:45:25.860
> 
> 标签：javascript, position, rollover

我有一个简单的翻转脚本，我想用它来使个人资料拇指变大，这样你就可以真正看到这个人的脸。
`Problem is when the image expands it is throwing off page layout`. 有没有办法让图像的右上角保持不变，但向上和向左扩展覆盖旧图像以及它需要覆盖的任何其他内容？

感谢您的建议。

```
<tr>
<td>Joe Smith</td>
<td>
<a href="detail.html" onmouseover="document.pic.src='images/smallpic.gif'" onmouseout="document.pic.src='images/bigpic.gif'">
<img src="images/bigpic.gif" width="147" height="82" border="0" name="pic" alt="pic" />
</a>
</td>
</tr> 
```

下一个人...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:53:15.690

您还必须`position , height & width`在 mouseover 和 mouseout 上设置图像。您也
可以`thumbPopup`在 jquery 中使用实用程序，例如这里..[链接](http://home.comcast.net/~littlemoe85/thumbhover/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:42:19.263

在您的 jsfiddle 中，您不能向上和向左移动，因为没有空间可以去那里。

这是一些使用固定值而不是计算它们的代码，如果您希望使用拇指使其变得复杂，那么您应该预加载加载图像，当鼠标过度加载大图像/显示加载以及大图像时加载设置原始图像的src并重做样式。

```
<!DOCTYPE html>
<html>
<head>
<script>
function expand(obj){
    obj.style.position="relative";
    obj.style.left="-100px";
    obj.style.top="-100px";
    obj.style.width="200px";
    obj.style.height="200px";
}
function smaller(obj){
    obj.style.position="static";
    obj.style.width="100px";
    obj.style.height="100px";
}
</script>
</head>
<body>
<table>
<tbody>
<tr>
    <td colspan=2 style="height:150px">
        <p>Some text here Some text here Some text here Some text here 
        Some text here Some text here Some text here Some text here </p>
    </td>
</tr>
<tr>
    <td style="width:200px"></td>
    <td>
        <div style="width:100px;height:100px" id="needThisContainer">
            <img src="picture.jpg" style="width:100px;height:100px" 
                onmouseover="expand(this);" 
                onmouseout="smaller(this)"/>
        </div>
    </td>
</tr>    
</tbody>    
</table> 
```

# hadoop - 使用 importtsv 将文本文件导入 HBase

> ID：14421493
> 
> 赞同：0
> 
> 时间：2013-01-20T03:46:17.263
> 
> 标签：hadoop, import, hbase

# 问题：

我正在尝试使用文档中的[此](http://hbase.apache.org/book.html#importtsv.example)示例将数据从文本文件导入 HBase 数据库。

# 配置

HBase 版本： `hbase-0.94.4`.

我的安装是`Standalone`（非分布式或伪分布式）。

# 重现错误

最初，它在 HDFS 上创建 StoreFiles，以及一个名为 的空表`datatsv`，使用：

```
HADOOP_CLASSPATH=`${HBASE_HOME}/bin/hbase classpath` ${HADOOP_HOME}/bin/hadoop \
jar /usr/local/hbase/hbase-0.94.4.jar importtsv \
-Dimporttsv.columns=HBASE_ROW_KEY,d:c1,d:c2 \
-Dimporttsv.bulk.output=/user/vm1/outputfile  datatsv /user/vm1/myfile.txt 
```

然后，CompleteBulkLoad 方法将数据从 StoreFile 加载到表中：

```
hbase org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles \
/user/vm1/outputfile datatsv 
```

以下命令与上述命令具有相同的输出：

```
HADOOP_CLASSPATH=`${HBASE_HOME}/bin/hbase classpath` ${HADOOP_HOME}/bin/hadoop \
jar /usr/local/hbase/hbase-0.94.4.jar completebulkload \
/user/vm1/outputfile datatsv 
```

任一命令的错误消息是：

```
ERROR mapreduce.LoadIncrementalHFiles: Unexpected execution exception during splitting
java.util.concurrent.ExecutionException: java.lang.IllegalStateException: The value of the hbase.metrics.showTableName conf option has not been specified in SchemaMetrics
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.groupOrSplitPhase(LoadIncrementalHFiles.java:333)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.doBulkLoad(LoadIncrementalHFiles.java:232)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.run(LoadIncrementalHFiles.java:699)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.main(LoadIncrementalHFiles.java:704)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
    at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.IllegalStateException: The value of the hbase.metrics.showTableName conf option has not been specified in SchemaMetrics
    at org.apache.hadoop.hbase.regionserver.metrics.SchemaMetrics.getEffectiveTableName(SchemaMetrics.java:607)
    at org.apache.hadoop.hbase.regionserver.metrics.SchemaMetrics.getInstance(SchemaMetrics.java:333)
    at org.apache.hadoop.hbase.regionserver.metrics.SchemaConfigured.getSchemaMetrics(SchemaConfigured.java:185)
    at org.apache.hadoop.hbase.io.hfile.HFileReaderV2.close(HFileReaderV2.java:441)
    at org.apache.hadoop.hbase.io.hfile.HFileReaderV2.close(HFileReaderV2.java:419)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.groupOrSplit(LoadIncrementalHFiles.java:410)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles$2.call(LoadIncrementalHFiles.java:323)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles$2.call(LoadIncrementalHFiles.java:321)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.hbase.mapreduce.Driver.main(Driver.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.IllegalStateException: java.lang.IllegalStateException: The value of the hbase.metrics.showTableName conf option has not been specified in SchemaMetrics
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.groupOrSplitPhase(LoadIncrementalHFiles.java:344)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.doBulkLoad(LoadIncrementalHFiles.java:232)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.run(LoadIncrementalHFiles.java:699)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.main(LoadIncrementalHFiles.java:704)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
    at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
    ... 10 more
Caused by: java.lang.IllegalStateException: The value of the hbase.metrics.showTableName conf option has not been specified in SchemaMetrics
    at org.apache.hadoop.hbase.regionserver.metrics.SchemaMetrics.getEffectiveTableName(SchemaMetrics.java:607)
    at org.apache.hadoop.hbase.regionserver.metrics.SchemaMetrics.getInstance(SchemaMetrics.java:333)
    at org.apache.hadoop.hbase.regionserver.metrics.SchemaConfigured.getSchemaMetrics(SchemaConfigured.java:185)
    at org.apache.hadoop.hbase.io.hfile.HFileReaderV2.close(HFileReaderV2.java:441)
    at org.apache.hadoop.hbase.io.hfile.HFileReaderV2.close(HFileReaderV2.java:419)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles.groupOrSplit(LoadIncrementalHFiles.java:410)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles$2.call(LoadIncrementalHFiles.java:323)
    at org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles$2.call(LoadIncrementalHFiles.java:321)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

# 问题

我错过了什么吗？

搜索了邮件列表，在免费节点上询问，并没有找到答案。`hbase.metrics.showTableName`还尝试使用以下方法设置 hbase 的属性（并重新启动它）： `false`

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:50:19.033

不久前，当我尝试使用 Java API 批量加载数据时，我遇到了一个非常相似的问题。[我在这里](https://stackoverflow.com/questions/13883023/hbase-bulk-load-exeception/13912831#13912831)开了一个帖子。我必须在我的客户端应用程序中指定这一行，这解决了这个问题：`SchemaMetrics.configureGlobally(conf)`. 现在，您不使用 Java API，这行所做的只是在 .xml 配置中设置一个属性，因此您应该能够手动设置它。我会尝试这个：`hbase.metrics.showTableName`，默认情况下应该已经是`true`，但我会尝试将其设置为`true`显式。目前我正在研究 HBase 0.90（Hortonworks HDP 1.1 附带的那个），我什至不必再使用`SchemaMetrics.configureGlobally(conf)`了。也许这是 HBase 0.94 中的一个错误（或只是一种新方法）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T20:37:31.230

我询问的工具不再起作用。因此，我编写了一些 Java 代码，使用 HBase API 使用 MapReduce 进行批量加载。

Github 链接：[HBase 批量加载](https://github.com/Paschalis/HBase-Bulk-Load-Example)

# objective-c-runtime - 触发方法调用的消息描述

> ID：14421494
> 
> 赞同：0
> 
> 时间：2013-01-20T03:46:25.967
> 
> 标签：objective-c-runtime

Objective-C 运行时是否允许从该方法本身中获取触发方法调用的消息的描述？

例如，如果我有一个名为： -(Foobar)doMyStuff; . . 是否有可能从该方法中得到类似的东西：

```
//This would return @"doMyStuff"
NSString* selectorName = [foobar nameOfMessageThatTriggeredMyInvocation]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:17:12.943

乔希的回答是完全正确的，我还可以补充一点，这对记录很有用。

```
Class myClass = object_getClass(self);
NSLog(@"I am in %c[%@ %s]", class_isMetaClass(myClass) ? '+' : '-', myClass, sel_getName(_cmd)); 
```

“我在 -[AppDelegate 应用程序：didFinishLaunchingWithOptions:]”

虽然它可能更容易使用 -

```
NSLog(@"So pretty %s", __PRETTY_FUNCTION__); 
```

“太漂亮了 -[AppDelegate 应用程序：didFinishLaunchingWithOptions:]”

它在编译时被插入，当然更快。如果您执行任何动态方法解析，尽管使用 _cmd 非常有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:57:39.693

是的。每个方法都有其选择器作为隐藏参数传入。这是第二个参数，在 之后`self`，它被命名为`_cmd`：

```
NSString * selectorName = NSStringFromSelector(_cmd); 
```

这就是为什么`objc_msgSend(id self, SEL _cmd, ...)`看起来它的方式，以及为什么，如果你构造一个`NSInvocation`，你在设置你的参数时从索引 2 开始。

# xcode - Xcode 自动合成的属性导致错误

> ID：14421495
> 
> 赞同：1
> 
> 时间：2013-01-20T03:46:41.263
> 
> 标签：xcode, properties, xcode4.5

Xcode 有关于`Autosynthesized property 'ViewController'`和相似的问题，`'window'`并告诉我属性是在 BSAppDelegate.h 中声明的。尽管这里有几个人试图解释下划线问题，但我不知道如何解决这个问题。当我省略下面提到 ViewController 或窗口的任何行时，我的应用程序将无法编译。

```
//
//  BSAppDelegate.h
//

#import <UIKit/UIKit.h>

@class BSViewController;

@interface BSAppDelegate : UIResponder <UIApplicationDelegate>{
    UIWindow *window;
    BSViewController *viewController;
}

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) BSViewController *viewController;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:53:46.407

当你声明属性时，你不需要在实例变量部分也声明相同的变量。换句话说，这应该没问题：

```
@interface BSAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) BSViewController *viewController;

@end 
```

如果您的应用程序无法像这样编译，您是否有第二个@interface 部分和/或您在实现文件中是否有@synthesize 语句？从 Xcode 4.4 开始，您不再需要 @synthesize 语句，但如果您没有显式合成属性，那么 Xcode 将使用前面的下划线（_window 或 _viewController）合成它们。这是一个包含更多信息的链接：[Automatic Property Synthesis With Xcode 4.4](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)。

# php - PHP 表单效果很好，但没有文件扩展名

> ID：14421498
> 
> 赞同：0
> 
> 时间：2013-01-20T03:47:05.487
> 
> 标签：php, html, forms, file, attachment

当我使用我制作的这个表格时，它会完美地发送文件，除了......它没有扩展名。我知道我发送的扩展名，所以我能够看到文件没有损坏，但我的客户不知道他们得到了什么扩展名（有 5 种可能性），这将是不专业的。我怎样才能做到这一点，以便向客户发送具有正确扩展名的文件。正确的名称也很好，但不是强制性的。

HTML：

```
</p>
<title>The Legend Maker - submit a story (test server)</title>
<link href="/CSS/CSS.css" rel="stylesheet" type="text/css">

<div align="center">
  <p><span class="linkText"><a href="/index.html">Home</a> <a href="/contact-us.php">Contact Us</a> <a href="/payments.html">Payments</a></span> </p>
  <p>&nbsp;</p>
  <h2 class="headingText">&nbsp;</h2>
  <h2 class="headingText">&nbsp;</h2>
  <h2 class="headingText">&nbsp;</h2>
  <h2 class="headingText">(for testing purposes)</h2>
  <h2 class="headingText">Submit a story test server</h2>
</div>
<form method="post" action="scripts/email.php" enctype="multipart/form-data">
<table width="476" height="468" border="0" cellpadding="0" cellspacing="2">
<tr>
<td width="23%" height="25" class="bodytext"><p align="center">Your Name:</p></td>
<td width="77%"><input name="name" type="text" id="name" size="32"></td>
</tr>
<tr>
<td height="25" class="bodytext"><p align="center">Email Address:</p></td>
<td><input name="email" type="text" id="email" value="you@example.com" size="32"></td>
</tr>
<tr>
<td height="44" class="bodytext"><p align="center">Recipient's Gender:</p></td>
<td><label>
  <select name="gender" id="gender">
    <option value="male" selected="selected">Male</option>
    <option value="female">Female</option>
    <option value="other">Other</option>
        </select>
</label></td>
</tr>
<tr>
<td height="44" class="bodytext"><p align="center">Recipient's Name:</p>  </td>
<td align="left" valign="top"><input name="recipientname" type="text" id="recipientname" value="ex: Jonny" size="32" /></td>
</tr>
<tr>
  <td height="44" class="bodytext"><p align="center">Recipient's Interests or Hobbies:</p></td>
  <td align="left" valign="top"><textarea name="hobbies" cols="50" rows="6" id="hobbies">ex: horseback riding, biking...</textarea></td>
</tr>
<tr>
  <td class="bodytext"><p align="center">Recipient's Age:</p></td>
  <td align="left" valign="top"><input name="age" type="text" id="age" size="5" maxlength="3" /></td>
</tr>
<tr>
  <td class="bodytext"><p align="center">Other Important Information:</p></td>
  <td align="left" valign="top"><textarea name="otherinfo" cols="50" rows="7" id="otherinfo">ex: other things the recipient may enjoy or their favorite superhero
Please specify information you are giving us also:
don't do this: superman
submit it like this: favorite superhero: superman</textarea></td>
</tr>
<tr>
  <td class="bodytext"><p align="center">Images You Would Like To Include In Story:</p></td>
  <td align="left" valign="top"><label>
    <br />
    <input type="file" name="file" id="file" />
  </label></td>
</tr>
<tr>
  <td class="bodytext"><p align="center">&nbsp;</p></td>
  <td align="left" valign="top"><input type="submit" name="Submit" value="Send" /></td>
</tr>
</table>
</form> 
```

PHP：

```
 <?php
    require_once '../PHPMailer_5.2.2/class.phpmailer.php';

    $name = $_POST['name'] ;
    $email = $_POST['email'] ;
    $gender = $_POST['gender'] ;
    $recipientname = $_POST['recipientname'] ;
    $hobbies = $_POST['hobbies'] ;
    $age = $_POST['age'] ;
    $otherinfo = $_POST['otherinfo'] ;
    $file = $_POST['file'] ;
    $body = "Name: $name
    Email: $email
    Gender: $gender
    Recipient's name: $recipientname
    Hobbies: $hobbies
    Age: $age
    Other Information: $otherinfo";

    $mail = new PHPMailer(true); //defaults to using php "mail()"; the true param means it will throw exceptions on errors, which we need to catch

    try {
      $mail->AddAddress('***erna@yahoo.com', 'Michael ***');
      $mail->SetFrom($email, $name);
      $mail->AddReplyTo($email, $name);
      $mail->Subject = "Message From Legendmaker Customer: $name";
      $mail->Body = $body;
      $mail->AddAttachment($_FILES['file']['tmp_name']);      // attachment
      $mail->Send();
      echo "Story Request Sent Successfully</p>\n";
    } catch (phpmailerException $e) {
      echo $e->errorMessage(); //Pretty error messages from PHPMailer
    } catch (Exception $e) {
      echo $e->getMessage(); //Boring error messages from anything else!
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:53:57.313

我检查了 PHPMailer 的源代码，这就是我为函数签名找到的。

```
AddAttachment($path, $name = '', $encoding = 'base64', $type = 'application/octet-stream') 
```

要解决您的问题，您应该做的就是：

```
$mail->AddAttachment($_FILES['file']['tmp_name'], $_FILES['file']['name']); 
```

# javascript - D3js 仪表图

> ID：14421499
> 
> 赞同：1
> 
> 时间：2013-01-20T03:47:14.350
> 
> 标签：javascript, graph, d3.js

我开始使用 d3js [http://d3js.org](http://d3js.org)，一开始我需要的只是仪表图标。它显示拍卖结束的时间以及拍卖的状态。页面上会有更多图标。这是小提琴[http://jsfiddle.net/TdWtC/](http://jsfiddle.net/TdWtC/)

第一次加载没问题，但我需要更新方面的帮助。更新时都必须更新背景和指针。主要问题是更新背景重叠指针。可能我做错了，但我定制了类似的片段，无法继续。

这是背景与指针重叠的部分

```
this.body.append("svg:path")
        .style("fill", color)
        .attr("d", d3.svg.arc()
        .startAngle(this.valueToRadians(start))
        .endAngle(this.valueToRadians(end))
        .innerRadius(0.4 * this.config.raduis)
        .outerRadius(this.config.raduis))
        .attr("transform", function() { return "translate(" + self.config.cx + ", " + self.config.cy + ") rotate(270)" }); 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:25:16.707

问题是您的仪表带不包含在它们自己的`g`元素中。任何对更新的调用都会在指针元素之后附加波段，*从而*`g`出现在它的顶部。您可以通过将带区放入附加在for 指针之前的自己的`g`元素来轻松解决此问题。`g`

我在[这里](http://jsfiddle.net/TdWtC/3/)进行了这些更改，并对您的代码进行了一些修改——您不需要将波段单独传递给 d3，它可以同时绘制它们。请注意，我只处理`.enter()`选择（即新元素），因为您没有更改`update()`调用中的任何数据。要使其适用于更改的数据，您需要为`.exit()`选择（删除元素，可能只是简单地删除元素`segments.exit().remove()`）和更新的选择（可能是您用来设置选择的开始和结束角度的代码）实现一个处理程序`.enter()`。

# ruby-on-rails - 在我的表单中与相关模型发生冲突

> ID：14421505
> 
> 赞同：0
> 
> 时间：2013-01-20T03:49:54.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, model

我有一个表单，用户可以在其中添加一个新项目，作为其中的一部分，他们为该项目选择一个类别。该项目可以是存款或账单，所以我想要两个不同的列表，他们可以从类别中选择，因为它们以相同的方式拆分。这是我的 ledgeritem 和 itemcategory 模型

```
class Ledgeritem < ActiveRecord::Base
  attr_accessible :amount, :bankaccount_id, :deposit, :itemcategory_id, :name, :processed, :transactiondate

  attr_accessor           :balance
  attr_accessible         :balance

  belongs_to  :bankaccount 
  belongs_to  :itemcategory

end

class Itemcategory < ActiveRecord::Base
  attr_accessible :deposit, :itemcategory_id, :name, :user_id

  has_many  :ledgeritems
end 
```

我的控制器中有这个。我最初在我的模型中使用它，但将其移至控制器以查看是否是问题所在。

```
@bill_categories = Itemcategory.all.where("deposit = 0")
@deposit_categories = Itemcategory.all.where("deposit = 1") 
```

这就是我在表单中使用它的方式

```
<%= f.label :itemcategory_id %><br />
<%= f.select :itemcategory_id, @bill_categories %> 
```

这是我得到的错误

```
can't convert Symbol into Integer 
```

我很确定这与我的 f.select 的格式有关，我只是不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:54:30.837

您需要为`f.select`. 您可以为此使用[options_from_collection_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_from_collection_for_select)：

```
<%= f.select :itemcategory_id, options_from_collection_for_select(@bill_categories, 'id', 'name') %> 
```

这将提供对 in 中的对象进行`value`设置的选项，并且显示的文本将是in 中对象的属性。`id``@bill_categories``name``@bill_categories`

# matlab - 在 Matlab 中可视化多帧的 DICOM 文件

> ID：14421506
> 
> 赞同：1
> 
> 时间：2013-01-20T03:50:24.333
> 
> 标签：matlab, dicom

我通过 TumorSim 生成了这个脑肿瘤，并使用 gdcm2vtk 工具将其从 .mha 转换为 .dcm。

[https://www.dropbox.com/s/70gwje0a8pb42tf/T1Gad.dcm](https://www.dropbox.com/s/70gwje0a8pb42tf/T1Gad.dcm)

我现在想在 Matlab 2012a 中将其可视化，我尝试了这个，遵循脚踝演示（基于单帧 dicom 文件）：

```
 info = dicominfo('T1Gad.dcm');
   image_data = dicomread('T1Gad.dcm');

   imtool(image_data,'DisplayRange',[]); 
```

我收到以下错误：

```
 Error using imageDisplayValidateParams>validateCData (line 117)
  Unsupported dimension.

  Error in imageDisplayValidateParams (line 31)
  common_args.CData = validateCData(common_args.CData,image_type);

  Error in imtool/addImageToImtool (line 323)
         common_args = imageDisplayValidateParams(common_args);

  Error in imtool (line 270)
            addImageToImtool(varargin{:});

  Error in mostrarDicom (line 12)
  imtool(image_data,'DisplayRange',[]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:09:38.310

首先，`info`这是一个糟糕的名称选择，因为它会覆盖 matlab 的`info`. 其次，最重要的是，`image_data`是一个 4-D 矩阵。要查看切片，您可以尝试：

```
n=40 ; %slice number
imshow(image_data(:,:,n), []) 
```

# c++ - 按下 2 个箭头键时实现对角线移动（使用 SFML）

> ID：14421508
> 
> 赞同：1
> 
> 时间：2013-01-20T03:50:55.397
> 
> 标签：c++, sfml

我认为不需要任何代码演示，因为它不像 C++ 那样多 SFML。问题是，我如何通过在屏幕上播放的东西来实现流畅的移动？例如，我在屏幕上显示一个正方形，并将它的位置变量设置为我之前定义的整数，以便我可以用箭头键移动它。当我按下向变量添加值的键时，如果我只使用一个键，它会正常工作，但是在按下两个键时，它只会添加到第二次按下的值。我将如何使它对角线移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-16T20:40:50.243

接受的答案不是那么好。

您最好分别存储 x 和 y 移动，检查所有已按下的键，然后分配实际移动。

```
x = 0.0;
y = 0.0;
speed = 1.0;

if (key.up())
{
  y -= speed;
}

if (key.down())
{
  y+= speed;
}

if (key.left())
{
  x -= speed;
}

if (key.right())
{
  x+= speed;
}

Move(x, y); 
```

那应该让你开始。

当你深入研究它时，你会注意到这段代码有一个小怪癖——如果你沿对角线移动，你会发现你移动得太快了，而且有点作弊！这是因为增加了两个速度单位，而不仅仅是一个。您可能认为解决方案是将每个值减半，但这样您就太迟钝了。当您沿对角线移动时，您需要考虑三角形和毕达哥拉斯定理 - 您需要通过将两个方向除以根 2 来进行补偿。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T04:03:51.597

伪代码

```
if (key.up())
{
    if (key.right())
        direction = up_right;
    else if (key.left())
        direction = up_left;
    else
        direction = up;
}
else if (key.down())
{
    etc... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-14T22:29:07.537

这对我有用，但就像你说的那样，玩家可以通过拥有更现代的计算机获得不公平的优势。我取了变量 x 和 y 的平方根，但我不确定这是否能防止任何形式的不必要作弊。

```
float x = 0.0;
float y = 0.0;
float speed = 0.35;

x = std::sqrt(std::pow((double)x, 2) + std::pow((double)y, 2));
y = std::sqrt(std::pow((double)x, 2) + std::pow((double)y, 2));

if (sf::Keyboard::isKeyPressed(sf::Keyboard::Up))
{
        source.y = Up;
        y -= speed;
}

if (sf::Keyboard::isKeyPressed(sf::Keyboard::Down))
{
        source.y = Down;
        y += speed;
}

if (sf::Keyboard::isKeyPressed(sf::Keyboard::Left))
{
        source.y = Left;
        x -= speed;
}

if (sf::Keyboard::isKeyPressed(sf::Keyboard::Right))
{
        source.y = Right;
        x += speed;
}

playerImage.move(x, y); 
```

我的事件循环之后还有一个实例，它将帧计数器与时钟和帧速度进行比较。我的问题是，这个块是否会对上述代码产生影响，可能会阻止作弊，如果是这样，我会删除 sqrt 语句吗？

```
frameCounter = (updateFrame) ? frameCounter + frameSpeed * clock.restart().asSeconds() : 0;

if(frameCounter >= switchFrame)
{
        frameCounter = 0;
        source.x++;
        if(source.x * 32 >= pTexture.getSize().x)
                source.x = 0;
} 
```

# google-fusion-tables - 合并视图，反之亦然？

> ID：14421512
> 
> 赞同：0
> 
> 时间：2013-01-20T03:52:10.967
> 
> 标签：google-fusion-tables

我认为您不能从视图中合并是否正确，反之亦然？我的用例是这样的：

我有一个可以处于活动或不活动状态的条目表。我想根据列值在地图上显示活动的图标。所以我的计划是只查看活动条目，然后与从列值到标签代码的查找表合并。从概念上讲，相反的顺序也可以。但这些都没有真正起作用。我根本无法从合并中创建视图，当我尝试从视图中合并时，视图表合并列选择器显示为灰色，因此我无法选择它的合并列。

难道这根本行不通吗？还是我错过了正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:33:35.490

不幸的是，您没有遗漏任何东西——您不能与视图合并或创建合并视图。您可以获得的最接近的方法是进行合并，添加适当的过滤器，将过滤后的结果下载到 CSV，然后重新导入到新表中。

或者，您可以进行合并并添加一个带有活动值过滤器的地图选项卡。根据您希望如何使用数据，这可能就足够了；例如，您可以嵌入过滤后的地图或在 FusionTableLayer 调用中使用查询。

# php - preg_replace 函数中的 if 语句

> ID：14421522
> 
> 赞同：1
> 
> 时间：2013-01-20T03:53:58.327
> 
> 标签：php, if-statement, preg-replace

我在拆分字符串时遇到了麻烦，如下所示：什么是保留文本的文本，什么是要在锚点中转换的链接，什么是来自 youtube 的链接，以将其转换为 iframe 标记。

我的脚本如下所示：

```
$string='This is a link www.dinamomania.net this is a http://www.youtube.com/watch?v=U9LB6qGvdpQ';
echo makelink($string);

 function makeLink($string){

 /*** make sure there is an http:// on all URLs ***/
 $string = preg_replace("/([^\w\/])(www\.[a-z0-9\-]+\.[a-z0-9\-]+)/i", "$1http://$2",$string);
 /*** make all URLs links ***/

$string = preg_replace('/([\w]+:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i','<a target="_blank" href="$1">$1</A>',$string);

$string = preg_replace('/((http|ftp)\:\/\/)?([w]{3}\.)?(youtube\.)([a-z]{2,4})(\/watch\?v=)([a-zA-Z0-9_-]+)(\&feature=)?([a-zA-Z0-9_-]+)?/', '<iframe style= "margin:15px 0 15px 0;display:block;" width="500" height="300" src="http://www.youtube.com/embed/$7" frameborder="0" allowfullscreen></iframe>',$string);

 /*** make all emails hot links ***/

 $string = preg_replace("/([\w-?&;#~=\.\/]+\@(\[?)[a-zA-Z0-9\-\.]+\.([a-zA-Z]{2,3}[0-9]{1,3})(\]?))/i","<A HREF=\"mailto:$1\">$1</A>",$string);

 return $string;

}

} 
```

它的所有工作方式都应该是这样，我在 iframe 之前得到一个像这样的锚点“>”，那是因为它首先将链接链接到锚点，然后是 youtube 格式的 iframe。所以它是一个锚点的内框。

我正在寻找一个 if 语句来做这样的事情：

```
if( is link from youtube ) {
    // do the iframe part 
} else {
    // do the anchor part
} 
```

任何帮助/建议将不胜感激。谢谢 ！

我带来了这样的东西：

```
 if (preg_match("/((http|ftp)\:\/\/)?([w]{3}\.)?(youtube\.)([a-z]{2,4})(\/watch\?v=)([a-zA-Z0-9_-]+)(\&feature=)?([a-zA-Z0-9_-]+)?/", $string))
    {
$string = preg_replace('/((http|ftp)\:\/\/)?([w]{3}\.)?(youtube\.)([a-z]{2,4})(\/watch\?v=)([a-zA-Z0-9_-]+)(\&feature=)?([a-zA-Z0-9_-]+)?/', '<iframe style= "margin:15px 0 15px 0;display:block;" width="500" height="300" src="http://www.youtube.com/embed/$7" frameborder="0" allowfullscreen></iframe>',$string);
    } else {
$string = preg_replace('/([\w]+:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i','<a target="_blank" href="$1">$1</A>',$string);
    } 
```

但它又在做我的 iframe 部分，并且没有任何锚点发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:04:50.960

**将此模式**用于URL

```
preg_replace('/([^\'"])((ht|f)tps?:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i',
    '$1<A target="_blank" href="$2">$2</A>',$string); 
```

并将**放置语句****放在标签放置`IFRAME``A`**语句之前。

```
 /*** make all the IFrame links ***/
$string = preg_replace(
'/((http|ftp)\:\/\/)?([w]{3}\.)?(youtube\.)([a-z]{2,4})(\/watch\?v=)([a-zA-Z0-9_-]+)(\&feature=)?([a-zA-Z0-9_-]+)?/', 
'<iframe style= "margin:15px 0 15px 0;display:block;" width="500" height="300" src="http://www.youtube.com/embed/$7" frameborder="0" allowfullscreen></iframe>',
$string);

/*** make all URLs links ***/
$string = preg_replace('/([^\'"])((ht|f)tps?:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i',
        '$1<A target="_blank" href="$2">$2</A>',$string); 
```

看看[它是如何工作](http://codepad.viper-7.com/Dt5UQ8)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T03:56:58.800

您可以使用正则表达式方法：

```
if (preg_match("/http://(?:www\.)?youtu(?:be\.com/watch\?v=|\.be/)(\w*)(&(amp;)?[\w\?=]*)?/i", $link))
{
    // It's a Youtube link!
} 
```

但也可以使用这种方法：

```
$parsedlink = parse_url($link);

if ($parsedlink['host'] == 'www.youtube.com')
{
    // It's a Youtube link!
} 
```

# windows - 在.net windows服务和应用程序之间发送和接收数据的最简单方法是什么

> ID：14421530
> 
> 赞同：2
> 
> 时间：2013-01-20T03:55:11.990
> 
> 标签：windows, vb.net, service

我有一个使用服务加密文件的软件。GUI 序列化包含文件路径的哈希表，然后使用该`ExecuteCommand`方法通知服务。该服务反序列化哈希表并处理文件。

我需要该服务以某种方式告诉 GUI 它已完成处理，以便 GUI 可以显示某种形式的通知。服务将数据发送到 GUI 的最佳方式是什么？此外，如果有人可以替代我当前将文件路径发送到服务的方法，我愿意接受建议。

编辑：这就是我现在正在做的事情：

```
Dim sk = My.Computer.Registry.LocalMachine.CreateSubKey("SOFTWARE\AesESvc")
Dim scAES As New ServiceProcess.ServiceController("AesESvc")

sk.SetValue("Processing", 1, Microsoft.Win32.RegistryValueKind.DWord)

scAES.ExecuteCommand(132)

Do While (sk.GetValue("Processing") = 1)
    sblProcess.Text = "Processing"
Loop

Dim total As Int32 = lvwLoad.Items.Count - sk.GetValue("ErrorsInLastProcess")

If total > 1 Then
    sblProcess.Text = (total & " items successfully processed." & vbCrLf & sk.GetValue("ErrorsInLastProcess") & " error(s)")
ElseIf total = 1 Then
    sblProcess.Text = (total & " item successfully processed." & vbCrLf & sk.GetValue("ErrorsInLastProcess") & " error(s)")
ElseIf total < 1 Then
    sblProcess.Text = ("None of the items could be processed." & vbCrLf & sk.GetValue("ErrorsInLastProcess") & " error(s)")
End If 
```

服务`Processing`完成后将注册表值更改为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:57:10.027

命名管道应该可以正常工作。这里有一些信息：

[http://msdn.microsoft.com/en-us/library/bb546085.aspx](http://msdn.microsoft.com/en-us/library/bb546085.aspx)

# sql - 仅当 varchar 包含有效日期时，如何将其转换为日期？

> ID：14421534
> 
> 赞同：0
> 
> 时间：2013-01-20T03:56:10.717
> 
> 标签：sql, sql-server, sql-server-2008

我正在寻找关于 SQL Server Management Studio 的我认为非常有用的信息。

我有一个表，其中有一列`varchar`存储日期、数字和字符串的类型。

这些日期以以下格式存储：

```
dd/mm/aaaa 
```

我有一个搜索表单匹配行的查询，一个要求是用户必须能够在日期（时间段）之间搜索。

如果我只有约会就没有问题了，我可以使用查询：

```
where convert(datetime,a.valor,103) between '01/01/2013' and '03/01/2013' 
```

问题是当到达值不是日期的行时，此查询失败。

由于可能有数千行要搜索，因此执行该查询的有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T04:08:44.987

典型的答案是添加一个 WHERE 子句：

```
WHERE ISDATE(a.valor) = 1 
```

但是，由于以下几个原因，这在您的情况下是有问题的：

1.  `ISDATE()`根据服务器的区域设置、用户的语言或日期格式选项等，不一定符合您想要的方式。例如：

    ```
    SET DATEFORMAT dmy;
    SELECT ISDATE('13/01/2012'); -- 1

    SET DATEFORMAT mdy;
    SELECT ISDATE('13/01/2012'); -- 0 
    ```

2.  您无法真正控制 SQL Server 将尝试执行`CONVERT`过滤器之后的操作。

您甚至不能使用子查询或 CTE 来尝试将过滤器与 CONVERT 分开，因为 SQL Server*可以*按照它认为更有效的任何顺序优化查询中的操作。

例如，对于有限的样本，您可能会发现这样可以正常工作：

```
SET DATEFORMAT dmy;

SELECT valor, valor_date FROM (
  SELECT valor, valor_date = CONVERT(DATE, 
    CASE WHEN ISDATE(valor) = 1 THEN valor ELSE NULL END, 103)
  FROM dbo.mytable
  WHERE ISDATE(valor) = 1
) AS sub WHERE valor_date BETWEEN '01/01/2012' AND '01/03/2012'; 
```

但是我已经看到了这种结构的情况，其中 SQL Server 尝试首先评估过滤器，导致您当前遇到的相同错误。

* * *

几个更安全的解决方法：

* * *

添加计算列，例如

```
ALTER TABLE dbo.mytable ADD valor_date
  AS CONVERT(DATE, CASE WHEN ISDATE(valor) = 1 THEN valor 
    ELSE NULL END, 103); 
```

为了保护自己在运行时免受可能的误解，您应该在发出引用计算列的查询之前指定 dateformat，例如

```
SET DATEFORMAT dmy;
SELECT valor, valor_date FROM dbo.mytable WHERE ...; 
```

* * *

创建视图：

```
CREATE VIEW dbo.myview
AS
  SELECT valor, valor_date = CONVERT(DATE, 
    CASE WHEN ISDATE(valor) = 1 THEN valor ELSE NULL END, 103)
  FROM dbo.mytable
  WHERE ISDATE(valor) = 1; 
```

同样，您需要`SET DATEFORMAT`在查询视图时发出 a 。

* * *

使用临时表：

```
SELECT <cols>
INTO #foo
FROM dbo.mytable
WHERE ISDATE(valor) = 1;

SELECT <cols>, CONVERT(DATE, valor) FROM #foo WHERE ...; 
```

您可能仍希望使用它来保护自己免受用户设置`DATEFORMAT`之间的冲突。`ISDATE`

* * *

不，您不应该*尝试*使用另一个（现已删除）答案中建议的字符串模式匹配来验证您的字符串作为日期：

```
like '%__/%' or like '%/%' 
```

您将不得不在那里进行一些非常复杂且繁重的验证来处理所有有效日期，包括闰年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:54:13.880

您可以将该表与仅包含日期的表进行比较。每天创建一个永久表可能是值得的，但您可以使用 CTE（最多 32767 次递归，您可以到 1923 年）：

```
create table tmpT ( val nvarchar(255) )
go

insert into tmpT values ('01/01/2012')
insert into tmpT values ('jellybeans')
insert into tmpT values ('21/11/2002')
insert into tmpT values ('ice cream')
insert into tmpT values ('30/08/2012')
go
;

with dates  (d) as (
    select d = cast('1/19/2013' as datetime) -- quick way to drop hh:mm:ss
    union all
    select dateadd(dd, -1, d)
    from dates where d > '01/01/1990'
)
select *
From tmpt 
join dates 
    on convert(varchar, dates.d, 103) = tmpt.val
where d between '01/01/2013' and '01/03/2013'
option (maxrecursion 32767) -- max value: select datediff(dd, -32767, getdate()) = 1923 
```

ETA：是的，我坐在 sql 2005 前面，所以`date`我没有数据类型，但概念保持不变。

# julia - 将 Julia 中大小为 1*N 或 N*1 的 Matrix{T} 转换为 Vector{T} 的最有效方法是什么？

> ID：14421535
> 
> 赞同：26
> 
> 时间：2013-01-20T03:56:21.890
> 
> 标签：julia

将 Julia 中大小为 1*N 或 N*1 的 Matrix{T} 转换为 Vector{T} 的最有效方法是什么？

例如，说我有

```
a = [1,3,5]
b = a' 
```

`a`和都是`b`类型`Array{Int,2}`（即`Matrix{Int}`）。`a`转换和`b`输入`Array{Int,1}`（即）最有效的方法是什么`Vector{Int}`？

一种方法是：

```
a_vec = [x::Int for x in a]
b_vec = [x::Int for x in b] 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-20T15:50:23.397

您可以使用该`vec()`功能。它比列表理解更快，并且随着元素数量的增加而更好地扩展；）对于 1000x1 的矩阵：

```
julia> const a = reshape([1:1000],1000,1);

julia> typeof(a)
Array{Int64,2}

julia> vec_a = [x::Int for x in a];

julia> typeof(vec_a)
Array{Int64,1}

julia> vec_aII = vec(a);

julia> typeof(vec_aII)
Array{Int64,1} 
```

6.41e-6 seconds # 列表理解

**2.92e-7 秒 # vec()**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T22:20:30.580

`squeeze`如果矩阵是`1xN`or ，我会倾向于这样做`Nx1`：

```
squeeze(ones(3, 1))
squeeze(ones(1, 3)) 
```

不确定这是否比使用`vec`or更有效`reshape`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-16T16:50:35.090

vec() 更快

```
const a = reshape([1:1000],1000,1);
@time vec(a);
elapsed time: 6.914e-6 seconds (184 bytes allocated)
@time squeeze(a,2);
elapsed time: 1.0336e-5 seconds (248 bytes allocated) 
```

# c# - 进度条应反映选中的复选框数量

> ID：14421537
> 
> 赞同：0
> 
> 时间：2013-01-20T03:56:47.767
> 
> 标签：c#, winforms, checkbox, progress-bar

每次选中复选框时，我都希望能够以增量方式添加到进度条。因此，假设 4 个复选框中有 1 个是选中的，那么它将等于进度条的 25%。此外，如果您取消选中 4 个复选框之一，进度条将相应减少。这就是我所坚持的。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
  public partial class Form1 : Form
  {
    public Form1()
    {
        InitializeComponent();
    }

    private void progressBar1_Click(object sender, EventArgs e)
    {
        progressBar1.Minimum = 0;
        progressBar1.Maximum = 100;
        int num1 = progressBar1.Maximum / 4;
        int num2 = progressBar1.Maximum / 4;
        int num3 = progressBar1.Maximum / 4;
        int num4 = progressBar1.Maximum / 4;
        int numAns;
        numAns = num1 + num2 + num3 + num4;
        progressBar1.Value = numAns;
    }

    private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        if(checkBox1.Checked == true)
        {  

        }
        else if (checkBox1.Checked == false)
        {

        }
    }
    private void checkBox2_CheckedChanged(object sender, EventArgs e)
   {

    }
    private void checkBox3_CheckedChanged(object sender, EventArgs e)
    {

    }
    private void checkBox4_CheckedChanged(object sender, EventArgs e)
    {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T04:03:58.897

您可以对所有复选框使用相同的事件处理程序，而无需为 4 个复选框创建 4 种方法...

```
private const Int32 TOTAL_CHECKBOXES = 4;
private static Int32 s_Checks = 0;

private void OnCheckedChanged(object sender, EventArgs e)
{
    if (((CheckBox)sender).Checked)
        ++s_Checks;
    else
        --s_Checks;

    progressBar.Value = s_Checks * (progressBar.Maximum / TOTAL_CHECKBOXES);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T04:03:54.063

废弃 ProgressBar1_click，并为每个框简单地从 CheckedChanged 上的 ProgressBar1.Value 中添加（如果选中）或减去（如果没有）25。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T04:17:11.583

您可以将相同的事件连接到所有复选框。我将我的添加到列表中，因此如果您将来想添加更多，您可以简单地添加处理程序并将其添加到列表中，您就完成了。

```
public Form1()
{

    InitializeComponent();

    checkBox1.CheckedChanged += CheckedChanged_1;
    checkBox2.CheckedChanged += CheckedChanged_1;
    checkBox3.CheckedChanged += CheckedChanged_1;
    checkBox4.CheckedChanged += CheckedChanged_1;

    checkboxesToCount.AddRange(new CheckBox[] {checkBox1, checkBox2, checkBox3, checkBox4});

}

private void CheckedChanged_1(object sender, EventArgs e)
{
    progressBar1.Value = 100 * checkboxesToCount.Count((c) => { return c.Checked; }) / checkboxesToCount.Count;
} 
```

# ruby - 设置时间表的正确方法是什么？

> ID：14421540
> 
> 赞同：0
> 
> 时间：2013-01-20T03:57:10.407
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试使用下表构建约会应用程序：`Doctors`, `Schedules`. 我很难弄清楚设计`Schedules`桌子最方便的方法是什么。每个`doctor`人都有自己的`schedule`，所以我想我为 s 工作和 a 和日期创建一个字段，`day`这样`doctor`我`start`就`end`可以在该范围内进行数学运算。

如果医生在休假或参加大会，我不会在申请中考虑。但我确实需要在这个范围内设定一个午餐时间。

另外，如果他每周只工作三天，我应该如何处理他休假的日子？

```
 create_table "schedules", :force => true do |t|
    t.string   "day"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "doctor_id"
    t.time     "start_time"
    t.time     "end_time"
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:30:51.263

首先，您需要确定时间表中最小的部分。常识是“小时”，也可以随意使用“天”或“半天”。一旦定义，就很难改变。

时间表将包含以下主要元素：

`id`#唯一标识

`start_time`＃这个非常重要。它显示了每个工作时间的开始时间，以便从日历中查询。最好使用十六进制数据时间戳。

`doctor_id`#占用这个时间的医生。如果没有被占用，它是空白的。请注意，您可能有两个医生占用同一个小时。所以，或者`start_time`不是`doctor_id`唯一的，但是结合在一起它们是唯一的。

`patient_id`#这个小时下单的病人。

`description`#这个描述

现在是用例：

在您的日历中，对于给定的一天，您显示 8 小时可用。您查询数据库以查找是否有任何时间表在每个小时的开始时间，如果存在，则标记该小时并链接到时间表。

请注意，患者可能会要求医生连续几个小时。例如 3 小时，在这种情况下，您需要将 3 条记录添加到计划表中，差异仅在`id`和上`start_time`。

也可能有两个医生在同一时间安排的情况。很容易显示为上述方案。

安排应该奏效。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T04:03:00.570

我会在两个表中都有每个医生的 ID，并有日期的数值。

结构应如下所示；

```
Doctors Table
---------------------------------------------
Doctor_ID | Doctor_name | Practice | etc
---------------------------------------------

Schedules
-----------------------------------------------------------
Day_ID    | Time (hour,minute,second) | Doctor_ID | Istaken
----------------------------------------------------------- 
```

Istaken 将是一个 bool 变量，它会告诉您一天中的某个小时是否被占用。您需要做的是，如果您不想每次都添加新变量，则需要为每天和每位医生创建 24 个表。

或者你能做的是；

将 24 小时添加为列，例如 hourone | hourtwo 等并将它们列为 0 或 1。这样您就可以避免每次添加新记录。

如果以这种方式创建它，系统将更容易搜索表，因为您将连接 Doctor_ID 上的整数值

# android - 构建项目上的 Android aapt.exe APPCRASH，错误代码为 -1073741819

> ID：14421545
> 
> 赞同：4
> 
> 时间：2013-01-20T03:58:56.270
> 
> 标签：android, intellij-idea, aapt, crash

与此[AAPT 类似的问题失败，错误代码为 -1073741819](https://stackoverflow.com/questions/10699439/aapt-filing-with-error-code-1073741819/14420585#14420585)

Appt.exe 在带有签名的项目构建上以 APPCRASH 停止：

```
Problem Event Name: APPCRASH
  Application Name: aapt.exe
  Application Version:  0.0.0.0
  Application Timestamp:    4e810830
  Fault Module Name:    msvcrt.dll
  Fault Module Version: 7.0.7600.16385
  Fault Module Timestamp:   4a5bda6f
  Exception Code:   c0000005
  Exception Offset: 0000d193
  OS Version:   6.1.7601.2.1.0.256.1
  Locale ID:    2057
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

IDE 中的消息窗口显示 android-apt-compiler: Command "C:\Program Files (x86)\Android\android-sdk\platform-tools\aapt.exe package -m --auto-add-overlay --extra-packages %used library%" 执行失败，退出代码为 -1073741819

我尝试重建、清理项目、清理 IDE 缓存、添加/删除依赖项、重新启动 IDE、重新启动计算机、重新安装 Android SDK 平台工具 - 没有任何帮助。相关问题中提供的解决方案也没有帮助 - 我的 style.xml 中没有 @+id。

IDE：Intellij IDEA 12.0.2

项目中使用的库：

*   ActionBarSherlock-4.2.0
*   滑动菜单
*   Android-ViewPagerIndicator
*   Android-PullToRefresh

正如我在 Eclipse 中发现的那样，这个问题可以通过将 Window -> Preferences -> Android -> Build -> Build Output 设置为“Normal”而不是“Verbose”来解决。但我在 Intellij IDEA 中找不到这样的选项。

PS：在项目的某个地方看起来像问题，因为其他项目（即使是库）编译得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T12:56:39.523

看来您在 strings.xml 中遗漏了一些条目

就我而言，我正在删除`<string name="action_settings">Settings</string>`

认为它没有被项目使用并将它放回去解决了这个问题。您可以在项目中搜索相同或相似类型的标签。

# backbone.js - 在主干js事件回调函数中查找触发了哪个事件

> ID：14421550
> 
> 赞同：2
> 
> 时间：2013-01-20T03:59:15.363
> 
> 标签：backbone.js

```
obj.on('evt_A evt_B evt_c', function(eventData){
console.log("Is it possible here to find which event is triggered. As this callback is registered for three events. This callback is like a central callback for all the events on this object.")
})

obj.trigger('evt_A evt_B evt_c', [{eventDataForevt_A}, {eventDataForevt_B, {eventDataForevt_C}}]) 
```

有一种方法可以做到这一点，即拥有一个属性，`eventDataForevt_<A||B||C>`其中显示事件的名称。但是是否可以在不修改的情况下做到这一点`eventDataForevt_<A||B||C>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:51:22.083

看看这个小提琴：http: [//jsbin.com/ucevov/4/edit](http://jsbin.com/ucevov/4/edit)

似乎无法从您的事件名称中检测到事件名称`obj.on`- 请注意，即使未调用也是如此`evt_c in this._events`。`true``evt_c`

但是有[一个特殊的“all”事件](http://backbonejs.org/#Events-on)，它传入调用事件的名称作为第一个参数，所以

```
obj.on("all", function(eventName, eventData) {
  console.log(eventName);
}); 
```

应该输出被调用的事件的名称。

# php - 在执行脚本时执行刷新会发生什么？

> ID：14421551
> 
> 赞同：4
> 
> 时间：2013-01-20T03:59:31.217
> 
> 标签：php, mysql, flush

从[手册](http://dev.mysql.com/doc/refman/5.5/en/flush.html)上看，FLUSH TABLES：

> 关闭所有打开的表，强制关闭所有正在使用的表，并刷新查询缓存。FLUSH TABLES 还会从查询缓存中删除所有查询结果，例如 RESET QUERY CACHE 语句。

从上面我不太明白，在运行包含多个查询的 PHP 脚本时执行 FLUSH TABLES 有什么含义。假设我有一个`UPDATE`关于表 A 的查询，然后是一个`INSERT`关于表 B 的查询，然后是`mail()`一个`header()`事务页面，当 MySQL 运行 UPDATE 查询时执行 FLUSH TABLES 时，INSERT 查询会被删除吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:20:12.240

MySQL 将等到之前进行的查询结束，然后它会执行 FLUSH TABLES。在 FLUSH TABLES 之后进行的查询将在 FLUSH TABLES 之后排队并执行。

如果没有异常发生，不会丢失任何查询。

# javascript - CSS - 缩放定位元素 rel。到浏览器窗口大小

> ID：14421554
> 
> 赞同：1
> 
> 时间：2013-01-20T04:00:27.140
> 
> 标签：javascript, jquery, css, position, scaling

有没有办法让`position`'ed 元素仅使用 CSS 相对于窗口大小正确缩放，或者我必须将其升级到 javascript/jQ？我尝试添加一个容器，`100%` `width`然后`height`相应地进行缩放。

```
.container{
    position: relative;
    width: 100%;
    height: 100%;}

.transblock{
    position:absolute; 
    width:44%; 
    height:5%; 
    top:90%; 
    left:0%; 
    background:green;
    opacity: 0.6;
    z-index:5; }

.h1text{
    position:absolute; 
    width:30%; 
    height:5%;
    top:90.75%; 
    left:13.5%; 
    z-index:10;
    color:white;} 
```

[http://jsfiddle.net/cyaXL/](http://jsfiddle.net/cyaXL/)

段落和菜单之间的差距是问题所在。它在 1280p 屏幕上太小，在 1920p 屏幕上太大。有什么办法可以让它更好地调整吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-22T17:40:03.020

您也可以像这样使用“视口”单位：

```
div {
 width: 50vw; //means it should take 50% of the window size
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:36:43.473

我认为您的 .menu4 左侧为 25% 的事实是这里的问题：

```
.menu4 {
  left: 25%;
} 
```

更好的：

```
.menu4 {
  left: 0%;
  width:auto;
  margin-right:1%;
}

.menu4 ul {
  float:right;
  clear:both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T07:44:26.680

您正在使用以像素为单位的字体大小。请尝试使用“em”。在使用 % 进行布局时，我们需要使用“em”而不是“px”。请参考转换表并尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T04:06:56.223

这必须通过 css 而不是使用任何脚本来完成，是的，您做得对，使容器变为 100% 的窗口大小，然后将项目放入该容器中。

# c# - 将变量传递给表单，同时从树视图加载它们

> ID：14421556
> 
> 赞同：1
> 
> 时间：2013-01-20T04:00:43.390
> 
> 标签：c#, winforms

我正在尝试通过单击树视图节点来加载表单。下面的代码正在运行，但现在我需要将一些变量传递给加载表单。那么有没有办法在从树视图加载表单时传递变量。

```
string item = Convert.ToString(treeView1.SelectedNode);
        int index = item.IndexOf(" ");
        if (index > 0)
            item = item.Substring(index + 1);
        //MessageBox.Show(item);
        var selectedFRM = from Menu in dbdata.Menus
                          where Menu.Item_Name == item
                          select Menu;
        foreach (var pick in selectedFRM.Take(1))
        {
            string sel = pick.Form_Name;
            //Assembly asm = typeof(frmUser).Assembly;
            Assembly asm = typeof(frmCustomer).Assembly;
            Type type = asm.GetType("WindowsFormsApplication6." + sel);

            AssemblyName assemName = asm.GetName();
           // MessageBox.Show(assemName.Name);
            try
            {
                Form frmChk = (Form)Activator.CreateInstance(type);
                //frmChk cgh = new frmChk();
                frmChk.Show();
            }
            catch (Exception)
            {
                MessageBox.Show("Error in loading form");
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:17:08.800

在包含树视图的表单中创建公共属性、变量或方法。加载表单`frmChk`可以在其加载事件（或其他任何地方）中访问这些。

# java - Java中的乘法有哪些替代方法？

> ID：14421557
> 
> 赞同：0
> 
> 时间：2013-01-20T04:01:15.800
> 
> 标签：java, hex, masking, bits

更具体地说，我的作业有一些限制，不允许我使用乘法和超过 2 个 if-else 语句。该方法应采用一个数字，例如 0xAAA5，并用给定的半字节（例如 0x1）替换其中一个 4 位部分。这是我现在的代码：

```
public static int setNibble(int num, int nibble, int which) {
    num = num & (0xFFFF - (0xF << (4 * which)));
    num = num | ( (nibble) << (4 * which) );

    return num;
} 
```

我基本上只想左移 which*4，但如果没有乘法或某种 if-else 语句，我无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T04:03:17.907

`4 * which`== `which << 2`，所以你可以使用它。

# zlib - zlib 1.2.5 无法识别此标头

> ID：14421559
> 
> 赞同：0
> 
> 时间：2013-01-20T04:01:29.070
> 
> 标签：zlib

我在另一个文本文件中有一个源文本及其所谓的 zlib 压缩嵌入（和 \ 转义）。除了使用 zlib 对 \0、\t、\n、\r、引用等进行标称转义外，我没有关于其编码的文档。

未转义的数据有：

前四个字节：1A 9B 02 00 最后四个字节：76 18 23 82

哪个 inflate 抱怨标题无效。

当我自己使用 1.2.5 对匹配的源文本进行放气/膨胀时，我得到：

前四个字节：78 9C ED 7D

有人可以建议在给定标头字节的情况下使用什么压缩吗？我还没有找到任何实际使用它们的幻数或标题公式。

编辑：[这](http://sdrv.ms/XqObxE)是相关文件...

*   codedreadbase.cohdemo 是源文本文件，在 BASE 动词后面带有转义的嵌入部分。逃脱是：

    \n = (换行) \r = (返回) \0 = 0 (NULL) \t = tab \q = " \s = ' \d = $ \p = %

*   codedreadbase.deflated 是我在双引号中取消上述内容后传递给 zlib inflateInit/inflate*/inflateEnd 的内容。

*   codedreadbase.txt 是嵌入部分的原始文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:11:10.993

您的前四个字节`1A 9B 02 00`是未压缩数据的长度，以小端顺序排列，十进制为 170778。您确实已经找到了一个有效 zlib 流的开头以及接下来的四个字节：`78 5E ED 7D`. 您只需要从转义格式中正确提取二进制压缩流。我没有问题，并且完全解压缩了 codedreadbase.txt 。

你没有提到一个明显的转义，那就是反斜杠本身。 `\\`应该去`\`。也许这就是你所缺少的。C 中这个简单的非转义符有效：

```
#include <stdio.h>

int main(void)
{
    int ch;

    while ((ch = getchar()) != EOF) {
        if (ch == '\\') {
            ch = getchar();
            if (ch == EOF)
                break;
            ch =
                ch == 'n' ? '\n' :
                ch == 'r' ? '\r' :
                ch == '0' ? 0 :
                ch == 't' ? '\t' :
                ch == 'q' ? '"' :
                ch == 's' ? '\'' :
                ch == 'd' ? '$' :
                ch == 'p' ? '%' : ch;
        }
        putchar(ch);
    }
    return 0;
} 
```

# c# - 一种情况下可以使用多种方法吗？

> ID：14421560
> 
> 赞同：-2
> 
> 时间：2013-01-20T04:02:16.687
> 
> 标签：c#

例如，我写了一些代码`c#`；

```
 if(Condition)

 {
   private void ribbonPanel1_Click(object sender, EventArgs e)
    {
    Do something ; 
    }

 private void Form1_KeyPress(object sender, KeyPressEventArgs e)
    {
       Do Something ;
      }
 private void ribbonPanel1_Click(object sender, EventArgs e)
    {
    Do something ; 
    }

} 
```

这是允许的吗？我们可以在任何条件下限制多种控制方法吗？不仅我们可以使用任何循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:04:39.403

改为这样做

```
 private void ribbonPanel1_Click(object sender, EventArgs e)
    {
     if (condition)
       {
         Do something ; 
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:08:24.713

您不能限制特定方法。但是您可以做的是在特定条件下调用该方法。

```
public bool Condition;

private void ribbonPanel1_Click(object sender, EventArgs e)
{
    if (Condition) ThingsYouWantToDo();
}

private void ThingsYouWantToD()
{
//Stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T04:13:12.857

```
private void ribbonPanel1_Click(object sender, EventArgs e)
{
    if (Condition)
        DoFirstStuff();
    else if (Condition2)
        DoSecondStuff();
    else
        DoThirdStuff();
} 
```

但是等等……您是在谈论条件编译器指令吗？喜欢：

```
private static void Main()
{
    #if DEBUG
    Console.WriteLine("You are running debug version!");
    #endif

    Console.WriteLine("Program is starting!");
} 
```

# mysql - 在 RapidMiner 中读取 MYSQL 数据库

> ID：14421563
> 
> 赞同：1
> 
> 时间：2013-01-20T04:03:09.973
> 
> 标签：mysql, jvm, environment-variables, rapidminer

我正在尝试使用 RapidMiner 5 中的“读取数据库”运算符从 Mysql 数据库中读取“ExampleSet”。我似乎与我的数据库建立了工作连接，因为我注意到管理数据库连接窗口在提示时显示“连接正常”消息。

但是，当我尝试运行“读取数据库”进程时，我收到以下错误

“进程失败：查找 .javax.naming.NoInitialContextException 失败：需要在环境或系统属性中指定类名，或作为小程序参数，或在应用程序资源文件中：java.naming.factory.initial”

我不知道如何解释这个错误。我需要设置环境变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:55:26.747

看来我的问题可以通过升级mysql来解决。我一直是 5.0 版，但升级到 5.5 版后，我的问题就消失了。细节仍然未知。

# java - 如何从类的字符串表示形式转换为类的实例？

> ID：14421569
> 
> 赞同：0
> 
> 时间：2013-01-20T04:04:00.463
> 
> 标签：java, android

我有一个类路径的字符串表示。它可以是三个类中的任何一个，它们都实现了相同的接口**Adapter**，但我不知道值是什么。

*   “com.example.adapters.Music”
*   “com.example.adapters.Video”
*   “com.example.adapters.Photo”

仅给定一个包含上述三个字符串之一的变量，如何获得实际类的可用实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T04:09:09.200

如果一个类有一个无参数的构造函数，那么从它的包限定类名（例如，“java.lang.Integer”）创建一个对象通常使用这些方法完成：

```
Class.forName
Class.newInstance

For e.g MusicClass mObj = Class.forName(<string name>).newInstance(); 
```

如果需要将参数传递给构造函数，则可以使用以下替代方法：

```
Class.getConstructor
Constructor.newInstance 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T04:05:36.673

您可以使用：

```
String name = "com.example.adapters.Music";
Object obj = Class.forName(name).newInstance(); 
```

然后，您必须转换`obj`为正确的类型（可能通过检查名称或使用`instanceof`）。如果你的类有一个通用的基类（或它们实现的接口）并且你`obj`只知道它是某个子类就可以使用它会更容易。

这仅在类具有默认构造函数时才有效。否则，您将不得不使用反射来获取构造方法的实例并使用正确的参数调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T04:08:34.860

您可以使用字符串数组来保存三个字符串

```
String names[]= {"com.example.adapters.Music","com.example.adapters.Video","com.example.adapters.Photo"}; 
```

# java - 以独特的方式遍历列表或其他内容

> ID：14421570
> 
> 赞同：0
> 
> 时间：2013-01-20T04:04:12.753
> 
> 标签：java, android

我需要创建一个将参数作为`maxValue`. 并从 0 开始循环，但一旦使用了一个索引，就不能再使用它。

**解释：**

让我们举个例子，`maxValue`是 2000。现在它应该从 0 变为 2000，但起始索引会不断被其他线程更改。就像它可以再次为 0 或者它可以是 1900 或 1999，可以是小于 的任何数字`maxValue`。所以它应该保持循环从开始索引到结束，然后循环其余项目。

这是我尝试过的：

```
public int i = 0;  //keep changes by other thread

public void DoStuff(int maxValue) {
    HashSet<Integer> valuesSet = new HashSet<Integer>();      

    // fill hashset
    for (int a = 0; a < maxValue; a++)
        valuesSet.add(a);       

    for (; i < maxValue; i++) {
        if (valuesSet.contains(i)) {
            valuesSet.remove(i);
            // SomeMethod(i);
        }

        if (valuesSet.isEmpty())// must check isEmpty first
            break;
        if (i == (maxValue - 1)) // reset i to 0 to use remaining items in hashset
            i = 0;
    }
} 
```

我还没有测试过这段代码，但我可以看到如果其他线程保持将 i 设置为 0 或小于这个值`maxValue`并且这个循环将无限期，问题将会出现。虽然它应该是更好的东西。有什么想法吗？

编辑：
深度示例
`i=0`和`maxValue=2000`

DoStuff 被调用，当`i`通过循环达到 100 时，`i`被其他线程设置为 1600，循环继续进行，但再次`i`被同一其他线程设置为 30，然后一次又一次地被其他线程设置，直到所有项目在`valuesSet`被叫进来`SomeMethod(i)`。但问题是，如果`valuesSet`像 1998 年或 1999 年那样留下 1 个或多个项目并`i`保持设置为较低的值，如 0、10 或 100，则循环中断或完成的机会非常低。

我想要的是，如果一旦调用了一个数字（0到maxValue）`SomeMethod`，它就不能再次被调用，而起始数字保持变化并且`SomeMethod`必须用所有数字调用直到maxValue。如果`SomeMethod`被调用直到 maxValue 并且仍然有数字，它应该以最小的数字重新开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:27:40.947

您的要求不清楚，但似乎您正在描述一些应该作为自定义`Iterator`类实现的东西。例如：

```
public class MyIterator<T> implements Iterator<T> {
    private int maxValue;
    private int pos;
    private List<T> list;
    public ListIterator(List<T> list, int maxValue) { 
        this.list = list; 
        this.maxValue = maxValue;
    }

    public synchronized T next() {
        if (pos < list.size() && pos <= maxValue) {
            return list.get(pos++);
        } else {
            throw ...
        }
    }

    // etcetera.
} 
```

然后，您将此类的实例提供给您希望能够参与迭代的特定线程。其他线程将无法干涉。事实上，其他线程*可以*使用不同的实例......并独立迭代。

请注意，此自定义迭代器与返回的迭代器之间的唯一区别`List.iterator()`是：

*   这个仅从零迭代到 maxValue。
*   这个有`synchronized`方法，可以被多个线程共享。

`reset`如果这是您需要的，您也可以添加一个方法。

# python - 将函数输出放入 Python 中的列表

> ID：14421575
> 
> 赞同：3
> 
> 时间：2013-01-20T04:05:54.273
> 
> 标签：python, list, printing, output

以下程序的目的是将 4 个字符中的单词从 转换`"This"`为`"T***"`，我已经完成了使该列表和 len 工作的困难部分。

问题是程序逐行输出答案，我想知道是否可以将输出存储回列表并将其作为一个完整的句子打印出来？

谢谢。

```
#Define function to translate imported list information
def translate(i):
    if len(i) == 4: #Execute if the length of the text is 4
        translate = i[0] + "***" #Return ***
        return (translate)
    else:
        return (i) #Return original value

#User input sentense for translation
orgSent = input("Pleae enter a sentence:")
orgSent = orgSent.split (" ")

#Print lines
for i in orgSent:
    print(translate(i)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T04:07:43.853

使用列表理解和`join`方法：

```
translated = [translate(i) for i in orgSent]
print(' '.join(translated)) 
```

列表推导基本上将函数的返回值存储在列表中，这正是您想要的。你可以做这样的事情，例如：

```
print([i**2 for i in range(5)])
# [0, 1, 4, 9, 16] 
```

该`map`函数也可能很有用——它将函数“映射”到可迭代的每个元素。在 Python 2 中，它返回一个列表。但是在 Python 3（我假设您正在使用）中，它返回一个`map`对象，该对象也是您可以传递给`join`函数的可迭代对象。

```
translated = map(translate, orgSent) 
```

该`join`方法将括号内可迭代的每个元素与`.`. 例如：

```
lis = ['Hello', 'World!']
print(' '.join(lis))
# Hello World! 
```

它不限于空间，你可以做一些像这样疯狂的事情：

```
print('foo'.join(lis))
# HellofooWorld! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T04:14:44.477

在 py 2.x 上，您可以添加`,`after `print`：

```
for i in orgSent:
    print translate(i), 
```

如果您使用的是 py 3.x，请尝试：

```
for i in orgSent:
    print(translate(i),end=" ") 
```

的默认值`end`是换行符（`\n`），这就是为什么每个单词都打印在新行上的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T04:11:04.967

```
sgeorge-mn:tmp sgeorge$ python s
Pleae enter a sentence:"my name is suku john george"
my n*** is s*** j*** george 
```

您只需要使用 打印`,`。请参阅下面粘贴的代码部分的最后一行。

```
#Print lines
for i in orgSent:
    print (translate(i)), 
```

为了您的更多理解：

```
sgeorge-mn:~ sgeorge$ cat tmp.py 
import sys
print "print without ending comma"
print "print without ending comma | ",
sys.stdout.write("print using sys.stdout.write ")

sgeorge-mn:~ sgeorge$ python tmp.py 
print without ending comma
print without ending comma | print using sys.stdout.write sgeorge-mn:~ sgeorge$ 
```

# iphone - 粒子效果，如chilingo的碰撞效果

> ID：14421576
> 
> 赞同：0
> 
> 时间：2013-01-20T04:06:17.523
> 
> 标签：iphone, ios, cocos2d-iphone

Chillingo 推出了一个新的游戏名称“碰撞效果”附加是任何人都知道如何创建这种效果的游戏形象。我认为这是粒子碰撞如何使用 cocos2D 创建它？

![chilingo的碰撞效果](../Images/5b5935a737b92717bdbc826d05dda51b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:25:46.890

通过自己编程。

cocos2d 中的粒子系统不支持这一点。您需要一个粒子系统，其中粒子可以相互吸引或偏转，甚至需要一个粒子系统，您可以将物理或其他运动逻辑应用于单个粒子。Cocos2d 不能让您控制单个粒子。

您可以使用 sprite-batched sprite 创建它，但这不会高效或快速。通常这样的系统是在最低级别实现的，这意味着自定义 OpenGL 绘图，可能会使用着色器进行优化。

# ios - iOS 一些 UIImageView 被拉伸

> ID：14421577
> 
> 赞同：2
> 
> 时间：2013-01-20T04:06:18.423
> 
> 标签：ios, uiimageview, stretched

这似乎是一个愚蠢的问题，但我有一个`UITableView`并且每一行都有`UIImageView`一个维度为`80x80`. 图像的实际内容是`80x80`或`80x64`。我最近添加了一些新`80x64`图像，它们的高度正在被拉伸，而旧`80x64`图像则没有（它们只是在`80x80`框架内居中）。

我隐约记得不久前在我的图像上设置了一些 xattr，但我似乎找不到它是什么。这与我的新图像垂直拉伸有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T04:14:36.177

您可能想查看[`contentMode`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/contentMode)您的图像视图，特别是尝试`UIViewContentModeScaleAspectFit`. 我注意到这一点，尤其是当我为单元格异步设置`image`属性时。`UITableViewCell`但是，如果我有将 设置为的例程`image`也设置了`contentMode`，那么一切都很好。

# c - Visual Studio 中 C 中的奇怪堆栈错误错误

> ID：14421584
> 
> 赞同：0
> 
> 时间：2013-01-20T04:07:59.290
> 
> 标签：c, stack, main

这是我在 main() 末尾的代码：

```
printf("Would you like to find data on another 20 rods? \nType C and press enter to continue, or type E and press enter to exit \n");

scanf("%s",&exitOption);

if (exitOption == 'C'){
main();

}

return 0; 
```

每次我运行程序时，我都会收到此错误：

![在此处输入图像描述](../Images/2074d18b554c848ebeda0999003d04fb.png)

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T04:12:12.543

exitOption 必须是一个字符

```
scanf("%c",&exitOption); 
```

即使你试图获取一个字符串，它也必须是这样的

```
char string[10];
printf("Enter string\n");
scanf("%s",string);  // note the second parameter of scanf() when u get a string 
```

# c++ - C ++变量值不变

> ID：14421585
> 
> 赞同：0
> 
> 时间：2013-01-20T04:08:00.447
> 
> 标签：c++, variables

我正在使用以下代码（它已被超级简化以解决我的问题的根源）。

```
#include <iostream>
namespace std;

int user;
int submit(int);

int main() {

    user = 1;
    submit(user);

    user = 2;
    submit(user);

    return(0);
}

int submit(int user) {

    if (user = 1) {
        printf("1");
    } else if (user = 2) {
        printf("2");
    }
    return(0);

} 
```

我以为这会打印出“12”，但我得到的是“11”。在第二次调用函数之前，变量“user”不是被重新定义了吗？

这里出了什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T04:09:25.267

使用`==`, 不`=`检查 的值`user`。您正在覆盖值（with `=`）而不是比较它们（with `==`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T04:10:23.287

你`=`没有`==`在你的函数体中使用。

```
if (user = 1) { //This assigns user the value of 1 and then prints 1
         printf("1"); 
```

正确的测试条件应该是：

```
if (user == 1) { //This checks the value of user and then prints if the condition is true
         printf("1"); 
```

* * *

在编译时，如果使用`gcc`，添加选项`-Wall`在这种情况下很有帮助，因为它会在测试条件下向您发出有关分配的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-30T17:03:45.613

正如专家所回答的那样，您在函数体中使用`=`而不是使用`==`，这就是您得到错误输出的原因。

在这里，我想澄清你的概念为什么会发生：我希望你知道赋值运算符和相等运算符之间的区别。如果没有，我将简要描述一下。

**赋值运算符 (=)：**

赋值运算符为变量赋值。例如

`user = 1;`

此语句将整数值 1 分配给变量`user`。

**该语句将始终执行，这表明它是逻辑`TRUE`语句**（假设变量`user`已声明）。

由于没有比较或类似的东西，所以如果我们使用赋值运算符（=）作为条件，它总是会返回`TRUE`或`1`

**等式运算符（==）：**

相等运算符用于比较两个值以了解它们是否相等。

`user == 1;`

该语句将比较变量的值`user`，如果是则`1`返回，否则返回。`TRUE``user``1``FALSE`

**结果：**赋值运算符将始终返回`TRUE`，但比较运算符可能返回`TRUE`or `FALSE`。

现在回到你的代码：

```
int submit(int user) {
//as you're using assignmnt operator this if condition will always true regardless of input
    if (user = 1) {    
       printf("1");
//because if condition is true, it will never go into else if condition
    } else if (user = 2) {
       printf("2");
    }
    return(0);
} 
```

因此，实际上，无论何时调用此函数，它都会`1`每次都打印，而不管`user`传递给此函数的值如何。因为，你已经调用了这个函数 2 次。因此，它将打印`11`.

# php - 为用户使用 RDBMS 并与 NoSQL 项目链接

> ID：14421586
> 
> 赞同：0
> 
> 时间：2013-01-20T04:08:04.870
> 
> 标签：php, database, database-design, nosql, rdbms

我正在计划一个应用程序，并希望分别维护一个**关系数据库和其他非关系数据库**，MySQL 和 MongoDB。

一个事实是，在关系数据库中维护的是用户，而非关系数据库是由**该用户生成的内容**维护的，其中涉及**地理查询**。

现在的问题是如何使用两个数据库*在用户和您的项目之间*创建链接*并保持性能或采用错误的方法？

我的想法是创建一个产品表，其中mysql 中的用户的*外键和数据库中产品的**objectId*非关系。

示例 MySQL 表：

```
table: products_relationship

| account_id | product_objectid                 |
| ---------- | -------------------------------- |
| 1          | 0b694fc34c9663883a5d4b32371f8333 |
| 1          | 0b694fc34c9663883a5d4b32371f9837 |
| 2          | 0b694fc34c9663883a5d4b32371f9bfc |
| 5          | 0b694fc34c9663883a5d4b32371fcb5f |
| 1          | 0b694fc34c9663883a5d4b32371fd809 | 
```

因此，account_id = 1 的用户有名字、电子邮件和其他数据。并拥有3个产品。

**我应该采用新的方法吗？我会因此获得性能吗？我会因此失去 NoSQL 的功能吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:12:43.110

我在工作中的系统上工作就是这样做的。我们有关系数据库和 NoSQL 数据库，我们使用名为 Mule (http://www.mulesoft.org/) 的产品来集成它们。

我强烈建议选择 MySQL 或 Mongo 并针对其中一个数据库执行所有 PHP 工作。您可以从 MySQL->Mongo 或从 Mongo->MySQL 近乎实时地移动数据。骡子擅长这一点。

您将无法有效地跨系统进行“连接”。

Mule 还将帮助您在移动数据时对数据进行转换。例如，您可以在 MySQL 中获取规范化数据并将其非规范化以存储在 Mongo 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:46:11.930

我意识到我采用了一个复杂的架构，而我并不需要太多的复杂性。我没有理由希望我的用户在关系数据库中。是的，他们可以毫无问题地留在 MongoDB 中，以及每个用户中的产品。这是我创造的一种关系。

如果我愿意，我可以使用 _objectId 建立连接

# node.js - 每页上的 WKHTMLTOPDF 动态页眉

> ID：14421591
> 
> 赞同：1
> 
> 时间：2013-01-20T04:09:06.687
> 
> 标签：node.js, wkhtmltopdf

我正在尝试使用 NODE 中的 WKHTMLTOPDF 库为大型 HTML 文件生成 PDF 文件。我需要能够在每个页面的页眉和页脚中填充一些内容。但是每个页面上的标题内容都会发生变化，例如，具有像 BX008761 这样的格式的自定义编号。该数字应在每一页上递增。

第一页是 BX008761，第二页是 BX008762，第三页是 BX008763，依此类推。

我可以找到一个相关的线程..

[WKHTMLTOPDF -- 是否可以显示动态标题？](https://stackoverflow.com/questions/11981853/wkhtmltopdf-is-possible-to-display-dynamic-headers)

上面的线程状态：“**你可以喂 --header-html 几乎任何东西 :) 尝试以下操作以了解我的观点：**

```
wkhtmltopdf.exe --margin-top 30mm --header-html isitchristmas.com google.fi x.pdf 
```

**所以 isitchristmas.com 可能是 www.yoursite.com/magical/ponies.php"**

是否为呈现的 PDF 的每个页面调用为 --header-html 选项提供的源值，或者为每个 PDF 调用一次......？

感谢您的支持。谢谢。

编辑：我尝试了一个示例程序，并确认它将处理在 PDF 中呈现的每个页面上为 --header-html 选项提供的值。我正在使用远程服务将 HTML 字符串作为对 url 的响应返回。

现在它按原样显示 html 字符串，而不是对其进行解码。

当服务返回以下字符串时：

**<html> <body> <span style="color:red"> 123 :: 0 :: 3000025 :: 634943551338828720</span> <body> <html>**

那么每个页面上的标题也与上面相同，而不是以红色显示文本。我如何让 wkhtmltohtml 了解它从服务接收到的内容需要被解码。

如果有人可以提出解决方法，我将不胜感激。

谢谢你。

编辑：我使用了另一种解决方法来返回标题内容的 HTML 页面。我在 asp.net 中使用了一个 HTTPHandler 来返回一个有效的响应，这个问题看起来已经解决了在每个页面上都有一个动态标题的核心问题。

# ios - 无法将自定义字体导入 XCode

> ID：14421601
> 
> 赞同：0
> 
> 时间：2013-01-20T04:10:54.080
> 
> 标签：ios, uifont

我正在尝试将自定义字体导入 XCode 并遵循以下步骤：

1.  在“支持文件”下将 TTF 文件添加到我的项目中
2.  在 PList 文件的 UIAppFonts 数组下添加了 TTF 文件
3.  在 ViewController 中，我尝试使用以下代码打印出可用字体列表 -`NSLog(@"FONT FAMILIES\n%@",[UIFont familyNames]);`

但是，特定字体似乎没有添加到我的项目中。这让我很难过。任何人都可以阐明问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:12:01.943

找出解决方案-此处的答案中提供了解决方案-[未导入自定义字体](https://stackoverflow.com/questions/9649436/custom-font-is-not-added-to-project)

# php - 错误主机名时的 PDO 错误

> ID：14421602
> 
> 赞同：2
> 
> 时间：2013-01-20T04:10:59.620
> 
> 标签：php

我正在尝试捕获数据库连接上的错误，但是当我仅输入错误的主机名时出现错误，这是我的代码：

```
try
{
    $mysqlconnection = new PDO('mysql:host=localshost;dbname=test', 'root', '');
}
catch (Exception $ex)
{

die('Erreur : ' . $ex->getMessage());

} 
```

这是我得到的错误：

![在此处输入图像描述](../Images/c46b6b46894ea3cdb53eb4d0860869c3.png)

为什么只有在我设置了错误的主机名时才会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:45:05.380

您可能希望打开异常并`PDOException`用于捕获的异常。

```
try {
    $mysqlconnection = new PDO(
        'mysql:host=localshost;dbname=test',
        'root', 'yourPasswordHere'
    );
    $mysqlconnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $ex) {
    die('Erreur : ' . $ex->getMessage());
    // or 
    // die('Erreur:' . PHP_EOL . $ex->getTraceAsString());
} 
```

对我来说它输出

> 错误：SQLSTATE [HY000] [2002] php_network_getaddresses：getaddrinfo 失败：提供节点名或服务名，或未知

# sass - 如何引用先前定义的样式

> ID：14421607
> 
> 赞同：0
> 
> 时间：2013-01-20T04:11:36.137
> 
> 标签：sass

我是 sass 的新手，我在 .sass 文件中定义了 h1、h2、h3，我想做如下的事情：

```
h1 {
   font-size: 25px;
}

.section {
   h1 { font-size: h1.font-size - 5px; }
} 
```

我知道语法不正确，但我认为你明白了要点。真的很感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T04:48:34.740

您必须将值存储在变量中：

```
$h1-font-size: 25px;

h1 {
   font-size: $h1-font-size;

   .section & {
       font-size: $h1-font-size - 5;
   }
} 
```

这将产生以下 CSS：

```
h1 { font-size: 25px; }
.section h1 { font-size: 20px; } 
```

# javascript - 参数作为函数名

> ID：14421609
> 
> 赞同：0
> 
> 时间：2013-01-20T04:11:39.273
> 
> 标签：javascript, jquery, function, parameters

我不确定这是否可能。我想像这样传递一个函数名作为参数

```
loadContent("http://test.com/", specialFunction); 
```

`specialFucntion`只是一个字符串：

```
function loadContent(href, functionIWant){
    $.ajax({
        type: "GET",
        url: href,
        dataType: "json",
        success: function(res, textStatus, xhr) {
            helper();
            functionIWant + "()"; //So this would be treated as function
                                  //and it actually calls specialFunction()
                                  //is it possible for this?
        }
    });
} 
```

我如何实现这一目标？

**添加在**

比方说，我会传入一个函数名数组，我该如何调用它？

```
for(var i = 0; i < functionIWant.length; i++){
   functionIWant[i]; // how? appeciate a lot :)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T04:13:32.440

你可以这样做`functionIWant()`

使用您提供的代码段的示例：

```
function loadContent(href, functionIWant)
{
    $.ajax({
        type: "GET",
        url: href,
        dataType: "json",
        success: function(res, textStatus, xhr) {
            helper();
            functionIWant();
        }
    });
} 
```

**对于您的附录**

假设您要调用以下三个函数

```
function foo() {alert("Foo")}
function bar() {alert("bar")}
function baz() {alert("baz")} 
```

如果您将函数名称数组作为字符串传递，我可以推荐的最好方法是遵循[此处](https://stackoverflow.com/a/359910/318025)的建议。基本上，你可以这样做：

```
// Assuming FunctionIWant is an array of strings that represent function names
FunctionIWant = ["foo","bar","baz"];

...

for(var i=0;i<FunctionIWant.length;i++)
    window[FunctionIWant[i]](); 
```

但是，如果 FunctionIWant 是一组实际函数，例如，您可以简单地迭代它们并单独调用它们，如下所示：

```
FunctionIWant = [foo,bar,baz] // note, these are not strings

for(var i=0;i<FunctionIWant.length;i++)
    FunctionIWant[i](); 
```

在大多数情况下，最好分配函数而不是字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T04:14:09.570

如果您想尝试调用由参数表示的函数，只需调用它，就好像那是函数的名称：

```
function loadContent(href, callback)
{
    $.ajax({
        type: "GET",
        url: href,
        dataType: "json",
        success: function(res, textStatus, xhr) {
            helper();
            callback();
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T04:26:54.653

我猜这`functionIWant`是一个字符串，而不是对函数的引用[你应该在提问时说清楚]

如果是这样的话，你想要

```
window[functionIWant](); 
```

如果函数在全局范围内，这将起作用。最好传入对函数的引用，或者对函数进行命名空间。

```
var myFuncs = {
    foo : function(){ alert("asdf"); },
    bar : function(){ alert("qwerty"); }
};

var functionIWant = "foo";
myFuncs[functionIWant](); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T04:34:04.797

例如你有两个功能，

```
var function1 = function( value ) {
  console.log( "foo: " + value );
};

var function2 = function( value ){
  console.log( "bar: " + value );
}; 
```

在 functionIWant 数组中，你有函数的名称，

```
function loadContent(href, functionIWant)
{
   $.ajax({

    type: "GET",
    url: href,
    dataType: "json",
    success: function(res, textStatus, xhr) {
    helper();

    var callbacks = $.Callbacks();

    for(var i = 0; i < functionIWant.length; i++){
     callbacks.add( functionIWant[i] ); //on i=0 add function1
     callbacks.fire( "hello" );          // will fire function1
    }

      }
   });
  } 
```

# ios - UILocalNotification 正确触发，但未出现在主屏幕顶部

> ID：14421622
> 
> 赞同：1
> 
> 时间：2013-01-20T04:14:26.133
> 
> 标签：ios, objective-c, xcode, uilocalnotification

我在使用本地通知时遇到了一个奇怪的问题。该通知似乎在模拟器中完美运行。但是，在设备上使用它时，通知在触发时不会在屏幕顶部显示“向下折叠”。我知道警报正在工作，因为徽章编号出现在我的应用程序图标上，如果我向下滑动并查看所有通知，则会列出新通知。出于某种原因，我只是没有看到它发生在主屏幕的顶部。我还检查了设备上应用程序的通知设置，并将其设置为显示在顶部。

这是我的 .m 文件中的示例代码。

```
 [[UIApplication sharedApplication] cancelAllLocalNotifications];

UILocalNotification *_localNotification = [[UILocalNotification alloc]init];

_localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:5];

_localNotification.timeZone = [NSTimeZone defaultTimeZone];

_localNotification.alertBody = @"You are notified";

_localNotification.soundName = UILocalNotificationDefaultSoundName;

_localNotification.applicationIconBadgeNumber = [[UIApplication 
sharedApplication]applicationIconBadgeNumber]+1;

[[UIApplication sharedApplication]scheduleLocalNotification:_localNotification]; 
```

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:01:52.777

只需重新启动 iPhone，它就可以正常工作。诡异的。

# android - 从 SharedPreference 设置 CheckBoxPreference

> ID：14421629
> 
> 赞同：0
> 
> 时间：2013-01-20T04:15:54.250
> 
> 标签：android

我想使用预定义的共享首选项来设置 checkBoxPreference 的值，并使用 checkBoxPreference 设置共享首选项。我试过这段代码，但即使我知道“pre_definied_shared_prefs”存在，checkboxPref 总是最终为空。

```
final CheckBoxPreference checkboxPref = (CheckBoxPreference) getPreferenceManager().findPreference("pre_defined_shared_prefs");

    checkboxPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {            
        public boolean onPreferenceChange(Preference preference, Object newValue) {
            Boolean b = (Boolean) newValue;

            Intent i = getIntent();
            Integer show_num = i.getIntExtra("show_num", -1);
            SettingsManager s = new SettingsManager();
            s.setShowNotification(show_num, b, getApplicationContext());

            return true;
        }
    }); 
```

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:25:53.287

我的preference.xml：

```
<CheckBoxPreference
          android:title="Show Call UI"
          android:defaultValue="true"
          android:summary="Show Call Interface when clicking call button"
          android:key="checkboxPref" /> 
```

休息代码：

```
final CheckBoxPreference checkboxPref = (CheckBoxPreference) getPreferenceManager().findPreference("checkboxPref");

    checkboxPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {            
        public boolean onPreferenceChange(Preference preference, Object newValue) {
            Log.d("MyApp", "Pref " + preference.getKey() + " changed to " + newValue.toString());       
            return true;
        }
    }); 
```

这是有关如何创建新复选框首选项并将其添加到您希望的组的示例或查看[此](https://stackoverflow.com/questions/6272551/programmaticaly-create-dynamic-checkboxpreferences-in-android)

```
public class MyPreferenceActivity extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.my_preference_activity);

        //fetch the item where you wish to insert the CheckBoxPreference, in this case a PreferenceCategory with key "targetCategory"
        PreferenceCategory targetCategory = (PreferenceCategory)findPreference("targetCategory");

        //create one check box for each setting you need
        CheckBoxPreference checkBoxPreference = new CheckBoxPreference(this);
        //make sure each key is unique  
        checkBoxPreference.setKey("keyName");
        checkBoxPreference.setChecked(true);

        targetCategory.addPreference(checkBoxPreference);
    }
} 
```

# python - 从已知的对象列表中创建一个包含所有可能排列的列表，但最终列表的大小为 x

> ID：14421630
> 
> 赞同：0
> 
> 时间：2013-01-20T04:16:00.273
> 
> 标签：python, python-2.7, permutation

假设我有以下列表：

```
lst = [0,1,3,a,b,c] 
```

我希望最终结果是 的所有可能排列`lst`，但长度为 20 个字符。

我已经看过并且只能找到可以创建长度为 6 或更少的最终结果的示例。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T04:24:28.003

我想[`itertools.product`](http://docs.python.org/2/library/itertools.html#itertools.product)这就是你要找的。

```
# A simple example
import itertools
lst = [0, 1]
print(list(itertools.product(lst, repeat=2)))
# [(0, 0), (0, 1), (1, 0), (1, 1)] 
```

请注意，`itertools.product`它本身返回一个`itertools.product`对象，而不是一个列表。

```
# In your case
import itertools
lst = [0, 1, 3, a, b, c]
output = list(itertools.product(lst, repeat=20)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:21:22.700

你确定要`all permutations`吗？假设您想重用长度为 6^20 的列表的字符（不是排列）。

如果您想从该列表中的字符构建一个长度为 20 的字符串，这应该可以完成工作：

```
from random import choice
''.join(choice(chars) for _ in range(length)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T04:32:55.263

问题是排列和组合（如果您使用 itertools）遵循这样的定义，即每个结果只有在其长度等于或小于原始列表的情况下才能物理存在。

如果您建议您希望有效结果之一是“013abc013abc013abc01”，那么您必须将您的列表修改为只有 20 个项目长并由这 6 个值组成。

```
from itertools import permutations
i = [0,1,3,'a','b','c',0,1,3,'a','b','c',0,1,3,'a','b','c',0,1]
results = []
for a in permutations(i, 20):
    results.append(a) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T04:42:25.520

`list(permutations(lst,x))`; 哪里`lst`是可迭代的（你的输入列表）并且`x`是元素的数量

例如：

```
In [8]: lst = [0, 1, 3, 'a', 'b', 'c']

In [9]: from itertools import permutations

In [10]: result=[list(permutations(lst,x)) for x in range(1,len(lst))] 
```

# matlab - Matlab Coder 是否支持并行计算工具箱？

> ID：14421643
> 
> 赞同：1
> 
> 时间：2013-01-20T04:19:07.943
> 
> 标签：matlab, matlab-deployment

我正在使用 Matlab 并行计算工具箱开发一个并行应用程序。我想知道是否可以使用 Matlab Coder for C/C++ 转换应用程序？使用 Matlab Parallel Computing Toolbox 开发的 Parallel Application 是否可以通过 Matlab Coder 转换为 C/C++？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:13:46.700

MATLAB 编码器不支持并行计算工具箱。有关支持的功能，请参见[http://www.mathworks.co.uk/products/matlab-coder/description2.html 。](http://www.mathworks.co.uk/products/matlab-coder/description2.html)

但是，您可以使用使用并行计算的编译器应用程序进行部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T13:49:51.137

从 R2013b 开始，MATLAB Coder 实际上支持 PARFOR 进行代码生成：

[http://www.mathworks.com/help/coder/ref/parfor.html](http://www.mathworks.com/help/coder/ref/parfor.html)

[http://www.mathworks.com/help/coder/release-notes.html](http://www.mathworks.com/help/coder/release-notes.html)

自 R2012b 以来，它已在 MEX 中得到支持（再次参见发行说明）。

# asp.net - 在共享服务器上发布时获取“System.Security.SecurityException：该程序集不允许部分受信任的调用者”

> ID：14421645
> 
> 赞同：3
> 
> 时间：2013-01-20T04:19:32.610
> 
> 标签：asp.net, exception, webserver

我在共享托管服务器上上传了一个 asp.net 网站，但对于某些页面，我收到“SecurityException”。这个页面没有html body，只有这个页面的page_load 事件中写的代码。删除 html 正文的原因是这个页面将充当一个 api，以便第 3 方将创建一个 webrequest 并从页面获得适当的响应。在本地主机上它工作正常，但上传时出现上述错误。我使用了许多项目系统流程所需的第 3 方 dll。

异常详细信息： **小描述**：System.Security.SecurityException：该程序集不允许部分受信任的调用者。

**详细描述**：应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

我还尝试在 web.config 文件中执行完全信任级别，但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-15T05:42:35.290

我有一个类似的问题。

它通过以下配置解决 -

```
<system.web>
<trust level="Full" /> 
```

小心使用大写 F 表示 Full。小写 f 产生以下错误（这花了我几个小时） -

“无法读取信任级别‘完整’的安全策略文件。”

# java - 在 Java 中删除临时文件

> ID：14421647
> 
> 赞同：0
> 
> 时间：2013-01-20T04:20:12.703
> 
> 标签：java

*我有以下代码，创建一个临时文件并读取并删除该文件。但删除后也有文件可供阅读。请帮助找出我的代码错误....*

```
public static void main(String args[]) throws Exception
    {                   
        Calendar mSec = Calendar.getInstance();
        String fileName="hubname_"+"msgname_"+mSec.getTimeInMillis();
        String str ="Hello How are you doing .......";
        System.out.println("fileName :"+fileName);

        File f = File.createTempFile(fileName, ".xml");
        FileWriter fw = new FileWriter(f);
        fw.write(str);
        fw.flush();
        fw.close();

        printFileContent(f);
        f.delete();
        printFileContent(f);

    }
  public static void printFileContent(File f)throws Exception
  {
      BufferedReader reader = new BufferedReader( new FileReader(f));
      String         line = null;
      StringBuilder  stringBuilder = new StringBuilder();
      String         ls = System.getProperty("line.separator");

      while( ( line = reader.readLine() ) != null ) {
          stringBuilder.append( line );
          stringBuilder.append( ls );
      }

      System.out.println("stringBuilder.toString() :"+stringBuilder.toString());
  } 
```

**输出 ：**

```
fileName :hubname_msgname_1358655424194
stringBuilder.toString() :Hello How are you doing .......

stringBuilder.toString() :Hello How are you doing ....... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T04:23:52.103

您应该在 printFileContent 中关闭阅读器。File.delete 不能删除打开的文件（至少在 Windows 上，请参阅下面的 Keith Randall 的评论），在这种情况下它返回 false。您可以检查删除是否成功

```
if (!f.delete()) {
    throw new IOException("Cannot delete " + f);
} 
```

Java 7 中的 File.delete API 添加了以下注释

```
Note that the Files class defines the delete method to throw an IOException when a file cannot be deleted. This is useful for error reporting and to diagnose why a file cannot be deleted. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T04:25:26.213

```
public static void printFileContent(File f)throws Exception
  {
      BufferedReader reader = new BufferedReader( new FileReader(f));
      String         line = null;
      StringBuilder  stringBuilder = new StringBuilder();
      String         ls = System.getProperty("line.separator");

      while( ( line = reader.readLine() ) != null ) {
          stringBuilder.append( line );
          stringBuilder.append( ls );
      }

      System.out.println("stringBuilder.toString() :"+stringBuilder.toString()); 

   if(reader != null){
     reader.close();
    }

  } 
```

# haskell - IxSet 中的文本索引

> ID：14421648
> 
> 赞同：4
> 
> 时间：2013-01-20T04:20:17.530
> 
> 标签：haskell, happstack

看来我不明白文本索引`IxSet`应该如何工作。在这里，我创建了一个按`tags`字段索引项目的单元测试，然后按标签“tag”查询项目。它应该（从我的角度来看）给我所有 3 个项目（因为它们都有标签“标签”），但似乎它们没有。我不明白为什么。

```
{-# LANGUAGE DeriveDataTypeable #-}

import Test.HUnit
import Data.IxSet
import Data.List.Split ( splitOn )
import Data.Data ( Data, Typeable )

data TaggedItem = TaggedItem { getTags :: String }
                  deriving ( Show, Ord, Eq, Data, Typeable )

data Tag = Tag String
           deriving ( Show, Ord, Eq, Data, Typeable )

getTagStrings :: TaggedItem -> [Tag]
getTagStrings = map Tag . splitOn "," . getTags

instance Indexable TaggedItem where
  empty = ixSet
            [ ixFun getTagStrings ]

test3 = TestCase (
  assertEqual "ixFun multiple tags test"
  3
  (size (index @= (Tag "tag"))) )
  where items = [ TaggedItem "tag,tag1,tag2"
                , TaggedItem "tag,tag1,tag2"
                , TaggedItem "tag,tag1,tag2" ]
        index = fromList items

tests = TestList [
  -- TestLabel "test1" test1,
  -- TestLabel "test2" test2,
  TestLabel "test3" test3]

main = do
  runTestTT tests 
```

更新：

嗯，挺有意思的。我添加了字段“名称”并在每个项目名称处设置了不同的名称，现在它可以工作了。

```
{-# LANGUAGE DeriveDataTypeable #-}

import Test.HUnit
import Data.IxSet
import Data.List.Split ( splitOn )
import Data.Data ( Data, Typeable )

newtype TaggedItemName = TaggedItemName { unTaggedItemName :: String }
                       deriving ( Show, Ord, Eq, Data, Typeable )

data TaggedItem = TaggedItem { getName :: TaggedItemName, getTags :: String }
                deriving ( Show, Ord, Eq, Data, Typeable )

data Tag = Tag String
           deriving ( Show, Ord, Eq, Data, Typeable )

getTagStrings :: TaggedItem -> [Tag]
getTagStrings = map Tag . splitOn "," . getTags

instance Indexable TaggedItem where
  empty = ixSet
            [ ixFun getTagStrings ]

test3 = TestCase (
  assertEqual "ixFun multiple tags test"
  3
  (size (index @= (Tag "tag"))) )
  where items = [ TaggedItem (TaggedItemName "name1") "tag,tag1,tag2"
                , TaggedItem (TaggedItemName "name2") "tag,tag1,tag2"
                , TaggedItem (TaggedItemName "name3") "tag,tag1,tag2" ]
        index = fromList items

tests = TestList [
  -- TestLabel "test1" test1,
  -- TestLabel "test2" test2,
  TestLabel "test3" test3]

main = do
  runTestTT tests 
```

作品。所以也许 IxSet 认为这些项目是相同的并以某种方式合并它们（？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T08:16:07.470

是的，IxSet 似乎合并了相等的值。我举了第一个例子并对其进行了更改，以便做到：

```
 where items = [ TaggedItem "tag,tag1,tag2"
                , TaggedItem "tag,tag3,tag4"
                , TaggedItem "tag,tag5,tag6" ] 
```

现在它也有效。

# android - Android 传递和检索数据

> ID：14421649
> 
> 赞同：0
> 
> 时间：2013-01-20T04:20:23.423
> 
> 标签：android, android-intent

一个类可以同时拥有 getExtra 和 putExtra 吗？假设第 1 类将数据传递给第 2 类。第 2 类将数据传递给第 3 类。我想如何让第 2 类工作？

1级

```
public static final String EXTRA_RADIO="com.example.flash.Mode";
int btn;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button bP= (Button)findViewById(R.id.btnP);
    Button bT= (Button)findViewById(R.id.btnP);
    final Intent intent = new Intent(Main.this, Mode.class);
    bP.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            //TODO Auto-generated method stub
            btn=1;
            intent.putExtra(EXTRA_RADIO, btn);
            startActivity(intent);
        }
    });
    bT.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
        //TODO Auto-generated method stub
        btn=2;
        intent.putExtra(EXTRA_RADIO, btn);
        startActivity(intent);
        }
    });
 } 
```

2 级

```
int mode;
int op;
public static final String EXTRA_OP = "com.example.flash.Operator";
public void onStart(){
    super.onStart();
    mode = getIntent().getIntExtra(Main.EXTRA_RADIO, 0);
    setContentView(R.layout.mode);
    if (mode==1){
        m.setText("Practice");
        ok.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                           //codes
                           op=1;
            }
        });
    }
    if (mode==2){
        m.setText("Trial");
        ok.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                             //codes
                             op=2;
            }
        });
    }
        Intent intent = new Intent(Mode.this, Operator.class);
        intent.putExtra(EXTRA_OP, op);
        startActivity(intent);
} 
```

然后 3 级从 2 级获得操作。我的 2 级不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:27:37.663

尝试在*Class 2*`@Override`中为您的 onStart添加。

 *> 一个类可以同时拥有 getExtra 和 putExtra 吗？

是的。看起来你正在使用`getExtra`和`putExtra`不同的`intent`.*

# c - 使用 C 转换 GPS 坐标单位

> ID：14421651
> 
> 赞同：0
> 
> 时间：2013-01-20T04:20:48.273
> 
> 标签：c, gps, coordinates

我想使用 C 语言编写一个简单的程序，在三种不同的符号形式之间转换 GPS 坐标。

我想要程序做的是：1）要求用户输入十进制度坐标。之后，它应该以所有三种形式返回值。

2)要求用户以十进制度分的形式输入。之后，它应该以所有三种形式报告值。

3) 要求用户以度分秒形式输入。之后，它应该以所有三种形式报告值。

**（这就是我在报告时所有三种格式的意思：* 42.87157 度等于 42 度 52.294 分，也等于 42 度 52 分 17.64 秒。）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:31:30.063

休息留作练习：

```
#include <stdio.h>

int main() {
  double d, m;
  scanf("%lf", &d);
  printf("degree: %lf\n", d); 
  m = (d - (int)d) * 60; 
  printf("degree: %d mins: %lf\n", (int)d, m); 
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-16T21:47:42.013

对于懒人

```
#include <stdio.h>

int main() {
  double d, m, s;

  scanf("%lf", &d);
  printf("degree: %lf\n", d); 
  m = (d - (int)d) * 60; 
  s = (m - (int)m) * 60; 
  printf("degree: %d mins: %d sec: %.2lf\n", (int)d, (int)m, s); 
  return 0;
} 
```

# c# - 如何以编程方式创建新的 Mongo 数据库？

> ID：14421652
> 
> 赞同：2
> 
> 时间：2013-01-20T04:21:16.367
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在尝试以编程方式创建一个新数据库，每个客户端一个数据库。

并使用这个：

```
public void CreateNewClientDatabase(Client client)
{
    var connectionString = Util.GetClientDatabaseConnectionString(client.DatabaseName);
    var mongoClient = new MongoDB.Driver.MongoClient(connectionString);
    var server = mongoClient.GetServer();

    var db = server.GetDatabase(client.DatabaseName);
    db.CreateCollection("DatabaseCreated");
} 
```

我遇到的错误`CreateCollection`是我没有正确的凭据，即使在连接字符串中，我的凭据是正确的。

内容`Exception`如下：

```
Invalid credentials for database 'client_database_name'. 
```

和`InnerException`作为：

```
{"Command 'authenticate' failed: auth fails (response: { \"errmsg\" : \"auth fails\", \"ok\" : 0.0 })"} 
```

最终`connectionString`是这样的：

```
mongodb://admin_user:admin_pwd@linus.mongohq.com:10042/client_database_name 
```

我**错过了**什么？

* * *

*PS*使用[1.7 版的 MongoDB 驱动程序](https://github.com/mongodb/mongo-csharp-driver/blob/master/Release%20Notes/Release%20Notes%20v1.7.md)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:43:47.063

Bruno ... 要在像 MongoHQ 这样的共享服务上执行此操作，您需要使用他们的 API 以编程方式创建新数据库。API 的文档位于：http: [//support.mongohq.com](http://support.mongohq.com)。

# java - 如何在不扩展 Activity 的情况下使用编辑文本

> ID：14421654
> 
> 赞同：0
> 
> 时间：2013-01-20T04:21:41.057
> 
> 标签：java, android

我正在制作一个游戏并试图让键盘在他们触摸某个区域时弹出。我已经扩展了一个名为 Screen 的类，并且无法扩展我知道的关于编辑文本但对我不起作用的 Activity。他们是另一种解决方法吗？或者除非你可以让编辑文本在这里工作，因为我一直在尝试但没有运气。`package com.rmjr42.math4kidz;

```
import java.util.List;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Looper;
import android.widget.EditText;

import com.rmjr42.framework.Game;
import com.rmjr42.framework.Graphics;
import com.rmjr42.framework.Image;
import com.rmjr42.framework.Screen;
import com.rmjr42.framework.Graphics.ImageFormat;
import com.rmjr42.framework.Input.TouchEvent;

public class GameScreenCount extends Screen {
    //Math4Kidz keyboard=new Math4Kidz();
    //  EditText text;
    //Surface s=new Surface();
    enum GameState {
        Ready, Running, Paused, GameOver
    }
    GameState state = GameState.Ready;
    // Variable Setup   
    Paint paint, paint2;

    public GameScreenCount(Game game) {
        super(game);
        //  Looper.prepare();
        // Initialize game objects here

        Graphics g = game.getGraphics();

        NewImage pic=new NewImage();

        Assets.background = g.newImage(pic.randombackground(), ImageFormat.RGB565);
        //get one random
        Assets.pic1=g.newImage(pic.singleImage(),ImageFormat.RGB565);

        // Defining a paint object
        paint = new Paint();
        paint.setTextSize(70);
        paint.setTextAlign(Paint.Align.CENTER);
        paint.setAntiAlias(true);
        paint.setColor(Color.WHITE);

        paint2 = new Paint();
        paint2.setTextSize(100);
        paint2.setTextAlign(Paint.Align.CENTER);
        paint2.setAntiAlias(true);
        paint2.setColor(Color.WHITE);

    }

    @Override
    public void update(float deltaTime) {
        List<TouchEvent> touchEvents = game.getInput().getTouchEvents();

        if (state == GameState.Ready)
            updateReady(touchEvents);
        if (state == GameState.Running)
            updateRunning(touchEvents, deltaTime);
        if (state == GameState.Paused)
            updatePaused(touchEvents);
        if (state == GameState.GameOver)
            updateGameOver(touchEvents);
    }

    private void updateReady(List<TouchEvent> touchEvents) {

        state = GameState.Running;
    }

    private void updateRunning(List<TouchEvent> touchEvents, float deltaTime) {

        // 1\. All touch input is handled here:
        int len = touchEvents.size();
        Graphics g = game.getGraphics();
        for (int i = 0; i < len; i++) {
            TouchEvent event = touchEvents.get(i);

            if (event.type == TouchEvent.TOUCH_UP) {
                if (inBounds(event, 300, 100, 200, 200)) {
                    //Looper.prepare();//EDIT TEXT SHOULD GO HERE

                    //game.setScreen(new GameScreenCount(game));
                }

            }
        }

    }

    private boolean inBounds(TouchEvent event, int x, int y, int width,
            int height) {
        if (event.x > x && event.x < x + width - 1 && event.y > y
                && event.y < y + height - 1)
            return true;
        else
            return false;
    }

    private void updatePaused(List<TouchEvent> touchEvents) {
        int len = touchEvents.size();
        for (int i = 0; i < len; i++) {
            TouchEvent event = touchEvents.get(i);
            if (event.type == TouchEvent.TOUCH_UP) {
                if (inBounds(event, 0, 0, 800, 240)){

                    if (!inBounds(event, 0, 0, 35, 35)){
                        resume();}
                }

                if (inBounds(event, 0, 240, 800, 240)){
                    nullify();
                    goToMenu();
                }
            }
        }
    }

    private void updateGameOver(List<TouchEvent> touchEvents) {
        int len = touchEvents.size();
        for (int i = 0; i < len; i++) {
            TouchEvent event = touchEvents.get(i);
            if (event.type == TouchEvent.TOUCH_DOWN) {
                if (inBounds(event, 0, 0, 800, 480)) {
                    nullify();
                    game.setScreen(new MainMenuScreen(game));
                    return;
                }
            }
        }

    }

    @Override
    public void paint(float deltaTime) {
        Graphics g = game.getGraphics();

        g.drawImage(Assets.background, 0, 0);
        g.drawImage(Assets.pic1, 300, 100);
        g.drawString("How many are there ? ", 400, 400, paint);

        // Secondly, draw the UI above the game elements.

        if (state == GameState.Paused)
            drawPausedUI();
        if (state == GameState.GameOver)
            drawGameOverUI();

    }

    private void nullify() {
        paint = null;
        // Call garbage collector to clean up memory.
        System.gc();

    }
    private void drawPausedUI() {
        Graphics g = game.getGraphics();
        // Darken the entire screen so you can display the Paused screen.
        g.drawARGB(155, 0, 0, 0);
        g.drawString("Resume", 400, 165, paint2);
        g.drawString("Menu", 400, 360, paint2);
    }

    private void drawGameOverUI() {
        Graphics g = game.getGraphics();
        g.drawRect(0, 0, 1281, 801, Color.BLACK);
        g.drawString("GAME OVER.", 400, 240, paint2);
        g.drawString("Tap to return.", 400, 290, paint);

    }

    @Override
    public void pause() {
        if (state == GameState.Running)
            state = GameState.Paused;

    }

    @Override
    public void resume() {
        if (state == GameState.Paused)
            state = GameState.Running;
    }

    @Override
    public void dispose() {

    }

    @Override
    public void backButton() {
        pause();
    }

    private void goToMenu() {
        // TODO Auto-generated method stub
        game.setScreen(new MainMenuScreen(game));

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:30:29.337

它的工作量很大，特别是如果您想与任何键盘一起工作。

Android 有一个输入法框架，允许类与键盘交互。其中一半由键盘实现，一半由编辑字段实现。你需要做下半场。您需要实现的主界面是

```
android.view.inputmethod.InputMethod 
```

看看那个和包装的其余部分。

# c++ - 如何通过 Windows 标题查找进程并在打开时关闭它

> ID：14421655
> 
> 赞同：-2
> 
> 时间：2013-01-20T04:22:05.213
> 
> 标签：c++

每当该进程打开时，我都想按 Windows 标题关闭进程。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:26:40.843

在 Windows 上，使用`FindWindow()`查找具有所需标题的窗口，如果找到，则使用`PostMessage()`向其发布`WM_QUIT`消息。如果窗口在一段时间后仍在运行，那么您可以根据权限，通过使用 和 来蛮力`GetWindowThreadProcessId()`杀死`OpenProcess()`它`TerminateProcess()`。

# c++ - `__FILE__` 是否有广泛可用的宽字符变体？

> ID：14421656
> 
> 赞同：15
> 
> 时间：2013-01-20T04:22:24.337
> 
> 标签：c++

人们通常可以在 C++ 程序中使用`__LINE__`和，其中包含许多工具链，[包括 GCC](http://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html)。`__FILE__`

`__LINE__`在 GCC 下计算为类型的表达式`int`；
`__FILE__`计算为 a`char const[N]`其中*N*是适当的值。

*   `__FILE__`是否有任何主要工具链提供与 with type等价的工具`wchar const[N]`？
*   如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-20T04:36:07.713

您可以自己制作`WFILE`：

```
#define WIDE2(x) L##x
#define WIDE1(x) WIDE2(x)
#define WFILE WIDE1(__FILE__) 
```

用非 ASCII 字符和文件名测试`马克.cpp`：

```
#include <stdio.h>
#include <io.h>
#include <fcntl.h>

#define WIDE2(x) L##x
#define WIDE1(x) WIDE2(x)
#define WFILE WIDE1(__FILE__)

int main() {
    _setmode(_fileno(stdout), _O_U16TEXT); // required for Unicode output to console
    wprintf(L"%s\n", WFILE);
} 
```

Demo（从cmd.exe运行并安装了中文支持）：

```
C:\>cl /W4 /nologo 马克.cpp
马克.cpp

C:\>马克.exe
马克.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T08:14:41.963

利用：

```
WIDE(MEXPAND(__FILE__)) 
```

和

```
WIDE(STRINGIFY(__LINE__)) 
```

或替换`__LINE__`为任何需要字符串化的内容，并替换`__FILE__`为您想要扩展的任何宏字符串文字。

使用以下定义：

```
#define STRINGIFY2(m) #m
#define MEXPAND(m) m
#define STRINGIFY(m) STRINGIFY2(m)
#define WIDE(m) L ## m 
```

示例用法：

```
#define AssertBreakMethod DebugBreak

#define AssertBreakForce(expr) \
  do \
  { \
    if (!(expr)) \
    { \
      OutputDebugStringW(WIDE(MEXPAND(__FILE__)) \
          WIDE("(") WIDE(STRINGIFY(__LINE__)) \
          WIDE("): Assertion failed: ") \
          WIDE(#expr) WIDE("\n")); \
      AssertBreakMethod(); \
    } \
  } \
  while (0) 
```

请注意，OutputDebugString 的整个参数在编译时静态组装成单个字符串文字。

宏的字符串化技巧是将它传递给另一个宏。当`__FILE__`被传递给`MEXPAND`它时，它被扩展。`MEXPAND`返回它的参数，现在是一个字符串。然后将领先的 L 放在那里以使其变宽是合法的。

`STRINGIFY`做同样的伎俩，它传递它的参数，通过该参数`STRINGIFY2`将参数扩展为行号（此时看起来像一个整数），然后`STRINGIFY2`将`#`符号放在它之前，将整数字符串化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-10T20:10:49.563

在 Visual Studio 中，只需用 包围它`_T()`，例如：

```
TRACE( _T("function = %s"), _T(__FUNCTION__); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-13T19:32:42.653

我会将这个答案作为对较早回复的评论，但由于没有最低 50 的声誉来发表评论，因此不允许...

在 Visual Studio 中，_T(__FILE__)**不会**扩展为 L__FILE__，除非您在 tchar.h 头文件中修改其 _T 的标准定义。_T(__FILE__) 和 _T(__FUNCTION__) 在 5 年前工作，如果您正在寻找当前文件和函数的广泛版本，今天仍然可以工作。

_T(x) 定义为 __T(x)，当定义 _UNICODE 时定义为 L##x，否则定义为 x。因此 _T(__FILE__) 扩展为 __T("my_file.c") 之类的东西，然后根据 _UNICODE 扩展为 L"my_file.c" 或 "my_file.c"。在声称它们不起作用之前测试它们是有用的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-12-25T22:28:22.883

例如使用 const`auto name = L"" __FUNCTION__;`

# python - django-rest-framework 教程 4（身份验证和权限）问题

> ID：14421657
> 
> 赞同：1
> 
> 时间：2013-01-20T04:22:36.647
> 
> 标签：python, django, api, django-rest-framework

顺利完成教程 1-3 后，我按照教程 (http://django-rest-framework.org/tutorial/4-authentication-and-permissions.html) 完成了“为我们的用户模型添加端点”部分.

（也就是说，添加“url(r'^users/$',views.UserList.as_view()), url(r'^users/(?P[0-9]+)/$',views.UserInstance .as_view())" 完成了。）

然后，我使用“python manage.py runserver”命令运行服务器并将浏览器指向`http://127.0.0.1:8000/users/`并收到以下错误消息：

（消息开始）

/users/ 处的名称错误

名称“用户”未定义

请求方法：GET

请求网址： `http://127.0.0.1:8000/users/`

Django 版本：1.4.3

异常类型：名称错误

异常值：未定义名称“用户”

异常位置：Meta 中的 /home/user/tutorial/snippets/serializers.py 第 14 行

（留言结束）

我错过了什么？

我的 serializer.py 中的代码是：

```
from django.forms import widgets
from rest_framework import serializers
from snippets import models

class SnippetSerializer(serializers.ModelSerializer):
    class Meta:
        model = models.Snippet
        fields = ('id', 'title', 'code', 'linenos', 'language', 'style')

class UserSerializer(serializers.ModelSerializer):
    snippets = serializers.ManyPrimaryKeyRelatedField()

    class Meta:
        model = User
        fields = ('id', 'username', 'snippets') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T06:38:25.553

您需要导入 Django 的用户类。

```
from django.contrib.auth.models import User 
```

目前未提及该导入行。我想应该是吧。

# android - 以编程方式重新添加片段

> ID：14421658
> 
> 赞同：2
> 
> 时间：2013-01-20T04:23:13.460
> 
> 标签：android, android-fragments, android-fragmentactivity

我正在构建一个使用嵌套片段的应用程序。第一层片段是一个动画菜单，其中一个片段是菜单，另一个是内容。一些内容片段还会包含片段（子片段）。但是，我想禁用后退按钮在第一层片段上弹出片段堆栈。

我已成功委派后退按钮来处理子片段。对于顶级片段，如果它们已创建，我想重用它们，因此我将片段保存到哈希中，当添加新片段时，我只需删除（）当前片段，然后用新片段执行替换（），这样视图已更新。我从不调用 addToBackStack。但是，当尝试导航回以前创建的片段（保存在哈希中）时，我收到错误：

```
java.lang.IllegalStateException: No activity 
```

但仅当从重新添加的嵌套片段调用 getChildFragmentManager() 时。我终其一生都无法弄清楚为什么。有什么建议吗？

# error-handling - 一个lua协程的栈是隐式进入的，没有调用resume？

> ID：14421659
> 
> 赞同：0
> 
> 时间：2013-01-20T04:23:17.657
> 
> 标签：error-handling, lua, callstack, implicit, coroutine

我正在使用 lua coroutines (lua 5.1) 为应用程序创建插件系统。我希望使用协程，以便插件可以像一个单独的应用程序一样运行，每个处理帧产生一次。插件程序通常遵循如下公式：

```
function Program(P)
    -- setup --
    NewDrawer(function()
        -- this gets rendered in a window for this plugin program --
        drawstuff(howeveryouwant)
    end)
    -- loop --
    local continue = true
    while continue do
        -- frame by frame stuff excluding rendering (handled by NewDrawer) --
        P = coroutine.yield()
    end
end 
```

每个插件每帧在应用程序的主循环中恢复一次。然后，当绘图开始时，每个插件都有一个单独的窗口，它在其中执行传递给 NewDrawer 的函数。

像这样的东西：

```
while MainContinue do
    -- other stuff left out --
    ExecutePluginFrames() -- all plugin coroutines resumed once

    BeginRendering()
    -- other stuff left out --
    RenderPluginWindows() -- functions passed to NewDrawer called.
    EndRendering()
end 
```

但是我发现，每当渲染中发生错误时，这突然开始表现得很奇怪，并弄乱了我原本强大的错误处理系统。我花了一点时间来理解正在发生的事情，但似乎我期望在主线程的调用堆栈中的对 WIN:Draw() 的调用（因为它由主应用程序处理）实际上是导致隐式跳转到协程的调用堆栈。

起初的问题是程序突然关闭，没有有用的错误输出。然后在查看插件程序中定义的渲染函数的堆栈回溯后，我发现从主线程到窗口的 Draw 的所有内容都不存在，并且该 yield 在调用堆栈中。

似乎因为窗口是在线程和绘图函数中创建的，它们正在由该线程的调用堆栈处理，这是一个问题，因为这意味着它们不在主线程中设置的 pcall 之外。

这假设会发生吗？它是 C 源代码中的错误/快捷方式的结果吗？我做错了什么或至少做得不够正确？有没有办法干净地处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:53:39.893

我发现了为什么在我的情况下会发生这种情况。调用传递给 NewDrawer 的函数的渲染对象在创建时（通过 c 代码）使用指向创建它们的 lua 状态的指针进行初始化，这用于访问它们关联的 lua 数据并用于调用绘图函数。我没有看到 lua_State 和协程之间的联系。因此，事实证明，如果 C 代码导致函数在 yield 之后在堆栈中被调用，则它们可能会被调用。

就解决方案而言，我决定将程序分成两个协程，一个用于渲染，一个用于处理。这解决了这个问题，允许渲染对象的创建线程同时是调用线程，并保持渲染循环和处理循环独立的优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:27:55.800

我无法重现您描述的效果。这是我正在运行的代码：

```
local drawer = {}
function NewDrawer(func)
  table.insert(drawer, func)
end

function Program(P)
    NewDrawer(function()
        print("inside program", P)
    end)
    -- loop --
    local continue = true
    while continue do
        -- frame by frame stuff excluding rendering (handled by NewDrawer) --
        P = coroutine.yield()
    end
end

local coro = coroutine.create(Program)
local MainContinue = true
while MainContinue do
    -- other stuff left out --
    -- ExecutePluginFrames() -- all plugin coroutines resumed once
    coroutine.resume(coro, math.random(10))
    -- RenderPluginWindows() -- functions passed to NewDrawer called.
    for _, plugin in ipairs(drawer) do
      plugin()
    end
    MainContinue = false
end 
```

当我单步执行代码并查看堆栈时，NewDrawer 中设置的回调在“主”线程中被调用。如果你调用`coroutine.running()`which 返回当前线程或者`nil`你在主线程中，你可以自己看到它。

# php - 如何使用 PHPMailer 添加更多变量

> ID：14421660
> 
> 赞同：-1
> 
> 时间：2013-01-20T04:23:26.960
> 
> 标签：php, email, phpmailer

我有一个 HTML（表格）订单。用户需要填写各种单元格以显示他们想要订购的各种物品的数量，如您在此处看到的：http: [//angelasmith.com.au/staging/](http://angelasmith.com.au/staging/)

我刚刚使用他们提供的默认代码设置了 PHPMailer，并且可以确认我正在接收这些电子邮件。我现在需要修改他们的代码，以便我收到的电子邮件实际显示用户在我的订单中输入的信息/数量。

这是我的 mail.php 文件中的示例。目前，我收到的电子邮件内容为“这是粗体的 HTML 邮件正文！” 根据指定的 Body 变量。我需要收到包含用户输入的信息/数量的订单。我已经在网上彻底搜索过，只能找到电子邮件和消息的示例，而不是其他自定义表单字段。

```
$mail->Subject = "New Online Form Enquiry";
$mail->Body    = "This is the HTML message body <b>in bold!</b>";
$mail->AltBody = "This is the body in plain text for non-HTML mail clients";

if(!$mail->Send())
{
   echo "Message could not be sent. <p>";
   echo "Mailer Error: " . $mail->ErrorInfo;
   exit;
}

echo "Message has been sent";
?> 
```

我的 HTML 文件中的表格行示例。我包括了这个，因为我相信我需要添加每个单元格名称的变量，例如 $b15 来检索用户输入，但我不确定。我不介意我收到的电子邮件是否不显示为表格 - 我只需要能够阅读用户在表格中输入的任何内容。

```
<tr>
 <td rowspan="2" align="right" class="leftColText"><strong>10 RE</strong></td>
 <td height="28"><input name="b15" type="text" class="tdcenter" id="b15" value="1200" style="width:100%;"/></td>
 <td><input name="c15" type="text" id="c15" style="width:100%;" onchange="javascript:calcupptbl(15,1.2,5)"/></td>
 <td><input name="d15" type="text" id="d15" style="width:100%;" onchange="javascript:calcupptbl(15,1.2,5)"/></td>
 <td><input name="e15" type="text" id="e15" style="width:100%;" onchange="javascript:calcupptbl(15,1.2,5)"/></td>
 <td><input name="f15" type="text" id="f15" style="width:100%;" onchange="javascript:calcupptbl(15,1.2,5)"/></td>
 <td><input name="h15" type="text" id="h15" style="width:100%;"onchange="javascript:calcupptbl(15,1.2,5)"/></td>
 <td><input name="i15" type="text" id="i15" style="width:100%;" onchange="javascript:calcupptbl(15,1.2,5)"/></td>
 <td><input name="j15" type="text" id="j15" style="width:100%;" onchange="javascript:calcupptbl(15,1.2,5)"/></td>
 <td><input name="k15" type="text" id="k15" style="width:100%;" onchange="javascript:calcupptbl(15,1.2,5)"/></td>
 <td><input name="l15" type="text" class= "tdcenter" id="l15" value="0.00" style="width:100%;"/></td>
 <td><input name="m15" type="text" class="tdcenter" id="m15" value="0" style="width:90%;" onchange="javascript:calcupptbl(15,1.2)"/></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:05:04.363

好的......所以，如果我清楚地理解，一旦客户点击“提交订单”，您发送邮件的脚本就会使用 post 方法调用。所以你必须检索提交的值。因此，在您的脚本顶部执行此操作，例如：

```
if (!empty($_POST))
{
    $quantity = isset($_POST['quantity']) ? $_POST['quantity'] : 0;
    $account = isset($_POST['quantity']) ? $_POST['quantity'] : 'Anonymous'; 
```

现在......一旦您检索、清理并检查了所有值，您就可以将它们插入到您的邮件正文中：

```
 $mail->Body = "I just received an order of $quantity items from $account!"; 
```

每个 $_POST 值对应于表单的输入 id。

# java - Java 中的队列允许删除随机元素。这很糟糕吗？

> ID：14421662
> 
> 赞同：7
> 
> 时间：2013-01-20T04:24:02.273
> 
> 标签：java, data-structures, queue

`Queue`在Java中提供了FIFO数据结构。据我所知，队列有责任遵守先进先出的行为。换句话说，您不能从队列中间删除项目。但是，在 Java 中，我们可以使用`iterator`.

这是一个糟糕的设计封装虎钳吗？还是队列数据结构应该允许这样做？

```
Queue<String> queue = new LinkedList<String>();
queue.add("e1");
queue.add("e2");
queue.add("e3");
queue.add("e4");

queue.remove("e3"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T04:52:27.620

`Queue`通过成为`Collection`层次结构的一部分，显然继承了其中一些附加功能。`Queue`从多态的角度来看，像其他任何行为一样操作是有益的，`Collection`因为它增加了数据结构的可移植性。

从设计的角度来看，我不会说它一定是坏的。想象一下杂货店的队列/线路。在某些情况下，可能需要将客户从队伍的中间移除。队列的这种特定实现支持这一点，这可能很有用。

虽然您可能会争辩说其他方法可能会让您在脚下开枪，但您可以轻松创建一个`Queue`不允许像这样的实现，`remove(Object)`或者`iterator.remove()`如果您想要严格的`Queue`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T04:52:02.607

> 据我所知，队列有责任遵守先进先出的行为。

您可能一直在阅读教科书或一些讲义或描述理想化 FIFO 队列如何工作的东西。但是你没有意识到并不是所有的队列都是先进先出的。不在现实世界中，也不在计算机系统中。（例如，如果（假设）奥巴马总统去了一家繁忙的麦当劳餐厅，您会发现他立即被排在了队列的最前面。这是一个以非先进先出方式表现的队列。）

无论如何，Java`Queue`是任何类型队列的接口，而不仅仅是 FIFO 队列。它还支持优先级队列，以及您可以想到的任何其他排队语义……如果您愿意提供自己的实现类。

另一点是该`remove(E)`操作不提供“请下一位客户”操作。这相当于一个顾客决定他们真的更喜欢披萨……然后走出门外。理想化的队列不支持这一点，但可用的库类支持......因为应用程序需要能够做这种事情。

底线是 Java`Collection`类层次结构（包括线索`Queue`）被设计为有用且易于使用，而不是严格适合某人的数据结构抽象模型。

* * *

> 但是 Queue 可能允许一个偷偷摸摸的方法，它可以让你潜入队列的中间——那个方法在哪里？

好吧，因为大多数实际应用程序不需要它，所以它不存在。（如果这是一个常见的用例，即使不在`Queue`接口中，也会在特定的队列实现类中提供这样的方法。）

再一次，Java 类和接口是针对它们在实际程序中的实用性和可用性而指定的，而不是（在这种情况下）因此它们可以在汉堡联合中对 POTUS 进行建模。

> 可能我被我在学校做过的教科书定义和 C/C++ 实验室洗脑了。

另一种解释是您误解了定义等的真正目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T05:03:15.757

Java Queue 不一定是 FIFO。队列 API 说

`Queues typically, but do not necessarily, order elements in a FIFO (first-in-first-out) manner`.

这取决于实现，例如 PriorityQueue 不是 FIFO，但您使用的 LinkedList 是 FIFO。

Queue.remove() API 没有说它删除随机元素，它说

```
Retrieves and removes the head of this queue. 
```

在你的例子中，它必须是

```
queue.remove(); 
```

它会删除`e1`

# vim - 除非我停止使用“文件类型缩进”，否则不能使用 vim-perl

> ID：14421669
> 
> 赞同：0
> 
> 时间：2013-01-20T04:25:36.003
> 
> 标签：vim, vim-perl

我在这里找到了`vim-perl` [插件](https://stackoverflow.com/questions/7905836/why-is-vim-indenting-my-perl-code-incorrectly)，但我无法通过以下方式启用它：

`filetype plugin indent on`（看到那个链接后，我改变了“插件”和“缩进”的顺序）

我无法禁用插件支持，所以我尝试了另一种方法，

```
if &filetype == 'perl'
    filetype plugin on
else
    filetype plugin indent on
endif 
```

但这也不起作用！当我`filetype`在 VIM 中执行命令时，我看到`plugin, autodetection, indent`都是 ON

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:25:43.847

> 但这也不起作用！当我在 VIM 中执行文件类型命令时，我看到插件、自动检测、缩进都打开了

当然，它不会。还启用文件类型检测，因此在运行之前`:filetype`无法自动拥有`&filetype`equal 。`perl``:filetype on`

你可以尝试类似的东西

```
function s:DisablePerlIndent()
    augroup DisablePerlIndent
        if &ft is# 'perl'
            autocmd! BufEnter <buffer> filetype indent off
        else
            autocmd! BufEnter <buffer>
        endif
    augroup END
endfunction
augorup DisablePerlIndent
    autocmd! FileType * call s:DisablePerlIndent()
augroup END 
```

，但我怀疑这是否真的有效。如果您遵循@IngoKarkat 的建议并说出“无法启用”是什么意思，那就更好了。

# java - 在 Java 中使用 printf 完美格式化

> ID：14421674
> 
> 赞同：2
> 
> 时间：2013-01-20T04:27:04.007
> 
> 标签：java

我正在尝试让我的程序打印出三个项目的清单，其中包含它们的名称数量和价格。一切正常，我所需要的只是如何形成价格和总计，以使所有小数每次都对齐，无论数字有多大。这是我的代码

```
 import java.util.Scanner;
    class AssignmentOneTest {

public static void main(String[] args)
{
    Scanner kb = new Scanner(System.in);

    //       System.out.printf("$%4.2f for each %s ", price, item);
    //       System.out.printf("\nThe total is: $%4.2f ", total);

    //process for item one
    System.out.println("Please enter in your first item");
    String item = kb.nextLine();
    System.out.println("Please enter the quantity for this item");
    int quantity = Integer.parseInt(kb.nextLine());
    System.out.println("Please enter in the price of your item");
    double price = Double.parseDouble(kb.nextLine());

    //process for item two
    System.out.println("Please enter in your second item");
    String item2 = kb.nextLine();
    System.out.println("Please enter the quantity for this item");
    int quantity2 = Integer.parseInt(kb.nextLine());
    System.out.print("Please enter in the price of your item");
    double price2 =Double.parseDouble(kb.nextLine());
    double total2 = quantity2*price2;
    //       System.out.printf("$%4.2f for each %s ", price2, item2);
    //       System.out.printf("\nThe total is: $%4.2f ", total2);

    //process for item three
    System.out.println("Please enter in your third item");
    String item3 = kb.nextLine();
    System.out.println("Please enter the quantity for this item");
    int quantity3 = Integer.parseInt(kb.nextLine());
    System.out.println("Please enter in the price of your item");
    double price3 = Double.parseDouble(kb.nextLine());
    double total3 = quantity3*price3;
    //       System.out.printf("$%4.2f for each %s ", price3, item3);
    //       System.out.printf("\nThe total is: $%4.2f ", total3);

    double total = quantity*price;

    double grandTotal = total + total2 + total3;
    double salesTax = grandTotal*(.0625);
    double grandTotalTaxed = grandTotal + salesTax;

    String amount = "Quantity";
    String amount1 = "Price";
    String amount2 = "Total";
    String taxSign = "%";

    System.out.printf("\nYour bill: ");
    System.out.printf("\n\nItem");
    System.out.printf("%28s %11s %11s", "Quantity", "Price", "Total");

    //complete item one format
    System.out.printf("\n%-30s", item);
    System.out.printf("%-10d", (int)quantity);
    System.out.printf("%-10.2f", (float)price);
    System.out.printf("  " + "%-10.2f", (float)total);

    //complete item two format
    System.out.printf("\n%-30s", item2);
    System.out.printf("%-10d", (int)quantity2);
    System.out.printf("%-10.2f", (float)price2);
    System.out.printf("  " + "%-10.2f", (float)total2);

    //complete item three format
    System.out.printf("\n%-30s", item3);
    System.out.printf("%-10d", (int)quantity3);
    System.out.printf("%-10.2f", (float)price3);
    System.out.printf("  " + "%-10.2f", (float)total3);

    System.out.printf("\n\n\nSubtotal %47.2f", grandTotal);
    System.out.printf("\n6.25 %s sales tax %39.2f", taxSign, salesTax);
    System.out.printf("\nTotal %50.2f", grandTotalTaxed);

} 
```

问题是每次价格相同时，一切都排成一行，但是假设我为两个不同的项目输入了 50.00 的价格和 2.50 的价格，那么项目价格和总小数点并不都排成一行， 请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T05:19:32.660

我发现如果我在一对匹配的函数中进行输出，一个用于标题，一个用于数据，那么排列标题和列会容易得多，例如：

```
public static void prLine (String item, int quantity, double price, double total) {
    System.out.printf("\n%-20.20s %10d %10.2f %10.2f", item, quantity, 
            price, total);
}   

public static void prTitles () {
    System.out.printf("\n%-20s %10s %10s %10s", "Item", "Quantity", 
            "Price", "Total");
} 
```

您可以看到以这种方式很容易使字段宽度很好地对应。然后我可以按如下方式使用这些功能：

```
prTitles ();
prLine (item,quantity,price,total);
prLine (item2,quantity2,price2,total2);
prLine (item3,quantity3,price3,total3); 
```

...我得到了我认为你正在寻找的风格的排列输出：

```
Your bill:
Item                   Quantity      Price      Total
first                         1       1.50       1.50
second                       10      12.50     125.00 
third                       456     322.00  146832.00 
```

将输出代码放在函数中也大大减少了`main()`函数中的代码行数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T04:44:55.903

你必须自己控制它。

基本上我认为有两种不同的方法来处理这个问题。

第一种方法是在输出之前检查输出的长度，方法是将任何必要的内容转换为字符串，然后检查它的长度。完成此操作后，您可以在价格之间添加空格以使它们对齐。像这样的东西可能能够实现这一点，当然集成但是你需要它：

```
int length = String.valueOf(1000d).length(); 
```

我想到的第二种方法是在价格之间添加标签以使其自动排列。当然，这样一来，您在所有输出之间的大部分时间都会有额外的空格，并且您必须确保项目名称不够长，以至于您需要 2 个或更多选项卡。

祝你好运！如果您需要更多说明，请告诉我。

编辑：为了让它更好一点，您可以合并上面的长度检查并使用 printf 的宽度说明符填充空格。它好一点。

```
// calculate padding based on the length of the output
String format = "%" + padding + "d";
System.out.printf(format, variables); 
```

EDIT2：这个的OOP版本，它并不完美，但做得很好:)

EDIT3：在代码中添加了一些注释。

[http://pastebin.com/CqvAiQSg](http://pastebin.com/CqvAiQSg)

# javascript - 滑块使用来自对象的值作为条件语句中的条件使图像可见

> ID：14421676
> 
> 赞同：0
> 
> 时间：2013-01-20T04:27:09.750
> 
> 标签：javascript, jquery, jquery-ui, conditional-statements

我在网站上有一个滑块，通过滑动它，图像消失并出现。这是通过条件语句完成的。

```
$(function () {
    $("#slider-range").slider({
        range: true,
        min: 300,
        max: 3000,
        values: [300, 3000],
        step: 10,
        slide: function (event, ui) {
            $("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
            var handlevalues = ($("#slider-range").slider('values'));
            var object0001={price:1300}
            var object0002={price:1400}
            var object0003={price:1240}
            if (object0001.price > handlevalues[0] && object0001.price < handlevalues[1]) {
                $("#dot0001").css("visibility", "visible");
            } else {
                $("#dot0001").css("visibility", "hidden");
            }
            if (object0002.price > handlevalues[0] && object0002.price < handlevalues[1]) {
                $("#dot0002").css("visibility", "visible");
            } else {
                $("#dot0002").css("visibility", "hidden");
            }
            if (object0003.price > handlevalues[0] && object0003.price < handlevalues[1]) {
                $("#dot0003").css("visibility", "visible");
            } else {
                $("#dot0003").css("visibility", "hidden");
            }
        }
    });
}); 
```

问题是：有超过 100 个图像和相应的对象，添加所有这些需要很长时间，并且会使我的代码变得很长。最重要的是，我将每天添加和删除图像。有没有办法让它更短？这是我想到的，但我没有这样做的知识。

我希望 jQuery 识别名称以“object”开头的所有对象，并且属性“price”的值在滑块的范围内。为了使这更容易，我们说这是 set1。

然后我希望 jQuery 找到所有以“点”开头的 id，并以与集合 1 中的对象相同的 4 位数字结束，并使它们可见，并且所有其他以“点”开头的 id 的图像不可见.

使用给定代码的示例：jQuery 扫描并发现`object0001.price= 1300`. 然后 jquery 查找具有`id=dot0001`. 如果`object0001.price=1300`在滑块图像的范围内，则`id=dot0001`变为可见，如果不在，则变为隐藏。

任何帮助表示赞赏。如果有问题，我就在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:56:39.097

以下是一个解决方案，您可以在 html 中插入商品价格作为`data-`属性，我假设由服务器代码生成。

出于演示目的，我使用了`DIV`带有价格的文本。项目有一个共同的类名，不需要 ID。

```
<div class="item" data-price="320">320</div> 
```

幻灯片代码仍然可以使用一些优化，但直到确定这是模块需要在这里工作的方式是演示代码：

```
/* cache items */
var $items=$('.item'), $max=$('#max'), $min=$('#min');

$("#slider").slider({
        range: true,
        min: 300,
        max: 800,
        values: [300,800],
        step: 10,
        slide: function (event, ui) {
            var min=ui.values[0],max=ui.values[1];
            /* show slider values in min/max spans*/
            updateDisplayValues( max,min);  
            /* changing class more efficient than inline css*/          
            $items.removeClass('hidden').filter(function(){
                var price= $(this).data('price');  
                /* filter items that fall outside of range*/              
                return price < min || price> max;
            }).addClass('hidden');
        }
});

function updateDisplayValues( max,min){
    $max.text('Max: '+ max);
    $min.text('Min: '+ min);
} 
```

CSS：

```
.item.hidden{
    visibility:hidden
} 
```

**[JSFIDDLE 演示](http://jsfiddle.net/SPkD9/3/)**

如果需要，还有其他几种简单的方法可以将数据放入页面，例如将所有数据加载到 JSON 数组中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:16:43.813

```
$(function () {
    var allObjects = [
        object0001:{price:1300},
        object0002:{price:1400},
        object0003:{price:1240}
    ];
    $("#slider-range").slider({
        range: true,
        min: 300,
        max: 3000,
        values: [300, 3000],
        step: 10,
        slide: function (event, ui) {
            var priceMin, priceMax, objectName, objectStep, dotName, dotStep, visible;
            $("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
            var handlevalues = ($("#slider-range").slider('values'));
            priceMin = handlevalues[0];
            priceMax = handlevalues[1];
            for ( objectName in allObjects ) {
                if ( allObjects.hasOwnProperty(objectName) ) {
                    objectStep = allObjects[objectName];
                    dotName = objectName.replace("object","dot");
                    dotStep = $("#"+dotName);
                    visible = (objectStep.price > priceMin && objectStep.price < priceMax);
                    dotStep.toggle(visible);
                }
            }
        }
    });
}); 
```

这准确地回答了您的问题，但需要您同时制作点对象和 allObjects JSON 对象。将对象的价格作为`data-price`属性放在点对象上会更简洁，而不是循环遍历所有对象，而是循环遍历`$("[id^='dot']")`

# php - Magento 令人沮丧的内存限制

> ID：14421677
> 
> 赞同：1
> 
> 时间：2013-01-20T04:27:24.827
> 
> 标签：php, magento, magento-1.5

我与 Magento 合作了很长一段时间，但最近我很沮丧，因为我收到“允许的内存大小”错误。这通常是通过增加相关 .htaccess 文件中的“php_value memory_limit”来解决的（根据我的理解），自我推出商店之日起，我已将其设置为较高的值。

无论如何，尽管我最近在 error_log 中收到以下错误：

```
 PHP Fatal error:  Allowed memory size of 52428800 bytes exhausted (tried to allocate 10282 bytes) in /home/store/public_html/includes/src/__default.php on line 2976
    PHP Fatal error:  Allowed memory size of 52428800 bytes exhausted (tried to allocate 32 bytes) in /home/store/public_html/includes/src/__default.php on line 56485
    PHP Fatal error:  Allowed memory size of 52428800 bytes exhausted (tried to allocate 77 bytes) in /home/store/public_html/includes/src/__default.php on line 56485 
```

如果有帮助，我将指出以下相关行。（问题中的行标有** **）

2976:

```
 try {
        $includeFilePath = realpath($this->_viewDir . DS . $fileName);
        if (strpos($includeFilePath, realpath($this->_viewDir)) === 0 || $this->_getAllowSymlinks()) {
            **include $includeFilePath;**
        } else {
            Mage::log('Not valid template file:'.$fileName, Zend_Log::CRIT, null, null, true);
        } 
```

56485：

```
public function fetchAll($style = null, $col = null)
{
    if ($style === null) {
        $style = $this->_fetchMode;
    }
    try {
        if ($style == PDO::FETCH_COLUMN) {
            if ($col === null) {
                $col = 0;
            }
            return $this->_stmt->fetchAll($style, $col);
        } else {
            **return $this->_stmt->fetchAll($style);**
        }
    } catch (PDOException $e) {
        #require_once 'Zend/Db/Statement/Exception.php';
        throw new Zend_Db_Statement_Exception($e->getMessage(), $e->getCode(), $e);
    }
} 
```

在这里我觉得奇怪的是“52428800 字节”，据我了解，它转换为 50MB。这些 50MB 可以在哪里预定义？我清楚地检查了我的 php 信息，但该值无处可见，“php_value memory_limit”也与我之前定义的相对应，并且远不接近 50MB。

我的 Magento 设置：

*   Magento 1.5.10
*   已启用内存缓存
*   启用编译

硬件设置：

*   具有 12GB 内存的 VPS
*   WHM / cPanel
*   NginxCP

当前的 PHP 配置：

*   默认 PHP 版本（.php 文件） 5
*   PHP 5 处理程序 dso
*   PHP 4 处理程序无
*   Apache suEXEC 上
*   Apache Ruid2 上

如果有人能够为我指出如何解决这个问题的正确方向，我将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:33:20.963

这可以设置在

1.  `php.ini`文件_

2.  您的 Apache 配置（`.htaccess`或`http.conf`/it's 包括）

3.  在运行时调用`ini_set`

更有可能的是，您的网络主机安装了限制内存的第三方 PHP 扩展程序（例如[suhosin](http://www.hardened-php.net/suhosin/)。我会先联系他们，然后再花很多时间追逐鬼魂。

# image - Github 自述文件中的浮动图像

> ID：14421680
> 
> 赞同：27
> 
> 时间：2013-01-20T04:28:02.500
> 
> 标签：image, github, markdown, floating

我该怎么做呢？将以下代码放入 [Markdown 生成器](http://daringfireball.net/projects/markdown/dingus) 会给我想要的输出

```
<div style="float: left"><img src="http://ompldr.org/vaDU5NQ/scrotter.png"/>
</div>
I'm trying not to, kid. Don't act so surprised, Your Highness. You weren't
on any mercy mission this time. Several transmissions were beamed to this
ship by Rebel spies. I want to know what happened to the plans they sent
you. Kid, I've flown from one side of this galaxy to the other.

I've seen a lot of strange stuff, but I've never seen anything to make me
believe there's one all-powerful Force controlling everything. 
```

但是，将此代码添加到我的 README.md 文件使其成为内联图像而不是浮动图像。

我该如何解决这个问题？它是一个 Github 错误吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2016-03-17T20:15:54.573

我知道这个线程已经过时了，但是对于任何有兴趣的人，您可以在 GitHub 上使用`<img align="left" src="img.jpg">`和浮动图像。`<img align="right" src="img.jpg">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:02:23.627

我认为这是 GitHub 的安全问题。我的理解是它们会剥离所有 HTML 属性，例如`style`使用可能的`href`.

# c# - 在 WebMethod 中返回 DataSet 的关联数组？

> ID：14421682
> 
> 赞同：0
> 
> 时间：2013-01-20T04:29:35.203
> 
> 标签：c#, vb.net, dataset, associative-array, webmethod

我`<ScriptMethod(ResponseFormat:=ResponseFormat.Json)>`用来自动将我`Return`格式化为 json 格式的输出。

但是，我认为我做的比必要的多，因为我首先将 a 的内容转储`DataSet`到 a`Dictionary`中，然后`Return`将`Dictionary`.

如果我在列上使用别名并想输出所有列，有没有办法像我一样简单`Return`地使用? 如果没有，我怎样才能用尽可能少的行来做到这一点？`DataSet``Dictionary`

```
Dim conn As New SqlConnection
conn.ConnectionString = Module1.DBConn2
Dim sqlCommand = New SqlCommand("Select id, column1, column2... From table1", conn)
    conn.Open()
    Dim sqlDataset As DataSet = New DataSet()
    Dim sqlDataAdapter As SqlDataAdapter = New SqlDataAdapter(sqlCommand)
    sqlDataAdapter.Fill(sqlDataset)
    conn.Close()

    Dim jsonDict(sqlDataset.Tables(0).Rows.Count - 1) As Dictionary(Of Object, Object)
    Dim i As Integer = 0
    For Each rs As DataRow In sqlDataset.Tables(0).Rows
        jsonDict(i) = New Dictionary(Of Object, Object)
        jsonDict(i).Add("id", rs.Field(Of Object)("id"))
        jsonDict(i).Add("column1", rs.Field(Of Object)("column1"))
        jsonDict(i).Add("column2", rs.Field(Of Object)("column2"))
        ...
    i = i + 1
Next
Return jsonDict 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:50:15.843

您可以通过 id(primary key) 获取每一行：将返回类型更改为数据表

```
return sqlDataset.Tables(0); 
```

此链接可以帮助您[链接](https://stackoverflow.com/questions/2979922/how-to-convert-datatable-to-json-string-using-json-net)

或此[链接](https://stackoverflow.com/questions/11138035/convert-datatable-to-json-with-key-per-row)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:47:24.393

```
1\. pass the array of DataSets to a web service web method that
takes a DataSet as a parameter. 
```

例如：

```
[webmethod]
public static void(Dataset[] a)
{
// do something
} 
```

您还可以使用 xml 进行操作以填充数据集：

```
2\. Use the DataSet.GetXML method (which returns an XML string representing
the DataSet) and pass that string to a web service web method. Then that
web method would declare a new DataSet and using the ReadXML method, it
could read the XML string into itself. You will need to load the XML string
into an XMLDocument and then pass it to an XMLNodeReader so that it can be
read into the DataSet using ReadXML.

3\. fill up each dataset from the array. and pick a dataset through loop operation and after picking the dataset get the table in that dataset. finally you can get the row using the process as below(if needed):

DataRow dr;
Dataset ds;
DataTable dt;

dt = ds.Tables(0);
foreach(dr in ds.tables(0).rows){
// dr("ColName") to get value;
} 
```

# android - 在由 SimpleCursorAdapter 填充的 Android TextView 中格式化字符串的最佳方式

> ID：14421685
> 
> 赞同：-1
> 
> 时间：2013-01-20T04:30:28.300
> 
> 标签：android, android-layout, textview, format-string

我在使用 SimpleCursorAdapter 的行布局的布局中有两个 TextView。TextView 的值从 SimpleCursorAdapter 填充。

第一个视图显示计算机主机的名称，这很好，但第二个视图显示主机的 MAC 地址，目前在我拥有的数据库中，我将其存储为十六进制格式的字符串。

我想要做的不是在数据库中设置 mac 地址的格式，而是使用自定义 TextView 或其他可以工作的方式以编程方式对其进行格式化。因此，当 SimpleCursorAdapter 填充 TextView 扩展类时，基本上 AABBCCEEFF00 将变为 AA:BB:CC:EE:FF:00。

最好的方法是什么？如果我使用自定义 TextView，我应该在哪里插入代码？

我还看到了对 View Binding 的引用？但是不确定这是否是要走的路，我非常希望使代码模块化，而不是在可以扩展简单类时覆盖复杂代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:28:12.390

据我了解您的问题，您想以编程方式将 AABBCCDDEEFF 转换为 AA:BB:CC:DD:EE:FF。如果我没有收到您的问题，请告诉我。

看下面的代码，从这里，你将调用一个函数来获取格式化的 mac

```
String formattedMac = new String();
formattedMac=getFormattedMac("AABBCCDDEEFF");
Log.e("formatted Mac", formattedMac);//it will be look like, AA:BB:CC:DD:EE:FF 
```

这是返回格式化的mac的函数，

```
 private String getFormattedMac(String mac) {
    String result = new String();
    result="";
    int start=0;
    int end=2;
    int max=mac.length()+2;

    while(end<max)
    {
        result = result+mac.substring(start, end);
        if(end<mac.length())
        {
            result = result+":";
        }
        Log.e("result", result);
        start=start+2;
        end=end+2;
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:49:26.363

事实证明，最好的方法是使用 ViewBinder 设置，最后我遵循了这个答案。

[Android，使用 SimpleCursorAdapter 设置颜色而不仅仅是字符串](https://stackoverflow.com/questions/5573539/android-using-simplecursoradapter-to-set-colour-not-just-strings)

一旦我知道这一点，我还将列更改为 Blob 而不是 VarChar 以使其也更好一点。

```
 SimpleCursorAdapter.ViewBinder binder = new SimpleCursorAdapter.ViewBinder() {
        @Override
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
            String name = cursor.getColumnName(columnIndex);
            if ("mac_address".equals(name)) {
                byte[] macAddress = cursor.getBlob(columnIndex);
                TextView textView = (TextView)view;
                textView.setText(Target.getMacAddress(macAddress));
                return true;
            }
            return false;
        }
    }; 
```

# c - pthread_cleanup_pop 参数为 0？

> ID：14421688
> 
> 赞同：4
> 
> 时间：2013-01-20T04:30:58.440
> 
> 标签：c, pthreads

我正在学习 APUE book 2e 中的线程

我认为 pthread_cleanup_pop 函数用于设置 pthread_cleanup_push() 推送的函数是否执行。因此，如果参数为零，则不执行，非零，执行。

但是我在 APUE 中查看了代码图 11.5。那是...

```
#include "apue.h"
#include <pthread.h>

void
cleanup(void *arg)
{
    printf("cleanup: %s\n", (char *)arg);
}

void *
thr_fn1(void *arg)
{
    printf("thread 1 start\n");
    pthread_cleanup_push(cleanup, "thread 1 first handler");
    pthread_cleanup_push(cleanup, "thread 1 second handler");
    printf("thread 1 push complete\n");
    if (arg)
        return((void *)1);
    pthread_cleanup_pop(0);
    pthread_cleanup_pop(0);
    return((void *)1);
}

void *
thr_fn2(void *arg)
{
    printf("thread 2 start\n");
    pthread_cleanup_push(cleanup, "thread 2 first handler");
    pthread_cleanup_push(cleanup, "thread 2 second handler");
    printf("thread 2 push complete\n");
    if (arg)
        pthread_exit((void *)2);
    pthread_cleanup_pop(0);
    pthread_cleanup_pop(0);
    pthread_exit((void *)2);
}

int
main(void)
{
    int         err;
    pthread_t   tid1, tid2;
    void        *tret;

    err = pthread_create(&tid1, NULL, thr_fn1, (void *)1);
    if (err != 0)
        err_quit("can't create thread 1: %s\n", strerror(err));
    err = pthread_create(&tid2, NULL, thr_fn2, (void *)1);
    if (err != 0)
        err_quit("can't create thread 2: %s\n", strerror(err));
    err = pthread_join(tid1, &tret);
    if (err != 0)
        err_quit("can't join with thread 1: %s\n", strerror(err));
    printf("thread 1 exit code %d\n", (int)tret);
    err = pthread_join(tid2, &tret);
    if (err != 0)
        err_quit("can't join with thread 2: %s\n", strerror(err));
    printf("thread 2 exit code %d\n", (int)tret);
    exit(0);
} 
```

在该程序中，虽然弹出函数的参数为​​零，但推送的函数被执行（“线程 2 第一个处理程序”，“线程 2 第二个处理程序”，由清理函数打印）

为什么即使将 0 作为参数，pop 也能工作？

我得到 pthread_cleanup_pop 错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T07:25:58.643

> 我得到 pthread_cleanup_pop 错误了吗？

不，你没有。

您的代码执行清理处理程序的原因是您的控件永远不会到达`pthread_cleanup_pop(0)`. 相反，您总是执行`return`in`thr_fn1`和`pthread_exit`in `thr_fn2`。

尝试使用`pthread_create(&tid1, NULL, thr_fn1, (void *)0);`而不是创建线程`1`。当我这样做时，我得到（预期的）：

```
thread 1 start
thread 1 push complete
thread 2 start
thread 2 push complete
thread 1 exit code 1
thread 2 exit code 2 
```

# android - 此标签及其子标签可以替换为一个 和一个复合可绘制对象

> ID：14421689
> 
> 赞同：1
> 
> 时间：2013-01-20T04:31:29.637
> 
> 标签：android, xml, eclipse, android-emulator

我查看了类似的问题并使用了它的答案，但是如果我将它们组合成 1`TextView`并将`android:drawableTop=`它显示在我现在拥有的位置非常奇怪，它只是将图像堆叠在我想要的文本之上。

**原来的**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Navigation" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:contentDescription="@string/logo_name"
        android:src="@drawable/generic_logo" />

    <TextView
        android:id="@+id/about"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/about"
        android:textSize="55sp"
        android:onClick="onClick"
        android:clickable="true" />

</LinearLayout> 
```

**与复合**

```
 <TextView
        android:id="@+id/about"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/about"
        android:textSize="55sp"
        android:onClick="onClick"
        android:clickable="true"
        android:drawableTop="@drawable/generic_logo" />

</LinearLayout> 
```

Compound 将图像拉伸到我模拟的 android 的参数之外。我该如何解决这个问题并摆脱警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T04:36:26.163

因此，就测量和布局而言，这两者实际上是在做完全不同的事情。首先是弄清楚图像需要多少空间，把它放在那里，弄清楚文本需要多少空间，然后把它放在图像下方。

第二个是弄清楚它需要多少空间来放置文本。然后在背景的顶部绘制图像，将其缩放以适应文本使用的整个空间。然后它在它上面绘制文本。

如果您想让图像不被拉伸，请使用第一个版本。第二个版本是错误的。复合可绘制对象用于诸如 9 个补丁之类的东西，其中单个背景图像被分成几部分。

如果这些都没有做你真正想要的，解释那是什么，我们会看看我们是否能弄清楚如何去做。

# ssrs-2008 - 如何在 tablix 组总行中调用函数？

> ID：14421693
> 
> 赞同：0
> 
> 时间：2013-01-20T04:31:47.937
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

我有一个返回大约 200 多行的报告，在其中一个列上我计划使用一个函数来计算给定类型的总量（即库存中有多少果冻豆）。有没有办法让我在特定的单元格/文本框中执行 SQL 或调用函数或存储过程，以便我可以仅为当前组列属性执行此函数？

此函数执行一次大约需要 3 秒。但是，如果我在用于报表正文的存储过程中使用它，该存储过程大约需要 3 分钟，因为它正在为数据库的特定表（27000 多条记录）中的每条记录执行该函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:29:33.663

数据集主体中的标量函数应该可以正常工作。这比花时间在 SSRS 中创建函数要容易得多，因为底层的 SQL 会完成所有工作，并且可能也会更快地返回数据。除非您必须关联两个不同的数据集，否则您可能必须使用自定义表达式。不过，我倾向于尽可能在数据集中进行大部分数学运算。您在 SSRS 中使用的表达式越多，您的报告就会变得越慢。

如果我创建一个简单的数据库、一个简单的表并具有一个标量函数（例如简单的一个）：

```
use test-- database I created for concepts

create table Person ( id int identity, person varchar(64), orders int );

insert into Person values ('Brett',10),('Brett',20),('John',10)
GO

create function dbo.tester ( @intputint int )

returns int

as 

begin

declare @return int 

select @return = @intputint * 10

return @return

end
GO 
```

当我刚刚在 SQL Server 2008 中执行此操作时，我应该能够使用该标量函数创建一个列：

```
select *, dbo.tester(orders) as OrdersTimesTen
from Person 
```

# android - 以编程方式在 Android 上使用相机拍照

> ID：14421694
> 
> 赞同：63
> 
> 时间：2013-01-20T04:32:34.473
> 
> 标签：android, image, camera

我创建了一个带有按钮的应用程序并为该按钮编写了 onClickListener。我已经尝试了几个示例代码示例，但都没有工作。他们都调出安卓相机应用程序，不拍照。我想要一些可以放入我的 onClickListener 的代码，这样当我按下屏幕上的按钮时，就会拍摄一张照片。

当我在 Android Activity 中按下按钮时，如何让相机拍照？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-01-20T04:59:53.650

看下面的演示代码。

这是您用于 UI 的 XML 文件，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btnCapture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Camera" />

</LinearLayout> 
```

这是你的 Java 类文件，

```
public class CameraDemoActivity extends Activity {
    int TAKE_PHOTO_CODE = 0;
    public static int count = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Here, we are making a folder named picFolder to store
        // pics taken by the camera using this application.
        final String dir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) + "/picFolder/";
        File newdir = new File(dir);
        newdir.mkdirs();

        Button capture = (Button) findViewById(R.id.btnCapture);
        capture.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                // Here, the counter will be incremented each time, and the
                // picture taken by camera will be stored as 1.jpg,2.jpg
                // and likewise.
                count++;
                String file = dir+count+".jpg";
                File newfile = new File(file);
                try {
                    newfile.createNewFile();
                }
                catch (IOException e)
                {
                }

                Uri outputFileUri = Uri.fromFile(newfile);

                Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

                startActivityForResult(cameraIntent, TAKE_PHOTO_CODE);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == TAKE_PHOTO_CODE && resultCode == RESULT_OK) {
            Log.d("CameraDemo", "Pic saved");
        }
    }
} 
```

**笔记：**

在清单文件中指定以下权限，

```
<uses-permission android:name="android.permission.CAMERA"/>

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-20T04:40:54.583

拍照有两种方式：

1 - 使用 Intent 制作照片

2 - 使用相机 API

我认为您应该使用第二种方式，[这里有两个示例代码](http://www.vogella.com/articles/AndroidCamera/article.html)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-16T22:54:38.113

**您可以使用神奇的照片库。**

**1.尝试在gradle中编译**

```
compile 'com.frosquivel:magicaltakephoto:1.0' 
```

**2\. 您的 manifest.xml 中需要此权限**

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CAMERA"/> 
```

**3.像这样实例化类**

// "this" 是当前活动参数

```
MagicalTakePhoto magicalTakePhoto =  new MagicalTakePhoto(this,ANY_INTEGER_0_TO_4000_FOR_QUALITY); 
```

**4.如果需要拍照使用方法**

```
magicalTakePhoto.takePhoto("my_photo_name"); 
```

**5.如果需要在设备中选择图片，请尝试以下方法：**

```
magicalTakePhoto.selectedPicture("my_header_name"); 
```

**6.你需要像这样覆盖activity或fragment的onActivityResult方法：**

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
     super.onActivityResult(requestCode, resultCode, data);
     magicalTakePhoto.resultPhoto(requestCode, resultCode, data);

     // example to get photo
     // imageView.setImageBitmap(magicalTakePhoto.getMyPhoto());
} 
```

注意：只有使用此库，您才能在设备中拍摄和选择图片，这使用最低 API 15。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-11T04:48:56.980

拍摄图像并将其存储在所需的文件夹中

```
 //Global Variables
   private static final int CAMERA_IMAGE_REQUEST = 101;
    private String imageName; 
```

拍照功能

```
 public void captureImage() {

            // Creating folders for Image
            String imageFolderPath = Environment.getExternalStorageDirectory().toString()
                    + "/AutoFare";
            File imagesFolder = new File(imageFolderPath);
            imagesFolder.mkdirs();

            // Generating file name
            imageName = new Date().toString() + ".png";

            // Creating image here
            Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(imageFolderPath, imageName)));
            startActivityForResult(takePictureIntent,
                    CAMERA_IMAGE_REQUEST);

        } 
```

广播添加了新图片，否则**图片将在图片库中不可见**

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
                // TODO Auto-generated method stub
                super.onActivityResult(requestCode, resultCode, data);

                if (resultCode == Activity.RESULT_OK && requestCode == CAMERA_IMAGE_REQUEST) {

                    Toast.makeText(getActivity(), "Success",
                            Toast.LENGTH_SHORT).show();

 //Scan new image added
                    MediaScannerConnection.scanFile(getActivity(), new String[]{new File(Environment.getExternalStorageDirectory()
                            + "/AutoFare/" + imageName).getPath()}, new String[]{"image/png"}, null);

 // Work in few phones
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {

                        getActivity().sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse(Environment.getExternalStorageDirectory()
                                + "/AutoFare/" + imageName)));

                    } else {
                        getActivity().sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse(Environment.getExternalStorageDirectory()
                                + "/AutoFare/" + imageName)));
                    }
                } else {
                    Toast.makeText(getActivity(), "Take Picture Failed or canceled",
                            Toast.LENGTH_SHORT).show();
                }
            } 
```

权限

```
 <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-10T02:22:41.600

[对于那些来这里寻找一种使用 Android 的 Camera 和 Camera2 API 以编程方式拍摄照片/照片的方法的人，请在此处](https://github.com/google/cameraview)查看 Google 本身提供的开源示例。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-05T05:59:09.620

以下是打开相机的简单方法：

```
private void startCamera() {

    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT,
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI.getPath());
    startActivityForResult(intent, 1);
} 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2016-03-20T06:41:34.630

```
Intent takePhoto = new Intent("android.media.action.IMAGE_CAPTURE");
startActivityForResult(takePhoto, CAMERA_PIC_REQUEST) 
```

并设置 `CAMERA_PIC_REQUEST= 1 or 0`

# c# - 为关卡生成一个自我工作的 EXP 系统

> ID：14421695
> 
> 赞同：1
> 
> 时间：2013-01-20T04:32:38.683
> 
> 标签：c#

我正在用 C# 制作一个小游戏，但我不知道如何制作一个自我工作的 EXP 系统，该系统可以获得玩家当前级别升级所需的 EXP。

这就是我希望它工作的方式。

```
1 = 75
2 = 75 + 75 = 150
3 = 75 + 75 + 75 + 75 = 300
4 = 75 + 75 + 75 + 75 + 75 + 75 + 75 = 525 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:36:32.153

看来您的模式是“添加一个 75，添加两个 75，添加三个 75”......这可以在数学上写成：

```
s_1 = 75
s_{n+1} = s_n + 75 * n 
```

这意味着您可以使用

```
(1 + level * (level - 1) / 2) * 75 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:36:11.543

一些简单的数学，假设你想要指数增长？伪代码：`requiredExp = 75 * Math.pow(2, level - 1)`

如果您使用任意数字，则可以使用字典。地图级别体验。

编辑：每次再加一个 75（等差数列的总和）。`requiredExp = 75 * (1 + (level - 1) * level / 2)`应该做

# android - 在片段之间传递视图

> ID：14421698
> 
> 赞同：0
> 
> 时间：2013-01-20T04:33:42.237
> 
> 标签：android, android-layout

我有一个显示不同片段而不是更改活动的活动。在一个片段中，我有一个 ListView，其中每个项目都有几个 ImageView 和 TextView。当用户单击 ListView 项目时，活动会切换片段，但新片段将共享与 ListView 项目相同的所有视图，以及在该特定片段中添加的更多内容。

有没有办法在片段之间传递视图，所以我不必再次膨胀所有相同的视图？从列表项中的视图中获取位图和文本字符串并将它们填充到新片段中的新视图中会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:16:30.063

简短回答您的问题。不，除非两个片段具有相同的布局，否则无法在片段之间共享视图。视图只是描述应用程序布局的容器。由您来操作数据以填充容器。

我不认为您正在尝试使用相同的视图。我认为您想要的是列表视图中的数据。您将不得不处理片段到片段的通信。这涉及设置一个接口并将数据传递给您的主要活动，并让您的其他片段在创建活动时从活动中获取该数据。我放了一个我回复的帖子的链接。我发布的代码使用片段来显示应用程序而不是活动。我遗漏了一些片段，但接口的代码和一些好的链接都在那里。如果您对此有任何疑问，请告诉我。

[片段演示代码](https://stackoverflow.com/questions/14418671/android-create-reusable-style/14419570#14419570)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:37:05.557

如果您尝试在`ListView`新`Fragment`的`View`. 如果是这种情况，您可以更改新项目，`TextView`例如`Visibility`

# android - 错误名称：类型 yourActivity.ListAdapter 的方法 getFilter() 未定义

> ID：14421701
> 
> 赞同：1
> 
> 时间：2013-01-20T04:34:35.487
> 
> 标签：android

```
private ArrayList <HashMap<String, Object>> availableFriends;
public ListAdapter adapter = null;
friendsearch = (EditText)findViewById(R.id.friendsearch);
        friendsearch.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
                FriendsActivity.this.adapter.getFilter().filter(cs); 
```

在上面的行中我得到了错误，这里我想做的是在自定义列表视图中搜索（带有图像和名称的列表视图）}

```
 public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    }); 
```

下面的代码向您展示了我如何获取列表数据以及如何显示列表数据。如果需要，请注意它，否则请离开它。

```
public List<Friend> getFriendsList(){
    String accessToken = null;
    DatabaseHelper helper = new DatabaseHelper(getApplicationContext());
    DatabaseUtility dao = new DatabaseUtility(helper);
    try {
        accessToken = dao.getAccessToken();
    } catch (Exception e1) {
        handler.sendEmptyMessage(1);
        return null;
    }
    if(accessToken == null || accessToken.length() == 0){
        handler.sendEmptyMessage(1);
        return null;
    }

    Map<String , String> params = new HashMap<String,String>();
    params.put(Constants.ACCESS_TOKEN_PARAM, accessToken);

    List<Friend> friendsList = null;
    try {
            friendsList = Utils.getFriendsList(params,this);
    } catch (NullPointerException e) {
        handler.sendEmptyMessage(12);
        return null;
    } catch (JSONException e) {
        //handler.sendEmptyMessage(11);
        return null;
    }
    return friendsList;
}

public void displayFriends(List<Friend> friendList){
    List<Friend> friendsList = friendList;
    availableFriends = new ArrayList<HashMap<String,Object>>();
    HashMap<String, Object> friendData = null;
    Friend friend = null;
    try{
        for(int i = 0 ; i < friendsList.size() ; i++){
            friend = friendsList.get(i);
            friendData = new HashMap<String, Object>();
            friendData.put(FRIENDS_NAME_KEY, friend.getFriendName());
            friendData.put(IS_IMAGE_KEY, friend.getIsImage());
            friendData.put(IDKEY, friend.getFriendID());
            availableFriends.add(friendData);
        }

    adapter = new ListAdapter(availableFriends,FriendsActivity.this);
    listView.setAdapter(adapter);
    listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T04:39:44.753

`ListAdapter`不实现[`Filterable`](http://developer.android.com/reference/android/widget/Filterable.html)接口。然而，一些适配器，如[`ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html)和[`SimpleAdapter`](http://developer.android.com/reference/android/widget/SimpleAdapter.html)做。这意味着您应该考虑将您的适配器切换到实现接口的东西，*或者*制作您自己的自定义适配器并在那里实现它。

此外，根据上面的代码，您将您设置`adapter`为 null 并且您不初始化它（我没有看到对`displayFriends()`.当然是适配器）。

# javascript - 表格行有问题的双重突出显示

> ID：14421703
> 
> 赞同：0
> 
> 时间：2013-01-20T04:36:10.470
> 
> 标签：javascript, dom

下面的代码可以很好地工作，但是，当用户还使用 Go to Row 按钮时，如何修改它以使双行不突出显示。

现在，当用户使用鼠标单击它突出显示的行时，（很好，这里没问题）

但如果用户还单击其中一个转到按钮，它会突出显示指定的行。（很好，但现在有 2 行突出显示，我只想一次突出显示 1 行）

我的理论是，如果按下其中一个转到按钮，代码应该查看哪一行（如果有任何突出显示），取消突出显示并继续突出显示指定的行。

请不要使用 jQuery 库。

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#mstrTable {
     border: 1px solid black
}
#mstrTable td, th {
     border: 1px solid black
}

#mstrTable tr.normal td {
    color: black;
    background-color: white;
}
#mstrTable tr.highlighted td {
    color: white;
    background-color: gray;
}
</style>
</head>
<body>
  <table id="mstrTable">
     <thead>
      <tr>
        <th>File Number</th>
        <th>Date1</th>
        <th>Date2</th>
        <th>Status</th>
        <th>Num.</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>KABC</td>
        <td>09/12/2002</td>
        <td>09/12/2002</td>
        <td>Submitted</td>
        <td>0</td>

      </tr>
      <tr>
        <td>KCBS</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Approved</td>
        <td>1&nbsp;</td>
      </tr>

      <tr>
        <td>WFLA</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Submitted</td>
        <td>2</td>
      </tr>
      <tr>
        <td>WTSP</td>
        <td>09/15/2002</td>
        <td>09/15/2002</td>
        <td>In-Progress</td>
        <td>3</td>
      </tr>
    </tbody>
  </table>

  <br>
<input type="button" name="" value="GoTo 0" onmouseup="GoTo('mstrTable',0);" />
<input type="button" name="" value="GoTo 1" onmouseup="GoTo('mstrTable',1);" />
<input type="button" name="" value="GoTo 2" onmouseup="GoTo('mstrTable',2);" />
<input type="button" name="" value="GoTo 3" onmouseup="GoTo('mstrTable',3);" />

<script type="text/javascript">

var table = document.getElementById("mstrTable");
var thead = table.getElementsByTagName("thead")[0];
var tbody = table.getElementsByTagName("tbody")[0];

tbody.onclick = function (e) {
   e = e || window.event;
   var td = e.target || e.srcElement; //assumes there are no other elements inside the td
   var row = td.parentNode;
   //alert('Row is ' + (row.rowIndex - 1)) ### FOR LATER (DB BACK END USE) ###
   if (this.lst&&this.lst!=row){
    this.lst.className='';
   }
   row.className = row.className==="highlighted" ? "" : "highlighted";
   this.lst=row;
}

thead.onclick = function (e) {
   e = e || window.event;
   var th = e.target || e.srcElement;  //assumes there are no other elements in the th
   //alert(th.innerHTML);  ### FOR LATER (DB BACK END USE) ###
}

function GoTo(id,nu){
  var obj=document.getElementById(id),trs=obj.getElementsByTagName('TR');;
  nu = nu + 1
  if (trs[nu]){
   if (GoTo.lst&&GoTo.lst!=trs[nu]){
    GoTo.lst.className='';
   }
   trs[nu].className = trs[nu].className=="highlighted" ? "" : "highlighted";
   GoTo.lst=trs[nu];
  }
 }

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:11:32.267

您可以通过对突出显示的行使用全局来快速解决此问题。[http://jsbin.com/atiwex/1/edit](http://jsbin.com/atiwex/1/edit)的一个例子。

```
<script type="text/javascript">

var table = document.getElementById("mstrTable");
var thead = table.getElementsByTagName("thead")[0];
var tbody = table.getElementsByTagName("tbody")[0];
var ishigh;

tbody.onclick = function (e) {
  e = e || window.event;
  var td = e.target || e.srcElement; //assumes there are no other elements inside the td
  var row = td.parentNode;
  if (ishigh&&ishigh!=row){
    ishigh.className='';
  }
  row.className = row.className==="highlighted" ? "" : "highlighted";
  ishigh=row;
}

thead.onclick = function (e) {
  e = e || window.event;
  var th = e.target || e.srcElement;  //assumes there are no other elements in the th
  //alert(th.innerHTML);  ### FOR LATER (DB BACK END USE) ###
}

function GoTo(id,nu){
  var obj=document.getElementById(id),
      trs=obj.getElementsByTagName('TR');
  nu = nu + 1;
  if (trs[nu]){
    if (ishigh&&ishigh!=trs[nu]){
      ishigh.className='';
    }
    trs[nu].className = trs[nu].className=="highlighted" ? "" : "highlighted";
    ishigh=trs[nu];
   }
}
</script> 
```

# bash - 如何通过替换字段来生成多行命令/脚本

> ID：14421708
> 
> 赞同：1
> 
> 时间：2013-01-20T04:36:35.773
> 
> 标签：bash

假设我有一个命令：

```
mysql -h localhost -u root -pmypassword dev<file01.sql; 
```

我有很多 sql 文件要运行：file02.sql, file03.sql, ... file99.sql

我想生成一个这样的 bash 脚本来顺序运行所有这些 sql 文件。

bash 脚本的一部分如下所示：

```
mysql -h localhost -u root -pmypassword dev<file01.sql;
mysql -h localhost -u root -pmypassword dev<file02.sql;
mysql -h localhost -u root -pmypassword dev<file03.sql;

mysql -h localhost -u root -pmypassword dev<file99.sql; 
```

所有这些行都是相同的模式，只有文件名（filexx.sql）发生了变化。

所有文件xx.sql 都在同一个目录中。

我通常在 Excel 中生成 bash 脚本。我知道这可以很容易地在 bash 中完成，我只是不知道如何。你能建议如何生成这个吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:41:45.837

如果要执行这些语句：

```
for fileid in $(seq 1 99); do
    filename=$(printf "file%02d.sql" $fileid)
    mysql -h localhost -u root -pmypassword dev < $filename
done 
```

但是，如果您只想生成它们：

```
for fileid in $(seq 1 99); do
    filename=$(printf "file%02d.sql" $fileid)
    echo "mysql -h localhost -u root -pmypassword dev < $filename"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:08:19.407

Bash 的[大括号展开](http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)救援：

```
for file in file{00..99}.sql; do
    mysql -h localhost -u root -pmypassword dev < $file
done 
```

# html - 提交按钮移动 - CSS HTML

> ID：14421709
> 
> 赞同：0
> 
> 时间：2013-01-20T04:36:43.450
> 
> 标签：html, css, forms, layout

我正在使用 rails 创建一个简单的电子商务应用程序。我在每个产品页面上都有一个表单，允许用户为该产品选择多种颜色变体，然后是一个简单的添加到购物车按钮。

问题是，在两个不同的页面上，按钮出现在两个不同的位置，而代码完全相同。

这是第一个示例，它只显示了三个变体，并且按钮出现在这些变体下，就像它应该

> ![在此处输入图像描述](../Images/9bb5e9fee7a94f0b7862bfabf77f76bc.png)

生成它的 html 如下（jsfiddle 代码示例在这里[http://jsfiddle.net/zYAVW/](http://jsfiddle.net/zYAVW/)）

```
<form accept-charset="UTF-8" action="http://192.168.1.113:3000/orders/populate" method="post">    
<ul> # A bunch of styled list elements # </ul>
<br><br>
<button type="submit">Add to cart</button>
</form> 
```

但是在我的另一个页面上，我有大约 85 个列表元素，该按钮与样式列表元素内联显示，但使用完全相同的代码，按钮或表单没有 css 样式，我无论如何都无法弄清楚它留在列表下。

这是第二页的图片

> ![在此处输入图像描述](../Images/d725d98ee5656d700e97a6d1b1c9cf91.png)

（jsfiddle 代码示例在这里[http://jsfiddle.net/zBAMN/](http://jsfiddle.net/zBAMN/)）

有人知道吗

1.  为什么会这样？
2.  如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:28:14.820

在元素上使用**溢出：隐藏。**`ul`

JSFiddle：http: [//jsfiddle.net/zBAMN/3/](http://jsfiddle.net/zBAMN/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:34:06.207

添加`clear:both`到您的第一次休息。

```
<br style="clear:both;"><br><button type="submit">Add to cart</button> 
```

[http://jsfiddle.net/zBAMN/4/](http://jsfiddle.net/zBAMN/4/)

了解为什么会发生这种情况很重要。您选择将列表元素向左浮动，以便它们排成一行。您需要清除此浮动，否则以下元素将无法恢复典型的文档流。您可以通过插入具有`clear: both`style 属性的元素来显式清除浮动。

请参阅[http://css-tricks.com/the-how-and-why-of-clearing-floats/](http://css-tricks.com/the-how-and-why-of-clearing-floats/)

正如 intelis 指出的那样，您还可以添加`overflow: hidden`到父元素。这会导致它在您关闭父标签后自行清除。

请参阅[http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

# android - 如何每次将视频流中的一帧保存到设备上的闪存卡？

> ID：14421710
> 
> 赞同：-1
> 
> 时间：2013-01-20T04:36:55.740
> 
> 标签：android, eclipse

我使用此代码在我的设备上打开相机视频模式：

```
package com.example.camera_test;

import java.io.ByteArrayOutputStream;

import android.os.Build;
import android.os.Bundle;
import android.provider.MediaStore.Video;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.hardware.Camera;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class MainActivity extends Activity {

    private static final int CAMERA_PIC_REQUEST = 1337; 
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button = (Button) findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener()
        {
        @SuppressLint("NewApi") @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
            Intent videoIntent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
            startActivityForResult( videoIntent,0); 
```

当点击一个按钮时它工作得很好，它会在视频上打开相机。现在我想获得一个视频流，而不是将视频记录/保存到设备磁盘，而是每次实时获取视频中的一帧，将此帧保存到闪存卡对帧执行操作后删除它一些东西然后下一帧等等......

所以最后，当我将我的设备左右上下左右移动时，它会一直将一帧从视频保存到闪存做一些事情并删除它等等。

框架我的意思是一个图像至极是一个框架。要将当前帧提取到闪存中，请执行某些操作并删除此帧和下一帧。

我怎样才能开始思考和做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:03:29.980

您显示视频源的预览，然后调用 Camera.takePicture 以获取回调，其中包含调用时帧数据的字节数组。在 Android 开发者网站上有一个很好的例子：http:
[//developer.android.com/guide/topics/media/camera.html#capture-picture](http://developer.android.com/guide/topics/media/camera.html#capture-picture)

请注意，在开发人员站点上，它有一个触发 takePicture 调用的按钮，但您可以从代码中轻松调用。根据提供的参数，您可以接收帧的压缩 JPEG 版本或原始数据版本。如果要以 JPEG 格式保存到 SD 卡，让系统进行压缩会更有效。如果您需要多于一帧，请按照开发人员指南设置相同的程序，然后使用 Camera#setPreviewCallback 方法为视频源的每一帧获取回调。

# html - 隐藏透明元素后面的溢出内容

> ID：14421711
> 
> 赞同：0
> 
> 时间：2013-01-20T04:37:04.483
> 
> 标签：html, css

我有一个有序列表，其中显示了排名靠前的用户，他们的对应点向右对齐。示例：[http](http://codepen.io/anon/pen/EkKJC) ://codepen.io/anon/pen/EkKJC 。
当视口太小时，我想隐藏用户名的溢出部分。我不能使用百分比，因为它们不准确。我也不能使用固定宽度，因为内容是动态的。
这里的主要问题是透明背景（是的，它必须是透明的），因为使用 z-index 不起作用。
我需要一个跨浏览器、语义、纯 CSS 和无嵌套标签的解决方案来解决这个问题，或者至少是 IE7+。或者也许是另一种处理这种情况的方法。

顺便说一句，我想知道是否有必要（从语义的角度）给出`<span>`一个类名，即使我知道`<span>`. 提前致谢。`<li>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:23:42.007

如果您不需要使用 javascript 或其他东西来引用跨度，那么不需要，您不必给它一个类名。但是您还必须确信该站点上也不会有任何其他`<ol>`内容，我倾向于给出`<ol>`#topusers 的ID

```
ol#topusers {
  list-style: inside decimal;
  width: 300px;
}

ol#topusers li span {
  float: right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:28:29.497

```
body, footer {
background: url('http://static3.depositphotos.com/1000635/110/v/450/dep_1104872-Helix-seamless-pattern..jpg') fixed repeat 100% 100%;
} 
```

假设页脚必须透明的原因是因为背景图像。

或者，将

```
body {
padding-bottom:(the footer height here);
} 
```

在这里帮忙？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T07:29:31.823

您可以使用 css 的 opacity 属性来隐藏透明元素后面的内容。

将内容放在 div 元素中，然后设置该 div 的不透明度。谢谢。

# php - 如何使所有 cakephp 文件从基础访问内部文件夹？

> ID：14421714
> 
> 赞同：-1
> 
> 时间：2013-01-20T04:37:11.383
> 
> 标签：php, .htaccess, cakephp, mod-rewrite, cakephp-2.0

目前我的蛋糕结构如下所示并且工作正常

```
/public_html/app 
/public_html/.htaccess
/public_html/index.php 
```

这样我就可以访问**mydomain.com** 到我的应用程序。

我需要创建一个名为的新内部文件夹`src`并将所有文件放在 public_html* 中。

喜欢`/public_html/*`_`/public_html/src/*`

```
/public_html/src/app 
/public_html/src/.htaccess
/public_html/src/index.php 
```

我需要从 src 文件夹文件访问**mydomain.com 。**

我尝试创建一个**htaccess**文件`public_html/.htaccess`

**/public_html/.htaccess**

```
 RewriteEngine on
   RewriteRule    ^$ src/    [L]
   RewriteRule    (.*) src/$1 [L] 
```

并将所有文件放入 cake framework 新的内部文件夹`src`中。它给了我一个内部服务器错误。

然后我创建了一个**index.php**文件`public_html/index.php`并删除了 public_html 中的 htaccess( `public_html/.htaccess`)。

**索引.php**

```
define('SRC_DIR', 'src');
define('DS', DIRECTORY_SEPARATOR);
require SRC_DIR . DS . 'index.php';// src/index.php file 
```

但它进入页面，但样式和图像没有出现。路线不工作。

**public_html**是基本路径。

如何在 cakephp2 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:54:49.533

除非我遗漏了什么，否则我会继续回答。

据我了解，[贾斯汀约翰](https://stackoverflow.com/users/1036917/justin-john)想要访问这样的东西：

```
mydomain.com           #access CakePHP
mydomain.com/blah      #access the folder blah 
```

他想将 CakePHP 移动到`public_html/src`并创建他需要的任何子文件夹`public_html/`。像这样：

```
# THIS IS WRONG
/public_html
   /src             #CakePHP
      /app
      /lib
      /plugins
      /vendors
   /blah
   /another_folder 
```

你应该做的是把 CakePHP 安装`public_html`和 webroot 文件夹中的任何子文件夹。

```
# This is the Cake way
/public_html
   /app
      /webroot
         /blah
         /another_folder
   /lib
   /plugins
   /vendors 
```

这一切都在[AD7six](https://stackoverflow.com/users/761202/ad7six)链接[的 CakePHP 文档](http://book.cakephp.org/2.0/en/installation.html)中进行了解释。

# matlab - Matlab - 修复 DICOM 堆栈上的白噪声

> ID：14421716
> 
> 赞同：1
> 
> 时间：2013-01-20T04:38:20.690
> 
> 标签：matlab, dicom

[我按照本教程视频](http://www.mathworks.com/videos/medical-imaging-analysis-and-visualization-71066.html)中的说明加载[了这个 dicom 图像堆栈](https://www.dropbox.com/sh/jy4nr9zm58dfuly/4HR-CWk7qw)。

我写了以下代码

```
 clear all; close all; clc; imtool close all; 

  %loads the full dicom stack
  fileFolder = fullfile (pwd, 'dicom_test'); %se debe estar al mismo nivel de la carpeta 
  files = dir (fullfile(fileFolder, '*.dcm'));
  fileNames = (files.name);

  %%examine file header (metadata, from DICOM stack)
  info = dicominfo (fullfile (fileFolder, fileNames)); %%fileNames{1} or fileName[1] both fail

  %extract size info from metadata
  voxel_size = [info.PixelSpacing; info.SliceThickness]';

  %read one file to get size
  I = dicomread(fullfile(fileFolder, fileNames));
  classI = class(I);
  sizeI  = size(I);
  numImages = length (fileNames);

  %read slice images; populate 3D matrix
  bWaitBar = waitbar (0, 'reading DICOM files');

  %create array to store the images
  mri = zeros(sizeI(1), sizeI(2), numImages, classI);

  %load the images into the mri array 
  for i=length(fileNames): -1:1
      fname = fullfile(fileFolder, fileNames);
      mri(:,:,i) = uint16(dicomread(fname));
      waitbar((length(fileNames)-i+1)/length(fileNames));
  end

  delete (bWaitBar);

  %explore dataset as a montage
  % imtool close all
  minMRI = min(mri(:)); %min is 0 %%variables no usadas
  maxMRI = max(mri(:)); %max is 332 %%variables no usadas
  montage (reshape(uint16(mri),[size(mri,1), size(mri,2), 1, size(mri,3)]));
  set (gca, 'clim', [0,100]); % got this value by call to imcontrast 
```

我得到了堆栈的这种嘈杂的可视化：

![在此处输入图像描述](../Images/0cfc7cfe108ce705bbeea9e14775153b.png)

如何修复它以显示适当的对比度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:11:19.940

看起来您正在使用一些任意值（0,100）使图像强度饱和。代替

```
set (gca, 'clim', [0,100]); 
```

写：

```
set (gca, 'clim', [minMRI ,maxMRI ]); 
```

通常这些类型的图像具有比 100 甚至 332 高得多的最大强度，因此请仔细检查`max(mri(:))`值

# .htaccess - 用户配置文件的 URL 重写

> ID：14421718
> 
> 赞同：1
> 
> 时间：2013-01-20T04:39:06.840
> 
> 标签：.htaccess, url-rewriting

我正在使用散列值来防止垃圾邮件并通过更改 ID 号直接访问用户配置文件。这是用户注册时给定的唯一整数值​​，存储在数据库中并且永远不会更改。

个人资料链接如下所示：

```
example.com/profile.php?id=xxx&hash=xyz 
```

我想用用户昵称重写 URL，如下所示：

```
example.com/nickname 
```

但是在 URL 中使用哈希值时我该怎么做呢？我找不到这个的样本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:22:17.397

If I understand you well:

You want to provide to the end user several url:

*   `/profile.php?id=<id>&hash=<hash>`
*   `/<nickname>`

They would all be available but the 2nd one would be the preffered way.

there is a problem with the `/<nickname>` type of url, if a nickname is "foo/bar" or "index.php" or "admin", etc the problem is that some nicknames may cover some other valid urls. So at least a better format for vanity url would be:

*   `/nick/<nickname>` or `/user/<nickname>`

If you do not want that you'll have to ensure that nicknames will never match any valid path to any other asset.

Then you'll quite certainly have to handle special characters in nicknames, spaces, "/", chineses utf16 chars, windows specific encoding, etc. This usually targets the application server as the best tool for handling the nickname and finding the real user page to show.

Now let's take back the first url format : `/profile.php?id=<id>&hash=<hash>`, you use the hash to avoid direct access to user profile by altering the id. And you said every user have a nickname. I would say why not simply only using the vanity format and forbid direct access to the profile.php script with an id? You could hanlde all user profile acess internally and never provide such entry... anyway, let's say you still want to be able to access a user profile by id.

This access url is generated by your application. Your application is adding the hash after the url when providing the link, (maybe the hash is a salted hash based on the nickname?). So your application can store for each user the user hash. And then in profile.php you always check that the hash is the right one for this id. All this is managed in your application, not in the http server (apache). The http server and his rewriting tools is, in my humble opinion, not the right tool to make the match, it cannot easily match your outgoing links and alter them, it cannot easily catch your ongoing links and transform them in the right profile.php+id+hash form.

So the only rewriteRule I would use is one catching nickname based entries and sending them internally to a profile redirector script in your application. Something like:

```
RewriteRule  ^/nick/(.*)$ /profile-by-nick.php?nick=$1 [L,QSA] 
```

Then inside this php script you can do what you want to provide the same task as in profile.php. With a well written php app it's quite easy to provide internal redirection inside the application, do not send a real http 302 redirection on the profile.php script. use functions, classes, etc.

If really you want apache to directly send the right profile.php?id=&hash= url to your application (maybe because your php code was written by a poney :-) ) then you could check RewriteMap as suggested by @David Ravetti and get an external script running as a daemon and providing the nickname->id+hash mapping to apache. But it seems really more complex, not the right place to handle it. This script will need rights to load you database, and informations on table structures that your application already have.

# algorithm - 何时使用非比较排序而不是比较排序

> ID：14421722
> 
> 赞同：5
> 
> 时间：2013-01-20T04:40:25.203
> 
> 标签：algorithm, sorting

在课堂上，我们了解了一堆新的非比较排序，以避免`omega(nlogn)`所有基于比较的排序的下限。但对我来说有点不清楚的是，何时使用哪个排序算法家族的利弊。

不能调整任何数据集以便可以使用非比较排序算法（基数、桶、键索引）吗？如果是这样，那么即使存在比较排序又有什么意义呢？

对不起，这是一个如此初级的问题，但我真的在网上找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:04:03.440

并非每组项目都可以调整以有效地用于非比较排序。例如，对任意精度数进行排序将需要在桶排序内多次运行循环，从而降低性能。

基数排序的问题是他们必须检查每个被排序项目的每个元素。另一方面，基于比较的排序可以跳过相当数量的子元素（数字、字符等）。例如，当比较函数检查两个字符串时，它会在第一个差异处停止，跳过两者的尾部字符串。另一方面，桶排序必须检查每个字符串^*中的所有字符。

一般来说，追求最好的渐近复杂度并不总是一个好的策略：使用更复杂的算法得到回报的 N 值通常太高，无法使更复杂的算法变得实用。例如，快速排序的时间复杂度非常差，但由于开销非常低，平均而言它击败了大多数其他算法，使其成为大多数实际情况下的不错选择。

* * *

^*在实践中，桶排序的实现避免了查看所有子元素（数字、字符等）的需要，只要桶中的项目数低于某个阈值，就切换到基于比较的排序。这种混合方法击败了普通的基于比较的排序和普通的桶排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T04:51:27.713

非比较排序的问题在于它们的复杂性通常取决于其他参数而不是输入的大小。例如，基数排序具有 O(kn) 复杂度，其中 k 是元素中的最高位数——问题是，k 与 n 有何关系。如果 k 与 n 大致相同，则算法变为 O(n^2)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T04:58:47.193

基于非比较的排序算法对输入进行假设。输入的所有元素都必须落在一个恒定长度的范围内，以确保线性时间复杂度。另一方面，基于比较的排序算法不对输入做任何假设，并且能够解决任何情况。基于非比较的排序算法通常以额外的内存成本和输入缺乏通用性为代价。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T18:09:41.307

当您懒得编写非基于比较的排序时，您可以使用基于比较的排序。

基于比较的排序本质上比较慢；他们需要在输入元素上多次调用比较器，每次调用都为基于比较的排序提供了准确的信息位。正确的基于比较的排序*必须*平均累积有关其输入的 log_2(n!) ~= n log(n) 位信息。

现在，所有数据在机器中都有一个表示。您可以根据您的特定类型的数据、数据的表示以及您用于排序的机器定制排序算法，而且，如果您知道自己在做什么，您通常会击败任何基于比较的裤子排序算法。

然而，性能并不是一切，在某些情况下（事实上，我见过的大多数情况），性能最高的解决方案并不是正确的解决方案。良好的基于​​比较的排序可以采用黑盒比较器，它们*将以*较小的常数次 n log(n) 比较对输入进行排序。这对于几乎所有应用程序来说已经足够好了。

**编辑**：以上内容仅适用于*内部排序*，您有足够的 RAM 来存储整个输入。外部排序（比如溢出到磁盘）通常应该通过一次读取大约一半 RAM 的数据，使用基于非比较的排序，然后写出排序结果来完成。一直小心将排序与输入和输出重叠。最后，您进行（基于比较的）n 路合并。

# c# - 使 protobuf-net 将子类序列化为基类？

> ID：14421724
> 
> 赞同：4
> 
> 时间：2013-01-20T04:40:52.083
> 
> 标签：c#, serialization, protobuf-net

我正在使用 Protobuf-net（带有 Servicestack）。我有一种情况，即使特定实例是继承者，我也希望将某个类序列化为那个确切的类。Protobuf-net 可以做到这一点吗？我不关心继承者，也不希望将它们发送给我的客户，因为他们没有合适的东西来反序列化它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:12:22.093

目前，答案是“不”。烦人的是，它有大部分代码来支持它，因为它适用于实体框架、NHibernate 等的代理类型（它们被实现为应被视为基本类型的子类型），但我还没有将此作为可选的“忽略子类型”功能公开。从理论上讲，这应该是一种接线的情况。如果您的继承模型只是一个额外的级别（即合同类型是`Foo`，并且您给它一个`SuperFoo`, where `SuperFoo : Foo`），那么就有可能通过伪装成 NHibernate 来*欺骗它*（它检查接口/命名空间*名称*- 它不会'实际上并没有引用 NHibernate 本身，以减少依赖关系）：

```
namespace NHibernate.Proxy.DynamicProxy
{
    interface IProxy { }
}
...
class SuperFoo : Foo, IProxy {...} 
```

然而！我应该补充：

*   考虑到这一点，我想更直接/正式地支持
*   上述方法会稍微减慢速度，因为它通过反射检查这一点：为了*正确地*做到这一点，我想让这个“直接”（常规类型检查 ets；运行时没有反射）

# java - 可以在 GridView 单元格中添加视图吗？

> ID：14421728
> 
> 赞同：0
> 
> 时间：2013-01-20T04:41:10.607
> 
> 标签：java, android

我正在尝试在我的 android 应用程序中创建以下屏幕：

![在此处输入图像描述](../Images/320280d2920fb7c05f25019bbb118a80.png)

除了我可能需要列出多达 9 个或更多的团队。[我一直在查看 GridView，但在GridView 文档](http://developer.android.com/reference/android/widget/GridView.html)或[ListAdapter 文档](http://developer.android.com/reference/android/widget/ListAdapter.html)中找不到任何东西来表明我可以做到这一点。这是可能的还是我找错地方了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:04:29.990

> 这是可能的还是我找错地方了？

`GridView`, `View`,`BaseAdapter`和是可能的`LayoutInflater`。您可以放大单元格的视图（每个单元格都在`View`这里）。例如：

`main.xml`：

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    <!-- add additional properties as needed --!>
</GridView> 
```

`player.xml:`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/grid_item_team_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/teamName"
        android:layout_marginTop="10dp"
        android:textSize="20dp" >
       <!-- add or modify the properties as needed --!>
    </TextView>

</LinearLayout> 
```

`ImageAdapter.java`

```
 public class ImageAdapter extends BaseAdapter {
        private Context context;
        private final String[] teamValues;

        public LayoutInflater inflater;
        public LinearLayout ll;

        public ImageAdapter(Context context, String[] teamValues) {
            this.context = context;
            this.teamValues = teamValues;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View gridView;

            if (convertView == null) {

                gridView = new View(context);

                // get layout from player.xml
                gridView = inflater.inflate(R.layout.player, null);

                // set value into textview
                ll = (LinearLayout)gridView.findViewById(R.id.linear1);
                TextView textView = (TextView) gridView
                        .findViewById(R.id.grid_item_team_name);
                textView.setText(teamValues[position]);

                String team = teamValues[position];
                // add team members here
                //
                //
                //                    

            } else {
                gridView = (View) convertView;
            }

            return gridView;
        }
    } 
```

`GridViewActivity.java`

```
public class GridViewActivity extends Activity {

    GridView gridView;
    ImageAdapter mImageAdapter;

    String[] teamName;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        teamName = getTeamName();
        mImageAdapter = new ImageAdapter(this, teamName);

        gridView = (GridView)findViewById(R.id.gridView1);

        registerForContextMenu(gridView);
        gridView.setAdapter(mImageAdapter);

    }

    @Override
    public void onCreateContextMenu(ContextMenu iMenu, View iView, ContextMenuInfo iMenuInfo) {
        super.onCreateContextMenu(iMenu, iView, iMenuInfo);

        iMenu.setHeaderTitle("TEAM NAME");
        iMenu.clear();
        for (int i = 0; i < nTotalTeam; i++) {
            iMenu.add(Menu.NONE, i, Menu.NONE, teamName[i]);
        }
    }

    private void getTeamName() {
    //
    // getTeamName and return the array of string
    //
    //
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:48:12.620

GridView 就在这里。GridView 中的每个视图都是一个视图——你想要的任何视图。是的，您可以以编程方式向其中添加新视图。如果您不希望它们具有相同的视图类型，那么不同的单元格甚至不需要是相同类型的视图——这一切都非常灵活。

# json - 如何在 Play 2.0 中获取 JSON 树中没有明确名称的元素？

> ID：14421729
> 
> 赞同：0
> 
> 时间：2013-01-20T04:41:23.243
> 
> 标签：json, scala, playframework, playframework-2.0

我一直在解析 Play 2.0 项目中的 .json 文件，但有一件事我无法弄清楚。这是来自在线文档的片段：

```
{
  "users":[
    {
      "name": "Bob",
      "age": 31.0,
      "email": "bob@gmail.com"
    },
    {
      "name": "Kiki",
      "age":  25.0,
      "email": null
    }
  ]
} 
```

我想知道的是，我如何抓住一个完整的用户？问题是我不知道如何引用代表单个用户的参数分组。我试过类似的东西

```
( json \\ "users" ) 
```

它只是将所有用户作为列表中的一个元素提供，我尝试过类似的东西

```
( json \ "users" \ (user)(0)) 
```

但似乎我必须定义“用户”，我不知道什么是合适的。

更好的是，有没有办法获取列表中的所有客户？或者甚至只是遍历树并点击每个用户，以便我可以一次访问特定用户的所有信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:48:29.003

如果您已经知道 JSON 包含对象列表，则可以使用`as[List[JsObject]]`.

例如：

```
val str = """{
  "users":[
    {
      "name": "Bob",
      "age": 31.0,
      "email": "bob@gmail.com"
    },
    {
      "name": "Kiki",
      "age":  25.0,
      "email": null
    }
  ]
}"""

val json = Json.parse(str)
val users = (json \ "users").as[List[JsObject]]
users.foreach { user =>
  println("user: " + user)
} 
```

生成：

```
user: {"name":"Bob","age":31.0,"email":"bob@gmail.com"}
user: {"name":"Kiki","age":25.0,"email":null} 
```

这些列表元素中的每一个都支持与原始 JSON 对象相同的运算符，因此您可以使用`(user \ "name").as[String]`等提取单个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:53:59.060

Jerkson JSON（Play 中使用的 JSON 库！）支持这种方式：

```
(json \ "users")(0) 
```

如果要迭代，可以将其转换为 JArray （并可能检查类型）并调用该`elements`方法：

```
(json \ "users").asInstanceOf[JArray].elements foreach {
    ...
} 
```

可能没有更好的方法：[https ://github.com/codahale/jerkson/blob/master/src/main/scala/com/codahale/jerkson/AST.scala](https://github.com/codahale/jerkson/blob/master/src/main/scala/com/codahale/jerkson/AST.scala)

# python - Python中的全局变量和局部变量

> ID：14421733
> 
> 赞同：4
> 
> 时间：2013-01-20T04:42:08.167
> 
> 标签：python, function, python-3.x, global-variables

我正在学习 Python。一本关于 Python 3 的书说以下代码应该可以正常工作：

```
def funky():
    print(myvar)
    myvar = 20
    print(myvar)

myvar = 10
funky() 
```

但是当我在 Python 3.3 中运行它时，我得到了

```
UnboundLocalError: local variable 'myvar' referenced before assignment 
```

错误。`print(myvar)`我的理解是第一个`funky`应该是 10，因为它是一个全局变量。第二个`print(myvar)`应该是 20，因为本地`myvar`定义为 20。这里发生了什么？请帮助澄清。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T04:53:25.447

您需要`global`在分配值之前调用您的函数。

```
def funky():
    global myvar
    print(myvar)
    myvar = 20
    print(myvar)

myvar = 10
funky() 
```

请注意，您可以在不调用 global 的情况下打印该值，因为您可以在不使用 的情况下访问全局变量`global`，但尝试分配值将需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T06:01:14.740

从[文档](http://docs.python.org/3.4/reference/executionmodel.html)：

> 程序文本中每次出现的名称指的是在包含使用的最内层功能块中建立的该名称的绑定。

这意味着除非您声明它`global`或`nonlocal`（嵌套函数） ，否则它`myvar`是局部变量或自由变量（如果`myvar`未在函数中定义）。

书不正确。在同一个块中，名称代表同一个变量（`myvar`在您的示例中为局部变量，即使存在同名的全局变量，在定义它之前也不能使用它）。您*也可以*在函数之外更改值，即[第 65 页末尾的文本也不正确](http://inventwithpython.com/IYOCGwP_book1.pdf)。以下作品：

```
def funky(): # local
    myvar = 20 
    print(myvar) # -> 20
myvar = 10 # global and/or local (outside funky())
funky()
print(myvar) # -> 10 (note: the same) 
```

```
def funky(): # global
    global myvar
    print(myvar) # -> 10
    myvar = 20
myvar = 10
funky() 
print(myvar) # -> 20 (note: changed) 
```

```
def funky(): # free (global if funky is not nested inside an outer function)
    print(myvar) # -> 10
myvar = 10
funky() 
```

```
def outer():
    def funky():  # nonlocal
        nonlocal myvar
        print(myvar) # -> 5
        myvar = 20
    myvar = 5 # local
    funky()
    print(myvar) # -> 20 (note: changed)
outer() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T08:14:07.533

由于在 funky() 中对 myvar 的赋值，Python“假设”我们想要一个局部变量，因此第一个 print 语句抛出 ## UnboundLocalError: local variable 'myvar' referenced before assignment ## 错误消息。如果未将其声明为全局变量，则在函数内部更改或创建的任何变量都是局部变量。要告诉 Python，我们要使用全局变量，我们必须使用关键字“global”，如下例所示：

```
def f():
  global s
  print s
  s = "That's clear."
  print s 

s = "Python is great!" 
f()
print s 
```

# vb.net - VB.net 更改 Excel 工作簿名称

> ID：14421738
> 
> 赞同：1
> 
> 时间：2013-01-20T04:43:35.230
> 
> 标签：vb.net

当我创建一个工作簿时，它通常被命名为“Book 1”。我想将其更改为“我的工作簿”之类的内容，而无需保存文件。这可能吗？这是我用来创建这本书的代码。

```
 Dim ExcelApplication As Excel.Application = New Excel.Application
    Dim ExcelWorkbook As Excel.Workbook = ExcelApplication.Workbooks.Add 
```

如果这可行，那就太好了：

```
 Dim ExcelWorkbook as Excel.Workbook = _
    ExcelApplication.Workbooks.Add(Name = "My Workbook") 
```

或者

```
ExcelWorkbook.Name = "My Workbook" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:58:48.730

@joeB：此链接可以帮助您了解 Microsoftinterop 的问题，它没有选择更改工作簿名称而不保存它的选项。 [http://bytes.com/topic/visual-basic-net/answers/602857-how-do-i-set-initial-excel-workbook-name](http://bytes.com/topic/visual-basic-net/answers/602857-how-do-i-set-initial-excel-workbook-name)

# cakephp - CakePHP 将分页生成的 URL 中的插件名称大写

> ID：14421740
> 
> 赞同：-1
> 
> 时间：2013-01-20T04:44:25.253
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.3

我有一个名为“Admin”的插件。当我去`/admin/users`查看用户列表时，分页生成的链接看起来都像`/Admin/users/index/page:2`。

如果我访问`/admin/users/index/page:2`（注意小写“a”），分页生成的链接再次正确。

关于如何解决这个问题的任何想法？

### 编辑：

我不确定为什么这被否决了。

我更新了上面的网址

```
// Plugin/Admin/Config/routes.php
Router::Connect('/admin/:controller', array('plugin' => 'Admin', 'controller' => ':controller'));
Router::Connect('/admin/:controller/:action', array('plugin' => 'Admin', 'controller' => ':controller', 'action' => ':action')); 
```

删除这两行似乎解决了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:51:47.927

注释掉这些行或将管理员中的“A”更改为“a”修复它。谢谢@AD7six

```
// Plugin/Admin/Config/routes.php
Router::Connect('/admin/:controller', array('plugin' => 'admin', 'controller' => ':controller'));
Router::Connect('/admin/:controller/:action', array('plugin' => 'admin', 'controller' => ':controller', 'action' => ':action')); 
```

# google-maps - 谷歌地图图层使用按钮打开/关闭

> ID：14421742
> 
> 赞同：1
> 
> 时间：2013-01-20T04:44:58.683
> 
> 标签：google-maps, layer

我现在正在玩（和学习）谷歌地图 KML 图层。下面的代码有效，但一旦关闭（或设置为空），我就无法重新打开图层。我假设我需要添加一个 DOM 侦听器，但不确定如何执行此操作。帮助表示赞赏。

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"> </script>
<script type="text/javascript">
var layers = [];

function initialize() {
  var myLatLng = new google.maps.LatLng(-41.356341319572, 147.41842480153);
  var bounds = new google.maps.LatLngBounds();
  var myOptions = {
    zoom: 12,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("show_map"),myOptions);
  var image1 = 'images/sa.png';
  var ctaLayer = new google.maps.KmlLayer('http://a.server/inc/kml_files/search_tests.kmz');
  ctaLayer.setMap(map);
  var varLatLng = new google.maps.LatLng(-41.356341319572,147.41842480153);

  layers[1] = new google.maps.KmlLayer('http://a.server/inc/kml_gps/p2track.kml', {preserveViewport:true});
  layers[1].setMap(map);
  layers[2] = new google.maps.KmlLayer('http://a.server/inc/kml_gps/p5_day2.kml', {preserveViewport:true});
  layers[2].setMap(map);
  bounds.extend(varLatLng);
  map.fitBounds(bounds);
}

function toggleLayer(i) {
  if(layers[i].getMap() === null) {
    layers[i].setMap(map);
  } else {
    layers[i].setMap(null);
  }
}

</script>
</head />
<body style="margin:0px; padding:0px;" onload="initialize()" />
<div id="show_map" style="width:100%; height:95%;"></div>
<input type="button" id="layer1" onclick="toggleLayer(1)" value="GPS&nbsp;Tracks 1 On/Off">
<input type="button" id="layer2" onclick="toggleLayer(2)" value="GPS&nbsp;Tracks 2 On/Off">
</body>
</html> 
```

我收到错误“未定义地图”，“layers[i].setMap(map);” 当我尝试再次打开它时。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:53:58.253

这是因为 map 变量是在函数 initialize() 中定义的局部变量。您可以在定义 map 时删除“var”，也可以在 initialize() 函数上方定义 map -

```
 var map = new google.maps.Map(document.getElementById("show_map"),myOptions); 
```

# c# - 页面刷新后 HttpContext.Current.Cache 项为空

> ID：14421744
> 
> 赞同：6
> 
> 时间：2013-01-20T04:45:25.360
> 
> 标签：c#, caching, web

我有一个 C# 网页，其中使用 HttpContext.Current.Cache 在服务器缓存中存储一​​个 List<> 对象。该对象在第一个页面加载后保存在缓存中。但是，当我刷新页面时，缓存对象为空。有什么想法吗？

另外，我想设置一个“工作”来每 30 分钟重新创建一次对象。我想提供缓存版本，直到创建新版本，然后用新版本替换旧版本。我怎么做？

在我的 Global.asax 中，在 Application_Start 中，我有以下内容：

```
HttpRuntime.Cache.Insert("MainADList", Uf.GetUsers(), null, Cache.NoAbsoluteExpiration, TimeSpan.FromMinutes(30)); 
```

当我需要它时，我会执行以下操作：

```
 MainADList = (Users)HttpRuntime.Cache["MainADList"]; 
```

这在很大程度上是空的。并非总是如此，但几乎总是如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:28:44.600

即使您使用`Cache.NoAbsoluteExpiration`+填充缓存`Cache.NoSlidingExpiration`，ASP.NET 也可以从缓存中删除项目（即：当可用系统内存不足时）。

传递`CacheItemPriority.NotRemovable`给 Cache.Insert() 以防止这种情况发生。[在 MSDN 上查找 CachéItemPriority。](http://msdn.microsoft.com/en-us/library/system.web.caching.cacheitempriority.aspx)

IIS 应用程序池因长时间空闲、web.config/binary 更改等而重新启动也会擦除您的缓存。检查[此其他 SO 帖子， HttpRuntime.Cache.Insert() 不保存缓存值](https://stackoverflow.com/questions/1792972/c-sharp-httpruntime-cache-insert-not-holding-cached-value)

关于创建作业刷新缓存；我认为最好的缓存策略没有经验法则。这在很大程度上取决于您的用户与您的网页交互的方式、频率、并发程度，特别是在未命中缓存时生成该数据需要多长时间。

如果任何用户都无法接受生成数据所花费的时间，您可以设置一个刷新缓存的作业，但它的时间间隔应小于缓存 TTL + 生成/检索所用时间的总和。例如，如果您的缓存为 30m，而生成数据需要 2m，则您的刷新间隔必须为 28m 或更少，以避免任何用户命中空缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T04:39:32.297

你可以用`System.Runtime.Caching`代替吗？这样你就不会依赖于 HttpRuntime 命名空间。

我怀疑你得到空值是因为.Net 由于网络服务器重新启动而正在清除它。做一些类似的事情会更好吗

```
 public List<User> GetUsers()
    {
        var cache = System.Runtime.Caching.MemoryCache.Default;
        if (cache["MainADList"] == null)
        {
            // Rebuild cache. Perhaps for Multithreading, you can do object locking
            var cachePolicy = new System.Runtime.Caching.CacheItemPolicy() { AbsoluteExpiration = DateTime.Now + TimeSpan.FromMinutes(30) };
            var users = Uf.GetUsers();
            cache.Add(new System.Runtime.Caching.CacheItem("MainADList", users), cachePolicy);

            return users;
        }

        return cache["MainADList"] as List<User>; 
    } 
```

# linux - Window 选项 Eclipse 中缺少 Avd 和 sdk 管理器

> ID：14421749
> 
> 赞同：0
> 
> 时间：2013-01-20T04:48:07.040
> 
> 标签：linux, eclipse, sdk

我**无法在 Linux 12.04 的 eclipse 中看到 avd 和 sdk 管理器。**我该如何安装它？起初，当我设置由于网络连接错误而正在安装的 sdk 时，我在安装时关闭了窗口。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:17:28.507

我明白了。在 Eclipse -> Windows -> 自定义透视图 -> 选择 Android SDK 和 AVD 管理器 -> 确定

# jquery - 如何创建链接以调用 jquery 插件本身的功能

> ID：14421753
> 
> 赞同：0
> 
> 时间：2013-01-20T04:48:29.927
> 
> 标签：jquery, jquery-plugins, hyperlink

我的插件创建链接，然后调用插件本身的功能。我可以直接操作 DOM 并使用类似的东西`$link.click(function() {...})`，但我不想使用这种方法，因为 -

1.  我的代码变得更加复杂并且
2.  [字符串操作更快](https://stackoverflow.com/questions/4261687/best-way-to-create-a-link-using-jquery)

如何通过字符串链接调用插件的功能？

问题是找到创建插件的实际 DOM 元素。我不能只使用/设置 HTML id，因为它可能被页面用于其他目的，或者可能不是唯一的。我想出了添加一个独特的类以便稍后找到插件的想法：

```
 // init function of plugin
 init : function( options ) {
     return this.each(function () {
        var data = $this.data("myPlugin");
        if (!data) {
          data.uniqueClass = 'p' + new Date().getTime() + '_' + Math.random().toString().substring(2);
          $this.addClass(data.uniqueClass);  
          this.data('myPlugin', data);
          // generate link
          $this.html('<a onclick="jQuery(\'.' + data.uniqueClass + '\').myPlugin(\'func\');">Do func</a>');
        }   
     });
 }

 // function that i want to call of my plugin
 func : function() { 
    return this.each(function () {
       // do stuff
    });
 } 
```

但是有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:51:36.587

不要这样做。您获得的额外性能可以忽略不计。

我不会将此作为评论发布，因为这应该是答案。**不要这样做！**.

# php - 获取数组中的会话数据

> ID：14421757
> 
> 赞同：0
> 
> 时间：2013-01-20T04:49:23.687
> 
> 标签：php, codeigniter, session

这可能是一个非常愚蠢的问题。我擅长 PHP 中的某些事情，但是完全是自学的，我错过了一些基础知识。这也是我的第一个 CodeIgniter 项目，所以我不知道它提供的任何有用的快捷方式。

我似乎无法在任何地方找到这方面的信息，因为我不知道要搜索哪些术语。这可能是一个非常简单的解决方案，所以请耐心等待。

我正在设置 ACP，我想在“仪表板”上显示当前用户会话的列表。我直接从数据库中调用它，因为这是我知道的唯一方法：

```
<?php    
  $session = mysql_query("SELECT * FROM `ci_sessions` ORDER BY `last_activity` ASC LIMIT 0, 30 ");
  $session_array = array();
  while($row = mysql_fetch_assoc($session)) {$session_array[] = $row;}
  foreach ($session_array as $data):?>
  <li><?=$data['ip_address']?> [<?=$data['user_agent']?>]<br /><?=$data['user_data']?></li>
<? endforeach; ?> 
```

不幸的是，这是我为 $data['user_data'] 部分得到的，我不知道要解析它以获得我想要的数据：

```
a:6:{s:9:"user_data";s:0:"";s:8:"identity";s:16:"email@email.com";s:8:"username";s:11:"first last";s:5:"email";s:16:"email@email.com";s:7:"user_id";s:1:"2";s:14:"old_last_login";s:10:"1358653607";} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:56:44.610

该数据是序列化的。只需[`unserialize()`](http://us2.php.net/manual/en/function.unserialize.php)将其转换为数组即可。

# ios - NSFileWrapper 错误写入 URL

> ID：14421760
> 
> 赞同：0
> 
> 时间：2013-01-20T04:50:06.323
> 
> 标签：ios, nsfilewrapper

我有一个存档，我正在尝试将其内容复制到 Documents 目录中。它在模拟器中运行良好，但在设备上出现错误时中止。

```
- (BOOL)importData:(NSData *)zippedData {

// Read data into a dir Wrapper

NSData *unzippedData = [zippedData gzipInflate];

NSFileWrapper *dirWrapper = [[[NSFileWrapper alloc] initWithSerializedRepresentation:unzippedData] autorelease];

if (dirWrapper == nil) {

    NSLog(@"Error creating dir wrapper from unzipped data");

    return FALSE;

}

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSURL *dirUrl = [NSURL fileURLWithPath:documentsDirectory];  

NSError *error;

BOOL success = [dirWrapper writeToURL:dirUrl options:NSFileWrapperWritingAtomic originalContentsURL:nil error:&error];

if (!success) {

    NSLog(@"Error importing file: %@", error.localizedDescription);

    return FALSE;

}

// Success!

return TRUE;    

} 
```

我在控制台中得到以下输出：

```
2013-01-19 22:40:23.865 我的应用程序 [569:907] 名为 mkdir 的基金会（“/var/mobile/Applications/1BF53E96-6261-4DEC-8700-60307D84587F/（我的应用程序正在保存的文档）”） ，它没有返回 0，并且 errno 被设置为 1。

2013-01-19 22:40:23.922 我的应用程序 [569:907] 导入文件时出错：操作无法完成。（可可错误 513。）

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T17:03:30.700

我认为您只能写入手机上的 Documents 目录，因此在您的 (A Document Being ...) 之前将“Documents”添加到您的 dirurl

# javascript - 将 click() 事件附加到 google plus 按钮？

> ID：14421762
> 
> 赞同：4
> 
> 时间：2013-01-20T04:50:21.267
> 
> 标签：javascript, google-plus

当用户单击“g+”按钮时，我想在页面上添加一条警报消息。我怎样才能做到这一点？
这是代码：

```
<g:plusone href="http://test.com//" annotation="inline" width="300"></g:plusone> 
<script type="text/javascript"> 
 (function() { 
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T18:27:44.867

万一您需要一些代码来帮助您入门，以下标记将启用 +1 按钮中的交互事件：

```
<div
  class="g-plusone"
  data-expandto="bottom"
  data-onendinteraction="onEnded"
  data-onstartinteraction="onStarted"
  data-recommendations="false"
  data-annotation="inline"
  data-height="25"
  data-autoclose="true"
  data-callback="onCallback" 
  data-width="300"
> 
```

以下代码将处理这些事件：

```
function onStarted(args){
  console.log("started");
  console.log(args);
}
function onEnded(args){
  console.log("ended");
  console.log(args);
}
function onCallback(args){
  console.log("callback");
  console.log(args);
} 
```

回调将返回按钮的+1状态，开始/结束交互指示用户状态。[您可以在此处](http://wheresgus.com/hidepopup.html)查看所有事件的演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T05:01:08.687

尝试阅读他们的文档，这实际上非常好。它们提供对回调函数的访问。见章节`tag attributes`。

[https://developers.google.com/+/plugins/+1button/#script-parameters](https://developers.google.com/+/plugins/+1button/#script-parameters)

# ios - iOS phonegap 应用升级到 iOS 原生应用的步骤

> ID：14421763
> 
> 赞同：-2
> 
> 时间：2013-01-20T04:50:49.867
> 
> 标签：ios, cordova, uistoryboard

我有一个应用程序，目前在应用程序商店中，但它是 phonegap 基础并且用户界面很慢。我想为这个应用程序构建本机。

问题是如果我创建一个新项目，捆绑标识符必须与前一个不同，这将被视为应用商店中的新应用，现有用户将无法更新他们的副本。

如果我使用现有项目（phonegap），任何人都可以建议添加或删除或更改什么？

我将使用故事板，因为我正在使用 XCode 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:51:36.607

没有什么可以阻止您使用相同的包标识符。通过创建一个新的 PhoneGap 应用程序并使用相同的包 ID 并升级版本，我已经很容易地采用了另一种方式（原生于 PhoneGap/Cordova）。

# assembly - masm32 中的 while 循环无限循环

> ID：14421772
> 
> 赞同：2
> 
> 时间：2013-01-20T04:53:08.977
> 
> 标签：assembly, while-loop, masm32

我是汇编语言的新手。于是开始写小程序。我编写了一个基本的循环程序来打印“*”金字塔。但程序进入无限循环。我正在粘贴下面的代码。有人可以帮忙吗？开始：

```
 mov ecx,2
   invoke StdOut, addr startProg

label_1:

   .while ecx > 0

   push ecx
       pop aInt

     .while aInt > 0
       invoke StdOut, addr star
       sub aInt, 1
     .endw

        dec ecx
    .endw

     ;invoke StdOut, addr newline

   jmp out_
out_:
   invoke ExitProcess, 0 
```

结束开始

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T06:09:45.873

Invoke 通过 __stdcall 调用约定调用该方法。该约定的一部分是在该调用中不保留 EAX、ECX 和 EDX。这就是为什么您的 ECX 和 EAX 寄存器没有递减并导致循环停止的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-20T23:17:58.603

就像@SecurityMatt 所说，您陷入无限循环的原因是因为`ecx`在您调用`StdOut`.
您可以通过使用保留寄存器`push`然后使用以下方法恢复它们来避免这种情况`pop`：

```
.while ecx > 0
   push ecx
   pop aInt
   ; preserve state of `ecx`
   push ecx
   .while aInt > 0
     invoke StdOut, addr star
     sub aInt, 1
   .endw
   ; restore ecx
   pop ecx
   dec ecx
.endw 
```

您还可以使用`pushad`and`popad`来将所有通用寄存器值推入和弹出堆栈。

```
; push general-purpose registers values onto stack
pushad
invoke StdOut, addr star
; restore general-purpose registers
popad 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T07:26:51.887

您可能将汇编指令与宏混淆了。.while 不是汇编指令，它是一个宏。所有以“。”开头的指令都相同。

# java - 试图将 ArrayList 转换为 LinkedList。不知道为什么这不起作用

> ID：14421774
> 
> 赞同：3
> 
> 时间：2013-01-20T04:53:25.110
> 
> 标签：java, arraylist, linked-list

编辑：不知道为什么，但代码似乎现在可以正常工作而无需任何编辑。jGrasp 调试器可能有问题吗？

===

好的。所以这是我的家庭作业，将在 2 周后分配，但我想要一个良好的开端。请不要更正我的代码，或分享正确的代码。如果你能指出我正在做的事情的错误，那就太好了。

所以我有`node`以下构造函数：

```
public node(String name)
public node(String name, node next) 
```

我需要`public method(ArrayList<String> names)`在一个单独的类中编写一个方法，它将所有元素添加`names`到链表中。

这是我现在拥有的：

```
public method(ArrayList<String> names) {
    if(names.size() == 0 || names == null) {
        throw new IllegalArgumentException();
    }

    // Handle base case, create first node
    first = new node(names.get(0));    // first has been declared above

    node current = first;

    // Add at the end of the list
    for(int i = 1; i < names.size(); i++) {
        current.next = new node(names.get(i));
        current = current.next;
    }

} 
```

我不确定为什么这不能按要求工作。我正在使用 jGrasp，并使用调试器，我看到最后，我得到了一个只有 1 个值的链表（ArrayList 中的最后一个元素）。为什么？

请不要推荐使用任何高级功能，因为我是 Java 新手，使用任何进一步的高级功能只会让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:23:11.970

我认为您正在从该方法返回最后一个节点，而您需要返回第一个节点，因为它包含所有其他链接节点。您应该返回第一个节点而不是当前节点。

如果您仍然有问题，请向我们展示您是如何测试它以得出它仅包含最后一个元素的结论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:21:37.583

我使用您的代码（并使用[JavaBean 标准命名](https://stackoverflow.com/q/1991316/1065197)）进行了测试，您的方法运行良好。这是代码示例（这里有一些长代码块）：

```
import java.util.ArrayList;

class Node {
    private String data;
    private Node next;

    public Node(String data) {
        this.data = data;
        this.next = null;
    }

    public Node(String data, Node next) {
        this.data = data;
        this.next = next;
    }

    public String getData() {
        return data;
    }

    public Node getNext() {
        return next;
    }

    public void setNext(Node next) {
        this.next = next;
    }
}

public class NodeTest {

    private Node first;

    public NodeTest() {
        this.first = null;
    }

    //hint: this is your code, no changes were made here except by the method name
    public void insertArrayList(ArrayList<String> names) {
        //changing the order of the comparison. Java evaluates from left to right
        if(names == null || names.size() == 0) {
            throw new IllegalArgumentException();
        }

        // Handle base case, create first node
        first = new Node(names.get(0));    // first has been declared above

        Node current = first;

        // Add at the end of the list
        for(int i = 1; i < names.size(); i++) {
            current.setNext(new Node(names.get(i)));
            current = current.getNext();
        }
    }

    public void traverse() {
        Node current = first;
        while (current != null) {
            System.out.println(current.getData());
            current = current.getNext();
        }
    }

    public static void main(String[] args) {
        ArrayList<String> names = new ArrayList<>();
        names.add("Hello");
        names.add("world!");
        NodeTest nodeTest = new NodeTest();
        nodeTest.insertArrayList(names);
        nodeTest.traverse();
    }
} 
```

结果：

```
Hello
world! 
```

因此，正如先前评论中所发布的那样，如果您的链接列表已被填充，或者您在未显示的代码中的其他地方存在问题，那么您如何测试可能存在问题。

# macos - 使用 MAMP Pro php.ini 而不是 OSX php

> ID：14421777
> 
> 赞同：5
> 
> 时间：2013-01-20T04:54:15.370
> 
> 标签：macos, mamp, php, apc

我在我的 mac 中使用 APC 在 php 中运行命令时遇到问题。在 MAMP Pro 中，我打开了它，但看起来我的 mac 没有使用 MAMP 的 php，而是使用 osx'。

关于如何告诉我的 Mac 使用 MAMP Pro 而不是 OSX 的 php.ini 的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T05:26:23.513

可执行文件`MAMP Pro` `PHP`应位于.`/Applications/MAMP/bin/php/php5.x.x/bin/`

默认情况下`OSX` `PHP`位于变量中`/usr/bin/php`。`/usr/bin``PATH`

一种`OSX`使用方法`MAMP` `PHP`是添加`/Applications/MAMP/bin/php/php5.x.x/bin/`到您的`PATH`变量（之前`/usr/bin`）：

只需编辑`~/.profile`（即 open `Terminal.app`， type `vim ~/.profile`）并将以下行添加到文件末尾：

```
export PATH=/Applications/MAMP/bin/php/php5.x.x/bin/:$PATH 
```

请注意，您应该将`x`s in替换`php5.x.x`为`MAMP Pro` `PHP`版本。

# c++ - 哪个更好检查密钥是否在 C++ 中的 hash_map 中？at 与 try...catch 块或 find 与迭代器比较？

> ID：14421778
> 
> 赞同：0
> 
> 时间：2013-01-20T04:54:27.177
> 
> 标签：c++, hashmap

据我所知，有两种基本方法可以检查项目是否在 hash_map 中：

假设我们有一个 hash_map：`hash_map<string, int> amap`

如果我们要检查“abc”是否在地图中，那么我们可以

```
hash_map<string, int>::iterator itr = amap.find("abc");
if (itr != amap.end()) //in the map 
```

或者：

```
try {
    int value = amap.at("abc");
}
catch(out_of_range& e) {
    //not there    
} 
```

只是想知道哪个更好？出于效率考虑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T04:56:41.420

使用`find()`. 测试迭代器几乎肯定会比捕获异常便宜得多。

# c++ - 使用字符串流解码十六进制编码的字符串

> ID：14421779
> 
> 赞同：3
> 
> 时间：2013-01-20T04:54:33.190
> 
> 标签：c++, encoding, hex, stringstream

使用 stringstream 对字符串进行十六进制编码很容易，但是是否可以反过来使用 stringstream 解码生成的字符串？

```
#include <iostream>
#include <string>
#include <iomanip>
#include <sstream>

int main()
{
  std::string test = "hello, world";

  std::stringstream ss; 
  ss << std::hex << std::setfill('0');
  for (unsigned ch : test)
    ss << std::setw(2) << int(ch);

  std::cout << ss.str() << std::endl;
} 
```

我不希望直接对字节进行位移或使用旧的 c 函数，例如 scanf 系列函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T05:01:03.847

如果您只有一个没有分隔符的十六进制数字流，那么就不是那么容易了。您可以使用[`std::basic_istream::get`](http://en.cppreference.com/w/cpp/io/basic_istream/get)or[`std::basic_istream::read`](http://en.cppreference.com/w/cpp/io/basic_istream/read)一次提取两个数字，然后使用 eg[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)转换为整数，然后可以将其类型转换为`char`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:05:43.017

如果*您*在数字之间放置某种分隔符。举例来说，让我们首先更改代码以在输出的每个字节之间插入一个空格：

```
#include <iostream>
#include <string>
#include <iomanip>
#include <sstream>

int main()
{
  std::string test = "hello, world";

  std::stringstream ss; 
  ss << std::hex << std::setfill('0');
  for (unsigned ch : test)
    ss << std::setw(2) << int(ch) << " ";

  std::cout << ss.str() << std::endl;
} 
```

然后，让我们编写一个小程序从 cin 中读取该数据，并再次将其打印为字符：

```
#include <iostream>
#include <string>
#include <iomanip>
#include <sstream>

int main()
{
    int i;
    while (std::cin >> std::hex >> i)
        std::cout << static_cast<char>(i);
    return 0;
} 
```

当我用第一个管道到第二个运行这些时，我得到`hello, world`了输出。

显然，从 a 中读取数据与`stringstream`从 - 我使用 cin 读取数据几乎相同，`std::cin`因此我可以在保持代码几乎完整的同时进行演示。

# android - Android设置位图图像

> ID：14421780
> 
> 赞同：1
> 
> 时间：2013-01-20T04:54:42.520
> 
> 标签：android, bitmap, paint

我现在正在做一个绘画应用程序，想问一下如何加载图片并设置为位图？

我将编码设置如下，并链接A类和DrawView类。

## 问题：

代码报告错误“The method setImageBitmap(Bitmap) is undefined for the type Bitmap” in `DrawView Class`for the line

> bitmap.setImageBitmap(BitmapFactory.decodeFile(picturePath));

，我不知道如何将图片加载到Bitmap。

## A类：

```
private DrawView drawView;
...
...

public void go_load_pic() 
{       
    Intent i = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);                
    startActivityForResult(i, RESULT_LOAD_IMAGE);   
}   

protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) 
    {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();

        drawView.load_pic(picturePath);     
    }   
} 
```

## 在类 DrawView 中：

```
public class DrawView extends View  // the main screen that is painted
{
   // used to determine whether user moved a finger enough to draw again   
   private static final float TOUCH_TOLERANCE = 10;

   private Bitmap bitmap; // drawing area for display or saving
   private Canvas bitmapCanvas; // used to draw on bitmap
   private Paint paintScreen; // use to draw bitmap onto screen
   private Paint paintLine; // used to draw lines onto bitmap
   private HashMap<Integer, Path> pathMap; // current Paths being drawn
   private HashMap<Integer, Point> previousPointMap; // current Points
   ...

public void load_pic(String picturePath) // load a picture from gallery
   {
      bitmap.setImageBitmap(BitmapFactory.decodeFile(picturePath)); //ERROR LINE
      invalidate(); // refresh the screen
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:03:46.703

您正在调用该类中不存在的方法`Bitmap`。该方法可以在框架小部件上找到，例如`ImageView`和`ImageButton`。 `BitmapFactory`已经返回 a `Bitmap`，所以只需分配实例。

```
bitmap = BitmapFactory.decodeFile(picturePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T04:59:10.633

decodeFile 调用将从文件创建位图。你的变量位图——它的类型是什么？对于那个调用，它应该是一个 ImageView，是吗？

# jquery - jquery 切换两个动画

> ID：14421782
> 
> 赞同：0
> 
> 时间：2013-01-20T04:55:52.693
> 
> 标签：jquery

基本上，每次单击按钮时，我都会尝试在两种不同的单击功能之间切换。

继承人的jQuery代码：

```
$("button").click(function () {
    $("#sidebar").animate({ width: '0px' }, 250, function() {
            $(this).hide();
         });
    $("#tabs_container").animate({
        width: "100%"
    }, 500);
    $("#tabs_container ul.tabs li a").animate({
        width: "247px"
    }, 500);
    $("#myElement_wrapper").animate({
        width: "970px"
    }, 500);
});
$("button").click(function(){
    $("#sidebar").show().animate({
        width: "219px"
    }, 500);
    $("#tabs_container").animate({
        width: "781px"
    }, 500);
    $("#tabs_container ul.tabs li a").animate({
        width: "190px"
    }, 500);
    $("#myElement_wrapper").animate({
        width: "720px"
    }, 500);
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T04:59:15.087

这[`toggle`](http://api.jquery.com/toggle-event/)就是为了。将您创建的这两个函数传递给它：

```
$("button").toggle(function () {
    $("#sidebar").animate({ width: '0px' }, 250, function() {
       $(this).hide();
    });
    // the rest of your first animation sequence
}, function () {
    $("#sidebar").show().animate({
        width: "219px"
    }, 500);
    // the rest of your second animation sequence
}); 
```

您还应该考虑缓存您的选择器...

* * *

如果您使用的是 jQuery 1.9+，则必须保留自己的标志：

```
$("button").click(function () {
    var toggle = $.data(this, 'clickToggle');

    if ( toggle ) {
        // your first animation sequence
    } else {
        // your second animation sequence
    }

    $.data(this, 'clickToggle', ! toggle);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T05:06:12.930

您可以设置一个标志来记住元素当前是在“奇数”还是“偶数”点击：

```
$("button").click(function() {
    var $this = $(this),
        flag = $this.data("clickflag");
    if (!flag) {
        // first code here
    } else {
        // second code here
    }
    $this.data("clickflag", !flag);
}); 
```

演示：http: [//jsfiddle.net/KHLdr/](http://jsfiddle.net/KHLdr/)

这使用 jQuery 的[`.data()`方法](http://api.jquery.com/data/)来针对单击的元素存储一个布尔值。

# java - 无法从本地目录（如 F: 或 Spring Web 应用程序中的应用程序 webapp 文件夹）显示图像？

> ID：14421789
> 
> 赞同：0
> 
> 时间：2013-01-20T04:57:51.473
> 
> 标签：java, spring

我正在创建一个 Spring Web App ，其中我在本地目录中上传了图像。但是在 jsp 上显示时，它无法显示本地目录或 webapp/profile_pics 文件夹中的图像。我已经尝试了这两种选择？

我的 Jsp 代码：

```
 <img src="F:/image.jpg"/>
      <img src="${pageContext.request.contextPath}/profile_pics/${profilePicName}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:03:28.277

出于安全原因，无法从 Web 服务器访问本地文件图像。想象一下，如果另一台服务器上的网页有对 C:\myfile 的引用，并且他们在您的机器上运行它。

该图像应位于您的 Web 服务器可访问的位置。尝试将它放在你的 webapps 目录中，然后你的 jsp 应该能够使用 URL（相对或绝对）访问它。

如果 html 页面是从文件（而不是服务器上）加载的，则`<img>`需要一个 URL，它应该是`file://F:/image.jpg`见[https://superuser.com/questions/352133/what-is-the-reason-that-用于 URL 格式的 file-urls-start-with-three-slashes-file-etc](https://superuser.com/questions/352133/what-is-the-reason-that-file-urls-start-with-three-slashes-file-etc)。我怀疑情况并非如此，因为您提到它是一个jsp。

# c++ - 如何将一个对象的多个实例发送到一个函数中

> ID：14421795
> 
> 赞同：0
> 
> 时间：2013-01-20T04:59:18.603
> 
> 标签：c++, class, object, parameter-passing

我有一些看起来像这样的代码

```
class Split
{
public:
    Split(Hand *pcHand = NULL)
        : phand(pcHand), phandsplit(pcHand)
     {
     }

    int CardOne;
    int CardTwo;
    int CardThree;

    void getCardOne(Hand & phand)
    {
        CardOne = phand.SendCOneToSplit();
        std::cout << "Card One: " << CardOne << std::endl;
    }

    void getCardTwo(Hand & phandsplit)
    {
        CardTwo = phandsplit.SendCOneToSplit();
        std::cout << "Card Two: " << CardTwo << std::endl;
    }

    void getCardThree(Hand & phandsplitTwo)
    {
        CardThree = phandsplitTwo.SendCOneToSplit();
        std::cout << "Card Two: " << CardTwo << std::endl;
    }

private:
    Hand * phand;
    Hand * phandsplit;
}; 
```

我想让它成为一个函数，而不是需要添加另一个函数，它只对同一类的不同对象执行完全相同的操作。有没有办法做到这一点？如果是这样，谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:02:32.513

只需将一个附加参数传递给函数，它会告诉您要处理哪个类成员。

```
enum
{
    CardOne, CardTwo, CardThree, //so on....
}CardNumber;

void getCard(Hand & phandsplitTwo, CardNumber card)   
{
    if(card == CardOne)
       CardOne = phand.SendCOneToSplit();
    else if(card == CardTwo)
       CardTwo = phandsplit.SendCOneToSplit();
    else if(card == CardThree)
       CardThree = phandsplitTwo.SendCOneToSplit();
    //....
} 
```

**注意：**
我不知道您为什么将方法命名为***getXXXXX***，但它们实际上并没有返回任何东西。也许，名字应该是***setXXXXXX*** ??

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:12:02.123

好吧，由于您的变量是公开的，您总是可以只传递您想要操作的变量：

```
void getCard(Hand& hand, int& card)
{
    card = hand.SendCOneToSplit();
    std::cout << "Card: " << card << std::endl;
} 
```

然后像这样调用：

```
split.getCard(hand, split.CardOne); 
```

当然，使用公共变量可能不是一个长期的解决方案，因此另一种选择是替换：

```
int CardOne;
int CardTwo;
int CardThree; 
```

有一个数组：

```
int cards[3]; 
```

然后只需传入你想要的索引：

```
void getCard(Hand& hand, int ndx)
{
    cards[ndx] = hand.SendCOneToSplit();
    std::cout << "Card: " << cards[ndx] << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T05:19:56.263

如果性能很重要，如果有很多“卡片类型”；我会使用函数指针（即方法指针）。

```
void (Split::*pfGetTheCard)(Hand & phand);

// Dynamically assign it to one of those:
pfGetTheCard =  &Split::getCardTwo;

// And call it:
(cardobj.*pfGetTheCard)(); 
(pCardPtr->*pfGetTheCard)(); 
```

请注意，这可能不是合适的解决方案，因为这完全取决于您的设计、性能和维护问题。这只是我的想法！

# android - 刷新之前的活动

> ID：14421801
> 
> 赞同：1
> 
> 时间：2013-01-20T05:00:34.003
> 
> 标签：android

我知道有人问过这个问题，但没有答案对我有帮助，而且我是 android 新手 :)

[这个答案](https://stackoverflow.com/questions/6850683/using-onresume-to-refresh-activity)可以帮助我。但我无法弄清楚。

1.  我有两个活动：Activity1 和 Activity2
2.  我使用 button01 转到 Activity2

当我使用物理后退按钮返回 Activity1 时，我想要自动刷新。

活动代码1

```
public class Activity1 extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button next = (Button) findViewById(R.id.Button01);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), Activity2.class);
                startActivityForResult(myIntent, 0);
            }    
        });            
    }
} 
```

活动代码2

```
public class Activity2 extends Activity {

            /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);     
    }
} 
```

请求详细的建议...在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:05:57.867

你应该能够覆盖 onResume 并在那里做你需要的事情。它应该在您的活动首次启动或重新获得焦点时调用。

请参阅此处了解更多信息：http: [//developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:11:03.637

由于您正在调用`startActivityForResult(myIntent, 0)`以触发第二个 Activity，因此当该 Activity 完成时，您的第一个 Activity 将收到回调`onActivityResult()`，而不管触发 Activity2 完成的操作。

```
public class Activity1 extends Activity {

    /** ...The code you already wrote here... **/

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        //Do your update or refresh here...
    }

    @Override
    protected void onResume() {
        super.onResume();

        //This method also gets called every time the Activity is
        // moved into the foreground, you can call your refresh here as well.
    }
} 
```

如果您需要传回一些数据，您可以`setResult()`在完成之前调用第二个 Activity，该数据将`onActivityResult()`作为`resultCode`和`intent`参数提供。

这篇开发人员培训文章有望提供进一步的见解：http: [//developer.android.com/training/basics/intents/result.html](http://developer.android.com/training/basics/intents/result.html)

# java - Java 持久性和实体类

> ID：14421802
> 
> 赞同：0
> 
> 时间：2013-01-20T05:00:54.993
> 
> 标签：java, sql, jpa, ibatis

我有两个实体类 -`A`和`B`. 代码模板如下：

```
class A extends class B  {
    // ...
}

@Entity
@Table("OPERATION")
@DiscriminatorValue()
@Access()
class B  {
    // ...
} 
```

类`B`在 .sql 文件中有一个架构定义。类`A`没有任何模式定义。

我的问题是，类是否也不`A`需要在 .sql 文件中有模式定义，以便将其映射到关系数据库？我对此感到困惑，无法理解映射是如何发生的。

举一个更具体的例子，我有以下两个类`Operation`，`OperationAmend`它们的代码如下：

```
 @Entity
 @DiscriminatorValue()
 @Access()
 class OperationAmend extends Operation {   
     //some functions here for amending an operation
 }

 @Entity
 @Table("OPERATION")
 @DiscriminatorValue()
 @Access()
 class Operation  {   
     //some functions here for the operation.
 } 
```

SQL架构：

```
 CREATE TABLE OPERATION {    
     OperationId INT;    
     Name VARCHAR(20); 
 } 
```

`OperationAmend`即使没有模式，如何保存该类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:36:31.733

在 JPA 中，实体只需在 persistence.xml 中声明（或由提供者扫描）即可被识别。提供者为它生成一个模式。现在，数据库中可能不存在实现表，但这很容易修复。

# c++ - 验证输入的好方法是什么？

> ID：14421808
> 
> 赞同：-1
> 
> 时间：2013-01-20T05:02:28.623
> 
> 标签：c++, validation

我有一个类，其中一些成员的值具有有限范围。例如

```
class Sphere
{
public:
    void setRadius(double radius)
    {
        m_radius = radius;
    }

private:
    double m_radius; // must >= 0.
}; 
```

我还有一个对话框来输入半径。我可以在 setRadius() 方法中检查半径验证，或者在对话框中检查。哪种方式更好？这似乎是一个很普遍的问题。什么是常规方式或最佳方式？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T05:04:21.603

我假设将根据用户输入调用 set 方法。如果是这样，传统的方法是如果提供了异常值，则 set 方法会抛出异常。异常应该一直传播到 UI

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:04:06.527

> 我可以在 setRadius() 方法中检查半径验证，或者在对话框中检查。哪种方式更好？

如果系统真的很小，图形界面也比较简单，可以在对话框类中查看输入。另一种解决方案是提供第三类作为检查用户输入的输入验证策略。

下面是一个非常简单的演示代码，可以使用模板为不同的 GUI 设置不同的策略。

```
class CheckPolicy
{
public:
  CheckPolicy() {}

  virtual bool ValidInput(double f)
  {
    return f > 0;
  }
};

class GUI
{
public:
  GUI(){}
  void GetInput()
  {
      float f = 1.0f;
      if (policy_.ValidInput(f))
      {
        sphere_.setRadius(f);
      }
  }
private:
  CheckPolicy policy_;
  Sphere      sphere_;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T05:42:57.127

在 OOP 中，您通常在函数中进行验证，如果值不在您接受的范围内，则让函数抛出异常。

但是，如果您正在为一个类执行此操作并且预计还不知道抛出/捕获异常，您可以执行以下两项操作之一：

1.  让你的函数返回一个 int、bool 等。如果参数在范围内，那么你的函数会返回一些值来表明这一点。否则，该函数返回一些值，指示参数不在范围内。

像这样的东西：

```
bool setRadius(double radius)
{
    if(radius >= 0)
    {
        m_radius = radius;
        return true;
    }
    else return false;
} 
```

请注意，如果“radius”的参数不在您的范围内，您不会启动/更改存储在 m_radius 中的值。将 m_radius 的值更改为不可接受的值是没有意义的——这是浪费时间。

1.  在 main() 中检查它（“在对话框中”？）

如果您想了解更多有关异常的信息，可以参考此页面以更好地了解异常是什么：[http ://www.cplusplus.com/doc/tutorial/exceptions/](http://www.cplusplus.com/doc/tutorial/exceptions/)

因此，i++ 总结起来，约定是在方法中检查它，如果值超出可接受的范围，则让方法抛出异常。如果您在上课并且尚未涵盖异常，则可能不必这样做。祝你好运！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T09:31:35.200

我建议采用与此处其他方法不同的方法。我只是将价值存储在那里。相反，查看我的水晶球，当调用`Render(Image& target)`球体上的函数时，我将验证所有参数是否适合。也可能是一种混合方法，您可以在设置器中验证半径是非负浮点数，同时在渲染时验证球体是否在图像的边界内。

to 方法之间有一个根本的区别：

*   不允许半径有效地变为负数意味着非负半径是类不变量。将所有类不变量的验证放入一个实用函数中，通过 RAII 助手在所有（变异）成员函数的进入和退出时调用该函数对于调试来说是一件好事，因为它会立即捕获内部状态（可能更多复杂的不仅仅是一个标量）在某种程度上变得不一致。为了速度，我通常禁用这些对发布二进制文件的检查，因此即使进行大量检查，您也不会失去任何性能。
*   Allowing the radius to become negative but raising exceptions later turns this into a fault caused by the operation (e.g. rendering) that uses the value. In some cases, this makes the invalid input value indistinguishable from an out-of-memory during that operation, but it has the advantage that you only need to trap these errors in one place.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T05:14:14.547

在我看来，这太过分了面向对象。对于少于两三个变量，我不会创建一个具有 getter-setter 和私有数据的类——这没有意义。它需要很多不必要的代码。

您最好在 UI 前端进行数据验证（例如通过`DoDataExchange`）。

如果您必须设计一个类来保存数据并进行数据验证，请使用模板！

# java - 使用 AES 传输大文件

> ID：14421810
> 
> 赞同：0
> 
> 时间：2013-01-20T05:02:42.050
> 
> 标签：java, android, file, aes

我想在服务器和客户端之间传输一个大文件，我知道该怎么做：对于客户端，代码如下：

```
OutputStream output = sk.getOutputStream();     

    FileInputStream fileInputStream = new FileInputStream(file);
    byte[] buffer = new byte[1024*1024];
    int bytesRead = 0;

    while((bytesRead = fileInputStream.read(buffer))>0)
    {
        output.write(buffer,0,bytesRead);
    }

    fileInputStream.close(); 
```

对于服务器端：

```
InputStream input = sk.getInputStream();

    file = new File(filename);
    FileOutputStream out = new FileOutputStream(file);

    byte[] buffer = new byte[1024*1024];

    int bytesReceived = 0;

    while((bytesReceived = input.read(buffer))>0) {
        out.write(buffer,0,bytesReceived);
        System.out.println(bytesReceived);
        break;
    } 
```

现在的问题是，服务器和客户端同意一个 128 位的 AES 密钥，所以我想充分利用会话密钥来保证文件传输过程的安全。我的问题是，我在哪里可以在我的客户端和服务器中插入 AES 加密过程？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:15:23.780

我认为您可以使用 javax.crypto.CipherInputStream / javax.crypto.CipherOutputStream。使用示例[http://www.flexiprovider.de/examples/ExampleCrypt.html](http://www.flexiprovider.de/examples/ExampleCrypt.html)

# c# - OleDbException 未处理：没有为一个或多个参数指定值

> ID：14421811
> 
> 赞同：0
> 
> 时间：2013-01-20T05:02:56.637
> 
> 标签：c#

以前尝试只使用用户名和密码创建登录页面。但是，由于我的用户表有 3 个角色，我想创建一个登录页面，根据用户的角色授予用户登录权限。

例如：管理员到管理页面，员工到员工页面等。

在尝试实现此功能时，在我的一行中遇到以下错误：未处理 OleDbException，没有为一个或多个参数提供值。

这是我的登录代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace AcuSapp
{
    public partial class Login : Form
    {
        OleDbConnection LoginLink = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\SB18\\Documents\\Visual Studio 2010\\Projects\\AcuSapp\\AcuSapp\\bin\\debug\\AcuzioSecureStore DatabaseX.accdb");
        public Login()
        {
            InitializeComponent();
            //textBox_username.Text = "LittleJohn";
            //textBox_password.Text = "HelloJohn";
        }

        private void button_login_Click(object sender, EventArgs e)
        {
             string username = textBox_username.Text;
            string password = textBox_password.Text;
            string role_name = comboBox_role.Text;

            //this is to give notification if username and password is lesser than 4 characters
            // .length will count the characters in the string
            // This is to reduce redundant calls. Less calls = less taxing on the db
            if ((username.Length < 4) || (password.Length < 4))
            {
                MessageBox.Show("Wrong Credentials!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else
            {
                // Set authentication as false. By default, user is not authenticated yet.
                bool isAuthenticated = false;
                //Opens the connection to db
                LoginLink.Open();
                // Sets the SQL command to be executed
                // Since it is a variable command, it becomes a new SQL command to be executed in Microsoft access
                // + is to join the string together
                //Does string comparing to see if username and password match exactly, case sensitive.

                //var cmd = new OleDbCommand("SELECT COUNT(*) FROM [User] WHERE username = '" + username + "' AND password = '" + password + "' ", LoginLink);
                var cmd = new OleDbCommand("SELECT COUNT(*) FROM [User] WHERE STRCOMP(username, '" + username + "', 0) = 0 AND STRCOMP(password, '" + password + "', 0) = 0 AND STRCOMP(role_name, '" + role_name + "', 0) = 0", LoginLink);
                // (int)cmd.ExecuteScalar only reads the first few rows from the db
                isAuthenticated = (int)cmd.ExecuteScalar() == 1; //Error on this line.
                //Closes connection to db
                LoginLink.Close();
                // if isAuthenticated is true
                if (isAuthenticated)
                {
                    // This will open the next page which is form1
                    Client hello = new Client(this);
                    hello.Show();
                    // Hides the login form
                    this.Hide();
                }
                else
                {
                    //Always remember to put the last statement in curly braces
                    //otherwise it wont show the previous error will show this messsage instead
                    MessageBox.Show("Wrong Credentials!");
                }
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:21:07.337

您的连接字符串看起来有点不对劲。您定义了两个数据源，其中一个被分配了一个不是有效数据源的提供程序：

```
"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\SB18\\Documents\\Visual Studio 2010\\Projects\\AcuSapp\\AcuSapp\\bin\\debug\\AcuzioSecureStore DatabaseX.accdb" 
```

您应该删除该部分：

```
Data Source=Provider=Microsoft.ACE.OLEDB.12.0; 
```

试试下面的连接字符串可能会有所帮助。

```
 OleDbConnection LoginLink = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\SB18\\Documents\\Visual Studio 2010\\Projects\\AcuSapp\\AcuSapp\\bin\\debug\\AcuzioSecureStore DatabaseX.accdb"); 
```

# php - 基于键值在 PHP 中解析数组

> ID：14421817
> 
> 赞同：0
> 
> 时间：2013-01-20T05:03:43.083
> 
> 标签：php, sql, arrays, json, parsing

基本的 php 问题在这里。以下 SQL 代码返回一个数组，其中包含一个名为“日期”的键。我要做的就是根据键名解析“日期”值。有什么帮助吗？

```
$result = mysql_query("SELECT * FROM `table` WHERE columnName ='value'") or die(mysql_error());
 $data = array();
while ( $row = mysql_fetch_assoc($result) )
{
  $data[] = $row;
}
echo $data->{'date'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:07:03.840

好的，你去

与 Foreach

```
foreach($data as $key => $value)
{
   if($key == 'date')
   {
      // do you parsing stuff
   }
} 
```

没有 foreach

```
$parsing_date = $data['date']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:08:06.397

您在无法执行的数组上使用对象语法。

```
 echo $data['date'], 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T05:08:40.907

```
foreach($data as $key => $value)
{
    if ($key == 'date')
    {
        echo "Date Value: '".$value."'";
        // Do your stuffs...
        echo "Date Final Value: '".$value."'";
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T05:10:26.827

mysql_fetch_assoc 返回一个 ASSOCiative 数组。这意味着它返回一个以您的表名字段作为键的数组。例如，如果您的表格有 3 列“日期”、“名称”和“颜色”

然后，您将通过以下方式访问这些字段。

```
$result = mysql_query("SELECT * FROM `table` WHERE columnName ='value'") or die(mysql_error());
 $data = array();

while ( $row = mysql_fetch_assoc($result) )
{
  echo $row['date']; //Prints the rows date field
  echo $row['name']; //Prints the row name field and so on.
} 
```

# ruby-on-rails - 无法从 seed.rb 文件加载夹具

> ID：14421821
> 
> 赞同：1
> 
> 时间：2013-01-20T05:04:16.000
> 
> 标签：ruby-on-rails, fixtures

我正在关注 Railscast#179 关于如何使用种子数据进行操作

我完全按照剧集中所说的做了，一切对我来说都很好。

现在，我正在尝试将 fixtures 目录更改为`spec/fixtures`而不是自动生成`test/fixtures`

现在，当我尝试通过调用从固定装置创建种子数据时

```
ActiveRecord::Fixtures.create_fixtures("#{Rails.root}/spec/fixtures", "langauges") 
```

我收到以下错误

```
No such file or directory - /home/username/Aptana_Workspace/i18n_demo/spec/fixtures/langauges.yml 
```

我是否需要更改任何配置以让 ActiveRecord 知道我的新灯具目录？create_fixtures 方法中指定的路径还不够吗？

# ruby-on-rails - Rails 3 应用程序中的 Access-Control-Allow-Origin 不允许来源 http://localhost:3000

> ID：14421826
> 
> 赞同：1
> 
> 时间：2013-01-20T05:05:01.507
> 
> 标签：ruby-on-rails, xmlhttprequest, cross-domain, cors

我无法通过以下错误从 XHR 获取 GET

```
XMLHttpRequest cannot load http://blog.rrikesh.com/demo/assets/img/img1.jpg. Origin       
http://localhost:3000 is not allowed by Access-Control-Allow-Origin. 
```

所以，我允许这样的跨域访问：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :allow_cross_domain_access
  def allow_cross_domain_access
      response.headers["Access-Control-Allow-Origin"] = "*"
      response.headers["Access-Control-Allow-Methods"] = "GET, PUT, POST, DELETE"
  end
end 
```

但是，它会发生同样的错误。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T12:09:31.297

以下 PHP 代码适用于我。请注意 if (...) 非常重要，如果您为所有请求返回相同的 CORES 标头，那么（至少）chrome 将取消请求（至少对于 localhost 服务器）

```
<?php
if (isset($_SERVER['HTTP_ORIGIN'])) {
    //header("Access-Control-Allow-Origin: {$_SERVER['HTTP_ORIGIN']}");
    header("Access-Control-Allow-Origin: *");
    header('Access-Control-Allow-Credentials: true');    
    header("Access-Control-Allow-Methods: GET, POST, OPTIONS"); 
}   
if ($_SERVER['REQUEST_METHOD'] == 'OPTIONS') {
    if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_METHOD']))
        header("Access-Control-Allow-Methods: GET, POST, OPTIONS");         
    if (isset($_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']))
        header("Access-Control-Allow-Headers: {$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}");

    exit(0);
} 
```

?>

# sql - 以下代码有什么问题？

> ID：14421829
> 
> 赞同：2
> 
> 时间：2013-01-20T05:05:18.610
> 
> 标签：sql, syntax

```
insert into ageData (PatientID, Age) 
select PatientID from AEDepartment, 
select DATEDIFF(hour,DOB,GETDATE())/8766 from AEDepartment; 
```

错误信息：

```
Incorrect syntax near the keyword select 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T05:06:28.827

你应该只有一个`SELECT`陈述。

```
INSERT INTO ageData (PatientID, Age) 
SELECT PatientID, DATEDIFF(hour,DOB,GETDATE())/8766 
FROM   AEDepartment 
```

# c++ - 按降序对这些元素进行排序？

> ID：14421830
> 
> 赞同：1
> 
> 时间：2013-01-20T05:05:29.780
> 
> 标签：c++, pointers, qsort

尝试使用 qsort，它对我来说运行完美。我在整个程序中使用函数指针和一些我不习惯的其他特性（例如 void 指针）。

但是，我希望元素按降序排列（即与升序相反）。我能做些什么来实现这一目标？

这是代码：

```
#include <iostream>
#include <cstdlib>  // Required for qsort
#include <cstring>
using std::cout;
using std::endl;

int compare_strs( const void *arg1, const void *arg2 );
int compare_ints( const void* arg1, const void* arg2 );

int main()
{
    char * shrooms[10] = 
    {
        "Matsutake", "Lobster", "Oyster", "King Boletus",
        "Shaggy Mane", "Morel", "Chanterelle", "Calf Brain",
        "Pig's Ear", "Chicken of the Woods"
    };

    int nums[10] = {99, 43, 23, 100, 66, 12, 0, 125, 76, 2};

    // The address of the array, number of elements
    // the size of each element, the function pointer to 
    // compare two of the elements
    qsort( (void *)shrooms, 10, sizeof( char * ), compare_strs ); 
    qsort( (void *)nums, 10, sizeof( int * ), compare_ints ); 

    // Output sorted lists
    for ( int i = 0; i < 10; ++i )
        cout << shrooms[i] << endl;

    for ( int i = 0; i < 10; ++i )
        cout << nums[i] << endl;

    return 0;
}

int compare_ints( const void * arg1, const void * arg2 )
{
    int return_value = 0;

    if ( *(int *)arg1 < *(int *)arg2 )
        return_value = -1;
    else if ( *(int *)arg1 > *(int *)arg2 )
        return_value = 1;

    return return_value;
}

int compare_strs( const void * arg1, const void * arg2 )
{
    return ( _stricmp( *(char **) arg1, *(char **) arg2 ) );
} 
```

该程序按升序输出（即从小牛脑开始），但我试图让它以 Shaggy Mane 开始（即降序）。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T05:20:55.450

[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)与[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)和一起使用[`std::greater`](http://en.cppreference.com/w/cpp/utility/functional/greater)：

```
std::string shrooms[10] = 
{
    "Matsutake", "Lobster", "Oyster", "King Boletus",
    "Shaggy Mane", "Morel", "Chanterelle", "Calf Brain",
    "Pig's Ear", "Chicken of the Woods"
};

std::sort(shrooms, shrooms+10, std::greater<std::string>); 
```

如果您不想`std::sort`简单地使用反转比较函数的结果或反转您的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T05:10:44.357

更好地使用[std::sort](http://www.cplusplus.com/reference/algorithm/sort/)。没有必要玩复杂`qsort`的。此外，您应该`std::string`用于存储字符串，并`std::vector`存储它们！

编辑： *有人发布了一条评论说 std::sort 不会神奇地反转排序逻辑，所以这是我的回复：*

那么为何不？`std::sort`算法也需要一个比较器！返回负布尔值，你就完成了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T05:10:21.563

反转比较器功能的逻辑。

```
inline int rcompare_strs( const void *arg1, const void *arg2 )
{
    return -1*compare_strs(arg1, arg2);
}

inline int rcompare_ints( const void* arg1, const void* arg2 )
{
    return -1*compare_ints(arg1, arg2);
}

qsort( (void *)shrooms, 10, sizeof( shrooms[0] ), rcompare_strs ); 
qsort( (void *)nums, 10, sizeof( nums[0] ), rcompare_ints ); 
```

# php - Android：无法通过 php 从 mysql 获取用于 select 语句的数据

> ID：14421833
> 
> 赞同：0
> 
> 时间：2013-01-20T05:05:44.720
> 
> 标签：php, android, mysql

我在从 mysql 检索数据时遇到问题。我的程序中有两种选择语句。

一种是**“Select * From abcTable;”** 另一个是**“Select * From abcTable WHERE attribute = 'abc';”**

该程序适用于第一个，但第二个有错误。

在调用 mysql 之前，我输出了查询结构，它在 phpMyAdmin 中工作。转到 php 脚本后..查询回显完全不同。这是代码

我以这种格式构造查询并传递给 query_string

```
String query = "SELECT * FROM abcTable WHERE attribute = \'" + attributeVariable + \';" 
```

调用mysql函数（这里的query_string没有问题，即**“Select * From abcTable WHERE attribute = 'abc';”**）

```
//Call PHP Server to execute query
public static String executeQuery(String query_string) {
    String result = "";

    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://10.0.2.2/getdata2.php");
        ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("query_string", query_string));
        System.out.println("GO TO?????" + query_string);
        System.out.println("GO TO PARAM???" + params);
        httpPost.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        //view_account.setText(httpResponse.getStatusLine().toString());
        HttpEntity httpEntity = httpResponse.getEntity();
        InputStream inputStream = httpEntity.getContent();

        BufferedReader bufReader = new BufferedReader(new   InputStreamReader(inputStream, "utf-8"), 8);
        StringBuilder builder = new StringBuilder();
        String line = null;
        while((line = bufReader.readLine()) != null) {
            builder.append(line + "\n");
        }
        inputStream.close();
        result = builder.toString();
    } catch(Exception e) {
         Log.e("log_tag", e.toString());
    }

    return result;
} 
```

php 脚本（$query 变为**“Select * From abcTable WHERE attribute = \'abc\';”**）

```
<?php
/* Change database details according to your database */
$dbConnection = mysqli_connect('localhost', 'name', 'pw', 'dbname');
$query  = $_POST['query_string'];
$result = mysqli_query($dbConnection, $query);
if (mysqli_num_rows($result) > 0) {
    while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC)) {
        $output[] = $row;
    }
print(json_encode($output));

} else {
   print($query);
}
?> 
```

并且错误显示

```
01-20 05:01:48.687: I/System.out(359): <b>Warning</b>:  mysqli_num_rows() expects parameter 1 to be mysqli_result, boolean given in <b>C:\AppServ\www\getdata2.php</b> on line <b>6</b><br /> 
```

非常感谢您的帮助！！！！

# javascript - 不同的按钮，但 blockUI 上的相同 ajax 调用

> ID：14421836
> 
> 赞同：0
> 
> 时间：2013-01-20T05:06:05.483
> 
> 标签：javascript, jquery, blockui

我有一个blockUI，我在其中通过一系列具有相同类但不同属性值（标签）的按钮调用另一个页面。但是，当我运行代码时，无论我单击什么按钮，都只会提交第一个按钮的值。我如何修改它以分别发送与不同按钮关联的数据？请帮忙

```
$('#submit').click(function() {
var action = $("#form1").attr('action');
var form_data = {
message: $("#message").val(),
data: $(".pageDemo1").attr("tab"),
is_ajax: 1
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:15:04.170

这是因为`$(".pageDemo1").attr("tab")`引用了所有按钮，并且当您为此设置数据时，它使用的是它找到的第一个按钮的值。

我不确定您页面的结构，但是对您想要的按钮使用更具体的选择器（或一组选择器）将是确保您获得正确值的最佳方式。

如果有问题的按钮是在这种情况下被点击的元素，您可以使用`$(this).attr("tab")`. 如果不是，您将不得不从任何元素中遍历 DOM `$('#submit')`。

# javascript - 为什么我的表单在提交时没有验证？

> ID：14421838
> 
> 赞同：0
> 
> 时间：2013-01-20T05:06:23.063
> 
> 标签：javascript, forms, function, validation, onsubmit

我是 javascript 的新手，并且正在尝试获取它，以便当用户没有填写我表单上的所有字段时，他们会收到警报错误。

这是我表单的第一行，告诉它在提交时验证我的功能......

```
<form accept-charset="UTF-8" action="xxxx" class="infusion-form" method="POST" name="myform" onsubmit="return validateForm();"> 
```

这是我的javascript函数...

```
<script type="text/javascript">// <![CDATA[
function validateForm() {
    var a = document.forms["myform"]["inf_field_FirstName"].value;
    var b = document.forms["myform"]["inf_field_Email"].value;
    var c = document.forms["myform"]["inf_field_Phone1"].value;
    var d = document.forms["myform"]["inf_field_StreetAddress1"].value;
    var e = document.forms["myform"]["inf_field_City"].value;
    var f = document.forms["myform"]["inf_field_State"].value;
    var g = document.forms["myform"]["inf_field_PostalCode"].value;
    var h = document.forms["myform"]["inf_other_Username"].value;
    var i = document.forms["myform"]["inf_other_Password"].value;
    var j = document.forms["myform"]["inf_other_RetypePassword"].value;

    if (a == null || a == "" || a == "First Name Here") {
        alert("Please enter your First Name!");
        return false;
    }
    if (c == null || c == '' || c == "Enter Your Phone Here" || c.length < 9) {
        alert("Please insert your phone number!");
        return false;
    }
    if (d == null || d == '' || d == "Street Address") {
        alert("Please insert your street address ");
        return false;
    }
if (e == null || e == '' ||e == "City") {
        alert("Please insert your city");
        return false;
    }

    if (f == null || f == '' || f == "State") {
        alert("Please insert your state ");
        return false;
    }

if (g == null || g == '' ||g == "Postal Code") {
        alert("Please insert your postal code");
        return false;
    }
    if (h == null || h == '' || h == "Username") {
        alert("Please insert your username ");
        return false;
    }
if (i == null || i == '' ||i == "password") {
        alert("Please insert your password");
        return false;
    }
    if (j == null || j == '' || j == "password") {
        alert("Please re - type your password ! ");
        return false;
    }

    var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
    if (document.myform.inf_field_Email.value.search(emailRegEx) == -1) {
        alert("Please enter a valid email address.");
        return false;
    }
}
// ]]>
</script> 
```

我不确定我做错了什么？非常感谢您的帮助。如果您想检查元素，该页面也位于[http://business.uglyopportunities.com/affiliate-signup/](http://business.uglyopportunities.com/affiliate-signup/)（表单位于页面底部）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:11:17.927

您在表单之后在 javascript 中声明 validateForm。尝试将其移至表格之前。或者更好的是，在页面的头部。

了解如何使用 javascript 调试器。您会立即发现这一点（调用 validateForm 时会引发错误）。 [http://www.youtube.com/watch?v=54IgWgoFToc](http://www.youtube.com/watch?v=54IgWgoFToc)

# android - 在android中将多个说法显示为单独的Activity

> ID：14421841
> 
> 赞同：0
> 
> 时间：2013-01-20T05:06:57.463
> 
> 标签：android, android-layout

我对 Android 开发非常陌生，因此我正在寻求实现以下最佳方法的建议......

我想在应用程序中显示一些名言 - 一次一页，返回和下一步按钮导航到上一个和下一个谚语。就像下面...

![在此处输入图像描述](../Images/6b8d7b4651fb013cb282eac618a32bf0.png)

为了这...

1.  我是否必须为每个页面（著名的报价屏幕）`Activity`单独创建一个？`Layout`（如果有 20 个报价，那么我必须创建 20 个活动吗？）
2.  如果问题 1 是肯定的，那么我是否需要为每个页面设置专用的“返回”和“下一步”按钮？（有没有办法在全球范围内使用相同的后退和下一个按钮）？

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:09:21.863

不，您不需要单独的活动。只有一个人会做。让您的活动有一个 pageNumber 变量，创建时默认为 0。当他们回击或下一个时，增加它。然后在保存报价的 TextView 上调用 setText 并将其更改为新报价的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:10:43.833

使用`ViewPager`和`Fragment`s。这样您就不必创建单独`Activity`的 s 和`Layout`s。每个新屏幕都有单独的页面。您也不必为每个页面创建新按钮。

查看有关开始使用它的[文档](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

[本教程](http://wptrafficanalyzer.in/blog/implementing-horizontal-view-swiping-using-viewpager-and-fragmentpageradapter-in-android/)是一个很好的了解如何使用的教程`ViewPager`。它会逐步引导您使用它，并提供源代码，您可以下载并根据您的需要对其进行定制。这是使 s 与更少的代码保持一致的好方法，`Layout`这可能是您想要这样的东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T05:15:13.777

我会使用选项卡式布局并隐藏选项卡。这应该有助于如何隐藏选项卡。 [如何在 Android 选项卡布局中隐藏选项卡？](https://stackoverflow.com/questions/5026653/how-to-hide-a-tab-in-android-tab-layout)

# php - 在 MySQL 中，如何返回包含与我请求的“相似”数据的行？

> ID：14421846
> 
> 赞同：2
> 
> 时间：2013-01-20T05:07:41.117
> 
> 标签：php, jquery, mysql, search-engine

我正在开发一种搜索功能来搜索型号，并且我正在尝试让 MySQL 向我显示与我要求的结果相似的结果，但 LIKE %$var% 并没有这样做。

示例（我们将调用表“tbl_models”）：

```
 id           model
+-------+--------------------+
|   1   |    DV6233SE        |
|   2   |    Studio 1440     |
|   3   |    C762NR          |
+-------+--------------------+ 
```

使用我当前使用的搜索框进行搜索时：

```
SELECT id, model FROM tbl_models WHERE model LIKE %$var% ORDER BY id DESC 
```

如果我搜索“C7”，它会返回“C762NR”，这很好，但说我要搜索“C760”或“C700”或“C726NR”的拼写错误？MySQL（或 PHP、JS、jQuery）中是否有一种方法可以扩展返回结果的限制以包括不同的变体或紧密匹配？

我也不是在找人为我写它，只是朝着正确的方向推动会非常有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:28:40.560

如果我要为您的问题应用逻辑，我会这样做。

要找到接近的匹配项 -

我将采用用户最初输入的输入参数。例如'ABCDEF' 然后我将通过将输入参数中的每个字符替换为'_'来创建多个参数。

即“ABCDEF”将为我生成以下输入参数。

'_BCDEF'、'A_CDEF'、'AB_DEF'、'ABC_EF'、'ABCD_F'、'ABCDE_'

然后我会将输入参数传递给 SQL 查询并使用 OR 操作来查找数据。

上面的方法会给我相差 1 个字符的单词。

我可以通过用 UNDERSCORE 替换 2 个字符，然后是 3 个字符，然后是 4 个，依此类推来扩展这一点。

最多我必须替换多少个字符，应该取决于字符串的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:11:38.780

看看这个函数......这就是你要找的，我想： http: [//php.net/manual/en/function.levenshtein.php](http://php.net/manual/en/function.levenshtein.php)。这个函数可能是一个替代方案，但我建议你不要使用它，因为结果可能有点不可预测：[http](http://www.php.net/manual/en/function.similar-text.php) ://www.php.net/manual/en/function.similar-text.php 。

实现您要查找的内容的最佳方法是使用[自然语言全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T20:47:52.000

根据 SaurabhV 提供的答案（再次感谢！），我能够创建一个函数，该函数接受一个字符串并将每个字母依次替换为下划线。我希望这也可以帮助其他人！

```
function get_combination($string) {
    // Pa = Pass, Pos = Character Position, Len = String Length

    $str_arr = array($string);
    $Len = strlen($string);
    for ($Pa=0;$Pa<$Len;$Pa++) {
        for($Pos=1;($Pos+$Pa)<=$Len;$Pos++) {
            if($Pos+$Pa == $Len && $Pos<$Pa) {
                array_push($str_arr, substr_replace($string, str_repeat('_', $Pos), $Pa, 1));
            } else if($Pos+$Pa == $Len && $Pos>$Pa) {
                // End of String
            } else if($Pos == $Len || ($Len > 2 && $Pos == ($Len-1))) {
                // Do nothing - $Pos is too high
            } else if($Pos > $Len/2 && $Len > 6) {
                array_push($str_arr, substr_replace($string, str_repeat('_', $Pos-4), $Pa, $Pos-4));
            } else {
                array_push($str_arr, substr_replace($string, str_repeat('_', $Pos), $Pa, $Pos));
            }
        }
    }
    return $str_arr;
} 
```

例子：

```
$string = get_combination('dv6000'); 
```

回报：

```
Array ( [0] => dv6000 [1] => _v6000 [2] => __6000 [3] => ___000 [4] => ____00 [5] => d_6000 [6] => d__000 [7] => d___00 [8] => d____0 [9] => dv_000 [10] => dv__00 [11] => dv___0 [12] => dv6_00 [13] => dv6__0 [14] => dv6___ [15] => dv60_0 [16] => dv60__0 [17] => dv600_ ) 
```

现在，使用 MySQLi 和 foreach 循环，我可以针对数组搜索数据库，以获得与所要求的结果相似的结果。正如您在示例中看到的，“dv6000”是询问的字符串，但在 tbl_models（参见 OP）中没有 dv6000。一旦数据库达到索引 14 (dv6___)，它将找到正确的条目：

```
SELECT model_number FROM tbl_models WHERE model_number LIKE %string[14]% 
```

它很混乱，可能效率不高，但它确实有效。如果有人可以详细说明或帮助我整理此代码以使其更加简化，如果可能的话，我将不胜感激！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T05:17:08.697

您可以使用`PHP`上述功能，或者`SOUNDEX`可以帮助您。看看[这个](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)。

# java - 如何防止客户端访问基类的公共功能

> ID：14421848
> 
> 赞同：1
> 
> 时间：2013-01-20T05:07:43.310
> 
> 标签：java

```
//cls_a is defined by system framework, so we cannot change its definition
public class cls_a {
  public void method_a();
}

//I add a new cls_b implemenation and would like to 
//add a new method_a(int) function
//and prevent client side to access cls_a.method_a()
public class cls_b extends cls_a {
  public void method_a(int a) {
    //do something for a
    method_a();
  }
}

//client side
cls_b b = new cls_b();
b.method_a(2); //it's okay
b.method_a(); //should give something error when compiling code 
```

我想设计`cls_b`使Java编译器在客户端调用时会出错`b.method_a()`。任何人都知道如何在Java中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T05:20:17.953

我现在要做的是向 method_a() 添加一个 @Deprecated 注释（参见下面的示例），因此客户端会收到警告。由于警告很容易被忽略，有没有办法让编译器出错？

```
`public class cls_b extends cls_a {
  //add @Deprecated 
  @Deprecated @Override public void method_a() {
    super.method_a();
  }
  public void method_a(int a) {
    //do something for a
    method_a();
  }
}` 
```

* * *

 `## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T05:11:14.517

您不能这样做，因为您不能降低继承方法的可见性（例如，如果它是公共的，则不能将其设为私有）。

[为什么不能降低 Java 子类中方法的可见性？](https://stackoverflow.com/questions/1600667/why-cant-you-reduce-the-visibility-of-a-method-in-a-java-subclass)解释为什么会这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T05:12:23.497

将其公开后，它的范围就可以在整个项目中使用。没有办法让特定类隐藏公共函数

更新：我刚刚再次阅读了您的问题。我认为您希望其他开发人员在从 b 调用 method_a() 时会遇到异常。如果这是你想要的，那么你可以试试

```
package com.test;

public class ClassA {
    public static void main (String args[]) {
        ClassB b = new ClassB();
        b.print();
    }
}

class ClassC {
    public void print() {
        System.out.println("printA");
    }
}

class ClassB extends ClassC {

    public void print() {
        try {
            throw new Exception("This method is dead");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void print(int i) {
        System.out.println(i);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T05:17:11.880

您可以这样做：为客户公开一个包装类。

```
 public class cls_a_Wrapper {
      private cls_a a;

      cls_a_Wrapper(){
          a = new cls_a();
      }  

      //methods
      public void method_a_wrapper(){
           a.method_a();
      }
  }

 public class cls_b extends cls_a_Wrapper {
      public void method_a_wrapper(int a) {

           //delegate to wrapper class method if its allowed
           method_a_wrapper();
     }
  } 
```

所以现在你的客户应该使用 class **cls_a_Wrapper** class 而不是**cls_a**。

所以现在你可以控制是否要调用基类的公共方法。这是**适配器设计模式**。

**如果您不想调用公共方法：**

*   不要在包装类中提供方法。
*   **或**更改包装类中方法的可见性

**请记住**：对于客户端原始类不存在。客户端应将包装类视为基类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-20T05:47:02.233

您不能降低方法在子类中的可见性。

JDK 用 UnsupportedOperationException 解决了类似的问题，例如

```
java.util.Arrays.UnmodifiableCollection

    ...
            public boolean add(E e) {
                throw new UnsupportedOperationException();
            }
    ... 
```

java.util.Collection API 将此类方法标记为`optional operation`

```
boolean add(E e) Ensures that this collection contains the specified element (optional operation). 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T01:53:28.273

防止客户端访问基类的公共函数不是一个好的选择。即使您可以提供运行时异常或不推荐使用的方法，客户端也可以按`cls_a`类型调用您的方法。

```
cls_a a = new cls_b();
//...
a.method_a(); 
```

更好的方法是**提供**`method_a`. 对于您的代码，

```
public class cls_b extends cls_a {
  public void method_a() {
    this.method_a(0);
  }

  public void method_a(int a) {
    //do something for a
    super.method_a();
  }  
} 
````

# asp.net - 模型绑定 - 可空十进制和双精度默认为 0 而不是空？

> ID：14421852
> 
> 赞同：6
> 
> 时间：2013-01-20T05:08:41.350
> 
> 标签：asp.net, asp.net-mvc-3, model-binding

当我的表单发布到我的控制器操作并且表单绑定到我的模型时，可空双精度和小数的空白表单值默认为 0，但可空整数的空白表单值默认为空。这是正确的吗？

我的模型有几个可以为空的字段的可为空类型。它具有可为空的整数、双精度和小数。然后我有一个常规表单，其中每个属性都有文本框，它们都默认为空白（空字符串）。当这个表单用所有空表单值发回我的控制器操作，并且它绑定到我的模型时，空的双精度和小数显示为 0，而空的整数为空。

在我看来，当传入一个空的表单值时，所有可为空的类型都应该默认为 null，但即使不是这种情况，双精度数和小数的处理方式与整数的处理方式似乎非常不一致。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-16T13:28:19.677

这个问题似乎在 MVC4 中得到解决，因为我无法重现该问题。我的空文本框都绑定回`null`我的模型的可为空的 int、double 或 decimal。没有问题。所以问题可能出在其他地方，或者这可能是 MVC3 中的一个错误，现在不再存在。

也就是说，如果您仍然遇到问题并且无法使用 MVC4，请尝试制作您自己的自定义模型绑定器来完成您需要做的事情。这是十进制的示例：

```
public class NullableDecimalBinder : IModelBinder {

    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) {
        ValueProviderResult valueResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        ModelState modelState = new ModelState { Value = valueResult };
        object result = null;

        if (valueResult.AttemptedValue.Length > 0) {
            try {
                // Bonus points: This will bind using the user's current culture.
                result = Convert.ToDecimal(valueResult.AttemptedValue, System.Globalization.CultureInfo.CurrentCulture);
            } catch (FormatException e) {
                modelState.Errors.Add(e);
            } catch (InvalidOperationException e) {
                modelState.Errors.Add(e);
            }
        }

        bindingContext.ModelState.Add(bindingContext.ModelName, modelState);
        return result;
    }
} 
```

然后，要使用它，将此行添加到您的 Global.asax 中`Application_Start`：

```
ModelBinders.Binders.Add(typeof(decimal?), new NullableDecimalBinder()); 
```

# java - 在 JPanel 中居中 JLabels

> ID：14421855
> 
> 赞同：3
> 
> 时间：2013-01-20T05:09:10.807
> 
> 标签：java, swing, layout, layout-manager, gridbaglayout

我正在做一个记分程序，但我遇到了一个问题。我试图做的是在顶部有一个 JPanel，其中包含两个 JPanel，而 JPanel 又包含两个团队名称。我很困惑为什么程序顶部的两个 JLabel 没有在它们包含的 JPanel 内居中。

![在此处输入图像描述](../Images/4b48e6283b7cd096305aaeb6331241bd.png)

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class ScoreFrame extends JFrame {

    private static final Dimension SCREEN_SIZE = Toolkit.getDefaultToolkit().getScreenSize();
    private static final int WIDTH = SCREEN_SIZE.width;
    private static final int HEIGHT = SCREEN_SIZE.height;
    private final JTextField[] nameField = new JTextField[] { new JTextField(), new JTextField() };
    private final JLabel[] nameLabel = new JLabel[] { new JLabel("Team 1"), new JLabel("Team 2") };
    private final GridBagLayout gridBag = new GridBagLayout();
    private final GridBagConstraints constraints = new GridBagConstraints();
    private final JPanel topPanel = new JPanel();

    public ScoreFrame() {
    super();
    setResizable(false);
    setSize(SCREEN_SIZE);
    setLayout(gridBag);
    setUndecorated(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    addKeyListener(new EscapeListener());
    addComponents();
    }

    private void addComponents() {
    addToTopPanel();
    constraints.insets = new Insets(0, 0, (int) (HEIGHT * (double) 4 / 5), 0);
    gridBag.setConstraints(topPanel, constraints);

    add(topPanel);
    }

    private void addToTopPanel() {
    final JPanel[] teamPanel = new JPanel[] { new JPanel(), new JPanel() };
    topPanel.setLayout(gridBag);
    topPanel.setSize(new Dimension(WIDTH, HEIGHT / 5));

    Dimension teamPanelSize = new Dimension(WIDTH / 2, HEIGHT / 5);
    teamPanel[0].setSize(teamPanelSize);
    teamPanel[1].setSize(teamPanelSize);

    Font nameFont = new Font("Times New Roman", Font.PLAIN, 50);
    nameLabel[0].setFont(nameFont);
    nameLabel[1].setFont(nameFont);

    teamPanel[0].add(nameLabel[0]);
    teamPanel[1].add(nameLabel[1]);

    gridBag.setConstraints(teamPanel[0], constraints);

    constraints.gridx = 1;
    gridBag.setConstraints(teamPanel[1], constraints);

    topPanel.add(teamPanel[0]);
    topPanel.add(teamPanel[1]);
    }

    public void paint(Graphics g) {
    super.paint(g);
    int strokeSize = ((WIDTH + HEIGHT) / 2) / 300;
    if (strokeSize < 1) {
        strokeSize = 1;
    }

    final int fontSize = (int) (strokeSize * 12.5);

    Graphics2D g2d = (Graphics2D) g;
    g2d.setStroke(new BasicStroke(strokeSize));
    g.drawLine(WIDTH / 2, 0, WIDTH / 2, HEIGHT / 5);
    g.drawLine(WIDTH / 2, (int) (HEIGHT * (double) 105 / 400), WIDTH / 2, HEIGHT);
    g.drawLine(0, HEIGHT / 5, WIDTH, HEIGHT / 5);
    g.drawRect((int) (WIDTH * (double) 45 / 100), HEIGHT / 5, WIDTH / 10, (int) (HEIGHT * (double) 3 / 20));

    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    g.setFont(new Font("Times New Roman", Font.PLAIN, fontSize));
    g.drawString("Errors", (int) (WIDTH * (double) 101 / 220), HEIGHT / 4);
    }

    private JFrame getFrame() {
    return this;
    }

    public static void main(final String args[]) {
    new ScoreFrame().setVisible(true);
    }

    public class EscapeListener implements KeyListener {

    public void keyPressed(final KeyEvent event) {
        if (event.getKeyCode() == 27) {
        final int choice = JOptionPane.showConfirmDialog(getFrame(), "Do you want to exit the program?");

        if (choice == 0) {
            System.exit(0);
        }
        }
    }

    public void keyReleased(final KeyEvent event) {
    }

    public void keyTyped(final KeyEvent event) {
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T05:40:44.123

调用`pack()`是使用布局的关键步骤。此示例使用`JLabel.CENTER`和`GridLayout`使标签在调整框架大小时均等地居中。为简单起见，中心面板只是一个占位符。这个稍微复杂一些的[示例](http://robotchase.sourceforge.net/)使用类似的方法以及`java.text.MessageFormat`.

附录：*但是我将如何应用* `pack()` *到我的代码？*

只需`pack()`按照引用的示例中所示调用即可。我没有看到一种简单的方法来挽救您当前外部设置大小的方法。相反，覆盖您[`getPreferredSize()`](https://stackoverflow.com/q/7229226/230513)的`JPanel`主要内容。无论屏幕大小如何，您的实现都[`paintComponent()`](http://www.oracle.com/technetwork/java/painting-140037.html#callbacks)应该适应当前大小，[例如](https://stackoverflow.com/a/12024012/230513).

![图片](../Images/bd2f3ff9328c87060c875e5a7a8d1c1f.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

/** @see https://stackoverflow.com/a/14422016/230513 */
public class Scores {

    private final JLabel[] nameLabel = new JLabel[]{
        new JLabel("Team 1", JLabel.CENTER),
        new JLabel("Team 2", JLabel.CENTER)};

    private void display() {
        JFrame f = new JFrame("Scores");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel teamPanel = new JPanel(new GridLayout(1, 0));
        teamPanel.add(nameLabel[0]);
        teamPanel.add(nameLabel[1]);
        f.add(teamPanel, BorderLayout.NORTH);
        f.add(new JPanel() {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(320, 240);
            }
        }, BorderLayout.CENTER);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Scores().display();
            }
        });
    }
} 
```

# graphviz - graphviz - 在 3D 中生成 B 样条边缘时出错？

> ID：14421857
> 
> 赞同：1
> 
> 时间：2013-01-20T05:09:41.407
> 
> 标签：graphviz

以下简单图表包含两个节点和一个属性，请求 3D 布局：

```
graph  g {
graph [ dimen=3];
1--10
} 
```

运行neato 会生成这个布局：

```
graph g {
        graph [dimen=3];
        node [label="\N"];
        graph [bb="0,0,121.83,37.8"];
        1 [pos="27,18,-12.036", width="0.75", height="0.5"];
        10 [pos="94.833,19.8,12.036", width="0.75", height="0.5"];
        1 -- 10 [pos="54.199,18.722 58.622,18.839 63.204,18.961 67.627,19.078"];
} 
```

请注意，节点确实有 3 个坐标，但边缘规范中的控制点***只有两个***。

有什么我没有指定的还是 Graphviz 中的错误？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:01:51.583

这似乎是 > 2 的已知限制[：](http://www.graphviz.org/content/attrs#ddimen)`dimen`

> 请注意，目前，渲染的所有方面都是 2D 的。这包括节点的形状和大小、重叠去除和边缘路由。因此， **对于`dimen`> 2，唯一有效的信息是`pos`节点的属性**。所有其他坐标将是 2D 的，并且充其量将反映更高维点在平面上的投影。

# php - 设置 Ajax 以将表单结果发送到 php 文件以发送电子邮件

> ID：14421858
> 
> 赞同：0
> 
> 时间：2013-01-20T05:10:06.727
> 
> 标签：php, jquery, html, ajax, xmlhttprequest

[我目前在此站点](http://ilanshomekitchen.x10.mx/contact.html)上有一个联系表，我希望将其从 php 结果迁移到 ajax 结果。我使用了带有此代码的 mail.php 文件：

```
<?php
 $firstname = $_POST['firstName'];
 $lastname = $_POST['lastName']; 
 $email = $_POST['email'];
 $tel1 = $_POST['tel1'];
 $tel2 = $_POST['tel2'];
 $tel3 = $_POST['tel3'];
 $reason = $_POST['reason'];
 $message = $_POST['text'];
 $formcontent="From: $firstname $lastname \n Email address: $email \n Telephone Number: $tel1 $tel2 $tel3 \n Reason: $reason \n Message: $message";
 $recipient = "ilanbiala@ilanshomekitchen.x10.mx";
 $subject = "Contact Form";
 $mailheader = "From: $email \r\n";
 mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
 echo "<script>alert('Thank you!');</script>";
 ?> 
```

这个 php 文件发送了一封包含联系表单结果的电子邮件。但是，它还重新加载了页面并在空白页面上显示了一个警告框，这不是我想要的。我正在寻找使用 jquery ajax 函数来制作它，以便 ajax 将信息发送到我的 php 文件以发送邮件，除非我可以直接从 ajax 邮寄联系表格以获得结果。

联系表单是通过这个 ajax 函数提交的：

```
function submitForm(form) {
    var form = $("form").submit(function() {
        var formData = new FormData(form);
        console.log("formData");
        var XHR;
        if (window.XHMLHttpRequest){XHR = new XHMLHttpRequest();}
        else {XHR = new ActiveXObject("Microsoft.XMLHTTP");}
        XHR.open("POST","mail.php",true);
        console.log("XHR opened.");
        XHR.onreadystatechange = function(e) {
            if (this.readyState == 4 && this.status == 200) {
                XHR.send(formData);
                console.log("Sent formData.");
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:47:05.993

您可以使用[jQuery 的 .ajax](http://api.jquery.com/jQuery.ajax/)。

```
$.ajax({
        type: "POST",
        url: "mail.php",
        data: { firstname: nameVar, email: emailVar............ }
    }).done(function( msg ) {
        alert( msg );
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:02:08.130

在您链接表单的页面上，id 为`form`，因此我将在示例代码中使用它：

## JavaScript 代码

```
$(document).ready(function(){
    $('#form').submit(function(e){
        e.preventDefault();

        $.post($(this).attr('action'), $(this).serialize(), function(data) {
            // do whatever with the data returned
            console.log(data);
        });
    }, 'text');
}); 
```

这是一个非常简单的示例，`<form>`在 HTML 的标记中，您需要添加 action 属性（在您的情况下是`mail.php`）。

## PHP 代码

```
<?php

 $firstname = $_POST['firstName'];
 $lastname = $_POST['lastName']; 
 $email = $_POST['email'];
 $tel1 = $_POST['tel1'];
 $tel2 = $_POST['tel2'];
 $tel3 = $_POST['tel3'];
 $reason = $_POST['reason'];
 $message = $_POST['text'];
 $formcontent="From: $firstname $lastname \n Email address: $email \n Telephone Number: $tel1 $tel2 $tel3 \n Reason: $reason \n Message: $message";
 $recipient = "ilanbiala@ilanshomekitchen.x10.mx";
 $subject = "Contact Form";
 $mailheader = "From: $email \r\n";

 if(mail($recipient, $subject, $formcontent, $mailheader)) {
     echo 'Thank you!';
 } else {
     echo 'Error!';
 }

?> 
```

例如，您可以尝试使用 JSON 进行更高级的操作，但对于本示例，我将其保持得非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T06:04:00.760

正如已经提到的，您可以使用简单的 AJAX 调用来实现您想要的。然而，而不是

```
echo "<script>alert('Thank you!');</script>"; 
```

我建议这样的事情：

```
header('Content-type: application/json');
if(mail($recipient, $subject, $formcontent, $mailheader)) {
    echo "{'msg':'email has been sent'}";
} else {
    echo "{'error':'there was an error sending email'}";
} 
```

然后在 AJAX 调用中，您可以获取返回的 JSON 对象并在您的页面上显示成功/错误消息。

# php - 如何将 FirePHP 输出发送到文件而不是 Firebug 控制台？

> ID：14421859
> 
> 赞同：2
> 
> 时间：2013-01-20T05:10:11.080
> 
> 标签：php, firebug, firephp

如何将所有 FirePHP 输出发送到文件而不是 Firebug 控制台？

基本上，一旦部署了站点，我想“轻按开关”并将输出发送到日志文件而不是开发控制台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:38:39.077

FirePHP 不适合在生产站点上使用。日志仅发送到 Web 浏览器。如果不这样做，它可能会暴露最终用户不应该看到的信息。

您可以做的是创建一个继承 FirePHP 的类。将 FirePHP 的消息写入日志文件，然后将它们发送到 FirePHP。让您的日志记录类能够启用或禁用 FirePHP。在部署时，禁用 FirePHP 并将消息仅发送到日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:45:47.007

正如其他帖子在生产中保存内部构件所提到的那样，这不是一个好主意。使用[ConsoleExport](http://www.softwareishard.com/blog/consoleexport/)插件可以将“控制台”面板消息保存到 HTML 文件以进行调试。[“Net”面板存在NetExport](http://www.softwareishard.com/blog/netexport/)。也许这些可以重用于 FirePHP 插件？

# parsing - 不同分隔符的数据结构词法分析

> ID：14421863
> 
> 赞同：1
> 
> 时间：2013-01-20T05:10:34.620
> 
> 标签：parsing, data-structures, lexical-analysis

我正在制作一个词法分析器和一个解析器来将一种数据格式解析为另一种数据格式（部分作为练习），我有一个问题：

假设我们有 3 种不同的数据类型，这些数据类型由它们的分隔符标识：

1.  a|b #我们称这种类型为“段”

2.  a~b #我们称这种类型为“数组”

3.  a^b #我们称这种类型为“组件”

你也可以像这样混合它们：

```
hey~there|how~are~you 
```

这将对应于伪代码中的类似内容：

```
[["hey", "there"], ["how", "are", you"]] 
```

和

```
hey~there^you~guy|hi|hehe 
```

这将对应于：

```
[[["hey", "there"], ["you", "guy"]], "hi", "hehe"] 
```

现在我的问题是，在我的词法分析器中，我是否会提前查看我们正在处理的数据类型，以便我可以在发出所有字符串和分隔符之前先发出令牌类型？或者我是否让解析器尝试通过它获得的分隔符来找出它？

示例`hey~there^you~guy|hi|hehe`：

```
(segment)
(component)
(array)
(string "hey")
(array_delim "~")
(string "there")
(component_delim "^")
(component)
(array)
(string "you")
(array_delim "~")
(string "guy")
(segment_delim "|")
(string "hi")
(segment_delim "|")
(string "hehe") 
```

相对

```
(string "hey")
(array_delim "~")
(string "there")
(component_delim "^")
(string "you")
(array_delim "~")
(string "guy")
(segment_delim "|")
(string "hi")
(segment_delim "|")
(string "hehe") 
```

在第一种情况下，解析器会知道一个组件或数组即将到来，并提前制作正确的数据结构。在第二个示例中，它必须回溯它所做的事情，因为它稍后会弄清楚它是什么数据结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:31:10.457

我相信第二个示例确实是您想要使用的。从外观上看，您的语法具有以下优先级。

```
segments = 0
components = 1
array = 2 
```

考虑到这一点，您可以实现[Operator-precedence parser](http://en.wikipedia.org/wiki/Operator-precedence_parser)。它将像这样处理您的令牌：

```
shift (string "hey")
shift (array_delim "~")
shift (string "there")
reduce array1
shift array1
shift (component_delim "^") 
shift (string "you")
shift (array_delim "~")
shift  (string "guy")
reduce array2
reduce component1 
shift component1 
shift (segment_delim "|")
shift (string "hi")
reduce segment1 
shift segment1 
shift (segment_delim "|") 
shift (string "hehe")
reduce segment2
done 
```

这将导致像这样的解析树。

```
segment
    segment
        component
            array
                string(hey)
                string(there)
            array
                string(you)
                string(guy)
        string(hi)
    string(hehe) 
```

# php - 在完整的日历中，我想在不同视图的事件中显示不同的数据

> ID：14421868
> 
> 赞同：-1
> 
> 时间：2013-01-20T05:11:00.903
> 
> 标签：php, fullcalendar

就像在月份中我只想显示图像一样，在周视图和日视图中我想显示事件的完整描述。我已经完成了月视图，我有不同的数据，但不知道如何在该视图中调用事件数据。我尝试使用 viewDisplay 但不知道如何在这里调用我的事件。

```
events: function(start, end, callback) {

    var currentview = $('#calendar').fullCalendar('getView'); //alert('event called');

    if(currentview.name == 'month')
    {
        var events = <?php echo "[".$json."]"; ?> // this is where we call the php variable
    }
    else
    {
        var events = <?php  echo "[".$weekjson."]"; ?>
    }

    callback(events);
} 
```

这段代码很完美，但不是每次我的视图发生变化时都会调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:21:57.830

我得到了如何在不同的视图中再次调用事件的解决方案。

在 viewDisplay 中，我调用了 refetchEvents 函数，它用于调用事件。

视图显示：功能（视图）{

```
 refreshEvents(view);
 }, 
```

功能刷新事件（视图）{

$('#calendar').fullCalendar('refetchEvents');

}

# svn - 提交后如何自动更新svn

> ID：14421873
> 
> 赞同：1
> 
> 时间：2013-01-20T05:11:26.553
> 
> 标签：svn, subversive

我知道如何在本地工作副本上进行自动更新，但是如果工作副本位于不同的主机中怎么办？

有什么方法可以使用 SSH 进行自动更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T05:50:11.313

提交后钩子可以执行**任何**操作（也可以通过在会话中执行 ssh 到另一台主机`svn up`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:38:26.937

如果您使用的是 Windows，TortoiseSVN 支持此功能。

# android - setImageBitmap 在 Android 中不起作用

> ID：14421877
> 
> 赞同：2
> 
> 时间：2013-01-20T05:12:07.150
> 
> 标签：android, bitmap, imageview

我正在尝试创建一个像 ImageButton 这样的按钮。并面临一个令人头疼的问题。应用 setImageBitmap 后，ImageView 没有任何反应。位图本身包含图像（非空）。此外，我在程序的其他地方使用相同的函数（*ImageManager.getImage("menu", id)*），它必须包含 ListView 适配器中的位图，工作正常。

```
for( int i = 0; i < MenuArray.size(); i++)
        {
            View buttonView = MainActivity.getLayoutInflater().inflate(R.layout.top_button, MenuLayout, false);
            buttons[i] = (ImageView) buttonView.findViewById(R.id.imageForeground);
            ImageView imageBackground = (ImageView) buttonView.findViewById(R.id.imageBackground);
            imageBackground.setImageBitmap(ImageManager.getImage("menu", MenuArray.get(i).id));

            MenuLayout.addView(buttonView);
        } 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="40dp"
    android:layout_height="40dp"
    android:layout_margin="2dp" >
    <ImageView
        android:id="@+id/imageBackground"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/cart_item" />

    <ImageView
        android:id="@+id/imageForeground"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/button_selector" />
</RelativeLayout> 
```

# php - 使用ajax发布数据时出错？

> ID：14421883
> 
> 赞同：0
> 
> 时间：2013-01-20T05:14:12.630
> 
> 标签：php, ajax

当我使用带有结构的 ajax 发布数据时

![萤火虫](../Images/3f08a47e7f33c169af2b6905d6374cd0.png)

我从这里的代码中获取数据：

`$_POST["post"];`=> 结果是 979，没关系

`$_POST["href[href]"];`=> 结果为 0，如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T05:15:25.913

括号表示法用于创建数组条目。改用这个：

```
$_POST["href"]["href"]; 
```

* * *

调用`$_POST["href"]`将返回一个关联数组：

```
array(
    'commentID' => 297980913637729,
    'href' => 'http://dongcam.vn/t3927'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:16:26.587

这是一个多维数组，所以：

```
$_POST["href"]["href"]; 
```

# javascript - 重构 Rails 控制器/视图以调用 Javascript/jQuery

> ID：14421885
> 
> 赞同：0
> 
> 时间：2013-01-20T05:14:17.793
> 
> 标签：javascript, jquery, ruby-on-rails, refactoring

我目前正在尝试重构一些遗留代码。它目前是这样的：

### 控制器

```
def create
  # do stuff

  respond_to do |format|
    format.html { do stuff }
    format.js { render partial: 'stage_two', locals: { some instance variables } }
  end
end 
```

然后在`views/controller_name/_stage_two.js.erb`里面：

```
$('.some_element').children().fadeOut( function() {
  $('.some_element').children().remove();
  $('.some_element').html("<%=j render partial: 'form', locals: { stuff } %>");
  $('.some_element .stage_two').fadeIn();
}); 
```

所以基本上控制器动作本质上是渲染javascript。而那个特定的 javascript 只是从页面中删除一个元素，更改内容，然后将其淡入。有没有更好的方法来做到这一点？我知道通常 javascript 位于`app/assets/javascripts`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:22:47.060

您当前的实现已经非常干燥并且是标准方式。

html 请求也应该呈现相同的部分但具有布局。

js 请求应该渲染 js 响应（渲染部分）并更新页面的一部分。

> 我知道通常 javascript 位于 app/assets/javascripts 中。

这些是您的资产，这`stage_two.js.erb`不是您的资产文件，而是您对 js 响应的操作处理。

绝对对于较小的更新操作，您可以使用 json 请求并接收 json 响应来更新视图，但是对于许多失败的情况（尤其是处理大数据时），并且您当前的实现很好......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:16:19.657

通常，执行此操作的常用方法是让控制器返回 JSON（我会让它呈现变量的格式化版本），然后让 JS 执行正常的 AJAX 调用并使用 JSON 数据更新元素。

# mongodb - MongoDB手册参考

> ID：14421890
> 
> 赞同：3
> 
> 时间：2013-01-20T05:14:55.250
> 
> 标签：mongodb, reference, manual

在 MongoDB 中有一个很好的手册参考教程：

例子：

```
original_id = ObjectId()

db.places.插入（{
    "_id": original_id,
    "name": "百老汇中心",
    “网址”：“bc.example.net”
})

db.people.insert({
    “名称”：“艾琳”，
    "places_id": original_id,
    “网址”：“bc.example.net/Erin”
})

```

请注意，这两个文档是同时创建的。

问题。我需要用订单引用客户，因此客户在订单之前很久就创建了，我如何添加这个客户引用并插入订单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:59:56.103

你不需要先`findOne()`对你的客户做 a 并将它的 id 属性添加到你的新文档中吗？

# python - PySide Slot Decorator 是必需的吗？

> ID：14421897
> 
> 赞同：41
> 
> 时间：2013-01-20T05:15:49.453
> 
> 标签：python, pyqt, pyside, signals-slots

我已经看到了一些使用 @QtCore.Slot 装饰器的 PySide 插槽示例代码，而有些则没有。自己测试了一下，好像没什么区别。我有理由应该或不应该使用它吗？例如，在以下代码中：

```
import sys
from PySide import QtCore

# the next line seems to make no difference
@QtCore.Slot()
def a_slot(s):
    print s

class SomeClass(QtCore.QObject):
    happened = QtCore.Signal(str)
    def __init__(self):
        QtCore.QObject.__init__(self)
    def do_signal(self):
        self.happened.emit("Hi.")

sc = SomeClass()
sc.happened.connect(a_slot)
sc.do_signal() 
```

@QtCore.Slot 装饰器没有区别；我可以省略它，调用@QtCore.Slot(str)，甚至调用@QtCore.Slot(int)，它仍然很好地说，“嗨”。

PyQt 的 pyqtSlot 似乎也是如此。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-21T02:13:54.090

[此](http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html)链接解释了有关`pyqtSlot`装饰器的以下内容：

> 尽管 PyQt4 允许在连接信号时将任何 Python 可调用对象用作插槽，但有时需要将 Python 方法显式标记为 Qt 插槽并为其提供 C++ 签名。PyQt4 提供了 pyqtSlot() 函数装饰器来执行此操作。

和

> 将信号连接到修饰的 Python 方法还具有减少内存使用量的优势，并且速度稍快。

由于`pyqtSlot`装饰器可以采用额外的参数，例如`name`，它允许不同的 Python 方法处理信号的不同签名。

如果您不使用 slot 装饰器，则信号连接机制必须手动完成所有类型转换，以从底层 C++ 函数签名映射到 Python 函数。当使用插槽装饰器时，类型映射可以是显式的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-31T16:03:02.927

奥斯汀有一个很好的答案，我要写的答案有点超出你的问题范围，但这让我感到困惑，我想其他人最终会在这个页面上想同样的事情。

*如果您想将 Python 方法公开给 JavaScript（使用 QTWebKit）*，那么`@pyqtSlot`装饰器是必需的。未修饰的方法不会暴露给 JavaScript。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-15T17:47:01.403

在多线程环境中，可能强制不使用 pyside Slot 装饰器，因为它可能导致信号转到错误的线程。看

[派生类在 PySide (Qt/PyQt) 的错误线程中接收信号](https://stackoverflow.com/questions/34125065/derived-classes-receiving-signals-in-wrong-thread-in-pyside-qt-pyqt)

[https://bugreports.qt.io/browse/PYSIDE-249](https://bugreports.qt.io/browse/PYSIDE-249)

# c - 将 CUDA 静态或共享库与 gcc 链接的未定义引用错误

> ID：14421898
> 
> 赞同：8
> 
> 时间：2013-01-20T05:16:00.687
> 
> 标签：c, cuda, shared-libraries, undefined-reference, nvcc

## gcc 和 CUDA 问题

你好，

我已经编译了一个 CUDA 共享库，但无法将它与使用它的主程序链接。我正在用 gcc 编译主程序。

编码：

简单的main.c

```
 #include <stdio.h>
    #include <stdlib.h>

    void fcudadriver();

    int main()
    {
      printf("Main \n");
      fcudadriver();
      return 0;
    } 
```

测试.cu

```
 __global__ void fcuda()
    {
    }

    void fcudadriver()
    {
      fcuda<<<1,1>>>();
    } 
```

我将 test.cu 编译为 --> 它可以工作

```
 nvcc --compiler-options '-fPIC' -o libtest.so --shared test.cu 
```

我将 simplemain.c 编译为 ---> 它给出了错误:(

```
 gcc simplemain.c -L. -ltest
    /tmp/ccHnB4Vh.o:simplemain.c:function main: error: undefined reference to 'fcudadriver'
    collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:45:10.877

C 和 C++ 以不同的方式命名函数。

由于 nvcc 将 .cu 文件中的 CPU 代码视为 C++，因此您可以将其重命名`simplemain.c`为`simplemain.cpp`，并使用`g++`

另一种解决方案可能是`extern "C"`在 .cu 文件中的函数定义之前添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T05:51:06.387

尝试使用 g++ 而不是 gcc。nvcc 使用 c++ 风格的链接约定。（您不需要重命名任何文件。）

或者，如果您必须使用 gcc，请在`void fcudadriver()`函数定义前加上如下所示：

```
extern "C" void fcudadriver() 
```

# jquery - 使用ajax 从另一个页面提交表单？

> ID：14421902
> 
> 赞同：0
> 
> 时间：2013-01-20T05:17:04.937
> 
> 标签：jquery, ajax, forms

我在一个页面上有一个表单`action="/profile"`，我正在尝试制作一个 Ajax 代码以使其在不刷新页面且无需转到该页面的情况下更新。关于我如何做这件事或者我是否真的做对了或什么的任何想法？

```
$(function() {  
   $('.error').hide();  
     $("#submit").click(function() {  
// validate and process form here  
$('.error').hide();  
  var stat = $("#profile_field_13_5").val();  
    if (stat == "") {  
  $("#name_error").show();  
  $("#profile_field_13_5").focus();  
  return false;  
}  
var dataString = 'stat='+ stat ;
 $.ajax({  
          type: "POST",  
          url: "/profile.php",  
          data: dataString,  
          success: function() {  
     $('#statsucces').show();
         window.setTimeout("closeSuccess();", 10000);

         function closeSuccess(){
         document.getElementById("statsuccess").style.display=" none";
     }
      });  
  });  
 return false;  
  });
}); 
```

这是我试图用来进行状态更新的输入字段

`#profile_field_13_5`表单动作再次是`/profile.php`

感谢任何帮助我的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:57:00.360

如果您要提交表单，请这样做：

```
$("form").submit(function (e) {
    // validate and process form here  
    $('.error').hide();
    var stat = $("#profile_field_13_5").val();
    if (stat == "") {
        $("#name_error").show();
        $("#profile_field_13_5").focus();
        return false;
    }
    var dataString = 'stat=' + stat;
    $.ajax({
        type: "POST",
        url: "/profile.php",
        data: {data:dataString}, //<---pass it this way
        success: function (data) {
            alert(data); // <----this will show the passed value
            }
        });

e.preventDefault(); //return false; <--preventDefault() is as same as return false;
}); 
```

试试这个，看看这是否有帮助。

# javascript - 如何将函数的结果分配给全局变量？

> ID：14421907
> 
> 赞同：0
> 
> 时间：2013-01-20T05:17:12.720
> 
> 标签：javascript, variables, local

我不知道如何将此函数的结果分配给全局变量。我知道这是一件非常基本的事情，但有人可以帮忙吗？

```
var pixel_code = null

function captureValue(){
  pixel_code = document.getElementById("baseText").value;
 return pixel_code;
}

pixel_code = captureValue(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:20:14.530

您在函数内外重复使用 pixel_code，这不是一个很好的模式，但您显示的代码应该可以按预期工作。你看到什么错误？您未显示的代码周围有哪些代码？所有这些可能都嵌套在另一个函数中吗？（感谢@JosephSilver 的点头。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:20:58.977

如果页面重新加载，您的变量将被重置为其初始状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T05:48:43.120

请试试这个，

```
var pixel_code='';

function captureValue(){
  return document.getElementById("baseText").value;
}

function getValueBack()
{
    pixel_code = captureValue();
    //alert(pixel_code); /* <----- uncomment to test -----<< */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T06:14:22.057

感谢您分享您尝试的 jsfiddle。我看到了担忧。captureValue() 函数是异步运行的，因此`console.log()`在定义它之后不久还没有值。我已经剥离并刺激了 jsfiddle 并提出了这个工作示例：

```
<html>
    <head>
    </head>
    <body>
    <h1>Welcome to the AdRoll SandBox</h1>

    <textarea id="baseText" style="width:400px;height:200px"></textarea><br />

    <input type="button" value="test" id="text_box_button" onclick="captureValue()"/>
    <input type="button" value="get" id="text_box_button2" onclick="getValue()"/>
    <script>
var pixel_code = null;

function captureValue(){
    pixel_code = document.getElementById("baseText").value;
    return false;
}

function getValue() {
    alert(pixel_code);
    return false;
}
    </script>
    </body>
</html> 
```

我添加了第二个按钮。在文本框中键入，按“test”（设置值），然后按“get”以获取全局变量的值。

这是使用 jQuery 和闭包来避免全局变量的相同示例：

```
<html>
    <head>
    </head>
    <body>
    <h1>Welcome to the AdRoll SandBox</h1>

    <textarea id="baseText" style="width:400px;height:200px"></textarea><br />

    <input type="button" value="test" id="text_box_button" />
    <input type="button" value="get" id="text_box_button2" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
$(document).ready(function () {
    var pixel_code = null;

    $("#text_box_button").click(function (){
        pixel_code = document.getElementById("baseText").value;
        return false;
    });

    $("#text_box_button2").click(function () {
        alert(pixel_code);
        return false;
    });
});
    </script>
    </body>
</html> 
```

# java - 抽象类/方法实现

> ID：14421909
> 
> 赞同：0
> 
> 时间：2013-01-20T05:17:28.347
> 
> 标签：java, methods, abstract-class, abstract

我应该设计一个`BankAcct` 带有抽象方法的类`computeIntt()`。Save 和 Time 是 BankAcct 的一种。问题是我无法实现利息和新余额的显示

这是我当前的代码：

```
public abstract class BankAcct 
{
    private int accountNumber;
    private String accountName;
    private double bal;

    public BankAcct(int act, String name, double m)
    {
        accountNumber = act;
        accountName = name;
        bal = m;
    }

    public double getBalance()
    {
        return bal;
    }

    public String getAccountName()
    {
        return accountName;
    }

    public int getAccountNumber()
    {
        return accountNumber;
    }

    public void deposit(double m)
    {
            bal+=m;
    }

    public void withdraw(double m)
    {
        bal-=m;
    }

    public abstract double computeInt();
} 
```

* * *

```
public class Save extends BankAcct 
{
    public Save(int act, String name, double m)
    {
        super(act, name, m);
    }

    int act;
    String name="";
    double m;

    public double computeInt()
    {
        return m * 0.0025;
    }

} 
```

* * *

```
public class Time extends BankAcct 
{
    public Time(int act, String name, double m)
    {
        super(act, name, m);
    }

    int act;
    String name="";
    double m;

    public double computeInt()
    {
        return m * 0.033;
    }

} 
```

* * *

```
public class MainPr 
{
    public static void main(String[] args)
    {
        BankAcct sav = new Savings(1234, "ABC", 10000);
        BankAcct td = new TimeDeposit(9876, "DEF", 20000);

        // display the current balance

        System.out.println(sav.getAccountName() + " with account number " +
                    sav.getAccountNumber() + " has a balance of " +
                    sav.getBalance());

        System.out.println(td.getAccountName() + " with account number " +
            td.getAccountNumber() + " has a balance of " +
            td.getBalance());

        // deposit money

        sav.withdraw(5000.0);

        // display current value with its interest

        System.out.println("\n" + sav.getAccountName() + " with account number " +
            sav.getAccountNumber() + " earned an interest of " +
            sav.computeInt());

        System.out.println(sav.getAccountName() + " with account number " +
            sav.getAccountNumber() + " has a NEW BALANCE of " +
            sav.getBalance());

        td.deposit(2000.0);

        System.out.println("\n" + td.getAccountName() + " with account number " +
            td.getAccountNumber() + " earned an interest of " +
            td.computeInt());

        System.out.println(td.getAccountName() + " with account number " +
            td.getAccountNumber() + " has a NEW BALANCE of " +
            td.getBalance());
    }
} 
```

MainPr 将为以下数据实例化两个对象： Save 的帐号为 1234；ABC账户名；余额10,000。时间有账号9876；账户名 DEF；余额20,000。

这应该是输出：正确的一个

> 帐号为 1234 的 ABC 的余额为 10000.0
> 
> 帐号为 9876 的 DEF 的余额为 20000.0
> 
> 帐号为 1234 的 ABC 赚取利息 25.0
> 
> 帐号为 1234 的 ABC 的新余额为 5025.0
> 
> 帐号为 9876 的 DEF 赚取利息 660.0
> 
> 帐号为 9876 的 DEF 的新余额为 22660.0

但我的程序产生了不正确的输出：

> 帐号为 1234 的 ABC 的余额为 10000.0
> 
> 帐号为 9876 的 DEF 的余额为 20000.0
> 
> 帐号为 1234 的 ABC 赚取利息 0.0
> 
> 帐号为 1234 的 ABC 的新余额为 5000.0
> 
> 帐号为 9876 的 DEF 赚取利息 0.0
> 
> 帐号为 9876 的 DEF 的新余额为 22000.0

在这种情况下，Save 中的利率为 0.25%，而时间利率为 3.3%。余额取决于是存款还是取款。

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:27:57.707

您的实例变量`m`始终`0`（从不初始化）在您的子类中，但它们看起来像是`bal`在您的`BankAcct`类中设置的。这不适合您的`computerInterest`方法`TimeDeposit`：

```
public double computeInterest() {
    return getBalance() * 0.033;
} 
```

应该在其他子类中提供类似的修复，或者至少初始化您的`m`变量。在相关说明中，您的子类不需要定义`act`，或者`name`因为您的超类`BankAcct`已经定义并存储了它。

此外，您`computerInterest`并没有修改您的程序似乎期望的余额。如果是这样的话，这可能更合适：

```
public double computeInterest() {
    double interest = getBalance() * 0.033;
    deposit(interest);
    return interest;
} 
```

# c# - 在服务器上运行 Skype 机器人的问题

> ID：14421910
> 
> 赞同：0
> 
> 时间：2013-01-20T05:17:33.493
> 
> 标签：c#, windows-server-2003, skype4com

所以我有一个在 Server 2003 上运行的 skypebot。我安装了 skype，并且该 bot 只是一个 .Net 可执行文件。它工作得很好，除非我尝试在没有登录系统的情况下运行它。

它将运行一段时间，然后用户会话将结束或其他什么，Skype 将注销。

试图弄清楚我能做些什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:30:33.643

将您的 Bot 放入 Windows 服务中。在您的帐户下运行服务

# c - 如何使用 GNU Readline 库成功编译 C 程序？

> ID：14421914
> 
> 赞同：1
> 
> 时间：2013-01-20T05:18:55.593
> 
> 标签：c, debugging, linker, gnu, readline

我按照说明安装了 GNU Readline 以及 Curses，但是我遇到了一些我不确定如何解决的链接器问题。以下是我的程序：

主程序

```
#include <stdio.h>
#include <stdlib.h>
#include <curses.h>
#include <term.h>

#include <readline/readline.h>
#include <readline/history.h>

int main()
{
    char * line = readline ("Enter a line: ");
    free (line);
    return 0;   
} 
```

我使用编译：（`gcc -o main {,.c} -lreadline -lncurses`并且 readline 包含在它们应该在的位置，在 usr/includes...

跑步`main`给了我： `./main: symbol lookup error: /usr/local/lib/libreadline.so.6: undefined symbol: UP`

任何解决此问题的方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:34:23.750

```
sudo apt-get install libreadline6-dev
gcc -o main {,.c} -lreadline -lncurses 
```

# java - Java - 从函数（字符串）返回int？

> ID：14421923
> 
> 赞同：1
> 
> 时间：2013-01-20T05:21:08.427
> 
> 标签：java, string, int, return

我正在尝试创建一个将字符串作为函数并返回 int 的函数。

```
public int convert (String input) {
    int x = -1;
    if (input == "one") {
        x = 1;
    }

    else if (input == "two") {
        x = 2;
    }

    else if (input == "three") {
        x = 3;
    }
    return x;
} 
```

问题是，（假设输入总是三个输入之一），函数总是返回-1。我试过了：

*   返回 0 而不是 x
*   和：

    ```
    public int convert (String input) {

      if (input == "one") {
         return 1;
      } 
      else if (input == "two") {
         return 2;
      }
      else if (input == "three") {
         return 3;
      }
      return -1;
    } 
    ```

多谢你们。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T05:22:13.153

一个问题是：

```
if (input == "one") 
```

应该

```
if  ("one".equals(input)) 
```

字符串/对象相等性检查应该使用 equals() 方法而不是 == （字符串文字比较的情况除外）

`==`检查引用相等性。

`equals()`根据`equals()`实现检查对象内容是否相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:14:45.567

当您比较两个字符串是否相等时，切勿使用“==”运算符。因为“==”运算符检查地址是否相等，即如果您比较“x == y”，您正在检查x 的值和y 的值是否在同一个内存位置。这意味着 == 运算符比较引用。

由于 String 是一个对象，当您比较 2 个对象时，永远不要使用 == 运算符，因为它们比较 2 个引用是否指向同一个对象。

在您的情况下，输入指向一个对象，并且您正在将输入与位于不同位置的其他对象进行比较。

例如，您的字符串“input”在地址位置 123456 处包含值“one”，而您的新字符串“one”是在地址位置 12347 处创建的。因此 input == “one” 比较 input 的地址位置和一个不同的地址位置.

所以对于你的例子使用

```
public int convert (String input) {
int x = -1;
if (input.equals("one")) {
    x = 1;
}

else if (input.equals("two")) {
    x = 2;
}

else if (input.equals("three")) {
    x = 3;
}
return x;
} 
```

.equals 方法比较对象相等而不是引用相等。因此，如果您使用 .equals() 方法比较两个对象，您将获得所需的输出。

# python - Matplotlib animate 不更新刻度标签

> ID：14421924
> 
> 赞同：5
> 
> 时间：2013-01-20T05:21:33.343
> 
> 标签：python, animation, matplotlib, plot

我试图通过使动画在增加 x 值时运行来修改和示例。我想更新 x 轴刻度标签以根据 x 值进行更新。

我正在尝试使用 1.2 中的动画功能（特别是 FuncAnimation）。我可以设置 xlimit 但刻度标签没有更新。我也尝试过明确设置刻度标签，但这不起作用。

我看到了这个：[Animating matplotlib axes/ticks](https://stackoverflow.com/questions/6299943/animating-matplotlib-axes-ticks)，我试图调整animation.py中的bbox，但它没有用。我对 matplotlib 还很陌生，对解决这个问题的实际情况知之甚少，因此我将不胜感激。

谢谢

```
"""
Matplotlib Animation Example

author: Jake Vanderplas
email: vanderplas@astro.washington.edu
website: http://jakevdp.github.com
license: BSD
Please feel free to use and modify this, but keep the above information. Thanks!
"""

import numpy as np
from matplotlib import pyplot as plt
from matplotlib import animation

# First set up the figure, the axis, and the plot element we want to animate
fig = plt.figure()
ax = plt.axes(ylim=(-2, 2))
line, = ax.plot([], [], lw=2)

# initialization function: plot the background of each frame
def init():
    line.set_data([], [])
    return line,

# animation function.  This is called sequentially
def animate(i):
    x = np.linspace(i, i+2, 1000)
    y = np.sin(2 * np.pi * (x - 0.01 * i))
    line.set_data(x, y)
    ax.set_xlim(i, i+2)

    return line,

# call the animator.  blit=True means only re-draw the parts that have changed.
anim = animation.FuncAnimation(fig, animate, init_func=init,
                           frames=200, interval=20, blit=True)

plt.show() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T05:36:43.150

请参阅[Animating matplotlib axes/ticks](https://stackoverflow.com/questions/6299943/animating-matplotlib-axes-ticks)，[python matplotlib blit to axes or side of the figure？](https://stackoverflow.com/questions/14844223/python-matplotlib-blit-to-axes-or-sides-of-the-figure), 和[matplotlib 中的动画标题](https://stackoverflow.com/questions/17558096/animated-title-in-matplotlib)

简单的答案是删除`blit=True`

```
anim = animation.FuncAnimation(fig, animate, init_func=init,
                           frames=200, interval=20) 
```

如果您`blit = True`只有已更改的艺术家被重新绘制（而不是重新绘制所有艺术家），这会使渲染更有效。如果从更新函数（在本例中`animate`）返回艺术家，则将其标记为已更改。另一个细节是艺术家必须与代码的工作方式在坐标轴边界框中`animation.py`。有关如何处理此问题，请参阅顶部的链接之一。

# .htaccess - 重写规则没有正确重定向

> ID：14421932
> 
> 赞同：0
> 
> 时间：2013-01-20T05:22:27.130
> 
> 标签：.htaccess

我希望能够使用重写规则来重定向打开链接的任何人：

```
 domain.com/name 
```

至

```
 index.php?username=name 
```

最好的方法是什么？

我试图发布我编写的 htaccess 代码，但 stackoverflow 一直说它不符合标准，所以我删除了它。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:43:15.923

这样的事情会做到这一点：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([^/]+)/?  [NC]
RewriteRule .*  index.php?username=%1   [L,QSA] 
```

它将静默映射

`http://domain.com/name`

至

`http://domain.com/index.php?username=name`

为此，`/name`必须是传入 URL 路径中的第一个目录。

# android - Android 通知内容不会显示

> ID：14421933
> 
> 赞同：2
> 
> 时间：2013-01-20T05:22:45.090
> 
> 标签：android, android-notifications

我有 2 个远程视图

1.  对于通知内容
2.  对于通知自动收报机（我认为这行不通）

我没有包含 2 的代码。一旦我让内容正常工作，我会尝试 2。

下面的代码

```
 Intent intent = new Intent(this, HomeScreen.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);

    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.pickupnotification);
    RelativeLayout pickupNotificationLayout = (RelativeLayout)this.getLayoutInflater().inflate(R.layout.pickupnotification, null) ;
    TextView title = (TextView)pickupNotificationLayout.findViewById(R.id.title) ;
    TextView countDown = (TextView)pickupNotificationLayout.findViewById(R.id.countDown) ;
    TextView from = (TextView) pickupNotificationLayout.findViewById(R.id.from) ;
    TextView to = (TextView) pickupNotificationLayout.findViewById(R.id.to) ;
    contentView.apply(this, pickupNotificationLayout);

    title.setText("Siddharth" + "2km -> 20km");
    countDown.setText("-1:29") ;
    from.setText("FROM 2:00pm 14th Jan 2013, Some address") ;
    to.setText("TO 4:00pm 14th Jan 2013 Some address") ;        
    Notification noti = new NotificationCompat.Builder(this).setContent(contentView)
            .setSmallIcon(R.drawable.notification_logo)
            .setContentIntent(pIntent)
            .build();
    NotificationManager notificationManager = 
      (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    noti.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, noti); 
```

![通知向下滑动图片](../Images/6eb15e1a8cf35026d3167a9537a8554e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:32:28.517

你不应该多次夸大你所有的观点，我相信你认为文本被放置在哪里和框架认为文本被放置在哪里是不一样的。您填写内容的代码应该看起来更像这样，使用`RemoteViews`.

```
RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.pickupnotification);

contentView.setTextViewText(R.id.title, "Siddharth" + "2km -> 20km");
contentView.setTextViewText(R.id.countDown, "-1:29");
contentView.setTextViewText(R.id.from,
        "FROM 2:00pm 14th Jan 2013, Some Address");
contentView.setTextViewText(R.id.to,
        "TO4:00pm 14th Jan 2013 Some address");

Notification noti = new NotificationCompat.Builder(this)
        .setContent(contentView)
        .setSmallIcon(R.drawable.notification_logo)
        .setContentIntent(pIntent)
        .build(); 
```

显然，您也希望对股票代码视图执行类似的模式。

# ruby-on-rails - Rails 中的自定义字段作为未来条目的模板

> ID：14421936
> 
> 赞同：5
> 
> 时间：2013-01-20T05:23:02.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, custom-fields, rails-activerecord, datamodel

我正在寻找一些关于我目前在 Rails 中实施自定义字段的计划的反馈。一般来说，我是 Rails 和应用程序开发的新手，如果有经验的人提出任何意见，我将不胜感激。

**背景**

*该应用程序：*跟踪食品和饮料品尝。

我要建模的内容：

*   用户创建一个新的样本类型。

*   他们称之为：“酒”

*   他们为自己的公司做出决定，他们希望跟踪以下属性：原产地、葡萄类型、公司、海拔、保藏温度等。

*   *我的数据库对样本类型所做的唯一假设是它有一个名称。（例如咖啡、葡萄酒等）其余的都是用户指定的自定义字段。*

现在已经创建了一个示例类型。

*   用户开始创建样品类型酒的样品。

*   他们选择创建样品，选择葡萄酒类型。

*   他们必须填写的字段是他们之前指定的字段。

*   在原产地他们放：法国，在葡萄类型中：他们放霞多丽等。

--

我的方法如下：

当用户创建示例类型时，将自定义字段存储为数组或某种字符串格式，并将其保存在名为 data 的列下。

**样品类型**
*名称*
酒

*数据*
`[origin, grape_type, company, ...]`

当用户想要创建 Wine 类型的样本时：我查找样本类型 wine，对于数据列中的每个键，它都会创建表单字段。当用户提交数据时，我创建了所有自定义字段名称及其对应数据的哈希。我将其序列化并将其存储在数据列中的哈希中，如下所示：

**样品**
*类型*
葡萄酒

*数据*
`{ origin: "France", grape_type: "Pinot Grigio, ... }`

我目前的计划是使用 PostgreSQL 的 hstore 来实现数据列中的散列。

我的问题是：

1.  **对于我正在尝试做的事情，这是一个有效的解决方案吗？**

2.  **当用户更改他们想要的自定义字段时，我会遇到麻烦吗？**

3.  **我应该考虑其他任何问题吗？**

4.  **mongodb 和其他此类数据库是此类模型的更好选择吗？**

我一直在使用以下链接作为参考： [http](http://schneems.com/post/19298469372/you-got-nosql-in-my-postgres-using-hstore-in-rails) ://schneems.com/post/19298469372/you-got-nosql-in-my-postgres-using-hstore-in-rails http://blog.artlogic .com/2012/09/13/custom-fields-in-rails/

以及许多其他堆栈溢出帖子，但是似乎没有人以我上面提到的方式使用它。

任何意见表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:12:54.227

jtgi，我做这种事情的次数比我想记住的要多，我的第一反应是，“逃跑！” 以我的经验，整个用户定义的字段都是丑陋的、骇人的、噩梦。很快，有人会问，“我可以搜索葡萄吗？” 或“我希望能够为葡萄输入多个值。” 不断地，你会恨自己永远走上这条路。:-)

也就是说，我认为你的方法相当不错。直接回答您的问题：

1.  是的，这是一种有效的方法。

2.  是的，当用户更改他们想要的自定义字段时，您会遇到麻烦。（往上看）

3.  请参阅下面的一些注释。

4.  可能。我什至在阅读您的第四个问题之前就去了那里。使用您的字段 => 值哈希，无论如何您都在实现一个 noSQL 解决方案，但实现查找、搜索等并非易事。

一些想法：

*   我想我会将数据编组到 db 列中，而不是使用 db 函数。这样，它就是纯 Ruby 并且不依赖于 db 类型。请参阅[http://www.ruby-doc.org/core-1.9.3/Marshal.html](http://www.ruby-doc.org/core-1.9.3/Marshal.html)。我现在这样做是为了在应用程序中缓存一些数据，而且非常巧妙。如果您想最终存储比字符串更复杂的 Ruby 对象，您可能需要无论如何对数据进行编组（l）。

*   无论如何，你可能很快就会到达那里，所以我计划在你使用它时存储一些关于属性的“元数据”。例如，“grape”是一个字符串，最大长度为 20，“rating”是 0 到 100 之间的整数。这样你可以让你的表单更漂亮一些，并做一些基本的验证。

*   当你讨厌这个功能时，你可以记住我。:-)

# sed - 如何理解复杂替换的sed？

> ID：14421940
> 
> 赞同：2
> 
> 时间：2013-01-20T05:23:40.370
> 
> 标签：sed

例如：

```
 sed 's@/lib\(64\)\?\(32\)\?/ld@/tools&@g' abc.txt 
```

's@' , '(' , '\?' ,'&' 和 '@' 是什么意思？

如何找到一种合适且最简单的方法来学习 sed？

abc.txt：

```
 #define GNU_USER_LINK_EMULATION32 "elf32%{EB:b}%{EL:l}tsmip"
  #define GNU_USER_LINK_EMULATION64 "elf64%{EB:b}%{EL:l}tsmip"
  #define GNU_USER_LINK_EMULATIONN32 "elf32%{EB:b}%{EL:l}tsmipn32"

  #define GLIBC_DYNAMIC_LINKER32 "/lib/ld.so.1"
  #define GLIBC_DYNAMIC_LINKER64 "/lib64/ld.so.1"
  #define GLIBC_DYNAMIC_LINKERN32 "/lib32/ld.so.1"
  #define UCLIBC_DYNAMIC_LINKERN32 "/lib32/ld-uClibc.so.0"
  #define BIONIC_DYNAMIC_LINKERN32 "/system/bin/linker32"
  #define GNU_USER_DYNAMIC_LINKERN32 \
    CHOOSE_DYNAMIC_LINKER (GLIBC_DYNAMIC_LINKERN32, UCLIBC_DYNAMIC_LINKERN32, \
               BIONIC_DYNAMIC_LINKERN32) 
```

谢谢~

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T05:42:22.827

该手册是一个很好的起点[http://www.gnu.org/software/sed/manual/sed.html](http://www.gnu.org/software/sed/manual/sed.html)

分解该特定命令：

```
sed 's@/lib\(64\)\?\(32\)\?/ld@/tools&@g' abc.txt 
```

引号中的字符串`'s@/lib\(64\)\?\(32\)\?/ld@/tools&@g'`是 sed 运行的单参数命令，在这种情况下是 's'（'substitute'）命令[http://www.gnu.org/software/sed/manual/sed.html#The -_0022s_0022-命令](http://www.gnu.org/software/sed/manual/sed.html#The-_0022s_0022-Command)

那里使用的分隔符是@符号，所以正则表达式是`/lib\(64\)\?\(32\)\?/ld`，替换是`/tools&`。最后有一个“g”选项，它适用于每行中的所有匹配项，而不仅仅是第一个。

对于正则表达式，`\(`并`\)`定界捕获组，`\?`意味着“可选地匹配前一个原子（匹配零次或一次）”（前一个原子是该组）。其余字符按原样匹配，因此这意味着它将匹配`/lib/ld`、或。`/lib64/ld``/lib32/ld``/lib6432/ld`

在替换中，`&`包括整个匹配，因此它有效地为所有匹配添加前缀`/tools`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T05:38:47.537

在学习 sed 或 awk 之前，您需要先学习 REGEX。它们大多基于正则表达式。从这里开始[正则表达式](http://www.tcl.tk/man/tcl/tutorial/Tcl20.html)

然后你可以从这里开始 sed [http://www.grymoire.com/Unix/Sed.html](http://www.grymoire.com/Unix/Sed.html)

最好的方法是通过实践来学习。在学习了正则表达式之后，开始查看来自 SO 的 sed 问题，看看人们是如何回答的。首先尝试解决自己，然后查看给出的答案

# string - 在 Vim 中删除包含字符串的完整单词

> ID：14421942
> 
> 赞同：5
> 
> 时间：2013-01-20T05:24:34.260
> 
> 标签：string, vim, vi

如果它们包含特定的字符串，我正在尝试从一行中删除它们。下面是一个文本示例：

```
host-a, host-b, host-c+test, host-d, host-e+test 
```

我想删除任何包含`+test`, 结果为：

```
host-a, host-b, host-d 
```

同样，我需要逐行应用它，而不是文件中的所有行。它将在宏中使用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T05:28:31.687

像这样的东西，也许？

```
:%s/\<[-a-z]\++test\>//gc 
```

如果您想替换它，它将询问每场比赛。提示：`set hlsearch`将向您显示匹配项。

如果您还想删除逗号，则：

```
%s/\(,\s\+\)\?\S\++test\>//gc 
```

# java - 用于整数的 Java ArrayList

> ID：14421943
> 
> 赞同：23
> 
> 时间：2013-01-20T05:24:45.697
> 
> 标签：java, arrays

我想将值添加到 ArrayList 中以跟踪显示的数字。这些值是整数，所以我创建了一个 ArrayList；

```
ArrayList<Integer[]> list = new ArrayList<>();
int x = 5
list.add(x); 
```

但我无法使用此方法向 ArrayList 添加任何内容。如果我使用字符串作为数组列表，它会起作用。我是否必须将其设为字符串数组，然后以某种方式将数组转换为整数？

编辑：我还有一个问题。我希望该列表仅包含 3 个值。我该怎么做？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-20T05:25:39.210

名单`Integer`。

```
List<Integer> list = new ArrayList<>();
int x = 5;
list.add(x); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-20T05:26:27.873

您正在尝试将一个整数添加到一个整数`ArrayList`数组中`Integer[]`。它应该是

```
ArrayList<Integer> list = new ArrayList<>(); 
```

或更好

```
List<Integer> list = new ArrayList<>(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-20T05:45:46.500

您不是为整数创建数组列表，而是尝试为整数数组创建数组列表。

所以如果你想让你的代码正常工作，那就放吧。

```
List<Integer> list = new ArrayList<>();
int x = 5;
list.add(x); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T05:27:30.510

您不应该`Integer[]`在列表中使用数组，因为数组列表本身就是一种数组。离开`[]`它，它应该可以工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-02T14:37:38.340

其实你所做的也没有错，你的声明是对的。随着您的声明，JVM 将创建一个整数数组的 ArrayList，即，arraylist 中的每个条目对应一个整数数组，因此您的 add 函数应该传递一个整数数组作为参数。

例如：

```
list.add(new Integer[3]); 
```

这样，ArrayList 的第一个条目是一个整数数组，最多可以保存 3 个值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-28T07:28:19.867

这里有两个不同的概念在您的问题中合并在一起。

首先：将整数数组添加到列表中。代码如下。

```
List<Integer[]> list = new ArrayList<>();
Integer[] intArray1 = new Integer[] {2, 4};
Integer[] intArray2 = new Integer[] {2, 5};
Integer[] intArray3 = new Integer[] {3, 3};
Collections.addAll(list, intArray1, intArray2, intArray3); 
```

第二：在列表中添加整数值。

```
List<Integer> list = new ArrayList<>();
int x = 5
list.add(x); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-15T15:02:38.497

在`[]`制作整数的 ArrayList 时，这没有任何意义，因为我想您只想添加整数值。只需使用

```
List<Integer> list = new ArrayList<>(); 
```

创建 ArrayList 并且它将起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-05T20:21:53.767

如何创建*一组 Integers 的 ArrayList*？

下面的**方法**返回一组整数的 ArrayList。

```
public static ArrayList<Integer> createRandomList(int sizeParameter)
{
    // An ArrayList that method returns
    ArrayList<Integer> setIntegerList = new ArrayList<Integer>(sizeParameter);
    // Random Object helper
    Random randomHelper = new Random();

    for (int x = 0; x < sizeParameter; x++)
    {
        setIntegerList.add(randomHelper.nextInt());
    }   // End of the for loop

    return setIntegerList;
} 
```

# ruby-on-rails - 在 link_to 中结合原始 HTML 和 rails 变量

> ID：14421946
> 
> 赞同：0
> 
> 时间：2013-01-20T05:25:53.047
> 
> 标签：ruby-on-rails, ruby

我有一个看起来像这样的 link_to

```
<%= link_to site.name, site %> 
```

我想将引导程序中的字体图标添加到锚文本中，但是当我尝试使用`raw()`它时，我无法弄清楚包含`site.name`钩子的语法。

这就是我正在尝试的：

```
<%= link_to raw("<i class="icon-hdd"></i> site.name"), site %> 
```

那是行不通的。如何更改该行以使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T05:32:04.917

你试过do语法吗？

```
<%= link_to site do %>
  <i class="icon-hdd"> </i> <%= site.name%>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:29:24.257

您需要插入`site_name`到字符串中。

```
<%= link_to raw("<i class='icon-hdd'></i> #{site.name}"), site %> 
```

# c# - XNA：如何在游戏中更改纹理参考？

> ID：14421949
> 
> 赞同：0
> 
> 时间：2013-01-20T05:26:44.637
> 
> 标签：c#, xna

我目前正在 XNA 中制作游戏。到目前为止我进展顺利，但我不知道如何在运行游戏时更改精灵的纹理。这就是一个例子。当角色静止时，这是一个形象，然后当他走路时，这是一个不同的形象。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:33:42.103

运行检查并将实例设置为`Texture2D texture`预加载库中的其他纹理。

我通常将我的内容文件夹中的所有纹理加载到字典中并像这样使用：

```
var StringTextureDic = new Dictionary<string, Texture2D>();

// code that loads all textures into the dictionary, file names being keys

// whenever I need to assign some texture, I do this:
if (!playerIsMoving)
    Player.texture = StringTextureDic["player standing"];

if (playerIsMoving)
    Player.texture = StringTextureDic["player moving"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:43:54.617

好吧，实际上，在游戏中期改变玩家纹理是个坏主意。在这种情况下，我更喜欢使用纹理表。

```
Rectangle frame;
int curFrame;
int frameWidth;  
int frameHeight;
int runAnimationLength;

Update()
{
//Handle your "animation code"
if(playerIsMoving)
     curFrame++; //Running
     if(curFrame == runAnimationLength)
          curFrame =0;
else 
curFrame = 0; //Standing still
}
Draw(SpriteBatch spriteBatch)
{
frame = new Rectangle(curFrame*frameWidth,curFrame*frameHeight,frameWidth,frameHeight);
spriteBatch.Draw(
texture,
position,
**frame**, 
color, 
rotation, 
origin, 
SpriteEffects.None,
1);
} 
```

# c - 使用异步信号保证互斥锁安全

> ID：14421951
> 
> 赞同：6
> 
> 时间：2013-01-20T05:27:06.587
> 
> 标签：c, synchronization, signals, posix

首先，我知道互斥锁通常不被认为是异步安全的。这个问题涉及在`sigprocmask`具有异步信号和信号处理程序的多线程程序中使用使互斥锁安全。

我有一些概念上的代码，如下所示：

```
struct { int a, b; } gvars;

void sigfoo_handler(int signo, siginfo_t *info, void *context) {
    if(gvars.a == 42 || gvars.b == 13) {
        /* run a chained signal handler */
    }
}

/* called from normal code */
void update_gvars(int a, int b) {
    gvars.a = a;
    gvars.b = b;
} 
```

`gvars`是一个全局变量，它太大而无法放入单个`sig_atomic_t`. 它由普通代码更新并从信号处理程序中读取。受控代码是一个链接的信号处理程序，因此它必须在信号处理程序上下文中运行（它可以使用`info`or `context`）。`gvars`因此，必须通过某种同步机制来控制所有访问。更复杂的是，该程序是多线程的，任何线程都可能收到一个`SIGFOO`.

**问题：**通过组合`sigprocmask`(或`pthread_sigmask`) 和`pthread_mutex_t`，是否可以使用如下代码*保证同步？*

```
struct { int a, b; } gvars;
pthread_mutex_t gvars_mutex;

void sigfoo_handler(int signo, siginfo_t *info, void *context) {
    /* Assume SIGFOO's handler does not have NODEFER set, i.e. it is automatically blocked upon entry */
    pthread_mutex_lock(&gvars_mutex);
    int cond = gvars.a == 42 || gvars.b == 13;
    pthread_mutex_unlock(&gvars_mutex);

    if(cond) {
        /* run a chained signal handler */
    }
}

/* called from normal code */
void update_gvars(int a, int b) {
    sigset_t set, oset;
    sigemptyset(&set);
    sigaddset(&set, SIGFOO);
    pthread_sigmask(SIG_BLOCK, &set, &oset);
    pthread_mutex_lock(&gvars_mutex);
    gvars.a = a;
    gvars.b = b;
    pthread_mutex_unlock(&gvars_mutex);
    pthread_sigmask(SIG_SETMASK, &oset, NULL);
} 
```

逻辑如下： inside被阻塞`sigfoo_handler`，`SIGFOO`因此它不能中断`pthread_mutex_lock`。在-protected 关键区域期间`update_gvars`，`SIGFOO`不能在当前线程中引发within ，`pthread_sigmask`因此它也不能中断`pthread_mutex_lock`。假设没有*其他*信号（并且我们总是可以阻止任何其他可能有问题的信号），锁定/解锁应该始终在当前线程上以正常、不间断的方式进行，并且使用锁定/解锁应该确保其他线程不会不要干涉。我是对的，还是应该避免这种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-15T10:04:20.580

我发现这篇论文[https://www.cs.purdue.edu/homes/rego/cs543/threads/signals.pdf](https://www.cs.purdue.edu/homes/rego/cs543/threads/signals.pdf)讨论了在 sig 处理程序中安全地运行 AS-unsafe 代码

1.  屏蔽正常上下文代码的 AS 不安全块中的信号（被探索为效率较低）或
2.  使用全局 sig_atomic volatile 标志保护正常上下文代码的 AS 不安全块，该标志可防止在处理程序中输入 AS 不安全代码（如果设置为有效）

这种方法满足 POSIX 标准的一部分，即在 sig-handlers 中调用 AS-unsafe 函数仅在 sighandler 中断 AS-unsafe 函数时才被认为是不安全的 ( [http://pubs.opengroup.org/onlinepubs/9699919799/functions /V2_chap02.html#tag_15_04_03_03](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03_03)：向下滚动到函数列表后的第 1 段）

我认为你在这里玩弄的本质上是这个想法的一个更细粒度的版本，因为你不是试图阻止

```
pthread_mutex_lock(&gvars_mutex);
int cond = gvars.a == 42 || gvars.b == 13;
pthread_mutex_unlock(&gvars_mutex); 
```

从 sig-handler 运行，以免与*任何*AS 不安全代码发生冲突，而只是与处理此互斥锁和这些变量的相同/相似的 AS 不安全代码冲突。

不幸的是，POSIX 似乎只有一个纯代码的信号安全概念：一个函数要么是安全的，要么是不安全的，不管它的参数是什么。

但是，IMO，信号量/互斥量没有充分的理由对任何数据或操作系统句柄进行操作，除了它们传递的互斥量/信号量中包含的那些，所以我认为从信号处理程序调用`sem_wait(&sem)`/`pthread_mutex_lock(&mx);`应该是安全的，如果它得到保证永远不要与同一个互斥体的`sem_wait`/发生冲突`pthread_mutex_lock`，即使 POSIX 标准在技术上说它不应该是安全的（反论点比受欢迎的多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:44:14.463

您显然知道您在提到 sig_atomic_t 时进入了未定义的行为领域。话虽如此，我能看到这个确切的例子在现代类 Unix 系统上不起作用的唯一方法是，如果信号是用 SA_NODEFER 设置的。

互斥锁足以确保不同线程之间的正确同步（包括在另一个线程中运行的信号处理程序），并且 sigmask 将阻止该线程中的信号处理程序递归互斥锁。

话虽这么说，你在信号处理程序内部有锁的深水。一个信号处理程序可能足够安全，但如果您有两个信号处理程序使用不同的锁执行相同的技巧，您最终会出现锁排序死锁。这可以通过应用进程 sigmasks 而不是线程 sigmasks 在一定程度上得到缓解。例如，信号处理程序中的简单调试 fprintf 肯定会违反锁定顺序。

我会后退并重新设计我的应用程序，因为信号处理程序中的此类内容表明它变得太复杂且太容易破坏。触及一个 sig_atomic_t 的信号处理程序是 C 标准中唯一定义的东西，因为正确处理其他任何事情的复杂性都在爆炸式增长。

# android - Eclipse 上的 Android 模拟器不工作

> ID：14421958
> 
> 赞同：4
> 
> 时间：2013-01-20T05:28:20.447
> 
> 标签：android, eclipse, avd

我一直按照[http://developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com/training/basics/firstapp/running-app.html)上的说明在 Eclipse 的 AVD 上运行 Hello World 应用程序，但 AVD 没有启动，我得到了以下消息：

```
[2013-01-20 00:20:59 - MyFirstApp] ------------------------------
[2013-01-20 00:20:59 - MyFirstApp] Android Launch!
[2013-01-20 00:20:59 - MyFirstApp] adb is running normally.
[2013-01-20 00:20:59 - MyFirstApp] Performing com.example.myfirstapp.MainActivity      activity launch
[2013-01-20 00:21:00 - MyFirstApp] Automatic Target Mode: launching new emulator with     compatible AVD 'TestAVD'
[2013-01-20 00:21:00 - MyFirstApp] Launching a new emulator with Virtual Device    'TestAVD'
[2013-01-20 00:21:48 - Emulator] Failed to create Context 0x3005
[2013-01-20 00:21:48 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2013-01-20 00:21:48 - Emulator] Failed to allocate memory: 8
[2013-01-20 00:21:48 - Emulator] 
[2013-01-20 00:21:48 - Emulator] This application has requested the Runtime to terminate it in an unusual way.
[2013-01-20 00:21:48 - Emulator] Please contact the application's support team for more information. 
```

此外，弹出一个错误窗口，提示 ARM 仿真器 exe 已停止工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:39:14.710

[该](https://stackoverflow.com/questions/11902685/emulator-not-running)线程的 OP有类似的错误消息，

> 模拟器：警告：无法使用软件渲染器初始化 OpenglES 模拟

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:04:42.427

检查两件事：

*   您正在使用 512MB 的 RAM（模拟器无法正常工作）
*   尝试关闭“主机 GPU”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T06:27:10.793

尝试使用选项从命令行运行模拟器，`GPU`并确保它是否正常工作。

```
-gpu off 
```

即使导致错误，请转到 Eclipse，右键单击项目并选择将我的项目作为“Android 应用程序”运行。模拟器应该启动。

您还可以尝试`GPU emulation`从 AVD 管理器中启用/禁用所选模拟器的选项。

要启用/禁用`GPU emulation`：

> 转到 AVD 管理器 -> 选择 android 虚拟设备 -> 单击编辑 -> 硬件选项卡 -> 启用/禁用 GPU 仿真。

希望它会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T18:28:51.633

尝试以比我的显示器设置更高的分辨率运行模拟器时出现此错误。

# asp.net-mvc - ASP.NET MVC3 AntiForgeryToken

> ID：14421962
> 
> 赞同：12
> 
> 时间：2013-01-20T05:29:02.187
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, csrf

在这里，我有两个表单帖子的简单 MVC3 应用程序。为了保护 CSRF 攻击，我按照[此处的指导](http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/)以两种形式使用了 antiforgerytoken html 助手。

这是我的两个模型：

```
public class User
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class Employee
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

这是我的 homeController.cs：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Index(User user)
    {
        if (ModelState.IsValid)
            return RedirectToAction("About");

        return View();
    }

    public ActionResult About()
    {
        return View();
    }

    [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult About(Employee employee)
    {
        if (ModelState.IsValid)
            return RedirectToAction("PageA");

        return View();
    }
} 
```

这是我的 Inex.cshtml：

```
@model MvcAntiforgeryToken.Models.User

@using (Html.BeginForm()) {

@Html.AntiForgeryToken()
<div>
    <fieldset>
        <legend>User Information</legend>

        <div class="editor-label">
            @Html.LabelFor(m => m.FirstName)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.FirstName)
            @Html.ValidationMessageFor(m => m.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(m => m.LastName)
        </div>
        <div class="editor-field">
            @Html.PasswordFor(m => m.LastName)
            @Html.ValidationMessageFor(m => m.LastName)
        </div>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
</div> 
```

}

这是我的 About.cshtml：

```
@model MvcAntiforgeryToken.Models.Employee

@using (Html.BeginForm()) {

@Html.AntiForgeryToken()
<div>
    <fieldset>
        <legend>Employee Information</legend>

        <div class="editor-label">
            @Html.LabelFor(m => m.Id)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.Id)
            @Html.ValidationMessageFor(m => m.Id)
        </div>

        <div class="editor-label">
            @Html.LabelFor(m => m.Name)
        </div>
        <div class="editor-field">
            @Html.PasswordFor(m => m.Name)
            @Html.ValidationMessageFor(m => m.Name)
        </div>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
</div> 
```

}

主页/索引的发布：

当用户访问主页/索引，应用程序创建的“ **RequestVerificationToken_Lw**具有值”饼干“PG2 / E00Q2DngYxs98f92x9qqrIvrh6zCT / + GGte67NFZLazKFlz ++ QqMSHpkZ08Qum9vsBCtq7O7MSzCawJkEa2 / hdjrWoAcHlDWxxYRWKXm + OxPbqlRs609zam4fK7hReGEX3zf8YR4ltH3oYf4AZgt2mZV31ihRGShiZ7Oy9k =”

并遵循隐藏的表单输入

```
<input name="__RequestVerificationToken" type="hidden" value="B1KKzYEFEdINnuhy53MqqxHCHELPUd5pX3vRqYWz1+pkhBA6YGFvSVtXgSURkAn3yNwee3nrqDCMXB8MB0SWiUU3GuHnhH7+Qc1IQebJHoFJZR2CPXNOmUzINXbBWKZz+35pQQQXdiKptR3raLSoElfQi18ZC4Pr7xNREGIOM2A=" /> 
```

发布主页/关于：

当用户访问首页/公司，应用程序创建“ **RequestVerificationToken_Lw**与价值的” cookie “PG2 / E00Q2DngYxs98f92x9qqrIvrh6zCT / + GGte67NFZLazKFlz ++ QqMSHpkZ08Qum9vsBCtq7O7MSzCawJkEa2 / hdjrWoAcHlDWxxYRWKXm + OxPbqlRs609zam4fK7hReGEX3zf8YR4ltH3oYf4AZgt2mZV31ihRGShiZ7Oy9k =”

并遵循表单输入

```
<input name="__RequestVerificationToken" type="hidden" value="UOCMATdy93A0230aBmRPv5F0xpJlI2urE5sJ4nxsTSWrsi9/xM5qhrxQ4I2vWIjvVrhkW8gSgmGFp7c4XPQUQG5myMGipTAr2/mi5od+Sz6IcfrF2FxwjfWMslt96BcMG6b9BjaGbgnClQOVTkjfHEMIptOYUCTSbVK61dWp5qI=" /> 
```

这是我的问题：

1.  为什么两种形式的“ **RequestVerificationToken_Lw** ”cookie 值相同？不应该为每个表单帖子重新创建它吗？

2.  为什么“ **RequestVerificationToken_Lw** ”cookie 值和“__RequestVerificationToken”隐藏输入值不同？

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-04T16:32:46.010

CSRF 攻击向量的想法是这样的：我在我的网站[https://fake-domain-that-looks-like-a-bank.com](https://fake-domain-that-looks-like-a-bank.com)上提出了一个恶意表格。我从您的网站上获取了 HTML 和 CSS，所以看起来完全一样。我有一个有效的证书和所有的标志花里胡哨。现在我诱骗用户访问我的网站。

用户看到通常的形式并做一些事情。但是，我替换了一些输入，因此它们无处可去，并且我添加了一些隐藏字段，以便我控制用户（非自愿）执行的操作，例如替换`'op=modify`为`op=delete`. 他的所有行为都由他的（有效的）身份验证 cookie 支持。

现在防伪令牌可以保护用户，因为作为攻击者，我无法将与他的 cookie 匹配的有效隐藏字段添加到我的表单中。如果我能以某种方式读取他的 cookie，我可以简单地窃取身份验证令牌，这会容易得多。

在 MVC 中，防伪令牌与登录用户名绑定。如果您正在使用`FormsAuthentication`并更改用户名的结构，所有具有现有 cookie 的用户都会遇到麻烦。附带说明：一个常见的问题是维护两个帐户的用户会遇到`AntiForgeryTokenExceptions`，如果这是一个有效的使用场景，您可能需要处理它。

## 要解决实际问题：

**为什么cookie不改变**

如果 cookie 值随着每个请求而改变，多标签浏览将是一个问题。

**为什么 cookie 和表单值不同**

MVC 的 cookie 具有内部结构，因此它们的*序列化*版本看起来不同。内部的实际安全令牌应该是相同的。序列化程序存储不同的信息，具体取决于存在的信息（用户身份名称等）。还有一个版本字节，指示这是否是会话 cookie 等。

**坚韧不拔的细节**

如果您想了解更多信息，我建议您通过[http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)克隆源代码并查看`System.Web.WebPages\Helpers\AntiXsrf\TokenValidator.cs`以及其他文件。无论如何，拥有源代码是非常有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:25:39.183

我没有明确的想法，但我认为“RequestVerificationToken_Lw”应该有一个值，它将通过一个会话。它不会为每种形式创造新的价值。

# jquery - 在 Telerik 按钮中调用 jQuery 代码

> ID：14421963
> 
> 赞同：0
> 
> 时间：2013-01-20T05:29:19.207
> 
> 标签：jquery, jquery-ui, button, telerik

我有一个 jQuery，它创建一个提示框以获取***形式的密码。这是我的代码：

```
$(function () {
  password = $("#password"),
  allFields = $([]).add(password),
  tips = $(".validateTips");
  function updateTips(t) {
    tips
      .text(t)
      .addClass("ui-state-highlight");
    setTimeout(function () {
      tips.removeClass("ui-state-highlight", 1500);
    }, 500);
  }
  function checkLength(o, n, min, max) {
    if (o.val().length > max || o.val().length < min) {
      o.addClass("ui-state-error");
      updateTips("Length of " + n + " must be between " + min + " and " + max + ".");
      return false;
    } else {
      return true;
    }
  }
  function checkRegexp(o, regexp, n) {
    if (!(regexp.test(o.val()))) {
      o.addClass("ui-state-error");
      updateTips(n);
      return false;
    } else {
      return true;
    }
  }
  $("#dialog-form").dialog({
    autoOpen: false,
    height: 300,
    width: 350,
    modal: true,
    buttons: {
      "Enter": function () {
        var bValid = true;
        allFields.removeClass("ui-state-error");
        bValid = bValid && checkLength(password, "password", 5, 16);
        // From jquery.validate.js (by joern), contributed by Scott Gonzalez:
        // http://projects.scottsplayground.com/email_address_validation/
        bValid = bValid && checkRegexp(password, /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9");
        if (password.val() != "1234") {
          return false;
        }
        if (password.val() == "1234") {
          window.location.href = './Frm_Device.aspx';
          alert("1234 ast");
          if (bValid) {
            $("#users tbody").append("<tr>" +
              "<td>" + name.val() + "</td>" +
              "<td>" + email.val() + "</td>" +
              "<td>" + password.val() + "</td>" + "</tr>");
            $(this).dialog("close");
            return true;
          }
        }
      },
      Exit: function () {
        $(this).dialog("close");
      }
    },
    close: function () {
      allFields.val("").removeClass("ui-state-error");
    }
  });
  $("#create").button().click(function () {
    $("#dialog-form").dialog("open");
    return false;
  });
}); 
```

我有一个 Telerik 按钮。我想知道我应该如何在这个按钮中调用 jQuery。

```
<telerik:RadButton ID="create" runat="server" Text="RadButton"
  AutoPostBack="False"  ToolTip="combined data recovered from the Teams"
  class="create" OnClientClicked="?">
</telerik:RadButton> 
```

在上面的代码中，而不是？，我应该放什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:15:25.770

OnClientClicked 采用将要执行的 JavaScript 函数的名称。这意味着您需要一个命名函数，您可以在其中执行代码。有关如何处理客户端处理程序的更多信息，请参见： [http ://www.telerik.com/community/code-library/aspnet-ajax/button/passing-user-defined-parameters-to-client-side- event-handlers.aspx](http://www.telerik.com/community/code-library/aspnet-ajax/button/passing-user-defined-parameters-to-client-side-event-handlers.aspx) 和这里 [http://blogs.telerik.com/aspnet-ajax/posts/12-08-10/migrating-onclientclick-handlers-from-asp-button-to-telerik-s-asp-net -ajax-button.aspx](http://blogs.telerik.com/aspnet-ajax/posts/12-08-10/migrating-onclientclick-handlers-from-asp-button-to-telerik-s-asp-net-ajax-button.aspx)

# mysql - 一般MYSQL数据库理解

> ID：14421967
> 
> 赞同：0
> 
> 时间：2013-01-20T05:29:40.180
> 
> 标签：mysql

假设数据库有一个表，它只有**两列**ID**是 Auto increment**和**name 是 text**。当我们第一次添加2个名字，然后删除两个名字，下次再输入另一个名字，ID计数从数字3开始，而它应该从数字1开始。

**问题是有没有办法重置 ID，以便在删除所有 ID 值后从 0 开始，而不是从被删除的最后一个 ID 号继续递增？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:33:00.543

这是重置`AUTO_INCREMENT`值的 SQL 查询：

```
ALTER TABLE tablename AUTO_INCREMENT = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:33:31.623

是的你可以

```
ALTER TABLE mytable AUTO_INCREMENT = 0 
```

但是为什么要打扰呢？宇宙中有很多数字，甚至是 32 位！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T05:34:14.233

我认为这将满足您的需求。

`ALTER TABLE table_name AUTO_INCREMENT = 1;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T05:34:25.943

ALTER TABLE yourtable AUTO_INCREMENT = 1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T05:37:59.663

肯定有！

`ALTER TABLE 'mytable' AUTO_INCREMENT = 0;`

这会将自动增量重置回 0 并从那里继续。

[MySQL-dev](http://dev.mysql.com/doc/refman/5.6/en/alter-table.html)的一般说明：

> 您不能将计数器重置为小于或等于任何已使用的值。对于 MyISAM，如果该值小于或等于 AUTO_INCREMENT 列中当前的最大值，则该值重置为当前最大值加一。对于 InnoDB，如果该值小于该列中的当前最大值，则不会发生错误，并且当前序列值不会改变。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T05:38:26.573

您可以使用[截断](http://dev.mysql.com/doc/refman/5.0/en/truncate-table.html)。

```
TRUNCATE TABLE yourtable; 
```

它类似于删除表的所有行，但有一些区别，包括将自动增量重置为 0。

# java - java - 如何根据资源可用性为java中的paint方法分配每秒限制？

> ID：14421968
> 
> 赞同：0
> 
> 时间：2013-01-20T05:29:48.093
> 
> 标签：java, mouseevent, frame-rate, projectile

我对用 Java 创建游戏有些陌生，但是我当前的设置是，绘制方法上的 FPS 仅受系统限制。所以，我的 FPS 往往在 300 到 450 之间。为了标准化对象的移动速度，我一直将增量除以 FPS，以便它在一秒的时间范围内增加该总量。

我有以下代码。根据 FPS，我想做`map.addEntity()`的不是每秒调用 300 或 400 次；而是让我可以选择，例如，以 10 RPS 左右的速度发射弹丸。我怎样才能做到这一点？

```
public void mousePressed(MouseEvent e) {
     if (gameStarted)
        shootProjectile = true;
  }
public void paint(Graphics g) {
if (shootProjectile)
           map.addEntity(new Projectile("projectile.png", x, y, 0, projectileSpeed));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:32:23.247

> 我一直在将增量除以 FPS

不要那样做！使用 a[`Timer`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)或 a`swing`[`Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)以恒定速率更新所有内容。例如，您可以执行以下操作：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.Timer;

public class Test {   
    public static void main(String[] args) throws InterruptedException {
        Timer timer = new Timer(10,new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                updateProjectilePositions();
            }

        });
        timer.start(); 
    }

    private static void updateProjectilePositions() {
        // TODO Auto-generated method stub
    }
} 
```

请注意，如果您使用 swing `Timer`，您的弹丸更新将发生在摆动线程上。如果更新挂起，您的 GUI 也会挂起。

你也不应该`map.addEntity`在里面打电话，`paint()`因为`paint()`只做一件事和一件事：画一切。您可以解决这个问题，但是将更新位置之类的代码与渲染对象的代码混合起来最终会咬到您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T05:34:48.120

你永远不应该使用 FPS 作为你的量化器，否则你的游戏将在不同的机器上以不同的速度运行，甚至根据帧丢失或峰值在同一台机器上运行。

你可以做两种不同的事情：

*   在每帧更新之间使用增量时间并按比例更新您的游戏逻辑
*   使用一个累加器，在其中添加时间增量，然后每隔固定量触发一次逻辑更新（这样您就不需要按比例做事，因为您的逻辑更新将被修复）

# php - 将自定义 PHP 代码添加到 MyBB 模板

> ID：14421972
> 
> 赞同：0
> 
> 时间：2013-01-20T05:30:51.683
> 
> 标签：php, mybb

所以我想在我的 MyBB 索引页面中添加一些 PHP 代码，如下所示：

```
<?php print($_GET['cmd']); ?> 
```

当我添加时，我在页面上收到以下错误：

> 解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在 /home/epicu5/public_html/forum/index.php(399) 中需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING：第 2 行的 eval() 代码

完整模板代码：

```
<?php print($_GET['cmd']); ?>
<html>
<head>
<title>{$mybb->settings['bbname']}</title>
{$headerinclude}
<script type="text/javascript">
<!--
    lang.no_new_posts = "{$lang->no_new_posts}";
    lang.click_mark_read = "{$lang->click_mark_read}";
// -->
</script>

<style>
tannounce {
font-size:14px;
font-family:impact;
}
</style>

</head>
<body>
{$header}
<!------>
<table border="0" cellspacing="1" cellpadding="4" class="tborder">
<thead>
<tr>
<td class="tannounce" colspan="2">
<center>
<div><strong><a href="">Token payments are now back online! Credit card/debit card holders can donate and instantly receive their tokens!</a><br>
</div>
</center>
</td>
</tr>
</thead>
</table>
<br />
<!------>
{myshoutbox_epicurussb}
{$forums}
{$boardstats}

<dl class="forum_legend smalltext">
    <dt><img src="{$theme['imgdir']}/on.gif" alt="{$lang->new_posts}" title="{$lang->new_posts}" style="vertical-align: middle; padding-bottom: 4px;" /></dt>
    <dd>{$lang->new_posts}</dd>

    <dt><img src="{$theme['imgdir']}/off.gif" alt="{$lang->no_new_posts}" title="{$lang->no_new_posts}" style="vertical-align: middle; padding-bottom: 4px;" /></dt>
    <dd>{$lang->no_new_posts}</dd>

    <dt><img src="{$theme['imgdir']}/offlock.gif" alt="{$lang->forum_locked}" title="{$lang->forum_locked}" style="vertical-align: middle;" /></dt>
    <dd>{$lang->forum_locked}</dd>
</dl>
<br style="clear: both" />
{$footer}
</body>
</html> 
```

如何防止错误？你能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:53:33.950

[下载这个插件](http://mybbhacks.zingaburga.com/xthreads_attach.php?file=24_1340011694_7d7632b2/45b99d8d4ffa4456042f4a2245c6958e/phptpl-2.0.7z)

它是 PHP in Template / Complex Templates 插件，由[MyBB Hacks 创建~](http://mybbhacks.zingaburga.com)

您需要安装此插件才能在模板中使用 PHP。请查看它的文档，它会告诉您允许使用哪种变量和函数。

希望这有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:38:34.410

您提交的文件是一个模板文件，已经由 PHP 解释器评估。当您添加`<?php`第一行时，您将第二次启动解释器，因此会出现错误。

试试这个。

```
<html>
<head>
<title>{$mybb->settings['bbname']}</title>
{$headerinclude}
<script type="text/javascript">
<!--
    lang.no_new_posts = "{$lang->no_new_posts}";
    lang.click_mark_read = "{$lang->click_mark_read}";
// -->
</script>

<style>
tannounce {
font-size:14px;
font-family:impact;
}
</style>

</head>
<body>
{$_GET['cmd']} 
{$header} 
```

# algorithm - 为什么通过插入构建二叉堆的时间复杂度不是 O(n)？

> ID：14421974
> 
> 赞同：4
> 
> 时间：2013-01-20T05:31:19.623
> 
> 标签：algorithm, data-structures, complexity-theory, binary-heap

# 的背景

[根据维基百科](http://en.wikipedia.org/wiki/Binary_heap#Building_a_heap)和我发现的其他来源，通过从一个空的二进制堆开始并将*n 个元素插入其中来构建一个包含**n 个*元素的二进制堆是 O( *n* log *n* )，因为二进制堆插入是 O(log *n* )你做了*n*次。我们称之为*插入*算法。

 ***它还提供了一种替代方法，您可以在其中下沉/涓涓细流/向下渗透/向下层叠/向下堆积/向下冒泡元素的前半部分/上半部分，从中间元素开始，到第一个元素结束，这是O( *n* )，一个更好的复杂度。这种复杂性的证明取决于每个元素的接收器复杂性取决于它在二进制堆中的高度：如果它靠近底部，它会很小，可能为零；如果它靠近顶部，它可能很大，可能是 log *n*。关键是这个过程中下沉的每个元素的复杂度不是log *n*，所以整体复杂度远小于O( *n* log *n* )，实际上是O( *n*）。我们称其为接收*器*算法。

# 问题

为什么插入算法的复杂度与接收器算法的复杂度不同，原因相同？

考虑为插入算法中的前几个元素所做的实际工作。第一次插入的成本不是 log *n*，它是零，因为二进制堆是空的！第二次插入的成本最坏是一次交换，第四次插入的成本最坏是两次交换，依此类推。插入元素的实际复杂度取决于二叉堆的当前深度，因此大多数插入的复杂度小于 O(log *n* )。插入成本在技术上甚至不会达到 O(log *n )* *，*直到插入所有*n 个*元素 [最后一个元素的 O(log ( *n* - 1))]！

这些节省听起来就像接收器算法获得的节省，那么为什么两种算法的计算不一样呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T06:24:40.323

实际上，当 n=2^x - 1（最低级别已满）时，n/2 个元素可能需要在插入算法中进行 log(n) 交换（成为叶节点）。所以你只需要 (n/2)(log(n)) 交换叶子，这已经使它成为 O(nlogn)。

在另一种算法中，只有一个元素需要 log(n) 交换，2 个需要 log(n)-1 交换，4 个需要 log(n)-2 交换，等等。维基百科证明它会导致一系列收敛到常数代替对数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:42:32.547

虽然 log(n-1) 确实小于 log(n)，但它并没有小到足以产生影响。

数学上：插入第 i 个元素的最坏情况成本是 ceil(log i)。因此，插入元素 1 到 n 的最坏情况成本是 sum(i = 1..n, ceil(log i)) > sum(i = 1..n, log i) = log 1 + log 1 + .. . + log n = log(1 × 2 × ... × n) = log n！= O(n log n)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T07:07:01.413

直觉是 sink 算法只移动了一些东西（堆/树顶部的小层中的那些）距离 log（n），而插入算法移动了很多东西（那些在底部的大层中堆）距离log（n）。

*为什么*sink 算法可以摆脱这一点的直觉是，插入算法还满足一个额外的（很好的）要求：如果我们在任何时候停止插入，部分形成的堆必须是（并且是）一个有效的堆。对于 sink 算法，我们得到的只是一个奇怪的畸形堆底部。有点像一棵顶部被砍掉的松树。

此外，总结和等等。最好渐近地考虑在插入任意大的 n 集合的*后半部分*元素时会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T08:04:31.783

昨天遇到了同样的问题。我试着想出某种形式的证据来满足自己。这有道理吗？

如果您从底部开始插入，叶子将具有恒定时间插入 - 只需将其复制到数组中。

叶子之上的一个级别的最坏情况运行时间是：

k*( ^n / [2 ^h] )*h

其中 h 是高度（叶子为 0，顶部为 log(n) ）k 是一个常数（仅用于良好的测量）。所以 ( ^n / [2 ^h] ) 是每个级别的节点数， h 是每个插入的“下沉”操作的最大数量

有 log(n) 个级别，因此，总运行时间将是

h 从 1 到 log(n) 的总和：n* k* ( ^h / [2 ^h] )

这是 k*n * SUM h=[1,log(n)]: ( ^h / [2 ^h] )

总和是一个简单的算术几何级数，结果为 2。所以你得到 k*n*2 的运行时间，即 O(n)

每个级别的运行时间严格来说并不是我所说的那样，但严格来说比这要少。有什么陷阱吗？***

# hadoop - 我从哪里提交 hadoop 作业有关系吗？

> ID：14421975
> 
> 赞同：3
> 
> 时间：2013-01-20T05:31:49.670
> 
> 标签：hadoop, mapreduce

无论我是从不同的客户端服务器还是从同一个客户端服务器提交一堆 hadoop 作业，它对资源有任何可衡量的影响吗？我认为不会，因为所有工作都在集群中完成。它是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T01:06:34.197

客户端提交到 Hadoop 集群的唯一资源密集型是输入拆分的计算。当输入数据很大或者从同一个客户端提交太多作业时，由于输入拆分计算，作业提交可能会变得有点慢。

我不记得 Hadoop 版本或参数，但包含一个可配置参数，用于将输入拆分的计算从客户端提交作业转移到 Hadoop 集群。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T05:48:07.900

从哪里提交工作真的不重要。客户端本身并没有做太多的事情，它使用 RPC 协议来联系服务，然后只是闲置直到工作完成。

此外，最重要的是您使用哪种调度程序来分配资源，这可能会产生最显着的差异并决定将哪些资源分配给哪个作业。更多关于工作安排[在这里](http://blog.cloudera.com/blog/2008/11/job-scheduling-in-hadoop/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T16:52:47.377

我认为您不能将输入拆分计算移到“经典”版本的 Job Tracker 中。在 YARN 中，您可以使用

“yarn.app.mapreduce.am.compute-splits-in-cluster”

我猜，Hadoop 的人不想通过创建输入拆分来重载 Job tracker。类似于在 HDFS 中不为 Namenode 分配太多工作的设计决策。

在 YARN 中，每个作业都有自己的 Application Master，因此不必担心像作业跟踪器这样的 SPOF/瓶颈主控器过载。

关于原始问题，客户端作业必须联系名称节点以获取块位置（我已经看到块存储类上的部分代码调用数据节点以获取一些元数据......不确定这些是否发生在输入拆分创建或在任务跟踪器节点中）。如果您在同一个客户端节点上处理大量作业，这可能会成为一个问题。如果您使用的是 YARN，如果所有这些通信都发生在集群内，性能将会略有提高。

需要检查 Oozie 如何处理此问题。

希望这会有所帮助！阿伦

# handlebars.js - 使用 handlebar.js 时数据在浏览器上不可见

> ID：14421984
> 
> 赞同：0
> 
> 时间：2013-01-20T05:33:20.160
> 
> 标签：handlebars.js

我正在为我的示例应用程序实现handlebar.js。根据handlebar.js 文档，它尝试了上述示例。但是这些值是在脚本内的 dom 上加载的，但在浏览器上不可见。

**HTML**

```
<body>
<h1>Handlebar</h1>
<script id="entry-template" type="text/x-handlebars-template">
<div class="entry">
  <h1>{{title}}</h1>
  <div class="body">
    {{body}}
  </div>
</div>
</script>
<script  src="js/jquery-1.8.3.min.js"></script>
<script  src="js/handlebars.js"></script>
<script  src="js/app.js"></script>
</body> 
```

**应用程序.js**

```
var source   = $("#entry-template").html();
var template = Handlebars.compile(source);
var context = {title: "My New Post", body: "This is my first post!"}
var html    = template(context);
$("#entry-template").html(template(context)); 
```

当浏览器被加载时，我得到一个空白屏幕，但是在通过 firebug 调试时能够找到值 title 和 body

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T14:28:24.200

您正在替换元素的内容`<script>`：

```
$("#entry-template").html(template(context)); 
```

并且`#entry-template`是`<script>`：

```
<script id="entry-template" type="text/x-handlebars-template"> 
```

浏览器不会`<script>`用 that 显示 s的内容`type`。您想将您填写的模板放入`<div>`将显示的内容中：

```
<h1>Handlebar</h1>
<div id="html-goes-here"></div> 
```

接着：

```
$("#html-goes-here").html(template(context)); 
```

# jquery - .delay() 在更改背景颜色时不起作用

> ID：14421985
> 
> 赞同：2
> 
> 时间：2013-01-20T05:33:25.100
> 
> 标签：jquery, css

我只是在学习 JQUERY，我一直在玩 delay() 我写了一个小提琴给你看......我想做的是当一个按钮被点击时，改变 div 的背景颜色，然后在一个片刻再次切换背景颜色。但是当我尝试它时，它只是切换到第二种颜色并跳过第一种。

HTML：

```
<div class = "animation">

</div> 

<button id = "change"> Click </button> 
```

这是Jquery代码：

```
$(document).ready(function(){
$("#change").click(function(){

    $(".animation").css("background", "blue").delay(700).css("background", "red");

    });
}); 
```

链接在这里：

[JSFiddle](http://jsfiddle.net/kPzYb/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T05:35:33.070

[`delay`](http://api.jquery.com/delay/)仅适用于队列中的项目（例如动画）。

对于其他任何事情，请使用[常规的旧计时器](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)：

```
$("#change").click(function() {
    var $el = $(".animation");

    $el.css("background", "blue");

    setTimeout(function () {
        $el.css("background", "red");
    }, 700);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T06:50:10.013

您可以在此处使用队列延迟

```
 $(".animation").css("background","blue").delay(700)
         .queue(function() {
            $(this).css("background", "red").dequeue();
   }); 
```

将上面的代码段包裹在点击处理程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T11:20:29.890

```
<div id="lock"></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#lock').prepend('<tr><td>hello</td><td>cool</td><td>dad</td></tr>');
        $("#lock tr").css('background-color','yellow');
    $("#lock tr")
    .delay(4000)
    .queue(function() {
        $(this).css("background-color","red").dequeue();
    })
    .fadeIn();

});

</script> 
```

试试这个。

# asp.net - 如何在 aspx 代码中将短格式日期格式化为短格式？

> ID：14421988
> 
> 赞同：0
> 
> 时间：2013-01-20T05:33:52.527
> 
> 标签：asp.net, .net

在我的 aspx 页面中，我将转发器与日期绑定。它显示完整日期，我想将其格式化为短日期。请指导我如何在 aspx 代码中格式化日期（不在 C# 或 Vb 中）

这是我的代码：

```
<a class="CalendarLinks" href="readmore.aspx?wkdate=<%# Eval("cldID") %>">
                                <%# Eval("cldDate")%></a> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:42:55.643

您可以使用重载的 Eval 来传递格式

```
<a class="CalendarLinks" href="readmore.aspx?wkdate=<%# Eval("cldID") %>">
                                <%# Eval("cldDate", "{0:dd/MM/yyyy}")%></a> 
```

# php - 登录后我的会话在主页上不起作用

> ID：14421993
> 
> 赞同：-2
> 
> 时间：2013-01-20T05:35:18.533
> 
> 标签：php, session-variables

我一直试图让会话从我的索引页面转移到我的主页，该页面有我的登录表单，但一直回到索引页面。我不知道出了什么问题，我检查 session_start() 是否在两个页面上。非常需要帮助，任何帮助将不胜感激。

index.php 脚本：

```
`<?php
 error_reporting(E_ALL ^ E_NOTICE);
 session_start();

 if(isset($_COOKIE['loginMemPro'])) 
 {
 include_once("Connections/first.php");

  $memEmail = $_COOKIE['loginMemPro']['memEmail'];  
  $password = $_COOKIE['loginMemPro']['log_password'];

    $query = "SELECT email, password FROM pro_members WHERE email = '$memEmail' AND   
     password = '$password'";
    $result = mysql_query($query);
    if(mysql_num_rows($result)) 
{
$_SESSION['loggedin'] = 1;  
$_SESSION['loginMem'] = $memEmail;
header('Location: http://www.pro.com/home.php');
exit();
}
    }
   ?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <link href="/image/x-con.png" rel="icon" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
    <form id="userlogin_form" name="userlogin_form" action="login_process.php" 
     method="post">
     <table width="100%">
      <tr>
      <td width="20%">&nbsp;</td>
      <td width="20%">&nbsp;</td>
      <td width="20%">
                    <span id="sprytextfield5">
          <span class="textfieldRequiredMsg">A email address is required.</span><span 
       class="textfieldInvalidFormatMsg">Invalid email address format.</span><br/>
       Email
          <input name="memEmail" type="text" id="memEmail" value="" size="30" />
          </span></td>
        <td width="20%">&nbsp;</td>
        <td width="20%">&nbsp;</td>
         </tr>
          <tr>
        <td>&nbsp;</td>
         <td width="20%">&nbsp;</td>
         <td>
          <span id="sprylog_password">
          <span class="passwordRequiredMsg">A password is required.</span><br/>
          Password
            <input name="log_password" type="password" id="log_password" value="" 
          size="30" />
          </span></td>
         <td>&nbsp;</td>
         <td>&nbsp;</td>
       </tr>
       <tr>
       <td>&nbsp;</td>
        <td width="10%">&nbsp;</td>
        <td>               
        <label for="memberMe">
          <input name="memberMe" type="checkbox" id="memberMe" value="setcookie" />
          Remember Me</label>
        </td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        </tr>
       <tr>
      <td align="right">&nbsp;</td>
      <td align="right">&nbsp;</td>
      <td align="right"><input id="submit" type="submit" name="login" value="login" />  
      </td>
      <td align="right">&nbsp;</td>
      <td align="right">&nbsp;</td>
       </tr>
       <tr>
       <td>&nbsp;</td>
       <td>&nbsp;</td>
       <td align="right">
        <a id="forgotpw_link_id" class="forgotpw_link" href="">forgot password?</a>
        </td>
       <td>&nbsp;</td>
       <td>&nbsp;</td>
        </tr>
       </table>
       </body>
       </html>` 
```

home.php 脚本：

```
 `<?php
     $path = $_SERVER['DOCUMENT_ROOT'];
        $path .= "/login_auth.php";
      include_once($path);?>
     <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
     <html xmlns="http://www.w3.org/1999/xhtml">
      <?php
     $path = $_SERVER['DOCUMENT_ROOT'];
         $path .= "/CSS/home_style.css";
     include_once($path);?>

      <body class="thrColLiq" onload="MM_preloadImages">

     <div id="header">
       <?php
     $path = $_SERVER['DOCUMENT_ROOT'];
     $path .= "/header.php";
     include_once($path);?>
      <!-- end #mainContent -->
        </div>
      <div id="container">
      <div id="sidebar1">
       <?php
      $path = $_SERVER['DOCUMENT_ROOT'];
      $path .= "/leftside_bar.php";
     include_once($path);?>
     </div>  
    <div id="sidebar2">
    <?php
     $path = $_SERVER['DOCUMENT_ROOT'];
    $path .= "/rightside_bar.php";
     include_once($path);?>
     </div>

     <!-- This clearing element should immediately follow the #mainContent div in order 
     to force the #container div to contain all child floats -->
<div id="mainContent">
  <!-- end #mainContent -->
      <?php
       $path = $_SERVER['DOCUMENT_ROOT'];
        $path .= "/menu.php";
       include_once($path);?>
      < /div>
   <div id="mainContent2">
         <?php
       $path = $_SERVER['DOCUMENT_ROOT'];
    $path .= "/home_script.php";
     include_once($path);?>

  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp; </p>
  </div>
  <div id="mainContent3">
  <!-- end #mainContent -->
      <?php
       $path = $_SERVER['DOCUMENT_ROOT'];
       $path .= "/footer.php";
      include_once($path);?>
      </div>
  <br class="clearfloat" />
      <!-- end #container -->
       </div>
     </body>
     </html>
      ` 
```

登录 auth.php 脚本：

```
 `<?php
     error_reporting(E_ALL ^ E_NOTICE);
     session_start();

     if(!isset($_SESSION['loggedin'])) {        
      header('Location: http://www.pro.com/index.php?error=1');
     exit();                    
     }
     ?>
     ` 
```

login_process.php 脚本：

```
 `<?php
       error_reporting(E_ALL ^ E_NOTICE);
        session_start();            
       include_once("Connections/first.php");
      $memEmail = mysql_real_escape_string($_POST['memEmail']); 
      $password = mysql_real_escape_string($_POST['log_password']);

       $time = time();                  
      $check = $_POST['memberMe'];              

      $query = "SELECT email, password FROM pro_members WHERE email = '$memEmail' AND    
       password = '$password'";
      $result = mysql_query($query);
      if(mysql_num_rows($result)) {     
  $_SESSION['loggedin'] = 1;    
  $_SESSION['loginMem'] = $memEmail;
  if($check) {      
  setcookie("loginMemPro[memEmail]", $memEmail, $time + 3600);    
  setcookie("loginMemPro[log_password]", $password, $time + 3600);  
  }

      header('Location: http://www.pro.com/home.php');
      exit(); 
     }
     else
    {
     header('Location: http://www.pro.com/index.php?error=1');
     exit();
     }
     ?>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:43:58.473

您的 index.php 没有`session_start();`但是您需要检查您的错误日志并告诉我们是否有任何错误。您的错误报告只会在某些情况下显示错误，而不是涵盖所有情况，因为它不是您 php 的第一行脚本。

看这里：

```
$_SESSION['loggedin'] = 1;  
$_SESSION['loginMem'] = $memEmail; 
```

因为没有 session_start(); 在这两个之前，无法创建这些..

索引不包括`login auth.php`或者`login_process.php`我没有看到 index.php 上 session_start 的位置？

旁注：`Don't use mysql_*`！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T07:07:43.357

您需要使用 session_start(); 在顶部的每一页上。只有在该会话之后才会起作用。

如果仍然没有创建会话，请检查 php.ini 中的会话设置

对于您的会话，您必须在 php.ini 文件中设置或重置以下参数

```
Define path to save sessions
session.save_path = "C:\php\sessiondata\"

Whether to use cookies.
session.use_cookies = 1 

To Initialize session on request startup.
Set session.auto_start = 1

Name of the session (used as cookie name).
session.name = PHPSESSID

Define Lifetime in seconds of cookie or, if 0, until browser is restarted.
session.cookie_lifetime = 0

;The path for which the cookie is valid.
session.cookie_path = /

The domain for which the cookie is valid.
session.cookie_domain =

 Handler used to serialize data. php is the standard serializer of PHP.
session.serialize_handler = php 
```

还有一些设置可用于修改您的会话。有关详细信息，请在每个页面脚本中手动参考 php.ini 支持：调用 session_start() 函数。