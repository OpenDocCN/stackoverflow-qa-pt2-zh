# StackOverflow 问答 15992000-15992999

# java - 计算网络带宽

> ID：15992000
> 
> 赞同：0
> 
> 时间：2013-04-13T19:31:25.060
> 
> 标签：java, mpi

我试图计算网络的带宽

目前我正在测量一条消息所花费的时间，该消息的大小各不相同，要发送到机器并返回，一个 ping，

这是这样做的：

这是我用来测量 ping 的代码：

编辑，现在使用下面评论中的代码

我如何测量系统的带宽，我之前确实问过一个类似的问题，但无法让它工作

它必须在java中完成，它是一个项目

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:42:53.643

我认为这种方法太天真了，无法为您提供有用的方法或测量方法，并且会根据您运行它的时间、您和目标系统之间的跃点数、网络的拥塞程度以及大量协议本身内置的其他变量。使用现有工具而不是构建自己的工具会更好地为您服务。

此外，重要的是要更多地了解 TCP 协议（​​或 UDP，如果这是您想要使用的），以便为在正确的情况下测量正确的指标提供正确的上下文。现代网络并不像通过管道发送尽可能多的数据并考虑最大有效速度那样简单，因为可以配置和更改很多东西，并且在您和目标系统之间有很多步骤可以发挥重要作用在您产生的吞吐量中扮演可变角色。

Security Now 第[317](http://www.youtube.com/watch?v=8qBsJ2JdXuc)和[323](http://www.youtube.com/watch?v=WU8IBfC332c)集，如果您对 TCP 的工作原理非常感兴趣，这将是一个很好的起点，因为它们提供了对细节的精彩介绍。它们在技术上都很有趣且平易近人。我的下一步将是[关于 TCP 的 wikipedia 文章](http://en.wikipedia.org/wiki/Measuring_network_throughput)，然后是 RFC [793](http://www.ietf.org/rfc/rfc793.txt)和[2581](https://www.rfc-editor.org/rfc/rfc5681)以获得权​​威且深入的技术参考（TCP 中可能还涉及其他 RFC，这只是我快速找到的两个）。

# java - 嵌套 if 语句有问题

> ID：15992005
> 
> 赞同：0
> 
> 时间：2013-04-13T19:32:15.317
> 
> 标签：java, nested

理论上，不同层次的收入按不同的百分比征税。前 50k 的 10%，接下来 50k 的 15%，超过 100k 的 25%。

```
 public double getTaxesWithheld() {

    if (taxableIncome >= 100000.0) {

        taxesWitheld = taxesWitheld+ (.25 * (taxableIncome - 100000.0));
        taxableIncome = taxableIncome - 100000.0;
    } else {
        if (taxableIncome >= 50000.0 && taxableIncome <= 100000.0) {
            taxesWitheld = taxesWitheld + (.15 * (taxableIncome - 50000.0));
            taxableIncome = taxableIncome - 50000.0;
        } else {
            if (taxableIncome < 50000.0) {
                taxesWitheld = taxesWitheld + (.1 * (taxableIncome - 25000.0));
            }
        }

        if (taxableIncome <= 0) {
            return 0.0;
        }

    }
    return taxesWitheld;
} 
```

测试用例1：@Test 构造函数值（first_name、last_name、job_title、id、monthly_salary）

```
public void EmployeeMakingBetween50Kand100K() {
    Employee h = new EmployeeImpl("Jon", "Smith", "Miner", 2222, 6166.75);

    assertEquals(h.getMonthlySalary(), 6166.75, 0.005);
    assertEquals(h.getGrossYearlyIncome(), 6166.75*12, 0.005);
    assertEquals(h.getTaxableIncome(), h.getGrossYearlyIncome(), 0.005);
    assertEquals(h.getTaxesWithheld(), 8600.15, 0.005);
    assertEquals(h.getNetYearlyIncome(), h.getGrossYearlyIncome()-h.getTaxesWithheld(), 0.005);
} 
```

不会处理 taxWithheld(), 8600.15, 0.005

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T19:37:59.313

这是一种完全不同的方法，可能会产生更好的结果：

```
 public double getTaxesWithheld() {

    over100k = Math.max(taxableIncome-100000, 0);
    taxableIncome -= over100k;
    over50k = Math.max(taxableIncome-50000, 0);
    taxableIncome -= over50k;

    taxesWitheld = taxesWitheld + (.25 * over100k);
    taxesWitheld = taxesWitheld + (.15 * over50k);
    taxesWitheld = taxesWitheld + (.1 * taxableIncome);
    return taxesWitheld;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T19:39:57.517

你的嵌套有点不稳定

```
if (taxableIncome >= 100000.0) {
    ...
} else if (taxableIncome >= 50000.0) { 
// you don't need if(<= 100000), it's implied since you already 
// know it's !(taxableIncome >= 1000000) from the first if statement
    ...
} else if (taxableIncome > 0) {
    ...
} else return 0; 
// again, you don't need if(<= 0) here, 
// it's implied since you know that !(taxableIncome > 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T19:38:30.860

不应该是 if else 语句，因为在您减去 100k 之后仍然要对其余部分征税。

```
if (taxableIncome >= 100000.0) {
    taxesWitheld = taxesWitheld+ (.25 * (taxableIncome - 100000.0));
    taxableIncome = taxableIncome - 100000.0;
}

if (taxableIncome >= 50000.0 && taxableIncome <= 100000.0) {
        taxesWitheld = taxesWitheld + (.15 * (taxableIncome - 50000.0));
        taxableIncome = taxableIncome - 50000.0;
} 
```

ETC

# shell - 将脚本链接放在我的 cygwin bin 中

> ID：15992006
> 
> 赞同：0
> 
> 时间：2013-04-13T19:32:16.057
> 
> 标签：shell, cygwin

我已经制作了一些 python 脚本，但是有没有更简单的方法来运行它们？我正在使用cygwin。

```
python "C:\Users\Desk\Dropbox\scripts\wsort.py" > data11414_unsorted.txt < data11414_sorted.txt 
```

我想要这样的东西（不输入路径名或“python”）：

```
wsort > data11414_unsorted.txt < data11414_sorted.txt 
```

`wsort`我真正的 wsort.py 的链接在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:03:11.713

在脚本中添加 [Shebang](http://wikipedia.org/wiki/Shebang_%28Unix%29)

```
#!/bin/python 
```

然后像这样调用

```
wsort.py > data11414_unsorted.txt < data11414_sorted.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:15:43.780

首先，您的问题具有 Windows 样式的路径（反斜杠，以 开头`C:`）而不是 Cygwin 路径 ( `/cygdrive/c/Users/Desk/Dropbox/scripts/wsort.py`)。这意味着你实际上并没有使用 Cygwin，或者如果你是，你忽略了一堆警告。

下面假设您使用的是 Cygwin Bash（如果您从“开始”菜单启动 Cygwin 终端，您应该会得到它）和 Cygwin Python（您使用 Cygwin 的[setup.exe 安装](http://www.cygwin.com/install.html)，而不是 Windows Python 安装程序）。如果你不是，你会让自己的生活比你需要的更困难。

顺便说一句，您需要采取一系列步骤：

*   首先，使脚本可执行。在 Cygwin Bash shell 中使用以下`chmod`命令：

    ```
    chmod +x /cygdrive/c/Users/Desk/Dropbox/scripts/wsort.py 
    ```

*   其次，告诉系统*如何*执行它。将以下行添加到脚本的顶部：

    ```
    #!/bin/python 
    ```

    （这是一个“shebang”。Python 将其视为注释，因此不会对其执行任何操作，但 Cygwin 和其他类似 Linux 的系统将使用该行来查看运行脚本的程序。在这种情况下，Python .)

*   第三，确保你的行尾是正确的。Cygwin 期望 Linux 行结束并且没有它们会失败。这可能不是问题，但这样做没有害处。运行以下命令：

    ```
    dos2unix /cygdrive/c/Users/Desk/Dropbox/scripts/wsort.py 
    ```

    此时，您将能够通过在 Cygwin 中指定脚本的完整路径来调用该脚本。如果不明确指定脚本的位置，您将无法运行它。

*   第四步是确保脚本“在您的路径中”，即在 Cygwin 查找要运行的脚本的文件夹之一中。有很多方法可以做到这一点，但最明智的可能是将您的脚本目录添加到您的路径中。每当您启动新的 Cygwin 会话时，以下命令会将您的脚本目录添加到您的路径中：

    ```
    echo 'PATH="/cygdrive/c/Users/Desk/Dropbox/scripts:$PATH"' >>~/.bashrc 
    ```

    但是，您需要重新启动 Cygwin 终端才能使其生效。

    那时，您只需键入即可在 Cygwin 中运行脚本`wsort.py`（并因此将其与重定向等一起使用，如您的问题中所示）。

*   最后，为了能够简单地将其称为`wsort`，有多种选择。显而易见的只是重命名文件。更有用的是（并且不复制文件或做任何可能破坏 Dropbox 同步的事情），尝试创建一个别名：

    ```
    echo 'alias wsort=wsort.py'  >>~/.bashrc 
    ```

    同样，您需要重新启动 Cygwin 终端才能使其生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:06:36.207

也许使用别名？

```
alias wsort = "Command_Used" 
```

# .net - Silverlight 5 部署

> ID：15992010
> 
> 赞同：0
> 
> 时间：2013-04-13T19:32:36.207
> 
> 标签：.net, silverlight, iis, deployment, iis-5

是否可以使用 iis 5.1 托管 silverlight 5 应用程序？
我已经开发和应用程序使用

*   .NET 框架 4.0
*   实体框架
*   银光 5
*   WCF 里亚服务
*   SQL 紧凑型

我不知道是否可以在使用 Windows XP 和 IIS 5 的机器上安装具有上述规格的 Silverlight 应用程序。
如果可能，请给我有用的链接或我应该知道的任何提示。
PS：目前我没有其他选择，我必须在 Windows XP 上部署我的应用程序。它是单用户应用程序，但使用 Silverlight 开发。
如果我可以创建在用户机器上安装 silverlight 应用程序和所有依赖项（如 WCF Ria、EntityFramework、SQL Compact 等）的安装应用程序，我会很棒。这可能吗？我正在使用 Visual Studio 2012 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:58:14.743

是的，我认为应该可以这样做。虽然我没有 IIS 5，但我在 IIS 6 中遇到了同样的问题。IIS 5 和 IIS 6 没有对扩展**.XAP**的任何内置支持，因此默认情况下不支持 Silverlight。要使其支持.XAP，我们必须在 IIS 中添加 MIME 类型。

要在 IIS 服务器中添加 MIME 类型，请按照以下步骤操作：

*   单击开始，选择程序，然后单击管理工具。单击 Internet 服务管理器
*   右键单击域名并打开您的网站属性。
*   在 HTTP 标头选项卡上单击 MIME 类型。
*   在 File Types 窗口中，单击 New Type 添加 XAP Mime-Type，然后单击 Ok
*   做 iisreset

# c++ - MinGW-w64 线程创建失败

> ID：15992013
> 
> 赞同：2
> 
> 时间：2013-04-13T19:32:50.183
> 
> 标签：c++, multithreading, exception, c++11

**解决方案：在其他链接器选项中传递“-static”** ---或--- **解决方案：下载此 MinGW 版本[http://sourceforge.net/projects/mingwbuilds/?source=dlp](http://sourceforge.net/projects/mingwbuilds/?source=dlp)**

我正在使用带有 MinGW-w64 工具链的 Eclipse。我的 GCC 版本是 4.8

我想创建一个由 2 个线程组成的应用程序。我已经尝试将其实现到我的实际应用程序中。因此它没有用，我决定制作一个新的测试应用程序。

**来源（main.cpp）：**

```
#include <iostream>
#include <thread>

using namespace std;

void test() {
     cout << "works.." << endl;
}

int main() {

    thread t(test);
    t.join();

    return 0;
} 
```

**构建过程：**

```
21:19:51 **** Build of configuration Debug for project Test ****
make all 
Building file: ../main.cpp
Invoking: GCC C++ Compiler
g++ -std=gnu++11 -O0 -Wall -c -fmessage-length=0 -MMD -MP -MF"main.d" -MT"main.d" -o "main.o" "../main.cpp"
Finished building: ../main.cpp

Building target: Test.exe
Invoking: MinGW C++ Linker
g++  -o "Test.exe"  ./main.o   -lpthread -lwinpthread -pthread -lpthread
Finished building target: Test.exe

21:19:53 Build Finished (took 1s.863ms) 
```

运行时出现以下错误：

```
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information.
terminate called after throwing an instance of 'std::system_error'
  what():  Operation not permitted 
```

顺便说一句：许多 -pthread 等命令来自几次尝试使其工作。我正在运行 win vista 32 位

如果有人知道如何解决我的问题，我真的很感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T11:28:26.527

有关可以添加到任何 C++11 版本的 MinGW 的本机 win32 std::thread 实现，请参见此处： [https ://github.com/meganz/mingw-std-threads](https://github.com/meganz/mingw-std-threads)

# c - 使用递归关系证明函数具有指数运行时间？

> ID：15992015
> 
> 赞同：7
> 
> 时间：2013-04-13T19:33:09.747
> 
> 标签：c, algorithm, math, recursion, big-o

这是一个简单的 C 程序：

```
int f(int n) {
  if(n==0 || n==1) {
    return n;
  } else {
    return 2 * f(n - 1) + 3 * f(n - 2);
  }
} 
```

该程序具有指数时间复杂度。您可以在此函数调用图中看到这一点`f(5)`：

![n = 5](https://i.stack.imgur.com/OjIXt.jpg)

我想证明该函数仅使用递推方程具有指数复杂性，而不是通过绘制图表和计算函数调用的数量。

我想出的递归关系是

> T(n) = T(n-1) + T(n-2) + c

扩展给

> T(n) = 2T(n - 2) + T(n - 3) + 2c

但是，我不知道如何进一步解决这个问题。如何解决这种递归关系？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T19:57:52.997

对于初学者，您的重复需要某种基本情况，否则当您达到 0 时它是未定义的。为简单起见，假设

> T(0) = 一个
> 
> T(1) = a + b
> 
> T(n + 2) = T(n) + T(n + 1) + c

让我们开始扩展这个递归的前几个术语：

*   T(0) = 一个
*   T(1) = a + b
*   T(2) = 2a + b + c
*   T(3) = 3a + 2b + 2c
*   T(4) = 5a + 3b + 4c
*   T(5) = 8a + 5b + 7c
*   T(6) = 13a + 8b + 12c
*   T(7) = 21a + 13b + 20c

这里有一个非常有趣的模式正在形成。让我们分别看一下 a、b 和 c 项的系数。a 项的系数遵循模式

> 1, 1, 2, 3, 5, 8, 13, 21, ...

这是斐波那契数列，偏移了一步。b项的系数是

> 0, 1, 1, 2, 3, 5, 8, 13, ...

这*正是*斐波那契数列。最后，让我们看一下c术语：

> 0, 0, 1, 2, 4, 7, 12, 20, ...

嗯，这看起来并不熟悉。但是，如果我们将它与 a 项放在一起，我们会看到：

> 答：1、1、2、3、5、8、13、21、...
> 
> b: 0, 0, 1, 2, 4, 7, 12, 20, ...

请注意，b 项都是 a 项减去一个！换句话说，它是将斐波那契数列移动了一步，但从每个项中减去 1。

基于这些观察，我们可以推测以下情况是正确的：

> T(n) = aF [n+1] + bF [n] + c(F [n+1] - 1)

我们现在可以尝试通过归纳来证明这一点。作为我们的基本案例：

> T(0) = a = 1a + 0b + 0c = 1a + 0b + (1 - 1)c = aF [1] + bF [0] + c(F [1] - 1)
> 
> T(1) = a + b = 1a + 1b + 0c = 1a + 1b + (1 - 1)c = aF [2] + bF [1] + c(F [2] - 1)

对于我们的归纳步骤，让我们假设对于某个自然数 n，

> T(n) = aF [n+1] + bF [n] + c(F [n+1] - 1)

然后

> T(n + 1) = aF [n+2] + bF [n + 1] + c(F [n+2] - 1)

然后我们有

> T(n + 2) = T(n) + T(n + 1) + c
> 
> = aF [n+1] + bF [n] + c(F [n+1] - 1) + aF [n+2] + bF [n + 1] + c(F [n+2] - 1) + c
> 
> = a(F [n+1] + F [n+2] ) + b(F [n] + F [n+1] ) + c(F [n+1] + F [n+2] - 2 + 1)
> 
> = aF [n+3] + bF [n+2] + c(F [n+3] - 1)

这样就完成了归纳，所以我们的公式一定是正确的！

那么这与效率有什么关系呢？嗯，[Binet 的公式](http://en.wikipedia.org/wiki/Fibonacci_number#Closed-form_expression)告诉我们 F [n] = Θ(φ ^n )，其中 φ 是[黄金比例](http://en.wikipedia.org/wiki/Golden_ratio)（大约 1.61）。这意味着

> T(n) = aF [n+1] + bF [n] + c(F [n+1] - 1) = aΘ(φ ^n ) + bΘ(φ ^n ) + cΘ(φ ^n ) = Θ((a + b + c) φn ) ^_

所以只要 a + b + c ≠ 0，运行时间就是 Θ(φ ^n )，它是指数的。

希望这可以帮助！

# html - 页脚和滚动条中的菜单停止

> ID：15992016
> 
> 赞同：1
> 
> 时间：2013-04-13T19:33:10.827
> 
> 标签：html, css

您好我想知道如何让它停止我的页脚中的下拉菜单？当我单击法国时，列表滚动但没有停在我的页脚处，您看不到隐藏在页脚后面的菜单的其余部分。这就是我尝试实现滚动条的原因。

菜单 CSS ：

```
body {
 font-size: 100%;
 background:#32373d;
}
a {
text-decoration: none;
}
ul, ul ul {
margin: 0;
padding: 0;
list-style: none;
}
#vertical { 
width: 260px;
font-size: 0.8125em;
position: absolute;
float: right;
}

.menuv {
width: auto;
height: auto;
-webkit-box-shadow: 0px 1px 3px 0px rgba(0,0,0,.73), 0px 0px 18px 0px   rgba(0,0,0,.13);
-moz-box-shadow: 0px 1px 3px 0px rgba(0,0,0,.73), 0px 0px 18px 0px rgba(0,0,0,.13);
box-shadow: 0px 1px 3px 0px rgba(0,0,0,.73), 0px 0px 18px 0px rgba(0,0,0,.13);
} 
```

页脚 CSS：

```
#footer {
position:absolute;
left:0px;
bottom:0px;
height:60px;
width:100%;
background: #258dc8; /* Old browsers */
background: -moz-linear-gradient(top,  #258dc8 0%, #258dc8 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color- stop(0%,#258dc8),     color-stop(100%,#258dc8)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #258dc8 0%,#258dc8 100%); /*          Chrome10+,Safari5.1+ */
 background: -o-linear-gradient(top,  #258dc8 0%,#258dc8 100%); /* Opera 11.10+ */
 background: -ms-linear-gradient(top,  #258dc8 0%,#258dc8 100%); /* IE10+ */
 background: linear-gradient(to bottom,  #258dc8 0%,#258dc8 100%); /* W3C */
 filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#258dc8',         endColorstr='#258dc8',GradientType=0 ); /* IE6-9 */
} 
```

问题：[https ://ps3land.franceserv.com/](https://ps3land.franceserv.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:15:51.360

*   `overflow: hidden`从您的`body`标签中删除
*   `height`将属性更改`<div id="vertical">`为约`500px`
*   删除填充`ul li a`
*   更改`width`为`#vertical`大约`240px`
*   添加到`#vertical`,`overflow: scroll`

使用此方法您还必须解决其他几个问题，但是您用来实现侧边栏且不重叠页脚的组合可能需要 jQuery 或 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:00:34.530

您将不得不面对代码中的几个问题。基本上你需要给你的元素`#vertical`及其`ul`以下样式：

```
#vertical {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
        -ms-box-sizing: border-box;
            box-sizing: border-box;
    height: 100%;
    padding-top: 50px    // height of header;
    padding-bottom: 60px // height of footer
}

#vertical > ul {
    overflow-y: scroll;
    height: 100%;
} 
```

它还不完美，但这应该让你开始。

# php - 无法将数据从 php 表单发布到 mysql

> ID：15992033
> 
> 赞同：0
> 
> 时间：2013-04-13T19:34:42.550
> 
> 标签：php, html, mysql

无论我去多少个网站尝试让它工作，它仍然没有。我无法将已输入的数据最终存储在数据库中。表单提交，但没有返回错误。在 phpMyAdmin 中查找时，没有记录。我已经调整了一百万次，但没有运气。第二双眼睛能告诉我我做错了什么吗？

谢谢！！
蒂姆

```
<body>
<form action="insert.php" method="post"><br>
Date: <input type="text" name="date" id="date"><br>
Time: <input type="text" name="time" id="time"><br>
City: <input type="text" name="city" id="city"><br>
Fire Dept: <input type="text" name="fire" id="fire"><br>
Address: input type="text" name="addy" id="addy"><br>
Call Type/Level <input type="text" name="level" id="level"><br>
Description: <input type="text" name="desc" id="desc"><br>
Units: <input type="text" name="units" id="units"><br>
Submitted by: <input type="text" name"who" id="who"><br>
<input type="submit" name="submit" value="Submit">
</form>
</body>
</html>

<?php
if (isset($_POST['submit'])){

$db=mysql_connect("", "", "");
$mydb=mysql_select_db("rm911_incidents");

$date=$_Post['date'];
$time=$_Post['time'];
$city=$_Post['city'];
$fire=$_Post['fire'];
$addy=$_Post['addy'];
$level=$_Post['level'];
$desc=$_Post['desc'];
$units=$_Post['units'];
$who=$_Post['who'];

$sql = "INSERT INTO incidents(date,time,city,fire,addy,level,desc,units,who)
VALUES
('$date','$time','$city','$fire','$addy','$level','$desc','$units','$who')";
$result = mysql_query($sql);
if($result)
{
echo "<br>Input data is successful";
}
else
{
echo ("<br>Input data has failed");
}
}
?> 
```

好的，所以我已经修复了 Leo 提到的错误（谢谢！），但这也不是问题。我使用您提供的错误报告时遇到的错误是：未定义的索引：xxx...（xxx 是数据库中的每个字段名称）。我在数据库中有一个“id”字段，auto_increment-ing - 我忘记将它设置为索引了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T19:40:54.150

POST 数据存储在`$_POST`数组中，而不是`$_Post`数组中。您应该在服务器日志或浏览器中收到关于未定义变量的通知（如果将 PHP 消息发送到浏览器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T19:43:15.270

问题在于您的帖子数组名称 $_Post

```
$date=$_Post['date'];
$time=$_Post['time'];
$city=$_Post['city'];
$fire=$_Post['fire'];
$addy=$_Post['addy'];
$level=$_Post['level'];
$desc=$_Post['desc'];
$units=$_Post['units'];
$who=$_Post['who']; 
```

你应该使用 $_POST 而不是 $_Post。另外，你可以做

```
var_dump($_POST); 
```

在 php 文件的顶部，因此您将能够看到表单发送到您的脚本的内容。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T20:04:39.240

您还缺少一个左方括号：

```
Address: input type="text" name="addy" id="addy"><br> 
```

应该：

```
Address: <input type="text" name="addy" id="addy"><br> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T20:14:04.720

尝试在最顶部的 php 文件中执行以下操作`<?php`：

```
//error reporting set to all
error_reporting(E_ALL);
ini_set('display_errors', 'On'); 
```

还要将您的 php 代码放在您的 html 之前。

您应该看到正在输出的错误并能够对其进行调试。

如果您需要帮助，请在此处发布错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T20:16:45.563

你能检查一下是否`Submitted by: <input type="text" name"who" id="who"><br>`导致错误..应该是`Submitted by: <input type="text" name="who" id="who"><br>`

如果这没有帮助..尝试在您的 php 文件中运行静态插入查询并检查它是否工作...

问候， 狮子座

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T22:02:47.577

改变了一些东西，这应该可以工作..如果它很可能不是你的数据库的问题

```
<html>
<body>
<form action="insert.php" method="POST"><br> <!-- method POST-->
Date: <input type="text" name="date" id="date"><br>
Time: <input type="text" name="time" id="time"><br>
City: <input type="text" name="city" id="city"><br>
Fire Dept: <input type="text" name="fire" id="fire"><br>
Address: <input type="text" name="addy" id="addy"><br>
Call Type/Level <input type="text" name="level" id="level"><br>
Description: <input type="text" name="desc" id="desc"><br>
Units: <input type="text" name="units" id="units"><br>
Submitted by: <input type="text" name="who" id="who"><br> <!-- name"who" changed -->
<input type="submit" name="submit" value="Submit">
</form>
</body>
</html>

<?php
if (isset($_POST['submit'])) {

$db=mysql_connect("", "", "") or die ("Cant connect");
$mydb=mysql_select_db("rm911_incidents") or die ("Cant find db");

$date = $_POST['date']; //_POST not _Post
$time = $_POST['time'];
$city = $_POST['city'];
$fire = $_POST['fire'];
$addy = $_POST['addy'];
$level = $_POST['level'];
$desc = $_POST['desc'];
$units = $_POST['units'];
$who = $_POST['who'];

$sql = "INSERT INTO incidents ( date , time, city , fire , addy , level , desc , units , who ) 
VALUES ( '$date' , '$time' , '$city' , '$fire' , '$addy' , '$level' , '$desc' , '$units' , '$who' )";
$result = mysql_query($sql) or die ("Cant insert");
if($result)
{
echo "<br>Input data is successful";
}
else
{
echo "<br>Input data has failed";
}
}
?> 
```

# weblogic - 负载测试时的套接字异常

> ID：15992035
> 
> 赞同：0
> 
> 时间：2013-04-13T19:35:02.707
> 
> 标签：weblogic, jmeter, socketexception, f5

在使用 JMeter 进行负载测试时，`Non HTTP response code: java.net.SocketException`一旦达到峰值负载，我们就会收到所有请求。

这是服务器配置：

```
JMeter -> F5 (load balancer) -> 2 legs of Weblogic servers. 
```

得到socketexception的原因可能是什么？
非常感谢这方面的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:55:07.733

这是您的服务器开始拒绝客户端的连接或超时。

这意味着您的服务器无法正确处理负载。

# c++ - 压缩两个重叠的线性样条之间的垂直空间

> ID：15992037
> 
> 赞同：0
> 
> 时间：2013-04-13T19:35:20.837
> 
> 标签：c++, language-agnostic, spline

我有两个或多个线性样条线 - 类似于 1D 参数，但实际上是 2d，样条线具有起点和终点，并且多个样条线能够存在于同一空间中。

```
`\___/````\_____/\/`````\

___/``````````\_______/````` 
```

我怎样才能尽可能地压缩空间，使线条永远不会交叉

```
`\___/````\_____/\/`````\
___/``````````\_______/````` 
```

# asp.net-mvc - 向 Screenleap 发出 HTTPS 请求

> ID：15992039
> 
> 赞同：0
> 
> 时间：2013-04-13T19:35:27.140
> 
> 标签：asp.net-mvc, https, screensharing

我必须在 MVC 应用程序中实现屏幕共享，因为我正在尝试使用 Screenleap 服务。为了向 screenleap 提出请求，我添加了以下代码：

```
string url = "https://api.screenleap.com/v1/screen-shares?accountid=myAccountID&authtoken=myTokenNumber";

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Method = "POST";
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        Stream resStream = response.GetResponseStream(); 
```

但它返回错误：远程服务器返回错误：（401）未经授权。

任何人都可以帮助如何解决这个问题，即如何使用 MVC 应用程序连接到 screenleap 或任何好的屏幕共享替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:19:04.820

尝试以下操作：

```
 string url = "https://api.screenleap.com/v1/screen-shares";
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Method = "POST";
        request.Headers.Add("accountId", "myAccountID");
        request.Headers.Add("authtoken", "myTokenNumber");
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        Stream resStream = response.GetResponseStream();
        StreamReader reader = new StreamReader(resStream);
        string responseFromServer = reader.ReadToEnd();
        Console.WriteLine(responseFromServer); 
```

为我工作。希望有帮助。

# javascript - jQuery中最接近的不起作用

> ID：15992041
> 
> 赞同：1
> 
> 时间：2013-04-13T19:35:36.313
> 
> 标签：javascript, jquery

`.dropzone`当用户单击`.dropzone-upload-btn`元素时，我尝试通过 jQuery 单击类。我有这段代码，但它什么也没做。知道为什么吗？

```
<div class="dropzone-wrapper">
  <div class="dropzone"></div>
  <div class="dropzone-upload-btn"></div>
</div> 
```

这是jQuery代码（简化）

```
$('.dropzone-upload-btn').on("click", function() {
  return $(this).closest('.dropzone').click();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T19:36:44.477

`closest`查看匹配的元素及其祖先。你可能想要`siblings`：

```
$('.dropzone-upload-btn').on("click", function() {
    return $(this).siblings('.dropzone').click();
}); 
```

参考：

*   [http://api.jquery.com/closest/](http://api.jquery.com/closest/)
*   [http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

当然，如果您 100% 确定该`.dropzone`元素将紧接在该`.dropzone-upload-btn`元素之前，那么您可以使用`prev`or `prevAll`：

```
$('.dropzone-upload-btn').on("click", function() {
    return $(this).prev('.dropzone').click();
}); 
```

参考：

*   [http://api.jquery.com/prev/](http://api.jquery.com/prev/)
*   [http://api.jquery.com/prevAll/](http://api.jquery.com/prevAll/)

`prevAll`如果您知道目标元素将在匹配的元素之前出现，则可以使用，但不一定在**之前**。`prev`只会查看第*一个* **前**一个兄弟姐妹。

`prevAll`和之间的区别在于`siblings`它`siblings`查看匹配元素之前**和**`prevAll`之后的兄弟姐妹，而只查看它之前的兄弟姐妹。

# php - 当 haystack 是 exec() 输出时，preg_match 返回 null

> ID：15992044
> 
> 赞同：2
> 
> 时间：2013-04-13T19:36:07.083
> 
> 标签：php, regex, arrays, preg-match

我正在尝试在我使用运行的 Linux 命令的输出上运行一些正则表达式`exec()`。将输出作为干草堆插入时`preg_match`返回，但是当我将此输出的相同副本放入字符串中并将其用作干草堆时，工作正常并输出预期的数组。`NULL``exec()``preg_match`

**代码：**

```
exec("/usr/local/bin/ffmpeg -i video.flv 2>&1 | grep Duration", $output);
//$output[0] will be: "Duration: 00:01:00.08, start: 0.042000, bitrate: 164 kb/s"    
$string = $output[0];    
//This regex is to extract the duration, "00:01:00", from the output.
$pattern = "/(^Duration:) ([^&]+)(.[0-9][0-9])(, start)/";    
preg_match($pattern, $string, $matches);
print_r($matches[2]);
//The result should be "00:01:00" but the whole $matches array is empty instead.

//If I added the result of output[0] manually into a string it works fine.
$str = "Duration: 00:01:00.08, start: 0.042000, bitrate: 164 kb/s";
preg_match($pattern, $str, $matches_);
print_r($matches_[2]);
//Outputs "00:01:00" and everything is working fine.

//Just to make sure, I printed $str and $string to see if there is any difference
echo $str."\n".$string;
//The output is:
//Duration: 00:01:00.08, start: 0.042000, bitrate: 164 kb/s
//Duration: 00:01:00.08, start: 0.042000, bitrate: 164 kb/s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:49:33.090

使用以下 echo 命令，使用单引号分隔字符串：

```
echo "'$str'\n'$string'"; 
```

输出：

```
'Duration: 00:01:00.08, start: 0.042000, bitrate: 164 kb/s'
'  Duration: 00:01:12.66, start: 0.000000, bitrate: 127 kb/s' 
```

你看，它们不一样。ffmpeg 在字符串前面添加空格。

但是，如果您将模式更改为：

```
$pattern = "/(Duration:) ([^&]+)(.[0-9][0-9])(, start)/"; 
```

请注意，我已经放弃了`^`前面的`Duration`. 现在模式匹配了，尽管字符串前面有一些空格。

# grails - Grails、Vaadin 7 和 SpringSecurity：授权不起作用

> ID：15992046
> 
> 赞同：1
> 
> 时间：2013-04-13T19:36:31.360
> 
> 标签：grails, spring-security, vaadin

我已按照[此](http://www.epseelon.com/2011/02/23/grails-vaadin-and-spring-security-core/)链接使用 Grails、Vaadin 7 和 Spring Security 实现应用程序安全性。身份验证部分有效，但看起来授权无效。我创建了一个如此简单的服务：

```
import grails.plugins.springsecurity.Secured
class WelcomeService {
    @Secured(['ROLE_ADMIN'])
    def sayHello() {
        return "Hello, ADMIN!"
    }
} 
```

和一个用户`"ROLE_USER"`，但每次我打电话

`Notification.show(Grails.get(WelcomeService).sayHello())`显示消息，但`AccessDeniedException`应该抛出 an 。

你有什么想法为什么会发生这种情况？

* * *

**UPD**：到目前为止，我能想到的唯一解决方案是像这样更改服务代码：

```
def sayHello = {
    if (!springSecurityService.getPrincipal().getAuthorities().contains(new GrantedAuthorityImpl("ROLE_ADMIN"))){
        throw new AccessDeniedException("You are not authorized to do this!")
    }
    return "Hello, ADMIN!"
} 
```

但是将a`springSecurityService`注入每个服务类并将此代码添加到每个方法中确实很尴尬。我怎样才能以更清洁的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:54:27.570

事实证明，它必须像`@Secured("hasRole('ROLE_ADMIN')")`控制器一样，其余的都需要 ACL 插件才能工作。

# javascript - 如何以超时终止此子进程？

> ID：15992049
> 
> 赞同：1
> 
> 时间：2013-04-13T19:36:36.193
> 
> 标签：javascript, python, phantomjs

我知道终止子进程调用的问题已被问过几次，包括[这里](https://stackoverflow.com/questions/337863/python-popen-and-select-waiting-for-a-process-to-terminate-or-a-timeout?rq=1)，但是，尝试遵循这些答案，如果脚本挂起，我似乎无法退出（在我的情况下，我正在执行 phantomjs 脚本）。例如，如果我尝试在我的幻像代码中加载一个不存在的 jquery 文件，即使我有超时，脚本也会挂起。这是我的代码：

```
def kill_proc():
    if p.poll() != 0:
        process.kill()

p = subprocess.Popen(['phantomjs','file.js'],stdout=subprocess.PIPE)
    out, phantomError = p.communicate()

t = Timer(5, kill_proc) # should kill it after 5 seconds
t.start()
p.wait() 
```

我的 phantomjs 脚本（正在进行中）：

```
var page = require('webpage').create();
page.includeJs("http://localhost/jquery.js",function(){ 
    phantom.exit();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:20:02.137

我认为您的问题可能是 p.communicate() 将“[等待进程终止](http://docs.python.org/3.2/library/subprocess.html#subprocess.Popen.communicate)”，这意味着如果脚本挂起，您的计时器实际上永远不会启动。

在计时器启动后将您的通话移至进行通信（并在 kill_proc 函数中将 process.kill() 更改为 p.kill() ），我认为它会满足您的要求。

正如我在上面的评论中提到的，Python 3.3 的 subprocess 模块函数有一个 timeout 参数，可以让这一切自动发生。

# caching - RavenDB：如何防止高 RAM 使用率？

> ID：15992053
> 
> 赞同：3
> 
> 时间：2013-04-13T19:36:55.783
> 
> 标签：caching, task-parallel-library, ravendb

*   我的应用程序包含一些返回大型结果集的查询（尽管我已经用`Take(300)`lambda.
*   在使用高峰期，我看到 Raven.Server.exe 消耗异常大量的 RAM。
    *   事实上，在这些时间里，Raven.Server.exe 会*耗尽*我服务器的可用 RAM。

我怎样才能避免这种情况？

*   经过几次谷歌搜索，我可以看到其他人在我之前遇到过这个错误。
*   但 RavenDB 在过去几年中不断发展，有许多配置*和*代码选项可以限制 Raven.Server.exe 可以消耗的 RAM 量并完全禁用缓存。

谁能告诉我哪些选项*最*适合我的情况？

* * *

这是我发现的服务器配置选项：

*   [链接 1](http://ravendb.net/docs/server/administration/configuration)
*   [链接 2](http://old.ravendb.net/faq/low-memory-footprint)
*   [链接 3](https://groups.google.com/d/msg/ravendb/ZBXAvLh7yu8/onL_iWZ5dyAJ)

这是我发现的代码选项：

*   [链接 1](https://groups.google.com/d/msg/ravendb/-b7kTrG-dNo/5NrhpJnddQcJ)
*   [链接 2](https://groups.google.com/d/msg/ravendb/KohLTIj6FcU/DqHBUnZ23EcJ)

* * *

我很清楚，这个[默认设置](http://ravendb.net/docs/server/administration/configuration)没有得到尊重：

> Raven/MemoryCacheLimitMegabytes
> 
> RavenDB 服务器内部文档缓存的最大大小（MB）。 **默认值：总系统内存的 50%**减去 Esent 缓存的大小。

在我的服务器上，使用 build 2330，没有设置任何自定义配置，Raven.Server.exe 消耗了 95% 的可用 RAM！

* * *

**编辑：当****只**执行大量读取（而不是写入）时，我能够在测试环境中重现这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T15:13:20.303

[@Ayende](https://stackoverflow.com/a/15996152/109941) Rahein 比我更了解 RavenDB，但这对我有用：

1.  `Take(300)`太多了。我需要将其更改为`Take(128)`.
2.  使用 3.10 GHz 四核客户端机器，我在一个 2.50 GHz 单核服务器上使用`Parallel.ForEach`循环内的查询。我需要指定并行度：`Parallel.ForEach(objects, new ParallelOptions { MaxDegreeOfParallelism = 3 }, currentObject => { /* My Query */ });`
3.  我需要在我的实例 上[配置以下选项：](https://groups.google.com/d/msg/ravendb/8Pr4fxwzgp4/r28gkyUzmwsJ)`DocumentStore``_store.Conventions.DisableProfiling = true; _store.Conventions.ShouldCacheRequest = url => false; _store.DisableAggressiveCaching();`
4.  如果我需要分页查询并在单个会话中发出多个批处理请求，我需要以下内容：
    `ravenSession.Advanced.Evict(doc); // for each loaded doc`

我希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T05:42:47.397

吉姆，不要认为这是一个缓存问题。我认为这是您的索引。您是否有带有多个 from 子句或 SelectMany 的 map/reduce 索引？

此外，处理此类问题的最佳位置是 ravendb 的邮件列表。

# sql - 使用 GROUP BY 按 orderid 对订单进行分组

> ID：15992055
> 
> 赞同：2
> 
> 时间：2013-04-13T19:37:07.207
> 
> 标签：sql, sql-server, group-by

我想知道`orderid`使用`GROUP BY`语句对每个结果进行分组的最佳方法。

当前查询：

```
SELECT T.orderid,
       Inventory.partid,
       Inventory.Description,
       OrderItems.Qty,
       '$' + STR(Inventory.price,8,2) AS UnitPrice,
       '$' + STR(OriginalCost,8,2) AS OriginalCost,
       '$' + STR(QuantityDiscount,8,2) AS QuantityDiscount, 
       '$' + STR((OriginalCost  - QuantityDiscount),8,2) AS FinalCost
  FROM (
       SELECT Orders.Orderid, Inventory.partid, Description, Qty, 
              Inventory.price AS UnitPrice, 
              (OrderItems.Qty * Inventory.price) AS OriginalCost, 
              CASE WHEN OrderItems.Qty >= 5
                     THEN ((OrderItems.Qty * Inventory.price) * .05)
                   WHEN OrderItems.Qty >= 10
                     THEN ((OrderItems.Qty * Inventory.price) * .10)
                   ELSE 0
              END AS QuantityDiscount
         FROM Orders,OrderItems,Inventory
       ) AS T
  JOIN OrderItems ON OrderItems.orderid = OrderItems.orderid
  JOIN Inventory ON ORDERITEMS.partid = Inventory.partid
ORDER BY T.QTY DESC 
```

DB图：

![在此处输入图像描述](https://i.stack.imgur.com/xNEVW.jpg)

**示例结果** 这是我从当前代码中得到的部分结果。我希望所有具有相同 id 的订单都应该组合在一起。

```
orderid partid Description Qty  UnitPrice OriginalCost QuantityDiscount FinalCost
------- ------ ----------- ---- --------- ------------ ---------------- ---------
6148    1006   gizmo       1    $   11.35 $  113.50    $    5.67        $  107.83
6148    1006   gizmo       1    $   11.35 $  113.50    $    5.67        $  107.83
6148    1006   gizmo       1    $   11.35 $  113.50    $    5.67        $  107.83
6148    1006   gizmo       1    $   11.35 $  113.50    $    5.67        $  107.83
6148    1006   gizmo       1    $   11.35 $  113.50    $    5.67        $  107.83
6148    1006   gizmo       1    $   11.35 $  113.50    $    5.67        $  107.83
6148    1006   gizmo       1    $   11.35 $  113.50    $    5.67        $  107.83
6148    1006   gizmo       1    $   11.35 $  113.50    $    5.67        $  107.83
6148    1006   gizmo       1    $   11.35 $  113.50    $    5.67        $  107.83 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:46:28.047

A simplyfied example if you want to still get the part informations:

```
 SELECT orderid,
         partid,
         sum(Qty)
    FROM yourTable
GROUP BY oderid, partid 
```

So, this groups the table by `oderid` and `partid` and returns the sum of `Qty` for each group. For more details on how to use `group by`, give Google a chance. Here is [one tutorial](http://www.tizag.com/sqlTutorial/sqlgroupby.php) I found instantly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:32:14.570

您也可以使用带有 DISTINCT 关键字的[SELECT](http://msdn.microsoft.com/en-us/library/ms176104.aspx)语句而不是 GROUP BY 子句

```
SELECT DISTINCT
       Col1,
       Col2,
       ...
FROM ... 
```

# c# - XmlNode.AppendChild，它真的是附加的吗？

> ID：15992056
> 
> 赞同：0
> 
> 时间：2013-04-13T19:37:13.677
> 
> 标签：c#, xml, vb.net, append

使用`XmlNode.AppendChild`方法时，它是从字面上附加到现有文件还是写入一个全新的（附加的）文件？

微软对此[很不清楚](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.appendchild.aspx)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:55:31.677

正如@Alexei 所回答的那样，`AppendChild`只附加加载到内存中的 XML 树。

但如果您询问`XmlDocument.Save()`方法，它将把内存中的完整 XML 树重写为输出流。

这可以用这段代码来验证——

```
using (FileStream fs = new FileStream(@"E:\Sample.xml", 
        FileMode.Open, FileAccess.ReadWrite, FileShare.Read))
{
     XmlDocument xmlDoc = new XmlDocument();
     xmlDoc.Load(fs);

     // Do same changes, like AppendChild on root element

     xmlDoc.Save(fs);
} 
```

再次加载文件时，您将看到完整的 XML 树（更新后的）位于`re-written`原始 XML 树的下方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T19:40:24.600

`XmlNode.AppendChild`不附加或修改任何文件。它修改加载在内存中的 Xml 树。

如果要修改文件，则需要保存结果（如文章中所述）。

# ember.js - emberjs-RC2-如何从控制器访问路由器实例和操作不会冒泡到路由器

> ID：15992061
> 
> 赞同：0
> 
> 时间：2013-04-13T19:37:37.743
> 
> 标签：ember.js, ember-router

在路由器中，我有一个事件“removeComment”。在控制器中，如果通过**this.get('target').send('removeComment', context)**访问它，我会收到错误**Nothing handlered the event 'removeComment'**。当我使用**this.get('target.router').send('removeComment', comment)**时，错误变为**Object # has no method 'send'**。使用**this.router.send('removeComment', comment)**，会报错：**Cannot read property 'send' of undefined**。

同样，仅将“removeComment”操作发送到 PostEditController 不会通过控制器冒泡，直到路由。

如何从 emberjs rc2 和 routerV2 中的控制器访问路由器实例。

**[jsfiddle](http://jsfiddle.net/VrR2T/6/)** _

路由器：

```
 EmBlog.Router.map(function() {
   this.resource("posts", {path: '/posts'}, function(){
     this.route('new');

     this.resource('post', {path: '/:post_id/'}, function(){
       this.route('edit', {path: '/edit'});

       this.route('comments', {path:  '/comments'});
       this.route('newComment');
       this.route('comment', {path: '/comments/:comment_id'});    
       this.route('editComment', {path: '/comments/:comment_id/edit'});

     });    
 });
}); 
```

控制器

```
 EmBlog.PostEditCommentController = Ember.ObjectController.extend({

   destroyMe: function(comment) {
     this.get('target.router').send('removeComment', comment);
   } 
}); 
```

路由器

```
EmBlog.PostEditCommentRoute = Ember.Route.extend({
   events: { 
      removeComment: function(context) {
       var comment = context.get('content');
       comment.deleteRecord();
       comment.get('store').commit();
       this.transitionTo('post.index');
     }          
    }
}); 
```

我在帖子/评论模板中访问它。这是该模板的控制器。

```
EmBlog.PostCommentsController = Ember.ArrayController.extend({
  needs: ['postEditComment']
}); 
```

帖子/评论模板

```
<script type="text/x-handlebars" data-template-name="post/comments">
     {{#each controller}}

     <p><a href='#' {{action destroyMe this target="controller.controllers.postEditComment"}}> Destroy </a></p>

    {{/each}}

 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:26:07.980

感谢更新，结束小提琴，它有很大帮助:)。我想我知道这里发生了什么。

首先，控制器中的destroyMe功能不对，应该是真的

```
destroyMe: function(comment) {
  this.get('target').send('removeComment', comment);
} 
```

然后，您在 post.comments 的模板中调用它，但您在 PostCommentsRou​​te 的子路由“PostEditCommentRoute”中实现它。因此，在 PostCommentsRou​​te 中拉起事件应该使它起作用。

现在，作为对您的代码的总体评论，有一些奇怪的事情，例如

```
<p>{{#linkTo 'post.comments'}}  comments{{/linkTo}}</p>  

{{render 'post.comments' comments}} 
```

结果，当您单击“评论”链接时，它会引发错误（视图已呈现）。

路线中还有一些可以避免的代码，例如所有 setupController 挂钩，例如

```
setupController: function(controller, model){
  controller.set('content', model);
} 
```

这是默认行为，因此您不必覆盖它。

# ruby - 避免迭代 NArray

> ID：15992062
> 
> 赞同：2
> 
> 时间：2013-04-13T19:37:42.960
> 
> 标签：ruby, narray

我有一堆定义为 2x2 NArrays 的点，我似乎无法弄清楚如何避免迭代。这是我的工作：

```
# Instantiate an example point
point = NArray[[4, 9], [1, 1]]
# Create a blank array to fill
possible_points = NArray.int(2, 2, 16)
possible_points.shape[0].times do |i|
  possible_points[i, 0, true] = point[i, 0]
end 
```

这会创建一个看起来像的 NArray

```
[ [ [ 4, 9 ],
    [ 0, 0 ] ],
  [ [ 4, 9 ],
    [ 0, 0 ] ],
    ... 
```

在最后一个维度中的所有 16 个元素。

然而，我想要的是这样的：

```
possible_points[true, 0, true] = point[true, 0] 
```

这种迭代有点违背了数值向量库的目的。它也是两行代码而不是一行。

本质上，第一个示例（有效的示例）让我在大小为 1,n 的 NArray 上分配一个数字。第二个示例（不工作的示例）返回一个错误，因为我试图将大小为 2 的 NArray 分配给大小为 2,n 的位置。

任何人都知道我怎样才能避免这样的迭代？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T01:17:00.640

```
point = NArray[[4, 9], [1, 1]]
=> NArray.int(2,2): 
[ [ 4, 9 ], 
  [ 1, 1 ] ]

possible_points = NArray.int(2, 2, 16)

possible_points[true,0,true] = point[true,0].newdim(1)

possible_points
=> NArray.int(2,2,16): 
[ [ [ 4, 9 ], 
    [ 0, 0 ] ], 
  [ [ 4, 9 ], 
    [ 0, 0 ] ], 
  [ [ 4, 9 ], 
    [ 0, 0 ] ], 
  [ [ 4, 9 ], 
    [ 0, 0 ] ], 
  [ [ 4, 9 ], 
    [ 0, 0 ] ], 
 ... 
```

要将 shape-N narray 存储到 shape-NxM narray，请将 shape=[N] 转换为 shape=[N,1]。在 shape=[N,M] 和 shape=[N,1] 之间的操作中，重复使用 size=1 轴的元素。这是 NArray 的一般规则，也适用于算术运算。

# ios - 从 UIAlertView 中的 UITextField 获取文本以设置标签的文本

> ID：15992064
> 
> 赞同：0
> 
> 时间：2013-04-13T19:37:49.210
> 
> 标签：ios, objective-c

我有一个用于创建计时器的标签。我在它下面还有 2 个按钮，最常用的启动和停止。当我按下开始按钮时，会出现一个警报，并且警报中有一个文本字段。一切正常，但是当我单击警报“开始计时器”中的按钮时，我希望标签将我在文本字段中设置的数字作为计时器，然后倒计时。谁能帮我解决这个问题。我搜索了谷歌，甚至多次尝试使用 label.text = [textField.text intValue] 和所有类似的东西。提前致谢

```
- (NSString*)getTimeStr : (int) time {
seconds = time % 60;
minutes = time / 60;
return [NSString stringWithFormat:@"%02d:%02d", minutes, seconds];
}

- (IBAction)startTimer{
    // having the user enter a number in seconds
UIAlertView *inputAlert = [[UIAlertView alloc] 
                       initWithTitle:@"Enter The Time:"
               message:@"Enter your time in seconds\n"
                   delegate:self
                   cancelButtonTitle:@"Cancel"
                   otherButtonTitles:@"Start Timer", nil];

UITextField *inputField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
inputField.backgroundColor = [UIColor whiteColor];
[inputAlert addSubview:inputField];
[inputAlert setTag:1];
[inputAlert show];

NSInteger buttonIndex;

if([inputAlert tag] == 1) {
    if(buttonIndex == 1) {
        clicked = TRUE;
        mainTimer = [NSTimer scheduledTimerWithTimeInterval:1 
                                                     target:self 
                                                   selector:@selector(startTimer) 
                                                   userInfo:nil 
                                                    repeats:YES];
    }
    if(buttonIndex == 0) {
        clicked = FALSE;
        [inputAlert dismissWithClickedButtonIndex:0 animated:YES];
    }
} 

//NSString *intFromTextField = [inputField text];
//int time = [intFromTextField intValue];
timeLabel.text = [self getTimeStr:(int)inputField.text];
[timeLabel setFont:[UIFont fontWithName:@"Courier New" size:140]]; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:01:41.503

好的，所以，这里有两件大事：

首先，您应该将[`alertViewStyle`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/occ/instp/UIAlertView/alertViewStyle)属性设置为[`UIAlertViewStylePlainTextInput`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/doc/c_ref/UIAlertViewStyle)，而不是将您自己的文本字段添加到警报视图。

第二件事是您没有正确地将字符串转换为整数。嗯，你是，但是，由于某种原因它被注释掉了。你不能只是施放它。如果你这样做，你会得到对象的内存地址，而不是值。你会想要调用[`integerValue`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/integerValue)字符串。

因此，您将拥有类似于以下内容的内容，其中您使用[`UIAlertViewDelegate`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html#//apple_ref/occ/intf/UIAlertViewDelegate)回调并通过该[`textFieldAtIndex:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/occ/instm/UIAlertView/textFieldAtIndex%3a)方法访问文本字段：

```
- (void) alertView:(UIAlertView *) alertView clickedButtonAtIndex:(NSInteger) buttonIndex {
    // Your existing timer code. It's pretty okay as it is.

    NSUInteger enteredInteger = [[alertView textFieldAtIndex:0].text integerValue];
    myLabel.text = [self getTimeStr:enteredInteger];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:02:30.163

首先，不能将 label.text 设置为 intValue，因为 label.text 需要一个 NSString 的实例。所以不需要添加 .intValue;

您是否将 UITextField 添加为 UIAlertView 的子视图？如果是，则尝试使用一些标签添加它：

```
[youtTextField setTag:777];
[yourAlertView addSubview:yourTextField] 
// you can access yourTextField as a subview with tag = 777 
```

如果你使用 UIAlertView 你必须设置它的委托： [yourAlertView setDelegate:self]; UIAlertView 的委托必须符合 UIAlertViewDelegate 协议，因此在 viewController 的 .h 文件中添加：

```
@interface yourViewController : UIViewController <UIAlertViewDelegate> 
```

为了符合该协议，您必须在 ViewController 中实现以下方法：

```
// this method is called when user taps one of AlertView's buttons
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex   
{
    // as I told, you have to have yourAlertView and timeLabel as class variables
    NSString *button=[yourAlertView buttonTitleAtIndex:buttonIndex];
    if([buttonTitle isEqualToString:@"Start Timer"]) 
    {
            NSString * timeValue = ((UITextField*)[yourAlertView viewWithTag:777]).text;
            [timeLabel setText:timeValue] // set text for your label
            [timeLabel setFont:[UIFont fontWithName:@"Courier New" size:140]];
    }
} 
```

另外，不要忘记将 timeLabel 和 alertView 设置为类变量：

```
@interface yourViewController : UIViewController <UIAlertViewDelegate>
{
    UIAlertView * yourAlertView;
    UILabel * timeLabel;
} 
```

// 对您的 startTimer: 选择器进行一些编辑：

```
- (IBAction)startTimer{
// having the user enter a number in seconds
    UIAlertView *inputAlert = [[UIAlertView alloc] 
                   initWithTitle:@"Enter The Time:"
           message:@"Enter your time in seconds\n"
               delegate:self
               cancelButtonTitle:@"Cancel"
               otherButtonTitles:@"Start Timer", nil];

    UITextField *inputField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
    [inputField setTag:1];
    inputField.backgroundColor = [UIColor whiteColor];
    [inputAlert addSubview:inputField];
    [inputAlert show];
} 
```

# windows - XNA - 如何显示不同的屏幕？

> ID：15992066
> 
> 赞同：1
> 
> 时间：2013-04-13T19:37:58.943
> 
> 标签：windows, xna, screen, xna-4.0

我是 XNA 的新手。我正在创建一个有 2 个屏幕（主屏幕，游戏屏幕）的游戏，我想要做的是，当用户在主屏幕上按下数字“1”时，屏幕切换到用户开始玩游戏的新屏幕。我无法在 XNA 中找出任何可以帮助我切换屏幕的类。请告诉我该怎么做。

**任何帮助将不胜感激！**

**提前致谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:20:12.300

XNa 并没有真正的“屏幕”概念，它是由开发人员定义的。你说你已经有两个屏幕了，这些单独的 C# 文件有自己的更新和绘图功能吗？

如果是这样，首先从 Game 类调用主屏幕的这些函数。当用户按下按钮时，切换到调用 PlayGame 屏幕上的函数。您可能需要调用其他函数，但如果这是您当前定义场景的方式，这是一般原则。

# java - Java 3D数组：存储立方体，检索立方体切片

> ID：15992076
> 
> 赞同：2
> 
> 时间：2013-04-13T19:38:33.643
> 
> 标签：java, multidimensional-array, slice

当使用一个奇数的立方 3d 数组（3x3x3、5x5x5、7x7x7 等）时，返回该数组的 2d 切片的最有效方法是什么，给定切片的方向轴和一个值用于确定切片沿该轴的相关位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:52:05.783

由于这对我来说是一个非常有趣的话题，所以我也一直在寻找答案。我认为您可能对[Mark Byers](https://stackoverflow.com/questions/4179745/speeding-up-code-3d-array)的方法感到幸运：

Mark 没有将其存储在 3D 数组中，而是在如何使用 1D 数组方面提供了一种非常好的方法。

经过一番尝试，我想出了完整的立方体，希望这适合你：

```
public class Cube {
    int w, h, d;
    int[] cube;

    public Cube(int w, int h, int d) {
        this.w = w;
        this.h = h;
        this.d = d;
        System.out.println("cube: w" + w + ", h" + h + ", d" + d + " = " + (w * h * d));
        cube = new int[w * h * d];
    }

    int getCubeValue(int x, int y, int z) {
        return cube[x * h * d + y * d + z];
    }

    void setCubeValue(int x, int y, int z, int value) {
        System.out.println("value " + (x * h * d + y * d + z) + ": x" + x + ", y" + y + ", z" + z + " = " + value);
        cube[x * h * d + y * d + z] = value;
    }

    int[] xSlice(int x) {
        int[] slice = new int[h * d];
        for(int y = 0; y < h; y++) {
                for(int z = 0; z < d; z++) {
                        slice[y * d + z] = getCubeValue(x, y, z);
                }
        }
        return slice;
    }

    int xSliceValue(int[] slice, int y, int z) {
        return slice[y * d + z];
    }

    int[] ySlice(int y) {
        int[] slice = new int[d * w];
        for(int z = 0; z < d; z++) {
                for(int x = 0; x < w; x++) {
                        slice[z * w + x] = getCubeValue(x, y, z);
                }
        }
        return slice;
    }

    int ySliceValue(int[] slice, int x, int z) {
        return slice[z * w + x];
    }

    int[] zSlice(int z) {
        int[] slice = new int[w * h];
        for(int x = 0; x < w; x++) {
            for(int y = 0; y < h; y++) {
                slice[x * h + y] = getCubeValue(x, y, z);
            }
        }
        return slice;
    }

    int zSliceValue(int[] slice, int x, int y) {
        return slice[x * h + y];
    }
} 
```

假设你像这样制作一个 Cube `new Cube(3, 3, 3)`，最后一个值将是可接近的，`cube.getCubeValue(2, 2, 2)`因为它从零开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:00:59.417

我认为您可以选择三个选项，具体取决于您希望切片方法的输入和输出是什么：

*   切片作用于原始多维 Java 数组，生成原始多维 Java 数组，例如：

`int[][] ArrayUtils.slice(int[][][] cube, int axis, int sliceIndex)`

*   切片适用于原始多维 Java 数组，生成带有 getter 的对象，例如：

`SomeKindOf2DimArrayClass ArrayUtils.slice(int[][][] cube, int axis, int sliceIndex)`

*   切片使用非原始数组作为输入和输出，并且是此类的一种方法：

`SomeKindOf2DimArrayClass slice(int axis, int sliceIndex)`

就您的界面而言。

实现方面，如果您使用原始数组，那么您别无选择，只能做一些“繁重的工作”——为 siice 构建一个二维数组——至少为第三轴。对于第一个轴，您只需使用 2d 数组中的一个（即`result = Arrays.copyOf(cube[sliceIndex])`，如果您感觉活泼，甚至可以使用参考）；对于第二个轴，你会有类似的东西

```
for(int i=0; i<cube.length; i++) {
    myAllocated2dArray[i] = Arrays.copyOf(cube[i][sliceindex])
} 
```

如果您使用的是一个对象，那么您有很多选择，从我刚才描述的内容到@Aquillo 在[他的回答](https://stackoverflow.com/a/15997301/1593077)中建议的内容，再到使用 getter 方法的原始数组的 O(1) 空间包装器。

[通过阅读C 语言常见问题](http://c-faq.com/index.html)解答中有关类似问题的答案，您可能会获得关于已经建议的两种实现的一些灵感，其中明确使用指针（引用）：

> [将静态和动态分配的多维数组传递给函数时，如何交替使用它们？](http://c-faq.com/aryptr/ary2dfunc3.html)

# google-app-engine - 更新 JDO 嵌入实体字段

> ID：15992079
> 
> 赞同：1
> 
> 时间：2013-04-13T19:38:46.093
> 
> 标签：google-app-engine, jdo

我正在使用 JDO 嵌入式实体。我已经通过[本教程](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses#Embedded_Classes)很好地设置了父实体和子实体。我的问题是我似乎无法让我对子实体所做的更改持续存在。这是我的两门课：

家长：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION)
public class TestEntity {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long id;

    @Persistent
    private String name;

    @Persistent
    @Embedded
    private TestEntitySub sub;

    public TestEntitySub getSub() {
        return sub;
    }

    public void setSub(TestEntitySub sub) {
        this.sub = sub;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

孩子：

```
@PersistenceCapable
@EmbeddedOnly
public class TestEntitySub {
    @Persistent
    private String state;

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }
} 
```

修改代码：

```
PersistenceManager pm = PMF.get().getPersistenceManager();
TestEntity test = pm.getObjectById(TestEntity.class, 75L); //object has id=75
test.getSub().setState("New State");    
pm.makePersistent(test);
pm.close(); 
```

代码运行没有错误，但数据存储显示没有变化。我尝试了各种组合，包括持久化子对象、在父对象中重置子对象的字段等，但均无效。如果我修改父母的`name`而不是孩子的`state`，它就可以了。那么如何修改孩子的字段呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:57:52.077

I'd still love a more legitimate answer, but for anyone else struggling with this, I did find a workaround:

```
PersistenceManager pm = PMF.get().getPersistenceManager();
TestEntity test = pm.getObjectById(TestEntity.class, 75L); //object has id=75
TestEntitySub sub = test.getSub();  //Get the embedded entity
sub = pm.detachCopy(sub);           //Make a detached copy
sub.setState("New State");          //Update it
test.setSub(sub);                   //set it as the new embedded entity
pm.makePersistent(test);            //and persist the parent
pm.close(); 
```

The downside is that the PM has to make a complete copy of your embedded object. I'm assuming there's a better way, so if you know one, please share.

# objective-c - 滑出 NSWindow？还是NSView？

> ID：15992080
> 
> 赞同：-1
> 
> 时间：2013-04-13T19:38:55.707
> 
> 标签：objective-c, macos, cocoa

我想知道 Found mac 应用程序如何能够生成其菜单栏应用程序的滑出窗口。有人知道我可以从哪里开始寻找它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:33:02.390

既然你提到了菜单栏，我假设窗口在弹出窗口中。如果是这样，[`NSPopover`](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSPopover_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40010720)在[`NSPopoverDelegate`](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSPopoverDelegate_Protocol/Reference/Reference.html). 在这些委托方法中，您会发现[`-detachableWindowForPopover:`](https://developer.apple.com/library/mac/documentation/AppKit/Reference/NSPopoverDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSPopoverDelegate/detachableWindowForPopover%3a).

# javascript - 带有输入字段的 HTML 选择下拉菜单

> ID：15992085
> 
> 赞同：49
> 
> 时间：2013-04-13T19:39:13.027
> 
> 标签：javascript, jquery, html

如何使用文本输入选项在 HTML 中实现选择样式的下拉菜单？

这个想法是某人可以从预定义选项列表中进行选择，或者输入他们自己的选项。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2015-04-20T17:58:47.120

您可以使用带有“list”属性的输入文本，它指的是值的数据列表。

```
<input type="text" name="city" list="cityname">
    <datalist id="cityname">
      <option value="Boston">
      <option value="Cambridge">
    </datalist>
```

这将创建一个自由文本输入字段，该字段还具有用于选择预定义选项的下拉菜单。归属示例和更多信息：[https ://www.w3.org/wiki/HTML/Elements/datalist](https://www.w3.org/wiki/HTML/Elements/datalist)

# java - 处理异常 Java

> ID：15992090
> 
> 赞同：0
> 
> 时间：2013-04-13T19:39:55.960
> 
> 标签：java, minecraft

我正在尝试制作一个与我的 Minecraft 客户端通信并且运行良好的聊天服务器，但我无法让客户端与服务器一起工作。这是客户端

```
public class ClientChatHandler {
    public static ObjectOutputStream output;
    public static ObjectInputStream input;
    public static String message = "";
    public static String serverIP = "localhost";
    public static Socket connection;
}

public ClientChatHandler(String host){
    serverIP = host;
}

public static void startRunning(){
    try{
        connectToServer();
        setupStreams();
        whileChatting();
    } catch(EOFException eofException){
        Minecraft.getMinecraft().thePlayer.addChatMessage(Variables.color  + "\247a[Server] Client terminated the connection.");
    } catch(IOException ioException){
        ioException.printStackTrace();
    }
}

public static void connectToServer() throws IOException{
    Minecraft.getMinecraft().thePlayer.addChatMessage(Variables.color + "\247a[Server] Attempting to connect.");
    connection = new Socket(InetAddress.getByName(serverIP), 1337);
    Minecraft.getMinecraft().thePlayer.addChatMessage(Variables.color + "\247a[Server]         Connected to server.");
}

public static void setupStreams() throws IOException{
    try{
        output = new ObjectOutputStream(connection.getOutputStream());
        output.flush();
        input = new ObjectInputStream(connection.getInputStream()); 
    } catch(NullPointerException  Exception){
        Minecraft.getMinecraft().thePlayer.addChatMessage(Variables.color   + "\247a[Server] Error creating streams. Closing connection");
    } catch(IOException ioException){
        Minecraft.getMinecraft().thePlayer.addChatMessage(Variables.color  + "\247a[Server] Error creating streams. Closing connection");
    }   
}

public static void whileChatting() throws IOException{
    do{
        try{
            message = (String) input.readObject();
            Minecraft.getMinecraft().thePlayer.addChatMessage(Variables.color  + message);
        }catch(ClassNotFoundException classNotFoundException){
            Minecraft.getMinecraft().thePlayer.addChatMessage(Variables.color  + "\247a[Server]  \2474ERROR! Connecting, closing sockets.");
        }
    }while(!message.equals("server - end"));
}

public static void closeCrap(){
    Minecraft.getMinecraft().thePlayer.addChatMessage(Variables.color  +  "\247a[Server] Closing connection");
    try{
        output.close();
        input.close();
        connection.close();
    }catch(IOException ioException){
        ioException.printStackTrace();
    }
}

public static void sendMessage(String message){
    try{
        output.writeObject(message);
        output.flush();
        Minecraft.getMinecraft().thePlayer.addChatMessage(Variables.color +   message);
    } catch(IOException ioException){
    }
}

public static void showMessage(final String message){
    Minecraft.getMinecraft().thePlayer.addChatMessage(Methods.getLetterColor(Variables.ChatName Color) + Minecraft.getMinecraft().thePlayer.username + "\2477:\247f " + message);
} 
```

现在我不断得到`java.lang.NullPointerException`这个：

```
output = new ObjectOutputStream(connection.getOutputStream());
output.flush();
input = new ObjectInputStream(connection.getInputStream()); 
```

我该如何解决这个问题？

抱歉信息不足，但我的世界崩溃了，我从上面的代码中得到一个空指针异常。

这是一些文字：

```
 java.lang.NullPointerException
at net.minecraft.src.ClientChatHandler.whileChatting(ClientChatHandler.Java:79)
at org.renivivious.GuiConsole.mouseClicked(GuiConsole.java:671)
at net.minecraft.src.GuiScreen.handleMouseInput(GuiScreen.java:198)
at org.renivivious.GuiConsole.handleMouseInput(GuiConsole.java:356)
at net.minecraft.src.GuiScreen.handleInput(GuiScreen.java:172)
at net.minecraft.client.Minecraft.runTick(Minecraft.java:1394)
at net.minecraft.client.Minecraft.runGameLoop(Minecraft.java:731)
at net.minecraft.client.Minecraft.run(Minecraft.java:656)
at java.lang.Thread.run(Unknown Source)
--- END ERROR REPORT 8e0635c8 ---------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-03T23:38:20.983

```
public static String serverIP = "localhost";

public ClientChatHandler.....
    serverIP = host; 
```

这是您的错误，您正在初始化变量`serverIP`，但是当您实例化该类时，您使用空字符串加载它。您在构造函数中有 2 个选项

1.  删除变量`host`或
2.  调用构造函数时，作为参数发送`"localhost"`

# try-catch - C++ 程序中未执行的 Catch 块

> ID：15992100
> 
> 赞同：0
> 
> 时间：2013-04-13T19:41:13.460
> 
> 标签：try-catch

我正在运行一个 c++ 程序，其中包含 Snow Leapard 下所有异常的 catch 块。该程序是：

```
#include <iostream>

using namespace std;

const int DefaultSize = 10;

int main()
{
   int top = 90;
   int bottom = 0;

   try
   {
      cout << "top / 2 = " << (top/ 2) << endl;

      cout << "top divided by bottom = ";
      cout << (top / bottom) << endl;

      cout << "top / 3 = " << (top/ 3) << endl;
   }
   catch(...)
   {
      cout << "something has gone wrong!" << endl;
   }

   cout << "Done." << endl;
   return 0;
} 
```

我正在使用 g++ 版本 i686-apple-darwin10-g++-4.2.1 编译程序：g++ -o test test.cpp。catch 块没有执行。输出为：“top / 2 = 45 浮点异常”。没有错误消息或完成打印。输出与不存在 try-catch 块时完全相同。有人能告诉我为什么 catch 没有执行吗？我已经让用户定义的异常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:50:25.913

c++ 中没有默认的零除错误。因此，您需要检查底部值是否为 0

```
try{
    if(bottom==0)
         throw bottom; //Or any integer
   }

catch(int x)
{
     cout<<"Something has gone wrong";
} 
```

# php - php系统函数给出异常输出

> ID：15992101
> 
> 赞同：1
> 
> 时间：2013-04-13T19:41:20.453
> 
> 标签：php, command

我的PHP代码

```
$last_line = system('service airtime-media-monitor status');
echo $last_line; 
```

我的浏览器显示

```
 AIRTIME_STATUS_URL             = [1;32mhttp://localhost:80/api/status/format/json/api_key/%%api_key%%[0m
AIRTIME_SERVER_RESPONDING      = [1;32mOK[0m
KERNEL_VERSION                 = [1;32m2.6.32-21-generic[0m
MACHINE_ARCHITECTURE           = [1;32mi686[0m
TOTAL_MEMORY_MBYTES            = [1;32m2051244[0m
TOTAL_SWAP_MBYTES              = [1;32mUNKNOWN[0m
AIRTIME_VERSION                = [1;32m2.3.1[0m
OS                             = [1;32mUbuntu 10.04 LTS i686[0m
CPU                            = [1;32mIntel(R) Core(TM)2 Duo CPU     E8400  @ 3.00GHz[0m
WEB_SERVER                     = [1;32mApache/2.2.14 (Ubuntu)[0m
PLAYOUT_ENGINE_PROCESS_ID      = [1;32m1195[0m
PLAYOUT_ENGINE_RUNNING_SECONDS = [1;32m121517[0m
PLAYOUT_ENGINE_MEM_PERC        = [1;32m0.5%[0m
PLAYOUT_ENGINE_CPU_PERC        = [1;32m0.4%[0m
LIQUIDSOAP_PROCESS_ID          = [1;32m4362[0m
LIQUIDSOAP_RUNNING_SECONDS     = [1;32m4564[0m
LIQUIDSOAP_MEM_PERC            = [1;32m0.7%[0m
LIQUIDSOAP_CPU_PERC            = [1;32m11.4%[0m
MEDIA_MONITOR_PROCESS_ID       = [1;32m1489[0m
MEDIA_MONITOR_RUNNING_SECONDS  = [1;32m121509[0m
MEDIA_MONITOR_MEM_PERC         = [1;32m0.5%[0m
MEDIA_MONITOR_CPU_PERC         = [1;32m0.0%[0m
-- Your installation of Airtime looks OK!
-- Your installation of Airtime looks OK!null 
```

这就是命令实际显示的方式

```
AIRTIME_STATUS_URL             = http://localhost:80/api/status/format/json/api_key/%%api_key%%                                        
AIRTIME_SERVER_RESPONDING      = OK
KERNEL_VERSION                 = 2.6.32-21-generic
MACHINE_ARCHITECTURE           = i686
TOTAL_MEMORY_MBYTES            = 2051244
TOTAL_SWAP_MBYTES              = UNKNOWN
AIRTIME_VERSION                = 2.3.1
OS                             = Ubuntu 10.04 LTS i686
CPU                            = Intel(R) Core(TM)2 Duo CPU     E8400  @ 3.00GHz
WEB_SERVER                     = Apache/2.2.14 (Ubuntu)
PLAYOUT_ENGINE_PROCESS_ID      = 1195
PLAYOUT_ENGINE_RUNNING_SECONDS = 121187
PLAYOUT_ENGINE_MEM_PERC        = 0.5%
PLAYOUT_ENGINE_CPU_PERC        = 0.0%
LIQUIDSOAP_PROCESS_ID          = 4362
LIQUIDSOAP_RUNNING_SECONDS     = 4234
LIQUIDSOAP_MEM_PERC            = 0.7%
LIQUIDSOAP_CPU_PERC            = 11.4%
MEDIA_MONITOR_PROCESS_ID       = 1489
MEDIA_MONITOR_RUNNING_SECONDS  = 121179
MEDIA_MONITOR_MEM_PERC         = 0.5%
MEDIA_MONITOR_CPU_PERC         = 0.0%
-- Your installation of Airtime looks OK! 
```

问题：那么系统函数有什么问题，其余的值来自哪里，因为我期望 Web 浏览器回显，如我的命令所示，以及如何解决它

PS：请注意，我运行 PHP 页面和命令时相隔几秒钟，所以值有点偏离

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T19:47:05.400

这些是[ascii 颜色代码](http://en.wikipedia.org/wiki/ANSI_escape_code#Colors)，`service`似乎无法检测到呼叫终端是否支持它们。~~您可以尝试使用 echo 摆脱它们~~. 您可以尝试[像这样的 sed 片段](http://www.commandlinefu.com/commands/view/3584/remove-color-codes-special-characters-with-sed)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T19:51:32.053

您的程序使用外壳颜色。`[1;32m`由您的 shell 使用，但不是逐字输出。请参阅：[https ://unix.stackexchange.com/questions/43408/printing-colored-text-using-echo](https://unix.stackexchange.com/questions/43408/printing-colored-text-using-echo)

# php - 只执行一次 cronjob

> ID：15992102
> 
> 赞同：1
> 
> 时间：2013-04-13T19:41:25.303
> 
> 标签：php, mysql

我有一个 cronjob 循环并逐行更新 MySQL 表。表“完成”后，我想再执行 1 次 cronjob，以执行各种清理活动。有没有办法在 MySQL 表中存储一段元数据，以便我可以设置一个值来测试后续 cron 循环以强制退出？

现在我有：

```
if (count($records)==0) {  // table completed
    $result = $this->mlist_model->updatelist();  // EXECUTE EXACTLY ONCE

    // SET SOME SORT OF FLAG HERE TO TEST FOR AND EXIT
    exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:44:13.853

All you need is the [at](http://linux.die.net/man/1/at) command

# java - 比较字符

> ID：15992110
> 
> 赞同：2
> 
> 时间：2013-04-13T19:42:44.313
> 
> 标签：java

假设我有以下代码：

```
String myString = "Hello";
char firstChar = myString.charAt(0); 
```

然后我想检查 firstChar 是否具有值“B”。我试过了

```
if(myChar == "b") 
```

和

```
if(myChar.equals("b")) 
```

但这些都不起作用。

我可以使用什么解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T19:43:52.910

`"b"` is not char but string to compare char you should write `if(myChar == 'b')`

Note:

```
5   means number 
'5' means char 
"5" means string 
```

all are different datatypes.

read: [How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

`==` compares reference equality. and `.equals()` tests for value equality.

read also this to check for upper or lower char: [Find if first character in a string is upper case, Java](https://stackoverflow.com/questions/4452939/find-if-first-character-in-a-string-is-upper-case-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:43:38.277

Use 'B'. Java is case sensitieve, and you neer to compare a `char` instead of `String`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T19:45:12.327

You need to use the char literal by ':

```
if(myChar == 'b') 
```

quotes(") represent strings. apostrophes(') represent characters

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T19:46:12.737

Characters work differently than `String`. You can't call methods on them, but you *can* compare them using `==`.

If you want to compare either case, then you can use this:

```
if(myChar == 'b' || myChar == 'B') 
```

# sdl - 无法读取键盘输入 (SDL_GetKeyState)

> ID：15992111
> 
> 赞同：0
> 
> 时间：2013-04-13T19:42:44.333
> 
> 标签：sdl

我想使用 SDL 检查是否按下了某个键。我不工作。也尝试使用事件，但没有触发 SDL_KEYDOWN 事件。Visual C++ 2010 速成版，Windows7。也许我设置了 SDL 或项目错误？我怎么会知道？

```
SDL_PumpEvents();
Uint8 *keys = SDL_GetKeyState(NULL);
if (keys[SDLK_RIGHT]) {         
    this->player.xf+=2.0f;      // never reached
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T21:01:49.433

如[文档](http://sdl.beuc.net/sdl.wiki/SDL_GetKeyState) `SDL_GetKeyState()`中所述，每个指针只能调用一次。

`Uint8 *keys = SDL_GetKeyState(NULL);`分配内存（！）并返回指向数组的指针。该数组在整个程序持续时间内有效，不应被释放。

一旦调用了这个，你就有了指向你的数组的指针，你可以用它来检查键的状态
`keys[ SDLK_anykey ]`。

如果你想更新你的`keys`数组，你只需调用`SDL_PumpEvents();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-08T07:01:40.517

我知道这很旧，但如果它有一个正确的答案，我会因为我犯的同样简单的错误而为我节省几个小时。

`SDL_GetKeyState(NULL)`将 const 指针数组返回到***SCAN CODES列表***

`if (keys[SDLK_RIGHT])`在上面的 OP 代码中是**KEYCODE**。

```
SDL_SCANCODE_RIGHT = 79 
```

`SDLK_RIGHT = SDL_SCANCODE_TO_KEYCODE(SDL_SCANCODE_RIGHT)`//这超出了我的系统范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:28:46.220

Usually `SDL_PollEvent` handles pulling the keystate, wich ultimately calls `SDL_PumpEvents()`.

It is true that you don't need to create a new pointer every loop itteration but your code should work just fine anyway. You would need to provide some additional details if we are to find the "source" of the problem.

# javascript - 如何简化如何在 javascript 中获取汇率？

> ID：15992118
> 
> 赞同：0
> 
> 时间：2013-04-13T19:43:20.400
> 
> 标签：javascript, optimization, currency-exchange-rates

我在 javascript 中编写了两个互补函数来获取汇率（基于[此处](https://gist.github.com/henrik/265014/revisions "这里")找到的代码），但我不明白为什么它不能只在一个函数中。这是工作的代码：

```
var money;
function showRate() {
    getRate('EUR','USD');
    alert(money);
}
function getRate(from, to) {
    var script = document.createElement('script');
    script.setAttribute('src', "http://rate-exchange.appspot.com/currency?from="+from+"&to="+to+"&format=json&callback=sendRate");
    document.body.appendChild(script);
}

function sendRate(data) {
    money = parseFloat(data.rate, 10);
} 
```

代码是对源代码的修改，我理解代码但不理解行`document.body.appendChild(script);`。

但我的问题是：为什么我要做两个单独的函数（`getRate`和`sendRate`）？我已经尝试了很多东西，但类似的东西不起作用：

```
function showRate() {
    alert(getAndSendRate('EUR','USD'));
}
function getAndSendRate(from, to) {
    var script = document.createElement('script');
    script.setAttribute('src', "http://rate-exchange.appspot.com/currency?from="+from+"&to="+to+"&format=json");
    return(parseFloat(document.body.appendChild(script).data.rate, 10));
} 
```

有人可以解释一下为什么代码的第二部分不起作用以及是否可以修复？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:59:19.353

这称为 JSONP。来自 Javascript 的“安全”跨域通信需要此设置。

您正在做的是`<script>`在页面上放置一个标签。该标签有一个`src`属性，您正在提供一个查询字符串（`?`字符之后的所有内容）。只要您使用`appendChild`，浏览器就会请求从该 URL 获取脚本。

该服务器接收请求、处理您的查询字符串并返回内容。内容格式如下：

```
sendRate({
    rate: "whatever"
}); 
```

这是一个函数调用。这是因为您`callback`在查询字符串中将 指定为“sendRate”。该转换服务获取并使用了该值。

所以它期望在你的脚本中有一个名为 的函数`sendRate`，并且应该有一个参数。

您无法组合您的功能，因为您不知道请求脚本何时完成处理。这是附加脚本的异步行为。一旦它准备好，它的脚本就会执行并调用我上面指定的函数。

这都是必需的，因为这是您与跨域服务器通信的唯一方式，反之亦然。浏览器唯一可以接受跨域的是 Javascript 代码。这就像您想在您的页面上包含来自 jQuery 网站或 Google 的 CDN 的 Javascript 文件一样。你会使用：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

除非在这种情况下，关键是向您的浏览器提供一个库。从技术上讲，它做同样的事情 - 它只是执行 Javascript 代码。在这种情况下，它只会更改`window`，而不是调用函数。里面的内容恰好是静态的。

在使用 JSONP 时，您可以指定“回调”并将其他查询字符串值传递给它，它允许您准确地个性化应该处理的内容，然后返回一个专门为您的环境设计的函数调用。

# linux - Bash 不支持浮点运算——但为什么我可以使用 BC？

> ID：15992124
> 
> 赞同：0
> 
> 时间：2013-04-13T19:43:51.803
> 
> 标签：linux, bash, unix

我从一段话中读到

> 与大多数编程语言不同，BASH 没有内置的浮点数学（但是它确实有内置的整数数学）。

但是，我仍然可以

```
echo "5.0>5.9" | bc -l
0

echo "5.0+5.9" | bc -l
10.9 
```

这些是浮点数；为什么`bc`在这些情况下仍然有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T19:51:56.723

Unix 实用程序`bc`不是`Bash`. 在其`echo`标准输出上产生字符；`bc`接受其标准输入并执行数学运算。`bash`在这种情况下，所做的只是将标准输出与操作员隐含的标准输入串在一起 `|`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T19:52:58.583

表达式`5.0>5.9`和`5.0+5.9`被发送到`bc`，这是一个独立的程序。

# asp.net-mvc - MVC 3 How to create a controller's custrom access attribute?

> ID：15992126
> 
> 赞同：0
> 
> 时间：2013-04-13T19:43:54.697
> 
> 标签：asp.net-mvc

in my application (MVC 3), I have a few types of users, and here's the typical - I guess - scenario: I want to restrict the access to some controllers for some of them, and also some of them can have access to the specified controller but not for all actions. I'm looking for some tips or articles how to create that scenario. Thanks for any ideas !

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:45:27.467

You want to look into the [AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx). You can also find more info [here](http://weblogs.asp.net/jgalloway/archive/2011/04/28/looking-at-how-asp-net-mvc-authorize-interacts-with-asp-net-forms-authorization.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:32:04.897

要限制用户执行所有操作，请在整个控制器上使用 AuthorizeAttribute。但是，如果您想将用户限制为某些选定的操作，请在所需操作上使用 AuthorizeAttribute（而不是在整个控制器上）。同样，您还可以使用角色将经过身份验证的用户限制为某些控制器或操作方法。例子：

```
[AuthorizeAttribute(Roles = "Employee")] 
```

# android - 移动文件的Android脚本？

> ID：15992133
> 
> 赞同：1
> 
> 时间：2013-04-13T19:44:31.697
> 
> 标签：android, sh

我正在尝试创建一个简单的脚本，它将在我的 Nexus 7 上移动文件。它是 Android 4.2.2 库存。我所做的是我试图创建一个`test.sh`包含以下内容的脚本：

```
#!/system/bin/sh

su
cp -r /folder/* /mnt/sdcard/dcim/camera 
```

尝试使用从命令行运行此脚本时`sh ./test.sh`，出现以下错误：

```
: not foundsh[2]:
: not foundsh[3]: su
cp: /folder/*: Permission denied 
```

我已经放置`test.sh`在我的 Nexus 7 的根文件夹中，里面肯定有一个`/system/bin`文件夹`sh`。该`cp`命令在`su`输入后也可以正常工作，因此问题肯定是让脚本正确运行。谁能帮我解决可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:55:24.337

改成`test.sh`这样就可以了：

```
#!/system/bin/sh
su -c 'cp -r /folder/* /mnt/sdcard/dcim/camera'; 
```

似乎`su`打开一个新的 shell 对于传递其他命令很麻烦，并且脚本中的换行符`test.sh`也会导致问题。

# java - 如何判断我的 android 应用程序正在使用哪些库？

> ID：15992134
> 
> 赞同：1
> 
> 时间：2013-04-13T19:44:36.243
> 
> 标签：java, android

我似乎无法在其他任何地方找到我的问题的答案，所以也许它并不像我期望的那样直截了当......

有什么方法可以找出我的 Android 应用程序正在使用哪些库？它可能使用 Delvik VM，但我如何知道我使用的是 Media Framework 库、WebKit 还是其他类似的东西？

听起来像是一个不必要的问题，但我需要写一篇关于我开发的应用程序的论文，这些信息会很有帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:12:26.017

如果您使用外部库，这些库将包含在您的 /libs 文件夹中。所以你会知道你包含了哪些库。

如果启用 proguard，则该工具会删除未使用的类、字段和方法。ProGuard 工具通过删除未使用的代码并用语义模糊的名称重命名类、字段和方法来缩小、优化和混淆您的代码。结果是一个较小的 .apk 文件，更难以逆向工程。因此，并非库中的所有类都被使用。如果启用了 proguard，那些未使用的类将被删除。

您的应用程序将 android.jar 作为引用库。它不包含在 .apk 文件中。您可以解压缩 .apk 并查看内容。

**这些 android.* 类不属于您的 APK 文件，因此不受 ProGuard 影响。真正的类在运行时已经在您的进程中，由固件放置在那里。**.

![在此处输入图像描述](https://i.stack.imgur.com/VJkZX.png)

所以你可以去你的AndroidSDK。转到平台。打开一个文件夹，说 android-16（对于 api 版本 16）。你会看到 android.jar。您可以解压缩jar文件并查看其下的文件。

打开 android 文件夹，您将是数据库、媒体、webkit 等。

你应该看看这个链接。[http://developer.android.com/about/versions/index.html](http://developer.android.com/about/versions/index.html)

开发人员可以完全访问核心应用程序使用的相同框架 API。

我们在最顶层开发应用程序。假设您要将数据存储到数据库，那么您的应用程序将使用 sqlite 来存储数据。

SQLite - 适用于所有应用程序的强大且轻量级的关系数据库引擎。

其他图书馆也一样。所以这取决于你的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:48:34.813

一般来说，这取决于您的应用程序。Android 包含来自许多来源的程序代码。正如您已经知道的，例如 Webkit，还有来自 Apache 项目或 json.org 的许多不同的类。

我想说只是记录您使用 Android SDK。专家应该知道包括什么。

# ruby - Ruby 正则表达式匹配输入文本文件字符串中的一行

> ID：15992136
> 
> 赞同：2
> 
> 时间：2013-04-13T19:45:01.390
> 
> 标签：ruby, regex, gsub

例如，我需要匹配输入的文本文件字符串中的一行，并用一个字符包装捕获的行。

例如想象一个这样的文本文件：

```
test
foo
test
bar 
```

我想使用 gsub 来输出：

```
XtestX
XfooX
XtestX
XbarX 
```

我在匹配一条线时遇到了麻烦。我尝试使用以 ^ 开头并以 $ 结尾的正则表达式，但它似乎不起作用？有任何想法吗？

我有一个文本文件，其中包含以下内容：

```
test
foo
test
bag 
```

文本文件正在作为命令行参数读入。

所以我得到了（例如只是试图包装测试）

```
string = IO.read(ARGV[0])
string = string.gsub(/^(test)$/,'X\1X')

puts string 
```

它输出与文本文件中完全相同的内容。

我试过了

```
string = string.gsub(/^(.*)$/, 'X\1X') 
```

这输出：

```
Xtest
Xfoo
Xtest
Xbar 
```

...为什么？

好的，所以我退格了文本文件的最后一行，现在我得到了这个......

```
Xtest
Xfoo
Xbar
XtestX 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:27:57.240

```
string = "test\r\nfoo\r\ntest\r\nbar"
string = string.gsub(/^test(?=\r?\n)/, 'X\&X').delete(?\r)
puts string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:24:31.147

它适用于我手机上的 Ruboto IRB。您能否制作一个独立的单行示例并发布它？不需要文件 IO。你用什么红宝石版本？

我怀疑你的程序只是有一个错字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T20:34:18.563

问题是由于dos行尾（\r\n），所以为了摆脱这个，有一个`flip`命令（在MAC中，如果我是正确的）将dos行尾转换为mac行尾（\r）。搜索它并将 dos 行结尾转换为 mac 行结尾，然后再使用该文本文件。

# intuit-partner-platform - Cannot retrieve company preferences

> ID：15992137
> 
> 赞同：0
> 
> 时间：2013-04-13T19:45:02.757
> 
> 标签：intuit-partner-platform

How can I fetch company preferences?

The [API documentation page](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/Preference) for retrieving preferences is buggy. The entire content of the "Sample Retrieve Request XML" section is:

```
&nbsp;&nbsp; &lt;/IntuitRequest&gt; 
```

Simple posts and gets to the documented URI do not work:

```
HTTP Status 404 - Null subresource for path: https://services.intuit.com/sb/preferences/v2/561234567
The requested resource (Null subresource for path: https://services.intuit.com/sb/preferences/v2/561234567) is not available.

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:33:56.970

端点应该是偏好而不是偏好* *s* *。

https://services.intuit.com/sb/preference/v2/[[realmId]]

您可以发送 GET 请求或带有空正文的 POST。我将研究文档问题。

您还可以在 API Explorer 中测试调用：http: [//apiexplorer.developer.intuit.com/V2QBD#api](http://apiexplorer.developer.intuit.com/V2QBD#api)

# java - 在 biginteger 上使用 java 默认二进制搜索

> ID：15992138
> 
> 赞同：1
> 
> 时间：2013-04-13T19:45:03.653
> 
> 标签：java, arrays, biginteger, binary-search

我在数组上使用了[binarySearch](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)`BigInteger`，我用几个数字进行了测试，似乎工作正常。所以我假设我不需要实现/覆盖任何方法（例如比较器）就可以正常工作？

我正在使用以下方法：

```
static int  binarySearch(Object[] a, Object key) 
//Searches the specified array for the specified object using the binary search algorithm. 
```

像这样：

```
int i = Arrays.binarySearch(arrayOfBigIntsPreDefined,new BigInteger("1111111111111111")); 
```

如果有更好/合适/众所周知的方法，也请提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T19:47:12.300

`BigInteger`已经实现`Comparable<BigInteger>`，因此无需传入您自己的`Comparator`（除非您出于某种原因决定重新定义如何`BigInteger`比较两者）。

# javascript - 如何根据 DOM 元素创建多维数组？

> ID：15992140
> 
> 赞同：0
> 
> 时间：2013-04-13T19:45:13.593
> 
> 标签：javascript, multidimensional-array

我有一个表单，我需要创建一个基于 DOM 元素的多维数组，用户可以通过单击按钮多次生成该数组。

```
var dimention = $(".stations").length; 
```

这就是获取`<div class="stations">...</div>"`页面上元素数量的方法，基于这个数字我需要创建一个数组。

我目前手动定义`var stations = [[],[],[],[],[]];`了 5 个，但我需要动态执行此操作，以防用户想要创建超过 5 个。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:48:08.287

在这种情况下，您可以只创建一个数组，并将其设置为必要的长度，然后使数组中的每个部分成为其自身的数组。就像是：

```
var stations = new Array(dimension);
// Create an array of size dimension.
for (var i = 0; i < stations.length; i++) {
    // At each point in the array, assign a new array object.
    stations[i] = new Array(20);
} 
```

# ruby-on-rails - factory girl create error

> ID：15992141
> 
> 赞同：1
> 
> 时间：2013-04-13T19:45:14.560
> 
> 标签：ruby-on-rails, rspec, factory-bot

**company_factory.rb**

```
Factory.define :company, :class => Company do |c|
      c.company_name 'companyname'
      c.address 'companyadress'
      c.phone '012323232'
      c.company_prize_ratio 10
      c.partner_prize_ratio 10
      c.bank_name 'bankname'
      c.iban 'iban'
      c.sequence(:company_password ) {|n| "company_password_#{n}"}
    end 
```

**partner_factory.rb**

```
Factory.define :partner, :class => Partner do |i|
  i.association :company, :factory => :company
  i.email 'partner@mail.com'
  i.password 'partnerpassword'
  i.partner_name 'partnername'
  i.partner_type :nil
end 
```

These are my factory files.When I run `@company = Factory(:company)` this command in pry,it creates company factory but when I run `@partner = Factory(:partner)` I encounter this error

```
ActionView::Template::Error: undefined method `user_type' for #<Partner:0x007fa56d339860> 
```

But there is no user_type attribute in partner model.Do you know why I got this error?

# google-app-engine - Rubis on AppEngine

> ID：15992144
> 
> 赞同：0
> 
> 时间：2013-04-13T19:45:35.120
> 
> 标签：google-app-engine

GoogleAppEngine is a PaaS service and I doubt if it would allow me to setup an environment for Rubis installation. But it is best to verify here, so is it possible to install Rubis ([http://rubis.ow2.org/doc/index.html](http://rubis.ow2.org/doc/index.html)) on GoogleAppEngine?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:27:44.140

我对此表示高度怀疑。Rubis 需要 EBJ、JOnAS 并使用 MySQL。据我所知，您无法使用 GAE 运行任何“持久性”应用程序。对于持久层，您必须使用特定的 API，例如 BigTables。

总而言之，Rubis 可以在 GAE 上运行，但需要大量的移植工作。

# ruby-on-rails - Thin + Nginx + Websockets 配置 | 导轨

> ID：15992145
> 
> 赞同：7
> 
> 时间：2013-04-13T19:45:35.823
> 
> 标签：ruby-on-rails, nginx, websocket, reverse-proxy, thin

我有一个带有 websocket-rails gem 的 Ruby on Rails 3.2 应用程序，在 nginx 反向代理后面的瘦网络服务器中运行。

除了 nginx 反向代理，一切正常。通过删除 nginx 反向代理，websocket 通信工作得很好。（开发和生产）。使用 nginx 作为 websockets 的反向代理是问题开始的地方。

Nginx **1.3.13**及以上版本应该能够支持 websocket 代理。根据[此处](http://nginx.org/en/docs/http/websocket.html)和[此处](https://stackoverflow.com/questions/2419346/can-nginx-be-used-as-a-reverse-proxy-for-a-backend-websocket-server/14976998#14976998)的文档，我创建了以下 nginx 配置：

```
map $http_upgrade $connection_upgrade {
  default upgrade;
  ''      close;
}

upstream ravecy {
  server localhost:3000;
  server localhost:3001;
}

server {
  listen 80;
  server_name test.ravecy.com;

  root /var/www/ravecy.com/public;

  location / {
    try_files $uri @ravecy;
  }

  location @ravecy {
    proxy_pass http://ravecy;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection $connection_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_redirect off;
  }
} 
```

然而，可悲的是，这不起作用。我不完全知道为什么，但在我看来，nginx 没有将我的 websocket 连接尝试作为 websocket 连接处理，而是常规 HTTP 连接，从日志中可以看出：

```
==> production.log <==
Started GET "/chat" for 82.170.121.62 at 2013-04-10 12:20:12 +0200
Processing by ApplicationController#chat as HTML
  Rendered application/chat.html.erb within layouts/frontend (0.2ms)
  Rendered layouts/frontend/_navbar.html.erb (6.3ms)
  Rendered layouts/shared/_alert.html.erb (0.0ms)
  Rendered layouts/frontend/_facebook_sdk.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.4ms)
Started GET "/websocket" for 82.170.121.62 at 2013-04-10 12:20:12 +0200

==> websocket_rails.log <==
I [2013-04-10 12:20:12.744] [ConnectionManager] Connection opened: #<Connnection::47398780>

I [2013-04-10 12:20:12.745] [Dispatcher] Started Event: client_connected
I [2013-04-10 12:20:12.745] [Dispatcher] Name: client_connected
I [2013-04-10 12:20:12.745] [Dispatcher] Data: {"connection_id"=>47398780}
I [2013-04-10 12:20:12.745] [Dispatcher] Connection: #<Connnection::47398780>

I [2013-04-10 12:20:12.747] [Dispatcher] Event client_connected Finished in 0.001960819 seconds

==> /var/log/nginx/access.log <==
82.170.121.62 - - [10/Apr/2013:12:20:12 +0200] "GET /chat HTTP/1.1" 200 854 "http://test.ravecy.com/posts" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) Version/6.0.2 Safari/536.26.17"
82.170.121.62 - - [10/Apr/2013:12:20:12 +0200] "GET /assets/frontend-6ad91089203a6026624ce015c2800492.css HTTP/1.1" 304 0 "http://test.ravecy.com/chat" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) Version/6.0.2 Safari/536.26.17"
82.170.121.62 - - [10/Apr/2013:12:20:12 +0200] "GET /assets/frontend-98fa493fc9f482c0d44b31bda5a89135.js HTTP/1.1" 304 0 "http://test.ravecy.com/chat" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) Version/6.0.2 Safari/536.26.17"

==> websocket_rails.log <==
I [2013-04-10 12:20:12.832] [ConnectionManager] Connection closed: #<Connnection::47398780>

I [2013-04-10 12:20:12.832] [Dispatcher] Started Event: client_disconnected
I [2013-04-10 12:20:12.832] [Dispatcher] Name: client_disconnected
I [2013-04-10 12:20:12.832] [Dispatcher] Data: nil
I [2013-04-10 12:20:12.832] [Dispatcher] Connection: #<Connnection::47398780>

I [2013-04-10 12:20:12.833] [Dispatcher] Event client_disconnected Finished in 0.000293462 seconds

==> /var/log/nginx/access.log <==
82.170.121.62 - - [10/Apr/2013:12:20:12 +0200] "GET /websocket HTTP/1.1" 200 398 "-" "-" 
```

请注意，连接会在 100 毫秒内关闭，即使它应该保持活动状态。

进一步的配置：nginx.conf：

```
user www-data;
worker_processes 4;
pid /run/nginx.pid;

events {
    worker_connections 768;
}

http {
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    gzip on;
    gzip_disable "msie6";

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

瘦配置：

```
---
chdir: /var/www/ravecy.com
environment: production
address: 127.0.0.1
port: 3000
timeout: 30
log: log/thin.log
pid: tmp/pids/thin.pid
max_conns: 1024
max_persistent_conns: 100
require: []
wait: 30
servers: 2
daemonize: true 
```

nginx 版本：nginx/1.3.15 url 实例： [http ://test.ravecy.com/chat](http://test.ravecy.com/chat)

另请注意：在`new WebSocket("ws://test.ravecy.com/websocket")`JS 控制台中执行时，浏览器提示“Unexpected response code: 200”。

我非常渴望完成这项工作，并且不再知道我应该做什么。

Telnet 结果 NGINX：

```
GET /websocket HTTP/1.1
Host: test.ravecy.com
Connection: Upgrade
Upgrade: WebSocket

HTTP/1.1 200 OK
Server: nginx/1.3.15
Date: Sat, 13 Apr 2013 19:50:35 GMT
Content-Type: text/json
Transfer-Encoding: chunked
Connection: keep-alive

152
[["client_connected",{"id":null,"channel":null,"data":{"connection_id":37160040},"success":null,"result":null,"server_token":null}]][["users",{"id":null,"channel":null,"data":[],"success":null,"result":null,"server_token":null}]][["client_connected",{"id":null,"channel":null,"data":{},"success":false,"result":null,"server_token":null}]] 
```

Telnet 结果直接到瘦：

```
GET /websocket HTTP/1.1
Host: test.ravecy.com
Connection: Upgrade
Upgrade: WebSocket

HTTP/1.1 101 Web Socket Protocol Handshake
Upgrade: WebSocket
Connection: Upgrade
WebSocket-Origin: 
WebSocket-Location: ws://test.ravecy.com/websocket

[["client_connected",{"id":null,"channel":null,"data":{"connection_id":37489460},"success":null,"result":null,"server_token":null}]][["users",{"id":null,"channel":null,"data":[],"success":null,"result":null,"server_token":null}]][["client_connected",{"id":null,"channel":null,"data":{},"success":false,"result":null,"server_token":null}]] 
```

显然，这是出了问题。但为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T09:54:32.370

根据 telnet 结果，我注意到我使用了带有大写字母“U”的“升级”。使用“升级”而不是“升级”解决了我遇到的所有问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-25T10:40:00.687

是的。http 到 ws 的连接升级语法有时**区分大小写**

所以完整的服务器配置如下所示：

```
server {
listen 80;
server_name server.com;

root /var/www/my-app/current/public;

try_files $uri/index.html $uri @app;

location @app {
    proxy_pass http://app;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
}

# enables WS support
location /websocket {
    proxy_pass http://app;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "Upgrade";
}

error_page 500 502 503 504 /500.html;
client_max_body_size 4G;
keepalive_timeout 10; 
```

}

# python - 如何在 matplotlib 中更新 pcolor？

> ID：15992149
> 
> 赞同：2
> 
> 时间：2013-04-13T19:45:58.920
> 
> 标签：python, matplotlib, plot

我用 pcolor 从二维数组中绘制信息。但是，数组中的信息在迭代过程中会发生变化，我想动态更新颜色图，以便实时可视化变化。我怎样才能以最简单的方式做到这一点？

编辑 - 示例：

```
from __future__ import division
from pylab import *
import random

n = 50 # number of iterations
x = arange(0, 10, 0.1)
y = arange(0, 10, 0.1)
T = zeros([100,100]) # 10/0.1 = 100
X,Y = meshgrid(x, y)

"""initial conditions"""
for x in range(100):
 for y in range(100):
  T[x][y] = random.random()

pcolor(X, Y, T, cmap=cm.hot, vmax=abs(T).max(), vmin=0)
colorbar()
axis([0,10,0,10])
show() # colormap of the initial array

"""main loop"""

for i in range(n):
 for x in range(100):
  for y in range(100):
   T[x][y] += 0.1 # here i do some calculations, the details are not important

 # here I want to update the color map with the new array (T) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:46:53.790

我建议使用`imshow`（[doc](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.imshow)）：

```
# figure set up
fig, ax_lst = plt.subplots(2, 1)
ax_lst = ax_lst.ravel()

#fake data
data = rand(512, 512)
x = np.linspace(0, 5, 512)
X, Y = meshgrid(x, x)

data2 = np.sin(X ** 2 + Y **2)
# plot the first time#fake data

im = ax_lst[0].imshow(data, interpolation='nearest', 
                            origin='bottom', 
                            aspect='auto', # get rid of this to have equal aspect
                            vmin=np.min(data),
                            vmax=np.max(data), 
                            cmap='jet')

cb = plt.colorbar(im)

pc = ax_lst[1].pcolor(data)
cb2 = plt.colorbar(pc) 
```

要使用 imshow 更新数据，只需设置数据数组，它会为您处理所有标准化和颜色映射：

```
# update_data (imshow)
im.set_data(data2) 
plt.draw() 
```

要对您做同样的事情，`pcolor`您需要自己进行规范化和颜色映射（并猜测行主要与列主要正确）：

```
my_cmap = plt.get_cmap('jet')
#my_nom = # you will need to scale your read data between [0, 1]
new_color = my_cmap(data2.T.ravel())
pc.update({'facecolors':new_color})

draw() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-13T00:34:21.700

我在这里有一个简单的例子，如何在模拟过程中更新`ax.pcolor`（或者更确切地说是它更快的表亲）。`ax.pcolormesh`

```
def make_movie(fig, meshData, conc, fout='writer_test.mp4',
           dpi=150, metadata={}):
    '''
    Make a movie (on disk) starting from a first image generated with matplotlib,
    by updating only the values that were dispayed with ax.pcolormesh(...).

    Parameters
    ----------
    meshData: mesh as returned by ax.pcolormesh()
    conc: obj returned by readUCN
        computed concentrations
    fout: str
        name of output file, with or without '.mp4' extension.
    dpi: int
        dots per inch of output movie
    metadata: dict
        passed on to FFMpegWriter.savings(fout, ...)
    '''
    plt.rcParams['animation.ffmpeg_path'] = '/usr/local/bin/ffmpeg'

    from matplotlib.animation import FFMpegWriter

    writer = FFMpegWriter(fps=15, metadata=metadata)

    totims = conc.totim # get times of computed concentrations

    with writer.saving(fig, fout, dpi):
        for totim in totims:
            C = conc.at_t(totim)[:, 0, :] # 3D -->  2D Xsection concentrations
            #newcolors = cmap(norm(C.ravel()))
            #meshData.update({'facecolors': newcolors})
            meshData.update({'array': C.ravel()}) # reset array to new conc.
            fig.canvas.draw_idle()
            writer.grab_frame() 
```

`#newcolors`以和开头的行`#meshData.update`如上面@tacaswell 所建议的那样。以开头的行`meshdata.udate({array ...`替换它们。它只是更新数据而不计算新的 facecolors。最后一种方法更简单，也同样有效。不需要转置数据数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T20:40:01.580

您可以将事件连接到您的图形并在该事件上调用特定函数。下面我以文档为例`matplotlib`并添加了一个函数`ontype`。当`1`在键盘上按下时调用它。然后`X * func3()`被调用。`Ontype`绑定到带有 的图形`fig.canvas.mpl_connect('key_press_event',ontype)`。以类似的方式，您可以根据时间触发定期事件。

```
#!/usr/bin/env python
"""
See pcolor_demo2 for an alternative way of generating pcolor plots
using imshow that is likely faster for large grids
"""
from __future__ import division
from matplotlib.patches import Patch
from pylab import *

def ontype(event):
    ''' function that is called on key event (press '1')'''
    if event.key == '1':
        print 'It is working'
        fig.gca().clear()
        # plot new function X * func3(X, Y) 
        Z = X * func3(X, Y) 
        pcolor(X, Y, Z, cmap=cm.RdBu, vmax=abs(Z).max(), vmin=-abs(Z).max())
        fig.canvas.draw()

def func3(x,y):
    return (1- x/2 + x**5 + y**3)*exp(-x**2-y**2)

# make these smaller to increase the resolution
dx, dy = 0.05, 0.05

x = arange(-3.0, 3.0001, dx)
y = arange(-3.0, 3.0001, dy)
X,Y = meshgrid(x, y)

Z = func3(X, Y)

fig=figure(figsize=(16,8))

# connect ontype to canvas
fig.canvas.mpl_connect('key_press_event',ontype)

pcolor(X, Y, Z, cmap=cm.RdBu, vmax=abs(Z).max(), vmin=-abs(Z).max())
colorbar()
axis([-3,3,-3,3])

show() 
```

# python - 如何获得前几个元素和余数？

> ID：15992154
> 
> 赞同：1
> 
> 时间：2013-04-13T19:46:18.067
> 
> 标签：python, syntax, python-2.x

是否可以在 Python 中做这样的事情：

```
a, b, *c = [1,2,3,4] 
```

在哪里

```
a = 1
b = 2
c = [3,4] 
```

?

我发现的最紧凑的方法是：

```
l = [1,2,3,4]
a, b = l[:2]
c = l[2:] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T19:54:14.690

正如[DSM 的回答](https://stackoverflow.com/a/15992190/722121)所述，在 3.x 中，您的伪代码工作正常。2.x 中更通用的方法是：

```
x = iter(rhs)
a, b, c = next(x), next(x), list(x) 
```

这具有处理所有可迭代对象的优势，而不仅仅是序列，因此更接近 3.x 行为。

编辑：DSM 的答案由于某种原因被删除，但它表示在 3.x 中，`a, b, *c = rhs`是完全有效的代码，产生了预期的结果。

# javascript - facebook connect with javascript sdk 在 IE 中不起作用？

> ID：15992155
> 
> 赞同：2
> 
> 时间：2013-04-13T19:46:25.140
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我使用 javascript sdk 为我的网站开发了一个 facebook 连接应用程序。它适用于除 IE 以外的所有浏览器。

在 IE 中，有时它不会调用用户单击登录按钮的测试 API 函数。登录窗口弹出，当用户输入用户名和密码时，它应该调用 testAPI 函数。但有时函数调用不起作用。但有时如果我刷新浏览器并重试，它会起作用。

这里有没有人面临这种​​类型的问题。下面是我的javascript代码：

```
window.fbAsyncInit = function() {
    FB.init({
      appId      : '', // App ID
      channelUrl : '//localhost/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
    FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
      // connected
      testAPI();
    } else if (response.status === 'not_authorized') {
      // not_authorized
      login();
    } else {
      // not_logged_in
      login();
    }
  });

    // Additional init code here

  };

  function login() { //alert("test");
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
          testAPI();
        } else {
            // cancelled
        }
    }, { scope: 'email' });
    }

  function testAPI() {
    //document.write ("tet");
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {

        //document.write("sdfs");
        //document.write(response.name);
        var test = response.first_name; //alert(test);
        console.log('Good to see you, ' + response.first_name + '.');
        console.log('Good to see you, ' + response.last_name + '.');
        console.log('Good to see you, ' + response.id + '.');
        console.log('Good to see you, ' + response.email + '.');
       // console.log(response);
    });
  }

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T20:01:20.080

那么问题是IE不支持控制台对象，愚蠢的是如果你打开Internet Explorer开发工具，控制台对象是支持的。

因此，只需删除所有 console.log 行，它们在您打开开发人员工具时工作，但如果开发人员工具关闭，它们将不起作用。这太愚蠢了，以至于调试起来更加困难。

而是尝试使用警报。

你可以在这里阅读更好的解释：

[IE9是否支持console.log，它是一个真正的功能吗？](https://stackoverflow.com/questions/5472938/does-ie9-support-console-log-and-is-it-a-real-function)

# r - 大数据集的空间匹配

> ID：15992158
> 
> 赞同：11
> 
> 时间：2013-04-13T19:46:38.393
> 
> 标签：r, matching, spatial, spatial-index

我有一个包含大约 100000 个点的数据集和另一个包含大约 3000 个多边形的数据集。对于每个点，我需要找到最近的多边形（空间匹配）。多边形内的点应与该多边形匹配。

计算所有对的距离是可行的，但需要的时间比必要的要长一些。是否有一个 R 包可以利用空间索引来解决这种匹配问题？

我知道`sp`包和`over`功能，但文档没有说明任何关于索引的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T22:20:20.420

为此，您可以尝试使用包中的`gDistance`功能`rgeos`。作为一个例子，看看下面的例子，我从这个[旧线程](http://r-sig-geo.2731867.n2.nabble.com/classify-point-by-nearest-polygon-tp6019714p6033521.html)中修改了它。希望能帮助到你。

```
require( rgeos )
require( sp )

# Make some polygons
grd <- GridTopology(c(1,1), c(1,1), c(10,10))
polys <- as.SpatialPolygons.GridTopology(grd)

# Make some points and label with letter ID
set.seed( 1091 )
pts = matrix( runif( 20 , 1 , 10 ) , ncol = 2 )
sp_pts <- SpatialPoints( pts )
row.names(pts) <- letters[1:10]

# Plot
plot( polys )
text( pts , labels = row.names( pts ) , col = 2 , cex = 2 )
text( coordinates(polys) , labels = row.names( polys ) , col = "#313131" , cex = 0.75 ) 
```

![在此处输入图像描述](https://i.stack.imgur.com/T9gFT.jpg)

```
# Find which polygon each point is nearest
cbind( row.names( pts ) , apply( gDistance( sp_pts , polys , byid = TRUE ) , 2 , which.min ) )
#   [,1] [,2]
#1  "a"  "86"
#2  "b"  "54"
#3  "c"  "12"
#4  "d"  "13"
#5  "e"  "78"
#6  "f"  "25"
#7  "g"  "36"
#8  "h"  "62"
#9  "i"  "40"
#10 "j"  "55" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-20T13:10:21.177

我对 R 一无所知，但我将提供一种使用 PostGIS 的可能解决方案。您可能能够在 PostGIS 中加载数据并比单独使用 R 更快地处理它。

给定两个表`planet_osm_point`（80k 行）和`planet_osm_polygon`（30k 行），以下查询在大约 30 秒内执行

```
create table knn as 
select 
    pt.osm_id point_osm_id, 
    poly.osm_id poly_osm_id
from planet_osm_point pt, planet_osm_polygon poly
where poly.osm_id = (
    select p2.osm_id 
    from planet_osm_polygon p2 
    order by pt.way <-> p2.way limit 1
); 
```

**结果是基于点与多边形边界框**的中心点（而不是多边形本身的中心点）之间的距离的近似值。再做一些工作，这个查询可以适应基于多边形本身的中心点获取最近的多边形，尽管它不会很快执行。

# php - 了解有关代码的 HTML/PHP 方面的 jQuery 教程

> ID：15992159
> 
> 赞同：1
> 
> 时间：2013-04-13T19:46:47.767
> 
> 标签：php, jquery, wordpress

我对如何处理[本教程的说明](http://www.patrick-wied.at/static/watermarkjs/)感到非常困惑。我不知道如何获取定义的 Javascript 并将其转换为 html 代码以执行代码。

此外，我的最终目标是使用以下代码获取在 WordPress 中调用的图像：

```
echo apply_filters( 
    'woocommerce_single_product_image_thumbnail_html', 
    sprintf( 
        '<a href="%s" class="%s" title="%s"  rel="prettyPhoto[product-gallery]">%s</a>', 
        $image_link, 
        $image_class, 
        $image_title, 
        $image ),
    $attachment_id, 
    $post->ID, 
    $image_class 
); 
```

和这个：

```
echo apply_filters( 
    'woocommerce_single_product_image_html', 
    sprintf( 
        '<a href="%s" itemprop="image" class="woocommerce-main-image zoom" title="%s" rel="prettyPhoto' . $gallery . '">%s</a>', 
        $image_link, 
        $image_title,
        $image ), 
    $post->ID 
); 
```

并在不影响原图的情况下添加客户端水印。（卖照片）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:18:53.603

这些 WooCommerce 过滤器挂钩将使您能够添加教程的 Javascript 工作所需的水印类。

您需要添加主题的`functions.php`：

```
add_filter( 'woocommerce_single_product_image_thumbnail_html', 'thumb_watermark_so_15992159', 15, 4 );
add_filter( 'woocommerce_single_product_image_html', 'image_watermark_so_15992159', 15, 2 );

function thumb_watermark_so_15992159( $html, $attachment_id, $post_ID, $image_class )
{
    $watermarked = str_replace( 'class="', 'class="watermark ', $html );
    return $watermarked;
}

function image_watermark_so_15992159( $html, $post_ID )
{
    $watermarked = str_replace( 'class="', 'class="watermark ', $html );
    return $watermarked;
} 
```

[*相关问答：[将我的代码放在哪里：plugin 或 functions.php？](https://wordpress.stackexchange.com/q/73031/12615)*]

* * *

# javascript - 如何为许多实例重构此 javascript 代码

> ID：15992162
> 
> 赞同：0
> 
> 时间：2013-04-13T19:47:28.057
> 
> 标签：javascript, jquery

我有以下代码可以上传工作正常的个人资料照片。我也有许多不同的案例（上传网站图标、徽标等），最终可能会出现很多重复。

```
var myDropzone;

myDropzone = new Dropzone("div#profilePhoto", {
  url: "/attachments",
  paramName: "attachment[file]"
});

myDropzone.on("sending", function(file, xhr) {
  return $.rails.CSRFProtection(xhr);
}); 
```

我的问题是我怎样才能将此代码重构为尽可能通用，但允许我根据其 ID 传递具体选项（url、paramName 等）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:02:26.620

我们对您使用它的上下文知之甚少，但我相信像这个函数这样的东西可以工作：

```
function createDropzone(selector, url, paramName) {
    var myDropzone = new Dropzone(selector, {
      url: url,
      paramName: paramName
    });

    myDropzone.on("sending", function(file, xhr) {
      return $.rails.CSRFProtection(xhr);
    });
} 
```

你可以这样称呼它：

```
createDropzone("div#profilePhoto", "/attachments", "attachment[file]"); 
```

# vim - 如何告诉 Vim 在保存前自动缩进

> ID：15992163
> 
> 赞同：9
> 
> 时间：2013-04-13T19:47:28.660
> 
> 标签：vim, auto-indent

我最近开始在我的研究生项目中使用 Vim。我面临的主要问题是有时我会签入未缩进的代码。我觉得如果我能以某种方式创建自动缩进+保存+关闭的快捷方式，那应该可以解决我的问题。

我的 .vimrc 文件：

```
set expandtab
set tabstop=2
set shiftwidth=2
set softtabstop=2
set pastetoggle=<F2>
syntax on
filetype indent plugin on 
```

有没有办法创建这样的命令快捷方式并用`:x`（保存+退出）覆盖。

请告诉我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-14T00:14:34.080

将以下内容添加到您的`.vimrc`:

```
" Restore cursor position, window position, and last search after running a
" command.
function! Preserve(command)
  " Save the last search.
  let search = @/

  " Save the current cursor position.
  let cursor_position = getpos('.')

  " Save the current window position.
  normal! H
  let window_position = getpos('.')
  call setpos('.', cursor_position)

  " Execute the command.
  execute a:command

  " Restore the last search.
  let @/ = search

  " Restore the previous window position.
  call setpos('.', window_position)
  normal! zt

  " Restore the previous cursor position.
  call setpos('.', cursor_position)
endfunction

" Re-indent the whole buffer.
function! Indent()
  call Preserve('normal gg=G')
endfunction 
```

如果您希望所有文件类型在保存时自动缩进，**我强烈建议不**要这样做，请将此挂钩添加到您的`.vimrc`：

```
" Indent on save hook
autocmd BufWritePre <buffer> call Indent() 
```

如果您只希望某些文件类型在保存时自动缩进，**我建议这样**做，然后按照说明进行操作。假设您希望 C++ 文件在保存时自动缩进，然后创建`~/.vim/after/ftplugin/cpp.vim`并将这个钩子放在那里：

```
" Indent on save hook
autocmd BufWritePre <buffer> call Indent() 
```

任何其他文件类型`~/.vim/after/ftplugin/java.vim`也是如此，例如 Java 等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-13T20:00:36.987

我建议首先打开`autoindent`以避免这个问题。在开发的每个阶段使用正确缩进的代码要容易*得多。*

```
set autoindent 
```

通过 阅读文档`:help autoindent`。

但是，该`=`命令将根据文件类型的规则缩进行。您可以创建一个`BufWritePre`自动命令来对整个文件执行缩进。

我没有对此进行测试，也不知道它的实际效果如何：

```
autocmd BufWritePre * :normal gg=G 
```

阅读`:help autocmd`以获取有关该主题的更多信息。 `gg=g`分解为：

*   `:normal`作为正常模式编辑命令而不是`:ex`命令执行
*   `g``g` 移动到文件顶部
*   `=`缩进直到...
*   `G`...文件的结尾。

不过我真的不推荐这种策略。习惯`set autoindent`改用。`autocmd`在所有文件上定义它可能是不明智的（如`*`）。它只能在某些文件类型上完成：

```
" Only for c++ files, for example
autocmd BufWritePre *.cpp :normal gg=G 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T03:39:52.927

要缩进已经存在的文件，您可以使用快捷方式`gg=G`（不是命令；只需按`g`两次，然后按 ，`=`然后按`Shift+g`），特别是因为您使用的是`filetype indent`... 行。

[Vim: gg=G 左对齐，不自动缩进](https://stackoverflow.com/questions/3276392/vim-gg-g-aligns-left-does-not-auto-indent)

# java - 导出的 JAR 无法访问打包的库

> ID：15992166
> 
> 赞同：0
> 
> 时间：2013-04-13T19:48:05.463
> 
> 标签：java, export, libraries

我正在尝试将我的项目导出为 JAR 文件。它使用一些外部库。这是我在 Eclipse 中的包结构：

![封装结构](https://i.stack.imgur.com/2frKt.png)

当我将项目导出为 JAR 时，库会导出。但是，当我运行程序时，我得到一个 ClassNotFoundException，因为我的一个类正试图访问一个库。

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:54:42.407

您可以将 JAR 导出为`runnable JAR`并选择`Copy required libraries next to generated JAR`.

或者

您还可以使用命令引用您的外部库：

`java -Djava.ext.dirs=lib -jar yourJAR.jar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:59:53.510

您可以使用以下内容添加清单：

```
Class-Path: lib/sphinx4.jar lib/jl1.0.1.jar lib/WS..... 
```

更多信息[在这里](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

# php - 在字符串查询中将数组作为参数传递

> ID：15992169
> 
> 赞同：2
> 
> 时间：2013-04-13T19:48:35.953
> 
> 标签：php, iphone, objective-c

我需要传递一个搜索查询，其中我有一个字符串 ID 数组，我想检查这些 ID 是否存在于服务器上。我对我的服务器的性能非常好奇，所以我希望它使用最少的资源

这是我正在使用的代码

```
myContactIds = NSMutableArray which contains lets say 1000 strings of ids

NSString *queryString = myUrl?=array=NEED_TO_SEND_ARRAY_HERE ;

 [Utilities responseFromURL:[NSURL URLWithString:queryString] completionBlock:^(NSString *response, NSError *errorString)
     {

         [self.myTable reloadData];
         [self.indicator stopAnimating];
     }]; 
```

首先，我如何使用我的 url 传递一个数组，以便可以在我的 PHP 服务器端代码上读取它其次，我如何使用该数组在服务器端查询数据库是否包含 ID 并作为响应发回，ID存在于数据库中

PS如果我可以在不使用任何外部库的情况下得到答案，那更好，因为我想学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:20:27.287

你想传递 url 中的字符串吗？例如：
www.myUrl.com?array=string1%7Cstring2%7Cstring3

如果是这样，您可以使用 componentsJoinedByString：

```
NSArray *myArray = @[@"string1", @"string2", @"string3"];
NSString *stringFromArray = [myArray componentsJoinedByString:@"%7C"]; 
```

然后您可以在您的网址中使用该字符串。然后当然你会从你的网络服务器上的 url 中解析出子字符串。

但是，将这个数组嵌入到 Web 请求的 HTTP 正文中可能会容易得多。您可以从字符串数组创建 JSON Blob。然后将 JSON 填充到请求的 HTTP 正文中。

您使用的解决方案显然将针对您的确切需求。

# mysql - mysql查询未优化

> ID：15992175
> 
> 赞同：0
> 
> 时间：2013-04-13T19:48:55.073
> 
> 标签：mysql, optimization

我已尝试优化此查询，但由于特定的业务需求而无法做到。

表：

*   `b2`：约200万条记录，存储业务记录
*   `business_reviews`：小桌子，商店评论（每个商家可以有多个评论）
*   `business_feature_item`：小桌子，为企业存储功能（每个企业可以有多个功能

结果的具体业务要求：

*   显示业务记录
*   显示相关的业务评论
*   也允许搜索功能
*   按 b2.starbiz 和分数排序（由 MATCH AGAINST 生成）

我当前的查询使用临时表、联合所有和排序，所以当结果很大时它不能很好地工作。有没有办法重新编写此查询以使其更高效？

```
SELECT temp.* FROM 

(SELECT DISTINCT b.business_id, b.description AS `extra`, '1' AS `type`, 0 as score 

FROM b2 as b 

LEFT JOIN business_feature_item AS i ON b.business_id = i.business_id 

WHERE ((b.cat_id = '93' OR b.cat_id2 = '93' OR b.cat_id3 = '93')) 

AND b.city_id = '152262' 

AND `approved`=1 

UNION ALL SELECT b.business_id, review_desc AS `extra`, '2' AS `type`, ((MATCH         `review_desc` AGAINST ('"restaurants"' IN BOOLEAN MODE) * 4) + (MATCH `review_desc` AGAINST ('restaurants' IN BOOLEAN MODE) )) AS score 

FROM b2 AS b, business_reviews AS r 

WHERE b.business_id =r.business_id 

AND b.city_id = '152262' 

AND ( MATCH `review_desc` AGAINST ('"restaurants"' IN BOOLEAN MODE) 

OR MATCH `review_desc` AGAINST ('restaurants' IN BOOLEAN MODE))) 

AS temp 

GROUP BY temp.business_id 

ORDER BY starbiz DESC, score DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:37:09.073

使用`OR`子句将导致 MySQL 不使用任何索引，而是进行全表扫描。

尝试重写查询以使用`UNION ALL`s 而不是`OR`s：

```
SELECT temp.* FROM 
(
    SELECT DISTINCT 
        b.business_id, 
        b.description AS `extra`,
        '1' AS `type`,
        0 as score 
    FROM 
        b2 as b 
    LEFT JOIN 
        business_feature_item AS i ON b.business_id = i.business_id 
    WHERE 
        b.cat_id = '93'
        AND b.city_id = '152262' 
        AND `approved`=1 
UNION ALL 
    SELECT DISTINCT 
        b.business_id, 
        b.description AS `extra`,
        '1' AS `type`,
        0 as score 
    FROM 
        b2 as b 
    LEFT JOIN 
        business_feature_item AS i ON b.business_id = i.business_id 
    WHERE 
        b.cat_id2 = '93'
        AND b.city_id = '152262' 
        AND `approved`=1 
UNION ALL 
    SELECT DISTINCT 
        b.business_id, 
        b.description AS `extra`,
        '1' AS `type`,
        0 as score 
    FROM 
        b2 as b 
    LEFT JOIN 
        business_feature_item AS i ON b.business_id = i.business_id 
    WHERE 
        b.cat_id3 = '93'
        AND b.city_id = '152262' 
        AND `approved`=1 
UNION ALL 
    SELECT 
        b.business_id,
        review_desc AS `extra`,
        '2' AS `type`,
        MATCH `review_desc` AGAINST ('"restaurants"' IN BOOLEAN MODE) * 4 AS score
    FROM 
        b2 AS b,
        business_reviews AS r 
    WHERE 
        b.business_id =r.business_id 
        AND b.city_id = '152262' 
        AND MATCH `review_desc` AGAINST ('"restaurants"' IN BOOLEAN MODE) 
UNION ALL 
    SELECT 
        b.business_id,
        review_desc AS `extra`,
        '2' AS `type`,
        MATCH `review_desc` AGAINST ('restaurants' IN BOOLEAN MODE) AS score 
    FROM 
        b2 AS b,
        business_reviews AS r 
    WHERE 
        b.business_id =r.business_id 
        AND b.city_id = '152262' 
        AND MATCH `review_desc` AGAINST ('restaurants' IN BOOLEAN MODE)
) 
AS temp 
GROUP BY temp.business_id 
ORDER BY starbiz DESC, score DESC 
```

# java - Switch 语句而不是 if 语句

> ID：15992177
> 
> 赞同：1
> 
> 时间：2013-04-13T19:49:09.340
> 
> 标签：java, loops, switch-statement

我创建了一个带有 switch 语句的类，它根据用户选择的边数打印出多边形的名称。我无法弄清楚的问题是当边小于 3 且大于 12 时如何执行此操作。我宁愿使用 if 语句，但我不能用于这部分。因为我可以使用一个案例：对于每个超过 12 的数字，例如案例 13：、案例 14：等。我该怎么做？

```
import java.util.Scanner;
public class Lab13 {
    public static void main(String[] args) {
        int sides = 0;
        Scanner scan = new Scanner(System. in );
        System.out.println("Please enter the number of sides of your Polygon");
        sides = scan.nextInt();
        String polygonname = "";
        switch (sides) {
        case 3:
            polygonname = polygonname + "triangle";
            break;
        case 4:
            polygonname = polygonname + "square";
            break;
        case 5:
            polygonname = polygonname + "pentagon";
            break;
        case 6:
            polygonname = polygonname + "hexagon";
            break;
        case 7:
            polygonname = polygonname + "heptagon";
            break;
        case 8:
            polygonname = polygonname + "octagon";
            break;
        case 9:
            polygonname = polygonname + "nonagon";
            break;
        case 10:
            polygonname = polygonname + "decagon";
            break;
        case 12:
            polygonname = polygonname + "dodecagon";
            break;
        }
        System.out.print("A polygon with " + sides + " sides is called a " + polygonname + ".");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T19:51:15.130

`default:`在 的末尾使用`switch`，这将处理所有其他情况，就像语句`else`中的最后一样。`if / else if / else if`像这样写：

```
switch(sides) {

case 3:
polygonname=polygonname+"triangle";
break;

// ...

default:
polygonname=polygonname+"unknown";
break;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:03:18.703

你应该接受奥斯卡的回答。我添加我的只是为了说明`final`在做`switch/case`. 不幸的是，Java 的 Switch 语句不是基于表达式的，也不是详尽无遗的。你可以通过使用`final`变量来解决这个问题，如果你不处理一个案例，编译器会发疯的。

```
 final String polygonname;

    switch (sides) {
    case 3:
        polygonname = "triangle";
        break;
    case 4:
        polygonname = "square";
        break;
    // Other cases....
    case 10:
        polygonname = "decagon";
        break;
    case 12:
        polygonname = "dodecagon";
        break;
    default:
        polygonname = "n-gon";

    } 
```

# c++ - Qt线程计算输出到GUI中的自己的小部件？

> ID：15992192
> 
> 赞同：0
> 
> 时间：2013-04-13T19:50:58.677
> 
> 标签：c++, multithreading, qt, widget

所以基本上我正在操作的这个程序使用Qt中的线程来使用指定数量的线程（最多4个线程）查找指定范围内的所有素数。

每个线程必须输出它在自己的某种 GUI 小部件中找到的素数。

在编写当前代码时，我跳过了很多基础知识，但到目前为止，它完成了我上面提到的所有事情，除了将数据输出到小部件并将每个线程的数据分离到自己的小部件中。

所以我的问题是..我应该为每个线程的输出使用哪个小部件；文本小部件/列表小部件等？还有一个通常如何分离每个线程的“计算”，以便我可以将每个线程输出到它自己的小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:34:29.637

不允许主线程以外的线程直接调用 GUI 小部件对象上的方法，因为这不是线程安全的（因为主 GUI 线程也可能随时调用小部件上的方法，例如在窗口大小改变）。

因此，您的计算线程需要向主线程发送一条消息，要求它代表他们更新小部件。

通常最简单的方法是让计算线程发出一个包含您要显示的数据的信号（例如，作为 QString），并通过[QueuedConnection](http://qt-project.org/doc/qt-4.8/threads-qobject.html)将该信号连接（）到适当的小部件的 setText（）插槽（或其他一些将更新小部件的适当插槽）。

另一种可能的方法是让您的小部件线程调用 QApplication::postEvent(theTargetWidget, new MyEventType(myResultData))。在这种情况下，MyEventType 将是您自己的 QEvent 子类，其中包含您要发送到主/GUI 线程的数据。然后，您将确保 (theTargetWidget) 也是您的子类，您在其中重写了“bool event(QEvent *)”方法来检查 MyEventType 的传入事件，从中提取数据，并使用更新小部件它。每次计算线程调用 postEvent() 时，Qt 都会确保在主/GUI 线程中尽快调用 event()。

一旦您安全地设置了线程间消息传递（通过上述两种方法中的任何一种），那么您使用哪种类型的 QWidget 来显示结果就无关紧要了。任何类型都可以。（相反，如果您不安全地进行消息传递，Qt 的任何小部件都不会可靠地工作，因为它们都不希望它们的方法被多个线程直接调用）

# php - 加载 index.php 作为我在 PHP 中的第一页

> ID：15992195
> 
> 赞同：2
> 
> 时间：2013-04-13T19:51:16.710
> 
> 标签：php, apache

我如何在我的 php 项目中让 index.php 成为我的项目加载的第一页而不是 index.html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T19:57:34.940

您可以通过`htaccess`

`htaccess`在您的文件中写入以下代码

```
DirectoryIndex index.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T19:57:52.733

在你的 apache.conf 中搜索`DirectoryIndex`并确保 index.php 在 index.html 之前。像这样：

```
DirectoryIndex index.php index.html index.cgi index.pl index.xhtml index.htm 
```

如果您无权访问 apche 配置或不想全局设置，您也可以将此行添加到您的 .htaccess 文件中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T20:01:33.917

因此，有一个很好解释的答案，要执行 OP 要求您必须`DirectoryIndex`在 Apache 中使用的操作。在站点配置或 .htaccess 中，您必须输入以下内容：

```
DirectoryIndex index.php 
```

仅此一项就告诉 apache`index.php`作为您的主文件启动。所以加载`domain.tld/`它真的很加载`index.php`

```
DirectoryIndex index.php index.html 
```

这将加载`index.php`，但如果不存在，它将尝试加载`index.html`. 列出的文件的顺序是 apache 首先查找的。

更多细节[在这里](http://httpd.apache.org/docs/current/mod/mod_dir.html)

# java - 如何在鼠标退出事件上启动定时器并在鼠标进入事件上停止同一个定时器？

> ID：15992196
> 
> 赞同：1
> 
> 时间：2013-04-13T19:51:17.677
> 
> 标签：java, swing, timer, jlist

我有一个名为`reminderList`.

当鼠标单击列表中的某个项目并且鼠标退出列表时，我想要一个计时器启动。

当鼠标进入列表时，如果它仍在运行，我希望该计时器停止。

当鼠标再次退出列表时，我希望重新启动相同的计时器。

```
public void waitReminderList(int status) {
    Timer timer = new Timer(10000, new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
            reminderList.clearSelection();
            dismissReminder.setEnabled(false);
        }
    });
    if (status == 0) {
        if (!reminderList.isSelectionEmpty()) {
            timer.setRepeats(false);
            timer.restart();
            timer.start();
        }
    } else if (status == 1) {
        if (!reminderList.isSelectionEmpty()) {
            timer.stop();
        }
    }

private void reminderListMouseExited(java.awt.event.MouseEvent evt) {                                         
    waitReminderList(0);
} 

private void reminderListMouseEntered(java.awt.event.MouseEvent evt) {                                          
    waitReminderList(1);
} 
```

问题是：计时器在启动后不会停止或重新启动或做任何事情，但我需要它。

我对这个问题的解决方案是有一个 int，然后我可以通过 int 的值来控制我希望计时器做什么。但它没有用，计时器没有停止......

那我做错了什么？

我知道还有其他类似的问题，但是我对 java 还是很陌生，我不明白给出的答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:03:45.367

问题是你`Timer`每次都在创建一个新`waitReminderList`的被调用。任何先前运行的`Timer`对象都不会停止。由于您想要`Timer`将引用移到方法*之外*，例如在类级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:02:55.103

不要在你的 waitReminderList() 方法中继续创建一个新的 Timer。您应该将 Timer 定义为类变量。

然后您只需根据需要停止/启动它。

# jquery - Jquery Image Gallery - 单击时滑动图像

> ID：15992199
> 
> 赞同：-1
> 
> 时间：2013-04-13T19:51:34.873
> 
> 标签：jquery, image, click, slide

我在 Jquery 方面不是很有经验，并且似乎对我想要完成的事情有很多问题。我有一堆并排放置的图像（隐藏溢出），当我单击“下一个”按钮时，应该会出现下一个图像，依此类推。我正在努力实现的一个完美例子就是“mlb.com”在他们的主页上所做的事情。他们有大约 10 个不同的标题，每次你点击下一个箭头时，下一个标题就会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:56:10.007

如果您只是想为客户完成它，我建议您只使用类似 nivo 滑块[http://dev7studios.com/nivo-slider/](http://dev7studios.com/nivo-slider/)

或者，如果您有兴趣只学习 google jquery 滑块教程，您会发现数百个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:48:52.347

试试这个滑块可能对你有帮助。

```
http://wowslider.com/demo.html 
```

# java - 整数在java中是什么意思

> ID：15992200
> 
> 赞同：-1
> 
> 时间：2013-04-13T19:51:40.717
> 
> 标签：java

我正在寻找 Integer not int 但 Integer 的含义是有问题的代码

```
public class BasicSearch {
    public static final int NOT_FOUND = -1;
    public static int binarySearch(Integer[] a, int x)
    {
        int low=0;
        int high = a.length - 1;
        int mid;
        while (low <= high)
        {
            mid = (low + high) / 2;
            if (a[mid].compareTo(x)<0)
                low = mid + 1;
            else if (a[mid].compareTo(x) > 0)
            high = mid -1;
            else
                return mid;
        }
        return NOT_FOUND;
    }
    public static void main(String[] args)
    {
        int SIZE = 8;
        Integer[] a = new Integer[SIZE];
        for (int i=0; i<SIZE; i++)
            a[i] = new Integer(i * 2);
        for (int i=0; i<SIZE*2; i++)
            System.out.println("Found " + i + " at " + binarySearch(a, new Integer(i)));
    }

    } 
```

我不知道整数是关键字还是什么我可以得到任何帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T19:55:37.370

在 Java 中，我们有一个称为[Wrapper Classes](http://en.wikipedia.org/wiki/Primitive_wrapper_class)的概念。包装类是包装原始类型的对象。例如，`char`有一个`Character`包装类。这些类旨在为对象方法提供类似于原始类型的功能。

所有 Primitive 包装类也是不可变的，这意味着虽然您可以访问数据，但一旦创建就无法对其进行操作。

[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Primitive_wrapper_class)列出了 Java 中的所有包装类。

正如 PetarMinchev 所说，没有必要在这段代码中使用它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T19:52:36.313

`Integer`是一个包装 的类`int`，它是一个原始类型。

不需要在`Integer`这里使用，它只是浪费资源。您可以在没有 的情况下进行比较`compareTo`，但使用简单的`<`and `>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T19:59:15.157

Integer 是一个包装普通原始 int 的类。当您需要一个类来表示整数而不是原始类型时，它可以在某些情况下使用。

一个常见的例子是当你需要创建一个通用集合时：

```
List<Integer> list; 
```

另外，Integer 类有[方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)，所以有时使用起来会更方便

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T20:00:43.203

整数是 int（原始数据类型）的包装类。

所以实际上 Integer 只不过是 Java 创建的一个类，在其中实现了一些实用方法。

无需将其视为任何神奇的东西，它只是您在那里处理的对象。具有一些功能。

您可以在此代码中根据需要很好地使用 int 。

使用 Integer 类的最佳实用程序将是您希望通过引用传递参数或使用它们提供的大量实用程序函数的地方。

对于像这样的简单比较操作，最好使用 int。

# r - 为什么行函数会关闭 R 中的路径？

> ID：15992205
> 
> 赞同：6
> 
> 时间：2013-04-13T19:52:10.900
> 
> 标签：r, graphics

**目标：**给定两个点，找到连接它们的弧的坐标并绘制它。 **实现：**一个函数用于查找弧的点 ( `circleFun`)，另一个用于绘制它 ( `plottest`)。颜色显示路径的方向，从红色到绿色。

```
circleFun <- function(x,y)
{
  center <- c((x[1]+y[1])/2,(x[2]+y[2])/2)
  diameter <- as.numeric(dist(rbind(x,y)))

  r <- diameter / 2
  tt <- seq(0,2*pi,length.out=1000)
  xx <- center[1] + r * cos(tt)
  yy <- center[2] + r * sin(tt)
  res <- data.frame(x = xx, y = yy)

  if((x[1]<y[1] & x[2]>y[2]) | (x[1]>y[1] & x[2]<y[2])){
    res <- res[which(res$x>min(c(x[1],y[1])) & res$y>min(c(x[2],y[2]))),]
  } else {
    res <- res[which(res$x<max(c(x[1],y[1])) & res$y>min(c(x[2],y[2]))),]
  }
  return(res)
}

plottest <- function(x1,y1)
{
  plot(c(x1[1],y1[1]),c(x1[2],y1[2]),
       xlim=c(-2,2),ylim=c(-2,2),col=2:3,pch=20,cex=2,asp=1)
  lines(circleFun(x1,y1))
}

par(mfrow=c(2,2))
plottest(c( 1,-1),c(-1, 1))
plottest(c(-1, 1),c( 1,-1))
plottest(c(-1,-1),c( 1, 1))
plottest(c( 1, 1),c(-1,-1)) 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/j8jfy.png)

**问题：**我无法弄清楚为什么`lines`函数会关闭图 [1,1] 和 [1,2] 中的路径，而图 [2,1] 和 [2,2] 中却没有。预期的结果应该是第二行的所有数字。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T21:14:00.243

就像其他人说的那样。话虽如此，这是您的函数的一个更简单的版本，具有您预期的输出。

```
circleFun <- function(x, y) {

  center <- (x + y) / 2
  radius <- sqrt(sum((x - y)^2)) / 2
  angle  <- atan2((y - x)[2], (y - x)[1])
  direc  <- ifelse(abs(angle) > pi / 2, -1, 1)
  tt <- seq(0, direc * pi, length.out = 1000)

  return(data.frame(x = center[1] + radius * cos(angle + tt),
                    y = center[2] + radius * sin(angle + tt)))
} 
```

其中`direc`变量决定是顺时针还是逆时针绘制半圆。

![开半圆](https://i.stack.imgur.com/JDSTG.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T20:56:28.393

我可以回答你关于`lines`函数的问题，但我会让你弄清楚如何修复你`circleFun`以产生预期的行为：

`lines()`按照它们在数据中出现的顺序连接点。此外，仅当第一个点再次包含在数据末尾时，路径才会关闭。下图说明了这种行为。

```
par(mfrow=c(1, 2))

plot(x=c(-1, 0, 1), y=c(-1, 1, -1), xlim=c(-2, 2), ylim=c(-2, 2),
     type="l", asp=1)
points(x=c(-1, 1), y=c(-1, -1))

plot(x=c(-1, 0, 1, -1), y=c(-1, 1, -1, -1), xlim=c(-2, 2), ylim=c(-2, 2),
     type="l", asp=1)
points(x=c(-1, 1), y=c(-1, -1)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/MSMXO.png)

# java - Android 用相机的 SurfaceView 覆盖 GLSurfaceView

> ID：15992206
> 
> 赞同：3
> 
> 时间：2013-04-13T19:52:22.600
> 
> 标签：java, android, opengl-es

我希望在相机顶部放置一个 openGL 模型（通过 GLSurfaceView），它有自己的 SurfaceView。这肯定是可能的，像 Layar 这样的应用程序就是这样做的。

这是我正在尝试的：

```
public class MainActivity extends Activity {

    private CameraSurfaceView mCameraSurfaceView; 
    private GLSurfaceView mCubeGLSurfaceView; 
    private FrameLayout mFrameLayout; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        mFrameLayout = new FrameLayout(this); 

        mCameraSurfaceView = new CameraSurfaceView(this);

        mCubeGLSurfaceView = new GLSurfaceView(this);
        mCubeGLSurfaceView.setRenderer(new CubeRenderer()); 
        //mCubeGLSurfaceView.setZOrderMediaOverlay(true);

        mFrameLayout.addView(mCameraSurfaceView); 
        mFrameLayout.addView(mCubeGLSurfaceView); 

        setContentView(mFrameLayout); 

    }

} 
```

现在：只是相机出现了。我在网上阅读了有关 GLSurfaceView 的 SetZOrderMediaOverlay 属性；在上面的代码中将其设置为 TRUE 会使 3D 立方体显示为黑色背景（即不显示相机预览）。

参考：

*   这是我正在使用的 Cube OpenGL 代码：http: [//intransitione.com/blog/create-a-spinning-cube-with-opengl-es-and-android/](http://intransitione.com/blog/create-a-spinning-cube-with-opengl-es-and-android/)
*   这是 CameraSurfaceView 代码： [https ://github.com/davefp/android-camera-api-example/blob/master/src/com/example/cameraexample/CameraSurfaceView.java](https://github.com/davefp/android-camera-api-example/blob/master/src/com/example/cameraexample/CameraSurfaceView.java)

我尝试过的其他测试：更改各个表面视图的 addView 顺序无济于事；它只显示相机（我在某处读到更改 addView 顺序可能会有所帮助）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:40:19.797

由于您声明当前只有相机预览可见，因此您可能没有正确订购视图。这就是我为创造你想要的东西所做的。

在Activity中创建派生自GLSurfaceView的MySurfaceView实例MyCameraPreview派生自SurfaceView的实例

在我的 Activity 的 onCreate 方法中，我执行以下操作：

```
mySurfaceView = new MySurfaceView(this);
addContentView(mySurfaceView, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
myCameraPreview = new MyCameraPreview(this, myCamera);
addContentView(myCameraPreview, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

请注意，使用此方法您不使用布局 xml。

这将在后台创建相机预览的两个视图。

现在您需要让 MySurfaceView 绘制透明背景，以便相机预览将显示在您渲染的对象后面。如果您使用的是 OpenGL ES 2.0，请将其添加到 MySurfaceView 类的构造函数中。

```
setEGLContextClientVersion(2);
setEGLConfigChooser(8,8,8,8,16,0);
getHolder().setFormat(PixelFormat.TRANSLUCENT);
setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY); 
```

我自己刚刚完成了这个过程，所以我可能错过了一些细节。

# python - python pickler - 超出递归深度

> ID：15992209
> 
> 赞同：6
> 
> 时间：2013-04-13T19:52:27.903
> 
> 标签：python, recursion, pickle

我正在尝试腌制我的元胞自动机类的实例，但出现此错误：

```
RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

我的元胞自动机由细胞列表（和一堆其他东西）组成，其中每个细胞都有指向它的邻居的指针。在这个特定的 CA 中，有 256 个单元。现在，我知道pickler 应该能够识别已经腌制的对象。

> 来自文档：
> *pickle 模块跟踪它已经序列化的对象，以便以后对同一对象的引用不会再次被序列化。

所以我真的不知道，为什么我超过了最大递归深度。

我认为也许pickler会进行深度优先酸洗，以便它首先跟随指针，超过递归堆栈然后引发异常。我知道我可以用 扩展最大递归深度`sys.setrecursionlimit()`，但我不认为这是好的或可扩展的解决方案。

**第一个问题**：酸洗深度优先酸洗吗？
**第二个问题**：知道如何防止这种异常吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T18:07:19.590

因此，正如@ExP 所说，pickler 会进行深度优先酸洗，这会导致递归超出异常。[无论如何，我在这里bugs.python.org](http://bugs.python.org/issue3119)找到了解决这个问题的方法。这意味着对于 python 3.1，pickler 甚至可以处理递归数据，例如图形。

还有一些不太优雅的解决方案需要更多时间来腌制一些递归数据，但它很简单（只需几行代码）。链接[在这里](http://bugs.python.org/issue2480)。

看起来，可能是时候开始慢慢向 python3 移动了。希望有人觉得这个答案有用。

# javascript - 添加确认弹窗

> ID：15992212
> 
> 赞同：0
> 
> 时间：2013-04-13T19:52:36.663
> 
> 标签：javascript

我有这个代码：

```
$action = "window.location = 'fruit_list.php.php?do=delete&id={$fruitdata['id']}";
echo '<a style="cursor: pointer" onclick="javascript:' . $action . '">Delete</a>';?> 
```

有没有办法添加以下代码以在单击链接时弹出确认框？

```
 onclick="return confirm('are you sure?')" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:47:24.827

您不需要在 onclick 中添加返回，只需

`<a href='#' onclick='confirm("Are you sure?")'> Click </a>`

[http://jsfiddle.net/PFKFq/1/](http://jsfiddle.net/PFKFq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:59:15.233

```
$action = "if(window.event) event=window.event; event.preventDefault();if (confirm('Are you sure?')){window.location = 'fruit_list.php.php?do=delete&id={$fruitdata['id']} }";
echo '<a style="cursor: pointer" onclick="javascript:' . $action . '">Delete</a>';?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T07:07:20.313

为什么你不使用`href`？

```
<?php
$link = "fruit_list.php?do=delete&id={$fruitdata['id']}";
echo "<a href='{$link}' onclick='return confirm(\"Delete ?\");'>Delete</a>"; 
```

# objective-c - 用图案填充 ImageView

> ID：15992220
> 
> 赞同：0
> 
> 时间：2013-04-13T19:53:33.060
> 
> 标签：objective-c

我正在尝试用 Pattern 填充 ImageView，但它的大小会增加而不是填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:14:55.277

您可以通过执行从以前的图像创建可调整大小的平铺图像

```
tileImage = [originalImage resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0) resizingMode:UIImageResizingModeTile]; 
```

现在，您可以拍摄此图像并将其设置在任何图像视图中。图像将平铺以填充整个图像视图。

# css - 为什么div在中心

> ID：15992221
> 
> 赞同：0
> 
> 时间：2013-04-13T19:53:33.640
> 
> 标签：css, html, parent

我知道这是您见过的最简单的问题，但实际上我无法在我的 css 中找到问题所在。我正在尝试在页脚 div 中浮动两个 div。但问题是第一个 div (#copyrights) 只是卡在中间。主容器 (#footer) 似乎有问题。因为当我将最后一个容器放在外面时，一切都很好

看看[我在 jsfiddle 上的代码](http://jsfiddle.net/cmWgb)。

这是我的 HTML（页脚 div 在底部）：

```
<div id="footer">
<!-- Upper footer -->
<div id="upper-footer">
    <!--Footer Navigation Links -->
    <ul>
        <li>
            <a href="#Home">Home</a>
        </li>
        <li>
            <a href="#About">About Us</a>
        </li>
        <li>
            <a href="#Mall">The Mall</a>
        </li>
        <li>
            <a href="#">Media Center</a>
        </li>
        <li>
            <a href="#">Contact Us</a>
        </li>
    </ul>
    <!-- End od Footer nav links -->
    <!--Start of newsletter div -->
    <div id="newsletter">
        <span>SignUp To Get The Latest News &amp; Updates</span>
        <form>
            <input class="rounded" type="text" value="Your Email Here..." >
            <input class="rounded-button" value="SUBSCRIBE" type="button" >
        </form>
    </div>
    <!--End of Newsletter div-->
</div>
<!-- End of upper footer -->
<!-- Start of lower footer -->
<div id="lower-footer"> 
<div id="copyrights">
    2013 Boulevar Mall. All rights reserved.
    </div>
    <div id="social">Follow us </div>
</div>
<!--End of lower footer --> 
```

这是我的CSS：

```
 @import url(http://fonts.googleapis.com/css?family=Droid+Sans);
#footer 
{ 
    height:100px; 
    font-family: 'Droid Sans', sans-serif; 
    text-transform:capitalize; 
    font-size:14px;
}
/*css for upper footer */
#upper-footer 
{
    height:70%; 
    background-color:#efe7e1;
}
#upper-footer #newsletter 
{
    float:right;
    height: 100%;
    display: table;
}

#upper-footer ul 
{
    list-style:none;
    margin-top: 0px; 
    float:left;
    width:480px;
}
#upper-footer ul li 
{
    display:inline-block;
    height: 100%;
    border-left: 1px solid d7cfca; 
}
#upper-footer ul li:nth-child(1) 
{
    border-left:none;
}
#upper-footer ul li a 
{ 
    line-height:200%; 
    text-decoration:none; 
    color:#9b907c; 
    display:block; 
    line-height:70px; 
    padding-left:15px; 
    padding-right:15px; 
    width: 100%; 
}
#upper-footer #newsletter span
{
    color:#726753;
    width:150px;
    display: table-cell;
    vertical-align: middle;
}

#upper-footer #newsletter form
{
    display: table-cell;
    vertical-align: middle;
    padding-left: 15px;
}
/*for rounded text box */
input.rounded 
{
    border: 1px solid #ccc;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    -moz-box-shadow: 2px 2px 3px #666;
    -webkit-box-shadow: 2px 2px 3px #666;
    box-shadow: 2px 2px 3px #666;
    font-size: 9.42px;
    padding: 4px 7px;
    outline: 0;
    -webkit-appearance: none;
    height:26px;
    width:163px;
    text-align:center;
}

/*for rounded button */
input.rounded-button 
{
    border: 1px solid #ccc;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
    border-radius: 8px;
    font-size: 9.42px;
    padding: 4px 7px;
    outline: 0;
    -webkit-appearance: none;
    height:29px;
    width:80px;
    background-color:#726753;
    color: white;
    font-weight: bold;
}
input.rounded-button:hover 
{
background-color:white;
border:#726753 solid 1px;
color:#726753
}

/*css for lower footer */
#lower-footer 
{
    background-color:#726753; 
    height:30%; 
    color:white;
}
#lower-footer #copyrights 
{
    float:left;
}
#lower-footer #social 
{
    float:right;
} 
```

您可以随意指出我的错误，因为我对这些东西很陌生 :) 在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:05:20.133

`#upper-footer ul`这是不让你`#copyrights`浮动到最左边的边距。尝试用`#upper-footer ul`以下替换规则

```
#upper-footer ul 
{
    list-style:none;
    margin: 0; 
    float:left;
    width:480px;
} 
```

它将所有边距设置`#upper-footer ul`为零而不是仅`margin-top`。

## 更新

由于元素的`margin`溢出*其父*元素，设置for也可以解决问题。`#upper-footer ul`*`#upper-footer``overflow: hidden``#upper-footer`*

# wpf - Alt+ 打开组合框的快捷方式

> ID：15992224
> 
> 赞同：1
> 
> 时间：2013-04-13T19:53:44.560
> 
> 标签：wpf, keyboard-shortcuts

假设我们有以下 XAML：

```
 <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center">

        <Button Content="_Test" Margin="12" Width="200" Height="30" Click="OnClick" />

        <ComboBox Margin="12" Width="200" Height="30" >
            <ComboBox.Items>
                <ComboBoxItem>First</ComboBoxItem>
                <ComboBoxItem>Second</ComboBoxItem>
                <ComboBoxItem>Third</ComboBoxItem>
            </ComboBox.Items>
        </ComboBox>
    </StackPanel> 
```

Alt+T 快捷键将按下按钮。如何使 Alt+R 快捷键打开组合框下拉菜单？

**更新：**顺便说一句，我知道标签的目标属性，我知道我可以创建 KeyBinding（或类似的东西）并处理例如 Ctrl+R，但我正在寻找更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:06:55.700

我找到了以下解决方案。没有我想象的那么简单，但我可以忍受。

首先，我需要指定 ComboBox 的名称：

```
 <ComboBox x:Name="ResourcesComboBox" Margin="12" Width="200" Height="30" >
        <ComboBox.Items>
            <ComboBoxItem>First</ComboBoxItem>
            <ComboBoxItem>Second</ComboBoxItem>
            <ComboBoxItem>Third</ComboBoxItem>
        </ComboBox.Items>
    </ComboBox> 
```

其次，在视图构造函数中注册访问键“R”并在事件处理程序中打开 ComboBox：

```
 public MainView()
    {
        InitializeComponent();

        AccessKeyManager.Register("R", ResourcesComboBox);
        AccessKeyManager.AddAccessKeyPressedHandler(ResourcesComboBox, AccessKeyPressedEventHandler);
    }

    //...

    private void AccessKeyPressedEventHandler(object sender, AccessKeyPressedEventArgs e)
    {
        ResourcesComboBox.IsDropDownOpen = true;
    } 
```

# python - 根据翻译区分列表

> ID：15992225
> 
> 赞同：1
> 
> 时间：2013-04-13T19:53:54.213
> 
> 标签：python, django, list, multilingual

我有一个使用 hvad 包的多语言领域。我有一个像下面这样的脚本，我用它来做美味的脱水。

```
 array = []
    for t in bundle.obj.facilities.filter(foo_type = i.foo_type):
        for field in get_translatable_fields(t.foo_type.__class__):
            for translation in t.foo_type.translations.all():
                value = getattr(translation, field)
                array.append(value)
                print array 
```

但是我在同一个列表中获得了所有语言翻译。你有什么想法让不同的列表属于不同的语言。

我只想在`for translation in ....`迭代过程中有不同的数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:27:01.887

`translation`您可以使用 a将它们存储在由 索引的字典中`collections.defaultdict`：

```
import collections

dict_all = collections.defaultdict(list)
for t in bundle.obj.facilities.filter(foo_type = i.foo_type):
    for field in get_translatable_fields(t.foo_type.__class__):
        for translation in t.foo_type.translations.all():
            value = getattr(translation, field)
            dict_all[translation.language_code].append(value) 
```

如果您想在之后将其转回常规字典（而不是 a `defaultdict`）：

```
dict_all = dict(dict_all.items()) 
```

# powershell - 仅重定向标准错误，使用 System.Diagnostics.Process 将标准输出定向到控制台

> ID：15992226
> 
> 赞同：1
> 
> 时间：2013-04-13T19:54:00.563
> 
> 标签：powershell

我正在使用 System.Diagnostics.Process，因为它允许我获取错误代码和相关错误。

但是，当我设置`StartInfo.RedirectStandardOutput = $false`输出时不会回显到我的控制台窗口，所以目前我被迫添加一个额外的 by-ref 参数 $stdout 并从调用函数中回显它。

这并不理想，因为某些命令可能会生成大量文本，而且我担心缓冲区溢出。

我仍然可以使用下面类似的 System.Diagnostics.Process 代码的任何方式，仍然将错误捕获到字符串，但让输出正常流向控制台而不重定向到标准输出？

```
function Run([string] $runCommand,[string] $runArguments,[ref] [string] $stderr)
{
    $p = New-Object System.Diagnostics.Process
    $p.StartInfo = New-Object System.Diagnostics.ProcessStartInfo;
    $p.StartInfo.FileName = $runCommand
    $p.StartInfo.Arguments = $runArguments
    $p.StartInfo.CreateNoWindow = $true
    $p.StartInfo.RedirectStandardError = $true
    $p.StartInfo.RedirectStandardOutput = $false
    $p.StartInfo.UseShellExecute = $false

    $p.Start() | Out-Null
    $p.WaitForExit()

    $code = $p.ExitCode
    $stderr.value = $p.StandardError.ReadToEnd()

    # what I have been doing is using a stdout by-ref variable and echoing out contents
    # $stdout.value = $p.StandardOutput.ReadToEnd()

    return $code
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:03:51.813

您可能不需要使用 System.Diagnostics.Process 对象。只需执行 EXE 并像这样收集信息：

```
$stdout = .\foo.exe 2> fooerr.txt
Get-Content fooerr.txt
return $LastExitCode 
```

# google-app-engine - GWT 模块重新启动导致内存不足错误

> ID：15992227
> 
> 赞同：4
> 
> 时间：2013-04-13T19:54:03.720
> 
> 标签：google-app-engine, gwt

我正在开发一个 GWT 应用程序，并且在 Eclipse 的开发模式下进行测试时遇到问题。

当我对客户端代码进行更改时，我会刷新浏览器页面 (F5) 以重新加载模块。每次我这样做（无论代码是否更改），eclipse 中的开发选项卡都会显示一个新的项目符号点，其中包含“模块 xxxx 已加载”。同样，根据任务管理器，每次执行此操作时，javaw.exe 主机进程都会增加大约 1MB 的内存。最终（10-20 次刷新后），页面无法加载，开发模式选项卡显示此错误：

`Out of memory; to increase the amount of memory, use the -Xmx flag at startup (java -Xmx128M ...)`

我可以通过停止并重新启动服务器来解决这个问题（不是开发人员模式选项卡中的小刷新按钮，而是红色停止按钮），但是必须重新验证模块，这需要一段时间。当我重新加载一个新模块时，eclipse 似乎没有意识到我已经完成了旧模块。我在一个全新的 GWT 项目中观察到相同的行为，所以我认为这不是我的代码。有谁知道解决这个问题的方法？

**编辑**：有关可能的解决方案，请参阅下面的*两个*答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T21:00:57.293

gwt 开发模式使用的默认设置是 minimum ，因此您很快就会遇到内存不足的情况。

![在此处输入图像描述](https://i.stack.imgur.com/ajEpq.png)

从这里你可以看到 permgenspace 太低了，如果你在短时间内刷新 20 次，它就会耗尽内存。

您可以从使用以下 vmargs 开始：

```
-Xms512m -Xmx512m -XX:MaxPermSize=256M -XX:+UseParallelGC 
```

但正如 enrybo 指出的那样，如果您的应用程序增长它需要更多内存：

```
-Xms512m -Xmx1g -XX:MaxPermSize=256M -XX:+UseParallelGC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T20:53:07.000

你能做的真的不多。正如您所提到的，您可以增加内存，但最终即使分配了更多内存，您也会遇到同样的问题。

我建议您尝试在[超级开发模式下](https://developers.google.com/web-toolkit/articles/superdevmode)运行，但在这种情况下，您需要将您正在使用的 SDK 更新为`2.5.1+`. 使用超级开发模式，您的浏览器不需要插件，因为它实际上会运行真正的 Javascript。您甚至可以在浏览器中调试但查看 Java 源代码（使用源映射）。

# xaml - 我无法放置或设置用户控件的背景或边框

> ID：15992228
> 
> 赞同：0
> 
> 时间：2013-04-13T19:54:04.173
> 
> 标签：xaml

我为我的 xaml 项目创建了一个简单的用户控件，但正如您从我的图像中看到的那样，我似乎无法做某些事情。

![在此处输入图像描述](https://i.stack.imgur.com/5M9rY.png)

*忽略红线，它是控件的大小，用于说明它的大小。*

它的位置应该在屏幕中间：

```
<Client:TileMenu HorizontalAlignment="Center" VerticalAlignment="Center" Name="TileOverlayMenu" Background="Azure" BorderBrush="Aquamarine" BorderThickness="3" /> 
```

正如你所看到的，它的背景颜色应该是“Azure”，蓝色边框为 3。

为什么是这样？

在后台我有一个画布：

```
<Grid x:Name="ContentPanel" Grid.Row="0" Margin="12,0,12,0">

            <Canvas Name="GameCanvas">

                <Canvas.RenderTransform>
                    <CompositeTransform x:Name="CanvasRenderTransform" />
                </Canvas.RenderTransform>

                <toolkit:GestureService.GestureListener>
                    <toolkit:GestureListener DragStarted="GestureListener_DragStarted" DragDelta="GestureListener_DragDelta" Tap="GestureListener_Tap" PinchStarted="GestureListener_PinchStarted" PinchDelta="GestureListener_PinchDelta"/>
                </toolkit:GestureService.GestureListener>

            </Canvas>

            <Client:TileMenu HorizontalAlignment="Center" VerticalAlignment="Center" Name="TileOverlayMenu" Background="Azure" BorderBrush="Aquamarine" BorderThickness="3" />

        </Grid> 
```

至于我的第三个问题，画布中的事件会导致移动滑块被打断，使我每次只能推动一点：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:14:36.093

如果`TileMenu`是 UserControl，则必须在 UserControl 的 XAML 中的顶级容器上设置这些属性，因为这定义了控件的整个可视结构。

但是，您可以绑定到 UserControl 中的适当值：

```
<UserControl x:Class="YourNamespace.TileMenu" ...
             x:Name="tileMenu">
    <Border BorderBrush="{Binding BorderBrush, ElementName=tileMenu}"
            BorderThickness="{Binding BorderThickness, ElementName=tileMenu}">
        <Grid>
            ...
        </Grid>
    </Border>
</UserControl> 
```

# html - Safari 中的 z-index 问题

> ID：15992229
> 
> 赞同：2
> 
> 时间：2013-04-13T19:54:06.797
> 
> 标签：html, css, firefox, safari, z-index

我在使用 safari 中的固定元素时遇到了一些问题。我在 Firefox 中创建了滚动站点，甚至不需要将简单文本 div 的 z-index 指定为位于其他内容之后，直到向下滚动到。但出于某种原因，它在 Safari 中出现在其他所有内容之前。我已经尝试为它创建一个负 z-index 并为其他所有东西创建一个正 z-index 但没有变化。这是它的代码。

谢谢你的帮助！

如果这有助于更有意义，这里也是查看它的链接（您必须登录才能查看该站点 - 使用用户名 stackoverflow 密码：stackoverflow

[http://lynchbryan.com/wp-login](http://lynchbryan.com/wp-login)

```
<div id="tagline">
   <span class="tags">We</span><span class="tagl">partner</span> <span class="tags">with clients to</span> </br><span class="tagl">cultivate</span> <span class="tags">the</span> <span class="tagl">potential</span><span class="tags"> of people</span>
</div> 
```

```
#post-16 #tagline {
    position:fixed;
    bottom:50%;
    text-align: center;
    left: 50%;
    z-index:-999;
}

#post-16 .tags {
    font-family:'AndesLight';
    font-size:23px;
    color:#ffffff;
    padding:0 10px;
}

#post-16 .tagl {
    font-family:'ThirstyRoughReg';
    font-size:50px;
    color:#ffffff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:06:14.227

我不建议尝试用`z-index`. 相反，您应该尝试`display: none;`. 如果这不是您遇到的问题，那么我仍然不建议设置负值`z-index`。将这些值保持在 0 或以上是一种很好的做法。尝试将其他所有内容的 z-index 设置为更高的数字，例如 3 或 4，然后设置`#post-16 #tagline`为 1 或 2。

**编辑**

根据您的评论，您想隐藏`.tags`和`.tagl`。您应该执行以下 CSS 规则，忽略`z-index`：

```
.tags, .tagl { display: none; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:38:48.037

基于你已经拥有的。一个非常简单的例子是。您可能希望经常调用滚动事件，因为它会被调用很多。

```
#post-16 #tagline {
  position:fixed;
  bottom:50%;
  text-align: center;
  left: 50%;
  display: none;
}

//cache the element so you only need to look it up once.
var $tag = $('#post-16 #tagline');

//name space the scroll event
$(document).on('scroll.show-tagline' function (e) {
  //this is how far the document has been scrolled in pixels
  var scrolled = $(this).scrollTop();
  //what ever value you want
  if ( scrolled > 300 ) { 
    $tag.show();
  } else {
    $tag.hide();
  }
}) 
```

# c# - Awesomium，更改用户代理和推荐人

> ID：15992233
> 
> 赞同：2
> 
> 时间：2013-04-13T19:54:22.207
> 
> 标签：c#, user-agent, referrer, awesomium

我刚开始使用 awesomium。我想了解如何更改用户代理和推荐人。例如，我需要初始化 5 istance o awesomium webcontrol，对于它们中的每一个，我需要不同的用户代理和不同的推荐人。这是我的简单代码

```
 private void newbrowser()
    {
            browser = new Awesomium.Windows.Forms.WebControl();
            browser.Paint += browser_Paint;
            browser.Location = new System.Drawing.Point(1, 1);
            browser.Name = "webControl";
            browser.Size = new System.Drawing.Size(1024, 768);
            browser.Source = new System.Uri("https://www.google.com/", System.UriKind.Absolute);
            browser.TabIndex = 0;

    }

    void browser_Paint(object sender, PaintEventArgs e)
    {
        browser.Paint -= browser_Paint;

        System.Collections.Specialized.NameValueCollection myCol =
            new System.Collections.Specialized.NameValueCollection();
        myCol.Add("Referer", "http://www.yahoo.com");

        browser.SetHeaderDefinition("MyHeader", myCol);
        browser.AddHeaderRewriteRule("http://*", "MyHeader");
    }
    private void button1_Click(object sender, EventArgs e)
    {
        newbrowser();
    } 
```

这 2 行给出了一个错误

```
 browser.SetHeaderDefinition("MyHeader", myCol);
        browser.AddHeaderRewriteRule("http://*", "MyHeader"); 
```

> 错误 1“Awesomium.Windows.Forms.WebControl”不包含“SetHeaderDefinition”的定义错误1“Awesomium.Windows.Forms.WebControl”不包含“AddHeaderRewriteRule”的定义

谢谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-22T15:02:38.663

您需要设置管理 WebControl 的 WebCore 的用户代理。这必须在您创建 WebControl 之前完成。

```
public WebForm()
{
    if ( !WebCore.IsRunning )
        WebCore.Initialize( new WebConfig() { UserAgent = "YourUserAgent" } );

    InitializeComponent();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-16T14:14:25.833

我的解决方案 - 是 WebBrowser 的包装器，它实现了 IResourceInterceptor 并且可以使用任何其他标题进行导航：

```
public class class BrowserWrapper : IResourceInterceptor
{
    public BrowserWrapper()
    {
        WebCore.ResourceInterceptor = this;
        //BrowserWrapper can contains WebBrowser or knows how to delegate him Naviagtion (Source property)
    }

    private readonly ConcurrentDictionary<Uri, string> headers = new ConcurrentDictionary<Uri, string>();

    public void Navigate(Uri uri, string additionalHeaders = null)
    {
        if (additionalHeaders != null) headers.AddOrUpdate(uri, additionalHeaders, (url, h) => h);
        //Navigation to browser (WebControl.Source = uri...)
    }

    ResourceResponse IResourceInterceptor.OnRequest(ResourceRequest request)
    {
        string h;
        if (headers.TryRemove(request.Url, out h))
        {
            var hs = h.Split(':');
            request.AppendExtraHeader(hs[0], hs[1]);
        }
        return null;
    }

    bool IResourceInterceptor.OnFilterNavigation(NavigationRequest request)
    {
        return false;
    }
} 
```

# android - 适用于 Android 的 Google 日历 API

> ID：15992234
> 
> 赞同：12
> 
> 时间：2013-04-13T19:54:23.450
> 
> 标签：android, google-calendar-api

我想为使用 Google Calendar Api 的 Android 设备创建一个应用程序。但是，由于我阅读过的所有论坛和文章的信息不同，我对 api 感到困惑。我的问题是，真的存在适用于 Android 的 Google Calendar Api 吗？因为看起来这个 api 的文档鲜为人知。其次，如果有，是否可以将数据直接从应用程序从设备传递到网络？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T20:40:42.683

官方的 Android[日历提供程序和 API](http://developer.android.com/guide/topics/providers/calendar-provider.html)背后有相当多的文档，但是它只在 Ice Cream Sandwich (API v14) 中引入，所以很多在线搜索结果可能是指他们在 ICS 之前创建的制造商特定日历 API或[Google 日历 API](https://developers.google.com/google-apps/calendar/)（不是 Android 特定的或集成到 Android 中的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:59:33.030

您是在谈论在 API 级别 14 中发布的 Android 4.0 日历 API 吗？如果你是，那么我刚刚写了一篇关于如何启动和运行 API 的文章。 [使用 Android 4.0 日历 API](http://www.derekbekoe.co.uk/blog/16-using-the-android-4-0-calendar-api "使用 Android 4.0 日历 API")

# mysql - Codeigniter 加入多个条件

> ID：15992236
> 
> 赞同：20
> 
> 时间：2013-04-13T19:54:42.897
> 
> 标签：mysql, codeigniter, join

我正在使用 Codeigniter Active Records 类，我想将我的`users`表与我的`clients`表连接起来，这样我就可以显示用户的“真实”姓名，而不仅仅是他们的 ID。

这是`clients`表的样子（示例），列 a_1、a_2 和 a_3 对应于我的`users`表，特别是`user id`：

```
 clients
|--------|---------|----------|-----------|----------|
|  id    |   name  |   a_1    |    a_2    |   a_3    |
|--------|---------|----------|-----------|----------|
|   1    |   Paul  |    2     |     4     |    1     | 
```

我的`users`桌子看起来像这样：

```
 users
|--------|---------|----------|
|  id    |  first  |   last   |  
|--------|---------|----------|
|   1    |   Paul  |  Blake   |
|--------|---------|----------|
|   2    |   Dan   |   Doe    |
|--------|---------|----------|
|   3    |  Steve  |  Smith   |
|--------|---------|----------|
|   4    |  Harry  |  Jones   |
|--------|---------|----------| 
```

所以，基本上，如果我从`clients`表中选择并加入它，它看起来像这样：

```
 clients
|--------|---------|----------|-----------|----------|
|  id    |   name  |   a_1    |    a_2    |   a_3    |
|--------|---------|----------|-----------|----------|
|   1    |   Paul  | Dane Doe |Harry Jones|Paul Blake| 
```

到目前为止，我已经尝试过（没有奏效，它只是为所有人显示相同的名称）：

```
<?
 $this->db
  ->select('name, a_1, a_2, a_3')
  ->from('clients')
  ->join('users', 'users.id=a_1 OR users.id=a_2 OR users.id=a_3'); 
```

任何帮助都会很棒！

**解决方案：**

这是我能够想出的有效方法（感谢@elavarasan lee）：

```
<?
 $this->db
  ->select('CONCAT(u1.first," ", u1.last) as a_1_name, CONCAT(u2.first," ", u2.last) as a_2_name, CONCAT(u3.first," ",u3.last) as a_3_name', FALSE)
  ->from('clients')
  ->join('users AS u1', 'u1.id=a_1', 'left')
  ->join('users AS u2', 'u2.id=a_2', 'left')
  ->join('users AS u3', 'u3.id=a_3', 'left'); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-13T21:23:37.387

尝试这个

```
$this->db
  ->select('*')
  ->from('clients')
  ->join('users', 'users.id = clients.a_1 OR users.id=clients.a_2 OR users.id = clients.a_3');

$query = $this->db->get();

return $query->result(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T21:17:00.603

@Dodinas：我得到了 MYSQL 查询的解决方案。我发现很难将查询转换为 CI Active Record。但是试试这个：

```
    $sql = "SELECT `name`, CONCAT(`u1`.`first`,' ', `u1`.`last`) as a_1,
                           CONCAT(`u2`.`first`,' ', `u2`.`last`) as a_2,
                           CONCAT(`u3`.`first`,' ', `u3`.`last`) as a_3
            来自“客户”
            LEFT JOIN `users` as `u1` ON (`u1`.`id`=`a_1`)
            LEFT JOIN `users` as `u2` ON (`u2`.`id`=`a_2`)
            LEFT JOIN `users` as `u3` ON (`u3`.`id`=`a_3`)";

    $result = $this->db->query($sql);

```

![从 PHP Myadmin 获取的查询结果截图](https://i.stack.imgur.com/Ynz8F.png)

# wpf - 处理 DataGridTextColumn 上的粘贴命令

> ID：15992246
> 
> 赞同：1
> 
> 时间：2013-04-13T19:56:23.600
> 
> 标签：wpf, xaml, datagrid, commandbinding

我有一个要限制输入的 DataGridTextViewColumn。我已经为 PreviewTextInput 和 PreviewKeyDown 事件附加了处理程序，但我还需要通过粘贴命令限制输入。如何处理此文本列的粘贴命令？我的尝试如下：

```
<DataGridTextColumn Binding="{Binding MyProperty, UpdateSourceTrigger=PropertyChanged}"
                    Width="Auto">
    <DataGridTextColumn.EditingElementStyle>
        <Style TargetType="TextBox">
            <EventSetter Event="PreviewTextInput"
                         Handler="MyProperty_PreviewTextInput"/>
            <!-- Space, backspace, and delete are not available in PreviewTextInput,
                 so we have to capture them in the PreviewKeyDown event -->
            <EventSetter Event="PreviewKeyDown"
                         Handler="MyProperty_PreviewKeyDown"/>
            <!-- I get a compiler error that "The Property Setter 'CommandBindings'
                 cannot be set because it does not have an accessible set accessor" -->
            <Setter Property="CommandBindings">
                <Setter.Value>
                    <CommandBinding Command="Paste"
                                    Executed="MyProperty_PasteExecuted"/>
                </Setter.Value>
            </Setter>
        </Style>
    </DataGridTextColumn.EditingElementStyle>                    
</DataGridTextColumn> 
```

我理解为什么我的尝试不起作用，我只是找不到一个我满意的解决方案来满足我的需求。到目前为止，我发现的唯一解决方案是 2010 年的这篇 SO 帖子（[DataGridTextColumn 事件绑定](https://stackoverflow.com/questions/2352799/datagridtextcolumn-event-binding)）。我希望现在有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:54:26.067

从错误`CommandBindings`属性可以明显看出`doesn't have setter`，因此您无法从 Style 设置它，但如果您将 CommandBindings 声明为`inline element in TextBox`.

`CommandBindings.Add()`在内部，如果您在 textBox 中将属性声明为内联，则xaml 会调用该属性。因此，作为一种解决方法，您可以使用`DataGridTemplateColumn`并提供一个`CellTemplate`and`CellEditingTemplate`给它一个`DataGridTextColumn`. 它的小样本 -

```
 <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding MyProperty}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding MyProperty}"
                                 PreviewTextInput="MyProperty_PreviewTextInput"
                                 PreviewKeyDown="MyProperty_PreviewKeyDown">
                            <TextBox.CommandBindings>
                                <CommandBinding Command="Paste" 
                                    Executed="CommandBinding_Executed"/>
                            </TextBox.CommandBindings>
                        </TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns> 
```

# android - Android VideoView 不处于纵向模式

> ID：15992248
> 
> 赞同：1
> 
> 时间：2013-04-13T19:56:41.920
> 
> 标签：android

我有一个可以播放的介绍视频，不同大小的视频放置在 drawable-[h,m,l]dpi 文件夹中。我将其设置为始终以纵向模式播放。

布局

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent" >
   <VideoView android:id="@+id/myvideoview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:orientation="vertical"/>
 </RelativeLayout> 
```

显现

```
<activity android:name=".IntroActivity"
                  android:configChanges="keyboardHidden|orientation|screenSize"
                  android:screenOrientation="portrait"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

但是，该视频在我的 4.0.4 平板电脑上以横向播放，但在我的 2.2.1 手机上可以使用。

介绍活动

```
protected void onStart()
{
    try
    {   
        setContentView(R.layout.intro);
        videoHolder = (VideoView)findViewById(R.id.myvideoview);

        Uri video = Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.intro);
        videoHolder.setVideoURI(video);

        videoHolder.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
        {
            public void onCompletion(MediaPlayer mp)
            {
                if (touched == false)
                {
                    startActivity(new Intent("com.eg.flupaniclite.menu"));
                }

            }
        });
        videoHolder.setOnErrorListener(new MediaPlayer.OnErrorListener()
        {
            @Override
            public boolean onError(MediaPlayer mp, int what, int extra)
            {
                if (touched == false)
                {
                    startActivity(new Intent("com.eg.flupaniclite.menu"));
                }
                return false;
            }
        });

        videoHolder.start();

    }
    catch (Exception e)
    {
        if (touched == false)
        {
            startActivity(new Intent("com.eg.flupaniclite.menu"));
        }
    }

    super.onStart();
} 
```

# c# - 什么是 => 调用以及如何在 C# 中使用

> ID：15992249
> 
> 赞同：0
> 
> 时间：2013-04-13T19:56:49.547
> 
> 标签：c#

我在示例代码中看到了 => 的使用，但我不知道这个操作数叫什么。因为这个词只是符号，谷歌搜索不是很有帮助。

以下是它的使用示例：

```
var rolesAllowed = rolePermission.Where(permission => permission.Permissions.Any(p => Demand.HasFlag(p.Type))).ToList(); 
```

这个问题与那些公然标记为“重复”的问题不同。我正在寻找表达式的名称，以便研究如何使用它。所谓的重复项是针对已经知道 => 被称为 lambda 表达式的人。

我要感谢花时间阅读和理解问题并发布高质量回复的人们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T19:59:45.243

它被称为*[Lambda 运算符](http://msdn.microsoft.com/en-us/library/bb397687.aspx)*

> **要创建 lambda 表达式，请在lambda 运算符 =>**的左侧指定输入参数（如果有），并将表达式或语句块放在另一侧。例如，lambda 表达式 x => x * x 指定一个名为 x 的参数并返回 x 的平方值。

*Lambda 表达式*使用特殊语法。它们允许将函数用作变量或字段等数据。lambda 表达式语法使用`=>`运算符。*[这将匿名函数](http://msdn.microsoft.com/en-us/library/bb882516.aspx)*的参数和语句体分开。

该`=>`运算符可以读作**“goes to”**，并且总是在声明 lambda 表达式时使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T20:01:13.697

这用于[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。本质上， Where 函数所接受的是另一个遍历集合的函数。=> 的左侧定义参数，右侧是实际运行的函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T19:58:40.957

它被称为[lambda 运算符](http://msdn.microsoft.com/en-us/library/vstudio/bb311046.aspx)，它是[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)语法的一部分。

[Lambda 表达式是创建匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=vs.80%29.aspx)的非常简洁的方式。

匿名方法示例：

```
button1.Click += delegate(System.Object o, System.EventArgs e)
                   { MessageBox.Show("Click!"); }; 
```

相同的代码，但这次使用 lambda 表达式：

```
button1.Click += (o,e) => MessageBox.Show("Click!"); 
```

如图所示，这种语法是编写匿名方法的一种很好的速记符号，其中可以将一堆参数传递到一组语句中进行处理。.NET 平台中将委托对象作为参数的任何方法都可以替换为相关的 lambda 表达式，这通常会大大简化您的代码库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T19:59:19.720

这是[lambda 运算符](http://msdn.microsoft.com/en-us/library/vstudio/bb311046.aspx)，它创建一个 lambda 表达式，就像一个匿名方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-13T20:00:02.263

**=>**是一个[lambda 运算符](http://msdn.microsoft.com/en-us/library/bb397687.aspx)，请查看链接以了解更多信息。

另请查看[此](https://stackoverflow.com/questions/1552827/lambda-expression-common-syntax)答案以获取更多详细信息。

# c# - 如何正确设置模型、POCO 类？

> ID：15992252
> 
> 赞同：2
> 
> 时间：2013-04-13T19:56:53.953
> 
> 标签：c#, asp.net-mvc, entity-framework, data-annotations, poco

我对如何正确设置我的模型有点困惑。下面你会看到我的 POCO，我想知道如何自动增加 ID，以及是否有必要设置数据注释 [Key]。是否有某种命名约定使 EF 识别 ID/主键或者我必须使用 [Key] 数据注释？

是否还需要在子实体中设置 [Key] 数据注释？

```
 public class User
{
    [Key]
    public int UserId { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public string Email { get; set; }
    public DateTime Reg { get; set; }
    public virtual ICollection<Stats> Stats { get; set; } 
}

public class Stats
{
    [Key]
    public int StatId { get; set; }
    public string Age { get; set; }
    public string Height { get; set; }
    public string Weight { get; set; }
    public bool Sex { get; set; }
}

public class BodylogContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Stats> Stats { get; set; } 

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Database.SetInitializer<BodylogContext>(null);
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:13:44.043

您应该查看 Entity Framework Code First 教程以获取更多详细信息。

具体来说，在您的情况下和一些基本规则（免责声明：）**我并不想涵盖所有内容**，只是一些基本规则......

*   您可以删除`[Key]`-
    如果您使用`<Entity>Id`- 或者`Id`默认情况下将其制作成 PK。
    'FK-s' 和相关的也是`navigation properties`如此（除了它`<Property>Id`也是按约定映射的），
    它不区分大小写。

*   默认情况下标识 - 对于有意义的 pk 类型 - int、long ... - 不适用于字符串，

*   如果你有`more than one`pk - 那么你需要用 Key '装饰'它 - 或者在流利的配置中，

ETC...

**注意：**您可以调整和`conventions`从流利的配置中删除。
同样从 EF6，您将能够为您的代码定义一个新的。

> **我的建议**：打开`Migrations`并查找迁移脚本代码（.cs 文件）生成的文件。它总是清楚地说明什么是键、索引等。了解如何实际创建 Db 的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:03:26.323

我也刚开始使用 MVC，我发现[本](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)教程回答了您提出的大部分问题。

默认情况下，实体框架将名为 ID 或 classnameID 的属性解释为主键。因此，在您的`User`课程中，您不需要 UserId 属性上的 [Key] 属性。在您的`Stats`班级中，该属性与班级名称不匹配（您已将名称复数），因此您需要该属性。

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)

# c++ - windows.h 的 Beep() 的更快替代方案

> ID：15992253
> 
> 赞同：7
> 
> 时间：2013-04-13T19:57:06.277
> 
> 标签：c++, windows, beep

我正在做一个个人项目。我想用一台旧的业余无线电通过空中传输一些数据。

我的初稿应用程序是这样工作的：

我用 4 个“信号”构造一个字节：

*   5000hz 表示“00”

*   6khz的意思是“01”

*   7khz的意思是“10”

*   8khz的意思是“11”

*   9khz的意思和上一个一样

然后我将这 4 位合并在一起，然后从下一位重新开始。

解调效果很好，应该足够快，但我在声音生成方面遇到了问题......它很慢......

这是我的调试代码：

```
#include <iostream>
#include <windows.h>

using namespace std;

int main()
{
Beep( 5000, 100 );
Beep( 6000, 100 );
Beep( 7000, 100 );
Beep( 8000, 100 );
Beep( 9000, 100 );
return 0;
} 
```

我期待 5 次哔哔声，彼此靠近，每次 100 毫秒，但这是我得到的（顶部是五个“100ms 哔声（）”，底部是五个“20ms 哔声（）”： ![一个](https://i.imgur.com/wTnXggT.png)

正如你所看到的，当我想要 100 毫秒的哔声时，我得到的是 50 毫秒的哔声，然后是 75 毫秒的暂停，当我想要 20 毫秒的哔声时，我得到的是 10 毫秒的哔声，然后是 100 毫秒的暂停。

**有没有比 Beep() for Windows 更快、更准确的方法？（同样适用于 linux 的东西会更好，因为最终的应用程序应该在树莓派上运行）**

我会用 3ms 的声音获得更高的可用带宽（...... 41 字节/秒......这对我的应用程序来说已经足够了）

编译器：g++ (mingw)

操作系统：7 个 64 位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:03:51.423

一种方法（因为您也想以 Linux 为目标，所以这很合适）是生成一个 WAV 文件，然后播放它。（有一些简单的方法可以在 Windows 和 Linux 上[播放WAV 文件。）](http://www.mplayer2.org/downloads/)

您可以使用库来生成 WAV 文件，也可以自己创建，这两种方法都非常简单。网上有很多[例子](http://www.codeproject.com/Articles/29676/CWave-A-Simple-C-Class-to-Manipulate-WAV-Files)。

如果你自己做：

```
/* WAV header, 44 bytes */
struct wav_header {
    uint32_t riff packed;
    uint32_t len packed;
    uint32_t wave packed;
    uint32_t fmt packed;
    uint32_t flen packed;
    uint16_t one packed;
    uint16_t chan packed;
    uint32_t hz packed;
    uint32_t bpsec packed;
    uint16_t bpsmp packed;
    uint16_t bitpsmp packed;
    uint32_t dat packed;
    uint32_t dlen packed;
}; 
```

初始化：

```
void wav_header(wav_header *p, uint32_t dlen)
{
    memcpy(p->riff, "RIFF", 4);
    p->len = dlen + 44;
    memcpy(p->wave, "WAVE", 4);
    memcpy(p->fmt, "fmt ", 4);
    p->flen = 0x10;
    p->one = 1;
    p->chan = 1;
    p->hz = 22050;
    p->bpsec = hz;
    p->bpsmp = 1;
    p->bitpsmp = 8;
    memcpy(p->dat, "data", 4);
    p->dlen = dlen;
} 
```

# excel - 保存时Excel文件弹出到屏幕前面

> ID：15992259
> 
> 赞同：0
> 
> 时间：2013-04-13T19:58:05.247
> 
> 标签：excel, vba

我有一个简单的宏，每 30 秒保存一个 excel 文件（在 excel 2003 中）。我打开了两个运行相同宏的 excel 文件。问题是当他们将工作簿“弹出”保存在我打开的其他工作簿前面时。

这非常烦人，有谁知道如何防止这种行为..？

```
Public Sub macro_save()
    Application.EnableEvents = False
    Application.DisplayAlerts = False

    ThisWorkbook.Save
    If Second(Now) < 30 Then
        Application.OnTime VBA.TimeSerial(Hour(Now), Minute(Now), 30), "macro_save"
    Else
        Application.OnTime VBA.TimeSerial(Hour(Now), Minute(Now) + 1, 0), "macro_save"
    End If

    Application.EnableEvents = True
    Application.DisplayAlerts = True
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:10:23.440

将此行添加为您的子中的第一行：

```
Dim WBactive as Workbook
Set WBactive = Activeworkbook 
```

在`End Sub`添加此行之前

```
WBactive.Activate 
```

您还可以添加第三行：

```
Application.ScreenUpdating = False 
```

但请记住在结束您的子之前将其设置为反向：

```
Application.ScreenUpdating = True 
```

# javascript - 使用 Rangy 库在 contenteditable div 中查找和设置光标位置

> ID：15992271
> 
> 赞同：1
> 
> 时间：2013-04-13T19:59:06.970
> 
> 标签：javascript, jquery, rangy

我刚刚下载了流行的`Rangy library`. 我有以下html

```
<div id="myEditor" contenteditable="true"></div>
<button>Submit</button> 
```

这是我的jQuery代码

```
$("button").on("click",function(){ var caretPosition = * how to do it; console.log(caretPosition); }); 
```

# c# - 如何从字符串中读取？

> ID：15992273
> 
> 赞同：0
> 
> 时间：2013-04-13T19:59:08.890
> 
> 标签：c#, function, datetime, methods, datetimepicker

我正在尝试学习如何根据用户选择的时间安排图片。

这是有问题的代码：

```
private void startjob()
{
     string theDate = DateTimePicker1.Value.ToString();
     DateTime dt = Convert.ToDateTime(date);
     {
         DateTime start = new DateTime(2009, 12, 9, 10, 0, 0); //How Do I make this to read the string that is converted from DateTimePicker instead of this?
         DateTime end = new DateTime(2009, 12, 10, 12, 0, 0); //How Do I make this to read the string that is converted from DateTimePicker instead of this?
         DateTime now = DateTime.Now;
         if ((now > start) && (now < end))
         {
         //match found
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T20:01:40.480

[DateTimePicker.Value](http://msdn.microsoft.com/en-gb/library/system.windows.forms.datetimepicker.value.aspx)返回`DateTime`对象。您正在尝试不必要地转换为字符串类型。

```
DateTime start = DateTimePickerStart.Value;
DateTime end = DateTimePickerEnd.Value; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T20:05:00.347

假设您的控件被命名为 DateTimePicker1 和 DateTimePicker2：

```
private void startjob()
{
    DateTime start = DateTimePicker1.Value;
    DateTime end = DateTimePicker2.Value;
    DateTime now = DateTime.Now;
    if ((now > start) && (now < end))
    {
    //match found
    }
} 
```

DateTimePicker.Value 属性本身就是一个 DateTime 对象，因此您的代码可以简化，无需转换为字符串。

# oracle - PL/SQL LOGOFF TRIGGER 未正确捕获注销事件

> ID：15992278
> 
> 赞同：1
> 
> 时间：2013-04-13T19:59:22.127
> 
> 标签：oracle, plsql, database-trigger

我创建了一个这样的 LOGOFF 触发器

```
CREATE TRIGGER logoffTrigger  
BEFORE LOGOFF ON DATABASE  
BEGIN  
INSERT INTO logoffAudit("type","user")VALUES('LOGOFF',USER);  
END;  
/ 
```

并使用使用 Oracle.DataAccess.Client 模块的 OracleConnection 对象的小型 VB.Net 应用程序对其进行测试。虽然 LOGON 事件被类似的 LOGON 触发器正确捕获，但 LOGOOFF 事件仅在客户端连接关闭并且随后关闭整个客户端应用程序时才被捕获，即这还不够：

```
cn.Close() 
```

这也不是：

```
cn.Close()  
cn.Dispose() 
```

也不是这个：

```
cn.Close()  
cn.Dispose()  
cn = Nothing 
```

我究竟做错了什么？在此先感谢，
扬

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T23:15:56.080

您是否在应用程序中使用连接池？在*绝大多数*三层应用程序中，您会在中间层维护一个连接池，这样用户就不必在每个页面上都等待与数据库的连接再次打开和关闭。当应用程序打开一个连接时，它会从池中获取一个现有的连接（假设有一个空闲连接），当应用程序关闭一个连接时，它会将连接返回到池中。虽然这在性能方面从根本上更有效，但使用连接池意味着您将应用程序会话与数据库会话分开，因此登录和注销触发器不一定会捕获应用程序登录或注销操作。

在您的情况下，我的赌注是登录触发器似乎仅在应用程序启动时连接池为空时才起作用。如果您反复登录和注销，我敢打赌，并非所有应用程序登录都会导致登录触发器触发。

# java - android中url中的变量

> ID：15992280
> 
> 赞同：-2
> 
> 时间：2013-04-13T19:59:29.900
> 
> 标签：java

我有一个要变量的 url。这是一个搜索功能。网址是一样的，只是在网址里改了一个字。www.blabla.com / android / rssfeed.xml 我想要可以用不同单词替换的android。www.blabla.com/windows/rssfeed.xml。android 和 windows 必须是一个变量。我在谷歌搜索中只有以下代码我错过了 / rssfeed.xml 有人可以告诉我如何做到这一点以及如何在 url 中获取变量

```
 case R.id.buttonAmazon:
                  lasturl = "http://storingsoverzicht.nl/";
                  buttonLast.setText("Storingsoverzicht");
                   break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:14:20.067

你可以这样做：

```
String[] folders = {"android", "windows", "whatever"}; 
```

现在你可以像@AmoSluismans 已经说过的那样去做。

```
lasturl = "http://storingsoverzicht.nl/" + folders[n] + "/rssfeed.xml"; 
```

# ruby-on-rails - Sendgrid X-SMTPAPI 标头中的换行符解析为 =0A

> ID：15992281
> 
> 赞同：6
> 
> 时间：2013-04-13T19:59:35.760
> 
> 标签：ruby-on-rails, ruby, sendgrid

我正在使用 Sendgrid 将电子邮件发送到邮件列表，使用 X-SMTPAPI 标头指定多个收件人。从[Sendgrid 文档](http://sendgrid.com/docs/API_Reference/SMTP_API/)中“必须包装标题以将行长度保持在 72 以下。”

我正在使用 ActionMailer 发送电子邮件，并使用该`headers`方法设置 X-SMTPAPI 标头。为了使行少于 72 个字符，我尝试用逗号+换行符+空格替换每个逗号。例如，

```
headers["X-SMTPAPI"] = {
        :to => ['user1@example.com','user2@example.com','user3@example.com','user4@example.com','user5@example.com','user6@example.com']
}.to_json.gsub(',',",\n ") 
```

我没有在我的标题中获取换行符，而是得到以下内容（来自日志文件）

```
X-SMTPAPI: {"to":["user1@example.com",=0A "user2@example.com",=0A "user3@example.com",=0A "user4@example.com",=0A "user5@example.com",=0A "user6@example.com"]} 
```

请注意， \n 字符被替换为`=0A`. 此序列被 Sendgrid 服务器视为无效而拒绝。

有什么想法可以将正确的换行符放入标题中吗？

编辑：我尝试添加“放置标题”以查看标题中设置的内容。然后就是我发现的

```
Date: Sat, 13 Apr 2013 18:21:36 -0400
Message-ID: <5169da701cd26_5343fe1776afc50749b4@saunders.mail>
Mime-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
X-SMTPAPI: {"to":["user1@example.com",=0A "user2@example.com",=0A
 "user3@example.com",=0A "user4@example.com",=0A "user5@example.com",=0A
 "user6@example.com"]} 
```

请注意，我添加的换行符仍显示为“=0A”。但似乎有些东西自己添加了包装。这种包装是自动的，并且足以使我的标题行长度不超过要求吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T23:56:27.613

如果您给它适当的间距，ActionMailer 实际上会为您处理折叠和编码行。您应该使用`JSON.generate`给它间距：

前任。

```
headers["X-SMTPAPI"] = JSON.generate({
  :category => "welcome_email",
  :to => ['user1@example.com','user2@example.com','user3@example.com','user4@example.com','user5@example.com','user6@example.com']
}, :indent => ' ') 
```

这将导致：

```
X-SMTPAPI: { "category":"welcome_email", "to":[  "user1@example.com",
 "user2@example.com",  "user3@example.com",  "user4@example.com",  
 "user5@example.com",     "user6@example.com"]} 
```

如您所见，当 ActionMailer 遇到空格时，它会为您包装东西 - 不需要通常的`\r\n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T22:47:46.760

似乎标头中的字符必须根据[RFC 2047 [14]](https://www.rfc-editor.org/rfc/rfc2047)的规则进行编码。
Accodingly 到 ASCII 表`%0A`状态`\n`

# java - 提交按钮上的 request.getParameter 给出空值

> ID：15992282
> 
> 赞同：3
> 
> 时间：2013-04-13T19:59:41.927
> 
> 标签：java, servlets, multipartform-data, apache-commons-fileupload

单击生成 PDF/生成 Excel 提交按钮时，它请求 servlet **FileUpload**进行处理。现在，当我试图获取我按下的提交按钮的值时，它给我的值为**null**。我想知道为什么会这样？

这是我的 HTML 代码：

```
<form action="FileUpload" method="post" enctype="multipart/form-data">
<input type="file" id="filename" name="filename"><br>
<input type="button" value="Upload"><br>
<input type="submit"  value= "Generate PDF" name="pdf">
<input type = "submit" value="Generate Excel" name="xls">
</form> 
```

这是我的 servlet 代码：

```
String generatePDF= request.getParameter("pdf");//null
if(generatePDF.equals("Generate PDF"))//Giving NullPointerException at this step
{
  System.out.println("generatePDF button pressed");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T22:08:57.700

据我所知，问题似乎在于您有一个多部分请求被发送到服务器。这个[问题](https://stackoverflow.com/questions/13321164/get-parameter-when-multipart-request-in-jsp)的第二个答案似乎可以解决您的问题。本质上，您必须使用 Apache Commons FileUpload 包中 FileItem 类提供的方法。或者，正如[这里](http://www.java.net/node/705584)所建议的，您可能必须使用`getPart()`HttpServletRequest 类的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T22:10:35.060

**更新**

对不起，我最初错过了这个`enctype="multipart/form-data"`部分。因此，正如用户@tomor 正确指出的那样，问题背后的原因是您使用`enctype="multipart/form-data"`. 阅读他的[回答](https://stackoverflow.com/a/15993469/814702)。

有关您的问题的更详细解释，请阅读 BalusC 的以下答案：[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/a/2424824/814702).

**以下解决方案适用于 Servlet v3.0**。对于旧版本，最流行的解决方案是使用[Apache Commons FileUpload](http://commons.apache.org/proper/commons-fileupload/)（请参阅 BalusC 答案中的详细信息）。

* * *

如果您想检查按下了哪个提交按钮，其中一种解决方案可能是**将提交按钮命名为相同**，然后检查值。

示例：
*HTML*

```
<form action="FileUpload" method="post" enctype="multipart/form-data">
    <input type="file" id="filename" name="filename"><br>
    <input type="button" value="Upload"><br>
    <input type="submit" value="Generate PDF"   name="submitAction">
    <input type="submit" value="Generate Excel" name="submitAction">
</form> 
```

*Servlet*
**NB！**注意[@MultipartConfig](http://docs.oracle.com/javaee/6/tutorial/doc/gmhal.html)注释（自**Servlet 3.0**起可用）。这样您就可以正确处理*多部分/表单数据*请求。

*TestServlet.java*

```
package com.example;

import javax.servlet.http.HttpServlet;
import javax.servlet.annotation.WebServlet;
import javax.servlet.annotation.MultipartConfig;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;

import java.io.IOException;

@WebServlet(urlPatterns = {"/TestSubmit.do"})
@MultipartConfig
public class TestServlet extends HttpServlet {

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {

        String submitAction= request.getParameter("submitAction");
        if (submitAction != null) {
            if (submitAction.equals("Generate PDF")) {
                System.out.println("Generate PDF button pressed");
            } else if (submitAction.equals("Generate Excel")) {
                System.out.println("Generate Excel button pressed");
            }
        } else {
            // do something about it
        }
    }
} 
```

注意：您当然可以在*web.xml*
中进行 servlet 配置， 而不是（同样从 Servlet 3.0 开始） 。对于 : 也一样，您可以在*web.xml*文件中添加servlet 配置元素的子元素，而不是这个注解。`@WebServlet`*`@MultipartConfig``<multipart-config>`*

 **示例（摘自*web.xml*）：

```
<servlet>
    <servlet-name>Test Servlet</servlet-name>
    <servlet-class>com.example.TestServlet</servlet-class>
    <multipart-config>
        <!-- In this case empty, but can contain additional nested elements -->
    </multipart-config>
</servlet>
<servlet-mapping>
    <servlet-name>Test Servlet</servlet-name>
    <url-pattern>/TestSubmit.do</url-pattern>
</servlet-mapping> 
```

* * *

### 更多有用的链接：

*   Java EE 6 官方文档：[使用 Java Servlet 技术上传文件](http://docs.oracle.com/javaee/6/tutorial/doc/glrbb.html)
*   BalusC 的一篇文章：[在 Servlet 3.0 中上传文件](http://balusc.blogspot.com/2009/12/uploading-files-in-servlet-30.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T00:53:13.593

如果您的表单具有**multipart/formdata**的 MIME 类型，则应按照[此处所述在 Servlet 或](http://docs.oracle.com/javaee/6/tutorial/doc/glraq.html)*web.xml中配置 @MultipartConfig 注释*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T22:00:46.190

您应该首先更改代码以测试 null。这将防止以后出现不必要的错误。尝试检查提交的请求以查看其中包含的内容。Firefox 有一个名为 tamper data 的插件，可让您在请求发送之前捕获和编辑请求。如果您搜索，我相信会有其他人。

这将允许您在发送数据之前查看数据。请记住，当它到达您的服务器时，它已经经历了几个步骤，因此尽早看到它会有所帮助。还可以考虑使用过滤器来记录请求状态、参数名称等。它可以在第一次开发时提供帮助，并且可以在以后轻松删除而不会侵入您的业务代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T17:01:04.137

更改 servlet 代码

```
String generatePDF= request.getParameter("pdf"); 
```

至

`String generatePDF= request.getParameter("filename");`

因为：输入类型的属性名称将是 getParameter 值

```
`String generatePDF= request.getParameter("filename");
if(generatePDF.equals("Generate PDF")
{
 System.out.println("generatePDF button pressed");
}` 
```**

# css - 调整 Wordpress 小部件的宽度百分比

> ID：15992283
> 
> 赞同：0
> 
> 时间：2013-04-13T19:59:42.950
> 
> 标签：css, wordpress, widget, width

当我从桌面查看 www.aryaziai.com 时，我的网站侧边栏小部件看起来不错。但是，我遇到的唯一问题是，当我查看我的网站的移动版本时，“精选视频”侧边栏伸出框架并与黑色背景有点重叠。

在一天结束时，我不想手动更改 youtube 视频的宽度/高度，我只想让“精选视频”小部件的宽度自动调整为小部件标题的大小（蓝色块的东西） .. 这很有趣，因为 youtube 视频的大小与在桌面上查看时的小部件标题相同，但小部件标题在移动设备中保持完美大小..

有任何 100% 宽度的代码可以解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:03:51.950

如果我理解正确，即使`div`您正确调整了 YouTube 视频的大小，也无法让您的 YouTube 视频调整到屏幕宽度。如果是这样，请阅读[Chris Coyier 关于调整 YouTube 视频大小的文章](http://css-tricks.com/fluid-width-youtube-videos/)。

您可以在 jQuery 中完成所有这些操作（如果您正在使用它），这是 Chris 的代码：

```
$(function() {

    // Find all YouTube videos
    var $allVideos = $("iframe[src^='http://www.youtube.com']"),

        // The element that is fluid width
        $fluidEl = $("body");

    // Figure out and save aspect ratio for each video
    $allVideos.each(function() {

        $(this)
            .data('aspectRatio', this.height / this.width)

            // and remove the hard coded width/height
            .removeAttr('height')
            .removeAttr('width');

    });

    // When the window is resized
    // (You'll probably want to debounce this)
    $(window).resize(function() {

        var newWidth = $fluidEl.width();

        // Resize all videos according to their own aspect ratio
        $allVideos.each(function() {

            var $el = $(this);
            $el
                .width(newWidth)
                .height(newWidth * $el.data('aspectRatio'));

        });

    // Kick off one resize to fix all videos on page load
    }).resize();

}); 
```

# java - 在java中的数组中分配一个数字

> ID：15992288
> 
> 赞同：0
> 
> 时间：2013-04-13T19:59:55.553
> 
> 标签：java

给定一个数字 N 和一个数组 ? 如何在数组中分配 N，如下例所示：

N = 5 和大小为 4 的数组；

```
[5,0,0,0]
[0,5,0,0]
[0,0,5,0]
[0,0,0,5]
[4,1,0,0]
[4,0,1,0]
[4,0,0,1]
[1,4,0,0]
[0,4,1,0]
[0,4,0,1]
[1,0,4,0]
[0,1,4,0]
[0,0,4,1]
.
..
..
[2,1,2,0]
..
..
... 
```

等等

重要的是整个数组的总和是N！

我想实现一个爬山算法，所以我想生成所有后继者，然后爬山可以从列表中选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:04:29.493

如果您讨厌递归或有长数组，请使用或不使用递归。你要填写arr。您已经填充了开头（0..index-1），并且您想用其余的 N 填充数组的末尾。

调用 (arr 长度为 5): fill(arr, 5, 0);

```
private static void fill(int[] arr, int N, int index) {
    if (arr == null) {
        return;
    }
    if (N == 0) {
        for (; index < arr.length; index++) {
            arr[index] = 0;
        }
    } else if (index == arr.length - 1) {
        arr[index] = N;
    } else {
        for (int j = N; j >= 0; j--) {
            arr[index] = j;
            fill(arr, N - j, index + 1);
        }
    }

    if (index >= arr.length - 1) {
        // use your array
        System.out.println(Arrays.toString(arr));
    }
} 
```

# asp.net-mvc - 当用户请求文件夹时如何显示自定义页面

> ID：15992291
> 
> 赞同：0
> 
> 时间：2013-04-13T20:00:04.573
> 
> 标签：asp.net-mvc, directory

当用户请求一个文件夹时，你怎么能做到这一点，例如：[http://site.net/folder1/](http://site.net/folder1/)，然后向他展示自定义页面？

不是这个： http: [//goo.gl/bbhVL](http://goo.gl/bbhVL)（网址缩短器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:09:14.103

您可以自定义控制器来处理无效的 url，然后显示自定义视图。您需要修改 web.config 以告知哪个控制器处理 404

检查[ASP.NET MVC 中的此句柄错误](http://www.codeproject.com/Articles/281418/How-to-handle-errors-in-ASP-NET-MVC)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:52:25.660

最后我找到了解决方案，但我认为这不是最好的选择。例如，当一个异常被触发时，它显示了一个带有自定义错误的页面，那么这个链接`@Html.ActionLink("Link", "Index", "Home", new { @class = "link" }`就会被转换为：`htttp://hostname/error`。但是当我删除时`new { @class = "link" }`，链接变得正常。

```
<system.webServer>
    <httpErrors existingResponse="Replace" defaultResponseMode="ExecuteURL" errorMode="Custom">
        <remove statusCode="403"/>
        <error statusCode="403" subStatusCode="14" responseMode="ExecuteURL" path="/error/accessdenied" />
        <remove statusCode="404"/>
        <error statusCode="404" responseMode='ExecuteURL' path="/error/notfound" />
        <remove statusCode="500"/>
        <error statusCode="500" responseMode='ExecuteURL' path="/error/servererror" />
    </httpErrors>
</system.webServer> 
```

# c# - 当前页面是否是目录的子页面

> ID：15992292
> 
> 赞同：1
> 
> 时间：2013-04-13T20:00:07.800
> 
> 标签：c#, asp.net

我需要检测当前页面 uri 是否包含实际页面名称，而不仅仅是该目录的默认值/没有子路径。

例如，如果我要浏览到默认目录，它将是：

```
www.domain.com/directory 
```

但是，我需要检测页面 url/uri 何时是子页面的页面，例如：

```
www.domain.com/directory/page.aspx 
```

或者

```
www.domain.com/directory/something 
```

最有效的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:12:45.883

您可以使用 the`.AbsolutePath`或 the`.LocalPath`并`Request.Url`检查其是否以 结尾`Default.aspx`，例如

```
if(Request.Url.AbsolutePath.EndsWith("/default.aspx", StringComparison.InvariantCultureIgnoreCase)))
{
  // you are browsing the directory.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:07:50.020

您首先需要弄清楚如何区分“/directory/childPage”和“/directory/subdirectory”。[然后只需使用Uri.Segments](http://msdn.microsoft.com/en-us/library/system.uri.segments.aspx)修剪“带有子页面的路径”的最后一段 。

```
var pageUri  = new Uri("http://www.domain.com/directory/page.aspx");
var pageName = pageUri.Segments[pageUri.Segments.Length - 1]; 
```

类似问题 -[删除 Request.Url 的最后一段](https://stackoverflow.com/questions/11529326/remove-last-segment-of-request-url)

# c++ - 如果我想要最大速度，我应该只在 std::vector 上使用一个数组吗？

> ID：15992298
> 
> 赞同：4
> 
> 时间：2013-04-13T20:00:44.103
> 
> 标签：c++, arrays, performance, vector, std

我正在编写一些需要尽可能快的代码，而不会占用我所有的研究时间（换句话说，没有手动优化的汇编）。

我的系统主要由一堆 3D 点（原子系统）组成，因此我编写的代码进行了大量的距离比较、最近邻搜索以及其他类型的排序和比较。这些是大型、百万或十亿点系统，嵌套 for 循环的天真 O(n^2) 不会削减它。

对我来说，只使用 a`std::vector`来保存点坐标是最简单的。起初我认为它可能会和数组一样快，所以太好了！然而，这个问题（[Is std::vector so much faster than plain arrays?](https://stackoverflow.com/questions/3664272/stdvector-is-so-much-slower-than-plain-arrays)）让我有一种非常不安的感觉。我没有时间使用数组和向量编写所有代码并对其进行基准测试，因此我现在需要做出正确的决定。

我确信知道背后详细*实现*`std::vector`的人可以使用这些功能而速度损失很小。但是，我主要用 C 编程，所以我不知道`std::vector`幕后在做什么，我不知道`push_back`每次调用它时是否要执行一些新的内存分配，或者我可能会陷入什么其他“陷阱”这样做使我的代码非常慢。

数组很简单；我确切地知道什么时候分配内存，我所有算法的顺序是什么，等等。没有我可能不得不忍受的黑盒未知数。然而，我经常看到有人批评在互联网上使用数组而不是向量，我不禁想知道我是否遗漏了更多信息。

**编辑**：为了澄清，有人问“你为什么要用数组或向量来操作这么大的数据集”？好吧，最终，一切都存储在内存中，因此您需要选择*一些*底层抽象。例如，我使用 kd-trees 来保存 3D 点，但即便如此，kd-tree 也需要从数组或向量中构建。

另外，我并不是说编译器不能优化（我知道最好的编译器在很多情况下可以胜过人类），只是说它们的优化不能比它们的约束允许的更好，而且我可能只是因为我的无知而无意中引入了约束向量的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:13:37.970

一切都取决于你如何实现你的算法。`std::vector`是这样一个通用的容器概念，它给了我们灵活性，但让我们有自由和责任去刻意构建算法的实现。我们将观察到的大部分效率开销`std::vector`来自于**复制**。`std::vector`提供了一个构造函数，可以让你用值 X 初始化 N 个元素，当你使用它时，向量和数组一样快。

我做了一个测试与[这里](https://stackoverflow.com/questions/3664272/stdvector-is-so-much-slower-than-plain-arrays)`std::vector`描述的数组，

```
#include <cstdlib>
#include <vector>

#include <iostream>
#include <string>

#include <boost/date_time/posix_time/ptime.hpp>
#include <boost/date_time/microsec_time_clock.hpp>

class TestTimer
{
public:
    TestTimer(const std::string & name) : name(name),
        start(boost::date_time::microsec_clock<boost::posix_time::ptime>::local_time())
    {
    }

    ~TestTimer()
    {
        using namespace std;
        using namespace boost;

        posix_time::ptime now(date_time::microsec_clock<posix_time::ptime>::local_time());
        posix_time::time_duration d = now - start;

        cout << name << " completed in " << d.total_milliseconds() / 1000.0 <<
            " seconds" << endl;
    }

private:
    std::string name;
    boost::posix_time::ptime start;
};

struct Pixel
{
    Pixel()
    {
    }

    Pixel(unsigned char r, unsigned char g, unsigned char b) : r(r), g(g), b(b)
    {
    }

    unsigned char r, g, b;
};

void UseVector()
{
    TestTimer t("UseVector");

    for(int i = 0; i < 1000; ++i)
    {
        int dimension = 999;

        std::vector<Pixel> pixels;
        pixels.resize(dimension * dimension);

        for(int i = 0; i < dimension * dimension; ++i)
        {
            pixels[i].r = 255;
            pixels[i].g = 0;
            pixels[i].b = 0;
        }
    }
}

void UseVectorPushBack()
{
    TestTimer t("UseVectorPushBack");

    for(int i = 0; i < 1000; ++i)
    {
        int dimension = 999;

        std::vector<Pixel> pixels;
            pixels.reserve(dimension * dimension);

        for(int i = 0; i < dimension * dimension; ++i)
            pixels.push_back(Pixel(255, 0, 0));
    }
}

void UseArray()
{
    TestTimer t("UseArray");

    for(int i = 0; i < 1000; ++i)
    {
        int dimension = 999;

        Pixel * pixels = (Pixel *)malloc(sizeof(Pixel) * dimension * dimension);

        for(int i = 0 ; i < dimension * dimension; ++i)
        {
            pixels[i].r = 255;
            pixels[i].g = 0;
            pixels[i].b = 0;
        }

        free(pixels);
    }
}
void UseVectorCtor()
{
    TestTimer t("UseConstructor");

    for(int i = 0; i < 1000; ++i)
    {
        int dimension = 999;

        std::vector<Pixel> pixels(dimension * dimension, Pixel(255, 0, 0));
    }
}

int main()
{
    TestTimer t1("The whole thing");

    UseArray();
    UseVector();
    UseVectorCtor();
    UseVectorPushBack();

    return 0;
} 
```

以下是结果（在 Ubuntu amd64 上使用 g++ -O3 编译）：

> UseArray 在**0.325**秒
> 内完成 UseVector 在 1.23 秒内
> 完成 UseConstructor 在 0.866 秒
> 内完成 UseVectorPushBack 在 8.987 秒内完成
> 整个事情在 11.411 秒内完成

显然`push_back`这里不是一个好的选择，使用构造函数仍然比数组慢 2 倍。现在，为 Pixel 提供空副本 Tor：

```
Pixel(const Pixel&) {} 
```

给我们以下结果：

> UseArray 在**0.331**秒
> 内完成 UseVector 在 0.306 秒内
> 完成 UseConstructor 在 0 秒内
> 完成 UseVectorPushBack 在 2.714 秒内完成
> 整个事情在 3.352 秒内完成

总而言之：重新考虑您的算法，否则，可能会求助于 New[]/Delete[] 周围的自定义包装器。在任何情况下，STL 实现并没有因为某些未知原因而变慢，它只是按照您的要求执行；希望你知道得更好。在您刚开始使用向量的情况下，它们的行为可能会令人惊讶，例如以下代码：

```
class U{
    int i_;
public:
    U(){}
    U(int i) : i_(i) {cout << "consting " << i_ << endl;}
    U(const U& ot) : i_(ot.i_) {cout << "copying " << i_ << endl;}
};

int main(int argc, char** argv)
{   
    std::vector<U> arr(2,U(3));
    arr.resize(4);
    return 0;
} 
```

结果：

> 构造 3
> 
> 复制 3
> 
> 复制 3
> 
> 复制 548789016
> 
> 复制 548789016
> 
> 复制 3
> 
> 复制 3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:00:55.800

发明 STL，然后将其纳入 C++ 标准库的人，被*~~骂得~~*精明。甚至不要让自己想象一下，由于您对传统 C 数组的丰富知识，您可以超越他们。（如果您知道一些 Fortran，您将有机会）。

使用`std::vector`，您可以一次性分配所有内存，就像使用 C 数组一样。您也可以增量分配，就像使用 C 数组一样。您可以控制每次分配发生的时间，就像使用 C 数组一样。*与*C 数组不同，您也可以忘记这一切，让系统为您管理分配，如果这是您想要的。这都是绝对必要的基本功能。我不确定为什么有人会认为它丢失了。

说了这么多，如果您发现数组更容易理解，请使用数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T21:55:12.467

我并不是真的建议您选择数组或向量，因为我认为它们可能不完全适合您的需求。

您需要能够有效地组织数据，以便查询不需要扫描整个内存范围来获取相关数据。因此，您希望将更有可能被选中的点彼此靠近地分组。

如果您的数据集是静态的，那么您可以离线进行排序，并使您的数组在应用程序启动时加载到内存中，并且向量或数组都可以工作（前提是您预先`reserve`调用`vector`，因为默认分配增长方案会在底层数组变满时将其大小加倍，并且您不希望仅将 16Gb 的内存用于 9Gb 的数据）。

但是，如果您的数据集是动态的，则很难使用向量或数组在您的集合中进行有效的插入。回想一下，数组中的每个插入都会创建一个位置的所有后继元素的移位。当然，索引，如您提到的 kd 树，将有助于避免对数组进行全扫描，但如果所选点分散在数组中，对内存和缓存的影响基本上是相同的。这种转变也意味着需要更新索引。

我的解决方案是在页面中切割数组（列表链接或数组索引）并将数据存储在页面中。这样，就可以将相关元素组合在一起，同时仍然保持页面内连续内存访问的速度。然后索引将引用一个页面和该页面中的偏移量。页面不会被自动填充，这就为插入相关元素留下了空间，或者使轮班操作变得非常便宜。

请注意，如果页面总是满的（最后一页除外），在插入的情况下，您仍然必须移动每一个页面，而如果您允许不完整的页面，您可以将移动限制为单个页面，如果该页面已满，请在其后插入一个新页面以包含补充元素。

需要记住的一些事项：

*   数组和向量分配有上限，这取决于操作系统（这些限制可能不同）

在我的 32 位系统上，3D 点向量的最大允许分配约为 1.8 亿个条目，因此对于更大的数据集，必须找到不同的解决方案。当然，在 64 位操作系统上，这个数量可能要大得多（在 Windows 32 位上，一个进程的最大内存空间是 2Gb - 我认为他们在更高级的操作系统版本上添加了一些技巧来扩展这个数量）。诚然，对于像我这样的解决方案，内存将更加成问题。

*   调整向量的大小需要分配堆的新大小，将元素从旧内存块复制到新内存块。

因此，如果只向序列中添加一个元素，则在调整大小期间将需要两倍的内存。这个问题可能不会出现普通数组，可以使用临时操作系统内存函数重新分配（`realloc`例如在 unices 上，但据我所知，该函数不能保证相同的内存块将被重用） . 如果使用将使用相同函数的自定义分配器，则向量中也可以避免该问题。

*   C++ 不对底层内存架构做任何假设。

向量和数组旨在表示分配器提供的连续内存块，并用接口包装该内存块以访问它。但是 C++ 不知道操作系统如何管理该内存。在大多数现代操作系统中，该内存实际上是按页面切割的，这些页面映射进出物理内存。所以我的解决方案是以某种方式在流程级别重现该机制。为了使分页高效，我们的页面必须适合操作系统页面，因此需要一些操作系统相关的代码。另一方面，对于基于向量或数组的解决方案，这根本不是问题。

因此，从本质上讲，我的答案是关注以有利于彼此靠近的聚类点的方式更新数据集的效率。它假设这样的聚类是可能的。如果不是这样，那么只需在数据集的末尾推送一个新点就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T20:11:08.927

向量保证底层数据是内存中的一个连续块。保证这一点的唯一合理方法是将其实现为数组。

推送新元素时可能会发生内存重新分配，因为向量无法提前知道要添加多少元素。但是，当您提前知道时，您可以使用适当数量的条目调用[reserve](http://www.cplusplus.com/reference/vector/vector/reserve/)，以避免在添加它们时重新分配。

向量通常比数组更受欢迎，因为它们允许在使用`.at()`. 这意味着访问向量之外的索引不会像数组那样导致未定义的行为。然而，这种边界检查确实需要额外的 CPU 周期。当您使用`[]-operator`访问元素时，不会进行边界检查，访问速度应该与数组一样快。但是，当您的代码有错误时，这会导致未定义的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T20:32:45.070

对于向量和数组之间常见的操作（因此不是 push_back 或 pop_back，因为数组的大小是固定的），它们的执行完全相同，因为 - 按照规范 - 它们是相同的。

矢量访问方法是如此微不足道，以至于更简单的编译器优化将把它们消灭掉。如果您事先知道向量的大小，只需通过指定大小或调用来构造它`resize`，您将得到与使用`new []`.

如果您不知道大小，但您知道需要增长多少，只需调用`reserve`，并且您不会在 push_back 上受到任何惩罚，因为所有必需的内存都已分配。

无论如何，重定位并不是那么“愚蠢”：向量的容量和大小是两个截然不同的东西，容量通常会在耗尽时翻倍，因此大量重定位的频率越来越低。

此外，如果您了解有关大小的所有信息，并且您不需要动态内存并且想要相同的矢量接口，请考虑使用`std::array`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T20:14:15.153

虽然我不知道 std:vector 的确切实现，但大多数像这样的列表系统比数组慢，因为它们在调整大小时分配内存，通常是当前容量的两倍，尽管情况并非总是如此。

因此，如果向量包含 16 个项目并且您添加了另一个，则它需要另外 16 个项目的内存。由于向量在内存中是连续的，这意味着它将为 32 个项目分配一个实心内存块并更新向量。您可以通过构造 std:vector 来获得一些性能改进，其初始容量与您认为数据集的大小大致相同，尽管这并不总是一个容易得出的数字。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-14T00:36:41.250

听起来你需要大量的 RAM，所以你不需要分页。我倾向于同意@Philipp 的回答，因为您真的很想确保它不会在后台重新分配

*但*

一棵需要重新平衡的树是怎么回事？你甚至在*考虑*编译器优化？

请参加如何优化软件的速成课程。我敢肯定你对 Big-O 了如指掌，但我敢打赌你习惯于忽略常数因素，对吧？它们可能会出现 2 到 3 个数量级的异常，做一些你从未认为代价高昂的事情。如果这转化为几天的计算时间，也许它会变得有趣。

并且*没有编译器优化器*可以为您解决这些问题。

如果你有学术倾向，*[这篇文章](https://scicomp.stackexchange.com/a/2719/1262)*会更详细。

# android - ExpandableListAdapter 的 onChildClick 事件不起作用

> ID：15992301
> 
> 赞同：0
> 
> 时间：2013-04-13T20:00:54.553
> 
> 标签：android, expandablelistadapter

我一直在看其他人对这个问题的回答，但到目前为止似乎没有任何效果。

目前，我有一个 ExpandableListAdapter，它是根据 SDK 附带的示例之一构建的。就显示数据而言，我可以正常工作，但我根本无法让 onChildClick 事件正常工作。我尝试将我的 XML 元素上的可聚焦属性设置为 false，但我仍然没有任何运气。

目前这是我的代码：

MainActivity.java

```
package com.example.expandablelisttest;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ExpandableListView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ExpandableListView expandableListView = (ExpandableListView) findViewById(R.id.expandableListView1);

    ExpandableListAdapter expandableAdapter = new ExpandableListAdapter();

    expandableListView.setAdapter(expandableAdapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

ExpandableListAdapter.java

```
package com.example.expandablelisttest;

import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.TextView;
import android.widget.Toast;

public class ExpandableListAdapter extends BaseExpandableListAdapter
implements ExpandableListView.OnChildClickListener
{       
private String[] groups = { "People Names", "Dog Names", "Cat Names", "Fish Names" };
private String[][] children = {
        { "Arnold", "Barry", "Chuck", "David" },
        { "Ace", "Bandit", "Cha-Cha", "Deuce" },
        { "Fluffy", "Snuggles" },
        { "Goldy", "Bubbles" }
};

public Object getChild(int groupPosition, int childPosition) {
    return children[groupPosition][childPosition];
}

public long getChildId(int groupPosition, int childPosition) {
    return childPosition;
}

@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent)
{
    if (convertView ==null)
    {
        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());           
        convertView = layoutInflater.inflate(R.layout.child_view,  null);
    }

    TextView childTxt = (TextView) convertView.findViewById(R.id.childTxt);
    childTxt.setText(getChild(groupPosition, childPosition).toString());

    return convertView;
}

@Override
public int getChildrenCount(int groupPosition) {
    return children[groupPosition].length;
}

@Override
 public Object getGroup(int groupPosition) {
     return groups[groupPosition];
 }

 @Override
 public int getGroupCount() {
     return groups.length;
 }

 @Override
 public long getGroupId(int groupPosition) {
     return groupPosition;
 }

@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent)
{
    if (convertView ==null)
    {
        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());   
        convertView = layoutInflater.inflate(R.layout.group_view,  null);
    }

    TextView groupTxt = (TextView) convertView.findViewById(R.id.groupTxt);
    groupTxt.setText(getGroup(groupPosition).toString());

    return convertView;
}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return true;
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return true;
}

@Override
public boolean onChildClick(ExpandableListView parent, View v,
    int groupPosition, int childPosition, long id)
{
    Log.d("Result:", "Click event triggered");
    return true;
}   
} 
```

activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ExpandableListView
        android:id="@+id/expandableListView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </ExpandableListView>

</LinearLayout> 
```

child_view.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:focusable="false" >

<TextView
    android:id="@+id/childTxt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:focusable="false"/>

</LinearLayout> 
```

group_view.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:focusable="false" >

<TextView
    android:id="@+id/groupTxt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="36dp"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:focusable="false" />

</LinearLayout> 
```

如果有人能看到为什么我的点击事件没有触发并且可以帮助我。我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-10T06:47:24.663

发生这种情况主要是因为当您尝试单击它时您的孩子没有被选中，因为在包含执行此操作的方法的适配器中称为 isChildSelectable() ，它默认返回flase，所以当你希望它被选中时让它成为真的问题解决了...谢谢:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T20:07:12.283

`OnChildClickListener`不属于它的应该`Adapter`添加到`ExpandableListView`你的`Activity`.

像这样：

```
expandableListView.setOnChildClickListener(new OnChildClickListener() {
    @Override
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
        // Handle clicks on the children here...
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T06:45:13.617

如果您在适配器中使用 isChildSelectable 返回值 false，则更改布尔返回值 true。您可以使用它

```
@Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    } 
```

代替

```
@Override
        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return false;
        } 
```

# c# - 我想知道如何使用 C# 中的序列化检查 tcp 客户端服务器的经过时间

> ID：15992303
> 
> 赞同：0
> 
> 时间：2013-04-13T20:01:04.383
> 
> 标签：c#, datetime, serialization, tcp, timespan

我需要知道如何正确检查两个客户端和 1 个服务器之间发送消息的经过时间。

我试图放入我的对象，我用下一个函数以毫秒为单位传输确切的时间：

```
class exactTime {
  public static double ConvertSecondsToMilliseconds() {
    return TimeSpan.FromSeconds(DateTime.Now.Second).TotalMilliseconds;
  }
  public static double ConvertMinutesToMilliseconds() {
    return TimeSpan.FromMinutes(DateTime.Now.Minute).TotalMilliseconds;
  }
  public static double ConvertHoursToMilliseconds() {
    return TimeSpan.FromHours(DateTime.Now.Hour).TotalMilliseconds;
  }
  public static double ExactTime() {
    double exacatTime = DateTime.Now.Millisecond + ConvertHoursToMilliseconds() + 
       ConvertMinutesToMilliseconds() + ConvertSecondsToMilliseconds();
    return exacatTime;
  }
} 
```

与收到消息时相比，我使用相同的函数，而不是减去我得到的对象所得到的时间，但输出并不好，它总是在增长，而且没有任何效果。像那样：

```
double remainderTime = exactTime.ExactTime() - tcpObject.exactTime; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:58:41.747

这不容易做到，因为服务器和客户端可能有不同的时间。发生这种情况是因为计算机的内部时钟漂移，并且每台计算机漂移不同。一个多月的时间可以累积几秒钟的差异。

如果您控制服务器和客户端，那么您可以使用可靠的来源设置基于 NTP 的时间同步，但这更多的是管理任务，然后是编程任务。

作为替代方案，您可以尝试在应用程序级别实现时间同步，以便客户端可以确定与服务器时间的偏移量。查看 NTP 协议以获取灵感。

此外，所有这些对 DateTime.Now 的摆弄都不会提高精度，并且可以仅用 DateTime.Now.Ticks 替换。请记住，DateTime.Now 具有 10 毫秒的分辨率，这比本地网络上的客户端服务器往返更大。

# c++ - Symbian C++ stdint 接缝随机错误

> ID：15992305
> 
> 赞同：1
> 
> 时间：2013-04-13T20:01:20.463
> 
> 标签：c++, symbian, s60, pys60, symbian3

我正在尝试使用 Symbian Belle Sdk 为 Pys60 2.0 编译 PyS60USB，但由于一些看似无关的原因，我收到了关于几乎所有没有命名类型的看似随机的错误，如下所示：

*

```
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:38: error: '__int8_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:43: error: '__int16_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:48: error: '__int32_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:53: error: '__int64_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:58: error: '__uint8_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:63: error: '__uint16_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:68: error: '__uint32_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:73: error: '__uint64_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:77: error: '__int_least8_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:78: error: '__int_least16_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:79: error: '__int_least32_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:80: error: '__int_least64_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:82: error: '__uint_least8_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:83: error: '__uint_least16_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:84: error: '__uint_least32_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:85: error: '__uint_least64_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:87: error: '__int_fast8_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:88: error: '__int_fast16_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:89: error: '__int_fast32_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:90: error: '__int_fast64_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:92: error: '__uint_fast8_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:93: error: '__uint_fast16_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:94: error: '__uint_fast32_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:95: error: '__uint_fast64_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:97: error: '__intmax_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:98: error: '__uintmax_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:101: error: '__intptr_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/stdint.h:102: error: '__uintptr_t' does not name a type* 
```

我还收到类似以下的其他错误：*

```
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/python25/pyport.h:90: error: 'uintptr_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/python25/pyport.h:91: error: 'intptr_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/python25/pyport.h:116: error: 'Py_intptr_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/sys/_sigset.h:51: error: '__uint64_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/sys/_timeval.h:35: error: '__suseconds_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/sys/_timeval.h:40: error: '__time_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/sys/_timeval.h:47: error: redefinition of 'struct timeval'
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/libc/sys/time.h:30: error: previous definition of 'struct timeval'
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/sys/select.h:45: error: conflicting declaration 'typedef __fd_mask fd_mask'
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/libc/sys/types.h:89: error: 'fd_mask' has a previous declaration as 'typedef long int fd_mask'
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/sys/select.h:50: error: '__uint64_t' does not name a type
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/sys/select.h:72: error: redefinition of 'struct fd_set'
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/libc/sys/types.h:97: error: previous definition of 'struct fd_set'
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/sys/select.h:74: error: invalid type in declaration before ';' token
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/stdapis/sys/select.h:74: error: conflicting declaration 'typedef int fd_set'
C:/Nokia/Devices/Nokia_Symbian_Belle_SDK_v1.0/epoc32/include/libc/sys/types.h:99: error: 'fd_set' has a previous declaration as 'typedef struct fd_set fd_set'* 
```

**ETC...**

我猜这些错误可能是相关的，并且可能是由我的环境或其他问题引起的。你们有谁知道可能导致所有这数百个错误的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:54:02.920

看起来您的包含路径中有两个不兼容的 C 标准库实现。有旧`ESTLIB`的`epoc32/include/libc`和新的 Open C `epoc32/include/stdapis`。从您的 MMP 文件包含路径中删除前者。在那里，检查您是否没有链接到`estlib.lib`.

免责声明：距离我上次接触 Symbian SDK 已经过去几年了。

# ffmpeg - 如何将ffmpeg升级到最新版本

> ID：15992306
> 
> 赞同：1
> 
> 时间：2013-04-13T20:01:22.450
> 
> 标签：ffmpeg, upgrade

如果我运行，我希望将 ffmpeg 升级到最新版本

```
yum install ffmpeg ffmpeg-devel 
```

我得到以下

```
Setting up Install Process
Package ffmpeg-0.6.5-1.el5.rf.x86_64 already installed and latest version
Package ffmpeg-devel-0.6.5-1.el5.rf.x86_64 already installed and latest version
Nothing to do 
```

然后如果我跑

```
 ffmpeg -i P1010989.MOV -vcodec copy -acodec aac -strict -2 -b:a 384k ouet.mp4
FFmpeg version 0.6.5, Copyright (c) 2000-2010 the FFmpeg developers
  built on Jan 29 2012 23:55:02 with gcc 4.1.2 20080704 (Red Hat 4.1.2-51)
  configuration: --prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC' --enable-avfilter --enable-avfilter-lavf --enable-libdirac --enable-libfaac --enable-libfaad --enable-libfaadbin --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab
  libavutil     50.15\. 1 / 50.15\. 1
  libavcodec    52.72\. 2 / 52.72\. 2
  libavformat   52.64\. 2 / 52.64\. 2
  libavdevice   52\. 2\. 0 / 52\. 2\. 0
  libavfilter    1.19\. 0 /  1.19\. 0
  libswscale     0.11\. 0 /  0.11\. 0
  libpostproc   51\. 2\. 0 / 51\. 2\. 0
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'P1010989.MOV':
  Duration: 00:00:01.00, start: 0.000000, bitrate: 11584 kb/s
    Stream #0.0(eng): Video: mjpeg, yuvj420p, 640x480, 11315 kb/s, 30 fps, 30 tbr, 30 tbn, 30 tbc
    Stream #0.1(eng): Audio: pcm_s16be, 16000 Hz, 1 channels, s16, 256 kb/s
Unrecognized option 'b:a' 
```

有什么建议么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T23:52:00.087

> FFmpeg Linux 为 Oldstable、Stable、Testing、Unstable（amd64、i386、powerpc、sparc、ia64、armel、mips、mipsel）构建 FFmpeg Debian 软件包可在 [deb-multimedia](http://www.deb-multimedia.org/)获得。
> 
> 适用于 Precise、Oneiric、Natty、Maverick 和 Lucid（amd64、i386）的 FFmpeg Ubuntu 软件包可在 [Jon Severinsson 的 FFmpeg PPA](https://launchpad.net/~jon-severinsson/+archive/ffmpeg)中获得。
> 
> 用于 EL、Fedora Rawhide（i386、x86_64）的 FFmpeg Redhat 和 Fedora 软件包可在 [RPM Fusion](http://rpmfusion.org/)获得。
> 
> FFmpeg 静态构建可在 [Burek](http://ffmpeg.gusari.org/static/)的 [FFmpeg Static Builds 和 Relaxed 的 FFmpeg Static Builds 获得](http://dl.dropbox.com/u/24633983/ffmpeg/index.html)。

[`ref`](http://ffmpeg.org/download.html)

# date - Excel 假设日期是美国格式

> ID：15992308
> 
> 赞同：0
> 
> 时间：2013-04-13T20:01:36.570
> 
> 标签：date, excel, vba

我创建了一个复制一列的宏，其中 02/04/2013 12:35 表示 4 月 2 日，然后我将其粘贴并使用文本到列以摆脱时间部分。Excel 出于某种原因，而不是将其解释为 2 月 4 日。尝试在文本的最后一步选择文本到列和日期，但在这两种情况下它都会被翻转。

无法翻转的日期（例如 28/03/2013）仍然正确。

如果我不使用宏而是手动执行它，Excel 只有在将其作为发生的宏运行时才会翻转日期和月份。请注意，当仅将带有日期的单元格复制到带有日期的另一个单元格时，它也会出现在另一个宏中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:12:00.087

你可以试试：

```
Sub Convert_Dates()

Dim Rng As Range
Set Rng = Selection

For Each c In Rng
    c.Value = DateSerial(Right(Split(c)(0), 4), Mid(Split(c)(0), 4, 2), Left(Split(c)(0), 2))
Next c

End Sub 
```

它还可以帮助“文本日期”使用格式和“dd/mmm/yyyy”，因为这不会混淆。

# vb.net - 使用 Access 数据库的更新语句 (VB 2008)

> ID：15992314
> 
> 赞同：0
> 
> 时间：2013-04-13T20:02:02.743
> 
> 标签：vb.net, sql-update, ms-access-2010

我正在尝试为我的程序创建一个更新语句，该语句将根据用户输入的数据使用 SQL 更新数据库，不幸的是我遇到的问题是我一次只能更新一列，有时它们都不起作用。我知道这个功能非常基本，对攻击不是很安全，但这是我正在做的一个小项目。不幸的是，我只有基本的编程技能，所以我无法让这部分工作。如果可以提供任何帮助，将不胜感激。

```
Private Sub btnsave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnsave.Click

    Dim con As New OleDb.OleDbConnection

    Dim d1 As New OleDb.OleDbDataAdapter
    Dim d2 As New OleDb.OleDbDataAdapter
    Dim d3 As New OleDb.OleDbDataAdapter
    Dim d4 As New OleDb.OleDbDataAdapter
    Dim d5 As New OleDb.OleDbDataAdapter
    Dim d6 As New OleDb.OleDbDataAdapter
    Dim d7 As New OleDb.OleDbDataAdapter
    Dim d8 As New OleDb.OleDbDataAdapter
    Dim d9 As New OleDb.OleDbDataAdapter
    Dim d10 As New OleDb.OleDbDataAdapter

    Dim dt As New DataTable("Animals")

    'uses the 2010 compatible connection string
    con.ConnectionString = "PROVIDER=Microsoft.ACE.OLEDB.12.0;Data Source = h:\Animals.accdb"
    con.Open()

    MsgBox("UPDATE Animals SET LatinName = '" & latintxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'")
    d1 = New OleDb.OleDbDataAdapter("UPDATE Animals SET LatinName = '" & latintxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d2 = New OleDb.OleDbDataAdapter("UPDATE Animals SET LocationFound = '" & locationtxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d3 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AverageHeight = '" & heighttxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d4 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AverageWeight = '" & weighttxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d5 = New OleDb.OleDbDataAdapter("UPDATE Animals SET DietaryNeeds = '" & diettxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d6 = New OleDb.OleDbDataAdapter("UPDATE Animals SET ConservationStatus = '" & statustxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d7 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AverageLifeSpan = '" & lifetxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d8 = New OleDb.OleDbDataAdapter("UPDATE Animals SET BreedingSeason = '" & breedtxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d9 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AverageLength = '" & lengthtxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d10 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AnimalName = '" & nametxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)

    d1.Fill(dt)
    d2.Fill(dt)
    d3.Fill(dt)
    d4.Fill(dt)
    d5.Fill(dt)
    d6.Fill(dt)
    d7.Fill(dt)
    d8.Fill(dt)
    d9.Fill(dt)
    d10.Fill(dt)

    con.Close()

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:41:14.130

要执行更新命令，您可以编写一条语句并使用[OleDbCommand](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.aspx)和[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.executenonquery.aspx)方法。

```
Dim cmdText As String = "UPDATE Animals SET LatinName=?,LocationFound=?,AverageHeight=?," + 
                 "AverageWeight = ?, DietaryNeeds = ?, ConservationStatus = ?, " + 
                 "AverageLifeSpan = ?, BreedingSeason = ?, AverageLength = ? " +
                 "WHERE AnimalName = ?"

Using con = new OleDbConnection("PROVIDER=Microsoft.ACE.OLEDB.12.0;Data Source = h:\Animals.accdb")
Using cmd = new OleDbCommand(cmdText, con)
    con.Open()
    cmd.Parameters.AddWithValue("@p1",latintxt.Text)
    cmd.Parameters.AddWithValue("@p2",locationtxt.Text)
    cmd.Parameters.AddWithValue("@p3",heighttxt.Text)
    cmd.Parameters.AddWithValue("@p4",weighttxt.Text)
    cmd.Parameters.AddWithValue("@p5",diettxt.Text)
    cmd.Parameters.AddWithValue("@p6",statustxt.Text)
    cmd.Parameters.AddWithValue("@p7",lifetxt.Text)
    cmd.Parameters.AddWithValue("@p8",breedtxt.Text)
    cmd.Parameters.AddWithValue("@p9",lengthtxt.Text)
    cmd.Parameters.AddWithValue("@p10",nametxt.Text)
    cmd.ExecuteNonQuery()
End Using
End Using 
```

有几个问题需要注意，这可能会导致更新失败。
首先，所有参数值都是字符串类型，这可能是您的主要问题。如果数据库字段不是文本类型，那么您需要将这些值转换为适当的类型。
例如，如果字段`AverageHeight`是数字（双精度），则参数应写为：

```
cmd.Parameters.AddWithValue("@p3",Convert.ToDouble(heighttxt.Text)) 
```

当然，heighttxt 中的文本应该可以转换为 double。

第二个问题是用于查找要更新的记录的参数的内容。
在您的查询中，该字段被命名`AnimalName`，您使用 搜索记录`Form1.txtname.Text`，但在相同的查询文本中，您尝试使用 更新 WHERE 子句中使用的相同字段`nametxt.Text`。从逻辑上讲，这两个字段包含相同的值，因此您只需要一个参数。

最后一点要记住，在 OleDb 中，参数不是通过它们的名称来识别的，而是通过它们在命令文本中的位置来识别的。所以要注意参数添加到参数集合中的正确顺序

# c++ - 确定字符串是否具有所有唯一字符

> ID：15992317
> 
> 赞同：2
> 
> 时间：2013-04-13T20:02:26.437
> 
> 标签：c++, arrays, string, algorithm, char

我怎么能不使用数组来做到这一点？我有这个实现，但我需要在不使用数组、位操作和任何其他 C/C++ 库的情况下完成它。

```
bool IsCharDuplication(string s) {
  bool result = false;
  bool controlArray[256];
  for (int i = 0; i < s.length(); i++) {
    int val = s[i];
    if (controlArray[val] == true) {
      result = true;
      break;
    }
    controlArray[val] = true;
  }
  return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T20:07:52.300

使用两个嵌套循环：

```
bool IsCharDuplication(string s)
{   
 for (int i = 0; i < s.length(); i++) 
    for (int j = i+1; j < s.length(); j++) 
      if (s[i] == s[j])
        return true;   
 return false;
} 
```

***注意：***您的算法时间为 O(N)，但我的解决方案时间为 O(N^2)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T03:14:07.230

您可以比其他答案中建议的 O(N^2) 算法做得更好。

例如，您可以在 O(NlogN) 中对字符串进行快速排序或合并排序，然后对已排序的字符串进行一次遍历以确定 O(N) 中是否存在任何重复项。总时间复杂度为 O(NlogN)。

```
bool IsCharDuplication (string s)
{
  string s2 = sort(s);
  for (int i = 0; i < s.length () - 1; i++)
    if (s2[i] == s2[i+1])
      return true;
  return false;
} 
```

我没有包含用于对字符串进行排序的代码，但是您可以轻松找到此类代码并编写自己的`sort`方法（因为不允许使用 C/C++ 库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T03:11:10.897

您必须使用哈希表（或哈希集）来获得 O(n) 复杂度。以下实现使用按位运算，其中每个位对应于字母表中的每个字符。

```
/**
* Works for 0-127 ASCII string. Assuming, int is 16 bit.
**/
int isduplicate(const char* str){
    int hash[8]={0,0,0,0,0,0,0,0};
    while(*str){ 
        int pos=*str;
        if(hash[pos/16]&(1<<(pos%16)))
            return 1;
        hash[pos/16]|=(1<<(pos%16)); 
        str++;
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-10T01:45:13.213

```
// ASCII assumed over unicode
// O(n) algorithm
// O(1) space
bool isUnique(string s) {
    // cannot exceed number of unique characters
    if (s.length() > 256) return false;
    bool checker[256];
    for (int i = 0; i < s.length(); i++) {
        int val = s.at(i);
        if (checker[val] == true)
            return false;
        checker[val] = true;
    }
    return true;
} 
```

# jquery - SwipeJS - jQueryMobile 问题

> ID：15992321
> 
> 赞同：0
> 
> 时间：2013-04-13T20:02:46.313
> 
> 标签：jquery, cordova, mobile, gallery

我正在尝试使用 HTML5、PhoneGap 和 jQuery Mobile 构建移动应用程序。

我正在尝试使用 SwipeJS 合并一个图片幻灯片库。它按原样工作得很好。但是每次我尝试将它放在`<div data-role="page">`我的 jQuery Mobile html 文档中的“”中时，它根本不会显示。

我认为这与 jQuery Mobiles 样式表有关吗？我不是百分百确定。我对移动开发很陌生。

```
<div data-role="page" class="page-overide" data-fullscreen="true" data-position="fixed">

        <div data-role="header">
            <a href="index.html" data-icon="arrow-l" data-transition="reverse slide">Back</a>
            <h1>Applications</h1>
        </div>

        <div data-role="content" data-theme="my-theme">
            <strong>Title</strong>

            <div id='mySwipe' style='max-width:500px;' class='swipe' data-theme='my-theme'>
                <div class='swipe-wrap'>
                    <div><b>0</b></div>
                    <div><b>1</b></div>
                    <div><b>2</b></div>
                </div>
            </div>

        </div>

    </div>

 <script src='swipe.js'></script> 
```

更多在这里：

[http://jsfiddle.net/oliverj777/G7UkU/](http://jsfiddle.net/oliverj777/G7UkU/)

谢谢

- - - 更新 - - -

如果我注释掉样式的`visibility: hidden;`内部`.swipe`，我现在可以看到所有的图像位置，但现在它们都是一个在垂直方向的顶部？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T07:00:24.947

你在尝试这样吗

HTML：

```
<div id="slider" data-role="page" data-position="fixed">
     <div data-role="header" data-position="fixed">
                <a href="index.html" data-icon="arrow-l" data-transition="reverse slide">Back</a>
                <h1>Applications</h1>
            </div>
    <div data-role="content" id="contentSlider">
        <div id='mySwipe' style='min-width:500px; margin:0 auto' class='swipe'>
            <div class='swipe-wrap'>
                <div><b>1</b>
                </div>
                <div><b>2</b>
                </div>
                <div><b>3</b>
                </div>
            </div>
        </div>
        <div style='text-align:center;padding-top:20px;'>
            <button onclick='mySwipe.prev()'>prev</button>
            <button onclick='mySwipe.next()'>next</button>
        </div>
    </div>
    <div data-theme="a" data-role="footer" data-position="fixed" id="footer">
        <h1>Footer</h1>
    </div>    
</div> 
```

JS：

```
var elem = document.getElementById('mySwipe');

window.mySwipe = Swipe(elem, {
    continuous: true

}); 
```

[演示链接](http://jsfiddle.net/G7UkU/20/embedded/result/)

# ruby-on-rails - Rails 3 - 防止 form_for DOM 动作改变

> ID：15992323
> 
> 赞同：2
> 
> 时间：2013-04-13T20:02:55.237
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, form-for

概括[我今天早上提出的这个问题](https://stackoverflow.com/questions/15990326/return-redirect-to-in-private-controller-method)，如果之前有人问过这个问题并且我根本不知道要搜索什么，请接受我的歉意，但我很好奇 Rails 如何处理以下情况：

1.  使用 Devise，我登录了一个 ID 为 2 的用户。
2.  我单击已创建的链接以“编辑我的个人资料”（该链接将转到 /users/2/edit 页面）。
3.  使用 Firebug（或类似的东西），我修改表单并将操作从更改`action='/users/2'`为`action='/users/5'`.
4.  我更改了表单上的一个元素，然后单击提交。

此时，Rails 似乎允许使用我的更改提交和更新 ID 为 5 的用户。

我猜我不是第一个问这个问题的人。在我看来，Rails 应该“开箱即用”地处理这个问题，但我可能是错的。Rails 是否本机处理此问题，而我只是遗漏了一些东西？之前是否曾在 SO 或其他我想念的地方问过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:40:47.983

一些东西：

*   不要创建接受 DB 的路由`id`。相反，让它像`/my_profile`.
*   如果`id`在参数中传递了一个，则在控制器中完全忽略它。而是查找`current_user`已登录的用户并向他们显示他们自己的个人资料，而不管`id`传入的是什么个人资料/用户。
*   最后，可能也是最重要的，使用授权（允许用户做什么）来**禁止**一个用户编辑另一个用户的配置文件。不要与**身份验证**（用户登录/注销）混淆。

使用这种方法，是否更改 DOM 无关紧要，因为服务器永远不应该隐式信任传递给它的内容，这就是您现在面临的问题。任何 web/app 服务器都必须始终确认传递给它的参数在当前用户被允许执行的操作的上下文中实际上是有效的。

服务器**永远不**应该相信传递给它的东西的想法是一个关键的想法，适用于应用程序中的每一个操作，无一例外。

# c# - 在 c# 中运行从 blob 下载到流中的可执行文件

> ID：15992329
> 
> 赞同：2
> 
> 时间：2013-04-13T20:03:50.267
> 
> 标签：c#, azure, azure-storage, azure-blob-storage

我从我的 Cloud blob 下载了一个可执行文件，现在我想运行该文件。

这是我的相关代码：

```
Stream codeContent = new MemoryStream();
blobClientCode.GetBlockBlobReference(codeUri).DownloadToStream(codeContent);
codeContent.Position = 0;

Process p = new Process(); 
```

现在我想运行我下载的可执行文件。我想我需要为此使用流程，我只是不知道如何。有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:17:53.910

这样的事情应该做。将您的 blob 作为第一个参数传递，将本地文件路径作为第二个参数传递：

```
public static void RunBlob(ICloudBlob blob, string targetFilePath) {
    using (var fileStream = File.OpenWrite(targetFilePath)) {
        blob.DownloadToStream(fileStream);
    }

    var process = new Process() {StartInfo = new ProcessStartInfo(targetFilePath)};
    process.Start();
    process.WaitForExit(); // Optional
} 
```

# delphi - 带有 Tcolor 返回的 delphi 函数

> ID：15992334
> 
> 赞同：-1
> 
> 时间：2013-04-13T20:04:08.567
> 
> 标签：delphi, function, if-statement

只是一个快速的，忙于分配......有人可以检查我的逻辑在这个函数上是否正确，因为它似乎不起作用，编译时我没有得到任何错误

我这样调用函数：

```
lblcolor.color :=  colorChooser(intVariable); 
```

该函数必须将标签设为绿色、红色、黄色或蓝色，如下面的代码所示，但它似乎不起作用。

还是你们认为我必须为此使用案例陈述。

```
function ColorChooser(difference : integer): TColor;
begin
     if difference = 0 then
     begin
       Result := clGreen;
     end
     else if (difference >= 1) and (difference <= 3) then
     begin
        Result := clYellow;
     end
     else if (difference >= 4) 
          and (difference <= 8) then
     begin
        Result := clRed;
     end
     else
        Result := clBlue;

end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T20:21:07.073

您在这里有一个主要的格式问题。:-) 问题是标签默认采用其父级的颜色，并且也是透明的（意味着它的背景不可见）。将标签的`Transparent`属性设置`False`为在设计时在对象检查器中或在`FormShow`运行时在您的事件中。

现在，让我们清理您的代码：

```
function ColorChooser(difference : integer): TColor;
begin
  Result := clBlue;
  if difference = 0 then
    Result := clGreen
  else if (difference >= 1) and (difference <= 3) then 
    Result := clYellow
  else if (difference >= 4) and (difference <= 8) then
    Result := clRed;
end; 
```

要测试它：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  lblColor.Color := ColorChooser(Random(8));
end; 
```

现在，一种更简洁的编写方式：

```
function ColorChooser(difference : integer): TColor;
begin
  case difference of
    0: Result := clGreen;
    1..3: Result := clYellow;
    4..8: Result := clRed
  else
    Result := clBlue;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:20:29.857

您正在设置标签的背景颜色。一个始终透明的控件。所以什么也没有发生。

`lbl.Font.Color`改为设置。

至于您的功能， case 语句要干净得多：

```
case difference of
0:
  Result := clGreen;
1..3:
  Result := clYellow;
4..8:
  Result := clRed;
else
  Result := clBlue;
end; 
```

如果您确实想设置背景颜色，则必须将标签的`Transparent`属性设置为`False`.

# jquery - 为我的网站加载两个不同的 jquery 幻灯片

> ID：15992335
> 
> 赞同：0
> 
> 时间：2013-04-13T20:04:16.740
> 
> 标签：jquery

我试图一次加载两个不同的东西。我有一个用于单页幻灯片效果的 jquery 脚本，但我也在尝试在其中一个页面上加载一个结尾滑块。它不会工作。如果我删除幻灯片 jquery，则 coda 滑块将起作用。我怎样才能让他们都工作？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:19:31.593

Coda Slider 是一个 jQuery 库，所以它不能与 jQuery 脚本一起使用是有原因的。所以，请检查以下事项：

> 1）查看是否在所有其他脚本的开头引用了 jQuery 库。
> 
> 2) 您正在使用适当的 jQuery 库。
> 
> 3) 您的 jQuery 脚本没有错误。

如果您觉得每件事都不错，我认为您最好添加不适用于此问题的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:39:07.937

```
<!DOCTYPE html> <!-- The new doctype -->
<html>
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Coding A CSS3 &amp; HTML5 One Page Template | Tutorialzine demo</title>

<link rel="stylesheet" type="text/css" href="css/style.css" />

<!-- Internet Explorer HTML5 enabling code: -->

<!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>

    <style type="text/css">
    .clear {
      zoom: 1;
      display: block;
    }
    </style>

    <![endif]-->

<meta charset='utf-8' />
<meta name="description" content="Codaslider : JQuery Slider Plugin" />

<!-- 
  Here is the style sheet for the Coda Slider
  You may want to "minify" this after making edits
  http://www.refresh-sf.com/yui/ 
-->
<link rel="stylesheet" type="text/css" media="screen" href="./css/coda-slider.css">

<!-- This is just styling for the demo to make it a little less crowded at the top -->
<style>h1{margin:100px;}</style>

<!--
I would suggest using these for production, because of better caching

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">         
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js">  
</script>
-->

<!-- Definitely use these for development -->
<script src="./js/jquery-1.7.2.min.js"></script>
<script src="./js/jquery-ui-1.8.20.custom.min.js"></script>

<!-- This of course is required. The full version (not .min) is also included in the js   
directory -->
<script src="./js/jquery.coda-slider-3.0.min.js"></script>

<script>
$(function(){

  /* Here is the slider using default settings */
  $('#slider-id').codaSlider();
  /* If you want to adjust the settings, you set an option
     as follows:

      $('#slider-id').codaSlider({
        autoSlide:true,
        autoHeight:false
      });

  */
});

</script> 

</head>

<body>

    <section id="page"> <!-- Defining the #page section with the section tag -->

        <header>
<div id="navbox">
    <nav class="menu">
        <div class="home"><a href="#page" class="current">Home<br><span  
    class="little">you start here</span></a></div>
        <div class="about"><a href="#article1">About Us<br><span class="little">what we 
    do</span></a></div>
        <div class="gallery"><a href="#article2">Gallery<br><span class="little">a look 
    inside</span></a></div>
        <div class="events"><a href="#article3">Events<br><span class="little">planning 
    & design</span></a></div>
        <div class="contact"><a href="#article4">Contact Us<br><span 
   class="little">more info</span></a></div>
    </nav>
  <div id="socialLinks">
            <a href="#" class="fb">Facebook</a>
            <a href="#" class="twitter">Twitter</a>
          <a href="#" class="pinterest">Pinterest</a>
          <a href="#" class="linkedin">LinkedIn</a>
    </div>
</div>
<div id="banner">
    <div class="welcome">
    <h1>Hi There,</h1>
    <h2>WELCOME TO MY KIDS WISH, AN UPSCALE EVENT PLANNING COMPANY SPECIALIZING IN 
     CHILDREN'S AND ADULT PARTIES, BABY SHOWERS, AND MORE!</h2>
    <h3>Our events consist of detailed party packages complete with one of a kind decor 
    , unique favors, candy buffet, Characters  etc…  Whether you are planning a Disney   
    themed party for your little one, or the most elegant Adult party, My kids wish can 
     meet your needs. Let us do all the work while you sit back with family and friends 
       to enjoy....</h3>
    </div>

</div>
</header>
        <section id="articles"> <!-- A new section with the articles -->

            <!-- Article 1 start -->

            <div class="line"></div>  <!-- Dividing line -->

 <article id="article1">
             <!-- The new article tag. The id is supplied so it can be scrolled into   
 view. -->

<div id="navbox1">
    <nav class="menu">
        <div class="home"><a href="#page">Home<br><span class="little">you start    
here</span></a></div>
        <div class="about"><a href="#article1">About Us<br><span class="little">what we 
do</span></a></div>
        <div class="gallery"><a href="#article2">Gallery<br><span class="little">a look 
inside</span></a></div>
        <div class="events"><a href="#article3">Events<br><span class="little">planning 
& design</span></a></div>
        <div class="contact"><a href="#article4">Contact Us<br><span 
class="little">more info</span></a></div>
    </nav>
  <div id="socialLinks1">
            <a href="#" class="fb">Facebook</a>
            <a href="#" class="twitter">Twitter</a>
          <a href="#" class="pinterest">Pinterest</a>
          <a href="#" class="linkedin">LinkedIn</a>
    </div>
</div>
<div class="navborder"></div>
        <div class="articleBody clear">
            <div class="aboutusimg"></div>
            <div class="middle">
            <h1>My Kids Wish is here to create an unforgetable and unique themed party. 
  As every child has their own individual character so does each event we create. 
  Bringing a childs imagination to life is what we thrive.</h1><figure>
              <img src="images/cake.jpg" width="250" height="175" alt="cake"> </figure>

            <h1>Our parties are very detailed and will exceed your expectations. We 
  specializes in parties of all ages. We'll assist with planning special occasions so  
  that all you'll have to do is show up! Leave the planning to us and we'll take care 
  of the invitations, specialty entertainment, decorations, candy buffet, setup, and 
  clean up!</h1>

            </div>
            <div class="bottom"></div>
            </div>
        </article>

            <!-- Article 1 end -->

            <!-- Article 2 start -->

<article id="article2">
             <div class="ribbon-wrapper">
    <div class="ribbon-front">
 <nav class="menu">
        <div class="home"><a href="#page">Home<br><span class="little">you start     
 here</span></a></div>
        <div class="about"><a href="#article1">About Us<br><span class="little">what we 
 do</span></a></div>
        <div class="gallery"><a href="#article2">Gallery<br><span class="little">a look 
 inside</span></a></div>
        <div class="events"><a href="#article3">Events<br><span class="little">planning  

 & design</span></a></div>
        <div class="contact"><a href="#article4">Contact Us<br><span   
 class="little">more info</span></a></div>
    </nav>      </div>
    <div class="ribbon-edge-topleft"></div>
    <div class="ribbon-edge-topright"></div>
    <div class="ribbon-edge-bottomleft"></div>
    <div class="ribbon-edge-bottomright"></div>
    <div class="ribbon-back-left"></div>
    <div class="ribbon-back-right"></div>
</div>

  <div id="socialLinks2">
            <a href="#" class="fb">Facebook</a>
            <a href="#" class="twitter">Twitter</a>
          <a href="#" class="pinterest">Pinterest</a>
          <a href="#" class="linkedin">LinkedIn</a>
    </div>

<div class="navborder"></div>
        <div class="articleBody clear">
            <div class="middle">
    <iframe align="center" src="http://www.flickr.com/slideShow/index.gne?user_id=94896171@N07" width="785" height="500" frameBorder="0" scrolling="no"></iframe><br /><center><small>Created with <a href="http://www.flickrslideshow.com">flickr slideshow</a>.</small></center>                
            </div>

            </div>
            </article>

            <!-- Article 2 end -->

            <!-- Article 3 start --> 
```

```
 <div id="navbox3">
    <nav class="menu">
        <div class="home"><a href="#page">Home<br><span class="little">you start here</span></a></div>
        <div class="about"><a href="#article1">About Us<br><span class="little">what we do</span></a></div>
        <div class="gallery"><a href="#article2">Gallery<br><span class="little">a look inside</span></a></div>
        <div class="events"><a href="#article3">Events<br><span class="little">planning & design</span></a></div>
        <div class="contact"><a href="#article4">Contact Us<br><span class="little">more info</span></a></div>
    </nav>
  <div id="socialLinks3">
            <a href="#" class="fb">Facebook</a>
            <a href="#" class="twitter">Twitter</a>
          <a href="#" class="pinterest">Pinterest</a>
          <a href="#" class="linkedin">LinkedIn</a>
    </div>
</div>

                <div class="articleBody clear">
                    <div class="middle">

<div class="coda-slider"  id="slider-id">
  <div>
    <h2 class="title">Panel 1</h2>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas metus nulla, commodo a sodales sed, dignissim pretium nunc. Nam et lacus neque. Sed volutpat ante id mauris laoreet vestibulum. Nam blandit felis non neque cursus aliquet. Morbi vel enim dignissim massa dignissim commodo vitae quis tellus. Nunc non mollis nulla. Sed consectetur elit id mi consectetur bibendum. Ut enim massa, sodales tempor convallis et, iaculis ac massa. Etiam suscipit nisl eget lorem pellentesque quis iaculis mi mattis. Aliquam sit amet purus lectus. Maecenas tempor ornare sollicitudin.</p>
  </div>
  <div>
    <h2 class="title">Panel 2</h2>
    <p>Proin nec turpis eget dolor dictum lacinia. Nullam nunc magna, tincidunt eu porta in, faucibus sed magna. Suspendisse laoreet ornare ullamcorper. Nulla in tortor nibh. Pellentesque sed est vitae odio vestibulum aliquet in nec leo.</p>
  </div>
  <div>
    <h2 class="title">Panel 3</h2>
    <p>Cras luctus fringilla odio vel hendrerit. Cras pulvinar auctor sollicitudin. Sed lacus quam, sodales sit amet feugiat sit amet, viverra nec augue. Sed enim ipsum, malesuada quis blandit vel, posuere eget erat. Sed a arcu justo. Integer ultricies, nunc at lobortis facilisis, ligula lacus vestibulum quam, id tincidunt sapien arcu in velit. Vestibulum consequat augue et turpis condimentum mollis sed vitae metus. Morbi leo libero, tincidunt lobortis fermentum eget, rhoncus vel sem. Morbi varius viverra velit vel tempus. Morbi enim turpis, facilisis vel volutpat at, condimentum quis erat. Morbi auctor rutrum libero sed placerat. Etiam ipsum velit, eleifend in vehicula eu, tristique a ipsum. Donec vitae quam vel diam iaculis bibendum eget ut diam. Fusce quis interdum diam. Ut urna justo, dapibus a tempus sit amet, bibendum at lectus. Sed venenatis molestie commodo.</p>
  </div>
  <div>
    <h2 class="title">Panel 4</h2>
    <p>Nulla ultricies ornare erat, a rutrum lacus varius nec. Pellentesque vehicula lobortis dignissim. Ut scelerisque auctor eros sed porttitor. Nullam pulvinar ultrices malesuada. Quisque lobortis bibendum nisi et condimentum. Mauris quis erat vel dui lobortis dignissim.</p>
  </div>
</div>
  </div>

                </div>
            </article>

            <!-- Article 3 end -->
            <!-- Article 4 start --> 
```

```
 <div id="navbox4">
    <nav class="menu">
        <div class="home"><a href="#page">Home<br><span class="little">you start here</span></a></div>
        <div class="about"><a href="#article1">About Us<br><span class="little">what we do</span></a></div>
        <div class="gallery"><a href="#article2">Gallery<br><span class="little">a look inside</span></a></div>
        <div class="events"><a href="#article3">Events<br><span class="little">planning & design</span></a></div>
        <div class="contact"><a href="#article4">Contact Us<br><span class="little">more info</span></a></div>
    </nav>
  <div id="socialLinks4">
            <a href="#" class="fb">Facebook</a>
            <a href="#" class="twitter">Twitter</a>
          <a href="#" class="pinterest">Pinterest</a>
          <a href="#" class="linkedin">LinkedIn</a>
    </div>
</div>
<div class="navborder"></div>

                <div class="articleBody clear">

                </div>
            </article>

            <!-- Article 4 end -->

</section> 
```

### © Copyright 2013 | All Rights Reserved | My Kids Wish

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script src="js/jquery.scrollTo-min.js"></script>
    <script src="script.js"></script>

    </section>
    </body> 
```

# actionscript-3 - Adobe flex as3 从 imdb api 获取数据

> ID：15992336
> 
> 赞同：1
> 
> 时间：2013-04-13T20:04:23.177
> 
> 标签：actionscript-3, apache-flex, air, adobe, imdb

我正在尝试将数据从 imdb 获取到 as3。在我尝试从“海报”中设置对象图像 url 之前都可以。我尝试了以下方法：

```
public function loadXML(path:String):void {
            var xmlLoader:URLLoader = new URLLoader();
            xmlLoader.load(new URLRequest("http://www.omdbapi.com/?t="+path+"&r=xml"));
            xmlLoader.addEventListener(Event.COMPLETE,handleLoad);

        }

public function handleLoad(event:Event):void{
            var usersXML:XML = new XML(event.target.data);

            title1.text = usersXML.movie.@title;
            img.source =usersXML.movie.@poster;

        } 
```

来自其他站点的图像 100% 有效。

# autohotkey - 如何检测进程或应用程序是否正在运行并在未运行时终止程序

> ID：15992342
> 
> 赞同：1
> 
> 时间：2013-04-13T20:04:40.147
> 
> 标签：autohotkey

所以我试图确定 MultiMC.exe 进程是否正在运行，如果不是，我想结束我的脚本。

```
IfExist, Process MultiMC.exe
    ExitApp, 0
Else
    ExitApp 1 
```

我已经尝试过了，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:43:15.270

[尝试以下从http://www.autohotkey.com/board/topic/50026-if-process-not-running-run-it/](http://www.autohotkey.com/board/topic/50026-if-process-not-running-run-it/)提取的“Process,Exist,act.exe”

我只展示这个，以便您了解“Process，Exist，act.exe”如何在另一个脚本中使用。

```
#persistent
SetTitleMatchMode,2
Loop
{
    Process,Exist, act.exe ; Sets errorlevel to process PID
    IfWinNotExist, % "ahk_pid " errorlevel ; Expression for ahk_pid
        { ; Block to do something.
        Run, C:\Documents and Settings\Pat\Desktop\act.exe
        Break ; Stops loop if run or it will continue forever.
        }
} 
```

# java - 语句落到下一行

> ID：15992348
> 
> 赞同：0
> 
> 时间：2013-04-13T20:05:14.380
> 
> 标签：java

出于某种原因，我的陈述一直延续到下一行，而没有做它应该做的事情。

```
package Employee;
import java.util.Scanner;
import static java.lang.System.out;

public class EmployeeTest {

public static void main (String args[]) {

out.println ("Welcome to employee storer: ");

Scanner imput = new Scanner (System.in);
Employee employee1 = new Employee();// Creates an employee
Employee employee2 = new Employee();

out.println ("Please enter first name: ");
String fName = imput.nextLine(); //reads keyboard
    employee1.setfName(fName);// sets first name

out.println("please enter last name: ");
String lName = imput.nextLine();//reads keyboard
    employee1.setlName(lName);// sets second name

out.println("Please enter pay: ");
double pay = imput.nextDouble();//reads keyboard
    employee1.setPay(pay);//sets the pay

out.println ("Please enter first name: ");
String fName1 = imput.nextLine(); //reads keyboard
    employee2.setfName(fName1);// sets first name

out.println("please enter last name: ");
String lName1 = imput.nextLine();//reads keyboard
    employee2.setlName(lName1);// sets second name

out.println("Please enter pay: ");
double pay1 = imput.nextDouble();//reads keyboard
    employee2.setPay(pay1);//sets the pay

employee1.printer();// prints the info
employee2.printer();// same here

employee1.raise();
} 
```

}

我的问题是第二个 fName 输入，它永远不会从控制台获得输入，它最终看起来像这样

```
"Welcome to employee storer: 
 Please enter first name: 
 Jake
 please enter last name: 
 Smith
 Please enter pay: 
 100
 Please enter first name: 
 please enter last name: 
 Jake
 Please enter pay: 
 100
 The employee Jake Smith yearly salary is: 1200.0
 The employee Jake yearly salary is: 1200.0
 Your raise is: 120.0
 Your new yearly pay is: 1200.0120.0" 
```

我的方法类如下所示： package Employee; 导入静态 java.lang.System.out；

```
public class Employee {
private String fName;
private String lName;
private double pay;

public void payCheck() {
    if (pay > 0 )
        pay = 0;
}
public double yearly() {
    double overall = pay * 12; 
    return overall;
}
public void printer() {
    out.println( " The employee " + fName + " " + lName + 
            " yearly salary is: " + pay * 12 );
}
public void raise() {
    double year = pay * 12;
    double increase = .1;
    double raise = increase * year;
    out.println("Your raise is: " + raise );
    out.print("Your new yearly pay is: " + year + raise);
}

// Getters and setters 
public String getfName() {
    return fName;
}
public void setfName(String fName) {
    this.fName = fName;
}
public String getlName() {
    return lName;
}
public void setlName(String lName) {
    this.lName = lName;
}
public double getPay() {
    return pay;
}
public void setPay(double pay) {
    this.pay = pay;
} 
```

}

最后的年薪我也得到了一个奇怪的输出。不太确定为什么，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T20:12:43.173

`nextDouble()`将仅返回该行上的值，将行 return 留在后面，由下一个语句`Double`拾取。`nextLine()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T20:13:13.103

尝试这个

```
imput.nextDouble(); 
```

只需在下面执行`nextDouble();`

```
imput.nextLine(); 
```

每当您想通过`.next()`呼叫扫描号码时，请确保在其`.nextLine()`旁边添加一个空白，以便`Scanner`移动到正确的位置

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T20:13:16.637

nextDouble() 只是从输入中读取双精度，而不是整行的双精度。在 double 之后输入的回车保留在输入中，之后的 nextLine() 语句会立即检索，而不是暂停。

使用 nextLine() 检索它，然后将结果转换为双精度（显然带有错误检查）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-13T20:14:05.287

问题是你在加倍之后按回车键；System.in 得到一个双精度，后跟一个换行符，它被读取为双精度（换行符停止扫描），然后尝试读取一个字符串直到新行（这导致一个空字符串）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-13T20:21:57.660

还有关于你问题的最后一部分

```
out.print("Your new yearly pay is: " + year + raise); 
```

这是做简单的字符串连接，所以你得到“奇怪”的结果。相反，尝试一对额外的括号进行适当的求和，然后连接

```
out.print("Your new yearly pay is: " + (year + raise)); 
```

# c++ - 为什么 _kbhit() 冻结线程？

> ID：15992349
> 
> 赞同：1
> 
> 时间：2013-04-13T20:05:19.527
> 
> 标签：c++, multithreading, visual-studio-2012

我想知道为什么循环中的 _kbhit() 不允许工作线程，在下面的代码中必须有一个输出到屏幕“测试！”，但它没有发生。为什么？

```
#include <iostream>
#include <process.h>
#include <conio.h>

using namespace std;

void Thread(void *par)
{
        while (true)
        {
            cout<<"Test!"<<endl;
        };
} 

int main(int argc, char* argv[])
{ 
    _beginthread( Thread, 0, NULL);
    while(!_kbhit());
    return 0;
} 
```

# c++ - 在 unique_ptr 中动态分配的数组上应用 std::begin()？

> ID：15992351
> 
> 赞同：5
> 
> 时间：2013-04-13T20:05:25.340
> 
> 标签：c++, c++11

我在动态分配的数组上有一个唯一指针，如下所示：

```
const int quantity = 6;
unique_ptr<int[]> numbers(new int[quantity]); 
```

到目前为止这应该是正确的（我认为，`[]`模板参数中的 很重要，对吧？）。顺便说一句：是否可以像`int some_array[quantity] = {};`这里一样初始化元素？

现在我试图像这样迭代数组：

```
for (auto it = begin(numbers); it != end(numbers); ++it)
    cout << *it << endl; 
```

但我不知道语法如何正确。有办法吗？或者，我可以使用如下索引：

```
for (int i = 0; i < quantity; ++i)
    cout << numbers[i] << endl; 
```

其中之一是首选吗？

（与标题没有直接关系：下一步我想将其减少为基于范围的 for 循环，但我现在只有 VS2010，无法尝试。但是我需要处理一些事情吗？）

谢谢！格里特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T04:27:34.413

编译器应该将此原型应用于`std::begin`：

```
template< class T, size_t N > 
T* begin( T (&array)[N] ); 
```

这意味着参数类型是`int(&)[N]`，既不是，`std::unique_ptr`也不是`int *`。如果这是可能的，如何`std::end`计算最后一个？

但为什么不直接使用原始指针或 STL 容器呢？

```
const int quantity = 6;
std::unique_ptr<int[]> numbers{new int[quantity]};
// assignment
std::copy_n(numbers.get(), quantity,
            std::ostream_iterator<int>(std::cout, "\n"));

const int quantity = 6;
std::vector<int> numbers(quantity, 0);
// assignment
std::copy(cbegin(numbers), cend(numbers),
          std::ostream_iterator<int>(std::cout, "\n")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T00:48:03.803

C++ 中动态分配的数组（即： 的结果`new []`）没有大小信息。因此，您无法获得数组的大小。

你可以这样实现`std::begin`：

```
namespace std
{
  template<typename T> T* begin(const std::unique_ptr<T[]> ptr) {return ptr.get();}
} 
```

但是没有办法实现`end`。

你考虑过使用`std::vector`吗？有了移动支持，它不应该比`unique_ptr`数组更昂贵。

# mysql - 无法在复杂查询中实现 ORDER BY 子句

> ID：15992356
> 
> 赞同：0
> 
> 时间：2013-04-13T20:06:47.577
> 
> 标签：mysql, sql, sqlite

我试图实现这个[问题](https://stackoverflow.com/questions/15899701/optimise-two-sql-queries-and-a-list-comprehension)的答案。答案确实有效，但我发现我错过了为表中的列实现子句`ORDER BY`（我已经检查过该列是否确实存在）。但我无法让它工作。这就是我的问题归结为。这有效：`order``qrgame_place`

```
sql = '''SELECT P.id, (TP.id IS NOT NULL) AS done
FROM qrgame_place P
LEFT OUTER JOIN qrgame_team_places TP
ON P.id = TP.place_id AND TP.team_id = %s
WHERE P.game_id = %s
''' 
```

但这不会：

```
sql = '''SELECT P.id, (TP.id IS NOT NULL) AS done
FROM qrgame_place P
LEFT OUTER JOIN qrgame_team_places TP
ON P.id = TP.place_id AND TP.team_id = %s
WHERE P.game_id = %s
ORDER BY P.order ASC
''' 
```

我试图改变的地方，`ORDER BY`但它不会帮助。

Django 在模板中给我的错误是：

```
Exception Type:     DatabaseError
Exception Value:    near "order": syntax error 
```

我对 SQL 语言有什么不了解的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:09:01.057

订单不在 SELECT 中，因此不能按此排序。

将其添加到输出列表

```
sql = '''SELECT P.id, (TP.id IS NOT NULL) AS done, P.order
FROM qrgame_place P
LEFT OUTER JOIN qrgame_team_places TP
ON P.id = TP.place_id AND TP.team_id = %s
WHERE P.game_id = %s
ORDER BY P.order ASC
''' 
```

或按其他列排序，例如 id 或 done

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:50:09.290

问题，我应该在（doh）之前发现自己`order`当然是保留关键字 i SQL 并且即使我写了也会在 sqlite 中触发 SYNTAX ERROR `P.order`，我认为生产服务器上的 MySQL 不会给我任何问题（？）。但这似乎有效：

```
sql = '''SELECT P.id, (TP.id IS NOT NULL) AS done, P.`order` as ord
FROM qrgame_place P
LEFT OUTER JOIN qrgame_team_places TP
ON P.id = TP.place_id AND TP.team_id = %s
WHERE P.game_id = %s
ORDER BY ord
''' 
```

`order`观察查询中第一行周围的特殊字符。我可以（我相信）选择不选择 P.order 并在 ORDER BY 行上以这种方式调用它。但我听其他的分析，只是包括它。

MySQL 和 SQLite 采用了这一点。不确定其他 DB:s。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T20:09:45.340

ORDER BY 对输出进行排序。您尝试排序的字段不在输出中，因此该语句无效。

# sql - 使用单个 SQL 命令更新表并显示更新的行

> ID：15992365
> 
> 赞同：1
> 
> 时间：2013-04-13T20:08:20.883
> 
> 标签：sql, postgresql, sql-update, sql-returning

我需要你对 PostgreSQL 的帮助。我有一个作业，我必须更新表格的一列并显示所有已更新的信息，但我必须使用一个命令来完成所有这些工作。更糟糕的是，我只能使用 SELECT、UPDATE、SET、WHERE 等基本子句。

这可能吗？我没有找到任何例子。

我尝试了几种组合，例如：

```
SELECT * FROM customer 
(UPDATE custumer SET bithdate = bithdate + INTERVAL '1 DAY'
 WHERE   bithcity = 'New York'); 
```

这没有用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:13:23.277

既然这是作业，我会给你留点东西。

### 单条 SQL 语句

开始阅读[手册中有关命令的](http://www.postgresql.org/docs/current/interactive/sql-update.html)[**`RETURNING`**子句`UPDATE`](http://www.postgresql.org/docs/current/interactive/sql-update.html)。

另一种选择（对于更复杂的场景）是[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)。你仍然需要这个`RETURNING`子句。

或者您可以[创建一个](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)可以在单个语句中调用的函数，但这会违反您仅使用简单 DML 命令的要求。

### 单笔交易

如果允许多条语句，另一种选择是将简单`UPDATE`加上简单`SELECT`包装到[事务](http://www.postgresql.org/docs/current/interactive/tutorial-transactions.html)中。

# c++ - 合并两个排序的文本文件

> ID：15992366
> 
> 赞同：0
> 
> 时间：2013-04-13T20:08:38.130
> 
> 标签：c++, sorting, merge

我需要合并两个文本文件，并让它们在第三个输出文件上按“lastName”排序。我的代码在下面，它输出乱码，都在一行上。我知道我的超载可能很愚蠢，感谢您的帮助。

```
//header
#include <fstream>
#include <string>
#include <iostream> 
using namespace std;

struct mergedList {
  string firstName;
  string lastName;
  float gpa;
  int hours;
};

ostream& operator << (ostream& os, mergedList A) {
  os << A.firstName << "\t" << A.lastName << "\t" << A.gpa << "\t" << A.hours;
  return os;
}
istream& operator >> (istream& is, mergedList& A) {
  is >> A.firstName >> A.lastName >> A.gpa >> A.hours;
  return is;
}

void swap(mergedList D1[], int i, int j);
void sort(mergedList D1[], int size);

int main() {
  ifstream indata;
  ifstream indata2;
  ofstream outdata;
  indata.open("merge1.txt");
  indata2.open("merge2.txt");
  outdata.open("merged.txt");
  //begin sentinel controlled loop for both lists
  mergedList D1[100];
  int index = 0;
  indata >> D1[index];
  while (!indata.eof()) {
    index++;
    indata >> D1[index];
  }
  sort(D1, index);
  mergedList D2[100];
  int index2 = 0;
  indata2 >> D2[index2];
  while (!indata2.eof()) {
    index2++;
    indata2 >> D2[index2];
  }
  sort(D2, index); {
    int i = 0, j = 0;
    while ((i < index) && (j < index2)) if (D1[i].lastName < D2[j].lastName) {
        outdata << D1[i];
        i++;
        indata >> D1[i];
      } else {
        outdata << D2[j];
        j++;
        indata2 >> D2[j];
      }
  }
  indata.close();
  indata2.close();
  outdata.close();
  return 0;
}

void swap(mergedList D1[], int i, int j) {
  mergedList temp;
  temp = D1[i];
  D1[i] = D1[j];
  D1[j] = temp;
  return;
}

void sort(mergedList D1[], int size) {
  for (int p = 1; p < size; p++) {
    for (int c = 0; c < size - p; c++) {
      if (D1[c].lastName > D1[c + 1].lastName) swap(D1, c, c + 1);
    }
  }
  return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:31:29.903

这是一些代码。我已经尽力解释了。如果您使用的是 C++，您应该尝试*利用*已经为您提供的容器和算法。

```
struct mergedList
{
    string firstName;
    string lastName;
    float gpa;
    int hours;
};

ostream& operator <<(ostream& os, mergedList A)
{
    os << A.firstName << "\t" << A.lastName << "\t" << A.gpa << "\t" << A.hours;
    return os;
}

istream& operator >>(istream& is, mergedList& A)
{
    is >> A.firstName >> A.lastName >> A.gpa >> A.hours;
    return is;
}

// We use this to compare two MergedList structs. i.e. by first name
// http://www.cplusplus.com/reference/algorithm/sort/ for an example
struct my_sorter {
  bool operator() (mergedList one, mergedList two) { return one.firstName < two.firstName ; }
};

int main()
{
    ifstream indata;
    ifstream indata2;
    ofstream outdata;

    indata.open("merged.txt");
    indata2.open("merged2.txt");
    outdata.open("merged.txt");

    // This can be a vector. No need for array here.
    vector<mergedList> D1;
    int index=0, index2 = 0;

    mergedList tmp;

    // You can read from streams like this if the data is formatted.
    while (indata >> tmp)
    {
        D1.push_back(tmp);
        index++;            // Maybe you need this??
    }

    // Read the second file in to the same vector.
    // You don't need another one.
    while (indata2 >> tmp)
    {
        D1.push_back(tmp);
        index2++;
    }

    cout << "Before sorting" << endl;
    copy(D1.begin(), D1.end(), ostream_iterator<mergedList>(cout, "\n"));

    // Sort the vector using the std::sort algorithm.
    // http://www.cplusplus.com/reference/algorithm/sort/ for an example
    sort(D1.begin(), D1.end(), my_sorter());

    cout << "After sorting" << endl;
    copy(D1.begin(), D1.end(), ostream_iterator<mergedList>(cout, "\n"));

    // Write the sorted list to the output file
    copy(D1.begin(), D1.end(), ostream_iterator<mergedList>(outdata, "\n"));

    indata.close();
    indata2.close();
    outdata.close();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:22:07.287

如果优化对您来说是个问题，我建议您使用 STL 容器，因为实现了正确的排序方法。如果您的代码应该适用于每个给定的输入文件，请不要使用静态数组。我还可以补充一点，您可以先合并两个文件，然后对第三个文件进行排序。

# ruby-on-rails - 控制器规范中已安装引擎上的 RoutingError

> ID：15992371
> 
> 赞同：2
> 
> 时间：2013-04-13T20:09:10.520
> 
> 标签：ruby-on-rails, rspec, routing

我用这条路线创建了一个可安装的引擎：

```
Rails.application.routes.draw do
  scope module: :minimalist_cms do
    root to: "pages#show"
    get ':id', to: "pages#show"
    resources :pages
    resources :page_parts
  end
end 
```

我有这个测试：

```
require 'spec_helper'

module MinimalistCms
  describe PagesController, type: :controller do

    let(:page) { stub_model(Page) }

    describe :show do
      context "when there is a page" do
        it 'should find by slug' do
          Page.should_receive(:find_by_slug).and_return(page)
          get :show, id: 'test'
        end
      end
    end
  end
end 
```

当我输入时，`rake routes`我得到了这个结果：

```
 root        /                              minimalist_cms/pages#show
               GET    /:id(.:format)                 minimalist_cms/pages#show
         pages GET    /pages(.:format)               minimalist_cms/pages#index
               POST   /pages(.:format)               minimalist_cms/pages#create
      new_page GET    /pages/new(.:format)           minimalist_cms/pages#new
     edit_page GET    /pages/:id/edit(.:format)      minimalist_cms/pages#edit
          page GET    /pages/:id(.:format)           minimalist_cms/pages#show
               PUT    /pages/:id(.:format)           minimalist_cms/pages#update
               DELETE /pages/:id(.:format)           minimalist_cms/pages#destroy
    page_parts GET    /page_parts(.:format)          minimalist_cms/page_parts#index
               POST   /page_parts(.:format)          minimalist_cms/page_parts#create
 new_page_part GET    /page_parts/new(.:format)      minimalist_cms/page_parts#new
edit_page_part GET    /page_parts/:id/edit(.:format) minimalist_cms/page_parts#edit
     page_part GET    /page_parts/:id(.:format)      minimalist_cms/page_parts#show
               PUT    /page_parts/:id(.:format)      minimalist_cms/page_parts#update
               DELETE /page_parts/:id(.:format)      minimalist_cms/page_parts#destroy 
```

它有效，但如果我为此改变，在我的引擎中：

```
MinimalistCms::Engine.routes.draw do
  scope module: :minimalist_cms do
    root to: "pages#show"
    get ':id', to: "pages#show"
    resources :pages
    resources :page_parts
  end
end 
```

在我的应用程序中：

像这样安装在我的虚拟应用程序中：

```
Dummy::Application.routes.draw do
  mount MinimalistCms::Engine, at: '/'
end 
```

我有这个错误：

```
 Failure/Error: get :show, id: 'test'
 ActionController::RoutingError:
   No route matches {:id=>"test", :controller=>"minimalist_cms/pages", :action=>"show"} 
```

结果`rake routes`似乎相似：

```
 minimalist        /                              MinimalistCms::Engine
          root        /                              minimalist_cms/pages#show
               GET    /:id(.:format)                 minimalist_cms/pages#show
         pages GET    /pages(.:format)               minimalist_cms/pages#index
               POST   /pages(.:format)               minimalist_cms/pages#create
      new_page GET    /pages/new(.:format)           minimalist_cms/pages#new
     edit_page GET    /pages/:id/edit(.:format)      minimalist_cms/pages#edit
          page GET    /pages/:id(.:format)           minimalist_cms/pages#show
               PUT    /pages/:id(.:format)           minimalist_cms/pages#update
               DELETE /pages/:id(.:format)           minimalist_cms/pages#destroy
    page_parts GET    /page_parts(.:format)          minimalist_cms/page_parts#index
               POST   /page_parts(.:format)          minimalist_cms/page_parts#create
 new_page_part GET    /page_parts/new(.:format)      minimalist_cms/page_parts#new
edit_page_part GET    /page_parts/:id/edit(.:format) minimalist_cms/page_parts#edit
     page_part GET    /page_parts/:id(.:format)      minimalist_cms/page_parts#show
               PUT    /page_parts/:id(.:format)      minimalist_cms/page_parts#update
               DELETE /page_parts/:id(.:format)      minimalist_cms/page_parts#destroy 
```

应用程序的行为没有改变，它可以工作，但测试失败。

你有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T12:30:44.257

也许不是使用范围，而是尝试以正常方式（没有范围）使用编写路由。

现在在您声明继承自 Rails::Engine 的引擎的文件中添加隔离命名空间。

```
Module MinimalistCms
   Class Engine < Rails::Engine
     isolate_namespace MinimalistCms
   end
end 
```

现在尝试运行您的测试。

# python - 同时读取和写入文件

> ID：15992375
> 
> 赞同：0
> 
> 时间：2013-04-13T20:09:43.573
> 
> 标签：python, file-io, system-verilog

我有一个用 System Verilog 编写的模块，它将 SRAM 的内容转储到一个文件中。我想从这个文件中读取数据，并在一个用 python 编写的单独程序中使用数据，但是是实时的。我对verilog代码的编写没有太多控制权。是否有可能以某种方式管理两个读写？目前，当它从文件中读取时，每行的开头都会插入一个（看似）随机数，这会导致解析失败。我假设这些前缀仅在它们同时读取和写入时出现，因为如果我非常缓慢地运行它们，它就可以正常工作。

```
window = Tk()
canvas = Canvas(window, width=WIDTH, height=HEIGHT, bg="#000000")
canvas.pack()
img = PhotoImage(width=WIDTH, height=HEIGHT)
canvas.create_image((WIDTH/2, HEIGHT/2), image=img, state="normal")

def redraw():
fp = open('test_data.txt','r')
lines=fp.readlines()
for i in range(len(lines)):
        #do stuff
fp.close()
window.after(35,redraw)  

window.after(35,redraw)
mainloop() 
```

这就是阅读。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:29:32.740

从多个进程读取和写入文件可能是不可预测的。

如果您在类 Unix 系统上运行，则可以使用`mkfifo`创建一个类似文件的对象，您可以同时写入和读取该对象，并且数据将保持正确的顺序。

在 Windows 上，您需要一个 NamedPipe - 您可以从 Python 创建，然后通过在 SystemVerilog 中作为普通文件打开来连接（我相信！）

[http://docs.activestate.com/activepython/2.4/pywin32/win32pipe.html](http://docs.activestate.com/activepython/2.4/pywin32/win32pipe.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T14:25:59.373

我建议使用 VPI 直接从模拟中访问 SRAM 的内容。这也开启了动态调整激励的可能性（例如发送数据直到 FIFO 已满），而不是依赖文件进行输入/输出。

由于您使用的是 Python，您可以查看[Cocotb](http://potentialventures.github.io/cocotb/)，这是一个开源 Python 协同仿真框架。基本上，您可以使用 python 'dot' 符号来遍历设计层次结构并提取值：

```
# Pull out the values from the simulation
for index in range(len(dut.path.through.hierarchy.ram)):
    val = dut.path.through.hierarchy.ram[index].value.integer
    # do stuff 
```

我用一个简单的例子在 EDA Playground 上创建了一个简单的例子：[http ://www.edaplayground.com/s/57/565](http://www.edaplayground.com/s/57/565)

*免责声明*：我是 Cocotb 开发人员之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-27T23:34:55.210

您可以使用管道，在此示例中，一个 cmd (windows) 命令行在管道中写入，然后程序显示其来自同一管道的输出：

```
import subprocess,sys

p = subprocess.Popen("netsatat",shell=False ,stdout=subprocess.PIPE)
while True:
    out = p.stdout.readline()
    if out == '' and p.poll() != None:
        break
    if out != b'':
        print(out.decode('ascii','backslashreplace'))
    else :
        break; 
```

# breeze - 调用 EntityAspect.validateProperty() 方法时，Breeze 抛出 Null 引用异常

> ID：15992383
> 
> 赞同：0
> 
> 时间：2013-04-13T20:10:08.473
> 
> 标签：breeze

我将以下实体属性定义为以下元数据显示：

```
{"name":"website","dataType":"String",
    "validators":[
        {"name":"string"},
        {"messageTemplate":"'%displayName%' is not valid",
            "pattern":"^$|(^http|^https)://[a-zA-Z0-9-.]+.[a-zA-Z]{2,3}(/S*)?",
            "name":"regExValidator"}]} 
```

当我尝试调用`entityAspect.validateProperty("website")`，并且`website`属性的值为 null 时，对该`validateProperty()`方法的调用会引发以下异常：

> “无法获取未定义或空引用的属性‘complexAspect’”

我不会期望这种行为，因为`website`实体属性可能为空。看起来该`validateProperty`方法中可能存在空引用处理错误：

在**Breeze.debug.js 中**：

```
proto.validateProperty = function (property, context) {
    var value = this.getPropertyValue(property); // performs validations

    if (value.complexAspect) { // THROWS EXCEPTION IF 'value' IS NULL
        return validateTarget(value);
    }

    context = context || {};
    context.entity = this.entity;
    if (typeof(property) === 'string') {
        context.property = this.entity.entityType.getProperty(property, true);
        context.propertyName = property;
    } else {
        context.property = property;
        context.propertyName = property.name;
    }

    return this._validateProperty(value, context);
}; 
```

只是好奇我做错了什么，或者这只是一个错误？

谢谢，理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:14:16.433

**编辑：**这已在 Breeze v1.3.0 中修复，现在可用。

* * *

这是一个错误，将在本周晚些时候发布的下一个版本中修复。...感谢您找到并报告它:)

# eigen - 如何在特征中制作具有动态大小的对角矩阵？

> ID：15992384
> 
> 赞同：0
> 
> 时间：2013-04-13T20:10:18.843
> 
> 标签：eigen

我想用 C++ 线性代数库 eigen 制作一个对角矩阵，但我不知道编译时矩阵的大小。因此，

```
DiagonalMatrix<Scalar, SizeAtCompileTime> diag1(size); 
```

不管用。沿对角线的值也不同。帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:33:44.230

您需要使用与您相关的内容来实例化模板参数：

```
DiagonalMatrix<double,Eigen::Dynamic> diag1(size); 
```

# python - 如何将应用程序设置保存在配置文件中？

> ID：15992387
> 
> 赞同：8
> 
> 时间：2013-04-13T20:10:27.493
> 
> 标签：python, settings, app-config, ini

我正在开发一个程序，它有一个设置窗口，我可以在其中更改程序的各种参数。在某种配置文件中读取/保存它们的最佳方法是什么？我知道有些软件和游戏使用`.ini`文件或类似系统。如何在 Python 中实现这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T20:13:30.540

Python 标准库包含[`ConfigParser`模块](http://docs.python.org/2/library/configparser.html)，它为您处理 ini 样式的配置文件。对于大多数用途来说，它已经足够了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T20:14:51.147

配置文件的另一个流行选项是 JSON - 它是一种简单的符号，可以很好地支持多种语言。

Python 在标准库中有[这个`json`模块](http://docs.python.org/3.3/library/json.html#module-json)，这使得它非常容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T20:48:28.037

由于您在问题中引入了术语配置文件，因此先前的答案集中在创建纯文本文件的方法上，也可以使用标准文本编辑器对其进行操作。根据存储的设置类型，这可能是不希望的，因为至少在读回配置文件后需要进行严格的合理性检查。所以我添加了[货架](http://docs.python.org/2/library/shelve.html)模块的提议，这是一种让信息在文件中持久化的直接方法。

# java - Play 框架中的静态方法与模板参数

> ID：15992388
> 
> 赞同：2
> 
> 时间：2013-04-13T20:10:31.203
> 
> 标签：java, templates, parameters, static, playframework-2.0

在我使用`Play 2.0.x`框架的项目中，我有*很多*模板。这些模板中的很多都采用`String`and`Lang`参数来在页面上以某种语言显示用户名和文本。

由于这些几乎用于所有模板，我应该：

1.  将用户名和语言作为参数传递给模板？
    *或者*
2.  在我的模型中使用静态方法来获取用户名/语言？

**示例 1：**

控制器：

```
return ok(views.html.template.render(User.username(), User.language()); 
```

调用模板：

```
@(lang: Lang)(username : String)
<p>@Messages.get(lang, "hello") username!</p> 
```

**示例 2：**

控制器：

```
return ok(views.html.template.render()); 
```

调用模板：

```
<p>@Messages.get(User.language(), "hello") User.username()!</p> 
```

我想知道哪种方法更受欢迎，为什么以及使用一种方法是否有任何缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:25:45.857

实际上，您完全理解我只能建议使用静态方法的使用方式，因为您可以看到`@Messages`类这样做并且它有效，否则您每次都需要传递它们。

提示，为了避免冗余的数据库查询，尤其是在获取登录用户的对象时，请考虑使用缓存 API（每个用户一个条目）。

# c - Malloc 实现 - 困惑

> ID：15992389
> 
> 赞同：1
> 
> 时间：2013-04-13T20:10:34.000
> 
> 标签：c

我正在尝试创建自己的 malloc() 进行练习。我从这个[线程得到了下面的代码。](https://stackoverflow.com/questions/5422061/malloc-implementation)

```
typedef struct free_block {
    size_t size;
    struct free_block* next;
} free_block;

static free_block free_block_list_head = { 0, 0 };

// static const size_t overhead = sizeof(size_t);

static const size_t align_to = 16;

void* malloc(size_t size) {
    size = (size + sizeof(free_block) + (align_to - 1)) & ~ (align_to - 1);
    free_block* block = free_block_list_head.next;
    free_block** head = &(free_block_list_head.next);
    while (block != 0) {
        if (block->size >= size) {
            *head = block->next;
            return ((char*)block) + sizeof(free_block);
        }
        head = &(block->next);
        block = block->next;
    }

    block = (free_block*)sbrk(size);
    block->size = size;

    return ((char*)block) + sizeof(free_block);
}

void free(void* ptr) {
    free_block* block = (free_block*)(((char*)ptr) - sizeof(free_block ));
    block->next = free_block_list_head.next;
    free_block_list_head.next = block;
} 
```

我对将内存块视为链表感到困惑。在我看来，我们基本上每次需要内存时都会调用 sbrk() 并检查我们之前请求的一些内存是否同时没有被释放。

但是我们无法检查属于其他进程的其他内存块，我们只能检查我们之前请求并添加到我们的链表中的内存。

如果是这种情况，这是最优的吗？这是标准 malloc() 的工作方式吗？有没有办法让我们处理堆上的所有内存？

请像我 5 岁一样解释，我很难理解这个概念。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T21:41:53.010

扩展进程数据段不会影响其他进程。在大多数（最近的）架构上，进程内存模型是扁平的，即每个进程都有一个`virtual`地址空间（`2^32`或`2^64`字节）。当进程请求额外的内存（页）时，`virtual`会为进程添加一个内存。事实上，这并不意味着发生任何物理内存分配，因为`virtual`内存可以映射到交换文件，或者在使用之前完全取消映射（地址已分配给进程，但没有分配实际资源）。内核负责`virtual`根据需要/每个资源可用性将物理地址映射到一个。

算法是做什么的？

当用户调用`malloc`算法试图找到可用的空块。一开始是没有的，所以算法试图扩展过程数据段。

但是，您可以看到，这`free`并没有释放虚拟内存（因为它不像分配它那么简单），而是将此`released`块添加到未使用块的列表中。

因此，当有*预发布*的块时，`malloc`尝试重用它们而不是扩展数据段。

做标准`malloc`的工作如上：不。您提供的示例很简单，但效率很低。有许多不同的算法可用于内存管理：小块堆（当分配数据达到一定数量时具有`O(1)`性能）、特定于线程的分配器（减少从多个线程访问堆的拥塞）、分配器（预先分配大块和然后使用它们（类似于上面，但更有效）和其他。

您可以尝试使用“内存堆实现”获取更多信息

# windows - 更改程序的 z-index

> ID：15992391
> 
> 赞同：0
> 
> 时间：2013-04-13T20:10:44.493
> 
> 标签：windows, z-index

有什么办法让我 2 能够更改我下载的程序的 z-index，所以它总是在我屏幕上的任何内容之上？目前它被预先编程为在一切之上，但一旦我开始全屏游戏，它就不再是最重要的了。

Ps：它在 Windows 7（64 位）上运行，并在此处下载：[code.google.com/...](https://code.google.com/p/twitch-irc-chat-overlay-txt-output/) 我会尝试从代码中找出 2 但我似乎找不到它，我认为程序在code.google.com 是开源的，显然不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:16:39.493

不，“全屏”的重点是“全屏”。一旦游戏获得全屏控制，通常是通过 DirectX 或 OpenGL，它们就接管了“硬件输出上下文”，不允许在它们之上再有任何游戏。

许多游戏都可以在其视频选项中选择“窗口化”运行。这迫使游戏保持在常规桌面绘图（以性能为代价），因此允许与桌面窗口管理器中的其他窗口进行交互。

# django - 升级到 django 1.5 时，django social auth pre_update 信号没有被触发

> ID：15992393
> 
> 赞同：0
> 
> 时间：2013-04-13T20:10:55.917
> 
> 标签：django, django-socialauth, django-1.5

我有下面的代码，它在 django 1.4 中运行良好，因为我升级了代码中的所有内容，因为信号根本没有被触发，所以仍然可以接受。

以前，当我在 1.4 上时，我使用用户配置文件来维护用户信息，但升级时我使用自定义用户模型，其中包含一张表中的所有详细信息。我认为这无关紧要，因为当我测试社交身份验证时一切正常，请接受这部分。

```
def twitter_extra_values(sender, user, response, details, **kwargs):
    """
    accounts - twitter_extra_values - signal
    """
    try:
        TwitterExtra.objects.get_or_create(
            user        =   user,
            screen_name =   response.get('screen_name')
        )
    except IntegrityError:
        TwitterExtra.objects.get(
            user        =   user,
            screen_name =   response.get('screen_name')
        ).delete()
        # recursively attempt to recreate the record
        twitter_extra_values(sender, user, response, details, **kwargs)

    return True

pre_update.connect(twitter_extra_values, sender=TwitterBackend, dispatch_uid="accounts.twitter_extra_values") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:11:08.577

您可能也升级了 django-social-auth。

不推荐使用信号：http: [//django-social-auth.readthedocs.org/en/latest/deprecated.html](http://django-social-auth.readthedocs.org/en/latest/deprecated.html) 并且最近被删除。

这是使用管道步骤设置 facebook 头像的示例：http: [//tryolabs.com/Blog/2012/02/13/get-user-data-using-django-social-auth/](http://tryolabs.com/Blog/2012/02/13/get-user-data-using-django-social-auth/)

# objective-c - 使用来自不同来源的数据填充 UIViewController

> ID：15992410
> 
> 赞同：0
> 
> 时间：2013-04-13T20:13:22.977
> 
> 标签：objective-c, uiviewcontroller, instantiation

我里面有一个 UIViewController 和一个 UITableView 。我的应用程序模型中有看起来相同的视图，它们只是在单个标签中有不同的文本和 UITableView 的不同内容，所以我想使用相同的 ViewController 两次。

我的想法是设置一个属性 ( `next`)，它将指定我需要从哪里获取数据，然后像这样实例化这个视图：

```
MyViewController* next = [self.storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];
next.which = 1;
[self.navigationController pushViewController:next animated:true]; 
```

然后`MyViewController* next`根据`which`. 有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:42:30.967

这是一个合适的方法。您创建了 UIViewController 的子类，它捕获不同视图之间的共享行为，但允许自定义内容（基于`which`，如您所述）。然后根据需要实例化您的子类。

# java - Spring 模型属性/jsp 不可见

> ID：15992412
> 
> 赞同：0
> 
> 时间：2013-04-13T20:13:24.130
> 
> 标签：java, spring, jsp, jstl

学习spring+jsp。

我在控制器的方法中设置模型属性

```
@RequestMapping("/viewExpenses")
public String viewAllExpenses(Model model){

    List<Expense> expenses;
    expenses = expenseService.getAllExpenses();
    model.addAttribute(expenses);
    for(Expense e : expenses)
    System.out.println(e);
    return "viewExpenses";
} 
```

其中费用规模 > 1

```
Following is my jsp page:
<%@ taglib prefix="s" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="sf" uri="http://www.springframework.org/tags/form"%>  
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Home Page</title>
</head>
<body>
<h2>
    Hello ${user.firstName} <br> <a href="homepage">HOME</a>
</h2>
<div>All Expenses</div>
<span style=""></span>
<c:forEach var="expense" items="${expenses}">
    <c:out value="${expense.expenseId}"></c:out>
    <c:out value="${expense.expenseName}"></c:out>
    <c:out value="${expense.expenseType}"></c:out>
    <c:out value="${expense.expensePrice}"></c:out>
    <c:out value="${expense.purchaseDate}"></c:out>
    <c:out value="${expense.expenseComments}"></c:out>
</c:forEach>
</body>
</html> 
```

以下是我的 jsp 输出（无错误）：Hello Pravat HOME All Expenses

我想知道为什么我的jsp中没有填写费用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:18:02.620

你需要给你的属性一个属性名称：

```
model.addAttribute("expenses", expenses); 
```

*背景：* 当未提供名称时，Spring 使用生成的名称，该名称与变量名称不同。[文档](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/Conventions.html#getVariableName%28java.lang.Object%29)对此进行了解释：

> 根据提供的对象的具体类型确定其常规变量名称。使用的约定是返回**Class**的非大写短名称，根据 JavaBeans 属性命名规则：因此，com.myapp.Product 变为 product；com.myapp.MyProduct 变为 myProduct；com.myapp.UKProduct 变为 UKProduct。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:18:52.213

1.  给它一个名字

    ```
    model.addAttribute("expenses", expenses); 
    ```

2.  返回模型和视图。

3.  始终将 if/for/etc 的主体包含在 {} 中，即使它是单行的。

# java - JComponent 不会重绘

> ID：15992415
> 
> 赞同：1
> 
> 时间：2013-04-13T20:13:45.910
> 
> 标签：java, swing, user-interface, graphics, jtabbedpane

我有一个看起来像这样的 JTabbedPane：

```
overview= new JTabbedPane();

            JComponent accountinfo= AccountOverview(guest.toString());
            overview.addTab ("Account Overview", accountinfo);
            overview.setMnemonicAt(0, KeyEvent.VK_1);

            JComponent flightoption= FlightOptions();
            overview.addTab ("Book a Flight",flightoption);
            overview.setMnemonicAt(1, KeyEvent.VK_2);

            JFrame tabbed= new JFrame("AIR Reservation");
            tabbed.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            tabbed.add(overview);
            tabbed.setSize(650,500);
            tabbed.setLocationRelativeTo(null);
            tabbed.setVisible(true); 
```

我的 AccountOverview 方法如下所示：

```
protected JComponent AccountOverview (String text)
{
    panel = new JPanel(false);
    JLabel filler = new JLabel(text);

    JButton editName= new JButton ("Edit Name");
    editName.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                JFrame nameframe= new JFrame("Name Edit");
                name2 = JOptionPane.showInputDialog(nameframe, "Change name to: ");
                guest.setName(name2);   
            }
        });
    JButton editGender= new JButton ("Edit Gender");
    editGender.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                JFrame genderframe= new JFrame("Gender Edit");
                gen2 = JOptionPane.showInputDialog(genderframe, "Change gender to: ");
                guest.setGender(gen2);
            }
        });
    JButton editBirthday= new JButton ("Edit Birthday");
    editBirthday.addActionListener(new ActionListener() { 
            public void actionPerformed(ActionEvent evt) {
                JFrame birthdayframe= new JFrame("Birthdate Edit");
                birthday2 = JOptionPane.showInputDialog(birthdayframe, "Change birthdate to: ");
                guest.setBirthDate(birthday2);
            }
        });
    JButton editPassportNumber= new JButton ("Edit Passport Number");
    editPassportNumber.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) { 
                JFrame passportframe= new JFrame("Passport Number Edit");
                passnum2= Integer.parseInt(JOptionPane.showInputDialog(passportframe, "Change passport number to: "));
                guest.setPassportNumber(passnum2);
            }
        });

    panel.add(editName);
    panel.add(editGender);
    panel.add(editBirthday);
    panel.add(editPassportNumber);
    panel.add(destination);
    filler.setHorizontalAlignment(JLabel.CENTER);
    panel.add(filler);

    return panel;
} 
```

我希望显示在选项卡上的 JComponent 上的 JLabel 在单击“编辑名称”、“编辑性别”等时更新信息。我无法让 JPanel 重新绘制自己。编辑后的代码会是什么样子，因此显示的信息会更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:31:22.397

这真的很简单。我将使用第一个按钮进行演示。

```
final JLabel filler = new JLabel(text); 
```

变量必须声明为 final 才能在匿名 ActionListener 中使用。

```
JButton editName= new JButton ("Edit Name");
editName.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
            JFrame nameframe= new JFrame("Name Edit");
            name2 = JOptionPane.showInputDialog(nameframe, "Change name to: ");
            guest.setName(name2);
            filler.setText(guest.toString())
        }
    }); 
```

如果您在侦听器中调用 setText，则 JLabel 中的信息将自动更新。

# ios - 第一次运行的逻辑应该是什么，互联网可用？

> ID：15992430
> 
> 赞同：0
> 
> 时间：2013-04-13T20:14:54.113
> 
> 标签：ios, core-data

对于从 web 服务获取 web 的应用程序，我已经包含了一个 plist，如果它第一次运行，它会被解析为 CoreData，因为数据在 Docs 目录中不容易获得或者可能需要很长时间才能从 web 获取。当网络获取/同步成功时，我确实有 NSNotifications 信号。

目前在 AppDelegate applicationDidFinishLaunchingWithOptions 我调用：

```
[self checkIfFirstRun]; 
```

这是：

```
-(void)checkIfFirstRun{
    NSString *bundleVersion = [[NSBundle mainBundle] objectForInfoDictionaryKey:(NSString *)kCFBundleVersionKey];
    NSString *appFirstStartOfVersionKey = [NSString stringWithFormat:@"first_start_%@", bundleVersion];
    NSNumber *alreadyStartedOnVersion = [[NSUserDefaults standardUserDefaults] objectForKey:appFirstStartOfVersionKey];

    if(!alreadyStartedOnVersion || [alreadyStartedOnVersion boolValue] == NO) {
        // IF FIRST TIME -> Preload plist data
        UIAlertView *firstRun = [[UIAlertView alloc] initWithTitle:@"1st RUN USE LOCAL DB"
                                                                message:@"FIRST"
                                                               delegate:self
                                                      cancelButtonTitle:@"Cancel"
                                                      otherButtonTitles:@"Ok", nil];
        [firstRun show];
        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        [prefs setObject:[NSNumber numberWithBool:YES] forKey:appFirstStartOfVersionKey];
        [prefs synchronize];

        //Use plist
        [self parsePlistIntoCD];

    } else {
        UIAlertView *secondRun = [[UIAlertView alloc] initWithTitle:@"nTH RUN WEB FETCH"
                                                           message:@"nTH"
                                                          delegate:self
                                                 cancelButtonTitle:@"Cancel"
                                                 otherButtonTitles:@"Ok", nil];
        [secondRun show];

    }
} 
```

好吧，我将我的 plist 完美地解析到我的 CoreData 数据库中。

这是 parsePlistIntoCD：

```
-(void)parsePlistIntoCD{
    self.managedObjectContext = [[SDCoreDataController sharedInstance] backgroundManagedObjectContext];
    // 3: Now put the plistDictionary into CD...create get ManagedObjectContext
    NSManagedObjectContext *context = self.managedObjectContext;
    NSError *error;

    //Create Request & set Entity for request
    NSFetchRequest *holidayRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *topicEntityDescription = [NSEntityDescription entityForName:@"Holiday" inManagedObjectContext:context];
    [holidayRequest setEntity:topicEntityDescription];

    //Create new NSManagedObject
    //Holiday *holidayObjectToSeed = nil;
    Holiday *newHoliday = nil;
    //Execute fetch just to make sure?
    NSArray *holidayFetchedArray = [context executeFetchRequest:holidayRequest error:&error];
    if (error) NSLog(@"Error encountered in executing topic fetch request: %@", error);

    // No holidays in database so we proceed to populate the database
    if ([holidayFetchedArray count] == 0) {
        //Get path to plist file
        NSString *holidaysPath = [[NSBundle mainBundle] pathForResource:@"PreloadedFarsiman" ofType:@"plist"];
        //Put data into an array (with dictionaries in it)
        NSArray *holidayDataArray = [[NSArray alloc] initWithContentsOfFile:holidaysPath];
        NSLog(@"holidayDataArray is %@", holidayDataArray);
        //Get number of items in that array
        int numberOfTopics = [holidayDataArray count];
        //Loop thru array items...
        for (int i = 0; i<numberOfTopics; i++) {
            //get each dict at each node
            NSDictionary *holidayDataDictionary = [holidayDataArray objectAtIndex:i];
            //Insert new object
            newHoliday = [NSEntityDescription insertNewObjectForEntityForName:@"Holiday" inManagedObjectContext:context];
            //Parse all keys in each dict object
            [newHoliday setValuesForKeysWithDictionary:holidayDataDictionary];
            //Save and or log error
            [context save:&error];
            if (error) NSLog(@"Error encountered in saving topic entity, %d, %@, Hint: check that the structure of the pList matches Core Data: %@",i, newHoliday, error);
        };
    }
    [[SDSyncEngine sharedEngine] startSync];

} 
```

问题是，我还需要确保如果有可用的互联网，我的 CoreData 数据库会重新填充获取的网络数据。

但是如果我把电话留给 [self parsePlistIntoCD]; CoreData 中只有 plist 数据。第一次或第 n 次运行，我只得到 plist 数据。如果我注释掉那条线，我会得到我的网络获取数据。

为什么 web 获取的数据不替换 plist 解析的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:42:56.013

所以逻辑`parsePlistIntoCD`本质上是

*   如果存储中没有对象，则从 plist 加载它们
*   总是调用`startSync`on `[SDSyncEngine sharedEngine]`，它处理网络下载和同步。

在我看来，您的`startSync`遗嘱实际上已被援引。所以我会在那里寻找错误。您可以添加一条日志语句或设置断点，以验证该代码路径是否实际被遵循。

plist 解析和网络数据获取都可能需要一些时间。这表明您应该在后台执行这些操作，可能使用 GCD 队列。你事先不知道他们中的任何一个是否会成功。因此，在完成之前不要设置首选项。

旁注：您可以在首选项数据库中查询 BOOL，从而使您的代码更短，因此更易于阅读。

```
 BOOL alreadyStartedOnVersion = [[NSUserDefaults standardUserDefaults] boolForKey:appFirstStartOfVersionKey]; 
```

和

```
 [prefs setBool:YES forKey:appFirstStartOfVersionKey]; 
```

您也可以`numberWithBool:`简单地替换为`@(YES)`和`@(NO)`。

对于您的程序逻辑，我建议如下：

*   在`-applicationDidFinishLaunchingWithOptions:`中，检查是否已经加载了起始 plist 数据。忘记这是不是第一次运行。就看plist数据是否需要加载。也许叫那个`shouldLoadPlistData`。或者，也许您需要将其与您正在运行的版本绑定，在这种情况下，您将存储一个 string `latestPlistVersionLoaded`。
*   如果您还没有加载它，请将一个块排入队列以执行 plist 加载。在 plist 加载结束时，设置`shouldLoadPlistData`为`NO`，以注意不再需要加载 plist 数据。如果由于某种原因，plist 加载失败（可能是手机没电了，或者你的应用程序被用户或系统杀死了），那么在下一次启动时，你又回到了开始的地方。
*   还要检查您是否有网络访问权限。如果这样做，请将一个块排入队列以检索基于 Web 的数据，解析数据，然后在得出结论时更新首选项。

如果数据很大，您可能需要检查此工作：

*   我有完整的网络更新吗？那我就完了。否则...
*   下载完成了吗？是的，我有数据，让我们加载它。
*   如果没有，我开始下载了吗？

如果您的应用在下载过程中退出，这种分阶段的检查点还允许您向系统询问额外的时间。

`parseListIntoCD`我觉得有点臃肿。它所做的比它的名字所暗示的要多。也许您可以将其重构为检查 ( `shouldLoadPlist`)、执行导入 ( `importPlist:intoContext:`) 的方法和触发同步的方法。

我强烈建议您将工作`NSManagedObjectContext`作为参数传递，而不是使用一些分配 MOC 的全局对象（`[SDCoreDataController sharedInstance]`看起来确实如此。它为您提供了更多控制权，并允许您更轻松地编写单元测试。如果您还通过在 plist 的路径中，您现在拥有干净的代码，每次调用它时都应该以相同的方式运行。

您对该`NSError **`参数的使用始终不正确。NSError 的值在成功时未定义。您必须测试操作的结果，而不是错误的值，以确定您是否成功。成语总是

```
if (![someObject doTaskWithObject:foo error:&error]) {
    // handle the error
} 
```

看看也`countForFetchRequest:error`。它会为您提供与您当前通过执行获取和计数结果提取的信息相同的信息，但无需实例化 NSManagedObjects。

# javascript - Javascript - 根据输入显示“n”个文本框（由玉生成）。

> ID：15992431
> 
> 赞同：0
> 
> 时间：2013-04-13T20:14:54.413
> 
> 标签：javascript, jquery, pug

我现在有一个页面，上面有一组下拉列表（4），这些下拉列表用于从列表中选择数据并提交。它用于为锦标赛选择球队，所以目前我只能创建一个有 4 支球队的锦标赛。

我想更改它，以便页面仅显示一个下拉菜单`Enter a number of teams`，例如用户选择 4/8/16/32。根据用户选择的数字，页面应该生成这个数量的下拉菜单。

我很难做到这一点，无论用户选择什么数字，页面都需要呈现该数量的下拉菜单并相应地命名它们，即`#team1, #team2, #team3`.

任何想法如何做到这一点？

这是我目前使用 Jade 模板的下拉列表，如果使用 Jade 有任何混淆，请见谅，但很容易理解它是什么：

```
div.newMatch
  form.form-horizontal(action='/tournament', id="tournamentForm")
        div.row
      label.control-label(for="tournamentName") Tournament Name:
      div.controls
        input#tournamentName.input-mysize(type="text")
    div.row
      label.control-label(for="team1") Team 1:
      div.controls
        select#team1(style='width: 160px;')
            include teamsDropDown
    div.row
      label.control-label(for="team2") Team 2:
      div.controls
        select#team2(style='width: 160px;')
            include teamsDropDown
    div.row
      label.control-label(for="team3") Team 3:
      div.controls
        select#team3(style='width: 160px;')
            include teamsDropDown
    div.row
      label.control-label(for="team4") Team 4:
      div.controls
        select#team4(style='width: 160px;')
            include teamsDropDown 
```

我试过的：

```
 div.row
                    label.control-label(for="tournamentName") Tournament Name:
                    div.controls
                        input#tournamentName.input-mysize(type="text")
                div.row
                    label.control-label(for="nTeamSelector") Tournament Size:
                    div.controls
                        select#nTeamSelector(style='width: 160px;')
                            option Please select...
                            option 2
                            option 4
                            option 8
                            option 16
                            option 32
                div.row.hidden#rowTemplate
                    label.control-label(for="team") Team:
                    div.controls
                        select#team1(style='width: 160px;')
                            include teamsDropDown
                div.row#rowContainer
                script(type='text/javascript')
                    $("#nTeamSelector").change(function(){
                        var nTeams = $("#nTeamSelector").val(); // Get the value of the team selector that you use
                        $("#rowContainer").empty() // Delete all existing dropdowns
                        for (var i=0; i<nTeams; i++){
                            var newRow = $("#rowTemplate").clone(); // Exact copy of the element generated by Jade
                            /*
                                * here you should change all the little fields that 
                                * make the dropdowns different. For example:
                            */
                            newRow.children(".control-label").setText("Team "+(i+1)+":");
                            $("#rowContainer").append(newRow);
                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:05:56.090

我没有使用过 Jade，但如果您可以在页面中编写 javascript 并使用 jquery（如标签所述），您可以执行以下操作：

首先在您的页面中添加一个隐藏的 teamRow。您将克隆它。这可能看起来很老套，但它允许您使用您正在使用的特殊语法为模板中的每个团队选择器创建一个基本模型。

```
div.row.hidden#rowTemplate
  label.control-label(for="team") Team:
  div.controls
    select#team1(style='width: 160px;')
        include teamsDropDown 
```

Javascript：

```
$("#nTeamSelector").change(function(){

    var nTeams = //get the value of the team selector that you use

    $("#rowContainer").empty() //Delete all existing dropdowns

    for (var i=0; i<nTeams; i++){

        var newRow = $("#rowTemplate").clone(); //exatc copy of the element generated by Jade

        /*
         * here you should change all the little fields that 
         * make the dropdowns different. For example:
         */

        newRow.children(".control-label").setText("Team "+(i+1)+":");

        $("#rowContainer").append(newRow);

    }
}); 
```

我遗漏了诸如rowContainer之类的东西，它是一个简单的div，或者隐藏的类的css（但我认为这些与问题无关）。

我还没有做好 Jade 中的 for 所做的工作，它可能只会更改标签的一个属性，也许您应该更改输入的 id。但这只是另一对简单的 javascript 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:02:19.713

Jade 不仅是服务器端：您还可以编译 Jade 模板以在客户端运行。如果我运行：

```
$ jade --client template.jade 
```

我会得到一个`template.js`包含一些代码的文件，我可以在客户端使用（只要我包含[`runtime.js`](https://github.com/visionmedia/jade/blob/master/lib/runtime.js)）。生成的 JavaScript 文件将声明一个调用的函数`anonymous`，您可以将局部变量传递给模板以照常运行。

如果我有一个仅包含以下内容的模板文件：

```
div.row
  label.control-label(for=id) Team 1:
  div.controls
    select(id=id, style='width: 160px;')
        include teamsDropDown 
```

然后，假设它不使用变量，您几乎可以使用普通代码进行附加：

```
$(anonymous({id: "team" + (teamCounter++)})).appendTo("#tournamentForm"); 
```

（或类似的东西；我相信你能弄清楚）

顺便说一句，如果您使用的是 Node.js 和 Browserify 1，您可以使用它[`simple-jadeify`](https://npmjs.org/package/simple-jadeify)来简化编译。

# django - 创建配置文件时，django social auth 不返回 first_name 和 last_name - django 1.5

> ID：15992433
> 
> 赞同：0
> 
> 时间：2013-04-13T20:15:01.650
> 
> 标签：django, django-socialauth, django-1.5

我使用自定义用户模型来维护 django 1.5 的用户详细信息，下面是我的代码。使用社交身份验证时，一切似乎都工作正常，接受 first_name 和 last_name。

在我的表表结构中，我没有名字和姓氏，而是有一个字段全名。

但是，我确实在管理器中创建了一个方法来接受名字和姓氏并将它们组合起来。但是，仍然收到空值，关于为什么会发生这种情况的任何建议？

```
class UserManager(BaseUserManager):
    """
    UserManager()
    """
    def create_user(self, username, email=None, password=None, first_name='', last_name='', **extra_fields):
        if not username:
            raise ValueError('Users must have a username')

        user = self.model(
            username=username,
            email=UserManager.normalize_email(email),
            full_name='%s %s' % (first_name, last_name),
        )

        user.set_password(password)
        user.save(using=self._db)
        return user

class User(AbstractBaseUser, PermissionsMixin):
    """
    Accounts/User
    """

    GENDERS = (
        (u'M', _('Male')),
        (u'F', _('Female')),
    )

    username = models.CharField(_('username'), max_length=30, unique=True,
        help_text=_('Required. 30 characters or fewer. Letters, numbers and '
                    '@/./+/-/_ characters'),
        validators=[
            validators.RegexValidator(re.compile('^[\w.@+-]+$'), _('Enter a valid username.'), 'invalid')
        ])

    email           = models.EmailField(_('email address'), blank=True)

    is_staff = models.BooleanField(_('staff status'), default=False,
        help_text=_('Designates whether the user can log into this admin '
                    'site.'))
    is_active = models.BooleanField(_('active'), default=True,
        help_text=_('Designates whether this user should be treated as '
                    'active. Unselect this instead of deleting accounts.'))
    date_joined = models.DateTimeField(_('date joined'), default=timezone.now)

    # user details and information
    full_name           = models.CharField(_('full name'), max_length=30, )
    date_of_birth       = models.DateField(_('birthday'), null=True, blank=True)
    bio                 = models.TextField(_('biography / about you'), null=True, blank=True, help_text=_('Biography / About you'))
    gender              = models.CharField(_('gender'), max_length=1, blank=True, null=True, choices=GENDERS)

    # follows / followers
    followings           = models.ManyToManyField('self', through='Relationship', symmetrical=False, related_name='followers')

    objects             = UserManager()

    USERNAME_FIELD = 'username'
    REQUIRED_FIELDS = ['email', 'date_of_birth', 'full_name',] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:26:47.963

Django-social-auth 在创建用户时不会这样工作，而是在调用`create_user`您的经理时，它只是传递用户名和电子邮件，如您[在此处](https://github.com/omab/django-social-auth/blob/master/social_auth/backends/pipeline/user.py#L63)看到的那样。稍后在管道中，当[调用](https://github.com/omab/django-social-auth/blob/master/social_auth/backends/pipeline/user.py#L109)this 时，用户模型中的更多字段会更新，但正如代码所述，它会`getattr(user, name, None)`在您的情况下执行`first_name`and ，因为这些字段未在您的模型中定义，所以会`last_name`返回。`None`

您可以通过在模型中定义一些属性来欺骗系统，如下所示：

```
class User(...):
    @property
    def first_name(self):
        if not hasattr(self, '_first_name'):
            self._first_name = self.full_name.split(' ', 1)[0]
        return self._first_name

    @first_name.setter
    def first_name(self, value):
        self._first_name = value
        self.build_full_name()

    @property
    def last_name(self):
        if not hasattr(self, '_last_name'):
            self._last_name = self.full_name.split(' ', 1)[-1]
        return self._last_name

    @first_name.setter
    def last_name(self, value):
        self._last_name = value
        self.build_full_name()

    def build_full_name(self):
        self.full_name = ' '.join([self._first_name, self._last_name]) 
```

# r - R将rugarch输出放入数据框中

> ID：15992435
> 
> 赞同：0
> 
> 时间：2013-04-13T20:15:05.217
> 
> 标签：r

我已经更新到 R 的最新版本并更新了 rugarch 包。不幸的是，一些以前有效的代码不再有效。我现在得到一个错误。我会非常感谢一些帮助将输出转换为数据框。

```
library(rugarch)
data(sp500ret)
spec = ugarchspec(  )
fit1 = ugarchfit(spec =  spec, data = sp500ret)
df.fit1 <- as.data.frame(fit1,which="VaR")

Error in as.data.frame.default(fit1, which = "VaR"): 
cannot coerce class "structure("uGARCHfit", package = "rugarch")" to a 
data.frame 
attributes(fit1) 
```

显示：`$fit$sigma`

但是当我尝试时：

```
df1 <- data.frame(fit1$fit$sigma) 
```

我收到一条错误消息；

```
Error in fit1$fit : $ operator not defined for this S4 class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T23:35:23.393

1.  as.data.frame(fit1, which="VaR") 从未使用过 uGARCHfit 类的对象（您将其与 uGARCHroll 对象混淆了）。如果您想要条件 VaR，您现在可以（在新版本中）使用分位数方法，例如 quantile(fit1, c(0.01,0.05))。
2.  如果你想要条件标准差，那么你应该使用 sigma(fit1) 它将返回一个 xts 矩阵，或者 fit1@fit$sigma （@ 追随 S4 类中的一个对象）。这个问题和大多数其他问题都可以通过仔细阅读文档、小插图和包含更改详细信息的作者网站来回答。

# android - EditText 错误的奇怪位置？

> ID：15992440
> 
> 赞同：1
> 
> 时间：2013-04-13T20:15:49.153
> 
> 标签：android, android-edittext

我使用[EditText.setError(CharSequence)](https://developer.android.com/reference/android/widget/TextView.html#setError(java.lang.CharSequence))来验证我的对话框。它显示得当，但第一次调用 setError 时，它不能正常执行。但请你自己看看：

**错误的错误**
![错误的错误](https://i.stack.imgur.com/nQPfK.png)

**纠正错误**
![在此处输入图像描述](https://i.stack.imgur.com/htvhQ.png)

我在中间做的唯一一件事就是再次按下对话框中的按钮，这会再次导致 setError。

我将 HoloEverywhere 与 ActionBarSherlock 结合使用，但“普通”Android 小部件也会发生这种情况。

*我对这种奇怪*的行为一无所知，如果你有一个，请告诉我。

在此先感谢，直到

# php - PHP AES 256 加密奇怪的字符

> ID：15992443
> 
> 赞同：1
> 
> 时间：2013-04-13T20:15:53.153
> 
> 标签：php, mysql, encryption, aes, mcrypt

我有以下加密代码：

```
function encryptData($value){ 
   $key = "7685647tfyr65413285746352413sgfh"; 
   $text = $value; 
   $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB); 
   $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND); 
   $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $text, MCRYPT_MODE_ECB, $iv); 
   return $crypttext; 
}

echo 'Encrpt: ' . encryptData('This is just a test'); 
```

输出为：**Encrpt: yUB�F3�*ľ�G-�ۅd�8�f�_�X/O**

我将把它放到一个 mySQL 数据库中，但不确定它是否会接受那些奇怪的字符？

我这样做正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:19:27.737

是的，你做对了，但是输出是一个二进制值。为了省钱，最好通过以下方式将其编码为“常规”字符串

```
$encrypted_base64 = base64_encode($crypttext); 
```

只记得在解码之前做*相反的事情；*

```
$crypttext = base64_decode($encrypted_base64); 
```

# actionscript-3 - 直接加载 URL VS 加载 URLLoader

> ID：15992445
> 
> 赞同：0
> 
> 时间：2013-04-13T20:16:04.013
> 
> 标签：actionscript-3

我试图从我的服务器加载一个 php 文件，直接加载 PHP 的 URL 会给我即时结果，但是使用 as3 URLLoader 加载它大约需要 15 秒。我不知道为什么也不知道我做错了什么……有什么想法吗？

这就是我编码的方式

```
// Build the varSend variable
varSend = new URLRequest(prefix + "php/myphpPage.php"); varSend.method = URLRequestMethod.POST; 
varSend.data = variables;

varLoader = new URLLoader;
varLoader.dataFormat = URLLoaderDataFormat.TEXT;

varLoader.addEventListener(Event.COMPLETE, loadInitialInfo); 

varLoader.addEventListener(IOErrorEvent.IO_ERROR,onIOError);

var0 = var0; 
variables.sendRequest = "AAA";  

// Send the data to the php file
varLoader.load(varSend); 
```

多谢

# java - 在 Java 中使用 Scanner.useDelimeter() 隔离表达式中的标记

> ID：15992447
> 
> 赞同：3
> 
> 时间：2013-04-13T20:16:30.413
> 
> 标签：java, regex, delimiter

我试图从以下输入中分离出单词、括号和`=>`and ：`<=>`

```
(<=>A B) OR (C AND D) AND(A AND C) 
```

到目前为止，我只是分离出这些词（请参阅 参考资料`Scanner#useDelimeter()`）：

```
sc.useDelimeter("[^a-zA-Z]"); 
```

使用时：

```
sc.useDelimeter("[\\s+a-zA-Z]"); 
```

我得到的输出只是括号。

我不想要但想要`AND` `)`。

我怎么做？做`\\s+`同样的结果。

另外，分隔符与正则表达式有何不同？我熟悉 PHP 中的正则表达式。使用的符号是否相同？

**我想要的输出：**

```
(
<=>
A
(and so on) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:56:26.777

您需要一个宽度为零的 delimitimg 正则表达式（因为您有相邻的术语），因此环顾四周是唯一的选择。尝试这个：

```
sc.useDelimeter("((?<=[()>])\\s*)|(\\s*\\b\\s*)"); 
```

此正则表达式表示“在括号或大于或在单词边界之后，丢弃空格”

* * *

另请注意，字符类`[\\s+a-zA-Z]`包括`+`字符 - 大多数字符在字符类中失去任何特殊的正则表达式含义。似乎您试图说“一个或多个空格”，但这不是您这样做的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:24:01.243

里面`[]`的`^`意思是“不”，所以第一个正则表达式 ,`[^a-zA-Z]`说“给我所有**不是**az 或 AZ 的东西”

第二个正则表达式，**表示**`[\\s+a-zA-Z]`“给我所有空格、+、az 或 AZ”。请注意，“+”在字符类中是文字加号。

# iphone - 事件委托

> ID：15992448
> 
> 赞同：0
> 
> 时间：2013-04-13T20:16:36.763
> 
> 标签：iphone, ios, objective-c

我有两个`uiviewcontroller`：`MainViewController`和`SecondaryViewControlle`。在`MainViewController`我做：

```
[self.view addSubView:SecondaryViewControlle.view]; 
```

`SecondaryViewController`是通过按下要执行的功能的按钮`MainViewController`。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:49:32.350

您首先要在 SecondViewControlle.h 文件中定义一个协议，例如：

```
@protocol SecondViewControlleDelegate

- (void) doSomething

@end 
```

您还需要在`delegate`您的 SecondViewControlle .h 文件中添加一个 "" ivar。这将是代表线：

```
@interface SecondViewControlle : UIViewController

...
...
...

@property (nonatomic, assign) id delegate; // all you need to do is add this line inside your interface declarations

...
...
...
@end 
```

然后，当您从 MainViewController 创建/实例化您的 SecondaryViewControlle 时，请确保将 MainViewController 添加为委托，如下所示：

```
SecondaryViewControlle.delegate = self;
[self.view addSubView:SecondaryViewControlle.view]; 
```

现在`delegate`，您的 SecondaryViewControlle 视图控制器的“”指向您的 MainViewController。

当按下按钮时，您可以简单地执行以下操作：

```
- (IBAction) buttonIsPressed: (id) sender
{
    [delegate doSomething];
} 
```

现在，我需要在这里给你一些建议。

1） **不要**使用类名作为对象名。不要将对象命名为“ `SecondViewControlle`”，而是将其命名为不同的名称（并以小写字母开头，这是 Objective-C 约定），例如“ `moreDetailVC`”。

2）我已经告诉过你如何使用委托模式来做到这一点，但这可能不是你想要做的任何事情的最合适的方式。毕竟，MainViewController 对象（应该重命名`mainVC`以将对象与类区分开来）不在屏幕上或不可见，所以也许有更好的地方来放置功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:01:34.490

**选项 A**
更快，更容易，但缺乏可维护性，因为没有合同规定 SecondaryViewController 需要费心调用任何东西，而 self.parentViewController 可以是任何 UIViewController。

**选项 B**
委托模式；这是我的偏好，很明显正在发生什么，需要什么，并且有一个很好的可靠合同规定，如果你想初始化我，给我一个代表。

**选项 C**
如果 SecondaryViewController 必须通知多个对象，使用 NSNotificationCenter 会很快，但与选项 A 一样，没有合同，如果您需要通知许多对象，则需要记住监听这些对象的通知 -由于这不是问题，我不会详细说明，它只是在这里提供信息

**选项 A**
在 MainViewController.m 中，执行如下操作：

```
SecondaryViewController *viewcontroller = [[SecondaryViewController alloc] initWithNibName:@"SecondaryView" bundle:nil];
[self addChildViewController:viewcontroller];

//set viewcontroller.view frame

[self.view addSubview:viewcontroller.view];

[viewcontroller didMoveToParentViewController:self]; 
```

MainViewController.h 内部

```
-(void) performButtonClickAction; 
```

MainViewController.m 内部：

```
-(void) performButtonClickAction {
    //Do something constructive
} 
```

然后在 SecondaryViewController.m 中：

```
-(IBAction) buttonPressed:(id) sender {
    [self.parentViewController performButtonClickAction];
} 
```

 **SecondaryViewController.h 中的 **选项 B****

 **```
@protocol SecondaryViewControllerDelegate <NSObject>
-(void) eventAFromViewController:(UIViewController *) viewController;
-(void) eventBFromViewController:(UIViewController *) viewController;
@end

@interface SecondaryViewController : UIViewController {
    id<SecondaryViewControllerDelegate> delegate;
}

@property (assign, nonatomic)    id<SecondaryViewControllerDelegate> delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil delegate:(id<SecondaryViewControllerDelegate>) theDelegate;
@end 
```

在 SecondaryViewController.m @synthesize delegate = _delegate;

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil delegate:(id<SecondaryViewControllerDelegate>) theDelegate
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.delegate = theDelegate;
    }
    return self;
}

-(IBAction) buttonPressed:(id) sender {
    if( self.delegate != nil ) {
        [_delegate eventAFromViewController:self];
    }
    else {
        //No delegate
    }
} 
```**

# python - Python 对象属性搜索机制

> ID：15992454
> 
> 赞同：1
> 
> 时间：2013-04-13T20:16:59.000
> 
> 标签：python

根据[这篇文章](http://www.cafepy.com/article/python_attributes_and_methods/python_attributes_and_methods.html)

> 访问 objectname.attributename 时，依次搜索以下对象的属性：

1\. 对象本身（`objectname.__dict__`或任何 Python 提供的 objectname 属性）。

2\. 对象的类型（`objectname.__class__.__dict__`）。观察 only`__dict__`被搜索，这意味着只有用户提供的类的属性。换句话说`objectname.__bases__`，即使`objectname.__class__.__bases__`确实存在，也可能不会返回任何东西。

3\. 对象类的基础，它们的基础等等。（`__dict__`每个`objectname.__class__.__bases__`）。多个基础不会混淆 Python，目前不应该关注我们。需要注意的一点是搜索所有碱基，直到找到一个属性。

为了测试我创建了这个例子的理论

```
class Superb(object):
    svar=1

class Sub(Superb):
    ...

class Leaf(Sub):
    def __init__(self):
        print(Leaf.svar)

lobj=Leaf() 
```

实例创建工作并打印出 Leaf.svar 的值（如 1）。这意味着在解析 Leaf.svar 时，Python 查看*了 Leaf 对象的 base 的 base*，这在文章中没有提到。根据文章，搜索*对象类*（即类型）的基础。我怀疑文章作者是否犯了任何错误，这肯定是我理解上的差距。有人可以澄清一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:20:07.560

这篇文章掩盖了一些细节。当您有这样的问题时，是时候求助于权威来源了，在本例中是 The Python Language Reference，第[3.2 节。标准类型层次结构](http://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy)，其中包含一个说明类的条目（我的重点）：

> 一个类有一个由字典对象实现的命名空间。类属性引用被翻译成这个字典中的查找，例如，`C.x`被翻译成`C.__dict__["x"]`（尽管特别是对于新式类，有许多钩子允许其他定位属性的方法）。**如果在那里找不到属性名称，则在基类中继续进行属性搜索**。

这是描述类的属性查找，而不是类实例，我相信它解释了代码中发生的事情。

为了完整起见，下面是关于类实例的下一个条目，它说：

> 类实例具有作为字典实现的命名空间，这是搜索属性引用的第一个位置。如果在那里找不到属性，并且实例的类具有该名称的属性，则使用类属性继续搜索。

我将“搜索继续使用类属性”作为“重复为类给出的过程”的意思，即搜索基类。如果没有继承，那么它的用处就更少了！

您链接到的文章解释了类实例的属性查找，但没有说明类的属性查找。因为它没有，它给人的印象是它的工作方式相同，但事实并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:10:30.490

我不确定回答您自己的问题是否公平，但通过进一步阅读，我了解到当对象是“类”时，规则会略有修改。因此，在 class.attribute 的情况下，还会搜索类的基础（以及类的类，即类型）。

因此应在 class.attribute 中搜索

> 对象属性（即类定义）
> 
> 对象的基础（类名**。__*****基础*****__***等等）*
> 
>  *对象的类型（在类的情况下为“类型”）
> 
> 对象类的基础（即对象）*

# asp.net-mvc-3 - MVC 3 中的 ModelState 类是什么？

> ID：15992457
> 
> 赞同：13
> 
> 时间：2013-04-13T20:17:10.283
> 
> 标签：asp.net-mvc-3, modelstate

我正在学习 MVC，在 ASP.Net MVC 3 中，[ModelState](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstate%28v=vs.98%29.aspx)类是什么？我看过谷歌和 MSDN，但我似乎无法清楚地了解它的目的。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-13T20:28:42.753

查看该部分下的[http://www.gxclarke.org/2010/05/consumption-of-data-in-mvc2-views.html](http://www.gxclarke.org/2010/05/consumption-of-data-in-mvc2-views.html)`ViewData.ModelState`。

> ModelState 属性是一个字典对象，用于跟踪提交给服务器的 HTTP 值。除了存储每个字段的名称和值之外，它还跟踪相关的验证错误。尽管它的名字可能暗示其他情况，但 ModelState 不是模型感知的。它不明白什么是“产品”。它只包含名称如“ProductName”和“UnitPrice”的项目集合。其他对象（ModelBinders、ViewResult 和强类型视图）负责将 ModelState 值映射和解释为模型属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-28T12:05:37.230

MVC 中的`ModelState`Class 是一个包含集合的类，该集合具有在 Post 方法中提交给服务器的数据的键和值。当 MVC 遇到 post 时，它会获取 post 请求中的所有参数并将它们放在实例中一个`ModelStateDictionary`。只要`ModelState`在服务器中处于活动状态，模型的属性就会根据与它们关联的验证属性进行验证。如果任何属性无效，它将被添加到错误列表中。并且该属性`ModelState.IsValid`将设置为`false`. 您可以稍后在代码中使用它来检查一切是否正确。

请参阅[此](http://www.exceptionnotfound.net/asp-net-mvc-demystified-modelstate/)链接以获取更多信息。

# c# - WPF，非重叠窗口

> ID：15992458
> 
> 赞同：1
> 
> 时间：2013-04-13T20:17:21.427
> 
> 标签：c#, .net, wpf, windows, multi-window

重新发布这个问题：

我在 WPF 中有一个多窗口应用程序，其中我的主应用程序窗口是不可见的（Visibility=Collapsed），其中包含可见的子窗口。应用程序按需创建子窗口。我需要一种算法来确定新创建的子窗口的坐标和尺寸。显然，新的子窗口不应（完全）覆盖另一个子窗口。WPF 是否提供任何支持来实现这种逻辑？或者，我必须自己做所有事情。我想这将是很多工作。我正在寻找的行为与 Windows 7 中的粘滞便笺行为非常相似。

我的部分代码将帮助您真正理解我的意思：

```
public void ViewModelsCollectionChanged(object sender, 
                                        NotifyCollectionChangedEventArgs e)
{
    if (e.Action == NotifyCollectionChangedAction.Add)
    {
        foreach (ViewModel viewModel in e.NewItems)
        {
            View view = new View(viewModel);
            view.Owner = WPFApplication.App.Current.MainWindow;
            ...
        }
    }
} 
```

# php - 消息错误：警告：move_uploaded_file

> ID：15992459
> 
> 赞同：0
> 
> 时间：2013-04-13T20:17:39.933
> 
> 标签：php, file-upload

为什么我会收到此警告？

> 警告：move_uploaded_file(../documentos/games/banner.jpg)：无法打开流：第 11 行的 C:\xampp\htdocs\admin\gameimage.php 中没有这样的文件或目录
> 
> 警告：move_uploaded_file(): Unable to move 'C:\xampp\tmp\php5AD3.tmp' to '../documentos/games/banner.jpg' in C:\xampp\htdocs\admin\gameimage.php on line 11

**代码是：**

```
<?php if ((isset($_POST["enviado"])) && ($_POST["enviado"]=="form1")) { 
  $nome_arquivo = $_FILES['userfile']['name'];
  move_uploaded_file($_FILES['userfile']['tmp_name'], "../documentos/games/".$nome_arquivo);
?>

<script>
  opener.document.fomr1.strImage.value = "<?php echo $nome_arquivo;?>";
  self.close();
</script>

<?php 
  } else {
?>

<form action="gameimage.php" method="post" enctype="multipart/form-data" id="form1">
  <p>
    <input name="userfile" type="file" />
  </p>
  <p>
    <input type="submit" name="button" id="button" value="Upload Imagem" />
  </p>
  <input type="hidden" name="enviado" value="form1" />
</form>

<?php }?> 
```

# c++ - 在两个以上类的对象之间重载 operator=

> ID：15992461
> 
> 赞同：1
> 
> 时间：2013-04-13T20:17:48.100
> 
> 标签：c++, class, operator-overloading

我为我的应用程序定义了三个类：（`int2_`整数对）、`float2_`（浮点数对）和`double2_`（双精度数对），本质上是为了执行复杂的算术运算。

我想重载`=`上述三个类的对象之间的赋值运算符。动机是我正在编写一个 CUDA 代码，但似乎没有为 CUDA`int2`类`float2`和`double2`.

我目前的实现如下：

```
class int2_ {

    public:
        int x;
        int y;

        int2_() : x(), y() {}

        // Stuff
        const int2_& operator=(const float2_ a)     { int2_ b;  b.x = (int)a.x;             b.y = (int)a.y;     return b; }
        const int2_& operator=(const double2_ a)    { int2_ b;  b.x = (int)a.x;             b.y = (int)a.y;     return b; }
};

class float2_ {

    public:
        float x;
        float y;

        float2_() : x(), y() {}

        // Stuff
        const float2_& operator=(const double2_ a)  { float2_ b;    b.x = (float)a.x;       b.y = (float)a.y;   return b; }
};

class double2_ {

    public:
        double x;
        double y;

        double2_() : x(), y() {}

        // Stuff
}; 
```

一切都被总结为不提供编译错误的*东西。*剩余的运算符重载返回以下错误

```
error : identifier "float2_" is undefined
error : identifier "double2_" is undefined  
error : identifier "double2_" is undefined 
```

分别针对三种不同的重载。

似乎存在“可见性”问题，例如，`float2_`并且`double2_`在类定义之前尚未`int2_`定义。关于如何解决问题的任何建议？非常感谢您提前。

**遵循 James KANZE 和 ALEXRIDER 答案的解决方案**

这是解决方案：

```
class int2_;
class float2_;
class double2_;

class int2_ {

    public:
        int x;
        int y;

        int2_() : x(), y() {}

        inline const int2_& operator=(const int a)          { x = a;            y = 0.;         return *this; }
        inline const int2_& operator=(const float a)        { x = (int)a;       y = 0.;         return *this; }
        inline const int2_& operator=(const double a)       { x = (int)a;       y = 0.;         return *this; }
        inline const int2_& operator=(const int2_ a)        { x = a.x;          y = a.y;        return *this; }
        inline const int2_& operator=(const float2_ a);
        inline const int2_& operator=(const double2_ a);
};

class float2_ {

    public:
        float x;
        float y;

        float2_() : x(), y() {}

        inline const float2_& operator=(const int a)        { x = (float)a;     y = 0.;         return *this; }
        inline const float2_& operator=(const float a)      { x = a;            y = 0.;         return *this; }
        inline const float2_& operator=(const double a) { x = (float)a;     y = 0.;         return *this; }
        inline const float2_& operator=(const int2_ a)      { x = (float)a.x;   y = (float)a.y; return *this; }
        inline const float2_& operator=(const float2_ a)    { x = a.x;          y = a.y;        return *this; }
        inline const float2_& operator=(const double2_ a);
};

class double2_ {

    public:
        double x;
        double y;

        double2_() : x(), y() {}

        inline const double2_& operator=(const int a)       { x = (double)a;    y = 0.;         return *this; }
        inline const double2_& operator=(const float a) { x = (double)a;    y = 0.;         return *this; }
        inline const double2_& operator=(const double a)    { x = a;            y = 0.;         return *this; }
        inline const double2_& operator=(const int2_ a) { x = (double)a.x;  y = (double)a.y;return *this; }
        inline const double2_& operator=(const float2_ a)   { x = (double)a.x;  y = (double)a.y;return *this; }
        inline const double2_& operator=(const double2_ a)  { x = a.x;          y = a.y;        return *this; }

};

        inline const int2_& int2_::operator=(const float2_ a)       { x = (int)a.x;             y = (int)a.y;       return *this; }
        inline const int2_& int2_::operator=(const double2_ a)      { x = (int)a.x;             y = (int)a.y;       return *this; }
        inline const float2_& float2_::operator=(const double2_ a)  { x = (float)a.x;           y = (float)a.y;     return *this; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:24:41.230

首先，您需要使用类的前向声明：

```
class Int2;
class Float2;
class Double2; 
```

然后，在类中，您应该只声​​明函数，而不是实现它们。实现应该在所有类定义之后，或者在单独的源文件中，或者显式声明为内联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:28:05.260

您需要更改类声明的顺序，如下所示。
在这种情况下，前向声明无济于事，因为您需要声明类型以在 operator= 中使用

```
class double2_ {

    public:
        double x;
        double y;

        double2_() : x(), y() {}

        // Stuff
};

class float2_ {

    public:
        float x;
        float y;

        float2_() : x(), y() {}

        // Stuff
        const float2_& operator=(const double2_ a)  { float2_ b;    b.x = (float)a.x;       b.y = (float)a.y;   return b; }
};

class int2_ {

    public:
        int x;
        int y;

        int2_() : x(), y() {}

        // Stuff
        const int2_& operator=(const float2_ a)     { int2_ b;  b.x = (int)a.x;             b.y = (int)a.y;     return b; }
        const int2_& operator=(const double2_ a)    { int2_ b;  b.x = (int)a.x;             b.y = (int)a.y;     return b; }
}; 
```

operator= 本身也有问题，它应该返回 *this; 而不是 b 将在 operator= 完成后立即超出范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T20:25:10.653

问题是`float2_`它只在 之后定义`int2_`，它已经被使用了。添加这两个类的前向声明，你应该没问题：

```
class int2_;
class double2_; 
```

# windows - Windows 7 上没有 Hadoop 的猪

> ID：15992472
> 
> 赞同：2
> 
> 时间：2013-04-13T20:18:56.693
> 
> 标签：windows, hadoop, apache-pig

我试图在 Windows 7 机器上运行 PigUnit 测试，然后在 Ubuntu 集群上运行实际的 pig 脚本，我开始认为我对“ *withouthadoop* ”的理解是不正确的。

> **我是否需要安装*Hadoop*才能在 Windows 7 机器上本地运行 PigUnit 测试？**

我安装了：

1.  日食朱诺和蚂蚁
2.  赛格温

我设置：

1.  `JAVA_HOME=C:\Program Files\Java\jdk1.6.0_39`
2.  `PIG_HOME=C:\Users\john.doe\Java\eclipse\pig`
3.  `PIG_CLASSPATH=%PIG_HOME%\bin`

我使用 eclipse 的 Ant builder 创建`jar-all`了`pigunit-jar`：

1.  `pig.jar`
2.  `pig-withouthadoop.jar`
3.  `pigunit.jar`

仍然当我输入`pig -x local`cygwin 时，我得到：

```
$./pig -x local
cygpath: can't convert empty path
Exception in thread "main" java.io.IOException: Error opening job jar: /usr/lib/pig/pig-withouthadoop.jar
    at org.apache.hadoop.util.RunJar.main(RunJar.java:135)
Caused by: java.io.FileNotFoundException: \usr\lib\pig\pig-withouthadoop.jar (the systen cannot find the given path)
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:127)
    at java.util.jar.JarFile.<init>(JarFile.java:136)
    at java.util.jar.JarFile.<init>(JarFile.java:73)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:133) 
```

当我尝试使用选项“ *Run as JUnit* ”从 Eclipse 中的[http://pig.apache.org/docs/r0.10.0/test.html#pigunit](http://pig.apache.org/docs/r0.10.0/test.html#pigunit)运行测试时，我得到：

 *```
java.io.IOException
at org.apache.pig.pigunit.pig.PigServer.registerScript(PigServer.java:62)
at org.apache.pig.pigunit.PigTest.registerScript(PigTest.java:171)
at org.apache.pig.pigunit.PigTest.assertOutput(PigTest.java:267)
at org.apache.pig.pigunit.PigTest.assertOutput(PigTest.java:262)
at da.utils.pigunit.PigUnitExample.testTop2Queries(PigUnitExample.java:72)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我开始认为我错过了一些在 Windows 上运行 Pig 的关键基本信息，我还必须说我不是 Windows 7 和 cygwin 的经验丰富的用户，我来自 Unix 世界。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:55:31.643

不要与之抗争。通过 Web 平台安装程序在 Windows 上安装 Hadoop HDInsight 服务器：http: [//www.microsoft.com/web/downloads/platform.aspx](http://www.microsoft.com/web/downloads/platform.aspx)

它不需要很长时间或占用太多空间，整个 shebang 只是为您设置和运行。我无法让 Pig 脚本获取参数，也没有 HBase，但你会得到 HDFS、Pig、Hive。您甚至可以让整个本地集群运行，只要遵循：[http ://social.msdn.microsoft.com/Forums/en-US/hdinsight/thread/885efc22-fb67-4df8-8648-4ff38098dac6/](http://social.msdn.microsoft.com/Forums/en-US/hdinsight/thread/885efc22-fb67-4df8-8648-4ff38098dac6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-15T14:06:57.530

我已经在 cygwin 中安装了 pig 0.12（我运行 windows 7 64 位），但没有安装 hadoop。据我所知，我遵循的步骤是：

*   安装 Cygwin64（带 Perl 包）

*   下载pig-0.12.1.tar.gz，复制到home文件夹

*   解压到 cygwin 中的主文件夹：

    $ tar xzf pig-0.12.1.tar.gz

*   导出 JAVA_HOME：

    $ export JAVA_HOME=/cygdrive/c/Program\ Files/Java/jre6/

*   将猪添加到路径：

    $ 出口路径=~/pig-0.12.1/bin/:$PATH

*   将 pig-0.12.1.jar 重命名为 pig.jar：

    $ cp pig-0.12.1.jar pig.jar

*   导出 PIG_CLASSPATH：

    $ export PIG_CLASSPATH=~/pig-0.12.1/pig.jar

*   以本地模式运行 pig（启动 Grunt）：

    $ 猪 -x 本地

*   会有一个警告：“cygpath: cannot create short name of C:\cygwin64\home\xxx\pig-0.12.1\logs” 我们可以通过运行简单地删除它：

    $ mkdir 日志

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T16:04:40.780

和你一样，我目前正在尝试使用 cygwin 在 Windows PC 上安装正常运行的 Pig，以便在单个 JVM 上使用小型数据集学习 Pig Latin。你会想，这不是一个很大的要求，但疼痛几乎无法忍受。我来自 Windows 背景，而 UNIX 部分对我来说是陡峭的学习曲线。pig-withouthadoop jar 不包含 hadoop，所以你的机器上需要已经安装了 hadoop 才能使用它；pig.jar 包含 pig 自己的 hadoop 版本，如果您的计算机上尚未安装 hadoop，则可以使用它。这是我理解它的方式，它似乎是通过将每个 .jar 的内容列表转储到文本文件并在 Notepad++ 中查看结果来产生的。

当您在 cygwin 的美元提示符下键入 pig -x local 时，将调用并运行 bash 命令脚本“pig”。用 $cd bin $ cat pig 看看它（从你的 PIG_HOME）。最近几天我一直在用 vim (!) 完成它，并且在代码的最后是为 cygwin 用户提供的一个小分支，以便将环境变量（到目前为止一直是 Unix 格式）转换为当在脚本末尾调用“exec java ...”时，Windows 版本的 java.exe 将理解这种形式。如果没有这种转换，Windows java.exe 将无法理解其参数：

'#' cygwin 路径转换
if $cygwin; 然后 CLASSPATH= `cygpath -p -w "$CLASSPATH"` PIG_HOME= `cygpath -d "£PIG_HOME"` PIG_LOG_DIR= `cygpath -d "$PIG_LOG_DIR"` fi

Cygpath 是一个 cygwin 实用程序，可将 UNIX 样式的文件路径转换为 ​​Windows 样式的文件路径，反之亦然。我认为错误消息：“cygpath：无法转换空路径”必须来自这里。检查 CLASSPATH、PIG_HOME 和 PIG_LOG_DIR 是否为空，可能通过在脚本中放置您自己的 echo 命令。

在我的机器和安装上，这里产生了一个错误，但和你的不一样。我发现用 -m 替换 -w 和 -d，这使得 cygpath 使用 C:/Program Files/Java... 语法转换，有效。但随后出现了其他问题，我将留给我自己的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:41:20.810

根据this note [[1]](http://hadoop.apache.org/docs/r0.18.3/native_libraries.html#Supported+Platforms)，无法直接使用Cygwin在Windows 7上使用Hadoop本机库：

> Hadoop 本机库仅在 *nix 平台上受支持。不幸的是，众所周知，它不适用于 Cygwin [...]

我已将错误消息追溯到hadoop-config.sh 中`cygpath: can't convert empty path`的行，我按照[[2]](http://mail-archives.apache.org/mod_mbox/hadoop-hdfs-issues/201211.mbox/%3C1855415707.123825.1353073092310.JavaMail.jiratomcat@arcas%3E)`JAVA_LIBRARY_PATH=cygpath -w "$JAVA_LIBRARY_PATH"`的建议将其注释掉

```
Comment some translation in hadoop-config.sh.

#if $cygwin; then
  #HADOOP_PREFIX=`cygpath -w "$HADOOP_PREFIX"`
  #HADOOP_LOG_DIR=`cygpath -w "$HADOOP_LOG_DIR"`
  #JAVA_LIBRARY_PATH=`cygpath -w "$JAVA_LIBRARY_PATH"`
#fi 
```

现在我收到以下错误：

```
Error before Pig is launched -- ERROR 2999: Unexpected internal error.
java.lang.UnsupportedOperationException: Not implemented by the DistributedFileSystem FileSystem implementation 
```

所以我从中得出的结论是，即使在本地模式下，Pig 也需要 HDFS。HDFS 需要 Hadoop 原生库。并且已知本机库不适用于 Cygwin。因此：恕我直言，Pig 无法按原样使用 Cygwin 运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-27T04:46:44.523

在 Windows 7 上运行 PigUnit。**我没有安装 Cygwin。** 感谢 Konstantin Kudryavtsev 我使用他的 FixHadoopOnWindows.runFix() [http://simpletoad.blogspot.com/2013/05/pigunit-issue-on-windows.html](http://simpletoad.blogspot.com/2013/05/pigunit-issue-on-windows.html) 我在我的设置中调用 runFix，例如

```
private static PigTest test;

@BeforeClass
public static void setUp() throws IOException, ParseException {
    try {
        FixHadoopOnWindows.runFix();
        // TODO: load pig script properly
        test = new PigTest("src/pig/example.pig");           

        //test.override(...);
    }
    catch (Exception e) {
    }
} 
```

使用maven，需要以下依赖

```
 <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>1.2.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.pig</groupId>
            <artifactId>pig</artifactId>
            <version>0.15.0</version>
        </dependency>
        <dependency>
            <groupId>org.jboss.forge</groupId>
            <artifactId>forge-javassist</artifactId>
            <version>2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.pig</groupId>
            <artifactId>pigunit</artifactId>
            <version>0.15.0</version>
            <scope>test</scope>
        </dependency> 
```*

# c++ - 模板参数修饰符

> ID：15992474
> 
> 赞同：4
> 
> 时间：2013-04-13T20:19:08.803
> 
> 标签：c++, templates, parameters, modifier

我有一个与模板有关的问题。

```
template <typename A, typename B>
void someFunction (A* array, const B& numEl); 
```

我希望 numEl (-->numberOfElements) 是无符号的，但`const unsigned`不会编译。数组中的元素数永远不是负数，我将始终使用 long、int 或 short，所以对我来说制作 numEl 是有意义的`unsigned`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:39:48.453

如果您只希望用户使用无符号类型调用您的函数，则可以使用如下内容：

```
template<typename A, typename B, typename = typename std::enable_if<std::is_unsigned<B>::value>::type>
void someFunction(A * array, B numEl) {
    // do something
} 
```

另请注意，由于您正在处理 B 的整数类型，因此无需接受 numEl 作为 const 引用。

[ideone 上的 POC](http://ideone.com/cCNAqk)

# excel - 在组合框/列表框中启用鼠标滚轮滚动

> ID：15992475
> 
> 赞同：2
> 
> 时间：2013-04-13T20:19:24.500
> 
> 标签：excel, excel-2007, mousewheel, userform, vba

我正在使用 VBA 在 Excel 2007 中构建用户窗体，并且想知道如何启用组合框和列表框的鼠标滚轮滚动。

我是否需要更新版本的 Office 才能获得此功能，还是可以对其进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:37:03.407

如果使用 32 位 Windows，那么**PETER THORNTON**在下页使用 WIN32 API 调用的解决方案将有所帮助：

[MSDN 论坛 - 适用于应用程序的 Visual Basic：Excel 2010 中 UserForm ListBox 中的鼠标滚动](http://social.msdn.microsoft.com/Forums/en-US/isvvba/thread/7d584120-a929-4e7c-9ec2-9998ac639bea/)

该页面上的 OP 使用的是 Excel 2010，但由于它是 API 调用来完成这项工作，只要您使用的是 32 位 Windows，那么它也应该适用于您。

菲利普

# java - 即使在旋转过程中不可见，仍然可以看到 imageview

> ID：15992480
> 
> 赞同：0
> 
> 时间：2013-04-13T20:19:49.050
> 
> 标签：java, android, imageview, rotateanimation

我不明白为什么会这样。我将 imageview 设置为不可见。然后旋转它。但是我可以看到图像视图在屏幕上和屏幕上闪烁。为什么 setvisibility 不能立即起作用？

```
img = (ImageView) findViewById(R.id.mystuff);
            img.setVisibility(View.INVISIBLE);

            animation = new RotateAnimation(0, 0,
                    Animation.RELATIVE_TO_SELF, 0.5f,
                    Animation.RELATIVE_TO_SELF, 0.5f);

            animation.setDuration(0);
            img.startAnimation(animation); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:49:55.960

当您旋转设备时，会重新创建视图。因此再次调用 onCreate 并重新创建您的 img。也许那是你的问题。否则显示此代码所在的位置。

# facebook - 通过 Koala gem 从 Facebook 检索好友列表的问题

> ID：15992481
> 
> 赞同：0
> 
> 时间：2013-04-13T20:19:59.140
> 
> 标签：facebook, sinatra, koala

我正在处理一个由其他人启动的项目，该项目通过 Koala gem 与 Facebook 进行交互。出于某种奇怪的原因，它允许我创建朋友列表，但是当我检索它们时，我什么也得不到。我可以使用 Facebook 的 Graph API Explorer 工具验证我是否有通过 Graph API 可用的朋友列表，并且我在应用程序中确实拥有“manage_friendlists”权限。我还可以验证它是否通过此应用程序成功添加了朋友列表，并且尝试添加同名的朋友列表将返回错误（它应该）。但是，当它通过应用程序实际检索它们时，它只是返回哈希

```
{:me => {:id => 'my_id'}} 
```

没有别的。该方法写为

```
 def friendlists
    graph_api.get_objects('me', {fields: 'friendlists'})['me']['friendlists']['data']
  end 
```

这给出了一个“nilClass 的未定义方法 []”，因为没有“friendlists”嵌套哈希返回。如果这有什么不同，我正在使用 Koala 1.4.0。有什么想法或建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T10:52:46.627

我也在用考拉宝石……你可以按如下方式使用：

`session['fb_access_token']`是用户登录时的那个，我分配如下：

```
session['fb_access_token'] = auth['credentials']['token']

def self.fetching_facebook_friends 
    @graph = Koala::Facebook::API.new(session['fb_access_token'])
    profile = @graph.get_object("me")
    @profile_image = graph.get_picture("me")
    friends = @graph.get_connections("me", "friends?fields=id, name, picture.type(large)")
end 
```

# api - Restify 非常简单 JSONClient 返回空 json

> ID：15992482
> 
> 赞同：0
> 
> 时间：2013-04-13T20:19:59.753
> 
> 标签：api, node.js, rest, restify

我刚开始使用 restify 并尝试构建一个[非常简单的 JSONClient](http://mcavage.github.io/node-restify/#JsonClient)并在第一步失败。

```
var restify = require('restify');

var client = restify.createJsonClient({
    url: 'http://api.bgm.tv'
});
client.get('/calendar', function(err, req, res, obj) {
    console.log('%j', obj);
}); 
```

这段代码返回`{}`状态码 200

如果您在浏览器中检查[http://api.bgm.tv/calendar](http://api.bgm.tv/calendar)或 curl 它似乎是一个合法的 json GET Rest API，不需要身份验证或其他任何东西。

我尝试了其他 API，例如 stackoverflow api，它运行良好，所以我认为服务器端有问题？

如果有人可以尝试运行它并帮助我指出可能出了什么问题，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:12:03.970

我运行了您的示例节点代码并得到了正确的响应（与浏览时相同）。

您可能有一些版本问题或 console.log 大小限制。

尝试使用：`console.log(obj[0]);`它应该只打印 json 中的第一个对象。

我在 Mac 上使用节点 v0.8.9 和 restify v2.4.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:30:16.360

是的，当我使用[Chrome 的 Postman 插件](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)并发出 GET 请求时，`http://api.bgm.tv/calendar`我得到：

```
[
    {
        "weekday": {
            "en": "Mon",
            "cn": "星期一",
            "ja": "月耀日",
            "id": 1
        },
        "items": [
            {
                "id": 46458,
                "url": "http://bgm.tv/subject/46458",
                "type": 0,
                "name": "アイカツ! -アイドルカツドウ!-",
                "name_cn": "偶像活动",
                "summary": "",
                "eps": 0,
                "air_date": "2012-10-08",
                "air_weekday": 1,
                "images": {
                    "large": "http://lain.bgm.tv/pic/cover/l/db/7f/46458_8mM39.jpg",
                    "common": "http://lain.bgm.tv/pic/cover/c/db/7f/46458_8mM39.jpg",
                    "medium": "http://lain.bgm.tv/pic/cover/m/db/7f/46458_8mM39.jpg",
                    "small": "http://lain.bgm.tv/pic/cover/s/db/7f/46458_8mM39.jpg",
                    "grid": "http://lain.bgm.tv/pic/cover/g/db/7f/46458_8mM39.jpg"
                },
                "collection": {
                    "wish": 0,
                    "collect": 0,
                    "doing": 44,
                    "on_hold": 0,
                    "dropped": 0
                }
            },
            {
                "id": 57150,
                "url": "http://bgm.tv/subject/57150",
                "type": 0,
                "name": "LINE OFFLINE ～サラリーマン～",
                "name_cn": "离线LINE - 上班族 -",
                "summary": "",
                "eps": 0,
                "air_date": "2013-01-07",
                "air_weekday": 1,
                "images": {
                    "large": "http://lain.bgm.tv/pic/cover/l/71/28/57150_Kz171.jpg",
                    "common": "http://lain.bgm.tv/pic/cover/c/71/28/57150_Kz171.jpg",
                    "medium": "http://lain.bgm.tv/pic/cover/m/71/28/57150_Kz171.jpg",
                    "small": "http://lain.bgm.tv/pic/cover/s/71/28/57150_Kz171.jpg",
                    "grid": "http://lain.bgm.tv/pic/cover/g/71/28/57150_Kz171.jpg"
                },
                "collection": {
                    "wish": 0,
                    "collect": 0,
                    "doing": 206,
                    "on_hold": 0,
                    "dropped": 0
                }
            },
            {
                "id": 58709,
                "url": "http://bgm.tv/subject/58709",
                "type": 0,
                "name": "ハヤテのごとく! Cuties",
                "name_cn": "旋风管家 Cuties",
                "summary": "",
                "eps": 0,
                "air_date": "2013-04-08",
                "air_weekday": 1,
                "images": {
                    "large": "http://lain.bgm.tv/pic/cover/l/15/28/58709_H7uj8.jpg",
                    "common": "http://lain.bgm.tv/pic/cover/c/15/28/58709_H7uj8.jpg",
                    "medium": "http://lain.bgm.tv/pic/cover/m/15/28/58709_H7uj8.jpg",
                    "small": "http://lain.bgm.tv/pic/cover/s/15/28/58709_H7uj8.jpg",
                    "grid": "http://lain.bgm.tv/pic/cover/g/15/28/58709_H7uj8.jpg"
                },
                "collection": {
                    "wish": 0,
                    "collect": 0,
                    "doing": 219,
                    "on_hold": 0,
                    "dropped": 0
                }
            }, 
```

...还有更多，但 SO 答案的正文限制为 30,000 个字符。

# sharepoint - 来自 Oracle 的 PerformancePoint 数据源

> ID：15992487
> 
> 赞同：0
> 
> 时间：2013-04-13T20:20:18.037
> 
> 标签：sharepoint, business-intelligence, sharepoint-2013, performancepoint, kpi

我需要创建所有数据都来自 Oracle 的 KPI 和仪表板。我正在寻找将这些数据输入 PerformancePoint 以创建 KPI ..

谁能指出我如何将我的数据源设置为 Oracle 表的正确方向？如果这是不可能的，还有哪些其他选项可供我将数据传输到 SQL Server，然后让它显示 KPI...

是否可以使用业务目录？还是我必须使用一些网络服务？有人有如何解决这个要求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:24:45.940

我认为最好的方法是将 Oracle 数据拉入 PowerPivot 文件并在 PerformancePoint 中引用它。您可以通过 BCS 将数据拉入 SharePoint 列表或使用 SQL Server LinkedServer（但在 PPS 中只是表格），但使用 PowerPivot 或将其拉入可能是理想的并提供更多功能的 SSAS 模型。

# c++ - OpenCV findHomography 断言失败错误

> ID：15992488
> 
> 赞同：2
> 
> 时间：2013-04-13T20:20:19.607
> 
> 标签：c++, opencv, opencv-stitching

我正在尝试构建`brief_match_test.cpp`OpenCV 附带的示例程序，但是当我运行程序时，我不断从 cv::findHomography() 函数中收到此错误：

```
OpenCV Error: Assertion failed (mtype == type0 || (CV_MAT_CN(mtype) == CV_MAT_CN(type0) && ((1 << type0) & fixedDepthMask) != 0)) in create, file /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_graphics_opencv/opencv/work/OpenCV-2.4.3/modules/core/src/matrix.cpp, line 1421
libc++abi.dylib: terminate called throwing an exception
findHomography ... Abort trap: 6 
```

我正在像这样编译它：

```
g++ `pkg-config --cflags opencv` `pkg-config --libs opencv` brief_match_test.cpp -o brief_match_test 
```

我在程序中添加了一些东西来显示 FAST 算法找到的关键点，但没有触及处理单应性的部分。我将包含我修改后的示例，以防万一我搞砸了：

```
/*
 * matching_test.cpp
 *
 *  Created on: Oct 17, 2010
 *      Author: ethan
 */
#include "opencv2/core/core.hpp"
#include "opencv2/calib3d/calib3d.hpp"
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <vector>
#include <iostream>

using namespace cv;
using namespace std;

//Copy (x,y) location of descriptor matches found from KeyPoint data structures into Point2f vectors
static void matches2points(const vector<DMatch>& matches, const vector<KeyPoint>& kpts_train,
                    const vector<KeyPoint>& kpts_query, vector<Point2f>& pts_train, vector<Point2f>& pts_query)
{
  pts_train.clear();
  pts_query.clear();
  pts_train.reserve(matches.size());
  pts_query.reserve(matches.size());
  for (size_t i = 0; i < matches.size(); i++)
  {
    const DMatch& match = matches[i];
    pts_query.push_back(kpts_query[match.queryIdx].pt);
    pts_train.push_back(kpts_train[match.trainIdx].pt);
  }

}

static double match(const vector<KeyPoint>& /*kpts_train*/, const vector<KeyPoint>& /*kpts_query*/, DescriptorMatcher& matcher,
            const Mat& train, const Mat& query, vector<DMatch>& matches)
{

  double t = (double)getTickCount();
  matcher.match(query, train, matches); //Using features2d
  return ((double)getTickCount() - t) / getTickFrequency();
}

static void help()
{
       cout << "This program shows how to use BRIEF descriptor to match points in features2d" << endl <<
               "It takes in two images, finds keypoints and matches them displaying matches and final homography warped results" << endl <<
                "Usage: " << endl <<
                    "image1 image2 " << endl <<
                "Example: " << endl <<
                    "box.png box_in_scene.png " << endl;
}

const char* keys =
{
    "{1|  |box.png               |the first image}"
    "{2|  |box_in_scene.png|the second image}"
};

int main(int argc, const char ** argv)
{
    Mat outimg;
    help();
    CommandLineParser parser(argc, argv, keys);
    string im1_name = parser.get<string>("1");
    string im2_name = parser.get<string>("2");

    Mat im1 = imread(im1_name, CV_LOAD_IMAGE_GRAYSCALE);
    Mat im2 = imread(im2_name, CV_LOAD_IMAGE_GRAYSCALE);

    if (im1.empty() || im2.empty())
    {
      cout << "could not open one of the images..." << endl;
      cout << "the cmd parameters have next current value: " << endl;
      parser.printParams();
      return 1;
    }

    double t = (double)getTickCount();

    FastFeatureDetector detector(15);
    BriefDescriptorExtractor extractor(32); //this is really 32 x 8 matches since they are binary matches packed into bytes

    vector<KeyPoint> kpts_1, kpts_2;
    detector.detect(im1, kpts_1);
    detector.detect(im2, kpts_2);

    t = ((double)getTickCount() - t) / getTickFrequency();

    cout << "found " << kpts_1.size() << " keypoints in " << im1_name << endl << "fount " << kpts_2.size()
        << " keypoints in " << im2_name << endl << "took " << t << " seconds." << endl;

    drawKeypoints(im1, kpts_1, outimg, 200);
    imshow("Keypoints - Image1", outimg);
    drawKeypoints(im2, kpts_2, outimg, 200);
    imshow("Keypoints - Image2", outimg);

    Mat desc_1, desc_2;

    cout << "computing descriptors..." << endl;

    t = (double)getTickCount();

    extractor.compute(im1, kpts_1, desc_1);
    extractor.compute(im2, kpts_2, desc_2);

    t = ((double)getTickCount() - t) / getTickFrequency();

    cout << "done computing descriptors... took " << t << " seconds" << endl;

    //Do matching using features2d
    cout << "matching with BruteForceMatcher<Hamming>" << endl;
    BFMatcher matcher_popcount(NORM_HAMMING);
    vector<DMatch> matches_popcount;
    double pop_time = match(kpts_1, kpts_2, matcher_popcount, desc_1, desc_2, matches_popcount);
    cout << "done BruteForceMatcher<Hamming> matching. took " << pop_time << " seconds" << endl;

    vector<Point2f> mpts_1, mpts_2;
    cout << "matches2points ... ";
    matches2points(matches_popcount, kpts_1, kpts_2, mpts_1, mpts_2); //Extract a list of the (x,y) location of the matches
    cout << "done" << endl;

    vector<char> outlier_mask;
    cout << "findHomography ... ";
    Mat H = findHomography(mpts_2, mpts_1, RANSAC, 1, outlier_mask);
    cout << "done" << endl;

    cout << "drawMatches ... ";
    drawMatches(im2, kpts_2, im1, kpts_1, matches_popcount, outimg, Scalar::all(-1), Scalar::all(-1), outlier_mask);
    cout << "done" << endl;
    imshow("matches - popcount - outliers removed", outimg);

    Mat warped;
    Mat diff;
    warpPerspective(im2, warped, H, im1.size());
    imshow("warped", warped);
    absdiff(im1,warped,diff);
    imshow("diff", diff);
    waitKey();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:36:22.583

我不确定，所以我真的要回答这个问题，因为到目前为止还没有其他人知道，而且你问这个问题已经 10 个小时了。

我的第一个想法是你没有足够的点对。单应性至少需要 4 对，否则无法找到唯一解。您可能希望确保仅在匹配数至少为 4 时才调用 findHomography。

或者，[这里](https://stackoverflow.com/questions/13646855/opencv-findcontours-function-error)和[这里](https://stackoverflow.com/questions/15238862/opencv-convexity-defects)的问题是关于同一个失败的断言（尽管调用了与你不同的函数）。我猜 OpenCV 会进行某种形式的动态类型检查或模板化，因此应该在编译时发生的类型不匹配错误最终会以断言失败的形式出现运行时错误。说了这么多，也许你应该在传入 findHomography 之前将 mpts_1 和 mpts_2 转换为 cv::Mat。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T14:01:51.753

这是内部 OpenCV 类型问题。findHomography() 想要 vector < unsigned char > 作为最后一个参数。但是 drawMatches() 需要 vector < char > 作为最后一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T22:19:47.563

我认为在[这个页面](http://www.business-to-technology.com/brief/)上解释了很多关于brief_match_test.cpp 以及纠正它的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-27T03:12:23.493

你可以这样做：

`vector<char> outlier_mask;` `Mat outlier(outlier_mask);` `Mat H = findHomography(mpts_2, mpts_1, RANSAC, 1, outlier);`

# doctrine - 学说 1 关于数据过滤的奇怪行为

> ID：15992489
> 
> 赞同：2
> 
> 时间：2013-04-13T20:20:20.753
> 
> 标签：doctrine, symfony-1.4

当我尝试通过内部连接过滤查询时，我遇到了奇怪的 Doctrine 1 行为。

Doctrine 试图通过条件“其中 id 在（...ids 对应于我的其他条件...）”来重载我的内部连接过滤。看起来 Doctrine 执行我的查询，获取根 ID 并基于它添加这个奇怪的条件。

这给我带来了很大的问题，因为有时它会添加“其中 id 为 NULL”的条件，该条件会从结果中删除所有数据。

通过一些尝试，我意识到这种奇怪的 Doctrine 行为会触发一个过滤我的数据的内部连接。

有谁知道为什么 Doctrine 添加了这个条件，我能做些什么来避免它？

======更新======

我做了更多的研究，发现这个奇怪的 whereIn 条件是通过使用 limit() 触发的。

# php - PHPExcel输出数字错误

> ID：15992492
> 
> 赞同：0
> 
> 时间：2013-04-13T20:20:38.687
> 
> 标签：php, phpexcel

我有这个代码：

```
$query = "SELECT ciudadh,corporacionh,r1,proxima,ultima FROM usuariox"; 
$headings = array('#', 'Estas son sus fichas hasta la fecha','fecha de ingreso'); 
if ($result = mysql_query($query) or die(mysql_error())) { 
    // Create a new PHPExcel object 
    $objPHPExcel = new PHPExcel(); 
    $objPHPExcel->getActiveSheet()->setTitle('Asuntos Pendientes'); 

    $rowNumber = 2; 
     $rowNumber2 = 2; 
    $col = 'A'; 
    foreach($headings as $heading) { 
       $objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$heading); 
       $col++; 
         } 
    // Loop through the result set 
    $rowNumber = 3; 
    $newId = 1;
    while ($row = mysql_fetch_row($result)) { 
       $col = 'B'; 
        $objPHPExcel->getActiveSheet()->setCellValue("A$rowNumber", $newId++);
       foreach($row as $cell) { 
          $objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$cell); 
          $col++; 
       } 
       $rowNumber++; 
         $rowNumber2++; 
    } 

$styleArray = array(
       'borders' => array(
             'allborders' => array(
                    'style' => PHPExcel_Style_Border::BORDER_THIN,
                    'color' => array('argb' => 'FFB0c4dE'),
             ),

       ),
);

$styleArray2 = array(
             'fill' => array(
                    'type' => PHPExcel_Style_Fill::FILL_SOLID,
                    'color' => array('argb' => 'FFB0c4dE'),
             ),

);

$objPHPExcel->getActiveSheet()->getStyle('A2:F2')->applyFromArray($styleArray);
$objPHPExcel->getActiveSheet()->getStyle('A1:F1')->applyFromArray($styleArray2);
$objPHPExcel->getActiveSheet()->getSheetView()->setZoomScale(80);
$objDrawing = new PHPExcel_Worksheet_Drawing();
$objDrawing->setName('Logo');
$objDrawing->setDescription('Logo');
$objDrawing->setPath('./images/headerexcel2.png');
$objDrawing->setWorksheet($objPHPExcel->getActiveSheet());
$objDrawing->setCoordinates('A1');
$objDrawing->setOffsetX(30);

    // Freeze pane so that the heading line won't scroll 

$objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(5);
$objPHPExcel->getActiveSheet()->getColumnDimension('B')->setWidth(50);
$objPHPExcel->getActiveSheet()->getDefaultRowDimension()->setRowHeight(30);
$objPHPExcel->getActiveSheet()->getRowDimension('1')->setRowHeight(50);
$objPHPExcel->getActiveSheet()->getRowDimension('2')->setRowHeight(15);
$objPHPExcel->getActiveSheet()->getHeaderFooter()->setOddHeader('&C&16');
$objPHPExcel->getDefaultStyle()->getFont()->setName('Arial');
$objPHPExcel->getDefaultStyle()->getFont()->setSize(14); 
$objPHPExcel->getActiveSheet()->freezePane('A2'); 

    // Save as an Excel BIFF (xls) file 

   $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5'); 

   header('Content-Type: application/vnd.ms-excel'); 
   header('Content-Disposition: attachment;filename="asuntos-pendientes.xls"'); 
   header('Cache-Control: max-age=0'); 
    $objWriter->save('php://output'); 

   exit(); 

} 
echo 'a problem has occurred... no data retrieved from the database'; 
```

代码有效，但“r1”字段（mysql）有这样的数字：

**05001400300120110010000**

但是如果看一下excel文件而不是我得到的数字：

![在此处输入图像描述](https://i.stack.imgur.com/aJf8I.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:22:34.753

写入诸如`05001400300120110010000`using `setCellValueExplicit()`which 之类的值（默认情况下）将其视为字符串值，因此将值与前导零一起存储，并且（因为它远大于 Excel 或 PHP 整数值）它不会被强制转换为浮点数并以科学的形式展示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:22:15.823

如果单元格类型设置为常规，Excel 无法表示这么长的数字，这不是 PHPExcel 的问题。您必须将单元格类型设置为数字。你可以试试：

```
$PHPExcelObject->getActiveSheet()->getStyle($cell)->getNumberFormat()->setFormatCode('0'); 
```

# angularjs - AngularJS + Karma (Testacular) - 单元测试失败

> ID：15992494
> 
> 赞同：0
> 
> 时间：2013-04-13T20:20:47.287
> 
> 标签：angularjs, karma-runner

我正在尝试在 Karma 中为基于 AngularJS 的 Web 应用程序创建我的第一个单元测试。我使用 Jasmine 作为测试框架。

我的单元测试看起来像：

```
describe('FooBar', function() {

    describe('FBCtrl', function() {
        var scope, ctrl;

        beforeEach(function() {
            scope = {};
            ctrl = new FBCtrl(scope);
        });

        it('should have correct gender values', function() {
            expect(scope.values[0].values).toBe(["M", "F"]);
        });
    });
}); 
```

现在，当我运行测试时，我收到以下形式的错误：

```
Chrome 26.0 (Linux) FooBar FBCtrl should have correct gender values FAILED
Expected [ 'M', 'F' ] to be [ 'M', 'F' ].
Error: Expected [ 'M', 'F' ] to be [ 'M', 'F' ].
        at null.<anonymous> //followed by the js file given has input to Karma 
```

这种期望的 LHS 是在控制器范围内定义的变量。可以看出，该值已被拾取并且比较似乎也是正确的 - 但 Karma 将其报告为失败/错误。

知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:39:49.897

而不是使用匹配器`toBe`使用`toEqual`

Jasmine`toBe`在 Javascript 中使用 === 运算符。`toEqual`使用智能比较数组的自定义函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T21:15:33.640

那是因为在 javascript 表达式中`['val']===['val']`总是计算为假。因此，业力使用相同的东西来比较值，它也失败了。最简单的解决方案是像这样比较它们：

```
var values = scope.values[0].values;
expect(values.toString()).toBe(["M", "F"].toString()); 
```

或者你可以这样做：

```
var values = scope.values[0].values;
expect(values.length).toBe(2);
expect(values).toContain('M');
expect(values).toContain('F'); 
```

或者如果顺序也很重要：

```
var values = scope.values[0].values;
expect(values.length).toBe(2);
expect(values[0]).toBe('M');
expect(values[1]).toBe('F'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-23T01:25:19.013

您可能想在此处更改几件事。除非您有充分的理由，否则不应真正嵌套描述。您在 beforeEach 中错误地实例化了您的控制器（以角度考虑 DI）。此外，当您可能表示“toEqual”时，您使用的是“toBe”。试试这个代码：

```
 (function() {
 'use strict';

 describe('MainController', function(){
     var controller;
     var scope;

     beforeEach(module('MY_APP'));
     beforeEach(inject(function($controller) {
         scope = {};
         controller = $controller('MainController', {$scope: scope})
     }))

     it('should be defined.', function () {
         expect(controller).toBeDefined();
     });

     it('should have correct gender values.', function() {
         expect(scope.values[0].values).toEqual(["M", "F"]);
     })
}) 
```

# java - 为什么 php 页面在 LogCat 中没有显示相同的内容？

> ID：15992497
> 
> 赞同：1
> 
> 时间：2013-04-13T20:21:19.610
> 
> 标签：java, php, android, echo, logcat

我的 Logcat （正确地）向我显示了我想要返回的所有消息，但是当我要求代码在另一个 php 页面上显示相同的内容时，它完全不正常。

请注意，这是此代码，$from = "r" 和 $to = ""。

这是我的代码：

```
<?php

session_start();

/* connect to database */
$db = mysql_connect("localhost", "root", "root");

if (!$db)
    die('could not connect');

mysql_select_db('androidp2p')
    or die("could not select database");

/* variables */
$from = mysql_real_escape_string($_POST['from']); 
$to = mysql_real_escape_string($_POST['to']);
$message = mysql_real_escape_string($_POST['message']);

/* conditional code */
if (isset ($POST['to']))
{
    /* user wants to send a message */
    $query = "INSERT INTO messages (fromuser, touser, message) VALUES ('$from', '$to', '$message')";

    mysql_query($query)
        or die("\n\ndatabase error!\n". mysql_error());

    echo "ok. Messages have been saved.";
}
else //if (!isset ($POST['to']))
{
    /* user wants to retrieve his messages */
    $query = "SELECT * FROM messages WHERE touser='$from'";

    /* echo test 1 */
    echo $query;

    $result = mysql_query($query)
        or die("\n\ndatabase error!\n". mysql_error());

    $mailbox = array();

    while($row = mysql_fetch_assoc($result))
    {
    $mailbox[] = $row;
    }

    /* echo test 2 */
    echo "{ \"mailbox\":".json_encode($mailbox)." }";

    $name = "{ \"mailbox\":".json_encode($mailbox)." }";

    $_SESSION['myValue']=$name;
}

?> 
```

在第 2 页（test.php）：

```
<?php

session_start();

echo $_SESSION['myValue'];

?> 
```

以下是数据库中的条目：

![D b](https://i.stack.imgur.com/8f1Hk.png)

这是我的 logCat：

I/RESPONSE(4591): SELECT * FROM messages WHERE touser='r'

I/RESPONSE(4591): { "邮箱":[{"id":"117","fromuser":"qw","touser":"r","message":"zx","timestamp": “2013-04-13 01:30:59”}] }

现在上面我想让你看到 touser 是 r。这个条目（在数据库中）是我想要返回的，即字段“touser”包含值“r”的所有条目。

现在，这是我的 test.php 页面：

{ "邮箱":[{"id":"132","fromuser":"r","touser":"","message":"","timestamp":"2013-04-13 15:45 :03"},{"id":"123","fromuser":"r","touser":"","message":"","timestamp":"2013-04-13 13:41: 23"},{"id":"122","fromuser":"r","touser":"","message":"","timestamp":"2013-04-13 13:30:53 "},{"id":"133","fromuser":"","touser":"","message":"","timestamp":"2013-04-13 15:45:21"} ] }

**编辑：**

如您所见，它返回了所有空白（或 null）的 touser 条目。我对这种行为的解释是，当代码运行时，$from 变量实际上是“r”（这就是它正确保存在 logcat 中的原因），但是在代码执行之后，$from 中目前没有任何值，所以它只是输出 $from = null 的结果。

php应该这样做吗？我认为当时执行和回显的任何代码都会在页面上输出并留在那里，直到我重新运行代码。对于如何解决这个问题，有任何的建议吗？

**已编辑**

这一切的重点是使用我从[这里](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)得到的 JSONParser 代码，从数据库中获取特定的行，并将它们放入 android 的数据库中的特定字段中。我已经尝试修改我的 JSONParser 代码以像[这样](https://stackoverflow.com/questions/15917061/why-does-the-asynctask-not-execute-the-doinbackground-jsonobject)使用 BackgroundTask ，你可以看看[这个](https://stackoverflow.com/questions/15866915/how-to-output-string-to-another-php-page-for-jsonparser-request)。

这是该项目试图实现的目标：第一个用户可以将消息发布到服务器数据库，其中包含“来自”（将是用户 1 的手机号码）、“到”（将是目标或用户 2 的号码）和消息（这是他的位置）。第二个用户使用轮询服务定期从数据库中检索他的消息，即数据库中他的号码将在“to”字段中的所有条目，并将这些条目存储到他手机上的数据库中（并自动从服务器的数据库）。我认为，除了我从服务器的数据库中获取特定条目的部分之外，一切基本上都在工作。

我决定使用 JSONParsing，因为它可以获取一个数据库条目数组并从每个条目中生成一个字符串，从而更容易存储在我的 android 数据库中。但这是它缺乏的地方..找到一种方法来检索数据库的特定条目..我还没有找到一种方法来做到这一点。有什么帮助可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:15:48.050

会话被设计为对每个访问者都是唯一的，这是通过在 cookie 中记住会话来完成的。您的计算机将与您的 Android 进行不同的会话。事实上，您计算机上的每个浏览器都会有不同的会话，除非它们有共享 cookie 的方式。

此外，脚本请求（如 Android 代码）不会自动记住 cookie 并在请求之间发送，因此它们可能会为每个请求启动一个新会话，并丢失前一个会话的信息。

有很多解决方案...

1.  重组您的流程，以便您不需要以这种方式保留消息 - 只是从删除它们的脚本中返回消息？或者让第一个脚本返回消息并将消息 ID 传递给第二个脚本以删除。最后一点也可能“更安全”，因为在您知道应用程序已收到任何内容之前，您不会删除任何内容。

2.  找到一种方法来记住 cookie 并将它们与后续请求一起发送。 [如何在 Android 上使用 cookie 发出 http 请求？](https://stackoverflow.com/q/678630/1269513)可能对此有用。

3.  从 PHP 获取会话 ID 并将其与您的所有请求一起发送。[您可以使用session_id()](http://uk3.php.net/manual/en/function.session-id.php)在 PHP 中获取和设置会话 ID 。

最后两个对于 API 来说不是很好的实践，因为我们的目标是 API 是[无状态](http://blog.dhananjaynene.com/2009/04/what-is-statelessness-in-rest/ "什么是 REST 中的无状态？")的，但它们可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:41:04.473

是的，我看到了这个问题，很奇怪我以前没有遇到过这个问题，但看起来你可以在你的 SQL 语句中添加一些东西来纠正它......

```
SELECT * FROM messages WHERE touser='$from' AND WHERE touser IS NOT NULL 
```

我认为这将阻止显示空行。IS NOT NULL 应该是关键。

# mysql - 具有 5 个表连接的 MySQL 视图不返回任何行

> ID：15992498
> 
> 赞同：1
> 
> 时间：2013-04-13T20:21:19.993
> 
> 标签：mysql, views

这是我的视图创建..它没有返回任何行..

```
CREATE VIEW TOP AS
(
SELECT 
a.USER_ID, a.USER_NAME, a.PASSWORD, a.FIRST_NAME, a.LAST_NAME, a.CONTACT_NUMBER, a.EMERGENCY_NUMBER, a.CITIZEN_SHIP, a.VISA_TYPE, 
b.PLACE_CODE, b.PLACE_NAME, b.AIR_AVAILIBILITY, b.TRAIN_AVAILIBILITY, b.ROAD_AVAILIBILITY, 
c.CLIENT_ID, c.CLIENT_NAME, c.CLIENT_ADDRESS, c.CLIENT_LOCATION,
d.PROJECT_CODE, d.PROJECT_NAME,
e.REQUEST_ID, e.REQUEST_STATUS, e.REQUEST_FOR, e.REQUEST_MODE, e.REQUEST_TYPE, e.TRAVEL_FROM, e.TRAVEL_TO, e.TRAVEL_DATE, e.TRAVEL_TICKET_BY, e.ASSIGNMENT_PLACE, 
e.ASSIGNMENT_COUNTRY, e.TRAVEL_PURPOSE, e.ASSIGNMENT_DURATION, e.ASSIGNMENT_START_DATE, e.ASSIGNMENT_ACCOMODATION_BY, e.ACCOMODATION_BILLABLE, e.TRAVEL_BILLABLE, e.ASSIGNMENT_BILLABLE, e.NSHORE_PROJECT_BILLABLE
FROM USERS a, PLACES b, CLIENTS c, PROJECTS d, REQUESTS e
WHERE 
a.USER_ID = e.USER_ID
AND b.PLACE_CODE = e.TRAVEL_FROM
AND b.PLACE_CODE = e.TRAVEL_TO
AND c.CLIENT_ID = d.CLIENT_ID
AND d.PROJECT_CODE = e.PROJECT_CODE
); 
```

我认为问题出在这两行..

```
AND b.PLACE_CODE = e.TRAVEL_FROM
AND b.PLACE_CODE = e.TRAVEL_TO 
```

我试图不止一次地引用同一张表。对不起，如果我问的是一个非常基本的问题。我对数据库完全陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:27:54.863

看起来您正在尝试获取 place`TRAVEL_FROM`和 place的单独详细信息`TRAVEL_TO`。为此，您需要针对具有不同别名的同一个表连接两次。我将用首选`FROM`的显式 s 替换您的隐式（逗号分隔）连接：`INNER JOIN`

```
CREATE VIEW TOP AS
(
SELECT 
  a.USER_ID, a.USER_NAME, a.PASSWORD, a.FIRST_NAME, a.LAST_NAME, a.CONTACT_NUMBER, a.EMERGENCY_NUMBER, a.CITIZEN_SHIP, a.VISA_TYPE, 
  /* one set of columns for TRAVEL_FROM, each with its own alias */
  b_from.PLACE_CODE AS PLACE_CODE_from, b_from.PLACE_NAME AS PLACE_NAME_from, b_from.AIR_AVAILIBILITY AS AIR_AVAILABILITY_from, b_from.TRAIN_AVAILIBILITY AS TRAIN_AVAILABILITY_from, b_from.ROAD_AVAILIBILITY AS ROAD_AVAILABILITY_from, 
  /* and one set for TRAVEL_TO, each with its own alias*/
  b_to.PLACE_CODE AS PLACE_CODE_to, b_to.PLACE_NAME AS PLACE_NAME_to, b_to.AIR_AVAILIBILITY AS AIR_AVAILABILITY_to, b_to.TRAIN_AVAILIBILITY AS TRAIN_AVAILABILITY_to, b_to.ROAD_AVAILIBILITY AS ROAD_AVAILABILITY_to, 
  c.CLIENT_ID, c.CLIENT_NAME, c.CLIENT_ADDRESS, c.CLIENT_LOCATION,
  d.PROJECT_CODE, d.PROJECT_NAME,
  e.REQUEST_ID, e.REQUEST_STATUS, e.REQUEST_FOR, e.REQUEST_MODE, e.REQUEST_TYPE, e.TRAVEL_FROM, e.TRAVEL_TO, e.TRAVEL_DATE, e.TRAVEL_TICKET_BY, e.ASSIGNMENT_PLACE, 
  e.ASSIGNMENT_COUNTRY, e.TRAVEL_PURPOSE, e.ASSIGNMENT_DURATION, e.ASSIGNMENT_START_DATE, e.ASSIGNMENT_ACCOMODATION_BY, e.ACCOMODATION_BILLABLE, e.TRAVEL_BILLABLE, e.ASSIGNMENT_BILLABLE, e.NSHORE_PROJECT_BILLABLE
FROM 
  /* implicit joins replaced with preferred explicit joins */
  USERS a
  INNER JOIN  REQUESTS e ON a.USER_ID = e.USER_ID
  /* Join frist against PLACES for TRAVEL_FROM */
  INNER JOIN PLACES b_from ON b_from.PLACE_CODE = e.TRAVEL_FROM  
  /* And again against PLACES for TRAVEL_TO */
  INNER JOIN PLACES b_to ON b_to.PLACE_CODE = e.TRAVEL_TO
  INNER JOIN PROJECTS d ON d.PROJECT_CODE = e.PROJECT_CODE
  INNER JOIN CLIENTS c ON c.CLIENT_ID = d.CLIENT_ID
); 
```

# drag-and-drop - JavaFX 保持拖放项目始终在顶部

> ID：15992507
> 
> 赞同：0
> 
> 时间：2013-04-13T20:22:41.997
> 
> 标签：drag-and-drop, javafx

我有一个包含多个可拖动对象的窗格对象。这些对象从左到右和从上到下填充在窗格中，并且都是可拖动的。当拖动放置在其他项目之前的项目之一时，问题就出现了，它出现在这些项目之后填充的项目下方。我在下面包含了一个小屏幕截图。在这里，我试图拖动“公共”，但它出现在它之后填充的对象下方。

所以，我的问题是，如何让拖动的对象“始终位于”其他可拖动对象的顶部？

![拖放](https://i.stack.imgur.com/kvmFk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:56:47.210

只需使用 ImageView 的 toFront() 方法即可解决此问题。

# lisp - Racket 中的管道字符有什么作用？

> ID：15992508
> 
> 赞同：3
> 
> 时间：2013-04-13T20:22:44.473
> 
> 标签：lisp, scheme, racket

读者以`|`一种特殊的方式解释，但是我找不到任何关于它的文档。有谁知道这个符号对球拍意味着什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T20:30:40.757

请参阅球拍语法：

[http://docs.racket-lang.org/reference/reader.html](http://docs.racket-lang.org/reference/reader.html)

> | 开始一个字符的子序列，逐字包含在分隔序列中（即，它们永远不会被视为分隔符，并且在启用不区分大小写时它们不会大小写折叠）；子序列由另一个 | 终止，并且既不是初始也不是终止 | 是子序列的一部分。

例如 1.3.2 阅读符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T20:29:58.843

管道是多行注释语法的一部分：

```
#|
commented text
|# 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T20:29:07.477

见[球拍涂鸦语法](http://docs.racket-lang.org/scribble/reader.html)；很多`|`'在那里使用。它的使用取决于上下文。

# for-loop - 帕斯卡：必须从长度中减去 1 以获得正确的大小

> ID：15992510
> 
> 赞同：1
> 
> 时间：2013-04-13T20:22:56.613
> 
> 标签：for-loop, pascal

我有一段这样的代码：

```
for I := 0 to Self.EventQueue.Count do
    Dispose(Self.EventQueue[I]); 
```

当 Count 为 0 时它会出错，因为它会尝试`Dispose`不存在的元素。当我将其更改为

```
for I := 0 to Self.EventQueue.Count-1 do
    Dispose(Self.EventQueue[I]); 
```

一切正常。有什么优雅的方法可以解决这个问题，或者这是常见的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:28:06.040

我的天啊。那是因为在从 0 到 Self.EventQueue.Count 的循环中，您会遍历 Self.EventQueue.Count + 1 个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:28:47.587

这是绝对正常的行为，并且记录在 Delphi/FreePascal 中每个列表和容器类的帮助中。原因很清楚 - 如果列表中有三个项目，并且第一个项目位于 index `0`，那么你有项目`0, 1, 2`但 a `Count`of `3`，对吗？

```
for i := 0 to StringList.Count - 1 do  // TStringList

for i := 0 to List.Count - 1 do        // TList

for i := 0 to StringGrid1.ColCount do  // TStringGrid 
```

替代方案不是很清楚（对我来说打字更糟糕）：

```
for i := 0 to Pred(StringList.Count) do 
```

动态数组`0`也从索引开始。

```
var
  IntArray: array of Integer;
  i: Integer;
begin
  SetLength(IntArray, 10);
  for i := Low(IntArray) to High(IntArray) do  // loop is 0..9
    //
end; 
```

唯一不`0`基于 FPC/Delphi 的是字符串类型，以 开头`1`，以及非动态数组（在代码中以固定大小声明的数组），它们几乎可以从您想要的任何索引开始。例如，这是完全合法的：

```
var
  IntArray: array[-10..10] of Integer;
  i: Integer;
begin
  for i := Low(IntArray) to High(IntArray) do // loop is -10..10
    //
end; 
```

顺便说一句，每当您在循环中执行任何会减少列表中项目数量的操作时，您都应该向后迭代：

```
for i := List.Count - 1 downto 0 do 
```

否则，您将在列表末尾进行迭代，因为`Count`仅在循环开始时才评估 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T21:33:42.753

我更喜欢使用

```
for I := 1 to Self.EventQueue.Count do
  Dispose(Self.EventQueue[I-1]); 
```

这样很明显，如果计数为零并且索引的更正发生在重要的地方，则不会发生任何事情

# matlab - 从两个不同的文件访问 Matlab 中的相同串行端口对象

> ID：15992514
> 
> 赞同：0
> 
> 时间：2013-04-13T20:23:36.063
> 
> 标签：matlab, user-interface, serial-port

我有一个 GUI，它在加载时创建一个串行端口对象，并通过它发送一些数据。现在按下一个按钮，执行另一个数学脚本文件，根据某些条件，它将向同一个串行端口发送一些其他数据。现在因为我们不能两次初始化串口对象。我应该如何从被调用函数向串口发送数据？

我试图将串口对象作为参数发送给被调用的函数，但这不起作用

与视频对象类似的情况！！

加载后，GUI 创建一个视频对象以在 SCADA 屏幕上预览。现在调用的函数应该通过从相同的视频对象中抓取图像来进行图像处理。即使在这里，将对象作为参数发送也不起作用..!!

有什么解决办法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:02:00.210

将串行对象作为参数发送的语法有一个小错误。

对于视频对象..

我最初将其设置`triggerconfig`为 inf 以便视频在 GUI 上连续显示。但是当我将视频对象作为参数传递时，被调用的函数再次触发，这导致了错误。相反，我将其替换为`getsnapshot()`一切正常

# python - python没有正确执行shell命令“mail”

> ID：15992515
> 
> 赞同：1
> 
> 时间：2013-04-13T20:23:54.680
> 
> 标签：python, linux, bash, shell, email

我使用以下 bash 代码发送电子邮件：

```
echo abc | mail -s Subject abc@def.com 
```

它工作正常。现在我想在 python 中使用相同的命令，所以我写了以下内容：

```
call(["echo abc" "|" "mail", "-s Subject", "abc@def.com"], shell=True) 
```

此 python 代码不会向我发送电子邮件，并且当我使用调用 python 脚本时

```
$python email.py 
```

我从 shell 得到以下信息

```
No mail for rex 
```

这是怎么发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:28:33.373

`echo`如果您使用 Python，则无需在命令之间使用管道。
您可以启动一个进程并使用该`communicate`方法：

```
import subprocess

def send_message(recipient, subject, body):
    process = subprocess.Popen(['mail', '-s', subject, recipient],
                               stdin=subprocess.PIPE)
    process.communicate(body) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:52:48.113

按照其他地方的建议使用`subprocess.communicate`是一种更好的方法。[由于此处](http://docs.python.org/2/library/subprocess.html#frequently-used-arguments)`shell=True`描述的原因，您应该避免使用。但是要回答您的问题，为什么您的呼叫不起作用，问题是您已将 shell 字符串分解为相当任意的字符串。如果您将整个命令作为一个字符串传递，它至少*应该*在 Unix-y 平台上工作。

 *```
call(["echo abc|mail -s Subject abc@def.com"], shell=True) 
```

请参阅[此处](http://docs.python.org/2/library/subprocess.html#popen-constructor)的详细信息。但不推荐这种用法。*

# tridion - 如何从 brokerdb 中获取 componentPresentation？

> ID：15992517
> 
> 赞同：0
> 
> 时间：2013-04-13T20:24:01.567
> 
> 标签：tridion, tridion-content-delivery

我是 SDL Tridion 的新手，只是在探索内容交付。我在我的页面模板的 TBB 中使用了以下代码

```
<% ComponentPresentationFactory factory = new ComponentPresentationFactory("tcm:0-6-    1");
ComponentPresentation ps = factory.GetComponentPresentationFactory("tcm:6-9841","tcm:6-9858-32");
if(ps!=null )
{
 string output="";
   output=ps.Content;
   Literal1.Text=output;
 }
 %>
  <asp:Literal id="Literal1"Text="" runat="server"<</asp:Literal> 
```

我已经发布了该组件并使用了动态组件模板。但是页面上没有反映任何内容。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:09:11.150

尝试从 uri tcm:0-6-1 中删除空格，您的代码应为`factory.GetComponentPresentation("tcm:6-9841","tcm:6-9858-32");`

# java - 使用“员工类别”作为值的 hashmap

> ID：15992519
> 
> 赞同：-1
> 
> 时间：2013-04-13T20:24:26.790
> 
> 标签：java

我创建了一个`HashMap`键在哪里，`Integers`值是`Employee`类的。`Employee`包含员工的名字、姓氏和地址。我在打印值时遇到问题。这是我尝试过的。

```
employees.put(5, e1);

String test=employees.get(5).toString();
System.out.println(employees.toString());
System.out.println(test); 
```

输出：

```
{5=identitymanagement.Employee@6da264f1}
identitymanagement.Employee@6da264f1 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:28:55.933

**看看你的代码**

```
String test=employees.get(5).toString(); 
```

这将使用`5`哈希图中的键获取项目，然后调用该对象的`toString`方法。您的对象目前的行为方式意味着您没有覆盖该方法，这就是它打印出内存中的对象地址的原因。

```
System.out.println(employees.toString()); 
```

这将尝试打印出`HashMap`对象。与您的`Employee`类一样，HashMap 不会覆盖它的`toString`方法，因此它只是打印出内存中的对象引用。

**一个解法**

在输出类的详细信息时，约定是覆盖该`toString()`方法。这看起来像这样：

```
public String toString()
{
   return "name: " + name;
} 
```

当您将此方法放在您的类中时，您可以调用该`toString`方法，它不会只打印出对象的内存地址，这就是它目前正在做的事情:)

使用此代码时，您所要做的就是将对象传递给`System.out.println`方法，其余的工作将由它完成：

```
Employee e = employees.get(5);
System.out.println(e); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:29:02.697

正确的方法是

```
Employee e = employees.get(5); // return's Employee object stored in map with key 5

String firstName = e.firstName;
String lastName = e.lastName;
String address = e.address; 
```

# django - 将额外的 json 数据添加到 django 序列化的 json 数据

> ID：15992521
> 
> 赞同：2
> 
> 时间：2013-04-13T20:24:31.680
> 
> 标签：django, python-2.7, django-views

我已经对 django 模型进行了 json 化。例如

```
from django.core import serializers

foos = Foo.objects.all()

data1 = serializers.serialize('json', foos) 
```

我想向data1添加一些额外的json数据，例如

```
from django.utils import simplejson

some_data = {'some_var_1': 'foo'}

data2 = simplejson.dumps(data) 
```

我怎样才能结合data1和data2。序列化 foos 和 some_data 会给出“_meta”未找到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:55:51.040

我认为这会解决：（在 some_data = {'some_var_1': 'foo'} 行之后）

```
data3 = simplejson.loads(data1)
data3.append(some_data)
simplejson.dumps(data3) 
```

# c# - 如何使用 c# 或 msbuild 显示当前构建？

> ID：15992523
> 
> 赞同：2
> 
> 时间：2013-04-13T20:24:38.113
> 
> 标签：c#, asp.net-mvc, azure, msbuild, azure-devops

我创建了一个 asp.net mvc4 应用程序，并设置了持续集成和部署到 windows azure。

因为我已将其配置为在签入后构建，所以在构建正在使用的应用程序中的某处打印会非常有用。

我想如果存在 c# 和 msbuild api 应该有一种方法，这是当前的构建。

类似于：FullStackSampleApplication_20130413.2

任何指导将不胜感激。

我发现这一行：

**Update1：** ​​我将此添加到 AssemblyInfo.cs

```
[assembly: AssemblyVersion("1.0.*")]

string version = System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString(); 
```

此行正在打印 0.0.0.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:41:15.013

要在每个版本上生成新的版本号和修订版，请添加到您的 AssemblyInfo.cs

```
[assembly: AssemblyVersion("1.0.*")] 
```

生成的数字将基于构建时间。内部版本号将是自 2000 年以来的天数，修订版号将是自午夜/2 以来的秒数。

# android - Android：按最高值对 JSON 对象进行排序

> ID：15992526
> 
> 赞同：0
> 
> 时间：2013-04-13T20:24:52.680
> 
> 标签：android, arrays, json, list, sorting

我想按最高值对我的数组（从 JSON 解析）进行排序。我想做一个高分榜。

我的 JSON 文件：

```
[   
    {
    "naam": "Peter",
    "wedstrijden": "10",
    "doelpunten": "4"
    },
    {
    "naam": "Harry",
    "wedstrijden": "8",
    "doelpunten": "6"
    }    
] 
```

我必须将哪些代码按“doelpunten”对我的列表视图进行排序？或者这是不可能的？这是我到目前为止的代码：

TopscoreListAdapter.java：

```
public class TopscoreListAdapter extends ArrayAdapter<Topscore> {
Context context;
List<Topscore> posities;

public TopscoreListAdapter(Context context, List<Topscore> posities) {
    super(context,R.layout.layout_topscorelist, posities);
    this.context = context;
    this.posities = posities;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    TopscoreView  view = (TopscoreView) convertView;

    view = new TopscoreView(context);
    view.setTopscore(posities.get(position));

    return view;

} 
```

Topscore.java：

```
public class Topscore {

String name;
String wedstrijden;
String doelpunten;

public Topscore(String name, String wedstrijden, String doelpunten) {

    this.name = name;
    this.wedstrijden = wedstrijden;
    this.doelpunten = doelpunten;

}

public String GetName() {
    return name;
}

public String GetWedstrijden() {
    return wedstrijden;
}

public String GetDoelpunten() {
    return doelpunten;
}

} 
```

TopscoreFragment.java：

```
public class TopscoreFragment extends ListFragment {
private static final String url = "http://www...../spelers.json";

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View retView = inflater.inflate(R.layout.fragment_topscore, container,
            false);

    JsonTopscoreParser parser = new JsonTopscoreParser(url,
            new OnTopscoreCompleteListener() {

                @Override
                public void onComplete(ArrayList<Topscore> topscore) {
                    // TODO Auto-generated method stub
                    TopscoreListAdapter adapter = new TopscoreListAdapter(
                            getActivity(), topscore);
                    TopscoreFragment.this.setListAdapter(adapter);

                }

            });
    parser.execute();

    return retView;
}
} 
```

OnTopscoreCompleteListener.java：

```
public interface OnTopscoreCompleteListener {

void onComplete(ArrayList<Topscore> bedrijven);
} 
```

JsonTopscoreParser.java：

```
public class JsonTopscoreParser extends AsyncTask<Void, Void, ArrayList<Topscore>> {

private String url;
private ArrayList<Topscore> bosmtiTopscore;
private OnTopscoreCompleteListener listener;

public JsonTopscoreParser(String url, OnTopscoreCompleteListener listener) {
    this.listener = listener;
    this.url = url;
    bosmtiTopscore = new ArrayList<Topscore>();
}

public String readBosMtiFeed() {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(url);

    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
        } else {
            Log.e(JsonTopscoreParser.class.toString(), "Failed to download file");
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return builder.toString();
}

@Override
protected ArrayList<Topscore> doInBackground(Void... params) {
    // TODO Auto-generated method stub
    String readBosMtiFeed = readBosMtiFeed();
    try {
        JSONArray jsonArray = new JSONArray(readBosMtiFeed);
        Log.i(JsonTopscoreParser.class.getName(),
                "Number of entries " + jsonArray.length());

        Topscore topscore;

        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            String naam = jsonObject.getString("naam");
            String wedstrijden = jsonObject.getString("wedstrijden");
            String doelpunten = jsonObject.getString("doelpunten");

                topscore = new Topscore(naam, wedstrijden, doelpunten);
                if (!bosmtiTopscore.contains(topscore)) {
                    bosmtiTopscore.add(topscore);
                }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return bosmtiTopscore;
}

@Override
protected void onPostExecute(ArrayList<Topscore> topscore) {
    listener.onComplete(topscore);
    ListProvider provider = new ListProvider();
    provider.SetTopscore(topscore);
}

} 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:27:29.707

`Collections.sort()`在您的最高得分者列表中使用并实施您自己`Comparable`的对它们进行排序。

# ios - iOS Webkit 忽略媒体查询

> ID：15992533
> 
> 赞同：2
> 
> 时间：2013-04-13T20:25:35.493
> 
> 标签：ios, css, webkit, mobile-safari, media-queries

我正在使用移动优先开发方法开发一个网站（ [villa-antonia ）。](http://www.villa-antonia.com/nueva)也就是说，我首先为移动设备添加 CSS，然后使用媒体查询添加/覆盖样式以获得更高分辨率。问题是，在 iPhone 中，背景图像会加载到所有内容之上，尽管它位于媒体查询中以获得更高的分辨率。

这是CSS文件的一部分（我认为涉及的部分）：

```
body {
  background: #c70000;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

/* Minimum width of 960 pixels. */
@media only screen and (min-width: 960px) {

  body {
    background: transparent url('images/bg.jpg') no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
  }
} 
```

在我对 CSS 的理解中，iPhone 甚至不应该加载 bg.jpg 图像，因为它位于媒体查询中。但这是我向下滚动一点时得到的：

![从 iPhone 5 看到的别墅-安东尼娅](https://i.stack.imgur.com/PGj5r.png)

您看到的汽车是 bg.jpg 的一部分，我向下滚动的次数越多，它在屏幕上显示的 bg.jpg 就越多。

我真的不知道为什么要加载图像……有什么想法吗？

PS：iPad 和 iPhone 4（以及所有其他可以在 iOS 模拟器上测试的设备）中也会发生同样的情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-15T08:17:52.423

默认情况下，iOS 浏览器提供一组默认屏幕尺寸，而不管实际屏幕分辨率*或方向*。

为了让他们提供实际的屏幕尺寸，他们将遵守一个 Meta 标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

如果您将此添加到您的页面，那么您的 @media 命令应该适用于每个设备的实际屏幕值。

## 我发现这些链接很有用：

*   [https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)
*   [http://www.quirksmode.org/mobile/viewports2.html](http://www.quirksmode.org/mobile/viewports2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:13:27.307

好的。因为我认为解决方案很简单，与 CSS 媒体查询无关 >.<

很久以前我编写了网站的第一个原型，我不记得我是通过一个 JavaScript 语句加载 bg.jpg 图像，使用 anystretch 作为 backgroun-size:cover; 的后备。

谢谢大家的回答和时间。

# powershell - Get-Date.ToString('r') 返回不正确的时间（GMT 而不是本地时区）

> ID：15992534
> 
> 赞同：3
> 
> 时间：2013-04-13T20:25:39.703
> 
> 标签：powershell

PowerShell 未正确显示时间并且忽略了我的本地时区 - 当前是 00:20（格林威治标准时间 +2 时），但在获取时间时显示本地时间 (00:20) 但错误地打印格林威治标准时间。

检查运行脚本的服务器，并正确设置时区和本地时间。

我做错了什么还是这是一个错误？

```
$scriptStartDate = Get-Date
Write-Host "time is $($scriptStartDate.ToString('r'))"
# above line prints 'Sun, 14 Apr 2013 00:20:00 GMT'
# this is wrong as wrong timezone, it should be 'Sun, 14 Apr 2013 00:20:00 E.Europe' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T20:41:52.837

您可以确保时间为 UTC。你可以这样做：

```
[DateTime]::UtcNow.ToString('r') 
```

这种格式的[文档](http://msdn.microsoft.com/en-us/library/az4se3k1%28v=VS.71%29.aspx)说如下：

> 格式化不会修改 DateTime 的值；因此，您必须在格式化之前将该值调整为 GMT。

# c# - 将 MySql Tinyint(1) 数据类型检索到 .Net 应用程序中

> ID：15992537
> 
> 赞同：2
> 
> 时间：2013-04-13T20:26:14.667
> 
> 标签：c#, mysql, .net, database

我正在使用 MySQL Connector/Net v.6.6.5 将数据从远程 MySql 数据库中提取到我的 .Net 应用程序中。从 MySql 数据库中读取的列之一是 tinyint(1) 数据类型，其中包含 0-5 的值。问题是连接器将此列类型读取为 bool (true/false) 而不是 int。因此，所有大于 0 的值都作为 1 返回。这是个大问题。我没有更改数据库列的奢侈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:19:40.007

以下是我最终使用的解决方案。我原来的查询是：

```
SELECT tinyint_column FROM table_with_a_tinyint 
```

使用 MySql.data.dll 驱动程序返回 TRUE 或 FALSE，可以很容易地转换为 1 或 0。但是从 tinyint(1) 列读取的数据包含 0-5。我能够通过将查询编辑到下面来提取正确的值：

```
SELECT (tinyint_column+0) FROM table_with_a_tinyint 
```

这从 MySql tinyint 列中产生了正确的值 (0-5)。希望它可以帮助将来遇到相同情况的人。

# python - 以日期为键的python列表到字典

> ID：15992540
> 
> 赞同：-5
> 
> 时间：2013-04-13T20:26:55.283
> 
> 标签：python, list, dictionary

我试图从这个列表中创建一个字典，使用日期作为键，连续项作为它的值。

```
lst = ['Thu Apr 04', ' Weigh In', 'Sat Apr 06', ' Collect NIC', ' Finish PTI Video', 'Wed Apr 10', ' Serum uric acid test', 'Sat Apr 13', ' 1:00pm', 'Get flag from dhariwal', 'Sun Apr 14', ' Louis CK Oh My God', ' 4:00pm', 'UPS Guy']

dict = {}

for item in lst:
    if item.startswith(('Mon','Tue','____Wed','Thu','Fri','Sat','Sun'__))__:
        dict[item] = []
        saveItem = item
    else:
        dict[saveItem].append(item.____strip()) 
```

一直给我语法错误。

PS不是我的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:32:52.653

```
import itertools as IT

items = ['Thu Apr 04', ' Weigh In', 'Sat Apr 06', ' Collect NIC', ' Finish PTI Video', 'Wed Apr 10', ' Serum uric acid test', 'Sat Apr 13', ' 1:00pm', 'Get flag from dhariwal', 'Sun Apr 14', ' Louis CK Oh My God', ' 4:00pm', 'UPS Guy']

date_word = ('Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun')

def isdate(datestring):
    return any(datestring.startswith(d) for d in date_word)

items = (item.strip() for item in items)

data = (list(group) for key, group in IT.groupby(items, key=isdate))
for date, items in IT.izip(*[data]*2):
    print('{d} {i}'.format(d=date[0], i=items)) 
```

产量

```
Thu Apr 04 ['Weigh In']
Sat Apr 06 ['Collect NIC', 'Finish PTI Video']
Wed Apr 10 ['Serum uric acid test']
Sat Apr 13 ['1:00pm', 'Get flag from dhariwal']
Sun Apr 14 ['Louis CK Oh My God', '4:00pm', 'UPS Guy'] 
```

* * *

*   您可以使用[IT.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)根据需要对项目进行分组。

*   如果您不将项目转储到字典中，则可以保留项目出现的顺序。

*   您可以使用`zip(*[iterator]*2)` [grouper recipe](http://docs.python.org/2/library/itertools.html#itertools.izip)将项目成对分组。

*   避免使用变量名，`dict`因为它们会影响同名的 Python 内置对象。

# javascript - 使用字符串调用变量

> ID：15992547
> 
> 赞同：0
> 
> 时间：2013-04-13T20:27:43.223
> 
> 标签：javascript

我知道这似乎是不好的做法，但这是一个快速而肮脏的课程项目。

本质上，我想存储一个字符串并使用该字符串来调用一个数组。

例如，如果我的数据结构如下：

```
var test = {   top_level_01: 
                  {    second_level_01: [2, 3, 4],
                       second_level_02: [5, 6, 7]
                  },
               top_level_02:
                  {    second_level_03: ['a', 'b', 'c'],
                       second_level_04: ['d', 'e', 'f']
                  }
           } 
```

我希望字符串在'top_level_01'处初始化。但在某些时候，我可能想看看 second_level_01。所以我希望字符串是“top_level_01”+“second_level_01”。然后我想调用那个字符串并返回 [2, 3, 4] 的值。

这可能吗？再一次，我知道这是不好的做法，但这只是课堂项目的快速概念证明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:29:35.863

您可以使用括号表示法使用字符串访问您的对象，这样做甚至不是坏习惯：

```
var str1 = 'top_level_01',
    str2 = 'second_level_01';

var result = test[str1][str2]; // == [2, 3, 4] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:23:13.107

如果您想在更深层次上访问对象属性，就像您拥有的那样。您不能只将字符串用作“top_level_01”+“second_level_01”，因为结果将是“top_level_01second_level_01”，如果您没有每个级别的任何指定格式，则不会携带有关您所指对象的任何信息。我想解决这个问题的最简单方法是使用点符号。因此，在第一种情况下，您将拥有“top_level_01.second_level_01”，因此点将分隔各个级别。你可以使用任何你想要的字符而不是点，只要记住你不能在键名中使用它。

这段代码使用点符号。我添加了一个函数“test.at()”，它将你的字符串作为参数并返回你想要的对象的对象引用。

```
 var test = {

                top_level_01 : {
                    second_level_01: [2, 3, 4],
                    second_level_02: [5, 6, 7]
                },

                top_level_02 : {
                    second_level_03: ['a', 'b', 'c'],
                    second_level_04: ['d', 'e', 'f']
                },

                at : function( str ) {
                    if ( ~str.indexOf('.') ) {
                        var keys = str.split('.'),
                            ref = this[ keys[0] ];

                        for ( var i = 1; i < keys.length; i++ ) {
                            ref = ref[ keys[i] ];
                        }

                        return ref;

                    } else {
                        return this[ str ];
                    }

                }
            }

            var str = 'top_level_02.second_level_03'

            test.at( str ); // ['a', 'b', 'c'] 
```

# javascript - 浏览器如何真正读取 if/else 语句？

> ID：15992560
> 
> 赞同：0
> 
> 时间：2013-04-13T20:28:43.333
> 
> 标签：javascript, if-statement

这是一个非常简单的问题，但它可能对我们中的某些人非常有用。我一直在谷歌上寻找答案，但没有找到。我对浏览器如何读取 if/else 语句有疑问。简而言之，当条件为假时，浏览器是否只是忽略结果（即不读取它）还是浏览器先读取它然后它不执行代码？例如，当您有一个非常重的长循环代码时，差异是巨大的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:44:01.433

简而言之，它取决于用户代理，更具体地说，取决于它的 javascript 引擎。现代引擎非常聪明，可能会一起忽略它，特别是如果它可以推断出分支是死代码并且永远不会被执行。即，可以安全地忽略此代码：

```
if (false) {
  // Do a bunch of stuff
} 
```

但是，即使没有，您也很可能需要在您的分支中使用大量代码才能真正在解析延迟方面产生影响。几行代码不会产生足够的差异来保证任何速度问题。

然而，与往常一样，在性能方面，测量确实是唯一重要的事情。人们会说各种各样的关于什么更快的事情，但没有证据这是没有意义的，所以如果你不确定哪个更快：测量它！根据 javascript 引擎的不同，您可能会得到非常不同的结果，因此最好还是采用这条路线而不是询问 StackOverflow，即使这*是*一个非常聪明的社区。

查看[jsperf](http://jsperf.com/)以了解衡量不同用户代理之间差异的好方法。

# javascript - 如何从选择框中获取选定的值，并在 HTML 链接中使用它？

> ID：15992566
> 
> 赞同：1
> 
> 时间：2013-04-13T20:29:28.213
> 
> 标签：javascript, jquery, html, select

所以，我在 HTML 中有一个选择框。我想要做的是获取所选项目的值，并将其放入 HTML 链接中。到目前为止，这是我的代码：

```
<script>

$('#cds').change(function() {
var selectVal = $('#cds :selected').val();
});

</script> 
```

我试过这个`document.getElementById("demo").innerHTML = selectVal;`，它将所选项目输出到演示 div，所以我知道它可以工作，但是我如何能够将结果输出/回显到链接中（例如：）`<a href="output it here">mylink</a>`，或者这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:31:47.737

试试这个：

```
<script>

$('#cds').change(function() {
    var selectVal = $(this).val();
    $("a#linkToChange").attr("href", selectVal);
});

</script> 
```

或者

```
<script>

$('#cds').change(function() {
    $("a#linkToChange").attr("href", $(this).val(););
});

</script> 
```

如果要*创建*链接，请尝试以下操作：

```
<script>

$('#cds').change(function() {
    var selectVal = $(this).val();
    $("div#demoDiv").append("<a href='" + selectVal + "'>Result Link</a>");
});

</script> 
```

或者

```
<script>

$('#cds').change(function() {
    $("div#demoDiv").append("<a href='" + $(this).val() + "'>Result Link</a>");
});

</script> 
```

如果要操作现有链接，请尝试以下操作：

```
<script>

$('#cds').change(function() {
    var selectVal = $(this).val();
    var url = $("a#linkToChange").attr("href");
    url += "/" + selectVal + "/"; // you can replace the slashes with whatever you want to prepend/append to the selected value
    $("a#linkToChange").attr("href", url);
});

</script> 
```

**注意：**如评论中所述，将选择器中的`a`和保留`div`在 前面`#`，因为它们是多余的。我将它们包括在内只是为了让您可以看到它们是`<a>`和`<div>`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:33:14.990

的`select`值将始终与所选选项相同，因此您可以使用它并将其作为锚点 href 直接插入：

```
$('#cds').on('change', function() {
   $('#anchorID').attr('href', this.value);
}); 
```

# c# - C# 将 BINARY 转换为 TEXT 然后搜索

> ID：15992573
> 
> 赞同：-2
> 
> 时间：2013-04-13T20:30:00.143
> 
> 标签：c#

我想在二进制文件中搜索文本。

假设我想找一个词`SEQUENCE`。

我尝试过使用二进制阅读器，但没有运气。我无法从二进制文件中提取文本。

我当前的代码如下所示：

```
txtSource.Text = string.Empty;
DialogResult result = openFileDialog1.ShowDialog();

try
{
   if (result == DialogResult.OK)
   {
      txtFile.Text = openFileDialog1.FileName;

      string s;

      using (FileStream fs = new FileStream(txtFile.Text, FileMode.Open))
      using (BinaryReader br = new BinaryReader(fs))
      {
          byte[] bin = br.ReadBytes(Convert.ToInt32(fs.Length));
          txtSource.Text = Convert.ToBase64String(bin);
      } 
```

问候，

伊戈尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:53:55.737

尝试从二进制数据中读取字符串是一种会导致问题的方法（因为并非所有二进制数据都可以转换为有意义的文本形式）。最好弄清楚将使用什么二进制字节序列来表示文本，并在文件的二进制文件中搜索该二进制数据。

字符串可以以多种不同的形式存储。假设字符串是原始存储的（未压缩和未加密），那么您只需要知道使用的编码（例如，它们是 8 位 ASCII 字符还是 16 位 UNICODE 字符？）

如果您知道编码，则可以使用.net中[Encoding.GetBytes](http://msdn.microsoft.com/en-us/library/system.text.encoding.getbytes.aspx)的众多覆盖之一将 C# 字符串转换为二进制表示。例如，如果您要查找 ASCII 字符串“SEQUENCE”，则可以使用生成您要查找的字节序列

```
byte[] binary = System.Text.ASCIIEncoding.ASCII.GetBytes("SEQUENCE"); 
```

然后，您可以在文件中搜索此二进制文件。一个简单的蛮力方法是从文件中读取字节（即`Stream.ReadByte`）并将它们与这个“二进制”字节数组进行比较，看看是否可以找到匹配项。（有一些聪明的算法可以通过最小化需要读取和比较的字节数来更快、更有效地做到这一点，缓冲/缓存策略可以显着提高所涉及的 I/O 的性能，但我建议你得到在您担心性能改进之前有些工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:33:39.317

您可以使用**System.Text命名空间中的****ASCII.GetString()**函数从字节数组中读取字符串。

# c - pause() 是如何工作的？

> ID：15992574
> 
> 赞同：16
> 
> 时间：2013-04-13T20:30:02.240
> 
> 标签：c

我在c中完全是菜鸟。我必须编写一个`mypause()`应该具有类似于`pause()`系统调用的功能的函数，并`mypause()`在重复阻塞等待信号的程序中测试该函数。`pause()`te函数是如何工作的？我不能这样做`mypause()`：

```
fprintf( stderr, "press any key to continue\n" ); 
```

为了让程序阻塞并等待信号？

请记住，我永远无法使用`pause()`or `sigpause()`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-13T21:10:35.163

[`pause()`](http://www.gnu.org/software/libc/manual/html_node/Using-Pause.html)函数阻塞直到信号到达。用户输入不是信号。信号可以由另一个进程或系统本身发出。

`Ctrl-C`例如，按下会导致您的 shell 向`SIGINT`当前正在运行的进程发送信号，这在*正常*情况下会导致进程被终止。

为了模拟`pause`ISO C99 中的行为，您可以编写如下内容。代码已注释，如果您对此实现有疑问，请询问。

```
#include <unistd.h>
#include <stdio.h>
#include <signal.h>

/**
 * The type sig_atomic_t is used in C99 to guarantee
 * that a variable can be accessed/modified in an atomic way
 * in the case an interruption (reception of a signal for example) happens.
 */
static volatile sig_atomic_t done_waiting = 0;

static void     handler()
{
  printf("Signal caught\n");
  done_waiting = 1;
}

void    my_pause()
{
  /**
   *  In ISO C, the signal system call is used
   *  to call a specific handler when a specified
   *  signal is received by the current process.
   *  In POSIX.1, it is encouraged to use the sigaction APIs.
   **/
  signal(SIGINT, handler);
  done_waiting = 0;
  while ( !done_waiting )
    ;
}

int     main()
{
  my_pause();
  printf("Hey ! The first call to my_pause returned !\n");
  my_pause();
  printf("The second call to my_pause returned !\n");
  return (0);
} 
```

请注意，此示例仅适用于`SIGINT`信号。要处理一组额外的信号，您可以使用`signal()`具有不同信号编号的其他调用或使用[`sigaction()`](http://man7.org/linux/man-pages/man2/sigaction.2.html)引用所有所需信号的掩码。

您可以在您的附件中找到系统上可用信号的完整列表`<signal.h>`。

# c++ - 将对象准确地居中在屏幕的中心

> ID：15992577
> 
> 赞同：0
> 
> 时间：2013-04-13T20:30:10.667
> 
> 标签：c++, c, geometry

我试图将一个对象准确地放在屏幕的中心。屏幕为 320X480 和

对象是 25X25。我已经尝试构建的算法是这个伪函数代码：

```
void (int x, int y, int object ){

int position = (x-y)/2;

Update_X(object ,  position);

} 
```

但这只会使它在 X 轴上居中，我也希望 Y 轴居中。我如何能

去做？？有没有可以在 C 或 C++ 中使用的算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:33:27.833

基本的“居中方程”很简单：

```
center = (total_space - needed) / 2; 
```

这将剩余空间分成两半，这意味着它在左边和右边一样多，或者在上面和下面。它假设位置是相对于被居中对象的“最左边”（或 Y 的“上”）边缘。

举一个非常简单的例子，考虑将一个对象水平居中，`needed = 6`a`total_space`为 14：

```
(14 - 6) / 2 = 4 
```

因此，尝试图形显示：

```
 needed = 6
     /    \
|----XXXXXX----|   The 6 X:s are centered, 
|              |   with 4 dashes on either
 \            /    side. The total space
  \          /     between the |:s is 14.
   \        /
total_space = 14 
```

*这仅适用于一个维度，因此您必须计算两次：一次用于 X，一次用于 Y。从它们是维度*的事实来看，两者应该相互独立*应该*是显而易见的；这就是维度所做的！:)

 *因此，插入您的值，我们得到：

```
center_x = (320 - 25) / 2 = 147

center_y = (480 - 25) / 2 = 227 
```

我四舍五入；在任何一种情况下，它都不是整除的，因此您将不得不选择一种舍入方法。在 C 和 C++ 中，仅使用整数算术就会自动得到这个，因为除法将在整数上完成。*

# performance - 寻路：如何有效地检查路径是否可行？

> ID：15992580
> 
> 赞同：1
> 
> 时间：2013-04-13T20:30:16.077
> 
> 标签：performance, path-finding, dijkstra

我正在使用 Dijkstra 算法来求解理想路径。作为程序的一部分，该算法被调用了数千次。

超过一半的路径是不可能的，Dijkstra 需要很长时间才能解决这个问题（在一个小测试中，可能的路径总共需要 2 秒，而不可能的路径总共需要 25 秒。）

因此，我想知道是否有一种方法可以非常有效地检查是否有可能在浪费时间使用算法之前找到 2 个节点之间的路径。有没有非常有效的方法来做到这一点？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T01:13:18.343

**无限制，一次性使用**

在没有约束的图表上，程序以前从未见过（甚至以前的一部分），也不会再看到。您唯一能做的就是广度优先搜索或深度优先搜索。

如果内存是一个问题，您可以考虑使用增量深度优先搜索。

您可能会考虑在图表上启动多个线程以查看不同的分支。您需要进行协调，这样他们就不会通过拥有一个他们都可以安全地检查和写入的并发共享数据结构来重复工作。使用并发，您可以让一些线程从头到尾搜索，而另一些线​​程从头到尾搜索。

在带有循环的图上，您可能希望将节点标记为已访问，以免执行无限循环。

**约束，一次性使用**

想想你的图表和你的目标。

图是密集的还是稀疏的？

有负边权重吗？负和循环？

它遵循梯形规则吗？

是否有一个最大距离，您不在乎是否有路径？

图是非循环的吗？

图表“简单”吗？

通过一些工作，您可能能够找到一种比 dfs 更好的方法来处理您的图表。其他时候，您可能能够以不同的方式构建图表，从而使 dfs 更快。有时，优势可能来自不必在搜索期间存储尽可能多的数据。

**约束，多用途**

如果值得，您可以运行 Floyd-Warshall 来求解每对节点之间的最短路径。该算法需要一些时间，但是当您可以在关键部分中查找最短路径时，它可能会更有利。

您可以通过在图上执行初始 dfs 来预先求解连接的组件，而不是预先求解最短路径。

如果图表可以更改，但不会剧烈变化，您也许可以简单地修改预先计算的结果，而不是每次都从头开始。

**最后的想法**

图的大小和复杂性是重要的考虑因素。对于大型稀疏图或树，小型密集连接图的最佳算法将有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T23:06:45.613

您是否在同一个图表上运行多个路径查找？如果是这样，您将需要从图表中维护一组不相交的连续空间。这可以通过以下方式实时完成：

1.  从每个不成功的路径确定中维护连续空间，作为从起始节点开始的完整封闭集；
2.  构建一个数据结构，一旦计算就可以有效地搜索连续空间；和
3.  在每个路径确定之前确定起始节点和目标节点是否在相同的已知连续空间中、在两个不同的连续空间中或未知。

(2) 的精确最佳机制密切依赖于图表的性质，所以我把它留给另一个问题。

# streaming - jwplayer，当流媒体不可用时从播放列表播放

> ID：15992583
> 
> 赞同：1
> 
> 时间：2013-04-13T20:30:39.100
> 
> 标签：streaming, webcam, jwplayer, live-streaming

我正在使用 jwplayer 流式传输实时网络摄像头。当流媒体不可用时，我想从播放列表播放广告。这是我显示直播的代码。任何人都可以帮忙吗？

```
<script type='text/javascript'>
      jwplayer('mediaspace').setup({
    'flashplayer': 'player.swf',
    'type': 'rtmp',
    'streamer': 'rtmp://localhost/oflaDemo',
    'autostart': 'true',
    'bufferlength': '3',
    'file': 'aaa',
    'controlbar': 'bottom',
    'width': '320',
    'height': '260'
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:17:29.547

试试这个，它使用 JwPlayer 6

```
<script type='text/javascript'>
      jwplayer('mediaspace').setup({
    'flashplayer': 'player.swf',
    'autostart': 'true',
    'bufferlength': '3',
    'file': 'aaa',
    'controlbar': 'bottom',
    'width': '320',
    'height': '260',
    playlist: [{
sources: [{ 
//First video
   file: "rtmp://localhost/oflaDemo"
},{
//alternative video
file: "http://180.244.230.232:5080/live/streams/test.m3u8"
        }]
    }],
  });
</script> 
```

# inheritance - ExpressJS 中的继承与 Sequelize

> ID：15992585
> 
> 赞同：0
> 
> 时间：2013-04-13T20:30:46.733
> 
> 标签：inheritance, express, sequelize.js

我尝试将 Sequelize 用于我的 Express 网站。它可以工作，但在我的项目中，我有两个表，“Creations”和“Posts”，我有两个路由，“admin.js”和“index.js”。

在每条路线中，我都有以下代码：

```
var Sequelize = require("sequelize");

var db = new Sequelize('express', 'root', 'root', {
    host: '127.0.0.1',
    port: '3306'
});

var Post = db.define('Posts', {
    slug: Sequelize.STRING,
    title: Sequelize.STRING,
    thumbnail: Sequelize.STRING,
    content: Sequelize.TEXT,
    click: Sequelize.INTEGER,
    tags: Sequelize.TEXT,
    state: Sequelize.INTEGER
});

var Creation = db.define('Creations', {
    slug: Sequelize.STRING,
    screenshot: Sequelize.STRING,
    title: Sequelize.STRING,
    subtitle: Sequelize.STRING,
    url: {type: Sequelize.STRING, validate: {isUrl: true}},
    content: Sequelize.TEXT,
    role: Sequelize.TEXT,
    webdesigner: {type: Sequelize.STRING, allowNull: true},
    developper: {type: Sequelize.STRING, allowNull: true},
    integrator: {type: Sequelize.STRING, allowNull: true},
    designer: {type: Sequelize.STRING, allowNull: true},
    state: Sequelize.INTEGER
});

Post.sync();
Creation.sync(); 
```

所以，我生成了两次表格。在“index.js”和“admin.js”中，我想知道我可以把上面的代码放在哪里，以便一次性使用脚本。我想在“index.js”和“admin.js”中获取变量“Post”和“Creation”。

也许这是最好的方法，我需要创建一个“mysql”路由并将其导入“index”和“admin”中的路由？

安东尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T05:39:18.927

您可以查看有关 Heroku 入门的文章，其中我还解释了快速应用程序的用法：[http ://sequelizejs.com/heroku#heroku-sequelize](http://sequelizejs.com/heroku#heroku-sequelize)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:04:15.167

尝试将您的模型放在单独的文件中，然后在包含所有路由的单个 server.js 文件的顶部放置一次。更多信息：[Nodejs 和 Sequelizejs，每个模型使用单独的文件](https://stackoverflow.com/questions/14889055/nodejs-with-sequelizejs-using-separate-files-per-model/14893745#14893745)

# programming-languages - 是否有一种语言使用计算机代数系统来实现附加功能和优化？

> ID：15992588
> 
> 赞同：1
> 
> 时间：2013-04-13T20:31:14.470
> 
> 标签：programming-languages, mathematical-optimization, computer-algebra-systems

例如，想象一个这样的函数：

```
int solveSomeEquation(int y)
{
    y = (int x) * 2;
    return x;
} 
```

使用符号代数，编译器将确定 x = y / 2。更好的是，它会抱怨 int 不足以存储 y / 2 的结果。想象一下这个功能扩展到求解具有约束和/或边界条件的 ODE，并在需要时使用符号或数字方法（在运行时）进行集成。我，一方面，很想看到这样的事情：

```
int areaOfUnitSemiCircle()
{
    auto semiCircleFunc = [](double x){ return abs((1 - x^2)^0.5); };
    semiCircleFunc = (auto semiCircleIntegralFunc)'; // single quote means derivative
    return semiCircleIntegralFunc(1) - semiCircleIntegralFunc(-1);
} 
```

简化为：

```
int areaOfUnitSemiCircle()
{
    return Pi/2;
} 
```

此外，它不仅可以在函数内部局部简化表达式，还可以执行整个程序优化。它可以重新排列表达式以提高数值稳定性（减少浮点误差的影响），甚至可以通过使用不同的表示来完全消除它们。BigInt，IEEE1394 的四精度浮点数，由谓词定义的集合，分段函数的积分。可能负载可以做更多。

这样的事情是可能的，不是吗？我知道您可以使用 Mathematica 或 MatLab 的编程语言函数执行类似的操作，但它们被源代码调用。我希望它被编译器应用于源代码。（这些语言有这种东西吗？我不知道。）当我有借口时，我喜欢在工作中使用 Mathematica，但后来我在 C++ 中得到了看起来很神奇的函数，如果不引用外部函数就毫无意义数学笔记本。我希望能够成为使用一种语言、一种环境的数学家和程序员。这样的事情存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T06:02:34.957

好吧，Maxima [1] 肯定能够构造和操作表达式，并从中生成函数。函数也只是表达式，因此可以直接获取一些表达式，对其进行操作，构造一个函数，然后调用该函数，并使用变量而不是特定值来完成所有这些事情。例如，这是您的圆形区域功能：

```
(%i1) display2d : false $
(%i2) a(r) := ''(4 * integrate (sqrt (r^2 - x^2), x, 0, r));
Is r positive, negative or zero?
p;
(%o2) a(r):=%pi*r^2
(%i3) a(10);
(%o3) 100*%pi
(%i4) a(h);
(%o4) %pi*h^2 
```

编程语言能够自行工作的总体思想起源于 Lisp，它仍然是此类练习的好语言。Maxima 是在 Lisp 中实现的。我推荐学习 Lisp，即使你最终使用其他语言，你也可以从中学到很多关于编程的知识。

[1] [http://maxima.sourceforge.net](http://maxima.sourceforge.net)

# powershell - 删除 Windows PowerShell 脚本开始标头

> ID：15992592
> 
> 赞同：2
> 
> 时间：2013-04-13T20:31:36.333
> 
> 标签：powershell

使用以下设置日志记录时：

```
$ErrorActionPreference="SilentlyContinue"
Stop-Transcript | out-null
$ErrorActionPreference = "Continue"
Start-Transcript -path C:\output.txt 
```

始终添加以下标题 - 有什么方法可以阻止添加？

```
**********************
Windows PowerShell transcript start
Start time: 20130413235532
Username  : computer\administrator 
Machine   : wsa (Microsoft Windows NT 6.2.9200.0) 
**********************
Transcript started, output file is C:\output.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:54:06.817

没有办法阻止`Start-Transcript`输出这些标题。另请记住，Start-Transcript 不会记录 EXE 的输出。如果您需要记录脚本输出并且在 PowerShell v3 上，最好的办法是这样做：

```
PS> .\myscript.ps1 *> myscript.log 
```

这将记录除`Write-Host`输出之外的所有内容。

# php - OpenTok No Reply From Server

> ID：15992595
> 
> 赞同：3
> 
> 时间：2013-04-13T20:32:01.100
> 
> 标签：php, javascript, opentok

I am trying to generate session Ids for users on a website using opentok.

I am using a tutorial from the opentok website to create the session id ([https://github.com/opentok/Opentok-PHP-SDK](https://github.com/opentok/Opentok-PHP-SDK)).

The problem is that when I run the code, the website keeps on loading and no reply from the server is occurring.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T23:21:22.780

I fixed the problem by commenting out these lines from OpenTokSDK.php

```
foreach($data as $key => $value)
{
    $value = urlencode($value);
    $dataString .= "$key=$value&";
} 
```

# php - php登录：未定义的索引

> ID：15992597
> 
> 赞同：-4
> 
> 时间：2013-04-13T20:32:07.770
> 
> 标签：php

我对 php 很陌生，这是我第一次登录。所以当我从数据库中输入一个有效的用户名和密码时，我得到了这两个错误：

注意：未定义的索引：第 3 行的 brukernavn

注意：未定义的索引：第 4 行的 passord

```
$username = $_POST['brukernavn'];
$password = $_POST['passord'];

if($username&&$password)
{

$connect = mysql_connect("localhost", "root", "") or die ("Cannot connect");
mysql_select_db("prosjekt") or die ("Cant find db");

$query = mysql_query("SELECT * FROM bruker WHERE brukernavn='$username'");

$radnum = mysql_num_rows($query);

if ($radnum!=0)
{

while ($rad = mysql_fetch_assoc($query))
{
    $dbuser = $rad['brukernavn'];
    $dbpass = $rad['passord'];
}

if ($username==$dbuser&&$password==$dbpass)
{
echo "Logged in";
}
else
    echo "Wrong username or password";

}
else
    die("That user does not exist!");

}
else
    die("Please enter a username and password!");

?> 
```

谁能看到我在这里出错的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:34:20.840

您正在尝试访问两个尚未分配的变量：

```
$username = $_POST['brukernavn'];
$password = $_POST['passord']; 
```

你要么：

1.  需要将您的登录代码包装在`if`语句中以检查表单是否已提交

2.  需要在访问它们的值之前检查是否设置了这些变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:53:34.830

希望这可以帮助...

```
 <?

$username = $_POST['brukernavn']; 
$password = $_POST['passord'];

if (isset ($_POST['submit'])) { // on form submit... make sure the html form input submit is name='submit' then this script will work

    if($username&&$password)
        {

        $connect = mysql_connect("localhost", "root", "") or die ("Cannot connect");
        mysql_select_db("prosjekt") or die ("Cant find db");

        $query = mysql_query("SELECT * FROM bruker WHERE brukernavn='$username'");

        $radnum = mysql_num_rows($query);

            if ($radnum!=0)
                {

                while ($rad = mysql_fetch_assoc($query))
                {
                    $dbuser = $rad['brukernavn'];
                    $dbpass = $rad['passord'];
                }

                if ($username==$dbuser&&$password==$dbpass)
                {
                echo "Logged in";
                }
                else
                    echo "Wrong username or password";

                }
            else
                die("That user does not exist!");

        }
    else
        die("Please enter a username and password!");

    }

?> 
```

# android - 旋转设备后恢复更改的菜单状态

> ID：15992598
> 
> 赞同：1
> 
> 时间：2013-04-13T20:32:12.263
> 
> 标签：android, menuitem, screen-rotation

我正在编写一个应用程序，它有一个带有按钮和图像的菜单。我按下按钮，按钮的标签从“录制曲目”变为“停止录制”。问题是当我旋转我的设备时，带有按钮的活动被操作系统杀死。所以，我明白我必须在我的数据被方法杀死之前保存我的数据`onSaveInstanceState`，然后在我的方法中恢复它`onCreate`。像这样的东西：

```
@Override
public void onSaveInstanceState(final Bundle saveInstanceState) {
    saveInstanceState.putSerializable("image", image);
    saveInstanceState.putSerializable("buttonState", isRecording);

} 
```

和：

```
if (savedInstanceState != null) {                                
    isRecording = savedInstanceState.getBoolean("buttonState");  

    if (menu != null) {                                          
        MenuItem recordButton = menu.getItem(R.id.track);

        if (!isRecording) {
            recordButton.setTitle(R.string.rec_track_label);     
        } else {
            recordButton.setTitle(R.string.stop_rec_track_label);
        }
    }                                                            

    Image = (Image)savedInstanceState.getSerializable("image");

} 
```

虽然它完美地恢复了我的图像，但我仍然对菜单有问题：由于某种原因，它总是保持“空”，所以它永远不会改变我的按钮标签，尽管每次都应该重新创建它，当 Activity 启动并保存时它在我的 Activity 的私有对象中：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(this).inflate(R.menu.actions, menu);
    this.menu = menu;
    return (super.onCreateOptionsMenu(menu));
} 
```

任何想法我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:47:33.153

您应该将您的`menu != null`块移动到[onPrepareOptionsMenu](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)：

```
public boolean onPrepareOptionsMenu(Menu menu)
{
    MenuItem recordButton = menu.findItem(R.id.track);

    if (isRecording) {
        recordButton.setTitle(R.string.rec_track_label);     
    } else {
        recordButton.setTitle(R.string.stop_rec_track_label);
    }
} 
```

因为这个方法是在菜单显示给用户之前直接调用的。

# c++ - C++ 指针/引用

> ID：15992599
> 
> 赞同：0
> 
> 时间：2013-04-13T20:32:23.007
> 
> 标签：c++, qt, pointers, reference

此代码从鼠标单击中获取坐标并创建一个新顶点；

```
void DrawingWidget::mousePressEvent(QMouseEvent *event){
   if(getCurrentState()==ADD_VERTEX){
      x=event->x();
      y=event->y();

      Vertex p1 {&x,&y};
      m_mainWindow->addVertex(p1);
      update();
   }
} 
```

这是顶点类代码：

```
class Vertex {

public:

   float *x = 0;
   float *y = 0;

   Vertex() = default;
   Vertex(float *nx, float *ny);
}; 
```

所有 Verces 都在列表中：

```
QList<Vector2> vertexList; 
```

并添加顶点（顶点顶点）：

```
addVertex(Vertex vertex){
   vertexList << vertex;
} 
```

基本上第一个顶点添加工作完美，但是当我尝试添加第二个顶点（使用给定的方法）时，第一个顶点坐标被改变了。

注意！Vertex 类的坐标是有意的指针，因为通过使用另一种方法我正在改变它们的坐标。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:43:07.930

`x`并且`y`在您的代码中可能是字段，`DrawingWidget`并且`Vertex`您始终存储指向相同变量（那些字段）的指针。因此，`vertexList`您始终拥有指向相同字段的相同指针值。
我不明白你为什么对你的代码行为感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T20:46:12.147

您问题中的代码和您观察到的行为意味着您有这样的事情：

```
class DrawingWidget
{
public:
    void mousePressEvent(QMouseEvent *event);
private:
    float x;
    float y;
    // ...
}; 
```

当调用该函数时`mousePressEvent()`，您将新坐标分配给这些成员：

```
void DrawingWidget::mousePressEvent(QMouseEvent *event){
   if(getCurrentState()==ADD_VERTEX){
      x=event->x();
      y=event->y();
... 
```

因此，每次按下鼠标时，都会*覆盖*旧坐标。现在，这可能不是问题，但是由于`Vertex`您添加到列表中的 s 包含*指向*这些类成员的指针，而不是简单地存储坐标的副本，第一个顶点似乎已经更改了坐标。

处理这个问题的方法是根本不使用指针（至少对于你的类）！

```
class Vertex
{
public:
    Vertex() : x(0.0f), y(0.0f) {}
    Vertex(float x, float y) : x(x), y(y) {}

    float getX() const { return x; }
    float getY() const { return y; }

    void setX(float x) { this->x = x; }
    void setY(float y) { this->y = y; }

private:
   float x; // NOT pointers!
   float y;
};

class DrawingWidget
{
public:
    void mousePressEvent(QMouseEvent *event);
private:
    //float x; // Not needed!
    //float y;
    // ...
};

void DrawingWidget::mousePressEvent(QMouseEvent *event) {
   if(getCurrentState()==ADD_VERTEX) {
      Vertex p1{event->x(), event->y()};
      m_mainWindow->addVertex(p1);
      update();
   }
} 
```

# java - 导出的 JAR 不会读取图像

> ID：15992609
> 
> 赞同：1
> 
> 时间：2013-04-13T20:33:21.073
> 
> 标签：java, image, swing, nullpointerexception

我正在尝试让图像显示在 JPanel 中。这是我正在使用的代码：

```
 URL imageURL;
        BufferedImage image = null;
        ImageIcon icon;

        imageURL = getClass().getClassLoader().getResource("images/audiorpglogo.png");
        if (imageURL == null) {
            System.out.println(imageURL == null);
            try { imageURL = new File("images/audiorpglogo.png").toURI().toURL(); }
            catch (Exception e1) { imageURL = null; }
        }

        System.out.println(imageURL == null);

        try { image = ImageIO.read(imageURL); }
        catch (Exception e) { }

        System.out.println(image == null);

        icon = new ImageIcon(image);

        System.out.println(icon == null);

        logo = new JLabel(icon); 
```

当我在 Eclipse 中运行这个程序时，我得到以下输出：

```
true
false
false
false 
```

但是，当我将程序导出为可运行的 JAR 时，会得到以下输出：

```
true
false
true
java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:204)
    at me.pogostick29.audiorpg.window.Window.<init>(Window.java:85)
    at me.pogostick29.audiorpg.window.WindowManager.setup(WindowManager.java:16)
    at me.pogostick29.audiorpg.AudioRPG.main(AudioRPG.java:30) 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:44:44.783

您应该有一个资源文件夹，其中包含该文件夹`images`，然后它应该可以工作。

例子：

![在此处输入图像描述](https://i.stack.imgur.com/BdvZJ.png)

我如何访问这些图标：

```
public BufferedImage icon32 = loadBufferedImage("/icon/icon32.png");
public BufferedImage icon64 = loadBufferedImage("/icon/icon64.png");

private BufferedImage loadBufferedImage(String string)
{
    try
    {
        BufferedImage bi = ImageIO.read(this.getClass().getResource(string));
        return bi;
    } catch (IOException e)
    {
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:44:24.203

试试这个代码：

```
try { 
  InputStream in = getClass().getResource(imgName); //Read from an input stream 
  img = new ImageIcon(ImageIO.read(in));    
}catch (Exception e1) {
 e1.printStackTrace();
} 
```

# android - Android：AsyncTask cancel() 问题

> ID：15992612
> 
> 赞同：0
> 
> 时间：2013-04-13T20:33:31.093
> 
> 标签：android, android-asynctask

我有一个 EditText 和一个 AsyncTask 类。每当 EditText 中的文本发生更改时，AsyncTask 类的对象就会创建并使用字符串对其调用 execute()。并且 doBackground() 被调用，它只有一个函数，而该函数又依次具有多个 for 循环。每当文本更改时，都会为 AsyncTask 创建一个新对象。当文本改变时，旧的 Async 对象必须被取消，新的对象应该控制。但是当我在对象上调用取消时，旧的继续运行并且似乎调用 onPostExecute()。有没有办法避免这种情况。我的意思是，我可以在运行新对象之前完全杀死/（停止运行）旧的 asyncTask 对象吗？

**编辑** 这是我的代码，

```
if (getSuggestions1.getStatus() != AsyncTask.Status.RUNNING) {
    getSuggestions1.cancel(true);
    getSuggestions1 = new GetSuggestions1();
    getSuggestions1.execute(new String[] { str });
} 
```

如您所见，我在对同一对象调用取消后立即调用 execute()。另外，正如我所说，我有多个 for 循环（6）。我担心函数 isCancelled() 会在对象立即初始化时为其中一个 for 循环返回 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:17:39.807

除了已经给出的答案。

停止（取消）an`AsyncTask`是一种合作行为。这意味着仅仅调用`AsyncTask.cancel()`是不够的。这个调用只是设置了一个取消的状态（一个标志），并且什么也不做。您的`AsyncTask`实现应该提供合作（帮助）以真正停止处理。具体来说，这意味着如果您希望您`AsyncTask`的可取消性具有高度响应性，您需要安排相当频繁地检查已取消状态。所以把`if (isCancelled()) { return null; }`语句放在你的循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:44:01.200

尝试使用类似的东西

```
while (!isCancelled()) {
    // processing
} 
```

或者

```
if (!isCancelled()) {
    // processing
} 
```

如果您有很多循环，则 if 语句很好，至少这是我所经历的。当然应该使用这些`doInBackground()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T20:39:25.550

您可以在扩展 ASyncTask 的类中创建一个名为 shouldCancel 的布尔标志，并定期在 中检查它`doInBackground()`，如果已设置，则从`doInBackground`方法返回。

# asp.net-mvc - 防止敲除可观察数组上的重复

> ID：15992615
> 
> 赞同：2
> 
> 时间：2013-04-13T20:33:42.720
> 
> 标签：asp.net-mvc, knockout.js

我有一个类似于这个的 ViewModel（简化）：

```
var Person = function(){
    var self = this;
    self.Name = ko.observable();
    self.LastName = ko.observable();
    self.DriverId = ko.observable();
}

var MainViewModel = function(){
    var self = this;
    self.People = ko.observableArray();
} 
```

我需要验证驱动程序 ID 对于数组的每个元素都是唯一的。做这个的最好方式是什么？是否可以创建 MVC 属性？我找不到怎么做的，因为我只为一个特定的类而不是一个集合做了这个。

这是一个带有 ViewModel 的 JsFiddle：http: [//jsfiddle.net/amhedh/VgJ59/6/](http://jsfiddle.net/amhedh/VgJ59/6/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T04:04:01.183

您可以创建一个[Knockout 自定义验证器](https://github.com/ericmbarnard/Knockout-Validation#custom-validation-rules)，只要数组内任何人员对象的*driverId*属性发生更改，它将检查您的整个人员数组。Validator 将根据匹配返回 true 或 false *（如果发现重复条目​​将返回 false 否则返回 true ）*，进一步的 ko 验证将自动为您插入错误消息。

我创建了一个自定义验证器，它将为您完成这项工作。这是验证器：

```
var Unique = function(val, params)
{
  var isValid = true;
      ko.utils.arrayFirst(params[0](), function(item){
       if(val === item[params[2]]() && item !== params[1])
       {
           isValid = false;
           return true;
       }
      });
  return isValid;
}; 
```

这是用法：

```
....
.....
self.DriverId = ko.observable(person.DriverId).extend
 ({
   validation: { 
     validator: Unique, 
     message: 'DriverId is duplicate.', 
     params: [viewModel.People, self, 'DriverId']
   }
});
... 
.... 
```

[演示小提琴](http://jsfiddle.net/p9bLhhhd/33/) *（更改 driverId 文本框值以检查验证）*

# data-structures - 使用二次探测进行哈希表实现的原因

> ID：15992620
> 
> 赞同：3
> 
> 时间：2013-04-13T20:34:15.687
> 
> 标签：data-structures, hashtable, quadratic-probing

我最近一直在学习哈希表。有几个碰撞解决方案的例子，其中之一是二次探测。为什么有人会使用二次探测？他知道哈希表总是不到一半吗？如果是这样，他为什么一开始就使用这么大的桌子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:47:32.050

> 为什么有人会使用二次探测？

假设我们需要*一些*碰撞解决算法，

> 二次探测在封闭哈希表中可能是一种更有效的算法，因为它更好地避免了线性探测可能发生的聚类问题，尽管它不是免疫的。

[（来自维基百科）](http://en.wikipedia.org/wiki/Quadratic_probing)

二次探测并不完美，但[它确实提供了一些优于替代方案的优势：](https://stackoverflow.com/questions/1830597/collision-resolution-quadratic-probing-vs-separate-chaining?rq=1)

> 二次（或其他形式）链接的优点是
> 
> *   更简单的存储管理逻辑（无动态分配）
> *   更快的插入（因为存储更简单）
> *   总体上减少存储需求

[（来自mjv的回答）](https://stackoverflow.com/a/1830748/139010)

> 他知道哈希表总是不到一半吗？

不必要; 这取决于使用的调整大小策略（如果有）。

考虑你在 QP 上的学习主要是教育性的。根据我的经验，实际的哈希表实现并不经常使用[开放寻址](http://en.wikipedia.org/wiki/Open_addressing)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T01:47:53.953

Quadratic rehash 是一种非常简单快速的避免线性哈希聚类问题的方法。它通常仅在表大小为素数时使用（由于其他原因也可能很好）。

为避免担心“桌子半满”，最简单的方法是在某个时候切换到线性探头。（您可以将这种切换的阈值测试*放在*通常的**if (index >= size) {index -= size;}**块中，以避免任何性能损失。

# php - Twitter 提要以纯文本形式输出

> ID：15992626
> 
> 赞同：-1
> 
> 时间：2013-04-13T20:35:05.687
> 
> 标签：php, html, twitter, plaintext, autolink

我的网站底部有一个 twitter 提要，我正在构建： http: [//matthewkcooper.netii.net/](http://matthewkcooper.netii.net/)

如您所见，它在不可点击的主题标签处输出 url 链接。如何使这些链接处于活动状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:57:22.520

我从[为什么这个函数不自动链接中找到了一个自动链接函数？](https://stackoverflow.com/q/3595521/1269513)并将其添加到您链接到的脚本底部附近`$row['desc']`，在回声中调用它。

```
function twitterify($ret)
{
    $ret = preg_replace("#(^|[\n ])([\w]+?://[\w]+[^ \"\n\r\t< ]*)#", "\\1<a href=\"\\2\" target=\"_blank\">\\2</a>", $ret);
    $ret = preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r< ]*)#", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $ret);
    $ret = preg_replace("/@(\w+)/", "<a href=\"http://www.twitter.com/\\1\" target=\"_blank\">@\\1</a>", $ret);
    $ret = preg_replace("/#(\w+)/", "<a href=\"http://search.twitter.com/search?q=%23\\1\" target=\"_blank\">#\\1</a>", $ret);
    return $ret;
}

foreach($feed as $row)
{
    echo('<div>'.twitterify($row['desc']).'<span><a href="'.$row['link'].'">'.relativedate(time()-strtotime($row['date'])).' ago</a></span></div>');
} 
```

# python - 在模板中选择空的 ModelChoiceField

> ID：15992628
> 
> 赞同：1
> 
> 时间：2013-04-13T20:35:12.110
> 
> 标签：python, django

您好有以下表单字段。

**表格.py**

```
self.fields['sender_name'] = forms.ModelChoiceField(queryset=this_originator_name) 
```

在我的模板中，我想检测选择是否没有值（查询集为空）以显示消息和链接。

这是我尝试过的，但没有成功......

**模板...**

```
{% if form.content.value == ""  %}

link here

{% endif %} 
```

PS我不是在找 `empty_label`。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:54:01.447

关于什么

```
{% if form.sender_name.queryset.count == 0 %}

link here

{% endif %} 
```

注意：我记不太清了，但实际上可能是`form.sender_name.field.queryset.count`

# mysql - 具有不同表的 MySQL 嵌套或递归查询

> ID：15992629
> 
> 赞同：0
> 
> 时间：2013-04-13T20:35:16.877
> 
> 标签：mysql, select, nested, recursive-query

亲切的问候。

我对如何在 MySQL 中实现查询有疑问，抱歉太长了。

现在：我的网站有（不同项目和数量的）产品包。

项目存储在名为**ItemTbl**的表中，有 2 个字段（IdItem 和 NameItem）

```
CREATE TABLE ItemTbl ( 
IdItem VARCHAR(16) UNIQUE NOT NULL, 
NameItem VARCHAR(32) NOT NULL 
);
INSERT INTO ItemTbl (IdItem, NameItem) VALUES 
('Item00','Item 00'), 
('Item01','Item 01'), 
('Item02','Item 02'), 
('Item03','Item 03'), 
('Item04','Item 04'), 
('Item05','Item 05'); 
```

包存储在名为**PackTbl**的表中，有 2 个字段（IdPack 和 NamePack）

```
CREATE TABLE PackTbl ( 
IdPack VARCHAR(16) UNIQUE NOT NULL, 
NamePack VARCHAR(32) NOT NULL 
); 
INSERT INTO PackTbl (IdPack, NamePack) VALUES 
('Pack00','Pack 00'), 
('Pack01','Pack 01'), 
('Pack02','Pack 02'), 
('Pack03','Pack 03'); 
```

站点存储在名为**SiteTbl**的表中，有 2 个字段（IdSite 和 NameSite）

```
CREATE TABLE SiteTbl ( 
IdSite VARCHAR(16) UNIQUE NOT NULL, 
NameSite VARCHAR(32) NOT NULL 
);
INSERT INTO SiteTbl (IdSite, NameSite) VALUES 
('Site00','Site 00'), 
('Site01','Site 01'); 
```

**这些包使用名为ItemPackTbl**的表与项目相关，该表具有 3 个字段（IdItem、IdPack、QtyIP）

```
CREATE TABLE ItemPackTbl ( 
IdItem VARCHAR(16) NOT NULL, 
IdPack VARCHAR(16) NOT NULL, 
QtyIP INT NOT NULL 
);
INSERT INTO ItemPackTbl (IdItem, IdPack, QtyIP) VALUES 
('Item00', 'Pack00', '90'), 
('Item01', 'Pack00', '81'), 
('Item02', 'Pack00', '72'), 
('Item03', 'Pack01', '63'), 
('Item04', 'Pack01', '54'), 
('Item05', 'Pack01', '50'), 
('Item01', 'Pack02', '61'), 
('Item04', 'Pack02', '72'), 
('Item03', 'Pack03', '83'), 
('Item02', 'Pack03', '94'); 
```

**这些站点使用名为PackSiteTbl**的表与包相关，该表具有 3 个字段（IdPack、IdSite、QtyPS）

```
CREATE TABLE PackSiteTbl ( 
IdPack VARCHAR(16) NOT NULL, 
IdSite VARCHAR(16) NOT NULL, 
QtyPS INT NOT NULL 
);
INSERT INTO PackSiteTbl (IdPack, IdSite, QtyPS) VALUES 
('Pack00', 'Site00', '5'), 
('Pack03', 'Site00', '4'), 
('Pack01', 'Site01', '8'), 
('Pack02', 'Site01', '1'); 
```

现在我们有一个名为**QuotTbl**的表，其中仅包含项目的不同报价（因为将计算包或站点）以及成本和日期。

```
CREATE TABLE QuotTbl ( 
IdQuot VARCHAR(16) UNIQUE NOT NULL, 
IdItem VARCHAR(16) NOT NULL, 
QtCost INT NOT NULL, 
QtDate DATE NOT NULL 
);
INSERT INTO QuotTbl (IdQuot, IdItem, QtCost, QtDate) VALUES 
('Quot00', 'Item00', '90', '1983-12-30'), 
('Quot01', 'Item00', '72', '2004-09-09'), 
('Quot02', 'Item01', '63', '2013-02-01'), 
('Quot03', 'Item01', '50', '2012-05-09'), 
('Quot04', 'Item02', '61', '1983-12-30'), 
('Quot05', 'Item02', '27', '2004-09-09'), 
('Quot06', 'Item03', '38', '2013-02-01'), 
('Quot07', 'Item03', '49', '2012-05-09'), 
('Quot08', 'Item04', '90', '1983-12-30'), 
('Quot09', 'Item04', '72', '2004-09-09'), 
('Quot10', 'Item05', '63', '2013-02-01'), 
('Quot11', 'Item05', '50', '2012-05-01'); 
```

我想做两件事：

1.  我需要知道什么是获取带有项目简历的**SiteTbl**条目列表的查询（添加）。

    **Site00**有：

    ```
    ItemId, Qty
    Item00, 450
    Item01, 405
    Item02, 736
    Item03, 332 
    ```

    **Site01**有：

    ```
    ItemId, Qty
    Item01, 61
    Item03, 504
    Item04, 504
    Item05, 400 
    ```

2.  根据 QuotTbl 表查找最便宜（或最新）的报价，以及所有项目列表。

    **Site00** *最便宜*：

    ```
    ItemId, Qty Cost    Total   
    Item00, 450 72      32400
    Item01, 405 50      20250
    Item02, 736 27      19872
    Item03, 332 38      12616 
    ```

    **Site01** *最便宜*：

    ```
    ItemId, Qty Cost    Total   
    Item01, 61  50      3050
    Item03, 504 38      19152
    Item04, 504 72      36288
    Item05, 400 50      20000 
    ```

    **Site00** *最新*：

    ```
    ItemId, Qty Cost    Total   
    Item00, 450 72      32400
    Item01, 405 63      25515
    Item02, 736 27      19872
    Item03, 332 38      12616 
    ```

    **Site01** *最新*：

    ```
    ItemId, Qty Cost    Total   
    Item01, 61  63      3843
    Item03, 504 38      19152
    Item04, 504 72      36288
    Item05, 400 63      25200 
    ```

感谢您的宝贵帮助。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:39:26.183

第一个问题：

```
SELECT c.IdItem,b.IdSite, SUM(c.QtyIP*b.QtyPS) Multiply
FROM PackSiteTbl b 
LEFT JOIN ItemPackTbl c
ON b.IdPack = c.IdPack 
GROUP BY b.IdSite, c.IdItem; 
```

最便宜的

```
SELECT * FROM (SELECT IdQuot, IdItem, QtCost Cheapest 
FROM QuotTbl
ORDER BY QtCost ASC) d
GROUP BY IdItem; 
```

最新

```
SELECT * FROM (SELECT IdQuot, IdItem, QtCost Newest
FROM QuotTbl
ORDER BY QtDate DESC) d
GROUP BY IdItem; 
```

检查这个答案：[http ://www.sqlfiddle.com/#!2/444b7/66](http://www.sqlfiddle.com/#!2/444b7/66)

# python - Python 中快速、小型且重复的矩阵乘法

> ID：15992630
> 
> 赞同：4
> 
> 时间：2013-04-13T20:35:21.347
> 
> 标签：python, optimization, numpy, cython, scientific-computing

我正在寻找一种使用 Python/Cython/Numpy 快速将许多 4x4 矩阵相乘的方法，有人可以提供任何建议吗？

为了展示我目前的尝试，我有一个需要计算的算法

```
A_1 * A_2 * A_3 * ... * A_N 
```

哪里每

```
A_i != A_j 
```

Python中的一个例子：

```
means = array([0.0, 0.0, 34.28, 0.0, 0.0, 3.4])
stds = array([ 4.839339, 4.839339, 4.092728, 0.141421, 0.141421, 0.141421])

def fn():
    steps = means+stds*numpy.random.normal(size=(60,6))
    A = identity(4)
    for step in steps:
        A = dot(A, transform_step_to_4by4(step))
%timeit fn()

1000 loops, best of 3: 570 us per loop 
```

在 Cython/Numpy 中实现这个算法比使用 Eigen/C++ 和所有优化的等效代码慢大约 100 倍。不过，我真的不想使用 C++。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T08:58:54.063

如果您必须调用 Python 函数来生成要相乘的每个矩阵，那么您基本上在性能方面被搞砸了。但是，如果您可以对`transform_step_to_4by4`函数进行矢量化，并让它返回一个形状为数组，`(n, 4, 4)`那么您可以使用以下方法节省一些时间`matrix_multiply`：

```
import numpy as np
from numpy.core.umath_tests import matrix_multiply

matrices = np.random.rand(64, 4, 4) - 0.5

def mat_loop_reduce(m):
    ret = m[0]
    for x in m[1:]:
        ret = np.dot(ret, x)
    return ret

def mat_reduce(m):
    while len(m) % 2 == 0:
        m = matrix_multiply(m[::2], m[1::2])
    return mat_loop_reduce(m)

In [2]: %timeit mat_reduce(matrices)
1000 loops, best of 3: 287 us per loop

In [3]: %timeit mat_loop_reduce(matrices)
1000 loops, best of 3: 721 us per loop

In [4]: np.allclose(mat_loop_reduce(matrices), mat_reduce(matrices))
Out[4]: True 
```

你现在有 log(n) Python 调用而不是 n，有利于 2.5 倍的加速，对于 n = 1024 将接近 10 倍。显然`matrix_multiply`是一个 ufunc，因此有一个`.reduce`方法，可以让你的代码在 Python 中不运行循环。虽然我无法让它运行，但不断收到一个神秘的错误：

```
In [7]: matrix_multiply.reduce(matrices)
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
RuntimeError: Reduction not defined on ufunc with signature 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T20:46:14.647

我无法将速度与您的方法进行比较，因为我不知道您如何将`(60,6)`数组转换为 a `(4,4)`，但这适用于获取序列的点：

```
A = np.arange(16).reshape(4,4)
B = np.arange(4,20).reshape(4,4)
C = np.arange(8,24).reshape(4,4)

arrs = [A, B, C]

P = reduce(np.dot, arrs) 
```

这相当于，但应该比：

```
P = np.identity(4, dtype = arrs[0].dtype)
for arr in arrs:
    P = np.dot(P, arr) 
```

时序测试：

```
In [52]: def byloop(arrs):
   ....:     P = np.identity(4)
   ....:     for arr in arrs:
   ....:         P = np.dot(P, arr)
   ....:     return P
   ....: 

In [53]: def byreduce(arrs):
   ....:     return reduce(np.dot, arrs)
   ....: 

In [54]: byloop(arrs)
Out[54]: 
array([[  5104,   5460,   5816,   6172],
       [ 15728,  16820,  17912,  19004],
       [ 26352,  28180,  30008,  31836],
       [ 36976,  39540,  42104,  44668]])

In [55]: byreduce(arrs)
Out[55]: 
array([[ 5104,  5460,  5816,  6172],
       [15728, 16820, 17912, 19004],
       [26352, 28180, 30008, 31836],
       [36976, 39540, 42104, 44668]]) 
```

其中`len(arrs) = 1000`：

```
In [56]: timeit byloop(arrs)
1000 loops, best of 3: 1.26 ms per loop

In [57]: timeit byreduce(arrs)
1000 loops, best of 3: 656 us per loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T22:27:27.257

对于这么小的矩阵，完全避免使用 BLAS 可能是有利的。那里有小型矩阵乘法库，例如[libSMM](http://www.hector.ac.uk/cse/distributedcse/reports/cp2k03/cp2k03/node9.html)（还有更多）。

用 f2py 或 cython 包装它们可能是可行的，或者 --- 在 cython 或 fortran/f2py 中滚动你自己的可能更容易。

# java - 安装 SDK 后如何配置 Android 模拟器

> ID：15992631
> 
> 赞同：3
> 
> 时间：2013-04-13T20:35:22.510
> 
> 标签：java, android, configuration, sdk, avd

我正在尝试在我的 64 位 Ubuntu 12.04 发行版上启动并运行 Android 模拟器。首先，我必须安装 ia32-libs 来解决我在之前（失败的）尝试中遇到的一些早期问题。

然后我下载并安装了 64 位 linux 发行版。我在命令行上导航到`android`应用程序（SDK 管理器）并运行它。我下载了 Android 工具和最新版本的 Android 操作系统。

我现在想运行`emulator`，但是当我这样做时，我收到以下错误：

```
myUser@myMachine:~/android-sdk/21.1/android-sdk-linux/tools$ ./emulator

emulator: ERROR: You did not specify a virtual device name, and the system
directory could not be found.

If you are an Android SDK user, please use '@<name>' or '-avd <name>'
to start a given virtual device (see -help-avd for details).

Otherwise, follow the instructions in -help-disk-images to start the emulator 
```

当我运行时，`./emulator -help-disk-images`我得到的输出包括以下内容：

```
kernel-qemu      the emulator-specific Linux kernel image
ramdisk.img      the ramdisk image used to boot the system
system.img       the *initial* system image
userdata.img     the *initial* data partition image

It will also use the following writable image files:

userdata-qemu.img  the persistent data partition image
system-qemu.img    an *optional* persistent system image
cache.img          an *optional* cache partition image
sdcard.img         an *optional* SD Card partition image

snapshots.img      an *optional* state snapshots image

If you're neither using the SDK or the Android build system, you
can still run the emulator by explicitely providing the paths to
*all* required disk images through a combination of the following
options: -sysdir, -datadir, -kernel, -ramdisk, -system, -data, -cache
-sdcard and -snapstorage. 
```

这非常令人困惑。我在 YouTube 上看到过使用模拟器的人的例子，只不过`./emulator -datadir=/some/path`.

所以我问：

*   *通过 SDK、“ Android 构建系统*”(???) 和通过终端运行模拟器有什么区别，就像我在这里尝试的那样？
*   为什么在某些情况下可以通过 运行模拟器`./emulator -datadir=/some/path`，但是第二个窗口中的输出似乎需要 4 - 8 个命令行参数？
*   在什么时候启动 AVD 管理器并设置我的机器？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T21:40:41.100

**您必须在启动模拟器之前创建 AVD 配置：**

```
android create avd -n <name> -t <targetID> [-<option> <value>] ... 
```

[http://developer.android.com/tools/devices/managing-avds-cmdline.html#AVDCmdLine](http://developer.android.com/tools/devices/managing-avds-cmdline.html#AVDCmdLine)

**那么你就可以启动它了**

```
emulator -avd <avd_name> [<options>] 
```

[http://developer.android.com/tools/devices/emulator.html#starting](http://developer.android.com/tools/devices/emulator.html#starting)

# android - 从服务中保持屏幕开启

> ID：15992632
> 
> 赞同：4
> 
> 时间：2013-04-13T20:35:22.527
> 
> 标签：android, service, timeout, screen, wakelock

我想知道如何从服务中永久保持屏幕开启。这是代码的场景：用户将手机插入电源插座，广播接收器获取事件，启动防止屏幕超时的服务。用户拔下电话，服务被终止并恢复超时。

我想使用唤醒锁，但所需的级别在 API 13 中已弃用：

> int SCREEN_BRIGHT_WAKE_LOCK 此常量在 API 级别 13 中已弃用。大多数应用程序应使用 FLAG_KEEP_SCREEN_ON 而不是这种类型的唤醒锁，因为当用户在应用程序之间移动时它将由平台正确管理并且不需要特殊权限。

`FLAG_KEEP_SCREEN_ON`不能从我读过的服务中使用。

我不想修改屏幕超时数，因为如果我的服务被破坏或应用程序被卸载，我不希望超时停留在一个很高的数字。

此外，我的应用程序无法获得任何系统权限，因此任何需要*`DEVICE_POWER`权限*的东西，我都无法使用

任何想法？感谢您的任何见解，阿米什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:04:16.480

不推荐使用**并不意味着您不能将**其用于大于 13 的版本。如果您的最低要求版本是 8（未确认），那么您别无选择。唤醒锁在 api 级别 17 中仍然可用。

# php - 正则表达式计算非嵌套 标签

> ID：15992636
> 
> 赞同：0
> 
> 时间：2013-04-13T20:35:51.033
> 
> 标签：php, regex

下面的函数与它所说的差不多。它在找到的第二个段落标记之后将一串 html 插入到内容中。

我需要对其进行一些更改，以便它只计算不在其他标签内的段落标签。换句话说，只有顶级段落标签。

用正则表达式有什么办法吗？

```
function my_html_insert($content){
    $InsertAfterParagraph = 2;

    if(substr_count(strtolower($content), '</p>') < $InsertAfterParagraph )
    {
        return $content .= myFunction($my_insert=1);
    }
    else
    {
        $replaced_content = preg_replace_callback('#(<p[\s>].*?</p>\n)#s', 'my_p_callback', $content);
    }
    return $replaced_content;
}

function my_p_callback($matches)
{
    static $count = 0;
    $ret = $matches[1];
    $pCount = get_option('my_p_count');

    if (++$count == $pCount){
        $ret .= myFunction($my_insert=1);
    }

    return $ret;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T21:02:40.783

我仍然会解析它，因为它更清洁且更易于维护：

```
<?php

$doc = new DOMDocument();
$doc->loadHTML("
    <!DOCTYPE html>
    <html>
        <body>
            <p>Test 1</p>
            <div>Test <p>2</p></div>
            <p>Test <span>3</span></p>
        </body>
    </html>
");
$xpath = new DOMXpath($doc);

$elements = $xpath->query("/html/body/p");

foreach ($elements as $element) {
    $node = $doc->createDocumentFragment();
    $node->appendXML('<h1>This is a test</h1>');

    if ($element->nextSibling) {
        $element->parentNode->insertBefore($node, $element->nextSibling);
    } else {
        $element->parentNode->appendChild($node);
    }
}

echo $doc->saveHTML();

?> 
```

和输出：

```
<!DOCTYPE html>
<html>
    <body>
        <p>Test 1</p><h1>This is a test</h1>
        <div>Test <p>2</p></div>
        <p>Test <span>3</span>t</p><h1>This is a test</h1>
    </body>
</html> 
```

# javascript - 在图表框架中加入数据点的算法

> ID：15992637
> 
> 赞同：0
> 
> 时间：2013-04-13T20:35:55.213
> 
> 标签：javascript, jquery, charts

有没有办法通过在输入数组中加入点来绘制图表，而不是在加入点之前按 x 轴 asc 对数组进行排序。例如：

```
Input Array= [[1, 3], [5, 6], [4, 4], [3, 10]] 
```

我检查过的所有图表框架（jqplot、flot 等）都会在连接点之前按 x 轴对数组进行排序。导致：

```
[1, 3] -> [3, 10] -> [4, 4] -> [5, 6] 
```

但我想要的是加入这些点，因为它们完全出现在输入数组中。

```
[1, 3] -> [5, 6] -> [4, 4] -> [3, 10] 
```

如果你按照我所说的那样绘制这几个点，你就会明白我的意思。他们看起来不同。有必要我必须加入这些点，因为它们出现在输入数组中，而不是按 x 轴升序排序。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:26:31.850

看看[Highchart.js](http://www.highcharts.com/)，尤其是[样条图](http://docs.highcharts.com/#spline-chart)。我想这就是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:54:05.380

您可以使用任何将此数据视为 x 轴上的分类数据的图表框架来执行此操作。[FusionCharts](http://www.fusioncharts.com)、HighCharts 等允许您在 JavaScript 中构建这些图表，将 x 轴值视为类别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T00:56:58.827

我用 jqplot 找到了答案。您只需将“sortData”选项设置为 false ..., sortData : false, ...,

这可确保绘制的绘图与将数据输入绘图引擎完全相同，否则 x 轴将在绘图之前进行排序。有时这是不可取的。

# camera - 2D游戏背景视差多层

> ID：15992643
> 
> 赞同：0
> 
> 时间：2013-04-13T20:36:41.863
> 
> 标签：camera, 2d, parallax, platform-agnostic

对于 2D 横向滚动游戏中的视差背景系统，我无法理解以下场景。

[![视差滚动问题](https://i.stack.imgur.com/ixN9M.png)](https://i.stack.imgur.com/ixN9M.png)

第 1 层在游戏开始时可见，并随着相机以 0.5 倍滚动。最终，第 1 层将结束，第 2 层需要可见，因此两层之间没有水平间隙。如果两个层都以相同的速度移动，那将很简单，可以将第 2 层的起点放置在第 1 层的末尾。但是，在这种情况下，第 2 层的移动速度比第 1 层慢，因此必须更早地定位X 轴以防止两个位置之间出现间隙。所有背景层都相对于相机移动。

我正在尝试创建的系统需要灵活并支持不同的滚动因子并在层之间不断交替。任何人都可以提供解决问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:52:28.000

> 如果两层同时移动，那就很简单了

你的意思是“如果两层都以相同的速度移动它会很简单”？根据您的图纸，这是公式和一些示例编号：

```
w1 = width of layer 1 = ? (lets say 1000)
s1 = speed of scrolling for layer 1 = 0.5
s2 = speed of scrolling for layer 2 = 0.25
x2 = start x position of layer 2

x2 = (1 - (s2/s1)) * w1

500 = (1 - (0.25/0.5)) * 1000 
```

如果它移动慢 5 倍

```
800 = (1 - (0.1/0.5)) * 1000 
```

# c++ - 铿锵编译器挂在windows上

> ID：15992645
> 
> 赞同：0
> 
> 时间：2013-04-13T20:36:47.937
> 
> 标签：c++, windows, llvm, clang, llvm-clang

我按照[手册使用 VS9 构建了](http://clang.llvm.org/get_started.html#buildWindows)**clang**。

它的构建没有错误。但是当我试图编译一些代码时 - 它挂起（不消耗周期，两个进程），主干和 3.2 版本：

```
> "bin\clang++.exe" -c test.cpp -o test.bs -emit-llvm -v

clang version 3.2 (tags/RELEASE_32/final)
Target: i686-pc-win32
Thread model: posix
 "C:/llvm/bin/clang++.exe" -cc1 -triple i686-pc-win32 -emit-llvm-bc -disable-free -main-file-name test.cpp -mrelocation-model static -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -target-cpu pentium4 -momit-leaf-frame-pointer -v -coverage-file "C:\\llvm\\test.bs" -resource-dir "C:/llvm/bin\\..\\lib\\clang\\3.2" -fmodule-cache-path "C:\\Users\\qble\\AppData\\Local\\Temp\\1\\clang-module-cache" -internal-isystem C:/llvm/bin/../lib/clang/3.2/include -internal-isystem -std=c++11 -fdeprecated-macro -ferror-limit 19 -fmessage-length 0 -mstackrealign -fms-extensions -fms-compatibility -fmsc-version=1300 -fdelayed-template-parsing -fobjc-runtime=gcc -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -o test.bs -x c++ test.cpp
clang -cc1 version 3.2 based upon LLVM 3.2svn default target i686-pc-win32 -std=c++11 -fdeprecated-macro -ferror-limit 19 -fmessage-length 0 -mstackrealign -fms-extensions -fms-compatibility -fmsc-version=1300 -fdelayed-template-parsing -fobjc-runtime=gcc -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -o test.bs -x c++ test.cpp "
#include "..." search starts here:
#include <...> search starts here:
 C:/llvm/bin/../lib/clang/3.2/include
End of search list.
[HANG IS HERE]^C 
```

怎么了？如何让它发挥作用？

编辑：

> 你能找到第二个进程的启动位置吗？它的标准输入是否重定向到管道？

第二个进程在这里执行，它是“clang.exe”：

```
>clang.exe!llvm::sys::Program::ExecuteAndWait(const llvm::sys::Path & path={...}, const char * * args=0x001ba3f0, const char * * envp=0x00000000, const llvm::sys::Path * * redirects=0x00000000, unsigned int secondsToWait=0, unsigned int memoryLimit=0, std::basic_string<char,std::char_traits<char>,std::allocator<char> > * ErrMsg="")  line 34  C++
clang.exe!clang::driver::Compilation::ExecuteCommand(const clang::driver::Command & C={...}, const clang::driver::Command * & FailingCommand=0x00000000)  line 282 + 0x24 bytes C++
clang.exe!clang::driver::Compilation::ExecuteJob(const clang::driver::Job & J={...}, const clang::driver::Command * & FailingCommand=0x00000000)  line 298 + 0x10 bytes C++
clang.exe!clang::driver::Compilation::ExecuteJob(const clang::driver::Job & J={...}, const clang::driver::Command * & FailingCommand=0x00000000)  line 303 + 0x12 bytes C++
clang.exe!clang::driver::Driver::ExecuteCompilation(const clang::driver::Compilation & C={...}, const clang::driver::Command * & FailingCommand=0x00000000)  line 508 + 0x15 bytes  C++
clang.exe!main(int argc_=3, const char * * argv_=0x001b28c0)  line 476 + 0x1e bytes C++ 
```

编辑：

如果我运行：

```
type test.cpp | ..\build\bin\Debug\clang.exe -emit-llvm -c test.cpp -o test.bs 
```

或者直接从上面的clang输出命令行 - 我得到真正的编译错误（关于标题）。因此，参数解析/传递似乎有些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:37:12.587

问题出在我的**INCLUDE** env var 上。它有类似的路径

```
c:\some\dir\ 
```

clang 将它传递给子进程（Win **CreateProcess**接受连接的参数）：

```
clang.exe someargs "c:\some\dir\" otherargs 
```

并且看起来由于最后一个反斜杠，双引号被“转义”，因为子进程中的 argv_ 是：

```
somepath/clang.exe
someargs
c:\some\dir" otherargs 
```

请注意如何“使用”反斜杠，并且**otherargs**与该路径连接，这就是它等待的原因 - 它没有得到 args 的一部分。

Clang 的**Program::Execute**应该被修复以支持转义反斜杠或解析**INCLUDE** env var 的代码。

**来自[Stefan vK的](https://stackoverflow.com/users/2230775/stefan-v-k)**编辑**：llvm 错误跟踪器中的相应条目以及可能的补丁。[http://llvm.org/bugs/show_bug.cgi?id=15802](http://llvm.org/bugs/show_bug.cgi?id=15802)**

# dart - 在调用之前检测 ReceivePort 是否有处理程序

> ID：15992648
> 
> 赞同：1
> 
> 时间：2013-04-13T20:37:35.620
> 
> 标签：dart, dart-isolates

我使用 spawnFunction 创建了一个隔离，并提供了一个错误处理程序并将发送包装在 try/catch 中。

如果我尝试发送到 replyTo 并且它没有注册接收，那么它（正确地）抛出一个方法未找到异常，但我不知道如何捕获和处理它。

如果您取消注释 recPort 行，它应该一切正常。

```
echoIsolate() {
  port.receive((message, replyTo) {
    replyTo.send(message, port.toSendPort());
  });
}

bool errorHandler(IsolateUnhandledException ex) {
  print('Got error');
  return true;
}

run_tests() {
  test('bad rec', () {
    try {
    var recPort = new ReceivePort();
    //recPort.receive((message, replyTo) => print('Got echo: ${message}'));

    var isolatePort = spawnFunction(echoIsolate, errorHandler);

    isolatePort.send('message', recPort.toSendPort());
    } catch(ex) {
      print('Got exception');
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T23:04:34.713

目前（截至 2013 年 4 月）没有办法处理此错误。（AFAIK）

两个改进可以解决这个问题：1）设置全局异常处理程序的方法，或 2）异步 try/catch。

如果代码在隔离中运行，则全局异常处理程序已经成为可能。可以将异常处理程序作为参数传递给`spawnFunction`. 我们将改进隔离的 API，但目前这是捕获未捕获异常的唯一方法。

我们正在考虑异步 try/catch，但到目前为止还只是想法。

编辑：还有一个问题是这是否应该抛出、缓冲或只是丢弃接收到的值。

# python - Python，“过滤”行编辑，按字符读取标准输入，没有回声

> ID：15992651
> 
> 赞同：9
> 
> 时间：2013-04-13T20:38:03.133
> 
> 标签：python, readline, curses

我需要一个函数，可以将输入读入缓冲区`raw_input()`，但不是回显输入并阻塞直到返回整行，它应该**抑制回显并在每次缓冲区更改时调用回调**。

我说“缓冲区更改”而不是“读取字符”，因为`raw_input()`，我希望它知道特殊键。例如，退格键应该可以工作。

例如，如果我想使用回调来模拟输入的大写回声，代码将如下所示：

```
def callback(text):
    print '\r' + text.upper()

read_input(callback) 
```

我怎样才能做到这一点？

*注意：我一直在尝试使用`readline`并`curses`达到我的目的，但是两个 Python 绑定都不完整。`curses`在不清除整个屏幕的情况下无法启动，并`readline`在任何输入开始之前提供一个挂钩。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T21:58:46.543

好吧，我亲手写了代码。我会留下一个解释以供将来参考。

# 要求

```
import sys, tty, termios, codecs, unicodedata
from contextlib import contextmanager 
```

# 禁用行缓冲

简单地读取标准输入时出现的第一个问题是*行缓冲*。我们希望单个字符无需换行即可到达我们的程序，这不是终端操作的默认方式。

为此，我编写了一个处理`tty`配置的上下文管理器：

```
@contextmanager
def cbreak():
    old_attrs = termios.tcgetattr(sys.stdin)
    tty.setcbreak(sys.stdin)
    try:
        yield
    finally:
        termios.tcsetattr(sys.stdin, termios.TCSADRAIN, old_attrs) 
```

此管理器启用以下惯用语：

```
with cbreak():
    single_char_no_newline = sys.stdin.read(1) 
```

完成后执行清理很重要，否则终端可能需要`reset`.

# 解码标准输入

仅读取标准输入的第二个问题是编码。非 ascii unicode 字符将逐字节到达我们，这是完全不可取的。

为了正确解码标准输入，我编写了一个生成器，我们可以对 unicode 字符进行迭代：

```
def uinput():
    reader = codecs.getreader(sys.stdin.encoding)(sys.stdin)
    with cbreak():
        while True:
            yield reader.read(1) 
```

这可能会故障转移管道。我不确定。但是，对于我的用例，它会选择正确的编码并生成字符流。

# 处理特殊字符

首先，我们应该能够区分可打印字符和控制字符：

```
def is_printable(c):
    return not unicodedata.category(c).startswith('C') 
```

除了可打印文件，现在，我只想处理`← backspace`和`Ctrl``D`序列：

```
def is_backspace(c):
    return c in ('\x08','\x7F')

def is_interrupt(c):
    return c == '\x04' 
```

# 把它放在一起：`xinput()`

现在一切就绪。我想要的函数的原始合同是**读取输入、处理特殊字符、调用回调**。该实施反映了这一点：

```
def xinput(callback):
    text = ''

    for c in uinput():
        if   is_printable(c): text += c
        elif is_backspace(c): text = text[:-1]
        elif is_interrupt(c): break

        callback(text)

    return text 
```

# 试一试

```
def test(text):
    print 'Buffer now holds', text

xinput(test) 
```

运行它并输入`Hellx``← backspace``o World`显示：

```
Buffer now holds H
Buffer now holds He
Buffer now holds Hel
Buffer now holds Hell
Buffer now holds Hellx
Buffer now holds Hell
Buffer now holds Hello
Buffer now holds Hello 
Buffer now holds Hello w
Buffer now holds Hello wo
Buffer now holds Hello wor
Buffer now holds Hello worl
Buffer now holds Hello world 
```

# php - 邮件表单重定向问题

> ID：15992652
> 
> 赞同：0
> 
> 时间：2013-04-13T20:38:11.257
> 
> 标签：php, forms, redirect

我已经尝试了一些针对类似问题的建议解决方案，但似乎没有任何解决方案，因此我决定也发布我的问题。

我对 PHP 相当陌生，并为我的网站创建了一个简单的邮件表单。提交表单后尝试重定向到主页时，标头功能不起作用，而是停留在空白的mail.php页面。

我将不胜感激任何想法我做错了什么或在这方面提供帮助。

这是我应用的代码：

```
<html>
<body>
<?php 
$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$formcontent="From: $name \n Message: $message";
$recipient = "myemail.com";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader);
header('Location: myurl.com/websitelocation/'); 
exit;
?>
</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:40:03.330

您在执行重定向之前有输出，这会导致重定向失败，因为您已经发送了 HTTP 标头。完成后，您将无法发送重定向标头。

您的代码不需要您的 HTML。删除它，它会工作。另一种解决方案是，如果您需要为您可能希望显示的任何错误消息提供 HTML，则将 HTML 放在您的 PHP 代码之后。只需确保在执行重定向的 PHP 代码之前没有 HTML 或任何空格。

此外，如果您的页面是空白的，您可能没有打开[错误报告。](http://php.net/manual/en/function.error-reporting.php)始终在打开它的情况下进行开发并报告所有错误，包括通知。它将帮助您捕获此错误并编写更好的代码。

# ruby-on-rails - 在 belongs_to 关联中解决质量分配的正确方法是什么

> ID：15992653
> 
> 赞同：0
> 
> 时间：2013-04-13T20:38:22.043
> 
> 标签：ruby-on-rails

假设我有两个模型：

```
class Article < ActiveRecord::Base
  belongs_to :category
  attr_accessible :content

  validates :content, :category, :presence => true

end 
```

和

```
class category < ActiveRecord::Base
  attr_accessible :name
  has_many :articles
end 
```

我正在创建一个表单来添加新文章，并希望在此表单中让用户可以从列表中选择一个类别。

```
= form_for([:admin,@article] , :html => {:multipart => true}) do |f|

  = f.label :category
  = f.collection_select(:category, Category.all, :id, 
       :name,{:prompt => 'select category'}, {:style => 'height:50px;'})

  = f.label :content
  = f.text_area :content, class: 'tinymce', cols:60, rows: 15
  %hr

  = f.submit 'send' 
```

当我提交表单时，我收到错误 Can't mass-assign protected attributes: category ，我理解。为了解决问题，我将 category_id 添加到文章的 attr_accessible 并将表单更改为：

```
= f.label :category_id
 = f.collection_select(:category_id, Category.all, :id, 
  :name,{:prompt => 'select category'}, {:style => 'height:50px;'}) 
```

然后一切正常（我可以在数据库中创建具有关联 category_id 的 Article 对象），但我认为这不是正确的方法。下面是我在 ArticlesController 中的创建操作

```
def create
    @article = Article.new(params[:article])
    if @article.save
      redirect_to([:admin,@article])
    else
      render 'new'
    end

  end 
```

有人可以解释我如何改善这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:04:54.243

如果您不想使属性可以批量分配，则需要使用其名称直接调用它：

```
def create
  @article = Article.new(params[:article][:content])
  @article.category_id = params[:article][:category_id]
  if @article.save
    redirect_to([:admin,@article])
  else
    render 'new'
  end

end 
```

在这种情况下，批量分配漏洞似乎很小，因此保留它可能是可以的。您要避免的是暴露任何用户可能通过发送任意表单 POST 恶意设置模型属性（例如 user.admin 标志）的属性。

# signal-processing - 如何在matlab脚本中生成相关图？

> ID：15992654
> 
> 赞同：1
> 
> 时间：2013-04-13T20:38:23.623
> 
> 标签：signal-processing, time-series, matlab, correlation

我一直在使用 Matlab 的时间序列工具箱[tstool](http://www.mathworks.com/help/matlab/ref/tstool.html)来计算两个时间序列之间的相关性，这非常有效，并且给了我非常丰富的图表。

我需要做的是为大量向量生成这样的相关图，因此在脚本中，我读过`tstool`使用该`xcorr`函数但我还没有找到如何使用它来产生类似于 tstool 的结果。

有没有办法查看在 tstool GUI 中生成相关图的脚本？

或者一种从脚本中调用 ts 工具的方法，例如：

```
ts = new tstool;
ts.corrplot(A,B) 
```

或者其他一些生成 tstool 之类的相关图的方法，我对脚本中的滞后比例特别感兴趣？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:38:35.053

这是你要找的吗？

你可以使用[`plotmatrix()`](http://www.mathworks.co.uk/help/matlab/ref/plotmatrix.html)：

![在此处输入图像描述](https://i.stack.imgur.com/UGsbW.png)

或者，如果您有计量经济学工具箱，则[`corrplot()`](http://www.mathworks.co.uk/help/econ/corrplot.html)：

![在此处输入图像描述](https://i.stack.imgur.com/oZ0VM.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:39:22.527

据此：[_](http://www.mathworks.com/help/matlab/data_analysis/time-series-tools.html#brenq06-46)

> **互相关算法**：在计算两个向量值时间序列 x 和 y 的互相关时，时间序列工具使用一种算法，该算法在功能上等同于`xcorr`使用“偏置”选项调用 Signal Processing Toolbox™ 函数，在时间序列均值已被删除。然而，与 xcorr 不同的是，时间序列工具中的互相关估计也适用于矩阵值时间序列 X 和 Y，它计算所有组合的 X(:,i) 与 Y(:,j) 的互相关列 i 和 j。请注意，时间序列工具实际上并不使用 xcorr 代码，而是在这些受限假设下工作的简化版本。

这应该有效：

```
%# random signal
y1 = cumsum(rand(1000,1)-0.5);

%# autocorrelation
maxlag = length(y1);   %# set a max lag value here
[c,lags] = xcorr(detrend(y1), maxlag, 'biased');

%# plot
plot(lags,c), xlabel('lags'), ylabel('autocorrelation') 
```

![自相关](https://i.stack.imgur.com/eqFI9.png)

请注意，结果可能与时间序列对象图有点不同（取决于使用的时间单位）

# java - 比较 if 语句中的两个字符串

> ID：15992656
> 
> 赞同：0
> 
> 时间：2013-04-13T20:38:49.847
> 
> 标签：java

我有以下代码：

```
String tmp = "cif";
String control = tmp.substring(1);

if(control == "if") {

append = "if( ";

} 
```

然而，尽管控制是“如果”，测试仍然会失败。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T20:40:35.397

`==`比较对象引用，而`.equals()`比较实际值

```
if(control.equals("if") {
   append = "if( ";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T20:40:02.337

对于字符串比较使用 `equals()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T20:41:30.093

"==" 运算符将比较两个字符串的内存地址，而不是它们的值。你需要使用`equals()`. 在你的情况下，做类似的事情`"if".equals(control);`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T20:51:08.507

```
String tmp = "cif";
String control = tmp.substring(1);

if(control.equals("if")) {
   append = "if( ";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T20:43:17.280

您不能通过 == 运算符比较字符串，因为字符串是对象。

作为对象，它确实为它们提供了额外的功能，在它们的类中拥有各种方法。一种可能派上用场的方法是 equals() 方法。

因此，您需要的代码是：

```
String tmp = "cif";
String control = tmp.substring(1);

if("if".equals(control) {

... 
```

# .net - 反编译 DLL 时缺少名称

> ID：15992658
> 
> 赞同：2
> 
> 时间：2013-04-13T20:38:59.793
> 
> 标签：.net

我有一个 DLL 文件，我无法使用 .NET Reflector 和 JetBrains dotPeek 完全反编译。

基本上所有字段都缺少它们的名称，例如：

```
private int ;
private string ;
private bool ; 
```

dll被混淆了吗？或者这些名称可以在运行时生成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T23:49:59.327

CLI 标准，即说明哪些字符是有效符号的标准，具有*非常*灵活的规则。必然如此，它描述了许多语言可以针对的 VM。标识符中哪些字符有效的规则是语言实现细节，因此将它们设置得太严格会使将此类语言移植到 CLR 变得困难。

工具利用了这种灵活性。C# 和 VB.NET 都这样做，它们生成带有类似字符的怪异名称，`$`并`<`确保它们为迭代器和 lambda 表达式之类的东西自动生成的名称永远不会与程序员选择的标识符发生冲突。

混淆器利用了这一点。STX 和 ENQ 等字符是 ASCII 控制码，值小于 0x20 的码。优点是许多程序根本无法显示它们，因为大多数字体没有该字符代码的字形。

您几乎可以肯定违反了该程序的许可条款。“不要逆向工程”条款是大多数许可证中的样板。软件供应商永远不会遇到混淆然后不包含该条款的麻烦。

# algorithm - 其中 k <=4 在 O(|V|) 时间内找到每个 k 元组

> ID：15992660
> 
> 赞同：0
> 
> 时间：2013-04-13T20:39:22.300
> 
> 标签：algorithm, runtime, clique-problem

这是我的问题的上下文：

我有一个家庭作业问题：描述顶点大小的线性时间算法（即 O(|V|)），以确定图中是否存在所有顶点的最大度数为 3 的最大团。我知道有一个多项式时间算法可以做到这一点。我正在努力想出的是一个 O(|V|) 算法来做到这一点。另外，我确实意识到最大的集团可能是 4 号。

这是我一直感到困惑的地方：

在我看来，在某些时候，您需要枚举所有大小为 4 的 k 元组。但是如何在 O(|V|) 时间内完成呢？

另外值得注意的是，我曾尝试使用动态编程来解决这个问题，但我看不到如何在线性时间内做到这一点。

答案，想法，建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:04:07.177

在 O(|V|) 时间内找到每个 k 元组是不可能的，因为所需的输出大于您想要实现的复杂度。但实际上，找到一个最大集团并不需要你找到所有的 k 元组。您必须考虑的唯一 k 元组是形成某个顶点（包括顶点本身）邻域的 k 元组。

# php - Laravel4 库类的错误方法调用

> ID：15992668
> 
> 赞同：0
> 
> 时间：2013-04-13T20:40:24.853
> 
> 标签：php, laravel, laravel-4

我试着打电话

```
$log =  Log::render(); 
```

但我得到的只是

```
BadMethodCallException: Method [render] does not exist. 
```

我的 /app/libraries 目录中有一个 Log.php，其中包含方法 render。在调用 Log 的渲染方法之前，我调用了一个名为 Map 的类的渲染方法。这是同一件事，但日志不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:45:32.520

Laravel 有自己的[Log](http://four.laravel.com/docs/errors#logging)类，它很可能在你的 log 类之前被拾取和使用。尝试[命名](http://uk1.php.net/manual/en/language.namespaces.php)您的 Log 类，然后改为引用命名空间类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:46:28.013

我相当确定它正在 Laravel 的[`Log`](http://four.laravel.com/docs/errors#logging)类中寻找`render`导致错误的方法（因为该方法不存在）。

您应该将您的类命名为不同的名称，或者删除`app/config/app.php`Laravel 日志中的命名空间别名。

# javascript - 互联网掉线时未调用getJSON的失败事件

> ID：15992669
> 
> 赞同：0
> 
> 时间：2013-04-13T20:40:27.900
> 
> 标签：javascript, jquery, json, internet-explorer, cross-domain-policy

我在两台计算机上 24/7 运行一个网页。一台计算机正在运行`IE8`，另一台正在运行`IE9`。在这个网页上是一个运行`$.getJSON`以检索`cross-domain`JSON 对象的 javascript 计时器。在正常情况下`$.getJSON`可以完美运行，但是其中一台计算机上的 Internet 连接可能会暂时中断。由于我正在使用`$.getJSON`检索网页的新内容，因此如果互联网暂时中断，将显示旧内容。

我的问题是，如果在调用'时互联网出现故障，我认为`$.getJSON`'事件会触发。在这种情况下，将设置一个新的计时器来尝试在 X 分钟内检索（它永远不会停止尝试）。在测试这个时，我禁用了我的互联网连接，但事件中的代码没有触发。`fail``$.getJSON``JSON``fail`

在没有网络连接的情况下会`fail`不会被调用？如果是这样，您会建议什么来防止我的 JavaScript 在互联网出现故障时永久停止？

（我查看的一种方法是在 JSON 调用之前检查 Internet 连接，但是我读过`window.navigator.onLine`的是不可靠的，我找不到任何其他解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:48:01.860

`getJSON`只是`ajax`已经设置了一些值的简写。并且`ajax`有一个`timeout`选项。这可能是最可靠的选择（但显然不会立即响应网络故障）。我个人会将它与您可以找到的用于确定网络状态的任何检查结合起来。

```
$.ajax({
    dataType: "json",
    url: url,
    data: data,
    success: success,
    timeout: 10000 // 10 seconds
}); 
```

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# backbone.js - Backbone.js .destroy 传递额外的参数？

> ID：15992675
> 
> 赞同：8
> 
> 时间：2013-04-13T20:40:54.890
> 
> 标签：backbone.js

当 .destroy'ing 模型时，我需要向我的 Rails 应用程序传递一个附加参数。我已经阅读了一些关于如何做到这一点的帖子，但是我的 Rails 应用程序仍然无法识别它。有什么建议么？参数是`program_id`

```
var thisDeal = new WhiteDeals.Models.EditorDeal({ id: dealID }); 
thisDeal.destroy({headers: { program_id: dealProgram.id } }) 
```

这是服务器日志。如您所见，program_id 参数未显示：

```
Started DELETE "/editor_deals/46" for 127.0.0.1 at 2013-04-13 13:26:32 -0700
Processing by DashboardController#deal_destroy as JSON
Parameters: {"id"=>"46"} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-13T20:59:44.633

您作为参数传递给的对象`destroy`最终将作为[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)调用的设置参数结束。

因此，如果您需要发送额外的数据，您需要使用`data`属性：

```
var thisDeal = new WhiteDeals.Models.EditorDeal({ id: dealID }); 
thisDeal.destroy({data: { program_id: dealProgram.id }, processData: true}) 
```

# java - 在 iframe 中显示内容时，仅在 IE 中发生的神秘错误

> ID：15992676
> 
> 赞同：0
> 
> 时间：2013-04-13T20:40:58.670
> 
> 标签：java, internet-explorer, web-applications, iframe, wicket

我知道下面的错误看起来有点晦涩难懂，但我认为有人可以拥有绕过它的钥匙。

我正在使用 httpunit 登录到一个网站，再次使用 httpunit 导航到某个页面，最后，从一个链接中，我获得了我想要在我自己的 Web 应用程序的 iframe 中显示的页面的 URL。（我已获得第 3 方的许可，这不是问题）。

我正在使用 wicket 6。我以以下方式显示 iframe：

```
RedirectPage page = new RedirectPage ( link );
InlineFrame frame = new InlineFrame ("myiframe", page ); 
```

我对检票口有点陌生，所以这可能不是最好的方法。

它适用于除 IE 10 之外的所有浏览器（Opera、Chrome、Firefox）（之前的版本没有尝试过，只有 10 个）。其中 iframe 中显示以下错误：

> Logi 调试器跟踪报告处理您的请求时出现错误。错误是：当 AuthenticationSource="AuthSession" 时，必须设置会话变量 "rdUserName"。

我知道此错误是由第三方 Web 应用程序显示的，并且可能不一定与任何已知的软件错误消息匹配，但我正在寻找一些可能的解决方案/黑客可能使其工作，或者至少是这里发生的事情的线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:19:46.290

我找到了答案：事实证明，IE 正在从我的 iframe 的 URL 中删除参数。最后就是这么简单。

# windows - 遵循安装说明后，Windows 上的 Docpad 无法运行

> ID：15992678
> 
> 赞同：0
> 
> 时间：2013-04-13T20:41:08.207
> 
> 标签：windows, node.js, docpad

我在让 Docpad 在 Windows 上运行时遇到问题。

我按照这里的建议做了以下操作：http: [//docpad.org/docs/install](http://docpad.org/docs/install)

1.  安装了最新版本的 Node (.10.4)
2.  npm install -g docpad@6.30
3.  然后在一个空目录中输入“docpad run”

它只是转储节点帮助消息：

```
Usage: node [options] [ -e script | script.js ] [arguments] 
   node debug script.js [arguments] 
```

（ETC）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:49:14.077

我不是专家，但会尽力提供帮助。从您的 github 评论中，听起来您对 docpad 和 node 很有经验，并且可能刚刚开始在 Windows 平台上进行测试。

运行 Windows 8，Node .10.4，npm 1.2.18，Docpad 6.30.3，我今天早上刚刚在空目录中测试过，它很顺利。

首先，我一直在使用`npm install -g docpad`而不是指定版本。

您是否成功使用 express 和`npm install -g express`and `express testapp`？我已经使用它来帮助诊断它是 docpad 问题还是与节点/路径/环境变量相关的问题（或者只是将 express 混合到等式中）。

至于环境，您的路径是否包括节点`C:\Progra~1\nodejs`和 git 可执行文件`C:\Progra~2\Git\bin`？

对于一些节点模块构建任务，我发现他们需要包含在[Visual Studio Express 2012 for Windows 8](http://msdn.microsoft.com/en-us/windows/apps/br229516.aspx)或您需要的任何版本中的 Windows 构建工具。

我希望你让它工作。

# javascript - 在 Windows 应用商店应用程序中支持 jQuery

> ID：15992683
> 
> 赞同：0
> 
> 时间：2013-04-13T20:41:19.397
> 
> 标签：javascript, jquery, windows-8, windows-store-apps

这是我的 default.html 文件

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>app1</title>

<!-- WinJS references -->
<link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.1.0/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

<!-- app1 references -->
<link href="/css/default.css" rel="stylesheet" />
<script src="/js/default.js"></script>
<script src="/js/jquery.js"></script>

</head>
<body>
<button id="buttonYouWantToClick">Button</button>
<div id="result"></div>

<p>Content goes here</p>
</body>
</html> 
```

和 default.js 文件。我把`jquery`代码放在`app.start()`函数之前。

```
 ...
    $(document).ready(function () {
        $('#buttonYouWantToClick').click(function () {
            $('#result').html('jQuery works!');
        });
    });
    app.start();
})(); 
```

我也试过之后`args.setPromise(WinJS.UI.processAll());`

```
(function () {
"use strict";

WinJS.Binding.optimizeBindingReferences = true;

var app = WinJS.Application;
var activation = Windows.ApplicationModel.Activation;

app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
        if (args.detail.previousExecutionState !==   activation.ApplicationExecutionState.terminated) {
            // TODO: This application has been newly launched. Initialize
            // your application here.
        } else {
            // TODO: This application has been reactivated from suspension.
            // Restore application state here.
        }
        args.setPromise(WinJS.UI.processAll());
        $(document).ready(function () {
            $('#buttonYouWantToClick').click(function () {
                $('#result').html('jQuery works!');
            });
        });

    }
};
app.oncheckpoint = function (args) {
    // TODO: This application is about to be suspended. Save any state
    // that needs to persist across suspensions here. You might use the
    // WinJS.Application.sessionState object, which is automatically
    // saved and restored across suspension. If you need to complete an
    // asynchronous operation before your application is suspended, call
    // args.setPromise().
};

app.start();
})(); 
```

在两种情况下不起作用。我得到同样的错误

SCRIPT5009：ms-appx://a8fcf58a-3cda-4e8c-ae43-733030e738e2/js/default.js 0x800a1391 第 38 行第 5 列未处理的异常 - JavaScript 运行时错误：'$' 未定义文件：default.js，行：38，列：5 HTML1300：发生导航。文件：default.html

APPHOST9623：应用程序无法解析 ms-appx://a8fcf58a-3cda-4e8c-ae43-733030e738e2/js/jquery.js，因为此错误：RESOURCE_NOT_FOUND。Visual Studio 当前未附加到支持脚本诊断的脚本调试目标。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:24:25.550

jQuery 工作正常（一些规定），但我将根据您发布的错误假设您在磁盘上添加了文件但没有将其添加到项目中。它不在你的包中，因此找不到它，所以任何 jQuery 调用都会失败，

单击“解决方案资源管理器”以“显示所有文件”并右键单击它并包含在您的项目中，重新构建并再次运行。

我在这里使用了这个特定版本没有问题：

[https://github.com/appendto/jquery-win8](https://github.com/appendto/jquery-win8)

我建议密切关注 2.0，但如果您想要发布版本，请尝试一下。

我还看到有些人在文本文件不是 utf-8 编码时出错（您可以打开它并选择“另存为”，然后选择向下插入符号以编码保存，但我不相信在这里成为一个问题，只是提供它作为参考）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:32:40.733

从 2.0 版开始，jQuery 可以在 Windows 应用商店应用程序中使用，正如这里的其他人所指出的那样。我刚刚通过从[http://jquery.com/download/](http://jquery.com/download/)下载 jQuery 2.0并将其放入一个新应用程序中确认了这一点：

```
<link href="/css/default.css" rel="stylesheet" />
<script src="/js/default.js"></script>
<script src="js/jquery-git2.js"></script> 
```

除了以下小的变化`default.js`：

```
app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
        if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
            $("p").html("App Launched");
        } else {
            $("p").html("App Reactivated from Suspension");
        }
        args.setPromise(WinJS.UI.processAll());
    }
}; 
```

这没有任何问题。确保将代码放在`onactivated`处理程序中。否则，当此代码运行时，jQuery 可能还不可用。

很可能您下载了一个错误的 jQuery 副本，或者您没有将它正确地包含到您的应用程序中。请按照以下步骤操作：

1.  [从http://jquery.com/download/](http://jquery.com/download/)下载 jQuery
2.  在您的项目中，右键单击`/js`目录并`Add / Existing Item`
3.  将 jQuery 文件`/js`拖放到`default.js`引用之后
4.  `app.onactivated`在回调中添加 jQuery 代码（参见上面的代码）

# sharepoint - 如何不发布我的 SharePoint 更改？

> ID：15992685
> 
> 赞同：0
> 
> 时间：2013-04-13T20:41:21.693
> 
> 标签：sharepoint

我是 SharePoint 的新手。

我使用“编辑页面”修改了一个生产页面，并弄乱了页面的布局。数据仍然完好无损，但格式不正确。页面状态为：“已签出并可编辑。发布开始日期：立即”。我不想发布页面。

每次我返回该页面时，即使在我关闭浏览器并打开新浏览器后，它也会显示相同的状态。

我不想发布我的更改。有没有办法终止我的会话和更改，所以我可以让有更多工作经验的人向我展示进行更改的正确方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:46:06.813

您在这里有几个选择。大多数项目（包括 SharePoint 中的页面）都只是存储为列表项目或库项目，并且可能会撤销更改

1.  签出项目时
2.  如果您启用了版本控制

如果您找到您的页面库，您将拥有最多的选项，这将在“所有站点内容”列表中可见 (~/_layouts/viewlsts.aspx)；[http://sharepointserver.com/siteurl/_layouts/viewlsts.aspx](http://sharepointserver.com/siteurl/_layouts/viewlsts.aspx)。

在最常见的情况下，它将位于此处 (~/SitePages/Forms/AllPages.aspx) [http://sharepointserver.com/siteurl/SitePages/Forms/AllPages.aspx](http://sharepointserver.com/siteurl/SitePages/Forms/AllPages.aspx)。

**放弃签出**

请注意我选择的项目（页面）和功能区菜单中的“放弃签出”。

![在此处输入图像描述](https://i.stack.imgur.com/aervB.png)

**版本**

检查项目的版本历史记录，恢复您想要的任何存储版本。

![在此处输入图像描述](https://i.stack.imgur.com/aLOeK.png)

如果这些选项都不存在，那么您就没有运气了。可能有内容备份，但我想说在这种情况下手动恢复页面会更容易。

# ruby-on-rails - 操作超时 - connect(2) (Errno::ETIMEDOUT)

> ID：15992689
> 
> 赞同：4
> 
> 时间：2013-04-13T20:41:36.733
> 
> 标签：ruby-on-rails, deployment, heroku

我正在尝试在 heroku 上部署我的 rails 应用程序。我使用了命令

> heroku 运行 rake db:migrate

我收到以下错误

> 运行`rake db:migrate`连接到终端...起来，运行.2846！
> Heroku 客户端内部错误。！在以下位置搜索帮助： [https](https://help.heroku.com) ://help.heroku.com ！或报告错误： [https ://github.com/heroku/heroku/issues/new](https://github.com/heroku/heroku/issues/new)
> 
> ```
> Error:       Operation timed out - connect(2) (Errno::ETIMEDOUT) 
> ```

我昨天尝试了相同的命令，它运行良好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-22T21:11:45.453

我在这里找到了答案：[http](http://www.orhancanceylan.com/heroku-run-command-operation-timed-out/) ://www.orhancanceylan.com/heroku-run-command-operation-timed-out/ 您的互联网提供商阻止了端口：5000，但您仍然可以部署。

```
heroku run:detached rake db:migrate 
```

# gcc - 使用 gcc 链接到使用 Homebrew 安装的动态库？

> ID：15992690
> 
> 赞同：6
> 
> 时间：2013-04-13T20:41:38.843
> 
> 标签：gcc, compiler-construction, graphviz, homebrew

我正在尝试使用 GCC 4.2.1 编译一个程序，该程序需要一个在 Mac OS X (10.8.3) 上随 Homebrew 一起安装的库。这是一个使用 gvc.h 的简单 C 程序，gvc.h 是 graphviz 附带的一个库。文件夹 /usr/local/Cellar/graphviz/2.28.0/lib 包含 libgvc.dylib 和 libgvc.6.dylib，但是当我尝试

```
gcc -L/usr/local/Cellar/graphviz/2.28.0/lib -lgvc simple.c 
```

我得到错误

```
simple.c:1:17: error: gvc.h: No such file or directory 
```

我怀疑有一个简单的解决方法，但我尝试过的 gcc 选项组合没有奏效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T09:09:30.240

您已经指定了 lib 对象的路径，但没有指定需要包含的头文件的路径。您的编译命令需要是这样的：

```
gcc -I/usr/local/Cellar/graphviz/2.28.0/include  -L/usr/local/Cellar/graphviz/2.28.0/lib -lgvc simple.c 
```

（我假设 -I/usr/.../2.28.0/include 是您可以找到 gvc.h 的位置；如果您不确定，请使用`locate *gvc.h`查找路径。）

另请注意，某些版本的 gcc 使用源文件来确定实际链接的 lib 文件，因此您可能需要在链接路径/文件**之前指定 .c 文件：**

```
gcc -I/usr/local/Cellar/graphviz/2.28.0/include simple.c -L/usr/local/Cellar/graphviz/2.28.0/lib -lgvc
                                                ^^^^^^^^ 
```

# php - 嵌入表格列的图标

> ID：15992696
> 
> 赞同：0
> 
> 时间：2013-04-13T20:42:29.223
> 
> 标签：php, html

我有一张桌子，我想在编辑列上放一个 .png 图像，但图像不可见，而是在看到单词编辑时我想看到一个图标图像进行编辑这是我的代码

```
echo '<td><b><font color="#663300"><a href="edit.php?id=' . $row['id'] . '">Edit</a><img src="images/glyphicons_016_bin.png" /></font></b></td>'; 
```

有什么办法可以让它可见吗？或者有什么办法吗？一种更好的方法，我将非常感谢提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:46:30.837

您可以使用 CSS`background-image`属性

```
a.class_name {
   background-image: url(../whatever.png);
   height: 20px;
   width: 20px;
   display: inline-block;
   background-position: /* If Required */;
} 
```

您也可以简单地尝试一下，只要确保图像路径正确即可

```
<a href="#"><img src="" /></a> 
```

> 注意：`<font>`标签已弃用

# android - Failed to load map. Could not contact Google servers

> ID：15992702
> 
> 赞同：0
> 
> 时间：2013-04-13T20:42:57.027
> 
> 标签：android, google-maps, android-maps

I'm currently making an app for a class. My partner and I are both using separate android tablets and when I upload my application from my computer onto my tablet and go to the map, it works. When my partner uploads the application from his computer to his tablet, the map screen shows up blank. I then uploaded the application from my laptop to his tablet and the map showed up just fine. What is the problem here? Is there something going on with my friends laptop?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:48:25.033

The problem is that you have generated a map API key (in xml layout) for your computer's debug certificate, not your partner's. Your source code has one key for one computer, but you have 2 computers with 2 different debug certificates.

I had this problem on my two computers and solved it by copying android's debug keystore from one computer (where it's working) to the other one - it's .android\debug.keystore (or similar) in your user directory.

# opencv - 使用 OpenCV 检测不同的身体部位

> ID：15992709
> 
> 赞同：0
> 
> 时间：2013-04-13T20:43:41.557
> 
> 标签：opencv, image-processing, video-processing

我正在尝试找到不同的身体部位（主要是上半身部位），例如手、胸部等。我想知道 OpenCV 是否有任何可以提供帮助的内置方法。如果该方法可以突出整个上半身，那将是最好的。我还试图从电影序列中删除该人并保存他以供进一步处理。我会很感激任何帮助，因为我没有必要的训练数据来训练我自己的分类器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T23:23:24.007

我没有很多这方面的经验，但我正在研究这样的事情并遇到了这些论文和项目：

1.  [2D 关节人体姿态估计](http://groups.inf.ed.ac.uk/calvin/articulated_human_pose_estimation_code/)
2.  [Deva Ramanan 的基于零件的模型，用于寻找人和估计他们的姿势](http://www.ics.uci.edu/~dramanan/papers/people_chapter.pdf)

我试过第一个，它提供 Matlab 代码，但检测需要相当长的时间，可能不适合实时检测。不过对于图像序列应该很方便。

Deva 的章节没有走多远，但 OpenCV 已经准备好了[HoGDescriptor](http://docs.opencv.org/modules/gpu/doc/object_detection.html)。

# php - php基础知识中的Json解码

> ID：15992717
> 
> 赞同：2
> 
> 时间：2013-04-13T20:44:02.767
> 
> 标签：php, json, decode

我正在尝试在 php 中学习 json。这是我的 ElasticSearch 查询的 json 结果。

```
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : null,
    "hits" : [ {
      "_index" : "xenforo",
      "_type" : "post",
      "_id" : "1816069",
      "_score" : null,
      "sort" : [ 1365037907 ]
    } ]
  }
} 
```

我假设我的 php 代码看起来像这样：

```
$myData = json_decode($result);

foreach($myData->hits as $var) {
   $post_id[] = $var->_id;
} 
```

几个小时以来一直在寻找答案，我当然感谢任何帮助。谢谢你。

编辑：这是答案：

```
foreach($myData->hits->hits as $var) {
   $post_id[] = $var->_id;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:57:36.733

`->hits`如果你看一下你的 JSON 结构，你就是个矮人......

```
{
    "hits" : {
        "hits" : [ {
            "_id" : "1816069", 
```

* * *

```
$myData = json_decode($result);

foreach($myData->hits->hits as $hit) {
    $post_id[] = $hit->_id;
} 
```

# java - 初学者：JButton/Gridlayout（类似于扫雷）

> ID：15992724
> 
> 赞同：1
> 
> 时间：2013-04-13T20:45:04.877
> 
> 标签：java, swing, jbutton, grid-layout, minesweeper

我是 Java 的初学者，最终我想为我正在为高级项目制作的机器人创建代码。我计划让机器人以指定的模式建立多米诺骨牌，然后将其击倒。我首先需要编写一个程序，允许我选择要放置在网格上的多米诺骨牌。然后我计划让程序为 Arduino 打印一个新程序。

作为测试和学习，我想用 JButtons 制作一个 20x40 的网格。然后，我想单击几个 Jbutton，然后将 Jbutton 值添加到新数组中。前任。我单击第 1、5、30 和 799 个按钮。然后程序会将它们添加到一个新数组 where`array[0]=1`等`array[2]=5;`。

我花了很多时间反复试验并在网上寻找这段代码：现在的问题是它似乎正在跳过 Buttongrid 方法（？）。如果我将方法设为 public static void main (String [] args){，则动作监听器不起作用。

再说一次，我才刚刚开始，所以如果有很多事情是错误的，我不会感到惊讶。请看看它并帮助我找出我必须解决的问题。谢谢

```
import java.awt.GridLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Arrays;
public class ButtonGrid extends JFrame implements ActionListener  {
static int clicked[]=new int[800];  
static JButton button[]=new JButton[800];
static int x;
static int count=0;
int value;
ActionListener listen;
    public  ButtonGrid() { 
        JFrame frame= new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
        GridLayout grid=new GridLayout(20,40);
        frame.setLayout(grid);
    //fill clicked with 0s////////////////////////////////////
            for (int c=0;c<=10;c++){
        clicked[c]=0;}
            for(x=0;x<800;x++){  
           button[x]= new JButton();
           button[x].setActionCommand(Integer.toString(x));
           frame.add(button[x]);
           button[x].addActionListener(this);
            }}
            public void actionPerformed (ActionEvent e){

            while(count<11){
                int newvalue=value;
                 value=Integer.parseInt( e.getActionCommand());  
                 if(value!=newvalue){
                    clicked[count]=this.value;
                    count=count+1;
                    System.out.println("Found");
                 }
                 else{
                     newvalue=value;
                     System.out.println("Looking...");}}
            }   public static void main(String [] args){
                        ButtonGrid b=new ButtonGrid();
                        if (count>10){
                        for (int t=0;t<=11;t++){
                            System.out.println(clicked[t]);
                                }
                            }
                        }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:47:11.633

这是因为您没有在主类中调用 ButtonGrid 框架，如下所示：

```
 public static void main(String[] args) {
        System.out.println("this prints and no window pops up. it skipped       the grid/frame code");
        ButtonGrid b = new ButtonGrid();
    } 
```

# php - 致命错误：在 WP 中添加帖子时内存不足

> ID：15992725
> 
> 赞同：10
> 
> 时间：2013-04-13T20:45:09.240
> 
> 标签：php, wordpress, apache

我收到了这个讨厌的错误`Fatal error: Out of memory (allocated 18087936) (tried to allocate 77824 bytes)`。奇怪的是，它是 17,25 mb（已分配），它试图分配 76 kb。内存限制为 128MB，如您所见，它甚至还没有接近。VPS 在那一刻获得了约 400mb 的免费内存。它仅在我发布某些内容时发生，而不是一直发生。我觉得很奇怪，不知道是什么原因造成的。如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T12:08:06.067

错误说内存限制是 18M 而不是 128M。这意味着某处 memory_limit 设置为不同于 128M 的值（本地 php.ini 或应用程序本身，因为 PHP 可以在运行时覆盖此设置）。

我建议您首先创建一个名为（比如说）phpinfo.php 的文件，其中包含以下内容：

```
<?php
phpinfo();
?> 
```

并将其放置在您的脚本运行的地方。然后使用浏览器访问该文件并查找实际的 memory_limit 值。如果“全局”和“本地”值仍然显示 128M，那么可能在您的代码中的某处，有一个“ini_set("memory_limit", $value);" 打电话或类似的东西。否则，如果显示 18M，请寻找其他可以设置的地方：

*   检查您的 wp-config.php 文件
*   检查任何本地 php.ini 文件（查看 phpinfo.php 页面以查看实际加载的 php.ini 文件的位置）
*   检查包含此类指令的任何 .htaccess 文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T10:06:46.987

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T10:05:29.800

**希望这会有所帮助，因为我遇到了同样的问题：**

您遇到了*WordPress 自身内存限制的限制*，**而不是**您的 PHP 内存限制。Wordpress 实现了这个限制，以[防止编写不佳的脚本关闭整个 PHP 解释器](http://hakre.wordpress.com/2010/08/17/mysteries-about-the-wordpress-memory-limit/)。不幸的是，正如您所注意到的，它相当简单。

我发现解决此问题的最简单方法是从 Wordpress 插件存储库安装[Change Memory Limit插件。](http://wordpress.org/extend/plugins/change-memory-limit/)它允许您在不手动修改任何 WP 文件的情况下解决问题。

该插件的 64M 默认值可能适合您。

或者，如果您不想信任第三方插件，请将以下行添加到`wp-config.php`：

```
define('WP_MEMORY_LIMIT', '64M'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:15:18.940

我不确定这会导致错误，但值得检查。

许多最无法追踪的可悲的内存不足错误是由以下原因引起的：

1) 用户定义的异常处理程序，导致异常因此递归。

2) 上述 + 试图获取引发异常的对象的类信息，并且类信息测试导致自动加载尝试，其中自动加载抛出另一个异常并因此递归。

您是否做过与 WP 错误处理或自动加载冲突的事情？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T13:59:40.643

我在我所有的 Wordpress 网站上安装了[alexrabe](http://profiles.wordpress.org/alexrabe/)[的 wp-memory-usage](http://wordpress.org/extend/plugins/wp-memory-usage/)插件。

这个插件可以帮助您查看 Wordpress 在您的 PHP 内存使用方面所看到的情况。其他方法可能会向您显示服务器上的 PHP 设置，但是当您越接近浏览器中的渲染页面时，这些设置通常会被各种技术覆盖。

设置您的最大内存 -> 打开您喜欢的文本编辑器并创建一个名为 php.ini 的文件；在文件中包含以下行：

`memory_limit = 256M`

将 php.ini 的副本放置在您的 Wordpress 根目录中。我还将副本放在：/wp-admin；/wp-内容；和 /wp-包括。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T09:59:30.833

鉴于您的 phpinfo() 脚本返回了正确的内存使用值，这显然是在 Wordpress 中的某个地方设置的，因此会覆盖 Apache 提供的值，因此使用 .htaccess 来应用它仍然不起作用。
此链接（[http://codex.wordpress.org/Editing_wp-config.php#Increasing_memory_allocated_to_PHP](http://codex.wordpress.org/Editing_wp-config.php#Increasing_memory_allocated_to_PHP)）表明 Wordpress 默认进行自己的内存管理，因此在 wp-config 中设置 ('WP_MEMORY_LIMIT', '256M')。 php 是合乎逻辑的。

如果您对托管您网站的服务器具有 shell 访问权限，我建议您转到 wordpress 安装的 DocumentRoot 并运行以下命令：

```
grep -R "18M" *
grep -R -e '(WP_MAX_MEMORY_LIMIT|WP_MEMORY_LIMIT)' * 
```

这将在您的文件中搜索字符串 18M（您的内存限制值似乎设置为人类可读术语）和 Wordpress 定义的内存限制的配置选项。我怀疑这些命令之一将返回正输出。然后您应该按照建议更改 WP_MEMORY_LIMIT （虽然 256M 可能有点高 - 最初尝试 64M，您不想给自己造成潜在问题）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-21T03:12:54.690

它看起来好像在站点的某个地方，内存限制被覆盖，在代码中进行站点范围的搜索`ini_set('memory_limit'`并查看返回的内容。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-16T14:49:08.640

只是一个帮助我调试这些错误的选项。

如果您有权访问 .htaccess，则可以尝试以下操作：

```
php_value upload_max_filesize 128M
php_value post_max_size 128M
php_value max_execution_time 300
php_value max_input_time 300 
```

如果这没有帮助，你可以试试这个来检查设置：

```
echo 'Max upload size: ' . ini_get('upload_max_filesize') . '<br />';
echo 'Max post size: ' . ini_get('post_max_size') . '<br />';
echo 'Memory limit: ' . ini_get('memory_limit'); 
```

我希望这有效，对我来说确实有效。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-20T13:26:36.990

添加 `define('WP_MEMORY_LIMIT', '256M');`你的 wp-config.php 文件。它是最简单的方法。

# c - for 循环添加先前循环的结果

> ID：15992730
> 
> 赞同：0
> 
> 时间：2013-04-13T20:45:50.600
> 
> 标签：c, arrays, for-loop

我制作了一个计算二维数组频率的程序，我希望它给我每一行的结果（对于每个 i）。但是当我添加for循环`for(i=0;i<S1;i++)`时，它会计算第一行的频率，例如第二行的频率，它将第一行的频率添加到第二行，依此类推。我怎样才能防止它添加频率？有什么建议吗？ ? 谢谢 ：）

编辑：使我的问题更清楚：如果我添加数字 {10 20 30 30 30 30 20 30 10}

> 我应该期望收到以下结果：

```
1st row    0-9        0
          10-19       1
          20-29       1
          30-39       1   from the row {10 20 30}
2nd row   0-9         0
          10-19       0
          20-29       0
          30-39       3    from the row {30 30 30}
 3rd row  0-9          0
          10-19        1
          20-29        1
          30-39        1  from the row {20 30 10} 
```

> 我没有得到这些结果

```
 1st row 

       0-9        0
      10-19       1
      20-29       1
      30-39       1   
    from the row {10 20 30}
    2nd row   0-9         0
              10-19       2
              20-29       2
              30-39       2    from the row {30 30 30}
     3rd row  0-9          0
              10-19        3
              20-29        3
              30-39        3 from the row {20 30 10}

 #include <stdio.h>
 #define   S1      3                                      
 #define   COUNTER 11   
 #define   S2      3              

 int main() {                                                           
   float A[S1][S2];

   int i, j, k, low, high;                              
   int group[COUNTER] = {0,0,0,0,0,0,0,0,0,0,0};  

   for (i = 0; i < S1; i++) {                
     for (j=0; j < S2; j++) {                                               
        scanf("%f", &A[i][j]);                             
     }                                                       
   }  

   for(i=0; i < S1; i++) {
     for(j=0; j < S2; j++) {
       ++ group[(int)(A[0][j] + 0.5 ) / 10];
     }

     printf("\n");                                           
     printf("GROUP     RANGE     FREQUENCY\n\n") ;          
     for(k = 0; k < COUNTER; k++) {                                                       
       low = k * 10;                                      
       if(k == 10)                                          
         high = 100;                                       
       else                                                 
         high = low + 9;                                   
       printf("%2d    %3d to %3d       %d\n",             
               k+1, low, high, group[k]);                 
     }
   }             
   getch();                                                
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:19:00.847

在进入下一行时，您需要重新初始化数组以包​​含全零。也许这对你有用：

```
for(i=0; i < S1; i++) {
   memset(group, 0, sizeof(group));
   for(j=0; j < S2; j++) {
      ++ group[(int)(A[0][j] + 0.5 ) / 10];
      // The rest of your code here. 
```

此外，如果您试图获取每行的频率，您不应该查看存储在的值`A[i][j]`，而不是`A[0][j]`？

# debugging - 为什么我会收到“存储不可用”。中止命中。与谷歌分析？

> ID：15992734
> 
> 赞同：30
> 
> 时间：2013-04-13T20:46:06.227
> 
> 标签：debugging, google-analytics

我正在使用新的 Google Analytics（分析）跟踪代码进行设置。

```
<script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'MYUACODE', 'MYDOMAIN');
      ga('send', 'pageview', {
          'page': '/setup',
          'title': 'Setup Page'
        });

    </script> 
```

正如 Google 告诉你的那样，我在我的 HEAD 标记中得到了这个显然 MYUACODE 和 MYDOMAIN 是我页面中的真正变量:)

但是，当我使用 Google Chrome 运行它并打开 Google Analytics Debug 扩展时，我收到以下消息：

```
Registered new plugin: "linker"       analytics_debug.js:5
Creating new tracker: t0              analytics_debug.js:5
New visitor. Generating new clientId  analytics_debug.js:5
Storage not available. Aborting hit.  analytics_debug.js:5 
```

它似乎正确启动并开始设置项目，但随后它说**存储不可用**，谷歌似乎没有任何东西。

现在，如果我删除所有这些代码并返回到原始的 Google 跟踪代码，它工作正常，我似乎无法让这种新样式正确触发。

有什么想法吗？帮助？提前致谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-17T22:03:46.210

我有同样的错误信息。这似乎与无法正确设置cookie有关。就我而言，它发生在我测试 localhost 并且我没有将我的 cookieDomain 设置为 none 时。

您可能想尝试以下类似的方法，看看它是否有效。我不确定传递您的域的方法是否有效。

```
ga('create', 'MYUACODE', {
  'cookieDomain': 'none'
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-28T18:59:07.743

谷歌分析过去常常在方法中使用硬编码的主机名生成跟踪代码`create`，这可能会在测试不同的主机名时导致此错误。现在，当 GA 生成它使用的跟踪代码时

```
ga('create', 'UA-XXXXXXXX-X', 'auto'); 
```

它会自动确定 cookieDomain 值。将此方法调用中的硬编码主机名更改为`'auto'`已在生成旧跟踪代码的多个站点上为我解决了此问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-01T09:49:36.463

实际上，提供的大多数选项都可以使用。但是，它们都应该应用于不同的场景。请参阅[GoogleA 的 Domains & Cookies - Web Tracking (analytics.js)](https://developers.google.com/analytics/devguides/collection/analyticsjs/domains)以获取完整列表。

我处理我客户的情况有点不同，以处理语言变体，其中一个是在一个单独的域上。在下面，您将看到跟踪器创建调用后跟的域：

1.  en.client.en, ga('create', 'UA-XXXXXXXX-X', 'client.en');
2.  fr.client.com, ga('create', 'UA-XXXXXXXX-X', 'client.com');
3.  de.client.com, ga('create', 'UA-XXXXXXXX-X', 'client.com');
4.  xx.client.com, ga('create', 'UA-XXXXXXXX-X', 'client.com');

我没有使用的原因

> ga('创建', 'UA-XXXXXXXX-X', '自动')

域参数或“无”是因为该配置不太可能跟踪子域。我的客户可能希望按国家/语言查看转换。因此，该帐户将具有分组视图（如上配置），以及按子域（国家/语言）过滤的单个视图。在 Google 文档中，它在自动 Cookie 域配置下明确指出：

> Analytics.js 将无法在 co.uk 上写入 cookie，但会在 example.co.uk 上成功。由于 cookie 已成功写入更高级别的域，因此 www.example.co.uk 将被跳过。

并在本地主机上设置 cookie（其中 cookieDomain 设置为“无”）：

> 注意：这将设置一个仅限主机的 cookie 域。cookie 不会传播到任何子域。但是，Internet Explorer 不遵循这种模式。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T09:13:11.553

玩“MYDOMAIN”为我解决了问题

```
ga('create', 'MYUACODE', 'MYDOMAIN'); 
```

我完全删除了“MYDOMAIN”并留下了

```
ga('create', 'MYUACODE'); 
```

重新启动页面，然后`, 'MYDOMAIN'`再次添加 n 并且这有效

我第二次遇到这个问题时，它解决了将“MYDOMAIN”更改为我正在加载页面的域的问题（从生产域到我的托管域）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-23T21:25:17.887

另一种选择是将域添加到您的主机文件，然后使用它而不是 localhost。我的看起来像：

`127.0.0.1 localhost mytest.com`

使用 mytest.com 而不是 localhost，您将能够检查您的信息，并且您不必向 ga create 方法调用添加任何选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-10T19:14:29.413

我认为问题在于 chrome 中的另一个扩展。使用空配置文件 (--user-data-dir=/tmp/foo) 为我解决了这个问题。

# c# - 为什么在尝试使用 WCF 在 2 个应用程序之间进行通信时出现异常（TCP 错误代码 10061）？

> ID：15992739
> 
> 赞同：2
> 
> 时间：2013-04-13T20:46:18.023
> 
> 标签：c#, .net, wcf, ipc

我正在尝试使用 WCF 在 2 个正在运行的 Windows 应用程序之间设置 IPC。我想首先说我知道还有其他（更好的？）方法可以实现这个解决方案。但是，由于一些预先存在的设计考虑/约束，我必须使用： - netTcpBinding - DuplexChannelFactory<> 来支持双向通信

所有应用程序、服务等都驻留在同一台机器上，因为我们将把所有东西都安装在运行 MS Windows 的单个专用硬件上。

所以示意图看起来像这样 WPFApp1（包含 ReportingFacilityInterface 定义）将通知作为单独的回调返回到 WPFApp2 ^ | | V ReportingFacilityInterfaceProxy ^ | | V WPFApp2（需要在 WPF1 ReportingFacilityInterface 对象上调用公开的方法）

我已经创建了我的 WCF“服务”类和合同。我正在使用代理 dll 来促进通信。

以下是事件的顺序：

* * *

1）WPFApp1启动并实例化暴露的服务类的一个实例

```
ReportingFacilityInterface = new ReportingFacility.ReportingFacilityInterface(); 
```

这开始很好。

2) WPFApp2 启动并初始化代理对象的实例

```
reportingFacilityProxy = new ReportingFacilityInterfaceProxy.ReportingFacilityProxy(); 
```

这会实例化代理对象，从而导致调用：

```
reportingFacilityInterface = DuplexChannelFactory<IReportingFacilityInterface>.CreateChannel(objContext, "RPIEndPointConfiguration"); 
```

这似乎运行并成功返回。

3) WPFApp2 在对象上调用 a (通过代理)

```
 reportingFacilityInterface.Initialize(configuration); 
```

我收到以下详细信息的异常：

无法连接到 net.tcp://localhost:8732/ReportingFacility。连接尝试持续了 00:00:02.1931255 的时间跨度。TCP错误代码10061：无法建立连接，因为目标机器主动拒绝它 127.0.0.1:8732

我使用 CurrPorts 应用程序检查了我当前的端口使用情况，并注意到端口 #8732 不在我机器上当前活动/使用的端口列表中。

因为我在 WCF 的世界里很绿，所以我有点难过。正如我上面提到的，所有这些都在同一个（专用）Windows 7 硬件上运行，因此权限/角色应该不是问题。我想我离这里很近，但我只是错过了一些东西。

谢谢，约翰B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:02:03.713

ID：

1.  验证您的服务器配置以确保服务端点地址
2.  运行服务跟踪查看器工具 ( [SvcTraceViewer.exe](https://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://msdn.microsoft.com/en-us/library/ms732023.aspx&ei=AsdpUeKJNMi84ASXqIH4AQ&usg=AFQjCNHT5aIcNhLK82vtA4o40IllzeVfTw&sig2=J8S9kJd2DXRDuMtSAaxMcg&bvm=bv.45175338,d.bGE) )
3.  添加一些 basicHttpBinding 端点以确保您可以从浏览器访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T17:45:48.793

我通过转到服务并启动 Net.tcp 侦听器适配器解决了同样的问题。

此外，您可以在此处找到更多解决方案 [http://blogs.ajithbhat.com/2010/06/tcp-error-code-10061-no-connection.html](http://blogs.ajithbhat.com/2010/06/tcp-error-code-10061-no-connection.html)

# c# - 调用 GC.SuppressFinalize(this) 时是否有不使用“this”的用例？

> ID：15992740
> 
> 赞同：18
> 
> 时间：2013-04-13T20:46:19.040
> 
> 标签：c#, design-patterns, garbage-collection

我只是在实现 Dispose 模式，当我刚刚键入该`GC.SuppressFinalize(this)`行时，我想知道是否有使用除`this`作为方法参数之外的其他东西的用例。

这是典型的模式：

```
public void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(this);  // right here
} 
```

`GC.SuppressFinalize()`用其他东西打电话有意义`this`吗？

```
public void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(foo);  // should this ever happen?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:12:07.337

根据 MSDN：

[http://msdn.microsoft.com/en-us/library/system.gc.suppressfinalize.aspx](http://msdn.microsoft.com/en-us/library/system.gc.suppressfinalize.aspx)

实际上，您的示例： GC.SuppressFinalize(foo) 可能会在某些场景中使用，但不会在常见处置模式的场景中使用。

例如，您可能希望为许多对象编写某种处置管理模式，而不是在您的对象中实现通用处置模式。另一种选择是，如果您希望一个对象保持抑制状态，然后再声明它？从来没有这样做过..但这是可能的。

所以可能是的......可能不会发生 - 可能永远不会。

# java - 如何在自动生成 getter 和 setter 时强制 Eclipse 使用 this 关键字？

> ID：15992741
> 
> 赞同：4
> 
> 时间：2013-04-13T20:46:22.087
> 
> 标签：java, eclipse, refactoring, this

在Eclipse中，有没有办法强制使用`this`在自动生成 getter 和 setter 时强制使用关键字来引用类成员？

例如，我想要这个由 Eclipse 自动生成的 getter，

```
public int getId() {
    return id;
} 
```

重写

```
public int getId() {
    return this.id;
} 
```

那有可能吗？如果是，如何？

## 回答：

（答案由[维塔利提供](https://stackoverflow.com/users/2236253/vitaly)提供，但要说清楚：）

在顶部菜单中，单击**Window > Preferences**。
然后，在**Preferences**窗口中，单击**Java > Code Style**
您将看到一个复选框，其中包含*Qualify all generated field access with 'this'。*勾选此复选框。

奇迹般有效。

（注意`'this.'`必须是`'this'.`。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:53:54.017

打开 `Source -> Generate Getters and Setters`

底部有一个链接`Code Templates`，点击它。

选择 - 您将更改项目设置或工作区设置。

在`Configure generated code and comments`，展开`Code`并选择`Getter Body`，在模式中添加`this.`。

而已。

注意：您可以`Code Templates`从项目属性或工作区首选项中打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:52:18.590

在 window->preferences 下调整你的代码模板。有几个不同的页面有代码模板。您会在其中一个中找到 getter 和 setter。

或者，当您从源菜单生成 getter 和 setter 时，对话框会包含指向您可以单击的代码模板的链接。

# java - AtomicLong 的 incrementAndGet 方法如何在内部工作？

> ID：15992745
> 
> 赞同：6
> 
> 时间：2013-04-13T20:46:55.453
> 
> 标签：java, atomic, compare-and-swap, atomic-long

我在我的多线程代码中使用`incrementAndGet`方法`AtomicLong`来测量我们的一些客户端代码的性能。

```
@Override
public void run() {

   long start = System.nanoTime();

   attributes = client.getAttributes(columnsList);

   long end = System.nanoTime() - start;

   final AtomicLong before = select.putIfAbsent(end / 1000000L, new AtomicLong(1L));
        if (before != null) {
            before.incrementAndGet();
        }
} 
```

在上面的代码中，我试图测量多少时间-

`client.getAttributes(columnsList);`

正在服用。

据我所知，`incrementAndGet`方法将以原子方式将当前值增加一。**这意味着每个线程可能会等待其他线程增加该值。我对吗？**意思是会被屏蔽？

这是否会影响我测量任何方法的性能的方式？这意味着它还会为该测量增加一些额外的时间吗？

为什么我问这个是因为我正在尝试对我们的大多数客户端代码和服务器端代码进行基准测试，如果我需要测量每种方法所花费的时间，那么我就是这样做 -

无论我想测量什么代码，我通常将下面的行放在该方法的正上方

`long start = System.nanoTime();`

这两行采用相同的方法但不同`ConcurrentHashMap`

```
long end = System.nanoTime() - start;

final AtomicLong before = select.putIfAbsent(end / 1000000L, new AtomicLong(1L));
    if (before != null) {
        before.incrementAndGet();
    } 
```

因此，如果我正在使用`incrementAndGet`方法并且如果它为我的性能测量增加了额外的时间，那么我可能没有得到准确的结果？

**更新：-**

这是下面的方法，我`F3`在`incrementAndGet`in上做的时候得到的`eclipse`。

所以这里有一个同步块。这意味着每个线程都会在这里等待其他线程。这是一个阻塞呼叫。

```
/**
 * Atomically increments by one the current value.
 *
 * @return the updated value
 */
public final synchronized long incrementAndGet() {                          //IBM-perf_AtomicLong
   ++value;                                                                 //IBM-perf_AtomicLong
   return value;                                                            //IBM-perf_AtomicLong
} 
```

啊。我刚刚检查了我的 JVM，`IBM JVM`与`SUN JVM`. 因为我在一家公司工作，我无法改变这个特殊的事情。

**那么有什么方法可以避免这种基于锁的解决方案来衡量任何方法的性能/基准？**请记住，我正在运行 IBM JVM。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T00:29:41.413

别担心。除非您正在编写诸如外汇平台之类的东西，否则微小的延迟将无关紧要。为了给你一个想法，我们会以纳秒的数量级说话，而在应用程序代码中，我们通常以毫秒为单位说话。此外，JVM 的锁得到了显着改善。如果争用较少（这是常态），基于锁的解决方案和非阻塞解决方案之间的性能差异将很小。

令人惊讶的是，IBM JVM 为 AtomicLong 使用了锁。我认为所有主要实现都使用非阻塞 CAS。这是使用 CAS 的常见实现：

```
/**
 * Atomically increments by one the current value.
 *
 * @return the updated value
 */
public final long incrementAndGet() {
    for (;;) {
        long current = get();
        long next = current + 1;
        if (compareAndSet(current, next))
            return next;
    }
} 
```

*对后续评论的回应：*
作为一个非常粗略的经验法则，如果您当前的端到端响应时间（或响应时间要求）超过 30 毫秒，我真的不会担心这一点，因为无论花费多少时间增加 long 都会在纳秒范围内。我几乎可以肯定，您会找到其他可以优化的地方，从而为您带来更多改进（例如毫秒）。

但是，您可以只复制 AtomicLong 的 Sun JVM 实现以使用非阻塞实现来代替，因为 IBM VM 也应该具有 CAS 操作。如果您期望中度到高度争用（大量线程），这可能会导致显着改进。如果你不这样做，我认为锁定解决方案的性能几乎与当前的改进锁定实现相同（如果我记得的话，可以从 JDK6 获得）。

事实上，如果您有非常高的争用，锁可以比非阻塞解决方案执行得更好。因此，理想情况下，您必须使用两个实现并比较结果...这就是为什么我认为您不应该打扰的原因，因为在那个时候，您可以在其他地方进行一些性能改进，从而使您的文学性超过 1 mil 倍于您可以通过解决此处获得的改进。

# python - 如何改变一个int的值，并恢复和使用新的值？

> ID：15992746
> 
> 赞同：0
> 
> 时间：2013-04-13T20:46:59.057
> 
> 标签：python

在尝试在乒乓球比赛中为球创造一些运动时，我遇到了一个最烦人的问题。x 和 y 坐标的值不想改变（因为缺少更好的词）。也许这是由于 python 中字符串的不可变特性，或者我对 Python 处理变量的方式有误解。任何帮助将是最受欢迎的:)

```
x_coordinate = 100
y_coordinate = 100

NORTH_EAST = [x_coordinate + 1, y_coordinate - 1]
NORTH_WEST = [x_coordinate - 1, y_coordinate - 1]
SOUTH_EAST = [x_coordinate + 1, y_coordinate + 1]
SOUTH_WEST = [x_coordinate - 1, y_coordinate + 1]
direction = NORTH_EAST

while True:

    print (direction)
    x_coordinate = direction[0]
    y_coordinate = direction[1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:53:07.483

这里的问题是，当你说

```
NORTH_EAST = [x_coordinate + 1, y_coordinate - 1] 
```

您构建了一个包含两个值的列表，这些值是在当时计算和存储的。它们不会根据值的`x_coordinate`变化而更新`y_coordinate`。

您将需要重新计算每个循环上的值以获得您期望的行为。最简单的方法是使用函数：

```
directions = {
    "north east": (+1, -1),
    "north west": (-1, -1),
    "south east": (+1, +1),
    "south west": (-1, +1),
}

def new_position(old, direction):
    x, y = old
    dx, dy = directions[direction]
    return x + dx, y + dy

position = 100, 100
direction = "north east"

while True:
    print(position)
    position = new_position(position, direction) 
```

请注意，如果存在链接的数据片段，最好将它们存储在数据结构中。在这里，我使用一个元组将`x`和`y`值存储在一起，并使用一个字典来存储方向数据。这意味着代码中的重复更少。

# python - Python列表，记住第一项，即使列表已被删除

> ID：15992749
> 
> 赞同：-1
> 
> 时间：2013-04-13T20:47:11.293
> 
> 标签：python, list, robot

我正在参加机器人比赛，我有一个简单的要求。

这是我所拥有的简化模拟：

```
import random

dumping_list=[]
while True:
    markers = [#a list that could range in length from many to no elements]

    if len(markers) != 0:
        #do some stuff

    elif len(markers) == 0:
        dumping_list.append(markers[0]) 
```

现在我的问题是，如何使 elif 中的标记 [0] 上次包含某些内容时引用标记 [0]，我该怎么做？

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:50:44.170

我不确定我是否理解您要在这里完成的工作，但我认为这可能会有所帮助

```
import random
dumping_list=[]
last_makers = None

while True:
    markers = [#a list that could range in length from many to no elements]

    if len(markers) != 0:
        #do some stuff
        last_maker = makers[0]

    elif len(markers) == 0:
        if last_makers:
            dumping_list.append(last_makers) 
```

# javascript - 在 JSDoc 中为内联匿名函数定义参数

> ID：15992750
> 
> 赞同：4
> 
> 时间：2013-04-13T20:47:18.073
> 
> 标签：javascript, annotations, phpstorm, jsdoc

如果我将函数定义为变量对象，那么 PhpStorm 将显示`item`参数的自动完成。

```
 /**
         * @param {Rules.FolderGroupItem} item
         **/
        var forEach = function(item) {
            if(item.type == 'label')
            {
                str += this.renderLabel(item.paramType);
            }
            if(item.type == 'input')
            {
                str += this.renderInput(item.paramType);
            }
        };
        _.each(items,forEach,this); 
```

如果我为函数编写与内联参数相同的内容`_.each()`。然后它不起作用。

```
 _.each(items,forEach,
            /**
             * @param {Rules.FolderGroupItem} item
             **/
            function(item) 
        {
            if(item.type == 'label')
            {
                str += this.renderLabel(item.paramType);
            }
            if(item.type == 'input')
            {
                str += this.renderInput(item.paramType);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T20:49:42.427

我找到了答案。这里是。

```
 _.each(items,forEach,function(/*Rules.FolderGroupItem*/item) 
    {
        if(item.type == 'label')
        {
            str += this.renderLabel(item.paramType);
        }
        if(item.type == 'input')
        {
            str += this.renderInput(item.paramType);
        }
    }); 
```

# jquery - 使用 jquery 从下拉菜单中更改 html 标签的背景颜色

> ID：15992754
> 
> 赞同：2
> 
> 时间：2013-04-13T20:47:41.643
> 
> 标签：jquery, css, drop-down-menu, html-select

所以我有这个选择标签

```
<select id="patient_color_id" name="patient[color_id]">
 <option selected="selected" value="1">blue</option>
 <option value="2">yellow</option>
 <option value="3">green</option>
 <option value="4">red</option>
</select> 
```

值 0...4 来自数据库，因此我无法将它们更改为十六进制颜色值。无论如何，在我的 jquery 文件中，我有

```
$("#patient_color_id").change(function(){
if($(this).val() == "1"){
    $(".general-info").css('background-color', "#00FFFF");
}
if($(this).val() == "2"){
    $(".general-info").css('background-color', "#F0FFFF");
}
if($(this).val() == "3"){
    $(".general-info").css('background-color', "#0FFFFF");
}
if($(this).val() == "4"){
    $(".general-info").css('background-color', "#FFFFFF");
}
}); 
```

因此，当我从下拉菜单中选择一种颜色时，general-info div 的背景颜色应该会发生变化，但什么也没有发生，我不知道出了什么问题。

附言。我正在使用rails，但我不相信这与此有关。我使用的所有其他脚本都工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T21:21:04.190

我将您的代码复制到 jsFiddle 并添加到 generalInfo div 中，您的代码似乎工作正常。我要做的唯一观察是，您的某些颜色值显示为白色，可能是颜色的无效十六进制值，因此可能会误导您。如果有帮助，您可以在此处查看 jsFiddle。我建议您进行包装，但这并不重要，因为您必须参加更改事件。

这是 jsFiddle [http://jsfiddle.net/danieljordan13/G7v9r/](http://jsfiddle.net/danieljordan13/G7v9r/)

我唯一改变的是我知道工作的随机颜色值。

```
$("#patient_color_id").change(function(){
if($(this).val() == "1"){
    $(".general-info").css('background-color', "#ddbbFF");
}
if($(this).val() == "2"){
    $(".general-info").css('background-color', "#aaddFF");
}
if($(this).val() == "3"){
    $(".general-info").css('background-color', "#cceeFF");
}
if($(this).val() == "4"){
    $(".general-info").css('background-color', "#bbbbFF");
}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T21:14:39.057

AFAIK 代码看起来是正确的，您可能是在渲染 dom 之前添加了侦听器。要检查是否是这种情况，您可以尝试查看以下代码是否有效。

如果这可行，请尝试在 dom 渲染完成后添加侦听器。

```
$("#patient_color_id").on("change", function(){
if($(this).val() == "1"){
alert("1");
$(".general-info").css('background-color', "#00FFFF");
}
if($(this).val() == "2"){
alert("2");
$(".general-info").css('background-color', "#F0FFFF");
}
if($(this).val() == "3"){
alert("3");
$(".general-info").css('background-color', "#0FFFFF");
}
if($(this).val() == "4"){
alert("4");
$(".general-info").css('background-color', "#FFFFFF");
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T21:18:32.270

**微妙的颜色太微妙**

实际上，jQuery 很好，颜色代码有点太微妙了，可能在某些显示器上看不到：

尝试：

```
$("#patient_color_id").change(function(){
if($(this).val() == "1"){
    $(".general-info").css('background-color', "#0000FF");
}
if($(this).val() == "2"){
    $(".general-info").css('background-color', "#FFFF00");
}
if($(this).val() == "3"){
    $(".general-info").css('background-color', "#00FF00");
}
if($(this).val() == "4"){
    $(".general-info").css('background-color', "#FF0000");
}
    alert("color: "+$(this).val());
    alert($(".general-info").css('background-color'));
}); 
```

小提琴：http: [//jsfiddle.net/audetwebdesign/yazhk/](http://jsfiddle.net/audetwebdesign/yazhk/)

警报仅用于诊断目的。红鲱鱼，很常见。

# html - 谷歌浏览器字体别名问题

> ID：15992755
> 
> 赞同：3
> 
> 时间：2013-04-13T20:47:51.933
> 
> 标签：html, css, google-chrome, firefox, fonts

是否有任何解决方案可以防止字体在 Chrome 中显示但在 Firefox 中不显示时出现混叠？

最好是一个基于站点的解决方案，它可以正确地显示给所有访问者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:49:09.913

你试过这个吗？

```
-webkit-text-stroke: 1px transparent; 
```

或者您也可以使用`text-shadow`或在上面添加颜色`stroke`。

```
text-shadow: 0.0em 0.0em 0.07em rgba(0,0,0,0.5) 
```

# python - Tkinter GUI 顶层

> ID：15992756
> 
> 赞同：2
> 
> 时间：2013-04-13T20:47:55.467
> 
> 标签：python, user-interface, tkinter

```
from tkinter import*
import tkinter as tk

def topLevel():
    top=Toplevel()
    top.title("Listbox test")
    notiLabel = Label(text ="----test----", font=('Times', 20))
    notiLabel.pack()
    notiLabel.grid(row=0,column=0, sticky=W)

    noti = Label(text ="----test----", font=('Times', 18))
    noti.pack()
    noti.grid(row=1,column=1, sticky=W)

    f = Label(text ="------test-----")
    f.pack()
    f.grid(row=3,column=0, sticky=W)
    fa = Label()
    fa.pack()
    fa.grid(row=3,column=1, sticky=W)

root=tk.Tk()
root.title("Listbox test")

s = tk.Label(text =">>>test<<<", font=(('Times'),20))
s.pack()
s.grid(row=2,column=0)

N = tk.Label(text =">>>test<<<")
N.pack()
N.grid(row=3,column=0)

LB = tk.Listbox(width=50, selectmode =SINGLE)
LB.pack()
LB.grid(row=4, column=0)

TI = tk.Button(text="b1", width =50, command=topLevel)
TI.pack()
TI.grid(row=5, column=0)

root.mainloop() 
```

程序运行时，点击命令按钮b1后，顶层窗口的信息和标签仍然打印在下层窗口，如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T21:19:30.770

您必须指定在哪个框架（`Toplevel()`）上添加新小部件：

```
from Tkinter import *

def topLevel():
    top=Toplevel()
    top.title("Listbox test")
    notiLabel = Label(top, text ="----test----", font=('Times', 20))
    notiLabel.grid(row=0,column=0, sticky=W)

    noti = Label(top, text ="----test----", font=('Times', 18))
    noti.grid(row=1,column=1, sticky=W)

    f = Label(top, text ="------test-----") # note the 'top' parameter
    # 'top' was your Toplevel widget
    f.grid(row=3,column=0, sticky=W)
    fa = Label(top)
    fa.grid(row=3,column=1, sticky=W)

root=Tk()
root.title("Listbox test")

s = Label(text =">>>test<<<", font=(('Times'),20))
s.grid(row=2,column=0)

N = Label(text =">>>test<<<")
N.grid(row=3,column=0)

LB = Listbox(width=50, selectmode =SINGLE)
LB.grid(row=4, column=0)

TI = Button(text="b1", width =50, command=topLevel)
TI.grid(row=5, column=0)

root.mainloop() 
```

我也摆脱了`.pack()`and的用法`.grid()`，只使用`.grid()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T21:18:52.920

这是我使用[此参考](http://www.daniweb.com/software-development/python/threads/39554/how-to-opening-a-new-window-on-clicking-menu-item)解决的方法：

```
top=Toplevel()
notiLabel = Label(top, text ="----test----", font=('Times', 20)) 
```

代替：

```
top=Toplevel()
notiLabel = Label(text ="----test----", font=('Times', 20)) 
```

我必须在小部件中声明“顶部”并在根小部件中声明根。

# php - PHP 自动加载和 WordPress

> ID：15992761
> 
> 赞同：0
> 
> 时间：2013-04-13T20:48:23.890
> 
> 标签：php, wordpress, wordpress-theming, autoloader

我在 PHP 中构建以在 WordPress 中使用的自动加载器类有一个奇怪的问题。

核心概念是无论您是子主题、父主题还是插件，它都应该加载类。它应该根据名称找到类（对应于文件夹结构：`CoreTheme_Folder_SubFolder_ClassName(){}`=`CoreTheme/Folder/SubFolder/ClassName.php`

`require_once()`这在子主题和父主题中运行良好，在子主题中我包含父主题 function.php 并从那里加载自动加载器，以便我可以在子主题中调用父主题类，而不是在每个地方都有一堆。

当我在插件中执行相同的概念时，问题就来了。Autoloader 是一个框架的一部分（想想 zend），您将其包含在主题的根目录中。如果该主题处于活动状态并且我在插件中设置了自动加载器，它会发出“这个自动加载器有两个实例，你在做什么？” 如果我停用所述主题然后在插件中实例化自动加载器，它无法找到我使用梨命名标准创建的任何类。

因此，对于那些更深入地了解 WordPress 和 PHP 的人，我的问题是，我如何创建我的自动加载器，以便无论天气如何，您的主题、子主题或插件它总能找到您正在寻找的类。

下面的代码是 autloader 类。如果你拿出：`plugin_dir_path(__FILE__)`那么会发生的是自动加载器将加载主题中的任何类和相应的子主题。

```
class AisisCore_Loader_AutoLoader{

    protected static $_instance;

    protected static $_directories;

    public function get_instance(){
        if(null == self::$_instance){
            self::$_instance = new self();
        }

        self::$_directories = array(
            get_template_directory(),
            get_stylesheet_directory(),
            plugin_dir_path(__FILE__),
        );

        return self::$_instance;
    }

    public function reset_instance(){
        self::$_instance = null;
    }

    public function register_auto_loader(){
        spl_autoload_register(array($this, 'load_class'));
    }

    public function load_class($class){
        $path = str_replace('_', '/', $class);
        foreach(self::$_directories as $directories){
            if(file_exists($directories . '/' . $path . '.php')){
                require_once($directories . '/' . $path . '.php');
            }
        }
    }   
} 
```

该类通过以下方式在您的父functions.php中实例化：

```
// Load the autoloader.
require_once(get_template_directory() . '/AisisCore/Loader/AutoLoader.php');

// Setup the autoloader.
$auto_loader = AisisCore_Loader_AutoLoader::get_instance();
$auto_loader->register_auto_loader(); 
```

然后在子主题中，您所要做的就是：

```
require_once(TEMPLATEPATH . '/functions.php'); 
```

这允许自动加载器在子主题和父主题中工作。主要问题是，当您创建插件时，您将框架的副本放在插件的 Name 根目录中：`plugins/myplugin/AisisCore/`并且在您的主题（父级）中放置一个`Themes/MyTheme/AisisCore`

所以我明白它为什么会发疯——有点，有什么办法可以绕过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T03:29:12.670

我想你只想加载一个类，所以`return;`像这样使用

```
public function load_class($class){
    $path = str_replace('_', '/', $class);
    foreach(self::$_directories as $directories){
        if(file_exists($directories . '/' . $path . '.php')){
            require_once($directories . '/' . $path . '.php');
            return;
        }
    }
} 
```

否则你将加载多个类。看看这个： http: [//php.net/return](http://php.net/return)

# mysql - 按最高和最低排序

> ID：15992763
> 
> 赞同：0
> 
> 时间：2013-04-13T20:48:27.390
> 
> 标签：mysql, sql, select, sql-order-by

我的问题与 Select 有关，我想按 ASC 和 DESC 排序字段，请看示例：

我有表格产品，我要订购的字段称为价格，所以，我知道我可以这样做：

```
SELECT Price FROM Products ORDER BY Price ASC. 
```

但我想看看最高价格和最低价格，因为我知道我能做到的最高价格：

```
 SELECT Price FROM Products ORDER BY Price ASC limit 1; 
```

那么，如何在 1 中选择最高值和最低值？

我还想选择价值最高的产品名称和最低的产品名称。

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:52:21.300

`MIN`简单和`MAX`聚合函数的使用怎么样

```
SELECT MAX(Price) as MaxPrice, MIN(Price) as MinPrice FROM Products 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T21:21:44.133

这将显示所有具有最高价格或最低价格的产品：

```
SELECT Products.*
FROM Products
WHERE Price = (SELECT MAX(Price) FROM Products)
      OR Price = (SELECT MIN(Price) FROM Products) 
```

或者，也许你想要这样的东西：

```
SELECT
  Products.*,
  m.mx As Highest,
  m.mn As Lowest,
  CASE WHEN Products.Price = m.mx THEN 'Max' ELSE 'Min' END As Is_Max_or_Min
FROM
  Products INNER JOIN (
    SELECT MAX(Price) mx, MIN(Price) mn
    FROM Products
  ) m ON Products.Price IN (m.mx, m.mn) 
```

如果您希望它们位于同一行，并且只有一种产品具有最高价格，而只有一种产品具有最低价格，则可以使用以下内容：

```
SELECT
  m.Lowest, p1.Name Name_Lowest,
  m.Highest, p2.Name Name_Highest
FROM
  (SELECT MIN(Price) Lowest, MAX(Price) Highest FROM Products) m
  INNER JOIN Products p1 ON m.Lowest = p1.Price
  INNER JOIN Products p2 ON m.Highest = p2.Price
LIMIT 1 
```

或者，如果您只需要更简单的东西，您可以使用这个：

```
(SELECT 'Max' Is_Max_Or_Min, Products.*
 FROM Products ORDER BY Price DESC LIMIT 1)
UNION ALL
(SELECT 'Min', Products.*
 FROM Products ORDER BY Price LIMIT 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T20:49:35.100

`SELECT Price FROM Products ORDER BY Price DESC limit 1;`??

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T20:51:45.440

如果您想同时查看最高和最低价格，请使用以下查询：

```
select highest, lowest from
(
SELECT Price as highest FROM Products ORDER BY Price DESC limit 1;
SELECT Price as lowest FROM Products ORDER BY Price ASC limit 1;
) t 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T20:58:07.467

最简单的方法是：

```
SELECT MIN(Price) LowestPrice, MAX(Price) HighestPrice FROM Products 
```

但在某些情况下，您可能希望使用以下`UNION`语句：

```
(SELECT 'Lowest'  type, Price FROM Products ORDER BY Price ASC  LIMIT 1)
UNION
(SELECT 'Highest' type, Price FROM Products ORDER BY Price DESC LIMIT 1) 
```

# c - 在 R (Windows) 中从 C 创建一个 dll 动态库

> ID：15992767
> 
> 赞同：8
> 
> 时间：2013-04-13T20:48:34.723
> 
> 标签：c, r, dll

我想从 C 源代码创建一个 dll 动态库，以便我可以在 R 中加载和使用它。我现在正在使用

```
R CMD SHLIB foo.c 
```

在 Windows 7 命令行中。但是什么也没发生。没有错误消息，但没有创建 dll 文件。

我所做的有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T23:20:45.530

如果我的问题不是很清楚，我很抱歉。但是我弄清楚了如何使事情正常进行以及可能的错误。希望它对某人有用。以下是步骤：

1.  安装 R（现在最新版本是 3.0.0）。确保将 R bin 文件夹添加到 PATH
2.  [在此处](http://cran.r-project.org/bin/windows/Rtools/)安装最新版本的 Rtools 。确保添加“c:\Rtools\bin;c:\Rtools\gcc-4.6.3\bin;” 到路径
3.  编写你的 C 代码，保存在 foo.c
4.  在 Windows 命令窗口中，键入

    R CMD SHLIB foo.c

那么你应该有一个 foo.dll 文件，然后你可以在 R 中调用它。注意，在 64bits R 下创建的 foo.dll 只能加载到 64bits R。如果你尝试在 32bits R 中加载，你会收到错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T21:46:49.313

你所说的“什么都没发生”到底是什么意思？R 在你的道路上吗？

`R --version`揭示什么？`R CMD config CC`和怎么样`R CMD config CFLAGS`？

最后，如果您安装了 Rcpp（并且您的工具链是正确的，包括 PATH 设置和所有其他设置），那么您可以随时进行操作

```
R> library(Rcpp)
R> cppFunction('double foo(double x) { return std::sqrt(x); }')
R> foo(4)
[1] 2
R> foo(4.2)
[1] 2.04939
R> unclass(foo)
function (x) 
.Primitive(".Call")(<pointer: 0x7f251ba76530>, x)
R> 
```

在这里，我们使用`cppFunction()`（以及 Rcpp 中的一系列技巧）来编译、链接和加载一个简单的（而且非常无用的......）C(++) 函数，它需要一个平方根。

# java - 在 Eclipse 中运行空程序需要大约 10 Mb。为什么？

> ID：15992772
> 
> 赞同：1
> 
> 时间：2013-04-13T20:48:50.220
> 
> 标签：java, memory

在 Java 中，这个程序：

```
public class test {

    public static void main(String[] args) {

        try {
            Thread.sleep(7000);
            System.exit(1);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }

} 
```

当我在 Eclipse 中运行它并检查系统监视器以查看它是否拥有约 10Mb 的内存时，它只是休眠了 7 秒。在没有 Eclipse 的终端中运行程序也需要 10Mb。

这些兆字节是为了什么而保留的？

**Env** : java 版本 "1.7.0_09-icedtea" OpenJDK Runtime Environment (fedora-2.3.3.2.fc17-i386) OpenJDK Server VM (build 23.2-b09, 混合模式)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:52:11.343

该内存用于加载您的程序和其他相关类、Java 运行时、库等。您的程序使用 Thread、String、Exception，它们又使用许多其他类。考虑到这一点，10Mb 确实更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:55:13.627

jvm 内部管理内存。启动应用程序时会加载许多内容。此外，jvm 会抢先从操作系统获取内存，因此在创建新对象时开销较小。

本文涵盖了[jvm](http://www.yourkit.com/docs/kb/sizes.jsp)内存使用的一些方面。

摘录：

分配的内存是JVM分配的内存总量，而使用的内存是实际使用的内存量。

# css - CSS3 相邻兄弟选择器 (+) 不适用于 SASS

> ID：15992774
> 
> 赞同：3
> 
> 时间：2013-04-13T20:49:05.800
> 
> 标签：css, sass

我正在将我当前的 WordPress CSS 文件重写为 SASS。我的目标是出现在 iframe 之后的段落（[在此处阅读](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)）。在我当前的 CSS 文件中，它是这样写的：

```
iframe + p {
background: red;
} 
```

但是对于 SASS，编译时不会输出。我怀疑这与 SASS 的计算能力有关。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T21:46:32.373

您给出的示例是有效的 SCSS。你的问题源于别的东西。

# php - “DELETE FROM”中的 MySQL 语法错误

> ID：15992775
> 
> 赞同：-3
> 
> 时间：2013-04-13T20:49:05.887
> 
> 标签：php, mysql, syntax, sql-delete

好吧，我正在制作一个 PHP 脚本，它找到任何行 WHERE user_id 等于登录用户的 user_id，如果找到与用户具有相同 user_id 的任何行，则将带有她的 user_id 的所有行从**friend_requests** “移动”到新的名为**friend_requestes_notificated的表**

除了将行复制到新表后删除行的代码外，我的脚本中一切正常吗？

* * *

**这就是错误：**

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'DELETE FROM friend_requests WHERE user_id=1' 附近使用正确的语法”

* * *

**代码：**

```
<?php include_once("includes/head.php"); ?>
<?php require_once("includes/connect/connect.php"); ?>
<?php require_once("includes/functions.php"); ?>
<?php require_once("includes/jquery.php"); ?>

<?php function friend_request_notification(){

global $db;
global $userid;

$userid = $_SESSION['userid'];

$query_id_see = "SELECT user_id FROM friend_requests WHERE user_id=\"{$userid}\" ";
$result_set3 = mysql_query($query_id_see, $db)  or die(mysql_error());

$change_table = "INSERT INTO friend_requests_notificated (id, user_id, user_id_requester) SELECT id, user_id, user_id_requester FROM friend_requests WHERE user_id={$userid} DELETE FROM friend_requests WHERE user_id={$userid}";

$change_table2 = mysql_query($change_table) or die(mysql_error());

if ($id_requests = mysql_fetch_array($result_set3)){
}

else

{
}

}

if ($id_requests = mysql_fetch_array($change_table2)){
}

else
{
}

friend_request_notification();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:50:46.040

您需要将插入查询和删除查询分开。你不能同时做这两件事。（我在那里看到一个选择查询。这也需要是它自己的查询）。

```
$insert_table = "INSERT INTO friend_requests_notificated (id, user_id, user_id_requester) SELECT id, user_id, user_id_requester FROM friend_requests WHERE user_id={$userid}";
$change_table2 = mysql_query($insert_table) or die(mysql_error());

$delete_table = "DELETE FROM friend_requests WHERE user_id={$userid}";
$change_table3 = mysql_query($delete_table) or die(mysql_error()); 
```

另外，[请不要`mysql_*`在新代码中使用函数](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[红框](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# string - 超字符串算法

> ID：15992778
> 
> 赞同：0
> 
> 时间：2013-04-13T20:49:15.160
> 
> 标签：string, dynamic-programming

我想知道解决超字符串问题的算法。您可以在[https://www.hackerrank.com/challenges/hyper-strings](https://www.hackerrank.com/challenges/hyper-strings)找到描述。

可以通过动态规划解决吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T18:51:52.327

公共类超字符串 {

//Abubaker Tagelsir

```
private static int n,m,sum=1;
private static void temp(String u,String []d)
{
for(int i=0 ; i<d.length;i++)
{
   if((u.length()+d[i].length())<=m)
   {
       sum++;
       temp(u+d[i],d);
   }
}
}

private static int Input3(String [] d)
{
    sum +=d.length;
    for(int i=0;i<d.length;i++){
    for(int j=0;j<d.length;j++)
    {
    if((d[i].length()+d[j].length())<=m)
    {
        sum++;
        temp(d[i]+d[j],d);
    }
    }      
    }
    return sum;
}

public static void main(String[] args) {  
  Scanner sc = new Scanner(System.in);
  String h = sc.nextLine();
  StringTokenizer tz = new StringTokenizer(h);
  String h1 = tz.nextToken();
  n = Integer.parseInt(h1);
  String h2 = tz.nextToken();
  m = Integer.parseInt(h2);
  //Input2();
    String [] d = new String[n];
    for(int i=0;i<n;i++)
  {
      d[i] = sc.nextLine();
  }
  System.out.println(Input3(d));

} 
```

}

# java - 为什么 Eclipse 不能识别 Java 库？

> ID：15992779
> 
> 赞同：1
> 
> 时间：2013-04-13T20:49:15.207
> 
> 标签：java, eclipse, macos

可能我误解了这个问题，所以我可能问错了问题。我正在使用 Mac OSX 10.8.3，并且正在 eclipse 中创建一个小程序。当我尝试使用`import java.*`where `*`is `awt`, `applet`,`util`等时。

Eclipse 显示错误，基本上表现得好像它无法识别 Java 库。在首选项中，我选择了 Java SE 6 JRE。我尝试将编译器合规级别降低到 1.6，但它似乎没有做任何事情。

对于我导入的一些类，代码是在 Windows 机器上编写的，但我不明白这有什么关系。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:51:59.840

删除导入，然后 Eclipse 应该会检测到您需要的导入没有被导入。然后按`CTRL`++`SHIFT`来`O`组织您的导入，Eclipse 应该会自动检索您需要的每个导入。

此外，你永远不应该导入超过你必须的。如果`import java.*`甚至可以工作（永远不会），那将是一种可怕的做法，因为所有这些库都必须加载到内存中（即使是您不需要的库）。为了节省内存空间，请避免使用`*`with imports（Eclipse 在组织导入时会这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:52:35.437

如果导入，则只导入文件夹`java.*`中的所有类、接口等。`java`要从 utils 中导入类，您必须导入`java.utils.*`. `*`is 不能递归工作。最好只导入您真正需要的类。通常 Eclipse 建议自动生成导入语句。

# java - 使用变量从类中引用方法

> ID：15992783
> 
> 赞同：0
> 
> 时间：2013-04-13T20:49:40.277
> 
> 标签：java

我知道在 Java 中如何引用一个类，如`com.google.googlemaps.exampleClass.exampleMethod()`. `com.google.googlemaps`是否可以使用变量 ( )交换引用的第一部分（在本例中为`Class c`）？

**编辑** 好的，经过一番混淆，我将（尝试）提供一个示例

我们有 Class `A`。我可以添加它的新实例。每个实例都有变量`name`（一个字符串）和`redir`（目前处于混乱状态）。`redir`是应该保存类的引用的变量，所以我可以从这些类中调用特定的方法，`redir`就像`com.google.googlemaps`等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:58:56.797

从你的例子：

```
com.google.googlemaps.exampleClass.exampleMethod() 
```

这`exampleMethod()`是一个静态方法。

如果您有一个带有 Type `Class<com.google.googlemaps.exampleClass>`( `Class c`) 的对象/引用，您可以调用[getMethod](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)来获取该`Method`对象。然后你可以调用[invoke](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)方法来调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:52:54.233

喜欢`c.exampleMethod()`？

是的，像这样

```
import com.google.googlemaps.ExampleClass;
...
ExampleClass c = new ExampleClass();
c.exampleMethod(); 
```

# node.js - 在 Node.JS 中，有什么方法可以让 Array.prototype.sort() 屈服于其他进程？

> ID：15992790
> 
> 赞同：4
> 
> 时间：2013-04-13T20:50:44.023
> 
> 标签：node.js

仅供参考：我已经在使用 Web Workers 进行此操作，并且效果很好，但我只是在探索使用 process.nextTick 可以做什么和不能做什么。

所以我有一个包含一百万个元素的数组，我在 Node.JS 中进行排序。我希望 Node 在执行此操作时能够响应其他请求。

有没有办法让 Array.prototype.sort() 不阻塞其他进程？由于这是一个核心函数，我不能插入任何 process.nextTick()。

我可以手动实现快速排序，但我看不出你如何以连续传递风格有效地做到这一点，这似乎是 process.nextTick() 所必需的。我可以修改一个 for 循环来做到这一点，但 sort() 似乎是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T19:55:22.200

虽然不可能以某种方式使其`Array.prototype.sort`本身以某种方式异步运行，但异步排序绝对是可能的，正如[这个排序演示](http://jphpsf.github.io/setImmediate-shim-demo/)所示，它展示了 setImmediate (shim) 相对于 setTimeout 的速度优势。

不幸的是，源代码似乎没有任何许可证。[在https://github.com/jphpsf/setImmediate-shim-demo](https://github.com/jphpsf/setImmediate-shim-demo)上用于演示的 Github 存储库将Jason Weber 命名为作者。您可能想问他是否要使用（部分）代码。

我认为如果您使用 setImmediate（自 Node 0.10 起可用），单个排序操作将有效地与 I/O 回调交错。对于如此大量的工作，我不推荐 process.nextTick （如果它确实有效，因为有 1000 maxTickDepth 限制）。请参阅[setImmediate vs. nextTick](https://stackoverflow.com/questions/15349733/setimmediate-vs-nexttick)了解一些背景。

使用 setImmediate 而不是简单的“同步”处理总体上肯定会更慢，因此您可以选择在每个“tick”处理一批单独的排序操作以加快处理速度，但代价是 Node 在此期间没有响应。我认为只有通过实验才能找到速度和 I/O 响应能力之间的正确平衡。

一个更简单的选择是更像网络工作者：生成一个子进程并在那里进行排序。您面临的最大问题是将排序的数据传输回您的主进程（大概是为了生成某种输出）。AFAIK 没有什么比 Node.js的可[转移对象更好的了。](http://updates.html5rocks.com/2011/12/Transferable-Objects-Lightning-Fast)缓冲排序后的数组后，您可以将结果流式传输到子进程 stdout 并在主进程中解析数据，或者更简单；使用[子进程消息传递](http://nodejs.org/api/child_process.html#child_process_child_send_message_sendhandle)。

您可能没有空闲的 cpu 核心，因此子进程会占用其他进程的 cpu 时间。为避免排序过程损害您的其他进程，您可能需要为其分配低优先级。使用 Node 本身似乎不可能做到这一点，但您可以尝试使用`nice`，如下所述：[https](https://groups.google.com/forum/#!topic/nodejs/9O-2gLJzmcQ) ://groups.google.com/forum/#!topic/nodejs/9O-2gLJzmcQ 。我没有这方面的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:03:42.033

好吧，我最初认为您可以使用[async.sortBy](https://github.com/caolan/async#sortBy)，但经过仔细检查，它似乎不会像您需要的那样运行。有关类似问题，请参阅[Array.sort 和 Node.js](https://stackoverflow.com/a/15216781/266795)，尽管目前还没有公认的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-19T16:12:29.160

我知道这是一个相当古老的问题，但我遇到了类似的情况，仍然没有找到简单的解决方案。

我修改了一个现有的快速排序并发布了一个包，它定期在此处放弃对事件循环的执行： [https ://www.npmjs.com/package/qsort-async](https://www.npmjs.com/package/qsort-async)

如果您熟悉传统的快速排序，我唯一的修改是对执行分区的初始函数。基本上，该函数仍然在原地修改数组，但现在返回一个承诺。如果它试图在一次迭代中处理太多元素，它会停止执行 eventloop 中的其他事情。（我相信我指定的默认大小是 10000）。

注意：在这里使用 setImmedate 而不是 process.nextTick 或 setTimeout 很重要。nextTick 实际上会将您的执行放在进程 IO 之前，并且您在响应与 IO 相关的其他请求时仍然会遇到问题。setTimeout 太慢了（我相信其他答案之一链接了一个演示）。

注意 2：如果像合并排序这样的东西更符合您的风格，您可以在排序的“合并”功能中执行相同的逻辑。

```
const immediate = require('util').promisify(setImmediate);

async function quickSort(items, compare, left, right, size) {
  let index;
  if (items.length > 1) {
    index = partition(items, compare, left, right);
    if (Math.abs(left - right) > size) {
      await immediate();
    }
    if (left < index - 1) {
      await quickSort(items, compare, left, index - 1, size);
    }
    if (index < right) {
      await quickSort(items, compare, index, right, size);
    }
  }
  return items;
} 
```

完整代码在这里：[https ://github.com/Mudrekh/qsort-async/blob/master/lib/quicksort.js](https://github.com/Mudrekh/qsort-async/blob/master/lib/quicksort.js)

# cocos2d-iphone - Cocos2d粒子系统定位

> ID：15992791
> 
> 赞同：1
> 
> 时间：2013-04-13T20:50:44.533
> 
> 标签：cocos2d-iphone, particles, ccparticlesystem

我正在尝试制作下雨效果。我使用粒子设计器来创建效果。但是在 Cocos2d 中，无论屏幕有多宽，我都需要从屏幕顶部沿 x 轴到处下雨。

```
self.rainParticleSystem = [CCParticleSystemQuad particleWithFile:@"particle-rain.plist"];
    self.rainParticleSystem.positionType = kCCPositionTypeFree;
    self.rainParticleSystem.autoRemoveOnFinish = NO;
    self.rainParticleSystem.position = ccp(self.screenRight*0.5, self.screenTop);
    [self addChild:self.rainParticleSystem]; 
```

如何“拉伸”发射器以使雨水从屏幕上的任何 x 位置落下？现在我只能通过粒子设计器中的发射器位置 X 方差来控制它。我不能使用硬编码的 plist 值，因为我不知道我的屏幕尺寸是多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:07:17.377

`posVar`您可以通过属性以编程方式更改发射器位置变化。试试这样的东西。-

```
self.rainParticleSystem.sourcePosition = ccp(SCREEN_WIDTH / 2, POSITION_Y);
self.rainParticleSystem.posVar = ccp(SCREEN_WIDTH / 2, 0); 
```

# c - 在 C 中对文件进行分段和取消分段

> ID：15992793
> 
> 赞同：0
> 
> 时间：2013-04-13T20:51:04.420
> 
> 标签：c, file, parsing, temporary-files

我想取一个文件（文本或二进制文件）并将其分成一定大小（约 250-500kB）的小块，将片段的顺序随机化，然后将其放入另一个临时碎片文件中。

然后，非碎片化将获取碎片文件，提取碎片，将它们按顺序排列并允许原始文件完好无损。

这对于简单的基于文本的 ASCII 文件非常容易，因为您可以使用 C 库函数（如 sscanf）来格式化/解析信息。一个文件可以有一种格式，然后像

```
(#### <fragment #> <fragment> ...) 
```

但是，我不确定如何对二进制文件执行类似的操作。

我知道一个简单的解决方案是为 <.part1, .part2> 文件之类的片段使用单独的文件，但这有点难看，并且不能很好地扩展到更大的文件。将其存储在一个文件中会好得多。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:12:52.027

使用二进制文件执行此操作是最简单的，也是最快和最可靠的。您的片段文件需要一个简单的段记录，它为您提供原始文件中的偏移量和段的长度。记录可能如下所示：

```
typedef struct _Fragment
{
    unsigned long offset;
    unsigned long length;
} Fragment; 
```

编写文件将如下所示：

```
Fragment fragment;
FILE *outFile;
unsigned long segmentOffset, segmentLength;
char segmentData[MAXSEGMENTLENGTH];

outFile = fopen(fileName, "wb");

while (ReadNextSegment(segmentData, &segmentOffset, &segmentLength))
{
    fragment.offset = segmentOffset;
    fragment.length = segmentLength;

    fwrite(header, sizeof(fragment), 1, outFile);
    fwrite(segmentData, 1, segmentLength, outFile);
}

fclose(outFile); 
```

重新组装文件是通过颠倒过程来完成的。读取每条记录，然后使用 using`Fragment`读取以下数据，然后使用函数 and定位到目标文件中的正确偏移量，然后使用 写入。`fread``fragment.length``fseek``fragment.offset``fwrite`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T22:15:14.857

尝试仅使用二进制数据。在您的碎片文件中，遵循以下结构：

```
OFFSET SIZE  DESCRIPTION
     0    4  BLOCK NUMBER
     4    4  BLOCK SIZE IN BYTES
     8    ?  BLOCK DATA 
```

定义一个头结构：

```
typedef struct hdr
{
    uint32_t number;
    uint32_t size;
} hdr_t; 
```

使用它的代码可能如下所示：

```
void file_append(FILE *f, size_t block, size_t size, const void *data)
{
    hdr_t hdr;
    hdr.number = block;
    hdr.size = size;
    fwrite(&hdr, sizeof(hdr), 1, f);
    fwrite(data, size, 1, f);
} 
```

并读取数据：

```
void file_read_chunk(FILE *f, size_t *block, size_t *size, void **data)
{
    hdr_t hdr;

    fread(&hdr, sizeof(hdr), f);
    *block = hdr.number;
    *size = hdr.size;
    *data = malloc(hdr.size);
    fread(*data, hdr.size, 1, f);
} 
```

# jquery - jQuery Accordion - 打开第一个切片

> ID：15992796
> 
> 赞同：1
> 
> 时间：2013-04-13T20:51:10.770
> 
> 标签：jquery, wordpress

我想在加载时显示这个手风琴的第一个“切片”。即我希望在页面加载时默认打开第一张幻灯片。

我试图将'display：block'添加到ul，但没有运气

```
/* Vertical Accordion Style */
.va-container{
    position:relative;
    margin:40px auto 0 auto;
        top: -47px;
        left: 0px;
        width: 100%;
}         
.va-wrapper{
    width:100%;
    height:100%;
    position:relative;
    overflow:hidden;
    background:#000;
        left: 0px;
}
.va-slice{
    cursor:pointer;
    position:absolute;
    width:100%;
    left:0px;
    overflow:hidden;
}
.va-slice-1{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/Airfreight22.png) no-repeat center center;
}
.va-slice-2{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/Seafreight2.png) no-repeat center center;
}
.va-slice-3{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/Satellite.png) no-repeat center center;
}
.va-slice-4{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/41.jpg) no-repeat center center;
}
.va-slice-5{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/41.jpg) no-repeat center center;
}
.va-slice-6{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/41.jpg) no-repeat center center;
}
.va-slice-7{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/41.jpg) no-repeat center center;
}
.va-slice-color-1{
    background-color:#97c5eb;
}
.va-slice-color-2{
    background-color:#68ace5;
}
.va-slice-color-3{
    background-color:#0072cf;
}
.va-slice-color-4{
    background-color:#0039a6;
}
.va-slice-color-5{
    background-color:#00338e;
}
.va-slice-color-6{
    background-color:#002c76;
}
.va-slice-color-7{
    background-color:#002144;
}
.va-title{
    font-family: 'Open Sans Condensed', sans-serif;
    text-transform:uppercase;
    font-size:40px;
    margin-left:20px;
    color:#fff;
    text-shadow: 0px 0px 1px white;
}
.va-content{
    display:none;
    margin-left:25px;

}
.va-slice p{
    font-size: 22px;
    font-style: italic;
    font-family:Georgia, serif;
}
.va-slice ul{
    margin-top:20px;
}
.va-slice ul li{
    float:left;
    margin:0px 2px;
}
.va-slice ul li a{
    color:#000;
    background:#eede2f;
    padding:3px 6px;
    font-size:14px;
    font-family:'PT Sans', sans-serif;
    text-transform:uppercase;
}
.va-slice ul li a:hover{
    background:#000;
    color:#fff;
    text-shadow:none;
}
.va-nav span{
    width:40px;
    height:25px;
    background:transparent url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/prev.png) no-repeat center center;
    position:absolute;
    top:-35px;
    left:50%;
    margin-left:-20px;
    text-indent:-9000px;
    opacity:0.7;
    cursor:pointer;
    display:none;
    z-index:100;
}
.va-nav span.va-nav-next{
    background-image:url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/next.png);
    top:auto;
    bottom:-35px;
}
.va-nav span:hover{
    opacity:1.0;
}

/* End Additional CSS Styles */

<div class="container">

            <div id="va-accordion" class="va-container">
                <div class="va-nav">
                    <span class="va-nav-prev">Previous</span>
                    <span class="va-nav-next">Next</span>
                </div>
                <div class="va-wrapper">
                    <div class="va-slice va-slice-1">
                        <div class="va-title">Airfreight</div>
                        <div class="va-content">
                            <p>Henry Watson</p>
                            <ul>
                                <li><a href="#">About</a></li>
                                <li><a href="#">Portfolio</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="va-slice va-slice-2">
                        <div class="va-title">Seafreight</div>
                        <div class="va-content">
                            <p>Keith Johnson</p>
                            <ul>
                                <li><a href="#">About</a></li>
                                <li><a href="#">Portfolio</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>  
                    </div>
                    <div class="va-slice va-slice-3">
                        <div class="va-title">Satellite Tracking</div>
                        <div class="va-content">
                            <p>Andrew Alaniz</p>
                            <ul>
                                <li><a href="#">About</a></li>
                                <li><a href="#">Portfolio</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>  
                    </div>
                    <div class="va-slice va-slice-4">
                        <div class="va-title">Guarding</div>
                        <div class="va-content">
                            <p>Ben Freeman</p>
                            <ul>
                                <li><a href="#">About</a></li>
                                <li><a href="#">Portfolio</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>  
                    </div>
                    <div class="va-slice va-slice-5">
                        <div class="va-title">Machine Moving</div>
                        <div class="va-content">
                            <p>Alex Schuman</p>
                            <ul>
                                <li><a href="#">About</a></li>
                                <li><a href="#">Portfolio</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>  
                    </div>
                    <div class="va-slice va-slice-6">
                        <div class="va-title">Investigations</div>
                        <div class="va-content">
                            <p>Maria Wales</p>
                            <ul>
                                <li><a href="#">About</a></li>
                                <li><a href="#">Portfolio</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>  
                    </div>
                    <div class="va-slice va-slice-7">
                        <div class="va-title">Transport</div>
                        <div class="va-content">
                            <p>Paul White</p>
                            <ul>
                                <li><a href="#">About</a></li>
                                <li><a href="#">Portfolio</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>  
                    </div>
                </div>
            </div>

        </div>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script type="text/javascript" src="wp-content/themes/FSI5/jquery.easing.1.3.js"></script>
        <script type="text/javascript" src="wp-content/themes/FSI5/jquery.mousewheel.js"></script>
        <script type="text/javascript" src="wp-content/themes/FSI5/jquery.vaccordion.js"></script>
        <script type="text/javascript">
            $(function() {
                $('#va-accordion').vaccordion({
                    visibleSlices   : 5,
                    expandedHeight  : 250,
                    animOpacity     : 0.1,
                    contentAnimSpeed: 100
                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T21:05:38.527

你在使用 JQuery UI 手风琴吗？如果你是你可以指定参数“active：true”来实例化你的手风琴，它实际上在 JQueryUI 中默认展开。如果您不使用 jQuery UI 手风琴，您是否有不能使用的原因？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T21:21:21.713

我不知道这个插件，所以我没有记录的解决方案。在类似情况下总是对我有用的是：

```
$(".va-slice-1").click() 
```

在初始化手风琴后运行它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T21:02:55.060

`active`在附加手风琴行为时设置选项

```
$( ".selector" ).accordion({ active: 1 }); 
```

[jQuery UI 手风琴文档](http://api.jqueryui.com/accordion/#option-active)

**编辑**

您使用的插件不接受默认选项，它通过 javascript 将 css 高度添加到内联元素。要默认打开切片，可以触发 javascript click 事件。

```
$(document).ready(function() {
  $('.va-slice:first').trigger('click.vaccordion');
}); 
```

或者，尝试`data-expanded`在元素内联上添加属性和默认样式。

```
<div data-expanded="true" class="va-slice va-slice-2" style="top: 0px; height: 350px; opacity: 1;"> 
```

# android - proguard 会删除 android.jar 中未使用的类吗？

> ID：15992799
> 
> 赞同：2
> 
> 时间：2013-04-13T20:51:41.247
> 
> 标签：android, proguard

假设我正在使用 android api 16 开发应用程序，我的应用程序将包含 android.jar。我将从 jar 文件中导入几个类。

我将通过配置 proguard 在发布模式下启用 proguard。proguard 是否也删除了 android.jar 中未使用的类？

编辑：

我的项目的属性文件

android.library.reference.1=../actionbarsherlock

那么在将所有内容打包到 .apk 时，proguard 是否会从我的库项目中删除未使用的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:17:22.170

Proguard 不会从库中删除任何内容。[请参阅Proguard 网站上](http://proguard.sourceforge.net/index.html#manual/introduction.html)的图表和报价。

> ProGuard 需要指定输入 jar 的库 jar（或 war、ears、zip 或目录）。这些本质上是编译代码所需的库。ProGuard 使用它们来重建正确处理所需的类依赖关系。**库 jars 本身始终保持不变。**您仍然应该将它们放在最终应用程序的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:58:46.753

Android.jar 将被引用为库 jar（-libraryjars，请参阅[Proguard 文档](http://proguard.sourceforge.net/index.html#manual/usage.html)），而不是输入 jar。这意味着它无论如何都不会包含在输出 APK 中。毕竟，您不想与您的应用程序一起重新分发 Android 系统库。

# python - 在 SciPy 中调用 convolve2d() 时出现 ComplexWarning，为什么？

> ID：15992800
> 
> 赞同：0
> 
> 时间：2013-04-13T20:51:45.187
> 
> 标签：python, scipy, convolution

当我跑

```
from scipy.signal import convolve2d
convolve2d([[2, 2, 2], [1, 2, 3], [0, 1, 0]], [[0.5], [0.5]], 'valid') 
```

我明白了

```
Warning (from warnings module):
  File "C:\Program Files\Python 2.7\lib\site-packages\scipy\signal\signaltools.py", line 422
    return sigtools._convolve2d(in1, in2, 1, val, bval, fillvalue)
ComplexWarning: Casting complex values to real discards the imaginary part 
```

为什么会出现这种情况，如何正确预防？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:27:58.263

这是在 0.12.0 版中修复的错误。

# java - 在 Eclipse 应用程序上启动时出现问题

> ID：15992802
> 
> 赞同：1
> 
> 时间：2013-04-13T20:51:49.510
> 
> 标签：java, android, launch

我正在尝试为 Android 设备开发自己的应用程序。我正在使用 API Level 13 AVD。我成功地在设备上安装了应用程序，但是当我尝试启动它时，我收到了这些错误：

```
04-13 20:34:44.720: E/AndroidRuntime(566): FATAL EXCEPTION: main
04-13 20:34:44.720: E/AndroidRuntime(566): java.lang.RuntimeException: Unable to instantiate application com.smart.framework.SmartApplication: java.lang.ClassNotFoundException: com.smart.framework.SmartApplication in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.ijoomer.src-2.apk]
04-13 20:34:44.720: E/AndroidRuntime(566):  at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
04-13 20:34:44.720: E/AndroidRuntime(566):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3684)
04-13 20:34:44.720: E/AndroidRuntime(566):  at android.app.ActivityThread.access$1200(ActivityThread.java:122)
04-13 20:34:44.720: E/AndroidRuntime(566):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1062)
04-13 20:34:44.720: E/AndroidRuntime(566):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 20:34:44.720: E/AndroidRuntime(566):  at android.os.Looper.loop(Looper.java:132)
04-13 20:34:44.720: E/AndroidRuntime(566):  at android.app.ActivityThread.main(ActivityThread.java:4123)
04-13 20:34:44.720: E/AndroidRuntime(566):  at java.lang.reflect.Method.invokeNative(Native Method)
04-13 20:34:44.720: E/AndroidRuntime(566):  at java.lang.reflect.Method.invoke(Method.java:491)
04-13 20:34:44.720: E/AndroidRuntime(566):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-13 20:34:44.720: E/AndroidRuntime(566):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-13 20:34:44.720: E/AndroidRuntime(566):  at dalvik.system.NativeStart.main(Native Method)
04-13 20:34:44.720: E/AndroidRuntime(566): Caused by: java.lang.ClassNotFoundException: com.smart.framework.SmartApplication in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.ijoomer.src-2.apk]
04-13 20:34:44.720: E/AndroidRuntime(566):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
04-13 20:34:44.720: E/AndroidRuntime(566):  at java.lang.ClassLoader.loadClass(ClassLoader.java:540)
04-13 20:34:44.720: E/AndroidRuntime(566):  at java.lang.ClassLoader.loadClass(ClassLoader.java:500)
04-13 20:34:44.720: E/AndroidRuntime(566):  at android.app.Instrumentation.newApplication(Instrumentation.java:941)
04-13 20:34:44.720: E/AndroidRuntime(566):  at android.app.LoadedApk.makeApplication(LoadedApk.java:477)
04-13 20:34:44.720: E/AndroidRuntime(566):  ... 11 more 
```

感谢您尝试解决，对此我感到非常失望:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:56:47.187

尝试清理您的项目并重新安装应用程序。

*项目->清理...*

如果它不能帮助更改您的虚拟**设备版本**和**RAM 大小**（设置为 512MB）。如果您没有使用虚拟设备，请断开您的物理设备并重新启动 Eclipse，然后重新连接您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:56:57.097

看起来您有一些您使用的库，但它不是 APK ( `com.smart.framework.SmartApplication`) 的一部分。将其包含在应该运行的 APK 中。（你的应用抛出`ClassNotFoundException`）

# javascript - 在javascript中过滤csv文件中的一行

> ID：15992810
> 
> 赞同：-1
> 
> 时间：2013-04-13T20:52:48.647
> 
> 标签：javascript, html, csv, row

我是 javascript 新手，我试图从一个大型 csv 文件的唯一 id 列中获取一行。我该怎么做呢？我在这里找到了一个例子[http://www.activewidgets.com/javascript.forum.25996.1/filter-rows-in-csv-file.html](http://www.activewidgets.com/javascript.forum.25996.1/filter-rows-in-csv-file.html)

```
function filter(text, column){ 
    var i, rows = [], max = table.getCount();
    if (text==''){ 
    obj.setRowCount(max); 
    obj.setRowIndices(''); 
    } 
    if (text !=''){ 
        for (i=0; i<max; i++){ 
            if (obj.getCellValue("column", i).indexOf(text)> -1 ){ 
                rows.push(i); 
            } 
        } 
    obj.setRowCount(rows.length); 
    obj.setRowIndices(rows); 
    } 
obj.getRowsTemplate().refresh(); 
} 
```

但我不确定 csv 文件是否自动成为表格，我应该在哪里指出正在处理的 csv 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:31:12.137

[JQuery](http://jquery.com/)是一个强大的 Javascript 库。如果你想用 Javascript 做这些类型的事情，我认为你会发现它非常有帮助。

有一个名为 DataTables 的免费 JQuery 插件，它允许您将文本文件作为数据源并将其绑定到网格。

[http://datatables.net/examples/data_sources/ajax.html](http://datatables.net/examples/data_sources/ajax.html)

这可以帮助你做你想做的事。祝你好运。

# libuv - 我在哪里可以找到关于 uv_poll_init 的文档？

> ID：15992811
> 
> 赞同：2
> 
> 时间：2013-04-13T20:52:48.753
> 
> 标签：libuv

我正在查看[https://github.com/benfleis/samples/blob/master/libuv/stdio/stdio_poll.c](https://github.com/benfleis/samples/blob/master/libuv/stdio/stdio_poll.c)上的 libuv 示例并试图理解它。

我基本上理解它，但我在底部的 uv_poll_init 遇到了一些问题，我找不到任何文档。

有人可以指点我一些关于它的文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T19:34:25.943

官方文档在[`include/uv.h`](https://github.com/joyent/libuv/blob/master/include/uv.h)头文件中以注释的形式出现，其中提供了以下文档[`uv_poll_init()`](https://github.com/joyent/libuv/blob/652d5c9e4532fc01c8eebed5303eaf27618b963b/include/uv.h#L1140)：

> 使用文件描述符初始化轮询观察程序。

但是，可以在[此处](http://nikhilm.github.io/uvbook/basics.html#watchers)找到一些涵盖观察者概念的更好的文档。简而言之：

```
uv_poll_init(loop, &stdin_watcher, STDIN_FILENO); 
```

初始化`stdin_watcher`观察`STDIN_FILENO`。当 watcher 启动时，它的所有回调都将在`loop`.

这是程序的基本伪流程：

```
stdout_cb:
  write whatever is in log_buf to stdout
  stop listening for when I can write to stdout

log:
  write message to log_buf
  have stdout_watcher listen for when its file becomes writeable
    when it becomes writable, stdout_cb will be called

stdint_cb:
  read from stdin
  call log

set_non_blocking:
  set file descriptor as non-blocking

main:
  set stdin/out to nonblocking

  get handle to default event loop
  initialize stdint_watcher, it will listen to stdin and its callback will
    run within the default loop
  initialize stdout_watcher, it will listen to stdout and its callback will
    run within the default loop
  have stdin_watcher listen for when its file becomes readable
    when it becomes readable, stdin_cb will be called
  run the event loop until no more work exists
    in this case, when both watchers are not running (i.e. stopped) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-12T09:57:02.547

最新、最新和最棒的文档：[http ://docs.libuv.org/en/latest/](http://docs.libuv.org/en/latest/)

# nlp - 提取从句形式的句子

> ID：15992813
> 
> 赞同：4
> 
> 时间：2013-04-13T20:52:59.667
> 
> 标签：nlp, stanford-nlp, opennlp, sentence

我想从句子中提取从句，主要从句，关系从句，限制性关系从句，非限制性关系从句，但我不知道这是如何工作的。例如：

“我第一次见到她是在巴黎，我九十年代初住在那儿。”
【主句】【相对句】

“她伸出了受伤的手。”
[主从句][限制性关系从句]

请帮我做这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:53:17.780

您应该能够通过选区解析来提取此信息（以合理的准确性）。[这里](http://aclweb.org/aclwiki/index.php?title=Parsers_for_English)列出了许多实现。在该列表中，我将添加我自己的，可在[此处](https://code.google.com/p/bubs-parser/)下载。t 比任何其他可用的高精度解析器都快，并且记录得相当好（用于研究代码）。

# javascript - 如何在 Handlebars 模板中访问 if 语句中的数据

> ID：15992817
> 
> 赞同：1
> 
> 时间：2013-04-13T20:53:26.350
> 
> 标签：javascript, handlebars.js, template-engine

对于车把（版本 1.0.0-rc.3）模板，我传递了两个变量，一个是 json，另一个是包含现场当前语言的字符串。

```
self.template = template({ data: self.model, lang:self.lang }); 
```

然后在模板文件中我有以下结构：

```
 {{#each data}} 
    //this is working
    {{../lang}}   
       {{#if this.title}}   
         {{this.desc}}
         //i've tried this
         {{../lang}}
         //and this
         {{lang}}
       {{/if}}  
    {{/each}} 
```

...但我无法访问 if 语句中的 lang 值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-03T03:45:00.917

我知道您已经通过解决方法解决了您的问题，但是注册一个**帮助**程序以执行本地方式很麻烦。

问题是每个[Handlebars](http://handlebarsjs.com/)帮助程序都会覆盖上下文并将新的内容嵌套在父项中，因此您必须更进一步，就像**UNIX**类目录一样。

因此，要访问 lang 内部，`each->if`您必须使用：

```
{{ ../../lang }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T23:05:43.813

我通过创建车把辅助函数找到了解决方案：

> Handlebars.registerHelper('language', function() { return self.lang; });

然后在模板中，我可以在任何我想要的地方使用 {{language}}。

# cocoa-touch - 验证 PayPal 移动支付 - 如何处理此验证

> ID：15992819
> 
> 赞同：3
> 
> 时间：2013-04-13T20:53:44.237
> 
> 标签：cocoa-touch, paypal

我正在为我正在做的移动应用程序使用 PayPal 的新 iOS SDK。处理付款时，将处理以下类型的验证：自适应付款（当用户使用 PayPal 付款时）和 REST API（当用户使用信用卡付款时）。我的问题是我应该如何处理这些验证。我已经阅读了他们的文档，但并不是很清楚，显然验证有助于欺诈，但我对处理这些验证所需的步骤感到困惑。我是否将它发送到我的服务器（php），如果是，我的服务器应该用它做什么？我应该将这些保存在数据库中吗？我是 PayPal 新手，如果有人可以提供一些建议，我将不胜感激。

验证示例：

```
{
"proof_of_payment": {
"adaptive_payment": {
  "pay_key": "AP-70M68096ML426802W",
  "payment_exec_status": "COMPLETED",
  "timestamp": "2013-02-20T00:26:25Z",
  "app_id": "APP-91B933855X481767M"
}
},
"payment": {
"short_description": "Hipster t-shirt",
"amount": "9.95",
"currency_code": "USD"
},
"client": {
"platform": "iOS",
"paypal_sdk_version": "1.0.0",
"environment": "live",
"product_name": "PayPal iOS SDK"
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:24:03.470

您应该将它们发送到您的服务器。

您的服务器（您信任的）应直接与 PayPal 通信，以验证付款证明是否有效。[有关验证付款证明](https://developer.paypal.com/webapps/developer/docs/integration/mobile/verify-mobile-payment/)的文档详细说明了您可以进行哪些 API 调用以进行验证。如果您对它们有具体问题，您应该单独询问，并附上详细信息。验证它们的原因是，如果你不这样做，有人可能会给你一个*假*的付款证明，而你不会知道。

您可能希望将它们保存在数据库中（或者至少是它们中最重要的部分，例如`pay_key`or `payment_id`）。

# vb.net - VB.NET中基于两个字符的随机字符串生成

> ID：15992825
> 
> 赞同：0
> 
> 时间：2013-04-13T20:54:23.020
> 
> 标签：vb.net, .net-4.0

我正在尝试创建预定义的行数，每行都有预定义的字符数。允许的字符只有 0 和 1，并且是随机生成的。

我用这段代码实现了这一点：

```
 Dim _allowedChars As String = "01"
    Dim randomNumber As New Random()
    Dim chars As List(Of Char) = New List(Of Char)
    Dim allowedCharCount As Integer = _allowedChars.Length
    For o As Integer = 0 To rows - 1
        For a As Integer = 0 To rowCharacters - 1
            chars.Add(_allowedChars.Chars(CInt(Fix((_allowedChars.Length) * randomNumber.NextDouble()))))
        Next a
        For a As Integer = 0 To chars.Count - 1
            'results for each row go here in a textbox line
        Next a
        chars = New List(Of Char)
        'row o finished, new line and go for next row
    Next o 
```

这很好用，设置 5 行和 5 个字符（仅由随机生成的 0 或 1 组成）的示例输出如下所示：

```
11101
00000
11011
00000
01011 
```

我现在想给它添加一个额外的转折：为每行指定 1 的最小百分比，即“即使随机分布，每行应该至少有 20% 的 1”。百分比基于每行中字符的长度（代码中的变量 rowCharacters）。

谁能帮我解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:24:26.357

```
Dim _allowedChars As String = "01"
Dim randomNumber As New Random()
Dim chars As List(Of Char) = New List(Of Char)
Dim allowedCharCount As Integer = _allowedChars.Length
'
For o As Integer = 0 To rows - 1
  Do
    For a As Integer = 0 To rowCharacters - 1
        chars.Add(_allowedChars.Chars(CInt(Fix((_allowedChars.Length) * randomNumber.NextDouble()))))
    Next a
    For a As Integer = 0 To chars.Count - 1
        'results for each row go here in a textbox line
    Next a
    chars = New List(Of Char)
    'row o finished, new line and go for next row
  Loop Until IsValidPercent(chars, 20)
Next o

Function IsValidPercent(chars As List(Of Char), ReqPercentage as integer) as boolean
'
Dim counter as integer = 0
Dim qtyones as integer = 0
  '
  IsValidPercent = False
  for counter = 0 to chars.count -1
    if chars(counter) = "1" Then qtyones = qtyones + 1
  next
  if qtyones >= ((chars.count/100)*ReqPercentage) Then IsValidPercent = True
  '
End Function 
```

# php - 使用来自另一个站点的文本在 PHP 图像上显示文本内容

> ID：15992829
> 
> 赞同：1
> 
> 时间：2013-04-13T20:54:32.613
> 
> 标签：php, dynamic-image-generation

我有一个用 PHP 编码的动态图像，它应该用作统计数据的显示，使用外部站点。每个统计信息将使用以下通用代码显示：

```
 imagettftext($template,10,0,5,35,$black,$font,$statVar1); 
```

...其中 $statVar1 是将显示的第一个统计信息的名称（我总共要显示 99 个）。

我知道如何做到这一点的唯一方法是将PHP与JSON一起使用，将数据保存到文件中，然后在显示图像时加载它们，但在这种情况下我不需要那种数据保存，所以我正在寻找的只是在加载图像的同时显示源页面上的任何内容。

我的 JSON 解决方案涉及 getElementsByTagName，我会选择 HTML 标签并使用 item() 选择正确的标签，但有没有我可以使用的纯 PHP 解决方案？例如，如果我想访问[DC Vault](http://www.dc-vault.com/showscores.php)站点，并将我的 $statVar1 设置为第一支球队的总体排名值（即，在我的统计图像上显示“1”），我会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:35:42.350

如果我理解正确，您想从您的 PHP 代码中的另一个页面/站点中提取数据。

最简单的方法是使用类似`file_get_contents()`URL 作为参数的东西，而不是常规文件路径。了解 PHP URL 包装器。 [https://www.php.net/manual/en/wrappers.php](https://www.php.net/manual/en/wrappers.php)

您可以解析返回的数据以提取您需要的内容。

如果相应站点不提供任何结构化格式（如 XML 或 JSON）的导出，则您需要解析 HTML 文档。

正则表达式将是一种方法。请参阅 PHP 函数`preg_match`。

# java - 运行时错误 java / mpi（除以零）

> ID：15992830
> 
> 赞同：0
> 
> 时间：2013-04-13T20:54:34.443
> 
> 标签：java, mpi

我收到此运行时错误：

```
C:\Users\Richard\Dropbox\Year 3\DISPARP\Coursework>mpjrun -np 2 -dev niodev Ping
PongVariousLengths
MPJ Express (0.35) is started in the cluster configuration
Starting process <0> on <Tornado>
Starting process <1> on <Tornado>
Time for the ping to be sent and recived of 1 kb is 7 miliseconds
transferRate: 142.85714285714286KB per second
Speed of network in Mbps: 0
Time for the ping to be sent and recived of 2 kb is 0 miliseconds
transferRate: InfinityKB per second
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at runtime.daemon.Wrapper.execute(Wrapper.java:165)
        at runtime.daemon.Wrapper.main(Wrapper.java:180)
Caused by: java.lang.ArithmeticException: / by zero
        at PingPongVariousLengths.main(PingPongVariousLengths.java:32)
        ... 6 more 
```

我认为导致它的原因是，代码试图除以 0

```
Time for the ping to be sent and recived of 2 kb is 0 miliseconds
transferRate: InfinityKB per second 
```

导致错误，我该如何解决这个错误，它仍然除以 0 但返回 0

如果您需要代码，只需说:)

谢谢您的帮助

编辑

代码 ：

```
if (myrank == 0) {
            for (int len = minlen; len <= maxlen; len *= 2) { //len=*2 doubles the ping size each time
                long startTime = System.currentTimeMillis();                    
                 MPI.COMM_WORLD.Send(sendbuff, 0, len, MPI.CHAR, 1, tag);
                 MPI.COMM_WORLD.Recv(recvbuff, 0, len, MPI.CHAR, 1, tag);
                long endTime = System.currentTimeMillis();
                long duration = endTime - startTime;
                System.out.println("Time for the ping to be sent and recived of " + len + " kb is " + duration + " miliseconds");
                double transferRate = (len * 1000.0)/ duration ; //amount of data in kilobytes transferred in 1 second
                System.out.println("transferRate: " + transferRate + "KB per second");
                speedKbps = (len / duration);
                speedMbps = (speedKbps / 1024);
                System.out.println("Speed of network in Mbps: " + speedMbps);
                }
        } else if (myrank == 1) {
            for (int len = minlen; len <= maxlen; len *= 2) {
                 MPI.COMM_WORLD.Recv(recvbuff, 0, len, MPI.CHAR, 0, tag);
                 MPI.COMM_WORLD.Send(recvbuff, 0, len, MPI.CHAR, 0, tag);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:03:41.110

尝试使用

```
long startTime = System.nanoTime();
... 
long endTime = System.nanoTime(); 
```

并调整 nanos 的所有计算。

如果它不起作用，只需在此处检查零

```
speedKbps = duration == 0 ? <big number here> : (len / duration); 
```

# java - 在 JTextArea 下插入图像

> ID：15992831
> 
> 赞同：0
> 
> 时间：2013-04-13T20:54:59.683
> 
> 标签：java, image, graphics, jtextarea

所以我试图在 JTextArea 下插入一个图像，但我运气不好，有人可以帮忙吗？基本上我要问的是是否有人可以帮助创建另一个这样做的类或子类。这是我的代码：

```
import java.awt.*;
import javax.swing.*;

public class t{
    private JFrame f; //Main frame
    private JTextArea t; // Text area   private JScrollPane sbrText; // Scroll pane for text area
    private JButton btnQuit; // Quit Program

    public t(){ //Constructor
        // Create Frame
        f = new JFrame("Test");         
        f.getContentPane().setLayout(new FlowLayout());         
        String essay = "Test"; 
        // Create Scrolling Text Area in Swing
        t = new JTextArea(essay, 25, 35);
        t.setEditable(false); 
        Font f = new Font("Verdana", Font.BOLD, 12 );
        t.setFont( f );         
        t.setLineWrap(true);        
        sbrText = new JScrollPane(t);
        sbrText.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
                // Create Quit Button
        btnQuit = new JButton("Quit");
        btnQuit.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e){
                    System.exit(0);         
                }           }       );
    }

    public void launchFrame(){ // Create Layout
        // Add text area and button to frame 
       f.getContentPane().add(sbrText);
        f.getContentPane().add(btnQuit);
                 // Close when the close button is clicked
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Display Frame
        f.pack(); // Adjusts frame to size of components
        f.setSize(450,480);
        f.setResizable(false);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String args[]){
        t gui = new t();     
        gui.launchFrame();
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:26:50.327

基本问题是`JTextArea`它将绘制它的背景和`paintComponent`.

最简单的解决方案是使`JTextArea`透明并接管绘制背景的控制权。

这个例子基本上用背景颜色填充背景，绘制图像，然后调用`super.paintComponent`以允许呈现文本。

![在此处输入图像描述](https://i.stack.imgur.com/JTlvy.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TransparentTextArea {

    public static void main(String[] args) {
        new TransparentTextArea();
    }

    public TransparentTextArea() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(new CustomTextArea()));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class CustomTextArea extends JTextArea {

        private BufferedImage image;

        public CustomTextArea() {
            super(20, 20);
            try {
                image = ImageIO.read(new File("/Users/swhitehead/Dropbox/MegaTokyo/Miho_Small_02.png"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public boolean isOpaque() {
            return false;
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(getBackground());
            g2d.fillRect(0, 0, getWidth(), getHeight());
            if (image != null) {
                int x = getWidth() - image.getWidth();
                int y = getHeight() - image.getHeight();
                g2d.drawImage(image, x, y, this);    
            }
            super.paintComponent(g2d);
            g2d.dispose();
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:11:17.360

查看[背景面板](http://tips4java.wordpress.com/2008/10/12/background-panel/)。当您将滚动窗格添加到面板时，它将使滚动窗格、视口和文本区域全部不透明，以便您可以看到图像。

# javascript - 骨干事件不起作用

> ID：15992832
> 
> 赞同：1
> 
> 时间：2013-04-13T20:55:06.200
> 
> 标签：javascript, backbone.js

我正在尝试在呈现 html 后立即手动触发单击事件，但它不起作用。

为了简化并验证它是否不起作用，我尝试了以下代码：

```
var _testView = Backbone.View.extend({

   events : {
    'click a' : 'sayHi'
   },

   initialize : function() {
    this.render();
    this.$el.find('a').trigger('click');
   },

   render : function() {
    $(document.body).html(
        this.$el.html('<a href="#">alert hi</a>')
    );
   },

   sayHi : function() {
    alert('Hi');
    return false;
   }

});

var y = new _testView; 
```

我正在尝试手动触发点击事件，但它没有被触发。如果我要将触发器放在延迟为 500 的 setTimeout 中，它将起作用。我不知道为什么.... thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:33:58.427

我找到了答案。我查看了 Backbone 核心，发现在将事件附加到视图之前首先调用了初始化方法。

```
View = Backbone.View = function(options) {
    this.cid = _.uniqueId('view');
    this._configure(options || {});
    this._ensureElement();
    this.initialize.apply(this, arguments);
    this.delegateEvents();
  }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:06:40.507

您正在调用尚未创建的元素上的单击事件。您应该在渲染完成时调用该函数，或者您可以调用 this.sayHi() 而不是触发点击。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T21:27:16.930

hjuster 是正确的。$(document.body) 等待“文档就绪”事件，并且您在文档准备好之前调用 new _testView。您可以将您的初始化更改为此 - 它在文档准备好后将触发器排队执行。

```
initialize : function() {
    this.render();
    var self = this;   
    $(function(){
        self.$el.find('a').trigger('click');
    });
}, 
```

我添加了 var 'self' 因为你不能引用 'this' 来获取函数中的 _testView 对象。

它适用[于这个小提琴](http://jsfiddle.net/neillamoureux/NJTmB/4/)

# django - 在 Django 模型中添加一个自定义方法来知道当前用户是否是作者

> ID：15992836
> 
> 赞同：0
> 
> 时间：2013-04-13T20:55:54.817
> 
> 标签：django, models, templatetags

我正在使用查询集检索一堆东西并将它们显示为列表，然后可以单击以查看所选文章的详细信息。所以在文章的详情视图中，我有一个 is_creator 方法：

```
@login_required
def is_creator(userProfile, article):
    if userProfile == article.creator:
        return True
    else:
        return False 
```

所以我可以随意显示一个编辑按钮。但是在主页上，情况就不同了，因为我正在进行查询，并将查询集直接提供给模板，该模板将创建一个 for 循环来显示标题。如果当前用户是创建者，我仍然想知道每篇文章。

所以我正在考虑在模型本身中添加工作，而不必在任何地方复制代码。

```
@property
def is_creator(self,user):
    if self.creator.user == user:
        return 1
    else:
        return 0 
```

我在想，通过在模型中添加它，我应该能够很容易地调用模板 {% if event.is_creator user %}test{% endif %} 。似乎我错了，因为我面临：

```
TemplateSyntaxError at /
Unused 'user' at end of if expression. 
```

我来自 PHP 世界，所以感觉这应该可行，但我显然做错了什么。

提前致谢 ：）

编辑：我猜另一个解决方案是在视图中循环通过查询集，例如：

```
 variables['articles'] = Event.objects.filter(
            (Q(creator=me) | Q(bringing__attendee=me)) & Q(date_start__lt=datenow) & Q(date_end__gt=datenow)
        ).order_by('-date_start')
    for article in variables['articles']:
         article.iscreator=1 (I can do some more work here) 
```

但似乎必须遍历 QS 并不是最好的主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:11:02.253

这是非常可悲的，但您不能将参数传递给模板中的方法（确实这是一个好主意 - 所以您几乎不要将表示逻辑与模型逻辑混为一谈:)）。为此，您必须编写一个模板标签。

[https://docs.djangoproject.com/en/dev/howto/custom-template-tags/](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

标签看起来像这样（未测试）：

```
@register.simple_tag(takes_context=True) #  assuming you are running in request context
def current_user_is_creator(context,article):
    user = context['request'].user
    return article.creator.user == user  #  dont forget to add proper checks 
```

或者您可以在视图中准备所需的数据。

# javascript - 用jquery在文本框中挤压字符

> ID：15992837
> 
> 赞同：0
> 
> 时间：2013-04-13T20:55:59.723
> 
> 标签：javascript, jquery

我有字符串，例如

```
Computer > Software > Programming Language > Python
Computer > Software > Game > BT4 
```

如果字符串不适合文本框的宽度，我想挤压并显示如下：

```
Computer > Software > ...> Python
Computer > Software > Game > BT4 
```

这些字符串是从 AJAX 响应中获取的。如何使用 jQuery 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:00:37.703

~~这可能会帮助您解决问题：~~

[https://github.com/STAR-ZERO/jquery-ellipsis](https://github.com/STAR-ZERO/jquery-ellipsis)

甚至

~~[http://dotdotdot.frebsite.nl/](http://dotdotdot.frebsite.nl/)~~

**更新**

这是我想出的：[Jsfiddle](http://jsfiddle.net/EYuuZ/)

```
appendList = ['Computer', 'Software', 'Programming Language', 'Python'];
idx = -1;
$('#appendButton').on('click', function() {
    if (idx++ >= appendList.length-1)
        return;
    var inputField = $('#inputField'),
        value = inputField.val();
    inputField.val(value + ((idx == 0) ? appendList[idx]:' > ' + appendList[idx]));
        value = inputField.val();
    // Check the length based on the "size" of the input.
    if (value.length >= 30) {
         // Get the last "section"
        var startPos = (value.lastIndexOf('>')-1),      
            begStr  = value.slice(0, startPos - 1),
            saveStr = value.slice(startPos);

        // Now we need the last occurrence of '>', 
        // This will give you multiple occurrences of '...'
        var secStartPos = begStr.lastIndexOf('>')+2;

        // Or you can use these two lines, instead
        // of the ones below if you only ever want
        // one '...', but to always show the last "section"
        //
        // var secStartPos = begStr.indexOf('>')+2;
        // while ((secStartPos = begStr.lastIndexOf('>', secStartPos)+2) >= 30) { };
        //
        var secSaveStr = begStr.slice(0, secStartPos);

        // Now append '...'
        secSaveStr += '...';

        // Rebuild the string.
        var finalStr = secSaveStr + saveStr;

        inputField.val(finalStr);
    }
}); 
```

哦，是的，顺便说一句，不知道当文本框填满 '> ... >' 时会发生什么 :) GL

# regex - 从日志中提取http响应代码

> ID：15992846
> 
> 赞同：0
> 
> 时间：2013-04-13T20:57:07.010
> 
> 标签：regex, perl

Apache 日志文件条目

```
64.242.88.10 - - [07/Mar/2004:20:11:33 -0800] "GET /twiki/bin/attach/TWiki/TWikiSite HTTP/1.1" 401 12846 
```

使用正则表达式我想提取 HTTP 响应代码

```
=~ /HTTP/1.1"\s(response_code)\s/
print $response_code 
```

我可以在 Python 或 Ruby 中做这样的事情，但不知道是否以及如何在 Perl 中做到这一点。

只需提取特定值而不使用多个拆分操作。

我只想扫描文件中的一行，然后打印`http_response_code`放置在`/HTTP/1.1"\s(response_code)\s/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:08:13.693

是的，您可以在 perl 中执行此操作，代码如下：

```
#!/usr/bin/env perl 

use strict;
use warnings;

open FILE, "test.txt" or die $!;
while( my $string = <FILE> )
{
    if( $string =~ /HTTP\/1.1"\s(\d+)/ )
    {
    print "$1\n";
    }
} 
```

输出：

```
$ perl testRegex.pl 
401 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:09:08.760

这对我有用：

```
use strict;
use warnings;

my $line = qq!64.242.88.10 - - [07/Mar/2004:20:11:33 -0800] "GET /twiki/bin/attach/TWiki/TWikiSite HTTP/1.1" 401 12846!;

if( $line =~ m!HTTP/1.1" +(\d+)! ) {
    print $1, "\n";  # <--- prints: 401
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T21:11:33.533

这里不需要正则表达式。`split`更快更方便。

```
my $line = '64.242.88.10 - - [07/Mar/2004:20:11:33 -0800] "GET /twiki/bin/attach/TWiki/TWikiSite HTTP/1.1" 401 12846';

my $response_code = (split ' ', $line)[-2];
print $response_code; 
```

**输出**

```
401 
```

# vb.net - VB.net 列表计数

> ID：15992850
> 
> 赞同：0
> 
> 时间：2013-04-13T20:57:41.333
> 
> 标签：vb.net, listbox

在以下行收到错误，有什么建议吗？

```
If lstbxCharacters.ListCount = 0 Then

    Else

End if 
```

错误：Listcount 不是 Windows.Forms.Listbox 的成员

我可以调用任何方法来检查列表框的内容是否不为空？

我现在尝试了这个，但是当列表框填充了不同的方法时，它给了我一个布尔错误

```
If lstboxCharacters.Datasource = "" Then
        Else
        <bunch of methods> 
End if 
```

固定的

```
If lstbxCharacters.Items.Count >  0 Then

 Else

End if 
```

不管怎么说，还是要谢谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:10:41.970

```
If lstbxCharacters.Items.Count > 0 Then
  'data exists
Else
  'NO data exists
End if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:01:16.067

列表框有一个可以检查的[Items集合。](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)谷歌控件和 msdn，它会显示所有成员。

# parse-platform - 如何存储重复的电子邮件地址？

> ID：15992851
> 
> 赞同：2
> 
> 时间：2013-04-13T20:57:54.117
> 
> 标签：parse-platform

使用 parse.com 的 API，我如何存储多个电子邮件地址？

目前，如果两个用户设置相同的电子邮件地址，我会收到以下错误：

> 错误：电子邮件地址已被占用

是否可以允许重复值？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T23:39:30.467

ParseUser 上的电子邮件字段是特殊的，并且针对其他电子邮件地址进行了唯一性验证。但是，您始终可以将电子邮件地址存储在自定义字段中，例如`[[PFUser current] setObject:@"someDuplicate@email.com" forKey:@"contactEmail"]`，不会被验证，从而允许您有重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:11:45.027

如果 parse.com API 返回此错误，那么这是对他们的限制，在这种情况下，答案是：你不能。如果这是您自己的数据库返回的错误，那么您需要提供更多信息来说明原因。

# c# - 在设置中保存多个字符串的最佳方法是什么？

> ID：15992854
> 
> 赞同：0
> 
> 时间：2013-04-13T20:58:18.540
> 
> 标签：c#, wpf, application-settings

我正在为多个网站编写客户端。对于这些网站，用户应该能够保存多个设置，例如用户名、收藏类别等。我希望将这些设置保存在本地。起初我以为我会使用通常的 Properties.Settings，但我希望这些字符串位于某种数据库中，以保持它们的有序性。像这样：

网站、用户、UserCat、代理

这些是我需要的所有列，代理是可选的。解决此问题的最佳方法是什么？我首先想到了 stringcollections，但是编码很混乱，而且似乎不是正确的方法。

当我的应用程序启动时，用户可以选择一个网站，该应用程序将加载用户、usercat 和属于该网站的可选代理。处理这个问题的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:05:05.683

如果您不想将这些设置存储在 Properties.Settings 中，那么想到的其他两个选项是 SQLite - [http://sqlite.phxsoftware.com](http://sqlite.phxsoftware.com)或写入平面文件（.ini 或您自己的自定义格式）。

# python - 获取大型稀疏矩阵每行最大值的有效方法

> ID：15992857
> 
> 赞同：6
> 
> 时间：2013-04-13T20:58:38.293
> 
> 标签：python, scipy, sparse-matrix

我有一个大的稀疏矩阵，我想获得每一行的最大值。在 numpy 中，我可以调用 numpy.max(mat, axis=1)，但我找不到 scipy 稀疏矩阵的类似函数。是否有任何有效的方法来获取大型稀疏矩阵的每一行的最大值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T06:21:34.503

如果您的矩阵（我们称之为`a`）以 CSR 格式存储，则`a.data`所有非零条目均按行排序，并且`a.indptr`具有每行第一个元素的索引。您可以使用它来计算您所追求的内容，如下所示：

```
def sparse_max_row(csr_mat):
    ret = np.maximum.reduceat(csr_mat.data, csr_mat.indptr[:-1])
    ret[np.diff(csr_mat.indptr) == 0] = 0
    return ret 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T22:28:16.920

我刚刚遇到了同样的问题。如果矩阵中的任何行完全为空，Jaime 的解决方案就会中断。这是一个解决方法：

```
def sparse_max_row(csr_mat):
    ret = np.zeros(csr_mat.shape[0])
    ret[np.diff(csr_mat.indptr) != 0] = np.maximum.reduceat(csr_mat.data,csr_mat.indptr[:-1][np.diff(csr_mat.indptr)>0])
    return ret 
```

# java - 链表的 Java 数组

> ID：15992864
> 
> 赞同：0
> 
> 时间：2013-04-13T20:59:28.310
> 
> 标签：java, generics

为什么是

```
LinkedList<String>[] list = new LinkedList[32];

StaticError:Bad types in assignment:from raw LinkedList[] to LinkedList<String>[] 
```

和

```
LinkedList<String>[] list= (LinkedList<String>[]) new LinkedList[32];
StaticError: Bad types in cast: from raw LinkedList[] to LinkedList<String>[] 
```

都编译但给我关于原始类型的运行时错误？

我需要创建一个 LinkedLists 数组（基本上是一个哈希表......这是家庭作业，所以我不能偏离它太多）。我计划通过使用单独的链接来处理冲突，这只是用 LinkedList 中的顺序元素填充数组中的重复条目。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T21:01:33.850

在 Java 中，数组和泛型并不能很好地配合。

我知道你说你不能偏离这个设计*太多*。让你的生活更轻松的*轻微*`ArrayList`偏差是使用 an而不是数组：

```
 List<LinkedList<String>> buckets = new ArrayList<LinkedList<String>>();
    for (int i = 0; i < num_buckets; ++i) {
        buckets.add(new LinkedList<String>());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:08:31.413

这是由于“*擦除*”的问题（正如您所说的那样，这是“家庭作业”，我强烈建议您阅读该主题：您将学到有趣的东西！）并且本质上与他们引入泛型时的事实有关，他们必须在运行时保持与现有非通用代码的兼容性。

因此，这两个答案（在我输入这个答案时出现）可以解决您的问题（特别是，将符号添加到构造函数调用中）但不会真正解决基本问题（数组和泛型并不真正喜欢每个其他）。

使用 an`ArrayList<String>`会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T21:05:48.447

这段代码：

```
import java.util.LinkedList;

public class ArrayOfLinkedLists {

   public static void main( String[] args ) {
      @SuppressWarnings("unchecked")
      LinkedList<String>[] array = new LinkedList[32];
      array[0] = new LinkedList<>();
      array[0].add( "Hello" );
      array[0].add( ", " );
      array[0].add( "World!" );
      for( LinkedList< String > l : array ) {
         if( l != null ) {
            for( String s : l ) {
               System.out.println( s );
            }
         }
      }
   }
} 
```

输出：

```
Hello
, 
World! 
```

您的代码有效。

# php - jQuery滑块导致代码停止工作

> ID：15992867
> 
> 赞同：0
> 
> 时间：2013-04-13T20:59:50.220
> 
> 标签：php, jquery

你好，代码忍者，我一直在玩这个漂亮的[jQuery 价格范围滑块](http://jqueryui.com/slider/#range)

一旦我实现它，它就会导致我的文本框、选择图像功能和 Jquery 拖放元素停止工作:(

我查看了代码，似乎找不到问题所在。

我放的页面在这里：[https ://www.picklify.com/feed/beta/](https://www.picklify.com/feed/beta/)

您将在底部的“卖家搜索”框中看到价格范围滑块。如果您查看我的页面源代码，您可以在那里看到所有代码。

帮我拔头发，谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:03:22.267

您在页面中包含 jQuery.js 两次。第二个版本清除了注册到第一个版本的插件，这会引发错误，因为这些插件功能不再存在。删除第二个版本，以便在所有插件之前加载 jQuery

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T21:03:35.080

在您的评论下方`<!-- BEGIN jquery price range slider -->`，您重新包含了 jQuery 和 jQuery UI。删除这些引用并在您的脑海中组合内联脚本。

# c - 徽标仅出现一秒钟然后消失

> ID：15992874
> 
> 赞同：1
> 
> 时间：2013-04-13T21:01:10.850
> 
> 标签：c, libvlc

我正在尝试在使用 libvlc (2.0.2) 播放的视频上显示徽标。我试图找到一些文档，但我没有运气。这是我能想到的最好的尝试：

```
libvlc_video_set_logo_string(m_player->core(), 1, "logo_1365886316.png");  //logo file path (I've also tried logo_1365886316.png,0,5000)
libvlc_video_set_logo_int(m_player->core(), libvlc_logo_x, 500);  //x-coordinate
libvlc_video_set_logo_int(m_player->core(), libvlc_logo_y, 100); //y-coordinate
libvlc_video_set_logo_int(m_player->core(), libvlc_logo_opacity, 255);

// I've tried with the following, but I had no luck.
//libvlc_video_set_logo_int(m_player->core(), libvlc_logo_repeat, -1);
//libvlc_video_set_logo_int(m_player->core(), libvlc_logo_delay, 6000); 

libvlc_video_set_logo_int(m_player->core(), libvlc_logo_enable, 1); 
```

发生的事情是我的徽标可见几毫秒左右，然后消失了。如果我再次尝试初始化徽标，则没有任何显示。另外，如果这很重要，我会在视频开始后初始化徽标。

我不知道为什么会这样。根据各种论坛帖子，我一切正常，并且我没有初始化堆栈上的任何内容，因此可以在退出 init 函数后将其释放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T08:45:07.173

它没有坏！它对我有用。您必须将选项添加`--sub-filter=logo`到您传递给的选项数组中`libvlc_new()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:07:39.783

官方 VideoLAN 论坛似乎提供了您需要的答案：徽标功能可能在 VLC 2.0.X 中被破坏（[来源](http://forum.videolan.org/viewtopic.php?f=32&t=105316)）。

此外，同一论坛上的[另一个主题](http://forum.videolan.org/viewtopic.php?f=32&t=82309)似乎确认当您等待视频播放以显示徽标时您正在做正确的事情（至少，您知道它不是来自您）。

我认为您现在应该考虑该功能已损坏，并希望有一天有人会提供补丁。除非你想自己写这个补丁。

**编辑：**顺便说一句，我检查了从论坛消息日期（2012 年 10 月）到今天的[vlc-devel 邮件列表](http://mailman.videolan.org/pipermail/vlc-devel/)，并没有找到任何关于可能的补丁的信息。关于徽标功能，我发现的唯一一件事是[一条消息](http://mailman.videolan.org/pipermail/vlc-devel/2012-October/090481.html)，指出自 2.0.3 以来其他一些与徽标相关的功能似乎不起作用（这也是我在此消息中共享的论坛帖子中引用的版本）。

# ruby - 如何将 \n 放在正则表达式替换字符串中？

> ID：15992875
> 
> 赞同：0
> 
> 时间：2013-04-13T21:01:15.317
> 
> 标签：ruby, regex

我想做类似的事情：

```
string.gsub(/(whatever)/,'\n\1\n') 
```

但我不希望将“whatever”替换为文字“\nwhatever\n”，我希望 \n 实际上对应于新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:04:26.787

\n 是一个新行，这取决于你如何打印它，它会给你一个新行，所以

```
puts "\nwhatever\n".inspect
=> "\nwhatever\n" 
```

然而：

```
puts "\nwhatever\n"
=> 
=> whatever
=> 
```

除非我误解了这个问题。

如果要将其拆分为列表，请执行以下操作：

```
puts "\nwhatever\n".split(?\n).inspect
=> ["", "whatever"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:07:00.810

我认为你需要双引号：

```
string.gsub(/(whatever)/,"\n\\1\n") 
```

# python - python re中可能存在的错误

> ID：15992879
> 
> 赞同：1
> 
> 时间：2013-04-13T21:01:36.880
> 
> 标签：python, regex

我有以下代码：

```
import re
r = re.compile(r'[*-/]')
print r.match('.') is not None 
```

它打印`True`，表示它`'.'`与给定的正则表达式匹配，但它不匹配。我在正则表达式中遗漏了一些明显的东西吗？

我`2.7.3`在 osx 上使用 cpython`10.8.2`

如果`[]`删除集合中的三个字符中的任何一个，它就会起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T21:09:46.963

当您编写以下内容时，

```
r = re.compile(r'[*-/]') 
```

使用`-`真的意味着匹配和之间的任何`*`字符`/`。如果你看一下 ascii 表，

```
*      42
+      43
,      44
-      45
.      46
/      47 
```

这就是它与`.`角色匹配的原因。您当前的正则表达式也将匹配，

```
>>> print r.match('+')
<_sre.SRE_Match object at 0x100483370>
>>> print r.match(',')
<_sre.SRE_Match object at 0x100483370> 
```

要更正正则表达式使其仅匹配`*`or`-`或，您可以像这样`/`转义，`-`

```
r = re.compile(r'[*\-/]') 
```

然后你没有得到匹配`.`

```
>>> print r.match('.') is not None
False 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T21:09:02.603

编译它使用`re.DEBUG`

```
In [3]: r = re.compile(r'[*-/]', re.DEBUG)
in
  range (42, 47) 
```

它给出了范围的定义。`man ascii`给

```
42        *
43        +
44        ,
45        -
46        .
47        / 
```

其中包括一个`.`因此完全合法的。

# java - Android SearchView 空字符串

> ID：15992882
> 
> 赞同：8
> 
> 时间：2013-04-13T21:02:04.443
> 
> 标签：java, android, searchview

我正在尝试使用 SearchView 并且一切正常，除非我想搜索空字符串。
当我删除最后一个字符时，onQueryTextChange 会做出反应，但我希望用户能够在搜索字段为空时按下搜索按钮。

```
 final SearchView.OnQueryTextListener queryTextListener = new SearchView.OnQueryTextListener() {
                @Override
                public boolean onQueryTextChange(String newText) {
                    // Do something
                    return true;
                }

                @Override
                public boolean onQueryTextSubmit(String query) {
                    // Do something
                    return true;
                }
            };

        searchView.setOnQueryTextListener(queryTextListener); 
```

我也尝试过使用 OnKeyListner。但它似乎也不起作用。

```
 searchView.setOnKeyListener(new OnKeyListener() {
            @Override
            public boolean onKey(View arg0, int arg1, KeyEvent arg2) {

                //Do something
                return true;
            }
        }); 
```

这似乎是一件很简单的事情，但我无法让它发挥作用。有什么建议么？

**编辑**

我已经寻找了一段时间的解决方案，发布后几分钟，我找到了解决方案。
在这个线程上，我发现这不是一个错误，但它实际上是故意的。

[Android SearchView.OnQueryTextListener OnQueryTextSubmit 未在空查询字符串上触发](https://stackoverflow.com/questions/13576283/android-searchview-onquerytextlistener-onquerytextsubmit-not-fired-on-empty-quer)

所以我刚刚下载了[ActionBarSherlock](http://actionbarsherlock.com/)并对方法 onSubmitQuery() 做了一些修改

从

```
private void onSubmitQuery() {
    CharSequence query = mQueryTextView.getText();
    if (query != null && TextUtils.getTrimmedLength(query) > 0) {
        if (mOnQueryChangeListener == null
                || !mOnQueryChangeListener.onQueryTextSubmit(query.toString())) {
            if (mSearchable != null) {
                launchQuerySearch(KeyEvent.KEYCODE_UNKNOWN, null, query.toString());
                setImeVisibility(false);
            }
            dismissSuggestions();
        }
    }
} 
```

和修改版

```
private void onSubmitQuery() {
    CharSequence query = mQueryTextView.getText();
    if(query == null) {query = "";}
    if (mOnQueryChangeListener == null
                || !mOnQueryChangeListener.onQueryTextSubmit(query.toString())) {
        if (mSearchable != null) {
                launchQuerySearch(KeyEvent.KEYCODE_UNKNOWN, null, query.toString());
                setImeVisibility(false);
         }
         dismissSuggestions();
    }
} 
```

如果其他人遇到此问题，希望这会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T15:48:33.390

也许它不适合您的应用程序，但您也可以选择使用简单的`EditText`，然后添加`TextWatcher`侦听器。这样，即使用户输入了一个空字符串，您也可以捕获每个输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-15T09:08:00.120

我对 SearchView 有同样的问题，但我不想使用 ActionBarSherlock，所以我想出了解决方案，包括设置您自己的 SearchView 的样式，如指南[http://novoda.com/blog/styling-the-actionbar-searchview/](http://novoda.com/blog/styling-the-actionbar-searchview/)和为 EditText 设置 OnEditorActionListener（[当用户按 Enter 时如何触发操作？](https://stackoverflow.com/questions/4209404/how-do-i-trigger-an-action-when-the-user-has-hit-enter)），它是 SearchView 的一部分。

```
final SearchView searchView = (SearchView)findViewById(R.id.search);
int searchPlateId = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
EditText searchPlate = (EditText) searchView.findViewById(searchPlateId);
searchPlate.setOnEditorActionListener(new TextView.OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {

        if (actionId == EditorInfo.IME_ACTION_SEARCH) {
            //Do something
        }
        return false;

    }); 
```

# c# - System.Reflection.Assembly.GetExecutingAssembly() 总是返回 0.0.0.0

> ID：15992883
> 
> 赞同：5
> 
> 时间：2013-04-13T21:02:09.430
> 
> 标签：c#, reflection, asp.net-mvc-4

我用这个修改了我的 assemblyinfo.cs：

```
[assembly: AssemblyVersion("1.0.*")] 
```

并在 _layout.cshtml 上放了这个，这样我就可以识别出我正在测试哪个版本：

```
 @System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString() 
```

它总是打印`0.0.0.0`

当我去 bin 文件夹并检查 dll 属性时，版本说 1.0.343.2323 所以我不明白吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T21:06:51.297

显示的程序集名称是一些`runtime assembly loaded by IIS`，`EntryAssembly`如果您的应用程序的入口点位于您更新了 AssemblyInfo 的程序集中，则使用该名称 -

```
Assembly.GetEntryAssembly().GetName().Version.ToString(); 
```

如果它与调用程序集不同，您可以这样做 -

```
Assembly.GetAssembly(typeof(YourAssembly.AnyClass)).GetName().Version.ToString(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T21:05:48.353

看起来正在执行的程序集不是您编译的程序集，而是由 IIS 创建的动态程序集。

尝试使用

```
typeof(Your_Type_From_NonWeb_Assembly).Assembly.GetName().Version.ToString() 
```

# java - Akka 平衡调度程序配置

> ID：15992885
> 
> 赞同：3
> 
> 时间：2013-04-13T21:02:19.780
> 
> 标签：java, scala, akka

我在 src/main/resources 中创建了一个文件 application.conf，如下所示：

```
balancing-dispatcher {
  type = BalancingDispatcher
  executor = "thread-pool-executor"
} 
```

文件中没有其他内容。

在创建一个尝试使用调度程序的新 Actor（通过我使用 Akka TestKit 的测试套件）时，我收到以下错误消息：

```
[WARN] [04/13/2013 21:55:28.007] [default-akka.actor.default-dispatcher-2] [Dispatchers] Dispatcher [balancing-dispatcher] not configured, using default-dispatcher 
```

然后我的程序正确运行，尽管只使用一个线程。

此外，我打算将我的程序打包到一个库中。akka 文档说明了这一点：

```
If you are writing an Akka application, keep you configuration in application.conf at
the root of the class path. If you are writing an Akka-based library, keep its 
configuration in reference.conf at the root of the JAR file. 
```

到目前为止，我已经尝试过这两种方法，但都没有奏效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:09:17.807

由于`application.conf`找不到您，我只能假设这`src/main/resources`不是您的构建路径的一部分（在不知道您用于构建的工具的情况下无法进一步评论）。

一件小事：你为什么`"thread-pool-executor"`在那里使用？我们发现默认值`"fork-join-executor"`可以更好地扩展。

您对一个线程的评论表明您只创建了一个演员；使用 a`BalancingDispatcher`不会自动创建更多参与者，您必须告诉 Akka 以某种方式执行此操作（例如，手动或通过 a 创建同一参与者的多个实例`Router`）。

`reference.conf`与的问题`application.conf`更多的是设置的性质之一。如果您的库想要从配置中获取自己的设置，那么默认值应该进入`reference.conf`; 这就是设计理念，也是这个文件总是被隐式合并的原因。默认值应该只在那个文件中，而不是在代码中。

# visual-c++ - 如何使用这种类型的 typedef？

> ID：15992887
> 
> 赞同：0
> 
> 时间：2013-04-13T21:02:25.757
> 
> 标签：visual-c++, typedef

在我的头 api 文件中有这个。（不是我的代码）

```
typedef void (WINAPI *PIN_FUNC)(char*,LPVOID);
__PINLIB__ int WINAPI PIN_GetNumeric(int m_id,char * Message,PIN_FUNC func,LPVOID Param); 
```

在某一时刻，我通过在我的代码中执行此操作使其工作

```
static void WINAPI Pinpad_Handle(char *buf, LPVOID pParam);
void WINAPI PinpadHelper::Pinpad_Handle( char *buf, LPVOID pParam){...} 
```

但我有一种明显的感觉，我做错了。作为 VC++ 的新手，我不知道如何解决它。我在 typedef 上阅读的教程主要讨论了变量和抽象等（我理解它的那一面）我认为我可以做到这一点

```
static PIN_FUNC PinpadEvent(char* buffer, LPVOID pParam); 
```

但这会在 Visual Studio 中引发错误。我该如何正确地做到这一点？还是我第一次做对了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:55:46.097

你本来就做对了。PIN_FUNC 只是一个 C 函数指针声明。您必须编写一个与函数指针具有完全相同签名的 C 函数。你做了什么，你的原始代码没有错。如果您尝试分配函数指针并且函数签名错误，编译器会生成错误。许多程序员犯了将错误排除在外的错误，这是一个致命的错误，在运行时会严重爆炸。所以永远不要那样做。

不太确定您在最后一个片段中尝试做什么。如果要声明自己的变量来存储函数指针，则需要如下所示：

```
 static PIN_FUNC PinpadEvent; 
```

当然，它仍然需要分配。如果您仍然感到困惑，请查看您最喜欢的有关函数指针的 C 语言编程书籍。

# php - 将“px”附加到文本输入值的末尾

> ID：15992888
> 
> 赞同：2
> 
> 时间：2013-04-13T21:02:34.000
> 
> 标签：php, jquery, forms, input

基本上，我有很多选项可以让用户更改像素值。例如：字体大小、容器宽度等。

在这些特定的文本输入中，我希望“px”跟随保存时的值。如果“px”不可选择且无法删除，那将是理想的选择。这将使用户能够仅更改整数，同时确保“px”在插入数据库时​​跟随整数。

我不确定什么样的编程可以实现这一点，但我猜它会是 javascript/jQuery。

谁能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:08:29.520

我喜欢 Twitter Bootstrap 的做法：

![在此处输入图像描述](https://i.stack.imgur.com/3IBNX.png)

的HTML：

```
<div class="input-append">
    <input class="span1" type="text" />
    <span class="add-on">px</span>
</div> 
```

**演示：http: [//jsfiddle.net/Uc2sc/](http://jsfiddle.net/Uc2sc/)**

您还可以将输入字段后的文本设为下拉列表。

# ios - UIPageViewController - 使用警报验证翻页

> ID：15992889
> 
> 赞同：0
> 
> 时间：2013-04-13T21:02:34.637
> 
> 标签：ios, objective-c, uipageviewcontroller

我正在使用 UIPageViewController 处理数据输入，其中最后一页是活动记录，前一页是无法编辑的旧记录。所以我需要一种方法来验证用户是否想要离开最后一页，同时允许所有其他页面像往常一样导航。

理想情况下，我真的可以使用 -(BOOL)pageShouldTurn 方法，但这不存在。

有谁知道一种方法来检测页面是否即将卸载然后根据某些条件停止翻页？我对手势识别器方法没有任何运气，因为即使设置了委托，它们似乎也不会被触发。

感谢 Michael，我已将此添加到我的 pageViewController 中，它完全符合我的需要：

```
-(void)pageViewController:(UIPageViewController *)pvc willTransitionToViewControllers:(NSArray *)pendingViewControllers
{
    if ([pvc.viewControllers.lastObject pageIndex] == [self.pageDataSource.allObjects count]) {
        UIAlertView *alertDialog;
        alertDialog = [[UIAlertView alloc]
                       initWithTitle:@"Are You Done?"
                       message:@"Once you leave this page you can't edit this record again"
                       delegate:self
                       cancelButtonTitle:@"OK"
                       otherButtonTitles: nil];
        [alertDialog show];
    }
} 
```

所以警告框只停止翻页一次。当它被关闭时，用户可以更改页面。我的版本检查以确保这只发生在最后一页，您可以删除“if”语句并在每次翻页时发出警报，但这会很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:12:21.390

在我看来，至少有两种选择。

第一，你有[“ `- (void)pageViewController:(UIPageViewController *)pageViewController willTransitionToViewControllers:(NSArray *)pendingViewControllers`”](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIPageViewControllerDelegateProtocolRef/UIPageViewControllerDelegate.html#//apple_ref/occ/intfm/UIPageViewControllerDelegate/pageViewController%3awillTransitionToViewControllers%3a)。您可能能够在那里捕捉到转换并拒绝/强制重置旧页面。

或者，您现在可以子类化 " `UIPageViewController`" 并且在子类化控制器中，您可以定义一个新的委托协议（包含所有原始的`UIPageViewControllerDelegate`" 方法），并且可以添加自己的 " `-(BOOL) pageShouldTurn`" 协议方法。

这两种可能性都需要 iOS 6。

# r - R图中的轴格式和网格线

> ID：15992892
> 
> 赞同：0
> 
> 时间：2013-04-13T21:02:42.237
> 
> 标签：r, plot, data-visualization, linegraph

我有一个类似以下的数据集：

```
data<-data.frame(x=c(50,100,250,400),y1=c(0.74,0.75,0.82,0.79),y2=c(0.81,0.83,0.87,0.88)) 
```

我生成这样的情节：

```
plot(data$x,data$y1,type='l',col="red",xaxs='i',yaxs='i',ylim=c(0.4,1),xlim=c(50,500))
lines(data$x, data$y2, type='l',col="blue") 
```

生成的图是：

![在此处输入图像描述](https://i.stack.imgur.com/2jcrT.png)

我怎样才能在这个情节上进行以下修改？

*   1）当前X轴从50开始。但它没有明确标记50。

*   2）当前X轴标记为 `100, 200, 300, 400, 500`，我可以标记为`50,100, 250,500`吗？

*   3) 当前 Y 轴标记为`0.5, 0.6,0.7.0.8,0.9,1.0`。我可以将其标记为`0.5, 0.55, 0.6, 0.65, 0.7,0.75, 0.8, 0.85, 0.9, 0.95, 1`吗？

*   4）我想添加一些平行于X轴的网格线。这些线应该从`0.5, 0.55, 0.6, 0.65, 0.7,0.75, 0.8, 0.85, 0.9, 0.95, 1`沿 Y 轴的点开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T00:39:25.503

```
data<-data.frame(x=c(50,100,250,400),y1=c(0.74,0.75,0.82,0.79),y2=c(0.81,0.83,0.87,0.88))

windows()
plot(data$x,data$y1,type="l",col="red", ylim=c(0.5,1),xlim= c(50,500),col.axis = "white")
axis(1, xaxp=c(50,500,9))
axis(2, yaxp=c(0.5,1,10)) 
lines(data$x, data$y2, type='l',col="blue")

for(i in c(0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95)) {
lines(c(50,500),c(i,i),type="l",lty=2,lwd=0.5, col="black")
rm(i)
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/0uPQf.png)

# sorting - 如何使用 OCaml 中的列表实现计数排序 (O(n))？

> ID：15992893
> 
> 赞同：1
> 
> 时间：2013-04-13T21:02:49.760
> 
> 标签：sorting, functional-programming, ocaml

`Counting sort`如果要排序的数字在已知范围内，则使用数组并且可以具有 O(n) 性能。

但是是否可以`list`仅使用 OCaml 来实现计数排序？

我的直觉是可以模拟`counting sort`使用`list`和`map`不使用可变数组，但性能不会是 O(n)。

如果是这样，`counting sort`在不使用可变事物的情况下，真的对 OCaml 应用程序有任何帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T01:53:44.453

我相信，是的，没有数组就不可能实现 O(n) 计数排序。你在问什么？

# php - 在php的动态函数中分配静态数组的值

> ID：15992895
> 
> 赞同：1
> 
> 时间：2013-04-13T21:02:57.020
> 
> 标签：php, arrays, static

我有一个小问题。我尝试将取自静态数组的值分配给动态函数中的局部变量。据我所知...这在其他语言中不是问题...

难道我做错了什么？

我正在使用的代码：

```
<?php
class SampleClass {
    private static st_ar = array(1 => '1', 2 => '2');

    private function work() {
        lv = st_ar[1]; //gives an error: Parse error: syntax error, unexpected '=' 
        //other work with lv...
    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T21:03:58.960

您需要使用`self`关键字来访问静态成员。`$`您的变量名中也缺少：

```
lv = st_ar[1]; 
```

需要是：

```
$lv = self::st_ar[1]; 
```

# vb.net - vb..NET 暂停/恢复文件复制（如 windows 8 按钮）

> ID：15992896
> 
> 赞同：0
> 
> 时间：2013-04-13T21:03:10.080
> 
> 标签：vb.net, visual-studio-2010, dll, file-io, visual-studio-2012

我们可以暂停和恢复文件副本吗？

*   使用 ：

3 `Button`_ 1 `OpenFileDialog`_ 1`FolderBrowserDialog`

*   进口：

    `Imports System.IO`

*   代码 ：

    ```
    Private Sub BTN_filedialog_Click(sender As Object, e As EventArgs) Handles BTN_filedialog.Click

    OpenFileDialog1.InitialDirectory = "::{20D04FE0-3AEA-1069-A2D8-08002B30309D}" 'Cette clé de registre ouvre "Ordinateur"
    OpenFileDialog1.Title =
    OpenFileDialog1.FileName = ""
    OpenFileDialog1.Filter = _
    "All files (*.*)|*.*|txt files (*.txt)|*.txt"

    Dim dlgResult = OpenFileDialog1.ShowDialog()

    If dlgResult <> System.Windows.Forms.DialogResult.OK Then
        MessageBox.Show("File Error " & dlgResult)
    End If
    End Sub

    Private Sub BTN_folderbrowserdialog_Click(sender As Object, e As EventArgs) Handles BTN_folderbrowserdialog.Click

    Dim dlgResult = FolderBrowserDialog1.ShowDialog()
    If dlgResult <> System.Windows.Forms.DialogResult.OK Then
        MessageBox.Show("Folder Error " & dlgResult)
    End If
    End Sub

    Private Sub BTN_copyfile_Click(sender As Object, e As EventArgs) Handles BTN_copyfile.Click

    My.Computer.FileSystem.CopyFile( _
    OpenFileDialog1.FileName, _
    FolderBrowserDialog1.SelectedPath & "\" & _
    OpenFileDialog1.SafeFileName, _
    FileIO.UIOption.AllDialogs)
    End Sub 
    ```

我用`My.Computer.FileSystem.CopyFile`

在 Windows 8 中，在“复制”对话框内，有一个暂停按钮。

怎么称呼这个“事件”？

我不知道这是否可能，但是我们可以将参数发送到某个 Lib/. dll来**模拟按下暂停键的动作**？

Ps：对不起我的英语不好，我是法国人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:16:51.097

解决此问题的最佳方法是完全忽略 FileSystem.CopyFile 命令。相反，使用 FileStream 打开您要复制的文件，读取字节，创建一个新文件到目标目的地，然后将字节写入该位置。

您可以以较小的块读取和写入文件，以便检查暂停变量是否设置为 true。例如，如果您创建一个暂停按钮，请设置一个全局变量“bCopyPaused = true”。在自定义复制功能中，您可以使用简单的 if 语句并检查 bCopyPaused == true 是否并暂停操作。您需要跟踪最后复制或写入的字节以允许恢复操作。

下面是一些使用 FileStream 的例子：http: [//vb.net-informations.com/files/vb.net_FileStream.htm](http://vb.net-informations.com/files/vb.net_FileStream.htm)

# bash - 如何在bash中连接用printf格式化的字符串

> ID：15992897
> 
> 赞同：8
> 
> 时间：2013-04-13T21:03:14.963
> 
> 标签：bash, shell, printf

我需要在循环中连接几个字符串并将结果分配给变量：

格式化字符串示例：

```
result=$(printf '| %-15s| %-25s| %-15s| %-15s| %-15s\n' $size $name $visits $inbound $outbound); 
```

在我看来，它应该像这样工作：

```
result=''
while read somevar
do
    ...
    outbound=`cat "$www_path/$name/access.log"|grep \`date +"%d/%b/%Y"\`|awk '{ sum+=$11} END {print sum/1024/1024}'`
    result=$(printf '%s| %-15s| %-25s| %-15s| %-15s| %-15s\n' $result $size $name $visits $inbound $outbound);
    ...
done
echo $result 
```

但它没有:(

**升级版：**

完整代码清单如下：

```
www_path='/var/www';
result='';
cd /var/www/; ls -d */ | while read i ; do basename "$i" ; done
while read i;
do du -sh "$i"|
        while read size name
        do
                visits=`cat "$www_path/$name/access.log"|grep \`date +"%d/%b/%Y"\`|grep -v "internal dummy connection"|awk -F ' ' '{print $1}'  | sort | uniq | wc -l|tr '\n' '\t'|sed 's/$/\t/'`
                inbound=`cat "$www_path/$name/access.log"|grep \`date +"%d/%b/%Y"\`|grep -v "internal dummy connection"|awk '{ sum+=$10} END {print sum/1024/1024}'|tr '\n' '\t'|sed  's/$/\t\t/'`
                outbound=`cat "$www_path/$name/access.log"|grep \`date +"%d/%b/%Y"\`|grep -v "internal dummy connection"|awk '{ sum+=$11} END {print sum/1024/1024}'`;
                result=$(printf '%s| %-15s| %-25s| %-15s| %-15s| %-15s\n' "$result" "$size" "$name" "$visits" "$inbound" "$outbound")
        done
done
echo $result 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-13T21:28:11.023

如果要将 $result 和所有其他可能包含空格和其他特殊字符的变量用作程序或内置函数的单个参数，请在它们周围使用双引号：

```
result=$(printf '%s| %-15s| %-25s| %-15s| %-15s| %-15s\n' "$result" "$size" "$name" "$visits" "$inbound" "$outbound") 
```

如果您只想将 printf 的结果分配给一个变量（就像您所做的那样），您也可以使用

```
printf -v result '%s| %-15s| %-25s| %-15s| %-15s| %-15s\n' "$result" "$size" "$name" "$visits" "$inbound" "$outbound" 
```

顺便说一句：还有一个 += 赋值运算符，它只是附加到字符串（参见 bash 手册页，PARAMETERS 部分）。

在完整的代码清单中，在第二个“while read i”之前的“done”之后缺少一个管道符号。

当你打电话时

```
echo $result 
```

$result 的内容已经丢失，因为 printf 是在“do du ...”之后由管道符号创建的子进程中调用的。父进程无法访问子进程的（环境）变量。

我宁愿将代码重写为类似

```
result=""
for name in /var/www/* ; do 
    read size __ < <(du -sh "$name")
    name=${name##*/}
    #insert the other stuff here and add arguments to printf
    printf -v line '| %-15s| %-25s\n' "$size" "$name"
    result+=$line
done
echo "$result" 
```

`read < <(cmd)`表达式类似，但前者将`cmd | read`命令放在子进程中，而读取在主进程中执行。这样，通过 read 设置的变量也可以在后续命令中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T21:17:47.627

您的代码看起来不错。您需要做的一件事`result`是引用它的扩展名，因为在添加时会包含空格：

```
result=$(printf '...' "$result" "$size" "$name" ...) 
```

引用其他变量可能不是必需的，但这通常是一个好主意。

然而，未能引用`$result`不应导致它完全空白。您可能需要在`while`循环中发布更多代码。

# java - 无法将数据从 sqlite 设置到 Listview

> ID：15992906
> 
> 赞同：0
> 
> 时间：2013-04-13T21:03:56.187
> 
> 标签：java, android, sqlite

此代码有效

```
public class listActivity extends ListActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    testAdapter mDbHelper = new testAdapter(this);

    mDbHelper.open();
    Cursor c = mDbHelper.getAllData();

    String[] from = new String[] { "name", "title" };

    CursorAdapter dataSource = new SimpleCursorAdapter(this,
            R.layout.list_row, c, from, new int[] { R.id.name,
                    R.id.title});

    setListAdapter(dataSource);

    mDbHelper.close();
} 
```

但是当我尝试在我的一个布局中将适配器设置为列表视图时，它只会崩溃

```
public class listActivity extends ListActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    testAdapter mDbHelper = new testAdapter(this);

    mDbHelper.open();
    Cursor c = mDbHelper.getAllData();

    String[] from = new String[] { "name", "title" };

    CursorAdapter dataSource = new SimpleCursorAdapter(this,
            R.layout.list_row, c, from, new int[] { R.id.name,
                    R.id.title});

    ListView itemList = (ListView)findViewById(R.id.itemsList);
    itemList.setAdapter(dataSource);   // line 29 where it crashes

    mDbHelper.close();
} 
```

这就是 LogCat 抛出的

```
04-13 20:58:09.331: E/DataAdapter(929): opened db
04-13 20:58:09.451: D/AndroidRuntime(929): Shutting down VM
04-13 20:58:09.451: W/dalvikvm(929): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-13 20:58:09.521: E/AndroidRuntime(929): FATAL EXCEPTION: main
04-13 20:58:09.521: E/AndroidRuntime(929): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.app/com.example.app.listActivity}: java.lang.NullPointerException
04-13 20:58:09.521: E/AndroidRuntime(929):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-13 20:58:09.521: E/AndroidRuntime(929):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-13 20:58:09.521: E/AndroidRuntime(929):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-13 20:58:09.521: E/AndroidRuntime(929):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-13 20:58:09.521: E/AndroidRuntime(929):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 20:58:09.521: E/AndroidRuntime(929):  at android.os.Looper.loop(Looper.java:123)
04-13 20:58:09.521: E/AndroidRuntime(929):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-13 20:58:09.521: E/AndroidRuntime(929):  at java.lang.reflect.Method.invokeNative(Native Method)
04-13 20:58:09.521: E/AndroidRuntime(929):  at java.lang.reflect.Method.invoke(Method.java:507)
04-13 20:58:09.521: E/AndroidRuntime(929):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-13 20:58:09.521: E/AndroidRuntime(929):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-13 20:58:09.521: E/AndroidRuntime(929):  at dalvik.system.NativeStart.main(Native Method)
04-13 20:58:09.521: E/AndroidRuntime(929): Caused by: java.lang.NullPointerException
04-13 20:58:09.521: E/AndroidRuntime(929):  at com.exmaple.app.listActivity.onCreate(listActivity.java:29)
04-13 20:58:09.521: E/AndroidRuntime(929):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-13 20:58:09.521: E/AndroidRuntime(929):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-13 20:58:09.521: E/AndroidRuntime(929):  ... 11 more 
```

我已经为此苦苦挣扎了好几个星期，所以请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:19:07.417

你还没有调用`setContentView()`，代码找不到你的`R.id.itemsList`视图。`itemsList`一片空白。

# asp.net-web-api - 如何从 Windows Phone 8 调用 ASP.NET MVC Web Api 服务？

> ID：15992919
> 
> 赞同：0
> 
> 时间：2013-04-13T21:04:56.743
> 
> 标签：asp.net-web-api, windows-phone-8, webclient

我正在尝试调用从 Windows Phone 8 应用程序上传到云的服务。问题是我总是收到 404 响应。这很有趣，但该服务是从我之前构建的 Windows 8 应用程序中成功调用的。这是我的代码：

```
WebClient client = new WebClient();
        client.DownloadStringCompleted += client_DownloadStringCompleted;
        client.DownloadStringAsync(new Uri("http://heronmobileapi.azurewebsites.net/api/events?parameter=showcase", UriKind.Absolute));

void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        string result = e.Result; 
    } 
```

我也尝试过使用 HttpWebRequest 和 HttpWebResponse 但没有成功。我在本地机器上调用这个服务也有问题，但现在它在互联网上，应该很容易调用。有什么建议么？

# android - Android C++ framebuffer ioctl，只有root？

> ID：15992923
> 
> 赞同：1
> 
> 时间：2013-04-13T21:05:19.117
> 
> 标签：android, c++, android-ndk

我正在尝试在 android 本机 C++ 代码中使用 ioctl。我想知道是否可以在非root设备上使用？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:45:54.767

一般来说，出于安全原因（例如网络钓鱼计划），任何让您访问帧缓冲区的东西都将禁止非特权应用程序使用。

并非所有设备都具有线性帧缓冲区，并且许多设备更喜欢硬件覆盖而不是帧缓冲区 blit，因此无论您想到什么都可能不起作用，即使这样做也可能无法移植。

# css - CSS图像背景对边距不起作用

> ID：15992932
> 
> 赞同：1
> 
> 时间：2013-04-13T21:05:50.247
> 
> 标签：css

为什么我的背景图像不会在边缘区域重复？
有如何使边缘背景透明或类似的东西？
所以它会出现背景页面。

这是问题的图像（红线只是我添加到调试中的 div 边框）：
![在此处输入图像描述](https://i.stack.imgur.com/pvdQe.png)

这是我的 CSS 代码：

```
html { 
  background: url(/img/bg.png); 
  background-repeat:repeat;
}

table.display {
    margin: 0 auto;
    clear: both;
    width: 100%;
    table-layout:fixed;
}

#dt_div  {
    border: red 4px dashed;
    width:96%;
    margin-left:auto;
    margin-right:auto;
} 
```

* * *

和 HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link rel="shortcut icon" type="image/ico" href="http://www.datatables.net/favicon.ico" />

        <title>DataTables Editor example</title>
        <style class="include" type="text/css">
            @import "support/bootstrap/css/bootstrap.css";
            @import "support/bootstrap/dataTables/dataTables.bootstrap.css";
            @import "css/customTable.css";
        </style>

        <script class="include" type="text/javascript" charset="utf-8" src="../../../media/js/jquery.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="../../../media/js/jquery.dataTables.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="../../TableTools/media/js/TableTools.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="../../TableTools/media/js/ZeroClipboard.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="../media/js/dataTables.editor.js"></script>

        <script class="include" type="text/javascript" charset="utf-8" src="support/bootstrap/js/bootstrap.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="support/bootstrap/dataTables/dataTables.bootstrap.js"></script>
        <script class="include" type="text/javascript" charset="utf-8" src="support/bootstrap/dataTables/dataTables.editor.bootstrap.js"></script>

        <script class="include" type="text/javascript" charset="utf-8" src="./js/custom.js"></script>
        <script type="text/javascript">
            aDataInitial = '<?php  echo json_encode($stack);?>';
        </script>
    </head>
    <body id="c_body" style="border: red 4px dashed;">
        <div id="mContainer" style="border: red 4px dashed;">
            <div id="dt_div">
                <table class="table table-striped table-bordered display" id="example">
                    <thead>
                        <tr>
                            <th style="text-align: center;">Data</th>
                            <th style="text-align: center;">Tema</th>
                            <th style="text-align: center;">V&iacute;nculo</th>
                            <th style="text-align: center;">Empresa</th>
                            <th style="text-align: center;">Sub contratada</th>
                            <th style="text-align: center;">NDP</th>
                            <th style="text-align: center;">CH</th>
                            <th style="text-align: center;">HHT</th>
                            <th style="text-align: center;">Ger&ecirc;ncia</th>
                            <th style="text-align: center;">&Aacute;rea Solicitante</th>
                            <th style="text-align: center;">CC</th>
                            <th style="text-align: center;">Rateio</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div class="spacer"></div>

        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:18:09.990

我想你正在寻找`background-image`.

```
html { 
  background: url(/img/bg.png); 
  background-repeat:repeat;
} 
```

应该

```
body { 
  background-image: url('/img/bg.png'); 
  background-repeat: repeat;
} 
```

您还可以将所有选项集中`background`到 MDN 文档中：[https](https://developer.mozilla.org/en-US/docs/Web/CSS/background) ://developer.mozilla.org/en-US/docs/Web/CSS/background （使用时`background`您仍然可以在覆盖后指定`background-image`,`background-repeat`等。 )

# iphone - 将项目中的标头包含到静态库中

> ID：15992937
> 
> 赞同：0
> 
> 时间：2013-04-13T21:06:19.253
> 
> 标签：iphone, ios, ipad, cocoa-touch, cocoa

我的项目中有一个子项目（静态库）。

由于这个静态库可能被一堆应用程序使用，我的项目中有这个 config.h 文件，其中包含应用程序配置。静态库必须读取它。

问题是添加

```
#import "config.h" 
```

静态库上失败，因为找不到文件。

我可以在搜索标题上添加一个绝对路径到我的项目根目录，但我想让它不被硬编码，因为这个静态库将被其他项目使用。另一个问题是我不能使用像 ../.. 这样的相对链接，例如，因为静态库在另一个卷上。

在静态库的搜索路径中包含 $(SRCROOT) 将为我提供该库的根目录，而不是使用它的项目的根目录，这就是我想要的。

我该如何解决？

请注意我的问题。我在一个项目使用的静态库中。Config.h 在项目中。我想在我的静态库中导入那个 config.h。

如果有一个简单的方法可以做到这一点，请告诉我。

我已经上传了一个示例项目到**[这里](http://dfiles.eu/files/vj7egy9ig)**和**[这里](http://www.sendspace.com/file/dfvs09)**，所以你可以看到我的痛苦。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:12:10.490

一种方法，有点骇人听闻，是将**Run Script**添加到每个 App 的**Build Phase**中，作为第一项，并将 Config.h 复制到某个已知位置 - /tmp/Config.h，您包含的库将看起来在那里。由于文件在每次构建时都被复制，所以它总是正确的。

EDIT1：所以不漂亮，但您可以在库中的依赖项下添加一个运行构建脚本。只需添加一个并保留复选框设置以显示环境变量。你可以看到这一组：

FILE_LIST=/Volumes/Data/Users/dhoerl/Library/Developer/Xcode/DerivedData/MyProject-fdzaatzqtmrnzubseakedvxmsgul/Build/Intermediates/MyStaticLibrary.build/Debug-iphoneos/MyStaticLibrary.build/Objects/LinkFileList

您可以看到其中几个以当前项目文件夹为前缀：

/Volumes/Data/Users/dhoerl/Library/Developer/Xcode/DerivedData/MyProject-

您可以在那里编写一些脚本来获取前缀，然后附加本地 Config.h 文件路径，现在您有了 Config.h 标头的完全限定路径，然后您可以将其复制到库中的已知位置。我将在 xcode 论坛上发帖，因为可能有更好的解决方案 - 曾经在 Xcode 3 中。如果我得到任何实质性的回复，我会更新这个。

EDIT2：试试这个：1）点击库，点击构建阶段，通过点击右下角的“+”按钮添加一个运行脚本构建阶段

2）将其拖动到列表中的第二项（在目标依赖项下方）

3) 将外壳更改为“/bin/ksh”

4）在编辑它以获得正确的文件/路径后，将其粘贴：

```
# Get the Project Name (assumes upper/lower/numbers only in name)
PROJ=$(echo $BUILD_DIR | sed -En -e 's/(\/.*\/)([A-Za-z0-9]+)-([a-z]+\/Build\/Products)/\2/p')
# Use this variable to construct a full path
FULL_PATH="/Volumes/Data/Users/dhoerl/Downloads/nightmare/"$PROJ"/"$PROJ"/HelloWorldLayer.h"
echo FULL_PATH equals $FULL_PATH
# Make Sure MyStaticLibrary is correct
echo PROJ_DIR equals "$PROJECT_DIR/MyStaticLibrary"
cp -f "$FULL_PATH" "$PROJECT_DIR/MyStaticLibrary" 
```

5）这假设您将库放在您想要的任何位置，但每个 App 项目必须具有相同的父文件夹（没有太大限制 - 我过去所做的）。

PS：当我做这种事情时，我通常不包含应用程序的实际文件，而是为一个没有在库中实例化的类创建一个头文件。让我们称之为Foo。所以在你的库中，你有 Foo.h，它有很多返回信息的方法——小部件的数量、一些特殊文件夹的位置、plist、数组、字典等等。这个想法是库知道如何通过这个接口获得它需要的任何东西（类单例，或者只是一个具有类方法的类。YMMV。

PSS：其他人读到这个，创建演示项目是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:59:13.890

我会走不同的路线。使用其中的编译器符号将此 config.h 文件作为静态库的一部分来切换功能。然后在您的项目中根据您需要的功能定义这些符号。

# php - pg_fetch_array 错误

> ID：15992940
> 
> 赞同：0
> 
> 时间：2013-04-13T21:06:42.860
> 
> 标签：php, html, postgresql

这是我当前的 PHP 代码：

```
$sql = 'SELECT * from comments where post_id_fk=$post_id';

$users = $db->prepare($sql);
$users->execute();

while($row = pg_fetch_array($users, 0, PGSQL_ASSOC)) 
```

出于某种原因，我不断收到以下错误：

> 警告：pg_fetch_array() 期望参数 1 是资源，在第 39 行的 /home/se212004/public_html/content.html 中给出的对象`

行号是指带有`while`循环的行。我已经尝试修复它几次，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:24:52.733

您正在使用 PDO 来准备和执行语句，我相信您也应该使用它来获取结果。所以，基本上，你必须做这样的事情：

```
$sql = 'SELECT * from comments where post_id_fk=$post_id';

$users = $db->prepare($sql);
$users->execute();

$results = $users->fetchAll(); 
```

或者你可以这样做：

```
$sql = 'SELECT * from comments where post_id_fk=$post_id';

$users = $db->prepare($sql);
$users->execute();

while ($row = $users->fetch(PDO::FETCH_ASSOC)){
      // do something with each row
} 
```

# javascript - 如何查看像素的颜色是否为红色？（用jQuery）

> ID：15992941
> 
> 赞同：2
> 
> 时间：2013-04-13T21:06:46.907
> 
> 标签：javascript, jquery

我有一个图像，我想看看鼠标在它上面的像素是否是红色的，以决定在下面的函数中做些什么，我怎样才能知道像素是不是红色的？

```
$('#picture').mousemove(function(e) {} ;) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T21:09:53.637

你可以用画布做到这一点。在画布上绘制图像，然后使用`getImageData`方法可以获得图像的像素。作为最后一步，计算鼠标所在的正确像素并检查它的红色值（您将获得像素的 RGBA）。

可能最棘手的部分是找到正确的像素，但这应该不是大问题。使用画布的相对鼠标位置。您已经知道图像有多大，因此很容易找到像素。

# java - 创建 ArrayList 杂货清单并在表格中显示结果

> ID：15992944
> 
> 赞同：-2
> 
> 时间：2013-04-13T21:07:02.657
> 
> 标签：java, arraylist

我已经为这项任务工作了数周，需要一些帮助。请不要让我参考 JavaDocs，因为我已经无数次查看它们并且无法找到我的程序的解决方案。这是我需要做的：

1.  根据用户键入的输入，一次将项目添加到 ArrayList。将提示用户将字符串存储在 ArrayList 中，然后按 Enter。用户将能够继续向 ArrayList 添加项目，直到他们直接按 Enter 键而无需输入任何内容。

一旦用户执行此操作（无需键入任何内容就按 Enter），程序将在表格中显示 ArrayList 的所有元素，包括索引和字符串值。它将通过一个循环来完成

这是我到目前为止的代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Scanner;
import java.util.ArrayList;

// declares a name for the class
public class GroceryList2 {
    /**
     * Allows the program to be run and throws the Input-Output exception
     * error
     */
    public static void main(String[] args) throws IOException {
        BufferedReader userInput =
           new BufferedReader( new InputStreamReader(System.in));
        Scanner in = new Scanner(System.in);//allows for input
        // declares the ArrayList to be a String
        ArrayList<String> myArr = new ArrayList<String>();
        myArr.add("Milk");
        myArr.add("Cheese");
        myArr.add("Eggs");
        myArr.add("Bread"); //the values of the ArrayList already entereed
       // the loop that allows the criteria to run
        while(true) {
           if(myArr.isEmpty()== false ) {
              System.out.println("Enter the items for the grocery list: ");
              String item = in.next();//asks and allows for input
              myArr.add(item);
           }
           else if(myArr.isEmpty()== true ) {
              for (int i=0; i<myArr.size(); i++ ) {
                 // displays the list after the input
                 System.out.print(
                    "The Grocery List "+ i+ ": "+ myArr.get(i));
              }
           }
        }
     }
  } 
```

代码可以编译，但是当我按下回车键时，它不会显示购物清单，它会等待另一个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:09:11.693

更改 if 语句中的条件，只需交换它们即可。最好通过做来提高

```
if(myArr.isEmpty()) 
```

然后进入第二个

```
if(!myArr.isEmpty()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T15:51:06.840

@Cece 在`while`循环内部，您实际上并没有做您应该做的事情来达到您的目的。

首先，在每次迭代中`myArr.isEmpty()== false`都会验证条件（因为您的`myArr`数组永远不会为空，因为您在进入`while`循环之前已经填充了它），因此代码的执行将始终转到相同的条件分支。顺便说一句，您可以像这样更优雅地写这个：`!myArr.isEmpty`.

其次，您正在从用户那里读取字符串，但您所做的只是将它们添加到数组中。由于`else`永远不会到达分支，因此永远不会转储数组的内容。顺便说一句，`if`语句之后的`else`语句是多余的。您可以安全地删除它。

第三，您的代码的问题是您从不检查用户输入是否为空。相反，您检查的是 groceries 数组是否为空。

这就是我编写`while`循环的方式：

```
while(true){
    String item = in.next();
    if(item.isEmpty()){
        System.out.println("The Grocery List: ");
        for(int i=0; i<myArr.size(); i++) {
             System.out.println(i + ": "+ myArr.get(i));
        }
        break;
    }
    else{
        myArr.add(item);
    }
} 
```

如果您不理解我的代码的任何部分，请告诉我。

# python - 在 turbogears/sqlalchemy 中独一无二的 django

> ID：15992948
> 
> 赞同：2
> 
> 时间：2013-04-13T21:07:27.907
> 
> 标签：python, django, sqlalchemy, turbogears

这个问题本质上是两部分。1\. 我有一种情况，我要求事物是唯一的，即 db 中的元素需要彼此唯一。

假设我们有一个模型事物（Rough PseudoCode）

```
Class ShoppingList( object ):
     thing1_id = Column(Integer)
     thing2_id = Column(Integer) 
```

现在我需要thing1_id 和thing2_id 是唯一的，即thing1_id 和thing2_id 的集合必须是唯一的。来自 django 世界，我知道您可以在 unique_together 的 django 模型中进行元声明。但是在涡轮齿轮箱中怎么可能做到这一点。

1.  另外，我如何在遗留系统上实际应用 unique_together。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-19T13:54:07.550

您只是想在`UniqueConstraint`表定义中添加一个（使用主键可以达到类似的效果，但语义不同）。

这很简单：

```
Class ShoppingList( object ):
    thing1_id = Column(Integer)
    thing2_id = Column(Integer)

    __table_args__ = (
        UniqueConstraint('thing1_id', 'thing2_id'),
    ) 
```

另请参阅[https://docs.sqlalchemy.org/en/latest/orm/extensions/declarative/table_config.html#table-configuration](https://docs.sqlalchemy.org/en/latest/orm/extensions/declarative/table_config.html#table-configuration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T20:44:26.000

1.  对于您问题的第一部分，如果我正确理解您的问题，我相信您正在谈论定义*复合主键*的必要性。如[http://docs.sqlalchemy.org/en/latest/core/schema.html#describing-databases-with-metadata](http://docs.sqlalchemy.org/en/latest/core/schema.html#describing-databases-with-metadata)所述：

    > 可以为多个列分配 primary_key=True 标志，该标志表示多列主键，称为复合主键。

    在 SQLAlchemy 中使用声明性 ORM 方式在类上定义这样的关系应该很简单：

    ```
    class ShoppingList(Base):
        thing1_id = Column(Integer, primary_key=True)
        thing2_id = Column(Integer, primary_key=True) 
    ```

2.  至于您问题的第二部分，我相信您的意思是如何为现有的遗留数据库定义相同的 SQLAlchemy 映射。如果是这样，您应该可以使用上述方法，只是*不要*从 ORM 定义中创建数据库。您也可以使用*经典的映射*方式，描述于：[http ://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html?highlight=composite%20primary%20key#classical-mappings](http://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html?highlight=composite%20primary%20key#classical-mappings)

# java - 在 Android 中从 URI 获取文件路径时出错

> ID：15992951
> 
> 赞同：1
> 
> 时间：2013-04-13T21:07:51.830
> 
> 标签：java, android, file, uri

这是一个代码，它返回给定 URI 的文件路径。

```
public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    //String[] projection = { MediaColumns.DATA };

    Cursor cursor = getContentResolver().query(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaColumns.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

这适用于画廊中的图像，因为投影是 MediaStore.Images。如何获取所有其他目录的文件路径？该文件可以是文档类型，并且可以在 sd 卡的任何位置。我应该搜索什么投影文件路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T18:11:20.670

问题就在这里。它仅检查投影`Images`。因此，如果文件的类型不同，您将无法获得路径。`Exception`将被退回。也更好用：

```
 int column_index = cursor.getColumnIndex(MediaColumns.DATA); 
```

并使用您的 onw`try-catch`块。这将防止您的应用崩溃

# ruby-on-rails - Rails 过滤日期不返回结果

> ID：15992952
> 
> 赞同：1
> 
> 时间：2013-04-13T21:07:59.800
> 
> 标签：ruby-on-rails, datetime

我正在尝试使用此查询过滤在特定日期（今天）分配的记录：

```
assignments = p.assignments.where("assigned_date = ?", Date.today) 
```

即使我知道这些记录存在，我总是得到一个空白的结果。我也试过 ...where(:assigned_date => Date.today) 没有运气。

数据库架构是：

```
# == Schema Information
#
# Table name: assignments
#
#  id                   :integer         not null, primary key
#  name                 :string(255)
#  rep                  :integer
#  set                  :integer
#  instructions         :text
#  created_at           :datetime        not null
#  updated_at           :datetime        not null
#  player_id            :integer
#  actual_percentage    :float
#  predicted_percentage :float
#  assigned_date        :date
# 
```

在控制台中，当我输入

```
p.assignments.first.assigned_date == Date.today 
```

它返回真。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:14:42.990

DateTime 包含日期和时间，因此您正在寻找具有精确值的记录，而不仅仅是同一天。

```
assignments = p.assignments.where('assigned_date BETWEEN ? AND ?', DateTime.now.beginning_of_day, DateTime.now.end_of_day).all 
```

应该返回预期的结果

PS
所有学分给[Tadman](https://stackoverflow.com/questions/5943872/find-records-with-datetime-that-match-todays-date-ruby-on-rails)

# html - W3C 验证 - 为什么是 标签不被接受？

> ID：15992953
> 
> 赞同：2
> 
> 时间：2013-04-13T21:08:08.433
> 
> 标签：html, css, header, w3c

我正在尝试使用 W3C 验证器验证我的网页，并且每当我使用时它都会返回错误：

```
<header>Page Title</header> 
```

它给出的错误信息是：

> 元素“标题”未定义

我知道我可以`<h1>`改用，但只是好奇为什么不接受？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T21:18:02.587

`doctype`您使用的 (XHTML 1.0 Strict) 不正确，因为该标签`<header>`是 HTML 5 的新标签。

代替：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

和：

```
<!DOCTYPE html> 
```

重新验证，工作很好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T21:14:18.730

这对我来说是一个有效的标记

```
<!DOCTYPE html> <!-- <-- Watch out for this -->
<html lang="en">
   <head>
     <meta charset="utf-8" />
     <title>Demo</title>
   </head>
   <body>
     <header>
       Hello
     </header>
   </body>
</html> 
```

确保你没有使用`<header>`标签作为页面标题，并且你对`header`,`h1`元素的误解`h1`是代表页面的主要标题，它代表你的页面包含什么类型的东西，比如关于我们，我们的服务等，`header`标签在哪里用来说是的，这是我的页面标题，它将在所有页面上呈现，通常`nav`用于导航/菜单、徽标等

# windows-phone-7 - 底层画布事件中断滑块

> ID：15992957
> 
> 赞同：0
> 
> 时间：2013-04-13T21:08:24.083
> 
> 标签：windows-phone-7, xaml

我有一个画布和一个用户控件，定义如下：

```
 <Grid x:Name="ContentPanel" Grid.Row="0">

            <Canvas Name="GameCanvas">

                <Canvas.RenderTransform>
                    <CompositeTransform x:Name="CanvasRenderTransform" />
                </Canvas.RenderTransform>

                <toolkit:GestureService.GestureListener>
                    <toolkit:GestureListener DragStarted="GestureListener_DragStarted" DragDelta="GestureListener_DragDelta" Tap="GestureListener_Tap" PinchStarted="GestureListener_PinchStarted" PinchDelta="GestureListener_PinchDelta"/>
                </toolkit:GestureService.GestureListener>

            </Canvas>

            <Client:TileMenu HorizontalAlignment="Center" VerticalAlignment="Center" Name="TileOverlayMenu" />

        </Grid> 
```

这`<Client:TileMenu>`是一个包含一些文本框、一个滑块和两个按钮的用户控件。

这里的问题是，当我使用滑块时，它会被打断，迫使我一遍又一遍地滑动以达到想要的值。

如果我删除`<toolkit:GestureService.GestureListener>`用户控件中的滑块，则按预期工作。

用户控件位于`<Canvas>`，那么有没有办法可以禁用事件？在我拥有的 Canvas 事件中的所有事件上，`if (TileOverlayMenu.Visibility == System.Windows.Visibility.Visible) return;`但它仍然存在问题。

# php - 无法使用 mysql 查询填充下拉列表

> ID：15992958
> 
> 赞同：1
> 
> 时间：2013-04-13T21:08:24.210
> 
> 标签：php, html, drop-down-menu

我需要使用基本查询填充下拉列表，但无法。我之前意外填充了它，但我需要更改一些小的东西，它滚雪球失控，我无法再产生填充的下拉列表。

```
<html>
    <ul id="navigation">
        <li><a href="index.php">Home</a></li>
        <li><a href="view.php">Available Content</a></li>
        <li><a href="topic.php">Topics</a></li>
        <li><a href="login.php">Login</a></li>
        <li><a href="sign_up.php">Sign-Up</a></li>
        <li><a href="logout.php">Logout</a></li>
    </ul> 

    <form method="post" action="topicChosen.php">
        <select name="selectitem">
            <?php
            require_once 'needed.php';
            if (isset($_SESSION["p_id"])) {
                if ($stmt = $mysqli->prepare("Select distinct topic from topic")) {
                    $stmt->execute();
                    $stmt->bind_result($var1);
                    while ($stmt->fetch()) {
                        echo "<option value=\"$var1\">$var1</option>";
                    }
                }
            } else {
                //if user not logged in
            }
            ?>
        </select>
        <input type="submit" value="send">
    </form>

</html> 
```

![桌子](https://i.stack.imgur.com/MlPtx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:15:35.460

您不检查 MySQL 调用的返回值。添加至少`or die($mysqli->error)`以查看发生了什么问题

```
$stmt = $mysqli->prepare("Select distinct topic from topic") or die($mysqli->error);
if ($stmt) {
    $stmt->execute() or die($stmt->error);
    $stmt->bind_result($var1) or die($stmt->error);
    while ($stmt->fetch() or die($stmt->error)) {
        echo "<option value=\"$var1\">$var1</option>";
    }
} 
```

# angularjs - 取消/设置对象的标志并保持更改

> ID：15992961
> 
> 赞同：0
> 
> 时间：2013-04-13T21:08:44.600
> 
> 标签：angularjs, angularjs-service

我正在处理用户对象。我的服务文件：

```
angular.module('UserService',['ngResource']).factory('User', function($resource){
    var User = $resource('/api/users/:id',
        { 
          list: { method: 'GET' },
          lock: { method: 'PATCH' }
        }
    );   
    return User;
}); 
```

用户列表运行良好

```
<div ng:controller="UserController">
    <ul>
        <li ng-repeat="user in users">
            <a ng:click="select(user)">
              {{user.first_name}} {{user.last_name}}
            </a>
        </li>
    </ul>
</div> 
```

和项目文件：

```
var app = angular.module('module-users', ['UserService']);

app.config(function($routeProvider, $interpolateProvider) { 
    $routeProvider.when('/', {
        controller: UserController, 
        templateUrl: Routing.generate('template_user_list')
    });
});

function UserController($scope, User){
    $scope.users = User.query();

    $scope.selectedUser = null;

    $scope.select = function(user){
        $scope.selectedUser = user;
    }

    $scope.lock = function(user){
        user.lock();
        console.log('lock user');
    }
} 
```

但是，当我想执行用户锁定/解锁时，我收到一条错误消息，指出方法未知。有什么想法有什么问题吗？如何通过服务执行锁定？还有其他建议吗？

```
TypeError: Object #<Resource> has no method 'lock' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:29:07.027

正如[文件](http://docs.angularjs.org/api/ngResource.%24resource)所说：

> 可以使用以下参数调用类对象或实例对象上的操作方法：
> 
> HTTP GET“类”操作：Resource.action([parameters], [success], [error])
> 
> 非 GET “类”操作：Resource.action([parameters], postData, [success], [error])
> 
> 非 GET 实例操作：instance.$action([parameters], [success], [error])

因此，在您的情况下，您应该调用`$lock`而不是`lock`

**更新**

在您的代码中发现了另一个问题。动作参数应该作为第三个参数给出，而不是第二个。例如

```
var User = $resource('/api/users/:id',
        {}, //we have no default parameters
        { 
          list: { method: 'GET' },
          lock: { method: 'PATCH' }
        }
    ); 
```

# java - 我的代码请求抛出异常，但是当我这样做时，它说不应该抛出

> ID：15992976
> 
> 赞同：2
> 
> 时间：2013-04-13T21:10:03.370
> 
> 标签：java, exception-handling, overriding

编译程序时出现此错误：

```
./GUI/mainWindow.java:30: error: unreported exception Exception; must be caught or declared to be thrown 
            clientUI.initClientUI(); 
                             ^ 
1 error 
```

但我的方法实际上抛出了异常：

```
public final void initClientUI() throws Exception { 
```

但是，如果我删除“抛出异常”部分，尝试编译，然后再次添加，程序编译成功。谁能解释为什么会这样？

**编辑**：
如果我将“抛出异常”添加到我正在调用的方法中

```
public void actionPerformed(ActionEvent e) throws Exception { //<-----add Exception there
            ClientWindow clientUI = new ClientWindow();
            clientUI.initClientUI(); 
```

我收到此错误：

```
./GUI/mainWindow.java:28: error: actionPerformed(ActionEvent) in <anonymous GUI.mainWindow$1> cannot implement actionPerformed(ActionEvent) in ActionListener
        public void actionPerformed(ActionEvent e) throws Exception {
                    ^
  overridden method does not throw Exception
1 error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:12:26.417

通过说

```
public final void initClientUI() throws Exception { 
```

您是在告诉编译器`initClientUI()`允许抛出`Exception`或任何`Exception`. 由于`Exception`已检查，因此调用的任何方法都`initClientUI()`必须捕获`Exception`或将其列在其`throws`子句中。

我建议阅读[有关异常的教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:12:43.130

你的问题不是你的方法的声明，你的问题是你什么时候调用它。当您声明这样的方法时

```
public final void initClientUI() throws Exception 
```

你的编译器会知道它会抛出异常。很好，目前没有问题。但是当你调用它时，你必须处理这个异常。

所以当你说

```
client.initClientUI() 
```

您的编译器说“此方法引发异常，请处理它”。现在你有两个选择：

```
try {
    client.initClientUI()
}
catch(Exception e) {
    System.out.println(e);
} 
```

或声明您的方法`client.initClientUI()`也使用`throws Exception`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T21:14:56.200

`throws Exception`意味着您将它扔给调用方法，而调用方法应该负责`exception`通过再次扔它或用`try catch`.

你应该这样做

```
public void actionPerformed(ActionEvent e)  {
            try{
              ClientWindow clientUI = new ClientWindow();
              clientUI.initClientUI();
            }catch(Exception e){
              // handle exception
            } 
```

# silverlight - Silverlight WCF 数据绑定相关表

> ID：15992978
> 
> 赞同：0
> 
> 时间：2013-04-13T21:10:17.957
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

我有一张带有外键的表。我想将数据显示为描述，而不是相关表的 Id。从实体服务中，我已经`.Include`对数据模型进行了声明以使其返回。这是我尝试过的，电台出现在单元格中，但组合框中没有任何内容：

```
<sdk:DataGridTemplateColumn CanUserReorder="False" CanUserResize="False" CanUserSort="False" Width="Auto" Header="Station">
      <sdk:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
          <TextBlock Text="{Binding Station.Description}" />
        </DataTemplate>
      </sdk:DataGridTemplateColumn.CellTemplate>
      <sdk:DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
          <ComboBox ItemsSource="{Binding Station}" />
        </DataTemplate>
      </sdk:DataGridTemplateColumn.CellEditingTemplate>
    </sdk:DataGridTemplateColumn>

 <OperationContract()>
  Public Function LoadPersonnel(clientId As Integer) As List(Of Personnel)
    Dim result As List(Of Personnel)
    Try
      result = db.Personnels.Include("Station").Where(Function(o) o.ClientId = clientId).ToList
    Catch
      result = Nothing
    End Try
    Return result
  End Function 
```

也试过：

```
<ComboBox ItemsSource="{Binding}" DisplayMemberPath="{Binding Station.Description}" SelectedItem="{Binding Station.Description}" SelectedValue="{Binding Station.StationId}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:58:31.617

这样做，

```
 <sdk:DataGrid AutoGenerateColumns="False" Height="100" HorizontalAlignment="Left" Margin="107,90,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="251" >
            <sdk:DataGrid.Columns>
            <sdk:DataGridTemplateColumn CanUserReorder="False" CanUserResize="False" CanUserSort="False" Width="Auto" Header="Station">
                <sdk:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Station.Description}" />
                    </DataTemplate>
                </sdk:DataGridTemplateColumn.CellTemplate>
                <sdk:DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <ComboBox ItemsSource="{Binding Station}" DropDownOpened="ComboBox_DropDownOpened" />
                    </DataTemplate>
                </sdk:DataGridTemplateColumn.CellEditingTemplate>
            </sdk:DataGridTemplateColumn>
            </sdk:DataGrid.Columns>
        </sdk:DataGrid> 
```

在下拉打开的事件中，分配 itemssource，

```
 private void ComboBox_DropDownOpened(object sender, EventArgs e)
        {
            var combo = (ComboBox)sender;
            combo.ItemsSource = Station;
            combo.DisplayMemberPath = "Description";
        } 
```

# c - 使用 popen() 打开的文件描述符上的 pclose() 返回 errno 10（无子进程）

> ID：15992984
> 
> 赞同：4
> 
> 时间：2013-04-13T21:11:00.817
> 
> 标签：c, linux, popen, fread, pclose

我正在运行 linux，我尝试执行以下操作：

1.  在当前目录上运行 ls（使用 popen）
2.  将结果输出到缓冲区（使用管道描述符中的 fread）
3.  关闭管道（使用 pclose）。

一切正常（缓冲区已正确填充 ls 结果），但是当我检查 pclose() 结果时，它返回 -1 并且 errno 设置为 10（无子进程）。不知道为什么会发生这种情况，但我不能忽略它（除非对为什么会发生这种情况有合理的解释）。

我的代码：

```
FILE * lsoutput = NULL;
lsoutput = popen("ls -ltr", "r");
if (readFromPipeOrFile(lsOutput, pSendBuf, pSendActualSize) == -1)
{
        printf("readFromPipeOrFile failed.");
        pclose(lsOutput);
        safeFree(pSendBuf);
        return -1;
}

if (pclose(lsOutput) == -1) // No idea why it returns -1 but it does...
{
        printf("pclose failed");
        printf("errno: %d\n", errno);
        printf("strerror: '%s'", strerror(errno));
        return -1;
} 
```

readFromPipeOrFile 的代码（写入缓冲区的函数）：

```
int readFromPipeOrFile(FILE * pipeOrFile, char ** pSendBuf, size_t * pSendActualSize)
{
     int multiplication = 1;
     char * pSendBufCurrentLocation = NULL;
     ERR_RETURN(pipeOrFile == NULL || pSendBuf == NULL || pSendActualSize == NULL,
                     "No values should be NULL.");
     ERR_RETURN(*pSendBuf != NULL, "*pSendBuf should be NULL");

     *pSendBuf = (char *) calloc (MAX_READ_FROM_STREAM * multiplication, sizeof(char));
     ERR_RETURN(*pSendBuf == NULL, "Failed allocating sendBuf");

     pSendBufCurrentLocation = *pSendBuf;
     while (fread(pSendBufCurrentLocation, MAX_READ_FROM_STREAM, 1, pipeOrFile) == 1)
     {
             ++multiplication;
             *pSendBuf = realloc(*pSendBuf, MAX_READ_FROM_STREAM * multiplication);
             ERR_RETURN(*pSendBuf == NULL, "Failed re-allocating sendBuf");

             pSendBufCurrentLocation = *pSendBuf + (MAX_READ_FROM_STREAM * (multiplication - 1));
             memset(pSendBufCurrentLocation, '\0', MAX_READ_FROM_STREAM);
     }

     ERR_RETURN(!feof(pipeOrFile), "Hasn't reached eof but fread stopped");
     ERR_RETURN(ferror(pipeOrFile), "Error in fread");

     *pSendActualSize = MAX_READ_FROM_STREAM * multiplication;

     return 0;
} 
```

提前致谢！编辑：ERR_RETURN 只是一个宏，它检查第一个参数的条件是否为真，如果是，则在第二个参数中打印字符串并返回 -1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-09T13:21:05.343

***signal(SIGCHLD, SIG_IGN)***将导致 pclose() 结果返回 -1 并且 errno 设置为 10（无子进程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T22:35:06.097

根据文档`pclose()`，`-1`如果`wait4`返回错误，则返回。但是，它没有说明设置`errno`（除了设置`ECHILD`如果它无法获得子状态），所以我不太确定你可以指望`strerror()`字符串是准确的。

这意味着`ls`退出时出现错误代码，这意味着`ls`访问子目录时遇到问题（权限错误？）。因此，您有结果，因为`ls`返回了它可以读取的内容，但它是不完整的读取，因为它无法访问递归中的子目录。

# php - 用括号在 PHP 中嵌入 Javascript

> ID：15992986
> 
> 赞同：-2
> 
> 时间：2013-04-13T21:11:08.813
> 
> 标签：php, javascript

好吧，所以我一直在尝试回显一些 JavaScript，以便在用户登录或注销时弹出花式框窗口。这是我到目前为止所拥有的，但它不断引发服务器错误。

```
<link rel="stylesheet" type="text/css" href="scripts/fancybox/jquery.fancybox.css" />
<script type="text/javascript" src="scripts/fancybox/jquery.fancybox.js"></script>
<?php
$msg = $_GET['msg'];
if(isset($msg['0']));  {
echo '
<script type="text/javascript">
$.fancybox.open([
{
    href : \'m.php?=0\',
    title : \'Successfully Logged In!\'
}    
], {
padding : 0   
});
</script>';
}
else if (isset($msg['1'])); {
echo '
<script type="text/javascript">
$.fancybox.open([
{
    href : \'m.php?=1\',
    title : \'Successfully Logged Out!\'
}    
], {
padding : 0   
});
</script>';
}
?> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:13:59.740

问题不在于括号。PHP 不会回显多行代码。为了做你想做的事，你需要设置一个变量，然后将其回显：

```
$myVar = "";
$myVar .= "<script src='text/javascript'>";
$myVar .= "blah blah blah...";

echo $myVar; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T21:31:49.103

不要回显脚本，做这样的事情。

```
<?php
$msg = $_GET['msg'];
if(isset($msg['0']));  { ?>

<script>
//JS
</script>

<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T21:38:40.650

```
if(isset($msg['0']));  { 
```

分号在那里？我想不是。此外，消息是一个数组吗？也许你想做：

```
$msg = isset($_GET['msg']) ? $_GET['msg'] : false;
if($msg === '0')  { 
```

# c# - 当给定它的uri在c＃中失败时从blob下载

> ID：15992989
> 
> 赞同：0
> 
> 时间：2013-04-13T21:11:33.553
> 
> 标签：c#, azure, azure-storage, azure-blob-storage

我正在尝试从 Azure blob 下载文件并将其保存在本地，但似乎失败了。以下是相关代码：

```
 var blobClientCode = client.CreateCloudBlobClient();
    string codeUri = "https://???.blob.core.windows.net/...../mycode.exe";
    using (var codeContent = File.OpenWrite("C:\\code.exe")) {
        blobClientCode.GetBlockBlobReference(codeUri).DownloadToStream(codeContent);
    } 
```

我收到容器不存在的错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:46:22.623

尝试首先获取对容器的引用，然后仅使用相对路径从中定义 CloudBlockBlob。

这是对我有用的代码：

```
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
CloudBlobContainer container = blobClient.GetContainerReference("myContainerName");

CloudBlockBlob blockBlob = container.GetBlockBlobReference("/subfolder/filename.exe");
using (fileStream == System.IO.File.OpenWrite("C:\code.exe")) {
    blockBlob.DownloadToStream(fileStream);
} 
```

# c++ - 您将如何在结构向量的 ROS 中发布消息？

> ID：15992990
> 
> 赞同：7
> 
> 时间：2013-04-13T21:11:35.007
> 
> 标签：c++, ros

我想发布一个包含两个整数和两个字符串的结构长度未知的向量。ROS中是否有发布者和订阅者可以做到这一点？

如果没有，我一直在看[如何创建自定义消息的教程，](http://www.ros.org/wiki/ROS/Tutorials/CreatingMsgAndSrv#Creating_a_msg)我想我可以制作一个`.msg`包含以下内容的文件：

```
int32 upperLeft
int32 lowerRight
string color
string cameraID 
```

和另一个`.msg`包含先前消息数组的文件。但是教程没有给出如何使用数组的例子，所以我不知道在第二个`.msg`文件中放什么。此外，我什至不确定如何在 C++ 程序中使用此自定义消息。

关于如何做到这一点的任何提示都会很棒！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-13T12:01:04.497

只是为了扩展[@Sterling](https://stackoverflow.com/users/766251/sterling)已经解释过的内容......

如果您有一个名为“test_messages”的项目（以及目录），并且您有以下两种类型的消息`test_messages/msg`：

```
#> cat test.msg 
string first_name
string last_name
uint8  age
uint32 score

#> cat test_vector.msg 
string vector_name
uint32 vector_len         # not really necessary, just for testing
test[] vector_test 
```

然后，您可以编写以下 C++ 代码：

```
#include "test_messages/test.h"
#include "test_messages/test_vector.h"

...

  ::test_messages::test test_msg;

  test_msg.age          = 29;
  test_msg.first_name   = "Firstname";
  test_msg.last_name    = "Lastname";
  test_msg.score        = 79;

  test_pub.publish(test_msg);

  ::test_messages::test_vector test_vec;

  test_vec.vector_len    = 5;
  test_vec.vector_name   = std::string("test vector name");

  for (int idx = 0; idx < test_vec.vector_len; idx++)
  {
      test_msg.age          = 50;
      test_msg.score        = 100;
      test_msg.first_name   = std::string("aaaa");
      test_msg.last_name    = std::string("bbbb");

      test_vec.vector_test.push_back(test_msg);
  }

  test_vector_pub.publish(test_vec); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-29T15:46:04.420

假设您的第一个消息称为 MyStruct。要拥有一个 MyStructs 数组的 msg，您将拥有一个带有以下字段的 .msg：

```
MyStruct[] array 
```

然后在代码中创建一个 MyStruct 并设置所有值：

```
MyStruct temp;
temp.upperLeft = 3
temp.lowerRight = 4
temp.color = some_color
temp.cameraID = some_id 
```

然后要将 MyStructs 添加到第二个 .msg 类型的数组中，您可以使用 push_back （就像使用 std::vector 一样）：

```
MySecondMsg m;
m.push_back(temp);
my_publisher.publish(m); 
```

# php - SQL 查询为 PHP 中的 ID 列返回不正确的值

> ID：15992994
> 
> 赞同：1
> 
> 时间：2013-04-13T21:11:49.467
> 
> 标签：php, mysql, sql, join, mysqli

我正在使用以下 SQL 查询从表**帖子**、**用户**和**评论中提取内容**

当我在数据库上运行查询时，它会正确返回结果中“ID”列的值 14。

然而，使用 PHP 的 mysqli 它返回*1*，有时返回*2*。任何人都可以看到查询的任何问题吗？我已经盯着它看了好几个小时，我真的不想为了获得正确的 ID 值而进行单独的查询。

```
SELECT * FROM posts 
LEFT OUTER JOIN comments ON posts.ID = comments.comment_post_id AND comments.comment_approved = 1
LEFT OUTER JOIN users ON users.ID = posts.post_author WHERE posts.ID = '14' AND posts.post_type = 'post' AND posts.post_status = 'publish'
ORDER BY comments.comment_ID DESC 
```

**PHP代码：**

```
 while ($thisResult = $result->fetch_array(MYSQLI_ASSOC)) {
    echo $thisResult['ID']; // returns 1
    echo $thisResult['post_title']; // returns the correct post title
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:13:53.057

查询中的多个表都有`ID`列。使用字段别名而不是`*`in `select`。例如，

`SELECT posts.id as post_id, ..... FROM posts ....`

或者您可以使用`$thisResult[0]`（假设 id 是表中的第一列`posts`）获得正确的 id

# ruby-on-rails - 视图中类变量的Rails rabl条件

> ID：15992996
> 
> 赞同：2
> 
> 时间：2013-04-13T21:11:59.730
> 
> 标签：ruby-on-rails, activerecord, rabl

在控制器中我有这样的代码：

```
 @bank_exchangers = ExchangerList.find(:all, :conditions => {:bank_id => params[:id]})
    @currency_list = CurrencyList.all
    @currencies = []
    @currency_list.each do |c|
      @currencies << CurrencyValue.find(:all, :conditions => {:currency_list_id => c.id}, :order => :updated_at)
    end
    @currencies.flatten! 
```

我有这样的模型：

```
class CurrencyList < ActiveRecord::Base
  attr_accessible :code, :country, :name
  has_many :currency_values
end

class CurrencyValue < ActiveRecord::Base
  attr_accessible :currency_list_id, :direction_of_exchange_id, :value
  belongs_to :currency_list
  belongs_to :exchanger_list
end

class ExchangerList < ActiveRecord::Base
  attr_accessible :address, :bank_id, :exchanger_type_id, :latitude, :location_id, :longitude, :name
  has_many :currency_values
end 
```

我需要在某些条件下为每个 ExchangerList 显示它的 CurrencyValue，如下所示……但主要问题在于 rabl 输出：

我有这样的代码：

```
collection @bank_exchangers, :root => "bank_exchangers", :object_root => false
attributes :id, :name, :address, :location_id, :latitude, :longitude, :exchanger_type_id
child @currencies do 
  attribute :value 
end 
```

正如你所看到的，这里为每个@bank_exchangers 我创建了带有@currencies 的节点......但是我只需要为这个@bank_exchangers 迭代器显示节点，如果我要在控制器中写入，我会写如下内容：

```
@currencies << CurrencyValue.find(:all, :conditions => {:currency_list_id => c.id, :exchanger_list_id => param}, :order => :updated_at) 
```

如何在视图中设置这样的东西？

因为现在我的输出是这样的：

```
{"bank_exchangers":[{"id":3,"name":"Банк *** ЦБУ №1","address":"г. Минск, ул. Московская, 13","location_id":8,"latitude":null,"longitude":null,"exchanger_type_id":1,"location_name":"Минск","exchanger_type_name":"normal","currency_values":[{"currency_value":{"value":8620.0}},{"currency_value":{"value":8620.0}},{"currency_value":{"value":8700.0}},{"currency_value":{"value":8700.0}},{"currency_value":{"value":8620.0}},{"currency_value":{"value":8700.0}},{"currency_value":{"value":11500.0}},{"currency_value":{"value":11100.0}}]},{"id":4,"name":"Банк ***","address":"г. Минск, Мясникова, 32","location_id":8,"latitude":null,"longitude":null,"exchanger_type_id":1,"location_name":"Минск","exchanger_type_name":"normal","currency_values":[{"currency_value":{"value":8620.0}},{"currency_value":{"value":8620.0}},{"currency_value":{"value":8700.0}},{"currency_value":{"value":8700.0}},{"currency_value":{"value":8620.0}},{"currency_value":{"value":8700.0}},{"currency_value":{"value":11500.0}},{"currency_value":{"value":11100.0}}]}]} 
```

如您所见，对于每个 bank_exchangers，我使用所有 currency_values 数据创建节点，但我需要为每个 bank_exchangers 在节点中仅放置此 bank_exchangers 父级的 currency_values ......

我怎么能这样做？

对不起，如果有什么不清楚...我是新来的...

**鉴于某些情况，如何为我的孩子设置@currencies？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:43:32.507

您可以利用 ExchangerList 和 CurrencyValues 之间的关系：

```
child :currency_values do
  attribute :value
end 
```

如果您有条件，可以使用 lambda 包含这些条件： if => lambda { |child| 孩子。什么？})

```
child(:currency_values, if => lambda { |currency_value| currency_value.something? }) do
  attribute :value
end 
```

您可能还想为一个 ExchangerList 对象定义一个视图（即显示）：

```
object @bank_exchanger, :object_root => false
attributes :id, :name, :address, :location_id, :latitude, :longitude, :exchanger_type_id

child(:currency_values, if => lambda { |currency_value| currency_value.something? }) do
  attribute :value
end 
```

然后简单地让集合扩展这个：

```
collection @bank_exchangers, :root => "bank_exchangers", :object_root => false
extends 'bank_exchangers/show' 
```

或者，如果您将“货币”方法添加到 ExchangerList 模型，您可以通过 RABL 直接将该方法作为属性调用。我写的一些测试代码：

```
def test
  test_array = []
  1.upto(3) do |i|
    test_array << {qty: i, px: 2*i}
  end
  return test_array
end 
```

然后，您可以简单地将其称为属性：

```
object @object
attribute :test 
```

这会产生以下 JSON，我认为这与您尝试实现的格式相似：

```
test: [
  {
    qty: 1,
    px: 2
  },
  {
    qty: 2,
    px: 4
  },
  {
    qty: 3,
    px: 6
  }
], 
```

# objective-c - 谷歌地图别针

> ID：15992997
> 
> 赞同：0
> 
> 时间：2013-04-13T21:12:00.380
> 
> 标签：objective-c, google-maps, ios6

![在此处输入图像描述](https://i.stack.imgur.com/CvgxI.png)

有谁知道如何在谷歌地图（不是 iphone 地图）中做到这一点？带箭头，当我单击它时，它会转到另一个视图

谢谢你