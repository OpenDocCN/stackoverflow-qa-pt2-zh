# StackOverflow 问答 13368000-13368999

# java - 如果对象属于用户，用户只能调用方法

> ID：13368001
> 
> 赞同：0
> 
> 时间：2012-11-13T20:11:50.523
> 
> 标签：java, jsf, acl

在 CRUD jsf 应用程序中，所有者拥有对象，例如记录。

我希望所有者只能查看/编辑/删除自己创建的对象。实现此目的的一种方法是在每种方法中检查登录用户是否已创建对象。

可以有很多类似的方法和对象，所以我想使用另一种优雅/自动的方式而不是使用

```
if (selectedObject.owner == loggedUser) 
```

每种方法中的短语。

有可能吗，如果可能的话怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:24:09.327

您可以使用[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)来进行访问保护。

我会编写一个方面来拦截对访问受限方法的所有方法调用，在*之前*的建议中应用检查，如果失败则抛出异常。根据程序的结构，或者通过寻找显式注释或使用相当通用的切入点。

这会将您移动`if (obj.owner.equals(loggedUser))`到一个中心位置，但当然您仍然需要注意不要将其他用户的项目包含在列表等中。

“该”Java 方面实现是[AspectJ](http://www.eclipse.org/aspectj/)。它也被 Spring 框架使用和支持，你可能已经在使用它：http: [//static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:59:14.757

如果我是你，我只会在用户被授权的情况下*显示组件，通过使用*

```
rendered={user.isOwner} 
```

您将使用它作为组件中的属性。

# mysql - 是否可以在 where 子句中使用命名选择？

> ID：13368003
> 
> 赞同：0
> 
> 时间：2012-11-13T20:11:59.310
> 
> 标签：mysql

我有一个半复杂的选择语句，它在查询中构建了一个自定义“列”，结果需要通过该列的结果进行过滤。有什么方法可以在谓词中引用此列吗？您会在 where 子句中看到我想做的事情被注释掉了，过滤了“On Sale”。

```
select
p.prod_id,
case
  when p.subtitle is null then p.title
  else concat(p.title, ': ', p.subtitle)
end as 'Title',
p.issue as 'Issue',
e.abbrv as 'Editor',
p.jobnum as 'Job Number',
p.price as 'Price',
ship.due_date as 'Ship Date',
case
  when pi.onsale_minus_ship_date is not null then ship.due_date + interval pi.onsale_minus_ship_date day
  else
    case
      when prs.days_for_shipping != 0 then ship.due_date + interval prs.days_for_shipping day
      else ship.due_date + interval 7 day
    end
end as 'On Sale',
sale.due_date as 'Bookstore On Sale'
from products p

join schedules ship on ship.prod_id = p.prod_id and ship.milestone = 49
left join schedules sale on sale.prod_id = p.prod_id and sale.milestone = 647
left join editors e on find_in_set(e.id, p.editor)
left join printing_info pi on pi.prod_id = p.prod_id
left join printers prs on prs.id = pi.printer

where p.prod_type in (2, 3, 5, 6) -- physical, non comics (trades, hc, etc.)
--and 'On Sale' >= '$start_date' + interval 2 month
--and 'On Sale' <= '$end_date' + interval 2 month

order by ship.due_date asc, p.title asc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:19:13.477

您可以在`HAVING`子句中进行过滤 - 不幸的是，您不能在`WHERE`子句中引用列别名。

```
HAVING `On Sale` >= '$start_date' + interval 2 month
AND `On Sale` <= '$end_date' + interval 2 month 
```

[http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)

# json - jqGrid 表单编辑 - 如何将编辑行发布到 sql 服务器

> ID：13368006
> 
> 赞同：1
> 
> 时间：2012-11-13T20:12:09.910
> 
> 标签：json, jqgrid, form-editing

我在我的 sharepoint webpart 中使用 jqGrid 并尝试使用表单编辑网格。我不知道如何将数据发布回 sql server 数据库以进行添加/更新/删除。我正在使用将接受来自网格的 JSON 数据的 WCF 服务。

WCF 方法：

```
[OperationContract]
[WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped,
    Method = "POST",
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json)]
bool UpdateProjectDeliverable(string ProjectName, string CriticalItemInfo); 
```

JQGrid - 表单编辑：

```
$('#PrjDeliverablesGrid').jqGrid({
            datatype: 'json',
            colNames: ['ActivityDescription', 'Type', 'CompletionDate'],
            colModel: [
                            { name: 'ActivityDescription', index: 'ActivityDescription', width: 200, sortable: false, editable: true, edittype: "textarea", editoptions: { rows: "2", cols: "10" }, formoptions: { rowpos: 1, elmprefix: "(*)" }, editrules: { required: true} },
                        { name: 'Type', index: 'Type', width: 90, editable: true, edittype: 'select', editoptions: {
                            value: function () {
                                var EditVal = LoadDeliverableTypes();
                                return EditVal;
                            }
                        }, /*editoptions: { value: "H:HandOver; CD:Charter (Draft); CF:Charter (Final); P0:Proto 0; P1:Proto 1; P2:Proto 2; P3:Proto 3" },*/formoptions: { rowpos: 2, elmprefix: "&nbsp;&nbsp;&nbsp;&nbsp;" }
                        },
                        { name: 'CompletionDate', index: 'CompletionDate', width: 90, editable: true, sorttype: 'date', formatter: 'date',
                            editoptions: { size: 12,
                                dataInit: function (element) {
                                    $(element).datepicker({ dateFormat: 'mm/dd/yyyy' });
                                },
                                defaultValue: function () {
                                    var currentTime = new Date();
                                    var month = parseInt(currentTime.getMonth() + 1);
                                    month = month <= 9 ? "0" + month : month;
                                    var day = currentTime.getDate();
                                    day = day <= 9 ? "0" + day : day;
                                    var year = currentTime.getFullYear();
                                    return month + "/" + day + "/" + year;
                                }
                            },
                            formoptions: { rowpos: 3, elmprefix: "(*)", elmsuffix: "mm/dd/yyyy" }, editrules: { required: true }
                        }
                    ],

            rowNum: 10,
            pager: '#pagerPrjDeliverables',
            sortname: 'id',
            sortorder: 'desc',
            viewrecords: true,
            autowidth: true,
            gridview: true,
            caption: 'Critical Activities/Deliverables'
        });

        $('#PrjDeliverablesGrid').jqGrid('navGrid', '#pagerPrjDeliverables',
                { view: true, edit: true, add: true, del: true },
                { edit: true,
                    afterShowForm: function (eparams) {
                        $('#PrjDeliverablesGrid').jqGrid('setGridParam', { SelCriticalItem: function () {
                            var row_id = $('#PrjDeliverablesGrid').jqGrid('getGridParam', 'selrow');
                            var tempCriticalInfo = new object();
                            tempCriticalInfo.DeliverableName = $('#PrjDeliverablesGrid').jqGrid('getCell', row_id, 'ActivityDescription');
                            var DeliverableTypeName = $('#PrjDeliverablesGrid').jqGrid('getCell', row_id, 'Type');
                            tempCriticalInfo.DeliverableTypeID = GetDeliverableTypeIDFromName(DeliverableTypeName);
                            tempCriticalInfo.CompletionDate = $('#PrjDeliverablesGrid').jqGrid('getCell', row_id, 'CompletionDate');
                            return tempCriticalInfo;
                        }
                        });
                    },
                    //                  serializeEditData: function (projDeliverableAddEditParams) { //USED ON EDIT
                    //                      return JSON.stringify(projDeliverableAddEditParams);
                    //                  },
                    onclickSubmit: function (params, SelCriticalItem) {
                        var Url = "http://vm0301cch:19511/_layouts/AGCO.PB.SharePointUI/WCFPBUtility/WCFPBUtility.svc";
                        var SelProjectName = document.getElementById("txtProjectID").value;
                        var data;
                        SelDelvProjectName = SelProjectName;
                        $('#PrjDeliverablesGrid').jqGrid({
                            params.url = Url + "/UpdateProjectDeliverable",
                            datatype: 'json',
                            mtype: 'POST',
                            editData: { ProjectName: SelDelvProjectName },
                            ajaxEditOptions: { contentType: 'application/json',
                                success: function (data) {
                                    alert('Deliverables loaded successfully');
                                },
                                error: function (data) {
                                    alert('Deliverables loading failed');
                                }
                            }
                        });
                    },
                    jqModal: true,
                    checkOnUpdate: true,
                    savekey: [true, 13],
                    navkeys: [true, 38, 40],
                    checkOnSubmit: true,
                    reloadAfterSubmit: false,
                    recreateForm: true,
                    closeOnEscape: true,
                    bottominfo: "Fields marked with (*) are required"
                }); // edit options 
```

请帮忙。

# extjs4 - ExtJs 4 HTMLEditor 问题

> ID：13368007
> 
> 赞同：1
> 
> 时间：2012-11-13T20:12:22.287
> 
> 标签：extjs4

我正在尝试在 multipart/form-data 表单中使用 HTMLEditor：

```
<script>
function doSubmit() {
    var editor = myEditor.down('#displayName');
    var sName = editor.getValue();
    var myForm = document.getElementById('myform');
    myForm.sDisplayName.value = sName;
    myForm.submit();
}
var myEditor;
Ext.onReady(function() {
    myEditor = Ext.create("Ext.panel.Panel", {

        height: 100,
        width: 552,
        renderTo: 'richtext',
        items:[{
        xtype: 'htmleditor',
        itemId: 'displayName',
        name: 'displayName',
        fontFamilies: [...],
        height: 100,
        width: 550,
        border: 0,
        value: ...,
    }]
});
myEditor.down('#displayName').focus();
myEditor.show();
});
</script>
<form name="myform" id="myform" action="..." .method="post" enctype="multipart/form-data">
...
...
<div id="richtext"></div>
</form> 
```

该表单还包含单击时调用 doSubmit() 的“确定”按钮，以及隐藏的输入参数 sDisplayName 以及其他几个输入字段和文件输入。

## 这是问题所在：

生成的 textarea 元素的名称属性为空。Chrome 和 Firefox 只是在生成 POST 请求时忽略它，我对此很好，但 IE 在请求中包含生成的 textarea 元素的值。由于textarea输入名称为空，所以param名称也为空，这样在请求被另一个JSP处理的时候就麻烦了。这是它在 IE 网络嗅探器中的外观：

```
Content-Disposition: form-data; name=""

<FONT style="FONT-FAMILY: Arial; FONT-SIZE: 36px">My Text</FONT> 
```

这被视为无效请求，请求处理失败（应该如此）

为什么生成 textarea 元素的名称为空白？我希望名称配置用作 HTML 名称属性。有谁知道解决方法，比如阻止 IE 提交 textarea 输入？我尝试将 submitValue 配置设置为 false，还尝试在提交之前将禁用的配置设置为 true - 没有成功。

# java - 如何使用 logcat 查找空指针异常

> ID：13368012
> 
> 赞同：2
> 
> 时间：2012-11-13T20:12:48.943
> 
> 标签：java, android

我正在尝试构建一个小型应用程序，该应用程序在外部存储中获取数据文件并通过电子邮件发送。我在 logcat 中不断收到“空指针异常”，然后我的应用程序就死了。我似乎找不到我的异常，我想知道是否有办法确定导致这种情况的代码行。我有 MainActivity 类，然后是一个名为 SendData 的类——代码如下。我是新来的，所以任何帮助将不胜感激 - 谢谢。

```
 private static final String TAG = "MainActivity_ErrorLog";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

// Create the getData intent
    Intent intentgetData = new Intent(MainActivity.this, SendData.class); 

    public void onStart()
    {
        {       
        try 
        {
        File sd = Environment.getExternalStorageDirectory();
        File data = Environment.getDataDirectory();

            if (sd.canWrite()) 
            {
        // verify the paths
                String currentDBPath = "TLC_COMMON/database.db";
                String backupDBPath = "database.db"; 
                File currentDB = new File(data, currentDBPath);
                File backupDB = new File(sd, backupDBPath);

                if (currentDB.exists()) 
                {
                    FileChannel src = new FileInputStream(currentDB).getChannel();
                    FileChannel dst = new FileOutputStream(backupDB).getChannel();
                    dst.transferFrom(src, 0, src.size());
                    src.close();
                    dst.close();                    
                }
            }
        }

        catch (Exception e)     
        {   
            // change the V below to E when complete
            Log.v(TAG,"ERROR: Database file not created"); 
        }
        startActivity(intentgetData);
        }

    }

  } 
```

——新班级

公共类发送数据扩展活动{私有静态最终字符串标签=“主活动”；

```
/* Checks if external storage is available to read */   
public boolean isExternalStorageReadable() 
    {
    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state) ||
        Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) 
        {
        return true;
        }
        return false;
    }

/** Called when the user clicks the Send My Data button */
public SendData(View view) 
    {

    // Send data by email
        {
            File root = Environment.getExternalStorageDirectory(); 
    // verify it is saving as this file name; also path in previous class
            String fileName = "database.db"; 
            if (root.canWrite()) 
                { 
                File attachment = new File(root, fileName); 
                Intent email = new Intent(Intent.ACTION_SENDTO);                
                email.putExtra(android.content.Intent.EXTRA_SUBJECT, "Exercise data");
                email.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"test@gmail.com"});
                // is the Uri necessary?
                email.putExtra(android.content.Intent.EXTRA_TEXT, Uri.fromFile(attachment));
                // look at this VVV
                startActivity(Intent.createChooser(email, "Send the data via Email"));} 
            else 
                {
                // Change the V below to E when complete
                Log.v(TAG, "Email send failed");
                }
            }
        }
public void finish() 
{   
}

} 
```

```
11-13 13:29:37.343: W/dalvikvm(3319): threadid=1: thread exiting with uncaught exception (group=0x418e3300)
11-13 13:29:37.343: E/AndroidRuntime(3319): FATAL EXCEPTION: main
11-13 13:29:37.343: E/AndroidRuntime(3319): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.va.datasender/com.example.va.datasender.MainActivity}: java.lang.NullPointerException
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.os.Looper.loop(Looper.java:137)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at java.lang.reflect.Method.invokeNative(Native Method)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at java.lang.reflect.Method.invoke(Method.java:511)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at dalvik.system.NativeStart.main(Native Method)
11-13 13:29:37.343: E/AndroidRuntime(3319): Caused by: java.lang.NullPointerException
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.content.ContextWrapper.getPackageName(ContextWrapper.java:127)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.content.ComponentName.<init>(ComponentName.java:75)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.content.Intent.<init>(Intent.java:3301)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at com.example.va.datasender.MainActivity.<init>(MainActivity.java:36)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at java.lang.Class.newInstanceImpl(Native Method)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at java.lang.Class.newInstance(Class.java:1319)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
11-13 13:29:37.343: E/AndroidRuntime(3319):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
11-13 13:29:37.343: E/AndroidRuntime(3319):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T20:16:32.077

找到最低的“Caused by”并继续向下直到到达代码中的一行：

```
Caused by: java.lang.NullPointerException
     at android.content.ContextWrapper.getPackageName(ContextWrapper.java:127)
     at android.content.ComponentName.<init>(ComponentName.java:75)
     at android.content.Intent.<init>(Intent.java:3301)
     at com.example.va.datasender.MainActivity.<init>(MainActivity.java:36) 
```

这`<init>`意味着您在 Activity 具有有效上下文之前作为类变量或在构造函数中执行某些操作......但具体问题在第 36 行。

我猜您正在尝试使用`this`. `onCreate()`而是在内部初始化您的 Intent 。

* * *

找到了。改变这个：

```
// Create the getData intent
Intent intentgetData = new Intent(MainActivity.this, SendData.class); 
```

到：

```
Intent intentgetData; 
```

并在内部`onCreate()`（或`onStart()`就在调用之前`startActivity()`）添加：

```
intentgetData = new Intent(MainActivity.this, SendData.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:16:57.493

您的问题来自 MainActivity 的第 36 行。检查那里的问题。

```
11-13 13:29:37.343: E/AndroidRuntime(3319):     at com.example.va.datasender.MainActivity.<init>(MainActivity.java:36) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:17:10.860

第 36 行的例外情况：`at com.example.va.datasender.MainActivity.<init>(MainActivity.java:36)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T20:25:46.437

由于错误日志也显示`android.content.Intent.<init>`在 之后`MainActivity.java:36`，我会在实例化时检查以下行中第一个参数的值`intentgetData`：

```
Intent intentgetData = new Intent(MainActivity.this, SendData.class); 
```

不要在那里完成实例化，`onStart()`而是在调用之前尝试在方法中执行它`startActivity(intentgetData);`：

```
Intent intentgetData = new Intent(MainActivity.this, SendData.class); 
startActivity(intentgetData); 
```

# css - 如何获取图像的高度并将该高度应用于 div？

> ID：13368022
> 
> 赞同：0
> 
> 时间：2012-11-13T19:26:28.770
> 
> 标签：css, jquery, mobile

我正在构建一个移动 Web 应用程序，并且在其上使用 jquerytools 滑块。

我希望滑块在所有移动设备上显示（以适当的比例），因此图像的宽度为 100%，高度在 css 中为自动。但是，由于所有元素都是浮动的，并且 jquerytools 滑块需要将位置设置为绝对位置，因此包含的 div (#header) 不会拉伸以适应内容。

我正在尝试使用 jquery 来获取 img 的高度并将该高度应用于标题....但是我没有运气。

CSS：

```
 #header{
width:100%;
position:relative;
z-index: 20;
/* box-shadow: 0 0 10px white; */
overflow: auto;
}

.scrollable {
position:relative;
overflow:hidden;
width: 100%;
height: 100%;
/* box-shadow: 0 0 20px purple; */
/*  height:198px; */
z-index: 20;
overflow: auto;
}

.scrollable .items {
/* this cannot be too large */
width:1000%;
position:absolute;
clear:both;
/* box-shadow: 0 0 30px green; */

}

.items div {
float:left;
width:10%;
height:100%;

}

/* single scrollable item */
.scrollable img {
    /* float:left; */
    width:100%;
   height: auto;
 /*    height:198px; */
}

/* active item */
.scrollable .active {
    border:2px solid #000;
    position:relative;
    cursor:default;
} 
```

HTML

```
 <div id=header><!-- root element for scrollable -->
    <div class="scrollable" id="scrollable">

      <!-- root element for the items -->
      <div class="items">

        <div>
          <img src="img/img2.jpg" />
        </div>

        <div>
           <img src="img/img1.jpg" />
        </div>

        <div>
         <img src="img/img3.jpg" />
        </div>

        <div>
         <img src="img/img4.jpg" />
        </div>

        <div>
         <img src="img/img6.jpg" />
        </div>

    </div><!-- items -->

    </div><!-- scrollable -->

    </div><!-- header --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:17:36.703

像这样：

```
var height = $('#myImageID').height();
$('#header').height(height); 
```

[http://api.jquery.com/height/](http://api.jquery.com/height/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:20:10.580

我找到了解决方案。Sdespont 提供的代码非常完美，它引导我找到答案。他的代码显示高度为零的原因是因为它在图像加载之前正在寻找图像高度。为了解决这个问题，我改变了

```
$(document).ready 
```

到

```
$(window).load 
```

解决了。感谢@sdespont

# php - 存储库模式 - 在哪里放置文章的缩略图

> ID：13368028
> 
> 赞同：0
> 
> 时间：2012-11-13T20:13:33.073
> 
> 标签：php, repository-pattern

一开始我很抱歉标题 - 我不知道如何称呼这个问题。

假设我有（简化的）类：

```
class Articles_Repository {
    public function save(Article_Entity $article) {...}
    public function find($id) {...}
    // Other methods
}

class Article_Entity {
   public $thumbnail_url;
   public $title;
   public $text;
   ...
} 
```

我应该在哪里放置“更改缩略图” - 上传&裁剪&保存特定文章缩略图的方法？进入存储库、实体或其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:10:20.603

我相信放置该方法的最佳位置是在服务中。我不认为文章实体有责任操纵图像。存储库的，甚至更少。文章只是声明它有一个缩略图，它并不关心缩略图是如何生成的。

控制器应该将上传的图像传递给服务，该服务将涉及其他对象进行裁剪，然后保存图像（图像存储库可能在这里工作）。然后缩略图 url 将被分配给文章。

# html - 使用 CSS 垂直对齐元素

> ID：13368030
> 
> 赞同：4
> 
> 时间：2012-11-13T20:13:37.287
> 
> 标签：html, css, vertical-alignment

我有一个 60 像素高的元素，其中包含其他元素，如图像和其中的几个跨度，我无法让它们在 60 像素高的元素内垂直对齐。这是模型和CSS：

```
<div class="member">
    <img src="images/pic.png" alt="John Smiths's Profile Picture" class="pic">
    <span class="name"><a href="">John Smith</a></span>
    <span class="skills">PHP, MySQL, Javascript, C#, Java</span>
</div>

#sidebar .member {
    height: 60px;
    margin-bottom: 10px;
    vertical-align: center;
}

#sidebar .member .name {
    font-size: 15px;
    font-weight: bold;
}

#sidebar .member .pic {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    float: left;
    margin-right: 10px;
}

#sidebar .member .skills {
    display: block;
    font-size: 12px;
    overflow: hidden;
} 
```

我把它放在 jsfiddle 上：http: [//jsfiddle.net/CYFyx/2/](http://jsfiddle.net/CYFyx/2/)

如您所见，元素内的`.member`元素推到顶部。我需要它们垂直对齐，如下所示：

![在此处输入图像描述](../Images/612f185c662ff930c012e2e9f9bf93c3.png)

已经尝试过`vertical-align: middle;`，但没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T20:22:18.610

您只能`vertical-align: middle`在 td 表格布局中使用。所以你必须在跨度周围添加一个 div

```
<div class="cell">
    <span class="name"><a href="">John Smith</a></span>
    <span class="skills">PHP, MySQL, Javascript, C#, Java</span>
</div> 
```

有了这个属性

```
#sidebar .member .cell {
    display: table-cell;
    vertical-align: middle;
    height: 50px;
} 
```

你可以在这里测试它：http: [//jsfiddle.net/Tn2RU/](http://jsfiddle.net/Tn2RU/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:18:39.467

尝试将它们全部放在一个可以垂直对齐的 div 中

```
position:relative; 
margin-top: auto; 
margin-bottom: auto; 
height: XXpx; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:20:27.823

您需要设置父元素的宽度和子元素的宽度，以便它们必须进入下一行。

另一种可能性是将您的父元素设置为`position:relative`然后`position:absolute`在所有子元素上使用，然后简单地用 精确定位它们`top:20px;`，然后是下一个`top:40px;`等。

使用第二种解决方案，您可以获得所有子元素的精确像素定位。

这将积极地给你最好的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T20:25:13.757

您也可以将它们放入 div 并在顶部添加填充。

HTML

```
<div id="block">
        <span class="name"><a href="">John Smith</a></span>
        <span class="skills">PHP, MySQL, Javascript, C#, Java</span>
</div> 
```

CSS

```
#block {
 padding-top:5px;  
} 
```

[jsFiddle](http://jsfiddle.net/xcMRZ/)

# google-app-engine - GAE、Cloud SQL 和 run_in_transaction

> ID：13368031
> 
> 赞同：2
> 
> 时间：2012-11-13T20:13:45.123
> 
> 标签：google-app-engine, transactions, task-queue, google-cloud-sql

我将 GAE 与 Cloud SQL 一起使用。

我似乎看不到文档中提到的这一点，所以我想我只是想澄清一下我的理解。

是分组交易的标准方法，即：

```
def do_something_in_transaction(...)
  update my CloudSQL database record
  taskqueue.add(url='/path/to/my/worker', transactional=True)
  ...

db.run_in_transaction(do_something_in_transaction, ....) 
```

假设为云 SQL 工作？

我还可以在 run_in_transaction 调用期间更新/插入/删除多条记录（即我需要的多条记录）吗？

IE：

```
def do_something_in_transaction(...)
   x_id = insert record into table x
   update table y record with x_id
   insert record into table a
   insert record into table b
   … etc
  taskqueue.add(url='/path/to/my/worker', transactional=True) 
```

在此先感谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:26:18.167

鉴于它是 db 组件的一部分，我认为 run_in_transaction 特定于数据存储。

对于 CloudSQL，使用 SQL 事务命令 START TRANSACTION、COMMIT、ROLLBACK。

# ruby-on-rails - 基于条件的值

> ID：13368035
> 
> 赞同：5
> 
> 时间：2012-11-13T20:14:07.027
> 
> 标签：ruby-on-rails, ransack

我在我的 Rails 应用程序中使用 Ransack gem，效果很好。我当前的问题是验证。这本质上是一个两部分的问题。

如何根据条件向值字段添加验证。IE 如果 Year 是选定属性，如何将值文本框更改为带有年份列表的选择框？

还有自定义的东西，例如，如果条件设置为“国会区”，我需要能够检查该值是否只有 3 个字符长，前两个是州缩写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:56:38.237

似乎有一个请求请求将这个有价值的特性添加到 gem 中，我们希望它会发生。以下是有关更改的描述（引自[GitHub 讨论](//github.com/ernie/ransack/pull/58)，日期为 15 天前）：

只是想确认这对我们仍然是一个有用的功能，但另一种方法是在 lib/ransack/constants.rb 中明确指定一个好的默认顺序。例如，这是我们决定的顺序：

```
:cont, :not_cont, :blank, :present, :start, :not_start, :end, :not_end,
:true, :false, :eq, :not_eq, :lt, :gt, :lteq, :gteq, :null, :not_null, 
:in, :not_in, :matches, :does_not_match 
```

我们根据列类型（字符串、整数、日期等）过滤谓词，因此这种排序为每种类型设置了良好的默认值。

编辑：这是使用 Ransack 创建构面和过滤器 [的有趣解决方案。](https://github.com/jbarket/facet_for)

# vb.net - 使用 JQuery Mobile 的 asp 图像按钮单击事件

> ID：13368036
> 
> 赞同：6
> 
> 时间：2012-11-13T20:14:10.827
> 
> 标签：vb.net, jquery-mobile

我一直在 VB.NET 和 JQM 的网站上工作——一切顺利。

现在，我正在尝试使用诸如以下标签的标准图像按钮：

```
<asp:ImageButton ID="btnYear" runat="server" ImageUrl="~/images/buttons/year_btn.gif" /> 
```

并且在 VB 代码后面的文件中有一个类似于以下的点击事件：

```
Private Sub btnYear_Click(sender As Object, e As System.Web.UI.ImageClickEventArgs) Handles btnYear.Click    
    Session("TimeFrame") = "YEAR"    
    *do other code* 
End Sub 
```

当我单击图像按钮并跟踪代码时 - 文件背后代码中的页面事件中的所有代码触发（页面加载，页面预渲染等） - 但图像按钮的单击事件永远不会触发。

如果我用标准的 asp:Button 替换 Image 按钮并做同样的事情 - 那么后面代码中的 click 事件就会触发！是否不能在 JQM 页面中使用 ASP ImageButton 并在 VB 代码隐藏文件中保持单击事件？

**编辑** 非常感谢 andleer 的回应 - 但它给我的页面带来了一个新的场景（问题），也与这些 ImageButtons 有关。

我有一个用户控件中包含的 ImageButton 控件。我的页面是一个包含多个 `<div data-role="page">` 元素的 ASPX 文件，每个元素都有自己的 ID（“page1”、“page2”、“page3”等）——遵循 JQM 多页功能的标准用法。每个“页面”部分都包含一个包含图像按钮的用户控件实例。这一切都很好，有一个问题 - 当用户从默认的“page1”导航到任何其他“页面”并单击其中一个图像按钮时，代码触发，页面重新加载 - 并使用户回到默认值页 - “page1”。

这不好 - 我需要一种方法来允许用户触发按钮并重新加载页面并停留在他们正在查看的“页面”元素上 - JQM 使用 URL 中的哈希标签完成这些多个页面 - 所以我找到了一行我添加到页面加载事件的代码如下：

`Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) 处理 Me.Load

```
 Me.Form.Attributes("onsubmit") = "this.action+=top.location.hash;"

End Sub` 
```

我最初在我的用户控件上使用单选按钮 - JQM 正在“剥皮”，因此它们显示为按钮 - 通过 Page_Load 事件中的这一行，用户可以单击任何“页面”元素和代码后面的单选按钮单选按钮将触发并且页面将与用户重新加载到他们单击的相同“页面”元素上 - 不是用图像按钮替换单选按钮 - 当我将该行代码添加到 Page_Load 事件时，ImageButton 控件完全停止运行 - 当我点击他们点击中的代码时，即使在后面的代码中也不会触发 - 任何页面级事件（例如 Page_Load 或 Page_PreRender）也不会触发 - 现在点击它们绝对没有任何作用....

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:41:30.060

解决问题第二部分的新答案：

我发现 asp.net web 表单根本不适用于 jQuery Mobile 多页场景。`<form />`Web 表单要求所有 Web 控件驻留在需要跨越所有 jQuery Mobile（“虚拟”）页面的单个元素中。这与 jQuery Mobile 需要`<form />`在每个子页面中包含元素以进行正确渲染和后包直接冲突。

请考虑使用 MVC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:58:45.827

问题是jQuery Mobile 隐藏的`<asp:ImageButton />`a 呈现为 a 。`<input type="image" />`向 ImageButton 添加一个 data-role="none" ，这将导致 jQuery Mobile 按原样呈现控件。

```
<asp:ImageButton id="MyButton" runat="server" data-role="none" /> 
```

# python - 3.3 x64错误上的Ipython安装

> ID：13368040
> 
> 赞同：0
> 
> 时间：2012-11-13T20:14:17.383
> 
> 标签：python, installation, ipython

我没有下载库的经验，因此不胜感激。我已经全新安装了 Python3.3，并正在尝试为 64 位 Windows 7 安装 IPython。IPython .exe 安装程序运行良好并正常完成，但我无法访问该程序。我查看了[他们的文档](http://ipython.org/ipython-doc/stable/install/install.html)，并尝试了那里的命令，但是

```
$ python setup.py install 
```

返回无效语法，突出显示“设置”。我认为修复可能在页面上提到的分发库中，所以我先去尝试获取它。但是，使用[分发安装页面](http://pypi.python.org/pypi/distribute#installation-instructions)中的脚本揭示了它自己的错误，即

```
Traceback (most recent call last):
  File "C:\Python33\distribute_setup.py", line 541, in <module>
    sys.exit(main())
  File "C:\Python33\distribute_setup.py", line 537, in main
    tarball = download_setuptools(download_base=options.download_base)
  File "C:\Python33\distribute_setup.py", line 200, in download_setuptools
    log.warn("Downloading %s", url)
  File "C:\Python33\lib\distutils\log.py", line 47, in warn
    self._log(WARN, msg, args)
  File "C:\Python33\lib\distutils\log.py", line 30, in _log
    if stream.errors == 'strict':
AttributeError: errors 
```

我已经做了几个小时了，而且我的想法很新鲜。接下来是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:48:17.843

看起来您遇到了[Python 错误 12967](http://bugs.python.org/issue12967)。您需要在`distribute_setup.py`IDLE 之外运行（即在命令提示符下）。

# jquery-datatables - 更改数据表中的备用行颜色

> ID：13368045
> 
> 赞同：6
> 
> 时间：2012-11-13T20:14:33.897
> 
> 标签：jquery-datatables

我正在尝试使用下面的 CSS 更改数据表中行的颜色。

```
table.dataTable tr.odd { background-color: #E2E4FF; }
table.dataTable tr.even { background-color: white; } 
```

此更改似乎不会影响数据表中的第一列，我可以在其他列中看到新颜色。

有人可以让我知道这个问题的原因吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T18:29:15.973

通过使用下面的css解决了这个问题。

```
 table.dataTable td.sorting_1{ background-color: white; border:1px lightgrey; }
    table.dataTable td{ background-color: white;  border:1px lightgrey;}
    table.dataTable tr.odd { background-color: white;  border:1px lightgrey;}
    table.dataTable tr.even{ background-color: white; border:1px lightgrey; } 
```

# javascript - 如何规范化 JavaScript 中的正数列表？

> ID：13368046
> 
> 赞同：9
> 
> 时间：2012-11-13T20:14:38.517
> 
> 标签：javascript, arrays, normalize

我有一个充满正 int 值的数组，我怎样才能规范化这个列表，使最大值始终为 100？先感谢您！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-13T20:19:39.017

这个想法是首先找到数组中的最高数字（使用[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)on [`Math.max`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/max)），然后找到该最高数字与 100 之间的比率。

之后，只需遍历数组并将所有数字除以该比率即可：

```
var numbers = [3, 8, 45, 74, 123],
    ratio = Math.max.apply(Math, numbers) / 100,
    l = numbers.length,
    i;

for (i = 0; i < l; i++) {
    numbers[i] = Math.round(numbers[i] / ratio);
} 
```

这是小提琴：http: [//jsfiddle.net/XpRR8/](http://jsfiddle.net/XpRR8/)

* * *

**注意：**我[`Math.round`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/round)用来将数字四舍五入到最接近的整数。如果您更愿意将它们保留为浮点数，只需删除函数调用：

```
for ( i = 0; i < l; i++ ) {
    numbers[i] /= ratio;
} 
```

这是小提琴：http: [//jsfiddle.net/XpRR8/1/](http://jsfiddle.net/XpRR8/1/)

* * *

如果您不必支持 IE8 及以下版本，则可以使用[`Array.prototype.map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)：

```
var numbers = [3, 8, 45, 74, 123],
    ratio = Math.max.apply(Math, numbers) / 100;

numbers = numbers.map(function (v) {
    return Math.round(v / ratio);
}); 
```

这是小提琴：http: [//jsfiddle.net/XpRR8/2/](http://jsfiddle.net/XpRR8/2/)

* * *

如果你*确实*支持 IE8，但无论如何都使用 jQuery，你可以使用[`$.map()`](http://api.jquery.com/jQuery.map/)：

```
numbers = $.map(numbers, function (v) {
    return Math.round(v / ratio);
}); 
```

这是小提琴：http: [//jsfiddle.net/XpRR8/3/](http://jsfiddle.net/XpRR8/3/)

* * *

**更新：**正如@wvxvw 在下面的评论中指出的那样，如果您担心边缘实现会对`apply`要处理的参数数量施加人为限制，那么请使用循环而不是`Math.max.apply`. 这是一个示例（假设既不可用`Array.prototype.map`也不`$.map`可用）：

```
var numbers = [3, 8, 45, 74, 123],
    ratio = 0,
    i = numbers.length;

while (i--) numbers[i] > ratio && (ratio = numbers[i]);

ratio /= 100;
i = numbers.length;

while (i--) numbers[i] = Math.round(numbers[i] / ratio); 
```

这是小提琴：http: [//jsfiddle.net/XpRR8/4/](http://jsfiddle.net/XpRR8/4/)

* * *

如果您使用的是 ES6，这将变得非常简单：

```
var numbers = [3, 8, 45, 74, 123];
var ratio = Math.max(...numbers) / 100;

numbers = numbers.map(v => Math.round(v / ratio)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T20:18:53.387

像这样

```
function Normalize(array, value)
{ 
 for( var i = 0, len = array.length; i < len; i++ )
 {
  if( parseInt(array[i]) > value) array[i] = value;
 }
} 
```

然后使用它：

```
var arr = [];
arr.push(101);
arr.push(5);
arr.push(6);
Normalize(arr,100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:20:07.910

```
function normalize(arr, max) {
    // find the max value
    var m = 0;
    for(var x=0; x<arr.length; x++) m = Math.max(m, arr[x]);
    // find the ratio
    var r = max / m;
    // normalize the array
    for(var x=0; x<arr.length; x++) arr[x] = arr[x] * r;
    return arr;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-11T23:04:53.840

将您的数组传递给以下**函数**：

```
function normalize_array(arr) {

  normalize = function(val, max, min) { 
    return(val - min) / (max - min); 
  }

  max = Math.max.apply(null, arr) 
  min = Math.min.apply(null, arr)

  hold_normed_values=[]
  arr.forEach(function(this_num) {
    hold_normed_values.push(normalize(this_num, max, min))
  })

  return(hold_normed_values)

} 
```

**示例**：

```
nums = [10, 20, 30, 40, 50] 
```

**用法**：

```
normalize_array(mums) 
```

[![在此处输入图像描述](../Images/d6487d1c766879fddc0ad9c31098dc6e.png)](https://i.stack.imgur.com/ivoe7.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T20:23:10.963

只需编辑 LastCoder 代码以支持负数

```
function normalize(arr, max) {
    // find the max value
    var max = arr[0];
    var min = arr[0];
    for(var x=0; x<arr.length; x++) 
        max = Math.max(m, arr[x];
    for(var x=0; x<arr.length; x++) 
        min = Math.min(m, arr[x];

    // normalize the array
    for(var x=0; x<arr.length; x++) 
        arr[x] = (arr[x] - min) / (max - min);

    return arr;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T20:18:46.403

好吧，您可以使用 获得最大值`Math.max.apply(arr)`，然后循环或使用`arr.map`将所有数字乘以`100/max`。完毕。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-13T20:18:55.387

您需要找到最大值并将所有数字缩放到目标范围。

# php - 如果没有缩略图显示“无缩略图”

> ID：13368049
> 
> 赞同：1
> 
> 时间：2012-11-13T20:15:08.877
> 
> 标签：php, wordpress

下面是一个 Wordpress 函数，它为菜单提取缩略图。如果没有缩略图，如何添加 if/else 以显示“无缩略图”？

我努力了：

```
$item_output .= apply_filters( 'menu_item_thumbnail' , ( !isset( $args->thumbnail ) && $args->thumbnail ) ) ? 'no thumbnail' : ''; 
```

但这没有任何效果。对不起，如果这是一个愚蠢的问题，但我不知道 PHP。

功能：

```
class Menu_With_Description extends Walker_Nav_Menu {
    function start_el(&$output, $item, $depth, $args) {
        global $wp_query;

        // get user defined attributes for thumbnail images
        $attr_defaults = array( 'class' => 'nav_thumb' , 'alt' => esc_attr( $item->attr_title ) , 'title' => esc_attr( $item->attr_title ) );
        $attr = isset( $args->thumbnail_attr ) ? $args->thumbnail_attr : '';
        $attr = wp_parse_args( $attr , $attr_defaults );

        $item_output = $args->before;

        // thumbnail image output
        $item_output .= ( isset( $args->thumbnail_link ) && $args->thumbnail_link ) ? '<a' . $attributes . '>' : '';
        $item_output .= apply_filters( 'menu_item_thumbnail' , ( isset( $args->thumbnail ) && $args->thumbnail ) ? get_the_post_thumbnail( $item->object_id , ( isset( $args->thumbnail_size ) ) ? $args->thumbnail_size : 'thumbnail' , $attr ) : '' , $item , $args , $depth );
        $item_output .= ( isset( $args->thumbnail_link ) && $args->thumbnail_link ) ? '</a>' : '';

        // menu link output
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
        $item_output .= '</a>';

        // menu description output based on depth
        $item_output .= ( $args->desc_depth >= $depth ) ? '<br /><span class="sub">' . $item->description . '</span>' : '';

        // close menu link anchor
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
    }
} 
```

这将上述内容应用于我的菜单：

```
add_filter( 'wp_nav_menu_args' , 'my_add_menu_descriptions' );
function my_add_menu_descriptions( $args ) {
    if ( $args['theme_location'] == 'my_menu' ) {
         $args['walker'] = new Menu_With_Description;
         $args['desc_depth'] = 0;
         $args['thumbnail'] = true;
         $args['thumbnail_link'] = true;
         $args['thumbnail_size'] = 'homeboxes';
         $args['thumbnail_attr'] = array( 'class' => 'nav_thumb my_thumb' , 'alt' => 'test' , 'title' => 'test' );
        }
    return $args;   
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:25:34.957

不要修改类。请改用此过滤器：

```
add_filter( 'menu_item_thumbnail', 'so_13368049_change_thumb', 10, 4 );

function so_13368049_change_thumb( $thumb, $item , $args , $depth )
{
    if( '' == $thumb )
        return 'No thumbnail';

    return $thumb;
} 
```

如果你要修改类，它应该是这样的：（
*而**`'NO THUMBNAIL'`**不是**`''`**）*

```
 $item_output .= apply_filters( 'menu_item_thumbnail' , ( isset( $args->thumbnail ) && $args->thumbnail ) ? get_the_post_thumbnail( $item->object_id , ( isset( $args->thumbnail_size ) ) ? $args->thumbnail_size : 'thumbnail' , $attr ) : 'NO THUMBNAIL' , $item , $args , $depth ); 
```

# codeigniter-2 - ExpressionEngine：文件管理器

> ID：13368050
> 
> 赞同：0
> 
> 时间：2012-11-13T20:15:11.623
> 
> 标签：codeigniter-2, expressionengine

我是 EE 新手，正在尝试学习基础知识。关于文件管理器的一些问题：

1.  我上传了一张照片并在描述中输入了“猫，小猫”。当我搜索“小猫”时，它会找到照片。但是当我搜索“猫”时，我什么也得不到。有什么想法吗？

2.  文件元数据是：文件标题、文件名、描述、信用和位置。如果我想添加自定义字段怎么办？我怎么做？

3.  在模板文件中，我如何访问图像的特定操作（我称之为“再现”）？假设我将再现“缩略图”定义为 100x100。如何在模板中访问该特定再现？

4.  有没有办法随机化正在上传的文件的文件名？

5.  上传图片并针对 PageSpeed 进行测试后，事实证明仍然可以通过无损压缩来优化图片。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:01:04.303

啊，文件管理器。不是EE的亮点。

1.  如果文件管理器中的搜索不是很强大，我不会感到惊讶。我会尝试更多变体来缩小范围（什么样的字符会影响结果 - 逗号、破折号、空格等......部分术语是否匹配？）
2.  您目前无法将自定义元数据添加到文件管理器中的文件。
3.  使用以下语法：`{field_name:rendition}`，例如， `{my_image:thumbnail}`( [docs](http://expressionengine.com/user_guide/modules/channel/custom_fields.html#id11) )。
4.  没有。
5.  EE 仅使用 PHP 安装中可用的 GD 库来调整图像大小。如果您想要尽可能高的优化，则必须自己进行图像处理。

鉴于您的疑问，我建议您查看 Pixel 和 Tonic 的[Assets](http://pixelandtonic.com/assets)。它在大多数这些方面提供了卓越的文件管理体验。

# javascript - radio btn selection 将显示选择列表或文本字段，然后该值查询并显示在另一个文本字段中

> ID：13368055
> 
> 赞同：0
> 
> 时间：2012-11-13T20:15:27.283
> 
> 标签：javascript, jquery, jquery-selectbox

I have a form that when selecting the radio button it will query a database and populate either a select list or change select to a textbox for user input.(mostly working - won't go back to select after textbox - not as important now)

然后我希望它从选择或文本框中获取值并将其放入字符串变量中。然后我想我可以从那里拿走它。我希望。（我将使用字符串查询以获取其他信息以填充围兜号码）

这是我的 JS/php 一直在尝试的一切

```
$(document).ready(function () {
    var bibfield = "";

    $('#a1').change(function () {
        //$('#hiddenText').hide();  
        $('#hidden').empty();
        //$('#hidden').show();
        $.each(arrayShort, function (i, val) {
            $('#hidden').append('<option value="' + val + '">' + val + '</option>');
        });
    });

    $('#a2').change(function () {
        //$('#hiddenText').hide();
        $('#hidden').empty();
        //$('#hidden').show();
        $.each(arrayLong, function (i, val) {
            $('#hidden').append('<option value="' + val + '">' + val + '</option>');
        });
    });

    $('#a3').change(function () {
        //$('#hidden').hide();
        //$('#hiddenText')show();

        $('#hidden').replaceWith('<input name="hidden" id="hiddenText" type="text" size="26" >');

    });
}) 
```

这是我的表格

```
<input name="btn1" id="a1" type="radio" value="Radio button 1" />
<input name="btn1" id="a2" type="radio" value="Radio button 2" />
<input name="btn1" id="a3" type="radio" value="Radio button 3" />
<select id="hidden" name="hidden">
  <option selected></option>
</select>
<input type="text" name="sBib" />
<input type="text" name="eBib" /> 
```

如果选中 a1 或 a2，我需要填充选择，但如果选中 a3，则我需要用文本框替换选择，**然后填充变量 bibfield，以便我可以使用它进行查询**。

对此很陌生，我已经筋疲力尽，无法直截了当，感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:59:07.177

在这里，您将 hidden 替换为 hiddenText 并再次尝试找到已消失的 hidden 需要更正您的代码，如下所示，我用相同的 id="hidden" 替换整个选择或输入

```
$(document).ready(function () {
        var bibfield = "";
        // variable to indicate if select dropdown is available already otherwise create new
        var selectAvailable=true;
        $('#a1').change(function () {
            //$('#hiddenText').hide();  
            //$('#hidden').empty();
            //$('#hidden').show();
            $.each(arrayShort, function (i, val) {
                if(selectAvailable)
        {
        $('#hidden').append('<option value="' + val + '">' + val+ '</option>');
        }
        else
        {
                selectAvailable=true;
            $('#hidden').replaceWith('<select id="hidden" name="hidden">
                <option value="' + val + '">' + val + '</option></select>');
        }
            });
        });

        $('#a2').change(function () {
            //$('#hiddenText').hide();
           // $('#hidden').empty();
            //$('#hidden').show();
            $.each(arrayLong, function (i, val) {
            if(selectAvailable)
        {
            $('#hidden').append('<option value="' + val + '">' + val + '</option>');
        }
        else
        {
        selectAvailable=true;
            $('#hidden').replaceWith('<select id="hidden" name="hidden">
                <option value="' + val + '">' + val + '</option></select>');
        }

        });

        $('#a3').change(function () {
            //$('#hidden').hide();
            //$('#hiddenText')show();
           selectAvailable=false;
            $('#hidden').replaceWith('<input name="hidden" id="hidden" type="text" size="26" >');

        });
    }); 
```

# mysql - 临时表的替代品

> ID：13368060
> 
> 赞同：8
> 
> 时间：2012-11-13T20:15:43.297
> 
> 标签：mysql, temp-tables

我需要的是（并得到临时表或视图是这样的）：

```
numcasos  valcount1  valcount2  
--------  ---------  -----------
       0          2            1
       1          1            2
       2     (NULL)       (NULL)
       3     (NULL)            1
       4          1       (NULL)
       5     (NULL)       (NULL)
       6     (NULL)       (NULL)
       7     (NULL)       (NULL)
       8     (NULL)       (NULL)
       9     (NULL)       (NULL)
      10     (NULL)       (NULL) 
```

这是一个示例，因为我需要 300+ valcounts。MySQL：

```
CREATE TEMPORARY TABLE sumnum1
SELECT numos.num1 AS num1,
 COUNT(*)   AS valcount1      
FROM `numos` 
GROUP BY numos.num1  ; 

CREATE TEMPORARY TABLE sumnum2
SELECT numos.num2 AS num2,
 COUNT(*)   AS valcount2      
FROM `numos` 
GROUP BY numos.num2  ; 

SELECT casos.`numcasos` AS numcasos, 
sumnum1.valcount1 AS valcount1,
sumnum2.valcount2 AS valcount2

FROM ( casos
LEFT JOIN sumnum1
ON (casos.`numcasos`= sumnum1.num1)
LEFT JOIN sumnum2
ON (casos.numcasos = sumnum2.num2)) 
```

我想要的是用子查询获得相同的结果，但我收到错误消息：

```
Subquery returns more than 1 row 
```

在MySQL中可以吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T20:21:04.937

尝试类似的东西

```
SELECT casos.numcasos AS numcasos, 
sumnum1.valcount1 AS valcount1,
sumnum2.valcount2 AS valcount2
FROM casos
LEFT JOIN
(
    SELECT numos.num1 AS num1, COUNT(*) AS valcount1
    FROM numos GROUP BY numos.num1 
)sumnum1  ON (casos.`numcasos`= sumnum1.num1)
LEFT JOIN 
(
   SELECT numos.num2 AS num2, COUNT(*) AS valcount2
   FROM numos GROUP BY numos.num2  
)sumnum2 ON (casos.numcasos = sumnum2.num2)) 
```

# jquery - 单击一个 HTML 元素并触发 next() 可用的超链接？

> ID：13368062
> 
> 赞同：1
> 
> 时间：2012-11-13T20:16:03.957
> 
> 标签：jquery, html, hyperlink, triggers

我想要一个元素来触发页面上的下一个可用元素。

```
$("span.topic").click(function(){
    $("span.topic").next("a.page").trigger('click');
});

<div> 
    <span class="topic">Topic 1</span>
    <a class="page" href="http://www.google.com">Welcome to the first Topic</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:18:41.073

## [jsBin 演示](http://jsbin.com/ovoqal/5/edit)

```
$('.topic').on('click', function(){
  window.location.href = $(this).next('a').attr('href');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:26:52.370

如果您试图`<span class='topic'>Topic 1</span>`在点击时导航，您将无法通过触发锚标记的点击事件来做到这一点。浏览器将不会使用该方法进行导航。

但是，您可以将 更改`window.location.href`为 what `httt://www.google.com`。

尝试这个：

```
$("span.topic").click(function(){
    window.location.href = $("span.topic").next("a.page").attr('href');
}); 
```

这是您尝试的解决方案，但它不是引用您要导航到的 URL 的非常实用的方法。您是否有理由不像这样将 span 包裹在锚标签中？

```
<div> 
    <a class="page" href="http://www.google.com">
        <span class="topic">Topic 1</span>
        Welcome to the first Topic
    </a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:19:56.707

使用`this`所以它知道从哪个元素开始

```
$("span.topic").click(function(){
    $(this).next("a.page").click();
}); 
```

或者如果跨度和锚之间会有元素..

```
$("span.topic").click(function(){
    $(this).nextAll("a").first().click();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T20:20:53.767

我不明白你为什么要使用这么多不必要的选择器。利用：

```
$("span.topic").click(function(){
    $(this).next().click();
}); 
```

# plone - 如何以编程方式将 OpenID 用户添加到 Plone 站点

> ID：13368064
> 
> 赞同：5
> 
> 时间：2012-11-13T20:16:22.443
> 
> 标签：plone

在某些 OpenID 用户首次登录我的 Plone 站点*之前*，我需要将角色（包括成员角色）、成员数据和用户文件夹分配给他们。也就是说，我需要以编程方式将 OpenID 用户添加到我的 Plone 站点。portal_registration.addMember 无法添加 OpenID 用户。plone.openid 有自己的 PAS 插件，它不创建成员对象。我该怎么做才能在 setuphandler 中复制？*通常的做法是手动登录 OpenID 用户，然后在登录后*添加角色、成员数据和共享。但是，该用户故事不能以编程方式复制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T05:07:16.230

唯一重要的是为每个用户生成的用户 ID。应该可以预先使用与开放 id 身份 url 匹配的用户 id 创建常规成员，为他们分配角色，然后（仅）使用 openid 作为这些用户的替代身份验证方法。

**更新：**正如 Chris 在下面评论的那样，无法通过 Plone UI 添加具有 URL 作为 id 的用户，但必须通过 ZMI（Zope 管理界面）将它们直接创建到 PAS 用户文件夹中。

# expressionengine - 全局变量不解析为参数

> ID：13368076
> 
> 赞同：1
> 
> 时间：2012-11-13T20:17:30.913
> 
> 标签：expressionengine

我在作为参数传递时无法解析全局变量的问题。

```
{exp:channel:entries    
    disable="categories|category_fields|member_data|pagination|trackbacks"
    dynamic="no"
    entry_id="{structure:child_ids_for:21}"
} 
```

(0.012500 / 3.36MB) 标签：{exp:channel:entries disable="categories|category_fields|member_data|pagination|trackbacks" dynamic="no" entry_id="{structure:child_ids_for:21}" }

使用和不使用 parse="inward" 都会产生相同的结果

但是，这可以正常工作并获取我需要的数据

```
{exp:channel:entries    
    disable="categories|category_fields|member_data|pagination|trackbacks"
    dynamic="no"
    entry_id="{exp:query sql='SELECT exp_structure.entry_id, 
            exp_structure.parent_id, 
            exp_structure.lft
            FROM exp_structure
            WHERE parent_id = 21
            ORDER BY exp_structure.lft ASC'}{entry_id}|{/exp:query}"
    parse="inward"
} 
```

但是，如果我添加一个全局变量 author_id="{logged_in_member_id}" 它将无法工作，如果我将该值硬编码为 1 那么它会起作用。

关于这里可能发生什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:49:02.927

[您可以通过使用Stash](https://github.com/croxton/Stash/tree/dev)来避免嵌入的开销。它具有非常有用的能力，可以让您明确说明不同代码块的首选解析顺序。在这种情况下，您要做的第一件事是通过 存储这两个变量`{exp:stash:set}`，然后您可以通过在第二个代码块中检索它们`{exp:stash:get}`。魔术位是解析优先级标签；因为第一项的优先级为 10，它将首先执行，这确保了 var 可用作第二个`{exp:stash:parse}`标签中的通道条目参数。

```
{exp:stash:parse priority="10" process="end"}
    {exp:stash:set}
        {stash:structure_ids}{structure:sibling_ids}{/stash:structure_ids}
        {stash:logged_in_member}{logged_in_member_id}{/stash:logged_in_member}
    {/exp:stash:set}
{/exp:stash:parse}

{exp:stash:parse priority="20" process="end"}
    {exp:channel:entries
        disable="categories|category_fields|member_data|pagination|trackbacks"
        dynamic="no"
        entry_id="{exp:stash:get name='structure_ids'}"
        author_id="{exp:stash:get name='logged_in_member'}"
        parse="inward"
    }
    ...
    {/exp:channel:entries}
{/exp:stash:parse} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:50:23.923

我不能说结构的全局变量，但`{logged_in_member_id}`它是一个*后期解析的全局变量*，这意味着你不能在模块标签参数中使用它。我只能假设结构变量也是如此。

您*可以*在参数中使用`CURRENT_USER`常量（[文档](http://expressionengine.com/user_guide/modules/channel/channel_entries.html#author-id)）。`author_id`

不幸的是，您的`{structure:child_ids_for:21}`问题的解决方案是将其作为[嵌入变量](http://expressionengine.com/user_guide/templates/embedding.html#embed-variables-for-the-embedded-template)传递，并将您的 Channel Entries 循环放入嵌入中。（我说不幸的是因为嵌入确实会产生一些开销。）

注意：`parse="inward"`对模块标签对没有影响——它们*总是*向内解析。它只影响插件标签对。

# fancybox-2 - 调用 .open() 时 Fancybox 2 未显示

> ID：13368080
> 
> 赞同：0
> 
> 时间：2012-11-13T20:17:46.267
> 
> 标签：fancybox-2

我正在尝试为 Fancybox 安装一个 Knockout 绑定（尽管我不认为这里涉及太多）。我根据此处示例中的代码调用 Fancybox：http: [//jsfiddle.net/STgGM/](http://jsfiddle.net/STgGM/)

```
$.fancybox.open([{
                    href: value.image(),
                    title: value.title()
                }], {
                    padding: 0
                }); 
```

传入的对象如下所示：

```
{href: "http://example.com/imageurl", title: "Image Title"} 
```

单步执行 fancybox 代码，它不会尝试在脚本的第 855 行显示图像：

```
if (!type) {
    F.coming = null;

    //If we can not determine content type then drop silently or display next/prev item if looping through gallery
    if (F.current && F.router && F.router !== 'jumpto') {
        F.current.index = index;

        return F[ F.router ]( F.direction );
    }

    return false;
} 
```

我现在不完全确定它在寻找什么。`F.current`为 null`F.router`且不存在于对象上。

所以，简而言之，我试图通过点击链接来触发 Fancybox，而不需要过多地修改我的标记，或者调用`.fancybox()`特定的元素。这似乎是可能的，但它似乎对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:49:32.793

在更多地挖掘代码之后，我最终找到了解决方案。Fancybox 试图通过检查我给它的 URL 来弄清楚我告诉它显示什么样的内容。由于我的 URL 没有扩展名，因为它来自使用 ID 访问图像的外部服务，而不是完整的文件名，所以 Fancybox 不知道我告诉它要显示什么，于是放弃了。

解决方案，因为我知道内容是什么，是这样的：

```
$.fancybox.open({
            href: value.image(),
            title: value.title(),
            type: 'image'
        },//other stuff (not relevant to this) 
```

这使得 FancyBox 按预期工作。

# css - div 元素设置为块。为什么？

> ID：13368082
> 
> 赞同：4
> 
> 时间：2012-11-13T20:18:00.477
> 
> 标签：css, layout, html, block

我有时会看到 DIV 设置为`display:block`考虑到 DIV 已经是一个块框，是否有任何特殊原因。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T20:20:01.553

您可能会覆盖另一个 CSS 属性

```
.myClass {
  display: inline;
} 
```

或替换`display:none;`为“取消隐藏”它（通常这是由 javascript 即时完成的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T20:19:45.103

可能是覆盖另一种可能将其设置为其他样式的样式，但除此之外，它很可能是对编写它的人的提醒。没有真正的理由包含该规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T20:20:33.190

如果您要覆盖现有样式，那是有道理的。将 div 设置为阻止没有来自其他地方的样式不会。

# matlab - 将循环矩阵复制到一个 3-d 矩阵中

> ID：13368083
> 
> 赞同：0
> 
> 时间：2012-11-13T20:18:02.113
> 
> 标签：matlab, loops, matrix

我有一个要加载的文本文件列表，然后提取它们全部重叠的行。第一列包含年份，每个数据集跨越不同的年份，但它们都在中间重叠。最后，我想在一个矩阵中有一个重叠年份的三维矩阵。我的代码一直卡在我注释掉的那一行。我知道它不正确，但谁能告诉我为什么它不正确？

```
clear all
name_list =  {'Beijing';'GT';'soi';'naoi';'Sydney_Airport';'Los Angeles';'Paris';'Presque Isle'};
[m,n] = size(name_list);

files = dir('*.txt');
[m,n] = size(files);

for i=1:m
    eval(['load ' files(i).name ' -ascii']);
    vals{i} = load(files(i).name);
    matrix = vals{i};
    station = (files(i).name(1:end-4));
    startyear(i) = min(matrix(:,1));
    endyear(i) = max(matrix(:,1));
    allstart = max(startyear);
    allend = min(endyear);
    %matrixnew(i) = matrix(allstart:allend,2:13,i); 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:58:42.837

这里有两个问题：

1.  您的注释行`%matrixnew(i) = matrix(allstart:allend,2:13,i);`假定这`matrix`是一个 3-d 数组，但在其他地方您将其视为 2-d（我相信它`load`总是返回一个 2-d 数组）。这可能就是您收到“索引超出矩阵尺寸”错误的原因。例子：

    ```
    >> foo = rand(10,10);
    >> foo(2:10,3:4,2)
    Index exceeds matrix dimensions. 
    ```

    也许你想要`matrix(allstart:allend,2:13)`？但这不起作用，因为`allstart`包含 a *year*，它可能不是数组的有效索引（更可能是您的错误的原因）。使用包含最小值的*索引会更接近正确，但我认为它仍然行不通。*

2.  `matrixnew`指的是数组的单个元素。您不能将数组分配给数组的元素。grantnz 是正确的，制作`matrixnew`一个单元阵列可以解决这个错误，我猜最后你可以把你的单元阵列变成 3-d 阵列。

我认为你走在正确的轨道上，但缺少一些东西来完成这项工作。需要考虑的一件事是，您似乎正在尝试一次性完成所有操作。我不明白这怎么行。您需要先处理*所有*文件，然后才能决定要保留的年份范围。所以要分多次执行：首先将所有文件中的所有数据加载到一个单元格数组中，然后计算出年份范围，然后从每个文件中提取该年份范围内的数据。

# ruby-on-rails - Rails - Ransack - 重新排序属性

> ID：13368084
> 
> 赞同：0
> 
> 时间：2012-11-13T20:18:06.687
> 
> 标签：ruby-on-rails, ransack

我在我的 Rails 应用程序中使用 Ransack gem。它按预期工作，但是如何在属性选择的下拉框中重新排序属性列表？对我来说不幸的是，用户的“姓名”在列表的底部附近，而理想情况下它会在顶部。

```
.field
  = f.attribute_fields do |a|
    = a.attribute_select associations: [:terms, :contact_informations, :educational_experiences, :home_towns, :local_residences, :permanent_addresses, :emergency_contact_informations] 
```

以上是我当前的属性选择，现在它列出了所有用户属性，然后是每个关联的属性。在我的模型中，我使用以下内容过滤掉一些属性。

```
def self.ransackable_attributes(auth_object = nil)
    super - ['id', 'first_name', 'middle_name', 'last_name', 'created_at', 'updated_at', 'encrypted_password', 'reset_password_token', 'reset_password_sent_at', 'remember_created_at',
              'sign_in_count', 'current_sign_in_at', 'last_sign_in_at', 'current_sign_in_ip', 'last_sign_in_ip']
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:06:00.027

我在 ransack github 存储库中找到了这个：

```
def ransackable_attributes(auth_object = nil)
  column_names + _ransackers.keys
end 
```

所以在我的模型中，我可以通过做一些不同的事情来覆盖这个方法。

```
 def self.ransackable_attributes(auth_object = nil)
    column_names.unshift(column_names.delete('name', 'role')) - ['id', 'first_name', 'middle_name', 'last_name', 'created_at', 'updated_at', 'encrypted_password', 'reset_password_token', 'reset_password_sent_at', 'remember_created_at',
                  'sign_in_count', 'current_sign_in_at', 'last_sign_in_at', 'current_sign_in_ip', 'last_sign_in_ip']+ _ransackers.keys
  end 
```

由于`column_names`只是一个数组，我可以从数组中删除一个元素，然后用`unshift`. 如果有人有更好的解决方案，请仍然在此处发布。

# git - 从选项卡完成历史记录中删除已删除分支的最正确方法是什么？

> ID：13368098
> 
> 赞同：7
> 
> 时间：2012-11-13T20:19:31.653
> 
> 标签：git, bash, tab-completion

我不完全记得导致我现在的情况的事件，但它发生*了*类似这样的事情：

*   有一个名为`2-dev-inprogress`
*   将分支名称更改`2-dev-inprogress`为`2-dev-wip`使用：
    *   `git branch -mv 2-dev-inprogress 2-dev-wip`

我的问题是，当我在另一个分支并想`2-dev-wip`通过使用 tab-completion 结帐（像往常一样）时，它只会完成`2-dev-`，并给我两个选项：

*   `2-dev-inprogress`
*   `2-dev-wip`

有人知道一些特定的手术来`2-dev-inprogress`从标签完成历史中删除该分支吗？`source ~/.git-completion.bash`到目前为止，我唯一尝试过的就是在我的 .bash_profile中注释掉并重新启动 iTerm，但没有运气。我还窥探了 .git 目录，但害怕我会捏造一些无法修复的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:48:02.680

接受的答案是有道理的，但在我的情况下不起作用。如果远程分支不再存在，那么您可能还需要修剪。我使用了[Seth Robertson 的建议](http://sethrobertson.github.com/GitBestPractices/)来清理我的系统并一次删除许多分支：`git remote | xargs -n1 git remote prune`. 如果另一个人删除了远程分支，或者在我的情况下，如果您是从另一台机器上删除的，就会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:15:00.210

你还有一个名为 的远程分支`2-dev-inprogress`吗？如果是这样，您必须通过注释掉 /etc/bash_completion.d/git 中的远程检查来删除此分支或防止远程分支的 git 完成

# c# - 从 XAML 引用嵌套枚举类型

> ID：13368099
> 
> 赞同：12
> 
> 时间：2012-11-13T20:19:32.980
> 
> 标签：c#, xaml

我似乎无法从 XAML 引用公共嵌套枚举类型。我有一堂课

```
namespace MyNamespace
{
  public class MyClass
  {
    public enum MyEnum
    {
       A,
       B,
    }
  }
} 
```

我尝试`MyEnum`像这样在 Xaml 中引用：

```
xmlns:MyNamespace="clr-namespace:MyNamespace;assembly=MyApp"
....

{x:Type MyNamespace:MyClass:MyEnum}    // DOESN'T WORK 
```

但 VS 抱怨它找不到公共类型`MyEnum`。我还尝试使用`+`基于[这篇文章](https://stackoverflow.com/questions/5676649/unable-to-find-enum-type-for-static-reference-in-wpf)的答案之一的语法......

```
{x:Type MyNamespace:MyClass+MyEnum}    // DOESN'T WORK 
```

但这也不起作用。

请注意，`x:Static` *它*适用于以下`+`语法：

```
{x:Static MyNamespace:MyClass+MyEnum.A}  // WORKS 
```

如果我搬出`MyEnum`去，`MyClass`我也可以参考它。但如果它是嵌套的...

那么我错过了什么？如何使用 XAML 引用嵌套枚举`x:Type`？（请注意，我不是要实例化任何东西，只是引用类型）。

**更新**

看起来这只是 VS 2010 设计器的一个错误。设计师抱怨说`Type MyNamespace:MyClass+MyEnum was not found`。但是应用程序似乎可以运行并正确访问嵌套类型。我也用嵌套类试过这个，它在运行时工作。

可能的开放错误：[http ://social.msdn.microsoft.com/forums/en-US/wpf/thread/12f3e120-e217-4eee-ab49-490b70031806/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/12f3e120-e217-4eee-ab49-490b70031806/)

相关主题：[在 xaml 中编写嵌套类型时出现设计时错误](https://stackoverflow.com/questions/2278925/wpf-design-time-error-while-writing-nested-type-in-xaml)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-03-16T21:54:21.553

这里有点晚了，但我使用了标记扩展，然后在我的 xaml 中使用以下引用来引用组合框中的嵌套枚举：

```
xmlns:MyNamespace="clr-namespace:MyNamespace;assembly=MyApp" 
```

...

```
ItemsSource="{Binding Source={resource:EnumBindingSource {x:Type MyNamespace:MyClass+MyEnum}}}" 
```

MarkupExtension 的代码取自[这里](https://brianlagunas.com/a-better-way-to-data-bind-enums-in-wpf/)

```
public class EnumBindingSourceExtension : MarkupExtension
{
    private Type _enumType;
    public Type EnumType
    {
        get { return this._enumType; }
        set
        {
            if (value != this._enumType)
            {
                if (null != value)
                {
                    Type enumType = Nullable.GetUnderlyingType(value) ?? value;
                    if (!enumType.IsEnum)
                        throw new ArgumentException("Type must be for an Enum.");
                }

                this._enumType = value;
            }
        }
    }

    public EnumBindingSourceExtension() { }

    public EnumBindingSourceExtension(Type enumType)
    {
        this.EnumType = enumType;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        if (null == this._enumType)
            throw new InvalidOperationException("The EnumType must be specified.");

        Type actualEnumType = Nullable.GetUnderlyingType(this._enumType) ?? this._enumType;
        Array enumValues = Enum.GetValues(actualEnumType);

        if (actualEnumType == this._enumType)
            return enumValues;

        Array tempArray = Array.CreateInstance(actualEnumType, enumValues.Length + 1);
        enumValues.CopyTo(tempArray, 1);
        return tempArray;
    }
} 
```

# python - python 异常作为类属性是一件坏事吗？

> ID：13368100
> 
> 赞同：7
> 
> 时间：2012-11-13T20:19:36.937
> 
> 标签：python, exception

我发现自己经常想像这样构建我的异常类：

```
# legends.py
class Error(Exception): pass

class Rick(object):
    class Error(Error): pass
    class GaveYouUp(Error): pass
    class LetYouDown(Error): pass

class Michael(object):
    class Error(Error): pass
    class BlamedItOnTheSunshine(Error): pass
    class BlamedItOnTheMoonlight(Error): pass 
```

我只在 Django ( `DoesNotExist`) 中看到过这种模式，它非常有意义。有什么我遗漏的吗，为什么大多数人似乎都喜欢顶级例外？

**编辑** 我会将这些类用于通用粒度，例如：

```
import legends

try:
    do_stuff()
except legends.Michael.Error:
    blame_it_on_the_boogie()
except legends.Rick.GaveYouUp:
    let_you_down()
except legends.Error:
    pass
except Exception as e:
    raise Hell() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T20:25:01.573

这是 Django 用于某些 ORM 相关异常的确切模式。

优点是您可以有一个 except 子句来检查通过实例访问的类型：

```
rick = Rick()

try:
   rick.roll()
except rick.GaveYouUp:
   never()
except rick.LetYouDown:
   never_ever() 
```

这在这里看起来没什么用，但如果`rick`是函数参数，那么它可能会相当有用。

这在编写引发异常的通用代码时也非常有用：

```
GoddamStar(object):
   def sing(self,tune):
       raise self.Error()

class Rick(GoddamStar):
    class Error(Error): pass
    class GaveYouUp(Error): pass
    class LetYouDown(Error): pass

class Michael(GoddamStar):
    class Error(Error): pass
    class BlamedItOnTheSunshine(Error): pass
    class BlamedItOnTheMoonlight(Error): pass

rick = Rick()

try:
   rick.sing()
except Rick.GaveYouUp:
   never()
except Michael.Error:
   never_ever() 
```

Django 的异常通常都派生自全局基类，因此您还可以有一个包罗万象的子句，它仍然会打开一种异常类型，以防您`rick`属于未知（或未提供的）类。

这并不常见的原因是（a）它不适用于早期绑定的语言，这吸引了大多数书籍作者（b）这对用户有用的情况很少见，因此应用程序作家可能认为他们不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:23:14.130

如果你想在 Micheal 之外引发例如 BlamedItOnTheSunshine，你必须通过 raise Micheal.BlamedItOnTheSunshine('error text') 来调用它。

例如：

```
class A:
    class E(Exception): pass
    def __init__(self): raise A('error in A')

class B:
    def __init__(self): raise A.E('error in B') 
```

在此示例中，A 和 B 不相关，但如果您有如下关系：

```
class Interpret(object):
    class LetsYouDown(Exception): pass
    def __init__(self): raise self.LetsYouDown("I'm not Rick!")

class Michael(Interpret):
    class BlameItOnTheSunshine(Exception): pass
    def __init__(self): raise self.BlameItOnTheSunshine("It's not the Moon!")

class Rick(Interpret):
    class NeverEver(Exception): pass
    def __init__(self): print "Never Ever!"

and want now something like:
    try:
        for superstar in [Interpret, Michael, Rick]:
            star_in_show = superstar()            
    except superstar.LetsYouDown:
        print "Where's Rick?"
    except superstar.BlameItOnTheSunshine:
        print "Must be Michael!" 
```

你会得到一个错误，我称之为违反 Liskov 原则。因此，使用 OOP 的主要原因之一（多态性）在某种程度上受到了损害。但这并不一定意味着您不能或不应该使用它。请注意这些限制。

我希望这能清除我最初的隐秘保留。

# java - JPanel 投影

> ID：13368103
> 
> 赞同：22
> 
> 时间：2012-11-13T20:19:49.407
> 
> 标签：java, swing, jpanel, shadow

我有一个`JPanel`元素，我想给它添加一个阴影，我怎样才能给元素添加一个漂亮的褪色阴影？我需要使用外部库还是可以使用内置的东西？

例子：

![在此处输入图像描述](../Images/6e589f000820e3f1cefff12032053bd8.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-13T22:24:05.723

因此，我查看了扩展 JPanel 的[swingx](http://java.net/projects/swingx)并能够使用以下代码实现我正在寻找的结果：

```
public class Canvas extends JXPanel{

    public Canvas(){
        DropShadowBorder shadow = new DropShadowBorder();
        shadow.setShadowColor(Color.BLACK);
        shadow.setShowLeftShadow(true);
        shadow.setShowRightShadow(true);
        shadow.setShowBottomShadow(true);
        shadow.setShowTopShadow(true);
        this.setBorder(shadow);
    }
} 
```

结果：

![阴影](../Images/eadcee1f44f0fe1d5063b7e8d45a38f5.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-13T21:23:10.237

这是一个完整的**HACK**

这将要求您拥有[JH-Labs 过滤器](http://www.jhlabs.com/ip/filters/index.html)的副本以实现模糊

这是一个昂贵的操作，因为它使用了模糊操作，我使用它的原因是考虑到它正在遮蔽的组件的形状。

![在此处输入图像描述](../Images/31921c06eb9192ce2646fe5939e9c92a.png)

您遇到的主要问题是边框本身不是透明的，没有办法真正拥有不透明的组件和透明的边框。解决黑客问题

```
public class TestDropShadowBorder {

    public static void main(String[] args) {
        new TestDropShadowBorder();
    }

    public TestDropShadowBorder() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setBackground(Color.RED);
            setBorder(new EmptyBorder(20, 20, 20, 20));

            setLayout(new BorderLayout());
            JPanel drop = new JPanel();
            drop.setOpaque(false);
            DropShadowBorder border = new DropShadowBorder();
            border.setFillContentArea(true);
            drop.setBorder(new CompoundBorder(border, new LineBorder(Color.BLACK)));

            add(drop);

        }
    }

    public static class DropShadowBorder implements Border {

        protected static final int SHADOW_SIZE = 4;
        protected static final Map<Component, DropShadowBorder.CachedBorder> BORDER_CACHE = new WeakHashMap<Component, CachedBorder>(5);
        private boolean fillContentArea;
        private int shadowSize;
        private float shadowOpacity;
        private Color shadowColor;

        public DropShadowBorder() {

            this(SHADOW_SIZE, Color.BLACK, 0.5f, true);

        }

        public DropShadowBorder(boolean paintContentArea) {

            this(SHADOW_SIZE, Color.BLACK, 0.5f, paintContentArea);

        }

        public DropShadowBorder(int shadowSize) {

            this(shadowSize, Color.BLACK, 0.5f, true);

        }

        public DropShadowBorder(Color shadowColor) {

            this(SHADOW_SIZE, shadowColor, 0.5f, true);

        }

        public DropShadowBorder(int shadowSize, Color showColor) {

            this(shadowSize, showColor, 0.5f, true);

        }

        public DropShadowBorder(int shadowSize, float opacity) {

            this(shadowSize, Color.BLACK, opacity, true);

        }

        public DropShadowBorder(Color shadowColor, float opacity) {

            this(SHADOW_SIZE, shadowColor, opacity, true);

        }

        public DropShadowBorder(int shadowSize, Color shadowColor, float opacity) {

            this(shadowSize, shadowColor, opacity, true);

        }

        public DropShadowBorder(int shadowSize, boolean paintContentArea) {

            this(shadowSize, Color.BLACK, 0.5f, paintContentArea);

        }

        public DropShadowBorder(Color shadowColor, boolean paintContentArea) {

            this(SHADOW_SIZE, shadowColor, 0.5f, paintContentArea);

        }

        public DropShadowBorder(int shadowSize, Color showColor, boolean paintContentArea) {

            this(shadowSize, showColor, 0.5f, paintContentArea);

        }

        public DropShadowBorder(int shadowSize, float opacity, boolean paintContentArea) {

            this(shadowSize, Color.BLACK, opacity, paintContentArea);

        }

        public DropShadowBorder(Color shadowColor, float opacity, boolean paintContentArea) {

            this(SHADOW_SIZE, shadowColor, opacity, paintContentArea);

        }

        public DropShadowBorder(int shadowSize, Color showColor, float opacity, boolean paintContentArea) {

            setShadowSize(shadowSize);
            setShadowColor(showColor);
            setShadowOpacity(opacity);
            setFillContentArea(paintContentArea);

        }

        public void setShadowColor(Color shadowColor) {
            this.shadowColor = shadowColor;
        }

        public void setShadowOpacity(float shadowOpacity) {
            this.shadowOpacity = shadowOpacity;
        }

        public Color getShadowColor() {
            return shadowColor;
        }

        public float getShadowOpacity() {
            return shadowOpacity;
        }

        public void setShadowSize(int size) {

            shadowSize = size;

        }

        public int getShadowSize() {

            return shadowSize;

        }

        public static GraphicsConfiguration getGraphicsConfiguration() {

            return GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();

        }

        public static BufferedImage createCompatibleImage(int width, int height) {

            return createCompatibleImage(width, height, Transparency.TRANSLUCENT);

        }

        public static BufferedImage createCompatibleImage(int width, int height, int transparency) {

            BufferedImage image = getGraphicsConfiguration().createCompatibleImage(width, height, transparency);
            image.coerceData(true);
            return image;

        }

        public static BufferedImage generateShadow(BufferedImage imgSource, int size, Color color, float alpha) {

            int imgWidth = imgSource.getWidth() + (size * 2);
            int imgHeight = imgSource.getHeight() + (size * 2);

            BufferedImage imgMask = createCompatibleImage(imgWidth, imgHeight);
            Graphics2D g2 = imgMask.createGraphics();
            g2.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
            g2.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
            g2.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
            g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
            g2.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
            g2.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);

            int x = Math.round((imgWidth - imgSource.getWidth()) / 2f);
            int y = Math.round((imgHeight - imgSource.getHeight()) / 2f);
            g2.drawImage(imgSource, x, y, null);
            g2.dispose();

            // ---- Blur here ---

            BufferedImage imgGlow = generateBlur(imgMask, size, color, alpha);
//
//        BufferedImage imgGlow = ImageUtilities.createCompatibleImage(imgWidth, imgHeight);
//        g2 = imgGlow.createGraphics();
//
//        g2.drawImage(imgMask, 0, 0, null);
//        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));
//        g2.setColor(color);
//
//        g2.fillRect(x, y, imgSource.getWidth(), imgSource.getHeight());
//        g2.dispose();
//
//        imgGlow = filter.filter(imgGlow, null);

            // ---- Blur here ----

//        imgGlow = ImageUtilities.applyMask(imgGlow, imgMask, AlphaComposite.DST_OUT);

            return imgGlow;

        }

        public static BufferedImage generateBlur(BufferedImage imgSource, int size, Color color, float alpha) {

            GaussianFilter filter = new GaussianFilter(size);

            int imgWidth = imgSource.getWidth();
            int imgHeight = imgSource.getHeight();

            BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);
            Graphics2D g2d = imgBlur.createGraphics();
            g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
            g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
            g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);

            g2d.drawImage(imgSource, 0, 0, null);
            g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));
            g2d.setColor(color);

            g2d.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());
            g2d.dispose();

            imgBlur = filter.filter(imgBlur, null);

            return imgBlur;

        }

        public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {

            /*
             * Because of the amount of time it can take to render the drop shadow,
             * we cache the results in a static cache, based on the component
             * and the components size.
             * 
             * This allows the shadows to repainted quickly so long as the component
             * hasn't changed in size.
             */

            BufferedImage dropShadow = null;

            DropShadowBorder.CachedBorder cached = BORDER_CACHE.get(c);
            if (cached != null) {

                dropShadow = cached.getImage(c);

            }

            if (dropShadow == null) {

                int shadowSize = getShadowSize();
                float opacity = getShadowOpacity();
                Color color = getShadowColor();

                // Create a blank canvas, from which the actually border can be generated
                // from...
                // The ahadow routine can actually generate a non-rectangular border, but
                // because we don't have a suitable template to run from, we need to 
                // set this up our selves...
                // It would be nice to be able to user the component itself, but this will
                // have to
                BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
                Graphics2D g2d = img.createGraphics();
                g2d.fillRect(0, 0, width - (shadowSize * 2), height - (shadowSize * 2));
                g2d.dispose();

                // Generate the shadow
                BufferedImage shadow = generateShadow(img, shadowSize, getShadowColor(), getShadowOpacity());

                // We need to produce a clipping result, cause the border is painted ontop
                // of the base component...
                BufferedImage clipedShadow = createCompatibleImage(width, height, Transparency.TRANSLUCENT);
                g2d = clipedShadow.createGraphics();
                Shape clip = g2d.getClip();

                // First we create a "area" filling the avaliable space...
                Area area = new Area(new Rectangle(width, height));
                // Then we subtract the space left over for the component
                area.subtract(new Area(new Rectangle(width - (shadowSize * 2), height - (shadowSize * 2))));
                // And then apply the clip
                g2d.setClip(area);
                // Then draw the shadow image
//        g2d.drawImage(shadow, -(shadowSize / 2), -(shadowSize / 2), c);
                g2d.drawImage(shadow, 0, 0, c);
                g2d.setClip(clip);

            if (!c.isOpaque() && isFillContentArea()) {

                area = new Area(new Rectangle(width - (shadowSize * 2), height - (shadowSize * 2)));
                g2d.setColor(c.getBackground());
                g2d.fill(area);

            }

//            g2d.setColor(Color.RED);
//            g2d.drawRect(x, y, width - 1, height - 1);
//
//            g2d.setColor(Color.GREEN);
//            g2d.drawRect(x, y, width - (shadowSize * 2), height - (shadowSize * 2));

                g2d.dispose();

                dropShadow = clipedShadow;
                BORDER_CACHE.put(c, new CachedBorder(dropShadow, c.getSize()));

            }

            g.drawImage(dropShadow, x, y, c);

//        if (!c.isOpaque() && isFillContentArea()) {
//
//            Graphics2D g2d = (Graphics2D) g;
//            
//            Area area = new Area(new Rectangle(width - (shadowSize * 2), height - (shadowSize * 2)));
//            g2d.setColor(c.getBackground());
//            g2d.fill(area);
//
//        }

//        g.setColor(Color.MAGENTA);
//        g.drawRect(x + 1, y + 1, width - (shadowSize * 2) - 1, height - (shadowSize * 2) - 1);

        }

        public Insets getBorderInsets(Component cmpnt) {
            return new Insets(0, 0, getShadowSize() * 2, getShadowSize() * 2);
        }

        public boolean isBorderOpaque() {
            return false;
        }

        /**
         * Returns if the content area should be painted by this border when the
         * parent component is opaque...
         *
         * The problem is, the paintComponent method will paint the WHOLE component
         * background, including the border area. This is a reasonable assumption to
         * make, but it makes the shadow border really show up when the parent
         * component is a different color.
         *
         * This allows the border to take control of that fact.
         *
         * When using it, you will need to try and make this the first border to get
         * painted though :P
         *
         * @return
         */
        public boolean isFillContentArea() {
            return fillContentArea;
        }

        public void setFillContentArea(boolean fill) {

            fillContentArea = fill;

        }

        protected class CachedBorder {

            private BufferedImage image;
            private Dimension size;

            public CachedBorder(BufferedImage border, Dimension size) {

                this.image = border;
                this.size = size;

            }

            public BufferedImage getImage(Component comp) {

                BufferedImage dropShadow = null;

                if (comp.getSize().equals(size)) {

                    dropShadow = image;

                }

                return dropShadow;

            }
        }
    }
} 
```

**更新了额外的例子**

阴影边框有局限性，它不能考虑组件的形状，因为绘制边框的时候，组件还没有开始，所以我们没有参考点。

![在此处输入图像描述](../Images/929e9631cc04022e195bf71587186714.png)![在此处输入图像描述](../Images/c209b8f68cce57da79f771e0e59ed38c.png)

为了能够生成考虑到组件形状的阴影，我们需要创建一个自定义组件并将我们的边框直接注入到绘制过程中。

```
public class TestDropShadowBorder {

    public static void main(String[] args) {
        new TestDropShadowBorder();
    }

    public TestDropShadowBorder() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setBackground(Color.RED);
            setBorder(new EmptyBorder(20, 20, 20, 20));
            setLayout(new BorderLayout());
            add(new RoundedPane());
        }
    }

    public class RoundedPane extends JPanel {

        private int shadowSize = 5;

        public RoundedPane() {
            // This is very important, as part of the panel is going to be transparent
            setOpaque(false);
        }

        @Override
        public Insets getInsets() {
            return new Insets(0, 0, 10, 10);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            int width = getWidth() - 1;
            int height = getHeight() - 1;

            Graphics2D g2d = (Graphics2D) g.create();
            applyQualityProperties(g2d);
            Insets insets = getInsets();
            Rectangle bounds = getBounds();
            bounds.x = insets.left;
            bounds.y = insets.top;
            bounds.width = width - (insets.left + insets.right);
            bounds.height = height - (insets.top + insets.bottom);

            RoundRectangle2D shape = new RoundRectangle2D.Float(bounds.x, bounds.y, bounds.width, bounds.height, 20, 20);

            /**
             * * THIS SHOULD BE CAHCED AND ONLY UPDATED WHEN THE SIZE OF THE
             * COMPONENT CHANGES **
             */
            BufferedImage img = createCompatibleImage(bounds.width, bounds.height);
            Graphics2D tg2d = img.createGraphics();
            applyQualityProperties(g2d);
            tg2d.setColor(Color.BLACK);
            tg2d.translate(-bounds.x, -bounds.y);
            tg2d.fill(shape);
            tg2d.dispose();
            BufferedImage shadow = generateShadow(img, shadowSize, Color.BLACK, 0.5f);

            g2d.drawImage(shadow, shadowSize, shadowSize, this);

            g2d.setColor(getBackground());
            g2d.fill(shape);

            /**
             * THIS ONE OF THE ONLY OCCASIONS THAT I WOULDN'T CALL
             * super.paintComponent *
             */
            getUI().paint(g2d, this);

            g2d.setColor(Color.GRAY);
            g2d.draw(shape);
            g2d.dispose();
        }
    }

    public static GraphicsConfiguration getGraphicsConfiguration() {

        return GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();

    }

    public static BufferedImage createCompatibleImage(int width, int height) {

        return createCompatibleImage(width, height, Transparency.TRANSLUCENT);

    }

    public static void applyQualityProperties(Graphics2D g2) {
        g2.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
        g2.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
        g2.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
        g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g2.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        g2.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);
    }

    public static BufferedImage createCompatibleImage(int width, int height, int transparency) {

        BufferedImage image = getGraphicsConfiguration().createCompatibleImage(width, height, transparency);
        image.coerceData(true);
        return image;

    }

    public static BufferedImage generateShadow(BufferedImage imgSource, int size, Color color, float alpha) {

        int imgWidth = imgSource.getWidth() + (size * 2);
        int imgHeight = imgSource.getHeight() + (size * 2);

        BufferedImage imgMask = createCompatibleImage(imgWidth, imgHeight);
        Graphics2D g2 = imgMask.createGraphics();
        applyQualityProperties(g2);

        int x = Math.round((imgWidth - imgSource.getWidth()) / 2f);
        int y = Math.round((imgHeight - imgSource.getHeight()) / 2f);
//            g2.drawImage(imgSource, x, y, null);
        g2.drawImage(imgSource, 0, 0, null);
        g2.dispose();

        // ---- Blur here ---

        BufferedImage imgShadow = generateBlur(imgMask, size, color, alpha);

        return imgShadow;

    }

    public static BufferedImage generateBlur(BufferedImage imgSource, int size, Color color, float alpha) {

        GaussianFilter filter = new GaussianFilter(size);

        int imgWidth = imgSource.getWidth();
        int imgHeight = imgSource.getHeight();

        BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);
        Graphics2D g2d = imgBlur.createGraphics();
        applyQualityProperties(g2d);

        g2d.drawImage(imgSource, 0, 0, null);
        g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));
        g2d.setColor(color);

        g2d.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());
        g2d.dispose();

        imgBlur = filter.filter(imgBlur, null);

        return imgBlur;

    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-10-17T03:09:02.023

简单的阴影，你可以工作。您可以看到在这些 JPanel 上实现。

![](../Images/629006152718ee5dae33607db96127bb.png)

```
public class DropShadowPanel extends JPanel {

    private static final long serialVersionUID = 1L;

    public int pixels;

    public DropShadowPanel(int pix) {
        this.pixels = pix;
        Border border = BorderFactory.createEmptyBorder(pixels, pixels, pixels, pixels);
        this.setBorder(BorderFactory.createCompoundBorder(this.getBorder(), border));
        this.setLayout(new BorderLayout());
    }

    @Override
    protected void paintComponent(Graphics g) {
        int shade = 0;
        int topOpacity = 80;
        for (int i = 0; i < pixels; i++) {
            g.setColor(new Color(shade, shade, shade, ((topOpacity / pixels) * i)));
            g.drawRect(i, i, this.getWidth() - ((i * 2) + 1), this.getHeight() - ((i * 2) + 1));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-13T20:34:25.663

你的意思是这样的：

![在此处输入图像描述](../Images/1da7006843ebe7a615b11b209e2f9925.png)

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.RenderingHints;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class ShadowTest {

    private JFrame frame;

    public ShadowTest() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ShadowTest();
            }
        });
    }

    private void initComponents() {
        frame = new JFrame();
        frame.setTitle("Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//app exited when frame closes
        frame.setResizable(false);
        frame.setLayout(new GridBagLayout());
        GridBagConstraints gc = new GridBagConstraints();
        gc.fill = GridBagConstraints.HORIZONTAL;
        gc.insets = new Insets(10, 10, 10, 10);
        frame.add(new RoundedPanel(), gc);

        //pack frame (size components to preferred size)
        frame.pack();
        frame.setVisible(true);//make frame visible
    }
}

class RoundedPanel extends JPanel {

    /**
     * Stroke size. it is recommended to set it to 1 for better view
     */
    protected int strokeSize = 1;
    /**
     * Color of shadow
     */
    protected Color shadowColor = Color.black;
    /**
     * Sets if it drops shadow
     */
    protected boolean shady = true;
    /**
     * Sets if it has an High Quality view
     */
    protected boolean highQuality = true;
    /**
     * Double values for Horizontal and Vertical radius of corner arcs
     */
    protected Dimension arcs = new Dimension(0, 0);
    //protected Dimension arcs = new Dimension(20, 20);//creates curved borders and panel
    /**
     * Distance between shadow border and opaque panel border
     */
    protected int shadowGap = 10;
    /**
     * The offset of shadow.
     */
    protected int shadowOffset = 4;
    /**
     * The transparency value of shadow. ( 0 - 255)
     */
    protected int shadowAlpha = 150;
    int width = 300, height = 300;

    public RoundedPanel() {
        super();
        setOpaque(false);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Color shadowColorA = new Color(shadowColor.getRed(),
                shadowColor.getGreen(), shadowColor.getBlue(), shadowAlpha);
        Graphics2D graphics = (Graphics2D) g;

        //Sets antialiasing if HQ.
        if (highQuality) {
            graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                    RenderingHints.VALUE_ANTIALIAS_ON);
        }

        //Draws shadow borders if any.
        if (shady) {
            graphics.setColor(shadowColorA);
            graphics.fillRoundRect(
                    shadowOffset,// X position
                    shadowOffset,// Y position
                    width - strokeSize - shadowOffset, // width
                    height - strokeSize - shadowOffset, // height
                    arcs.width, arcs.height);// arc Dimension
        } else {
            shadowGap = 1;
        }

        //Draws the rounded opaque panel with borders.
        graphics.setColor(getBackground());
        graphics.fillRoundRect(0, 0, width - shadowGap,
                height - shadowGap, arcs.width, arcs.height);
        graphics.setColor(getForeground());
        graphics.setStroke(new BasicStroke(strokeSize));
        graphics.drawRoundRect(0, 0, width - shadowGap,
                height - shadowGap, arcs.width, arcs.height);

        //Sets strokes to default, is better.
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }
} 
```

**参考：**

*   [圆形边框`JPanel`](http://www.codeproject.com/Articles/114959/Rounded-Border-JPanel-JPanel-graphics-improvements)

# ruby - ruby gem 依赖解析是如何工作的？

> ID：13368104
> 
> 赞同：1
> 
> 时间：2012-11-13T20:19:52.450
> 
> 标签：ruby, gem, dependencies, version

我想知道 gem 如何处理它的依赖解析。

例如，当我想安装 gem foodcritic 时，它在 1.5.0 版本中依赖于 nokogiri。

我解压了 foodcritic-1.6.1.gem，但我在任何地方都找不到字符串“1.5.0”、“rubygems.org”或任何可以保存版本信息的东西。

那么“gem”是如何知道 foodcritic 需要 nokogiri-1.5.0 的呢？

我问这个是因为我想手动更改该依赖项。谢谢

编辑：foodcritic-1.6.1 不包含 gemfile 或 gemspec 文件。您可以在[http://rubygems.org/gems/foodcritic下找到它](http://rubygems.org/gems/foodcritic)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:53:49.520

它在gemspec中。见[https://github.com/acrmp/foodcritic/blob/master/foodcritic.gemspec](https://github.com/acrmp/foodcritic/blob/master/foodcritic.gemspec)

```
...
s.add_dependency('nokogiri', '= 1.5.0')
... 
```

编辑...它在gem文件中...如果您提取它，您将看到metadata.gz。其中包含 gemspec 信息...\

```
$ ll
total 56
-rw-r--r--@ 1 philip  staff  28160 Nov 13 12:54 foodcritic-1.6.1.gem
philip@Philips-MacBook-Pro:~/Downloads
$ file foodcritic-1.6.1.gem 
foodcritic-1.6.1.gem: POSIX tar archive
philip@Philips-MacBook-Pro:~/Downloads
$ tar xvf foodcritic-1.6.1.gem 
x data.tar.gz
x metadata.gz
philip@Philips-MacBook-Pro:~/Downloads
$ zmore metadata.gz 
------> metadata.gz <------
--- !ruby/object:Gem::Specification
name: foodcritic
version: !ruby/object:Gem::Version
  version: 1.6.1
  prerelease: 
platform: ruby
authors:
- Andrew Crump
autorequire: 
bindir: bin
cert_chain: []
date: 2012-08-30 00:00:00.000000000 Z
dependencies:
- !ruby/object:Gem::Dependency
  name: gherkin
  requirement: !ruby/object:Gem::Requirement
    none: false
    requirements:
    - - ~>
      - !ruby/object:Gem::Version
        version: 2.11.1
  type: :runtime
  prerelease: false
  version_requirements: !ruby/object:Gem::Requirement
    none: false
    requirements:
    - - ~>
      - !ruby/object:Gem::Version
        version: 2.11.1
- !ruby/object:Gem::Dependency
  name: gist
  requirement: !ruby/object:Gem::Requirement
    none: false
    requirements:
    - - ~>
      - !ruby/object:Gem::Version
        version: 3.1.0
  type: :runtime
  prerelease: false
  version_requirements: !ruby/object:Gem::Requirement
    none: false
    requirements:
    - - ~>
      - !ruby/object:Gem::Version
        version: 3.1.0
- !ruby/object:Gem::Dependency
  name: nokogiri
  requirement: !ruby/object:Gem::Requirement
    none: false
    requirements:
philip@Philips-MacBook-Pro:~/Downloads 
```

# c# - 以 CSV 格式导出到 XL 时用逗号（，）分隔字符串 c#

> ID：13368115
> 
> 赞同：2
> 
> 时间：2012-11-13T20:21:00.997
> 
> 标签：c#, export-to-csv, string.format

我是 C# 的初学者，我正在将一些数据以 CSV 格式导出到 XL 表。我的数据包含一个全名列，其中数据类似于（John，Delores “Sutton”）。当我将其导出到 XL 时，它会将数据分成两列（或选项卡），例如 Tab1：John 和 Tab2：Delores “Sutton”，因为逗号（，）。我想

如果我使用下面的代码

```
string F1 = base.GetColumnText(column, columnValue); //ex: John, Delores \"Sutton\""
string F2 = string.Format("\"{0}\"", F1); //ex: "\"John, Delores\"Sutton\"\""
streamWriter.Write(F2); //ex output in XL is: John, Delores Sutton"" 
```

XL 中的输出为：

> 约翰·德洛雷斯·萨顿""

但我希望它为：

> 约翰·德洛雷斯“萨顿”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:33:08.323

您需要使用双双引号来表示 CSV 中的双引号，*并且*所有内容都必须用双引号引起来，因此您的文本输出将如下所示：

```
"John, Delores ""Sutton""" 
```

因此，您需要在文本上进行查找和替换以将双引号加倍...

```
F1 = F1.Replace("\"", "\"\""); 
```

然后做你的格式用引号包围文本。

```
var F2 = string.Format("\"{0}\""), F1); 
```

精明？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:38:50.103

由于逗号用于分隔字段，因此带有逗号的值被解释为两个字段。此类字段必须用引号引起来。因此，包含引号的字段也必须用引号括起来，并且字段中的每个引号都必须加倍。

创建 CSV 文件有许多规则。我编写了一个非常完整的类来读写 CSV 文件，并在我的文章[Read and Writing CSV Files in C#](http://www.blackbeltcoder.com/Articles/files/reading-and-writing-csv-files-in-c)中介绍了代码。你可能想检查一下。

# database - Grails get() 生成不完整的 SQL

> ID：13368117
> 
> 赞同：1
> 
> 时间：2012-11-13T20:21:05.983
> 
> 标签：database, grails, grails-orm

我正在将应用程序从 Grails 1.3.6 升级到 2.1.1。碰到了什么似乎很奇怪的问题。

我有一个名为 SECTION 的表。这个电话：

```
def testSection = Section.get(94725) 
```

在 Grails 1.3.6 中生成此 SQL：

```
select
    section0_.ID as ID42_0_,
    section0_.concept_tag_uri as concept2_42_0_,
    section0_.INDEX_ID as INDEX3_42_0_,
    section0_.LIVE_IND as LIVE4_42_0_,
    section0_.NAME as NAME42_0_,
    section0_.PARENT_ID as PARENT6_42_0_,
    section0_.ASST_INDEX_ASSET_ID as ASST7_42_0_,
    section0_.ORDER_NO as ORDER8_42_0_,
    section0_.SITE_ID as SITE9_42_0_,
    section0_.TYPE_ID as TYPE10_42_0_,

    (SELECT
        uk_sec.id 
    FROM
        section uk_sec,
        site uk_site 
    WHERE
        uk_sec.index_id = section0_.index_id 
        AND uk_sec.site_id = uk_site.siteid 
        AND uk_site.audienceid  = 1) as formula1_0_ 
from
    SECTION section0_ 
where
    section0_.ID=? 
```

但是 2.1.1 中的这个 SQL：

```
select 
    section0_.ID as ID45_0_, 
    section0_.concept_tag_uri as concept2_45_0_, 
    section0_.INDEX_ID as INDEX3_45_0_, 
    section0_.LIVE_IND as LIVE4_45_0_, 
    section0_.NAME as NAME45_0_, 
    section0_.PARENT_ID as PARENT6_45_0_, 
    section0_.ASST_INDEX_ASSET_ID as ASST7_45_0_, 
    section0_.ORDER_NO as ORDER8_45_0_, 
    section0_.SITE_ID as SITE9_45_0_, 

    (SELECT 
        uk_sec.id 
    FROM section uk_sec, 
        site uk_site 
    WHERE uk_sec.index_id = section0_.index_id 
        AND uk_sec.site_id = uk_site.siteid 
        AND uk_site.audienceid  = 1) as formula1_0_ 
from 
    SECTION section0_ where section0_.ID=? 
```

看起来很相似，但是 2.1.1 版本中缺少这部分：

```
section0_.TYPE_ID as TYPE10_42_0_, 
```

这是类中的映射：

```
...
String sectionType
...
static mapping = 
{
    table 'SECTION'
    version false
    id generator:'assigned'

    columns {
                    ...
        sectionType  column: 'TYPE_ID'
                    ...
    }
} 
```

有问题的 DB 字段是：TYPE_ID CHAR(1)，但由于 get() 生成了 SQL，我假设它与实际的 DB 模式或列 (？) 无关。

它是选择字段列表中的最后一个元素这一事实让我认为它在某种程度上是相关的，但我不知道如何更改它，或者这样做只会从语句中“删除”另一个字段。

有人见过这样的吗？

干杯，太空机器人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:28:01.330

也许有点草率地认为这可能是一个错误。

Grails2.1.1 需要覆盖setter 的参数类型，在1.x 中更宽容。

```
public void setType(type) { ... }  // works in 1.3.6, breaks 2.1.1

public void setType(String type) { ... }  // ok in 2.1.1 
```

# machine-learning - 使用朴素 Bayse 进行文档分类

> ID：13368118
> 
> 赞同：2
> 
> 时间：2012-11-13T20:21:08.017
> 
> 标签：machine-learning, artificial-intelligence

我对文档分类中使用的特定 Naive Bayse 算法有疑问。以下是我的理解：

1.  为每个已知分类构建训练集中每个单词的一些概率
2.  给定一个文档，我们删除它包含的所有单词
3.  将分类中出现的单词的概率相乘
4.  对每个分类执行 (3)
5.  比较（4）的结果，选择后验最高的分类

我感到困惑的是当我们计算给定训练集的每个单词的概率时的部分。例如对于一个单词“banana”，它出现在分类 A 的 100 个文档中，总共有 200 个文档在 A 中，总共有 1000 个词出现在 A 中。要得到“香蕉”出现在分类 A 下的概率，我做使用 100/200=0.5 还是 100/1000=0.1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:26:17.277

我相信如果您计算单词出现的文档数量，而不是单词出现的总次数，您的模型会更准确地分类。换句话说

对“提果”进行分类：

“我喜欢香蕉。”

应称重不超过或少于

“香蕉！香蕉！香蕉！我喜欢它们。”

所以你的问题的答案是 100/200 = 0.5。

Wikipedia 上对 Document Classification 的描述也支持我的结论

> 那么给定文档 D 包含所有单词 W 的概率，给定类别 C，为

[http://en.wikipedia.org/wiki/Naive_Bayes_classifier](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)

换句话说，文档分类算法 Wikipedia 描述了测试给定文档包含多少分类词列表。

顺便说一句，更高级的分类算法将检查 N 个单词的序列，而不仅仅是单个单词，其中 N 可以根据您愿意用于计算的 CPU 资源量来设置。

**更新**

我的直接经验是基于简短的文件。我想强调@BenAllison 在评论中指出的研究表明我的答案对于较长的文档无效。具体来说

> 一个弱点是，通过仅考虑术语的存在或不存在，BIM 忽略了术语频率中固有的信息。例如，在所有条件相同的情况下，我们期望如果一个单词出现 1 次是一个文档属于某个类的好线索，那么 5 次出现应该更具预测性。
> 
> 一个相关的问题涉及文档长度。随着文档变长，使用的不同单词的数量以及因此在 BIM 中等于 1 的 x(j) 值的数量通常会增加。

[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1529](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1529)

# vb.net - 在线更新实现，vb.net

> ID：13368121
> 
> 赞同：0
> 
> 时间：2012-11-13T20:21:30.920
> 
> 标签：vb.net, auto-update

我有一个 Windows 应用程序，我也想添加“在线更新”功能。我打算执行如下：

*   服务器上的目录包含所有应用程序文件的最新版本
*   服务器创建一个文本文件，其中包含所有应用程序文件及其校验和的列表
*   更新程序应用程序读取服务器上的文本文件，检查该文件是否也存在于客户端上。如果文件不存在，则下载，如果存在，则比较校验和...如果校验和不匹配，则下载文件

我只是想让这个尽可能简单，对这个设计有什么想法或建议吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:47:54.083

使用MSDN [http://msdn.microsoft.com/en-us/library/ms404263.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1中的](http://msdn.microsoft.com/en-us/library/ms404263.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)**ClickOnce**部署 API 以编程方式查看应用程序更新有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:38:57.157

我会检查主应用程序中的版本比较版本。如果找到新版本，我会调用一个参数化的 .exe 来杀死主应用程序，执行可执行文件/程序集更新并再次启动程序。

我还将通过 XML 公开更新信息，以便您可以使用 XmlDocument 类轻松解析它，或者您甚至可以像我们在企业中使用 CRM 应用程序一样开发用于更新的 Web 服务。

# c++ - 定义可以接受不同参数的函数

> ID：13368125
> 
> 赞同：0
> 
> 时间：2012-11-13T20:21:39.313
> 
> 标签：c++

我正在编写一个程序，该程序对由三个整数成员组成的结构 distanceType 执行两个操作：英尺、码和英里。函数 convertYards 以码为单位的距离大于或等于 1760（因为有 1760 码以英里为单位）并将其转换为 x 英里、y 码和 z 英尺（即 distanceType）。我在使用函数参数时遇到问题。convertYards 接受一个整数值并返回一个距离类型。问题是我不确定如何定义函数。由于它可以接受距离1或距离2（整数值），代码的一小部分如下，带有“???”的区域 是我感到困惑的。

```
struct distanceType
{
  int miles;
  int yards;
  int feet;
}

distanceType convertYards(int ???)  //Define convertYards 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:38:51.553

因此，类似以下代码的内容尚未编译，因此可能需要进行一些更改，但应该抓住本质。

```
struct distanceType
{
  int miles;
  int yards;
  int feet;
}

distanceType convertYards(int nYards)
{
    distanceType distance;

    distance.miles = nYards / 1760;
    distance.yards = nYards - distance.miles * 1760;
    distance.feet = 0;   // since value is integer number of yards, feet is always zero
    return distance;
} 
```

此函数将按如下方式使用：

```
int main ()
{
   distanceType dt1, dt2;
   int          y1 = 3500, y2 = 5700;

   dt1 = convertYards (y1);
   dt2 = convertYards (y2);

   printf (" %d yards = %d miles, %d yards, and %d feet", y1, dt1.miles, dt1.yards, dt1.feet);
   printf (" %d yards = %d miles, %d yards, and %d feet", y2, dt2.miles, dt2.yards, dt2.feet);
   return 0;
} 
```

# assembly - 如何区分内存（堆）和堆栈地址

> ID：13368128
> 
> 赞同：3
> 
> 时间：2012-11-13T20:21:51.867
> 
> 标签：assembly, heap-memory, stack-memory, addressing

我的问题是：当我有这样的事情时：

```
lea rax, rbp - 8 
```

// 也许这是我堆栈上的一个 int，因为我的代码中有一个本地“int”变量。当我这样做时，CPU如何知道数据在哪里：

```
mov qword [rax], 14 
```

我的意思是，它只是一个地址......如果我在 保留内存`2^64 - x`怎么办？

你分配的内存不能有这种地址吗？

或者如果堆栈增长到与您分配的内存具有相同的地址怎么办？

这会发生吗？

汇编器不知道 rax 中的数字是多少，因此它不能是 MOVstack 和 MOVheap，就像近 JMP 和远 JMP 一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:29:13.467

> 当我执行此操作时，CPU 如何知道数据在哪里 mov qword [rax], 14

为什么 CPU 需要知道数据是在堆栈上还是在堆上？两者都在同一个地方，RAM。

> 我的意思是，它只是一个地址......如果我在 2^64 保留内存怎么办

如果地址大于您的地址空间，您将无法在那里保留内存。

> 或者如果堆栈增长到与您分配的内存具有相同的地址怎么办？这会发生吗？

是的，它发生了，它被称为 stackoverflow :) 并且很可能会导致分段错误。

> 汇编器不知道 rax 中的数字是多少，所以它不能是 MOVstack 和 MOVheap

据我所知，*没有*单独的指令来访问堆栈或堆，就像我说的，堆栈和堆都存在于 RAM 中。CPU 关心的只是写入或读取的地址，然而，在某些架构上，那些没有内存映射 I/O 的架构有访问 I/O 寄存器的特殊指令，大多数架构看到 I/ O 只是另一个内存地址。

你应该读一本关于计算机体系结构的书，我推荐这本[计算机组织与设计，](https://rads.stackoverflow.com/amzn/click/com/0123747503)帕特森的第 4 版。

# php - 带有 PDO 的基于 PHP 类的用户系统 - 在非对象上调用成员函数 prepare()

> ID：13368129
> 
> 赞同：3
> 
> 时间：2012-11-13T20:21:54.477
> 
> 标签：php, class, pdo

我做了相当多的研究、故障排除和搜索，试图解决我的问题，但没有运气。所以这里是错误...

在非对象上调用成员函数 prepare()

生成此错误的代码在我的用户身份验证类中，如下所示...

```
$this->dbManager->db->prepare('INSERT INTO users (email, password, user_salt, is_admin) VALUES (:email, :password, :user_salt, :is_admin)'); 
```

dbManager 来自 $db ，我已将其传递到我的类的 __construct 中，如下所示...

```
public function __construct($db) {
        $this->siteKey = 'notImportant';
        $this->dbManager = $db;
    } 
```

$db 源自我的 sql 类，我在 index.php 所需的一个“引导”php 文件中需要它。

bootstrap.php 代码如下...

```
<?php

// Load firePHP library
//require_once('FirePHPCore/FirePHP.class.php');
ob_start();
//$firephp = FirePHP::getInstance(true);

// Load all the classes/libs...
require_once 'classes/sql.class.php';

require_once 'classes/auth.class.php';
$db = sql::getInstance();
session_start();
$auth = new Auth($db);

require_once 'lib/handlepost.php'; 
```

最后，我的 sql.class.php 代码如下...

```
class sql {
    public static $db = false;
    private $database_host = '';
    private $database_user = '';
    private $database_pass = '';
    private $database_db = '';

    private function __construct() {
        if (self::$db === false) {
            $this -> connect();
        }
        return self::$db;
    }

    public static function getInstance() {
        if (!self::$db) {
            self::$db = new sql();
        }

        return self::$db;
    } 

    private function connect() {
        $dsn = $this -> database_type . ":dbname=" . $this -> database_db . ";host=" . $this -> database_host;
        try {
            self::$db = new PDO($dsn, $this -> database_user, $this -> database_pass, array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''));
            self::$db -> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            //print_r($e->errorInfo);
            //echo 'Connection failed: ' . $e->getMessage();
        }
    } // End Connect

} 
```

我是使用 PDO 的新手，这让我开始有些困惑......

任何帮助解释我做错了什么都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:24:34.427

您看到的错误意味着这`$this->dbManager->db`不是一个对象。因此，尝试在其上调用方法 ( `prepare`) 会给您一个错误。

编辑：对不起，我现在看到你的错误。

`Sql::$db`是一个静态成员，但您正在访问它，就好像它是一个属性一样。你不能那样做。我建议将类上的静态成员更改`sql`为常规属性。例如：`static`从`public static $db = false;`. 将所有替换`self::$db`为`$this->db`并将`getInstance`方法重写为：

```
public static function getInstance() {
  if (!self::$instance) {
    self::$instance = new self();
  }
  return self::$instance;
} 
```

因此，基本上，您的错误与 PDO 无关，而是与静态与成员属性有关。

您可以尝试一起跳过`Sql`课程：

```
class ConnectionManager {
  private static $db = false;
  private static $database_host = '';
  private static $database_user = '';
  private static $database_pass = '';
  private static $database_db = '';

  public static function getConnection() {
    if (!self::$db) {
      self::connect();
    }
    return self::$db;
  } 

  private static function connect() {
    $dsn = self::database_type . ":dbname=" . self::database_db . ";host=" . self::database_host;
    try {
      self::$db = new PDO($dsn, self::database_user, self::database_pass, array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''));
      self::$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    } catch (PDOException $e) {
      //print_r($e->errorInfo);
      //echo 'Connection failed: ' . $e->getMessage();
    }
  }
} 
```

...

```
class Auth {
  public function __construct($db) {
    $this->siteKey = 'notImportant';
    $this->db = $db;
  }

  public function foo() {
    $stmt = $this->db->prepare('INSERT INTO users (email, password, user_salt, is_admin) VALUES (:email, :password, :user_salt, :is_admin)');
    $stmt->execute(...);
  }
} 
```

...

```
$db = ConnectionManager::getConnection();
session_start();
$auth = new Auth($db); // <- Here $db is an actual instance of PDO 
```

# image - 计算图像中圆心的坐标

> ID：13368133
> 
> 赞同：5
> 
> 时间：2012-11-13T20:22:23.790
> 
> 标签：image, algorithm, matlab

![在此处输入图像描述](../Images/6a888be368250c947e1ac7da1201eaff.png)

假设我有这张图片，我想在 (X , Y) 中获得每个圆的中心。

MatLab中是否有这样做的算法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T20:55:18.657

只需调用一次[regionprops](http://www.mathworks.nl/help/images/ref/regionprops.html)就可以做到这一点：

```
img = imread('KxJEJ.jpg');                      % read the image
imgbw = ~im2bw(img,graythresh(img));            % convert to grayscale

stats  = regionprops(bwlabel(imgbw), 'centroid','area'); % call regionprops to find centroid and area of all connected objects
area = [stats.Area];                            % extract area
centre = cat(1,stats.Centroid);                 % extract centroids

centre = centre(area>10,:);                     % filter out dust specks in the image 
```

现在`centre`包含一个`Nx2`数组：第一列是 x 位置，第二列是中心的 y 位置：

```
centre =

   289.82       451.73
   661.41       461.21
   1000.8       478.01
   1346.7       482.98 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:25:35.863

这是使用互相关与人工圆作为过滤器的结果。结果是左上角的 [row, column]：

```
>> disp(centers)
         483        1347
         460         662
         478        1001
         451         290 
```

没有详细的评论，请询问是否需要。

```
im = rgb2gray(im2double(imread('D:/temp/circles.jpg')));
r = 117; % define radius of circles
thres_factor = 0.9; % see usage
%%
[x, y] = meshgrid(-r : r);
f = sqrt(x .^ 2 + y .^ 2) >= r;
%%
im = im - mean(im(:));
im = im / std(im(:));
f = f - mean(f(:));
f = f / std(f(:)) / numel(f);
imf_orig = imfilter(im, f, 'replicate');
%% search local maximas
imf = imf_orig;
[n_idx, m_idx] = meshgrid(1 : size(imf, 2), 1 : size(imf, 1));
threshold = thres_factor * max(imf(:));
centers = []; % this is the result
while true
    if max(imf(:)) < threshold
        break;
    end
    [m, n] = find(imf == max(imf(:)), 1, 'first');
    centers = cat(1, centers, [m, n]);
    % now set this area to NaN to skip it in the next iteration
    idx_nan = sqrt((n_idx - n) .^ 2 + (m_idx - m) .^ 2) <= r;
    imf(idx_nan) = nan;
end 
```

![在此处输入图像描述](../Images/a75a416006d530232e9513cd03074faf.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:25:32.087

**我记得很多**年前在大学里这样做过！

我们所做的是应用阈值并使所有内容变成黑白。然后，我们将白色区域（非圆形）弄脏，使其散布到圆形上。

当它们开始消失时，我们有了坐标。

您也可以在圆周上选择两个点，找到它们之间直线的确切中间，然后通过该点画一条垂直线。如果新线**的**中间是圆的中心。

# .net - Mono 中的代码协定

> ID：13368134
> 
> 赞同：6
> 
> 时间：2012-11-13T20:22:34.180
> 
> 标签：.net, mono, monodevelop, code-contracts

以下代码：

```
Contract.Requires<ArgumentException>(command != null, Resources.Messages.CommandNotSpecified); 
```

来电

```
Contract.AssertMustUseRewriter (ContractFailureKind kind, System.String message) 
```

如果您使用的是 Visual Studio，这似乎是由于未将代码合同配置为使用运行时合同检查造成的。

文章@ [http://devjourney.com/blog/code-contracts-part-2-preconditions/](http://devjourney.com/blog/code-contracts-part-2-preconditions/)暗示在没有配置运行时检查的情况下生成的代码是：

```
public static void Requires<TException>(bool condition)
where TException: Exception
{
    AssertMustUseRewriter(ContractFailureKind.Precondition, "Requires<TException>");
} 
```

有人知道在 MonoDevelop 中该做什么以使合同按预期工作吗？

我得到的确切例外是：

```
2012-11-13 23:33:24.815 StickX[339:c07] mvx: Diagnostic:  34.46 Exception masked NotImplementedException: The requested feature is not implemented.
      at System.Environment.FailFast (System.String message) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Environment.cs:821 
  at System.Diagnostics.Contracts.Contract.AssertMustUseRewriter (ContractFailureKind kind, System.String message) [0x00011] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Diagnostics.Contracts/Contract.cs:83 
  at System.Diagnostics.Contracts.Contract.Requires[ArgumentException] (Boolean condition, System.String userMessage) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Diagnostics.Contracts/Contract.cs:271 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:32:45.640

[它没有实现](https://github.com/mono/mono/blob/b936c531018a354c92103cc9b7cf401231063725/mcs/class/corlib/System/Environment.cs#L921)，所以唯一能让这个工作的就是你编写实现。Mono 是一个开源项目，总是乐于接受新的贡献。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-06T22:17:36.880

供您参考，Microsoft CodeContracts 现在是开源的：

[https://github.com/CodeContractsDotNet/CodeContracts](https://github.com/CodeContractsDotNet/CodeContracts)

# emacs - 如何在 elisp 程序中调用函数，并遵循交互路径？

> ID：13368135
> 
> 赞同：1
> 
> 时间：2012-11-13T20:22:34.693
> 
> 标签：emacs, elisp, ispell

如果我`ispell-check-version`以交互方式（通过`M-x`）调用它会得到这个答案：

> @(#) 国际 Ispell 版本 3.3.02 2005 年 6 月 12 日，ispell.el 3.6 - 2003 年 1 月 7 日

美好的。现在假设我想从程序中调用它。我希望得到相同的结果。但是当不以交互方式调用时，该函数的行为会有所不同。它的文档说明了这一点，而且确实如此。让我们在`*scratch*`缓冲区中尝试（用 评估`C-u C-x C-e`）：

```
(ispell-check-version) 
```

返回我：“/opt/local/lib”！不是预期的.. 我怎样才能让函数表现得像我“以交互方式”调用它时那样“以编程方式”调用它并返回相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:24:45.753

`call-interactively`就是你要找的。

```
(call-interactively 'ispell-check-version) 
```

# jquery - 在没有事件处理程序的情况下使用 document.on

> ID：13368139
> 
> 赞同：2
> 
> 时间：2012-11-13T20:23:01.553
> 
> 标签：jquery

我现在已经多次遇到这种情况，我希望使用 document.on() 来操作元素，但无法弄清楚如何在没有事件的情况下使用 .on()。

我经常使用 ajax 将元素注入 DOM，并且经常需要使用 document.on() 来绑定这些注入的元素。当我希望选择一个元素并获取它的信息时，这非常有效。

例如，要通过点击事件附加到选择器，可以这样写：

```
$(document).on('click', '.mledit', function(event) {
    alert($(this).val());
} 
```

但是，如果我希望将焦点设置在该元素上怎么办？我该怎么做？我努力了：

```
$(document).on('focus', '.mledit'); 
```

我不知道还能尝试什么。

我需要这样做的原因是因为目前（我以前来过这里），标准`$('.mledit').focus();`不起作用。其他一切似乎都很好，但那一条指令却不是。所以，我想知道在这种情况下是否可以使用 document.on() 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:27:52.700

[.on](http://api.jquery.com/on/)用于绑定事件，您正在寻找的是一种在元素上[触发事件的方法。](http://api.jquery.com/trigger/)

例如

```
$('.mledit').trigger('focus'); 
```

同时，jQuery 也有一些方便/快捷的函数，它们在底层将委托给 .on 或 .trigger ，这取决于它们的调用方式。

例如你也可以使用[focus](http://api.jquery.com/focus/)方法来触发焦点

```
$('.mledit').focus() 
```

在引擎盖下它实际上只是委托给`trigger`方法，但是如果你要传入一个函数，它会将该函数绑定到传入的`selecter`.

刚看到你的编辑。

我不确定为什么你的焦点事件在使用时不起作用，`$('.mledit').focus()`但我怀疑这是因为你匹配的元素不止一个，你只能关注一个元素。解释一下，当你使用 jQuery 选择器时，你得到的是一个 jQuery 对象，当你在这个返回的 jQuery 对象上调用一个方法时，你实际上是在所有匹配的元素上调用它。

作为访问匹配元素数组的第一个元素的快捷方式，您会经常看到

```
$('#someSelecter')[0] 
```

因此，在您的情况下，仅在一个（和第一个匹配的）元素上显式触发焦点事件

您可以使用

```
$($('.mledit')[0]).focus() r 
```

双重包装的原因是因为返回一个没有 jQuery 方法`[0]`的常规元素（包装创建一个 jQuery 对象）。`DOM`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:25:02.940

这个：

```
$('.mledit')[0].focus(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:24:42.430

当你想设置焦点时.. 就做 - 虽然如果你有多个，你必须使用 .eq() 或 [] 指定要设置焦点的一个

```
$('.mledit').focus() 
```

jQuery 还提供了[trigger()](http://api.jquery.com/trigger/)方法让你传入一个事件来触发

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T20:27:08.433

每当您需要在匹配“选择器”的元素上触发事件“foo”时，请使用以下语法：

```
$('selector').trigger("foo"); 
```

在你的情况下：

```
$('.mledit').trigger("focus"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T20:25:51.170

您将使用触发器而不是 on。

```
$(SELECTOR).trigger(EVENT_TYPE); 
```

# ios - iCarousel 按钮演示“UIImage”可能不响应“objectAtIndex”

> ID：13368140
> 
> 赞同：0
> 
> 时间：2012-11-13T20:23:03.720
> 
> 标签：ios, button, warnings, icarousel

有人能帮助我吗？我正在尝试制作一个按钮轮播 - 每个按钮都有不同的背景图像，但我没有做到。

最后它起作用了，但我不知道，为什么我总是收到警告（在 [image objectAtIndex:0], [image objectAtIndex:1], [image objectAtIndex:2] 上）：

**“UIImage”可能不会响应“objectAtIndex”。**

非常感谢！

我的 iCarouselExampleViewController.m 源代码：

```
#import "iCarouselExampleViewController.h"

@implementation iCarouselExampleViewController

@synthesize carousel;

- (void)dealloc
{
    carousel.delegate = nil;
    carousel.dataSource = nil;
    [carousel release];
    [super dealloc];
}

#pragma mark -
#pragma mark View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    //configure carousel
    carousel.type = iCarouselTypeCoverFlow2;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.carousel = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

#pragma mark -
#pragma mark iCarousel methods

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    //generate 100 buttons
   //normally we'd use a backing array
   //as shown in the basic iOS example
   //but for this example we haven't bothered
    return 5;
}

- (NSUInteger)numberOfVisibleItemsInCarousel:(iCarousel *)carousel
{
    //limit the number of items views loaded concurrently (for performance reasons)
    return 5;
}

 - (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index    reusingView:(UIView *)view
{ 
    UIButton *button = (UIButton *)view;
    if (button == nil)
    {

      UIImage *image=[NSArray arrayWithObjects:
                              [UIImage imageNamed:@"image1.png"],
                              [UIImage imageNamed:@"image2.png"],
                              [UIImage imageNamed:@"image3.png"],nil];

        button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(0, 0, 200.0f, 200.0f);
        [button setTitle:[NSString stringWithFormat:@"%i", index]  forState:UIControlStateNormal];
        [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];

        switch (index) {
            case 0:
            {
                [button setImage:(UIImage*)[image objectAtIndex:0] forState:UIControlStateNormal];
            }
                break;
            case 1:
            {
                [button setImage:(UIImage*)[image objectAtIndex:1] forState:UIControlStateNormal];
                break;
            }
            case 2:
            {
                [button setImage:(UIImage*)[image objectAtIndex:2] forState:UIControlStateNormal];
            }

                break;
        }
        }

        [button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];

    return button;
}

#pragma mark -
#pragma mark Button tap event

- (void)buttonTapped:(UIButton *)sender
{
    //get item index for button
    NSInteger index = [carousel indexOfItemViewOrSubview:sender];

    [[[[UIAlertView alloc] initWithTitle:@"Button Tapped"
                                 message:[NSString stringWithFormat:@"You tapped button number %i", index]
                                delegate:nil
                       cancelButtonTitle:@"OK"
                       otherButtonTitles:nil] autorelease] show];
}

@end 
```

@结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:28:44.570

因为 UIImage 不是 NSArray 但您只将其声明为 UIImage 因此没有崩溃

```
UIImage *image=[NSArray arrayWithObjects:
                          [UIImage imageNamed:@"image1.png"],
                          [UIImage imageNamed:@"image2.png"],
                          [UIImage imageNamed:@"image3.png"],nil]; 
```

更改它以便声明一个数组

```
NSArray *image=[NSArray arrayWithObjects:... 
```

在此期间，将图像重命名为图像并使用新语法

```
NSArray *images = @[img1,img2,img3]; 
```

# javascript - 事件多次触发（Parse.com）

> ID：13368149
> 
> 赞同：1
> 
> 时间：2012-11-13T20:23:39.413
> 
> 标签：javascript, backbone.js, dom-events, backbone-views, backbone-events

我正在使用 JavaScript 框架在 Parse 中编写一个应用程序。在我看来，我有一个与“新页面”类的链接。在 JS 代码中，我有：

```
 events: {
        "click .new-page" : "createPage",
    } 
```

createPage 是：

```
 createReel: function() {
        var self = this;
        // Get current pagelist
        var pages= new PageList;
        pages.query = new Parse.Query(Page);
        pages.query.equalTo("owner", Parse.User.current());
        pages.query.ascending("order");
        pages.fetch({
            success: function(pagelist) {
                var newPage = new Page;
                newPage .save({
                    success: function(newpage) {
                         // Redirect to page edit
                         new PageEditView();
                    }
                });
            }
        });
    } 
```

第一次，这工作正常 - 新页面被创建，它进入该页面的编辑模式。但是，如果我随后使用“添加页面”按钮返回视图并再次单击它，我会得到 2 个新页面。如果我再做一次，我得到 4，依此类推。

我假设事件正在“建立”，因此单击按钮的次数越多，触发事件的次数就越多。

我不确定从哪里开始寻找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-11T17:42:13.647

迟到的答案，但我刚刚遇到了类似的问题。

我犯的错误是每次需要时我都会重新创建视图实例。

这不是 Backbone 的工作方式。

视图（通常）创建一次。当他们的模型发生变化时，它们会再次被渲染。

每次用户在此行保存时，您似乎都在实例化您的视图

```
PageEditView(); 
```

那是事件堆积的时候。

启动页面时实例化该视图一次，然后在更新该视图的模型时呈现它。

在本机 bakbone 中，事件处理程序可以监听模型更改。不知何故，它在 Parse 主干版本中不起作用（或者我无法让它工作）。所以现在，我手动执行此操作

```
PageEditView.model = model
PageEditView.render(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:57:56.813

确保在调用新的 PageEditView 之前取消对事件的委托。

# haskell - 我能在多大程度上让 Aeson 承担重任？

> ID：13368150
> 
> 赞同：2
> 
> 时间：2012-11-13T20:23:46.020
> 
> 标签：haskell, jira, aeson

我试图避免为 toJSON 编写定义。这是我遇到的错误：

```
Datatypes.hs:92:10:
    No instance for (aeson-0.6.0.2:Data.Aeson.Types.Class.GToJSON
                       (GHC.Generics.Rep (HashMap Key Project)))
      arising from a use of `aeson-0.6.0.2:Data.Aeson.Types.Class.$gdmtoJSON'
Possible fix:
  add an instance declaration for
  (aeson-0.6.0.2:Data.Aeson.Types.Class.GToJSON
     (GHC.Generics.Rep (HashMap Key Project)))
In the expression:
  (aeson-0.6.0.2:Data.Aeson.Types.Class.$gdmtoJSON)
In an equation for `toJSON':
    toJSON = (aeson-0.6.0.2:Data.Aeson.Types.Class.$gdmtoJSON)
In the instance declaration for `ToJSON (HashMap Key Project)' 
```

我的所有 HashMap`data`声明都出现了类似的错误。

这是相关的代码。让我知道是否缺少信息。

```
{-# LANGUAGE DeriveGeneric #-}  -- for JTask and Fields ToJSON instances:w!
{-# LANGUAGE DeriveDataTypeable #-} -- This may be needed for HashMaps
{-# LANGUAGE FlexibleInstances #-} -- for the HashMap ToJSON instances
{-# LANGUAGE DefaultSignatures #-}

import Prelude
import Data.ByteString
import GHC.Generics (Generic )
import Data.Data 
import Data.Typeable (Typeable) -- fix HashMap ToJSON instances? maybe
import Data.Aeson
import Data.Aeson.Generic  
import Data.Aeson.Types -- (ToJSON,FromJSON)
import Data.HashMap.Strict (HashMap)

data JTask = JTask {fields :: Fields} deriving (Typeable,Data,Generic)
data Fields = Fields { project :: HashMap Key Project
                     , summary :: ByteString
                     , issuetype :: HashMap Name Task
                     , versions :: [HashMap Name Version]
                     , description :: ByteString
                     } deriving (Typeable,Data,Generic)

data Key = Key deriving (Typeable,Data,Generic)
instance Show Key where
   show Key = "key"

data Name = Name deriving (Typeable,Data,Generic)
instance Show Name where
   show Name = "name"

data Task = Task deriving (Typeable,Data,Generic)

type Version = ByteString -- Placeholder type. Probably using Day for realsies.

data Project = BNAP deriving (Typeable,Data,Generic) -- Fill this out as we go 

instance Generic (HashMap Key Project)
instance Data (HashMap Key Project)
--instance GToJSON (HashMap Key Project)

instance Generic (HashMap Name ByteString)
instance Data (HashMap Name ByteString)

instance Generic (HashMap Name Task)
instance Data (HashMap Name Task)
-- JSON instances
instance ToJSON CreateError
instance ToJSON Fields
instance ToJSON JTask 

instance ToJSON Key
instance ToJSON Name
instance ToJSON Task
instance ToJSON Project

instance ToJSON (HashMap Key Project)
instance ToJSON (HashMap Name Task)
instance ToJSON (HashMap Name ByteString)
-- instance ToJSON Version uncomment when we change Version's type. 
```

我无法创建实例，`Data.Aeson.Types.Class.GToJSON`因为`Data.Aeson.Types.Class` 未导出。我有哪些选择？我必须手动写什么？是`deriveJSON`最好的选择吗？

更新：我实施了以下建议。这是代码

```
createObject :: CreateConf -> ResourceT IO Value
createObject (CreateConf iSummary iDesc dd) = do
   let jfields = Fields {project = singleton Key BNAP
                        ,summary = iSummary
                        ,issuetype = singleton Name Task
                        ,versions = [singleton Name (calcVersion dd)]
                        ,description = iDesc
                        }
return $ toJSON (JTask jfields) 
```

第一个实例产生`Object fromList [("key",Array (fromList []))])`

二审结果`Object fromList [("name",Array (fromList []))]`

知道为什么`name`而且`key`是空的吗？

我怎么知道？

使用它会更容易吗`deriveJSON`？

更新：感谢 NathanHowell 的帮助，更重要的问题已经解决，即一元类型的 GToJSON 实例。解决方案是为一元类型创建自己的实例。JSON 对象出现故障，但我不知道这是否重要。如果是这样，那么 Fields 的另一个手动 ToJSON 实例似乎可以解决这个问题。

更新：好的一点上下文。我正在编写一个 JIRA 前端。我之所以提到这一点，是因为将来人们可能会来这里发现以下好消息：JIRA 不关心对象顺序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:50:44.210

Aeson`ToJSON`为`HashMap String a`. 让事情正常工作的最简单方法是通过将`HashMap`键转换为`Strings`. 只需一点样板文件，它就会将`Generic`实例用于其他所有内容。

```
{-# LANGUAGE DeriveGeneric #-}  -- for JTask and Fields ToJSON instances:w!
{-# LANGUAGE FlexibleInstances #-} -- for the HashMap ToJSON instances
{-# LANGUAGE DefaultSignatures #-}

import Prelude
import Data.ByteString
import GHC.Generics (Generic )
import Data.Aeson
import Data.HashMap.Strict (HashMap)
import qualified Data.HashMap.Strict as HashMap

data JTask = JTask {fields :: Fields} deriving (Generic)
data Fields = Fields { project :: HashMap Key Project
                     , summary :: ByteString
                     , issuetype :: HashMap Name Task
                     , versions :: [HashMap Name Version]
                     , description :: ByteString
                     } deriving (Generic)

data Key = Key deriving (Generic)
instance Show Key where
   show Key = "key"

data Name = Name deriving (Generic)
instance Show Name where
   show Name = "name"

data Task = Task deriving (Generic)

type Version = ByteString -- Placeholder type. Probably using Day for realsies.

data Project = BNAP deriving (Generic) -- Fill this out as we go 

instance ToJSON Fields
instance ToJSON JTask 

instance ToJSON Key
instance ToJSON Name
instance ToJSON Task
instance ToJSON Project

mapfst :: (a -> b) -> [(a, v)] -> [(b, v)]
mapfst f = fmap $ \ (k, v) -> (f k, v)

instance ToJSON a => ToJSON (HashMap Key a) where
  toJSON = toJSON . HashMap.fromList . mapfst show . HashMap.toList

instance ToJSON a => ToJSON (HashMap Name a) where
  toJSON = toJSON . HashMap.fromList . mapfst show . HashMap.toList 
```

# mysql - 查询是否设置了外键

> ID：13368152
> 
> 赞同：-1
> 
> 时间：2012-11-13T20:23:53.633
> 
> 标签：mysql

好的，我有两个 MySQL 表：

**TableA**包含以下列：**idTableA**和**idTableB_FK**

**TableB**包含以下列：**idTableB**和**idTableA_FK**

关系如下：

1.  从 TableA 到 TableB 的一对多关系（**TableA.idTableA**是 PK，该关系的 FK 是**TableB.idTableA_FK**）

2.  TableA 和 TableB 之间是一对一的关系（**TableB.idTableB** 是 PK，在**TableA.idTableB_FK**中表示）。这是一对一的关系，因为在 TableA 中只能有一行来获取外键值。

假设表A中的数据**如下**

```
idTableA     |    idTableB_FK
-----------------------------
    1        |       2
    2        |       5
    3        |       6
    4        |       8 
```

以及表B中的以下**内容**

```
idTableB     |    idTableA_FK
------------------------------
    1        |       1
    2        |       1
    3        |       2
    4        |       2
    5        |       2
    6        |       3
    7        |       3
    8        |       4 
```

现在，我想要一个显示 idTableA、idTableB 和 is_set 列的查询。设置是一个是/否字段（或 1/0），其中仅当**TableA.idTableB_FK**具有该 FK 的相应设置值时才设置为是。所以对于上面的例子：

```
idTableA    |    idTableB    |     is_set
---------------------------------------------
    1       |       1        |       no
    1       |       2        |       yes
    2       |       3        |       no
    2       |       4        |       no
    2       |       5        |       yes
    3       |       6        |       yes
    3       |       7        |       no
    4       |       8        |       yes 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:09:09.393

我想你正在寻找这样的东西：

```
select
  TableA.idTableA,
  TableB.idTableB,
  case when EXISTS(select null
              from TableA TableA_1
              where
                TableA_1.idTableA = TableA.idTableA
                and TableA_1.idTableB_FK = TableB.idTableB)
  then 'yes' else 'no' end as is_set
from
  TableB left join TableA
  on TableB.idTableA_FK = TableA.idTableA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:43:30.403

好的，那是凭记忆，但应该这样做。如果它是错误的，我可以针对某些东西运行它并修复它。

```
SELECT tb.idTableA_FK AS idTableA, tb.idTableB, tbb.idTableB IS NOT NULL AS is_set 
    FROM TableB AS tb LEFT JOIN TableA AS ta ON (tb.idTableA_FK = ta.idTableA) 
    LEFT JOIN TableB AS tbb ON (ta.idTableB_FK = tbb.idTableB) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:48:29.770

我相信这就是您正在寻找的：

```
SELECT a.idTableA, b.idTableB, c.idTableB_FK IS NOT NULL is_set
FROM TableA a, TableB b LEFT JOIN TableA c ON b.idTableB=c.idTableB_FK
WHERE b.idTableA_FK=a.idTableA 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T03:31:55.373

我最终这样做了：

```
SELECT b.idTableA_FK, b.idTableB ,

IF (
    (SELECT a.idTableB_FK 
        FROM (TableA AS a) 
        WHERE a.idTableA = b.idTableA_FK
    ) = b.idTableB, TRUE, FALSE
) AS is_set

FROM (TableB AS b) 
```

这产生了正确的结果。

我要感谢所有回复，我投票赞成[fthiella](https://stackoverflow.com/users/833073/fthiella)，因为他/她建议的解决方案对我的解决方案有影响。

# java - 从常规 java 中的 main 方法调用 javaFX 方法

> ID：13368154
> 
> 赞同：0
> 
> 时间：2012-11-13T20:23:58.360
> 
> 标签：java, methods, call, javafx-2

我有两个项目：

1.  具有此方法的 JavaFX GUI (2.0) 类称为`showNewMessage(String msg)`
2.  一个带有数据库和东西的“常规 Java”类。

我想做的是用这种方法更新 JavaFX GUI `showNewMessage(String msg)`。但是调用应该每 5 秒来自 java 项目。

所以它会是这样的：

*   Java 项目创建消息列表
*   Java 项目调用`showNewMessage(String msg)`
*   JavaFX 类更新了它的场景
*   `showNewMessage`Java 项目在再次调用之前等待 5 秒

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:02:25.633

您需要查看应用程序之间的进程间通信。它可以通过多种方式实现。RMI，插座...等

[http://www.javaworld.com/javaqa/2000-03/03-qa-0324-ipc.html](http://www.javaworld.com/javaqa/2000-03/03-qa-0324-ipc.html)

例如 javafx 应用程序创建一个服务器套接字并从客户端读取数据。然后，您可以调用 (shownewmessage) 方法传递接收到的数据。

# java - 为什么 exec('java -jar file.jar') 不能在浏览器上工作，但在命令行上工作？

> ID：13368155
> 
> 赞同：1
> 
> 时间：2012-11-13T20:23:58.577
> 
> 标签：java, php, linux, apache, executable-jar

我尝试从这样的 php 文件运行 jar：

```
exec("java -jar /home/florinbuda/NetBeansProjects/monkey1/dist/monkey1.jar", $result);          
print_r($result); 
```

如果我从命令行运行它，它就可以工作，例如：

```
$ php runner.php 
```

但是如果我尝试通过 http-localhost-server/runner.php 加载它，它就不起作用了，页面只会一直加载而不会给出任何错误..

在 .jar 文件中，如果 jar 甚至开始工作，我现在添加了一个简单的测试

```
public static void main(String[] args) {
    new File("/home/florinbuda/Desktop/xxx").mkdir(); 
```

正如你可以猜到的 - 当我调用 http-localhost-server/runner.php 时，jar 甚至没有开始执行......

是权利问题？你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T03:09:46.350

是的，这是权限的问题。

您应该 chmod .jar 文件的父文件夹。

```
chmod 755 -R /home/florinbuda/NetBeansProjects/monkey1/dist/ 
```

**编辑：**然后你的脚本应该是这样的：

```
exec("PATH_TO/java -jar /home/florinbuda/NetBeansProjects/monkey1/dist/monkey1.jar"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:43:22.750

bash 中的环境变量与 exec() 中的环境变量不同。至少使用 java bin 的完整路径。您也可以尝试运行 /path/to/java 以查看正常输出是否正常。

# php - PHP 类使用静态数据库表/列名称。如何制作动态？（最佳实践）

> ID：13368157
> 
> 赞同：0
> 
> 时间：2012-11-13T20:24:09.017
> 
> 标签：php, class, methodology, object-oriented-database

我找到了一个基于 PHP 的食谱和膳食计划脚本，我想对其进行编辑。

有一个*MealPlan*类，允许所有用户通过从数据库中找到的所有食谱列表中进行选择来创建自己的每日菜单/膳食计划。

我想根据用户的级别切换*插入*语句中使用的表/列名。

原来的插入方法是：

```
// Insert Meal Plan
function insert($date, $meal, $recipe, $servings, $owner) {
        global $DB_LINK, $db_table_mealplans, $LangUI;

        $date = $DB_LINK->addq($date, get_magic_quotes_gpc());
        $meal = $DB_LINK->addq($meal, get_magic_quotes_gpc());
        $recipe = $DB_LINK->addq($recipe, get_magic_quotes_gpc());
        $servings = $DB_LINK->addq($servings, get_magic_quotes_gpc());
        $owner = $DB_LINK->addq($owner, get_magic_quotes_gpc());

        $sql = "INSERT INTO $db_table_mealplans (
          mplan_date,
          mplan_meal,
          mplan_recipe,
          mplan_servings,
          mplan_owner)
          VALUES (
          '$date',
          $meal,
          $recipe,
          $servings,
          '$owner')";
        $rc = $DB_LINK->Execute($sql);
        DBUtils::checkResult($rc, NULL, $LangUI->_('Recipe already added on:'.$date), $sql);
} 
```

我的想法是改变：

```
mplan_date,
mplan_meal,
mplan_recipe,
mplan_servings,
mplan_owner 
```

至：

```
$mplan_date,
$mplan_meal,
$mplan_recipe,
$mplan_servings,
$mplan_owner 
```

并使用*switch*语句更改表/列名称。但有人告诉我，这种事情在 OOP 中是不受欢迎的。解决这个问题的最佳方法是什么？

（注意：如果需要，我可以发布整个课程，但认为这将是足够的信息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:56:05.710

我没有任何代码给你，但我最近做了类似的事情。基本上，我通过根据用户输入的内容连接字符串来动态创建 SQL 字符串。请耐心等待我尝试即时输入内容。

```
$columnsArray = array();
$sqlCmd = "INSERT INTO";

If (someCondition) {
    array_push($columnsArray, "mplan_date");
}//Could try turning this into a loop and just push all 
 //applicable columns into the array

$counter = 0;

Foreach ($columnsArray as $columnName) {
    $sqlCmd .= " $columnName";
    $counter++
    If ($counter < count($columnsArray)){
        $sqlCmd .= ",";
    }//This will put a comma after each column with the 
     //exception of the last one.
} 
```

所以我只用用户定义的选择语句来检索数据就做了这样的事情。基本上继续使用逻辑，直到您构建了一个自定义字符串，该字符串将成为用户定义的 SQL 语句，然后执行它。这包括执行与上述脚本类似的操作以将值连接到字符串中。

希望这能给你一些想法。

# ruby-on-rails - Rails 是否会自动跟踪页面名称更改并创建 301 重定向？

> ID：13368161
> 
> 赞同：0
> 
> 时间：2012-11-13T20:24:20.083
> 
> 标签：ruby-on-rails, seo, http-status-code-301

是否有宝石可以做到这一点，或者甚至可以烘烤？我现在对事情的理解是，每当我更改页面的路径（也许我为 SEO 这样做）时，我都需要创建一个新的 301 重定向。这不应该自动处理吗？

如果是这样，它是如何自动处理的，我该如何使用它？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:39:15.903

这是一个相当复杂的问题，很大程度上取决于您的路线现在的样子。简单的答案是：不，这不是由 Rails 自动处理的。

处理这种重定向的最简单方法是在`routes.rb`文件中，从旧路径重定向到新路径。像这样的东西：

```
match '/products/:id', redirect("/new_products/%{id}") 
```

[您可以在Rails 路由指南](http://guides.rubyonrails.org/routing.html#redirection)中了解有关这种重定向的更多信息。

如果您只更改产品的一个实例，那么显然这没有多大意义——您不能对每个更改的对象都这样做。在这种情况下，我们假设您没有使用标准的基于 ID 的路由；如果你是那么这不会是一个问题。（由于 ID 不会改变，相反，您的路由似乎是基于一个确实改变的字段——比如姓名或日期等等。）

在这种情况下，您可能希望将路由字段从当前的任何内容中提取出来，并将其提取到它自己的 slug 列中。为此我推荐非常出色[的friendly_id](https://github.com/norman/friendly_id) gem：它允许您自动生成slug，它的[历史模块](http://rubydoc.info/github/norman/friendly_id/master/FriendlyId/History)允许您使用对象的旧slug 执行查找。

然后，如果您认为有必要，您可以通过它的 ID、它的 slug 或它的任何旧 slug 来查找一个对象。

# php - htaccess 重写规则错误地重定向资源请求（CSS、JS）

> ID：13368164
> 
> 赞同：0
> 
> 时间：2012-11-13T20:24:25.910
> 
> 标签：php, .htaccess, rewrite

我查看了这个问题的一些可能的重复项，但重写规则是针对项目的，所以我找不到合适的答案。

问题的症结所在？htaccess 文件正在重写（我认为）对某些文件（CSS、JS 和图像）的请求。

我有一个 htaccess 文件设置为直接如下：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z]*)/?([a-zA-Z]*)?/?([a-zA-Z0-9]*)?/?$ index.php?controller=$1&action=$2&id=$3 [NC,L] 
```

它需要一个类似 localhost/framework/booking/dashboard 的 URL 并重写为 localhost/framework/index.php?controller=booking&action=dashboard

我的本地 www 文件夹中的相关文件结构如下所示：

框架
 -index.php
 -htaccess
 -views
  -Booking
   -dashboard.php
   -wuxia-blue.css

dashboard.php 中的 CSS 链接如下：

```
<link rel='stylesheet' type='text/css' href="wuxia-blue.css"> 
```

发出的 HTTP 请求似乎是：/framework/booking/wuxia-blue.css

应该是：/framework/views/booking/wuxia-blue.css

理想情况下，我想使用类似于

```
href="<?php echo(CSS . "wuxia-blue.css"); ?>". 
```

CSS 是应用程序中定义的常量，而 wuxia-blue.css（和所有其他 css 文件）包含在样式表的预定义文件夹中。显然，这将适用于其他资产，如 .js 文件和图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:35:21.653

htaccess 规则是正确的 - 问题在于您的文件夹结构。

当您创建相对链接时，它与地址栏中显示的当前 URL 相关 - 您所在文件的位置不相关。

您的视图文件位于 /framework/views/booking/dashboard.php，但浏览器只看到 url /framework/booking/dashboard。这意味着浏览器将资源的位置解释为 /framework/booking/dashboard/wuxia-blue.css

就个人而言，我建议将所有 CSS 和图像保留在 /images 和 /css 中的框架之外。否则，可能必须在您的框架中添加一些代码来提供图像文件，因为所有图像请求都将通过您的 framework.php 文件运行。

# .net - WPF - Windows XP 中的用户界面“不工作”

> ID：13368166
> 
> 赞同：0
> 
> 时间：2012-11-13T20:24:26.967
> 
> 标签：.net, wpf, user-interface, windows-xp

我有一个在 Windows 7 中运行良好的 WPF 应用程序，但在 Windows XP 中，该界面根本无法正常工作。我有几个扩展器应该在启动时全部关闭和禁用，但都是打开的。我有一个应该打开对话框的按钮，但该按钮什么也不做。另一个按钮应该被禁用，但会以其自然状态出现。此外，我的视图模型似乎没有加载。我在一台 XP 计算机上对其进行了测试，它出现了这种奇怪的行为大约 10 分钟。我回到它，重新运行，它工作正常。我没有做任何事情来改变它。但是，我无法在其他计算机上复制它。有任何想法吗？我将 VS2010 与 .Net 4 和 MVVM Light 框架一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:23:50.357

好的，我想通了。我以为是渲染问题，结果发现是有静默错误导致viewmodel为空。当我纠正错误时，一切正常（尽管它在 XP 中看起来仍然不是很好）。谢谢大家的帮助！我有应该读取注册表项的初始化代码，但是当它没有找到注册表项时，它抛出了一个空引用，但错误没有出现在视图中（我使用的是处理它的错误日志系统，但报告未正确配置）。当我更正错误处理和初始化代码时，视图模型能够初始化并且工作正常。

# java - 使用 openSAML 签署响应

> ID：13368167
> 
> 赞同：6
> 
> 时间：2012-11-13T20:24:31.370
> 
> 标签：java, xml, opensaml

我试图通过签署响应而不是断言来实现 SAML 2.0。我有 3 个现有供应商在断言级别接受我的签名，但是新供应商正在协议/响应级别请求它。我已经在谷歌上搜索和调试了大约 8 个小时，但找不到一个有效的例子来说明我做错了什么。我下面的代码清楚地显示了我在做什么，最后 10 行左右是我实现的差异（在 if / else 中）。另外，我注意到在我的 XML 中我的 SignatureValue 和 DigestValue 都是空的。谁能指出我一些清晰的文档，或者更好的是，使用 openSAML 的工作响应签名的示例？在这一点上，任何帮助表示赞赏。

```
Assertion assertion = OpenSamlHelper.CreateSamlAssertion(
            issuer.trim(), recipient.trim(), domain.trim(), subject.trim(),
            attributes);        

    //
    // Sign
    //
    Credential signingCredential = getSigningCredential(keystore, storetype, storepass, alias, keypass);

    Signature signature = (Signature) Configuration.getBuilderFactory()
                            .getBuilder(Signature.DEFAULT_ELEMENT_NAME)
                            .buildObject(Signature.DEFAULT_ELEMENT_NAME);

    signature.setSigningCredential(signingCredential);
    signature.setSignatureAlgorithm(SignatureConstants.ALGO_ID_SIGNATURE_RSA_SHA1);               
    signature.setCanonicalizationAlgorithm(SignatureConstants.ALGO_ID_C14N_EXCL_OMIT_COMMENTS);

            SecurityConfiguration secConfiguration = Configuration.getGlobalSecurityConfiguration(); 
            NamedKeyInfoGeneratorManager namedKeyInfoGeneratorManager = secConfiguration.getKeyInfoGeneratorManager(); 
            KeyInfoGeneratorManager keyInfoGeneratorManager = namedKeyInfoGeneratorManager.getDefaultManager();
            KeyInfoGeneratorFactory keyInfoGeneratorFactory = keyInfoGeneratorManager.getFactory(signingCredential);
            KeyInfoGenerator keyInfoGenerator = keyInfoGeneratorFactory.newInstance();
            KeyInfo keyInfo = null;
            try {
                keyInfo = keyInfoGenerator.generate(signingCredential);
            } catch  (Exception e) {
                logger.error(e);
            } 
            signature.setKeyInfo(keyInfo);

            String saml = "";
            try {
            MarshallerFactory marshallerFactory = Configuration.getMarshallerFactory();
    if (signatureType == SignatureType.Response) {
        response.setSignature(signature);
                    marshallerFactory.getMarshaller(response).marshall(response);
    }
    if (signatureType == SignatureType.Assertion) {
        assertion.setSignature(signature);
                    marshallerFactory.getMarshaller(assertion).marshall(assertion);
    }
        Signer.signObject(signature); 
```

UPDATE: The XML I was getting with the above code did not include a signatureValue or Digest Value, like below..

```
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference URI="#_651cc837-e890-46c7-9cf9-646ffd38aaad">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="xs"/>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<ds:DigestValue/>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue/> 
```

After moving the Signer.signObject(signature); to a point after the assertion was attached to the response, I receive the following XML..

```
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference URI="#_273e38e9-3b51-4845-8b8b-f0970e3e9bab">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="xs"/>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<ds:DigestValue>UlVtsjSAvtjOLMbw+HUX9n7FtxM=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>
jM7GxZ77VBHuAatMXLx14s0ExOmmfDpBhCpF8OKV4F3C1BiRutM41aTH25yhgSn+6l4TkK6kEDbFOYI6isvJUhtdVgH4E1xJl0DFfvPJphTF096acvJrLPehpsFd2Ab6sARuV1sbg/gwNFzvlHJWgit5NxHNuFN1qcv3vuhvQ83fOfxxuyLyJrEjpqvbRzwWepHiuTVHlNObrUvjVxEc7AUKPtwTqGlA6y3SdzIDwjN/LsB1V6PWhiMZsbxJx3LUuk5UECOYmRhKQifZWdOdvHoWBq05J54I6RvAplNDTfRBr4AM+tfIz3OXpN6OpKdSC43HRg9LO9bXprui+4CvrQ==
</ds:SignatureValue> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:24:10.417

I tried to sign and artifact response using this code, just switching the entityDescriptor to an artifactResponse and it worked fine. [https://blog.samlsecurity.com/2012/11/signing-with-opensaml.html](https://blog.samlsecurity.com/2012/11/signing-with-opensaml.html)

```
<?xml version="1.0" encoding="UTF-8"?><saml2p:ArtifactResponse xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol" Version="2.0">
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference URI="">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<ds:DigestValue>ZkE02ZnvIqyd+FcfL6PaXNI88Co=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>fDxfW06rbJEFu5nqmsGxwt6O53N8FWwmDOO0e3nUWh0in2TRYD9nj2927pnQZNL4Mk3KAcSWVETUuHX11XWL+MgcosfJd31TR0XEui/F+BbojQlXJRHfD2BfEO9cQCygFSyyOb9tE2FU5noqnx2b3vI5mToam3a135007mAN/t14Jm71EfvvCF9qL2wXI55R8uab0WGqXx1LYSrAjBZq455SH9AIQu+n8L+KaiOzfpjiL+h/5YJ/a+uyiLV6H06TsytowDTBSW67YW110fpoOsD5vgULrZOABmeK6NRZWpI8PK1M+/r6SO0DTEbUiSTYtHz9XBcqbnD9d7ZQ3oZpEQ==</ds:SignatureValue>
<ds:KeyInfo>
<ds:X509Data>
<ds:X509Certificate>MIIDaTCCAlGgAwIBAgIEeL6vczANBgkqhkiG9w0BAQsFADBlMQswCQYDVQQGEwJOTzENMAsGA1UE
CBMET3NsbzENMAsGA1UEBxMET3NsbzEOMAwGA1UEChMFQ2FwcmExDTALBgNVBAsTBGphdmExGTAX
BgNVBAMTEFN0ZWZhbiBSYXNtdXNzb24wHhcNMTIxMTA5MTA1MzU0WhcNMTMwMjA3MTA1MzU0WjBl
MQswCQYDVQQGEwJOTzENMAsGA1UECBMET3NsbzENMAsGA1UEBxMET3NsbzEOMAwGA1UEChMFQ2Fw
cmExDTALBgNVBAsTBGphdmExGTAXBgNVBAMTEFN0ZWZhbiBSYXNtdXNzb24wggEiMA0GCSqGSIb3
DQEBAQUAA4IBDwAwggEKAoIBAQCJFImFwnmxM28bSTWOIKCIW1nkZ4euYbB+aLFwc8nJZ0Go5+B3
sT4gxF5Cr2/syglO9fwNJH+hdIw9qXTcnZL6THGSlb7Hcci/541z3BdaljZ/DFqcvL6BzsY0uBc+
3ZbOEr+n3wADZ12GW1Pz7GxjZncJZUwDgO7M/wtscd4jZD7iRnRMux8dVbg8O1ywE16GEM/UkwF3
Xz98T4/TiEviPLrb+c5IO7KhZyJWndKOucTYUwhi4EZ169XSN03KMZeiMewxqcW4n1fb+GksN/TE
5Pl0Ci/0gSaAQKYTqAlIZ2TS7oQ0MRnI0jsjsUZDFbznTXBwticfHnoTyHDA4sctAgMBAAGjITAf
MB0GA1UdDgQWBBQUSNk3I5z4oXsByufaV51IgzuFdTANBgkqhkiG9w0BAQsFAAOCAQEAFmsaXdGS
fyHjYZzUrZKnX6xjJpB7UA48gd/0/Tylm1zfp+GeRGV3/hQan3+UuV8zrE9lhDUbgnoFFY2Xebrc
5Ij5DS3pEz8xi+isDCqvHrBGCMQ4G6eRUTxVz4VucY1j8G34+X5KECibyuCGPP1yXZf+57CciSpp
8tWGBPI1mOuCmEdiucMapJmZa8uQo5FqWZXoJ0cQgZZ1BEgNERAcCZ5xqF03tpfgFuIu7/arp77i
JKYWPX/a82feabjeecH+gAsWi8Tt1ixKNeNJklFY1GAllxwoDAYcxjjWxIbRh9Bl5Kaaf3S0da3p
Mkv4S1zTI0Bq/WcR5e0GHUFm4one3g==</ds:X509Certificate>
</ds:X509Data>
</ds:KeyInfo>
</ds:Signature>
</saml2p:ArtifactResponse> 
```

Try to skip the KeyInfo part. Your not getting any marshalling errors?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T14:51:33.907

I had the same problem, but after I added

```
signature.setEntityCertificate(cert); 
```

And

```
 KeyInfoGenerator keyInfoGeneratorFactory= keyInfoGeneratorFactory.newInstance();
  if (keyInfoGeneratorFactory instanceof X509KeyInfoGeneratorFactory) {
                ((X509KeyInfoGeneratorFactory) keyInfoGeneratorFactory).setEmitX509Digest(Boolean.TRUE);
                ((X509KeyInfoGeneratorFactory) keyInfoGeneratorFactory).setEmitX509IssuerSerial(Boolean.FALSE);
                ((X509KeyInfoGeneratorFactory) keyInfoGeneratorFactory).setEmitEntityCertificate(Boolean.FALSE);
                ((X509KeyInfoGeneratorFactory) keyInfoGeneratorFactory).setEmitPublicKeyValue(Boolean.FALSE);
                ((X509KeyInfoGeneratorFactory) keyInfoGeneratorFactory).setX509DigestAlgorithmURI(SignatureConstants.ALGO_ID_DIGEST_SHA1);} 
```

# html - 注入 Ruby 并放入 HTML

> ID：13368169
> 
> 赞同：0
> 
> 时间：2012-11-13T20:24:33.697
> 
> 标签：html, css, ruby-on-rails, ruby

我有一个 html.erb 文件，其中有 html 代码。我插入了这段 ruby​​ 代码

```
<li <%= puts "class='active'" %>>Link</li> 
```

但是当我在 Rails 服务器上运行代码时，`class="active"`并没有呈现。为什么会这样，我该如何解决？我错过了一些基本的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:26:58.927

`puts`向 STDOUT 或服务器运行的任何控制台输出一条语句。它不会插入到您的视图中，只会由您的服务器输出。

您根本不需要任何声明即可在此处评估 ERB。你可以这样做：

```
<li <%= "class='active'" %>>Link</li> 
```

[在Ruby on Rails 查看指南](http://guides.rubyonrails.org/layouts_and_rendering.html)中查看有关 ERB 模板语言的更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T20:26:16.497

不要使用看跌期权。用这个：

```
<li <%= "class='active'" %>>Link</li> 
```

`puts`将字符串打印到标准输出并返回`nil`。这就是为什么您的课程没有呈现的原因。

## 更新

为避免转义，请在字符串前面加上`raw`

```
<li <%= raw "class='active'" %>>Link</li> 
```

或者，如果这**确实**是您的代码（没有简化等），您可以这样做

```
<li class='active'>Link</li> 
```

# scala - 浏览文件并存储文件 url 以便稍后上传

> ID：13368170
> 
> 赞同：1
> 
> 时间：2012-11-13T20:24:37.437
> 
> 标签：scala, file-upload, lift

我有一个表格，您可以在其中输入一些数据并且可以附加文件。我想做的只是有一个浏览按钮，这样我就可以选择文件并将该文件的 url 存储在某个 var 中，所以稍后当我想提交表单时……y 可以读取该 var 并使用它的 url 上传文件。我正在使用 Scala Lift。我在网上搜索示例，但找不到任何有用的东西。我只想选择文件并存储文件 url。有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:12:47.727

您不能将文件路径存储在客户端驱动器上。即使你得到这样的路径，你也不能上传不是由客户端手动选择的文件。

我建议做基于 AJAX 的客户端。

# python - 从文本文件创建嵌套列表的函数，python

> ID：13368172
> 
> 赞同：0
> 
> 时间：2012-11-13T20:24:42.127
> 
> 标签：python, list

处理一个函数，该函数将文本行转换为基于块之间的空间的内部列表。该代码适用于除最后一个块之外的所有块，它会忽略它或其他东西。

代码：

```
def build_grocery_list(grocery_file):
    food_list = []
    inner_list = []
    for line in grocery_file:
        if line.strip() == "":
            food_list.append(inner_list)
            inner_list = []            
        if line.strip() != "":
            inner_list.append(line.strip())

    return food_list 
```

返回：`[['milk', 'cheese', 'cream cheese', 'eggs'], ['bread', 'buns', 'pita'], ['hamburgers', 'hotdogs', 'chicken'], ['chicken soup', 'canned tuna']]`

缺少最后一个块：`lettuce, cabbage`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:33:28.853

如果文本文件末尾有一个空行，它将起作用。如果不是，它永远不会附加最后一个 inner_list。退出循环后只需添加一个检查并附加。

```
def build_grocery_list(grocery_file):
    food_list = []
    inner_list = []
    for line in grocery_file:
        if line.strip() == "":
            food_list.append(inner_list)
            inner_list = []            
        if line.strip() != "":
            inner_list.append(line.strip())
    if (inner_list):
        food_list.append(inner_list)

    return food_list 
```

# android - AOSP：我在哪里可以找到新时钟的布局（字体和大小）？

> ID：13368177
> 
> 赞同：1
> 
> 时间：2012-11-13T20:24:52.307
> 
> 标签：android, layout, clock, lockscreen

由于 Android 4.2 中的新时钟布局非常棒，我想将其用作我的应用程序的基础。

感谢开源的美丽，源代码是可用的，但我已经浏览了几个小时，但从未找到它。

我知道在 StackOverflow 上不发布代码并不酷，但我坚信分享这些信息可能对其他开发人员有用。

![在此处输入图像描述](../Images/408cf599b0a917c4fb8e1473a9397ca6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:15:00.340

谷歌提供了一些非常有用的东西：

[http://developer.android.com/reference/android/widget/TextClock.html](http://developer.android.com/reference/android/widget/TextClock.html)

zapi 链接给出了相同的结果，感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:38:48.663

不知道是不是这样，但看看

[https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/keyguard_screen_tab_unlock.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/keyguard_screen_tab_unlock.xml)

应该是一些 keyguard_* 布局，数字时钟小部件的来源是

[https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/widget/DigitalClock.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/widget/DigitalClock.java)

编辑：github似乎已经过时了，下面的应该更准确

[https://android.googlesource.com/platform/frameworks/base/+/android-4.2_r1/core/res/res/layout/keyguard_screen_tab_unlock.xml](https://android.googlesource.com/platform/frameworks/base/+/android-4.2_r1/core/res/res/layout/keyguard_screen_tab_unlock.xml)

[https://android.googlesource.com/platform/frameworks/base/+/android-4.2_r1/core/java/com/android/internal/widget/DigitalClock.java](https://android.googlesource.com/platform/frameworks/base/+/android-4.2_r1/core/java/com/android/internal/widget/DigitalClock.java)

# tfs - TFS 2012 多个安全组

> ID：13368178
> 
> 赞同：2
> 
> 时间：2012-11-13T20:24:52.990
> 
> 标签：tfs, tfs-2012

如果一个用户可以访问多个安全组，TFS 是取最高级别​​的组，还是最低级别的组访问权限？

例如，如果用户 John，属于 Read Group（只能读取源代码管理但不能编辑），然后被添加到 Developer Group（可以读取和编辑源代码管理），TFS 识别哪个组？

由于他属于这两个组，他仍然只能阅读，因为那是最低级别，还是现在可以编辑，因为他也是开发人员组的一部分，那是最高级别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:17:58.523

**权限**

它结合了所有用户组的权限。

如果用户被拒绝访问任何内容，即使他们在其他地方被授予访问权限，他们仍然无法访问它。

如果用户被授予访问任何组中的某些内容的权限，他们将可以访问它（当然，除非其他人拒绝他们）。

如果任何用户组中没有明确的允许或拒绝，他们将被拒绝访问。

**访问级别**

访问级别与组权限分开进行 - 可以在 tfs 2012 管理区域中将访问设置为受限、标准或完全。

对于 TFS 2010，唯一有点奇怪的组是仅工作项组，除了编辑您自己的工作项之外，该组明确拒绝所有内容。此功能已替换为 tfs 2012 中的访问级别。

# javascript - 以背景色为条件的 if 语句

> ID：13368179
> 
> 赞同：3
> 
> 时间：2012-11-13T20:24:54.193
> 
> 标签：javascript, jquery, html, css

我已经查看了有关以背景颜色为条件的 if 语句的其他主题；但是，还没有找到可行的答案。无论我事先创建一个元素作为变量，还是使用 rgb 或 rgba，我都没有得到任何结果，并且 if 直接传递给 else。

```
var element = $("#ARCStatusBox3EQETD");
console.log($('#ARCStatusBox1EQETD').css('backgroundColor'));
    if(element.css('background-color') == "rgb(220,20,60)") {
        $('#HomeStatus1').css("background-color", "#dc143c");
    }
    else if ($('#ARCStatusBox2EQETD').css('background-color') == '#daa520' || $('#ARCStatusBox2EQETD').css('background-color') == '#daa520' || $('#ARCStatusBox1EQETD').css('background-color') == '#daa520'){
        $('#HomeStatus1').css("background-color", "#daa520");
    }
    else {// ($('#ARCStatusBox3EQETD').css('background-color') == '#7cfc00' || $('#ARCStatusBox2EQETD').css('background-color') == '#7cfc00' || $('#ARCStatusBox1EQETD').css('background-color') == '#7cfc00'){
        $('#HomeStatus1').css("background-color", "#7cfc00");
} 
```

有我的代码，它既不能用作 == 十六进制代码，也不能用作 rgb/rgba。

非常感谢任何有关解决方案的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:27:18.400

尝试

```
var element = $("#ARCStatusBox3EQETD");
    if(element.css('background-color') == "rgb(220, 20, 60)") {
        $('#HomeStatus1').css("background-color", "#dc143c");
    }
    else if (hexColor($('#ARCStatusBox2EQETD').css('background-color')) == '#daa520' || hexColor($('#ARCStatusBox2EQETD').css('background-color')) == '#daa520' || $('#ARCStatusBox1EQETD').css('background-color') == '#daa520'){
        $('#HomeStatus1').css("background-color", "#daa520");
    }
    else {// ($('#ARCStatusBox3EQETD').css('background-color') == '#7cfc00' || hexColor($('#ARCStatusBox2EQETD').css('background-color')) == '#7cfc00' || hexColor($('#ARCStatusBox1EQETD').css('background-color')) == '#7cfc00'){
        $('#HomeStatus1').css("background-color", "#7cfc00");
}

function hexColor(colorval) {
    var parts = colorval.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    delete(parts[0]);
    for (var i = 1; i <= 3; ++i) {
        parts[i] = parseInt(parts[i]).toString(16);
        if (parts[i].length == 1) parts[i] = '0' + parts[i];
    }
    return '#' + parts.join('');
}​ 
```

另请注意，某些浏览器会在 , 之后返回带有空格的 rgb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:29:35.367

看起来这可能是特定于浏览器的：

[在这里](http://api.jquery.com/css/)找到：

> 此外，jQuery 可以同样解释多词属性的 CSS 和 DOM 格式。例如，jQuery 理解并返回 .css('background-color') 和 .css('backgroundColor') 的正确值。不同的浏览器可能会返回逻辑上但文本上不相等的 CSS 颜色值，例如 #FFF、 `#ffffff`和 rgb(255,255,255)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:11:08.227

问题的一部分是颜色有多个字符串表示：

```
"white"
"rgb(255, 255, 255)"
"#FFFFFF"
"#FFF" 
```

都代表白色。

为了能够比较两种颜色，您需要以相同的格式将两种颜色放在一个共同点上。

`jQuery.css()`当用于获取 css 颜色时，将始终返回 RGB 格式的颜色字符串。

您可以使用该功能来比较颜色，方法是始终以 RGB 格式指定要与之比较的颜色。

无论元素具有哪种白色字符串表示形式，下一条语句都是正确的：

```
element.css("background-color") == "rgb(255, 255, 255)" 
```

您还可以通过转换`element.css("background-color")`为十六进制来比较颜色值作为十六进制。

[这个问题](https://stackoverflow.com/q/1740700/750216)的答案提供了一些将 RGB 颜色转换为十六进制的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T20:28:00.083

我不确定您是否可以比较计算的颜色。我认为 jQuery 只提供了字符串识别。计算出来的颜色依赖于浏览器的实现。

我认为您只能比较两个**字符串**，我认为您不能获取元素的 bg 颜色，并且安全性依赖于正确计算它。这可能是可能的，但我认为对于这样的功能，您必须扩展您的实现。

因为一个浏览器可以使用一种颜色格式，其他浏览器可以使用另一种，并且这些是不同的**字符串**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T20:34:27.657

rgb 字符串中的逗号之间需要空格。

```
'rgb(255, 255, 255)' 
```

这是一个有效的 jsfiddle [http://jsfiddle.net/Pvt5Z/8/](http://jsfiddle.net/Pvt5Z/8/)

**编辑**上面将在 FireFox 和 Chrome 中工作，但是，IE8 返回背景颜色的任何 css 字符串，而不是将其规范化为“rgb”字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-23T17:19:30.903

如果您有一个具有您正在寻找的背景颜色的元素，您可以比较这两种背景颜色。

if(document.getElementById("myCompare").style.backgroundColor==document.getElementById("myRef").style.backgroundColor)

# wordpress - Wordpress 菜单项顺序

> ID：13368184
> 
> 赞同：0
> 
> 时间：2012-11-13T20:25:09.457
> 
> 标签：wordpress, menu

基本上我在wordpress中有一个三级菜单，我在前端有以下代码来调用三级菜单：

$children = get_pages('child_of='.$include_page_ids[$i]);

```
 if (count($children) > 1) {

        $sub = "<ul>";

        foreach ($children as $child){

        $sub .= "<li><a href='#$child->post_title'>";

        $sub .= $child->post_title;

        $sub .= "</a></li>";

        }

        $sub .="</ul>";

        echo $sub;

    } 
```

这会为某个页面的子项调用一个列表，并制作锚点（我也需要）。问题是现在它们按字母顺序显示，但我需要能够自己设置正确的顺序（即与后端菜单中的顺序相同）。请帮帮我，我怎样才能做到这一点？例如，这是页面[http://www.eboxlab.net/transbeam/support/support/](http://www.eboxlab.net/transbeam/support/support/)，您可以在横幅旁边的方框中看到第三级菜单（条款和条件的可接受使用政策）。它对应的块的顺序是正确的，但菜单是按字母顺序排列的。帮助真的很感激。PS：如果需要我可以提供模板代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:30:44.077

[wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)来救援！假设您使用的是 WP 3 或更新版本，它将允许您将元素包装在您想要的任何标记中，并且将与您在管理仪表板中配置菜单的方式相对应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:56:10.697

其实很简单。以下是您的`$children`呼叫应如下所示： `$children = get_pages('child_of=' . $include_page_ids[$i] . '&orderby=menu_order&sort_order =ASC');`

**这就是您需要添加的全部内容 - 这告诉查询按其“menu_order”列（或Page attributes**下的“Order”字段）以升序方式对页面进行排序。[您可以在函数参考/获取页面](http://codex.wordpress.org/Function_Reference/get_pages)中查看有关 get_pages 函数的更多详细信息

# java - Java - 将字符串映射到带有枚举的接口的实现？

> ID：13368188
> 
> 赞同：2
> 
> 时间：2012-11-13T20:25:31.430
> 
> 标签：java, interface, enums

在我的遗留代码中，我有一个属性/值对的概念。

每个属性/值在我的系统中都有一些任意含义。所以，我的接口有getValue() 和setValue() 方法。这些中的每一个都根据属性在我的系统中的含义执行一些特定的业务逻辑。

这工作得很好，但我遇到了一些问题。

首先是我的映射看起来像这样：

```
if (name == "name1") return thisAttributeImplementation(); 
```

这是丑陋的，很容易搞砸打字......

第二个是这些 AttributeImplementation 需要知道它们的属性的名称，但除非我将其作为静态成员提供，或者将其传递给构造函数，否则它们不会，这两者都很丑陋。

似乎枚举将是解决这两个问题的好方法，但我在解决后勤问题时遇到了麻烦。为了将字符串与对象关联起来，枚举应该是什么样的？我应该如何遍历枚举以找到合适的枚举？对象本身应该如何获得与它们关联的字符串的知识？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:27:59.880

与此类似的东西是否正确？

```
public enum Borough {
    MANHATTAN(1),
    THE_BRONX(2),
    BROOKLYN(3),
    QUEENS(4),
    STATEN_ISLAND(5);

    private int code;

    private Borough(final int aCode) {
        code = aCode;
    }

    /**
     * Returns the borough associated with the code, or else null if the code is not that of a valid borough, e.g., 0.
     * 
     * @param aCode
     * @return
     */
    public static Borough findByCode(final int aCode) {
        for (final Borough borough : values()) {
            if (borough.code == aCode) {
                return borough;
            }
        }
        return null;
    }

    /**
     * Returns the borough associated with the string, or else null if the string is not that of a valid borough, e.g., "Westchester".
     * 
     * @param sBorough
     * @return
     */
    public static Borough findByName(final String sBorough) {

        for (final Borough borough : values()) {
            if (borough.name().equals(sBorough)) {
                return borough;
            }
        }
        return null;
    }

    public int fromEnumToInt() {
       return mId;
}

} 
```

# amazon-s3 - ec2-bundle-vol 分块大小

> ID：13368191
> 
> 赞同：2
> 
> 时间：2012-11-13T20:25:40.583
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services

使用 AWS 中的 ec2-bundle-vol/ec2-upload-bundle/ec2-register trifecta 制作 AMI 并将其存储到 S3，我得到 36 个 10 MB 图像块。从可读性/测试的角度来看，我更喜欢 4 100 MB 图像或一个 3.5 GB 文件。

如果不找到并逆向工程包装在 ec2-bundle-vol 中的 Ruby Rails 脚本，我看不到改变这种行为的简单方法。

或者，三打小文件是否有充分的理由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:16:05.850

不幸的是，没有办法不修改 ruby​​ 脚本。块大小是硬编码的

$AWS_PATH/amitools/ec2/lib/ec2/amitools/bundle.rb**第 14 行**

```
CHUNK_SIZE = 10 * 1024 * 1024 # 10 MB in bytes. 
```

最终，如果块的大小不同，可能无法注册捆绑包

# ruby-on-rails - hidden_ field 语法问题

> ID：13368195
> 
> 赞同：0
> 
> 时间：2012-11-13T20:25:54.563
> 
> 标签：ruby-on-rails, hidden-field

我一直在尝试传递用户打算通过哪个按钮单击哪个按钮，通过一个隐藏字段传递轮数。

```
<%= form_for @round, :url => { :action => 'pick_page'} do |f| %>

<%= f.hidden_field :round, :value => '1', :class =>'round1' %>
<%= f.submit 'Picks', :class => 'round1' %>

<%= f.hidden_field :round, :value => '2', :class =>'round2' %>
<%= f.submit 'Picks', :class => 'round2' %>

<% end %> 
```

使用此代码，我在pick_page 中不断获得2 作为回合。它显然是跳过了第一个隐藏字段。我怎样才能得到它，以便“f.submit”提交与其类关联的整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-03T03:47:23.910

我们只是遇到了同样的问题！我们修复了它，创建了 2 个彼此相邻的不同形式。

```
<%= form_for @round, :url => { :action => 'pick_page'} do |f| %>

<%= f.hidden_field :round, :value => '1', :class =>'round1' %>
<%= f.submit 'Picks', :class => 'round1' %>

<%= f.hidden_field :round, :value => '2', :class =>'round2' %>
<%= f.submit 'Picks', :class => 'round2' %>

<% end %> 
```

将其更改为

```
<%= form_for @round, :url => { :action => 'pick_page'} do |f| %>

<%= f.hidden_field :round, :value => '1', :class =>'round1' %>
<%= f.submit 'Picks', :class => 'round1' %>

<% end %>

<%= form_for @round, :url => { :action => 'pick_page'} do |f| %>

<%= f.hidden_field :round, :value => '2', :class =>'round2' %>
<%= f.submit 'Picks', :class => 'round2' %>

<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:35:02.133

您可以删除隐藏字段并在提交按钮上添加`name`和属性。`value`

# ios - 无法在 iOS6 中使用启用的故事板自动布局执行自定义 UIButton

> ID：13368197
> 
> 赞同：2
> 
> 时间：2012-11-13T20:26:00.167
> 
> 标签：ios, uibutton, ios6, custom-controls, gradient

我遇到了奇怪的行为。我正在使用我在控制器中设置的自定义样式按钮：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.signOutButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [self.signOutButton setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];

    CAGradientLayer *btnGradient = [CAGradientLayer layer];
    btnGradient.frame = self.signOutButton.bounds;
    btnGradient.colors = [NSArray arrayWithObjects:
                          (id)[[UIColor colorWithRed:102.0f / 255.0f green:102.0f / 255.0f blue:102.0f / 255.0f alpha:1.0f] CGColor],
                          (id)[[UIColor colorWithRed:51.0f / 255.0f green:51.0f / 255.0f blue:51.0f / 255.0f alpha:1.0f] CGColor],
                          nil];

    [self.signOutButton.layer insertSublayer:btnGradient atIndex:0];
} 
```

它在 iOS 5 中运行良好。但如果我为 iOS 6 构建这个并为 Storyboard 启用了自动布局，那么我的样式中的渐变会消失/变得透明（但标题仍然可见）。

如果我禁用自动布局 - 渐变又回来了。有人可以用自动布局解释这种行为吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T19:18:32.300

在 viewDidLoad 中，在自动布局下，您的视图还没有框架，因此您正在使图层具有`CGRectZero`.

您需要将此代码或至少将渐变层的框架设置为`viewDidLayoutSubviews`或类似的部分移动。

# reporting-services - SSRS：在组后插入空白行

> ID：13368198
> 
> 赞同：0
> 
> 时间：2012-11-13T20:26:02.230
> 
> 标签：reporting-services, reportingservices-2005, ssrs-tablix, ssrs-grouping

我正在编写一份 SSRS 报告，该报告需要在每个组之后显示一个空白行。按字段分组是“类别”。它采用的值是“2010 年第一季度”、“2010 年第二季度”、“2011 年第一季度”、“2011 年第二季度”。我希望列中的数据如下：

# 类别

2010 年第一季度 2010 年
第二季度

2011年第一季度

该报告由 sql 查询填充。我遇到的问题是在每个组之后插入空白行。

我试图在组内下面插入一行并使用它的可见性属性。但是都失败了。我也试图包括

UNION NULL, NULL, NULL 在我的 sql 查询中插入一个空白行。但是由于我的数据集很大，我担心在 sql 中格式化会减慢进程。

如果您需要更多详细信息，请提出建议并告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:22:48.037

在您的 SQL 查询中使用联合是正确的方向，但是您需要使用“联合所有”而不是“联合”来防止数据库过滤结果集以获得唯一性。使用 union all 只会添加另一行，性能影响应该是无关紧要的。

# objective-c - 另一个页面上 UIScrollView 上的用户交互问题

> ID：13368199
> 
> 赞同：0
> 
> 时间：2012-11-13T20:26:03.987
> 
> 标签：objective-c, xcode, uiscrollview, user-interaction

我有一个`UIScrollView`3 页。问题是在我的应用程序中，用户必须能够同时与所有页面进行交互，并且由于某种原因，似乎有一些自动功能会禁用当前未看到的页面上的用户交互。我需要禁用此功能，以便允许在所有页面上与我的滚动视图中的所有视图进行交互。

# linux - 用tika1.2配置apache solr3.6

> ID：13368203
> 
> 赞同：0
> 
> 时间：2012-11-13T20:26:11.020
> 
> 标签：linux, ubuntu, solr, lucene, apache-tika

我将 solr3.6 与 tika1.2 一起使用，但我无法上传 pdf 文件。首先，我安装 solr 并从 exampledocs 上传一些 *.xml 文件。我可以用这个 URL 搜索这些文件`http://localhost:8983/solr/select/?q=solr`。在下一步中，我安装 tika 以上传 pdf 和 doc 文件，但它不起作用。以下内容在“example/solr/conf/solrconf.xml”文件中。

```
<requestHandler name="/update/extract" startup="lazy" class="solr.extraction.ExtractingRequestHandler" >
  <lst name="defaults"><str name="fmap.content">text</str><str name="lowernames">true</str>
    <str name="uprefix">ignored_</str>
    <str name="tika.config">tika-data-config.xml</str>
    <str name="captureAttr">true</str>
    <str name="fmap.a">links</str>
    <str name="fmap.div">ignored_</str>
  </lst>
</requestHandler>` 
```

在文件“example/solr/conf/tika-data-config.xml”中我有这个内容：

```
<dataConfig>
  <dataSource name="bin" type="BinFileDataSource" />
  <document>
    <entity name="f" dataSource="null" rootEntity="false" processor="FileListEntityProcessor" transformer="TemplateTransformer" baseDir="/home/ubuntu-user/Documents" fileName=".*\.(DOC)|(PDF)|(pdf)|(doc)|(docx)|(ppt)" onError="skip" recursive="true">
      <field column="fileAbsolutePath" name="path" />
      <field column="fileSize" name="size" />
      <field column="fileLastModified" name="lastmodified" /><entity name="tika-test" dataSource="bin" processor="TikaEntityProcessor" url="${f.fileAbsolutePath}" format="text" onError="skip">
      <field column="Author" name="author" meta="true"/>
      <field column="title" name="title" meta="true"/>
    </entity> 
```

如果我把这行放在控制台中

`curl http://localhost:8983/solr/update/extract?literal.id=doc2&uprefix=attr_&fmap.content=attr_content&commit=true" -F "myfile=@test.pdf"`

我得到这个输出

```
<?xml version="1.0" encoding="UTF-8"?>
  <response>
    <lst name="responseHeader">
      <int name="status">0</int>
      <int name="QTime">183</int>
    </lst>
  </response> 
```

但我无法用 solr 搜索内容。如果我浏览到这个 url: `http://localhost:8983/solr/browse`，我会看到一个新条目，但没有内容。

我还启动了 solr 和 tika 服务器：

```
java -jar start.jar
java -jar tika-server-1.2.jar 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:25:33.840

您需要在 dist 文件夹以及 contrib 文件夹中的相应文件中添加 apache-solr-dataimporthandler-3.6、apache-solr-dataimporthandler-extras-3.6 和 apache-solr-cell-3.6 的 jars（或路径）。

然后，您可以从 Solr 中提取 pdf，而无需启动 Tika 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:47:11.613

检查[ExtractingRequestHandler](http://wiki.apache.org/solr/ExtractingRequestHandler)它将帮助您索引丰富的文档。
您无需启动单独的 Tika Server，因为 Solr 可以使用其中添加的库从丰富的文档中提取内容。

所需的 jar（依赖项所需的 Solr Cell 和 Tika Jars）可能在配置中：-

```
<lib dir="../../dist/" regex="apache-solr-cell-\d.*\.jar" /> 
<lib dir="../../contrib/extraction/lib" regex=".*\.jar" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:21:50.783

现在我已经安装了新的 solr，我可以通过这个 url 搜索 pdf

```
http://localhost:8983/solr/select/?q=attr_content:st* 
```

一些 PDF 还可以，但是通过任何 PDF，我都会得到这个输出

```
<arr name="attr_content"><str>                         ((stdin))      � ��������� 
```

attr_creation_date 和 attr_meta 都可以。制作人是 Ghostscript。GPL 鬼脚本 8.63

# php - CURL 出现错误 500 - PHP

> ID：13368207
> 
> 赞同：1
> 
> 时间：2012-11-13T20:26:16.763
> 
> 标签：php, curl

我编写了一个 PHP 脚本来验证我并发送回一个带有票证的 URL：www.example.com/login?ticket=xxxx

当我在导航器中输入这个 URL 时，我确实工作得很好。执行此操作时，检查发送的 HTTP 标头确认不需要 POST 变量，也没有发送 cookie。

通过 CURL 发送完全相同的 HTTP 标头时，我不断收到带有此描述的 500 错误：

> --cas:authenticationFailure code='INVALID_TICKET'--

然而，当它在导航器中完美运行时，票本身不能无效。

CURL 的配置如下：

```
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, false);

curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt ($ch, CURLOPT_COOKIESESSION, 0);

curl_setopt ($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11'); 
```

在此先感谢您提供帮助。

# android - 使用 null InputStream 和密码加载 Keystore？

> ID：13368209
> 
> 赞同：1
> 
> 时间：2012-11-13T20:26:31.767
> 
> 标签：android, ssl, keystore

我遇到（继承）以下代码：

```
String ksType = KeyStore.getDefaultType();
KeyStore ks   = KeyStore.getInstance(ksType);
ks.load(null, null);
SSLSocketFactory sockFactory = new SSLSocketFactory(ks); 
```

我对`KeyStore` `load`方法的调用感到困惑。此代码使用什么密钥库？我查看了 KeyStore 文档，据我所知这是合法的。

但是，代码不起作用。该应用程序需要一个 URL 供服务器连接。该应用程序会引发`javax.net.ssl.SSLPeerUnverifiedException: No peer certificate`错误 - 即使该站点具有有效的 SSL 证书。

调试时，我添加了以下行：

```
Log.v(TAG,"ks has " + String.valueOf(ks.size()) + " entries."); 
```

获取密钥库中的项目数。它返回零。

我觉得我严重误解了 KeyStores 的一些东西。

这段代码应该工作吗？它应该做什么？

**编辑** 根据代码的使用方式（对网站进行身份验证），我相信它被用作信任库，而不是密钥库。`SSLSocketFactory`正在使用的`org.apache.http.conn.ssl`. 查看应用程序的资源，应用程序中似乎没有包含密钥库文件。令我费解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:34:44.823

如果它被用作密钥库，它可能会起作用，但“null”也是如此。如果它被用作信任库，它将无法工作。您可以发布正在调用的 SSLSocketFactory 的构造函数吗？

编辑：任何 SSL 客户端都需要一个非空的信任库来保证安全。随 Java 提供的那个对于大多数用途来说已经足够了。

# php - Zend 框架的自定义 500 错误页面

> ID：13368213
> 
> 赞同：1
> 
> 时间：2012-11-13T20:26:45.647
> 
> 标签：php, zend-framework

是否可以为 zend 框架提供自定义 500 错误页面？我的意思是 ErrorController 中的某些内容...如果您有 500 错误，请查看自定义视图渲染。

```
<?php
class ErrorController extends Zend_Controller_Action
{
    private $_notifier;
    private $_error;
    private $_environment;

    public function init()
    {
        parent::init();

        $this->_error = $this->_getParam('error_handler');
   }

    public function errorAction()
    {
        switch ($this->_error->type) {
            case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
            case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:
                $this->getResponse()->setHttpResponseCode(404);
                $this->view->message = 'Page not found';
                break;
            default:
                //Doesn't work
                $this->renderScript('error/500.phtml');
                $this->getResponse()->setHttpResponseCode(500);
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:35:00.770

是的，这完全有可能，但这取决于您最终获得状态 500 的原因。

任何导致 Apache 网络服务器发出此状态的内容都无法被您的 ErrorController 以简单的方式拦截。

但是，如果您决定必须使用 HTTP 响应代码 500 退出某个操作，那么您可以自由地这样做。

一件重要的事情是：如果您抛出一个未被捕获的异常，Zend 框架将捕获它并重定向到错误控制器。此异常对象存储为“error_handler”参数中的属性“异常”。因此，在您的代码中，您应该能够询问您是否因为未捕获的异常而存在：

```
if (isset($this->_error->exception) && $this->_error->exception instanceof Exception) {
  // You got an exception
} 
```

我个人认为我的控制器能够抛出 Controller_Exception ，它带有必须发出的 HTTP 状态代码。如果您需要对响应代码进行详细控制，则只有控制器应该决定响应端发生的情况。

About logging: Log errors where they happen. If something makes you throw an exception, the correct location for logging is right before the throw, I'd say. Of course you can always log in the error controller as well, to signal that the error that once might only be at warning level really did not get caught and really is an error, but this might not really tell you where stuff went wrong.

# html - Firefox 中 webm 视频格式播放的问题

> ID：13368217
> 
> 赞同：0
> 
> 时间：2012-11-13T20:27:09.540
> 
> 标签：html, firefox, html5-video, webm

使用 VideoJS 我遇到了 webm 格式无法在 Firefox 中播放的问题。

在这里研究了这个问题后，我对我的 htaccess 文件进行了适当的更改。修复了 ogg 和 ogv 播放，但不是 webm。我已经测试了 webm 视频文件本身，它可以在 VLC 播放器中正常播放。

mp4 格式和 flahs 格式效果很好。提前感谢您对此的任何想法。

访问：

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .web 
```

HTML 摘录：

```
<video id="abacus_holiday_video" class="video-js vjs-holiday-skin" loop autoplay controls
  preload="auto" width="640" height="390" poster="my_video_poster.png"
  data-setup="{  }">
  <source src="abacus_holiday.webm" type='video/webm'>
  <source src="abacus_holiday.mp4" type='video/mp4'>

</video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:19:26.897

.htaccess 将扩展名映射到 mime 类型。您在代码中的扩展名，即 src 属性末尾的扩展名是 .webm 但您的 mime 类型映射是 .web 所以不匹配。

在 webm 的 htaccess 中更改/添加映射，即

```
AddType video/webm .webm 
```

或将文件重命名为 .web。

前者似乎是最好的 FWIW。

# c++ - C++11 基于范围的 for 循环如何知道数组大小？

> ID：13368220
> 
> 赞同：10
> 
> 时间：2012-11-13T20:27:30.517
> 
> 标签：c++, for-loop, c++11

当我做这样的事情时：

```
int my_array[5] = {1, 2, 3, 4, 5};
for (int &x : my_array) {
    x *= 2;
} 
```

C++11 显然知道我的数组只有 5 个元素。此信息是否存储在 my_array 对象中的某个位置？

如果是这样，有什么好的理由不让我作为开发人员使用它（或者是它？！？！？）？如果 C++ 开发人员总是知道他们正在处理的数组的边界，那么世界上的许多问题似乎都会得到解决。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T20:28:47.107

这只是语言需要工作的东西，编译器必须实现。显然是的完整类型`my_array`（`int[5]`即大小是*类型*的一部分），因此这些信息很容易获得。

与流行的看法相反，*没有*使用 free `std::begin()`/`std::end()`函数，尽管那些似乎天真地似乎能够做到这一点（但有一个涉及 ADL 的问题会破坏这种方法）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T20:31:03.857

它是可用的 - 您可以在标准 C++ 中定义`begin`和`end`在数组上。数组的大小在类型中编码。

一般的方法是使用对数组的引用。

这是一个示例大小函数：

```
template<typename T, size_t N>
size_t array_size(T (& const)[N])
{
    return N;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T20:30:43.130

不，它不是对象的一部分。但它是类型的一部分。这就是`5`数组声明中的内容。但是，这不起作用：

```
void f(int arr[5]) {
    for(int& x: arr) {
        // whatever
    }
} 
```

因为这里的数组名衰减为指向其第一个元素的指针，即参数声明相当于`int *arr`没有大小信息。

# nano - Nano 2.0.6 - 以 Mac 格式保存文件

> ID：13368223
> 
> 赞同：7
> 
> 时间：2012-11-13T20:27:38.857
> 
> 标签：nano

任何想法如何以“Mac 格式”保存使用 Nano 编辑的文件？我在我的 Linux 机器上新保存的文件中不断收到 DOS 回车。当我转到“写出”文件时，我提供了底部菜单的屏幕截图：

MM Mac 格式？？？我看到保存时有保存选项，但不知道如何执行它们

![在此处输入图像描述](../Images/32f35bbd729e8c6ec29c30d6aa07f7b5.png)

MM Toggle 使用 Mac 格式

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-14T02:29:11.443

命令“MM”表示“alt M”。事实上，任何以“M”开头的命令都意味着 alt 键。一些键盘吞噬了 alt 键：在我的例子中，在 Macbook Pro Retina 上，“esc”后跟“M”是有效的。更多信息[在这里](http://www.nano-editor.org/dist/v2.2/nano.html)。

但是，由于您的屏幕截图显示`[DOS Format]`为当前选择，因此您真正想要的组合键是“alt D”（或“esc”后跟“D”）。这将关闭`[DOS Format]`，以便您使用默认的行尾字符 (ASCII 0xA) 保存文件。开启`[Mac Format]`只会给您带来一系列新问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-06T18:44:21.610

通常您既不想保存为 DOS 格式也不想保存为 Mac 格式。在 Linux 上，您应该更喜欢 Unix 格式，因此：

*   输入文件名
*   按`Enter`

并且该文件将使用默认的 Unix 行结尾（这是您在 Linux 上想要的）保存：

[https://unix.stackexchange.com/questions/396551/gnu-nano-2-dos-format-or-mac-format-on-linux?noredirect=1#comment707780_396551](https://unix.stackexchange.com/questions/396551/gnu-nano-2-dos-format-or-mac-format-on-linux?noredirect=1#comment707780_396551)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-13T20:29:15.837

不再有 Mac 格式。Mac OS X 是 UNIX。

# c - 绕过 softlockup_threshold

> ID：13368226
> 
> 赞同：0
> 
> 时间：2012-11-13T20:27:53.343
> 
> 标签：c, linux, module, linux-kernel, kernel

我开发了一个内核模块，它完成了一项繁重的工作，当然这需要时间。问题是模块使用 CPU 超过 20 秒，因此引发了 softlockup_threshold 的 BUG。

我的问题是，有没有办法绕过这个？即它可以篡改阈值吗？或者它可以强制调度并稍后继续其工作？（为了将定时器设置为 0）。

提前谢谢你，帕诺斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:12:52.490

使用新内核，您可以调整 /proc/sys/kernel/watchdog_thresh（我认为旧内核使用 /proc/sys/kernel/softlockup_thresh）。但不鼓励这样做，因为阻塞 20 秒意味着你的代码有问题，你应该让出 CPU，例如通过调用 cond_resched()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:46:11.630

您可以尝试让 CPU 一段时间，如果可以接受，那么您应该查看`schedule()`Theres a great article here about [Sleeping in the Kernel](http://www.linuxjournal.com/article/8144)

# python - 196 算法在函数中具有可选输入

> ID：13368227
> 
> 赞同：3
> 
> 时间：2012-11-13T20:27:56.750
> 
> 标签：python, function

我正在尝试做的事情：

1.  如果用户`return_length=True`在调用您的函数时指定，它应该返回一加算法达到回文数所需的步数。例如，输入 5280 和`return_length=True`，您的函数应返回 4（请注意，这是序列 [5280, 6105, 11121, 23232] 中的条目总数）。例如，输入 11，函数应该返回 1，因为它已经是一个回文数。

2.  如果用户没有指定`return_length`或指定`return_length=False`，你的函数应该返回算法终止的回文数。例如，输入为 5280，算法应返回 23232（整数，而不是字符串）。同样，输入 89 时，它应该返回整数 8813200023188。

196算法的一些背景：

取任何两位或更多的正整数，反转数字，并添加到原始数字。这是反向然后添加序列的操作。现在用这样得到的总和重复这个过程，直到得到一个回文数。这个过程可以快速为大多数整数生成回文数。例如，从数字 5280 开始产生序列 5280、6105、11121、23232。将算法应用于 1、2、3、... 的最终结果是 1、2、3、4、5、6、7 , 8, 9, 11, 11, 33, 44, 55, 66, 77, 88, 99, 121, ... (Sloane 的 A033865)。89 的值特别大，为 8813200023188。（来自[http://mathworld.wolfram.com/196-Algorithm.html](http://mathworld.wolfram.com/196-Algorithm.html)）

到目前为止我所拥有的：

```
def alg196(x, y = false):
   if y==False:
      while x == x[::-1]:
         x==x+x[::-1]
      return x
   else:
      seq = [x]
      while x == x[::-1]:
         x==x+x[::-1]
      seq.append(x)
   return seq 
```

我得到错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_36.py", line 10, in <module>
    exec compile(u"print _support_.syseval(python, u'alg196(34)', __SAGE_TMP_DIR__)" + '\n', '', 'single')
  File "", line 1, in <module>

  File "/sagenb/sage_install/sage-5.3-sage.math.washington.edu-x86_64-Linux/devel/sagenb-git/sagenb/misc/support.py", line 487, in syseval
    return system.eval(cmd, sage_globals, locals = sage_globals)
  File "/sagenb/sage_install/sage-5.3-sage.math.washington.edu-x86_64-Linux/local/lib/python2.7/site-packages/sage/misc/python.py", line 56, in eval
    eval(z, globals)
  File "", line 1, in <module>

  File "", line 3, in alg196

TypeError: 'int' object has no attribute '__getitem__' 
```

我不确定如何解决此问题或确切的错误。

获取一些信息以获得答案，我有这个新代码：

```
 def alg196(x, y = false):
if y==False:
    while str(x) == str(x)[::-1]:
       x=str(x)+str(x)[::-1]
    return x
else:
    seq = [x]
    while str(x) == str(x)[::-1]:
        x = str(x)+str(x)[::-1]
    seq.append(x)
return seq 
```

但是仍然没有得到回文数或回文数的序列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:33:03.513

`x[::-1]`不适用于数字：

```
>>> 42[::-1]
TypeError: 'int' object has no attribute '__getitem__' 
```

您需要将其转换为字符串，将其反转，然后将其转换回`int`：

```
>>> int(str(42)[::-1])
24 
```

* * *

其次，线

```
x==x+x[::-1] 
```

绝对什么都不做。不要混淆`=`和`==`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:39:44.397

像这样的东西：

```
def algo(r,ret_len=None):
   count=0
   while 1:
      r=str(r)
      if r==r[::-1]:
         break
      else:
         count+=1
         r=int(r)+int(r[::-1])
   return count+1 if ret_len else r

print (algo(5280,True))
print (algo(5280))
print (algo(89,True))
print (algo(89)) 
```

**输出：**

```
4
23232
25
8813200023188 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:34:20.127

您无法获得整数的“切片”。首先，您需要将其转换为字符串。 `x[::-1]`<-- 如果 x 是整数，则此操作是非法的。

顺便说一句，这最好写成几个函数——执行计算的函数，以及在特定约束下运行函数的函数，并接受 return_length=True 参数。

```
def reverse(n):
    return int(str(n)[::-1])

def is_palindrome(n):
    return str(n) == str(n)[::-1]

def alg196(n, return_length=False):
    results = [n]
    while not is_palindrome(results[-1]):
        results.append(n + reverse(n))
        n = results[-1]
    return results[-1] if not return_length else len(results) 
```

**编辑**

基于 Ashwini Chaudhary 的代码的稍快的变体。上面的版本会产生一个结果列表，如果你想对中间数字做一些事情，那就太好了。但是，我认为以下功能是可读性和速度之间的最佳折衷。我不知道他为什么开始`count=0`。

```
def alg196(n, return_length=False):
    count = 1
    while not is_palindrome(n):
        n = n + reverse(n)
        count += 1
    return count if return_length else n 
```

# jquery - ASP.NET 网站 - 如何为 Web 表单网站构建 Web 服务

> ID：13368230
> 
> 赞同：0
> 
> 时间：2012-11-13T20:27:59.410
> 
> 标签：jquery, asp.net, json

我有一个运行 .NET 4.0 的 ASP.NET Web 表单网站。我有一个简单的搜索页面，我想将过滤条件传递给将 JSON 返回到页面的 Web 服务。理想情况下，我将执行从 jQuery 到 Web 服务的 GET 请求。

使用 ASP.NET MVC，创建返回 JSON 的控制器操作非常简单，但是，我不知道如何在 ASP.NET Web 表单网站中执行此操作。如何在 ASP.NET Web 表单中创建返回 JSON 的 Web 服务，我可以通过 AJAX 简单地调用它？

只要给我JSON！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:06:39.840

很简单，看这个视频（它应该足以让你开始）：

[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-and-call-a-simple-web-service-in-aspnet](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-and-call-a-simple-web-service-in-aspnet)

并阅读：

[http://scriptionary.com/2011/03/25/returning-json-from-an-asp-net-web-service/](http://scriptionary.com/2011/03/25/returning-json-from-an-asp-net-web-service/)

# lucene.net - 扩展令牌流

> ID：13368231
> 
> 赞同：0
> 
> 时间：2012-11-13T20:28:07.383
> 
> 标签：lucene.net, token, lucene

我正在尝试将具有一个具有有效负载的术语的字段索引到文档中。由于唯一可以为我工作的 Field 构造函数需要一个 TokenStream，我决定从这个类继承并提供我需要的最基本的实现：

```
public class MyTokenStream : TokenStream
{
    TermAttribute termAtt;
    PayloadAttribute payloadAtt;
    bool moreTokens = true;
    public MyTokenStream()
    {
        termAtt = (TermAttribute)GetAttribute(typeof(TermAttribute));
        payloadAtt = (PayloadAttribute)GetAttribute(typeof(PayloadAttribute));
    }
    public override bool IncrementToken()
    {
        if (moreTokens)
        {
            termAtt.SetTermBuffer("my_val");
            payloadAtt.SetPayload(new Payload(/*bye[] data*/));
            moreTokens = false;
        }

        return false;
    }     
} 
```

索引时使用的代码：

```
 IndexWriter writer = //init tndex writer...

        Document d = new Document();
        d.Add(new Field("field_name", new MyTokenStream()));
        writer.AddDocument(d);
        writer.Commit(); 
```

以及在搜索过程中使用的代码：

```
 IndexSearcher searcher = //init index searcher
        Query query = new TermQuery(new Term("field_name", "my_val"));
        TopDocs result = searcher.Search(query, null, 10); 
```

我使用调试器来验证对 IncrementToken() 的调用实际上设置了 TermBuffer。我的问题是返回的 TopDocs 实例没有返回任何文档，我不明白为什么......实际上我是从 TermPositions 开始的（这给了我处理 Payload 的方法......），但它也没有给我任何结果。有人可以向我解释我做错了什么吗？我目前正在使用 Lucene .NET 2.9.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:41:10.987

设置 TermBuffer 后，您需要从返回 true `IncrementToken`，当您没有任何东西可以提供 TermBuffer 时，您会返回 false

# powershell - 模块范围的变量在没有显式赋值的情况下被更改

> ID：13368232
> 
> 赞同：2
> 
> 时间：2012-11-13T20:28:12.373
> 
> 标签：powershell, powershell-3.0

我对我遇到的一些可变范围行为感到很困惑。采取以下示例模块：

```
$script:intTemplate = 1

[xml]$script:xmlTemplate = @"
<test>
    <element>
    </element>
</test>
"@

function getvar {
    $myint = $script:intTemplate
    $myint++
    Write-output "Myint is $myint while intTemplate is $intTemplate"

    $myxml = $script:xmlTemplate
    $e = $myxml.CreateElement("MyChildElement")
    $myxml.SelectSingleNode("/test").AppendChild($e) |Out-Null
    $myxml.Innerxml.tostring()
    $script:xmltemplate.Innerxml.tostring()
} 
```

现在导入该模块正在运行`getvar`生成：

```
PS C:\Windows\system32> getvar
Myint is 2 while intTemplate is 1
<test><element></element><MyChildElement /></test>
<test><element></element><MyChildElement /></test> 
```

getvar 的进一步运行继续向 $xmlTemplate 添加越来越多的子元素，而 $intTemplate 保持不变。我不明白为什么 $myXml 并不总是从简单的测试/元素结构开始，更重要的是，脚本本地 $xmlTemplate 变量似乎正在发生变化，而 intTemplate 却没有。

任何有关弄清楚这里发生了什么的帮助将不胜感激。

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:35:26.790

据我了解，范围与您的问题无关，当您编写时，`$myInt=$script:intTemplate`您操纵了一个值，因此您复制了该值。当你写`$myxml = $script:xmlTemplate`你操作一个引用，所以复制一个引用，你使用相同的底层对象。试试看`$script:intTemplate += 1`。

# python - 如何在 reduce() 中引用整个数组？

> ID：13368236
> 
> 赞同：3
> 
> 时间：2012-11-13T20:28:28.537
> 
> 标签：python, functional-programming

我有的：

```
array = original_array[:]
result = reduce(lambda a,b: some_function(b,array), array) 
```

我想要的是：

我想摆脱 array = original_array[:] 语句。理想情况下，我会简单地将*reduce()中的**数组*参数替换为original_array[:]，但我也需要在 lambda 中使用它。有没有办法 从 lambda中引用*数组参数？*

 **以下不是可接受的解决方案，因为它为每个元素创建一个新的数组副本：

```
result = reduce(lambda a,b: some_function(b,original_array[:]), original_array[:]) 
```

我需要这样的东西：

```
result = reduce(lambda a,b: some_function(b,reduce_parameter), original_array[:]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:32:51.487

您可以将整个内容包装在另一个 lambda 中：

```
result = (lambda array: reduce(lambda a,b: some_function(b,array), array))(original_array[:]) 
```

但是我认为您的原始解决方案更可取，因为它更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:39:54.777

~~这是一种删除外部 lambda 的方法~~

 ~~```
result = reduce(lambda a,b,array=array[:]: some_function(b,array), array) 
```~~ 

~~*编辑：哎呀，误读了这个问题*~~

 ~~这当然假设您实际上需要复制数组，并且使用它是不够的

```
result = reduce(lambda a,b: some_function(b, array), array) 
```

此外，这是对 reduce 的错误使用——你没有使用`a`参数，所以`result`成立`some_function(array[-1], array)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:40:14.843

尝试：

```
result = reduce(lambda a,b, array=array: some_function(b,array), array) 
```~~**

# capistrano - 强制 capistrano 立即询问密码

> ID：13368238
> 
> 赞同：0
> 
> 时间：2012-11-13T20:28:44.963
> 
> 标签：capistrano

我有一个 cap 脚本，它在运行任何远程代码之前执行一些冗长的编译步骤。我希望能够在这一切发生时走开，但是一旦编译完成，它就会要求我输入远程服务器密码。有没有办法可以强制脚本立即询问密码，以便我可以让其余部分无人看管？

我知道我可以设置无密码 ssh 来完全避免密码提示，但我正在寻找一种方法，允许尚未设置无密码 ssh 的用户进行无人值守部署。

我觉得我在某处看到了一个简单的解决方案，但我无法找到正确的搜索词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:34:36.337

如果您通过`sudo`（也就是说，您有`set :use_sudo, true`）运行大多数命令，您可能可以通过挂钩来执行此操作`before "deploy", "ask_for_password"`，并创建一个任务“ask_for_password”并立即使用它来执行任何带有 的命令`sudo`，例如`sudo date`. Sudo 只会在第一次提示，然后大概有足够长的超时来完成部署。

如果这不起作用...

...我们谈论的是 capistrano——capistrano 一点也不简单。这是一个非常强大的工具，我不知道有人觉得它“简单”。

与其设置每个人都可以部署，不如设置一个主机，您可以让人们作为“部署者”之类的用户通过 ssh 进入，然后让它执行部署。

但是部署是一项非常重要的任务——不是每个人都应该能够做到，尤其是在生产环境中。我认为您最好安装有权部署在他们被允许部署到的服务器上的用户的无密码公钥（例如，更多的是测试而不是登台或生产）。

# c# - 将焦点放在文本框上，而另一个控件将焦点放在 mousemove 上

> ID：13368244
> 
> 赞同：0
> 
> 时间：2012-11-13T20:29:02.827
> 
> 标签：c#, .net, vb.net

> **可能重复：**
> [面板没有获得焦点](https://stackoverflow.com/questions/3562235/panel-not-getting-focus)

我有一个有点烦人的情况。我有一个在 a 中保存的 WinForm `PictureBox`（`Panel`所以如果图片超过了我的表单具有的特定大小限制，我可以使图片可滚动）。

现在，为了使用户能够使用 MouseWheel 在面板中滚动，我必须输入以下代码：

```
Private Sub MyPanel_MouseEnter(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyPanel.MouseEnter
    MyPanel.Focus()
End Sub 
```

这很好用，允许用户随意滚动图片。

现在，我的问题是我的表单上还有一个`textbox`我希望用户能够填写数据的表单。当用户单击文本框并将鼠标移到面板上时，挑战就出现了——这会使文本框失去控制并阻止用户键入。

我怎样才能最好地处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:08:52.257

Since I had to come up with some kind of a solution since this form is due for production, I coded up the following (which solved the problem), but if anyone has any better solutions, I'd love to hear them!!!

```
' Form-Level Variable stating whether the panel can take
' the focus away from the preceding control

Dim DontTakeAwayFocus As Boolean = False

Private Sub MyPanel_Click(sender As Object, e As EventArgs) Handles MyPanel.Click
  MyPanel.Focus()
End Sub

Private Sub MyPanel_MouseEnter(sender As Object, e As EventArgs) Handles MyPanel.MouseEnter
  If DontTakeAwayFocus Then Exit Sub
  MyPanel.Focus()
End Sub

Private Sub MyTxtBox_GotFocus(sender As Object, e As EventArgs) Handles MyTxtBox.GotFocus
  DontTakeAwayFocus = True
End Sub

Private Sub MyTxtBox_LostFocus(sender As Object, e As EventArgs) Handles MyTxtBox.LostFocus
  DontTakeAwayFocus = False
End Sub 
```

What this allowed me to do was that if the textbox had focus, then you had to click on the panel to take the focus away, otherwise, the panel still kept the same functionality.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:16:31.470

# 抢焦点？

考虑一下转移注意力是否真的是解决问题的正确方法。这很诱人，因为焦点/非焦点的区别是如此明显，而且看起来很容易。但它很快就会变成一团糟。

想象一下，您使用的第三方组件有时会在不应该的情况下窃取焦点。恼火的是，您会编写一些代码来重新获得焦点。问题解决了，不是吗？但现在有两个组件不恰当地窃取了焦点，而不是一个。而最终，用户将成为这场焦点战的受害者。

# 改为订阅`TextBox`事件

现在，您正在监听`Panel`. `Panel`让对事件做出反应的另一种方法`MouseWheel`是订阅表单上的适当事件`Textbox`，甚至订阅表单上所有控件的事件。

然后在您的处理程序中，检查鼠标是否在`Panel`. 如果是这样，请指示面板滚动。如有必要，不要忘记传播鼠标事件。

**编辑**

附加信息：

*   [活动](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousewheel.aspx)文件[_`MouseWheel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousewheel.aspx)
*   [订阅事件](http://www.codeproject.com/Articles/11014/How-to-route-events-in-a-Windows-Forms-application)的代码示例
*   [Windows 窗体中的事件处理](http://msdn.microsoft.com/en-us/library/aa983610%28v=vs.71%29.aspx)文档

希望这可以帮助。

# ios - RestKit 对象映射在 BOOL 的空 JSON 值上崩溃

> ID：13368249
> 
> 赞同：0
> 
> 时间：2012-11-13T20:29:23.180
> 
> 标签：ios, restkit

我有一些从服务返回的 JSON，有时对于一个布尔值的属性，它的值为 null 而不是 true/false；像这样：

```
"hide_locations" : null, 
```

我接收这个值的对象有一个属性：

```
@property (nonatomic, assign) BOOL hideLocations; 
```

我的映射配置如下：

```
RKObjectMapping *retVal = [RKObjectMapping mappingForClass:[self class]];
[retVal mapKeyPath:@"hide_locations" toAttribute:@"hideLocations"]; 
```

但是当我执行映射时，RestKit 0.10.3 在这条线上崩溃了：

```
[self.destinationObject setValue:value forKeyPath:attributeMapping.destinationKeyPath]; 
```

在 - (void)applyAttributeMapping:(RKObjectAttributeMapping *)attributeMapping withValue:(id)value

在 RKObjectMappingOperation.m 中出现以下错误：

2012-11-13 09:33:04.352 测试 [73816:5f03] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“[setNilValueForKey]：无法将 nil 设置为键 hideLocations 的值。”

对我来说，像这样成熟的框架并不能更优雅地处理这种情况似乎很奇怪，所以我不禁认为我配置了一些不正确的东西。我将不胜感激您可能拥有的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:00:44.450

null 在 JSON 中不是有效的布尔值，只有真和假，所以我认为你在 Objective-c 中的对象映射将其设为 BOOL 是错误的。您可能应该修复 json 以正确表示布尔值（然后您将不会有任何空值崩溃）或将 hide_locations/hideLocations 视为 NSString 并`[hideLocations boolValue]`在需要时在您的代码中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:15:56.753

不幸的是，RestKit 似乎不能很好地容忍这种输入。

到目前为止，我收到的针对此问题的最佳可用建议来自 RestKit 的 Blake Watters，他说：

> 您可能应该只`setNilValueForKey:`在目标对象上实现并适当地处理它。

所以，你有它，或者预先清理你的 JSON，或者反对调用`setNilValueForKey:`

参考：[https ://groups.google.com/forum/?fromgroups=#!topic/restkit/dlYVd0zCr3c](https://groups.google.com/forum/?fromgroups=#!topic/restkit/dlYVd0zCr3c)

# objective-c - 视图更改后视图属性重置

> ID：13368254
> 
> 赞同：0
> 
> 时间：2012-11-13T20:30:22.540
> 
> 标签：objective-c, ios, xcode

我一直在尝试使这项工作有一段时间没有机会，每次我从视图更改为视图时，视图的变量和内容都会重置为“默认”，例如，如果在视图中我更改了标签的文本字段默认“标签”为“你好”，然后更改视图，一旦我回到相同的视图，文本将再次为“标签”。

到目前为止，我解决这个问题的唯一方法是设置一个静态字符串，然后在 viewDidLoad 中将 Label.text 更改为字符串。我只知道这不是这样做的方法。我有一种预感，这与我如何从视图转换到视图有关（分配和启动等）

我目前的过渡方式：

```
FirstView.h:
@interface FirstView : Engine
@property(nonatomic, readwrite) MainGameDisplay *secondView;

FirstView.m:
@implementation FirstView

- (IBAction)StartGame:(id)sender 
{ 
    if (! self.secondView)
    self.secondView = [[MainGameDisplay alloc] initWithNibName:nil bundle:nil];
    [self presentViewController: self.secondView animated:YES completion:NULL];
} 
```

和 MainGameDisplay：

```
MainGameDisplay.h:
@class ViewController;

@interface MainGameDisplay : Engine
@property (strong) ViewController *firstPage;

MainGameDisplay.m:
@implementation MainGameDisplay

- (IBAction)returnToHome:(id)sender {
    if (!self.firstPage)
        self.firstPage = [[ViewController alloc] initWithNibName:nil bundle:nil];
        [self presentViewController: self.firstPage animated:YES completion:NULL];
} 
```

我想要的是不必通过 viewDidLoad 再次设置所有值，我只是无法将其视为一种好的编程风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:40:06.717

你对出了什么问题的怀疑是对的。尽管您调用了您的方法`returnToHome:`，但您并没有真正返回任何地方，而是`ViewController`在您已经拥有的任何东西之上堆叠了一个新副本。

要真正回去，相反的`presentViewController:`是`dismissViewControllerAnimated:`。`MainGameDisplay`当按下按钮返回时，尝试在课堂上使用它。

# jquery - 点击事件后加载javascript文件

> ID：13368255
> 
> 赞同：0
> 
> 时间：2012-11-13T20:30:22.403
> 
> 标签：jquery, ajax, jquery-plugins, click

我正在尝试在单击事件后加载富文本插件（NicEdit）。该插件有两个部分：

```
<script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
<script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script> 
```

当我尝试按如下方式在单击事件之前加载文件时，它可以工作

```
$(document).ready(function() {
    $.getScript('http://js.nicedit.com/nicEdit-latest.js', function(jd) {
      // Call custom function defined in script
          bkLib.onDomLoaded(function() { nicEditors.allTextAreas()
        });
     $("a").click(function(event));
    });
}); 
```

但是，我需要它在单击事件之后加载，因此它也适用于我加载的 innerHTML 页面。

编辑

```
$(document).ready(function() {    
    $('a').on('click', function(ev) {
        ev.preventDefault();
        var url = $(this).attr('href');
        $.getScript("https://s3.amazonaws.com/RichText-javascript/nicEdit.js",function(){
        $('.answers').load(url);
     });//getscript ends
   });//click handler ends
});//doc ready ends 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:39:34.400

我希望您的实际代码中没有拼写错误，以下应该可以工作

```
$(document).ready(function() {    
    $('a').click(function(ev) {
        ev.preventDefault();
        var url = $(this).attr('href');
        $.getScript("http://js.nicedit.com/nicEdit-latest.js",function(){
         //you can use the loaded js script here in the callback
        $('.innerHTML').load(url, function(response){
             //load calback
        });//load ends
     });//getscript ends
   });//click handler ends
});//doc ready ends 
```

[演示](http://jsfiddle.net/kv4ZN/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:33:41.503

尝试 .on() ...它取代 .live() 并且将运行 .click() 无论何时加载代码，之前或之后。

```
$(parent).on("click","a", function(ev){

}); 
```

编辑——正如 RoXon 指出的那样..这只有在绑定到父母时才有效。

# ios - Xcode 验证在 iTunes Connect 中找不到应用程序

> ID：13368256
> 
> 赞同：11
> 
> 时间：2012-11-13T20:30:31.357
> 
> 标签：ios, xcode, app-store

我在 iTunes Connect 中添加了一个新应用程序，其状态为“准备上传”，并在 Xcode 中为它创建了存档，并使用分发配置文件将“App Store”指定为分发方法。当我尝试验证它时，我得到：

> 没有找到申请记录。
> 
> 应用程序必须准备好上传到 iTunes Connect，然后才能在 Xcode 中进行验证或提交。

我已经检查了`CFBundleIdentifier`存档中的`Info.plist`内容，以确保它与我在 iTunes Connect 记录中使用的匹配，确实如此。除了验证过程用于匹配 iTunes Connect 中的应用程序条目的捆绑标识符之外，还有其他任何东西吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-13T20:41:56.430

这是因为您的应用程序处于“准备上传”状态。您必须在 itunesconnect 上单击应用页面上的以下按钮，将其状态更改为“准备上传二进制文件”。它在右上角。
![在此处输入图像描述](../Images/53116f7cfdc212454162ef8b38371630.png)

然后再试一次。

# python - 在python中从屏幕中提取文本

> ID：13368259
> 
> 赞同：5
> 
> 时间：2012-11-13T20:30:34.577
> 
> 标签：python, screen

是否有用于从*png*位图屏幕截图中提取文本的库等？

它适用于自动化程序，并且（例如）能够读取按钮等。我已经检查过 Tesseract，但它似乎是为图片制作的，而不是为电脑屏幕字体制作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:42:23.140

如果您正在处理少量可能的匹配项（即：您想识别两个或三个不同的按钮），最简单的方法是隔离之前屏幕截图中的那些，将它们保存到单独的文件中，然后使用某种形式的模板匹配，这[在 opencv 中很容易](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)。

但是，如果您需要实际执行按钮文本的*识别*，您将需要一个 OCR 引擎。Tesseract 是一个很好的候选者，如果你可以[为你的字体训练](https://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3)它（这是一个漫长的过程）。正如您所提到的，如果您正在处理一种小字体，您将*需*要这样做，而 tesseract 最初没有经过训练来识别。如果你不能，还有其他几个可以在 python 中使用的引擎，比如[Ocropus](https://code.google.com/p/ocropus/)

# expressionengine - 使用 .htaccess 在 EE 2 中删除模板组和页面 URI 的一部分？

> ID：13368260
> 
> 赞同：2
> 
> 时间：2012-11-13T20:30:34.960
> 
> 标签：expressionengine

自从我第一次遇到这个问题以来，它已经有所扩展，因为事实证明页面 URI 的重写也受到了影响。因此，我重写了我的原始帖子以反映这一点。

我最近将我的网站从 EE 1 升级到 EE 2，它似乎导致我的一些 .htacess 重写以更改 URL 结构不再起作用。

我原来的设置是这样的：

```
RewriteRule ^/?((403|404|About|Chat|Contact|Copyright|Search)(/.*)?)$ /Westeros/$1 [L]
RewriteRule ^/?((ASoIaF|Digest|Images|Login|Store|Updates|Westeros|member)(/.*)?)$ /index.php/$1 [L] 
```

我也试过这个：

```
RewriteRule ^/?((403|404|About|Chat|Contact|Copyright|Search)(/.*)?)$ /index.php/Westeros/$1 [L]
RewriteRule ^/?((ASoIaF|Digest|Images|Login|Store|Updates|member)(/.*)?)$ /index.php/$1 [L] 
```

在这两种情况下，有一些不同的事情正在发生，有些工作，有些没有。

1) [http://www.westeros.org/Updates/](http://www.westeros.org/Updates/)工作正常。更新是一个模板组。2) [http://www.westeros.org/Search/](http://www.westeros.org/Search/)不起作用。搜索是维斯特洛模板组中的一个模板。[可以通过http://www.westeros.org/index.php/Westeros/Search/](http://www.westeros.org/index.php/Westeros/Search/)访问它。3) [http://www.westeros.org/About/](http://www.westeros.org/About/)不起作用。About 是一个页面，其 URI 设置为 /Westeros/About/。[可以通过http://www.westeros.org/index.php/Westeros/About/](http://www.westeros.org/index.php/Westeros/About/)访问它。

我想 EE 1 和 EE 2 之间的 URL 处理发生了一些内部变化，但我不太明白它是如何阻止这些重写发生的。重写不是完成的第一件事，所以 EE 不应该看到重写的 URL 而不是别的吗？我用[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)进行了测试， .htaccess 正确地重写了 URL。但 EE 似乎并没有意识到这一点。

但是，从评论中发布的使用 Pixel & Tonic 提供的方法的建议来看，写出模板组在 EE 2 中仍然有效。我只是不明白为什么我的设置不起作用，如果他这样做，我也不知道如何使他的例子适应我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:20:51.613

我自己在这里为 EE2 使用了 Brandon 的示例：http: [//pixelandtonic.com/blog/making-pt-structure](http://pixelandtonic.com/blog/making-pt-structure)

# asp.net-mvc - Kendo MVC Grid：创建自定义命令按钮并传递参数

> ID：13368269
> 
> 赞同：10
> 
> 时间：2012-11-13T20:30:58.157
> 
> 标签：asp.net-mvc, telerik, grid, kendo-ui

我正在尝试创建一个自定义命令按钮来触发自定义删除功能。我需要将模型的 ID 传递给我的自定义删除函数。您会注意到我正在尝试传递静态“5”作为测试，但我想传递行的 ID。

任何帮助将不胜感激。

```
@(Html.Kendo().Grid(Model)
.Name("Grid")
.Columns(columns =>
{
    columns.Bound(p => p.Name).Width(240);
    columns.Bound(p => p.City).Width(170);
    columns.Bound(p => p.State).Width(170);
    columns.Command(command =>
    {
        command.Edit();
        command.Custom("Delete").Click("PropertyPage.DeleteProperty").HtmlAttributes(new { @Id = 5 });
        }).Width(166);
    })
    .Scrollable()
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model => model.Id(p => p.Id))
        .Read(read => read.Action("PropertyRead", "Property"))
        .Update(update => update.Action("Update", "Property"))
        .Destroy(update => update.Action("Delete", "Property"))
)) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T20:14:03.770

这应该发送指定的任何数据键：

```
command.Custom("Delete").SendDataKeys(true).Click("PropertyPage.DeleteProperty"); 
```

DataKeys 在 DataSource 部分中指定：

```
 .DataSource(dataSource => dataSource
    .Ajax()
    .Model(model => model.Id(p => p.Id))  // THIS IS YOUR DATA KEY
    .Read(read => read.Action("PropertyRead", "Property"))
    .Update(update => update.Action("Update", "Property"))
    .Destroy(update => update.Action("Delete", "Property")) 
```

我还在 Kendo 的网站上找到了这个页面。当我遇到类似问题时，它帮助了我： [http ://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/migration/widgets/grid#editing](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/migration/widgets/grid#editing)

希望这可以帮助！

# c# - C# 控制台应用程序中未处理的异常导致 AppCrash

> ID：13368272
> 
> 赞同：2
> 
> 时间：2012-11-13T20:31:07.630
> 
> 标签：c#, exception, error-handling, unhandled-exception

我有一个在 Visual Studio 2010 中构建的 Windows 控制台应用程序，它一直在崩溃，但是 Visual Studio 调试工具和我的代码中的 try/catch 语句都没有捕获到错误。

我已设法在我的系统上找到 WER 文件，并希望能够理解文件的内容，以便准确查明导致未处理异常的原因。

如果有人能提供一些关于如何使用以下信息来定位导致我这个问题的过程以及异常可能是什么的想法，我将非常感激......

WER 文件中的信息是：

```
Version=1
EventType=APPCRASH
EventTime=129973086237604286
ReportType=2
Consent=1
ReportIdentifier=91331e8b-2dc8-11e2-977b-080027f7e5bb
IntegratorReportIdentifier=91331e8a-2dc8-11e2-977b-080027f7e5bb
WOW64=1
Response.type=4
Sig[0].Name=Application Name
Sig[0].Value=SAGE_TESTING.vshost.exe
Sig[1].Name=Application Version
Sig[1].Value=10.0.30319.1
Sig[2].Name=Application Timestamp
Sig[2].Value=4ba2084b
Sig[3].Name=Fault Module Name
Sig[3].Value=ntdll.dll
Sig[4].Name=Fault Module Version
Sig[4].Value=6.1.7600.16385
Sig[5].Name=Fault Module Timestamp
Sig[5].Value=4a5bdb3b
Sig[6].Name=Exception Code
Sig[6].Value=c015000f
Sig[7].Name=Exception Offset
Sig[7].Value=000845bb
DynamicSig[1].Name=OS Version
DynamicSig[1].Value=6.1.7600.2.0.0.272.7
DynamicSig[2].Name=Locale ID
DynamicSig[2].Value=2057
DynamicSig[22].Name=Additional Information 1
DynamicSig[22].Value=0a9e
DynamicSig[23].Name=Additional Information 2
DynamicSig[23].Value=0a9e372d3b4ad19135b953a78882e789
DynamicSig[24].Name=Additional Information 3
DynamicSig[24].Value=0a9e
DynamicSig[25].Name=Additional Information 4
DynamicSig[25].Value=0a9e372d3b4ad19135b953a78882e789 
```

这是我认为导致抛出异常的代码部分：

```
//Data from the project linked to the split data
if (oSplitData.Project != null)
{
    oProject = oSplitData.Project as SageDataObject190.Project;

    oBasicDetail.ProjectID = oProject.ProjectID;
    oBasicDetail.ProjectReference = oProject.Reference.ToString();
}
else
{
    oBasicDetail.ProjectID = -1;
    oBasicDetail.ProjectReference = "NO_PROJECT";
} 
```

除了以上所有内容之外，我似乎发现有一个一般性异常被抛出，但它对我没有多大帮助 - 如果有人能对此有所了解，那就太好了：

```
Unhandled exception at 0x78bc7361 in SAGE_TESTING.exe: 0xC0000005: Access violation reading location 0xfeeefeee. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:37:16.393

如果您的程序是多线程的并且异常是在生成的线程之一中引发的，则可能不会捕获异常，具体取决于您在程序中进行异常处理的方式。

您可以像这样添加一个包罗万象的异常处理程序：

```
class Program 
{
    static void Main(string[] args) 
    {
        AppDomain.CurrentDomain.UnhandledException += UnhandledExceptionHandler;
        // Your code here
    }

    static void UnhandledExceptionHandler(object sender, UnhandledExceptionEventArgs e) 
    {
        Console.WriteLine(e.ExceptionObject.ToString());
        Environment.Exit(1);
    }
} 
```

**更新**

根据您发布的代码，这里有一些要查看的内容

*   在您发布的代码周围放置一个 try/catch 块。
*   您确定*oSplitData*不为空吗？
*   在以下行中，如果 oSplitData.Project 不是 SageDataObject190.Project 类型，则 oProject 将为*空。*测试*null*。

    oProject = oSplitData.Project 作为 SageDataObject190.Project;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:53:38.447

您是在调用非托管 C++ 或其他代码吗？

我会尝试类似的东西

```
static void Main()
{
  try
  {
    DoSomethingUseful() ;
  }
  catch ( Exception e )
  {
    // managed exceptions caught here
  }
  catch
  {
    // non-managed C++ or other code can throw non-exception objects
    // they are caught here.
  }
  return ;
} 
```

请参阅[CLR 会同时处理 CLS 投诉和非 CLS 投诉异常吗？](https://stackoverflow.com/questions/1531077/will-clr-handle-both-cls-complaint-and-non-cls-complaint-exceptions)

还有 C++ 在 msdn 上的 try、catch 和 throw 语句：http: [//msdn.microsoft.com/en-us/library/6dekhbbc (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6dekhbbc(v=vs.100).aspx)

并且 MSIL 操作码`throw`(0x7A) 允许抛出任何对象引用。但是，C# 不允许这样做。

但看起来他们使用 .Net 2.0 改进了一些东西，并开始将古怪的东西包装在 .Net 2.0 中`RuntimeWrappedException`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:27:53.680

您可能正在处理所谓的损坏状态异常。这些异常以某种方式破坏进程，因此杀死进程通常更安全，因为很难从这样的错误中恢复，即使它只是为了运行一个简短的 catch 子句。例如 StackOverflowExceptions、OutOfMemoryExceptions 或 AccessViolationExceptions。

[本文](http://msdn.microsoft.com/en-us/magazine/dd419661.aspx)对损坏状态异常进行了广泛且普遍有趣的解释。

帮助处理此类异常的方法是使用 DebugDiag。使用 Microsoft 提供的此工具（[在此页面上下载](http://www.microsoft.com/en-us/download/details.aspx?id=26798)），您可以定义一个崩溃规则，该规则会为您的失败进程生成崩溃转储。您可以在 Visual Studio 中轻松打开这些转储文件，您可以在其中找到导致失败的异常源。这不能保证，但过去它经常帮助我确定一些令人讨厌的错误。

# css - 指定一个宽度为 100% 的 div 和一些填充？

> ID：13368273
> 
> 赞同：0
> 
> 时间：2012-11-13T20:31:09.843
> 
> 标签：css, html

基本上我有一个带有这个 CSS 的 div：

```
.mydiv{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    padding:7px;   
}​ 
```

由于填充，浏览器显示水平（宽度 100% + 7px）
看看这里：http: [//jsfiddle.net/3FrLq/](http://jsfiddle.net/3FrLq/)

我怎样才能让那个 div 不显示水平条？（无需在里面添加另一个 div？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T20:33:32.717

去掉`width:auto`并将其替换为`right:0`.

**[jsFiddle 示例](http://jsfiddle.net/j08691/3FrLq/1/)**

由于您的元素是绝对定位的，因此您实际上可以将左侧和右侧拉到元素容器的边缘，而无需调用滚动条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:38:39.387

正确的 HTML 语义几乎要求您在其中有另一个元素。在这种情况下，您的文本应该包含在`<p>`标签中。

这样做会自动给你一些东西来设置`margin`或`padding`内部元素。

也就是说，如果您*真的*不能/不会有内部元素，请删除您的`width`和 set `right: 0`。绝对定位元素的妙处在于，如果将相对位置设置为 0，则可以“拉伸”元素（它也适用于顶部/底部）。

或者，如果您的元素没有绝对定位，您可以更改您的`width: 100%`to `max-width: 100%`（或添加该`max-width`行，以处理旧版本 IE 中的错误，如果您必须返回那么远），这将硬盖总宽度。这个在这里起作用 - [http://jsfiddle.net/3FrLq/5/](http://jsfiddle.net/3FrLq/5/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T20:42:09.877

您可以使用 box-sizing:border-box CSS 属性，它将从元素的实际宽度和高度中排除填充和边框：

```
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border -box; 
```

这是小提琴：http: [//jsfiddle.net/3FrLq/3/](http://jsfiddle.net/3FrLq/3/)

更多信息/浏览器对 box-sizing 的支持： [https ://developer.mozilla.org/en-US/docs/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T20:34:42.080

您可以将 div 设置为显示`inline-block`：

```
.mydiv{
    display: inline-block;
    position:absolute;
    top:0;
    left:0;
    width:100%;
    padding:7px;   
}​ 
```

这将显示它内联（不水平拉伸），同时允许您仍然将填充和边距应用于顶部和底部（不像`display: inline`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T20:37:24.477

摆脱宽度指定＆只指定`0px`; 适用于所有 4 面

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T20:38:30.580

*   如果 IE8+ 的兼容性足够你，你可以使用[`box-sizing`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing).
*   如果您希望它仅在全宽下工作，请将`left`&设置`right`为`0`，但不要设置 a `width`。

# html - 自动换行而不破坏单词

> ID：13368274
> 
> 赞同：4
> 
> 时间：2012-11-13T20:31:12.003
> 
> 标签：html, email, css, word-wrap

我一直在使用 Web 服务器发送 HTML 格式的电子邮件，到目前为止一切都很好（内容和所有显示都很好），除了自动换行。单行文本（用户输入）可以持续不断，并在流行的电子邮件 Web 客户端上产生水平滚动条。

所以我去做了一些研究。我实施`<div style="width: 100%; word-break: break-word;"><!-- Content here --></div>`了它，它工作得非常好，*除了*它开始切断我的话。我想做的是让他们进入下一行，同时保留自动换行。

其他在线消息来源说该`<div>`标签确实会自动换行，但在 Web 客户端中它不能以这种方式工作。我猜这可能是由于一些幕后的 CSS，但我并没有真正去调查。

有人对我的问题有任何解决方案/建议吗？我不想做服务器端格式化；首先，我认为这很麻烦，其次，我认为不同的网络电子邮件客户端看起来会有所不同...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:32:54.057

尝试添加这个附加属性：

```
white-space: pre-line;
word-wrap: break-word; 
```

有关可能值的解释，请参阅此参考：http: [//www.w3schools.com/cssref/pr_text_white-space.asp](http://www.w3schools.com/cssref/pr_text_white-space.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:03:15.800

这确实是阻止正常包装的幕后东西。我们真的需要看到幕后，或者至少在幕后，以分析情况，但在一个简单的情况下，添加这个 CSS（在`div`）应该会有所帮助：

```
white-space: normal; 
```

这是初始值，但可能被某些东西覆盖。如果这没有帮助，请尝试

```
white-space: normal !important; 
```

避免`word-break: break-word`，因为它确实会破坏单词，顾名思义。它适用于允许在任何地方休息的书写系统。

# visual-studio-2010 - Visual Studio中的并行调试，没有标准输出

> ID：13368275
> 
> 赞同：1
> 
> 时间：2012-11-13T20:31:15.010
> 
> 标签：visual-studio-2010, debugging, parallel-processing, output

我正在尝试将 Visual Studio 2010 上的并行调试器用于使用 MPI 用 C 编写的项目。我使用我在 VS 2008 中设置它的指令来设置它，我知道这很有效，但是当我运行时，我看不到屏幕上的输出。每个进程仍然会遇到断点，我可以单步执行代码，一切似乎都处理得很好，但是没有一个标准输出（即 printf 语句）打印到屏幕上。2008年从来没有这个问题，我不知道如何解决它。任何帮助表示赞赏。

# linux - 多个音频文件的 Sox 和音高变化

> ID：13368283
> 
> 赞同：4
> 
> 时间：2012-11-13T20:32:17.493
> 
> 标签：linux, bash, debian, sox

我想使用 sox 更改我拥有的每个音乐文件夹中每个 mp3 的音高。我在 bash 中写了这个：

```
function pitch_mp3 {
for mp3 in /home/mp3s/*/*.mp3 
do 
  cd "$(dirname "$mp3")"
  output=$(basename "$mp3" .mp3)PITCHED.mp3
  sox -S "$mp3" -C 192 "$output" pitch 50
done
} 
```

例如，它将音高添加到 01song.mp3，输出文件为 01songPITCHED.mp3。但发生的情况是 sox 第一次完成这项工作，然后再次循环浏览文件夹并将音高添加到已经音高的 mp3-s，因此它们的文件名原来是 01songPITCHEDPITCHED.mp3。当我注意到时我停止了它，所以我不知道它是否会第三次添加音高等等。

为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:46:33.783

如果您只想跳过任何以`PITCHED.mp3`I 结尾的文件，请使用 case 语句

```
case "$mp3" in
  *PITCHED.mp3)
    echo skipping "$mp3"
    ;;
  *)
    #repitch as before
    ;;
esac 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T23:52:57.703

```
function pitch_mp3 {
for mp3 in /home/mp3s/*/*.mp3 
do 
  [[ "$mp3" = *PITCHED.mp3 ]] && continue
  cd "$(dirname "$mp3")"
  output=$(basename "$mp3" .mp3)PITCHED.mp3
  sox -S "$mp3" -C 192 "$output" pitch 50
done
} 
```

我还将扩展名设置为变量，因此我不必重新输入它，但这只是我。

# groovy - groovy 类中的“def Type”声明

> ID：13368288
> 
> 赞同：1
> 
> 时间：2012-11-13T20:32:40.070
> 
> 标签：groovy

突然发现我可以写了

```
class Person {
     def String name
} 
```

我的问题是 - 上面提供的代码和经典代码有什么区别：

```
class Person {
   String name
} 
```

为什么第一种形式甚至存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:42:53.097

没有区别。添加`def`到类型定义的开头没有任何作用。但是，解析器允许这样做。

检查此类内容的一种方法是启动 groovyConsole，然后运行 ​​AST 浏览器（用于脚本）

```
class Person {
     def String name
} 
```

显示：

```
public class Person extends java.lang.Object { 

    private java.lang.String name 

} 
```

# ruby - 编码 Ruby - 两台机器上的不同行为

> ID：13368290
> 
> 赞同：2
> 
> 时间：2012-11-13T20:32:45.143
> 
> 标签：ruby, unicode, raspberry-pi

我正在尝试运行一个在删除变音符号的函数内部使用的 ruby​​ 脚本：

```
def remove_diacritics(text)
return text.tr!(
"ÀÁÂÃÄÅàáâãäåĀāĂăĄąÇçĆćĈĉĊċČčÐðĎďĐđÈÉÊËèéêëĒēĔĕĖėĘęĚěĜĝĞğĠġĢģĤĥĦħÌÍÎÏìíîïĨĩĪīĬĭĮįİıĴĵĶķĸĹĺĻļĽľĿŀŁłÑñŃńŅņŇňŉŊŋÒÓÔÕÖØòóôõöøŌōŎŏŐőŔŕŖŗŘřŚśŜŝŞşŠšſŢţŤťŦŧÙÚÛÜùúûüŨũŪūŬŭŮůŰűŲųŴŵÝýÿŶŷŸŹźŻżŽž",
"AAAAAAaaaaaaAaAaAaCcCcCcCcCcDdDdDdEEEEeeeeEeEeEeEeEeGgGgGgGgHhHhIIIIiiiiIiIiIiIiIiJjKkkLlLlLlLlLlNnNnNnNnnNnOOOOOOooooooOoOoOoRrRrRrSsSsSsSssTtTtTtUUUUuuuuUuUuUuUuUuUuWwYyyYyYZzZzZz")
end 
```

我一`# encoding: utf-8`开始就有魔力，但我有一些奇怪的行为。它适用于 Mac，但是当我将完全相同的文件复制到 Raspberry Pi 时，我收到此错误：

> remove_diacritics.rb:28:in `tr!': 不兼容的字符编码：US-ASCII 和 UTF-8 (Encoding::CompatibilityError)

这似乎是帮助论坛中的经典之作。令人着迷的是，它确实在一台机器上工作，而在另一台机器上却不行，即使 Ruby 的版本完全相同，ruby 1.9.3p286（2012-10-12 修订版 37165）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:43:37.377

正如弗雷德里克指出的那样。`(en)coding:`注释确定*源编码，但错误是由于与**外部*编码不匹配造成的。您的代码在运行时会产生 CompatibilityError

```
LANG=C ruby encoding.rb 
```

但适用于其中任何一个

```
LANG=cs_CZ@UTF-8 ruby         encoding.rb
LANG=C           ruby -EUTF-8 encoding.rb 
```

请参阅[Ruby 1.9 的三种默认编码](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)，这是解释 Ruby 1.8 和 1.9 中 Unicode 情况的精彩系列的一部分。

# actionscript-3 - AS3：错误 1009：空引用

> ID：13368300
> 
> 赞同：0
> 
> 时间：2012-11-13T20:33:10.430
> 
> 标签：actionscript-3, reference, null

我正在使用 ActionScript 3 制作游戏。我有一个菜单类，其中包含一个呈现菜单的方法。我在 Main 类中创建了一个 Menu 实例，然后调用该方法。当我调试应用程序时，我得到一个空引用错误。这是菜单类的代码：

```
package
{
import flash.display.MovieClip;

import menucomponents.*;

public class Menu extends MovieClip
{
    public function Menu()
    {
        super();
    }

    public function initMenuComponents():void{
        var arrMenuButtons:Array = new Array();

        var btnPlay:MovieClip = new Play();
        var btnOptions:MovieClip = new Options();
        var btnLikeOnFacebbook:MovieClip = new LikeOnFacebook();
        var btnShareOnFacebook:MovieClip = new ShareOnFacebook()

        arrMenuButtons.push(btnPlay);
        arrMenuButtons.push(btnOptions);
        arrMenuButtons.push(btnLikeOnFacebbook);
        arrMenuButtons.push(btnShareOnFacebook);

        var i:int = 0;

        for each(var item in arrMenuButtons){
            item.x = (stage.stageWidth / 2) - (item.width / 2);
            item.y = 100 + i*50;
            item.buttonMode = true;

            i++;
        }
}
}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:08:36.603

您的问题可能是当您的 for 循环运行时该阶段尚未填充。尝试以下操作：

```
public class Main extends MovieClip { 
    public function Main() { 
        super(); 
        var menu:Menu = new Menu(); 

        //it's good practice - as sometimes stage actually isn't populated yet when your main constructor runs - to check, though in FlashPro i've never actually encountered this (flex/flashBuilder I have)
        if(stage){
            addedToStage(null);
        }else{
            //stage isn't ready, lets wait until it is
            this.addEventListener(Event.ADDED_TO_STAGE,addedToStage);
        }
    } 

    private function addedToStage(e:Event):void {
        menu.addEventListener(Event.ADDED_TO_STAGE,menuAdded); //this will ensure that stage is available in the menu instance when menuAdded is called.
        stage.addChild(menu); 
    }

    private function menuAdded(e:Event):void {
        menu.initMenuComponents(); 
    }
} 
```

# wcf - Silverlight ClientHttp 堆栈/windows 身份验证/和 RIA 服务问题（我猜这是一个 cookie 问题）

> ID：13368302
> 
> 赞同：0
> 
> 时间：2012-11-13T20:33:18.010
> 
> 标签：wcf, silverlight, wcf-ria-services, ria

我正在研究如何获取状态码 500 错误消息，以便在这些错误消息发生时为我提供更多信息，并在有关使用 ClientHttp 堆栈的 MSDN 帖子中发生。在应用程序部署在登台服务器上之前，这一切看起来都是如此神奇现在似乎通​​过身份验证完全失败

我猜这是由于整个 cookie 问题，因为它与 ClientHttp 堆栈有关......我正在使用 RIA 服务，当应用程序启动时，它运行 3 或 4 个 RIA WCF 服务调用，在后台预加载数据，现在使用新的 ClientHttpStack 几乎每次发出请求时都会弹出一个身份验证对话框。我们正在使用 Windows 身份验证，因此在它只是让您进行身份验证以访问为 XAP 文件提供服务的页面之前...但是现在您使用 Win Auth 登录，然后所有后续调用都会重复询问您的凭据...

我假设我可以解决这个问题的唯一方法是这样做 [http://msdn.microsoft.com/en-us/library/dd920298(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd920298(v=vs.95).aspx)

然后可能会在 DomainClient 上添加一个端点行为，以便在处理请求之前它会在 cookie 上添加...

我已经尝试了一段时间，但我并没有真正成功......当我在 FF 或 Chrome 中运行应用程序时，它仍然会弹出一大堆登录框。所以我只是好奇我是在叫错树还是我应该继续试图找出我没有完全传播cookies的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:05:19.720

如果您使用 ClientHttp 堆栈，您将需要一个地方来存储您的 cookie 客户端，例如 HttpCookieContainer。这只是插入到 ClientHttp 堆栈中的 wcf 行为。
请看一下 Kile McClellan 的这篇[文章](http://blogs.msdn.com/b/kylemc/archive/2010/05/14/ria-services-authentication-out-of-browser.aspx)，看看它是否对你有帮助。

# r - R：Linux 上的 readBin 和 writeBin

> ID：13368303
> 
> 赞同：0
> 
> 时间：2012-11-13T20:33:23.467
> 
> 标签：r, file-io

我想以二进制格式写入（然后检索）数据。我试图让一个最小的例子至少工作到气味测试的水平（读取输入应该看起来像书面输出），但我没有得到它，并且始终正确。我的机器是带有小端序的 linux，但由于这里是恒定的，所以我在调用中省略了它。我也不确定是否最好`size`在写入中指定参数，或者将其省略。无论如何，加载的输入看起来不像`out`：

```
out<-seq(1,50,2)

##write
write<-file('~/output.txt','wb')
writeBin(out,con=write,size=4)
close(write)

##read
read<-file('~/output.txt','rb')
readBin(con=read,what=numeric(),n=length(out))
# [1] 3.200001e+01 3.276801e+04 1.048576e+06 1.677722e+07 1.006633e+08 4.026532e+08     1.610613e+09 6.442452e+09 1.503239e+10 3.006478e+10 6.012955e+10 1.202591e+11
close(read) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T20:56:47.753

这是一个工作示例：

```
R> dat <- seq(1,50,2)
R> dat
 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49
R> 
```

我们只是将对象写入二进制连接——省略第三个参数：

```
R> con <- file("/tmp/foo.bin", "wb")
R> writeBin(dat, con)
R> close(con)
R> 
```

然后可以回读：

```
R> con <- file("/tmp/foo.bin", "rb")
R> dat2 <- readBin(con, what="numeric", n=length(dat))
R> dat2
 [1]  1  3  5  7  9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49
R>
R> all.equal(dat, dat2)
[1] TRUE 
```

但是，您需要存储长度。我使用了一种内部文件格式，它首先写入关于行、列、“格式号”的固定（已知）数量的整数，......然后读/写总共行*列数字。我们还将它包装到一个 gzip 文件连接中。

您甚至可以将其概括为在数据框中写入列——但如果 R​​ 是您唯一的读取器/写入器，那么已经存在的序列化 via`save()`会更好。

# qt - 我需要为 Qt5 添加哪些环境变量 PATH 才能识别包括

> ID：13368306
> 
> 赞同：4
> 
> 时间：2012-11-13T20:33:33.493
> 
> 标签：qt, environment-variables, qt5

我需要添加哪些环境变量 PATH 才能让 Qt5 识别包含？

*   我已经添加了“C:\qt5\2012.11\qtbase\bin 和 C:\qt5\2012.11\qtbase\lib”。

我使用 VS2012 命令提示符构建[Qt5Sdk](http://qt.gitorious.org/qtsdk)并且可以正常工作，但无法识别

> 包括 QtGui/QApplication，
> 
> 包括 QFileDialog

还有更多……它确实承认

> 包括QGui

.

也许VS2012构建不顺利？

*   顺便说一句，在 Windows7 中，INCLUDE、LIB 和 LIBPATH 在哪里，因为我可以看到我可以从 Qt 设置它们，但是当输入 Windows 7 环境变量时，只有 PATH？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T19:05:03.063

在 Qt5 中，QApplication 类从 QtGui 模块移至 QtWidgets。

所以，而不是

```
#include <QtWidgets/QApplication> 
```

放

```
#include <QtGui/QApplication> 
```

而不是

```
QT += core gui 
```

你应该有

```
QT += core gui widgets 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T15:49:51.337

在 Qt5 中，您需要在 Qt 项目文件中指定您正在使用的模块。在这种情况下：

```
QT += widgets 
```

这应该注意正确配置包含目录。

# iphone - 旧 iOS 的 UIActivityViewController？

> ID：13368307
> 
> 赞同：0
> 
> 时间：2012-11-13T20:33:40.440
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

> **可能重复：**
> [iOS 5 上的 UIActivityViewController 等效项](https://stackoverflow.com/questions/13142446/uiactivityviewcontroller-equivalent-on-ios-5)

`UIActivityViewController`iOS 5有替代方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:29:40.483

如果您主要对共享方面感兴趣，我建议您看看[Sharekit](http://getsharekit.com/)。对于其他功能，您需要创建自己的 UIActionSheet 或其他弹出控件。UIActivityViewController 是您自己滚动的 iOS6 答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:42:44.477

抱歉不行。我的建议是进行自定义`UIActionSheet`。

# java - 如何让一个我无法更改的类实现一个接口？

> ID：13368309
> 
> 赞同：8
> 
> 时间：2012-11-13T20:33:42.760
> 
> 标签：java, interface, adapter, instanceof, proxy-classes

我有一个来自另一个闭源库的类，但我希望能够为它使用接口。原因是我不想到处做`instanceof`检查或检查`null`，但我也不想扩展现有的类。

例如，假设我有以下代码：

```
public class Example {

    // QuietFoo is from another library that I can't change
    private static QuietFoo quietFoo;
    // LoudFoo is my own code and is meant to replace QuietFoo
    private static LoudFoo loudFoo;

    public static void main(String[] args) {
        handle(foo);
    }

    private static void handle(Object foo) {
        if (foo instanceof QuietFoo)
            ((QuietFoo) foo).bar();
        else if (foo instanceof LoudFoo)
            ((LoudFoo) foo).bar();
    }
} 
```

我无法改变`QuietFoo`：

```
public class QuietFoo {

    public void bar() {
        System.out.println("bar");
    }
} 
```

但我*可以*改变`LoudFoo`：

```
public class LoudFoo {

    public void bar() {
        System.out.println("BAR!!");
    }
} 
```

问题是，在许多类中可能还有许多其他实现，并且可能有更多的方法`bar`不仅仅是对于和上的每种方法。扩展不是一个可行的解决方案，因为它违反了整个*is-a*合同，因为is not a .`bar``handle``instanceof``QuietFoo``LoudFoo`*`LoudFoo``QuietFoo`*

 *基本上，给定`Foo`：

```
public interface Foo {
    void bar();
} 
```

如何在不更改其源代码的情况下`QuietFoo`实现实现`Foo`，这样我就不必`instanceof`在代码中的任何地方进行强制转换和调用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T20:33:42.760

有两种方法：

1.  使用适配器模式
2.  使用[`Proxy`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html)

适配器方法将更简单但不太灵活，而该`Proxy`方法将更复杂但更灵活。尽管该`Proxy`方法更复杂，但这种复杂性都仅限于几个类。

* * *

**适配器**

[适配器模式](http://www.oodesign.com/adapter-pattern.html)很简单。对于您的示例，它只是一个类，如下所示：

```
public class QuietFooAdapter implements Foo {

    private QuietFoo quietFoo;

    public QuietFooAdapter(QuietFoo quietFoo) {
        this.quietFoo = quietFoo;
    }

    public void bar() {
        quietFoo.bar();
    }
} 
```

然后使用它：

```
Foo foo = new QuietFooAdapter(new QuietFoo());
foo.bar(); 
```

这很好，但是如果您有多个类要为其制作适配器，这可能会很乏味，因为您需要为每个必须包装的类创建一个新的适配器。

* * *

**Java的`Proxy`类**

`Proxy`是一个本地 Java 类，它是反射库的一部分，可让您创建更通用的反射解决方案。它涉及3个部分：

1.  接口（在本例中为`Foo`）
2.  这[`InvocationHandler`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/InvocationHandler.html)
3.  创建代理 ( [`Proxy.newProxyInstance`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html#newProxyInstance%28java.lang.ClassLoader,%20java.lang.Class%5B%5D,%20java.lang.reflect.InvocationHandler%29))

我们已经有了接口，所以我们很好。

这`InvocationHandler`是我们通过反射进行“自动适应”的地方：

```
public class AdapterInvocationHandler implements InvocationHandler {

    private Object target;
    private Class<?> targetClass;

    public AdapterInvocationHandler(Object target) {
        this.target = target;
        targetClass = target.getClass();
    }

    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        try {
            Method targetMethod = targetClass.getMethod(method.getName(), method.getParameterTypes());
            if (!method.getReturnType().isAssignableFrom(targetMethod.getReturnType()))
                throw new UnsupportedOperationException("Target (" + target.getClass().getName() + ") does not support: " + method.toGenericString());
            return targetMethod.invoke(target, args);
        } catch (NoSuchMethodException ex) {
            throw new UnsupportedOperationException("Target (" + target.getClass().getName() + ") does not support: " + method.toGenericString());
        } catch (IllegalAccessException ex) {
            throw new UnsupportedOperationException("Target (" + target.getClass().getName() + ") does not declare method to be public: " + method.toGenericString());
        } catch (InvocationTargetException ex) {
            // May throw a NullPointerException if there is no target exception
            throw ex.getTargetException();
        }
    }
} 
```

这里的重要代码在`try`块中。这将处理使代理上调用的任何方法调用适应内部`target`对象的过程。如果在不支持的接口上调用了一个方法（非`public`、错误的返回类型或完全不存在），那么我们抛出一个`UnsupportedOperationException`. 如果我们捕获一个`InvocationTargetException`，我们会通过 重新抛出导致它的异常`InvocationTargetException.getTargetException`。当我们以反射方式调用的方法抛出异常时，就会发生这种情况。Java 将它包装在一个新异常中并抛出该新异常。

接下来，我们需要一些东西来创建适配器：

```
public class AdapterFactory {

    public static <T> T createAdapter(Object target, Class<T> interfaceClass) {
        if (!interfaceClass.isInterface())
            throw new IllegalArgumentException("Must be an interface: " + interfaceClass.getName());
        return (T) Proxy.newProxyInstance(null, new Class<?>[] { interfaceClass }, new AdapterInvocationHandler(target));
    }
} 
```

如果愿意，您还可以将类嵌套在`AdapterInvocationHandler`类中`AdapterFactory`，以便所有内容都在`AdapterFactory`.

然后使用它：

```
Foo foo = AdapterFactory.createAdapter(new QuietFoo(), Foo.class);
foo.bar(); 
```

这种方法比实现单个适配器需要更多的代码，但足够通用，可以用于为任何类和接口对创建自动适配器，而不仅仅是`QuietFoo`和`Foo`示例。诚然，这种方法使用反射（`Proxy`类使用反射，我们的 也是如此`InvocationHandler`），这*可能*会更慢，但最近 JVM 的改进使反射比以前快得多。*

# reporting-services - 有条件地在 SSRS 报告中显示组标题

> ID：13368311
> 
> 赞同：0
> 
> 时间：2012-11-13T20:33:45.483
> 
> 标签：reporting-services, ssrs-2008, reporting

我正在尝试在 ssrs 中编写一份报告，如下所示：

```
Manager Name                      |  [ Employees for Manager ]  | Total Hours Spent
[ All projects team worked on ]   |  [ Hours Employee Spent ]   | [ Sum of Teams Hours ]
Total                             |  [ Total Employee Hours ]   | [ Total Team Hours ] 
```

我将查询汇总起来，为每个经理、员工和项目显示一行，并且列出了正确的分组。但我的问题是只显示属于当前经理组的员工而不显示所有员工。

所以结果集如下所示：

经理姓名、员工姓名、项目名称、项目时间

我有一个经理行分组和一个员工列分组，但我不知道如何只显示与当前组中的经理匹配的员工。我想我一定错过了什么，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:42:21.440

列将属于每个行组中的同一组。在您的情况下，列组听起来像是 EmployeeName。因此，您不能让列属于一个组中的一名员工，而属于不同组中的另一名员工。SSRS 不是这样工作的。

所以为了得到你正在寻找的东西，我会在你的表格的行中重复一个子报表或一个“子”矩阵。使用表的经理名称作为子报表的参数（或矩阵的过滤器。）

# jquery - Fancybox 标题 - 根据幻灯片状态更改

> ID：13368312
> 
> 赞同：0
> 
> 时间：2012-11-13T20:33:48.623
> 
> 标签：jquery, fancybox

在标题中，当幻灯片停止时，我试图获得一个暂停和播放按钮（单独的按钮）以及“暂停”一词。`autoPlay`现在设置为true。

我发现了这个：[fancyBox2: Slideshow Buttons and Image Border](https://stackoverflow.com/questions/9646143/fancybox2-slideshow-buttons-and-image-border)，它似乎让我接近了答案，但我仍然遇到问题。当我单击暂停/播放时，将在显示幻灯片中的下一张幻灯片时显示文本（因此它不会更新当前幻灯片）。我的代码：

```
$(document).ready(function() {
    $(".launcher").click(function() {
        $.fancybox.open({
        helpers: {
            title:{
                type: 'inside'
            }
        },
        loop: true,
        autoPlay: true,
        playSpeed: 5000,
        nextSpeed: 1500,
        prevSpeed: 1500,
        prevEffect: 'fade',
        nextEffect: 'fade',
        afterLoad: function() {
            if ($.fancybox.player.isActive){
                this.title = '<a href="javascript:$.fancybox.play();"><img src="/assets/images/simple-pause.png"></a> <a href="javascript:$.fancybox.play();"><img src="/assets/images/simple-play.png"></a>';
            } else {
                this.title = '<a href="javascript:$.fancybox.play();"><img src="/assets/images/simple-pause.png"></a> <a href="javascript:$.fancybox.play();"><img src="/assets/images/simple-play.png"></a> <span class="pausetext"><h3>Paused</h3></span>';
            }
        }
    });
        return false;
});
}); 
```

我已经尝试了那里的变化；添加一个 onclick 来切换跨度，在有和没有 onclick 的两个标题中跨度。我所做的一切都不会立即隐藏/显示跨度。此外，当灯箱第一次打开时，它总是在该`else`部分中显示标题（因此即使它正在自动播放，它也会显示“暂停”）。但是，只要它转到下一张幻灯片，它就会转到正确的标题。我在这里想念什么？

# http - 如何使用 cURL 进行 HTTP POST 值列表

> ID：13368316
> 
> 赞同：1
> 
> 时间：2012-11-13T20:34:05.503
> 
> 标签：http, post, curl

如何使用 cURL 将多个值发布到同一个键？

例如，当我将以下内容运行到我的 example.com URL 时，它抱怨...格式正确还是后端无法处理请求的问题？

```
curl -k -H 'Accept: application/json' --user admin:admin example.com -d name=peter -d name=paul -d name=mary 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:37:40.700

多个`-d`看起来不错。文档说`-d name=daniel -d skill=lousy`会生成`name=daniel&skill=lousy`

[http://curl.haxx.se/docs/manpage.html#-d](http://curl.haxx.se/docs/manpage.html#-d)

所以如果你想发送一个数组，你必须使用`[]`方括号。

```
-d name[]=peter -d name[]=paul -d name[]=mary 
```

看起来你也可以使用

```
-d "name[]=peter&name[]=paul&name=mary" 
```

# java - 如何使监视目录服务监视多个文件夹

> ID：13368319
> 
> 赞同：1
> 
> 时间：2012-11-13T20:34:17.520
> 
> 标签：java, monitoring

JDK7 的`java.nio.file`包有一个`WatchService`支持文件更改通知。我成功监控了一个目录，但我有一个`String`包含需要并行监控的目录的数组（如`d:\channel1` `d:\channel2` `d:\channel3` `d:\channel4` `d:\channel5`）。

在监控中，我们将传递目录名称并提供无限循环，因此它会一直监视目录而不关闭循环。但是现在我有一个数组字符串，其中包含需要监视的目录。但是这个目录是从 XML 配置并解析它并获取目录名称的，因此在功能上可能会增加或减少要监视的目录（只是目录是基于 XML 配置的动态）。所以我在字符串数组中获取这些目录。由于此服务是无限循环的，因此当我遍历字符串数组时，它不会移动到下一个目录。

下面是我循环字符串数组的代码。

```
String[] path = parseXML.getOutDirNames();
for(String str : path){
    Path dir = Paths.get(str);
    new WatchDir(dir, true).processEvents();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:21:06.443

我很高兴我通过将上面的 for 循环更改为无限 forloop 来修复它

```
for(;;){
for(String str : path){
    Path dir = Paths.get(str);
    new WatchDir(dir, true).processEvents();
}
} 
```

# node.js - node.js中d3和mongo之间的冲突

> ID：13368324
> 
> 赞同：2
> 
> 时间：2012-11-13T20:34:29.147
> 
> 标签：node.js, mongodb, d3.js

在需要 mongo (connect-mongo) 的模块之前需要 d3.js 时，我收到以下错误：

```
TypeError: Cannot read property 'BSON' of undefined
    at .../node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/index.js:48:44 
```

如果我在 mongo 模块之后需要 d3.js，它可以正常工作......

我不是第一个遇到这个问题的人，但我不知道有什么冲突 [的如何在 Node.js 中正确使用 D3？](https://stackoverflow.com/questions/9948350/how-to-use-d3-in-node-js-properly)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:59:23.970

发生这种情况是因为您使用的 BSON 版本检查是否存在`window`全局变量以查看它是否在 Node.JS 中运行。这是一个坏主意，例如 D3.js 通过 JSDOM 创建了这样一个全局，从而使检查无效。

然而，看起来这个问题已经在[最近的提交](https://github.com/mongodb/js-bson/commit/80649f1d2e078e2693c9ceceb3415ec6569e33b8)中得到修复，即在 BSON v0.1.5 中。

在撰写本文时，npmjs.org 上的 mongodb 版本为[v1.1.11](https://npmjs.org/package/mongodb)，但 BSON 依赖项已在 v1.2.0 中更新，似乎即将发布（参见 GitHub）。

# c++ - 如何在 C++ 中做相互类

> ID：13368325
> 
> 赞同：0
> 
> 时间：2012-11-13T20:34:29.190
> 
> 标签：c++, class

> **可能重复：**
> [何时使用前向声明？](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)

我正在使用 Kubuntu 和 Eclipse。

我有这两个类：

**学生.h**

```
#ifndef STUDENT_H_
#define STUDENT_H_

#include <iostream>
#include <string>
#include <vector>

#include "Course.h"

using namespace std;

class Student {
    public:
        Student(vector<string> &vec);
        virtual void study(Course &c)=0;
        virtual ~Student();
    private:
        string _studentId;
        string _department;
        string _pathToImage;
};

#endif /* STUDENT_H_ */ 
```

**课程.h**

```
#ifndef COURSE_H_
#define COURSE_H_

#include <iostream>
#include <vector>
#include <string>
#include <stdio.h>
#include <stdlib.h>

#include "Student.h"

using namespace std;
class Course {
    public:
        Course(vector<string> &vec);
        virtual void teach();
        virtual void reg(Student &s)=0;
        virtual ~Course();
    private:
        string _department;
        string _name;
        int _semester;
        int _minimumGrade;
};

#endif /* COURSE_H_ */ 
```

我在编译时遇到了这个错误：

```
Description Resource    Path    Location    Type
‘Course’ has not been declared  Student.h   /hw2/include    line 22 C/C++ Problem 
```

我还有一些继承这些类的类。我不认为这是问题所在。

可能是什么问题？

谢谢

**编辑：**

在对您的答案进行一些编辑后，这是我现在的文件：

*课程.h*

```
#ifndef COURSE_H_
#define COURSE_H_

#include <iostream>
#include <vector>
#include <string>
#include <stdio.h>
#include <stdlib.h>

class Student;

using namespace std;
class Course {
    public:
        Course(vector<string> &vec);
        virtual void teach();
        virtual void reg(Student &s)=0;
        virtual ~Course();
    private:
        string _department;
        string _name;
        int _semester;
        int _minimumGrade;
};

#endif /* COURSE_H_ */ 
```

*学生.h*

```
#ifndef STUDENT_H_
#define STUDENT_H_

#include <iostream>
#include <string>
#include <vector>

class Course;

using namespace std;

class Student {
    public:
        Student(vector<string> &vec);
        virtual void study(Course &c)=0;
        virtual ~Student();
    private:
        string _studentId;
        string _department;
        string _pathToImage;
};

#endif /* STUDENT_H_ */ 
```

*课程.cpp*

```
#include "../include/Course.h"
#include "../include/Student.h"

Course::Course(vector<string> &vec): _department(""), _name(""), _semester(0), _minimumGrade(0) {
    _department = vec[0];
    _name = vec[1];
    _semester = atoi(vec[2].c_str());
    _minimumGrade = atoi(vec[3].c_str());
}

Course::~Course() {
    // TODO Auto-generated destructor stub
} 
```

*学生.cpp*

```
#include "../include/Course.h"
#include "../include/Student.h"

Student::Student(vector<string> &vec): _studentId(""), _department(""), _pathToImage("") {
    _studentId = vec[0];
    _department = vec[1];
    _pathToImage = vec[2];
}
Student::~Student() {
    // TODO Auto-generated destructor stub
} 
```

现在它给了我很多这样的错误：

```
Description Resource    Path    Location    Type
  required from ‘static void __gnu_cxx::__alloc_traits<_Alloc>::construct(_Alloc&, __gnu_cxx::__alloc_traits<_Alloc>::pointer, const _Tp&) [with _Tp = Student; _Alloc = std::allocator<Student>; __gnu_cxx::__alloc_traits<_Alloc>::pointer = Student*]’   hw2     line 202, external location: /usr/include/c++/4.7/ext/alloc_traits.h    C/C++ Problem
  required from ‘static void __gnu_cxx::__alloc_traits<_Alloc>::construct(_Alloc&, __gnu_cxx::__alloc_traits<_Alloc>::pointer, const _Tp&) [with _Tp = Course; _Alloc = std::allocator<Course>; __gnu_cxx::__alloc_traits<_Alloc>::pointer = Course*]’  hw2     line 202, external location: /usr/include/c++/4.7/ext/alloc_traits.h    C/C++ Problem
  required from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = Course; _Alloc = std::allocator<Course>; std::vector<_Tp, _Alloc>::value_type = Course]’   hw2     line 885, external location: /usr/include/c++/4.7/bits/stl_vector.h C/C++ Problem
  required from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = Course; _Alloc = std::allocator<Course>; std::vector<_Tp, _Alloc>::value_type = Course]’   hw2     line 893, external location: /usr/include/c++/4.7/bits/stl_vector.h C/C++ Problem
  required from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = Student; _Alloc = std::allocator<Student>; std::vector<_Tp, _Alloc>::value_type = Student]’    hw2     line 885, external location: /usr/include/c++/4.7/bits/stl_vector.h C/C++ Problem
  required from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = Student; _Alloc = std::allocator<Student>; std::vector<_Tp, _Alloc>::value_type = Student]’    hw2     line 893, external location: /usr/include/c++/4.7/bits/stl_vector.h C/C++ Problem 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:37:12.487

摆脱包含，而只是放入`class Course;`student.h 和`class Student;`course.h。类型不完整就足够了，因为您只需要在函数参数中使用它们（实际上您只需要对它们的引用）。

您现在需要将相关的包含添加到 .cpp 文件中，例如 student.cpp 应该以`#include "student.h"`and开头`#include "course.h"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T20:39:51.357

您在这里所拥有的称为循环依赖（Student.h 依赖于 Course.h，而 Course.h 又依赖于 Student.h，而后者又依赖于...）。

为了解决这个问题，您应该转发声明您在每个头文件中使用的类。

例如，在 中`Student.h`，您应该替换`#include "Course.h"`为`class Course`。然后在实现文件中，您可以包含该`Course.h`文件并使用该`Course`对象。

# spring - Spring 集成：JMS 异常处理

> ID：13368337
> 
> 赞同：1
> 
> 时间：2012-11-13T20:35:30.577
> 
> 标签：spring, ibm-mq, spring-integration

使用连接到 Websphere MQ v7.1 的 Spring Integration 自己的 JMS 出站通道适配器：

```
 <!-- plugging xyz channel into a JMS xyzQueue -->

    <channel id="xyzChannel"/>
    <jms:outbound-channel-adapter channel="xyzChannel"
                                  destination="xyzQueue"/>

    <!-- will listen on all packets matched, and forward them to a xyzChannel -->

    <beans:bean id="xyzSender" class="com.custom.XyzSender">
        <beans:constructor-arg name="messageChannel" ref="xyzChannel"/>
    </beans:bean> 
```

如果 MQ 代理（它的通道）在一秒钟内出现故障，则会记录异常：

```
Caused by: com.ibm.mq.jmqi.JmqiException: CC=2;RC=2537;AMQ9558: The remote channel 'XYZ_CHANNEL' is not currently available ('MQRC_CHANNEL_NOT_AVAILABLE'). 
```

从 MQ 文档中，这些是导致此错误的可能原因：

*   通道当前处于停止状态。
*   通道已被通道出口停止。
*   队列管理器已达到来自此客户端的此通道的最大允许限制。
*   队列管理器已达到此通道的最大允许限制。
*   队列管理器已达到所有通道的最大允许限制。

然而 Spring Integration 似乎把它吃掉了，在 MQ 通道再次可用后的一瞬间，其他消息被处理，因为什么也没发生。当然，它会导致消息丢失，这不是预期的情况。

处理此异常的方法是什么？上似乎没有错误通道属性`jms:outbound-channel-adapter`。

# iphone - 另一个“没有可用于签名的身份”问题

> ID：13368339
> 
> 赞同：1
> 
> 时间：2012-11-13T20:35:42.457
> 
> 标签：iphone, ios, xcode

所以我正在尝试将我的应用程序提交到应用程序商店并收到“没有可用于签名的身份”错误。

到目前为止，我已经在配置门户中经历并重新制作了我的分发证书大约 5 次，每次都重新下载它（通过 xcode），但无济于事，它仍然给我错误。

我已将构建设置中的代码签名调整为设置为“iPhone 分发：（我的证书名称）”，并确保我的包标识符匹配。

我已经多次重新启动 XCode，但似乎没有任何效果。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:44:37.990

你试过清理你的项目吗？这通常可以解决我自己的项目中的此类问题。

产品 ==> 清洁

# soundcloud - Soundcloud 嵌入式播放器在 IE 10 上无法正常工作

> ID：13368341
> 
> 赞同：3
> 
> 时间：2012-11-13T20:35:53.050
> 
> 标签：soundcloud, internet-explorer-10

我刚刚测试了今天针对 Windows 7 发布的新 IE10，我注意到 Soundcloud 嵌入式播放器看起来不正确。

使用此页面作为示例

[http://soundcloud.com/pages/widgets](http://soundcloud.com/pages/widgets)

图像的上半部分是 IE9，下半部分是 IE10 (10.0.9200.16438)

![IE 10 与 IE 9 的示例](../Images/20cfb479d3133609907a52074f41e94c.png)

# wordpress - Wordpress - 按元数据日期对帖子循环进行排序

> ID：13368344
> 
> 赞同：2
> 
> 时间：2012-11-13T20:36:00.857
> 
> 标签：wordpress, sorting

我有两个 CPT，一个叫做“艺术家”，另一个叫做“发布”。我创建了一个显示艺术家及其自定义元数据的 single-artist.php 页面。在同一页面上，我使用以下代码显示该艺术家的所有版本：

```
<!-- GET RELEASES -->
<?php

$category = get_the_category();
$artist_name_slug = $category[0]->slug;

$args = array ('post_type' => 'release', 'posts_per_page' => 20, 'category_name' => $artist_name_slug);

query_posts ($args);

?>

<?php if (have_posts()) : ?>
<h3 class="artist-col2-title">Releases</h3>
<?php while (have_posts()) : the_post(); ?>

<div class="artist-release"><a href="<?php echo get_permalink(); ?>" title="<?php the_title(); ?>" rel="bookmark"><?php echo the_post_thumbnail('small'); ?></a></div>

<?php endwhile; ?>
<?php endif; ?>
<div style="clear:both;"></div> 
```

在发布 CPT 中，我在元数据中有发布日期。

我想根据该日期对发布进行排序，但我不知道如何将其添加到我的论点中。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:01:28.847

要排序，`meta data`您可以使用

```
$args = array (
    'post_type' => 'release',
    'posts_per_page' => 20,
    'category_name' => $artist_name_slug,
    'meta_key' => 'your_meta_key' // i.e. release_date
    'orderby'='meta_value' // for numeric value use 'meta_value_num' instead
);
query_posts ($args); 
```

但请注意`meta_key`应该出现在您要用于排序的查询中，[请参阅更多信息](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)。

# c# - 获取字符串的前 250 个单词？

> ID：13368345
> 
> 赞同：14
> 
> 时间：2012-11-13T20:36:08.277
> 
> 标签：c#, string

如何获取字符串的前 250 个单词？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-13T20:39:58.410

您需要拆分字符串。您可以使用不带参数的[重载](http://msdn.microsoft.com/en-us/library/b873y76a%28v=vs.110%29.aspx)（假定为空格）。

```
IEnumerable<string> words = str.Split().Take(250); 
```

请注意，您需要添加`using System.Linq`for `Enumerable.Take`。

您可以使用`ToList()`或`ToArray()`从查询中创建新集合或节省内存并直接枚举它：

```
foreach(string word in words)
    Console.WriteLine(word); 
```

* * *

**更新**

由于它似乎很受欢迎，我添加了以下扩展，它比`Enumerable.Take`方法更有效，并且还返回一个集合而不是（延迟执行的）*查询*。

如果分隔符参数为空或不包含字符，则它使用假定[空白字符](http://msdn.microsoft.com/en-us/library/t809ektx%28v=vs.110%29.aspx)`String.Split`作为分隔符的地方。但该方法还允许传递不同的分隔符：

```
public static string[] GetWords(
       this string input,
       int count = -1,
       string[] wordDelimiter = null,
       StringSplitOptions options = StringSplitOptions.None)
{
    if (string.IsNullOrEmpty(input)) return new string[] { };

    if(count < 0)
        return input.Split(wordDelimiter, options);

    string[] words = input.Split(wordDelimiter, count + 1, options);
    if (words.Length <= count)
        return words;   // not so many words found

    // remove last "word" since that contains the rest of the string
    Array.Resize(ref words, words.Length - 1);

    return words;
} 
```

它可以很容易地使用：

```
string str = "A B C   D E F";
string[] words = str.GetWords(5, null, StringSplitOptions.RemoveEmptyEntries); // A,B,C,D,E 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-13T20:37:49.873

```
yourString.Split(' ').Take(250); 
```

我猜。您应该提供更多信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-20T11:34:59.357

String.Join(" ", yourstring.Split().Take(250).ToArray())

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-04T18:15:18.433

除了蒂姆的答案，这是你可以尝试的

```
IEnumerable<string> words = str.Split().Take(250);
StringBuilder firstwords = new StringBuilder();
foreach(string s in words)
{
   firstwords.Append(s + " ");
}
firstwords.Append("...");
Console.WriteLine(firstwords.ToString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-17T07:17:56.320

试试这个：

```
public string TakeWords(string str,int wordCount)
{
    char lastChar='\0';
    int spaceFound=0;
    var strLen= str.Length;
    int i=0;
    for(; i<strLen; i++)
    {
        if(str[i]==' ' && lastChar!=' ')
        {
            spaceFound++;
        }
        lastChar=str[i];
        if(spaceFound==wordCount)
            break;
    }
    return str.Substring(0,i);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-04T10:29:44.433

无需调用 Take() 即可。

```
string[] separatedWords = stringToProcess.Split(new char[] {' '}, 250, StringSplitOptions.RemoveEmptyEntries); 
```

这还允许基于不仅仅是空格“”的拆分，因此修复了输入中错误地缺少空格时的情况。

```
string[] separatedWords = stringToProcess.Split(new char[] {' ', '.', ',' ':', ';'}, 250, StringSplitOptions.RemoveEmptyEntries); 
```

`StringSplitOptions.None`如果您希望返回空字符串，请使用,。

# javascript - 替换字符串的正则表达式

> ID：13368347
> 
> 赞同：0
> 
> 时间：2012-11-13T20:36:16.643
> 
> 标签：javascript, jquery, regex

如何编写正则表达式以删除双破折号 - 变成单破折号 - 如果字符串以破折号开头或结尾，则替换为空字符串。

```
var oldString = "abc--xyz--"
var filtered = oldStringt.replace(???????); 
```

样本输入 >>>> 输出

```
abc--xyz--       >>>>>    abc-xyz
abc---xyz-123    >>>>>    abc-xyz-123
--abc-xyz-123    >>>>>    abc-xyz-123 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:43:20.607

链接如何替换：

```
str.replace(/[-]+/g, '-').replace(/[-]+$/g, '').replace(/^[-]+/g, '') 
```

[在这里拉小提琴](http://jsfiddle.net/MZhS4/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:42:13.700

```
oldString.replace(/-+/g,"-").replace(/(^-+)|(-+$)/g,""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:06:12.227

这是一个应该可以工作的正则表达式：

```
oldString.replace(/^-+|-+$|(-)+/g, '$1') 
```

测试：http: [//jsfiddle.net/kd9g3/](http://jsfiddle.net/kd9g3/)

现在，我知道您特别要求使用正则表达式，但是像这样的许多替换也可以使用数组来完成（有时它们更快）：

```
oldString.split(/-+/).filter(function(e){return !!e}).join('-') 
```

# javascript - 保持 Javascript 中的布尔值不变，直到单击另一个按钮

> ID：13368348
> 
> 赞同：0
> 
> 时间：2012-11-13T20:36:27.043
> 
> 标签：javascript, button, onclick, boolean

我正在开发一个网络应用程序，让用户单击一个按钮（带有数字或数学符号值），然后在工作区中单击并显示相应的字符。到目前为止，这就是我对 Javascript 所做的：

```
<script type="text/javascript">
            var mathCanvas = document.getElementById("matharea");
            var ctx = mathCanvas.getContext("2d");
            ctx.font="18px Arial";

            var boolOne = 0;
            var boolTwo = 0;

            function insertOne(){
                boolOne = 1;
            };

            function insertTwo(){
                boolTwo = 1;
            };

            mathCanvas.onclick = function(event){
                var x = event.offsetX;
                var y = event.offsetY;
                if(boolOne == 1){
                    ctx.fillText("1",x-5,y-5);
                    boolOne = 0;
                };

                if(boolTwo == 1){
                    ctx.fillText("2",x-5,y-5);
                    boolTwo = 0;
                };
            };
</script> 
```

现在我只使用 1 和 2 按钮进行测试。在两个“if”语句中，我在放置数字后将布尔值设置回 0，但显然最好允许用户继续放置相应的数字，直到按下另一个数字按钮，而不是一次性我在这里的功能。我可以想象在按下另一个特定按钮时重置布尔值，但是当按下任何其他按钮时，我如何将其更改回 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:45:16.343

您可以稍微改变您的逻辑，使其更加灵活。就像是：

```
var placementCallback = function() {}
function onButton1Click() {
 placementCallback = function(x, y) {
   ctx.fillText('1', x-5,y-5);
 }
}

function onButton2Click() {
 placementCallback = function(x, y) {
   ctx.fillText('2', x-5,y-5);
 }
}

mathCanvas.onclick = function(event){
  placementCallback(event.offsetX, event.offsetY);
} 
```

这样，您就没有大量的 if 条件，并且您可以构建任意数量的按钮（并且它也满足您的“用户想要多少次”的要求，前提是您为即放置回调。

希望有帮助。

# markdown - 使用 README.md 文件作为 Doxygen 的主页

> ID：13368350
> 
> 赞同：56
> 
> 时间：2012-11-13T20:36:30.157
> 
> 标签：markdown, doxygen, doxywizard

Doxygen 的文档指出，我可以在 markdown 文件中使用 PHP Markdown Extra 标题标签，但两者都没有

```
# Main Page # {#mainpage} 
```

也不

```
# Main Page # {#index} 
```

有效，但标签也不以纯文本形式出现在输出中。这是第一行顺便说一句。

此外，我既不能使用上述标签引用该页面，也不能使用文件名。

我还有一个`main.dox`包含`\mainpage`特殊命令的文件，但我也尝试了上述所有方法，在它们之前删除了一个斜杠（使其只有两个）。

我正在使用 Doxygen 1.8.2（下载）和 1.8.1.1（来自 MacPorts）来完成这项任务。

那我该如何实现呢？

另外，如何将降价文件标记为特定语言的一部分？

**编辑：**我启用了降价支持，文件出现在引用的页面中。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-18T16:45:10.483

在 doxygen (1.8.3) 的下一个版本中，我计划引入一个新的配置选项`USE_MDFILE_AS_MAINPAGE`，可用于指定要用作主页的降价页面。然后你可以配置 doxygen 如下：

```
INPUT                  = README.md other_sources
USE_MDFILE_AS_MAINPAGE = README.md 
```

无论页面的标题如何，它都会起作用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-18T16:21:38.750

请尝试以下方法将标题标记为 1 级标题：

```
Main Page {#mainpage}
========= 
```

使用 doxygen 1.8.2，这使页面成为`index.html`我的页面。

doxygen 文档确实声明以单个开头的行`#`声明了 1 级标题，但它似乎也不适用于我。

# java - 抽象初始化（）方法而不是依赖注入，好的做法？

> ID：13368352
> 
> 赞同：3
> 
> 时间：2012-11-13T20:36:32.063
> 
> 标签：java, oop, dependency-injection, initialization, abstract-class

这是我目前正在设计的一个简化示例。

```
public class ExampleManager {

    private Foo foo;
    private ArrayList<Example> examples;
    ...

    public ExampleManager() {
        this.foo = new Foo();
        this.examples = new ArrayList<Example>();
    }

    public void add(Example e) {
        examples.add(e);
    }

    public void doSomethingWithExamples() {
        for (int i = 0; i < examples.size(); i++) {
            examples.get(i).doSomething();
        }
    }
    ...
}

public abstract class Example {
    private Foo foo;

    public Example(Foo foo) {
        this.foo = foo;
    }
    ...
} 
```

为了使用该库，我必须扩展`Example`类并将示例添加到 ExampleManager，它应该是唯一修改`Example`对象的类。
所以我有这个`Example1`类：

```
public class Example1 extends Example {

    public Example1(Foo foo) {
        super(foo);
    }
    ...
} 
```

我目前像这样初始化管理器：

```
ExampleManager manager = new ExampleManager();
Example1 example1 = new Example1(manager.getFoo());
manager.add(example1); 
```

我`Example`需要该`Foo`对象，但**我想知道是否可以摆脱`Foo`Example1 构造函数中的参数**，因此如果有人使用该库，则不必调用`manager.getFoo()`即可创建示例。
我正在考虑以下解决方案，它将隐藏`Foo`初始化，因此使用该库的人只需实现该`initialize(Foo)`方法，并且在 将示例添加到)`Foo`时会自动初始化：更改方法： `ExampleManager`
`ExampleManager``add(Example)`

```
public void add(Example e) {
    e.initialize(foo);
    examples.add(e);
} 
```

在`Example`，初始化（Foo foo）；将是一个抽象方法，所以`Example1`我会有这样的东西：

```
@Override
public void initialize(Foo foo) {
    this.foo = foo;
} 
```

**有没有更好的方法来做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:10:09.867

在我看来，如果您需要像您描述的那样处理对象，那么您的 OO 模型首先会出现一些问题。- 或者您的示例代码可能没有揭示事情的真正意义。

尤其

> `ExampleManager`[...] 应该是唯一修改 Foo 对象的类

和

> `Example`需要 Foo 对象

看起来有些“特别”。

你能详细说明一下`ExampleManager`和`Foo`实例之间以及`Example`和实例之间的交互`Foo`吗？

好的，关于您的评论，我提出了观察者模式，就像您的`initialize()`方法一样：

```
public abstract class Example {
    protected Foo callbackHandler;

    public void setCallbackHandler( Foo handler ) {
        this.callbackHandler = handler;
    }

    protected void doCallback( SomeType event ) {
        if ( this.callbackHandler != null ) {
            this.callbackHandler.doYourThing( event );
        }
    }
} 
```

并在将对象添加到其中时将`ExampleManager`其自身或其实例注册为回调处理程序。`Foo`然后，非抽象子类将只需要`doCallback(...)`在他们想要传达某些东西时调用，而不必处理回调的任何设置内容。

# python - Django - 如何正确覆盖模型的 delete() 方法以更新（软删除）而不是删除

> ID：13368354
> 
> 赞同：2
> 
> 时间：2012-11-13T20:36:47.720
> 
> 标签：python, django

我的数据库设计需要在删除一行时在表行上设置“已删除”标志，而不是实际删除一行。当一个对象被标记为删除时，我正在使用调用模型的 delete() 函数的表单集。这意味着我需要覆盖模型的删除功能。使用信号不是一种选择。

我的问题是如何正确覆盖它以进行更新而不是删除。我查看了 models.Model.delete 函数，它使用 django.db.models.deletion.Collector 类做了一些复杂的事情。收集器可以删除也可以更新值。我能够覆盖删除方法以仅更新如下：

```
class CustomerInfo(models.Model):
  ...
  def delete(self, using=None):        
    collector = Collector(using=using)
    collector.add_field_update(self._meta.get_field('deleted'), True, [self])
    collector.delete() 
```

但我不确定这是否是正确的方法。或者，我可以按如下方式覆盖它。

```
def delete(self, using=None):
    self.deleted = True
    self.save() 
```

两种方法都有效，但我不确定哪种方法正确。

# bash - 连续运行一个 bash 脚本

> ID：13368355
> 
> 赞同：2
> 
> 时间：2012-11-13T20:36:54.540
> 
> 标签：bash

```
{ while IFS=';' read  u1 p1 u2 p2; do
            imapsync/imapsync --usecache --host1 secure.emailsrvr.com --user1 "$u1" --password1 "$p1" \
                     --host2 imap.gmail.com --ssl2 --user2 "$u2" --password2 "$p2" ...
     done ; } < users1-33.txt 
```

我怎样才能连续运行这个脚本，以便在它完成时重新开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:46:04.070

许多 UNIXy 系统都有一个称为[`watch`](http://en.wikipedia.org/wiki/Watch_%28Unix%29)重复执行命令的工具（默认情况下每 2 秒执行一次）。虽然`watch`不是标准的 POSIX 工具，但如果您拥有或可以安装它，它是一种非常简单的方法，可以基本上实现您所要求的。将您的代码放在一个文件中并*观察*它：

```
watch bash -c your_script 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T20:39:25.810

尝试将其包装在一个函数中并对其进行迭代。

```
function go()
{
    { while IFS=';' read  u1 p1 u2 p2; do
            imapsync/imapsync --usecache --host1 secure.emailsrvr.com --user1 "$u1" --password1 "$p1" \
                     --host2 imap.gmail.com --ssl2 --user2 "$u2" --password2 "$p2" ...
     done ; } < users1-33.txt

}

while true
do
    go
done 
```

或者您可以`go()`从另一个文件中引用：

```
 #!/bin/sh

   . /the/original/source_file.sh

   go 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:40:25.650

您是否考虑过将脚本放入您的 crontab 中以每分钟运行一次？

等等基于debian的系统。（Ubuntu）

`crontab -e`

```
# m h  dom mon dow   command
*/1 * * * * /usr/local/bin/scriptToRun.sh 
```

会让脚本每分钟运行一次

[更多关于 Cron](http://en.wikipedia.org/wiki/Cron)

# objective-c - 自定义 NSPathControl

> ID：13368356
> 
> 赞同：2
> 
> 时间：2012-11-13T20:36:57.417
> 
> 标签：objective-c, xcode, macos, cocoa, nspathcontrol

我想做一个定制`NSPathControl`。 `NSPathCell`有方法`+ pathComponentCellClass`，您可以在其中返回组件单元格的自定义类。我有一个`NSPathComponentCell`子类，我在那里返回，但它不起作用。该方法不会被调用。为什么？

在[文档](http://developer.apple.com/library/mac/documentation/cocoa/Reference/NSPathCell_class/Reference/Reference.html#//apple_ref/occ/clm/NSPathCell/pathComponentCellClass)中说：

> 子类可以重写此方法以返回自动使用的自定义单元类。默认情况下，该方法返回 [NSPathComponentCell 类]，或其专门的子类。

如果这是错误的，是否有另一种自定义方式`NSPathControl`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:46:31.173

我找到了解决方案并将其发布在[github 上](https://github.com/iluuu1994/Pathbar)。我从 NSPathControl 继承。其实很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T00:35:59.623

我发现组件单元类是由 IB 存档的。因此，如果在 IB 中设置了路径控件，它不会使用您的覆盖，`+pathComponentCellClass`除非您在加载 NIB 后更改其 URL。也可能有其他更改会引发它，例如设置路径样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-23T08:29:04.897

您是否尝试过修改[NSPathControlItem/attributedTitle](https://developer.apple.com/documentation/appkit/nspathcontrolitem/1388287-attributedtitle)：

（限制：macOS 10.10+）

# mime-types - 这个文件是什么 MIMEType

> ID：13368361
> 
> 赞同：0
> 
> 时间：2012-11-13T20:37:15.037
> 
> 标签：mime-types

我正在尝试确定用于读取文件的 MIMEType、扩展名和软件。

在我看来，它是一个 Microsoft 同步文件，但我无法准确确定。

该文件包含扩展名为 .txt 的二进制数据。值得注意的是文件开头的以下纯文本元素：

```
SDataSetSurrogate, Version=1.0.1.0, Culture=neutral, PublicKeyToken=4fbddf16e3a769ae
...
QSystem.Data, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
....
Nmscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

是否足以识别它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:47:51.907

每行看起来像 CLI 程序集的 CLI 名称库/资源：

[http://en.wikipedia.org/wiki/Assembly_(CLI)#Satellite_assemblies](http://en.wikipedia.org/wiki/Assembly_(CLI)#Satellite_assemblies)

但我无法找出直接的 MIME 类型（每行）。

# android - 使用此实现获取联系人姓名

> ID：13368371
> 
> 赞同：0
> 
> 时间：2012-11-13T20:37:44.227
> 
> 标签：android, android-contacts

我正在尝试使用在这个问题帖子中找到的代码的实现：[如何在 Android 2.0 上读取联系人，](https://stackoverflow.com/questions/1721279/how-to-read-contacts-on-android-2-0)但我不知道如何让它也通过给定、家庭或显示名称列运行。我怎样才能得到这个实现（链接问题中的大一个）在遍历每一行时给我联系人的给定和显示名称？我想专门使用这个实现，因为它循环遍历每一行中的指定列，并按照它在行中的顺序返回信息。

这是我所指的另一个问题的实现：\

```
Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null); 

while (cursor.moveToNext()) { 

   String contactId = cursor.getString(cursor.getColumnIndex( 
   ContactsContract.Contacts._ID)); 

   String hasPhone = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

   if (Boolean.parseBoolean(hasPhone)) { 
      // You know it has a number so now query it like this
      Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId, null, null); 

while (phones.moveToNext()) { 
     String phoneNumber = phones.getString(phones.getColumnIndex( ContactsContract.CommonDataKinds.Phone.NUMBER));                 
  } 
  phones.close(); 
   }

   Cursor emails = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = " + contactId, null, null); 

   while (emails.moveToNext()) { 
      // This would allow you get several email addresses 
      String emailAddress = emails.getString( 
      emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));

   } 

   emails.close();
}

cursor.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:13:25.313

首先，链接帖子中的答案有点过时，因为现在 developer.android.com 上有 Contacts Provider 的文档。

其次，您遇到的问题是您正在使用联系人表的联系人 ID 查询“数据”表，这不起作用。

Contacts Provider 是一个三层排列的表格。顶层是 Contacts 表，其常量在 ContactsContract.Contacts 中定义。其中一列是 ContactsContract.Contacts._ID，用于标识联系人行。但是，此表中的一行是来自各种来源的单个联系人的*聚合*。

各个联系人存储在 ContactsContract.RawContacts 中。对于每个 ContactsContract.Contacts._ID，ContactsContract.RawContacts 中可以有不止一行。

对于 ContactsContract.RawContacts 中的每一行，ContactsContract.Data 中有一行或多行。每行都有一个 MIME 类型，告诉您它是什么类型的数据。例如，ContactsContract.RawContacts 中的一行可以在 ContactsContract.Data 中有三行，它们具有电话号码的 MIME 类型。三个“数据”行中的每一行都是 ContactsContract.RawContacts 中联系人的不同类型的电话号码（家庭、手机、工作）。

您可以看到为什么在 ContactsContract.Data 中查找 ContactsContract.Contacts._ID 不起作用；这是要查找的错误 ID。

与其在此处重新编写文档，不如建议您看一下。它有一些很好的插图可以帮助解释我的意思： [Contacts Provider](http://developer.android.com/guide/topics/providers/contacts-provider.html)

# css - CSS - 如何防止水平滚动？

> ID：13368375
> 
> 赞同：3
> 
> 时间：2012-11-13T20:37:59.277
> 
> 标签：css, css-float

这个问题可能有一个简单的解决方案。

我设计了一个并排有两列的网站。除了右栏外，一切都是固定的（菜单栏和左栏）。

这是故意的，因为我只希望右栏滚动，它会保存页面的可读内容。所以一切都很好，对吧？

不完全是，左列是向左浮动的，而右列也以足够大的左边距浮动，以允许在加载时正确地坐在页面中。

但是，当屏幕水平太小时，用户可以左右滚动并移动第二列，甚至在我固定的第一列下方。这就是我想要阻止的。

如何让第二列垂直滚动但不水平移动？

这是css的一个片段：

```
#main-content {float: left; margin: 100px 0 0 0; background: rgba(128,127,128,0.9); padding: 15px 25px 15px 15px; width: 500px; -moz-border-radius: 20px; -webkit-border-radius: 20px; border-radius: 20px;}
#button-glue {float: left; position: fixed; padding: 0 25px 15px 0px; width: 525px;}
#button{
    float:right; margin: 5px -20px 0 0;
}
#button a {
    background:url(../images/button.png) 
    no-repeat;
    display:block; /* Necessary, since A is not a block element */
    width: 167px;
    height: 58px; 
}
#button a:hover {
    background:url(../images/buttonhover.png) no-repeat;
    width:167px;
    height:58px;
}
.right {float:right; margin: 0 0 5px 25px;}
#secondary-content {float: right; margin: 100px 0 15px 569px; background: rgba(128,127,128,0.9); padding: 20px; background: rgba(128,127,128,0.9); width:405px; -moz-border-radius: 20px; -webkit-border-radius: 20px; border-radius: 20px;} 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T20:41:26.850

```
overflow-x:hidden 
```

这将不允许元素上的滚动条并隐藏任何悬垂的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:01:39.913

我希望我能正确理解你的问题，但为什么你可能不需要使用浮点数。

Float 是将元素向左或向右推，我认为它非常方便，但对于您的解决方案，您不需要它。相反，您可以在您的次要内容 div 位置上使用：absolute。而不是使用边距，使用顶部，左侧更容易。因此，如果您想将次要内容 div 放在正确的位置，您可以使用：

```
position: absolute;
top: 100px;
left: 569px; 
```

我建议您对其他元素执行相同的操作，并使用边距在元素周围创建空间。

# linux - 在 CentOS5 机器上运行 Ubuntu 12.04 编译的 C++ 程序

> ID：13368376
> 
> 赞同：1
> 
> 时间：2012-11-13T20:38:01.743
> 
> 标签：linux, g++, ubuntu-12.04, centos5, relocation

我有一堆使用 g++ 在 C++ 中在 Linux 上开发的软件。该代码可在 Ubuntu 12.04 和 CentOS 5 上编译和运行。我们有一些旧服务器仍在运行 CentOS 5。目前我为这两种操作系统进行编译。我想开始使用一些 C++11 特性。这些在 Ubuntu 12.04 上受支持，但在 CentOS 5 上不受支持。

我正在尝试在 Ubuntu 上为 CentOS 生成可执行文件。为此，我将所有可执行文件与

> -Wl,-rpath,/home/arcamax/lib

这应该告诉它在标准位置之前在 /home/arcamax/lib 中查找共享库。然后我在 Ubuntu 机器上使用“ldd”来构建所需库的列表，并将这些库复制到 CentOS 机器上的 /home/arcamax/lib 中。当我尝试在 CentOS 机器上运行程序时，我得到：

当我在 CentOS5 机器上运行 ldd 时，我得到如下输出：

> ```
>  libcrypto.so.1.0.0 => /home/arcamax/lib/libcrypto.so.1.0.0 (0x00002b3557f54000)
>     libpq.so.5 => /home/arcamax/lib/libpq.so.5 (0x00002b355831c000)
>     libstdc++.so.6 => /home/arcamax/lib/libstdc++.so.6 (0x00002b3558548000)
>     libm.so.6 => /home/arcamax/lib/libm.so.6 (0x00002b3558849000)
>     libgcc_s.so.1 => /home/arcamax/lib/libgcc_s.so.1 (0x00002b3558b43000)
>     libc.so.6 => /home/arcamax/lib/libc.so.6 (0x00002b3558d59000)
>     libpthread.so.0 => /home/arcamax/lib/libpthread.so.0 (0x00002b3559117000)
>     libdl.so.2 => /home/arcamax/lib/libdl.so.2 (0x00002b3559334000)
>     libz.so.1 => /home/arcamax/lib/libz.so.1 (0x00002b3559538000)
>     libssl.so.1.0.0 => /home/arcamax/lib/libssl.so.1.0.0 (0x00002b3559750000)
>     libkrb5.so.3 => /home/arcamax/lib/libkrb5.so.3 (0x00002b35599ac000)
>     libcom_err.so.2 => /home/arcamax/lib/libcom_err.so.2 (0x00002b3559c7a000)
>     libgssapi_krb5.so.2 => /home/arcamax/lib/libgssapi_krb5.so.2 (0x00002b3559e7f000)
>     libldap_r-2.4.so.2 => /home/arcamax/lib/libldap_r-2.4.so.2 (0x00002b355a0bd000)
>     /lib64/ld-linux-x86-64.so.2 (0x00000035aa800000)
>     libk5crypto.so.3 => /home/arcamax/lib/libk5crypto.so.3 (0x00002b355a30d000)
>     libkrb5support.so.0 => /home/arcamax/lib/libkrb5support.so.0 (0x00002b355a535000)
>     libkeyutils.so.1 => /home/arcamax/lib/libkeyutils.so.1 (0x00002b355a73d000)
>     libresolv.so.2 => /home/arcamax/lib/libresolv.so.2 (0x00002b355a942000)
>     liblber-2.4.so.2 => /home/arcamax/lib/liblber-2.4.so.2 (0x00002b355ab5e000)
>     libsasl2.so.2 => /home/arcamax/lib/libsasl2.so.2 (0x00002b355ad6c000)
>     libgssapi.so.3 => /home/arcamax/lib/libgssapi.so.3 (0x00002b355af88000)
>     libgnutls.so.26 => /home/arcamax/lib/libgnutls.so.26 (0x00002b355b1c6000)
>     libgcrypt.so.11 => /home/arcamax/lib/libgcrypt.so.11 (0x00002b355b482000)
>     libheimntlm.so.0 => /home/arcamax/lib/libheimntlm.so.0 (0x00002b355b701000)
>     libkrb5.so.26 => /home/arcamax/lib/libkrb5.so.26 (0x00002b355b908000)
>     libasn1.so.8 => /home/arcamax/lib/libasn1.so.8 (0x00002b355bb8e000)
>     libhcrypto.so.4 => /home/arcamax/lib/libhcrypto.so.4 (0x00002b355be2f000)
>     libroken.so.18 => /home/arcamax/lib/libroken.so.18 (0x00002b355c063000)
>     libtasn1.so.3 => /home/arcamax/lib/libtasn1.so.3 (0x00002b355c278000)
>     libp11-kit.so.0 => /home/arcamax/lib/libp11-kit.so.0 (0x00002b355c48a000)
>     libgpg-error.so.0 => /home/arcamax/lib/libgpg-error.so.0 (0x00002b355c69c000)
>     libwind.so.0 => /home/arcamax/lib/libwind.so.0 (0x00002b355c8a0000)
>     libheimbase.so.1 => /home/arcamax/lib/libheimbase.so.1 (0x00002b355caca000)
>     libhx509.so.5 => /home/arcamax/lib/libhx509.so.5 (0x00002b355ccd9000)
>     libsqlite3.so.0 => /home/arcamax/lib/libsqlite3.so.0 (0x00002b355cf23000)
>     libcrypt.so.1 => /home/arcamax/lib/libcrypt.so.1 (0x00002b355d1c7000) 
> ```

请注意，有一个库 /lib64/ld-linux-x86-64.so.2 仍在从系统位置提取。我不知道为什么会这样。当我尝试运行程序时，我得到：

> 重定位错误：/home/arcamax/lib/libgnutls.so.26：符号时间，版本 GLIBC_2.2.5 未在带有链接时间参考的文件 libc.so.6 中定义

一些程序失败 ldd 并显示以下消息：

> 不是动态可执行文件

当我尝试运行这些程序时，它们会报告与其他程序相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:06:40.837

不要在使用较新 glibc 的系统上编译。在旧 glibc 的机器上运行它们将非常困难或不可能。

相反，您应该在较旧的 CentOS 系统上编译，二进制文件将在较新的系统上愉快地运行。

> 我想开始使用一些 C++11 特性。这些在 Ubuntu 12.04 上受支持，但在 CentOS 5 上不受支持。

不，它们受恰好安装在 Ubuntu 12.04 上的 GCC 版本支持，“Ubuntu”不支持它们。在 CentOS 主机上安装相同的 GCC 版本，在那里编译时可以使用 C++11 功能。

[安装 GCC](http://gcc.gnu.org/wiki/InstallingGCC)很容易，只需阅读该 wiki 页面，不要尝试替换您的系统编译器，即安装到`/usr/local`or`/opt`或`$HOME`or 以外的其他地方`/usr`

# eclipse - 车把 js 编辑器。

> ID：13368386
> 
> 赞同：9
> 
> 时间：2012-11-13T20:38:53.450
> 
> 标签：eclipse, ember.js, handlebars.js

最近我开始探索 Ember.js，从他们的网站我了解到 Ember 和 Handlebars 语言之间有很好的协同作用。

我想知道是否有任何编辑器（插件）可以帮助我处理车把自动完成和着色。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-09-09T19:51:45.047

如果您将把手用作 .hbs 文件（无脚本标记），您可以通过配置 2 个设置来启用语法高亮：编辑器和内容类型：

*   Eclipse -> 首选项 -> 常规 -> Content_Types
*   在html下添加*.hbs
*   Eclipse -> 首选项 -> 常规 -> 编辑器 -> 文件关联
*   将 *.hbs 添加到 html 编辑器。
*   关闭编辑器并重新打开
*   [可选] 如果仍然没有突出显示（旧的 Eclipse 版本），请重新启动 Eclipse。

这也适用于 aptana 和 zend 工作室

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:28:46.010

如果你使用 Sublime Text 2，有一个很棒的 Handlebars 包用于语法高亮等。

[https://github.com/nrw/sublime-text-handlebars](https://github.com/nrw/sublime-text-handlebars)

文本伴侣版本：

[https://github.com/drnic/Handlebars.tmbundle](https://github.com/drnic/Handlebars.tmbundle)

它可以手动安装，也可以使用 Sublime Text 2 包管理器安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T07:35:12.570

IntelliJ IDEA（Eclipse 的替代品）有一个把手插件。对于 Emblem，一个类似 Haml 的 Handlebars 版本，最近的插件是 Slim。

# ruby-on-rails - 在聚合函数之前对 ActiveRecord 对象执行行操作

> ID：13368389
> 
> 赞同：2
> 
> 时间：2012-11-13T20:39:08.090
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在尝试根据模型中的第二个变量计算模型中变量的加权平均值，但我无法通过 ActiveRecord 找到方法。

```
class Employer < ActiveRecord::Base
  attr_accessible :name, :number_of_employees, :average_age

  def self.wt_avg_age
    #return sum(number_of_employee * average_age)/sum(number_of_employees)
  end
end 
```

在直接 SQL 中，我会使用：

```
SELECT id, SUM(number_of_employees*average_age)/SUM(number_of_employees) 
FROM employer
GROUP BY name 
```

我能否以雄辩的方式在 ActiveRecord 关系上执行类似的操作（即，无需拉下单独的数组并遍历每条记录以获取我的分子）？我尝试了使用 .select()、.pluck() 和 sum() 的不同组合，但没有任何运气。我无法让 ActiveRecord 对象执行 sumproduct。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:13:17.233

您应该能够执行以下操作：

```
Employer.select("name, (SUM(number_of_employees*average_age)/SUM(number_of_employees)) as sum").group(:name) 
```

这会将 Employer 实例返回给您，但它们将只有 .name 和 .sum 属性。这将运行您想要的确切 SQL 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:17:59.687

看起来`ActiveRecord::Calculations#sum`需要一个块：

```
# File activerecord/lib/active_record/relation/calculations.rb, line 92
def sum(*args)
  if block_given?
    self.to_a.sum(*args) {|*block_args| yield(*block_args)}
  else
    calculate(:sum, *args)
  end
end 
```

（另见[http://api.rubyonrails.org/classes/Enumerable.html#method-i-sum](http://api.rubyonrails.org/classes/Enumerable.html#method-i-sum)）

所以你可以试试：

```
def self.wt_avg_age
  numerator = self.all.sum { |e| e.number_of_employee * e.average_age }
  denominator = self.sum :number_of_employees
  return numerator / denominator
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:10:59.413

试一试，也许它可以工作：

```
def self.wt_avg_age
  a = Employer.sum("number_of_employee * average_age")
  b = Employer.sum('number_of_employees')
  a/b
end 
```

# c - 消耗指针是什么意思？

> ID：13368392
> 
> 赞同：1
> 
> 时间：2012-11-13T20:39:18.470
> 
> 标签：c, terminology

我是 C 和 Cyclone 的新手。我正在阅读 Michael Hicks 的论文[Experience With Safe Manual Memory-Management in Cyclone](http://www.cs.umd.edu/~mwh/papers/ismm.pdf)。

他们说：“我们使用过程内、流敏感、路径不敏感的分析来跟踪唯一指针何时被消耗，在这种情况下，分析会拒绝随后使用该指针的尝试。我们选择了过程内分析来确保模块化检查和路径- 不敏感分析以确保可伸缩性。为了使分析简单，唯一指针的副本（例如，在赋值或函数调用中）被视为消耗指针。

“消耗”指针是什么意思？这是一个标准术语吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:43:29.623

他们正在实现 C 的变体，其中某些指针是唯一的；也就是说，您不能同时拥有同一个指针的两个副本。因此，每当您复制指针（将其分配给另一个变量，将其传递给函数）时，新副本被认为是有效的，而旧副本被认为是无效的。他们称之为“消耗”指针。

在您引用的部分中，在原始论文中，希克斯将“消费”这个词用斜体表示，表明该用法是他定义含义的用法。“消费”指针的定义是跟踪指针何时被复制，并拒绝进一步使用它。

此用法基于以前的用法；例如，如果您查看列出的关于线性类型、别名类型和能力类型的先前工作的参考文献，您会发现它们使用了类似意义上的“消费”一词。来自[Calculus of Capabilities 中的类型化内存管理](http://www.cs.cornell.edu/talc/papers/capabilities.pdf)：“在线性类型系统中，别名将受到微不足道的控制；对区域名称的任何使用都会消耗该名称，确保它不能在其他地方使用。” 因此，该术语基于现有用法，但确切的定义仍需在本文中阐明，因为希克斯将其应用于 C 变体中的指针，而不是类型化 lambda 演算中的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:42:02.910

```
e.g., in an assignment or function call 
```

指针在作为参数分配或传递给函数时被消耗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T20:44:16.883

我认为关键是“后续”这个词，所以使用指针可能意味着任何尝试使用指针

# php - 最佳实践，尽可能快地使用 PHP 导入数据源并在每一行下载图像

> ID：13368405
> 
> 赞同：2
> 
> 时间：2012-11-13T20:40:08.797
> 
> 标签：php, mysql

我有多个 CSV 文件（目前为 150k-500k 行），其中包含要导入我的 MySQL 数据库的数据。

这是我目前的工作流程：

1.  将文件导入 db 中的临时表（原始行）
2.  一次选择一行，将其分解为数组，清理并导入。

每个项目都有一个图像，我使用 curl 下载它。下载后，我使用 codeigniters resizer (gd2) 调整它的大小。这两个步骤都是绝对必要的，并且需要时间。我希望（需要）每天删除并重新导入新文件以保持内容新鲜。

临时数据库保存的原因是我是否可以使用 crontab 生成多个导入脚本实例。这并没有给我想要的结果。

你对我如何以“快速”的方式做到这一点有任何设计想法吗？

该站点在 4GB 1.8 Ghz 双核专用服务器上运行。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:59:47.877

MySQL 有一个名为的功能`LOAD DATA INFILE`，它可以完全按照您正在尝试执行的操作。

从这个问题来看，目前尚不清楚您是否已经在使用它？但即使你是，听起来你可以改进你做这件事的方式。

像这样的 SQL 脚本可以为您工作：

```
LOAD DATA INFILE filename.csv
INTO table tablename
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
(
  field1,
  field2,
  field3,
  @var1,
  @var2,
  etc
)
SET
  field4 = @var1 / 100,
  field5 = (SELECT id FROM table2 WHERE name=@var2 LIMIT 1),
  etc 
```

这是一个相当复杂的示例，展示了如何将 CSV 数据直接导入表中，并一次性将其操作为正确的格式。

这样做的好处是它实际上非常快。我们使用它每周导入 500,000 条记录文件，它比读取文件和写入数据库的 PHP 程序快几个数量级。我们确实从 PHP 程序运行它，但 PHP 不负责任何导入；MySQL 通过一个查询自己完成所有事情。

在我们的例子中，即使我们确实对导入数据进行了很多操作，我们仍然将其写入临时表，因为在它进入主表之前我们还有大约十几个进一步的处理步骤。但是在您的情况下，听起来这种方法可以使您完全不必使用临时表。

MySQL 手册页：[http ://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

至于下载图像，我不知道如何加快速度，除了关注哪些导入的记录已更新，并且只获取已更改记录的图像。但我猜这是否是一个可行的解决方案，那么您可能已经在这样做了。

不过，我希望 MySQL 的建议是有帮助的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:37:21.330

最快的事情是使用线程。

我建议使用两个工人，一个连接到 MySQL，一个用于下载和调整图像大小，打开 CSV，使用 fgets 或其他任何方式读取它，每行创建一个可插入数据库的 Stackable，将该可堆栈传递给另一个将下载文件（并知道存储数据的行的 ID）并调整其大小。您可能想雇用不止一名工人来处理图像......

[http://docs.php.net/Worker](http://docs.php.net/Worker)

[http://docs.php.net/Stackable](http://docs.php.net/Stackable)

[http://docs.php.net/Thread](http://docs.php.net/Thread)

（请务必参考 docs.php.net，文档构建有点落后）

[http://pthreads.org](http://pthreads.org)（在索引上找到事物如何工作的基本细分）

[http://github.com/krakjoe/pthreads](http://github.com/krakjoe/pthreads)（如果您想在本地测试，可以在此处下载 Windows）

[http://pecl.php.net/package/pthreads](http://pecl.php.net/package/pthreads)（最新版本有点过时了）

# splunk - 使用 Rest API 搜索 Splunk，无需保存搜索

> ID：13368407
> 
> 赞同：2
> 
> 时间：2012-11-13T20:40:12.233
> 
> 标签：splunk

我对使用 Splunk 非常陌生，并且有一个非常基本的问题。是否可以在不使用已保存搜索的情况下使用 REST API 来查询 Splunk？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T21:20:15.670

您可以将搜索字符串指定为[导出](http://docs.splunk.com/Documentation/Splunk/5.0/RESTAPI/RESTsearch#search.2Fjobs.2Fexport)端点的参数并获取结果，而无需在服务器上保存搜索。

```
curl -ku admin:changeme https://localhost:8089/servicesNS/admin/search/search/jobs/export -d search="search index%3D_internal | head 3" -d output_mode=csv 
```

output_mode 是一个可选参数。使用 xml 作为默认值，您还可以指定 json、csv 或 xml。

如果您想坚持您选择的语言，您也可以使用其中一种[Splunk SDK 。](http://dev.splunk.com/view/sdks/SP-CAAADP7)SDK 使您可以更轻松地与 Splunk 交谈。

-尼拉杰。

# z3 - 在 Windows 上安装 Z3 + Python

> ID：13368415
> 
> 赞同：1
> 
> 时间：2012-11-13T20:40:57.313
> 
> 标签：z3

我很难让 Z3 Python 前端在来自 codeplex 的 Z3 版本 4.3.0 的 Windows 7 上工作。作为 MSI 文件分发的旧版本 4.1.2 在我的 Windows 7 上运行良好。

首先，我不能使用来自 codeplex 的源代码来构建 Z3，因为我没有 Visual Studio 命令提示符（我真的需要它吗？）。所以我下载了 32 位版本的二进制文件并将该目录添加到我的 PYTHONPATH 中。这允许我这样做 `import z3`，但由于错误，我无法进一步使用它`Z3Exception: 'init(Z3_LIBRARY_PATH) must be invoked before using Z3-python'`。该文件`z3.dll` 不包含在下载文件中。

在我的 Mac 或 Linux 上设置 Z3 v4.3 没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:29:43.123

Visual Studio Express 应该足以编译 Z3 并且可从 Microsoft 免费获得，请[点击此处](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)。但是，使用 Z3Py 不需要从头开始编译 Z3。

从版本 4.3.0 开始，该 DLL 现在称为 libz3.dll，我刚刚验证它确实包含在 Codeplex 的下载中，并且当我将它添加到 PYTHONPATH 时它执行良好。我可以想象你的情况出了什么问题是你将目录 C:...\z3-4.3.0-x86 添加到 PYTHONPATH 中，而 C:...\z3-4.3.0-x86 是必要的\bin 被添加（注意最后的 \bin）。

# dns - 是否可以将域名指向我的 Google 驱动器？

> ID：13368418
> 
> 赞同：-1
> 
> 时间：2012-11-13T20:41:08.770
> 
> 标签：dns, share, google-drive-api, domain-name

是否可以将域名指向我的 Google 驱动器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:23:33.970

您可能可以在 PHP 中使用[readfile来执行此操作。](http://www.php.net/manual/en/function.readfile.php)这是他们给出的例子：

```
<?php
    $file = 'monkey.gif';

    if (file_exists($file)) {
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename='.basename($file));
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate');
        header('Pragma: public');
        header('Content-Length: ' . filesize($file));
        ob_clean();
        flush();
        readfile($file);
        exit;
    }
?> 
```

替换`monkey.gif`为公共文件的 URL。

# api - 如何以编程方式搜索 CNN 头条新闻的存档？

> ID：13368420
> 
> 赞同：1
> 
> 时间：2012-11-13T20:41:16.147
> 
> 标签：api

屏幕抓取是实现此目的的最佳方法吗？

我找不到 CNN API，但是否有第三方 API 可以让您访问 CNN 头条新闻的档案，也许是通过过去的 RSS 提要间接访问？

我只需要访问最近 60 天的头条新闻。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-06T03:59:48.120

CNN 引入了开发者 API 密钥，但你必须申请它们。我能够为一个项目申请一个。您可以执行的查询数量有限。 [这是链接](https://developer.cnn.com/page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:10:00.733

您可以在此处获取 RSS 源：[http](http://www.cnn.com/services/rss/) ://www.cnn.com/services/rss/ 您可能还想看看使用 feedburner。要以编程方式抓取 CNN RSS 提要，请查看 Python 模式之类的库。

# c++ - 类和指针的 C++ 类型转换

> ID：13368422
> 
> 赞同：2
> 
> 时间：2012-11-13T20:41:22.100
> 
> 标签：c++, types, casting

```
class A{
public:
 virtual void foo() {cout << "A::foo" << endl;}
};

class B: public A{
public:
virtual  void foo() {cout << "B::foo" << endl;}
};

int main(void){
 A a;
 B b;
 A acast=(A)B;
 A *apointer=&B;
 acast.foo(); // A::foo
 apointer->foo() //B::foo
 return 0;
} 
```

为什么这两个打印的行为不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T20:42:59.830

`A acast=(A)b;`（假设这是您实际拥有的）**切片**对象并使用切片对象复制构造一个`A`. 它相当于`A acast=A(b);`. `acast`是动态和静态类型`A`- 不再是`B`. 这是一个全新的对象。

`A *apointer=&b;`相比之下， 是指向动态类型为 的对象的指针`B`。原始`b`对象没有被修改，它只是由指向基类型的指针引用。由于动态类型是`B`，因此调用了`foo`from方法`B`（因为它是`virtual`并且这就是多态性的工作方式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T20:43:36.760

对象切片，`A acast=(A)b;`切片 B

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T20:44:35.103

第一个示例是显式转换，编译器将对象理解为 A 类型。在第二个示例中，您只是设置指针，编译器仍将对象视为 B 类型。

# machine-learning - Weka ARFF一代

> ID：13368424
> 
> 赞同：0
> 
> 时间：2012-11-13T20:41:23.730
> 
> 标签：machine-learning, weka, text-mining, arff

我正在尝试从我拥有的 csv 数据文件生成一个 .arff 文件。现在我对 Weka 完全陌生，并且在一天前就开始使用它。对于初学者，我正在尝试一个简单的 Twitter 情绪分析。我已经在 CSV 中生成了训练数据。CSV文件内容如下：

```
 tweet,affinScore,polarity
 ATAUTHORcfoblog is giving away a $25 Amex gift card (enter to win over $600 in prizes!) http://t.co/JD8EP14c ,4,4
"American Express has always been my dark horse acquirer of  ATAUTHORFoursquare. Bundle in Square-like payments & its a lite-retailer platform, no? ",0,1
African-American Demos Express Ethnic Identity Differently http://t.co/gInv4bKj via  ATAUTHORmediapost ,0,3
Google ???????? Visa ? American Express  http://t.co/eEZTSiHY ,0,4
Secrets to Success from Small-Business Owners : Lifestyle :: American Express OPEN Forum http://t.co/b85F8JX0 via  ATAUTHOROpenForum ,2,1
RT  ATAUTHORhunterwalk: American Express has always been my dark horse acquirer of  ATAUTHORFoursquare. Bundle in Square-like payments & its a lite ... ,0,1
Winning Surveys $1500 american express Huggies Sweeps http://t.co/WoaTFowp ,4,1
I root for Square mostly because a small business that takes Square is also one that takes American Express. ,0,1
I dont know how bitch be acting American Express but they cards be saying DEBIT ON IT HAVE A ?? PLEASE!!! ,-5,2
Uh oh... RT  ATAUTHORBlackArrowBella: I dont know how bitch be acting American Express but they cards be saying DEBIT ON IT HAVE A ?? PLEASE!!! ,-5,2
Just got another credit card. A Blue Sky card with American Express. Its gonna help pay for the honeymoon!  ATAUTHORAmericanExpress ,-1,1
Follow  ATAUTHORShaveMagazine and ReTweet this msg to be entered to #Win an American Express Gift card. Winners contacted bi-weekly by direct msg! ,2,4
American Express Gold zakelijk aanvragen: http://t.co/xheZwmbt ,0,3
RT  ATAUTHORhunterwalk: American Express has always been my dark horse acquirer of  ATAUTHORFoursquare. Bundle in Square-like payments & its a lite ... ,0,1 
```

这里第一个属性是实际推文，第二个是 AFFIN 分数，第三个是实际分类类别（1-正面，2-负面，3-中性，4-垃圾邮件）

现在我尝试使用代码从中生成 .arff 格式：

```
import weka.core.Instances;
import weka.core.converters.ArffSaver;
import weka.core.converters.CSVLoader;

import java.io.File;

public class CSV2Arff {
  /**
   * takes 2 arguments:
   * - CSV input file
   * - ARFF output file
   */
  public static void main(String[] args) throws Exception {
    if (args.length != 2) {
      System.out.println("\nUsage: CSV2Arff <input.csv> <output.arff>\n");
      System.exit(1);
    }

    // load CSV
    CSVLoader loader = new CSVLoader();
    loader.setSource(new File(args[0]));
    Instances data = loader.getDataSet();

    // save ARFF
    ArffSaver saver = new ArffSaver();
    saver.setInstances(data);
    saver.setFile(new File(args[1]));
    saver.setDestination(new File(args[1]));
    saver.writeBatch();
  }
} 
```

这会生成 .arff 文件，看起来有点像：

```
 @relation file

@attribute tweet {_ATAUTHORcfoblog_is_giving_away_a_$25_Amex_gift_card_(enter_to_win_over_$600_in_prizes!)_http://t.co/JD8EP14c_,'American_Express_has_always_been_my_dark_horse_acquirer_of__ATAUTHORFoursquare._Bundle_in_Square-like_payments_&_its_a_lite-retailer_platform,_no?_',African-American_Demos_Express_Ethnic_Identity_Differently_http://t.co/gInv4bKj_via__ATAUTHORmediapost_,Google_????????_Visa_?_American_Express__http://t.co/eEZTSiHY_,Secrets_to_Success_from_Small-Business_Owners_:_Lifestyle_::_American_Express_OPEN_Forum_http://t.co/b85F8JX0_via__ATAUTHOROpenForum_,RT__ATAUTHORhunterwalk:_American_Express_has_always_been_my_dark_horse_acquirer_of__ATAUTHORFoursquare._Bundle_in_Square-like_payments_&_its_a_lite_..._

@data
_ATAUTHORcfoblog_is_giving_away_a_$25_Amex_gift_card_(enter_to_win_over_$600_in_prizes!)_http://t.co/JD8EP14c_,4,4
'American_Express_has_always_been_my_dark_horse_acquirer_of__ATAUTHORFoursquare._Bundle_in_Square-like_payments_&_its_a_lite-retailer_platform,_no?_',0,1
African-American_Demos_Express_Ethnic_Identity_Differently_http://t.co/gInv4bKj_via__ATAUTHORmediapost_,0,3
Google_????????_Visa_?_American_Express__http://t.co/eEZTSiHY_,0,4
Secrets_to_Success_from_Small-Business_Owners_:_Lifestyle_::_American_Express_OPEN_Forum_http://t.co/b85F8JX0_via__ATAUTHOROpenForum_,2,1
RT__ATAUTHORhunterwalk:_American_Express_has_always_been_my_dark_horse_acquirer_of__ATAUTHORFoursquare._Bundle_in_Square-like_payments_&_its_a_lite_..._,0,1 
```

我是 Weka 的新手，但根据我的阅读，我怀疑这个 ARFF 的格式不正确。任何人都可以对此发表评论吗？

另外，如果错了，有人可以指出我到底哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:24:42.800

确保将`tweet`属性的类型设置为任意字符串，而不是*分类*属性，这似乎是默认值。这不能很好地扩展，因为它会将每条推文的副本放在类型定义中。

请注意，对于推文内容的实际分析，您可能需要进一步预处理它们。您可能需要文本的稀疏向量表示，而不是长字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:34:39.873

如果您使用前面提到的 UI，那么您可以直接将文件加载到 Weka。

如果您只想根据 CSV 文件生成 ARFF 文件，您可以执行以下操作。这取自作为 Weka 一部分的 CSV2Arff 工具。

```
import weka.core.Instances;
import weka.core.converters.ArffSaver;
import weka.core.converters.CSVLoader;
import java.io.File;

public class CSV2Arff {
public static void main(String[] args) throws Exception {
if (args.length != 2) {
  System.out.println("\nUsage: CSV2Arff <input.csv> <output.arff>\n");
  System.exit(1);
}

// load CSV
CSVLoader loader = new CSVLoader();
loader.setSource(new File(args[0]));
Instances data = loader.getDataSet();

// save ARFF
ArffSaver saver = new ArffSaver();
saver.setInstances(data);
saver.setFile(new File(args[1]));
saver.setDestination(new File(args[1]));
saver.writeBatch();
}
} 
```

# java - 在 ArrayList 中搜索字符串；总是返回假

> ID：13368426
> 
> 赞同：1
> 
> 时间：2012-11-13T20:41:33.417
> 
> 标签：java, search, arraylist

我在班上的这种方法上遇到了麻烦。它总是返回假。乘客是一个单独的类别。这是我的火车类中的一个方法，它创建一个乘客对象的数组列表。我正在制作一种方法，它将在 ArrayList 乘客列表中搜索以名称作为参数的 Passanger 对象。

```
public boolean search(String a){
    Passenger temp;
    boolean query = false;
    for (int i =0; i<passengerList.size(); i++)
    {
        temp=passengerList.get(i);
        if (temp.getName() == a)
        {
            query = true;
        }
    }
    return query;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:42:11.630

```
 if (temp.getName() == a) 
```

应该

```
 if (temp.getName().equals(a)) 
```

字符串比较应始终使用 equals() 方法而不是 == （字符串文字除外）。

如果`temp.getName()`两者`a`都没有指向同一个对象， == 条件将失败。

`==`检查引用是否相等。`equals()`检查内容是否相等。

本[教程](http://tothepointtalks.blogspot.com/2009/05/equals-vs-in-java_06.html)可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:42:52.623

`if (temp.getName() == a)`应该是`if (temp.getName().equals(a))`。

前者比较引用是否相等。后者实际上检查字符串值是否相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:03:31.680

我建议将这段代码编写得更优雅、更简洁（检查 null）：

```
public boolean search(String a){  
    boolean query = false;
    for (Passenger temp : passengerList)
    {
        if (temp != null && temp.getName()!=null && temp.getName().equals(a))
        {
            query = true;
        }
    }
    return query;
} 
```

# php - 一旦变量在另一个图像文件中发生更改，重新加载或刷新图像？

> ID：13368428
> 
> 赞同：0
> 
> 时间：2012-11-13T20:41:38.733
> 
> 标签：php, ajax, reload

我有一个表单可以让用户选择课程列表，例如，选择后的值等于课程代码 111。我可以使用此选择通过 AJAX 更新 php 图形生成文件中的变量.... 问题是我需要动态刷新或重新加载这些图像。我像这样显示图像；

```
<?php
for ($i = 1; $i < 39; $i++)
{
    $sqlquestion = 'SELECT Question FROM tquestion WHERE QuestionID = '.$i.'';
    $questiontext = mysql_query($sqlquestion,$odbc) or die ("can not run query");
    $q = mysql_fetch_row($questiontext);  
?>
    <div id="bars"><img src="bars.php?graph=<?php echo $i;?>"></div>
<?php
} 
```

这个循环为我提供了 38 个图表（调查中的每个问题一个）

更改变量后，我被困住如何重新显示这些图表。

我希望我有任何帮助将不胜感激:) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:03:06.980

在您的 ajax 请求成功后，在您的成功函数末尾添加以下代码。

```
$('#bars img').attr("src", "path/to/new/image.jpg"); // replace path with your image path 
```

如果您使用 jQuery ajax，则此代码应位于成功函数的末尾，如下所示

```
$.ajax({

success: function(){
         // but the code at end of this function 
},
}); 
```

我希望这有帮助

# java - 即使没有要显示的内容也使 JList 可见

> ID：13368429
> 
> 赞同：3
> 
> 时间：2012-11-13T20:41:48.470
> 
> 标签：java

我正在处理一项需要使用`JList`.

基本上它是一个订购购物车。我有 2 个列表：一个包含所有可供购买的物品，另一个包含“添加”到购物车的物品。这一切都很好。但是，当其中还没有任何物品时，我很难弄清楚如何显示空购物车列表。我有一个空`Panel`的，直到它被填满。

我怎样才能让它一直可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-23T05:43:06.300

我一直在为您提出的问题寻找解决方案，因为我需要相同的功能。

我寻求教程，它指向我[这里](http://www.cs.cf.ac.uk/Dave/HCI/HCI_Handout_CALLER/node144.html#SECTION000123100000000000000)。***基本上，您只需将列表添加到 JScrollPane 的视口中***。这个对我有用。尝试测试并运行我给定链接上显示的代码。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:58:55.390

您只需要设置默认大小和可见行数。

```
JList jlist = new JList(model);
jlist.setVisibleRowCount(10);
jlist.setFixedCellHeight(15);
jlist.setFixedCellWidth(100); 
```

# parsing - 如何在使用谷歌应用脚 本的 UrlFetchApp 获取 HTTPResponse 时将字符串转换为 dom

> ID：13368430
> 
> 赞同：1
> 
> 时间：2012-11-13T20:41:49.183
> 
> 标签：parsing, dom, google-apps-script, javascript

在 Google Apps 脚本中，我想通过 UrlFetchApp 获得一个 http 页面，从而产生一个 HTTPResonse。该响应给了我一个字符串，但不是一个 DOM。所以我正在寻找一些可以解析字符串并将其转换为 DOM 的库。这个库不应该假设存在于浏览器中，所以描述了很多技巧

[解析和处理作为字符串输入的 DOM](https://stackoverflow.com/questions/8625928/parse-and-handle-dom-that-came-as-a-string-input)

或者

[在 Javascript 中解析 HTML 的最佳方法](https://stackoverflow.com/questions/4247838/best-way-to-parse-html-in-javascript)

行不通，因为它们（似乎）都依赖于浏览器内部。所以我正在寻找一个 javascript 库，它以某种方式独立地进行解析。

存在这样的东西吗？

# jquery - 如何通过 jQ.append() 传递换行符？

> ID：13368432
> 
> 赞同：0
> 
> 时间：2012-11-13T20:41:56.157
> 
> 标签：jquery, html, append, line-breaks

[使用来自http://www.davidjrush.com/blog/2011/12/simple-jquery-tooltip/](http://www.davidjrush.com/blog/2011/12/simple-jquery-tooltip/)的一些简单 jQ 逻辑来创建类似效果的简单工具提示。

但是，当我在 JQ 代码中添加换行符时，一切都变南了，逻辑停止工作（FF）。

作品：

```
$(this).append('<div class="tooltip"><p>This is a tooltip. It is typically used to explain something to a user without taking up space on the page.</p></div>'); 
```

才不是：

```
$(this).append('
<div class="tooltip"><p>This is a tooltip. It is typically used to explain something to a user without taking up space on the page.</p></div>
'); 
```

检查 jQ 文档，它表明我找不到任何关于这是一个问题的信息。

任何人都知道它为什么会中断和/或我如何将换行符传递给 jQ.append()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-13T02:54:14.643

在追加内容中，您必须使用反斜杠跳过换行符。

在你的情况下：

```
$(this).append('\
<div class="tooltip"><p>This is a tooltip. It is typically used to explain something to a user without taking up space on the page.</p></div>\
');
```

# jquery - 如何知道 ajax 何时在 $.post 中开始和结束？

> ID：13368437
> 
> 赞同：-1
> 
> 时间：2012-11-13T20:42:11.483
> 
> 标签：jquery, ajax

在 jquery 中，有`.ajaxComplete()`, 。`ajaxStart()`事件，以便您可以显示加载图像，直到请求完成。我使用 $.post 并想知道是否有相同的事件，`$.post`或者我如何`$.post`在单击按钮时显示加载图像直到请求完成？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:03:32.927

**ajaxStart**和**ajaxComplete**是每次发出 ajax 请求时触发的全局处理程序，这意味着您不需要更改您的发布请求，只需添加以下代码：

```
$('.log').ajaxStart(function () {
    $(this).append('<h1>ajax start.</h1>');
});

$(".log").ajaxComplete(function () {
    $(this).append("<h1>ajax complete.</h1>");
}); 
```

和 html 也可用于显示/隐藏加载器：

```
<div class="log">      
</div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T20:50:57.640

**$.post()**有一个成功回调，我相信。所以开始在点击或任何启动 ajax 调用时显示加载 img，并将其隐藏在成功回调中。

如果您使用 ajax 调用同时触发了覆盖/微调器的外观，则在完成后将其隐藏：

```
 $.post('ajax/test.html', function(data) {
      $('#spinner').hide();
   }); 
```

您也可以使用`remove()`而不是`hide()`

# javascript - 自定义 HTML 下拉菜单中的“触摸和感觉”

> ID：13368439
> 
> 赞同：0
> 
> 时间：2012-11-13T20:42:14.087
> 
> 标签：javascript, html, css, menu, mousehover

`HTML`我在页面 +上制作了一个自定义下拉菜单`JavaScript`。我希望该菜单如下所示：

*   单击“Freunde”按钮时，将出现下拉菜单
*   再次单击按钮时，下拉菜单消失
*   当鼠标光标离开按钮+下拉菜单的“区域”时消失

下拉菜单由一个主 div 组成，其中包含多个 div（“菜单项”）。

我的第一种方法是`onmouseout()`在下拉菜单的主 div 上放置一个，但存在以下问题：当我将鼠标悬停在内部 div 上时，这`onmouseout()`是真的，并且由于内部 div 填充了整个主 div，所以下降仅当用户不将鼠标悬停在其上时，下拉菜单才可见。

所以我尝试用它来解决类似于 JQuery 灯箱的问题，即在整个屏幕上放置一个“背景”div 并将下拉菜单粘贴到那里，然后在那里设置`onmouseover()`。这几乎是完美的，但“Freunde”按钮也会受到影响。

那么有没有办法将不同元素的事件结合起来呢？像

```
if(cursor is not over Button && cursor is not over DDMenu)  set invisible 
```

我在下图中标记了所需的

![在此处输入图像描述](../Images/1b2b99e793cdef2c5914e6bc367c9857.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:07:42.993

假设您设置为

```
<ul>
    <li></li>
    <li></li>
</ul> 
```

你可以像这样设置你的 CSS：

```
#nav ul li ul { display: none; }
#nav ul li.active:hover ul { display: block; } 
```

然后像这样设置你的JS：

```
var menuClick = function() {
    $(this).toggleClass('active');
    menuHover();
};
var menuHover = function() {
    $('#nav li.active').hover(function() {

    }, function() {
        $(this).removeClass('active');
    });
});

$('#nav > ul > li').on('click', menuClick); 
```

当然，这绝对是粗略的编码，但我认为它应该可以工作。（这也假设您使用的是 jQuery 库）。

# java - lwjgl里面有GLfloat吗？

> ID：13368440
> 
> 赞同：2
> 
> 时间：2012-11-13T20:42:17.227
> 
> 标签：java, opengl, lwjgl

有什么替代方法`GLfloat`吗`lwjgl`？OpenGL 有许多使用`GLfloat`. `GLfloat`甚至有必要吗`lwjgl`？我不能用普通的替换它`float`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:38:18.673

在 Java 中，它只是一个普通的旧 Java `float`，你根本不需要`GLfloat`。lwjgl 中的所有 API 都是根据 Java 原始类型定义的`float`。

（在我所知道的所有 C 实现中，`GLfloat`也只是陈旧`float`的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:10:09.817

您必须使用 lwjgl 实用程序来创建一个浮点缓冲区来代替 glfloat 数组。位于此导入中。导入 org.lwjgl.BufferUtils；

例如：

```
lightPos = BufferUtils.createFloatBuffer(4);
lightPos.put(1).put(1).put(3).put(0).flip();
difuseLight = BufferUtils.createFloatBuffer(4);
difuseLight.put(10.0f).put(10.0f).put(10.0f).put(1.0f).flip();
ambientLight = BufferUtils.createFloatBuffer(4);
ambientLight.put(.75f).put(.75f).put(.75f).put(1).flip();
glEnable(GL_DEPTH_TEST);
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glLight(GL_LIGHT0, GL_LIGHT_MODEL_AMBIENT, ambientLight);
glLight(GL_LIGHT0, GL_SPECULAR, difuseLight); 
```

# jquery - 居中设置宽度的“ul”元素

> ID：13368452
> 
> 赞同：0
> 
> 时间：2012-11-13T20:42:46.690
> 
> 标签：jquery, html, css

我想将未排序的列表设置为“背景”。为此，我将其指定为非常宽，因此它与打开页面的任何屏幕（包括 2560 像素宽度）匹配。但除非有什么技巧，否则我不能让它完全以 CSS 为中心。我愿意走jquery方式。从技术上讲， ul 将具有与 background-position:top center 相同的效果；

我没有附加代码，而是按照它应该工作的方式附加图像（添加代码）

```
<div style="background-color:black; width:100%; overflow:hidden; height:302px; text-align:center; position:relative">
<ul style="padding:0px; margin:0px; text-align:center; width:2560px; height:100%; margin:0 auto 0; position:relative;">
    <li class="image"></li><li class="image"></li><li class="image"></li><li class="image"></li><li class="image"></li><li class="image">

</ul>
</div> 
```

我使用了内联 CSS，所以我想做什么更清楚。

![在此处输入图像描述](../Images/e546dbb251dcbca072685321e16aec4b.png)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:49:14.710

这是你想要的[小提琴吗？](http://jsfiddle.net/wpnFZ/)我认为您说“背景”时没有正确解释

CSS

```
ul{
    list-style-type: none;
    margin: 0;
    position: relative;
    text-align: center;
    width: 100%;
    background:#FF0000;
}

ul li {
    display: inline-block;
    height: 65px;
    overflow: hidden;
    padding: 0;
    background:#0000FF;
    line-height:65px;
    color:#FFF;
    padding:0 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:03:25.070

你想完成这样的事情吗？

只要`<ul>`将`top: 50%;`设置`margin-top`为`<ul>`. 例如，如果`<ul>`高度为`100px`，则需要设置`margin-top: -50px;`以`top: 50%; position: absolute;`使 垂直居中`<ul>`于屏幕中心。

如果您事先不知道高度`<ul>`，我添加了一些 jQuery 来确定高度并相应地调整 margin-top。您可以`<div>`在 jsFiddle 上更改容器的高度，以查看`<ul>`无论容器的高度如何，它都会垂直居中。

[http://jsfiddle.net/kreCe/1/](http://jsfiddle.net/kreCe/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T23:58:26.917

仅供参考，解决方案在于 display:block-inline。：） 感谢你的帮助

# javascript - Meteor.call("function",arg) 没有同步发生

> ID：13368456
> 
> 赞同：5
> 
> 时间：2012-11-13T20:43:07.190
> 
> 标签：javascript, node.js, meteor

尽管有人建议这是一个同步调用，但我目前没有得到以下函数的任何返回值。如果我异步执行（即 function(error, blah) { console.log(blah); }），我会得到正确的预期输出。

```
Template.file_nav.files = function(path) {
  path = path || "/";
  var x = Meteor.call('get_files', path);
  return x;
} 
```

这是“get_files”方法的服务器端代码：

```
 Meteor.methods( {
    get_files : function get_files(path) {
      return [
        { "name" : " bob" }, { "name" : "alice" },
      ];
    } 
```

此外，这是正确调用的 HTML 部分，以防相关：

```
<template name="file_nav">
  <div>
    <ul style="dirnav">
    {{#each files}}
    {{#if isDirectory this}}
      <li><a href="javascript:void(0)" onclick="get_directory('{{name}}')">{{
    {{else}}
      <li><a href="javascript:void(0)" onclick="get_file('{{name}}')">{{name}
    {{/if}}
    {{/each}}
    </ul>
  </div>
</template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:33:11.817

如果您阅读相关文档的正文（http://docs.meteor.com/#meteor_call），您会看到它说：

*“在客户端，如果你不传递回调并且你不在存根中，调用将返回未定义，你将无法获取方法的返回值”*

所以你看到的行为是你应该期待的。我认为这里的文档可能会更清楚一些。

# java - reflections.getTypesAnnotatedWith(...) 找到类，但 getAnnotations().length 为 0

> ID：13368460
> 
> 赞同：3
> 
> 时间：2012-11-13T20:43:21.333
> 
> 标签：java, reflection, reflections

使用 Java[反射库](http://code.google.com/p/reflections/)时，我可以正确找到用注释装饰的类：

```
Set<Class<?>> annotated = reflections.getTypesAnnotatedWith(CommandName.class); 
```

但是当我尝试查看每个类上有多少注释时，我总是看到零：

```
for(Class c : annotated)
{
     int numAnnotations = c.getAnnotations().length;
} 
```

为什么`c.getAnnotations()`返回一个长度为 0 的数组？事实上，在调试器中，所有的字段（除了`name`）`c`都是`null`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:54:45.053

确认，结果注释不会保留到运行时，除非你用@Retention(RetentionPolicy.RUNTIME) 标记它们。这解决了它。奇怪的是，该类被包含在集合中。我认为这将是全部或全部。

# jquery - 命令清线

> ID：13368463
> 
> 赞同：-1
> 
> 时间：2012-11-13T20:43:32.767
> 
> 标签：jquery, html, canvas

我正在使用 jquery 在画布上画线。我的屏幕上有 3 个不同的按钮。当用户单击特定按钮时，它会画一条线。当用户单击任何其他按钮时，我需要清除该行。我想我的问题是您使用什么命令来确保当用户单击任何其他按钮时该行不重叠并且先前的选择被清除。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:56:44.830

画布不像“清除对象”那样工作，因为没有。您首先需要清除画布或部分。使用以下命令会发生这种情况：

```
context.clearRect ( x , y , w , h ); 
```

然后你可以画新线或任何你喜欢的东西。

如果您需要可选路径的功能，可以选择使用 SVG 代替 Canvas。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T20:54:17.507

有很多方法可以做到这一点，例如你可以使用[.not()](http://api.jquery.com/not/)选择器

```
$("button.but").not("clicked").click(function() {
    $(".clicked").removeClass("clicked");
});

$("button.but").click(function() {
   $(this).addClass("clicked");
});​ 
```

[这是一个 jsFiddle 演示](http://jsfiddle.net/t6WmB/)

# google-maps - 动态加载 iframe 源

> ID：13368465
> 
> 赞同：0
> 
> 时间：2012-11-13T20:43:35.813
> 
> 标签：google-maps, iframe

我的页面上嵌入了一些 Google 地图；这些使我的页面变慢，所以我想在页面加载后加载它们，所以我正在尝试这样的事情。不幸的是，地图的 iframe 源发生了变化，但地图没有在里面加载，它只是空白。

例如链接：

```
<iframe width="300" height="300" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.co.in/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Megarugas+Banquet+and+Lawn,+Opp.+Chandivali+studio,&amp;aq=&amp;sll=19.127228,72.865035&amp;sspn=0.013259,0.022724&amp;ie=UTF8&amp;hq=Megarugas+Banquet+and+Lawn,+Opp.+Chandivali+studio,&amp;hnear=&amp;t=m&amp;cid=15174344858031542989&amp;ll=19.115165,72.894802&amp;spn=0.024329,0.025663&amp;z=14&amp;iwloc=A&amp;output=embed"></iframe><br /><small><a href="https://maps.google.co.in/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=Megarugas+Banquet+and+Lawn,+Opp.+Chandivali+studio,&amp;aq=&amp;sll=19.127228,72.865035&amp;sspn=0.013259,0.022724&amp;ie=UTF8&amp;hq=Megarugas+Banquet+and+Lawn,+Opp.+Chandivali+studio,&amp;hnear=&amp;t=m&amp;cid=15174344858031542989&amp;ll=19.115165,72.894802&amp;spn=0.024329,0.025663&amp;z=14&amp;iwloc=A" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

HTML：

```
<iframe id="blabla"></iframe> 
```

JS：

```
$(window).load(function() {
   if ($('#blabla').length <= 0) { return; }  // to avoid errors in case the element doesn't exist on the page / removed.
   $('#blabla').attr('src','//example.com/page');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:55:44.743

src 将不会在脚本内部被解析，您必须将所有出现的 替换`&amp;`为`&`

您不需要自己执行此操作。

创建一些元素，将 html 设置为 src，然后检索元素的文本：

```
$(window).load(function() {
   $('#blabla').attr('src',$('<span/>').html('https://example.com/page').text());
}); 
```

**附加说明：** 您不需要检查 的长度`$('#blabla')`，当 jQuery-object 为空时，您不会收到错误消息。

# netty - netty 复用渠道

> ID：13368470
> 
> 赞同：3
> 
> 时间：2012-11-13T20:43:49.077
> 
> 标签：netty, channels

我想创建一个重用通道的连接池，但我想不通

执行这个测试

```
public void test() {

    ClientBootstrap client = new ClientBootstrap(new NioClientSocketChannelFactory(Executors.newCachedThreadPool(), Executors.newCachedThreadPool()));

    client.setPipelineFactory(new ClientPipelineFactory());

    // Connect to server, wait till connection is established, get channel to write to
    Channel channel = client.connect(new InetSocketAddress("192.168.252.152", 8080)).awaitUninterruptibly().getChannel();
    {
        // Writing request to channel and wait till channel is closed from server
        HttpRequest request = new DefaultHttpRequest(HttpVersion.HTTP_1_1, HttpMethod.POST, "test");

        String xml = "xml document here";
        ChannelBuffer buffer = ChannelBuffers.copiedBuffer(msgXml, Charset.defaultCharset());
        request.addHeader(HttpHeaders.Names.CONTENT_LENGTH, buffer.readableBytes());
        request.addHeader(HttpHeaders.Names.CONTENT_TYPE, "application/xml");
        request.setContent(buffer);

        channel.write(request).awaitUninterruptibly().getChannel().getCloseFuture().awaitUninterruptibly();

        channel.write(request).awaitUninterruptibly().getChannel().getCloseFuture().awaitUninterruptibly();
    }
    client.releaseExternalResources();

} 
```

我在第二个 channel.write(request) 中得到了 ClosedChannelException ....

是否存在重用渠道的方法？还是保持通道畅通？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:42:33.080

第二次写入失败的原因是服务器关闭了连接。

服务器关闭连接的原因是您未能添加 HTTP 标头

```
Connection: Keep-Alive 
```

到原来的要求。

这是使通道保持打开状态所必需的（这是您在本方案中想要执行的操作）。

通道关闭后，您**必须**创建一个新通道。您*无法*重新打开频道。Channel.getCloseFuture() 返回的 ChannelFuture 对通道来说是最终的（即常量），一旦这个 future 返回的 isDone()`true`就不能被重置。这就是封闭通道不能被重用的原因。

但是，您可以根据需要多次重复使用开放频道；但是您的应用程序必须正确地使用 HTTP 协议才能完成此操作。

# css - 使用 display: table 时，Safari 中的 CSS3 box-sizing 不起作用

> ID：13368471
> 
> 赞同：6
> 
> 时间：2012-11-13T20:43:52.617
> 
> 标签：css

```
 header {
    box-sizing:border-box;
    -moz-box-sizing:border-box; /* Firefox */
    -webkit-box-sizing:border-box; /* Safari */
    padding:10px;
    width: 960px;
    margin: 0 auto 0 auto;
    height:80px;
    display:table;
    background-color:#FFF;
} 
```

我正在使用上面的 CSS 代码，在 Chrome 和 Firefox 中，这使标题的总宽度为 960px，但在我的 Safari 6.02 中，它应该只支持“box-sizing”而不需要前缀，但我放了一个无论如何，作为后备，我得到的总宽度为 980px，这意味着它的大小取决于内容框。谁能告诉我为什么它不适合我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T21:14:21.300

~~您正在使用`display: table`您的`header`. 这似乎触发了一些额外的填充。添加`border-collapse: collapse`似乎可以解决它： http: [//jsfiddle.net/7Yhwb/1/](http://jsfiddle.net/7Yhwb/1/)（没有：http: [//jsfiddle.net/7Yhwb/](http://jsfiddle.net/7Yhwb/)）~~

**编辑：**我认为这是 Safari 6.0.2 正在使用的 WebKit 版本 (536) 中的一个错误。在也使用 WebKit 536 的旧 Chrome 20 中，也存在该错误。

在使用 WebKit 537 的最新 Chrome 版本中，它似乎已修复。

为了解决您的问题，我将切换到`display: block`.

# c++ - 对重载函数的模糊调用 - int 和 int&

> ID：13368474
> 
> 赞同：3
> 
> 时间：2012-11-13T20:44:18.423
> 
> 标签：c++, reference, overloading

```
void g(int& a)
{
    std::cout<<"int&\n";
} 

void g(int a)
{
    std::cout<<"int\n";
}  

int main()
{    
    int a = 2;   
    g(a); //won't compile (at least under MSVC 2012)

    std::cin.ignore();
} 
```

有没有办法在这里避免模棱两可的调用错误？就像是`g( static_cast<int&>(a) );`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T20:50:05.713

如果你可以施法，当然有一种方法可以消除通话歧义：

```
g(const_cast<int const&>(a)); 
```

如果您坚持调用参考版本，则解决方案有点棘手：

```
static_cast<void(*)(int&)>(g)(a); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T20:45:24.587

出于重载决议的目的，绑定到正确类型的引用是完全匹配的，就像绑定到正确类型的非引用一样，因此两个重载对于左值`int`参数具有相同的优先级。

您*可以*使第二个重载采用 a `int const &`，在这种情况下，它可以以完全相同的方式使用，但将是一个不同的重载。

*或者，您可以通过转换函数*类型来完全避免重载解析：

```
static_cast<void(&)(int)>(g)(a);
static_cast<void(&)(int&)>(g)(a); 
```

但是，对于存在歧义的函数的*每次*调用，您都必须这样做（即在传递左值时`int`）。

该视频是您[必须观看](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-Cpp-3-of-n)的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T20:49:20.360

*这个答案与我回答时的问题有关。*

*OP不断增加问题，我不打算追究......*

* * *

是的，是的，你是对的，它涉及到解决歧义的转换：

```
#include <iostream>

void g(int& a)
{
    std::cout<<"int&\n";
} 

void g(int a)
{
    std::cout<<"int\n";
}  

int main()
{    
    int a = 2;   
    static_cast< void(*)(int&) >( g )( a );
} 
```

注意：要在 Visual Studio 中运行它并查看结果窗口，请使用 [Ctrl F5]，或者在的最后一个右大括号上放置一个断点`main`并在调试器中运行它。但更好的是，只需从命令行运行它。无需在末尾添加“停止”！:-)

* * *

**修正**： [Dietmar 在他的回答中](https://stackoverflow.com/a/13368561/464581)展示了如何使用强制转换`const`来调用按值参数重载。我什至没有想到这一点，但如果你想这样做（它仅限于从考虑中删除引用版本），请使用 a`const_cast`而不是 a `static_cast`。

或者更好的是，只需从参数中创建一个**右值表达式**`+`，例如在前面添加一个方便的小符号，

```
 g( +a ); 
```

:-)

# ios - iOS：使用openGL的视图背景颜色

> ID：13368479
> 
> 赞同：1
> 
> 时间：2012-11-13T20:44:42.903
> 
> 标签：ios, opengl-es, eaglview

我目前有一个应用程序，它在一个视图控制器上具有一个子视图，该子视图又具有我渲染视频的 openGL eagl 层。我的问题是，目前，无论何时加载或卸载此视图（无论是因为您在更深的图层中打开视图还是关闭该视图以打开不同的视图），该图层都会变为绿色。

我已经将实际 UIView 的背景设置为灰色。我还尝试更改 glClearColor(0.5f, 0.5f, 0.5f, 1.0f) 和其他一些变体（将 alpha 通道设置为 0，将清除颜色设置为全红色，将 eaglLayer.opaque 设置为 NO， ETC）。我的任何更改似乎都没有任何区别，当视图出现/消失时，我总是会闪烁绿色。我还尝试调用一个设置 eaglLayer.opaque = NO 并在 viewWillDisappear 上调用 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT) 的函数。这似乎也没有影响。

我不确定我还能做些什么来帮助解决这种情况，我也不知道为什么我会得到绿框。如果有人有任何想法，将不胜感激。

# ios - 展开故事板（退出）segue 是否取代了父场景中对子代理的需求？

> ID：13368480
> 
> 赞同：2
> 
> 时间：2012-11-13T20:44:58.327
> 
> 标签：ios, delegates, uistoryboard, uistoryboardsegue

在 ios6 中展开故事板 segue 是否取代了使源场景实现委托以将数据从子场景传递回 ios5 中的父场景的需要？

我通常这样做的方式是：

**Parent Controller Header：** *调用子场景的Delegate*

```
@interface ParentViewController : UIViewController <ChildViewControllerDelegate>
//ok not much to show here, mainly the delegate
//properties, methods etc
@end 
```

**Parent Controller Main（body）：** *准备segue，设置委托，从子场景创建返回方法*

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

   if ([[segue identifier] isEqualToString:@"toChildScene"])
   {
       UINavigationController *childViewController = segue.destinationViewController;
       childViewController.delegate = self;
   }
}

#pragma mark - Delegate Segue Methods

-(void) childViewControllerDidSave: (ChildViewController *) controller Notes:(NSString *)sNotes
{
   someTextLabel.Text = sNotes
   [self dismissModalViewControllerAnimated:YES];    
} 
```

**Child Controller Header：** *创建委托，引用父场景方法*

```
@class ChildViewController;

@protocol ChildViewControllerDelegate <NSObject>
-(void) childViewControllerDidSave: (ChildViewController *) controller Notes:(NSString *)sNotes
@end

@interface ChildViewController : UIViewController 
@property (weak, nonatomic) id <ChildViewControllerDelegate> delegate;
//properties, methods, etc
@end 
```

**Child Controller Main(body)：** *调用父场景方法*

```
- (IBAction)someAction:(id)sender
{
   [self.delegate childViewControllerDidSave:self sNotes:someTextField.text];
} 
```

**所以现在百万美元的问题：** 这个过程现在在 iOS 6 中是否更简单？我可以使用展开转场/退出转场来减少很多工作吗？任何例子将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:50:15.127

是的。

Unwind segues 是一种抽象的委托形式。在 iOS 6 中，当关闭视图控制器时，使用展开而不是委托来向后传递数据更简单。

在父视图控制器中，创建一个返回 an`IBAction`并将 a`UIStoryboardSegue`作为参数的 unwind 方法：

```
- (IBAction)dismissToParentViewController:(UIStoryboardSegue *)segue {
    ChildViewController *childVC = segue.sourceViewController;
    self.someTextLabel.Text = childVC.someTextField.text;
} 
```

然后，在子视图控制器中，按住 Control 从您的关闭按钮拖动到绿色退出图标以连接展开转场：

![在此处输入图像描述](../Images/109799fbff44c873066e812b2ffe8e4c.png)

# mysql - IN 语句中不存在的 MySQL 值

> ID：13368481
> 
> 赞同：0
> 
> 时间：2012-11-13T20:44:59.403
> 
> 标签：mysql, subquery, having

如果我的数据库的水果表包含

1.  苹果
2.  梨

我的`IN`陈述包含

1.  梨
2.  苹果
3.  香蕉

如何找到`IN`语句中存在但数据库中不存在的值？因此，在这种情况下，回报将是香蕉。目标是在`IN`语句中找到拼写错误的水果。我尝试了一个子查询以及该`HAVING`子句，但无法自己让它工作。

编辑以修复@Xavier-Holt 指出的矛盾描述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:49:22.357

你可以写：

```
SELECT misspelled_fruit
  FROM (       SELECT 'pears' misspelled_fruit
         UNION SELECT 'apples'
         UNION SELECT 'bananas'
       ) t
 WHERE misspelled_fruit NOT IN ( SELECT DISTINCT fruit FROM fruits )
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:46:25.780

就像是

```
SELECT * FROM MyTable WHERE Fruit NOT IN ('pears', 'apples', 'bananas') 
```

那会返回类似的东西

```
peers
appels
bannannas 
```

# permissions - 当我将 portlet.properties 文件添加到我的 portlet 时，为什么会收到 HotDeployException？（Liferay 门户开发）

> ID：13368482
> 
> 赞同：2
> 
> 时间：2012-11-13T20:45:04.360
> 
> 标签：permissions, liferay, portlet

我正在尝试为会议注册 portlet 配置权限。我已将 portlet.properties 文件添加到我的 portlet 的 docroot/WEB-INF/src 目录中。添加以下行会导致异常：

```
resource.actions.configs=resource-actions/default.xml 
```

default.xml 看起来像这样：

```
<?xml version="1.0"?>
<!DOCTYPE resource-action-mapping PUBLIC "-//Liferay//DTD Resource Action Mapping 6.1.0//EN" "http://www.liferay.com/dtd/liferay-resource-action-mapping_6_1_0.dtd">

 <resource-action-mapping>
   <resource file="resource-actions/meetingsignup.xml" />
 </resource-action-mapping> 
```

meetingingup.xml 如下所示：

```
<?xml version="1.0"?>
<resource-action-mapping>
    <portlet-resource>
        <portlet-name>meeting_signup</portlet-name>
        <permissions>
            <supports>
                <action-key>CREATE_MEETING</action-key>
                <action-key>VIEW</action-key>
            </supports>
            <community-defaults>
                <action-key>VIEW</action-key>
                <action-key>CREATE_MEETING</action-key>
            </community-defaults>
            <guest-defaults>
                <action-key>VIEW</action-key>
                <action-key>CREATE_MEETING</action-key>
            </guest-defaults>
            <user-defaults>
                <action-key>VIEW</action-key>
                <action-key>CREATE_MEETING</action-key>
            </user-defaults>
        </permissions>
    </portlet-resource>
    <model-resource>
        <model-name>edu.pointloma.liferay.portlet.service.MeetingSignUp.model.Event</model-name>
        <portlet-ref>
            <portlet-name>meeting_signup</portlet-name>
        </portlet-ref>
        <permissions>
            <supports>
                <action-key>REGISTER</action-key>
                <action-key>VIEW_REPORT</action-key>
                <action-key>EDIT</action-key>
                <action-key>DELETE</action-key>
            </supports>
            <community-defaults>
                <action-key>REGISTER</action-key>
            </community-defaults>
            <guest-defaults>
                <action-key>REGISTER</action-key>
            </guest-defaults>
            <user-defaults>
                <action-key>REGISTER</action-key>
            </user-defaults>
            <power-user-defaults>
                <action-key>REGISTER</action-key>
            </power-user-defaults>
        </permissions>
    </model-resource>
</resource-action-mapping> 
```

即，当我部署 portlet 时，日志写道：

```
12:36:07,035 ERROR [HotDeployUtil:112]com.liferay.portal.kernel.deploy.hot.HotDeployException: Error registering portlets for meeting_sign-up-portlet
com.liferay.portal.kernel.deploy.hot.HotDeployException: Error registering portlets for meeting_sign-up-portlet
    at com.liferay.portal.kernel.deploy.hot.BaseHotDeployListener.throwHotDeployException(BaseHotDeployListener.java:45)
    at com.liferay.portal.deploy.hot.PortletHotDeployListener.invokeDeploy(PortletHotDeployListener.java:105)
    at com.liferay.portal.kernel.deploy.hot.HotDeployUtil._doFireDeployEvent(HotDeployUtil.java:109)
    at com.liferay.portal.kernel.deploy.hot.HotDeployUtil._fireDeployEvent(HotDeployUtil.java:183)
    at com.liferay.portal.kernel.deploy.hot.HotDeployUtil.fireDeployEvent(HotDeployUtil.java:38)
    at com.liferay.portal.kernel.servlet.PortletContextListener.doPortalInit(PortletContextListener.java:99)
    at com.liferay.portal.kernel.util.BasePortalLifecycle.portalInit(BasePortalLifecycle.java:42)
    at com.liferay.portal.kernel.util.PortalLifecycleUtil.register(PortalLifecycleUtil.java:61)
    at com.liferay.portal.kernel.util.PortalLifecycleUtil.register(PortalLifecycleUtil.java:51)
    at com.liferay.portal.kernel.util.BasePortalLifecycle.registerPortalLifecycle(BasePortalLifecycle.java:50)
    at com.liferay.portal.kernel.servlet.PortletContextListener.contextInitialized(PortletContextListener.java:55)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3972)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)
    at org.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:1244)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1342)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:303)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1337)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1601)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1610)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1590)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
    at com.liferay.portal.security.permission.ResourceActionsUtil._readActionKeys(ResourceActionsUtil.java:942)
    at com.liferay.portal.security.permission.ResourceActionsUtil._readSupportsActions(ResourceActionsUtil.java:1212)
    at com.liferay.portal.security.permission.ResourceActionsUtil._readPortletResource(ResourceActionsUtil.java:1106)
    at com.liferay.portal.security.permission.ResourceActionsUtil._read(ResourceActionsUtil.java:921)
    at com.liferay.portal.security.permission.ResourceActionsUtil._read(ResourceActionsUtil.java:909)
    at com.liferay.portal.security.permission.ResourceActionsUtil.read(ResourceActionsUtil.java:412)
    at com.liferay.portal.deploy.hot.PortletHotDeployListener.processPortletProperties(PortletHotDeployListener.java:603)
    at com.liferay.portal.deploy.hot.PortletHotDeployListener.doInvokeDeploy(PortletHotDeployListener.java:313)
    at com.liferay.portal.deploy.hot.PortletHotDeployListener.invokeDeploy(PortletHotDeployListener.java:102)
    ... 20 more 
```

为什么会发生此异常，我该如何摆脱它？我已经在网上搜索了答案，但我找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:08:06.590

1.  Try removing the first slash: `resource.actions.configs=resource-actions/default.xml`
2.  double check that **default.xml** exists and that it is in a folder named **resource-actions** and that folder is under WEB-INF/src folder together with **portlet.properties**
3.  Open default.xml and make sure its internal structure is compliant with [Liferay Resource Mapping DTD](http://www.liferay.com/dtd/liferay-resource-action-mapping_6_1_0.dtd) (prev. link is for Liferay 6.1)

# javascript - 数字格式化javascript

> ID：13368491
> 
> 赞同：0
> 
> 时间：2012-11-13T20:45:42.347
> 
> 标签：javascript, regex

我在格式化我的数字时遇到问题。我在这个论坛上找到了一个脚本，我将在此文本下方显示。它确实适用于逗号，但是当我添加一个数字时`10000000.00`，它将变为`10000000,00`，但如果我添加一个数字`10333333.00`，它将变为：`10 33 33 33,00`，这不是我想要的。我希望我的数字格式是这样的：`10 333 333,00`.

我一直在寻找解决方案很长时间。我试图更改正则表达式，但我对正则表达式还不是很好，所以我希望有人可以帮助我解决这个问题。

这是脚本：

```
function addCommas(nStr)
{
    nStr += '';
    var x = nStr.split('.');
    var x1 = x[0];
    var x2 = x.length > 1 ? ',' + x[1] : '';
    var rgx = /(\d+)(\d+{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ' ' + '$2');
    }
    return x1 + x2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:04:28.913

```
var tests =
[
3141,
314159,
31415926,
10000000.001,
10333333.002,
42121.1415926535
],
res,
i;

function addCommas(nStr)
{
    nStr += '';
    var x = nStr.split('.');
    var x1 = x[0];
    var x2 = x.length > 1 ? ',' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1 $2');
    }
    return x1 + x2;
}

for (i = 0; i < tests.length; i++)
{
  document.write(addCommas(tests[i]) + '<br>');
} 
```

这`\d+{3}`很奇怪并被 JSLint 拒绝（并且不适用于 Firefox）。

[在JSFiddle](http://jsfiddle.net/PhiLho/L6q8u/2/)上测试的代码。

# svn - 使用来自实时服务器的最新文件更新存储库 Head

> ID：13368493
> 
> 赞同：0
> 
> 时间：2012-11-13T20:45:57.037
> 
> 标签：svn

有没有办法（或命令）将 svn 存储库的 Head 与来自实时服务器的最新文件进行比较/更新？

可能看起来违反直觉，我的意图是解释通过 FTP 发生的变化。显然，Subversion 控制的目的是跟踪更改，而不是通过 FTP 编辑文件，但不能总是避免。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:56:36.017

`svn diff`在实时服务器上应该会告诉您您需要知道的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T04:30:41.797

> 有没有办法（或命令）将 svn 存储库的 Head 与来自实时服务器的最新文件进行比较/更新？

你**必须**避免它：拥有*一个权威*的变化来源是*好的开发风格*，其他的 - 坏的。

如果 LiveServer 不是存储库的附加 WorkingCopy，则同步将是手工操作

*   在本地复制服务器树
*   比较 WorkingCopy 的树（更新为 HEAD）和 SiteRoot-dir
*   将更改的文件复制到 WC
*   犯罪

最后但并非最不重要的**一点 - 永远不要直接接触现场网站**

# javascript - 刷新 Google 地图

> ID：13368497
> 
> 赞同：4
> 
> 时间：2012-11-13T20:46:09.743
> 
> 标签：javascript, jquery, ajax

我正在使用谷歌地图来绘制我当地的犯罪活动。它有效，但现在我想使用同一页面中的表单过滤街道名称、日期范围、性质等。

[我遵循了位于https://developers.google.com/academy/apis/maps/visualizing/earthquakes](https://developers.google.com/academy/apis/maps/visualizing/earthquakes)的教程。

他们使用 jsonp 提要作为数据源。

```
script.src = 'http://earthquake.usgs.gov/earthquakes/feed/geojsonp/2.5/week' 
```

我创建了一个名为“process_request.php”的脚本来返回我所在地区的犯罪数据以符合要求。

我不知道如何应用我的过滤器/表单标准。所以这是我的问题......我应该使用 AJAX 来更新 window.eqfeed_callback 吗？表单操作应该是“index.php”还是“process_request.php”？我应该`onsubmit="refreshMap();"`在我的表格中使用吗？

```
 <script>
      var map;

      function initialize() {
        var mapOptions = {
          zoom: 13,
          center: new google.maps.LatLng(37.749919,-68.869871),
          mapTypeId: google.maps.MapTypeId.TERRAIN
        };

        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

        // Create a <script> tag and set the USGS URL as the source.
        var script = document.createElement('script');
        // (In this example we use a locally stored copy instead.)
        // script.src = 'http://earthquake.usgs.gov/earthquakes/feed/geojsonp/2.5/week';
        script.src = 'https://example.com/crime/process_request.php';
        document.getElementsByTagName('head')[0].appendChild(script);
      }

      // Loop through the results array and place a marker for each
      // set of coordinates.
      window.eqfeed_callback = function(results) {

        var infowindow = new google.maps.InfoWindow();

        for (var i = 0; i < results.features.length; i++) {
            var coords = results.features[i].geometry.coordinates;
            var latLng = new google.maps.LatLng(coords[0],coords[1]);
            var weight_factor = results.features[i].properties.weight;

            var marker = new google.maps.Marker({
                position: latLng,
                map: map,
                icon: getCircle(weight_factor),
            });

            google.maps.event.addListener(marker,'click', (function(marker, i) {
                return function() {
                    infowindow.setContent('<strong>Address:</strong> ' + results.features[i].properties.address + "<br><strong>Total Reports:</strong> "+ results.features[i].properties.weight + "<br><strong>Nature:</strong> " + results.features[i].properties.nature);
                    infowindow.open(map, marker);
                }
            })(marker, i));

        }
      }

    function getCircle(weight_factor) {
        return {
            path: google.maps.SymbolPath.CIRCLE,
            fillColor: 'red',
            fillOpacity: .3,
            scale: weight_factor * 3, //Math.pow(2, magnitude) / Math.PI,
            strokeColor: 'white',
            strokeWeight: .8
        };
    }

   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:21:58.793

我最终修改了大部分脚本并从头开始构建 json（我认为我不需要 jsonp 功能）并为表单使用 javascript 函数`action`。

```
<form name="filter_form" action="javascript:drawMap(getData())" method="POST"> 
```

# python - Python 对象作为字典值

> ID：13368498
> 
> 赞同：12
> 
> 时间：2012-11-13T20:46:09.967
> 
> 标签：python

所以我有以下代码，其中字典的值是一个对象，而该对象的键是对象中的一个项目，如下所示：

```
class MyObject():
    def getName(self):
       return self.name

    def getValue(self):
       return self.value

    def __init__(self,name, value):
       self.name = name
       self.value = value

dict = {}
object = MyObject('foo', 2) //foo is the name, 2 is the value
dict[object.getName()] = object 
```

但是我不能像这样访问对象：

```
>>>print dict['foo'].getValue()
<bound method object.getValue of <__main__.object instance at 0xFOOBAR000 >> 
```

有没有办法以这种方式访问​​对象？

**编辑：**

我不知道为什么，但我的代码最终决定开始工作，所以对于任何有类似问题的人来说，上面的代码都是有效的并且应该可以工作。我当前的 Python 版本是 2.7.3

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T20:58:24.140

调用函数时总是需要包含括号，所以写：

```
dict['foo'].getValue() 
```

此外，该`getValue`方法应该接受一个`self`参数并通过它访问实例属性：

```
def getValue(self):
    return self.value 
```

最后，在 Python 中不鼓励使用每个属性都带有一个“getter”的编程风格。实现计算槽很[容易](http://docs.python.org/2/library/functions.html#property)，因此不需要 getter。

诸如`dict`和之类的名称`object`也非常不鼓励使用，因为它们与同名的[内置类型冲突。](http://docs.python.org/2.7/library/stdtypes.html)

**编辑**
同时对代码进行了编辑，使上述一些评论过时了。粘贴到 Python 中时，发布的代码的最新版本似乎可以正常工作。

# apache - 多文件夹重定向

> ID：13368504
> 
> 赞同：0
> 
> 时间：2012-11-13T20:46:29.133
> 
> 标签：apache, .htaccess, redirect, rewrite

我一直在尝试以下变体但没有成功：

```
Redirect permanent /([0-9]+)/([0-9]+)/(.?).html http://example.com/($3) 
```

它似乎没有任何效果。我也尝试过重写但没有类似的结果。

我希望所有类似于：[http](http://example.com/2002/10/some-long-title.html) ://example.com/2002/10/some-long-title.html 的链接 将浏览器和蜘蛛重定向到：[http ://example.com/some-long-title](http://example.com/some-long-title)

当我将它保存到我的服务器并访问包含嵌套文件夹的链接时，它只返回一个 404，而地址栏中的原始 URL 未更改。我想要的是地址栏中的新位置（当然还有内容）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:23:38.980

我想这或多或少是您正在寻找的：

```
RewriteEngine On
ReriteRule ^/([0-9]+)/([0-9]+)/(.?)\.html$ http://example.com/$3 [L,R=301] 
```

这可以在中央 apache 配置中使用。如果您必须使用 .htaccess 文件，因为您无权访问 apache 配置，那么语法会略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T23:32:22.443

使用 mod_alias，您需要`RedirectMatch`，而不是常规`Redirect`指令：

```
RedirectMatch permanent ^/([0-9]+)/([0-9]+)/(.+)\.html$ http://example.com/$3 
```

您的最后一个分组必须是`(.+)`1*个字符或更多的任何内容*，您之前拥有的内容与*0 或 1 个字符的任何内容*`(.?)`匹配。此外，最后一个反向引用不需要括号。

 *使用 mod_rewrite，它看起来类似：

```
RewriteEngine On
RewriteRule ^/([0-9]+)/([0-9]+)/(.+)\.html$ http://example.com/$3 [L,R=301] 
```*

# linker - D SDL 在 Windows 上与 Derelict2 绑定

> ID：13368506
> 
> 赞同：0
> 
> 时间：2012-11-13T20:46:31.143
> 
> 标签：linker, makefile, sdl, d

我在使用从 DOS 调用的 makefile 编译使用 SDL 的 D 程序时遇到问题，其中 SDL 应该由 Derelict 包装。此外，如果我在测试程序中使用编译指示进行链接，它会告诉我 lib 文件有错误 43，不是有效的库文件。

如何使其链接，我是否使用了错误的堆栈（Visual C/C++）？我认为不是因为它正在寻找 lib 文件。

测试程序

```
//pragma(lib, "D:\\Development\\SDL-1.2.15\\lib\\x86\\SDL.lib");
import derelict.sdl.sdl;

void main()
{
    DerelictSDL.load();

    // now you can call SDL functions
} 
```

生成文件

```
DMD = dmd
WINDRES = windres.exe
LDFLAGS = -O2 -s `sdl-config --libs`
DFLAGS =
RM   = rm -f
#OBJS = main.o graphic.o grid.o node.o appicon.opc
SRCS = toh_fractal.d
# graphic.d grid.d node.d appicon.opc
PROG = toh_fractal
DERELICT = D:\\Development\\Derelict2
INCLUDE_DERELICT = $(DERELICT)\\import
LIB_DERELICT = DerelictSDL 
LIB_SDL = SDL
#$(DERELICT)\\lib\\
VERS = 0.1.1

.PHONY: clean distclean
all: $(PROG)

$(PROG): $(SRCS)
    $(DMD) $(DFLAGS) $(PROG) -I$(INCLUDE_DERELICT) appicon.res -L$(LIB_DERELICT) -L$(LIB_SDL) 

appicon.res: appicon.rc sierpinski.ico
    windres -i appicon.rc -o appicon.res

distclean:
    $(RM) *~ $(OBJS) appicon.opc stdout.txt stderr.txt

clean:
    $(RM) *~ $(OBJS) $(PROG) appicon.opc stdout.txt stderr.txt 
```

生成文件输出

```
C:\D\D_fractals_of_hanoi>make all
dmd  toh_fractal -ID:\\Development\\Derelict2\\import appicon.res -LDerelictSDL  -LSDL
OPTLINK (R) for Win32  Release 8.00.12
Copyright (C) Digital Mars 1989-2010  All rights reserved.
http://www.digitalmars.com/ctg/optlink.html
OPTLINK : Warning 9: Unknown Option : NOIDERELICTSDLSDL
toh_fractal.obj(toh_fractal)
 Error 42: Symbol Undefined _D8derelict3sdl3sdl12__ModuleInfoZ
toh_fractal.obj(toh_fractal)
 Error 42: Symbol Undefined         _D8derelict3sdl3sdl11DerelictSDLC8derelict3sdl3sdl17DerelictSDLLoader
--- errorlevel 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:38:06.103

Derelict 意味着不能与动态链接一起使用。您应该将正确的 .so 或 .dll 放在您的应用程序目录中，Derelict 会找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:00:24.813

Derelict 使用 C `dl`lib ( `dlopen`, `dlclose`, `dlsym`) 来动态加载共享库，因此您必须使用动态库。

# python - Python：访问对象的特定属性时如何做额外的事情？

> ID：13368508
> 
> 赞同：1
> 
> 时间：2012-11-13T20:46:32.717
> 
> 标签：python

假设我在 Python 中有一个类：

```
class Foo(object):
    a = 1
    b = 2 
```

当我访问“a”而不是“b”时，我想做一些额外的事情。因此，例如，让我们假设我想做的额外事情是增加属性的值：

```
> f = Foo()
> f.a # Should output 2
> f.a # Should output 3
> f.a # Should output 4
> f.b # Should output 2, since I want the extra behavior just on 'a' 
```

感觉好像有办法通过 __getattr__ 或 __getattribute__，但我想不通。

额外的东西可以是任何东西，不一定与属性相关（如 print 'Hello world'）。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T20:47:51.503

您正在寻找的是一个[属性](http://docs.python.org/3/library/functions.html#property)，它可以很好地用作装饰器：

```
class Foo(object):
    _a = 2

    @property
    def a(self):
        Foo._a += 1
        return Foo._a - 1

    b = 2 
```

每当您尝试访问时都会调用该函数`foo_instance.a`，并将返回的值用作属性的值。您也可以定义一个*setter*，在设置属性时使用新值调用它。

这是假设您想要仅从实例访问的类属性的奇怪设置。（`_a`这里`b`属于该类-也就是说，所有实例仅共享一个变量-如您的问题所示）。但是，属性始终是实例拥有的。最可能的情况是您实际上想要：

```
class Foo(object):
    def __init__(self):
        self._a = 2
        self.b = 2

    @property
    def a(self):
        self._a += 1
        return self._a - 1 
```

它们是实例属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T21:08:47.103

如果你真的想要`@property`类变量的等价物，你必须自己构建[描述符](http://docs.python.org/2/howto/descriptor.html)。

您几乎肯定*不想*这样做——请参阅 Lattyware 的回答，了解如何制作普通的实例变量，并将其中一个变成`@property`.

但你可以这样做：

```
class IncrementOnGetDescriptor(object):
    def __init__(self, initval=None):
        self.val = initval
    def __get__(self, obj, objtype):
        self.val += 1
        return self.val - 1
    def __set__(self, obj, val):
        self.val = val

class Foo(object):
    a = IncrementOnGetDescriptor(2)
    b = 2 
```

现在你可以测试它了：

```
>>> f = Foo()
>>> f.a
2
>>> Foo.a
3
>>>> f.a
4 
```

把它变成`@classproperty`装饰器留给读者练习。

PS, this *still* isn't exactly like a normal class variable. Setting `Foo.a = 10` will replace your magic auto-incrementing value with a normal `10`, while setting `foo.a = 10` will update the class with an auto-incrementing `10` instead of storing an instance variable in `f`. (I originally had the `__set__` method raise `AttributeError`, because normally you'd want an auto-incrementing magic variable be read-only, but I decided to show the more complex version just to show all the issues you have to deal with.)

# django - Django 网址冲突

> ID：13368511
> 
> 赞同：0
> 
> 时间：2012-11-13T20:46:44.407
> 
> 标签：django

我想将用户的 url 设置为 example.com/user 而不是 example.com/u/user 但是当我尝试打开 example.com/admin 时它会发生冲突。

所以我不想在 url 中添加额外的模式，只是 / 之后的用户名。那可能吗

所以

```
url(r'^u/', include('profiles.urls')),
url(r'^admin/', include(admin.site.urls)), 
```

将会

```
url(r'', include('profiles.urls')),
url(r'^admin/', include(admin.site.urls)), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:54:58.157

将其发布为答案，因为它显然有效（请参阅对问题的评论）... url 按顺序进行模式匹配，因此如果 admin/ 是第一个，它匹配并且您转到管理页面。只有当模式不匹配 'admin/' 时，它才会匹配用户。

# objective-c - NSSpeechSynthesizer 更改语言

> ID：13368516
> 
> 赞同：3
> 
> 时间：2012-11-13T20:47:20.753
> 
> 标签：objective-c, xcode, cocoa

我正在编写一个基于 Cocoa Book 示例的简单程序，该示例使用 NSSpeechSynthesizer 说出短语。我想知道如何更改用于合成相位的语言。

```
#import "PHAppDelegate.h"

@implementation PHAppDelegate

@synthesize window = _window;
@synthesize textField = _textField;

- (id)init{

    self = [super init];

    if(self){

        NSLog(@"init");

        _speechSynth = [[NSSpeechSynthesizer alloc] initWithVoice:nil];

    }

        return self;

}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
}

- (IBAction)stopIt:(id)sender {

    NSLog(@"stoppping");
    [_speechSynth stopSpeaking];

}

- (IBAction)sayit:(id)sender {

    NSString *string = [_textField stringValue];

    if([string length] == 0){

        NSLog(@"There is no text to speech.");

        return;
    }

    NSString *voiceID =[[NSSpeechSynthesizer availableVoices] objectAtIndex:10];

    [_speechSynth setVoice:voiceID];

    [_speechSynth startSpeakingString:string];

    NSLog(@"Have started to say: %@", string);

}
@end 
```

这段代码工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T20:50:48.993

```
for (NSString *voiceIdentifierString in [NSSpeechSynthesizer availableVoices]) {
    NSString *voiceLocaleIdentifier = [[NSSpeechSynthesizer attributesForVoice:voiceIdentifierString] objectForKey:NSVoiceLocaleIdentifier];
    NSLog(@"%@ speaks %@", voiceIdentifierString, voiceLocaleIdentifier); 
```

}

查看[语音属性键](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSSpeechSynthesizer_Class/index.html#//apple_ref/doc/constant_group/Voice_Attributes_Keys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T23:04:46.033

[这份 2014 年的文件](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsspeechsynthesizer_Class/NSSpeechSynthesizer_Class.pdf)说只有一种语言可用（美国英语）。

```
NSVoiceLanguage
The language of the voice (currently US English only). An NSString Deprecated: Use NSVoiceLocaleIdentifier (page 24) instead. Available in OS X v10.0 and later.
Deprecated in OS X v10.5.
Declared in NSSpeechSynthesizer.h. 
```

# c - 限制纬度和经度值的模数

> ID：13368525
> 
> 赞同：8
> 
> 时间：2012-11-13T20:47:42.433
> 
> 标签：c, math, floating-point, intervals, modulo

我有代表纬度和经度的双打。
我可以使用以下函数轻松地将经度限制为**(-180.0, 180.0] 。**

```
double limitLon(double lon)
{
  return fmod(lon - 180.0, 360.0) + 180.0;
} 
```

这是有效的，因为一端是排他的，另一端是包容的。fmod 包括 0 但不包括 -360.0。

谁能想到一个优雅的纬度方法？
所需的间隔是**[-90.0, 90.0]**。封闭形式的解决方案将是最好的，即没有循环。我认为 fmod() 可能不是首发，因为现在两端都包含在内。

**编辑：**正如所指出的，一个人无论如何都不能去纬度 91 度。从技术上讲，91 应该映射到 89.0。哦，男孩，这改变了事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T13:57:56.330

有一种比使用 sin 和 arcsin 更有效的方法。最昂贵的操作是单个部门。观察到所需的间隔是闭合的是关键。

*   除以 360 并取余数。这会在区间 中产生一个数字`[0, 360)`，如观察到的那样，它是半开的。

*   将间隔对折。如果余数 >=180，则从 360 中减去它。这会将区间映射`[180, 360)`到区间`(0, 180]`。这个区间与下半部分的并集就是闭区间`[0, 180]`。

*   从结果中减去 90。根据需要，此间隔为`[-90, 90]`。

实际上，这与 完全相同的功能`arcsin(sin(x))`，但没有费用或数值稳定性的任何问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-29T21:35:45.367

使用三角函数`sin()/cos()`在时间上很昂贵，并且会导致精度损失。`remainder()`使用该功能要好得多。请注意，如果可以的话，结果与 的大小相同`x`且大小小于 的大小。`y`

OP是在正确的轨道上！下面的解决方案很容易根据 -180 和 + 180.0 的边缘值进行调整。

```
#include <math.h>

// Reduce to (-180.0, 180.0]
double Limit_Longitude(double longitude_degrees) {
  // A good implementation of `fmod()` will introduce _no_ loss of precision.
  // -360.0 <= longitude_reduced <=- 360.0
  double longitude_reduced = fmod(longitude_degrees, 360.0);

  if (longitude_reduced > 180.0) {
    longitude_reduced -= 360.0;
  } else if (longitude_reduced <= -180.0) {
    longitude_reduced += 360.0;
  }
  return longitude_reduced;
} 
```

将纬度限制为 [-90 到 +90] 比较棘手，因为 +91 度的纬度会越过北极，但会切换经度 +/- 180 度。要保持经度精度，请向 0 度方向调整 180。

```
void Limit_Latitude_Longitude(double *latitude_degrees, double *longitude_degrees) {
  *latitude_degrees = Limit_Longitude(*latitude_degrees);
  int flip = 0;
  if (*latitude_degrees > 90.0) {
    *latitude_degrees = 180.0 - *latitude_degrees;
    flip = 1;
  } else if (*latitude_degrees < -90.0) {
    *latitude_degrees = -180.0 - *latitude_degrees;
    flip = 1;
  }
  if (flip) {
    *longitude_degrees += *longitude_degrees > 0 ? -180.0 : 180.0;
  }
  *longitude_degrees = Limit_Longitude(*longitude_degrees);
} 
```

* * *

次要：虽然目标是“将经度限制为 (-180.0, 180.0]”，但我希望更普遍需要 [-180.0, 180.0)、[-180.0, 180.0] 的范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T20:56:14.067

如何使用`sin`和反函数？

```
asin(sin((lat/180.0)*3.14159265)) * (180.0/3.14159265); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-29T15:19:23.980

提供的答案（D Stanley，eh9）都不起作用……尽管对于 eh9，我可能会误解某些东西。尝试使用多个值。

不幸的是，正确的答案很昂贵。请参阅 Microsoft Research 的以下内容：[https](https://web.archive.org/web/20150109080324/http://research.microsoft.com/en-us/projects/wraplatitudelongitude/) ://web.archive.org/web/20150109080324/http://research.microsoft.com/en-us/projects/wraplatitudelongitude/ 。

从那里，答案是：
`latitude_new = atan(sin(latitude)/fabs(cos(latitude)))`- 注意 cos(latitude) 周围的绝对值

```
longitude_new = atan2(sin(latitude),cos(latitude)) 
```

请注意，在 C 中您可能想要使用`atan2f`(float vs double)。此外，所有三角函数都采用弧度。

# objective-c - 重置 UIPageControl 将视图重置为原始状态

> ID：13368531
> 
> 赞同：0
> 
> 时间：2012-11-13T20:48:01.777
> 
> 标签：objective-c, uiimage, uipagecontrol

我有一个 iPad 视图，它有一个 ScrollView，在它下面我使用一个页面控制对象来显示它所在的页面。在屏幕的其他地方，我在上午 12:00 和上午 5:00 之间有一个时间线 - 随着时间的推移，时间轴顶部有一个 UIImage 变宽以指示一天中的时间。UIImage 会随着时间的推移通过使用每分钟左右启动的 NSTimer 变得更宽。

此外，我在页面上有 3 个按钮，它们将使用其中的一组新图像刷新 Scrollview。图像的数量可以在 3 到 7 之间变化。因此，当按下按钮时，我会更新滚动视图，并更新 Page Control 对象以将“numberOfPages”属性设置为适当的数字。

好的，所以问题似乎是，每当我单击一个按钮并且 pageControl numberOfPages 发生更改时，UIImage 就会恢复到我最初在 Interface Builder（故事板）中设计它时的任何大小。

我创建了一个简化的示例项目，希望有足够的能力重新创建行为......

视图控制器.h：

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController 
@property (weak, nonatomic) IBOutlet UIButton *btnTest;
@property (weak, nonatomic) IBOutlet UIImageView *imgTest;
@property (weak, nonatomic) IBOutlet UIPageControl *pageControl;
- (IBAction)buttonPress:(id)sender;
@end 
```

ViewController.m: #import "ViewController.h"

```
@interface ViewController ()

@end

@implementation ViewController
@synthesize imgTest,btnTest,pageControl;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    // Set up an observer to handle updating the timeline
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(UpdateWidth:)
                                                 name:@"UpdateWidth" object:nil];
}

-(void)viewDidAppear:(BOOL)animated {
    // Send an updateTimeIndicator notification when screen loads.
    [[NSNotificationCenter defaultCenter] postNotificationName:@"UpdateWidth" object:@"sent"];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)buttonPress:(id)sender {
    pageControl.numberOfPages = 7;
    pageControl.currentPage = 0;

}

-(void)UpdateWidth:(NSNotification *)notification{
    [imgTest setFrame:CGRectMake([imgTest frame].origin.x, [imgTest frame].origin.y,
                                          450, [imgTest bounds].size.height)];

    imgTest.contentMode = UIViewContentModeScaleAspectFit; // This determines position of image
    imgTest.clipsToBounds = YES;
    [imgTest setNeedsDisplay];

    NSLog(@"Width Updated");
}
@end 
```

因此，在此示例中，我在 Window 中只有 3 个对象 - PageControl、一个 Button 和一个背景设置为蓝色的 UIImage。我正在使用通知中心发送关于何时调整 UIImage 大小的消息（在这种情况下，我只做一次，当视图出现时）。updateWidth 例程将 UIImage 的大小设置为 450 像素宽，并且视图按原样显示。

然而，点击按钮会改变 numberOfPages 的值，并且这样做会将 UIImageView 设置回它最初在 Interface Builder 中布局时的大小。

如果有人想看的话，我确实有一个压缩的项目文件。另外，我确实在不使用通知中心的情况下尝试了这个，结果是一样的（我最初没有使用通知中心，只是认为它可能会给出不同的结果）。

我可能不使用 PageControl 对象也能过得去，但我现在很好奇为什么会这样。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:35:57.510

我似乎通过将 ScrollView 和 PageControl 对象都放入它们自己的（新）UIView 中解决了这个问题。为此，我在界面生成器中打开了故事板，将工具箱中的 View 对象拖到界面窗口中，然后将现有的 ScrollView 和 PageControl 对象都放入新的 UIView 中。之后，更改 PageControl 的 numberOfPages 属性不会影响窗口上的任何其他内容。

不过，我仍然对这种行为感到困惑。我猜是因为一旦将页面控件放置在新视图中并且问题停止，PageControl 想要更新它在 numberOfPages 属性更改时所在的整个视图。

# python - 如何找到一个数字的因数并将其返回到python的列表中

> ID：13368533
> 
> 赞同：2
> 
> 时间：2012-11-13T20:48:05.760
> 
> 标签：python

这是我现在拥有的代码。我无法让它返回问题的正确结果。

```
def problem(n):
    myList = [1,n]
    for i in range(1,n):
        result = int(n ** .5) 
        new = n/result 
        i = i + 1 
        myList.append(new) 
    return myList 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:05:26.100

您只需要从 1 迭代到 n ** 0.5 + 1，您的因子将全部是 i，并且您在此过程中会选择 n/i。

例如： 10 的因数：

我们只需要从 1 迭代到 4

i = 1 => 10 % 1 == 0，所以因子：i = 1, 10 / i = 10

i = 2 => 10 % 2 == 0，所以因数：i = 2, 10 / i = 5

i = 3 => 10 % 3 != 0，无因数

我们无需再多说，答案是 1、2、5、10。

```
def problem(n):
    myList = []
    for i in xrange(1, int(n ** 0.5 + 1)):
        if n % i == 0:
            if (i != n/i):
                myList.append(i)
                myList.append(n / i)
            else:
                myList.append(i)
    return myList 
```

结果：

```
>>> problem(10)
[1, 10, 2, 5]
>>> problem(12)
[1, 12, 2, 6, 3, 4]
>>> problem(77)
[1, 77, 7, 11]
>>> problem(4)
[1, 4, 2]
>>> problem(64)
[1, 64, 2, 32, 4, 16, 8]
>>> len(problem(10 ** 12))
169 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:54:43.857

的因数`n`是所有均分的数`n`。if`i`的一个因素也是如此。`n``n % i == 0`

您需要做的是对从 1 到 的每个数字执行此测试`n`，如果该条件为真，则将该数字添加到您的列表中。

如果您在开始编写此代码时遇到问题，请使用您尝试过的内容更新您的问题。

请注意，上述方法并不是查找因子的最有效方法，但在我看来，这只是一个初学者的练习，因此需要一种幼稚的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T20:57:16.283

您的代码存在一些问题。首先，您不需要增加`i`，因为您的`for`循环已经这样做了。其次，使用一些基本的数学原理，您只需要遍历一系列数字，直到您传入数字的平方根。我将把第二部分留给你玩和试验。

```
def problem(n):
    myList = []
    for i in range(1, n+1):
        if n % i == 0:
            myList.append(i)

    return myList 
```

对于更高级的方法，您可以尝试非常强大但通常更适合较小数据集的列表推导。

```
def problem(n):
    return [x for x in range(1, n+1) if n % x == 0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T20:51:51.357

使用列表理解：

```
In [4]: num=120

In [5]: [x for x in range(2,int(num/2)+1) if num%x==0]
Out[5]: [2, 3, 4, 5, 6, 8, 10, 12, 15, 20, 24, 30, 40, 60]

In [6]: num=121

In [7]: [x for x in range(2,int(num/2)+1) if num%x==0]
Out[7]: [11] 
```

# javascript - removeChild 在 stringByEvaluatingJavaScriptFromString 中不起作用

> ID：13368535
> 
> 赞同：0
> 
> 时间：2012-11-13T20:48:14.323
> 
> 标签：javascript, objective-c, ios

我正在尝试在我的 ipad 应用程序中删除我不拥有的页面中的 html 元素。

使用 stringByEvaluatingJavaScriptFromString 我可以返回我想要的元素：

```
NSString *source = [webView stringByEvaluatingJavaScriptFromString:@"var parentEl = document.getElementById('header');parentEl.childNodes[5].innerHTML;"]; 
```

但是当试图删除它时，我不能：

```
[webView stringByEvaluatingJavaScriptFromString:@"var parentEl = document.getElementById('header');parentEl.removeChild(parentEl.childNodes[5]);"]; 
```

但是，如果我从开发人员工具远程在 safari 中运行此代码，它可以正常工作，这让我有点难过！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:53:22.003

也许是因为您缺少访问 childNodes 集合的对象：

```
parentEl = document.getElementById('header');
parentEl.removeChild(parentEl.childNodes[5]); 
```

# php - Find a valid UK telephone number in a string

> ID：13368537
> 
> 赞同：0
> 
> 时间：2012-11-13T20:48:19.703
> 
> 标签：php, regex

I have an input form where I want to strip out a telephone number if entered. I've found an expression that finds the variety of UK numbers, but it only works if the only thing that is entered is a number. I need the regex to find any instance of a number within the text.

Here is what I have so far

```
if (preg_match_all('/^\(?(?:(?:0(?:0|11)\)?[\s-]?\(?|\+)44\)?[\s-]?\(?(?:0\)?[\s-]?\(?)?|0)(?:\d{2}\)?[\s-]?\d{4}[\s-]?\d{4}|\d{3}\)?[\s-]?\d{3}[\s-]?\d{3,4}|\d{4}\)?[\s-]?(?:\d{5}|\d{3}[\s-]?\d{3})|\d{5}\)?[\s-]?\d{4,5}|8(?:00[\s-]?11[\s-]?11|45[\s-]?46[\s-]?4\d))(?:(?:[\s-]?(?:x|ext\.?\s?|\#)\d+)?)$/', $post, $match_num))
{
    $error[0] = 1;
    $error[2] = 'error text';
    $error[4] = $match_num;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:51:28.933

Just remove the `^` and `$` from the start and end. This will allow the regex to match anywhere.

# c++ - 我正在尝试使用函数将文本文件读入 C++ 中的数组

> ID：13368539
> 
> 赞同：2
> 
> 时间：2012-11-13T20:48:25.860
> 
> 标签：c++, arrays, function

我正在尝试将两个文本文件读入单独的数组，但是当我调试时，从文件中读取的数字作为垃圾出现。我认为这是我放置数组的方式，但我不完全确定，或者可能是因为循环中的计数器和数组中的 i 很奇怪？

```
void read(ifstream &A_bank, ifstream &B_bank, string &n1, string& n2, int &i,
          int& j,  float &num, float &num1, float &total, float &total1,
          float a[], float b[])
{
    int counter = 0, counter1 = 0 ;

    getline(A_bank,n1);
    for(int i = 0; !A_bank.eof();i++)
    {
        A_bank >> a[i];
        total+=a[i];
        counter++;
    }

    getline(B_bank,n2);
    for(int j = 0; !B_bank.eof();j++)
    {
        B_bank>>b[j];
        total+=b[j];
        counter1++;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:06:49.910

您的问题之一是`eof()`函数使用错误。
请参阅：[http](http://en.cppreference.com/w/cpp/io/basic_ios/eof)
://en.cppreference.com/w/cpp/io/basic_ios/eof eof() 只有在最后一次读取操作失败时才返回 true - 而不是在最后一次读取操作是最后一次可能的读取操作时。

像这样改变你的两个循环：

```
for(int j = 0; /*somehow test j here: j < MAX...*/;j++)
{
    int br;
    if (!(B_bank>>br)) {
        break;
    }
    b[j] = br;
    total+=b[j];
    counter1++;
} 
```

# facebook - htaccess 重写和 facebook 之类的 url

> ID：13368540
> 
> 赞同：0
> 
> 时间：2012-11-13T20:48:28.547
> 
> 标签：facebook, .htaccess, facebook-like, rewrite

我有这样的路径：

```
http://mysite.com/detailpages/article/title 
```

我想重写它来隐藏这样的detailpages文件夹

```
http://mysite.com/article/title 
```

现在我知道这可以通过 htaccess rewrite 之类的方法实现，但是像 iframe 这样的 facebook 服务如何处理这个问题？

facebook 会使用整个网址还是重写的网址？

谢谢，罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:02:08.670

> facebook 会使用整个网址还是重写的网址？

它会使用你告诉它的那个。

您必须意识到，像这样重写是服务器内部的事情——外部世界甚至不必知道您在*内部*将某些东西映射到其他东西。

# php - 如何让用户保持登录状态，直到浏览器关闭或他们注销

> ID：13368543
> 
> 赞同：0
> 
> 时间：2012-11-13T20:48:51.490
> 
> 标签：php, session, cookies, browser

下面我有 5 个 php 脚本按顺序从用户登录到用户注销。现在我正在做的是我正在使用`$SESSION`来确定哪个用户已登录，然后使用 session_gcmaxlife 添加额外的时间，以便会话不会过期 12 小时。因此，这意味着用户可以保持登录状态 12 小时，在这段时间之后，它将自动注销用户。这只是制作登录系统的一个非常基本的原因。

但我想要做的是能够让用户无限期地保持登录状态，直到他们点击注销链接或关闭浏览器。我的问题是，在尽可能减少代码更改的情况下，如何更改以下代码以使用户保持登录状态，直到用户注销或关闭浏览器？

以下是 php 脚本，以显示当前正在发生的事情：

1.  **Teacherlogin.php**（这是用户输入登录详细信息以登录应用程序的脚本）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php

// connect to the database
include('connect.php');
include('member.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

  // required variables (make them explciit no need for foreach loop)
  $teacherusername = (isset($_POST['teacherusername'])) ? $_POST['teacherusername'] : '';
  $teacherpassword = (isset($_POST['teacherpassword'])) ? $_POST['teacherpassword'] : '';
  $loggedIn = false;
  $active = true;

  if ((isset($username)) && (isset($userid))){
      echo "You are already Logged In: <b>{$_SESSION['teacherforename']} {$_SESSION['teachersurname']}</b> | <a href='./menu.php'>Go to Menu</a> | <a href='./teacherlogout.php'>Logout</a>";
  }
  else{

  if (isset($_POST['submit'])) {

      $teacherpassword = md5(md5("g3f".$teacherpassword."rt4"));  

    // don't use $mysqli->prepare here
    $query = "SELECT TeacherId, TeacherForename, TeacherSurname, TeacherUsername, TeacherPassword, Active FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ? LIMIT 1";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("ss",$teacherusername,$teacherpassword);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbTeacherId, $dbTeacherForename,$dbTeacherSurname,$dbTeacherUsername,$dbTeacherPassword, $dbActive);

    while($stmt->fetch()) {
      if ($teacherusername == $dbTeacherUsername && $teacherpassword == $dbTeacherPassword) {
if ($dbActive == 0) {
    $loggedIn = false;
    $active = false;
    echo "You Must Activate Your Account from Email to Login";
}else {
    $loggedIn = true;
    $active = true;
      $_SESSION['teacherid'] = $dbTeacherId;
      $_SESSION['teacherusername'] = $dbTeacherUsername;
}
      }
    }

    if ($loggedIn == true){
      $_SESSION['teacherforename'] = $dbTeacherForename;
      $_SESSION['teachersurname'] = $dbTeacherSurname;
      header( 'Location: menu.php' ) ;
      die();
    }

    if (!$loggedIn && $active && isset($_POST)) {
    echo "<span style='color: red'>The Username or Password that you Entered is not Valid. Try Entering it Again</span>";
    }

       /* close statement */
    $stmt->close();

    /* close connection */
    $mysqli->close();
  }
?> 
```

**2\. member.php**（这个脚本包含`$SESSION`变量来确定哪个用户登录。这是一个非常重要的脚本并且被包含（使用`include（member.php）能够确定用户是否已经登录） )

```
<?php

if (isset($_SESSION['teacherforename'])) {

$_SESSION['teacherforename'] = $_SESSION['teacherforename'];

}

if (isset($_SESSION['teachersurname'])) {

$_SESSION['teachersurname'] = $_SESSION['teachersurname'];

}

if (isset($_SESSION['teacherid'])) {

      $userid = $_SESSION['teacherid'];

  }

if (isset($_SESSION['teacherusername'])) {

      $username = $_SESSION['teacherusername'];

  }

        ?> 
```

**3\. menu.php**（这是菜单页面，用户可以使用显示的菜单选择他们希望导航到的页面）

```
 <?php

    ini_set('session.gc_maxlifetime',12*60*60);
    ini_set('session.gc_divisor', '1');
    ini_set('session.gc_probability', '1');
    ini_set('session.cookie_lifetime', '0');
    require_once 'init.php'; 

     ini_set('display_errors',1); 
     error_reporting(E_ALL);

    session_start();

    ?>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>Menu</title>

            <link rel="stylesheet" type="text/css" href="menu.css">

            </head>

            <?php

            include('member.php');

            if ((isset($username)) && (isset($userid))){

    include('teachername.php');
            ?>

            <body>

                            <?php
            include('noscript.php');
            ?>

            <ul>
            <li><a href="create_session.php">Create an Assessment</a></li>
            </ul>

            <?php

        }else{

            echo "Please Login to Access this Page | <a href='./teacherlogin.php'>Login</a>";

        }

        ?> 
```

4 **createsession.php**（这个页面是用户可以创建考试的地方，只有登录的用户可以访问这个页面）

```
<?php

        ini_set('session.gc_maxlifetime',12*60*60);
        ini_set('session.gc_divisor', '1');
        ini_set('session.gc_probability', '1');
        ini_set('session.cookie_lifetime', '0');
        require_once 'init.php'; 

        session_start();

        include('member.php');

        ?>

        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">

        <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>Create a New Assessment</title>
        <link rel="stylesheet" type="text/css" href="create_sessionStyles.css">

        <?php

        if ((isset($username)) && (isset($userid))){ 
        ?>

        <script>
        function showConfirm(){

        var confirmMsg=confirm(Are you Sure?);

        if (confirmMsg==true)
        {
        submitform();   
        }
        }

        function submitform()
        {

        $.post("insertsession.php", $("#sessionForm").serialize() ,function(data){
        var sessionFormO = document.getElementById("sessionForm");
        sessionFormO.submit();
        }); 

        }

        </script>
        </head>
        <body>

        <form action="QandATable.php" method="post" id="sessionForm">
        <p><strong>1: Number of Assessments you Require:</strong> <input type="text" id="sessionNo" name="sessionNum" onkeypress="return isNumberKey(event)" maxlength="5" /><br/><span id="sessionNoAlert"></span></p>
        <p><strong>2: Duration:</strong> <input type="text" id="durationpicker" name="durationChosen" readonly="readonly" /></p>
        <p><strong>3: Date:</strong> <input type="text" id="datepicker" name="dateChosen" readonly="readonly" /></p>
        <p><strong>4: Start Time:</strong> <input type="text" id="timepicker" name="timeChosen" readonly="readonly" /><span class="timepicker_button_trigger"><img src="Images/clock.gif" alt="Choose Time" /></span>    
        </form>

        <script type="text/javascript">

        function myClickHandler(){ 
        if(validation()){ 
        showConfirm(); 
        } 
        }

        </script>

        <?php

        }
        }
        }else{ 

        echo "Please Login to Access this Page | <a href='./teacherlogin.php'>Login</a>";

        }
        ?>

        </body> 
```

5teacherlogout.php **（**最后这是注销页面，当用户单击注销链接（目前仅显示在menu.php中）时，它将转到该页面，并显示一条消息并执行注销销毁会话）

```
<?php

ini_set('session.gc_maxlifetime',12*60*60);
ini_set('session.gc_divisor', '1');
ini_set('session.gc_probability', '1');
ini_set('session.cookie_lifetime', '0');
require_once 'init.php'; 

ini_set('display_errors',1); 
error_reporting(E_ALL);

session_start();

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Menu</title>

<link rel="stylesheet" type="text/css" href="menu.css">

</head>

<?php

include('member.php');

?>

<body>

<?php

if ((isset($username)) && (isset($userid))){
session_destroy();
echo "You have been Logged Out | <a href='./home.php'>Home</a>";
}

else {

echo "You are Not Logged In";

}

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:59:20.967

会话 ID 作为 cookie 存储在客户端机器上。当客户端浏览器关闭时，会话 cookie 被清除。如果您希望用户在无限期处于非活动状态时保持登录状态，则必须对 setTimeout 或带有 HTTP-EQUIV 刷新元标记的隐藏 iframe 上的 ajax 请求执行某些操作，以保持递增/刷新服务器端会话到期。当客户端浏览器关闭时，隐藏的 iframe 或 ajax 刷新器将不再运行，会话将过期。

# python - 通过 flowables 将现有 PDF 合并到新的 ReportLab PDF

> ID：13368545
> 
> 赞同：8
> 
> 时间：2012-11-13T20:49:02.247
> 
> 标签：python, django, pdf, pdf-generation, reportlab

我有一个报告实验室`SimpleDocTemplate`并将其作为动态 PDF 返回。我正在根据一些 Django 模型元数据生成它的内容。这是我的模板设置：

```
buff = StringIO()
doc = SimpleDocTemplate(buff, pagesize=letter,
                        rightMargin=72,leftMargin=72,
                        topMargin=72,bottomMargin=18)
Story = [] 
```

我可以轻松地将`Entry`模型中的文本元数据添加`Story`到稍后要构建的列表中：

```
 ptext = '<font size=20>%s</font>' % entry.title.title()
    paragraph = Paragraph(ptext, custom_styles["Custom"])
    Story.append(paragraph) 
```

`build`然后通过调用以下命令生成要在响应中返回的 PDF `SimpleDocTemplate`：

```
doc.build(Story, onFirstPage=entry_page_template, onLaterPages=entry_page_template)

pdf = buff.getvalue()
resp = HttpResponse(mimetype='application/x-download')    
resp['Content-Disposition'] = 'attachment;filename=logbook.pdf'
resp.write(pdf)
return resp 
```

模型上的一个元数据字段是文件附件。当这些文件附件是 PDF 时，我想将它们合并到我正在生成的故事中；IE 表示reportlab“可流动”类型的PDF。

我正在尝试使用`pdfrw`，但没有任何运气。理想情况下，我很想打电话：

```
from pdfrw import PdfReader
pdf = pPdfReader(entry.document.file.path)
Story.append(pdf) 
```

并将 pdf 附加到现有的故事列表中，以包含在最终文档的生成中，如上所述。

有人有想法么？我尝试使用 pagexobj 进行类似的操作来创建 pdf，并尝试遵循以下示例：

[http://code.google.com/p/pdfrw/source/browse/trunk/examples/rl1/subset.py](http://code.google.com/p/pdfrw/source/browse/trunk/examples/rl1/subset.py)

```
from pdfrw.buildxobj import pagexobj
from pdfrw.toreportlab import makerl

pdf = pagexobj(PdfReader(entry.document.file.path)) 
```

但也没有运气。有人可以向我解释将现有PDF文件合并到reportlab flowable的最佳方法吗？我对这些东西并不擅长，并且几天来一直在研究 pdf 生成。:) 任何方向都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:02:01.340

我刚刚在一个项目中有一个类似的任务。我使用[reportlab](http://www.reportlab.com/software/opensource/)（开源版本）生成pdf文件和[pyPDF](http://pybrary.net/pyPdf/)以方便合并。我的要求略有不同，因为我只需要每个附件中的一页，但我相信这可能足以让您了解总体思路。

```
from pyPdf import PdfFileReader, PdfFileWriter

def create_merged_pdf(user):
    basepath = settings.MEDIA_ROOT + "/"
    # following block calls the function that uses reportlab to generate a pdf
    coversheet_path = basepath + "%s_%s_cover_%s.pdf" %(user.first_name, user.last_name, datetime.now().strftime("%f"))
    create_cover_sheet(coversheet_path, user, user.performancereview_set.all())

    # now user the cover sheet and all of the performance reviews to create a merged pdf
    merged_path = basepath + "%s_%s_merged_%s.pdf" %(user.first_name, user.last_name, datetime.now().strftime("%f"))

    # for merged file result
    output = PdfFileWriter()

    # for each pdf file to add, open in a PdfFileReader object and add page to output
    cover_pdf = PdfFileReader(file( coversheet_path, "rb"))
    output.addPage(cover_pdf.getPage(0))

    # iterate through attached files and merge.  I only needed the first page, YMMV
    for review in user.performancereview_set.all():
        review_pdf = PdfFileReader(file(review.pdf_file.file.name, "rb"))
        output.addPage(review_pdf.getPage(0)) # only first page of attachment

    # write out the merged file
    outputStream = file(merged_path, "wb")
    output.write(outputStream)
    outputStream.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T01:06:29.020

我使用以下课程来解决我的问题。它将 PDF 作为矢量 PDF 图像插入。它很好用，因为我需要一个目录。可流动的对象允许内置的 TOC 功能像魅力一样工作。

[ReportLab 是否有可流动的 matplotlib？](https://stackoverflow.com/questions/4690585/is-there-a-matplotlib-flowable-for-reportlab)

注意：如果文件中有多个页面，则必须稍微修改类。示例类旨在仅阅读 PDF 的第一页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-27T15:36:26.507

我知道这个问题有点老了，但我想使用最新的`PyPDF2`.

您现在可以访问`PdfFileMerger`，它可以做您想做的事，将 PDF 附加到现有文件。您甚至可以将它们合并到不同的位置并选择一个子集或所有页面！

官方文档在这里：[https ://pythonhosted.org/PyPDF2/PdfFileMerger.html](https://pythonhosted.org/PyPDF2/PdfFileMerger.html)

您问题中的代码示例：

```
import tempfile
import PyPDF2
from django.core.files import File

# Using a temporary file rather than a buffer in memory is probably better
temp_base = tempfile.TemporaryFile()
temp_final = tempfile.TemporaryFile()

# Create document, add what you want to the story, then build
doc = SimpleDocTemplate(temp_base, pagesize=letter, ...)
...
doc.build(...)

# Now, this is the fancy part. Create merger, add extra pages and save
merger = PyPDF2.PdfFileMerger()
merger.append(temp_base)
# Add any extra document, you can choose a subset of pages and add bookmarks
merger.append(entry.document.file, bookmark='Attachment')
merger.write(temp_final)

# Write the final file in the HTTP response
django_file = File(temp_final)
resp = HttpResponse(django_file, content_type='application/pdf')
resp['Content-Disposition'] = 'attachment;filename=logbook.pdf'
if django_file.size is not None:
    resp['Content-Length'] = django_file.size
return resp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-22T07:38:39.030

使用这个自定义流动：

```
class PDF_Flowable(Flowable):
#----------------------------------------------------------------------
def __init__(self,P,page_no):
    Flowable.__init__(self)
    self.P = P
    self.page_no = page_no
#----------------------------------------------------------------------
def draw(self):
    """
    draw the line
    """
    canv = self.canv
    pages = self.P
    page_no = self.page_no
    canv.translate(x, y)  
    canv.doForm(makerl(canv, pages[page_no]))
    canv.restoreState() 
```

然后在打开现有的 pdf 即

```
 pages = PdfReader(BASE_DIR + "/out3.pdf").pages
    pages = [pagexobj(x) for x in pages]
    for i in range(0, len(pages)):
        F = PDF_Flowable(pages,i)
        elements.append(F)
        elements.append(PageBreak()) 
```

使用此代码在元素 [] 中添加此自定义流动。

# netbeans - 更改netbeans中自动突出显示的变量名的突出显示颜色？

> ID：13368546
> 
> 赞同：11
> 
> 时间：2012-11-13T20:49:02.873
> 
> 标签：netbeans, fonts, colors, formatting, highlight

当我移动一个类名时，该类名出现的所有其他地方都会突出显示。当我将鼠标悬停在一个变量上时，它对我使用该变量的不同位置执行相同的操作。我找不到在 Netbeans 中更改该设置的位置。

我更改了其他所有内容，但即使我查看了突出显示部分中的每个选项，也没有与此处看到的相同黄色阴影：

![两个突出显示的类名](../Images/db8ec4c4919b5607d9c59e481057f909.png)

在语法或注释部分中也没有任何具有黄色阴影的内容。这甚至是我可以控制的设置吗？

如果有人需要知道，我有 Netbeans 7.2.1。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-27T21:41:14.743

它是特定于语言的。您必须转到语法 > 更改语言并修改“标记 Ocurrency”颜色。

了解更多： [如何在 NetBeans IDE 中更改高亮变量颜色？](https://stackoverflow.com/questions/9709787/how-to-change-the-highlight-variable-color-in-netbeans-ide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T09:57:45.340

我找到了这个主题生成器 - 帮助我制作了自己的颜色主题。

下面链接到在线 netbeans 颜色主题生成器

[Net Beans 主题生成器](http://svenspruijt.nl/themebuilder/)

*   允许指向 - 单击选择代码类型并分配新颜色
*   允许为 Eclipse 颜色主题 (.xml) 导出 netbeans 的颜色（作为 .zip）
*   在 NetBeans 7.4 上测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T04:10:36.217

我的回答为时已晚，但对其他人可能有用，在 Neatbeans 工具 >> 选项 >> 字体和颜色 >> 语言 (Java) >> 标记出现次数中。

# android - 在 Android 中查找位置的类型

> ID：13368554
> 
> 赞同：1
> 
> 时间：2012-11-13T20:49:32.487
> 
> 标签：android, location, google-places-api

鉴于我有一组位置坐标。我怎样才能找到那个地方的“类型”。例如。我可以说这个地方是餐厅、咖啡馆或购物场所吗？

这将是 Places API 可以告诉您每个附近地点的类型的方式。除了在我的情况下，我想要有问题的地方的类型。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:57:27.610

您应该可以使用 places API 来执行此操作。从设备获取坐标，并使用纬度/经度和非常小的距离（比如英尺）向 Places API 发出请求。您可能还应该按距离排名，因为突出是默认设置。然后，使用第一个结果，因为它将是您最接近的匹配项，并提取类型。

[https://developers.google.com/places/documentation/search#PlaceSearchRequests](https://developers.google.com/places/documentation/search#PlaceSearchRequests)

# linux - FTP 特定文件

> ID：13368555
> 
> 赞同：0
> 
> 时间：2012-11-13T20:49:47.587
> 
> 标签：linux, unix, scripting, ftp, lftp

我们可以从目录中 ftp 特定文件吗？这些需要传输的特定文件将在配置文件中指定。

为了这个目的，我们可以在登录 ftp（在脚本中）后使用 for 循环吗？

将文件从 Unix 传输到 win ftp 服务器时，正常的 ftp 是否工作。

谢谢，拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:53:17.723

这当然是可能的。您可以通过使用 ftp 客户端（内置或通过调用 cli 客户端）实现脚本来传输某些文件中列出的文件。该协议与系统无关，因此可以在运行不同操作系统的系统之间传输文件。只有一个问题：记住 MS-Windows 使用不区分大小写的文件系统，其他系统在这方面有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:53:57.923

您可以使用直壳。这假设您的登录目录是 /home/ravi 只尝试一次：

```
 echo "machine serverB user ravi password ravipasswd" > /home/ravi/.netrc
  chmod 600 /home/ravi/.netrc 
```

测试 .netrc 是否有效 -`ftp serverB` 应该让您直接登录。

读取 config.file 的 Shell 脚本，它只是要发送的文件列表

```
while read fname 
do
   ftp serverB <<EOF
   get $fname
   bye
EOF         # leave the EOF  in column #1 of the script file
done < config.file 
```

这从 serverB 获取文件。更改`get $fname`为`put $fname`将文件从服务器 A 发送到服务器 B

# objective-c - [objective-c]如何从另一个 .m 文件向一种方法发送消息

> ID：13368557
> 
> 赞同：0
> 
> 时间：2012-11-13T20:49:48.363
> 
> 标签：objective-c, xcode4.5

我正在尝试使用我在互联网上找到的代码从我的 iPad 应用程序中拍照。我有这个方法：

```
- (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
                                   usingDelegate: (id <UIImagePickerControllerDelegate,
                                                   UINavigationControllerDelegate>) delegate { 
```

在名为 CameraViewController.m 的文件中。

在 CameraViewController.h 中，我有这个定义：

```
@interface CameraViewController : UIViewController

+ (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
                                   usingDelegate: (id <UIImagePickerControllerDelegate,
                                   UINavigationControllerDelegate>) delegate;

@end 
```

我试图从 ClientSetupViewController.m 中的这个方法调用它：

```
 - (void) captureImage  {

        [startCameraControllerFromViewController: self usingDelegate: self];
} 
```

我收到一条错误消息

> 使用未声明的标识符 startCameraControllerFromViewController

我在 CLientViewController.h 中有 #import "CameraViewController.h"

我完全迷路了！我以为我已经正确定义了所有内容，但我想不是。我的代码有什么问题？

更新：将代码更改为调用实例后，现在出现此错误：

> 架构 armv7 的未定义符号：
> “_OBJC_CLASS_$_CameraViewController”，引用自：ClientSetupViewController 中的 objc-class-ref。 ：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:55:42.077

*在制作The Best iOS App Ever (TM)*之前，请再次阅读 Objective-C 教程——你缺少语法的**基础知识。**

一，您不一致地使用`-`and方法前缀。`+`决定它应该是类（`+`）还是实例（`-`）方法并相应地添加前缀 - 并在头文件的声明**和**定义（在实现文件中）中使用相同的前缀。

解决此问题后，如果您定义了类方法，则必须将消息发送到**类本身；如果您有****实例**方法，则必须将消息发送到实例。使用类方法的示例：

```
[CameraViewController startCameraControllerFromViewController:self usingDelegate:self]; 
```

使用实例方法的示例：

```
[someOtherViewController startCameraControllerFromViewController:self usingDelegate:self]; 
```

假设这`someOtherViewController`是一个有效的实例`CameraViewController`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:56:51.010

如果`startCameraControllerFromViewController:usingDelegate:`确实是一个类函数（如 + 所示），那么调用该函数的方式是：

`[CameraViewController startCameraControllerFromViewController: self usingDelegate: self]`

一条消息被发送到一个对象或一个类。在您的代码中，您只有 message call 中的消息名称`[ ]`，没有指明该消息应该发送到哪里。

# playframework - 为什么 Play 框架 (1.2.5) 会转义我的 JavaScript？

> ID：13368558
> 
> 赞同：0
> 
> 时间：2012-11-13T20:49:55.180
> 
> 标签：playframework, playframework-1.x

我正在尝试将 Olark 集成到我的应用程序中。为此，我必须在结束 body 标记之前将其放入我的 HTML 中：

```
<!-- begin olark code --><script data-cfasync="false" type='text/javascript'>/*{literal}<![CDATA[*/
window.olark||(function(c) ... "identify"]});
/* custom configuration goes here (www.olark.com/documentation) */
olark.identify('redacted my code');/*]]>{/literal}*/</script><noscript><a href="someurl" title="Contact us" target="_blank">Questions? Feedback?</a> powered by <a href="http://www.olark.com?welcome" title="Olark live chat software">Olark live chat software</a></noscript><!-- end olark code --> 
```

所以我把这放在我的观点中。但是，得到的只是

```
<!-- begin olark code --><script data-cfasync="false" type='text/javascript'>//</script><noscript><a href="https://www.olark.com/site/redacted my code/contact" title="Contact us" target="_blank">Questions? Feedback?</a> powered by <a href="http://www.olark.com?welcome" title="Olark live chat software">Olark live chat software</a></noscript><!-- end olark code --> 
```

整个脚本正在转换为一个`//`. 通过查看 Play 的文档，我看不出是什么原因造成的。有小费吗？

转义开始于`/*{literal}<![CDATA[*/`并结束于`/*]]>{/literal}*/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:56:48.517

弄清楚了。 `*{` `}*`是评论。通过替换`/*{literal}<![CDATA[*/`问题`/${"*"}{literal}<![CDATA[*/`已解决。

# php - 避免在插入期间添加多个字段的 MySQL/InnoDB 自动增量跳转

> ID：13368565
> 
> 赞同：1
> 
> 时间：2012-11-13T20:50:29.483
> 
> 标签：php, mysql, insert, innodb

参考：[防止在 MYSQL 重复插入时自动递增](https://stackoverflow.com/questions/5924762/prevent-autoincrement-on-mysql-duplicate-insert)

我正在使用 InnoDB 和一个导致自动递增 ID 跳转的 INSERT IGNORE 语句。

适用于表中单个字段的条目，就像他们在该问题中一样。但是，我遇到了同样的问题 - 基于 INSERT IGNORE 的自动增量 ID 的大幅跳跃。在这一点上，我有大约 2E4 个条目，ID 接近 9E6。

但是，我的 INSERT 语句有 5 个我想添加的字段。最终，我可以使用引用答案中的语句来添加唯一字段。然后使用 UPDATE 语句填写其他字段。但是，如果我想要运行 2 个单独的 MySQL 语句，我只需使用 SELECT 来确定唯一字段是否已经在数据库中，如果不是，则运行 INSERT。

有没有办法在防止 INSERT IGNORE 导致的 ID 跳转的同时插入多个字段？（我在 PHP 中使用 PDO 与我的数据库交互，因此 INSERT 语句是这样的：唯一列`INSERT IGNORE INTO tablename (field1, field2, field3, field4, field5) VALUES (?, ?, ?, ?, ?)`在哪里。）`field1`

请注意，我尝试了以下方法： `INSERT INTO tablename (field1=$field1, field2=$field2, ..., field5=$field5) SELECT $field1 FROM tablename WHERE NOT EXISTS ( SELECT field1 FROM tablename WHERE field1 = $field1 ) LIMIT 1`

和

`INSERT INTO tablename (field1, field2, ..., field5) VALUES (?, ?, ..., ?) SELECT $field1 FROM tablename WHERE NOT EXISTS ( SELECT field1 FROM tablename WHERE field1 = $field1 ) LIMIT 1` 和`$data = array($field1, $field2, ..., $field5);`

和

`INSERT INTO tablename (field1, field2, ..., field5) VALUES (?, ?, ..., ?) SELECT $field1 FROM tablename WHERE NOT EXISTS ( SELECT field1 FROM tablename WHERE field1 = ? ) LIMIT 1` 在这种情况下，我必须添加到上面给出的数组`$field1`的末尾。`$data`

谢谢

# cocos2d-iphone - Cocos2D，CCMenuAdvanced 实现错误：“_OBJC_CLASS_$_CCMenuAdvanced”链接器命令失败，退出代码为 1

> ID：13368566
> 
> 赞同：0
> 
> 时间：2012-11-13T20:50:30.027
> 
> 标签：cocos2d-iphone, clang, xcode4.5

好的。我正在开始一个新的 Cocos2D 模板，试图弄清楚 CCMenuAdvanced 是如何工作的。从没有物理的 Cocos2D 2.1 b2 项目开始，将 CCMenuAdvanced.h 和 CCMenuAdvanced.m 文件添加到我的项目中，从 HelloWorldLayer.m 初始化方法中删除样板代码，一切运行正常。黑屏。在我看来，我应该导入了所有库，当我输入与 CCMenuAdvance 相关的任何内容时，它会自动完成，所以看起来工作正常。这是我在 HelloWorldLayer 初始化方法中的所有内容：

```
CCMenuItemImage *scrollableSprite = [CCMenuItemImage itemWithNormalImage:@"640x2272ScrollableImage.png"
                                                    selectedImage:@"640x2272ScrollableImage.png"
                                                           target:self
                                                         selector:@selector(iDunnoYet)]; 
```

正如预期的那样，它编译并运行时带有未使用的变量“sprite”警告，但运行良好。一旦我将这行代码添加到项目中，期望得到另一个未使用的变量错误（菜单）：

```
CCMenuAdvanced *menu = [CCMenuAdvanced menuWithItems:scrollableSprite, nil]; 
```

我收到此错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_CCMenuAdvanced", referenced from:
      objc-class-ref in HelloWorldLayer.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经注释掉了那一行，它构建并运行良好。我已经阅读了可能引发此错误的两件不同的事情：1）我在我的项目中两次导入了一个文件或库，以及 2）我没有在我的构建设置中正确包含必要的库。首先，我检查了我的标题，它们看起来很好。我只在我的 HelloWorldLayer.h 文件中 #imported CCMenuAdvanced.h 文件。其次，它是一个 Cocos2D 模板，无需上述代码行即可正常工作，所以我认为所有必要的库都应该已经包含在内。

无论如何，如果有人能指出我正确的方向，我将不胜感激。提前致谢。当然，如果需要，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:02:43.137

验证 CCMenuAdvanced.m 是否已添加到项目的目标中。选择文件，打开实用程序视图并查看文件的目标成员资格。文件旁边应该有一个复选框。像这样：

![在此处输入图像描述](../Images/ad86626bdc01472d1d56b42e9864e6da.png)

# android - OnClickListener 未触发

> ID：13368568
> 
> 赞同：-1
> 
> 时间：2012-11-13T20:50:44.697
> 
> 标签：android

我正在务实地创建一些按钮。使用来自 2 个不同活动的相同代码，按钮触发不适用于其中一个活动。对于我必须忽略的内容，我感到有些困惑。

```
public class Home_Page_Activity extends Activity {

JSONArray nameArray;
JSONArray valArray;
String[] arrayButtonTitles;
String font;
Context context = null;
LinearLayout.LayoutParams params_textview;
LinearLayout.LayoutParams params_button;
LinearLayout.LayoutParams params_linearlayout;
LinearLayout home_page_layout;
OnClickListener myListener;
Typeface face;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home_page_activity);
    WebView wv_Welcome_Message = (WebView) findViewById(R.id.wv_Welcome_Message);

    context = getApplicationContext();
    params_linearlayout = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.MATCH_PARENT,
            LinearLayout.LayoutParams.WRAP_CONTENT, 1.0f);
    params_linearlayout.gravity = Gravity.CENTER;
    // Set Font
    font = "fonts/aescrawl.ttf";
    face = Typeface.createFromAsset(getAssets(), font);

    // Reference Layout
    home_page_layout = (LinearLayout) findViewById(R.id.home_page_layout);

    // Set Layout Parameters for XML Elements. (Height, Width,
    // Weight,Padding)
    params_button = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.MATCH_PARENT, 32, 1.0f);
    params_button.setMargins(10, 0, 10, 30);

    // Load webview if there is connectivity
    if (Repeatables.isNetworkAvailable(context) == true) {
        new InitTask().execute();
    } else {
        wv_Welcome_Message.setVisibility(View.GONE);
    }

    String[] arrayButtonTitles = { "Sub 1", "Sub 2", "Final 1", "Final 2",
            "Category 5", "Category 6", "Category 7", "Category 8",
            "Category 9", "Category 10" };
    Load_Main_Menu(arrayButtonTitles);

myListener = new OnClickListener() {
          public void onClick(View v) {
            Object tag = v.getTag();
            // Do something depending on the value of the tag

                Log.e("TAG","Button "+tag+" pushed");
              if("0".equals(tag.toString())){
                  Log.e("TAG","Hello 1");
              }else  if("21".equals(tag.toString())){
                    Intent i = new Intent(getApplicationContext(), Sub_Menu_Categories_Main_Activity.class);
                    i.putExtra("whatSubMenuToLoad","none");
                    i.putExtra("whatScreenTypeToLoad","FINALCATEGORY");
                    i.putExtra("categoryId","313");
                    startActivity(i);
              }
          }
        };

}

// Build Home Page XML Layout
public void Load_Main_Menu(String[] buttons) {

    arrayButtonTitles = buttons;
    int numberOfButtons = arrayButtonTitles.length;
    LinearLayout[] ll = new LinearLayout[numberOfButtons];

    // Add Elements to Layout
    for (int i = 0; i < numberOfButtons; i++) {

        Button btn = new Button(this);
        btn.setText(arrayButtonTitles[i]);
        btn.setTag(i);
        btn.setOnClickListener(myListener);
        btn.setTypeface(face);
        btn.setTextSize(18);
        btn.setTextColor(context.getResources().getColor(
                R.color.all_button_font_color));
        btn.setBackgroundResource(R.drawable.category_button_background_shape);
        if (i % 2 == 0) {
            ll[i] = new LinearLayout(this);
            ll[i].setOrientation(LinearLayout.HORIZONTAL);
            ll[i].addView(btn, params_button);
            home_page_layout.addView(ll[i], params_linearlayout);
        } else {
            ll[i - 1].addView(btn, params_button);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:53:59.267

你还没有初始化`myListener`，没有什么可以触发的……哎呀 :)

# sql-server - 当值在临时表中时，将 sql 列更新 1

> ID：13368571
> 
> 赞同：-2
> 
> 时间：2012-11-13T20:51:10.553
> 
> 标签：sql-server, sql-update

如果同一行中另一列的值等于临时表中的值，我试图将 1 添加到一列。下面是代码。当我从存储过程运行代码时，它会为每一列添加 1，而不仅仅是临时表中显示的那些。有人看到查询有什么问题吗？

```
DECLARE @LineTable TABLE (
TempLineNumber FLOAT)

INSERT @LineTable
SELECT DocumentNumber
FROM   chargebackdetailtemptable
GROUP  BY DocumentNumber
HAVING Count(*) > 1

UPDATE ChargebackDetailTempTable
SET    LineNumber = (SELECT Max(LineNumber) + 1
                     FROM   ChargebackDetailTempTable c
                            LEFT OUTER JOIN @LineTable c2
                              ON c.DocumentNumber = c2.TempLineNumber
                     WHERE  c.DocumentNumber IS NOT NULL
                            AND c2.TempLineNumber IS NOT NULL) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:55:22.213

```
UPDATE ChargebackDetailTempTable
SET LineNumber = LineNumber + 1
FROM ChargebackDetailTempTable
INNER JOIN @LineTable lt ON lt.DocumentNumber = ChargebackDetailTempTable.DocumentNumber
WHERE lt.DocumentNumber IS NOT NULL 
```

您可以在更新语句中使用联接。我不确定您是在 +1 行号还是来自（在上述问题中的子查询中的`lt`别名）。`c2`无论哪种方式，这都应该让你到达你想去的地方。

# javafx - 在不覆盖 toString() 方法的情况下使用 JavaFX 2 的组合框呈现 POJO

> ID：13368572
> 
> 赞同：13
> 
> 时间：2012-11-13T20:51:13.193
> 
> 标签：javafx

我有一个员工列表，我需要在组合框中呈现其姓名以供用户选择。以下代码呈现下拉列表中的名称，但是当我选择一个名称时，组合显示的文本包含完整的 POJO 标识，如“src.org.entities.Employee@449ac7ce”的字符串

```
cboEmployees.setCellFactory(new Callback<ListView<Employee>, ListCell<Employee>>()
    {
        @Override
        public ListCell<Employee> call(ListView<Employee> p)
        {
            return new ListCell<Employee>()
            {
                @Override
                protected void updateItem(Employee item, boolean empty) {
                    super.updateItem(item, empty);

                    if (item != null)
                    {
                        setText(item.getName());
                    }
                }
            };
        }
    }); 
```

有没有办法让显示的文本也呈现选定的名称而不覆盖 POJO 的 toString() 方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-13T22:11:48.313

在您的 上调用[setButtonCell](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ComboBox.html#setButtonCell%28javafx.scene.control.ListCell%29)`ComboBox`，提供适当的`ListCell`渲染器实现来显示员工姓名。

例如：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;
import javafx.util.Callback;

public class BasicComboBoxSample extends Application {
    public static void main(String[] args) { launch(args); }

    @Override public void start(Stage stage) {
        final Employee john = new Employee("John");
        final Employee jill = new Employee("Jill");
        final Employee jack = new Employee("Jack");

        final ComboBox<Employee> cboEmployees = new ComboBox();
        cboEmployees.setButtonCell(new EmployeeListCell());
        cboEmployees.setCellFactory(new Callback<ListView<Employee>, ListCell<Employee>>() {
            @Override public ListCell<Employee> call(ListView<Employee> p) {
                return new EmployeeListCell();
            }
        });
        cboEmployees.getItems().addAll(john, jill, jack);
        cboEmployees.setValue(jill);

        final StackPane layout = new StackPane();
        layout.getChildren().add(cboEmployees);
        layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 15;");
        stage.setScene(new Scene(layout));
        stage.show();
    }    

    class Employee {
        public Employee(String name) { this.name = name; }
        private String name;
        public String getName() { return name; }
    }

    class EmployeeListCell extends ListCell<Employee> {
        @Override protected void updateItem(Employee item, boolean empty) {
            super.updateItem(item, empty);
            if (!empty && item != null) {
                setText(item.getName());
            } else {
                setText(null);
            }
        }
    }
} 
```

样本输出：

![组合框自定义按钮示例](../Images/65bd29753d3c414517009465dac96d65.png)

# ios - 在 MonoCross iOS 应用程序中使用 SlideOut 导航

> ID：13368574
> 
> 赞同：4
> 
> 时间：2012-11-13T20:51:26.173
> 
> 标签：ios, mono, xamarin.ios, monocross

Dillon Buchanan 有一个很好的示例，用于在 MonoTouch[中创建左侧滑出式导航。](http://www.dillonbuchanan.com/programming/monotouch-slide-out-navigation/)

我的问题是我正在使用 MonoCross 并且无法弄清楚如何实现它。下面是 Dillon's vs my `FinishedLaunching`implementation 的片段。

**狄龙：**

```
public override bool FinishedLaunching (UIApplication app, NSDictionary options)
{
    window = new UIWindow (UIScreen.MainScreen.Bounds);
    Menu = new SlideoutNavigationController();
    Menu.TopView = new HomeViewController();
    Menu.MenuView = new DummyController();

    window.RootViewController = Menu;
    window.MakeKeyAndVisible ();

    return true;
} 
```

**矿**

```
public override bool FinishedLaunching (UIApplication app, NSDictionary options)
{
    // create a new window instance based on the screen size
    window = new UIWindow (UIScreen.MainScreen.Bounds);

    MXTouchContainer.Initialize(new eDash.App(), this, window);

    // Add Views
    MXTouchContainer.AddView<List<Location>>(typeof(LocationListView), ViewPerspective.Default);
    MXTouchContainer.AddView<Location>(typeof(LocationView), ViewPerspective.Default);
    MXTouchContainer.AddView<List<Engagements>>(typeof(EngagementsListView), ViewPerspective.Default);

    MXTouchContainer.Navigate(null, MXContainer.Instance.App.NavigateOnLoad);

    UIDevice.CurrentDevice.BeginGeneratingDeviceOrientationNotifications(); 
    UINavigationBar.Appearance.TintColor =UIColor.Black;

    return true;
} 
```

# asp.net - DropDownList 不会加载

> ID：13368575
> 
> 赞同：0
> 
> 时间：2012-11-13T20:51:27.130
> 
> 标签：asp.net, internet-explorer-10

我有一个 ASP.NET Web 应用程序，它有一个下拉列表，可以拉出学生记录。这适用于所有浏览器、Android OS 和 IOS，除了 windows 平板电脑上的新 IE。有谁知道为什么它不加载或提取信息？

这是一些代码：

```
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
        DataSourceID="SqlDataSource3"  DataTextField="zName" DataValueField="Id" 
        AppendDataBoundItems="True" 
        onselectedindexchanged="DropDownList1_SelectedIndexChanged">
        <asp:ListItem Value="0">Select</asp:ListItem>
    </asp:DropDownList>
<asp:SqlDataSource ID="SqlDataSource3" runat="server" 
        ConnectionString="<%$ ConnectionStrings:TestDBConnectionString1 %>" 
        SelectCommand="SELECT Id, (lName + ', ' + fName) AS zName FROM bleaTest"></asp:SqlDataSource>

<asp:FormView ID="FormView1" runat="server" 
        DataSourceID="SqlDataSource1">
<ItemTemplate>
            <span class="style1">Id:
            <asp:Label ID="IdLabel" runat="server" CssClass="bold" 
                Text='<%# Bind("Id") %>' />
            <br />
            First Name:
            <asp:Label ID="fNameLabel" runat="server" CssClass="bold" 
                Text='<%# Bind("fName") %>' />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Last Name:
            <asp:Label ID="lNameLabel" runat="server" CssClass="bold" 
                Text='<%# Bind("lName") %>' />
            &nbsp;<br /> Gender:
            <asp:Label ID="genLabel" runat="server" CssClass="bold" 
                Text='<%# Bind("gen") %>' />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Agency:
            <asp:Label ID="agencyLabel" runat="server" CssClass="bold" 
                Text='<%# Bind("agency") %>' />
            <br />
            Title:
            <asp:Label ID="titleLabel" runat="server" CssClass="bold" 
                Text='<%# Bind("title") %>' />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </span>
            <br />
        </ItemTemplate>
</asp:FormView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:TestDBConnectionString1 %>" 
        DeleteCommand="DELETE FROM [bleaTest] WHERE [Id] = @Id" 
        SelectCommand="SELECT Id, fName, lName, agency, title, gen, hired, AppS, course, Location, SessNum, SDate, EDate, Hours, SitUps, pushUps, rTime, Grade FROM bleaTest WHERE (Id = @Id)"

        UpdateCommand="UPDATE [bleaTest] SET [fName] = @fName, [lName] = @lName, [agency] = @agency, [title] = @title, [gen] = @gen, [hired] = @hired, [AppS] = @Apps, [course] = @course, [Location] = @Location, [SDate] = @SDate, [EDate] = @EDate, [Hours] = @Hours WHERE [Id] = @Id">
        <DeleteParameters>
            <asp:Parameter Name="Id" Type="Int32" />
        </DeleteParameters>
        <SelectParameters> 
            <asp:ControlParameter ControlID="DropDownList1" Name="Id"  
                PropertyName="SelectedValue" Type="String" /> 

        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="fName" Type="String" />
            <asp:Parameter Name="lName" Type="String" />
            <asp:Parameter Name="Agency" Type="String" />
            <asp:Parameter Name="title" />
            <asp:Parameter Name="gen" />
            <asp:Parameter Name="hired" />
            <asp:Parameter Name="Apps" />
            <asp:Parameter Name="course" />
            <asp:Parameter Name="Location" />
            <asp:Parameter Name="SDate" />
            <asp:Parameter Name="EDate" />
            <asp:Parameter Name="Hours" />
            <asp:Parameter Name="Id" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

先感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:54:18.317

做了更多的研究并弄清楚了（最后）。出于某种原因或者可能是出于安全原因，IE10 有一个问题，`postback` 我发现一个很好的链接可能会帮助一些人。

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

希望这可以帮助！

# youtube - 使用维度“sharingService”查询时查询不符合预期

> ID：13368577
> 
> 赞同：0
> 
> 时间：2012-11-13T20:51:33.063
> 
> 标签：youtube, youtube-api

我正在为分析 API 编写一个 ruby​​ gem，并在尝试构建检索共享服务的方法时遇到了这个错误：

```
$ yt_session('https://www.googleapis.com').get("/youtube/analytics/v1/reports?ids=channel==7BCpCq_Vh2V0kVW28GTwGg&dimensions=sharingService&metrics=shares&start-date=2012-10-09&end-date=2012-10-10")

{ "error": {  "errors": [   {    "domain": "global",    "reason": "badRequest",    "message": "Invalid query. Query did not conform to the expectations."   }  ],  "code": 400,  "message": "Invalid query. Query did not conform to the expectations." }} 
```

当我替换指标和维度时，我没有问题。

我一直在关闭此页面上的文档：[YouTube Analytics Docs](https://developers.google.com/youtube/analytics/v1/available_reports)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:34:58.367

这不是一个非常有用的错误消息，但我的假设是您的问题中至少有一个是您的`channel==`参数不正确。频道 ID 以 UC 为前缀，因此您需要传入`ids=channel==UC7BCpCq_Vh2V0kVW28GTwGg`

这能为你解决吗？

# matlab - 多列的randperm

> ID：13368585
> 
> 赞同：0
> 
> 时间：2012-11-13T20:51:56.027
> 
> 标签：matlab

在这里的上一个问题上对最后一行代码中为示例给出的答案进行[采样](https://stackoverflow.com/questions/13355372/sampling-data-in-matlab)仅返回 1000x1 而不是 1000x6？

```
%% 
normIdx = strmatch('normal.', Book2);
normalSubset = fulldata(normIdx, :);
normal = randperm(size(normalSubset , 1));
p = normal(1:750)-1;

%
smurfIdx = strmatch('smurf.', Book2);
smurfSubset = fulldata(smurfIdx, :);
smurf = randperm(size(smurfSubset , 1));
a = smurf(1:250)-1;

%
normalSample = normalSubset (p, :);
smurfSample = smurfSubset (a, :);

%
sample = [normalSample ; smurfSubset]

%
sample = sample(randperm(1000)); % this line 
```

我试过：

```
sample = randperm( size(sample, 1)); 
```

这在一行上输出了 28,000 条记录，显然不是我想要的。然后我尝试了：

```
rows = 1000;
columns = 6;

%# pick random columns
 indY = randperm( size(sample,2) );
 indY = indY(1:columns);

%# pick random rows
indX = randperm( size(sample,1) );
indX = indX(1:rows)';

%# filter data
sample = [indX ; indY]; 
```

但我无法连接最后一行？这只是尝试解决 1000x6 问题的尝试，如果有人能想出更好的“工作方式”的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:57:13.467

怎么样

```
 sample = sample(randperm(1000),:); 
```

# php - 使用现有数据库设置 CakePHP

> ID：13368587
> 
> 赞同：0
> 
> 时间：2012-11-13T20:52:02.897
> 
> 标签：php, mysql, cakephp

我目前设置了一个 MySQL 服务器数据库，其中有一些简单的表来跟踪订单，例如 tblOrders、tblUsers、tblProducts。

虽然我现在有一个网站可以正常使用它，但我想设置 CakePHP 作为服务器端框架来处理与数据库的交互，而不是在我的 PHP 页面中使用手写查询。

有没有一种简单的方法可以用我现有的数据库/表来设置 CakePHP？

如果我理解正确，我将有一个扩展控制器的主 MyApplication 类，以及每个扩展 MyApplication 类的订单、用户、产品（...其他表）类。

看起来 REST 指南在配置文件中使用了一个名为`Router::mapResources('recipes');`. 这是否会使用用于 REST 的默认方法为每个表创建控制器？

即在 /app/config/routes.php 配置文件中：

```
// /app/config/routes.php
Router::mapResources('tblOrders');
Router::mapResources('tblUsers');
Router::mapResources('tblProducts');

// /app/config/database.php
<?php
class DATABASE_CONFIG {
    public $default = array(
        'datasource'  => 'Database/myStoreDB',
        'persistent'  => false,
        'host'        => 'localhost',
        'login'       => 'admin_user',
        'password'    => 'c4k3roxx!',
        'database'    => 'main_db',
        'prefix'      => ''
    );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:16:21.357

如果你想为你创建模型、控制器和视图代码，你正在寻找[烘焙](http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html)。

Cake 希望您的数据库表遵循[命名约定](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html)。我不确定烘烤会如何进行，因为你的桌子不符合这个惯例。您可能需要手动创建模型类并指定`useTable`每个类的属性。例如：

```
<?php
class Order extends AppModel {
    public $useTable = 'tblOrders';
} 
```

一旦完成，我希望控制器和视图的烘焙应该正常工作。请注意，`mapResources`您仍然需要控制器代码。该函数只生成路由。

如果 Cake 是唯一会触及这个数据库的东西，我建议按照它所期望的约定重命名表和列。

# intersystems-cache - 系统间缓存 - %ListOfObjects 的正确语法

> ID：13368588
> 
> 赞同：1
> 
> 时间：2012-11-13T20:52:13.597
> 
> 标签：intersystems-cache, intersystems

[文档](http://training.intersystems.com/tutorials/DocBook.UI.Page.cls?KEY=TSOA_ReturnListOfObjects1#TSOA_C131828)说这是允许的：

```
ClassMethod GetContacts() As %ListOfObjects(ELEMENTTYPE="ContactDB.Contact") 
[WebMethod] 
```

我想做这个：

```
Property Permissions As %ListOfObjects(ELEMENTTYPE="MyPackage.MyClass"); 
```

我收到一个错误：

> 错误 #5480：未声明属性参数：MyPackage.Myclass:ELEMENTTYPE

那么，我真的必须创建一个新类并在其中为我需要的每个列表设置 ELEMENTTYPE 参数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T06:22:10.047

属性中 %ListOfObjects 的正确语法是这个

```
Property Permissions As list of MyPackage.MyClass; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:59:34.067

是的，当涉及到类型时，属性有时与方法的工作方式不同。这是这里的一个问题，因为您可以以直接的方式设置方法声明的返回值的类参数，但这并不总是适用于属性类的类参数。

我不认为它的工作方式被完整记录，但这里有一些我的观察：

如果属性的类型是数据类型（通常与对象不同的处理方式），您*可以在属性上放入类参数。*

如果您查看 %XML.Adaptor 类，它具有关键字赋值语句

```
PropertyClass = %XML.PropertyParameters 
```

这似乎将其参数添加到将其声明为其 PropertyClass 的类的所有属性中。这似乎是 Intersystems 想要实现某些东西（一个 XML 适配器）并意识到对象的实现并没有干净地提供它的一个例子，所以他们在类编译器中加入了一些新的东西。我真的找不到太多文档，所以不清楚它是否被认为是可用的 API 或可能被破坏的实现细节。

你也许可以用这种方式破解一些东西——我从来没有尝试过类似的东西。

一个可能更简单的解决方法可能是在 %OnNew 和 %OnOpen 中初始化 Permissions 属性。无论如何，你可能会想要一个零元素数组，而不是 null。

如果您查看 %ListOfObjects 的实现，您会发现您尝试设置的类参数只是为 ElementType 属性提供了一个默认值。因此，在创建 %ListOfObjects 实例后，您只需将其 ElementType 属性设置为正确的元素类型。

这有点烦人，因为您必须记住每次都要手动执行，您可能会忘记。或者，未来的维护者可能现在不会这样做。

您可能希望通过创建一个初始化所有需要它的属性的生成器方法来减少它的烦人。如果 Intersystems 有一些体面的用任意值注释属性的系统，这将很容易（这样您就可以知道每个属性使用什么 ElementType）。但他们没有，所以你必须做一些事情，比如使用 XData 块或类方法滚动你自己的注释。这可能是不值得的，除非你有更多的注释用例而不是这个，所以我会手工完成，直到发生这种情况，如果有的话。

# jquery - 文本框值不刷新

> ID：13368589
> 
> 赞同：0
> 
> 时间：2012-11-13T20:52:17.923
> 
> 标签：jquery, html, jquery-mobile, input

我有一个文本框，其默认值在焦点上消失：

```
<input data-role="none" class="search-box" id="addressLookupTxt" type="text" value="City and State or Zipcode" onfocus="clearText(this)" onblur="clearText(this)" /> 
```

输入文本（即 90210）并提交值后，当我返回此输入的页面时，提交的值仍然存在。

我怎样才能刷新这个值，所以当我返回时它是默认值？

```
$('#CheckInPage').live('pagebeforeshow', function(toPage, fromPage){}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:03:51.167

使用 jquery 移动使用时，不建议在默认/索引页面中创建多个页面

```
 <a href="prefetchThisPage.html" data-prefetch> ... </a> 
```

这将负责发回您的页面

查看[缓存页面](http://jquerymobile.com/test/docs/pages/page-cache.html)

# android - 将 AsyncTask onPreExecute 添加到片段

> ID：13368592
> 
> 赞同：1
> 
> 时间：2012-11-13T20:52:34.530
> 
> 标签：android, android-asynctask, actionbarsherlock, fragment

我想将 onPreExecute AsyncTask 添加到 SherlockFragment 但它会导致错误。我的代码如下。在 preExecute AsyncTask 上添加对话框的这段代码有什么问题？

```
public class customlist extends SherlockFragment  {
static final String URL = "esample";
static final String KEY_SONG = "song"; // parent node
private static final String KEY_TAB_NUM = "key.tab.num";
 private ProgressDialog pDialog;

ListView list;
LazyAdapterbeth adapter;
XMLParser parser = new XMLParser();
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new getFeed().execute();

}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 

{
    View thisfragment = inflater.inflate(R.layout.dovomi, container, false);

    return thisfragment;
}

private class getFeed extends AsyncTask<Void, Void, Document> {
  @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(customlist.this);
        pDialog.setTitle("Connect to Server");
        pDialog.setMessage("This process can take a few seconds to a few minutes, depending on your Internet Connection Speed.");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    protected Document doInBackground(Void... params) {

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        return doc;
    } 
```

它会导致行中的错误

```
pDialog = new ProgressDialog(customlist.this); 
```

如何在此片段中添加对话框或进度条？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T20:54:42.547

ProgressDialog 将 Context 作为参数。由于您在 Fragment 中使用它，因此您可以使用它`getActivity()`。

# php - 查找数字在两列中出现的总次数

> ID：13368594
> 
> 赞同：1
> 
> 时间：2012-11-13T20:52:52.160
> 
> 标签：php, mysql

我有一个 MySQL 数据库，可以在其中添加电视上播放的足球比赛。每个团队都表示为一个数字。我真的不知道如何进行查询以列出一支球队在电视上播出的次数，无论他们是在主场还是客场比赛。

我正在尝试列出在电视上播放的前 20 名球队名单。我有团队 ID 的两列分别称为“hjemmehold”和“udehold”（它是丹麦语 :)）。

任何人都可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:25:32.973

```
SELECT Team, Count(*)
FROM (select Away as Team from Games union all select Home as Team from Games) t
GROUP BY Team
ORDER BY Count(*) Desc
LIMIT 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:54:49.893

```
SELECT SUM(Away)+SUM(Home) AS NumGames
FROM Games
WHERE Team=@Team 
```

显然这是伪代码，但是把正确的表/字段/参数放进去，你应该很高兴。

对于所有 20 支球队：

```
SELECT TOP 20 Team, SUM(Away)+SUM(Home) AS NumGames
FROM Games
ORDER BY SUM(Away)+SUM(Home) desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:00:12.643

t.his 应该可以给你出战过的前 20 支球队。这还可以让您找到哪些球队还没有参加过比赛（如果您删除前 20 名部分）。

```
SELECT TOP 20
    team_id, 
    (SELECT COUNT(1) FROM GAMES WHERE HOME = t.team_id) + (SELECT COUNT(1) FROM GAMES WHERE AWAY = team_id) AS team_count
FROM TEAMS T 
ORDER BY team_count DESC 
```

# matlab - 两个向量之间的欧几里得距离（单行矩阵）

> ID：13368597
> 
> 赞同：12
> 
> 时间：2012-11-13T20:53:24.683
> 
> 标签：matlab, octave

我有两个向量（单行矩阵）。假设我们已经知道长度`len`。

```
A = [ x1 x2 x3 x4 x5 .... ]
B = [ y1 y2 y3 y4 y5 .... ] 
```

要计算它们之间的欧几里得距离，最快的方法是什么。我的第一次尝试是：

```
diff = A - B
sum = 0
for column = 1:len
    sum += diff(1, column)^2
distance = sqrt(sum) 
```

我已经循环使用了这种方法数百万次。所以，我正在寻找快速且正确的东西。请注意，我没有使用 MATLAB，也没有可用的 pdist2 API。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-13T20:57:09.863

```
diff = A - B;
distance = sqrt(diff * diff'); 
```

或者

```
distance = norm(A - B); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:30:10.337

```
[val idx]    =  sort(sum(abs(Ti-Qi)./(1+Ti+Qi))); 
```

或者

```
[val idx]    =  sort(sqrt(sum((Ti-Qi).^2))); 
```

Val 是值，idx 是应用欧几里得距离后被排序的列的原始索引值。（MATLAB代码）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-29T18:59:06.360

要添加到@kol 答案，

```
diff = A - B;
distance = sqrt(sum(diff * diff')) % sum of squared diff 
```

或者

```
distance = norm(A-B); 
```

# syntax - 难以理解在函数中检索传递给脚本的参数值的机制

> ID：13368599
> 
> 赞同：1
> 
> 时间：2012-11-13T20:53:34.553
> 
> 标签：syntax, autohotkey

该脚本将两个参数值传递给脚本的另一个实例。所以内置参数变量 0 包含传递参数的数量。1 在下面的示例“C:/Windows”中，2 是“/switchtest”

可以使用函数外部的传统方法（使用单个等号）将参数值分配给 strParam1 和 strParam2。但是，在函数内部，分配失败。

如果将它们分配在带有 := 符号的循环中，它似乎可以工作。

为什么？任何人都可以解释这种行为吗？

```
strParam1 = %1%
strParam2 = %2%
msgbox, 64, Outside the Function, number of parameters:%0%`npath: %strParam1%`nswitch: %strParam2%
test_params()

strPath := "C:/Windows"
strSwitch := "/switchtest"
RunWait "%A_AhkPath%" "%A_ScriptFullPath%" "%strPath%" "%strSwitch%"

test_params() {
    global 0

    ; this works
    ; loop %0%
        ; strParam%A_Index% := %A_Index%

    ; this causes an error: "This dynamic variable is blank. If this variable was not intended to be dynamic, remove the % symbols from it."
    ; strParam1 := %1%
    ; strParam2 := %2%

    ; this passes empty values; however, this method works outside the function.
    strParam1 = %1%
    strParam2 = %2%

    msgbox, 64, Inside the Function, number of parameters:%0%`npath: %strParam1%`nswitch: %strParam2%
    if strParam2
        exitapp

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:55:10.703

你有正确的想法`global 0`；允许 %0% 从顶层进入函数。你也只需要声明`global 1, 2`。

即使这样做，也不能使用`:=`将它们分配给变量，因为`:=`处理表达式并且没有在表达式中使用它们的语法（通常在表达式中仅使用变量名称来引用变量，而没有`%%`; 显然`1`并被`2`解释为实际数字而不是变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:56:16.767

@echristopherson 回答了这个问题，但我想提出一个解决方法。这假设您正在使用 AutoHotkey_L。

如果您使用参数“ab c”运行测试脚本，它会为您提供这个。

```
3
1, a
2, b
3, c 
```

考试：

```
argv := args()
test := argv.MaxIndex() "`n"

for index,param in argv
    test .= index ", " param "`n"

MsgBox % test 
```

和功能：

```
args() {
    global
    local _tmp, _out

    _out := []

    Loop %0% {
        _tmp := %A_Index%
        if _tmp
            _out.Insert(_tmp)
    }

    return _out
} 
```

# c# - 获取对 UINavigationController 的引用

> ID：13368605
> 
> 赞同：3
> 
> 时间：2012-11-13T20:54:16.053
> 
> 标签：c#, objective-c, ios, xamarin.ios, uiapplicationdelegate

我有一个 rootcontroller 推送到`UINavigationController`. 在那个 rootcontroller 类中，我可以访问`UINavigationController`with`this.NavigationController`

但是，这个根控制器有一个 ScrollView，我正在向这个 ScrollView 添加子控制器（或更准确地说，这个子控制器的视图）。

我现在想从这样的子控制器内部访问 UINavigationController。以下属性均为空

```
 this.NavigationController
        this.ParentViewController
        this.PresentedViewController
        this.PresentingViewController 
```

在ObjectiveC中您似乎可以使用以下代码

```
YourAppDelegate *del = (YourAppDelegate *)[UIApplication sharedApplication].delegate;
[del.navigationController pushViewController:nextViewController animated:YES]; 
```

不幸的是，我不知道如何将它映射到 MonoTouch 中的 C#。我尝试了以下方法，但它不起作用：

```
UIApplication.SharedApplication.KeyWindow.RootViewController.NavigationController 
```

我知道我可以将 UINavigationController 对象传递给我的所有类（构造函数中的参数），但这可能不是最干净的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T07:14:22.243

为了扩展 poupou 的答案，这是我通常在`AppDelegate`课堂上做的一个例子：

添加自身的静态属性`AppDelegate`：

```
public static AppDelegate Self { get; private set; } 
```

将我的根导航控制器添加为属性：

```
public UINavigationController MainNavController { get; private set; } 
```

在`FinishedLaunching`：

```
Self = this;
window = new UIWindow(UIScreen.MainScreen.Bounds);
this.MainNavController = new UINavigationController(); // pass the nav controller's root controller in the constructor
window.RootViewController = this.MainNavController;
// .. 
```

这样，我可以从任何地方访问根视图控制器，如下所示：

```
AppDelegate.Self.MainNavController.PushViewController(someViewController); 
```

...而不是一直写这个：

```
AppDelegate myAppDelegate = (AppDelegate)UIApplication.SharedApplication.Delegate;
myAppDelegate.MainNavController.PushViewController(someViewController); 
```

另外，我可以直接访问`AppDelegate`我可能拥有的所有其他属性。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:47:29.230

[`UIApplicationDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)本身并不定义`navigationController`属性。

OTOH`[UIApplication sharedApplication].delegate`返回您自己的、*特定于应用程序*的实例，`UIApplicationDelegate`因此它是分享东西的好地方（以及为什么经常使用它）。

在 ObjectiveC中，*通常*发生的是这种自定义的、`UIApplicationDelegate`衍生的类型将实现它自己的*应用程序*属性。IOW`YourAppDelegate`将实现一个`navigationController`可以在应用程序内的任何位置访问的属性，通过使用`[UIApplication sharedApplication].delegate`.

您可以在 .NET / C# 中执行非常类似的操作。只需将您自己的属性添加到您的 AppDelegate 类型，就像[这个](https://stackoverflow.com/q/12372352/220643)例子一样。您将能够像Objective-C（如果您愿意）或更直接地访问它们（例如，通过使它们成为`public static`属性）。

请注意，您仍然必须正确跟踪和设置属性（就像在 Objective-C 中也需要完成一样）。

# functional-programming - 带有 if 的嵌套函数的 Erlang 语法

> ID：13368607
> 
> 赞同：1
> 
> 时间：2012-11-13T20:54:22.523
> 
> 标签：functional-programming, erlang, anonymous-function

我一直在环顾四周，找不到这样的例子，我所有的语法摔跤技巧都让我失望了。有人可以告诉我如何编译吗？我的 ,s ;s 或 .s 是错误的我猜想定义一个嵌套函数......

我知道已经有一个用于进行字符串替换的函数，所以我不需要实现这个，但我正在玩 Erlang 试图拿起它，所以我正在手动旋转一些我需要使用的基础知识。 .

```
replace(Whole,Old,New) ->
    OldLen = length(Old),
    ReplaceInit = fun(Next, NewWhole) ->
              if
                  lists:prefix(Old, [Next|NewWhole]) -> {_,Rest} = lists:split(OldLen-1, NewWhole), New ++ Rest;
                  true -> [Next|NewWhole]
              end,
    lists:foldr(ReplaceInit, [], Whole). 
```

基本上我正在尝试编写这个haskell（也可能很糟糕，但超出了重点）：

```
repl xs ys zs =
  foldr replaceInit [] xs
  where
    ylen = length ys
    replaceInit y newxs
      | take ylen (y:newxs) == ys = zs ++ drop (ylen-1) newxs
      | otherwise = y:newxs 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T21:09:51.990

主要问题是`if`你只能使用*警卫*作为测试。守卫非常受限制，除其他外，不允许调用一般的 Erlang 函数。无论它们是 OTP 版本的一部分还是由您编写。您的功能的最佳解决方案是使用`case`而不是`if`. 例如：

```
replace(Whole,Old,New) ->
    OldLen = length(Old),
    ReplaceInit = fun (Next, NewWhole) ->
                      case lists:prefix(Old, [Next|NewWhole]) of
                          true ->
                              {_,Rest} = lists:split(OldLen-1, NewWhole),
                              New ++ Rest;
                          false -> [Next|NewWhole]
                      end
                  end,
    lists:foldr(ReplaceInit, [], Whole). 
```

因为这`if`在 Erlang 中并不经常使用。请参阅Erlang 文档中的[about`if`](http://www.erlang.org/doc/reference_manual/expressions.html#id76465)和[about 守卫](http://www.erlang.org/doc/reference_manual/expressions.html#id79507)。

# extjs - 当 fireFox 上的 forcefit = true 时，无法在 extjs(3.4) 中调整网格大小

> ID：13368616
> 
> 赞同：0
> 
> 时间：2012-11-13T20:55:08.510
> 
> 标签：extjs, extjs3

我在页面中定义了这两个网格。我无法在 fireFox 中调整列的大小。这是代码，代码是直接从 extjs 示例中挑选出来的。

Ext.onReady(function() {

```
 //console.log("ExtOnReady()");
    Ext.QuickTips.init();
    Ext.MessageBox.maxWidth = 300;
    Ext.Ajax.timeout = 12000000;

    Ext.QuickTips.init();

    // NOTE: This is an example showing simple state management. During development,
    // it is generally best to disable state management as dynamically-generated ids
    // can change across page loads, leading to unpredictable results.  The developer
    // should ensure that stable state ids are set for stateful components in real apps.
    Ext.state.Manager.setProvider(new Ext.state.CookieProvider());

    // sample static data for the store
    var myData = [
        ['3m Co',                               71.72, 0.02,  0.03,  '9/1 12:00am'],
        ['Alcoa Inc',                           29.01, 0.42,  1.47,  '9/1 12:00am'],
        ['Altria Group Inc',                    83.81, 0.28,  0.34,  '9/1 12:00am'],
        ['American Express Company',            52.55, 0.01,  0.02,  '9/1 12:00am'],
        ['American International Group, Inc.',  64.13, 0.31,  0.49,  '9/1 12:00am'],
        ['AT&T Inc.',                           31.61, -0.48, -1.54, '9/1 12:00am'],
        ['Boeing Co.',                          75.43, 0.53,  0.71,  '9/1 12:00am'],
        ['Caterpillar Inc.',                    67.27, 0.92,  1.39,  '9/1 12:00am'],
        ['Citigroup, Inc.',                     49.37, 0.02,  0.04,  '9/1 12:00am'],
        ['E.I. du Pont de Nemours and Company', 40.48, 0.51,  1.28,  '9/1 12:00am'],
        ['Exxon Mobil Corp',                    68.1,  -0.43, -0.64, '9/1 12:00am'],
        ['General Electric Company',            34.14, -0.08, -0.23, '9/1 12:00am'],
        ['General Motors Corporation',          30.27, 1.09,  3.74,  '9/1 12:00am'],
        ['Hewlett-Packard Co.',                 36.53, -0.03, -0.08, '9/1 12:00am'],
        ['Honeywell Intl Inc',                  38.77, 0.05,  0.13,  '9/1 12:00am'],
        ['Intel Corporation',                   19.88, 0.31,  1.58,  '9/1 12:00am'],
        ['International Business Machines',     81.41, 0.44,  0.54,  '9/1 12:00am'],
        ['Johnson & Johnson',                   64.72, 0.06,  0.09,  '9/1 12:00am'],
        ['JP Morgan & Chase & Co',              45.73, 0.07,  0.15,  '9/1 12:00am'],
        ['McDonald\'s Corporation',             36.76, 0.86,  2.40,  '9/1 12:00am'],
        ['Merck & Co., Inc.',                   40.96, 0.41,  1.01,  '9/1 12:00am'],
        ['Microsoft Corporation',               25.84, 0.14,  0.54,  '9/1 12:00am'],
        ['Pfizer Inc',                          27.96, 0.4,   1.45,  '9/1 12:00am'],
        ['The Coca-Cola Company',               45.07, 0.26,  0.58,  '9/1 12:00am'],
        ['The Home Depot, Inc.',                34.64, 0.35,  1.02,  '9/1 12:00am'],
        ['The Procter & Gamble Company',        61.91, 0.01,  0.02,  '9/1 12:00am'],
        ['United Technologies Corporation',     63.26, 0.55,  0.88,  '9/1 12:00am'],
        ['Verizon Communications',              35.57, 0.39,  1.11,  '9/1 12:00am'],
        ['Wal-Mart Stores, Inc.',               45.45, 0.73,  1.63,  '9/1 12:00am']
    ];

    /**
     * Custom function used for column renderer
     * @param {Object} val
     */
    function change(val) {
        if (val > 0) {
            return '<span style="color:green;">' + val + '</span>';
        } else if (val < 0) {
            return '<span style="color:red;">' + val + '</span>';
        }
        return val;
    }

    /**
     * Custom function used for column renderer
     * @param {Object} val
     */
    function pctChange(val) {
        if (val > 0) {
            return '<span style="color:green;">' + val + '%</span>';
        } else if (val < 0) {
            return '<span style="color:red;">' + val + '%</span>';
        }
        return val;
    }

    // create the data store
    var store = new Ext.data.ArrayStore({
        fields: [
            {name: 'company'},
            {name: 'price',      type: 'float'},
            {name: 'change',     type: 'float'},
            {name: 'pctChange',  type: 'float'},
            {name: 'lastChange', type: 'date', dateFormat: 'n/j h:ia'}
        ]
    });

    // manually load local data
    store.loadData(myData);

    // create the Grid
    var grid = new Ext.grid.GridPanel({
        store: store,
        columns: [
            {
                id       :'company',
                header   : 'Company',
                width    : 160,
                sortable : true,
                dataIndex: 'company'
            },
            {
                header   : 'Price',
                width    : 75,
                sortable : true,
                renderer : 'usMoney',
                dataIndex: 'price'
            },
            {
                header   : 'Change',
                width    : 75,
                sortable : true,
                renderer : change,
                dataIndex: 'change'
            },
            {
                header   : '% Change',
                width    : 75,
                sortable : true,
                renderer : pctChange,
                dataIndex: 'pctChange'
            },
            {
                header   : 'Last Updated',
                width    : 85,
                sortable : true,
                renderer : Ext.util.Format.dateRenderer('m/d/Y'),
                dataIndex: 'lastChange'
            },
            {
                xtype: 'actioncolumn',
                width: 50,
                items: [{
                    icon   : '../shared/icons/fam/delete.gif',  // Use a URL in the icon config
                    tooltip: 'Sell stock',
                    handler: function(grid, rowIndex, colIndex) {
                        var rec = store.getAt(rowIndex);
                        alert("Sell " + rec.get('company'));
                    }
                }, {
                    getClass: function(v, meta, rec) {          // Or return a class from a function
                        if (rec.get('change') < 0) {
                            this.items[1].tooltip = 'Do not buy!';
                            return 'alert-col';
                        } else {
                            this.items[1].tooltip = 'Buy stock';
                            return 'buy-col';
                        }
                    },
                    handler: function(grid, rowIndex, colIndex) {
                        var rec = store.getAt(rowIndex);
                        alert("Buy " + rec.get('company'));
                    }
                }]
            }
        ],
        stripeRows: true,
        autoExpandColumn: 'company',
        height: 350,
        forceFit:true,
        title: 'Array Grid',
        // config options for stateful behavior
        stateful: true,
        stateId: 'grid'
    });

    var grid1 = new Ext.grid.GridPanel({
        store: store,
        columns: [
            {
                id       :'company',
                header   : 'Company',
                width    : 160,
                sortable : true,
                dataIndex: 'company'
            },
            {
                header   : 'Price',
                width    : 75,
                sortable : true,
                renderer : 'usMoney',
                dataIndex: 'price'
            },
            {
                header   : 'Change',
                width    : 75,
                sortable : true,
                renderer : change,
                dataIndex: 'change'
            },
            {
                header   : '% Change',
                width    : 75,
                sortable : true,
                renderer : pctChange,
                dataIndex: 'pctChange'
            },
            {
                header   : 'Last Updated',
                width    : 85,
                sortable : true,
                renderer : Ext.util.Format.dateRenderer('m/d/Y'),
                dataIndex: 'lastChange'
            },
            {
                xtype: 'actioncolumn',
                width: 50,
                items: [{
                    icon   : '../shared/icons/fam/delete.gif',  // Use a URL in the icon config
                    tooltip: 'Sell stock',
                    handler: function(grid, rowIndex, colIndex) {
                        var rec = store.getAt(rowIndex);
                        alert("Sell " + rec.get('company'));
                    }
                }, {
                    getClass: function(v, meta, rec) {          // Or return a class from a function
                        if (rec.get('change') < 0) {
                            this.items[1].tooltip = 'Do not buy!';
                            return 'alert-col';
                        } else {
                            this.items[1].tooltip = 'Buy stock';
                            return 'buy-col';
                        }
                    },
                    handler: function(grid, rowIndex, colIndex) {
                        var rec = store.getAt(rowIndex);
                        alert("Buy " + rec.get('company'));
                    }
                }]
            }
        ],
        stripeRows: true,
        autoExpandColumn: 'company',
        height: 350,
        title: 'Array Grid',
        // config options for stateful behavior
        stateful: true,
        forceFit:true,

        stateId: 'grid'
    });

    var viewP = new Ext.Viewport({
        autoScroll:true,
        items : [grid,grid1]
    });

}); 
```

# html - 查看源代码在 cognos 中不显示 html 源代码

> ID：13368619
> 
> 赞同：0
> 
> 时间：2012-11-13T20:55:20.873
> 
> 标签：html, cognos, view-source

在 Cognos 查看器中，当报表以 html 格式呈现时，在 IE 中，它看起来像任何 html 页面。但是当我做一个“查看源代码”时，为什么我在视图源代码中看不到 html？有没有办法打开它？

# javascript - 隐藏IE中的选择框？

> ID：13368626
> 
> 赞同：-2
> 
> 时间：2012-11-13T20:56:00.907
> 
> 标签：javascript, internet-explorer

我正在尝试使用 JavaScript 隐藏下拉菜单。以下代码我已经在 Firefox 和 Chrome 中工作，但在 IE 8 中测试它不起作用。

```
<select name="month" id="month" onchange="monthselector_changed(this)">
  <option  value="1">
        Jan</option>
  <option  value="2">
        Feb</option>
  <option  value="3">
        Mar</option>
  <option  value="4">
        Apr</option>
  <option  value="5">
        May</option>
  <option  value="6">
        Jun</option>
  <option  value="7">
        Jul</option>
  <option  value="8">
        Aug</option>
  <option  value="9">
        Sep</option>
  <option  value="10">
        Oct</option>
  <option selected value="11">
        Nov</option>
  <option  value="12">
        Dec</option>
  </select> 
```

然后我使用以下代码隐藏它

```
document.getElementById("month").style.display = 'none'; 
```

只是为了澄清，我试图隐藏整个选择框而不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:58:40.570

`$`在 ID 字段中无效，因此这可能会弄乱 IE，而其他浏览器对规则更加“放松”。

有关详细信息，请参阅此线程： [DOM ID 中允许使用哪些字符？](https://stackoverflow.com/questions/1077084/what-characters-are-allowed-in-dom-ids)

编辑：我看到你正在传递`this`一个函数调用。您可以使用`this`在没有 ID 的情况下进行切换。例如：

[http://jsbin.com/acisof/1/edit](http://jsbin.com/acisof/1/edit)

```
function monthselector_changed(elem)
{
    elem.style.display = 'none';
} 
```

# javascript - 如何在打开新窗口之前填充它？

> ID：13368630
> 
> 赞同：2
> 
> 时间：2012-11-13T20:56:09.867
> 
> 标签：javascript

目前，我写这样的代码 -

```
chatWindow = window.open("chatWindow.html", "Chat Window",
 resizable=0,width=700,height=600);

var currentUserElement = chatWindow.document.createElement("currentUserElement");
    currentUserElement.setAttribute("id", "currentUserElement");
    currentUserElement.setAttribute("value",currentUserName); 
```

但是，有没有一种方法可以在调用 window.open() 之前先执行 createElement() 部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:21:50.193

我看到如何仅在客户端上执行此操作的唯一方法是使用 blob。HTML：

```
<input type="text" id="textId"></input>
<button id="buttonId">Open new Window</button> 
```

和 JS：

```
var button = $("#buttonId");

button.click(function () {
  var text = $("#textId").val();
  var html = "<html>"
      html += "<head><title>Window: " + text + "</title></head>";
      html += "<body onLoad='javascript:alert(\"" + text + "\")'>";
      html += text
      html += "</body></html>";
  var blob = new Blob([html], {type: 'text/html'});
  window.open(window.URL.createObjectURL(blob));
});​ 
```

我创建了一个[jsfiddle](http://jsfiddle.net/67tKR/2/)来说明这种方法。如您所见，JS 也将被执行。有一篇关于 html5rocks 上的屏幕共享的有趣[文章使用了这种技术。](http://www.html5rocks.com/en/tutorials/streaming/screenshare/)

# security - 你如何确保在没有登录的情况下单次提交到 API

> ID：13368631
> 
> 赞同：1
> 
> 时间：2012-11-13T20:56:11.497
> 
> 标签：security, api, login

我们正在开发一种新的开源工具，使用户能够投票。无需登录。

现在面临的挑战是：我们如何确保每天只从特定机器调用 API 一次，而不需要用户登录？

我们认为这很容易被欺骗，但也许有一些我们没有想到的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:08:25.063

如果您不要求用户在您的网站/应用程序上注册，则没有完整的证明解决方案。由于您不需要他们注册/登录，因此您仅限于两种选择：IP 或 cookie 的唯一投票。

**IP地址**

通过将投票的 IP 地址存储在数据存储中，然后在下次投票来自同一个 IP 时引用该地址，易于实现。但是，许多 ISP（例如 AOL）可以为多个用户使用相同的 IP 地址（通过代理）。因此，您将阻止那些没有投票的人能够投票。

**曲奇饼**

这种方法将更加特定于客户，这意味着一旦他们从该机器投票，他们将无法再次投票。然而，这更不可靠，因为用户可以删除 cookie 并再次投票（或在没有 cookie 的同一台机器上打开不同的浏览器）。

简而言之，如果您不能强制用户注册并在您的系统中建立唯一性，您可以依赖上述任一解决方案，但它们不会很健壮，并且会有自己的局限性。

# css - 如何显示关闭图标活动状态

> ID：13368633
> 
> 赞同：0
> 
> 时间：2012-11-13T20:56:15.940
> 
> 标签：css, jquery-mobile

我有一个带有搜索图标的输入字段。当输入字段被按下/聚焦时，我希望在输入框上显示一个关闭图标，如下图所示

![非活动状态](../Images/c1f56c7235c60b20bc55be72536e95b3.png)

![活动状态](../Images/705a84ddb04a1a06c1a2c5deabb966ac.png)

[jsfiddle](http://jsfiddle.net/WUPpQ/3/)

```
<div id="search-controls">
   <input type="text" class="search-box in-acvtive" placeholder="e.g. restaurant name, cuisine" />
</div>

#search-controls {
    height: 68px;
    padding: 5px;
}

#search-controls input.ui-input-text {
    height: 26px;
    background: url('../img/search-icon.png') 99.5% center no-repeat;
    background-size: 16px 14px;
    border: 1px solid #999;
    -moz-border-radius: 2px;
    border-radius: 2px;
    -moz-box-shadow: inset 0px 5px 10px -5px #BBB;
    -webkit-box-shadow: inset 0px 5px 10px -5px #BBB;
    box-shadow: inset 0px 0px 5px 10px -5px #BBB;
    padding: 6px 5px 0 5px;
    margin: 0 0 5px 0;
    font-size: 15px;
    line-height: 15px;
}

#search-controls input.ui-input-text.ui-focus {
    border: 1px solid #9E0249;
    border-radius: 2px;
    -moz-border-radius: 2px;
    -webkit-border-radius: 2px;
    box-shadow: none;
    moz-box-shadow: none;
    -webkit-box-shadow: none;
    background: url('../img/search-active-icon.png') 100% center no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:10:17.333

尝试这样的事情 -[**演示**](http://jsfiddle.net/WUPpQ/6/)

***HTML***

```
<div id="header" class="search" data-role="header" data-position="fixed">
    <div id="search-controls">
        <input type="text" class="search-box" placeholder="e.g. restaurant name, cuisine" />
        <span> x </span>        
    </div><!-- /search-controls -->
</div>​ 
```

***CSS***

```
#search-controls span {
    display: none;
    position: absolute;
    top: 11px;
    right: 35px;
    height: 22px;
    width: 22px;
    background: #bbb;
    border-radius: 20px;
    color: #fff;
    font: 400 20px/22px 'Lucida Console', sans-serif;
    text-align: center;
    border: 1px solid #bbb;
    cursor: pointer;
}

#search-controls input.ui-input-text.ui-focus ~ span {
    display: block;
} 
```

# object - OBJECT 和 IFRAME 标记用于在同一域中嵌入 html 页面

> ID：13368657
> 
> 赞同：2
> 
> 时间：2012-11-13T20:57:43.053
> 
> 标签：object, iframe, tags, seo, integration

我在很多地方研究过这个问题，但我找不到明确的答案。详细的问题是：我想将同一域中的其他页面导入 IFRAME 或 OBJECT TAG。这是一个 html5 网站，但我希望 OBJECT 或 IFRAME 标签是可搜索的，并且不会与 SEO 混淆。我使用哪一个，为什么？哪一个更适合 IE 6？

基本上，（我承认这让我很痛苦）我想找到一种方法来让一个导航栏导入其中一个标签，这样我就不需要在每个页面上都更改它们。

这里有这个stackoverflow问题：[Use of iframe or Object tag to embed web pages in another](https://stackoverflow.com/questions/924946/use-of-iframe-or-object-tag-to-embed-web-pages-in-another)

但它更老了，似乎忽略了 html5

我试图避免：服务器端包含和 JavaScript 依赖

非常感谢您的帮助！

# python - 如何在python中遍历IP地址范围

> ID：13368659
> 
> 赞同：13
> 
> 时间：2012-11-13T20:57:54.253
> 
> 标签：python

如何在python中遍历IP地址范围？假设我想遍历从 192.168.1.1 到 192.168 的每个 IP。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-11-09T08:07:19.710

如果要循环通过网络，可以使用 ipaddress 模块定义网络。如 ipaddress.IPv4Network('192.168.1.0/24')

```
import ipaddress
for ip in ipaddress.IPv4Network('192.168.1.0/24'):
    print(ip) 
```

这将产生如下结果：

```
192.168.1.0
192.168.1.1
192.168.1.2
192.168.1.3
...
192.168.1.255 
```

但是，如果您想遍历一系列 ip，您可能需要在 ip 和整数之间进行转换。

```
>>> int(ipaddress.IPv4Address('10.0.0.1'))
167772161 
```

所以：

```
start_ip = ipaddress.IPv4Address('10.0.0.1')
end_ip = ipaddress.IPv4Address('10.0.0.5')
for ip_int in range(int(start_ip), int(end_ip)):
    print(ipaddress.IPv4Address(ip_int)) 
```

将产生如下结果：

```
10.0.0.1
10.0.0.2
10.0.0.3
10.0.0.4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T21:11:26.817

您可以使用[`itertools.product`](https://docs.python.org/2/library/itertools.html#itertools.product)：

```
for i,j in product(range(256),range(256)):
    print "192.168.{0}.{1}".format(i,j) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-13T20:59:14.200

你试过吗，你知道，循环`range`吗？

```
for i in range(256):
    for j in range(256):
        ip = "192.168.%d.%d" % (i, j)
        print ip 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-15T07:45:00.043

```
from netaddr import *
ip = IPNetwork('192.0.2.16/29')
>>> ip_list = list(ip)
>>> len(ip_list)
8
>>> ip_list
[IPAddress('192.0.2.16'), IPAddress('192.0.2.17'), ..., IPAddress('192.0.2.22'), IPAddress('192.0.2.23')] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-19T10:32:36.143

使用 netaddr 模块： [http ://netaddr.readthedocs.io/en/latest/api.html#netaddr.IPSet.iter_ipranges](http://netaddr.readthedocs.io/en/latest/api.html#netaddr.IPSet.iter_ipranges)

```
from netaddr import iter_iprange
generator = iter_iprange('192.168.1.1', '192.168.255.255', step=1)
generator.next() # 192.168.1.1
generator.next() # 192.168.1.2 
```

# pdf - 查看在浏览器中呈现的 pdf 的源代码？

> ID：13368660
> 
> 赞同：0
> 
> 时间：2012-11-13T20:58:02.573
> 
> 标签：pdf, cognos, view-source

我在 Cognos 中有一份报告。输出在浏览器本身内以 pdf 格式呈现。现在图像没有显示在 pdf 中。它们在 html 中显示得很好。现在，如果他们没有出现在 html 上，我会做一个查看源代码并检查图像 url 并从那里开始。但是当在浏览器中呈现 pdf 时，有没有办法做某种“查看源代码”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:38:07.773

正如评论中已经推荐的那样，使用像[RUPS](http://sourceforge.net/projects/itextrups/)（基于 iText）或任何其他的 PDF 浏览器。选择所需的页面，打开其 /Contents 值，选择流，您将看到类似这样的内容

```
/T1_0 1 Tf
0.0004 Tc -0.0002 Tw 13.98 0 0 13.98 189.87 476.67 Tm
(Praise for the First Edition)Tj
/T1_1 1 Tf
0.056 Tw 9.99 0 0 9.99 108.18 437.34 Tm
[(Each aspect is explained with numer)19(ous ex)]TJ 
```

要显示文本的位置。以 Tf 结尾的命令选择文本的字体，以 Tc 或 Tw 结尾的命令选择字符或字间距，以 Tm 结尾的命令操作文本矩阵，从而定位、旋转、拉伸等要打印的文本，以及那些以 Tj 或 TJ 结尾的实际上是打印文本。

或者你会看到这样的东西：

```
533.352005 0 0 668.2319946 -1.2660065 -1.0559998 cm
/Im0 Do 
```

要显示一些 XObject 的位置。以 cm 结尾的命令操作当前的变换矩阵（同样用于定位、旋转、拉伸等），以 Do 结尾的命令打印 XObject。

给定的 XObject 是什么，可以在页面的 /Resources 中的 /XObject 值中看到，例如：

![在此处输入图像描述](../Images/1cf2d4fa4a66afa6cd9590068fef1ecc.png)

所以 XObject 是一个图像（参见 /Subtype 的值）。

因此，在您的情况下

> 现在图像没有显示在 pdf 中。

您应该以同样的方式检查页面并搜索类似于上面摘录的内容。如果您没有找到引用的 XObject（也没有找到命令序列*BI ... 键值对 ... ID ... 图像数据 ...*内容流中的 EI；该序列定义了内联图像），则没有图像那个PDF页面。否则会有一个图像由于某种原因没有显示出来。

实际上还可以有许多其他命令，以及其他种类的 XObject。有关更多详细信息，请查看 PDF 规范 ISO 32000-1:2008（由 Adob​​e[在此处](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)提供），尤其是第 8 章和第 9 章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T02:58:17.913

...或在网上搜索确切的问题

[http://www-01.ibm.com/support/docview.wss?uid=swg21339267](http://www-01.ibm.com/support/docview.wss?uid=swg21339267)

虽然它没有解释为什么它适用于 HTML 和 PDF，但大多数搜索表明这是一个 Web 服务器安全问题，在您的图像文件夹中启用匿名身份验证可能会解决它。

# lotus-domino - 为什么通过 LotusScript 代理添加对象列表时出现“非法括号引用”错误？

> ID：13368661
> 
> 赞同：0
> 
> 时间：2012-11-13T20:58:04.360
> 
> 标签：lotus-domino, lotusscript

在给出“非法括号引用：项目”错误的代理中拥有这行 lotusscript 代码：

```
Set tempObligor.Facilities.items(Cstr(facilitydoc.requestnum(0))) = tempFacility 
```

Facilities.items 被定义为对象列表。

所以不明白为什么 Notes 8.5 设计器会抛出错误。

同样奇怪的是，这在 Notes 8.0.2 中没有问题。

构成对象的代码如下。

如果您有任何想法，请告诉我。

相信我可以通过使用遍历所有值以寻找匹配项的 FOR 循环来解决问题……但不知道为什么会发生错误让我感到困扰……

```
Dim tempObligor As Obligor 

'This line errs out - does not like () after .items 
Set tempObligor.Facilities.items(Cstr(facilitydoc.requestnum(0))) = tempFacility 

Class Obligor As CollectableObject 
        Public Facilities As SortableList         
End Class 

Class CollectableObject 
        ' STUB 
End Class 

Class SortableList 

        Public items List As CollectableObject 

        Private Sub Sort() 
                Dim uboundarray As Integer 
                Dim nextTag As String 
                Dim x As Integer 
                Dim sortedArray As Variant 

                Dim ArrayToSort() As Variant 

                uboundArray = 0 

                Forall elem In items 

                        NextTag = Listtag(elem) 
                        Redim Preserve ArrayToSort(uboundArray) 
                        ArrayToSort(uboundArray) = NextTag 

                        uboundArray = uboundArray + 1 
                End Forall 

                SortedArray = SortArray(ArrayToSort) 

                Dim TempList List As CollectableObject 
                For x = 0 To Ubound(SortedArray) 
                        Set TempList(SortedArray(x)) = items(SortedArray(x)) 
                Next 

                Erase items 

                Forall elem In TempList 
                        Set items(Listtag(elem)) = TempList(Listtag(elem)) 
                End Forall 

                Erase TempList 

        End Sub 

        Function SortArray(ArrayToSort) As Variant 
                Dim NumberOfElements As Integer 
                Dim temp As String 
                Dim x As Integer 
                Dim y As Integer 

                NumberOfElements = Ubound(ArrayToSort) 
                If NumberOfElements% = 0 Then 
                        SortArray = ArrayToSort 
                        Exit Function 
                End If 

                For x = 0 To (NumberOfElements) 
                        For y = 0 To ( NumberOfElements - x - 1) 

                                If Ucase$(ArrayToSort(y)) > Ucase$(ArrayToSort(y+1)) Then 

                                        temp = ArrayToSort(y) 
                                        ArrayToSort(y) = ArrayToSort(y+1) 
                                        ArrayToSort(y+1) = temp$ 

                                End If 

                        Next y 
                Next x 

                SortArray = ArrayToSort 

        End Function         

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:22:02.473

我将您的代码粘贴到 ScriptLibrary 中。起初我得到了同样的错误。然后我注意到类Obligor的类定义中还有另一个类型为“引用出现在声明之前”的错误。您的类 Obligor 是 CollectableObject 类型。Domino Designer 似乎在定义 CollectableObject 之前就对其进行了引用这一事实存在问题。因此，您应该将类​​ Obligor 放在该类定义之后，然后您的代码应该可以工作（尽管我必须在 initilize 中移动前两行）。

# amazon-ec2 - 通过浏览器连接到 Amazon (AWS) EC2 实例

> ID：13368662
> 
> 赞同：25
> 
> 时间：2012-11-13T20:58:10.137
> 
> 标签：amazon-ec2, amazon-web-services

我无法通过浏览器连接到 Amazon Elastic Cloud 计算机实例。我试图去***** ** *** ****** .compute-1.amazonaws.com ，但浏览器返回连接已超时。

我可以通过 ssh 和 winscp 连接。这就是我上传开发人员的网络应用程序的方式。我还创建了一个安全组并添加了打开端口 22 和 80 的规则。

我是否必须以某种方式将安全组分配给实例？

安全组的规则也没有源 IP，它们是 0.0.0.0/0

我非常感谢通过浏览器让这个网站“可见”的任何和所有帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T21:30:09.720

默认情况下，您的实例将仅在`default`安全组中。如果它是 EC2 实例，则您无法在实例运行时更改安全组，您必须提前指定它们。如果是 VPC 实例，您可以在运行时更改安全组。

# 将规则添加到`default`组

但是，您可以添加规则以允许端口 80 进入该`default`安全组；只是不要创建新的安全组，因为它不能与正在运行的实例关联。

# 网络服务器启动了吗？

此外，请确保您的 Web 服务器已启动并正在运行。从您的实例（使用 SSH shell 访问）中，使用命令检查正确的进程是否正在侦听端口 80 `netstat -lnp`。然后，您应该会看到一行以`proto` `tcp`: `Local Address`80 结尾。列出的 IP 地址应该是 0.0.0.0（意思是“任何 IP”）或侦听网络接口的特定 IP。

# 网络服务器未启动

如果您需要 Web 服务器，请查看 Apache 或 Nginx。它们都支持 PHP。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-22T19:45:54.613

我也遇到了与 ec2 微实例类似的问题。我使用的是红帽 AMI。尽管在安全组中打开了 8081 端口，但我无法远程登录到主机端口。禁用 iptable 对我有用：

```
sudo /etc/init.d/iptables stop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-13T14:24:32.837

如果您使用 Windows 作为服务器，请不要忘记禁用防火墙。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-26T18:15:34.947

我在 AWS 上设置 redash AMI 映像时遇到了同样的问题。当实例未运行时，应更改入站安全规则。假设实例是否正在运行（意味着它处于活动状态并已启动）；如果您更改该机器的入站规则，您仍然会面临防火墙问题。所以停止您要更改入站规则的机器。更改入站规则。现在启动机器。现在，您可以从刚刚打开对机器的访问权限的 ip 访问机器 url。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-10T20:39:52.820

EC2 实例防火墙可能已启用。用这个命令检查它：

```
sudo systemctl status firewalld 
```

如果启用，您可以使用以下命令禁用它：

```
sudo systemctl disable firewalld 
```

或设置规则以允许端口 80 流量

# php - PHP-CLI 中按 Ctrl+C 退出时的析构函数和关闭函数

> ID：13368663
> 
> 赞同：22
> 
> 时间：2012-11-13T20:58:12.490
> 
> 标签：php

如果我使用`Ctrl`+`C`退出在 CLI 中运行的 PHP 脚本，则不会处理关闭函数、实例化对象的析构函数，也不会处理任何输出缓冲区。相反，程序就死了。现在，这可能是一件好事，因为这就是`Ctrl`+`C`应该做的。但是有什么办法可以改变吗？是否可以强制`Ctrl`+`C`通过关机功能？

更具体地说，这是关于在脚本退出时序列化和保存数据，以便下次脚本运行时可以重新加载和恢复。定期保存数据可能会起作用，但从上次保存后仍然会丢失所有内容。还有哪些其他选择？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T22:31:54.860

显然 PCNTL 只是 *nix，但是......您可以为所有单独的信号注册处理程序以获得更强大的解决方案，但特别是在遇到 CTL+C 中断时执行某些操作：

```
<?php
declare(ticks = 1);

pcntl_signal(SIGINT, function() {
    echo "Caught SIGINT\n";
    die;
});

while (true) {
    // waiting for your CTRL+C
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T22:30:54.213

看看[PCNTL](http://www.php.net/manual/en/book.pcntl.php)尤其是[pcntl_signal()](http://php.net/manual/en/function.pcntl-signal.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-10T04:29:51.653

我与[@rdlowrey 的答案](https://stackoverflow.com/a/13370031/2432317)形成对比，我会避免使用普通函数`while(true)`以及函数`die/exit`中的`pcntl_signal`函数，因为它不允许在循环被用户中断后处理事情。

相反，我想建议以下更合乎逻辑的解决方案：

```
declare(ticks = 1);

$running = true;

pcntl_signal(SIGINT, function() {
    global $running;
    $running = false;
});

while($running)
{
    echo('running…'.PHP_EOL);
}

echo(PHP_EOL.'User interrupted the loop. Shutting down cleanly.'.PHP_EOL);
exit(); 
```

# python - ArcGIS 10.1 和 Python 加载项

> ID：13368665
> 
> 赞同：2
> 
> 时间：2012-11-13T20:58:19.443
> 
> 标签：python, windows, matplotlib, arcgis

我最近在 64 位机器上安装了 ArcGIS 10.1。它运行得很好，并且自动安装了 Python 2.7 也很好。我现在尝试安装 64 位版本的 matplotlib 并收到以下错误：在注册表中找不到 Python 2.7。但是，它位于 wow6432 节点下的注册表中。安装 64 位 Python 2.7 解决了这个问题，但是与 ArcGIS 的集成不再存在。有没有人遇到过这个问题并知道如何解决？您的帮助将不胜感激。谢谢，凯特

# jquery - 滑块不显示/工作

> ID：13368678
> 
> 赞同：0
> 
> 时间：2012-11-13T20:59:12.470
> 
> 标签：jquery, html, css, jquery-ui

[http://jsfiddle.net/adamadam123/L3Mab/18/](http://jsfiddle.net/adamadam123/L3Mab/18/)

我正在尝试让 Jquery UI Slider 工作 - 您可以在 jsfiddle.net 中查看代码

我可以让滑块出现，但是当我进行更改以更新进行滑动的图标（蓝色按钮）时，它会失败：

```
div.chatMessengerWrapper .ui-slider-vertical .ui-slider-handle {
background: url(http://www.staticimages.co/online-dating/chat-contacts-slider-button.png) no-repeat;
height: 36px;
border: none;
width: 16px; 
```

}

希望有人可以为我看看并调整它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:40:21.817

我对您的小提琴进行了以下两项更改，它对我有用，至少在 Chrome 和 FF 15 下：

1.  在 JQuery UI CSS 中添加（在小提琴中从 CDN 管理资源下）。

2.  只是一个装饰性的东西：当单击滑块时，JQuery UI CSS 正在为滑块句柄添加一个轮廓。

我添加了以下代码

```
 div.chatMessengerWrapper a:focus {
      outline: none;
  } 
```

到 CSS 将其删除。

在这里小提琴：http: [//jsfiddle.net/mccannf/BL5rM/5/](http://jsfiddle.net/mccannf/BL5rM/5/)

# javascript - 在车把中重用模板

> ID：13368684
> 
> 赞同：8
> 
> 时间：2012-11-13T20:59:41.620
> 
> 标签：javascript, template-engine

我是 JS 模板和 Handlebars 的新手，我有一个嵌套的 JSON 结构，通常每个父节点都是一个新对象/具有不同的结构，所以递归不是我认为的解决方案。

我的问题是是否可以从 Handlebars 中的模板调用另一个模板？

我的背景是 XSLT

例子：

```
<script id="entry-template" type="text/x-handlebars-template">
  <div>{{name}}</div>
  .. call template-2
</script>

<script id="template-2" type="text/x-handlebars-template">
  <div>{{name2}}</div>
   .. call template-3
</script>

<script id="template-3" type="text/x-handlebars-template">
  <div>{{name3}}</div>
</script> 
```

.. 等等

有人有什么建议吗？

最好的问候，鲍勃

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-26T19:07:38.513

使用 partials 应该很容易，这里有一个[很好的教程](http://blog.teamtreehouse.com/handlebars-js-part-2-partials-and-helpers)。

本质上，尽管您只需要定义部分

```
 Handlebars.registerPartial("template-2", $("#template-2").html()); 
```

然后利用它

```
<script id="entry-template" type="text/x-handlebars-template">
  <div>{{name}}</div>
  {{> template-2}}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T13:58:26.440

我在部分视频上创建了一个 youtube 视频，解释了这一点：https: [//www.youtube.com/embed/02J5A3r-Bdk](https://www.youtube.com/embed/02J5A3r-Bdk)。该视频详细解释了在车把中创建部分，以及长期存在的一些问题和问题，以及何时*最好地*使用它们以及何时服务器端包含可能会更好。

# java - 如何将转储添加到 MySQL Workbench

> ID：13368685
> 
> 赞同：0
> 
> 时间：2012-11-13T20:59:41.113
> 
> 标签：java, mysql, mysql-workbench

我让我的朋友提供 MySQL 的转储，他给了这 3 个带有 name 的文件`xxx.frm, yyy.MYD and zzz.MYI`。我关心的是如何将这些添加到我的 MySQL 工作台中。

我的笔记本电脑中有 MySql 并在管理员中打开它显示导入转储。我做到了，但它显示错误失败，退出代码为 1。

我是 SQL 的新手。帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:06:40.870

索要 .sql 文件。然后在mysql中导入这个。

您可以在此处阅读如何导入 .sql 文件的说明

[http://www.ehow.com/how_8607107_import-sql-mysql.html](http://www.ehow.com/how_8607107_import-sql-mysql.html)

# c - 如果程序在 n=10 的情况下在 2 秒内执行，那么执行 n=100 需要多少时间？

> ID：13368690
> 
> 赞同：1
> 
> 时间：2012-11-13T21:00:03.033
> 
> 标签：c, algorithm

如果一个程序在 n=10 的情况下在 2 秒内执行，那么执行 n=100 的复杂度为 n * log(n) 需要多少时间？我想了想，我认为可能是 4 秒，但我该如何证明呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:07:17.607

假设所花费的时间与 n*log(n) 完全成正比，而不仅仅是一个上限（参见[http://en.wikipedia.org/wiki/Big_O_notation#Family_of_Bachmann.E2.80.93Landau_notations](http://en.wikipedia.org/wiki/Big_O_notation#Family_of_Bachmann.E2.80.93Landau_notations)），您将拥有：

```
executionTime = (constant) * n * log(n) 
```

代入 n=10 并求解常数。现在你有一个每个 n 处的执行时间的表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T21:09:53.607

好吧，考虑以下几点：

线性情况下 2 秒内完成 10 次操作，即：O(n)，所以`n`操作，即 10 次操作：

```
==> 10 * k = 2s
==> k = 0.2 (seconds per operation) 
```

由于 O(n*log(n)) 的复杂性（即：Big-Oh），您将有这么多操作：

```
==> n * log(n)
==> 100 * log(100)
==> 100 * 2 = 200 
```

现在，使用 0.2 秒/操作，对于 200 次操作，使用复杂度为 O(n*log(n)) 的算法，我们得到：

```
==> T = 0.2s/operation * 200 operations = 40 seconds 
```

这是一个相当不错的结果。在线性情况下，（即：O（n））节省并没有那么好，即：

```
==> T = 0.2s/operation * 100 operations = 20 seconds 
```

如果这是 O(n^2)，那将是可怕的：

```
==> T = 0.2s/operation * (100^2) = 0.2*10,000 = 2000 seconds 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:06:49.247

对于 n=10，最坏情况下的程序需要 10*log(10) = 10 次操作。

那么对于 n=100，它需要 100*log(100) = 200 次操作。

```
10 operations  --> 2 seconds
200 operations --> X seconds

X = 40 second. 
```

# ibm-mq - 从 Websphere-MQ 调用 .EXE

> ID：13368691
> 
> 赞同：3
> 
> 时间：2012-11-13T21:00:10.830
> 
> 标签：ibm-mq

[这是基于MQ (Websphere 7) 将消息持久化到文件系统](https://stackoverflow.com/questions/13293522/mq-websphere-7-persist-message-to-file-system)的后续。

您如何设置 MQ 支持包（例如 MA01 中的 Q 实用程序）中的 .exe 程序以在每次收到消息时执行？这可以在 MQ Explorer 中设置吗？（我们在 Windows 2008/R2 上使用 7.0）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:23:39.687

有几种方法可以做到这一点。

1.  在 Windows 控制下设置应用程序（因为您提到 QMgr 在 Windows 上。）该应用程序将作为服务运行，如果服务失败，可以使用恢复选项重新启动它。应用程序将被编程（或在 Q 的情况下配置）以使用具有非常长的等待期的 GET 来处理队列。当 QMgr 不可用时，需要一些额外的错误处理来做一些明智的事情。这非常适合将消息复制到多个队列，但不适用于队列到文件，因为文件永远不会关闭。
2.  将应用程序作为 WebSphere MQ 服务运行。定义`SERVICE`对象 using`CONTRIL(QMGR)`会导致 MQ 在 QMgr 启动时启动服务，并在 QMgr 关闭时停止它。由于该服务是 QMgr 的子进程，因此无需担心当 QMgr 不可用时如何处理错误。
3.  基于非零队列深度触发程序。定义一个描述要执行的命令的进程对象，启用对队列`TRIGTYPE(FIRST)`的触发并运行一个触发器监视器。只要队列的深度 > 0 且没有打开的输入句柄，进程对象就会触发并执行命令。你开始的东西必须知道如何解析命令行，所以如果你有其他人的可执行文件，最简单的事情就是使用脚本来启动它。该脚本解析触发消息并触发可执行文件。或者脚本可能会忽略触发消息而只运行 exe。我通常使用 Korn Shell 或 Perl，两者都可以在 Windows 上使用。

我写了一篇文章，展示了如何使用 Q 的触发版本来防止事件队列被填充。文章假设您希望队列保持大部分已满，因此使用大约 80% 的深度触发。当队列深度变为非零时，可以使用相同的技术（顺便说一下，在更简单的实现中）启动 Q 程序。

**更新**
可能应该链接文章。;-)
[任务：消息传递：使用循环队列简化管理和调试](http://www.ibm.com/developerworks/websphere/techjournal/1103_mismes/1103_mismes.html)

# .net - 如何在不使用 .net 反射的情况下将 LINQ 结果（作为 IEnumerable）正确转换为分隔列表？

> ID：13368694
> 
> 赞同：2
> 
> 时间：2012-11-13T21:00:14.070
> 
> 标签：.net, vb.net, linq, ienumerable, anonymous-types

首先，如果我对这个有点不理解，请原谅，因为我对 .net、匿名类型和 LINQ 有点陌生。坦率地说，我有点挣扎，并计划在下个月就该主题进行大量学习。我知道的足够多，知道我想出的方法不是正确的。

我得到了一个项目来创建各种分隔输出格式，这些格式源自已经存在了一段时间的标准报告提要。为此已经有一个框架，我只是添加更多格式和一些新的输出机制。（下面的一些细节可能无关紧要，但为了清楚起见，我将包括在内。）

来自数据层的查询返回一个 LLBLGEN TypedList。然后应用 LINQ 查询来创建各种提要输出格式，从而生成 IEnumerable 匿名对象。作为我项目的一部分，我将获取该对象并将其输出为逗号分隔的文件。

通过查看下面的示例和其他一些示例，我已经能够将一个工作功能组合在一起，但我确信这绝不是完成任务的正确方法（使用反射等）。也就是说，“正确的方式”让我望而却步！即使是指向正确方向的指针也会很有帮助。

[在 C# 中将匿名类型转换为键/值数组？](https://stackoverflow.com/questions/3481923/in-c-sharp-convert-anonymous-type-into-key-value-array)

[C# 中值是匿名类型的字典](https://stackoverflow.com/questions/1619518/a-dictionary-where-value-is-an-anonymous-type-in-c-sharp)

```
Private Sub SendExport(feed As IEnumerable, filename As String)

    Dim delimited As New StringBuilder

    Dim type = feed(0).GetType
    Dim props = type.GetProperties
    delimited.AppendLine(String.Join(",", props.Select(Function(p) p.Name).ToList))

    For Each item In feed
        Dim itemType = item.GetType
        Dim typeProps = itemType.GetProperties
        delimited.AppendLine(String.Join(",", typeProps.Select(Function(p) p.GetValue(item)).ToList))
    Next

    Debug.WriteLine(delimited.ToString)

    Response.Clear()

    Response.AddHeader("Cache-Control", "must-revalidate")
    Response.AddHeader("Pragma", "must-revalidate")
    Response.AddHeader("Content-type", "application/vnd.ms-excel")
    Response.AddHeader("Content-disposition", String.Format("attachment; filename={0}.csv", filename))
    Response.Write(delimited.ToString)
    Response.End()

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:12:15.760

我不是 VB 专家，但我认为您可以将以下几行从循环中删除：

```
Dim itemType = item.GetType
Dim typeProps = itemType.GetProperties 
```

只需再次重用`props`列表：

```
For Each item In feed
    delimited.AppendLine(String.Join(",", props.Select(Function(p) p.GetValue(item)).ToList))
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:39:20.110

这个问题很老了，但为了可能帮助下一个人，我认为我会提供我最终在自己的学习和研究中得到的答案。

简而言之，蒂姆·施梅尔特在对我最初要求的评论中说得对：

> 您不应将匿名类型传递到方法范围之外，直接使用它或从一开始就使用另一种类型。

从设计的角度来看，我试图完成的工作基本上是不正确的，并且基本上是对匿名类型的滥用。就我而言，正确的“答案”是简单地重构报告层以全面使用强类型类。LINQ 查询直接填充类，等等。这是一个相对较小的工作，最终使事情变得更干净。

# r - 在 R 中使用子集时如何忽略大小写

> ID：13368695
> 
> 赞同：4
> 
> 时间：2012-11-13T21:00:15.950
> 
> 标签：r, subset

在 R 中使用子集函数时如何忽略大小写？

```
eos91corr.data <- subset(test.data,select=c(c(X,Y,Z,W,T))) 
```

我想选择名称为 x、y、z、w、t 的列。我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T22:09:36.600

如果您可以在没有该`subset()`功能的情况下生活，则该`tolower()`功能可能会起作用：

```
dat <- data.frame(XY = 1:5, x = 1:5, mm = 1:5,
    y = 1:5, z = 1:5, w = 1:5, t = 1:5, r = 1:5)
dat[,tolower(names(dat)) %in% c("xy","x")] 
```

但是，这将`data.frame`按照列在原始数据集中的顺序返回 a `dat`：两者

```
dat[,tolower(names(dat)) %in% c("xy","x")] 
```

和

```
dat[,tolower(names(dat)) %in% c("x","xy")] 
```

将产生相同的结果，尽管目标名称的顺序已颠倒。

如果您希望结果中的列按目标向量的顺序排列，则需要稍微花哨一些。以下两个命令都`data.frame`以目标向量的顺序返回 a 列（即，结果将不同，列切换）：

```
dat[,sapply(c("x","xy"),FUN=function(foo)which(foo==tolower(names(dat))))]
dat[,sapply(c("xy","x"),FUN=function(foo)which(foo==tolower(names(dat))))] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:18:46.643

`grep`在识别要选择的列名时，您可以使用正则表达式和函数来忽略大小写。一旦您确定了所需的列名，您就可以将它们传递给`subset`.

如果您的数据是

```
dat <- data.frame(xy = 1:5, x = 1:5, mm = 1:5, y = 1:5, z = 1:5,
  w = 1:5, t = 1:5, r = 1:5)
#   xy x mm y z w t r
# 1  1 1  1 1 1 1 1 1
# 2  2 2  2 2 2 2 2 2
# 3  3 3  3 3 3 3 3 3
# 4  4 4  4 4 4 4 4 4
# 5  5 5  5 5 5 5 5 5 
```

然后

```
(selNames <- grep("^[XYZWT]$", names(dat), ignore.case = TRUE, value = TRUE))
# [1] "x" "y" "z" "w" "t"

subset(dat, select = selNames)
#   x y z w t
# 1 1 1 1 1 1
# 2 2 2 2 2 2
# 3 3 3 3 3 3
# 4 4 4 4 4 4
# 5 5 5 5 5 5 
```

* * *

**编辑**如果您的列名长于一个字母，则上述方法效果不佳。因此，假设您可以在向量中获得所需的列名，您可以使用以下内容：

```
upperNames <- c("XY", "Y", "Z", "W", "T")

(grepPattern <- paste0("^", upperNames, "$", collapse = "|"))
# [1] "^XY$|^Y$|^Z$|^W$|^T$"
(selNames2 <- grep(grepPattern, names(dat), ignore.case = TRUE, value = TRUE))
# [1] "xy" "y"  "z"  "w"  "t" 
subset(dat, select = selNames2)
#   xy y z w t
# 1  1 1 1 1 1
# 2  2 2 2 2 2
# 3  3 3 3 3 3
# 4  4 4 4 4 4
# 5  5 5 5 5 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T23:32:32.707

'stringr' 库是所有这些功能的一个非常简洁的包装器。它有 'ignore.case' 选项，如下所示：

```
 also, you may want to consider using match not subset. 
```

# python - 继续在 python 中创建可能的字符串列表

> ID：13368697
> 
> 赞同：1
> 
> 时间：2012-11-13T21:00:19.490
> 
> 标签：python, string, itertools

> **可能的重复：**
> [使用 itertools.product 并希望播种一个值](https://stackoverflow.com/questions/9864809/using-itertools-product-and-want-to-seed-a-value)

我有这段代码，它生成一致的字符串列表。

```
import itertools
choices = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789"
for length in range(0,20):
    for entry in itertools.product(choices, repeat = length):
        string = ''.join(entry)
        print string 
```

我希望能够从最后一个已知字符串继续运行此脚本。这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:13:09.653

```
import itertools
def choices():
    choices = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789"
    for length in range(0,20):
        for entry in itertools.product(choices, repeat = length):
            string = ''.join(entry)
            yield string

choice_seq = choices()
print next(choice_seq)
print next(choice_seq) 
```

生成器的意义在于它们随身携带状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:14:32.153

假设您将变量`string`设置为最后一个已知字符串（或`''`从头开始）：

```
import itertools
choices = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789"
for length in range(len(string), 20):
    itr = itertools.product(choices, repeat = length)
    if string != '' and length == len(string):
        itr = itertools.dropwhile(tuple(string).__ne__, itr)
    for entry in itr:
        string = ''.join(entry)
        print string 
```

请注意，这将打印的第一个元素是最后一个已知字符串。如果您想跳过最后一个已知字符串并从打印下一个字符串开始，您可以`next(itr)`在 if 语句中执行。

这假设您正在尝试从中断的位置继续执行脚本的多次执行，或者生成器解决方案不适用的其他场景。如果你可以使用发电机，你应该。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:55:44.507

您的“保存状态”只是当前长度，以及`itertools.product`. 这两种东西都可以腌制。所以，这里有一些伪代码：

```
import itertools
import pickle

choices = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789"

def tryWithStateSave(currentlength, currentproduct):
    try:
        for entry in currentproduct:
            string = ''.join(entry)
            print string
    except KeyboardInterrupt:
        pickle.dump((currentlength, currentproduct), <saved state file>)
        raise

if <a saved state file exists>:
    currentlength, currentproduct = pickle.load(<the saved state file>)
    tryWithStateSave(currentlength, currentproduct)
    currentlength += 1
else:
    currentlength = 0

for length in range(currentlength+1,20):
    tryWithStateSave(length, itertools.product(choices, repeat = length)) 
```

# mysql - SQL 错误 - 引用的表中没有主键或候选键

> ID：13368701
> 
> 赞同：1
> 
> 时间：2012-11-13T21:00:52.033
> 
> 标签：mysql

首先，我创建了一个 CourseSections 表，如下所示：

```
Create Table CourseSections(
 CourseNo    Integer NOT NULL CHECK(CourseNo BETWEEN 100 AND 999),
 SectionNo   Integer NOT NULL,
 InstructorNo Integer NOT NULL,
 Year        Integer NOT NULL,
 Semester    Integer NOT NULL,
 FOREIGN KEY(CourseNo) REFERENCES Courses(CourseNo),
 PRIMARY KEY(SectionNo, Year, Semester)
); 
```

然后我创建了另一个表，该表具有引用表 CourseSections 键的外键：

```
 Create Table Enrollments(
     CourseNo     Integer NOT NULL CHECK(CourseNo BETWEEN 100 AND 999),
     Semester     Integer NOT NULL,
     Year         Integer NOT NULL,
     SectionNo    Integer NOT NULL,
     FOREIGN KEY(CourseNo) REFERENCES Courses(CourseNo),
     FOREIGN KEY(Year) REFERENCES CourseSections(Year),
     FOREIGN KEY(Semester) REFERENCES CourseSections(Semester),
     FOREIGN KEY(SectionNo) REFERENCES CourseSections(SectionNo) 
```

);

然后我收到一条错误消息说

```
 There are no primary or candidate keys in the referenced table 'CourseSections'   
    that match the referencing column list in the foreign key 
    FK__Enrollment__Year__3890146B'. 
```

除了引用表 CourseSections 的外键之外，其余的外键都很好。谁能告诉我问题出在哪里？非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:10:27.647

```
FOREIGN KEY(SectionNo) REFERENCES CourseSections(SectionNo) 
```

应该可以工作，但其他外键不会，因为它们实际上没有索引；它们是综合指数的较低部分。复合索引仅按照创建方式的顺序用于列。您需要在 CourseSections.Year 和 CourseSections.Semester 上创建唯一索引，或者更有可能创建一个像这样的单个复合外键：

```
FOREIGN KEY(SectionNo, Year, Semester) REFERENCES CourseSections(SectionNo, Year, Semester) 
```

# javascript - 脚本有时会延迟页面加载，我该如何测试/解决？

> ID：13368702
> 
> 赞同：0
> 
> 时间：2012-11-13T21:00:53.833
> 
> 标签：javascript, jquery

我有一个网站，有时加载速度很快，但有时页面似乎在中途停止加载，可能是由于脚本。

该网站是[http://www.pinspired.com](http://www.pinspired.com) - 右侧的标签式侧边栏是问题所在。我在标签中使用了一个简单的 jquery 选项卡插件和 twitter 和 facebook 脚本。

1.  首先，您的页面加载速度是否很快？

2.  如何找出哪个脚本正在停止页面加载的其余部分。很难测试，因为它只是偶尔发生。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:44:01.377

我刚刚运行了开发工具，看起来 jquery.carousel 插件是最耗时的。

除此之外，我的感觉是您应该重新考虑使用 iframe 加载轮播。我知道一个页面上的多个 iframe 会减慢页面速度。考虑到您在该 iframe 中加载的内容的大小，它可能会解释延迟。您可能想对 iframe 进行一些研究，并考虑将 iframe 加载到 DOM 中的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:05:30.890

您的网站在这里加载正常。

对于 Facebook“Like Box”，请考虑使用该`iframe`版本。

[http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

单击“获取代码”按钮后，选择“IFRAME”。这可能会解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T21:16:51.563

我建议你看看 chrome 开发者工具。您可以查看加载每个资源需要多长时间（87 个请求只是为了加载登录页面 - 哇！），您可以分析脚本以查看是否需要很长时间/太长时间，您甚至可以进行审核并让它检查几个你可以优化的东西。

例如

*   合并您从同一个域加载的 javascript
*   将网络服务器设置为使用 gzip 发送压缩的脚本/html 文件
*   许多资源被明确设置为不可缓存；例如所有产品图片和社交媒体图钉（防止它们被一遍又一遍地加载，并且会在第一页加载后加快速度）
*   合并图像，如社交媒体图钉并使用 css sprites
*   为每个站点提供不同/仅需要的 css 脚本；根据 chrome，首页上几乎没有使用 300kb 的 CSS 规则

[您可以使用Chrome 开发人员工具](https://developers.google.com/chrome-developer-tools/)找到所有这些内容。您只需要 Chromium/Google Chrome。

如果它真的是 facebook 脚本，你不能在加载 fb 插件之前添加一点延迟吗？就像加载其他所有内容（大部分）之后的 500 - 1000 毫秒左右一样。

编辑：张贴的答案**drawcode**是正确的。看起来 jquery.jcarousel 导致了延迟。看这里： ![受压负载图](../Images/9aa4ea862fb85a69ada8ef943f188bfa.png)

# c# - TextBoxFor中的MVC3格式可为空的DateTime而不更改模型

> ID：13368703
> 
> 赞同：3
> 
> 时间：2012-11-13T21:00:58.677
> 
> 标签：c#, asp.net-mvc-3, datetime, formatting

我是 MVC3 的新手，并且仍在尝试学习良好的编程实践。我有一段时间试图格式化 DateTime？正在我的 MVC3 项目中显示，该项目没有与日期来自的类关联的显式 ModelName.cs 文件。

我们已经有一个数据库，并使用了一个 .edmx（我们的称为 Pooling.edmx），我们可以从中获取模型。我显然不想编辑设计器文件以适应这个被广泛接受的解决方案：[Date only from TextBoxFor()](https://stackoverflow.com/questions/1961114/date-only-from-textboxfor)。

然后我尝试了另一种在这里找到的解决方案：[Using Html.TextBoxFor with class and custom property (MVC)](https://stackoverflow.com/questions/5435842/using-html-textboxfor-with-class-and-custom-property-mvc)

它使用：

```
@Html.TextBoxFor(m => m.Name, new { data_bind="value: Name", @class = "title width-7" }) 
```

这很有效，因为我能够使用自定义属性、添加类名并一次性设置一个值。

我改变了这个：

```
@Html.TextBoxFor(m => Model.PrePoolOwner.OglDateEffective, new Dictionary<string, object> { { "class", "check-dirty input-small datePicker" }, { "data-original-value", @Model.PrePoolOwner.OglDateEffective } }) 
```

进入这个（这看起来真的很难看......并导致我提出这个问题）：

```
@Html.TextBoxFor(m => Model.PrePoolOwner.OglDateEffective, new { data_original_value = Model.PrePoolOwner.OglDateEffective.HasValue ? Model.PrePoolOwner.OglDateEffective.Value.ToString("MM/dd/yyyy") : null, @class = "datePicker check-dirty", @Value = Model.PrePoolOwner.OglDateEffective.HasValue ? Model.PrePoolOwner.OglDateEffective.Value.ToString("MM/dd/yyyy") : null }) 
```

是更好地查找和使用这些其他方式（例如下划线将转换为破折号等）来显示信息，还是我应该有一个 ModelName.cs 文件来更改它在模型级别的显示方式？

出于某种原因，我觉得拥有一个巨大的 Pooling.edmx 文件来映射我们的数据库，现在和将来都会限制我们随着网站的发展而访问/呈现/更改数据的方式。

为了获得上面由 Model.PrePoolOwner.OglDateEffective 调用的“PrePoolOwner”对象，我们有一个 PrePoolOwnerRow.cs 文件，它可以：

```
namespace OCC_Tracker.Models
{
    public class PrePoolOwnerRow
    {
        public bool Dirty { get; set; }
        public bool Delete { get; set; }

        public PrePoolOwner PrePoolOwner { get; set; }

        public PrePoolOwnerRow(PrePoolOwner owner)
        {
            this.Dirty = false;
            this.Delete = false;
            this.PrePoolOwner = owner;
        }

        public PrePoolOwnerRow()
        { }
    }
} 
```

然后我们在 .cshtml 文件的顶部调用

```
@model OCC_Tracker.Models.PrePoolOwnerRow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:55:23.680

好的，那么一些建议。

首先，在您的示例中，`PrePoolOwnerRow`是您的视图模型。这本身很好。但是代码异味是您`PrePoolOwner`通过视图模型暴露的地方——域实体，`PrePoolOwnerRow`.

所以我建议的第一件事是将您的视图模型更新为更像这样的东西：

```
public class PrePoolOwnerModel
{
    public bool Dirty { get; set; }
    public bool Delete { get; set; }

    public DateTime? OglDateEffective { get; set; }
    public String OglDateEffective { get; set; }

    // Other public properties here that map to properties on your PrePoolOwner entity.
} 
```

我在这里所做的只是删除对域模型的引用，并将其替换为模型中的属性（占位注释），这是您的视图所需的。

[在您的控制器中，获取您的 PrePoolOwner 模型，并使用AutoMapper](http://automapper.codeplex.com/)将其映射到您的视图模型（这是一个假设示例，因为我不知道您的视图在做什么）：

```
public ViewResult Index(int id)
{
    PrePoolOwner entity = myservice.GetPrePoolOwner(id);

    PrePoolOwnerModel model = Mapper.Map<PrePoolOwnerModel>(entity);

    return View(model);
} 
```

现在，要使用 DateTime 文本框解决问题，您应该考虑使用 MVC 编辑器模板（这完全是另一个主题，但[谷歌它](https://www.google.com/#q=mvc%20editor%20templates)可以找到许多涵盖该主题的主题）。这为您提供了比呈现类似类型（即日期时间）的元素更大的灵活性和可重用性。

但是，除了使用它之外，您还可以向模型添加另一个属性，并使用 AutoMapper 适当地设置 DateTime。所以，在你的控制器中是这样的，除了你会在 AutoMapper 中设置一个映射来处理这个：

```
public class PrePoolOwnerModel
{
    ....
    public String OglDateEffectiveValue { get; set; }
    ....
}

public ViewResult Index(int id)
{
    ....
    model.OglDateEffectiveValue = model.OglDateEffective.HasValue ? 
                                  model.OglDateEffective.Value.ToString("MM/dd/yyyy") : 
                                  String.Empty;
    ....
} 
```

设置完成后，您可以将这个新模型属性 ( `OglDateEffectiveValue`) 用于文本框上的属性。

我知道我在那里介绍了很多内容，但是请深入研究并尝试像这样对您的视图模型进行建模，并使用 AutoMapper 将数据映射到您的视图模型*，就像*您需要它在您的视图中一样。

保持你的视图逻辑*非常*简单。避免在场合循环之外使用任何疯狂的东西，也许在这里或那里使用 if 条件。

# java - 如何扫描非原始类型的对象？

> ID：13368704
> 
> 赞同：0
> 
> 时间：2012-11-13T21:01:00.657
> 
> 标签：java, java.util.scanner

我正在做一个项目，我需要从“行程”类型的文件中扫描一个值，但我不知道该怎么做。这是我的代码：

```
 switch (idChar) {

           case 'B':
              flightNumIn = scanFile.next();
              tripDataIn = scanFile.next();
              baseFareIn = scanFile.nextDouble();
              fareAdjustmentFactorIn = scanFile.nextDouble();
              foodBeveragesIn = scanFile.nextDouble();
              entertainmentIn = scanFile.nextDouble();

              Business bTicket1 = new Business(flightNumIn, tripDataIn, 
                 baseFareIn, fareAdjustmentFactorIn, foodBeveragesIn, 
                 entertainmentIn);

              break; 
```

而实际的错误：

```
 AirTicketProcessor.java:43: error: incompatible types
              tripDataIn = scanFile.next();
                                        ^
    required: Itinerary
    found:    String 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:05:32.340

`Scanner.next()`读取 a`String`但您可以将与“扫描”类型匹配的构造函数添加到您的`Itinerary`类：

```
class Itinerary {
   public Itinerary(String str, int intValue, ...) {
     ...
  }
} 
```

并像这样创建：

```
tripDataIn = new Itinerary(scanFile.next(), scanFile.nextInt(), ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:18:48.503

好的，您尝试做的事情称为对象序列化。你需要从[这里](http://www.javabeginner.com/uncategorized/java-serialization)开始。这是一个关于如何设置可序列化类的很棒的教程。您基本上需要创建一个`Itinerary`实现 Serializable 的类。您将使用 FileIO 导入和导出该类型的文件。[可以在此处](http://www.javapractices.com/topic/TopicAction.do?Id=57)找到有关写出（和加载）的教程。您的代码不起作用的原因是 Scanner 正在尝试扫描 String 类型的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:03:02.737

scanFile.next() 返回的是字符串，而不是行程。试试 System.out.println(scanFile.next()); 了解它是什么。

# math - 我怎样才能证明这个大符号的陈述？

> ID：13368707
> 
> 赞同：0
> 
> 时间：2012-11-13T21:01:12.237
> 
> 标签：math, computer-science, big-o, discrete-mathematics

如何证明这一点：

```
x^7 = O(x^10)
x^10 = O(x^7)? 
```

我无法证明这个说法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:26:51.570

让我们看一下大O符号的定义。

```
f ∈ O(g) <=> (∃ x) (∃ c > 0) (∀ y > x) (|f(y)| <= c⋅|g(y)|) 
```

右手边可以表述为“商`f/g`有界足够大`x`”。

因此，为了证明`f ∈ O(g)`，查看商，选择一个（较大的）`x`并尝试找到一个界限。对于第一种情况，商是

```
x⁷ / x¹⁰ = 1/x³ 
```

一个界限`x ≥ 1`是显而易见的。

要反驳`f ∈ O(g)`，请查看商并证明它在每个区间上假定任意大模值`[x, ∞)`。假设一个任意的`c > 0`，并证明对于任意的`x`，存在一个`y > x`with `|f(y)/g(y)| > c`。

这应该给出足够的提示。

> 如果不是：`x³ > c`对于`x ≥ c+1`.

# clojure - 如何从序列中去除双引号（“）字符

> ID：13368710
> 
> 赞同：1
> 
> 时间：2012-11-13T21:01:21.907
> 
> 标签：clojure

我有一个序列序列，每个序列类似于以下内容：

（“9990999”“43”“ROADWAY”“MORISON，VAN X DMD”“43 ROADWAY”“SOMETHINGTON”“XA”“00000”“501”“18050”“2500”“1180”“14370”“0”）

clojure-csv 在这里对我没有帮助，因为它 - 正如它应该 - 引用带有嵌入式逗号的字段。我想要在每个字段周围不带引号的管道分隔输出，其中一些包含嵌入的逗号。

我已经研究了多种删除双引号字符的方法，包括以下内容，但引号保持不变。

`(filter (fn [x] (not (= (str (first (str x))) (str (first (str \")))))) d1)`

其中 d1 是上面的序列。

除了答案之外，我对指向文档的指针更感兴趣。我一直在玩这个，但无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T21:25:18.390

据我了解，您有一系列字符串。Clojure 为序列提供了一个非常具体的 toString 实现，您可以[在此处查看](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/RT.java#L1759)。

如果您输入`(str d1)`或只是输入`d1`repl 并按 Enter，您将或多或少地看到您输入的内容：字符串序列（字符串打印为双引号中的字符序列）。

现在，如果您想连接所有字符串，您可以这样做：

```
(apply str d1) 
```

如果你想用逗号分隔打印它，你可以这样做：

```
(apply str (interpose "," d1)) 
```

输出是 CSV 格式，我建议使用[clojure-csv](https://github.com/davidsantiago/clojure-csv)。

最后，如果您只是想打印列表但没有字符串周围的双引号，您可以这样做：

```
(print d1) 
```

希望这可以帮助。

* * *

**EDIT1**（由于问题的变化而更新）：

这可以通过以下方式轻松实现：

```
(apply str (interpose "|" d1)) 
```

请不要注意整个结果周围的双引号，如果您`print`将它或`spit`它放入您看不到的文件中，这就是 Clojure 打印字符串的方式[readably](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/RT.java#L1766)。

或者，如果您有多个想要一次输出的序列，您仍然可以使用 clojure-csv 但使用不同的分隔符：

```
(ns csv-test.core
  (:require [clojure-csv.core :as csv]))

(def d1 (list "9990999" "43" "ROADWAY" "MORRISON, VAN X DMD" "43 ROADWAY" "SOMETHINGTON" "XA" "00000" "501" "18050" "2500" "1180" "14370" "0"))
(print (csv/write-csv [d1]  :delimiter "|"))
;;prints:
;;9990999|43|ROADWAY|MORRISON, VAN X DMD|43 ROADWAY|SOMETHINGTON|XA|00000|501|18050|2500|1180|14370|0 
```

# c++ - 如何比较两个QString数组Qt C++

> ID：13368711
> 
> 赞同：-2
> 
> 时间：2012-11-13T21:01:29.020
> 
> 标签：c++, arrays, qt, qt-designer, qstring

我想将两个 QString Array 与 Qt 和 C++ 进行比较，我试过这个，但它不起作用，（实际上我的应用程序崩溃了......）：

```
if(ArrayOne[nb] != ArrayTwo[nb]){

} 
```

然后我需要在我的数组的一个元素上分配一个值，但我也没有工作：

```
ArrayOne[nb] = ArrayTwo[nb]; 
```

要达到这一点：

```
if(ArrayOne[nb] != ArrayTwo[nb]){
ArrayOne[nb] = ArrayTwo[nb];
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:24:22.603

你说你有：

```
QString ArrayOne; 
```

如果这是真的，那么你只是比较两个字符串中的字符，而不是字符串数组，在 position `nb`。并且 QString`operator[]`不检查范围，所以如果`nb`超过 QString 的长度，程序很可能会崩溃，特别是如果您分配给`QString::operator[]`...返回的无效引用

所以，要清楚：你的代码可能会崩溃，因为`nb >= ArrayOne.length()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:15:08.460

您的`nb`值可能超出 QString 的大小范围。即，nb > ArrayOne.size-1。

# networking - TCP 广播保留 1 个主要主机，忽略其余主机

> ID：13368716
> 
> 赞同：0
> 
> 时间：2012-11-13T21:01:54.220
> 
> 标签：networking, tcp

我正在使用 TCP 开发实时客户端-服务器系统。系统必须 24/7 全天候就绪，每天 30 分钟的截止时间。

出于测试等原因，我想在系统中添加一些“影子服务器”，以便客户端将请求发送到主服务器和影子服务器。虽然请求应该被发送到所有服务器，但只有来自主服务器的重要回复应该被发送回客户端。影子服务器的回复应该被忽略。

此外，启动和停止shadows server不能对系统造成任何损害。如果影子启动，它将接收请求，如果它关闭，则客户端-主服务器不会发生任何事情。

有没有办法让我在不更改客户端或主服务器代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:08:32.297

您不能在客户端或服务器代码中执行此操作，因为 TCP 只是点对点的。

也许您想要的是一个“前端负载平衡器”，它跟踪正在运行的服务器并将传入的请求转发到其中一个。

在高端，[NetScaler](http://www.citrix.com/products/netscaler-application-delivery-controller/overview.html)可以完成所有这些工作。虽然我没有亲自配置这些设备之一，但我希望它可以同时拥有“主”和“备份”服务器。当我使用它们时，它会在许多服务器之间平均分配负载。它也可以安排在“高可用性对”中，其中两个连接一个作为“热备用”，以防主服务器发生故障。

您可能不需要任何如此复杂的东西，但它可以说明这一点。

# php - imagecreatefromstring 在 .NET 中成功时失败

> ID：13368718
> 
> 赞同：1
> 
> 时间：2012-11-13T21:01:57.147
> 
> 标签：php, gd2

我有一个 base64 编码的图像。通过 C# 解码此图像就像使用以下代码的魅力：

```
byte[] imageBytes = Convert.FromBase64String(decodeImageForm.Data);
var ms = new System.IO.MemoryStream(imageBytes, 0, imageBytes.Length);

// Convert byte[] to Image
ms.Write(imageBytes, 0, imageBytes.Length);
pbImage.Image = Image.FromStream(ms, true); 
```

但是，当尝试使用以下代码在 PHP 中解码相同的文本时

```
$payload = "..."; // same text as used above
$data = base64_decode($payload);    
$im = imagecreatefromstring($data);
if ($im !== false)
{
   header('Content-Type: image/png');
   imagepng($im);
   imagedestroy($im);       
}
else 
{        
    die("Failed to create image from string. ".strlen($payload));
} 
```

它失败并显示以下警告：

> 警告：imagecreatefromstring()：数据不是可识别的格式

这是 phpinfo() 的 GD 部分

*   启用 GD 支持
*   GD 版本捆绑（2.0.34 兼容）
*   已启用 FreeType 支持
*   FreeType 与 freetype 的链接
*   FreeType 版本 2.4.6
*   启用 T1Lib 支持
*   启用 GIF 读取支持
*   启用 GIF 创建支持
*   已启用 JPEG 支持
*   libJPEG 版本 6b
*   启用 PNG 支持 libPNG 版本 1.2.46 启用 WBMP 支持 启用 XBM 支持

指令本地值主值 gd.jpeg_ignore_warning 0 0

我在这里想念什么？有些图像有时会起作用

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T08:16:19.007

所以事实证明图像的mime类型是x-bmp，PHP中的GD不支持它......我能够通过[以下链接](http://us3.php.net/manual/en/function.imagecreate.php#53879)将字符串解码为图像资源，稍作修改以接受字符串流而不是文件名。

# android - 如何使 Handler 可在应用程序周围访问

> ID：13368720
> 
> 赞同：1
> 
> 时间：2012-11-13T21:02:09.983
> 
> 标签：android

有几个线程在服务中运行。线程需要向 UI / Activity 发布消息

我将如何将 Handler 引用传递给线程？以便他们可以将状态更改发布到 Activity ？

或者更好的是有没有办法像这样全局公开处理程序引用？

```
 Handler getUIHandler(); 
```

先感谢您 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:40:38.897

我已经回答了关于如何向活动报告服务中的错误的类似问题。

检查[Android Service 中错误处理的最佳实践](https://stackoverflow.com/questions/13108875/best-practice-for-error-handling-in-an-android-service/13110945#13110945)，这将为您提供方法以及您可以使用的代码示例。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:59:43.243

在你的 UI 线程中创建一个 Handler 对象。如果您愿意，您可以在实例化时创建它。从您的活动启动的任何线程都可以向该处理程序发布消息或可运行文件。从其他活动、服务或其他东西启动的线程将不起作用，因为无法保证您的活动甚至正在运行。（实际上，在 Activity 运行时查看它是否有效可能是一个有趣的实验，但你永远无法将真正的应用程序建立在这种技术的基础上。）

实际上，您甚至不需要创建 Handler。每个 View 对象都包含自己的 Handler，因此您可以简单地将可运行文件发布到视图。

或者你可以打电话`runOnUiThread()`

从我关于处理程序的笔记中：

使用模式：

模式 1，处理程序和可运行对象：

```
// Main thread
private Handler handler = new Handler()

  ...

// Some other thread
handler.post(new Runnable() {
  public void run() {
    Log.d(TAG, "this is being run in the main thread");
  }
}); 
```

模式 2，处理程序加消息：

```
// Main thread
private Handler handler = new Handler() {
  public void handleMessage(Message msg) {
    Log.d(TAG, "dealing with message: " + msg.what);
  }
};

  ...

// Some other thread
Message msg = handler.obtainMessage(what);
handler.sendMessage(msg); 
```

模式 3，调用 runOnUiThread()：

```
// Some other thread
runOnUiThread(new Runnable() {      // Only available in Activity
  public void run() {
    // perform action in ui thread
  }
}); 
```

模式 4，使用 View 的内置处理程序：

```
// Some other thread
myView.post(new Runnable() {
  public void run() {
    // perform action in ui thread, presumably involving this view
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:34:11.760

好的，也许我们应该回到基本问题。您是否尝试通过服务在您的活动中进行 UI 更新？我看到了两种方法。

首先，您的服务可以将特殊 Intent 发送回活动。使用“singleTask”的启动模式声明活动并实现 onNewIntent() 以接收来自服务的意图。然后，将任何相关信息打包到 Intent 中，并将其发送到要处理的 Activity。

更好的方法，但更复杂一些，是从活动中绑定服务，然后它们可以通过绑定器轻松地相互通信。如果服务和活动都是同一个应用程序的一部分，并且都运行在同一个进程中，这将变得更加简单。

同样，从我的笔记中：

声明一个名为“LocalBinder”的内部类，它扩展了 Binder 并包含一个名为 getService() 的方法，它返回服务的实例：

```
public class MyService extends Service
{
  public class LocalBinder extends Binder {
    MyService getService() {
      return MyService.this;
    }
  }

  private final IBinder binder = new LocalBinder();

  public IBinder onBind(Intent intent) {
    return binder;
  }
} 
```

您的活动包含如下代码：

```
// Subclass of ServiceConnection used to manage connect/disconnect
class MyConnection extends ServiceConnection {
  public void onServiceConnected(ComponentName name, IBinder svc) {
    myService = ((MyService.LocalBinder)svc).getService();
    // we are now connected
  }
  public void onServiceDisconnected(ComponentName name) {
    // we are now disconnected
    myService = null;
  }
}

private MyService myService;
private MyConnection connection = new MyConnection();

/**
 * Bind to the service
 */
void doBind() {
  bindService(new Intent(MyClient.this, MyService.class),
    connection, Context.BIND_AUTO_CREATE);
}

/**
 * Unbind from the service
 */
void doUnbind() {
  if (connection != null) {
    unbindService(connection);
  }
} 
```

# python - 如何根据模式将列表拆分为子集？

> ID：13368723
> 
> 赞同：10
> 
> 时间：2012-11-13T21:02:22.227
> 
> 标签：python

我正在这样做，但感觉这可以用更少的代码来实现。毕竟是 Python。从一个列表开始，我根据字符串前缀将该列表拆分为子集。

```
# Splitting a list into subsets
# expected outcome:
# [['sub_0_a', 'sub_0_b'], ['sub_1_a', 'sub_1_b']]

mylist = ['sub_0_a', 'sub_0_b', 'sub_1_a', 'sub_1_b']

def func(l, newlist=[], index=0):
    newlist.append([i for i in l if i.startswith('sub_%s' % index)])
    # create a new list without the items in newlist
    l = [i for i in l if i not in newlist[index]]

    if len(l):
        index += 1
        func(l, newlist, index)

func(mylist) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-13T21:04:45.623

你可以使用[`itertools.groupby`](https://docs.python.org/library/itertools.html#itertools.groupby)：

```
>>> import itertools
>>> mylist = ['sub_0_a', 'sub_0_b', 'sub_1_a', 'sub_1_b']
>>> for k,v in itertools.groupby(mylist,key=lambda x:x[:5]):
...     print k, list(v)
... 
sub_0 ['sub_0_a', 'sub_0_b']
sub_1 ['sub_1_a', 'sub_1_b'] 
```

或完全按照您指定的方式：

```
>>> [list(v) for k,v in itertools.groupby(mylist,key=lambda x:x[:5])]
[['sub_0_a', 'sub_0_b'], ['sub_1_a', 'sub_1_b']] 
```

当然，常见的警告适用（确保您的列表使用您用于分组的相同键进行排序），并且您可能需要一个稍微复杂的键功能来处理现实世界的数据......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:06:25.100

```
In [28]: mylist = ['sub_0_a', 'sub_0_b', 'sub_1_a', 'sub_1_b']

In [29]: lis=[]

In [30]: for x in mylist:
    i=x.split("_")[1]
    try:
        lis[int(i)].append(x)
    except:    
        lis.append([])
        lis[-1].append(x)
   ....:         

In [31]: lis
Out[31]: [['sub_0_a', 'sub_0_b'], ['sub_1_a', 'sub_1_b']] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:10:12.013

使用`itertools`' [`groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
def get_field_sub(x): return x.split('_')[1]

mylist = sorted(mylist, key=get_field_sub)
[ (x, list(y)) for x, y in groupby(mylist, get_field_sub)] 
```

# javascript - 如何动态调整 Flash CreateJS 画布元素动画的大小和居中

> ID：13368724
> 
> 赞同：0
> 
> 时间：2012-11-13T21:02:23.937
> 
> 标签：javascript, flash, canvas, createjs

我在这里看到了一些类似的问题，但实际上并不是我需要知道的！

我正在使用 Flash CS6 并输出 CreateJS 框架动画，而不是常规的 .swf 文件。当您从 API (Flash) 中发布时，它会生成一个 html5 文档和一个外部 .js 文件，其中包含定义动画的实际 javascript。

这就是我需要的：我希望我的动画能够全屏显示并保持其纵横比 - 或者 - 设置为 1024x768 并在浏览器窗口中居中，但如果在移动设备上查看，动态调整大小以适应设备屏幕大小或视口大小并居中。

我需要的一个完美示例在这里：[http](http://gopherwoodstudios.com/sandtrap/) ://gopherwoodstudios.com/sandtrap/但我看不到在此示例中哪些代码正在执行动态调整大小。

任何帮助将不胜感激。此外，我提供了 Flash API 的 html5/js 输出，因为它似乎与其他与画布相关的帖子中给出的示例代码非常、非常不同。

```
 <!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CreateJS export from index</title>

<script src="http://code.createjs.com/easeljs-0.5.0.min.js"></script>
<script src="http://code.createjs.com/tweenjs-0.3.0.min.js"></script>
<script src="http://code.createjs.com/movieclip-0.5.0.min.js"></script>
<script src="http://code.createjs.com/preloadjs-0.2.0.min.js"></script>
<script src="index.js"></script>

<script>
var canvas, stage, exportRoot;

function init() {
    canvas = document.getElementById("canvas");
    images = images||{};

    var manifest = [
        {src:"images/Mesh.png", id:"Mesh"},
        {src:"images/Path_0.png", id:"Path_0"}
    ];

    var loader = new createjs.PreloadJS(false);
    loader.onFileLoad = handleFileLoad;
    loader.onComplete = handleComplete;
    loader.loadManifest(manifest);
}

function handleFileLoad(o) {
    if (o.type == "image") { images[o.id] = o.result; }
}

function handleComplete() {
    exportRoot = new lib.index();

    stage = new createjs.Stage(canvas);
    stage.addChild(exportRoot);
    stage.update();

    createjs.Ticker.setFPS(24);
    createjs.Ticker.addListener(stage);
}
</script>
<style type="text/css">
body {text-align:center;}
#container { display:block;}

</style>
</head>

<body onload="init();" style="background-color:#D4D4D4">
    <div id="container">
        <canvas id="canvas" width="1024" height="768" style="background-color:#ffffff; margin: 20px auto 0px auto;"></canvas>
    </div>
</body>
</html> 
```

再次感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T21:51:41.907

不知道你最后是否解决了这个问题，但我最近遇到了同样的问题 - 我只需要将整个 createJs 对象调整为视口。

我添加了一个监听器来调整视口大小（我使用了 jQuery），然后调整了画布舞台的大小以匹配视口，然后使用原始 flash 舞台高度的高度，或者取决于你想要的宽度（我的是 500），你可以缩放向上 createJs 电影对象 (exportRoot)。

```
(function($){
  $(window).resize(function(){
     windowResize();                      
  });         
})(jQuery);

function windowResize(){
   stage.canvas.width = window.innerWidth;
   stage.canvas.height = window.innerHeight;    
   var test = (window.innerHeight/500)*1;
   exportRoot.scaleX = exportRoot.scaleY = test;
} 
```

希望对某人有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T04:16:39.443

```
 function resizeGame()
     {
        widthToHeight = 600 / 350;
        newWidth = window.innerWidth;
        newHeight = window.innerHeight;
        newWidthToHeight = newWidth / newHeight;
        if (newWidthToHeight > widthToHeight)
        {
            newWidth = newHeight * widthToHeight;
            gameArea.style.height = newHeight + 'px';
            gameArea.style.width = newWidth + 'px';
        } else
        {
            newHeight = newWidth / widthToHeight;
            gameArea.style.height = newHeight + 'px';
            gameArea.style.width = newWidth + 'px';

        }

        scale = newWidthToHeight / widthToHeight;
        stage.width = newWidth;
        stage.height = newHeight;
        gameArea.style.marginTop = ((window.innerHeight - newHeight) / 2) + 'px';
        gameArea.style.marginLeft = ((window.innerWidth - newWidth) / 2) + 'px';

      } 
```

`widthToHeight`是你的游戏画布缩放比例。`gameArea`是你的 div id

确保您的 html 标签必须包含

```
 <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:22:59.813

画布的内联宽度和高度定义“分辨率” - 设置宽度的 CSS 样式定义“比例”。可以把它想象成 Photoshop 中的画布大小和图像大小。

因为导出时没有定义元素的宽度和高度，所以我正在努力想出一种扩大规模的好方法。但是，你总是可以缩小规模。使用 CSS 将 max-width 和 max-height 设置为 1024x768（或您的原始值），然后将常规宽度和高度设置为您需要的任何值（按比例）。

然后只需使用 CSS 居中 - margin:auto 和所有这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T16:20:57.390

我发现让我的画布根据宽度流动，然后根据调整大小的纵横比调整高度很有用。有几件事要记住。

1.  无论您是使用 javascript 还是 html 创建，都必须为 canvas 元素分配宽度和高度属性
2.  您必须调整对象的 style.height 属性，而不是直接调整画布高度属性。

如果您遵循此类示例，您甚至可以使用媒体查询来提供更大的灵活性。 [jsFiddle，如果你愿意的话。](http://jsfiddle.net/L3fk0ydm/2/)

```
 var el = document.getElementById('mycanvas');
    var aspectRatio = el.height / el.width;

    resizeCanv = function resize (){
        var style = getComputedStyle(el);
        var w = parseInt(style.width);
        el.style.height = (w * this._aspectRatio) + 'px';
    };

    // TODO: add some logic to only apply to IE
    window.addEventListener('resize', resizeCanv); 
```

编辑：我没有用画布内的任何交互性测试这个，只有布局和动画。

# character-encoding - 为什么 dchar 不是 D 中的标准字符类型？

> ID：13368728
> 
> 赞同：7
> 
> 时间：2012-11-13T21:02:36.177
> 
> 标签：character-encoding, character, d

只是浏览 digitalmars.D.learn 论坛和 StackOverflow 上与 D 相关的问题，在我看来，对于初学者 D 程序员（包括我）来说，一个主要的错误点是 char、wchar、dchar 的用法和能力的差异，以及相关的字符串类型。这会导致以下问题：

*   [实例化 redBlackTree 模板时出错](https://stackoverflow.com/questions/13295912/error-instantiating-redblacktree-template)
*   [不能从 D 中的 std.range 切片 Take！R？](https://stackoverflow.com/questions/13014999/cannot-slice-taker-from-std-range-in-d)
*   [std.algorithm.joiner(string[],string) - 为什么结果元素是 dchar 而不是 char？](https://stackoverflow.com/questions/12288465/std-algorithm-joinerstring-string-why-result-elements-are-dchar-and-not-ch)

我知道这一定是出于向后兼容性的原因以及来自 C++ 或 C 的开发人员的熟悉程度，但我认为可以提出一个相当有说服力的论点，即这种可能的收益被这些开发人员在尝试一些不平凡的事情时遇到的问题所抵消使用**char**或**string**并期望它像在 C/C++ 中一样工作，只是让它以难以调试的方式失败。

为了避免很多这些问题，我看到 D 开发社区的有经验的成员一次又一次地告诉没有经验的编码人员使用**dchar**来避免这些问题，这引出了为什么**char**不是 32 位的问题默认情况下为 unicode 字符，8 位 ASCII 字符被降级为**achar**或类似的字符，仅在必要时才触摸？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T21:36:19.803

就个人而言，我希望那`char`不存在，而不是`char`, `wchar`, and `dchar`, 我们有一些更像`utf8`, `utf16`, and的东西`utf32`。然后每个人都会立即被迫意识到这`char`不*应该*用于单个角色，但事实并非如此。我会说几乎可以肯定的情况`char`是简单地从 C/C++ 中提取，然后添加其他的以改进 Unicode 支持。毕竟，从根本上来说并没有什么问题`char`。只是很多程序员有这样的错误理解`char`总是一个字符（即使在 C/C++ 中也不一定是真的）。但是 Walter Bright 对 Unicode 有很好的理解，并且似乎认为其他人也应该如此，所以他倾向于做出关于 Unicode 的决定't（大多数程序员都不会）。D 几乎迫使你至少对 Unicode 有一个基本的了解，这并不全是坏事，但它确实让一些人感到不安。

但实际情况是，虽然`dchar`用于单个字符很有意义，但将其用于字符串通常*没有意义。*有时，这就是您所需要的，但 UTF-32 比 UTF-8 需要更多*的*空间。这可能会影响性能，并且肯定会影响程序的内存占用。而且*很多*字符串处理根本不需要随机访问。因此，将 UTF-8 字符串作为默认值比将 UTF-32 字符串作为默认值更有意义。

在 D 中管理字符串的方式通常非常有效。只是这个名字`char`对很多人来说有一个不正确的含义，不幸的是，语言选择默认的字符文字`char`而不是`dchar`在很多情况下。

> 我认为可以提出一个相当有说服力的论点，即这种可能的收益被那些相同的开发人员所遇到的问题所抵消，当他们尝试使用 char 或 string 进行一些不平凡的事情并期望它像在 C/C++ 中一样工作时，只是为了让它以难以调试的方式失败。

实际情况是，C/C++ 中的字符串与 D 中的工作方式相同，只是它们不能保护您免于无知或愚蠢，这与 D 不同。`char`在 C/C++ 中始终是 8 位，通常是操作系统将其视为 UTF-8 代码单元（至少在 *nix 领域 - Windows 为编码做了一些奇怪的事情，`char`并且通常要求您使用`wchar_t`Unicode）。当然，您在 C/C++ 中拥有的任何 Unicode 字符串都是 UTF-8 格式，除非您明确使用使用不同编码的字符串类型。`std::string`和 C 字符串都对代码单元而不是代码点进行操作。但是普通的 C/C++ 程序员将它们视为每个元素都是一个完整的字符，除非您只使用 ASCII，否则这是完全错误的，而在当今时代，这通常是一个非常糟糕的假设。

D 采取了在语言及其标准库中实际构建适当的 Unicode 支持的路线。这迫使您至少对 Unicode 有一个基本的了解，并且通常会使其更难搞砸，同时为那些理解它的人提供非常强大的工具，不仅可以正确而且有效地管理 Unicode 字符串。C/C++ 只是绕过这个问题，让程序员踩到 Unicode 地雷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T10:33:33.957

我将问题理解为“为什么默认情况下不在字符串中使用 dchar？”

dchar 是一个 UTF-32 编码单元。您很少希望处理 UTF-32 代码单元，因为您浪费了太多空间，尤其是当您只处理 ASCII 字符串时。

使用 UTF-8 代码单元（D 中的适当类型是 char）更节省空间。

D 字符串是一个`immutable(char)[]`，即 UTF-8 代码单元的数组。

是的，如果您经常对字符串进行随机访问，可以说处理 UTF-32 代码单元可能会提高应用程序的速度。但是，如果您知道要对某些特定文本执行此操作，请`dstring`在这种情况下使用类型。这就是说，您现在应该明白为什么 D 将字符串视为 dchar 范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:55:25.730

由于组合字符，甚至`dchar`不能真正保存所有 Unicode 字符（以人类想要的任何方式）并且不能直接索引（参见本文末尾的[示例](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)）。

# twitter-bootstrap - 发生 jquery 验证错误时，bootstrap css 错误类不显示

> ID：13368730
> 
> 赞同：0
> 
> 时间：2012-11-13T21:02:41.150
> 
> 标签：twitter-bootstrap, jquery-validate

我正在使用 jquery 验证插件来验证我使用 bootstrap 2 的表单，但是当违反规则时，会添加错误类，但在屏幕上输入框看起来没有任何不同。如何使输入“突出显示”默认为引导错误类并正确显示。

```
HERE IS THE HTML
 <dl class="dl-horizontal">
    <dt>Contract Name: </dt>
      <dd>
         <input name="myInput" type="text" />
      </dd>
 </dl>

HERE IS THE JAVASCRIPT
<SCRIPT type="text/javascript" src="script/jquery.validate.min.js"></SCRIPT>
<script type="text/javascript">
    $(document).ready(function(){

    $('.submitOCform').click(function() {                        
       if($("#submitForm").valid()) {
            document.forms["submitForm"].submit();
       }
    });

    //Load the form validation for the page    
      $("#submitForm").validate({
        rules: {
          "myInput": {
            required: true,
            maxlength:100
          }                  
        },
          highlight: function(label){
              $(label).closest('.control-group').addClass('error');
              $(label).closest('.control-group').removeClass('success');
          },
          success: function(label){
            $(label).closest('.control-group').addClass('success');
            $(label).closest('.control-group').removeClass('error');
          },
          errorPlacement: function(error, element) {
                      error.appendTo(element.parent());
          }
      });

    }); // END DOC Ready        
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:28:45.273

您需要添加一个

```
<div class='control-group'></div> 
```

围绕您想要在错误时更改颜色的输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:36:25.910

添加`messages`验证功能的属性并编辑**所需**的消息。消息应包含在`<code>`标签中

```
$("#submitForm").validate({
    rules: {
      "myInput": {
        required: true,
        maxlength:100
      }
    }, 
    messages: {
        myInput: {
            required: "<code>Please specify something here</code>",
        }
    }
}); 
```

# php - JSONException：java.lang.String 类型的值无法转换为 JSONObject

> ID：13368739
> 
> 赞同：1
> 
> 时间：2012-11-13T21:03:31.760
> 
> 标签：php, android, web-services

我面临一个问题，有效的 JSON 字符串不能成为 JSON 对象。

我已经测试了来自服务器的响应，它是一个有效的 JSON。

我在网上查了一下，是关于 UTF-8 with DOM 的问题。但即使我将 Notepad++ 中的字符集更改为没有 DOM 的 UTF-8，仍然会出现同样的错误。

我的代码：

```
<?php
    require_once("Connection/conn.php");

    //parse JSON and get input
    $json_string = $_POST['json'];
    $json_associative_array = json_decode($json_string,true);

    $userId = $json_associative_array["userId"];
    $password = $json_associative_array["password"];
    $userType = $json_associative_array["userType"];    

    //get the resources
    $json_output_array = array();

    $sql = "SELECT * FROM account WHERE userId = '$userId' AND password = '$password' AND userType = '$userType'";  
    $result = mysql_query($sql);  

    //access success?
    if (!$result) {
        die('Invalid query: ' . mysql_error());
        $json_output_array["status"] = "query failed";
    }
    else{
        $json_output_array["status"] = "query success";
    }

    //find the particular user?
    if (mysql_num_rows($result) > 0){
        $json_output_array["valid"] = "yes";
    }
    else{
        $json_output_array["valid"] = "no";
    }

    //output JSON 
    echo json_encode($json_output_array);
?> 
```

安卓代码：

```
public boolean login() {
        // instantiates httpclient to make request
        DefaultHttpClient httpClient = new DefaultHttpClient();

        // url with the post data
        String url = SERVER_IP + "/gc/login.php";

        JSONObject holder = new JSONObject();
        try {
            holder.put("userId", "S1");
            holder.put("password", "s12345");
            holder.put("userType", "supervisor");
        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        Log.d("JSON", holder.toString());

        // HttpPost
        HttpPost httpPost = new HttpPost(url);

        //FormEntity
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("json", holder.toString()));

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        // execution and response
        boolean valid = false; 
        try {
            HttpResponse response = httpClient.execute(httpPost);

            Log.d("post request", "finished execueted");
            String responseString = getHttpResponseContent(response);
            Log.d("post result", responseString);

            //parse JSON
            JSONObject jsonComeBack = new JSONObject(responseString);
            String validString = jsonComeBack.getString("valid");
            valid = (validString.equals("yes"))?true:false;

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return valid;

    }

    private String getHttpResponseContent(HttpResponse response) {

        String responseString = "";

        try {
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));

            String line = "";

            while ((line = rd.readLine()) != null) {
                responseString += line ;
            }
            rd.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return responseString;
    } 
```

JSON来自服务器：

```
{
    "status": "query success",
    "valid": "yes"
} 
```

取消格式化 JSON：

`{"status":"query success","valid":"yes"}`

当我将它复制到记事本++中时，它变成`?{"status":"query success","valid":"yes"}` 了似乎有一个不可见的字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:50:27.107

我使用MuhammedPasha 提供的[解决方案对其进行了修复，该解决方案](https://stackoverflow.com/questions/10267910/jsonexception-value-of-type-java-lang-string-cannot-be-converted-to-jsonobject)**将 JSON 字符串子串化以删除不可见字符**。我将 JSON 字符串从 1 中取出来解决我的问题。

有一种方法可以检测到那些不可见字符，将日志结果复制到notepad++中。（复制！不要打字！）如果有？（问号），则表示有一些不可见字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T18:57:03.457

我有同样的问题。也许您需要在没有 unicode 签名 (BOM) 的情况下保存。

# c# - 如何通过托管到非托管调用将顶点缓冲区对象 (VBO) 与 glew 和 SharpGL 一起使用

> ID：13368742
> 
> 赞同：2
> 
> 时间：2012-11-13T21:03:37.577
> 
> 标签：c#, c++-cli, unmanaged, vbo, glew

**EDIT2：我找到了解决方案！我需要`RenderContextType="FBO"`在我的 windows 窗体的 .xaml 文件中的 OpenGLControl 中添加。**

我正在开发基于 MVC 模式的游戏。视图在 C# 中，模型是 C++ 库。我选择 C++/CLI 作为它们之间的控制器。目前，这项工作正常。我的 C++ 库是我制作的一个游戏引擎，它使用 OpenGL 进行渲染。所以我在 C# 端的 WPF 应用程序中使用了 SharpGL。然后，我通过控制器将 OpenGL 事件链接到模型。这也很好用。我可以在 C++ 端调用基本的 OpenGL 函数，如 glVertex、glGenList 等。

现在，问题来了。我发现 OpenGL 列表对我的需要来说太慢了。所以我想使用VBO。我已经在另一个使用 C++ 的项目中使用了它。所以我在我的项目中包含了 glew，而不会忘记调用 glewInit() 并检查错误。

问题是当我调用 glGenBuffer 时，它会触发访问冲突异常。我调查了这个问题，发现 glew 告诉我我不支持 OpenGL 2.0 ......但这是错误的，因为我知道我的计算机支持它，我有另一个 C++ 项目使用这些函数并且 glew 告诉我 OpenGL 2.0 是支持的。

然后我尝试通过 wglGetProcAddress 加载扩展。但它返回一个空指针。

所以我认为即使 glewInit() 没有抛出任何错误，也许我没有上下文。所以我尝试从 SharpGL.RenderContextProvider 获取 deviceHandle 和 renderHandle 并将它们发送到我的 C++ 模型，然后调用 wglMakeCurrent 来获取上下文。该函数不返回任何错误，但对我的问题没有任何改变。

所以，是的，现在我真的不知道该怎么办。任何帮助将不胜感激！

谢谢！

编辑：重要的是要补充一点，在创建上下文之后和调用扩展函数之前我已经调用了 glewInit() 。

# python - 使用与源不同的目录结构打包

> ID：13368745
> 
> 赞同：0
> 
> 时间：2012-11-13T21:04:06.347
> 
> 标签：python, packaging

如何更改依赖路径并部署到与开发不同的目录结构？

我的源目录中有以下结构

```
\ABCE
\ABCE\lib
\ABCE\lib\modulA.py
\ABCE\lib\modulA.py 
```

如果我现在打包`python setup.py sdist`

我需要调用模块：

```
import lib.moduleA
import lib.moduleB 
```

我怎样才能避免lib。但维护我的目录结构？所以我进口

```
import moduleA
import moduleB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:11:18.740

`lib`在`packages_dir`选项中列出：

```
package_dir = {'': 'lib'} 
```

从[`distutils`“编写安装脚本”文档](http://docs.python.org/2/distutils/setupscript.html#listing-whole-packages)中：

> 如果你使用不同的约定来布局你的源目录，那没问题：你只需要提供 package_dir 选项来告诉 Distutils 你的约定。例如，假设您将所有 Python 源代码保存在`lib`中，因此“根包”中的模块（即根本不在任何包中）位于 中，包中的`lib`模块位于中，等等。然后你会放`foo``lib/foo`
> 
> ```
> package_dir = {'': 'lib'} 
> ```
> 
> 在您的安装脚本中。这个字典的键是包名，一个空的包名代表根包。这些值是相对于您的分发根目录的目录名称。在这种情况下，当您说 时`packages = ['foo']`，您承诺该文件`lib/foo/__init__.py`存在。

# jquery - 拖动元素时打破向左/向右滑动

> ID：13368746
> 
> 赞同：7
> 
> 时间：2012-11-13T21:04:14.380
> 
> 标签：jquery, jquery-mobile

我遇到了滑动事件和拖动元素的问题。

在我的应用程序中，我使用 swipeleft/-right 在页面之间导航（它有效）。在一页中有很多拖动元素（拖动作品）。

所以问题是，当一个元素水平向右拖动时，swipeleft 在dragstop 之后起作用。向左拖动也一样，向右滑动有效。

这让我很困惑。

那么当我拖动元素时是否可以停止或中断向左/向右滑动？

这是刷卡的代码（来自 Stackoverflow thx）

```
$('div.ui-page').live("swipeleft", function() {
    var nextpage = $(this).next('div[data-role="page"]');
    // swipe using id of next page if exists
    if (nextpage.length > 0) {
        $.mobile.changePage(nextpage, 'slide');
    }
});
$('div.ui-page').live("swiperight", function() {
    var prevpage = $(this).prev('div[data-role="page"]');
    // swipe using id of next page if exists
    if (prevpage.length > 0) {
        $.mobile.changePage(prevpage, 'slide', true);
    }
}); 
```

这是拖动的代码

```
$ (function(){
var numbers = [ 1, 2, 3, 4, 5 ];    
    numbers.sort( function() { return Math.random() - .5 } );
    alert(numbers);

for ( var i=1; i<6; i++ ) {
    $('#'+i).attr( 'src','bilder/'+numbers[i-1]+'.png' ).draggable( {
      cursor: 'move',
      containment: $('#'+i).parent().parent(),
      revert: true,

    });
  } 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:19:50.190

jQuery[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)应该完全处理这个问题。在您当前的代码中，在拖动事件处理程序完成后，手势将“继续”由移动浏览器解析 - 如果用户拖放操作类似于向左滑动，它将触发相关处理程序：

```
$('div.ui-page').live("swipeleft", function(_event) { //reference the event object
  /*your code*/
  _event.preventDefault();
  return false;
}); 
```

更改后，jQuery 将指示浏览器该事件已完成，不应“返回”给浏览器以触发默认响应（在您的情况下，解决滑动手势）。

***更新：***

正如评论中提到的，我错误地建议将其`preventDefault()`作为滑动处理程序的一部分。这应该是*拖放*事件处理程序的一部分。查看这个建议集成[此 JS的](http://code.google.com/p/jquery-ui-for-ipad-and-iphone/)[答案](https://stackoverflow.com/a/4584804/1081234)- 这应该在全球范围内解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:02:52.727

好的，现在我得到了解决方案：

ov 的回答是正确的，我已经解决了 ahren 的提示。

这里解释一下代码：

```
var moveme=false;  // global variable is false(by default) when no element is dragged

$('div.ui-page').live("swipeleft", function (event){

if(moveme===true){event.preventDefault(); return false;}

var nextpage = $(this).next('div[data-role="page"]');
// swipe using id of next page if exists

if (nextpage.length > 0) {
$.mobile.changePage(nextpage, 'slide',true);
}
});

$('div.ui-page').live("swiperight", function(event){

if(moveme===true){event.preventDefault(); return false;}

var prevpage = $(this).prev('div[data-role="page"]');
// swipe using id of next page if exists

if ( prevpage.length > 0) {
$.mobile.changePage(prevpage, 'slide', true);
}
}); 
```

可拖动代码：

```
$ (function(){
var numbers = [ 1, 2, 3, 4, 5 ];    
    numbers.sort( function() { return Math.random() - .5 } );
    alert(numbers);

for ( var i=1; i<6; i++ ) {
    $('#'+i).attr( 'src','bilder/'+numbers[i-1]+'.png' ).draggable( {
      cursor: 'move',
      containment: $('#'+i).parent().parent(),
      revert: true,

      start: function(){moveme=true;}, //if an element is dragged moveme=true and
                                       //event.preventDefault() is used. So it is not possible to swipe
      stop: function(){moveme=false;}, //after dragging swipe can be used (default)

        });

  } 
}); 
```

所以，非常感谢你的帮助 ov 和 ahren

# mysql - 在 MYSQL 中使用连接

> ID：13368749
> 
> 赞同：0
> 
> 时间：2012-11-13T21:04:31.260
> 
> 标签：mysql, join

我有以下一组带有附加查询的表。显然，我在其中填充了太多`AND`子句，现在没有结果是有效的，即使是结果。下面显示的是我正在使用的图表和 SQL。

![MySQL 数据库模型隐藏字段并不重要。](../Images/2686784b13f86dfff1dde68591b969fc.png)

```
SELECT p.products_id, pd.language_id, pd.products_name,
       pd.products_description, pd.products_url, p.products_quantity,
       p.products_model, p.products_image, p.products_price, p.products_virtual,
       p.products_weight, p.products_date_added, p.products_last_modified,
       p.products_date_available, p.products_status, p.manufacturers_id,
       p.products_quantity_order_min, p.products_quantity_order_units, p.products_priced_by_attribute,
       p.product_is_free, p.product_is_call, p.products_quantity_mixed,
       p.product_is_always_free_shipping, p.products_qty_box_status, p.products_quantity_order_max, p.products_sort_order, 

FROM `magez_products` p, `magez_products_description` pd
       WHERE p.products_id = pd.products_id
       AND p.products_id = 186
       AND p.products_id = cfv.products_id 
       AND cfv.nation_id = cfvn.nation_id
       AND cfv.clan_id = cfvc.clan_id
       AND cfv.rarity_id = cfvr.rarity_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:14:34.253

在这些情况下，我通常做的是从较小的查询（例如一个 AND）开始并越来越多地增加查询，直到您会看到它从哪里开始“没有结果”。否则很难调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:15:18.930

这不是完整的 select 或 mysql 应该抱怨的，因为 select 缺少 cfv、cfvn、cfvc 和 cfvr 表。

`and ...`您可以通过从子句末尾一一删除来解决它，`where`并查看结果从何处再次开始出现行。

例如，一个问题可能是连接表（例如 pd、cfv）缺少 a `products_id`。

另一个解决方案可能是用左连接替换内部连接，当然这取决于您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T21:18:23.167

你需要加入声明

```
SELECT p.products_id, pd.language_id, pd.products_name,
   pd.products_description, pd.products_url, p.products_quantity,
   p.products_model, p.products_image, p.products_price, p.products_virtual,
   p.products_weight, p.products_date_added, p.products_last_modified,
   p.products_date_available, p.products_status, p.manufacturers_id,
   p.products_quantity_order_min, p.products_quantity_order_units,         
p.products_priced_by_attribute,
   p.product_is_free, p.product_is_call, p.products_quantity_mixed,
   p.product_is_always_free_shipping, p.products_qty_box_status,                                                                               p.products_quantity_order_max,
p.products_sort_order, 

FROM `magez_products` p
join `magez_products_description` pd
on p.products_id = pd.products_id
   AND p.products_id = 186
   AND p.products_id = cfv.products_id      <-------------- what is cfv  join   on that too !!!!!!!!!!
   AND cfv.nation_id = cfvn.nation_id
   AND cfv.clan_id = cfvc.clan_id
   AND cfv.rarity_id = cfvr.rarity_id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T21:18:48.297

为了提供帮助，我也是老式的 ANSI 格式...您会发现更多使用表之间的 JOINS 编写的当前查询，并且仅在您实际想要“限制”的地方应用“AND”。有时，这可能直接在连接处，而不是主要的“来自”表。此外，通过作为连接，您可以准确地看到表“A”如何连接到表“B”，并且我尝试保持 A = B 比较的顺序与列出的表相同...... =的左侧，=右侧的右侧表如

```
SELECT 
      p.products_id, 
      pd.language_id, 
      pd.products_name,
      pd.products_description, 
      pd.products_url, 
      p.products_quantity,
      p.products_model, 
      p.products_image, 
      p.products_price, 
      p.products_virtual,
      p.products_weight, 
      p.products_date_added, 
      p.products_last_modified,
      p.products_date_available, 
      p.products_status, 
      p.manufacturers_id,
      p.products_quantity_order_min, 
      p.products_quantity_order_units, 
      p.products_priced_by_attribute,
      p.product_is_free, 
      p.product_is_call, 
      p.products_quantity_mixed,
      p.product_is_always_free_shipping, 
      p.products_qty_box_status, 
      p.products_quantity_order_max, 
      p.products_sort_order
   FROM 
      magez_products p
         JOIN magez_products_description pd
            on p.products_id = pd.products_id
         JOIN magez_cfv_cards cfv
            on p.products_id = cfv.products_id
            JOIN magez_cfv_nations cfvn
               on cfv.nation_id = cfvn.nation_id
            JOIN magez_cfv_clans cfvc
               on cfv.clan_id = cfvc.clan_id
            JOIN magez_cfv_rarity cfvr
               on cfv.rarity_id = cfvr.rarity_id
   where
      p.products_id = 186 
```

请注意我的格式，它与您的表结构相关... A 连接到 B，B 连接到 C，D 和 E 在各自的列上。WHERE 子句在您想要的确切标准上很简单......

现在，如果您只想要某些其他元素，您只需将“AND”添加到该组件的 JOIN 标准即可。

# java - 使用 DOM 解析 XML 文档

> ID：13368751
> 
> 赞同：0
> 
> 时间：2012-11-13T21:04:42.950
> 
> 标签：java, xml, parsing, dom

我有一个这样的xml文件：

```
element
 element1
  element1
element 
```

现在： element1 可以有文本，或/和两个元素 element2 element3 中的一个/两个，因此 xml 文件可以是

```
<element>
 <element1>
 hi hello etc
  </element1>
</element> 
```

或者

```
<element>
 <element1>
 hi hello etc
 <element2>
 how are you
   </element2>
  <element3>
    fine
   </element3>
  </element1>
</element> 
```

当它在上面的例子中时，我成功地解析它。我可以通过它们的标签访问节点并从中获取内容。当 xml 具有以下形式时，就会出现问题：

```
<element> 
<element1>
 <element2>
 how are you
   </element2>
  </element1>
</element> 
```

我有一个循环，它遍历 xml 文档并检查标签 element1、element2、element3 并获取内容。对于上面的示例，我得到了接受并且循环终止。因为当它到达 element1 时，它没有得到内容，而是有另一个元素。请帮我解决这个问题谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:33:23.683

如果每一行仅包含元素名称或文本内容，我将使用堆栈来解析此类上下文。所以，定义一个栈S，如果XML文件如下：

```
<element>
  <element1>
    hi hello etc
    <element2>
        how are you
    </element2>
    <element3>
        fine
    </element3>
  </element1>
</element> 
```

所以整个想法可能是这样的：

推`<element>` --> S[ `<element>`]

推`<element1>` --> S[ `<element>`, `<element1>`]

推`hi hello etc`--> S[ `<element>`, `<element1>`, `hi hello etc`]

推`<element2>` --> S[ `<element>`, `<element1>`, `hi hello etc`, `<element2>`]

推`how are you` --> S[ `<element>`, `<element1>`, `hi hello etc`, `<element2>`, `how are you`]

得到`</element2>`, 然后 Pop 两次, 得到`how are you` --> S[ `<element>`, `<element1>`, `hi hello etc`]

推`<element3>` --> S[ `<element>`, `<element1>`, `hi hello etc`, `<element3>`]

推`fine` --> S[ `<element>`, `<element1>`, `hi hello etc`, `<element3>`, `fine`]

得到`</element3>`, 然后 Pop 两次, 得到`fine` --> S[ `<element>`, `<element1>`, `hi hello etc`]

Get `</element1>`，然后 Pop 两次，得到`hi hello etc` --> S[ `<element>`]

你是这个意思吗？？

# javascript - Java 脚本问题

> ID：13368752
> 
> 赞同：2
> 
> 时间：2012-11-13T21:04:43.127
> 
> 标签：javascript, html

对于我的研究，我需要创建一个简单的脚本来检查输入的数据（假设是 5 位数的邮政编码）是否实际上有 5 位数。如果输入的数字多于或少于 5 个，则应弹出警报。

到目前为止，我设法获得了多于和少于 5 位数字的警报，但即使输入 5 位数字，警报也会出现。

由于 js 不是我最喜欢的主题，我迷路了，即使它似乎是一件简单的事情。

提前感谢您的答案和提示。

```
<script type="text/javascript"> 
<!--
function CheckZip ()
{
var content = document.forms['zipfield'].Field.value;
var length = content.length;
if (length >=5) (alert('Please enter a 5 digit zip code!'));
else if (length <=5) (alert('Please enter a 5 digit zip code!'));
else (length ==5) (alert('Valid entry'))
}
//-->
</script> 
</head> 
<body>  
<div align="left">
<p>Please enter a 5 digit zip code</p> 
<form name="zipfield" action="post"><input name="Field" size="5">
<br />
<br />
<input name="check" value="Check entry" onclick="CheckZip()" type="submit"> 
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:07:00.320

Check your condition..

When length is 5 it will go to the first `if statemenet` because you have specified it to be **>= 5**

So when length is 5 , it will never hit the statement `else (length ==5)`

```
if (length >5) {
      alert('Please enter a 5 digit zip code!')
}
else if (length <5) {
    alert('Please enter a 5 digit zip code!')
}
else (length ==5) {
     alert('Valid entry')
}; 
```

**Better**

```
if( length === 5){
   alert('Valid entry');
}
else{
   alert('Please enter a 5 digit zip code!');
} 
```

**[Check Fiddle](http://jsfiddle.net/sushanth009/7BYe5/)**

You have other **syntax errors** in your script

```
if (length >=5) (alert('Please enter a 5 digit zip code!'));
              --^-- Supposed to be {                    --^-- supposed to be } 
```

Also you are ending the if loop with a **semicolon ;** .. Need to remove that .. Otherwise the statement in else if and else will never be executed

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T21:07:24.640

How about this:

```
if (content.length !== 5) {

   alert('Please enter a 5 digit zip code!');

} else {

   alert('Valid entry');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:07:11.603

5 is greater than or equal to 5, so the error alert will come up.

You should be using `>` and `<`, instead of `>=` and `<=`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T21:07:38.573

`>=` means *greater than or equal to*, `<=` means *less than or equal to*. Your problem is that if your input is exactly 5 characters long then:

```
if (length >=5) 
```

Will evaluate as true, and you won't get to your else statement.

# mysql - 在不损失性能的情况下获取多个表数据？

> ID：13368758
> 
> 赞同：0
> 
> 时间：2012-11-13T21:04:58.177
> 
> 标签：mysql, performance

我得到了我的表`cars`，第二个表`uploads`有一个`car_id`字段，我可以`LEFT JOIN`这样，所以`uploads.car_id = cars.id`问题来了，`uploads`表，对于某个汽车 ID 的多个记录，然后呢？我必须**在这样的循环**中使用第二个查询？

```
$cars = $PDO->query("SELECT * FROM `cars`")->fetchAll();
foreach($cars as $car)
{
    $uploads = $PDO->query("SELECT * from uploads WHERE id = " . (int)$car['id'])->fetch();
    echo 'My upload file name:' . $uploads['hash'];
} 
```

? 这不是一个好主意，因为`$cars`查询可能一次返回超过 500 条记录......所以这将是一个巨大的性能损失。

所以我的问题是，在这种情况下我能做些什么来防止循环中的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:19:15.413

您可以使用 GROUP BY 和 GROUB_CONCAT sql 函数以更好的性能在一个查询中获得您想要的

尝试 ：

```
$cars = $PDO->query("SELECT cars.id as carID, GROUP_CONCAT(hash) AS hashs FROM uploads left join cars on uploads.car_id = cars.id group by cars.id ")->fetchAll();

foreach($cars as $car)
{
   echo 'Car id '.$car['carID'].'  --  uploaded files name:' . $uploads['hashs'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:19:07.347

为什么不离开加入上传？

使用 Explain 来确定结果，在 mysql 中做了什么：

`explain select * from cars left join uploads on cars.id = uploads.car_id where id=1;`

如果您在 cars.id 和 uploads.car_id 上有索引，这应该是一个快速查询。还要打开查询缓存并观察您的统计数据，看看它是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:25:37.050

只需进行左连接：

```
select c.id, u.hash
from cars c
left join upload u on c.id = u.car_id; 
```

当您有多个`hash`值时`car_id`，您将简单地获得多行。真的不是问题。

# php - 当我将它包含在一个函数中时，一些 PHP 代码无法正确执行，即使变量传递是可以的

> ID：13368759
> 
> 赞同：-2
> 
> 时间：2012-11-13T21:04:59.183
> 
> 标签：php, function, variables

当我这样做时：

```
{some code}
previouslyDeclaredFunction($variable);
{some code} 
```

我可以让 previousDeclaredFunction() 正常工作。

但是当我把它放在一个新函数中时：

```
function newFunction($variable){

echo $variable; //see if var passes in properly
{some code}
previouslyDeclaredFunction($variable);
{some code}

} 
```

..然后调用：

```
newFunction($variable); 
```

..突然它停止工作即使我能够从 newFunction() 中 echo() $variable 就好了，这意味着 newFunction() 被正确调用并且 $variable 被正确传递。显然，除非我删除整个外部功能，否则里面的某些东西将无法工作。PreviouslyDeclaredFunction() 包含在 php 脚本中，它确实从 newFunction() 中调用，但以某种方式对待 $variable 不同，即使 echo() 证明它正在被传入并且与之前的值完全相同。

编辑（好的，这里是真正的代码）：

```
$test_tag = "afro";
cacheBuilder($test_tag); //declaration of function

function cacheBuilder($test_tag) {

$images = array();
$tags = array();
$imagetype = 'Hair';
$per_page = 60;
$orderby_view = FALSE;

echo $test_tag; //this works so var is passed in fine

    $tags2 = $test_tag;
    $tags = explode(',', $test_tag);
    if( count($tags) == 1 && strlen($tags[0]) == 0 ) $tags = array();
    $tag_url = urlencode($tags2);

$cachename = dirname( __FILE__ ) . '/cache-fp/' . $imagetype . '-' . $per_page . '-' . $page . '-' . ($orderby_view ? 'by_view' : 'by_date') . $tag_url . '.json';

    $detailurl = get_option('image_detail_url');
    $detailurl .= (strstr($detailurl, '?') === FALSE ? '?' : '&');
    $json = array();
    $images = array();
    $posts = get_pix($imagetype, array('per_page' => $per_page, 'page' => $page, 'tags' => $tags), $orderby_view);

    foreach( $posts['attachments'] as $ii => $post ) {
        $ta = array();
        $meta = array();
        $imagesrclight2 = array();
        // BWP - Theater mode
        $ta['detail_url'] = $detailurl . 'uid=' . $post->post_author . '&img_id=' . $post->ID . '&theater';

        $meta = get_post_meta(get_the_ID(), 'image_tag', false);
        $ta['image_tags'] = implode(' ', $meta);

        $ta['attachment_image'] = wp_get_attachment_image($image->ID, 'thumbnail'); 
        $imagesrclight2 = wp_get_attachment_image_src($image->ID, array(150, 150)); 
        $ta['attachment_image_src'] = rawurlencode($imagesrclight2[0]);

        $images[] = $ta;
    }

    file_put_contents($cachename, json_encode($images));

} 
```

这有点复杂，它是 Wordpress，所以我希望这不会完全令人困惑。虽然没有错误，但看起来 get_option 和/或 get_pix 在外部函数内部失败了。生成的 json 中没有数据。当我摆脱外部函数时，我得到了 json ，其中填充了应有的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:31:56.113

我想到了。无论出于何种原因，当我将某些 Wordpress 函数（如 get_the_ID() ）放入函数中时，它们都会失败。不知道为什么，但是当我通过除 WP 函数之外的其他方式获取帖子 ID 时，该值进来而不是 null。

# regex - 正则表达式模式匹配和提取

> ID：13368760
> 
> 赞同：-2
> 
> 时间：2012-11-13T21:05:02.030
> 
> 标签：regex, perl

我正在尝试编写一个 perl 正则表达式来提取冒号 : 后大于 2 个字母的单词。例如，如果模式是主题：我要写一个正则表达式。我只需要在我的 $variable 中提取 >2 个字母的单词，即 $variable = "subject:about write regex"。

这是我的程序，其中完成了正则表达式和模式匹配，但是当我打印时，我的变量为空。我究竟做错了什么？

```
#!/usr/bin/perl
while (<STDIN>) {
        foreach my $query_part (split(/\s+/, $_)) {
        my($query_part_subject) = $query_part =~ /([^\w\@\.]+)?((?:\w{3,}|[\$\@()+.])+)(?::(\w{3,}.+))?/ ;
                print "query_part : $query_part_subject \n";

        }

   }

   exit(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:32:00.780

尝试这样做：

```
#!/usr/bin/perl

use strict; use warnings;

while (<DATA>) {
    s/.*?://;
    print join "\n", grep { length($_) > 2 } split;

__DATA__
subject:a bb ccc dddd fffff 
```

**输出**

```
ccc
dddd
fffff 
```

**笔记**

*   根据我对您的问题的理解：我仅在字符后显示长度 > 2 个字符的单词`:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:15:02.197

从你的问题看不清楚。这是你想要的？？

```
$txt='I am about to create regex';

$x='(I)';   
$y='.*?';   
$z='(am)';  

$re1=$x.$y.$z;
if ($txt =~ m/$re1/is)
{
    $var1=$1;
    $word1=$2;
    print "($var1) ($word1) \n";
} 
```

# android - 来自处理程序中运行的代码的 Android ANR？

> ID：13368762
> 
> 赞同：1
> 
> 时间：2012-11-13T21:05:07.990
> 
> 标签：android, multithreading

我前段时间写的一个游戏存在 ANR 问题，调试表明它们归结为 HTTP 请求需要很长时间（从而导致 ANR）。

我认为通过将 HTTP 代码分配到从处理程序中调用的 Runnable 中，我可以避免 ANR - 但似乎情况并非如此？

堆栈转储表明可运行/处理程序代码仍在“主”线程中运行，因此仍会导致 ANR？

它正在执行的任务是异步的（上传高分和成就），因此可以启动并完全留给它自己的设备 - 实现这一点的最佳方法是什么，以免 ANR 成为问题？

一个主题建议应该在 Application 类中而不是在 Game 的 Activity 中创建 Handler - 但我找不到有关这些案例之间差异的任何细节？

所有的想法都非常赞赏。

ps 将此扩展到询问 - 我假设与 HTTP 相关的 ANR 归结为电话服务中断/网络/WiFi，因为我为这些请求设置了 SHORT 超时（它们不是必需的，可以稍后重试！？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:35:22.670

A将在当前线程中`Handler`默认执行代码/处理消息（任何没有`Looper`eg的构造函数）。`new Handler()`在几乎所有情况下，这都是主线程。如果您希望它在不同的线程中执行，您必须告诉它`Looper`应该使用哪个线程。

Android 有一个名为的实用程序类`HandlerThread`，它创建一个`Thread`带有`Looper`.

简短的例子：

```
public class MyActivity extends Activity {
    private Handler mHandler;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        HandlerThread handlerThread = new HandlerThread("background-handler");
        handlerThread.start();
        Looper looper = handlerThread.getLooper();
        mHandler = new Handler(looper);

        mHandler.post(new Runnable() {
            public void run() {
                // code executed in handlerThread
            }
        });
    }
    @Override
    protected void onDestroy() {
        super.onDestroy();
        // stops the HandlerThread
        mHandler.getLooper().quit();
    }
} 
```

如果您的任务只需要一些信息并且不需要报告，我会选择`IntentService`. 如果您的活动生命周期重新创建活动，这些不会发疯。

`Service`你会在它自己的文件中创建一个小文件

```
public class SaveService extends IntentService {
    public SaveService() {
        super("SaveService");
    }
    @Override
    protected void onHandleIntent(Intent intent) {
        if ("com.example.action.SAVE".equals(intent.getAction())) {
            String player = intent.getStringExtra("com.example.player");
            int score = intent.getIntExtra("com.example.score", -1);
            magicHttpSave(player, score); // assuming there is an implementation here
        }
    }
} 
```

将其添加到`AndroidManifest.xml`

```
<application ....

    <service android:name=".SaveService" />
</application> 
```

并在您的代码中以

```
Intent intent = new Intent(this /* context */, SaveService.class);
intent.setAction("com.example.action.SAVE");
intent.putExtra("com.example.player", "John123");
intent.putExtra("com.example.score", 5123);
startService(intent); 
```

`IntentService#onHandleIntent()`已经在后台线程上运行，因此您不必为此烦恼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:19:55.567

您的处理程序在主线程上运行。这就是导致 ANR 的原因。即使你在 Application 中创建它，默认情况下（没有给 Handler 的参数）也会在主线程上创建。您必须创建一个带有自己线程的 Looper。[见这里](http://developer.android.com/reference/android/os/Looper.html)。

使用您自己的 Looper 初始化的处理程序，这是解决 ANR 的可行选项...

如果您将异步网络操作放入[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中，则可以使用更简单的替代解决方案。一种简单的方法是将 AsyncTask 放入您的 Activity 中。更复杂的可能是创建一个服务（非 UI 相关功能的持有者），它进行通信，并在通信结束后从内存中清除自身......

我会使用 AsyncTask 并将其放入活动中/从活动中启动它......

最后，在[这里](http://www.vogella.com/articles/AndroidPerformance/article.html)你可以找到一个很好的关于 android 线程的教程。

# google-app-engine - GAE 产生“UnknownError：ApplicationError：7”

> ID：13368763
> 
> 赞同：2
> 
> 时间：2012-11-13T21:05:09.157
> 
> 标签：google-app-engine, google-cloud-datastore

一个月没改代码。但是今天（2012-11-13）开始出现奇怪的错误“UnknownError：ApplicationError：7”。注意：本地 GAE 功能正常工作。

来自[https://github.com/blueimp/jQuery-File-Upload/blob/master/server/gae-python/main.py的应用程序代码](https://github.com/blueimp/jQuery-File-Upload/blob/master/server/gae-python/main.py)

```
ApplicationError: 7 
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~eventinarea-images/1.362351013166724659/main.py", line 132, in post
    s = json.dumps(self.handle_upload(), separators=(',',':'))
  File "/base/data/home/apps/s~eventinarea-images/1.362351013166724659/main.py", line 90, in handle_upload
    self.write_blob(fieldStorage.value, result)
  File "/base/data/home/apps/s~eventinarea-images/1.362351013166724659/main.py", line 74, in write_blob
    files.finalize(blob)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/files/file.py", line 568, in finalize
    f.close(finalize=True)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/files/file.py", line 291, in close
    self._make_rpc_call_with_retry('Close', request, response)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/files/file.py", line 427, in _make_rpc_call_with_retry
    _make_call(method, request, response)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/files/file.py", line 252, in _make_call
    _raise_app_error(e)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/files/file.py", line 186, in _raise_app_error
    raise UnknownError(e)
UnknownError: ApplicationError: 7 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:28:40.833

我遇到了同样的问题，但它似乎已被默默修复

# java - try-catch 不捕获 IOException

> ID：13368765
> 
> 赞同：4
> 
> 时间：2012-11-13T21:05:19.520
> 
> 标签：java, try-catch, ioexception

在下面的代码中，我得到`Unreachable catch block for IOException`. try 语句体错误（下划线）永远不会引发此异常，其中我在做什么错`IOException`？`} catch (IOException e){`

```
class driver {

  public static void main(String[] args) {
    // TODO Auto-generated method stub
    Customer forrest = new Customer("Forrest Gump", 1,
        "42 New Street, New York, New York");
    Customer random = new Customer("Random Name", 2,
        "44 New Street, New York, New York");
    Customer customer[] = { null, forrest, random };
    int whichOption = 1;
    int id = 0;
    char action = ' ';
    char accSrc = ' ';
    char accDest = ' ';
    double amount = 0;
    BankAccount src = null;
    do {

      try{
        // process JOptionPane input information
        String input = JOptionPane
            .showInputDialog("Please enter your transaction information: ");
        Scanner s = new Scanner(input);
        id = Integer.parseInt(s.next());
        action = Character.toUpperCase((s.next().charAt(0)));

        if (action == 'T') {
          amount = s.nextDouble();
          accSrc = s.next().charAt(0);
          accDest = s.next().charAt(0);
        } else if (action == 'G' || action == 'I') {
          accSrc = s.next().charAt(0);
        } else {
          // if D,W
          amount = s.nextDouble();
          accSrc = s.next().charAt(0);
        }

      } catch (IOException e){

      }
      // taking action accordingly (T)ransfer, (D)eposit, (W)ithdraw, (I)nterest
      if (action == 'T') {

        (customer[id].getAccount(accSrc)).transfer(amount,
            customer[id].getAccount(accDest));
      } else if (action == 'G') {
        System.out.println("The current balance on your " + accSrc
            + " account is "
            + customer[id].getAccount(accSrc).getBalance() + "\n");
      } else if (action == 'D') {
        (customer[id].getAccount(accSrc)).deposit(amount);
      } else if (action == 'W') {
        (customer[id].getAccount(accSrc)).withdraw(amount);
      } else if (action == 'I') {
        (customer[id].getAccount(accSrc)).computeInterest();
      }
      whichOption = JOptionPane
          .showConfirmDialog(null , "Do you want to continue?");

      System.out.println("The balance on " + customer[id].getName()
          + " auto account is " + customer[id].A.balance);
      System.out.println("The balance on " + customer[id].getName()
          + " savings account is " + customer[id].S.balance);
      System.out.println("The balance on " + customer[id].getName()
          + " checkings account is " + customer[id].C.balance);
      System.out.println("The balance on " + customer[id].getName()
          + " loan account is " + customer[id].L.balance + "\n");

    } while (whichOption == 0);

  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T21:07:22.600

It is because none of the operations you perform inside `try/catch` throws IOException.

As per Scanner [javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#Scanner%28java.io.InputStream,%20java.lang.String%29)

Most of the Scanner class methods throws either `FileNotFoundException` (Which is not applicable in your case because not reading from file) (or) `IllegalArgumentException` (or) `IllegalStateException`

You need to change `IOException` to either of above exceptions (or) remove try/catch.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T21:14:04.397

您可以删除 IOException 和 try catch，因为 try catch 中的任何语句都不会引发此异常

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T21:07:25.117

No method call in that try block throws a `IOException`, that is why the catch is an unreachable code.

You can safely remove both the try and the catch, as that situation will never happen.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-13T21:06:58.140

似乎您在该`try`街区所做的任何事情都没有抛出`IOException`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-13T21:12:09.467

您的`catch`块是空的，表明您无论如何都不会真正处理异常。你可能有一些代码让你捕捉到它，但现在你不再拥有它了。只需移除整个周围`try-catch`，不会有进一步的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T21:22:45.217

`try/catch`块是空的，代码不会抛出`IOException`，但它可能会抛出其他异常。

# webdav - 用于 .NET 的 MS Office 和 WebDAV 服务器引擎

> ID：13368767
> 
> 赞同：2
> 
> 时间：2012-11-13T21:05:29.907
> 
> 标签：webdav

在此网站[http://www.webdavsystem.com/server/documentation/ms_office_read_only](http://www.webdavsystem.com/server/documentation/ms_office_read_only)上，它指出，为了打开 MS Office doc 的可写版本，必须满足以下条件：

> 1.  您的 WebDAV 服务器必须在站点根目录上进行配置。

这仍然是真的吗？因为我尝试了 SqlStorage 示例，它工作正常。我在 IIS 7 上部署了应用程序，在 <server>/TestWebDav 和 MS Office 2010 下打开了示例中的文档就好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:13:46.790

我已经在非 root 配置中测试了 IT Hit WebDAV 服务器引擎。我在 Windows 7 上使用 MS Office 2010 作为客户端。我已经测试了基本身份验证和匿名。

在这两种情况下，一切都运行良好。MS Office 能够以读写模式打开文件，文件在编辑后成功保存回服务器。“另存为”没有问题。所有文件操作都在 Windows 资源管理器中进行。

但是使用 Fiddler 工具，我发现有 2 个请求被发送到网站根目录：一个 OPTIONS（我的 IIS 服务器，不是 webdav，返回 200 OK）和一个 PROPFIND 请求（我的 IIS 服务器服务器返回 405 Method Not Allowed）。

一般来说，我可以得出结论，Windows 7 WebDAV 上的 MS Office 2010 可以在非 root 配置下工作。

# wordpress - Wordpress：如何获得插件的文件夹权限

> ID：13368772
> 
> 赞同：1
> 
> 时间：2012-11-13T21:05:41.600
> 
> 标签：wordpress

**已解决**：plugin_dir_path(--FILE--).'MyFolder';

我已经构建了一个 wordpress 插件（wp-content/plugins/MyPlugin），我会检查 MyPlugin 目录中的一些文件夹权限。

我的问题是我不知道应该使用什么 Wordpress 常量或什么 PHP 函数来定位这些目录。

```
if( !is_writable(WP_PLUGIN_URL.'MyFolder') )
{
    echo 'NOK'.'<hr>';  
} 
```

这段代码总是返回 'NOK' 而我 100% 确定 'MyFolder' 实际上是可写的。

您能否在这里给我一些建议以获取正确的文件以定位我的插件目录中的任何文件夹？

谢谢

# java - 认证链只包含一个位置——Java & PKCS11

> ID：13368775
> 
> 赞同：2
> 
> 时间：2012-11-13T21:06:03.263
> 
> 标签：java, certificate, pkcs#11

我正在尝试用我的智能卡签署我的文件。我像这样初始化我的密钥库：

```
String pkcs11config = "name = CertumSmartCard \n" + "library = "
            + new File(".").getAbsolutePath() + "/cryptoCertum3PKCS.dll";
Provider pkcs11Provider = new SunPKCS11(new ByteArrayInputStream(
                pkcs11config.getBytes()));
Security.addProvider(pkcs11Provider);
KeyStore keyStore = KeyStore.getInstance("PKCS11", pkcs11Provider);
keyStore.load(null, pin.toCharArray()); 
```

然后我尝试使用以下方法读取证书链：

```
Enumeration<String> aliasesEnum = keyStore.aliases();
String alias = null;
while (aliasesEnum.hasMoreElements()) {
alias = aliasesEnum.nextElement();
Certificate[] certChain = keyStore.getCertificateChain(alias);
(...)
} 
```

但不幸的是，我的链中只有一个证书（这张卡所有者的证书）。我没有任何受信任的根证书，因此在验证期间我收到一个错误，即文件是使用不受信任的证书签名的。

你有什么主意吗？我应该使用 SunPKSC11 类吗？它不适用于 java 7（我使用 java 6），看起来它已被弃用。有没有其他图书馆可以进入卡片的内脏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T16:43:44.793

实际上这张卡只包含一个证书，所以我的代码可以正常工作。我手动添加了缺少的证书并将它们连接到链中。有了这条链，我可以签署我的文件。我通过从另一个应用程序（proCertum 智能卡）中保存证书丢失了证书，该应用程序正式用于使用这种类型的证书唱歌文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T05:37:22.393

我认为您的问题出在 while 循环内：

```
while (aliasesEnum.hasMoreElements()) {
alias = aliasesEnum.nextElement();
**Certificate[] certChain = keyStore.getCertificateChain(alias);**
(...)
} 
```

## 在这种情况下，您只会获得一个带有最后一个别名的证书。

所以，我建议你把代码改成这样：

```
Certificate[] certChain = new Certificate[NumnberOfYourCertificates];
int count = 0 ;
while (aliasesEnum.hasMoreElements()) {
alias = aliasesEnum.nextElement();
certChain[count++] = keyStore.getCertificateChain(alias);
(...)
} 
```

我认为它会起作用。

# windows-phone-7 - 为什么我的变量不表现为 IEnumerable？

> ID：13368778
> 
> 赞同：0
> 
> 时间：2012-11-13T21:06:13.200
> 
> 标签：windows-phone-7, azure, azure-storage

我从 Nuget Packages 安装了适用于 Windows Phone 的 Windows Azure 存储客户端。我想列出容器的名称。为什么不将我的“st”变量视为 IEnumerable？ ![在此处输入图像描述](../Images/0f20efecc9dbd932405862d776720807.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:08:19.053

确保您已导入[`System.Linq`](http://msdn.microsoft.com/en-us/library/system.linq.aspx)命名空间（例如，如下所示）

```
using System;
using System.Collections.Generic;
using System.Linq; 
```

# php - PHP：更新 ID 为“x”的图像的数据库“num_views”

> ID：13368783
> 
> 赞同：0
> 
> 时间：2012-11-13T21:06:26.520
> 
> 标签：php, mysql

当单击“Paging.php”中的某个图像时，我想增加一个页面浏览量（“num_views”）数据库值，这样我就可以跟踪该图像被查看了多少次

分页.php：

```
while ($imageCounter < $imagesPerPage && ($row = $catResult->fetch_assoc())) {
    echo    "<br />ID: " . $row['imgid'] . 
            '<br /><a href="./templates/viewcomic.php?views='. $row['num_views'].'&id=' . $row['imgid'] . '&image=' . $imgpath.$row['imgname'] . '"><img src="' . $thumbpath.$row['imgthumb'] . '"/></a>' . 
            "<br />CATFK: " . $row['catfk'] . 
            "<br/>";

    $imageCounter++;
} 
```

ViewComic.php

```
<?php
include 'include/header.php';

$imgid = $_GET['id']; 
$views = $_GET['views'];

include '../scripts/dbconnect.php'; 
$mysqli->query("UPDATE child_images SET num_views = ($views+1) WHERE imgid = $imgid");
mysqli_close($mysqli);
?> 
```

虽然它似乎没有增加

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T21:08:23.127

一种更简单的方法是只增加已发布到数据库中的值。这样您就不必担心查询字符串中的数据操作。

```
$imgid= $mysqli->real_escape_string($imgid);    
$mysqli->query("UPDATE child_images SET num_views = num_views + 1 WHERE imgid = $imgid");
mysqli_close($mysqli); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:08:30.770

只需这样做：

```
$mysqli->query("UPDATE child_images SET num_views = (num_views+1) WHERE imgid = $imgid"); 
```

# java - 模拟 2 个使用 Mockito 实现接口的类的适当方法是什么？

> ID：13368784
> 
> 赞同：0
> 
> 时间：2012-11-13T21:06:30.073
> 
> 标签：java, unit-testing, junit, tdd, mockito

我有 2 个实现一个接口的类。

```
public interface DataAccess { /*....*/ }
public class DataAccessCache implements DataAccess { /*...*/ }
public class DataAccessMemory implements DataAccess { /*...*/ } 
```

现在我有另一个名为`CPU`封装`DataAccessCache`和`DataAccessMemory`（都是私有实例变量）的类，例如：

```
private DataAccessCache cache;
private DataAccessMemory memory; 
```

为了模拟这两个类，我有 2 个 setter 方法：

```
public void setDataAccessCache( DataAccessCache cache ) {
    this.cache = cache;
}

public void setDataAccessMemory( DataAccessMemory memory ) {
    this.memory = memory;
} 
```

我想测试`put(String key, String value)`将`key-value`配对放入内存和缓存的 CPU 方法。我想确保在 CPU 的 put 方法中调用缓存的 put 方法和内存的 put 方法。我正在这样测试（使用 Mockito）：

```
public void test() {
    CPU cpu = new cpu();
    DataAccessCache cache = mock( DataAccessCache.class );
    DataAccessMemory memory = mock( DataAccessMemory.class );
    when( cache.put("key", "value") ).thenReturn(true);
    when( memory.put("key", "value") ).thenReturn(true);
    cpu.setDataAccessCache( cache );
    cpu.setDataAccessMemory( memory );
    cpu.put("key", "value");
    verify( cache ).put("key", "value");
    verify( memory ).put("key", "value");
} 
```

但是，测试结果表明存在错误：

```
java.lang.NullPointerException
at CPU.put(Unknown Source)
at CPUTest.test(Unknown Source) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:21:58.757

你应该在最后验证你的模拟。

```
 public void test() {
    CPU cpu = new cpu();
    DataAccessCache cache = mock( DataAccessCache.class );
    DataAccessMemory memory = mock( DataAccessMemory.class );
    cpu.setDataAccessCache( cache );
    cpu.setDataAccessMemory( memory );
    cpu.put("key", "value");
    verify( cache ).put("key", "value");
    verify( memory ).put("key", "value");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:35:00.040

试试这样：

```
public void test() {
    CPU cpu = new cpu();
    DataAccessCache cache = spy( new DataAccessCache() );
    DataAccessMemory memory = spy( new DataAccessMemory() );
    //when( cache.put("key", "value") ).thenReturn(true);
    doReturn(true).when(cache).put(eq("key"), eq("value"));
    //when( memory.put("key", "value") ).thenReturn(true);
    doReturn(true).when(memory).put(eq("key"), eq("value"));
    cpu.setDataAccessCache( cache );        
    cpu.setDataAccessMemory( memory );
    cpu.put("key", "value");
    verify( cache ).put("key", "value");
    verify( memory ).put("key", "value");
} 
```

我没有把它放到 IDE 中，只是从头顶输入，但我认为我做对了。试试看。

# ios - PhoneGap/Cordova 2.2.0 Facebook 插件在 IOS FB.init 上失败

> ID：13368785
> 
> 赞同：1
> 
> 时间：2012-11-13T21:06:31.667
> 
> 标签：ios, facebook, cordova, facebook-javascript-sdk, phonegap-plugins

我正在开发一个 PhoneGap 2.2.0/IOS 应用程序并且需要使用 FaceBook 插件'我按照 GIT 中所述的安装过程进行操作，当我使用示例文件夹中的“简单”示例时，我得到了设备就绪对话框，告诉我将我的 appID 放在适当的位置，我这样做了，然后我按 OK 并且应用程序被 IOS 抛出，并出现以下错误：

```
'com.facebook.sdk:InvalidOperationException', reason: 'FBSession: No AppID provided; either pass an AppID to init, or add a string valued key with the appropriate id named FacebookAppID to the bundle *.plist' 
```

听到的是我的 FB.init

```
 document.addEventListener('deviceready', function() {

                              try {
                              alert('Device is ready! Make sure you set your app_id below this alert.');
                              FB.init({ appId: "fb245065455620705", nativeInterface: CDV.FB, useCachedDialogs: false });
                              document.getElementById('data').innerHTML = "";
                              } catch (e) {
                              alert(e);
                              }
                              }, false); 
```

这是添加到我的 plist 文件中的条目

```
<key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLName</key>
            <string>com.mdsitg.amisrael</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>fb245065455620705</string>
            </array>
        </dict>
    </array> 
```

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:28:04.507

你的问题出在这条线上

```
FB.init({ appId: "fb245065455620705", nativeInterface: CDV.FB, useCachedDialogs: false }); 
```

它应该是：

```
FB.init({ appId: "245065455620705", nativeInterface: CDV.FB, useCachedDialogs: false }); 
```

请注意，“fb”不应是 App ID 的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T06:25:05.353

我发现了问题，它在我的 projectname.plist 上我缺少所需的元素之一，我在执行说明时跳过了它谢谢你的帮助，我现在有一个带有 PhoneGap/Cordova 2.2 的基本 IOS。 0 与 FaceBook 插件工作，如果任何机构需要一个我很高兴给它

这是解决我的问题的 plist 的源代码

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>English</string>
    <key>CFBundleDisplayName</key>
    <string>עמישראל</string>
    <key>CFBundleExecutable</key>
    <string>${EXECUTABLE_NAME}</string>
    <key>CFBundleIconFile</key>
    <string>icon.png</string>
    <key>CFBundleIconFiles</key>
    <array>
        <string>icon-1.png</string>
        <string>icon-72@2x.png</string>
        <string>icon114.png</string>
    </array>
    <key>CFBundleIcons</key>
    <dict>
        <key>CFBundlePrimaryIcon</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>icon-1.png</string>
                <string>icon-72@2x.png</string>
                <string>icon114.png</string>
            </array>
            <key>UIPrerenderedIcon</key>
            <false/>
        </dict>
    </dict>
    <key>CFBundleIdentifier</key>
    <string>com.mdsitg.amisrael</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleShortVersionString</key>
    <string>1.0</string>
    <key>CFBundleSignature</key>
    <string>????</string>
    <key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLName</key>
            <string>com.mdsitg.amisrael</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>fb245065455620705</string>
            </array>
        </dict>
    </array>
    <key>CFBundleVersion</key>
    <string>1.0</string>
    <key>FacebookAppID</key>
    <string>245065455620705</string>
    <key>LSRequiresIPhoneOS</key>
    <true/>
    <key>NSMainNibFile</key>
    <string></string>
    <key>NSMainNibFile~ipad</key>
    <string></string>
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
    </array>
    <key>UISupportedInterfaceOrientations~ipad</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
        <string>UIInterfaceOrientationLandscapeLeft</string>
        <string>UIInterfaceOrientationPortraitUpsideDown</string>
        <string>UIInterfaceOrientationLandscapeRight</string>
    </array>
</dict>
</plist> 
```

如果您需要更多帮助，请问我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:23:07.847

您是否尝试将 FacebookAppID 键/值添加到您的 *-info.plist？

转到[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)并单击：

5：配置一个新的 XCode 项目。

向下滚动到：“添加您的 Facebook 应用 ID”

本质上，您需要找到您的 projectname-info.plist 并添加一个新的键/值对。键是 FacebookAppID，值是您的应用程序 ID 245065455620705（前面没有 FB。）

# ruby-on-rails-3 - NoMethodError（nil:NilClass 的未定义方法“文本”）这是怎么回事？

> ID：13368787
> 
> 赞同：0
> 
> 时间：2012-11-13T21:06:35.367
> 
> 标签：ruby-on-rails-3

这个错误出现在我的 heroku 日志中，我不确定发生了什么。该应用程序无法正常运行，并且在许多不同的位置出现故障。奇怪的是，这种情况不知从何而来。过去 7 天内未进行任何更改。周五一切正常，这意味着此错误在过去 4 天的某个时间开始发生。

是否有任何可能在周末更改/更新的 gem 依赖项可能导致此错误？

发布的是错误

```
Started POST "/advisors/4fbfb0b5ce5da90001000038/intro" for 64.20.10.252 at 2012-11-13 20:24:54 +0000
2012-11-13T20:24:54+00:00 app[web.1]: Cache read: delayed_job_workers ({:expires_in=>1200 seconds})
2012-11-13T20:24:54+00:00 app[web.1]: Cache generate: delayed_job_workers ({:expires_in=>1200 seconds})
2012-11-13T20:24:54+00:00 app[web.1]:  !    DEPRECATED: Heroku::Client#deprecate is deprecated, please use the heroku-api gem.
2012-11-13T20:24:54+00:00 app[web.1]:  !    DEPRECATED: More information available at https://github.com/heroku/heroku.rb
2012-11-13T20:24:54+00:00 app[web.1]:  !    DEPRECATED: Deprecated method called from /app/vendor/bundle/ruby/1.9.1/gems/heroku-2.31.0/lib/heroku/client.rb:247.
2012-11-13T20:24:57+00:00 app[web.1]: 
2012-11-13T20:24:57+00:00 app[web.1]: NoMethodError (undefined method `text' for nil:NilClass):
2012-11-13T20:24:57+00:00 app[web.1]:   lib/my_company/delayed_job_wrapper.rb:70:in `block in running_workers'
2012-11-13T20:24:57+00:00 app[web.1]:   lib/my_company/delayed_job_wrapper.rb:68:in `running_workers'
2012-11-13T20:24:57+00:00 app[web.1]:   lib/my_company/delayed_job_wrapper.rb:23:in `autostart'
2012-11-13T20:24:57+00:00 app[web.1]:   lib/my_company/delayed_job_wrapper.rb:17:in `feed'
2012-11-13T20:24:57+00:00 app[web.1]:   app/models/user.rb:101:in `block in introduce'
2012-11-13T20:24:57+00:00 app[web.1]:   app/models/user.rb:100:in `each'
2012-11-13T20:24:57+00:00 app[web.1]:   app/models/user.rb:100:in `introduce'
2012-11-13T20:24:57+00:00 app[web.1]:   app/controllers/advisors_controller.rb:66:in `intro' 
```

宝石文件

```
source 'http://rubygems.org'

require 'rubygems'

source 'https://code.stripe.com'

gem 'rails', '3.1.3'

gem 'thin'
gem 'newrelic_rpm'

gem "mongo", '1.5.2'
gem "mongoid", '2.4.3'

gem 'memcachier'
gem 'dalli'

gem 'delayed_job'
gem 'delayed_job_mongoid'

gem 'rack-cache'
#gem 'SystemTimer' #Not necessary, but memcache recommends it for performance.
#gem 'memcached-northscale', '0.17.1' #Notice it's memcached, with a D.

gem "heroku"

gem 'json'

#gem 'libxml-ruby'
#gem 'sqlite3-ruby', '1.2.5', :require => 'sqlite3'

gem 'ruby-hmac'
gem 'bcrypt-ruby'

gem 'bson_ext'

gem 'aws-sdk'

gem 'oauth2'

gem 'oauth'

gem 'stripe'

gem 'paperclip'
gem 'mongoid-paperclip'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.1.5'
#  gem 'coffee-rails', '~> 3.1.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

gem 'fb_graph'

group :development do
  gem 'rspec-rails', '2.7.0'
end

group :test do
  gem "rspec", "2.7.0"
  gem 'turn', '0.8.2', :require => false

  gem "autotest"
  gem "autotest-rails"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:59:51.030

问题是 Heroku gem 已被弃用，所以我将 gemfile 中的 gem "heroku" 替换为 "heroku-api"

# ruby-on-rails - rails passenger + apache segmentation bug

> ID：13368796
> 
> 赞同：0
> 
> 时间：2012-11-13T21:06:58.153
> 
> 标签：ruby-on-rails, apache, passenger

Ive got a problem with running rails on apache + passenger. When I goto the site, I get in the /var/log/apache:

```
[Tue Nov 13 21:54:21 2012] [notice] Apache/2.2.16 (Debian) Phusion_Passenger/2.2.11 configured -- resuming normal operations
/usr/local/rvm/gems/ruby-1.9.2-p320/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2010-08-16 patchlevel 302) [x86_64-linux]

*** Exception EOFError in spawn manager (Unexpected end-of-file detected.) (process 22878):
    from /usr/lib/ruby/1.8/phusion_passenger/utils.rb:306:in `unmarshal_and_raise_errors'
    from /usr/lib/ruby/1.8/phusion_passenger/rack/application_spawner.rb:71:in `spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/rack/application_spawner.rb:41:in `spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:159:in `spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:287:in `handle_spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `__send__'
    from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `main_loop'
    from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:196:in `start_synchronously'
    from /usr/lib/phusion_passenger/passenger-spawn-server:61
/usr/local/rvm/gems/ruby-1.9.2-p320/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2010-08-16 patchlevel 302) [x86_64-linux]

*** Exception EOFError in spawn manager (Unexpected end-of-file detected.) (process 22944):
    from /usr/lib/ruby/1.8/phusion_passenger/utils.rb:306:in `unmarshal_and_raise_errors'
    from /usr/lib/ruby/1.8/phusion_passenger/rack/application_spawner.rb:71:in `spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/rack/application_spawner.rb:41:in `spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:159:in `spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:287:in `handle_spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `__send__'
    from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `main_loop'
    from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:196:in `start_synchronously'
    from /usr/lib/phusion_passenger/passenger-spawn-server:61
[ pid=22882 file=ext/apache2/Hooks.cpp:727 time=2012-11-13 21:54:26.950 ]:
  Unexpected error in mod_passenger: Cannot spawn application '/home/xxx/xxx/xxx': The spawn server has exited unexpectedly.
  Backtrace:
     (empty)
/usr/local/rvm/gems/ruby-1.9.2-p320/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2010-08-16 patchlevel 302) [x86_64-linux]

*** Exception EOFError in spawn manager (Unexpected end-of-file detected.) (process 22950):
    from /usr/lib/ruby/1.8/phusion_passenger/utils.rb:306:in `unmarshal_and_raise_errors'
    from /usr/lib/ruby/1.8/phusion_passenger/rack/application_spawner.rb:71:in `spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/rack/application_spawner.rb:41:in `spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:159:in `spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:287:in `handle_spawn_application'
    from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `__send__'
    from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `main_loop'
    from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:196:in `start_synchronously'
    from /usr/lib/phusion_passenger/passenger-spawn-server:61
[ pid=22881 file=ext/apache2/Hooks.cpp:727 time=2012-11-13 21:54:28.23 ]:
  Unexpected error in mod_passenger: Cannot spawn application '/home/xxx/xxx/xxx': The spawn server has exited unexpectedly.
  Backtrace:
     (empty) 
```

I really don't know what it is. Application is running ok when I write rails server.

any clue for this issue? :(

best regards

# javascript - How to find multivariable regression equation in javascript

> ID：13368805
> 
> 赞同：7
> 
> 时间：2012-11-13T21:07:38.870
> 
> 标签：javascript, math, regression

I have searched stack overflow and have not found any question that really is the same as mine because none really have more than one independent variable. Basically I have an array of datapoints and I want to be able to find a regression equation for those data points. The code I have so far looks like this: (w,x,z are the independent variables and y is the dependent variable)

```
var dataPoints = [{
 "w" : 1, "x" : 2, "z" : 1, "y" : 7
}, {
 "w" : 2, "x" : 1, "z" : 4, "y" : 5
}, {
 "w" : 1, "x" : 5, "z" : 3, "y" : 2
}, {
 "w" : 4, "x" : 3, "z" : 5, "y" : 15
}]; 
```

I would like a function that would return a formula object like this:

```
var regressionEquation = [{
 "var" : "w", "power" : 1, "coeff" : "1.5"
}, {
 "var" : "x", "power" : 1, "coeff" : "2"
}, {
 "var" : "z", "power" : 1, "coeff" : "1"
}]; 
```

Is there a way to come up with a regression equation like this without using a loop to step and plug in the values? Is there a way to come up with the regression equation for powers that are more than 1? Thanks in advance.

EDIT

Many people have suggested solving a system of equations made by plugging in the powers. The problem I have with this is when there is more than enough data points to solve for a system of equations. In the examples in the question, I have 3 variables in order to solve the system of equations that people are suggesting, I would need 3 datapoints but I have 4\. This leads to a problem because there is more than one solution. There are 4 possible solutions because there are 4 ways to combine the 4 equations into different groups of 3\. This would leave me with 4 answers with possibly none of them the best fit to all 4 points.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:55:18.693

您所说的问题在转换下等效于线性回归问题。你在评论中说你有固定的指数`k_1`,`k_2`和`k_3`。转换需要一个 tuple`{w, x, z ,y}`到 tuple `{w^k_1, x^k_2, z^k_2, y} = {w', x', z' ,y}`。对引物变量使用线性回归来获得系数。

例如，如果`k_1 = 2`、`k_2 = 3`和`k_3 = 1`，那么这里是一个变换的例子：

```
{"w" : 4, "x" : 3, "z" : 5, "y" : 15} 
==> {"w*" : 16, "x*" : 27, "z*" : 5, "y" : 15} 
```

这只是将[多项式回归](http://en.wikipedia.org/wiki/Polynomial_regressions)问题转换为线性回归问题的一种特殊情况。在您的情况下，您正在考虑的多项式形式特别简单。

使用任何你喜欢的 JavaScript 库来解决线性回归问题；其中有很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:29:22.340

我认为如果是有四个方程并且只有 3 个变量的情况（因为你已经确定了幂、插件并使它成为一个线性方程），那么线性方程就已经完成了，并且不存在一个确切的答案可以满足所有四个方程。

您可以做的是最小化残差并获得最佳近似值。

假设你有 wx 和 z 的系数 ab 和 c，

定义矩阵

```
M=[w1,x1,z1;w2,x2,z2;w3,x3,z3;w4,x4,z4]. 
```

并定义向量

```
v=[a;b;c], 
```

定义向量

```
r=[y1;y2;y3;y4]. 
```

那么问题来了

```
M*v=r solve v. 
```

**1.**如果rank(M)>variable number，你必须最小化残差

```
||M*v-r||_2\. 
```

由于这是凸的，因此对其求导并使其为零：

```
M^T*M*v-M^T*r=0 => v=(M^T*M)\M^T*r. 
```

(M^T*M)\M^T 是 M 的 MP-inverse，如果 rank(M)> 变量数，则 (M^T*M) 是可逆的。

**2.**如果rank(M)<=变量数，你可以得到方程的无限多个精确解。

```
M*v=r. 
```

让 M 的奇异值分解：

```
M=U*S*V^T, 
```

然后

```
v=V*S^-1*U^T*r 
```

是解决方案之一。

V*S^-1*U^T 是 M 的伪逆。

如果您使用线性代数库，则无需迭代就很容易获得封闭形式的解决方案。[http://sylvester.jcoglan.com/](http://sylvester.jcoglan.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T11:10:35.077

我建议使用最小二乘法来获得线性方程。此外，您可以使用非线性最小二乘法，前提是您事先知道要拟合的函数。

(http://en.wikipedia.org/wiki/Least_squares)

在 javascript 中有几个线性 LS 的链接，您可以将它们调整为 3 维（例如，来自快速 Google 搜索的[http://dracoblue.net/dev/linear-least-squares-in-javascript/159/ ）。](http://dracoblue.net/dev/linear-least-squares-in-javascript/159/)对于非线性情况，它需要更多的工作。

# mongodb - cakephp not connecting to mongodb

> ID：13368808
> 
> 赞同：0
> 
> 时间：2012-11-13T21:07:50.150
> 
> 标签：mongodb, cakephp-2.1

I have successfully added mongodb to my server and I am able to work from the mongo shell no problem, I can also connect to the database from php just fine. I have also downloaded and semi successfully installed the plugin for mongodb and cakephp. However I am now stuck with cakephp not able to connect to the database. I have followed both ichikawa's github and mark story's web page on the subject but neither has helped get over this hump. Does anyone have any suggestions on what I should try to get this hooked up and running?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:55:07.990

我遇到了这个问题，一个朋友找到了一个链接，告诉我们替换 /app/Plugin/Mongodb/Model/Datasource/MongodbSource.php 的第 185 行。这是旧线和新线。

```
// $this->connection = new Mongo($host, array("persist" => $this->config['persistent']));
$this->connection = new Mongo($host); 
```

我可以尝试找到 URL，但解决方案在上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T07:10:46.163

因为你的服务器使用的是 mongodb driver 1.x。让我们修复：

在 app/Plugin/Monggodb/MongodbSource.php（第 197 行）中，找到：

```
else if ($this->_driverVersion >= '1.3.0') {
                $this->connection = new $class($host);  // mongodb 2.x             
            } 
```

代替：

```
else if ($this->_driverVersion >= '1.3.0' && $this->_driverVersion < '2.0') {
$this->connection = new $class("mongodb://loginID:password@IP"); // mongodb 1.5.6, loginID: your mongodb user login;     
} 
```

使用上面的代码，您更改了连接字符串，因为连接字符串在 mongo 2.x 和 1.x 之间有所不同

选对了就投票吧！乐趣！

# sql - PostgreSQL 中的窗口函数尾随日期

> ID：13368809
> 
> 赞同：3
> 
> 时间：2012-11-13T21:07:50.337
> 
> 标签：sql, postgresql, window-functions

我正在尝试编写一个查询来比较给定计算机今天的平均连接数与 7 到 14 天前的平均连接数。我认为这最好由窗口函数处理，但我无法获得正确的日期语法。

假设我有一个名为 iptable 的 IP 地址和连接记录表，其中包含 soucreip、destinationip、timestamp 作为列。这是我在前 7 天窗口中尝试的查询，以获取每个 sourceip 的计数：

```
select 
  sourceip, 
  destinationip, 
  timestamp, 
  count(*) OVER (PARTITION BY sourceip order by timestamp
                 RANGE BETWEEN now() - '7 day'::Interval PRECEDING
                               now() - '14 day'::Interval FOLLOWING)
from
 iptable; 
```

编写此类查询的最佳方法是什么？窗口函数方法是否有意义，或者是否有更优化的方法来处理大型表的情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T00:37:02.010

您的部分问题是您选择了一个糟糕的列名，`"timestamp"`. `timestamp`是内置数据类型的名称，因此要将其用作列名，您必须`"double quote"`在任何地方使用它。

不过，这还不是全部。您的窗口函数语法错误。请参阅[窗口函数语法](http://www.postgresql.org/docs/current/static/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS)。你忘了`AND`; 它是`RANGE BETWEEN .. PRECEDING AND ... FOLLOWING`。

此外，虽然这不是问题的原因，但您应该使用 SQL 标准`current_timestamp`而不是`now()`.

这会让你遇到一个新错误：

```
CREATE TABLE iptable ( sourceip cidr, destinationip cidr, "timestamp" timestamptz);

regress=> select 
  sourceip, 
  destinationip, 
  timestamp, 
  count(*) OVER (PARTITION BY sourceip order by "timestamp" RANGE BETWEEN current_timestamp - '7 day'::Interval PRECEDING AND current_timestamp - '14 day'::Interval FOLLOWING)

from
 iptable;
ERROR:  RANGE PRECEDING is only supported with UNBOUNDED
LINE 5: ... OVER (PARTITION BY sourceip order by "timestamp" RANGE BETW...
                                                             ^ 
```

这表明当前的窗口函数实现不会做你想做的事。可悲的是。

> 值 PRECEDING 和值 FOLLOWING 情况目前仅允许在 ROWS 模式下使用。它们指示帧以当前行之前或之后的行数开始或结束。value 必须是不包含任何变量、聚合函数或窗口函数的整数表达式。

相反，我只是在输入行上使用`GROUP BY`带有过滤器的普通文本。`WHERE`

```
select 
  sourceip,
  count(sourceip) AS n_conns_7_to_14_days_ago
from
 iptable
WHERE age("timestamp") BETWEEN INTERVAL '7' DAY AND INTERVAL '14' DAY
GROUP BY sourceip; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T00:43:14.327

要得到 ...

> 7 到 14 天前的平均连接数

```
SELECT sourceip, destinationip, timestamp, count(*) AS ct
FROM   iptable
WHERE  "timestamp" BETWEEN now() - '14 day'::interval
                   AND     now() -  '7 day'::interval
GROUP BY 1,2,3; 
```

只需使用普通的聚合函数。
并且不要`timestamp`用作列名。它是SQL 标准中的[受保护字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)，部分保留在 PostgreSQL 中。

# highcharts - Highcharts 在带有类别的折线图上绘制偏移量

> ID：13368811
> 
> 赞同：0
> 
> 时间：2012-11-13T21:08:02.397
> 
> 标签：highcharts

我怎样才能有一个带有类别的折线图，但在类别标签之间绘制线条？有没有办法将绘图偏移到刻度宽度的开头？这是一个示例： http: [//jsfiddle.net/jMcfG/1/](http://jsfiddle.net/jMcfG/1/) 我希望这条线从 x 轴的原点开始，就像类别不存在时一样。

```
$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },
    xAxis: {
        categories: ['0', '1', '2', '3', '4']
    },

    series: [{
        data: [0,3,2,5]        
    }]
}); 
```

});​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:50:03.057

您可以使用阈值属性将图表粘贴到底部。像这样：

```
$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
        },
        plotOptions: {
        series: {
            threshold: 0
        },

    },
        xAxis: {
            categories: ['0', '1', '2', '3', '4'],
        },
        series: [{
            data: [0,3,2,5] 
        }]
    });
});​ 
```

[http://jsfiddle.net/jMcfG/5/](http://jsfiddle.net/jMcfG/5/)

对于 x 轴，使用 API 是不可能的。您将需要进行一些自定义编程。如果存在类别，它会以图表为中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:07:01.873

我确实找到了另一种解决方案，即添加一个镜像第一个图的假想点，然后将 x 轴 min 设置为 1 以将其切掉，因此该图将穿过原点并且仅在正侧可见。 [http://jsfiddle.net/jMcfG/7/](http://jsfiddle.net/jMcfG/7/)

```
$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },
    xAxis: {
        min: 1,
        categories: ['-13', '0', '1', '2', '3', '4']
    },
    yAxis: {
        min: 0,
        minPadding: 1
    },

    series: [{
        data: [-1,1,3,2,5]        
    }]
}); 
```

});​</p>

# jquery - fadein and fadeout div in a loop - jquery

> ID：13368815
> 
> 赞同：1
> 
> 时间：2012-11-13T21:08:10.600
> 
> 标签：jquery, fadein, fade, fadeout

I have the following jquery which will fade elements in and out in order :

```
var $zfader = jQuery.noConflict();
$zfader(document).ready(function(){
$zfader('.fadethis .fade');
    setInterval(function(){
        $zfader('.fadethis .fade').filter(':visible').fadeOut(2000,function(){
            if($zfader(this).next('.fade').size()){
                $zfader(this).next().fadeIn(1000);
            }
            else{
                $zfader('.fadethis .fade').eq(0).fadeIn(1000);
            }
        });
    },10000);   
}); 
```

html :

```
 <div class="container fadethis">
        <div class="fade">number one</div>
        <div class="fade" style="display:none">number two</div>
    </div> 
```

The problem is I do not want to use the display:none... I was thinking setting a position:absolute on .fade so they are all 'on top' of each other and acheiving the same effect with opacity? Secondly, I want to ensure if JavaScript is off that only the first shows...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:34:36.603

如果您关心的是搜索引擎优化，那么您如何使 div 不那么明显并不重要，如果它被认为难以看到并因此可能会造成关键字填充，则会伤害您。像 Google 这样的搜索引擎不只是检查 display:none；而且如果文本与背景颜色相同，文本的不透明度太低等。

如果您担心 SEO，您可能需要重新考虑您的设计。为什么要这种淡化效果？它是否有助于您的信息布局？用户是否觉得他们能够更好地访问信息？如果没有，请重新设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:43:49.360

如果你想要 seo，但是当 javascript 被禁用时你不希望元素显示，你可以~~在屏幕外绘制~~元素，使用一个类最小化元素，如下所示：

```
.minimize
{
 position: absolute;
 height: 0px;
 width: 0px;
}​ 
```

然后像这样在脚本中删除该类：

```
$zfader('.minimize').removeClass('minimize'); 
```

您可以更改一些样式以使元素重叠，如下所示：

```
style="position:absolute;vertical-align:top;" 
```

这是最终的解决方案（以 jsfiddle 为例）

html:

```
<div>Some Space</div>
<div class="container fadethis">
 <div class="fade" style="position:absolute;vertical-align:top;">number one</div>
 <div class="fade minimize" style="position:absolute;vertical-align:top;">number two</div>
</div>​ 
```

CSS：

```
.minimize
{
 position: absolute;
 height: 0px;
 width: 0px;
}  ​ 
```

js：

```
var $zfader = jQuery.noConflict();
$zfader(document).ready(function(){
 $zfader('.fadethis .fade').eq(1).hide();
 $zfader('.minimize').removeClass('minimize');
 setInterval(function(){
  var hidden = $zfader('.fadethis .fade').filter(':hidden');
  var visible = $zfader('.fadethis .fade').filter(':visible');
  visible.fadeOut(2000,function(){
   hidden.fadeIn(1000);
  });
 },10000);
});​ 
```

jsfiddle 示例：http: [//jsfiddle.net/3FQDL/4/](http://jsfiddle.net/3FQDL/4/)

# windows - Can't block inbound traffic on Windows 2008 Server using advanced firewall settings

> ID：13368824
> 
> 赞同：1
> 
> 时间：2012-11-13T21:08:31.680
> 
> 标签：windows, firewall

I have a problem with windows 2008 advanced firewall settings. When i try to block inbound traffic it's not working correctly.

For example: I made a rule for inbound traffic:

```
Local port: All ports
External port: 80
Action: block

```

If I open a webpage using internet explorer, the website is opened just fine, while it shouldn't open because I blocked the inbound traffic on port 80

Is there a reason for this? Am I doing something wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:12:14.823

在 OUTBOUND 流量中声明规则。您配置它的方式不允许您网络上的某人连接您的端口 80（Web 服务器）。

因此，如果您想禁止浏览器导航，则必须阻止端口 80 上的出站流量

PD：您还应该检查入站/出站流量的默认设置是什么。如果您在默认情况下都允许，那么正在发生的事情就是我之前解释的。您的出站流量是允许的，因此您可以浏览网页，并且您的入站流量是允许的，但是您有一个规则阻止端口 80，因此没有人可以远程登录您的计算机或从端口 80 中的网络服务器（如果可用）获取信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:01:49.010

如果您的请求是网络服务器本地的（来自 127.0.0.1）。AFAIK 如果请求来自同一台计算机，则根本没有防火墙规则处于活动状态（使用 Windows 防火墙）。即使您设置了阻止它们的规则，所有端口都是打开的。

因此，要尝试您的规则，您必须从不同的 IP 拨打电话。有很多在线工具，例如： http: [//ping.eu/port-chk/](http://ping.eu/port-chk/)

# javascript - Multiple mesh with one geometry and different textures. Error

> ID：13368826
> 
> 赞同：1
> 
> 时间：2012-11-13T21:08:40.387
> 
> 标签：javascript, geometry, textures, three.js, mesh

I have a loop where I create a multiple Mesh with different geometry, because each mesh has one texture:

```
var geoCube = new THREE.CubeGeometry(voxelSize, voxelSize, voxelSize);
var geometry = new THREE.Geometry();

for( var i = 0; i < voxels.length; i++ ){
  var voxel = voxels[i];
  var object;
  color = voxel.color; 
  texture = almacen.textPlaneTexture(voxel.texto,color,voxelSize); 
  //Return the texture with a color and a text for each face of the geometry
  material = new THREE.MeshBasicMaterial({ map: texture });                       
  object = new THREE.Mesh(geoCube, material);

  THREE.GeometryUtils.merge( geometry, object );
}

//Add geometry merged at scene
mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial() );
mesh.geometry.computeFaceNormals();
mesh.geometry.computeVertexNormals();
mesh.geometry.computeTangents();

scene.add( mesh ); 
```

But now I have this error in the javascript code Three.js

Uncaught TypeError: Cannot read property 'map' of undefined

In the function:

```
function bufferGuessUVType ( material ) {
} 
```

Update:

Finally I have removed the merged solution and I can use an unique geometry for the all voxels. Altough I think that If I use merge meshes the app would have a better performance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:10:31.467

对于 r53+，代码应该是这样的：

```
var geoCube = new THREE.CubeGeometry(voxelSize, voxelSize, voxelSize);
var geometry = new THREE.Geometry();
var materials = [];

for( var i = 0; i < voxels.length; i++ ){

  for ( var j = 0; j < geoCube.faces.length; j ++ ) {
    geoCube.faces[ j ].materialIndex = i;
  }

  var object = new THREE.Mesh( geoCube );
  // here I assume you'll me positioning the object.
  THREE.GeometryUtils.merge( geometry, object );

  var voxel = voxels[i];
  var texture = almacen.textPlaneTexture(voxel.texto,voxel.color,voxelSize);
  materials.push( new THREE.MeshBasicMaterial( { map: texture } ) );

}

// Add geometry to scene

var mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( materials ) );
mesh.geometry.computeFaceNormals();
mesh.geometry.computeVertexNormals();

scene.add( mesh ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:05:55.653

一些方法期望材料阵列位于网格面材料中。例如：

```
function getBufferMaterial( object, geometryGroup ) {

    return object.material instanceof THREE.MeshFaceMaterial
        ? object.material.materials[ geometryGroup.materialIndex ]
        : object.material;

}; 
```

可以通过在几何体和网格面材质中引用材质阵列来处理此问题。所以创建网格的线看起来像：

```
mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial(geometry.materials) ); 
```

并在处理体素的循环中：

```
geometry.materials.push( new THREE.MeshBasicMaterial({ map: texture })); 
```

几何体中的每个面也需要分配一个materialIndex，否则会出错。如果您知道每个体素有多少个面，循环遍历 geometry.faces[] 并分配一个 materialIndex 可能是一个好方法。

# objective-c - NSManagedObject 到 NSDictionary

> ID：13368830
> 
> 赞同：1
> 
> 时间：2012-11-13T21:08:53.413
> 
> 标签：objective-c, core-data, ios6, nsmanagedobject

尝试序列化`NSManagedObject`以`NSDictionary`包含相关数据。

我在这里找到了一些代码：http: [//vladimir.zardina.org/2010/03/serializing-archivingunarchiving-an-nsmanagedobject-graph/](http://vladimir.zardina.org/2010/03/serializing-archivingunarchiving-an-nsmanagedobject-graph/)

不幸的是，不支持`NSOrderedSet`. 试图自己实现它，但是由于 message doesn't identify selector on line 导致崩溃`if (!relatedObject.traversed) {`。

```
- (NSDictionary*) toDictionary
{
    self.traversed = YES;

    NSArray* attributes = [[[self entity] attributesByName] allKeys];
    NSArray* relationships = [[[self entity] relationshipsByName] allKeys];
    NSMutableDictionary* dict = [NSMutableDictionary dictionaryWithCapacity:
                                 [attributes count] + [relationships count] + 1];

    [dict setObject:[[self class] description] forKey:@"class"];

    for (NSString* attr in attributes) {
        NSObject* value = [self valueForKey:attr];

        if (value != nil) {
            [dict setObject:value forKey:attr];
        }
    }

    for (NSString* relationship in relationships) {
        NSObject* value = [self valueForKey:relationship];

        if ([value isKindOfClass:[NSSet class]]) {
            // To-many relationship

            // The core data set holds a collection of managed objects
            NSSet* relatedObjects = (NSSet*) value;

            // Our set holds a collection of dictionaries
            NSMutableSet* dictSet = [NSMutableSet setWithCapacity:[relatedObjects count]];

            for (ExtendedManagedObject* relatedObject in relatedObjects) {
                if (!relatedObject.traversed) {
                    [dictSet addObject:[relatedObject toDictionary]];
                }
            }

            [dict setObject:dictSet forKey:relationship];
        }
        else if ([value isKindOfClass:[NSOrderedSet class]]) {
            // To-many relationship

            // The core data set holds a collection of managed objects
            NSOrderedSet* relatedObjects = (NSOrderedSet *)value;

            // Our set holds a collection of dictionaries
            NSMutableSet* dictSet = [NSMutableSet setWithCapacity:[relatedObjects count]];

            for (ExtendedManagedObject* relatedObject in relatedObjects) {
                if (!relatedObject.traversed) {
                    [dictSet addObject:[relatedObject toDictionary]];
                }
            }

            [dict setObject:dictSet forKey:relationship];
        }
        else if ([value isKindOfClass:[ExtendedManagedObject class]]) {
            // To-one relationship

            ExtendedManagedObject* relatedObject = (ExtendedManagedObject*) value;

            if (!relatedObject.traversed) {
                // Call toDictionary on the referenced object and put the result back into our dictionary.
                [dict setObject:[relatedObject toDictionary] forKey:relationship];
            }
        }
    }

    return dict;
}

- (void) populateFromDictionary:(NSDictionary*)dict
{
    NSManagedObjectContext* context = [self managedObjectContext];

    for (NSString* key in dict) {
        if ([key isEqualToString:@"class"]) {
            continue;
        }

        NSObject* value = [dict objectForKey:key];

        if ([value isKindOfClass:[NSDictionary class]]) {
            // This is a to-one relationship
            ExtendedManagedObject* relatedObject =
                [ExtendedManagedObject createManagedObjectFromDictionary:(NSDictionary*)value
                                                               inContext:context];

            [self setValue:relatedObject forKey:key];
        }
        else if ([value isKindOfClass:[NSSet class]]) {
            // This is a to-many relationship
            NSSet* relatedObjectDictionaries = (NSSet*) value;

            // Get a proxy set that represents the relationship, and add related objects to it.
            // (Note: this is provided by Core Data)
            NSMutableSet* relatedObjects = [self mutableSetValueForKey:key];

            for (NSDictionary* relatedObjectDict in relatedObjectDictionaries) {
                ExtendedManagedObject* relatedObject =
                    [ExtendedManagedObject createManagedObjectFromDictionary:relatedObjectDict
                                                                   inContext:context];
                [relatedObjects addObject:relatedObject];
            }
        }
        else if (value != nil) {
            // This is an attribute
            [self setValue:value forKey:key];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-01T04:49:22.107

这是快速简便的方法

```
NSMutableArray *array = [NSMutableArray arrayWithCapacity:ManagedObjectItems.count];
[[ManagedObjectItems allObjects] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    Diary_item_food *food = obj;
    NSArray *keys = [[[food entity] attributesByName] allKeys];
    NSDictionary *dict = [obj dictionaryWithValuesForKeys:keys];
    [array addObject:dict];
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T09:15:09.840

我在 Gihub 上找到了现成的要点：[https ://gist.github.com/nuthatch/5607405](https://gist.github.com/nuthatch/5607405)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T20:50:59.413

更简单的方法是查询 objectID 并在获取请求上使用 NSDictionaryResultType。

更新：仅当您不需要相关数据时。

# ios - Apple Distribution Certificates last for two years now?

> ID：13368833
> 
> 赞同：3
> 
> 时间：2012-11-13T21:09:13.470
> 
> 标签：ios, app-store, enterprise, ad-hoc-distribution, in-house-distribution

According to the Apple developer documentation, each distribution certificate only lasts for one year:

> "A distribution certificate is valid for one year from date of issue." [http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html)

I just created a new distribution certificate today (in an Enterprise portal), and it seems to be valid for two years? Has Apple changed something recently?

# gwt - 为什么带有 UiBinder 的 GWT Designer 会搞乱这个简单的对话框？

> ID：13368834
> 
> 赞同：1
> 
> 时间：2012-11-13T21:09:26.620
> 
> 标签：gwt, uibinder, gwt-designer

我正在使用 Eclipse 3.7、GWT 2.5、Java 1.6 和最新的 GPE。我已经使用了很多 UiBinder，现在我们正在研究将 GWT Designer 用于我们应用程序的下一个版本。我创建了一个基本的 Web 应用程序项目并让它生成它的示例代码。然后新建->GWT Designer->GWT UiBinder->对话框。然后我添加了一个按钮来生成弹出窗口，以及对话框的大小和标题。这是小部件代码：

```
public class TestPopup extends DialogBox {

    private static final Binder binder = GWT.create(Binder.class);
    @UiField FlowPanel flowPanel;

    interface Binder extends UiBinder<Widget, TestPopup> {
    }

    public TestPopup() {
        setWidget(binder.createAndBindUi(this));
        setTitle("Test Popup Title");
        setPixelSize(400, 300);
    }

} 
```

和相应的 *ui.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
    <ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder' xmlns:g='urn:import:com.google.gwt.user.client.ui'>
        <ui:style>
            .panel {
                padding: 5px;
                border: 5px solid cornflowerblue;
                background-color: Menu;
            }
        </ui:style>

        <g:FlowPanel styleName="{style.panel}" ui:field="flowPanel" width="100%" height="100%"/>
    </ui:UiBinder> 
```

这就是结果。谁能解释这些工具如何将一个简单的配置破解成这样：

![GWT 设计师乱七八糟](../Images/380b4bd9e166467992a02ddc65894100.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T04:03:59.263

这是一个已知[问题](http://code.google.com/p/google-web-toolkit/issues/detail?id=2595)。当您尝试专门设置它们的大小时，DecoratorPanel 和 DecoratedPopupPanel 小部件会出现此类问题。不要指定对话框的大小。相反，请指定 DialogBox 的子 Widget 的大小，并且 DialogBox 应该很好地匹配它。

# jquery-deferred - 将 jQuery.when 与延迟对象数组一起使用会导致局部变量发生奇怪的事情

> ID：13368836
> 
> 赞同：1
> 
> 时间：2012-11-13T21:09:40.147
> 
> 标签：jquery-deferred

假设我有一个站点，它通过对服务的 HTTP 调用保存电话号码，并且该服务返回电话号码条目的新 id 以绑定到页面上的电话号码。

在这种情况下，电话存储在一个名为“电话”的数组中，datacontext.telephones.updateData 在 $.Deferred([service call logic]).promise(); 中将电话发送到服务器。

```
uploadTelephones = function (deffered) {
                for (var i = 0; i < telephones.length; i++){
                        deffered.push(datacontext.telephones.updateData(telephones[i], {
                            success: function (response) {
                                telephones[i].telephoneId = response;                                    
                            },
                            error: function () {
                                logger.error('Stuff errored');
                            }
                        }));                            
                 }
            } 
```

现在，如果我打电话：

```
function(){
    var deferreds = [];
    uploadTelephones(deferreds);
    $.when.apply($, deferreds)
                    .then(function () {
                        editing(false);
                        complete();
                    },
                    function () {
                        complete();
                    });
} 
```

奇怪的事情发生了。所有电话都被发送回服务并被保存。当调用uploadTelephones方法中的'success'回调，新的id为'response'时，无论查询涉及哪个电话，i的值始终为telephones.length+1和line

```
telephones[i].telephoneId = response; 
```

抛出错误，因为电话[i] 不存在。

谁能告诉我如何在成功回调中保留 i 的各个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:01:28.670

您的所有闭包（您的匿名函数在本地范围内捕获变量）都引用相同的索引变量，该变量将具有`telephones.length`after loop execution 的值。您需要为每次`for`循环创建一个不同的变量，保存`i`创建实例的值以供以后使用。

要创建一个新的不同变量，最简单的方法是使用代码创建一个匿名函数，该函数用于捕获循环中特定位置的值并立即执行它。

要么这个：

```
for (var i = 0; i < telephones.length; i++)
{
    (function () {
        var saved = i;
        deffered.push(datacontext.telephones.updateData(telephones[saved],
        {
            success: function (response)
            {
                telephones[saved].telephoneId = response;
            },
            error: function ()
            {
                logger.error('Stuff errored ');
            }
        }));
    })();
} 
```

或这个：

```
for (var i = 0; i < telephones.length; i++)
{
    (function (saved) {
        deffered.push(datacontext.telephones.updateData(telephones[saved],
        {
            success: function (response)
            {
                telephones[saved].telephoneId = response;
            },
            error: function ()
            {
                logger.error('Stuff errored ');
            }
        }));
    })(i);
} 
```

应该管用。

不过，现在这有点难看。由于您已经一遍又一遍地执行匿名函数的过程，如果您希望代码更简洁，您可能需要查看[Array.forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)并使用传入的任何参数，或者只使用[jQuery.each](http://api.jquery.com/jQuery.each/)因为您已经在使用 jQuery。

# php - Default conditions and columns with Doctrine

> ID：13368837
> 
> 赞同：0
> 
> 时间：2012-11-13T21:09:42.220
> 
> 标签：php, symfony, doctrine

I'm using Symfony2 with Doctrine. I have tons of entities (tables) and here's what I'm trying to accomplish:

**PROBLEM**

Every entity needs to have 2 fields (columns), for example `from_date` and `to_date` by default. Suppose I have the following entity defined in the `product.orm.yml` file:

```
Some\Random\Namespace\Product:
    type: entity
    table: product
    id:
        id:
            type: integer
            generator:
                strategy: AUTO
    fields:
        name:
            type: string
            length: 255
        description:
            type: text
        price:
            type: float 
```

After I would run `doctrine:schema:update` the created table should already have `from_date` and `to_date` columns. Now, lets say I'm trying to fetch all the products from the database. I would do it like so:

```
$products = $this->getDoctrine()->getRepository('SomeRandomBundle:Product')->findAll(); 
```

This would normally fetch ALL the products from the database. What I would like to do, is to fetch only products where `from_date` <= `some_date` <= `to_date`. There would be a function `getSomeDate()` that Doctrine would have to call in order, to get the value of `some_date`. Not that it should also work with custom queries written in DQL or if I do something like this

```
$products = $this->getDoctrine()->getRepository('SomeRandomBundle:Product')->findByPrice(20); 
```

However, it should not affect cases, where I try to fetch the entity by it's PK using the find method or custom DQL query.

**ADDITIONAL DETAILS**

There would also be some entities, that would not follow the above rules.

I know I could create `from_date` and `to_date` in every entity + perform the check, but since there will be thousands of queries in the application it would only make code less readable.

**GOAL**

The goal of the above is to allow user, to see the state of the application as it was, anywhere in the past. If you know a different approach that can achieve the same goal it would also be great.

Thank you for your time!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:30:53.390

1.  要将自定义字段添加到您的所有实体，您可以

    *   将[mappedSupperclass](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#mapped-superclasses)与其他字段一起使用
    *   使用[loadClassMetadata](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/events.html#load-classmetadata-event)事件监听器/订阅者
2.  要在获取数据时进行额外检查，您还可以设置[自定义存储库](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/working-with-objects.html#custom-repositories)类，其中 findAll/findBy 使用自定义 DQL 和额外检查

3.  要在执行 DQL 查询时添加其他检查，您可以指定[DQL 自定义 walkers](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/dql-custom-walkers.html)

# django - Django-CMS - 全球占位符？

> ID：13368848
> 
> 赞同：6
> 
> 时间：2012-11-13T21:10:19.767
> 
> 标签：django, placeholder, django-cms

有没有办法在我的基本模板中制作全局占位符？我需要它在每个页面（横幅列表）上都相同。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T21:49:14.327

我通常在我的 CMS 中创建一个未发布的页面，但包含我想在其他地方使用的占位符（页脚/页眉）等。

制作一个新模板**extra_placeholders.html**：

```
{% extends "base.html" %}
{% load cms_tags %}

{% block content %}
    {% placeholder "Banner-List" %}
{% endblock %} 
```

将其添加到您的设置中：

```
CMS_TEMPLATES = (
    ('my/path/extra_placeholders.html', 'Extra Placeholder Page'),
    ...
) 
```

现在转到管理员并使用您想要的任何插件创建占位符。然后转到您所有其他页面继承的基本模板（可能是***base.html ），并将其添加到您希望占位符出现的任何位置：**

```
{% load cms_tags %}
...
{% show_placeholder "Banner-List" "extra_placeholders" %} 
```

[您可以在文档中阅读更多相关信息](https://django-cms.readthedocs.org/en/2.1.3/advanced/templatetags.html#show-placeholder)

* * *

**编辑**

正如@José L. Patiño 在评论中提到的那样，此解决方案仅适用于使用`django-cms`< 3.0 的用户。对于较新的版本，您可以简单地使用[`static_placeholder`](https://django-cms.readthedocs.org/en/latest/advanced/templatetags.html#static-placeholder)模板标签

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-17T06:08:13.920

现在有“static_placeholders”，[http ://docs.django-cms.org/en/latest/reference/templatetags.html#static-placeholder](http://docs.django-cms.org/en/latest/reference/templatetags.html#static-placeholder)

听起来这就是你以前需要的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T02:42:16.210

您可以使用以下方式为所有页面创建一个全局占位符。

1.  在基本页面上创建一个占位符。{% 占位符“页脚”%}
2.  通过django cms制作占位符的内容作为首页
3.  然后为每个占位符页面显示相同的内容，添加 {% show_placeholder "footer" "home"%}，这意味着从主页较早地显示新创建的页脚占位符，
4.  这将在使用模板的所有页面的主页上显示现有页脚占位符的全部内容。
5.  但是首页会有两个页脚显示，为了mengilangkannya，请修改使用CSS隐藏master占位符。

# javascript - 多层谷歌融合表启用地图提示

> ID：13368851
> 
> 赞同：1
> 
> 时间：2012-11-13T21:10:30.767
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

我已经在下面的代码上工作了一段时间，当鼠标悬停在标记上时，无法让 MapTips 为标记工作。

```
<html>
<head>
<style>
  #map_canvas { width: 500px; height: 400px; }
</style>
<link href="../stylesheet.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/src/fusiontips_compiled.js"></script>
<script type="text/javascript">
var map;

var layer;
var tableid = 5463275;

var layer2;
var tableid2 = 5492676;

function initialize() {
  map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: new google.maps.LatLng(51.500000, -0.090000),
    zoom: 9,
    mapTypeControl: false,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  });

  layer = new google.maps.FusionTablesLayer(tableid, {
  suppressInfoWindows: true
});
  layer.setQuery("SELECT 'geometry' FROM " + tableid);
  layer.setMap(map);

  layer2 = new google.maps.FusionTablesLayer(tableid2);
  layer2.setQuery("SELECT 'Full Address' FROM " + tableid2);
  layer2.setMap(map);
  layer2.enableMapTips({
                select: "'Site Name'",
                from: tableid, 
                geometryColumn: 'Full Address', 
                suppressMapTips: false, 
                delay: 100, 
                tolerance: 6 });

  var legendDiv = document.createElement('DIV');
  var legend = new Legend(legendDiv, map);
  legendDiv.index = 1;
  map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legendDiv);
}

</script>

</head>
<body onLoad="initialize();">

<div id="map_canvas"></div>
</body>
</html>​ 
```

该地图由两个融合表图层组成 - 我已链接到包含以下标记数据的表：

[标记融合表](https://www.google.com/fusiontables/DataSource?docid=1DAinKntOVh4WOC4y-dBPtuS-dKq5lxWMOC8qE8E "标记融合表")

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:01:45.200

您错过了 周围的引号`'Full Address'`，因此查询未正确编码并引发错误。我[在 jsFiddle 上放了一个工作示例](http://jsfiddle.net/odi86/yaVQ2/)。

这是更正的部分：

```
layer2.enableMapTips({
    select: "'Site Name'",
    from: tableid, 
    geometryColumn: "'Full Address'", 
    suppressMapTips: false, 
    delay: 100, 
    tolerance: 6 
}); 
```

[首先，我尝试更新您的代码以使用加密的表 ID，但似乎FusionTips 脚本](http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/docs/examples.html)尚不支持。

# javascript - 获取自定义协议响应

> ID：13368852
> 
> 赞同：6
> 
> 时间：2012-11-13T21:10:42.220
> 
> 标签：javascript, http, protocols, response

几天来我一直在学习自定义协议，但有一件事我不明白。我知道如何使用自定义协议启动应用程序，但我的问题是，
**是否可以使用 javascript 在 Web 浏览器中获取应用程序响应并打印它？**
例如，如果我将向协议**myapp://**发送请求，这将打开一个用 C# 编写的应用程序，并且该应用程序将返回字符串“这是响应”可以在 Web 浏览器中打印它吗？
如果是这样，你能帮我完成它吗？
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:14:09.663

互联网协议不仅仅与浏览器有关。

**mailto：**在电子邮件程序中引起动作（例如开始新的电子邮件）

**ftp：**在 FTP 程序中执行操作（*可能*集成到 Web 浏览器或 Windows 资源管理器中）

**gopher：（** 嗯，[这](http://en.wikipedia.org/wiki/Gopher_%28protocol%29)不再流行了）

**myapp://**将导致您的 (C#) 应用程序开始运行。那时，它可以做任何 C# 应用程序可以做的事情。它可以选择做的一件事是在磁盘上创建一个 .html 文件，然后使用

```
Process.Start("file://Path/To/My.html") 
```

使默认 Web 浏览器打开它刚刚创建的文档。

**更新**

您当然可以让您的 myapp:// 协议处理程序向托管相关页面的 Web 服务器发送更新。我在这里的假设是 myapp:// 处理程序在客户端计算机上运行，​​并且在不同的 URL [http://mydomain.com](http://mydomain.com)上有一个 Web 服务器，为包含 myapp:// 引用的页面提供服务。

1.  Web 服务器呈现一个包含 myapp:// URL 和 Ajax 代码的页面，以定期查询 Web 服务器以获取对部分 HTML 正文的更新。
2.  用户点击 myapp:// URL
3.  协议处理程序运行
4.  协议处理程序向 Web 服务器发送更新，例如`http://mydomain.com?user=joe&result=123`
5.  Web 服务器用于`?user=joe&result=123`在下次启动 Ajax 回调时更新响应
6.  Ajax 回调从 Web 服务器获取页面的更新数据，更新页面。

# javascript - jquery动画和case随机事件

> ID：13368853
> 
> 赞同：-1
> 
> 时间：2012-11-13T21:10:56.380
> 
> 标签：javascript, jquery, animation, case

我制作了这个脚本，但不喜欢工作。我测试了一个案例，一切都很好，但是当我进入切换模式时，鼠标停止它的检测，并在某个时间工作，并且动画同时在案例 1：和案例 2：...

```
function muovi(){
var caso = Math.floor((Math.random()*2)+1);
alert (caso);
switch(caso){
case 1:
//go on and stop to see me
$(".vola").css("background-image", "url(img/gif/sx.gif)");
$(".vola").animate({"left": "+=300px"}, 10000);
setTimeout(function(){$(".vola").css("background-image", "url(img/sprite/fr1.png)")}, 10001);  
setTimeout(function(){$(".vola").animate.stop()}, 10002);
case 2:
//go back and sto to see me
$(".vola").css("background-image", "url(img/gif/dx.gif)");
$(".vola").animate({"left": "-=300px"}, 10000);
setTimeout(function(){$(".vola").css("background-image", "url(img/sprite/fr1.png)")}, 10001);  
setTimeout(function(){$(".vola").animate.stop()}, 10002);
}
} 
```

这是一个CSS：

```
.vola{
    background: url(img/sprite/sprite1dx.png);
    background-repeat: no-repeat;
    position: fixed;
    height: 61px;
    width: 31px;
    bottom: 10px;
    left: 0px;
} 
```

而这个，htlm 有趣的地方：

... div class="vola" onClick"muovi();"> ... idk 是什么造成的，对我来说很难理解，因为 case1 和 case2 同时工作 O__O

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:18:11.373

您的`case`陈述缺少`break;`s。

```
$(function(){

    $('div.vola').on('click', function(){
        return window.muovi();
    });

    window.muovi = function(){
        var caso = Math.floor((Math.random()*2)+1);
        alert (caso);
        switch(caso){
            case 1:
                //go on and stop to see me
                $(".vola").css("background-image", "url(img/gif/sx.gif)");
                $(".vola").animate({"left": "+=300px"}, 10000);
                setTimeout(function(){
                    $(".vola").css("background-image", "url(img/sprite/fr1.png)");
                }, 10001);
                setTimeout(function(){
                    $(".vola").stop();
                }, 10002);
            break;
            case 2:
                //go back and sto to see me
                $(".vola").css("background-image", "url(img/gif/dx.gif)");
                $(".vola").animate({
                    "left": "-=300px"
                }, 10000);
                setTimeout(function(){
                    $(".vola").css("background-image", "url(img/sprite/fr1.png)");
                }, 10001);
                setTimeout(function(){
                    $(".vola").stop();
                }, 10002);
            break;
            default:
                alert('Hello?');
        }
    }
}); 
```

# javascript - 使用 Javascript 函数的简单按钮测试

> ID：13368857
> 
> 赞同：1
> 
> 时间：2012-11-13T21:11:04.477
> 
> 标签：javascript, button, onclick

我刚刚在 Codecademy.com 上完成了对 JavaScript 的学习，我正在尝试一个带有 html 按钮的简单功能。我的问题是我想我不明白我学到的 JS 如何等同于可用代码，我搜索了这些论坛并尝试了 document.getElementById.onclick 方法，我尝试使用 onClick="adventure();" 在按钮本身，我无法得到任何工作。请向我解释如何将 JS 应用于按钮，以便它在浏览器中工作。谢谢你。

```
<!doctype html>
<html>

    <head>

        <script type="text/javascript">

        document.getElementById("adv").onclick = adventure();

        function adventure() {

            if (confirm('I am ready to play!')) {

            var age = prompt("What's your age?");

            if(age < 18) {
                console.log('I cannot stop you from playing, but do so at your own risk!');
            } else {
                console.log('You have a great challenge, ahead. Brace yourself.' + "\r\n");
            }

            console.log("You are walking down the street and you see Shawn beating up your friends and stealing their candy. You feel as though it is your duty to respond. You walk up to him and say, 'Hey, Shawn, knock it off!" + "\r\n");

            console.log("Shawn glares at you." + "\r\n");

            var choice1 = function() {
            var userAnswer = prompt("Do you wish to fight?" + "\r\n");

            if(userAnswer !== "yes" || userAnswer !== "no") {
                console.log("You must choose 'yes' or 'no'.");
                choice1();
            } else if (userAnswer === "yes") {
                console.log("As you go to kick Shawn, he grabs your leg and slams you to the pavement. As the world turns black and your eyes slowly close, you feel the end is near. You cry, and then perish. Goodbye!");
            } else {
                console.log("Good choice, weakling. By playing the coward you will survive. Now where's my beer?");
            }

            };
        }

        </script>

    </head>

    <body>

        <input id="adv" type="button" onclick="adventure();" value="Start Your Adventure" />

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:15:50.167

问题是这一行：

```
document.getElementById("adv").onclick = adventure(); 
```

在定义标签之前没有意义。尝试删除此行，因为您已经从属性调用`adventure`函数。`onclick`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:25:14.850

Tengiz 和 David 的两个答案都是部分正确的，但是您的代码缺少“}”，choice1 没有被关闭。我创建了一个小提琴来演示。删除您的内联 onclick，一切都应该很好。

```
document.getElementById("adv").onclick = adventure;
function adventure() {

            if (confirm('I am ready to play!')) {

            var age = prompt("What's your age?");

            if(age < 18) {
                console.log('I cannot stop you from playing, but do so at your own risk!');
            } else {
                console.log('You have a great challenge, ahead. Brace yourself.' + "\r\n");
            }

            console.log("You are walking down the street and you see Shawn beating up your friends and stealing their candy. You feel as though it is your duty to respond. You walk up to him and say, 'Hey, Shawn, knock it off!" + "\r\n");

            console.log("Shawn glares at you." + "\r\n");

            var choice1 = function() {
                var userAnswer = prompt("Do you wish to fight?" + "\r\n");
            }
            if(userAnswer !== "yes" || userAnswer !== "no") {
                console.log("You must choose 'yes' or 'no'.");
                choice1();
            } else if (userAnswer === "yes") {
                console.log("As you go to kick Shawn, he grabs your leg and slams you to the pavement. As the world turns black and your eyes slowly close, you feel the end is near. You cry, and then perish. Goodbye!");
            } else {
                console.log("Good choice, weakling. By playing the coward you will survive. Now where's my beer?");
            }

            };
        } 
```

[http://jsfiddle.net/UuBSj/9/](http://jsfiddle.net/UuBSj/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:13:27.313

您必须确保在创建 DOM 元素*后*查询它们。script 标签在元素被实例化之前被执行。所以将代码包装在一个`.onload`：

```
 window.onload = function() {
     ...
 }; 
```

此外，`adventure();`在这种情况下会提前调用该函数。将函数传递为`adventure`：

```
document.getElementById('adv') = adventure; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T21:24:00.280

删除以下行

```
document.getElementById("adv").onclick = adventure(); 
```

因为你有

```
<input id="adv" type="button" onclick="adventure();" value="Start Your Adventure" /> 
```

`onclick="adventure();"`或者您可以从输入元素中删除内联事件处理程序并可以使用

```
window.onload=function(){
    document.getElementById("adv").onclick = adventure;
}
function adventure()
{
    // code goes here
} 
```

有关更高级的事件处理[**，请查看此**](http://www.quirksmode.org/js/events_advanced.html)。

# ios - AddRecord TableView 控制器 -->MasterTableView 控制器 --> 第二个（过滤）TableView 控制器 --> DetailView 控制器

> ID：13368860
> 
> 赞同：1
> 
> 时间：2012-11-13T21:11:17.657
> 
> 标签：ios, uitableview, navigationcontroller

我是 iOS 编程（和一般编程）的新手。我正在尝试基于 Apple 提供的 Birdsighting 示例（http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html）做一个 iPhone 应用程序。不同之处在于我将在 AddWorkout TableView 控制器中创建 Body Building 的锻炼（而不是 Birdsightings），将锻炼传递给主 TableView 控制器，然后通过选择锻炼的单元格从那里能够显示第二个 TableView 控制器，类似于大师的，显示按肌肉带分类的锻炼事件；然后，选择一个肌肉带单元，使用该肌肉带锻炼的所有相关参数（锻炼类型、重量、序列号......）推动一个 DetailView 控制器。

问题是我无法在第二个 TableView 控制器 (MuscleBandViewController) 上传递新记录，因此我也不能将它推送到 detailViewController。有什么建议吗？我被困了一个星期直到现在（对不起我的英语不好：我是意大利人）。 **这是我的 DataController.h 代码：**

```
#import <Foundation/Foundation.h>
@class Workouts;

@interface IFitDataController : NSObject

@property (nonatomic, copy)NSMutableArray *masterWorkoutsList;
@property (nonatomic, copy)NSMutableArray *masterMuscleBandList;

- (NSUInteger)countOfList;
- (NSUInteger)countOfMuscleBandList;
- (Workouts *)objectInListAtIndex:(NSUInteger)theIndex;
- (Workouts *)objectInMasterMuscleBandListAtIndex:(NSUInteger)index;
- (void)addWorkoutsWithWorkouts:(Workouts *)thisWorkout;
@end 
```

**这里DataController.m：**

```
#import "IFitDataController.h"
#import "Workouts.h"

@interface IFitDataController ()
- (void)initializeDefaultDataList;

@end

@interface IFitDataController ()
- (void)initializeMuscleBandDataList;

@end
@implementation IFitDataController

- (void)initializeDefaultDataList {

    NSMutableArray *workoutsList = [[NSMutableArray alloc] init];
    self.masterWorkoutsList = workoutsList;
    Workouts *thisWorkout;
    NSDate *today = [NSDate date];
    thisWorkout = [[Workouts alloc] initWithName:@"Pectorals" exercise:@"Pectoral Machine" series:@"3" nActionsInSerie:@"10" measure:@"Kg"  weight:@"25" date:today comment:@"Add your comment"];
    [self addWorkoutsWithWorkouts:thisWorkout];
}

- (void)setMasterWorkoutsList:(NSMutableArray *)newList {

    if (_masterWorkoutsList != newList) {
        _masterWorkoutsList = [newList mutableCopy];
    }
}

- (void)initializeMuscleBandDataList {

    NSMutableArray *muscleBandList = [[NSMutableArray alloc]init];
    self.masterMuscleBandList = muscleBandList;
    Workouts *thisWorkout;
    NSDate *today = [NSDate date];
    thisWorkout = [[Workouts alloc] initWithName:@"Pectorals" exercise:@"Pectoral Machine" series:@"3" nActionsInSerie:@"10" measure:@"Kg"  weight:@"25" date:today comment:@"Add your comment"];
    [self addWorkoutsWithWorkouts:thisWorkout];
}

- (void)setMasterMuscleBandList:(NSMutableArray *)newMuscleBandList {

    if ((_masterMuscleBandList != newMuscleBandList)) {
        _masterMuscleBandList = [newMuscleBandList mutableCopy];
    }
}

- (id)init {

    if (self = [super init]) {
        [self initializeDefaultDataList];
        [self initializeMuscleBandDataList];
        return self;
    }

    return nil;
}

- (NSUInteger)countOfList {

    return [self.masterWorkoutsList count];

}

- (NSUInteger)countOfMuscleBandList {

    return [self.masterMuscleBandList count];
}

- (Workouts *)objectInListAtIndex:(NSUInteger)theIndex {

    return [self.masterWorkoutsList objectAtIndex:theIndex];
}

- (Workouts *)objectInMasterMuscleBandListAtIndex:(NSUInteger)index {

    return [self.masterMuscleBandList objectAtIndex:index];
}

- (void)addWorkoutsWithWorkouts:(Workouts *)thisWorkout {

    [self.masterWorkoutsList addObject:thisWorkout];
    [self.masterMuscleBandList addObject:thisWorkout];
}
@end 
```

**这是我的 AddWorkoutViewController.h：**

```
#import <UIKit/UIKit.h>

#define muscleBandComponent 0
#define exercisesComponent 1
@class Workouts;

@interface AddWorkoutViewController : UITableViewController <UITextFieldDelegate, UIPickerViewDelegate, UIPickerViewDataSource> {

    IBOutlet UIPickerView *exercisePicker;
    IBOutlet UITextView *commentInserted;
    NSArray *_exercisesForPicker;
    NSArray *_muscleBandForPicker;
    NSDictionary *totalExercises;
}

@property (weak, nonatomic) IBOutlet UITextField *muscleBandName;
@property (weak, nonatomic) IBOutlet UITextField *exerciseName;
@property (weak, nonatomic) IBOutlet UILabel *nSeries;
@property (weak, nonatomic) IBOutlet UILabel *measureType;
@property (weak, nonatomic) IBOutlet UILabel *nActionsInSerie;
@property (weak, nonatomic) IBOutlet UILabel *weightPerformed;
@property (strong, nonatomic) IBOutlet UITextView *commentInserted;

@property (retain, nonatomic) IBOutlet UIPickerView *exercisePicker;
@property (retain, nonatomic) NSArray *muscleBandForPicker;
@property (retain, nonatomic) NSDictionary *totalExercises;
@property (retain, nonatomic) NSArray *exercisesForPicker;

- (IBAction)nSeriesStepper:(id)sender;

- (IBAction)nActionsSerieStepper:(id)sender;

- (IBAction)weightStepper:(id)sender;

- (void) closeKeyboard;

@property (strong, nonatomic) Workouts *workout;
@end 
```

**这是我的 AddWorkoutViewController.m：**

```
#import "AddWorkoutViewController.h"

#import "Workouts.h"

#import "IFitDataController.h"

@interface AddWorkoutViewController ()

@end

@implementation AddWorkoutViewController
@synthesize exercisePicker;
@synthesize totalExercises;
@synthesize exercisesForPicker;
@synthesize muscleBandForPicker;

@synthesize nSeries;
@synthesize nActionsInSerie;
@synthesize weightPerformed;
@synthesize commentInserted;

- (IBAction)nSeriesStepper:(id)sender {

    self.nSeries.text = [NSString stringWithFormat:@"%d", [[NSNumber numberWithDouble:[(UIStepper *)sender value]] intValue]];

}
- (IBAction)nActionsSerieStepper:(id)sender {

    self.nActionsInSerie.text = [NSString stringWithFormat:@"%d", [[NSNumber numberWithDouble:[(UIStepper *)sender value]] intValue]];
}
- (IBAction)weightStepper:(id)sender {

    self.weightPerformed.text = [NSString stringWithFormat:@"%d", [[NSNumber numberWithDouble:[(UIStepper *)sender value]] intValue]];
}

- (IBAction) go:(id)sender
{

    [self closeKeyboard];
    }

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"ReturnInput"]) {
        if ([self.exerciseName.text length] || [self.muscleBandName.text length]) {
            Workouts *thisWorkout;

            NSDate *today = [NSDate date];
            thisWorkout = [[Workouts alloc] initWithName:self.muscleBandName.text exercise:self.exerciseName.text series:self.nSeries.text nActionsInSerie:self.nActionsInSerie.text measure:self.measureType.text  weight:self.weightPerformed.text date:today comment:self.commentInserted.text];
            self.workout = thisWorkout;
        }
    }
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {

    if ((textField == self.exerciseName) || (textField == self.muscleBandName)) {

        [textField resignFirstResponder];

    }

    return YES;
}

- (void) closeKeyboard
{
    if([commentInserted isFirstResponder])
    {
        [commentInserted resignFirstResponder];
    }

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        // Initialization code
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSBundle *bundle = [NSBundle mainBundle];
    NSString *plistPath = [bundle pathForResource:@"muscleBands" ofType:@"plist"];
    NSDictionary *dictionary = [[NSDictionary alloc] initWithContentsOfFile:plistPath];
    self.totalExercises = dictionary;

    NSArray *components = [self.totalExercises allKeys];
    NSArray *sorted = [components sortedArrayUsingSelector:@selector(compare:)];
    self.muscleBandForPicker = sorted;

    NSString *selectedMuscleBand = [self.muscleBandForPicker objectAtIndex:0];
    NSArray *array = [totalExercises objectForKey:selectedMuscleBand];
    self.exercisesForPicker = array;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {

    return 2;
}

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {

    if (component == muscleBandComponent) 
        return [self.muscleBandForPicker count];

    return [self.exercisesForPicker count];
}

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

    if (component == muscleBandComponent) 

       return [self.muscleBandForPicker objectAtIndex:row];
     return [self.exercisesForPicker objectAtIndex:row];
}

-(void) pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    if (component == muscleBandComponent) {

        NSString *selectedMuscleBand = [self.muscleBandForPicker objectAtIndex:row];
        NSArray *array = [totalExercises objectForKey:selectedMuscleBand];
        self.exercisesForPicker = array;
        [exercisePicker selectRow:0 inComponent:exercisesComponent animated:YES];
        [exercisePicker reloadComponent:exercisesComponent];

        self.muscleBandName.text = [muscleBandForPicker objectAtIndex:row];
        return;
        }
    self.exerciseName.text = [exercisesForPicker objectAtIndex:row];
}

@end 
```

**这是我的 MasterViewController.h：**

```
#import <UIKit/UIKit.h>
@class IFitDataController;
@class Workouts;

@interface IFitMasterViewController : UITableViewController
@property (strong, nonatomic) IFitDataController *dataController;
@property (strong, nonatomic) IFitDataController *muscleBandDataController;
@property (strong, nonatomic) Workouts *thisWorkout;

- (IBAction)done:(UIStoryboardSegue *)segue;
- (IBAction)cancel:(UIStoryboardSegue *)segue;
@end 
```

**这里 MasterViewController.m:** :

```
#import "IFitMasterViewController.h"

#import "IFitDetailViewController.h"

#import "IFitDataController.h"

#import "Workouts.h"

#import "AddWorkoutViewController.h"

#import "IFitMuscleBandViewController.h"

@implementation IFitMasterViewController

- (IBAction)done:(UIStoryboardSegue *)segue {

    if ([[segue identifier] isEqualToString:@"ReturnInput"]) {
        AddWorkoutViewController *addController = [segue sourceViewController];
        if (addController.workout) {
            [self.dataController addWorkoutsWithWorkouts:addController.workout];
            [[self tableView] reloadData];
        }
        [self dismissViewControllerAnimated:YES completion:NULL];
    }
}

- (IBAction)cancel:(UIStoryboardSegue *)segue
{
    if ([[segue identifier] isEqualToString:@"CancelInput"]) {
        [self dismissViewControllerAnimated:YES completion:NULL];
    }
}

- (void)awakeFromNib
{
    [super awakeFromNib];
    self.dataController = [[IFitDataController alloc]init];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    }

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.dataController countOfList];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"WorkoutCell";

    static NSDateFormatter *formatter = nil;
    if (formatter == nil) {
        formatter = [[NSDateFormatter alloc]init];
        [formatter setDateStyle:NSDateFormatterFullStyle];
    }
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    Workouts *workoutAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
    [[cell textLabel]setText:[formatter stringFromDate:(NSDate *)workoutAtIndex.date]];
    [[cell detailTextLabel]setText:workoutAtIndex.comment];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return NO;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowMuscleBandList"]) {
         IFitMasterViewController *muscleBandViewController = [segue destinationViewController];

        muscleBandViewController.thisWorkout = [self.muscleBandDataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row];            

    }
}

@end 
```

**这里 MuscleBandViewController.h：**

```
#import <UIKit/UIKit.h>

@class IFitDataController;

@interface IFitMuscleBandViewController : UITableViewController
@property (strong, nonatomic) Workouts *thisWorkout;
@property (strong, nonatomic) IFitDataController *dataController;
@property (strong, nonatomic) IFitDataController *muscleBandDataController;

@end 
```

**这里 MuscleBandViewController.m：**

```
#import "IFitMasterViewController.h"

#import "IFitDetailViewController.h"

#import "IFitDataController.h"

#import "Workouts.h"

#import "AddWorkoutViewController.h"

#import "IFitMuscleBandViewController.h"

@class IFitDataController;

@implementation IFitMuscleBandViewController

- (void)awakeFromNib
{
    [super awakeFromNib];
    self.muscleBandDataController = [[IFitDataController alloc]init];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    }

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.muscleBandDataController countOfMuscleBandList];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MuscleBandCell";

    static NSDateFormatter *formatter = nil;
    if (formatter == nil) {
        formatter = [[NSDateFormatter alloc]init];
        [formatter setDateStyle:NSDateFormatterFullStyle];
    }
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    Workouts *workoutAtIndex = [self.muscleBandDataController objectInMasterMuscleBandListAtIndex:indexPath.row];
    [[cell textLabel]setText:workoutAtIndex.muscleBand];
    [[cell detailTextLabel]setText:workoutAtIndex.comment];
    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowWorkoutDetails"]) {
        IFitDetailViewController *detailViewController = [segue destinationViewController];

        detailViewController.thisWorkout = [self.muscleBandDataController objectInMasterMuscleBandListAtIndex:[self.tableView indexPathForSelectedRow].row];
    }        
}

@end 
```

**这里 DetailViewController.h：**

```
#import <UIKit/UIKit.h>

@class Workouts;

@interface IFitDetailViewController : UITableViewController

@property (strong, nonatomic) Workouts *thisWorkout;
@property (weak, nonatomic) IBOutlet UILabel *muscleBandLabel;
@property (weak, nonatomic) IBOutlet UILabel *exerciseLabel;
@property (weak, nonatomic) IBOutlet UILabel *seriesLabel;
@property (weak, nonatomic) IBOutlet UILabel *nActionsInSerieLabel;
@property (weak, nonatomic) IBOutlet UILabel *measureLabel;
@property (weak, nonatomic) IBOutlet UILabel *weightLabel;
@property (weak, nonatomic) IBOutlet UILabel *dateLabel;
@property (weak, nonatomic) IBOutlet UILabel *commentLabel;

@end 
```

**最后是我的 DetailViewController.m：**

```
#import "IFitDetailViewController.h"

#import "Workouts.h"

@interface IFitDetailViewController ()
- (void)configureView;
@end

@implementation IFitDetailViewController

#pragma mark - Managing the detail item

- (void)setWorkout:(Workouts *)newWorkout
{
    if (_thisWorkout != newWorkout) {
        _thisWorkout = newWorkout;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    Workouts *theWorkout = self.thisWorkout;
    static NSDateFormatter *formatter = nil;

    if (formatter == nil) {
        formatter = [[NSDateFormatter alloc]init];
        [formatter setDateStyle:NSDateFormatterMediumStyle];
    }
    if (theWorkout) {

        self.muscleBandLabel.text = theWorkout.muscleBand;
        self.exerciseLabel.text = theWorkout.exercise;
        self.seriesLabel.text = theWorkout.series;
        self.nActionsInSerieLabel.text = theWorkout.nActionsInSerie;
        self.measureLabel.text = theWorkout.measure;
        self.weightLabel.text = theWorkout.weight;
        self.title = [formatter stringFromDate:(NSDate *)theWorkout.date];
        self.commentLabel.text = theWorkout.comment;        
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self configureView];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

# c# - C# 如何让泛型方法等待？

> ID：13368864
> 
> 赞同：4
> 
> 时间：2012-11-13T21:11:26.350
> 
> 标签：c#, generics, asynchronous

好吧，标题不好，但我想不出更好的名字。我的问题可能甚至不是特定于异步/等待的，但我的问题是在异步处理期间出现的，所以我打算这样提出：

我有几种方法可以创建任务列表，然后执行“await Task.WhenAll（任务列表）”。在这些方法中等待的具体任务类型各不相同。例如，一些方法正在等待列表`Task<String>`，而其他人正在等待`Task<foo>`.

我发现我需要在这些方法中的每一个中围绕 Task.WhenAll() 进行一些重要的尝试/捕获处理，并且该代码始终相同。我想将该代码移到一个通用方法中，然后传入任务列表，然后将该通用方法问题处理好，然后将其包含在 try/finally 中。

但是我遇到的问题是调用此方法的每个方法都将传入不同任务类型的列表，当我将公共方法的参数声明为任务时，这会导致编译器抱怨：

```
methodA:
    List<Task<String>> myTaskList = ...
    ExecuteTasks(myTaskList);

methodB:
    List<Task<Foo>> myTaskList = ...
    ExecuteTasks(myTaskList);

 async Task ExecuteTasks(List<Task> taskList) {
    try {
        await Task.WhenAll(taskList)
        }
    catch {
        ..common catch handling goes here. This handling isn't really sensitive to the
        ..type of the Tasks, we just need to examine it's Status and Exception properties..
        }
    } 
```

上面methodA和methodB各有自己的种类任务列表需要传入ExecuteTasks，但问题是如何定义任务列表给ExecuteTasks，这样编译器才不会报类型不匹配？在非泛型世界中，我可能会将 ExecuteTasks 的参数定义为 methodA 和 methodB 列表类型的超类，以便编译器可以“向上转换”它们，但这种方法似乎在这里不起作用.. （我尝试将 ExecuteTasks 定义为采用 a`Task<Object>`但这并没有解决类型不匹配的问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:29:17.863

尝试输入您的`ExecuteTasks`反对`IEnumerable<Task>`：

`async Task ExecuteTasks(IEnumerable<Task> taskList) {`

正如@Hamish Smith 指出的那样，这是一个协方差问题。

```
List<Task<String>> myTaskList = ...

ExecuteTasks(myTaskList);

async Task ExecuteTasks(IEnumerable<Task> taskList) {
    try {
        await Task.WhenAll(taskList)
        }
    catch {
        //..common catch handling goes here. This handling isn't really sensitive to the
        //..type of the Tasks, we just need to examine it's Status and Exception properties..
        }
} 
```

如果它仍然是针对 输入的`List<Task>`，那么你可以做一些愚蠢的事情：

```
List<Task<String>> myTaskList = ...

ExecuteTasks(myTaskList);

async Task ExecuteTasks(List<Task> taskList) {
        taskList.Add(new Task<int>()) // bad stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:34:25.747

```
var intTask1 = Task.Run(() => 1);
var intTask2 = Task.Run(() => 2);
var intTasks = new List<Task<int>> { intTask1, intTask2 };

var intExecutor = new TaskExecutor<int>();
await intExecutor.ExecuteTasks(intTasks);

var stringTask1 = Task.Run(() => "foo");
var stringTask2 = Task.Run(() => "bar");
var stringTasks = new List<Task<string>> { stringTask1, stringTask2 };

var stringExecutor = new TaskExecutor<string>();
await stringExecutor.ExecuteTasks(stringTasks); 
```

.....................................

```
class TaskExecutor<T>
{
    public async Task ExecuteTasks(IEnumerable<Task<T>> tasks)
    {
        try
        {
            await Task.WhenAll(tasks);
        }
        catch (Exception ex)
        {
            // Handle exception
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:17:09.520

虽然我真的应该向您指出 Eric Lippert 关于反方差和协方差的系列以及编译器如何看待泛型（http://blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance- and-contravariance-in-c-part-one.aspx)...
我想知道通用方法是否可以在这里工作？

```
 async Task ExecuteTasks<T>(List<Task<T>> taskList) 
  {
     try 
     {
        await Task.WhenAll(taskList);
     }
     catch 
     {
        //..common catch handling goes here. This handling isn't really sensitive to the
        //..type of the Tasks, we just need to examine it's Status and Exception properties..
     }
  } 
```

# html - 如何在 HTML 中创建 textNode？

> ID：13368865
> 
> 赞同：0
> 
> 时间：2012-11-13T21:11:40.310
> 
> 标签：html, dom

我想直接在 HTML 中创建一个 textNode（没有 javascript），我需要一个对它的引用。

可能吗 ？

如果没有，最好的解决方法是什么？

我看到了两种可能性：

1/ 将文本包装在 div（或 span 或其他）元素中？不太好，因为它会影响选择器。

2/ 在 2 个虚拟元素之间包装文本（参见 emberjs ：

```
 <script id="metamorph-0-start" type="text/x-placeholder"></script>
    blue
    <script id="metamorph-0-end" type="text/x-placeholder"></script> 
```

) ? 使用此解决方案，您可以通过获取 2 个“变形”元素之间的元素来获取对 textNode 的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:22:38.987

我想你在这里寻找`span`：

```
<script id="metamorph-0-start" type="text/x-placeholder"></script>
<span id="myTextNodeID">blue</span>
<script id="metamorph-0-end" type="text/x-placeholder"></script> 
```

# air - AIR 如何防止应用程序描述符文件在启动时恢复或更新

> ID：13368866
> 
> 赞同：0
> 
> 时间：2012-11-13T21:11:41.860
> 
> 标签：air

我有一个使用 NativeProcess 的桌面应用程序，我需要描述符文件中的以下内容。

```
<supportedProfiles>extendedDesktop desktop</supportedProfiles> 
```

不幸的是，文件不断恢复到（桌面优先）

```
<supportedProfiles>desktop extendedDesktop </supportedProfiles> 
```

我该如何防止这种情况？我正在使用 Flash Builder 启动，但使用 Flash IDE 进行编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:09:50.583

Flash CS 正在根据 AIR 设置窗口中复选框的顺序重写列表。更改 Descriptor.3.x.xsd 文件中配置文件的顺序将无济于事。您可以将 app.xml 文件设置为只读，只要您不必进行任何其他更改。不是一个很好的解决方案...

# sql - SQL Server 将 DateTime 舍入到最接近的 5 秒？

> ID：13368868
> 
> 赞同：1
> 
> 时间：2012-11-13T21:11:52.413
> 
> 标签：sql, sql-server-2008

只是想知道是否有人可以帮助我。我想将 SQL 日期时间四舍五入到最接近的 5 秒

例如，左边的日期应该在右边给我以下结果。

*   1900-01-01 14:08:20.000 -> 1900-01-01 14:08:20.000
*   1900-01-01 14:08:21.000 -> 1900-01-01 14:08:20.000
*   1900-01-01 14:08:22.000 -> 1900-01-01 14:08:20.000
*   1900-01-01 14:08:23.000 -> 1900-01-01 14:08:25.000
*   1900-01-01 14:08:24.000 -> 1900-01-01 14:08:25.000
*   1900-01-01 14:08:25.000 -> 1900-01-01 14:08:25.000

我已经看到了分钟间隔的类似解决方案，并且我尝试将其应用于秒，但它没有给出理想的结果。

```
declare @DT datetime

set @DT = convert(datetime,'14:08:20')
select dateadd(s,(datepart(s,dateadd(s,1,@DT))/5)*5,
    dateadd(mi,datediff(mi,0,dateadd(s,1,@DT)),0)) 
```

但是，1900-01-01 14:08:23.000 给了我 1900-01-01 14:08:20.000，这是不正确的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:19:00.197

通过使用[DATEPART()](http://msdn.microsoft.com/en-us/library/ms174420.aspx)和[ROUND()](http://msdn.microsoft.com/en-us/library/ms175003.aspx)，您可以实现这一点

**询问**

```
declare @t table (dt datetime);

insert @t 
select
'1900-01-01 14:08:20.000' union all select
'1900-01-01 14:08:21.000' union all select
'1900-01-01 14:08:22.000' union all select
'1900-01-01 14:08:23.000' union all select
'1900-01-01 14:08:24.000' union all select
'1900-01-01 14:08:25.000';

select dt, 
       dateadd(second, round(datepart(second,dt)*2,-1) / 2-datepart(second,dt), dt)
from   @t
order by dt; 
```

**结果：**

```
dt                      rounded
----------------------- -----------------------
1900-01-01 14:08:20.000 1900-01-01 14:08:20.000
1900-01-01 14:08:21.000 1900-01-01 14:08:20.000
1900-01-01 14:08:22.000 1900-01-01 14:08:20.000
1900-01-01 14:08:23.000 1900-01-01 14:08:25.000
1900-01-01 14:08:24.000 1900-01-01 14:08:25.000
1900-01-01 14:08:25.000 1900-01-01 14:08:25.000 
```

# vagrant - 有没有办法改变 .vagrand.d 位置（流浪盒的位置）？

> ID：13368869
> 
> 赞同：17
> 
> 时间：2012-11-13T21:11:55.990
> 
> 标签：vagrant

默认情况下，vagrant 将盒子提取到用户的家庭驱动器 - `%HOMEDRIVE%\.vagrant.d\boxes`. 这是在网络位置。虽然有利于可靠的存储，但这非常慢。

如何更改盒子的位置？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-21T21:35:06.587

当然。只需更改（或设置）`VAGRANT_HOME`环境变量。

[来源：谷歌群组](https://groups.google.com/d/msg/vagrant-up/u6dYmUMmHCY/vmXl_ghJmCQJ)

# .htaccess - 什么是 htaccess 等价物 问问题

> ID：13368870
> 
> 赞同：3
> 
> 时间：
> 
> 标签：.htaccess, utf-8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:57:25.917

第一个`AddCharset`, 告诉服务器以 UTF-8 结尾的文件`.html`应该说是用 UTF-8 编码的。

第二个给出了完整`Content-Type`的 HTML 文件，包括 MIME 类型和字符集。这应该不是必需的，因为 Apache 应该已经配置为将`.html`文件作为`text/html`.

第三个，`AddDefaultCharset`设置所有文件类型的默认字符集，而不仅仅是 HTML。因此，例如，文本文档、XML 文档、样式表等将使用`UTF-8`列出的字符集提供服务。这是我推荐的；默认情况下，您应该将所有文档保存为 UTF-8，因此即使您的所有文档现在都是 HTML，如果您稍后添加它们，这将保留为其他类型文件配置的正确字符集。

最后一个不是 Apache 配置；如果您设置了上述选项之一，则它是应与您的文档一起发送的实际标题。您可以检查在 Firefox 上的 Firebug 或其他浏览器提供的各种开发人员工具中发送的标头。你应该总是有一个`Content-Type:`标题，如果你的文本是用 UTF-8 编码的，它应该总是指定`charset=UTF-8`.

请注意，`meta`如果您通过标题适当地设置字符集，则不需要该标记。`meta`如果您要在本地查看文件，而不需要 Web 服务器，拥有标签仍然很好；在这种情况下，无需设置标头，因此浏览器需要退回到`meta`标签。但是为了这个目的，你可以使用更短更简单的`meta`标签：`<meta charset=utf-8>`. 这种缩写形式是在 HTML5 中正式引入的，但实际上浏览器支持它的时间要长得多，它兼容所有现代浏览器，甚至可以追溯到 IE 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T17:03:00.767

另一种可能性是重写引擎（在这种情况下，匹配无扩展 URL）：

```
RewriteEngine on
RewriteRule ^([^.]*)$ $1 [type=text/html] 
```

# java - 不同分支的超类

> ID：13368872
> 
> 赞同：0
> 
> 时间：2012-11-13T21:12:02.047
> 
> 标签：java, spring, class, inheritance

我有一个 Spring Web 应用程序，其中集成了一些分支/项目。其中两个有相似的超类，我想避免额外的代码。有没有办法将这两个独立的分支/项目的超类放在一个地方？我试图避免合并它们。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:24:20.537

是的。将公共超类提取到一个单独的共享模块（jar）中，并在两个项目中使用它。

# matlab - 是否可以反转svds

> ID：13368877
> 
> 赞同：0
> 
> 时间：2012-11-13T21:12:21.930
> 
> 标签：matlab, svd

是否可以在matlab中反转以下内容：

```
[U,S,V]=svds(fulldata,columns); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T21:18:34.617

引用[MathWorks](http://www.mathworks.ch/ch/help/matlab/ref/svd.html)：

[U,S,V] = svd(X) 生成与 X 维数相同的对角矩阵 S，非负对角元素按降序排列，酉矩阵 U 和 V 使得 X = U*S*V'。

在 svds 的情况下，除非`columns`等于方阵的大小，否则会丢失一些信息`fulldata`。在这种情况下，我相信原始矩阵不能被唯一地重建。

# java - 有多少对象符合垃圾收集器的条件？

> ID：13368878
> 
> 赞同：1
> 
> 时间：2012-11-13T21:12:22.383
> 
> 标签：java, garbage-collection

当 Tester 类的 main 方法结束时，有多少对象符合垃圾回收条件？我的印象是答案是两个，特别是a1，b1。但是，我在某个地方找到了正确的答案，只有 a1 对象符合条件。我认为，由于我们没有将 b1 分配为 a2 中的成员变量，因此 b1 在主结束之前被分配为 null，它应该由垃圾收集器收集。什么是真的？

```
class B {
}

class A {
    static B b1;
    B b2;
}

public class Tester {
    public static void main(String[] args) {
        B b1 = new B();
        B b2 = new B();
        A a1 = new A();
        A a2 = new A();
        a1.b1 = b1;
        a1.b2 = b1;
        a2.b2 = b2;
        a1 = null;
        b1 = null;
        b2 = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:17:01.860

最初分配给方法范围变量的对象`b1`不符合收集条件，因为对它的引用`Class A`是**静态**的。它不会随着 a1 的特定实例过期。这是一个狡猾的 Java 语法，`a1.b1`并且`A.b1`是相同的参考，但它就是这样。该引用一直有效，直到类 A 被卸载/JVM 存在，无论 A 的任何实例（例如 a1）发生什么情况。

代码将方法中的指针分配`b1`给 null，但它没有分配`A.b1`给 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:15:00.807

好吧，您没有取消的唯一参考是`a2`. 您的答案将是您无法追踪的任何对象`a2`

所以你有`a2`，并且`b2`被引用`a2.b2`

`a1`并且（在您的`main`方法范围内）不能，因此被垃圾收集。

实际上，affe 是正确的，`b1`是静态的，因此是可访问的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:17:33.667

*   `a2`- 因为它没有被取消
*   `b2`（分配给的原始对象`b2`） - 因为它由 a2 持有
*   `b1`（分配给的原始对象`b1`） - 因为它保存在`static`变量中

# jsrender - JsRender：模板中的模板

> ID：13368880
> 
> 赞同：1
> 
> 时间：2012-11-13T21:12:33.120
> 
> 标签：jsrender

我在 jsrender 的模板中遇到了模板问题。或者更确切地说，它确实有效，只要我在页面上的脚本块中有它，就像这样：

```
<script id="template_1" type="text/x-jsrender">
<h2>{{>Title}}</h2>
<ul>    
    {{for Details tmpl="#template_2" /}}
</ul>
</script>

<script id="template_2" type="text/x-jsrender">
<li>
    {{>Headline}} - {{>Text}}
</li>
</script> 
```

但是，当我希望将 template_2 移动到外部文件以使用其他位置时，我似乎无法让它再次工作。我尝试在以下方向创建另一个标签：

```
$.views.converters({
    insertDetailList: function (data) {
        $.get('/templates/_details.tmpl.htm', null, function (template) {

        var tmpl = $.templates(template);

        });
    }
}); 
```

但是，当我返回模板（渲染与否）时，它返回“未定义”。关于如何让它发挥作用的任何想法？我有很多带有此设置的模板，我希望将它们导出到单独的文件中，以便在更多地方使用:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:19:33.090

我不确定这是否有帮助，但这是我的方法......

```
// in a utility .js file
compileTemplates = function () {
    $.when(
        $.get(getPath("MyTableTemplate")),
        $.get(getPath("MyRowTemplate"))
    )
    .done(function (table, row) {
        $.templates({
            tmplTable: table[0],
            tmplRow: row[0]
        });
    }); 
```

...然后像往常一样嵌套它们...

```
<tbody>
    {{for MyItems tmpl='tmplRow' /}}
</tbody> 
```

然后我在渲染之前调用 compileTemplates，jsRender 找出名称并相应地渲染。

# javascript - js中的意外}标记-尝试学习ajax

> ID：13368882
> 
> 赞同：0
> 
> 时间：2012-11-13T21:12:36.990
> 
> 标签：javascript

我只是想学习一些ajax，所以我为基本上一个地址簿编写了一些代码来提取一些数据。我的 javascript 是垃圾，但我似乎无法理解我做错了什么，错误指向函数 ajaxCall 但我认为该函数也没有问题：

```
(function () {
    var searchForm = document.getElementById("search-form"),
        searchField = document.getElementById("q"),
        getAllButton = document.getElementById("get-all"),
        target = document.getElementById("output");

    var addr = {
        search: function (event) {
            var output = document.getElementById("output");

            //start ajax call
            ajaxCall("data/contacts.json", output, function (data) {
                var searchValue = searchField.value,
                addrBook = data.addressBook,
                count = addrBook.length,
                i;

                //stop default behavior
                event.preventDefault();

                //clear target
                target.innerHTML = "";

                if (count > 0 && searchValue !== "") {
                    for (i = 0; i < count; i++) {
                        var obj = addrBook[i],
                            isItFound = obj.name.indexOf(searchValue);
                        if (isItFound !== -1) {
                            target.innerHTML += '<p>' + obj.name + ', <a href="mailto:' + obj.email + '">' + obj.email + '</a><p>';
                        } //end if isItFound
                    } //end for loop
                } //end if count check
            }); //end ajax call
        }, //end method search

        getAllContacts: function () {
            var output = document.getElementById("output");
            ajaxCall("data/contacts.json", output, function (data) {
                var addrBook = data.addressBook,
                        count = addrBook.length,
                        i;

                target.innerHTML = "";

                if (count > 0) {
                    for (i = 0; i < count; i++) {
                        var obj = addrBook[i];
                        target.innerHTML += '<p>' + obj.name + ', <a href="mailto:' + obj.email + '">' + obj.email + '</a><p>';
                    } //end for loop
                } //end if
            }); //end ajax call
        }, //end method getAllContacts
        setActiveSection: function () {
            this.parentNode.setAttribute("class", "active");
        }, //end method setActiveSection
        removeActiveSection: function () {
            this.parentNode.removeAttribute("class");
        }, //end method removeActiveSection
        addHoverClass: function () {
            searchForm.setAttribute("class", "hovering");
        }, //end method addHoverClass
        removeHoverClass: function () {
            searchForm.removeAttribute("class");
        } //end method removeHoverClass
    }   //end addr object  
    searchField.addEventListener("keyup", addr.search, false);
    searchField.addEventListener("focus", addr.addActiveSection, false);
    searchField.addEventListener("blur", addr.removeActiveSection, false);
    getAllButton.addEventListener("click", addr.getAllContacts, false);
    searchForm.addEventListener("submit", addr.search, false);
    searchForm.addEventListener("mouseover", addr.addHoverClass, false);
    searchForm.addEventListener("mouseout", addr.removeHoverClass, false);
})(); //end anon function

function getHTTPObject() {
    var xhr;

    //in most cases this first if is executed
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
    }
    //otherwise support crappy IE6 and below
    else if (window.ActiveXObject) {
        xhr = new ActiveXObject("Msxml2.XMLHTTP");
    }
    return xhr;
}

function ajaxCall(dataUrl, outputElement, callback) {
    //get ajax object
    var request = getHTTPObject();

    outputElement.innerHTML = "Loading...";
    request.onreadystatechange = function () {
        if (request.readyState === 4 && request.status === 200) {
            //good ajax response..now save it
            var contacts = JSON.parse(request.responseText);
                if (typeof callback === "function")
                    callback(contacts);
        }   //end upper if
    }   //end onreadystatechange

    request.open("GET", dataUrl, true);
    request.send(null);
} 
```

javascript 开发工具一直给我一个`unexpected token }`在线 97 行，但这种情况经常发生变化。我在某处缺少花括号吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:19:10.017

您必须在控制台中重新检查您的 JSON 响应是什么，并查看它是否无效。因为在第 97 行，您说您正在解析响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:30:07.183

我确实将您的代码放到了这个[小提琴](http://jsfiddle.net/BQtnh/)中，并尽我所能修复了错误。你错过了一些花括号和分号。另外，您在声明它们之前使用了`ajaxCall()`和。`getHTTPObject()`看看这个。不幸的是，我不知道问题是否已经解决，但现在代码至少是有效的:)

顺便说一句：（在我看来）这么长的代码示例总是最好粘贴到小提琴中。不仅因为您可以在此处关注可能混乱的代码，同时在其他地方参考完整的代码示例，还因为您可以确保没有语法错误，因为您可以在此处提问之前使用 jsLint 快速验证您的代码。

# javascript - 如何用greasemonkey修改CDATA？

> ID：13368883
> 
> 赞同：0
> 
> 时间：2012-11-13T21:12:37.397
> 
> 标签：javascript, greasemonkey, cdata

有一个网页具有使用 Javascript 制作的所有 HTML 结构。例子：

```
<script language="JavaScript" type="text/javascript">
//<![CDATA[
function abcd()
{
document.writeln('<div id="abc">');
document.writeln('<div class="Wrapper">');
document.writeln('Test');
...
}
</script> 
```

我想要做的是将单词的所有实例替换为`Test`，`<b>Test</b>`但我不确定我什至应该如何以这种方式获取元素/HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:03:25.750

您想要 wrap `Test`，并且有问题的 HTML 是由 javascript 添加的。如果是这样，那么有三种基本方法：

1.  您可以在目标词出现时包装它们。这是最稳健的方法。有关更多详细信息，请参见下文。

2.  您通常可以稍后重写有问题的 javascript 函数。例如：

    ```
    // ==UserScript==
    // @name     YOUR_SCRIPT_NAME
    // @include  http://YOUR_SERVER.COM/YOUR_PATH/*
    // ==/UserScript==

    function abcd () {
        document.writeln('<div id="abc">');
        document.writeln('<div class="Wrapper">');
        document.writeln('<b>Test</b>');
        ...
    }

    var D                   = document;
    var scriptNode          = D.createElement ('script');
    scriptNode.type         = "text/javascript";
    scriptNode.textContent  = abcd;

    var targ    = D.getElementsByTagName('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode); 
    ```

    将替换 的邪恶版本`abcd ()`，希望在它运行之前。

3.  您可以尝试在该`<script>`节点加载之后和执行之前拦截该节点（一旦脚本运行，更改源将无效）。

    Firefox 可以做到这一点，请参阅[**此答案**](https://stackoverflow.com/a/10468821/331508)以获取执行此操作的 Greasemonkey 代码。不过，在这种情况下，我不推荐这种方法。

CDATA 不是任何这些方法的一个因素。

* * *

* * *

# 包装出现的目标文本：

1.  使用[waitForKeyElements() 实用程序](https://gist.github.com/2625891)在感兴趣的节点出现时捕获它们。无需分析页面的 javascript 或担心可能会破坏某些内容的更改。

2.  使用常见的 DOM 方法来包装目标文本，而不会破坏 HTML 或丢弃事件侦听器。在这种情况下，它是`wrapTextWithElement`对象。

3.  [jQuery](http://jquery.com/)让这一切变得更简单、更清晰。

这是一个**完整的脚本**。您还可以针对[此演示页面](http://fiddle.jshell.net/gH4nV/1/show/)对其进行测试。

```
// ==UserScript==
// @name     YOUR_SCRIPT_NAME
// @include  http://fiddle.jshell.net/gH4nV/*
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change introduced
    in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements ("div.Wrapper", emboldenTheWordTest);

function emboldenTheWordTest (jNode) {
    var testWrapper = new wrapTextWithElement ('Test', '<b>');
    testWrapper.wrap (jNode);
}

function wrapTextWithElement (targText, elemToWrapWith, bCaseSensitive) {
    var self            = this;
    var bCaseSensitive  = bCaseSensitive || false;
    self.targRegEx      = new RegExp ("(" + targText + ")", bCaseSensitive ? "" : "i");
    self.elemToWrapWith = elemToWrapWith;

    self.wrap = function (node) {
        $(node).contents ().each ( function () {
            if (this.nodeType === Node.ELEMENT_NODE) {
                self.wrap (this);
            }
            else if (this.nodeType === Node.TEXT_NODE) {
                var ndText  = this.nodeValue;

                if (self.targRegEx.test (ndText) ) {
                    var replaceNodes = $.map (
                        ndText.split (self.targRegEx),
                        function (phrase) {
                            if (self.targRegEx.test (phrase) ) {
                                var wrapped = $(self.elemToWrapWith, {text: phrase} );

                                return wrapped.get ();
                            }
                            else {
                                if (phrase == "")
                                    return null;
                                else
                                    return document.createTextNode (phrase)
                            }
                        }
                    );
                    $(this).replaceWith (replaceNodes);
                }
            }
        } );
    };
} 
```

# javascript - 更改我的正则表达式以查看任何非数字字符？

> ID：13368887
> 
> 赞同：0
> 
> 时间：2012-11-13T21:13:01.917
> 
> 标签：javascript, regex

```
var text1 = "this is %60.94 correct?"
var text2 = "is this %45?"
var text3 = "looks like %45.5/%54.5."
var text4 = "what about 5 or 10 = %22.5.2." 
```

现在我正在使用这个，`text.match(/%[^\s\/\,]+/g)`但它不能处理更多的边缘情况。

**我需要能够在除第一个之外的任何非数字字符处停止`.`。**

关于如何修改正则表达式来做到这一点的任何指针都会很棒。这是我想要的每个输出。

```
text1.match(regex) -> [60.94]
text2.match(regex) -> [45]
text3.match(regex) -> [45.5, 54.5]
text4.match(regex) -> [22.5] 
```

谢谢你的帮助。

**抱歉，规则：在任何非数字字符的任何 % 符号之后，除了 a 的第一个实例`.`**

另外：找到所有实例很重要

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:14:53.803

正则表达式可以很简单：

```
/%(\d+(\.\d+)?)/ 
```

[**更新了演示**](http://jsfiddle.net/FkgKz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:35:22.327

这应该这样做：

```
/%(\d*\.?\d+|\d+\.?\d*)/g 
```

（针对边缘情况进行了编辑）

# ruby-on-rails - wicked_pdf 未在 ActionMailer 中加载页眉或页脚

> ID：13368888
> 
> 赞同：1
> 
> 时间：2012-11-13T21:13:05.393
> 
> 标签：ruby-on-rails, actionmailer, wicked-pdf

我正在尝试使用以下代码生成pdf：

```
 archivo = render_to_string(
      :pdf => "formulario_de_registro.pdf",
      :template => 'pdf/profile_download.pdf.haml',
      :layout   => 'pdf/body.pdf.haml',
      :margin => { :bottom => 40, :top => 30 },
      :header => {
        :html => { :template => 'layouts/pdf/header.pdf.haml'},
        :font_size => 13},
      :footer => {
        :html => { :template => 'layouts/pdf/footer.pdf.haml'},
        :line => true}
    )
    # from here is just for debugging purposes
    save_path = Rails.root.join('tmp','prueba.pdf')
    File.open(save_path, 'wb') do |file|
      file << archivo
    end 
```

如果我在控制器的操作中运行此代码，效果很好，但我的邮件程序类中的相同代码只呈现 HTML，而不是 PDF。然后，如果我调用`WickedPdf.new.pdf_from_string(archivo)`生成一个 PDF，但没有页眉或页脚，这是正确的，因为在生成的 HTML 中不包含页眉或页脚。有什么我想念的吗？请帮忙。无论如何，我正在使用：

*   wkhtmltopdf 0.11.0 rc1
*   导轨 (3.2.3)
*   wicked_pdf (0.7.9)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T23:13:39.513

WickedPdf 不像 ActionController 那样在 ActionMailer 中使用 alias_method_chain :render_to_string。

首先，将 wicked_pdf 更新到 0.8.0 版或 git master。这将允许您将其包含在 actionmailer 类中：

然后，您可以通过手动包含 PdfHelper 模块并直接调用该方法来解决此问题，如下所示：

```
# Mailer
class Notifications < ActionMailer::Base
  include PdfHelper

  def send_email
    archivo = render_to_string_with_wicked_pdf(
      :pdf => "formulario_de_registro.pdf",
      :footer => { :html => { :template => 'layouts/pdf/footer.pdf.haml' } }
      # etc...
    )
    attachments['formulario_de_registro.pdf'] = archivo
    mail :to => 'person@example.com'
  end
end 
```

# amazon-product-api - 从 ASIN 编号获取 SellerSKU

> ID：13368889
> 
> 赞同：0
> 
> 时间：2012-11-13T21:13:06.800
> 
> 标签：amazon-product-api

我需要根据亚马逊 ASIN 值获取位于亚马逊店面的商品的 SellerSKU 值。我尝试了 MarketplaceWebServiceProducts 端点中的许多方法，但无济于事。

非常感谢任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:57:54.277

假设您正在使用产品 API（您提到产品端点），API 参考说明：

> GetMatchingProductForId
> 
> GetMatchingProductForId 操作根据您指定的产品标识符值列表返回产品及其属性的列表。可能的产品标识符有 ASIN、SellerSKU、UPC、EAN、ISBN 和 JAN。

所以要调用的 API 是 GetMatchingProductForId。请参阅位于[此处的产品 API 第 13 页](https://images-na.ssl-images-amazon.com/images/G/01/mwsportal/doc/en_US/products/MWSProductsApiReference._V401383218_.pdf)

# java - 输入、数组和 NextLine

> ID：13368898
> 
> 赞同：1
> 
> 时间：2012-11-13T21:13:49.187
> 
> 标签：java, arrays, input

很抱歉，如果发布了类似的问题，我只是找不到。这是我的代码：

```
import java.util.*;

public class InputArraysNextLine
{
    static Scanner q = new Scanner(System.in);

    public static void main(String[] args)
    {
        System.out.print("n = ");
        int n = q.nextInt();

        int[] a = new int[n];
        String[] b = new String[n];

        for (int i = 0; i < n; i++)
        {
            System.out.print("Enter student name: ");
            b[i] = q.nextLine();

            q.next();
            System.out.print("Enter student number: ");

            a[i] = q.nextInt();
        }

        for (int i : a)
            System.out.print(i + " ");
        System.out.println();
        for (String j : b)
            System.out.print(j + " ");
    }
} 
```

我打算在控制台上显示数组 a 和 b，但只显示 a。我相信 nextLine() 方法与此有关；即使当控制台显示“输入学生姓名：”时我实际上可以输入一些内容，程序也不会将输入存储到 b 字符串中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:45:49.133

[Scanner.nextInt()](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)不消耗换行符，因此您需要`nextLine()`在获取 int 后调用以跳过它。您也不需要在调用`next()`后调用`nextLine()`。

```
for (int i = 0; i < n; i++)
{
    System.out.print("Enter student name: ");
    b[i] = q.nextLine().trim(); // b is the whole line, trim() removes leading and trailing whitespace

    System.out.print("Enter student number: ");
    a[i] = q.nextInt();
    q.nextLine(); // nextInt() does not 
} 
```

您还应该知道，仅运行一个期望能够抓取许多东西的循环也有点狡猾-您确实应该在尝试抓取它们之前检查它们以避免崩溃（例如，如果输入流提前终止）。可以使用`has`函数进行检查 -`hasNext()`用于标记、`hasNextLine()`用于行、`hasNextInt()`用于整数等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:21:11.443

您应该尝试替换：

```
b[i] = q.nextLine();
q.next(); 
```

和：

```
b[i] = q.next(); 
```

由于`q.nextLine()`返回流中跳过的输入，这里不是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:29:50.210

q.nextLine javadoc 声明“使此扫描仪前进到当前行并返回被跳过的输入。” 获取用户输入的输入的功能。

因此，您需要反转 b[i] 中捕获的内容

b[i] = q.nextLine(); q.next()

至

b[i] = q.next(); q.nextLine();

# magento - Magento Dataflow 产品导入不导入 super_attribute 字段

> ID：13368901
> 
> 赞同：1
> 
> 时间：2012-11-13T21:13:56.940
> 
> 标签：magento, csv, import, dataflow

我正在测试各种方法以将大量产品从旧购物车系统导入 Magento 社区版 (1.7.0.2)。

我知道像 Magmi 这样的实用程序，但我们希望首先探索更简单的解决方案。

目前我正在寻找从我们的旧购物车中导出一个 CSV 文件，以便与 Magento 的内置导入/数据流选项一起使用。但是，在到达那里之前，我正在使用 Magento 的导出/数据流工具导出的现有 Magento 产品运行测试，并且无法让 Magento 读取和关联可配置产品的属性集/代码。

在将数据流导出缩小到数据流导入几乎成功之前，我已经尝试了所有组合（简单导出到简单导入、简单到数据流、数据流到简单、数据流到数据流）。但是，数据流导出不包括 super_attribute 字段。我尝试使用简单的导入字段键（即：“_super_products_sku”、“_super_attribute_code”和“_super_attribute_option”）手动添加它们，并且不使用前导 _underscore。

我没有成功导入属性/集；该过程没有错误地完成并创建了产品，但是没有一个可配置产品具有属性集，并且没有一个简单产品分配给它们的可配置“父级”。在 Dataflow 中，没有一个 super_ 属性可供手动映射选择，这让我怀疑这是否可能。

这是我们的标题和产品行的示例，以逗号分隔（为令人讨厌的文本墙道歉）：

> small_image_label,thumbnail_label,size_waist,color,size_hat,meta_title,meta_description,custom_design,page_layout,msrp_enabled,msrp_display_actual_price_type,gift_message_available,special_price,is_recurring,meta_keyword,custom_layout_update,special_to_date,news_from_date,news_to_date,custom_design_from,custom_design_to,recurring_profile,super_products_sku,super_attribute_code,super_attribute_option admin ,base,apparel,simple,12,13,30258-XS,0,N O-Skin Short Sleeve Rash Guard Black-XS,,,,no-skin-short-sleeve-rash-guard-black-xs,no- skin-short-sleeve-rash-guard-black-xs.html,在信息栏后屏蔽,美国,29.9500,0.7000,39.9500,已启用,单独不可见,是,应税商品,XS,否 O-Skin Rash 防护。这第二层皮肤是一流的。，N O-Skin Rash 防护。这第二个皮肤是一流的。,,0.0000,0.0000,1,0,0,1,1.0000,1,0.0000,1,1,,0.0000,0,1,1,1,

从我在其他 stackoverflow 问题和 Magento 论坛中找到的内容来看，听起来上面没有理由不工作。任何能够提供一些见解的人都会感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:27:04.950

查看代码，属性集区分大小写。您可以通过在数据库中查询找到属性集名称：`SELECT DISTINCT attribute_set_name FROM eav_attribute_set`。所以你的可能需要`Apparel`。

至于超级属性，我不确定它们是否适用于 Dataflow。

# html - 防止内容重叠滚动条

> ID：13368902
> 
> 赞同：-1
> 
> 时间：2012-11-13T21:14:00.253
> 
> 标签：html, css, scroll, scrollbar

有没有办法将样式直接添加到滚动条，使其始终位于内容之上？

我有一个页面加载正常的问题，但是如果我调整浏览器窗口的大小，那么标题标签会显示在滚动条的顶部。

我有标题标签 position: fixed 和 z-index:15000 以确保内容在其下方滚动。在 body 标签上我也有溢出：auto。

任何帮助将不胜感激。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:28:00.893

在所有其他条件相同的情况下，滚动条**会**呈现在内容之上。任何其他影响都来自您代码中的**其他内容**，这就是我们需要您的代码来帮助您的原因。

根据您提供的小示例，尝试`position: fixed;`从元素中删除。请参阅[http://jsfiddle.net/rgeFa/](http://jsfiddle.net/rgeFa/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:15:10.930

导致此问题的样式是 body { overflow:auto} 我删除了它并没有它。浏览器之间的不一致使这变得复杂。

# javascript - Javascript replace() 和 $1 问题

> ID：13368906
> 
> 赞同：9
> 
> 时间：2012-11-13T21:14:17.143
> 
> 标签：javascript, regex

我正在尝试创建一个脚本来搜索文本中的模式并在它找到的字符串周围包裹一个标签。

```
$(".shop_attributes td").each(function () {
    $(this).html(function(i, html) {
        return html.replace(/E[0-9]{3,4}/g, "<strong>$1</strong>");
    });
}); 
```

这是我使用的代码，它确实找到了我正在寻找的内容，但它实际上所做的是生成一个内部带有 $1 的标签。我期望它做的是将它找到的字符串放入强标签中。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T21:16:32.907

您需要先捕获匹配项，然后才能使用它。使用括号：

```
$(".shop_attributes td").each(function () {
    $(this).html(function(i, html) {
        return html.replace(/(E[0-9]{3,4})/g, "<strong>$1</strong>");
    });
}); 
```

[可笑地过度简化的 JS Fiddle 演示](http://jsfiddle.net/davidThomas/m2hWR/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T21:19:30.650

另一种选择是使用`$&`，它代表整个匹配（也`$0`有其他风格）：

```
html.replace(/E[0-9]{3,4}/g, "<strong>$&</strong>"); 
```

我还推荐[jQuery Highlight Plugin](http://bartaz.github.com/sandbox.js/jquery.highlight.html) - 您可以调整它以使用正则表达式，代码非常简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T21:18:09.890

将要捕获的组括在括号中：

```
/(E[0-9]{3,4})/g 
```

# c# - 获取接下来的几天但不是周末，asp.net c#

> ID：13368909
> 
> 赞同：1
> 
> 时间：2012-11-13T21:14:28.370
> 
> 标签：c#, .net, date

我试图获得接下来的五个工作日，但我被困住了。

我是这样开始的：

```
 List<DateTime> allWeekEndsInOneYear = new List<DateTime>();

        DateTime sDate = DateTime.Now;
        DateTime eDate = DateTime.Now.AddYears(1);

        TimeSpan diff = eDate - sDate;
        int days = diff.Days;
        for (var i = 0; i <= days; i++)
        {
            var testDate = sDate.AddDays(i);
            switch (testDate.DayOfWeek)
            {
                case DayOfWeek.Saturday:
                case DayOfWeek.Sunday:
                    allWeekEndsInOneYear.Add(testDate);
                    break;
            }
        }

        List<DateTime> daysToMark = new List<DateTime>();

        DateTime startDate = DateTime.Now;
        DateTime endDate = DateTime.Now.AddDays(5); 
```

现在我需要用接下来的 5 天填写 daysToMark，不包括周数（allWeekEndsInOneYear 中的那些）。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:16:57.193

您可以在 switch 的默认情况下添加其他日期（不是周末）：

```
for (var i = 0; i <= days; i++)
{
    var testDate = sDate.AddDays(i);
    switch (testDate.DayOfWeek)
    {
        case DayOfWeek.Saturday:
        case DayOfWeek.Sunday:
            allWeekEndsInOneYear.Add(testDate);
            break;
        default:
            daysToMark.Add(testDate); // this is a workday
            break;
    } 
} 
```

此外，您不需要计算天数和使用`for`循环。`while(testDate <= eDate)`将完成这项工作：

```
var testDate = DateTime.Now;

while (testDate <= eDate)
{
    switch (testDate.DayOfWeek)
    {
       case DayOfWeek.Saturday:
       case DayOfWeek.Sunday:
            allWeekEndsInOneYear.Add(testDate);
            break;
       default:
            daysToMark.Add(testDate); // this is a workday
            break;
    }

    testDate = testDate.AddDays(1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:25:14.727

这将为您提供接下来的五天，而不是周六或周日。

```
var nextFiveWeekDays = new List<DateTime>();
var testDate = DateTime.Now.Date;

while (nextFiveWeekDays.Count()<5)
{
  if (testDate.DayOfWeek != DayOfWeek.Saturday && 
           testDate.DayOfWeek != DayOfWeek.Sunday)
     nextFiveWeekDays.Add(testDate);

testDate = testDate.AddDays(1);
} 
```

# c++ - C++ 2 DLL 互相使用

> ID：13368914
> 
> 赞同：2
> 
> 时间：2012-11-13T21:14:40.133
> 
> 标签：c++, dll, linker, dllimport, dllexport

在 C++ 中是否有可能包含彼此的 2 个 DLL，因为它们每个都使用彼此的类（嗯，这是我的计划），这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:27:42.053

是的，这是可能的。只有您需要将这些 dll 编译为多步骤过程。要链接 dll，您需要来自其他 dll 的 lib 文件。这意味着您需要：

1.  创建 DLL1 的存根实现。这将为 DLL1 生成一个 .lib 文件。
2.  将 DLL2 与存根 .lib pf DLL1 链接。
3.  将 DLL1 与 DLL2 的真实 .lib 链接。
4.  将 DLL2 与 DLL1 的真实库重新链接。

另请注意，DLL 通常具有 C 接口。您可以导出类，但准备好为使用的每个版本的编译器设置一组 dll。

# javascript - 在javascript控件中获取选定的时间

> ID：13368917
> 
> 赞同：0
> 
> 时间：2012-11-13T21:14:59.463
> 
> 标签：javascript, asp.net

我正在使用以下 JavaScript 控件：

[http://www.ama3.com/anytime/](http://www.ama3.com/anytime/)

如何在控件中获取选定的日期？所以我可以将它传递给回发页面？我试着找到它，但我只是不太擅长 JavaScript :(

我必须调用哪个函数？

```
// Initialization
$(document).ready(function () {
    //alert("welcome");
    $("#DateTimeDemo").AnyTime_picker(
  { format: "%Y-%m-%d %H:%i: %E",
      formatUtcOffset: "%: (%@)",
      hideInput: true,
      placement: "inline"
  });

// Asp.net code
<input type="text" id="DateTimeDemo" style="background-color:Green;" /> 
```

我假设代码将是这样的：

```
 var x = getBlaBla(); 
```

其中 x 是我可以用来传递给 C# 以获取回发信息的东西。我想我必须使用 JQuery 来选择我要删除日期的对象。

编辑：好的，我想我必须使用这样的东西：

```
$("#DateTimeDemo").AnyTime_current(g, k); 
```

g 和 k 代表什么？我必须通过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:38:39.573

> 我想我必须使用 JQuery 来选择对象

您永远不会“必须”使用 jQuery 或任何库。您可以添加一个内联侦听器，例如：

```
<select ... onchange="someFunc(this.value);" ...> 
```

添加侦听器的逻辑在服务器上，因此与在客户端添加它没有什么不同（但比任何客户端方法都更快、更健壮）。

或者在文档中创建元素后的某个时间将其添加为 DOM 属性（使用加载事件或页面底部的脚本）：

```
document.getElementById('selectID').onchange = function(){someFunc(this.value);}; 
```

或者使用 addEventListener：

```
document.getElementById('selectID').addEventListener('change', function(){...}, false); 
```

但也包括对其他浏览器的支持（例如 addEvent 函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:12:34.893

正如 Joe Johnson 之前评论的那样，您可能希望附加一个事件处理程序。使用此方法，只要您的输入在 DateTimeDemo 字段中发生更改，您就可以使用该值执行某些操作。

```
$(function() {
    $("#DateTimeDemo").change(function() {
    var dt = $("#DateTimeDemo").val();
    alert(dt);
    // do something with dt. 
    });
}); 
```

# webbrowser-control - WP8 WebBrowser：内联脚本有效，加载无效

> ID：13368921
> 
> 赞同：2
> 
> 时间：2012-11-13T21:15:06.660
> 
> 标签：webbrowser-control, windows-phone, windows-phone-8

Windows Phone 8 应用程序，WebBrowser 控件。`NavigateToString`我通过（设置后）加载了一大段 HTML `IsScriptEnabled=true`。一段时间后（在它加载很久之后），我使用 InvokeScript 在页面上调用了一些 JavaScript。

`<script>`当我调用在元素内内联定义的 JavaScript 函数时，它按预期工作。当我调用一个在外部 JS 文件中定义的文件时，它不会，并且会引发 HRESULT 0x80020006（“找不到名称”）的异常。

外部脚本文件是从我的应用程序包中加载的。在 HTML 字符串中，有一个`<base>`元素包含`file://`指向包文件夹的 URL（通过 检索`Package::Current->InstalledLocation`），该`<script>`元素仅包含文件名。该文件夹中还有样式和图像-它们可以正常加载。

HTML 没有`DOCTYPE`也没有`xmlns`——我知道这些东西有时会使 JavaScript 失效。

外部脚本文件是有效的 - 它直接来自 Android，它在相应的 WebView 控件上工作。我试图调用的函数无论如何都是空的，为了安全起见，JavaScript 语法方面。

这在理论上可能是某种跨域脚本问题。从技术上讲，脚本来自`file://`URL，而页面本身根本不来自 URL。一些确保没有调用可疑脚本的系统代码可能会妨碍您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:09:28.817

找到了一种解决方法：在启动时将外部脚本文件加载到字符串中，一旦加载了 HTML（`LoadCompleted`触发），就使用 JavaScript 将其提供给文档`eval`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:35:10.007

这是如何动态注入一些脚本的示例

*Browser.InvokeScript("eval", new string[] { FileUtils.ReadFileContent("app/www/js/console.js") });*

其中 ReadFileContent 可以定义如下 [https://github.com/sgrebnov/IeMobileDebugger/blob/master/Libraries/Support/FileUtils.cs](https://github.com/sgrebnov/IeMobileDebugger/blob/master/Libraries/Support/FileUtils.cs)

完整示例 [https://github.com/sgrebnov/IeMobileDebugger/blob/master/Libraries/IE.Debug.Core/WebPageDebugger.cs](https://github.com/sgrebnov/IeMobileDebugger/blob/master/Libraries/IE.Debug.Core/WebPageDebugger.cs)

PS。而不是从文件中读取脚本，您可以传递硬编码字符串等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:29:59.210

你确定你的脚本正在加载吗？您可以做的一件事是将警报塞在那里以确保它正在加载。我怀疑它没有被加载。

我之前遇到过这种情况的任何时候都是这种情况，尽管我承认我之前没有从独立存储中加载过 JS 文件。

# java - java.lang.ClassCastException：[Ljava.lang.Object 或 LazyInitializationException

> ID：13368922
> 
> 赞同：2
> 
> 时间：2012-11-13T21:15:08.053
> 
> 标签：java, hibernate, named-query

我这样写命名查询

```
<query name="GET_QUESTIONS_BY_TEST_ID">select tq from TestQuestion as tq inner join tq.question as
        q
        where
        tq.testQuestionIdentifer.versionId=(select
        max(tq.testQuestionIdentifer.versionId) from TestQuestion tq_inner
        where
        tq_inner.testQuestionIdentifer.testId=:testId) and
        tq.testQuestionIdentifer.testId=:testId
    </query> 
```

当我得到结果时，我遇到了问题。当我写作时，`from TestQuestion`我得到`List<Object[Object[]]>`了 Question 和 TestQuestion 对象。当我写作时， `select tq`我得到`LazyInitializationException`. 我想得到 List 但不能。

**更新**

我决定将其他部分添加到我的 hbm

```
<class name="by.bsuir.testapp.model.TestQuestion" table="TEST_QUESTION"
        lazy="true">
        <composite-id name="testQuestionIdentifer"
            class="by.bsuir.testapp.model.TestQuestionIdentifer">
            <key-property name="testId" column="TEST_ID" />
            <key-property name="versionId" column="VERSION_ID" />
            <key-property name="questionId" column="QUESTION_ID" />
        </composite-id>
        <many-to-one name="question" class="by.bsuir.testapp.model.Question"
            fetch="join" insert="false" update="false">
            <column name="QUESTION_ID" />
        </many-to-one>
    </class> 
```

我发现它存在`11.4.1.2\. Queries that return tuples`于 Hibernate[文档的文档中](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#objectstate-querying-executing)

我应该如何为 rignt 结果编写命名查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:27:32.897

我不明白你的问题。

您的查询 (`select tq from TestQuestion as tq...`和`from TestQuestion`) 都应该返回`List<TestQuestion>`而不是`List<Object[][]>`

`LazyInitializationException`通常在发生延迟获取时发生，但实体的相关会话已经关闭（如果我错了，请纠正我，只是从我的裸记忆中我认为是这样`LazyInitializationException`）。它与命名查询无关。请确保您的交易控制等设置正确。

# c++ - 用于 CUDA 和 OpenCL 集成的 OOP

> ID：13368923
> 
> 赞同：3
> 
> 时间：2012-11-13T21:15:08.100
> 
> 标签：c++, cuda, opencl

这就是问题所在：我正在开发一个框架（CLCuda，不是最有创意的名称），程序员在其中实例化一个对象，并且根据系统支持的内容（CUDA 或 AMD OpenCL），将使用相应的方法，而无需将任何代码行更改为此。

我有一个名为`CLCuda`（纯虚拟方法，但可能只是虚拟的）抽象类，实现其方法的两个类是`CLCudaCUDA`和`CLCudaOPENCL`.

我想要这样的东西：根据用户拥有的显卡，实例化一个可以启动 CUDA 或 OpenCL 的对象，该对象可以访问可用平台的方法（通过类`CLCudaCUDA`或`CLCudaOPENCL`）。

我已经编写了`CLCudaOpenCL`and的方法`CLCudaCUDA`（很难做到），所以我的问题在于 OOP。

我该如何组织我的课程？

如果有人可以提供帮助...非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:36:43.840

您的问题似乎暗示了[“工厂”设计模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。大概您有一种方法可以确定当前主机支持哪个，因此您应该在工厂的实现中利用它。

# android - 错误 R.id.togglebutton1 及更多

> ID：13368925
> 
> 赞同：4
> 
> 时间：2012-11-13T21:15:10.160
> 
> 标签：android, android-layout, android-intent, android-activity

```
package com.example.hello.word;

import android.R;
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ToggleButton;

public class OptionsMenu extends Activity{

    MediaPlayer ourSong;
    Button btn1;
    Intent openStartingPoint;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menuoptions);

        final ToggleButton onTog = (ToggleButton) findViewById(R.id.toggleButton1);
        onTog.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                if (onTog.isChecked()){
                    ourSong.start();
                }else{
                    ourSong.stop();
                }
            }
        }); 
```

我在所有按钮下都有一个错误，它向我展示了例如：“菜单选项无法解析或不是字段”.. togglebutton1 上的相同错误

我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Volume"
        android:textSize="40dp"
        android:textStyle="bold"
        android:layout_marginTop="40dp"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="121dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="20dp"
        android:text="ToggleButton" />

    <Button
        android:id="@+id/button1"
        android:layout_width="178dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="150dp"
        android:text="Back" />

</LinearLayout> 
```

我试图清理项目..删除 R 类和所有内容！我能做些什么来解决这个错误？谢谢帮手..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T21:17:21.343

您收到该错误是因为您正在导入`android.R`您必须删除此导入。

尝试`import android.R;`从代码中删除该行，这应该可以解决您的问题

当您按下`control + shift + O`在 Eclipse 中组织导入时，它有时会添加导入`android.R`

这是一个类似的问题

*   [R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error)

# c++ - 轻松修复 - 对多个值排序双端队列

> ID：13368929
> 
> 赞同：0
> 
> 时间：2012-11-13T21:15:20.100
> 
> 标签：c++, sorting, deque

我试图弄清楚如何对两个值的结构双端队列进行排序，而不仅仅是一个。我拥有的代码是我拥有的完美排序的代码`arrival`，但是如果两个项目具有相同的内容`pid`，我希望它们也以 pid 顺序排列。我希望我说得通！

例如：

a`pid`为 1 且 an`arrival`为 10 的进程应该在具有`pid`2 且 an`arrival`为 10 的进程之前，即使具有`pid`1 的进程最初在双端队列中较晚。

```
struct Process{
    int pid;
    int burst;
    int arrival;
};

int sortOnArrival (Process const &a, Process const &b){
    return a.arrival < b.arrival;
}

int main(int argc, char *argv[]){

    deque<Process> readyQueue;

    // This is just pseudocode, but trust me, it works. :)
    fill(readyQueue);

    sort(readyQueue.begin(), readyQueue.end(), sortOnArrival);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T21:18:25.287

只需使用合适的比较对象即可。例如，您可以使用

```
struct sortOnPidAndArrival {
    bool operator()(Process const& p0, Process const& p1) const {
        return std::tie(p0.pid, p0.arrival) < std::tie(p1.pid, p1.arrival);
    }
}; 
```

In case you wonder why I'm using a function object rather than a function pointer: The code in this function object can entirely be inlined. The call through a function pointer cannot.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T21:17:56.773

您的比较功能需要考虑比较的所有要求。

```
int sortOnArrival (Process const &a, Process const &b) {
    if( a.arrival == b.arrival ) return a.pid < b.pid;
    return a.arrival < b.arrival;
} 
```

# php - PDO 上的 fetch 仅返回一行和第一个字符。为什么？

> ID：13368933
> 
> 赞同：1
> 
> 时间：2012-11-13T21:15:31.633
> 
> 标签：php, pdo, fetch

我是 PHP 的 PDO 新手，我需要你的帮助。我使用 select 语句创建了一个函数，如果查询的值大于 0，则返回 fetch。

```
 $this->result->setFetchMode(PDO::FETCH_OBJ); 

 if ($this->result->rowCount() > 0) {     
   return $this->result->fetch(); 

 } 
```

在我的主程序上我有这个

```
 foreach ($category_results as $row){
        echo .$row['id_category'].' '. $row['name']; 

 } 
```

这个命令只回显 1 和 F 两次，但如果我只输入 $row 它会回显所有正确的结果，例如 1 食物，2 饮料。我怎样才能像上面的例子一样分别回显结果？我想把它们放在一个列表框中

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:22:21.033

您正在使用：

```
 $this->result->setFetchMode(PDO::FETCH_OBJ); 
```

因此，您会将行存储在对象中，另请参阅[手册](http://php.net/manual/en/pdostatement.fetch.php)。

要获得它们，您可以使用：

```
 echo .$row->id_category.' '. $row->name; 
```

另请注意，`fetch`仅获取一行，要获取所有行，请使用`fetchAll`. 但是，如果没有看到完整的代码，我不确定您是否需要它。

# c++ - 具有两个 OpenGL 图形视图的 MFC MDI 拆分器无法正常工作

> ID：13368935
> 
> 赞同：0
> 
> 时间：2012-11-13T21:15:58.663
> 
> 标签：c++, opengl, mfc, views, mdi

我想创建一个应用程序，其中应用程序视图将在使用拆分器附加到 Childframe 的两个不同视图中与 OpenGL 3d 模型分开。为此，我创建了一个从视图类扩展的父类，并且在这个类中我已经初始化了所有 opengl 所需的代码。

例如

```
#pragma once

#include <gl/gl.h>
#include <gl/glu.h>

#define IL   //when you dont want to use image library and you want to load everything by your self then remove this

// COpenGlView view

class COpenGlView : public CView
{
    DECLARE_DYNCREATE(COpenGlView)

protected:
    void oglBeginRendering();
    COpenGlView();           // protected constructor used by dynamic creation
    virtual ~COpenGlView();

/*******************/
        /* Private Members */
        /*******************/
        // Window information
        CWnd  *hWnd;
        HDC   hdc;          
        HGLRC hrc;          
        int   m_nPixelFormat;
        CRect m_rect;
        CRect m_oldWindow;
        CRect m_originalRect;
public:
        /******************/
        /* Public Members */
        /******************/
        UINT_PTR m_unpTimer;
        // View information variables
        float    m_fLastX;
        float    m_fLastY;
        float    m_fPosX;
        float    m_fPosY;
        float    m_fZoom;
        float    m_fRotX;
        float    m_fRotY;
        bool     m_bIsMaximized;

        float    m_fZoomSpeed;
        float    m_fRotateSpeed;
        GLuint texture[1];

        void oglCreate(CRect rect, CWnd *parent,CString strWindowName=L"OpenGl");
        virtual void oglInitialize(void);
        virtual void oglDrawScene(void);
        float   randFloat(const float& min, const float& max);
        int     randInt(const int& min, const int& max);

        void Reset();

        virtual void OnDraw(CDC* pDC);      // overridden to draw this view

#ifdef _DEBUG
    virtual void AssertValid() const;
#ifndef _WIN32_WCE
    virtual void Dump(CDumpContext& dc) const;
#endif
#endif

protected:
    DECLARE_MESSAGE_MAP()
public:
    afx_msg int OnCreate(LPCREATESTRUCT lpCreateStruct);
    afx_msg void OnPaint();
    afx_msg void OnMouseMove(UINT nFlags, CPoint point);
    afx_msg void OnSize(UINT nType, int cx, int cy);
    afx_msg void OnTimer(UINT_PTR nIDEvent);
    virtual void OnInitialUpdate();
}; 
```

这是cpp

```
// OpenGlView.cpp : implementation file
//

#include "stdafx.h"

#include "OpenGlView.h"

// COpenGlView

IMPLEMENT_DYNCREATE(COpenGlView, CView)

COpenGlView::COpenGlView()
{

    m_fPosX = 0.0f;     // X position of model in camera view
    m_fPosY = 0.0f;     // Y position of model in camera view
    m_fZoom = 5.0f; // Zoom on model in camera view
    m_fRotX = 0.0f;     // Rotation on model in camera view
    m_fRotY = 0.0f;     // Rotation on model in camera view
    m_fZoomSpeed=0.05f;
    m_fRotateSpeed = 0.05f;
    m_bIsMaximized = false;

}

COpenGlView::~COpenGlView()
{
}

void COpenGlView::Reset()
{
    m_fPosX = 0.0f;     // X position of model in camera view
    m_fPosY = 0.0f;     // Y position of model in camera view
    m_fZoom = 5.0f; // Zoom on model in camera view
    m_fRotX = 0.0f;     // Rotation on model in camera view
    m_fRotY = 0.0f;     // Rotation on model in camera view
    m_fZoomSpeed=0.05f;
    m_fRotateSpeed = 0.05f;
    m_bIsMaximized = false;

}

BEGIN_MESSAGE_MAP(COpenGlView, CView)
    ON_WM_CREATE()
    ON_WM_PAINT()
    ON_WM_MOUSEMOVE()
    ON_WM_SIZE()
    ON_WM_TIMER()
END_MESSAGE_MAP()

// COpenGlView drawing

void COpenGlView::OnDraw(CDC* pDC)
{
    CDocument* pDoc = GetDocument();
    // TODO: add draw code here
}

// COpenGlView diagnostics

#ifdef _DEBUG
void COpenGlView::AssertValid() const
{
    CView::AssertValid();
}

#ifndef _WIN32_WCE
void COpenGlView::Dump(CDumpContext& dc) const
{
    CView::Dump(dc);
}
#endif
#endif //_DEBUG

// COpenGlView message handlers

int COpenGlView::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    if (CView::OnCreate(lpCreateStruct) == -1)
        return -1;

    return 0;
}

void COpenGlView::OnPaint()
{
    //CPaintDC dc(this); // device context for painting
    // TODO: Add your message handler code here
    // Do not call CView::OnPaint() for painting messages

    ValidateRect(NULL);
}

void COpenGlView::OnMouseMove(UINT nFlags, CPoint point)
{
    int diffX = (int)(point.x - m_fLastX);
    int diffY = (int)(point.y - m_fLastY);
    m_fLastX  = (float)point.x;
    m_fLastY  = (float)point.y;

    // Left mouse button

    if (nFlags & MK_LBUTTON)
    {
        m_fRotX += (float)m_fRotateSpeed * diffY;

        if ((m_fRotX > 360.0f) || (m_fRotX < -360.0f))
        {
            m_fRotX = 0.0f;
        }

        m_fRotY += (float)0.5f * diffX;

        if ((m_fRotY > 360.0f) || (m_fRotY < -360.0f))
        {
            m_fRotY = 0.0f;
        }
    }

    // Right mouse button
    else if (nFlags & MK_RBUTTON)
    {
        m_fZoom -= (float)m_fZoomSpeed * diffY;
    }

    // Middle mouse button
    else if (nFlags & MK_MBUTTON)
    {
        m_fPosX += (float)0.05f * diffX;
        m_fPosY -= (float)0.05f * diffY;
    }

    OnDraw(NULL);

    CView::OnMouseMove(nFlags, point);
}

void COpenGlView::OnSize(UINT nType, int cx, int cy)
{
    CView::OnSize(nType, cx, cy);

    if (0 >= cx || 0 >= cy || nType == SIZE_MINIMIZED) return;

    // Map the OpenGL coordinates.
    glViewport(0, 0, cx, cy);

    // Projection view
    glMatrixMode(GL_PROJECTION);

    glLoadIdentity();

    // Set our current view perspective
    gluPerspective(35.0f, (float)cx / (float)cy, 0.01f, 2000.0f);

    // Model view
    glMatrixMode(GL_MODELVIEW);

    switch (nType)
    {
        // If window resize token is "maximize"
        case SIZE_MAXIMIZED:
        {
            // Get the current window rect
            GetWindowRect(m_rect);

            // Move the window accordingly
            MoveWindow(6, 6, cx - 14, cy - 14);

            // Get the new window rect
            GetWindowRect(m_rect);

            // Store our old window as the new rect
            m_oldWindow = m_rect;

            break;
        }

        // If window resize token is "restore"
        case SIZE_RESTORED:
        {
            // If the window is currently maximized
            if (m_bIsMaximized)
            {
                // Get the current window rect
                GetWindowRect(m_rect);

                // Move the window accordingly (to our stored old window)
                MoveWindow(m_oldWindow.left, m_oldWindow.top - 18, m_originalRect.Width() - 4, m_originalRect.Height() - 4);

                // Get the new window rect
                GetWindowRect(m_rect);

                // Store our old window as the new rect
                m_oldWindow = m_rect;
            }

            break;
        }
    }
}

void COpenGlView::oglBeginRendering()
{
    SetTimer(1, 1, 0);
}

void COpenGlView::OnTimer(UINT_PTR nIDEvent)
{
    switch (nIDEvent)
    {
        case 1:
        {
            // Clear color and depth buffer bits
            wglMakeCurrent(hdc, hrc);

            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

            // Draw OpenGL scene
            oglDrawScene();

            // Swap buffers
            SwapBuffers(hdc);

            glFlush();
            wglMakeCurrent(NULL, NULL);

            break;
        }

        default:
            break;
    }

    CView::OnTimer(nIDEvent);
}

void COpenGlView::OnInitialUpdate()
{
    CView::OnInitialUpdate();

    COpenGlView::oglInitialize();
    // TODO: Add your specialized code here and/or call the base class
}

void COpenGlView::oglCreate(CRect rect, CWnd *parent,CString strWindowName)
{
    CString className = AfxRegisterWndClass(CS_HREDRAW | CS_VREDRAW | CS_OWNDC, NULL, (HBRUSH)GetStockObject(BLACK_BRUSH), NULL);

    CreateEx(0, className,strWindowName, WS_CHILD | WS_VISIBLE | WS_CLIPSIBLINGS | WS_CLIPCHILDREN, rect, parent, 0);

    // Set initial variables' values
    m_oldWindow    = rect;
    m_originalRect = rect;

    hWnd = parent;

    GLenum s = glGetError();

}

void COpenGlView::oglInitialize(void)
{
    // Initial Setup:
    //
    static PIXELFORMATDESCRIPTOR pfd =
    {
        sizeof(PIXELFORMATDESCRIPTOR),
        1,
        PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER,
        PFD_TYPE_RGBA,
        32, // bit depth
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        16, // z-buffer depth
        0, 0, 0, 0, 0, 0, 0,
    };

    // Get device context only once.
    //hdc = GetDC()->m_hDC;

    // Pixel format.
    m_nPixelFormat = ChoosePixelFormat(hdc, &pfd);
    SetPixelFormat(hdc, m_nPixelFormat, &pfd);

    // Create the OpenGL Rendering Context.
    hrc = wglCreateContext(hdc);
    wglMakeCurrent(hdc, hrc);

    // Basic Setup:
    //
    // Set color to use when clearing the background.

    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    glClearDepth(1.0f);

    // Turn on backface culling
    glFrontFace(GL_CCW);
    glCullFace(GL_BACK);

    // Turn on depth testing

    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);

    GLenum a = glGetError();

    OnDraw(NULL);

    //wglMakeCurrent(NULL, NULL);
}

void COpenGlView::oglDrawScene(void)
{
    // Wireframe Mode

    glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);

    glBegin(GL_QUADS);
            // Front Side
            glVertex3f( 1.0f,  1.0f, 1.0f);
            glVertex3f(-1.0f,  1.0f, 1.0f);
            glVertex3f(-1.0f, -1.0f, 1.0f);
            glVertex3f( 1.0f, -1.0f, 1.0f);

            // Back Side
            glVertex3f(-1.0f, -1.0f, -1.0f);
            glVertex3f(-1.0f,  1.0f, -1.0f);
            glVertex3f( 1.0f,  1.0f, -1.0f);
            glVertex3f( 1.0f, -1.0f, -1.0f);

            // Top Side
            glVertex3f( 1.0f, 1.0f,  1.0f);
            glVertex3f( 1.0f, 1.0f, -1.0f);
            glVertex3f(-1.0f, 1.0f, -1.0f);
            glVertex3f(-1.0f, 1.0f,  1.0f);

            // Bottom Side
            glVertex3f(-1.0f, -1.0f, -1.0f);
            glVertex3f( 1.0f, -1.0f, -1.0f);
            glVertex3f( 1.0f, -1.0f,  1.0f);
            glVertex3f(-1.0f, -1.0f,  1.0f);

            // Right Side
            glVertex3f( 1.0f,  1.0f,  1.0f);
            glVertex3f( 1.0f, -1.0f,  1.0f);
            glVertex3f( 1.0f, -1.0f, -1.0f);
            glVertex3f( 1.0f,  1.0f, -1.0f);

            // Left Side
            glVertex3f(-1.0f, -1.0f, -1.0f);
            glVertex3f(-1.0f, -1.0f,  1.0f);
            glVertex3f(-1.0f,  1.0f,  1.0f);
            glVertex3f(-1.0f,  1.0f, -1.0f);
    glEnd();

    glLoadIdentity();

    glTranslatef(0.0f, 0.0f, -m_fZoom);
    glTranslatef(m_fPosX, m_fPosY, 0.0f);
    glRotatef(m_fRotX, 1.0f, 0.0f, 0.0f);
    glRotatef(m_fRotY, 0.0f, 1.0f, 0.0f);

    GLenum a = glGetError();

}

//--------------------------------------------------------

// Get an random integer within a specified range

//--------------------------------------------------------

int COpenGlView::randInt(const int& min, const int& max) {
    return ((rand()%(int)(((max) + 1)-(min)))+ (min)); 
}

//--------------------------------------------------------

// Get a random float within a specified range

//--------------------------------------------------------

float COpenGlView::randFloat(const float& min, const float& max) {
    float range = max - min;
    float num = range * rand() / RAND_MAX;
    return (num + min);
} 
```

然后我从同一个类类中扩展了另外两个视图类

```
C3dRightView : public COpenGlView 
```

和

```
C3dRightView : public COpenGlView 
```

然后在子框架类中我添加了拆分器代码并在拆分器窗口中调用了这两个类。问题是两个opengl视图代码都可以正常工作，但是如果我停止opengl的初始化之一，那么另一个会显示。我尝试了一切，但我无法在这两个不同的视图中显示两个不同的图形 opengl 动画。我检查了 HDC 内存映射，似乎两个类都在使用父类来处理它们的动态 hdc 对象，但是如果我停止一个代码，那么其他视图会正确显示。

详细课程如下

```
class C3dRightView : public COpenGlView
{
    DECLARE_DYNCREATE(C3dRightView)

protected:
    GLuint m_left_texture[53];

    C3dRightView();           // protected constructor used by dynamic creation
    virtual ~C3dRightView();

public:
    virtual void OnDraw(CDC* pDC);      // overridden to draw this view
#ifdef _DEBUG
    virtual void AssertValid() const;
#ifndef _WIN32_WCE
    virtual void Dump(CDumpContext& dc) const;
#endif
#endif

protected:
    DECLARE_MESSAGE_MAP()
public:
    afx_msg void OnPaint();
    virtual void OnInitialUpdate();

    void oglDrawScene(void);
    void oglInitialize(void);
    afx_msg void OnTimer(UINT_PTR nIDEvent);
};

void C3dRightView::OnPaint()
{
    CPaintDC dc(this); // device context for painting
    // TODO: Add your message handler code here
    // Do not call CView::OnPaint() for painting messages
}

void C3dRightView::OnInitialUpdate()
{
    hdc = C3dRightView::GetDC()->m_hDC;

    /** If i open below code then left view stop displaying model **/
        COpenGlView::OnInitialUpdate();
        oglInitialize();
    //-=-=-=-=-=-=-==--=--=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

    oglBeginRendering();
    // TODO: Add your specialized code here and/or call the base class
}

void C3dRightView::oglInitialize(void)
{
    COpenGlView::oglInitialize();

}
void C3dRightView::oglDrawScene(void)
{
    // Wireframe Mode

    glShadeModel(GL_SMOOTH);    

    glClearColor(0.0f, 1.0f, 1.0f, 0.0f);

    glLoadIdentity();
    //glTranslatef(0.0f, 0.0f, -m_fZoom);//this is for zoom using left mouse click but no placing
    glTranslatef(m_fPosX, m_fPosY,-m_fZoom); // this is for placing + zooming using middle scroll button mouse click

    glRotatef(m_fRotX, 1.0f, 0.0f, 0.0f);//these two for mouse movement
    glRotatef(m_fRotY, 0.0f, 1.0f, 0.0f);
    glRotated(90,0.0f, 0.0f, -1.0f);
    glRotatef(180,1.0f,0,0.0f);
    GLenum a = glGetError();

    glBegin(GL_TRIANGLES);                              // Start Drawing A Triangle
        glColor3f(1.0f,0.0f,0.0f);                      // Red
        glVertex3f( 0.0f, 1.0f, 0.0f);                  // Top Of Triangle (Front)
        glColor3f(0.0f,1.0f,0.0f);                      // Green
        glVertex3f(-1.0f,-1.0f, 1.0f);                  // Left Of Triangle (Front)
        glColor3f(0.0f,0.0f,1.0f);                      // Blue
        glVertex3f( 1.0f,-1.0f, 1.0f);                  // Right Of Triangle (Front)
        glColor3f(1.0f,0.0f,0.0f);                      // Red
        glVertex3f( 0.0f, 1.0f, 0.0f);                  // Top Of Triangle (Right)
        glColor3f(0.0f,0.0f,1.0f);                      // Blue
        glVertex3f( 1.0f,-1.0f, 1.0f);                  // Left Of Triangle (Right)
        glColor3f(0.0f,1.0f,0.0f);                      // Green
        glVertex3f( 1.0f,-1.0f, -1.0f);                 // Right Of Triangle (Right)
        glColor3f(1.0f,0.0f,0.0f);                      // Red
        glVertex3f( 0.0f, 1.0f, 0.0f);                  // Top Of Triangle (Back)
        glColor3f(0.0f,1.0f,0.0f);                      // Green
        glVertex3f( 1.0f,-1.0f, -1.0f);                 // Left Of Triangle (Back)
        glColor3f(0.0f,0.0f,1.0f);                      // Blue
        glVertex3f(-1.0f,-1.0f, -1.0f);                 // Right Of Triangle (Back)
        glColor3f(1.0f,0.0f,0.0f);                      // Red
        glVertex3f( 0.0f, 1.0f, 0.0f);                  // Top Of Triangle (Left)
        glColor3f(0.0f,0.0f,1.0f);                      // Blue
        glVertex3f(-1.0f,-1.0f,-1.0f);                  // Left Of Triangle (Left)
        glColor3f(0.0f,1.0f,0.0f);                      // Green
        glVertex3f(-1.0f,-1.0f, 1.0f);                  // Right Of Triangle (Left)
    glEnd();    

} 
```

第二个视图文件是这样的

```
class C3dLeftView : public COpenGlView
{
    DECLARE_DYNCREATE(C3dLeftView)

protected:
    GLuint m_left_texture[53];
    C3dLeftView();           // protected constructor used by dynamic creation
    virtual ~C3dLeftView();

public:
    virtual void OnDraw(CDC* pDC);      // overridden to draw this view
#ifdef _DEBUG
    virtual void AssertValid() const;
#ifndef _WIN32_WCE
    virtual void Dump(CDumpContext& dc) const;
#endif
#endif

protected:
    DECLARE_MESSAGE_MAP()
public:
    afx_msg void OnPaint();
    virtual void OnInitialUpdate();

    void oglDrawScene(void);
    void oglInitialize(void);
    afx_msg void OnTimer(UINT_PTR nIDEvent);
};

void C3dLeftView::OnPaint()
{
    CPaintDC dc(this); // device context for painting
    // TODO: Add your message handler code here
    // Do not call CView::OnPaint() for painting messages
}

void C3dLeftView::OnInitialUpdate()
{
    hdc = C3dLeftView::GetDC()->m_hDC;
    COpenGlView::OnInitialUpdate();
    oglInitialize();
    oglBeginRendering();
    // TODO: Add your specialized code here and/or call the base class
}

void C3dLeftView::oglInitialize(void)
{
    COpenGlView::oglInitialize();

}
void C3dLeftView::oglDrawScene(void)
{
    glShadeModel(GL_SMOOTH);    

    glClearColor(0.0f, 1.0f, 0.0f, 1.0f);

    glLoadIdentity();
    //glTranslatef(0.0f, 0.0f, -m_fZoom);//this is for zoom using left mouse click but no placing
    glTranslatef(m_fPosX, m_fPosY,-m_fZoom); // this is for placing + zooming using middle scroll button mouse click

    glRotatef(m_fRotX, 1.0f, 0.0f, 0.0f);//these two for mouse movement
    glRotatef(m_fRotY, 0.0f, 1.0f, 0.0f);
    glRotated(90,0.0f, 0.0f, -1.0f);
    glRotatef(180,1.0f,0,0.0f);
    GLenum a = glGetError();

    glBegin(GL_TRIANGLES);                              // Start Drawing A Triangle
        glColor3f(1.0f,0.0f,0.0f);                      // Red
        glVertex3f( 0.0f, 1.0f, 0.0f);                  // Top Of Triangle (Front)
        glColor3f(0.0f,1.0f,0.0f);                      // Green
        glVertex3f(-1.0f,-1.0f, 1.0f);                  // Left Of Triangle (Front)
        glColor3f(0.0f,0.0f,1.0f);                      // Blue
        glVertex3f( 1.0f,-1.0f, 1.0f);                  // Right Of Triangle (Front)
        glColor3f(1.0f,0.0f,0.0f);                      // Red
        glVertex3f( 0.0f, 1.0f, 0.0f);                  // Top Of Triangle (Right)
        glColor3f(0.0f,0.0f,1.0f);                      // Blue
        glVertex3f( 1.0f,-1.0f, 1.0f);                  // Left Of Triangle (Right)
        glColor3f(0.0f,1.0f,0.0f);                      // Green
        glVertex3f( 1.0f,-1.0f, -1.0f);                 // Right Of Triangle (Right)
        glColor3f(1.0f,0.0f,0.0f);                      // Red
        glVertex3f( 0.0f, 1.0f, 0.0f);                  // Top Of Triangle (Back)
        glColor3f(0.0f,1.0f,0.0f);                      // Green
        glVertex3f( 1.0f,-1.0f, -1.0f);                 // Left Of Triangle (Back)
        glColor3f(0.0f,0.0f,1.0f);                      // Blue
        glVertex3f(-1.0f,-1.0f, -1.0f);                 // Right Of Triangle (Back)
        glColor3f(1.0f,0.0f,0.0f);                      // Red
        glVertex3f( 0.0f, 1.0f, 0.0f);                  // Top Of Triangle (Left)
        glColor3f(0.0f,0.0f,1.0f);                      // Blue
        glVertex3f(-1.0f,-1.0f,-1.0f);                  // Left Of Triangle (Left)
        glColor3f(0.0f,1.0f,0.0f);                      // Green
        glVertex3f(-1.0f,-1.0f, 1.0f);                  // Right Of Triangle (Left)
    glEnd();    

    /*************************************************************************************/

} 
```

如果在视图的 initialupdate 函数内的代码下方注释，则其他视图代码可以正常工作。

```
 COpenGlView::OnInitialUpdate();
    oglInitialize(); 
```

一些父代码的初始更新代码如何为其一个孩子而不是其中两个工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:58:14.947

**编辑：**没有原因不能`wglMakeCurrent()`像我最初想的那样，你似乎称之为够了。

原因可能是你打电话给你`oglInitialize()`的次数太多了。这取决于您如何创建视图和拆分器，但您没有发布该代码。解决它的一种方法是限制您的视图实际“初始更新”的次数。

在构造函数中将你的`hdc`成员初始化为 0（实际上总是在构造函数中初始化所有成员）：

```
COpenGlView::COpenGlView()
{
    hdc = 0;
    // ... etc your stuff
} 
```

`hdc`当为 0时，只进行一次 ogl 初始化：

```
void C3dRightView::OnInitialUpdate()
{
    if ( hdc == 0 )
    {
        hdc = GetDC()->m_hDC;
        COpenGlView::OnInitialUpdate();
        oglBeginRendering();
    }
} 
```

这里也：

```
void C3dLeftView::OnInitialUpdate()
{
    if ( hdc == 0 )
    {
        hdc = GetDC()->m_hDC;
        COpenGlView::OnInitialUpdate();
        oglBeginRendering();
    }
} 
```

我相信这应该有效。

**Edit2：**尝试了您的代码。`C3dRightView::OnInitialUpdate`不像我上面贴的。我不确定是什么弄乱了初始化。例如，以下修复 `CChildFrame::OnCreateClient`似乎有效：

```
if (!m_wndSplitter.CreateView( 0, 1, RUNTIME_CLASS(C3dRightView), CSize(cr.Width()/2, cr.Height()), pContext))
{
    MessageBox(L"Error setting up splitter frames!", L"Init Error!", MB_OK | MB_ICONERROR);
    return FALSE;
}

// had to add this line here:
m_wndSplitter.GetPane( 0, 1 )->SendMessage(WM_INITIALUPDATE);

return TRUE; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T13:44:27.533

即使可能会迟到，但这是我的答案，将来可以帮助您:)

在 Ontimer 函数中调用`pdoc->UpdateAll(NULL,NULL,NULL)`函数。pdoc 是指向您的文档类的指针。它将请求所有视图更新，并且您将让两个窗口工作:)。

# ruby - 系统调用中的参数

> ID：13368938
> 
> 赞同：0
> 
> 时间：2012-11-13T21:16:08.103
> 
> 标签：ruby

[我在这里](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)阅读 Ruby`system`方法的文档。如果我输入选项（指定下载目录），这算作一个参数还是两个参数，还是两者之一？`-P /public/google`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T23:32:30.443

这实际上取决于您使用哪种形式的系统。如果你传递一个命令字符串，ala：

```
system 'somecmd -P /public/google' 
```

命令字符串将通过 shell 进行解释，shell 将对其进行解析，对空格进行标记，从而为 somecmd 提供两个参数。同样，如果您使用参数列表形式并将字符串分解为空格分隔的标记，例如：

```
system 'somecmd', '-P', '/public/google'
system *%w{ somecmd -P /public/google } 
```

但是，如果您使用参数列表形式，并将`-P /public/google`其作为单个参数发送，它将在 somecmd 中显示为带有嵌入空格的单个参数：

```
system 'somecmd', '-P /public/google' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:21:41.557

它算作两个。由于两者之间有一个空格，shell 会看到它并将其拆分为`-P`and `/public/google`（如果您使用过参数，即使在 ruby​​ 中，shell 也会将它们作为单独的参数传递给脚本）。

# c# - SharpDX 和 D3DImage 的性能问题

> ID：13368940
> 
> 赞同：1
> 
> 时间：2012-11-13T21:16:16.977
> 
> 标签：c#, wpf, directx, dispatcher, sharpdx

我有一个控件，它使用 D3DImage 来托管 SharpDX DirectX9 表面，并允许用于平移、缩放和与世界对象交互，结果非常棒。性能实际上是惊人的一致 60fps，除非窗口被最小化并重新打开，或者用户锁定然后解锁屏幕。当窗口重新获得焦点时，fps 下降到大约 25-30fps。我可以通过将控件卸载并加载回其容器然后 BOOM，60fps 来“修复”该问题。

我使用设置为 10 毫秒的 DispatcherTimer 调用主渲染函数。之前，我使用的是 CompositionTarget.Rendering 事件，但性能不如使用 DispatcherTimer。我相当确定我正在正确处理丢失的资源。关于这些每秒丢失的帧有什么想法吗？

编辑： [我有同样的问题](http://www.gamedev.net/topic/613659-c-dx9-slow-down-after-losing-window-focus/)。不幸的是，进行自动设备重置并不能解决问题，但如果我有一个执行相同重置方法的按钮，那么我的 fps 会恢复正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:05:29.803

锁定/解锁屏幕会导致设备丢失。但你可能知道这一点。

无论如何，我也在 WPF 中使用 D3DImage 。当我打电话时，我的性能问题就结束了

```
D3DImage.SetBackBuffer(D3DResourceType.IDirect3DSurface9, IntPtr.Zero) 
```

在每台丢失的设备上。我曾经在设备丢失后遇到响应问题，直到我意识到 WPF 仍然持有对纹理的引用。当然，当您有更新的纹理时，您应该稍后重新设置后台缓冲区。

虽然不清楚幕后究竟出了什么问题，但很明显 D3DImage 会为您的纹理保留一个引用计数，这可能会在设备丢失的情况下阻止成功恢复。就我而言，我们根本没有更新。

对于轶事的回答很抱歉...但是在真正的 D3DImage 专家进入房间之前，总比没有好。

PS 我正在使用 SlimDX，但我认为这并不重要……据我所知，SharpDX 是 SlimDX 的一个分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-19T19:19:11.003

有一个重载`SetBackBuffer`需要一个额外的`Boolean`标志：

> [D3DImage.SetBackBuffer(D3DResourceType, IntPtr, Boolean)](https://msdn.microsoft.com/en-us/library/hh140978(v=vs.110).aspx)
> 
> 当调用**SetBackBuffer** (D3DResourceType, IntPtr) 重载，或者调用 SetBackBuffer(D3DResourceType, IntPtr, Boolean) 重载且**enableSoftwareFallback**参数设置为 false 时，[WPF] 渲染系统在前缓冲区变为不可用且不显示任何内容。

我也不是专家，但我猜这就是正在发生的事情；因为您没有将该标志设置为“true”，所以 WPF`Release()`在退出锁定后立即调用 D3D 表面的最后一个 COM 引用计数。这似乎需要您维护自己的额外引用计数。

一方面，我注意到，即使在从 WPF 锁定/解锁往返“返回”“使用”表面之后，您仍然需要*在下一个*表面取代它之前**释放它**（即成功调用**d3dimg.SetBackBuffer**）。否则，当 WPF 窗口在屏幕上拖动时会闪烁。鉴于这是我发现的用于检测 WPF 何时真正使用*您的*缓冲区的唯一可靠方法，因此 WPF 关注 AddRef'ing 或 Release'ing 它似乎毫无意义。

 ****通常令人困惑的`D3DImage`是，`IDirect3DDevice9`正在运行的 WPF 并没有真正与`IDirect3DDevice9`生成你作为后台缓冲区的表面的那个相关联......对于 WPF。整个`Lock/Unlock`业务大概是为了 WPF 的利益，与你自己的（可能是可锁定的？）`IDirect3DSurface9`rendertarget 的生存无关。

* * *

**谨防！**
如果使用`D3DImage.TryLock`，请注意它，嗯......我们应该说，*非常规*语义：即使在返回**false**`Unlock`的情况下也必须调用。有关更多信息，请参阅[https://stackoverflow.com/a/39581727/147511](https://stackoverflow.com/a/39581727/147511)。`TryLock`****

# android - 我怎样才能在android中做一个带有2个标签的按钮？

> ID：13368941
> 
> 赞同：-1
> 
> 时间：2012-11-13T21:16:22.030
> 
> 标签：android, user-interface, button, textarea

我怎样才能在android中用2个不同样式的标签做1个按钮？（如图片）谢谢![在此处输入图像描述](../Images/77b0cc9f968b6193d4bfbf8385182f06.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T21:27:22.087

您可以创建自定义视图。我通过为布局设置自定义按钮样式并将布局用作按钮，并以这种方式添加了两个 textView：

```
<LinearLayout android:id="@+id/customButtonLayout"
android:layout_height="wrap_content" style="@android:style/Widget.Button"
android:layout_width="wrap_content">
<TextView android:text="First" android:id="@+id/firstTextView"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:textColor="#000"></TextView>
<TextView android:textColor="#000" android:text="Second"
    android:layout_height="wrap_content" android:id="@+id/secondTextView"
    android:layout_width="wrap_content" android:layout_marginLeft="10dp"></TextView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:21:39.230

我能想到的将不同文本样式应用于 Button 的唯一方法是使用 HTML（带有`HTML.fromHTML()`）。但我不建议这样做，因为它可能看起来不太好。改用布局（线性 - 或 RealtivLayout）。向其中添加两个 TextView 并将选择器设置为背景（以具有“点击效果”）。

# ruby-on-rails-3 - 在 Rails 3 应用程序中本地使用 Heroku Postgres 数据库

> ID：13368946
> 
> 赞同：1
> 
> 时间：2012-11-13T21:16:34.590
> 
> 标签：ruby-on-rails-3, postgresql, heroku, database-migration

我已将现有 Heroku 应用程序中的数据库下载到本地计算机上。我下载的数据在一个文件中；让我们称之为`herokuapp.db`。我还安装了 Postgres，我可以成功创建一个新的 Postgres 数据库并让我的 Rails 应用程序引用它。我想要做的是将我从 Heroku 下载的数据移动到这个数据库中，或者使用下载的数据创建一个新的 Postgres 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:31:08.207

使用`pg_restore --verbose --clean --no-acl --no-owner -d [database_name] [herokuapp.db]` 参见[https://devcenter.heroku.com/articles/export-from-heroku-postgres](https://devcenter.heroku.com/articles/export-from-heroku-postgres)了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T23:01:36.920

我刚刚用 Will 建议的类似技术解决了同样的问题（感谢 Will！）。

```
$ heroku pgbackups:capture
$ curl -o latest.dump `heroku pgbackups:url`
$ pg_restore --verbose --clean --no-acl --no-owner -d [database_name] latest.dump 
```

database_name 可以在 database.yml 文件的开发部分中找到。

**编辑**
我最近用 Postgres.app 再次执行了这个任务，上面的最后一个命令不起作用。我收到此错误消息：

```
pg_restore: connecting to database for restore
pg_restore: [archiver (db)] connection to database "[database_name]" failed: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?
pg_restore: *** aborted because of error 
```

这是有效的更新命令：

```
$ pg_restore --verbose --clean --no-acl --no-owner -h localhost -U $USER -d [database_name] latest.dump 
```

# python - 使用 PyQt 绘制由多个点组成的线

> ID：13368947
> 
> 赞同：3
> 
> 时间：2012-11-13T21:16:42.273
> 
> 标签：python, pyqt, drawing, pyqt4

我想使用 PyQt 在 Python 脚本中通过鼠标单击绘制一条由多个点组成的线。我需要所有的 ponts 坐标，我希望能够删除这条线。这是我的脚本完成所有工作，除了图形线条图本身，它只是打印它所做的事情：

```
#!/usr/bin/python3

import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class endomess(QMainWindow):

    def __init__(self):
        QMainWindow.__init__(self)
        self.draw = False

    def mousePressEvent(self, event):

        if event.button() == Qt.LeftButton:

            if self.draw == False:
                print('Starting to draw at', str(event.pos()))
                self.draw = True
                self.linePoints = []

            elif self.draw == True:
                print('Appending', str(event.pos()))

            self.linePoints.append(event.pos())

        elif event.button() == Qt.RightButton:
            if self.draw == True:
                print('Finished drawing. List of all points:', str(self.linePoints))
                self.draw = False

def main(argv):
    app = QApplication(argv, True)
    wnd = endomess()
    wnd.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main(sys.argv) 
```

所以，这是我的问题：我如何实际绘制可以通过上述脚本定义的线？我已经看过 scribble.py 和一些 Qt 绘画文档，但我不明白。对于 Qt 经验丰富的人来说，这可能不是问题吗？

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T22:49:57.457

您可能应该使用[图形视图框架](https://doc.qt.io/qt-4.8/graphicsview.html)来绘制线条，而不是尝试直接绘制它们。

这是一个让您入门的基本演示：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.view = View(self)
        self.button = QtGui.QPushButton('Clear View', self)
        self.button.clicked.connect(self.handleClearView)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.view)
        layout.addWidget(self.button)

    def handleClearView(self):
        self.view.scene().clear()

class View(QtGui.QGraphicsView):
    def __init__(self, parent):
        QtGui.QGraphicsView.__init__(self, parent)
        self.setScene(QtGui.QGraphicsScene(self))
        self.setSceneRect(QtCore.QRectF(self.viewport().rect()))

    def mousePressEvent(self, event):
        self._start = event.pos()

    def mouseReleaseEvent(self, event):
        start = QtCore.QPointF(self.mapToScene(self._start))
        end = QtCore.QPointF(self.mapToScene(event.pos()))
        self.scene().addItem(
            QtGui.QGraphicsLineItem(QtCore.QLineF(start, end)))
        for point in (start, end):
            text = self.scene().addSimpleText(
                '(%d, %d)' % (point.x(), point.y()))
            text.setBrush(QtCore.Qt.red)
            text.setPos(point)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.resize(640, 480)
    window.show()
    sys.exit(app.exec_()) 
```

# jquery - jquery 移动和多行标题？

> ID：13368951
> 
> 赞同：0
> 
> 时间：2012-11-13T21:16:57.010
> 
> 标签：jquery, jquery-mobile

我正在尝试在标题中添加一行文本（但不会使默认标题高度更大）。这可能吗？

```
<div data-role="header" data-position="fixed">
    <h1><?=$song_title;?><br/><?=$artist_name;?></h1>
</div> 
```

我得到的只是带有多行的更大标题高度，因为字体不会改变它的大小。

我该如何编辑它以使字体更小，从而可以在那里挤另一条线？但不影响其他页面的其余css？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:23:02.410

我也遇到了这个问题。你必须像这样覆盖css。

[http://jsfiddle.net/7EP7U/1/](http://jsfiddle.net/7EP7U/1/)

```
#page2 .ui-header h1 {
  font-size: .7em;   
}​ 
```

# diagram - 在 Visio 2013（预览版）中创建的活动图？

> ID：13368955
> 
> 赞同：0
> 
> 时间：2012-11-13T21:17:09.160
> 
> 标签：diagram, visio, activity-diagram

过去我使用的是 Rational Rose，现在我正在尝试切换到 Visio。但是我可以在 Rose 中轻松找到的许多东西，在 Visio（2013 预览版）中无法或很难找到。

我已经查看了可用的图表可能性（在创建新文件时），但我无法决定选择什么，什么最适合制作活动图。

请告诉我。什么是最好的选择？我应该如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:23:14.503

对于活动图，单击更多形状，然后单击软件和数据库，在 Softare 类别中，选择 UML 活动。

# javascript - 如何在 jQuery 中切换就地编辑功能？

> ID：13368958
> 
> 赞同：2
> 
> 时间：2012-11-13T21:17:19.063
> 
> 标签：javascript, jquery, edit-in-place

我一直在玩[jQuery In Place Editor](http://code.google.com/p/jquery-in-place-editor/)，但我不知道如何正确禁用它。以下是我到目前为止的代码。

我正在使用 jQuery`toggle`方法来初始化和终止链接列表上的插件功能。下面的代码中有一些额外的位可能与我的问题无关，但我将它们留在那里以防万一。

问题是下面的代码在前 2 次点击时按我预期的方式工作（即第一次点击 - 启用 editInPlace 插件，第二次点击 - 禁用它），但**它不会在第 3 次点击时重新启用就地编辑功能**。

任何想法为什么？

```
(shoppingList.editButton).toggle(function() {
            (shoppingList.editButton).attr('value', 'Finish editing');
            (shoppingList.$ingrLinks).unbind('click', shoppingList.ingredients) // disable some functionality on links
                                     .addClass('inplace-editor') // add class to links I want to be editable
                                     .removeAttr('href') // make links unclickable
                                     .editInPlace({ // editInPlace plugin initialized
                                         url: 'http://localhost:8000/edit-ingredient/',
                                         show_buttons: true
                                     });

        }, function() {
            (shoppingList.editButton).attr('value', 'Edit items');
            (shoppingList.$ingrLinks).bind('click', shoppingList.ingredients) // bring back the functionality previously removed
                                     .removeClass('inplace-editor') // remove the class from links that were editable
                                     .attr('href', '#') // make the links clickable again
                                     .unbind('.editInPlace') // remove editInPlace plugin functionality
                                     ;
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:17:20.910

用链接的克隆替换链接。当使用`$.clone()`参数 false 时，所有事件处理程序都将从克隆中删除。

第二个功能（保留第一个功能）：

```
 function() {
            (shoppingList.editButton).attr('value', 'Edit items');
              //close the editor(s) when still active
            $('.inplace_cancel',shoppingList.$ingrLinks).trigger('click');
              //create clones of the items
            var clones=(shoppingList.$ingrLinks).clone(false)
                        .each(function(i,o) {
                          //restore the original behaviour
                            $(o)//o is a clone 
                              .bind('click', shoppingList.ingredients) 
                              .removeClass('inplace-editor') 
                              .attr('href', '#')
                                //replace the link inside the document with it's clone
                              .replaceAll($(shoppingList.$ingrLinks[i]));            
            });
            //assign the clones to shoppingList.$ingrLinks
            shoppingList.$ingrLinks=clones;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:41:36.387

每次用户单击时，都会执行传递给 toggle 的第一个函数。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-14T21:03:34.280

找到了一个可行的解决方案：

```
$('input[name="edit-items"]').toggle(function() {
    $(this).attr('value', 'Finish editing');
    (shoppingList.$ingrLinks).unbind('click', shoppingList.ingredients) // disable highlighting items
                             .removeAttr('href');
    $('.editme').editable("enable");
    $('.editme').editable('http://localhost:8000/edit-ingredient/');
}, function() {
    $(this).attr('value', 'Edit item');
    (shoppingList.$ingrLinks).attr('href', '#');
    $('.editme').editable("disable");
    (shoppingList.$ingrLinks).bind('click', shoppingList.ingredients) // re-enable highlighting items

}); 
```

# drupal - 根据创建的 HTML 输出创建新的 Drupal 节点

> ID：13368960
> 
> 赞同：0
> 
> 时间：2012-11-13T21:17:32.670
> 
> 标签：drupal, drupal-6, drupal-modules, dynamic-content

我在 Drupal 6 中有一个模块，它解析 XML 提要并创建 HTML 输出。本质上，我有一长串应该填充该页面的 HTML。目前这是在本地服务器上完成的。

我想做的是获取该输出并用它创建新节点。我已经看到，通过 Feeds 模块，我可以导入内容。我想做的是有以下程序：

1.  运行脚本（cron 或用户发起）
2.  生成 HTML 内容并将其放入某种本地文件
3.  使用我的生产服务器上的模块导入该内容（Feed 或其他）

正如我所提到的，我的 HTML 内容目前正是我想要的。但是，它需要成为静态节点（为了后代）。我可以以编程方式为每个节点生成 HTML，但是我不确定最好的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:43:01.190

查看[导入 HTML](http://drupal.org/project/import_html)模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:29:20.397

我只是以编程方式创建了 Drupal 节点。结果发现是最简单的。

# php - 使用 Slim 框架和 Twig 模板时出错

> ID：13368963
> 
> 赞同：3
> 
> 时间：2012-11-13T21:17:34.480
> 
> 标签：php, twig, slim

我正在尝试使 Slim 与 Twig 模板系统一起工作，这是我的一部分`index.php`

```
// Twig [Template]
require 'Extras/Views/Twig.php';
TwigView::$twigDirectory = __DIR__ . '/vendor/Twig/lib/Twig/';

//Slim
require 'Slim/Slim.php';
\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim(array(
    'view' => $twigView
)); 
```

这是我的结构

```
Extras
    |_Views
        |_Twig.php
Slim
templates
vendor
    |_Twig
        |_lib
            |_Twig
index.php 
```

我尝试了几次其他配置并搜索购买我总是得到这个错误：

```
Fatal error: Class 'Slim\View' not found in C:\wamp\www\slim\Extras\Views\Twig.php on line 43 
```

有人能帮我一下吗？我发现的所有例子都是使用作曲家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-02T17:44:35.980

现在 Slim-Extras 已弃用，我们必须使用 Slim-Views ( [https://github.com/codeguy/Slim-Views](https://github.com/codeguy/Slim-Views) )：

```
require "Slim/Slim.php";
\Slim\Slim::registerAutoloader();

$slim = new \Slim\Slim( array(
        'debug' => false, 
        'templates.path' => 'fooDirTemplates', 
        'view' => '\Slim\Views\Twig'
    ));

$twigView = $slim->view();
$twigView->parserOptions = array(
        'debug' => false
    );
$twigView->parserDirectory = 'Twig';
$twigView->parserExtensions = array(
        '\Slim\Views\TwigExtension'
    );

$slim->notFound( 'fooNotFoundFunction' );
$slim->error( 'fooErrorFunction' );

// SLIM routes...

$slim->run(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T06:22:18.477

好的，我解决了。这是解决方案：

```
// Slim PHP
require "Slim/Slim.php";
\Slim\Slim::registerAutoloader();

// Twig
require "Twig/lib/Twig/Autoloader.php";
Twig_Autoloader::register();

// Start Slim.
/** @var $app Slim */
$app = new \Slim\Slim(array(
    "view" => new \Slim\Extras\Views\Twig()
)); 
```

这就是我现在的结构。

```
Slim
|_Extras
    |_Views
        |_Twig.php
|_Slim
templates
Twig
 |_lib
   |_Twig
      |_Autoloader.php
index.php 
```

¡我希望这对其他人有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-16T18:29:45.503

如果有人仍然遇到这个问题。对我来说，问题是我已经安装了 slim/views 和 slim/twig-view。我卸载了 slim/views 并且它有效

# memory-management - 在32位寻址的字节寻址空间中，引用8位占用32位内存？

> ID：13368964
> 
> 赞同：1
> 
> 时间：2012-11-13T21:17:35.963
> 
> 标签：memory-management, operating-system

在32位寻址的字节寻址空间中，引用8位占用32位内存？

那么寻址是内存的主要部分吗？

我是否正确地概念化了这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:19:42.613

不。它需要 32 位来引用任何大小的连续区域。如果你有一个 1 兆字节的缓冲区，你不会在其中存储一个指向每个字节的指针，你只会存储一个指向它开头的指针。

# php - 尝试通过 jQuery .post() 上传文件 - 文件输入未显示在后端（使用 codeigniter）

> ID：13368966
> 
> 赞同：0
> 
> 时间：2012-11-13T21:17:44.950
> 
> 标签：php, jquery, ajax, codeigniter, upload

首先我想问你不建议我求助于一个 jQuery 插件来解决我的问题。我只是不愿意让我的应用程序与插件一起工作（它阻止我学习！）

我有一个包含一堆字段的表单，我通过使用 jQuery 传递给我的后端`$.post()`这就是我的 jQuery 函数：

```
 $.post(
    "/item/edit",
    $("#form").serialize(),
    function(responseJSON) {
        console.log(responseJSON);
    },
    "html"
); 
```

这就是我打开表单的方式：

```
<form action="http://localhost/item/edit" method="post" accept-charset="utf-8" class="form-horizontal" enctype="multipart/form-data"> 
```

这是由 codeigniter 的`form_open()`方法自动生成的（因此 action="" 有一个值。虽然这无关紧要，因为我在表单末尾没有提交按钮）

在我的`#form`我有这个作为我的文件输入：`<input type="file" name="pImage" />`

当按下适当的按钮并`$.post()`调用该方法时，我的后端只需像这样打印变量：`print_r($_POST)`并且在打印的变量中缺少“pImage”元素。我认为文件可能不会作为数组中的元素出现，所以我继续尝试使用此 codeigniter 函数上传文件：`$this->upload->do_upload('pImage');`我收到错误消息：“您没有选择要上传的文件。”

关于如何克服这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:47:30.930

您不能使用 AJAX 发布图像，我也必须在这里找到[PHP jQuery .ajax() 文件上传服务器端理解](https://stackoverflow.com/questions/8481682/php-jquery-ajax-file-upload-server-side-understanding)

最好的办法是使用隐藏的 iframe 模拟 ajax 调用，表单必须将 enctype 设置为 multipart/formdata

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:52:16.853

文件不会使用 AJAX 发送到服务器端[PHP LETTER中最好和最简单的 JQuery Ajax 上传器之一](http://www.phpletter.com/Our-Projects/AjaxFileUpload/)

您只需要在标题中正常包含 js，Jquery 代码将如下所示

> $.ajaxFileUpload({
> 
> ```
>  url:'http://localhost/speedncruise/index.php/snc/upload/do_upload',
> 
>     secureuri:false,
>     fileElementId:'file_upload',
>     dataType: 'json',
>     data    : {
>         'user_email' : $('#email').val()
>     },
>     success: function (data, status) {
>       //  alert(status);
>        // $('#avatar_img').attr('src','data');
>        
>     }
>     ,
>     error: function (data, status, e) {
>         console.log(e);
>     }
> }); 
> ```

希望这可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T15:59:55.710

我不能用 codeigniter 和 Ajax 做到这一点，我将图像传递给 base64 并在控制器中再次转换为文件

```
//the input file type
<input id="imagen" name="imagen" class="tooltip" type="file" value="<?php if(isset($imagen)) echo $imagen; ?>">

//the js
$(document).on('change', '#imagen', function(event) {
  readImage(this);
});

function readImage(input) {
    var resultado='';
    if ( input.files && input.files[0] ) {
        var FR= new FileReader();
        FR.onload = function(e) {
            //console.log(e.target.result);
            subirImagen(e.target.result);
        };       
        FR.readAsDataURL( input.files[0] );
    }
}

function subirImagen(base64){
    console.log('inicia subir imagen');
    $.ajax({
        url: 'controller/sube_imagen',
        type: 'POST',
        data: {
            imagen: base64,
        }
    })
    .done(function(d) {
        console.log(d);
    })
    .fail(function(f) {
        console.log(f);
    })
    .always(function(a) {
        console.log("complete");
    });
}

//and the part of de controller
public function sube_imagen(){
    $imagen=$this->input->post('imagen');
    list($extension,$imagen)=explode(';',$imagen);
    list(,$extension)=explode('/', $extension);
    list(,$imagen)=explode(',', $imagen);
    $imagen = base64_decode($imagen);
    $archivo='archivo.'.$extension;
    file_put_contents('imagenes/'.$archivo, $imagen);
    chmod('imagenes/'.$archivo, 0777); //I use Linux and the permissions are another theme
    echo $archivo; //or you can make another thing
} 
```

ps.：对不起我的英语 n_nU

# c# - 列表错误 .Contains(T) 在 LINQ 查询中

> ID：13368973
> 
> 赞同：4
> 
> 时间：2012-11-13T21:18:11.543
> 
> 标签：c#, linq, generics

想知道为什么这不起作用。洞察力赞赏。

```
 static void Main(string[] args)
    {
        List<int> foo = new List<int> { 1, 2, 3 };
        var myResult = MyTest<int>(foo);
    }

    private static List<int> MyTest<T>(List<T> input)
    {
        List<int> bar = new List<int> { 2, 3, 4 };
        return bar.Where(b => input.Contains(b)).ToList();
    } 
```

MyTest() 的预期输出是 List { 2, 3 }。但是，编译器在 上报两个错误`input.Contains(b)`，如下：

1.  参数 1：无法从 'int' 转换为 'T'

2.  'System.Collections.Generic.List.Contains(T)' 的最佳重载方法匹配有一些无效参数

如果我不使用通用列表，这个 Where() 子句可以正常工作。

这是对我现实世界问题的简化，所以请不要纠结于“你为什么要写这个？” 问题是错误及其发生的原因。

**为（希望）清晰而修订：**

```
namespace SandBox
{

class Foo
{
    public int FooInt { get; set; }
    public string FooString { get; set; }
}

class Program
{
    private static List<Foo> fooList = new List<Foo> {
            new Foo() {FooInt = 1, FooString = "A"},
            new Foo() {FooInt = 2, FooString = "B"},
            new Foo() {FooInt = 3, FooString = "C"}
    };

    static void Main(string[] args)
    {
        List<int> myIntList = new List<int> { 1, 2 };
        var myFirstResult = GetFoos<int>(myIntList);

        List<string> myStringList = new List<string> { "A", "B" };
        var mySecondResult = GetFoos<string>(myStringList);
    }

    /// <summary>
    /// Return a list of Foo objects that match the input parameter list
    /// </summary>
    private static List<Foo> GetFoos<T>(List<T> input)
    {
        //***
        // Imagine lots of code here that I don't want to duplicate in 
        // an overload of GetFoos()
        //***

        if (input is List<int>)
        {
            //Use this statement if a list of integer values was passed in
            return fooList.Where(f => input.Contains(f.FooInt));
        }
        else if (input is List<string>)
        {
            //Use this statement if a list of string values was passed in
            return fooList.Where(f => input.Contains(f.FooString));
        }
        else
            return null;
    }
}
} 
```

上报告了相同的编译器错误`input.Contains(f.Property)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:22:01.007

`input`应该是一个`List<int>`

然后，每当您调用该函数时，如果`T`不是 int，您就会知道它无论如何都会返回一个空列表。

`T`当不是 int时，该函数没有多大意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:28:38.903

也是另一种解决方案

```
static void MainT(string[] args)
{
    List<int> foo = new List<int> { 1, 2, 3 };
    var myResult = MyTest<int>(foo);
}

private static List<int> MyTest<T>(List<T> input) where T : IEquatable<int>
{
    List<int> bar = new List<int> { 2, 3, 4 };
    return bar.Where(b => input.Any(i => i.Equals(b))).ToList();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T21:24:33.140

单独来看这个函数。

```
private static List<int> MyTest<T>(List<T> input)
{
    List<int> bar = new List<int> { 2, 3, 4 };
    return bar.Where(b => input.Contains(b)).ToList();
} 
```

如果 T 是对象......或字符串......没有什么能阻止 T 成为那些类型。如果 T 是这些类型中的一种，那么该语句`input.Contains(b)`将没有意义。

编译器抱怨是因为您允许使用方法主体中的语句没有意义的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T21:22:11.337

尝试这个：

```
static void Main(string[] args)
{
    List<int> foo = new List<int> { 1, 2, 3 };
    var myResult = MyTest<int>(foo);
}

private static List<int> MyTest<T>(List<T> input)
{
    List<int> bar = new List<int> { 2, 3, 4 };
    return bar.Where(b => input.OfType<int>().Contains(b)).ToList();
} 
```

问题是编译器不知道 T 是什么类型。因为 T 可以是任何你不能调用需要 int ( `input.Contains`) 的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T21:30:05.773

编译器不能保证任何 <T> ——**任何 <T>**、 DateTime 、 object 等等—— 都可以转换为 int。这就是为什么你得到你的第一个错误。

在某些情况下，您可以在函数的签名中指定一种对象：

```
 private static List<int> MyTest<T>(List<T> input)  where T : someObject 
```

这不适用于您的情况，因为 int 是一个结构。您可以通过许多其他方式使用它（给出的其他答案概述了一些很好的方法），但您必须以某种方式调整您当前的策略。

# c++ - 关于QuickFIX消息破解的问题

> ID：13368975
> 
> 赞同：14
> 
> 时间：2012-11-13T21:18:24.897
> 
> 标签：c++, quickfix

来自 FIX 新手的非常基本的问题

查看[http://www.quickfixengine.org](http://www.quickfixengine.org)上的文档并阅读 stackoverflow 上的帖子，我看到很多关于消息“破解”的讨论。我想我有点明白这个想法，但感觉我仍然不完全清楚。

有人可以大致解释一下这到底是什么（为什么有必要？这听起来像一个黑客），为什么它似乎只与收到的 FIX 消息有关，而在使用 Python 时根本不使用？

谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-14T03:57:39.260

在实践中，您需要知道的是：

你的`fromApp()`回调得到一个`Message`对象。该消息实际上是 NewOrderSingle 或 ExecutionReport 之类的。QF 不是让您弄明白，而是让您从`MessageCracker`. 要使用它，请调用`crack()`您的`fromApp()`，如下所示：

```
void fromApp( const FIX::Message& message, const FIX::SessionID& sessionID )
  throw( FIX::FieldNotFound&, FIX::IncorrectDataFormat&, FIX::IncorrectTagValue&, FIX::UnsupportedMessageType& )
{
  crack(message, sessionID);
} 
```

这`crack()`是什么：

1.  将您`Message`的转换为正确的子类（例如`NewOrderSingle`，`ExecutionReport`等）
2.  调用您的用户定义的`onMessage(subtype)`回调（如果已定义）。如果未定义，则会引发`UnsupportedMessageType`异常，您的应用程序将自动向交易对手发送 BusinessMessageReject (35=j)。

那么，您想处理 NewOrderSingle 消息吗？太好了，只需定义一个`onMessage(NewOrderSingle)`回调。

```
void onMessage( const FIX42::NewOrderSingle& message, const FIX::SessionID& )
{
  // Do whatever you want with your NewOrderSingle message's content.
  // Note that this message and the one passed to crack() are the same, content-wise.
} 
```

你想处理 ExecutionReports 吗？定义`onMessage(ExecutionReport)`. 等等。

但是那些你不想处理的消息类型*呢*？如果您必须添加处理程序来拒绝所有其他消息类型，那会很糟糕，但幸运的是，您不必这样做。正如我之前所说，如果你不定义一个`onMessage()`，QF 会为你拒绝它。（如果您想吞下特定的消息类型并忽略它而不拒绝，那么只需定义一个`onMessage()`没有正文的调用。）

这是否清楚一点？也许现在[QF 文档中的这个页面](http://quickfixengine.org/quickfix/doc/html/receiving_messages.html)可能会更容易阅读——底部部分讨论了 MessageCracker。

**注意：** MessageCracker 不处理会话级（又名“管理员”）消息。如果您想为登录或心跳消息添加自定义处理，则必须在其中明确执行`fromAdmin()`（有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/13348939/how-to-make-the-login-part-in-quickfix/13351764)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:42:13.453

我将 quickfixj 用于 Java。破解使用和接口将破解的消息返回给接口实现。实现者将覆盖接口的方法，以便它可以单独处理每种消息类型。

消息破解者接受一条普通消息并将该消息作为特定类型的消息返回。这样做的好处是字典将限制消息的字段，以便更容易查找每个字段。

# android - CursorLoader 不在 Fragment 中显示数据

> ID：13368985
> 
> 赞同：0
> 
> 时间：2012-11-13T21:19:03.430
> 
> 标签：android, android-fragments, android-contentprovider, android-cursorloader

我有一个应用程序，它执行以下操作：带有 ListView 的 Activity 显示三个项目：Beginning、Intermediate、Advanced。根据用户的选择，应用程序应该转到带有 ListView 的 Fragment，它显示来自底层 SQLiteDatabase 的所有项目，其中 Level=Beginning 或 Intermediate 或 Advanced。这第二步对我不起作用。我已经通过调试器验证了我的数据库中有数据，所以这不是问题。这是我在初始 Activity 中的代码 - 这是来自 onItemClick 方法：

```
final String[] values = new String[] {
            "Beginning", "Intermediate", "Advanced"
    };
public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            Intent choice = new Intent(getApplicationContext(), com.MyKnitCards.project.StitchList.class);
            Bundle dataBundle = new Bundle();
            String chosenValue = values[position];
            dataBundle.putString("Level",chosenValue);
            choice.putExtras(dataBundle);
            try {
                startActivity(choice);
}
        } 
```

这是 StitchList 类，它是 Fragment 类，在上面的代码中引用：

```
public class StitchList extends FragmentActivity {
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.stitchfragment);
} 
```

}

这是 Fragment 的 XML 文件，称为stitchfragment.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >
<fragment android:id="@+id/frag_stitchlist"
android:layout_width="200dp"
android:layout_height="match_parent"
android:layout_marginTop="?android:attr/actionBarSize"
class="com.MyKnitCards.project.ListFrag" />
<fragment android:id="@+id/frag_stitchdetail"
android:layout_width="match_parent"
android:layout_height="match_parent"
class="com.MyKnitCards.project.DetailFrag" />
</LinearLayout> 
```

这是 ListFrag 类。我正在使用支持库和带有 ContentProvider 的 CursorLoader，称为 StitchProvider；SQLiteDatabase 称为 SQLData：

```
public class ListFrag<Cursor> extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {

private static final String STITCHTABLE_BASEPATH = "MyStitches_tbl";
private static final String AUTHORITY = "com.MyKnitCards.project.SQLData";
public static final Uri STITCHES_URI = Uri.parse("content://" + AUTHORITY + "/" + STITCHTABLE_BASEPATH);
private static final String[] PROJECTION = new String[] { "_id", "stitchname" };
private SimpleCursorAdapter mAdapter;
private static final int LOADER_ID = 0;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    Intent myData = getActivity().getIntent();
    Bundle info = myData.getExtras();   

    String[] dataColumns = { "stitchname", "_id" };
    int[] viewIDs = { R.id.frag_stitchlist };
    mAdapter = new SimpleCursorAdapter(getActivity(), android.R.layout.simple_list_item_1, null, dataColumns, viewIDs, 0);
    setListAdapter(mAdapter);
    getLoaderManager().initLoader(0, info, (LoaderCallbacks<Cursor>) this); 

}

public void onListItemClick(ListView l, View v, int position, long id) {
    String item = (String) getListAdapter().getItem(position);
    DetailFrag frag = (DetailFrag) getFragmentManager().findFragmentById(R.id.frag_stitchdetail);
    if (frag != null && frag.isInLayout()) {
        frag.setText(item);
    }
}

public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String selection = "stitchlevel='" + args.getString("Level") + "'";
    return (Loader<Cursor>) new CursorLoader(getActivity(), STITCHES_URI,
            PROJECTION, selection, null, null); 
}

public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    switch (loader.getId()) {
      case LOADER_ID:
        mAdapter.swapCursor((android.database.Cursor) cursor);
        break;
    }

}
public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.swapCursor(null);

} 
```

}

onListItemClick 方法用于在详细信息片段中显示数据，但我从来没有走到这一步。根据 Intent 中的数据从数据库中检索到的项目列表永远不会显示。

一些可能的问题/问题浮现在脑海中：

1) 我在 onCreateLoader 方法中的查询语法是否正确？例如，它应该是“stitchlevel='Beginning'”。我知道 args.getString("Level") 中的数据是有效的，因为我已经在调试器中完成了它，但是这里的语法是否正确？我假设它应该是标准的 SQL 语法，但是...... 2）在片段的 onActivityCreated 方法中为 viewID 分配值时，我是否指向正确的位置？3) 同样，在下一行 SimpleCursorAdapter 中，这里的 android.R.layout.simple_list_item_1 是否正确？还是应该是 R.layout.stitchfragment？4）我在ContentProvider的查询方法上放了一个断点，我从来没有打过断点。创建 CursorLoader 时不应该吗？此外，如果我在 List Fragment 的 onLoadFinished 方法上设置断点，光标为空。我错过了什么 5) 我被告知 Fragment 的 onActivityCreated 方法中的 dataColumns 应该包含我的表的 _id 列。真的吗？这对我来说似乎很奇怪，因为列表只会显示一条信息：stitchname。但是，无论此处是否包含 _id，Fragment 列表都不会显示任何内容 6) 我是否可以像在 Fragment 的 onActivityCreatedMethod 中那样通过 getLoaderManager.initLoader 将 Bundle、信息传递给 CursorLoader？7) 我已经看到在片段的 onActivityCreated 方法中在 getLoaderManager().initLoader() 之前调用 setListAdapter 的示例，并且我看到了之后调用 setListAdapter 的示例。哪个是对的？似乎都没有帮助我.... 我错过了什么 5) 我被告知 Fragment 的 onActivityCreated 方法中的 dataColumns 应该包含我的表的 _id 列。真的吗？这对我来说似乎很奇怪，因为列表只会显示一条信息：stitchname。但是，无论是否包含 _id，Fragment 列表都不会显示任何内容 6) 我是否可以像在 Fragment 的 onActivityCreatedMethod 中那样通过 getLoaderManager.initLoader 将 Bundle、信息传递给 CursorLoader？7) 我已经看到在片段的 onActivityCreated 方法中在 getLoaderManager().initLoader() 之前调用 setListAdapter 的示例，并且我看到了之后调用 setListAdapter 的示例。哪个是对的？似乎都没有帮助我.... 我错过了什么 5) 我被告知 Fragment 的 onActivityCreated 方法中的 dataColumns 应该包含我的表的 _id 列。真的吗？这对我来说似乎很奇怪，因为列表只会显示一条信息：stitchname。但是，无论是否包含 _id，Fragment 列表都不会显示任何内容 6) 我是否可以像在 Fragment 的 onActivityCreatedMethod 中那样通过 getLoaderManager.initLoader 将 Bundle、信息传递给 CursorLoader？7) 我已经看到在片段的 onActivityCreated 方法中在 getLoaderManager().initLoader() 之前调用 setListAdapter 的示例，并且我看到了之后调用 setListAdapter 的示例。哪个是对的？似乎都没有帮助我.... 因为该列表只会显示一条信息：针迹名称。但是，无论此处是否包含 _id，Fragment 列表都不会显示任何内容 6) 我是否可以像在 Fragment 的 onActivityCreatedMethod 中那样通过 getLoaderManager.initLoader 将 Bundle、信息传递给 CursorLoader？7) 我已经看到在片段的 onActivityCreated 方法中在 getLoaderManager().initLoader() 之前调用 setListAdapter 的示例，并且我看到了之后调用 setListAdapter 的示例。哪个是对的？似乎都没有帮助我.... 因为该列表只会显示一条信息：针迹名称。但是，无论此处是否包含 _id，Fragment 列表都不会显示任何内容 6) 我是否可以像在 Fragment 的 onActivityCreatedMethod 中那样通过 getLoaderManager.initLoader 将 Bundle、信息传递给 CursorLoader？7) 我已经看到在片段的 onActivityCreated 方法中在 getLoaderManager().initLoader() 之前调用 setListAdapter 的示例，并且我看到了之后调用 setListAdapter 的示例。哪个是对的？似乎都没有帮助我.... 就像我在 Fragment 的 onActivityCreatedMethod 中所做的那样？7) 我已经看到在片段的 onActivityCreated 方法中在 getLoaderManager().initLoader() 之前调用 setListAdapter 的示例，并且我看到了之后调用 setListAdapter 的示例。哪个是对的？似乎都没有帮助我.... 就像我在 Fragment 的 onActivityCreatedMethod 中所做的那样？7) 我已经看到在片段的 onActivityCreated 方法中在 getLoaderManager().initLoader() 之前调用 setListAdapter 的示例，并且我看到了之后调用 setListAdapter 的示例。哪个是对的？似乎都没有帮助我....

如果我简单地这样做，我就可以显示一个片段：

```
Intent myData = getActivity().getIntent();
    Bundle info = myData.getExtras();
    String level = info.getString("Level");
    String[] values = new String[] {level, level};
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter); 
```

所以我知道我*可以*在 Fragment 中显示数据；它似乎不适用于 CursorLoader 和 ContentProvider。我希望这不是信息过载；如果是的话，我很抱歉。如果有人有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:09:01.777

> 1) 我在 onCreateLoader 方法中的查询语法是否正确？例如，它应该是“stitchlevel='Beginning'”。我知道 args.getString("Level") 中的数据是有效的，因为我已经在调试器中完成了它，但是这里的语法是否正确？我假设它应该是标准的 SQL 语法，但是

是的，这是正确的。更好的是：

```
String selection = "stitchlevel= ?";
String selectionArgs = new String[] {args.getString("Level")};
return new CursorLoader(getActivity(), STITCHES_URI, PROJECTION, selection, selectionArgs, null); 
```

> 2) 在 Fragment 的 onActivityCreated 方法中为 viewID 赋值时，我是否指向正确的位置？3) 同样，在下一行 SimpleCursorAdapter 中，这里的 android.R.layout.simple_list_item_1 是否正确？还是应该是 R.layout.stitchfragment？

不。`int`您提供给适配器的数组表示适配器中使用的行布局中的 id，而不是您编写的片段的 id。如果您使用`android.R.layout.simple_list_item_1`( 仅由 a 组成`TextView`)，则必须提供`id`that `TextView`，即`android.R.id.text1`：

```
String[] dataColumns = { "stitchname"};
int[] viewIDs = { android.R.id.text1 };
mAdapter = new SimpleCursorAdapter(getActivity(), android.R.layout.simple_list_item_1, null, dataColumns, viewIDs, 0); 
```

> 4）我在ContentProvider的查询方法上放了一个断点，我从来没有打过断点。创建 CursorLoader 时不应该吗？此外，如果我在 List Fragment 的 onLoadFinished 方法上放置一个断点，则光标为空。我错过了什么

我认为你没有按照我在上一个问题上建议的那样做。`query`至少应该调用提供者的方法，而这没有发生，只剩下一个选择。我注意到您投射了`Loaders`并且您缺少`Override`来自`LoaderManager.LoaderCalbbacks`. 将`Override`注释添加到这些方法：

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String selection = "stitchlevel= ?";
    String selectionArgs = new String[] {args.getString("Level")};
    return new CursorLoader(getActivity(), STITCHES_URI,
            PROJECTION, selection, selectionArgs, null); 
} 
```

看看会发生什么。如果您遇到错误，请确保您使用了正确的导入，并且仅使用兼容包中的类或正常的类（您可以轻松地从文件中删除所有导入，然后重新导入所有内容并使用带有 的类`android.support.v4`）。只是一个疯狂的猜测。

> 5) 我被告知 Fragment 的 onActivityCreated 方法中的 dataColumns 应该包含我的表的 _id 列。真的吗？这对我来说似乎很奇怪，因为列表只会显示一条信息：stitchname。但是，无论这里是否包含 _id，Fragment 列表都不会显示任何内容

`Cursor`基于的适配器要求 used`Cursor`必须包含一个名为的列`_id`（[请参阅该类的文档，`CursorAdapter`该类](http://developer.android.com/reference/android/widget/CursorAdapter.html)的超类`SimpleCursorAdapter`）。它不需要出现在`String`设置到适配器中的数组中。

> 6) 我是否可以像在 Fragment 的 onActivityCreatedMethod 中那样通过 getLoaderManager.initLoader 将 Bundle、信息传递给 CursorLoader？

是的。但是关于 id，请保持一致，如果您要在`LOADER_ID`任何地方使用它，而不仅仅是在代码中的某些地方使用它。或者更好的是，如果您`Loader`只使用一个，就`0`在任何地方使用（因此无需测试方法中的`LOADER_ID`in `onLoadFinished`）。

> 7) 我已经看到在片段的 onActivityCreated 方法中在 getLoaderManager().initLoader() 之前调用 setListAdapter 的示例，并且我看到了之后调用 setListAdapter 的示例。哪个是对的？

两者都可以使用。我会设置适配器，然后初始化`Loader`.

# nginx - 来自龙卷风的 Gridfs-Nginx 与 Gridfs

> ID：13368986
> 
> 赞同：5
> 
> 时间：2012-11-13T21:19:06.190
> 
> 标签：nginx, tornado, gridfs

我找到[了这个基准](https://stackoverflow.com/questions/3413115/is-gridfs-fast-and-reliable-enough-for-production)，但它很旧（2010 年）。

有没有人使用以下方法进行基准测试：

*   使用[Nginx-GridFS提供图片](https://github.com/mdirolf/nginx-gridfs)

VS

*   提供来自[Tornado的图片](https://github.com/facebook/tornado)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T06:20:12.110

我们一直在使用我们的[https://github.com/unistorage/gridfs-serve从 mongodb 提供约 400 rps](https://github.com/unistorage/gridfs-serve)

从来没有对它进行基准测试，但它可以满足我们的需求。

# java - Google App Engine：在线或离线处理 Web XML 的方式不同

> ID：13368990
> 
> 赞同：0
> 
> 时间：2012-11-13T21:19:16.613
> 
> 标签：java, google-app-engine, servlets

我得到了 web.xml ：

```
 <?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

        <servlet>
    <servlet-name>SellVideo</servlet-name>
    <jsp-file>WEB-INF/jsp/sell-video.jsp</jsp-file>
</servlet>

    <servlet-mapping>
        <servlet-name>SellVideo</servlet-name>
        <url-pattern>/sell-video</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>Edit</servlet-name>
        <servlet-class>vidaao.EditServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Request</servlet-name>
        <servlet-class>vidaao.RequestServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Upload</servlet-name>
        <servlet-class>vidaao.UploadServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Serve</servlet-name>
        <servlet-class>vidaao.ServeServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Guestbook</servlet-name>
        <servlet-class>vidaao.GuestbookServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Profile</servlet-name>
        <servlet-class>vidaao.ProfileServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Register</servlet-name>
        <servlet-class>vidaao.RegisterServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Vidaao</servlet-name>
        <servlet-class>vidaao.VidaaoServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Connect</servlet-name>
        <servlet-class>vidaao.ConnectServlet</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>Ajax</servlet-name>
        <servlet-class>vidaao.AjaxServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Ajax</servlet-name>
        <url-pattern>/ajax</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Connect</servlet-name>
        <url-pattern>/connect</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Edit</servlet-name>
        <url-pattern>/edit</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Register</servlet-name>
        <url-pattern>/register</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Request</servlet-name>
        <url-pattern>/request</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Upload</servlet-name>
        <url-pattern>/upload</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Serve</servlet-name>
        <url-pattern>/serve</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Guestbook</servlet-name>
        <url-pattern>/guestbook</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Profile</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>WEB-INF/jsp/home.jsp</welcome-file>
    </welcome-file-list>

 <servlet>
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
   <param-name>services</param-name>
   <param-value/>
  </init-param>
 </servlet>
 <servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
 </servlet-mapping>
</web-app> 
```

如果 url 映射之前不匹配，sevlet 配置文件应该像这样 wwww.xxx.com/* 计算所有 url。

配置文件正常工作，但是当我尝试部署时，所有内容都直接进入配置文件 servlet。例如，sell-video 甚至是 sell-video.jsp 被重定向到配置文件 servlet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:28:55.100

我修好了它，

我必须在 WEB-INF 前面添加一个斜杠，

像这样 ：`<jsp-file>/WEB-INF/jsp/sell-video.jsp</jsp-file>`

仍然很奇怪，这个问题只在网上附加，而不是在开发端，这使得调试变得更加困难。

# xamarin.ios - MonoTouch Master-Detail 与主控制器中的多个项目

> ID：13368993
> 
> 赞同：1
> 
> 时间：2012-11-13T21:19:37.873
> 
> 标签：xamarin.ios

我真的很喜欢 Mono-Touch，但我是一位经验丰富的 c# 开发人员。这是我的问题。我想创建一个使用主/细节范式的应用程序。详细信息有一个选项卡控制器，因此我可以更改主视图的上下文。但是，对于每个大师，我可能想选择一个日期、一个类别和一个订单来显示详细信息（在详细信息视图上）。任何人都可以帮助示例项目吗？像这样的接缝应该很容易完成，但我还没有找到任何东西。同样，我有一个日历视图（用于日期）、一个选择器（用于在所选日期期间活动的类别）和一个列表视图（用于与该类别相关的订单）。