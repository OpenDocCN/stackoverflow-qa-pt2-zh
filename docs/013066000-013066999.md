# StackOverflow 问答 13066000-13066999

# javascript - IDBKeyRange 按键查询，其中key为String

> ID：13066000
> 
> 赞同：0
> 
> 时间：2012-10-25T09:53:53.347
> 
> 标签：javascript, client-side, indexeddb, client-side-data

存储在 IndexedDB 中的对象的键是`Array`以下格式：

```
[int, String] 
```

例如`[1, "Foo"]`，`[9, "Bar"]`

如何使用键的字符串部分查询数据库？例如，我想用 key 获取所有记录`[:any, "Some key"]`。

Looks like[`IDBKeyRange`](https://developer.mozilla.org/en-US/docs/IndexedDB/IDBKeyRange)用于整数范围，但我找不到在键上构建任意查询的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:11:03.157

创建索引时，确保将 multiEntry 设置为 true，即：

```
objectStore.createIndex("tags","tags", {unique:false,multiEntry:true}); 
```

然后，您可以使用 only 运算符获取范围 - 假设“标签”是您要查找的内容：

```
var rangeTest = IDBKeyRange.only(tag); 
```

那应该为你做。我在这里有一个完整的博客条目：[http ://www.raymondcamden.com/index.cfm/2012/8/10/Searching-for-array-elements-in-IndexedDB](http://www.raymondcamden.com/index.cfm/2012/8/10/Searching-for-array-elements-in-IndexedDB)

# ios - UITableView 滚动显示性能不佳

> ID：13066006
> 
> 赞同：0
> 
> 时间：2012-10-25T09:54:23.787
> 
> 标签：ios, uitableview

我的 tableviewcontroller 存在很大的性能问题。滚动非常缓慢。我在 didSelectRowAtIndexPath 方法上创建了一个 NSLOG，我意识到这在我所做的每一次滚动上都会被调用。应该是这样的？

我在这张表上进行了搜索，我有一些逻辑，因为数据取决于 json 响应。您可以在此处检查此方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        //NSLog(@" scroll");
        // Configure the cell...
    static NSString *CellIdentifier = @"contactCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    UILabel *nameLabel = (UILabel *)[cell viewWithTag:1];
    UILabel *workPlaceLabel = (UILabel *)[cell viewWithTag:2];

    if(searching)
    {
            //NSLog(@" copyListOfItems: %@",copyListOfItems);
        NSString*lastName=[[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"]objectForKey:@"lastname"];
        if(lastName==nil)
        {
            lastName=@" ";
        }
        NSString*firstName=[[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"]objectForKey:@"firstname"];
        if(firstName==nil)
        {
            NSArray*phonesArray=[[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"]objectForKey:@"phone"];
            NSLog(@"NUMERO TELEFONE %d",[phonesArray count]);

            if([phonesArray count]>0)
            {
                NSString*phoneNumber=[[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"] objectForKey:@"Phone"];
                nameLabel.text=phoneNumber;
            }else{
                nameLabel.text=[[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"] objectForKey:@"Current"];
                workPlaceLabel.text=@"";
            }

        }else{
            NSString *stringName= [NSString stringWithFormat:@"%@ %@", firstName, lastName];
            nameLabel.text=stringName;
            workPlaceLabel.text=[[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"] objectForKey:@"Current"];
        }
    }
    else {
            //NSLog(@" _contactsArray: %@",_contactsArray);
        NSString*lastName=[[[_contactsArray objectAtIndex:indexPath.row]objectForKey:@"Contact"] objectForKey:@"Lastname"];
        if(lastName==nil)
        {
            lastName=@" ";
        }
        NSString*firstName=[[[_contactsArray objectAtIndex:indexPath.row]objectForKey:@"Contact"] objectForKey:@"Firstname"];
        if(firstName==nil)
        {
            NSArray*phonesArray=[[[_contactsArray objectAtIndex:indexPath.row]objectForKey:@"Contact"] objectForKey:@"Phone"];
                //NSLog(@"NUMERO TELEFONE %d",[phonesArray count]);

            if([phonesArray count]>0)
            {
                NSString*phoneNumber=[[[[_contactsArray objectAtIndex:indexPath.row]objectForKey:@"phone"] objectAtIndex:0]objectForKey:@"phonenumber"];
                nameLabel.text=phoneNumber;
            }else{
                nameLabel.text=[[[_contactsArray objectAtIndex:indexPath.row]objectForKey:@"Contact"] objectForKey:@"Current"];
                workPlaceLabel.text=@"";
            }
        }else{
            NSString *stringName= [NSString stringWithFormat:@"%@ %@", firstName, lastName];
            nameLabel.text=stringName;
           if([[[_contactsArray objectAtIndex:indexPath.row]objectForKey:@"Contact"] objectForKey:@"Current"])
            {
            workPlaceLabel.text=[[[_contactsArray objectAtIndex:indexPath.row]objectForKey:@"Contact"] objectForKey:@"Current"];

        }
        }
    }
        // Configure the cell...
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:06:21.687

其中有很多不必要的调用可以从您的代码中删除。当您可以拨打一次时，所有这些重复的联系电话都需要时间来执行。就像在 if 语句的第一个分支中一样，您有如下调用：

```
NSString*lastName=[[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"]objectForKey:@"lastname"];
NSString*firstName=[[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"]objectForKey:@"firstname"];
NSArray*phonesArray=[[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"]objectForKey:@"phone"]; 
```

您可以通过执行以下操作来压缩这些调用：

```
id contact = [[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"];
NSString *lastName=[contact objectForKey:@"lastname"];
NSString *firstName=[contact objectForKey:@"firstname"];
NSArray *phonesArray=[contact objectForKey:@"phone"]; 
```

不过，理想情况下，您将拥有一个自己的类，其中包含这些项目作为属性，因此您可以执行以下操作：

```
Contact *contact = (Contact *)[[copyListOfItems objectAtIndex:indexPath.row]objectForKey:@"Contact"];
NSString *lastName = contact.lastName;
NSString *firstName = contact.firstName;
NSArray *phonesArray = contact.phone; 
```

**编辑：如何进行异步图像加载**

这是我过去使用占位符图像异步加载图像的方法。我使用的单元格是我编写的自定义类，但它应该让您了解如何操作。

```
// Setup the image view
UIImageView* imageView = cell.imageView;
imageView.image = [UIImage imageNamed:@"Loading.png"];

// Load the image asynchronously
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
dispatch_async(queue, ^{
    // Here you will want to make a call to your web server to get the image
    // and store it in a UIImage named image
    UIImage *image = // your code to get the image from the server

    // Only update if the cell is still on the screen
    if ([[tableView indexPathsForVisibleRows] containsObject:indexPath]) {
        // Have to update UI elements on the main thread
        dispatch_sync(dispatch_get_main_queue(), ^{
            [[cell imageView] setImage:image];
            [cell setNeedsLayout];
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:14:59.350

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

为出现的每个单元格调用，因此如果您将逻辑排除在此循环之外会更好，因为它会在用户滚动时被多次调用，您可以将数组设置在此循环之外，只需替换此循环中的值方法

# android - 在安卓手机中启动图库

> ID：13066013
> 
> 赞同：2
> 
> 时间：2012-10-25T09:54:41.363
> 
> 标签：android, android-intent, gallery

当用户单击通知时，我正在尝试从我的应用程序启动图库。我发现只有知道 Gallery 应用程序的包和类名才有可能。我已经设法为四家设备制造商找到了相同的代码，到目前为止，这段代码有效。我只需要 Motorola 和 LG Android 手机的包和类名。

任何人都可以帮忙吗？如果您是开发人员并拥有摩托罗拉或 LG Android 设备，这对您来说非常容易。您只需在连接到 LogCat 的同时在手机中启动图库，它将显示图库的包和类名。

代码：

```
Intent newIntent = new Intent();

//open Gallery in Nexus plus All Google based ROMs
if(doesPackageExist("com.google.android.gallery3d"))
    newIntent.setClassName("com.google.android.gallery3d", "com.android.gallery3d.app.Gallery");

//open Gallery in Sony Xperia android devices
if(doesPackageExist("com.android.gallery3d"))
    newIntent.setClassName("com.android.gallery3d", "com.android.gallery3d.app.Gallery");

//open gallery in HTC Sense android phones
if(doesPackageExist("com.htc.album"))                           
    newIntent.setClassName("com.htc.album", "com.htc.album.AlbumMain.ActivityMainCarousel");

//open gallery in Samsung TouchWiz based ROMs
if(doesPackageExist("com.cooliris.media"))
    newIntent.setClassName("com.cooliris.media", "com.cooliris.media.Gallery");

startActivity(newIntent); 
```

并检查包名是否存在：

```
public boolean doesPackageExist(String targetPackage) {

    PackageManager pm = getPackageManager();
    try {
        PackageInfo info = pm.getPackageInfo(targetPackage, PackageManager.GET_META_DATA);
    } catch (NameNotFoundException e) {
        return false;
    }
    return true;    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:59:13.483

您应该可以通过以下基本方式启动 Gallery 应用程序`Intent`：

```
Intent intent =  new Intent(Intent.ACTION_PICK);
intent.setType("image/*");
startActivity(intent); 
```

如果多个应用程序能够让您显示图像（例如 Gallery 和 ESFileExplorer），它可能会触发应用程序选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:17:20.753

在每台 Android 设备上都没有描述“图库”应用程序的通用表格，因此为了避免向用户显示活动解析器，最好的办法是以编程方式列出所有可能的活动处理程序，并对要启动的活动处理程序做出明智的猜测.

[PackageManager.queryIntentActivities](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29)将 Intent 转换为这样的包列表，只要您使用要打开的文件类型为 Intent 播种：

```
Intent newIntent = new Intent(Intent.ACTION_VIEW);
newIntent.setType("image/*");
List<ResolveInfo> allHandlers = pm.queryIntentActivities(newIntent, PackageManager.MATCH_DEFAULT_ONLY); 
```

然后，您可以在此列表中搜索已知软件包（从上面的列表中），或者如果失败，则启动列表中的第一个。

但是，您应该考虑自己制作一个简单的 Activity 来显示图像。这是获得您所寻求的控制水平的唯一方法。

# spring - Spring+Hibernate 中的@Transactional

> ID：13066017
> 
> 赞同：8
> 
> 时间：2012-10-25T09:54:48.973
> 
> 标签：spring, hibernate, transactions

我在我的 Web 应用程序中使用**Spring 3.1 + Hibernate 4.x。**在我的 DAO 中，我将用户类型对象保存如下

```
sessionFactory.getCurrentSession().save(user); 
```

但得到以下异常：

```
org.hibernate.HibernateException: save is not valid without active transaction 
```

我用谷歌搜索并在 SO 上发现了类似的[问题，解决方案如下：](https://stackoverflow.com/questions/12002737/org-hibernate-hibernateexception-save-is-not-valid-without-active-transaction)

```
 Session session=getSessionFactory().getCurrentSession();
   Transaction trans=session.beginTransaction();
   session.save(entity);
   trans.commit(); 
```

这样就解决了问题。但是在那个解决方案中，手动开始和提交事务有很多混乱。

我不能 在不`sessionFactory.getCurrentSession().save(user);`手动开始/提交事务的情况下直接使用吗？

我也尝试`@Transactional`在我的服务/dao 方法上使用，但问题仍然存在。

**编辑：**这是我的 Spring 配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:p="http://www.springframework.org/schema/p"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
     http://www.springframework.org/schema/tx
     http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
     http://www.springframework.org/schema/aop 
     http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

  <!-- enable the configuration of transactional behavior based on annotations -->
  <tx:annotation-driven transaction-manager="txManager"/>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        p:driverClassName="${db.driverClassName}" p:url="${db.url}"
        p:username="${db.username}" p:password="${db.password}" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="com.myapp.entities" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean>

</beans> 
```

我正在使用以下 Hibernate 4 依赖项：

```
<!-- Hibernate Dependency -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.7.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.1.Final</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>${cglib.version}</version>
            <scope>runtime</scope>
        </dependency> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T10:04:28.587

基本上需要做的是从 applicationContext.xml 文件中删除 Hibernate 属性的以下行：

```
<prop key="hibernate.current_session_context_class">thread</prop> 
```

一旦删除，Hibernate 使用 Spring 进行事务管理

祝大家好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T10:41:37.067

我认为您使用的是 Hibernate 4.x 那么为什么要在应用程序上下文文件中使用 Hibernate 3 事务管理器？

```
<bean id="txManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory">
        <ref bean="sessionFactory" />
    </property>
</bean> 
```

我认为应该是

```
<bean id="txManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory">
        <ref bean="sessionFactory" />
    </property>
</bean> 
```

只需尝试使用 hibernate 4 事务管理器和 @Transactional 属性就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:59:33.387

使用 Spring XML 的工作版本和 @Transactional 注释的 DAO 类，您是否在 Spring XML 中定义 DAO？（也许作为原型）因为如果您不是，那么据我所知，您的 DAO 不会在事务方面进行 AOP。我*认为*这是最简单的方法。此示例来自[Spring 3 Doc](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html)的**第 10.5.6 节 Using @Transactional**。

```
 <!-- this is the service object that we want to make transactional -->
  <bean id="fooService" class="x.y.service.DefaultFooService"/>

  <!-- enable the configuration of transactional behavior based on annotations -->
  <tx:annotation-driven transaction-manager="txManager"/> 
```

...你可以用**DefaultFooService**代替你的 DAO。

# java - GAE Datastore 使用 JPA 生成字符串键

> ID：13066019
> 
> 赞同：0
> 
> 时间：2012-10-25T09:54:59.913
> 
> 标签：java, google-app-engine, jpa, google-cloud-datastore

由于不可能只使用 Long Id，我正在尝试使用生成的 String 键。我有三个 Classes `User`, `Topic`,`Comments`带有`User`- 1:n - `Topic`- 1:n - `Comments`。

**班级评论：**

```
@Entity
public class Comment implements Serializable{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName = "datanucleus", key = "gae.encoded-pk", value = "true")
    private String key;
    @ManyToOne
    private User author;
    @ManyToOne
    private Topic topic; 
```

**班级用户：**

```
@Entity
public class User implements Serializable{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName = "datanucleus", key = "gae.encoded-pk", value = "true")
    private String key;

    @Unique
    private String username; 
```

**课堂主题：**

```
@Entity
public class Topic implements Serializable{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    private String key;
    @ManyToOne(cascade = CascadeType.ALL)
    private User author;
    @OneToMany(cascade = CascadeType.ALL)
    private List<Comment> comments; 
```

现在，当我尝试保存新用户时，会发生以下异常

```
Invalid primary key for User.  Cannot have a null primary key field if the field is unencoded and of type String.  Please provide a value or, if you want the datastore to generate an id on your behalf, change the type of the field to Long. 
```

是否可以在不手动使用 KeyFactory 的情况下生成字符串 ID？如果是，我的代码有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:30:28.313

IIRC IDENTITY 策略是生成数字（或键）ID。如果您使用的是 JDO，则可以使用自动生成的 UUID 样式的 id。请参阅[https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata#Keys](https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata#Keys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:05:51.943

我用`TableGenerator`. `want`无论您喜欢哪种风格，它都很有用。假设即使您想获得诸如此类的`Group`id`GRP0000001`等`GRP0000500`。您必须使用属性注入，而不是实体中的字段注入。它基于您的 setter ID 方法。如果generate生成的id是201 `EntityManager`，实体管理器会调用`setId()`setter注入。如果是这样，id 将是`GRP0000201`.

我的例子：

```
@Entity
@TableGenerator(name = "GROUP_GEN", table = "ID_GEN", pkColumnName = "GEN_NAME", 
                valueColumnName = "GEN_VAL", pkColumnValue = "GROUP_GEN", allocationSize = 1)
@Access(value = AccessType.FIELD)
public class Group implements Serializable {
    @Transient
    private String id;
    private String name;
    //name getter and setter
    public void setId(String id) {
        if(id != null) {
            this.id = Utils.formatId(id, "GRP", 10);    
        }
    }

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE, generator = "GROUP_GEN")
    @Access(value = AccessType.PROPERTY)
    public String getId() {
        return id;
    }
} 
```

实用程序.java

```
public class Utils {
    /**
     * E.g.
     * Input: id=523, prefix="AAA", maxLength=15
     * Output: AAA000000000523
     */
    public static String formatId(String id, String prefix, int maxLength) {
        if (!id.startsWith(prefix)) {
            int length = id.length() + prefix.length();
            for (; (maxLength - length) > 0; length++) {
                id = '0' + id;
            }
            id = prefix + id;
        }
        return id;
    }
} 
```

# c# - 哪些 .Net 程序集作为标准集成到 SQL Server 2008 R2 CLR 中？

> ID：13066021
> 
> 赞同：2
> 
> 时间：2012-10-25T09:55:04.593
> 
> 标签：c#, .net, sql, sql-server, clr

我有一个在 SQL Server 中使用了一段时间的现有程序集。今天我添加了一些引用的实验代码`System.Data.Linq`。**在SQL 2008 R2**中创建程序集会导致此错误：

> *程序集“system.data.linq，版本=3.5.0.0，文化=中性，publickeytoken=b77a5c561934e089。” 在 SQL 目录中找不到。*

这并不完全出乎意料，但我想知道如何确定2008 R2 中的全套标准“**核心”组合是什么。**大概`System.Data.Linq`不是其中之一 - 但我想确认这一点，并确认哪些组件作为标准提供。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T09:56:41.973

不幸的是，`System.Data.Linq`它没有作为标准集成到 SQL Server 2008 R2 CLR 中。

但是，以下库是（[来自 MSDN 的列表](http://msdn.microsoft.com/en-us/library/ms403279.aspx)）：

> 自定义封送器
> 
> Microsoft.VisualBasic
> 
> 微软VisualC
> 
> mscorlib
> 
> 系统
> 
> 系统配置
> 
> 系统数据
> 
> System.Data.OracleClient
> 
> System.Data.SqlXml
> 
> 系统部署
> 
> 系统安全
> 
> 系统事务
> 
> 系统.Web.服务
> 
> 系统文件
> 
> System.Core.dll
> 
> System.Xml.Linq.dll

# wcf - System.InsufficientMemoryException：无法分配 536870912 字节的托管内存缓冲区。可用内存量可能很低

> ID：13066024
> 
> 赞同：1
> 
> 时间：2012-10-25T09:55:13.127
> 
> 标签：wcf, wcf-binding, wshttpbinding

下面在服务器端的 Web.Config 中提到。

```
<bindings>
    <wsHttpBinding>
        <binding name="NewBinding0" closeTimeout="00:50:00" openTimeout="00:50:00" sendTimeout="00:50:00" receiveTimeout="00:50:00" maxReceivedMessageSize="2147483647" maxBufferPoolSize="2147483647">
            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
            <reliableSession enabled="true" />
            <security mode="None">
                <transport clientCredentialType="None" />
                <message clientCredentialType="Windows" negotiateServiceCredential="true" establishSecurityContext="false" />
            </security>
        </binding>
    </wsHttpBinding>
</bindings> 
```

同样在客户端，我提到了以下设置。

```
WSHttpBinding binding = new WSHttpBinding();
//binding.ReaderQuotas.MaxArrayLength = 10485760;
//binding.MaxReceivedMessageSize = 10485760;
binding.Security.Mode = SecurityMode.None;
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;
binding.Security.Message.ClientCredentialType = MessageCredentialType.Windows;
binding.Security.Message.EstablishSecurityContext = false;
//binding.Security.Message.NegotiateServiceCredential = true;
binding.ReliableSession.Enabled = true;
binding.ReaderQuotas.MaxArrayLength = 2147483647;
binding.ReaderQuotas.MaxDepth = 2147483647;
binding.ReaderQuotas.MaxNameTableCharCount = 2147483647;
binding.ReaderQuotas.MaxBytesPerRead = 2147483647;
//binding.MaxReceivedMessageSize = 20000000;2147483647
binding.MaxReceivedMessageSize = 2147483647;
//binding.MaxReceivedMessageSize = Int32.MaxValue;
binding.ReaderQuotas.MaxStringContentLength = 2147483647;
//binding.MaxBufferPoolSize = 20000000;
binding.MaxBufferPoolSize = 2147483647;
//binding.MaxBufferPoolSize = Int32.MaxValue;
binding.ReaderQuotas.MaxArrayLength = 2147483647;
binding.ReaderQuotas.MaxDepth = 2147483647;
binding.SendTimeout = TimeSpan.FromMinutes(50);
binding.CloseTimeout = TimeSpan.FromMinutes(50);
binding.OpenTimeout = TimeSpan.FromMinutes(50);
binding.ReceiveTimeout = TimeSpan.FromMinutes(50);

//EndpointIdentity.CreateUpnIdentity("user@domain");
ChannelFactory<IDBSyncContract> factory = new ChannelFactory<IDBSyncContract>(binding, new EndpointAddress(endPointURL));
dbProxy = factory.CreateChannel();
this.dbProxy = dbProxy as IDBSyncContract; 
```

我收到上述错误。

是否对 wsHttpBindings 有任何顾虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T13:57:53.370

您的问题是该服务正在消耗主机上的所有可用内存。我建议您删除**所有**配置更改并将配置恢复为 WCF 默认值。Microsoft 选择这些默认值是为了在平均 WCF 服务中获得最佳性能，并且您应该仅在证明需要这样做时更改它们。

我建议默认值的唯一例外是 the`maxReceivedMessageSize`和`maxBufferSize`值。我将从 262,144 字节开始。如果您在任何这些设置中遇到特定异常，则仅更改受影响的设置。

如果您在将设置提升到最大整数后仍然遇到问题，请考虑更改您的服务设计以在正常配置设置中成功调用。尽可能接近 WCF 默认值将为您的服务提供最佳的整体性能。

# javascript - nodejs 的并发/连续测试（nodejs 的 ncrun）

> ID：13066026
> 
> 赞同：4
> 
> 时间：2012-10-25T09:55:17.730
> 
> 标签：javascript, node.js, testing, continuous-integration, ncrunch

我是[NCrunch](http://www.ncrunch.net)在 Visual Studio 中提供的连续测试设置的忠实粉丝，并且希望使用 nodejs 进行类似的设置。

在节点中编写 JavaScript 时，我使用 Sublime Text 2 作为编辑器，并使用 Mocha 编写测试。

我想知道是否有软件（或 ST2 插件）可以在编写 .NET 代码时实现与 NCrunch 提供的类似的并发测试？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T19:02:24.753

在做了一些挖掘之后，我决定目前的解决方案是：

**服务器端：** [摩卡](http://visionmedia.github.com/mocha/)

```
mocha -w test 
```

使用[mocha 的内置手表功能](http://visionmedia.github.com/mocha/#watch-option)。

**客户端**：[睾丸](https://github.com/vojtajina/testacular#testacular--)

我现在正在使用[testacular](https://github.com/vojtajina/testacular#testacular--)，这真的很棒。如果有用于串联运行服务器端监视进度的钩子，那就太好了，但不是真正的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T07:29:50.980

我自己还没有尝试过，但它看起来很有希望：[wallaby.js](http://wallabyjs.com/)来自网站的描述有以下描述

> Wallaby.js 是一个智能的 JavaScript 测试运行程序，可以持续运行您的测试。当您更改代码时，它会立即将代码覆盖率和其他结果直接报告给您的代码编辑器。Wallaby.js 使用各种技巧来尽可能快地运行您的测试，例如依赖分析以仅执行受代码更改影响的测试和并行测试执行。

# android - 为什么即使我在画布对象上使用 drawPath() 也不显示圆圈？

> ID：13066029
> 
> 赞同：0
> 
> 时间：2012-10-25T09:55:31.567
> 
> 标签：android, canvas

我想用 2D api 做一些编程，我做了一些编码，但事情是输出不来。我的代码如下......

```
 public class GraphicprojectActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
//        setContentView(R.layout.main);
        setContentView(new MyView(this));
    }
    public class MyView extends View{
        public MyView(Context c1){
            super(c1);
        }
    }
    public void onDraw(Canvas c2){
        Path p1=new Path();
        Paint p2= new Paint();
        p2.setColor(Color.BLUE);
        p1.addCircle(100, 100, 300, Direction.CW);
        c2.drawPath(p1, p2);
    }
} 
```

logcat 中没有错误.. UR 帮助将不胜感激.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:40:38.670

您的 onDraw 方法在 MyView 类之外。您需要覆盖 MyView 的 onDraw 方法。

```
public class MyView extends View{
    public MyView(Context c1){
        super(c1);
    }
public void onDraw(Canvas c2){
    Path p1=new Path();
    Paint p2= new Paint();
    p2.setColor(Color.BLUE);
    p1.addCircle(100, 100, 300, Direction.CW);
    c2.drawPath(p1, p2);
  }
} 
```

# javascript - iFrame 未在 android 设备中正确修复

> ID：13066031
> 
> 赞同：2
> 
> 时间：2012-10-25T09:55:40.163
> 
> 标签：javascript, html, css, android-layout, iframe

我使用它的网络视图制作了一个 android 应用程序。有很多功能。支付集成等。我使用第三方工具集成了这种支付方式。此工具提供外部 html 页面。当我将此页面直接加载到我的网络视图中时，它工作得很好。但是在我要求付款页面中需要一个后退按钮之后。之后我使用 IFRAME 添加此页面。在出现与设计相关的许多问题之后。内容不适合 IFRAME 也没有显示滚动条。

我尝试了不同类型的 javascript 方法，但没有输出。
如果对此有任何解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:18:39.553

**iframe滚动问题的解答**

1.**放大**直到页面的 iframe 部分完全填满屏幕。Tes 可能会激活滚动条并允许您滚动 iframe。

2.尝试**双击**屏幕。这意味着您使用两根手指在 iframe 区域上滚动。

3.如果#1 或#2 都不起作用，请尝试使用**其他浏览器**，例如 Dolphin、xScope 或 Opera。

如果这三个都不起作用，请尝试**Firefox**。我将 Firefox 单独列出并放在最后，因为它在 Android 上运行缓慢且占用大量资源，但如果它是您唯一的选择，请仅在必要时使用它。

您能否提供有关 iframe 中不适合的内容的更多信息？

# c++ - 在 Qwt 中显示绘图值的工具提示

> ID：13066035
> 
> 赞同：7
> 
> 时间：2012-10-25T09:55:45.747
> 
> 标签：c++, qwt

我的应用程序中有一个 qwt 图。我想显示一个小工具提示来显示鼠标在曲线上指向的点的值。我发现我必须为此使用 QwtPlotPicker，但在我的代码中找不到任何合适的示例来实现它。我是 Qwt 的新手，所以如果有人能帮助我解决这个问题，那就太好了。

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:24:21.230

作者自己[在这里](http://www.qtcentre.org/threads/17897-Get-the-plot-curve-to-which-the-mouse-is-pointing-to)说：

> QwtPlotPicker 为您提供鼠标的当前位置（在屏幕和绘图坐标中）。然后，您需要找到曲线的最近点。您可以使用 QwtPlotCurve::closestPoint()，但在大多数情况下，您可以根据数据的特征找到更快的实现。当您需要将鼠标位置与点之间的线进行比较时，您需要这些点的像素位置（使用 QwtPlot::canvasMap ）。也许查看事件过滤器示例的 CanvasPicker 会有所帮助。

我在自己的类中实现了它，它是 QwtPlot 的子类。在构造函数中，我有以下内容：

```
QwtPlotPicker* plotPicker = new QwtPlotPicker(this->xBottom, this->yLeft, QwtPicker::CrossRubberBand, QwtPicker::AlwaysOn, this->canvas());
QwtPickerMachine* pickerMachine = new QwtPickerClickPointMachine();
plotPicker->setStateMachine(pickerMachine);
connect(plotPicker, SIGNAL(selected(const QPointF&)), this, SLOT(onSelected(const QPointF&))); 
```

现在在我的班级（this 指针所指的地方）我应该实现`onSelected(const QPointF&)`将给出绘图坐标的槽。

# android - 在下一个活动中保存捕获的图像

> ID：13066041
> 
> 赞同：0
> 
> 时间：2012-10-25T09:56:05.247
> 
> 标签：android, image, camera, sd-card

我想在下一个活动中保存并显示捕获的图像。我已经编写了代码，但它没有工作我需要在该代码中进行哪些修改。

```
 camera.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Log.d("Coming in the camera intent","coming in yhe camera intent");
                    String filePath = Environment.getExternalStorageDirectory()+ "/s1.jpeg";
                    File file = new File(filePath);
                    Uri output = Uri.fromFile(file);
                    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                    startActivityForResult(cameraIntent, CAMERA_REQUEST); 
                }
            });
        }
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
            if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  
                Log.d("Coming in the if loop","coming in the if loop");
                Bitmap photo = (Bitmap) data.getExtras().get("data"); 
                Intent i1=new Intent(MyMenu.this,FullScreen.class);
                i1.putExtra("photooo",photo);
                startActivity(i1);
            }  
        } 
```

和接收我要保存和显示图像的活动

```
image=(ImageView)findViewById(R.id.image);
        note=(ImageButton)findViewById(R.id.note);
        tick=(ImageButton)findViewById(R.id.tick);
        cross=(ImageButton)findViewById(R.id.cross);
        Intent intent = getIntent();
        Bitmap photo = (Bitmap) intent.getParcelableExtra("photooo");
        image.setImageBitmap(photo);
    } 
```

**堆**

```
10-25 12:50:30.459: E/AndroidRuntime(27740): java.lang.RuntimeException: Unable to resume activity {com.example.babysnap/com.example.babysnap.MyMenu}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1888, result=-1, data=Intent { act=inline-data (has extras) }} to activity {com.example.babysnap/com.example.babysnap.MyMenu}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.babysnap/com.example.babysnap.FullScreen}; have you declared this activity in your AndroidManifest.xml? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:05:49.447

看来您`FullScreen Activity`没有在**AndroidManifest.xml**文件中声明。

核实。并声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:02:26.233

而不是位图尝试传递图像路径。你已经`Uri output;` 从这个 get fileapath 中得到了。

```
String imagepath=output.getPath(); then intent.putExtra("imagepath",imagepath) 
```

在其他活动中获取此字符串：

```
String path= getIntent().getStringExtra("imagepath"). then

Bitmap myBitmap = BitmapFactory.decodeFil(path);    
ImageView myImage = (ImageView) findViewById(R.id.imageviewTest);
myImage.setImageBitmap(myBitmap); 
```

[在这里阅读](https://stackoverflow.com/questions/4352172/how-do-you-pass-images-bitmaps-between-android-activities-using-bundles)。您也可以使用字节数组来做到这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:03:57.850

首先将图像转换为字节数组，然后传入 Intent，在下一个活动中从 Bundle 中获取字节数组并转换为图像（位图）并设置为 ImageView。

将位图转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

将字节数组传递给意图：-

```
Intent intent = new Intent(this, NextActivity.class);
intent.putExtra("picture", byteArray);
startActivity(intent); 
```

从 Bundle 中获取字节数组并转换为位图图像：-

```
Bundle extras = getIntent().getExtras();
byte[] byteArray = extras.getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);
image.setImageBitmap(bmp); 
```

并在 Androidmanifest.xml 中编写以下代码来声明 Activity。

```
<activity
    android:name=".FullScreen"
    android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

# java - 如何在 log4j 的配置文件中为文件附加程序提供环境变量路径

> ID：13066042
> 
> 赞同：62
> 
> 时间：2012-10-25T09:56:07.273
> 
> 标签：java, log4j, environment-variables

我有一个`log4j.xml`配置文件。和一个`RollingFileAppender`我需要提供存储日志的文件路径。问题是我的代码将作为可运行的 jar 部署在 Unix 机器上。所以如果我传递这样的参数：

```
value=logs/messages.log" 
```

它在我的 HOME 目录中创建名为 logs 的文件夹，并将所有消息写入此目录中的文件。

我有一个环境变量设置为某个值。我想使用该变量的路径并在该路径下写入消息。我怎样才能实现它？

我试过用这个：

```
value="${MY_HOME}/logs/message.log" 
```

但这不起作用。任何人都可以为这个问题提出解决方案吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-25T10:22:38.383

在解析其配置文件时，表达式`${MY_HOME}`将扩展为系统属性的值，*而*`MY_HOME`不是系统*环境变量*。两者是有区别的。

为了以干净的方式实现这一点，您必须在 JVM 调用行中添加类似这样的内容：

`-DMY_HOME=$MY_HOME`

这将定义 Java 系统属性`MY_HOME`以包含环境变量的值`MY_HOME`。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2014-02-21T15:07:14.767

你可以给它环境变量。只需在变量名前添加 env: 即可，如下所示：

```
value="${env:MY_HOME}/logs/message.log" 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-03-29T13:52:08.810

此语法仅记录在 log4j 2.X 中，因此请确保您使用的是正确的版本。

```
 <Appenders>
    <File name="file" fileName="${env:LOG_PATH}">
        <PatternLayout>
            <Pattern>%d %p %c{1.} [%t] %m %ex%n</Pattern>
        </PatternLayout>
    </File>
</Appenders> 
```

[http://logging.apache.org/log4j/2.x/manual/lookups.html#EnvironmentLookup](http://logging.apache.org/log4j/2.x/manual/lookups.html#EnvironmentLookup)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-06-30T12:58:06.927

我得到了这个工作。

1.  在我的 log4j.properties 中。我指定

> log4j.appender.file.File=${LogFilePath}

2.  在 Eclipse 中 - JVM 参数

> -DLogFilePath=C:\work\MyLogFile.log

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-21T15:50:07.390

`java -DLOG_DIR=${LOG_DIR} -jar myjar.jar "param1" "param2"` ==> 如果您在 xml 中有 "value="${LOG_DIR}/log/clientProject/project-error.log" 在 cmd 行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T10:12:38.350

也许... ：

```
datestamp=yyyy-MM-dd/HH:mm:ss.SSS/zzz
layout=%d{${datestamp}} ms=%-4r [%t] %-5p %l %n%m %n%n

# infoFile 
log4j.appender.infoFile=org.apache.log4j.RollingFileAppender
log4j.appender.infoFile.File=${MY_HOME}/logs/message.log
log4j.appender.infoFile.layout=org.apache.log4j.PatternLayout
log4j.appender.infoFile.layout.ConversionPattern=${layout} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-31T17:37:57.503

Log4j 条目

#- 要记录的文件和记录格式

log4j.appender.file.File=${LOG_PATH}/mylogfile.log

```
Java program
String log4jConfPath        = "path/log4j.properties";
File log4jFile              = new File(log4jConfPath);
if (log4jFile.exists()) {
    System.setProperty("LOG_PATH", "c:/temp/");
    PropertyConfigurator.configure(log4jFile.getAbsolutePath());
    logger.trace("test123");
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-25T10:18:51.830

要**动态更改变量**，您可以执行以下操作：

```
String value = System.getenv("MY_HOME");
Properties prop = new Properties("log4j.properties"); 
prop.put("MY_HOME", value); // overwrite with value from environment
PropertyConfigurator.configure(prop); 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-10-25T10:05:13.547

由于您使用的是 unix，因此您可以使用这样的路径。

```
 /home/Production/modulename/logs/message.log 
```

路径应以 / 开头

# android - 使两个相邻的 ImageViews Drawable 具有相同的高度

> ID：13066044
> 
> 赞同：0
> 
> 时间：2012-10-25T09:56:18.650
> 
> 标签：android, android-layout

我目前有两个图像视图：

```
 <ImageView
        android:id="@+id/IV1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="30dp"
        android:adjustViewBounds="true"
        android:background="#ff0000"
       />

    <ImageView
        android:id="@+id/IV2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/IV1"
        android:layout_centerVertical="true"
        android:src="@drawable/shadow_pages"
        android:adjustViewBounds="true"
        android:background="#00ff00"
        /> 
```

这两个 ImageView 正在加载两个不同的图像，它们具有不同的尺寸。

问题是：图像被缩放（这没关系）以适应视图，但是可绘制对象的高度不一样（因为它们最初具有不同的尺寸），因此 IV2 上可绘制对象的高度大于IV1 上的可绘制对象 - 然后给人的印象是第二张图像比第一张图像“高”。

如何在 IV2 上设置可绘制对象的高度，使其与 IV1 上的可绘制对象高度相同？

编辑：我宁愿避免设置特定的高度值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:59:19.860

将图像视图保持在 lineaLayout 或 RelativeLayout 并将高度设置为

`android:layout_height="fill_parent"`

或者

将两个 imageViews 的高度固定为`android:layout_height="200dp"`//==> 这将是你的愿望

# javascript - 用于 int-string 对的高性能 JS 映射

> ID：13066045
> 
> 赞同：5
> 
> 时间：2012-10-25T09:56:28.290
> 
> 标签：javascript, jquery, dictionary

`int`我需要一个将（s）映射到（s）的Javascript（哈希图或其他）中的高性能映射`string`。在 dom 准备好后，该地图将用于构建网页的某些部分。我知道简单的 javascript 对象也可以像地图一样工作，但我需要以最佳性能工作。

我想通过在从服务器生成响应页面的同时将字符串附加到网页来一次使用所有数据对初始化地图。

有什么方法可以提高整数字符串对的 javascript 映射的性能，或者是否有相同的实现？

--

使用 jQuery 1.7

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T16:22:47.640

好的，我会在这里发布它，因为它更像是一个答案：

使用数组。考虑到任何实现都必须使用 js 基元和对象，您将很难找到比这更高效的东西。

大多数（全部？）javascript 实现中的数组可能是稀疏的。因此 array.length 将返回最后一个元素的索引 + 1，但在稀疏情况下，数组不会分配所有元素，并且将使用对象属性语义来访问它的元素（意思是，它实际上是一个以整数作为键的哈希表）。

它基本上为您提供了您正在寻找的行为。

如果是负整数，请使用第二个数组。

关于单个语句初始化：您通常不能这样做，因为它基于隐式知道项目索引。

您可以做的是沿线附加一些内容：

```
 var arr = [];

 arr[int1] = val1;
 arr[int2] = val2;
 arr[int3] = val3;
 arr[int4] = val4;
 ...
 arr[intn] = valn; 
```

我的意思是你必须以某种方式列出 (Number, String) 对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T20:01:10.410

请查看[这个](https://jsperf.com/sparse-objects)jperf 测试用例，并得出你的结论。对象也是稀疏的。数组只是专门的对象，除了其他内容外，它们也说明了它们自己的长度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T10:15:58.150

我认为你应该使用以下 `var l_map = {};`

添加元素使用 `l_map[<your integer>] = <your string>`

并检索是 `var l_value = l_map[<your integer>];`

这是解决您的问题的一种方法。

第二种方法非常简单，只需使用数组（或列表），因为它根据位置存储值，如下所示： `var l_array = [];`

在最后一次添加元素使用：`l_array.push(<your string>);` 在指定位置添加元素：`l_array.splice(<position>,0,<your string>);`

并检索使用：`l_array[<posit>];`

# ruby-on-rails - 为大型项目剖析 ruby on rails 模型、视图、控制器和路由

> ID：13066048
> 
> 赞同：-2
> 
> 时间：2012-10-25T09:56:42.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, hmvc

我想以 HMVC 形式分离模型视图控制器，包括路由。阅读后我发现 ruby​​ on rails 不支持 HMVC 结构。有什么替代方法吗？我也想明智地分开路由模块。请建议一些最好的方法，因为将所有东西都放在一个地方很难管理。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:04:02.110

在您的应用程序中，通过**[控制器命名空间和路由](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)**，您可以在应用程序的主要 MVC 结构子系统内的子文件夹中进行组织。使用 David 的**[路由](https://gist.github.com/2492118)**补丁，您可以拆分一个大`routes.rb`文件。

如果您更喜欢从主应用程序中提取“应用程序”，并将它们安装在路由器中，**[Rails::Engine](http://guides.rubyonrails.org/engines.html)**是您的最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:05:39.520

您可以使用嵌套路由：rails guide [http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# php - Magento - 从 1.5 升级到 1.7 并在自定义主题中出现错误

> ID：13066049
> 
> 赞同：0
> 
> 时间：2012-10-25T09:56:43.890
> 
> 标签：php, magento, magento-1.7

升级到 1.7 后（谢天谢地，全部在开发服务器上！）我收到以下客户端自定义主题的错误日志：

```
a:5:{i:0;s:93:"Invalid method Mage_Catalog_Block_Navigation::renderCategoriesAndChildrenMenuHtml(Array
(
)
)";i:1;s:3806:"#0 /var/www/vhosts/mydomain.co.uk/httpdocs/app/design/frontend/p365_mydomain/default/template/catalog/navigation/left.phtml(17): Varien_Object->__call('renderCategorie...', Array)
#1 /var/www/vhosts/mydomain.co.uk/httpdocs/app/design/frontend/p365_mydomain/default/template/catalog/navigation/left.phtml(17): Mage_Catalog_Block_Navigation->renderCategoriesAndChildrenMenuHtml()
#2 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/var/www/vhosts...')
#3 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/p365_s...')
#4 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#5 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#6 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml()
#7 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#8 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#9 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('left', true)
#10 /var/www/vhosts/mydomain.co.uk/httpdocs/app/design/frontend/p365_mydomain/default/template/page/2columns-left.phtml(34): Mage_Core_Block_Abstract->getChildHtml('left')
#11 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/var/www/vhosts...')
#12 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/p365_s...')
#13 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#14 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#15 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract->toHtml()
#16 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput()
#17 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Cms/Helper/Page.php(137): Mage_Core_Controller_Varien_Action->renderLayout()
#18 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Cms/Helper/Page.php(52): Mage_Cms_Helper_Page->_renderPage(Object(Mage_Cms_IndexController), 'home')
#19 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Cms/controllers/IndexController.php(45): Mage_Cms_Helper_Page->renderPage(Object(Mage_Cms_IndexController), 'home')
#20 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Cms_IndexController->indexAction()
#21 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#22 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#23 /var/www/vhosts/mydomain.co.uk/httpdocs/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#24 /var/www/vhosts/mydomain.co.uk/httpdocs/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#25 /var/www/vhosts/mydomain.co.uk/httpdocs/index.php(87): Mage::run('', 'store')
#26 {main}";s:3:"url";s:1:"/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:22:"mydomain_store_view";} 
```

主题在 1.5 安装中运行良好，但由于主题是由其他人制作的（并且他们安装了旧版本，我不能确定他们没有修改任何核心代码等

谷歌搜索找到了“无效方法 Mage_Catalog_Block_Navigation::renderCategoriesMenuHtml”的结果，但没有找到“renderCategoriesAndChildrenMenuHtml”的结果。我以为它可能是一个自定义函数，但我在核心代码中找到了它。完全被这个难住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:48:16.620

Magento 1.5.0.0 的默认主题调用`renderCategoriesMenuHtml`and 块仅包含 function `renderCategoriesMenuHtml`。在您的情况下，或者有人更正了核心文件，或者重写了`Mage_Catalog_Block_Navigation`.

一种可能的解决方案是将函数替换`renderCategoriesAndChildrenMenuHtml`为`renderCategoriesMenuHtml`文件`app/design/frontend/p365_mydomain/default/template/catalog/navigation/left.phtml`或使用默认模板进行导航/左侧代码：

```
<?php if (!Mage::registry('current_category')) return ?>
<?php $_categories = $this->getCurrentChildCategories() ?>
<?php $_count = is_array($_categories)?count($_categories):$_categories->count(); ?>
<?php if($_count): ?>
<div class="block block-layered-nav">
    <div class="block-title">
        <strong><span><?php echo $this->__('Browse By') ?></span></strong>
    </div>
    <div class="block-content">
        <dl id="narrow-by-list2">
            <dt><?php echo $this->__('Category') ?></dt>
            <dd>
                <ol>
                <?php foreach ($_categories as $_category): ?>
                    <?php if($_category->getIsActive()): ?>
                    <li>
                        <a href="<?php echo $this->getCategoryUrl($_category) ?>"<?php if ($this->isCategoryActive($_category)): ?> class="current"<?php endif; ?>><?php echo $this->htmlEscape($_category->getName()) ?></a> (<?php echo $_category->getProductCount() ?>)
                    </li>
                    <?php endif; ?>
                <?php endforeach ?>
                </ol>
            </dd>
        </dl>
        <script type="text/javascript">decorateDataList('narrow-by-list2')</script>
    </div>
</div>
<?php endif; ?> 
```

# jquery - Phonegap IOS 的 Phonegap 推送通知 - 推荐的解决方案

> ID：13066050
> 
> 赞同：0
> 
> 时间：2012-10-25T09:56:50.317
> 
> 标签：jquery, ios, html, cordova, push-notification

任何人都可以推荐在 HTML5 Phonegap 应用程序中实现推送通知的最佳/最便宜的路线吗？我真的不知道从哪里开始。

我知道自己设置系统非常棘手，因为我是一个前端开发人员，xcode 开发经验最少 - 所以我想我需要实现一个现有的服务，比如 Urban Airship？

我想知道是否有人有过 Phonegap/IOS 推送通知的经验并且可以推荐一个好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:24:16.853

看看这篇非常优秀且非常详细的文章，它将引导您完成 iOS 设备 PhoneGap 中推送通知的整个过程：http: [//devgirl.org/2012/10/19/tutorial-apple-push-notifications-with -phonegap-part-1/](http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/)

# openlaszlo - 如何根据openlaszlo中的坐标获取视图？

> ID：13066052
> 
> 赞同：3
> 
> 时间：2012-10-25T09:56:57.090
> 
> 标签：openlaszlo, lzx

在 JavaScript 中，我们有 document.elementfrompoint 来获取基于坐标的元素。在 Openlaszlo 中是否有类似的东西可以根据坐标获取视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:24:08.770

OpenLaszlo 中没有直接支持该功能，但对于基于 ActionScript 3 的运行时，您可以使用[flash.display.DisplayObjectContainer#getObjectsUnderPoint()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#getObjectsUnderPoint%28%29)方法。在 DHTML 运行时，您可以使用[document.elementFromPoint(x, y)](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)，并且[基于](http://www.quirksmode.org/dom/w3c_cssom.html#documentview)所有现代浏览器都应该支持的 Quirksmode。

这是一个实现方法的示例程序`canvas.elementFromPoint()`：

```
<canvas debug="true">

    <passthrough when="$as3">
        import flash.geom.Point;
    </passthrough>

    <view id="background" width="100%" height="100%" bgcolor="#eeeeee" clickable="true"/>

    <view id="red" x="200" y="100" width="200" height="200" bgcolor="#ff0000" opacity="0.3" clickable="true" />
    <view id="green" x="150" y="200" width="200" height="200" bgcolor="#00ff00" opacity="0.3" clickable="true"/>
    <view id="blue" x="250" y="200" width="200" height="200" bgcolor="#0000ff" opacity="0.3" clickable="true"/>

    <handler name="onclick" reference="lz.GlobalMouse">
        canvas.elementFromPoint();
    </handler>

    <method name="elementFromPoint"><![CDATA[
        var mouseX = canvas.getMouse('x'),
            mouseY = canvas.getMouse('y'),
            objects = null,     // array of objects at mouse pointer in SWF runtime
            element = null;     // The element we are looking for
        Debug.info( 'mouse position: x=' + mouseX + ' / mouseY=' + mouseY );
        if ($as3) {
            // in SWF runtime, use the DisplayObjectContainer.getObjectsUnderPoint() method
            objects = canvas.getDisplayObject().getObjectsUnderPoint(new Point(mouseX, mouseY));
            element = objects[objects.length-1].owner;
        } else {
            // in DHTML, we can use elementFromPoint, and need to retrieve the owner view of the div
            element = document.elementFromPoint(mouseX, mouseY).owner.owner;
        }
        Debug.info('View under mousecursor:', element);
        return element;
    ]]></method>

</canvas> 
```

有 4 个视图，一个背景视图缩放为 100% x 100%。以及三种颜色视图：红色、绿色和蓝色 - 蓝色是最上面的一种。单击视图时，将返回正确的视图对象。

![在此处输入图像描述](../Images/39f71791c6fdc43d192a5e53ca8c5ee7.png)

该代码已在 Chrome 22.0、Firefox 16.0.1 和 Opera 12.02 的 DHTML 运行时中进行了测试。Flash 应该适用于所有浏览器，我没有用 IE 测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:30:01.490

我不这么认为。您必须构建自己的自定义数组或观察者对象，收集所有视图，然后遍历所有项目并检查坐标是否在视图的边界框内。在 Flash 中也有类似“hitTest”的东西，它可能类似于 JavaScript 的“document.elementfrompoint”来获得精确的像素匹配，以防边界框对你来说不够用。

塞巴斯蒂安

# javascript - 使用 jQuery/JavaScript 使用浮动 li 获取 ul 宽度

> ID：13066054
> 
> 赞同：2
> 
> 时间：2012-10-25T09:57:01.393
> 
> 标签：javascript, jquery, html, css

说我有这个

```
<ul>
  <li>Questions</li>
  <li>Tags</li>
  <li>Users</li>
</ul>

ul { list-style: none }
li { float: left } 
```

基本上，就像上面的菜单一样（Stackoverflow 徽标右侧的“问题标签用户...”）

如何获得实际宽度`ul`？

目的是让我可以将其对齐`ul`到右侧或居中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:05:21.593

`width()`在这种情况下，只需使用即可。

不过，我认为，鉴于您问题的性质，您已经申请`display: inline`了`ul`它的宽度，因此 DOM 无法读取它的宽度。

在这种情况下，您可以循环遍历`li`元素并将它们的宽度相加，如下所示：

```
var ulWidth = 0;
$("li").each(function() {
    ulWidth = ulWidth + $(this).width()
});
alert(ulWidth); 
```

[**示例小提琴**](http://jsfiddle.net/2vejh/)

要模拟居中列表，您需要找到 UL 和集体 LI 标签的宽度。

```
<!doctype html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>
      jQuery(document).ready(function($){
        var w = 0;
        $('ul > li').each(function(){ w+= $(this).width(); });
        $('ul > li:first').css({'margin-left': ($('ul').width()-w)/2+'px'});
      });
    </script>
    <style type="text/css">
      ul,li { margin:0; padding:0; }
      ul { list-style: none }
      li { float: left; }
    </style>
  </head>
  <body>
    <ul>
      <li>Questions</li>
      <li>Tags</li>
      <li>Users</li>
    </ul>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:02:20.960

好吧，试试jquery：

```
var width = $('ul').attr( 'width ); 
```

您可以为其分配一个值，例如：

```
$('ul').attr( 'width' , value ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:02:49.420

这应该适合你：

```
$("ul").width() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:02:53.450

您可以使用 jquery **[.width()](http://api.jquery.com/width/)**来获取`ul`元素的宽度

```
$('ul').width(); 
```

**[看演示](http://jsfiddle.net/aNJk9/)**

# machine-learning - 用于名义选项的 WEKA CVParameterSelection（例如 NaiveBayes -K 或 -D）

> ID：13066059
> 
> 赞同：0
> 
> 时间：2012-10-25T09:57:25.637
> 
> 标签：machine-learning, weka

这可能是不可能的，甚至是不明智的，但我想知道在 WEKA 中是否有可能做到这一点。

我有我的 NaiveBayes 分类器，我希望它通过交叉折叠来决定最好使用哪个选项，-D 表示离散或 -K 表示基于内核。

```
ParamSelection ps = new ParamSelection();
ps.setClassifier(new NaiveBayes());
ps.setCVParameters("K D"); 
```

使用决策树，我们这样做，但 -K 和 -D 选项不需要数字参数。

```
ParamSelection ps = new ParamSelection();
ps.setClassifier(new J48());
ps.setCVParameters("M 3 5 2"); 
```

# ruby-on-rails - Rails 表单参数：params[:controller][:variable] 还是 params[:variable]？

> ID：13066060
> 
> 赞同：1
> 
> 时间：2012-10-25T09:57:25.687
> 
> 标签：ruby-on-rails

`params[:controller][:variable]`在接收表单 POST 的 Rails 控制器中，将参数称为还是简单地引用更好`params[:variable]`？

Rails 的表单助手似乎将某些字段命名为`controller[variable]`视图中的名称，但控制器以某种方式知道如何在控制器使用`params[:variable]`. 在其他情况下，它似乎不知道，特别是当我使用不同的控制器名称时（例如`form_for(@model, :as => :othercontroller, :url => :othercontroller_path(@model))`.

Rails 文档表明`params[:variable]`这就足够了，但似乎并非如此？

# android - Android如何在应用程序重新启动时保留静态数据？

> ID：13066065
> 
> 赞同：0
> 
> 时间：2012-10-25T09:57:45.730
> 
> 标签：android, android-4.0-ice-cream-sandwich

我有一个包含所有静态对象和函数的抽象类，用于在执行会话期间存储应用程序的一些全局数据。

一旦我在 ICS 和更高版本中重新启动应用程序，系统的设置 ALWAYS_FINISH_ACTIVITIES 设置为 true，所有数据都会重置为 null。

在应用程序重新启动时维护数据的更好方法是什么？

问候，

安卓 IT

**编辑我的问题：我知道 Sharepreference 可能是一个更好的选择，但我不想为应用程序的多个会话存储数据，而且我存储的数据非常庞大。问候， Android IT**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:02:16.637

每个 Android 应用程序都在一个依赖进程中运行。当应用程序成为后台并且系统需要内存时，应用程序的进程可能会被系统杀死。在这种情况下，当应用重新启动时，静态对象会丢失。

我认为使用 SharedPreference 来维护数据是一种更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:03:47.163

如果没有太多数据，您可以将它们保存在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)

[您可以使用PreferenceManager.getDefaultSharedPreferences()](http://developer.android.com/reference/android/preference/PreferenceManager.html#getDefaultSharedPreferences%28android.content.Context%29)访问它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:08:24.033

一旦应用程序退出或销毁，将删除所有数据。如果您想在重新启动后访问，您应该根据您的要求保存数据。像本地或网络。它加深了你。现在您可以优先存储数据，以便在重新启动应用程序后有用。我认为这对你更好：[How to use SharedPreferences in Android to store, fetch and edit values](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:59:48.477

[您可以使用http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)存储数据`SharedPreferences`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T09:59:57.570

将数据存储在本地存储上似乎是合适的：http: [//developer.android.com/training/basics/data-storage/index.html](http://developer.android.com/training/basics/data-storage/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T10:01:43.530

您可以使用 XML 文件将数据存储在本地。您可以在启动时使用 DOM Reader 读取 XML 文件

[http://www.ibm.com/developerworks/library/x-android/](http://www.ibm.com/developerworks/library/x-android/)

如果您有大量数据，您可以使用 SQLite 数据库

[http://developer.android.com/training/basics/data-storage/databases.html](http://developer.android.com/training/basics/data-storage/databases.html)

# iphone - 创建一个 iOS6 地图 MKUserTrackingBarButtonItem 按钮

> ID：13066066
> 
> 赞同：2
> 
> 时间：2012-10-25T09:57:56.000
> 
> 标签：iphone, ios6, mkmapview, uibarbuttonitem, userlocation

我想以与 iOS6 相同的方式创建 MKUserTrackingBarButtonItem。就像一个浮动的 UIBarButtonItem。( [http://cl.ly/image/1Q1K2S1A1H3N](http://cl.ly/image/1Q1K2S1A1H3N) )

您能否就如何实现这一目标提出一些建议？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T16:49:39.090

最后，我按照@rckoenes 的建议手动创建了按钮。

方法如下（此处提供了一个工作项目：[https](https://github.com/jcalonso/iOS6MapsUserHeadingButton) ://github.com/jcalonso/iOS6MapsUserHeadingButton ）：

```
//User Heading Button states images
UIImage *buttonImage = [UIImage imageNamed:@"greyButtonHighlight.png"];
UIImage *buttonImageHighlight = [UIImage imageNamed:@"greyButton.png"];
UIImage *buttonArrow = [UIImage imageNamed:@"LocationGrey.png"];

//Configure the button
userHeadingBtn = [UIButton buttonWithType:UIButtonTypeCustom];
[userHeadingBtn addTarget:self action:@selector(startShowingUserHeading:) forControlEvents:UIControlEventTouchUpInside];
//Add state images
[userHeadingBtn setBackgroundImage:buttonImage forState:UIControlStateNormal];
[userHeadingBtn setBackgroundImage:buttonImage forState:UIControlStateNormal];
[userHeadingBtn setBackgroundImage:buttonImageHighlight forState:UIControlStateHighlighted];
[userHeadingBtn setImage:buttonArrow forState:UIControlStateNormal];

//Button shadow
userHeadingBtn.frame = CGRectMake(5,425,39,30);
userHeadingBtn.layer.cornerRadius = 8.0f;
userHeadingBtn.layer.masksToBounds = NO;
userHeadingBtn.layer.shadowColor = [UIColor blackColor].CGColor;
userHeadingBtn.layer.shadowOpacity = 0.8;
userHeadingBtn.layer.shadowRadius = 1;
userHeadingBtn.layer.shadowOffset = CGSizeMake(0, 1.0f);

[self.mapView addSubview:userHeadingBtn]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T17:21:00.250

如果您想将 jcalonso 的答案与自动布局一起使用，以便它支持纵向/横向 iPhone/iPad，只需删除在按钮上设置框架的行，并在调用 addSubView 后添加这些约束：

```
[mapView setTranslatesAutoresizingMaskIntoConstraints:NO];
[userHeadingBtn setTranslatesAutoresizingMaskIntoConstraints:NO];

NSDictionary *dict = NSDictionaryOfVariableBindings(mapView, userHeadingBtn);

//Map has user heading btn
[mapView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-(>=175)-[userHeadingBtn(30)]-|" options:0 metrics:0 views:dict]];
[mapView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-(>=175)-[userHeadingBtn(39)]-|" options:0 metrics:0 views:dict]];

//Continue with adding the map to the baseview
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[mapView]|" options:0 metrics:0 views:dict]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[mapView]|" options:0 metrics:0 views:dict]]; 
```

# string - 使用 Sublime Text 在特定字符串后删除/添加换行符

> ID：13066068
> 
> 赞同：96
> 
> 时间：2012-10-25T09:58:19.773
> 
> 标签：string, text-editor, sublimetext2

使用 Sublime Text 2 - 是否可以在文本文件中的特定字符串之后**插入换行符**/文本返回，例如使用*Find* ‣ *Replace*工具？

（奖励问题：是否可以删除特定字符串后的所有换行符）

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-10-25T20:25:28.383

以下是您在 Mac 上的操作方式：

`Command`+ `F`>*输入字符串*> `Control`+ `Command`+ `G`> `ESC`> `Right Arrow`>*换行符*

和[Windows/Linux](http://www.sublimetext.com/docs/selection)（未经测试）：

`Control`+ `F`>*输入字符串* > `Alt`+ `F3`> `ESC`> `Right Arrow`>*换行符*

重要的部分是`Control`++选择所有匹配项`Command`。 一旦您选择了您要查找的文本，您就可以使用提供的多个光标来执行您想要的任何文本操作。`G`

Protip：您可以使用`Command`+ *click*（或`Control`+ *click*）手动实例化多个光标以达到类似的结果。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-03-27T17:41:38.513

使用***查找 - 替换工具***，这可以通过两种不同的方式完成：

1.  单击“***替换”字段***并按`Ctrl`+`Enter`插入换行符（该字段应调整大小但不会，因此很难看到插入的换行符）。

2.  在***Find - Replace 工具***中，激活***S&R 正则表达式模式***（左侧第一个图标`.*`，键盘快捷键是`Alt`+ `Ctrl/Cmd`+`R`来激活/停用它）。

3.  **`\n`**在要插入换行符的任何地方输入***替换字段。***

如果您想查找换行符，这两种解决方案也都有效，只需在*Find 字段中进行*即可。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-17T02:50:59.087

编辑->线条->加入线条 (Ctrl+J)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-10T01:15:44.947

您可能应该使用多个游标。请参阅[非官方文档](http://docs.sublimetext.info/en/latest/editing/editing.html#multiple-selections)或这个[不错的教程](https://tutsplus.com/lesson/multiple-cursors-and-incremental-search/)。以下是一些简短的说明，可帮助您上路：

1.  将光标放在感兴趣的字符串上。
2.  键入`Command`+ `D`(Mac) 或`Control`+ `D`(Windows/Linux) 以选择字符串的当前实例。
3.  键入`Command`+ `D`(Mac) 或`Control`+ `D`(Windows/Linux) 以选择字符串的连续实例。
4.  或者，键入`Control`++ (Mac) 或++`Command`以选择字符串的**所有**实例。`G``Control``Command``G`
***   现在您有多个光标，因此请随意插入或删除换行符。*   （键入`esc`退出多光标模式。）**

 **玩得开心！**

# java - 类型 T 不是通用的；它不能用泛型函数中的参数错误进行参数化

> ID：13066071
> 
> 赞同：9
> 
> 时间：2012-10-25T09:58:33.920
> 
> 标签：java, generics, collections

我想创建一个通用函数，该函数采用任何 Map 和一个 String 键，如果该键不存在于地图中，那么它应该创建一个值类型的新实例（已传递）并将其放入地图中然后把它返还。

这是我的实现

```
public <T> T getValueFromMap(Map<String, T> map, String key, Class<T> valueClass){
    T value = map.get(key);
    if (value == null){
        try {
            value = valueClass.newInstance();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        map.put(key, value);
    }
    return value;
} 
```

如果我将它与普通（非通用）列表一起用作值类型，它就可以工作，

```
Map<String,List> myMap;
List value = getValueFromMap(myMap, "aKey", List.class) //works 
```

但不适用于泛型类型列表

```
Map<String,List<String>> myMap;
List<String> value = getValueFromMap(myMap, "aKey", List.class) //does not work 
```

另外，如果我尝试`Map<String, T>`通过将其更改为它来使地图参数通用，`Map<String, T<?>>`则会抱怨`the type T is not generic; it cannot be parameterized with arguments <?>`

可以将泛型参数本身设为泛型吗？

有没有办法创建具有上述要求的功能？

~更新

感谢大家的所有有见地的答案。

我已经验证了接受的解决方案适用于使用此代码的任何值类型

```
 Map<String, Map<String, List<String>>> outer = 
            new HashMap<String, Map<String,List<String>>>();

    Map<String, List<String>> inner = getValueFromMap(outer, "b", 
            (Class<Map<String, List<String>>>)(Class<?>)HashMap.class);

    List<String> list = getValueFromMap(inner, "a", 
            (Class<List<String>>)(Class<?>)ArrayList.class); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T10:00:56.713

您需要最具体的类型，这是`String`您的情况。`List.class`在您需要特定类型的情况下返回您`Class<List<?>>`，因此您需要添加演员表`Class<List<String>>`

```
 Map<String,List<String>> myMap = new HashMap<String, List<String>>();;
 List<String> value = getValueFromMap(myMap, "aKey",
           (Class<List<String>>)(Class<?>)ArrayList.class) ; 
```

现在，如果您调用如下方法

```
 getValueFromMap(myMap, "aKey",      List.class) 
                ^^^T is List<String>  ^^^ T is List<?> wild char since List.class
                                          will return you Class<List<?>> 
```

所以你的定义`T`导致编译器混淆，所以你得到编译错误。

你不能创建实例，`List.class`因为它是接口，你需要它的实现类，所以调用方法`ArrayList.class`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:11:41.700

第一个示例有效，因为您使用的是不推荐的原始类型。

要解决您的编译错误，您可能希望不将类限制为 T，而是允许某些东西超 T

`public <T> T getValueFromMap(Map<String, T> map, String key, Class<? super T> valueClass)`

但是您将没有保存转换，您需要将新实例的结果转换为 (T)。而且你不能使用 List 作为类，因为它是一个 iterface，你不能创建它的实例。

```
public <K,V> V getValueFromMap(Map<K, V> map, K key, Class<? super V> valueClass){

    if(map.containsKey(key) == false) {
        try {
            map.put(key, (V) valueClass.newInstance());
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
    }

    return map.get(key);
} 
```

* * *

```
Map<String,ArrayList<String>> myMap = new HashMap<String, ArrayList<String>>();
List<String> value = getValueFromMap(myMap, "aKey", ArrayList.class); //will work 
```

**编辑**

但是`Map<String,List<String> myMap`OP 期望的基本形式呢？

我们应该知道`ArrayList`is super type of `List`，但`ArrayList<String>`不是 super type of`List<String>`但它是可赋值的。

所以让我们尝试一下：

示例 1：`getValueFromMap(myMap, "aKey", ArrayList.class); //Compilation error`

示例 2：`getValueFromMap(myMap, "aKey", List.class); //Runtime error`

对此的解决方案可能是假设如果类是 List 则创建 ArrayList。

这迫使我们创建一些*不体面的代码*。

```
public static <V> V createInstace(Class<V> valueClass) throws InstantiationException, IllegalAccessException {

        if(List.class.isAssignableFrom(valueClass)) {
            return (V) new ArrayList<V>();
        }

        return valueClass.newInstance();

    } 
```

这段代码与泛型没有任何共同之处，但可以正常工作。

最后我们完成

```
public static void main(String[] args) {

        Map<String,List<String>> myMap = new HashMap<String, List<String>>();
        List<String> value = getValueFromMap(myMap, "aKey", List.class); //does not work

        value.add("Success");

        System.out.println(value);
    }

    public static <K,V> V getValueFromMap(Map<K, V> map, K key, Class<? super V> valueClass){

        if(map.containsKey(key) == false) {
            try {
                map.put(key, (V) createInstace(valueClass));
            } catch (InstantiationException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }
        }

        return map.get(key);
    }

    public static <V> V createInstace(Class<V> valueClass) throws InstantiationException, IllegalAccessException {

        if(List.class.isAssignableFrom(valueClass)) {
            return (V) new ArrayList<V>();
        }

        return valueClass.newInstance();

    } 
```

如果是这样的结果`[Sucess]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:12:30.170

由于泛型类型信息在运行时被删除，因此您不能使用本身为泛型的参数调用泛型方法。

见[http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#FAQ004](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#FAQ004)

如果您总是使用列表映射，那么您可以声明要采用的方法`Map<String, List<T>>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T10:21:37.977

这里的问题是您要求一个`Class<T>`参数，并且没有办法`Class<List<String>>`（直接）实际获取一个对象。

`List.class`给你一个`Class<List>`，但`List<String>.class`甚至不编译（它在语法上不正确）。

解决方法是自己将类对象转换为通用版本。您需要先向上转换，否则 Java 会抱怨类型不可分配：

```
Class<List<String>> clz = (Class<List<String>>)(Class<?>)List.class; 
```

由于泛型是通过擦除实现的，因此强制转换从根本上不会做任何事情 - 但它让编译器对它的推断感到满意`T`，并允许像您这样灵活的泛型方法工作。当您想要传递`Class<T>`令牌时，这不是一个不常见的解决方法。

# c - C中的浮点变量

> ID：13066075
> 
> 赞同：1
> 
> 时间：2012-10-25T09:58:49.097
> 
> 标签：c, format-specifiers

可能这是一个简单的问题，但我不确定浮点变量如何存储在内存中以及为什么它会以这种方式运行，有人可以解释一下以下行为。

```
#include<stdio.h>

int main ()
{
    int a = 9/5;
    printf("%f\n", a);
    return 0;
} 
```

# 输出：

```
0.000000 
```

我查看了一些关于浮点变量如何存储在内存中的信息，它包含关于尾数、指数和符号的内容。但我不知道如何在这里联系起来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T10:01:27.613

```
int a = 9/5; 
```

执行整数除法并忽略余数，因此`a`设置为 1。尝试打印 using`%f`会产生未定义的行为，但碰巧你`0.000000`摆脱了它。

做

```
double a = 9./5.; 
```

相反，`%d`如果整数除法是所需的行为，则打印。（`float`也可以，但是当传递给 时`a`会被提升到，所以没有理由不使用。）`double``printf``double`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:00:43.937

这是 C 中未定义的行为。使用`%d`格式说明符而不是`%f`.

[printf() 是否取决于格式说明符的顺序？](https://stackoverflow.com/questions/3383425/does-printf-depend-on-order-of-format-specifiers)给你详细解答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:01:42.330

这是一种未定义的行为。

您正在使用浮点格式说明符 ( `%f`) 来打印 int ( `a`)。您应该使用`%d`来查看正确的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:05:06.280

以下是对您的代码的简要分析：

```
int a = 9/5; // 9/5 = 1.8, but since you are doing integer division and storing the value in an integer it will store 1.
printf("%f\n", a);//Using incorrect format specifiers with respect to datatypes, will cause undefined behavior

printf("%d\n",a);//This should print 1\. And correct. 
```

或者如果你想要浮动：

而不是`int`使用`float`：

```
 float a=9.0f/5;//This will store 1.800000f
   //float a=9/5 will store 1.000000 not, 1.8 because of integer divison 
   printf("%f\n",a); //This will print 1.800000 
```

另请阅读以下内容：[http](http://en.wikipedia.org/wiki/IEEE_754-2008) ://en.wikipedia.org/wiki/IEEE_754-2008 ，了解浮点的工作原理。

关于整数除法的说明：

C99： **6.5.5 乘法运算符**

`6`当整数被除法时，`/`运算符的结果是代数商，其中任何小数部分被丢弃。^(88))如果商`a/b`是可表示的，则表达式`(a/b)*b + a%b`应等于`a`

^(88))这通常被称为“向零截断”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-25T10:02:34.513

仅仅假设您的除法应该导致正常数学的一小部分不会神奇地使它成为浮点数。

```
int a = 9/5; 
```

你需要使用

```
float a = 9.0/5; 
```

首先，您需要正确的数据类型，即浮点数（或更好的双精度以获得更高的精度）来存储浮点数。

其次，如果您要对两个整数（即 9 和 5）进行除法，它将简单地遵循整数除法，即仅存储除法的整数部分并丢弃其余部分。为了避免我在 9 之后添加了 .0。这将强制编译器隐式转换为浮点数并进行除法。

关于您提到为什么要打印 0，已经提到在整数上尝试 %f 是未定义的行为。从技术上讲，浮点数是 4 个字节，包含 3 个字节数和 1 个字节指数，它们结合起来生成结果值。

# android - 显示从源到目的地的路线图

> ID：13066092
> 
> 赞同：1
> 
> 时间：2012-10-25T09:59:33.873
> 
> 标签：android, map, android-activity, routes

我想在谷歌地图中绘制从源到目的地的路线图。源是从 GP 跟踪的，目的地是从用户那里得到的。我希望在这些点之间显示路线。我想在每次位置更新时重新绘制地图由全球定位系统

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:47:10.470

这是我的地图活动的来源：

```
package tvarwebu.projects.map;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;

public class MapProjectActivity extends MapActivity {

GeoPoint myPoint = null;
GeoPoint nextPoint = null;
MapView map;
private Road mRoad;
int latSpan = -1;
boolean moving = false;
long lastTimestamp = 0;
int pointCount = 0;
int lat = 0;
int lng = 0;
Location currLoc = null;
OverlayItem currPoint;
MyItemizedOverlay currItemizedOverlay;
List&lt;Overlay&gt; mapOverlays;
LocationManager lm;

@Override
protected void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.main);

map = (MapView) findViewById(R.id.mapView);
map.setBuiltInZoomControls(true);
map.setStreetView(true);
map.setSatellite(false);

// Your position initialize
lat = 53324388;
lng = -6263194;

myPoint = new GeoPoint(lat, lng);

Drawable drawable = this.getResources().getDrawable(
R.drawable.flag_green);

MyItemizedOverlay itemizedoverlay = new MyItemizedOverlay(drawable,
this);

OverlayItem overlayitem = new OverlayItem(myPoint, "Start Position",
"Your start position");

itemizedoverlay.addOverlay(overlayitem);

// Position of next point
int lat2 = 53348084;
int lng2 = -6292434;

nextPoint = new GeoPoint(lat2, lng2);

OverlayItem overlayitem2 = new OverlayItem(nextPoint, "Position",
"Position of next point");

itemizedoverlay.addOverlay(overlayitem2);

mapOverlays = map.getOverlays();
mapOverlays.add(itemizedoverlay);

Drawable draw2 = this.getResources().getDrawable(R.drawable.flag_red);

MyItemizedOverlay over2 = new MyItemizedOverlay(draw2, this);
over2.addOverlay(overlayitem2);

mapOverlays.add(over2);

// zooming to both points
int maxLatitude = Math.max(lat, lat2);
int minLatitude = Math.min(lat, lat2);
int maxLongitude = Math.max(lng, lng2);
int minLongitude = Math.min(lng, lng2);

MapController mc = map.getController();
mc.zoomToSpan(maxLatitude - minLatitude, maxLongitude - minLongitude);
mc.animateTo(new GeoPoint((maxLatitude + minLatitude) / 2,
(maxLongitude + minLongitude) / 2));

map.invalidate();

//Drawing path in new Thread
new Thread() {

@Override
public void run() {
double fromLat = Double.valueOf(myPoint.getLatitudeE6()) / 1000000.0,
fromLon = Double.valueOf(myPoint.getLongitudeE6()) / 1000000.0;
double toLat = Double.valueOf(nextPoint.getLatitudeE6()) / 1000000.0,
toLon = Double.valueOf(nextPoint.getLongitudeE6()) / 1000000.0;

String url = RoadProvider
.getUrl(fromLat, fromLon, toLat, toLon);
InputStream is = getConnection(url);
mRoad = RoadProvider.getRoute(is);
mHandler.sendEmptyMessage(0);
}
}.start();

}

Handler mHandler = new Handler() {
public void handleMessage(android.os.Message msg) {
MapOverlay mapOverlay = new MapOverlay(mRoad, map);
List&lt;Overlay&gt; listOfOverlays = map.getOverlays();
// listOfOverlays.clear();
listOfOverlays.add(mapOverlay);
map.invalidate();
};
};

private InputStream getConnection(String url) {
InputStream is = null;
try {
URLConnection conn = new URL(url).openConnection();
is = conn.getInputStream();
} catch (MalformedURLException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}
return is;
}

@Override
protected boolean isRouteDisplayed() {
// TODO Auto-generated method stub
return false;
}
// Map extends overlay for drawing path
class MapOverlay extends com.google.android.maps.Overlay {
Road mRoad;
ArrayList&lt;GeoPoint&gt; mPoints;

public MapOverlay(Road road, MapView mv) {
mRoad = road;
// mRoute is field of route points getting from Google Maps
if (road.mRoute.length &gt; 0) {
mPoints = new ArrayList&lt;GeoPoint&gt;();
for (int i = 0; i &lt; road.mRoute.length; i++) {
mPoints.add(new GeoPoint(
(int) (road.mRoute[i][1] * 1000000),
(int) (road.mRoute[i][0] * 1000000)));
}

}
}

@Override
public void draw(Canvas canvas, MapView mv, boolean shadow) {
drawPath(mv, canvas);
}

public void drawPath(MapView mv, Canvas canvas) {
int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
Paint paint = new Paint();
latSpan = mv.getLatitudeSpan();
paint.setColor(Color.parseColor("#998447cc"));
paint.setStyle(Paint.Style.STROKE);
paint.setStrokeWidth(6);
if (mPoints != null) {
for (int i = 0; i &lt; mPoints.size(); i++) {
Point point = new Point();
mv.getProjection().toPixels(mPoints.get(i), point);
x2 = point.x;
y2 = point.y;
if (i &gt; 0) {
canvas.drawLine(x1, y1, x2, y2, paint);
}
x1 = x2;
y1 = y2;
}
}
}
}
} 
```

此外，您将需要以下文件：

道路.java

```
package tvarwebu.projects.map;

public class Road {
public String mName;
public String mDescription;
public int mColor;
public int mWidth;
public double[][] mRoute = new double[][] {};
public Point[] mPoints = new Point[] {};

} 
```

Point.java

```
package tvarwebu.projects.map;

public class Point {
String mName;
String mDescription;
String mIconUrl;
double mLatitude;
double mLongitude;
} 
```

RoadProvider.java

```
package tvarwebu.projects.map;

import java.io.IOException;
import java.io.InputStream;
import java.util.Stack;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class RoadProvider {

public static Road getRoute(InputStream is) {
KMLHandler handler = new KMLHandler();
try {
SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
parser.parse(is, handler);
} catch (ParserConfigurationException e) {
e.printStackTrace();
} catch (SAXException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}
return handler.mRoad;
}

public static String getUrl(double fromLat, double fromLon, double toLat,
double toLon) {// connect to map web service
StringBuffer urlString = new StringBuffer();
urlString.append("http://maps.google.com/maps?f=d&amp;hl=en");
urlString.append("&amp;saddr=");// from
urlString.append(Double.toString(fromLat));
urlString.append(",");
urlString.append(Double.toString(fromLon));
urlString.append("&amp;daddr=");// to
urlString.append(Double.toString(toLat));
urlString.append(",");
urlString.append(Double.toString(toLon));
urlString.append("&amp;ie=UTF8&amp;0&amp;om=0&amp;output=kml");

String ggg = urlString.toString();
return urlString.toString();
}
}

class KMLHandler extends DefaultHandler {
Road mRoad;
boolean isPlacemark;
boolean isRoute;
boolean isItemIcon;
private Stack mCurrentElement = new Stack();
private String mString;

public KMLHandler() {
mRoad = new Road();
}

public void startElement(String uri, String localName, String name,
Attributes attributes) throws SAXException {
mCurrentElement.push(localName);
if (localName.equalsIgnoreCase("Placemark")) {
isPlacemark = true;
mRoad.mPoints = addPoint(mRoad.mPoints);
} else if (localName.equalsIgnoreCase("ItemIcon")) {
if (isPlacemark)
isItemIcon = true;
}
mString = new String();
}

public void characters(char[] ch, int start, int length)
throws SAXException {
String chars = new String(ch, start, length).trim();
mString = mString.concat(chars);
}

public void endElement(String uri, String localName, String name) throws SAXException {
if (mString.length() &gt; 0) {
if (localName.equalsIgnoreCase("name")) {
if (isPlacemark) {
isRoute = mString.equalsIgnoreCase("Route");
if (!isRoute) {
mRoad.mPoints[mRoad.mPoints.length - 1].mName = mString;
}
} else {
mRoad.mName = mString;
}
} else if (localName.equalsIgnoreCase("color") &amp;&amp; !isPlacemark) {
mRoad.mColor = Integer.parseInt(mString, 16);
} else if (localName.equalsIgnoreCase("width") &amp;&amp; !isPlacemark) {
mRoad.mWidth = Integer.parseInt(mString);
} else if (localName.equalsIgnoreCase("description")) {
if (isPlacemark) {
String description = cleanup(mString);
if (!isRoute)
mRoad.mPoints[mRoad.mPoints.length - 1].mDescription = description;
else
mRoad.mDescription = description;
}
} else if (localName.equalsIgnoreCase("href")) {
if (isItemIcon) {
mRoad.mPoints[mRoad.mPoints.length - 1].mIconUrl = mString;
}
} else if (localName.equalsIgnoreCase("coordinates")) {
if (isPlacemark) {
if (!isRoute) {
String[] xyParsed = split(mString, ",");
double lon = Double.parseDouble(xyParsed[0]);
double lat = Double.parseDouble(xyParsed[1]);
mRoad.mPoints[mRoad.mPoints.length - 1].mLatitude = lat;
mRoad.mPoints[mRoad.mPoints.length - 1].mLongitude = lon;
} else {
String[] coodrinatesParsed = split(mString, " ");
int count = 0;
if(mRoad.mRoute.length &lt; 2)
mRoad.mRoute = new double[coodrinatesParsed.length][2];
else {
double[][] mRouteTmp = mRoad.mRoute;
mRoad.mRoute = new double[mRouteTmp.length + coodrinatesParsed.length][2];
//for (int i = 0; i &lt; mRouteTmp.length; i++) {
//  mRoad.mRoute[i] = mRouteTmp[i];
//  mRoad.mRoute[i][i] = mRouteTmp[i][i];
//}
System.arraycopy(mRouteTmp, 0, mRoad.mRoute, 0, mRouteTmp.length);

count = mRouteTmp.length;
}

for (int i = count; i &lt; (mRoad.mRoute.length); i++) {
String[] xyParsed = split(coodrinatesParsed[i - count], ",");
for (int j = 0; j &lt; 2 &amp;&amp; j &lt; xyParsed.length; j++)
mRoad.mRoute[i][j] = Double
.parseDouble(xyParsed[j]);
}
}
}
}
}
mCurrentElement.pop();
if (localName.equalsIgnoreCase("Placemark")) {
isPlacemark = false;
if (isRoute)
isRoute = false;
} else if (localName.equalsIgnoreCase("ItemIcon")) {
if (isItemIcon)
isItemIcon = false;
}
}

private String cleanup(String value) {
String remove = "&lt;br/&gt;";
int index = value.indexOf(remove);
if (index != -1)
value = value.substring(0, index);
remove = " ";
index = value.indexOf(remove);
int len = remove.length();
while (index != -1) {
value = value.substring(0, index).concat(
value.substring(index + len, value.length()));
index = value.indexOf(remove);
}
return value;
}

public Point[] addPoint(Point[] mPoints) {
Point[] result = new Point[mPoints.length + 1];
for (int i = 0; i &lt; mPoints.length; i++)
result[i] = mPoints[i];
result[mPoints.length] = new Point();
return result;
}

private static String[] split(String strString, String strDelimiter) {
String[] strArray;
int iOccurrences = 0;
int iIndexOfInnerString = 0;
int iIndexOfDelimiter = 0;
int iCounter = 0;
if (strString == null) {
throw new IllegalArgumentException("Input string cannot be null.");
}
if (strDelimiter.length() &lt;= 0 || strDelimiter == null) {
throw new IllegalArgumentException(
"Delimeter cannot be null or empty.");
}
if (strString.startsWith(strDelimiter)) {
strString = strString.substring(strDelimiter.length());
}
if (!strString.endsWith(strDelimiter)) {
strString += strDelimiter;
}
while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
iIndexOfInnerString)) != -1) {
iOccurrences += 1;
iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
}

strArray = new String[iOccurrences];
iIndexOfInnerString = 0;
iIndexOfDelimiter = 0;
while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
iIndexOfInnerString)) != -1) {
strArray[iCounter] = strString.substring(iIndexOfInnerString,
iIndexOfDelimiter);
iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
iCounter += 1;
}

return strArray;
}
} 
```

MyItemizedOverlay.java：

```
package tvarwebu.projects.map;

import java.util.ArrayList;
import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class MyItemizedOverlay extends ItemizedOverlay&lt;OverlayItem&gt; {
private ArrayList&lt;OverlayItem&gt; mOverlays = new ArrayList&lt;OverlayItem&gt;();
private Context mContext;

public MyItemizedOverlay(Drawable defaultMarker, Context context) {
super(boundCenterBottom(defaultMarker));
mContext = context;
}

public void addOverlay(OverlayItem overlay) {
mOverlays.add(overlay);
populate();
}

@Override
protected OverlayItem createItem(int i) {
return mOverlays.get(i);
}

@Override
public int size() {
return mOverlays.size();
}

public void removeLast(){
mOverlays.remove(mOverlays.size()-1);
}

@Override
protected boolean onTap(int index) {
OverlayItem item = mOverlays.get(index);
AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
dialog.setTitle(item.getTitle());
dialog.setMessage(item.getSnippet());
dialog.show();
return true;
}
} 
```

希望这篇文章能帮助你解决这个问题 :) 查看 MapView 上绘制路线的完整源代码。

# silverlight - 如何在datagrid中打开组合框

> ID：13066096
> 
> 赞同：0
> 
> 时间：2012-10-25T09:59:52.873
> 
> 标签：silverlight, datagrid, combobox

我对 Silverlight 应用程序非常陌生。我最近一天一直在尝试这个，但我还是做不到。就我而言，它需要单击三下才能打开组合框。

我的 XAML 代码：

```
<sdk:DataGridTemplateColumn Header="Category" Width="100">
    <sdk:DataGridTemplateColumn.CellTemplate>
        <DataTemplate> 
            <ComboBox Name="cmbCategory"
                IsDropDownOpen="True" 
                ItemsSource="{Binding Source={StaticResource MyViewModel},Mode=OneWay,Path=pcProjTypeTaskCtry}" 
                DisplayMemberPath="TaskCtgyName" SelectedValuePath="TaskCtgy_FK" 
                SelectedValue="{Binding piTaskCtgy_FKField,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ToolTipService.ToolTip="{Binding psTaskCtgyNameField,UpdateSourceTrigger=PropertyChanged}"/> 
        </DataTemplate>

    </sdk:DataGridTemplateColumn.CellTemplate> 
</sdk:DataGridTemplateColumn>
<sdk:DataGridTemplateColumn Header="SubCategory" Width="110">
    <sdk:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Name="tbSubCategory" Text="{Binding Path=psTaskSubCtgyNameField,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ToolTipService.ToolTip="{Binding psTaskSubCtgyNameField}" >
            </TextBlock>
        </DataTemplate> 
    </sdk:DataGridTemplateColumn.CellTemplate>
    <sdk:DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <ComboBox ItemsSource="{Binding Source={StaticResource MyViewModel},Mode=TwoWay,Path=pcTaskSubCtry}" 
                DisplayMemberPath="TaskSubCtgyName" SelectedValuePath="TaskSubCtgyName" 
                SelectedItem="{Binding Source={StaticResource MyViewModel},Path=SelectedSubTask,Mode=TwoWay}" 
                SelectedValue="{Binding psTaskSubCtgyNameField,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                ToolTipService.ToolTip="{Binding psTaskSubCtgyNameField}"> 
            </ComboBox>
        </DataTemplate>
    </sdk:DataGridTemplateColumn.CellEditingTemplate>
</sdk:DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:41:01.253

将 Dropdownopened 事件添加到组合框，然后将数据源分配给后端的组合框。

```
 var obj = (ComboBox)sender;
        obj.ItemsSource = Your list;
        obj.DisplayMemberPath = "pcTaskSubCtry"; 
```

在选择更改事件中，您可以通过投射所选项目来分配所选项目，如下所示。

```
 ComboBox cmbbox = (ComboBox)sender;
        if (cmbbox.SelectedValue != null)
        {
            Yourobject obj = new Yourobject() ;
            obj = MainDataGrid.SelectedItem as Yourobje;
            obj.pcTaskSubCtry= Yourobje.pcTaskSubCtry;
        } 
```

# eclipse - 应用补丁来修复 Eclipse 中的错误？

> ID：13066098
> 
> 赞同：8
> 
> 时间：2012-10-25T09:59:58.293
> 
> 标签：eclipse, ide

我在 Eclipse 中有一个错误。单步执行代码时，当它转到另一个类时，编辑器失去焦点，我必须再次单击编辑器才能继续使用键盘快捷键进行调试。

我发现这个[线程](https://bugs.eclipse.org/bugs/show_bug.cgi?id=372941)描述了这个错误，以及一个修复它的补丁。有什么方法可以应用补丁吗？我猜它涉及拥有源代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T10:15:05.497

是的，您需要重新编译模块并安装它。如今，使用 git SCM 以及使用 Maven 项目布局和 tycho 插件可以很容易地重建模块（与几年前相比）。

现在让我们看看：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=372941](https://bugs.eclipse.org/bugs/show_bug.cgi?id=372941)

补丁：

bundles/org.eclipse.e4.ui.workbench.renderers.swt/src/org/eclipse/e4/ui/workbench/renderers/swt/StackRenderer.java

我们在 google 上搜索“git org.eclipse.e4.ui.workbench.renderers.swt”，最终得到以下 URL：

[https://git.eclipse.org/c/platform/eclipse.platform.ui.git/](https://git.eclipse.org/c/platform/eclipse.platform.ui.git/)

这可用于签出要构建的 1 个模块。

默认情况下，Git 可用于许多 linux 发行版，谷歌你 ditro 名称和“安装 git”术语以获得最佳帮助。在 Windows 上有[https://code.google.com/p/msysgit/](https://code.google.com/p/msysgit/)在 MacOSX 上有[https://code.google.com/p/git-osx-installer/](https://code.google.com/p/git-osx-installer/)所有这些都提供了一个命令行环境来使用混帐。您可以查看 Eclipse 本身的 EGit/JGit 插件来完成这项工作。但是下面的说明是针对命令行方法的。

```
git clone https://git.eclipse.org/c/platform/eclipse.platform.ui.git 
```

现在您需要找到您正在使用的版本的标记版本。因此，您需要在 Eclipse 安装的 eclipse/plugins/** 文件夹中找到它。版本号可能在文件名中，也可能在 MANIFEST.MF 或其他 *.xml 文件中，版本号通常指示源日期和/或版本号。

浏览上面的 eclipse.org 网站链接以查找 GIT 树可能会有所帮助。这是为了获取标签或版本名称/提交 ID（如 'abc1234'：

```
# List tags (might see it in the list)
git tag -l
# Look through history, maybe you can work on the date
git log
# Finally once you know the version you want 
# checkout the exact version that goes with your eclipse install
git checkout -b mylocalbranch <tag_or_version> 
```

现在您可以使用 Maven 来构建它。

```
cd eclipse.platform.ui.git
mvn package
# The full-monty would be: mvn deploy  (or 'mvn install')
# But I am not sure if unit and integration tests will work this easily, using
# the 'mvn package' it enough to get you the JAR you need to install in Eclipse. 
```

现在您可以*在 build/* * 子目录中查找 .jar，您可以关闭 eclipse 并将此 JAR 放入 plugins 文件夹中，确保版本号较新。

如果有效，请更新错误报告。说它对你有用。

还可以考虑尝试通过 github 帐户推送它作为新的更改，归功于原作者。

..

免责声明：以上是关于如何实现你想要的东西的主要内容。完成可能需要不到 5 分钟的时间。但可能会有并发症，您需要独立研究这些（如果有的话）。

您也可以使用 Eclipse 本身、“git checkout”和“构建 Eclispe 插件模块”来完成上述大部分工作，尽管对我来说，这个更改可能需要更长的时间，可能需要 15 分钟（如果没有并发症的话）。

# c# - C# 使用 Linq 进行全文搜索

> ID：13066107
> 
> 赞同：1
> 
> 时间：2012-10-25T10:00:27.460
> 
> 标签：c#, .net, linq

我想在我的 win forms 应用程序中进行全文搜索。

```
public static IEnumerable<DataRow> GetPartDataForFullTextSearch(string text1)
{
    using (cEntity context = new cEntity())
    {
        var query = (
            from i in context.tblparts
            join s in context.tblpartstatus on i.partstatus
            equals s.id
            join l in context.tblwarehouse on i.partId
            equals l.partId
            join p in context.tblwarehouseplace on l.warehouseId
            equals p.WhId
            orderby i.partID
            select new Part
            {
                PartNumber = i.partID,
                PartName = i.partName,
                OldPartNo = i.partIdOld,
                Comment = i.comment,
                Hbv = (long)i.HBVNr,
                Status = (int)i.partstatus,
                Building = p.building,
                Room = p.room,
                Shelf = p.shelf,
                CaseOfPart = p.case
            }).Distinct() as IEnumerable<DataRow>;

        var results = 
            from matchingItem in query
            where Regex.IsMatch(matchingItem.Field<string>("partName"), text1)
            select matchingItem;

        var list = results.ToList();

        return list;
    }
} 
```

但我没有收到结果 => ArgumentNullException

这就是我希望收到结果的方式

```
 private void tbOverviewFullSearch_TextChanged(object sender, EventArgs e)
{
    dgPartOverview.DataSource = 
        DatabaseQueries.D_PartManagement
            .GetPartDataForFullTextSearch(tbOverviewFullSearch.Text);
} 
```

怎么了？是否可以过滤多个字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:12:02.173

您不能投射`IQueryable<Part>`to `IEnumerable<DataRow>`。移除演员表并做

```
Regex.IsMatch(matchingItem.partName), text1) 
```

# linq - 将数据表中的多行转换为单行

> ID：13066108
> 
> 赞同：2
> 
> 时间：2012-10-25T10:00:27.960
> 
> 标签：linq, datatable

我在 C# 中有一个包含两列的 DataTable

```
State    Region
A        1
A        2
B        3
B        4 
```

我想要实现的是

```
State    Region
A        1,2
B        3,4 
```

这在 C# 中是否可以使用单个 LINQ 查询？

我不擅长 LINQ，也不想循环遍历表来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:08:49.553

```
var result = dataTable.AsEnumerable()
            .GroupBy(row => row.Field<string>("State"))
            .Select(g =>
                {
                    var row = dataTable.NewRow();
                    row.ItemArray = new object[]
                    {
                        g.Key, 
                        string.Join(",", 
                                  g.Select(r => r.Field<string>("Region")))
                    };

                    return row;
                }).CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:04:56.093

使用 GroupBy 来实现这一点，如下所示....

```
var groupedData = from b in dataTable.AsEnumerable()
                  group b by b.Field<string>("State") into g
                  select new
                  {
                      State = g.Key,
                      Regions = g,                      
                  }; 
```

然后您可以遍历每个组以获取数据...

```
foreach (var g in groupedData) 
        {                
            foreach (var w in g.Regions) 
            { 
                Console.WriteLine(w); 
            } 
        } 
```

# jquery - jQuery - 使用父母 ID 按班级选择孩子

> ID：13066110
> 
> 赞同：9
> 
> 时间：2012-10-25T10:00:36.493
> 
> 标签：jquery, jquery-selectors

我正在使用[MCustomScrollBar](http://manos.malihu.gr/jquery-custom-content-scroller)，但页面上有多个滚动条实例。我需要能够分别将元素动态`.mCSB_container`附加`<li>`到每个滚动条。

[这](https://stackoverflow.com/questions/12779312/how-do-i-dynamically-find-out-what-the-id-or-class-of-a-div)本质上是同一个问题，但接受的答案不起作用，因为它试图使用 id 获取 id `attr`，而类没有 id。

```
<div id="titles" class="scroll-box" style="opacity: 1;">

    <h2>Latest Titles</h2>
    <ul class="scroll-horizontal mCustomScrollbar _mCS_1">
        <div class="mCustomScrollBox mCSB_horizontal" id="mCSB_1" style="position:relative; height:100%; overflow:hidden; max-width:100%;">
            <div class="mCSB_container" style="position: relative; left: 0px; width: 2860px;">
                <li class="product-car"> My Car</li>
                <li class="product-bike"> My Bike </li>
                <li class="product-tree"> My Tree </li>
            </div>
        </div> 
    </ul>

</div>

<div id="titles" class="scroll-box" style="opacity: 1;">

    <h2>Latest Houses</h2>
    <ul class="scroll-horizontal mCustomScrollbar _mCS_2">
        <div class="mCustomScrollBox mCSB_horizontal" id="mCSB_2" style="position:relative; height:100%; overflow:hidden; max-width:100%;">
            <div class="mCSB_container" style="position: relative; left: 0px; width: 2860px;">
                <li class="product-house"> My House</li>
                <li class="product-boat"> My Boat </li>
                <li class="product-tree"> My Tree </li>
            </div>
        </div> 
    </ul>

</div> 
```

所以我尝试过使用[jQuery children](http://api.jquery.com/children/)，但无济于事。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T10:06:19.147

要附加到您的第一个滚动条，请通过 id 找到它`#mCSB_1`并使用[子选择器](http://api.jquery.com/child-selector/) `>`来访问您想要的容器，如下所示：

```
$('#mCSB_1 > .mCSB_container').append('<li class="product-tree"> New LI </li>'); 
```

并为您的第二个滚动条做同样的事情，但对于 id `#mCSB_2`：

```
$('#mCSB_2 > .mCSB_container').append('<li class="product-tree"> New LI </li>'); 
```

# c# - 计时器经过资源全球化

> ID：13066113
> 
> 赞同：3
> 
> 时间：2012-10-25T10:00:44.033
> 
> 标签：c#, .net, c#-4.0, timer, globalization

我有一个带有数据网格和计时器的表单。我创建了一个资源 CalculationSheet 并在 DUTCH - UK（默认）- DUTCH 中翻译

我用荷兰语启动应用程序。当我选择一条新记录时，会弹出一个消息框。它显示正确的语言，荷兰语。我也设置了计时器。

当计时器过去并再次显示消息框时，资源将以默认语言显示。

这是应用程序的主要入口点：

```
/// <summary>
/// The main entry point for the application.
/// </summary>
[STAThread]
static void Main()
{
    System.Threading.Thread.CurrentThread.CurrentUICulture = 
        new System.Globalization.CultureInfo("nl", true);

    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form1());
} 
```

这是回调代码：

```
void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    // shows in UK
    MessageBox.Show(Properties.Resources.CalculationSheet);
}

private void Form1_Load(object sender, EventArgs e)
{
    List<CalculationSheet> calculationSheets = new List<CalculationSheet>();

    calculationSheets.Add(new CalculationSheet("a"));
    calculationSheets.Add(new CalculationSheet("b"));
    calculationSheets.Add(new CalculationSheet("c"));

    this.dataGridView1.DataSource = calculationSheets;

    this.m_Timer = new System.Timers.Timer();
    this.m_Timer.Enabled = false;
    this.m_Timer.Interval = 5000;
    this.m_Timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);

    this.dataGridView1.SelectionChanged += new System.EventHandler(this.dataGridView1_SelectionChanged);
}

private void dataGridView1_SelectionChanged(object sender, EventArgs e)
{
    // shows in DUTCH
    MessageBox.Show(Properties.Resources.CalculationSheet);
    this.m_Timer.Enabled = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:41:54.483

[`System.Timers.Timer`类](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)的回调在单独的线程上执行回调。

手动设置[`Application.CurrentCulture`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.currentculture.aspx)（或[`Thread.CurrentUICulture`属性](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentuiculture.aspx)）时，它不会流向[`CultureInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)创建的其他线程（`CultureInfo`不会[`ExecutionContext`](http://msdn.microsoft.com/en-us/library/system.threading.executioncontext.aspx)跨线程流动），这就是您看到这个的原因；回调在另一个线程上执行并且`CultureInfo`未设置。

这个测试用例表明`CultureInfo.CurrentCulture`没有流向其他线程（因此不在 的回调中`Timer`）：

```
[TestMethod]
public void TestApplicationCurrentCultureInOtherThreads()
{
    // Create the timer.
    using (var t = new System.Timers.Timer(1000))
    {
        // The task completion source.
        var tcs = new TaskCompletionSource<object>();

        // Captured name.
        CultureInfo capturedCulture = null;

        // Set the current culture.
        // The default for the system needs to be something other
        // than "en-GB", mine is "en-US", which is why this
        // test passes.
        Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-GB");

        // Copy t.
        var tCopy = t;

        // Event handler.
        t.Elapsed += (s, e) => {
            // Stop the timer.
            tCopy.Stop();

            // What's the captured name.
            capturedCulture = CultureInfo.CurrentCulture;

            // Complete the task.
            tcs.SetResult(null);
        };

        // Start.
        t.Start();

        // Wait.
        tcs.Task.Wait();

        // Compare.
        Assert.AreNotEqual(Thread.CurrentThread.CurrentUICulture, 
            capturedCulture);
    }
} 
```

您的回调在显示该方法时没有失败的原因`MessageBox.Show`是它不需要消息循环（它提供自己的一个）并且可以从任何线程安全地调用。

如果可能，我`CultureInfo`会将您需要的内容存储在应用程序的一个位置，然后将其传递给其他线程上需要它的任何方法（例如 方法[`String.Format`](http://msdn.microsoft.com/en-us/library/1ksz8yb7.aspx)）。

如果不可能，则必须`Application.CurrentCulture`在每个需要它的线程上进行设置。但是要小心，如果在计时器回调线程上执行此操作，这些线程来自线程池，因此您永远不会知道线程池线程上的当前文化是什么（因为它没有被重置）。

也就是说，如果你在这些回调中做 UI 工作，那么你真的应该`CultureInfo`通过调用类上的[`Post`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx)or[`Send`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.send.aspx)方法将调用编组回 UI 线程（设置的地方） [`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)（你可以存储来自在 UI 线程上调用的[`Current`属性以从其他线程调用）。](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)

您的`Form1_Load`方法将存储`SynchronizationContext`（在创建表单时设置）：

```
private SynchronizationContext _synchronizationContext;

private void Form1_Load(object sender, EventArgs e)
{
    // Capture the context.
    _synchronizationContext = SynchronizationContext.Current;

    // Rest of code.
    ...
} 
```

然后您的`timer_Elapsed`回调将如下所示：

```
void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    // Marshal back to the UI thread.
    _synchronizationContext.Send(s => {
        // Will now show in Dutch, as this call is taking place
        // on the UI thread.
        MessageBox.Show(Properties.Resources.CalculationSheet);
    }, null);    
} 
```

# android - 总是使用 v4 Fragments 而不是内置的 android.app.Fragment？

> ID：13066118
> 
> 赞同：13
> 
> 时间：2012-10-25T10:01:04.390
> 
> 标签：android, android-fragments

我遇到了[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)和相关的[FragmentPagerAdaptor](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)，它们不是常规 Android 包的一部分，但仅在 V4 支持包中可用。看来我不能将 FragmentPagerAdaptor 与 android.app.Fragment 一起使用，因为 FragmentPagerAdaptor 需要 v4 FragmentManager 来实例化。阅读[Activity 和 FragmentActivity 之间的差异](https://stackoverflow.com/questions/10477997/difference-between-activity-and-fragmentactivity)这似乎是一致的 - 使用 v4 Fragments 和相关类或常规 android.app.Fragments。永远不要混合。

更进一步，我认为根本不需要使用常规的 android.app.Fragments，因为它们不如 v4 支持包强大。（引用另一个问题：[Android 支持包不仅适用于较新 API 的反向移植。它也适用于其他类，无论出于何种原因，未添加到 SDK 中，例如 ViewPager 及其支持类。](https://stackoverflow.com/questions/9958013/does-the-android-ics-api-have-a-native-equivalent-to-viewpager-support-lib)）。我能想到的“唯一”缺点是 v4 支持库与 APK 捆绑在一起，这意味着我的应用程序将占用更多空间。

我是否正确得出结论，我应该始终使用 v4 支持库来支持片段，因为它们包含更多功能？（而且它们是向后兼容的，不要忘记。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T14:40:22.693

我刚刚意识到可以一起使用`android.app.Fragment`and `android.support.v4.view.ViewPager`......如果你使用`android.support.v13.app.FragmentPagerAdapter.`.. 所以看来**v13**支持包解决/改进了 android.app.Fragment 和`android.support.v4.view.ViewPager`. 真是一团糟。

虽然这解决了我提出的特定示例，但我仍然想知道最好的选择是否总是在可用时使用**v4**类而不是内置类（例如 android.app.Fragment），即使我只是担心关于 ICS 和更新的设备？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:03:40.167

在向后兼容性方面，确实使用 v4 支持包版本是最好的方法。

随着设备转向具有内置功能的操作系统，使用 SDK 版本可能会变得更容易，因为支持包中的所有功能都将包含在 SDK 中。

目前，坚持使用 v4 为 2.2/2.3 设备提供支持，这些设备仍然占据 Android 设备市场的很大份额

# c++ - 模板初始化构造函数错误

> ID：13066124
> 
> 赞同：0
> 
> 时间：2012-10-25T10:01:18.567
> 
> 标签：c++, templates, constructor

嘿，我无法弄清楚如何让我的模板标题正常工作。我必须让我的 init 构造函数接收一个数组并将其反转。因此，例如，如果我有 [1,2,3,4] 它会将其放入 [4,3,2,1]

这是我的模板类：

```
#pragma once
#include <iostream>

using namespace std;

template<typename DATA_TYPE>
class Reverser
{
private:
    // Not sure to make this DATA_TYPE* or just DATA_TYPE
    DATA_TYPE Data;
public:
     // Init constructor
     Reverser(const DATA_TYPE& input, const int & size)
    {
        // This is where I'm getting my error saying it's a conversion error (int* = int), not sure
        // What to make Data then in the private section. 
        Data = new DATA_TYPE[size];
        for(int i=size-1; i>=0; i--)
            Data[(size-1)-i] = input[i];
    }

    DATA_TYPE GetReverse(){
        return Data;
    }

    ~Reverser(){
        delete[] Data;
    } 
```

};

所以是的，如果你能告诉我我做错了什么，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:05:02.657

那是因为当您将数组传递给函数时，它会转换为指针。您必须使用 DATA_TYPE 作为指针：

```
template<typename DATA_TYPE>
class Reverser
{
private:
    // Not sure to make this DATA_TYPE* or just DATA_TYPE
    DATA_TYPE* Data; //pointer
public:
     // Init constructor
     Reverser(const DATA_TYPE* input, const int & size) //pointer
    {
        // This is where I'm getting my error saying it's a conversion error (int* = int), not sure
        // What to make Data then in the private section. 
        Data = new DATA_TYPE[size];
        for(int i=size-1; i>=0; i--)
            Data[(size-1)-i] = input[i];
    }

    DATA_TYPE* GetReverse(){ //Returns Pointer
        return Data;
    }

    ~Reverser(){
        delete[] Data;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:05:24.947

在我看来，您正在声明此类的一个实例`int`，例如

```
Reverser<int> myVar; 
```

然后该`Data`成员将是 type `int`。然后，在构造函数中，您尝试分配内存（`new`返回 a `int*`）并将其分配给`Data`成员，但您不能将指针分配给非指针。

因此，正如您在评论中所写，它应该是

```
DATA_TYPE* Data; 
```

# php - PHP如何使用localhost用户和特定的绑定地址连接到mysql

> ID：13066138
> 
> 赞同：1
> 
> 时间：2012-10-25T10:02:05.430
> 
> 标签：php, mysql

我的 Apache 和 mysql 服务器安装在同一个 linux 服务器上。在我的 mysql 配置文件`/etc/mysql/my.cnf`中，我有这一行：

```
bind-address = 192.168.0.12 
```

在我的 mysql 数据库中，我有一个`db_user`只能从`localhost`

```
User     Server      Password   Global privileges  "Grant"
db_user  localhost   Yes        USAGE              No 
```

我不明白的是：如果将mysql配置为仅绑定192.168.0.12，php如何连接到带有db_user和localhost域的mysql表？

我检查了主机文件，本地主机发送到 127.0.0.1 而不是 192.168.0.12。

另一件事，服务器上的这个命令有效：

> mysql -udb_user -p“密码”数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:07:18.773

您应该更改路由以使您的服务器连接到`192.168.0.12`而不是`127.0.0.1`. 它知道这`192.168.0.12`是本地主机，因此使用`127.0.0.1`而不是`192.168.0.12`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:13:47.413

如果您指定`localhost`要连接的主机，[MySQL 将使用套接字](https://serverfault.com/a/337844)，而不是 TCP 连接。

# c# - 在 asp.net mvc3 中发送 SOAP 请求

> ID：13066140
> 
> 赞同：1
> 
> 时间：2012-10-25T10:02:08.380
> 
> 标签：c#, .net, asp.net-mvc-3, soap

我想发送以下 SOAP/XML 请求并在 asp.net mvc/C# 中获取 SOAP 响应

```
<?xml
<soapenv:Envelope
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:urn="urn:myurn">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:fLocHistory 
soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <HistRequest 
xsi:type="urn:SubMemLocationHistoryRequest">
            <MSID xsi:type="xsd:string">test</MSID>
            <AID xsi:type="xsd:int">2</AID>
            <MemMSISDN xsi:type="xsd:string">test</MemMSISDN>

         </HistRequest>
      </urn:fLocHistory>
   </soapenv:Body>
</soapenv:Envelope> 
```

发送请求的更好方法是什么。我看过关于`MSXML2`,`WCF`或的例子`asmx`。如果你能指出一些好的入门教程。我[在这里](http://msdn.microsoft.com/en-us/library/ms972326.aspx)、[这里](http://www.asp.net/web-forms/videos/building-35-applications/an-introduction-to-soap-based-web-services-with-visual-web-developer-2008)和[这里](https://stackoverflow.com/questions/885883/soap-using-c-sharp)看到了一些例子。

# sql - sql - 如何从不同级别的连接中选择两个不同的计数？

> ID：13066141
> 
> 赞同：0
> 
> 时间：2012-10-25T10:02:12.077
> 
> 标签：sql, sql-server

我不确定标题是否适合我的问题，我最好举个例子。

我有三个表：`Publication`, `Journal`, `Published`。他们的栏目如下：

```
 **Publication table**

       pub_id,     journal_id

    **Journal table**

       journal_id,   article_id

    **Published table**

       article_id 
```

所以如果我这样做

```
 select pub.pub_id, count(j.article_id) 

    from publication pub

    inner join journal j on pub.journal_id=j.journal_id

    group by pub.pub_id 
```

我得到了`total number of articles`需要为每个期刊发表的期刊`pub_id`，对吗？

如果我做

```
 select pub.pub_id, count(p.article_id) 

    from publication pub

    inner join journal j on pub.journal_id=j.journal_id

    inner join published p on j.article_id=p.article_id

    group by pub.pub_id 
```

我得到了`total number of published articles`需要为每个期刊发表的期刊`pub_id`，对吗？

所以通过以上两个查询，我可以得到`the number of articles that need to be published`and `the number of articles that have been published`。

我的问题是如何编写一个查询来同时获取这两个数字？

我需要在同一张表中显示这两个数字。

PS：我正在使用 Microsoft SQL Server

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:06:28.943

`count(distinct ...)`尽管通过添加`join`. 这使您可以`left join`上桌`published`：

```
select pub.pub_id, count(distinct j.journal_id), count(p.article_id)
from publication pub
inner join journal j on pub.journal_id=j.journal_id
left join published p on j.article_id=p.article_id
group by pub.pub_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:03:59.720

尝试

```
select pub.pub_id, count(p.article_id), count(distinct j.article_id) 
from publication pub
inner join journal j on pub.journal_id=j.journal_id
left join published p on j.article_id=p.article_id
group by pub.pub_id 
```

# string - 如果存在查询字符串变量，则 htaccess 重定向

> ID：13066142
> 
> 赞同：2
> 
> 时间：2012-10-25T10:02:13.893
> 
> 标签：string, .htaccess, redirect, append

仅当url`style=2`不包含`style=2`.

在目录根目录中，我有一个 .htaccess，其中包含以下内容：

```
RewriteCond %{QUERY_STRING} !(?style=|&style=)
RewriteRule ^(.*)$ %1&style=2? [R=301,QSA] 
```

我知道这是错的。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:07:29.020

将您的代码更改为此以使其工作：

```
RewriteCond %{QUERY_STRING} !(^|&)style=2(&|$) [NC]
RewriteRule ^ %{REQUEST_URI}?style=2 [R=301,L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:32:30.537

试试这个 ：

```
RewriteCond %{QUERY_STRING} !^(.*&)?style=
RewriteRule ^(.*)$ /$1?style=2 [L,QSA,R=301] 
```

# java - Android 应用程序在模拟器中崩溃

> ID：13066152
> 
> 赞同：-2
> 
> 时间：2012-10-25T10:02:50.370
> 
> 标签：java, android, nullpointerexception

我是一名新手 android 应用程序开发人员。我写了一个从网上获取圣经读物的应用程序。我编写了单独的 Java 类来获取读数，并对其进行了测试，它工作正常。但是当我尝试在我的 Android 应用程序中使用它时，我的应用程序崩溃并停止工作。我从日志中了解到它抛出了一个空指针异常，但我不知道如何解决这个问题。我还检查了互联网，但找不到确切的解决方案。我在下面附上了与​​我的应用程序相关的日志和文件。任何人都可以通过我的代码并解决错误。我代表我感谢您的宝贵时间，并在此先感谢您。

```
10-25 09:49:23.243: E/AndroidRuntime(620): FATAL EXCEPTION: main
10-25 09:49:23.243: E/AndroidRuntime(620): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mgocsm/com.mgocsm.EveningKymthaPrayers}: java.lang.NullPointerException: println needs a message
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.os.Looper.loop(Looper.java:137)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-25 09:49:23.243: E/AndroidRuntime(620):  at java.lang.reflect.Method.invokeNative(Native Method)
10-25 09:49:23.243: E/AndroidRuntime(620):  at java.lang.reflect.Method.invoke(Method.java:511)
10-25 09:49:23.243: E/AndroidRuntime(620):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-25 09:49:23.243: E/AndroidRuntime(620):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-25 09:49:23.243: E/AndroidRuntime(620):  at dalvik.system.NativeStart.main(Native Method)
10-25 09:49:23.243: E/AndroidRuntime(620): Caused by: java.lang.NullPointerException: println needs a message
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.util.Log.println_native(Native Method)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.util.Log.d(Log.java:138)
10-25 09:49:23.243: E/AndroidRuntime(620):  at com.mgocsm.BibleReader.getVerses(BibleReader.java:44)
10-25 09:49:23.243: E/AndroidRuntime(620):  at com.mgocsm.EveningKymthaPrayers.onCreate(EveningKymthaPrayers.java:25)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.app.Activity.performCreate(Activity.java:5008)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-25 09:49:23.243: E/AndroidRuntime(620):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-25 09:49:23.243: E/AndroidRuntime(620):  ... 11 more

EveningKymthaPrayers.java (Activitiy from where I call the Java class to fetch readings)
========================= 
```

.

```
public class EveningKymthaPrayers extends Activity {
    AssetManager am;
    FileReader f;
    TextView kymtha_prayer;
    BibleReader bible;
    //ReadingList rl = new ReadingList();
    @Override   
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.evening_kymtha);        
        am = getAssets();
        f = new FileReader(am,"kymtha.txt");               
        kymtha_prayer = (TextView) findViewById(R.id.show_kymtha);    
        kymtha_prayer.setMovementMethod(new ScrollingMovementMethod());
        bible = new BibleReader("John 3:16-17");
        kymtha_prayer.setText(bible.getVerses());        
        //kymtha_prayer.setText(f.readFile());
        //kymtha_prayer.setText(setText);                          
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

**BibleReader.java**（用于获取圣经经文的 Java 类）

```
public class BibleReader {
    public static final String  URL="http://labs.bible.org/api/?passage=";
    String verse;   
    String logName = "BibleReader";
    String line;
    StringBuilder recText;
    private static final int BUFFER_SIZE = 1024 * 10;    
    private final byte[] dataBuffer = new byte[BUFFER_SIZE];

    public BibleReader(String verse) {
        // TODO Auto-generated constructor stub
        this.verse = verse; 
        this.verse = this.verse.toString().replaceAll(" ", "%20");      
    }

    public String getVerses() 
    {
        String body = null;
        try{        
            URL url = new URL(URL+this.verse);
            URLConnection con = url.openConnection();
            InputStream in = con.getInputStream();
            String encoding = con.getContentEncoding();
            encoding = encoding == null ? "UTF-8" : encoding;
            ByteArrayOutputStream baos = new ByteArrayOutputStream();   
            int len = 0;
            while ((len = in.read(dataBuffer)) != -1) {
                baos.write(dataBuffer, 0, len);
            }   
            body = new String(baos.toByteArray(), encoding);
            Log.d(logName, "Fetched Verse"+body);
        }
        catch(Exception e){
            Log.d(logName, e.getMessage());
        }               
        return body.toString();     
    }

} 
```

**AndroidMainfest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mgocsm"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".DailyPrayers" android:label="@string/app_name"></activity>        
        <activity android:name=".EveningPrayers" android:label="@string/app_name"></activity>
        <activity android:name=".EveningKymthaPrayers" android:label="@string/app_name"></activity> 
    </application>  
</manifest> 
```

**MainActivity.java**

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void onClick(View v){
        switch(v.getId()){
        case R.id.daily_prayers:
            startActivity(new Intent(getApplicationContext(),DailyPrayers.class));
            break;
        }

    }

} 
```

**DailyPrayers.java**

```
public class DailyPrayers extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.daily_prayers);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    public void onClick(View v){
        switch(v.getId()){
        case R.id.home:
            startActivity(new Intent(getApplicationContext(),MainActivity.class));
            break;
        case R.id.evening_prayers:
            startActivity(new Intent(getApplicationContext(),EveningPrayers.class));
            break;
        }
    }
} 
```

**晚祷.java**

```
public class EveningPrayers extends Activity {

    @Override   
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.evening_prayers);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void onClick(View v){
        switch(v.getId()){
        case R.id.kymtha_evening:
            startActivity(new Intent(getApplicationContext(),EveningKymthaPrayers.class));          
            break;
        case R.id.sleeba_evening:
            break;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:09:56.713

您尝试打印的正文作为值得到空值。首先检查您是否收到正文中的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:07:35.513

你在这个地方记录什么：`com.mgocsm.BibleReader.getVerses(BibleReader.java:44)` ？您可能正在传递一个空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:09:44.610

在您的清单中添加此权限

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>

 body = new String(baos.toByteArray(), encoding);
            Log.d(logName, "Fetched Verse"+body); 
```

您的 Body 正在获取 null 值，这就是您的日志给出 nullpointer 异常的原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:10:17.573

我在您的代码中注意到的内容：

*   `bible.getVerses()`正在返回**null**
*   AndroidManifest.xml 文件中似乎不包含**INTERNET权限**

`<uses-permission android:name="android.permission.INTERNET"></uses-permission>`

*   不要在主线程上进行网络调用。相反，您可以使用`AsyncTask`或`AsyncTaskLoader`
*   而不是使用：

`this.verse = this.verse.toString().replaceAll(" ", "%20");`

您必须使用：

```
String webURL = URLEncoder.encode("your web url", "utf-8"); 
```

# linux - Linux进程和线程调度

> ID：13066156
> 
> 赞同：1
> 
> 时间：2012-10-25T10:02:55.987
> 
> 标签：linux, multithreading, process, scheduling

我正在使用 sched.h 玩 linux 调度并遇到一些问题。

据我所知，Linux 调度程序在调度时不会区别对待线程和进程。线程就像共享公共资源的进程。

好的，假设我有 Process-A，它设置为 CPU 核心 0 并且设置了 SCHED_FIFO 属性；它将一直运行，直到另一个更高优先级的任务启动。如果 Process-A 创建一个新线程，该线程会继承相同的属性吗？（即使用 SCHED_FIFO 属性绑定到 CPU 0 还是默认？）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:21:42.563

实际上，您可以使用一个简单的程序进行测试，但可以通过各种手册页进行测试：

[sched_setaffinity](http://linux.die.net/man/2/sched_setaffinity)：

> 通过 fork(2) 创建的子代继承其父代的 CPU 关联掩码。关联掩码在 execve(2) 中保留。

[pthread_create](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_create.3.html)：

> 新线程继承调用线程的功能集（请参阅功能（7））和 CPU 亲和掩码（请参阅 sched_setaffinity（2））的副本。

[sched_setscheduler](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setscheduler.2.html)：

> 子进程通过 fork(2) 继承调度策略和参数。调度策略和参数在 execve(2) 中保留。

# mongodb - 连接字符串中的“socketTimeoutMS”参数

> ID：13066164
> 
> 赞同：1
> 
> 时间：2012-10-25T10:03:38.943
> 
> 标签：mongodb

我使用的是 Mongo 服务器版本 2.0.6 而 C# 驱动程序 DLL 版本是：1.3.1.4349

我正在使用这个连接字符串：

**mongodb://abcd:27017,efgh:27017/abcd?connectTimeoutMS=30000;socketTimeoutMS=120000**

我认为，问题是标志**socketTimeoutMS**可能不会受到尊重。因为如果我将它设置为 1ms，那么我的大部分查询都应该失败，对吧？

我希望我已经正确理解了这个参数。谁能解释可能发生的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:25:16.807

套接字超时参数用于使等待读取或写入数据的套接字超时。如果您的服务器接受写入并在 1 毫秒内响应读取数据，您的查询将不会失败。此外，如果实际遵守如此低的超时时间，还取决于底层操作系统。它可能会限制它。

相关代码：

读取：[https ://github.com/mongodb/mongo-csharp-driver/blob/8e6850c91893743ebbbd53ebba84d3d4086cdecb/Driver/Internal/MongoConnection.cs#L322-L341](https://github.com/mongodb/mongo-csharp-driver/blob/8e6850c91893743ebbbd53ebba84d3d4086cdecb/Driver/Internal/MongoConnection.cs#L322-L341)

写道：[https ://github.com/mongodb/mongo-csharp-driver/blob/8e6850c91893743ebbbd53ebba84d3d4086cdecb/Driver/Internal/MongoConnection.cs#L374-L382](https://github.com/mongodb/mongo-csharp-driver/blob/8e6850c91893743ebbbd53ebba84d3d4086cdecb/Driver/Internal/MongoConnection.cs#L374-L382)

# php - Google Calendar API PHP listEvents 未检索所有事件

> ID：13066166
> 
> 赞同：3
> 
> 时间：2012-10-25T10:03:42.877
> 
> 标签：php, api, google-api, google-calendar-api

我正在尝试使用 Google_CalendarService 检索所有事件。到目前为止，我正在使用重复事件检索所有内容，但是有些事件没有出现。

示例：我在 22-okt、23-okt 和 24-okt 有活动。它们都是正常事件，但我得到的唯一事件是 22 和 23。24 没有出现，但它确实存在于我的日历中！

[更新] 发现另一个问题！每次我通过我的应用程序编辑现有事件时，该事件都会消失，但确实存在于日历中！

这是我获取数据的代码：

API 设置：

```
function calSettings(){

    $client = new Google_Client();

    $cal = new Google_CalendarService($client);

    $client->setAccessType('offline');

    if (isset($_GET['code'])) {

        $client->authenticate($_GET['code']);

        $_SESSION['token'] = $client->getAccessToken();

        header('Location: http://'.$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']);

    }

    if (isset($_SESSION['token'])) {

        $client->setAccessToken($_SESSION['token']);

        $sessionToken = json_decode($_SESSION['token']);

        $this->Cookie->write('token', $sessionToken->refresh_token, false, '1 month');
    }

    $cookie = $this->Cookie->read('token');

    if(!empty($cookie)){
        $client->refreshToken($this->Cookie->read('token'));
    }

    $serviceArr = array('client' => $client, 'service' => $cal);

    return $serviceArr;
} 
```

获取事件：

```
public function initCalendar($ownerCalendarId = null, $eventID = null){

    $serviceArr = $this->calSettings();
    $client = $serviceArr['client'];
    $cal = $serviceArr['service'];
    $wandaCalendarId = 'gmail@gmail.com';

    if ($client->getAccessToken()) {
        /************* Code entry *************/
        if($eventID != null){
            $events = $cal->events->get($ownerCalendarId, $eventID);
        }else{
            $ownerEvents = $cal->events->listEvents($ownerCalendarId);

            if($ownerCalendarId != $wandaCalendarId){
                $wandaEvents = $cal->events->listEvents($wandaCalendarId);
                $events = array('owner' => $ownerEvents, 'wanda' => $wandaEvents);
            }else{
                $events = array('owner' => $ownerEvents, 'wanda' => '');
            }
        }

        return $events;

    }else{
        /************* Not connected to google calendar code *************/
        $authUrl = $client->createAuthUrl();

        $returnArr = array('status' => 'false', 'message' => "<a class='login' href='$authUrl'>Connect Me!</a>");

        return $returnArr;
    }
} 
```

所以有了这段代码，我得到了大部分事件，为什么其他事件没有出现？以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T16:17:57.117

好的，终于知道如何获得所有事件了！

有趣的是，您确实获得了所有事件，但分批获得了 250 个事件。如果您有超过 250 个事件，您将在 JSON 响应中获得一个页面令牌。使用页面令牌获取下一批事件！

关于编辑部分？我注意到，当您编辑事件时，该事件将被抛出到事件列表的底部。因此，您获得的事件按上次编辑排序。

为了避免不需要的数据或保持简单，您可以使用 timeMin 和 timeMax 过滤事件。根据您所做的，您可以动态设置它以更改请求查询。

这是我使用页面令牌获取所需事件的版本：

```
$minCheck = date(DATE_ATOM, mktime(0, 0, 0, 1, 1, date("Y") -1));
$maxCheck = date(DATE_ATOM, mktime(0, 0, 0, 12, 31, date("Y") +1));

do{
if(isset($result['nextPageToken'])){
   $result= $cal->events->listEvents($calendarId, array('singleEvents' => 'true', 'pageToken' => $result['nextPageToken'], 'timeMin' => $minCheck, 'timeMax' => $maxCheck));
}else{
   $result= $cal->events->listEvents($calendarId, array('singleEvents' => 'true', 'timeMin' => $minCheck, 'timeMax' => $maxCheck));
}
array_push($totalResult, $result['items']);
}while(isset($result['nextPageToken']) && !empty($result['nextPageToken'])); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-28T09:50:08.553

250 个结果是默认值。通过使用可选的查询参数“maxResults”，最多可以增加 2500 个结果（请参阅[事件：列表](https://developers.google.com/google-apps/calendar/v3/reference/events/list)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-06T21:43:39.927

您可以使用`while`循环：

```
while(true) {
  foreach ($events->getItems() as $event) {
    echo $event->getSummary();
  }
  $pageToken = $events->getNextPageToken();
  if ($pageToken) {
    $optParams = array('pageToken' => $pageToken);
    $events = $service->events->listEvents('primary', $optParams);
  } else {
    break;
  }
} 
```

如果您愿意，您还可以添加 a`maxResults`并将其设置为最大值，即`2500`.

```
$optParams = array('pageToken' => $pageToken, 'maxResults' => 2500); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-25T20:54:47.140

@TheYuwana 感谢您的评论。

需要注意的一件小事，我不小心错过了：如果你有，`useBatch=>true` 那么`$cal->events->listEvents($ownerCalendarId)`将返回一个准备好执行的请求`$ownerEvents`

`batch->add($ownerEvents)`所以你需要这样做`batch->execute()`。

# c++ - 字符串文字是使用前缀 NULL (0) 创建的

> ID：13066167
> 
> 赞同：0
> 
> 时间：2012-10-25T10:03:46.033
> 
> 标签：c++, unicode, mfc, legacy

背景：

我正在处理 Web 应用程序的遗留代码，我目前正在将代码的一些 ASCII 部分转换为 UNICODE。我在记录器中遇到了以下错误。似乎字符串文字要么被创建，要么由于某种原因在此过程中被破坏。

示例以下字符串 -`"%s::%s - Started with success."`在内存中它看起来像这样。

```
2AF9BFC   25 00 73 00 3A 00 3A 00  %.s.:.:.
02AF9C04  25 00 73 00 20 00 2D 00  %.s. .-.
02AF9C0C  20 00 53 00 74 00 61 00   .S.t.a.
02AF9C14  72 00 74 00 65 00 64 00  r.t.e.d.
02AF9C1C  20 00 77 00 69 00 74 00   .w.i.t.
02AF9C24  68 00 20 00 73 00 75 00  h. .s.u.
02AF9C2C  63 00 63 00 65 00 73 00  c.c.e.s.
02AF9C34  73 00 2E 00 00 00 00 00  s.......
02AF9C3C  00 00 00 00 00 00 00 00  ........ 
```

在日志中，字符串将如下所示 -_S_t_a_r_t_e_d_ _w_i_t_h _s_u_c_c_e_s_s 此处的空格照常表示，NULL 字符由 _ 表示（_ 只是一个示例，不同的 txt 编辑器将以不同的方式显示它）。

我确实使用了 _T 宏，它将字符串替换为我[在这里](http://msdn.microsoft.com/en-us/library/c426s321%28v=vs.71%29.aspx)学到的 Unicode 。

为什么我得到字节 0 前缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:09:37.413

在 Microsoft 的术语中，“Unicode”表示[UTF-16](http://www.unicode.org/glossary/#UTF_16) ，即每个字符由一个或两个 16 位[代码单元](http://www.unicode.org/glossary/#code_unit)表示。当 ASCII 字符转换为 UTF-16 时，它将被表示为单个代码单元，其中高字节为零，低字节包含 ASCII 字符。

如果您希望日志文件以 ASCII 格式读取，则需要在写出时将文本转换为 UTF-8。否则，请确保日志文件中的所有文本都是 UTF-16 并使用理解 UTF-16 的日志文件阅读器，但请注意，如果您的大部分文本是 ASCII（因为每秒字节将为 0)。

# jquery - 寻找外部网站的cookie然后重定向

> ID：13066169
> 
> 赞同：0
> 
> 时间：2012-10-25T10:03:51.147
> 
> 标签：jquery, cookies, ning

我有一个宁网。我还有一个自定义主页，它只是一个 html/css 网站。我需要的是一个脚本来检测他们之前是否访问过我的 ning 站点并登录。如果没有，他们不会被重定向。任何想法都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:27:32.683

您无法读取来自不同域的 cookie（即 stackoverflow.com 上的页面无法读取 microsoft.com 设置的 cookie） - 这是一个非常明显的安全功能。有关更多信息，请参阅[有关 quirksmode 的这篇文章。](http://www.quirksmode.org/js/cookies.html#link5)如果您的主页使用的域与您的 ning 站点不同，那么您就不走运了。

# jquery - 如何在 Jquery-UI 自动完成中显示图像

> ID：13066171
> 
> 赞同：1
> 
> 时间：2012-10-25T10:03:57.540
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui, jquery-ui-autocomplete

我正在使用 jquery-ui 自动完成并在自动完成功能中进行 ajax 调用我正在调用返回 Json 的控制器操作，现在一切正常我想在建议下拉列表中显示图像，我也在采取json中的图像URL如何在建议下拉列表中显示图像以及名称

**JavaScript**

```
 function log(message) {
            $("<div>").text(message).prependTo("#log");
            $("#log").scrollTop(0);
        }

        $("#search").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Home/GetCompanyNames",
                    dataType: "jsonp",
                    data: "searchterm=" + request.term,
                    success: function (data) {
                        response($.map(data, function (item) {
                            alert(item.Value);
                            return {
                                label: item.Name,
                                value: item.Name
                            };
                        }));
                    }
                });
            },
            minLength: 2,
            select: function (event, ui) {
                alert(ui.item.Name);
            alert(ui.item.Value);
            alert(ui.item.LogoUrl);
            },
            open: function () {
                $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
            },
            close: function () {
                $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
            }
        });

    }); 
```

**控制器中的操作：**

```
 public JsonResult GetCompanyNames (string searchterm)
    {
        var companies = context.companyService.Query().Where(x => x.Name.Contains(searchterm)).ToList();
        var list = companies.Select(item => new SearchJsonModel
                                                {
                                                    LogoUrl = item.Logo != null || item.Logo != "" ? "<img  src='/Upload/" + item.Logo + "' />" : "<img src='/home/image?image=" + item.Name + "' />", Name = item.Name, Value = item.InternetName
                                                }).Select(model => (model)).ToList();
        return Json(list, JsonRequestBehavior.AllowGet);
    } 
```

**SearchJsonModel :**

```
 public class SearchJsonModel
{
    public string Name { get; set; }
    public string Value { get; set; }
    public string LogoUrl { get; set; }
} 
```

如果您需要更多详细信息，请询问我，并提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T10:16:17.067

[`documentation`](http://jqueryui.com/autocomplete/#custom-data)说明了如何自定义输出的示例：

```
$('#search').autocomplete({
    source: function (request, response) {
        $.ajax({
            url: '/Home/GetCompanyNames',
            data: { searchterm: request.term },
            success: function (data) {
                response($.map(data, function (item) {
                    return {
                        label: item.Name,
                        value: item.Name,
                        logoUrl: item.LogoUrl
                    };
                }));
            }
        });
    },
    minLength: 2,
    select: function (event, ui) {

    },
    open: function () {
        $(this).removeClass('ui-corner-all').addClass('ui-corner-top');
    },
    close: function () {
        $(this).removeClass('ui-corner-top').addClass('ui-corner-all');
    }
})
.data('autocomplete')._renderItem = function(ul, item) {
    return $('<li>')
        .data('item.autocomplete', item)
        .append(item.label + '<img src="' + item.logoUrl + '" alt="" />')
        .appendTo(ul);
}; 
```

# ember.js - Ember 双向值绑定到对象属性

> ID：13066173
> 
> 赞同：0
> 
> 时间：2012-10-25T10:04:05.930
> 
> 标签：ember.js, bind

我想用一个可内容编辑的 div 来实现一个非常简单的事情。让我们举这个简单的例子：

```
<script type="text/x-handlebars">
  <div contenteditable>{{MyApp.president.fullName}}</div>
</script> 
```

我希望在编辑 div 的内容时更改 MyApp.president.fullname 的值。Ember 有办法做到这一点吗？还是必须观察div内容的变化，用Ember.set设置属性？

我需要这一切来构建一个所见即所得的编辑器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:41:44.320

您应该使用`Ember.TextField`, 可以双向绑定值：

```
{{view Ember.TextField valueBinding="MyApp.president.fullName"}} 
```

使用文本字段，当您更改时`MyApp.president.fullName`将更新文本字段。当您更改文本字段的值时，它将更新`MyApp.president.fullName`。

如果您希望能够编辑任何元素，您可以这样做：

模板：

```
{{#if MyApp.isEditing}}
  {{view App.InlineTextField valueBinding="MyApp.president.name"}}
{{else}}
  {{#view App.TextView}}
    {{MyApp.president.name}}    
  {{/view}}
{{/if}} 
```

意见：

```
 App.InlineTextField = Ember.TextField.extend({
    focusOut: function() {
      MyApp.set('isEditing', false);
    }
  });

  App.TextView = Ember.View.extend({
    doubleClick: function() {
      MyApp.set('isEditing', true);
    }
  }); 
```

# microsoft-metro - 是否可以在 Metro 应用程序中使用外部 DLL

> ID：13066175
> 
> 赞同：1
> 
> 时间：2012-10-25T10:04:09.093
> 
> 标签：microsoft-metro

我是开发 Metro 应用程序的新手。我有一个关于 Metro 的外部 DLL 的问题。

据我了解，实现 DLL（扩展）的项目应该包含在 Metro 应用程序的解决方案中。我应该指定对 Package.appxmanifest 的依赖。只有在该操作之后，我才能在 Metro 应用程序中使用此扩展程序。

但是外部 DLL（扩展）呢？如何使用系统上安装的 DLL（类似于桌面的加载库）？有人可以澄清这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:03:00.877

Windows 应用商店应用程序是沙盒的，无法访问任何系统 DLL 或项目中提供的 DLL 以外的 DLL。

此外，您的项目引用的 DLL 需要是专门为 WinRT 构建的 WinRT DLL。

# java - 在 bash 和 Java 之间切换标准输入

> ID：13066176
> 
> 赞同：0
> 
> 时间：2012-10-25T10:04:13.513
> 
> 标签：java, linux, bash, stdin

我正在编写一个脚本来启动 Java 应用程序并安全地为 Java 应用程序提供密码。密码不应回显到屏幕上，并且任何列出正在运行的进程的人都不应看到该密码。以下脚本适用于此：

```
echo -n "enter password: "
read -r -s password
java -classpath $CLASSPATH com.myclientscompany.Manage<<EOF
$password
EOF 
```

...使用 Java 程序从标准输入读取密码作为一行。

我面临的问题是，在以这种方式获取密码后，我希望 Java 应用程序通过控制台以交互方式接受用户的进一步输入。就目前而言，随后在 Java 中从标准输入读取的每次尝试都会立即返回`null`.

有没有办法将标准输入切换回此脚本末尾的控制台输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:26:20.693

如果您使用的是 1.6 或更高版本，则可以[`Console.readPassword()`](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html#readPassword%28%29)从 Java 程序内部使用来输入密码。

# c++ - 自动矢量化 GCC

> ID：13066179
> 
> 赞同：3
> 
> 时间：2012-10-25T10:04:26.227
> 
> 标签：c++, gcc, vectorization

我试图让 GCC 4.7 自动矢量化我的代码的某些部分以提高速度，但是，这样做似乎很困难。

这里有一些我想矢量化的代码：

```
void VideoLine::WriteOut(unsigned short * __restrict__  start_of_line, const int  number_of_sub_pixels_to_write)
{
  unsigned short * __restrict__ write_pointer = (unsigned short *)__builtin_assume_aligned (start_of_line, 16);
  unsigned short * __restrict__ line = (unsigned short *)__builtin_assume_aligned (_line, 16);
  for (int i = 0; i < number_of_sub_pixels_to_write; i++)
  {
    write_pointer[i] = line[i];
  }
} 
```

我正在使用以下 GCC 开关：

```
-std=c++0x \
-o3 \
-msse \
-msse2 \
-msse3 \
-msse4.1 \
-msse4.2 \
-ftree-vectorizer-verbose=5\
-funsafe-loop-optimizations\
-march=corei7-avx \
-mavx \
-fdump-tree-vect-details \
-fdump-tree-optimized \ 
```

我知道有些人会覆盖其他人。

我根本没有从矢量化器得到任何输出，但是，在查看 .optomized 文件时，我可以看到它没有使用矢量化。谁能指出我正确的方法来使其矢量化？

**编辑：**原来问题是使用-o3而不是-O3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:07:49.633

试着保证，这`number_of_sub_pixels_to_write`是 4 的倍数，就像在这里所做的那样：http: //infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dht0002a/ [ch01s04s03。 html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dht0002a/ch01s04s03.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:28:34.493

编译器可以自由地做它想做的事。因此，如果您真的想使用 SIMD 功能（而不依赖于编译器），您应该使用这些功能（请参阅[手册](http://cache-www.intel.com/cd/00/00/34/76/347603_347603.pdf)）。

# facebook - FQL 不返回带有朋友标签的照片

> ID：13066183
> 
> 赞同：0
> 
> 时间：2012-10-25T10:04:44.853
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-fql

我正在尝试使用 FQL 来获取我自己的照片列表，这些照片中带有朋友标签。朋友由他们的名字或他们名字的一部分来指定。即从文本框输入

到目前为止，我已经想出了下面的 FQL，它几乎可以工作，但是......

谁能告诉我为什么第一个查询返回记录列表，而第二个查询什么也不返回？两者之间的唯一区别是第二个只搜索人名的一部分，即“劳拉”与“劳”

FQL 1

```
SELECT object_id, src_big, src_big_width, src_big_height, aid 
FROM photo 
WHERE object_id in (
    SELECT object_id
    FROM photo_tag 
    WHERE subject in (
        SELECT uid 
        FROM user 
        WHERE (strpos(lower(name),"laura") >=0 ) 
        AND (uid in (SELECT uid2 FROM friend WHERE uid1 = me()) )) 
)
AND owner = me() 
```

FQL 2

```
SELECT object_id, src_big, src_big_width, src_big_height, aid 
FROM photo 
WHERE object_id in (
    SELECT object_id
    FROM photo_tag 
    WHERE subject in (
        SELECT uid 
        FROM user 
        WHERE (strpos(lower(name),"lau") >=0 ) 
        AND (uid in (SELECT uid2 FROM friend WHERE uid1 = me()) )) 
)
AND owner = me() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:35:25.943

Facebook 的系统中似乎存在[错误](https://developers.facebook.com/bugs/435960573102992)，因此 strpos 在子查询中无法按预期工作。作为一种解决方法，您可以尝试将其拆分为两个查询 - 一个查找 id-s 列表：

```
SELECT uid 
        FROM user 
        WHERE (strpos(lower(name),"lau") >=0 ) 
        AND (uid in (SELECT uid2 FROM friend WHERE uid1 = me()) ) 
```

第二个使用此列表：

```
SELECT object_id, src_big, src_big_width, src_big_height, aid 
FROM photo 
WHERE object_id in (
    SELECT object_id
    FROM photo_tag 
    WHERE subject in (111,222,333,444,555)
)
AND owner = me() 
```

# google-oauth - Google API 访问令牌返回 400 - “invalid_request”

> ID：13066186
> 
> 赞同：1
> 
> 时间：2012-10-25T10:04:58.903
> 
> 标签：google-oauth

我正在向 google oauth2 发出以下请求以获取访问令牌，并获得带有“invalid_request”的 400 http 响应：

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Connection: keep-alive
Accept: */*
User-Agent: NING/1.0
Content-Length: 260
Content-Type: application/x-www-form-urlencoded 
```

在请求正文中使用以下参数：

```
Map(redirect_uri -> http%3A%2F%2Flocalhost%3A8080%2Foauth%2Fgsheet, client_id -> _.apps.googleusercontent.com, code -> 4/9hzannwi_UlYWFlFEivgYXKzdGs6._, client_secret -> _, grant_type -> authorization_code) 
```

这真的让我很烦恼，非常感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:37:56.630

在发出导致问题的请求之前，我正在对 redirect_uri 进行编码。不这样做解决了问题。然而，这似乎很奇怪，因为我在将用户发送到 oauth2 请求页面时对 redirect_uri 进行了编码......

# php - 计算增量/减量百分比时除以零

> ID：13066187
> 
> 赞同：0
> 
> 时间：2012-10-25T10:05:00.543
> 
> 标签：php, arrays, associative-array

我想知道值 ($x) 是否比值 ($y) 大或小 50%。

我正在这样做：

```
$diff = ($x - $y) / $x;

if (abs($diff) > 0.5) {

echo "it's happening";
} 
```

问题是当 $x 为 0 时。我怎样才能干净地解决这个问题？请注意，即使值为 0，我也希望能够计算增量/减量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:34:35.653

如果您想找出“值 ($x) 是否比值 ($y) 大或小 50%。”，那么您应该将差值除以 $y 而不是 $x。当 $y 等于 0 时，任何值（+ve 或 -ve）都无限地大于或小于 $y。那里不可能进行有限计算。

# jquery - :nth-child() 选择器

> ID：13066189
> 
> 赞同：2
> 
> 时间：2012-10-25T10:05:04.093
> 
> 标签：jquery

```
<div>John Resig</div>
<div>George Martin</div>
<div>Malcom John Sinclair</div>
<div>J. Ohn885612</div>
<div>T.1</div>
<div>T.12</div>
<div>T.13</div>

<script>
  $("div:contains('1') :nth-child(2)").css("background","yellow");
</script> 
```

我想突出显示提供“1”的“div”上的第二个孩子请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:06:23.730

使用[eq 选择器](http://api.jquery.com/eq-selector/)：

```
$("div:contains('1'):eq(2)").css("background","yellow"); 
```

[示范](http://jsfiddle.net/5Cq7q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:11:28.897

使用此代码：

```
$("div:contains('1')").eq("2").css("background", "yellow"); 
```

# php - 在php中将值从一个文本框传递到另一个文本框

> ID：13066192
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:05:08.323
> 
> 标签：php

我有两个文本框和一个按钮。我想当我在第一个文本框中键入任何值并单击一个按钮时，我将在第一个文本框中键入的值应该是第二个文本框的值。我正在使用这段代码。有人可以帮助我吗？

```
<?php
if(isset($_POST['sum']))
{
 $v1=$_POST['abc'];
 if($v1=="vivek")
 {
  echo "welcome Mr.".$v1;
 }
 else
 {
  echo "Unauthorised User Mr. ".$v1;
 }  
}
?>
<html>
<body>
<form method="post" action="">
  <p>Name:&nbsp&nbsp&nbsp&nbsp&nbsp
    <input type="text" name="abc" value=""/>&nbsp&nbsp
    </br></br>
     Passed Value: <input type="text" name="xyz" value="<?php echo $v1;?>"/>
   </p>
  <p>
    <input type="submit" name="sum" value=" Submit "/>
</p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:10:38.087

```
 Passed Value: 

        <input type="text" name="xyz" value="<?php 
         if(isset($_POST['abc']))
         echo htmlentities($_POST['abc'],ENT_QUOTES);
    ?>"/> 
```

这应该这样做:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:11:47.423

试试这个。

```
<form method="post" action="">
  <p>Name:&nbsp&nbsp&nbsp&nbsp&nbsp
    <input type="text" name="abc" value=""/>&nbsp&nbsp
    </br></br>
     Passed Value: <input type="text" name="xyz" value="<?php if(isset($_POST['abc'])) { echo $_POST['abc']; } ?>"/>
   </p>
  <p>
    <input type="submit" name="sum" value=" Submit "/>
</p>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:16:19.560

试试这个代码。

```
 <script type="text/javascript">
            function sub() {
                document.getElementById('xyz').value = document.getElementById('abc').value;
            }
        </script>
        <form>
        <label>Amonut</label>
        <input type="text" name="abc" onkeyup="sub();" id="abc" />
        <br /><br />
        <label>Discount</label>
        <input type="text" name="xyz" id="xyz" />
<input type="submit" name="sum" value=" Submit "/>
    </form> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T10:22:14.963

```
<script type="text/javascript">
            function sub() {
                document.getElementById('xyz').value = document.getElementById('abc').value;
            }
        </script>
        <form onsubmit="sub();">
        <label>Amonut</label>
        <input type="text" name="abc" id="abc" />
        <br /><br />
        <label>Discount</label>
        <input type="text" name="xyz" id="xyz" />
<input type="submit" name="sum" value=" Submit "/>
    </form> 
```

我想你想要这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T10:10:07.440

试试这个代码

```
$v1='';
if(isset($_POST['sum']))
{
 if($v1=="vivek")
 {
  echo "welcome Mr.".$v1;
  $v1=$_POST['abc']; 
 }
 else
 {
  echo "Unauthorised User Mr. ".$v1;
 }  
} 
```

# vb.net - 关闭 SqlDataReader

> ID：13066195
> 
> 赞同：0
> 
> 时间：2012-10-25T10:05:17.243
> 
> 标签：vb.net, database-connection, enterprise-library, sqldatareader

我有一个使用 SQL Server 2008 的 ASP.Net 2.0 Web 窗体应用程序。该应用程序有一个 UI 层和数据访问层。我使用 Enterprise Libray 5.0 来保存数据。

最近我的网站运行得很慢，尤其是在可能有 15-20 次从数据库单独读取的页面上。我非常担心我的 SqlDataReader 数据库连接没有正确关闭。下面是代码如何工作的示例。如果您在泄漏连接方面发现任何问题，请查看并告诉我。

**数据访问类**

```
Public Class DataAccess

    Private db As Database = DatabaseFactory.CreateDatabase()

    Public Function ExecuteDataReader(ByVal params() As SqlParameter, ByVal SProc As String) As SqlDataReader

        Dim i As Integer
        Dim dr As SqlDataReader = Nothing
        Dim cmd As DbCommand

        cmd = db.GetStoredProcCommand(SProc)
        cmd.CommandTimeout = 120

        For i = 0 To params.Length - 1
            db.AddInParameter(cmd, params(i).ParameterName.ToString, params(i).DbType, params(i).Value)
        Next

        dr = TryCast(DirectCast(db.ExecuteReader(cmd), RefCountingDataReader).InnerReader, SqlDataReader)

        Return dr

    End Function 
```

**页面后面的 UI 代码**

```
Dim drSource As SqlDataReader = Nothing
        Try
            Dim params(0) As SqlParameter
            params(0) = New SqlParameter("@applicant_id", Session("ApplicantID"))
            drSource = DataAccess.ExecuteDataReader(params, "sp_get_date_last_login")
            If drSource.HasRows Then
                drSource.Read()
                'Do code
            End If
        Finally
            If Not (drSource Is Nothing) Then
                drSource.Close()
            End If
        End Try 
```

我试图将下面的代码放入我的**ExecuteDataReader**方法中，但这会在 SqlDataReader 有机会进行读取之前关闭它

```
if (cmd.Connection.State == ConnectionState.Open)
            cmd.Connection.Close(); 
```

有人可以看看上面的代码，让我知道如何正确关闭我的数据库连接，或者我已经在这样做了吗？

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:45:13.017

您是否尝试过对 ExecuteReader 进行底层调用以获取 CommandBehavior.CloseConnection 参数？至少这将确保在 DataReader 也关闭时关闭连接。这将依赖从 ExecuteDataReader() 传回的 DataReader 的消费者来显式关闭它或通过 Using 块进行处理。

或者，尝试在 drSource.Close() 行后面的代码中添加以下内容：

```
 drSource.Connection.Close() 
```

# dynamics-crm-4 - 在 mscrm 4.0 中创建自定义实体记录时出错

> ID：13066197
> 
> 赞同：0
> 
> 时间：2012-10-25T10:05:23.517
> 
> 标签：dynamics-crm-4

我是使用 CRM 的新手。我在使用控制台应用程序创建客户实体记录时遇到了问题。此控制台应用程序由具有“ **systemadministrator** ”权限的用户运行。当我调用`objService.Creat(entity);`方法时

我收到以下异常

`0x80042f09 SecLib::CheckPrivilege failed. Returned hr = -2147209463, User: 395a4c3e-cf59-de11-8e41-001a646ad2f9`

请让我知道是什么导致了这个问题。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:38:29.150

这可能是因为实际的 Web 服务调用不是作为系统管理员执行的。

我建议使用[WhoAmI](http://msdn.microsoft.com/en-us/library/bb890244.aspx)查询来检查实际使用的是哪个用户，然后您可以更正他们的权限。

# javascript - 键入时搜索 - 突出显示匹配项

> ID：13066199
> 
> 赞同：3
> 
> 时间：2012-10-25T10:05:26.133
> 
> 标签：javascript, jquery, regex

我正在使用以下函数来过滤元素并仅显示包含字符串的元素 - 在您键入时进行搜索。

```
var filter = $(this).val();
var count = 0;    
$(SearchableElements).each(function() {
    if ($(this).text().search(new RegExp(filter, "i")) < 0) {
        // hide
    } else {
        // show matches
        count++;
    }
});​ 
```

**[演示在这里](http://jsfiddle.net/Seefeld/3JuJz/9/)**

你能想到在文本中突出显示匹配项的任何方法吗？`wrap`有吗`span`？或者 jQuery 需要处理很多工作（查找、删除之前包装、包装新匹配）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:55:09.860

[这是我使用](http://jsfiddle.net/ScKJC/3/)[这个](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)插件想出的东西。它很简单：

```
$('#searchable').highlight(filter); 
```

编辑：更新链接，修复了一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:15:20.283

首先，您需要定义`escapreRegExp`函数以确保您的搜索字符串不是正则表达式模式：

```
function escapeRegExp(str) {
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
} 
```

然后你需要修改你的脚本如下：

```
$(SearchableElements).each(function(){
  this.innerHTML = this.innerHTML.replace(
    /<span\s[^>]*?class=['"]highlight['"].*?>(.*?)<\/span>/g, "$1");
  if ($(this).text().search(new RegExp(filter, "i")) < 0) {
  ... 
  } else {
    var re = new RegExp("(" + escapeRegExp(filter) + ")(?![^<]*>)", "gi");
    this.innerHTML = this.innerHTML.replace(re, 
       "<span class='highlight' style='background-color: #FFFF00'>$1</span>");
    ... 
```

**[在此处](http://jsfiddle.net/MHDXN/)**测试此代码。

# wix - 如何添加防火墙异常并在失败时显示消息，而不回滚

> ID：13066200
> 
> 赞同：5
> 
> 时间：2012-10-25T10:05:26.353
> 
> 标签：wix

在这种情况下，我想安装一个应用程序并在安装时添加防火墙例外，但是当安装失败时，安装不应该回滚，而是向执行安装的用户/管理员显示通知。

我使用 WIX 构建安装程序。到目前为止，我有以下安装防火墙异常的部分：

```
<Component Id="fwException" DiskId="1" Guid="guid">
      <fw:FirewallException
          Name="new firewall exception"
          Id="FirewallException"
          Port="1234"
          Protocol="tcp"
          Scope="any"
          IgnoreFailure="yes"
          >
      </fw:FirewallException>
 </Component> 
```

一切都很好并且不会回滚，但是如何让安装程序在安装结束时显示通知或对话框，通知用户尚未添加防火墙例外。

因为在排除故障时，将异常添加到防火墙的静默失败可能会产生误导。

我正在考虑在某个条件下使用 ?fwException = INSTALLSTATE_ABSENT ，但不知道在哪里使用它来获得预期的效果。

非常感谢任何提示/提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:23:00.303

Short of rolling your own custom action that prompts an ignore, retry, cancel dialog when the UILevel property indicates it's an interactive installation, the way I've seen most installers ( SQL Server, TFS ) handle it is to have a prereq check in the UI portion to warn you that a problem may exist.

The problem they typically check for is that the firewall is disabled and that therefore the exception can't be registered. Therefore if you later enable the firewall the application will not work.

Personally, the way I handle it is the firewall exception in the installer is a nice to have for 90% of people. People may be running other firewall products or the firewall configuration may change later so it's best to have the application itself to instrument this.

# opencv - 对矩阵进行排序并将其放在一行中

> ID：13066201
> 
> 赞同：0
> 
> 时间：2012-10-25T10:05:33.143
> 
> 标签：opencv

我正在尝试将 3x3 行排序为 9x1 的方法。

所以我有以下几点：

![在此处输入图像描述](../Images/68d852db5795dd6935b32e7f3468f8b5.png)

我想结束这个：

![在此处输入图像描述](../Images/1f5a84448b0d462c2098e02ef5844689.png)

到目前为止，这就是我最终要做的事情：

```
 Rect roi(y-1,x-1,kernel,kernel);
            Mat image_roi = image(roi);
            Mat image_sort(kernel, kernel, CV_8U);
            cv::sort(image_roi, image_sort, CV_SORT_ASCENDING+CV_SORT_EVERY_ROW); 
```

该代码不起作用，目前我在“排序”后的 image_sort 中找不到任何数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:43:16.653

确定你有单通道灰度图像？尝试：

```
cv::Mat image_sort = cv::Mat::zeros(rect.height, rect.width, rect.type()); // allocated memory
image(roi).copyTo(image_sort); // copy data in image_sorted
std::sort(image_sort.data, image_sort.dataend); // call std::sort
cv::Mat vectorized = image_sort.reshape(1, 1); // reshaped your WxH matrix into a 1x(W*H) vector. 
```

# visual-studio-2010 - Intellisense 错误/包括带有环境变量的其他库

> ID：13066202
> 
> 赞同：1
> 
> 时间：2012-10-25T10:05:34.050
> 
> 标签：visual-studio-2010, environment-variables, intellisense

我正在使用 CPLEX 开发一个 C++ 项目（VS 2010）。

我在项目设置中包含了所需的 cplex 库，如下所示：

*   在 C/C++ > 常规下添加了“其他包含目录”

*   在链接器>常规下添加了“其他库目录”

*   在链接器>输入下将.lib文件添加为“附加依赖项”

一切都编译得很好，但是我的问题是智能感知仍然报告错误（红色波浪下划线），例如#include 行中的“无法打开源文件”，以及使用 CPLEX 库中定义的变量类型时的“标识符未定义”。

与其他没有这种行为的项目唯一不同的是，这次我在设置包含路径时使用了windows环境变量，即库目录和包含目录的定义类似于：`%CPLEX_STUDIO_DIR%\cplex\include`

我已经这样设置了，这样我就可以在不同的机器上构建这个项目，而不会弄乱项目属性。由于 CPLEX 是单独安装的，因此使用相对路径来指定其他目录并不是一个真正的选项。

我想重复一下，该项目可以编译，只有智能感知错误困扰着我。

我知道我可以关闭智能感知错误报告，但如果有人对此有解决方法，我很想听听。

亲切的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T23:05:26.683

Microsoft 已知此问题：

[http://connect.microsoft.com/VisualStudio/feedback/details/779874/intellisense-cant-handle-using-environemt-variable-in-include-path](http://connect.microsoft.com/VisualStudio/feedback/details/779874/intellisense-cant-handle-using-environemt-variable-in-include-path)

我知道避免它的唯一方法是手动输入完整的文字路径。该错误被标记为“延迟”，我认为这意味着微软认为它不够严重，无法很快修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-29T11:19:19.650

解决方案是替换`%CPLEX_STUDIO_DIR%\cplex\include`为`$(CPLEX_STUDIO_DIR)\cplex\include`. 这是 Visual Studio 用于其内置变量的语法，`$(VCInstallDir)`例如编译器。

（我意识到这是一个老问题，但它在搜索结果中排名很高，因此即使不是原始海报也可以帮助其他人。）

# json - 谷歌地图建议

> ID：13066204
> 
> 赞同：1
> 
> 时间：2012-10-25T10:05:42.923
> 
> 标签：json, google-maps

我从来没有在网站上使用过谷歌地图。

我想知道是否可以在我的数据库中没有坐标的情况下使用它？我只有一个城市的名字。

我想从 json 响应中获取城市名称，并在谷歌地图上显示所有事件位置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:14:44.063

是的。SO 和 Google 上有很多例子。

# java - 从java访问包内定义的类型

> ID：13066206
> 
> 赞同：3
> 
> 时间：2012-10-25T10:05:46.967
> 
> 标签：java, oracle, stored-procedures, jdbc, types

我在 oracle 中的过程是在一个包下定义的，该包具有记录表的输入和输出参数。我可以使用 java 中的可调用语句使用 packagename.procname 调用该过程。但是要访问 out 参数，我需要定义一个 ARRAY 类型的变量。但是oracle中的记录类型和记录表是在包里面定义的。因此这些类型不能使用 ARRAYDESCRIPTOR 从 java 中访问。

proc和类型定义如下：

```
CREATE OR REPLACE PACKAGE mypackage IS
TYPE TY_Pos IS RECORD
(        cust_id     VARCHAR2(9)

,        balance NUMBER
);

TYPE TY_TBL IS TABLE OF TY_Pos INDEX BY PLS_INTEGER;

PROCEDURE myproc(inTable IN OUT     TY_TBL,
                                      count IN NUMBER,
                                      outTable         IN OUT     TY_TBL
                                      );

CREATE OR REPLACE PACKAGE BODY mypackage AS

PROCEDURE myproc(inTable IN OUT     TY_TBL,
                                      count IN NUMBER,
                                      outTable         IN OUT     TY_TBL
                                      ) as 
--proc body 
```

为了访问作为记录表的 proc 的 out 变量，我将数组描述符创建为

```
ArrayDescriptor myDescp = ArrayDescriptor.createDescriptor ("TY_TBL", l_con); 
```

但是由于 TY_TBL 是在包内定义的，因此它会引发错误。请帮助我如何从我的 java 代码中访问这种类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-07T20:46:22.530

TY_TBL 是一种 Pl/SQL 类型，这意味着该类型对 java 是不可见的。

我建议创建两种 sql 类型：

```
 Create or Replace SQL_TY_Pos TYPE AS OBJECT (cust_id     VARCHAR2(9), balance NUMBER);
 Create or Replace SQL_TY_TBL TYPE IS TABLE OF SQL_TY_Pos INDEX BY PLS_INTEGER; 
```

然后在java中：

```
ArrayDescriptor myDescp = ArrayDescriptor.createDescriptor ("SQL_TY_TBL", l_con); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T07:44:42.073

这不是一个非常干净的解决方案，但它有效

```
 StringBuilder sql = new StringBuilder("DECLARE\n\tarr OTHERPACKAGE.TYPE;\n");
    sql.append("BEGIN\n");
    for (int i = 0; i < tmpArray.length; i++) {
        sql.append("\tarr(").append(i).append(") := '").append(tmpArray[i]).append("';\n");
    }
    sql.append("\tSCHEMA.PACKAGE.PROC(arr, ?);\n");
    sql.append("END;");

    Connection conn;
    CallableStatement callableStatement = conn.prepareCall(sql.toString());
    callableStatement.registerOutParameter(1, OracleTypes.CURSOR);
    callableStatement.execute(); 
```

# version-control - 如何管理应用程序之间的共享库？

> ID：13066211
> 
> 赞同：1
> 
> 时间：2012-10-25T10:05:56.997
> 
> 标签：version-control, dependencies, shared-libraries, dependency-management

我们开发企业软件，我们希望在我们的开发人员之间促进更多的代码重用（为了使这个问题简单，让我们假设所有的.NET）。我们即将迁移到一个新的 VCS 系统（很可能是 mercurial），我希望制定一个策略来共享库。

管理满足以下用例的共享库的最佳流程是什么：

1.  黑盒 - 只有库的公共 API 是已知的，并且没有假设消费开发人员将能够“进入”或在库中设置断点。图书馆是一个黑匣子。开发人员通常不关心细节，只需给我一直“工作”的 lib 版本。
2.  调试 - 开发人员至少应该能够在开发过程中“进入”库。设置断点也是一个好处。
3.  并行开发 - 虽然很可能是少数，但似乎有一些有效的用例可以与消费应用程序并行开发库。库和组件的作者通常是同一个开发者。无论好坏，应用程序和库通常可以紧密耦合。能够对两者进行更改和调试可能是我们开发的一种非常有效的方式。

需要注意的是，求解 3，可能会隐式求解 2。

解决方案可能涉及其他工具（例如 NuGet 等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:37:30.097

通过共享库，您必须区分：

*   源依赖（您正在共享*源*，意味着在您的项目中*重新编译）*
*   二进制依赖项（您共享交付，从公共来源编译）并从您的项目链接到它。

关于这两者，NuGet (2.0) 最终引入了“构建期间的包还原”，以便*不*提交任何构建`Lib`或`ExternalDependencies`文件夹的源代码控制。

NuGet（尤其是其[新的分层配置](http://docs.nuget.org/docs/release-notes/nuget-2.1)NuGet 2.1）非常适合 C# 项目中的模块管理，并将与 git 和 Mercurial 交互。

将其与[Mercurial subrepos](https://www.mercurial-scm.org/wiki/Subrepository)结合使用，您应该能够在其自己的 repo 中隔离您想要重用的公共代码库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:40:06.350

对于这个问题，我有两种可能的解决方案，但似乎都不理想（因此我发布了这个问题）。

1.  使用 VCS 管理依赖项。具体来说，使用 mercurial subrepos 并始终按源共享。
    *   优点：
        1.  所有 3 个用例都已解决。
        2.  源代码控制和依赖管理只需要一个工具
    *   缺点：
        1.  Subrepos 功能被 Mercurial 开发人员认为是[不得已的功能，](https://www.mercurial-scm.org/wiki/Subrepository)从实验和[阅读](https://stackoverflow.com/a/11639890/880509)来看，存在以下问题：
            *   标签不能轻易或原子地应用于多个 repos。
            *   Root/Shell 存储库本质上是脆弱的（如果到子存储库的路径发生变化，可能会被破坏）。Mercurial 开发人员建议通过在 shell 存储库中不包含任何内容并仅使用它来定义（和跟踪修订）子存储库来缓解此问题。因此，即使 subrepo 路径被破坏，开发人员也可以手动重新创建一个时刻。
            *   分支不能跨越 repo 边界（很可能不是一个大问题，因为有人可能会争辩说分支应该只出现在给定的 subrepo 中）。
2.  使用[Ivy](http://ant.apache.org/ivy/)或[NuGet](http://nuget.org/)来管理依赖项。有两种方法可以工作。
    1.  依赖项/包可以简单地包含官方二进制文件。当开发人员提交新版本的构建时，构建服务器可以配置为将新的依赖项/包发布到公司存储库中。这解决了案例 1。Nuget 似乎支持可以*解决案例 2 的*[符号包](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-symbol-package)。案例 3 没有解决，并且在这种情况下让开发人员干涸并提出自己的解决方案（基本上没有办法将应用程序提交给 VCS包括按来源的依赖项）。这似乎是使用依赖管理工具的*传统*方式。
    ***   Dependencies/Packages 可以包含一个从 mercurial 获取源的脚本。该脚本可以在安装依赖项/包时自动执行。为了让 .NET 解决方案包含按项目（而不是通过浏览文件系统）的引用，已经执行了一些魔法，但理论上这可能发生在 NuGet[安装脚本中，而在卸载脚本中则相反](http://docs.nuget.org/docs/creating-packages/Creating-and-Publishing-a-Package#powershell)。
        *   在“源”和“二进制”依赖项之间切换似乎是一个手动步骤。我认为开发人员应该切换到发布的二进制依赖项，也许这可以在创建发布时在构建服务器上强制执行。由于需要修改 VS 解决方案以引用项目与二进制文件，这进一步复杂化了。
        *   有多少个源包？每个二进制包是否都包含用于获取构建它的源代码的脚本？或者我们是否创建单独的源包，使用安装脚本魔法来获取源？这就引出了一个问题，mercurial 中的每个标签是否都有一个源包？每个变更集？或者只是 1 个源包，它只是克隆和更新到提示并让开发人员更新到以前的修订版（但这会产生知道要更新到哪个修订版的问题）。
        *   如果开发人员随后使用 mercurial 更改源的版本，这如何反映在消费应用程序中？用于获取源的依赖项/包没有改变，但源本身已经......**

# hibernate - JBoss AS 7.x -JPA 网络故障后如何重新建立连接

> ID：13066212
> 
> 赞同：2
> 
> 时间：2012-10-25T10:05:57.210
> 
> 标签：hibernate, jpa-2.0, jboss7.x

我的应用程序使用 JPA(Hbernate ORM) 连接到部署在 JBoss AS 7.x 服务器中的 SQL server 2008 。如果网络出现故障并再次出现，我会收到以下异常

```
14:59:27,996 ERROR [stderr] (http-localhost-127.0.0.1-8080-1) javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: The connection is closed.
14:59:28,002 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1361)
14:59:28,012 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289)
14:59:28,020 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:261)
14:59:28,025 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.honeywell.domoweb.dataservice.dao.impl.UserDaoImpl.getUsers(UserDaoImpl.java:372)
14:59:28,030 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
14:59:28,034 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
14:59:28,039 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
14:59:28,044 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at java.lang.reflect.Method.invoke(Method.java:597)
14:59:28,047 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
14:59:28,052 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
14:59:28,058 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
14:59:28,064 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
14:59:28,069 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
14:59:28,075 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
14:59:28,080 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at $Proxy66.getUsers(Unknown Source)
14:59:28,083 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at com.honeywell.domoweb.dataservice.dao.impl.TemplateDaoImpl.getTemplate(TemplateDaoImpl.java:44)
14:59:28,089 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)... 
```

我用谷歌搜索了这个问题，发现这个问题需要更改连接池配置才能使用 autoReconnect 属性重新连接，但没有找到任何示例，如何将 autoReconnect 嵌入到我的连接池设置中。下面是我的连接池设置在 Standalone.xml 文件中

```
<subsystem xmlns="urn:jboss:domain:datasources:1.0">
        <datasources>

            <datasource jndi-name="java:jboss/datasources/DataServiceDS" pool-name="dataServicePool" enabled="true" use-java-context="true">
                <connection-url>jdbc:sqlserver://ipaddress:1433;databaseName=myDataBase</connection-url>
                <driver>sqlserver</driver>
                <pool>
                    <min-pool-size>10</min-pool-size>
                    <max-pool-size>100</max-pool-size>
                    <prefill>true</prefill>
                </pool>
                <security>
                    <user-name>usename</user-name>
                    <password>password</password>
                </security>
            </datasource>
            <drivers>

                <driver name="sqlserver" module="com.microsoft.sqlserver">
                    <xa-datasource-class>com.microsoft.sqlserver.jdbc.SQLServerDriver</xa-datasource-class>
                </driver>
            </drivers>
        </datasources>
    </subsystem> 
```

你能告诉我，如果网络出现故障并重新连接，如何重新连接到数据库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T01:04:22.413

你可以添加

```
<check-valid-connection-sql>select 1 </check-valid-connection-sql> 
```

到您的数据源配置或您想要的任何其他 sql 语句。每次从连接池中检出连接时都会执行此 sql 语句，如果语句失败，即连接已关闭，它将被销毁并重新创建/重新连接到 sql server。这将确保您的应用程序（休眠）始终获得有效的 sql 连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-04T07:43:36.940

也很难找到类似问题的例子。对于 jboss7，在数据源配置中添加了以下几行

```
<datasource>
  ...
  <validation>
    <check-valid-connection-sql>select 1 from dual</check-valid-connection-sql>
    <validate-on-match>false</validate-on-match>
    <background-validation>true</background-validation>
  </validation>
  ...
</datasource> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T10:37:17.133

你想解决什么问题？

如果您试图在“网络出现故障”时阻止交易失败。那是不可能的。您需要研究“XA”和 SQL 集群来解决该问题的某些部分。但我不认为你在寻找这个。

..

如果您想阻止应用程序操作失败，如果它们不幸成为空闲 SQL 连接的第一个用户，则 JBoss 中的连接池保持。那么是的，您可以做一些事情。

问题是：

*   默认情况下，当“网络出现故障”时，Windows 会断开活动的 TCP 连接，而其他平台不这样做。对你来说，我猜只有一部分网络出现故障，这意味着如果受影响的是 SQL 服务器端，而不是 JBoss 端。

*   JBoss 端的连接池将保持 TCP 连接打开，池中有空闲连接。JBoss端不知道网络宕机了，可能会与SQL server短时间失去联系。当网络出现时，SQL 服务器端重置/丢失所有连接。但是 JBoss 端仍然有“半开连接”，它仍然认为连接是有效的。

*   在需要处理 SQL 之前，JBoss 端可能会空闲一段时间（秒/分钟/小时）。然后它去获取一个 SQL 句柄，连接池程序适当地从空闲的池中返回一个。不知道 TCP 连接已死。然后，应用程序使用它来发现 TCP 连接被重置以响应从客户端发送到服务器和服务器说“我没有打开那个连接”的一些数据。这会强制 SQL 驱动程序关闭连接并开始向 JDBC 句柄上的操作返回 SQLException。

因此，下面我将笼统地谈论如何帮助缓解或解决问题，请查阅您的支持渠道和 SQL 文档：

要调查的事情：

*   您的连接池文档。我相信 JBoss 提供了自己的连接池实现。因此，虽然这个问题确实可以在连接池中解决，但尚不清楚您的 JBoss 版本和您已经使用的连接池是否具有这些功能。

*   启用 TCP keepalives，这些是由 TCP 协议执行的低级 ping/pong，通常可以在几秒内完成。默认值可能是 1 小时，这对于 SQL 来说太长了，可能 5 分钟更好。

*   在将连接提供给应用程序之前，启用连接池检查/验证连接是否良好且有效。这可能会使用内部 ping/pong 检查或可能会执行“SELECT 1”。这可能是完全解决问题的最简单/最快的解决方案，但是在使用前额外的往返行程可能会对性能产生可衡量的影响。

*   仅当连接空闲时间超过某个限制（可能为 60 秒）时才启用上述点。这减轻了在 SQL 非常空闲时启用它对性能的影响。

*   查看您的 SQL 驱动程序是否支持自定义 TCP 数据 ping/pong 机制，并查看连接池实现是否支持使用它。

*   使用较短的最大空闲时间。

*   降低最大空闲连接数。

*   如果连接不在事务中并且这是第一个失败的语句，则启用自动重新连接（通常唯一的选项更改是 autocommit=off 然后 'BEGIN TRANSACTION' 驱动程序可以检测到这种情况并从中无缝恢复） .

如果您可以选择使用外部 3rd 方开源池程序，建议可能会查看 c3p0 连接池程序。在 JBoss 环境中可能不是这种情况。

# hadoop - Hadoop：如何将 MultipleOutputs 发送到 2 个不同的路径/文件系统？

> ID：13066219
> 
> 赞同：1
> 
> 时间：2012-10-25T10:06:29.400
> 
> 标签：hadoop, amazon-s3, hdfs

我已将 MultipleOutputs 配置为生成 2 个命名输出。我想寄一个给`s3n://`一个给`hdfs://`

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:13:13.113

这目前无法通过可用的 API 来实现。

如果 Hadoop MapReduce的`MultipleOutputs`类当前仅适用于（配置的输出目录的）输出名称的子目录，它可以处理[由推测执行引起的副作用](http://wiki.apache.org/hadoop/FAQ#Can_I_write_create.2BAC8-write-to_hdfs_files_directly_from_map.2BAC8-reduce_tasks.3F)。

但是，您可以重新实现该类（或从它派生），以支持这一点，因为它并非不可能实现。如果您计划让您的实现支持推测执行，您可能还需要更复杂的 OutputCommitter 实现。

# c# - 将xml路径传递给位图时出现无效参数错误

> ID：13066221
> 
> 赞同：0
> 
> 时间：2012-10-25T10:06:43.700
> 
> 标签：c#, xml, bitmap

我需要将 xml 图像路径传递给位图。我有一个 xml 文件，其中包含应用程序中使用的所有图像路径。下面是代码。我收到无效参数错误。

```
 protected void Button1_Click(object sender, EventArgs e)
    {

        XmlDocument xmldoc = new XmlDocument();
        string file = HttpContext.Current.Server.MapPath("XMLFile1.xml");
        xmldoc.Load(file);
        string path = xmldoc.SelectSingleNode("ImagesXml/Ad/ImageUrl2").InnerText;
        Bitmap b = new System.Drawing.Bitmap(xmldoc.SelectSingleNode("ImagesXml/Ad/ImageUrl2").InnerText);

        Graphics g = Graphics.FromImage(b);
        MemoryStream memStream = new MemoryStream();
        g.SmoothingMode = SmoothingMode.AntiAlias;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:42:43.150

试试这个。

```
Image img = Image.FromFile(xmldoc.SelectSingleNode("ImagesXml/Ad/ImageUrl2").InnerText);     
Bitmap bm = new Bitmap(img);     
Graphics g = Graphics.FromImage (bm); 
```

# javascript - Extjs 添加到组合框 unselectable="on" 属性

> ID：13066223
> 
> 赞同：1
> 
> 时间：2012-10-25T10:06:49.633
> 
> 标签：javascript, jquery, extjs

我想在组合框属性中设置`unselectable="on".`如何在 javascript 或 jquery 中进行设置？

```
Ext.ux.form.HtmlEditor.HR = Ext.extend(Ext.util.Observable, {
init:function (cmp) {
    this.cmp = cmp;

    // create the combo instance
    this.combo = new Ext.form.ComboBox({
        typeAhead:true,
        enableKeyEvents:false,
        triggerAction:'all',
        lazyRender:true,
        mode:'local',
        store:[8, 10, 12, 14, 16, 18, 20, 24, 26, 28, 32, 36, 40, 48, 54, 60, 72],
        width:50,
        listeners:{
            scope:cmp,
            select:changeFont
        }

    });
    this.cmp.on('render', this.onRender, this);
},
onRender:function () {
    this.cmp.getToolbar().add(this.combo);
} 
```

});

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T00:31:41.930

Since you're in ExtJS, why don't use just use:

```
Ext.get('someElemName').unselectable(); 
```

# java - 如何从字符串中获取浮点值

> ID：13066225
> 
> 赞同：7
> 
> 时间：2012-10-25T10:06:57.997
> 
> 标签：java, regex

我有一个字符串

```
> 12.4N-m/kg. 
```

从上面的字符串我需要得到一个值`12.4`。

当我使用替换所有功能时`str.replaceAll("[^.0-9]", "")`。

当字符串有两个点时，这不起作用。

浮点值的位置可能不同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T10:17:44.027

首先丢弃所有非浮点字符，然后像这样转换为浮点数：

```
float f = Float.valueOf("> 12.4N-m/kg.".replaceAll("[^\\d.]+|\\.(?!\\d)", ""));
// now f = 12.4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:17:44.583

假设您的输入*总是*在数字之前和之后有一个空格`N`：

```
String t = "> 12.4N-m/kg.";
Pattern p = Pattern.compile("^.*\\s(\\d+\\.\\d)N.*$");
Matcher matcher = p.matcher(t);
if (matcher.matches()) {
    System.out.println(Float.valueOf(matcher.group(1)));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:11:49.897

尝试使用这个：

```
Float.valueOf(str.substring(0,4)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:15:57.413

以下代码将假设输入字符串始终以开头`"> "`并且具有适当的浮点前缀。

```
int i=2;
while(Character.isDigit(str.charAt(i)) || str.charAt(i) == '.') 
    i++;
float answer = Float.valueOf(str.substring(2,i)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T10:17:25.913

尝试使用这个正则表达式

```
^[-+]?[0-9]*\.?[0-9]+$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T15:56:24.050

我认为之前的答案遗漏了两点：

*   还有比这更复杂的数字。
*   单位中可能有一个数字最终不会出现在浮点数中。

由于第二点，我认为替换所有非数字的东西不是一个好主意。人们应该搜索字符串中的第一个数字：

```
Matcher m = p.matcher(str);
System.out.println("Input: "+ str);
if (m.find()) {
    System.out.println("Found: "+ m.group());
    try {
        System.out.println("Number: "+ Float.parseFloat(m.group()));
    } catch (Exception exc) {
        exc.printStackTrace();
    }
} 
```

或者，你可以做类似的事情

```
int i, j;
for (i = 0; i < str.length(); ++i) {
    if (mightBePartOfNumber(str.charAt(i))) {
        break;  
    }       
}       
for (j = i; j < str.length(); ++j) {
    if (!mightBePartOfNumber(str.charAt(j))) {
        break;  
    }       
}       
String substr = str.substring(i, j);
System.out.println("Found: "+ substr);
try {   
    System.out.println("Number: "+ Float.parseFloat(substr));
} catch (Exception exc) {
    exc.printStackTrace();
} 
```

有帮手

```
private static boolean mightBePartOfNumber(char c) {
    return ('0' <= c && c <= '9') || c == '+' || c == '-' || c == '.' || c == 'e' || c == 'E'; 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-26T05:07:15.523

我已经尝试了上述选项但对我不起作用，请尝试以下模式

```
Pattern pattern = Pattern.compile("\\d+(?:\\.\\d+)?"); 
```

# jquery - jQuery click 在附加的 div 上不起作用

> ID：13066229
> 
> 赞同：0
> 
> 时间：2012-10-25T10:07:06.573
> 
> 标签：jquery, click, append

单击图像时，我想附加一个 div。效果很好，看起来非常好。但现在我必须按按钮确认您是否要删除项目。我正在尝试在“是”按钮上进行点击事件。似乎什么也没有发生。我怎么解决这个问题？

```
$(".trashbinPage img").one('click', function(){
    $('#deletePage').closest('tr').after('<div class="deleteMessage"><p>Weet u het zeker?</p></div>');
    $('.deleteMessage').append('<div id="wrapButtons"><div class="trashYes">Ja</div><div class="trashNo">Nee</div></div>');
});

$(".trashYes").click(function(){
    alert('hoi');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:10:26.183

注册您`.trashYes`的[`on`](http://api.jquery.com/on/)：

```
$('.deleteMessage').on('click', '.trashYes', function() {
    ...
}); 
```

**更新**

在`jQuery`< 1.7 的版本中，您应该使用以下[`delegate`](http://api.jquery.com/delegate/)功能：

**更新 2**

[Rory](https://stackoverflow.com/a/13066309/125629)在我的代码中指出了一个问题，所以我更新了答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:10:26.883

附加事件后，您必须将事件绑定到对象。或者使用 live() 或 delegate() 而不是 bind。Internet上应该有很多关于bind，live和delegate之间的区别的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:11:00.470

该元素在页面加载后被附加，这是`click()`连接事件的时候。因此，您需要使用`on`委托来处理事件，如下所示：

```
$(".deleteMessage").on('click', '.trashYes', function(){
    alert('hoi');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:08:14.367

错字？`.one()`应该是`.on()`。

# javascript - 跨两个脚本共享事件或使用更改是作为事件触发器的可见性状态

> ID：13066230
> 
> 赞同：0
> 
> 时间：2012-10-25T10:07:06.950
> 
> 标签：javascript, jquery

好的，我在这里迷路了。我在这里和其他地方阅读了很多关于如何检查给定元素的状态的帖子，特别是它是可见还是隐藏，并使状态的变化触发一个事件。但我无法使任何建议的解决方案发挥作用。

首先，由于每个人似乎都首先跳到这一点，因此需要这样做，因为我有一个 jQuery 脚本，它处理在可点击状态下显示 svg 图标。另一个已经具有在通过单击图标使表单可见时执行相关操作的功能，显然我想重用这些功能。

我试过的：

最初我尝试让两个脚本都作用于单击事件（这仍然是理想的解决方案）......

脚本 1：

```
 $(".booked").on("click", function() {
         $("#cancellation_Form_Wrapper").css("visibility","visible");
 }).svg({loadURL: '../_public/_icons/booked.svg'});

Script 2:

 $(".booked").on("click", function() {
 // do stuff
 }); 
```

这不起作用，所以我尝试研究跨两个脚本共享一个事件，但无法在这个主题上取得任何进展，所以我尝试触发另一个事件以让第二个脚本拾取....

脚本 1：

```
 $(".booked").on("click", function() {
         $("#cancellation_Form_Wrapper").css("visibility","visible");
         $("#cancellation_Form_Wrapper").trigger("change");
 }).svg({loadURL: '../_public/_icons/booked.svg'}); 
```

脚本 2

```
 $("#cancellation_Form_Wrapper").on("change", function(event){
    // do stuff
 }); 
```

这再次不起作用我不清楚为什么这没有达到预期的效果。

然后我尝试了 is(:visible) ....

脚本 1

```
 $(".booked").on("click", function() {
         $("#cancellation_Form_Wrapper").css("visibility","visible");
 }).svg({loadURL: '../_public/_icons/booked.svg'}); 
```

脚本 2

```
 $("#cancellation_Form_Wrapper").is(":visible", function(){
 // do stuff
 }); 
```

所以我有点失落。理想的情况是回到第一个概念。我不明白为什么两个脚本都不能处理 svg 上的点击事件。我认为这与事件处理程序有关，但我不确定如何修改脚本，以便它们都拾取相同的事件。

如果我无法使用可见性状态更改的事实来触发操作。

欢迎任何指导。

**编辑**好的，我刚刚解决了脚本 2 从脚本 1 中获取触发事件的问题。遗憾的是，这是我的一个基本错误……表单阻止了警报的显示。但是我仍然无法让 is(:visible) 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:32:37.433

您的语法可能不正确：

```
$("#cancellation_Form_Wrapper").is(":visible", function(){
    // do stuff
}); 
```

应该：

```
if($("#cancellation_Form_Wrapper").is(":visible")){
    // do stuff
}); 
```

*编辑：如果您希望在 div 可见后*发生某些事情，您可能需要使用 show() 回调而不是切换可见性：

```
$('#cancellation_Form_Wrapper').show(timeInMilliseconds, function(){
    // do something
}); 
```

但是，这需要在同一个函数中进行，我认为这不会改善你的位置。

问题可能是您的第二个`on()`脚本与您的第一个脚本同时触发，这意味着包装器尚不可见。`on()`您可以尝试在短时间内包装第二个：

```
$(".booked").on("click", function() {
    setTimeout(function(){
        if($("#cancellation_Form_Wrapper").is(":visible")){
            // do stuff
        });
    }, 100);
}); 
```

这应该会引入足够的延迟，以确保在尝试执行第二条语句之前已经显示了包装器。

# ruby - 如何检索 nokogiri 处理指令属性？

> ID：13066231
> 
> 赞同：2
> 
> 时间：2012-10-25T10:07:10.570
> 
> 标签：ruby, xml, nokogiri

我正在使用 Nokogiri 解析 XML。

我能够检索样式表。但不是每个样式表的属性。

```
1.9.2p320 :112 >style = xml.xpath('//processing-instruction("xml-stylesheet")').first
=> #<Nokogiri::XML::ProcessingInstruction:0x5459b2e name="xml-stylesheet">
style.name
=> "xml-stylesheet"
style.content
=> "type=\"text/xsl\" href=\"CDA.xsl\"" 
```

有没有简单的方法来获取类型、href 属性值？

或者

唯一的方法是解析处理指令的内容（style.content）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:45:32.850

我按照以下答案中的说明解决了这个问题。

[Nokogiri 可以搜索“？xml-stylesheet”标签吗？](https://stackoverflow.com/questions/3542264/can-nokogiri-search-for-xml-stylesheet-tags#answer-12223360)

向 Nokogiri::XML::ProcessingInstruction 类添加了新的 to_element 方法

```
 class Nokogiri::XML::ProcessingInstruction
   def to_element
     document.parse("<#{name} #{content}/>")
   end
 end

 style = xml.xpath('//processing-instruction("xml-stylesheet")').first
 element = style.to_element 
```

检索 href 属性值

```
 element.attribute('href').value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:47:14.380

你不能那样做吗？

```
style.content.attribute['type'] # or attr['type'] I am not sure
style.content.attribute['href'] # or attr['href'] I am not sure 
```

检查这个问题[如何使用 Nokogiri 访问属性](https://stackoverflow.com/questions/2901241/how-to-access-attributes-using-nokogiri)。

# android - 活动之间的 Android 共享首选项

> ID：13066239
> 
> 赞同：0
> 
> 时间：2012-10-25T10:07:30.097
> 
> 标签：android, sharedpreferences

我在活动 A 上有以下代码：

```
SharedPreferences sharedPreferences = getSharedPreferences("prefs", 0);
SharedPreferences.Editor editor = sharedPreferences.edit();
editor.putString("nome", nome.getText().toString());
editor.commit(); 
```

我在活动 B 上有以下代码：

```
SharedPreferences sharedPreferences = getSharedPreferences("prefs", 0);
String a = sharedPreferences.getString("nome", "");
nomeMediador.setText(a); //TextBox 
```

谁能告诉为什么它没有在活动 B 上显示（保存在活动 A 上的值）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:14:32.367

参考下面的代码

活动一

```
SharedPreferences sharedPreferences = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
SharedPreferences.Editor editor = sharedPreferences.edit();

editor.putString("nome", nome.getText().toString());
editor.commit(); 
```

活动 B

```
SharedPreferences sharedPreferences = PreferenceManager
                .getDefaultSharedPreferences(getApplicationContext());
String a = sharedPreferences.getString("nome", "");
nomeMediador.setText(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:30:31.970

在 string.xml 文件的帮助下更好地使用 getter 和 setter，你永远不会遇到这种问题。就此而言，您可以查看此博客：

[http://sspower3.blogspot.in/2011/11/sharedpreferences-in-eazy-way.html](http://sspower3.blogspot.in/2011/11/sharedpreferences-in-eazy-way.html)

# wpf - 与 D3DImage + DirectShow (VMR9) 相比，D3DImage + Media Foundation (EVR) 会提供更好的性能吗？

> ID：13066243
> 
> 赞同：2
> 
> 时间：2012-10-25T10:07:41.830
> 
> 标签：wpf, video, media-player, directshow, ms-media-foundation

我正在使用 WPF 和 DirectShow 开发视频应用程序。使用 D3DImage 和自定义分配器呈现器实现了在播放区域上提供覆盖的能力，因此我的 CPU 负载很高（在 20 个流，fps = 2 时为 80%）。与 D3DImage + DirectShow (VMR9) 相比，D3DImage + Media Foundation (EVR) 会提供更好的性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T21:10:55.083

首先，EVR 可以与 DirectShow 和 MediaFoundation 一起使用。这是一个非常好的示例项目，它结合了 WPF D3DImage、DirectShow 和 EVR：[https](https://wpfmediakit.codeplex.com) ://wpfmediakit.codeplex.com 。甚至可以在 wpfmediakit 中切换 EVR 和 VMR9 渲染器并比较 CPU 使用率。

一般来说，EVR 是 Vista 或更高版本的最佳选择。这是选择最佳 DirectShow 视频渲染器的简单[指南。](https://msdn.microsoft.com/en-us/library/windows/desktop/dd374574(v=vs.85).aspx)

# c# - DataGridview 搜索：仅显示搜索结果并隐藏其他行？

> ID：13066246
> 
> 赞同：7
> 
> 时间：2012-10-25T10:07:51.193
> 
> 标签：c#, .net, winforms, datagridview

我应该在我的代码中添加什么以仅显示我的搜索结果？

现在，当我搜索时，搜索结果被选中（突出显示），其他保持不变。

一直试图隐藏其他行但没有任何成功（并且只显示搜索结果，单独）。有什么建议么？我使用数据网格视图。

我的代码：

```
private void button3_Click_1(object sender, EventArgs e)
{
    string search = textBox1.Text;

    for (int i = 0; i < dgTest.Rows.Count; i++)
    {
        if (dgTest.Rows[i].Cells[0].Value.ToString() == search)
        {
            dgTest.Rows[i].Selected = true;
            break;
        }
        else
        {
            dgTest.Rows[i].Selected = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T10:17:04.713

如果您的 DataGridView 未绑定到数据源，则将行的 Visible 属性设置为 false 将隐藏它：

```
for (int i = 0; i < dgTest.Rows.Count; i++)
    {
        var row = dgTest.Rows[i];

        if (row.Cells[0].Value.ToString() == search)
        {
            row.Selected = true;
            row.Visible = true;
        }
        else
        {
            row.Selected = false;
            row.Visible = false;
        }
    } 
```

（我删除了“break”命令，因为即使在找到匹配行之后，您仍希望继续并隐藏其他行。）

但是，如果您使用的是 DataBinding，则并不那么容易，如[本页](http://social.msdn.microsoft.com/Forums/en-GB/Vsexpressvcs/thread/606c4ba0-754e-4789-8d7b-7fc428b76ba6)所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:38:49.253

你可以试试这个：

```
for (int i = 0; i < dgTest.Rows.Count; i++)
{
    if (dgTest.Rows[i].Cells[0].Value.ToString() == "search")
    {
        dgTest.Rows[i].Selected = true;
        dgTest.Rows[i].Visible = true;
    }
    else
    {
        dgTest.Rows[i].Visible = false;
        dgTest.Rows[i].Selected = false;
    }
} 
```

# numpy - 根据范围内的值过滤numpy数组中的行

> ID：13066249
> 
> 赞同：20
> 
> 时间：2012-10-25T10:08:09.323
> 
> 标签：numpy, range

让一个数组：

```
 a =np.array([[1,2],[3,-5],[6,-15],[10,7]]) 
```

要获得第二列元素高于 -6 的行，可以这样做

```
>>> a[a[:,1]>-6]
array([[ 1,  2],
   [ 3, -5],
   [10,  7]]) 
```

但是如何在 -6;3 之间获得第二个元素的行？我试过：

```
>>> a[3>a[:,1]>-6] 
```

还有（这会引发错误）：

```
>>> np.ma.masked_inside(a,-6,3) 
```

这使：

```
 masked_array(data =
 [[-- --]
  [-- --]
  [6 -15]
  [10 7]],
         mask =
  [[ True  True]
  [ True  True]
  [False False]
  [False False]],
   fill_value = 999999) 
```

但结果不是太清楚

谢谢 jp

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-25T10:28:09.623

```
>>> a[ (-6<a[:,1]) & (a[:,1]<3) ]

array([[ 1,  2],
      [ 3, -5]]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T16:07:26.383

将`np.ma.masked_inside(a, -6, 3)`创建一个[`MaskedArray`](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)对象，其中 -6 和 3 之间的值被屏蔽（即标记为无效）。换句话说，您正在过滤**掉**-6 和 3 之间的值。相反，您应该使用`np.ma.masked_outside(a, -6, 3)`：

```
>>> a = np.array([[1,2],[3,-5],[6,-15],[10,2]])
>>> np.ma.masked_outside(a,-6,3)
>>> masked_array(data =
 [[1 2]
 [3 -5]
 [-- --]
 [-- 2]],
             mask =
 [[False False]
 [False False]
 [ True  True]
 [ True False]],
       fill_value = 999999) 
```

请注意，使用此函数，您将逐个元素地过滤掉整个数组，这不是您想要的。

迄今为止，另一种解决方案中给出的索引方法是最简单易懂的。

# facebook - Facebook Like按钮在点击时消失

> ID：13066250
> 
> 赞同：1
> 
> 时间：2012-10-25T10:08:09.127
> 
> 标签：facebook, facebook-like

当用户单击按钮时，like 按钮会消失。使用的代码

```
<div id="fb-root" style="display:none">1</div>
    <script>
      (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
    <div class="winefacebook" style="float:left;">
      <fb:like send="false" layout="button_count" show_faces="false" >.</fb:like>
</div> 
```

任何人都可以提出解决此问题的方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:41:38.223

据我了解，Facebook Like 按钮现在由于一些小系统问题而出现问题。这个错误经常在他们的支持论坛上报告。恐怕在他们解决此问题之前，您无法对此做任何事情。
我唯一能建议的是用他们的调试器检查你的网站[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug) 祝你好运。

# prestashop - 如何在 Prestashop 1.5 的后台无法使用 Ajax 类别

> ID：13066252
> 
> 赞同：0
> 
> 时间：2012-10-25T10:08:11.520
> 
> 标签：prestashop

我想在“AdminProduct”（PRESTASHOP 1.5 的后台）上禁用 Treeview 类别的 ajax。

我需要及时显示所有类别。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T08:09:19.280

不确定这是否是您要查找的内容，但在后台 - 模块 - 类别块中，您可以选择禁用“激活子级别的动态（动画）模式。”。

我相信这可能是您正在寻找的。

祝你好运

# .htaccess - 在codeigniter中重写url

> ID：13066255
> 
> 赞同：0
> 
> 时间：2012-10-25T10:08:17.003
> 
> 标签：.htaccess, codeigniter

我的 codeigniter 网站当前网址是 www.websitename.com/fronend/deals/index/all/all。（注：frontend是controller里面的文件夹，deals是controller）

我想使用 htaccess 将其更改为 www.websitename.com/deals/。我尝试了一些代码但无法做到这一点。是否可以使用 htaccess 更改它。

以前，我使用以下 htaccess 代码从我的 codeigniter 站点的 url 中删除了 index.php。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L,QSA] 
```

这工作正常。所以我认为，我需要为此添加一些重写规则。

你能解释一下怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:14:23.327

你不需要htaccess

在

```
.\application\config\routs.php 
```

添加

```
$route['deals'] = "fronend/deals/index/all/all"; 
```

# google-maps - 检查点是否存在于谷歌地图中的多边形中

> ID：13066265
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:08:55.790
> 
> 标签：google-maps

这是我的代码：

```
var posmark = markerarr["535413"].getPosition();
console.log(posmark);
// **Console.log** ▲
   Ya: 41.64272
   Za: 41.65764999999999
// 

var posshp = poli_arr.s1; 
console.log(posshp);
// **Console.log** ▲
 Zl: yo
 __e3_: Object
 __gm_id: 252
 b: null
 center: P
 fillColor: "#FF0000"
 fillOpacity: 0.35
 gm_accessors_: Object
 map: null
 radius: 100
 strokeColor: "#FF0000"
 strokeOpacity: 0.8
 strokeWeight: 2
 __proto__: c
//

 var res = google.maps.geometry.poly.containsLocation(posmark, posshp);
 console.log(res);
//**Console.log** ▲
Uncaught TypeError: Cannot call method 'getLength' of undefined

// 
```

问题在哪里？我无法修复它...我想检查标记是否存在于多边形区域中。如果有人知道将标记检查到 poligon 半径的更好方法，请重播我如何才能做得更好。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:01:50.177

[google.maps.geometry.poly](https://developers.google.com/maps/documentation/javascript/reference#poly)库仅适用于[Polygons](https://developers.google.com/maps/documentation/javascript/reference#Polygon)，不适用于[Circles](https://developers.google.com/maps/documentation/javascript/reference#Circle)。

尽管您当然没有在问题中提供足够的信息来回答它。

要检查一个点是否在圆内，请使用[distanceBetween](https://developers.google.com/maps/documentation/javascript/geometry#Distance)，如果该点与圆心之间的距离小于或等于圆的半径，则该点在圆内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:50:50.047

简单的方法是这段代码经过测试并且工作正常：

```
 function API_CONT_UPD(){
    //geting marker objects
    for (element in markerarr){
    //geting marker positions
    var pos = markerarr[element].getPosition();
    //geting shape objects
    for (element2 in poli_arr){
    //check position if is into shape
    if(poli_arr[element2].getBounds().contains(pos) == true){
    var unit = wialon.core.Session.getInstance().getItem(element);
    console.log(unit.getName());

    } //if close

}//shape for statment

} //marker for statment

}//function close 
```

# javascript - 如何立即开始投票？

> ID：13066266
> 
> 赞同：0
> 
> 时间：2012-10-25T10:08:55.763
> 
> 标签：javascript, polling

我正在尝试使用轮询进行一次每隔 15 秒执行一次的小检查。

```
setInterval(function(){
            $.ajax({ url: "aaa.com",
                success: function(data){
                showUpdate(data);
              }, dataType: "text"});
            }, 15000); 
```

但这意味着在轮询开始之前有 15 秒的初始延迟，这在我的情况下是不希望的。如何强制投票立即开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:10:39.953

当简单的解决方案完成工作时，不要寻找智能解决方案：

```
function check() {
   $.ajax({ url: "aaa.com",
     success: function(data){
     showUpdate(data);
   }, dataType: "text"});
}
check();
setInterval(check, 15000); 
```

或者，我通常更喜欢

```
function check() {
   $.ajax({ url: "aaa.com",
     success: function(data){
        showUpdate(data);
        setTimeout(check, 15000);
   }, dataType: "text"});  
}
check(); 
```

因为在延迟响应的情况下不会有一堆调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:12:19.600

无需考虑使用回调函数来处理调用之间的延迟的稍微复杂一点的想法，最简单的方法是将函数移到命名函数并在第一次手动调用它

```
function doSomething() {

$.ajax({ url: "aaa.com",
                success: function(data){
                showUpdate(data);
              }, dataType: "text"});

}

doSomething();

setInterval(doSomething, 15000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:12:28.017

怎么样：

```
function immediatePoll(f, interval) {
    f();
    setInterval(f, interval);
}

immediatePoll(function(){
        $.ajax({ url: "aaa.com",
            success: function(data){
            showUpdate(data);
          }, dataType: "text"});
        }, 15000); 
```

# winapi - 将列表视图项从一个组移动到另一个组

> ID：13066267
> 
> 赞同：0
> 
> 时间：2012-10-25T10:09:09.990
> 
> 标签：winapi, mfc, wtl

我在 Win32 中创建了一个启用组视图的列表视图，我可以将项目添加到一个组，但是我有多个组，我希望一个项目从组 A 传递到组 B。我找到了宏 ListView_MoveItemToGroup，我称之为所以

```
int i =0;
i = m_taskList.GetSelectedIndex();

bool ret = ListView_MoveItemToGroup(m_taskList.m_hWnd,i,LVI_GROUPID_EXEC); 
```

但 ret 是假的；我做错了什么，将 LVI_GROUP_EXEC 添加到 litview 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:33:23.917

如果成功则`LVM_MOVEITEMTOGROUP`返回消息，否则返回失败，或者消息本身失败，或者更有可能在您的 Windows 版本上无法识别。用于区分消息失败和失败。`TRUE``FALSE``SendMessage()``GetLastError()``SendMessage()`

如果您没有看到组之间的项目跳转，您可能必须先从 ListView 中删除该项目，然后使用所需的组重新添加它。

# c# - 来自 C# 客户端的 Apache NTLM Auth 不适用于自定义 NetworkCredentials

> ID：13066270
> 
> 赞同：2
> 
> 时间：2012-10-25T10:09:26.493
> 
> 标签：c#, httpwebrequest, networkcredentials

我有一个使用`HttpWebRequest`.

在我通过的域内`CredentialCache.DefaultNetworkCredentials`，一切都很好。在域外，用户需要提供用户名、域和密码。这不起作用。

其中部分代码：

```
CookieContainer cookies = new CookieContainer();

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = WebRequestMethods.Http.Post;
request.AllowAutoRedirect = true;
request.CookieContainer = cookies; // provide session cookie to handle redirects of login controller of the webservice

if (isWindowAuthentication) // isWindowAuthentication is set earlier by config
{
  if (Common.UserName.Length > 0)
  {
    string[] domainuser;
    string username;
    string domain;

    if (Common.UserName.Contains("@"))
    {
      domainuser = Common.UserName.Split('@');
      username = domainuser[0];
      domain = domainuser[1];
    }
    else
    {
      domainuser = Common.UserName.Split('\\');
      username = domainuser[1];
      domain = domainuser[0];
    }
    NetworkCredential nc = new NetworkCredential(username, Common.Password, domain);
    CredentialCache cache = new CredentialCache();
    cache.Add(request.RequestUri, "NTLM", nc);
    request.Credentials = cache;
  }
  else
  {
    request.Credentials = CredentialCache.DefaultNetworkCredentials;
  }
} 
```

后来我做了请求`request.GetResponse();`。如果我使用`CredentialCache.DefaultNetworkCredentials`，那么一切正常。当我切换到我自己的`new NetworkCredential()`部分时，身份验证失败。

我检查了 Apache 的日志（它是使用 SSPI mod 的 Apache 2.2）。当它成功时，第一个请求重定向到登录控制器，然后登录控制器请求凭据。通过并工作（重定向到目标站点）。

日志 1（作品）：

```
192.168.14.9 - - [25/Oct/2012:11:35:35 +0200] "POST /ror/ioi/start?document%5Bguid%5D=%7Be3d8f1de-10f2-4493-a0c0-97c2acb034e6%7D HTTP/1.1" 302 202
192.168.14.9 - - [25/Oct/2012:11:35:35 +0200] "GET /ror_auth/login?ror_referer=%2Fror%2Fioi%2Fstart%3Fdocument%255Bguid%255D%3D%257Be3d8f1de-10f2-4493-a0c0-97c2acb034e6%257D HTTP/1.1" 401 401
192.168.14.9 - - [25/Oct/2012:11:35:35 +0200] "GET /ror_auth/login?ror_referer=%2Fror%2Fioi%2Fstart%3Fdocument%255Bguid%255D%3D%257Be3d8f1de-10f2-4493-a0c0-97c2acb034e6%257D HTTP/1.1" 401 401
192.168.14.9 - rausch [25/Oct/2012:11:35:35 +0200] "GET /ror_auth/login?ror_referer=%2Fror%2Fioi%2Fstart%3Fdocument%255Bguid%255D%3D%257Be3d8f1de-10f2-4493-a0c0-97c2acb034e6%257D HTTP/1.1" 302 156 
```

这里自己的凭证结果 Log 2（不起作用）：

```
192.168.14.9 - - [25/Oct/2012:12:05:23 +0200] "POST /ror/ioi/start?document%5Bguid%5D=%7B6ac54e8a-19f1-4ccd-9684-8d864dd9ccf7%7D HTTP/1.1" 302 202
192.168.14.9 - - [25/Oct/2012:12:05:23 +0200] "GET /ror_auth/login?ror_referer=%2Fror%2Fioi%2Fstart%3Fdocument%255Bguid%255D%3D%257B6ac54e8a-19f1-4ccd-9684-8d864dd9ccf7%257D HTTP/1.1" 401 401 
```

我不明白的是，当我检查时，例如`CredentialCache.DefaultNetworkCredentials.UserName`然后是空的。

任何人都知道该怎么做以及如何正确设置自己的凭据以使身份验证按预期工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:23:38.413

最后经过大量测试和调查以及堆栈溢出的许多资源后，我发现了发生了什么。

问题似乎是`httpwebrequest`当网站的部分请求凭据而有些不处理时，不处理身份验证。

**背景：**

我们的网站有自己的会话管理，并在没有有效会话可用时重定向到登录控制器。只有此登录控制器设置为 NTLM 身份验证。

我们之所以这样做是因为我们有一个根本没有 NTLM 身份验证的网站（IE 中没有 401、302 请求循环！）并且只验证一次（并且我们在不同的 url 上处理身份验证以防止 IE 在未经身份验证时停止发布数据的问题网站 => 见[http://support.microsoft.com/?id=251404](http://support.microsoft.com/?id=251404)）。

**解决方案：**

我通常在我的目标页面上发送一个请求，然后网络服务器重定向、验证并重定向回目标。由于如果我有自己的凭据集（请参阅上面的问题代码），httpwebrequest 不会出于任何原因处理此问题，因此我更改为代码以对我的登录控制器进行一次身份验证并将会话存储在 cookie 容器中。

对于所有以下请求，我不再进行身份验证。我添加了 cookie 容器，我的服务器获得了一个有效的会话。所以我不必再进行身份验证了。副作用是这种方式的性能更好。

另一个棘手的事情是，我不仅使用了 httpwebrequest，还使用了 webform 控件。因此，我找到了在此处添加自己的 cookie 会话的解决方案：[在 WebBrowser 中使用来自 CookieContainer 的 cookie](https://stackoverflow.com/questions/4185171/use-cookies-from-cookiecontainer-in-webbrowser)（感谢 Aaron，他也为我节省了很多麻烦）。

# magento - magento 1.5 索引并添加到 购物车缓慢

> ID：13066275
> 
> 赞同：1
> 
> 时间：2012-10-25T10:09:42.250
> 
> 标签：magento, magento-1.5

我刚刚在我的 1.5 magento 商店上安装了一个自定义模块（PISC VAT），突然之间，索引页面以及网站的添加到购物车功能都很慢（就像在本地设置上花费超过 5 分钟一样）。

有人可以解释一下我如何调试应用程序以找出导致它变慢的原因吗？

问候

# delphi - DataSnap Rest 服务器 windows 服务

> ID：13066278
> 
> 赞同：6
> 
> 时间：2012-10-25T10:09:45.230
> 
> 标签：delphi, delphi-xe2, datasnap

我正在尝试构建作为 Windows 服务运行的 DataSnap Rest 应用程序，但向导只有“独立 VCL 应用程序”、“独立控制台应用程序”和“ISAPI 动态链接库”（我使用的是 Delphi XE2企业）。有人可以帮助我。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T11:35:27.113

如果 DataSnap REST 向导具有创建 Windows 服务的选项（否则您将如何运行应用程序服务器？）会更方便，但您可以稍微摆弄一下来解决它。

我第一次遇到这种情况时，我创建了一个常规 DataSnap REST 服务器作为 VCL 应用程序和一个常规 Windows 服务，并将相关部分从 REST 服务器复制到该服务。只需确保服务的输出目录与 VCL 应用程序的目录相同。

服务的 .dpr 可能如下所示：

```
program Service;

uses
  Vcl.SvcMgr,
  Web.WebReq,
  IdHTTPWebBrokerBridge,
  WebModuleUnit1 in '..\GUI\WebModuleUnit1.pas' {WebModule1: TWebModule},
  ServerMethodsUnit1 in '..\GUI\ServerMethodsUnit1.pas' {ServerMethods1: TDSServerModule},
  ServerContainerUnit1 in '..\GUI\ServerContainerUnit1.pas' {ServerContainer1: TDataModule},
  Unit1 in 'Unit1.pas' {Service1: TService};

{$R *.RES}

begin
  if not Application.DelayInitialize or Application.Installing then
    Application.Initialize;

  if WebRequestHandler <> nil then
    WebRequestHandler.WebModuleClass := WebModuleClass;

  Application.CreateForm(TService1, Service1);
  Application.Run;
end. 
```

该服务的主要单元可能如下所示：

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Classes,
  Vcl.Graphics, Vcl.Controls, Vcl.SvcMgr, Vcl.Dialogs,
  IdHTTPWebBrokerBridge, Web.HTTPApp;

type
  TService1 = class(TService)
    procedure ServiceCreate(Sender: TObject);
    procedure ServiceExecute(Sender: TService);
    procedure ServiceStart(Sender: TService; var Started: Boolean);
    procedure ServiceStop(Sender: TService; var Stopped: Boolean);
  private
    FServer: TIdHTTPWebBrokerBridge;
    procedure TerminateThreads;
  public
    function GetServiceController: TServiceController; override;
  end;

var
  Service1: TService1;

implementation

{$R *.DFM}

uses
  //Datasnap.DSService;  // XE2
  Datasnap.DSSession;  // XE3

procedure ServiceController(CtrlCode: DWord); stdcall;
begin
  Service1.Controller(CtrlCode);
end;

{ TService1}

function TService1.GetServiceController: TServiceController;
begin
  Result := ServiceController;
end;

procedure TService1.ServiceCreate(Sender: TObject);
begin
  FServer := TIdHTTPWebBrokerBridge.Create(Self);
end;

procedure TService1.ServiceExecute(Sender: TService);
begin
  while not Terminated do
  begin
    Sleep(1000);
    ServiceThread.ProcessRequests(False);
  end;
end;

procedure TService1.ServiceStart(Sender: TService; var Started: Boolean);
begin
  if not FServer.Active then
  begin
    FServer.Bindings.Clear;
    FServer.DefaultPort := 8080;
    FServer.Active := True;
  end;
end;

procedure TService1.ServiceStop(Sender: TService; var Stopped: Boolean);
begin
  TerminateThreads;
  FServer.Active := False;
  FServer.Bindings.Clear;

  ServiceThread.Terminate;
end;

procedure TService1.TerminateThreads;
begin
  if TDSSessionManager.Instance <> nil then
    TDSSessionManager.Instance.TerminateAllSessions;
end;

end. 
```

# emacs - Org-mode : 自定义议程命令 TODO 状态更改日志而不重复相同的 TODO

> ID：13066281
> 
> 赞同：2
> 
> 时间：2012-10-25T10:09:50.440
> 
> 标签：emacs, org-mode

我在“完成”状态更改时使用“注释和时间戳”。在我的自定义议程命令中，我定义了我想查看状态更改日志。但似乎我仍然看到原来的重复 TODO。我只想查看状态更改日志。

我尝试了两种不同的配置。第一个不提供状态更改，第二个提供状态更改日志但也会重复。

任何想法如何修剪议程以仅显示状态更改日志？

* * *

“company.org”中的 TODO 条目：

```
* 议程
** TODO Acronis : 备份检查 :DAILY:
预定：
:日志:
- 从“TODO”中声明“DONE” [2012-10-25 Thu 10:31] \\
  将“自豪”恢复为中央存储。询问有关 RAM 升级的问题。定于周一。
：结尾：
：特性：
:LAST_REPEAT: [2012-10-25 星期四 10:31]
：结尾：

```

* * *

TODO 状态变化顺序：

```
;; '！' （用于时间戳）或“@”（用于带有时间戳的注释）
(setq org-todo-keywords
       '((序列“TODO(t)”“PROJ(p)”“APPT(a)”“|”“DONE(d@)”)))

```

自定义议程命令：

```
（“c”议程“公司 60”
     (
      (org-agenda-files '("~/shoebox/read/org/company.org"))
      （组织议程第 60 天）
      (org-deadline-warning-days 7)
      (org-agenda-sorting-strategy '(time-up todo-state-up priority-down))
      （组织议程时间网格无）
      (org-agenda-repeating-timestamp-show-all nil)
      （组织议程显示日志 t）
      （组织议程日志模式项目'（状态））
      (org-agenda-show-all-dates nil) ;; 只显示有东西的日子
      (org-agenda-skip-function '(org-agenda-skip-entry-if 'notregexp ":DAILY:"))
      ))

```

产生：

```
60 天议程（W43-W51）：
2012 年 10 月 25 日星期四
  公司：10:00...... 预定：TODO Acronis：备份检查：每日：

```

然而：

```
    ("c" "公司 60"
     （（议程 ””））
     (
      (org-agenda-files '("~/shoebox/read/org/company.org"))
      （组织议程第 60 天）
      (org-deadline-warning-days 7)
      (org-agenda-sorting-strategy '(time-up todo-state-up priority-down))
      （组织议程时间网格无）
      (org-agenda-repeating-timestamp-show-all nil)
      （组织议程显示日志 t）
      （组织议程日志模式项目'（状态））
      (org-agenda-show-all-dates nil) ;; 只显示有东西的日子
      (org-agenda-skip-function '(org-agenda-skip-entry-if 'notregexp ":DAILY:"))
      ))

```

产生：

```
60 天议程（W43-W51）：
2012 年 10 月 25 日星期四
  公司：10:00...... 预定：TODO Acronis：备份检查：每日：
  公司：10:31...... 状态：（完成）待办事项 Acronis：备份检查 - 将“自豪”恢复到中央存储。询问有关 RAM 升级的问题。定于周一。：日常的：

```

# sorting - 如何根据计算 Rails 对记录进行排序

> ID：13066283
> 
> 赞同：0
> 
> 时间：2012-10-25T10:09:51.597
> 
> 标签：sorting, ruby-on-rails-3.2

我的数据库表中有一个名为信誉的字段。

它包含一个哈希。

乙`xample: {:kout => 20, :google => 40 } etc...`

当我得到记录时，我想根据使用该哈希属性中的值执行的计算对它们进行排序。

我是一个菜鸟，不知道该怎么做。

欢迎任何想法。

导轨 3.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:52:07.737

尝试这个

[http://www.rubyinside.com/how-to/ruby-sort-hash](http://www.rubyinside.com/how-to/ruby-sort-hash)

打开控制台并试试这个

```
h = {"a"=>100, "b"=>200, "c"=>150}
1.9.3p125 :023 > h.values.sort
=> [100, 150, 200] 
1.9.3p125 :024 > h.keys.sort
=> ["a", "b", "c"] 
```

# matlab - 第 2 行和第 1 行的区别

> ID：13066286
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:10:02.110
> 
> 标签：matlab

我有一个包含 n 行正负值的列矩阵。我想要第 2 行和第 1 行、第 3 行和第 2 行之间的区别，依此类推。我应该需要单列中的差异

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-25T10:30:31.533

你想如何衡量差异？如果不使用合适的规范，您无法在一列中获得所有这些差异，请尝试“帮助规范”

```
[n,m]= size(A);
d=zeros(1,n)
for k= 1:n-1
    d(k) = norm(A(k,:))-norm(A(k+1,:));
end 
```

输出存储在列向量 d 中。

# javascript - 如何使用 java 脚本或 jquery 添加和删除 html 元素？

> ID：13066287
> 
> 赞同：0
> 
> 时间：2012-10-25T10:10:04.853
> 
> 标签：javascript, jquery, html

我的 html 页面中有许多复选框元素

```
<input type='checkbox' class='txtshow'checked="checked\" id='someid1' name='checkMr[]' value='some value' >
<input type='checkbox' class='txtshow'checked="checked\" id='someid2' name='checkMr[]' value='some value' >
<input type='checkbox' class='txtshow'checked="checked\" id='someid3' name='checkMr[]' value='some value' > 
```

1.  我想要的是，每当动态检查其中任何一项时，都应将一个元素 input type='checkbox' 添加到 html 页面。
2.  如果未选中，则删除添加的元素。
3.  不应重复相同的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:17:28.897

在点击事件上，检查复选框是否被选中。如果是，则添加一个复选框，如果未选中，则删除该复选框。使用与父级相关的 id 将它们链接在一起：

```
$(".txtshow").click(function() {
    if ($(this).is(":checked")) {
        newCheck = $("<input type=checkbox id='" + $(this).attr("id") + "-child' />")
        $("body").append(newCheck);
    }
    else {
        $("#" + $(this).attr("id") + "-child").remove();
    }
});​ 
```

小提琴：http: [//jsfiddle.net/nyZj6/6/](http://jsfiddle.net/nyZj6/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:17:21.623

你可以这样做：

```
$( '.txtshow' ).change(function(){
    var id = $(this).attr( 'id' );
    if( $(this).is(':checked') ){
        $( '<p id="element_' + id + '"></p>' ).appendTo( $( 'body' ) ); 
    } else {
        $( '#element_' + id + ' ).remove(); 
    }
}); 
```

在这种情况下，您使用该自定义 ID 创建 ap 元素。您可以根据需要更改该属性。

# iphone - LinkedIn 邀请 API 错误 401 [未经授权]-iPhone sdk

> ID：13066297
> 
> 赞同：4
> 
> 时间：2012-10-25T10:10:26.527
> 
> 标签：iphone, ios, ios5, ios4, linkedin

我正在使用 OAuth-Sample-Client 代码通过 Linked Invitation API 从电子邮件地址发送邀请。我创建了与开发人员站点中描述的相同的主体，但现在我收到 401 错误，我已经搜索了很多，但没有得到任何解决方案让我从任何站点或论坛中摆脱它。我的回复如下。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<error>
  <status>401</status>
  <timestamp>1351159386437</timestamp>
  <request-id>YX4NRU3S7J</request-id>
  <error-code>0</error-code>
  <message>[unauthorized]. OAU:ron8e8nko3te|e0a96317-dfdc-44fb-b427-5655e02f97ed|*01|*01:1351159294:dRCDN6b3K9F/mwWAaByKZQPgeVw=</message>
</error> 
```

这里我的 json 字符串是这样的：

> {"body":"说是！","subject":"连接邀请。","re​​cipients":{"values":[{"person":{"first-name":"test","last -name":"test","_path":"/people/email=test@test.com"}}]},"item-content":{"invitation-request":{"connect-type":"朋友”}}}

我已使用以下代码发送邀请。

```
- (IBAction)postButton_TouchUp:(UIButton *)sender
{    
    [statusTextView resignFirstResponder];
    NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/mailbox"];
    OAMutableURLRequest *request = 
    [[OAMutableURLRequest alloc] initWithURL:url
                                    consumer:oAuthLoginView.consumer
                                       token:oAuthLoginView.accessToken
                                    callback:nil
                           signatureProvider:[[OAHMAC_SHA1SignatureProvider alloc] init]];

    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    NSDictionary *temp=[[NSDictionary alloc]initWithObjectsAndKeys:@"/people/email=test@test.com",@"_path",@"test",@"first-name",@"test",@"last-name", nil];
    NSDictionary *temp2=[[NSDictionary alloc] initWithObjectsAndKeys:temp,@"person",nil];
    NSArray *arr2=[[NSArray alloc]initWithObjects:temp2, nil];
    NSDictionary *value=[[NSDictionary alloc]initWithObjectsAndKeys:arr2,@"values", nil];
    NSDictionary *dict3=[[NSDictionary alloc]initWithObjectsAndKeys:@"friend",@"connect-type",nil];
    NSDictionary *dict4=[[NSDictionary alloc] initWithObjectsAndKeys:dict3,@"invitation-request", nil];
    NSDictionary *dict=[[NSDictionary alloc]initWithObjectsAndKeys:dict4,@"item-content",@"Say yes!",@"body",@"Invitation to connect.",@"subject",value,@"recipients", nil];
    NSLog(@"%@",[dict description]);
    NSString *updateString = [dict JSONString];
    [request setHTTPBodyWithString:updateString];
    [request setHTTPMethod:@"POST"];

    OADataFetcher *fetcher = [[OADataFetcher alloc] init];
    [fetcher fetchDataWithRequest:request
                         delegate:self
                didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)
                  didFailSelector:@selector(postUpdateApiCallResult:didFail:)];    
    [request release];
} 
```

我被困在这一点上，请让我摆脱困境。-提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:45:01.743

手动调用 OADataFetcher 的 prepare 方法。只需在设置请求正文之前放置即可。

```
[request prepare];
[request setHTTPBodyWithString:updateString]; 
```

这对我有用。当您使用 Invitation API 时，还要从 OADataFetcher 中删除 prepare 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:10:21.010

苹果的代码有效！还有一件事，不要忘记任何标题。我仍然收到相同的消息，结果我忘记添加 x-li-format 和 Content-type 标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:02:43.563

我从这个[Linkedin 线程得到了解决方案](http://developer.linkedin.com/thread/2856?page=1#comment-23330)

您只需要对代码进行一些更改：

```
NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/mailbox"];

    OAMutableURLRequest *request =
    [[OAMutableURLRequest alloc] initWithURL:url
    consumer:oAuthLoginView.consumer
    token:oAuthLoginView.accessToken
    callback:nil
    signatureProvider:nil];
    [request setHTTPMethod:@"POST"];
    NSString *messageToPerson = @"/people/email=target@gmail.com";
    NSDictionary *person = [[NSDictionary alloc] initWithObjectsAndKeys:[[[NSDictionary alloc] initWithObjectsAndKeys:messageToPerson,@"_path",@"TargetFirstName",@"first-name",@"TargetSecondName",@"last-name",nil] autorelease], @"person",nil]; 
    NSArray *valueArray = [[NSArray alloc] initWithObjects:person,nil];
    NSDictionary *values = [[NSDictionary alloc] initWithObjectsAndKeys:valueArray,@"values", nil];
    NSDictionary *ir = [[NSDictionary alloc] initWithObjectsAndKeys:[[[NSDictionary alloc] initWithObjectsAndKeys:@"friend",@"connect-type",nil] autorelease], @"invitation-request",nil];
    NSDictionary *ic = [[NSDictionary alloc] initWithObjectsAndKeys:ir,@"item-content", nil];
    NSDictionary *update = [[NSDictionary alloc] initWithObjectsAndKeys:values,@"recipients",@"Invitation",@"subject",@"ConnectWithMe",@"body", ir, @"item-content", nil];
    [request setValue:@"json" forHTTPHeaderField:@"x-li-format"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    NSLog(@"%@",[update description]);
    NSString *updateString = [update JSONString];

    [request prepare];

    [request setHTTPBodyWithString:updateString];

    OADataFetcher *fetcher = [[OADataFetcher alloc] init];
    [fetcher fetchDataWithRequest:request delegate:self             didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)             didFailSelector:@selector(postUpdateApiCallResult:didFail:) withId:1];

    [request release]; 
```

并且在`oAdata OADataFetcher.m`

```
- (void)fetchDataWithRequest:(OAMutableURLRequest *)aRequest delegate:(id)aDelegate didFinishSelector:(SEL)finishSelector didFailSelector:(SEL)failSelector  withId:(int)idtm         {
         [request release];         
request = [aRequest retain];
         delegate = aDelegate;         
didFinishSelector = finishSelector;
         didFailSelector = failSelector;

//note this change
         if (idtm!=1) {
            [request prepare];         
       }

connection = [[NSURLConnection alloc] initWithRequest:aRequest delegate:self];         
} 
```

试试这个。肯定会工作。希望这将有助于未来的游客。

问候

# java - 删除目录java中的文件类型

> ID：13066300
> 
> 赞同：-2
> 
> 时间：2012-10-25T10:10:36.213
> 
> 标签：java, file, error-handling, directory, delete-file

如何删除目录/文件夹中的文件

我正在使用这段代码：

```
private static final String FILE_DIR = "data\\session";
private static final String FILE_TEXT_EXT = ".cache";

private void DeleteCache(String folder, String ext){
        GenericExtFilter filter = new GenericExtFilter(ext);
        File dir = new File(folder);
         File fileDelete;
        String[] list = dir.list(filter);
        for(String file : list){
            String temp = new StringBuffer().append(File.separator).append(file).toString();
            fileDelete = new File(temp);
            boolean isDelete=fileDelete.delete();
            System.out.println("File : "+temp+"is Delete : "+isDelete);
        }

        if(list.length == 0 ) return;
    }
    public class GenericExtFilter implements FilenameFilter{
        private String ext;
        public GenericExtFilter(String ext){
            this.ext=ext;
        }
        public boolean accept (File dir, String name){
            return (name.endsWith(ext));
        }
    } 
```

但是为什么是的，如果，缓存不想被删除示例错误

> 文件：\31052012-TPBSDERG.cache -is 删除：假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:16:46.577

可能是因为该文件不存在。

尝试使用....

```
File[] list = dir.listFiles(filter); 
```

反而

**更新**

无法删除文件的原因有很多。实际进程取决于底层操作系统，但最常见的原因是，文件被另一个进程（或您的程序）打开，您没有删除文件的正确权限和/或文件没有存在。

您的代码存在许多有趣的问题...

```
String temp = new StringBuffer().append(File.separator).append(file).toString(); 
```

这是在文件上附加一个文件分隔符，现在说“在当前驱动器的根目录中查找文件”，这（可能）不是文件所在的位置。

例如;

```
File dir = new File(System.getProperty("user.home"));
String[] list = dir.list(filter);
for(String file : list){
    String temp = new StringBuffer().append(File.separator).append(file).toString();
    System.out.println(temp + " - " + new File(temp).exists());
} 
```

这会输出类似...

```
/.bash_history - false
/.CFUserTextEncoding - false
/.config - false
/.cups - false 
```

这显然是错误的，这些文件不在根文件夹中

同样，如果我这样做；

```
File dir = new File(System.getProperty("user.home"));
String[] list = dir.list(filter);
for(String file : list){
    System.out.println(file + " - " + new File(file).exists());
} 
```

这会输出类似...

```
.bash_history - false
.CFUserTextEncoding - false
.config - false
.cups - false 
```

这同样没用，因为这些文件也不存在于当前执行位置......

但是，现在，如果我做类似...

```
String folder = System.getProperty("user.home");
File[] list = new File(folder).listFiles();     
for (File file : list) {
    System.out.println(file + " - " + file.exists());
} 
```

我得到...

```
/path/to/home/.bash_history - true
/path/to/home/.CFUserTextEncoding - true
/path/to/home/.config - true
/path/to/home/.cups - true 
```

显然，这更有用。

您必须记住，Java 是愚蠢的，它不知道当您`String`为要查找该文件的名称指定值时，它会根据您当前的位置做出假设（当然，除非您指定绝对路径）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:16:55.783

使用此文件删除（不要在前面加上`File.separator`，父文件夹才是最重要的）：

```
fileDelete = new File( dir, file ); 
```

它会起作用。`dir.list(filter)`只返回不带路径的文件名（例如目录名），如果`dir`不是当前工作目录，`new File( file )`则不会指向包含它的文件，`new File( dir, file )`将。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:17:21.517

您正在遍历 中的文件列表`folder`，但这**不是**您尝试从中删除文件的地方。
顺便说一句：“31052012-TPBSDERG.cache -”是实际文件名吗？？？

# android - 您必须在 Manifest.xml 中包含 AdActivity

> ID：13066304
> 
> 赞同：3
> 
> 时间：2012-10-25T10:10:41.017
> 
> 标签：android

我收到一个错误，您必须在清单文件中声明 AdActivity。我什至这样做了，我遵循了所有步骤，但仍然出现错误。请有人帮忙，这是我的代码和 xml 和清单文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="fill" >

 <com.google.ads.AdView
    android:id="@+id/googleAd"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button3"
    ads:adSize="BANNER"
    ads:adUnitId="i_don't_want_to_share_my_id"
    ads:loadAdOnCreate="true" >
</com.google.ads.AdView> 
```

清单文件。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.admob"
android:installLocation="auto"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
</uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />

    <activity
        android:name=".Main"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我还包含了最新的 admob jar 文件。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:22:58.490

```
<activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />

change the above code to

<activity
        android:name="com.example.admob.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:11:30.923

在 configChanges 中使用它

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

还要在项目的 project.properties 中调整目标属性。这应该至少是 13。

```
target=android-13 
```

希望这会有所帮助。

# c# - BackgroundWorker 中只有 2 个进度条中的 1 个得到更新

> ID：13066306
> 
> 赞同：6
> 
> 时间：2012-10-25T10:10:46.323
> 
> 标签：c#, .net, winforms, backgroundworker

我有一个简单的表单，上面有 2 个进度条和 1 个后台工作人员。我有 2 个循环（一个在另一个循环中），一旦增加，我想报告每个循环的进度。这是我的代码：

```
private void buttonStart_Click(object sender, EventArgs e)
{
    workerCustomers.RunWorkerAsync();
}

private void workerCustomers_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar1.Value = e.ProgressPercentage;
    progressBar2.Value = (int)e.UserState;
}

private void workerCustomers_DoWork(object sender, DoWorkEventArgs e)
{
    for (int customer = 0; customer < 50; customer++)
    {
        int customerPercentage = ++customer * 100 / 50;
        workerCustomers.ReportProgress(customerPercentage, 0);

        for (int location = 0; location < 500; location++)
        {
            int locationPercentage = ++location * 100 / 500;
            workerCustomers.ReportProgress(customerPercentage, locationPercentage);
        }

        workerCustomers.ReportProgress(customerPercentage, 0);
    }
} 
```

当程序运行时，progressbar1 会更新得很好，但progressbar2 永远不会移动。如果我通过调试器运行它，我可以看到progressbar2 的值正在改变，只是图形上没有变化。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T11:08:18.567

是的，如果您在桌面上启用了 Aero，第二个进度条将无法更新。它提供了动画进度条，默认情况下是绿色的，带有旅行高亮笔记。

这种进度条样式很特殊，它插入中间值并且总是看起来很平滑，即使您将课程值分配给 Value 属性也是如此。换句话说，您可以分配 10、20、30 等，但条不会跳。它平滑地增加了杆的长度。

这有副作用。要使此动画正常工作，进度条必须**滞后**。换句话说，它总是显示一个*低于*编程值的值。并且必须经过一段时间才能将条形长度平滑地增加到编程值。

您需要了解的另一个细节：当您*减小*Value 属性时，*不会发生此动画，它会立即跳过条形长度。*

 *所以问题是您正在以非常高的速率更新 Value 属性，比条形插入的速度要快得多。它永远赶不上。除非您在 0 处重新开始，否则会立即跳杆。比率如此之高，以至于动画永远无法达到 1。

您可以通过在内部循环中插入以下语句来看到这一点：

```
 System.Threading.Thread.Sleep(1); 
```

使用参数值，您可能需要将其增加到 16 才能看到任何差异。你做得越高，通过插值使酒吧越远。

这当然不是一个真正的问题，这是因为您的工人没有做任何真正的工作。一旦您开始编写此 BGW 应该执行的实际代码，您还将降低调用 ProgressChanged 的​​速率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:51:42.730

问题在于您的内部循环非常紧凑，以至于 gui 更新过于频繁地发布，以至于 gui 无法准确响应它们。解决方案是将您的实际工作添加到内部循环中，因此需要更长的时间，或者如果您想模拟 GUI，您可以添加一个`Thread.Sleep(100)`来模拟需要一些时间的工作。

还要确保您的进度条最大值设置为 100，因为这是您为每个返回的最大值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:26:13.070

您的主要问题来自太快的内部循环，这意味着您实际上无法看到进度，因为更新太快以至于进度条无法处理。

您的代码行：

```
location * 100 / 500 
```

当您完成内部循环时将等于 100，因此将进度条最大值设置为 500 与该数字关系不大。这意味着您的进度条永远不会达到最大值。*

# javascript - 使用 html5 画布操作文本

> ID：13066313
> 
> 赞同：0
> 
> 时间：2012-10-25T10:11:17.650
> 
> 标签：javascript, html, html5-canvas

你好，我想画切尔西足球俱乐部的标志，我已经有了“大东西”，比如圆圈和内部空白等……还有文字，但我有问题……在标志中的文字就像是半圆形，但我找不到在画布中像这样绘制它的方法，以获取正确文本的示例，请参见下图并参见我的代码

```
$(function () {

        //variables
        var canvas = document.getElementById("chelseaLogo");
        var CanvasContext = canvas.getContext("2d");
        var centerX = canvas.width / 2;
        var centerY = canvas.height / 2;
        var radius = 170;
        var radiusWhite = radius - 30;

        // outside logo
        CanvasContext.beginPath();
        CanvasContext.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
        CanvasContext.fillStyle = '#0B49DB';
        CanvasContext.fill();

        //stroke
        CanvasContext.lineWidth = 2;
        CanvasContext.strokeStyle = '#FFF700';
        CanvasContext.stroke();

        //white innercircle
        CanvasContext.beginPath();
        CanvasContext.arc(centerX, centerY, radiusWhite, 0, 2 * Math.PI, false);
        CanvasContext.fillStyle = '#fff';
        CanvasContext.fill();

        //text top
        CanvasContext.font = '15pt Calibri';
        CanvasContext.fillText('Chelsea', 155, 25);

        //text bottom
        CanvasContext.font = '15pt Calibri';
        CanvasContext.fillText('Football Club', 140, 330);

}); 
```

![切尔西标志](../Images/10ac883a4ba3b36c9170dd8c90f91048.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:18:19.473

我修改了@Esailija 发布的教程代码，使其更加准确/灵活：

```
function drawTextAlongArc(context, str, hei, centerX, centerY, radius, angle, above) {
    var met, wid;
    context.save();
    context.translate(centerX, centerY);
    if (!above) {
        radius = -radius;
        angle = -angle;
    }
    else{
        hei = 0;
    }
    context.rotate(-1 * angle / 2);
    context.rotate(-1 * (angle / str.length) / 2);

    for (var n = 0; n < str.length; n++) {
        var char = str[n];
        met = context.measureText(char);
        wid = met.width;
        console.log(met);

        context.rotate(angle / str.length);
        context.fillText(char, -wid / 2, -radius + hei);
        context.strokeText(char, -wid / 2, -radius + hei);
    }
    context.restore();
}
ctx.font = 'bold 40pt impact';
ctx.fillStyle = '#000';
ctx.strokeStyle = '#f00';
ctx.lineWidth = 2;
drawTextAlongArc(ctx, "CHELSEA", 40, 200, 200, 100, Math.PI*3/5, true);

ctx.font = 'bold 20pt impact';
drawTextAlongArc(ctx, "FOOTBALL CLUB", 30, 200, 200, 100, Math.PI*3/5, false);

ctx.beginPath();
ctx.arc(200,200,100,0,Math.PI*2,false);
ctx.stroke(); 
```

你可以在这里看到一个例子：http: [//jsfiddle.net/6uQSS/1/](http://jsfiddle.net/6uQSS/1/)

# android - 选择在 Android 和 IOS 之间使用哪种音频文件格式？

> ID：13066318
> 
> 赞同：0
> 
> 时间：2012-10-25T10:11:40.733
> 
> 标签：android, ios, file, audio, format

在我的应用程序中，我想确保用户可以录制他的声音并发送给其他用户收听。在android平台我选择.amr，它不是太大而且容易记录。

然后我意识到我应该确保我的 ios 用户可以与我的 android 用户聊天，但是 .amr 似乎在 ios 中不支持（v4.3 之后）。

那么**是否有某种音频文件格式可以在 android 和 ios 平台之间使用**？或者我必须让我的服务器来做转码工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:56:36.937

android 和 iOS 都应该能够处理 mp3 文件。

您可以使用各种开源项目（可能是步骤的组合）在设备上编码为 mp3。

我个人会去进行服务器端编码/转换，因为太多的事情可能会出错（尤其是在所有各种 Android 版本和设备上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T03:18:31.203

最后我们使用amr。ios客户端做解码工作。

# c++ - 在基于 Visual Studio MFC 的应用程序中禁用事件处理程序

> ID：13066323
> 
> 赞同：0
> 
> 时间：2012-10-25T10:11:52.917
> 
> 标签：c++, visual-studio-2010, mfc

我正在做一个项目。它有图形用户界面，我在上面添加了开始按钮，由某些功能处理。单击开始后，该 Gui 显示输出。我想禁用该处理程序功能。每当我调试该项目时，启动按钮应该会自动启动，并且 GUI 会显示输出。

这是该处理程序的代码。我应该如何更改或移动该功能？

```
 void CServerSocketDlg::OnBtnStart() 
             {
            UpdateData();

            StartX();
             } 
```

需要你的建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:19:25.253

所以在适当的位置添加这样的东西。例如，在对话框中，您可以将其放入`OnInitDialog`：

```
#ifdef _DEBUG
if(IsDebuggerPresent())
{
    /* code here to automatically do whatever you need when a debugger is attached */
}
#endif 
```

此代码只会在应用程序的“调试”版本中编译，并且只有在应用程序在调试器下运行时才会执行。

# java - Android：Listview 自定义单元格 - 知道哪个项目

> ID：13066328
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:12:05.603
> 
> 标签：java, android, custom-cell

我有一个自定义表格单元格，它基本上有 2 个按钮、一个文本视图和一个编辑文本。每个编辑文本旁边都有一个加号和减号按钮。有效地增加/减少文本框中的数字。

我不知道如何将按钮链接到正确的文本框。即当我按下加号时，有一个只适用于它所在行的edittext 框的例程。我是否必须为每个文本框设置自定义 ID？

对于问题，我的所有文本都正确显示。

我的自定义单元格是：

```
<TextView
    android:id="@+id/txtOption"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_weight="0.00"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/btnPlus"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="49dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/txtOption"
    android:layout_weight="0.00"
    android:text="+" />

<Button
    android:id="@+id/btnMinus"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="49dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/btnPlus"
    android:layout_alignBottom="@+id/btnPlus"
    android:layout_toRightOf="@+id/btnPlus"
    android:layout_weight="0.00"
    android:text="-" />

<EditText
    android:id="@+id/tbAnswer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/btnMinus"
    android:layout_toRightOf="@+id/btnMinus"
    android:ems="10"
    android:inputType="number" >

    <requestFocus />
</EditText> 
```

我的自定义单元格被调用：

```
 class CustomAdapter extends BaseAdapter
    {

    @Override
    public int getCount() {

        return mDescription.size();
    }

    @Override
    public Object getItem(int arg0) {

        return null;
    }

    @Override
    public long getItemId(int arg0) {

        return 0;
    }

    @Override
    public View getView(int arg0, View arg1, ViewGroup arg2) {

        LayoutInflater inf=getLayoutInflater();
        View v=inf.inflate(R.layout.noncriticalasset, arg2,false);

        Button btPlus=(Button)v.findViewById(R.id.btnPlus);
        Button btMinus=(Button)v.findViewById(R.id.btnMinus);

        TextView tv=(TextView)v.findViewById(R.id.txtOption);

        EditText et=(EditText)v.findViewById(R.id.tbAnswer);

        tv.setText(mDescription.get(arg0).toString()); 

        return v;
    }

} 
```

之后，我还必须整理所有文本框中的所有信息，并为每个文本框编写一个查询。我有一个提交按钮吗？（是否创建了自动数组或类似的？）

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:22:30.633

您只需要添加侦听器，这里是如何为每个项目中的按钮分配侦听器的示例：

```
@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {

  btPlus.setOnClickListener(new OnClickListener() {

     public void onClick(View v) {

     }
  });

  return v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:18:22.623

这是你需要的吗？

在按钮的 onclick() 中使用

```
@Override
    public void onClick(View v) {

            try {

                position = listview
                        .getPositionForView((View) v.getParent()); // position is an integer variable which helps you identify which item's plus button  was clicked
                Log.v("Position id", "" + position);

                // do some manipulations 
                notifyDataSetChanged();

            } catch (Exception e) {

                Log.e("error", "error" + e.getMessage());

            }

            break; 
```

# android - 如何从异步任务中取消

> ID：13066331
> 
> 赞同：1
> 
> 时间：2012-10-25T10:12:23.290
> 
> 标签：android, asynchronous

我在我的活动中调用了一个函数，这基本上是一个通过 web 服务从远程服务器获取数据的异步任务。

```
 private void myAsyncTask() {
            new AsyncTask<Object, Object, Object>() {

                @Override
                protected void onPreExecute() {

                    progress_Dialog = ProgressDialog.show(a, "", "Loading");

                }

                @Override
                protected Integer doInBackground(Object... params) {

                    try
                    {
                    try {

                        MenuService menuService = new MenuServiceImpl();

                        MenuServiceResponse partnerMenu;
                            partnerMenu = menuService.getMenu();

                        productlist=Menu.getMenu().getMenuEntries();

                        System.gc();
                        return 0;
                    } catch (myServiceException e) {
                        bgFlag=true;

                        e.printStackTrace();
                    }
                    }
                    catch (Exception e) {

                        bgFlagForserviceExeption=true;
                        e.printStackTrace();

                    }
                    }                           return 0;
                }

                @Override
                protected void onPostExecute(Object result) {
                    if (progress_Dialog != null) {

                        progress_Dialog.dismiss();

                    }

                    try
                    {

                        if(bgFlagForserviceExeption)
                        {
                            MyAlertDialog.ShowAlertDialog(ShopActivity.this, "", "Please try again later", "OK");

                        }
                        if(bgFlag==false)
                        {
                     adapter = new ShopAdapter(
                            ShopActivity.this, productlist);

                                    allproduts.setAdapter(adapter);
                        }
                        else
                        {
                            MyAlertDialog.ShowAlertDialog(ShopActivity.this, "", " Please try again later", "OK");

                        }

                    }
                    catch(Exception e)
                    {
                        adapter=null;
                }

                }

            }.execute();

} 
```

当我调用此活动时，进度条将一直显示，直到 doinbackground() 结束。我如何在按下手机后退按钮时退出后台进程，现在的问题是我必须等到后台进程完成，即使我按后退按钮。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:16:37.480

覆盖后退按钮。

[这里是](https://stackoverflow.com/questions/4969541/override-the-back-button-in-android)

在那简单地调用 asynctack.cancel(true);

[在这里阅读](http://developer.android.com/reference/android/os/AsyncTask.html#cancel(boolean))

# node.js - 在 node.js 中上传文件时出错

> ID：13066337
> 
> 赞同：1
> 
> 时间：2012-10-25T10:12:29.863
> 
> 标签：node.js, mongodb, file-upload

伙计们，每当我尝试通过 node.js 上传文件而不使用任何框架时，`formidable`我都会收到一个错误。所述错误的片段是

```
 res.write('<div id="capslide_img_cont6" class="ic_container">');
                         res.write('<div class="overlay" style="display:none;"></div><div class="ic_caption">"'+comment[i]+'"</br><div class ="show_addframe" style="display:none;">')
                         res.write('<form method="post" action="/add_new_frame_inputs"><input type="submit" name="add" value="add"/></form>');
                         res.write('<form method="post" action="/change_pic" enctype="multipart/form-data"><input type = "button" value = "Change Pic" onclick=javascript:document.getElementById("imagefile").click();><input type="submit" name="submit"/>');
                         res.write('<input id = "imagefile" type="file" style="visibility: hidden;" name="upload" multiple="multiple"/><input type="hidden" name="id" value="'+id[i]+'"></form></br>');
                         res.write('<form method="post" action="/deletenode"><input type="hidden" name="name" value="'+namet[i]+'"/><input type="submit" name="submit" value="delete"></form></div></div>');
                         res.write('<img src="http://localhost/'+img[i]+'" height="300" width="250"/><br>');
                         res.write('</div></div>');
                         if(i==(namet.length-1)){
                            res.end('</div></body></html>'); 
```

此代码处理文件上传并调用此代码

```
var form    = new formidable.IncomingForm();
                    form.parse( req, function( error, fields, files ){
                      fs.rename(files.upload.path, "/var/www/"+files.upload.name);
                      im.resize({
                      srcPath: "/var/www/" + files.upload.name,
                      dstPath: "/var/www/" + files.upload.name,
                      width:   '500',
                      height: '500'
                        }, function(err, stdout, stderr){
                        if (err) throw err
                        console.log('resized++++')
                            });
                            console.log("Aftr resized");
                      img_path=files.upload.name;
                      pic_tags=fields.pic_tags;
                      var objectid=new ObjectID();
                      pic_id=objectid.toHexString();
                      docname=fields.name;
                      docparent=fields.parent;
                      doccomments=fields.comments;
                      db.frames.update({pic_id:fields.id},{$set:{pic_id:pic_id}},false,true);
                      db.pictures.insert({imgs:img_path,_id:pic_id,pic_tags:null});
                        });
                    console.log("updated frames");
                     res.writeHead(302,{'location':'/main_menu'});
                     res.end();
                        break; 
```

我得到的错误是这个

```
 if (err) throw err
                                       ^
Error: Command failed: convert: no decode delegate for this image format `/var/www/' @ error/constitute.c/ReadImage/532.
convert: missing an image filename `/var/www/' @ error/convert.c/ConvertImageCommand/3011.

    at ChildProcess.<anonymous> (/home/r121/Desktop/nilesh/node_modules/imagemagick/imagemagick.js:88:15)
    at ChildProcess.EventEmitter.emit (events.js:91:17)
    at maybeClose (child_process.js:634:16)
    at Process._handle.onexit (child_process.js:676:5) 
```

现在，当我删除`im.resize`方法时，文件根本不会上传。任何人都可以帮我解决这个问题。感谢 Advance 中的每个人。此外，数据库显示空值。

# javascript - 我是否患有过多的递归？JQuery - 在某些情况下必须单击按钮两次

> ID：13066338
> 
> 赞同：1
> 
> 时间：2012-10-25T10:12:31.277
> 
> 标签：javascript, jquery, events, recursion, click

我正在使用他们的纯文本 API 为链接锁定网站制作一个多链接储物柜（ot：使用 YQL 来完成这个，但还没有那么远）

它使用 localStorage 来保存用户的 API 密钥。但我有一个问题。添加密钥并且用户点击保存后，将显示链接添加表单。从这里开始，当单击“如果此密钥不正确，请单击此处。”时，直到用户再次单击该链接时才会发生任何事情。

“添加”按钮也是如此。必须点击两次。此外，如果单击添加按钮，“如果此键不正确，请单击此处”。链接按预期运行。主要的是，页面上的任何可点击元素都必须在任何一个相关可点击元素按预期运行之前单击一次。

我认为这可能与默认事件操作有关，所以我尝试使用 preventDefault() 来查看它是否修复了任何问题，但无济于事。我真的很想从知识渊博的人那里得到一些帮助。

我已经把demo放在这里了：[API Tools](http://declandewet.github.com/ShrinkOnce-API-Tools/)，GitHub repo可以在这里找到：[GitHub](https://github.com/declandewet/ShrinkOnce-API-Tools)

在密钥表单中输入任何字符串值以进行测试。另外，首先单击“添加”按钮。注意页面如何导航到“/？”？这和它有什么关系吗？请看下面的代码：

```
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Shrink Once API Tools</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css"></link>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.css"></link>
</head>
<body>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <h1 class="head-title">Shrink Once API Tools</h1>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <div class="flashAlert">

                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <div class="mainFormContent">

                </div>
            </div>
        </div>
    </div>

    <!-- Include JavaScript at the very bottom for faster page loads -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--
    Fall back on local JQuery if Google CDN version is unavailable.
    (Since most sites link the Google CDN version, it is more likely
    to already be cached by the user's browser).
    -->
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
    <!-- end Fallback -->
    <script src="js/bootstrap.js"></script>
    <script>
        $(function () {
            var apiKeyForm = '<form class="apiKeyForm">'
                           + '<legend>Enter your API Key</legend>'
                           + '<input type="text" id="apiKey" class="span12" placeholder="e.g. ab12c34d5678efgh90123i45678j90k1">'
                           + '<span class="help-block">You can find your access key <a href="https://shrinkonce.com/index.php?menu=usercp#tools" target="blank">here.</a></span>'
                           + '<button id="saveAPIKey" class="btn btn-info btn-large btn-block">Save</button>'
                           + '</form>';

            var apiLinkForm = '<form class="apiLinkForm">'
                            + '<legend>Add a link or two... or more.</legend>'
                            + '<button id="add" class="btn btn-large">Add</button>'
                            + '<button id="remove" class="btn btn-large">Remove</button>'
                            + '<button id="reset" class="btn btn-large">Reset</button>'
                            + '<button class="btn btn-info btn-large">Submit</button>'
                            + '<hr />'
                            + '<div id="linkForm">'
                            + '</div>'
                            + '</form>';

            if (localStorage.length > 0) {
                $('<div class="alert alert-success">Your API token is <b>' + localStorage.getItem('apiKey') + '</b>. If this key is incorrect, click <a href="" class="resetLocalStorage">here</a>.</div>').appendTo('.flashAlert').fadeIn('slow');
                $(apiLinkForm).fadeIn('slow').appendTo('.mainFormContent');
            }
            else {
                $('<div class="alert alert-error">You have not yet entered your API token. Add it below, and it will be persisted in memory.</div>').appendTo('.flashAlert').fadeIn('slow');
                $(apiKeyForm).fadeIn('slow').appendTo('.mainFormContent');
            }

            var i = $('#linkForm input').size() + 1;
            $('#add').click(function (e) {
                e.preventDefault();
                $('<input type="text" id="inputLink' + i + '" class="shrinklink span12" placeholder="http://google.com">').fadeIn('slow').appendTo('#linkForm');
                i++;
                return false;
            });
            $('#remove').click(function (e) {
                e.preventDefault();
                if (i > 1) {
                    $('.shrinklink:last').fadeOut('normal', function () { $(this).remove(); });
                    i--;
                }
                return false;
            });
            $('#reset').click(function (e) {
                e.preventDefault();
                while (i > 1) {
                    $('.shrinklink:last').remove();
                    i--;
                }
                return false;
            });
            $('#saveAPIKey').click(function (e) {
                e.preventDefault();
                if ($('#apiKey').val().length > 0) {
                    localStorage.setItem('apiKey', $('#apiKey').val());
                    $('.alert').replaceWith('<div class="alert alert-success">Your API token is <b>' + localStorage.getItem('apiKey') + '</b>. If this key is incorrect, click <a href="" class="resetLocalStorage">here</a>.</div>');
                    $('.apiKeyForm').replaceWith(apiLinkForm);
                }
                else {
                    $('.alert').replaceWith('<div class="alert">You did not enter your API key! Please enter it below.</div>');
                }
                return false;
            });
            $('.resetLocalStorage').click(function (e) {
                e.preventDefault();
                localStorage.clear();
                location.reload();
                return false;
            });
        });
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:45:11.793

问题是，您正在（通过使用`.click`方法）为当时存在于 DOM 中的项目绑定事件处理程序。这些不适用于稍后添加的节点，这里就是这种情况（例如，您要附加带有“.mainFormContent”链接的消息）。

最简单的解决方法是替换`.click`with`.on`方法的使用，例如：

```
$(document).on('click', '.resetLocalStorage', function (e) {
    e.preventDefault();
    localStorage.clear();
    location.reload();
    return false;
}); 
```

请记住，这只是一个快速修复。至于架构方法，它不是最好的，但这是一个完全不同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:46:55.950

我添加点击监听器的方式是这样的（这也是为了您的代码的可读性并最终重新理解它）。

```
if (localStorage.length > 0) {
   var api_key = localStorage.getItem('apiKey');
   var bold_api_key = $("<b>").text(api_key);
   var alert_div = $("<div>").addClass("alert alert-success");
   var pre_span = $("<span>").text("Your Api token is: ");
   var post_span = $("<span>").text(" if this key is incorrect, click ")       
   var wrong_key_link = $("<a>").text("here");

   wrong_key_link.on("click", function(e){
     e.preventDefault();
     localStorage.clear();
     location.reload();
     return false;
   });

   alert_div.append(pre_span, bold_api_key, post_span, wrong_key_link);
   alert_div.appendTo(".flashAlert").fadeIn("slow");
} 
```

我没有测试过这段代码，但我认为这可能有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T17:05:57.133

@WTK 非常感谢！也适用于我的情况。我改变了我的代码：

```
$('.postAreaDiv').bind('focusin click', function() {
    event.stopPropagation();
    $('.status_label', this).removeClass('visible').addClass('hidden');
    $('.status_textarea', this).focus();
}); 
```

**至**

```
/* placeholder focus in/out logic */
// focus in
$(document).on('click', '.postAreaDiv', function (e) {
    e.stopPropagation();
    $('.status_label', this).removeClass('visible').addClass('hidden');
    $('.status_textarea', this).focus();
}); 
```

它现在完美运行！

谢谢！

# list - 在 F# 中构建列表时类型不匹配

> ID：13066345
> 
> 赞同：0
> 
> 时间：2012-10-25T10:13:03.400
> 
> 标签：list, types, f#

我正在尝试从一些文件的名称中构建一个列表。不幸的是，我收到了一个我不知道如何纠正的类型错误。

我的代码：-

```
open System

let buildStringList (list: string []) =

      let initial = []
           for i = 0 to list.Length do
              let foo = list.[i]
                 List.append initial foo.Substring(foo.IndexOf(".")) 
```

类型错误：-

```
 error FS0001: This expression was expected to have type string -> 'a
  but here has type string 
```

这与“foo.Substring(foo.IndexOf("."))”对象有关。在这里获得正确类型的最佳方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T10:24:47.803

您的功能的缩进完全关闭。无论如何，is `foo.Substring(foo.IndexOf("."))`a`string`不是`list`.`List.append`

您想要的是将元素添加到累加器列表中。快速修复您的函数是使用一个`mutable`值：

```
let buildStringList (arr: string []) =
    let mutable result = []
    for i = 0 to arr.Length do
        let foo = arr.[i]
        result <- foo.Substring(foo.IndexOf("."))::result
    List.rev result // Use List.rev if you would like to keep the original order 
```

但是，推荐的方法是使用高阶函数。虽然使用`List.map`as Mark's answer 是一种好方法，但您可以使用`Array.fold`更接近您的代码的方法：

```
let buildStringList (arr: string []) =
    arr
    |> Array.fold (fun acc foo -> foo.Substring(foo.IndexOf("."))::acc) []
    |> List.rev 
```

完整地说，列表理解在某些情况下也很有帮助：

```
let buildStringList (arr: string []) =
    [ for foo in arr -> foo.Substring(foo.IndexOf(".")) ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:20:27.277

我认为这是一种更实用的方式来做你正在尝试的事情：

```
open System

let buildStringList (list: string []) =
      list |> Array.toList |> List.map (fun x -> x.Substring(x.IndexOf("."))) 
```

您的特定错误的原因是 List.append 需要两个列表，而不是一个列表和一个项目。

# google-maps-api-3 - 街景服务：将街景添加到搜索结果中

> ID：13066350
> 
> 赞同：0
> 
> 时间：2012-10-25T10:13:55.833
> 
> 标签：google-maps-api-3, google-street-view

您好需要一些关于使用街景的想法/建议，我正在获取使用地点 Api 按类型执行搜索的地点详细信息，下面是我的搜索地点代码

```
function SearchData(type){

    $('#placedata').empty();
        var myLatlng = new google.maps.LatLng(parseFloat(searchLatitute), parseFloat(searchLongitute));
        map = new google.maps.Map(document.getElementById('map_canvas'), {
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: myLatlng,
                    zoom: 10});
        var request = {location: myLatlng,rankBy: google.maps.places.RankBy.DISTANCE,types: [type]};
        var service = new google.maps.places.PlacesService(map);
        service.search(request, callback);
  }

  function callback(results, status,pagination) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
        var place = results[i];
        createMarker(place);

  function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({map: map,zIndex: 100,position: place.geometry.location});

    var request = {reference: place.reference};
    service = new google.maps.places.PlacesService(map);
    service.getDetails(request, function(details, status) {//alert("address  "+details.formatted_address);
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        $('#placedata').append('<tr><td><a href='+details.url+'>'+details.name+'</a></td></tr>');

    }
}); 
```

我在我的网页中显示结果..我想要实现的是为每个地址添加街景。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:15:55.117

您有 2 个选项：

1.  只需使用[Static StreetView-Image-API](https://developers.google.com/maps/documentation/streetview/#url_parameters)提供的图像。但是如果这个地方没有可用的图像，你会得到一个错误图像。
2.  使用[getPanoramaByLocation()](https://developers.google.com/maps/documentation/javascript/reference?hl=en#StreetViewService)请求给定位置的 StreetView 详细信息，当此地点没有可用图像时，您可以处理这种情况，但需要进一步请求，并且您还可以加载全景图。

* * *

**`<edit>`**

根据要求，案例 #2 可以这样处理（以下代码替代您当前的 service.getDetails()-callback）：

```
function(details, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {

      //create streetViewService-object once
      if(!window.streetViewService)window.streetViewService 
        = new google.maps.StreetViewService;   

        (function(d){
          //append the tr to the table, note the additional td and div
          //thats where the panorama will be placed later
          var target=$('<tr><td><a href='+
                        d.url+'>'+d.name+
                       '</a></td><td><div/></td></tr>');

          target.appendTo('#placedata');

          //get the panorama
          window.streetViewService
            .getPanoramaByLocation(d.geometry.location,
                                   50,
                                   function(r,status){
                                   //check if there was an result
                                   if(status==google.maps.StreetViewStatus.OK){
                                    //create the panorama
                                    new google.maps
                                      .StreetViewPanorama(
                                          $('td:last div:last',target)
                                            .css({width:200,height:200})[0],
                                         {pano:r.location.pano});
                                  }
                                  else{
                                    $('td:last div:last',target)
                                     .text('no panorama available');
                                  }
                                });
        })(details)

    }
} 
```

# mouse - 更换 Microsoft 自然无线激光鼠标 6000 的建议

> ID：13066351
> 
> 赞同：4
> 
> 时间：2012-10-25T10:14:03.263
> 
> 标签：mouse, ergonomics

我的伙伴使用的是 Microsoft Natural Wireless Laser Mouse 6000（实际上是键盘和鼠标组合附带的...），我们开始觉得奇怪（它消耗电池的速度非常快，包括良好的碱性电池和可充电电池）。我们会用另一个替换它，但微软似乎已经停止了该产品。

谁能推荐一款类似风格的“人体工学”鼠标？理想情况下可充电，或电池寿命长。

我使用的是 Logitech Performance Mouse M950，她发现它的倾斜度不够高，并偏离了她的手腕，而 3M 操纵杆鼠标走得太远，偏离了她的肘部和肩膀。

这是它的支持页面：http: [//www.microsoft.com/hardware/en-us/d/natural-wireless-laser-mouse-6000](http://www.microsoft.com/hardware/en-us/d/natural-wireless-laser-mouse-6000)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:49:46.210

您仍然可以将此鼠标作为键盘/鼠标包的一部分：http: [//www.microsoft.com/hardware/en-us/p/natural-ergonomic-desktop-7000](http://www.microsoft.com/hardware/en-us/p/natural-ergonomic-desktop-7000)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:22:17.977

在我们公司，我们评估了一些符合人体工程学的鼠标，我们最喜欢的是[Evoluent VerticalMouse 4](http://www.evoluent.com/vm4r.htm)。

# php - 使用PHP调整大小时如何在PNG上保持透明背景？

> ID：13066355
> 
> 赞同：4
> 
> 时间：2012-10-25T10:14:17.617
> 
> 标签：php, colors, resize, png, transparent

我在使用 PHP 调整图片大小时遇到​​问题，特别是对于具有透明背景的 PNG 文件，而不是保持透明背景，它会变成黑色背景。我怎样才能解决这个问题？

这是调整大小的脚本：

```
<?php         
class resize{

   var $image;
   var $image_type;

   function load($filename) {

      $image_info = getimagesize($filename);
      $this->image_type = $image_info[2];
      if( $this->image_type == IMAGETYPE_JPEG ) {

         $this->image = imagecreatefromjpeg($filename);
      } elseif( $this->image_type == IMAGETYPE_GIF ) {

         $this->image = imagecreatefromgif($filename);
      } elseif( $this->image_type == IMAGETYPE_PNG ) {

         $this->image = imagecreatefrompng($filename);
      }
   }
   function save($filename, $image_type=IMAGETYPE_JPEG, $compression=85, $permissions=null) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image,$filename,$compression);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image,$filename);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image,$filename);
      }
      if( $permissions != null) {

         chmod($filename,$permissions);
      }
   }
   function output($image_type=IMAGETYPE_JPEG) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image);
      }
   }
   function getWidth() {

      return imagesx($this->image);
   }
   function getHeight() {

      return imagesy($this->image);
   }
   function resizeToHeight($height) {

      $ratio = $height / $this->getHeight();
      $width = $this->getWidth() * $ratio;
      $this->resize($width,$height);
   }

   function resizeToWidth($width) {
      $ratio = $width / $this->getWidth();
      $height = $this->getheight() * $ratio;
      $this->resize($width,$height);
   }

   function scale($scale) {
      $width = $this->getWidth() * $scale/100;
      $height = $this->getheight() * $scale/100;
      $this->resize($width,$height);
   }

   function resize($width,$height) {

      $new_image = imagecreatetruecolor($width, $height);   
      imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
      $this->image = $new_image;
   }      

}
?> 
```

这就是我所说的：

```
$picture_directory="images/" . $_FILES["file"]["name"];

    include('arqinc/resizing.php');
    $image = new resize();
    $image->load($picture_directory);
    $image->resize(660,780);
    $image->save($picture_directory); 
```

**编辑：**

我将我的调整大小功能更改为：

```
function resize($width,$height) {

      $new_image = imagecreatetruecolor($width, $height);
      $transparent=imagefill($new_image, 0, 0, imagecolorallocatealpha($new_image, 255, 255, 255, 127));
      imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
      $this->image = $new_image;
   } 
```

但现在它使背景保持白色，而不是透明。

**编辑2：**

已解决，此调整大小功能已损坏，此功能完美无缺：

[http://mediumexposure.com/smart-image-resizing-while-preserving-transparency-php-and-gd-library/](http://mediumexposure.com/smart-image-resizing-while-preserving-transparency-php-and-gd-library/)

感谢 [Tahir Yasin](https://stackoverflow.com/users/1070732/tahir-yasin)链接它：D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T10:21:23.283

我发现另一篇具有相同问题的帖子，根据该帖子，以下代码可用于保持透明度。

```
imagealphablending( $targetImage, false );
imagesavealpha( $targetImage, true ); 
```

参考：[使用PHP的GDlib imagecopyresampled时能否保留PNG图像透明度？](https://stackoverflow.com/questions/32243/can-png-image-transparency-be-preserved-when-using-phps-gdlib-imagecopyresample)

如果对您有帮助，请投票。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:36:11.297

您需要在代码行`imagepng($new_image,$file_name)`之后使用。`imagecopyresampled()`将**$file_name**替换为您要保存图像的名称。

php `imagepng()`— 用于从您创建的图像中输出 PNG 图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-06T17:01:14.273

此功能有效

```
function resize($width,$height) {
    $new_image = imagecreatetruecolor($width, $height);
    $transparent=imagefill($new_image, 0, 0, imagecolorallocatealpha($new_image, 255, 255, 255, 127));
    imagealphablending($new_image, false);
    imagesavealpha($new_image, true);
    imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
    $this->image = $new_image;
} 
```

# javascript - 如何将javascript数组发送到服务器？

> ID：13066358
> 
> 赞同：1
> 
> 时间：2012-10-25T10:14:32.730
> 
> 标签：javascript, jquery

我有一个 javascript 对象数组。我想将此数组发送到服务器。我试过了 ：

```
JSON.stringify(jObectArray); 
```

但是在服务器端，我得到了空数组。如何成功将其发送到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:18:16.213

没有看到您的**任何**代码：

```
var arr = ["one","two","three"];
arr = JSON.stringify(arr);
$.ajax({
  url: "something.something",
  data: {
    theArray: arr
  },
  success: function(data) {
    //success
  }
}); 
```

**编辑：**
*你的阵列是什么样的......？*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:18:45.353

你应该做：

```
$.ajax({
   url :'urltoserver',
   data: { myArray : jObectArray },
   dataType: 'JSON'
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:21:04.543

```
$.ajax({
   url :'urltoserver',
   data: {'yourarray':JSON.stringify(jObectArray)},
   dataType: 'JSON',
   type:"POST"
 }); 
```

在服务器

```
print_r($_POST['yourarray']); 
```

# java - XStream 序列化空值

> ID：13066360
> 
> 赞同：7
> 
> 时间：2012-10-25T10:14:49.187
> 
> 标签：java, serialization, xstream

假设我有

```
class Student
{
String name;
int    age;
String teacher;
} 
```

然后 ：

```
public class App1
{
    public static void main(String[] args)
    {
        Student st = new Student();
        st.setName("toto");

        XStream xs = new XStream();

        xs.alias("student",Student.class);

        System.out.println(xs.toXML(st));
    } 
```

}

给我 ：

```
<student>
  <name>toto</name>
  <age>0</age>
</student> 
```

有没有办法处理空值？我是说 ：

```
<student>
  <name>toto</name>
  <age>0</age>
  <teacher></teacher>
</student> 
```

如果我这样做是可能的

```
st.setTeacher(""); 
```

但如果教师为空，则不会。

我尝试使用自定义转换器，但似乎空值未发送到转换器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-05T13:16:36.867

我正在使用 XStream 1.4.7，@XStreamAlias 注释用于自定义字段名称，@XStreamConverter 用于自定义转换器（表示日期和其他自定义 bean）。但是，甚至没有调用空值的自定义转换器。我的目标是序列化对象的所有字段，包括空字段，我不需要解组 XML。

我设法通过创建自定义 ReflectionConverter 来做到这一点。我从 XStream 库扩展了 ReflectionConverter 并覆盖了 doMarshal 方法。我唯一改变的是为 null info.values 调用 writeField 方法：

```
new Object() {
{
    for (Iterator fieldIter = fields.iterator(); fieldIter.hasNext();) {
        FieldInfo info = (FieldInfo) fieldIter.next();
        if (info.value != null) {
            //leave the code unchanged
            ...
        } else {
            //add this to write null info.value to xml
            Log.info("MyCustomReflectionConverter -> serialize null field: " + info.fieldName);
            writeField(info.fieldName, null, info.type, info.definedIn, info.value);
        }
    }
    //... leave the rest of the code unchanged
}
}; 
```

之后，我创建了这样的 xStream 实例（以非常低的优先级注册您的转换器非常重要）：

```
StaxDriver driver = new StaxDriver(new NoNameCoder()) {
    @Override
    public StaxWriter createStaxWriter(XMLStreamWriter out) throws XMLStreamException {
        // the boolean parameter controls the production of XML declaration
        return createStaxWriter(out, false);
    }
};

XStream xStream = new XStream(driver);
xStream.autodetectAnnotations(true);//needed to process aliases
//register MyCustomReflectionConverter
MyCustomReflectionConverter reflectionConverter = new MyCustomReflectionConverter (xStream.getMapper(), new SunUnsafeReflectionProvider());
xStream.registerConverter(reflectionConverter, XStream.PRIORITY_VERY_LOW); 
```

感谢 Mark Nabours 在[这里的解决方案](http://article.gmane.org/gmane.comp.java.xstream.user/811)

希望能帮助到你。有没有人为此找到更好的解决方案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T07:25:24.097

首先在你的`Student`类中提供 getter 和 setter 方法，如下所示：

```
public class Student{
   String name;
   int age;
   String teacher;
   public void setName(String name){
       this.name = name;
   }
   public String getName(){
      return name;
   }
.......
......//Like that mention other getter and setter method
} 
```

现在，您只需按如下方式创建转换器类：

```
public class StudentConverter implements Converter{
    public boolean canConvert(Class clazz) {
         return clazz.equals(Test.class);
    }
    public void marshal(Object value, HierarchicalStreamWriter writer,
         MarshallingContext context) {
       Student student = (Student ) value;
       writer.startNode("name");
       writer.setValue(test.getName());
       writer.endNode();
       writer.startNode("age");
       writer.setValue(test.getAge());
       writer.endNode();
       writer.startNode("teacher");
       writer.setValue("");
       writer.endNode();
   }
    public Object unmarshal(HierarchicalStreamReader reader,
         UnmarshallingContext context) {
       Student student = new Student();
       test.setName(reader.getNodeName());
       test.setAge(reader.getNodeName());
       test.setTeacher(reader.getNodeName());
       return student;
    }
}

Your main class will the like that:

public class App1{
    public static void main(String args[]) {
        XStream stream = new XStream(new StaxDriver());
        Student st = new Student();
        st.setName("ABC");
        t.setAge(21);
        stream.registerConverter(new StudentConverter());
        stream.alias("student", Student.class);
        System.out.println(stream.toXML(st));
   }

} 
```

希望这是你的答案....学习愉快:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T10:16:40.717

你可以放一个空字符串

```
String teacher = ""; 
```

或优化一个:)

```
String teacher = StringUtils.EMPTY; 
```

# c# - 错误：redirect_uri_mismatch

> ID：13066363
> 
> 赞同：1
> 
> 时间：2012-10-25T10:14:59.123
> 
> 标签：c#, asp.net, google-app-engine, google-calendar-api, google-tasks-api

当我尝试从我在 PRD 中的应用程序访问 google 日历或任务 api 时，它会引发以下错误：

请求中的重定向 URI：http: [//MyApp.com/ManageEvents.aspx](http://MyApp.com/ManageEvents.aspx)与注册的重定向 URI 不匹配

了解更多 请求详情

```
scope=https://www.googleapis.com/auth/calendar
response_type=code
access_type=online
redirect_uri=http://MyApp.com/ManageEvents.aspx
display=page
client_id=8827312348664.apps.googleusercontent.com 
```

问题是我已经在应用程序引擎/控制台的“重定向 URI”下注册了[http://www.MyApp.com/ManageEvents.aspx](http://www.MyApp.com/ManageEvents.aspx)，但我仍然收到错误消息。最糟糕的是，当我一天前测试它时它可以工作，然后我现在测试它并且它没有。它似乎适用于某些机器而不是其他机器。是什么赋予了？

任何回应都将受到欢迎。干杯。

# jquery - jquery ui 工具提示对于 ajax 更新面板下的控件仍然可见

> ID：13066364
> 
> 赞同：2
> 
> 时间：2012-10-25T10:14:59.953
> 
> 标签：jquery, asp.net, updatepanel, ajaxcontroltoolkit

![问题快照](../Images/132d019c7e8964b82925c80847545398.png)![问题快照][2] 我有一个 Web 表单，它使用以下代码中的两个更新面板：

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
                <ContentTemplate>
                    <div id="SpeciesWrapper" class="RowControl" runat="server">
                        <div class="QuestionColumnControl">
                            <asp:Label ID="lblspecies" runat="server">[$BRAND(LABEL,STAGE1.SPECIES)$]</asp:Label>
                        </div>
                        <div class="AnswerColumnControl" title="Please let us know the type of pet you want to insure.">
                            <asp:RadioButtonList ID="radbtnspecies" runat="server" AutoPostBack="True" OnSelectedIndexChanged="speciesChanged"
                                RepeatDirection="Horizontal" >
                                <asp:ListItem Text="Cat" />
                                <asp:ListItem Text="Dog" />
                            </asp:RadioButtonList>
                            <label for="radbtnspecies" class="error">
                                Please select your gender</label>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="Select your Species Type"
                                ControlToValidate="radbtnspecies" EnableClientScript="False"></asp:RequiredFieldValidator>

                        </div>
                    </div>
                    <div id="PetBreedWrapper" class="RowControl" runat="server">
                        <div class="QuestionColumnControl">
                            <asp:Label ID="lblPetBreed" runat="server" AssociatedControlID="ddlPetBreed">[$BRAND(LABEL,STAGE1.PETBREED)$]</asp:Label>
                        </div>
                        <div class="AnswerColumnControl">
                            <asp:DropDownList ID="ddlPetBreed" runat="server" ToolTip="If you can’t find the right breed, please call us as we may still be able to insure your pet." />
                            <span class="errormsg">
                                <cc1:BDML_HighlighterValidator ID="valPetBreed" runat="server" ControlToValidate="ddlPetBreed"
                                    DivID="PetBreedWrapper" DivCSS="RowControl" ErrorClass="RowControlErr" ForeColor=""
                                    ValidateEmptyText="True" ErrorMessage="[$BRAND(ERROR,STAGE1.PETBREED.REQ)$]"
                                    Display="Dynamic" OnServerValidate="required_ServerValidate" SetFocusOnError="true"> </cc1:BDML_HighlighterValidator>
                            </span>
                        </div>
                    </div>
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="radbtnspecies" EventName="SelectedIndexChanged" />
                </Triggers>
            </asp:UpdatePanel> 
```

另一个使用更新面板的表单在这里：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>
                    <div id="ChippedWrapper" class="RowControl" runat="server">
                        <div class="QuestionColumnControl">
                            <asp:Label ID="lblChipped" runat="server" AssociatedControlID="radChippedYes">[$BRAND(LABEL,STAGE1.CHIPPED)$]</asp:Label>
                        </div>
                        <div class="AnswerColumnControl" title="Has your pet been identified with a chip or tag?">
                            <asp:RadioButton ID="radChippedYes" Checked="true" runat="server" GroupName="radChipped"
                                AutoPostBack="True" OnCheckedChanged="radChippedYes_CheckedChanged" />
                            <asp:Label ID="lblChippedYes" runat="server" AssociatedControlID="radChippedYes">[$BRAND(LABEL,STAGE1.CHIPPEDYES)$]</asp:Label>
                            <asp:RadioButton ID="radChippedNo" runat="server" GroupName="radChipped" AutoPostBack="True"
                                OnCheckedChanged="radChippedNo_CheckedChanged" />
                            <asp:Label ID="lblChippedNo" runat="server" AssociatedControlID="radChippedNo">[$BRAND(LABEL,STAGE1.CHIPPEDNO)$]</asp:Label>
                            <%--<img alt="Help" class="help" src="[$BRAND(IMAGELINK,HELP)$]" onmouseover="javascript:showhelpdiv('help-chipped')"
                                onmouseout="javascript:hidehelpdiv('help-chipped')" onmousemove="javascript:movehelpdiv(event,'help-chipped')" />--%>
                        </div>
                    </div>
                    <div id="ChipNoWrapper" class="RowControl" runat="server">
                        <div class="QuestionColumnControl">
                            <asp:Label ID="lblChipNo" runat="server" AssociatedControlID="txtChipNo">[$BRAND(LABEL,STAGE1.CHIPNO)$]</asp:Label>
                        </div>
                        <div class="AnswerColumnControl">
                            <asp:TextBox ID="txtChipNo" runat="server" MaxLength="15" />
                            <%--<img alt="Help" class="help" src="[$BRAND(IMAGELINK,HELP)$]" onmouseover="javascript:showhelpdiv('help-chipno')"
                                onmouseout="javascript:hidehelpdiv('help-chipno')" onmousemove="javascript:movehelpdiv(event,'help-chipno')" />--%>
                            <span class="errormsg">

                            </span>
                        </div>
                    </div>
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="radChippedYes" EventName="CheckedChanged" />
                </Triggers>
            </asp:UpdatePanel> 
```

我正在使用外部脚本文件并在页面上引用它。表单在页面加载时使用 jquery ui 工具提示小部件，代码如下：

```
if ($('body').prop('id') == "youandyourpet") {

$(function () {

    //code to initialize tooltip
    $(document).tooltip();
 });

function pageLoad(sender, args) {

        //code to initialize tooltip
        $(document).tooltip();      
}} 
```

在这里，我使用 jquery 就绪函数以及 pageLoad 函数，这样当更新面板的部分呈现发生时，它再次将控件与工具提示联系起来。但是我已经检查了 IE7、8 和最新的 chrome 版本，如果在控制面板中选择了上述任何单选按钮，工具提示仍然可见。

![显示表格问题的图片][3]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T15:23:33.483

我在很多论坛上搜索了很多。另外，我做得正确，但最后我有一个非常肮脏的方法来解决我的问题。

`var prm = Sys.WebForms.PageRequestManager.getInstance(); prm.add_endRequest(function () { $(".ui-tooltip-content").parents('div').remove(); });`

如果有人知道，请提供任何其他解决方案。干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-10T13:52:30.400

我认为最优雅的解决方案是运行以​​下代码： $(".ui-tooltip-content").parents('div').remove(); 在您的母版页中 OnLoad();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T11:57:42.203

我的解决方案是：

```
$(document).ready(function () {
            $('.MyTooltip').tooltip(
            {
                tooltipClass: 'LDFGridCellTooltip',
                open: function (event, ui) {
                            setTimeout(function () {
                                $(ui.tooltip).hide();
                            }, 3000);
                        },
                items: '[data-title]',
                content: function (a) {
                    return $('<span>' + $(this).attr('data-title') + '</span>').html();
                }
            });
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:20:08.570

如果您同时使用 asp.net ajax 和 jquery，最好按以下方式更新您的代码：

```
/*globals jQuery, window, Sys */
(function ($, Sys) {
function setupTooltip()
{
 $(document).tooltip();
}

$(document).ready(function () {
setupTooltip();
        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function () {
            setupTooltip();
        });
});
}(jQuery, window.Sys)); 
```

这将解决您遇到的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-12T10:30:39.960

考虑到您正在使用 updatePanels，我建议您在 pageLoad() 函数中输入 jquery-ui 分配并在 document.ready() 上调用此函数。在此函数中，您可以调用@RealityDysfunction 提到的函数。所以结构可能是这样的：

```
$(document).ready(function () {
    //some stuff that you may have
    pageLoad();        
});

function pageLoad() {
    $(document).tooltip({
        show: {
            effect: "fadeIn",
            duration: 300
        },
        hide: {
            effect: "fadeOut",
            duration: 100
        },
        tooltipClass: "toolTipClass"
    });
    $(".ui-tooltip-content").parents('div').remove();
 }; 
```

这样，在每次触发回发时，您都不会丢失 jquery-ui 小部件分配，并且您将始终删除工具提示。或者，您可以将其插入到 .js 文件中并在文档末尾加载它。

# c# - 在 where 子句中访问列表中的每个元素

> ID：13066367
> 
> 赞同：0
> 
> 时间：2012-10-25T10:15:08.117
> 
> 标签：c#, linq

我有一个客户列表和一个字符串列表，其中每个字符串都类似于“blah;huhu”；

我想获取所有名称在拆分的“blah;huhu”最后一部分的客户

喜欢`c.Name == "huhu"`。

那是我的伪代码：

字符串 ID = 1000；

```
var query = customerListWithIdAndName.Where(
    c => c.Name == stringListWith2SemicolonSeparatedStrings.Split().Last()
); 
```

我可以对每个拆分值进行比较的正确代码是什么？

更新：

我希望为每个返回的客户分配一个值： String ID = 1000; 因此，每个返回的客户都必须具有 id 1000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:17:06.513

现在我得到了你想要的，这应该可以做到：

```
var query = customerListWithIdAndName.Where(c =>
   stringListWith2SemicolonSeparatedStrings.Any(
       p => p.Split().Last() == c.Name)); 
```

# php - 使用 PHP 创建的格式错误的 XML？

> ID：13066368
> 
> 赞同：-2
> 
> 时间：2012-10-25T10:15:15.933
> 
> 标签：php, xml

我正在创建一个要通过 HTTP 发送到应用程序的 XML 文件，该应用程序建议以下代码生成格式错误的 XML。

谁能告诉我哪里出错了？

```
$doc = new DOMDocument();

    // Creating
    $admin = $doc->createElement('AdminRequest');

    // Add to doc
    $doc->appendChild($admin);

    // Creating
    $secretAttr = $doc->createAttribute('secret');
    $secretAttr->value = $this->secret;

    // Append to Admin      
    $admin->appendChild($secretAttr);

    // Creating
    $versionAttr = $doc->createAttribute('version');
    $versionAttr->value = '3.6';

    // Append to admin
    $admin->appendChild($versionAttr);

    // Creating
    $del = $doc->createElement('Delete');

    // Appending to Admin
    $admin->appendChild($del);

    // Creating
    $user = $doc->createElement('User');
    $nameAttr = $doc->createAttribute('name');
    $nameAttr->value = $username;

    // Appending to User
    $user->appendChild($nameAttr);

    // Appending to delete
    $del->appendChild($user);

    // For debugging
    echo $doc->saveXML(); 
```

输出如下：

```
<?xml version="1.0"?>
<AdminRequest secret="secretcode" version="3.6"><Delete><User name="auser"/></Delete></AdminRequest> 
```

我有一种感觉，这与 AdminRequest 与第一个单独的行有关，只是不知道如何将它排成一行。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:18:24.613

首先，XML 很好。不确定如何将其解释为“格式错误”。换行符不应该影响任何东西。

其次，您确定他们的这种“格式错误”的消息不仅仅是您的 XML 不符合预定义模式的情况吗？

第三，您要发送什么内容类型？应用程序/xml 还是文本/xml？因为我遇到了某些应用程序只接受一个或另一个的问题。

第四，你确定你确实正确地发送了这个 XML 吗？您是否尝试过将其发送到您的开发中的 URL，以便您可以自己解析和验证它？

# c# - WindowsIdentity 是什么意思

> ID：13066373
> 
> 赞同：0
> 
> 时间：2012-10-25T10:15:29.327
> 
> 标签：c#, sqlclr

在研究 SQL CLR 存储过程时，我遇到了以下链接 [Link for SQL Bulk Copy in CLR](http://www.sqlclr.net/Examples/tabid/55/articleType/ArticleView/articleId/11/SqlBulkCopy-Sample-Framework.aspx)。在此链接中，用户已使用 `WindowsIdentity currentIdentity = SqlContext.WindowsIdentity; WindowsImpersonationContext impersonatedIdentity = currentIdentity.Impersonate();`

我无法理解 WindowsImpersonationContext 的用途。没有它的用​​途，我可以运行我的代码。谁能告诉我这个身份模拟的确切用途是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:05:37.877

例如，如果你想在与进程相同的上下文中运行一个线程，你可以做类似这样的事情：

```
 private void ImpersonateThread()
    {
        new Thread(() =>
        {
            Thread.CurrentPrincipal = new WindowsPrincipal(WindowsIdentity.GetCurrent());
            //Do the work...
        }).Start();
    } 
```

如果运行应用程序池作为一个用户运行并且身份验证模式设置为 Windows 身份验证的网站（在 MS-IIS 上），这非常有用。然后您可能希望线程在用户访问网站时运行。

**更新：**

我只是想澄清一下。该行：

```
 Thread.CurrentPrincipal = new WindowsPrincipal(WindowsIdentity.GetCurrent()); 
```

只需将用户（用户仍未模拟到线程）转移到线程，以便其他组件可以看到用户是谁并在必要时使用该信息，例如：

```
 System.Security.Principal.WindowsImpersonationContext impersonationContext;
        impersonationContext =
            ((System.Security.Principal.WindowsIdentity)System.Threading.Thread.CurrentPrincipal.Identity).Impersonate();
            //Do the work that you want within the impersonated users context.
        impersonationContext.Undo(); 
```

在模拟和撤消之间，用户被模拟并且所有代码都以该用户身份运行。我知道此示例中的用户是相同的，但假设线程持有的用户与运行进程的用户完全不同（用户输入的内容或类似内容）。希望这可以帮助 ：-）

# wordpress - WP：按名称识别页面和页面父级（if 语句）

> ID：13066374
> 
> 赞同：0
> 
> 时间：2012-10-25T10:15:30.750
> 
> 标签：wordpress, if-statement, parent-child

我正在尝试根据当前的 Wordpress 页面或子页面显示内容，使用页面标题而不是 ID。

我所拥有的是：

```
<?php if ( is_page( array( 'About', 'Chi Siamo' ) ) || ( get_the_title( $post->post_parent ) == ( array( 'About', 'Chi Siamo' ) ) ) ) { ?>
<p>Hello Joe</p>
<?php } else {} ?> 
```

不知道为什么，但它正在识别页面名称，而不是该页面的子页面。

谁能看到我可能做错了什么？语法错误？

谢谢

PS。我也试过

```
<?php if (get_the_title() || get_the_title( $post->post_parent ) == array( 'About', 'Chi Siamo' ) ) { ?> 
```

但这对所有页面都返回 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:42:30.267

有点困惑为什么要使用帖子标题来执行此操作，因为帖子标题不是唯一的，因此两个页面可以具有相同的标题。如果其中一个具有子页面而另一个则不是所需的输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:00:06.440

我会从你的条件的第二部分删除外括号：`( get_the_title( $post->post_parent ) == ( array( 'About', 'Chi Siamo' ) ) )`并确保`$post`它实际上是你认为的那样。

试着`var_dump($post)`看看是否`post_parent`真的存在。

按标题检查页面很难看（slug 或 id 确实更可取），尤其是在寻找他们的祖先时。PHP 的美妙之处在于它是动态的，您无需在每次安装主题时手动更改 ID。为什么不获取当前页面的 ID，然后将其传递给[get_ancestors](http://codex.wordpress.org/Function_Reference/get_ancestors)呢？

将该数组存储在一个变量中，也许`$ancestors`是 ，然后`$ancestors[0]`将是父页面的 ID。`get_the_title`那个ID，然后检查那是“关于”还是“Chi Siamo”。

**更新：**

这是我以前的可复制代码形式的答案：

```
$ancestors = get_ancestors($post->ID);
$parent_id = $ancestors[0]
$parent_title = get_the_title($parent_id); 
```

然后你的条件

```
if ( is_page(array('About', 'Chi Siamo' )) || $parent_title == 'About' || $parent_title == 'Chi Siamo') {
    echo '<p>Howdy</p>';
} else {} 
```

# javascript - 如果用户关闭浏览器则运行函数

> ID：13066375
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:15:34.870
> 
> 标签：javascript

我有这个功能的问题。我将解释 - 如果用户关闭浏览器，我必须执行函数。这个函数是用 JavaScript-saveCookieScriptPrefOnLogOut() 编写的。

我有这个解决方案（我使用 StackOverFlow 中的信息编写了这个）：

```
var inFormOrLink;
$('a').live('click', function() { inFormOrLink = true; });
$('form').bind('submit', function() { inFormOrLink = true; });

$(window).bind('beforeunload', function(eventObject) {
var returnValue = undefined;
if (! inFormOrLink) {
    saveCookieScriptPrefOnLogOut();
}
saveCookieScriptPrefOnLogOut();
return true;
}); 
```

这个解决方案的问题是：每个浏览器都会显示带有问题“你真的要关闭吗？”的窗口。

我必须隐藏此信息/窗口。第二个问题（不太重要但仍然） - 当我单击链接或表单提交时，FF 和 IE 运行此功能。我需要忽略链接并提交表单。

解决方案必须是跨浏览器解决方案（Windows 上的 IE、Chrome、FF。最重要的是 IE）。我可以使用 PHP 和 javascript。

你能告诉我如何解决这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:23:23.597

尝试这个：

```
var inFormOrLink = false;

$('a').live('click', function() { inFormOrLink = true; });
$('form').live('submit', function() { inFormOrLink = true; });

$(window).bind('beforeunload', function() {
    if( !inFormOrLink ) {
        saveCookieScriptPrefOnLogOut();
    }
}); 
```

如果您`undefined`从事件处理程序返回（没有`return`语句隐式返回`undefined`），则不会出现对话框。此外，`saveCookieScriptPrefOnLogOut`无论`inFormOrLink`.

# postgresql - 在触发函数中检索用户名

> ID：13066376
> 
> 赞同：3
> 
> 时间：2012-10-25T10:15:39.273
> 
> 标签：postgresql, triggers

在我们的数据库中，我们有一个`login`包含列`username`和`password`. 如何在触发器函数中检索此用户名，以便也可以对其进行审核。`user`触发函数中的关键字检索 postgresql 用户名，我需要的是应用程序用户名。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:06:31.560

您可以在`postgresql.conf`. 使用它在登录时存储应用程序用户名，使用`SET myapp_username`. 在触发器中访问它`current_setting(myapp_username)`

或者，在用户登录时创建一个`TEMPORARY`表，并在登录时`INSERT`将用户的应用程序用户名放入其中。`SELECT`它在需要的地方触发。

当然，这两者都要求用户不能直接运行自定义 SQL，但这通常是应用程序级身份验证的要求，就像您正在使用的那样。

[将用户 ID 传递给 PostgreSQL 触发器](https://stackoverflow.com/q/13172524/398670)中的更多详细信息

# django - django权限错误？

> ID：13066377
> 
> 赞同：1
> 
> 时间：2012-10-25T10:15:40.453
> 
> 标签：django, permissions

尝试使用管理界面添加模型条目后，出现以下错误：

```
[Errno 13] Permission denied: '/dev/website/app/media/pictures/2.1.0_screenshot.jpg' 
```

问题是，我已经在这个文件夹中添加了几个项目。如何更正权限，为什么会更改？

该文件夹的权限：

```
-rwxr-xr-x 1 root root     3967 2012-10-18 13:05 example.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:59:06.473

您需要从运行 django 应用程序的内容中为用户设置权限。

# html - 如何从 html5 和 css2 制作 epub

> ID：13066381
> 
> 赞同：0
> 
> 时间：2012-10-25T10:15:45.893
> 
> 标签：html, epub, adobe-indesign

我有一本书是用 Adob​​e Indesign 设计的。这本书印刷时有问题，答案在翻页中。孩子们将向上、向右、向左或向下方向抬起襟翼以查看答案。

我想要的是在数字输出中复制这个确切的功能并制作一个 ePub，以便我们可以在 iPad 上运行它。所以我的问题是：

a）如何在 Indesign 中放置那种翻转动画
b）如果我用 Jquery 用 HTML5 和 CSS2 开发整个东西，那么如何编译它。在创建了必要的动画和 HTML、css 和 jquery 中的翻转效果后，我尝试使用 ePub Maker。但编译后尝试在 iPad 中运行时显示错误。

谢谢是提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:49:48.597

如果您的意图是向 iPad 提供动画内容，请尝试使用 Apple 的 iBooks Author。它是免费下载的，而且非常简单。我不知道它是否完全符合您要实现的那种动画，但如果不是，也许有一个替代动画也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:44:03.813

我通过使用 jquery show/hide 方法解决了它。

$(document).ready(function() { $('#q1, #ans1, #q2, #ans2, #modal').hide();

```
$('#btn1').click(function(){
    $('#q1, #modal').show();
    $('#btn1, #btn2').hide();
});

$('#q1').click(function(){
    $('#ans1').show();
    $('#q1, #btn1, btn2').hide();
});

$('#ans1').click(function(){
    $('#ans1, #modal').hide();
    $('#btn1, #btn2').show();
});

$('#btn2').click(function(){
    $('#q2, #modal').show();
    $('#btn1, #btn2').hide();
});

$('#q2').click(function(){
    $('#ans2').show();
    $('#q2, #btn1, #btn2').hide();      
});

$('#ans2').click(function(){
    $('#ans2, #modal').hide();
    $('#btn1, #btn2').show();
}); 
```

});

# mysql - MySQL 将 TSV 导出到 STDOUT，而不是文件

> ID：13066396
> 
> 赞同：1
> 
> 时间：2012-10-25T10:16:39.437
> 
> 标签：mysql, postgresql

我正在尝试这样做：

```
mysql -u root old_db -e "SELECT some_fields FROM huge_table INTO OUTFILE ..." \
 | cat header.sql - trailer.sql \
 | psql new_db 
```

其中 header.sql 包含：

```
COPY huge_table (some_fields) FROM stdin; 
```

而 trailer.sql 只包含`\.`终止流。

我一生都无法弄清楚如何让 MySQL 将制表符分隔的值转储到 STDOUT 中，以便该管道可以工作。我尝试将 /dev/stdout 指定为路径，但它声称没有权限。

我正在尝试这样做以尽快将数据从 MySQL 获取到 PostgreSQL。写入磁盘并返回 PostgreSQL 的时间太慢了。

我注意到，如果您将查询通过管道传输*到*MySQL，它几乎会输出一个 TSV，但不完全是。

有什么办法可以做到这一点，还是我在鞭打一匹死马？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:20:02.223

PostgreSQL`COPY`不需要制表符分隔；只需使用`\copy tablename from stdin csv`.

如果您无法让 MySQL 写入管道打开的命令，或直接写入 stdout，以便您可以使用 shell 将其输出通过管道传输，则有一个使用 unix[命名管道](http://linux.die.net/man/3/mkfifo)的经典解决方法：

```
$ mkfifo copy_fifo
$ psql dbname '\copy table1 from copy_fifo csv' 
```

然后在另一个终端：

```
$ mysql -u root old_db -e "SELECT some_fields FROM huge_table INTO OUTFILE copy_fifo FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"'" 
```

或者尝试：

```
$ mysql dbname -B -e "SELECT some_fields FROM huge_table" | psql dbname '\copy table1 from stdin' 
```

尽管在 s 存在的情况下这不太可能起作用`NULL`。

另一种选择是使用标志和 根据[手册](http://dev.mysql.com/doc/refman/5.0/en/mysqldump.html)`mysqldump`生成类似 CSV 的输出。管道的输出到.`-T``--fields-terminated-by=..., --fields-enclosed-by=..., --fields-optionally-enclosed-by=..., --fields-escaped-by=...`[`mysqldump`](http://dev.mysql.com/doc/refman/5.0/en/mysqldump.html)`mysqldump``psql`

# c# - 如何在 C# 中使用 struct 创建字典属性？

> ID：13066397
> 
> 赞同：0
> 
> 时间：2012-10-25T10:16:39.170
> 
> 标签：c#, properties, dictionary

我有一个包含结构作为键的字典，我必须为字典创建一个属性

```
private Dictionary<string, Data> m_dictParam;

   struct Data
    {
        public string MinValue { get; set; }
        public string MaxValue { get; set; }
    } 
```

我想使用该结构创建字典的属性

当我尝试这样做时

```
 public Dictionary<string,Data> MinMax
    {
        get;
        set;
    } 
```

发生此错误：

> *不一致的可访问性属性类型 system.Collections.Generic.Dictionary*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:18:24.067

您需要将结构定义为公共的。您的属性是公共的，但结构不是，因此任何只能访问公共事物的组件都无法使用您的属性，因为它无法识别密钥类型。

```
public struct Data
    {
        public string MinValue { get; set; }
        public string MaxValue { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:18:35.670

您的`Data`struct 是 non- `public`，并且您正试图公开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:18:48.417

事实是结构是内部的，尝试将其声明为

```
public struct Data {
    // etc
} 
```

# air - IOS 的 Flash Builder 4.7 移动项目错误？

> ID：13066399
> 
> 赞同：0
> 
> 时间：2012-10-25T10:16:55.003
> 
> 标签：air, flash-builder, beta, beta-testing

我正在使用 Flash Builder 4.7 beta 2 中的 iPhone 应用程序。我正在使用 Air 3.4（Actionscript 3.0 移动项目（目标 ios（在 win 上开发）））我正在使用提供的编译器。（我猜这是一个新的编译器）

一些故事：

对于动画包，我使用的是我在 Flash CS6 中打包的 swc。现在，为了便于使用，我决定将所有内容打包在 1 个 swc 中，同时打包 960x640（PNG 格式）的背景图像。我将它转换为movieclip并设置链接，但它没有出现在舞台上。然后我把它转换成jpeg，一切都很顺利。我需要那个 PNG 层，因为它会有一个空白空间，里面有一些其他的东西（它有一个窗口）。那么它是一个已知的错误吗？Flash Builder 4.7 beta 2“功能”还是什么？有什么想法吗？

问题是：

在模拟器中的调试模式（尚未在导出最终版本上测试）中，png背景是不可见的，尽管我将它作为具有所有参数的对象。如果我在 photoshop 中将图像更改为 jpeg - 再次重新编译 SWC - 我得到背景 - PNG24/PNG8 - 背景不可见。

我知道在 adobe 论坛上可能有更多帮助，但使用起来很麻烦。+ 我是一名开发人员和编码员，所以我更喜欢堆栈的知识方式 + 它可能会帮助一些正在搜索网络的人。我通常先搜索堆栈。

# jquery-mobile - 获取“添加到主屏幕”以忽略 jQuery Mobile 子页面

> ID：13066401
> 
> 赞同：0
> 
> 时间：2012-10-25T10:16:54.823
> 
> 标签：jquery-mobile

例如，当有人在“#settings”页面上将我的网络应用程序添加到他们的主屏幕时，当他们点击图标时，设置页面就会被加载。

有没有办法让图标始终启动主页，无论用户从哪个页面添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:24:50.720

我不确定是否有，因为`add-to-homescreen`就像在指定的页面上添加书签并且无法修改被添加书签的 URL（至少我不知道......）

您可以做的是重定向客户端/服务器端。

例如，我正在检查页面，用户是否登录，如果没有，我会重定向到登录页面。因此，可以将书签添加到...比如说设置页面，但用户将始终被重定向到登录，这也应该适用于您的情况。

# git - 有没有办法制作所有 git 子模块的包？

> ID：13066415
> 
> 赞同：0
> 
> 时间：2012-10-25T10:17:33.187
> 
> 标签：git, git-submodules

我的项目有一堆git子模块，每次我克隆我的项目时，都需要很长时间才能克隆所有子模块。

有没有办法将所有子模块作为一个包，所以也许我可以解压缩它们，拉新提交，而不是全部克隆它们？

我已经尝试在以前的 git 版本中将子模块目录打包在一起，并且由于子模块的 git 根目录就在 path/to/submodule/.git 中，它工作正常，但最近，我发现他们把子模块 git root 集中在 .git/modules/path/to/submodule/.git 中，所以这种方式现在行不通。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:35:36.267

git 工作树旨在自包含；您应该能够复制整个树、子模块和所有内容，并将其放置在需要去的任何地方。

你说“*每次我克隆我的项目......* ” - 你能解释一下你正在使用的需要你多次克隆你的项目的工作流程吗？

# .net - 存储使用第一个向导页面信息的最佳方式

> ID：13066417
> 
> 赞同：0
> 
> 时间：2012-10-25T10:17:35.780
> 
> 标签：.net, web-applications, cookies

了解该主题应在之前讨论。但由于我还没有找到正确的链接来解释应该针对我的具体问题实施哪种方法，我会再问你一次。

我有很多用户可以访问一些可以浏览网页的向导。第一次他们应该更改第一页上的一些默认设置。然后选择下一个链接。每次如果他们已经更新了设置，他们应该直接获得第二页（但从这里他们仍然有一个指向前一个第一页的链接）。问题是必须如何存储必要的信息以及存储在哪里。

1.  可以使用 cookie，并且每次根据值使用 jquery 脚本重定向用户（请理解，没有人保证所有客户端的正确工作）
2.  可以将值保存在应用程序上下文中的某处
3.  可以将此状态存储到数据库

选择哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:59:44.913

假设您有`SettingsN`每个页面的结构，而不是您可以`Request.Session`在回发时存储每个结构。这将允许您检查填写了哪个页面，并在用户处理时将这些数据保存在服务器上。

# html - mikeal 请求格式错误的正文

> ID：13066418
> 
> 赞同：1
> 
> 时间：2012-10-25T10:17:36.853
> 
> 标签：html, node.js, zip, request

我正在使用麦克尔/请求。我在使用某些网页时遇到问题：

```
var url='http://www.youtube.com/watch?v=YbP1K-bQB6g&list=SP018BE450221B431B';
var request = require('request');
request(url, function (error, response, body) {      
    console.log(body);      
}) 
```

这将打印格式良好的 html 正文。有时使用不同的 url，它会打印如下内容：

```
ÿÿ´Wmo7þ|ú¦{@ã »ZÉ9ŸãÄ2 ØªOl+¶Ü4W½K­èì’[’+K.úé~ ecc... 
```

但是当我通过浏览器浏览它时，我可以清楚地看到页面。有什么建议吗？我已经尝试使用 StringDecoder 对其进行解码，但什么也没有……我正在使用此 url 来获取错误：

```
http://www.agi.it/estero/notizie/201210250805-est-rt10017-performance_stellari_e_10_ore_autonomia_e_gia_ipad_mini_mania 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:29:36.987

看起来，响应是压缩的。如果您无法让服务器遵守您的请求标头，则需要对响应进行解码。

**编辑**：您可以像这样显式设置请求标头：

```
request({ url: <your url>, headers: { 'accept-encoding': 'identity' }}, function (error, reponse, body) {
  // You really should receive an un-encoded body, now
}); 
```

# java - 总是收到 JDBC 批量更新错误

> ID：13066423
> 
> 赞同：0
> 
> 时间：2012-10-25T10:17:51.657
> 
> 标签：java, mysql, hibernate, struts

我是 hibernate 新手，我正在开发一个使用 MySQl、Hibernate 和 Struts 的应用程序。对于给定的代码，我总是收到以下错误。我为这个错误做了谷歌，但那些线程没有帮助。

**错误**

```
javax.servlet.ServletException: Could not execute JDBC batch update
    at org.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:516)
    .... 
```

**代码**

```
Session session = new HibernateSession().currentSession(this.getServlet().getServletContext());
        if(auctionform.getId() == null || auctionform.getId().intValue() == 0){
            auction.setId(null);
            auctionform.setId(null);
        }else{
            auction.setId(auctionform.getId());
            Criteria criteria = session.createCriteria(Auction.class);
            criteria.add(Restrictions.idEq(Integer.valueOf(req.getParameter("id"))));
            auction = (Auction) criteria.uniqueResult();

        }

        Boolean isAuctionActive = false;
        Calendar currentDate = Calendar.getInstance();
        SimpleDateFormat formatter= new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");

        Date auctionEndingDate = DateUtils.getDate(req, "auctionenddate");
        Date todaysDate = formatter.parse(formatter.format(currentDate.getTime()));

        if(auctionEndingDate.after(todaysDate)){
            isAuctionActive = true;
        }

        auction.setDescription(auctionform.getDescription());
        auction.setDate(auctionform.getDate());
        auction.setCurrentprice(auctionform.getCurrentprice());
        ....some code

        Attachment attachment1 = AttachmentUtils.saveAttachment(auctionform, session, auction, 0);
        Attachment attachment2 = AttachmentUtils.saveAttachment(auctionform, session, auction, 1);
        Attachment attachment3 = AttachmentUtils.saveAttachment(auctionform, session, auction, 2);

        Transaction transaction = session.beginTransaction();
        if(attachment1!=null){
            session.save(attachment1.getDbFile());
            session.save(attachment1.getThmnailDbFile());
            session.save(attachment1);
            auction.setFirstimage(attachment1);
        }
        if(attachment2!=null){
            session.save(attachment2.getDbFile());
            session.save(attachment2.getThmnailDbFile());
            session.save(attachment2);
            auction.setSecoundimage(attachment2);
        }
        if(attachment3 != null){
            session.save(attachment3.getDbFile());
            session.save(attachment3.getThmnailDbFile());
            session.save(attachment3);
            auction.setSignimage(attachment3);
        }

        session.saveOrUpdate(auction);
        transaction.commit();
        session.flush(); 
```

我总是`transaction.commit()`在线上遇到这个错误。我不明白出了什么问题。

**更新：**

我设置了 log4j，完整的堆栈跟踪如下。

**完整的堆栈跟踪**

```
Caused by: java.sql.BatchUpdateException: Incorrect string value: '\xE5\x8F\x96\xE3\x82\x8A...' for column 'BIDDERRESTRICTION' at row 1
    at com.mysql.jdbc.ServerPreparedStatement.executeBatch(ServerPreparedStatement.java:647)
    at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
    at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:57)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:174)
    ... 34 more
2012-10-25 17:26:29 [action] [ERROR] Servlet.service() for servlet action threw exception
java.sql.BatchUpdateException: Incorrect string value: '\xE5\x8F\x96\xE3\x82\x8A...' for column 'BIDDERRESTRICTION' at row 1
    at com.mysql.jdbc.ServerPreparedStatement.executeBatch(ServerPreparedStatement.java:647)
    at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
    at org.apache.tomcat.dbcp.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:57)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:174)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:226)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:137)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:274)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:730)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:324)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:86)
    at net.startbahn.web.app.PostAuctionVPAction.execute(PostAuctionVPAction.java:175)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:421)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:415)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at net.startbahn.filters.PrivilegeManageFilter.doFilter(PrivilegeManageFilter.java:112)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at net.startbahn.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:121)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Thread.java:722) 
```

我试图在列中存储一些日语内容，所以我尝试将表的排序规则更新为**COLLATE = ujis_japanese_ci**和**UTF-8**，但仍然没有效果。

# **解决方案：**

将表的排序规则及其所有字段设置为**utf8-utf8_bin**对我来说是诀窍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:42:20.560

在 jdbc 连接中设置 UTF8 字符编码。这可以在 hibernate.cfg.xml 文件中完成，例如

```
<property name="connection.url">
    jdbc:mysql://db-server:3306/databasename?useUnicode=true&amp;characterEncoding=utf8
</property> 
```

（也许这两个选项中只有一个是必要的。我没有尝试，我不使用日语；。）

# php - joomla css在gmail中不起作用

> ID：13066424
> 
> 赞同：0
> 
> 时间：2012-10-25T10:17:52.907
> 
> 标签：php, joomla

我正在使用样式标签在 joomla 中为我的邮件模板添加样式，但它在 gmail 中不起作用。但如果我将它添加为内联样式，它就可以正常工作。任何人请帮助

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:22:45.840

在此处阅读有关邮件模板标记规则的更多信息[http://www.sitepoint.com/designers-guide-html-email/](http://www.sitepoint.com/designers-guide-html-email/)

邮件模板标记与浏览器的标记有点不同。不要使用`div`，例如。你需要用 nasty`table`代替。

# ios - AVCaptureConnection videoOrientation AVCaptureConnectionPreviewlayer 方向 iOS

> ID：13066425
> 
> 赞同：1
> 
> 时间：2012-10-25T10:17:56.747
> 
> 标签：ios, camera, orientation

我正在尝试制作一个显示相机预览的应用程序，并在按下按钮时单击图像。

我想在设备旋转时旋转预览，所以我正在使用

直到现在我都在使用`previewlayer.orientation = toInterfaceorientation`该`willAutoRotateToInterfaceOrientation`方法。但是现在当我在 iOS6 上运行我的应用程序时，我收到一个警告，`setOrientation`即现在不推荐使用预览层的方法。

另外，我认为现在这只是为了“查看”预览，图像的实际方向不会改变，无论我的“连接”视频方向是什么，它都会保持不变！

所以，建议使用`setVideoOrientation`AVCaptureConnection 的方法。我正在尝试使用它，但我不知道该怎么做。我想支持左右横向（以后也可能是纵向模式）。

所以我写在`willAutoRotateToInterfaceOrientation`

```
 `if([connection isVideoOrientationSupported])  
    {  
        if(toInterfaceorientation == UIInterfaceOrientationLandscapeLeft)  
        {  
           [connection setVideoorientation:AVCaptureConnectionVideoOrientationLandscapeRight];  
        }    
if(toInterfaceorientation == UIInterfaceOrientationLandscapeRight)  
        {  
           [connection setVideoorientation:AVCaptureConnectionVideoOrientationLandscapeLeft];  
        }  
    }` 
```

但这并没有真正起作用，在 LandscapeRight 的情况下它可以正常工作，但在 LandscapeLeft 的情况下它会旋转 180 度。

我检查了该`willAutoRotateToInterfaceOrientation`方法正在被调用，并且块内的语句正在执行（通过设置断点），尽管结果方向好像这个方法是空的！

我希望这也会改变图像的实际方向。

# javascript - RequireJS 和 JS 模块模式

> ID：13066427
> 
> 赞同：9
> 
> 时间：2012-10-25T10:18:08.960
> 
> 标签：javascript, requirejs

我目前正在开发一个使用具有“模块模式”的多个 javascript 文件的 Javascript 应用程序。像这样：

```
var app = app || {};
app.moduleName = app.moduleName || {};

app.moduleName = function () {

    // private property
    var someProp = null;

    return {
        // public method
        init: function () {
            return "foo";
        }
    };
}(); 
```

我使用它的原因是结构化我的代码。例如，我可以通过调用 app.moduleName.init() 来调用方法或属性。

这样做的一个缺点是我必须`<script src="app.moduleName.js">`在我的 HTML 中包含很多 .. 等。

为了解决这个问题，我遇到了 RequireJS，我阅读了文档。但我不太确定如何将它合并到我现有的结构中，而不向现有的 javascript 文件添加一堆代码。

有人对如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T11:20:34.990

你可以像这样使用 require.js 构建你的模块树。

```
// in main.js
require.config({/*...*/});
require(
    ['app'],
    function (app) {
        // build up a globally accessible module tree
        window.app = app;
        var foo = window.app.moduleName.init(); // returns "foo"
    }
);

// in app.js
define(
    ['moduleName'],
    function(moduleName){
        return {
            moduleName: moduleName;
        }
    }
);

// in moduleName.js
define(function(){
    // private property
    var someProp = "foo";
    return {
         // public method
        init: function () {
            return someProp;
        }
    }
}); 
```

但是，使用 require.js，您可以在没有像这样的全局模块树的情况下构建您的应用程序......即使您可以轻松做到。您可以单独访问模块的所有部分，只是需要它们。无论你在 define/require 回调中返回什么，都会被 require.js 存储为引用。知道这一点很重要。因此，可以在您的应用程序中包含两次脚本并拥有相同的对象或实例。例如，如果您包含这样的模块

```
// in SomeClass.js
define(function () {
    function SomeClass() {
        this.myValue = true;
    }
    return new SomeClass();
});

// app.js
define(
    ['SomeClass', 'someComponent'],
    function (SomeClass, someComponent) {
        return {
            init: function () {
                SomeClass.myValue = false;
                someComponent.returnClassValue(); // logs false
            }
        };
    }
);

// someComponent.js 
define(
    ['SomeClass'],
    function (SomeClass) {
        return {
            returnClassValue: function () {
                console.log(SomeClass.myValue); // false
            }
        };
    }
); 
```

SomeClass.myValue 的值在所有包括模块中都是相同的......

# javascript - 用于 IE 的 Ckeditor 复制节点复制功能

> ID：13066429
> 
> 赞同：1
> 
> 时间：2012-10-25T10:18:13.780
> 
> 标签：javascript, internet-explorer, ckeditor

我有一个节点复制功能。

此函数可能是 IE 上的 setHtml 问题的替代函数。

我想复制 Attributes 和 innerText（对于 EveryNode）。

我的问题是每个节点都有**（可能是）文本**+一些节点。

我想按节点复制节点如下所述的条件

1.仅当前节点的文本（不是 InnerNodes 文本）

2.子节点与其所有属性重复

我的功能如下：

```
 function NodeDuplicateCreator(DummyNode, RealNode) {
            var XnodefromReal = RealNode.getChildren();
            for (var i = 0; i < XnodefromReal.count(); i++) {
                if (XnodefromReal.getItem(i).$.nodeType == 1) {
                    var xnode = XnodefromReal.getItem(i);
                    var xnodeName = xnode.getName();
                    var NewNodeGen = DummyNode.getElementsByTag(xnodeName).getItem(0);
                    if (NewNodeGen == null) {
                        NewNodeGen = EditorInstance.document.createElement(xnodeName);
                        NewNodeGen.appendTo(DummyNode);
                    }
                    NodeDuplicateCreator(NewNodeGen, xnode);
                }
            }
        } 
```

请根据我的要求改进它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:45:20.020

尝试`copyAttributes(node)`对属性使用函数

尝试下面的代码到 textcontent+childnodes

```
if(XnodefromReal.getItem(i).$.nodeType == 1) 
{
//for childnodes
}
else if(XnodefromReal.getItem(i).$.nodeType == 3) 
{
//for text content
} 
```

# android - 当网络从 GPRS 切换到 Wifi 时接收 3 个广播

> ID：13066438
> 
> 赞同：5
> 
> 时间：2012-10-25T10:18:24.233
> 
> 标签：android

当网络从 GPRS 切换到 Wifi 时，我收到了 3 次 android.net.conn.CONNECTIVITY_CHANGE 的广播。

在 onReceive() 中，我使用下面的代码来判断 Wifi 是否连接。但是我也收到了 3 次“Wifi Connected”的消息，并且 doSomething() 被调用了 3 次。

```
ConnectivityManager connManager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo wifiInfo = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
if(wifiInfo.isConnected()) {
    Log.v(Constant.APP_NAME, "Wifi Connected.");
    doSomething();
} 
```

我只想收到一条“Wifi Connected”的消息，并且只调用一次 doSomething()。我应该怎么做？

谢谢你。并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:33:44.360

创建一个检查消息的布尔标志值，如果您希望它可以从其他地方访问，请将其设为静态，例如

```
public static boolean flagConnected = false;

ConnectivityManager connManager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo wifiInfo = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
if(wifiInfo.isConnected() && flagConnected == false) {
flagConnected = true;
Log.v(Constant.APP_NAME, "Wifi Connected.");
doSomething();
} 
```

在 doSomething(); 之后 您可以再次将标志的值更改为 false

```
ClassName.flagConnected = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:42:59.407

在 Receiver 类中声明一个整数变量...

公共静态int i = 0；

并将您的代码置于此条件下

```
if((++i)%3==1){
//your whole stuff here..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:22:41.307

我认为您可能忘记在 onPause / onStop 中取消注册您的广播接收器。

# php - 普通的mysql和PDO可以同时使用吗？

> ID：13066446
> 
> 赞同：2
> 
> 时间：2012-10-25T10:18:42.407
> 
> 标签：php, pdo

我正在处理的这个站点使用普通的 mysql_query()-stuff。我想使用 PDO 扩展。
我遇到的问题是，当我尝试将 PDO 连接与 mysql 连接一起添加到站点的最顶部时，找不到 PDO 类。

这有点奇怪，因为如果我在服务器上的任何地方启动一个空白文档，它就可以正常工作，没有任何问题。
如果我在我的公用文件夹的根目录中或在我的 pages/ - 目录中创建一个新文档，然后直接转到该文档 - 一切都会很好。

我还为子域创建了一个新文件夹，基本上使用 PDO 创建了一个新站点，没有任何问题。

有谁知道什么可能导致这种行为？
是因为我使用的是普通的mysql连接吗？

我检查了 phpinfo(); 在网站内，它没有被列出。(mysite.com/?page=phpinfo)
但是当我在任何直接文档中检查 phpinfo 时，它会被列出... (mysite.com/pages/phpinfo.php)
*上面的两个 url 都指的是同一个文档*

# c++ - 通过 ReadFile() 函数读取文件期间检查文件结尾

> ID：13066450
> 
> 赞同：2
> 
> 时间：2012-10-25T10:18:46.993
> 
> 标签：c++, c, winapi

如何在下一个代码中检查文件结尾。我尝试编写可以一个一个读取 wchar_t 符号的函数，同时读取一些定义较早的符号，但是如果读取 EOF 函数必须停止。

```
wchar_t wchr[1];    
BOOL b = TRUE;

do
{
    b = ReadFile(hReadFile, wchr, sizeof(wchar_t), &dw, NULL);
    if(!b)break;         //it doesn't work
    tempGetLine[size] = wchr[0];
    size++;
}while(wchr[0] != endSymbol); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:24:04.807

检查是否`ReadFile`位于文件末尾的方法是检查它已读取的字节数与您请求的字节数。那是：

```
if(!b)break; 
```

应该读：

```
if(dw != sizeof(wchar_t)) break; 
```

# iphone - 有 IBOutlet 和没有 IBOutlet 有什么区别

> ID：13066456
> 
> 赞同：0
> 
> 时间：2012-10-25T10:19:02.397
> 
> 标签：iphone, ios, iboutlet

> **可能重复：**
> [IBOutlet 和 IBAction](https://stackoverflow.com/questions/1643007/iboutlet-and-ibaction)

我是 iphone 开发的新手，有一些基本问题要问。我有兴趣了解三个代码之间的区别。第一个代码：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIScrollViewDelegate> {
    UIScrollView *scrollView;
}

@property (nonatomic, retain) IBOutlet UIScrollView *scrollView; 
```

第二个代码：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIScrollViewDelegate> {
    IBOutlet UIScrollView *scrollView;
}

@property (nonatomic, retain) IBOutlet UIScrollView *scrollView; 
```

第三个代码：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIScrollViewDelegate> {
    IBOutlet UIScrollView *scrollView;
}

@property (nonatomic, retain) UIScrollView *scrollView; 
```

需要对此进行一些澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:28:33.853

IBOutlet 关键字用于将 Interface Builder 中的内容连接到代码。请参阅[https://developer.apple.com/library/mac/documentation/General/Devpedia-CocoaApp-MOSX/Outlet.html](https://developer.apple.com/library/mac/documentation/General/Devpedia-CocoaApp-MOSX/Outlet.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:24:00.273

IBOutlet 被编译器忽略，所以这3个代码对于编译器来说是等价的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:26:42.813

`IBOutlet`'ed 到一个空的令牌（什么都`#define`没有），所以它是否被使用并不重要。除了 Interface Builder 使用它来发现要在 XIB 文件中连接和使用的对象。（作为初学者，我强烈建议您学习如何以编程方式制作 UI，并且仅当您可以使用代码制作 UI 时才使用 Interface Builder。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T10:29:33.397

都是一样的...

如果我们想将在 .h 文件中创建的对象与在界面生成器中拖动的对象连接起来，那么我们必须使用 IBOutlet..

我们可以在声明对象或为其创建属性时使用 IBOutlet。如果我们写两次 IBOutlet 也没有问题

# php - 我应该如何在 PHP 中设置可以在包含中访问的配置？

> ID：13066458
> 
> 赞同：0
> 
> 时间：2012-10-25T10:19:07.110
> 
> 标签：php

我正在构建一个 PHP 应用程序，但我不太确定如何存储可以在任何地方真正访问的全局配置设置 - 似乎包含的内容无法访问主起始页面中包含的其他内容**。**例如，如果 index.php 包含 foo.php 和 bar.php，则 bar.php 没有 foo.php 但 index.php 两者都有 - 包含的文件不能引用其他文件。它是否正确？

如果是，我将如何设置这样的东西？

索引.php

```
<?php
include 'functions/load.php'
echo getHeader();
?> 
```

函数/加载.php：

```
<?php
include_once 'config.php'
include_once 'header.php'
//loads the includes
?> 
```

函数/config.php：

```
<?php
//I want to store the site URL here.
$siteURL = "http://127.0.0.1";
?> 
```

函数/header.php：

```
<?php
function getHeader(){
    return "Header for " . $siteURL;
}
?> 
```

如何设置一个可以在任何地方访问的配置文件，包括在其他包含的文件中？此外，是否包含列出其他文件的文件是否包含良好做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:28:56.127

最好包含一个`bootstrap.php`文件，该文件将包含所有必要的要求。引导程序还应该定义一个自动加载器，它能够自动加载类而无需明确要求。

但是无法自动加载函数，因此在`bootstrap.php`使用`require_once()`. 有关其他选择，请参阅[此问题](https://stackoverflow.com/questions/4737199/autoloader-for-functions)。

理想情况下，您的应用程序只有一个“入口点”，称为“前端控制器”。如果是这样，那么您只需要`bootstrap.php`在此文件的顶部要求您的一次。

## 编辑：关于配置的注意事项

您也可以在引导程序中加载配置。你如何做到这一点取决于你......你可以直接将所有变量放在 中`bootstrap.php`，或者你可以从那里要求你的配置。最佳做法是将配置存储在单独的文件中。

通过 PHP 数组进行配置：

```
# in /path/to/config.php (not in a publically accessible directory!)
return array(
    'site_url' => '127.0.0.1', 
    'example' => array(
        'animal' => 'cat', 
        'vehicle' => 'car'
    )
)

# in bootstrap.php
$config = require_once('/path/to/config.php');

# anywhere else
$siteUrl = $config['site_url'];
$animal = $config['example']['animal']; 
```

或者您可以使用 INI 文件：

```
# in /path/to/config.ini (not in a publically accessible directory!)
[site]
url = 127.0.0.1

[example]
animal = cat
vehicle = car

# in bootstrap.php
$config = parse_ini_file('/path/to/config.ini', true); 

# anywhere else
$siteUrl = $config['site']['url'];
$animal = $config['example']['animal']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:25:46.570

您只需包含一次您的“config.php”。最好的方法是将“require_once”放入脚本中，例如“index.php”。看看 MVC 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:34:00.517

实际上问题不在于包含文件。您已经编写了函数 getHeader() 并从外部访问变量的值。您无法从函数外部获取 $siteURL 的值。为此，您应该使用常量：

试试这样：

在 config.php 中

```
define("SITEURL","http://127.0.0.1"); 
```

在 header.php 中

```
function getHeader(){
    return "Header for " . SITEURL;
} 
```

您必须将值作为参数传递给函数或使用定义的常量。

# c# - 以下 Ruby 行做什么？“整数>>整数”

> ID：13066463
> 
> 赞同：2
> 
> 时间：2012-10-25T10:19:28.523
> 
> 标签：c#, ruby, translate

我正在尝试将一些 Ruby 代码转换为 C#，但我不明白以下行的作用。特别是“挑战>> 24”和类似的部分。

```
challenge = sprintf("%c%c%c%c".encode("ASCII-8BIT"), x(challenge >> 24), x(challenge >> 16), x(challenge >> 8), x(challenge >> 0)) 
```

挑战是前面代码中定义的整数。x 是一个接受整数参数并返回整数的方法。

我不希望任何人为我将其转换为 c#，只是一个解释就可以了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:22:11.703

`>>`是**二进制右移运算符。**

左操作数的值向右移动右操作数指定的位数。

这可能会有所帮助：[Rotate Bits Right operation in Ruby](https://stackoverflow.com/questions/3476969/rotate-bits-right-operation-in-ruby)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:22:27.177

右移位，右边的数字`>>`表示移位的次数。

C# 也有`>>`运算符，所以翻译应该很简单。

# postgresql - 从 Postgres 中的数据库转储中绘制 DataModel 的工具

> ID：13066464
> 
> 赞同：0
> 
> 时间：2012-10-25T10:19:31.050
> 
> 标签：postgresql, data-modeling

我下载了“开源站点”及其源代码，它使用 Postgres 作为数据库。它由 100 多张桌子组成，安装并使用它。请注意，在表单中添加数据时提到了许多表，然后我获取了 Postgres DB 的数据库转储。

我想知道使用图表的表之间的引用，也想在 linux 环境中寻找从转储中生成实体关系模型的工具。

如果有其他人知道这一点，请分享您的观点，

如果是，请让我知道否决票的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:18:26.540

这是一个免费但仍处于 alpha 阶段的选项[http://pgdesigner.sourceforge.net/en/index.html](http://pgdesigner.sourceforge.net/en/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:13:18.817

免费的 ER 建模工具都不*是*很好。

您可能想尝试[Power*Architect](http://code.google.com/p/power-architect/)。要获得一个初始模型，它应该足够好，但它对 DBMS 特定的数据类型和类似的东西知之甚少。但毕竟它是免费的。

如果您想要一个非常好的工具，我可以推荐[DbSchema](http://www.dbschema.com/)。它确实有点贵，但与它提供的相比，它并不是很贵。

这两个工具都是基于 Java 的，应该在 Linux 上运行。

# jquery - 点击函数内的jQuery if语句

> ID：13066469
> 
> 赞同：0
> 
> 时间：2012-10-25T10:19:47.763
> 
> 标签：jquery, if-statement

我有一个点击事件，我想根据点击的内容加载不同的 div：

```
var open = $('.open');
open.click(function(evt) {
    evt.preventDefault();
    overlay.fadeIn(400, function(){
        box.fadeIn(500);
        // if something load box2
        // if something load box3
    }); 
```

[http://jsfiddle.net/bLDXS/](http://jsfiddle.net/bLDXS/)

Open 是一个给与 box、box2 和 box3 相关的链接的类。如何加载 box2 的内容，我是否必须为它们中的每一个使用特定的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:27:18.143

> Open 是一个给与 box、box2 和 box3 相关的链接的类。如何加载 box2 的 >content，我是否必须为它们中的每一个使用特定的类？

不，您可以简单地使用 if 语句编写代码：

```
var open = $('.open');
open.click(function(evt) {
   evt.preventDefault();
    overlay.fadeIn(400, function(){
    box.fadeIn(500);
    if (cond1){ load box2 }
    else if (cond2) {load box3 }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:28:39.927

尝试这个：

```
var open = $('.open');
open.click(function(evt) {
    evt.preventDefault();
    box= $(this).attr('rel');//get the rel of your clicked link.
    overlay.fadeIn(400, function(){
        $('#'+box).fadeIn(500);//fadein the div your link relates to if it is your div's id.

    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:32:28.523

**编辑：** 看了小提琴之后，你必须给每个可点击`<p>`的 id，并加载相应的框。

html:

```
<p class="terms open" id="box1_clicker">I agree to the <a href="">terms and conditions.</a></p> 
```

JS：

```
if($(this).attr("id")=="box1_clicker") {
    // do something
} 
```

[示例小提琴](http://jsfiddle.net/bLDXS/4/ "http://jsfiddle.net/bLDXS/4/")

* * *

[您可以为每个框指定一个 id，然后使用jquery's`parent()`](http://api.jquery.com/parent/ "http://api.jquery.com/parent/")在 click 内部检查单击了哪个框的链接：

```
if($(this).parent().attr("id") == "box1") {
    //some code
}
else if ($(this).parent().attr("id") == "box2") {
    //some code
}
// so on 
```

# jakarta-ee - Tomcat-Jaas - 如何检索主题？

> ID：13066477
> 
> 赞同：5
> 
> 时间：2012-10-25T10:20:09.573
> 
> 标签：jakarta-ee, tomcat, jaas, jaspic

我正在研究 JAAS，并且正在实现一个简单的示例，以在使用带有 JaasRealm 的 Tomcat 的 web 应用程序中使用。

现在我的问题是我不知道如何检索主题，因为代码`Subject subject = Subject.getSubject(AccessController.getContext());`总是返回 null。

我正在使用 Tomcat 7.0.27。有什么我错过的吗？换句话说，如何使用 JAAS 在 Java EE 中管理授权？例如，如何在 JAAS 的安全上下文中实施操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T12:32:14.997

> 我知道并且它有效，但我需要检索主题才能获得roleprincipal

不幸的是，它在 Java EE 中不是这样工作的。JAAS 主题只是一个“主体包”，其中哪些代表用户/调用者主体和/或角色主体根本没有标准化。每个其他容器在这里做的事情都不同。[Tomcat 的 JAASRealm](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/realm/JAASRealm.html)的Javadoc 对此进行了描述并解释了 Tomcat 特定的约定（强调我的）：

> JAAS 规范将成功登录的结果描述为 javax.security.auth.Subject 实例，该实例可以在 Subject.getPrincipals() 方法的返回值中包含零个或多个 java.security.Principal 对象。但是，**它没有提供**关于如何区分描述单个用户的委托人（因此适合作为 web 应用程序中 request.getUserPrincipal() 的值返回）与描述此授权角色的委托人的指导用户。为了尽可能多地独立于 JAAS 执行的底层 LoginMethod 实现，此 Realm 实现了以下策略：[...]

除此之外，在 Java EE 环境中，您甚至很少能够访问 JAAS 主题，通常甚至无法通过供应商特定的方法。JAAS 与您认为的通用标准相去甚远，尤其是在涉及 Java EE 时。

您可以以可移植方式访问的唯一内容是调用者主体和与其关联的角色，但即使这些也不必是您的 JAAS 登录模块构造的确切调用者主体。

例如，JBoss AS 使用它自己的类复制这个主体几次。因此，如果您的 JAAS 模块将 a 存储`kaz.zak.FooPrincipal`到用户/调用者主体的主题中，则`HttpServletRequest#getUserPrincipal()`可能会返回`org.jboss.security.SimplePrincipal`. 唯一可以保证的是，`getName()`在该实例上将返回相同的字符串。

有关此主题的更多背景信息：

*   [使用 JASPIC 在 Java EE 中实现容器身份验证](http://arjan-tijms.blogspot.com/2012/11/implementing-container-authentication.html)
*   [JAAS 发生了什么？](http://java.sys-con.com/node/1002315)
*   [将 JAAS 与 Tomcat 一起使用](http://www.kopz.org/public/documents/tomcat/jaasintomcat.html)

最后一个消息来源基本上说的是同一件事，但措辞不同；

> 尽管可以在 Tomcat 中使用 JAAS 作为身份验证机制 (JAASRealm)，但是一旦用户通过身份验证，就会失去 JAAS 框架的灵活性。这是因为主体用于表示“用户”和“角色”的概念，并且在执行 webapp 的安全上下文中不再可用。身份验证的结果只能通过 request.getRemoteUser() 和 request.isUserInRole() 获得。
> 
> 这将用于授权目的的 JAAS 框架简化为一个简单的用户/角色系统，该系统失去了与 Java 安全策略的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T03:51:50.367

要检索主题，我们可以使用 LoginModule 和 Valve 的组合。在身份验证开始之前调用阀门的事实在这里对我们有所帮助。当阀门被调用时，它将会话放入 ThreadLocal 中（类似于 JBOSS 如何将请求保存在 ThreadLocal 中），然后当 LoginModule.commit() 被调用时，它将主题保存到会话中。

要配置它，请将下面类的编译代码添加到 jar 中，并将其放在 $CATALINA_BASE/lib/ 下

```
package my.test;

import java.io.IOException;
import java.util.Map;

import javax.security.auth.Subject;
import javax.security.auth.callback.CallbackHandler;
import javax.security.auth.login.LoginException;
import javax.security.auth.spi.LoginModule;
import javax.servlet.ServletException;

import org.apache.catalina.Session;
import org.apache.catalina.connector.Request;
import org.apache.catalina.connector.Response;
import org.apache.catalina.valves.ValveBase;

/**
 * Use following class to retrieve subject in your HTTPServlet when using Tomcat.
 */
public class ContainerServices extends ValveBase implements LoginModule {

    // Key to revtieve subject from session.
    public static final String SUBJECT_KEY =
        "javax.security.auth.Subject.container";

    /**
     * Session for current thread.
     */
    static InheritableThreadLocal<Session> sessionHolder =
        new InheritableThreadLocal<Session>();

    // JAAS Subject being authenticated.
    private Subject subject;

    // Invoke the value.
    public void invoke(Request request, Response response) throws IOException,
            ServletException {

        sessionHolder.set(request.getSessionInternal(true));

        try {
            // Next in the invocation chain
            getNext().invoke(request, response);
        } finally {
            sessionHolder.remove();
        }
    }

    // Initialize the login module
    public void initialize(Subject subject, CallbackHandler callbackHandler,
        Map<String, ?> sharedState, Map<String, ?> options) {
        this.subject = subject;
    }

    // Store subject to session.
    public boolean commit() throws LoginException {

        Session session = sessionHolder.get();

        if (session != null) {
            session.getSession().setAttribute(ContainerServices.SUBJECT_KEY, subject);
        }

        return true;
    }

    // not used
    public boolean abort() throws LoginException {
        return false;
    }

    // not used
    public boolean login() throws LoginException {
        return true;
    }

    // not used
    public boolean logout() throws LoginException {
        return true;
    }
} 
```

在 $CATALINA_BASE/conf/server.xml 中添加以下 Valve 配置作为元素的子元素。

> ```
> <Valve className="my.test.ContainerServices" /> 
> ```

在 jaas.config 文件中添加与 LoginModule 相同的类。

> ```
> DummyAppLogin {
>     my.test.ContainerServices required debug=true;
>     my.test.DummyAppLoginModule required debug=true;
> }; 
> ```

现在登录后，可以使用以下方式检索经过身份验证的主题。

```
session.getAttribute( ContainerServices.SUBJECT_KEY ); 
```

# android - 确保在购买后稍后调用下载时允许从我的服务器下载之前购买项目

> ID：13066484
> 
> 赞同：0
> 
> 时间：2012-10-25T10:20:32.973
> 
> 标签：android, security, webserver, signature, in-app-purchase

我有以下情况：

1.  我有一些想要出售的物品
2.  用户购买了该商品，并标记为“已购买”。现在用户可以下载文件了。
3.  用户按下“下载”按钮并下载文件（它必须是一些唯一的链接）

我阅读了所有应用内计费文档，第 1 步和第 2 步对我来说很好。如何在 android 端实现第 3 步？

我想这是这样的：

1.  应用程序将产品 ID 发送到我的服务器
2.  我的服务器以随机数响应
3.  我将此 nonce 和产品 ID 发送到 Google Play
4.  Google Play 向我返回一张签名票（nonce 和产品 ID）
5.  我将此签名票发送到我的服务器
6.  我的服务器返回应用程序的文件

目前我只能处理购买状态发生变化的信息，但如果我先购买该项目，然后再安全下载它怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:41:13.640

The user can definitely download the file at a later point in time. There are two ways to approach this:

**Managed Purchases**

A managed purchase is a one-time in-app billing purchase. These kinds of purchases would be for things like permanent access to content or permanent upgrades to an app (think "pro" versions). If your purchase is a managed purchase (which means the Google servers always know about the purchase) then you can follow your steps 1-6 at any point in time, allowing the user to download the file at their convenience.

**Unmanaged Purchases**

An unmanaged purchase is for things like video game money, where you want the user to be able to make the purchase multiple times. Unmanaged purchases need to be handled by your servers and cannot involve Google Services after the transaction has been completed. In this case, you register the purchase with your server, and then afterwards you can allow the user to download the file at any point in time simply by authenticating them with your server.

Let me know if you have any additional questions and I would be happy to help.

# design-patterns - 开放封闭原则与策略模式

> ID：13066488
> 
> 赞同：5
> 
> 时间：2012-10-25T10:21:03.247
> 
> 标签：design-patterns, solid-principles

我已经阅读了策略模式和开放封闭原则在我看来都是一样的。如果它们相同，为什么我们有不同的名称模式 \principle 。

请分享您对此的看法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T13:41:34.827

OCP 比 Strategy 在更一般的层面上出现 - 这就是为什么它是一个**原则**而不是一个**模式**。OCP 并没有说明应该有一个 X 类来执行 Y 和 Z 并以 W 方式与另一个类协作。它只声明*类应该对修改关闭，但对扩展开放*。

您可以通过将类的一些职责外化到 Strategy 并编写新的 Strategies 来实现类中的 OCP，而不是修改类本身，但这并不是尊重 OCP 的唯一方法。还有其他模式可以帮助实现 OCP，例如抽象工厂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:31:45.557

策略模式与在运行时选择不同的算法有关。它没有说明在维护期间是否应该或如何修改一个类。

开放/封闭原则与在维护期间允许扩展有关，但与修改无关。它没有说明在运行时实现或选择不同的算法。

如果这两个在您看来仍然相同，我建议您编写一些包含每种模式的代码。这应该使差异一目了然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-19T07:57:38.427

开闭是一个原则，策略模式是实现它的好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:29:12.373

我认为，设计模式 - 就像治愈某种疾病。和疾病 - 是违反SOLID

还有一件事 - 所有设计模式符合 SOLID 原则和其他原则： 优先组合而不是继承 封装更改 做高内聚和低耦合等

这里有一些来自[http://www.remondo.net/solid-principles-csharp-open-closed/](http://www.remondo.net/solid-principles-csharp-open-closed/)的例子：

> ...这违反了开放/封闭原则。...**建立这一点的一种方法是应用策略模式**...

# java - 将 instanceof 运算符与接口一起使用时出错？

> ID：13066490
> 
> 赞同：1
> 
> 时间：2012-10-25T10:21:09.380
> 
> 标签：java, interface, instanceof

我正在尝试根据`instanceof`链接了解Java中的运算符：[-instanceof](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/examples/InstanceofDemo.java)

但是当我尝试运行他们的以下代码时： -

```
class InstanceofDemo {
public static void main(String[] args) {

    Parent obj1 = new Parent();
    Parent obj2 = new Child();

    System.out.println("obj1 instanceof Parent: "
        + (obj1 instanceof Parent));
    System.out.println("obj1 instanceof Child: "
        + (obj1 instanceof Child));
    System.out.println("obj1 instanceof MyInterface: "
        + (obj1 instanceof MyInterface));
    System.out.println("obj2 instanceof Parent: "
        + (obj2 instanceof Parent));
    System.out.println("obj2 instanceof Child: "
        + (obj2 instanceof Child));
    System.out.println("obj2 instanceof MyInterface: "
        + (obj2 instanceof MyInterface));
} 
```

}

```
class Parent {}
class Child extends Parent implements MyInterface {}
interface MyInterface {} 
```

我在编译时收到以下错误：

```
./Child.java:1: error: cannot find symbol
class Child extends Parent implements MyInterface{
                                      ^
  symbol: class MyInterface
InstanceOfDemo.java:9: error: cannot find symbol
System.out.println("obj1 instanceOf MyInterface" + (obj1 instanceof MyInterface));
                                                                    ^
  symbol:   class MyInterface
  location: class InstanceOfDemo
InstanceOfDemo.java:12: error: cannot find symbol
System.out.println("obj1 instanceOf MyInterface" + (obj2 instanceof MyInterface ));
                                                                    ^
  symbol:   class MyInterface
  location: class InstanceOfDemo
3 errors 
```

下面是放置src代码的目录结构：-

```
-rw-rw-r-- 1 ankit ankit 174 Oct 25 15:36 Child.class
-rw-rw-r-- 1 ankit ankit  31 Oct 25 15:36 Child.java
-rw-rw-r-- 1 ankit ankit 920 Oct 25 15:41 InstanceOfDemo.class
-rw-rw-r-- 1 ankit ankit 637 Oct 25 15:41 InstanceOfDemo.java
-rw-rw-r-- 1 ankit ankit  25 Oct 25 15:20 MyInterface
-rw-rw-r-- 1 ankit ankit 186 Oct 25 15:36 Parent.class
-rw-rw-r-- 1 ankit ankit  16 Oct 25 15:18 Parent.java 
```

注意：我从`Child.java`和`InstanceOfDemo.java`编译和运行代码中删除了接口实现。

编辑1：-我可以认为instanceof运算符不能与Interfaces一起使用，因为根据Oracle的instanceof运算符的定义如下：-

> instanceof 运算符将对象与指定类型进行比较。您可以使用它来测试对象是类的实例、子类的实例还是实现特定接口的类的实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:27:21.473

你的界面也应该在，所以`.java file`你需要把`MyInterface``MyInterface.java`

```
-rw-rw-r-- 1 ankit ankit  25 Oct 25 15:20 MyInterface<---Rename it as 
                                                         MyInterface.java 
```

再次编译后，一切正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:27:45.047

查看有问题的文件列表，您的 MyInterface 缺少 .java 扩展名。

`instanceof`可以肯定地与接口一起使用。

如果您想知道“或实现特定接口的类的实例”部分，则意味着`myObj instanceof AnInterface`测试 myObj 是否是实现特定接口的类的实例，即 AnInterface。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:28:38.970

`MyInterface`似乎是在不同的文件中定义的，文件的名称甚至不是**MyInterface.java**。因此没有生成**.class**文件（因此编译器没有找到）

解决方案是将文件重命名`MyInterface`为`MyInterface.java`并编译它。这将生成一个**.class**文件，该文件由您的 JVM 加载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T10:29:16.530

将 MyInterface 重命名为 MyInterface.java。您的目录列表和错误消息都同意它从未编译为类文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T10:32:45.637

将您的文件重命名`MyInterface`为，`MyInterface.java`然后您的代码将运行

# javascript - 如何使用 jquery 滑块更改背景？

> ID：13066492
> 
> 赞同：0
> 
> 时间：2012-10-25T10:21:21.040
> 
> 标签：javascript, asp.net, asp.net-mvc, jquery-slider

我正在使用 jquery 滑块，我有一个布局和一个中心 div 内容..当我在不同的页面上滑动时，我需要更改布局的颜色。这就是我使用 asp.net mvc3 所做的。

HTML：

```
<div id="iPhone_Product">
        <div class="slides_containeriphone" >
            @if (Model == null)
            {
                <div class="animateriphone" id="1">
                    @Html.Partial("_iPhone_Main")
                </div>
                    <div class="animateriphone" id="2">
                    @Html.Partial("Salah")
                </div>
                    <div class="animateriphone" id="3">
                    @Html.Partial("_Tasbeeh")
                </div>
            }
            else
            { 
                foreach (string s in Model)
                {
                    <div class="animateriphone">
                        @Html.Partial(s);
                    </div>
                }
            }

        </div>
    </div> 
```

javascript:

```
function color_change() {

        var x = document.getElementById('2');

        if (x.id == '2') {
            $(".st_tabs_container").css({ "background-color": "#ffe21f" })
        }
        else
        {
            $(".st_tabs_container").css({ "background-color": "#c8c7c7" })
        }
    } 
```

它将背景更改为#ffe21f，但 else 语句不起作用。任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:41:33.290

您只需创建对象

```
var x = document.getElementById('2'); 
```

所以**x.id**总是有值**2**。这样您的 if 条件将始终返回**true**

尝试简单的javascript

```
 var color = document.getElementById('some').style.backgroundColor; 
```

变量**颜色**有值。如果您当前的背景是红色，则**color = rgb(255, 0, 0)";** 然后检查**颜色**变量以更改背景

例如：

```
if(color == "rgb(255, 0, 0)")
  {
      document.getElementById('some').style.backgroundColor = "#FFFF00";
  }
  else 
  {
      document.getElementById('some').style.backgroundColor = "#FF0000";
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:15:36.897

这应该有效：

```
idArray = ['1', '2', '3'];

        for (var item = 0; item < idArray.length; item++) 
        {

            var x = document.getElementById(idArray[item]);
        }

        if
                (x.id == '2') {
            $(".st_tabs_container").css({ "background-color": "#ffe21f" })
        }
        else
        {
            $(".st_tabs_container").css({ "background-color": "#c8c7c7" })
        } 
```

# iphone - 如何将 AVAsset 旋转到纵向模式？

> ID：13066494
> 
> 赞同：2
> 
> 时间：2012-10-25T10:21:23.753
> 
> 标签：iphone, objective-c, ios, video, avasset

我从 iPhone 库中导入了一个视频，并对该视频应用了一些效果。问题是视频的方向（横向）错误。如何将视频旋转为纵向模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:29:29.150

您是否尝试过在 AVPlayerLayer 上进行转换？

```
self.videoLayer = [AVPlayerLayer playerLayerWithPlayer:self.videoPlayer];
self.videoLayer.transform = CATransform3DMakeRotation(M_PI / 2.0f, 0, 0, 1); 
```

# c# - 如何将 javascript 变量传递给 Url.Action？

> ID：13066497
> 
> 赞同：0
> 
> 时间：2012-10-25T10:21:30.490
> 
> 标签：c#, asp.net-mvc, url.action

我正在使用 MVC 3.0，我只是想知道如何将 javascript 变量传递给`Url.Action`作为服务器端方法的方法？

以下代码无法编译：

```
string actionName = "MyAction";
string url = '@(Url.Action(' + actionName + '))'; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:28:24.807

您正在做的事情有一些缺陷，主要是 @Url.Action 在服务器上运行，而 javascript 在客户端上运行。

如果你想在客户端生成一个 url，你必须自己用 javascript 来做，例如：

```
var url = '/home/' + actionName; 
```

# rhomobile - RhoMobile 使用 RhoMobile 初学者指南

> ID：13066498
> 
> 赞同：0
> 
> 时间：2012-10-25T10:21:35.853
> 
> 标签：rhomobile, rhodes

嘿伙计们，我正在做 RhoMobile Beginners Guide 一书中的应用程序，但第 5 章第 99 页中的代码示例不起作用。如果任何已经使用过这本书的人能提供正确的代码，我将非常感激。

此外，我最近开始学习 Rhodes，所以如果有人可以提供良好的入门链接，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:02:51.603

RhoMobile 被摩托罗拉收购，所以现在他们接管了文档：

在这里您也可以找到示例：

[http://docs.rhomobile.com/](http://docs.rhomobile.com/)

如果您有任何问题，可以在开发者论坛上向我们提问：

[https://developer.motorolaso​​lutions.com/welcome](https://developer.motorolasolutions.com/welcome)

# asp.net - 在 asp .net 中从数据库中动态创建菜单和子菜单

> ID：13066502
> 
> 赞同：0
> 
> 时间：2012-10-25T10:21:46.180
> 
> 标签：asp.net, master-pages

我想从数据库中动态显示菜单。但是我的菜单项正在显示，但是当我以前单击菜单时，子菜单没有显示。请告诉我错误在哪里

我的代码是

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    { GetMenuData(); }
}
private void GetMenuData()
{
    DataTable table = new DataTable();
    SqlConnection conn = new SqlConnection(@"Data Source=ST015\SQLEXPRESS;Initial Catalog=MyData;Integrated Security=True");
    string sql = "select menuId,Menuname,MenuDescription,ParentMenuid,MenuUrl from Categories";
    SqlCommand cmd = new SqlCommand(sql, conn);
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    da.Fill(table);
    DataView view = new DataView(table);
    view.RowFilter = "ParentMenuId is NULL";
    foreach (DataRowView row in view)
    {
        MenuItem menuItem = new MenuItem(row["MenuName"].ToString(),
            row["MenuId"].ToString());
        menuItem.NavigateUrl = row["MenuUrl"].ToString();
        Menu1.Items.Add(menuItem);
        AddChildItems(table, menuItem);
    }
}
private void AddChildItems(DataTable table, MenuItem menuItem)
{
    DataView viewItem = new DataView(table);
    viewItem.RowFilter = "ParentMenuId=" + menuItem.Value;
    foreach (DataRowView childView in viewItem)
    {
        MenuItem childItem = new MenuItem(childView["MenuName"].ToString(),
            childView["MenuId"].ToString());
        childItem.NavigateUrl = childView["MenuUrl"].ToString();
        menuItem.ChildItems.Add(childItem);
        AddChildItems(table, childItem);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:49:00.933

我认为当您单击菜单项时，它会导致页面出现，`PostBack` 并且您在第一次加载页面时正在创建菜单。因此您无法在单击菜单项时看到菜单。只需调用`GetMenuData();`页面加载方法而不检查`IsPostBack`属性。

```
protected void Page_Load(object sender, EventArgs e)
{
   GetMenuData(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:54:00.407

为菜单创建一个表

```
CREATE TABLE [dbo].[tblMenuMaster](
[MenuID] [int] IDENTITY(1,1) NOT NULL,
[MenuName] [varchar](100) NULL,
[DisplayOrder] [int] NULL,
PRIMARY KEY CLUSTERED 
(
[MenuID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO 
```

为子菜单创建另一个表

```
CREATE TABLE [dbo].[tblSubMenuMaster](
[SubMenuID] [int] IDENTITY(1,1) NOT NULL,
[MenuID] [int] NULL,
[SubMenuName] [varchar](100) NULL,
[MainMenuDisplayOrder] [int] NULL,
[DisplayOrder] [int] NULL,
[SubMenuUrl] [varchar](500) NULL,
[VisibleInMenu] [bit] NULL,
PRIMARY KEY CLUSTERED 
(
[SubMenuID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO 
```

现在转到母版页.. HTML 代码是：

```
 <div class="menubar">
        <%--<ul class="tabs">--%>
        <asp:Literal ID="ltMenus" runat="server"></asp:Literal>
        <%--</ul>--%>
    </div> 
```

代码背后的代码是：

```
private void GenerateMenus()
{
    clsMenu obj = new clsMenu();
    System.Data.DataSet ds = new System.Data.DataSet();
    String PageName = "";
    PageName = Path.GetFileName(Page.AppRelativeVirtualPath);
    ds = obj.GetMenusByRole(GetRoleId(), PageName);

    StringBuilder sb = new StringBuilder("<ul class='tabs'>");

    foreach (System.Data.DataRow row in ds.Tables[0].Rows)
    {
        sb.Append(String.Format("<li class='{0}'><a rel='{1}' href='{1}' > {2} </a> ", Convert.ToString(row["css"]), ResolveUrl(Convert.ToString(row["PagePath"])), Convert.ToString(row["MenuName"])));
        //sb.Append(String.Format("<li '><a rel='{0}' href='{0}' > {1} </a> ", ResolveUrl(Convert.ToString(row["PagePath"])), Convert.ToString(row["MenuName"])));

        System.Data.DataTable t = CCMMUtility.GetFilterDataforIntColumn("MenuID", Convert.ToString(row["MenuID"]), ds.Tables[1]);
        if (t.Rows.Count > 0)
        {
            sb.Append("<ul>");

            for (int i = 0; i < t.Rows.Count; i++)
            {
                sb.Append(String.Format("<li><a href='{0}' class='dir' style='cursor: pointer;'>{1}</a></li>", ResolveUrl(Convert.ToString(t.Rows[i]["PagePath"])), Convert.ToString(t.Rows[i]["PageAliasName"])));
            }

            sb.Append("</ul>");
        }
        sb.Append("</li>");
    }

    sb.Append("</ul>");

    ltMenus.Text = sb.ToString();

} 
```

它需要存储过程来根据角色 ID 调用菜单的动态，如下所示

```
CREATE PROCEDURE [dbo].[proc_GetMenusByRole]
(
@RoleId int,  
@PageName varchar(100)
)
AS
SET NOCOUNT ON;
SELECT mm.MenuID, mm.MenuName,dbo.Extract_CssNameForMenuByMenuIDAndPageName(mm.MenuID, @PageName) as css
,dbo.proc_Extract_MenuPageByRoleIDAndMenuID(@RoleId, mm.MenuID)
as PagePath , mm.DisplayOrder   FROM tblMenuMaster mm WHERE mm.MenuID IN (SELECT s.MenuID from tblSiteRolePermissions p INNER JOIN
tblSitePages s ON p.fkSitePageId = s.pkSitePageId
WHERE (p.fkRoleId = @RoleId and p.ViewOnly=1))   
Union All   
select 0 as menuid ,'Change Password' as MenuName,  
case @pagename   
when 'ChangePassword.aspx' then 'active'  
else ''  
end  as css,'~/User/ChangePassword.aspx' as PagePath, 10000 as Displayorder  
ORDER BY DisplayOrder     
SELECT s.MenuID, s.pkSitePageId, s.PageAliasName, s.SitePageName,s.pagepath from tblSiteRolePermissions p 
INNER JOIN tblSitePages s ON p.fkSitePageId = s.pkSitePageId  WHERE (p.fkRoleId =@RoleId and p.ViewOnly=1) ORDER BY s.pkSitePageId 
```

//新的sp从这里开始

```
CREATE function [dbo].[Extract_CssNameForMenuByMenuIDAndPageName](@MenuID int, 
PageName varchar(100))
returns nvarchar(50)
as begin      
declare @result nvarchar(50) 
set @result = ''    
IF EXISTS (SELECT pkSitePageId FROM tblsitepages WHERE (MenuID = @MenuID) AND (UPPER(SitePageName) = @PageName)) 
 BEGIN    
  SET @result = 'active'    
 END    
return @result    
end 
```

// 另一个使用的 sp 是

```
CREATE function [dbo].[proc_Extract_MenuPageByRoleIDAndMenuID]
(@RoleId int, @MenuID int)
returns nvarchar(500) 
as begin          
declare @result nvarchar(500)
SELECT top 1 @result = s.pagepath FROM tblSitePages AS s INNER JOIN tblSiteRolePermissions AS p ON s.pkSitePageId = p.fkSitePageId
WHERE (p.fkRoleId = @RoleId) AND (s.MenuID = @MenuID)  and p.ViewOnly=1
ORDER BY s.pkSitePageId 
return  @result
end 
```

它只是一种方法，您可以根据您的要求对其进行修改............

**proc_Extract_MenuPageByRoleIDAndMenuID** sp 用于获取页面名称及其路径，

**Extract_CssNameForMenuByMenuIDAndPageName** sp 用于将**活动**类设置为第一个**li**表示第一个菜单。跳这会帮助你.....它的工作代码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:45:36.537

您的代码中没有错误它运行良好可能您添加到菜单的数据中存在错误。可能是“ParentMenuid”丢失或可能是错误的

# unix - ps2pdf 不可恢复的错误

> ID：13066505
> 
> 赞同：2
> 
> 时间：2012-10-25T10:22:07.977
> 
> 标签：unix, latex, ghostscript, postscript, ubuntu-11.10

`unrecoverable error, exit code 1`当我尝试将我的 .ps 文件转换为 pdf 时，我出现了。大约半小时前它工作了，现在它不会了。文件在**那里**！

```
Error: /undefinedfilename in (10132012a.ps)
Operand stack:

Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push
Dictionary stack:
   --dict:1161/1684(ro)(G)--   --dict:0/20(G)--   --dict:77/200(L)--
Current allocation mode is local
Last OS error: 2
GPL Ghostscript 9.04: Unrecoverable error, exit code 1 
```

这是我的命令：

`ps2pdf 10132012a.ps 10132012b.pdf`

ps 文件是使用`latex`.

我正在运行 Ubuntu 11.10。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:04:09.973

您可以尝试直接运行 Ghostscript，而不是使用脚本：

gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -o 10132012b.pdf 10132012a.ps

甚至：

gs -sDEVICE=pdfwrite -o 10132012b.pdf - < 10132012a.ps

“便利”脚本（ps2pdf、pdf2ps 等）使用可能会妨碍您的选项（尽管它们确实不应该）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T13:49:46.737

我刚刚找到了解决此`/undefinedfilename`错误的绝妙方法。我花了大约 15 分钟才弄明白。

首先，我这样做了。

```
user@host> dvips test1
This is dvips(k) 5.98 Copyright 2009 Radical Eye Software (www.radicaleye.com)
' TeX output 2015.08.04:2315' -> test1.ps
</usr/lib/texmf/dvips/base/tex.pro></usr/lib/texmf/dvips/base/texps.pro>. 
</usr/share/texmf/fonts/type1/public/amsfonts/cm/cmr10.pfb>[-1] [-2] [1] [2] 
```

然后我做了这个。

```
user@host> ps2pdf text1.ps
Error: /undefinedfilename in (text1.ps)
Operand stack:

Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push
Dictionary stack:
   --dict:1172/3371(ro)(G)--   --dict:0/20(G)--   --dict:70/200(L)--
Current allocation mode is local
Last OS error: 2
GPL Ghostscript 8.70: Unrecoverable error, exit code 1 
```

然后它终于击中了我。这是文件名中的拼写错误。所以命令行参数`ps2pdf`是一个不存在的文件。

在我看来，更好的错误信息应该是`Cannot find file test1.ps`，而不是`Error: /undefinedfilename in (text1.ps)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:37:27.313

该错误意味着`ps2pdf`找不到文件`10132012a.ps`。

`latex`不创建 ps 文件：它创建可以转换为 ps 的 dvi 文件`dvips`。

也许你忘了跑`dvips`？

# sql - 谁能帮我理解这个查询？

> ID：13066509
> 
> 赞同：1
> 
> 时间：2012-10-25T10:22:15.137
> 
> 标签：sql, hibernate, hql

谁能帮我理解这个查询？`mktpgmvhclxref.mktpgmvhclxrefId.mktgPgm`大部分是部分。一般是这样，`table_name.columnName`但这里的格式似乎不同

```
SELECT mktpgmvhclxref.mktpgmvhclxrefid.mktgpgm, 
       mktpgm.mktgpgm, 
       mktpgmvhclxref.cmpgn, 
       campaign.cmpgndescription, 
       mktpgmvhclxref.mktpgmvhclxrefid.vhcl, 
       vhclhierarchy.modname, 
       mktpgmvhclxref.mktpgmvhclxrefid.modyr, 
       mktpgmvhclxref.userinsrt, 
       mktpgmvhclxref.rowinsrt 
FROM   mktpgmvhclxref mktpgmvhclxref, 
       mktpgm mktpgm, 
       vhclhierarchy vhclHierarchy, 
       campaign campaign 
WHERE  mktpgmvhclxref.mktpgmvhclxrefid.mktgpgm = mktpgm.idmktgpgm 
       AND mktpgmvhclxref.cmpgn = campaign.campaignid 
       AND mktpgmvhclxref.mktpgmvhclxrefid.vhcl = vhclhierarchy.vhcl 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:23:31.937

通常，第一个标识符是架构/数据库名称，具体取决于您的数据库：

```
[schema].[table].[column] 
```

在大多数数据库中`[schema]`，如果名称明确`[table]`，则限定符是可选的。`[column]`

但是，在您的情况下，我怀疑这是实际情况，因为您的条款`mktpgmvhclxref`中的表格也是如此。`FROM`例如，Oracle 也知道用户定义的类型（UDT，`OBJECT`类型）。所以我猜测：

```
mktpgmvhclxref.mktpgmvhclxrefid.mktgpgm 
```

对应于

```
mktpgmvhclxref   = table
mktpgmvhclxrefid = column
mktgpgm          = UDT attribute 
```

如果您使用的是 Oracle，您可能会这样找到您的 UDT：

```
select * 
from all_type_attrs 
where (owner, type_name) = ((
  select data_type_owner, data_type
  from all_tab_cols
  where table_name = 'MKTPGMVHCLXREF'
  and column_name = 'MKTPGMVHCLXREFID'
))
order by attr_no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:25:10.627

```
mktpgmvhclxref.mktpgmvhclxrefId.mktgPgm
[--Schema----].[----table-----].[Column] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:02:42.287

我得到了我的问题的答案。它与休眠映射有关。第二个字段实际上是一个表的复合键。

# ios - 按主页按钮停止视频录制

> ID：13066515
> 
> 赞同：1
> 
> 时间：2012-10-25T10:22:29.427
> 
> 标签：ios, avfoundation

按下主页按钮时，如何安全地停止 AVFramework 上的视频录制？

我希望我的应用程序像本机相机应用程序一样工作：当您在录制过程中按下主页按钮时，它会停止录制过程，然后进入后台模式。

在我的应用程序委托上，我打电话`[[videoController captureManager] stopRecording];`但`recordingDidFinishToOutputFileURL`我收到一个错误，上面写着：

> 停止使用录音设备的任何其他操作，然后重试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:44:39.243

尝试恢复录制的视频...

```
 - (void)captureOutput:(AVCaptureFileOutput *)captureOutput didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL fromConnections:(NSArray *)connections error:(NSError *)error
    {
        BOOL recordedSuccessfully = NO;
        if ([error code] != noErr)
        {
            if(outputFileURL)
            {
                NSFileManager* manager = [NSFileManager defaultManager];
                NSString* path = outputFileURL.path;
                if([manager fileExistsAtPath:path])
                {
                    NSError *attributesError = nil;
                    NSDictionary *fileAttributes = [manager attributesOfItemAtPath:path error:&attributesError];
                    NSNumber *fileSizeNumber = [fileAttributes objectForKey:NSFileSize];
                    long long fileSize = [fileSizeNumber longLongValue];
                    if(fileSize > 0)
                    {
                        NSLog(@"Recording finished with error, but trying to save whatever recorded");
                        // save whatever we have to camera roll.
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:27:53.560

我建议在您的应用程序委托的`applicationWillResignActive:`方法中调用停止您的视频录制。当您的应用程序从活动状态变为非活动状态时会触发此方法，根据[UIApplicationDelegate 文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786-CH3-SW9)，这种情况会发生：

> ...对于某些类型的临时中断（例如来电或短信）或当用户退出应用程序并开始转换到后台状态时。

代码看起来像这样：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    [[videoController captureManager] stopRecording];

    // Do anything else before app becomes inactive
} 
```

# php - 在国际化场景中清理表单内容

> ID：13066517
> 
> 赞同：0
> 
> 时间：2012-10-25T10:22:33.890
> 
> 标签：php, internationalization, sanitization

在过去，当我是一名 Web 开发人员（使用 PHP）时，我曾经在开始任何处理之前通过正则表达式运行所有提交的表单数据。在大多数情况下，我会允许使用字母数字和一小部分标点字符，这将在 99% 的时间内满足 99% 的人，同时提供对 SQL 注入和跨站点脚本的防御（是的，我也使用了 PDO 准备语句）。

最近，我不得不在国际化的环境中处理输入，具体来说，输入可以是多种不同的西欧和东欧语言以及阿拉伯语。在这些情况下，我采取了删除潜在危险字符并让其他所有内容进入的方法。该应用程序的用户数量非常少（少于 10 个），并且仅部署在其内部网络上，因此我并不太担心安全性系统，但我不愿意在可公开访问的网站上采用这种方法。

总之，我希望对输入进行过滤，以便剩下的是“纯文本”，但我不确定如何在国际化上下文中定义纯文本的概念。有没有解决这个问题的 PHP 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:27:58.320

一切都是“纯文本”。甚至 "' DROP TABLE users --" 也是*纯文本*。甚至 "<script>" 也只是***纯文本***。

您担心的是“特殊字符”，即在某些上下文中具有特殊含义的纯文本。为此，您需要*转义*这些特殊字符以在给定上下文中“化解”它们。对于 HTML，将它们转义为 HTML 实体。对于 SQL，对字符串进行 SQL 转义（或使用准备好的语句来避免这个问题）。对于 CSV，CSV 转义值......你明白了。总是有可用的函数或库可以为你做这件事，不要试图在这里重新发明轮子。

如果要*清理*，即删除内容，则需要更好地定义要删除的内容。删除内容也总是冒着删除用户可能想要使用的合法内容的风险。所以这通常是令人讨厌的选择。

有关此主题的更多信息，请参阅[伟大的逃避现实（或：使用文本中的文本您需要知道的内容）](http://kunststube.net/escapism/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:42:18.407

试试 strip_tags()。[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)。它适用于大多数英语案例，并且可能适用于不同的语言。

# linux - 为什么 wget 输出到 stderr 而不是 stdout？

> ID：13066518
> 
> 赞同：14
> 
> 时间：2012-10-25T10:22:35.187
> 
> 标签：linux, stdout, wget, stderr

在 30 分钟徒劳地尝试捕获 的输出后`wget`，我发现程序写入`stderr`而不是`stdout`. 在 web 和 stack-overflow 中搜索表明这是一个众所周知的事实。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-25T10:48:23.057

这是众所周知的，因为它在[手册](http://www.gnu.org/software/wget/manual/html_node/Logging-and-Input-File-Options.html)中。

在 上报告消息`stderr`很常见，因为消息与 上的常规输出是分开的`stdout`。当您将多个工具与管道组合时，这很有用。在这种情况下，当常规输出和诊断消息混淆时，情况会很糟糕。

# java - 有没有办法在java中的单例代码下面打破这个

> ID：13066520
> 
> 赞同：1
> 
> 时间：2012-10-25T10:22:44.323
> 
> 标签：java, jakarta-ee

这是一个单例类。

我想知道我们在这段代码中打破单例逻辑的方法

```
class Employee{ // class starts
    private Employee(){} // private constructor

    private static Employee emp; 
    /*static block*/

    static {    
        if (emp==null)
        {
            emp=new Employee(); 
        }
    }      
    /* static method*/          
    public static Employee getEmployee()
    {   
        return emp;  
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T10:26:04.110

你只想要一个`Employee`?

```
class Employee{ // class starts
   private Employee(){}
   public static final Employee INSTANCE = new Employee(); 
} 
```

不需要吸气剂，代码是安全的，只需使用：

```
Employee.INSTANCE 
```

只是一个注释：`Employee`听起来像一个值对象，拥有单例值对象似乎很不寻常。

更新：似乎我终于明白了这个问题是关于什么的。这个单例是安全的，除非使用了一些非常重的火炮：

*   使用反射制作构造函数`public`（参见*Marko Topolnik*的精彩回答）。我想这可以通过一些安全管理器设置来避免

*   Java 序列化 - 不太可能，单例必须实现`Serializable`

*   不同的类加载器（[图示](http://geekandpoke.typepad.com/geekandpoke/2010/12/the-geekpoke-pattern-tip-of-the-week.html)）

除了这些常见的陷阱之外，您的代码还不错，但并不漂亮。`static`初始化保证在加载类时以原子方式运行一次。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T10:30:08.323

如果您想访问多个`Employee`实例，将构造函数公开就足够了。如果您还希望此类的所有当前客户端每次都接收一个新实例而不是单例实例，那么实现`getEmployee()`为 `{ return new Employee(); }`. 然后，您可以删除`private static`变量和`static`初始化程序块。

第三，如果您无法更改源代码，但`Employee`无论如何都想获得很多实例，那么唯一的方法就是求助于反射：

```
try {
  final Constructor<Employee> c = Employee.class.getDeclaredConstructor();
  c.setAccessible(true);
  final Employee e = c.newInstance();
} catch (Exception e) { throw new RuntimeException(e); } 
```

第四，如果您的问题真的是关于保护单例免受破坏，并且单例确实是可序列化的（未在您的示例中显示），那么该类必须实现`readResolve`反序列化机制中隐含的方法：

```
protected Object readResolve() {
    return emp;
} 
```

`SecurityManager`请注意，除了启用 a和配置适当的权限外，没有什么可以防止反射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T13:33:28.113

您还应该在构造函数中执行以下操作以避免通过反射创建对象

```
private Employee(){ 
if(emp!=null){
   throws new InstantiationError("singleton breached ");
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T13:50:28.273

想要多个实例？小菜一碟：

```
 Constructor<Employee> constructor = Employee.class.getDeclaredConstructor();
    constructor.setAccessible(true);
    Employee wtf = constructor.newInstance();
    assertSame(wtf, Employee.getEmployee()); 
```

有两种方法可以保护单例。第二个最好的方法是使用单元素枚举：

```
enum Singleton {
    INSTANCE;
    void doSomething(){
        System.out.println("Doing something");
    }
}

// Usage:
Singleton.INSTANCE.doSomething(); 
```

最好和最简单的方法是根本不使用单例。

# mysql - Magento 循环通过集合 + 层级价格提取

> ID：13066524
> 
> 赞同：0
> 
> 时间：2012-10-25T10:22:51.707
> 
> 标签：mysql, magento, mage

我需要遍历所有类别，然后为每个类别提取产品。实际上，我需要建立一个包含每个类别的产品数据的表。我还需要提取现有的等级价格，因为我只循环通过可配置产品。

```
<?php

require 'app/Mage.php';
$app = Mage::app('default'); // Mage_Core_Model_App

$ids = Mage::getModel('catalog/category')->getCollection()->getAllIds();
foreach ($ids as $categoryId) {
    $category = Mage::getModel('catalog/category')->load($categoryId);
    echo $category->getName() . ' <br/>';
    $products = $category->getProductCollection()
            ->addAttributeToFilter('type_id',array('eq'=>'configurable'));
    foreach ($products as $tmp) {
        $product = Mage::getModel('catalog/product')->load($tmp->getId());
        echo $product->getName() . '  ' . $product->getSku() . ' ' .  $product->getPrice() .  ' <br/>';
    }
} 
```

我不知道的是如何打印所有可用的产品属性`$product`。例如，我不知道包含产品数量的属性名称，无法使用魔术 _get 方法调用它。

最后一件事是如何从该产品中提取所有现有的等级价格？它们是否已经存储在`$product`对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:51:11.043

您可以使用magic _get 获得的产品价格，例如$product->getPrice()。或者 $product->getData('price'), $product->getData('name'), $product->getData();

在那上面

# actionscript-3 - 位图命中测试错误

> ID：13066527
> 
> 赞同：0
> 
> 时间：2012-10-25T10:23:02.377
> 
> 标签：actionscript-3, testing, bitmap, hit

我试图让我的角色在撞到物体时反弹回来，以免它接触到物体。我的问题是当它接触 2 个对象时，由于我的 else 语句，它会卡住并向后移动。有什么办法可以改变我的代码，让我的角色一开始就不能触摸物体。

我的代码：

o1 是影片剪辑中所有对象的实例名称，p1 是我的角色。

```
import flash.events.Event;

var upKeyDown:Boolean = false;
var rightKeyDown:Boolean = false;
var downKeyDown:Boolean = false;
var leftKeyDown:Boolean = false;
var hit:Boolean = false;

p1.addEventListener(Event.ENTER_FRAME, moveChar);
stage.addEventListener(KeyboardEvent.KEY_DOWN, checkKeysDown);
stage.addEventListener(KeyboardEvent.KEY_UP, checkKeysUp);

var redRect:Rectangle = o1.getBounds(this);
var redClipBmpData = new BitmapData(redRect.width, redRect.height, true, 0);
redClipBmpData.draw(o1);

var blueRect:Rectangle = p1.getBounds(this);
var blueClipBmpData = new BitmapData(blueRect.width, blueRect.height, true, 0);
blueClipBmpData.draw(p1);

addEventListener(Event.ENTER_FRAME, enterFrame);

function enterFrame(e:Event):void
{
if(redClipBmpData.hitTest(new Point(o1.x, o1.y),
                            255,
                            blueClipBmpData,
                            new Point(p1.x, p1.y),
                            255

                      ))
{
    o1.filters = [new GlowFilter()];
    hit = true;
}
else
{
    o1.filters = [];
    hit = false;
}
}

function moveChar(event:Event):void{
if(downKeyDown && !upKeyDown && !rightKeyDown && !leftKeyDown)
{
    p1.gotoAndStop("walk_down");
    if(!hit)
        p1.y += 5;
    else
        p1.y -= 10;
}
if(upKeyDown  && !downKeyDown && !rightKeyDown && !leftKeyDown)
{
    p1.gotoAndStop("walk_up");
    if(!hit)
        p1.y -= 5;
    else
        p1.y += 10;
}
if(rightKeyDown  && !upKeyDown && !downKeyDown && !leftKeyDown)
{
    p1.gotoAndStop("walk_right");
    if(!hit)
        p1.x += 5;
    else
        p1.x -= 10;
}
if(leftKeyDown  && !upKeyDown && !rightKeyDown && !downKeyDown)
{
    p1.gotoAndStop("walk_left");
    if(!hit)
        p1.x -= 5;
    else
        p1.x += 10;
}
}

function checkKeysDown(event:KeyboardEvent):void{
if(event.keyCode == 87){
    upKeyDown = true;
}
if(event.keyCode == 68){
    rightKeyDown = true;
}
if(event.keyCode == 83){
    downKeyDown = true;
}
if(event.keyCode == 65){
    leftKeyDown = true;
}
}

    function checkKeysUp(event:KeyboardEvent):void{
if(event.keyCode == 87){
    upKeyDown = false;
    p1.gotoAndStop("still_up");
}

if(event.keyCode == 68){
    rightKeyDown = false;
    p1.gotoAndStop("still_right");
}

if(event.keyCode == 65){
    leftKeyDown = false;
    p1.gotoAndStop("still_left");
}

if(event.keyCode == 83){
    downKeyDown = false;
    p1.gotoAndStop("still_down");
}
} 
```

提前致谢

编辑：我把它改成了你说的，但现在我的角色根本不想动：<

代码：

```
import flash.events.Event;

var upKeyDown:Boolean = false;
var rightKeyDown:Boolean = false;
var downKeyDown:Boolean = false;
var leftKeyDown:Boolean = false;
var hit:Boolean = false;
var redSpeed:Point = new Point();

p1.addEventListener(Event.ENTER_FRAME, moveChar);
stage.addEventListener(KeyboardEvent.KEY_DOWN, checkKeysDown);
stage.addEventListener(KeyboardEvent.KEY_UP, checkKeysUp);

var redRect:Rectangle = o1.getBounds(this);
var redClipBmpData = new BitmapData(redRect.width, redRect.height, true, 0);
redClipBmpData.draw(o1);

var blueRect:Rectangle = p1.getBounds(this);
var blueClipBmpData = new BitmapData(blueRect.width, blueRect.height, true, 0);
blueClipBmpData.draw(p1);

addEventListener(Event.ENTER_FRAME, enterFrame);

function enterFrame(e:Event):void
{
if(redClipBmpData.hitTest(new Point(o1.x + redSpeed.x, o1.y + redSpeed.y),
                    255,
                    blueClipBmpData,
                    new Point(p1.x, p1.y),
                    255))
{
    o1.filters = [new GlowFilter()];
    hit = true;
}
else
{
    o1.filters = [];
    hit = false;
}
 }

 function moveChar(event:Event):void{
if(downKeyDown && !upKeyDown && !rightKeyDown && !leftKeyDown)
{
    p1.gotoAndStop("walk_down");
    if(!hit)
    {
        redSpeed.y = 0;
    }
    else
    {
        redSpeed.y = 5;
        p1.y += 5;
    }
}
if(upKeyDown  && !downKeyDown && !rightKeyDown && !leftKeyDown)
{
    p1.gotoAndStop("walk_up");
    if(!hit)
    {
        redSpeed.y = 0;
    }
    else
    {
        redSpeed.y = -5;
        p1.y -= 5;
    }
}
if(rightKeyDown  && !upKeyDown && !downKeyDown && !leftKeyDown)
{
    p1.gotoAndStop("walk_right");
    if(!hit)
    {
        redSpeed.x = 0;
    }
    else
    {
        redSpeed.x = 5;
        p1.x += 5;
    }
}
if(leftKeyDown  && !upKeyDown && !rightKeyDown && !downKeyDown)
{
    p1.gotoAndStop("walk_left");
    if(!hit)
    {
        redSpeed.x = 0;
    }
    else
    {
        redSpeed.x = -5;
        p1.x -= 5;
    }
}
 }

 function checkKeysDown(event:KeyboardEvent):void{
if(event.keyCode == 87){
    upKeyDown = true;
}
if(event.keyCode == 68){
    rightKeyDown = true;
}
if(event.keyCode == 83){
    downKeyDown = true;
}
if(event.keyCode == 65){
    leftKeyDown = true;
}
 }

 function checkKeysUp(event:KeyboardEvent):void{
if(event.keyCode == 87){
    upKeyDown = false;
    p1.gotoAndStop("still_up");
}

if(event.keyCode == 68){
    rightKeyDown = false;
    p1.gotoAndStop("still_right");
}

if(event.keyCode == 65){
    leftKeyDown = false;
    p1.gotoAndStop("still_left");
}

if(event.keyCode == 83){
    downKeyDown = false;
    p1.gotoAndStop("still_down");
}
 } 
```

这是你的意思吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:39:33.253

我认为您要做的是根据对象的预期位置进行命中测试。但是，为了做到这一点，您需要分配速度值，而不是在 moveChar() 上移动对象。

```
private var redSpeed:Point = new Point();

//in moveChat:
if(downKeyDown && !upKeyDown && !rightKeyDown && !leftKeyDown)
{
    p1.gotoAndStop("walk_down");
    if(!hit)
        redSpeed.y = 5;
    else
        redSpeed.y = 0;
}

// in enterFrame
if(redClipBmpData.hitTest(new Point(o1.x + redSpeed.x, o1.y + redSpeed.y),
                        255,
                        blueClipBmpData,
                        new Point(p1.x, p1.y),
                        255)) {..... 
```

然后你可以通过它的速度移动对象。

# android - Android FTP 文件上传然后显示 Seekbar 和网络速度状态问题

> ID：13066528
> 
> 赞同：1
> 
> 时间：2012-10-25T10:23:03.827
> 
> 标签：android

在我的 android 项目中，我需要显示搜索栏和网络速度（文件使用 FTP 协议从服务器上传/下载的速度有多快）。在我的情况下，当我尝试从模拟器 sdcard 上传文件时，它会在文件存储在服务器中时显示速度和搜索栏，但我的要求是我需要在文件上传到时显示搜索栏和网络速度服务器。我不明白我在代码中哪里做错了。在显示 HTTP 的搜索栏和 TestAvarage 速度的附加图像中，我需要在 FTP 中实现以将文件上传到服务器。下面是我使用 ftp 将文件上传到远程服务器的代码：

![在此处输入图像描述](../Images/d1dea0fa59cc31f107cc8175d25daed6.png)

提前致谢。

```
 @Override
    protected String doInBackground(String... arg0) {
        int count = 0;
        FTPClient ObjFtpCon = new FTPClient();
        //Toast.makeText(con, "FTPasync doInBackground() is called" ,Toast.LENGTH_SHORT).show();
        try {
            runOnUiThread(new Runnable() {
                public void run() {

                    bar.setProgress(0);
                    //real_time.setText(0 + " secs");
                    //test_avg.setText(0+ " kbps");                     
                    //peak.setText(0+" kbps");
                }
            });
            updateUI(pp, R.drawable.pause);
            //ObjFtpCon.connect("ftp.customhdclips.com");
            ObjFtpCon.connect("ftp."+map.get("url").toString());
            updateUI(status, "Connecting");

            //if (ObjFtpCon.login("fstech@customhdclips.com", "fstech123")) {
            if (ObjFtpCon.login(map.get("username").toString(), map.get("password").toString())) {  
                updateUI(status, "Connected");
                // toast("Connected to FTP Server : ftp.customhdclips.com");
                ObjFtpCon.enterLocalPassiveMode(); // important!
                ObjFtpCon.cwd("/");// to send the FTP CWD command to the server, receive the reply, and return the reply code. 

                //if (mode == 0) {
                if(Integer.parseInt((map.get("oprn").toString()))== 0){ 
                    // Download
                    System.out.println("download test is called");
                    File objfile = new File(Environment.getExternalStorageDirectory()
                            + File.separator + "/logo.png");

                    /* * toast("Downloading /logo.png"); toast("File Size : "
                     * + objfile.getTotalSpace() + " bytes");*/

                    objfile.createNewFile();
                    FileOutputStream objFos = new FileOutputStream(objfile);
                    boolean blnresult = ObjFtpCon.retrieveFile("/logo.png",
                            objFos);
                    objFos.close();
                    if (blnresult) {
                        // toast("Download succeeded");
                        // toast("Stored at : " +
                        // objfile.getAbsolutePath());
                    }

                    //***********************************************************

                    /*
                    File objfile = new File(
                            Environment.getExternalStorageDirectory()
                                    + File.separator + "/test.txt");

                    // System.out.println("total" + objfile.getTotalSpace() + " bytes");

                    objfile.createNewFile();
                    FileOutputStream objFos = new FileOutputStream(objfile);
                    boolean blnresult = ObjFtpCon.retrieveFile("/test.txt",
                            objFos);
                    objFos.close();
                    if (blnresult) {
                        System.out.println("download in ftp is successful");
                        // toast("Download succeeded");
                        // toast("Stored at : " +
                        // objfile.getAbsolutePath());
                    }*/

                } 

                else {
                      ObjFtpCon.connect("ftp."+map.get("url").toString());
                        updateUI(status, "Connecting");

                        ObjFtpCon.login(map.get("username").toString(), map.get("password").toString());
                        ObjFtpCon.enterLocalPassiveMode();
                        ObjFtpCon.cwd("/var/www/html/BevdogAnd");                                

                        ObjFtpCon.setFileType(FTP.BINARY_FILE_TYPE);

                        final long started = System.currentTimeMillis();
                        long sleepingTime= 0;
                        String sourceFileUri =extStorageDirectory+"/zkfile"+filename;
                        File secondLocalFile = new File(sourceFileUri);
                          long fileSize = secondLocalFile.length();
                          int sentBytes = 0;
                        InputStream inputStream = new FileInputStream(secondLocalFile);    

                            System.out.println("Start uploading second file");
                            OutputStream outputStream = ObjFtpCon.storeFileStream(filename);
                            byte[] bytesIn = new byte[512];
                            int read = 0;                           
                            while ((read = inputStream.read(bytesIn)) != -1) {
                                updateUI(status, "Uploading");
                                outputStream.write(bytesIn, 0, read);
                                sentBytes+=read;
                                final int progress = (int) ((sentBytes * 100) / fileSize);
                                final long speed = sentBytes;

                                duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
                                runOnUiThread(new Runnable() {
                                    public void run() {

                                        bar.setProgress(progress);
                                        if (duration != 0) {
                                            //test_avg.setText((((speed / duration)*1000)*0.0078125) + " kbps");
                                            test_avg.setText((speed / duration) / 1024 + " kbps");
                                            if (pk <= (speed / duration) / 1024) {
                                                pk = (speed / duration) / 1024;
                                            }
                                            /*if (pk <= ((speed / duration)*1000)*0.0078125) {
                                                pk = (long)(((speed / duration)*1000)*0.0078125);
                                            }*/
                                            //peak.setText(pk + " kbps");

                                        }
                                    }
                                });
                            }
                            inputStream.close();
                            outputStream.close();

                            boolean completed = ObjFtpCon.completePendingCommand();
                            updateUI(status, "Completed");
                            if (completed) {

                            }    
                }
            }

            /*-------------------------------------------------------------*/
            /*
            URL url = new URL(map.get("url").toString());
            URLConnection conexion = url.openConnection();
            conexion.connect();
            updateUI(status, "Connected");

            final int lenghtOfFile = conexion.getContentLength();
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(
                            Environment.getExternalStorageDirectory()
                            + File.separator
                            + Info.getInfo(con).HTTP_DOWNLOAD_FILE_NAME);
            byte data[] = new byte[1024];
            long total = 0;
            final long started = System.currentTimeMillis();
            long sleepingTime= 0;
            System.out.println("started time --"+started);
            updateUI(status, "Downloading");
            while ((count = input.read(data)) != -1) {
                while (sleep) {
                    Thread.sleep(1000);
                    sleepingTime +=1000;
                }
                total += count;
                final int progress = (int) ((total * 100) / lenghtOfFile);
                final long speed = total;
                duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
                runOnUiThread(new Runnable() {
                    public void run() {
                        bar.setProgress(progress);

             */

            /*-----------------------------------------------------------------------*/

            else{
                System.out.println("password entered is incorrect");
                //Toast.makeText(con, "Username or/and password is incorrect", Toast.LENGTH_SHORT).show();
            }
        } 
        catch (Exception e) {
            e.printStackTrace();
            // toast(e.getLocalizedMessage());
        }

        try {
            ObjFtpCon.logout();
            ObjFtpCon.disconnect();
        } 
        catch (IOException e) {
            e.printStackTrace();
            // toast(e.getLocalizedMessage());
        }
        return null;
    } 
```

![在此处输入图像描述](../Images/825242e6614de0245ffebc83c058a130.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:34:12.810

```
 mSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        // TODO Auto-generated method stub
        if(fromUser){
            mPlayer.seekTo(progress);
            mSeekBar.setProgress(progress);
        }
    }
}); 
```

# sql - 较大插入的条件 INSERT 子查询

> ID：13066529
> 
> 赞同：0
> 
> 时间：2012-10-25T10:23:19.143
> 
> 标签：sql, insert, cross-platform, subquery, portability

我有一组跟踪访问日志的表。日志包含有关用户访问的数据，包括用户代理字符串。由于我们知道用户代理字符串[实际上是无限](https://stackoverflow.com/questions/654921/how-big-can-a-user-agent-string-get)的，因此需要将它们存储为 text/blob 类型。鉴于高度重复，我想将它们存储在一个单独的参考表中，并让我的主访问日志表有一个链接到它的 id。像这样的东西：

```
accesslogs table:
username|accesstime|ipaddr|useragentid

useragents table:
id|crc32|md5|useragent
(the hashes are for indexing and quicker searching) 
```

这是一个问题，我正在一个框架内工作，该框架不允许我创建像外键这样的花哨的东西。此外，这必须可跨多个 DBMS 移植。我已经为执行 SELECTS 制定了连接逻辑，但我无法弄清楚如何正确插入。我想做类似的事情

```
INSERT INTO accesslogs (username, accesstime, ipaddr, useragentid)
VALUES
(
  :username,
  :accesstime,
  :ipaddr,
  (
    CASE WHEN
      (
        SELECT id
        FROM useragents
        WHERE
          useragents.crc32 = :useragentcrc32
          AND
          useragents.md5 = :useragentmd5
          AND useragents.useragent LIKE :useragent
      ) IS NOT NULL
    THEN
      THAT_SAME_SELECT_FROM_ABOVE()
    ELSE
      GET_INSERT_ID_FROM(INSERT INTO useragents (crc32, md5, useragent) VALUES (:useragentcrc32, :useragentmd5, :useragent))
  )
) 
```

有什么方法可以不使用我刚刚编的名字的伪函数吗？我缺少的两部分是如何从上面获取选择以及如何从子查询插入中获取新 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:45:32.697

我不确定是否有跨平台的方式来做到这一点。对于每个受支持的后端，您可能必须有很多特殊情况。例如，对于 SQL Server，您将使用合并语句作为解决方案的基础。其他 DBMS 有不同的名称，如果它们完全支持的话。搜索“Upsert”可能会有所帮助。

Edt - 将第二个查询添加为显式，并添加参数。

```
-- SQL Server Example
--Schema Defs
Create Table Test (
  id int not null identity primary key,
  UserAgent nvarchar(50)
)

Create Table WebLog (
  UserName nvarchar(50),
  APAddress nvarchar(50),
  UserAgentID int
)

Create Unique Index UQ_UserAgent On Test(UserAgent)

-- Values parsed from log
Declare 
  @UserName nvarchar(50) = N'Loz',
  @IPAddress nvarchar(50) = N'1.1.1.1',
  @UserAgent nvarchar(50) = 'Test'
Declare @id int

-- Optionally Begin Transaction
-- Insert if necessary and get id 
Merge 
  Into dbo.Test as t
Using
  (Select @UserAgent as UserAgent) as s
On
  t.[UserAgent] = s.[UserAgent]
When Matched Then
  Update Set @id = t.id
When Not Matched Then
  Insert (UserAgent) Values (s.UserAgent);

If @id Is Null Set @id = scope_identity()

Insert Into WebLog (UserName, IPAddress, UserAgentID) Values (@UserName, @IPAddress, @id)

-- Optionally Commit Transaction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:59:51.610

您将需要对每个表进行单独的插入。您不能同时插入两者。

如果您在插入后使用 MS SQL Server，您可以通过 SCOPE_IDENTITY() 获取插入的 id，然后在另一个表插入中使用它。

# node.js - 如何在 Node.js 中卸载 npm 模块？

> ID：13066532
> 
> 赞同：1345
> 
> 时间：2012-10-25T10:23:26.167
> 
> 标签：node.js, npm

众所周知，任何 npm 模块都可以通过运行一个简单的命令来安装：`npm install <module_name>`.

我已经安装了一些不再使用的模块，我只想将它们取下来。我对此有几个问题：

*   我们是否有任何命令或过程可以从根目录卸载模块（例如`npm uninstall <module_name>`），或者只是删除模块文件？

*   如果我们保留未使用的模块，它对我们有何影响？

* * *

## 回答 #1

> 赞同：1987
> 
> 时间：2012-10-25T10:33:14.073

命令很简单`npm uninstall <name>`

Node.js 文档[https://npmjs.org/doc/](https://npmjs.org/doc/)包含您需要了解的所有使用 npm 的命令。

本地安装将在`node_modules/`您的应用程序的目录中。如果一个模块没有引用它，这不会影响应用程序。

但是，如果您要删除全局包，则引用它的任何应用程序都会崩溃。

以下是不同的选项：

`npm uninstall <name>`从中删除模块`node_modules`但不更新`package.json`

`npm uninstall <name> --save`也将其从`dependencies`in`package.json`

`npm uninstall <name> --save-dev`也将其从`devDependencies`in`package.json`

`npm uninstall -g <name> --save`也将其全局删除

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2014-03-25T14:17:30.223

如果它不起作用`npm uninstall <module_name>`，请通过键入全局尝试`-g`。

也许您只需要以超级用户/管理员的身份使用`sudo npm uninstall <module_name>`.

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2016-02-16T15:10:00.947

嗯，要完整回答这个问题，有[两种方法](https://docs.npmjs.com/getting-started/uninstalling-local-packages)（比如我们把安装的模块称为module1）：

1.  **要在不**更改 package.json的情况下删除 module1 ：

    `npm uninstall module1`

2.  **要通过**更改 package.json来删除 module1 ，并将其从 package.json 中的依赖项中删除：

    `npm uninstall --save module1`

注意：为简化上述命令，您可以使用**-S**代替**--save**，并且可以使用**remove**、**rm**、**r**、**un**、**unlink**代替**卸载**

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2013-07-07T08:15:08.977

我只是默认在我的home目录下安装*stylus*`npm uninstall stylus` ，所以我只是用来分离它，或者你可以试试`npm rm <package_name>`。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-06-08T04:11:05.973

卸载 Node.js 模块：

```
npm uninstall <module_name> 
```

这将从文件夹*node_modules*中删除模块，但不会从文件*package.json*中删除。因此，当我们再次执行 npm install 时，它将下载该模块。

因此，要从文件*package.json*中删除模块，请使用：

```
npm uninstall <module_name> --save 
```

*这也会从文件package.json*中删除依赖项。

如果你想卸载任何全局模块，你可以使用：

```
npm -g uninstall <module_name> --save 
```

这将全局删除依赖项。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2017-10-11T12:21:06.887

要批量删除文件夹*node_modules*中的包，您还可以将它们从文件*package.json*中删除，保存，然后`npm prune`在终端中运行。

这将删除文件系统中存在但未在文件*package.json*中使用/声明的那些包。

PS：这在Windows上特别有用，因为您可能经常遇到由于“超出路径长度限制”而无法删除某些文件的问题。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-10-28T13:13:41.403

有时`npm uninstall -g packageName`不起作用。

在这种情况下，您可以手动删除包。

在 Mac 上，转到文件夹`/usr/local/lib/node_modules`并删除包含所需包的文件夹。而已。使用以下命令检查您的全局安装包列表：

```
npm list -g --depth=0 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2019-05-15T08:53:21.963

您还可以以简写形式运行以下命令：

`npm un packageName`或者`npm rm packageName`

注意：`-g`在命令末尾添加以卸载全局包。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-03-26T08:19:12.677

npm 5 的更新：

从[npm 5.0.0](https://blog.npmjs.org/post/161081169345/v500)开始，默认情况下，已安装/卸载的模块作为依赖项添加/删除，因此`--save`不再需要该选项。

跑

```
npm uninstall <package> 
```

例如：

```
npm uninstall mongodb 
```

它将从*node_modules*文件夹和*package.json*文件中删除模块。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-05-25T11:06:06.010

对于 Windows 用户 - 如果您想删除一次安装的所有 Node.js 模块：

*   打开 PowerShell 窗口
*   进入*node_modules*文件夹 ( `cd node_modules`)
*   运行此命令 - “npm uninstall (Get-ChildItem).Name”

它将卸载所有模块。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-03-01T21:49:39.967

我发现这一点很难，即使它*看起来*很明显。

我最初尝试在脚本中使用简单的 for 循环遍历*node_modules*目录。`npm uninstall module-name`我发现如果您调用完整路径，它将不起作用，例如，

```
npm uninstall module-name 
```

正在工作，但是

```
npm uninstall /full/path/to/node_modules/module-name 
```

没有工作。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2021-05-16T09:42:50.870

别名可用于卸载 node_modules 包

`un`别名`uninstall`

*   删除单个包

```
 - npm un <PACKAGE_NAME> 
```

*   通过在包名称之间添加空格来删除多个包

```
- npm un <PACKAGE_NAME_1> <PACKAGE_NAME_2> 
```

*   删除所有`node_modules`包

```
 - rm -rf node_modules/ 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-03-09T14:45:32.403

卸载 Node.js 模块：

```
npm uninstall <module_name> 
```

这将从文件夹*node_modules*中删除模块，但不会从文件*package.json*中删除。

使用以下命令从*package.json*中删除模块：

```
npm uninstall <module_name> --save 
```

这也会从*package.json*中删除它。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-10-25T13:30:11.413

当我尝试使用与安装时使用的命令相同的命令时，该`uninstall`选项对我不起作用（因为我正在使用`@latest`指令进行安装）

例如，我安装了一个这样的包：

```
npm install  @ngtools/webpack@latest 
```

然后我想卸载它，所以我使用了相同的命令（包括@latest）：

```
npm uninstall  @ngtools/webpack@latest 
```

所以上面的卸载没有用。我必须删除`@latest`，然后它运行良好：

```
npm uninstall  @ngtools/webpack 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-04-11T12:28:02.990

要使用 npm 卸载模块，您可以使用：

```
npm uninstall moduleName 
```

此外，如果您想卸载并希望更改反映在您的 package.json 中，那么您可以使用 --save 标志，如下所示：

```
npm uninstall moduleName --save
OR
npm uninstall -S 
```

如果你想从 devDependencies 中卸载一个模块，并希望更改反映在 package.json 中，那么你可以使用 -D 标志，如下所示：

```
npm uninstall moduleName -D 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-02-23T00:03:08.587

最简单的解决方案是：

```
npm uninstall packageName --save-dev 
```

查看项目中的上层包名称：

```
npm list --depth=0 
```

输出将如下所示：

```
app@0.1.0 /home/jackkobec/projects/myAppName
├── packageName@packageVersion
├── express@4.16.4 
```

复制包名并执行 npm uninstall 命令。快递包裹示例：

```
npm uninstall express --save-dev 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-05-15T13:22:22.220

```
# Log in as root (might be required depending on install)
su -

# List all global packages
npm ls -g --depth=0

# List all local (project) packages
npm ls -p --depth=0

# Remove all global packages
npm ls -g --depth=0 | awk -F/ '/node_modules/ && !/\/npm$/ {print $NF}' | xargs npm -g rm

# Remove all local packges
npm ls -p --depth=0 | awk -F/ '/node_modules/ && !/\/npm$/ {print $NF}' | xargs npm -p rm

# NOTE (optional): to use node with sudo you can add the bins to /usr/bin
# NOTE $PATHTONODEINSTALL is where node is installed (e.g. /usr/local/node)
sudo ln -s $PATHTONODEINSTALL/bin/node /usr/bin/node
sudo ln -s $PATHTONODEINSTALL/bin/npm /usr/bin/npm 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-12-25T08:30:52.363

在文件夹*node_modules*和文件*package.json*中删除它。**`npm v6+`** `npm uninstall <package_name>`

 *** * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-01-10T08:55:36.687

此外，如果您已经开始使用`yarn`, 代替`npm`：
`yarn remove <package-name>`

相当于：
`npm uninstall <package-name> --save`

这将
- 从您的项目文件夹中删除该包`package.json`，以及- 从您的项目文件夹 中
卸载它`node-modules`

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-06-05T21:32:47.383

您可以手动删除 Node.js 模块。对于 Windows，

1.  转到`node_modules`存储库的目录。

2.  删除不需要的 Node.js 模块。

3.  不要忘记删除*package.json*文件中对模块的引用！您的项目可能仍会使用该引用运行，但您可能会收到错误消息。您也不想在您的*package.json*文件中留下未使用的引用，这可能会在以后引起混淆。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-01-30T12:10:27.757

利用

```
npm uninstall <package_name> 
```

卸载 express 的示例

```
npm uninstall express 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-04-08T06:02:52.567

```
npm uninstall <package_name> 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-01-22T19:22:11.207

如果您在 Windows 上，请以管理员身份运行 CMD 并键入：

```
npm -g uninstall <package name> 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-12-27T11:51:43.677

如果要卸载多个模块，只需运行`npm uninstall`.

然后转到文件*package.json*并从那里删除不需要的模块，然后运行命令`npm install`。它应该可以解决您的问题。**

# jquery - jquery .before() 如果类不存在

> ID：13066535
> 
> 赞同：1
> 
> 时间：2012-10-25T10:23:43.980
> 
> 标签：jquery, html, jquery-selectors

使用分页，我在第一页有一个像这样的 div 结构：

```
<div class="ctema">...</div>
<hr />
<div class="ctema">...</div>
<hr />
<div class="ctema">...</div>
<hr /> 
```

但是使用 jquery 脚本通过 AJAX 获取内容......以下页面只有：

```
<div class="ctema">...</div>
<div class="ctema">...</div>
<div class="ctema">...</div> 
```

我的目标是在每个带有 class="ctema" 的 div 之间有一个 HR 标签......我试过这个：

```
$('.ctematicas').before('<hr />'); 
```

但这不会检查 HR 标签是否已经存在，并且在第一页中进行 5 次动态重新加载后，我最终会连续获得 5 HR ...

如何检查 CTEMA 类之间是否存在 HR 标签，如果不存在则添加一个？

编辑：问题澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:26:06.043

你可以做

```
$('.ctema').not('hr+.ctema').before('<hr />'); 
```

或者

```
$('.ctema:not(hr+.ctema)').before('<hr />'); 
```

jQuery的文档建议​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

[示范](http://jsfiddle.net/wb6E6/)

* * *

如果您真正想要的是在 div**之间**有一个小时（而不是在第一个之前），那么解决方案就更简单了：

```
$('.ctema+.ctema').before('<hr />');​ 
```

[示范](http://jsfiddle.net/jC7LS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:46:28.347

> 如何检查 CTEMA 类之间是否存在 HR 标签，如果不存在则添加一个？

不知道我明白了，但我可能会这样做：

```
$('.ctema').filter(function() {
    return !$(this).next('hr').length
}).after('<hr>'); 
```

[**小提琴**](http://jsfiddle.net/u2Daz/)

# forms - 我的 Magento 网站联系表有问题

> ID：13066536
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:23:45.057
> 
> 标签：forms, magento, contact

我在 Magento 中设置了一个联系表，但它不起作用，请帮忙。URL 是[http://v4vintage.com/magento/contact-us-email](http://v4vintage.com/magento/contact-us-email)。

问候，

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:44:09.077

您可以使用[此](http://blog.decryptweb.com/form-in-magento/)页面来学习如何`POST`形成数据，并使用[此](http://dbhoopendra.blogspot.com.au/2012/05/how-to-send-email-in-magento.html)页面来实际获取表单数据并发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:18:18.297

我检查了你的页面，它有很多表格。请检查分数代码并使用单一表格。

# kvm - DomainEventRegisterAny() 未注册磁盘更改的 Libvirt 事件

> ID：13066537
> 
> 赞同：3
> 
> 时间：2012-10-25T10:23:51.407
> 
> 标签：kvm, libvirt

我正在编写一个应用程序，该应用程序将通过 libvirt 事件监视 KVM 管理程序上域的更改。

最近我将我的 libvirt 从 9.4 升级到 9.10，我遇到了这个问题。

在取消注册时`DomainEventDiskChangeCallback`，我收到一个 libvirt 错误说

```
libvirtError: internal error domain event 2 not registered; 
```

`virConnectDomainEventRegisterAny()`其中 2 是磁盘更改事件类型返回的回调 ID 。

我使用 libvirt 0.9.4-23.el6_2.6 时没有出现这个错误

您能告诉我最近所做的更改吗？

另外，diskchange 事件是域生命周期事件的一部分吗？

对此问题的任何帮助将不胜感激。

谢谢和问候， 阿布舍克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T06:50:04.177

你做的事没有错。这是一个[错误](https://bugzilla.redhat.com/show_bug.cgi?id=1020376)，现在已[修复](https://www.redhat.com/archives/libvir-list/2013-October/msg00798.html)。

Diskchange 不是生命周期事件，因为它与正在启动、终止、停止、重新启动等的域无关。

# apache - 带有 WebDAV 的 Apache 上的 Subversion 存储库，301 错误

> ID：13066538
> 
> 赞同：0
> 
> 时间：2012-10-25T10:23:52.060
> 
> 标签：apache, svn, webdav

自从将我的 linux 发行版更新到 openSUSE 12.2 后，我的 Subversion 存储库就停止工作了。将它们签出或通过浏览器浏览完全没有问题，但提交不起作用。当我尝试提交更改时，客户给了我：

```
svn: E175011: Commit failed (details follow):
svn: E175011: Repository moved permanently to 'https://example.org/repo/main/!svn/me'; please relocate
svn: E175011: Your commit message was left in a temporary file: 
```

在网络服务器上，我看到如下内容：

```
1.2.3.4 - - [25/Oct/2012:12:11:22 +0200] "OPTIONS /repo/main/trunk/eManager HTTP/1.1" 401 401 "-" "SVN/1.7.7 neon/0.29.6"
1.2.3.4 - my_user [25/Oct/2012:12:11:22 +0200] "OPTIONS /repo/main/trunk/eManager HTTP/1.1" 200 195 "-" "SVN/1.7.7 neon/0.29.6"
1.2.3.4 - - [25/Oct/2012:12:11:22 +0200] "POST /repo/main/!svn/me HTTP/1.1" 301 - "-" "SVN/1.7.7 neon/0.29.6" 
```

注意：第一个请求仅用于基本身份验证。我的配置（在启用 SSL 的 VHost 中，自上一个发行版以来没有更改）如下：

```
# main svn repo
<Location /repo/main>
    DAV svn
    SVNPath /srv/svn/main

    # Require SSL connection for password protection.
    SSLRequireSSL

    AuthType Basic
    AuthName "Enter password"
    AuthUserFile /srv/config/.htpasswd-main
    Require valid-user

    #test
    ErrorDocument 404 default
</Location> 
```

我已经阅读了许多关于此的主题，但没有任何可行的解决方案。
我已经升级了 subversion 结构，*`svnadmin`*并且我确保（通过 grep'ing）没有其他 Alias/Location 设置为 /repo（这是最常见的建议）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:13:35.473

**解决方法：**我终于找到[了一个有用的线程](http://www.svnforum.org/threads/40555-Post-Subversion-1-6-17-to-1-7-1-upgrade-help)，它至少描述了一种解决方法。我将此添加到我的配置中并再次提交工作：

```
SVNAdvertiseV2Protocol off 
```

不过，这并不完美，我仍然希望有更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:00:24.853

不记得我何时以及为什么开始以这种方式写位置，但是 - 我至少没有遇到 301 错误：

*   在位置定义中，我使用尾随 /
*   SVN(Parent)?Path 也用尾随 /

# php - PHP poup 可以从打开时返回值到表单吗？

> ID：13066543
> 
> 赞同：0
> 
> 时间：2012-10-25T10:24:14.407
> 
> 标签：php

我有很多记录要打印。我在一页中需要“EDIT”和“DELETE”，所以我只是用EDIT DELETE Link列出了（那个名字list.php）。

单击编辑时，我使用 JS 打开 NewWindow(listedit.php)。记录已从该弹出窗口更新。当记录已更新时，我想重新加载我的 list.php 当记录已从listedit.php 更新时，我想重新加载 list.php。

任何人都可以建议我在哪里以及用什么可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:29:03.163

在您的弹出页面中：

```
$('#closeButton').click(function(e) {
    window.opener.location.reload(true);
    window.close();
    e.preventDefault();
}); 
```

此行重新加载父页面并关闭弹出窗口。

# perl - Perl脚本逐行合并多个文件

> ID：13066544
> 
> 赞同：0
> 
> 时间：2012-10-25T10:24:20.377
> 
> 标签：perl, file-io

任何人都可以帮我编写一个 Perl 脚本，该脚本可以将 5 个文本文件作为输入，并通过合并所有 5 个文件的每一行来创建一个新的文本文件。这应该通过一次打开 5 个读取流来完成，还是像 java 一样在 Perl 中提供一些随机文件阅读器？

谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T11:07:01.200

这是一个可以处理任意数量文件的 Perl 脚本：

```
use strict;
use warnings;

my @files = ('a.txt','b.txt');
my @fh;

#create an array of open filehandles.
@fh = map { open my $f, $_ or die "Cant open $_:$!"; $f } @files;

open my $out_file, ">merged.txt" or die "can't open out_file: $!";

my $output;
do
{
    $output = '';

    foreach (@fh)
    {
        my $line = <$_>;
        if (defined $line)
        {
            #Special case: might not be a newline at the end of the file
            #add a newline if none is found.
            $line .= "\n" if ($line !~ /\n$/);
            $output .= $line;
        }
    }

    print {$out_file} $output;
}
while ($output ne ''); 
```

一个.txt：

```
foo1
foo2
foo3
foo4
foo5 
```

b.txt：

```
bar1
bar2
bar3 
```

合并的.txt：

```
foo1
bar1
foo2
bar2
foo3
bar3
foo4
foo5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T11:23:22.927

该程序需要命令行上的文件列表（或者，在 Unix 系统上，通配符文件规范）。它为这些文件创建一个文件句柄数组，`@fh`然后依次从每个文件中读取，将合并的数据打印到`STDOUT`

```
use strict;
use warnings;

my @fh;
for (@ARGV) {
  open my $fh, '<', $_ or die "Unable to open '$_' for reading: $!";
  push @fh, $fh;
}

while (grep { not eof } @fh) {
  for my $fh (@fh) {
    if (defined(my $line = <$fh>)) {
      chomp $line;
      print "$line\n";
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T10:38:13.273

如果您可以使用非 perl 解决方案，则可以尝试以下操作：

```
paste -d"\n\n\n\n\n" f1 f2 f3 f4 f5 
```

其中 f1,f2..是您的文本文件。

# c# - 如何在gridview中添加一行的标题行

> ID：13066547
> 
> 赞同：0
> 
> 时间：2012-10-25T10:24:23.467
> 
> 标签：c#, asp.net, gridview

我只是以编程方式将复选框添加到gridview，如下所示：

```
foreach (GridViewRow gvr in GridView1.Rows)
{
   TableCell tbCell = new TableCell();
   CheckBox cb1 = new CheckBox();
   tbCell.Controls.Add(cb1);
   gvr.Cells.Add(tbCell);
} 
```

我的问题是我的标题行没有被创建。我怎样才能以编程方式做到这一点？

检查图像链接上角落的间隙。

提前致谢

[http://postimage.org/image/klvbbv1xh/](http://postimage.org/image/klvbbv1xh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:28:52.740

你可以使用`[HeaderRow](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.headerrow.aspx).Cells.Add`属性

```
foreach (GridViewRow gvr in GridView1.Rows)
{
   TableCell tbCell = new TableCell();
   CheckBox cb1 = new CheckBox();
   tbCell.Controls.Add(cb1);
   gvr.Cells.Add(tbCell);
}

TableCell tbCell = new TableCell();
CheckBox cb1 = new CheckBox();
tbCell.Controls.Add(cb1);
GridView1.HeaderRow.Cells.Add(tbCell); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:39:14.180

您可以使用 Gridview1.HeaderRow.Cells.Add 其中 Gridview1 是控件 ID

```
TableCell tbCell1 = new TableCell();
CheckBox cb12 = new CheckBox();
tbCell1.Controls.Add(cb12);
Gridview1.HeaderRow.Cells.Add(tbCell1);

foreach (GridViewRow gvr in Gridview1.Rows)
{
     TableCell tbCell = new TableCell();
     CheckBox cb1 = new CheckBox();
     tbCell.Controls.Add(cb1);
     gvr.Cells.Add(tbCell);
} 
```

# jquery - CCSlider 使用 I-phone/较旧的 android 时速度较慢

> ID：13066548
> 
> 赞同：0
> 
> 时间：2012-10-25T10:24:24.157
> 
> 标签：jquery, jquery-plugins

我最近在我的网页上安装了[Cosmocoders CCSlider](http://codecanyon.net/item/ccslider-jquery-3d-slideshow-plugin/162445)，我对 3D 过渡印象深刻，完成后将使我们的网站看起来很棒......我的问题是......有没有任何代码或方法可以只制作2D 滑块在较旧的 I-phone 和 android 设备上加载，但 3D 滑块仍在 PC 的 Mac 等上加载，因为在 I-phone 1 等较旧的设备上查看时，由于速度变慢和处理器使用率高，页面几乎无法查看？如果可能的话，我希望两全其美......旧设备的 2D 滑块和新设备和计算机的成熟 3D 滑块......我希望有人可以帮助我实现这一目标。

非常感谢安迪

我的网站是[www.eco-fireplaces.co.uk](http://www.eco-fireplaces.co.uk)，我可能正在运行 2D 滑块淡入淡出，因为我仍在试验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:13:45.410

您可以使用这样的浏览器检测脚本

```
var effectConfig = {};
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
    effectConfig = {
        effectType: '2d',
        effect: 'fadeSlide'
    };
} else {
    effectConfig = {
        effectType: '3d',
        effect: 'cubeUp',
        _3dOptions: {
            imageWidth: 960,
            imageHeight: 400,
            slices: 6,
            depthOffset: 300,
            sliceGap: 50,
            fallBack: 'horizontalWipe',
            delayDir: 'last-first',
            easing: 'easeInOutElastic'
        }
    };
}

var config = jQuery.extend({}, effectConfig, {
    autoPlay: true,
    captions: true,
    controlLinks: false
});

jQuery('#slider').ccslider(config); 
```

# iphone - 具有 JSON 解析的 Web 服务

> ID：13066549
> 
> 赞同：1
> 
> 时间：2012-10-25T10:24:24.383
> 
> 标签：iphone, json

在我的应用程序中，Web 服务是在 dot net 中创建的，我正在使用这些服务，我得到了响应。在所有领域，如公司、类型、位置，一切都是字符串，这没有问题。还有一个字段称为展览编号实际上它是一个整数，但它们仅作为字符串创建。当我显示这个时，它显示的是零而不是那个数字。这是我的代码......

```
//Storing into Array
[SurveyFilesArray addObject:[NSDictionary dictionaryWithObjectsAndKeys:[dic objectForKey:@"FileName"],@"FileName",[dic objectForKey:@"ExibhitNumber"],@"ExhibitNumber",[dic objectForKey:@"Description"],@"Description",[dic objectForKey:@"FileQuality"],@"FileQuality",nil]];

//Retrieving from Array..
NSLog(@"???%@???",[NSString stringWithFormat:@"%d",[[[SurveyFilesArray objectAtIndex:indexPath.row]objectForKey:@"ExibhitNumber"]intValue]]);
NSLog(@"%d",[[[SurveyFilesArray objectAtIndex:indexPath.row]objectForKey:@"ExibhitNumber"]intValue]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:32:30.113

您的代码中有拼写错误。

按照您的代码顺序：
`Ex-ib-hit-Number`
`Ex-hib-it-Number`

这是2个不同的字符串。

在您的示例代码中，您将其正确保存为`Ex-hib-it`. 但是您稍后尝试访问它`ex-ib-hit`。这行不通。

# java - 删除转义时出现正则表达式异常

> ID：13066553
> 
> 赞同：1
> 
> 时间：2012-10-25T10:24:50.907
> 
> 标签：java, regex, exception

我正在编写一个函数来删除转义字符，它把我扔了`PatternSyntaxException`。我在这里想念什么？我将该函数编写为单个应用程序，尽管如此，我还是收到了这个错误。

```
public class test {
public static void main(String a[])
{

    String keyword = "otterbox 3500 series { { waterproof case \\(clear\\) phones";

    if(keyword.contains("\\")){
        int l=0;
        int l2=0;
        for (int i = 0; i < keyword.length(); i++){         
            char c = keyword.charAt(i);
            if(c=='\\')l++;
            if (c == '!' || c == '(' || c == ')' || c == '&' ||
                    c == ':'  || c == '^' || c == '[' || c == ']' || c=='-'||
                    c == '{'  || c == '}' || c == '~'){
                keyword =keyword.replaceAll("\\\\"+c, ""+c); 
                l2++;               
            }
        }       

        if(l==1) keyword= keyword.replaceAll("\\\\", "");
        if(l>1 && l2==1) keyword = keyword.replaceFirst("\\\\", "");
    }

    System.out.println("Final    "+keyword);

}} 
```

它向我抛出了以下异常：

```
Exception in thread "main" java.util.regex.PatternSyntaxException: Illegal repetition near index 1
 {

at java.util.regex.Pattern.error(Unknown Source)
at java.util.regex.Pattern.closure(Unknown Source)
at java.util.regex.Pattern.sequence(Unknown Source)
at java.util.regex.Pattern.expr(Unknown Source)
at java.util.regex.Pattern.compile(Unknown Source)
at java.util.regex.Pattern.<init>(Unknown Source)
at java.util.regex.Pattern.compile(Unknown Source)
at java.lang.String.replaceAll(Unknown Source)
at test.main(test.java:21)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:31:20.987

`{`和`}`字符是正则表达式中的特殊字符——它们表示重复范围（例如匹配`ab{3,5}`an`a`后跟三到五个`b`s）。

您需要在正则表达式中相应地转义此字符，如`\{`.

* * *

*在您的特定情况下，我认为您通过在序列的某些部分上始终使用正则表达式替换，同时对其进行迭代，*从而使事情变得非常困难（并且效率低下）。

如果您要使用正则表达式，只需在整个字符串上使用单个正则表达式替换即可删除所有您不想要的字符。例如

```
String keyword = "otterbox 3500 series { { waterproof case \\(clear\\) phones";
String result = keyword.replaceAll("[!()&:^\\[\\]\\-\\\\{}~]", ""); 
```

如果您要遍历字符串并一次检测一个不需要的字符，那么只需执行此迭代并构建您的输出，跳过您想要遗漏的字符。例如：

```
StringBuilder result = new StringBuilder();
for (int i = 0; i < keyword.length(); i++){         
   char c = keyword.charAt(i);
   if (c == '!' || c == '(' || c == ')' || c == '&' || c == '\\'
                c == ':'  || c == '^' || c == '[' || c == ']' || c=='-'||
                c == '{'  || c == '}' || c == '~') {
      // skip it, don't add to result
   }
   else {
      result.add(c);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:34:59.440

代替：

```
keyword = keyword.replaceAll("\\\\"+c, ""+c); 
```

用这个：

```
keyword = keyword.replaceAll("\\"+c, ""+c); 
```

原因是这`\\\\`意味着文字退格字符本身，但是您打算仅使用这些正则表达式特殊字符来转义`\\`。

# javascript - 使用 javascript document.myElementsName 选择 DOM 元素

> ID：13066554
> 
> 赞同：2
> 
> 时间：2012-10-25T10:24:52.043
> 
> 标签：javascript, dom

我正在研究一个不久前编码的网站。我找到了一个 Javascript 函数，它使用以下语法为文本框设置值

```
document.myForm.myText.value = "value"; 
```

我已经测试了这段代码，它可以在 IE、Firefox 和 Chrome 中运行。

我的问题是这种设置/选择 DOM 元素的方式是否可以继续进行（即它会贬值）？我应该将这种类型的元素选择实例更改为下面更标准的（根据我的经验）代码吗？

```
document.getElementById("myText").value = "value"; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:00:40.943

我认为这不会有什么不同，因为浏览器的 dom 表示会改变以破坏代码；这可能会破坏互联网上一半的网页。

您的代码比第一个更好，因为您随后将编码到方法的合同，该合同`getElementById`返回`HTMLElement`您需要的内容。这意味着 JS 引擎必须遵守 ECMAScript 的标准并返回准确的元素。因此，如果明天浏览器更改其结构并且您的元素现在是 document.forms.myForm.myText.value 而不是您的预期，您的代码无需担心。

# php - 使用ajax进行分页

> ID：13066557
> 
> 赞同：0
> 
> 时间：2012-10-25T10:25:14.243
> 
> 标签：php, ajax, pagination

我有 2 页

第一页用于调用第二页从数据库中获取所有记录，如下所示：

```
<script language="JavaScript">
       var HttPRequest = false;

       function doCallAjax(Mode,users_ID) {
          HttPRequest = false;
          if (window.XMLHttpRequest) { // Mozilla, Safari,...
             HttPRequest = new XMLHttpRequest();
             if (HttPRequest.overrideMimeType) {
                HttPRequest.overrideMimeType('text/html');
             }
          } else if (window.ActiveXObject) { // IE
             try {
                HttPRequest = new ActiveXObject("Msxml2.XMLHTTP");
             } catch (e) {
                try {
                   HttPRequest = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {}
             }
          } 

          if (!HttPRequest) {
             alert('Cannot create XMLHTTP instance');
             return false;
          }

          var url = 'AjaxDeleteRecord.php';
          var pmeters = "tMode=" + Mode +
                        "&tusers_ID=" + users_ID;

            HttPRequest.open('POST',url,true);

            HttPRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            HttPRequest.setRequestHeader("Content-length", pmeters.length);
            HttPRequest.setRequestHeader("Connection", "close");
            HttPRequest.send(pmeters);

            HttPRequest.onreadystatechange = function()
            {

                 if(HttPRequest.readyState == 3)  // Loading Request
                  {
                   document.getElementById("mySpan").innerHTML = "Now is Loading...";
                  }

                 if(HttPRequest.readyState == 4) // Return Request
                  {
                   document.getElementById("mySpan").innerHTML = HttPRequest.responseText;
                  }

            }

       }
    </script>
<body Onload="JavaScript:doCallAjax('LIST','');">
<form name="frmMain">
<div style="margin-right:10px">
<span id="mySpan"></span>
</div> 
```

第二页是获取数据的php：

```
$strMode = $_POST["tMode"];
$users_ID = $_POST["tusers_ID"];

if($strMode == "DELETE")
{
    //$strSQL = "DELETE FROM users , stores WHERE users.users_StoreId=stores.stores_ID AND users.users_ID = '".$users_ID."'";
    $strSQL = "update users set users_delete='1' where users.users_ID = '".$users_ID."'";
    $objQuery = mysql_query($strSQL) or die (mysql_error());
}

$strSQL = "SELECT * FROM users , stores WHERE users.users_StoreId=stores.stores_ID and users.users_delete='0' ORDER BY stores.stores_Name , users.users_Type ASC ";
$objQuery = mysql_query($strSQL) or die ("Error Query [".$strSQL."]"); 
```

我无法为此进行分页的问题。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:31:59.317

使用 Google 的[Visualization API 的](https://developers.google.com/chart/interactive/docs/reference) 表格图表 [Visualization: Table](https://developers.google.com/chart/interactive/docs/gallery/table.)。

它将根据您的计数（例如 10 或 20）自动启用分页，并根据列升序或降序对您的内容进行排序。

# java - 将 Long 数组传递给 JSNI 函数

> ID：13066558
> 
> 赞同：0
> 
> 时间：2012-10-25T10:25:17.430
> 
> 标签：java, javascript, gwt, jsni

如何传递`Long[]`数组或`List<Long>`JSNI 函数，如下所示：

```
public native void updateData(Long[] data)/*-{
    waveform.update({
        data: [0.5, 1.0, 0.5, 1.0]
    });
}-*/; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:33:59.240

你不能，因为各种原因。

*   Java 数组（无论它的类型）对于 JSNI 来说都是不透明的对象。您必须使用`JsArray`（或`JsArrayNumber`或等）。对于一个`java.util.List`.
*   `java.lang.Long`将是 JSNI 的不透明对象
*   即使使用`long`它也行不通，因为您不能将 a 传递`long`给 JSNI。这是因为并非所有的 long 都可以表示为 JS 数字。JS 的等价物`Number`是`double`.

您必须将您的值复制`Long[]`到 a中，并在将值向下转换为值`JsArrayNumber`时应对可能的溢出。`long``double`

# php - PHP：显示具有公共列约束的数组的值

> ID：13066560
> 
> 赞同：0
> 
> 时间：2012-10-25T10:25:33.213
> 
> 标签：php, mysql, multidimensional-array, foreach

我有一个像这样的多维数组：

```
Array ( 

[0] => Array ( [ans_id] => 1 [ans_name] => PHP Hypertext Preprocessor [ques_id] => 1 [right_ans] => Yes [ques_name] => What is the acronym of PHP? [section_id] => 1 [section_name] => PHP ) 

[1] => Array ( [ans_id] => 2 [ans_name] => Preety Home Page [ques_id] => 1 [right_ans] => No [ques_name] => What is the acronym of PHP? [section_id] => 1 [section_name] => PHP ) 

[2] => Array ( [ans_id] => 3 [ans_name] => Programmed Hypertext Page [ques_id] => 1 [right_ans] => No [ques_name] => What is the acronym of PHP? [section_id] => 1 [section_name] => PHP ) 

[3] => Array ( [ans_id] => 4 [ans_name] => Programmed Hypertext Preprocessor [ques_id] => 1 [right_ans] => No [ques_name] => What is the acronym of PHP? [section_id] => 1 [section_name] => PHP ) ) 
```

我的桌子是这样的：

```
ans_id  ans_name                       ques_id                right_ans

1   PHP Hypertext Preprocessor           1                         Yes

2   Preety Home Page                     1                          No

3   Programmed Hypertext Page            1                          No

4   Programmed Hypertext Preprocessor    1                          No

5   Andy Suraski                        12                          No

6   Zeev Gutman                         12                          No

7   Rasmus Lerdorf                      12                         Yes

8   Perl                                12                          No 
```

我想检索一组常见问题 id 的答案

即一组所有答案`Ques_id='1'`，第二组所有答案`ques_id='12'`，等等。

我应该使用这段代码：

```
foreach($all_ans_cat as $r)
{                       
   echo $r['ans_id']."  ".$r['ans_name']."<br>";
} 
```

这是将表中存在的所有值作为一组检索，并在第二组中再次显示相同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:45:27.377

您可以使用具有分组依据和聚合功能的查询

看一下

[http://www.w3schools.com/sql/sql_groupby.asp](http://www.w3schools.com/sql/sql_groupby.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:16:08.830

选择按 ques_id 排序的所有答案并生成所需结构的数组

```
$questions = array();
$prevQuestionId = null;
foreach ($all_ans_cat as $r) {
    if ($r['ques_id'] !== $prevQuestionId) {
        $questions[] = array(); 
    }
    $questions[sizeof($questions)-1][] = $r;
    $prevQuestionId = $r['ques_id'];
} 
```

结果数组将是：

```
0:
    - [ans1, ques1]
    - [ans2, ques1]
    ...
1: 
    - [ans5, ques13]
    - [ans6, ques13]
    ...
... 
```

# windows-phone-7 - Window Mobile 7 IE 需要尾随反斜杠

> ID：13066561
> 
> 赞同：1
> 
> 时间：2012-10-25T10:25:36.007
> 
> 标签：windows-phone-7, iis, ie-mobile

我们在预生产环境中有一个 IIS Web 应用程序，它在 Win Mobile 7 中有一个古怪的行为。

我们的应用程序是使用默认页面访问的，因此我们的规范 URL 类似于：[http ://www.ourdomain.com/location/ourapplication](http://www.ourdomain.com/location/ourapplication)

除 Windows Mobile IE9 外，所有浏览器都使用尾部斜杠修复此 URL：[http ://www.ourdomain.com/location/ourapplication/](http://www.ourdomain.com/location/ourapplication/)

因此，CSS 和媒体文件可以`"includes/css/mycss.css"`在这些浏览器上正确加载 ( )。我们测试了 PC、MAC、OSX、Android 和 WinPhone。只有 WinPhone 不正确地处理这个，并且只在第一次加载时。Windows Phone IE 不添加尾部斜杠。

我试过使用`"/includes/..."`, `"~/includes/..."`,`"../includes/..."`但`"http://www.ourdomain.com/locationname/ourapplication/includes..."`没有任何成功。

有人对此原因和/或解决方案有任何想法吗？

# facebook-graph-api - SSO 关注点 - 服务器客户端通信

> ID：13066563
> 
> 赞同：1
> 
> 时间：2012-10-25T10:25:39.400
> 
> 标签：facebook-graph-api, single-sign-on

我想就 Facebook SSO（或任何 SSO 提供商，就此而言）的安全问题征求您的意见。

当用户在移动设备上执行 FB SSO 并执行登录到我们的应用程序时，我们将从 FB 移动应用程序接收到的令牌传递到我们的服务器，服务器向 FB 发出请求以验证令牌是否有效，这不是一个被盗的请求。

这只是第一次。从理论上讲，从现在开始每次调用我们的服务器时，我们仍然需要调用 FB 服务器并继续验证令牌，因为 Facebook 是我们的身份服务器。这显然不理想，因为对我们服务器的每个请求都不能不断地与 FB 服务器请求同步，性能方面和许多其他原因。

然而，从安全的角度来看，虽然所有请求都是 SSL 的，但我们的服务器并不知道这个用户令牌是否仍然有效，唯一的方法是调用 FB 服务器。（一个很好的例子是用户执行 SSO，然后在 FB 设置中删除了该应用程序。）

你对这个问题有什么看法？

# javascript - knockoutjs - 文本区域中的 html

> ID：13066564
> 
> 赞同：0
> 
> 时间：2012-10-25T10:25:40.483
> 
> 标签：javascript, knockout.js

我正在使用 knockoutjs，需要一种在文本区域内显示原始 html 的方法。是作为编码的 html 存储在我的数据库中，例如

```
&lt;object width="640" ..... 
```

但我希望它显示为

<对象宽度=“640”

供用户编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:34:39.803

我猜您正在使用`text`或`value`绑定，`textarea`如果您将其更改为`html`它将按您的需要工作：

```
<textarea data-bind="html: data"></textarea> 
```

这是一个例子：http: [//jsfiddle.net/vyshniakov/qTRSX/](http://jsfiddle.net/vyshniakov/qTRSX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:28:43.683

如果您的 html 已经被转义，那么您已经准备就绪，请参阅[**演示**](https://tinker.io/e387e)

# expressionengine - 使用 stash 时，我的表达式引擎站点的 URL 是什么

> ID：13066566
> 
> 赞同：3
> 
> 时间：2012-10-25T10:25:53.243
> 
> 标签：expressionengine, expressionengine-stash

我试图了解 stash 插件的使用将如何影响我网站的 URL。传统方式：我有一个模板组，叫做site。在 TG 站点中，我有模板文章、about_us 等。单个条目的 URl 将是

```
www.mysite.com/index.php/site/articles/title_of_respective_article 
```

关于我们页面的 URL：

```
www.mysite.com/index.php/site/about_us 
```

两者都将反映模板组/模板结构，因此对 SEO 友好，并为用户提供他们在网站上的位置的提示。

但是当我使用 stash 时，我将有 2 个包装器（一个用于主页，一个用于站点的其余部分。部分将用于页眉、主要内容和页脚。据我了解，我将使用 template_groups 布局用于主要内容的包装器和部分。

模板看起来像

两个包装器构建 TG“布局” 两者都是隐藏的，因为它们不应该被直接调用。

```
layout
   .homepage
   .site 
```

TG 分音中的三个分音

```
partials
    header
    main_content    
    footer 
```

顺便说一句，那些也不应该被隐藏，因为它们也不是完整的 HTML 页面。

这让我感到困惑。如何找回我的好网址？像这样的网址

```
www.mysite.com/index.php/site/about_us 
```

将不再符合 TG/T 概念。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T18:07:18.427

要扩展他们上面的两个答案，并且只是针对您的 www.mysite.com/index.php/site/about_us 请求：

您将创建一个名为“site”的模板组，然后您也可以在 /index 模板中有类似这样的代码

```
{embed="layout/.site"}

            {exp:channel:entries limit="1" disable="categories|member_data|pagination"}

            {exp:stash:set name='title'}{title}{/exp:stash:set}
            {exp:stash:set name='maincontent'}
            <section>
                <h1>{title}</h1>
                <article>{content}</article>
            </section
            {/exp:stash:set}

            {/exp:channel:entries} 
```

嵌入调用 .site 布局，内部简单地提取您的特定频道：条目数据。

如您所见，它仍然使用传统的模板组/模板方式来构建 URL，只是以不同的方式拉取数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T12:38:42.927

在使用 Stash 和[模板部分方法](http://eeinsider.com/articles/template-partials-using-stash/)（我个人不使用）时，您提到的文件都是[嵌入](http://expressionengine.com/user_guide/templates/embedding.html)的. 您仍然使用与以前相同的模板组和模板文件。

*基于 Stash 的方法只是在*现有模板中做事的一种不同方式——而不是替代它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T14:39:21.617

正如德里克所说。考虑它的方式是这样的 - 使用模板部分方法，您的模板主要包含（如果不是唯一的话）条目逻辑（通道条目循环、其参数、该通道正在播放的自定义字段等）。逻辑的结果将存储作为存储变量。然后，您的嵌入式布局模板调用存储变量以显示您已存储的内容。因此，您的 URL 结构保持不变，但您的重复工作量要少得多，因为您将模板限制在逻辑上的次数越多（即，如果有任何格式/显示标记，它们就越简洁），并且管理您的模板就越容易.

# php - 通过 php 调用的 javascript 重置表单

> ID：13066571
> 
> 赞同：0
> 
> 时间：2012-10-25T10:26:17.887
> 
> 标签：php, javascript, html

好的，我已经用谷歌搜索了几个小时，但没有发现任何有用的东西。我迫切需要帮助

我有一个包含以下元素的表格。

```
<form action="sendmail.php" method="post" name="enquiry">
    <table> 
        <tr>
            <td>Name:-</td> 
            <td><input type="text" name="name" /></td>
        </tr> 
        <tr>
            <td>Company:-</td>
            <td> <input type="text" name="company" /></td>
        </tr>
        <tr>
            <td>E-Mail:-</td>
            <td><input type="text" name="email" /></td> 
        </tr>
        <tr>
            <td>Contact:-</td>
           <td> <input type="text" name="contact" /></td>
        </tr>
        <tr>
            <td>Requirement:-</td>
            <td><textarea name="msg"></textarea></td>
        </tr>
    </table>
    <input type="submit" value="submit" onclick="return validation(this.form);">
    <input type="reset" value="Reset" />
</form> 
```

并且 php 有这样一行：

```
<?php
if(mail($to, $subject,$message)) {
   echo "<SCRIPT LANGUAGE='JavaScript'>alert('Your Enquiry was sent successfully we  will get back to you shortly');
              window.location.href='javascript:history.go(-1)';
              document.enquiry.reset();
         </SCRIPT>";
}
?> 
```

然后有一个“else”，代码相同，但消息不同。

问题是当它重定向回表单页面时，字段中仍然有数据。我更喜欢的是一个干净的表单，当用户返回页面时没有填写任何数据。

请注意，我是 javascript 的新手，因此请尝试建议一个易于理解的修复程序。

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:35:16.210

那是因为您要回到历史记录中-浏览器会在您后退/前进时记住表单。

您所做的并不是“正常”的用户体验——我建议您在“sendmail.php”文件中打印出一个漂亮的页面来表示感谢，然后让用户导航到他们想要在您的网站上访问的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:37:38.050

正如 Ed 所说，您正在回到历史，浏览器会记住它。

尝试这个：

而不是这一行：`window.location.href='javascript:history.go(-1)';`

写 ：`window.location.href='RelativePathToActualForm';`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:35:00.910

您的问题在于 javascript 代码：

```
window.location.href='javascript:history.go(-1)';
document.enquiry.reset(); 
```

删除此代码

**编辑：**

使用此代码：

```
if(mail($to, $subject,$message)){?>
    <SCRIPT LANGUAGE='JavaScript'>
    alert('Your Enquiry was sent successfully we  will get back to you shortly');
    window.location.href='/*YOUR FORM PAGE LINK*/';
    </SCRIPT>
<?php } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:48:25.043

简单的解决方案：只需使用 jquery - 在 head 部分中使用一行以在您的页面中包含 jquery。

您提供的 javascript 代码段应包含：

```
window.location="theform_page_address" ; 
```

代替

```
window.location.href='javascript:history.go(-1)';
              document.enquiry.reset(); 
```

并在表单页面地址中：在 head 部分添加以下 js 片段：

```
<script type="text/javascript">
    $(document).ready(function(){

    $('input').val('');
    $('select').val('-1');

    $('textarea').val();

    });

</script> 
```

编辑：我假设您的表单具有`input`和`textarea`具有空白默认值的 `select`元素，以及具有 -1 作为默认选项值的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T10:49:30.613

先看使用php session-based flash messages的例子[http://mikeeverhart.net/php/session-based-flash-messages/](http://mikeeverhart.net/php/session-based-flash-messages/)

常规流程：

1.  用户填写表格
2.  出版社提交
3.  您的 php 脚本 sendmail.php 验证表单
4.  如果有一些验证错误 [设置错误信息]
5.  如果有一些邮件发送错误 [设置错误信息]
6.  如果一切正常[设置成功消息]
7.  从 php 调用重定向到表单显示页面。

[设置错误|成功消息] - 使用上面提供的链接如何设置消息。

现在重要的部分是每次呈现表单时，您应该检查设置的消息，如果有一些消息 - 显示它们。

这些消息是如何工作的？它只是将消息设置为会话（$_SESSION）数组，然后在显示消息时，从会话中取消设置消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T10:41:58.093

处理完表单发布后，您应该重定向到另一个页面（或再次重定向到您的表单）并在那里显示您的消息，例如：

```
php header("Location: form.php?formpostwassuccessful=1"); 
```

然后是表单页面

```
if(isset($_GET['formpostwassuccessful']))
  echo "Thank you. Your form was sent."; 
```

[发布后](https://stackoverflow.com/questions/1614241/redirect-after-post)还看到重定向？

# java - 在 Java 中找不到异常的来源

> ID：13066573
> 
> 赞同：0
> 
> 时间：2012-10-25T10:26:41.047
> 
> 标签：java, exception, batik

基本上是抛出异常，我找不到原因。这是我在控制台上得到的：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0
    at org.apache.batik.gvt.renderer.StrokingTextPainter.computeTextRuns(Unknown Source)
    at org.apache.batik.gvt.renderer.StrokingTextPainter.getTextRuns(Unknown Source)
    at org.apache.batik.gvt.renderer.StrokingTextPainter.getOutline(Unknown Source)
    at org.apache.batik.gvt.renderer.BasicTextPainter.getGeometryBounds(Unknown Source)
    at org.apache.batik.gvt.TextNode.getGeometryBounds(Unknown Source)
    at org.apache.batik.gvt.TextNode.getSensitiveBounds(Unknown Source)
    at org.apache.batik.gvt.AbstractGraphicsNode.getTransformedSensitiveBounds(Unknown Source)
    at org.apache.batik.gvt.CompositeGraphicsNode.getSensitiveBounds(Unknown Source)
    at org.apache.batik.gvt.CompositeGraphicsNode.getTransformedSensitiveBounds(Unknown Source)
    at org.apache.batik.gvt.CompositeGraphicsNode.getSensitiveBounds(Unknown Source)
    at org.apache.batik.gvt.CompositeGraphicsNode.getTransformedSensitiveBounds(Unknown Source)
    at org.apache.batik.gvt.CompositeGraphicsNode.getSensitiveBounds(Unknown Source)
    at org.apache.batik.gvt.CompositeGraphicsNode.getTransformedSensitiveBounds(Unknown Source)
    at org.apache.batik.gvt.CompositeGraphicsNode.getSensitiveBounds(Unknown Source)
    at org.apache.batik.gvt.CompositeGraphicsNode.nodeHitAt(Unknown Source)
    at org.apache.batik.gvt.event.AbstractAWTEventDispatcher.dispatchMouseEvent(Unknown Source)
    at org.apache.batik.gvt.event.AbstractAWTEventDispatcher.dispatchEvent(Unknown Source)
    at org.apache.batik.gvt.event.AWTEventDispatcher.dispatchEvent(Unknown Source)
    at org.apache.batik.gvt.event.AbstractAWTEventDispatcher.mouseEntered(Unknown Source)
    at org.apache.batik.swing.gvt.AbstractJGVTComponent$Listener.dispatchMouseEntered(Unknown Source)
    at org.apache.batik.swing.svg.AbstractJSVGComponent$SVGListener.dispatchMouseEntered(Unknown Source)
    at org.apache.batik.swing.gvt.AbstractJGVTComponent$Listener.mouseEntered(Unknown Source)
    at java.awt.AWTEventMulticaster.mouseEntered(Unknown Source)
    at java.awt.AWTEventMulticaster.mouseEntered(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.trackMouseEnterExit(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$400(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

它显然来自我用来绘制 SVG 文件的蜡染库，但我确保在文件加载、准备好并在屏幕上显示之前没有绘制任何内容。抛出时没有任何东西被绘制。

另一个有趣的事情是投掷的时机。我找不到任何合乎逻辑的模式，因为有时它会在我开始上课时立即抛出，有时需要超过五分钟。除此之外，据我测试，没有一个单独的动作调用 repaint() 来触发它，或者更确切地说是所有动作。

我是 Java 新手，所有其他异常都有抛出它们的类和行号，所以我不知道该怎么做。

任何建议将不胜感激。

代码是巨大的，所以我会只放paint方法，如果需要任何额外的东西，请说出来。

```
@Override
    public void paint(Graphics g) {
        if(documentLoaded && showingOnScreen){
            try{
                rad = (int)(radInit+zoom*faktorRad); //max rad = 20
                super.paint(g);

                Graphics2D g2d = (Graphics2D) g;
                paintElements(g2d);

            }
            catch(NullPointerException nulle){

            }
        }
    } 
```

编辑：我的班级没有数组，所以我无法检查任何索引。我认为这个异常是从我使用的库中抛出的，但它是一个 .jar 文件，我不知道如何打开它或者我是否可以打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:41:09.673

```
java.lang.ArrayIndexOutOfBoundsException 
```

只有在使用非法索引访问数组时才会引发此异常。索引为负数或大于或等于数组的大小。[ArrayIndexOutOfBoundsException](http://docs.oracle.com/javase/6/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)。
所以这意味着在你的程序中你以错误的方式使用数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:41:18.940

似乎在库尝试计算有关几何的某些内容时，在“鼠标输入”事件之后引发了异常。堆栈跟踪中的所有类似乎都不是您定义的侦听器。恐怕我对这个库一无所知，但我建议您查看您为不太正确的内容定义的 UI，甚至只是您可以删除并尝试重现问题的内容。看起来渲染的几何图形有问题，或者侦听器在它应该被调用之前被调用，并且取决于尚未发生的渲染。

# javascript - 从 web 视图中删除而不选择？

> ID：13066576
> 
> 赞同：0
> 
> 时间：2012-10-25T10:26:53.750
> 
> 标签：javascript, ios, richtextbox

我的应用程序中有一个网络视图，我在其中输入文本。为了删除相同的文本，我使用以下命令：

```
 [self.webView stringByEvaluatingJavaScriptFromString:@"document.execCommand('selectall')"];
    [self.webView stringByEvaluatingJavaScriptFromString:@"document.execCommand('delete')"]; 
```

有什么方法可以直接删除所有内容而不选择？我没有太多关于 javascript 的知识。谢谢

# caching - 如果未提供文件扩展名，则缓存浏览器图像

> ID：13066588
> 
> 赞同：4
> 
> 时间：2012-10-25T10:27:45.357
> 
> 标签：caching, browser, jpeg

当浏览器请求 jpg 并且服务器返回数据但不是作为对 jpg 文件的引用而是发送 jpg 数据本身时，浏览器是否可以缓存数据？

例如：

[http://www.somewebsite.com/image/abc](http://www.somewebsite.com/image/abc)

此 uri 返回 jpg 数据。有没有办法让浏览器缓存它接收到的数据以避免再次请求它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T11:49:04.880

我只是尝试调试您的示例，但收到了一个`Account Suspended. Webmaster, please, contact support.`页面！

因此，当我盲目工作时，我可以建议研究`header('Expires: SOME DATA HERE')`PHP 中的函数（我假设您使用的是 PHP）。

如果解决方案不在那里，您还可以使用 .htaccess 来设置标题

```
<IfModule mod_expires.c>
ExpiresActive On
############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
 ExpiresDefault "access plus 1 year"
</FilesMatch>
</IfModule> 
```

此示例取自[http://www.robertwent.com/blog/servers-and-hosting/45-set-expires-headers-in-htaccess](http://www.robertwent.com/blog/servers-and-hosting/45-set-expires-headers-in-htaccess)

最终，标题告诉浏览器您如何建议内容被缓存。浏览器实际所做的有时可能令人惊讶。

# jakarta-ee - 电子邮件未触发

> ID：13066589
> 
> 赞同：1
> 
> 时间：2012-10-25T10:27:51.017
> 
> 标签：jakarta-ee, servlets, jakarta-mail

我想通过 servlet 触发我的电子邮件，但它没有触发。当我将代码作为独立的 Java 应用程序运行时，它运行良好。下面是我的代码。
Servlet 给了我问题，从服务器我无法触发代码

```
package model;

import java.util.Date;
import java.util.Properties;

import javax.mail.*;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.naming.InitialContext;
importjavax.naming.NamingException;

import com.sun.xml.internal.bind.CycleRecoverable.Context;

public class TestJavaMail   
{

    String userid ;
    String password;
    public TestJavaMail(String userid , String password)
    {
        this.userid = userid;
        this.password =password;
    }

        public void process()
        {

        String[] to = {"faiz.akhtar@agnitio-technologies.com","manish.kaushik@agnitio-           technologies.com",
                "sandeep.sharma@agnitio-technologies.com"};
        Properties props = new Properties();   
        props.put("mail.transport.protocol", "smtp");   
        props.put("mail.smtp.host", "smtp.exchangemails.com");   
        props.put("mail.smtp.port", 25);   

        props.put("mail.smtp.user", userid);   
        props.put("mail.smtp.pass", password);   
        props.put("mail.smtp.starttls.enable", "true");   
        props.put("mail.smtp.auth ", "true");   

                                Authenticator auth = new javax.mail.Authenticator()   
        {   
             protected PasswordAuthentication getPasswordAuthentication()   
            {   
                return new PasswordAuthentication(userid, password);   
            }   
        };   

                    Session session = Session.getDefaultInstance(props,auth);   

        try  
        {   
                                MimeMessage msg = new MimeMessage(session);   
            System.out.println("Mimemessage ceated");   
            InternetAddress[] iaFrom = { new InternetAddress(   
                    "moonis.raza@agnitio-technologies.com") };   
            msg.setFrom(iaFrom[0]);   
            InternetAddress[] iaTo =  new InternetAddress[to.length] ;  
            for(int i=0;i<to.length;i++)
            {
                iaTo[i] = new InternetAddress(to[i]);
                msg.addRecipient(Message.RecipientType.TO, iaTo[i]);
            }

            msg.setSubject("Test Java Mail");   
            msg.setSentDate(new Date());   
            msg.setText("Hello, Congrats - It is working\n pls send acknowledgement mail to senderof u get this" +
                    "\n as it is part of project");   
            Transport tran = session.getTransport("smtp");   
            System.out.println("Transport object created......");   
            //tran.setStarttls(true);   
            tran.connect("smtp.exchangemails.com", 25, "moonis.raza@agnitio-           technologies.com", "welcome");   
            //tran.connect();   
            msg.saveChanges();   
            System.out.println("Connect succeeded");   
            tran.sendMessage(msg, msg.getAllRecipients());   
            tran.close();   
            System.out.println("Mail Sent Successfully");   
        }   
        catch (MessagingException mex)   
        {   
            System.out.println("send failed, exception: " + mex);   
        }   
                        }   
} 
```

这是servlet代码：

```
package com.controller;

import java.io.*;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import model.TestJavaMail;
/**
 * Servlet implementation class emailservice
 */
   public class emailservice extends HttpServlet {

    protected void doGet(HttpServletRequest req, HttpServletResponse res) throws     ServletException, IOException {
        res.setContentType("text/html");
        System.out.println("here");

            PrintWriter writer = res.getWriter();
            writer.println("HELLO WORLD");
            String h = "hello";

            writer.println("" +h);

            writer.println("welcome ");

            writer.println(req.getRemoteHost());

        String userid = getServletConfig().getInitParameter("userid");
        String password = getServletConfig().getInitParameter("password");
        writer.println(userid);     
        TestJavaMail t1 = new TestJavaMail(userid, password);

        t1.process();
        writer.println("\n bhej di ");

    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:05:41.747

我试图为自己运行你的代码，看看会发生什么。首先，我确保`mail.jar`类路径上有可用的文件。其次，我做了一些必要的更改，以便能够运行代码而不会出现身份验证错误。即，而不是：

```
props.put("mail.smtp.host", "smtp.exchangemails.com"); 
```

我用了：

```
props.put("mail.smtp.host", "smtp.gmail.com"); 
```

显然，我必须为这个不同的主机提供我自己的用户名和密码。

你说的对; 该应用程序在独立执行时运行良好。但是，当我将其移至 a 时`JBoss AS 7.0.0`，我遇到了两个不同的问题。

最初，我遇到了这个错误：

```
at javax.mail.Session.getDefaultInstance(Session.java:320) [mail-1.4.4.jar:1.4.4]
at test.TestJavaMail.process(TestJavaMail.java:42) [classes:] 
```

经过一番谷歌搜索并找到[这里](http://www.java.net/node/697528)给出的解决方案后，我可以摆脱这个错误。即，我替换了这一行：

```
Session session = Session.getDefaultInstance(props, auth); 
```

和：

```
Session session = Session.getInstance(props, auth); 
```

然后，我尝试再次运行该应用程序。这一次，我收到以下错误：

```
java.lang.NoClassDefFoundError: javax/net/ssl/SSLPeerUnverifiedException
    com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1900)
    com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
    javax.mail.Service.connect(Service.java:295)
    test.TestJavaMail.process(TestJavaMail.java:63) 
```

我用谷歌搜索了上面的错误，发现[我使用的 JBoss 版本有一个错误](https://issues.jboss.org/browse/AS7-1278)。因此，我将应用程序移至更高`JBoss`版本，`JBoss AS 7.1.1`并且成功了。servlet 成功地向我为其提供的目的地发送了一封电子邮件。

我希望这项调查对您和任何遇到类似问题的访问者都有帮助。

# python - 有没有办法保护 Python eval 的字符串？

> ID：13066594
> 
> 赞同：13
> 
> 时间：2012-10-25T10:28:10.583
> 
> 标签：python, security, eval

**关于在不安全字符串**上使用 Python 的 eval 的 SO 有很多问题（例如：[Python 的 eval() 对不受信任的字符串的安全性？](https://stackoverflow.com/questions/661084/security-of-pythons-eval-on-untrusted-strings)，[Python：使 eval 安全](https://stackoverflow.com/questions/3513292/python-make-eval-safe)）。一致的答案是，这是一个坏主意。

但是，我几乎没有找到关于哪些字符串可以被认为是安全的（如果有的话）的信息。现在我想知道是否有可用的“安全字符串”定义（例如：仅包含小写 ascii 字符或任何符号 +-*/() 的字符串）。我发现的漏洞利用通常依赖于 _.,:[]'" 等。这种方法是否安全（用于图形绘制 Web 应用程序）？

否则，我想使用 Alex Martelli 建议的解析包是唯一的方法。

编辑：不幸的是，对于上述字符串为什么/如何被认为是不安全的（一个微小的工作漏洞），既没有答案给出令人信服的解释，也没有相反的解释。我知道应该避免使用 eval ，但这不是问题。因此，我将奖励第一个提出有效利用或非常好的解释为什么如上所述损坏的字符串被视为（不）安全的字符串的人。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T07:58:50.357

在这里，您有一个有效的“利用”，您的限制到位 - 仅包含小写 ascii 字符或任何符号 +-*/() 。它依赖于第二个评估层。

```
def mask_code( python_code ):
    s="+".join(["chr("+str(ord(i))+")" for i in python_code])
    return "eval("+s+")"

bad_code='''__import__("os").getcwd()'''
masked= mask_code( bad_code )
print masked
print eval(bad_code) 
```

输出：

```
eval(chr(111)+chr(115)+chr(46)+chr(103)+chr(101)+chr(116)+chr(99)+chr(119)+chr(100)+chr(40)+chr(41))
/home/user 
```

这是一个**非常微不足道**的“利用”。我敢肯定还有无数其他人，即使有更多的字符限制。值得重复的是，应该始终使用解析器或 ast.literal_eval()。只有通过解析标记才能确保字符串可以安全评估。其他任何事情都在押注这所房子。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T10:31:45.767

不，没有，或者至少没有一种明智的、真正安全的方式。Python 是一种高度动态的语言，另一方面，它很容易颠覆任何锁定该语言的尝试。

您要么需要为所需的子集编写自己的解析器，要么`ast.literal_eval()`在遇到特定情况时使用现有的东西，例如 . 使用为手头的工作设计的工具，而不是试图强迫现有的工具做你想做的工作，糟糕。

编辑：

两个字符串的示例，虽然符合您的描述，但如果`eval()`按顺序编辑，将执行任意代码（此特定示例运行`evil.__method__()`.

```
"from binascii import *"
"eval(unhexlify('6576696c2e5f5f6d6574686f645f5f2829'))" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-10T11:17:03.617

一个类似于 goncalopp 的漏洞利用，但也满足字符串`'eval'`不是漏洞利用的子字符串的限制：

```
def to_chrs(text):
    return '+'.join('chr(%d)' % ord(c) for c in text)

def _make_getattr_call(obj, attr):
    return 'getattr(*(list(%s for a in chr(1)) + list(%s for a in chr(1))))' % (obj, attr)

def make_exploit(code):
    get = to_chrs('get')
    builtins = to_chrs('__builtins__')
    eval = to_chrs('eval')
    code = to_chrs(code)
    return (_make_getattr_call(
                _make_getattr_call('globals()', '{get}') + '({builtins})',
                '{eval}') + '({code})').format(**locals()) 
```

它使用 genexp 和元组解包的组合来调用`getattr`两个参数而不使用逗号。

一个示例用法：

```
>>> exploit =  make_exploit('__import__("os").system("echo $PWD")')
>>> print exploit
getattr(*(list(getattr(*(list(globals() for a in chr(1)) + list(chr(103)+chr(101)+chr(116) for a in chr(1))))(chr(95)+chr(95)+chr(98)+chr(117)+chr(105)+chr(108)+chr(116)+chr(105)+chr(110)+chr(115)+chr(95)+chr(95)) for a in chr(1)) + list(chr(101)+chr(118)+chr(97)+chr(108) for a in chr(1))))(chr(95)+chr(95)+chr(105)+chr(109)+chr(112)+chr(111)+chr(114)+chr(116)+chr(95)+chr(95)+chr(40)+chr(34)+chr(111)+chr(115)+chr(34)+chr(41)+chr(46)+chr(115)+chr(121)+chr(115)+chr(116)+chr(101)+chr(109)+chr(40)+chr(34)+chr(101)+chr(99)+chr(104)+chr(111)+chr(32)+chr(36)+chr(80)+chr(87)+chr(68)+chr(34)+chr(41))
>>> eval(exploit)
/home/giacomo
0 
```

这证明了仅对使代码安全的文本定义限制是非常困难的。即使是这样的事情`'eval' in code`也不安全。要么您必须完全消除执行函数调用的可能性，要么您必须从的环境中删除**所有**危险的内置函数。`eval`我的漏洞利用还表明，即使您不能使用逗号，`getattr`也一样糟糕`eval`，因为它允许您随意进入对象层次结构。例如，`eval`即使环境不提供，你也可以获得真正的功能：

```
def real_eval():
    get_subclasses = _make_getattr_call(
                         _make_getattr_call(
                             _make_getattr_call('()',
                                 to_chrs('__class__')),
                             to_chrs('__base__')),
                         to_chrs('__subclasses__')) + '()'

    catch_warnings = 'next(c for c in %s if %s == %s)()' % (get_subclasses,
                                                            _make_getattr_call('c',
                                                                to_chrs('__name__')),
                                                            to_chrs('catch_warnings'))

    return _make_getattr_call(
               _make_getattr_call(
                   _make_getattr_call(catch_warnings, to_chrs('_module')),
                   to_chrs('__builtins__')),
               to_chrs('get')) + '(%s)' % to_chrs('eval')

>>> no_eval = __builtins__.__dict__.copy()
>>> del no_eval['eval']
>>> eval(real_eval(), {'__builtins__': no_eval})
<built-in function eval> 
```

即使您删除了所有内置函数，代码也会变得安全：

```
>>> eval(real_eval(), {'__builtins__': None})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 1, in <module>
NameError: name 'getattr' is not defined 
```

请注意，设置`'__builtins__'`为`None`还删除`chr`,`list`等`tuple`。您的字符限制*和* `'__builtins__'`to的组合`None`是完全安全的，因为用户无法访问任何内容。他不能使用`.`、括号`[]`或任何内置函数或类型。

即使我必须这样说，您可以评估的内容也非常有限。除了对数字进行运算之外，您无能为力。

可能从内置函数中删除`eval`,`getattr`和就足以`chr`使代码安全，至少我想不出一种方法来编写不使用其中之一的漏洞利用程序。

“解析”方法可能更安全并提供更大的灵活性。例如[，这个](http://code.activestate.com/recipes/496746-restricted-safe-eval/)配方非常好，也很容易定制以添加更多限制。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-11T01:59:24.160

为了研究如何进行安全评估，我建议使用 RestrictedPython 模块（超过 10 年的生产使用，一款优秀的 Python 软件）

[http://pypi.python.org/pypi/RestrictedPython](http://pypi.python.org/pypi/RestrictedPython)

RestrictedPython 获取 Python 源代码并修改其 AST（抽象语法树）以使评估在沙箱中安全，而不会泄露任何可能允许逃离沙箱的 Python 内部结构。

从 RestrictedPython 源代码中，您将了解需要执行哪些技巧才能使 Python 沙盒安全。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T23:49:23.537

实际上，您可能应该避免使用 eval。

但如果你坚持下去，你可以确保你的字符串是字母数字的。那应该是安全的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-23T12:37:38.010

假设命名函数存在并且是安全的：

```
if re.match("^(?:safe|soft|cotton|ball|[()])+$", code): eval(code) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-12T04:54:59.320

创建输入清理例程是不够的。您还必须确保不会意外遗漏消毒。一种方法是[污点检查](http://www.pythonsecurity.org/wiki/taintmode/)。

# jsf - 如何在一行JSF中制作元素

> ID：13066595
> 
> 赞同：1
> 
> 时间：2012-10-25T10:28:14.463
> 
> 标签：jsf

如何使元素在一行中呈现，如下图所示：

![在此处输入图像描述](../Images/aa57bcce617999b014a071da25e7aa8b.png)

这是代码：

```
 <h:outputLabel
                                        value="&#160;#{cdocmsgs['promo.action.name']}&#160;"
                                        id="promo_action_name_id"/>

                                <h:selectOneMenu id="promotion" widgetVar="sub" tabindex="206"
                                                 styleClass="select-fix-average"
                                                 value="#{cdocBean.entity.promoActionName}" effect="fade"
                                                 required="#{cdocBean.entity.promotion}" requiredMessage="#{cdocmsgs['enter.promo']}">
                                    <f:selectItem itemLabel="#{cdocmsgs['promoSelect']}"
                                                  itemValue="" />
                                    <f:selectItems value="#{promoActionBean.DAO.resultList}"
                                                   var="item" itemLabel="#{item.name}" itemValue="#{item.name}" />
                                </h:selectOneMenu>
                                <h:outputText value="" />
                                <h:outputText value="" />

                                <h:outputLabel value="&#160;#{cdocmsgs['source.of.info']}&#160;"
                                               id="whenId"/>
                                <h:selectOneMenu id="source" widgetVar="sub"
                                                 styleClass="select-fix-average"
                                                 value="#{cdocBean.entity.source}" effect="fade" tabindex="206"
                                                 required="#{cdocBean.entity.promotion}" requiredMessage="#{cdocmsgs['enter.source']}">
                                    <f:selectItem itemLabel="#{cdocmsgs['sourceSelect']}"
                                                  itemValue="" />
                                    <f:selectItems value="#{adSourceBean.DAO.resultList}" var="item"
                                                   itemLabel="#{item.name}" itemValue="#{item.name}" />
                                </h:selectOneMenu> 
```

我已经放置了 h:panelGroup 但它没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T10:44:16.337

您可以像这样使用 h:panelGrid：

```
<h:panelGrid columns="3" columnStyles="style1, style2, style3">    
    <jsfelement 1 />
    <jsfelement 2 />
    <jsfelement 3 />

    <jsfelement 4 />
    <jsfelement 5 />
    <jsfelement 6 />    
</h:panelGrid> 
```

它看起来像这样：

元素1 元素2 元素3

元素4 元素5 元素6

并呈现为 html 表格。您当然可以根据自己的喜好设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:33:41.123

使用简单的 html 将是一种选择。

或者在 facelets 中有 panelGrid 和 panelGroup 来做到这一点。通常在 panelGrid 内部使用 panlGroup 将多个组件分组到一个单元格中。

一个例子： http: [//www.jsftoolbox.com/documentation/help/12-TagReference/html/h_panelGrid.html](http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_panelGrid.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:44:55.877

您可以通过使用 html 表来实现这一点

```
<table width="100%" border="0" cellspacing="2" cellpadding="2">
  <tr>
    <td><h:outputLabel value="&#160;#{cdocmsgs['promo.action.name']}&#160;"
                                    id="promo_action_name_id"/></td>
    <td><h:selectOneMenu id="promotion" widgetVar="sub" tabindex="206"
                                             styleClass="select-fix-average"
                                             value="#{cdocBean.entity.promoActionName}" effect="fade"
                                             required="#{cdocBean.entity.promotion}" requiredMessage="#{cdocmsgs['enter.promo']}">
                                <f:selectItem itemLabel="#{cdocmsgs['promoSelect']}"
                                              itemValue="" />
                                <f:selectItems value="#{promoActionBean.DAO.resultList}"
                                               var="item" itemLabel="#{item.name}" itemValue="#{item.name}" />
                            </h:selectOneMenu></td>
         <td><h:outputText value="" /></td>
         <td><h:outputText value="" /></td>
  </tr>

</table> 
```

# asp.net - 检测同时访问的唯一用户

> ID：13066597
> 
> 赞同：3
> 
> 时间：2012-10-25T10:28:21.813
> 
> 标签：asp.net, .net, google-analytics

想象一个简单的 html 页面，其中有 3 个 iframe 指向同一个 url：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <iframe src="http://www.mydom.com/mypage.aspx"></iframe>
    <iframe src="http://www.mydom.com/mypage.aspx"></iframe>
    <iframe src="http://www.mydom.com/mypage.aspx"></iframe>
</body>
</html> 
```

我的目标是在 mypage.aspx 代码后面跟踪唯一访问者。听起来很简单，但如下：

```
if (Request.Cookies["myc"] == null)
{
    // New visitor!
    Response.Cookies["myc"].Value = myval;
    Response.Cookies["myc"].Expires = DateTime.Now.AddYears(10);
}
else
{
    // Returning visitor
} 
```

有问题。访问带有 3 个 iframe 的 html 页面，我同时获得了对 mypage.aspx 和 Request.Cookies["myc"] 的三个点击，这三次都是空的，而我应该明白它是同一个用户（第一次点击：新访客，第二次和第三次点击：回访者总共有一位访客/用户）。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:16:11.193

一个非常有趣的问题！

核心问题是互联网是一个异步、匿名的地方。

浏览器可能一次提交其中一个请求，或者同时提交所有三个请求，因此无法控制用户机器上事件的顺序。

此外，浏览器不会做任何特殊的努力来唯一地识别用户。任何识别系统都必须在请求/响应周期中进行临时操作。GA 使用 cookie 来标记用户，并且可以在每个请求中提取该信息。本质上，GA 在用户访问您的网站之前对其进行标记，从而允许该服务在“第一次”点击时识别用户。

您的问题是您想实现自己的识别解决方案。您需要以某种方式在请求中包含用户的身份。但是，在他们访问该站点之前，您无法做到这一点。而且，鉴于每个同时请求将在响应中嵌入不同的身份，您不能保证用户将被标记为单一身份。

基本上，据我所知，没有任何解决方案可以让您的网站自动且唯一地识别匿名用户。

您可能很想使用 IP 地址，这在某些情况下可以工作，但这是一个非常糟糕的解决方案。现在我在我的雇主防火墙后面。如果您使用当前对您可见的 IP 地址来识别我，您会看到我和其他 5,000 名在这里作为单个用户工作的人。这是一个非常危险的系统。

如果您真的非常需要每个用户的单一身份 - 一个无法通过多个同时请求等绕过或意外踩到的身份 - 那么您唯一的解决方案是要求用户通过嵌入的值在他们的第一个请求中明确标识自己在 POST 或 GET 查询或在先前访问期间创建的 cookie 中。

在您的场景中，所有三个响应都可以生成一个具有唯一 ID 的 cookie（三个连续的 id，每个都覆盖以前的值）。登陆页面可以是一个通用的“欢迎来到我的网站”页面，或者类似的东西。然后，用户可以单击一个链接来访问该站点，此时最后生成的 cookie（具有最后生成的 id）将嵌入到请求中。虽然您不能保证每个用户只会生成一个 ID，但您至少可以相当确信，在第一轮请求之后（以及在他们访问您网站的主要内容部分之前），他们将被一个 ID 识别。

当然，您可以使用复杂的 AJAX 解决方案，其中对身份不明的用户的响应本质上是一个容器（没有 ID）。然后 AJAX 可以在 cookie 中设置一个标志，指示它正在检索一个 ID，然后它可以提交第一个请求。后续的 AJAX 容器会看到这个 cookie，然后进入轮询状态，等待标志被清除。当第一个响应返回时，第一个 AJAX 容器可以在 cookie 中设置 ID 并更改标志。然后，剩余的容器将检测到标志的变化，并可以从 cookie 中检索 ID（而不是发送自己的请求）。

一旦 AJAX 容器有了 ID，它就可以发送内容请求以及唯一 ID。然后，您的站点可以响应，用适当的数据填充容器（或简单地重定向到适当的页面）。

如果实施得当，此解决方案将或多或少保证为用户分配一个 ID。但真的，值得吗？请记住，cookie 和请求“属于”用户。用户可以很容易地编辑两者。虽然有检测已编辑身份的技术（大多数涉及某种形式的加密），但如果用户愿意，您无法阻止用户“匿名”自己。有时半途而废就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:14:50.900

您所要做的就是将相同的代码放在[webMethod]而不是PageLoad中，然后通过js（XMLHttpRequest）从客户端调用[WebMethod]，您将依次收到三个调用。由于同时命中，不再有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:49:13.640

这很有道理。所有这些的请求第一次都没有任何 cookie，因此在所有情况下都将为 null。请记住，它应该尽可能异步地执行此操作，它必须是线性的（可能是，我不是流程方面的专家）。

相反，请查看 IP 地址和时间戳。如果相同，则可以像同一用户一样工作。

是的，该解决方案并不完美，但它比 cookie 解决方案要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T14:18:18.143

不要使用 iframe，使用母版页。创建一个母版页，并将此代码放在“mypage.aspx”的顶部

```
<%@ Page Language="C#" MasterPageFile="~/Site1.Master" ... 
```

# wpf - 更改自定义 Grid 的 TextBlock

> ID：13066607
> 
> 赞同：1
> 
> 时间：2012-10-25T10:28:42.627
> 
> 标签：wpf, xaml, treeview, setter, datatrigger

```
<Grid Grid.IsSharedSizeScope="True" Name="treeGrid" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="3">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid.Resources>
        <local:LevelConverter x:Key="levelConverter" />
        <HierarchicalDataTemplate ItemsSource="{Binding Items}"
                              DataType="{x:Type local:DirectoryRecord}">
            <Grid ShowGridLines="False">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition SharedSizeGroup="rowHeaderColumn"/>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition SharedSizeGroup="column1"/>
                    <ColumnDefinition SharedSizeGroup="column2"/>
                    <ColumnDefinition SharedSizeGroup="column3"/>
                    <ColumnDefinition SharedSizeGroup="column4"/>
                    <ColumnDefinition SharedSizeGroup="column5"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                       Text="{Binding Name}"></TextBlock>
                <Rectangle Grid.Column="1">
                    <Rectangle.Width>
                        <MultiBinding Converter="{StaticResource levelConverter}">
                            <Binding Path="Level"></Binding>
                            <Binding ElementName="treeViewItemToMeasure" Path="ActualWidth"></Binding>
                        </MultiBinding>
                    </Rectangle.Width>
                </Rectangle>
                <TextBlock Grid.Column="2"
                       Text="{Binding LastAccessed}"></TextBlock>
                <TextBlock Grid.Column="3"
                       Text="{Binding Files.Count}"></TextBlock>
                <TextBlock Grid.Column="4" 
                       Text="{Binding Inherited}"></TextBlock>
                <Grid.Style>
                    <Style TargetType="{x:Type TextBlock}">
                        <Setter Property="Background" Value="Aquamarine" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=Inherited}" Value="True">
                                <Setter Property="Background" Value="Black" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>
            </Grid>
        </HierarchicalDataTemplate>
    </Grid.Resources>
    <TreeView>
        <!-- My binding goes here -->
    </TreeView>
</Grid> 
```

我正在尝试更改自定义网格（TreeGrid）中包含的 TextBlock 的背景，但是此代码因 XamlParseException 而失败

> “TextBlock”TargetTypes 与元素“Grid”的类型不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:39:16.410

而不是在节内定义样式`Grid.Style`，您必须将其声明为`Grid.Resource` `Style`, 并`TargetType`指定，即

```
<Grid.Resources>
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Background" Value="Aquamarine" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=Inherited}" Value="True">
                <Setter Property="Background" Value="Black" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Grid.Resources> 
```

# c# - 如何使用asp文本框的按键事件传递值？

> ID：13066615
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:29:14.093
> 
> 标签：c#, asp.net, textbox, eval, request.querystring

嗨，我正在编写 asp 文本框控件。我希望我使用按键事件传递 id。下面的代码我正在使用，但我得到错误。

服务器标签的格式不正确。

.aspx 页面

```
<asp:TextBox ID="tbxId" runat="server" Text='<%# Eval("ID") %>' Enabled="false">

<asp:TextBox ID="tbxValue" onkeyup="LoadAttributeValueLong("<%# Eval("ID") %>")" runat="server" 
 MaxLength="40" Text='<%# Eval("VALUE") %>'></asp:TextBox> 
```

如果有人有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:36:25.603

绑定表达式不能从属性值的中间开始。你需要这样写：

```
<asp:TextBox onkeyup='<%# "LoadAttributeValueLong(" + Eval("ID") + ")" %>' 
```

还要传递 tbxId 文本框的值：

```
<asp:TextBox onkeyup='<%# "LoadAttributeValueLong(" + Eval("ID") + ",\"" + tbxId.ClientID + "\")" %>' 
```

在你的 js 函数中：

```
LoadAttributeValueLong(id, tbxId)
{
   var tbxIdValue = $('#' + tbxId).val(); // jquery version
   var tbxIdValue = document.getElementById(tbxId).value; // non jquery version
} 
```

# ios - 带有 iOS5 和 iOS6 的 Facebook

> ID：13066619
> 
> 赞同：2
> 
> 时间：2012-10-25T10:29:46.360
> 
> 标签：ios, facebook, ios5

我即将发布一个应用程序，它必须同时支持 iOS5 和 iOS6。但是对于新的 Facebook SDK 3.1，我不太确定如何将 Facebook 功能集成到两个 iOS 版本中。

使登录和墙发布操作在 iOS5 和 iOS6 版本中工作的最佳方法是什么？是否已经有任何最佳实践？

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:32:02.090

最新的 Facebook SDK 也支持这两个 iOS 版本。如果您使用的是 iOS6，它将使用内置身份验证，否则它将自动回退到旧的“快速应用程序切换”或 Safari 模型。

所以如果你[实现了 3.1 SDK](http://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)，你就不用担心用户如何认证了：

> 升级的主要目的是带来与 iOS v6.0 的兼容性及其原生 Facebook 支持。使用 SDK 的 v3.1 意味着您的应用程序可以在该支持可用时极大地受益，但它们会自动回退到在旧版本的操作系统上使用以前的应用程序切换或基于 Web 的身份验证流程。

更多关于在 iOS 6 上实现对内置 Facebook 帐户的支持：http: [//developers.facebook.com/docs/howtos/ios-6/](http://developers.facebook.com/docs/howtos/ios-6/)

# matlab - 置换排列

> ID：13066624
> 
> 赞同：2
> 
> 时间：2012-10-25T10:30:08.020
> 
> 标签：matlab, for-loop, permutation, replace

我想通过替换 MATLAB 中的一组 n 个元素（从 0 到 n-1 的数字）中选择的 d 个元素来获得所有排列。我注意到在 MATLAB Central 上可以使用 npermutek 方法，但我想尝试另一种实现。

我的想法是使 d 循环，一个在另一个循环中，每个循环都将索引从 0 更改为 n-1：即，d 递归一行（从 0 到 n-1）。但是，n 和 d 应该是我的代码的参数，所以我不能实现我的想法 d for loops one inside other ...或者我可以吗？你有什么建议吗？

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:39:31.700

我建议您`combn`在[File Exchange](http://www.mathworks.com/matlabcentral/fileexchange/7147)上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T21:20:12.170

我使用[组合器](http://www.mathworks.com/matlabcentral/fileexchange/24325-combinator-combinations-and-permutations)。也许有人应该运行一个基准来看看哪个实现是最好的。

# java - jdoDetachedState 设置为 null 的查询实体

> ID：13066631
> 
> 赞同：0
> 
> 时间：2012-10-25T10:30:31.947
> 
> 标签：java, jpa, datanucleus

当我使用 JPA 在 Google App Engine 中查询实体时，一个名为的字段`jdoDetachedState`会自动添加到我的对象中。我读到它与 JPA 对象生命周期有关。例如：

```
{"id":216001,"m_Name":"x","jdoDetachedState":[{"key":216001,"targetClassName":"util.Profile","hashCode":1061531169,"keyAsObject":null},null,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[]]} 
```

问题是，在反序列化（使用 GSON）实体并访问 getName() 之后，我得到：

```
Caused by: java.lang.ClassCastException: java.util.ArrayList at util.Profile.jdoGetm_Name 
```

jdoGetX 是自动添加到我的对象中的另一件事。

我设法通过添加来修复它：

```
@Transient   
protected Object[] jdoDetachedState; 
```

到我的实体并将其设置为空。

我的问题是我是否可以首先查询将 Detached State 设置为 null 的实体，以防我在状态生命周期中没有任何目的。

我试过了：

```
EMF.get().createEntityManager().deatch(profile); 
```

但它没有用。

# soap - 调用 Microsoft Dynamics CRM 2011 sdk IOrganizationServiceProxy Web 服务时出现 SOAP 安全协商错误

> ID：13066632
> 
> 赞同：1
> 
> 时间：2012-10-25T10:30:35.423
> 
> 标签：soap, dynamics-crm-2011

我们公司有一台虚拟机，其中安装了 sqlserver 和 crm 2011，我们用它来测试我们的代码，我编写了一个简单的 web 服务来调用 sdk IOrganizationServieProxy webservice。在这台虚拟机上，我的代码可以完美运行，没有错误。但情况是这样的：我们有另外两台虚拟机，其中一台安装了 sql server，另一台安装并配置了 crm。crm 工作正常，但是当我尝试使用调用 crm sdk IOrganizationServieProxy webservice webmethods 的 web 服务时，出现以下错误，任何想法可能有什么问题？提前感谢任何回答这个问题的人。

```
 System.ServiceModel.Security.SecurityNegotiationException: SOAP security negotiation with &#39;http://localhost/KN/XRMServices/2011/Organization.svc&#39; for target &#39;http://localhost/KN/XRMServices/2011/Organization.svc&#39; failed. See inner exception for more details. ---> System.ComponentModel.Win32Exception: The Security Support Provider Interface (SSPI) negotiation failed.
   at System.ServiceModel.Security.WindowsSspiNegotiation.GetOutgoingBlob(Byte[] incomingBlob, ChannelBinding channelbinding, ExtendedProtectionPolicy protectionPolicy)
   at System.ServiceModel.Security.SspiNegotiationTokenProvider.GetNextOutgoingMessageBody(Message incomingMessage, SspiNegotiationTokenProviderState sspiState)
   at System.ServiceModel.Security.IssuanceTokenProviderBase`1.GetNextOutgoingMessage(Message incomingMessage, T negotiationState)
   at System.ServiceModel.Security.IssuanceTokenProviderBase`1.DoNegotiation(TimeSpan timeout)
   --- End of inner exception stack trace ---

Server stack trace: 
   at System.ServiceModel.Security.IssuanceTokenProviderBase`1.DoNegotiation(TimeSpan timeout)
   at System.ServiceModel.Security.SspiNegotiationTokenProvider.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Security.SymmetricSecurityProtocol.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.SecurityChannelFactory`1.ClientSecurityChannel`1.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
   at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Microsoft.Xrm.Sdk.IOrganizationService.RetrieveMultiple(QueryBase query)
   at Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.RetrieveMultipleCore(QueryBase query)
   at KNCRMSearchWebService.searchContactsByNameAndFamilyName(String cl, String Name, String Family) 
```

这是来自我的visualstudio调试模式的图像，显​​示了错误：

![在此处输入图像描述](../Images/60c6dd1a9127c6f43f19dfd36fd2eb5f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:46:01.810

它可能不适用，但是当我使用的 URL 与 CRM 部署管理器中设置的 WCF 绑定不匹配时，我遇到了问题。

例如，名为“MyCRMServer”的服务器可能正在侦听端口 80：

```
http://MyCrmServer/ 
```

...但是如果我在 Deployment Manager 中将 CRM 服务器更改为 url “crm.myCompany.com”，那么我必须使用此 URL 来访问 Web 服务：

```
http://crm.myCompany.com/ 
```

# xml - 将数据从 XML 加载到 sencha touch 2 中的表单中的选择字段

> ID：13066637
> 
> 赞同：0
> 
> 时间：2012-10-25T10:30:53.497
> 
> 标签：xml, model-view-controller, combobox, sencha-touch-2, store

> 我想将 XML 文件中的数据填充到 sencha 2 中的表单中的选择字段中。如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:26:12.243

我会说 [Ext.data.reader.Xml](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.reader.Xml)的组合，用于将 xml 数据放入商店，然后将您的选择字段设置为：

```
{
    xtype: 'selectfield',

    placeHolder: 'No options',   //what to display when store is empty

    store: MyStore,              //name of the store instance

    valueField:'assessorId',     //field in the store record that you want as
                                 //the 'value' of the item

    displayField:'assessorName', //field in the store record that will be 
                                 //displayed as text in the select item
} 
```

希望这对您有所帮助！

# ruby - 用于提取键值的 Ruby 正则表达式

> ID：13066639
> 
> 赞同：2
> 
> 时间：2012-10-25T10:31:01.167
> 
> 标签：ruby, regex

我有如下字符串

```
case1:
str = "type=\"text/xsl\" href=\"http://skdjf.sdjhshf/CDA0000=.xsl\""
case2:
str = "href=\"http://skdjf.sdjhshf/CDA0000=.xsl\" type=\"text/xsl\"" 
```

我需要提取像

```
 type -> text/xsl
 href -> http://skdjf.sdjhshf/CDA0000=.xsl 
```

这是我失败的正则表达式。

```
 str.match(/type="(.*)"/)[1]
 #this works in second case
 =>"text/xsl"

 str.match(/http="(.*)"/)[1]
 #this works in first case
 =>"http://skdjf.sdjhshf/CDA0000=.xsl" 
```

在失败的情况下，整个字符串都是匹配的。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:46:17.440

同意约翰·沃茨的评论。使用 nokogiri 之类的东西来解析 XML - 轻而易举。如果您仍然想坚持使用正则表达式解析，您可以执行以下操作：

```
str.split(' ').map{ |part| part.match( /(.+)="(.+)"/ )[1..2] } 
```

你会得到如下结果：

```
> str = "type=\"text/xsl\" href=\"http://skdjf.sdjhshf/CDA0000=.xsl\""
 => "type=\"text/xsl\" href=\"http://skdjf.sdjhshf/CDA0000=.xsl\"" 

> str2 = "href=\"http://skdjf.sdjhshf/CDA0000=.xsl\" type=\"text/xsl\""
 => "href=\"http://skdjf.sdjhshf/CDA0000=.xsl\" type=\"text/xsl\"" 

> str.split(' ').map{ |part| part.match( /(.+)="(.+)"/ )[1..2] }
 => [["type", "text/xsl"], ["href", "http://skdjf.sdjhshf/CDA0000=.xsl"]] 

> str2.split(' ').map{ |part| part.match( /(.+)="(.+)"/ )[1..2] }
 => [["href", "http://skdjf.sdjhshf/CDA0000=.xsl"], ["type", "text/xsl"]] 
```

你可以把它放在一个散列或任何你想要的地方。

使用 nokogiri，您可以获取一个节点，然后`node['href']`在您的情况下执行类似的操作。大概容易多了。

# java - Android 对话框和内存

> ID：13066641
> 
> 赞同：2
> 
> 时间：2012-10-25T10:31:03.000
> 
> 标签：java, android, android-dialog, android-memory

情况1：

```
public class NewEntryActivity 
{

  public void onCreate(Bundle savedInstanceState)
    {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.xxxx);

    //my_button_1 
        my_button_1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            final Dialog dialog = new Dialog(NewEntryActivity.this);

              dialog.setContentView(R.layout.abcabc);

              dialog.show(); 

              // On click of OK button in this dialog it will DISMISS the dialog. ( NOT remove )

            }
            }

    //my_button_2
        my_button_2.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            final Dialog dialog = new Dialog(NewEntryActivity.this);

              dialog.setContentView(R.layout.xyzxyz);

              dialog.show(); 

              // On click of OK button in this dialog it will DISMISS the dialog. ( NOT remove )

            }

            }

    }
} 
```

案例二：

```
public class NewEntryActivity 
{

  public void onCreate(Bundle savedInstanceState)
    {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.xxxx);

        final Dialog dialog1 = new Dialog(NewEntryActivity.this);
        final Dialog dialog2 = new Dialog(NewEntryActivity.this);

        dialog1.setContentView(R.layout.abcabc);
        dialog2.setContentView(R.layout.xyzxyz);

        //my_button_1 
        my_button_1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

              dialog1.show(); 

            }
            }

    }

} 
```

在 CASE 2 中，我已经在其中设置了内容视图的对话框。只需单击按钮即可显示/关闭。

所以我的问题是，第一种情况会释放一些内存，还是会产生相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:37:44.247

它仅取决于您的应用程序消耗了多少内存，特别是在此活动中，但案例 1 似乎不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:40:08.927

Android 的进程和内存管理有点不寻常。与 Java 和 .NET 一样，Android 使用自己的运行时和虚拟机来管理应用程序内存。与这些框架中的任何一个不同，Android 运行时还管理进程生命周期。Android 通过在必要时停止和终止进程来为更高优先级的应用程序释放资源来确保应用程序的响应能力。

每个 Android 应用程序都在其自己的 Dalvik 实例内的单独进程中运行，将所有内存和进程管理责任交给 Android 运行时，它会根据需要停止和终止进程以管理资源。

Dalvik 和 Android 运行时位于 Linux 内核之上，该内核处理低级硬件交互，包括驱动程序和内存管理，而一组 API 提供对所有底层服务、特性和硬件的访问。

Dalvik 虚拟机 Dalvik 是一个基于寄存器的虚拟机，经过优化以确保设备可以高效地运行多个实例。它依赖于 Linux 内核进行线程和低级内存管理。

这个[线程](https://stackoverflow.com/questions/2131947/android-memory-allocation)肯定会帮助您清除有关 android 内存管理的概念。
[这](http://mobworld.wordpress.com/2010/07/05/memory-management-in-android/) 是另一个链接，可以了解更多关于 android 内存分配的信息。
祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:40:34.830

每当您在该内存占用创建对象时。案例1好

对象的数量会随着它们的创建而增加，然后随着垃圾收集器的运行而减少。

如果即使使用垃圾回收，对象的数量也继续增加，那么您可能存在内存泄漏。“hprof”堆转储（何时可以通过单击 DDMS 中的按钮触发）可以帮助确定原因。

在这里，您的问题本身就是答案，在 case2 中，对话框中已经设置了内容视图。只需单击按钮即可显示/关闭。这意味着内存已经被占用。

案例1很好。

# javascript - android 2.3 的滚动条除了 iscroll4

> ID：13066642
> 
> 赞同：1
> 
> 时间：2012-10-25T10:31:03.123
> 
> 标签：javascript, android, cordova

我为我的 android 2.3/cordova 应用程序开发尝试了 iscroll4 插件。但是由于我无法通过使用以下方法在javascript中动态获取滚动条位置（位置）：

```
document.getElementById("home").scrollTop = scroll_val; 
```

，对我没用。如果有人可以建议任何其他插件在 android 2.3 中滚动，我可以通过 javascript/jquery 获取/设置滚动条位置。基本上，在我的应用程序中，我有一个静态页眉和页脚，并且当可用空间超过时，将滚动其间的内容（div）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T21:33:50.453

我在 Phonegap 和 android 2.3 中的一个项目中使用了 Overthrow ( [https://github.com/filamentgroup/Overthrow/](https://github.com/filamentgroup/Overthrow/) )。性能不是最好的，但可以工作......希望这对某人有所帮助。

# c# - 解析 XML 并用元素值填充字符串

> ID：13066646
> 
> 赞同：1
> 
> 时间：2012-10-25T10:31:12.273
> 
> 标签：c#, wpf, xml, web-services, properties

我正在 WPF 中测试数据绑定和调用 Web 服务。我正在使用返回以下 XML 的 Web 服务：

```
<?xml version="1.0" encoding="UTF-8"?>
<string xmlns="http://www.webserviceX.NET">
    <NewDataSet> 
         <Table> 
            <AtomicWeight>4.0026</AtomicWeight> 
         </Table> 
    </NewDataSet>
</string> 
```

我正在尝试获取原子权重并将该字符串分配给一个名为 LookupOutput 的属性。

我已经关注了 XPath 教程和 LINQ 教程，但找不到一个对于这个示例来说足够简化的教程。从字符串中的 XML 获取单个元素的最简洁方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:34:51.287

```
string xml = @"<string xmlns=""http://www.webserviceX.NET"">
    <NewDataSet> <Table> <AtomicWeight>196.967</AtomicWeight> </Table> </NewDataSet>
    </string>";

var xDoc = XDocument.Parse(xmlstr); //or XDocument.Load(filename)
XNamespace ns = "http://www.webserviceX.NET";
string atomicWeight = xDoc.Descendants(ns + "AtomicWeight").First().Value; 
```

# linux - linux shell在变量中留下空格

> ID：13066648
> 
> 赞同：0
> 
> 时间：2012-10-25T10:31:20.513
> 
> 标签：linux, shell

我有一个 shell 脚本，它应该创建一个文件并在上面填充两行（为了简单起见）。

```
echo -e "#-*- coding: utf-8 -*-
    var1 = ''" > file1.py 
```

这确实有效，但是当我尝试将 file1.py 内容放入变量时，它会缩短空格并仅保留一个空格。

```
content="#-*- coding: utf-8 -*-
    var1 = ''"
echo -e $content > file1.py 
```

：（ 请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:33:04.137

在执行之前，命令被解析为：

```
echo -e this is what is inside the content variable > file1.py 
```

因此你只需要再次引用它：

```
echo -e "$content" > file1.py 
```

这导致：

```
echo -e "this is what is inside the content variable" > file1.py 
```

# .htaccess - RewriteRule 多语言网站

> ID：13066650
> 
> 赞同：1
> 
> 时间：2012-10-25T10:31:33.910
> 
> 标签：.htaccess, mod-rewrite

在我的服务器上的子域中拥有多种语言的站点，例如 de.mydomain.com、fr.mydomain.com。在这些 de,fr 子目录中，我只放置了带有以下代码的 htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.de\.mydomain\.com$
RewriteRule ^(.*)$ "http://www.mydomain.com/$1?lan=2%1" [L] 
```

它有效，但不是我想要的。它只是从 de.mydomain.com 重定向到 mydomain.com，浏览器中的 url 正在更改，我希望 url 保持不变：de.mydomain.com 但内容取自 mydomain.com?lan=2。 （我使用 lan 变量来改变 lang）

我在这里做错了什么？也许我对这个问题的一般方法是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:28:23.860

**编辑 ：**

您需要将 de subdomain 指向根目录，然后将这些行添加到根 htaccess 文件中：

```
RewriteCond %{HTTP_HOST} ^(www\.)?de\.mydomain\.com$
RewriteRule ^(.*)$ /$1?lan=2 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:49:27.923

**将此规则放在您的规则之前：**

```
RewriteRule !^(fr|en)/ /en%{REQUEST_URI} [L,R=301] 
```

[.htaccess 重写到默认语言文件夹？](https://stackoverflow.com/questions/1689283/htaccess-rewrite-to-default-language-folder)

# forms - 带有警报消息且无需页面刷新/加载的简单联系表单

> ID：13066654
> 
> 赞同：1
> 
> 时间：2012-10-25T10:31:42.580
> 
> 标签：forms, alert, contact, contact-form

有人能告诉我如何制作一个简单的联系表格，只需一个编辑表格（我们称之为“名称”）就可以向 demo@mysite.com 发送电子邮件，然后验证表格是否有至少 10 个字符发送电子邮件和一个警告框显示“电子邮件发送！谢谢”？

谢谢！

# c# - 地铁中的自定义画布绘图代码

> ID：13066659
> 
> 赞同：1
> 
> 时间：2012-10-25T10:31:56.217
> 
> 标签：c#, windows-8, microsoft-metro

在传统的桌面应用程序中，我执行我的自定义画布绘图如下

```
class ChartingView : System.Windows.Controls.Canvas
{
    protected override void OnRender(DrawingContext drawingContext)
    {
        // ... All the juicy drawing code right here.
    }
} 
```

但是，在地铁呢？如中`Windows.UI.Xaml.Controls.Canvas`，我找不到`OnRender`我可以覆盖的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:35:03.400

您可以使用[Children](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.children.aspx)属性来填充`Canvas`. 您可以在那里放置基元（形状、线条等）以及“复杂”控件。正如@Aaron Murgatroyd 评论中所述：

> 没有办法简单地逐帧在画布上绘制

要调整它们，`Canvas`您应该使用`Canvas.SetXYZ`方法（例如参见[Canvas.SetLeft](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.setleft.aspx)和[Canvas.SetTop](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.settop.aspx)方法）。

# c++ - 简而言之，GCC 选项 -fipa-pta 有什么作用？

> ID：13066663
> 
> 赞同：7
> 
> 时间：2012-10-25T10:32:08.427
> 
> 标签：c++, gcc, compiler-optimization

根据 GCC 手册，`-fipa-pta`优化会：

> `-fipa-pta`：执行过程间指针分析和过程间修改和引用分析。此选项可能会导致在大型编译单元上使用过多的内存和编译时。在任何优化级别默认情况下都不会启用它。

我假设 GCC 试图根据过程中使用的指针和引用来区分可变和不可变数据。有更深入的 GCC 知识的人可以解释什么`-fipa-pta`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T19:46:31.783

我认为“程序间”这个词是这里的关键。

我对 gcc 的优化器不是很熟悉，但我之前一直致力于优化编译器。以下内容有些推测；与一小粒盐一起服用，或与了解 gcc 内部结构的人确认。

优化编译器通常仅在每个单独的函数（或子例程或过程，取决于语言）内执行分析和优化。例如，给定这样的人为示例的代码：

```
double *ptr = ...;

void foo(void) {
    ...
    *ptr = 123.456;
    some_other_function();
    printf("*ptr = %f\n", *ptr);
} 
```

优化器将无法确定 的值是否`*ptr`已被调用更改`some_other_function()`。

如果启用了*过程间*分析，那么优化器可以分析 的行为`some_other_function()`，并且它可能能够证明它不能修改`*ptr`。鉴于这样的分析，它可以确定表达式`*ptr`仍然必须计算为`123.456`，并且原则上它甚至可以用 替换`printf`调用`puts("ptr = 123.456");`。

（事实上​​，使用与上述代码片段类似的小程序，我得到了与`-O3`and相同的生成代码`-O3 -fipa-pta`，所以我可能遗漏了一些东西。）

由于一个典型的程序包含大量的函数，以及*大量*可能的调用序列，这种分析可能非常昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-30T12:30:28.287

[正如这篇文章](https://kristerw.blogspot.com/2017/06/fipa-pta.html)所引用的：

“-fipa-pta”优化在分析时会考虑被调用函数的主体，因此编译

```
void __attribute__((noinline))
bar(int *x, int *y)
{
  *x = *y;
}

int foo(void)
{
  int a, b = 5;
  bar(&a, &b);
  return b + 10;
} 
```

with -fipa-pta 使编译器看到 bar 没有修改 b，编译器通过将 b+10 更改为 15 来优化 foo

```
int foo(void)
{
  int a, b = 5;
  bar(&a, &b);
  return 15;
} 
```

一个更相关的例子是“<a href="https://kristerw.blogspot.se/2017/05/integer-division-is-slow.html" rel="nofollow noreferrer">Integer 中的“慢”代码分工很慢”博客文章

```
std::random_device entropySource;
std::mt19937 randGenerator(entropySource());
std::uniform_int_distribution<int> theIntDist(0, 99);

for (int i = 0; i < 1000000000; i++) {
  volatile auto r = theIntDist(randGenerator);
} 
```

用 -fipa-pta 编译它可以让编译器看到 intDist 在循环中没有被修改，因此内联代码可以像“快速”版本一样被常量折叠——结果它的运行速度快了四倍.

# java - 中断石英集群中的工作

> ID：13066666
> 
> 赞同：9
> 
> 时间：2012-10-25T10:32:33.843
> 
> 标签：java, cluster-computing, quartz-scheduler

我有一个带有多个实例的 Quartz 设置，我想在执行的任何地方中断作业。正如文档中所说，[`Scheduler.interrupt()`](http://quartz-scheduler.org/api/2.1.5/org/quartz/Scheduler.html#interrupt%28org.quartz.JobKey%29)方法不是集群感知的，所以我正在寻找一些常见的做法来克服这种限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:00:17.420

好吧，这里有一些你应该用来实现这一目标的基础知识。

在集群模式下运行时，有关当前正在运行的作业的信息在石英表中可用。例如，`q_fired_triggers`包含正在执行的作业。该表的第一列是负责它的调度程序名称。所以很容易知道谁在做什么。

然后，如果您启用石英实例的 JMX 导出，`org.quartz.scheduler.jmx.export`您将启用新的入口点来单独远程管理每个调度程序的 MBean。MBean 提供了一个方法`boolean interruptJob("JobName", "JobGroup")`

然后你“*只是*”需要在适当的调度程序实例上调用这个方法来有效地中断它。

我手动尝试了所有过程，它工作正常，只需要自动化:)

HIH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-14T14:01:26.400

你说的对。在集群模式下`Scheduler.interrupt()`不起作用。假设作业触发器由节点中的调度程序触发，但此 API 在另一个节点中调用。

为了克服这个问题，您可以使用带有发布/订阅模型的消息代理方法（例如 JMS、RabbitMQ 等）。客户端不调用`Scheduler.interrupt()`，而是向消息代理发送此中断的消息，消息的有效负载包括作业详细信息的身份，即`JobKey`调度程序的名称（（如果一个节点中使用多个调度程序）。然后，消息被所有运行 Quartz 实例的节点使用，节点通过名称找到 Quartz 调度程序，然后`Scheduler.interrupt()`使用从消息有效负载中获取的作业详细信息的身份执行找到的调度程序。

# c++ - 未来转换的模式

> ID：13066667
> 
> 赞同：0
> 
> 时间：2012-10-25T10:32:37.433
> 
> 标签：c++, boost, boost-thread

目前我们正在大量使用异步值。假设我有一个执行以下操作的函数：

```
int do_something(const boost::posix_time::time_duration& sleep_time)
{
    BOOST_MESSAGE("Sleeping a bit");
    boost::this_thread::sleep(sleep_time);
    BOOST_MESSAGE("Finished taking a nap");

    return 42;
} 
```

在代码中的某个时刻，我们创建了一个任务，它为这样的 int 值创建了一个未来，该值将由 packaged_task 设置 - 像这样（worker_queue 是一个 boost::asio::io_service 在这个例子中）：

```
boost::unique_future<int> createAsynchronousValue(const boost::posix_time::seconds& sleep)
{
    boost::shared_ptr< boost::packaged_task<int> > task(
        new boost::packaged_task<int>(boost::bind(do_something, sleep)));
    boost::unique_future<int> ret = task->get_future();

    // Trigger execution
    working_queue.post(boost::bind(&boost::packaged_task<int>::operator (), task));

    return boost::move(ret);
} 
```

在代码的另一点，我想包装这个函数以返回一些更高级别的对象，这也应该是一个未来。我需要一个转换函数，它接受第一个值并将其转换为另一个值（在我们的实际代码中，我们有一些分层并执行异步 RPC，它将期货返回到响应 - 这些响应应该转换为期货到真实对象、POD 甚至 void未来能够等待它或捕获异常）。所以这是本例中的转换函数：

```
float converter(boost::shared_future<int> value)
{
    BOOST_MESSAGE("Converting value " << value.get());
    return 1.0f * value.get();
} 
```

然后我想创建一个懒惰的未来，如 Boost 文档中所述，仅在需要时进行此转换：

```
void invoke_lazy_task(boost::packaged_task<float>& task)
{
    try
    {
        task();
    }
    catch(boost::task_already_started&)
    {}
} 
```

然后我有一个函数（可能是更高级别的 API）来创建一个包装好的未来：

```
boost::unique_future<float> createWrappedFuture(const boost::posix_time::seconds& sleep)
{
    boost::shared_future<int> int_future(createAsynchronousValue(sleep));
    BOOST_MESSAGE("Creating converter task");
    boost::packaged_task<float> wrapper(boost::bind(converter, int_future));

    BOOST_MESSAGE("Setting wait callback");
    wrapper.set_wait_callback(invoke_lazy_task);

    BOOST_MESSAGE("Creating future to converter task");
    boost::unique_future<float> future = wrapper.get_future();

    BOOST_MESSAGE("Returning the future");
    return boost::move(future);
} 
```

最后，我希望能够像这样使用它：

```
{    
    boost::unique_future<float> future = createWrappedFuture(boost::posix_time::seconds(1));
    BOOST_MESSAGE("Waiting for the future");
    future.wait();
    BOOST_CHECK_EQUAL(future.get(), 42.0f);
} 
```

但是在这里，我最终得到了一个关于违背诺言的例外。原因对我来说似乎很清楚，因为进行转换的 packaged_task 超出了范围。

所以我的问题是：我该如何处理这种情况。如何防止任务被破坏？有这种模式吗？

最好的，

罗尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:34:19.630

您需要正确管理任务对象的生命周期。

最正确的方法是 return`boost::packaged_task<float>`而不是`boost::unique_future<float>`from `createWrappedFuture()`。调用者将负责获取未来对象并延长任务生命周期，直到未来值准备好。

或者您可以像在`createAsynchronousValue`. 但在这种情况下，您将需要明确管理任务生命周期并在完成后将其从队列中删除。所以不要认为这个解决方案对返回任务对象本身有好处。

# android - 提交并应用不更改 sharedPrefs

> ID：13066670
> 
> 赞同：0
> 
> 时间：2012-10-25T10:32:48.207
> 
> 标签：android, commit

这是我的arrayValues（的一部分）：

```
<string-array name="securityValues">
<item name="wep">"capabilities LIKE '%WEP%'"</item>
<item name="wpa">"capabilities LIKE '%WPA%'"</item>
<item name="free">"capabilities NOT LIKE '%WPA%' AND capabilities NOT LIKE '%WEP%' AND capabilities NOT LIKE '%WPS%'"</item>
<item name="all">"1"</item> 
```

这是我的preferences.xml的一部分

```
 <ListPreference 
    android:key="visualizzazione_marker_security"
    android:title="Sicurezza Wifi da visualizzare"
    android:summary="Scegli con quale protocollo di sicurezza vuoi che siano visualizzate le wifi"
    android:entries="@array/security"
    android:entryValues="@array/securityValues"

/> 
```

最后是我的代码：

```
 @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(Menu.NONE, 0, 0, "Only free wifi");
    menu.add(Menu.NONE, 1, 1, "All wifi");
    return super.onCreateOptionsMenu(menu);
  }

switch (item.getItemId()) {
    case 0:

        Editor edit = PreferenceManager.getDefaultSharedPreferences(this).edit();
        edit.putString("visualizzazione_marker_security","capabilities NOT LIKE \'%WPA%\' AND capabilities NOT LIKE \'%WEP%\' AND capabilities NOT LIKE \'%WPS%\'").apply();
        edit.commit();
        Toast.makeText(this, "Wait 30 seconds please", Toast.LENGTH_LONG).show();
        case 1:
            Editor edit1 = PreferenceManager.getDefaultSharedPreferences(this).edit();
        edit1.putString("visualizzazione_marker_security","1").apply();
        edit1.commit();
        Toast.makeText(this, "Wait 30 seconds please", Toast.LENGTH_LONG).show();
        return true;
} 
```

为什么case0不应用修改？首选项中的值始终更改为 1！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:39:51.980

您的案例块中缺少一条`break;`语句。所以案例 0 被案例 1 覆盖。

```
switch (item.getItemId()) {
    case 0:
        Editor edit = PreferenceManager.getDefaultSharedPreferences(this).edit();
        edit.putString("visualizzazione_marker_security","capabilities NOT LIKE \'%WPA%\' AND capabilities NOT LIKE \'%WEP%\' AND capabilities NOT LIKE \'%WPS%\'").apply();
        edit.commit();
        Toast.makeText(this, "Wait 30 seconds please", Toast.LENGTH_LONG).show();
        break;

    case 1:
        Editor edit1 = PreferenceManager.getDefaultSharedPreferences(this).edit();
        edit1.putString("visualizzazione_marker_security","1").apply();
        edit1.commit();
        Toast.makeText(this, "Wait 30 seconds please", Toast.LENGTH_LONG).show();
        return true;
} 
```

# c# - 使用 SpecFlow 或任何其他框架测试用户交互的所有可能排列

> ID：13066678
> 
> 赞同：1
> 
> 时间：2012-10-25T10:33:23.670
> 
> 标签：c#, .net, tdd, bdd, specflow

我的设置如下：

*   使用 MVVM 模式编写 WPF 客户端
*   一组单元测试
*   一组 SpecFlow 场景

在创建 SpecFlow 场景时，我首先绘制了一个状态机图，以查看用户交互的所有可能排列以及从一种状态到另一种状态的需求。然后我创建一个所有可能场景的列表。

例如：

*   用户按是 -> 上传文档 -> 删除文档 -> 点击提交
*   用户按是 -> 上传文档 -> 点击提交
*   用户按下是 -> 点击提交

这可以确保我们测试所有可能的场景并且不会错过任何场景。然而，这是一个乏味的过程，如果需求发生变化，它就会变得很成问题。

我想知道是否有一个框架可以从您的状态机创建您的场景，因此如果从状态机中删除该步骤，它会自动重新创建您的场景。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T15:49:54.133

BDD 场景工具通常旨在启用、捕获和自动化开发团队和业务利益相关者之间的对话。你正在做的是测试。

我建议不要使用 BDD 工具，而是编写自己的工具，或者在“测试框架”下而不是在 BDD 和 SpecFlow 标签下寻找其他人的工作。

BDD 不适用于详尽的测试。相反，它最适用于说明应用程序行为的一些场景。这有助于开发人员确保他们了解业务问题，并表明他们的代码支持解决方案。

If you use a BDD tool for this, you'll start finding that the scenarios you create are really hard to maintain. English can't be refactored in the same way as code. Your state machine may even be better off under unit test (or a lower-level BDD tool - [I just use NUnit](http://code.google.com/p/wipflash/source/browse/Example.PetShop.Behavior/Basket/BasketViewModelBehavior.cs)).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T01:03:53.143

If you are really into generating test cases from a state machine, I'd suggest that you have a look into "Model Based Testing" tools.

In the .NET world, spec explorer allow you to do that: [SpecExplorer 2010](http://visualstudiogallery.msdn.microsoft.com/271d0904-f178-4ce9-956b-d9bfa4902745/)

# java - 对少数实体进行审计的更好方法

> ID：13066679
> 
> 赞同：1
> 
> 时间：2012-10-25T10:33:26.070
> 
> 标签：java, audit, hibernate-envers

我有一个具有以下结构的休眠实体：

```
@Entity
public class A
{
  private Integer id;
  private String name;
  @OneToMany
  private List<B> bList;
}

@Entity
public class B
{
  private Integer id;
  @OneToMany
  private List<C> cList;
} 
```

现在我想维护实体“A”的历史记录，信息如下：

```
historyDate | fieldsChanged | updatedBy | createdBy 
```

在`fieldsChanged`列中，我想要实体 A 的列的名称以及实体**B 或 C**中是否应用了任何更改。

现在我用谷歌搜索并找到以下几种方法来实现这些：

1.  数据库上的写入器触发器
2.  自己的Java逻辑来维护历史表
3.  使用休眠环境

现在我不确定从上面或其他任何东西应该是更好的方法。

任何建议将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:13:31.217

Envers 使用不同的审计方案 - 为每次更改存储实体的全部内容。答案真的取决于你需要什么。

1.  如果直接从各种系统访问数据库，使用各种语言编写，那么它是正确的选择。
2.  如果您需要具有您所写的结构，则最好
3.  为您提供审核，但格式不同。

# asp.net - 当步进面板太宽时，ASP.NET 向导的侧边栏会缩小

> ID：13066683
> 
> 赞同：2
> 
> 时间：2012-10-25T10:33:39.803
> 
> 标签：asp.net, wizard, sidebar

我正在使用 ASP.NET 向导控件来显示一个带有 Gridview 的向导，该 Gridview 显示每个步骤的内容。

在 Gridview 中，有几列使用 Textboxes 来显示内容。当 Textbox 中的内容变长时，step panel 变宽并使 Sidebar 缩小。

我已将边栏 ( `SideBarStyle-Width`) 和步骤面板 ( `StepStyle-Width`) 设置为使用固定宽度（百分比），但边栏一直在缩小。

我还得到了 Gridview 中列的宽度（`ControlStyle-Width`, `ItemStyle-Width`）以百分比固定，但这也不起作用。

唯一可行的是在 Gridview 中使用特定值修复列的宽度`px`，但我必须保持这些列动态调整大小以适应不同的分辨率。

当内容大小发生变化时，有什么方法可以保持侧边栏不变？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-07-03T19:30:20.823

我遇到了同样的问题，但是现在使用以下属性可以正常工作。一定要设置`AutoPostBackOnSelect="true"`。

这是我的网格标题的示例：

```
<ComponentArt:Grid ID="grdProducts" runat="server" AllowMultipleSelect="false" AllowColumnResizing="false" RunningMode="Client" AutoPostBackOnSelect="True" PageSize="10" PagerStyle="Slider"> 
```

# php - 在 Magento 结帐过程后发送请求

> ID：13066687
> 
> 赞同：0
> 
> 时间：2012-10-25T10:33:55.917
> 
> 标签：php, zend-framework, magento, e-commerce, magento-1.7

我有一个由 Magento 提供支持的电子商务网站，但现在我需要在 Magento 和公司的管理软件之间建立连接。

流程应该是这样的：

1.  用户在他的购物车里放了一些东西
2.  用户完成结帐过程
3.  在用户用 Paypal 支付了全部费用后，Magento 应该发送一个 HTTP 请求（可能是 POST，带有订单的数据）到一个外部服务器，该服务器处理请求并处理接收到的数据。

我的问题是我不知道如何在结帐过程后从 Magento 发送带有订单数据的请求。我认为这是使用电子商务的公司的常见情况。你对此有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:48:30.827

您可以使用观察者来获取结帐后事件，并且在您的观察者上，您可以将某种 curl 帖子发送到您的外部服务器。（就像@Prasath Albert 说的）

看看那里做一个观察者： http: [//www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

您正在寻找 checkout_cart_save_after。祝你好运，如果你需要别的东西，请告诉我。

编辑：

使用本教程来做你的观察者[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method) 100% 像这样。创建新模块来做到这一点。

那么你的观察者方法可以是这样的：

```
function observermethod($observer){
    $observer->getEvent->getOrder()->getData();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:45:59.077

您可以使用 CURL 来实现这一点。为了这

1）在外部服务器中添加一个页面来处理来自magento的输入。

2) 编辑 Magento Cart 功能，向外部服务器发送请求。

例如：您可以使用 CURL 发出此请求。

```
 $data = "item=".$item;//input data
   $url="http://External server/handler.php";
   $handle = curl_init($url);
   curl_setopt($handle, CURLOPT_POST, true);
   curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
   curl_exec($handle); 
```

# delphi - 通过 Delphi 在网页上按下按钮

> ID：13066692
> 
> 赞同：2
> 
> 时间：2012-10-25T10:34:23.137
> 
> 标签：delphi, button, twebbrowser

Ex1: [WebBrowser.OleObject.Document.GetElementByID('ID HERE').Click;](https://stackoverflow.com/questions/10593494/programmaticaly-click-on-a-link-in-webbrowser-using-dom-delphi-7)

Ex2：[<输入类型=“提交”值=“登录”>](https://stackoverflow.com/questions/3651054/how-to-find-a-button-with-value-in-html-page-webbrowser-delphi)

上面两个例子是通过 Delphi 在网页上按下按钮的。Ex2 在各种网站上运行良好，但不是全部。这是因为 Ex2 仅适用于 HTML 按钮吗？我尝试了 Ex1，但缺少一些代码，当我尝试时，我收到一条消息，提示“需要对象或类类型”。Ex1 也没有示例代码，任何人都可以告诉我为什么我会收到此消息并为 Ex1 提供一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:42:07.380

我从 delphipages 的[MrBaseball34](http://www.delphipages.com/forum/archive/index.php/t-118008.html)得到这个代码 它最初没有用，因为我写的是 'WebBrowser' 而不是 'WebBrowser1'。但它完美地工作。这是代码：

```
procedure TForm1.Button1Click(Sender: TObject);  
var  
x: integer;  
thelink: OleVariant; 

begin  
thelink:= WebBrowser1.OleObject.Document.all.tags('A');  
if thelink.Length > 0 then  
  begin  
  for x := 0 to thelink.Length-1 do  
    begin  
    if Pos('put id string here', thelink.Item(x).id) > 0 then
      begin  
        thelink.Item(x).click;  
        Break;
      end;
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:24:06.133

通常在使用 TWebBrowser 和 COM/ActiveX 对象时，了解后期绑定和早期绑定之间的区别非常方便。如果您使用 OleVariant 变量，让它们引用“活动”对象，并使用点运算符 ( `.`) 来调用方法和属性，它们会在运行时得到解析。它们是*后期绑定*的，而不是您将使用特定接口的*早期绑定。*

在uses子句中包含unit `MSHTML`，然后use `IHTMLDocument3(WebBrowser1.Document)`，和定义的不同接口`MSHTML`，如`IHTMLElement`and `IHTMLAnchorElement`。您会发现在某种程度上您还可以完成代码，但您可能需要在操作符之类的`IHTMLElement`操作之间进行额外的转换。`IHTMLElement2``as`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:45:25.213

可能有任何类型的错误。就像拼写错误的 ID 或错误的数据类型缺少您希望使用的接口，或者缺少某些项目并返回`nil`。

像长线这样的问题`WebBrowser.OleObject.Document.GetElementByID('ID HERE').Click;`是你很难知道错误发生在哪个地方。有时检查中间值及其属性并不容易。这么长的一行代码中有很多与生俱来的期望，你很难发现哪一个失败了。

当您遇到如此长的行中的错误时，您最好将它们拆分为微小的操作项——古老的*分而治*之原则。声明几个变量并将这条长而复杂的线分成多个简单的线。

```
var0 := WebBrowser;
var1 := var0.OleObject; 
var2 := var1.Document; 
var3 := var2.GetElementByID('ID HERE'); 
var3.Click; 
```

跟踪这一点，一次执行一行，您可以检查在每个遍历步骤中将发出哪些值和数据类型。

# android - Android 特定文件标题

> ID：13066694
> 
> 赞同：0
> 
> 时间：2012-10-25T10:34:28.520
> 
> 标签：android

我遇到了一个问题：我试图将带有西班牙标题的视频文件（即 Puente Hacia **Atrás**）放在 assets 文件夹中，并做一个列表视图来显示我的视频标题。但是当我尝试获取资产时，将其转换为列表并获得列表长度而不是我得到的 0 结果。如果我删除这个特定的西班牙语字符，一切正常（视频标题显示在列表视图中并且可以播放视频）。那么，这样的标题可以由应用程序定义吗？我认为该应用程序以 UTF-8 编码类型工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:54:16.653

资产文件名不支持 Unicode（[请参阅此处的问题](http://code.google.com/p/android/issues/detail?id=11368)）。

我建议您仅使用 ASCII 重命名文件，并将它们的“显示名称”存储在您的`strings.xml`.

更新：

恐怕没有办法进行像 getString(R.string. + filenameVar) 这样的调用。

您可以将文件名与其显示名称匹配的方法是使用 Map：

```
private Map<String, String> aMap = new HashMap<String, String>();
aMap.put("puente_atras.mp4", getString(R.string.puente_atras));
aMap.put("calle_atras.mp4", getString(R.string.calle_atras)); 
```

# iphone - 录制声音时，如何知道声音的来源是内置麦克风还是耳机麦克风？

> ID：13066696
> 
> 赞同：0
> 
> 时间：2012-10-25T10:34:29.270
> 
> 标签：iphone, sdk

odesk 的 iPhone Programming OS 2.1 Test 中有这样一个问题，我在开发者文档中找不到答案。

可能的答案选项：

(a) NSSound 类方法命名为audioSource
错误，类只存在于macos 中，没有audioSource 方法。

(b) AudioQueueGetParameters 函数
错误。有 AudioQueueGetParameter 函数。没有结尾 s。印刷错误？函数在 macOS 和 ios 上都存在。文档不清楚并说：“在 Mac OS X v10.5 中，音频队列有一个可用参数：kAudioQueueParam_Volume，它控制播放增益。” AudioQueue.h 提供了另外 4 个常量，但它们无法帮助我们解决这个问题。

(c) 正在查询注册表
无评论

(d) 通过轮询音频事件
不知道

(e) iPhone OS 2.1 版本不支持录音

什么是正确答案，为什么？

**编辑：**
你知道一个可以在以后的 iOS 版本中使用的答案吗 - 给它。我也不知道答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-17T07:18:44.787

*   我认为答案是“E”：
*   原因：iPhone OS 3.0 :- AVAudioRecorder 提供了第一个用于录制声音的 Objective-C 方法。它提供了一种将声音录制到文件的简单方法，但不允许即时处理声音（为此，仍然需要 AudioQueueNewInput）。
*   参考： http: [//www.cocoawithlove.com/2011/03/history-of-ios-media-apis-iphone-os-20.html](http://www.cocoawithlove.com/2011/03/history-of-ios-media-apis-iphone-os-20.html)

# php - iframe colorbox 联系表单不会提交并且样式在验证后不会保留

> ID：13066704
> 
> 赞同：0
> 
> 时间：2012-10-25T10:35:02.327
> 
> 标签：php, css, forms, validation, colorbox

我正在尝试在从 iframe 调用的颜色框（覆盖整个页面）中创建一个联系表单。除了表单无法提交并且我丢失了 css 样式和验证后的所有内容外，我几乎弄清楚了所有事情。我做错什么了？对你的帮助表示感谢。谢谢！！！

这是我到目前为止的代码：

**联系表格.html**

```
<body>

    <form name="form1" method="post" action="sendmessages.php">    
            <input type="text" name="your_name" class="your-name" id="your-name" placeholder="your name">        
            <input type="text" name="email-address" class="email-address" id="email-address" placeholder="email address">
            <textarea name="comments" class="comments" id="comments" placeholder="type your message here..."></textarea>
            <input type="submit" value="submit" name="submit" class="submit">
    </form> 
```

​colorbox **-k.css**

```
#colorbox, #cboxOverlay, #cboxWrapper{
    position:absolute; 
    top:0; 
    left:0; 
    z-index:9999; 
    overflow:hidden;
    }
#cboxOverlay{
    position:fixed; 
    width:100%; 
    height:100%;
    }
#cboxContent{
    position: relative;
    overflow:hidden;
    }
#cboxLoadedContent{
    overflow:hidden;
    }
#cboxLoadedContent iframe{
    display:block; 
    position:absolute; 
    width:100%; 
    height:100%; 
    border:0;
    }

#cboxOverlay{background:url(../images/overlay.png) repeat 0 0;}
#colorbox{}
#cboxContent{
    position:fixed; 
    width:536; 
    height:409;
    }
#cboxClose{
    display:block; 
    position:absolute; 
    top:0px; 
    left:0px; 
    background:url(../images/close.png) no-repeat 0 0;
    width:31px; 
    height:31px; 
    padding: 0px;
    border: 0px;
    text-indent:-9999px;
    }
body {
    background: url(../images/envelope.png) center no-repeat;
    display: block;
    position: absolute;
    width: 536px;
    height: 409px;
    z-index:12;
    position: relative;
    margin:auto;
}

input[type=text] {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 10px;
    background-color:rgb(255,255,255);
    color: #787474;
    padding-left: 10px;
    width:194px;
    height:24px;
    position: absolute;
    border-color: #000000;
    border-width:2px;
    border-style:solid;
    }

.comments {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 10px;
    background-color:rgb(255,255,255);
    color: #787474;
    padding: 10px 0 0 10px;
    width:414px;
    height:140px;
    border-color: #000000;
    border-width:2px;
    border-style:solid;
    position: absolute;
    top: 150px;
    left: 54px;
}

.your-name {
    position: absolute;
    top: 104px;
    left: 54px;
}

.email-address {
    position: absolute;
    top: 104px;
    left: 272px;
}

.submit {
    width: 70px;
    height: 24px;
    background: url(../images/send-btn.png) center no-repeat;
    position: absolute;
    top: 338px;
    right: 54px;
    padding: 0px;
    border: 0px;
    text-indent:-9999px;
}

.submit:hover{
    background: url(../images/send-btnr.png);
}

.submit:active{
    background: url(../images/send-btn.png);
} 
```

**发送消息.php**

```
 <?php

    // Comments
    $message="$comments";

    // Mail of sender
    $mail_from="$email-address"; 

    // From 
    $header="from: $your-name <$mail_from>";

    // Enter your email address
    $to ='mail@kitistproduction.com';
    $send_contact=mail($to,$subject,$message,$header);

    // Check, if message sent to your email 
    // display message "Thank you!"
// Check, if message sent to your email 
// display message "Thank you!"
if($send_contact){
echo "<p style='background: url(../images/envelope_sent.png)            center no-repeat;
    display:block;
    position:relative;
    top: -6px;
    left: -6px;
    width:536px;
    height:409px;
    z-index:12;
    margin:auto;
    padding:0px;'></p>";
}
else {
echo "ERROR";
}
    ?> 
```

**语法错误**

```
$email-address=$_POST['email-address'];
$your-name=$_POST['your_name'];
$header. = 'Content-type: text/html; charset=iso-8859-1' . "\n";    

$header.="From: " . $your-name <$email-address>."\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:42:38.610

您必须在使用 Post 方法的 sendmessages.php 页面上使用以下代码，因此您必须使用 $_POST 变量获取数据，如下所示：

**更新**

```
$comments=$_POST['comments'];
$email_address=$_POST['email-address'];
$your_name=$_POST['your_name'];

//echo "comments:".$comments."<br>";
//echo "email:".$email_address."<br>";
//echo "name:".$your_name."<br>";
//exit();

// Comments
$message=$comments;

$header='MIME-Version: 1.0'."\n";

$header.='Content-type: text/html; charset=iso-8859-1'."\n";    

$header.="From: " . $your_name."<".$email_address.">"."\n";
$subject="Mail test";
// Enter your email address
$to ='mail@kitistproduction.com';
$send_contact=mail($to,$subject,$message,$header); 
```

# java - 如何使用 webdriver 在鼠标悬停时保持下拉菜单打开

> ID：13066706
> 
> 赞同：3
> 
> 时间：2012-10-25T10:35:02.570
> 
> 标签：java, webdriver, selenium-webdriver

我有以下代码：

```
WebElement we = driver.findElement(By.className("status"));
WebElement we1 = driver.findElement(By.id("7oSL5I7egLSgqmGVYpF_lG6VyY3ZR7SArK6pYZVU3g"));

Actions builder = new Actions(driver);
builder.moveToElement(we).build().perform();
builder.moveToElement(we1).build().perform();
we1.click(); 
```

在这里，我在执行良好的`we`元素上执行鼠标悬停，但我无法保持下拉菜单`we`打开以进一步选择`we1`（复选框）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:44:03.693

一般来说，我希望一个动作链像这样连接在一起：

```
builder.moveToElement(we).moveToElement(we1).click().perform(); 
```

然后，这应该执行链中所有必需的操作，而不会暂停，也不会失去悬停焦点。当然，另一种选择是将其分解为两个不同的操作，如下所示：

```
WebDriverWait wait = new WebDriverWait(driver, 15, 100);

builder.moveToElement(we).perform();
waiting.until(ExpectedConditions.visibiltiyOf(we1));
builder.moveToElement(we1).click().perform(); 
```

显式等待用于确保元素“we1”在尝试悬停并单击它之前可见。

# jquery - 如何加载 javascript 文件列表并在所有文件都被解释后调用回调？

> ID：13066712
> 
> 赞同：1
> 
> 时间：2012-10-25T10:35:21.297
> 
> 标签：jquery, ajax

jQuery 提供了 getScript(file, callback) 函数，它加载一个脚本文件，解释它，然后调用一个 callback() - 函数。

如果在执行回调之前需要加载多个文件，可能会想到这样的解决方案：

```
function loadOrdered(files, callback) {
   $.getScript(files.shift(), files.length
       ? function(){loadOrdered(files, callback);}
       : callback
   );
} 
```

但是，这会强制以非常特定的顺序加载文件，这意味着浏览器必须等待服务器响应才能加载下一个脚本。这可能会导致不必要的延迟。

如何在不强制浏览器顺序加载脚本的情况下达到与上述代码相同的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:40:48.220

这是我建议的解决方案：

```
function loadUnordered(scripts, callback){

var loadCount = scripts.length;

function done(){
    loadCount -=1;
    if (loadCount==0){ 
        callback();
    }
}

for ( var i=0; i<scripts.length; i++){
    $.getScript(scripts[i], done);
}

} 
```

此处发布了类似的解决方案：[在所有 ajax .load() 请求完成后执行函数](https://stackoverflow.com/questions/2502828/jquery-execute-function-after-all-ajax-load-requests-are-finished?rq=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T10:44:53.823

您实际上描述了[**head.js**](http://headjs.com/#usage)的功能，这似乎是您正在寻找的。

# javascript - JQuery-ui：元素失去了“可拖动性”

> ID：13066713
> 
> 赞同：0
> 
> 时间：2012-10-25T10:35:23.137
> 
> 标签：javascript, jquery, jquery-ui

我正在开发一种基于网络的地图编辑器，我正在使用 JQuery 和 JQuery-ui。我主要使用后者来使对象可拖动。当用户单击按钮时，对象被创建并插入到页面中的默认位置。创建对象后，我将其设置为可拖动的。

发生的情况是，如果我创建 2 个或更多重叠的对象，我只能拖动顶部的那个，其他对象将失去可拖动性。如果我添加这些对象并将它们移动到某个地方并且在我使它们重叠之后没有问题，我仍然可以将它们拖动到我想要的地方。仅当对象在创建时重叠时才会出现问题。

这是我写的代码。

```
<html>
    <head>
<script type="text/javascript" src="wz_jsgraphics.js"></script>
<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.24.custom.min.js"></script>

<script type="text/javascript"> 
     var lastNodeId;

     $(function() {
         lastNodeId = 0;
         $("#nodeButton").click( addNode ); 
     });

    function addNode() {
        var id = "node" + lastNodeId;

        $("#drawArea").append("<div id=\"" + id + "\" class='node'></div>");

        var jg = new jsGraphics(id);
        jg.setColor("#000000"); 
        jg.drawImage("pc_icon.png", 50, 50, 50, 50);
        jg.paint();

        var idImg = "img" + lastNodeId;
        $("#" + id + " img").attr("id", idImg);

        lastNodeId++;
        $("#" + idImg).draggable();

}

</script>
</head>

<body>
    <button type="button" id="nodeButton">Aggiungi Nodo</button>
    <div id="drawArea"> </div>
</body>
</html> 
```

我使用 JSGraphics 只是为了在页面上绘制一个图标，它可以在[http://www.walterzorn.de/en/jsgraphics/jsgraphics_e.htm](http://www.walterzorn.de/en/jsgraphics/jsgraphics_e.htm)找到。我真的希望有人可以帮助我了解发生了什么以及我做错了什么！:)

**更新**

我试图在不同的地方添加下一个对象。我发现如果与之前添加的对象的距离至少为 17px，则底部的对象不会失去其可拖动性。无论我修改 x 或 y 参数，它都必须至少有 17px 的距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:59:39.860

尝试替换以下代码：

```
$("#" + id + " img").attr("id", idImg);

lastNodeId++;
$("#" + idImg).draggable(); 
```

对于这个：

```
$("#" + id + " img").attr("id", idImg).draggable();
lastNodeId++; 
```

因为它可能是新的`id`集合并没有为 dom 更新得如此之快以至于 jQuery 抓住了它。

**更新**：
如果你这样做：

```
lastNodeId++;
console.log('im len: '+$("#" + idImg).length);
$("#" + idImg).draggable(); 
```

它在控制台中打印什么？可能是图像尚未创建，请查看 jqGraphics 是否具有创建图像时的回调。

# html - 被页面顶部的空白弄糊涂了

> ID：13066715
> 
> 赞同：0
> 
> 时间：2012-10-25T10:35:38.550
> 
> 标签：html, space

谁能告诉我为什么我的页面顶部有空白：

[http://wildwood-design.org/twagons.html](http://wildwood-design.org/twagons.html)

但不是这个：

[http://wildwood-design.org/index.html](http://wildwood-design.org/index.html)

我就是看不出来！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:42:05.880

它`navth`在您的幻灯片下方。它不存在于内页上，删除它似乎可以解决问题。

该`navth`列表没有高度，但*确实*有边距 - 将边距设置为 0 会删除空白。或者，由于用户看不到它，您可以将其设置为`display: none;`。

旁白：我认为您使用 WYSIWG 程序来生成代码是否正确？设计*有效*，但所有的内联样式都让我头疼，从长远来看，这将使网站难以维护......

# sql-server - freeTDS 不使用其配置

> ID：13066716
> 
> 赞同：21
> 
> 时间：2012-10-25T10:35:45.447
> 
> 标签：sql-server, linux, ubuntu-10.04, freetds

我决定使用 FreeTDS 驱动程序和 unixODBC 来管理基于 LAMP 的应用程序与远程 MsSQL 数据库之间的 PDO 连接。不幸的是，驱动程序似乎没有读取 freetds.conf 文件，也没有直接通过服务器的 CLI 设置环境变量，也没有通过 putenv() 函数在 php 文件中指定环境变量。

现在一些数据：

1.  当我 ping 服务器时 - 没有数据包丢失。
2.  当我在 1433 端口上远程登录服务器时 - 连接已建立
3.  当我使用命令时

    ```
    TDSVER=7.0 tsql -H >IP< -p 1433 -U username 
    ```

    系统提示我输入密码并建立连接。

4.  如果命令前面没有 TDSVER - 连接失败并显示以下消息：

    ```
    Error 20017 (severity 9):
        Unexpected EOF from the server
        OS error 115, "Operation now in progress"
    Error 20002 (severity 9):
        Adaptive Server connection failed
    There was a problem connecting to the server 
    ```

5.  tsql -C 命令回显这样的输出：

    ```
    Compile-time settings (established with the "configure" script)
                           Version: freetds v0.91
            freetds.conf directory: /usr/local/etc
    MS db-lib source compatibility: yes
       Sybase binary compatibility: no
                     Thread safety: yes
                     iconv library: yes
                       TDS version: 5.0
                             iODBC: no
                          unixodbc: yes
             SSPI "trusted" logins: no
                          Kerberos: no 
    ```

6.  上面给出的位置的 freetds.conf 有这个条目：

    ```
    [MSSQL]
    host = >IP<
    port = 1433
    tds version = 7.0 
    ```

7.  ISQL 也失败了：

    ```
    isql -v MSSQL
    [S1000][unixODBC][FreeTDS][SQL Server]Unable to connect to data source
    [01000][unixODBC][FreeTDS][SQL Server]Adaptive Server connection failed
    [ISQL]ERROR: Could not SQLConnect 
    ```

8.  我的 odbc.ini ：

    ```
    [MSSQL]
    Description = MS SQL Server
    Driver = FreeTDS
    TDS_Version = 7.0
    Server = >IP<
    UID = username
    PWD = password
    ReadOnly = No
    Port = 1433 
    ```

我想解决方案真的很简单，但我太愚蠢了，找不到它......

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-25T16:09:56.560

今天花了很长时间调试一个类似的问题。我在 freetds.conf 中设置了“TDS 版本”，但它没有在我的 ODBC 连接中使用。在阅读了 freetds 源代码（connectparams.c:odbc_parse_connect_string）后，我发现：

*   如果您的连接字符串使用“SERVER=”，则 freetds.conf 和 odbc.ini 都将被忽略
*   如果您的连接字符串使用“SERVERNAME=”，则使用相应 freetds.conf 服务器中的设置
*   如果您的连接字符串使用“DSN=”，则使用相应 odbc.ini DSN 中的设置

odbcinst.ini 是一个红鲱鱼。FreeTDS 从不检查设置。

*您在连接字符串*中指定的设置始终受到尊重。它还始终尊重 TDSVER 等环境变量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T13:35:03.583

我的直觉是你需要在你的 freetds.conf 和 odbc.ini 文件中将你的**tds version = 7.0**更改为**tds version = 8.0**并且你需要在你的 odbcinst.ini 文件中添加一些东西。这是我在 Ubuntu 12.04 服务器上与远程 MSSQL 服务器通信的内容：

freetds.conf

```
# Define a connection to the MSSQL server.
[mssql]
    host = myserver
    port = 1433
    tds version = 8.0 
```

odbc.ini

```
# Define a connection to the MSSQL server.
# The Description can be whatever we want it to be.
# The Driver value must match what we have defined in /etc/odbcinst.ini
# The Database name must be the name of the database this connection will connect to.
# The ServerName is the name we defined in /etc/freetds/freetds.conf
# The TDS_Version should match what we defined in /etc/freetds/freetds.conf
[mssql]
Description             = MSSQL Server
Driver                  = freetds
Database                = MyDB
ServerName              = myserver
TDS_Version             = 8.0 
```

odbcinst.ini

```
# Define where to find the driver for the Free TDS connections.
[freetds]
Description     = MS SQL database access with Free TDS
Driver          = /usr/lib/i386-linux-gnu/odbc/libtdsodbc.so
Setup           = /usr/lib/i386-linux-gnu/odbc/libtdsS.so
UsageCount      = 1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-07T15:25:44.790

我遇到了同样的问题，但我的配置已经正确设置。问题是 freetds.conf 识别的 TDS 版本在新版本中发生了变化，但显然旧版本仍然在 TDSVER 环境变量中工作。一旦我将配置文件中的版本设置为 7.1 而不是 8.0，一切都开始工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-26T13:40:42.743

通过在我的文件`TDSVER=7.0`末尾添加以下内容解决了最初的问题：`odbc.ini`

```
[Default]
Driver=/usr/local/lib/libtdsodbc.so 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T10:43:56.740

而不是连接到IP，尝试连接到配置部分的名称？例如：

```
isql -v MSSQL 
```

# php - 我如何检查 php-fpm 是否正在服务 php 请求

> ID：13066719
> 
> 赞同：0
> 
> 时间：2012-10-25T10:35:50.657
> 
> 标签：php, apache2.2, mod-fastcgi

我已经在 Centos 5.8 + Apache2 上安装了 php-fpm

所以，问题是：我如何检查 php-fpm 是否在为 php 请求提供服务？

使用下面这样的 index.php

```
echo "php-fpm test"; 
```

调用`http://localhost/index.php` 输出很好，但是

如果我跑

```
service php-fpm stop 
```

无论如何，同样的电话工作正常。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:39:25.133

您可以安装一个软件包并尝试连接。包名叫做`libfcgi`.

`cgi-fcgi -bind -connect localhost:9000`

如果我猜的话，您可能安装了 PHP 以生成在 FPM 停止时不会断开连接的工作人员，或者您同时`/etc/init.d/php5-cgi`运行`/etc/init.d/php-fpm`.

# ruby-on-rails - 我如何干净地去除rubinius？

> ID：13066720
> 
> 赞同：4
> 
> 时间：2012-10-25T10:35:57.240
> 
> 标签：ruby-on-rails, ruby, rvm, rubinius

我使用[http://railsinstaller.org/](http://railsinstaller.org/)安装了一堆包。`rails new myApp`然后我通过调用创建了一个rails应用程序，`rails server`但不幸的是我收到了这个错误：[点击这里](https://gist.github.com/3951897)

所以我想我宁愿删除 rubinius 或者对 ruby​​ 及其所有依赖项进行某种全新安装，但这可能是一个问题，因为我可能会不小心删除一些文件并且不记得它们是什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:52:15.710

Ruby 安装程序会为您安装 RVM，然后它会为您安装和管理每个 Ruby，因此要在命令行中删除它，请使用：

```
rvm remove rbx-1.10.2 
```

可以在 RVM 网站上找到更多说明：

[https://rvm.io/rubies/removing/](https://rvm.io/rubies/removing/)

添加一个新的 Rubinius：

```
rvm install rbx 
```

有关更多信息，请参见[https://rvm.io/rubies/installing/](https://rvm.io/rubies/installing/)。

# jstree - 如何在jsTree中获取子节点的直接父级的标题？

> ID：13066721
> 
> 赞同：0
> 
> 时间：2012-10-25T10:35:58.550
> 
> 标签：jstree

如何在 jsTree 中获取子节点的直接父节点的标题。我尝试了以下代码，但它给了我 html li 元素，我想要父元素的标题。

var parent = data.inst._get_parent(data.rslt.obj);

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:38:39.813

使用 jQuery 中的父母来获取所有父母，通过 li 过滤掉，因为所有树项都是 jstree 中的 li，试试这个：

```
var parents = data.rslt.obj.parents("li");
And for children use children in jQuery, like so:

var children = data.rslt.obj.parent().find('li'); 
```

[jsTree：如何将选定节点的 ID 获取到 jsTree 中的根节点？](https://stackoverflow.com/questions/10140057/jstree-how-to-get-ids-of-selected-nodes-to-root-node-in-jstree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:23:39.173

```
.bind("select_node.jstree", function (e, data) {
  var parent=data.inst._get_parent(data.rslt.obj);
  alert(parent.find('a').first().text()); 
}); 
```

请注意，您必须使用`ui`插件才能使用 ._get_parent 功能

工作[jsfiddle](http://jsfiddle.net/radek/C67s3/5/)

# php - 获取另一行 GROUP BY 行的总和

> ID：13066724
> 
> 赞同：0
> 
> 时间：2012-10-25T10:36:06.257
> 
> 标签：php, mysql, group-by, sum

我有这张桌子：

![桌子](../Images/85c7c33dae8b4a2533b23fcbe48f9426.png)

对于不同的 var_lines（几乎可以作为一行数据或调查的受访者）和 set_codes（不同的调查代码），此选择会重复多次。

使用此查询：

```
SELECT
    *, COUNT(*) AS total
FROM
    `data`
WHERE
    `var_name` = 'GND.NEWS.INT'
AND(
    `set_code` = 'BAN11A-GND'
    OR `set_code` = 'BAN09A-GND'
    OR `set_code` = 'ALG11A-GND'
)
AND `country_id` = '5'
GROUP BY
    `data_content`,
    `set_code`
ORDER BY
    `set_code`,
    `data_content` 
```

该查询基本上计算特定问题的答案数量。然后将他们分组调查（set_code）。

我需要的是`data_content`GND.NEWS.INT 的每个分组答案也显示具有相同 var_line 的所有相应 GND_WT 的总和。

例如，如果我有这个：

```
data_id    data_content    var_name    var_line
1          2               GND.NEW.INT 1
2          1.4             GND_WT      1
3          2               GND.NEW.INT 2
4          1.6             GND_WT      2
5          3               GND.NEW.INT 3
6          0.6             GND_WT      3 
```

我会得到这样的东西：

```
data_id    data_content    var_name      var_line   total   weight
1          2               GND.NEW.INT   1          2       3
5          3               GND.NEW.INT   3          1       0.6 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:02:25.323

您的要求并不完全清楚，但我认为以下内容可以满足您的需求：

```
select d1.data_id,
  d1.data_content,
  d1.var_name,
  d1.var_line,
  t.total,
  w.weight
from data d1
inner join
(
  select data_content,
    count(data_content) Total
  from data
  group by data_content
) t
  on d1.data_content = t.data_content
inner join
(
  select var_line,
    sum(case when var_name = 'GND_WT' then data_content end) weight
  from data
  group by var_line
) w
  on d1.var_line = w.var_line
where d1.var_name = 'GND.NEW.INT' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/a0ecd/17)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:14:22.097

此查询可能适合您的具体示例：

```
select st.data_id, 
    st.data_content, 
    st.var_name, 
    st.var_line, 
    count(st.data_id) as total,
    sum(st1.data_content) as weight
from data st
left join data st1 on st1.var_name = 'GND_WT' AND st1.var_line=st.var_line
where st.var_name='GND.NEW.INT'
group by st.data_content 
```

问候，

路易斯。

# android - 使用 android Wi-Fi Direct API 的问题：mChannel = mManager.initialize()

> ID：13066725
> 
> 赞同：4
> 
> 时间：2012-10-25T10:36:05.710
> 
> 标签：android, channel, wifi-direct

这是我的第一篇文章，希望能做对。我正在尝试使用新的 android 技术 Wi-Fi Direct 创建一个应用程序。为此，我遵循了您可以在以下位置找到的教程：

[http://developer.android.com/guide/topics/connectivity/wifip2p.html](http://developer.android.com/guide/topics/connectivity/wifip2p.html)

真的很有用，但是我复制代码的时候，有问题。与步骤 3 完全相同：

```
WifiP2pManager mManager;
Channel mChannel;
BroadcastReceiver mReceiver;
...
@Override
protected void onCreate(Bundle savedInstanceState){
    ...
    mManager = (WifiP2pManager) getSystemService(Context.WIFI_P2P_SERVICE);
    mChannel = mManager.initialize(this, getMainLooper(), null);
    mReceiver = new WiFiDirectBroadcastReceiver(manager, channel, this);
    ...
} 
```

错误在线：

```
mChannel = mManager.initialize(this, getMainLooper(), null); 
```

错误信息是：

```
Type mismatch: cannot convert from WifiPesManager.Channel to Channel 
```

建议制作这样的演员表：

```
mChannel =  (Channel) mManager.initialize(this, getMainLooper(), null); 
```

但是当我为此更改代码时，运行应用程序时出现另一个错误：

```
10-25 12:08:34.845: E/AndroidRuntime(26634): java.lang.RuntimeException: Unable to start activity ComponentInfo{android.nacho.WifiDirect/android.nacho.WifiDirect.WifiDirect}: java.lang.ClassCastException: android.net.wifi.p2p.WifiP2pManager$Channel cannot be cast to java.nio.channels.Channel 
```

只需添加其余代码就是它在教程中的显示方式，但以防万一我要添加 Activity 和 Broadcast 类：

## **主要活动**

```
package android.nacho.WifiDirect;

import java.nio.channels.Channel;

import android.net.wifi.p2p.WifiP2pManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.IntentFilter;
import android.view.Menu;

public class WifiDirect extends Activity {

    WifiP2pManager mManager;
    Channel mChannel;
    BroadcastReceiver mReceiver;

    IntentFilter mIntentFilter;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_wifi_direct);

        //To register the BroadastReceiver
        mManager = (WifiP2pManager) getSystemService(Context.WIFI_P2P_SERVICE);
        mChannel =  (Channel) mManager.initialize(this, getMainLooper(), null); //It was necessary to make a cast (Channel)
        mReceiver = new WiFiBroadcastReceiver(mManager, mChannel, this, this);

        //To define the filter in the BroadcastReceiver
        mIntentFilter = new IntentFilter();
        mIntentFilter.addAction(WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION);
        mIntentFilter.addAction(WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION);
        mIntentFilter.addAction(WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION);
        mIntentFilter.addAction(WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_wifi_direct, menu);
        return true;
    }

    //

    @Override
    protected void onResume() {
        super.onResume();
        registerReceiver(mReceiver, mIntentFilter);
    }

   // unregister the broadcast receiver
    @Override
    protected void onPause() {
        super.onPause();
        unregisterReceiver(mReceiver);
    }

} 
```

## **WiFi广播接收器**

```
package android.nacho.WifiDirect;

import java.nio.channels.Channel;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.wifi.p2p.WifiP2pManager;
import android.widget.Toast;

/**
 * A BroadcastReceiver that notifies of important Wi-Fi p2p events.
 */

public class WiFiBroadcastReceiver extends BroadcastReceiver {

    private WifiP2pManager manager;
    private Channel channel;
    private WifiDirect activity;
    //For toast, add also context
    private Context context;

    public WiFiBroadcastReceiver(WifiP2pManager manager, Channel channel, WifiDirect activity, Context context) {
        super();
        this.manager = manager;
        this.channel = channel;
        this.activity = activity;
        this.context= context;
    }

    @Override
    public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();

        if (WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION.equals(action)) {

            // Check to see if Wi-Fi is enabled and notify appropriate activity
             int state = intent.getIntExtra(WifiP2pManager.EXTRA_WIFI_STATE, -1);
             if (state == WifiP2pManager.WIFI_P2P_STATE_ENABLED) {

                Toast.makeText(context, "Wi-Fi Direct is enable", Toast.LENGTH_LONG).show();

             } else {

                Toast.makeText(context, "Wi-Fi Direct is not enable", Toast.LENGTH_LONG).show();
             }      

        } else if (WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION.equals(action)) {
            // Call WifiP2pManager.requestPeers() to get a list of current peers
        } else if (WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION.equals(action)) {
            // Respond to new connection or disconnections
        } else if (WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION.equals(action)) {
            // Respond to this device's wifi state changing
        }
    }
} 
```

## **AndroidManifest**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="android.nacho.WifiDirect"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".WifiDirect"
            android:label="@string/title_activity_wifi_direct" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T11:01:32.807

您正在使用来自错误包的 Channel 类。

做`import android.net.wifi.p2p.WifiP2pManager.Channel;`

代替

`import java.nio.channels.Channel;`

# java - 无法对 ListView 执行 onClick 操作

> ID：13066727
> 
> 赞同：1
> 
> 时间：2012-10-25T10:36:13.570
> 
> 标签：java, android, listview, onclick

这是我的代码。按下 item 时出现强制关闭错误。卡在这个程序中。没有找到合适的解决方案

```
myList = (ListView)findViewById(R.id.myList);
Adapter = new MobileArrayAdapter(FileShare.this, MOBILE_OS);
myList.setAdapter(Adapter);
myList.setOnItemClickListener(new OnItemClickListener()
{        
    public void onItemClick(AdapterView<?> parent, View view, int position, long id)
    {           
        // Toast.makeText(getApplicationContext(), "Your message here", Toast.LENGTH_SHORT).show();             
        Intent i = new Intent(FileShare.this, sharedView.class);
        Intent pickFileIntent = new Intent();
        pickFileIntent.setAction(Intent.ACTION_GET_CONTENT);
        pickFileIntent.addCategory(Intent.CATEGORY_OPENABLE);
        pickFileIntent.setType("*/*");
        Intent chooserIntent = Intent.createChooser(pickFileIntent, getText(R.string.choosefile_title));
        startActivityForResult(chooserIntent, PICK_FILE_REQUEST);
        startActivity(i);       
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:44:25.163

像这样添加`ComponentInfo`你的清单文件

```
<activity android:name="ComponentInfo" android:screenOrientation="portrait"
                    android:configChanges="orientation"></activity> 
```

我想这会帮助你...

# c# - C#中的简单计时器

> ID：13066728
> 
> 赞同：0
> 
> 时间：2012-10-25T10:36:15.837
> 
> 标签：c#, timer

我有这个代码

```
private void picTop_MouseEnter(object sender, EventArgs e)
{
  if (timer1.Tick == 10)
  {
    picBottom.Visible = true;
    picTop.Visible = false;
    timer1.Stop();
  }
  else 
  {
    MessageBox.Show("ERROR You cannot view this section at this time.\nPlease try again later.");
  }
}

private void picBottom_MouseEnter(object sender, EventArgs e)
{
  picBottom.Visible = false;
  picTop.Visible = true;
  timer1.Start();
} 
```

我的 timerinterval 设置为 1000 毫秒（所以 1 秒）我只希望用户在 10 秒后再次进入顶部面板。一些帮助将不胜感激。

我得到的当前错误：timer1.Tick 带有红色下划线，错误=“事件'System.Windows.Forms.Timer.Tick'只能出现在+=或-=的左侧

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:38:42.980

`Timer.Tick`不是财产，而是事件。

像这样使用它

```
timer1.Tick += 
{
    picBottom.Visible = true;
    picTop.Visible = false;
    timer1.Stop();
} 
```

用于间隔使用`timer.Interval`

```
timer.Interval = 10000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:44:05.807

好的。我想我理解你想要达到的目标......

您的表单上有 2 个区域，分别称为“顶部”和“底部”

一旦用户进入并随后离开顶部区域，您不希望他们能够再次进入 10 秒。那是对的吗？

所以你有一些问题......首先，`Tick`是一个事件，当它被引发时，你会附加一个方法来触发它。它不是您可以检查的整数。与计时相关的计时器上唯一的整数属性称为`Interval`

但除此之外，我认为您的方法不会特别有效。也许更好的主意是`MouseExit`在顶部区域添加一个事件。并禁用该区域 10 秒。并使用计时器重新启用它。

```
timer1.Tick += timer1_Tick;

public void Top_MouseExit (object sender, EventArgs e)
{
   PicTop.Visible = false; // or hide/disbale it some other way
   Timer1.Interval = 10000; //10 seconds
   Timer1.Start();
}

public void timer1_Tick(object sender, EventArgs e)
{
    timer1.Stop();
    PicTop.Visible = true; //renable the top area
} 
```

# android - Horizo ntalScrollView 过度滚动和父视图

> ID：13066729
> 
> 赞同：2
> 
> 时间：2012-10-25T10:36:20.500
> 
> 标签：android, android-viewpager, horizontalscrollview, android-overscoll

我有一个`HorizontalScrollView`用户可以滚动阅读一些`TextViews`. 这被放置在一个`ViewPager`.

因此，如果用户滚动整个`HorizontalScrollView`页面而不是显示过度滚动，我希望整个页面（内部`ViewPager`）开始滚动......

任何想法？

```
<HorizontalScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollbars="none"
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    >

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" 
        android:id="@+id/tagLine"
    >
    </LinearLayout>

</HorizontalScrollView> 
```

LinearLayout 在运行时填充`TextView`

此布局由 a`Fragment`使用的 a膨胀`ViewPager`

# linux - linux nasm打印多个字符

> ID：13066732
> 
> 赞同：1
> 
> 时间：2012-10-25T10:36:26.897
> 
> 标签：linux, assembly, x86, nasm

我正在尝试编写一个允许我打印多个字符（字符串或整数）的程序。我遇到的问题是我的代码只打印一个字符，然后换行并保持在无限循环中。这是我的代码：

```
SECTION .data
len EQU 32
SECTION .bss
num resb len
output resb len

SECTION .text
GLOBAL _start
_start:
Read:
    mov eax, 3
    mov ebx, 1
    mov ecx, num
    mov edx, len
    int 80h

Point:
    mov ecx, num

Print:
    mov al, [ecx]
    inc ecx
    mov [output], al

    mov eax, 4
    mov ebx, 1
    mov ecx, output
    mov edx, len
    int 80h

    cmp al, 0
    jz Exit

Clear:
    mov eax, 0
    mov [output], eax
    jmp Print  

Exit:
    mov eax, 1
    mov ebx, 0
    int 80h 
```

有人可以指出我做错了什么吗？

谢谢，

赖莱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:01:17.337

在您第一次进入该`Print`部分时，`ecx`是指向字符串的开头并且您使用它将单个字符复制到输出字符串的开头。但是再写几条指令，您`ecx`用指向输出字符串的指针覆盖，并且永远不会恢复它，因此您永远无法复制和打印字符串的其余部分。

另外，您为什么要`write()`使用单个字符串调用以循环遍历它以打印整个字符串？为什么不直接传入`num`而不是将单个字符复制到`output`并传递呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:06:48.680

在你的最后一个问题中，你显示`message`为一个以零结尾的字符串，所以`cmp al, 0`将指示字符串的结尾。sys_read 不会创建以零结尾的字符串！（如果需要，我们可以在其中填充一个零 - 例如作为 sys_open 的文件名） sys_read 将读取最多 edx 字符。当且仅当按下“enter”键时，来自标准输入的 sys_read 才会返回。如果输入的 edx 字符少于 edx 字符，则字符串以换行字符（十进制 10 或 0xA 或 0Ah 十六进制）终止 - 您可以查找...但是，如果讨厌的用户键入的 edx 字符以上，则只有 edx 字符可以进入你的缓冲区，“多余的”保留在操作系统的缓冲区中（以后可能会造成麻烦！）。在这种情况下，您的字符串不会以换行符终止，因此查找它会失败。sys_read 返回实际读取的字符数 - 直到 edx - 包括换行 - 在 eax 中。如果你不

作为一个实验，在 edx 中使用一些小数字（比如 4）执行 sys_read，然后退出程序。键入“abcdls”（回车）并观察“ls”的执行情况。如果某个小丑输入“abcdrm -rf .”......好吧，不要！

最安全的事情是刷新操作系统的输入缓冲区。

 `````
 mov ecx, num
    mov edx, len
    mov ebx, 1
    mov eax, 3
    int 80h
    cmp byte [ecx + eax - 1], 10 ; got linefeed?
    push eax ; save read length  - doesn't alter flags
    je good
flush:
    mov ecx, dummy_buf
    mov edx, 1
    mov ebx, 1
    mov eax, 3
    int 80h
    cmp byte [ecx], 10
    jne flush
good:
    pop eax ; restore length from first sys_read 
```` 

`我们可以将它放在堆栈中，而不是在 .bss（或 .data）中定义`dummy_buf`- 在这里尽量保持简单。这是不完美的——我们不知道我们的字符串是否以换行符结尾，并且我们不检查错误（不太可能从标准输入读取）。你会发现你正在编写更多的代码来处理错误和“白痴用户”输入，而不是“做工作”。不可避免的！（这是一种低级语言——我们必须告诉 CPU 每一件事！）`

 `sys_write 也不知道以零结尾的字符串！它会打印 edx 字符，不管有多少垃圾。您想弄清楚您实际要打印多少个字符，并将其放入 edx 中（这就是我保存/恢复上面原始长度的原因）。

您提到“整数”并`num`用作变量名。除了 ascii 代码之外，这些函数都不知道“数字”。您正在阅读和书写字符。将一位数转换为字符很容易 - 添加或减去“0”（十进制 48 或 30h）。多位数字更复杂 - 看看一个例子，如果这是你需要的。

最好的，弗兰克``

# c# - 使用 if 语句从某一行重新启动程序？

> ID：13066736
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:36:45.760
> 
> 标签：c#, if-statement, repeat

如果用户输入 1（就在注释之后指出下一个代码将要求用户输入 2 个输入）并且如果用户输入 -1 结束它，任何人都可以帮助我从第 46 行重新启动我的程序。我想不出该怎么做。我是 C# 新手，您可以提供的任何帮助都会很棒！

```
class Program
{
    static void Main(string[] args)
    {

        //Displays data in correct Format

        List<float> inputList = new List<float>();
        TextReader tr = new StreamReader("c:/users/tom/documents/visual studio 2010/Projects/DistanceCalculator3/DistanceCalculator3/TextFile1.txt");
        String input = Convert.ToString(tr.ReadToEnd());
        String[] items = input.Split(',');
        Console.WriteLine("Point         Latitude        Longtitude       Elevation");

        for (int i = 0; i < items.Length; i++)
        {
            if (i % 3 == 0)
            {
                Console.Write((i / 3) + "\t\t");
            }

            Console.Write(items[i]);
            Console.Write("\t\t");

            if (((i - 2) % 3) == 0)
            {
                Console.WriteLine();
            }

        }

        Console.WriteLine();
        Console.WriteLine();

        // Ask for two inputs from the user which is then converted into 6 floats and transfered in class Coordinates    

        Console.WriteLine("Please enter the two points that you wish to know the distance between:");
        string point = Console.ReadLine();
        string[] pointInput = point.Split(' ');

        int pointNumber = Convert.ToInt16(pointInput[0]);
        int pointNumber2 = Convert.ToInt16(pointInput[1]);

        Coordinates distance = new Coordinates();

        distance.latitude = (Convert.ToDouble(items[pointNumber * 3]));
        distance.longtitude = (Convert.ToDouble(items[(pointNumber * 3) + 1]));
        distance.elevation = (Convert.ToDouble(items[(pointNumber * 3) + 2]));

        distance.latitude2 = (Convert.ToDouble(items[pointNumber2 * 3]));
        distance.longtitude2 = (Convert.ToDouble(items[(pointNumber2 * 3) + 1]));
        distance.elevation2 = (Convert.ToDouble(items[(pointNumber2 * 3) + 2]));

        //Calculate the distance between two points

        const double PIx = 3.141592653589793;
        const double RADIO = 6371;

        double dlat = ((distance.latitude2) * (PIx / 180)) - ((distance.latitude) * (PIx / 180));
        double dlon = ((distance.longtitude2) * (PIx / 180)) - ((distance.longtitude) * (PIx / 180));

        double a = (Math.Sin(dlat / 2) * Math.Sin(dlat / 2)) + Math.Cos((distance.latitude) * (PIx / 180)) * Math.Cos((distance.latitude2) * (PIx / 180)) * (Math.Sin(dlon / 2) * Math.Sin(dlon / 2));
        double angle = 2 * Math.Atan2(Math.Sqrt(a), Math.Sqrt(1 - a));
        double ultimateDistance = (angle * RADIO);

        Console.WriteLine("The distance between your two points is...");
        Console.WriteLine(ultimateDistance);

        //Repeat the program if the user enters 1, end the program if the user enters -1

        Console.WriteLine("If you wish to calculate another distance type 1 and return, if you wish to end the program, type -1.");
        Console.ReadLine();

        if (Convert.ToInt16(Console.ReadLine()) == 1);

        {
           //here is where I need it to repeat
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:43:50.413

```
bool exit = false;
do
{
    Console.WriteLine("Please enter the two points that you wish to know the distance between:");
    ...
    Console.WriteLine("If you wish to calculate another distance type 1 and return, if you wish to end the program, type -1.");

    string input;

    do
    {
        input = Console.ReadLine().Trim();
    }
    while (input != "1" && input != "-1");

    if (input == -1) exit = true;
}
while (!exit); 
```

但是你最好考虑将逻辑推入方法和函数中，这样你的程序就由更小的构建块组成。

你应该瞄准这样的事情：

```
bool exit = false;
do
{
    Point[] points = ReadCoordinates();
    Whatever result = CalculateWhatever();
    DisplayResults(results);

    exit = ShouldExit();
}
while (!exit); 
```

这使您的程序的外部循环可以自我记录，并且方法可以自我解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:42:14.603

```
if (Convert.ToInt16(Console.ReadLine()) == 1);
{
    Main(args)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:43:47.850

这是一件很奇怪的事情。你看过while循环吗？

您可以制作上述结构的方法并循环它，而 userinput 如果等于 -1 则等于 1，调用以下语句

```
Application.Exit() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:52:17.643

可以使用 Goto 使程序在用户输入时循环。

```
 public static void Main(string[] args)
    {
        RestartApplication:

        //// Displays data in correct Format
        TextReader textReader = new StreamReader("c:/users/tom/documents/visual studio 2010/Projects/DistanceCalculator3/DistanceCalculator3/TextFile1.txt");
        var input = Convert.ToString(textReader.ReadToEnd());
        var items = input.Split(',');
        Console.WriteLine("Point         Latitude        Longtitude       Elevation");

        for (var i = 0; i < items.Length; i++)
        {
            if (i % 3 == 0)
            {
                Console.Write((i / 3) + "\t\t");
            }

            Console.Write(items[i]);
            Console.Write("\t\t");
            if (((i - 2) % 3) == 0)
            {
                Console.WriteLine();
            }
        }

        Console.WriteLine();
        Console.WriteLine();

        //// Ask for two inputs from the user which is then converted into 6 floats and transferred in class Coordinates    
        Console.WriteLine("Please enter the two points that you wish to know the distance between:");
        var point = Console.ReadLine();
        string[] pointInput;
        if (point != null)
        {
            pointInput = point.Split(' ');
        }
        else
        {
            goto RestartApplication;
        }

        var pointNumber = Convert.ToInt16(pointInput[0]);
        var pointNumber2 = Convert.ToInt16(pointInput[1]);

        var distance = new Coordinates
            {
                Latitude = Convert.ToDouble(items[pointNumber * 3]),
                Longtitude = Convert.ToDouble(items[(pointNumber * 3) + 1]),
                Elevation = Convert.ToDouble(items[(pointNumber * 3) + 2]),
                Latitude2 = Convert.ToDouble(items[pointNumber2 * 3]),
                Longtitude2 = Convert.ToDouble(items[(pointNumber2 * 3) + 1]),
                Elevation2 = Convert.ToDouble(items[(pointNumber2 * 3) + 2])
            };

        //// Calculate the distance between two points
        const double PIx = 3.141592653589793;
        const double Radio = 6371;

        var dlat = (distance.Latitude2 * (PIx / 180)) - (distance.Latitude * (PIx / 180));
        var dlon = (distance.Longtitude2 * (PIx / 180)) - (distance.Longtitude * (PIx / 180));

        var a = (Math.Sin(dlat / 2) * Math.Sin(dlat / 2)) + Math.Cos(distance.Latitude * (PIx / 180)) * Math.Cos(distance.Latitude2 * (PIx / 180)) * (Math.Sin(dlon / 2) * Math.Sin(dlon / 2));
        var angle = 2 * Math.Atan2(Math.Sqrt(a), Math.Sqrt(1 - a));
        var ultimateDistance = angle * Radio;
        Console.WriteLine("The distance between your two points is...");
        Console.WriteLine(ultimateDistance);

        //// Repeat the program if the user enters 1, end the program if the user enters -1
        Console.WriteLine("If you wish to calculate another distance type 1 and return, if you wish to end the program, type -1.");
        var userInput = Console.ReadLine();
        if (Convert.ToInt16(userInput) == 1)
        {
            //// Here is where the application will repeat.
            goto RestartApplication;
        }
    } 
```

还做了一些代码格式化。希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T10:57:38.633

您可以使用 goto 执行此操作，但请注意，这被认为是不好的做法。

```
static void Main(string[] args)
{
...
MyLabel:
...
if (Convert.ToInt16(Console.ReadLine()) == 1);
{
    //here is where I need it to repeat
    goto MyLabel;
} 
```

# spring-security - SpringSecurity - 禁用执行“假登录”的最佳方法

> ID：13066745
> 
> 赞同：2
> 
> 时间：2012-10-25T10:37:37.773
> 
> 标签：spring-security

我想找到最好/优雅/方便的方法来启用/禁用测试和开发环境的弹簧安全性。我想在 db 上使用一个属性，如果此属性设置为 ON，则身份验证是强制性的，否则用户不需要进行身份验证，它会直接到达应用程序主页，其中包含所有关联的角色和假用户名/属性。

顺便说一句，我的应用程序有一个简单的身份验证策略：用户之前通过不同的 Web 应用程序登录，该应用程序为他提供了访问许多其他 Web 应用程序的链接。此链接之一通过包含用户名和角色的简单提交重定向到我的网络应用程序，我的安全链捕获此信息并执行自动身份验证。

任何建议将不胜感激；）

再见！多尔菲兹

我的一些代码片段......

SpringSecurityContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:security="http://www.springframework.org/schema/security"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
          http://www.springframework.org/schema/security
          http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http use-expressions="true" auto-config="false" entry-point-ref="preAuthenticatedProcessingFilterEntryPoint">
        <security:intercept-url pattern="/fakeLogin*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/authError*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/VAADIN**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/**" access="isAuthenticated()" />
        <security:logout logout-url="/logout" logout-success-url="http://milan-ias-vs.usersad.everis.int/DMTest/" invalidate-session="true" />
        <security:custom-filter position="PRE_AUTH_FILTER" ref="preAuthenticatedProcessingFilter" />
    </security:http>

    <bean id="preAuthenticatedProcessingFilterEntryPoint" class="it.ram.authentication.LinkForbiddenEntryPoint" />

    <bean id="preAuthenticatedProcessingFilter" class="it.ram.authentication.PreAuthenticatedProcessingFilter">
        <property name="authenticationManager" ref="authenticationManager" />
    </bean>

    <bean id="preauthAuthProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
        <property name="preAuthenticatedUserDetailsService">
            <bean class="it.ram.authentication.PreAuthenticatedUserDetailsService" />
        </property>
    </bean>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider ref="preauthAuthProvider" />
    </security:authentication-manager>

</beans> 
```

PreAuthenticatedProcessingFilter.java：

```
public class PreAuthenticatedProcessingFilter extends AbstractPreAuthenticatedProcessingFilter {

    private final static Log log = LogFactory.getLog(PreAuthenticatedProcessingFilter.class);

    public PreAuthenticatedProcessingFilter() {
        super();
        log.debug("PreAuthenticatedProcessingFilter default constructor");
        setAuthenticationDetailsSource(new CustomAuthenticationDetailsSource());
    }

    public PreAuthenticatedProcessingFilter(AuthenticationManager authenticationManager) {
        log.debug("PreAuthenticatedProcessingFilter constructor with AuthMan arg");
        setAuthenticationDetailsSource(new CustomAuthenticationDetailsSource());
    }

    @Override
    protected Object getPreAuthenticatedPrincipal(HttpServletRequest request) {
        String userName = request.getParameter(Constants.REQUEST_USER_PARAM);
        log.debug("getPreAuthenticatedPrincipal - Returning " +userName);
        return userName;
    }

    @Override
    protected Object getPreAuthenticatedCredentials(HttpServletRequest request) {
        log.debug("getPreAuthenticatedCredentials - Returning N/A");
        return "N/A";
    }

    public static class CustomAuthenticationDetailsSource implements AuthenticationDetailsSource<HttpServletRequest, SessionUserDetails> {

        @Override
        public SessionUserDetails buildDetails(HttpServletRequest request) {
            log.debug("buildDetails");
            // create container for pre-auth data
            String role = request.getParameter(Constants.REQUEST_ROLE_PARAM);
            return new SessionUserDetails(role);
        }
    }
} 
```

PreAuthenticatedUserDetailsS​​ervice.xml：

```
public class PreAuthenticatedUserDetailsService implements AuthenticationUserDetailsService<PreAuthenticatedAuthenticationToken> {

    private final static Log log = LogFactory.getLog(PreAuthenticatedUserDetailsService.class);

    @Override
    public UserDetails loadUserDetails(PreAuthenticatedAuthenticationToken  token) throws UsernameNotFoundException {
        log.debug("loadUserDetails - token.getName(): " +token.getName());

        SessionUserDetails sessionUserDetails = (SessionUserDetails) token.getDetails();
        List<SimpleGrantedAuthority> authorities = sessionUserDetails.getAuthorities();            
        return new User(token.getName(), "N/A", true, true, true, true, authorities);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:49:10.407

看一眼：

org.springframework.security.web.authentication.RememberMeServices#autoLogin(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)

在这里戳一下实现：

[http://git.springsource.org/spring-security/spring-security/trees/c12c43da9eb59b664bc995a38859c6acac621390/web/src/main/java/org/springframework/security/web/authentication/rememberme](http://git.springsource.org/spring-security/spring-security/trees/c12c43da9eb59b664bc995a38859c6acac621390/web/src/main/java/org/springframework/security/web/authentication/rememberme)

SecurityContextHolder 是查看您是否拥有现有凭据然后更改或替换它们的地方。

```
SecurityContext securityContext = SecurityContextHolder.getContext();
Authentication authentication = securityContext.getAuthentication();
// authentication contains existing (if set and non-null) maybe it is anonymous
// so then you might have a better set of credentials to replace it with
WebappUserDetails webappUserDetails = userContextService.getPrincipal(WebappUserDetails.class);
// The above constructs my custom type that implement spring UserDetails interface
// this is the identity of the user
// You should check things are valid (account enable and valid, etc..)
// Then you make a fake Authentication and attach it to the session context
// There are many token kinds in spring representing different ways to auth
//  this token is the kind that might be used for a HTML form based login with
//  username and password. 
String principal = "myusername";  // username
String credentials = "mypassword";  // password
// Note you should probably not want to hardwire passwords into code and the correct
//  way is to setup a new Token type and configure main security XML to allow it
//  to the secure URLs (or secured subjects)
Authentication authRequest = new UsernamePasswordAuthenticationToken(principal, credentials);
Authentication authResult = authenticationManager.authenticate(authRequest);
// Check the authResult then attach it to the context
SecurityContextHolder.getContext().setAuthentication(authResult); 
```

# asp.net-mvc - 区域内具有不同 ApplicationName 的会员提供者

> ID：13066750
> 
> 赞同：2
> 
> 时间：2012-10-25T10:37:51.007
> 
> 标签：asp.net-mvc, web-config, asp.net-membership

我的`web.config`MVC3 应用程序中有一个`Admin`区域，我的 MVC3 应用程序中也有一个区域。

在前端，我将 asp.net 用户挂接到一个`Customers`表中，我的应用程序依赖于该表进行操作。在该`Admin`区域我有一个`Administrator Role`，`User`但这个登录也适用于前端。我可以为我创建一个客户，`Admin`这样我的应用程序就不会失败，但理想情况下我想将登录名与前台和`Admin`区域分开。

我想`web.config`在我的`Admin`区域内放一个具有不同应用程序名称的第二个，以便管理员帐户永远无法登录到前端。例如

```
 <profile>
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="SecurityConn" applicationName="/" />
      </providers>
    </profile> 
```

但我不知道把它放在哪里，或者它是否可能

```
applicationName="/AdminArea" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T22:09:22.743

您可以在具有不同应用程序名称的部分中添加多个提供程序。

您需要考虑的是如何在这些提供商之间切换。您可以使用 providers 集合，例如

```
Membership.Providers["MyOtherProvider"].ValidateUser(username, pwd); 
```

因此，您需要一种机制来了解谁在登录（管理员或客户）。

# iphone - 块返回错误

> ID：13066753
> 
> 赞同：1
> 
> 时间：2012-10-25T10:38:16.223
> 
> 标签：iphone, objective-c, ios, objective-c-blocks

我正在为我的应用程序创建一个验证方法，悬停我的返回值有问题；

**不兼容的块指针类型发送字符...**

```
-(BOOL)validateEmail{

    if (self.ownUser.emailUser != self.emailField) {
        [UserAPIClient validateEmail:self.emailField sucess:^(BOOL sucess, NSError *error) {
            if (sucess) {
                return YES;
            }else{
                NSLog(@"Can´t change e mail, already one is created in the database");
                return NO;
            }
        }];

    }else{
         return YES;
    }
} 
```

有人可以帮我解决这个问题吗？

提前致谢...

**编辑**

我完全错过了正确的解决方案，只需采用我的**UserApiClient**返回一个 BOOL

```
-(BOOL)validateEmail{

if (self.ownUser.emailUser != self.emailField) {

    return [UserAPIClient validateEmail:self.emailField];
}else{
    return YES;
} 
```

}

**编辑 2** 知道，我刚刚意识到，我需要这种方法的结果来进行一些更改。如何将此方法更改为同步方法？

```
 [[MYApiClient sharedInstance] getPath:@"validateEmail" parameters:params
                                    success:^(AFHTTPRequestOperation *operation, id JSON) {

                                        NSLog(@"SUCESS %@", JSON);
                                    }
                                    failure:^(AFHTTPRequestOperation *operation, NSError *error) {

                                        NSLog(@"Error  %@", error);

                                    }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:51:18.903

如果要使用`sucess`块外的值，则必须将其复制到`__block`变量中：

```
-(BOOL)validateEmail {

    if (self.ownUser.emailUser != self.emailField) {
        __block BOOL returnValue;

        [User validateEmail:self.emailField sucess:^(BOOL sucess, NSError *error) {
            if (sucess) {
                returnValue = YES;
            }else{
                NSLog(@"Can´t change e mail, already one is created in the database");
                returnValue = NO;
            }
        }];

        return returnValue;

    } else {
         return YES;
    }
} 
```

块本身（正如我从原型中猜测的那样）不返回值。

*请注意，这仅在同步*工作时才`[User validateEmail:sucess:]`有效，因此在函数调用返回时定义。*`returnValue`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:44:32.803

您没有显示方法的声明`[User validateEmail:sucess:]`（原文如此），但看起来该块被声明为返回`BOOL`.*

# c++ - 缓存优化和多态性

> ID：13066756
> 
> 赞同：3
> 
> 时间：2012-10-25T10:38:27.333
> 
> 标签：c++, optimization, c++11, polymorphism, shared-ptr

假设我有一个计算器类，它使用`std::function`以下对象实现策略模式（参见 Scott Meyers，Effective C++：55 Specific Ways to Improvement Your Programs and Designs）：

```
class Calculator
{
public:
  ...
  std::vector<double> Calculate(double x, double y)
  {
     std::vector<double> res;
     for(const Function& f : functions)
        res.push_back(f(x,y));
     return res;
  }

private:
  std::vector<Function> functions;
}; 
```

在哪里

```
typedef std::function<double(double,double)> Function; 
```

这是我面临的问题：假设类型`f`和的函数在内部执行昂贵且相同的计算以获得最终结果。为了提高效率，可以将所有公共数据包装在 a 中，计算一次并作为参数提供给它们。然而，这种设计有几个缺陷。例如，这会导致 的签名发生变化，从而导致将不必要的参数传递给某些函数实现。此外，这些通用和内部数据不再对代码中的其他组件隐藏，这可能会损害代码的简单性。`g``Function``struct``Function`

我想讨论以下优化策略：实现一个类`CacheFG`：

1.  定义一个方法，用给定的双精度和`Update`计算其内部数据；和`x``y`
2.  定义一种`Check`方法来确定其当前内部数据是否是使用给定的双精度对`x`和计算的`y`。

然后可以做的是制作`f`并`g`共享一个类的公共实例`CacheFG`，这可以使用`std::shared_ptr`构造来完成。因此，下面将是使用辅助函数创建`f`和`g`函数`f_aux`和`g_aux`。

```
double f_aux(double x, double y, const std::shared_ptr<CacheFG>& cache)
{
   if(not cache->Check(x,y))
      cache->Update(x,y);
   ...
}

std::shared_ptr<CacheFG> cache;
Function f = std::bind(f_aux, _1, _2, cache);
Function g = std::bind(g_aux, _1, _2, cache); 
```

我的问题是：（1）这是一种安全的优化方法吗？(2) 有没有更好的方法来解决这个问题？

编辑：在几个答案之后，我发现我的意图是在 C++中实现一种*记忆技术。*我注意到只有最后计算的状态才足以满足我的目的。

* * *

感谢*DeadMG*，我现在将在这里写下他的方法的改进。他的想法包括使用带有[可变参数模板](http://en.wikipedia.org/wiki/Variadic_template)的记忆技术。我只是提供了一个轻微的修改，我使用该构造`std::decay<Args>::type`来确保 a 的定义`tuple`仅具有非引用类型。否则，带有 const-reference 参数的函数会导致编译错误。

```
template<typename Ret, typename... Args>
std::function<Ret(Args...)> MemoizeLast(std::function<Ret(Args...)> f)
{
    std::tuple<typename std::decay<Args>::type...> cache;
    Ret result = Ret();
    return [=](Args... args) mutable -> Ret
    {
        if(std::tie(args...) == cache)
            return Ret(result);
        cache = std::make_tuple(args...);
        return result = f(args...);
    };
} 
```

为了防止 的移动，当提供的是缓存`result`的副本时，将返回 ( ) 的副本。`return Ret(result)``args`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T11:22:32.287

Why create your own class? There's no need for you to fail to re-create the interface of `unordered_map`. This functionality can be added as a re-usable algorithm based on `std::function` and `std::unordered_map`. It's been a while since I worked with variadic templates, but I hope you get the idea.

```
template<typename Ret, typename... Args> 
std::function<Ret(Args...)> memoize(std::function<Ret(Args...)> t) {
    std::unordered_map<std::tuple<Args...>, Ret> cache;
    return [=](Args... a) mutable -> Ret {
        if (cache.find(std::make_tuple(a...)) != cache.end())
            return cache[std::make_tuple(a...)];
        else
            return cache[std::make_tuple(a...)] = t(a...);
    };
} 
```

I don't recall, offhand, whether `std::hash` natively supports tuples. If not, you might need to add it, or use `std::map` which does natively support them.

Edit: Hmm, I didn't notice that you wanted to *share* the cache. Well, this shouldn't be too difficult a problem, just stick an `unordered_map` member in Calculator and pass it in by reference, but the semantics of doing so seem a bit... odd.

Edit again: Just the most recent value? Even simpler.

```
template<typename Ret, typename... Args> 
std::function<Ret(Args...)> memoize_last(std::function<Ret(Args...)> t) {
    std::tuple<Args...> cache;
    Ret result;
    return [=](Args... a) mutable -> Ret {
        if (std::tie(a...) == cache)
            return result;
        cache = std::make_tuple(a...);
        return result = t(a...);
    };
} 
```

If you want to share between several Functions, then the alteration is the same- just declare it in the class and pass in as reference.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:11:47.660

优化之前 - 测量。然后，如果您真的执行许多具有相同值的计算 - 然后创建此缓存对象。我想隐藏缓存检查和更新 `CacheFG::get(x, y)`并像`const auto value = cache->get(x,y)`.

# javascript - 如何将javascript对象的数组发送到服务器？

> ID：13066757
> 
> 赞同：0
> 
> 时间：2012-10-25T10:38:36.663
> 
> 标签：javascript, jquery

> **可能重复：**
> [反序列化 JavaScript 对象实例](https://stackoverflow.com/questions/10350797/deserializing-javascript-object-instance)

我在 javascript 中有一组以下构造函数对象：

```
 function MenuViewModel() {
    var self = this;
    var courseOptionObject = {};

    courseOptionObject["Options"] = [];
    self.ShowHide = ko.observable(false);

        self.Id = ko.observable(getId()); 
        self.Name = ko.observable();
        self.CourseName = ko.observable();
        self.Sequence = ko.observable('1');

        courseOptionObject["MenuId"] = self.Id();
        self.CourseOptions = ko.observable(new CourseOptionViewModel(courseOptionObject));                                             

    if (typeof MenuViewModel.saveButtonControll == "undefined") { //static members of class
        MenuViewModel.saveButtonControll = ko.observable(new buttonModel({ Text: "Save & Continue", Disabled: true, Visible: true }));
        MenuViewModel.IsTextEnable = ko.observable(true);
    }

    self.showDeleteIcon = function (data, event) { 
       data.ShowHide(true); 
    };

    //Hide the delete button from the menu ( call at mouseleave form the menu )
    self.hideDeleteIcon = function (data, event) {
        data.ShowHide(false); 
    };

    self.Errors = ko.validation.group(self);
} 
```

我的数组是：

```
var jObectArray = new Array();
for(var i = 0; i < 5; i++)
{
 jObejctArray.push(new MenuViewModel());
} 
```

我通过 ajax 发送它：

```
$.ajax({
   url :'urltoserver',
   type: 'POST',
   data: { array : JSON.stringify(jObectArray) },
   dataType: 'JSON'
 }); 
```

但我得到一个空数组到服务器。谁能告诉我我错过了什么？

**编辑**

console.log(jObejctArray) 输出为（数组中的 2 个对象）：

```
[
{"ShowHide":false,"Id":"8c4c470d-2b25-4070-8d3e-e307e9d49107",
"Name":"Menu-1","CourseName":"course-1","Sequence":1,
"CourseOptions":{"MenuId":"8c4c470d-2b25-4070-8d3e-e307e9d49107",
"Options":[],"errors":["Can`t left options list empty","Can`t insert empty value."],
"Errors":["Can`t left options list empty","Can`t insert empty value."]},
"errors":[],"Errors":[]},

{"ShowHide":false,"Id":"3da9cbc0-9db8-4297-8245-351caaec9f08",
 "Name":"Menu-2","CourseName":"course-2","Sequence":"2",
 "CourseOptions":{"MenuId":"3da9cbc0-9db8-4297-8245-351caaec9f08",
 "Options":[],"errors":["Can`t left options list empty","Can`t insert empty value."],
 "Errors":["Can`t left options list empty","Can`t insert empty value."]},
 "errors":[],"Errors":[]}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:43:06.250

Knockout observables 不是简单的字段，而是函数。JSON.stringify 不处理函数。通过使用添加 toJSON 方法指定自定义序列化程序来覆盖默认字符串化行为（这将由 JSON.stringify 调用）

尝试将此添加到您的模型中：

```
self.toJSON = function()  {
   var result = {};
   result.Name  = ko.utils.unwrapObservable(self.Name);
   ...
   /// you could either iterate over the fields with `for .. in`
   return result;
} 
```

# php - 如何删除字符串的第一个空格

> ID：13066759
> 
> 赞同：2
> 
> 时间：2012-10-25T10:38:40.780
> 
> 标签：php, whitespace, backspace

我正在构建一个新版本的电话配置管理器，我正在解决一个愚蠢的问题。您会看到这些电话 .cfg 配置是依赖静态的。因此，在旧版本中，我使它的配置没有问题。

它看起来像这样：

```
## Configuration header
configuration_1="parram"
configuration_2="parram"
configuration_3="parram" 
```

等等

现在在新版本中，配置如下：

```
whitespace
## Configuration header
configuration_1="parram"
configuration_2="parram"
configuration_3="parram" 
```

请注意，空白实际上是空白，电话不接受配置，因为它希望看到第一行有#header。

所以我认为解决这个问题的简单方法是退格第一条白线，但如何。如何告诉 PHP 删除第一行？

好的，看看这个：[图片](https://imgur.com/a/y0FgN#1)

第一个屏幕截图来自[phpMyAdmin](http://en.wikipedia.org/wiki/PhpMyAdmin)，您可以在其中看到 textarea 内没有空白，但是当您将其回显时，您会突然看到它。奇怪的是，当使用 phpMyAdmin 手动更改配置时，它会以某种方式被删除，但它是自动完成的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T11:18:04.657

如果您将内容作为字符串，只需运行[`ltrim`](http://www.php.net/manual/en/function.ltrim.php).
它将去除字符串开头的所有空格。

```
$str = ltrim($str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:33:32.553

这就是如何只删除第一个空格：

```
$s   = '  Text';
$arr = str_split($s);
array_shift($arr);
$s   = implode('', $arr);

die($s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:44:23.690

如果你在一个字符串中得到这个配置，正如你的标题所说，你可以[修剪字符串](http://php.net/manual/en/function.trim.php)。

```
$config = trim($config); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:42:34.320

我会删除到第一个哈希 -

```
$contents = substr($contents, 0, strpos($contents, "#") - 1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T10:44:32.840

您可以使用 PHP 函数[`trim`](https://www.php.net/manual/en/function.trim.php)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-20T09:54:48.617

将以下代码放在文件的第一行：

```
ob_start(); 
```

在显示内容之前放置以下代码：

```
ob_end_clean(); 
```

# html - 垂直对齐：中间 - div中的img（不同大小的图片）

> ID：13066761
> 
> 赞同：1
> 
> 时间：2012-10-25T10:38:57.410
> 
> 标签：html, css, image, vertical-alignment

我没有成功的CSS。应该在图片的中心（不同大小）中`div`。看一个例子：

![图像示例](../Images/c6659af04edcb02872508df100cc581b.png)

以及 html 和 css 的示例 - [http://jsfiddle.net/KJXUt/](http://jsfiddle.net/KJXUt/)

**HTML：**

```
<div class="box">
  <a href="#" class="pic">
    <img src="http://pics.posternazakaz.ru/pnz/product/small_x2/97/61/ccc0980cde08f9032cd665f7104aca10.jpg" alt="" width="300" height="130" />
  </a>
</div>
<div class="box">
  <a href="#" class="pic">
    <img src="http://www.22.ru/ow_userfiles/plugins/photo/photo_preview_137.jpg" alt="" width="140" height="140" />
  </a>
</div>​ 
```

**CSS：**

```
body {
    background: #D6E8FF;
}
.box {
    border: #555 1px solid;
    margin-right: 10px;
    width: 100px;
    height: 100px;
    overflow: hidden;
    display: table-cell;          /* <-- problem */
    vertical-align: middle;       /* <-- problem */
}
img {
    max-width: 100px;
    height: auto;
} 
```

​</p>

如何纠正风格？请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:39:14.110

当你使用 display: table-cell; 它迫使单元格固定大小。也许这不是一个好的解决方案。

我不明白，如果真的想要它，但是：

```
body {
    background: #D6E8FF;
}
.box {
    border: #555 1px solid;
    float:left;
    width: 100px;
    height: 100px;
    overflow: hidden;
}
img {
    max-width: 100px;
} 
```

这里的例子：http: [//jsfiddle.net/KJXUt/1/](http://jsfiddle.net/KJXUt/1/)

或者，如果愿意：http: [//jsfiddle.net/KJXUt/3/](http://jsfiddle.net/KJXUt/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T14:12:20.137

将图片缩小而不重新调整大小的术语称为“裁剪”，为了直接实现您的答案，`background`将使用不同的 css 属性：并且 div 将被删除。如果您需要标签，[@Heliio 的方法非常棒。](https://stackoverflow.com/questions/13066761/vertical-align-middle-img-in-div-different-size-picture/13069894#13069894)`<div>`

代码示例如下 HTML：

```
<a href="#" class="pic pic1">
&nbsp;
</a> 
```

CSS：

```
.pic {
    display:inline-block;
    border: #555 1px solid;
    margin-right: 10px;
    width: 100px;
    height: 100px;
}

.pic1{
 background: transparent url(http://mw2.google.com/mw-panoramio/photos/medium/62256112.jpg) -20px -200px no-repeat;
} 
```

请注意，css 有一些负值，这些修改起来非常繁琐，但实际上只是`-((imagewidth-100)/2) x -((imageheight-100)/2)`

[http://jsfiddle.net/KJXUt/9/](http://jsfiddle.net/KJXUt/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:58:10.773

这是一种将图像垂直居中的简单技术`.box`

[http://codepen.io/AntonNiklasson/pen/pkaov](http://codepen.io/AntonNiklasson/pen/pkaov)

要在彼此旁边添加更多框，请添加`float: left`到`.box`

# android - 尝试在 Android 1.5 上使用 Base64 时出现“IllegalArgumentException：bad base-64”

> ID：13066762
> 
> 赞同：1
> 
> 时间：2012-10-25T10:38:58.020
> 
> 标签：android, base64, android-1.5-cupcake

我`java.lang.IllegalArgumentException: bad base-64` 尝试在 Android 1.5 上使用 Base64

```
private static String encrypt(Context cont, String value) {
    try {
        return Base64.encodeToString(value.getBytes(), Base64.DEFAULT);
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
}

private static String decrypt(Context cont, String value) {
    try {
        return new String(Base64.decode(value, Base64.DEFAULT));
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
}

/*
 * Copyright (C) 2010 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
}

Caused by: java.lang.IllegalArgumentException: bad base-64  
at: Base64.decode(Base64.java:161) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T11:00:02.480

```
public class Crypto {
   public static String encrypt(String value, String key) throws GeneralSecurityException {
    SecretKeySpec sks = new SecretKeySpec(hexStringToByteArray(key), "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, sks, cipher.getParameters());
    byte[] encrypted = cipher.doFinal(value.getBytes());
    return byteArrayToHexString(encrypted);
}

public static String decrypt(String message, String key) throws GeneralSecurityException {
    SecretKeySpec sks = new SecretKeySpec(hexStringToByteArray(key), "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, sks);
    byte[] decrypted = cipher.doFinal(hexStringToByteArray(message));
    return new String(decrypted);
}   

private static String byteArrayToHexString(byte[] b){
    StringBuffer sb = new StringBuffer(b.length * 2);
    for (int i = 0; i < b.length; i++){
        int v = b[i] & 0xff;
        if (v < 16) {
            sb.append('0');
        }
        sb.append(Integer.toHexString(v));
    }
    return sb.toString().toUpperCase();
}

private static byte[] hexStringToByteArray(String s) {
    byte[] b = new byte[s.length() / 2];
    for (int i = 0; i < b.length; i++){
        int index = i * 2;
        int v = Integer.parseInt(s.substring(index, index + 2), 16);
        b[i] = (byte)v;
    }
    return b;
}
  } 
```

上面的类将有助于加密和解密没有 base64 的字符串

上述类的用法

```
try {
    String key = UUID.randomUUID().toString().replaceAll("-", "");
    String src = "Hello world!";
    String tag1 = Crypto.encrypt(src, key);
    String tag2 = Crypto.decrypt(tag1, key);
    logger.info(src);
    logger.info(tag1);
    logger.info(tag2);
} catch (Exception e) {
    logger.error("", e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:51:37.397

你见过这个吗 ？

[如何在 Android 中使用 Base64 对字符串进行编码？](https://stackoverflow.com/questions/7687897/how-to-encode-a-string-with-base64-in-android)

他们使用来自[iHarder.net](http://prdownloads.sourceforge.net/iharder/Base64-2.3.7.zip?download)的 Base64 库来编码/解码字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:47:34.433

```
private static String encrypt(Context cont, String value) {
    try {
        return Base64.encodeToString(value.getBytes(), Base64.DEFAULT);
    }
catch (IllegalArgumentException e) {
            // TODO: handle exception
        }
 catch (Exception e) {
        throw new RuntimeException(e);
    }
}

private static String decrypt(Context cont, String value) {
    try {
        return new String(Base64.decode(value, Base64.DEFAULT));
    }
catch (IllegalArgumentException e) {
            // TODO: handle exception
        } 
catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

添加非法参数异常捕获.....我希望它会起作用

# xcode - 无法在 Xcode 中更改应用程序的名称

> ID：13066763
> 
> 赞同：1
> 
> 时间：2012-10-25T10:38:59.423
> 
> 标签：xcode

长话短说，我做了一个应用程序，现在完成了，我想了一个更好的名字。

当我更改产品名称时，它会询问我是否要让它在其他任何地方自动更改名称。不幸的是，这样做之后，我部署了应用程序，但它仍然在我的设备上显示旧名称。我尝试了很多方法来修复它，但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:42:57.337

在再次部署到设备之前，您是否尝试过从设备中删除应用程序并清理项目中的目标。

# c# - Azure 会话缓存错误

> ID：13066764
> 
> 赞同：1
> 
> 时间：2012-10-25T10:39:02.233
> 
> 标签：c#, asp.net-mvc-3, azure, azure-caching

我已经开始反复抛出 Azure 缓存错误。它似乎与过期的会话有关。这是一个随机样本 - 它发生在静态文件中。

```
事件代码：3005
事件消息：发生未处理的异常。
活动时间：10/25/2012 9:49:15 AM
活动时间（UTC）：10/25/2012 9:49:15 AM
事件 ID：004e617f16854e59b7a857ca542ae9fc
事件序列：86004
事件发生：720
事件详细代码：0

应用信息：
    应用域：/LM/W3SVC/1273337584/ROOT-1-129955415508042441
    信任级别：完全
    应用程序虚拟路径：/
    应用路径：E:\sitesroot\0\
    机器名称：RD00155D36A377

处理信息：
    进程 ID：3332
    进程名称：w3wp.exe
    帐户名称：NT AUTHORITY\NETWORK SERVICE

异常信息：
    异常类型：DataCacheException
    异常消息：ErrorCode:SubStatus:Key 引用不存在。基于 Key 创建对象以修复错误。
   在 Microsoft.ApplicationServer.Caching.DataCache.ThrowException（ResponseBody respBody）
   在 Microsoft.ApplicationServer.Caching.DataCache.ExecuteAPI（RequestBody reqMsg，IMonitoringListener 监听器）
   在 Microsoft.ApplicationServer.Caching.DataCache.InternalResetObjectTimeout（字符串键，TimeSpan newTimeout，字符串区域，IMonitoringListener 侦听器）
   在 Microsoft.ApplicationServer.Caching.DataCache.c__DisplayClass68.b__67()
   在 Microsoft.ApplicationServer.Caching.DataCache.ResetObjectTimeout（字符串键，TimeSpan newTimeout）
   在 Microsoft.Web.DistributedCache.DataCacheRetryWrapper.PerformCacheOperation（操作动作）
   在 Microsoft.Web.DistributedCache.DataCacheForwarderBase.ResetObjectTimeout（字符串键，时间跨度 newTimeout）
   在 System.Web.SessionState.SessionStateModule.BeginAcquireState（对象源，EventArgs e，AsyncCallback cb，对象 extraData）
   在 System.Web.HttpApplication.AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep（IExecutionStep 步骤，Boolean& completedSynchronously）

索取资料：
    请求网址：http://www.beko.co.uk/Scripts/jquery.nivo.slider.pack.js
    请求路径：/Scripts/jquery.nivo.slider.pack.js
    用户主机地址：80.2.72.81
    用户：  
    是否经过身份验证：假
    认证类型：  
    线程帐户名称：NT AUTHORITY\NETWORK SERVICE

线程信息：
    线程 ID：11
    线程帐户名称：NT AUTHORITY\NETWORK SERVICE
    是否冒充：假
    堆栈跟踪：在 Microsoft.ApplicationServer.Caching.DataCache.ThrowException(ResponseBody respBody)
   在 Microsoft.ApplicationServer.Caching.DataCache.ExecuteAPI（RequestBody reqMsg，IMonitoringListener 监听器）
   在 Microsoft.ApplicationServer.Caching.DataCache.InternalResetObjectTimeout（字符串键，TimeSpan newTimeout，字符串区域，IMonitoringListener 侦听器）
   在 Microsoft.ApplicationServer.Caching.DataCache.c__DisplayClass68.b__67()
   在 Microsoft.ApplicationServer.Caching.DataCache.ResetObjectTimeout（字符串键，TimeSpan newTimeout）
   在 Microsoft.Web.DistributedCache.DataCacheRetryWrapper.PerformCacheOperation（操作动作）
   在 Microsoft.Web.DistributedCache.DataCacheForwarderBase.ResetObjectTimeout（字符串键，时间跨度 newTimeout）
   在 System.Web.SessionState.SessionStateModule.BeginAcquireState（对象源，EventArgs e，AsyncCallback cb，对象 extraData）
   在 System.Web.HttpApplication.AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   在 System.Web.HttpApplication.ExecuteStep（IExecutionStep 步骤，Boolean& completedSynchronously）

```

没有这方面的代码，它是在 web.config 中配置的

```
<dataCacheClients>
  <dataCacheClient name="default">
    <hosts>
      <host name="[mycachename]" cachePort="22233" />
    </hosts>
    <securityProperties mode="Message">
      <messageSecurity authorizationInfo="[mykey]"></messageSecurity>
    </securityProperties>
  </dataCacheClient>
  <dataCacheClient name="SslEndpoint">
    <hosts>
      <host name="[mycachename]" cachePort="22243" />
    </hosts>
    <securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[mykey]"></messageSecurity>
    </securityProperties>
  </dataCacheClient>
</dataCacheClients> 
```

编辑：会话状态配置如下：

```
<sessionState mode="Custom" customProvider="AppFabricCacheSessionStoreProvider">
  <providers>
    <add name="AppFabricCacheSessionStoreProvider" type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache" cacheName="default" useBlobMode="true" dataCacheClientName="default" />
  </providers>
</sessionState> 
```

我试图了解是否有 a) 我可以做些什么来在配置中解决这个问题 b) 涉及哪些 DLL，以及最新版本是什么，(所以我可以看看更新是否有帮助) c) 如果其他人看到这个。

它是在我做了很多应用程序更新之后开始的，并且还更新了 Azure 中的缓存大小。因此不确定原因是什么。我不会认为代码更改是负责任的，但我们可能已经更新了一些 DLL，因为我们在开发过程中使用的 PC 之一是新建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T16:51:52.780

我通过 nuget 更新了 azure.caching 和 azure.configuration，然后重新发布，现在错误已经消失，没有其他代码或配置更改，所以看起来这是某个 DLL 版本之间的不兼容。

# php - 强制“另存为”svg 文件

> ID：13066767
> 
> 赞同：0
> 
> 时间：2012-10-25T10:39:08.653
> 
> 标签：php

我有以下文件：

下载.php

```
<?php 

$filename = $_GET["filename"];

if ($filename) {
$path = "/svg_files/".$filnavn."";
header('Content-Transfer-Encoding: binary');  // For Gecko browsers mainly
header('Last-Modified: ' . gmdate('D, d M Y H:i:s', filemtime($path)) . ' GMT');
header('Accept-Ranges: bytes');  // For download resume
header('Content-Length: ' . filesize($path));  // File size
header('Content-Encoding: none');
header('Content-Type: application/svg');  // Change this mime type if the file is not PDF
header('Content-Disposition: attachment; filename=' . $filename);  // Make the browser display the Save As dialog
}
?> 
```

它位于 svg_files 文件夹中。但是当我运行时：

myweb.com/svg_files/download.php?filename=file.svg

我只是得到一个空文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:41:36.583

您必须将文件的内容输出到浏览器。使用`readfile`或`file_get_contents`和`echo`或类似的东西。

作为旁注：注意所谓的目录遍历攻击。你可能想采取一些预防措施。 [http://en.wikipedia.org/wiki/Directory_traversal_attack](http://en.wikipedia.org/wiki/Directory_traversal_attack)

# sql - 如何在 VB.NET 2010 代码中捕获 SQL 异常？

> ID：13066768
> 
> 赞同：0
> 
> 时间：2012-10-25T10:39:11.713
> 
> 标签：sql, vb.net, ms-access

好的，我正在构建一个 VB.NET 系统，但是在我的代码的某些部分中捕获 SQL 异常时遇到了麻烦。简而言之，我正在使用 SELECT sql 查询来检索特定记录，并且我想确定 MSAccess 数据库中是否存在记录，这样我就不会检索 0 行。在打印到 TextField 期间，0 行将导致异常。以下是我正在处理的示例代码：

```
 If txSearch.Text = "" Then
        MsgBox("Please type the user id or use the barcode reader to scan",     MsgBoxStyle.OkOnly, "Search Field Empty")
    End If

    'ElseIf txSearch.Text != "" Then
    If txSearch.Text <> "" Then
        Dim con As New OleDb.OleDbConnection
        Dim dbProvider As String
        Dim dbSource As String
        Dim ds As New DataSet
        Dim dt As New DataSet
        Dim da As OleDb.OleDbDataAdapter
        Dim de As OleDb.OleDbDataAdapter
        Dim sql As String
        Dim sql1 As String
        Dim temp_num As Integer
        Dim cmd As New OleDb.OleDbCommand

        dbProvider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
        dbSource = "Data Source = new.mdb"

        con.ConnectionString = dbProvider & dbSource

        con.Open()

        Dim search As String
        search = txSearch.Text
        MessageBox.Show("You are going to search for " + search + ". Click OK to continue.")

        sql = "SELECT * FROM Student_Details WHERE Admin_No = '" & txSearch.Text & "'"

        sql1 = "SELECT * FROM Laptop_Details WHERE Admin_No = '" & txSearch.Text & "'"

        da = New OleDb.OleDbDataAdapter(sql, con)

        de = New OleDb.OleDbDataAdapter(sql1, con)

        'Dim check As Integer = sql.
        'If check > 0 Then

        'da.SelectCommand = cmd
        ds = New DataSet("Student_Details")
        da.Fill(ds, "Student_Details")
        dt = New DataSet("Laptop_Details")
        de.Fill(dt, "Laptop_Details")
        'con.Close()

        'If sql <> "" And sql1 <> "" Then
        'If ds.Equals(1) And ds.Equals(1) Then
        txAdminNO.Text = ds.Tables("Student_Details").Rows(0).Item(0)
        txName.Text = ds.Tables("Student_Details").Rows(0).Item(1)
        txProgramme.Text = ds.Tables("Student_Details").Rows(0).Item(2)
        cmbSStatus.SelectedText = ds.Tables("Student_Details").Rows(0).Item(3)
        txSerial.Text = dt.Tables("Laptop_Details").Rows(0).Item(1)
        txModel.Text = dt.Tables("Laptop_Details").Rows(0).Item(2)

        Dim com As New OleDb.OleDbCommand(sql, con)
        Dim com1 As New OleDb.OleDbCommand(sql1, con)

        Try

            temp_num = com.ExecuteNonQuery
            temp_num = com1.ExecuteNonQuery

        Catch ex As IndexOutOfRangeException
            Trace.WriteLine(ex.ToString)

        End Try

        con.Close()
        'End If
        'End If
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:15:24.523

尝试这样的事情：

```
 if ds.Tables("Student_Details").Rows.Count > 0  
    txAdminNO.Text = ds.Tables("Student_Details").Rows(0).Item(0)
    txName.Text = ds.Tables("Student_Details").Rows(0).Item(1)
    txProgramme.Text = ds.Tables("Student_Details").Rows(0).Item(2)
    cmbSStatus.SelectedText = ds.Tables("Student_Details").Rows(0).Item(3)

 End if

 if ds.Tables("Laptop_Details").Rows.Count > 0
    txSerial.Text = dt.Tables("Laptop_Details").Rows(0).Item(1)
    txModel.Text = dt.Tables("Laptop_Details").Rows(0).Item(2)
 End if 
```

为了帮助您发表评论，我会这样做：

```
 if ds.Tables("Student_Details").Rows.Count > 0 And ds.Tables("Laptop_Details").Rows.Count > 0
    txAdminNO.Text = ds.Tables("Student_Details").Rows(0).Item(0)
    txName.Text = ds.Tables("Student_Details").Rows(0).Item(1)
    txProgramme.Text = ds.Tables("Student_Details").Rows(0).Item(2)
    cmbSStatus.SelectedText = ds.Tables("Student_Details").Rows(0).Item(3)
    txSerial.Text = dt.Tables("Laptop_Details").Rows(0).Item(1)
    txModel.Text = dt.Tables("Laptop_Details").Rows(0).Item(2)
 else
  MsgBox("The user with id "+txSearch.Text+" does not exist") 
 end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:42:59.157

尝试使用 try-catch 语句：

在此处尝试
     您的代码以获取查询语句。
Catch ex as Exception
    MsgBox(ex.Message)
End Try

# qtp - 当我选择“在任何打开的浏览器上记录并运行测试”并单击“确定”时，IE 卡住并显示“停止工作”为什么会这样？

> ID：13066770
> 
> 赞同：0
> 
> 时间：2012-10-25T10:39:16.050
> 
> 标签：qtp

我重新注册了 BHO 经理，但它不起作用。注意：我使用的是 IE 9，QTP：11.0 试用版。

```
 In manage add-ons option: It shows Name:("Not verified" HP Developement ltd) 
```

有什么方法可以使用除 IE 之外的其他浏览器在 qtp 中进行测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:55:44.053

QTP11 最初并不支持 IE9（QTP11 于 2010 年 8 月发布，而 IE9 于半年后于 2011 年 3 月发布）。

为了获得支持，您必须安装补丁[QTPWEB_00078](http://support.openview.hp.com/selfsolve/document/KM1166929)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:59:52.410

这可能是 Browser Helper Object Manager 的问题，这可以通过取消注册并再次注册来解决：

在命令行输入重新注册：

```
regsvr32 -u bhomanager.dll
regsvr32 bhomanager.dll 
```

您可以通过打开 IE，转到工具，选择管理加载项和启用/禁用加载项来验证加载项是否正确安装。

# python - Python tkinter：停止文本小部件标签中的事件传播

> ID：13066773
> 
> 赞同：7
> 
> 时间：2012-10-25T10:39:27.940
> 
> 标签：python, event-handling, tkinter

我目前正在编写一个配色方案编辑器。对于方案的预览，我使用了一个文本小部件，在其中插入带有相应颜色标签的文本（我以编程方式生成）。

我想要的是以下行为：

*   单击文本小部件上没有文本的任意位置：更改背景颜色
*   单击插入带有标签的文本：更改标签对应的前景色

**现在这是我的问题：**

当我单击标记文本时，将调用标记的回调。到现在为止还挺好。但是，文本小部件的回调也被调用，尽管我在标签回调方法中返回“break”（这应该停止进一步的事件处理）。*我怎样才能阻止这个？*

为了说明这个具体问题，我编写了这个工作示例（适用于 Python 2 和 3）：

```
#!/usr/bin/env python

try:
    from Tkinter import *
    from tkMessageBox import showinfo
except ImportError:
    from tkinter import *
    from tkinter.messagebox import showinfo

def on_click(event, widget_origin='?'):
    showinfo('Click', '"{}"" clicked'.format(widget_origin))
    return 'break'

root = Tk()
text = Text(root)
text.pack()
text.insert(CURRENT, 'Some untagged text...\n')
text.bind('<Button-1>', lambda e, w='textwidget': on_click(e, w))
for i in range(5):
    tag_name = 'tag_{}'.format(i)
    text.tag_config(tag_name)
    text.tag_bind(tag_name, '<Button-1>',
        lambda e, w=tag_name: on_click(e, w))
    text.insert(CURRENT, tag_name + ' ', tag_name)
root.mainloop() 
```

任何帮助表示赞赏！

*编辑：也尝试过 Python 2。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:55:41.043

感谢您发布此问题并提供解决方案。我无法计算为了修复这种行为造成的症状而损失了多少小时。对. `Tk`_ `tag_bind`_`return "break"`

`Text`按照您通过将小部件与相同的事件序列绑定来劫持小部件的想法`tag_bind`，我改进了解决方案，**现在可以模拟`return "break"`Tk 的其他绑定+回调对的预期行为**。这个想法如下（下面的完整来源）：

1.  围绕希望创建一个包装器`callback`，即一个可调用的类实例
2.  当调用类实例时，运行`callback`并检查其结果。
    *   如果结果是`"break"`，则暂时劫持事件传播：`bind`小`Text`部件与绑定到 的相同事件`tag_bind`，回调为空。然后，在一段空闲时间之后，`unbind`.
    *   如果结果不是`"break"`：什么都不做，事件将`Text`自动传播到

这是一个完整的工作示例。我的具体问题是获得某种*超文本*行为：ctrl 单击超文本不应将插入点移动到单击位置。下面的示例显示，在包含在 中的同一个回调中`tag_bind`，我们可以将事件传播或不传播到`Text`小部件，只需返回`"break"`或另一个值。

```
try:
    # Python2
    import Tkinter as tk
except ImportError:
    # Python3
    import tkinter as tk

class TagBindWrapper:
    def __init__(self, sequence, callback):
        self.callback=callback
        self.sequence=sequence

    def __call__(self, event):
        if "break" == self.callback(event):
            global text
            self.bind_id=text.bind(self.sequence, self.break_tag_bind)
            return "break"
        else:
            return

    def break_tag_bind(self, event):
        global text
        # text.after(100, text.unbind(self.sequence, self.bind_id))
        text.after_idle(text.unbind, self.sequence, self.bind_id)
        return "break"

def callback_normal(event):
    print "normal text clicked"
    return "break"

def callback_hyper(event):
    print "hyper text clicked"
    if event.state & 0x004: # ctrl modifier
        return "break" # will not be passed on to text widget
    else:
        return # will be passed on to text widget

# setup Text widget
root=tk.Tk()
text = tk.Text(root)
text.pack()
text.tag_config("normal", foreground="black")
text.tag_config("hyper", foreground="blue")
text.tag_bind("hyper", "<Button-1>", TagBindWrapper("<Button-1>", callback_hyper))
text.tag_bind("normal", "<Button-1>", callback_normal)

# write some normal text and some hyper text
text.insert(tk.END, "normal text, ", "normal")
text.insert(tk.END, "hyper text (try normal-click and ctrl-click).", "hyper")

root.mainloop() 
```

有一种简化我找不到怎么做：用 替换包装器调用`TagBindWrapper("<Button-1>", callback_hyper)`，`TagBindWrapper(callback_hyper)`即简单地从传递给`"<Button-1>"`的对象获取事件“序列”字符串 ()的信息。是否可以？`event``__call__`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:10:17.067

好的，在~~tkint~~修改了一下之后，我找到了一个可行的解决方案。我认为问题在于标签可能不是 BaseWidget 的子类。

**我的解决方法：**

*   对标签进行单独的回调；在那里设置一个变量来跟踪哪个标签被点击
*   让文本小部件的事件处理程序根据此变量的内容决定要做什么

代码中的解决方法（抱歉在`global`这里使用，但我只是修改了我的问题简单示例......）：

```
#!/usr/bin/env python

try:
    from Tkinter import *
    from tkMessageBox import showinfo
except ImportError:
    from tkinter import *
    from tkinter.messagebox import showinfo

tag_to_handle = ''

def on_click(event, widget_origin='?'):
    global tag_to_handle
    if tag_to_handle:
        showinfo('Click', '"{}" clicked'.format(tag_to_handle))
        tag_to_handle = ''
    else:
        showinfo('Click', '"{}  " clicked'.format(widget_origin))

def on_tag_click(event, tag):
    global tag_to_handle
    tag_to_handle = tag

root = Tk()
text = Text(root)
text.pack()
text.insert(CURRENT, 'Some untagged text...\n')
text.bind('<Button-1>', lambda e, w='textwidget': on_click(e, w))
for i in range(5):
    tag_name = 'tag_{}'.format(i)
    text.tag_config(tag_name)
    text.tag_bind(tag_name, '<Button-1>',
        lambda e, w=tag_name: on_tag_click(e, w))
    text.insert(CURRENT, tag_name + ' ', tag_name)
root.mainloop() 
```

我希望这对遇到同样问题的人有所帮助。

当然，我仍然愿意接受更好的解决方案！

# sql-server - 使用用户定义的数据类型将 SQL Server 数据导入 Excel

> ID：13066774
> 
> 赞同：0
> 
> 时间：2012-10-25T10:39:30.330
> 
> 标签：sql-server, excel, import, sqldatatypes

我有一个 SQL Server，我想通过 Microsoft Query 将视图中的数据导入 Excel。

听起来很容易对吧？好吧，它不是因为某些列是用户定义的数据类型。

**tblSeller**：

*   ID：`int`
*   姓名：`nvarchar(50)`
*   国家：`CountryName:nvarchar(50)`

**tblBuyer**：

*   ID：`int`
*   姓名：`nvarchar(50)`
*   国家：`CountryName:nvarchar(50)`

**tbl销售**：

*   ID：`int`
*   卖家编号：`int`
*   买家编号：`int`

**销售**：

```
SellerName, SellerCountry, BuyerName, BuyerCountry 
```

（我想你明白我已经加入`tblSale`并且想要获得名称`tblSeller`和`tblBuyer`国家 - 由于这只是一个示例，我省略了所有其他可以使它成为有用视图的东西！！！）

该视图`vSales`在我的服务器上就像一个魅力：它显示了我的所有信息。当我想通过“来自 Microsoft Query”（数据 => 来自其他来源 => 来自 Microsoft Query）将其导入 Excel 2010 时，就会出现问题。具有用户定义数据类型的所有列都不可用！

只有当我直接通过“来自 SQL Server”（数据 => 来自其他来源 => 来自 SQL Server）导入数据时，我才会得到我的数据。但是由于我的真实视图包含数百列和近 200.000 行，因此我需要指定要导入的列。

简而言之：如何使用 Microsoft Query 将 SQL Server 视图中的数据导入 Excel 以便能够限制列数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:09:28.847

很抱歉误导你......我试图简化我的问题 - 这也消除了问题！

国家的定义是：st_CountryName:nvarchar(50)。

似乎 Excel 无法导入下划线是“名称”一部分的类型。很抱歉在我的问题中误导了大家 - 但希望其他人会发现这个答案有帮助！

# php - Jquery - $.(post) 数据响应与 PHP 不一致

> ID：13066780
> 
> 赞同：0
> 
> 时间：2012-10-25T10:39:57.693
> 
> 标签：php, javascript, jquery, codeigniter

jQuery代码：

```
var code = $('#code'),
     id = $('input[name=id]').val(),
     url = '<?php echo base_url() ?>mali_oglasi/mgl_check_paid';
     code.on('focusout', function(){
        var code_value = $(this).val();
        if(code_value.length != 16 ) {
            if ($('p[role=code_msg]').length != 0 ) $('p[role=code_msg]').remove() ;
            code.after('<p role=code_msg>Pogrešan kod je unešen.</p>');
        } else {
            if ($('p[role=code_msg]').length != 0 ) $('p[role=code_msg]').remove() ;
            $.post(url, {id : id, code : code_value}, function(data){
                if(data != 'TRUE'){
                    code.after('<p role=code_msg>Uneti kod je neispravan.</p>');
                } else {
                    code.after('<p role=code_msg>Status malog oglasa je promenjen.</p>');
                    code.after(create_image());
                    code.remove();
                }
        });
        }
     }); 
```

PHP（Codeigniter）代码：

```
function mgl_check_paid()
    {
        $code = $this->input->post('code');
        $id = $this->input->post('id');
        echo ($this->mgl->mgl_check_paid($code, $id)) ? 'TRUE' : 'FALSE';
    } 
```

问题如下：发送代码时，如果代码正确，PHP 部分将回**显 TRUE**，JS 将执行**ELSE**部分（发布后），但由于某种原因它没有这样做（它正在执行语句的第一部分)? 这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:57:55.267

在 php 代码中创建一个`exit`after echo 语句。

```
echo ($this->mgl->mgl_check_paid($code, $id)) ? 'TRUE' : 'FALSE';
exit; 
```

# php - 为什么 php 在 die() 之后继续解释；

> ID：13066782
> 
> 赞同：3
> 
> 时间：2012-10-25T10:39:58.267
> 
> 标签：php, syntax, interpreter

> **可能重复：**
> [停止 php 处理文件](https://stackoverflow.com/questions/1823635/stop-php-processing-file)

今天在玩PHP的时候发现了一件奇怪的事情

我有一个代码块，它可以完成工作。

```
$images = $wpdb->get_results($query);
    foreach($images as $image):
        $img = get_post($image->meta_value);
        print_r($img);
    endforeach; 
```

在这段代码之后，我试图死去；因为我需要分析输出。

```
$images = $wpdb->get_results($query);

            foreach($images as $image):
                $img = get_post($image->meta_value);
                print_r($img);
            endforeach;
    die;bla bla bla qit error !98123 
```

这意味着停在这条线上，不要走得更远。

但它去了，我认为作为一种脚本语言，它会逐行解析，不会追随`die;`

但事实上它会发生。

有人对此有任何解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T10:44:48.607

`die()`和`exit()`函数仅停止脚本的**执行**，这仅**在**文件被**完全解析**后发生。

如果您要停止**解析**自己，则必须使用`__halt_compiler()`，请参阅： http: [//php.net/manual/en/function.halt-compiler.php](http://php.net/manual/en/function.halt-compiler.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:43:52.963

如果那是您的实际代码，那么您有语法错误。PHP 在执行之前解析您的代码。意思是，使用 die 或 exit 无关紧要。如果那不是您的代码（也许您只是将其用作示例）并且事情仍然“奇怪”，您应该知道 die 的工作方式与[exit](http://www.php.net/manual/en/function.exit.php)完全相同，其中：

> 终止脚本的执行。关闭函数和对象析构函数**将始终被执行，即使 exit 被调用**。

# java - 如何克隆 JRResultSetDataSource？

> ID：13066783
> 
> 赞同：0
> 
> 时间：2012-10-25T10:40:00.560
> 
> 标签：java, jdbc, jasper-reports

我正在使用子报表，我的子报表数据源是 JRResultSetDataSource。详细信息显示在第一行，但不在第二行。要显示第二行，我需要克隆数据源。如何克隆结果集数据源？

我正在使用 JDBC 开发它。请给我建议。

感谢您查看这个。

# php - Symfony2，包含文件错误

> ID：13066784
> 
> 赞同：0
> 
> 时间：2012-10-25T10:40:06.680
> 
> 标签：php, symfony

我遇到了一个奇怪的问题。我只有两个 php 页面：`Index.html.php`并且只包含在项目`Header.php`上运行的 HTML 代码。`Symfony2`Index 页面包含一个非常正常的 include：`include "Header.php"`。问题是，当我第一次加载索引时，页面正常呈现，一切就绪，但第二次刷新页面时，出现此错误：

```
at ErrorHandler ->handle ('2', 'include(Header.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory', '', '30', array('template' => object(FileStorage), 'parameters' => array('app' => object(GlobalVariables)), '__template__' => object(FileStorage), 'this' => object(PhpEngine), 'app' => object(GlobalVariables), 'view' => object(PhpEngine)))
in wamp\www\**\src\**\**Bundle/Resources/views/Default/Index.html.php at line 30 

at include ()
in wamp\www\**\src\**\**Bundle/Resources/views/Default/Index.html.php at line 30 
at require ('')
in C:\wamp\www\**\app\cache\dev\classes.php at line 2490 

at PhpEngine ->evaluate (object(FileStorage), array('app' => object(GlobalVariables)))
in C:\wamp\www\**\app\cache\dev\classes.php at line 2440  

at PhpEngine ->render ('**Bundle:Default:Index.html.php', array())
in C:\wamp\www\**\app\cache\dev\classes.php at line 2778 

at PhpEngine ->renderResponse ('**Bundle:Default:Index.html.php', array(), null)
in C:\wamp\www\**\vendor\symfony\symfony\src\Symfony\Bundle\FrameworkBundle\Templating\DelegatingEngine.php at line 87

at DelegatingEngine ->renderResponse ('**Bundle:Default:Index.html.php', array(), null)
in C:\wamp\www\**\vendor\symfony\symfony\src\Symfony\Bundle\FrameworkBundle\Controller\Controller.php at line 99 

at Controller ->render ('**Bundle:Default:Index.html.php')
in C:\wamp\www\**\src\**\**Bundle\Controller\DefaultController.php at line 15

at DefaultController ->indexAction ()

at call_user_func_array (array(object(DefaultController), 'indexAction'), array())
in C:\wamp\www\**\app\bootstrap.php.cache at line 1421

at HttpKernel ->handleRaw (object(Request), '1')
in C:\wamp\www\**\app\bootstrap.php.cache at line 1385 

at HttpKernel ->handle (object(Request), '1', true)
in C:\wamp\www\**\app\bootstrap.php.cache at line 1561

at HttpKernel ->handle (object(Request), '1', true)
in C:\wamp\www\**\app\bootstrap.php.cache at line 612

at Kernel ->handle (object(Request))
in C:/wamp/www/**/web/app_dev.php at line 28 
```

我检查了文件，它确实与索引文件存在于同一目录中。我也检查了信箱。请注意，该项目是由 Symfony 制作的，并且一切都很顺利，但是当我创建一个 Sf2.1 项目并将文件放在上面时，我遇到了这个问题。我正在使用 Windows7 和 WampServer 2.1。我希望我已经提供了有关该问题的足够信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:55:50.340

在第一个请求 php 呈现新的模板，在下一个请求 php 从缓存中呈现模板。由于 Header.php 未缓存 php 抛出未找到文件异常。

使用渲染函数而不是包含。检查此[包括其他模板](http://symfony.com/doc/2.0/cookbook/templating/PHP.html#including-other-templates)，或者您可以将完整路径传递给 include()

# php - 通过相关表上存在的记录来收集 Orderdocrine

> ID：13066785
> 
> 赞同：0
> 
> 时间：2012-10-25T10:40:24.530
> 
> 标签：php, doctrine, symfony-1.4

我有表 QuoteOrder (id, user_id, foo, bar)

我也有表 QuoteOrderRecurrence（id、quote_order_id、日期等）

```
$q = Doctrine_Query::create()
->from('QuoteOrder qo')
->leftJoin('q.sfGuardUser sfg')
->where('qr.user_id = ?', $userId); 
```

是否可以按 QuoteOrderRecurrence 上的日期订购此查询。并非所有 QuoteOrders 都有 QuoteOrderRecurrence 记录，所以我想首先列出那些有 QuoteOrderRecurrence 记录的（按日期排序），然后是那些没有的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:21:39.733

Simply:

```
$q = Doctrine_Query::create()
->from('QuoteOrder qo')
->leftJoin('qo.sfGuardUser sfg')
->leftJoin('qo.QuoteOrderRecurrence qor')
->where('qr.user_id = ?', $userId)
->orderBy('qor.date DESC'); 
```

Check the [sqlfiddle](http://sqlfiddle.com/#!2/79bde/6/0).

# eclipse - 调试点在 Eclipse 中对远程应用程序不起作用

> ID：13066787
> 
> 赞同：2
> 
> 时间：2012-10-25T10:40:29.543
> 
> 标签：eclipse, debugging, weblogic

我有一个在 WebLogic 服务器上运行的 Java 应用程序。我在`doPost()`要在该服务器上调用的 servlet 的方法中保留了断点。

当我调用该 servlet 时，它不会在任何调试点停止。应用程序使用的 WebLogic 端口是`3304`. 当我在调试配置中提供此端口时，它会引发以下错误：

> 无法连接到远程虚拟机。拒绝连接。
> 连接被拒绝：连接

如果我提供任何其他端口，例如`3305`，`3303`它会打开调试视图，但无法调试应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:02:23.870

JVM 将仅在调试端口 3304 上运行。所以其他端口将无法工作。您得到的错误可能是因为，到此端口的调试连接已经由另一台机器或客户端建立，或者您启动的现有连接没有终止。当您单击更多详细信息> 时，您将从 eclipse 中获得确切的堆栈跟踪。

```
Quick Try: Restart the JVM.(Sorry for this tip if its a production server) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:00:39.817

您是否使用这些参数启动了 VM，这会公开正确的端口并以调试模式启动服务器。

```
-Xdebug -Xrunjdwp:transport=dt_socket,address=<port number> 
```

# xcode - presentViewController 出错 - AppDelegate 没有可见的@interface

> ID：13066788
> 
> 赞同：3
> 
> 时间：2012-10-25T10:40:30.547
> 
> 标签：xcode, login

我正在为 ipad 制作一个 splitview 应用程序，我需要显示一个不同的视图控制器以用于登录目的。我在 Appdelegate 的 didFinishLaunchingWithOptions 函数中调用它：

```
 LoginViewController *login = [[LoginViewController alloc] init];
[info setModalTransitionStyle: UIModalTransitionStyleCrossDissolve];
[self presentViewController:login animated:YES completion: nil]; 
```

但我在第三行收到错误“AppDelegate 的无可见 @interface 声明选择器 presentViewController”。

我要显示的视图控制器设置为 LoginViewController 类。我已经导入了所有课程。

我对编程很陌生，非常感谢任何帮助！

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:44:12.743

错误消息说的是该类`AppDelegate`不包含名为`presentViewController`. 实际上，该方法属于`UIViewController`类。

你应该做什么取决于你是如何创建项目的，它是使用导航控制器、标签栏控制器还是简单的视图控制器。

从您的评论中，我了解到您使用基于 Window 的模板（或 Empty 应用程序）来创建您的项目。在这种情况下，`application:didFinishLaunching:`你应该有这样的东西：

```
self.login = [[LoginViewController alloc] init];
[self.window addSubview:self.login.view]; 
```

并将以下声明添加到您的 AppDelegate.h 中：

```
@property (nonatomic, strong) LoginViewController* login; 
```

如果这似乎不适用于您的情况，请发布您的定义`application:didFinishLaunching:`

# php - 主机名上的 preg_match

> ID：13066789
> 
> 赞同：2
> 
> 时间：2012-10-25T10:40:32.853
> 
> 标签：php, regex, preg-match, expression

我正在尝试创建一个与 url 中的主机名匹配的正则表达式。我希望它访问以下主机名：- www.site.nl - site.nl

我希望它返回 site.nl

我使用以下正则表达式进行了此操作： (?(?<=www.))site.(?:nl|be|eu)

但是，当我在 something.site.nl 上使用此正则表达式时，它也会返回 site.nl。这不是我想要的。当 site.nl 之前没有任何内容或有 www 时，我只想要匹配。在它之前。

我尝试了很多不同的表达方式，但不知道我该怎么做。

我希望我的问题很清楚，你们可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:56:33.097

```
^(?:www\.)?(site\.(?:nl|be|eu))$ 
```

应该管用。

（不要忘记点在 REs 中的特殊含义……）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:07:33.630

请使用这个：

```
/^(www\.)?(site\.(nl|be|eu))$/ 
```

# python - 面板类和它们之间的切换

> ID：13066795
> 
> 赞同：0
> 
> 时间：2012-10-25T10:40:52.667
> 
> 标签：python, wxpython

使用我的代码，我现在决定需要多个屏幕来在按钮和背景将发生变化的位置之间切换我认为最简单的方法是定义面板类，然后创建一个框架，但我没有知道如何将框架上的所有面板连接在一起。我知道每个面板上我想要哪些按钮和图像，但我不知道您如何定义面板并通过按钮单击链接它们

```
import os
import pygame
import wx
import os
import game

class MainPanel(wx.Panel):
    def __init__(self,parent,id):
        image_file='main_screen.jpg'#loading an image file from the folder
        bmp=wx.Bitmap(image_file)
        self.bitmap = wx.StaticBitmap(self, wx.ID_ANY, bmp, (0, 0))

        PlayButton=wx.Bitmap('play.jpg', wx.BITMAP_TYPE_ANY)
        self.PlayButton=wx.BitmapButton(self.bitmap, -1, PlayButton, pos=(190,300))
        self.PlayButton.Bind=(wx.EVT_BUTTON, self.opengame)

        RulesButton=wx.Bitmap('rules.jpg', wx.BITMAP_TYPE_ANY)
        self.RulesButton=wx.BitmapButton(self.bitmap, -1, RulesButton, pos=(190,370))
        self.RulesButton.Bind=(wx.EVT_BUTTON, self.openrules)

        ControlsButton=wx.Bitmap('controls.jpg', wx.BITMAP_TYPE_ANY)
        self.ControlsButton=wx.BitmapButton(self.bitmap, -1, ControlsButton, pos=(190,440))
        #self.ControlsButton.Bind=(wx.EVT_BUTTON, self.closeMe)

        ExitButton=wx.Bitmap('exit.jpg', wx.BITMAP_TYPE_ANY)
        self.ExitButton=wx.BitmapButton(self.bitmap,-1,ExitButton,pos=(190,510))
        self.ExitButton.Bind(wx.EVT_BUTTON, self.closeexit) 

        self.Bind(wx.EVT_CLOSE, self.closewindow)

class ControlPanel(wx.Panel):
    def __init__(self,parent,id):
        wx.Panel.__init__(self, parent, id=wx.ID_ANY)
        image_file='controls.jpg'#loading an image file from the folder
        bmp=wx.Bitmap(image_file)
        self.bitmap2 = wx.StaticBitmap(self, wx.ID_ANY, bmp, (0, 0))

        BackButton=wx.Bitmap('back.jpg',wx.BITMAP_TYPE_ANY)
        self.BackButton=wx.BitmapButton(self.bitmap2,-1,BackButton, pos=400,100)
        self.BackButton.Bind=(wx.EVT_BUTTON, self.goback)

class RulesPanel(wx.Panel):
    def __init__(self,parent,id):
        wx.Panel.__init__(self, parent, id=wx.ID_ANY)
        image_file='rules.jpg'#loading an image file from the folder
        bmp=wx.Bitmap(image_file)
        self.bitmap3 = wx.StaticBitmap(self, wx.ID_ANY, bmp, (0, 0))

        BackButton=wx.Bitmap('back.jpg',wx.BITMAP_TYPE_ANY)
        self.BackButton=wx.BitmapButton(self.bitmap3,-1,BackButton, pos=400,100)
        self.BackButton.Bind=(wx.EVT_BUTTON, self.goback)

class MainFrame(wx.Frame):
    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Compsci Vs. Sheep: The Game',size=(640,640))

    def openrules(self,event):

    def opengame(self):
    game.start()

    def opencontrols(self,event):
    ?
    def goback(self,event):
    ?
    def closewindow(self,event):
    self.Destroy()
    pygame.mixer.quit()
def closeexit

if __name__=='__main__':
    pygame.mixer.init(frequency=22050, size=-16, channels=2, buffer=4096)
    pygame.mixer.music.load("exorcist.ogg")
    pygame.mixer.music.play(-1)#music playing in program
    app=wx.PySimpleApp()
    frame=menu(parent=None,id=-1)
    frame.Show()#shows the screen
    app.MainLoop() 
```

这是我的新代码，仍然不起作用

```
import os
import pygame
import wx

def switch_to(name):
    print "Pseudo switch",name

class MainFrame(wx.Frame):
    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Compsci Vs. Sheep: The Game',size=(640,640))

        self.box = wx.BoxSizer()

        self._panels = {}
        self._panels['main'] = MainPanel(self, -1)
        self._panels['rules'] = RulesPanel(self, -1)
        self._panels['rules'].Hide()

        self.box.Add(self._panels['main'],1,wx.EXPAND)
        self.box.Add(self._panels['rules'],1,wx.EXPAND)

        self.SetSizer(self.box)

    def switch_panel(self, name):
        print "Switching to",name
        return
        for key, panel in self._panels.iteritems():
            if key != name:
                panel.Hide()
            else:
                panel.Show(True)        
        self.Layout()

class MainPanel(wx.Panel):
    def __init__(self,parent,id):
        wx.Panel.__init__(self,parent,id=wx.ID_ANY)
        image_file='main_screen.jpg'#loading an image file from the folder
        bmp=wx.Bitmap(image_file)
        self.bitmap = wx.StaticBitmap(self, wx.ID_ANY, bmp, (0, 0))

        PlayButton=wx.Bitmap('play.jpg', wx.BITMAP_TYPE_ANY)
        self.PlayButton=wx.BitmapButton(self,-1, PlayButton, (190,300), (244,60))

        RulesButton=wx.Bitmap('rules.jpg', wx.BITMAP_TYPE_ANY)
        self.RulesButton=wx.BitmapButton(self, -1, RulesButton, (190,300), (244,60))
        self.RulesButton.Bind=(wx.EVT_BUTTON, parent.switch_panel)

class RulesPanel(wx.Panel):
    def __init__(self,parent,id):
        wx.Panel.__init__(self, parent, id=wx.ID_ANY)
        image_file='rules.jpg'#loading an image file from the folder
        bmp=wx.Bitmap(image_file)
        self.bitmap = wx.StaticBitmap(self, wx.ID_ANY, bmp, (0, 0))

if __name__=='__main__':
    pygame.mixer.init(frequency=22050, size=-16, channels=2, buffer=4096)
    pygame.mixer.music.load("exorcist.ogg")
    pygame.mixer.music.play(-1)#music playing in program
    app = wx.PySimpleApp()
    frame = MainFrame(parent=None,id=-1)
    frame.Show()#shows the screen
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:51:48.990

您可以在框架构造函数中创建所有面板并将它们放在字典中。然后，您可以创建一个名为的函数，该函数`switch_panel`隐藏除您希望显示的面板之外的所有面板。例子：

```
def MyFrame(wx.Frame):
    # Dict for storing the panels.
    _panels = {}

    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id, 'Example')

        # Create all the panels.
        self._panels['main'] = MainPanel(self, -1)
        self._panels['control'] = ControlPanel(self, -1)
        self._panels['rules'] = RulesPanel(self, -1)

        # Hide all the panels initially.
        for key, panel in self._panels.iteritems():
            panel.Hide()

        # Show the main panel.
        self.switch_panel('main')

    def switch_panel(self, name):
        """Function for switching between the frame's panels."""
        for key, panel in self._panels.iteritems():
            if key != name:
                panel.Hide()
            else:
                panel.Show(True) 
```

现在，每当您`switch_panel`使用“main”、“control”或“rules”调用时，都会显示该面板，而其他面板将被隐藏。

* * *

**如何`switch_panel`点击按钮？**

将事件处理程序绑定到按钮，例如

```
my_button = wx.Button(self, -1, 'Click me!')

my_button.bind(
    wx.EVT_BUTTON,
    lambda e: self.switch_panel('control')
) 
```

# c - 我怎么知道我指向的是c中的文件还是目录

> ID：13066797
> 
> 赞同：3
> 
> 时间：2012-10-25T10:41:00.703
> 
> 标签：c, directory

我们被要求编写 ac 程序，将所有内容从 dir 复制到另一个，即使它有一个嵌套目录....我可以将文件从一个目录复制到另一个，但问题是我怎么知道我是现在指向另一个目录，我应该访问它并将文件放入其中......？

我主要使用opendir、closedir和read dir

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:46:50.157

作为第一种方法，检查您的环境是否支持结构`d_type`中的字段`dirent`。如果失败，您需要调用`stat()`每个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:47:17.880

您可以使用[`stat()`](http://linux.die.net/man/2/stat)来确定文件系统对象的类型。请注意，它`stat()`接受文件的路径，因此您需要构造要查询的文件系统对象的路径，而不是仅使用返回的`d_name`成员。`struct dirent*``readdir()`

# asp.net-mvc - 从头开始使用 MVC 4 开发个人博客

> ID：13066799
> 
> 赞同：0
> 
> 时间：2012-10-25T10:41:06.377
> 
> 标签：asp.net-mvc, design-patterns, database-design, blogs, web-site-project

我想使用 ASP.NET MVC 4 开发一个个人博客网站。

我知道我可以使用 WordPress/Joomla/Orchard/Umbraco/Funnelweb 等，而不是重新发明轮子，但我真的很想自己尝试一下。

我不希望我的网站看起来像一些披头士时代的古老遗迹。我看到像 Akismet/Prettify/Markdown/nrelate 这样的插件为您的博客添加了惊人的功能。但是我不确定是否可以在我的自定义应用程序中使用其中的任何一个，因为它们中的大多数都是基于 PHP 的。我想留在微软的屋檐下，实现 HTML5、CSS3 Silverlight5 和 WCF 4.0 等技术，以及 ASP.NET MVC 4。（至少这是我打算做的）

我知道我需要开发一个可扩展的数据库设计，以适应未来的新功能。此外，对 SEO 和跨浏览器功能的过度关注是压倒性的。个人博客的永久链接、内部导航、帖子内嵌入视频等，听起来就像在一天内建造罗马

如果您能亲自指导我或指导我找到适当的资源，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:08:26.613

我现在正在自己做这件事。它还没有完成，但它会给你一个想法：[MvcBloggy](https://github.com/tugberkugurlu/MvcBloggy)。

另外，请查看[FunnelWeb](https://bitbucket.org/FunnelWeb/dev/src)源代码。我相信它是用 C# 编写的并使用 ASP.NET MVC 3，但它是一个非常好的资源并且易于理解。

# sql - 重命名每个表中的列

> ID：13066802
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:41:12.520
> 
> 标签：sql, sql-server

我有一个带有 3 个表（`Table1`和`Table2`）`Table3`的数据库。`Table1 and 3`有一个名为“MyColumn”的列如何（如果可能）将所有“MyColumn”重命名为新名称“MyNewName” ？

在我的项目中，它的表要多得多（不仅仅是 3 个）

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:46:54.663

如果您正好有 3 个表，为什么不使用 3 个单独的 ALTER TABLE 语句？

如果您在同一个数据库中有更多表，那么您可以执行以下操作：

```
SELECT 'ALTER TABLE ' +
    t.Table_Name +
    ' Rename column ' +
c.Column_Name +
';'
FROM Information_Schema.tables t
    INNER JOIN Information_Schema.columns C
    ON t.Table_name = c.Table_name
WHERE c.Column_Name = 'MyColumn' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:46:06.177

尝试这个 -

ALTER TABLE Table1 将列 MyColumn 重命名为 MyNewName；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:42:55.520

```
SP_RENAME 'TableName.[Your_Old_ColumnName]' , '[Your_New_ColumnName]', 'COLUMN' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:43:41.137

尝试这个

```
alter table table1,table3 mycolumn change mynewcolumn 
```

# android - 检查用户是否登录到 twitter

> ID：13066803
> 
> 赞同：4
> 
> 时间：2012-10-25T10:41:17.613
> 
> 标签：android, twitter

在我的应用程序中，用户可以通过按下按钮来发布推文。我正在使用以下代码：

```
boolean found = false;
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, "Blah blah");
final PackageManager pm = getPackageManager();
final List<?> activityList = pm.queryIntentActivities(intent, 0);
int len = activityList.size();
for (int i = 0; i < len; i++) {
    final ResolveInfo app = (ResolveInfo) activityList.get(i);
    if ("com.twitter.android.PostActivity".equals(app.activityInfo.name)) {
        found = true;
        intent.addCategory(Intent.CATEGORY_LAUNCHER);
        intent.setClassName("com.twitter.android", "com.twitter.android.PostActivity");
        startActivity(intent);
        break;
    }
}
if(!found)
    showDialog(NO_APP); 
```

该代码运行良好，但我想为其添加一个功能。当用户没有登录 twitter 时，我想显示一条消息，说明他没有登录。代码，截至目前，只是将用户引导到 twitter 的登录页面。如何禁用此功能并获得所需的输出？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:49:35.183

为此，您可以首先检查您是否拥有 twitterToken 和 twitterTokenSecret 。

试试这种方式。可能会有所帮助:)

```
if(twitterToken!=null && twitterTokenSecret!=null 
    && twitterToken.length()>0 && twitterTokenSecret.length()>0){

  //do your work

}else{
     //show alert dialog

} 
```

# python - Python Cgi 编程权限

> ID：13066804
> 
> 赞同：1
> 
> 时间：2012-10-25T10:41:20.497
> 
> 标签：python, apache, cgi, cgi-bin

我正在使用 python cgi-script 并将其用于我的服务器上的几个网页，当权限手动设置为 755 时一切正常。

但是当我使用一些软件进行编辑时，例如 coda 。它以不同的权限上传，所以我必须再次手动更改权限。每次我都讨厌这样做

.htaccess 文件中有这个东西

```
Options +ExecCGI
AddHandler cgi-script .py 
```

如果您对此问题有任何其他替代方案或解决方案，以便我可以为每个 .py 脚本或类似的东西设置 chmod 755。一定要告诉。就像我可以运行一次然后执行相同操作的任何 shell 脚本一样。我正在使用 ubuntu 12 服务器

我试过这个，但是，

```
#!/bin/bash
file=`find *.py`
chmod 775 $file 
```

它可以批量使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:38:24.940

上传时设置的权限似乎可以在 coda.xml 中[配置](http://www.raisedeyebrow.com/blog/2009/06/strange-permissions-coda-file-uploads)。

或者，您可以`inotifywait`在服务器上使用（来自[inotify-tools](https://github.com/rvoicilas/inotify-tools/wiki)）在脚本被修改时添加可执行位：

```
$ inotifywait -c -m -e modify -e create -e attrib  path/to/cgi-bin/ \ 
| while read pth; do
    chmod +x "$(echo $pth | awk -F, '{print $1$3}')"
done 
```

或者只是`while /bin/true; do sleep 5 && chmod 755 path/to/cgi-bin/*.py; done`- 它不应该那么重要。

如果您喜欢冒险，您还可以使用 Python 的内置 http 服务器模块和`CGIHTTPRequestHandler`带有重载[`is_executable()`](http://hg.python.org/cpython/file/cbdd6852a274/Lib/http/server.py#l977)方法的 a。

不过，我很想知道这是否可以完全从 apache 配置中处理。干杯。

# java - servlet中finally块中的jms调用会影响性能吗

> ID：13066813
> 
> 赞同：0
> 
> 时间：2012-10-25T10:41:51.870
> 
> 标签：java, jakarta-ee, servlets, jms

将在 doPost 的 finally 块中调用 jms 会影响性能..响应写入 try 块并刷新。之后，终于进行了 jms 调用..是否会在 jms 调用之前传递响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:47:00.453

> 是否会在 jms 调用之前传递响应？

在`finally`执行 blobk 之前，控件不会从方法返回。

但是，首先发生什么取决于可能的标准，例如：

1.  网络流量

2.  系统性能

3.  操作系统调度（可能）

4.  ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:38:21.217

这取决于 Servlet 容器是否正在缓冲响应。它通常会这样做，因此它可以评估 Content-Length 并为您设置响应标头。但是在 finally 块中调用的任何东西通常都*必须*调用，因此担心它的性能或及时性是完全无关紧要的。你别无选择。

# asp.net-mvc - 无法在 MVC 3.0 Razor 中投射类型的对象

> ID：13066824
> 
> 赞同：0
> 
> 时间：2012-10-25T10:42:32.903
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, razor

我是新的 MVC 3.0 Razor。我正在使用 LINQ 来获取配置文件的详细信息。

在我正在使用的控制器中

```
 var q = from m in networks.Entities
                    join o in networks.EntityTypes on m.EntityTypeIdFk 
                    where m.Status == 1
                    orderby m.EntityName
                    select new { m.EntityName,m.EntityDescription,o.EntityTypeName };

            ViewBag.EntitiesName = q.ToList(); 
```

在查看即时通讯使用

```
@foreach (var res in ViewBag.EntitiesName)
    {
        <tr>
            <td>@res.EntityName</td>
            <td>@res.EntityDescription</td>
            <td>@res.EntityTypeName</td>
        </tr>
    } 
```

在@res 我得到结果数组。但我仍然收到错误“无法投射类型的对象”

请帮我解决这个问题。

谢谢，萨洛尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:59:25.523

```
public ActionResult SomeAction()
    {
         //ur linq here
        var model = q.ToList();
        return View(model);
    } 
```

在视野中

```
@model List<MVCSAMPLE.Models.Entities> 
@foreach (var item in Model)
{
    <tr>
        <td>@item.EntityName</td>
        <td>@item.EntityDescription</td>
        <td>@item.EntityTypeName</td>
        <td>@item.IndustryName</td>
        <td>@item.Name</td>
    </tr>
} 
```

举个例子。尝试指定您的列表的类型。另一种方法是在你的模型和视图中增加 List 类型的属性

```
@model List<MVCSAMPLE.Models.MyModel> 
@foreach (var item in Model.PropertyWhithListType)
{
    <tr>
        <td>@item.EntityName</td>
        <td>@item.EntityDescription</td>
        <td>@item.EntityTypeName</td>
        <td>@item.IndustryName</td>
        <td>@item.Name</td>
    </tr>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T04:16:36.447

我通过使用解决了我的问题

```
select new MVCSAMPLE.Models.Entities 
{ 
    EntityName = m.EntityName, 
    EntityDescription = m.EntityDescription, 
    EntityTypeName = o.EntityTypeName
} 
```

谢谢大家。

# sql - 将全选添加到下拉列表

> ID：13066828
> 
> 赞同：3
> 
> 时间：2012-10-25T10:42:49.580
> 
> 标签：sql, sql-server-2008, coldfusion, coldfusion-8

这是我的查询：

```
 <cfquery name="qry" datasource="#variables.staffDs#">
  SELECT
    firstname + ' ' + surname name, userid, mobileno, extension
  FROM
    currentstaff
  WHERE
    (mobileno IS NOT NULL OR
     Left(LTrim(extension), 2) = '07')
 </cfquery> 
```

这是我的 ColdFusion 下拉框：

```
 <select name="to" id="to">
  <option value=""> -- Select -- </option>
  <option style="font-weight: bold" value="">Send to All</option>
  <cfoutput query="people">
    <option value="#qry.userid#">#qry.name#</option>
  </cfoutput>
  </select> 
```

所有人的姓名都显示在下拉框列表中。

我想做的是在下拉框顶部添加一个选项到“发送给所有人”以选择所有用户，我不知道该怎么做。

如果有必要，我想将我可能需要的任何额外 SQL 合并到我当前的查询中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:47:00.173

如果可能的话，你只需要像这样改变，只需添加

```
Select 'Select All'
 union 
```

根据您的查询，最终代码如

```
 Select 'Select All','','',''
 union
 SELECT
    firstname + ' ' + surname name, userid, mobileno, extension
  FROM
    currentstaff
  WHERE
    (mobileno IS NOT NULL OR
     Left(LTrim(extension), 2) = '07') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:51:39.947

```
 Select 'Select All', '','',''
 union
 SELECT
    firstname + ' ' + surname name, userid, mobileno, extension
  FROM
    currentstaff
  WHERE
    (mobileno IS NOT NULL OR
     Left(LTrim(extension), 2) = '07') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:03:33.067

像您的示例所示，是否有理由在 SQL 中而不是在 HTML 中执行此操作？我曾在“全选”或“请选择”合并到查询中的系统上工作过，缺点是您不能将该查询重新用于其他目的，因为查询现在生成的内容仅在HTML 下拉菜单。在我看来，获取人员列表是一个问题，而与这些人一起构建 UI 和“全选”选项则是另一个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T11:45:16.153

我不会添加Query选项，我将一个额外的选项行添加到HTML中，何时`SELECT ALL`选择我将更新我的查询以无法过滤。

```
<select name="to" id="to">
  <option value=""> -- Select -- </option>
  <option value="ALL">SELECT ALL</option>
  <option style="font-weight: bold" value="">Send to All</option>
  <cfoutput query="people">
    <option value="#qry.userid#">#qry.name#</option>
  </cfoutput>
</select> 
```

# asp.net - WebClient.DownloadString() 方法特殊字符问题

> ID：13066834
> 
> 赞同：1
> 
> 时间：2012-10-25T10:43:09.973
> 
> 标签：asp.net

我已经从 WCF 服务返回 ToBase64 字符串。我使用 downloadstring() 方法通过 WebClient（在 .net 中）调用了该方法。我得到了结果，但在结果中添加了一些特殊字符（\，，\，/“等）。（即非 Base64）

如果我通过创建 WCF 客户端来调用方法，那么它会返回正确的字符串。但在我的应用程序中，我需要通过 WebClient 调用。

获得正确字符串（base64）的解决方案是什么？

# testing - cocos2d应用功能测试

> ID：13066835
> 
> 赞同：1
> 
> 时间：2012-10-25T10:43:11.200
> 
> 标签：testing, cocos2d-iphone, functional-testing, ocunit

我正在编写 Cocos2d 应用程序并寻找一种编写功能测试的方法。

我真正需要的是在模拟器上启动应用程序并检查我的场景是否包含特定节点。像这样的东西

```
@implementation MenuTest

- (void) setUp
{
    // Launch app on the simulator
}

- (void) tearDown
{
    // Shut simulator down
}

- (void) testMenuContainsExitItem
{
    CCScene *scene = [[CCDirector sharedDirector] runningScene];
    CCNode *exit = [scene getChildByTag:EXIT_ITEM];

    STAssertNotNil(exit, @"No exit item found");
}

@end 
```

那么，有没有办法在正在运行的应用程序上执行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:51:13.100

您在 setup 方法中创建和设置场景，然后使用 test* 方法检查场景是否按照规范设置。

请务必在设置中使用您也从游戏代码中调用的函数。就像是：

```
-(void) setup
{
    CCScene* scene = [FirstScene setup];
    [[CCDirector sharedDirector] runWithScene:scene];
} 
```

然后执行测试：

```
- (void) testMenuContainsExitItem
{
    CCScene* scene = [CCDirector sharedDirector].runningScene;
    CCNode *exit = [scene getChildByTag:EXIT_ITEM];

    STAssertNotNil(exit, @"No exit item found");
} 
```

您不需要也不应该在场景代码中添加任何 OCUnit 测试代码（即 STAssert*）。因为如果没有 OCUnit，您的场景将无法在常规构建中编译。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T11:04:13.580

您可以为应用程序中的所有 CCNode 定义不同的标签。例如在接口部分添加类似的东西：

```
#define kExitNodeTag = 400; 
```

初始化时：

```
-(id)init {
    if(self=[super init]) {
         ...
         self.tag = kExitNoteTag;
         ...
    }
} 
```

您可以在每个 CCScene 中初始化后检查节点是否存在：

```
-(void)onEnter {
    CCNode *exit = [scene getChildByTag:kExitNodeTag];
    STAssertNotNil(exit, @"No exit item found");
} 
```

# javascript - Google 可视化 API - 基于选择的多个图表

> ID：13066836
> 
> 赞同：0
> 
> 时间：2012-10-25T10:43:23.923
> 
> 标签：javascript, jquery, google-visualization

我对 Google Visualization Charts API 很陌生。我正在尝试根据下拉选择显示不同的图表。如果我添加另一个绘图功能，图表不会显示。请在下面找到我尝试过的小提琴。

[http://jsfiddle.net/meetravi/PFa5h/5/](http://jsfiddle.net/meetravi/PFa5h/5/)

JS代码：

```
 $(document).ready(function(){
   var selectedVal = "";
   $('#dashboard-chart-type').change(function(){
     selectedVal = $(this).val();
     alert(selectedVal);
     switch(selectedVal) {

      case "average":
          $('#visualization').empty();
          init();
          break;
      case "total_install":
          debugger;
          $('#visualization').empty();
          init();
          break;
      case "total_uninstall":
          debugger;
          $('#visualization').empty();
          init();
          break;
      default:
          $('#visualization').empty();
          init();
          break;
  }
});

if(selectedVal==""){
    init();
}

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:31:37.913

经过长时间的斗争，使多个图表基于选择工作。问题是加载多个图表，您需要通过回调调用绘制可视化函数。我从谷歌群组中找到了这个有用的信息。

然后我添加了一些功能`init()`，`init2()`...等来加载不同的图表。这里我们需要注意的一件事是调用`drawvisualisation()`内部`init()`方法，它应该只使用**google.setOnLoadCallback(drawVisualization());调用。**而是调用**google.setOnLoadCallback(drawVisualization);** 如谷歌游乐场示例中所述。

```
 function init(){
     google.setOnLoadCallback(drawVisualization());
 }
 function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Year', 'Austria', 'Bulgaria', 'Denmark', 'Greece'],
    ['2003',  1336060,    400361,    1001582,   997974],
    ['2004',  1538156,    366849,    1119450,   941795],
    ['2005',  1576579,    440514,    993360,    930593],
    ['2006',  1600652,    434552,    1004163,   897127],
    ['2007',  1968113,    393032,    979198,    1080887],
    ['2008',  1901067,    517206,    916965,    1056036]
]);

// Create and draw the visualization.
new google.visualization.BarChart(document.getElementById('visualization')).
    draw(data,
    {title:"Yearly Coffee Consumption by Country",
        width:600, height:400,
        vAxis: {title: "Year"},
        hAxis: {title: "Cups"}}
);
} 
```

当我尝试使用代码**google.setOnLoadCallback(drawVisualization)**时未发生呼叫，该代码因不显示而破坏了我的图表。

这是我的小提琴，它基于选择工作。 [http://jsfiddle.net/meetravi/PFa5h/6/](http://jsfiddle.net/meetravi/PFa5h/6/)

在上面的小提琴中，我加载了不同类型的图表，如 Line、Column、Stacked 等......

# android - android中的图像模糊（出现错误）

> ID：13066842
> 
> 赞同：0
> 
> 时间：2012-10-25T10:43:45.420
> 
> 标签：android, image, image-processing, blur

嗨，我正在尝试在 android 中实现图像模糊，我喜欢它的很多示例，但我正在尝试使用此代码

```
private Bitmap getBlurBitmap(Bitmap bitmap, int radius)
    {
        int w,h,total;

        if(bitmap == null){
            System.err.println(" <== BitMap is Null ==> ");
            return null;
        }

        w=bitmap.getWidth();
        h=bitmap.getHeight();

         for (int y = 0; y < h; ++y) {
             for (int x = 0; x < w; ++x) {
                 total = 0;
                 for (int ky = -radius; ky <= radius; ++ky){
                     for (int kx = -radius; kx <= radius; ++kx){
                        // total += source(x + kx, y + ky);

                         int _tempx=x + kx;
                         int _tempy=y + ky;

                         if(_tempx < 0 )
                             _tempx=0;
                         if(_tempx > w )
                            _tempx = w - kx;

                         if(_tempy < 0 )
                             _tempy=0;
                         if(_tempy > h )
                             _tempy = h - ky;

                         total += bitmap.getPixel(_tempx, _tempy);
                     }
                 }
                 bitmap.setPixel(x, y,(int)( total / (radius * 2 + 1) ^ 2));
             }
         }
        return bitmap;
    } 
```

但是当我尝试运行时，它的显示`FATAL EXCEPTION`就像

```
03-18 04:41:54.296: E/AndroidRuntime(16347): FATAL EXCEPTION: main
03-18 04:41:54.296: E/AndroidRuntime(16347): java.lang.IllegalStateException
03-18 04:41:54.296: E/AndroidRuntime(16347):    at android.graphics.Bitmap.setPixel(Bitmap.java:856)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at com.org.PhotoAppSimpleBlureActivity.getBlurBitmap(PhotoAppSimpleBlureActivity.java:81)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at com.org.PhotoAppSimpleBlureActivity.onClick(PhotoAppSimpleBlureActivity.java:93)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at android.view.View.performClick(View.java:2485)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at android.view.View$PerformClick.run(View.java:9080)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at android.os.Handler.handleCallback(Handler.java:587)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at android.os.Looper.loop(Looper.java:130)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at android.app.ActivityThread.main(ActivityThread.java:3683)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at java.lang.reflect.Method.invokeNative(Native Method)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at java.lang.reflect.Method.invoke(Method.java:507)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:850)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:608)
03-18 04:41:54.296: E/AndroidRuntime(16347):    at dalvik.system.NativeStart.main(Native Method) 
```

我不知道有什么问题或我想念什么，有人可以帮我解决这个问题吗？我参考了这个[例子](http://www.blackpawn.com/texts/blur/default.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:52:55.157

在[文档](http://developer.android.com/reference/android/graphics/Bitmap.html#setPixel%28int,%20int,%20int%29)中，您可以看到`setPixel`throws `IllegalStateException`when`Bitmap`是不可变的。您需要一个可变位图。获得一个的简单方法（许多之一）是：

```
bitmap = bitmap.copy(bitmap.getConfig(), true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:49:49.923

```
 bitmap.setPixel(x, y,(int)( total / (radius * 2 + 1) ^ 2)); 
```

把上面的代码这样

```
try
        {
             bitmap.setPixel(x, y,(int)( total / (radius * 2 + 1) ^ 2));
        }

        catch (IllegalStateException e) {
            // TODO: handle exception
        }
        catch (Exception e) {
            // TODO: handle exception
        } 
```

我希望它会正常工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T09:57:46.587

试试这个

```
private Bitmap getBlurBitmap(Bitmap src) {

    final int widthKernal = 5;
    final int heightKernal = 5;

    int w = src.getWidth();
    int h = src.getHeight();

    Bitmap blurBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);

    for (int x = 0; x < w; x++) {
        for (int y = 0; y < h; y++) {

            int r = 0;
            int g = 0;
            int b = 0;
            int a = 0;

            for (int xk = 0; xk < widthKernal; xk++) {
                for (int yk = 0; yk < heightKernal; yk++) {
                    int px = x + xk - 2;
                    int py = y + yk - 2;

                    if (px < 0) {
                        px = 0;
                    } else if (px >= w) {
                        px = w - 1;
                    }

                    if (py < 0) {
                        py = 0;
                    } else if (py >= h) {
                        py = h - 1;
                    }
                    int intColor = src.getPixel(px, py);
                    r += Color.red(intColor);
                    g += Color.green(intColor);
                    b += Color.blue(intColor);
                    a += Color.alpha(intColor);
                }
            }
            blurBitmap.setPixel(x, y,
                    Color.argb(a / 25, r / 25, g / 25, b / 25));
        }
    }
    return blurBitmap;
} 
```

# ios - iPad MP4 嵌入 - 可能的“目标”参数值......？

> ID：13066848
> 
> 赞同：2
> 
> 时间：2012-10-25T10:43:59.470
> 
> 标签：ios, object, embed, target, mp4

我有一个网页，其中包含许多以缩略图大小嵌入的 MP4 视频文件，可以播放 - 通过减少 OBJECT / EMBED 代码中的嵌入尺寸来实现大小（可能很糟糕）。

在 iPhone 上，当在这些微型嵌入视频 (200x130) 上按下 PLAY 按钮时，视频开始在我的页面顶部以全尺寸窗口播放。当视频结束或用户完成时，拇指页面会自动返回/在下方等待。

我的问题是在 iPad 上，视频开始在微型窗口中播放 - 播放器可以选择放大到全尺寸的播放器窗口，但这并不理想。

我知道发生这种情况是因为我减少了嵌入中的宽度和高度设置，所以我正在寻求一种方法来实现我在 iPad 上自动在 iPhone 上获得的相同结果 - 即。当按下播放按钮时，视频开始在我的页面顶部以全尺寸播放器播放......

对象/嵌入中是否有一个参数可以在单击“播放按钮”/拇指时强制启动全尺寸播放器窗口？

我有一个“修复”，将拇指图像链接到包含全尺寸对象/播放器的新页面，但这需要额外的用户“按下”和后退步骤才能转到原始拇指页面，我想避免

**是否有人对param name="target" value="myself"**标签有一组可能的值，因为我认为这可能是解决我的问题的方法，但是搜索可能的值是空白。

感谢您的时间和帮助

# jqgrid - 如何在 jqGrid 中添加新的行记录？

> ID：13066849
> 
> 赞同：0
> 
> 时间：2012-10-25T10:44:02.480
> 
> 标签：jqgrid, jqgrid-inlinenav

我正在使用 jqGrid。我想添加记录内联导航，所以这个链接[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)？当我单击导航栏中的添加新行图标时。网格就像视图模式视图。

```
<div id="pager"></div>
<table id="ward"></table>
<br />
<script src="js/rowedex3.js" type="text/javascript"> </script>
<script type="text/javascript">
jQuery("#ward").jqGrid({
    mtype : 'GET',
    url : "listAllWards.html",
    datatype : "json",
    colNames : [ 'Id', 'Ward Type', 'Description'],
    colModel : [ {
        name : 'id',
        index : 'id',
        editable:true,
        width : 50
    }, {
        name : 'name',
        index : 'name',
        width : 150,
        editable:true,
    }, {
        name : 'decsription',
        index : 'decsription',
        width : 100,
        editable:true,
    }],
    rowNum : 5,
    rowList : [ 5, 10, 30 ],
    pager : '#pager',
    sortname : 'id',
    viewrecords : true,
    sortorder : "desc",
    caption : "Ward's List",
    width : 940,
    cellEdit : true,
    editurl: "server.html",
});
jQuery("#ward").jqGrid('navGrid', '#pager', {
    edit : false,
    del : false,
    search :false,
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:06:23.670

如果你想使用内联编辑来添加你应该使用`add: false`的选项`navGrid`（连同`edit: false`你已经使用的）并且你应该[在](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)调用`navGrid`. [您可以使用文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)中描述`inlineNav`的相应选项来选择添加的按钮。`inlineNav`

**更新：您必须从 jqGrid 中删除**选项**`cellEdit : true`，因为不支持同时使用单元格编辑和内联编辑。**

 **此外，`id`如果您需要编辑网格，则必须将列重命名为任何其他名称。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/12960864/315935)的第二部分。

我建议你把整个 JavaScript 代码放在里面，`$(function(){...});`然后把它移到`<head>`.

您应该验证您使用的是当前（现在是 4.4.1）版本的 jqGrid。**

# c# - 使用 SHFB 的应用程序设置文档

> ID：13066856
> 
> 赞同：0
> 
> 时间：2012-10-25T10:44:24.300
> 
> 标签：c#, sandcastle, shfb

我正在尝试使用 Sandcastle Help File Builder 在 Windows 帮助文件中记录我的应用程序的设置。
我已经使用设置 - 属性 - 定义记录了 Visual Studio 中的设置。
我可以在生成的 Settings.Designer.cs 文件中看到我在

> [global::System.Configuration.SettingsDescriptionAttribute("description")]

有没有办法用 Sandcastle 提取这个，或者我应该使用不同的方法？
我可以在构建过程中看到生成的 xml 中的数据。我已将所有可见性设置为 true，但仍然无法在任何地方看到设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:55:45.330

Sandcastle 忽略具有 CompilerGenerated 属性的代码。不幸的是，没有设置来解决这个问题。

# heroku - 将heroku应用程序链接到私人（组织）github repo

> ID：13066860
> 
> 赞同：4
> 
> 时间：2012-10-25T10:44:41.713
> 
> 标签：heroku, github

在本地工作，将更改推送到 Heroku 可以正常工作，并且该应用程序按预期工作。但是，我无法将 heroku 应用程序链接到 Github 上的私人仓库。

当前配置看起来像这样

```
git@github.com:{Organization}/{project}.git 
```

我应该在哪里为私人仓库配置用户名/密码？

我试过（即使这不是首选方式）

```
username:password@github.com/{organization}/{project}.git 
```

将不胜感激有关此的任何指示。

编辑：我没有提到我在 Heroku 的应用程序设置下设置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:23:13.817

```
 git@github.com:{Organization}/{project}.git 
```

这是一个 ssh 地址，身份验证由公钥/私钥管理：确保您的公钥在该组织的协作者密钥中发布。
这里没有“用户名”或“密码”。

```
username:password@github.com/{organization}/{project}.git 
```

如果您将该远程地址用作*HTTPS*地址，那可能是正确的。

* * *

请注意，[Honza Javorek](https://stackoverflow.com/users/325365/honza-javorek)在 2020 年 11 月的“[如何从 heroku 访问私有 github 存储库？ ”中提到：](https://stackoverflow.com/a/64645458/6309)

> Heroku 仅支持使用 Git 开箱即用的 HTTP(S) Basic 身份验证。
> 这很不幸，因为这意味着您需要将凭据添加为安装 URL 的一部分，并将其作为纯文本提交到依赖项列表中。

他建议[创建一个新的 GitHub SSH 密钥](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#generating-a-new-ssh-key)并遵循以下[`heroku-buildpack-ssh-key`](https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-ssh-key)流程：

```
heroku buildpacks:add https://github.com/heroku/heroku-buildpack-ssh-key.git -i 1
heroku config:set BUILDPACK_SSH_KEY=$(cat ~/.ssh/id_rsa_heroku) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T10:18:41.673

如果你想使用私有仓库，heroku 需要向 github 发送一些你知道的令牌。如果您在该私有存储库上创建部署密钥，则可以使用[https://github.com/siassaj/heroku-buildpack-git-deploy-keys](https://github.com/siassaj/heroku-buildpack-git-deploy-keys)

# python - 无法检查文件完整性

> ID：13066862
> 
> 赞同：0
> 
> 时间：2012-10-25T10:44:48.730
> 
> 标签：python, python-2.7

我正在编写一个快速的 Python 脚本来将文件从一个目录迁移到另一个目录。除了我必须比较文件名和校验和的部分外，一切都完美无缺。我将文件存储在两个位置，即 /root/src/file1 和 /root/dst/file1。

因此，当我运行文件名比较时，它无法匹配文件，因为它包含整个文件路径。md5Srt 是一个存储文件和校验和的字典。

有没有一种方法可以在不使用整个文件路径的情况下比较文件名？

```
for key in md5Srt.keys():
    if key in md5Dst:
        print "keys match " + key
        print '\ncomparing the values of files\n'
        if md5Srt[key] == md5Dst[key]:
            print md5Srt[key]
            print md5Dst[key]
            print "files match\n"
            print "checking the next pair"
        else:
            print "values of files don't match" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:12:02.280

如果您的目录中只有一堆文件，则可以使用`os.path.basename`：

```
import os
>>> dst = os.path.basename('/root/dst/file1.file')
>>> src =  os.path.basename('/root/src/file1.file')
>>> dst
'file1.file'
>>> src
'file1.file'
>>> dst == src
True 
```

如果您正在处理子目录，则需要知道基本 src 和 dst 目录，然后从每个路径的开头删除它们：

```
>>> src = '/root/src'
>>> dst = '/root/dst'
>>> src_file = '/root/src/dir1/file1.file'
>>> dst_file = '/root/dst/dir1/file1.file'
>>> os.path.relpath(src_file, src)
'dir1/file1.file'
>>> os.path.relpath(dst_file, dst)
'dir1/file1.file'
>>> os.path.relpath(src_file, src) == os.path.relpath(dst_file, dst)
True 
```

如果将其与您的功能相结合，您将获得：

```
import os

src = '/root/src'
dst = '/root/dst'
for key, src_file in md5Srt.iteritems():
    dst_file = md5Dst.get(key)
    if dst_file is None:
        print 'The destination is missing %s' src_file
        continue

    print "keys match " + key
    print '\ncomparing the values of files\n'
    if  os.path.relpath(src_file, src) == os.path.relpath(dst_file, dst)
            print srcFile
            print dst_file
            print "files match\n"
            print "checking the next pair"
    else:
            print "values of files don't match" 
```

我认为您应该重新考虑尝试通过在其中找到`dst`与 .md5sum 中的文件相同的文件来比较文件`src`。如果一个文件被重命名或者有两个文件具有相同的哈希值，你最终可能会得到不完全相同的目录。更好的方法是先比较文件名，然后检查 md5sums 是否有文件同时位于`src`和`dst`.

这可能是这样的：

```
import os

src_dir = '/root/src'
dst_dir = '/root/dst'

# reverse the dictionaries, hopefully you would create these dictionaries 
# to begin with. A single file can only have one md5sum, but the same md5Sum can 
# match multiple files
src_file_hashes = dict((os.path.relpath(v, src_dir), k) for k, v in md5Srt)
dst_file_hashes = dict((os.path.relpath(v, dst_dir), k) for k, v in md5Dst)

for src_file, src_hash in src_file_hashes.iteritems():
    dst_hash = dst_file_hashes.get(src_file)

    src_path = os.path.join(src_dir, src_file)
    dst_path = os.path.join(dst_dir, dst_file)

    if dst_hash is None:
        print 'The destination file %s is missing ' % dst_path
        continue

    if  src_hash == dst_hash:
        print '%s matches %s and %s' % (src_hash, src_path, dst_path)
    else:
        print '%s and %s have different hashes' % (src_path, dst_path) 
```

# msbuild - MSBuild：不包括全球 Asax

> ID：13066865
> 
> 赞同：1
> 
> 时间：2012-10-25T10:44:58.047
> 
> 标签：msbuild, teamcity, global-asax

我们有一个 MSBuild 任务，它在将代码作为自动构建服务器拉下来后在我们的服务器上运行。

我们的问题是，当我们从 MSBuild 的输出部署站点时，包含一些不应该包含的文件和一个（可能更多）不包含的文件。

这些是不应包含的文件

```
mscorlib.dll
normidna.nlp
normnfc.nlp
normnfd.nlp
normnfk.nlp
normnfkd.nlp 
```

这是我知道丢失的一个文件

```
App_global.asax.compiled 
```

它正在构建的服务器是 Windows Server 2008 64 位我正在使用 TeamCity 运行构建，如果这会有所不同

其他任何需要的细节，请随时评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:15:10.357

关于不应该包含的文件，[这个](https://stackoverflow.com/questions/5604221/why-does-the-deployment-package-from-my-buildserver-have-additional-assemblies)问题的答案似乎是构建服务器没有安装 .NET 框架 SDK。

至于缺少的 App_global.asax.compiled，[此](http://forums.asp.net/t/1841165.aspx/1)线程中发布的最终答案表明，如果您有一个 Web 应用程序项目而不是一个网站项目，那么您将不会获得这些文件之一。

# quickbooks - 同时连接多个应用程序 QBD

> ID：13066869
> 
> 赞同：1
> 
> 时间：2012-10-25T10:45:09.983
> 
> 标签：quickbooks, intuit, intuit-partner-platform

我在 3 家公司有一个 intuit 帐户。当我想为两家公司授予对我的开发应用程序的访问权限时，我只被允许访问我获得访问令牌的最后一个。因此，如果我连接 Company#1，我可以访问 Company#1 的数据，但如果我连接 Company#2，我只能访问 Company#2 的数据，但不能访问 Company#1。如果我再次为 Company#1 请求 OAuth 令牌，我可以访问 Company#1 数据但不能访问 Company#2，并且我需要访问两家公司的数据的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:45:06.033

这是一个已知的问题。Intuit Anywhere 当前不支持同一用户的多个公司文件，您需要一个新的 Oauth 访问令牌来为您要显示的上下文的公司加载蓝点菜单。

更新 11/6 此问题将在 11 月 26 日这一周的版本中得到解决。

# python - 使用 Python 将文件复制到路径

> ID：13066871
> 
> 赞同：2
> 
> 时间：2012-10-25T10:45:12.713
> 
> 标签：python, python-3.x

我想将某个文件复制到指定路径。这个指定的路径有许多预先不存在的目录层次结构，需要在复制过程中创建。

我尝试`shutil.copy*`了功能，但它们似乎都要求预先创建目标路径处的目录。

是否有任何功能可以根据需要设置这些目录并复制文件？

示例用法：

```
copy_file('resources/foo.bar', expanduser('~/a/long/long/path/foo.bar')) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T10:50:07.873

您可以使用[`os.makedirs`](http://docs.python.org/library/os.html)递归创建所需的树状结构，然后使用`shutil.copy`.

```
target_dir = os.path.expanduser('~/a/long/long/path')
os.makedirs(target_dir)
shutil.copy('resources/foo.bar', os.path.join(target_dir, 'foo_bar')) 
```

这样，您可以将问题分解为可管理的任务（创建然后复制），这样您就可以处理目录创建崩溃的情况（遵循“显式优于隐式”）。

# css - CSS - 相对定位元素向右并将下一个元素移动到它的位置

> ID：13066878
> 
> 赞同：0
> 
> 时间：2012-10-25T10:45:28.727
> 
> 标签：css, css-position

我认为这是非常基本的 CSS 问题。

但这是小提琴，下面是代码

[http://jsfiddle.net/G6pqC/](http://jsfiddle.net/G6pqC/)

```
<!DOCTYPE html>
<html>
<head>
<style>

#topDiv {
    width:280px;
    height:500px;
    background-color:red;
}

.element{
    position:relative;
    right :100px;
}

</style>
</head>

<body>
<div id="topDiv">
    <input  type="button" value="button1" />
    <input  type="button" value="button2" />
    <input  type="button" value="button3" />
    <input  class='element' type="button" value="button4" />
    <input  type="button" value="button5" />
</div>

</body>

</html> 
```

我可以知道如何将 button5 移动到第一行并作为最后一个元素吗？我将按钮 4 移到了右侧，现在我在第一行有了位置，但按钮 5 仍然在下一行。请问有人吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:48:33.030

你能增加#topDiv 的宽度吗？像这样：

```
#topDiv {
    width:320px;
    height:500px;
    background-color:red;
}​ 
```

[http://jsfiddle.net/G6pqC/1/](http://jsfiddle.net/G6pqC/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:49:34.817

给你 - 检查这个[**演示**](http://jsfiddle.net/G6pqC/6/)

```
#topDiv {
    width:280px;
    height:500px;
    background-color:red;
}

input[type="button"]{ margin: 0 0 0 -4px; }
input[type="button"]:first-child { margin: 0; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:56:42.690

好的，在 Firefox 中加载它，现在我看到了。只需调整按钮上的字体大小。

```
.element{
font-size:11px;
float:left;
margin-right:5px;
}
#topDiv {
width:280px;
height:500px;
background-color:red;
position:relative;
}

.moved{position:absolute;right:150px;}

<!DOCTYPE html>
<html>
<body>
<div id="topDiv">
<input  class='element'  type="button" value="button1" />
<input  class='element'  type="button" value="button2" />
<input  class='element'  type="button" value="button3" />
<input  class='element moved' type="button" value="button4" />
<input  class='element'  type="button" value="button5" />
</div>

</body>

</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:56:45.490

```
#topDiv {
width:280px;
height:500px;
background-color:red;
}

.element{
float: right;

}
<!DOCTYPE html>
<html>
<body>
<div id="topDiv">
<input class='element' type="button" value="button1" />
<input  class='element' type="button" value="button2" />
<input  class='element' type="button" value="button3" />
<input  class='element' type="button" value="button4" />
<input  class='element'type="button" value="button5" />
</div>

</body>

</html> 
```

不知道这是否是你的追求，但在那里。​</p>

# php - PHP中的加密会留下不需要的字符

> ID：13066879
> 
> 赞同：1
> 
> 时间：2012-10-25T10:45:31.707
> 
> 标签：php, encryption

我制作了一个加密函数，它加密一个简单的值并将其存储在数据库中。下面是加密和解密的代码：

```
public function encrypt($string){
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $value = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $this->key256, $string, MCRYPT_MODE_ECB, $iv);
    $value = base64_encode($value);
    return $value;
}

public function decrypt($string){
    $value = base64_decode($string);
    $value = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $this->key256, $value, MCRYPT_MODE_ECB);
    return $value;
} 
```

当我加密一个简单的值（例如“迈克尔”）并再次解密时，我得到了这个值：

```
Michael��������� 
```

我得到所有这些问号是有原因的还是有办法摆脱它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T10:58:07.997

根据我的经验，那些额外的字符是用于填充的 NULL 字节，在解密后被保留。

您应该尝试将您的`decrypt()`功能更改为：

```
public function decrypt($string){
    $value = base64_decode($string);
    $value = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $this->key256, $value, MCRYPT_MODE_ECB);
    return trim($value, "\0");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T10:56:25.373

使用`bin2hex()`代替，`bas64_encode()`您可以使用`hex2bin()`解密前代替`base64_decode()`

```
protected function hex2bin($hexdata) 
{
 $bindata = '';
 for ($i = 0; $i < strlen($hexdata); $i += 2) {
 $bindata .= chr(hexdec(substr($hexdata, $i, 2)));
     }

  return $bindata;
} 
```

当然你可以`hex2bin()`在 PHP 中使用，这个自定义代码是为了与`Java`类似平台兼容。我这样做。可能你可以试一试。

谢谢

# c++ - 什么是半开范围和结束值

> ID：13066884
> 
> 赞同：24
> 
> 时间：2012-10-25T10:45:54.557
> 
> 标签：c++, c, math, language-agnostic, terminology

这些术语在 C++ 中是什么意思？

`1.`偏离`end`价值

`2.`半开范围 -`[begin, off_the_end)`

我在阅读 for 循环时遇到了它们。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-25T10:58:53.613

半开范围是包含第一个元素但不包括最后一个元素的范围。

范围 [1,5) 是半开的，由值 1、2、3 和 4 组成。

"off the end" 或 "past the end" 指的是序列结束*之后*的元素，并且它的特殊之处在于允许迭代器指向它（但您可能不会查看实际值，因为它没有不存在）

例如，在以下代码中：

```
char arr[] = {'a', 'b', 'c', 'd'};

char* first = arr
char* last = arr + 4; 
```

`first`现在指向数组的第一个元素，而`last`指向*数组末尾的*一个元素。我们被允许*指向*数组末尾的一个（但不是*两个*过去），但我们不允许尝试访问该位置的元素：

```
// legal, because first points to a member of the array
char firstChar = *first;
// illegal because last points *past* the end of the array
char lastChar = *last; 
```

我们的两个指针`first`共同`last`定义了它们之间所有元素的范围。

如果它是半开范围，那么它包含 指向`first`的元素，以及介于两者之间的所有元素，但不包含 指向的元素`last`（这很好，因为它实际上并不指向有效元素）

在 C++ 中，所有标准库算法都在这样的半开范围上运行。例如，如果我想将整个数组复制到其他位置`dest`，我这样做：

```
std::copy(first, last, dest) 
```

一个简单的 for 循环通常遵循类似的模式：

```
for (int i = 0; i < 4; ++i) {
    // do something with arr[i]
} 
```

这个循环从 0 到 4，但它不包括结束值，所以涵盖的索引范围是*half-open*，特别是`[0, 4)`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-25T10:52:08.173

这些不是 C++ 特定的术语，它们是一般的数学术语。

[] 和 () 表示范围是否包含/不包含端点：

*   [ 包括端点
*   ( 不包括端点
*   [] = '已关闭'，包括两个端点
*   () = 'Open'，不包括两个端点
*   [) 和 (] 都是“半开”的，并且只包含一个端点

大多数 C++ for 循环覆盖半开范围（您包括第一个元素：例如`for int i=0;`，但不包括最后一个元素：`i < foo`，不`i ≤ foo`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-15T09:12:07.643

正如在其他答案中所解释的那样，**半开范围**也是一个数学术语，并且在*编程上下文*中使用该术语，暗示包括起点并且**不****包括**终点。

 **在 C/C++ 编程的上下文中它实际上意味着什么？假设您要打印整数数组的元素。说到 C 语言，因为您对数组的大小没有任何运行时知识，所以您有两个选择。您必须提供数组的大小，因此函数签名如下；

```
void printArray(int * array, int size); 
```

或者您必须使用**半开范围**，这意味着您必须在数组本身之外提供开始和结束指针（并且函数将处理包括开始，不包括结束）。**函数签名**如下；

```
void printArray(int * array, int * begin, int * end); 
```

为了说明，这里是一个提供数组大小的例子；

```
#include <stdio.h>

void printArray(int * array, int size)
{
    printf("Array: ");

    for(int i = 0; i < size; i++)
        printf("%2d ", array[i]);

    printf("\n");
}

int main()
{
    int array[5] = { 1, 2, 3, 4, 5 };

    printArray(array, 5);

    return 0;
} 
```

在上面的示例中，我们向函数传递了两个参数，`printArray`这在函数签名上很明显，指向数组第一个元素（或数组本身）的指针，以及数组的大小。

但是，正如我上面写的，我们也可以在函数签名中使用半开范围，如下所示；

```
#include <stdio.h>

void printArray(int * array, int * begin, int * end)
{
    printf("Array: ");

    for(int * index = begin; index != end; index++)
        printf("%2d ", *index);

    printf("\n");
}

int main()
{
    int array[5] = { 1, 2, 3, 4, 5 };

    printArray(array, array, array+5);

    return 0;
} 
```

两个代码都将产生相同的输出，如下所示；

```
Array:  1  2  3  4  5 
```

如您所见，该`printArray`函数打印 range 的函数`[begin, end)`。这`index`实际上是一个指向整数数组元素的指针，从 开始`begin`，它包括 ，当等于指针`begin`时，for循环结束，不包括处理。我称之为**半开范围**。`index``end``end`

 ****半开范围**是**C++ 约定**。****

# java - 使用 Quartz 动态调度作业

> ID：13066886
> 
> 赞同：1
> 
> 时间：2012-10-25T10:46:01.120
> 
> 标签：java, spring, quartz-scheduler

我在 Spring 中实现了一个计划作业，我使用 Spring 3.1.1 和 Hibernate 和 Struts2。配置工作正常，但我想动态更改 de cron，所以我找到了几个示例但我无法实现它们，到处都是不同的配置，我只需要从数据库而不是配置文件中读取 cron 值。这有可能吗？

我的配置现在看起来像这样：

```
<!-- Scheduler Tasks -->
<bean name="statTask" class="com.bvc.spring.schedulers.MarketStatusJob"></bean>

<!-- Scheduler jobs -->
<bean id="statJobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="statTask" />
    <property name="targetMethod" value="execute" />
</bean>

<!-- Cron Triggers -->
<bean id="statCronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="statJobDetail" />
    <property name="cronExpression" value="0 30 12 1/1 * ? *"/>
</bean>

<!-- Triggers -->
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <ref bean="statCronTrigger"/>
        </list>
    </property>
</bean> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T08:45:18.540

你不需要有 statCronTrigger，需要在你的主类作业细节中实现石英触发器就可以了。

```
 CronTrigger trigger = null;
    JobDetail jobD;

    //Load context
    ApplicationContext context = new ClassPathXmlApplicationContext("YOUR_CONTEXT_FILES.xml");

    //Setup JobDetail

    jobD = (JobDetail) context.getBean("statJobDetail");

    //Setup CronTrigger
    try {
        trigger = new CronTrigger();
        trigger.setName("AppTrigger");
        trigger.setGroup(jobD.getGroup());
        trigger.setJobName(jobD.getName());
        trigger.setJobGroup(jobD.getGroup());
        trigger.setCronExpression("*/10 * * * * ?");// you can read this from DB as well or any other configured string 

    } catch (ParseException e1) {
        e1.printStackTrace();
    }

    //Scheduler
try{

        Scheduler scheduler =  (Scheduler) context.getBean("Scheduler");
        scheduler.scheduleJob(jobD, trigger); 
```

您可以在上下文中添加石英调度程序 bean

```
 <bean id="Scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean"></bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:58:32.347

可能最简单的方法是，`CronTriggerBean`在重写的方法中子类化和实现数据库属性解析`setCronExpression(..)`，您可以在其中访问数据库，获取所需的 cron，然后调用`super.setCronExpression(dbValue)`

另一种更难的方法是实现`PropertyPlaceholderConfigurer`从数据库而不是属性文件中读取它们的方法。不过，这可能不是微不足道的。不支持这一点，因为从属性文件中读取值更为习惯。另请注意，您将无法在执行期间动态更改 cron。

# c# - 为什么 System.Guid 不实现 System.IConvertible？

> ID：13066889
> 
> 赞同：6
> 
> 时间：2012-10-25T10:46:06.883
> 
> 标签：c#, clr, guid

我最近尝试从接受的方法返回[Guid](http://msdn.microsoft.com/en-us/library/system.guid.aspx)`<T>`类型的对象，但是编译器给了我以下错误：

> 类型**“System.Guid”**不能用作泛型类型或方法“MyGenericMethod”中的类型参数**“T** ”。没有从**'System.Guid'**到**'System.IConvertible' 的**装箱转换。

经过调查，我意识到编译器消息是由于 Guid 类型没有实现 System.IConvertible 接口引起的。

[MSDN](http://msdn.microsoft.com/en-us/library/system.iconvertible.aspx)声明如下：

> 此接口提供将实现类型的实例的值转换为具有等效值的公共语言运行时类型的方法。

提供的类型列表不包括 Guid；谁能解释/提供一个用例来说明为什么会这样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-25T10:52:11.030

[IConvertible](http://msdn.microsoft.com/en-us/library/system.iconvertible.aspx)要求类型能够将其数据转换为大多数原语。例如，您如何将 Guid 表示为浮点数？

因为 Guid 不能实现大多数接口方法，所以它预计不会以其他方式声明自己。

现在谈谈真正的问题：你想要完成什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:00:22.327

使用 System.Guid 作为泛型方法的类型参数不是问题，如以下代码所示。您能否发布 MyGenericMethod 方法的实现以及调用该方法的代码？

```
class Program
{
    static void Main(string[] args)
    {
        var test = new GenericTest();
        test.MyGenericMethod(Guid.NewGuid());
    }
}

class GenericTest
{
    public void MyGenericMethod<T>(T t)
    {
    }
} 
```

我猜该方法实现有一个类型约束，要求类型参数是 IConvertible，因此看起来像下面这样。

```
class Program
{
    static void Main(string[] args)
    {
        var test = new GenericTest();
        test.MyGenericMethod(Guid.NewGuid());
    }
}

class GenericTest
{
    public void MyGenericMethod<T>(T t)
        where T : IConvertible
    {
    }
} 
```

# ruby-on-rails - file_field 帮助器的自定义标题文本

> ID：13066891
> 
> 赞同：3
> 
> 时间：2012-10-25T10:46:11.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view-helpers

是否可以为 file_field 助手生成的按钮提供您自己的标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:54:20.920

您可以根据您的情况检查此答案： [如何更改 <input type="file" /> 的按钮文本？](https://stackoverflow.com/questions/1944267/how-to-change-the-button-text-of-input-type-file)

答案将向您展示如何在 Rails 视图中实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:59:56.370

这里还有一些提示： [file_field Browse button customize](https://stackoverflow.com/questions/1099702/file-field-browse-button-customize) , [quirksmode](http://www.quirksmode.org/dom/inputfile.html)

# joomla - 在 Joomla 的新闻页面上刊登一篇文章

> ID：13066892
> 
> 赞同：1
> 
> 时间：2012-10-25T10:46:14.923
> 
> 标签：joomla

这可能是一个非常简单的问题，如果之前有人问过，我很抱歉。

我正在使用 Joomla 2.5 为一所学校创建一个网站，我希望主页成为最新消息的博客列表。在新闻博客上方，我试图插入一篇特色文章来介绍学校

我的问题是我可以通过将主页设置为特色文章列表来插入特色文章，我可以通过将主页设置为博客列表来制作新闻提要。但是我不知道如何同时设置两者

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:45:51.980

将主页设置为博客列表（根据您的问题配置您可能已经做过的菜单项）并在`Articles Category`模块的设置中插入创建模块的特色文章：

*   转到过滤选项（右侧）并在精选文章中进行选择`Only`。
*   仍然在那里，`1`在计数框中输入。
*   选择文章所属的类别。
*   指定仅在主页中显示的模块。
*   为主要内容（博客列表）上方的模块分配一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:58:16.483

据我了解，您正试图在其余文章之上显示属于该类别的特定内容...

您应该通过插入这篇文章作为该类别的描述来做到这一点。

打开类别，在描述中插入内容，就像它是一篇文章一样，然后在菜单链接上确保您显示类别描述......这样，如果插入任何文章，文章将始终位于顶部。如果这不是你的意思，请更新你的问题。

# django - Django 中的用户身份验证。is_authenticated 的问题

> ID：13066898
> 
> 赞同：0
> 
> 时间：2012-10-25T10:46:45.430
> 
> 标签：django, authentication

我对用户菜单有一个问题。因此，我希望经过身份验证的用户可以在菜单中看到他/她的个人资料页面和注销（链接）。它在索引页面上工作（当我登录时）：*index, page1, profile, logout*，但是，如果我转到 page1 ，我可以在菜单中看到：*index, page1, login*，而不是 profile 和 logout 。如何解决？

**在网址中：**

```
url(r'^accounts/login/$', 'django.contrib.auth.views.login' ),
url(r'^accounts/logout/$', 'django.contrib.auth.views.logout_then_login' ),
url(r'^accounts/profile/$', 'my_app.views.profile' ), 
```

**在意见中：**

```
def profile(request):
    if  not request.user.is_authenticated():
        return HttpResponseRedirect("/accounts/login/")        
    else:
        user = request.user.is_authenticated()
        return  render_to_response('profile.html',locals()) 
```

**index.html 的一部分：**

```
{% if user.is_authenticated or request.user.is_authenticated %}
    <li><a href="/accounts/profile/">Profile</a></li>
    <li><a href="/accounts/logout/">logout</a></li>
{% else %}
    <li><a href="/accounts/login/">login</a></li>
{% endif %} 
```

**登录.html：**

```
{% extends "index.html" %}
{% load url from future %}

{% block application %}

{% if form.errors %}
<p>Try one more time</p>
{% endif %}

<form method="post" action="{% url 'django.contrib.auth.views.login' %}">
{% csrf_token %}
<table>
<tr>
    <td>{{ form.username.label_tag }}</td>
    <td>{{ form.username }}</td>
</tr>
<tr>
    <td>{{ form.password.label_tag }}</td>
    <td>{{ form.password }}</td>
</tr>
</table>

<input type="submit" value="Login" />
<input type="hidden" name="next" value="{{ next }}" />
</form>

{% endblock %} 
```

**profile.html:**

```
{% extends "index.html" %}
{% block application %}
{% if request.user.is_authenticated %}
    <p>Welcome, {{ request.user.username }}. Thanks for logging in.</p>
{% else %}
    <p>Welcome, new user. Please log in.</p>
{% endif %}
{% endblock %} 
```

**page1.html：**

```
{% extends "index.html" %}
{% block application %}
some for loops here
{% endblock %} 
```

**第 1 页的浏览量：**

```
def car(request):
    all_cars = Car.objects.all().filter(active=1).values('id', 'name')
    return render_to_response('page1.html', {'all_cars': all_cars}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:57:48.090

总是添加`context_instance`：

```
render_to_response('profile.html',locals(), context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:33:15.690

`user`渲染模板时不必手动传递。尝试这样做。

在**view.py 中**：

```
from django.contrib.auth.decorators import login_required
from django.shortcuts import render

@login_required
def profile(request):
    return render(request, 'profile.html') 
```

在**settings.py**

```
LOGIN_URL = '/accounts/login/' 
```

在**index.html**中：

```
{% if user.is_authenticated %}
    <li><a href="/accounts/profile/">Profile</a></li>
    <li><a href="/accounts/logout/">logout</a></li>
{% else %}
    <li><a href="/accounts/login/">login</a></li>
{% endif %} 
```

在**profile.html中**

```
{% extends "index.html" %}
{% block application %}
{% if user.is_authenticated %}
    <p>Welcome, {{ user.username }}. Thanks for logging in.</p>
{% else %}
    <p>Welcome, new user. Please log in.</p>
{% endif %}
{% endblock %} 
```

**在 page1 视图中：**

```
from django.shortcuts import render
from django.contrib.auth.decorators import login_required
# If you want only authenticated users to access this page
@login_required
def car(request):
    all_cars = Car.objects.all().filter(active=1).values('id', 'name')
    return render(request, 'page1.html', {'all_cars': all_cars}) 
```

> PS：我强烈建议您使用命名网址并使用网址名称而不是硬编码网址。

# c# - 如何在 Visual Studio 2010 / SSMS 2008 中使用生成的数据填充数据库？

> ID：13066899
> 
> 赞同：0
> 
> 时间：2012-10-25T10:46:43.917
> 
> 标签：c#, database, visual-studio-2010, sql-server-2008, data-generation

在我的 (c#) Visual Studio 2010 项目中，我引用了一个数据库。

但是，数据库是空的。我想在这个数据库中插入一些虚假数据，以便我可以测试我的应用程序。

有没有这样做的工具/方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:53:54.047

如果您使用的是 sql，我会推荐[redgate 的 sql 数据生成器](http://www.red-gate.com/products/sql-development/sql-data-generator/)，它不是免费的，但在创建有用的测试数据方面做得很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:02:17.597

如果您在 VS2010 中创建或创建了数据库项目，则内置工具可以生成数据：

[http://msdn.microsoft.com/en-us/library/aa833267(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/aa833267(v=vs.100).aspx)

它说您需要 Visual Studio Premium，但我使用的是 VS2010 Professional，我可以做到。

# linux - “绑定到套接字错误”后无法终止套接字

> ID：13066903
> 
> 赞同：0
> 
> 时间：2012-10-25T10:46:59.097
> 
> 标签：linux, sockets

尝试连接到套接字时，它告诉我该地址已在使用中。我尝试杀死相应的进程，但我收到了不允许此操作的消息...

```
Error binding to socket myapp.sock: Address already in use
ERROR: Failed to start myapp daemon.
make: *** [run-sim] Error 1
[grabher@myapp ex1]$ ps -C myapp
PID TTY          TIME CMD
2075 ?        00:06:43 myapp
[grabher@myapp ex1]$ kill -9 2075
2075: Operation not permitted 
```

有人知道我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:49:10.250

您需要以 root 身份终止该进程

例如在 ubuntu 中将是`sudo kill -9 pid`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:26:13.117

如果该进程由root拥有，那么您无法杀死该进程（非root用户需要具有杀死root拥有或其他用户拥有的进程的权限），请管理员更改该进程的权限。

# jquery - 如何在 jQueryUI 工具提示中换行

> ID：13066909
> 
> 赞同：28
> 
> 时间：2012-10-25T10:47:15.240
> 
> 标签：jquery, jquery-ui, tooltip

The new version of jQueryUI (1.9) comes with the native tooltip widget. After testing with it, it works fine if the content (value of the title attribute) is short. But if the content is long, the tooltip, once displayed, will overlap the input text.

~~There is [**a demo**](http://jqueryui.com/tooltip/) on the official site.~~

When you hover the mouse cursor over the **Your age** text `<input>`, the tooltip displayed overlaps the text input. I am not sure if this is the desired behaviour of the widget. I would like it to stay on the right side of the text input and break lines if necessary.

**编辑：**演示页面不再显示原始问题，因为演示已更新为使用 jQueryUI v1.10，其中*位置*代码已更新以更好地放置工具提示 - 请参阅[http://api.jqueryui.com/tooltip/#期权头寸](http://api.jqueryui.com/tooltip/#option-position)

[我在 jsFiddle 上](http://jsfiddle.net/kECuc/)重新创建了原始问题的演示。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-25T12:45:57.847

工具提示的[**位置**](http://api.jqueryui.com/tooltip/#option-position)由 jQueryUI Position 对象控制，默认设置为：

```
{ my: "left+15 center", at: "right center", collision: "flipfit" } 
```

[**位置**](http://api.jqueryui.com/position/)对象，特别是`collision`属性可以更改以强制将控件放置在其他位置。工具提示的默认值是*Flipfit*，这意味着如果默认值（右侧）不适合它，它将向左*翻转*并尝试该位置，如果它不与任何东西碰撞，尝试通过将其移开来*适应*控件窗户的边缘。结果是它现在与`<input>`. 似乎没有一个选项可以强制长工具提示巧妙地换行。

但是有两种方法可以包装内容：

使用强制包装将自定义 CSS 类添加到配置中`max-width`，例如：

JavaScript

```
$('input').tooltip({
    tooltipClass:'tooltip'
}); 
```

CSS

```
.tooltip {
    max-width:256px;
} 
```

或者在标题属性中插入硬换行符`<br/>`，例如

```
title="Lorem ipsum dolor sit amet,<br/>consectetur adipisicing elit" 
```

**编辑：**所以看起来 jQueryUI 在 v1.9 和 v1.10 之间更改了工具提示*内容*选项（根据[changelog](http://jqueryui.com/changelog/1.10.0/#tooltip)）。供参考，这里有区别：

**v1.9.2**

```
content: function() {
    return $( this ).attr( "title" );
} 
```

**v1.10**

```
content: function() {
    // support: IE<9, Opera in jQuery <1.7
    // .text() can't accept undefined, so coerce to a string
    var title = $( this ).attr( "title" ) || "";
    // Escape title, since we're going from an attribute to raw HTML
    return $( "<a>" ).text( title ).html();
} 
```

因此，您可以使用以下方法将不转义*标题*属性`<br/>`中的标签的旧功能放回原处：*`.tooltip()`*

 *```
$('input').tooltip({
    content: function() {
        return $(this).attr('title');
    }
}); 
```

另外，请参阅[**jsFiddle 演示**](http://jsfiddle.net/grJxQ/1/)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-18T20:40:20.663

这是我用最新的 jquery / jqueryui 做的技巧

假设您想要工具提示的所有项目都具有类“jqtooltip”，它们具有标题标签，并且标题具有用于行分隔符的竖线字符。

```
$('.jqtooltip').tooltip({ 
  content: function(callback) { 
     callback($(this).prop('title').replace('|', '<br />')); 
  }
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-09-13T04:11:54.330

我有一个 jQuery 2.1.1 的解决方案，类似于@Taru 的解决方案。

基本上，我们必须使用工具提示的内容调用来动态地从元素中获取数据。元素本身可以包含任何 html 标记。注意需要导入

所以，onload，我这样做：

```
$(function() {
    $( document ).tooltip({
      content:function(){
        return this.getAttribute("title");
      }
    });
  }); 
```

我的示例元素是这样的：

```
<div title="first<br/>second<br/>">hover me</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T21:13:22.037

这有效：

**HTML**

```
<div class="produtos">
    <div class="produtos_imagem">
        <img src="imagens/teste/7.jpg" width="200" title="Código: 00122124<br /><br />Descrição: AB PNEU 700 X 23 FOLD CORPRO<br /><br />Unidade: PN<br /><br />Marca : PNEU"/>
    </div>
    <p class="produtos_titulo">AB PNEU 700 X 23 FOLD CORPRO</p>
</div> 
```

**JavaScript**

```
$(document).tooltip({
    content: function() {
        var element = $( this );
        if ( element.is( "[title]" ) ) {
            return element.attr( "title" );
        }
    },
    position: {
        my: "center bottom-20",
        at: "center top"
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-18T20:42:46.493

根据官方 jQuery UI 文档[https://api.jqueryui.com/tooltip/](https://api.jqueryui.com/tooltip/)的工具提示小部件（版本 1.13），我使用此语法设置带有换行符的 html 内容：

```
$( ".selector" ).tooltip( "option", "content", "1st line.<br />2nd line.<br />3rd line." ); 
```

它在我这边工作得很好。
也适用于 andyb[这里](https://stackoverflow.com/a/13068935/11292902)提供的解决方案，旨在通过 title 属性的 value 来评估内容：

```
$('input').tooltip({
 content: function() {
    return $(this).attr('title');
 }
}); 
```*

# php - Google API - 使用 PHP 的 URL 缩短器

> ID：13066919
> 
> 赞同：20
> 
> 时间：2012-10-25T10:47:50.287
> 
> 标签：php, url, curl, qr-code

我的代码如下。URL 缩短服务有效，但在我插入`$POST`. 有谁知道如何通过查看代码来解决这个问题？

```
// This is the URL you want to shorten
$longUrl = 'http://www.mysite.com/XXXXX/XX/$_POST['qrname']';

// Get API key from : http://code.google.com/apis/console/
$apiKey = 'MyAPIKey';

$postData = array('longUrl' => $longUrl, 'key' => $apiKey);
$jsonData = json_encode($postData);

$curlObj = curl_init();

curl_setopt($curlObj, CURLOPT_URL, 'https://www.googleapis.com/urlshortener/v1/url');
curl_setopt($curlObj, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curlObj, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($curlObj, CURLOPT_HEADER, 0);
curl_setopt($curlObj, CURLOPT_HTTPHEADER, array('Content-type:application/json'));
curl_setopt($curlObj, CURLOPT_POST, 1);
curl_setopt($curlObj, CURLOPT_POSTFIELDS, $jsonData);

$response = curl_exec($curlObj);

// Change the response json string to object
$json = json_decode($response);

curl_close($curlObj);

echo 'Shortened URL is: '.$json->id; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T10:50:50.107

尝试如下

`$longUrl = 'http://www.mysite.com/XXXXX/XX/'.$_POST['qrname'];`

以上将起作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-20T04:56:31.423

```
$longUrl = "http://www.xxxxxxx.com";
    $postData = array('longUrl' => $longUrl);
    $jsonData = json_encode($postData);

    //4
    $curlObj = curl_init(); 
    curl_setopt($curlObj, CURLOPT_URL, 'https://www.googleapis.com/urlshortener/v1/url?key=yourappkey');
    curl_setopt($curlObj, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curlObj, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($curlObj, CURLOPT_HEADER, 0);
    curl_setopt($curlObj, CURLOPT_HTTPHEADER, array('Content-type:application/json'));
    curl_setopt($curlObj, CURLOPT_POST, 1);
    curl_setopt($curlObj, CURLOPT_POSTFIELDS, $jsonData);

    //5
    $response = curl_exec($curlObj);

    $json = json_decode($response);
//       echo "<pre>";
//    print_r($json);exit;
    //6
    curl_close($curlObj);

    //7
    if(isset($json->error)){
        echo $json->error->message;
    }else{
        echo $json->id;
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-20T15:55:36.413

您在单引号之间传递 php 变量，因此它不会被解析。在双引号之间传递它

```
$longUrl = "http://www.mysite.com/XXXXX/XX/$_POST['qrname']"; 
```

或像这样连接

```
$longUrl = 'http://www.mysite.com/XXXXX/XX/'.$_POST['qrname']; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-10T22:48:46.433

你有一把钥匙，但你没有正确使用它

您应该将其附加到 url，不要在帖子中发送密钥

```
https://www.googleapis.com/urlshortener/v1/url?key='.$apiKey 
```

请检查[https://developers.google.com/url-shortener/v1/url/insert](https://developers.google.com/url-shortener/v1/url/insert)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-22T21:02:07.717

还没有足够的声望点来发表评论，但我通过替换以下行得到了这个工作正常：

```
echo 'Shortened URL is: '.$json->id; 
```

和：

```
$shortLink = get_object_vars($json);
echo "Shortened URL is: ".$shortLink['id']; 
```

这可能只是我的 php 安装，但原行一直为我抛出 500 内部错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-13T13:35:37.823

```
<?php 
//URL Shortening Functions( Just copy & paste below code in your application)
function short_url($longUrl){
        $apiKey = '******************'; // put your GOOGLE API SHORTENING KEY 
        $postData = array('longUrl' => $longUrl, 'key' => $apiKey);
        $curlObj = curl_init();
        $jsonData = json_encode($postData);
        curl_setopt($curlObj, CURLOPT_URL, 'https://www.googleapis.com/urlshortener/v1/url?key='.$postData['key']);
        curl_setopt($curlObj, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($curlObj, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($curlObj, CURLOPT_HEADER, 0);
        curl_setopt($curlObj, CURLOPT_HTTPHEADER, array('Content-type:application/json'));
        curl_setopt($curlObj, CURLOPT_POST, 1);
        curl_setopt($curlObj, CURLOPT_POSTFIELDS, $jsonData);
        $response = curl_exec($curlObj);
        $json = json_decode($response);
        curl_close($curlObj);
        if(isset($json->error) || $json == null){
             return $longUrl; // retrun same url in case of error or null response
        }else{
            return $json->id; // return shorted url
        }
    }
// use this function here
$longUrl = 'https://www.w3schools.com/';
echo short_url($longUrl); // print short url

// If you want to return short url to long url use below function
function long_url($shortUrl){
        $apiKey = '***********'; // put your GOOGLE API SHORTENING Key
        $params = array('shortUrl' => $shortUrl, 'key' => $apiKey,'projection' => "ANALYTICS_CLICKS");
        $final_url = 'https://www.googleapis.com/urlshortener/v1/url?'.http_build_query($params);
        $curlObj = curl_init($final_url);
        curl_setopt($curlObj, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($curlObj, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($curlObj, CURLOPT_HEADER, 0);
        curl_setopt($curlObj, CURLOPT_HTTPHEADER, array('Content-type:application/json'));
        $response = curl_exec($curlObj);
        $json = json_decode($response);
        curl_close($curlObj);
        if(isset($json->error) || $json == null){
            return $shortUrl;
        }else{
            return $json->longUrl;
        }
    }
//Function Use here
echo "<br>"; // For next line
$shortUrl = ''; // put the short url generated from above function
echo long_url($shortUrl); // get long url
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-21T07:20:58.743

试试这个代码。我正在为我工​​作。

```
$api_key = 'YOUR_KEY';
$request_data = array(
    'longUrl' => 'YOUR_LONG_URL'
);

$curl_obj = curl_init(sprintf('%s/url?key=%s', 'https://www.googleapis.com/urlshortener/v1', $api_key));
curl_setopt($curl_obj, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_obj, CURLOPT_POST, true);
curl_setopt($curl_obj, CURLOPT_HTTPHEADER, array('Content-type: application/json'));
curl_setopt($curl_obj, CURLOPT_POSTFIELDS, json_encode($request_data));
curl_setopt($curl_obj, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_obj, CURLOPT_SSL_VERIFYHOST, false);

$response = curl_exec($curl_obj);
$json = json_decode($response);
curl_close($curl_obj);

var_dump($json);
die(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-05T16:11:14.310

代替`$longUrl = 'http://www.example.com/XXXXX/XX/$_POST['qrname']';`

与以下

`$longUrl = 'http://www.example.com/XXXXX/XX/{$_POST['qrname']}';`

# ios5 - 如何在ios的页面控件中实现水平和垂直滚动

> ID：13066920
> 
> 赞同：0
> 
> 时间：2012-10-25T10:47:50.527
> 
> 标签：ios5, uipagecontrol

我有不同的视图和页面控制。水平滚动是通过滑动视图来工作的。现在我想在每个视图中实现垂直滚动，如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:52:35.597

```
scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * NumberOfPages, 1); 
```

# ruby-on-rails - 切换 add_filter 菜单时出现 rails_admin javascript 错误

> ID：13066922
> 
> 赞同：0
> 
> 时间：2012-10-25T10:48:05.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, rails-admin

**我为add_filter**菜单找到了这个 html ：

```
<li class="dropdown" style="float:right">
  <a class="dropdown-toggle" data-toggle="dropdown" href="#">
    Add filter
    <b class="caret"></b>
  </a>
<ul class="dropdown-menu" id="filters" style="left:auto; right:0;">
  <li>
    <a data-field-label="Title" data-field-name="title" data-field-options="" data-field-type="string" data-field-value="" href="#">Title</a>
  </li>
  <li>
    <a data-field-label="Book type" data-field-name="book_type" data-field-options="" data-field-type="string" data-field-value="" href="#">Book type</a>
  </li>
  <li>
    <a data-field-label="Category" data-field-name="category" data-field-options="" data-field-type="belongs_to_association" data-field-value="" href="#">Category</a>
  </li>
  <li>
    <a data-field-label="Detail" data-field-name="detail" data-field-options="" data-field-type="text" data-field-value="" href="#">Detail</a>
</li>
</ul>
</li> 
```

![添加过滤器](../Images/aa7ade013fda9ced7ce0d5b8f2ea3b99.png)

当我单击添加过滤器时，控制台日志：

`Uncaught TypeError: Object [object Object] has no method 'tooltip'`

*   当我创建一个新的空项目并安装 rails_admin gem 时，它可以工作。
*   我的项目正在为 css 和 js 使用引导程序。

请给我一些关于这个问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:13:13.893

哦，对不起，我发现了我的问题 gem twister-bootstrap-rails 与 rails_admin 不兼容。只需在 GEMFILE 中删除这一行，然后 rake assets:clean，最后再次运行 bundle，javascript 就可以工作了。我的答案在[Github上找到](https://github.com/sferik/rails_admin/issues/1202)

# grails - 在对可为空的内部对象进行排序后，我需要一个常规标准来获取所有元素

> ID：13066923
> 
> 赞同：1
> 
> 时间：2012-10-25T10:48:06.307
> 
> 标签：grails

我有两个名为 IpPatient,Ward 的域类，如下所示。

```
class IpPatient {
  String ipRegNo
  Ward ward

  static constraints = {
    ward nullable:true
    ipRegNo nullable:false
  }
}

class Ward
{
  String name;

  static constraints = {
    name nullable:true
  }
} 
```

现在我想创建标准，例如

```
def criteria=IpPatient.createCriteria()
return criteria.list(max:max , offset:offset) {
  order("ward.name","asc")  
  createAlias('ward', 'ward', CriteriaSpecification.LEFT_JOIN)
} 
```

目前`IpPatient`表有13条记录，其中8条记录`IpPatient`没有病房，因为病房可以为空。

当我排序时，`wardName`我得到 5 条包含病房的记录。

在对可为空的内部对象进行排序后，我需要一个标准来获取所有元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:43:59.020

您可能不是在寻找基于 HQL 的方法，但这应该可以解决问题：

```
IpPatient.findAll("from IpPatient as i left outer join i.ward as w order by w.name asc") 
```

# html - 如何获取包裹在锚点中的定义列表以水平显示

> ID：13066924
> 
> 赞同：0
> 
> 时间：2012-10-25T10:48:05.880
> 
> 标签：html, css, alignment

我[为此创建了一个 jsfiddle，](http://jsfiddle.net/Trxhn/)下面是示例 HTML 和 CSS。

我已经删除了边距、填充，并将所有内容设置为内联显示，但我无法让每个锚并排放置。

我已经尝试了所有我期望的工作，但 CSS 经常不能达到我的预期。

对此的任何帮助或见解将不胜感激。

的HTML：

```
<dl>
  <a href="#">
    <dt>One</dt>
    <dd><img src="//imageshack.us/a/img22/2964/puppies4.jpg" height='100' width='100' /></dd>
  </a>
  <a href="#">
    <dt>Two</dt>
    <dd><img src='//imageshack.us/a/img519/5132/im20cagnolininu8.jpg' width='100' height='100' /></dd>
  </a>
</dl> 
```

CSS：

```
dl { 
    border: 1px solid yellow;
    a {
        border: 1px solid green;
        display: inline;
        margin: 0;
        padding: 0;

        dt,dd { margin: 0; padding: 0; display: inline;}
    }
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:58:46.037

你`CSS`有错误的结构（嵌套括号），修复它，一切都应该看起来不错。在你的`jsfiddle`这个错误也存在。

```
dl { 
    border: 1px solid yellow; }

a {
            border: 1px solid green;
            display: inline;
            margin: 0;
            padding: 0; }

dt,dd { margin: 0; padding: 0; display: inline;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:59:16.213

有两种方法可以让它水平显示。

1) 将锚标签显示从 inline 更改为 inline-block。2）向锚标签添加左浮动

我认为第一种方式更容易实现，因为您不需要处理第二种方式浮动导致的折叠 dl 元素。

# xcode - 通过命令行构建时 IPA 无效

> ID：13066926
> 
> 赞同：4
> 
> 时间：2012-10-25T10:48:14.667
> 
> 标签：xcode, ipa

我目前在通过 xcode 命令行工具（xcodebuild 和 xcrun）创建 IPA 文件时遇到问题。我首先运行以下命令：

xcodebuild -scheme scheme -sdk iphoneOS6.0 -arch armv7 -configuration config clean build#

其中 scheme 和 config 是相关的方案和配置

然后我跑

xcrun -sdk iphoneos PackageApplication -v appPath -o ipaPath -sign codesignature

其中 appPath 和 ipaPath 是应用程序和 ipa 的路径，以及我用来签署 ipa 的代码签名。我也尝试过嵌入配置文件

该过程会生成一个 ipa 文件，但是当我尝试将其拖入 itunes 时，它告诉我它不是有效的 IPA。我还通过 xcode 中的存档通过临时分发过程尝试了这个过程，并设法创建了一个有效的 IPA，但是当我试图自动化这个过程时，这并不是我真正想要的。

任何想法为什么 IPA 会无效？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T12:40:32.957

您忘记了`--embed`您的配置文件。

我做这样的事情

```
xcrun -sdk iphoneos PackageApplication -v -o `pwd`/out.ipa --sign "iPhone Distribution: Company Name (ID)" --embed /path/to/mobileprovision 
```

# java - 字符串标记器，分隔符

> ID：13066929
> 
> 赞同：2
> 
> 时间：2012-10-25T10:48:17.070
> 
> 标签：java, string, tokenize

我正在使用这段代码：

```
StringTokenizer tokenizer=new StringTokenizer(line, "::"); 
```

拆分以下字符串：

```
hi my name is visghal:: what is yor name name:: being thw simple my::: what is yor name name. 
```

现在我想使用`::`分隔符分割字符串。它工作正常。但它也在`:::`考虑之中。

换句话说，我想要：

```
hi my name is visghal
what is yor name name
being thw simple my
: what is yor name name 
```

相反，它给了我以下信息：

```
being thw simple my 
what is yor name name   
hi my name is visghal 
```

它是`::`一样`:::`的。有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T10:52:37.910

您可以像这样使用 String#split ：

```
String[] arr = str.split("::"); 
```

**编辑：**

```
String[] arr = str.split("::\\s*"); // for stripping spaces after :: 
```

**输出：**

```
hi my name is visghal
what is yor name name
being thw simple my
: what is yor name name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:52:41.350

如果您需要额外的功能，请尝试使用 Guava 的[Splitter](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Splitter.html)`String.split`。它将允许修剪和省略空字符串。

```
 String myInput = "...";
 Iterable<String> parts = Splitter.on("::").split(myInput); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:55:34.400

> 它采用 :: 和 ::: 相同

不，您的分隔符`::`在此字符串部分中出现两次，`:::`这就是您的结果的解释。

你应该使用`split("::")`方法。

# javascript - 访问外部类属性

> ID：13066943
> 
> 赞同：1
> 
> 时间：2012-10-25T10:49:16.397
> 
> 标签：javascript

如何在 JavaScript 中访问外部类属性？

例如：

```
var outer = {
    outerField: 15,
    inner: {
        innerFunc: function () {
            // <-- How can I get access to outerField here?
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-13T20:25:05.620

这个（已回答）问题类似，您基本上从外部对象定义内部对象方法以从外部对象获取属性：[access javascript parent class properties from subclass](https://stackoverflow.com/questions/19531745/access-javascript-parent-class-properties-from-subclass)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-27T07:57:16.900

**该解决方案有效**

 `````
 var outer = {
    outervalue: 3,
    inner: {
        innerFunc: function () {
            // How can I get access to outer_value inside this method       
                    return (this.outervalue);
        }.call(outer)
    }
}; 
`````

# phantomjs - CasperJS：禁用远程页面的 javascript 但仍使用 casper.evaluate？

> ID：13066944
> 
> 赞同：6
> 
> 时间：2012-10-25T10:49:23.903
> 
> 标签：phantomjs, casperjs

感谢您阅读我的主题，如果有人能建议我应该探索实现以下目标的任何其他途径，我将不胜感激。

使用 CasperJS 或 PhantomJS，我需要禁用属于我导航页面的所有 JavaScript 执行，同时仍然能够使用 casper.execute 运行我自己的。

有谁知道我可以做到这一点的方法吗？

*   是否可以使用 onResourceRequested 或 onResourceReceived 修改 HTTP 标头或正文？或有条件地取消请求？或者他们是只读的？
*   您可以在提供解析之前修改原始 HTML 源吗？
*   我曾尝试过早在 casper.execute 中破解 window.stop() ，但这在页面之间的工作方式不一致。
*   Phantom WebServer 模块是否用于这种事情？我可以/应该通过它路由请求/响应并在它们通过时修改它们吗？

感谢您的帮助 - 我很欣赏这是一个奇怪的用例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T23:56:34.193

如此处所述[，](https://groups.google.com/forum/#!topic/phantomjs/c2nPy_dhbXE)这是可能的，但不是使用当前的 phantomjs 主分支，而是在特定的 [dev 分支 [（[https://github.com/Vitallium/phantomjs/tree/allow-to-disable-js](https://github.com/Vitallium/phantomjs/tree/allow-to-disable-js)）中，您应该从，查找选项的最新[提交](https://github.com/Vitallium/phantomjs/commit/5d4b3e77ca1cb68e2161eec10816e50617eb7023)。`disable-javascript`

# android - 当我将设备旋转到水平位置时，如何使内部 LinearLayout 保持在最后一个按钮下方？

> ID：13066951
> 
> 赞同：0
> 
> 时间：2012-10-25T10:49:41.920
> 
> 标签：android, android-layout

好吧，标题不言自明。我怀疑它与，`ScrollView`但无法弄清楚。我希望 LinearLayout 内容与底部保持对齐。

![在此处输入图像描述](../Images/4d5985e20606ad579663eb2a827d4350.png) ![在此处输入图像描述](../Images/f9e15042e223cd587b5c4cfe078ca5f5.png)

她是我的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollViewActivityLogin"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <RelativeLayout android:id="@+id/relativeLayout_top_activity_login"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" 
        android:background="@color/blue"
        android:focusable="true"
        android:focusableInTouchMode="true">

         <TextView
            android:id="@+id/txt_head_activity_login"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="25dip"
            android:layout_marginRight="25dip"            
            android:layout_marginTop="20dip"
            android:text="@string/string_your_not_logged_on"
            android:textSize="22sp" />

        <TextView
            android:id="@+id/txt_username_activity_login"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txt_head_activity_login"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="20dip"
            android:text="@string/string_user_name"
             />

        <EditText
            android:id="@+id/edt_username_activity_login"
            android:layout_width="200dip"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txt_username_activity_login"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:singleLine="true"
            android:inputType="text"/>

        <TextView
            android:id="@+id/txt_password_activity_login"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/edt_username_activity_login"
            android:layout_centerHorizontal="true"
            android:text="@string/string_password"
            />

        <EditText
            android:id="@+id/edt_password_activity_login"
            android:layout_width="200dip"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txt_password_activity_login"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="15dip"
            android:layout_marginRight="15dip"
            android:singleLine="true"
            android:inputType="textPassword"
            />

        <Button
            android:id="@+id/btn_login_activity_login"
            android:layout_width="200dip"
            android:layout_height="wrap_content"
            android:layout_below="@+id/edt_password_activity_login"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="25dip"
            android:layout_marginRight="25dip"
            android:layout_marginTop="20dip"
            android:text="@string/string_login" />

        <Button
            android:id="@+id/btn_sign_up_activity_login"
            android:layout_width="200dip"
            android:layout_height="wrap_content"
            android:layout_below="@+id/btn_login_activity_login"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="25dip"
            android:layout_marginRight="25dip"
            android:layout_marginTop="50dip"
            android:text="@string/string_sign_up" />

        <LinearLayout android:id="@+id/linearLayout_bottom_activity_login"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="20dp"
            >                  
            <TextView
                android:id="@+id/txt_version_activity_login"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="" />

            <TextView
                android:id="@+id/txt_copywrite_activity_login"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="@string/string_app_name_copywrite" />
        </LinearLayout>
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:59:19.837

请像这样在文件顶部进行更改。

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/ScrollViewActivityLogin"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:fillViewport="true" >

<RelativeLayout android:id="@+id/relativeLayout_top_activity_login"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:background="@color/blue"
    android:focusable="true"
    android:focusableInTouchMode="true"> 
```

看到这张图片你会得到更多的想法

[http://i.stack.imgur.com/uOai7.jpg](http://i.stack.imgur.com/uOai7.jpg)

# ios - 如果不缩放，图表不应移动

> ID：13066954
> 
> 赞同：0
> 
> 时间：2012-10-25T10:49:49.517
> 
> 标签：ios, ios4, core-plot

我正在使用核心图来绘制图形。图表总是移动，无论是否缩放。但我希望它在缩放之前不应该移动。在缩放状态下，我们应该允许平移（向左/向右移动）来查看整个图形。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:59:52.803

我可以想到几种方法来做到这一点：

1.  缩小时禁用用户交互。当用户放大时启用它。

2.  在绘图空间上设置`globalXRange`和。`globalYRange`无论您放大多远，该图都不会滚动到这些范围之外。

3.  使用绘图空间委托。实现`-plotSpace:willChangePlotRangeTo:forCoordinate:`委托方法。如果建议的范围超出所需的滚动范围，请在返回之前将该范围修改为您的首选范围。

# matlab - 如何在 Matlab R2009b 的神经网络中使用训练

> ID：13066956
> 
> 赞同：1
> 
> 时间：2012-10-25T10:49:53.057
> 
> 标签：matlab, image-processing, neural-network

我的输入矩阵为：

```
input = 
    1     0     0     1     1
    1     0     0     0     1
    1     0     0     0     1
    1     0     0     0     1
    0     0     1     0     0
    0     1     1     1     0
    0     1     1     1     0 
```

和

```
T = [eye(10) eye(10) eye(10) eye(10)]; 
```

我创建的神经网络是：

```
net = newff(input,T,[35], {'logsig'})
%net.performFcn = 'sse';
net.divideParam.trainRatio = 1; % training set [%]
net.divideParam.valRatio   = 0; % validation set [%]
net.divideParam.testRatio  = 0; % test set [%]
net.trainParam.goal = 0.001; 
```

到目前为止它工作正常，但是当我使用火车功能时，问题就出现了

```
[net tr] = train(net,input,T); 
```

matlab 窗口中显示以下错误：

```
??? Error using ==> network.train at 145
Targets are incorrectly sized for network.
Matrix must have 5 columns.

Error in ==> test at 103
[net tr] = train(net,input,T); 
```

我也尝试过`input'`and `T'`。提前感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:20:15.010

如果您查看 MATLAB 的官方文档[`train`](http://www.mathworks.com/help/nnet/ref/train.html)，您会注意到它`T`的列数必须与输入矩阵相同，在您的情况下为 5。相反，请尝试：

```
T = ones(size(input, 1)); 
```

或者

```
T = [1, size(input, 1) - 1]; 
```

看看这是否有效。

# c# - 如何在 C# 中播放声音文件的一部分？

> ID：13066957
> 
> 赞同：1
> 
> 时间：2012-10-25T10:49:53.450
> 
> 标签：c#, visual-studio-2008, audio

我想在 C# 中播放声音文件的任何特定部分。例如：一个音频文件是 10 秒。我想播放仅在 5 秒到 8 秒持续时间内的声音。

因此，只有具有开始和结束位置的特定部分是声音文件，不会播放其他任何内容。

我在 C# 中没有找到任何支持。其他 API 可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:04:19.890

如果您使用的是 .NET 3.0 或更高版本，我建议您使用`MediaPlayer`它是一个简单的类。请参考其在[MSDN上的文档](http://msdn.microsoft.com/en-us/library/system.windows.media.mediaplayer%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:21:17.607

以下是使用[NAudio](https://github.com/naudio/NAudio)的方法（[在 NuGet 上可用](https://nuget.org/packages/NAudio)）：

```
var file = new AudioFileReader("test.mp3");
// skip the first 15 seconds
file.CurrentTime = TimeSpan.FromSeconds(15);
var trimmed = new OffsetSampleProvider(file);
// only play 10 seconds
var takeDuration = TimeSpan.FromSeconds(10);
trimmed.TakeSamples = (int)(trimmed.WaveFormat.SampleRate * takeDuration.TotalSeconds) * trimmed.WaveFormat.Channels;
var player = new WaveOut();
player.Init(new SampleToWaveProvider16(trimmed));
player.Play(); 
```

# iphone - UITextField（有时）在键入时使应用程序崩溃

> ID：13066959
> 
> 赞同：2
> 
> 时间：2012-10-25T10:49:57.630
> 
> 标签：iphone, objective-c, ios, uitextfield

我遇到了 UITextField 的问题。当我输入 UITextField 时，它会导致应用程序崩溃（有时，并非总是如此）。我怀疑这可能是内存问题，因为仅当我连续使用该应用程序 15 分钟时才会发生这种情况。我希望我正确地进行内存管理。尤其是当我在文本字段中输入内容时，应用程序会崩溃，而不是在应用程序中执行其他操作时。我不确定是什么导致了问题。

我用谷歌搜索并找到了有关 UITextField 的一些相关崩溃的讨论，但它们对我的问题没有帮助。

这是我的崩溃日志。

```
0   libobjc.A.dylib                 0x3260a5b0 objc_msgSend + 16
1   CoreFoundation                  0x32d8e034 _CFXNotificationPost + 1424
2   Foundation                      0x37d93d8c -[NSNotificationCenter postNotificationName:object:userInfo:] + 68
3   Foundation                      0x37d9784e -[NSNotificationCenter postNotificationName:object:] + 26
4   UIKit                           0x35a9d268 -[UITextField fieldEditorDidChange:] + 284
5   UIKit                           0x35a9cac0 -[UIFieldEditor webViewDidChange:] + 76
6   CoreFoundation                  0x32d8e034 _CFXNotificationPost + 1424
7   Foundation                      0x37d93d8c -[NSNotificationCenter postNotificationName:object:userInfo:] + 68
8   WebCore                         0x33bee1e0 WebThreadPostNotification + 64
9   WebCore                         0x33dc0d66 WebCore::Editor::appliedEditing(WTF::PassRefPtr<WebCore::CompositeEditCommand>) + 234
10  WebCore                         0x33dc2efe WebCore::TypingCommand::insertTextRunWithoutNewlines(WTF::String const&, bool) + 130
11  WebCore                         0x33dc2e18 WebCore::TypingCommandLineOperation::operator()(unsigned long, unsigned long, bool) const + 44
12  WebCore                         0x33dc2cfa WebCore::TypingCommand::doApply() + 150
13  WebCore                         0x33db84da WebCore::CompositeEditCommand::apply() + 118
14  WebCore                         0x33dc2c38 WebCore::TextInsertionBaseCommand::applyTextInsertionCommand(WebCore::Frame*, WTF::PassRefPtr<WebCore::TextInsertionBaseCommand>, WebCore::VisibleSelection const&, WebCore::VisibleSelection const&) + 124
15  WebCore                         0x33dc294a WebCore::TypingCommand::insertText(WebCore::Document*, WTF::String const&, WebCore::VisibleSelection const&, unsigned int, WebCore::TypingCommand::TextCompositionType) + 438
16  WebCore                         0x33dc23da WebCore::Editor::insertTextWithoutSendingTextEvent(WTF::String const&, bool, WebCore::TextEvent*) + 382
17  WebCore                         0x33dc2232 WebCore::Editor::handleTextEvent(WebCore::TextEvent*) + 274
18  WebCore                         0x33dc2110 WebCore::EventHandler::defaultTextInputEventHandler(WebCore::TextEvent*) + 12
19  WebCore                         0x33b8b7b8 WebCore::Node::defaultEventHandler(WebCore::Event*) + 244
20  WebCore                         0x33b8b132 WebCore::EventDispatcher::dispatchEvent(WTF::PassRefPtr<WebCore::Event>) + 894
21  WebCore                         0x33b8ad8a WebCore::EventDispatchMediator::dispatchEvent(WebCore::EventDispatcher*) const + 26
22  WebCore                         0x33b8ad4e WebCore::EventDispatcher::dispatchEvent(WebCore::Node*, WTF::PassRefPtr<WebCore::EventDispatchMediator>) + 94
23  WebCore                         0x33b8ac7e WebCore::Node::dispatchEvent(WTF::PassRefPtr<WebCore::Event>) + 30
24  WebCore                         0x33d42d14 WebCore::EventTarget::dispatchEvent(WTF::PassRefPtr<WebCore::Event>, int&) + 68
25  WebCore                         0x33dc1f26 WebCore::EventHandler::handleTextInputEvent(WTF::String const&, WebCore::Event*, WebCore::TextEventInputType) + 198
26  WebCore                         0x33dc1e58 WebCore::Editor::insertText(WTF::String const&, WebCore::Event*) + 12
27  WebKit                          0x3526a684 -[WebHTMLView(WebNSTextInputSupport) insertText:] + 304
28  WebCore                         0x33db7206 -[WAKResponder tryToPerform:with:] + 58
29  WebKit                          0x352905ea -[WebView(WebViewEditingActions) _performResponderOperation:with:] + 98
30  UIKit                           0x35ad803c -[UIWebDocumentView insertText:] + 40
31  UIKit                           0x35ad7ff4 -[UIKeyboardImpl insertText:] + 76
32  UIKit                           0x35aa514c -[UIKeyboardImpl addInputString:fromVariantKey:] + 2816
33  UIKit                           0x35aa3044 -[UIKeyboardImpl handleKeyEvent:] + 1636
34  UIKit                           0x35aa28b2 -[UIKeyboardLayoutStar sendStringAction:forKey:isPopupVariant:] + 482
35  UIKit                           0x35aa13a8 -[UIKeyboardLayoutStar touchUp:] + 3096
36  UIKit                           0x35aa0732 -[UIKeyboardLayout touchesEnded:withEvent:] + 382
37  UIKit                           0x359885f4 -[UIWindow _sendTouchesForEvent:] + 520
38  UIKit                           0x35975804 -[UIApplication sendEvent:] + 376
39  UIKit                           0x3597511e _UIApplicationHandleEvent + 6150
40  GraphicsServices                0x33aed5a0 _PurpleEventCallback + 588
41  CoreFoundation                  0x32e12680 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
42  CoreFoundation                  0x32e11ee4 __CFRunLoopDoSources0 + 208
43  CoreFoundation                  0x32e10cb2 __CFRunLoopRun + 642
44  CoreFoundation                  0x32d83eb8 CFRunLoopRunSpecific + 352
45  CoreFoundation                  0x32d83d44 CFRunLoopRunInMode + 100
46  GraphicsServices                0x33aec2e6 GSEventRunModal + 70
47  UIKit                           0x359c92fc UIApplicationMain + 1116
48  MyApp                           0x00087578 0x1000 + 550264
49  MyApp                           0x000030f4 0x1000 + 8436 
```

有什么帮助吗？

谢谢。

**编辑：**我的应用程序中有几个文本字段，位于不同的视图控制器中。无论我在哪个文本文本字段中输入，应用程序都会随机崩溃。只有当我输入任何文本字段时，它才会崩溃。我觉得 UITextField 还有一些其他问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T13:37:34.427

从崩溃日志来看，您是否为您的 UITextField 连接了一些通知观察者，对吗？

之后您是否进行清理（即删除通知观察者）？无论如何，事后清理是个好习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:03:17.533

看起来像泄漏，您正在向某个不符合传递消息的实例发送 objc 消息。检查是否所有的代表都被正确分配并且消息被发送到活动对象

# log4j - 在 Camel 上下文中配置 Log4j

> ID：13066962
> 
> 赞同：2
> 
> 时间：2012-10-25T10:50:08.850
> 
> 标签：log4j, apache-camel

是否可以配置 Camel 路由以将消息发送到特定的 log4j 记录器？例如，我有以下记录器：

```
<logger name="com.me.log.mylogger" additivity="false">
    <level value="debug" />
    <appender-ref ref="file_appender_messages" />
</logger> 
```

`file_appender_messages`只是一个`RollingFileAppender`。

然后我尝试在我的骆驼上下文中使用以下内容记录它：

```
<to uri="log:com.me.log.mylogger?level=INFO" /> 
```

但它在命令行而不是在指定的日志文件中输出`file_appender_messages`：

```
25-Oct-2012 11:46:44 org.apache.camel.processor.CamelLogger log
INFO: [MESSAGE BODY] 
```

我希望能够对来自不同来源的消息使用不同的记录器。我可以在我的消息处理器中做到这一点，但理想情况下它可以在路由 xml 中进行配置。可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:58:17.777

Camel 使用 slf4j 有一段时间了。所以你必须首先配置 slf4j 使用 log4j 作为后端。在 maven 中添加以下依赖项：

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-log4j12</artifactId>
  <version>1.6.1</version>
</dependency>
<dependency>
  <groupId>log4j</groupId>
  <artifactId>log4j</artifactId>
  <version>1.2.16</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:46:03.673

我通过在我的应用程序 XML 文件中将 Logger 定义为 Bean 来解决此问题

```
<bean id="myLogger" class="org.apache.log4j.Logger" factory-method="getLogger">
    <constructor-arg value="com.me.log.mylogger"/>
</bean> 
```

然后在我的路线中，当我想记录消息时，我只需将其定向到 Bean 上的相关方法

```
<to uri="bean:myLogger?method=info" /> 
```

# eclipse - Eclipse Paho 无法保持连接

> ID：13066964
> 
> 赞同：2
> 
> 时间：2012-10-25T10:50:11.813
> 
> 标签：eclipse, mqtt

我尝试在 Mosquitto 和 ActiveMQ 上使用 eclipse paho。当keepalive少于30​​秒时，一切正常。当 keepalive 超过 30 秒时，服务器会在大约 5 分钟后断开连接。

```
1351161274: Client charles_subscribe has exceeded timeout, disconnecting. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:08:44.297

谢谢，我们现在正在 Eclipse Bugzilla 中对此进行诊断 - [https://bugs.eclipse.org/bugs/show_bug.cgi?id=392825](https://bugs.eclipse.org/bugs/show_bug.cgi?id=392825)

# excel - 如何粗体突出显示重复的行excel vba

> ID：13066966
> 
> 赞同：0
> 
> 时间：2012-10-25T10:50:21.997
> 
> 标签：excel, vba

我有以下代码可以拾取重复的行，但是我无法让代码以粗体突出显示重复项以及同时删除它们。

```
Public Sub ProcessData()
Const TEST_COLUMN As String = "A" '<=== change to suit
Dim i As Long
Dim iLastRow As Long
Dim rng As Range

With ActiveSheet

    iLastRow = .Cells(.Rows.Count, TEST_COLUMN).End(xlUp).Row
    For i = 1 To iLastRow
        If .Evaluate("SUMPRODUCT(--(A" & i & ":A" & iLastRow & "=A" & i & ")," & _
    "--(D" & i & ":D" & iLastRow & "=D" & i & ")," & _
    "--(F" & i & ":F" & iLastRow & "=F" & i & ")," & _
    "--(J" & i & ":J" & iLastRow & "=J" & i & ")," & _
        "--(K" & i & ":K" & iLastRow & "=K" & i & "))") > 1 Then
            If rng Is Nothing Then
                Set rng = .Cells(i, "A").Resize(, 11)
            Else
                Set rng = Union(rng, .Cells(i, "A").Resize(, 11))
            End If
        End If
    Next i

    **If Not rng Is Nothing Then rng.Delete.font.bold = true**

End With 
```

结束子

数据集的示例和所需的输出可以在下面的以下可下载链接中看到：

[https://www.dropbox.com/s/7rhktg6b4nk6ig0/Bold_highlight_Duplicate%20.xlsm](https://www.dropbox.com/s/7rhktg6b4nk6ig0/Bold_highlight_Duplicate%20.xlsm)

任何帮助将不胜感激。谢谢你。

*编辑：*

澄清一下，这就是它的样子，只是输入应该被删除，并且粗体突出显示应该出现在输出部分：

![在此处输入图像描述](../Images/91a2508e13b09fa0ea799f6ef21ef1ea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:54:17.000

而不是`**If Not rng Is Nothing Then rng.Delete.font.bold = true**`使用以下内容：

```
If Not rng Is Nothing Then
  with rng
   .Offset(.Areas(.Areas.Count).Rows(.Areas(.Areas.Count).Rows.Count).Row + 1).Font.Bold = True
   .Delete
  end with
End If 
```

这是如何工作的？

好吧，您可以在测试重复项时设置粗体指示器，但是您采用了不同的方法，这是不允许的。

所以，你`rng`是一个多区域的选择。

您必须到达最后一个区域，然后到达该区域的最后一行，然后检索您所在的实际行。然后为之间的空格添加 +1。现在您知道输入部分覆盖了多少行 + 到输出的间隙，并且您通过此计数将您的选择偏移到输出部分。

但是，取决于您的输入/输出，可能会出现复杂情况-我在您的示例中对此进行了简要测试-有效。不过，我认为使用不同类型的循环和重复检测会更好。

# android - 如何在 TextView 中使用 Html.fromHtml() 使电话号码、链接和网址都可点击

> ID：13066968
> 
> 赞同：2
> 
> 时间：2012-10-25T10:50:29.173
> 
> 标签：android, textview, hyperlink

我想在 Textview 中使用 Html.fromHtml() 方法使链接、网址、电话号码都可点击。我正在尝试这个----

```
txt.setText(Html.fromHtml("<b> Hi this is my text </b> <a href=\"http:\/\/bruynzeelkeukens.nl\/keukenapparatuur\/fornuizen\">fornuizen<\/a>  Call me here: 011 058 299 88   ");
            txt.setMovementMethod(LinkMovementMethod.getInstance()); 
```

但这不会使电话号码可点击。但是如果我使用

```
txt.setAutoLinkMask(Linkify.ALL);
 txt.setLinksClickable(true); 
```

那么这会使电话号码可点击，但不会使锚标记可点击。
在使用 Html.fromHtml() 时，我应该怎么做才能使电话号码、链接都可点击？
因为我还必须阅读 Html 标签（比如“粗体”标签、“br”标签）而且我不想使用 WebView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-24T19:57:53.177

由于从跨区文本中删除跨度而出现此问题。Linkify 将在应用它自己的之前删除所有 html 跨度。
您必须存储您的 html 跨度并在链接后将其添加回来。

```
 private Spannable linkifyHTML(CharSequence text) {
        Spannable s = new SpannableString(text);

        URLSpan[] old = s.getSpans(0, s.length(), URLSpan.class);
        LinkSpec oldLinks[] = new LinkSpec[old.length];

        for (int i = 0; i < old.length; i++) {
            oldLinks[i] = new LinkSpec(old[i], s.getSpanStart(old[i]), s.getSpanEnd(old[i]));
        }

       Linkify.addLinks(s, Linkify.ALL);
       for (LinkSpec span : oldLinks) {
           s.setSpan(span.span, span.start, span.end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
       }
       return s;
    } 
```

请参阅此答案以获取更多信息：[如何在 textview 中创建所有 3 种类型的链接](https://stackoverflow.com/questions/39664045/how-to-make-all-3-types-of-links-in-textview/39680193#39680193)\

# visual-studio - 如何连接到 SQL Server Compact 3.5 文件作为 Visual Studio 2012 中的数据源？

> ID：13066973
> 
> 赞同：1
> 
> 时间：2012-10-25T10:51:15.803
> 
> 标签：visual-studio, sql-server-ce, visual-studio-2012, sql-server-ce-3.5

Visual Studio 2012 附带 SQL Server Compact 4.0。我已经从[http://www.microsoft.com/en-GB/download/confirmation.aspx?id=5783](http://www.microsoft.com/en-GB/download/confirmation.aspx?id=5783)安装了 SQL Server Compact 3.5但是我仍然只能选择与 SQL Server Compact 4.0 建立新的数据连接文件，而我需要从中获取数据的文件是 SQL Server Compact 3.5 文件。

![在此处输入图像描述](../Images/52a55ccf2f209dd285941719bcd6a946.png)

是否可以连接到 SQL Server Compact 3.5 文件作为 Visual Studio 2012 中的数据源？如果是这样，我应该需要哪些设置或安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:52:42.587

在[我开始](http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/d1f38b1a-8c51-4332-967b-576b24b75d58)在 SQL Server 开发人员中心 > SQL Server 论坛 > SQL Server Compact [Ray Chen](http://social.msdn.microsoft.com/profile/shulei%20chen/)上的一个线程中，Ray Chen发布了一个答案：

> 不幸的是，VS 2012 确实不支持 SQL Server CE 3.5。您必须按照[Erik 的建议](https://stackoverflow.com/a/10936459/575530)[添加链接] 将 SQL Server CE 3.5 数据库升级到 4.0。另请查看这篇文章： [Visual Studio 2012 兼容性](http://msdn.microsoft.com/en-us/library/hh266747.aspx#attention)。在“这些资产需要您的注意”部分，它说：单向升级。您必须先升级这些资产，然后才能在 Visual Studio 2012 中打开它们。升级后，您将无法在以前的版本中打开它们。下表列出了您必须升级的项目类型、文件类型和技术。SQL Server CE 3.5 包含在表中。

我在那里发布了一个附属问题，以了解如何在无法读取文件的情况下将其转换为 SQL Server Compact 4.0。

=========== 编辑 ==========

[Ray Chen](http://social.msdn.microsoft.com/profile/shulei%20chen/)继续发布对[ErikEJ](https://stackoverflow.com/users/183934/erikej)的博客文章[HOW TO：将版本 3.x 数据库文件升级到 SQL Server Compact 4.0](http://erikej.blogspot.co.uk/2010/08/how-to-upgrade-version-3x-database-file.html)和[SqlCeEngine.Upgrade 方法（字符串）](http://msdn.microsoft.com/en-us/library/bb896160.aspx)库页面的引用。

# c# - 存储来自 jQuery ajax 调用响应的数据对象

> ID：13066976
> 
> 赞同：0
> 
> 时间：2012-10-25T10:51:26.880
> 
> 标签：c#, asp.net

我正在从**asp.net 1.1**站点调用 Web 方法并得到响应。

我使用这个对象来填充一些数据，现在我想存储这个对象，这样我也可以在保存点击事件的同时将这些数据保存在数据库中。

我怎样才能做到这一点。

```
 $(document).ready(function () {
            $("#Ok").click(function () {
                $.ajax({
                    type: "POST",
                    url: "/Service.svc/xyz",
                    data: JSON.stringify(jData),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (**msg**) {
                        // STORE THIS msg object.
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                    }
                });
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:55:05.490

```
$(document).ready(function () {
            $("#Ok").click(function () {
                $.ajax({
                    type: "POST",
                    url: "/Service.svc/xyz",
                    data: JSON.stringify(jData),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(data, textStatus, jqXHR){
                        // STORE THIS msg object.
                        /* now you can store data object to where you want to store.*/
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                    }
                });
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:15:34.197

```
$(document).ready(function () {
        $("#Ok").click(function () {
            $.ajax({
                type: "POST",
                url: "/Service.svc/xyz",
                data: JSON.stringify(jData),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data){
                    // STORE THIS msg object.
                  //if hidden field has id 'name'
                  $('#name').val(data.name);//if json object contains a key 'name'
                  //if hidden field has class name
                  $('.name').val(data.name);
                  //if hidden field name is name <input type="text" name="name" />
                  $(document).filter(':[name=name]').val(data.name)
                  //do the same for all elements to save
                },
                error: function (jqXHR, textStatus, errorThrown) {
                }
            });
        });
    }); 
```

# facebook - 在 iOS 中从 facebook SDK 获取访问令牌

> ID：13066977
> 
> 赞同：4
> 
> 时间：2012-10-25T10:51:28.737
> 
> 标签：facebook, ios5

是否可以在 iOS 5 中获取登录用户的访问令牌？如果是这样，如何实现？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-12T22:43:53.370

如果您使用的是 SDK 的当前版本（此时为 v3.2.1），您可以通过以下方式获取用户的访问令牌：

`[[[FBSession activeSession] accessTokenData] accessToken]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:31:09.630

有关 ios 身份验证的更多详细信息，请访问：

[https://developers.facebook.com/docs/reference/iossdk/authentication/](https://developers.facebook.com/docs/reference/iossdk/authentication/)

[http://developers.facebook.com/ios/](http://developers.facebook.com/ios/)

[http://developers.facebook.com/docs/howtos/ios-6/](http://developers.facebook.com/docs/howtos/ios-6/)

# android - 示例应用程序的应用内计费因付款错误而失败

> ID：13066979
> 
> 赞同：1
> 
> 时间：2012-10-25T10:51:38.113
> 
> 标签：android, in-app-purchase, in-app-billing

执行以下步骤以运行示例应用程序，但应用程序失败并出现付款错误。

1.  从 android SDK 下载示例应用程序
2.  在示例应用程序代码中添加了 Google Play 公钥。
3.  更改了示例应用程序的包名称。
4.  以发布模式构建示例应用程序并对其进行签名。
5.  为示例应用程序创建了一个产品列表。
6.  发布示例应用草稿版的产品列表项（sword_001 和 potion_001）。
7.  在 Google Play 发布者帐户下注册的测试帐户。
8.  验证设备正在运行受支持的 Google Play 应用程序版本。
9.  在设备上安装了相同的签名应用程序。10.我的测试账户是我设备上的主账户。11.运行应用程序并购买剑。

当我在订单被授权时尝试购买时出现以下错误（显示“授权付款”），这通常发生在下订单后大约 30 秒（即“接受并购买”已被点击）。

**“无法处理您的付款。请登录您的谷歌钱包帐户请求支持”**

有没有人遇到同样的错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:21:06.190

当我更改 BillingService.Java 的 makeRequestBundle() 方法中的 API 版本号时，问题得到了解决：

request.putInt(Consts.BILLING_REQUEST_API_VERSION, 1);

至

request.putInt(Consts.BILLING_REQUEST_API_VERSION, 2);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:56:05.860

获得应用内计费具有挑战性。通读并整合它并不容易。我创建了一个项目，它就像一个 hello world，我建议你下载并使用它。变量太多了。我在[这里](http://mcondev.wordpress.com/2011/06/26/integrate-in-app-billing-just-3-lines-of-code-in-your-app/)记录了集成步骤。

# html - 将页脚置于窗口或页面底部，以较大者为准

> ID：13066990
> 
> 赞同：0
> 
> 时间：2012-10-25T10:52:09.907
> 
> 标签：html, css

我目前正在开发一个需要将页脚放置在窗口底部或页面内容底部（以较低者为准）的网站。我曾尝试使用该`height: 100%`方法，但这会导致问题。

我还有一个`position: fixed`标题，我的内容有一些填充（以像素为单位）。此外，页面加载后内容的高度可能会发生变化（使用手风琴等），所以我想知道是否有纯 CSS 方式将页脚定位到窗口底部或文档底部, 同时仍然允许像素填充等。

这是 HTML 的概述结构：

```
<header></header>
<div class="content">
    <footer></footer>
</div> 
```

我还整理了一个 Fiddle 来演示 CSS 目前是如何工作的：http: [//jsfiddle.net/LY6Zs/](http://jsfiddle.net/LY6Zs/)。不幸的是，我无法更改 HTML 结构（即`footer`从`.content`.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-25T10:57:42.153

您首先需要在包含所有内容的容器 div 之后

```
.container
{
min-height:100%;
position:relative;
margin:0 auto;
}

.footer{
position:absolute;
bottom:0;
} 
```

# javascript - 定义函数的属性

> ID：13066993
> 
> 赞同：1
> 
> 时间：2012-10-25T10:52:13.630
> 
> 标签：javascript

在阅读[Javascript：权威指南时，我对](http://www.amazon.co.uk/JavaScript-Definitive-Guide-Activate-Guides/dp/0596805527)**定义您自己的函数属性**部分很感兴趣。让我给你举个例子：

```
function foo( ) { 

    foo.bar++;

    return foo.bar;
};

foo.bar = 0;

foo( ); // returns 1
foo( ); // returns 2 
```

因此，上面演示了如何使用这些属性在对函数的多次调用之间持久化数据。

我知道在上面的示例中属性本质上是公共的，但是除了使用闭包将属性设为私有的明显示例之外，还有什么理由不应该使用它，或者为什么首选其他持久化数据的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:56:02.833

在经典的 OO 语言术语中，这些本质上是**公共静态**（不仅仅是公共）或类变量而不是实例变量。如果您有此类属性的用例（不属于特定实例但属于函数本身的属性），则没有理由不使用它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:48:14.523

当函数调用之间存在持久状态时——这就是 OOP。如果是 OOP，则使用原型及其实例。实例持有状态。当您需要重置状态时——只需创建一个新实例。没有繁琐的微观管理。

但是，将内容存储在函数对象上可能有利于一次性缓存一些繁重的计算。考虑一个函数：

```
calcCorpuscularVelocity.COEF = Math.sqrt(Math.pow(Math.sin(Math.PI), Math.E));
function calcCorpuscularVelocity (x) {
    return x * calcCorpuscularVelocity.COEF;
} 
```