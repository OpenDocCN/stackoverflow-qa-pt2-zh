# StackOverflow 问答 14219000-14219999

# wordpress - 适用于多平台 WordPress 开发的理想 Git 设置

> ID：14219000
> 
> 赞同：0
> 
> 时间：2013-01-08T15:58:08.223
> 
> 标签：wordpress, git, svn

我担心这是一个重复的问题？我是一家在 PC 和 Mac 之间工作的单人商店，正在寻找颠覆或 Git 我的 WordPress 网站/主题/插件开发的最佳方式。我愿意尝试任何事情。我不需要协作，只是想简化我的工作流程并避免每次都通过 FTP 传输所有内容。:)

**我需要一个设置，它将：**

a) 在我的 mac 和 pc 之间同步更改/提交/版本（类似于 Dropbox 设置）

b) 使我能够将更改（包括 MySQL 数据库更改）提交到远程服务器以供客户批准

c) 当更改出错时恢复到站点的先前版本。

d) 因为不是每个客户端都会启用 Git 或 SVN，所以我计划将最终产品压缩和 FTP 传输到客户端的服务器/网络主机。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:52:02.150

除了“自动同步”组件之外，几乎任何版本控制系统都会做你想做的事......通常，你必须手动运行类似`git pull`或`svn update`在你的工作副本中的东西，以使其保持最新状态。

Subversion 或 Git 都可以让你拥有多个工作副本——因此，一个在你的 Mac 上，一个在我们的 PC 上，一个在远程服务器上——你可以更新其中的任何一个，我认为这符合你的要求 (b) .

这两个系统——事实上，任何版本控制系统——都可以让你恢复到以前的状态。这就是我们进行版本控制的原因。

这两个系统都提供了一种“导出”存储库当前状态的机制（例如，`git archive`或`svn export`）。这就是（d）。

您可能想研究[Sparkleshare](http://sparkleshare.org/)，它是使用 Git 作为其后备存储的 Dropbox 克隆。如果您在 Mac 和 PC 上运行 Sparkleshare 并在此文件夹中进行开发，那么您将获得自动同步。

如果您已经在使用 Dropbox，您也可以简单地将工作副本放在 Dropbox 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:32:56.070

我使用 David Winter 的[“使用 Git 安装和管理 WordPress”](http://davidwinter.me/articles/2012/04/09/install-and-manage-wordpress-with-git/)取得了巨大成功。

核心 WordPress 文件作为子存储库进行维护，使更新等更易于管理。

我做的有点不同的一件事是，我实际上包含`wp-config.php`在 repo 中，只是将数据库用户/密码/服务器和 salts 移动到不同的、未跟踪的文件中。这使得将安装部署到新服务器变得非常简单——我只需添加数据库信息就可以开始了。

关于将 MySQL 数据库保存在 Git 中，我会三思而后行。这通常不应该是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:22:40.307

*   无论如何，您**都必须阅读**所选 SCM 的文档
*   Git（作为 DVCS）在您的情况下会*更好*（不需要存储库服务器）

任务

a）在远程端启用服务器，将更改从|推送到|到（您始终提交到本地存储库并且必须将更改发布到另一台主机）

b) Git 可以有任意数量的远程，其中一个可以是客户端的存储库。见第 一个）

c) 检查文档。它是任何 VCS 的 SCM 基础：`git checkout <HASH-ID>`

d)`git archive`会有所帮助

# iphone - Cocos2d：如何在触摸移动精灵时添加动量？

> ID：14219001
> 
> 赞同：0
> 
> 时间：2013-01-08T15:58:12.000
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我使用以下代码在我的应用程序中移动一个精灵：

```
- (void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch *touch = [touches anyObject];

    CGPoint touchLocation = [self convertTouchToNodeSpace:touch];

    CGPoint oldTouchLocation = [touch previousLocationInView:touch.view];
    oldTouchLocation = [[CCDirector sharedDirector] convertToGL:oldTouchLocation];
    oldTouchLocation = [self convertToNodeSpace:oldTouchLocation];

    CGPoint translation = ccpSub(touchLocation, oldTouchLocation);
    CGPoint newPos = ccpAdd(self.position, translation);

    self.position = newPos;
} 
```

它工作正常，但是当取景器在屏幕上时，精灵会移动。

我想要实现的是滑动后的某种动力，例如在 iOS 中的内置应用程序中。

谁能给我一个提示如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:33:43.627

当您放开物体时，您可以简单地获得速度（以每秒像素为单位），

```
(thisTouchPosition.x - lastTouchPosition.x) / (thisTouchTime - lastTouchTime) 
```

然后为您希望对象在释放时具有的“减速”（也以 px/秒 0.0-1.0 为单位）制作比例因子。SLOWDOWN 越低，减速越快。并且在您的渲染循环中，对于您的位置来说，这样的东西应该可以工作。FPS 是您的循环率。

```
SPEED *= SLOWDOWN
x = x + SPEED / FPS 
```

如果您没有渲染循环（您应该这样做），那么您将需要创建一个 NSTimer 并在其完成时使其无效或生成另一个线程来执行此操作。

这是未经测试的，但应该让你去。

# amazon-web-services - 准备好使用公共 MSMQ 创建 Amazon EC2 实例

> ID：14219005
> 
> 赞同：2
> 
> 时间：2013-01-08T15:58:20.440
> 
> 标签：amazon-web-services, amazon-ec2, msmq, ec2-ami

背景：我们广泛使用 MSMQ，但我们知道它不是一个完美的选择，并且会产生许多问题，我们目前无法停止使用它。

为了使用 MSMQ，我们发现我们需要一个域控制器 - 但是，当我们尝试克隆 Amazon EC2 实例以便为我们的网络场增加更多功能时，这会产生一个额外的问题。

我们所做的：

1.  安装了一个完全工作的 Web 服务器，带有 MSMQ，连接到 DC
2.  从机器创建 AMI
3.  从 AMI 创建一个新实例（我们希望我们可以简单地在这里结束）
4.  新实例准备就绪，我们在其上运行 SysPrep - 以创建具有新 SID 的新纯机器
5.  然后，当机器重新启动时，我们开始在登录到任一网络场服务器时遇到问题，在步骤 2 中创建的机器已关闭电源，我们只有第 1 步和第 3 步中的机器。我们最终必须关闭一台机器才能能够访问其他。

我们的目标：能够（理想情况下）拥有一个备用的 AMI，可用于快速启动 EC2 实例并将其添加到负载均衡器，从而减少服务器场的负载。启动实例可以是手动的，也可以是自动的，这并不重要——我们只是不想继续手动启动机器，然后手动配置它们，然后手动将它们添加到负载均衡器。

我们的问题：我们如何自动启动 Windows 2012 机器作为我们网络农场的一部分，并预先安装我们的“网站”和 MSMQ，以便当机器上线时，它是负载平衡器的一部分并开始工作？

谢谢你的帮助

# ios - TransitionFromView 移除前一个视图

> ID：14219009
> 
> 赞同：9
> 
> 时间：2013-01-08T15:58:42.897
> 
> 标签：ios, uitableview, uiviewanimationtransition

在我的应用程序中的视图之间转换时，我在使用 TransitionfromView 时遇到问题。

**设置**

这是视图控制器的基本设置。它有两个视图。一个 MKMapView 和一个 UITableView。当按下切换按钮时，它应该在地图和表格之间交替视图。

这是我的 *.h 文件

```
@interface BrowseBeaconsViewController : UIViewController <UITableViewDelegate, MKMapViewDelegate, UITableViewDataSource, CLLocationManagerDelegate >
{

__weak IBOutlet UIBarButtonItem *refreshBeacons;
__weak IBOutlet UIBarButtonItem *toggleView;
MKMapView* beaconMapView;
__weak IBOutlet UITableView* beaconTableView;
} 
```

所以 tableview 来自故事板，而 mapview 是在程序中创建的。

**问题**

```
[UIView transitionFromView:beaconTableView toView:beaconMapView duration:1.0 options:UIViewAnimationOptionTransitionFlipFromLeft completion:^(BOOL finished) {}]; 
```

当我从 MapView 从 TableView 转换时，tableview 的值为 null(0x0000000)。我确实理解 transitionfromview 的行为是从父视图中删除视图。但是当我尝试在转换后将表格视图添加为子视图时，它不起作用，因为该值为空。所以我的问题是，如果视图为空，如何在转换后添加 tableview？

PS：如果这是一个简单的问题，我深表歉意，但我是 iOS 编程的新手，并且在发布这个问题之前确实尝试过查看论坛。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-08T18:23:49.203

从该方法的文档中：

“默认情况下，fromView 中的视图在视图层次结构中被 toView 中的视图替换。如果两个视图都已经是视图层次结构的一部分，则可以在 options 参数中包含 UIViewAnimationOptionShowHideTransitionViews 选项以简单地隐藏或显示它们。”

因此，如果您希望保留两个视图，请将 beaconMapView 添加到视图层次结构中，并包含 UIViewAnimationOptionShowHideTransitionViews 选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:48:59.733

您需要保留对 beaconTableView 的单独引用，或者简单地将其声明为强而不是弱。由于 beaconTableView 已被声明为弱，iOS 5+ 明白，一旦所有其他对它的引用都已删除，您就不需要它挂起，在这种情况下，通过将其从其父视图中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T08:05:19.470

移除weak，否则视图会在看起来不再需要时立即释放。

# linux - Linux 上的 Masm32：为什么 mov [bx], ax 可以工作，但 mov [ax], bx（或 mov [bl], al）不能？

> ID：14219010
> 
> 赞同：2
> 
> 时间：2013-01-08T15:59:03.777
> 
> 标签：linux, assembly, masm

当我尝试

```
mov [ax], bx 
```

我收到以下错误：`invalid effective address` 同样适用`mov [al], bl`或类似的东西。

如果我尝试

```
mov [bx], ax 
```

有用。那么 的低字节有什么特别之处`ebx`，我怎样才能完成一些事情，`mov [al], bl`或者只是交换两个字节的内容`bx`，`ax`等等。?

提前感谢任何有用的东西:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:03:05.683

使用`[bx]`称为“寄存器间接寻址方式”。在 16 位模式下，可以以这种方式使用以下寄存器：`bx`、`bp`和。`si``di`

有关详细信息，请参阅[寄存器间接寻址模式](http://www.ic.unicamp.br/~celio/mc404s2-03/addr_modes/intel_addr.html#HEADING2-35)。

> 我怎样才能完成一些事情`mov [al], bl`

这不太有意义，因为它将使用 8 位值`al`作为地址，而在这种情况下，地址是 16 位的。如果您只是想将 的值移动`bl`到`al`，则不需要方括号：

```
mov al, bl 
```

# c# - 更改事件上的选项卡容器不反映选项卡容器外部的数据

> ID：14219011
> 
> 赞同：0
> 
> 时间：2013-01-08T15:59:07.150
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc, asp.net-ajax

我在选项卡容器上有四个选项卡，问题是在选项卡容器外的文字控件上的更改事件后数据没有反映。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T08:36:05.810

可以通过两种方式捕获 Tab 容器上的 Tab 更改：

1-整个容器的一个事件（单击 tabContainer 并双击“选择”事件）。

2-每个选项卡一个事件（单击一个选项卡并双击“选择”事件）。

在自动生成的事件代码中，您可以处理“标签容器外的文字控件”的行为，例如禁用它们或将它们涂成粉红色。

无论如何，如果控件随选项卡选择而变化，最好将其放在该选项卡内！

# php - 在 PHP 代码中对 html 表进行排序

> ID：14219018
> 
> 赞同：0
> 
> 时间：2013-01-08T15:59:19.463
> 
> 标签：php, html

我在 PHP 中创建了一个简单的 html 表。这是我的代码：图表->

```
 <div id="wrapper">
        <div class="chart">
            <h2>No. of Files Uploaded to Knowledge Base</h2>
            <table id="data-table" border="1" cellpadding="10"     cellspacing="0">

            <tr>
                    <td>Users</td>
                    <td>Project Files</td>
                    <td>Process Files</td>
                    <td>System Files</td>
                    <td>Total</td>
            </tr>   

                        <?php

                        $di = new RecursiveDirectoryIterator('upload/project/');
                        foreach (new RecursiveIteratorIterator($di) as $filename => $file) {

                        $pos = 15;
                        $file = substr("$filename", +$pos); 

                        $lenght = strlen($file);
                        $pos = strpos($file, "/");
                        $file = substr("$file",0,$pos);
                        if($file1 != '.DS_Store'){

                            $serverfiles = mysql_query("SELECT uploader FROM Project WHERE location = '$file'");

                            while($row = mysql_fetch_array($serverfiles)) {
                                $occurance1 = $row['uploader'];
                                $array1[] = $occurance1; 
                                }
                            }                           
                        }

                        $di = new RecursiveDirectoryIterator('upload/process/');
                        foreach (new RecursiveIteratorIterator($di) as $filename => $file) {

                        $pos = 15;
                        $file = substr("$filename", +$pos);                         
                        $lenght = strlen($file);
                        $pos = strpos($file, "/");
                        $file = substr("$file",0,$pos);

                        if($file != '.DS_Store'){

                            $serverfiles = mysql_query("SELECT uploader FROM Process WHERE processlocation = '$file'");

                            while($row = mysql_fetch_array($serverfiles)) {
                                $occurance2 = $row['uploader'];
                                $array2[] = $occurance2; 
                                }
                            }                           
                        }

                        $di = new RecursiveDirectoryIterator('upload/system/');
                        foreach (new RecursiveIteratorIterator($di) as $filename => $file) {

                        $pos = 14;
                        $file = substr("$filename", +$pos);                         
                        $lenght = strlen($file);
                        $pos = strpos($file, "/");
                        $file = substr("$file",0,$pos);
                        if($file != '.DS_Store'){

                            $serverfiles = mysql_query("SELECT uploader FROM System WHERE location = '$file'");

                            while($row = mysql_fetch_array($serverfiles)) {
                                $occurance3 = $row['uploader'];
                                $array3[] = $occurance3; 
                                }
                            }                           
                        }

                        $uploader = mysql_query("Select username from members");
                        while($Load = mysql_fetch_array($uploader)){
                        $value = $Load['username'];
                        $tmp = array_count_values($array1);
                        $cnt = $tmp[$value];
                        echo"<tr>";
                        echo"<td>$value</td>";
                        echo "<td>$cnt</td>";

                        $value2 = $Load['username'];
                        $tmp2 = array_count_values($array2);
                        $cnt2 = $tmp2[$value2];

                        echo "<td>$cnt2</td>";

                        $value3 = $Load['username'];
                        $tmp3 = array_count_values($array3);
                        $cnt3 = $tmp3[$value3];
                        $total = $cnt + $cnt2 + $cnt3;
                        echo "<td>$cnt3</td>";
                        echo "<td>$total</td>";
                        }
                    echo "</tr>";

                        ?>

            </table>
    </div>

          </body></html> 
```

用户是从数据库表中填充的。通过读取和计算目录中的文件数量来填充文件数字。我希望能够按总数字自动对表格进行排序，因此总数字最高的用户将排在首位，依此类推......所以它看起来类似于排行榜。

我不知道该怎么做。有人可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:01:05.290

你为什么不把它也保存到数据库中呢？

```
SELECT uploader FROM Project WHERE location = '$file' ORDER BY field 
```

否则，我将使用 将所有用户的数据库查询放入一个数组中`mysql_fetch_array`，遍历它们并计算文件数，然后将此值存储到数组中。

然后对数组进行排序（如“ [Sort multidimensional Array by Value (2)](https://stackoverflow.com/questions/2699086/sort-multidimensional-array-by-value-2) ”）并再次对其进行迭代以输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:19:37.850

代替内联回显所有内容，将所有数据存储在一个数组中，然后您可以使用[usort()](http://php.net/manual/en/function.usort.php)对数组进行排序。然后简单地遍历数组以回显值。

```
$table_rows = array(); //add this
$counter = 0; //add this
while($Load = mysql_fetch_array($uploader)){
    //...more code here but not going to put everything
    $counter++;
    $table_rows[$counter] = array();
    $table_rows[$counter]['username'] = $value;
    $table_rows[$counter]['project'] = $cnt;
    //...more code here but not going to put everything
}

function cmp_rows($a,$b) {
    if ($a['total'] == $b['total']) {
        return 0;
    }
    return ($a['total'] > $b['total']) ? -1 : 1;
}

usort($table_rows,'cmp_rows');

foreach($table_rows as $row) {
    echo "<tr>";
    echo "<td>{$row['username']}</td>";
    //...more code here but not going to put everything
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:21:11.983

**方法一**

根据您的要求，完成此操作的最佳方法是从数据库中获取排序结果，如下所示。

```
SELECT * FROM table_name WHERE ORDER BY field_name desc 
```

**方法二**

您可以使用 PHP 函数对结果集进行排序，例如`array_multisort`. 阅读以下链接以获取示例。下面显示了几个链接。谷歌获取更多链接。

[http://shiflett.org/blog/2011/jun/sorting-multi-dimensional-arrays-in-php](http://shiflett.org/blog/2011/jun/sorting-multi-dimensional-arrays-in-php)

[按值排序多维数组](https://stackoverflow.com/questions/2699086/sort-multidimensional-array-by-value-2)

[如何在 PHP 中对多维数组进行排序](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)

[如何在 PHP 中对多维数组进行排序](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)

**方法 3 - 可选：仅供参考**

您可以使用jQuery Javascript 库的插件[DataTables来根据需要对表格进行排序。](http://www.datatables.net/)

# python - HREF 值使用 BS4 搜索网页

> ID：14219021
> 
> 赞同：0
> 
> 时间：2013-01-08T15:59:34.853
> 
> 标签：python, beautifulsoup

我正在开发第 3 方应用程序，我已经阅读了网页源内容的视图。从那里我们必须只收集一些`href`具有类似`/aems/file/filegetrevision.do?fileEntityId`. 是否可以？我的一个给了我所有的`href`价值观。

***HTML*** **（HTML 的一部分）* *

```
<td width="50%">
<a href="/aems/file/filegetrevision.do?fileEntityId=10597525&cs=9b7sjueBiWLBEMj2ZU4I6fyQoPv-g0NLY9ETqP0gWk4.xyz">
screenshot.doc
</a>
</td> 
```

**代码**

```
for a in soup.find_all('a', {"style": "display:inline; position:relative;"}, href=True):
    href = a['href'].strip()
    href = "https://xyz.test.com/" + href
print(href) 
```

谢谢

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:01:55.460

`href`是的，只需为属性使用适当的过滤器。像

```
def filter(href):
    return '/aems/file/filegetrevision' in href

soup.find_all('a', href=filter) 
```

除了函数，您还可以使用`RegexObject`对象作为过滤器：

```
filter = re.compile(some_regular_expression)
soup.find_all('a', href=filter) 
```

请参阅文档：[过滤器种类](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#kinds-of-filters)

# javascript - 如何在带有 Backbone 的生态模板中使用自定义模型功能？

> ID：14219022
> 
> 赞同：1
> 
> 时间：2013-01-08T15:59:41.520
> 
> 标签：javascript, jquery, ruby-on-rails, backbone.js

**楷模**

```
Network.Models.FeedItem = Backbone.Model.extend({
  isPost: function() {
    return this.get('template') === 'post';
  }
})

Network.Models.Post = Backbone.Model.extend({
  urlRoot: '/p',

  hasImageInDetails: function() {
    if(this.get('details').match(/<img[^<]*>[\w\d]*<\/img>|<img[^\/]*\/>/i)) {
      return true
    }
  }
)} 
```

**模板** `feed_items/post.jst.eco`

```
 <% if @model.hasImageInDetails(): %>
    has image
  <% end %> 
```

**意见**

```
Network.Views.FeedItemView = Backbone.View.extend({
  initialize: function() {
    var self = this;
    this.template = JST[this.path()];
  },

  render: function() {
    var self = this;
    $(this.el).html(this.template({ model: this.model }));

    if (this.model.isPost()) {
      this.questionView = new Network.Views.FeedItems.Post({
        model: this.model,
        el: this.$el,
        parent: this
      });
    }
  }
});

Network.Views.FeedItems.Post = Backbone.View.extend({
  initialize: function() {
    this.render();
  },

  render: function() {
    var self = this;
  }
}); 
```

但我收到一个错误：

```
Uncaught TypeError: Object [object Object] has no method 'hasImageInDetails' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:17:26.007

从您的代码看来，您希望`FeedItemView`处理类型的模型`FeedItem`，因为您调用了一个方法`model.isPost()`，该方法在`FeedItem`. 模型上定义了 Eco 找不到的方法`Post`，因此从逻辑上讲，其中一个会失败。

你的意思是`Post`从延伸`FeedItem`？在这种情况下，而不是：

```
Network.Models.Post = Backbone.Model.extend({ ... }); 
```

您应该这样声明模型：

```
Network.Models.Post = Network.Models.FeedItem.extend({ ... }); 
```

# ios - 如何预取关系 NSManagedObject 的关系

> ID：14219024
> 
> 赞同：1
> 
> 时间：2013-01-08T15:59:41.973
> 
> 标签：ios, core-data, nsmanagedobject, nsfetchrequest

我正在搜索，需要加快速度。我有一系列汽车零件，我想找到有这些零件的汽车。这部分我做得很好。NSManagedObject Cars.h

（汽车有一个名为 ToCarParts 的 NSSet，它列出了汽车的所有汽车零件）

NSMagagedObject Parts.h（Parts 有一个名为 ToCars 的 NSSet，它列出了与此关联的所有汽车）

```
//This takes all results gathered by using parts to search for car, and converts them to have the main object be a car
-(NSArray*)convertResultsToCars:(NSArray*)records{
    NSMutableArray *manipulator =[NSMutableArray arrayWithArray:records];
    NSMutableArray *convertedArray =[[NSMutableArray alloc]init];

    for (int i=0; i<[manipulator count]; i++) {
        CarPart *FromManipulator=(CarPart*)[manipulator objectAtIndex:i];
        [convertedArray addObjectsFromArray:[[partFromManipulator toCars]allObjects]];
    }

    NSLog(@"Results from core data = %i",[convertedArray count]);
    return [NSArray arrayWithArray:convertedArray];
} 
```

当我从这里获取结果时，问题出现了，稍后必须在应用程序中加载所有 carParts。

```
Car *carResult =(Cars*)[resultsConvertedToCarsArray objectAtIndex:i];

        partsFromCar =[NSMutableArray arrayWithArray:[[carResult toParts]allObjects]]; 
```

如何在我的原始查询中预取上述内容，以便此信息已加载到对象中？

这是我的原始获取请求：

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"CarParts" inManagedObjectContext:[self managedObjectContext]];
[fetchRequest setEntity:entity];
    [fetchRequest setPredicate:[self parseCarPartsIntoAPredicate:carPartsArray]];
    [fetchRequest setReturnsDistinctResults:YES];
    //I guess I would use something like this? but how would I structure it?
    [fetchRequest setRelationshipKeyPathsForPrefetching:@"I need to prefetch the toParts nsset of the cars found here (although in reality it brings up every instance of that car part, which I then have to convert into a car... something like found a car part, car for that part is a buick, what are the parts of the buick? ok, preload those parts"]; 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T20:01:39.380

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Post"];
[fetchRequest setRelationshipKeyPathsForPrefetching:@[@"Picture"]]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-19T18:03:16.170

创建了一个 nsmanagedobject 来保存这些对象...

# mysql - 一个数据库表是否可以在不违反任何设计原则的情况下引用多个表

> ID：14219025
> 
> 赞同：2
> 
> 时间：2013-01-08T15:59:46.920
> 
> 标签：mysql, database

这是“什么是最佳实践”的问题。

我有 3 个表：订单、客户和地址。

```
Order
------
ID
ADDRESS_ID

Customer
------
ID

Address
------
ID
CUSTOMER_ID
IS_HIDDEN 
```

用户可以有多个地址，并且可以随时自由编辑它们。当用户下订单时，我需要存储他当时地址的“快照”，将其与订单相关联并使其对用户不可用。换句话说，我想复制将由 Order 表而不是 Customer 拥有的地址行。需要以某种方式指示此所有权（例如使用 IS_HIDDEN 标志）。

这是正确的方法，地址表中的某些数据有时由客户表“拥有”，有时由“订单”“拥有”吗？

另一种解决方案是按顺序复制地址表中的所有列，因此所有权将是明确的，但我对模式中的重复有不好的感觉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:08:16.000

如果您真的想要地址的快照，*您可能应该将地址存储在**order***中，而不是单独的表中。

您将使您的查询和数据变得不必要地复杂。

通过您所描述的实现，无论如何您都会得到重复。

**例子：**

> 客户地址 = 1 条街道
> 
> 客户下订单的地址隐藏在表格中。
> 
> 客户使用相同的地址再次下订单。地址被保存并隐藏在表格中。

最终结果将是：

```
Customer ID | Address  | Hidden  
    1       | 1 street |  false  
    1       | 1 street |  true  
    1       | 1 street |  true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:11:18.270

请使用链接表（有时称为关联表）将地址链接到它应该链接到的东西。

“客户”和“订单”不是地址的一部分 - 并且不应包含在该表中以进行适当的规范化。

尝试类似的东西

```
customer_address
------------------
customer_id
address_id
begin_dt
end_dt
type <- indicate physical location, mailing address etc. 
```

相似地

```
order_address
---------------
order_id
address_id
type <- ship to, bill to - or others. 
```

# python - Python多处理：TypeError：预期的字符串或Unicode对象，找到NoneType

> ID：14219038
> 
> 赞同：17
> 
> 时间：2013-01-08T16:00:27.480
> 
> 标签：python, python-2.7, python-multithreading

我正在尝试并行下载整个 ftp 目录。

```
#!/usr/bin/python
import sys
import datetime
import os
from multiprocessing import Process, Pool
from ftplib import FTP
curYear=""
remotePath =""
localPath = ""

def downloadFiles (remotePath,localPath):
        splitted = remotePath.split('/');
        host= splitted[2]
        path='/'+'/'.join(splitted[3:])
        ftp = FTP(host)
        ftp.login()
        ftp.cwd(path)
        filenames =  ftp.nlst()
        total=len(filenames)
        i=0
        pool = Pool()
        for filename in filenames:
                        local_filename = os.path.join(localPath,filename)
                        pool.apply_async(downloadFile, (filename,local_filename,ftp))
                        #downloadFile(filename,local_filename,ftp);
                        i=i+1

        pool.close()
        pool.join()
        ftp.close()

def downloadFile(filename,local_filename,ftp):
        file = open(local_filename, 'wb')
        ftp.retrbinary('RETR '+ filename, file.write)
        file.close()

def getYearFromArgs():
        if len(sys.argv) >= 2 and sys.argv[1] == "Y":
                year = sys.argv[2]
                del sys.argv[1:2]
        else:
                year = str(datetime.datetime.now().year)
        return year

def assignGlobals():
        global p
        global remotePath
        global localPath
        global URL
        global host
        global user
        global password
        global sqldb
        remotePath = 'ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/isd-lite/%s/' % (curYear)
        localPath = '/home/isd-lite/%s/' % (curYear)

def main():
        global curYear
        curYear=getYearFromArgs()
        assignGlobals()
        downloadFiles(remotePath,localPath)

if __name__ == "__main__":
        main() 
```

但我得到了这个例外：

```
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib64/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib64/python2.6/multiprocessing/pool.py", line 225, in _handle_tasks
    put(task)
TypeError: expected string or Unicode object, NoneType found 
```

如果我注释掉这一行：

```
pool.apply_async(downloadFile, (filename,local_filename,ftp) 
```

并删除此行的注释：

```
downloadFile(filename,local_filename,ftp); 
```

然后它工作得很好，但它很慢而且不是多线程的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-25T16:05:14.373

**2014 年 5 月 9 日更新：**

我已经确定了确切的限制。只要对象可以被[Python 的 pickle 工具](https://docs.python.org/2/library/pickle.html)腌制，就可以跨进程边界将对象发送到工作进程。我在原始答案中描述的问题发生是因为我试图向工作人员发送文件句柄。一个快速的实验说明了为什么这不起作用：

```
>>> f = open("/dev/null")
>>> import pickle
>>> pickle.dumps(f)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/pickle.py", line 1374, in dumps
    Pickler(file, protocol).dump(obj)
  File "/usr/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/usr/lib/python2.7/pickle.py", line 306, in save
    rv = reduce(self.proto)
  File "/usr/lib/python2.7/copy_reg.py", line 70, in _reduce_ex
    raise TypeError, "can't pickle %s objects" % base.__name__
TypeError: can't pickle file objects 
```

因此，如果您遇到导致您找到此 Stack Overflow 问题的 Python 错误，请确保您跨进程边界发送的所有内容都可以腌制。

**原答案：**

我回答有点晚了。但是，在尝试使用 Python 的多处理模块时，我遇到了与原始海报相同的错误消息。我将记录我的发现，以便任何偶然发现此线程的人都可以尝试。

在我的情况下，发生错误是因为我试图发送到工作人员池：我试图传递一个文件对象数组供池工作人员咀嚼。这显然太多了，无法在 Python 中跨进程边界发送。我通过发送指定输入和输出文件名字符串的池工作者字典解决了这个问题。

因此，您提供给函数的可迭代对象（例如`apply_async`(I used `map()`and `imap_unordered()`)）似乎可以包含数字或字符串列表，甚至是详细的字典数据结构（只要值不是对象）。

在你的情况下：

```
pool.apply_async(downloadFile, (filename,local_filename,ftp)) 
```

`ftp`是一个可能导致问题的对象。作为一种解决方法，我建议将参数发送给工作人员（在这种情况下看起来像`host`和`path`），并让工作人员实例化对象并处理清理工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T06:28:44.590

你有没有尝试过：

```
pool.apply_async(downloadFile, args=(filename,local_filename,ftp)) 
```

原型是：

```
apply_async(func, args=(), kwds={}, callback=None) 
```

# javascript - 使css3过渡始终沿同一方向旋转

> ID：14219041
> 
> 赞同：8
> 
> 时间：2013-01-08T16:00:45.750
> 
> 标签：javascript, css, css-transitions

我试图让前/后 div 始终朝同一个方向翻转。我用css和javascript实现了翻转，但我很难考虑如何让它总是向右旋转，而不是向右旋转然后回到左边。

我基本上使用带有以下 css 的 div

```
 /* flip speed goes here */
  .flipper {
    -webkit-transition: 0.6s;
    -webkit-transform-style: preserve-3d;

    -moz-transition: 0.6s;
    -moz-transform-style: preserve-3d;

    -o-transition: 0.6s;
    -o-transform-style: preserve-3d;

    transition: 0.6s;
    transform-style: preserve-3d;

    position: relative;
    border-radius: 5px;
  -webkit-border-radius: 5px;
    padding: 5px;
    margin-left: 3px;
    z-index: 3;
    width: 160px;
    height: 145px;
    display:block; 
  } 
```

当用户点击它时，我将“翻转”类添加到 div 中，将 css 更改为：

```
 /* flip the pane when hovered */
  .flip-container.flipped .flipper {
    -webkit-transform: rotateY(180deg);
    -moz-transform: rotateY(180deg);
    -o-transform: rotateY(180deg);
    transform: rotateY(180deg);
  } 
```

我应该总是增加旋转角度吗？还有其他想法吗？

这是[小提琴中的当前状态和完整的CSS](http://jsfiddle.net/7WgKL/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T22:29:46.590

我不认为它可以通过转换来完成。也许你可以用关键帧来做到这一点。类似的代码：

```
@-webkit-keyframes rotate1 {
    from {-webkit-transform: rotate(0deg)}
    to {-webkit-transform: rotate(180deg)}
}
@-webkit-keyframes rotate2 {
    from {-webkit-transform: rotate(180deg)}
    to {-webkit-transform: rotate(360deg)}
}

#rotable {
    background-color: red;
    -webkit-animation-name: rotate2;
    -webkit-animation-duration: 3s;
    -webkit-transform: rotate(180deg); 
}

#rotable:hover {
    background-color: yellow;
    -webkit-animation-name: rotate1;
    -webkit-animation-duration: 3s;
} 
```

做与您想要的类似的事情。请注意，转向方向始终相同。

另一种可能性，混合过渡和动画（对于过渡方向相反的变化......）

```
.container {
  perspective: 500px;
}

.test {
  transform: rotate(360deg);
  transition: transform 4s;
}

.container:hover .test {
  transform: rotateY(180deg);
  animation: turn 4s;
}

@keyframes turn {
  from {transform: rotate(0deg);}
}

div {
  display: inline-block;
  width: 200px;
  height: 200px;
}

.test {
    background-color: lightblue;  

}
```

```
<div class="container">
<div class="test">TEST</div>
</div>
```

# c - 在不初始化的情况下使用 memset 或 strtok

> ID：14219045
> 
> 赞同：0
> 
> 时间：2013-01-08T16:00:52.390
> 
> 标签：c

```
char *tokens[100];  

memset(tokens,'\0',sizeof(tokens));  

tokens[n]=strtok(tempVar,","); 
```

此代码有效吗？我认为 memset 正在填充随机的内存位置，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:05:26.057

它是有效的，但不是很有用，因为没有很好地定义将一堆指针设置为全位为零的结果。不能保证`NULL`指针（在内存中）看起来“所有位为零”，所以这是不好的做法。

不，这不是在填充“随机”内存，而是在填充`tokens`数组占用的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:05:05.210

它将清除由 100 个指针组成的数组的令牌，而不是这些指针指向的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:05:33.647

我会将 memset 位重写为：

```
memset(tokens, 0, sizeof(tokens)); 
```

因为您所做的实际上是将零分配给数组中的所有指针。否则代码是有效的，但我不确定它是否符合您的期望。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T16:05:47.487

它是有效的代码（除了`n`在示例中未定义）。

`memset`像这样*正在*初始化。您正在将整个`tokens`变量归零。这不是一个随机的位置。在您的示例中，这也不是强制性的。

另外，请注意，`strtok`它*不会*返回令牌的副本，而是修改`tempVar`并返回指向其元素的指针。如果`tempVar`超出范围，`tokens`元素指向的内存位置将成为悬空指针，取消引用它们将调用未定义的行为。

# javascript - 使用javascript在html中重新排序动态表

> ID：14219046
> 
> 赞同：2
> 
> 时间：2013-01-08T16:00:59.957
> 
> 标签：javascript

我有一个 html 页面，我可以在其中动态添加行和删除行。现在我的目标是重新排序更新 id 的行。

例如，我在一行中有 3 列，其中第 3 列是基于 rowid 的 id。所以一旦我删除一行，我需要重新排序这个 ID。这可能使用javascript吗？

示例代码在这里

```
<SCRIPT language="javascript">
      function addRow(tableID) {

           var table = document.getElementById(tableID);

           var rowCount = table.rows.length;
           var row = table.insertRow(rowCount);

           var cell1 = row.insertCell(0);
           var element1 = document.createElement("input");
           element1.type = "checkbox";
           cell1.appendChild(element1);

           var cell2 = row.insertCell(1);
           cell2.innerHTML = rowCount ;

           var cell3 = row.insertCell(2);
           var element2 = document.createElement("input");
           element2.type = "text";
           element2.id = "batch"+rowCount;
           cell3.appendChild(element2);

      }

      function deleteRow(tableID) {
           try {
           var table = document.getElementById(tableID);
           var rowCount = table.rows.length;

           for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                     table.deleteRow(i);
                     rowCount--;
                     i--;
                }

           }
           }catch(e) {
                alert(e);
           }
      }

 </SCRIPT> 
```

```
 <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

 <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

 <TABLE id="dataTable" width="350px" border="1">
      <TR>
      </TR>
 </TABLE> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:43:24.383

尝试这个：

```
function reorder(tableID) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    for(var i=1; i<=rowCount; i++) {
        var row = table.rows[i];
        row.cells[1].innerHTML= i;
    }
} 
```

希望它有效。

# api - 如何有效地使用 Angular $resource 与子对象？

> ID：14219050
> 
> 赞同：1
> 
> 时间：2013-01-08T16:01:04.390
> 
> 标签：api, angularjs

我正在使用 Angular`$resource`来获取/更新我的项目对象，简化版本如下所示：

```
{
    _id: "12345",
    name: "whatever",
    revisions: [
        { _id: "67890",
          comments: [
               { _id: "13579", body: "here's a comment" }
          ]
        }
} 
```

所以每个 Project 都包含一个 Revision 对象数组，其中包含一个 Comment 对象数组，并且我对每个对象都有一个 ID。

如果没有整个项目对象，我的应用程序将毫无用处，因此似乎最有效的做法是在页面加载时仅请求一次项目。假设我想更新或添加一个 Revision（这是一个子对象数组），我*认为*理想的情况是我可以找到该 Revision 对象然后调用`$save`它。问题是项目的子对象不继承`$resource`赋予根项目对象的功能。

我意识到我可以只更新我范围内的修订对象，然后调用`$save`项目，但是我的应用程序在创建修订时需要一个非常具体的行为，这与更新项目时不同，也不同于创建评论时， ETC。

我知道我可以创建一种`$resource`名为 Revision 的新类型并为其提供唯一的 URL，但为了更新该对象，我需要首先请求它（效率低下，对吗？）。

有人对我应该如何解决这个问题有任何建议吗？我比使用更好`$http`吗`$resource`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:25:49.047

如果您只获取一次数据并且不需要对其进行太多更新，那么使用`$http`and可能会更好`jsonp`。`$resource`是在`$http`内部使用，所以从长远来看差别不大。

# azure - 获取存储在 Windows Azure 中托管的网站上的图像

> ID：14219056
> 
> 赞同：0
> 
> 时间：2013-01-08T16:01:33.900
> 
> 标签：azure, azure-web-app-service

我有一个托管在 Windows Azure 中的基本网站。这是一个在共享模式下运行的网站。它允许用户上传几张照片。目前，用户可以成功上传照片。上传的照片存储在根据用户名动态创建的目录中。

我需要下载这些照片以进行备份。我的问题是，我如何获得它们？它不像我可以登录到机器并抓住目录结构并将其压缩。

我在这里有什么选择？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:27:38.063

我的建议是将照片上传到[Azure Blob Service](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)。它们将安全地存储在云中，您可以随时访问它们。此外，如果您的服务器上发生任何事情，您将能够从 blob 服务获取照片。

如果用户照片存储在 blob 中，您甚至不必下载用户照片进行备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:25:51.033

您可以通过 FTP 访问存储在 Windows Azure 网站中的所有数据（更多信息：[Windows Azure 网站：通过 FTP 上传/下载文件并收集诊断日志](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/19/windows-azure-website-uploading-downloading-files-over-ftp-and-collecting-diagnostics-logs.aspx)）。

# python - 在 python 中传递算术表达式而不评估它们

> ID：14219058
> 
> 赞同：2
> 
> 时间：2013-01-08T16:01:40.657
> 
> 标签：python, variables

我已经搜索并找不到我的问题的直接答案，所以如果之前已经发布/回答过，我们深表歉意。我在 python 中工作，我需要传递包含变量的表达式，但我不希望它们立即被评估。

例如：

```
r = x*y 
```

我希望程序记住，为了计算 r，它需要将 x 和 y 相乘，而不是当时显式计算它。我试过使用：

```
x = None
y = None
r = x*y 
```

但这不允许对变量进行操作。我已经使用字符串管理它，然后使用“eval”，但它不是一个非常优雅的解决方案，而且它也非常缓慢。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:06:24.813

你可以使用一个`lambda`表达式：

```
>>> x = None
>>> y = None
>>> r = lambda : x*y
>>> r()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 1, in <lambda>
TypeError: unsupported operand type(s) for *: 'NoneType' and 'NoneType'
>>> x = 1
>>> y = 2
>>> r()
2 
```

你甚至可以更喜欢一门课：

```
class DeferredEval(object):
    def __init__(self,func):
        self.func = func

    def __call__(self):
        return self.func()

    def __add__(self,other):
        return self.func() + other

    def __radd__(self,other):
        return other + self.func()

x = None
y = None
r = DeferredEval(lambda:x*y)

try:
    a = 1 + r
except TypeError as err:
    print "Oops, can't calculate r yet -- Reason:",err

x = 1
y = 2
print 1 + r
print r + 1 
```

输出：

```
Oops, can't calculate r yet -- Reason: unsupported operand type(s) for *: 'NoneType' and 'NoneType'
3
3 
```

当然，如果你想做一些不是加法、减法的事情，你需要在这里添加一大堆更多的方法……当然，你必须实际*调用* `r`才能得到你的结果——但是这还不错吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:20:20.973

您可能会查看[Math Evaluator实用程序的](http://utilitymill.com/utility/Math_Evaluator)[源代码](http://utilitymill.com/edit/Math_Evaluator)，以了解如何创建表达式以供以后进行评估。[Ideone.com](http://ideone.com/)上的这个[演示](http://ideone.com/AxRv4X)有助于展示代码可以完成的工作。

```
if __name__ == '__main__':
    # Run a simple demo that shows evaluator's capability.
    namespace = {}
    expression = tokens('x * y -> r')
    print expression
    evaluate('2 -> x; 3 -> y', namespace)
    expression.evaluate(namespace)
    print 'r =', namespace['r']
    alternate = Operation(Operation(Variable('x'), '+', Variable('y')), '->', Variable('r'))
    print alternate
    alternate.evaluate(namespace)
    print 'r =', namespace['r'] 
```

# java - 弹簧豆错误

> ID：14219059
> 
> 赞同：0
> 
> 时间：2013-01-08T16:01:47.900
> 
> 标签：java, spring, hibernate, orm

**更新：添加 Maven 依赖** **更新：通过添加 Maven 依赖解决了这个错误 **

再会。我有这部分 AplicationContext.xml

```
 <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="namingStrategy">
        <ref bean="namingStrategy"/>
    </property>
    <property name="mappingResources">
        <list>
            <!--<value>genericdaotest/domain/Person.hbm.xml</value>-->
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
    <property name="dataSource">
        <ref bean="dataSource"/>
    </property>
</bean> 
```

Spring 和 Hibernate 的 Maven 开发

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>2.0.6</version>
        </dependency>

      <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.2.Final</version>
        </dependency> 
```

但是，当我启动我的应用程序时，它告诉我这个错误

```
Cannot find class [org.springframework.orm.hibernate3.LocalSessionFactoryBean] for bean with name 'sessionFactory' defined in class path resource [WEB-INF/applicationContext.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.LocalSessionFactoryBean 
```

但我使用的是hibernate4。它有什么样的魔法？=) 我已经尝试重新部署应用程序，但结果是一样的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:16:21.387

您错过了 Spring-ORM 模块：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency> 
```

[检查包列表](http://mvnrepository.com/artifact/org.springframework/spring-orm/3.1.1.RELEASE)，它包含`org.springframework.orm.hibernate3`您需要的包和类。

另外，我认为课程是错误的，不应该是`hibernate4.LocalSessionFactoryBean`吗？你在使用注解吗？还是 XML？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:16:43.327

在 spring 应用程序上下文中更改会话工厂以使用 hibernate 4 作为 maven 依赖项状态。

org.springframework.orm.hibernate4.LocalSessionFactoryBean

并添加 spring-orm 依赖项

# matlab - 在循环中使用 textread 时出错

> ID：14219061
> 
> 赞同：1
> 
> 时间：2013-01-08T16:01:54.790
> 
> 标签：matlab

我有以下代码，我试图在其中查找所有 data.m 文件并删除与 expr 匹配的字符串。

```
fileData = dir();  
m_file_idx = 1;     
filenames = {fileData.name};  
index = regexp(filenames,'\w*_data.m\w*','match') ;
inFiles = filenames(~cellfun(@isempty,index));    
i=1;
for idx = i : length(inFiles)        
    data_m_files=inFiles{i}; 
    disp(data_m_files)
    C = textread('data_m_files', '%s', 'delimiter', '\n');
    expr ='\.DataType[ =]+''auto''';  
 C = C(cellfun(@isempty, regexp(C, expr)));
    i=i+1;
end 
```

我的输出是：

```
this_is_data.m

Error using textread (line 167)
File not found. 
```

如果我通过手动输入 data_m_file 名称使用相同的代码，textread 工作正常，我得到了想要的结果。但是当我尝试放入循环时，它给了我错误。我使用 textread 是否不正确？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:03:21.263

是的，你使用`textread`不正确。

的第一个参数`textread`必须是包含文件名的字符串。您已将其指定为`'data_m_files'`，因此 MATLAB 会查找名为“data_m_files”的文件，该文件显然不存在。

您应该传递 的值`data_m_files`，因此从 中删除引号`'data_m_files'`，如下所示：

```
C = textread(data_m_files, '%s', 'delimiter', '\n'); 
```

这应该有效。

# jquery - jquery浮动画布插件

> ID：14219063
> 
> 赞同：0
> 
> 时间：2013-01-08T16:02:02.437
> 
> 标签：jquery, html, canvas

我最近访问了这个网站[http://www.consumerbarometer.com](http://www.consumerbarometer.com)并被它的设计所吸引。我尝试寻找相同类型的 jquery 插件，但不是运气。我最终找到了这个，[http://blog.hostgrenade.com/2012/04/25/html5-canvas-bubble-demo-v2/](http://blog.hostgrenade.com/2012/04/25/html5-canvas-bubble-demo-v2/)但它仍然不相似。

有谁知道有没有类似的jquery插件？

先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:16:42.837

你不需要插件，你只需要一个位于内容后面的[全屏画布](https://stackoverflow.com/questions/8684820/scale-html-canvas-to-browser-window-size-but-dont-scale-elements-within-the-can)，你可以用你选择的颜色在上面绘制动画圆圈。
^(*注意：该页面上的答案恰好是我的。*)

您是否希望插件会为您处理某个特定部分？

事实上，这甚至不需要是 a ，因为您可以使用低不透明度的动画定位元素`<canvas>`产生相同的效果。`<img>`唯一“棘手”的部分是将它们放在一个容器中，`overflow:hidden`以便在内容移出屏幕边缘时不会出现滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:20:21.373

如果你真的想使用 jQuery，你可以使用[jQuery SVG](http://keith-wood.name/svg.html)。它不使用画布，但你可以做类似的事情。否则，您可以查看 Javascript 画布库（[请参阅本主题](https://stackoverflow.com/questions/8938969/current-state-of-javascript-canvas-libraries2012)），例如 FabricJS 或 KineticJS。

PS：就像 Phrogz 说的，你不需要插件。您只需要使用“现代浏览器”

# java - 如何将我的 Java Slick StateBasedGame 放到网站上

> ID：14219066
> 
> 赞同：0
> 
> 时间：2013-01-08T16:02:06.683
> 
> 标签：java, applet, lwjgl

我使用 Slick 制作了一个 2D Java 游戏，它扩展了 StateBasedGame，它没有扩展 JApplet，因此它不是真正的应用程序，但从下面的链接中它表明 StateBasedGame 是 Slick API 的一部分，它可以用作小程序如果 html 代码编码正确，这里是链接：

[http://ninjacave.com/slickapplet](http://ninjacave.com/slickapplet)

我尝试修改它以适合我的代码并提出以下内容：

```
 <applet code="org.lwjgl.util.applet.AppletLoader… 
archive="lwjgl_util_applet.jar" 
codebase="." 
width="640" height="480">

    <param name="al_title" value="Ham Blaster"> 
    <param name="al_main" value="org.newdawn.slick.AppletGameConta… 
    <param name="game" value="org.javagame.Game">

    <param name="al_jars" value="racegame.jar, lwjgl.jar, slick.jar"> 

    <param name="al_windows" value="windows_natives.jar"> 
    <param name="al_linux" value="linux_natives.jar"> 
    <param name="al_mac" value="macosx_natives.jar"> 

    <param name="separate_jvm" value="true"> 
    </applet> 
```

我复制了它并编辑了需要编辑的内容，例如添加我的主类 Game、我的包是 javagame 和我的 jar 文件，其中包含我的所有 lass 和图像（使用 eclipse 制作），它是 racecar.jar使用上面显示的html代码。

完成所有这些之后，当我运行我的 html 代码时，我收到一条错误消息：

ClassNotFoundException org.lwjgl.util.applet.AppletLoader

除了将该代码放入 html 并下载最新版本的 lwjgl-2.8.5 之外，我没有做任何其他事情，我在其中的任何地方都找不到 lwjgl_util_applet_AppletLoader，我能找到的最接近的是 lwjgl_util_applet，我该如何修复我的代码以便我的游戏作为一个小程序工作。

# javascript - codeigniter 将 html 渲染为图像

> ID：14219068
> 
> 赞同：1
> 
> 时间：2013-01-08T16:02:10.563
> 
> 标签：javascript, jquery, codeigniter, mpdf

我有一个需要打印到“A4”内容的页面。所以我尝试使用 mPDF 库。在那个页面中，我有一个日历内容。起初我使用 CI 的日历，当我将它渲染为 mPDF 时，它工作得很好。但是由于用户的规范，我最近将日历更改为 jquery 日历。所以我用[FullCalendar](http://arshaw.com/fullcalendar/ "点击链接了解更多信息。。")改变了它。当我将它传递给 mPDF 时，它在该页面中显示了我的其他内容，但 FullCalendar 的 javascript 没有出现在 PDF 中。

我正在考虑将我的输出更改为图像。是否有任何工具（意思是库）可以将我的输出更改为图像并在浏览器中显示？

注意：我的页面中有**javascript**和**css**，据我所知，大多数 pdf 生成工具无法呈现 javascript 或 css，或两者兼而有之。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:07:58.190

您可以尝试使用画布创建屏幕图像，然后将其发送给您的 PDF 创建者。我意识到这不是一个完整的答案，但这是我正在寻找类似目的的东西。 [这个问题有更多细节](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots)。

# php - Curl 处的 T_STRING 错误

> ID：14219070
> 
> 赞同：-3
> 
> 时间：2013-01-08T16:02:15.713
> 
> 标签：php, parse-error

当我上传我的 .php 时，我收到以下错误：

```
Parse error: syntax error, unexpected T_STRING in /users/allybong/www/twitteroauth/twitteroauth/twitteroauth.php on line 201 
```

第 197 - 231 行的脚本：

```
 function http($url, $method, $postfields = NULL) {
$this->http_info = array();
$ci = curl_init()
/* Curl settings */
curl_setopt($ci, CURLOPT_USERAGENT, $this->useragent)
curl_setopt($ci, CURLOPT_CONNECTTIMEOUT, $this->connecttimeout)
curl_setopt($ci, CURLOPT_TIMEOUT, $this->timeout)
curl_setopt($ci, CURLOPT_RETURNTRANSFER, TRUE)
curl_setopt($ci, CURLOPT_HTTPHEADER, array('Expect:'))
curl_setopt($ci, CURLOPT_SSL_VERIFYPEER, $this->ssl_verifypeer)
curl_setopt($ci, CURLOPT_HEADERFUNCTION, array($this, 'getHeader'))
curl_setopt($ci, CURLOPT_HEADER, FALSE)

switch ($method) {
  case 'POST':
    curl_setopt($ci, CURLOPT_POST, TRUE);
    if (!empty($postfields)) {
      curl_setopt($ci, CURLOPT_POSTFIELDS, $postfields);
    }
    break;
  case 'DELETE':
    curl_setopt($ci, CURLOPT_CUSTOMREQUEST, 'DELETE');
    if (!empty($postfields)) {
      $url = "{$url}?{$postfields}";
    }
}

curl_setopt($ci, CURLOPT_URL, $url);
$response = curl_exec($ci);
$this->http_code = curl_getinfo($ci, CURLINFO_HTTP_CODE);
$this->http_info = array_merge($this->http_info, curl_getinfo($ci));
$this->url = $url;
curl_close ($ci);
return $response; 
```

}

这是 Twitter“BongBot”的脚本。我从[https://github.com/lizconlan/bongbot](https://github.com/lizconlan/bongbot)得到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:24:28.807

您粘贴的行上缺少很多分号。这可能是它给你一个`T_STRING`错误的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:24:57.173

在以下行之后（包括以下行），您的所有行都不以分号结尾：

```
$ci = curl_init() 
```

尝试在以下行中添加一个，它应该可以解决您的问题：

```
$ci = curl_init();
/* Curl settings */
curl_setopt($ci, CURLOPT_USERAGENT, $this->useragent);
curl_setopt($ci, CURLOPT_CONNECTTIMEOUT, $this->connecttimeout);
curl_setopt($ci, CURLOPT_TIMEOUT, $this->timeout);
curl_setopt($ci, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ci, CURLOPT_HTTPHEADER, array('Expect:'));
curl_setopt($ci, CURLOPT_SSL_VERIFYPEER, $this->ssl_verifypeer);
curl_setopt($ci, CURLOPT_HEADERFUNCTION, array($this, 'getHeader'));
curl_setopt($ci, CURLOPT_HEADER, FALSE); 
```

# java - 在单个 Java 应用程序中实现多个服务

> ID：14219071
> 
> 赞同：1
> 
> 时间：2013-01-08T16:02:18.630
> 
> 标签：java, maven, cxf

我有两个用于不同服务的 WSDL 文件。两种服务都可以独立工作，但是如果我在同一个 eclipse 项目中包含这两种服务，我会收到以下错误的几个实例：

```
There's no ObjectFactory with an @XmlElementDecl for the element {http://schemas.foobar.com/oms/2010/10/Models}City.
    this problem is related to the following location:
        at protected javax.xml.bind.JAXBElement com.foobar.schemas.oms._2010._10.models.BusinessUnitData.city
        at com.foobar.schemas.oms._2010._10.models.BusinessUnitData
        at protected com.foobar.schemas.oms._2010._10.models.BusinessUnitData com.foobar.schemas.oms._2010._10.businessunit.CreateBusinessUnitRequest.businessUnitData
        at com.foobar.schemas.oms._2010._10.businessunit.CreateBusinessUnitRequest
        at @javax.xml.bind.annotation.XmlSeeAlso(value=[class com.foobar.schemas.oms._2010._10.businessunit.CreateBusinessUnitRequest])
        at public com.foobar.schemas.oms._2010._10.businessunit.CCreateBusinessUnitRequest com.foobar.schemas.oms._2010._10.businessunit.ObjectFactory.createCCreateBusinessUnitRequest()
        at com.foobar.schemas.oms._2010._10.businessunit.ObjectFactory
        at protected javax.xml.bind.JAXBElement com.foobar.schemas.oms._2010._10.businessunit.AddToStructureRequest.unitStructureData
        at com.foobar.schemas.oms._2010._10.businessunit.AddToStructureRequest
        at @javax.xml.bind.annotation.XmlSeeAlso(value=[class com.foobar.schemas.oms._2010._10.businessunit.AddToStructureRequest])
There's no ObjectFactory with an @XmlElementDecl for the element {http://schemas.foobar.com/oms/2010/10/Models}ClientKey.
    this problem is related to the following location:
        at protected javax.xml.bind.JAXBElement com.foobar.schemas.oms._2010._10.models.BusinessUnitData.clientKey
        at com.foobar.schemas.oms._2010._10.models.BusinessUnitData
        at protected com.foobar.schemas.oms._2010._10.models.BusinessUnitData com.foobar.schemas.oms._2010._10.businessunit.CreateBusinessUnitRequest.businessUnitData
        at com.foobar.schemas.oms._2010._10.businessunit.CreateBusinessUnitRequest
        at @javax.xml.bind.annotation.XmlSeeAlso(value=[class com.foobar.schemas.oms._2010._10.businessunit.CreateBusinessUnitRequest])
        at public com.foobar.schemas.oms._2010._10.businessunit.CCreateBusinessUnitRequest com.foobar.schemas.oms._2010._10.businessunit.ObjectFactory.createCCreateBusinessUnitRequest()
        at com.foobar.schemas.oms._2010._10.businessunit.ObjectFactory
        at protected javax.xml.bind.JAXBElement com.foobar.schemas.oms._2010._10.businessunit.AddToStructureRequest.unitStructureData
        at com.foobar.schemas.oms._2010._10.businessunit.AddToStructureRequest
        at @javax.xml.bind.annotation.XmlSeeAlso(value=[class com.foobar.schemas.oms._2010._10.businessunit.AddToStructureRequest]) 
```

这些错误完全填满了我的终端窗口，所以我不知道这种情况发生了多少次。

我正在以两种方式之一生成存根代码。首先，我尝试使用 wsdl2java 生成两者，然后将编译后的代码打包到一个 jar 中，并将其包含在我的构建路径中。我还尝试使用 cxf code-gen 插件创建一个新的 maven 项目。然后我运行“mvn install”并将生成的代码作为 maven 依赖项包含在内。两种技术产生相同的结果。每项服务都可以独立运行。但如果两者都包含在项目中，我会收到对象工厂错误。

是什么导致了这种类型的错误？可以用 jaxb 绑定文件修复吗？如果是这样，我是 web 服务的新手，并且一直无法找到示例绑定文件来学习如何格式化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:34:12.383

使用这个 maven 插件从 WSDL 生成类：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>2.7.1</version>
    <dependencies>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-bindings-soap</artifactId>
            <version>2.7.1</version>
        </dependency>
    </dependencies>
    <executions>
        <execution>
            <id>generate-jaxb</id>
            <phase>generate-sources</phase>
            <configuration>
                <additionalJvmArgs>-Dfile.encoding=UTF8</additionalJvmArgs>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>src/main/webapp/WEB-INF/wsdl/YourWSDL1.wsdl</wsdl>
                        <extraargs>
                            <extraarg>-wsdlLocation</extraarg>
                            <extraarg></extraarg>
                            <extraarg>-client</extraarg>
                            <extraarg>-p</extraarg>
                            <extraarg>your.app.pkg1</extraarg>
                        </extraargs>
                    </wsdlOption>
                    <wsdlOption>
                        <wsdl>src/main/webapp/WEB-INF/wsdl/YourWSDL2.wsdl</wsdl>
                        <extraargs>
                            <extraarg>-wsdlLocation</extraarg>
                            <extraarg></extraarg>
                            <extraarg>-client</extraarg>
                            <extraarg>-p</extraarg>
                            <extraarg>your.app.pkg2</extraarg>
                        </extraargs>
                    </wsdlOption>
                </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

并为您拥有的每个 WSDL 文件指定不同的包。根据不同的 WSDL 文件生成的所有类都将在不同的包中生成，您不会遇到任何冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:12:48.807

试试这些教程，解释如何在 Java 应用程序中实现多个 Web 服务：

[http://java.dzone.com/articles/tip-multiple-web-service](http://java.dzone.com/articles/tip-multiple-web-service)

[http://www2.sys-con.com/itsg/virtualcd/webservices/archives/0308/zade/index.html](http://www2.sys-con.com/itsg/virtualcd/webservices/archives/0308/zade/index.html)

# android - 更新语句不更新字段

> ID：14219072
> 
> 赞同：1
> 
> 时间：2013-01-08T16:02:19.143
> 
> 标签：android, sqlite

我有一个数据库，我在其中存储已发送消息的数量。但是，当我发送消息时，计数器不会增加。

这是数据库类（usersdata）：

```
import static android.provider.BaseColumns._ID;
import static com.app.Constants.TABLE_NAME;
import static com.app.Constants.PHONE_NUMBER;
import static com.app.Constants.SMS_SENT;
import static com.app.Constants.SMS_RECEIVED;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class UsersData extends SQLiteOpenHelper {

private static final String DATABASE_NAME = "rpgsms.db";
private static final int DATABASE_VERSION = 1;

public UsersData (Context ctx) {
    super(ctx, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + 
            PHONE_NUMBER + " TEXT PRIMARY KEY, " +
            SMS_SENT + " INT, " +
            SMS_RECEIVED + " INT);");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
    onCreate(db);
}

} 
```

在另一个类中，我想更新该`SMS_SENT`字段，我这样做是这样的：

```
usersData = new UsersData(this);
SQLiteDatabase db = usersData.getWritableDatabase();
db.rawQuery("UPDATE "+ TABLE_NAME + " SET "+ SMS_SENT + " = " + SMS_SENT + "+1", null); 
```

但是，这不会更新相应的字段。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:11:49.030

似乎其他人也有同样的问题。它是使用函数解决的，`execSQL`而不是`rawQuery`更新字段。

你可以在这里阅读：[增加 android/sqlite 数据库中记录的值](https://stackoverflow.com/questions/3427516/increase-the-value-of-a-record-in-android-sqlite-database/3432777#3432777)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:38:58.550

update sql 语句缺少 where 子句，因此会更新所有行。尝试这个：

```
db.rawQuery("UPDATE "+ TABLE_NAME + " SET "+ SMS_SENT
    + " = " + SMS_SENT + "+1 WHERE " + PHONE_NUMBER
    + " = '" + phoneNumber +"'", null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T21:07:11.967

**`ID`**遵循良好的数据库设计，拥有一个具有整数数据类型的字段并让该值自动递增以创建唯一记录几乎总是一个好主意。对于您的特定问题，只需添加一**`ID`**列并将其设置为**`INTEGER`**数据类型即可轻松解决，而不是**`INT`**像使用高性能数据库（如 Postgresql、MySQL 等）那样。尝试将您的架构更改为这样的东西，它应该可以解决问题：

```
 db.execSQL("CREATE TABLE " + TABLE_NAME + " (" +
        ID + " INTEGER PRIMARY KEY, " + 
        PHONE_NUMBER + " TEXT, " +
        SMS_SENT + " INTEGER, " +
        SMS_RECEIVED + " INTEGER);"
    ); 
```

您现在所要做的只是传递 , 的值，`PHONE_NUMBER`并且您的计数器（字段）应该开始相应地增加。有关更多信息，您可以查看这篇[文章](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example)。`SMS_SENT``SMS_RECEIVED``ID`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-13T22:58:50.713

我通过以下方式解决了它：

```
ContentValues args = new ContentValues();
args.put(SMS_SENT, sent+1);
db.update(TABLE_NAME, args, ID, new String[] {"id_value"}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T16:09:26.863

尝试这个，

在创建表时使用`INTEGER`而不是`INT`. 它应该工作。

```
db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + 
        PHONE_NUMBER + " TEXT PRIMARY KEY, " +
        SMS_SENT + " INTEGER, " +
        SMS_RECEIVED + " INTEGER);"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T16:19:51.420

将您的 UPDATE 查询更改为：

```
int newcount=SMS_SENT+1;
db.rawQuery("UPDATE "+ TABLE_NAME + " SET "+ 
                       SMS_SENT + " = " + newcount + "", null);
                        ^^^^^ 
```

并确保`SMS_SENT`字符串列名不是数字

# c# - 在 C# 中，如何轻松打印出调试/测试方法的所有参数

> ID：14219073
> 
> 赞同：1
> 
> 时间：2013-01-08T16:02:22.177
> 
> 标签：c#, visual-studio-2010, debugging, resharper

所以我正在使用一个不起作用的 Api，并且我已经订阅了所有事件以查看发生了什么。因此，在事件处理程序上有很多参数。我只想将它们打印到控制台。

我想要一个模板（Visual Studio 2010 或 Resharper）来写出所有带有名称和值的参数。

在 Resharper 中有一个内置模板`outv`可以单独执行它们，但是依次执行每个操作都很痛苦。

我正在寻找快速的东西，可以扔掉。

***编辑：至少我发现或链接的任何问题***都不是完全重复的原因：****

 ***这特别是关于方法参数。方法参数（如我所见）无法反映。我可以使用 AOP，但这并不完全符合我快速简便的准要求。我已经在考虑这个了，但我不需要任何长期的东西，所以仅仅为了这个问题将 postsharp 引入我的项目似乎有点过头了。

此外，对于对象，我正在使用`System.Runtime.Serialization.Json.DataContractJsonSerializer`. 它是 .net 的一部分，json 易于阅读，我可以快速摆脱它的三行代码。但不适用于方法参数。

Eclipse 有这样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:09:26.867

这听起来像是 AOP（面向方面​​编程）的典型问题。PostSharp 是一个很好且简单的框架来完成这项工作。看看[这个](https://stackoverflow.com/questions/3288597/is-there-a-way-to-get-an-array-of-the-arguments-passed-to-a-method)帖子。

另一种方法是使用反射来获取所需的所有信息。然后你会有一种方法可以处理你给它的任何东西并提取它可以找到的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:07:51.020

也许像 PostSharp (sharpcrafters.com) 这样的 AOP 工具可以帮助您。***

# javascript - 如何使用 Javascript 从另一个文本框中复制和输出文本？

> ID：14219075
> 
> 赞同：0
> 
> 时间：2013-01-08T16:02:33.763
> 
> 标签：javascript

```
<input type="hidden" id="prevTicketNo" value="6"/>

<script>
  var ticketNo = document.getElementById(prevTicketNo).value +1;
  document.getElementById('currentTicketNo').value = ticketNo;
</script>

<input id="currentTicketNo" value=""/> 
```

我正在尝试做的事情： prevTicketNo 是从其他地方捕获的值。我需要将其作为隐藏字段加载，因此我使用了 type="hidden"。加载此文本框中的值后，我需要 +1 以增加我当前票证的数量。

是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:05:19.470

如果您可以获取之前的票号并将其输出到隐藏字段（显然是通过某种服务器端脚本），为什么不能直接将其输出到您的文本输入中？例如。在 PHP 中这样写：

```
<input id="currentTicketNo" value="<?php echo $prevTicketNo + 1; ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:09:53.610

Javascript：

```
var hiddenVal = document.getElementById("prevTicketNo");
var newTicketNo = Number(hiddenVal.value) + 1;

alert(newTicketNo); 
```

HTML：

```
<input type="hidden" id="prevTicketNo" value="6"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:10:09.877

您必须将`value`第一个的更改`input`为`integer`。

```
var ticketNo =parseInt((document.getElementById('prevTicketNo').value),10)+1;
document.getElementById('currentTicketNo').value = ticketNo; 
```

[JSBin](http://jsbin.com/amamuk/1/edit)

# java - Java聊天套接字读取和发送数据

> ID：14219081
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:02:53.493
> 
> 标签：java, multithreading, sockets, swt, chat

我成功开发了一个可以创建/连接到服务器的应用程序。我有一个名为 Person 的类，其中有一个公共静态 LinkedList。在此列表中，我存储连接到服务器的客户端。服务器/客户端类在同一个包中。服务器和客户端类正在扩展线程（它们在后台工作）。

我正在尝试做的事情。

1.  我想将在线客户端列表（LinkedList）发送给连接到服务器的所有客户端。
2.  我想从客户端读取数据（来自 StyledText 的字符串）并将其写入全局主聊天区域（StyledText）。

（类似于 mIRC 程序）。

我已经阅读和搜索了一整天，但我从来没有看到关于“Java 聊天应用程序”的好的解释、示例或文档。我发现了 AWT、Swing，但问题是我只知道 SWT。此外，我还找到了 TELNET 教程，并且在控制台 (CMD) 中读取和写入了输入和输出流。我需要使用 InputStreamReader、BufferedStreamReader 和 PrintWriter 吗？如果有，是否需要将这些数据转换为字节数组，然后将它们转换为对象？

我发布了一些屏幕截图以便更好地理解：

![在此处输入图像描述](../Images/124593347deebf9b4705edee18bf1dc0.png)

![在此处输入图像描述](../Images/dcf34d3f91661c53b8eefc0920eb1323.png)

这就是我创建服务器的方式：

```
DialogServer dialog = new DialogServer(new Shell());
dialog.create();
if(dialog.open() == Window.OK){
   new Server(serverAddress).start(); //dialog sets serverAddress as a String IP
} 
```

**服务器类：**

```
public class Server extends Thread{

    private static ServerSocket serverSocket;
    private static Socket socket;
    private static String address;

    public Server(String address){
        this.address = address;
    }

    public void run(){
        try {
            serverSocket = new ServerSocket(5000, 10, InetAddress.getByName(address));
            View.serverUp = true;
            View.log("Server is up. Listening on " + address + ":5000");
            Person p = new Person(View.nickname, true, 100.0);
            Person.listPeople.add(p); //add ADMIN to static LinkedList
            while(true){
                socket = serverSocket.accept();
                new Client(socket).start(); // client class thread
                refresOnlineList(); // refresh UI table
            }

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static void refresOnlineList(){
        View.display.syncExec(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                View.tableViewer.refresh();
                // TableViewer which contains online client list
            }
        });
    }
} 
```

连接服务器的对话框：

```
 DialogConnect dialog = new DialogConnect(new Shell());
   dialog.create();
   if(dialog.open() == Window.OK){
      new Client(connectAddress, connectNickname).start(); // dialog sets String parameters. new Client start a new Thread for a client.
   } 
```

**客户端类：**

```
public class Client extends Thread{
    private static Socket socket;
    private static String nickname;

    public Client(Socket socket){
        this.socket = socket;
    }

    public Client(String address, String nickname){
        socket = new Socket();
        try {
            socket.connect(new InetSocketAddress(address, 5000), 10);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            View.log("Cannot connect to server.");
        }

        this.nickname = nickname;
    }

    public void run(){
        try {
            Person p = new Person(nickname, false, 15.4);
            Person.listPeople.add(p); // add PERSON to static LinkedList
            socket.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

在 Eclipse RCP 3.8 中开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:43:03.630

你的目标可以分为三个任务：

1.  创建用户界面
2.  处理网络通信
3.  将这两者绑定在一起

AFAIK 的 Stack Overflow 并非旨在指导整个项目。您需要就具体问题陈述具体问题。

我建议您从控制台应用程序（客户端和服务器）开始，以摆脱创建 UI 的负担。完成后，您可以创建一些 UI 并将事件绑定到其中。

# java - 比较java中的两个字符串并识别重复的单词

> ID：14219084
> 
> 赞同：7
> 
> 时间：2013-01-08T16:02:56.763
> 
> 标签：java, string, duplicates

我正在尝试能够比较两个字符串并识别重复的单词。例如;

```
String1 = "Hello, my name is John."
String2 = "Can you tell me your name please?" 
```

比较 String1 和 String2 将返回单词；“姓名”。

我知道可以将这两个字符串拆分为一个单词数组，然后遍历二维数组中每个字符串的每个单词。然而，这在 O(n^2) 时计算成本很高，我想知道是否有更快的方法来做到这一点？

谢谢。

编辑：为清楚起见更改了示例。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T16:10:42.230

将字符串转换为单词数组后：

您可以将第一个数组中的所有元素添加到 hashmap 中，然后扫描第二个数组以查看每个元素是否存在于 hashmap 中。由于访问哈希图的时间是 O(1)，这将是 O(n+m) 时间复杂度。

如果您不想使用额外的空间，您可以在 O(nlogn) 中对两个数组进行排序，然后比较 O(n+m) 中的项目，这样总共会给您 O(nlogn)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T16:16:25.217

一种简单的解决方案是使用`Sets.intersection`Guava 的方法`Sets`。这很容易：

```
String s1 = "Hello, my name is John.";
String s2 = "Can you tell me your name?";
Splitter splitter = Splitter.onPattern("\\W").trimResults().omitEmptyStrings();
Set<String> intersection = Sets.intersection(//
        Sets.newHashSet(splitter.split(s1)), //
        Sets.newHashSet(splitter.split(s2)));
System.out.println(intersection); 
```

输出：

```
[name] 
```

您还可以找到有关在[此线程](https://stackoverflow.com/questions/7574311/efficiently-compute-intersection-of-two-sets-in-java)上检测 Set 交集的算法的更多信息。

# java - finally 总是被调用吗？

> ID：14219088
> 
> 赞同：6
> 
> 时间：2013-01-08T16:03:23.480
> 
> 标签：java

> **可能重复：**
> [在Java中，最终返回王牌吗？](https://stackoverflow.com/questions/65035/in-java-does-return-trump-finally)

这个函数返回什么？

```
public int wasExceptionThrown() {
   try {
     if(1==1)
        throw new RuntimeException();
     return 1;
   } catch(Exception e) {
     return 2;
   } finally {
     return 3;
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:07:05.353

如果您调用`System.exit(0);`，则`finally`不会调用块，因为线程会立即关闭。在所有其他情况下`finally`，当块退出时调用（假设确实如此）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:10:57.600

最后叫`before`return。

唯一不会被调用的情况是调用 System.exit() 或 JVM 先崩溃。

# bash - Bash 脚本和 /bin/bash^M：错误的解释器：没有这样的文件或目录

> ID：14219092
> 
> 赞同：598
> 
> 时间：2013-01-08T16:03:35.087
> 
> 标签：bash

我正在通过本教程学习[bash 脚本](http://linuxcommand.org/wss0010.php)来为我自动执行一些任务。我正在使用腻子连接到服务器。

位于 中的脚本`.../Documents/LOG`是：

```
#!/bin/bash
# My first script
echo "Hello World!" 
```

我执行了以下`read/write/execute permissions`

```
chmod 755 my_script 
```

然后，当我输入时`./my_script`，我收到标题中给出的错误。

一些类似的问题希望看到这些，所以我认为它们可能会有所帮助：

```
which bash 
```

> `/bin/bash`

和

```
echo $PATH 
```

> `/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/bin/mh`

我尝试将当前目录添加到`PATH`，但这不起作用..

* * *

## 回答 #1

> 赞同：822
> 
> 时间：2015-04-20T12:13:18.173

在终端中运行以下命令

```
sed -i -e 's/\r$//' scriptname.sh 
```

然后尝试

```
./scriptname.sh 
```

它应该工作。

* * *

## 回答 #2

> 赞同：771
> 
> 时间：2013-01-08T16:07:24.690

在 Windows 环境中创建脚本然后移植到 Unix 环境中运行时，我已经看到了这个问题。

尝试`dos2unix` 在脚本上运行：

[http://dos2unix.sourceforge.net/](http://dos2unix.sourceforge.net/)

或者只是在你的 Unix 环境中使用`vi`和测试重写脚本。

Unix 使用不同的行尾，因此无法读取您在 Windows 上创建的文件。因此它将 ^M 视为非法字符。

如果您想在 Windows 上编写文件然后移植过来，请确保您的编辑器设置为以 UNIX 格式创建文件。

在屏幕右下角的 notepad++ 中，它会告诉您文档格式。默认情况下，它会说`Dos\Windows`. 要更改它，请转到

*   设置->首选项
*   新文档/默认目录选项卡
*   选择格式为 unix 并关闭
*   创建一个新文档

* * *

## 回答 #3

> 赞同：150
> 
> 时间：2014-04-21T17:26:34.910

如果你在 Windows 或 Mac 上使用**Sublime Text来编辑你的脚本：**

单击`View > Line Endings > Unix`并再次**保存**文件。

![在此处输入图像描述](../Images/153014f55e0424dbb0d4ad454aac96a8.png)

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2013-08-13T11:17:13.320

这是由于在 windows 中编辑文件并在 unix 中导入和执行造成的。

`dos2unix -k -o filename`应该做的伎俩。

* * *

## 回答 #5

> 赞同：56
> 
> 时间：2014-06-03T10:54:40.113

在记事本++中，您可以通过按专门为文件设置它

编辑 --> EOL 转换 --> UNIX/OSX 格式

![在此处输入图像描述](../Images/3fce850c0e30322c273354b03564d81f.png)

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2016-08-31T11:10:18.427

问题在于dos行结束。以下将其转换为 unix

```
dos2unix file_name 
```

注意：您可能需要先安装 dos2unix`yum install dos2unix`

另一种方法是使用`sed`命令搜索并将 dos 行结束字符替换为 unix 格式：

```
$sed -i -e 's/\r$//' your_script.sh 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-05-19T10:16:14.260

您的文件有 Windows 行结尾，这使 Linux 感到困惑。

删除虚假的 CR 字符。您可以使用以下命令执行此操作：

```
 $ sed -i -e 's/\r$//' setup.sh 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-05-01T09:21:47.203

对于[Eclipse](http://www.eclipse.org/)用户，您可以直接从菜单更改文件编码`File > Convert Line Delimiters To > Unix (LF, \n, 0Α, ¶)`：

[![Eclipse 更改文件编码](../Images/2f4b5ca4d32d0307975bfee0981c52b8.png)](https://i.stack.imgur.com/6H8YX.png)

或将面板更改`New text file line delimiter`为：`Other: Unix``Window > Preferences > General > Workspace`

[![Eclipse 工作区设置](../Images/092ec8717ee0d797ae2443505f353441.png)](https://i.stack.imgur.com/oCGKW.png)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-05-26T19:10:41.337

我能够通过在**Gedit**中打开脚本并使用正确的`Line Ending`选项保存它来解决问题：

> 文件 > 另存为...

在提示的左下方`Save As`，有字符编码和行尾的下拉菜单。将行尾从更改`Windows`为`Unix/Linux`然后保存。

![编辑](../Images/bd2d70a6c75aba6de2e961e8d7481be5.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-15T20:52:09.647

Atom 有一个内置的行尾选择器包

更多细节在这里：[https ://github.com/atom/line-ending-selector](https://github.com/atom/line-ending-selector)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-04T17:32:22.403

我同时在 Windows 和 Mac/Linux 上进行开发，我通过像在 Windows 中一样简单地运行我的脚本来避免这个 ^M 错误：

`$ php ./my_script`

无需更改行尾。

# php - 对安全登录的更高 Web 根访问权限感到困惑

> ID：14219095
> 
> 赞同：1
> 
> 时间：2013-01-08T16:03:42.000
> 
> 标签：php, javascript, security, login

现在要尝试使用安全登录的形式，连接到数据库的 php 文件将存储在 web 根目录 public_html 之上，因此它们不能被公开访问。

我的第一个问题是人们说你不能用 Javascript 调用这个 php 文件。

这是有道理的，因为 Javascript 在客户端运行并且可以公开信息，但这让我对如何安全地调用这个 php 文件感到有些困惑。

**我是否应该在 web 根目录下有另一个 php 文件来调用 web 根目录上方的内容敏感文件？**

这是否可以通过“../../some-folder-above-web-root/some-php-above-web-root.php”来实现，如果是这样，这是否会暴露 php 文件的位置在网络根目录？或者它的位置不重要，因为人们无法访问它（..黑客）。

**总而言之，我真的只是想知道如何正确且安全地与 Web 根目录上方的脚本进行通信。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:18:16.150

是的，你是对的。Web 根目录下应该有一个 PHP 文件，它将访问 Web 根目录上方的受保护的 PHP 文件。在 Zend Framework 中，有一个名为 bootstraper 的 index.php 文件，它可以做很多事情，包括：

*   设置错误显示级别
*   设置包含路径
*   定义全局常量
*   读取配置文件
*   加载库类
*   获取前端控制器
*   配置数据库连接
*   根据 RESTful url 和 MVC 确定路由
*   设置异常处理
*   调用请求的控制器

我强烈建议使用 MVC 框架，它们是行业标准，并且具有针对包括安全登录在内的许多常见问题的预构建功能。Zend Framework 实现了访问控制列表样式的安全性，尽管您可以轻松地扮演自己的角色。其他值得注意的框架是 Drupal、Yii、Codeigniter、Symphony、CakePHP 和 Joomla。

其他最佳安全实践包括：

*   根据 mimetype 过滤所有文件上传，而不是文件扩展名或文件类型
*   根据数据库表列类型和长度过滤所有 POST 和 GET 数据
*   在运行它们之前清理所有 SQL 字符串
*   更改服务器上的所有默认登录密码，例如：Apache、MySQL、FTP、SSH、SVN 等。
*   学习如何配置 php.ini、httpd.conf 等。
*   禁用任何不在您的框架、PHP、Apache 和 MySQL 中使用的服务、模块和插件
*   模糊你的代码
*   使用单元测试
*   了解一点渗透测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:10:51.810

您可以为其他文件授予只读权限，例如 754（root 的所有权限，组的读取和执行权限，其他的只读权限），然后您可以使用例如`file_get_contents`和绝对路径读取其内容。

一种常见的方法是在公共 Web 目录之外有一个配置文件（其中包含敏感信息），使用绝对路径读取它，然后将其用作变量。

如果您想在公共网络路径之外执行脚本，您必须授予“其他”执行权限，这不太安全。

另外关于您关于javascript的问题，它与安全性无关：javascript代码不会在服务器中执行，其中包含敏感信息的文件，它将在客户端浏览器上执行，因此那里没有什么可读取的。

# google-maps - 将标记图像从 v2 转换为 API V3

> ID：14219100
> 
> 赞同：2
> 
> 时间：2013-01-08T16:04:05.500
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在尝试转换为 API v2 编写的以下代码

```
<!--- Add position and date information --->
var trackIcon = new GIcon({image:"/images/www2/icons/map_track_marker.png"});
trackIcon.iconSize = new GSize(6,6);
trackIcon.iconAnchor = new GPoint(3,3);
for (var i=0; i<trackArray.length;i++)
{
map.addOverlay(new GMarker(trackArray[i],{title:trackArrayInfo[i],icon:trackIcon}));
} 
```

到V3，但没有成功。这是我不成功的尝试：

```
<!--- Add position and date information --->
var trackIcon = new google.maps.Icon({image:"/images/www2/icons/map_track_marker.png"});
trackIcon.iconSize = new google.maps.Size(6,6);
trackIcon.iconAnchor = new google.maps.Point(3,3);                          
for (var i=0; i<trackArray.length;i++)
{
   new google.maps.Marker(trackArray[i], {title:trackArrayInfo[i],icon:trackIcon}).setMap(map);
} 
```

有人可以帮我吗？我越来越绝望了:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:12:15.827

图标对象在 API v3中没有`image`,`iconSize` 或属性。`iconAnchor`相反，它们只是`url`,`size`和`anchor`。

您还需要将新标记的结果分配给变量。我假设您此时遇到了 JS 错误，尽管您的问题中不存在该错误（如果存在，可能会有用）。

```
/* Add position and date information */
var trackIcon = new google.maps.Icon({
    url :"/images/www2/icons/map_track_marker.png",
    size : new google.maps.Size(6,6),
    anchor : new google.maps.Point(3,3)
});

for (var i=0; i<trackArray.length;i++)
{
   var marker = new google.maps.Marker({
          position: trackArray[i],
          map: map, 
          title: trackArrayInfo[i], 
          icon: trackIcon
   });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:40:13.227

```
/* Add position and date information */
for (var i=0; i<trackArray.length;i++)
{
   var marker = new google.maps.Marker({
    position: trackArray[i],
    map: map, 
    title: trackArrayInfo[i],                                        
    icon: "/images/www2/icons/map_track_marker.png",
    size: new google.maps.Size(6,6),
    anchor: new google.maps.Point(3,3)
   });
} 
```

它是这样工作的。感谢@duncan 的帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:32:13.943

如果其他人遇到与我相同的相关问题并用谷歌搜索他/她的方式，似乎在当前版本（3.11）中`google.maps.Icon`只有一个`google.maps.MarkerImage`构造函数。因此，以前的答案看起来像：

```
for (var i=0; i<trackArray.length;i++)
{
  var marker = new google.maps.Marker({
    position: trackArray[i],
    map: map, 
    title: trackArrayInfo[i],                                        
    icon: new google.maps.MarkerImage(
      "/images/www2/icons/map_track_marker.png", // url
      new google.maps.Size(6,6), // size
      new google.maps.Point(0,0), // origin
      new google.maps.Point(3,3), // anchor
      new google.maps.Size(6,6) // resized size
    )
  });
} 
```

虽然文档中没有提到它，所以我不确定这是官方的，但是官方的 .Icon 已经消失了，这对我有用。

# java - GWT JSONObject 覆盖类型（或在共享中使用 JSONObject）

> ID：14219101
> 
> 赞同：1
> 
> 时间：2013-01-08T16:04:05.827
> 
> 标签：java, json, gwt, gxt, jsni

我在我的 GWT 服务器端填充了一个 JSONArray (org.JSON)，然后想在客户端使用该对象。当我在我的共享包中使用 JSONObject（或数组）时，我得到了没有找到源的异常（虽然它在服务器上工作）。因此，我认为它不能在客户端使用或共享（尽管谷歌搜索无法确认）。

由于 shared 不会使用 JSONObject，我假设 JSNI 可以在 shared 中工作。我已经阅读了 google developer 和 stackoverflow 上的 GWT 覆盖类型，并在我的共享包中做了一个。但是，由于是 JSNI，所以不能在服务器上使用。因此，我尝试将 JSONObject.toString() 传递给我的共享类，然后将其用作调用以下 JSNI 方法的参数：

```
public native UserOverlay getUser(String jsonObj) /*-{
    return jsonObj;
}-*/; 
```

电话：

```
UserOverlay user = getUser(jsonobj); 
```

但是，这会在调用位置产生 UnsatisfiedLinkError，据我所知，这意味着找不到 JSNI 方法，这意味着共享包不适用于 JSNI。

**结论**

我需要一种方法来在客户端、共享和服务器上使用我的 JSON 数据。如果该方法不同，那么我需要一种将一种方法转换为另一种方法的方法。我见过处理从覆盖类型转换为 JSONObject 的线程，但不是相反。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:46:10.043

如果您指的是[Crockford 的 Java 的 JSON 实现](https://github.com/douglascrockford/JSON-java)，它不能用于客户端代码的原因是它需要首先被[模拟](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)。出于您的目的，您想使用不同的方法；

让服务器返回一个 JSON 文本响应（自然是通过 HTTP），通过客户端上的 XHR 请求它，然后以原始形式使用响应——因为[JSON 是 JavaScript 文字对象表示法的子集](http://www.json.org/js.html)，它可以在内部透明地使用JavaScript 代码。

要在 GWT 中实现此方法，请创建一个将 JSON 作为文本返回的 servlet（将其输出到响应的编写器）。然后可以使用（包装 XHR）从客户端调用此 servlet [`RequestBuilder`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/http/client/RequestBuilder.html)，并且可以使用覆盖类型将每个 JSON 响应根据其合同转换为 Java 托管对象。

[谷歌开发者文档提供了一个关于检索 JSON](https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON)的教程，讨论了这个问题。为了完整起见，我将包含重点和一些片段：

1.  **创建一个服务 JSON 的 servlet**

    *不要忘记相应地配置 webapp 的部署描述符 ( `web.xml`)。*

    ```
    public class JsonDataServlet extends HttpServlet {

        @Override
        protected void doGet(HttpServletRequest req, HttpServletResponse resp)
                throws ServletException, IOException {

            PrintWriter out = resp.getWriter();
            out.println('{');
            // fill with JSON construct
            out.println('}');
            out.flush();
        }

    } 
    ```

2.  **根据响应的接口构造覆盖类型**

3.  **创建客户端实用程序以将 JSON 响应转换为具体的`JavaScriptObject`**

    *本教程建议在`eval()`JSNI 方法中使用，但我更喜欢使用它，因为它会首先尝试在支持[`JSONParser.parseStrict()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/json/client/JSONParser.html#parseStrict%28java.lang.String%29)的浏览器上调用 JavaScript 。`JSON.parse()`*

    ```
    public static UserOverlay asUserOverlay(String json) {
        JSONValue jsonVal = JSONParser.parseStrict(json);
        JSONObject jsonObj = jsonVal.isObject();
        UserOverlay userOverlay = (UserOverlay) jsonObj.getJavaScriptObject();
    } 
    ```

    ***注意：**如果您仍然要使用该`eval()`实现，则`json`参数需要用括号括起来，即`eval('(' + json + ')')`.*

4.  **调用小服务程序**

    ```
    RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, GWT.getModuleBaseURL() + "path/to/servlet");
    rb.setCallback(new RequestCallback() {

        public void onError(Request request, Throwable exception) {
            // do something
        }

        public void onResponseReceived(Request request, Response response) {
            if (200 == response.getStatusCode()) {
                UserOverlay userOverlay = asUserOverlay(response.getText());
                // continue handling
            }
        }
    });
    rb.send(); 
    ```

### Google Web Toolkit 文档的参考资料

*   [检索 JSON 数据](https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON)
*   [使用 JSON](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSON)
*   [与服务器通信](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideHttpRequests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:01:28.310

我现在将 JSON 作为字符串保存在共享包中。

我使用 org.JSON 来处理我在服务器上获取的内容并在客户端中覆盖类型。

我`aJsonArray.getJSONObject(i).toString();`在将 JSON 字符串发送到客户端时使用它来获取它，并将其作为该字符串存储在我的可序列化中，然后在客户端上调用我的本机覆盖类型函数。像魅力一样工作，但我不确定这是否是最好的方法。它似乎是唯一的。

# php - PHP CSS HTML。海量数据，动态列和框

> ID：14219106
> 
> 赞同：0
> 
> 时间：2013-01-08T16:04:33.513
> 
> 标签：php, html, css, dynamic

我有一个庞大的数据列表，我想显示 10,000 个，过滤器希望一次只有几千个。

语言：HTML、PHP、CSS

我正在考虑显示这些数据的最佳方式，并想到了一个我喜欢的想法。我想要一个具有固定高度（屏幕/浏览器分辨率的 90% 或 100%）的框（比如 div）。没有水平滚动。数据将在列中直观地显示，填充第一列，然后是第二列、第三列、第四列等。根据需要填充。这些框将容纳列并根据需要向下增加数量（用于垂直滚动）。这需要是动态的，因为我不知道将显示什么数据（基于过滤器），我不知道用户浏览器的大小等。

如果有更多帮助，请制作绘画图像：http: [//postimage.org/image/630pxp3sx/](http://postimage.org/image/630pxp3sx/)

如果盒子的东西是不可能的，你至少能告诉我如何实现柱子效果。

希望这是有道理的。理想情况下，我想我想用 CSS 来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:28:24.587

使用纯 CSS 可以获得的最接近的属性是`columns`属性，但它不会完全按照您想要的方式填充。元素将从上到下，从左到右填充，并平均划分，以便所有列尽可能接近相同的高度。

```
ul {
  columns: 5em; /* some browsers require prefixes (eg. -moz-columns, etc.) */
} 
```

[http://jsfiddle.net/VQXH3/](http://jsfiddle.net/VQXH3/)

Flexbox 可以满足您的要求，但目前对它的支持很差（IE10+、Opera、Chrome；Firefox 即将添加对新规范的支持）。

[http://jsfiddle.net/VQXH3/1/](http://jsfiddle.net/VQXH3/1/)（在 Opera 中尝试，没有在演示中添加前缀）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:31:04.380

如果您希望列尽可能均匀，只需事先计算出显示了多少结果。然后，决定要显示多少列。假设您有 100 个结果，并且想将它们分成 5 列，那么每列将有 20 个结果。你可以在 PHP/MySQL 中做这样的事情：

```
<?php
$con = mysql_connect('localhost', 'user', 'pass');
$db = mysql_select_db('data');

$get = mysql_query("SELECT * FROM table");

$columns = 5; // number of columns you want to have
$total = mysql_num_rows($get);
$perCol = ceil($total/$columns);
$counter = 0; // start counter at 0 and increment it as the loop progresses
$data = "<div class=\"column\">\n"; // create blank string for storing results
$counterTotal = 0; // keep track of total results

while($a = mysql_fetch_array($get)) {
    $counter++;
    $counterTotal++;
    if ($counter == 1 ) { // no <br /> tag necessary
        $data .= "   " . $a['data'];
    } else {
        if ( $perCol == $counter ) {
            $data .= "<br />\n   " . $a['data'] . "\n</div>\n<div class=\"column\">\n";
            $counter = 0; // reset counter for new column
        } else {
            $data .= "<br />\n   " . $a['data'];
        }
    }    
}

$data .= "\n</div>\n";

echo $data;

mysql_close($con);
?> 
```

如果您想知道为什么我在代码中添加了所有新行 (\n) 和空格，那只是为了使源代码看起来漂亮漂亮。:) 如果您愿意，可以随意删除它，但我喜欢我的源代码看起来漂亮且可读，即使它是动态生成的。

然后，如果您希望列填满屏幕的整个宽度，您只需将 PHP 注入`<style>`标题中的标签，如下所示：（假设它与上面的代码在同一页面上，因此您仍然可以访问 $columns 变量)

```
<style type="text/css">
.column {
    float: left;
    width: <?= floor(100/$columns); ?>%;
    margin: 0px;
    padding: 0px;
}
</style> 
```

当然，这只有在除法中没有余数的情况下才有效，但即使它不是完美的除法，它也应该接近。这是我为此制作的示例页面中的代码：

```
<?php
$con = @mysql_connect("localhost", "user", "pass");
$db = @mysql_select_db("sampleDB", $con);

$get = mysql_query("SELECT * FROM dataTable");

$columns = 5; // number of columns you want to have
$total = mysql_num_rows($get);
$perCol = ceil($total/$columns);
$counter = 0; // start counter at 0 and increment it as the loop progresses
$data = "<div class=\"column\">\n"; // create blank string for storing results
$counterTotal = 0; // keep track of total results

while($a = mysql_fetch_array($get)) {
    $counter++;
    $counterTotal++;
    if ($counter == 1 ) { // no <br /> tag necessary
        $data .= "   " . $a['data'];
    } else {
        if ( $perCol == $counter ) {
            $data .= "<br />\n   " . $a['data'] . "\n</div>\n<div class=\"column\">\n";
            $counter = 0; // reset counter for new column
        } else {
            $data .= "<br />\n   " . $a['data'];
        }
    }
}

$data .= "\n</div>\n";

@mysql_close($con);
?>
<html>
    <head>
        <title>Data In Columns</title>
        <style type="text/css">
        .column {
            float: left;
            width: <?= floor(100/$columns); ?>%;
            margin: 0px;
            padding: 0px;
        }
        </style>
    </head>
    <body>
       <?= $data; ?>
    </body>
</html> 
```

如果您想查看此代码的结果，可以查看我在此处制作的示例：http: [//mdl.fm/sample.php](http://mdl.fm/sample.php)

更新：如果您想使内容适合屏幕的高度并确定所需的列数，您需要手动指定每列中有多少项目，因此您将进行以下替换：

```
// replace this
$perCol = ceil($total/$columns);
// with this
$perCol = 20;
$columns = ceil($total/$perCol); 
// the line above will just override the manual declaration of $columns 
```

但是，PHP 无法检测浏览器的尺寸，因此如果您想这样做，您可以通过包含尺寸的 Javascript 再次转发到 PHP 页面。这是您可以使用的一段示例代码，将其放在`页面的标记中：`

 ````
<script type="text/javascript">
function getDims() {
  var myWidth = 0, myHeight = 0;
  if( typeof( window.innerWidth ) == 'number' ) {
    //Non-IE
    myWidth = window.innerWidth;
    myHeight = window.innerHeight;
  } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
    //IE 6+ in 'standards compliant mode'
    myWidth = document.documentElement.clientWidth;
    myHeight = document.documentElement.clientHeight;
  } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
    //IE 4 compatible
    myWidth = document.body.clientWidth;
    myHeight = document.body.clientHeight;
  }

  return {
    'width' : myWidth,
    'height' : myHeight
  };
}

function loadDims() {
   if ( document.URL.indexOf("?w=") < 0 ) {
      var dims = getDims();
      window.location.href = '/sample.php?w=' + dims.width + '&h=' + dims.height;
   }
}
</script> 
```

`然后用这样的 onload更新你的：`

 ````
<body onload="loadDims();"> 
```

此时，您将知道 PHP 代码中的浏览器尺寸，因此您可以将给定的高度除以 text-size 并查看一列中可以包含多少项而无需滚动。同样，我已经用这段代码更新了我的页面，所以如果你想要这些完整的片段，只需检查一下。此外，如果您对实施它们有任何疑问，请通过我的网站 (http://mdl.fm) 与我联系，我很乐意提供帮助。``

# python - 输入“输入”的编码错误消息

> ID：14219107
> 
> 赞同：-2
> 
> 时间：2013-01-08T16:04:35.837
> 
> 标签：python, null

假设您被要求输入，例如您的年龄，但您没有输入您的年龄，而是不小心按了“输入”。但是，该程序会忽略击键并进入下一步。您的年龄未输入，但被视为空/空值。

你如何编码来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:13:12.900

```
age = raw_input("Age: ")
while not age: # In Python, empty strings meet this condition. So does [] and {}. :)
     print "Error!"
     age = raw_input("Age: ") 
```

您可以为此创建一个包装函数。

```
def not_empty_input(prompt):
    input = raw_input(prompt)
    while not input: # In Python, empty strings meet this condition. So does [] and {}. :)
         print "Error! No input specified."
         input = raw_input(prompt)
    return input 
```

然后：

```
address = not_empty_input("Address: ")
age = not_empty_input("Age: ") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:15:38.937

使用`while`循环，您不需要编写`input()`两次函数：

```
 while True:
    age = input('>> Age: ')
    if age:
        break
    print('Please enter your age') 
```

您还可以检查输入是否为整数并从字符串中获取整数。空字符串`age`也会引发`ValueError`异常：

```
while True:
    try:
        age = int(input('>> Age: '))
    except ValueError:
        print('Incorrect input')
        continue
    else:
        break 
```

# requirejs - 使用 Yeoman 和 PhantomJS 进行 Mocha 测试

> ID：14219109
> 
> 赞同：10
> 
> 时间：2013-01-08T16:04:43.020
> 
> 标签：requirejs, phantomjs, mocha.js, yeoman

我正在使用[Yeoman](http://yeoman.io)来搭建我的项目。它带有几个方便的东西，包括一个基于[PhantomJS](http://phantomjs.org/)的测试运行器。

我的问题是，虽然我的测试在浏览器中正确运行，但在 CLI 中尝试使用 PhantomJS 运行它们时会超时。

这是我的测试的`index.html`样子：

```
<!doctype html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Mocha Spec Runner</title>
  <link rel="stylesheet" href="lib/mocha/mocha.css">
</head>
<body>
  <div id="mocha"></div>
  <script src="lib/mocha/mocha.js"></script>
  <!-- assertion framework -->
  <script src="lib/chai.js"></script>

  <!-- include source files here... -->
  <script data-main="scripts/main" src="scripts/vendor/require.js"></script>

  <script>
    mocha.setup({ui: 'bdd', ignoreLeaks: true});
    expect = chai.expect;
    should = chai.should();
    require(['../spec/map.spec'], function () {
      setTimeout(function () {
        require(['../runner/mocha']);
      }, 100);
    });
  </script> 

</body>
</html> 
```

这是`map.spec.js`：

```
require(['map'], function (Map) {
  describe('Choropleth Map Generator', function() {
    describe('Configure the map', function () {
      it("should enforce mandatory parameters in the configuration", function () {
        var config = {title: 'test configuration'};
        var map = new Map(config);
        (function () {
          map.getConfig();
        }).should.throw(Error);
      });
    });
  });
}); 
```

现在，当我这样做时`yeoman test`，我得到了这个：

```
Running "server:phantom" (server) task

Starting static web server on port 3501

[...]

Running "mocha:all" (mocha) task
Testing index.html
<WARN> PhantomJS timed out, possibly due to a missing Mocha run() call. Use --force to continue. </WARN>

Aborted due to warnings. 
```

正如我所说，`yeoman server:test`在浏览器中正确显示我的断言。

我正在使用 Yeoman 0.9.6 和 PhantomJS 1.7.0。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T00:07:38.113

`mocha`我通过仔细检查in的路径解决了同样的警告`test/index.html`

```
<link rel="stylesheet" href="lib/mocha/mocha.css">
</head>
<body>
  <div id="mocha"></div>
  <script src="lib/mocha/mocha.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T04:58:44.737

你在 Gruntfile 中的 mocha 配置是什么。你有没有类似的东西：

```
mocha: {
  all: ['http://localhost:3501/index.html']
}, 
```

# java - 在java中使用嵌套类的好处

> ID：14219110
> 
> 赞同：5
> 
> 时间：2013-01-08T16:04:47.770
> 
> 标签：java, software-design

在 Java 中使用嵌套类有什么好处？在许多示例中，在我看来它只会增加设计的复杂性。与例如复合模式相比，是否有任何示例显示使用嵌套类的强大功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T16:08:43.320

### 为什么使用嵌套类？

使用嵌套类有几个令人信服的理由，其中包括：

*   这是一种对仅在一个地方使用的类进行逻辑分组的方法。
*   它增加了封装。
*   嵌套类可以产生更易读和可维护的代码。

（来自[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)）

我认为我能想到的最好的情况是在某种集合类（树、链表、地图等）中实现节点。节点实现没有理由向公众公开，并且由于它仅由集合的内部使用，因此将节点类嵌套在集合类中是有意义的。

类似的东西..

```
public class MyTree {
  private class TreeNode {
    //implementation details...
  }

  //public api, where implementation references TreeNode
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T16:08:29.223

我会在一个案例中使用嵌套类，我主要需要在周围的类中使用这个类。这可能是事件监听器之类的用法。

或者在我需要实现特定接口作为 API 方法的参数并且只在这个特定的顶级类中创建这个结构的情况下。

这避免了创建更多的顶级类——弄乱你的代码库——这对任何其他类都没有用。

希望这可以帮助。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T16:10:59.463

> 与例如复合模式相比，是否有任何示例显示使用嵌套类的强大功能？

几乎所有的 Iterator 实现以及 keySet() 和 values() 的实现都是嵌套的。实际名称并不重要，但他们需要访问外部类才能完成工作。

拥有这些顶级类不会是优雅的或封装的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T16:12:06.427

我可以想到很多使用嵌套类的例子

1- 扩展一个类，以便在这个实例中使用它，其行为与通常不同（覆盖一个方法或更多）

2-在一个步骤中实现事件侦听器并将其传递给任何方法的简写

3-实现一个过于具体而无法全局定义的类（或具有包可见性或私有或其他）。而你只是想把它隐藏到更大的类中

我确实同意，尽管内部类的使用会使代码复杂化，无论您如何努力使 for 格式化程序变得漂亮，但它有它的用途，所以根据我自己的经验法则，我只在确定时才使用内部类以上其中一项适用，并且它的大小将最小，以免破坏我的代码

并且对于那个mattar，保持所有代码最小化:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T16:14:03.040

当我们知道此类将主要仅由将要写入的类使用时，我们使用嵌套（内部）类。它使包装结构保持清洁。通过使用 IDE 可以降低复杂性，您可以在其中轻松找到未在包结构中列出的类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T16:24:30.700

根据要求提供真实示例，请查看`ArrayList`jdk 的实现。
你可以在这里找到它：http: [//grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/ArrayList.java#ArrayList](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/ArrayList.java#ArrayList)

您将在 Arraylist 类中找到（除其他外）迭代器类。我猜想，这种行为的原因（对于大多数可迭代集合子类）是集合与其迭代器之间的直接连接。你在课堂之外不需要它。

您可以在 jdk 内的更多地方找到嵌套类。

# c# - Outlook 加载项：以编程方式在“SelectNamesDialog”上执行“高级查找”

> ID：14219112
> 
> 赞同：1
> 
> 时间：2013-01-08T16:04:52.600
> 
> 标签：c#, outlook, outlook-addin

在我的 Outlook 加载项中，我打开 SelectNamesDialog 来选择 GAL 上的联系人集。我想执行高级查找以查找特定公司联系人的示例（请参阅屏幕截图）。你知道这是否真的可行吗？有没有我失踪的界面？您可以查看我的代码，其中包含一些不成功的关联。

![在此处输入图像描述](../Images/e6b1a0846e431c973b6d8f0de18f6c94.png)

```
Outlook.SelectNamesDialog snd = Globals.ThisAddIn.Application.Session.GetSelectNamesDialog();

Outlook.AddressList contactsAddrList = null;
Outlook.AddressList gal = Globals.ThisAddIn.Application.Session.GetGlobalAddressList();

String company = "My Company";

// Try to look > Dead code not working
//Outlook.MAPIFolder galFolder = Globals.ThisAddIn.Application.GetNamespace("MAPI").GetDefaultFolder(Outlook.OlDefaultFolders.);
//String sScope = "SCOPE ('shallow traversal of " + (char)34 +  + (char)34 + "')";
//String sFilter = (char)34 + "urn:content-classes:person" + (char)34 + " LIKE 'RE:%'";
//Outlook.Search search = Globals.ThisAddIn.Application.AdvancedSearch(sScope, sFilter, false, company);
//contactsAddrList = search.Save(company).;

// Set InitialAddressList to Contacts folder AddressList.
snd.SetDefaultDisplayMode(Outlook.OlDefaultSelectNamesDisplayMode.olDefaultSingleName);
snd.InitialAddressList = contactsAddrList;
snd.AllowMultipleSelection = false;
snd.ForceResolution = true;
snd.ShowOnlyInitialAddressList = true;
snd.Display(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:24:27.513

没有办法调用这个 Outlook 对象模型甚至赎回。
您可以在扩展 MAPI 级别（C++ 或 Delphi）上执行此操作 - 将 PR_SEARCH 属性打开为 IMAPIContainer，设置各种属性（PR_DISPLAY_NAME、PR_ACCOUNT 等），然后调用 IMAPIContainer::GetContentsTable。

# sql - 如何防止重复表中的重复行？

> ID：14219127
> 
> 赞同：0
> 
> 时间：2013-01-08T16:05:24.573
> 
> 标签：sql

我不断收到语法错误

> *关键字“SELECT”附近的语法不正确。
> 
> ')' 附近的语法不正确。*

当使用 where exists 子句时，我是否使用了正确的 where exists 格式。

```
SELECT 
   tblLoadMaster.Salesperson, tblLoadMaster.LoadID, LoadRate, 
   PayBetween1, Paybetween2, 
   tblLoadMaster.BillingID, OriginationCity, OriginationState, 
   DestinationCity, DestinationState 
FROM tblLoadMaster
WHERE EXISTS (SELECT tblCarrier.CompanyName, tblCarrier.CarrierID 
              FROM tblCarrier 
              WHERE tblLoadMaster.CarrierID = tblCarrier.CarrierID)
  AND EXISTS (SELECT tblCustomer.CompanyName, tblCustomer.Customerflag, tblCustomer.CustomerID, tblCustomer.AddressLine1, tblCustomer.City, tblCustomer.State, tblCustomer.Zipcode, tblCustomer.CompanyPhoneNumber, tblCustomer.CompanyFaxNumber, tblCustomer.SCAC 
              FROM tblCustomer 
              WHERE tblCustomer.CustomerID = tblLoadMaster.CustomerID )
  AND EXISTS(SELECT StopLocationID FROM tblLoadStop 
             WHERE tblLoadMaster.LoadID = tblLoadStop.LoadID) 
  AND EXIST(SELECT StopLocationCompanyName 
            FROM tblStoplocation 
            WHERE tblStopLocation.StoplocationID = tblLoadStop.StoplocationID 
              AND tblLoadMaster.Phase LIKE '%4%')  
ORDER BY 
    tblCarrier.CarrierID DESC; 
```

更新

我改用`INNER JOIN`了语句，但仍然得到重复的行。该`tblLoadStop`表是我通过and获取`stoplocation`信息的查找表。该表包含两次`stoplocation ID``load ID``tblLoadstop``LOADID`

```
LoadStopID(pk)   LoadID        StopLocationID
476          13521             67       
477          13521            106 
```

然后中继器在表中显示该行两次，只有`LoadID`相同的行。

这是我的`INNER JOIN`声明；

```
SELECT  
   tblCarrier.CarrierID, tblLoadMaster.Salesperson, tblCustomer.CompanyName, 
   tblCarrier.CompanyName, tblCustomer.Customerflag, tblCustomer.CustomerID, 
   tblCustomer.AddressLine1, tblCustomer.City, tblCustomer.State, 
   tblCustomer.Zipcode, tblCustomer.CompanyPhoneNumber, 
   tblCustomer.CompanyFaxNumber, tblCustomer.SCAC, StopLocationCompanyName, 
   tblLoadMaster.LoadID,LoadRate,PayBetween1, Paybetween2 , tblLoadMaster.BillingID, 
   OriginationCity, OriginationState, DestinationCity, DestinationState 
FROM 
   tblLoadMaster 
INNER JOIN 
   tblCarrier On tblLoadMaster.CarrierID = tblCarrier.CarrierID 
INNER JOIN 
   tblCustomer ON tblCustomer.CustomerID = tblLoadMaster.CustomerID
INNER JOIN 
   tblLoadStop ON tblLoadMaster.LoadID = tblLoadStop.LoadID 
INNER JOIN 
   tblLkupCarrierLoad ON tblLkupCarrierLoad.CarrierID = tblCarrier.CarrierID 
INNER JOIN 
   tblStoplocation ON tblStopLocation.StoplocationID = tblLoadStop.StoplocationID  
WHERE 
   tblLoadMaster.Phase LIKE '%4%'  
ORDER BY 
   tblCarrier.CarrierID DESC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:09:27.037

也许是最后一个“EXISTS”中的错字被写成“EXIST”

```
SELECT tblLoadMaster.Salesperson,  tblLoadMaster.LoadID,LoadRate,PayBetween1, Paybetween2 , tblLoadMaster.BillingID, OriginationCity,OriginationState, DestinationCity, DestinationState 
FROM tblLoadMaster 
 WHERE EXISTS 
    (SELECT tblCarrier.CompanyName,tblCarrier.CarrierID FROM tblCarrier WHERE tblLoadMaster.CarrierID =tblCarrier.CarrierID )
 AND EXISTS 
  (SELECT tblCustomer.CompanyName, tblCustomer.Customerflag, tblCustomer.CustomerID, tblCustomer.AddressLine1, tblCustomer.City, tblCustomer.State, tblCustomeripcode, tblCustomer.CompanyPhoneNumber, tblCustomer.CompanyFaxNumber, tblCustomer.SCAC FROM tblCustomer WHERE tblCustomer.CustomerID=tblLoadMaster.CustomerID )
 AND EXISTS
    (SELECT StopLocationID FROM tblLoadStop WHERE tblLoadMaster.LoadID=tblLoadStop.LoadID) 
 AND EXISTS
  ( SELECT StopLocationCompanyName FROM tblStoplocation WHERE tblStopLocation.StoplocationID=tblLoadStop.StoplocationID AND  tblLoadMaster.Phase LIKE '%4%') 
ORDER BY tblCarrier.CarrierID DESC; 
```

顺便说一句，我不确定您使用的是哪个数据库，但我更喜欢在存在子句上使用“从表中选择 1”。它似乎更具可读性，您马上就知道您只想知道是否有返回，而选择的列根本不重要

```
SELECT tblLoadMaster.Salesperson,  tblLoadMaster.LoadID,LoadRate,PayBetween1, Paybetween2 , tblLoadMaster.BillingID, OriginationCity,OriginationState, DestinationCity, DestinationState 
FROM tblLoadMaster 
 WHERE EXISTS 
    (SELECT 1 FROM tblCarrier WHERE tblLoadMaster.CarrierID =tblCarrier.CarrierID )
 AND EXISTS 
  (SELECT 1 FROM tblCustomer WHERE tblCustomer.CustomerID=tblLoadMaster.CustomerID )
 AND EXISTS
    (SELECT 1 FROM tblLoadStop WHERE tblLoadMaster.LoadID=tblLoadStop.LoadID) 
 AND EXISTS
  ( SELECT 1 FROM tblStoplocation WHERE tblStopLocation.StoplocationID=tblLoadStop.StoplocationID AND  tblLoadMaster.Phase LIKE '%4%') 
ORDER BY tblCarrier.CarrierID DESC; 
```

是不是更漂亮了点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:08:28.410

您在下面说 EXIST，而不是 EXISTS：（​​更改以粗体显示）

```
"SELECT 
     tblLoadMaster.Salesperson,  tblLoadMaster.LoadID,
     LoadRate, PayBetween1, Paybetween2 , tblLoadMaster.BillingID, 
     OriginationCity,OriginationState, DestinationCity, DestinationState 
 FROM 
   tblLoadMaster "+
"WHERE 
     EXISTS (SELECT 
                   tblCarrier.CompanyName,tblCarrier.CarrierID 
             FROM 
                    tblCarrier 
             WHERE 
                    tblLoadMaster.CarrierID =tblCarrier.CarrierID )" +
 "AND 
     EXISTS(SELECT 
                  tblCustomer.CompanyName, tblCustomer.Customerflag, 
                  tblCustomer.CustomerID,
                  tblCustomer.AddressLine1, tblCustomer.City, tblCustomer.State, 
                  tblCustomer.Zipcode, tblCustomer.CompanyPhoneNumber,
                  tblCustomer.CompanyFaxNumber, tblCustomer.SCAC 
            FROM 
                  tblCustomer 
            WHERE 
                  tblCustomer.CustomerID=tblLoadMaster.CustomerID )" +
 "AND EXISTS(SELECT 
                  StopLocationID 
             FROM 
                  tblLoadStop 
             WHERE 
                  tblLoadMaster.LoadID=tblLoadStop.LoadID) 
   AND **EXISTS**(SELECT 
                        StopLocationCompanyName 
                   FROM 
                        tblStoplocation 
                   WHERE 
                         tblStopLocation.StoplocationID=tblLoadStop.StoplocationID 
                         AND  
                       tblLoadMaster.Phase LIKE '%4%')  
                   ORDER BY 
                       tblCarrier.CarrierID DESC;"); 
```

# c# - Linq中的最大值选择Innerjoin内

> ID：14219129
> 
> 赞同：0
> 
> 时间：2013-01-08T16:05:26.397
> 
> 标签：c#, linq, linq-to-entities

我有以下困境：

我们有两个表： Patient 和 Charges ， patOID 是 Charges 表中的外键。

两个表之间的简单连接：

```
 from itemPat in listPat 
 join itemCharge in listCharge on itemPat.patOID equals itemC.patOID 
 select new 
      {
        itemPat.patOID,
        itemCharge.paid
      } 
```

考虑到一个病人可以有多个收费的面孔，我怎样才能获得某个字段的最大值的 itemCharge （例如付费）。

我尝试了什么：

```
 from itemPat in listPat 
 join itemCharge in listCharge on itemPat.patOID equals itemC.patOID into zzz
 select new 
       {
           itemPat.patOID,
           MaxPay=zzz.Max(p=>p.paid),
       } 
```

此解决方案为我提供了该字段的值，但不允许我访问我想引用的记录中的其他字段。我怎样才能做到这一点 ？

我在想类似的东西：

```
 from itemPat in listPat 
     join itemCharge in listCharge.Where(p=>Max(p.paid)) on itemPat.patOID equals itemC.patOID into zzz
     select new 
           {
               itemPat.patOID,
               MaxPay=zzz.Max(p=>p.paid),
           } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:11:31.967

```
from itemPat in listPat 
join itemCharge in listCharge on itemPat.patOID equals itemC.patOID into g
select new  {
   itemPat.patOID,
   MaxCharge = g.OrderByDescending(p => p.paid).FirstOrDefault()
} 
```

`MaxCharge`属性将包含具有最大支付值的费用对象，如果没有病人的费用，则为 null。

# c# - 将数据添加到 XML 文件

> ID：14219138
> 
> 赞同：1
> 
> 时间：2013-01-08T16:06:02.973
> 
> 标签：c#, xml, windows-phone-7, records

我的 XML 文件是：

 `````
<?xml version="1.0" encoding="utf-8" ?>
<people>
<person
index="1"
name="Zlecenie numer jeden"
beneficiary="Kowalski"
description="Proste zlecenie jakiejs strony czy cos"
price="800"
deadline="27.12.2013" />
</people> 
```

How can I add to this existing file, something like new record:` 

```
<person
index="4"
name="Zlecenie numer cztery"
beneficiary="Kowalski"
description="Proste zlecenie jakiejs strony czy cos"
price="800"
deadline="27.12.2013" /> 
```

或删除，或者如果您知道如何更新现有记录，那么这也是。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:12:11.310

尝试下一个将元素添加到 xml 中的代码片段。请注意，我使用 xml 作为带有转义字符的字符串。你可能有xml文件

```
var str = "<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<people>\r\n<person\r\nindex=\"1\"\r\nname=\"Zlec" +
"enie numer jeden\"\r\nbeneficiary=\"Kowalski\"\r\ndescription=\"Proste zlecenie jakiejs " +
"strony czy cos\"\r\nprice=\"800\"\r\ndeadline=\"27.12.2013\" />\r\n</people>";

var xml = XElement.Parse(str);
var newNode = new XElement("person", 
                    new XAttribute("index", 4),
                    new XAttribute("name", "Zlecenie numer cztery"),
                    new XAttribute("beneficiary", "Kowalski"),
                    new XAttribute("description", "Proste zlecenie jakiejs strony czy cos"),
                    new XAttribute("price", 800),
                    new XAttribute("deadline", "27.12.2013"));

xml.Add(newNode);

//you can store whole xml tree in one variable simply by calling ToString on xml
str = xml.Tostring();

Console.WriteLine(str); 
```

印刷：

```
<people>
  <person index="1" name="Zlecenie numer jeden" beneficiary="Kowalski" description="Proste zlecenie jakiejs strony czy cos" price="800" deadline="27.12.2013" />
  <person index="4" name="Zlecenie numer cztery" beneficiary="Kowalski" description="Proste zlecenie jakiejs strony czy cos" price="800" deadline="27.12.2013" />
</people> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:24:26.097

```
XDocument xdoc = XDocument.Load(xmlFileName);

void Update(XDocument xdoc )
{
     XElement repser = doc.Root.Element("people").Elements("person").Where(r => (int)r.Attribute("index") = xdoc.index).FirstOrDefault();
    if (repser != null)
    {
        // update
        repser.SetAttribute("name", xdoc.name);
        repser.SetAttribute("beneficiary", xdoc.beneficiary);
        repser.SetAttribute("description", xdoc.description);
        repser.SetAttribute("price", xdoc.price);
        repser.SetAttribute("deadline", xdoc.deadline);
        // and so on
     }
     else
     {
        //insert
        doc.Root.Element("people").Add
           new XElement("person",
             new XAttribute("index", xdoc.id),
             new XAttribute("name", xdoc.name),
             new XAttribute("beneficiary", xdoc.beneficiary),
             new XAttribute("description", xdoc.description),
             new XAttribute("price", xdoc.price),
             new XAttribute("deadline", xdoc.deadline)
             // and so on
           ));
      }
} 
```

您可以在 else 语句中手动插入 XAttribute 值中的值以进行更新。`

# ruby-on-rails - Rails 帮助集成嵌套？用户特定的上传到现有应用程序

> ID：14219139
> 
> 赞同：2
> 
> 时间：2013-01-08T16:06:13.453
> 
> 标签：ruby-on-rails, authentication, nested, associations

我的应用程序允许用户登录并进行会话。我有一个用户控制器和一个会话控制器，主要是从 railscasts“从头开始授权”开发的。我最近添加了使用 jquery 上传器将文件上传到 S3 的功能......同样，其中很多来自 railscasts“上传到亚马逊 S3”。

问题是我的上传不是特定于用户的。现在我的“上传”控制器有一个“授权” before_filter 以确保您必须登录才能访问上传器；但是，一旦用户上传文件，所有用户都会看到上传！不好！我需要确保用户只能看到他们上传的相应文件。

我已经尝试了一些东西，但似乎都没有。我正在寻找有关如何确保用户只能看到他们上传的文件的方向。我正在关注关于嵌套资源的不同 railscasts 和 rails 文档（我认为这就是我必须这样做的方式？）但我一直遗漏一些东西，因为似乎有很多我不是 100% 理解的变化。我修复了一个错误，然后又遇到了另一个错误，我想知道我是否走在正确的道路上，或者我错过了什么？

我认为这应该起作用的方式是首先嵌套资源：

```
 resources :users do
    resources :cust_uploads
  end 
```

然后我修改了模型如下并运行“rake db：migrate”将它们绑定在一起......我可能需要手动修改带有外国 id 字段的迁移文件？：

```
class User < ActiveRecord::Base
    has_secure_password
    attr_accessible :email, :password, :password_confirmation
    validates_uniqueness_of :email
    has_many :CustUploads
end

class CustUpload < ActiveRecord::Base
  attr_accessible :cust_file_url, :name
  before_create :default_name
  belongs_to :User

  def default_name
    self.name ||= File.basename(cust_file_url, '.*').titleize if cust_file_url
  end
end 
```

这给了我大量的路径错误，我现在正在努力解决......因为我的 new_cust_upload_path 可能类似于 new_user_cust_upload_path

我也认为我的表单和控制器需要大量修改......

我正在使用 form_for

```
<%= form_for(@cust_upload) do |f| %> 
```

我认为现在应该是@user.cust_upload？

目前的控制器：

```
class UsersController < ApplicationController
    def new
        @user = User.new
    end

    def create
      @user = User.new(params[:user])
      if @user.save
        session[:user_id] = @user.id
        redirect_to root_url, notice: "Thank you for signing up!"
      else
        render "new"
      end
    end

end

class CustUploadsController < ApplicationController
  before_filter :authorize
  def index
    @cust_uploads = CustUpload.all
  end

  def show
    @cust_upload = CustUpload.find(params[:id])
  end

  def new
    @cust_upload = CustUpload.new
  end

  def create
    @cust_upload = CustUpload.create(params[:cust_upload])
  end

  def edit
    @cust_upload = CustUpload.find(params[:id])
  end

  def update
    @cust_upload = CustUpload.find(params[:id])
    if @cust_upload.update_attributes(params[:cust_upload])
        redirect_to @cust_upload_url, notice: "Cust upload was successfully updated."
      else
        render :edit
    end
  end

  def destroy
    @cust_upload = CustUpload.find(params[:id])
    @cust_upload.destroy
    redirect_to cust_uploads_url, notice: "Cust Upload was successfully destroyed"
  end
end 
```

任何方向将不胜感激。我已经学习了很多教程，并且可以从头开始做一些简单的事情，但我似乎无法将此功能与我现有的应用程序集成。这里有一些我无法思考的事情，我希望有人可以为我提供那个 Eurika 时刻！谢谢

**编辑** routes.rb 和我的模型似乎有适当的连接（下面的代码）。当我在终端输入“rake routes”时，我得到了一个预期的列表（见下文），但是我得到了一个错误：“没有路由匹配 {:action=>"show", :controller=>"cust_uploads"}" for a link与 user_cust_uploads_path。cust_uploads 路径中有一个显示模板，并且 rake 路由说它存在！我错过了什么？

```
user_cust_uploads GET    /users/:user_id/cust_uploads(.:format)          cust_uploads#index
                      POST   /users/:user_id/cust_uploads(.:format)          cust_uploads#create
 new_user_cust_upload GET    /users/:user_id/cust_uploads/new(.:format)      cust_uploads#new
edit_user_cust_upload GET    /users/:user_id/cust_uploads/:id/edit(.:format) cust_uploads#edit
     user_cust_upload GET    /users/:user_id/cust_uploads/:id(.:format)      cust_uploads#show 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:13:15.633

考虑到你想要达到

1.  上传内容的用户应该只看到它们。

为什么不将上传与特定的用户 ID 相关联，然后在视图中显示它们时将它们从自己的 ID（`current_user.uploads`）中拉出

# jsp - JSP 输出在 680 KB 后以 NullPointerException 结束

> ID：14219144
> 
> 赞同：2
> 
> 时间：2013-01-08T16:06:29.403
> 
> 标签：jsp, nullpointerexception, websphere, response

我有一个带有脚本的旧版 JSP，我正在 Websphere 7.0.0.13 上的应用程序中对其进行测试。具有完全相同数据的相同 JSP 在 Weblogic 10.3.2 中可以正常工作。

JSP 使用代码生成大量 HTML 输出 + javascript。在 Websphere 上，在 JSP 的输出中间始终出现 NullPointerException 失败。每次失败时，页面中大约 680 KB 的数据都会失败。

如果我从浏览器查看源代码，输出的最后一行会被截断，就像这样

> ";document.getElementById('start.123.12345.67891.123123123').appendChild(divTag);exError 500: java.lang.NullPointerException

没有其他输出。日志报告来自我的 JSP 的未捕获 NullPointerException。

大部分输出是使用`out.println();`脚本内的页面 JspWriter 生成的。

我尝试为 autoflush=true 添加页面指令，认为这可能是缓冲区问题，但仍然失败。<%@page autoFlush="true" %>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:18:33.840

[在使用keepgenerated JSP 引擎配置参数](http://www.ibm.com/developerworks/websphere/techjournal/0403_johnson/0403_johnson.html)查看生成的 java 文件并使用 NullPointerException 的堆栈跟踪中的行号后，我解决了这个问题。

原始开发人员在文件末尾的脚本中将 JspWriter 设置为 null。

```
<% 
  out = null;
%>
</html> 
```

在 Websphere 生成的 .java 文件中，out 变量在以下内容之前设置为 null：

```
out = null;
out.write(_jsp_string55); 
```

如果我注释掉`out = null;`JSP 文件中的语句，这将解决问题。

仅供参考 - 我还创建了一个测试 JSP，它通过循环和打印到 JspWriter 来写入远远超过 680 KB。我发现无论输出大小如何，我都无法重现相同的 NullPointerException。

# php - PHP 上传 - 不允许某些扩展不好？

> ID：14219145
> 
> 赞同：1
> 
> 时间：2013-01-08T16:06:33.063
> 
> 标签：php, file-upload

我有一个我正在处理的上传表单，最多允许 300MB。

我们的客户不想规范上传哪些文件，因为他们的客户可能会发送大图像文件，例如 png、tiff、psd 等。

“禁止”列表会比允许更好吗？它将其移动到上传文件夹。我让上传文件夹全部拒绝并隐藏 htaccess 中的索引，同时添加他们的 IP 以阻止，然后显示 404 页面。如果他们也尝试直接访问文件，这也有效。

我不希望人们上传 .php、.php5、.asp、.exe 等

是否有我可以找到的文件列表来禁止此类文件，或者只是从头开始编写它们？

抱歉跑题了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T17:04:54.147

出于安全原因，最好使用允许列表（白名单）而不是禁止列表（黑名单）。这是一个非常全面的文件数组及其允许的 mimetypes，取自 wordpress：

```
array(
    // Image formats
    'jpg|jpeg|jpe' => 'image/jpeg',
    'gif' => 'image/gif',
    'png' => 'image/png',
    'bmp' => 'image/bmp',
    'tif|tiff' => 'image/tiff',
    'ico' => 'image/x-icon',
    // Video formats
    'asf|asx|wax|wmv|wmx' => 'video/asf',
    'avi' => 'video/avi',
    'divx' => 'video/divx',
    'flv' => 'video/x-flv',
    'mov|qt' => 'video/quicktime',
    'mpeg|mpg|mpe' => 'video/mpeg',
    'mp4|m4v' => 'video/mp4',
    'ogv' => 'video/ogg',
    'mkv' => 'video/x-matroska',
    // Text formats
    'txt|asc|c|cc|h' => 'text/plain',
    'csv' => 'text/csv',
    'tsv' => 'text/tab-separated-values',
    'ics' => 'text/calendar',
    'rtx' => 'text/richtext',
    'css' => 'text/css',
    'htm|html' => 'text/html',
    // Audio formats
    'mp3|m4a|m4b' => 'audio/mpeg',
    'ra|ram' => 'audio/x-realaudio',
    'wav' => 'audio/wav',
    'ogg|oga' => 'audio/ogg',
    'mid|midi' => 'audio/midi',
    'wma' => 'audio/wma',
    'mka' => 'audio/x-matroska',
    // Misc application formats
    'rtf' => 'application/rtf',
    'js' => 'application/javascript',
    'pdf' => 'application/pdf',
    'swf' => 'application/x-shockwave-flash',
    'class' => 'application/java',
    'tar' => 'application/x-tar',
    'zip' => 'application/zip',
    'gz|gzip' => 'application/x-gzip',
    'rar' => 'application/rar',
    '7z' => 'application/x-7z-compressed',
    // MS Office formats
    'doc' => 'application/msword',
    'pot|pps|ppt' => 'application/vnd.ms-powerpoint',
    'wri' => 'application/vnd.ms-write',
    'xla|xls|xlt|xlw' => 'application/vnd.ms-excel',
    'mdb' => 'application/vnd.ms-access',
    'mpp' => 'application/vnd.ms-project',
    'docx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
    'docm' => 'application/vnd.ms-word.document.macroEnabled.12',
    'dotx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',
    'dotm' => 'application/vnd.ms-word.template.macroEnabled.12',
    'xlsx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'xlsm' => 'application/vnd.ms-excel.sheet.macroEnabled.12',
    'xlsb' => 'application/vnd.ms-excel.sheet.binary.macroEnabled.12',
    'xltx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',
    'xltm' => 'application/vnd.ms-excel.template.macroEnabled.12',
    'xlam' => 'application/vnd.ms-excel.addin.macroEnabled.12',
    'pptx' => 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
    'pptm' => 'application/vnd.ms-powerpoint.presentation.macroEnabled.12',
    'ppsx' => 'application/vnd.openxmlformats-officedocument.presentationml.slideshow',
    'ppsm' => 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12',
    'potx' => 'application/vnd.openxmlformats-officedocument.presentationml.template',
    'potm' => 'application/vnd.ms-powerpoint.template.macroEnabled.12',
    'ppam' => 'application/vnd.ms-powerpoint.addin.macroEnabled.12',
    'sldx' => 'application/vnd.openxmlformats-officedocument.presentationml.slide',
    'sldm' => 'application/vnd.ms-powerpoint.slide.macroEnabled.12',
    'onetoc|onetoc2|onetmp|onepkg' => 'application/onenote',
    // OpenOffice formats
    'odt' => 'application/vnd.oasis.opendocument.text',
    'odp' => 'application/vnd.oasis.opendocument.presentation',
    'ods' => 'application/vnd.oasis.opendocument.spreadsheet',
    'odg' => 'application/vnd.oasis.opendocument.graphics',
    'odc' => 'application/vnd.oasis.opendocument.chart',
    'odb' => 'application/vnd.oasis.opendocument.database',
    'odf' => 'application/vnd.oasis.opendocument.formula',
    // WordPerfect formats
    'wp|wpd' => 'application/wordperfect',
    ); 
```

如果缺少任何内容，您可以添加它，但这应该涵盖他们需要上传的几乎所有文件，同时不允许任何潜在的恶意文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:16:46.070

获得扩展程序后，您可以执行以下操作：

```
$not_allowed = array('php', 'php5', 'exe');

if(in_array($extension, $not_allowed)){
    echo 'File not allowed';
}else{
    echo 'File allowed';
} 
```

或者，相反：

```
$allowed = array('doc', 'pdf', 'docx');

if(in_array($extension, $allowed)){
    echo 'File allowed';
}else{
    echo 'File not allowed';
} 
```

# sql-server - SQL Server中如何选择次年4月初？

> ID：14219146
> 
> 赞同：0
> 
> 时间：2013-01-08T16:06:38.233
> 
> 标签：sql-server

你能帮我选择一个特定的下一个月开始的日期吗，例如四月？例如，如果是 Jan 08 2013，应该选择 April 01 2013，如果是 June 08 2013，应该选择 April 01 2014。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:13:18.747

我会创建一个[日历表](http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)，然后你可以简单地做这样的事情：

```
select 
    min([Date])
from 
    dbo.Calendar
where
    MonthNumber = 4 and
    DayNumber = 1 and
    [Date] > getdate() 
```

查询日历表通常比使用日期函数更清晰、更简单、更灵活。您可能还想考虑如果今天是 4 月 1 日会发生什么：您想要今天的日期还是明年的日期？

如果您对 4 月 1 日感兴趣，因为它是一个财政年度的开始，您可以直接将该信息添加到您的日历表中：

```
select 
    min([Date])
from 
    dbo.Calendar
where
    IsStartOfFinancialYear = 0x1 and
    [Date] > getdate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:12:17.717

使用`DATEADD`and`DATEPART`函数，就像这个简短的例子：

```
DECLARE @Date Datetime

SET @Date = '2013.01.08 00:00:00'

SELECT DATEADD(year, 
CASE WHEN DATEPART(month, @Date) < 4 
THEN 0 
ELSE 1 END, 
  DATEADD(day, -DATEPART(day, @Date) + 1, 
     DATEADD(month, -DATEPART(month, @Date) + 4, @Date))) 
```

# mysql - 你可以让一个 INT 或 DECIMAL 字段只接受负数吗？

> ID：14219151
> 
> 赞同：1
> 
> 时间：2013-01-08T16:06:52.867
> 
> 标签：mysql, sql

类似于无符号字段，但仅适用于负数。

我只是好奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T16:10:07.770

这可以通过`before-insert`触发器来完成。

```
CREATE DEFINER=`root`@`localhost` trigger triggerName 
BEFORE INSERT ON tableA
FOR EACH ROW BEGIN

IF(value > 0) THEN
STOP ACTION  
END IF; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T16:13:53.317

您可以在每次插入、更新和选择时使用无符号整数和减号。

# c - 如何切换字符串和大小写？

> ID：14219156
> 
> 赞同：0
> 
> 时间：2013-01-08T16:07:12.787
> 
> 标签：c, macros

我有以下代码

```
#define SWITCH(S) char *_S = S; if (0)
#define CASE(S) } else if (strcmp(_S, S) == 0) {switch(1) { case 1
#define BREAK }
#define DEFAULT } else {switch(1) { case 1

int main()
{
    char buf[256];

    printf("\nString - Enter your string: ");
    scanf ("%s", buf);

    SWITCH (buf) {
        CASE ("abcdef"):
            printf ("B1!\n");
            BREAK;
        CASE ("ghijkl"):
            printf ("C1!\n");
            BREAK;
        DEFAULT:
            printf ("D1!\n");
            BREAK;
    }
} 
```

如果我用 生成预处理器代码`gcc -E`，我将得到以下代码

```
int main()
{
    char buf[256];

    printf("\nString - Enter your string: ");
    scanf ("%s", buf);

    char *_S = buf;
    if (0) {
    } else if (strcmp(_S, "abcdef") == 0) {switch(1) { case 1:
        printf ("B1!\n");
        };
    } else if (strcmp(_S, "ghijkl") == 0) {switch(1) { case 1:
        printf ("C1!\n");
        };
    } else {switch(1) { case 1:
        printf ("D1!\n");
        };
    }
} 
```

但是对于一些`char *_S = buf;`在代码中间定义的 gcc 是不受欢迎的，并且可能会提供编译错误

如何在我的宏中解决这个问题？

请不要建议定义`char *_S`为全局（out of the `main`）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T09:38:37.367

不好了！！！

[我在这篇文章](https://stackoverflow.com/questions/14160392/how-do-i-transform-an-if-statement-with-2-variables-onto-a-switch-function-using/14162037#14162037)中写了这个作为一个笑话

不要使用它是非常非常可怕的，如果你想避免 if-else 你可以在不折磨编译器的情况下做到这一点，考虑使用一对字符串：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char buf[256];
    const char *ap[] = {
        "abcdef", "B1!\n",
        "ghijkl", "C1!\n",
        NULL    , "D1!\n",
    }, **p = ap;

    printf("\nString - Enter your string: ");
    scanf ("%s", buf);
    while (*p) {
        if (strcmp(buf, *p) == 0) break;
        p += 2;
    }
    printf("%s", *(++p));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-08T16:10:30.113

完全删除宏，并以“扩展”方式编写，将声明移到顶部。这些宏太可怕了。

做不到这一点，调整`SWITCH`以引入一个新的范围（第二个`{`）。这当然会迫使你不得不关闭两个范围，所以也许`SWITCH_END`在最后添加一个可憎的东西来封装它。任何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:30:32.027

确保代码被编译为 C99 或更高版本；否则，您将需要使用不同的控制结构。

```
#if defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L

  SWITCH(buf)
  {
    ...
  }

#else

  if (strcmp(buf, "abcdef") == 0)
  {
    ...
  }
  else if (strcmp (buf, "ghijkl") == 0)
  {
    ...
  }
  else
  {
    ...
  }

#endif 
```

使用预处理器来“改变”或扩展 C 语法通常不是一个好主意（我有疤痕组织来证明）；`switch`没有在字符串表达式上定义是有原因的。

如果你*真的*想`switch`在这种情况下使用 a ，那么最好编写一个哈希函数来为每个字符串返回一个键，然后打开结果：

```
#define ABCDEF ... // hash key generated for "abcdef"
#define GHIJKL ... // hash key generated for "ghijkl"
...
switch(hash(buf))
{
  case ABCDEF :
     ...
     break;

  case GHIJKL :
     ...
     break;

  default:
     ...
     break;
} 
```

# r - 快速连接 data.table（潜在错误，报告前检查）

> ID：14219158
> 
> 赞同：7
> 
> 时间：2013-01-08T16:07:18.643
> 
> 标签：r, merge, data.table

这可能是一个错误。在这种情况下，我将删除此问题并报告为错误。我希望有人看看以确保我没有做错什么，所以我不会浪费开发人员的时间。

```
test = data.table(mo=1:100, b=100:1, key=c("mo", "b"))
mo = 1
test[J(mo)] 
```

这将返回整个`test`data.table 而不是返回的正确结果

```
test[J(1)] 
```

我相信错误可能来自与`test`正在连接的表具有相同的列名，`mo`. 还有其他人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T16:42:14.477

这是一个范围界定问题，类似于[`data.table-faq 2.13`(warning, pdf)](http://datatable.r-forge.r-project.org/datatable-faq.pdf)中讨论的问题。因为`test`包含一个名为 的列`mo`，所以在`J(mo)`评估时，它会返回整个列，而不是`mo`在全局环境中找到的值，它会屏蔽它。（当然，当您想做类似的事情时，这种范围行为非常*好*`test[mo<4]`！）

试试这个*看看*发生了什么：

```
test <- data.table(mo=1:5, b=5:1, key=c("mo", "b"))
mo <-  1
test[browser()]
Browse[1]> J(mo)
#    mo
# 1:  1
# 2:  2
# 3:  3
# 4:  4
# 5:  5
# Browse[1]> 
```

正如链接的常见问题解答中所建议的，一个简单的解决方案是重命名索引变量：

```
MO <- 1
test[J(MO)]
#    mo b
# 1:  1 6 
```

（这也将起作用，原因在 in 的文档中讨论`i`）`?data.table`：

```
mo <- data.table(1)
test[mo]
#    mo b
# 1:  1 6 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T16:35:31.117

这不是错误，而是记录在案的行为 afaik。这是一个范围问题：

```
test[J(globalenv()$mo)]
   mo   b
1:  1 100 
```

# c# - 从互联网更新图像

> ID：14219170
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:07:52.267
> 
> 标签：c#, windows-phone-7

我正在尝试使用按钮和图像做一个简单的应用程序。此按钮更新该图像，即来自安全摄像头的图像。尝试这个（和很多其他的东西）

```
Image image1 = new Image();
BitmapImage src = new BitmapImage();
src.UriSource = new Uri("http://cameras/upload/img/CAM_INTERNET_1.jpg", UriKind.Relative);
image1.Source = src; 
```

来自网络的图像每 30 秒刷新一次。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:32:34.203

设备可能会将 Uri 视为未更改，并为您提供图像的缓存版本。我会尝试将一些虚假的查询字符串附加到 Uri 以使其唯一，以查看它是否通过缓存。

```
var image1 = new Image();
var src = new BitmapImage();
var uri = string.Format(
    "http://cameras/upload/img/CAM_INTERNET_1.jpg?{0}", 
    DateTime.Now.Ticks); 
src.UriSource = new Uri(uri, UriKind.Relative);
image1.Source = src; 
```

请注意，我没有尝试过这个，所以它可能会也可能不会。

# c++ - 如何从 Eclipse 编译和运行 C++ 程序？

> ID：14219171
> 
> 赞同：4
> 
> 时间：2013-01-08T16:07:52.240
> 
> 标签：c++, eclipse, compilation, execute

我正在尝试使用 Eclipse 编写、编译和执行“HelloWorld”C++ 程序。我已经成功安装并运行了 Eclipse，创建了一个新项目并编写了 HelloWorld 程序。现在我想编译它并运行。

我在 Eclipse 中没有找到“编译”选项，但在“项目”菜单中找到了“构建项目”选项。我假设 Build 就是我所说的“编译”。单击此选项后，Eclipse 生成“Debug”文件夹，其中包含“src”子文件夹以及 3 个文件：“sources.mk”、“objects.mk”和“makefile”。首先，我不知道这些文件是什么意思（以及其中哪些是我的“可执行文件”）。其次，我仍然需要执行我的程序。我试图单击“运行”菜单中的“运行”选项。结果我收到一条错误消息：“启动失败。找不到二进制文件”。

请任何人帮助我使用 Eclipse 编译和运行我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-04T18:51:14.173

Eclipse 作为 IDE 意味着创建项目不限于一个文件，因此存在多个文件，必须链接和编译这些文件，以便根据项目中实现的方法同步工作。运行项目或特定program 需要该特定项目的二进制文件，只有在构建成功时才会创建该二进制文件。因此，成功的构建对于二进制文件的创建是必须的，而二进制文件又负责运行项目或程序。

因此，在成功构建后首先使用 Ctrl+B 构建项目，然后运行该项目。

# javascript - 卡顿背景图片 IE

> ID：14219172
> 
> 赞同：0
> 
> 时间：2013-01-08T16:07:57.820
> 
> 标签：javascript, jquery, internet-explorer, background

我有一个关于使用 jQuery 更改背景位置的问题。我正在处理的网站（[http://www.jeroenrood.nl/GortzFruit](http://www.jeroenrood.nl/GortzFruit)）有一个滚动动画（滚轮或锚点单击），背景中 img-tag 的顶部位置变化比滚动慢速度。

这会在 Chrome 和 Firefox 中创建流畅的视差滚动效果，但在 Internet Explorer 中则不然。在 IE 中（无论哪个版本），这种效果会很卡顿（如上述链接所示）。

这是我使用的关于视差滚动效果 (HTML) 的代码：

```
<div style='height:1000px;background-color:#333;position:relative;' id='page1'>

    <img src='images/bg1.png' alt='' style='display:inline;position:absolute;top:-60px;left:0px;width:100%;z-index:0;' class='background' />   

</div> 
```

这是 javascript/jQuery 代码：

```
var page1 = $('#page1').offset().top;
var windowHeight = $(window).height();

$(window).scroll(function(){
        var scrollTop = $(window).scrollTop();
        //if the first page is in the viewport
        if((page1 <= (scrollTop+windowHeight))&&((page1+1000) >= scrollTop)){
            newOffset = -60 + ((scrollTop - page1)*0.8);
            $('#page1 .background').css('top',newOffset);
        }
}); 
```

不知何故，IE 似乎在处理图像的这个位置并应用它方面滞后。有没有人知道如何使 IE 具有与 Chrome 或 Firefox 类似的平滑滚动效果？

提前致谢，

杰伦

* * *

**编辑：**

好的，我正在寻找解决方案的路上！

我尝试了 background-attachment:fixed，这并没有导致 IE 卡顿。然后我想，好吧，这个css可以和视差效果结合起来。IE 中的过渡存在导致口吃的间隙，所以也许我可以用 background-attachment:fixed 来桥接它们。

这似乎有效！现在它甚至是 IE 中的流畅动画。即使有大量的背景图像。

这是代码（HTML）：

```
<div style='height:1000px;background-color:#333;position:relative;text-align:center;' id='page1'>

    <div class='background' style='display:inline;position:absolute;top:-60px;left:0px;height:1000px;width:2000px;z-index:0;background-image:url(images/bg1.png);background-repeat:no-repeat;background-position:left -60px;background-attachment:fixed;'></div>   

</div> 
```

这是相关的 javascript/jQuery 代码：

```
var page1 = $('#page1').offset().top;
var windowHeight = $(window).height();
$(window).scroll(function(){
        var scrollTop = $(window).scrollTop();
        //if the first page is in the viewport
        if((page1 <= (scrollTop+windowHeight))&&((page1+1000) >= scrollTop)){
            newOffset = "left "+ (-60 - ((scrollTop - page1)*0.2))+"px";
            $('#page1 .background').css('background-position',newOffset);
        }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:12:31.000

使[这个图像](http://www.jeroenrood.nl/GortzFruit/images/bg1.png)小很多。它是 2000×2386 像素和 8.3MB 大。您可以将其设为 1000×1193 像素并将其转换为 JPEG。JPEG 比 PNG 更好地压缩照片。浏览器可以比大图像更快地处理小图像。

# java - android从文件中读取

> ID：14219175
> 
> 赞同：3
> 
> 时间：2013-01-08T16:08:06.310
> 
> 标签：java, android

我是 android 新手，在阅读书籍时无法理解循环中新分配的原因。在循环之前完成一次还不够吗？

```
 FileInputStream fIn =
                openFileInput("textfile.txt");
        InputStreamReader isr = new
                InputStreamReader(fIn);
        char[] inputBuffer = new char[READ_BLOCK_SIZE];
        String s = "";
        int charRead;
        while ((charRead = isr.read(inputBuffer))>0)
        {
            //---convert the chars to a String---
            String readString =
            String.copyValueOf(inputBuffer, 0,
            charRead);
            s += readString;
            inputBuffer = new char[READ_BLOCK_SIZE];
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:21:55.960

从`String.copyValueOf`javadoc ：

```
 /**
 * Creates a new string containing the specified characters in the character
 * array. Modifying the character array after creating the string has no
 * effect on the string.
 *
 * @param start
 *            the starting offset in the character array.
 * @param length
 *            the number of characters to use. 
```

所以**没有理由**在循环中创建一个新的 char[]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:43:08.517

只分配一次缓冲区就足够了，因此您可以删除循环内的分配，它应该可以正常工作。

还有一件事……这段代码的性能很差，因为它在循环中使用了字符串连接。您应该使用`StringBuilder.append()`而不是`s += readString`.

PS 我建议你选择另一本书，因为这本书在如此简单的代码中错误太多。

# r - 在 R 函数中包含和和向量

> ID：14219176
> 
> 赞同：-4
> 
> 时间：2013-01-08T16:08:06.233
> 
> 标签：r, function, vector, sum

我有两个向量`a`和`b`，都有 8 个元素。我需要创建一个 sum[(a_i+b_i)^2] 的函数，即我需要添加相应的组件，然后将它们平方，然后添加平方。

我能够像`f(x)=5x+2`在 R 中那样编写简单的函数，但不知道如何合并向量和总和......也许是一个循环？

对不起，我的公式写得不好，如果这是一个基本问题，我很抱歉，我是 R 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:13:38.183

**已编辑**

```
x <- 1:10
y <- rnorm(10)

sum((x + y)^2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:10:20.033

您不需要为 sum[(a_i+b_i)^2] 编写函数，只需执行以下操作：

```
a <- 1:8  # a and b are vectors consisting of 8 elements
b <- a+10    
sum((a+b)^2) # this is what you want to do
[1] 3056 
```

为了对总数求和和平方：

```
sum(a+b)^2
[1] 23104 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:26:36.313

```
f <- function(a,b) crossprod(a+b) 
```

# java - 如何在 Element jaxb xjc ann 上注释命名空间

> ID：14219178
> 
> 赞同：1
> 
> 时间：2013-01-08T16:08:13.590
> 
> 标签：java, xml, jaxb, annotations, xjc

我需要创建带有付款信息的 xml 文档。有一些命名空间，为每个标签添加前缀是必要的。那是我的设置：

xsd:

```
<xs:complexType name="Document">
    <xs:sequence>
        <xs:element name="FIToFICstmrCdtTrf" type="FIToFICustomerCreditTransferV02"/>
    </xs:sequence>
</xs:complexType>
<xs:complexType name="FIToFICustomerCreditTransferV02">
    <xs:sequence>
        <xs:element name="GrpHdr" type="GroupHeader33"/>
        <xs:element maxOccurs="unbounded" minOccurs="1" name="CdtTrfTxInf" type="CreditTransferTransactionInformation11"/>
    </xs:sequence>
</xs:complexType> 
```

xjb:

```
<jaxb:bindings schemaLocation="../xsd/pacs.008.001.02.xsd" node="/xs:schema">
<jaxb:bindings node="xs:complexType[@name='Document']">
  <annox:annotate>
    <annox:annotate annox:class="javax.xml.bind.annotation.XmlRootElement" name="SCTSIBIBlkCredTrf" namespace="urn:EESCTSIBI:xsd:$SCTSIBIBlkCredTrf">
    </annox:annotate>
  </annox:annotate>
</jaxb:bindings>
<jaxb:bindings node="xs:complexType[@name='FIToFICustomerCreditTransferV02']">
  <annox:annotate>
    <annox:annotate annox:class="javax.xml.bind.annotation.XmlType" namespace="urn:iso:std:iso:20022:tech:xsd:pacs.008.001.02"/>
  </annox:annotate>
</jaxb:bindings> 
```

生成的类：

```
@XmlRootElement(name = "SCTSIBIBlkCredTrf", namespace = "urn:EESCTSIBI:xsd:$SCTSIBIBlkCredTrf")
public class Document implements Serializable {

private final static long serialVersionUID = 1L;

@XmlElement(name = "FIToFICstmrCdtTrf", required = true)
protected FIToFICustomerCreditTransferV02 fiToFICstmrCdtTrf; 
```

生成xml的代码：

```
private void startXmlFiles(String[] args) {
    JAXBContext jaxbContext;
    File file = new File("C:\\file.xml");

    try {
        jaxbContext = JAXBContext.newInstance(Document.class);
        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
        Document nroot = new Document();

        nroot.setFIToFICstmrCdtTrf(new FIToFICustomerCreditTransferV02());
        nroot.getFIToFICstmrCdtTrf().setGrpHdr(new GroupHeader33());
        nroot.getFIToFICstmrCdtTrf().getGrpHdr().setMsgId("MsgId");
        CreditTransferTransactionInformation11 CdtTrfTxInf = new CreditTransferTransactionInformation11();
        CdtTrfTxInf.setPmtId(new PaymentIdentification3());
        CdtTrfTxInf.getPmtId().setEndToEndId("End2End");
        CdtTrfTxInf.getPmtId().setInstrId("InstrId");
        CdtTrfTxInf.getPmtId().setTxId("TxId");

        nroot.getFIToFICstmrCdtTrf().getCdtTrfTxInf().add(CdtTrfTxInf);

        jaxbMarshaller.setProperty(Marshaller.JAXB_SCHEMA_LOCATION, "urn:EESCTSIBI:xsd:$SCTSIBIBlkCredTrf SCTSIBIBlkCredTrf.xsd");
        jaxbMarshaller.setProperty("com.sun.xml.bind.namespacePrefixMapper", new NamespacePrefixMapper() {
            @Override
            public String[] getPreDeclaredNamespaceUris() {
                return new String[] { WellKnownNamespace.XML_SCHEMA_INSTANCE };
            }

            @Override
            public String[] getPreDeclaredNamespaceUris2() {
                // TODO Auto-generated method stub
                return super.getPreDeclaredNamespaceUris2();
            }

            @Override
            public String getPreferredPrefix(String namespaceUri, String suggestion, boolean requirePrefix) {
                if (namespaceUri.equals(WellKnownNamespace.XML_SCHEMA_INSTANCE))
                    return "xsi";
                if (namespaceUri.equals(WellKnownNamespace.XML_SCHEMA))
                    return "xs";
                if (namespaceUri.equals(WellKnownNamespace.XML_MIME_URI))
                    return "xmime";
                if (namespaceUri.equals("urn:EESCTSIBI:xsd:$SCTSIBIBlkCredTrf"))
                    return "EESCTSIBI";
                if (namespaceUri.equals("urn:iso:std:iso:20022:tech:xsd:pacs.008.001.02"))
                    return "sw8";
                return suggestion;

            }
            @Override
            public String[] getContextualNamespaceDecls() {
                // TODO Auto-generated method stub
                return super.getContextualNamespaceDecls();
            }
        });

        jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        //jaxbMarshaller.marshal(nroot, file);
        jaxbMarshaller.marshal(nroot, System.out);

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

生成的xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<EESCTSIBI:SCTSIBIBlkCredTrf xmlns:sw8="urn:iso:std:iso:20022:tech:xsd:pacs.008.001.02" xmlns:EESCTSIBI="urn:EESCTSIBI:xsd:$SCTSIBIBlkCredTrf" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:EESCTSIBI:xsd:$SCTSIBIBlkCredTrf SCTSIBIBlkCredTrf.xsd">
<sw8:FIToFICstmrCdtTrf>
    <sw8:GrpHdr>
        <sw8:MsgId>MsgId</sw8:MsgId>
    </sw8:GrpHdr>
    <sw8:CdtTrfTxInf>
        <sw8:PmtId>
            <sw8:InstrId>InstrId</sw8:InstrId>
            <sw8:EndToEndId>End2End</sw8:EndToEndId>
            <sw8:TxId>TxId</sw8:TxId>
        </sw8:PmtId>
    </sw8:CdtTrfTxInf>
</sw8:FIToFICstmrCdtTrf> 
```

xml 预期：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<EESCTSIBI:SCTSIBIBlkCredTrf xmlns:sw8="urn:iso:std:iso:20022:tech:xsd:pacs.008.001.02" xmlns:EESCTSIBI="urn:EESCTSIBI:xsd:$SCTSIBIBlkCredTrf" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:EESCTSIBI:xsd:$SCTSIBIBlkCredTrf SCTSIBIBlkCredTrf.xsd">
<EESCTSIBI:FIToFICstmrCdtTrf xmlns="urn:iso:std:iso:20022:tech:xsd:pacs.008.001.02">
    <sw8:GrpHdr>
        <sw8:MsgId>MsgId</sw8:MsgId>
    </sw8:GrpHdr>
    <sw8:CdtTrfTxInf>
        <sw8:PmtId>
            <sw8:InstrId>InstrId</sw8:InstrId>
            <sw8:EndToEndId>End2End</sw8:EndToEndId>
            <sw8:TxId>TxId</sw8:TxId>
        </sw8:PmtId>
    </sw8:CdtTrfTxInf>
</EESCTSIBI:FIToFICstmrCdtTrf> 
```

我应该如何更改我的 xjb 文件？

谢谢 4 回复

# git - Git 自定义 SSH 命令

> ID：14219183
> 
> 赞同：0
> 
> 时间：2013-01-08T16:08:28.407
> 
> 标签：git, mercurial, ssh, custom-action, ssh-keys

我正在尝试找到一种在需要时使用自定义 ssh 命令运行 git 的方法。我不想使用任何配置文件或环境变量。我只想使用类似于`-e sshcommand`Mercurial 提供的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:25:58.363

您使用自定义 ssh 命令行的方式`git`是：

*   通过`GIT_SSH`环境变量，或
*   通过添加`~/.ssh/config`与目标主机匹配的节

[这个答案](https://stackoverflow.com/questions/3496037/how-to-specify-which-ssh-key-to-use-within-git-for-git-push-in-order-to-have-git)`GIT_SSH`更详细地探讨了解决方案。

Mercurial中没有其他直接等效的`-e`命令行。

# php - PHP 计算立方根 x^(1/3) 不起作用

> ID：14219185
> 
> 赞同：3
> 
> 时间：2013-01-08T16:08:30.533
> 
> 标签：php, math

我知道有相当强大的 PHP 数学包，但我想要做的并不是那么复杂。我正在寻找计算数字的立方根。求解 ( `x^3 = 100`) 中的 x 通常需要`echo 100^(1/3)`. 在 PHP 中运行此代码既不会返回错误，也不会返回正确的数字。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T16:11:37.523

该`^`字符`XOR`在 PHP 中是一个[位运算符](http://php.net/manual/en/language.operators.bitwise.php)。

要执行幂运算（指数），您应该查看 PHP 定义的[`pow()`](http://php.net/pow)方法。要将其与您的示例代码一起使用，它将是：

```
echo pow(100, 1/3); 
```

[从 PHP 5.6 开始](http://php.net/manual/en/language.operators.arithmetic.php)，他们也引入了幂运算符，`**`：

```
echo 100 ** (1/3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:08:30.533

PHP 语法为`100^(1/3)`：

```
echo pow(100,1/3); 
```

回报将是：

```
4.6415888336128 
```

了解[power](http://php.net/manual/en/function.pow.php)和[exp](http://php.net/manual/en/function.exp.php)的 power 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:13:58.737

帽子符号`^`不是 PHP 中的幂运算符；它是一个 XOR 运算符。

因此`$x^$y`是有效的 PHP，但会给你一个布尔结果，而不是 X 的 Y 次方。

此处手动参考：http: [//php.net/manual/en/language.operators.bitwise.php](http://php.net/manual/en/language.operators.bitwise.php)

如果你想在 PHP 中做 power of，你需要使用[`pow()`函数](http://uk3.php.net/manual/en/function.pow.php)

希望有帮助。

# sql-server-2008 - sql server 索引重建会减慢第一次查询

> ID：14219197
> 
> 赞同：1
> 
> 时间：2013-01-08T16:09:06.943
> 
> 标签：sql-server-2008, ssis, indexing

数据库是 SQL 2008R2 企业版。

我有一个 SSIS 集成，每晚在一个表中截断并加载大约 1500 万行。发生这种情况之后，我有一个执行 SQL 任务，它在表 b/c 上重建索引，它在 trunc 和加载后严重碎片化。

我遇到的问题是第一次使用该表作为数据源的报告。第一次执行需要一段时间。然而，在第一次执行之后，报告就像预期的那样飞快，直到第二天晚上再次发生截断、加载和索引重建。

关于我可以做什么来修复该表上第一个查询的性能的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:18:47.557

您可以尝试在索引重建后立即运行报告的一个版本（sproc？），它只说`TOP 1`选择任何数据集，以建立必要的缓存和执行计划，这将“准备”缓存并使设置优化，而无需必须完整地运行报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:14:22.933

重建索引后，尝试更新统计信息以解决性能问题：

```
EXEC sp_updatestats 
```

# wordpress - 小部件标题样式 Wordpress、Headway 主题

> ID：14219204
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:09:32.590
> 
> 标签：wordpress, widget, styling

我的网站是 www.herefordequestrian.co.uk 左侧有一个 Twitter 小部件，然后页面中央有一个小部件就绪叶，用于显示最新广告和最新消息。

在 Wordpress（Headway 主题）中使用可视化编辑器，我想单独控制它们的样式，但不能！

我试图摆脱 Twitter 标题“最新推文”后面的背景颜色，但我想保留小部件标题“最新广告”和“最新消息”后面的背景颜色。

另外，我希望“最新广告和新闻”部分中的超链接以粗体显示，但不在 Twitter 列中。

这可能吗？

提前致谢！莎莉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:30:59.387

您可以像这样定位 Twitter 小部件的标题：

```
#twitter-4.widget_twitter .widget-title {
  background-color: transparent;
} 
```

# javascript - 我的正则表达式匹配不正确

> ID：14219205
> 
> 赞同：1
> 
> 时间：2013-01-08T16:09:34.187
> 
> 标签：javascript, regex, passwords

我正在使用以下正则表达式来匹配一个或多个特殊字符以进行密码强度测试。

```
if (password.match(/\W+/)) points++; 
```

这似乎与作为特殊字符的下划线“_”不匹配。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:12:35.663

这是因为`\W`is 与`[^\w]`, 同时[`\w`包含`a-z`, `A-Z`, `0-9`, and`_`](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#special-word) as well 。

为了修复它，只需`_`单独添加字符：

```
if (password.match(/[\W_]+/)) points++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:13:04.823

`\W`（大写）表示`not \w`，所以除了单词字符之外的任何东西。

单词字符 ( `\w`) 包括字母、数字和下划线。

也许您应该使用`/[^a-z0-9]+/i`来匹配非字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:13:23.193

你确定你不想要`\w`吗？是的`\W`否定`\w`。

`\w`匹配（字母、数字和下划线），因此`\W`不匹配字母、数字和下划线。见这里：[http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T16:16:20.523

匹配失败，因为下划线被视为单词字符。来自[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions) `\W`：

> 匹配任何非单词字符。等价于 [^A-Za-z0-9_]

您可以通过将下划线和 分组来解决此问题`\W`：

```
if (password.match(/[\W_]+/)) points++; 
```

诸如[Javascript Regex Tester](http://www.cyber-reality.com/regexy.html)之类的正则表达式工具对于调试这类事情特别有帮助。

# java - Java Android：从 AsyncTask 设置变量？

> ID：14219213
> 
> 赞同：2
> 
> 时间：2013-01-08T16:09:55.680
> 
> 标签：java, android, variables, android-asynctask

例如，我有以下课程：

```
public class MyClass{

  private static int x;
  private AsyncWorker worker;

  public void myVoid(){
     worker = new Worker;
     worker.execute();
     if (x == null){
         Log.v("Say something: ", "x is null");
     }
  }

class AsyncWorker extends AsyncTask<Void, Void, Void>{

        @Override
        protected Void doInBackground(Void... arg0) {
            // TODO Auto-generated method stub

            x = 10;

            return null;
        }

        @Override
        protected void onPostExecute(Void result){
            super.onPostExecute(result);

        }
} 
```

}

结果，它打印`x`为空。将来有什么办法可以改变`x`和`AsyncTask`使用它的价值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:14:01.337

您需要阅读线程和 ASyncTask 的用户。当您在 AsyncTask 上调用 execute 时，myVoid 直接进入下一行，因为 ASyncTask 在不同的线程上运行，因此 x 将始终为 null，因为 AsyncTask 还没有做任何事情。您还在这里引入了跨线程和变量同步的问题。

以最好的方式，我建议你把这个问题记下来，找到一个关于使用 AsyncTask 和线程的不错的教程

# php - php 和 ffmpeg 500 内部服务器错误

> ID：14219215
> 
> 赞同：0
> 
> 时间：2013-01-08T16:09:58.570
> 
> 标签：php, ffmpeg

我正在尝试使用以下 php 代码从视频文件中提取单个帧：

```
$cmd = 'ffmpeg -i "d:\webs\beta\test\sample2.mp4" -vframes 1 -s 146x82 -f image2 "d:\webs\beta\test.jpg"';
exec($cmd, $rc); 
```

问题是我第一次尝试执行脚本时遇到 500 内部服务器错误，但是在重新加载它时它可以工作。所以这意味着重新加载时：工作/不工作/工作..

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:49:20.660

试试这个脚本。

```
<?php

$ffmpeg = "/full/path/to/ffmpeg";

$videoFile = "/full/path/to/video.mp4";

$imgOut = "/full/path/to/frame.jpg";

$second = 0;

$cmd = $ffmpeg." -i \"".$videoFile."\" -an -ss ".$second.".001 -y -f mjpeg \"".$imgOut."\" 2>&1";

$feedback = `$cmd`;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T10:01:50.353

我有同样的问题。

使用 proc_open 而不是 exec 及其变体修复了它。

罗伊

# php - codeigniter 中的错误处理：谁应该调用 show_error()

> ID：14219219
> 
> 赞同：0
> 
> 时间：2013-01-08T16:10:14.073
> 
> 标签：php, codeigniter, error-handling

我对 codeigniter 中的错误处理有疑问。我的第一个问题是谁应该调用 show_error 方法？模型或控制器或视图？我打算把它放在这个特殊情况的模型中，因为模型是产生错误的地方，但是由于我的大部分业务逻辑都在控制器中，所以我决定在那里做。但是我想知道是否有“正确”的方法来做到这一点。

我的第二个问题是这个。在模型中，我添加了两个函数——一个返回数据，另一个返回错误消息。我的控制器在调用我的模型后测试错误情况，并尝试显示它。但它总是空的。

我的模型看起来像这样：

```
 public function errormessage()
    {
        return $this->_emess;
    }
    public someotherfunction()
    {
         if ( $switch_obj->connect() )
        {
            $retdata = $switch->showInterfaceAll(); 
            $switch->disconnect();  
            $this->_data = $retdata;
            return true;
        }
        else
        {
            print 'debug: assigning error message in model:';
            $this->_emess = $switch->errormessage();
            print $this->_emess;
            return false;
        }
          } 
```

然后在我的控制器中，我有以下逻辑：

```
 if ($this->switches_model->someotherfunction($this->uri->segment(7) ) )
      {      
      $data['listofports'] = $this->switches_model->data;
      }
      else {
              print '<BR>in error path<BR>';
      show_error($this->switches_model->errormessage(), 123);
      } 
```

从模型中的调试打印语句中，我知道已设置错误消息。但是当控制器尝试使用 show_error() 方法显示它时，我收到以下错误消息：

> 没有可用的状态文本。请检查您的状态码或提供您自己的消息文本。

为了证明这不是因为模型已经被销毁，我尝试在我的模型中添加一个析构函数并打印出调试行...

```
 public function __destruct()
    {
      print 'in the destructor';
    } 
```

消息“在错误路径中”在“在析构函数中”之前打印，所以我假设模型仍然活着并且很好......

任何建议，将不胜感激。

谢谢。

**更新 1**

我发现了我的问题。如果您要通过一个合法的状态码，您需要通过一个合法的状态码。我认为您可以创建自定义状态编号，但它们必须是 HTTP 代码。但是，如果有人可以评论关于谁应该调用 show_error() 的问题 1，那将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:14:02.360

The short answer to your first question is no, there is not a "correct" way to do it.

In your question, you said:

> since most of my business logic is in the controller I decided to do it there.

This is up for debate and is probably not a debate that should be had on this site but I have found that generally, the controller is meant to be more of a dispatcher then anything else. So, your controller should be as small as possible. That being said, since the show_error() function is also deciding what view to display, I would call that a dispatching function and would put it in the controller. If you were not using that function but were using log_message() instead to store the error in a log and continue processing, then I would put that in the model because you can continue through the process after using that function. Again, this is personal choice and can be done either place but that is how I usually look at it.

# javascript - 集合内的流星显示数组

> ID：14219222
> 
> 赞同：6
> 
> 时间：2013-01-08T16:10:19.960
> 
> 标签：javascript, model, meteor

我想创建一个带有标签的帖子模型，并且能够显示每个帖子的所有标签。你知道最好的方法吗？？

我试过这个

```
<template name='postsLists'>
  {{#each post}}
    {{> postDetails }}
  {{/each}}
</template>

<template name='postDetails'>
  title: {{title}}
  {{#each tag}}
    {{tag}}
  {{/each}}
</template> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-22T19:45:29.740

您需要使用`this`关键字从数组中获取值：

```
<template name='postDetails'>
  title: {{title}}
  {{#each tag}}
    {{this}}
  {{/each}}
</template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:26:51.370

此代码不起作用：

```
{{#each tag}}
  {{tag}}
{{/each}} 
```

因为这里的“标签”指的是列表和该列表中的元素。尝试：

```
{{#each tags}}
  {{tag}}
{{/each}} 
```

# jsrender - 如何使模板专用于自定义标签

> ID：14219227
> 
> 赞同：0
> 
> 时间：2013-01-08T16:10:36.460
> 
> 标签：jsrender

我看到有一个语法有一个模板私有的帮助器，但有相反的语法吗？我有一个使用特定模板的标签，并且该模板（从逻辑上讲）仅由标​​签使用。

```
$.templates({
  link_template: "<a href='{{:link}}' class='{{:klass}}'>{{:text}}</a>"
});

$.views.tags({
link_to: function (link, klass, text) {
    return $.render.link_template({link: link, klass: klass, text: text});
}
}); 
```

我考虑让模板只是一个字符串，但它会在每次调用时编译。我想获得编译模板的好处（基本上，我现在所拥有的——我只是想以某种方式将模板隐藏在标签内）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:57:04.417

以下是一些变体：

```
$.views.tags({
    link_to1: {
        template: "<a href='{{:link}}' class='{{:klass}}'>{{:text}}</a>"
    },
    link_to2: {
        render: function (link, klass, text) {
            return this.template.render({link: link, klass: klass, text: text});
        },
        template: "<a href='{{:link}}' class='{{:klass}}'>{{:text}}</a>"
    },
    link_to3: {
        render: function (link, klass, text) {
            return this.myTemplate.render({link: link, klass: klass, text: text});
        },
        myTemplate: $.templates("<a href='{{:link}}' class='{{:klass}}'>{{:text}}</a>")
    }
}); 
```

在每种情况下，模板只会被编译一次，并且是私有的。

第一种情况和第二种情况类似，但第二种情况允许您以编程方式控制渲染。编译标记时完成编译。

第三个让你有几个私人模板......

# data-mining - 比较两个字符串并找出它们在含 义上的相关程度

> ID：14219232
> 
> 赞同：0
> 
> 时间：2013-01-08T16:10:44.887
> 
> 标签：data-mining, matching, semantic-web, bigdata

**问题：**
我有两个字符串，比如“Billie Jean”和“Thriller”。我需要以编程方式比较它们并找出它们的相关程度。这些都是同一位艺术家的歌曲，因此，它们应该给出比“Brad Pitt”和“Jamaican Farewell”更高的分数（概率、百分比等）。

这样做的一种方法是一个名为 WikipediaMiner 的开源 Java 工具，它使用 Wikipedia 数据转储、检查链接、描述等进行比较。

**问题：**
请提出一个更好的替代方案，使用任何或所有 Wikipepdia、DBpedia、Freebase 及其表亲，或结合不同的方法。我真的更喜欢可以在服务器上下载和设置的开源软件（例如 Apache Mahout），而不是付费的 Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:21:01.237

与其说是编程问题，不如说是**数据**问题。

所以这对 StackOverflow 来说并不是一个真正的问题。

我猜你真正想要的是使用[WordNet 。](http://wordnet.princeton.edu/)这实际上是作为推理单词含义的数据库。例如，数据明确指出数据挖掘是数据处理的一种形式。这是一个物理实体...

你看，推理只会和你的数据一样好。

DBPedia 可能还包括从 WordNet 到 Wikipedia 的映射？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:24:35.283

如果没有额外的上下文，你不能说“Thriller”是一首歌，而不是音乐视频或电影类型或 Lambchop 专辑。

在您确定了您的项目是什么之后，“简单地”遍历 Freebase、MusicBrainz 或您正在使用的任何其他信息源中的连接图。

不过，您需要决定如何衡量得分的权重。两首迈克尔杰克逊的歌曲是因为它们具有相同的类型而更密切相关，还是因为它们与艺术家迈克尔杰克逊直接相关，所以它们与艺术家迈克尔杰克逊的关系更密切？

# javascript - 防止在 window.location 中使用 javascript

> ID：14219238
> 
> 赞同：4
> 
> 时间：2013-01-08T16:11:08.453
> 
> 标签：javascript, window, location, xss

我有一个页面，它从查询字符串中的参数重定向到一个 url，例如：
**page.html?redirectUrl=index.html**
在页面内我有这样的代码：
**window.localtion.href = redirectUrl;**
通过参数使用重定向 url 是必需的。该页面包含安全的敏感数据。有人可以使用 javascript 制作 URL，例如：
**page.html?redirectUrl=javascript:alert(document.getElementById("password").value)**
并且可以窃取安全数据。

如何防止绕过 javascript 代码到 window.localtion.href？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:34:51.590

您可以尝试将 URL 放入[锚元素](https://developer.mozilla.org/en-US/docs/DOM/HTMLAnchorElement)并检查协议：

```
var anchor = document.createElement("a");
anchor.href = redirectUrl;

if(anchor.protocol != "javascript:") {
    window.localtion.href = redirectUrl;
} 
```

但是，我不确定浏览器对此的支持有多好，因为 MDN 将其列为 HTML5 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:28:24.703

只要您不使用它进行重定向，这似乎就可以工作：

Javascript：

```
var field = document.getElementById("redirectUrl");
var newValue = String(field.value);
alert(newValue); 
```

基本上，使用 String 构造函数来“清理”输入。

这些可能会对其他情况有更多帮助：

[https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)

[https://www.owasp.org/index.php/DOM_based_XSS_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/DOM_based_XSS_Prevention_Cheat_Sheet)

总的来说，我建议不要使用 Javascript 来清理输入。如果您正在处理非常敏感或重要的数据，强烈建议您使用服务器端语言来验证和清理您的输入。

# git - 如何知道我的克隆是从 fork 还是从 git 上的 origin 完成的？

> ID：14219239
> 
> 赞同：1
> 
> 时间：2013-01-08T16:11:16.553
> 
> 标签：git, github, git-fork

几个月前我有`cloned`一个 repo，想知道它是从我的 fork 还是从原始存储库完成的。我应该运行哪个 git 子命令来获得答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:26:56.393

默认情况下，`origin`远程将是从中克隆的存储库。

要查看存储库中的远程列表，请使用`git remote -v`. 这应该足以知道它是从哪里克隆的，但可以查看有关特定远程使用的更多详细信息`git remote -v show <remote name>`。

# c++ - 缺少默认构造函数 - 但我没有调用它？

> ID：14219242
> 
> 赞同：1
> 
> 时间：2013-01-08T16:11:23.087
> 
> 标签：c++, constructor, rule-of-three

我正在编写一个 C++ 应用程序，其中我有一个`Controller`带有两个嵌套结构的类，在我的头文件中定义如下：

```
class Controller {
    struct help_message {   // controller.hpp, line 19
        std::string summary;
        std::string details;
        help_message(const std::string&, const std::string&);
    };

    struct player_command {
        cmd_t cmd;
        help_message help;
        // cmd_t is my own typedef, irrelevant for this question
        player_command(const cmd_t&, const help_message&);
    };

    // more members...
}; 
```

在我的源文件中，我有这个：

```
Controller::player_command::player_command(const Controller::cmd_t& c, const help_message& h) {
    cmd = c;
    help = h;
};

Controller::help_message::help_message(const std::string& s, const std::string& d) {
    summary = s;
    details = d;
}; 
```

我认为这很好，但是当我编译时，这就是我得到的（controller.cpp 第 12 行是上面源代码片段的第一行）：

```
g++  -g -Wall -std=c++0x  -c -o controller.o controller.cpp
controller.cpp: In constructor ‘palla::Controller::player_command::player_command(void (palla::Controller::* const&)(const args_t&), const palla::Controller::help_message&)’:
controller.cpp:12:93: error: no matching function for call to ‘palla::Controller::help_message::help_message()’
controller.cpp:12:93: note: candidates are:
In file included from controller.cpp:7:0:
controller.hpp:22:3: note: palla::Controller::help_message::help_message(const string&, const string&)
controller.hpp:22:3: note:   candidate expects 2 arguments, 0 provided
controller.hpp:19:9: note: palla::Controller::help_message::help_message(const palla::Controller::help_message&)
controller.hpp:19:9: note:   candidate expects 1 argument, 0 provided
controller.hpp:19:9: note: palla::Controller::help_message::help_message(palla::Controller::help_message&&)
controller.hpp:19:9: note:   candidate expects 1 argument, 0 provided
make: *** [controller.o] Error 1 
```

据我推断，编译器在某处试图调用`help_message`不存在的默认构造函数。然后它尝试将调用与我创建的构造函数以及生成的复制构造函数和赋值运算符匹配，并在参数数量上失败。

但是我的代码的哪一部分调用了默认构造函数？我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:14:00.807

构造`player_command()`函数首先默认构造`help`，然后分配给它：

```
Controller::player_command::player_command(const Controller::cmd_t& c, const help_message& h) {
    cmd = c;
    help = h;
}; 
```

将其更改为：

```
Controller::player_command::player_command(const Controller::cmd_t& c, const help_message& h)
:  cmd(c),
   help(h)
{
}; 
```

查看[初始化列表的好处](https://stackoverflow.com/questions/1598967/benefits-of-initialization-lists)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:17:10.787

该`player_command`结构包含一个`help_message`（帮助），并且没有默认构造函数`help_message`。调用构造函数时`player_command`，默认会默认构造帮助成员变量。您将立即为给定参数分配帮助，但这将在默认构造之后进行。而是将构造函数更改为：

```
Controller::player_command::player_command(const Controller::cmd_t& c, const help_message& h) : cmd(c), help(h) 
{} 
```

这将为 cmd 和 help 成员变量调用复制构造函数，而不是执行默认构造然后赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:15:56.413

您没有使用避免复制构造函数的语法。参数通过引用传递（无复制构造函数），但在分配给 ivar 时确实被复制了。

```
Class::Class(const Variable &var) {
  this->var = var; // assignment here, this invokes copy contructor!
} 
```

您应该使用以下语法：

```
Class::Class(const Variable &var) : var(var) { } 
```

# hardware - 卷积编码器的终止与状态寄存器复位

> ID：14219243
> 
> 赞同：2
> 
> 时间：2013-01-08T16:11:24.460
> 
> 标签：hardware, vhdl, verilog, system-verilog, telecommunication

通常，在为发送器设计卷积编码器时，会应用某种终止机制来在发送消息后将编码器驱动回其零状态。这通常通过将尾序列附加到传输的消息来完成，例如，在没有反馈的卷积编码器的情况下，一定数量 (n) 的零。这样，编码器需要 n 个时钟周期才能将编码器返回到全零状态。
另一方面，例如，当在 HDL 中实现卷积编码器时，也可以通过简单地复位编码器的所有（移位）寄存器来实现这种复位为零状态。这样，只需一个时钟周期就可以达到零状态。
在文献中，我从未见过有人提到第二种方法，我想知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:23:22.877

如果机器的状态完全由移位寄存器的内容决定，那么这是有道理的。然而，在一些有效的移位寄存器实现中，寄存器不能复位为零——移位寄存器宏没有复位引脚。您必须用零刷新它们。

因此，其中一些可能是硬件限制的结果。我知道我在 Xilinx 的流水线数据设计中遇到过这种情况。

# javascript - 不希望输入字段中有十进制值

> ID：14219245
> 
> 赞同：0
> 
> 时间：2013-01-08T16:11:25.040
> 
> 标签：javascript, jquery, regex, decimal

我不想在文本框中允许十进制值。我已经编写了代码，但只有在删除整个值然后重新插入它时它才有效。我的问题是当我尝试编辑现有值时，它采用十进制数字.. [这是 jsfiddle](http://jsfiddle.net/ZUj8M/4/)。这是供参考的代码：

**HTML**

```
<input id="Amt"  type="text" value="$78.00"> 
```

**jQuery**

```
 $(document).ready(function () {

    $("#Amt").keydown(function (e) {
        if ((!e.shiftKey && !e.ctrlKey && !e.altKey) && ((e.keyCode >= 48 && e.keyCode <= 57) ||
                (e.keyCode >= 96 && e.keyCode <= 105))) {
        }
        else if (e.keyCode != 8 && e.keyCode != 46 && e.keyCode != 37 && e.keyCode != 39 &&
                     e.keyCode != 9) {
            e.preventDefault();
        }
    });

   $("#Amt").keyup(function (e) {
        var value = $(this).val();
       var newValue = parseFloat(value).toFixed(2);
        if (!isNaN(newValue)) {
            $(this).val(newValue);
            $(this).caret(newValue.length - 3, newValue.length - 3);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:44:38.270

如果你想保持这种格式，你可以使用字符串方法去掉小数点并重新附加“.00”。

```
 $("#Amt").blur(function (e) {
    var value = this.value.replace(/\$/g,"");
    var dotPos = value.indexOf(".");
    var dollars = dotPos>-1?value.substring(0,dotPos):value;
    $(this).val(dollars+".00");
  });

  $("#Amt").blur(); 
```

[http://jsfiddle.net/ZUj8M/14/](http://jsfiddle.net/ZUj8M/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:36:13.653

我会以一种完全不同的方式来处理它，只是首先防止小数到达那里。[http://jsfiddle.net/ZUj8M/7/](http://jsfiddle.net/ZUj8M/7/)

```
$(document).ready(function () {

  var timer;
  $("#Amt").on("keydown paste input",function (e) {
    var el = this,
      origval = this.value;
    clearTimeout(timer);
    timer = setTimeout(function () {
      if (origval != el.value && /\./.test(el.value)) {
        el.value = origval;
        alert("Decimals are not allowed in this field.");
      }
    }, 0);
  });
  if (/\./.test($("#Amt").val())) {
    $("#Amt").val($("#Amt").val().replace(/\./g,""));
  }

}); 
```

或者，您可以直接删除小数，而不是撤消更改。

```
// el.value = origval;
// alert("Decimals are not allowed in this field.");
el.value = el.value.replace(/\./g,""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:57:10.660

为什么不将给定值解析为整数？

```
var newValue = parseInt(floatValue, 10); 
```

然后允许用户插入一个点“。” 在 .blur()-event 上，您可以将浮点数解析为 int ...

```
$("#Amt").blur(function() {
    $this.val(parseInt(jQuery(this).val(), 10));
}); 
```

# c++ - Portaudio C++ 绑定：在 MemFunCallbackStream 中找不到符号

> ID：14219248
> 
> 赞同：1
> 
> 时间：2013-01-08T16:11:33.870
> 
> 标签：c++, binding, callback, portaudio

最近我发现 PortAudio 有 C++ 绑定，所以为了保持良好和面向对象，我正在从普通的 PortAudio C 函数转换为 C++ 绑定。但是，我遇到了回调函数的麻烦。我尝试通过以下方式创建流：

```
stream = new portaudio::MemFunCallbackStream<OutputChannel>(params, *this, &OutputChannel::output); 
```

此调用是在 OutputChannel 类的方法中进行的。这个相同的类包含应该作为回调函数的方法，因此我将传递给 MemFunCallbackStream 方法的“this”。但是，在构建时，链接器会给出错误：

```
Undefined symbols for architecture x86_64:
  "_Pa_OpenStream", referenced from:
      portaudio::MemFunCallbackStream<OutputChannel>::open(portaudio::StreamParameters const&)in outputchannel.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我确定 PortAudio 库已加载，因为其他一些（诊断）方法*确实*有效。什么可能导致此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:12:40.790

啊，我觉得自己很愚蠢。不知何故，该库*不再*链接到我的应用程序，尽管它是以前的。所以这个错误毕竟是由于缺少图书馆。问题解决了。

# android - 编写 .json 文件并在 Android 中读取该文件

> ID：14219253
> 
> 赞同：12
> 
> 时间：2013-01-08T16:11:44.417
> 
> 标签：android, json, string, file-io

我正在编写 .json 文件，我想读取该文件，但问题是，当我尝试将整个文件作为字符串读取时，它会在每个字符之前和之后添加空格，并且只是因为额外的字符而无法读取 json。

Json 格式是

```
[{"description1":"The ThinkerA bronze sculpture by Auguste Rodin. It depicts a man in sober\nmeditation battling with a powerful internal struggle.","description2":"Steve JobsFounder of Apple, he is widely recognized as a charismatic pioneer of\nthe personal computer revolution.","description3":"Justin BieberBorn in 1994, the latest sensation in music industry with numerous\nawards in recent years."}] 
```

但它给出了奇怪的响应，例如：[ {“description 1”：“T he .....

修剪多余的空格我提到了这个，但仍然没有工作： [Java如何用字符串中的单个空格替换2个或更多空格并仅删除前导空格](https://stackoverflow.com/questions/2932392/java-how-to-replace-2-or-more-spaces-with-single-space-in-string-and-delete-lead)

我正在使用此代码

```
File folderPath = Environment.getExternalStorageDirectory();
File mypath=new File(folderPath, "description.json");
StringBuffer fileData = new StringBuffer(1000);
BufferedReader reader = null;
reader = new BufferedReader(new FileReader(mypath));
char[] buf = new char[1024];
int numRead=0;

while((numRead=reader.read(buf)) != -1)
{
    String readData = String.valueOf(buf, 0, numRead);
    fileData.append(readData);
    buf = new char[1024];
}
String response = fileData.toString(); 
```

“响应”字符串包含奇怪的响应

那么有人可以帮助我吗？

对于写入文件，我使用：

```
FileOutputStream fos = new FileOutputStream(mypath);
DataOutputStream dos = new DataOutputStream(fos);
dos.writeChars(response); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-09T06:03:24.493

为写入 Json 文件编写以下方法，这`params`是一个文件名，`mJsonResponse`是一个服务器响应。

用于将文件创建到应用程序的内存中

```
public void mCreateAndSaveFile(String params, String mJsonResponse) {
    try {
        FileWriter file = new FileWriter("/data/data/" + getApplicationContext().getPackageName() + "/" + params);
        file.write(mJsonResponse);
        file.flush();
        file.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

对于从 Json 文件中读取数据，这里`params`是文件名。

```
public void mReadJsonData(String params) {
    try {
        File f = new File("/data/data/" + getPackageName() + "/" + params);
        FileInputStream is = new FileInputStream(f);
        int size = is.available();
        byte[] buffer = new byte[size];
        is.read(buffer);
        is.close();
        String mResponse = new String(buffer);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-11-06T17:57:17.620

我喜欢上面的答案并编辑：我只是喜欢分享，所以我分享了可能对其他人有用的东西。

在您的包中复制并粘贴以下类并使用如下：

### 节省：`MyJSON.saveData(context, jsonData);`

### 读：`String json = MyJSON.getData(context);`

```
import android.content.Context;
import android.util.Log;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.IOException;

/**
 * Created by Pratik.
 */
public class MyJSON {

    static String fileName = "myBlog.json";

    public static void saveData(Context context, String mJsonResponse) {
        try {
            FileWriter file = new FileWriter(context.getFilesDir().getPath() + "/" + fileName);
            file.write(mJsonResponse);
            file.flush();
            file.close();
        } catch (IOException e) {
            Log.e("TAG", "Error in Writing: " + e.getLocalizedMessage());
        }
    }

    public static String getData(Context context) {
        try {
            File f = new File(context.getFilesDir().getPath() + "/" + fileName);
            //check whether file exists
            FileInputStream is = new FileInputStream(f);
            int size = is.available();
            byte[] buffer = new byte[size];
            is.read(buffer);
            is.close();
            return new String(buffer);
        } catch (IOException e) {
            Log.e("TAG", "Error in Reading: " + e.getLocalizedMessage());
            return null;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-09T05:23:21.577

writeChars 将每个字符写入两个字节。

[http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeChars(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeChars(java.lang.String) )

[http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeChar(int](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeChar(int) )

```
Writes a char to the underlying output stream as a 2-byte value, high byte first. If no exception is thrown, the counter written is incremented by 2. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T05:35:31.557

您的编写代码是问题所在。只需使用

```
FileWriter fos = new FileWriter(mypath);
fos.write(response); 
```

# mobile - 如何在 Appixia 应用程序中显示给定产品的组合？

> ID：14219254
> 
> 赞同：0
> 
> 时间：2013-01-08T16:11:47.110
> 
> 标签：mobile, e-commerce, commerce, appixia

我正在构建一个具有多个选项卡的应用程序，其中包括浏览选项卡和购物车选项卡。

在项目详细信息活动中单击“添加到购物车”按钮时，我收到一条通知，上面写着“产品必须选择一个组合”。如何让应用程序显示组合选项以便选择这些选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:28:34.573

您收到此错误消息的原因是产品有变体（例如，有多种颜色/尺寸的 T 恤）。您无法添加到购物车，因为您没有选择这些变体的特定组合。

您需要将变体选择器添加到您的项目详细信息中。你可以试试这个`ItemVariationsView`模块。

此视图将向用户显示所有可能的变化。默认情况下，它使用图像缩略图，因此您必须为每个选项准备图像。如果您不想弄乱所有这些图像，可以添加 a`DefaultRenderTypeOverride`并将其设置为`Select`. 这将使变体显示为组合框。

# drupal - webform textarea drupal 7的字符计数器

> ID：14219259
> 
> 赞同：1
> 
> 时间：2013-01-08T16:12:07.780
> 
> 标签：drupal, drupal-7

我对drupal比较陌生。我安装了 webform 模块和 webform 验证模块。我能够使用 webform 验证来限制 webform textarea 中的字符数。但是，此模块不支持字段的字符计数器。我已经查看了这个使用 maxlength 模块的解决方案[http://drupal.org/node/1459650#comment-5699952](http://drupal.org/node/1459650#comment-5699952)，但还不清楚。

我打算编写一个模块实现`hook_webform_component_info_alter(&$components)`将 jquery 或 javascript 添加到 webform textarea 字段。这是正确的方法吗。如果是这样或如果不是，我会怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:03:27.750

**Maxlength 模块**(http://drupal.org/project/maxlength) 是解决您的问题的最佳解决方案。您不需要网络表单验证模块。

基本上启用 maxlength 模块后，您只需要编辑 webform textarea 字段并在“Maxlength JS”字段中指定最大长度。例如，我通过将最大长度指定为 140 对其进行了测试，它显示了当我开始在 textarea 中绑定时剩余的字符数。您还可以通过修改此处的“倒计时消息”字段来自定义将在 textarea 下显示的消息。

我已经对此进行了测试，并且效果很好。

# linux - bash中的整数比较错误

> ID：14219264
> 
> 赞同：0
> 
> 时间：2013-01-08T16:12:18.597
> 
> 标签：linux, bash, integer, comparison

我正在尝试在 bash 中执行简单的整数比较，我是新手，我的方法导致错误。任何意见，将不胜感激。

我的基本逻辑是我在飓风轨迹点上阅读。同一个 track_id 可能有多个条目，具有不同的压力值。我想要做的是将每个 track_id 只存储一个条目到数组 track_id_poly 中；压力最低的情况。所以我循环遍历每一行，并尝试将当前压力（对于 $int）与之前的轨道压力（$int - 1）进行比较，如果它较低，则将之前的数组值替换为新的较低压力。我希望这是有道理的。我的代码如下。

```
int=0
    while read track_id ppres_inter 
    do
      printf -v pres_inter "%.0f" "$pres_inter"
      echo pressure $pres_inter
      case $int in
      0)
        Track_id_poly[$int]=$track_id
        Pres_inter_poly[$int]=$pres_inter
        ((int=int+1)) ;;
      *)  
       if [[ $track_id == ${Track_id_poly[$int-1]} ]]
       then
         if (( $pres_inter -lt ${Pres_inter_poly[$int-1]} ))
         then
           Track_id_poly[$int-1]=$track_id
           Pres_inter_poly[$int-1]=$pres_inter
         fi
       else  
         Track_id_poly[$int]=$track_id
         Pres_inter_poly[$int]=$pres_inter
         ((int=int+1))
       fi ;;
      esac
    done <$file_poly
    int_poly=$int
    echo Number of polygon crossings from set $i is $int_poly 
```

导致我出现问题的行是 $pres_inter 的整数比较。

```
if (( $pres_inter -lt ${Pres_inter_poly[$int-1]} )) 
```

我收到以下错误：

```
line 41:  96800 -lt 98759 : syntax error in expression (error token is "98759 ") 
```

任何解决此问题的提示将不胜感激。可能是一个简单的修复！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:15:23.470

`((...))`运算符不接受与`test`、`[..]`或`[[...]]`命令相同的语法。要比较 中的两个数字`((...))`，您可以使用实数`>`或`<`符号：

```
$ (( 4 > 2 )) && echo '4 is bigger!'
4 is bigger! 
```

有关更多信息，请参见手册页部分（或`ARITHMETIC EVALUATION`此处[）](https://www.gnu.org/software/bash/manual/bashref.html#Shell-Arithmetic)。`bash(1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:27:09.270

我的 shell 脚本很生锈，但您可以查看该行并使用 "[[ ]]" 代替 "(( ))" 或使用 "<" 代替 "-lt" 。请参阅[bash：双括号或单括号、括号、花括号](https://stackoverflow.com/questions/2188199/bash-double-or-single-bracket-parentheses-curly-braces)

但是，我要给您的主要提示是停止将 bash 用于涉及简单程序调用之外的任何事情并切换到脚本语言（Perl，Python，...），因为它不仅会更健壮，完成工作会更容易，而且运行速度也会更快。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-08T16:25:26.977

在 bash 中，“（（表达式））”的评估方式不同。因此，您不能使用运算符“-lt”，而是可以使用普通运算符 <。

有关更多信息，请参见 bash 的手册页：

> （（表达））
> 
> 表达式根据下面算术评估中描述的规则进行评估。如果表达式的值为非零，则返回状态为0；否则返回状态为 1。这完全等同于 let "表达式"。

[算术评估](http://linux.die.net/man/1/bash)段落解释了进一步的可能性。

# mobile - 手机上的视口不默认显示完整站点

> ID：14219266
> 
> 赞同：0
> 
> 时间：2013-01-08T16:12:25.927
> 
> 标签：mobile, viewport

我有一个固定宽度的网站，客户要求在移动设备上查看时，它应该默认显示整个网站（即缩小）。

在我的脑海中，我有以下内容：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
```

这是我当前使用的 wordpress 模板附带的代码。我在这里查看了各种答案，并尝试了各种不同的组合，但是，无论我使用哪种，该网站总是加载到手机上，屏幕放大到右上角（已经在手机上测试了几个，还有几个有响应）。

我知道我在这里可能真的很愚蠢并且遗漏了一些非常明显的东西，但是如果有人可以帮助它，我们将不胜感激！

如果有人想直接看一下这个网站，它的[EdoMidas.com](http://www.edomidas.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T06:31:01.223

尝试这个：

将 1140 替换为您网站的宽度。

# jquery - 变量变化触发功能

> ID：14219268
> 
> 赞同：1
> 
> 时间：2013-01-08T16:12:28.547
> 
> 标签：jquery

有没有更好的方法来监控变量的变化并在某个值处触发函数？

目前我有这个-

```
$(window).on('scroll', function() {
    if(scrolledYet == "ready" && positionNow < 20){
        fadeOutIntro();
        scrolledYet = "yes"; 
    }
    if(scrolledYet != "ready" && positionNow < 840  && positionNow > 20 ){
        $('.logoBlock,.introScrollIcon, .introText').fadeIn('700')
           setTimeout(function() {  $('#nav').fadeIn('1000');},1000);
          setTimeout(function() {introOnOff = "on";},100)
    }
}); 
```

positionNow 变量在另一个函数中设置并存储当前滚动位置，有没有更好的方法来构造这个脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:05:27.587

为什么不在 CSS 中完成这一切，它可能会更快？

如果你有一个绝对定位的不可见元素，当用户滚动它时，将创建一个悬停状态，你可以触发你的动画。（您可能需要将许多页面元素作为其 css 后代才能正常工作）

如果您需要在 JS 中执行此操作，您可以采取一些措施来提高速度。正如您现在拥有的那样，每次滚动时您都在创建新功能。尝试设置您的 JS，以便浏览器只需要在页面加载时 JIT 编译 JS，因此将这些函数称为处理程序，您也可以只进行一次 jQuery css 选择，在您的情况下，您使用的是 ID 所以这可能是一个相当快的查找，但如果你做了一个`'[data-name=data-value]'`，它实际上是一个相当慢的查询。

您还可以将其分解以在进入和退出 [20px-840px] 区域时触发两个新事件，然后您可以使用 underscore.js 对它们进行去抖动。 [http://underscorejs.org/#debounce](http://underscorejs.org/#debounce)

我知道这是相当高的水平，我没有编写具体的代码，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:38:07.363

为什么不使用事件绑定和传播来监控变量值，如果达到你想要的值，然后触发另一个事件？下面是使用演示“对象”的基本思想，但您可以将其应用于您的“positionNow”或任何其他类型的变量，用于可能已经具有可访问属性的任何对象（包括“窗口”对象）。

例如：jsfiddle - [http://jsfiddle.net/vepWE/1/](http://jsfiddle.net/vepWE/1/)

JS：

```
$("#b").data('myscrollposition', 100);
$("#c").data('myscrollposition', 101);
$("#d").data('myscrollposition', 100);

function f(evt)
{
     $(this).val("desired event triggered");
}

function change(evt)
{
    var m = $(this).data('myscrollposition');
//equivalent to above: var m = $(evt.currentTarget).data('myscrollposition'); 
     if(m == 100)
     {
          $(this).trigger('valuereached');
     }
}

$(".des").on('change', change);
$(".des").on('valuereached', f);
$(".des").trigger('change'); 
```

HTML：

```
<input class = "des" id = "b"></input>
<input class = "des" id = "c"></input>
<input class = "des" id = "d"></input> 
```

* * *

***注意：***还请记住，如果页面上尚不存在您的元素，则必须使用以下语法：

```
$(".parentcontainer").on("myevent", '.listenforthisalways', function(event){
  alert($(this).text());
}); 
```

即使您稍后在页面中添加具有“listenforthisalways”类的元素（在上面的示例中，仅当它被添加为具有类“parentcontainer”的容器的后代）而不是已经具有页面上的元素。

另一个示例在页面上侦听任何添加的带有“myFOO”类的 html 元素，并将事件“myevent”绑定到该元素的函数“myfunction”，即使稍后将其添加到您的页面，如下所示：

```
 function myfunction(evt)
   {
     //whatever
   } 

  $(document).on("myevent", '.myFOO', myfunction); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:23:15.897

是的，但它是一些可能并非随处可用的高级 JavaScript 内容（提示 MSIE）。

```
var o = {_positionNow: 1};
Object.defineProperty(o, "positionNow",
                      {get: function() { return this._positionNow },
                       set: function(positionNow) { this._positionNow = positionNow },
                       enumerable: true,
                       configurable: true}); 
```

当然，`o`可以是任何上下文，比如`window`你喜欢脏东西。或者，如果您想说远离 JavaScript 1.8.5 及更高版本，则只需搜索一些 KVO（键值观察）模式。

[有关defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)的更多文档。

# html - 将鼠标悬停在提交按钮上：我这样做是最好的方式吗？有一个更好的方法吗？

> ID：14219269
> 
> 赞同：0
> 
> 时间：2013-01-08T16:12:27.863
> 
> 标签：html, css, forms

我目前的代码是：

CSS：

```
.submitorder {
background-image: url('https://www.amleo.com/images/art/PON1.jpg');
width: 205px;
height: 52px;
font-size:0px;
}

.submitorder:hover {
background-image: url('https://www.amleo.com/images/art/PON2.jpg');
width: 205px;
height: 52px;
font-size:0px;
} 
```

HTML 很简单：

```
<div><input type="submit" class="submitorder"/></div> 
```

我的页面位于： [https ://www.amleo.com/checkout.aspx](https://www.amleo.com/checkout.aspx)

我应该将图像组合成一张图像吗？我如何将用户看到的内容移动到悬停时图像的下半部分？

只是想了解什么是好/坏/丑。:)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:21:09.720

看看 css 精灵：[http ://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

你应该创建这样的东西：

[你的精灵>](http://csssprites.com/results/9129d48c10d091885b4c6cc4347db6b1/result.png)

（通过[csssprites.com/](http://csssprites.com/)完成）

然后使用：

```
.submitorder {
background-image: url('sprite.jpg');
background-position: 0px 0px;
width: 205px;
height: 52px;
font-size:0px;
}

.submitorder:hover {
background-position: 0px -62px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:19:08.940

你可能想要这样的东西。

[http://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

# c# - C# for Visual Studio 2010 Excel 开发

> ID：14219270
> 
> 赞同：2
> 
> 时间：2013-01-08T16:12:29.387
> 
> 标签：c#, visual-studio-2010, excel-2007

我创建了一个包含隐藏工作表的 excel 2007 工作簿。有一个未隐藏的工作表具有命令按钮，每个命令按钮上都有每个工作表名称。单击命令按钮时，应使隐藏的工作表可见，并且应将焦点放在该工作表上。下面的代码返回此错误：

> 非静态字段、方法或属性“Microsoft.Office.Tools.Excel.WorksheetBase.Visible get”需要对象引用

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Xml.Linq;
using Microsoft.Office.Tools.Excel;
using Microsoft.VisualStudio.Tools.Applications.Runtime;
using Excel = Microsoft.Office.Interop.Excel;
using Office = Microsoft.Office.Core;

namespace TestProj
{
    public partial class Sheet17
    {
        private void Sheet17_Startup(object sender, System.EventArgs e)
        {
        }

        private void Sheet17_Shutdown(object sender, System.EventArgs e)
        {
        }

        #region VSTO Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InternalStartup()
        {
            this.button1.Click += new System.EventHandler(this.button1_Click);
            this.Startup += new System.EventHandler(this.Sheet17_Startup);
            this.Shutdown += new System.EventHandler(this.Sheet17_Shutdown);

        }

        #endregion

        private void checkedListBox1_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            Sheet5 How = new Sheet5();
            How.Visible = Excel.XlSheetVisibility.xlSheetVisible;
        }

    }
} 
```

有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:23:49.147

像这样使用；

```
Sheet5 mySheet = new Sheet5();
mySheet.Visible = Excel.XlSheetVisibility.xlSheetVisible; 
```

或让你的`Sheet5`课`static`。如果不创建此类的任何实例，您将无法访问您`non-static`的类。

从 阅读它[`MSDN`](http://msdn.microsoft.com/en-us/library/98f28cdx.aspx)。

# c++ - 在 c++11 中为包装类强制类继承——这是一件坏事吗？

> ID：14219273
> 
> 赞同：0
> 
> 时间：2013-01-08T16:12:31.077
> 
> 标签：c++, c++11, multiple-inheritance, word-wrap

我一直在为脚本语言开发一个包装库（部分是为了学习 c++11 功能，部分是为了满足特定需求）。出现的一个问题是将继承的对象导出到脚本语言。

问题涉及使用包装类的代理对象来调用函数。具体来说，如果一个函数采用`Foo *`，那么来自任何正在使用的脚本语言的对象代理都必须适当地转换。

有两种方法（我能想到的）来适当地为对象代理建模：

```
template <class T>
struct ObjectProxy {
   T *ptr;
}; 
```

或者：

```
struct WrappedClass {
  virtual ~WrappedClass() {}
};

struct ObjectProxy {
  WrappedClass *ptr;

  template <typename T>
  boost::shared_ptr<T> castAs() {
    return boost::dynamic_pointer_cast<T>(instance);
  }
}; 
```

第一个版本的问题是您需要提前知道`ObjectProxy`指向什么类型。不幸的是，对此没有简单的解决方案（请参阅我以前的许多问题）。经过一番调查，看起来大多数流行的库（例如 boost::python、LuaBind 等）都保留了所有类关系的图表，以便进行正确的转换。

第二种方法避免了所有这些，但确实添加了您包装的每个类都必须从 WrappedClass 继承的约束。

这是我的问题：任何人都可以用第二种方法想到任何主要问题，除了对用户来说有点烦人吗？即使您没有创建特定的类，您也应该始终能够对其进行子类化。例如，如果您有一些提供类的库`Foo`，那么您可以这样做：

```
class FooWrapped: public Foo, public WrappedClass {}; 
```

这确实使用户的事情变得不那么无缝（尽管我一直在研究自动化的方法），这确实意味着您可以依赖内置的 dynamic_cast 而不必编写自己的变体。

**编辑**

添加`castAs()`以使用例更清晰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:04:39.193

您的问题听起来像是[boost::any](http://www.boost.org/doc/libs/1_52_0/doc/html/any.html)旨在解决的问题。该解决方案基本上结合了您的两个想法：（未经测试的代码）

```
struct ObjectProxyBase {
  virtual ~ObjectProxyBase() {}
};

template <class T>
struct ObjectProxy : public ObjectProxyBase {
   T *ptr;
};

template <class T>
T *proxy_cast(ObjectProxyBase *obj) {
    auto ptr = dynamic_cast<ObjectProxy<T> *>(obj);
    if (!ptr)
        return nullptr;

    return ptr->ptr;
} 
```

# java - PDFBox - PageDrawer 在 PdfPagePanel 之外绘制

> ID：14219276
> 
> 赞同：2
> 
> 时间：2013-01-08T16:12:43.573
> 
> 标签：java, pdfbox

我正在使用 PDFBox 在我的应用程序中显示生成的 pdf 文件。我将 PdfPagePanel 添加到 JScrollPane。当我使窗口变小并且出现滚动条时，PageDrawer 将绘制到滚动条上。

这种效果也出现在 PDFReader（PDFBox 的可执行示例）中。打开一个pdf文件->减小窗口大小->在滚动条上绘制pdf内容

有人知道解决这个问题的方法吗？

环境：PDFBox 1.7.1，Windows 7，Java 1.6.31

在此先感谢，萨沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T14:08:06.843

我在 1.8.1 中仍然有同样的奇怪问题。

我的解决方案是将页面转换为这样的 BufferedImage：

```
 PDDocument document = PDDocument.load(new File("C:\\Temp\\stuff.pdf"));             
    List<PDPage> allPages = document.getDocumentCatalog().getAllPages();

    PDPage firstPage = allPages.get(0);
    BufferedImage bi = firstPage.convertToImage(); 
```

然后创建一个普通的 JPanel 并在那里显示你喜欢的图像......

我希望这会有所帮助。不过奇怪的问题！祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T13:42:25.623

您可以为此使用裁剪框。

```
page.setCropBox(new PDRectangle(panel.getWidth(), panel.getHeight())); 
```

但这意味着您每次面板更改大小时都需要设置裁剪框。而且我无法让它与滚动窗格一起正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T17:08:52.390

PageDrawer 的编写者使用 setClip() 与之前的剪辑设置（例如来自 Swing）没有交集。这就是他们使用 PageDrawer 覆盖窗口右侧和底部的所有其他元素的原因。我写了一个图形委托作为一种解决方法。它很长，但很容易使用：

```
 PageDrawer drawer = new PageDrawer();

    try
    {
        drawer.drawPage(new StrictClip(g2D), m_page, dim);
    }
    finally
    {
        drawer.dispose();
    } 
```

现在是 StrictClip 类本身：

```
import java.awt.Color;
import java.awt.Composite;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsConfiguration;
import java.awt.Image;
import java.awt.Paint;
import java.awt.Rectangle;
import java.awt.RenderingHints;
import java.awt.RenderingHints.Key;
import java.awt.Shape;
import java.awt.Stroke;
import java.awt.font.FontRenderContext;
import java.awt.font.GlyphVector;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import java.awt.image.BufferedImageOp;
import java.awt.image.ImageObserver;
import java.awt.image.RenderedImage;
import java.awt.image.renderable.RenderableImage;
import java.text.AttributedCharacterIterator;
import java.util.Map;

public class StrictClip extends Graphics2D
{
    protected Graphics2D m_g2D;

    public StrictClip(Graphics2D g2D)
    {
        m_g2D = g2D;
    }

    @Override
    public void draw(Shape s)
    {
        m_g2D.draw(s);
    }

    @Override
    public boolean drawImage(Image img, AffineTransform xform, ImageObserver obs)
    {
        return m_g2D.drawImage(img, xform, obs);
    }

    @Override
    public void drawImage(BufferedImage img, BufferedImageOp op, int x, int y)
    {
        m_g2D.drawImage(img, op, x, y);
    }

    @Override
    public void drawRenderedImage(RenderedImage img, AffineTransform xform)
    {
        m_g2D.drawRenderedImage(img, xform);
    }

    @Override
    public void drawRenderableImage(RenderableImage img, AffineTransform xform)
    {
        m_g2D.drawRenderableImage(img, xform);
    }

    @Override
    public void drawString(String str, int x, int y)
    {
        m_g2D.drawString(str, x, y);
    }

    @Override
    public void drawString(String str, float x, float y)
    {
        m_g2D.drawString(str, x, y);
    }

    @Override
    public void drawString(AttributedCharacterIterator iterator, int x, int y)
    {
        m_g2D.drawString(iterator, x, y);
    }

    @Override
    public void drawString(AttributedCharacterIterator iterator, float x, float y)
    {
        m_g2D.drawString(iterator, x, y);
    }

    @Override
    public void drawGlyphVector(GlyphVector g, float x, float y)
    {
        m_g2D.drawGlyphVector(g, x, y);
    }

    @Override
    public void fill(Shape s)
    {
        m_g2D.fill(s);
    }

    @Override
    public boolean hit(Rectangle rect, Shape s, boolean onStroke)
    {
        return m_g2D.hit(rect, s, onStroke);
    }

    @Override
    public GraphicsConfiguration getDeviceConfiguration()
    {
        return m_g2D.getDeviceConfiguration();
    }

    @Override
    public void setComposite(Composite comp)
    {
        m_g2D.setComposite(comp);
    }

    @Override
    public void setPaint(Paint paint)
    {
        m_g2D.setPaint(paint);
    }

    @Override
    public void setStroke(Stroke s)
    {
        m_g2D.setStroke(s);
    }

    @Override
    public void setRenderingHint(Key hintKey, Object hintValue)
    {
        m_g2D.setRenderingHint(hintKey, hintValue);
    }

    @Override
    public Object getRenderingHint(Key hintKey)
    {
        return m_g2D.getRenderingHint(hintKey);
    }

    @Override
    public void setRenderingHints(Map<?, ?> hints)
    {
        m_g2D.setRenderingHints(hints);
    }

    @Override
    public void addRenderingHints(Map<?, ?> hints)
    {
        m_g2D.addRenderingHints(hints);
    }

    @Override
    public RenderingHints getRenderingHints()
    {
        return m_g2D.getRenderingHints();
    }

    @Override
    public void translate(int x, int y)
    {
        m_g2D.translate(x, y);
    }

    @Override
    public void translate(double tx, double ty)
    {
        m_g2D.translate(tx, ty);
    }

    @Override
    public void rotate(double theta)
    {
        m_g2D.rotate(theta);
    }

    @Override
    public void rotate(double theta, double x, double y)
    {
        m_g2D.rotate(theta, x, y);
    }

    @Override
    public void scale(double sx, double sy)
    {
        m_g2D.scale(sx, sy);
    }

    @Override
    public void shear(double shx, double shy)
    {
        m_g2D.shear(shx, shy);
    }

    @Override
    public void transform(AffineTransform Tx)
    {
        m_g2D.transform(Tx);
    }

    @Override
    public void setTransform(AffineTransform Tx)
    {
        m_g2D.setTransform(Tx);
    }

    @Override
    public AffineTransform getTransform()
    {
        return m_g2D.getTransform();
    }

    @Override
    public Paint getPaint()
    {
        return m_g2D.getPaint();
    }

    @Override
    public Composite getComposite()
    {
        return m_g2D.getComposite();
    }

    @Override
    public void setBackground(Color color)
    {
        m_g2D.setBackground(color);
    }

    @Override
    public Color getBackground()
    {
        return m_g2D.getBackground();
    }

    @Override
    public Stroke getStroke()
    {
        return m_g2D.getStroke();
    }

    @Override
    public FontRenderContext getFontRenderContext()
    {
        return m_g2D.getFontRenderContext();
    }

    @Override
    public Graphics create()
    {
        return new StrictClip((StrictClip)m_g2D.create());
    }

    @Override
    public Color getColor()
    {
        return m_g2D.getColor();
    }

    @Override
    public void setColor(Color c)
    {
        m_g2D.setColor(c);
    }

    @Override
    public void setPaintMode()
    {
        m_g2D.setPaintMode();
    }

    @Override
    public void setXORMode(Color c1)
    {
        m_g2D.setXORMode(c1);
    }

    @Override
    public Font getFont()
    {
        return m_g2D.getFont();
    }

    @Override
    public void setFont(Font font)
    {
        m_g2D.setFont(font);
    }

    @Override
    public FontMetrics getFontMetrics(Font f)
    {
        return m_g2D.getFontMetrics(f);
    }

    @Override
    public Rectangle getClipBounds()
    {
        return m_g2D.getClipBounds();
    }

    @Override
    public Shape getClip()
    {
        return m_g2D.getClip();
    }

    @Override
    public void clip(Shape clip)
    {
        m_g2D.clip(clip);
    }

    @Override
    public void setClip(Shape clip)
    {
        Shape clipDev = m_g2D.getClip();
        m_g2D.setClip(null);

        if (clip != null && clipDev != null)
        {
            Rectangle rectClip = clipDev.getBounds(),
                rectClipUser = clip.getBounds();

            m_g2D.clip(rectClip.createIntersection(rectClipUser));
        }

        m_g2D.setClip(clipDev);
    }

    @Override
    public void clipRect(int x, int y, int width, int height)
    {
        m_g2D.clipRect(x, y, width, height);
    }

    @Override
    public void setClip(int x, int y, int width, int height)
    {
        setClip(new Rectangle(x, y, width, height));
    }

    @Override
    public void copyArea(int x, int y, int width, int height, int dx, int dy)
    {
        m_g2D.copyArea(x, y, width, height, dx, dy);
    }

    @Override
    public void drawLine(int x1, int y1, int x2, int y2)
    {
        m_g2D.drawLine(x1, y1, x2, y2);
    }

    @Override
    public void fillRect(int x, int y, int width, int height)
    {
        m_g2D.fillRect(x, y, width, height);
    }

    @Override
    public void clearRect(int x, int y, int width, int height)
    {
        m_g2D.clearRect(x, y, width, height);
    }

    @Override
    public void drawRoundRect(int x, int y, int width, int height, int arcWidth, int arcHeight)
    {
        m_g2D.drawRoundRect(x, y, width, height, arcWidth, arcHeight);
    }

    @Override
    public void fillRoundRect(int x, int y, int width, int height, int arcWidth, int arcHeight)
    {
        m_g2D.fillRoundRect(x, y, width, height, arcWidth, arcHeight);
    }

    @Override
    public void drawOval(int x, int y, int width, int height)
    {
        m_g2D.drawOval(x, y, width, height);
    }

    @Override
    public void fillOval(int x, int y, int width, int height)
    {
        m_g2D.fillOval(x, y, width, height);
    }

    @Override
    public void drawArc(int x, int y, int width, int height, int startAngle, int arcAngle)
    {
        m_g2D.drawArc(x, y, width, height, startAngle, arcAngle);
    }

    @Override
    public void fillArc(int x, int y, int width, int height, int startAngle, int arcAngle)
    {
        m_g2D.fillArc(x, y, width, height, startAngle, arcAngle);
    }

    @Override
    public void drawPolyline(int[] xPoints, int[] yPoints, int nPoints)
    {
        m_g2D.drawPolyline(xPoints, yPoints, nPoints);
    }

    @Override
    public void drawPolygon(int[] xPoints, int[] yPoints, int nPoints)
    {
        m_g2D.drawPolygon(xPoints, yPoints, nPoints);
    }

    @Override
    public void fillPolygon(int[] xPoints, int[] yPoints, int nPoints)
    {
        m_g2D.fillPolygon(xPoints, yPoints, nPoints);
    }

    @Override
    public boolean drawImage(Image img, int x, int y, ImageObserver observer)
    {
        return m_g2D.drawImage(img, x, y, observer);
    }

    @Override
    public boolean drawImage(Image img, int x, int y, int width, int height, ImageObserver observer)
    {
        return m_g2D.drawImage(img, x, y, width, height, observer);
    }

    @Override
    public boolean drawImage(Image img, int x, int y, Color bgcolor, ImageObserver observer)
    {
        return m_g2D.drawImage(img, x, y, bgcolor, observer);
    }

    @Override
    public boolean drawImage(Image img, int x, int y, int width, int height, Color bgcolor, ImageObserver observer)
    {
        return m_g2D.drawImage(img, x, y, width, height, bgcolor, observer);
    }

    @Override
    public boolean drawImage(Image img, int dx1, int dy1, int dx2, int dy2, int sx1, int sy1, int sx2, int sy2, ImageObserver observer)
    {
        return m_g2D.drawImage(img, dx1, dy1, dx2, dy2, sx1, sy1, sx2, sy2, observer);
    }

    @Override
    public boolean drawImage(Image img, int dx1, int dy1, int dx2, int dy2, int sx1, int sy1, int sx2, int sy2, Color bgcolor, ImageObserver observer)
    {
        return m_g2D.drawImage(img, dx1, dy1, dx2, dy2, sx1, sy1, sx2, sy2, bgcolor, observer);
    }

    @Override
    public void dispose()
    {
        m_g2D.dispose();
    }

} 
```

希望这可以帮助。

问候汉斯

# iphone - 如何在单元测试运行期间确定代码是否正在运行

> ID：14219277
> 
> 赞同：0
> 
> 时间：2013-01-08T16:12:43.540
> 
> 标签：iphone, objective-c

如果编码作为单元测试的一部分运行，我需要某种 if 语句来忽略某些代码位，例如弹出对话框。

有谁知道必须这样做 - 类似于调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:12:26.470

我更喜欢运行时解决方案，而不是基于预处理器的解决方案：

```
int main(int argc, char* argv[]) {
    @autoreleasepool {
        BOOL tests = NO;

        for (int i = 0; i < argc; i++) {
            NSString* argument = [NSString stringWithCString:argv[i] encoding:NSASCIIStringEncoding];

            if ([argument isEqualToString:@"-SenTest"]) {
                tests = YES;
                break;
            }
        }

       if (tests) {
           //save YES to a global variable and use it whenewer you want
       }

       UIApplicationMain(...)

    }
} 
```

我实际上`UIApplicationDelegate`在运行单元测试时使用它来进行不同的操作，因此没有 UI 代码（数据库打开、通知启动等）与我的测试用例发生冲突。

# php - 从购物车会话多维数组中删除一个项目

> ID：14219290
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:13:20.290
> 
> 标签：php, arrays, session, cart

我正在处理添加到购物车模块，我最终得到的会话数组是这样的：

```
 Array
(
    [cart] => Array
        (
            [0] => Array
                (
                    [item] => Array
                        (
                            [item_name] => burger
                            [item_price] => 5
                            [item_qty] => 3
                        )

                )

            [1] => Array
                (
                    [item] => Array
                        (
                            [item_name] => pizza
                            [item_price] => 15
                            [item_qty] => 2
                        )

                )

            [2] => Array
                (
                    [item] => Array
                        (
                            [item_name] => french fries
                            [item_price] => 8
                            [item_qty] => 5
                        )

                )

        )

) 
```

我想从这个数组中删除一个项目，比如名称为“pizza”的项目。我该怎么做？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:20:57.080

```
function rem_from_array(&$session_array, $name)
{
  foreach($session_array as $key=>$elem)
    if($elem['item']['item_name']==$name)
    {
      unset($session_array[$key]);

      return;
    }
} 
```

那么你应该只执行以下代码：

```
rem_from_array($_SESSION['cart'], 'pizza'); 
```

# android - 使用 google api 地方时 Json 解析问题

> ID：14219295
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:13:39.760
> 
> 标签：android, json

我正在尝试在使用 google api 的地方解析 json 文件中的一些数据我想获取“名称”，然后将其保存在列表中，但我得到 json 异常，这是我的文件

```
{
   "html_attributions" : [],
   "next_page_token" : "ClRHAAAAyPJvpPTgNnOURBi9XhfVvw5J2Howz_h41h1HysWrYomdpQrRwMnWeKRKyiGU6ku6ZxxzQ3fLb598QgwyYYIF9PiK6ynAaBj-XOnbr7s2eTESEHTjEzwG8k6iwf3aFGTmeh0aFAH6KblOYgOw80zn7E-NgcdahjZl",
   "results" : [
      {
         "geometry" : {
            "location" : {
               "lat" : 30.03735730,
               "lng" : 31.2324840
            },
            "viewport" : {
               "northeast" : {
                  "lat" : 30.04394240,
                  "lng" : 31.23577240
               },
               "southwest" : {
                  "lat" : 30.03077210,
                  "lng" : 31.22919559999999
               }
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/geocode-71.png",
         "id" : "b466d997e9c8b69f328895a42143f1da8b445e28",
         "name" : "Garden City",
         "reference" : "CqQBnAAAAHWLMK-4WmAwrZBlBfrSCs8ycrG7voN6sT-vFtqDUhVuxIVHJoAyA2JjVqzCSlJfJcI8DqUg1PFQUwQMDJvZinsx_-YJtYhr01Oa3wvj-CUvGR8m3WlxQEWUB0_tsm6mt5WDCEsMsnmhgRmgrOYmAMePGI_DndEBkOJjhqLoEo1VZblKaa730ZsBe1Wjp_NAYHm1reTeiHlBW5dMVhmCX7cSEAwbfJ3xpIJ_FUCoSlM-5hkaFM3vnuXUv1KVws2t-1L0CR8ldSRB",
         "types" : [ "neighborhood", "political" ],
         "vicinity" : "Cairo"
      },
      {
         "geometry" : {
            "location" : {
               "lat" : 30.0429350,
               "lng" : 31.2246040
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",
         "id" : "710a28e1d1e2aefdd69ea6ec2e30fbfc9f5b54cb",
         "name" : "Cairo Opera House",
         "photos" : [
            {
               "height" : 478,
               "html_attributions" : [ "From a Google User" ],
               "photo_reference" : "CnRsAAAAJxKE7CfYmG89VEHODwClX4P3XbKD0h1j_xghhy0KvINsO9KMNWxkxq65xXPPXzZHWX104qjm3TTJaxh1mUeATTkRspBOVJll0JwZ-8fA_0DaXJ2RVr4pE7rPAKYkW9VE9qwIQ7ba_nvg5j7Nua96ihIQdEM9euo3M8jXH8CdpSj5ixoUq-W9Me_M9edgTscsjn5pBhnOTt8",
               "width" : 613
            }
         ],
         "rating" : 4.50,
         "reference" : "CoQBfAAAAD6AaWl7Ze1hxuelIZZkH8dD0VrsBBIpDOkfjwSItQ276DnGHiLYc4BEcPGyNuw_OPX7HfaPuIYFvN-ctpgcIV2tC5uw3nPP_Z4OTb5y0zD0CaelxZN3a-m0tBiqZHPylp7FpXOHERNc6BUInaWO3_h4Aze7M_FuOw21-zttSBvnEhBl62ERpUcU8nZIJy7DBrKuGhQn65AeXttY1axK8Qkvn7nKxDOuqA",
         "types" : [ "establishment" ],
         "vicinity" : "Opera Land, EL GEZIRAH"
      },
      {
         "geometry" : {
            "location" : {
               "lat" : 30.0459720,
               "lng" : 31.224110
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",
         "id" : "fc80f712dc787d1c2c4382992e25895b8994bcdd",
         "name" : "Cairo Tower",
         "photos" : [
            {
               "height" : 1024,
               "html_attributions" : [ "From a Google User" ],
               "photo_reference" : "CnRoAAAAKUsL4sanCSNRjYRUSPbEbUoK73LuBWW36PuIAqebOTu3llxvJwtsQmtMpE_aqXjwtkZwjinZQqXWWd_8XQDGRtDPpKj5l97Jy02_zsT8KBLueOgaX4LlU0fAxKvQaM3SMJPehF2-x_qb0yn0Pbm4eRIQgX2VP1lXHnrefEKxk_NIshoUYZXYJAsB-z64TzWV4d6ACAxJqbo",
               "width" : 768
            }
         ], 
```

我试过类似的东西

```
 String data = EntityUtils.toString(response.getEntity());

           JSONObject jsonObj = new JSONObject(data);
           Object jj=jsonObj.getJSONObject("results").get("name"); 
```

但我得到了 JSONEXCEPTION

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:20:05.680

results 是一个数组而不是一个对象：

```
JSONObject jsonObj = new JSONObject(data);    
JSONArray results =jsonObj.getJSONArray("results");

for (int i = 0; i < results.length(); i++) {
  JSONObject result = results.getJSONObject(i);

  String name = result.getString("name");
  Log.d("tag", "name: " + name)
} 
```

这里没有编译器，所以无法检查语法。

# javascript - jquery：使用两个带有两个字段（字段 1，字段 2 + 1 天）的日期选择器，例如 booking.com

> ID：14219296
> 
> 赞同：1
> 
> 时间：2013-01-08T16:13:40.527
> 
> 标签：javascript, jquery, html, jquery-ui-datepicker

你好吗？

我有两个带有两个字段的日期选择器

我希望用户选择**（From）**第二个字段**（TO）**将是 next day 。像**booking.com**

例如：当用户选择**From** 01-01-2013 时，直接第二个字段**TO** 02-01-2013 ***(next day)*** ...

## 看这张图片的表格

![在此处输入图像描述](../Images/e343e87aa62f3a78835dc56f30a8a82c.png)

这是jQuery的代码：

```
$(function() {
$( "#from" ).datepicker({
    defaultDate: "+1D",
    changeMonth: true,
    numberOfMonths: 1,
    dateFormat:"dd-mm-yy",
    minDate: "+1D",
    showOn: "button",
    buttonImage: "http://keith-wood.name/img/calendar.gif",
    buttonImageOnly: true , 

    onSelect: function(dateText, inst){
        var d = dateFormat(new Date(dateText + 1), "DD/MM/YYYY");
        $("#to").val(d);
    }

}); 
```

这是我的html代码：

```
<form method="get" action="">
        <input type="submit" value="choose"/>
        <p><input type="text" name="from" id="from" />From<br/>
        <input type="text" name="to" id="to" />To
        </p>
</br>

    </form> 
```

***怎么办？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:35:03.893

```
onSelect: function(dateText, inst){
    var d = $.datepicker.parseDate(inst.settings.dateFormat, dateText);
    d.setDate(d.getDate()+1);
    $("#to").val($.datepicker.formatDate(inst.settings.dateFormat, d));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:59:21.243

我为您创建了一个有效的 JSFiddle：

[http://jsfiddle.net/jirilmongeorge/f329k/26/](http://jsfiddle.net/jirilmongeorge/f329k/26/)

这是javascript代码：

```
$(document).ready(function() {
    $( "#from" ).datepicker({
    defaultDate: "+1D",
    changeMonth: true,
    numberOfMonths: 1,
    dateFormat:"dd-mm-yy",
    minDate: "+1D",
    showOn: "button",
    buttonImage: "http://keith-wood.name/img/calendar.gif",
    buttonImageOnly: true , 
    onSelect: function(dateText, inst){
        var d = $.datepicker.parseDate(inst.settings.dateFormat, dateText);
        d.setDate(d.getDate()+1);
        $("#to").val($.datepicker.formatDate(inst.settings.dateFormat, d));
    }

   });

   $( "#to" ).datepicker({
        showOn: "button",
        buttonImage: "http://keith-wood.name/img/calendar.gif",
        buttonImageOnly: true,
        changeMonth: true,
        changeYear: true
    });

  $('#from').attr('readonly', true);
  $('#to').attr('readonly', true);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:34:53.640

您需要将 dateText 转换为正确的日期格式，然后加一并设置回 #to 值

```
var from = dateText.split("-");
var fDate = new Date(from[2], from[1] - 1, from[0]);

var newdate = new Date(fDate);
newdate.setDate(newdate.getDate() + 1);
$("#to").val(newdate.getDate() + "-" + newdate.getMonth() + "-" + newdate.getFullYear()); 
```

# c# - 处理和删除查询字符串的最佳方法

> ID：14219299
> 
> 赞同：0
> 
> 时间：2013-01-08T16:13:49.823
> 
> 标签：c#, asp.net, query-string

我有两个功能齐全的页面，它们在资产管理系统中执行不同的任务。一方面，该页面可以使用网格视图显示带有序列号的资产列表。在那个视图中，我希望序列号是可点击的，并打开另一个实际显示特定资产信息的页面。我已经想出了如何使链接可点击，并让它打开另一个页面，将序列号作为查询字符串传递。问题是加载其他页面时。我只希望它处理那个序列号一次——处理完之后，它需要回到使用页面上的输入框来显示序列号。到目前为止，我让页面读取查询字符串，将其保存为会话变量，然后在没有查询字符串的情况下重定向回自身。问题出在重定向上，它似乎没有重新处理 Page_Load 事件，并读取它在重定向之前设置的会话变量。我知道它设置了它，因为如果我点击刷新，它就像一个魅力，并显示该序列号的数据。但是为什么我必须点击刷新？我的 Page_Load 事件按顺序调用这两个。第一个将查询字符串复制到会话，并重定向。第二个处理会话变量，并运行与搜索按钮相同的事件处理程序。

```
 protected void GetSearchQueryString(object sender, EventArgs e)        
    {
        String s = Request.QueryString["SN"];

        if (s != null && s.Length > 0)
        {
            Session["SN"] = s;              
            Response.Redirect("/AssetManagement.aspx");
        }

    }
    protected void GetSearchSessionVar(object sender, EventArgs e)
    {
            if (Session["SN"] != null)
            {
                string sessionVal = Session["SN"].ToString();
                AssetSearchTextBox.Text = sessionVal; //setting serial number
                Session.Remove("SN");

                AssetSearchButton_Click(sender, e); //Running asset search
            }            
    } 
```

//############################################### ##### 这是我构建的工作代码，灵感来自 rs 的评论和 mashupweb 的回答。检查回发，并将其保留为查询字符串即可。我讨厌丑陋的网址，但我可以处理！

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
            String s = Request.QueryString["SN"];
            if (s != null && s.Length > 0)
            {
                AssetSearchTextBox.Text = s;
                AssetSearchButton_Click(sender, e);
            }
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:45:58.490

如果您可以避免使用 Sessions，除非您真的需要，并且完全依赖查询字符串，这会不会更容易。

```
protected void GetSearchQueryString(object sender, EventArgs e)        
{
    String s = Request.QueryString["SN"];

    if (s != null && s.Length > 0)
    {            
        Response.Redirect("/AssetManagement.aspx");
    }

}

protected void GetSearchSessionVar(object sender, EventArgs e)
{
        if (Request.QueryString["SN"] != null)
        {
            string sessionVal = Request.QueryString["SN"].ToString();
            AssetSearchTextBox.Text = sessionVal; //setting serial number

            AssetSearchButton_Click(sender, e); //Running asset search
        }            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:17:48.020

如果查询字符串不为空，您只设置 Session 变量，而我认为如果没有查询字符串，您希望将其清除。

尝试这样的事情：

```
Session["SN"] = s;  

if (s != null && s.Length > 0)
        {           
            Response.Redirect("/AssetManagement.aspx");
        } 
```

# delphi - 从 TComboBox D7 分配字体

> ID：14219302
> 
> 赞同：1
> 
> 时间：2013-01-08T16:13:58.950
> 
> 标签：delphi

德尔福 v7

让我先说我不是一个真正的程序员。我是副警长，我偶尔会写一个项目来帮助我们做我们所做的事情。

我当前的项目包含几个 TDBrichEdit 控件。我已经为工具栏按钮分配了各种格式化过程。我希望能够使用组合框更改 RichEdit 字体。组合框填充了字体列表，但它不影响 TDBrichEdit 控件的字体。一个多星期以来，我一直试图解决这个问题，但我看不到问题所在。

这就是我所做的：

**表单 OnCreate 过程**

```
procedure TForm1.FormCreate(Sender: TObject);
begin
PageControl1.ActivePage:= TabSheet1;
  GetFontNames;
  SelectionChange(Self);
  CurrText.Name := DefFontData.Name;
  CurrText.Size := -MulDiv(DefFontData.Height, 72, Screen.PixelsPerInch);
  end; 
```

**表单选择更改**

```
procedure TForm1.SelectionChange(Sender: TObject);
begin
  if ActiveControl is TDBRichEdit then
    with ActiveControl as
    TdbRichEdit do  begin
  try
    Ctrlupdating := True;

    Size.Text := IntToStr(SelAttributes.Size);
    cmbFont.Text := SelAttributes.Name; 
finally
    Ctrlupdating := False;
  end;
end;
end; 
```

**功能（除了“ActiveControl”部分，这些不是我的功能，我没有足够的知识来完全理解它们。）**

```
Function TForm1.CurrText: TTextAttributes;
begin
if ActiveControl is TDBRichEdit then
    with ActiveControl as
    TdbRichEdit do  begin
  if SelLength > 0 then Result := SelAttributes
  else Result := DefAttributes;
end;
end;

function EnumFontsProc(var LogFont: TLogFont; var TextMetric: TTextMetric;
  FontType: Integer; Data: Pointer): Integer; stdcall;
begin
  TStrings(Data).Add(LogFont.lfFaceName);
  Result := 1;
end; 
```

**组合框的 OnDraw 事件**

```
procedure TForm1.cmbFontDrawItem(Control: TWinControl; Index: Integer;
  Rect: TRect; State: TOwnerDrawState);
 begin
 with (Control as TComboBox).Canvas do
  begin
    Font.Name := Screen.Fonts.Strings[Index];
    FillRect(Rect) ;
    TextOut(Rect.Left, Rect.Top, PChar(Screen.Fonts.Strings[Index]));

  end;
  end; 
```

**组合框的 OnChange 事件**

```
procedure TForm1.cmbFontChange(Sender: TObject);
begin
if Ctrlupdating then Exit;
  CurrText.Name := cmbFont.Items[cmbFont.ItemIndex];
end; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:44:01.163

在您的代码中，您尝试修改此代码中的文本属性：

```
procedure TForm1.cmbFontChange(Sender: TObject); 
begin 
  if Ctrlupdating then Exit;
  CurrText.Name := cmbFont.Items[cmbFont.ItemIndex];
end; 
```

当此代码执行时，ActiveControl 将为 cmbFont。现在看看 CurrText。

```
if ActiveControl is TDBRichEdit then
  with ActiveControl as TdbRichEdit do 
  begin
    if SelLength > 0 then
      Result := SelAttributes
    else 
      Result := DefAttributes;
  end; 
```

因此，不会进入第一个 if 块。

实际上，在这种情况下，您的函数似乎没有为 Result 分配任何内容。您必须始终分配给结果。当您启用警告和提示时，编译器会告诉您这一点。

您应该直接指定富编辑实例，而不是使用 ActiveControl。我不知道您的表单是如何排列的，但是您需要使用其他方法来确定要应用更改的富编辑控件。也许基于页面控件的活动页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:24:00.427

# java - Java多线程使用睡眠和中断

> ID：14219306
> 
> 赞同：0
> 
> 时间：2013-01-08T16:14:04.533
> 
> 标签：java, multithreading, synchronization, sleep, interrupt

```
class Useless {
    public static boolean b = true;

    public synchronized void u1() {
        try {
            while (b == true)
                wait();
        } catch (InterruptedException i) {
        }
    }

    public synchronized void u2() {
        if (b == true) {
            b = false;
        }
        notify();
    }
}

public class SleepMessages extends Thread {

private Useless u;

    public SleepMessages(Useless u) {
        this.u = u;
    }

    public void run() {
        String importantInfo[] = { "Mares eat oats", "Does eat oats" };
        for (int i = 0; i < importantInfo.length; i++) {
            u.u1();
            System.out.println(importantInfo[i] + " - " + getName());
            try {
                sleep(2000);
            } catch (InterruptedException e) {
            }
        }
    }

    public static void main(String args[]) throws InterruptedException {
        Useless u = new Useless();
        Thread t1 = new SleepMessages(u);
        t1.setName("t1");
        Thread t2 = new SleepMessages(u);
        t2.setName("t2");
        t1.start();
        t2.start();
        sleep(2000);
        System.out.println("Here they go!...");
        t1.interrupt();
        sleep(1000);
        t2.interrupt();
        u.u2();
        sleep(1000);
        u.u2();
    }
} 
```

这个小程序的输出是： 来了！... 母马吃燕麦 - t1 母马吃燕麦 - t2 吃燕麦 - t2 吃燕麦 - t1

我的问题是为什么线程 t2 是唯一进入 catch(InterruptedException e) 的线程，为什么结果不是这样的：

他们来了！... 母马吃燕麦 - t1 母马吃燕麦 - t2 吃燕麦 - t1 吃燕麦 - t2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:20:01.657

> 我的问题是为什么线程 t2 是唯一进入 catch(InterruptedException e) 的线程，

在我看来，这`t1.interrupt()`正在中断 run() 方法中的睡眠。一旦你丢弃了 InterruptedException，就无法知道线程之前被中断过。

> 为什么结果不是这样的： 他们来了！... 母马吃燕麦 - t1 母马吃燕麦 - t2 吃燕麦 - t1 吃燕麦 - t2

Java 使用偏向锁定。这意味着最后一个获得锁的线程更有可能首先获得相同的锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:32:46.330

Useless 只有一个实例，所以只有一个布尔值 b。一旦将其设置为 true，两个 SleepMessages 实例都可以离开等待循环，因此无论哪个碰巧有机会运行，或者如果多个 CPU 同时运行线程，两者都会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:59:44.223

当我测试你的代码时，两个线程都被中断而没有问题，所以我不确定你为什么认为任何一个都没有进入 catch 块。

该练习似乎是在`u1()`第一次使用中断（触发线程以打印其第一条消息）并`b`第二次设置布尔值（触发第二条消息）时打破等待。

对于`interrupt()`，顺序是相当可预测的，`t1`将有足够的时间`u1()`在主线程在中断之前获得的第二次睡眠中到达下一次调用`t2`。

就`u2()`部分而言，订单的可预测性要低得多。两者`t1`都`t2`在同一台显示器上等待。呼叫可能会`notify()`唤醒任何一个。醒来的人打印第二条消息，再睡一会儿然后停下来。第二个`notify()`唤醒在监视器上等待的一个线程。

所以最后两条消息的顺序是不确定的。

最后的一些建议：您似乎想要实现的行为可能更容易使用[`CyclicBarrier`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)

# spring-mvc - 安全注释不起作用

> ID：14219311
> 
> 赞同：1
> 
> 时间：2013-01-08T16:14:30.617
> 
> 标签：spring-mvc, spring-security

我的 @PreAuthorize 注释不起作用。从我可以看到我做的正确。请注意，这是对我删除的帖子的更新，因为我意识到我应该复制整个 xml 文件而不是片段。

这是我的 security-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http use-expressions="true">
    <intercept-url pattern='/*' access='permitAll' />
    <form-login login-page="/contacts" authentication-failure-url="/security/loginfail" default-target-url="/contacts" />
    <logout logout-success-url="/contacts"/>
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="user" password="user" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

这是顶部带有安全配置的 web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns  /javaee/web-app_3_0.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

      <!-- Spring Security Configuration -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Spring MVC filters -->
<filter>
    <filter-name>CharacterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter>
    <filter-name>HttpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter>
    <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
    <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>CharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>HttpMethodFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>

    <load-on-startup>1</load-on-startup>

    <multipart-config>
        <max-file-size>5000000</max-file-size>
    </multipart-config>

</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

 </web-app> 
```

这是 root-context.xml，它是 web.xml 中上下文参数的一部分。注意 root-context.xml 导入 security-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<!-- Root Context: defines shared resources visible to all other web components -->

<import resource="classpath:datasource-tx-jpa.xml" />

<import resource="security-context.xml"/>

<context:component-scan base-package="com.apress.prospring3.ch17.service.jpa" /> 
```

Servlet-context 包含 global-security-context 并且在组件扫描之后：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/mvc 
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven validator="validator" />

<resources location="/, classpath:/META-INF/web-resources/" mapping="/resources/**"/>
<default-servlet-handler/>

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory  
<resources mapping="/resources/**" location="/resources/" />
-->

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jspx" />
</beans:bean>
 -->

<!--  <context:component-scan base-package="com.apress.prospring3" />  -->
<context:component-scan base-package="com.apress.prospring3.ch17.web.controller" />

<!-- Enable controller method level security -->
<security:global-method-security pre-post-annotations="enabled"/>

<interceptors>
    <beans:bean class="org.springframework.web.servlet.theme.ThemeChangeInterceptor"/>
    <beans:bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"
    p:paramName="lang"/>
</interceptors>

<beans:bean class="org.springframework.ui.context.support.ResourceBundleThemeSource"
    id="themeSource"/>

<beans:bean class="org.springframework.web.servlet.theme.CookieThemeResolver"
    id="themeResolver" p:cookieName="theme" p:defaultThemeName="standard"/>

<beans:bean
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
    id="messageSource" p:basenames="WEB-INF/i18n/messages,WEB-INF/i18n/application"
    p:fallbackToSystemLocale="false"/>

<beans:bean class="org.springframework.web.servlet.i18n.CookieLocaleResolver"
    id="localeResolver" p:cookieName="locale"/>

<beans:bean id="validator"
    class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <beans:property name="validationMessageSource" ref="messageSource"/>
</beans:bean>

<beans:bean
    class="org.springframework.web.multipart.support.StandardServletMultipartResolver"
    id="multipartResolver"/>

<!-- Tiles Configuration -->
<beans:bean class="org.springframework.web.servlet.view.UrlBasedViewResolver"
    id="tilesViewResolver">
<beans:property name="viewClass"
    value="org.springframework.web.servlet.view.tiles2.TilesView"/>
</beans:bean>
<beans:bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer"
    id="tilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/layouts/layouts.xml</beans:value>
            <!-- Scan views directory for Tiles configurations -->
            <beans:value>/WEB-INF/views/**/views.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean> 
```

而我的实际注释：

```
 @PreAuthorize("isAuthenticated()")
    @RequestMapping(params = "form", method = RequestMethod.GET)
    public String createForm(Model uiModel) {
    Contact contact = new Contact();
        uiModel.addAttribute("contact", contact);
        return "contacts/create";
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:42:03.477

尝试[启用`@PreAuthorize`](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/el-access.html#el-pre-post-annotations)注释。

# php - 从单例切换到依赖注入，并调用需要数据库连接的静态方法

> ID：14219312
> 
> 赞同：1
> 
> 时间：2013-01-08T16:14:32.227
> 
> 标签：php, oop

我目前有一个使用单例的数据库包装器，如下所示：

```
class Database {
    private static $db;

    public static function getInstance() {
        if(!self::$db) {
            self::$db = new PDO();
        }
        return self::$db;
    }
} 
```

我还有一个 User 类，它有一些我想静态调用的方法，但它们需要一个数据库连接，我正在这样做：

```
class User {
    private static $db;

    public function __construct() {
        self::$db = Database::getInstance();
    }

    public static function someMethod() {
        self::$db->someQuery();
    }
}

User::someMethod(); 
```

我的问题是，如何在不建立多个数据库连接的情况下使用依赖注入而不是单例来完成同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:21:38.500

您只需将 DB 连接传递给构造函数，如下所示：

```
class User {
    private $db;

    public function __construct($db) {
        if ($db instanceof Database) {
            $this->db = $db;
        } else {
            throw new Exception('Give me a Database object');
        }
    }

    public function someMethod() {
        $this->$db->someQuery();
    }
} 
```

# c++ - 结合 World-Object 和 Object-Object 碰撞检测

> ID：14219313
> 
> 赞同：2
> 
> 时间：2013-01-08T16:14:32.857
> 
> 标签：c++, collision-detection

我正在使用 OpenGL 在 3D 环境中开发游戏。我正在为大多数对象/世界碰撞实现一个扫描椭球碰撞检测/响应系统，它工作正常。

我遇到的问题是将该系统与对象-对象碰撞检测系统相结合。我在设计阶段试图解决的真正问题是查看可能停止或改变另一个对象运动的对象（比如一些可以移动的板条箱，但当玩家碰到它们时充当“墙”。）

我想我将不得不做类似于以下的事情：

1.  找到物体的位移
2.  找出物体与世界碰撞的最早时间（a）
3.  找出物体与任何其他物体碰撞的最早时间（当然是在广泛阶段剔除）
4.  将对象沿位移移动（a）或（b）中的较小者并执行响应
5.  迭代直到完全使用置换

这个对吗？这似乎会非常昂贵，因为我必须在每次检查迭代时检查每个可能的碰撞对象。

另一个问题：推动其他对象的对象呢：

例如，假设一个板条箱掉落并推动了一名玩家。我需要移动板条箱，直到它撞到玩家，然后在完成板条箱的移动之前在玩家被推动时对玩家进行整个碰撞检测运行。这似乎也可能变得非常昂贵，因为推送可能会导致另一次推送，依此类推。

非常感谢任何指导。

# unity3d - Unity3D，可编辑的全局变量？

> ID：14219314
> 
> 赞同：1
> 
> 时间：2013-01-08T16:14:37.763
> 
> 标签：unity3d, global-variables

据我所知，使用全局变量的唯一可能性是将它们定义为静态（C# 中的 const）。有没有办法从另一个脚本访问和更改变量，而两个脚本都访问同一个变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:31:53.633

这取决于情况和您的要求。在大多数情况下，有几种方法可以走。

如果两个脚本都派生自`MonoBehaviour`并且处于活动状态，您可以获取非静态公共成员并使用[GameObject.Find](http://docs.unity3d.com/Documentation/ScriptReference/GameObject.Find.html)（如果您经常需要它作为参考，或者在 Unity 编辑器中使用拖放）。

仅当您依赖于两个对象在同一场景中处于活动状态或通过调用[DontDestroyOnLoad 来](http://docs.unity3d.com/Documentation/ScriptReference/Object.DontDestroyOnLoad.html?from=GameObject)延长其生命周期时，这才有效。

如果您有普通对象，`public static`应该是最方便的方法，但可以与单例模式结合使用。请注意，这`public const`仅适用于原始类型。如果您想授予对结构或对象的只读访问权限，您可以使用`public static readonly`.

看看[在 Unity 中，如何将值从一个脚本传递到另一个脚本？](https://stackoverflow.com/questions/13891892/in-unity-how-can-i-pass-values-from-one-script-to-another/13892844#13892844)用于编码示例和[Unity3D 单例管理器类](https://stackoverflow.com/questions/13730112/unity3d-singleton-manager-classes)，以深入了解单例`MonoBehaviour`实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:11:39.437

如果这些值是受支持的类型，不经常访问并且会受益于应用程序运行之间的持久性，[那么 PlayerPrefs](http://docs.unity3d.com/Documentation/ScriptReference/PlayerPrefs.html)有时是保留一些全局变量的好地方:)

# ios - 为什么在音频队列播放代码中调用 CFRunLoopRunInMode()？

> ID：14219315
> 
> 赞同：9
> 
> 时间：2013-01-08T16:14:43.533
> 
> 标签：ios, playback, audioqueueservices, cfrunloop

我正在关注 iOS“音频队列编程指南 - 播放音频”。[在指南的结尾处，在Start and Run an Audio Queue](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQPlayback/PlayingAudio.html%23//apple_ref/doc/uid/TP40005343-CH3-SW40)`CFRunLoopRunInMode()`步骤中有调用：

```
do {                                               // 5
    CFRunLoopRunInMode (                           // 6
        kCFRunLoopDefaultMode,                     // 7
        0.25,                                      // 8
        false                                      // 9
    );
} while (aqData.mIsRunning);
//... 
```

关于第 6 行的文档说：“CFRunLoopRunInMode 函数运行包含音频队列线程的运行循环。” 但是，当我的方法返回时，该运行循环是否仍然执行？上面的代码在我的应用程序中按下播放按钮时由主线程执行。

现在我很难理解这些调用`CFRunLoopRunInMode()`有什么好处，因为它们的缺点是我的播放按钮没有正确更新（它看起来在音频播放的整个过程中都被按下）并且没有正面效果，即，如果我从我的代码中删除 do-while-loop 以及对的调用`CFRunLoopRunInMode()`，而是直接从此方法返回，音频也可以很好地播放。好吧，这指出了简单地删除这些调用的明显解决方案，因为这不会造成问题。有人能解释一下为什么这段代码包含在 Apple 的官方指南中，关于在 iOS 中使用音频队列进行音频播放吗？

编辑：

我只是看到在 Mac OS X 中，存在与 iOS 上相同的音频队列 API，并且 iOS 指南似乎是[Mac OS 指南](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQPlayback/PlayingAudio.html#//apple_ref/doc/uid/TP40005343-CH3-DontLinkElementID_12)的复制粘贴副本。这使我怀疑这些对运行循环的调用仅在 Mac OS 中需要，而在 iOS 中不再需要，例如因为否则 Mac OS 应用程序将退出或类似的东西。有人可以验证或排除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-21T20:44:36.610

@bunnyhero 是对的，`CFRunLoopRunInMode()`通常用于命令行示例

[https://github.com/abbood/Learning-Core-Audio-Book-Code-Sample/blob/master/CH05_Player/CH05_Player/main.c](https://github.com/abbood/Learning-Core-Audio-Book-Code-Sample/blob/master/CH05_Player/CH05_Player/main.c)

只要你`AudioQueueRef`没有被释放，你就不必`CFRunLoopRunInMode()`在IOS中使用......

我所做的是为音频队列创建一个单独的类，只要我的类指针`AudioQueueRef`被分配，我就可以播放、暂停、恢复、停止等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-09T13:20:49.913

与 OP 的问题有关，关于 AQ 阻塞 UI 线程，以进一步使 AQ 用户免于复制盲目[引用的 CoreAudio AQ 示例，](https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQPlayback/PlayingAudio.html#//apple_ref/doc/uid/TP40005343-CH3-SW40)

我要补充一点，该示例将 AQ 配置为在主线程的当前 runloop 中运行，在`Listing 3-11 Creating a playback audio queue`：

```
AudioQueueNewOutput (                                // 1
    &aqData.mDataFormat,                             // 2
    HandleOutputBuffer,                              // 3
    &aqData,                                         // 4
    CFRunLoopGetCurrent (),                          // 5
    kCFRunLoopCommonModes,                           // 6
    0,                                               // 7
    &aqData.mQueue                                   // 8
); 
```

，见上面的参数值`CFRunLoopGetCurrent ()`。文字说明

> 当前运行循环，以及将在其上调用音频队列播放回调的运行循环。

查看函数原型：

```
OSStatus AudioQueueNewOutput(
    const AudioStreamBasicDescription *inFormat,   // 2
    AudioQueueOutputCallback inCallbackProc,       // 3
    void *inUserData,                              // 4
    CFRunLoopRef inCallbackRunLoop,                // 5
    CFStringRef inCallbackRunLoopMode,             // 6
    UInt32 inFlags,                                // 7
    AudioQueueRef  _Nullable *outAQ                // 8
); 
```

如果将#5 替换为`NULL`，则 AQ 将在 CoreAudio 内部线程中运行，从而提高应用程序的效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-24T17:38:31.490

`CFRunLoopRunInMode`需要在代码执行结束时（例如，在运行终端应用程序时）保持音频队列处于活动状态。iOS 应用程序包含一个生命周期：要使音频队列保持活动状态，您只需将其声明`AudioQueueRef`为成员变量。否则，如果它在方法范围内声明，它会在执行该方法后被销毁 - 因此，它将停止 - 除非您使用`CFRunLoopRunInMode`.

总而言之，只要您在未从内存中释放的实例化类中保存一个成员变量`AudioQueueRef`- 或新的 - ，就*不需要*a 。`AVAudioEngine``CFRunLoopRunInMode`

# sql - SQL：不显示重复项

> ID：14219319
> 
> 赞同：2
> 
> 时间：2013-01-08T16:15:01.967
> 
> 标签：sql, sql-server

我不想在下面的 sql 的输出*中*显示重复的行，所以我在那里有“不同”，但这不起作用。我得到如下输出：

```
PermitNumber PermitName CreatedOn  
111          ABCD       1/2/2011  
111          ABCD       3/4/2012  
222          DFES       3/6/2000 
```

我只想要 111 的一行，但我得到超过 1 行，因为 111 有不止一个修改，但我不在乎它是 1 还是 1000。

```
select  distinct (dbo.PermitNumber(mp.PermitId)), 
        dbo.PermitName(mp.PermitId),
    mod.[CreatedOn] as [CreatedOn]
from    tblPermit mp, dbo.[tblModification] mod
where mod.PermitId = mp.PermitId
order by 1 
```

使用 SQL Server

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T16:20:37.160

Distinct 适用于所有列，因此您可以使用聚合函数：

```
 select  mp.PermitNumber,
    mp.PermitName,
    max(mod.[CreatedOn])as [CreatedOn]
  from    tblPermit mp
  Inner join dbo.[tblModification] mod
      on mod.PermitId = mp.PermitId
  Group by mp.PermitNumber,
    mp.PermitName
  order by 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:18:56.570

使用`GROUP BY`（具体语法取决于您的 dbms）：

```
select  (dbo.PermitNumber(mp.PermitId)), 
    dbo.PermitName(mp.PermitId),
min(mod.[CreatedOn] as [CreatedOn])
from    tblPermit mp, dbo.[tblModification] mod
where mod.PermitId = mp.PermitId
group by (dbo.PermitNumber(mp.PermitId)), dbo.PermitName(mp.PermitId)
order by 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T16:19:11.607

```
;WITH latestRecord
AS
(
    SELECT  PermitNumber, PermitName, CreatedOn,
            ROW_NUMBER() OVER (PARTITION BY PermitNumber, PermitName
                                ORDER BY CreatedOn DESC) rn
    FROM    tblPermit
)
SELECT PermitNumber, PermitName, CreatedOn
FROM    latestRecord
WHERE   rn = 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T16:19:21.593

比您应该决定如何处理创建日期。例如显示这些天的最大值。Distinct 应用于 select 子句中的所有字段。

```
select  distinct (dbo.PermitNumber(mp.PermitId)), 
        dbo.PermitName(mp.PermitId)
from    tblPermit mp, dbo.[tblModification] mod
where mod.PermitId = mp.PermitId
order by 1 
```

这将起作用，但没有创建日期

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T16:19:02.860

根据问题中的有限信息尝试：

```
select  distinct (dbo.PermitNumber(mp.PermitId)), 
        dbo.PermitName(mp.PermitId),
    MIN(mod.[CreatedOn]) as [CreatedOn]
  --^^^new
from    tblPermit mp, dbo.[tblModification] mod
where mod.PermitId = mp.PermitId
group by (dbo.PermitNumber(mp.PermitId)), ---<<new
        dbo.PermitName(mp.PermitId),      ---<<new
order by 1 
```

你需要`mod.[CreatedOn])`对每一行的所有值做一些事情，所以将它们组合在一起并显示每个的最小值。

# qt - 只有从命令行启动 Qt-application 才能正常工作

> ID：14219321
> 
> 赞同：0
> 
> 时间：2013-01-08T16:15:04.587
> 
> 标签：qt, ubuntu

我在 Ubuntu 12.04 上使用 Qt Creator 制作了一个非常简单的应用程序。该应用程序读取一个 xml 文件并显示几个图像。但是，当我尝试通过双击另一台机器（运行 Lubuntu）上的图标来启动应用程序时，没有显示图像，也没有读取 xml 文件。当应用程序通过键入 ./App 从命令行启动时，它确实可以正常工作。

为什么它会这样，我该如何解决？

**编辑**：读取 xml 的方法：

```
QDomDocument doc("document");
QString path = "datastorage.xml"; // xml is in same directory as the executable
QFile xmlFile(path);

if (!xmlFile.open(QIODevice::ReadOnly))
    throw QString("Error with XML: Could not open file " + path);
if (!doc.setContent(&xmlFile)) {
    xmlFile.close();
    throw QString("Error with XML: Could not set QDomDocument content from " + path);
}
xmlFile.close();
QDomElement root = doc.documentElement();
return root; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T17:04:39.590

只需您使用相对路径来读取文件，并且这些路径始终相对于“工作目录”。如果您从控制台启动应用程序，并且所有必需的文件都在应用程序目录中，那么一切正常。从桌面工作目录启动时可能会有所不同。只需将 QCoreApplication::applicationDirPath() 添加到您正在使用的所有路径。

# arrays - 两个数组perl的比较

> ID：14219322
> 
> 赞同：2
> 
> 时间：2013-01-08T16:15:09.263
> 
> 标签：arrays, perl

我是 Perl 世界的新手，我有一个比较两个数组的脚本。

我使用[`List::MoreUtils`](https://metacpan.org/module/List%3a%3aMoreUtils)( `each_arrayref`) 进行比较。

我有两个问题：

1）有没有办法比较两个数组块（如natatime，但对于两个arrayrefs），而不是像在each_arrayref中那样一次比较单个元素？

元素应该来自每个数组的相同索引。

数据结构是这样的：

```
{
  atr => [qw/ a b c d /],
  ats => [qw/ a b c d /],
  att => [qw/ a b c d /],
} 
```

这就是我到目前为止所得到的。

```
my @lists = keys %{$hash};

for (my $i = 0; $i <= @lists; $i++) {

  my $list_one = $lists[$i];
  my $one = $hash->{$list_one};

  for (my $j = 0 ; $j <= @lists ; $j++) {

    my $list_two = $lists[$j];
    my $two = $hash->{$list_two};

    my ($overlapping, $mismatch, $identity);
    my $match          = 0;
    my $non_match      = 0;
    my $count_ac_calls = 0;
    my $each_array     = each_arrayref($one, $two);

    while (my ($call_one, $call_two) = $each_array->()) {

      if ((defined $call_one) && (defined $call_two)) {
        if ($call_one eq $call_two) {
          $match++;
        }
        if ($call_one ne $call_two) {
          $non_match++;
        }
      }
    }    #end of while loop $each_array->()

    print "$list_one,$list_two,$match,$non_match";

  }    #end of for j loop
}    #end of for i loop 
```

我想比较 atr->ats、atr->att、ats->att。但是使用我当前的代码，我会重复进行比较，例如 ats->atr att->atr,att->ats。

2）我怎样才能避免这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:44:20.520

我不清楚你的第一个问题是什么意思。你想要一个迭代器，比如说，返回`(('a','b','c'),('a','b','c'))` 而不是 `('a','a')`？如果是这样，那么库中没有可用的库，但编写自己的库并不难。

至于第二个，避免项目与自身进行比较的通常方法是更改​​内部循环，使其在第一个的当前值之后开始。像这样

```
for my $i (0..$#lists) {

  for my $j ($i+1..$#lists) {

  }

} 
```

这是有效的，因为`A eq B`通常与 相同`B eq A`，因此将条目与列表中较早的条目进行比较是没有意义的，因为已经进行了反向比较。

`for`请注意，Perl 以这种方式编写循环比杂乱的 C 样式语法要好得多。你也有几个错误

```
for (my $i = 0 ; $i <= @lists ; $i++) { ... } 
```

因为 的最大索引`@lists`比 的标量值小一，`@lists`通常编码为`$#lists`。您的 for 循环中也存在同样的问题`$j`。

**更新**

这是对您的程序的重构，它包含我所描述的想法并且更加*Perlish*。我希望它对你有用。

```
use strict;
use warnings;

use List::MoreUtils 'each_arrayref';

my $hash = {
  atr => [qw/ a b c d /],
  ats => [qw/ a b c d /],
  att => [qw/ a b c d /],
};

my @keys = keys %{$hash};

for my $i (0 .. $#keys) {

  my $key1 = $keys[$i];
  my $list1 = $hash->{$key1};

  for my $j ($i+1 .. $#keys) {

    my $key2 = $keys[$j];
    my $list2 = $hash->{$key2};

    my ($match, $non_match) = (0, 0);
    my $iter = each_arrayref($list1, $list2);

    while (my ($call1, $call2) = $iter->()) {
      if (defined $call1 and defined $call2) {
        ($call1 eq $call2 ? $match : $non_match)++;
      }
    }

    print "$key1, $key2, $match, $non_match\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:41:31.207

一种选择是使用[Array::Compare](http://search.cpan.org/~davecross/Array-Compare-2.02/lib/Array/Compare.pm)返回不同数组元素的数量。此外，[Math::Combinatorics](http://search.cpan.org/~allenday/Math-Combinatorics-0.09/lib/Math/Combinatorics.pm)仅用于获得唯一的比较。

```
use strict;
use warnings;
use Array::Compare;
use Math::Combinatorics;

my %hash = (
    'atr' => [ 'a', 'b', 'c', 'd' ],
    'ats' => [ 'a', 'b', 'c', 'd' ],
    'att' => [ 'a', 'c', 'c', 'd' ],
);

my $comp = Array::Compare->new( DefFull => 1 );
my $combinat = Math::Combinatorics->new(
    count => 2,
    data  => [ keys %hash ],
);

while ( my ($key1, $key2) = $combinat->next_combination ) {
    my $diff = $comp->compare( \@{ $hash{$key1} }, \@{ $hash{$key2} } );
    print "$key1,$key2," . ( @{ $hash{$key1} } - $diff ) . ",$diff\n";
} 
```

输出：

```
ats,att,3,1
ats,atr,4,0
att,atr,3,1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T18:37:16.637

您并没有真正利用 Perl 提供的功能。与其使用容易出错的 C 样式循环，不如使用`for my $var (LIST)`. 您也可以通过跳过自检来跳过冗余列表检查。我拿走了你的剧本，做了一些改动，我相信你会发现它更容易阅读。

```
use v5.16;
use warnings;
use List::MoreUtils qw{each_arrayref};

my $hash = {
  'atr' => [
    'a',
    'b',
    'c',
    'd'
   ],
  'ats'=>[
    'a',
    'b',
    'c',
    'd'
   ],
  'att' => [
    'a',
    'c',
    'c',
    'd'
   ],
};

for my $list_one (keys $hash) {
    my $one = $hash->{$list_one};

    for my $list_two (keys $hash) {
        next if $list_one ~~ $list_two;

        my $two = $hash->{$list_two};

        my ($match, $non_match);
        $match = $non_match = 0;

        my $each_array = each_arrayref($one, $two);
        while (my ($call_one, $call_two) = $each_array->()) {
            if($call_one && $call_two) {
                if($call_one eq $call_two) {
                    $match++;
                }
                else {
                    $non_match++;
                }
            }
        }

        print "$list_one,$list_two,$match,$non_match\n";
    }
} 
```

无论如何，您都希望一次评估一个，以便您可以添加一些额外的位，例如索引位置。（是的，你可以使用 C 风格的循环，但这会更难阅读。）

# ios - 如何在 facebook ios sdk 中处理会话

> ID：14219323
> 
> 赞同：0
> 
> 时间：2013-01-08T16:15:12.580
> 
> 标签：ios, cocoa-touch, facebook-ios-sdk

嗨，我正在开发一个应用程序。在应用程序中是否可以与 facebook 一起唱歌......在应用程序的多个地方，您可以在自己的时间线上分享内容。

我遵循了 facebook 提供的美味示例，并且登录工作正常......但是当我必须分享东西时，我不知道是否有必要在调用该`FBRequestConnection`方法之前检查会话是否处于活动状态发布到 fb。

处理这个问题的最佳方法是什么？因为所有的身份验证都是调用`open session`委托中的一个方法，所以......我必须从应用程序的任何地方调用这个方法？怎么才能回到调用认证方法之前所在的地方……我确定肯定有某种赞助人可以使用，但是我找不到哪一个……

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:32:26.350

使用这样的代码块来确保会话是打开的，这很重要，因为如果用户没有打开，您的应用程序将会崩溃。然后你需要在 FBRequestConnection 中有你的 OpenGraph 对象。

```
 if (FBSession.activeSession.isOpen) {
        [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
             if (!error) {
                 self.nameString = user.name;
                 self.profileImage.profileID = user.id;
                 self.userName = user.username;
                 [self.tableView reloadData];
             }
         }];
    }
} 
```

**对于您的评论如下：**

好的，然后可能会提出`UIAlertView`要求用户登录 Facebook。如果他们选择是，那么做类似的事情

```
AppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
[appDelegate openSessionWithAllowLoginUI:YES]; 
```

假设您的 AppDelegate 看起来像 Scrumptious。

# visual-studio-2012 - 无法在 SSIS 脚本任务中添加引用

> ID：14219331
> 
> 赞同：2
> 
> 时间：2013-01-08T16:15:54.760
> 
> 标签：visual-studio-2012, sql-server-2012, sql-server-2012-datatools

**你好**，

**我对SQL Server 2012 SSIS**有一个特殊的问题。当我想添加一个引用“脚本组件”时，以便使用**FileSystemObjects**。Visual Studio IDE 根本不添加它。我正在执行以下操作：

```
1) Open Solution Explorer in Visual Studio
2) Right-click Solution
3) Select "Add Reference"
4) Look in .NET Tab
5) Select Script Component
6) Hit OK Button* 
```

即使在这些步骤之后，也没有添加引用，因为我无法在标题中**导入脚本。**

# asp.net-mvc - 将 Html.DropDownListFor 移动到 EditorTemplate

> ID：14219335
> 
> 赞同：0
> 
> 时间：2013-01-08T16:16:08.873
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-mvc-4, html.dropdownlistfor, mvc-editor-templates

尝试使用 MVC4 中的下拉列表创建编辑器模板。我可以让 dropdownlistfor 直接在视图中工作，如下所示：

```
@Html.DropDownListFor(model => model.Item.OwnerId, new SelectList(Model.DDLOptions.CustomerOptions, "Value", "DisplayText")) 
```

但是然后要“生成”它并将其放入编辑器模板中，我无法让它工作。

这是我在 EditorTemplate 部分中尝试的内容：

```
@Html.DropDownListFor(model => model, new SelectList(Model.DDLOptions.CustomerOptions, "Value", "DisplayText")) 
```

我收到错误消息：

```
Exception Details: Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 'int' does not contain a definition for 'DDLOptions' 
```

`Model.DDLOptions.CustomerOptions`是类型`IEnumerable<DDLOptions<int>>`：

```
public class DDLOptions<T>
{
    public T Value { get; set; }
    public string DisplayText { get; set; }
} 
```

此错误是否与 DDLOptions 是泛型有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:10:02.063

这条线是问题所在：

```
@Html.DropDownListFor(model => model, new SelectList(Model.DDLOptions.CustomerOptions, "Value", "DisplayText")) 
```

您的模型只是一个 int，基于上面的代码，但是您也调用`new SelectList(Model.DDLOptions.CustomerOptions, "Value", "DisplayText")`了部分，引用了 Model.DDLOptions，它在编辑器模板中的模型中不存在。你的模型只是一个整数。

有几种方法可以做到这一点，其中一种是为您的项目所有者创建一个自定义模型类，并让它包含 ownerID 和 DDLOptions。另一种方法是将 DDLOptions 粘贴在 ViewBag 中，但我通常远离它，因为我更喜欢使用编写良好的、特定于视图的视图模型。

我希望这有帮助。

# c - 随机数创建

> ID：14219337
> 
> 赞同：0
> 
> 时间：2013-01-08T16:16:18.230
> 
> 标签：c, random, random-sample

我需要`100`在说大小为 5000 的数组中生成随机索引`arr[5000]`。我认为`rand()`会使用更多的 CPU，所以我不想循环 100 次。我只想调用一次，并希望有随机数组索引的机制。我的想法是为前 20 个索引设置随机值，并生成一个偏移量并继续添加到生成的随机值。即，如果`10`是前 20 个索引的随机值，那么如果说偏移量，`6`那么我的随机数将是`10,16,22,28...etc` 你认为这是个好主意吗？你能推荐其他的吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:18:21.143

这是一个可怕的想法，结果值根本不会是“随机的”。

只需循环并呼叫`rand()`您需要的每个号码。它不会“使用更多的 CPU”（超过*什么*？），它会很好。

另外，当然请注意，这`rand()`通常最多是一个伪随机生成器，但仍然比您的方法更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:32:06.687

使用 rand() 是一个更好的主意。然而，如果你真的想做你的伪随机生成器（这在 99% 的情况下不是正确的答案），那么看看[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator) ——它背后的数学很简单，它是 libc 的基础的 random() 实现。您可以尝试尝试相同的乐趣！这是另一个[链接](http://www.mathstat.dal.ca/~selinger/random/)。

# javascript - 在此代码中设置 AJAX = "false"

> ID：14219341
> 
> 赞同：0
> 
> 时间：2013-01-08T16:16:20.580
> 
> 标签：javascript, ajax, jquery, jquery-mobile

我有上一个和下一个按钮的代码，但是当我使用它们时，除非我刷新页面，否则它们不会返回任何数据。是否像在其中添加一些代码以将 ajax 变为 false 一样简单，还是有更好的解决方案？这应该如何处理？谢谢。

```
$links.each(function)
{
    var reverse = $(this).closest("." + prevLIClass).length;

    $(this).buttonMarkup(
    {
        "role" : "button",
        "theme" : "d",
        "iconpos" : "notext",
        "icon" : "arrow-" + (reverse ? "1" : "r")
    })
    .bind("vclick", function()
    {
        $.mobile.changePage($(this).attr("href"),{reverse : reverse});
        return false;
    });
}); 
```

# c# - 无法将 ListItem 类型的对象转换为 String

> ID：14219345
> 
> 赞同：1
> 
> 时间：2013-01-08T16:16:33.507
> 
> 标签：c#, web-services, loops

我正在尝试从 ListBox 中删除特定项目，但是出现了转换错误。它似乎不喜欢我将 ListBox 中的项目称为项目的事实`string`。

```
if (CheckBox1.Checked == true)
        {
            foreach (string item in ListBox1.Items)
            {
                WebService1 ws = new WebService1();
                int flag = ws.callFlags(10, item); 

                if (flag == 1)
                {
                    ListBox1.Items.Remove(item);
                }
            }
        } 
```

**错误**-

```
Unable to cast object of type 'System.Web.UI.WebControls.ListItem' to type 'System.String'. 
```

我该如何解决这个问题？

**编辑**

我的问题是当我改变`(ListItem item in ListBox1.Items)`（我已经尝试过的）换行的方法时 -`int flag = ws.callFlags(10, item);`因为网络服务正在寻找`string`专门接收一个。然后这给出了错误 -

```
Error   2   Argument 2: cannot convert from 'System.Web.UI.WebControls.ListItem' to 'string'
Error   1   The best overloaded method match for 'testFrontEnd.WebService1.callFlags(int, string)' has some invalid arguments 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:18:19.470

将您的删除更改为：

```
ListBox1.Items.Remove(ListBox1.Items.FindByName(item)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:20:16.087

你正在迭代`ListItems`，所以你应该这样做：

```
foreach( ListItem item in ListBox1.Items){
    WebService1 ws = new WebService1();
    int flag = ws.callFlags(10, item.Text); // <- Changed to item.Text from item

    if (flag == 1)
    {
        ListBox1.Items.Remove(item); // <- You'll have an issue with the remove
    }
} 
```

当您尝试 from 时，您也会收到错误，`Remove`因为`Item`您`ListBox`不允许从`Enumerable`您正在迭代的 an 中删除。天真地，您可以将`foreach`循环切换为`for`循环来解决该问题。

此代码应该可以删除并修复您的“无法投射”错误。

```
for(int i = 0; i < ListBox1.Items.Count; i++)
{
    ListItem item = ListBox1.Items[i];
    WebService1 ws = new WebService1();
    int flag = ws.callFlags(10, item.Text);

    if (flag == 1)
    {
        ListBox1.Items.Remove(item); 
    }
} 
```

最后一点；你`WebService1`似乎是一个自定义类，让它实现`IDisposable`接口并将其包装在一个`using`子句中可能是个好主意，这样你就可以确保它在使用后得到正确处理。

```
public class WebService1 : IDisposable { // ... 

using (WebService1 ws = new WebService1())
{ 
    // Code from inside your for loop here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:19:43.183

ListBox1.Items 返回`ListItem`对象的集合。你想拥有`item`type `ListItem`，然后使用`item.Text`，或者可能`item.Value`。

# xml - 为什么 XSD 中的“maxLength”属性不限制返回的字符数？

> ID：14219346
> 
> 赞同：1
> 
> 时间：2013-01-08T16:16:35.130
> 
> 标签：xml, xslt, xsd

我有一个定义如下的 XSD 元素：

```
<xsd:simpleType name="string1500">
    <xsd:restriction base="xsd:string">
        <xsd:maxLength value="1500" />
    </xsd:restriction>
</xsd:simpleType> 
```

此元素在另一个 XSD 中以下列方式引用：

```
<xsd:element minOccurs="0" name="Description" type="bons3:string1500" /> 
```

（*bons3*在两个 XSD 中引用相同的命名空间。）

当一个长度为 2000 个字符的字符串被传递到 XSLT 中的描述字段时，所有 2000 个字符都将被保留，即使设置了 1500 个字符的限制。我是否设置了错误的限制，或者是否有其他方法可以确保在 XSD 中该字段的最大长度为 1500 个字符？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:20:31.420

XSD 不会影响 XSLT 的行为。如果您想限制 XSLT 中某个值的长度，可以使用

```
substring(Description, 1, 1500) 
```

当你提到它时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:22:32.097

XSLT 和 XSD 是两个不同的东西。XSLT 1.0 不关心 XSD 或任何其他 XML 模式语言。XSLT 2.0 引入了 XSD 感知扩展，您必须为此找到合适的 XSLT 处理器，这可能会阻止您处理 XML；但是，它不会自动使其生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:15:47.610

如果您使用的是模式感知 XSLT 处理器，例如 Saxon-EE，您可以编写

```
<Description xsl:validation="strict">
  ...
</Description> 
```

这将确保元素的内容对模式中描述元素声明的声明类型有效。（必须使用 xsl:import-schema 声明将模式导入样式表）。

# mfc - MFC CListCtrl 更新任何单元格的文本

> ID：14219348
> 
> 赞同：1
> 
> 时间：2013-01-08T16:16:41.480
> 
> 标签：mfc, clistctrl

这个问题是要了解如何以编程方式更新任何行。细节。我有一个 listcrtl，它接受来自文件或对话框中编辑控件的数据。添加项目后，我将知道我添加的位置，因此我可以更改其子项目文本。我什至在列表中实现了排序功能，所以现在位置不断变化。每行都有一个标识符列，以便我可以识别该行。现在，从外部事件来看，如果我必须更改我知道的 ID 的其他列值，我必须首先通过比较 id 列找到项目的位置，然后使用该位置，我已经设置了 subitemtext .

这很好用，只是先找到行需要时间，然后需要更新列。

现在，为了直接获取行，我需要一些帮助。我已经通过 [http://msdn.microsoft.com/en-us/library/windows/desktop/hh298346(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh298346(v=vs.85).aspx) 但这不使用 MFC。请帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:26:44.353

如果您有很多项目，您应该考虑切换到[虚拟列表](http://www.codeproject.com/Articles/7891/Using-virtual-lists)。这是访问数据的最快方式。如果您不想为此投入时间，那么对您来说最简单的方法如下：

1.  当您使用 SetItemData() 方法填充 CListCtrl 时，将每个项目的 ID 存储在项目数据中。ID 将始终与项目相关联，即使在重新排序后也是如此。
2.  当您需要定位所需的项目时，只需扫描所有项目，但不要使用 GetItemText()。请改用 GetItemData()。这会更快

# iphone - 为 Web 应用程序的可滚动 div 中的图像启用拖动功能

> ID：14219356
> 
> 赞同：1
> 
> 时间：2013-01-08T16:16:58.393
> 
> 标签：iphone, ipad, drag-and-drop, touch, vertical-scrolling

在包含本机滚动条的 div 中有一些带有一些文本的图像。我想让这些图像`dragable`继续允许原生`scrolling`在该 div 上运行。在图像上快速滑动不应触发拖动事件，就像 iOS 主屏幕所做的那样。我现在希望在iOS6.1 中`iPad`执行此操作。`iPhone`

任何建议和`jQuery`插件都会有所帮助！

# vb6 - 使用 Visual Basic 6.0 将十六进制数据发送到以太网或 LAN

> ID：14219357
> 
> 赞同：0
> 
> 时间：2013-01-08T16:16:59.113
> 
> 标签：vb6

我想使用[Visual Basic 6.0](http://en.wikipedia.org/wiki/Visual_Basic#Timeline)将十六进制数据发送到以太网或 LAN 。十六进制数据将如下所示：

> AB7745683ACB76B34E5FF5E99EBC5F878A6BC8E9DF9876BCEA89

在表单上，​​我有一个文本框，用户将在其中输入这些数据。

如何使用 Visual Basic 6.0 将此十六进制数据发送到 LAN 或以太网？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:35:52.650

```
'1 form with:
'    1 textbox control: name=Text1
'    1 winsock control: name=Winsock1
Option Explicit

Private Sub Command1_Click()
  SendCmd Text1.Text
End Sub

Private Sub Form_Load()
  Text1.Text = "AB7745683ACB76B34E5FF5E99EBC5F878A6BC8E9DF9876BCEA89"
End Sub

Private Sub SendCmd(strHex As String)
  Dim strCmd As String
  With Winsock1
    'make sure we are connected
    DoConnect
    'convert hex to cmd
    strCmd = Hex2Cmd(strHex)
    'send cmd
    .SendData strCmd
  End With 'Winsock1
End Sub

Private Sub DoConnect()
  With Winsock1
    If .State <> sckConnected Then
      .Connect "192.168.98.17", 5001 'Destination IP address and port
      Do Until .State = sckConnected
        DoEvents
      Loop
    End If
  End With 'Winsock1
End Sub

Private Function Hex2Cmd(strHex As String) As String
  Dim intHex As Integer
  Dim strCmd As String
  strCmd = ""
  For intHex = 1 To Len(strHex) Step 2
    strCmd = strCmd & Chr$(Val("&H" & Mid$(strHex, intHex, 2)))
  Next intHex
  Hex2Cmd = strCmd
End Function 
```

# android - Button up webview

> ID：14219361
> 
> 赞同：0
> 
> 时间：2013-01-08T16:17:16.613
> 
> 标签：android, layout, webview, runtime-error

I studying for many hours for nothing... I've this code that runs perfectly. The problem is button up webview. So, I see text on the webview inside button.

```
public class News extends Activity {

    private WebView webView1;
    private Button newsbutton;
    private ImageView imageView1;

        @Override
        public void onCreate(Bundle savedInstanceState){ 
          super.onCreate(savedInstanceState);
          setContentView(R.layout.news);

          webView1 = (WebView)findViewById(R.id.webView1);
          newsbutton = (Button)findViewById(R.id.newsbutton);
          imageView1 = (ImageView)findViewById(R.id.imageView1);

          webView1.setBackgroundColor(0x00000000);
          webView1.loadUrl("file:///android_asset/news.html");

          newsbutton.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    finish(); 
```

XML:

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:contentDescription="TODO: DESCRIPTION"
        android:src="@drawable/ic_launcher" />

<WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imageView1" />

<Button
    android:id="@+id/newsbutton"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:contentDescription="TODO: DESCRIPTION"
    android:text="Chiudi" />

</RelativeLayout> 
```

logcat

```
 346): java.lang.StackOverflowError
E/AndroidRuntime(  346):    at java.util.HashMap.doubleCapacity(HashMap.java:561)
E/AndroidRuntime(  346):    at java.util.HashMap.put(HashMap.java:391)
E/AndroidRuntime(  346):    at java.util.HashSet.add(HashSet.java:95)
E/AndroidRuntime(  346):    at java.nio.charset.Charset.<init>(Charset.java:189)
E/AndroidRuntime(  346):    at com.ibm.icu4jni.charset.CharsetICU.<init>(CharsetICU.java:33)
E/AndroidRuntime(  346):    at com.ibm.icu4jni.charset.CharsetProviderICU.getCharset(CharsetProviderICU.java:62)
E/AndroidRuntime(  346):    at com.ibm.icu4jni.charset.CharsetProviderICU.charsetForName(CharsetProviderICU.java:57)
E/AndroidRuntime(  346):    at java.nio.charset.Charset.forNameInternal(Charset.java:500)
E/AndroidRuntime(  346):    at java.nio.charset.Charset.forName(Charset.java:570)
E/AndroidRuntime(  346):    at com.android.internal.util.FastXmlSerializer.setOutput(FastXmlSerializer.java:292)
E/AndroidRuntime(  346):    at com.android.internal.util.XmlUtils.writeMapXml(XmlUtils.java:180)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl.writeFileLocked(ApplicationContext.java:2757)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl.access$800(ApplicationContext.java:2510)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl$EditorImpl.commit(ApplicationContext.java:2695)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.preferenze(MainActivity.java:3656)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.access$0(MainActivity.java:3632)
E/AndroidRuntime(  346):    at com.example.app.MainActivity$1.onSharedPreferenceChanged(MainActivity.java:2421)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl$EditorImpl.commit(ApplicationContext.java:2703)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.preferenze(MainActivity.java:3732)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.access$0(MainActivity.java:3632)
E/AndroidRuntime(  346):    at com.example.app.MainActivity$1.onSharedPreferenceChanged(MainActivity.java:2421)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl$EditorImpl.commit(ApplicationContext.java:2703)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.preferenze(MainActivity.java:3732)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.access$0(MainActivity.java:3632)
E/AndroidRuntime(  346):    at com.example.app.MainActivity$1.onSharedPreferenceChanged(MainActivity.java:2421)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl$EditorImpl.commit(ApplicationContext.java:2703)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.preferenze(MainActivity.java:3732)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.access$0(MainActivity.java:3632)
E/AndroidRuntime(  346):    at com.example.app.MainActivity$1.onSharedPreferenceChanged(MainActivity.java:2421)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl$EditorImpl.commit(ApplicationContext.java:2703)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.preferenze(MainActivity.java:3732)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.access$0(MainActivity.java:3632)
E/AndroidRuntime(  346):    at com.example.app.MainActivity$1.onSharedPreferenceChanged(MainActivity.java:2421)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl$EditorImpl.commit(ApplicationContext.java:2703)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.preferenze(MainActivity.java:3732)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.access$0(MainActivity.java:3632)
E/AndroidRuntime(  346):    at com.example.app.MainActivity$1.onSharedPreferenceChanged(MainActivity.java:2421)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl$EditorImpl.commit(ApplicationContext.java:2703)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.preferenze(MainActivity.java:3732)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.access$0(MainActivity.java:3632)
E/AndroidRuntime(  346):    at com.example.app.MainActivity$1.onSharedPreferenceChanged(MainActivity.java:2421)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl$EditorImpl.commit(ApplicationContext.java:2703)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.preferenze(MainActivity.java:3732)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.access$0(MainActivity.java:3632)
E/AndroidRuntime(  346):    at com.example.app.MainActivity$1.onSharedPreferenceChanged(MainActivity.java:2421)
E/AndroidRuntime(  346):    at android.app.ApplicationContext$SharedPreferencesImpl$EditorImpl.commit(ApplicationContext.java:2703)
E/AndroidRuntime(  346):    at com.example.app.MainActivity.preferenze(MainActivity.java:3732)
E/AndroidRuntime(  346):    a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:27:22.510

Not completely sure what you're after, but I think this is what you mean:

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:contentDescription="TODO: DESCRIPTION"
            android:src="@drawable/ic_launcher" />

    <Button
        android:id="@+id/newsbutton"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:contentDescription="TODO: DESCRIPTION"
        android:text="Chiudi" />

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_above="@id/newsbutton"
        android:layout_below="@id/imageView1" />

</RelativeLayout> 
```

# php - 为什么我的表单在除 IE7 之外的所有浏览器中都提交？

> ID：14219363
> 
> 赞同：0
> 
> 时间：2013-01-08T16:17:20.703
> 
> 标签：php, ajax, forms

我有一个在除 IE7 之外的所有浏览器中提交的表单。在 IE7 中，单击提交时，浏览器会显示一个空白页面，并且地址栏会更改为我处理和提交表单的 PHP 文件的地址。

这是表格：[http ://www.hancockclaims.com/schedule-a-claimassist/](http://www.hancockclaims.com/schedule-a-claimassist/)

您可以在 IE7 中将表单留空，然后单击提交，您将看到它加载了一个空白页面。在其他浏览器中，当表单为空白时，它会指出必填字段，当表单被填写时，它会提交。

这是我处理表单的“schedule_claim.php”文件的内容：

[http://pastebin.com/R3NbXfn5](http://pastebin.com/R3NbXfn5)

我不能为我的生活，弄清楚为什么 IE7 不工作。我花了几个小时试图找到问题，但我现在只是在兜圈子。

希望有一个解决方案并解释问题是什么以及为什么它会出现在 IE7 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:22:55.390

在您的[function.js](http://www.hancockclaims.com/wp-content/themes/hancock_wp/style/js/functions.js)文件更改中：

```
$("#edit-submit").click(function() { 
```

到

```
$("#edit-submit").click(function(e) {
    e.preventDefault(); 
```

IIRC`return false`不起作用< IE8，因此您的页面只是提交数据，实际上并没有阻止表单提交。你同样可以改变

```
<input type="submit" class="form-submit" value="Submit" id="edit-submit" name="op"> 
```

成为一个`button`而不是`input`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:37:22.993

该错误是由functions.js中的“，”引起的 - 愚蠢的IE7。

# android - 无法从 Android 客户端连接到 Tridion 核心服务

> ID：14219364
> 
> 赞同：9
> 
> 时间：2013-01-08T16:17:21.267
> 
> 标签：android, tridion, tridion-2011

我正在开发一个用于连接到 Tridion 2011 SP1 核心服务的 Android 应用程序。到目前为止，我已经使用 wsclient 从核心服务 wsdl 创建了 Android WS Stub。

导入了那些允许访问所有核心服务方法的存根。

我现在可以通过 Android 应用程序对 Tridion 进行身份验证，但是一旦我尝试执行最基本的 Web 服务调用，例如`getApiVersion()`，我就会收到错误消息：

> ReflectionHelper*java.lang.NoSuchFieldException：GetApiVersionResult。

我想知道有没有其他人设法创建一个与核心服务通信的 java android 应用程序？

有趣的是，如果我将代码作为 java 应用程序运行，那么使用 wsimport stubs 一切都很好。

任何帮助表示赞赏。这里有一个代码片段供参考：

要连接到 Tridion：

```
class TridionConnect extends AsyncTask<String, Integer, String> { 
  // Called to initiate the background activity

  @Override
  protected String doInBackground(String... statuses) {  
    try {
      Authenticator.setDefault(new Authenticator() {
        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
          return new PasswordAuthentication("username", "password".toCharArray());
        }
      });

      url = new URL("http://tridion-server/webservices/CoreService2011.svc?wsdl");

      System.out.println(String.format("Get Service"));
      service = new CoreService2011();
      System.out.println(String.format("Get Client"));

      client = service.getBasicHttp();

      return "Authenticated To Tridion";
    } catch (Exception e) {
      Log.e("Authentication failure", e.toString());
      e.printStackTrace();
      return "Failed to authenticate";
    }
  }

  // Called when there's a status to be updated
  @Override
  protected void onProgressUpdate(Integer... values) {
    super.onProgressUpdate(values);
    // Not used in this case
  }

  // Called once the background activity has completed
  @Override
  protected void onPostExecute(String result) { // 
    Toast.makeText(FullscreenActivity.this, result, Toast.LENGTH_LONG).show();  
    area.setText("Authenticated to Tridion OK");
  }
} 
```

获取 ApiVersion

```
client.getApiVersion();
UserData currentUser = client.getCurrentUser();
System.out.println(String.format("'%s' %s", currentUser.getTitle(), currentUser.getId())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:03:26.773

坦率，

由于几个原因，这是不可能的。

如果您使用 wsimport 创建 coreservice 代理，它将使用 JRE 中存在的 javax 库。然而，Dalvik 只实现了 javax 库的一个子集，这意味着这种方法在 Android 环境中是不可能的。

然后我查看了用于创建代理的 Ksoap2 工具。这似乎工作正常，尽管它确实创建了一个代理，但是它与核心服务不匹配，所以我无法进行身份验证。除了检查 JRE 代理 v Ksoap2 代理之外，我没有进一步了解这种方法。他们完全不同。

在这一点上，我退后一步，喝了杯茶，重新设计了方法。

我创建了 ac# REST 服务以位于 android 应用程序和核心服务之间。

这种方法看起来有点复杂，但它提供了很多优点。在 REST 服务中可以完成很多繁琐的工作，这将比平板电脑或手机上的类似代码快得多。

其次，REST 服务与 CMS/CoreService 位于同一台服务器上，因此通信速度更快，您可以使来自 android 应用程序的 REST 请求更轻松。

我已经让应用程序达到了可以向 Tridion 进行身份验证、选择发布和组件的地步，这些组件随后以动态布局呈现，以供更新/保存/发布。

这种方法的一大缺点是 REST 服务“应该”是无状态的，因此从表面上看，您必须针对每个请求对核心服务进行身份验证。当然我不这样做，但你必须想出一些替代方法 Oauth、共享秘密等。

在最初的测试中，这种方法在安卓设备上似乎相当流畅。

# c# - WPF 数据验证中的绑定失败

> ID：14219366
> 
> 赞同：0
> 
> 时间：2013-01-08T16:17:28.613
> 
> 标签：c#, wpf, validation, binding

我正在尝试将我的控件样式中的属性绑定到控件中定义的属性。该控件继承自 TextBox，称为 ChangeTextBoxWithRangeUnits。我正在尝试从我创建的 ValidationRule 类绑定到它们。这是我试图验证文本的 Setter

```
 <Setter Property="Text">
        <Setter.Value>
            <Binding RelativeSource="{RelativeSource Self}"
                     Path="Text"
                     NotifyOnValidationError="True">
                <Binding.ValidationRules>
                    <basic:DoubleValidationRule>
                        <basic:DoubleValidationRule.MinMaxDependencyObject>
                            <basic:MinMaxDependencyObject Minimum="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:ChangeTextBoxWithRangeUnits}}, Path=MinimumValue}"
                                                          Maximum="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:ChangeTextBoxWithRangeUnits}}, Path=MaximumValue}" />
                        </basic:DoubleValidationRule.MinMaxDependencyObject>
                    </basic:DoubleValidationRule>
                </Binding.ValidationRules>
            </Binding>
        </Setter.Value>
    </Setter> 
```

我不明白为什么它说找不到源绑定。这是错误：

> System.Windows.Data 错误：4：找不到与引用'RelativeSource FindAncestor，AncestorType ='Frasca.Simplicity.Controls.UnitControls.ChangeTextBoxWithRangeUnits'，AncestorLevel ='1''的绑定源。绑定表达式：路径=最小值；数据项=空；目标元素是“MinMaxDependencyObject”（HashCode=16320155）；目标属性是“最小”（类型“双”）

**编辑完整的 XAML**

```
 <Style x:Key="ChangeTextBoxWithRangeUnits"
       TargetType="{x:Type local:ChangeTextBoxWithRangeUnits}"
       BasedOn="{StaticResource {x:Type TextBox}}">
    <Setter Property="Validation.ErrorTemplate"
            Value="{x:Null}" />
    <Setter Property="Height"
            Value="64" />
    <Setter Property="FontSize"
            Value="22" />
    <Setter Property="Margin"
            Value="5" />
    <Setter Property="Background"
            Value="LightGray" />
    <Setter Property="BorderThickness"
            Value="0" />
    <Setter Property="KeyboardNavigation.TabNavigation"
            Value="None" />
    <Setter Property="AllowDrop"
            Value="true" />
    <Setter Property="ScrollViewer.PanningMode"
            Value="VerticalFirst" />
    <Setter Property="Stylus.IsFlicksEnabled"
            Value="False" />
    <Setter Property="Text">
        <Setter.Value>
            <Binding RelativeSource="{RelativeSource Self}"
                     Path="Text"
                     NotifyOnValidationError="True">
                <Binding.ValidationRules>
                    <basic:DoubleValidationRule>
                        <basic:DoubleValidationRule.MinMaxDependencyObject>
                            <basic:MinMaxDependencyObject Minimum="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:ChangeTextBoxWithRangeUnits}}, Path=MinimumValue}"
                                                          Maximum="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:ChangeTextBoxWithRangeUnits}}, Path=MaximumValue}" />
                        </basic:DoubleValidationRule.MinMaxDependencyObject>
                    </basic:DoubleValidationRule>
                </Binding.ValidationRules>
            </Binding>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:ChangeTextBoxWithUnits}">
                <Grid>
                    <Border Name="bg"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Width="{TemplateBinding Width}"
                            CornerRadius="15"
                            SnapsToDevicePixels="true">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="3*" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="2*" />
                            </Grid.RowDefinitions>

                            <StackPanel Orientation="Horizontal"
                                        Grid.Row="0"
                                        Name="mValueStackPanel"
                                        VerticalAlignment="Bottom"
                                        HorizontalAlignment="Center">
                                <ScrollViewer x:Name="PART_ContentHost"
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                <TextBox Name="PART_UnitTextBlock"
                                         Style="{DynamicResource InlineTextBox}"
                                         Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:ChangeTextBoxWithUnits}}, Path=Units}"
                                         FontSize="14"
                                         Margin="3,0,0,0"
                                         Foreground="{TemplateBinding Foreground}" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal"
                                        Grid.Row="2"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Top">
                                <TextBlock Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:ChangeTextBoxWithUnits}}, Path=Label}"
                                           FontSize="14"
                                           Foreground="{TemplateBinding Foreground}" />
                            </StackPanel>

                            <TextBlock Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:ChangeTextBoxWithUnits}}, Path=DisabledText}"
                                       Foreground="{TemplateBinding Foreground}"
                                       Grid.Row="0"
                                       FontSize="14"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Bottom"
                                       Visibility="Collapsed"
                                       x:Name="mDisabledTextBlock" />

                            <!-- Horizontal line -->
                            <Rectangle Height="1"
                                       Margin="10,0"
                                       Grid.Row="1"
                                       Opacity="0.15"
                                       SnapsToDevicePixels="True"
                                       Fill="{TemplateBinding Foreground}" />

                            <!-- Object which flashes when the textbox is selected -->
                            <Border Grid.RowSpan="3"
                                    Background="White"
                                    Name="FlashObject"
                                    CornerRadius="15"
                                    Opacity="0">
                                <Border.Effect>
                                    <BlurEffect Radius="20" />
                                </Border.Effect>
                            </Border>

                            <!-- Object which flashes when the textbox has a validation error-->
                            <Border Grid.RowSpan="3"
                                    Grid.ColumnSpan="2"
                                    Background="Red"
                                    Name="ErrorFlashObject"
                                    CornerRadius="15"
                                    Opacity="0">
                                <Border.Effect>
                                    <BlurEffect Radius="20" />
                                </Border.Effect>
                            </Border>
                        </Grid>
                    </Border>

                    <!-- Object which glows when the user makes a change to the text value. -->
                    <Border Width="{Binding ElementName=bg, Path=ActualWidth}"
                            Height="{Binding ElementName=bg, Path=ActualHeight}"
                            CornerRadius="15"
                            Background="#FFF066"
                            Name="ChangeGlowObject"
                            Panel.ZIndex="-1"
                            Visibility="Collapsed">
                        <Border.Effect>
                            <BlurEffect Radius="20" />
                        </Border.Effect>
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="HasChangedValue"
                                       Value="True" />
                            <Condition Property="IsEnabled"
                                       Value="True" />
                        </MultiTrigger.Conditions>
                        <Setter Property="Visibility"
                                TargetName="ChangeGlowObject"
                                Value="Visible" />
                    </MultiTrigger>
                    <Trigger Property="IsEnabled"
                             Value="False">
                        <Setter Property="Background"
                                Value="#686868" />
                    </Trigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsEnabled"
                                       Value="False" />
                            <!--<Condition Property="ShowTextWhenDisabled"
                                       Value="False" />-->
                        </MultiTrigger.Conditions>
                        <Setter Property="Visibility"
                                TargetName="mDisabledTextBlock"
                                Value="Visible" />
                        <Setter Property="Visibility"
                                TargetName="mValueStackPanel"
                                Value="Collapsed" />
                    </MultiTrigger>

                    <!-- trigger to flash the object when the textbox has an error -->
                    <Trigger Property="Validation.HasError"
                             Value="True">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation BeginTime="00:00:00"
                                                     Duration="00:00:00.2"
                                                     From="0"
                                                     To="1"
                                                     Storyboard.TargetName="ErrorFlashObject"
                                                     Storyboard.TargetProperty="Opacity">
                                        <DoubleAnimation.EasingFunction>
                                            <PowerEase Power="2"
                                                       EasingMode="EaseIn" />
                                        </DoubleAnimation.EasingFunction>
                                    </DoubleAnimation>
                                    <DoubleAnimation BeginTime="00:00:00.2"
                                                     Duration="00:00:00.5"
                                                     From="1"
                                                     To="0"
                                                     Storyboard.TargetName="ErrorFlashObject"
                                                     Storyboard.TargetProperty="Opacity">
                                        <DoubleAnimation.EasingFunction>
                                            <PowerEase Power="2"
                                                       EasingMode="EaseIn" />
                                        </DoubleAnimation.EasingFunction>
                                    </DoubleAnimation>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                    </Trigger>

                    <!-- trigger to flash the object when the textbox is selected -->
                    <EventTrigger RoutedEvent="FocusManager.GotFocus">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation BeginTime="00:00:00"
                                                 Duration="00:00:00.2"
                                                 From="0"
                                                 To="1"
                                                 Storyboard.TargetName="FlashObject"
                                                 Storyboard.TargetProperty="Opacity">
                                    <DoubleAnimation.EasingFunction>
                                        <PowerEase Power="2"
                                                   EasingMode="EaseIn" />
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                                <DoubleAnimation BeginTime="00:00:00.2"
                                                 Duration="00:00:00.5"
                                                 From="1"
                                                 To="0"
                                                 Storyboard.TargetName="FlashObject"
                                                 Storyboard.TargetProperty="Opacity">
                                    <DoubleAnimation.EasingFunction>
                                        <PowerEase Power="2"
                                                   EasingMode="EaseIn" />
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:36:31.620

`RelativeSource`绑定不会走上您的 XML，而是走上*Visual Tree*。这意味着您**只能**在您绑定的元素在该树中时使用它。

在这种情况下，您`DoubleValidationRule`的*不是*UIElement，并且它*不在*可视化树中，因此`RelativeSouce`对该规则的绑定将失败。

不幸的是，在不知道你的实现或目的的情况下`DoubleValidationRule.MinMaxDependencyObject`，很难说你应该做什么。您可以通过更改验证规则的实现来绕过此限制。

一种可行的方法是您可以通过其`x:Name`值引用树中的元素

```
Minimum="{Binding MinimumValue, ElementName=TheMinimumTarget} 
```

但这可能意味着您不能使用 a 来执行此操作`Style`，因为每次使用都会（可能）绑定到表单上的不同元素。

* * *

看着你的编辑……笏？您要将控件的文本绑定到控件的文本以附加验证规则吗？那是……我什至没有。

我建议对控件进行子类化以添加验证逻辑（例如，覆盖 Text 依赖属性的属性元数据），然后将您的模板应用于这种新类型。

# javascript - 没有验证码的 Marketo 垃圾邮件过滤器

> ID：14219367
> 
> 赞同：3
> 
> 时间：2013-01-08T16:17:28.783
> 
> 标签：javascript, filter, spam

下面的帮助文章概述了 Marketo 垃圾邮件过滤器，当在 Marketo 登录页面 (LP) 上使用表单时默认包含该过滤器。是否有针对 Marketo LP 之外的表单的这种垃圾邮件过滤器的实现？

[Marketo 垃圾邮件过滤器](https://community.marketo.com/MarketoArticle?id=kA050000000KyqZ&src=comm)- 请注意，它位于 Marketo 的登录保护社区部分，因此您需要登录才能查看此链接。

我们网站上的表格需要包含在页面中，因此仅使用 LP 对我们不起作用。在我们的页面中使用 iframed LP 表单会增加我们页面的加载时间以及 Google Analytics 中的重复错误，表明我们将自己引向我们的网站。同样作为条件，我们不想使用验证码，因为它对表单提交的数量有负面影响。

我们的主要问题不是提交空白表单字段。我们通常每周收到 10-15 个垃圾邮件表单，但偶尔会在一个晚上增加到 10 个。典型的垃圾邮件表单具有公司名称“google”和包含废话/链接段落的评论。

我已经做了很多努力来阻止这个问题，但事实证明这是无用的。

如果公司名称等于“google”，我试图有条件地阻止提交，但由于某种原因，这仍然提交。在针对此约束进行测试之前，我删除了空格并将值小写，但表单继续提交。我无法在前端复制可能发生这种情况的场景，因此我不确定如何解决此问题。

我在这里尝试的第二种方法是我实现了一个[蜜罐方法](http://haacked.com/archive/2007/09/10/honeypot-captcha.aspx)，它有一个应该保持空白的隐藏字段，但垃圾邮件机器人会填写它。很简单，如果此字段包含任何内容，请不要提交。

这是我当前正在运行的代码，它是“提交”按钮 onclick 事件函数

```
 function formSubmit(elt) {
      var corp = document.getElementById('Corporate').value;
      var com = document.getElementById('Company').value.toLowerCase();
      if(com.indexOf("google") >= 0){
         return false;
      }
      else if(corp.length != 0){
        return false;
      }
      else{
        return Mkto.formSubmit(elt);
      }
  } 
```

有没有人遇到过这个问题或知道潜在的解决方案？我已经提交了一张支持票，但我想我也会在这里发帖，看看社区是否知道这个问题的解决方案。

感谢您的任何帮助，您可以提供。

# c# - 使用 RedirectToAction 时，它不会保留我的模型

> ID：14219377
> 
> 赞同：0
> 
> 时间：2013-01-08T16:17:56.353
> 
> 标签：c#, asp.net-mvc-3

当我捕获一个 HttpPost 时，我正在重定向到另一个 ResultAction。它保留了我的 int 值，但不是我的列表值。似乎无法弄清楚为什么。如果我收到页码 = 2、searchAction = 3 和 clearResults（一个列表）的帖子，其中包含 25 个项目。它返回了我对帖子的期望，但是当我到达 Details ActionResult 时，它只保留 pageNumber 和 searchAction，而不是 clearResults 列表。奇怪的是，列表不是空的，它只是计数为 0。

模型：

```
public class ClearanceListViewModel
{
    public ClearanceListViewModel()
    {
        this.pageNumber = 1;
        this.searchAction = 1;
        this.lastPage = false;
    }

    public ClearanceListViewModel(int pageNumber, int searchAction)
    {
        this.pageNumber = pageNumber;
        this.searchAction = searchAction;            
    }

    public int pageNumber { get; set; }
    public int searchAction { get; set; }
    public List<ClearanceViewModel> clearanceResults { get; set; }
    public bool lastPage { get; set; }
} 
```

在控制器中发布：

```
 [HttpPost]
    public ActionResult Details(ClearanceListViewModel model, FormCollection collection)
    {
        ClearanceListViewModel cModel = new ClearanceListViewModel();
        cModel = model;
        cModel.clearanceResults = model.clearanceResults;
        // do something
        return RedirectToAction("Details", cModel);
    } 
```

控制器中的操作结果：

```
public ActionResult Details(ClearanceListViewModel model)
    {

        DataTable dt = new DataTable();
        List<ClearanceViewModel> clearanceList = new List<ClearanceViewModel>();

        //save any changes
        if (model.clearanceResults != null)
        {
            ClearanceSave(model);
            model.clearanceResults = null;
        }

        string inQuery = "select sku, qty from products";

        // call the query
        dt = AS400DAL.Instance.ExecuteQueryAsDataTable(inQuery);

        model = Utility.Utility.ProcessClearanceSkus(dt, model);
        return View("Index",model);
    } 
```

任何输入将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:19:37.503

研究 的重载[`RedirectToAction`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)。没有一个允许模型的传递。通常，您的帖子会修改数据库，然后您会重定向到从数据库重新创建模型的操作。因为重定向是在客户端发生的，所以重定向的请求与发出重定向的帖子完全分开，因此模型不会持久化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:23:58.767

使用会话存储模型，

你可以做：

```
Session["mymodel"] = model; 
```

然后在您的重定向之后，通过执行从会话中获取模型

```
ClearanceListViewModel newModel = (ClearanceListViewModel)Session["mymodel"]; 
```

这将允许您成功通过模型

# android - 每当尝试从收件箱字段集中获取消息时失败

> ID：14219381
> 
> 赞同：1
> 
> 时间：2013-01-08T16:18:11.453
> 
> 标签：android, database, inbox

我正在尝试查看按发件人号码分组的收件箱。为此，我首先从收件箱中找到所有消息到他们的号码，然后当他们点击特定项目时，他将看到他们之间的对话。但是得到一个错误。

这是我的代码：

```
public void initialize() {
        ContentResolver contentResolver = getContentResolver();

        Cursor cursor = contentResolver.query(Uri.parse("content://sms/inbox"),
                null, null, null, null);
        startManagingCursor(cursor);

        int indexBody = cursor.getColumnIndex(SmsReceiver.BODY);
        int indexAddr = cursor.getColumnIndex(SmsReceiver.ADDRESS);
        int i = 0, flag = 0;

        if (indexBody < 0 || !cursor.moveToFirst())
            return;

        smsList.clear();

        do {
            // int cursorPostion = cursor.getPosition();

            String address;
            String msgStr = cursor.getString(indexBody);
            String senderNumber = cursor.getString(indexAddr);
            String name = cursor.getString(cursor
                    .getColumnIndex(PhoneLookup.DISPLAY_NAME));

            if (name != null) {
                address = name;
            } else {
                address = senderNumber;
            }
            flag = 1;
            for (int j = 0; j < addressUniqueness.length; j++) {
                if (addressUniqueness[j].contentEquals(address)) {
                    flag = 0;
                    break;
                }
            }

            if (flag == 1) {
                addressUniqueness[i] = address;
                i++;

                String str = "Sender: " + address + "\n";
                smsList.add(str);

            }

            // TODO Auto-generated catch block

        } while (cursor.moveToNext());
        // cursor.moveToNext();
        // }

        ListView smsListView = (ListView) findViewById(R.id.SMSList);
        smsListView.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, smsList));
        smsListView.setOnItemClickListener(this);
    } 
```

收到此错误：

```
01-08 22:09:03.034: E/AndroidRuntime(650): FATAL EXCEPTION: main
01-08 22:09:03.034: E/AndroidRuntime(650): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.InboxList}: java.lang.IllegalStateException: get field slot from row 0 col -1 failed
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.os.Looper.loop(Looper.java:123)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-08 22:09:03.034: E/AndroidRuntime(650):  at java.lang.reflect.Method.invokeNative(Native Method)
01-08 22:09:03.034: E/AndroidRuntime(650):  at java.lang.reflect.Method.invoke(Method.java:507)
01-08 22:09:03.034: E/AndroidRuntime(650):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-08 22:09:03.034: E/AndroidRuntime(650):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-08 22:09:03.034: E/AndroidRuntime(650):  at dalvik.system.NativeStart.main(Native Method)
01-08 22:09:03.034: E/AndroidRuntime(650): Caused by: java.lang.IllegalStateException: get field slot from row 0 col -1 failed
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.database.CursorWindow.getString_native(Native Method)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.database.CursorWindow.getString(CursorWindow.java:329)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.database.CursorWrapper.getString(CursorWrapper.java:135)
01-08 22:09:03.034: E/AndroidRuntime(650):  at com.InboxList.initialize(InboxList.java:153)
01-08 22:09:03.034: E/AndroidRuntime(650):  at com.InboxList.onCreate(InboxList.java:74)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-08 22:09:03.034: E/AndroidRuntime(650):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-08 22:09:03.034: E/AndroidRuntime(650):  ... 11 more 
```

# c++ - 未分配被释放的指针 - 如何调试？

> ID：14219387
> 
> 赞同：0
> 
> 时间：2013-01-08T16:18:26.273
> 
> 标签：c++, debugging, gdb, malloc

我收到运行时错误

```
malloc: *** error for object 0x10070c5c0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

使用以下堆栈跟踪：

![在此处输入图像描述](../Images/99cbf7acec29d0fb21a52bcd41b85c08.png)

这告诉我析构函数`~Clustering`和`~NodeMap`（第一个是空存根，第二个调用`delete[]`）中出现问题，但不是“被释放的指针”是哪个。我怎样才能找到这个？

另外，在哪里`malloc_error_break`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:31:05.750

您是否有复制分配的内存的复制构造函数？如果没有复制构造函数，或者如果有但不复制分配的内存，那么两个对象的析构函数会尝试释放相同的内存位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:35:20.727

> 这告诉我析构函数`~Clustering`和`~NodeMap`（第一个是空存根，第二个调用`delete[]`）中出现问题，但不是“被释放的指针”是哪个。

仅仅因为`~Clustering`是“一个空存根”并不意味着它什么都不做。在执行了析构函数的主体之后，析构函数为每个直接的非变体非静态数据成员调用析构函数。显然，您的类`Clustering`包含 type 的数据成员`NodeMap<long,long>`。

> 我怎样才能找到这个？

你的类`NodeMap<long,long>`包含多少个分配的数组？如果只有一个，那就是一个。如果有多个，请设置一个断点，`~NodeMap`以便您可以逐步执行。

# css - 绝对 div 的 jQuery UI Droppable 块

> ID：14219404
> 
> 赞同：3
> 
> 时间：2013-01-08T16:19:35.307
> 
> 标签：css, jquery-ui

jquery ui droppable 如何被覆盖的 div 阻止？

请参阅此示例：http: [//jsfiddle.net/JSFU4/3/](http://jsfiddle.net/JSFU4/3/)。一个红色的 div 覆盖了可放置区域；然而，当拖到这个区域的顶部时，droppable 仍然被激活。如何避免这种情况？

html

```
<div>
  <div class="drop">drop here</div>
</div>
<div>
  <div class="drag">drag me</div>
</div>
<div class="overlay">i want to block the droppable</div> 
```

CSS

```
.drag {
  display: inline-block;
  width: 100px;
  height: 100px;
  border: 1px solid black;
  background-color: lightblue;
  z-index: 1;  
}
.drop {
  display: inline-block;
  border: 1px dotted black;
  width: 200px;
  height: 200px;
}
.drop-hover {
  background-color: grey;
}
.overlay {
  position: absolute;
  width: 300px;
  height: 100px;
  top: 50px;
  background-color: red;
  border: 1px solid black;
} 
```

JS

```
$(function () {
  $('.drag').draggable();
  $('.drop').droppable({
    tolerance: 'pointer',
    hoverClass: 'drop-hover'    
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:31:56.507

我不认为有什么开箱即用的东西可以实现这一目标。您需要进行某种碰撞检测，然后相应地执行您的逻辑。我已经为你做了一个 POC。

[**演示**](http://jsfiddle.net/JSFU4/6/)

```
var drag = $('.drag');
var overlay = $('.overlay');

$(function () {
  $('.drag').draggable();
  $('.drop').droppable({
    tolerance: 'pointer',
    hoverClass: 'drop-hover'
  });
});

var int = self.setInterval(function () {
  if (overlaps(drag, overlay)) {
    $('.drop').css('visibility', 'hidden');
  } else {
     $('.drop').css('visibility', 'visible');
  }
}, 100);

var overlaps = (function () {
  function getPositions(elem) {
    var pos, width, height;
    pos = $(elem).position();
    width = $(elem).width() / 2;
    height = $(elem).height();
    return [[pos.left, pos.left + width], [pos.top, pos.top + height]];
  }

  function comparePositions(p1, p2) {
    var r1, r2;
    r1 = p1[0] < p2[0] ? p1 : p2;
    r2 = p1[0] < p2[0] ? p2 : p1;
    return r1[1] > r2[0] || r1[0] === r2[0];
  }

  return function (a, b) {
    var pos1 = getPositions(a),
      pos2 = getPositions(b);
    return comparePositions(pos1[0], pos2[0]) && comparePositions(pos1[1], pos2[1]);
  };
})(); 
```

上面的代码检测两个 DIV 之间的冲突并返回`true`or `false`。

# iphone - UIView左右阴影

> ID：14219412
> 
> 赞同：7
> 
> 时间：2013-01-08T16:19:52.793
> 
> 标签：iphone, ios, calayer, shadow

嗨，我喜欢将 CALayer 阴影添加到视图中，其中阴影位于视图的左侧和右侧，最简单的方法是：

```
someView.layer.shadowColor = [[UIColor blackColor] CGColor];
someView.layer.shadowOffset = CGSizeMake(0.0f,0.0f);
someView.layer.shadowOpacity = 1.0f;
someView.layer.shadowRadius = 10.0f;
someView.layer.shadowPath = [[UIBezierPath bezierPathWithRect:someView.bounds] CGPath]; 
```

但是当我增加 shadowRadius 它看起来不太好时，我会添加一个更大的阴影，就像一个阴影一样。我怎样才能制作出左右两边都好看的阴影。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-08T16:34:58.330

我认为 10 是一个相当大的阴影半径，尝试 3 或 4 代替，不透明度我通常使用 0.7：

```
someView.layer.shadowColor = [[UIColor blackColor] CGColor];
someView.layer.shadowOffset = CGSizeMake(0.0f,0.0f);
someView.layer.shadowOpacity = 0.7f;
someView.layer.shadowRadius = 4.0f; 
```

如果您只想要左右阴影，则在顶部和底部插入矩形，以便顶部和底部阴影隐藏在您的视图后面：

```
CGRect shadowRect = CGRectInset(someView.bounds, 0, 4);  // inset top/bottom
someView.layer.shadowPath = [[UIBezierPath bezierPathWithRect:shadowRect] CGPath]; 
```

我不确定这是否是你想要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-06T09:20:52.143

**迅捷3.0版**

```
imageView.layer.shadowOpacity = 0.8
imageView.layer.shadowOffset = CGSize(width: 0, height: 3)
imageView.layer.shadowRadius = 4.0

let shadowRect: CGRect = imageView.bounds.insetBy(dx: 0, dy: 4)
imageView.layer.shadowPath = UIBezierPath(rect: shadowRect).cgPath 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T13:46:42.147

progrmr 的回答非常有帮助，干杯！

我制作了一个滑出式菜单，但我的 VC 周围出现阴影并破坏了导航栏。原来我不得不插入阴影层。

**这是我使用 swift 的解决方案：**

```
rightViewController!.view.layer.shadowOpacity = 0.8
rightViewController!.view.layer.shadowOffset = CGSizeMake(0, 3)
rightViewController!.view.layer.shadowRadius = 4.0

let shadowRect: CGRect = CGRectInset(rightViewController!.view.bounds, 0, 4);  // inset top/bottom
rightViewController!.view.layer.shadowPath = UIBezierPath(rect: shadowRect).CGPath 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-05T18:24:26.297

我创建了一个可以在顶部/底部或左/右使用的阴影，完全没有偏见。如果选择上/下，左/右将不会出现阴影，依此类推。我希望我有所帮助。这是代码：

```
 import UIKit

class ViewController: UIViewController {

     override func viewDidLoad() {
        super.viewDidLoad()

        let imgView = UIImageView(frame: CGRect(x: self.view.bounds.midX - 150, y: self.view.bounds.midY - 150, width: 300, height: 300))

        imgView.contentMode = .scaleToFill
        imgView.image = UIImage(named: "name image")

        self.view.addSubview(imgView)
        //You can put left/right or top/bottom
        imgView.addShadow(sides: .leftRight, constant: 10, alpha: 5)

     }

}

extension UIView{

    func addShadow(sides: Sides, constant: Int, alpha: Int){
        if(constant > 0 && alpha > 0){
        switch sides {
            case .leftRight:

                let view = UIView(frame: CGRect(x: -CGFloat(constant), y: 0, width: self.bounds.width + CGFloat((constant * 2)), height: self.bounds.height))
                self.addSubview(view)

                addMask(sides: .leftRight, view: view, constant: constant, shadowRadius: alpha)

            case .topBottom:

                let view = UIView(frame: CGRect(x: 0, y: -CGFloat(constant), width: self.bounds.width , height: self.bounds.height + CGFloat(constant * 2)))
                self.addSubview(view)

                addMask(sides: .topBottom, view: view, constant: constant, shadowRadius: alpha)

            }
        }
    }

    private func addMask(sides:Sides, view: UIView, constant: Int, shadowRadius:Int){
        let mutablePath = CGMutablePath()
        let mask = CAShapeLayer()

        switch sides {
        case .leftRight:

            mutablePath.addRect(CGRect(x: -CGFloat(constant), y: 0, width: view.bounds.width, height: view.bounds.height))

            mutablePath.addRect(CGRect(x: CGFloat(constant) , y: 0, width: view.bounds.width , height: view.bounds.height))

        case .topBottom:

            mutablePath.addRect(CGRect(x: 0, y: -CGFloat(constant), width: view.bounds.width, height: view.bounds.height))

            mutablePath.addRect(CGRect(x: 0, y: CGFloat(constant) , width: view.bounds.width , height: view.bounds.height))
        }

        mask.path = mutablePath

        mask.fillRule = CAShapeLayerFillRule.evenOdd
        mask.fillColor  = UIColor(white:1.0, alpha: 0.2).cgColor
        view.layer.mask = mask
        view.layer.addSublayer(mask)
        mask.shadowColor = UIColor.black.cgColor
        mask.shadowRadius = CGFloat(shadowRadius)
        mask.shadowOpacity = 1.0
        mask.shadowOffset = CGSize(width: 0, height: 0)

    }
}

enum Sides{
    case leftRight
    case topBottom
} 
```

你只需要调用扩展 UIView，它有 addShadow() 函数并传递你想要的参数。

[![在此处输入图像描述](../Images/b03011c14e9ee4a49dca1d6e6da6c3ba.png)](https://i.stack.imgur.com/MyR4F.png)

[![在此处输入图像描述](../Images/11cadb1594ecc9919e55a96b0987e353.png)](https://i.stack.imgur.com/ZpB0M.png)

# c - 错误：二进制 + char * 的操作数无效

> ID：14219418
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:20:06.523
> 
> 标签：c, char

> **可能重复：**
> [C 字符串连接](https://stackoverflow.com/questions/308695/c-string-concatenation)

有以下代码：

```
 char *doencode(const unsigned char *input, int length)
        {
        //irrelevant code
        }

        char *fname, *lname;
        char *encoded, *name;

        name = fname + "|" + lname;
        encoded = doencode(name, 30); 
```

我得到这个错误：无效的操作数到二进制+

***如何结合 fname & | &lname?***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T16:23:11.800

您不能连接`char*`and `char[]`(the `"|"`) 或 using 的任何排列`+`。使用[`strncat()`](http://en.cppreference.com/w/c/string/byte/strncat)or[`snprintf()`](http://en.cppreference.com/w/c/io/fprintf)代替并确保目标缓冲区有足够的内存来存储最终字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T16:22:51.693

C不像java脚本。这在 c 中是不正确的：

```
name = fname + "|" + lname; 
```

你可以这样做：

```
sprintf(name,"%s|%s", fname, lname); 
```

`name`指针应该指向足够的内存空间。

```
name = malloc(strlen(fname)+strlen(lname) + 2); 
```

+2: +1 for`"|"`和 +1 for`null`在字符串的末尾

例子

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main()
{
    char *fname, *lname, *name;

    printf("Enter your first name: ");
    scanf ("%ms", &fname);

    printf("Enter your last name: ");
    scanf (" %ms", &lname);

    name = malloc(strlen(fname)+strlen(lname) + 2);
    sprintf(name,"%s|%s", fname, lname);

    printf("name = %s\n",name);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:23:05.593

您不能在 C 中简单地将字符串相加，因为字符串实际上只是指向字符数组的指针。您需要做的是为新字符串分配存储空间并将每个字符的两个字符串复制到其中。

# text - 如何在屏幕代码中设置文本控件的内容

> ID：14219422
> 
> 赞同：0
> 
> 时间：2013-01-08T16:20:11.013
> 
> 标签：text, controls, visual-studio-lightswitch

我简直不敢相信这有多难。

我想编辑带有类型文本的控件的内容。我正在使用 lightswitch visual studio 2012。我想在屏幕代码中更改它（所以程序化）。

我给控件起了名字：“消息”。

现在，我正在尝试`this.FindControl("Message").`，但似乎没有任何属性可以调用来设置内容。我也不能将控件转换为正确的类型文本。甚至 Text 似乎也不是有效的类名。

有关如何设置此控件的内容的任何帮助？

**编辑：**我应该拍摄`ControlAvailable`活动并尝试在那里修改内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:28:16.733

实际上，试图在屏幕上设置控件的值是**错误**的做法。

在 LightSwitch 中，每个控件都绑定到一个属性（通常是实体的属性，但也可能是屏幕属性），因此设置该属性的值将更新控件。

因此，如果您有一个绑定到实体的详细信息屏幕（我们称之为*ClientProperty*），并且您有一个*TextBox*控件（我们称之为*MessageControl*）绑定到*ClientProperty*的*Message*属性，那么您需要执行所有代码来更改该值是：

```
Me.ClientProperty.Message = "This is a message" 
```

相反，如果您有一个绑定到屏幕属性（称为*Message ）的**TextBox*控件（同样，我们称之为*MessageControl* ） ，您的代码就像这样简单：

 *```
Me.Message = "This is another message" 
```

您尝试这样做的方式似乎“很难”，因为它不应该那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:19:10.057

使用 this.FindControl("Message")，您走在了正确的轨道上。找到它后设置属性的方法如下：

```
this.FindControl("Message").SetProperty("propertyToSet", [new value]) 
```*

# sql - 将列追加到查询结果

> ID：14219423
> 
> 赞同：1
> 
> 时间：2013-01-08T16:20:13.900
> 
> 标签：sql, ms-access

我有以下 Access 2007 表：

```
Company | Item | Quantity
-------------------------
AA      | Ia   | 2
BB      | Ib   | 3
CC      | Ia   | 4
AA      | Ib   | 5 
```

我想创建一个具有以下结果的查询

```
Company | Ia  | Ib
------------------ 
AA      | 2   | 5
BB      |     | 3
CC      | 4   | 
```

但我现在真的有点迷路了。

任何帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:30:48.000

这是一个典型的交叉表查询：

```
TRANSFORM Sum(XTabTable.Quantity) AS SumOfQuantity
SELECT XTabTable.Company
FROM XTabTable
GROUP BY XTabTable.Company
PIVOT XTabTable.Item; 
```

它可以使用 Access 查询向导或查询设计窗口构建。

![xtab 查询](../Images/a21f2eef097caa29fe051e99ae0821db.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:41:17.863

您可以构建自己的数据透视表/交叉表的另一种方法。它完全符合 ANSI 标准。因此，对于我使用的示例`SQL Server`，它与 MS ACCESS SQL 更加内联。请忽略小提琴中的其他表...

## * [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/0bd13/11)

询问：

```
Select
 company,
 'Ia'=Sum(Case When item = 'Ia' Then Quantity Else 0 End),
 'Ib'=Sum(Case When item = 'Ib' Then Quantity Else 0 End)
 From mytable
 Group By company
 ; 
```

**编辑：** MS Access 不支持`CASE`. 所以我们将它*短路*`IIF`。

```
 Select
 company,
 Sum(IIF(item = 'Ia', Quantity, 0)) AS Ia,
 Sum(IIF(item = 'Ia', Quantity, 0)) AS Ib
 From mytable
 Group By company
 ; 
```

结果：

```
 COMPANY     IA  IB
    AA          2   5
    BB          0   3
    CC          4   0 
```

当然，这仅在您拥有少量`items`. 由于您使用的是 MS Acess，您不妨使用它的内置功能 :) 就像 @Remou 指出的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:05:25.620

如果您决定将数据存储在 SQL Server 数据库中，您可以使用以下方法：

```
Declare @columns Nvarchar(Max), @SQL Nvarchar(Max)

With    DistinctCols As
(
        Select  Distinct Item
        From    AccessTable
)
Select  @columns = Coalesce(@columns + ',','') + '[' + Item + ']'
From    DistinctCols
Order   By Item

Select  @SQL = 'Select  Company, ' + @columns + '
                From    AccessTable at
                Pivot   (Sum(Quantity) For Item In (' + @columns + ')) p'

Exec    sp_executeSQL @SQL 
```

# validation - CakePHP 中需要的规则嵌套

> ID：14219425
> 
> 赞同：2
> 
> 时间：2013-01-08T16:20:16.987
> 
> 标签：validation, cakephp

我正在学习 CakePHP 教程，我正处于 Simple Authorization 应用程序的开始阶段。相对于 users 表的模型，有以下代码：

```
public $validate = array(
         ’username’ => array(
              ’required’ => array(
                    ’rule’ => array(’notEmpty’),
                    ’message’ => ’A username is required’
         )
), 
```

我浏览了 Wiki 中的一些数据验证帮助，但我不明白为什么“规则”数组嵌套在“必需”数组下？我知道 required 是一个单独的函数，关于正在保存的数据块中是否存在同名的数组键，所以它肯定会被它后面的“notEmpty”规则排除。那时我猜它只是一个规则名称，并没有真正改变任何东西。我错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:39:14.143

不知道该怎么回答，但是，不，你没有错。您的示例中出现的“必需”只是规则的名称。

就个人而言，我倾向于用数字来命名我的规则以避免这种混淆。

```
public $validate = array(
  'username'=>array(
    'one'=>array(
      'rule'=>'notEmpty',
      'message'=>'Please enter a username',
      'required'=>true
    )
  ),
  'email'=>array(
    'rule'=>'notEmpty',
    'message'=>'Please enter an email address',
    'required'=>true
  )
); 
```

这两个规则是相同的，但第一个允许添加多个规则。

# sql - SQL 计算重叠集的不同元素

> ID：14219431
> 
> 赞同：3
> 
> 时间：2013-01-08T16:20:36.220
> 
> 标签：sql, count, distinct, set, overlapping

我想计算两组不同元素的数量。准确地说，这是集合 1 和集合 2 的并集。

如何将以下伪 SQL 格式化为正常运行的 SQL

```
select COUNT(set1 union set2) from table1` 
```

**EDIT** set1 和 set2 是 table1 的列

这是一个简短的例子：

在一个班级中设置 1 名学生：

```
Bubba, Jody, Rex, Sandy, Jules 
```

在一个班级中设置 2 名学生：

```
Jody, Rob, Horace, Thor, Rex 
```

我想要两个班级的学生人数不同：

```
Bubba, Jody, Rex, Sandy Jules, Rob, Horace, Thor 
```

所以，工会会做的，我可以数数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:27:17.930

```
Select Count(column_alias) From
( Select set1 As column_alias From Table1 
Union 
Select set2 From Table1 ) 
```

联盟将使元素变得独一无二。这仅在列数据类型兼容时才有效。如果需要，您可以修改子查询以包含 Where 条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:55:50.923

假设列中为 1 表示在集合中，NULL 表示不在集合中

```
select count(*)
from Table1
where set1 is not null or set2 is not null 
```

如果包含在集合中的表示方式不同，则重新编写 where 子句。

# php - PHP 严格标准：从空值创建默认对象

> ID：14219434
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:20:44.947
> 
> 标签：php, standards, strict

我的 cronjobs 报告中有这个错误

PHP 严格标准：从第 28 行的 /home/admin/domains/DOMAIN.com/public_html/birthdate.php 中的空值创建默认对象严格标准：从 /home/admin/domains/DOMAIN.com 中的空值创建默认对象/public_html/birthdate.php 第 28 行

和我的代码：

```
28-   $D->user_birthdate = array();
29-   $latest_members_arr = $network->get_user_birthdate();
30-   foreach($latest_members_arr as $usr)
40-   {
41-     $D->user_birthdate[]    = $network->get_user_by_id($usr);
42-   }
43-    $num    = 30;
44-   $D->user_birthdate    = array_slice($D->user_birthdate, 0, $num); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:26:08.767

在代码的顶部添加以下行。

```
$D =  new stdClass();
$D->user_birthdate = array(); 
```

你得到错误，因为`$D`不存在。您应该创建一个新的 StdClass 对象。stdClass 是 php 的通用空类。[阅读更多](http://krisjordan.com/dynamic-properties-in-php-with-stdclass)。

鉴于如果您的 $D 对象具有特定类型（对象类型），请确保您使用它。例如：

```
$D =  new dClass(); 
```

这`$D`是一个类的对象`dClass()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:24:42.400

可能 $D 为空？改用数组：

```
$birth_dates = array();
$latest_members_arr = $network->get_user_birthdate();
foreach($latest_members_arr as $usr)
{
   birth_dates[]    = $network->get_user_by_id($usr);
} 
```

或者，考虑在 $D 为空的情况下使用标准类，将其添加到代码的顶部：

```
if (empty($D)) {
$D = new stdClass();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:24:44.357

`$D`没有定义。必须使用`new`关键字（或从先前实例化的对象复制）将其设置为某些值，然后才能分配值。

# email - Camel Mail - 动态电子邮件主题 - 无法更改标题

> ID：14219435
> 
> 赞同：1
> 
> 时间：2013-01-08T16:20:44.967
> 
> 标签：email, dynamic, header, apache-camel, subject

显然这是在 Java 中。我已经设置了一个到 SMTP 路由的骆驼路由，但我希望邮件的主题是动态的，并且基于它收到的输入消息

例如主题“第 52 行已关闭”

电子邮件的正文很好，看起来很完美。但我似乎无法设置电子邮件的主题，它总是被接收为“无主题”

在我使用的骆驼处理器中

```
Message msg = exchange.getOut();

// This works perfectly
msg.setBody( "Some body stuff " + lineProblem + " and some other details"); 

// PROBLEM - This has no effect (the order of the statements has no effect)
msg.setHeader( "Subject", " line " + lineProblem + " is down" ); 
```

但它总是在收件箱中收到“无主题”

我可以看到在端点级别和路由级别设置主题的其他方法，但是当然这些都不会让我在消息级别设置主题

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:22:25.083

本质上，每个 Exchange 都有一个主题，因此如果您需要在每封电子邮件上使用不同的主题，请使用拆分器将每封电子邮件作为单独的 Exchange 单独处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:10:09.030

尝试`exchange.getIn().setHeader(...)`作为 Producer/Binding 迭代 IN 消息头以填充主题等。

有关更多信息，请参阅 MailBinding.appendHeadersFromCamelMessage() 代码：

[https://svn.apache.org/repos/asf/camel/trunk/components/camel-mail/src/main/java/org/apache/camel/component/mail/MailBinding.java](https://svn.apache.org/repos/asf/camel/trunk/components/camel-mail/src/main/java/org/apache/camel/component/mail/MailBinding.java)

# web-services - 带有 JSON / Heroku / MongoDB 的简单 Web 服务

> ID：14219444
> 
> 赞同：1
> 
> 时间：2013-01-08T16:21:17.313
> 
> 标签：web-services, mongodb, heroku

我想创建一个可以接受 JSON 数据并存储该数据的简单 Web 服务。我有大约 50 个用户，所以数据负载永远不会很高。我想我可以使用一个测功机，这是免费定价模型。

在网上搜索后，我认为 heroku 和 mongoDb 是我应该使用的。由于我从未使用过其中任何一种，因此我希望得到一些反馈，如果这是正确的选择，或者是否可能以我想使用它的方式进行。

该服务将只接收小而简单的 JSON 对象并存储它们。稍后我会检索并删除它们。

iOS App 有 JSON 数据 -> 将该数据发送到我的服务。-> 我的服务存储数据。-> 我获取数据并删除数据。

我在正确的轨道上吗？？我几乎没有/甚至没有做过关于 iPhone 的网络交流，所以请耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:38:08.580

您可以使用 Rails 和 Postgres 后端轻松完成此操作，当然它也可以安装在 Heroku 上。

就像为您需要的每个类运行一个脚手架构建器一样简单：

```
$rails generate scaffold YourClass attribute1:string attribute2:integer attribute3:boolean
$rake db:migrate 
```

推送到 Heroku，您将能够通过将 .json 附加到页面名称来访问 JSON。例如，如果您的网站名为**Shining-guitar-311.herokuapp.com**，那么索引页面将为**Shining-guitar-311.herokuapp.com/your_classes.html**。

要将页面降为 JSON，您可以访问： **shining-guitar-311.herokuapp.com/your_classes.json**

如果你使用 Rails 默认值，它真的就这么简单。您可能还想应用一些安全性或创建其他类，但这将使您入门。

Heroku 有一篇关于将 Rails 应用程序发布到其基础架构的好文章： [https ://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3)

# javascript - 使用 HTML 中的页面图块创建网站

> ID：14219447
> 
> 赞同：0
> 
> 时间：2013-01-08T16:21:31.100
> 
> 标签：javascript, html

如何使用 HTML5 和 JavaScript 创建一个网站，让您可以概览多个网站？

显示的网页应该在屏幕上显示为图块。因此它们需要缩小显示，就像我截屏并缩小尺寸时一样......

浏览器窗口应如下所示：

```
++==============================================================++
|| shrinked website a | shrinked website b | shrinked website c ||
||--------------------+--------------------+------------------- ||
|| shrinked website d | shrinked website e | shrinked website f ||
||--------------------+--------------------+------------------- ||
|| shrinked website g | shrinked website h | shrinked website i ||
++==============================================================++ 
```

我不想使用 iframe，因为我认为它们无法缩小尺寸。瓷砖也不必响应。

这有可能以某种方式实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:24:30.603

您将不得不使用`iframe`和使用 css 来定位每一帧。关于 iframe 标签的更多信息可以在这里找到[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

注意：加载 9 个 iframe，每个 iframe 都包含一个完整的网页，这确实会减慢页面速度，并给用户带来糟糕的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:55:35.227

创建要显示为图块的页面屏幕截图的解决方案在以下文章中：

[使用 PHP 的网站截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

里面还有一个描述如何不使用**PHP**来做到这一点，而只使用**HTML5 和 JavaScript**

然后他们只需要缩小尺寸并使用 JavaScript 填充。

谢谢你的评论，方格

# excel - Excel VBA代码将特定字符串复制到剪贴板

> ID：14219455
> 
> 赞同：53
> 
> 时间：2013-01-08T16:21:55.300
> 
> 标签：excel, clipboard, vba

我正在尝试向电子表格添加一个按钮，单击该按钮会将特定的 URL 复制到我的剪贴板。

我对 Excel VBA 有一点了解，但已经有一段时间了，我很挣扎。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2014-08-16T02:29:54.823

编辑 - MSForms 已弃用，因此您不应再使用我的答案。而是使用这个答案：[https ://stackoverflow.com/a/60896244/692098](https://stackoverflow.com/a/60896244/692098)

我在这里留下我的原始答案仅供参考：

```
Sub CopyText(Text As String)
    'VBA Macro using late binding to copy text to clipboard.
    'By Justin Kay, 8/15/2014
    Dim MSForms_DataObject As Object
    Set MSForms_DataObject = CreateObject("new:{1C3B4210-F441-11CE-B9EA-00AA006B1A69}")
    MSForms_DataObject.SetText Text
    MSForms_DataObject.PutInClipboard
    Set MSForms_DataObject = Nothing
End Sub 
```

用法：

```
Sub CopySelection()
    CopyText Selection.Text
End Sub 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2020-03-28T01:28:01.323

要向 Windows 剪贴板写入文本（或从中读取文本），请使用此 VBA 函数：

```
Function Clipboard$(Optional s$)
    Dim v: v = s  'Cast to variant for 64-bit VBA support
    With CreateObject("htmlfile")
    With .parentWindow.clipboardData
        Select Case True
            Case Len(s): .setData "text", v
            Case Else:   Clipboard = .getData("text")
        End Select
    End With
    End With
End Function 
```

* * *

```
'Three examples of copying text to the clipboard:
Clipboard "Excel Hero was here."
Clipboard var1 & vbLF & var2
Clipboard 123

'To read text from the clipboard:
MsgBox Clipboard 
```

这是一个不使用 MS Forms 或 Win32 API 的解决方案。相反，它使用 Microsoft HTML 对象库，该库快速且无处不在，并且不会像 MS Forms 那样被 Microsoft 弃用。而且这个解决方案尊重换行。此解决方案也适用于 64 位 Office。最后，此解决方案允许写入和读取 Windows 剪贴板。此页面上的其他解决方案都没有这些好处。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-01-08T16:33:20.403

最简单的（非 Win32）方法是将 UserForm 添加到您的 VBA 项目（如果您还没有），或者添加对*Microsoft Forms 2 Object Library*的引用，然后从工作表/模块中您可以简单地：

```
With New MSForms.DataObject
    .SetText "http://zombo.com"
    .PutInClipboard
End With 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-09T01:02:03.633

如果 url 在工作簿的单元格中，您可以简单地从该单元格复制值：

```
Private Sub CommandButton1_Click()
    Sheets("Sheet1").Range("A1").Copy
End Sub 
```

（使用开发人员选项卡添加按钮。如果功能区不可见，请自定义功能区。）

如果 url 不在工作簿中，您可以使用 Windows API。下面的代码可以在这里找到：http: [//support.microsoft.com/kb/210216](http://support.microsoft.com/kb/210216)

添加下面的 API 调用后，更改按钮后面的代码以复制到剪贴板：

```
Private Sub CommandButton1_Click()
    ClipBoard_SetData ("http:\\stackoverflow.com")
End Sub 
```

将新模块添加到您的工作簿并粘贴以下代码：

```
Option Explicit

Declare Function GlobalUnlock Lib "kernel32" (ByVal hMem As Long) _
   As Long
Declare Function GlobalLock Lib "kernel32" (ByVal hMem As Long) _
   As Long
Declare Function GlobalAlloc Lib "kernel32" (ByVal wFlags As Long, _
   ByVal dwBytes As Long) As Long
Declare Function CloseClipboard Lib "User32" () As Long
Declare Function OpenClipboard Lib "User32" (ByVal hwnd As Long) _
   As Long
Declare Function EmptyClipboard Lib "User32" () As Long
Declare Function lstrcpy Lib "kernel32" (ByVal lpString1 As Any, _
   ByVal lpString2 As Any) As Long
Declare Function SetClipboardData Lib "User32" (ByVal wFormat _
   As Long, ByVal hMem As Long) As Long

Public Const GHND = &H42
Public Const CF_TEXT = 1
Public Const MAXSIZE = 4096

Function ClipBoard_SetData(MyString As String)
   Dim hGlobalMemory As Long, lpGlobalMemory As Long
   Dim hClipMemory As Long, X As Long

   ' Allocate moveable global memory.
   '-------------------------------------------
   hGlobalMemory = GlobalAlloc(GHND, Len(MyString) + 1)

   ' Lock the block to get a far pointer
   ' to this memory.
   lpGlobalMemory = GlobalLock(hGlobalMemory)

   ' Copy the string to this global memory.
   lpGlobalMemory = lstrcpy(lpGlobalMemory, MyString)

   ' Unlock the memory.
   If GlobalUnlock(hGlobalMemory) <> 0 Then
      MsgBox "Could not unlock memory location. Copy aborted."
      GoTo OutOfHere2
   End If

   ' Open the Clipboard to copy data to.
   If OpenClipboard(0&) = 0 Then
      MsgBox "Could not open the Clipboard. Copy aborted."
      Exit Function
   End If

   ' Clear the Clipboard.
   X = EmptyClipboard()

   ' Copy the data to the Clipboard.
   hClipMemory = SetClipboardData(CF_TEXT, hGlobalMemory)

OutOfHere2:

   If CloseClipboard() = 0 Then
      MsgBox "Could not close Clipboard."
   End If

End Function 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-09T01:24:10.080

添加对 Microsoft Forms 2.0 对象库的引用并尝试此代码。它仅适用于文本，不适用于其他数据类型。

```
Dim DataObj As New MSForms.DataObject

'Put a string in the clipboard
DataObj.SetText "Hello!"
DataObj.PutInClipboard

'Get a string from the clipboard
DataObj.GetFromClipboard
Debug.Print DataObj.GetText 
```

[在这里](http://www.cpearson.com/excel/Clipboard.aspx)，您可以找到有关如何在 VBA 中使用剪贴板的更多详细信息。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-09-23T08:01:32.483

如果您想使用即时窗口将变量的值放入剪贴板，您可以使用这一行轻松地在代码中放置断点：

```
Set MSForms_DataObject = CreateObject("new:{1C3B4210-F441-11CE-B9EA-00AA006B1A69}"): MSForms_DataObject.SetText VARIABLENAME: MSForms_DataObject.PutInClipboard: Set MSForms_DataObject = Nothing 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-10T12:49:36.927

如果您要粘贴的位置在粘贴表格格式（如浏览器 URL 栏）时没有问题，我认为最简单的方法是：

```
Sheets(1).Range("A1000").Value = string
Sheets(1).Range("A1000").Copy
MsgBox "Paste before closing this dialog."
Sheets(1).Range("A1000").Value = "" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-13T19:27:46.397

Microsoft 网站上给出的代码也可以在 Excel 中工作，即使它是在 Access VBA 下。我在 64 位 Windows 10 上的 Excel 365 中进行了尝试。

微软网站链接：[https ://docs.microsoft.com/en-us/office/vba/access/Concepts/Windows-API/send-information-to-the-clipboard](https://docs.microsoft.com/en-us/office/vba/access/Concepts/Windows-API/send-information-to-the-clipboard)

复制此处以确保答案的完整性。

```
Option Explicit
Private Declare Function OpenClipboard Lib "user32.dll" (ByVal hWnd As Long) As Long
Private Declare Function EmptyClipboard Lib "user32.dll" () As Long
Private Declare Function CloseClipboard Lib "user32.dll" () As Long
Private Declare Function IsClipboardFormatAvailable Lib "user32.dll" (ByVal wFormat As Long) As Long
Private Declare Function GetClipboardData Lib "user32.dll" (ByVal wFormat As Long) As Long
Private Declare Function SetClipboardData Lib "user32.dll" (ByVal wFormat As Long, ByVal hMem As Long) As Long
Private Declare Function GlobalAlloc Lib "kernel32.dll" (ByVal wFlags As Long, ByVal dwBytes As Long) As Long
Private Declare Function GlobalLock Lib "kernel32.dll" (ByVal hMem As Long) As Long
Private Declare Function GlobalUnlock Lib "kernel32.dll" (ByVal hMem As Long) As Long
Private Declare Function GlobalSize Lib "kernel32" (ByVal hMem As Long) As Long
Private Declare Function lstrcpy Lib "kernel32.dll" Alias "lstrcpyW" (ByVal lpString1 As Long, ByVal lpString2 As Long) As Long

Public Sub SetClipboard(sUniText As String)
    Dim iStrPtr As Long
    Dim iLen As Long
    Dim iLock As Long
    Const GMEM_MOVEABLE As Long = &H2
    Const GMEM_ZEROINIT As Long = &H40
    Const CF_UNICODETEXT As Long = &HD
    OpenClipboard 0&
    EmptyClipboard
    iLen = LenB(sUniText) + 2&
    iStrPtr = GlobalAlloc(GMEM_MOVEABLE Or GMEM_ZEROINIT, iLen)
    iLock = GlobalLock(iStrPtr)
    lstrcpy iLock, StrPtr(sUniText)
    GlobalUnlock iStrPtr
    SetClipboardData CF_UNICODETEXT, iStrPtr
    CloseClipboard
End Sub

Public Function GetClipboard() As String
    Dim iStrPtr As Long
    Dim iLen As Long
    Dim iLock As Long
    Dim sUniText As String
    Const CF_UNICODETEXT As Long = 13&
    OpenClipboard 0&
    If IsClipboardFormatAvailable(CF_UNICODETEXT) Then
        iStrPtr = GetClipboardData(CF_UNICODETEXT)
        If iStrPtr Then
            iLock = GlobalLock(iStrPtr)
            iLen = GlobalSize(iStrPtr)
            sUniText = String$(iLen \ 2& - 1&, vbNullChar)
            lstrcpy StrPtr(sUniText), iLock
            GlobalUnlock iStrPtr
        End If
        GetClipboard = sUniText
    End If
    CloseClipboard
End Function 
```

上面的代码可以从自定义宏中调用，如下所示：

```
Sub TestClipboard()
    Dim Val1 As String: Val1 = "Hello Clipboard " & vbLf & "World!"
    SetClipboard Val1
    MsgBox GetClipboard
End Sub 
```

要在表单上显示按钮，您可以通过快速搜索找到一个很好的示例。要在 Excel 自定义功能区中显示按钮（仅在当前 Excel 工作簿中显示的按钮），您可以使用 CustomUI。

自定义UI链接：

[https://bettersolutions.com/vba/ribbon/custom-ui-editor.htm](https://bettersolutions.com/vba/ribbon/custom-ui-editor.htm)

[https://docs.microsoft.com/en-us/office/open-xml/how-to-add-custom-ui-to-a-spreadsheet-document](https://docs.microsoft.com/en-us/office/open-xml/how-to-add-custom-ui-to-a-spreadsheet-document)

带有图标的 imageMSO 列表（在 CustomUI 中使用）：

[https://bert-toolkit.com/imagemso-list.html](https://bert-toolkit.com/imagemso-list.html)

谢谢。

# android - 将多点触控点存储在数组中

> ID：14219456
> 
> 赞同：0
> 
> 时间：2013-01-08T16:21:56.853
> 
> 标签：android

如果我用我的 5 个指尖触摸我的设备，我的应用程序会在触摸点周围画一个圆圈。现在，要识别我的左手和右手，我需要每个事件的 x,y 值。

为了得到我使用

```
int pointerCount = event.getPointerCount();

for (int i = 0; i < pointerCount; i++)
{
            int id = event.getPointerId(i);
            int x = (int) event.getX(i);
            int y = (int) event.getY(i);
} 
```

现在要保存我的 x 和 y 值，我使用两个数组，上面的代码修改如下

```
private int[] xval,yval; 

 for (int i = 0; i < pointerCount; i++)
    {
            int id = event.getPointerId(i);
            int x = (int) event.getX(i);
            int y = (int) event.getY(i);
            xval[i] = x;
            yval[i] = y;

    } 
```

每次我尝试保存在数组中时，应用程序都会崩溃。我的方法错了吗？任何帮助将不胜感激。我是android新手，如果这是一个愚蠢的疑问，请原谅。我需要将代码中使用的少量计算保存在一个数组中。没有任何作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:25:01.920

您尚未分配数组，因此您将值放置在未分配的内存中。

尝试：

```
int[] xval = new int[pointerCount]; 
```

# css - 如何使图像居中并在左右浮动文本？

> ID：14219460
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:22:10.067
> 
> 标签：css, twitter-bootstrap

我想使图像居中，然后将文本（或按钮）左右浮动，因为它的线框如下：

![在此处输入图像描述](../Images/28ca015207d526b8e47397458208330e.png)

我知道你不能`float: center;`，并且通过快速的网络搜索，每个推荐的解决方案都有点小窍门。那么如何为这种特定情况设置 css 呢？我正在使用 Twitter Bootstrap 来做任何有价值的事情（在这种情况下可能什么都没有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:27:07.680

您可以`float: left`使用百分比宽度的所有 3 列。像这样的东西：

```
#col1, #col2, #col3 {
     float: left;
} 

#col1, #col3 {
    width: 25%;
}

#col2 {
    width: 50%;
    text-align: center;
} 
```

此外，如果您使用 Twitter Bootstrap，您可能希望使用具有 3 列的[流体网格系统。](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:35:16.837

如果您不关心设计的响应能力并且容器和居中的图像大小是恒定的（独立于视口），那么您可以绝对定位所有元素：

```
<div style="position: relative;">
  <div style="position: absolute; top: HEIGHT_OF_THE_VIEWPORT_MINUS_HEIGHT_OF_THE_IMAGE_DIVIDED_BY_2; left: WIDTH_OF_THE_VIEWPORT_MINUS_WIDTH_OF_THE_IMAGE_DIVIDED_BY_2;">
    <img src="..." />
  </div>
</div> 
```

在响应式布局中，您将不得不处理未知大小的容器和未知大小的居中图片。

您可以使用`text-align: center;`和`margin: 0 auto;`样式轻松地水平居中。

在 CSS 中垂直居中是一个棘手的部分。您可以使用`display: table;`and `vertical-align: middle;`("table method") 但您会遇到 Internet Explorer 的问题。“负边距”和“定位”方法在 IE 中有效。在 Google 中搜索“vertical align css”显示了许多有用的讨论，但我建议将这两种先前的方法（参见[这篇文章](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)）结合起来，这适用于好的浏览器和 IE >= 6：

```
<div style="display: table; height: 400px; #position: relative; overflow: hidden;">
  <div style=" #position: absolute; #top: 50%;display: table-cell; vertical-align: middle;">
    <div class="greenBorder" style=" #position: relative; #top: -50%">
      some<br/>
      content
    </div>
  </div>
</div> 
```

诀窍是将 IE 部分与“其他”部分混合在一起，IE 不读取的样式以`#`.

请注意，这样您将适应不同大小的容器，但居中的图像不会响应地改变其大小。

好的方法（简单便携）是使用居中的图像作为背景。尝试使用：

```
#row {
  background-image: url(img/image.png);
  background-position: center center;
  background-repeat: no-repeat;
} 
```

具有引导布局的 css 分隔左中列和右列（`#col1`和`#col2`）`#col3`。您将获得水平和垂直居中的图像。

*更新*：如果您不希望它放大（放大），背景方法不允许响应地缩小图像：（

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:13:09.490

希望您可以使用固定宽度的图像。然后，您可以使用`postion: absolute`负片`margin`使图像居中。然后，您可以选择`float`对任一侧的反应。

这是它在模型中的外观： [jsFiddle](http://jsfiddle.net/woestijnrog/ZdE86/)

您可能需要为容器设置最小高度：如果没有反应，他将完全崩溃，忽略图像/中间列。

可能还需要反应的最大宽度。然后它们将适合两侧的开放空间。

# opengl - 从程序员的角度来实现 EGL 是可能的吗？

> ID：14219463
> 
> 赞同：4
> 
> 时间：2013-01-08T16:22:14.587
> 
> 标签：opengl, freeglut, egl

EGL 看起来像是有史以来记录最差的 Khronos 项目，我真的找不到关于这个项目的任何具体内容，但它看起来很有希望，最后有一个 GLUT/FreeGlut 的标准化替代方案。

我的意思是，假设我希望我的应用程序在 linux 桌面上的窗口或没有窗口（没有装饰）的情况下使用 EGL 上下文，作为获得该 EGL 上下文的程序员，我应该参考谁？例如，如果我使用 QT，是 QT 应该实现 EGL 吗？许格？我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:13:29.220

[Mesa](http://www.mesa3d.org/)的 EGL 实现似乎有效。

我在 X11 和 Win32（至少包括 Mesa 10.4.7）上将它与 SDL 1.2 一起使用以获得 OpenGL ES 1.1 和 2.0 上下文：

```
SDL_Surface* display = SDL_SetVideoMode( ..., SDL_SWSURFACE );

SDL_SysWMinfo sysInfo;
SDL_VERSION( &sysInfo.version );
SDL_GetWMInfo( &sysInfo );

// use natDisplay with eglGetDisplay();
// use natWindow with eglCreateWindowSurface();

// X11
sysInfo.info.x11.lock_func();
NativeDisplayType natDisplay = sysInfo.info.x11.display;
NativeWindowType natWindow = sysInfo.info.x11.window;
// do EGL context init here
sysInfo.info.x11.unlock_func();

// Win32
NativeDisplayType natDisplay = GetDC(sysInfo.window);
NativeWindowType natWindow = sysInfo.window;
// do EGL context init here 
```

# javascript - 在客户端准备动态 JSON 数据

> ID：14219467
> 
> 赞同：1
> 
> 时间：2013-01-08T16:22:19.450
> 
> 标签：javascript, jquery-ui, jquery

我必须像这种格式一样将 JSON 数据发布到服务器。我有已发布到服务器的 javascript 格式。

```
 var items = {
    "SubscriptionId": "123",
    "BID": "123",
    "MasterRoomDetails": [{
       "RoomId": 1111,
       "RoomName": null,
       "PropertyDetails": [{
          "PropertyId": 1234567,
          "RoomDescriptions": [{
             "Id": 1
          }, {
             "Id": 2
          }]
       }]
    }, {
       "RoomId": 222,
       "RoomName": null,
       "PropertyDetails": [{
          "PropertyId": 3456567,
          "RoomDescriptions": [{
             "Id": 1
          }, {
             "Id": 2
          }]
       }, {
          "PropertyId": 987655,
          "RoomDescriptions": [{
             "Id": 1
          }, {
             "Id": 2
          }]
       }]
    }]
 }; 
```

如何从上面的 JSON 数据模板动态创建 JSON 数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:23:49.960

如果我正确理解了您的问题，只需使用本机[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)方法（如果您需要旧的浏览器支持，请使用[polyfill ）：](https://github.com/douglascrockford/JSON-js)

```
var json = JSON.stringify(items); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/w7byP/)。

# c# - 如何从 ScheduledTaskAgent 设置锁屏通知文本？

> ID：14219468
> 
> 赞同：0
> 
> 时间：2013-01-08T16:22:22.147
> 
> 标签：c#, windows-phone-8

我有 ScheduledTaskAgent1 有时会做一些事情，当某些事件发生时，我想设置一个通知文本。如何设置 lorem 文本：

![在此处输入图像描述](../Images/5b410709d8dfe2511441e3ba039230f4.png)

试图关注[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207048(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207048(v=vs.105).aspx)但我期待某种功能或其他东西......有人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:21:59.210

在此处查看有关[设置锁屏图像和文本的文章](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8#Lock_Screen%3a_Background_image.2C_counter.2C_and_text)。

> 您也可以通过为应用的固定磁贴分配值来向锁定屏幕添加文本和计数器。

# html - 处理包括在子目录中的最佳方式？

> ID：14219470
> 
> 赞同：0
> 
> 时间：2013-01-08T16:22:33.037
> 
> 标签：html, css, apache, .htaccess

抱歉，如果这还不清楚。基本上，我在 PHP 中创建了一个小型 MVC 框架。一切正常，但我只是试图将应用程序移动到站点根目录的子目录中，它破坏了一切。我预料到了这一点，因为我在引用`/public/...`css/js 文件时一直在引用。文件结构如下所示：

```
/local/www/dev/ (web root)
    ref/
        application/
            controllers/
            views/
        config/
        system/
        public/
            js/
            css/
            index.php (handles all requests) 
```

有两个`.htaccess`文件。中的一个`ref`：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^$ public   [L]
RewriteRule (.*) public/$1  [L]
</IfModule> 
```

和一个在`ref/public`

```
 <IfModule mod_rewrite.c>
 RewriteEngine On

 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d

 RewriteRule ^(.*)$/? index.php?url=$1 [PT,L]

 </IfModule> 
```

当我去`http://test.dev/ref/leads/5`源代码时试图找到`/css/style.css`以前工作的，但现在不是它在一个子目录中（显然。）无论如何我可以相对地包含静态文件吗？也许使用htaccess？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:26:47.037

“ `~`”应该带你回到根目录。所以试试这个：

`~/ref/public/css/style.css`在引用您的 CSS 文件时。

# r - R：计算 MSE

> ID：14219472
> 
> 赞同：0
> 
> 时间：2013-01-08T14:48:37.877
> 
> 标签：r, regression, mse

我有一个函数，我给它添加了噪音，然后对其进行平滑以获得回归线。如何在 30 个等距点处找到原始函数和回归线之间的 MSE？

或者，我怎样才能给 R 一个 x 值并在回归线上得到 y 值？

这是我的问题的缩小版本：

```
> test<- function(m) {3*m^2+7*m+2}  
> r=rnorm(10)  
> m=1:10/10  
> plot(test(m)+r)  
> lines(smooth.spline(1:10,test(m)+r),col="red") 
```

所以我得到了 10 个等距点的真实函数值，即 test(m)。我只需要一种方法来提取这 10 个点的 smooth.spline 值，然后我应该能够计算 MSE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:37:09.393

怎么样：

```
y <- test(m)+r
y.pred <- predict(smooth.spline(1:10,y))$y
mean((y-y.pred)^2)        ## variance (could mult by n/(n-r) for an unbiased estimate)
mean((test(m)-y.pred)^2)  ## MSE 
```

# jquery-ui - Jquery UI datepicker beforeShowDay 重复某些日期

> ID：14219474
> 
> 赞同：2
> 
> 时间：2013-01-08T16:22:39.713
> 
> 标签：jquery-ui, jquery-ui-datepicker

当使用 ui datepicker 呈现 12 个内联日历时，我注意到 beforeShowDay 函数正在复制日期，即

```
29-01-2013 
30-01-2013 
31-01-2013 
01-02-2013 
02-02-2013 
03-02-2013 
28-01-2013 
29-01-2013 
30-01-2013 
31-01-2013 
01-02-2013 
02-02-2013 
03-02-2013 
04-02-2013 
```

日历正在从数据库中更新，以显示度假屋的预订天数，上述行为导致了大问题。

这是被调用的（剥离的）函数：

```
 function availableDays(date)
    {

        var m = date.getMonth(),
            d = date.getDate(),
            y = date.getFullYear();

        m = pad(m + 1);
        d = pad(d);

        var dateId = d + '-' + m + '-' + y;

        console.log(dateId)
        return [false];

    } 
```

我正在使用 jquery.1.8.js 和 jquery-ui-1.9.1.js - 还有其他人遇到过这样的事情吗？

# com - 文字自动化：邮寄标签

> ID：14219476
> 
> 赞同：2
> 
> 时间：2013-01-08T16:22:44.557
> 
> 标签：com, vbscript, automation, ms-word, wsh

我正在尝试自动化 Word 2010 以在 VBScript 中创建邮件标签。到目前为止，我有以下内容：

```
Set word = CreateObject("Word.Application")
word.Visible = True
word.Documents.Add
word.MailingLabel.CreateNewDocument "5162" 
```

我收到错误“命令失败”（800A1066）。输出 word.MailingLabel 给出错误，“对象不支持此属性或方法。” [MSDN 的 MailingLabel 文档](http://msdn.microsoft.com/en-us/library/ff835169.aspx "MailingLabel 对象")表明这是正确的用法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:24:49.750

我注意到，Word 本身也无法生成标签。它会告诉我，“您尝试使用的标签信息有问题。”

修复的要点是：

1.  在 Office 安装文件夹中重命名 PAGESIZE（以创建备份）。
2.  使用添加/删除程序中的修复选项修复 Office。

将创建一个新的 PAGESIZE 文件夹，并且 Word 应该能够再次生成标签。

# mysql - 搜索两个表以获取特定的匹配值

> ID：14219482
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:22:54.790
> 
> 标签：mysql, sql, select, union

我有两张表，一张包含列（名称、价格、额外），另一张包含列（名称、价格、类别）。

我还有一个选择字段，其中包含两个表中名称列中的所有项目（我使用联合子句来执行此操作）。

现在我希望能够搜索这两个表并在选择选择字段中的任何项目时从任何表中获取 t 的价格。我正在使用 ajax 进行动态选择。我不知道从哪里开始或做什么。我需要任何人关于如何实现这一目标的想法。

我不知道该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:30:49.837

检查这个：

```
SELECT name, price 
FROM (SELECT name,price FROM tableA 
      UNION ALL 
      SELECT name,price FROM tableB) AS A 
WHERE name LIKE '%abc%'; 
```

# clojure - 如何分离两组？

> ID：14219484
> 
> 赞同：1
> 
> 时间：2013-01-08T16:22:57.153
> 
> 标签：clojure

我有两组，需要创建第三组，其中将包括第一组中第二组中不存在的元素：

```
(? #{"a" "b" "c"} #{"b"}) ; -> ["a" "c"] 
```

我知道[`disj`](http://clojuredocs.org/clojure_core/clojure.core/disj)，但它仅在第二个参数是元素而不是集合时才有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:31:27.160

如果你有两组，你可以使用[set Difference](http://clojure.github.com/clojure/clojure.set-api.html#clojure.set/difference)：

```
user=> (require 'clojure.set)
user=> (difference #{"a" "b" "c"} #{"b"})
#{"a" "c"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:30:54.457

如果没有差异函数，您可能已经使用 reduce 轻松创建了它：

```
=> (reduce disj #{"a" "b" "c" "d"} #{"b" "d"})
#{"a" "c"} 
```

Reduce 接受一个函数，一个初始的“累加器”和一个它映射的集合以修改累加器。在这种情况下，它将使用第一个集合作为累加器，从第二个集合中删除第一个项目，然后是下一个，等等。

# .net - 是否可以忽略 Visual Studio 中某些行的某些异常？

> ID：14219486
> 
> 赞同：20
> 
> 时间：2013-01-08T16:23:05.350
> 
> 标签：.net, visual-studio, debugging, exception, visual-studio-2012

我在一个相当大的遗留代码库上工作。因为它并不总是保持最佳状态，所以有时会从控制流中使用异常，或者出于各种其他原因。有时它几乎是不可避免的。例如，除了将文件作为图像传入并查看它是否不会引发异常之外，您还如何检查文件是否是有效的 .ico 图像？

我尽可能地重构这种东西，但很多时候重构成本太高而收效甚微。这些虚假异常在调试时变得非常烦人。我们捕获所有异常以避免我们的程序崩溃，并捕获大多数异常并显示一些对用户更友好的东西。因此，在调试时，如果某段代码抛出一个`ApplicationException`，在我们最终得到实际错误之前，可能会抛出 50 个该类型的异常。大多数情况下，这些虚假异常都集中在代码的单个部分（很多时候是一行）。有什么方法可以让 Visual Studio 忽略从该行抛出的异常，但仍然停止在实际问题的异常上？或者我还能做些什么来帮助防止这种调试挫败感？

为了说明我的问题，想象一下这样的事情：

```
for(int i=0; i<foo; i++)
{
  try
  {
    FooBar(i); //this function throws NullReferenceException sometimes
  }catch {} //ignore it because we don't care if it failed
}
....
var tmp=Bar as FooType; //this cast fails so tmp is null
tmp.Meh(); //throws exception here. This is a bug, we should've checked for null 
```

如果你想弄清楚 NullReference 在哪里，你基本上按住 F5 直到你通过`FooBar`电话。这充其量是烦人的，而且很容易出错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:34:06.900

您可以调整发生中断的异常类型。请参阅菜单中的调试-> 异常 [http://msdn.microsoft.com/en-us/library/d14azbfh(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d14azbfh(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:39:27.237

据我所知，您可以结合多种调试技术来改进重构过程。

如果可能，您可以将（部分）遗留代码放入单独的程序集中。编译那些优化并启用[“Just my Code”调试](http://blogs.msdn.com/b/zainnab/archive/2010/10/25/understanding-just-my-code.aspx)。

对于较小的块（方法），您可以使用[DebuggerStepThrough](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)属性，因此调试器不会在那里中断。对于您的示例，您可以创建一个方法来执行调用 FooBar 方法的循环并将 [DebuggerStepThrough] 放在新创建的方法上。或者，您可以重构 FooBar 来处理异常并将 [DebuggerStepThrough] 放在上面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:27:33.497

我开发[了 IntelliDebugger - Visual Studio 的扩展](http://intelliegg.com/)，它有助于调试 C++/C# 代码。包括有例外的工作。IntelliDebugger 可以过滤从未包含在解决方案中的模块中抛出的异常（此功能称为“仅从解决方案中中断异常”）。也许这个功能对你有用。

在未来的版本中，我们计划添加更好的过滤器和其他功能来处理异常。如果您有任何功能请求或错误报告，请[写信给我](http://intelliegg.com/support.html)。这将帮助我们专门为您提供方便的产品。

# parsing - 在 Scala 中使用 StandardTokenParsers 捕获所有出现的交错节点

> ID：14219487
> 
> 赞同：0
> 
> 时间：2013-01-08T16:23:07.090
> 
> 标签：parsing, scala

我正在学习如何在 Scala 中使用 Parsers，并且我正在尝试为一个文本文件构建一个解析器（从 StandardTokenParsers 扩展），该文本文件可以出现相同的节点类型，而其间有其他节点类型。例如：

[节点A] ...

[节点 B] ...

[节点A] ...

[节点A] ...

[节点A] ...

如何捕获节点 A 的所有实例并将它们存储在集合中？我认为 repsep 只能捕获顺序实例。

最后，我希望能够将节点的所有实例存储在不同的集合中。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:08:05.107

您想要的是一个接受 [NodeA] 或 [NodeB] 序列的解析器。给定一个解析器`nodeAParser`和一个解析器`nodeBParser`，您所需要的只是使用`|`组合器来解析 [NodeA] 或 [NodeB] ( `nodeAParser | nodeBParser`)，然后使用组合`*`器来接受该 ( `(nodeAParser | nodeBParser).*`) 的序列。

一些虚拟示例：

```
import scala.util.parsing.combinator.syntactical._
import scala.util.parsing.input._
abstract sealed class Node
case object NodeA extends Node
case object NodeB extends Node

object MyParser extends StandardTokenParsers {
  lexical.delimiters ++= Seq("[", "]")
  lexical.reserved ++= Seq("NodeA", "NodeB")
  lazy val nodeAP: Parser[Node] = "[" ~ "NodeA" ~ "]" ^^ { case _ => NodeA }
  lazy val nodeBP: Parser[Node] = "[" ~ "NodeB" ~ "]" ^^ { case _ => NodeB }
  lazy val nodesP: Parser[List[Node]] = phrase((nodeAP | nodeBP).*)
  def parse( s: String ) = { nodesP( new lexical.Scanner( s ) ) }
}

MyParser.parse(
"""
[NodeA]
[NodeB]
[NodeA]
[NodeA]
[NodeA]
"""
) 
```

# java - Hibernate 和 PostgreSQL 中具有 UserType 的数组 --> MappingException

> ID：14219498
> 
> 赞同：15
> 
> 时间：2013-01-08T16:23:43.750
> 
> 标签：java, arrays, spring, hibernate, postgresql

我正在尝试编写一个实现 UserType 的类来处理 Hibernate/JPA 中的数组。我使用了以下帖子 使用 hibernate和Hibernate/JPA/HSQL[映射 postgres 数组](https://stackoverflow.com/questions/1647583/mapping-a-postgres-array-with-hibernate/1647660#1647660)[：如何为用户类型 ARRAY 创建方言映射](https://stackoverflow.com/questions/5393334/hibernate-jpa-hsql-how-to-create-a-dialect-mapping-for-user-type-array/5412235#5412235)来构建解决方案，但我无法让它工作。我创建了一个新的 Spring Roo 项目只是为了测试它。以下是不同的文件（所有 java 类都位于包 test 中）：

*   持久性.xml

    ```
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
      <persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
        <!--  <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/> -->
        <property name="hibernate.dialect" value="test.PostgreSQLDialectArray"/>
        <!-- value="create" to build a new database on each run; value="update" to modify an existing database; value="create-drop" means the same as "create" but also drops tables when Hibernate closes; value="validate" makes no changes to the database -->
        <property name="hibernate.hbm2ddl.auto" value="create"/>
        <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
        <property name="hibernate.connection.charSet" value="UTF-8"/>
        <!-- Uncomment the following two properties for JBoss only -->
        <!-- property name="hibernate.validator.apply_to_ddl" value="false" /-->
        <!-- property name="hibernate.validator.autoregister_listeners" value="false" /-->
        </properties>
      </persistence-unit>
    </persistence> 
    ```

*   TestArray.java

    ```
    package test;

    import java.math.BigInteger;
    import java.security.SecureRandom;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;
    import org.springframework.roo.addon.javabean.RooJavaBean;
    import org.springframework.roo.addon.serializable.RooSerializable;
    import org.springframework.roo.addon.tostring.RooToString;

    @RooJavaBean
    @RooToString
    @RooSerializable
    public class TestArray {

         private static final long serialVersionUID = 1L;
         private SecureRandom random = new SecureRandom();

         public String nextSessionId()
         {
             return new BigInteger(130, random).toString(32);
         }

         public static void main(String[] args) {
             ApplicationContext context;
     context = new ClassPathXmlApplicationContext("classpath:META-INF/spring/applicationContext.xml");
             int[] array = new int[1428];
             TestArray test = new TestArray();
             Blabla blabla = new Blabla();
             int nb = 1428;

             for(int i = 0 ; i < nb ; i++)
             array[i] = test.random.nextInt();

              //         blabla.setTest(array);
              //         blabla.persist();
              //        System.out.println(Arrays.toString(blabla.getTest()));

             System.out.println(java.sql.Types.ARRAY);
             System.out.println("Done");
         }
    } 
    ```

*   布拉布拉.java

    ```
    package test;

    import org.hibernate.annotations.Type;
    import org.springframework.roo.addon.entity.RooEntity;
    import org.springframework.roo.addon.javabean.RooJavaBean;
    import org.springframework.roo.addon.tostring.RooToString;

    @RooJavaBean
    @RooToString
    @RooEntity
    public class Blabla {

        @Type(type = "test.IntArrayUserType")
        private int[] array;
    } 
    ```

*   PostgreSQL方言数组

    ```
    package test;

    import java.sql.Types;

    public class PostgreSQLDialectArray extends org.hibernate.dialect.PostgreSQLDialect{

        public PostgreSQLDialectArray() { 
            super(); 
            registerHibernateType(Types.ARRAY, "array"); 
        }
     } 
    ```

*   IntArrayUserType.java （基本上与[使用 hibernate 映射 postgres 数组](https://stackoverflow.com/questions/1647583/mapping-a-postgres-array-with-hibernate/1647660#1647660)相同）

    ```
    package test;
    import java.io.Serializable;
    import java.sql.Array;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;

    import org.hibernate.HibernateException;
    import org.hibernate.usertype.UserType;

    public class IntArrayUserType implements UserType {

        protected static final int  SQLTYPE = java.sql.Types.ARRAY;

        private int[] toPrimitive(Integer[] array){
            int[] a = new int[array.length];
            for(int i = 0 ; i < array.length ; i++)
                a[i] = array[i];
            return a;
        }

        private Integer[] toObject(int[] array){
            Integer[] a = new Integer[array.length];
            for(int i = 0 ; i < array.length ; i++)
                a[i] = array[i];
            return a;
        }

        @Override
        public Object nullSafeGet(final ResultSet rs, final String[] names, final Object owner) throws HibernateException, SQLException {
            Array array = rs.getArray(names[0]);
            Integer[] javaArray = (Integer[]) array.getArray();
            return toPrimitive(javaArray);
        }

        @Override
        public void nullSafeSet(final PreparedStatement statement, final Object object, final int i) throws HibernateException, SQLException {
            System.out.println("test null safe set...");
            Connection connection = statement.getConnection();

            int[] castObject = (int[]) object;
            Integer[] integers = toObject(castObject);
            Array array = connection.createArrayOf("integer", integers);

            statement.setArray(i, array);
            System.out.println("test null safe set...");
        }

        @Override
        public Object assemble(final Serializable cached, final Object owner) throws HibernateException {
            return cached;
        }

        @Override
        public Object deepCopy(final Object o) throws HibernateException {
            return o == null ? null : ((int[]) o).clone();
        }

        @Override
        public Serializable disassemble(final Object o) throws HibernateException {
            return (Serializable) o;
        }

        @Override
        public boolean equals(final Object x, final Object y) throws HibernateException {
            return x == null ? y == null : x.equals(y);
        }

        @Override
        public int hashCode(final Object o) throws HibernateException {
            return o == null ? 0 : o.hashCode();
        }

        @Override
        public boolean isMutable() {
            return false;
        }

        @Override
        public Object replace(final Object original, final Object target, final Object owner) throws HibernateException {
            return original;
        }

        @Override
        public Class<int[]> returnedClass() {
            return int[].class;
        }

        @Override
        public int[] sqlTypes() {
            return new int[] { SQLTYPE };
        }
    } 
    ```

现在堆栈跟踪：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [META-INF/spring/applicationContext.xml]: Cannot resolve reference to bean 'entityManagerFactory' while setting bean property 'entityManagerFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/spring/applicationContext.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: persistenceUnit] Unable to build EntityManagerFactory
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at test.TestArray.main(TestArray.java:29)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/spring/applicationContext.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: persistenceUnit] Unable to build EntityManagerFactory
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
... 15 more
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: persistenceUnit] Unable to build EntityManagerFactory
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)
at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:225)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:308)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
... 22 more
Caused by: org.hibernate.MappingException: No Dialect mapping for JDBC type: 2003
at org.hibernate.dialect.TypeNames.get(TypeNames.java:77)
at org.hibernate.dialect.TypeNames.get(TypeNames.java:100)
at org.hibernate.dialect.Dialect.getTypeName(Dialect.java:296)
at org.hibernate.mapping.Column.getSqlType(Column.java:208)
at org.hibernate.mapping.Table.sqlCreateString(Table.java:418)
at org.hibernate.cfg.Configuration.generateSchemaCreationScript(Configuration.java:1099)
at org.hibernate.tool.hbm2ddl.SchemaExport.<init>(SchemaExport.java:106)
at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:372)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906)
... 27 more 
```

所以我猜我创建的方言根本没有使用或者是错误的，但我不知道为什么。我认为 @Type 注释应该进行映射，但我已经看到了一些标签，但我不知道在这个例子中是否需要它们，如果它们是，我在哪里有它们？我被这个问题困扰已经两天了，我越来越绝望。你能帮我调试一下这个程序吗？请。非常感谢您提前。

**编辑0：**

persistence.xml 文件似乎找到了正确的方言，但函数 getTypeName(2003) 在执行 registerHibernateType(Types.ARRAY, "array") 后会引发上述错误。顺便说一句，我使用的是 Hibernate 3.6.4.Final 和 postgresql 8.4-702.jdbc3。

**编辑1：**

我将以下行添加到 PostgreSQLDialectArray 构造函数：

```
registerColumnType(Types.ARRAY, "integer[$l]" ); 
```

这似乎部分解决了问题。但是，现在我收到另一个错误：

```
2013-01-09 11:14:30,281 [main] ERROR org.hibernate.tool.hbm2ddl.SchemaExport - Unsuccessful: create table blabla (id int8 not null, array int[255], name varchar(255), test int4 not null, version int4, primary key (id))
2013-01-09 11:14:30,282 [main] ERROR org.hibernate.tool.hbm2ddl.SchemaExport - ERREUR: erreur de syntaxe sur ou près de « array »
  Position: 40 
```

显然，hibernate 仍然不知道如何创建一个包含数组的表......

**编辑2：**

似乎 postgresql 不喜欢我的列被称为“数组”的事实。我改变了它，它起作用了。该表是由 hibernate 使用整数数组创建的。

但是由于 UserType 实现中的问题，我无法使用 hibernate 在其中保存任何数组。显然，数组的创建因 createArrayOf 而失败。我正在阅读有关此问题的一些线程，告诉访问底层连接而不是包装器。我想我要打开一个链接到这个的新线程，因为这个问题完全不同。

堆栈跟踪：

```
Exception in thread "main" java.lang.AbstractMethodError: org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.createArrayOf(Ljava/lang/String;[Ljava/lang/Object;)Ljava/sql/Array;
at test.IntArrayUserType.nullSafeSet(IntArrayUserType.java:59)
at org.hibernate.type.CustomType.nullSafeSet(CustomType.java:140)
at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2184)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2430)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2874)
at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:79)
at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)
at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)
at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:76)
at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:467)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
at org.springframework.transaction.aspectj.AbstractTransactionAspect.ajc$afterReturning$org_springframework_transaction_aspectj_AbstractTransactionAspect$3$2a73e96c(AbstractTransactionAspect.aj:78)
at test.Blabla_Roo_Entity.ajc$interMethod$test_Blabla_Roo_Entity$test_Blabla$persist(Blabla_Roo_Entity.aj:56)
at test.Blabla.persist(Blabla.java:1)
at test.Blabla_Roo_Entity.ajc$interMethodDispatch1$test_Blabla_Roo_Entity$test_Blabla$persist(Blabla_Roo_Entity.aj)
at test.TestArray.main(TestArray.java:39) 
```

**编辑3：**

最后，经过以下修改，整数数组的 UserType 可以工作了：

*   在 applicationContext.xml 中添加这一行：

    `<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">`
    `....`
    `<property name="accessToUnderlyingConnectionAllowed" value="true" />`
    `</bean>`

*   从 IntArrayUserType 修改 nullSafeSet

    ```
     @Override
        public void nullSafeSet(final PreparedStatement statement, final Object object, final int i) throws HibernateException, SQLException {
            Connection connection = statement.getConnection();
            int[] castObject = (int[]) object;
            Integer[] integers = toObject(castObject);
            Connection conn = ((DelegatingConnection) connection).getInnermostDelegate();
            Array array = conn.createArrayOf("integer", integers);
            statement.setArray(i, array);
        } 
    ```

但是从 blabla 表中获取所有条目时仍然存在问题：函数 findAllBlablas 无法正常工作，只返回第一个条目...

**编辑4：**

事实上，它工作得很好，但 Eclipse 控制台无法打印所有数据。就这样！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-07T08:10:25.470

```
__________ HibernateSessionFactory.xml ___________________________

    <property name="hibernateProperties">
        <props>
            <!-- <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop> -->
            <prop key="hibernate.dialect">com.test.model.PostgreSQLDialectArray</prop>              
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.generate_statistics">false</prop>
            <prop key="hibernate.connection.pool_size">10</prop>
            <prop key="hibernate.archive.autodetection">class</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>                
            <prop key="cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>
        </props>
    </property>

    ______________ PostgreSQLDialectArray.java _______________________

package com.test.model;

import java.sql.Types;

public class PostgreSQLDialectArray extends org.hibernate.dialect.PostgreSQL82Dialect{

    public PostgreSQLDialectArray() {

        super();    

        System.out.println("Register Hibernate Type ... ");
        registerHibernateType(Types.ARRAY, "array");

        System.out.println("Register Column Type ... ");
        registerColumnType(Types.ARRAY, "integer[]");

    }
}

_____________ CustomArrayType.java ______________________________

package com.test.model;

import java.io.Serializable;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Types;
import java.sql.Array;

import org.hibernate.*;
import org.hibernate.engine.spi.SessionImplementor;
import org.hibernate.usertype.UserType;

 public class CustomArrayType implements UserType
 {

     protected static final int  SQLTYPE = java.sql.Types.ARRAY;

     private int[] toPrimitive(Integer[] array){
         int[] a = new int[array.length];
         for(int i = 0 ; i < array.length ; i++)
             a[i] = array[i];
         return a;
     }

     private Integer[] toObject(int[] array){
         Integer[] a = new Integer[array.length];
         for(int i = 0 ; i < array.length ; i++)
             a[i] = array[i];
         return a;
     }

     @Override
     public Object nullSafeGet(final ResultSet rs, final String[] names, SessionImplementor session, final Object owner) throws HibernateException, SQLException {
         Array array = rs.getArray(names[0]);
         Integer[] javaArray = (Integer[]) array.getArray();
         return toPrimitive(javaArray);
     }

     @Override
     public void nullSafeSet(final PreparedStatement statement, final Object object, final int i, SessionImplementor session) throws HibernateException, SQLException {
         System.out.println("test null safe set...");
         Connection connection = statement.getConnection();

         int[] castObject = (int[]) object;
         Integer[] integers = toObject(castObject);
         Array array = connection.createArrayOf("integer", integers);

         statement.setArray(i, array);
         System.out.println("test null safe set...");
     }

     @Override
     public Object assemble(final Serializable cached, final Object owner) throws HibernateException {
         return cached;
     }

     @Override
     public Object deepCopy(final Object o) throws HibernateException {
         return o == null ? null : ((int[]) o).clone();
     }

     @Override
     public Serializable disassemble(final Object o) throws HibernateException {
         return (Serializable) o;
     }

     @Override
     public boolean equals(final Object x, final Object y) throws HibernateException {
         return x == null ? y == null : x.equals(y);
     }

     @Override
     public int hashCode(final Object o) throws HibernateException {
         return o == null ? 0 : o.hashCode();
     }

     @Override
     public boolean isMutable() {
         return false;
     }

     @Override
     public Object replace(final Object original, final Object target, final Object owner) throws HibernateException {
         return original;
     }

     @Override
     public Class<int[]> returnedClass() {
         return int[].class;
     }

     @Override
     public int[] sqlTypes() {
         return new int[] { SQLTYPE };
     }

}

____________ MyClass.java ___________________________

package com.test.model;

import static javax.persistence.GenerationType.IDENTITY;

import java.io.Serializable;
import java.sql.Time;
import java.sql.Timestamp;
import java.sql.Types;
import java.util.Date;
import java.util.List;
import java.util.Set;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EnumType;
import javax.persistence.Enumerated;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;

import org.hibernate.annotations.Type;

@Entity
@Table(name = "MyClass")
public class MyClass implements Serializable {

    private static final long serialVersionUID = -2520209406925143850L;

    @Id
    @GeneratedValue(strategy = IDENTITY)
    private Long id;

    @Type(type = "com.test.model.CustomArrayType")
    @Column(name = "arrayDay", nullable = true)
    private int[] arrayDay;           

    public Long getId() {
    return id;
    }

    public void setId(Long id) {
    this.id = id;
    }

    public int[] getArrayDay() {
        return arrayDay;
    }

    public void setArrayDay(int[] arrayDay) {
        this.arrayDay = arrayDay;
    }  

}

______________ ArrayTypeTests.java ___________________________

package com.test;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import com.test.model.MyClass;
import com.test.service.MyClassService;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:application-context.xml" })
public class ArrayTypeTests implements ApplicationContextAware {

    @Autowired
    private MyClassService myClassService;

    public static ApplicationContext ctx;

    @Test
    public void test_() {
       System.out.println("Test junit");
    }

    @Test
    public void test_arrayDays() {

    System.out.println("\n - Start test_array - ");
    MyClass myClass = myClassService.getMyClassById(1L);
    if (myClass != null) {
        int[] array = myClass.getArrayDay();
        System.out.println("\n valor1:" + array[0]);
        System.out.println("\n valor2:" + array[1]);
        System.out.println("\n\n test_array OK ");
    } else {
        System.out.println("\n ERROR");
    }
    System.out.println("\n - End test_array - ");

    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
    ctx = applicationContext;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T11:25:39.303

除了您在 Edit 3 中的解决方案之外，当您不使用 dbcp 或 c3p0 之类的连接池时，它可以完美运行。- 您正在使用 dbcp。

在使用 c3p0 时，一个可能的解决方案是使用[proxool](http://proxool.sourceforge.net/)。有了这个，应该没有任何问题，因为 proxool 可以处理`createArrayOf()`.

另一个是这样的：

```
 C3P0ProxyConnection connection = (C3P0ProxyConnection) _statement.getConnection();
    Method method = Connection.class.getMethod("createArrayOf", new Class[] { String.class, Object[].class });
    Array array = (Array) connection.rawConnectionOperation(
        method, C3P0ProxyConnection.RAW_CONNECTION, new Object[] {"integer", intArray});
    _statement.setArray(_i, array); 
```

您需要从 jdbc-class 中获取底层函数。因此`getMethod`，将其与反射一起使用。

# python - PyPi 服务器响应 500

> ID：14219499
> 
> 赞同：6
> 
> 时间：2013-01-08T16:23:46.310
> 
> 标签：python, setup.py, pypi

我正在尝试使用以下命令在 PyPi 上注册我的包：

```
pyton setup.py register 
```

但这会导致以下错误：

```
Server response (500): <urlopen error [Errno -2] Name or service not known> 
```

我什至删除了 ~/.pypirc 文件并再次尝试发出命令，但这也会导致相同的错误。我的 setup.py 脚本如下：

```
from setuptools import setup
from setuptools import find_packages
setup(
        name="xxxxx",
        version="0.0.1",
        author="someone",
        author_email="someone@gmail.com",
        url="https://github.com/someone",
        packages=['folder_name',],
        license="MIT License",
        description = " Sample Description",
        long_description = open("README").read(),
        install_requires = ["python-mwapi"],
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T17:38:46.940

从 distutils 导入设置解决了这个问题。

用它替换前两行使其工作：

```
from distutils.core import setup 
```

一旦你使用 注册了你的包名`distutils.core`，你可以再次返回并`setuptools`在你的 setup.py 文件中使用。从那时起，一切似乎都正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T16:34:27.683

检查您的互联网连接，以及网络或您正在使用的机器上的防火墙是否可能限制您的访问。

故障排除的下一步是指定 Pypi 服务器：

```
python setup.py register -r http://pypi.python.org/pypi 
```

然后，如果仍然神秘地失败，请尝试运行本地 Pypi 服务器（[pypiserver](http://pypi.python.org/pypi/pypiserver)）并在指定该服务器时运行上面的命令。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-10T09:27:08.860

将此添加到我的 ~/pypirc 对我有用，如[Uploading to PyPI](https://packaging.python.org/en/latest/distributing.html#uploading-your-project-to-pypi)中所述。

```
[distutils]
index-servers=pypi

[pypi]
repository = https://pypi.python.org/pypi

[pypi]
username:your_username
password:your_password 
```

# maven - 使用 Maven 在清单的类路径中生成非版本控制的 jar 条目

> ID：14219504
> 
> 赞同：5
> 
> 时间：2013-01-08T16:23:58.823
> 
> 标签：maven, maven-2, classpath, manifest

为了实现可执行的 jar 文件，我将以下内容添加到 pom.xml：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <mainClass>my.main.Class</mainClass>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

结果是 (MANIFEST.MF)

```
...
Class-Path: library1-8.10-SNAPSHOT.jar hessian-4.0.7.jar library2-8.10-SNAPSHOT.jar json-lib-2.2.3-jdk15.jar ezmorph-1.0.6.jar library3-8.10-SNAPSHOT.jar commons-io-1.4.jar
... 
```

等等

这意味着，jar 的版本包含在文件名中。我希望它没有它：

```
Class-Path: library.jar hessian.jar library2.jar json-lib.jar ezmorph.jar library3.jar commons-io.jar 
```

仅仅因为这是它们在 lib 文件夹中的命名方式。

我们使用的是 Maven 2.2，因此 classpathLayoutType 和 customClasspathLayout 不可用（如果它们有帮助的话）。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T16:53:56.067

为什么它们在`lib`目录中没有版本？你没有使用[适当的依赖管理](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)，这是 Maven 提供的（并且是首先使用 Maven 的主要原因之一）？

让 jar 没有版本是个坏主意，因为您无法轻易判断系统上安装了哪个版本的库。问题不在于`Class-Path`错误，而是应该对库进行版本控制。构建的其余部分存在问题。那么，如何声明依赖关系，以及如何构建最终包？

如果您真的想这样做，那么您可以[自定义 maven-archiver](http://maven.apache.org/shared/maven-archiver/examples/classpath.html#Altering_The_Classpath:_Using_a_Custom_Classpath_Format)，指定`classpathLayoutType`should be`custom`和 the `customClasspathLayout`should be `${artifact.artifactId}.${artifact.extension}`。例如：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
            <archive>
                <manifest>
                    <addClasspath>true</addClasspath>
                    <classpathLayoutType>custom</classpathLayoutType>
                    <customClasspathLayout>lib/${artifact.artifactId}${artifact.dashClassifier?}.${artifact.extension}</customClasspathLayout>
                    <mainClass>my.main.Class</mainClass>
                </manifest>
            </archive>
        </configuration>
    </plugin> 
```

（请注意，我添加了一个`lib/`前缀，请随意删除它或用您需要的任何内容替换它）

# sql - 产品比较数据库架构

> ID：14219505
> 
> 赞同：0
> 
> 时间：2013-01-08T16:24:02.457
> 
> 标签：sql, database-design, database-schema, database-performance

我们希望在我们的购物网站中存储两种或多种产品之间的比较数据。

我找到了以下链接，但是当我们尝试时，我们遇到了一些性能问题

[SQL Group By / Count：跨多列计算相同的值？](https://stackoverflow.com/questions/9185858/sql-group-by-count-count-same-values-across-multiple-columns)

我们如何存储我们的数据？比较历史数据的表模式应该是什么？如何显示比较最多的产品？查询会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:00:15.183

这个问题非常广泛且有点模糊，我的回答可能包含您已经做出的考虑。

为了进行比较逻辑，您需要三件事；产品，该产品的评级和一些逻辑分组产品进行比较的方法。具有适当索引的粒度通常是最好的。

这是我将创建的表/索引的示例：

```
Create  Table Product (ProductID Int, ProductName Varchar(256), etc)
Create  Table Groups (GroupID Int, GroupName Varchar(256), etc)
Create  Table ProductGroup (ProductID Int, GroupID Int)
Create  Table RatingType (RatingID Int, RatingName Varchar(64))
Create  Table ProductRatings (ProductID Int, RatingID Int, RatingValue Varchar(32))

Create  Clustered Index ix_Product_pID On Product (ProductID)
Create  Nonclustered Index ix_Product_pID_pName On Product (ProductID, ProductName)
Create  Clustered Index ix_Groups_gID On Groups (GroupID)
Create  Nonclustered Index ix_ProductGroup_gID_pID On ProductGroup (GroupID, ProductID)
Create  Clustered Index ix_RatingType_rID On RatingType (RatingID)
Create  Nonclustered Index ix_ProductRatings_pID_rID On ProductRatings (ProductID, RatingID) 
```

将聚集索引放在 Product、Group 和 RatingType 上是有意义的，因为它们的 ID 列将是它们的标识列，因此您不必担心物理顺序，因为它们是连续的。另一方面，ProductGroup 和 ProductRatings 可以随时以任何顺序接收任何记录，因此在它们上放置聚集索引会减慢插入速度并导致更快的碎片。

要执行链接示例中查询中完成的逻辑，您将执行以下操作：

```
Create  Proc GetProductComparisonRatings (@productID Int, @ratingID Int)
As

Declare @columns Nvarchar(Max), 
        @SQL Nvarchar(Max);

;With   DistinctCols As
(
        Select  Distinct p.productName
        From    ProductGroup pg1
        Join    ProductGroup pg2
                On  pg1.groupID = pg2.groupID
        Join    Product p
                On  pg2.productID = p.productID
        Where   pg1.productID = @productID      
)
Select  @columns = Coalesce(@columns + ',','') + '[' + productName + ']'
From    DistinctCols
Order   By  Case
            When    p.productID = @productID Then 0
            Else    1
            End;        -- This will put your product that was the basis of the comparison as the leftmost column

Select  @SQL = ';With   baseRecords As
                (
                        Select  pg2.productID, 
                                pr.ratingValue, 
                                Count(1) As cnt
                        From    ProductGroup pg1
                        Join    ProductGroup pg2
                                On  pg1.groupID = pg2.groupID
                        Join    ProductRatings pr
                                On  pg2.productID = pr.productID
                                And pr.ratingID = ' + @ratingID + '
                        Where   pg1.productID = ' + @productID + '
                        Group   By  pg2.productID, 
                                    pr.ratingValue;
                )
                Select  ratingValue, ' + @columns + '
                From    baseRecords br
                Join    product p
                        On  br.productID = p.productID
                Pivot   (Sum(cnt) For p.productName In (' + @columns + ')) pivot';

Exec    sp_executeSQL @SQL; 
```

这更进一步，并将评级比较限制为特定的 ratingType；一些例子可能是（耐用性、尺寸、整体）。如果您只有一个 ratingType，它仍然可以正常工作。您可以根据需要编辑或更改它。

# syntax - 奇数 Fortran 指针语法

> ID：14219520
> 
> 赞同：3
> 
> 时间：2013-01-08T16:24:53.360
> 
> 标签：syntax, fortran, fortran77

在我必须处理的一些 Fortran 77 代码中，有一些指针以一种非常奇怪的方式声明，

```
 pointer  (iuu     , uu      ), (ivv     , vv      ),
 $        (it      , t       ), (iq      , q       ), (ips     , ps      ),
 $        (ittm    , ttm     ), (itqm    , tqm     ), (ipsm    , psm     ), 
```

这里的括号是什么意思？任何事物？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:52:00.683

这些是[Cray 指针](http://gcc.gnu.org/onlinedocs/gfortran/Cray-pointers.html)，一种非标准类型的指针，它使用常规`integer`变量来存储目标的内存地址，目标可能是另一个变量或过程。之所以引入它们是因为程序员想要这个功能，而 Fortran 77 没有本机指针工具。

代码中的括号是 Cray 指针的赋值语句：`pointer (iptr, target) [, ...]`。

如果可能的话，您应该考虑将它们更改为标准 Fortran 指针，因为它们的使用受到较少的限制和假设，并且显然所有实现 Fortran 90 的编译器都支持它们。

# javascript - .net ReportViewer javascript错误

> ID：14219521
> 
> 赞同：2
> 
> 时间：2013-01-08T16:24:54.703
> 
> 标签：javascript, .net, user-controls, reportviewer

我在加载到 MVC 单页应用程序的 iframe 中的 Web 表单中使用 ReportViewer（2012，版本 11）用户控件。我发现我运行了一个报告并且它工作正常，但是我转到另一个报告它在我刷新之前不会运行。

先前带有 iframe 的内容部分已从 dom 中删除，因此我看不出它会如何干扰下一个报告。我的猜测是报告查看器污染了全局命名空间。

无论如何，错误是

```
TypeError: cs is null
return cs.getPropertyValue('direction'); 
```

有谁知道这一点，或者是否有办法在报告查看器之后进行清理，或者是否有更好的报告查看器控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T01:54:34.380

我的申请和你的差不多。我正在使用 jQuery 将 ReportViewer 加载到 DOM 元素中（嵌入在 iframe 中）。

与此类似的东西：

```
var formargs = $("#reportArgsForm").serialize();
var windowheight = $("#content").height() - 8;
var link = '<iframe id="report_iframe" style="height:' + windowheight + 'px;width:99%;overflow: visible;" src="Reports/SimpleReportViewer.aspx?' + formargs + '"></iframe>';

$("#tabs").tabs("option", "active", 1);
$("#tabs-display").html(link); 
```

如果您注意到，报告实际上显示在它自己的 jQuery-UI 选项卡中。我遇到了同样的错误，因为我已升级到 jQuery-UI 1.10.1 并且选项卡[“选择”方法不再起作用](http://jqueryui.com/upgrade-guide/1.9/#deprecated-select-method)。

在我的情况下，错误深埋在 Microsoft.Reporting.WebFormsClient._InternalReportViewer.GetRTLDirection 中。报表查看器代码试图在某些元素上调用 window.getComputedStyle 并且它返回 null。它是 null 因为传入的元素不可见。

一旦我修复了 jQuery-UI 选项卡切换问题，ReportViewer 错误（“cs is null”）就消失了。

# postgresql - 使用 Plpgsql 创建动态表

> ID：14219522
> 
> 赞同：0
> 
> 时间：2013-01-08T16:24:54.900
> 
> 标签：postgresql, plpgsql

我有一个场景，有点复杂。我想创建一个表，其名称和字段由用户定义。设置表的名称并不是很困难，但是一个表可以有 2 个字段和另外 5 个具有不同名称的字段，依此类推。我想用 pl/pgsql 完成这项工作。通常可以在 pl/pgsql 中做到这一点吗？是否可以先读取字段数，然后再读取每个字段的名称？你能给我一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:52:42.077

使用这样的功能：

```
CREATE OR REPLACE FUNCTION mktable(tabname TEXT, fields TEXT[]) 
RETURNS VOID AS $$
DECLARE 
  q TEXT := ''; 
BEGIN
  q := 'CREATE TABLE ' || quote_ident(tabname) || ' ( ';
  for i in array_lower(fields, 1) .. array_upper(fields, 1) loop
    q := q || quote_ident(fields[i]) || ' TEXT ';
    if i <> array_upper(fields, 1) then
      q := q || ',';
    end if; 
  end loop;
  q := q || ' ) ';
  raise notice 'Running query: ';
  raise notice '%', q;
  execute q;
END;
$$ LANGUAGE PLPGSQL; 
```

你可以像这样运行它：

```
SELECT mktable('tab1', ARRAY['a', 'b', 'ccc', 'd d']); 
```

然后你有桌子：

```
 Table "public.tab1"
 Column | Type | Modifiers 
--------+------+-----------
 a      | text | 
 b      | text | 
 ccc    | text | 
 d d    | text | 
```

# jquery - jquery 从克隆中删除元素

> ID：14219524
> 
> 赞同：0
> 
> 时间：2013-01-08T16:24:55.143
> 
> 标签：jquery, clone

```
$('div ul li a')
   .live('click', function() {
      $('div').clone().insertBefore('div:first');
      $(this).parents('div').find('ul li a:last').remove();
   }); 
```

我正在尝试这样做，以便每次单击链接时，克隆的 div 都会从中删除一个链接，直到只剩下 1 个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:09:01.780

这是你想做的吗？

**JS**

```
$('div a').live('click', function () {
  var cloneDiv = $('div:first').clone();
  cloneDiv.find('li:last').remove();
  cloneDiv.insertBefore('div:first');
}); 
```

**HTML**

```
<div>
  <ul>
    <li><a href="#">Link 1</a></li>
    <li><a href="#">Link 2</a></li>
    <li><a href="#">Link 3</a></li>
    <li><a href="#">Link 4</a></li>
  </ul>
</div> 
```

在此处尝试[演示](http://jsfiddle.net/vE65d/1/)

# ruby-on-rails - ActiveRecord 匿名范围

> ID：14219528
> 
> 赞同：3
> 
> 时间：2013-01-08T16:25:02.250
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我正在通过观看 RailsCast[视频](http://railscasts.com/episodes/112-anonymous-scopes)了解匿名范围。当我自己尝试时，它似乎是这样的声明：

```
scope = User.scoped 
```

立即使用 SQL 语句查询数据库：

```
User Load (3.2ms)  SELECT `users`.* FROM `users` 
```

在我什至有机会连锁条件之前。这显然是非常低效的，并且在视频中的作者这样做时不会发生。我错过了什么？

此外，范围在什么时候知道我已经完成了链接条件并且是时候执行查询了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:30:01.537

您是否在控制台中尝试此操作？问题是，如果您键入：

```
scope = User.scoped 
```

`console`尝试检查最后一条语句并触发查询。为避免这种情况，只需在最后返回一些内容：

```
scope = User.scoped; nil 
```

通过这种方式进行`console`检查`nil`，您的`scope`变量不会发生任何事情。这在实际代码中不会成为问题，因为在您定义它之后没有人会立即尝试检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:42:36.350

我不想让您气馁，但可以肯定的是，在 Rails 4 中该方法`scoped`即将被弃用。[这个 RailsCast](http://railscasts.com/episodes/400-what-s-new-in-rails-4)讨论了新版本的更多有趣的新特性。

# java - 为什么 void 在 Java 中不是协变的？

> ID：14219529
> 
> 赞同：9
> 
> 时间：2013-01-08T16:25:02.857
> 
> 标签：java, polymorphism, covariance

如果我有这个界面：

```
public interface Foo {
    void bar();
} 
```

为什么我不能像这样实现它？

```
public class FooImpl implements Foo {
    @Override
    public Object bar() {
         return new Object();
    }
} 
```

似乎 void 应该与一切都是协变的。我错过了什么吗？

编辑：我应该更清楚我正在寻找设计理由，而不是它无法编译的技术原因。使 void 对所有内容都协变会产生负面影响吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T16:28:45.240

`void`只是协变的，`void`因为[JLS 这么说](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.5)：

> 当且仅当以下条件成立时，具有返回类型 R1 的方法声明 d1 可以返回类型替代具有返回类型 R2 的另一个方法 d2：
> 
> *   **如果 R1 是，`void`那么 R2 是`void`。**
>     
>     
> *   如果 R1 是原始类型，则 R2 与 R1 相同。
>     
>     
> *   如果 R1 是引用类型，则：
>     
>     
>     *   R1 是 R2 的子类型，或者 R1 可以通过未经检查的转换（第 5.1.9 节）转换为 R2 的子类型，或者
>         
>         
>     *   R1 = |R2|

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T16:26:53.560

**协方差**意味着如果您的方法`return type`是`Supertype object`可以`sub-type Object`在运行时返回的，则**void**不是`super type of java.lang.Object`（或任何对象，除了 MR NPE 回答的自身之外）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:00:48.593

从技术上讲`void`，它不能是协变返回类型，因为调用者需要知道堆栈布局。调用返回对象的函数将导致在 INVOKEVIRTUAL/INTERFACE 之后堆栈顶部的对象引用。`Void`返回类型不会在堆栈顶部留下任何内容，因此这些函数是二进制不兼容的。

所以 JLS 正确地说这是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T16:26:17.553

`void`实际上意味着它什么也不返回。您可能会对`void *`C/C++ 中的 a 感到困惑。如果您将界面更改为

```
public interface Foo {
    Object bar();
} 
```

它会正常工作，因为 Java 中的所有对象都继承`Object`.

所以，你可以这样做：

```
public class FooImpl implements Foo {

    @Override
    public Object bar() {
         return new SpecialObject();
    }

}

SpecialObject obj = (SpecialObject) new FooImpl().bar(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T16:27:36.197

返回类型必须匹配被覆盖的方法。

```
Foo foo = new FooImpl();
foo.bar(); 
```

除非所有实现都符合接口并返回相同的对象（或什么都没有），否则我怎么知道会返回什么？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T17:33:45.390

`void`不是java文件系统的一部分。

如果我们把它变成一个类型，它更像是一个空类型，所以它应该是所有其他类型的子类型，即它与其他类型是逆变的。

在您的示例中，超类规定不应返回任何内容，但子类会返回某些内容，因此子类违反了超类的合同。

`Object`与其他类型协变，如果这是你想要的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T16:28:17.063

协变返回类型通常意味着可以被更窄的类型替换。在中，和或其他任何事物`Java`之间没有这种关系（超类型-子类型） 。`void``Object`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-08T16:49:27.513

如果允许这样做，将无法确定是否应该编译。

```
 Foo foo = ...
 Object o = foo.bar(); // is it void or an Object ? 
```

# sql-server - 为什么我的执行计划中出现了排序？

> ID：14219533
> 
> 赞同：22
> 
> 时间：2013-01-08T16:25:16.857
> 
> 标签：sql-server, performance, sql-server-2008

我有下面运行非常缓慢的 sql 查询。我查看了执行计划，它声称 Files.OrderId 上的排序是成本最高的操作 (53%)。如果我不在任何地方按 OrderId 订购，为什么会发生这种情况？在 File.OrderId 上创建索引是我最好的选择吗？

如果有人感兴趣，[执行计划。](http://www.xmlplayground.com/TdJU7P)

```
with custOrders as
(
    SELECT c.firstName + ' ' + c.lastname as Customer, c.PartnerId , c.CustomerId,o.OrderId,o.CreateDate, c.IsPrimary
    FROM Customers c
    LEFT JOIN CustomerRelationships as cr
        ON c.CustomerId = cr.PrimaryCustomerId
    INNER JOIN Orders as o
       ON c.customerid = o.customerid 
           OR (cr.secondarycustomerid IS NOT NULL AND o.customerid = cr.secondarycustomerid)
    where c.createdate >= @FromDate + ' 00:00' 
       AND c.createdate <= @ToDate + ' 23:59' 
),
 temp as
(
SELECT Row_number() 
         OVER ( 
           ORDER BY c.createdate DESC)                    AS 'row_number', 
       c.customerid as customerId, 
       c.partnerid as partnerId, 
       c.Customer, 
       c.orderid as OrderId, 
       c.createdate as CreateDate, 
       Count(f.orderid)                                   AS FileCount, 
       dbo.Getparentcustomerid(c.isprimary, c.customerid) AS ParentCustomerId, 
       au.firstname + ' ' + au.lastname                   AS Admin, 
       '' as blank, 
       0  as zero
FROM   custOrders c 
       INNER JOIN files f 
               ON c.orderid = f.orderid 
       INNER JOIN admincustomers ac 
               ON c.customerid = ac.customerid 
       INNER JOIN adminusers au 
               ON ac.adminuserid = au.id 
       INNER JOIN filestatuses s 
               ON f.statusid = s.statusid 
WHERE  ac.adminuserid IS NOT NULL 
       AND f.statusid NOT IN ( 5, 6 ) 
GROUP  BY c.customerid, 
          c.partnerid, 
          c.Customer, 
          c.isprimary, 
          c.orderid, 
          c.createdate, 
          au.firstname, 
          au.lastname 
) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T16:41:34.417

当需要连接两个表时，SQL Server 有三种算法可供选择。Nested-Loops-Join、Hash-Join 和 Sort-Merge-Join。它根据成本估算选择哪一个。在这种情况下，它认为，根据可用的信息，Sort-Merge-Join 是正确的选择。

在 SQL Server 执行计划中，Sort-Merge 被拆分为两个操作符，Sort 和 Merge-Join，因为排序操作可能不是必需的，例如，如果数据已经排序。

有关连接的更多信息，请查看我的连接系列：http: //sqlity.net/en/1146/a-join-a-day-introduction/ 关于排序合并连接的文章在这里：[http](http://sqlity.net/en/1146/a-join-a-day-introduction/) [:// sqlity.net/en/1480/a-join-a-day-the-sort-merge-join/](http://sqlity.net/en/1480/a-join-a-day-the-sort-merge-join/)

* * *

为了使您的查询更快，我首先会查看索引。您在查询中有一堆聚集索引扫描。如果您可以用搜索替换其中的一些，您很可能会更好。还要检查 SQL Server 生成的估计值是否与实际执行计划中的实际行数相匹配。如果它们相距甚远，SQL Server 通常会做出错误的选择。因此，提供更好的统计数据也可以帮助您查询性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:49:02.437

SQL Server 正在执行排序以启用该排序运算符右侧的数据集与`Orders`表中的记录之间的合并联接。Merge join 本身是一种连接数据集中所有记录的非常有效的方法，但它要求每个要连接的数据集按照连接键和相同的顺序进行排序。

由于`PK_Orders`键已按 排序`OrderID`，SQL Server 决定利用这一点，对连接的另一端（排序右侧的其他内容）进行排序，以便在计划中的该点将两个数据集合并在一起. 合并连接的常见替代方法是哈希连接，但这对您没有帮助，因为您将使用昂贵的哈希连接运算符而不是排序和合并。查询优化器已确定排序和合并在这种情况下更有效。

计划中代价高昂的步骤的根本原因是需要将订单表中的所有记录合并到数据集中。有没有办法限制来自`files` 表的记录？`files.statusid`如果不在 5,6 中的记录小于总表大小的 10%，则索引可能会有所帮助。

QO 认为大部分记录最后都会被过滤掉。尝试将尽可能多的过滤条件推送回记录源，以便在计划中间处理更少的记录。

**编辑：**我忘了提，有一个我们可以查看的执行计划非常有帮助。有没有什么方法可以得到一个**实际**的执行计划结果来查看通过这些操作符的真实记录数？有时估计的记录数可能会有所偏差。

**编辑：**深入研究倒数第二个过滤器运算符的谓词字段，总结：

```
c.CustomerId=o.CustomerId
OR o.CustomerId=cr.SecondaryCustomerId AND cr.SecondaryCustomerId IS NOT NULL 
```

`Orders`看起来SQL Server在查询中的所有可能匹配记录之间产生交叉连接`Customers`（第二个到最后一个过滤运算符右侧的计划），然后查看具有该条件的每个记录以查看它是否确实匹配。注意进入过滤器的线是如何很粗的，而出来的线是很细的？这是因为在该运算符之后估计的行数从 21k 变为 4。忘记我之前说的，这可能是计划中的主要问题。即使这些列上有索引，SQL Server 也无法使用它们，因为连接条件太复杂。它导致计划将所有记录合并在一起，而不是只寻找您需要的记录，因为它不能立即使用完全连接谓词。

我的第一个想法是将 CTE 重新表述`custOrders`为两个数据集的联合：一个 using`CustomerId`和一个 using `SecondaryCustomerId`to join。这将复制 CTE 其余部分的工作，但如果它能够正确使用索引，它可能是一个巨大的胜利。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-30T15:10:46.387

我知道这个问题已经很老了，但是我遇到了同样的问题，并意识到我的桌子突然变慢的原因完全不同。症状是相同的，更新以前闪电般快速的视图很慢。“排序”给出 40% 的成本。这个解决方案可能对某人有用，而且很简单。加入表格时，请确保您是在“点对点”的基础上加入的。我在 ID 上加入了两个表。但是在一个表中，我的 ID 设置为 int，而在另一个表中设置为 nvarchar。我更正了这一点，将它们都定义为相同的类型，并且视图恢复到闪电般的速度。

希望这将帮助其他人避免花费一周时间试图找出 SQL 出了什么问题，而这确实是一个 PEBKAC 时刻。

（键盘和椅子之间存在问题）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T16:40:51.877

我认为这种连接正在发生这种情况：

```
FROM   custOrders c 
       INNER JOIN files f 
               ON c.orderid = f.orderid 
```

我会在包含 orderid 和 statusid 列的文件上创建一个索引，因为查询也使用 statusid 列。

您可能还需要考虑以下更改：

1.  您不需要“ac.adminuserid IS NOT NULL”，因为这已包含在 adminusers 和 admincustomers 之间的内部连接中
2.  将测试“f.statusid NOT IN (5, 6)”更改为肯定条件（例如 In），因为处理否定条件的成本更高。

# java - 使用 Java Rally REST API 附加文件

> ID：14219534
> 
> 赞同：2
> 
> 时间：2013-01-08T16:25:18.453
> 
> 标签：java, rest, rally

可以使用 Java Rally REST API 将 excel 文件附加到测试用例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T00:55:22.087

Here's an example of how to do this in Java REST. It's for an image file, but you get the idea :)

```
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.rallydev.rest.RallyRestApi;
import com.rallydev.rest.request.CreateRequest;
import com.rallydev.rest.request.DeleteRequest;
import com.rallydev.rest.request.GetRequest;
import com.rallydev.rest.request.QueryRequest;
import com.rallydev.rest.request.UpdateRequest;
import com.rallydev.rest.response.CreateResponse;
import com.rallydev.rest.response.DeleteResponse;
import com.rallydev.rest.response.GetResponse;
import com.rallydev.rest.response.QueryResponse;
import com.rallydev.rest.response.UpdateResponse;
import com.rallydev.rest.util.Fetch;
import com.rallydev.rest.util.QueryFilter;
import com.rallydev.rest.util.Ref;

import java.io.RandomAccessFile;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;

import org.apache.commons.codec.binary.Base64;

public class RestExample_AddAttachmentToUserStory {

    public static void main(String[] args) throws URISyntaxException, IOException {

        // Create and configure a new instance of RallyRestApi
        // Connection parameters
        String rallyURL = "https://rally1.rallydev.com";
        String wsapiVersion = "1.40";
        String applicationName = "RestExample_AddAttachmentToUserStory";

        // Credentials
        String userName = "user@company.com";
        String userPassword = "topsecret";

        RallyRestApi restApi = new RallyRestApi(
                        new URI(rallyURL),
                        userName,
                        userPassword);
        restApi.setWsapiVersion(wsapiVersion);
        restApi.setApplicationName(applicationName);

        // User settings
        String testerUserName = "attachmentuser@company.com";

        // Workspace and Project Settings
        String myWorkspace = "My Workspace";
        String myProject = "My Project";

        // FormattedID of Existing Test Case to Query
        String existStoryFormattedID = "US43";       

        //Read User
        QueryRequest userRequest = new QueryRequest("User");
        userRequest.setFetch(new Fetch("UserName", "Subscription", "DisplayName"));
        userRequest.setQueryFilter(new QueryFilter("UserName", "=", testerUserName));
        QueryResponse userQueryResponse = restApi.query(userRequest);
        JsonArray userQueryResults = userQueryResponse.getResults();
        JsonElement userQueryElement = userQueryResults.get(0);
        JsonObject userQueryObject = userQueryElement.getAsJsonObject();
        String userRef = userQueryObject.get("_ref").getAsString();

        // Get reference to Workspace of interest
        QueryRequest workspaceRequest = new QueryRequest("Workspace");
        workspaceRequest.setFetch(new Fetch("Name", "Owner", "Projects"));
        workspaceRequest.setQueryFilter(new QueryFilter("Name", "=", myWorkspace));
        QueryResponse workspaceQueryResponse = restApi.query(workspaceRequest);
        String workspaceRef = workspaceQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").getAsString();

        // Get reference to Project of interest
        QueryRequest projectRequest = new QueryRequest("Project");
        projectRequest.setFetch(new Fetch("Name", "Owner", "Projects"));
        projectRequest.setQueryFilter(new QueryFilter("Name", "=", myProject));
        QueryResponse projectQueryResponse = restApi.query(projectRequest);
        String projectRef = projectQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").getAsString();      

        // Query for existing User Story
        QueryRequest  existUserStoryRequest = new QueryRequest("HierarchicalRequirement");
        existUserStoryRequest.setFetch(new Fetch("FormattedID","Name"));
        existUserStoryRequest.setQueryFilter(new QueryFilter("FormattedID", "=", existStoryFormattedID));
        QueryResponse userStoryQueryResponse = restApi.query(existUserStoryRequest);
        JsonObject existUserStoryJsonObject = userStoryQueryResponse.getResults().get(0).getAsJsonObject();
        String existUserStoryRef = userStoryQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").getAsString();

        // Read In Image Content
        String imageFilePath = "/Users/username/Documents/";
        String imageFileName = "image1.png";
        String fullImageFile = imageFilePath + imageFileName;
        String imageBase64String;
        long attachmentSize;

        // Open file
        RandomAccessFile myImageFileHandle = new RandomAccessFile(fullImageFile, "r");

        try {
            // Get and check length
            long longlength = myImageFileHandle.length();
            // Max upload size for Rally attachments is 5MB
            long maxAttachmentLength = 5120000;
            if (length > maxAttachmentLength) throw new IOException("File size too big for Rally attachment, > 5 MB");

            // Read file and return data
            byte[] fileBytes = new byte[length];
            myImageFileHandle.readFully(fileBytes);
            imageBase64String = Base64.encodeBase64String(fileBytes);
            attachmentSize = length;

            // First create AttachmentContent from image string
            JsonObject myAttachmentContent = new JsonObject();
            myAttachmentContent.addProperty("Content", imageBase64String);
            CreateRequest attachmentContentCreateRequest = new CreateRequest("AttachmentContent", myAttachmentContent);
            CreateResponse attachmentContentResponse = restApi.create(attachmentContentCreateRequest);
            String myAttachmentContentRef = attachmentContentResponse.getObject().get("_ref").getAsString();
            System.out.println("Attachment Content created: " + myAttachmentContentRef);            

            // Now create the Attachment itself
            JsonObject myAttachment = new JsonObject();
            myAttachment.addProperty("Artifact", existUserStoryRef);
            myAttachment.addProperty("Content", myAttachmentContentRef);
            myAttachment.addProperty("Name", "AttachmentFromREST.png");
            myAttachment.addProperty("Description", "Attachment From REST");
            myAttachment.addProperty("ContentType","image/png");
            myAttachment.addProperty("Size", attachmentSize);
            myAttachment.addProperty("User", userRef);          

            CreateRequest attachmentCreateRequest = new CreateRequest("Attachment", myAttachment);
            CreateResponse attachmentResponse = restApi.create(attachmentCreateRequest);
            String myAttachmentRef = attachmentResponse.getObject().get("_ref").getAsString();
            System.out.println("Attachment  created: " + myAttachmentRef);  

            if (attachmentResponse.wasSuccessful()) {
                System.out.println("Successfully created Attachment");
            } else {
                String[] attachmentContentErrors;
                attachmentContentErrors = attachmentResponse.getErrors();
                        System.out.println("Error occurred creating Attachment: ");
                for (int i=0; i<attachmentContentErrors.length;i++) {
                        System.out.println(attachmentContentErrors[i]);
                }                   
            }
        } catch (Exception e) {
                System.out.println("Exception occurred while attempting to create Content and/or Attachment: ");
                e.printStackTrace();            
        }

        finally {
            //Release all resources
            restApi.close();
        }                
    }
} 
```

# email - 电子邮件阅读器支持——

> ID：14219535
> 
> 赞同：1
> 
> 时间：2013-01-08T16:25:21.777
> 
> 标签：email, html-email

有时 html 在各种电子邮件阅读器中无法正确显示。

在 html 电子邮件中使用长连字符是否安全？

`&mdash;`

我正在使用 php 创建 html 电子邮件并通过 smtp API 发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:49:44.773

m-dash 的代码可以工作，但根据读者的不同，正确输入可能会很痛苦。大多数读者都有一个“友好”的用户界面，假设您想查看您正在输入的内容，而不是您正在输入的代码的呈现结果。

在许多情况下，您必须输入或粘贴实际的 m-dash，UI 会将其转换为幕后代码。在其他情况下，您将能够直接编辑 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T00:45:54.890

替换`&mdash;`为：

```
 `=?windows-1252?Q?=97?=` 
```

`将在电子邮件标题中呈现 mdash。`

# android - 在 Android 中，在每个应用程序运行后保持对象值的最简单方法是什么？

> ID：14219537
> 
> 赞同：0
> 
> 时间：2013-01-08T16:25:25.770
> 
> 标签：android, variables, null

存储单个对象值以使该对象在下次执行应用程序时不为空的最简单方法是什么？

例如：

```
public class MainActivity extends Activity {
    ...
    String X = "Hello"
} 
```

下次我运行这个应用程序时，X 仍将被定义为“Hello”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:32:09.297

您需要查看[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)，看看哪个最适合您的需求。`key/value`如果它是精简数据，您可能希望将它添加到某个地方的 sharedprefs 中，它使用一对。否则，您可能需要一个 SQLite DB。但是`X`总是会像你一样“你好”，所以你需要一个函数来设置 sharedprefs 或你使用的任何东西。我假设您只是为了简单起见而放置了该代码，但只是指出了这一点。

# optimization - Lucene 更新文档速度

> ID：14219539
> 
> 赞同：0
> 
> 时间：2013-01-08T16:25:34.200
> 
> 标签：optimization, lucene

我同时通过 Lucene 进行索引。5k 个文档，每个文档大约有 5k 个文档。大小 20kB，我需要通过 updateDocument 方法经常更新它们。

我正在使用 NRT，其中最多可能有 50 个线程更新文档。在 100 次更新/插入或 10 分钟超时后，提交在单独的线程中完成。

到目前为止，每个文档更新的平均持续时间为 1 秒，最终达到峰值（80 秒，需要分析具体文档）。

有人可以告诉我应该使用什么策略/优化来加速文档更新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:39:23.270

我发现当应用程序要求使用最新的阅读器时，NRT 会刷新内存文档，这从索引的角度来看并没有好处。

切换到正常索引并更改刷新策略以由项目计数而不是内存来处理，因为更大的文档会导致频繁刷新。

# java - 动态更新 CardLayout 不起作用

> ID：14219540
> 
> 赞同：0
> 
> 时间：2013-01-08T16:25:39.463
> 
> 标签：java, swing, jpanel, layout-manager, cardlayout

我的代码使用卡片布局向用户显示（预定义的）带有 JButton 的 JPanel，然后显示一个动态生成的 JPanel 及其响应的反馈，然后再继续下一个预定义的 JPanel。但是，我无法显示动态生成的 JPanel，并且在使用 revalidate() 和 repaint() 之类的命令时有些混乱，我不知道接下来要尝试什么。我可能犯了一个相当简单的错误，但是在尝试了很多组合之后，我有点卡住了！

编辑：对不起，那是我之前发布的一段相当无用的代码！我花时间编写了一个更好的 SSCCE，它看起来确实与使用 Thread.sleep 有关，但我对此并不满意，所以不太确定我需要做什么才能使其正常工作。这是我的例子：

```
public class ExampleClass implements ActionListener{

public void doStuff(){
    ExampleClass ec = new ExampleClass();
    startExperiment();

}

public static void main(String[] args){

    ExampleClass e = new ExampleClass();
    e.doStuff();
}

JPanel j;
int count = 0;
CardLayout cards = new CardLayout();
JButton button;

public void startExperiment(){

    // Create frame and JFrames
    JFrame trial = new JFrame();

    trial.setSize(800,600);

    JPanel j1 = new JPanel();
    JPanel j2 = new JPanel();
    j1.setSize(800,600);
    button = new JButton("Click me!");
    button.addActionListener(this);

    j2.setSize(800,600);
    j1.add(new JLabel("A Panel"));
    j1.add(button);
    j2.add(new JLabel("Another Panel"));
    JPanel[] pans = {j1,j2};

    j = new JPanel();
    j.setLayout(cards);

    for(int i=0;i<pans.length;i++){
        j.add(pans[i], "Card"+i);
    }

    JPanel end = new JPanel();
    end.add(new JLabel("The end!"));
    j.add(end,"End");
    trial.add(j);
    trial.setVisible(true);
}

public void nextTrial(){

    JPanel ps = new JPanel();
    ps.add(new JLabel("This panel won't display!"));
    j.add(ps,"Pause"+count);
    cards.show(j,"Pause"+count);

}

class aThread extends Thread {
    public aThread(int duration){
        dur=duration;
    }
    int dur;
    public void run() {
        try {
            Thread.sleep(dur);
        }
        catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

public void pause(int dur){
    aThread myThread = new aThread(dur);
    myThread.start();
    try {
        myThread.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

}

@Override
public void actionPerformed(ActionEvent e) {
    if(e.getSource()==button){
        System.out.println("Ow!");
        nextTrial();
        pause(500);
        cards.show(j,"Card1");
    }

}

} 
```

我意识到这与我大约 12 个月前在这里问过的问题类似（http://stackoverflow.com/questions/9200072/jpanel-not-updating-cardlayout-properly-when-i-use-sleep?rq= 1），但我错误地认为使用 Thread.join() 可以解决我提到的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:36:15.533

添加通话

```
revalidate();
repaint(); 
```

在容器中添加/删除组件之后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:52:48.960

如果您“对 revalidate() 和 repaint() 之类的命令有点混乱”，那么，如果

```
pause(500); 
```

与 Thread.sleep() 有什么关系，很可能是问题所在。

它会阻止绘画，然后立即显示下一张卡片。

可以肯定的是，发布一个示例可编译程序，如前所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T01:55:52.583

感谢所有回答的人，为我指明了正确的方向。我最后想通了，这与我对线程和同步性的理解不足有关。如果其他人有类似的问题，我通过将代码的最后一位更改为：

```
public void actionPerformed(ActionEvent e) {
    if(e.getSource()==button){

         nextTrial();

        SwingUtilities.invokeLater(new Runnable() {
              public void run() {
                  pause(500);
                  cards.show(j,"Card1");

                }
              });
    }
} 
```

# java - Java 程序不能作为 Java 应用程序运行

> ID：14219541
> 
> 赞同：0
> 
> 时间：2013-01-08T16:25:41.533
> 
> 标签：java, eclipse, swing, ant

我正在尝试运行一年前为一个班级制作的 Java 项目，但是我遇到了一些问题。

当我尝试运行这个 java 项目时，eclipse 中没有选项可以将它作为 java 应用程序运行。相反，它只允许我 select `Ant Build`，它在选择时会引发错误：`Unable to find Ant file to run.`我的代码包含一个 main 函数，因此出现了问题：为什么我的代码不只是运行 main 函数？

注意：我不想发布我的整个代码，因为它有近一千行长并分为 6 个类，但是如果我收到要求全部的评论，我会的。包括的只是主要课程。

我注意到其他类的顶部包括该行`package edu.truman.cs260.talpersP3;`。我只是从我的电子邮件收件箱中下载了这些 java 文件，所以我需要以某种方式打包它们吗？

我的主要课程：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

import edu.truman.cs260.talpersP3.*;

public class TalpersProject3

{

private static final int FRAMES_PER_SECOND = 24;
private static final int ICON_WIDTH = 500;
private static final int ICON_HEIGHT = 500;
private static final int DELAY = 1000 / FRAMES_PER_SECOND;

public static void main(String[] args)
{
    //constructs the AnimationComponent
    final AnimationComponent a = new AnimationComponent();
    //creates frame and buttonpanel
    JFrame frame = new JFrame();
    JPanel buttonpanel;

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //declares the two buttons
    JButton squarebutton = new JButton("Square");
    JButton circlebutton = new JButton("Circle");

    //button implementation
    squarebutton.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent event)
        {
            a.add(new BouncySquare(50, 50, 100));
            a.repaint();
        }
    });

    circlebutton.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent event)
        {
            a.add(new BouncyCircle(50, 50, 50));
            a.repaint();
        }
    });

    //sets the size of the AnimationComponent
    a.setSize(ICON_WIDTH,ICON_HEIGHT);

    //constructs the buttonpanel
    buttonpanel = new JPanel();

    //adds the 2 buttons to the panel
    buttonpanel.add(squarebutton);
    buttonpanel.add(circlebutton);

    //frame layout and formatting
    frame.setLayout(new BorderLayout());
    frame.add(buttonpanel, BorderLayout.SOUTH);
    frame.add(a, BorderLayout.CENTER);
    frame.setSize(ICON_WIDTH, ICON_HEIGHT+100);
    frame.setVisible(true);

    //construction of the timer
    Timer t = new Timer(DELAY, new ActionListener()
    {
        public void actionPerformed(ActionEvent event)
        {
            a.bounceCall(); //checks bounds and translates
            a.repaint();
        }
    });
    //timer starts
    t.start();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:30:41.693

在编辑器中打开带有主类的 Java 文件，然后右键单击并从上下文菜单中选择“run as ... Java Application”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T13:40:10.197

您的 java 文件是否在构建路径上？如果不是，则 eclicpse 图标具有轮廓“J”，如[eclipse helios 的图标](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-icons.htm)所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:29:41.803

由于您的课程具有正确的 main(..)，因此它应该在上下文菜单中真正显示“作为应用程序运行”。也许 Eclipse 项目以一种或另一种方式被破坏了。获取最新版本的 Eclipse，创建一个新的、空的、简单的 Java 项目并将您的文件复制到新项目的源文件夹中。

# java - 具有 wsu:Id="SecurityToken-..." 属性的 UsernameToken

> ID：14219542
> 
> 赞同：3
> 
> 时间：2013-01-08T16:25:45.360
> 
> 标签：java, soap, axis, wss4j

我正在使用 WSS4J 1.6 和 Axis 1.4。

我正在使用 org.apache.ws.security.message.WSSecUsernameToken 创建 UsernameToken。

我不明白的是**wsu:Id**属性。根据 Web 服务规范，它必须采用*"SecurityToken-24ada6f8-4626-4269-b786-a22361bfde78"*的形式。

无论我做什么，**wsu:Id**属性都包含“UsernameToken-123”，但是根据 Web 服务规范，它必须采用“SecurityToken-24ada6f8-4626-4269-b786-a22361bfde78”的形式。

我完全不知道如何实现这一点，谷歌已经干涸。
那么，谁能告诉我我需要做什么？

现在的 UsernameToken xml 就是这样。

```
<wsse:UsernameToken wsu:Id="UsernameToken-133"
     xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
     xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <wsse:Username>stan</wsse:Username>
    <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">secrit</wsse:Password>
  </wsse:UsernameToken> 
```

我希望它出现的 UsernameToken xml。

```
<wsse:UsernameToken wsu:Id="SecurityToken-24ada6f8-4626-4269-b786-a22361bfde78"
     xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
     xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <wsse:Username>stan</wsse:Username>
    <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">secrit</wsse:Password>
  </wsse:UsernameToken> 
```

这是我用来创建肥皂消息的代码。

```
public String soapTest() throws Exception {
    MessageFactoryImpl messageFactory = new MessageFactoryImpl();
    SOAPMessage soapMessage = null;
    soapMessage = messageFactory.createMessage();
    Message message = (Message)soapMessage;
    SOAPEnvelope unsignedEnvelope = message.getSOAPEnvelope();
    unsignedEnvelope.addNamespaceDeclaration( "xsd", "http://www.w3.org/2001/XMLSchema" );
    unsignedEnvelope.addNamespaceDeclaration( "xsi", "http://www.w3.org/2001/XMLSchema-instance" );
    unsignedEnvelope.addNamespaceDeclaration( "enc", "http://schemas.xmlsoap.org/soap/encoding/" );
    unsignedEnvelope.addNamespaceDeclaration( "env", "http://schemas.xmlsoap.org/soap/envelop/" );
    unsignedEnvelope.addNamespaceDeclaration( "wsa", "http://schemas.xmlsoap.org/ws/2004/03/addressing" );
    unsignedEnvelope.addNamespaceDeclaration( "wsse", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" );
    unsignedEnvelope.addNamespaceDeclaration( "wsu", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" );
    unsignedEnvelope.addNamespaceDeclaration( "ws", "http://ws.stupidsoap.com" );

    SOAPBody soapMsgBody = (SOAPBody)soapMessage.getSOAPBody();
    org.apache.axis.message.SOAPEnvelope soapMsgEnvelope = ((Message)soapMessage).getSOAPEnvelope();

    SOAPBodyElement be = (SOAPBodyElement)soapMsgBody.addChildElement( soapMsgEnvelope.createName( "addTwoNumbers", "", "http://ws.stupidsoap.com" ) );
    be.addChildElement( "number1" ).addTextNode( "5" );
    be.addChildElement( "number2" ).addTextNode( "10" );

    org.w3c.dom.Document doc = (org.w3c.dom.Document)soapMsgEnvelope.getAsDocument();
    WSSecHeader secHeader = new WSSecHeader();
    secHeader.insertSecurityHeader( doc );

    WSSecUsernameToken utBuilder = new WSSecUsernameToken();
    utBuilder.setPasswordType( WSConstants.PASSWORD_TEXT );
    utBuilder.setUserInfo( "stan", "secrit" );
    utBuilder.addNonce();
    utBuilder.addCreated();
    utBuilder.build( doc, secHeader );

    return org.apache.ws.security.util.XMLUtils.PrettyDocumentToString( doc );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-06T02:49:24.433

尝试这个：

```
WsuIdAllocator idAllocator = new WsuIdAllocator() {
    public String createId(String prefix, Object o) {
        return "SecurityToken-" + UUIDGenerator.getUUID();
    }

    public String createSecureId(String prefix, Object o) {
        return "SecurityToken-" + UUIDGenerator.getUUID();
    }
};

WSSecUsernameToken utBuilder = new WSSecUsernameToken();
WSSConfig wsConfig = new WSSConfig();
wsConfig.setIdAllocator(idAllocator);

utBuilder.setWsConfig(wsConfig);
utBuilder.setPasswordType( WSConstants.PASSWORD_TEXT );
utBuilder.setUserInfo( "stan", "secrit" ); 
```

# twitter - 为什么 Twitter 小部件只能在本地工作？

> ID：14219543
> 
> 赞同：-2
> 
> 时间：2013-01-08T16:25:45.010
> 
> 标签：twitter

在本地工作，但不是在这里...

[http://staging.bangface.com/TwitterTest.aspx](http://staging.bangface.com/TwitterTest.aspx)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:28:07.813

检查浏览器的 JavaScript 错误控制台。

> 您尚未将此域列入您的 Twitter 小部件的白名单。转到[https://twitter.com/settings/widgets/274159032581885952/edit](https://twitter.com/settings/widgets/274159032581885952/edit)并将“staging.bangface.com”添加到此时间线的“域”列表中。

# c# - 通过 C# 代码隐藏动态更改 DIV 位置

> ID：14219548
> 
> 赞同：0
> 
> 时间：2013-01-08T16:26:00.733
> 
> 标签：c#, asp.net, css, html

我为我正在处理的页面创建了几个可移动的“小部件”（带有文本、图像内容的 DIV）。

用户当前可以在页面上拖动 DIV，在页面卸载时将新位置保存在数据库中。

在 page_load 上，我可以检索每个可移动 DIV 的最近保存的 Top 和 Left CSS 值，并且我想将每个 DIV 设置为其在页面上各自保存的位置。（因此，当用户登录时，DIVS 与他们上次看到的位置相同。）

我的问题是从 C# 代码设置顶部和左侧样式不会影响 DIVS 的位置。设置其他样式，例如背景颜色等一直工作正常，但设置位置没有任何作用。

我从数据库中读取的 Top 和 Left 数字都可以，所以那里没有错误。

这是一个简单的例子：

C# 代码背后

```
 SearchBox.Attributes.Add("style", "top: 111px;");

  SearchBox.Attributes.Add("style", "left: 144px;"); 
```

ASPX

```
<div id="SearchBox" runat="server"  style="position: absolute; width: 157px; z-index: 100; background-image: url('Images/tagsbox.png'); height: 169px;">

text text text text text text text    

</div> 
```

有人知道为什么职位保持不变吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:48:23.893

感谢大家的回复。我找到了答案——

使用

```
SearchBox.Attributes.Add("style", "left: 144px;"); 
```

行将 SearchBox 的样式代码替换为“left: 144px;”，而不是像我想要的那样添加额外的元素。

使用的正确行是：

```
SearchBox.Style.Add("left", "144px"); 
```

它实际上添加了样式元素而不是替换它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:35:16.957

您需要使用客户端语言（例如 jQuery）调整 div 客户端，将值存储在隐藏字段中，然后使用[Jquery](http://jquery.com)从服务器的值中重新定位 div

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:57:19.740

试着把它放在 ASPX 中：

```
<%
  int topValue = 111;
  int leftValue = 144;
%>
<div id="SearchBox" runat="server" style="position: absolute; width: 157px; z-index: 100; background-image: url('Images/tagsbox.png'); height: 169px; top: <%= topValue %>px; left: <%= leftValue %>px;"
      text text text text text text text    
</div> 
```

只需设置`topValue`并`leftValue`从数据库中。

# php - 按天将日期数组拆分为不同的数组

> ID：14219549
> 
> 赞同：1
> 
> 时间：2013-01-08T16:26:01.467
> 
> 标签：php

我有一个一周的数组，带有这样的时间戳`2013-01-07 06:55:34`，我想做的是每天将数组拆分为 7 个不同的数组。这在PHP中可能吗？

我如何创建数组是这样的

```
$sqlCount="SELECT time_stamp FROM `download_log` WHERE WEEK(`time_stamp`) = WEEK(CURRENT_TIMESTAMP) AND YEAR(`time_stamp`) = YEAR(CURRENT_TIMESTAMP)";
$queryCount = mysql_query($sqlCount) or die(mysql_error());

$dates = array();

while(($row =  mysql_fetch_assoc($queryCount))) {
    $dates[] = $row['time_stamp'];
} 
```

我想要的是 7 个不同的数组`$monday $tuesday etc.`，每个数组都有数组中的天`$dates`数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:31:45.550

这可以通过 PHP 的[`date()`](http://php.net/manual/en/function.date.php)函数和一些循环操作轻松完成。

类似于以下内容的内容应该可以帮助您：

```
// array to hold all of the dates in
$dates = array('Mon' => array(), 'Tue' => array(), 'Wed' => array(),
               'Thu' => array(), 'Fri' => array(), 'Sat' => array(),
               'Sun' => array());

while(($row =  mysql_fetch_assoc($queryCount))) {
    // get the day of the week for the current element
    $dayOfWeek = date('D', $row['time_stamp']);

    // add the current element to the correct day-entry in the `$dates` array
    $dates[$dayOfWeek][] = $row;
} 
```

这是一个示例模板，可以调整为使用您喜欢的任何索引（缩写的星期名称、完整的星期名称、数字星期几等）。查看函数中的可用值`date()`并调整为更适合您需求的值。

**编辑**
我在`for`上面定制了我的原始/通用循环以适合`while`从数据库读取的循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T15:20:35.837

我不确定我是否非常清楚自己想要什么，但我发现这就是我正在做的

```
$mon = array();
$tue = array();
$wed = array();
$thur = array();
$fri = array();
$sat = array();
$sun = array();

foreach ($dates as $value) {

if(date('D', strtotime($value)) == 'Mon') {
    $mon[] = $value;
    }
    if(date('D', strtotime($value)) == 'Tue') {
    $tue[] = $value;
    }
    if(date('D', strtotime($value)) == 'Wed') {
    $wed[] = $value;
    }
    if(date('D', strtotime($value)) == 'Thu') {
    $thur[] = $value;
    }
    if(date('D', strtotime($value)) == 'Fri') {
    $fri[] = $value;
    }
    if(date('D', strtotime($value)) == 'Sat') {
    $sat[] = $value;
    }
    if(date('D', strtotime($value)) == 'Sun') {
    $sun[] = $value;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:39:39.600

[**`WEEKDAY()`**](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_weekday)为什么不使用MySQL中的内置函数？

```
$sqlCount = "SELECT WEEKDAY(`time_stamp`) AS 'weekday', `time_stamp` ..."; 
```

然后，您可以推送日期，例如

```
$dates[$row['weekday']][] = $row['time_stamp']; 
```

另一种方法是内置[**`DATE_FORMAT()`**](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数。以下使用（第二个参数）将为您提供缩写的工作日名称。

```
$sqlCount = "SELECT DATE_FORMAT(`time_stamp`,'%a') AS 'weekday', `time_stamp` ..."; 
```

# ios - 在 iOS 中保持纵横比的同时缩放坐标

> ID：14219552
> 
> 赞同：3
> 
> 时间：2013-01-08T16:26:05.550
> 
> 标签：ios, math, drawing, normalization

我有一个 2D 坐标数组，用于在框中绘制曲线（w，h）。现在我想将坐标缩放到一个框 (x,y) 中，其中 x 或 y 或两者都小于 w 和 h。技巧部分是我必须保持纵横比。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:44:29.627

我不确定我的问题是否正确，但如果我这样做了，那应该很容易：

1.检查你的新边（`x`或`y`）哪个更小；

`x/w`2.除以(if `x<y`)或`y/h`(if )得到比例尺`y<x`；

3.一旦你知道了这个比率，用那个值按比例缩放你的路径。

你做最后一步的方式，这取决于你如何保持/绘制你的阵列。如果它只是一个简单的点缓冲区，则可以使用[矩阵缩放](http://en.wikipedia.org/wiki/Scaling_%28geometry%29)。此外，虽然它超出了问题的范围，但如果您需要非常快地完成它（路径有很多点），请查看 Apple 的[Accelerate](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/AccelerateFWRef/_index.html)矩阵/向量乘法框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:42:48.593

如果您需要保持比例，则需要进行纵横匹配或纵横填充。无论哪种方式，您都需要为 x 和 y 变换找到一个比例因子。

首先计算 X 和 Y 的单个神圣因素

```
(w1, h1) -> (w2, h2)  (assuming all floats)

float xScaleFactor = w2 / w1;
float yScaleFactor = h2 / h1; 
```

现在，由于您要使其更小，因此请采用最小比例因子进行方面拟合或最大比例因子进行方面填充。

```
float scaleFactor = MIN(xScaleFactor, yScaleFactor); // Assuming aspect fit 
```

现在只需将每个点的 x 和 y 分量乘以比例因子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:46:10.343

获取两个 x 和 y 坐标之间的差异。确定哪个百分比差异更大，然后将绘制曲线时使用的坐标乘以该百分比。结果将是大小刚好适合较小框的曲线。

您可能必须向曲线的坐标添加偏移量才能将其正确定位在框内。

根据您的需要，寻找绘图 API 可能会更好，而不是手动执行此操作，因为您可能会获得一些免费（或便宜）的功能，例如让用户能够捏缩放等。

# jquery - jquery click 事件处理程序没有被调用

> ID：14219554
> 
> 赞同：0
> 
> 时间：2013-01-08T16:26:08.903
> 
> 标签：jquery

在我的菜单中，我有以下项目：

```
<ul>
    <li class="menu_item" data-content_id="#landscape_context">Landscape Context</li>
    <li class="menu_item" data-content_id="#terrestrial_features">Terrestrial Features</li>
    <li class="menu_item" data-content_id="#aquatic_features">Aquatic Features</li>
    <li class="menu_item" data-content_id="#vegetaion_land_use">Vegetation/Land Use</li>
    <li class="menu_item" data-content_id="#additional_features">Additional Features</li>
    <li class="menu_item" data-content_id="#data_descriptions">Data Descriptions</li>
    <li class="menu_item" data-content_id="#faq">FAQ</li>
</ul> 
```

然后，当用户单击其中一个项目时，我想显示该项目的内容`data-content_id`。但是，当我单击时，什么都没有发生。

这是javascript：

```
$(".menu_item").click(function () {
    alert("Hello");
}); 
```

我已经用简单的警报替换了代码，当我单击菜单项时它也不会出现。

我查看了在 SO 上找到的许多其他示例，但找不到与我的解决方案有任何不同的地方。

有人看到我在这里可能做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:28:47.490

```
$(document).ready(function(){
   $(".menu_item").click(function () {
       alert(  $(this).attr("data-content_id") );
   }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:29:13.963

元素要么在脚本*之后加载到 DOM 中，要么异步加载。*如果是前者，只需将所有内容都包裹在`$(document).ready(function () {...`（或`$(function () {...`

如果是后者，则使用事件委托，例如：

```
$(document).on('click', '.menu_item', function () { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:31:33.787

试试这个代码：

```
$(document).ready(function() {
   $(".menu_item").click(function () {
       alert($(this).attr("data-content_id"));
   }); 
}); 
```

# java - mybatis IllegalArgumentException: Mapped Statements 集合不包含值

> ID：14219558
> 
> 赞同：17
> 
> 时间：2013-01-08T16:26:40.387
> 
> 标签：java, database, spring, ibatis, mybatis

我对 spring e mybatis 有很多问题。这是我的 spring 配置：我有相同的配置，并且 ComuneMapper.java 和 ComuneMapper.xml 留在同一个文件夹中。但是我有这个错误有人来帮助meeeee

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:webflow="http://www.springframework.org/schema/webflow-config"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-2.5.xsd
        http://www.springframework.org/schema/webflow-config
        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-2.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config /> 

    <!-- Scans the classpath of this application for @Components to deploy as beans -->
    <context:component-scan
        base-package="com.aieap" />

    <!-- Configures the @Controller programming model -->
    <mvc:annotation-driven />

    <!-- Configurazione Spring MVC View Resolver -->
    <bean
        id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property
            name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property
            name="prefix"
            value="/jsp/" />
        <property
            name="suffix"
            value=".jsp" />
    </bean>

    <!-- Flow Handler Adapter -->
    <bean
        class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
        <property
            name="flowExecutor"
            ref="flowExecutor" />
    </bean>

    <!-- Flow Handler Mapping -->
    <bean
        class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
        <property
            name="flowRegistry"
            ref="flowRegistry" />
    </bean>

    <!-- Flow Executor -->
    <webflow:flow-executor
        id="flowExecutor" />

    <!-- Flow Registry -->
    <webflow:flow-registry
        id="flowRegistry"
        flow-builder-services="flowBuilderServices">
        <!-- nonaut -->
        <webflow:flow-location
            id="home-nonaut"
            path="/WEB-INF/flows/nonaut/home-nonaut.xml" />
        <webflow:flow-location
            id="logout"
            path="/WEB-INF/flows/nonaut/logout.xml" />

        <!-- aut -->
        <webflow:flow-location
            id="aut/home-aut"
            path="/WEB-INF/flows/aut/home-aut.xml" />
        <webflow:flow-location
            id="aut/nuova-domanda"
            path="/WEB-INF/flows/aut/nuova-domanda.xml" />
        <webflow:flow-location
            id="aut/invia-domanda"
            path="/WEB-INF/flows/aut/invia-domanda.xml" />
        <webflow:flow-location
            id="aut/nuovo-operatore-rer"
            path="/WEB-INF/flows/aut/nuovo-operatore-rer.xml" />

    </webflow:flow-registry>

    <webflow:flow-builder-services
        id="flowBuilderServices"
        view-factory-creator="viewFactoryCreator" />

    <bean
        id="viewFactoryCreator"
        class="org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
        <property
            name="viewResolvers">
            <list>
                <ref
                    bean="viewResolver" />
            </list>
        </property>
        <property
            name="useSpringBeanBinding"
            value="true" />
    </bean>

    <import resource="jdbc-context.xml" />

</beans> 
```

jdbc-context.xm：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            ">

    <context:property-placeholder
        location="/WEB-INF/db.properties" />

    <!-- Enable annotation style of managing transactions -->
    <tx:annotation-driven
        transaction-manager="transactionManager" />

    <!-- Declare a datasource that has pooling capabilities -->
    <bean
        id="dataSource"
        class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close"
        p:driverClass="${jdbc.driver}"
        p:jdbcUrl="${jdbc.url}"
        p:user="${jdbc.username}"
        p:password="$jdbc.password}"
        p:acquireIncrement="10"
        p:idleConnectionTestPeriod="60"
        p:maxPoolSize="100"
        p:maxStatements="50"
        p:minPoolSize="10" />

    <!-- Declare a transaction manager -->
    <bean
        id="transactionManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
        p:dataSource-ref="dataSource" />

    <!-- define the SqlSessionFactory, notice that configLocation is not needed when you use MapperFactoryBean -->
    <bean
        id="sqlSessionFactory"
        class="org.mybatis.spring.SqlSessionFactoryBean">
        <property
            name="dataSource"
            ref="dataSource" />
        <property
            name="configLocation"
            value="WEB-INF/mybatis/sqlmap-config.xml" />
    </bean>

    <!-- scan for mappers and will automatically scan the whole classpath for xmls -->
    <bean
        class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="sqlSessionFactory" ref="sqlSessionFactory" />
        <property name="basePackage" value="com.aieap.dao.mapper" />
    </bean>

</beans> 
```

sqlmap-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration
    PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>
    <settings>
        <!-- changes from the defaults -->
        <setting name="lazyLoadingEnabled" value="false" />
    </settings>
    <typeAliases>
        <typeAlias type="com.aieap.model.Comuni" alias="comuni"/>
    </typeAliases>
</configuration> 
```

控制器：

```
package com.aieap.web.controller;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.apache.log4j.Logger;

import com.aieap.dao.mapper.ComuniMapper;
import com.aieap.model.Comuni;
import com.aieap.model.OperatoriRer;

@Controller
public class OperatoriRerController {

    @Autowired ComuniMapper comuniDao;

    private static final Logger logger = Logger.getLogger(OperatoriRerController.class);

     @RequestMapping("/aut/nuovo-operatore-rer")
        public ModelMap start() {

        Comuni comuni = comuniDao.selectByPrimaryKey(new Long(1));
        System.out.print(comuni);
        OperatoriRer op = new OperatoriRer();
        op.setNome("ciccio");
        op.setCognome("cappuccio");
        ModelMap model = new ModelMap();
        model.addAttribute("OperatoriRer",op);
        return model;
        }

     @RequestMapping("/aut/search-comune")
        public ModelMap searchcomune() {
        List<Comuni> comuniList = new ArrayList <Comuni>() ;        
        ModelMap model = new ModelMap();
        model.addAttribute("ComunuList",comuniList);
        return model;
        }
} 
```

这是错误：

```
GRAVE: Servlet.service() for servlet [dispatch] in context with path [/aieap] threw exception [Request processing failed; nested exception is java.lang.IllegalArgumentException: Mapped Statements collection does not contain value for com.aieap.dao.mapper.ComuniMapper.selectByPrimaryKey] with root cause
java.lang.IllegalArgumentException: Mapped Statements collection does not contain value for com.aieap.dao.mapper.ComuniMapper.selectByPrimaryKey
    at org.apache.ibatis.session.Configuration$StrictMap.get(Configuration.java:593)
    at org.apache.ibatis.session.Configuration.getMappedStatement(Configuration.java:393)
    at org.apache.ibatis.binding.MapperMethod.setupCommandType(MapperMethod.java:160)
    at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:48)
    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:37)
    at $Proxy9.selectByPrimaryKey(Unknown Source)
    at com.aieap.web.controller.OperatoriRerController.start(OperatoriRerController.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:746)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:182)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

请！！！谁能帮帮我，我绝望了！！！！！！！！！！！！！！！

我已经忘记了。这是 ComuniMapper.java

```
package com.aieap.dao.mapper;

import com.aieap.model.Comuni;
import com.aieap.model.ComuniExample;
import java.util.List;
import org.apache.ibatis.annotations.Param;

public interface ComuniMapper {

    int countByExample(ComuniExample example);
    int deleteByExample(ComuniExample example);
    int deleteByPrimaryKey(Long idComune);
    int insert(Comuni record);
    int insertSelective(Comuni record);
    List<Comuni> selectByExample(ComuniExample example);
    Comuni selectByPrimaryKey(Long idComune);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table comuni
     *
     * @mbggenerated Tue Jan 08 16:52:16 CET 2013
     */
    int updateByExampleSelective(@Param("record") Comuni record, @Param("example") ComuniExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table comuni
     *
     * @mbggenerated Tue Jan 08 16:52:16 CET 2013
     */
    int updateByExample(@Param("record") Comuni record, @Param("example") ComuniExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table comuni
     *
     * @mbggenerated Tue Jan 08 16:52:16 CET 2013
     */
    int updateByPrimaryKeySelective(Comuni record);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table comuni
     *
     * @mbggenerated Tue Jan 08 16:52:16 CET 2013
     */
    int updateByPrimaryKey(Comuni record);
} 
```

结束这个 ComuniMapper.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.aieap.dao.mapper.ComuniMapper" >
  <resultMap id="BaseResultMap" type="com.aieap.model.Comuni" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    <id column="ID_COMUNE" property="idComune" jdbcType="BIGINT" />
    <result column="CODICE_ISTAT" property="codiceIstat" jdbcType="VARCHAR" />
    <result column="DESCRIZIONE" property="descrizione" jdbcType="VARCHAR" />
    <result column="CAP" property="cap" jdbcType="VARCHAR" />
    <result column="CODICE_PROVINCIA" property="codiceProvincia" jdbcType="BIGINT" />
    <result column="COMUNE_SIGLA" property="comuneSigla" jdbcType="VARCHAR" />
    <result column="COMUNE_CFIS" property="comuneCfis" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    ID_COMUNE, CODICE_ISTAT, DESCRIZIONE, CAP, CODICE_PROVINCIA, COMUNE_SIGLA, COMUNE_CFIS
  </sql>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.aieap.model.ComuniExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from comuni
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    select 
    <include refid="Base_Column_List" />
    from comuni
    where ID_COMUNE = #{idComune,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    delete from comuni
    where ID_COMUNE = #{idComune,jdbcType=BIGINT}
  </delete>
  <delete id="deleteByExample" parameterType="com.aieap.model.ComuniExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    delete from comuni
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.aieap.model.Comuni" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    insert into comuni (ID_COMUNE, CODICE_ISTAT, DESCRIZIONE, 
      CAP, CODICE_PROVINCIA, COMUNE_SIGLA, 
      COMUNE_CFIS)
    values (#{idComune,jdbcType=BIGINT}, #{codiceIstat,jdbcType=VARCHAR}, #{descrizione,jdbcType=VARCHAR}, 
      #{cap,jdbcType=VARCHAR}, #{codiceProvincia,jdbcType=BIGINT}, #{comuneSigla,jdbcType=VARCHAR}, 
      #{comuneCfis,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.aieap.model.Comuni" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    insert into comuni
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="idComune != null" >
        ID_COMUNE,
      </if>
      <if test="codiceIstat != null" >
        CODICE_ISTAT,
      </if>
      <if test="descrizione != null" >
        DESCRIZIONE,
      </if>
      <if test="cap != null" >
        CAP,
      </if>
      <if test="codiceProvincia != null" >
        CODICE_PROVINCIA,
      </if>
      <if test="comuneSigla != null" >
        COMUNE_SIGLA,
      </if>
      <if test="comuneCfis != null" >
        COMUNE_CFIS,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="idComune != null" >
        #{idComune,jdbcType=BIGINT},
      </if>
      <if test="codiceIstat != null" >
        #{codiceIstat,jdbcType=VARCHAR},
      </if>
      <if test="descrizione != null" >
        #{descrizione,jdbcType=VARCHAR},
      </if>
      <if test="cap != null" >
        #{cap,jdbcType=VARCHAR},
      </if>
      <if test="codiceProvincia != null" >
        #{codiceProvincia,jdbcType=BIGINT},
      </if>
      <if test="comuneSigla != null" >
        #{comuneSigla,jdbcType=VARCHAR},
      </if>
      <if test="comuneCfis != null" >
        #{comuneCfis,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.aieap.model.ComuniExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    select count(*) from comuni
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    update comuni
    <set >
      <if test="record.idComune != null" >
        ID_COMUNE = #{record.idComune,jdbcType=BIGINT},
      </if>
      <if test="record.codiceIstat != null" >
        CODICE_ISTAT = #{record.codiceIstat,jdbcType=VARCHAR},
      </if>
      <if test="record.descrizione != null" >
        DESCRIZIONE = #{record.descrizione,jdbcType=VARCHAR},
      </if>
      <if test="record.cap != null" >
        CAP = #{record.cap,jdbcType=VARCHAR},
      </if>
      <if test="record.codiceProvincia != null" >
        CODICE_PROVINCIA = #{record.codiceProvincia,jdbcType=BIGINT},
      </if>
      <if test="record.comuneSigla != null" >
        COMUNE_SIGLA = #{record.comuneSigla,jdbcType=VARCHAR},
      </if>
      <if test="record.comuneCfis != null" >
        COMUNE_CFIS = #{record.comuneCfis,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    update comuni
    set ID_COMUNE = #{record.idComune,jdbcType=BIGINT},
      CODICE_ISTAT = #{record.codiceIstat,jdbcType=VARCHAR},
      DESCRIZIONE = #{record.descrizione,jdbcType=VARCHAR},
      CAP = #{record.cap,jdbcType=VARCHAR},
      CODICE_PROVINCIA = #{record.codiceProvincia,jdbcType=BIGINT},
      COMUNE_SIGLA = #{record.comuneSigla,jdbcType=VARCHAR},
      COMUNE_CFIS = #{record.comuneCfis,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.aieap.model.Comuni" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    update comuni
    <set >
      <if test="codiceIstat != null" >
        CODICE_ISTAT = #{codiceIstat,jdbcType=VARCHAR},
      </if>
      <if test="descrizione != null" >
        DESCRIZIONE = #{descrizione,jdbcType=VARCHAR},
      </if>
      <if test="cap != null" >
        CAP = #{cap,jdbcType=VARCHAR},
      </if>
      <if test="codiceProvincia != null" >
        CODICE_PROVINCIA = #{codiceProvincia,jdbcType=BIGINT},
      </if>
      <if test="comuneSigla != null" >
        COMUNE_SIGLA = #{comuneSigla,jdbcType=VARCHAR},
      </if>
      <if test="comuneCfis != null" >
        COMUNE_CFIS = #{comuneCfis,jdbcType=VARCHAR},
      </if>
    </set>
    where ID_COMUNE = #{idComune,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.aieap.model.Comuni" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 08 16:52:16 CET 2013.
    -->
    update comuni
    set CODICE_ISTAT = #{codiceIstat,jdbcType=VARCHAR},
      DESCRIZIONE = #{descrizione,jdbcType=VARCHAR},
      CAP = #{cap,jdbcType=VARCHAR},
      CODICE_PROVINCIA = #{codiceProvincia,jdbcType=BIGINT},
      COMUNE_SIGLA = #{comuneSigla,jdbcType=VARCHAR},
      COMUNE_CFIS = #{comuneCfis,jdbcType=VARCHAR}
    where ID_COMUNE = #{idComune,jdbcType=BIGINT}
  </update>
</mapper> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T10:55:10.280

Hi this problem usually is connected to mapper locations. So try to set the mapperLocation property in your [SqlSessionFactory](http://www.mybatis.org/spring/factorybean.html) bean:

```
<property name="mapperLocations" 
value="classpath*:pathWhereYouHaveMapper/*Mapper.xml" /> 
```

Hope it help!

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-03T13:24:41.857

**可能有几个原因...！**

*   -> SQL 语法（可能单个小查询在选择末尾有一个额外的“，”）

*   -> 类路径问题，无法解析 jar 依赖项

*   -> 这也可能是由于文件编码问题或“*Mapper.xml”文件中嵌入的非法 xml 字符。（所以要小心你的编辑……！）

**最重要的是，您应该使用相同的名称。**

*   接口 = xxx.yyy.mappers.SettingMapper.class
*   映射器文件 = /xxx/yyy/mappers/SettingMapper.xml
*   映射器命名空间 = xxx.yyy.mappers.SettingMapper

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-10-21T09:01:03.663

这通常意味着 mybatis 找不到你引用的映射。可能你忘记将 *Mapper.xml 文件添加到 mybatis **-config.xml**（这是 MyBatis 的标准配置文件）

```
<mappers>
  <mapper resource="org/mybatis/builder/AuthorMapper.xml"/>
</mappers> 
```

[在文档http://mybatis.github.io/mybatis-3/configuration.html#mappers](http://mybatis.github.io/mybatis-3/configuration.html#mappers)中查看更多信息

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-08T19:53:44.683

就我而言，发生的事情是映射 xml 文件**中我的方法名称中有一个 TYPO 。**当我更改了 DAO 名称时，我忘记在 xml 中进行更改，它可能对其他人有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-23T05:47:52.240

除了其他答案，您还必须

> **检查重复的方法名称**

这个错误最后出现在日志中。

```
IllegalArgumentException: Mapped Statements collection does not contain value 
```

忽略上述消息，只需向上移动日志并在日志中查找第一条错误消息。我得到的第一个错误是，

```
ERROR [main] mapper.MapperFactoryBean (MapperFactoryBean.java:83) - Error while adding the mapper 'interface com.xyz.mappers.UserMapper' to configuration.
java.lang.IllegalArgumentException: Mapped Statements collection already contains value for com.xyz.mappers.UserMapper.getAllUserDetails 
```

该错误清楚地指出，该方法`getAllUserDetails`已存在于`UserMapper`接口中（具有不同数量的参数）。复制方法名称也会引发此错误。（复制粘贴代码的惩罚）：P

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-28T01:55:50.303

在 mapper.xml 中重复`id`也会引发此类异常。希望这可以帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-22T10:59:15.160

我也遇到了这个问题。除了上述答案的可能性之外，我还尝试使用这种解决问题的方法：

方法名称应该在`dao`and中相同`mapper.xml`，在我的情况下方法名称不一样。所以你必须确定它们是一样的。

祝你好运！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-27T14:21:18.287

`mybatis-config.xml`您可以在文件中注册您的映射器

```
<configuration>
    <properties resource="db.dev.properties">
     ...
    </properties>

    <typeHandlers>
        <package name="com.project.model.typehandlers"/>
    </typeHandlers>

    <environments default="development">
     ...
    </environments>

    <mappers>
      <mapper resource="com/project/model/xml/SomeMapper.xml"/>
      // other mapper here
    </mappers>
    ...
</configuration> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-08T20:51:46.573

我和你一样使用mybatis。你的代码看起来不错。即使我不确定类型映射是否存在问题。尝试以下两个技巧来解决您的问题：

1.  将 java 类型更改为 mybtis 别名 a)“java.lang.Long”->“long”，b)“com.aieap.model.Comuni”->“comuni”

2.  尝试将别名而不是 XML 映射 @org.apache.ibatis.type.Alias("comuni") 添加到 com.aieap.model.Comuni，删除 xml typeAlias，将 spring 配置添加到您的 org.mybatis.spring.SqlSessionFactoryBean：

祝你好运，马丁

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-24T12:48:07.563

我有类似的问题。然后我发现所有在 mapper.xml 上定义了查询映射的请求都有相同的错误。

这可能是因为 WAR 构建不当或服务器部署不当。无论如何，我删除了那个 WAR 文件并再次重新部署，它成功了！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-27T12:23:43.040

我也遇到了这个异常。在我的情况下，映射器 xml 文件存在于类路径中包含的 JAR 中，但 MapperScannerConfigurer 不知何故找不到它。我是通过阅读日志才知道这一点的。您应该阅读日志并检查以下格式的行以了解是否找到任何映射器。我必须给出它的根路径，之后它找到了我的映射器。

```
PathMatchingResourcePatternResolver:423 - Resolved location pattern [classpath*:*.xml] to resources [URL [jar:file:/home/user/src/tomcat8/webapps/example/WEB-INF/lib/ExampleDao-1.0.0-SNAPSHOT.jar!/TestMapper.xml]] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-19T05:46:47.117

`mybatis.config`检查您是否已在属性文件中映射。

在 application.properties 文件中添加这一行。

```
mybatis.config=classpath:mybatis-config.xml 
```

# javascript - Javascript - jQuery 中的数据表网格

> ID：14219559
> 
> 赞同：-3
> 
> 时间：2013-01-08T16:26:46.640
> 
> 标签：javascript, jquery, datatables

我在我的一个应用程序中使用 Datatables 网格，因为它具有用于事件调度和自定义的相对详尽的 API。但是我现在面临一个问题，网格的高度取决于要显示的记录数。如何自定义它，以便即使删除记录也能保持高度并继续显示删除记录的空单元格？谢谢 。

有没有比数据表更好的网格插件，它提供了数据表支持的功能并且我不会遇到这样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:35:03.333

您可以将其添加到您的表初始化中，如下所示：

```
$(document).ready(function() {
    $('#example').dataTable( {
        "sScrollY": "200px",
        "bPaginate": false, 
        "bScrollCollapse": false
    } );
} ); 
```

其中 sScrollY 值将定义表格的恒定高度，而 bScrollCollapse 设置为 false 将防止表格缩小以填充空单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:29:06.130

您需要修改 CSS 以实现此目的。其他选项是 jqGrid。 [http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

# git - Git Shell - 总是显示红色星号

> ID：14219566
> 
> 赞同：2
> 
> 时间：2013-01-08T16:26:57.477
> 
> 标签：git

我使用 git-sh 有一段时间了，当分支发生变化时，它总是有红色 *。现在它总是显示这个 *。请参见下面的示例。

```
master!reponame *> status
# On branch master
nothing to commit, working directory clean
master!reponame *> 
```

知道为什么吗？

还检查了父存储库

```
master!reponame *> cd ..
fatal: Not a git repository (or any of the parent directories): .git
!projects *> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:29:34.177

您是否可能无意中在父目录中启动了存储库？

# coldfusion - 将 Coldfusion 查询结果写入文本文件不起作用

> ID：14219571
> 
> 赞同：4
> 
> 时间：2013-01-08T16:27:12.273
> 
> 标签：coldfusion

```
<cfquery name="writefile" datasource="#dsn#">
    SELECT abc,def,pqr,stu,zex
    FROM mytable
</cfquery>

<cfoutput>
    <table>
        <cfloop query="writefile">
            <tr>
                <cfloop list="#ArrayToList(writefile.getColumnNames())#" index="col">
                    <cffile action="write" file="d:\test.txt"      output="#writefile[col][currentrow]#"> 

                </cfloop>
            </tr>   
        </cfloop>
    </table>

</cfoutput> 
```

我正在使用上面的代码将文本文件写入使用 cffile 的位置。

但是文本文件不包含查询的所有结果。请指导我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T16:35:38.280

每次使用 cffile [action="write"都会重置文件。](http://cfdocs.org/cffile-action-write)

使用[**action="append"**](http://cfdocs.org/cffile-action-append)将内容添加到文件中，而无需先清空文件。

您还应该考虑先构建字符串，然后在单个操作中写入文件。

例如：

```
<cfset Content = "" />
<cfloop query="writefile">
    <cfloop array=#writefile.getColumnNames()# index="col">
        <cfset Content &= ' ' & writefile[col][currentrow] />
    </cfloop>
    <cfset Content &= chr(10) />
</cfloop>

<cffile action="write" file="d:\test.txt" output="#FileContent#" /> 
```

*（注意：为了简单起见，使用字符串连接 - 如果性能很重要，请考虑使用 StringBuilder 和/或 cfsavecontent。）*

# c - 行主序存储到多维数组

> ID：14219572
> 
> 赞同：0
> 
> 时间：2013-01-08T16:27:15.413
> 
> 标签：c

给定一个 2x3 数组，[1,2,3] [4,5,6] 很容易使用行主要顺序存储来线性存储它 -> [1,2,3,4,5,6]

可以使用以下公式将多维数组中的特定行、列转换为该线性数组中的索引：index = row*NumCol + column

有没有办法计算行，列给定线性数组中的一些索引。所以给定线性数组中的index=1，value 2，有没有办法确定row=0 column=1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:29:49.760

很简单：

```
row = index / NumCol;
col = index % NumCol 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:28:28.530

要从一维索引返回到二维索引，只需除以余数即可。

```
twoDrow = index / COLUMNS;
twoDCol = index % COLUMNS; 
```

# java - 如何获取给定键的子键列表

> ID：14219580
> 
> 赞同：0
> 
> 时间：2013-01-08T16:27:41.310
> 
> 标签：java, registry

我想要一个包含给定**键的所有****子**键的列表：

 **> HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\ -> 我想要一个 ORACLE 的所有子键的列表

我写了这段代码，但它不起作用：

```
 Preferences p = Preferences.userRoot();
   p = p.node("/HKEY_LOCAL_MACHINE/SOFTWARE/ORACLE");
   try {
      for(String s : p.childrenNames())
         System.out.println(s);
   } catch (BackingStoreException e) {
      //bla bla..
      e.printStackTrace();
   } 
```

***链接到我之前不太清楚的问题：*** [Printing children of a preference node](https://stackoverflow.com/questions/14212971/printing-children-of-a-preference-node)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:10:14.467

最后我找到了解决方案：

我将从`cmd`: (Via `Java`)调用此命令

> 注册查询“HKEY_LOCAL_HOST\SOFTWARE\ORACLE”

它将返回`subkeys`of`ORACLE`然后我将操纵输出以获得我想要的。**

# powershell - PowerShell 模块更改不可见

> ID：14219584
> 
> 赞同：1
> 
> 时间：2013-01-08T16:28:05.597
> 
> 标签：powershell, powershell-3.0

我对 PowerShell 模块的工作方式感到困惑。

我从博主那里下载并复制了一个模块。我已将 .zip 解压缩并解压缩到 %USERPROFILE%\Documents\WindowsPowerShell\Modules\SomeModule

此文件夹中是模块使用的 .NET 程序集，但不包含已编译的 CmdLets。相反，命令是 .psm1 文件中的函数，而 .psd1 文件描述清单。

如果我打开 PowerShell，这些功能可用并且可以工作，但我想添加我自己的功能，所以我添加了它，但是我看不到它。我重新启动了所有 PowerShell 实例，删除了模块并再次导入。

作为测试，我重命名了一个现有的工作函数。有趣的是，在 remove 和 import 之后，该函数消失了，而不是采用了它的新名称。如果我将其重命名（仅更改一个字符）并删除/导入，则它会再次出现。

我`help blahblah`用来列出一组中的所有命令，因为它们都具有相同的前缀。清单导出所有 (*) 函数。显然我不明白这些类型的脚本模块是如何工作的，即使在我运行 Remove-Module 之后，这些功能都列出来了！我之前在 C# 中编写了一个编译模块，并且按预期工作。

这是怎么回事？为什么重命名函数会导致它消失？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:39:34.977

找到了。这一行出现在我在 .psm1 文件中忽略的一些内容中。

`Export-ModuleMember X, Y, Z`

那么，我想清单可以否决这一点或在脚本中替换对它的需求？谁知道。无论如何，希望这对某人有所帮助。

# c++ - RegOpenKeyEx 返回 ERROR_NOACCESS

> ID：14219586
> 
> 赞同：0
> 
> 时间：2013-01-08T16:28:07.660
> 
> 标签：c++, winapi, registry

我正在尝试使用以下代码在 Windows 7 x64 下读取注册表项：

```
static void ReadRegistryKey(HKEY hkey, TCHAR* path)
{
HKEY hkey2;
TCHAR value[MAX_PATH];
TCHAR data[4096];
const DWORD dataLength = 4096 * sizeof(TCHAR);
const DWORD valueLength = MAX_PATH+1;
DWORD returnval;
DWORD type = 0;

HLOCAL mem = LocalAlloc(LPTR, 260);
char * pc = (char*)mem;
pc++;
wchar_t* pwc = (wchar_t*)pc;
lstrcpy(pwc, path);

// Does key exist?
returnval = RegOpenKeyEx(hkey, pwc, 0 , KEY_READ | KEY_WOW64_64KEY, &hkey2);

if(returnval == ERROR_SUCCESS)
{
    int i = 0;
    while(returnval == ERROR_SUCCESS)
    {
        DWORD actualLength = dataLength;
        DWORD actualValueLength = valueLength;

        returnval = RegEnumValueW( hkey2,
                                    i,
                                    value,
                                    &actualValueLength,
                                    NULL,
                                    &type,
                                    (LPBYTE)data,
                                    &actualLength
                                    );

        if(returnval == ERROR_NO_MORE_ITEMS)
        {
            _tprintf(_T("NO MORE KEYS FOUND in %s\n"), path);
            break;
        }
        if(returnval == ERROR_SUCCESS)
        {
                         // STUFF
        }
   }
}
} 
```

当我使用 KEY_READ | KEY_WOW64_32KEY 我得到存储在 32 位注册表下的值，但是当我使用上面的代码尝试读取“正常”64 位注册表时，我得到错误代码 0x3e6 (ERROR_NOACCESS)

我调用方法的方式：

```
ReadRegistryKey(HKEY_LOCAL_MACHINE, L"Software\\Microsoft\\Windows\\CurrentVersion\\Run"); 
```

如何读取 64 位注册表值？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:16:09.870

我认为分配和指针算法`pwc`是造成问题的原因。直接`path`传入`RegOpenKeyEx`函数。

还值得注意的是，如果超过 260 字节，`lstrcpy`将导致缓冲区溢出。`path`而是在 Windows 中使用[StringCchCopy](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms647527%28v=vs.85%29.aspx)来提供一个字符串副本，该副本最多只能复制目标缓冲区中可用的字节数。

# php - 在 textarea 中允许 PHP

> ID：14219587
> 
> 赞同：0
> 
> 时间：2013-01-08T16:28:11.467
> 
> 标签：php

如何在 textarea 中允许 php 脚本。我知道它的安全性是有风险的，但我想通过管理面板来做，所以不用担心安全性。我想在 textarea 中包含 1 个 php 文件，并希望在显示 textarea 内容时执行它。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:44:50.970

我了解您想接收在 textarea 中输入的文本，或者在 textarea 元素中运行一些代码...

```
<?php
    $unsecurePHPcode = $POST['unsecurePHPcode'];
?>
<textarea name="unsecurePHPcode">
<?php eval($unsecurePHPcode); ?>
</textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:33:23.223

将您想要运行的代码放入字符串变量中。

评估（$phpcode）；

为什么你这么想在那个特定的地方运行那个文件代码？不能将代码放入函数中并在那里调用该函数吗？

另外，解释到底发生了什么。这个需要运行的动态 PHP 代码是什么？您正在为您无法控制的代码提供对您环境的完全访问权限，包括您的数据库和存储在 PHP 文件中的密码！如果通过一个简单的 GET 参数，ppl 可以堆栈溢出并获得对站点的完全控制，那么您就可以让他们完全轻松地控制一切！并且不要告诉我们它在管理面板中，如果您认为这足以具有安全性，那么安全漏洞就更大了！

即使它是一百个可能的代码。将它们放入函数内部的文件中，并为用户提供一个组合框列表以选择要运行的组合框。

如果管理员用户需要自定义一些代码，请使用插件系统。

如果管理员用户确实需要运行自定义快速代码，请让他访问您的控制面板，以便他可以直接添加和编辑文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:38:08.050

您可以在服务器端使用[eval](http://php.net/manual/ru/function.eval.php)函数，但在使用之前需要清理 php 标签。

```
<form method="post" action="server.php">
    <textarea name="text_area"></textarea>
</form>

<?php
// when display content
$pattern = "/<\?php(.*?)\?>/";
preg_match($pattern, $textarea_value, $matches);
foreach ($matches as $phpcode) {
    eval($phpcode);
}
?> 
```

当然不要忘记安全原因。此代码允许在 textarea 中同时添加许多 php 代码和简单文本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T16:30:10.477

将相应的 PHP 代码保存到一个新文件中，然后简单地将 PHP 文件包含在您要显示的位置。

# java - 休眠序列生成不适用于复合键的元素

> ID：14219588
> 
> 赞同：0
> 
> 时间：2013-01-08T16:28:14.540
> 
> 标签：java, oracle, hibernate, sequence, composite-key

我有一个带有复合键的休眠实体，其中键由长 ID 和时间戳组成。ID 应使用序列生成器。

我的实体：

```
@Entity
@Table(name="MY_ENTITY")
public class MyEntity {
   private MyEntityPk myEntityPk;

   @EmbededId
   public MyEntityPk getMyEntityPk() {
      return myEntityPk;
   }

   // setter omitted

   // other properties/getters/setters omitted
} 
```

我的实体库：

```
public class MyEntityPk implements Serializable {

   // version UID/hashCode()/equals() omitted

   private Long myEntityId;
   private Timestamp revisionTime;

   @Column(name = "MY_ENTITY_ID", unique = true, nullable = false, precision = 13, scale = 0)
   @GeneratedValue(strategy=GenerationType.AUTO, generator="HIBERNATE_SEQUENCE_GEN") 
   @SequenceGenerator(name="HIBERNATE_SEQUENCE_GEN", sequenceName="HIBERNATE_SEQUENCE")
   public Long getMyEntityId() {
      return myEntityId;
   }

   public void setMyEntityId(Long myEntityId) {
      this.myEntityId = myEntityId;
   }

   @Column(name = "REVISION_TS", nullable = false)
   public Timestamp getRevisionTime() {
      return revisionTime;
   }

   public void setRevisionTime(Timestamp revisionTime) {
      this.revisionTime = revisionTime;
   }

} 
```

PK 看起来连接正确。当我全部查找时，我有一个 MyEntity 对象列表，其中每个 MyEntityPk 对象都有一个来自数据库的 id 和 revisionTime。

但是，在插入时，以下内容给了我一个错误，表明 MY_ENTITY_ID 为空，并且数据库不允许该列的空值。对于我们的其他实体，我们可以插入自动生成的 ID 并将其保留为空，Hibernate 知道从数据库中获取下一个序列并在实体中使用它。在这种情况下，由于某种原因没有发生：

```
MyEntity e = new MyEntity();

MyEntityPk pk = new MyEntityPk();
pk.setRevisionTime(new Timestamp(System.currentTimeMillis()));
//pk.setMyEntityId(5l); // see note below
e.setMyEntityPk(pk);

// setting a bunch of other entity parameters omitted

Session session = getSession();
session.saveOrUpdate( entity ); 
```

最终给了我：

```
// a bunch of stack trace omitted
Caused by: java.sql.BatchUpdateException: ORA-01400: cannot insert NULL into ("MY_SCHEMA"."MY_ENTITY"."MY_ENTITY_ID")
// more stack trace omitted 
```

请注意，如果我手动设置 PK 对象的 ID，插入将起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:44:48.460

我只使用过引用其他表的复合键，但看看那个[JPA 复合键 + 序列](https://stackoverflow.com/questions/242914/jpa-composite-key-sequence)

起初似乎是个坏消息，但如果您阅读已接受答案的评论，您可能会很幸运

# java - matlab javaaddpath 不再工作（使用 jdk 1.7 构建的 jar）

> ID：14219589
> 
> 赞同：4
> 
> 时间：2013-01-08T16:28:15.300
> 
> 标签：java, matlab, jar

我正在使用 javaaddpath 命令在我的 matlab projet（由我开发）中使用一个外部 jar（由我开发）。

我已经将我的编程环境从 Matlab r2011a 更新到 r2012b，jdk 从 1.6.0_29 更新到 1.7.0_09，windows 从 XP 更新到 7。

首先我没有重新编译我的 jar 文件，我的整个项目仍在工作（运行没有错误）。

但是现在，我正在尝试重新编译我的 jar 文件。我对此有一些问题，但它解决了（请参阅：[javac @<opiton_file> 和 encoding](https://stackoverflow.com/questions/14217779/javac-opiton-file-and-encoding)）。但是现在我的jar工具重建了，不能用到matlab里面了……matlab显示错误：

```
Undefined variable "optimizer" or function "optimizer.Gui". 
```

其中 optimizer 是一个包（即 jar 文件中的一个目录，包含 Gui 类的目录）。

总而言之，我正在使用代码（最后一行必须弹出一个 JFrame）：

```
javaaddpath('the full path of my jar file.jar');
optimizer.Gui; 
```

无需更新 jar 文件的编译版本，它就可以工作。使用新版本（相同源代码），matlab输出错误。

我在 jar 文件的根目录中有一个 Main 类（包含一个 main 函数）和一个清单，将这个 Main 类指定为主类。这个 Main 类进行一些测试，以确保 jar 文件中的所有功能都正常工作。所以我可以运行 java -jar my_jar_file.jar 并看到所有测试都正常（其中一个测试显示了我的优化器.Gui）。

javac版本和matlab不兼容吗？是不是因为我在文件编码方面遇到了一些问题？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:48:04.207

好的，我已经重新安装了 JDK 1.6.0_37（最后一个可用的 1.6 版本）。我已经使用了我的构建工具（create_jar.bat），只是强制指向这个旧 jdk 的路径。它在 Matlab r2012b 下就像一个魅力！

--> Matlab r2012b 与 jdk 1.7 构建的 jar 文件不兼容。

（感谢 Matworks 不要阻止这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:57:05.200

这与 MATLAB 无关。它是一个通用的 JAVA 设计限制。您不能在 JRE6 中使用为 JRE7 编译的类。

由于 MATLAB 使用 JRE6，由于 JAVA 方面的限制，您不能使用 JAVA 7 类。

# android - 错误：解析 XML 时出错：admob 中的未绑定前缀

> ID：14219591
> 
> 赞同：1
> 
> 时间：2013-01-08T16:28:17.410
> 
> 标签：android, xml, layout, admob

我尝试了很多组合，但它在 xml 文件中显示以下错误

> 错误：解析 XML 时出错：未绑定前缀

在线，我该`<com.google.ads.AdView`如何解决这个问题。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
         xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        >
        <RelativeLayout
         android:layout_width="wrap_content"         
         android:layout_height="wrap_content"         
         android:layout_alignParentBottom="true" > 
    <com.google.ads.AdView
            android:id="@+id/ad"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            myapp:adUnitId="000000000000000"
            myapp:adSize="BANNER"
            myapp:refreshInterval="30"
         />
        </RelativeLayout>
       <ListView
            android:id="@+id/list_of_wishes"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"

            android:dividerHeight="2dip"

            android:clickable="true" >
               </ListView>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T16:33:38.503

我想您应该使用`ads:`而不是`myapp:`，但我可能错了。如果这对您不起作用，请告诉我：

```
<com.google.ads.AdView
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adUnitId="000000000000000"
        ads:adSize="BANNER"
        ads:refreshInterval="30"
     /> 
```

这可能有帮助的原因是您已经设置了一个`ads`命名空间，但没有设置`myapp`（如这一行所示）：

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

# java - Mapview 顶部的另一个 Fragment (SupportMapFragment)

> ID：14219595
> 
> 赞同：2
> 
> 时间：2013-01-08T16:28:27.973
> 
> 标签：java, android-layout, android-fragments, android-mapview, supportmapfragment

我在屏幕上添加了另一个片段。此屏幕已经在 SupportMapFragment 中有 en MapView，因此添加的 Fragment 应该位于 MapView 的顶部。这个新视图覆盖了屏幕的 2/3 和地图的很大一部分，但是当我在视图上滚动时，它会滚动下面的 MapView。这不是我所期望的，因为新视图添加在 MapView 之上。新视图存在一个包含包含其内容的 ImageView 的相对布局。因此，当在 imageview（完全没有功能）上滚动时，它会滚动 MapView。谁能解释为什么会发生这种情况，如果可能的话，为我提供解决方案吗？

编辑：

基本上我有一个填满整个屏幕的 MapView。此代码设置我的地图视图：

```
public void setUpMapIfNeeded(int satelliteMode, LatLng startPoint, float zoomLevel) {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mapView == null) {
            // Try to obtain the map from the SupportMapFragment.
            mapView = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.mapview))
                    .getMap();
            // Check if we were successful in obtaining the map.
            if (mapView != null) {
                setUpMap(satelliteMode, startPoint, zoomLevel);
            }
        }
    }

    private void setUpMap(int satelliteMode, LatLng startPoint, float zoomLevel) {
        // more settings
        } 
```

然后，当用户单击标记时，必须在地图视图的顶部显示一个片段。

```
public void createDetailView() {
        detailView = new DetailViewFragment();
        android.support.v4.app.FragmentManager fragmentManager = getSupportFragmentManager();
        android.support.v4.app.FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add(R.id.viewLayout, detailView).commit();
        fragmentManager.executePendingTransactions();
    } 
```

这一切都很好。显示视图（大约是整个屏幕的 2/3），但用户可以在滑动详细视图时滚动地图。detailview 包含一个包含大量文本和按钮的相对布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:layout_marginTop="45sp">

<!-- a lot of text and buttons here -->

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:42:39.123

So I still havent found a proper way to deal with this. Instead I just disabled all touches and clicks on the mapview when another view is on top of the mapview which btw works ok.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T08:32:21.810

以防万一它可能仍然相关，我处理这种布局的方式（一个视图出现在另一个视图“顶部”）是使用以下方式`LinearLayout`而不是 a ：`RelativeLayout`

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <SomeView
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <PopOutView
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="2"
        android:visibility="gone" />

</LinearLayout> 
```

在您的情况下，地图将是那个`SomeView`，而相对布局是`PopOutView`. 然后在代码中，`popOutView.setVisibility = View.VISIBLE`只要您希望它出现，您就可以调用它。它缩小了第一个视图，而不是在顶部绘制（因此有一点不同的视觉效果），但至少这样触摸事件应该转到正确的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T03:20:26.593

将片段的布局可点击属性设置为 true。它将阻止触摸事件向下传播。

```
<FrameLayout
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#FFF"
    android:clickable="true">
</FrameLayout> 
```

# html - 制作可滚动表格并插入表格内边框

> ID：14219605
> 
> 赞同：1
> 
> 时间：2013-01-08T16:28:58.830
> 
> 标签：html, css

我怎样才能？

鉴于下面的 html 编码，我该如何 1.) 锁定第一行（表格标题）以防止滚动和 2.) 具有 1px 实心 #cccccc 的内部表格边框

感谢你的帮助！

周杰伦

风格编码：

```
<style type="text/css">
div#data_container {
width: 800px;
height: 75px;
overflow: auto;
border: 1px solid #cccccc;

}
table#data_tbl {
  border-collapse: collapse;
  table-layout: fixed;
}
table#data_tbl td {
  border: 0px;
}
table#data_tbl tr:first-child td { 
color: #235A81;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#cdcdcd");
}
</style> 
```

身体：

```
<!-- START OF DATA CONTAINER -->
<div id="data_container">

    <table id="data_tbl">
        <td>File Number</td>
        <td>Date Received</td>
        <td>Request Type</td>
        <td>Name</td>
        <tr>
            <td>12345678</td>
            <td>08/01/2013</td>
            <td>Billing</td>
            <td>Joe Smith</td>
        </tr>
        <tr>
            <td>09876543</td>
            <td>09/01/2013</td>
            <td>Technical</td>
            <td>Nancy Edwards</td>
        </tr>
        <tr>
            <td>11223344</td>
            <td>10/01/2013</td>
            <td>Operations</td>
            <td>Jill White</td>
        </tr>
        <tr>
            <td>45678931</td>
            <td>12/01/2013</td>
            <td>Billing</td>
            <td>Michael Burns</td>
        </tr>
        <tr>
            <td>85239975</td>
            <td>09/01/2013</td>
            <td>Support</td>
            <td>Debbie Stewart</td>
        </tr>
        <tr>
            <td>55667788</td>
            <td>11/01/2013</td>
            <td>Administrative</td>
            <td>David Adams</td>
        </tr>
    </table>
</div>
<!-- END OF DATA CONTAINER --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:51:51.933

当框出现时，您可以`style="overflow:hidden"`在`th`标签上设置。它将锁定鼠标滚动或`position:fixed`在盒子上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:33:11.173

边框样式表：

```
table {
position: relative;
}
table, th, td {
border: 1px solid #cccccc;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:33:14.373

最简单的方法是使用 3rd 方插件。看看这个：[http](http://dlippman.imathas.com/projects/tablescroller.php) ://dlippman.imathas.com/projects/tablescroller.php或尝试 datatables.net

# asp.net-membership - 让编辑器更改 EPiServer 中的自定义用户设置

> ID：14219606
> 
> 赞同：1
> 
> 时间：2013-01-08T16:29:02.467
> 
> 标签：asp.net-membership, episerver, episerver-6-r2

我正在创建一个 EPiServer 门户，用户将登录该门户并查看特定于他们公司的信息。一个公司可以有很多用户。每个用户都需要特定的设置来向他们提供正确的数据。这些设置由编辑者维护，而不是用户他/她自己。

我当然可以做一个连接到简单数据库的管理页面，但如果可能的话，我想使用 EPiServers 内置接口来处理用户。

是否可以扩展“编辑用户”界面以允许编辑自定义属性？

也许还使用 ASP.net 的系统在 SqlMembershipProvider 中自定义属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:10:07.350

听起来你应该使用 SqlProfileProvider，看看这篇文章： [http ://world.episerver.com/Blogs/Stefan-Forsberg/Dates/2009/5/Adding-a-connected-Company-field-to-an -EPiServer-user--A-love-story/](http://world.episerver.com/Blogs/Stefan-Forsberg/Dates/2009/5/Adding-a-connected-Company-field-to-an-EPiServer-user--A-love-story/)

# javascript - 用Javascript加密数据

> ID：14219608
> 
> 赞同：1
> 
> 时间：2013-01-08T16:29:12.090
> 
> 标签：javascript, security

有什么方法可以（安全地，排除base64）在不使用加密密钥的情况下加密javascript中的数据。我知道这不太可能，因为我的加密引擎将可用，但有谁知道可以使用的任何方法

编辑：

根据要求，我试图隐藏用户在提交之前输入到文本框中的数据。数据是完全随机的，永远不会要求用户再次写入。它不是密码，它本质上就像一个帖子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:31:09.830

不。

您需要用于加密的密钥以确保安全。

如果您没有钥匙，那么要么没有人可以解锁它，要么每个人都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:35:17.733

我认为如果你解释你想要完成的事情会更有帮助。你想保护什么？你想保护谁？你将数据发送到哪里？

如果您试图向客户端隐藏某些内容，那么在客户端计算机上对其进行加密意味着您永远不会真正安全。

如果您试图让客户端将加密数据发送到您的服务器，为什么不直接使用 SSL？这要容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:51:56.173

为什么不使用 HTTPS？

数据的来源和去向是什么？使用钥匙有什么困难？同样，为什么不使用 HTTPS？

永远不要相信客户端数据！始终假定可以随时删除，用户可以随时访问和编辑它。

# cloud - 使用云服务作为开发环境

> ID：14219610
> 
> 赞同：1
> 
> 时间：2013-01-08T16:29:16.730
> 
> 标签：cloud, development-environment, cloud-hosting

我是一名自学成才的程序员，目前担任程序员分析师。我的大部分工作都是在 .Net 和 Python 中完成的，并且都是基于桌面的。

我想在业余时间开始学习如何开发 Web 应用程序以增加我的开发专业知识，但我担心在我的个人计算机上安装 Web 服务器等，我也不应该在我的工作计算机上。

我想知道是否可以与亚马逊或 Rackspace 等大型云服务提供商之一签约，以低成本设置开发环境。我不打算出于生产目的在网络上公开任何内容。这只是一个我可以通过反复试验来使用不同技术的环境。

有没有人有这方面的经验？我查看了 AWS，并看到所有可用的不同服务，我不确定哪一个是我需要的。知道这样的成本可能是多少吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:21:12.203

[Action.IO](https://www.action.io) is a great solution for a cloud-hosted development environment. They support Python/Django and a few other popular environments (Ruby/Rails, Node.js, Go) so it's a great place to go play around without the pain of having to set things up.

There's a full linux shell in the Web IDE, which is really fast since there is multi-region support, so you don't feel any "lag" when you're typing.

It's free during the private beta-- you can [sign up for an invite](https://www.action.io) on the homepage.

(Disclaimer: I help build and co-founded Action.IO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:38:44.640

可以登录 Amazon EC2 并在那里获取 Linux 虚拟机。它将具有公共 IP，可以通过 SSH 访问，您可以在其中安装任何您想要的东西。它不是很贵，最重要的是保持低流量，不使用时不要忘记关机。我仍然发现这比使用还可以自动部署和调试的 Eclipse 服务器插件效率低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T09:30:13.853

回答您的问题：“我不打算在网络上公开任何内容以用于生产目的。这只是一个我可以通过反复试验来使用不同技术的环境。”

看看[cloudshare](http://www.cloudshare.com)，因为该解决方案可以满足您的需求。它使您可以快速创建和配置用于构建验证、测试自动化和手动测试的环境。该解决方案在云中提供并且是自助服务的。除了提供虚拟环境之外，您还可以获得额外的测试功能，例如：

•多虚拟机磁盘- 可用于冻结错误、修复错误并将更正后的版本重新插入到原始应用程序中

• 复制主环境以隔离和纠正由错误配置引起的缺陷的能力

•用于后续测试和参考的应用程序库和模板

他们有许多[计划](http://cloudshare.com/pricing-packages)，因此您可以根据计划花费的金额进行检查。

我希望这有帮助

# java - 如何创建扩展类的实例？

> ID：14219619
> 
> 赞同：0
> 
> 时间：2013-01-08T16:29:59.357
> 
> 标签：java, object, inheritance, extends

我有一个名为`Item`. 它具有以下参数 `User owner`：`Category category`和`String description`。

接下来，我有一个名为的子类`Painting`，它扩展了 Item 类。A`Painting`有两个参数：`title`和`painter`。

在代码中的某个时刻，我想创建一个`Painting`对象。应该可以从如下所示的测试文件运行代码：

```
User u1 = new User ("test@test.com");
Category cat = new Category("cat2");
Item painting = sellerMgr.offerPainting(u1, cat, "Selfportret", "Rembrandt"); 
```

类`sellerMgr`中应该有能够注册（创建）该项目（作为绘画）的代码，因此我可以在数据库中使用它。我该如何准确地调用该代码？无论何时创建一个新的`Item`或一个新的`Painting`，以及在创建代码中添加哪些参数，我都会感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:39:22.497

你有一个新班级

```
public class Painting extends Item 
```

你需要一个提供两个新参数的构造函数，字符串标题，用户画家

```
public Painting(User owner, Category category, String description, String title, User painter){
    super(owner, category, description);
    this.title = title;
    this.painter = painter
} 
```

每当您想要一个 Painter 的新实例时，您都可以调用此方法，该方法将为您设置任何 Item 变量，同时引入您想要的两个新参数。一个电话可能看起来像

```
Item paintingAsItem = new Painting(u1, cat, "desc", "Selfportret", "Rembrandt"); //Generic
Painting painting = new Paining(u1, cat, "desc", "Selfportret", "Rembrandt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:35:47.533

可能你想要这样的东西：

```
Painting p = new Painting(u1, cat, title, painter); 
```

假设你的类定义是这样的：

```
public class Painting extends Item {

  private String title;
  private String painter;

  public Painting(User owner, Category category, String title, String painter){
    super(owner, category);
    this.title = title;
    this.painter = painter;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:35:51.557

`Painting`构造函数应该接受`Category`和`User`作为参数，并且应该将它们传递给`super`调用“项目”的构造函数。

像：

`public Painting(User user, Category category) { super(user, category); ...
}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T16:36:17.253

在这种情况下，sellerMgr.offerPainting 应该创建并返回一个绘画类型的对象。可以将绘画强制转换为 Item，但在大多数情况下，您应该使用扩展类，它比 Item 具有更多功能。

# c++ - 飞盘轨迹

> ID：14219623
> 
> 赞同：1
> 
> 时间：2013-01-08T16:30:03.490
> 
> 标签：c++, robotics

这是我的第一篇文章。我是 FIRST 机器人团队的首席程序员，今年的比赛是关于投掷飞盘。我想知道考虑到空气阻力、初速度、初始高度、初始角度等的轨迹是否存在某种“大统一方程”。基本上，我想从超声波测距仪获取数据，编码器决定了我们的电机速度、发射器的角度、旋转力（应该是相当恒定的。我们将自己确定）和重力常数，并在我们实时将其插入方程重新排列镜头以验证/猜测我们是否会接近。如果有人听说过这样的事情，或者知道在哪里可以找到它，我将不胜感激！（供参考，我已经做了一些研究，我能找到的只是每个方面的一堆小方程，比如旋转等等。它最终将用 C++ 编程）。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T16:45:56.817

我是一名机械工程师，以编写软件为生。在进入科技初创公司之前，我曾在洛克希德马丁公司工作，为火箭编写模拟软件。我在这方面有一些收获。

我的专业直觉是，没有“大统一方程”这样的东西。事实上，这是一个足够难的问题，即使它们是正确的，也可能没有很好的理论模型：例如，你的一个方程必须是飞盘产生的升力，这取决于它的交叉- 截面、速度、迎角和关于空气特性的假设。除非你要把你的飞盘放在风洞里，否则这个方程充其量只是一个近似值。

在现实世界中情况变得更糟：你会在有风的地方发射飞盘吗？然后你就可以和你的模特亲吻再见了，因为随便玩飞盘的人都知道，风是一种巨大的干扰。你的模型可能很好，但现实世界对他们来说可能很残酷。

在现实世界中处理这种复杂性的方式是，几乎所有系统都有反馈：飞行员可以纠正风，或者火箭的计算机可以消除空气密度差异造成的干扰。除非你在飞盘上放置一个带有控制面的微控制器，否则你的开环预测不会走得太远——我敢肯定，这是他们通过让飞盘比赛为你设置的陷阱。

有一种可靠的工程方法来解决这个问题。给牛顿一个靴子，让他们自己做物理方程。

这是经验建模过程：在一个包含俯仰角和滚动角、发射速度、飞盘旋转速度等的矩阵上发射飞盘……然后将模型与您的结果进行反向拟合。这可以像表格结果的线性插值一样简单，因此输入变量的任何组合都可以生成预测。

这不是猜测和检查，因为您提前填充表格，因此可以对结果进行某种预测。您将比尝试理想化模型更快地获得更好的信息，尽管您将不得不继续获取您的飞盘:)

# sqlite - 如何在 WinRT 中引用 x86/x64/ARM 类库（不是 AnyCPU 类库）

> ID：14219625
> 
> 赞同：4
> 
> 时间：2013-01-08T16:30:14.823
> 
> 标签：sqlite, msbuild, visual-studio-2012, windows-runtime

在 mvvmcross 中，我有一个插件类库，它为 WinRT 引用 SQLite。

因此，我无法将该类库构建为 AnyCPU - 相反，我必须将其引用为 x86、x64 或 Any CPU。

这意味着新的客户端应用程序不能只引用单个 DLL，而是各个配置必须引用不同的输入程序集。目前我通过使用条件手动编辑 .csproj 文件来做到这一点。

然而，这有点容易出错（而且有点难以解释！）

客户端应用程序是否有任何“简单”方式（单击方式）来引用 x86/x64/ARM 类库三重奏，以便 MSBuild 然后在运行时选择正确的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:08:00.233

如果您的应用程序不依赖完美的性能，您可能会切换到纯托管（Any CPU）的 C# SQLite，以便您的类库和可执行文件可以设置为 Any CPU。

或者，您可以使用 Dependency Injection 或 MEF 在运行时注入正确位数的程序集/类型，并且以这种方式在编译时您始终针对接口（与位数无关）工作。

据我所知，MSBuild 无法以您想要的方式自动处理位数。

# umbraco - 上传媒体 500 服务器错误 - Umbraco

> ID：14219631
> 
> 赞同：0
> 
> 时间：2013-01-08T16:30:28.420
> 
> 标签：umbraco

我已将 Umbraco 安装迁移到新服务器。

但是，现在每当我尝试打开媒体文件时都会收到 500 服务器错误。

我可以成功地将文件上传到根“媒体”文件夹，但我似乎无法导航到这些文件。

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:54:56.687

[此链接](http://our.umbraco.org/forum/ourumb-dev-forum/bugs/36514-Media-Upload-411-dosen%27t-work)建议触摸 global.asax，而[此](http://issues.umbraco.org/issue/U4-1344)链接让我想知道您是否删除了 Label 数据类型。

您使用的是哪个版本的 Umbraco？我还会在数据库中的 UmbracoLog 表中查找任何可能为您指明正确方向的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:00:57.287

什么类型的媒体文件不起作用？它只是某些扩展吗？还是一切（包括图像）？

如果只是某些扩展，您可能需要验证 IIS 是否允许这些扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T12:55:25.613

正如其他人所提到的，理想情况下，我们需要查看错误消息。此外，您能否检查您的服务器是否可以从其他位置提供该类型的文件？如果是这样，那么这是一个权限问题（检查旧服务器上的权限是否与新服务器上的权限匹配，请记住为“IIS_IUSRS”、“网络服务”和“IUSR”Windows 帐户授予读取、写入和修改权限），但如果您不能完全提供该类型的任何文件，然后您需要添加 MIME 扩展名（在 IIS 中添加 - 请参见[此处](http://technet.microsoft.com/en-us/library/cc725608%28v=ws.10%29.aspx)）

# html - 是否可以在 DOM 修改发生时检查它们？

> ID：14219636
> 
> 赞同：4
> 
> 时间：2013-01-08T16:30:44.133
> 
> 标签：html, debugging, browser, mouseevent

我正在尝试查看由 jQuery 工具提示插件（qTip v1）生成的 html。仅当我将鼠标指针悬停在元素上时才会出现工具提示。通常我只是检查 html 或使用 Chrome 的开发者控制台更深入地挖掘，但一旦我这样做，工具提示就会消失，因为鼠标悬停事件结束。工具提示的位置超出了文档的正常流程，因此我无法轻松设置“元素”选项卡 (Chrome) 以在发生时查看它。在任何浏览器中是否有一种方法可以使用热键冻结 DOM 以进行检查？我也对其他想法持开放态度 - 任何让我检查鼠标不一定靠近的元素的东西都会在我的鼠标移动时消失。我不想开始把调试器放在插件的 javascript 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:08:02.480

**DOM 断点**

Chrome 中的 DOM 断点可以解决问题：[https ://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#dom](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#dom)

您只需要访问将附加工具提示的父元素。然后，您可以停止所有 Javascript，这将阻止任何 Javascript 从 DOM 中删除任何内容。

**问题作者的附录：**

您还可以“中断属性修改”，这会在子树元素上修改属性时暂停 Javascript 执行。此选项与子树修改在同一菜单下。

# java - Android：使用 MediaRecorder 录制后播放媒体文件

> ID：14219637
> 
> 赞同：1
> 
> 时间：2013-01-08T16:30:46.547
> 
> 标签：java, android, audio

播放我刚刚使用 MediaRecord 类录制的内容时遇到问题。

代码：

```
 try {
                        audioSample = File.createTempFile("sample", ".wav", PlayScreen.this.getCacheDir());
                    } catch (IOException e) {
                        Toast.makeText(PlayScreen.this, "ERROR: unable to create temp audio file!" + e.toString(), Toast.LENGTH_LONG).show();
                        return;
                    }

                    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                    recorder.setOutputFile(audioSample.getAbsolutePath());
                    try {
                        recorder.prepare();
                    } catch (Exception e) {
                        Toast.makeText(PlayScreen.this, "RECORDER ERROR: " + e.toString(), Toast.LENGTH_LONG).show();
                        Log.e("PLAYSCREEN", e.toString());
                        return;
                    }
                    recorder.start(); 
```

那就是录音。我认为它有效，因为我没有发现任何错误；）

现在播放代码：

```
 try {
                        mp.setDataSource(audioSample.getAbsolutePath());
                        mp.prepare();
                        mp.start();
                    } catch (Exception e) {
                        Toast.makeText(PlayScreen.this, "PLAYBACK TEST FAIL: " + e.toString(), Toast.LENGTH_LONG).show();
                    } 
```

我确实抓住了这个例外：`java.io.IOException: prepare failed`

有什么想法可以在这里发生吗？我猜这个`setDataSource`电话是不正确的。

编辑-来自stackTrace：

```
01-08 12:35:35.609: W/System.err(24730): java.io.IOException: Prepare failed.: status=0xFFFFFFFC
01-08 12:35:35.609: W/System.err(24730):    at android.media.MediaPlayer.prepare(Native Method)
01-08 12:35:35.609: W/System.err(24730):    at com.jsx.audiotech.PlayScreen$1.onClick(PlayScreen.java:125)
01-08 12:35:35.609: W/System.err(24730):    at android.view.View.performClick(View.java:2461)
01-08 12:35:35.609: W/System.err(24730):    at android.view.View$PerformClick.run(View.java:8890)
01-08 12:35:35.609: W/System.err(24730):    at android.os.Handler.handleCallback(Handler.java:587)
01-08 12:35:35.609: W/System.err(24730):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-08 12:35:35.609: W/System.err(24730):    at android.os.Looper.loop(Looper.java:123)
01-08 12:35:35.609: W/System.err(24730):    at android.app.ActivityThread.main(ActivityThread.java:4627)
01-08 12:35:35.613: W/System.err(24730):    at java.lang.reflect.Method.invokeNative(Native Method)
01-08 12:35:35.613: W/System.err(24730):    at java.lang.reflect.Method.invoke(Method.java:521)
01-08 12:35:35.613: W/System.err(24730):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-08 12:35:35.613: W/System.err(24730):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-08 12:35:35.617: W/System.err(24730):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:42:51.940

我建议下载创建的 .wav 文件（通过 DDMS 很容易通过模拟器）并确保您有一个有效的 .wav 文件。我假设您可能在某个事件中调用了 MediaRecorder 上的 .stop。如果没有，您可能正在尝试准备仍由 MediaRecorder 打开的音频文件。

# ios - 无法在 iOS 应用程序中打开 Google 地图

> ID：14219641
> 
> 赞同：1
> 
> 时间：2013-01-08T16:30:51.040
> 
> 标签：ios, iphone, objective-c, google-maps, viewdidload

我正在尝试通过执行以下操作在我的应用程序中启动 Google Maps iOS 应用程序：

```
- (void)viewDidLoad
{
    [super viewDidLoad];        
    self.title                  =   @"Google Map";
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:
                                                @"comgooglemaps://?center=40.765819,-73.975866&zoom=14&views=traffic"]];
} 
```

但是，该应用程序根本不会启动 Google Maps iOS。我确实安装了 Google Maps iOS。

我在这里错过了什么？

有人可以帮帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T14:44:14.607

试试这个

```
 CLLocationCoordinate2D coordinate = COORDINATE;

// Open Google Maps application
 if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"comgooglemaps://"]]) {

    NSString *daddr = [NSString stringWithFormat:@"%g,%g",coordinate.latitude, coordinate.longitude];

    NSString *urlString = nil;

    BOOL showQuery = YES;
    if (showQuery) {
        // Query
        urlString = [NSString stringWithFormat:@"comgooglemaps://?q=%@",daddr];
    } else {
        // Directions
        urlString = [NSString stringWithFormat:@"comgooglemaps://?saddr=&daddr=%@", daddr];
    }

    NSURL *url = [NSURL URLWithString:urlString];
    [[UIApplication sharedApplication] openURL:url];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-04T21:44:29.280

您需要将 comgooglemaps url 方案包含到您的项目 Info.plist 中。我建议查看[Localide](https://github.com/davoda/Localide)。它可以帮助您非常轻松地打开 Google Maps、Waze、Apple Maps、Transit App、Citymapper 和 Navigon。

# cordova - JQUERY Mobile 弹出窗口导致宽度滚动

> ID：14219642
> 
> 赞同：0
> 
> 时间：2013-01-08T16:30:55.817
> 
> 标签：cordova, jquery-mobile

我正在将 jquery mobile 用于应用程序。我在页面中添加了一个弹出对话框，它工作得很好。

问题是当我将`jquery JS`文件更改`rtl.jquery.mobile-1.2.0`为`width x scrolling effect`.

有人知道为什么吗？或者我该如何解决？因为我不想放弃`rtl ui`。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:49:05.673

我认为您可以保留 `jquery JS`文件并将此属性添加到`data-role="page`

```
dir='rtl' 
```

# javascript - Javascript - 将二维数组保存到本地存储并检索

> ID：14219644
> 
> 赞同：3
> 
> 时间：2013-01-08T16:30:57.597
> 
> 标签：javascript, jquery, local-storage

我有一个包含信息的二维数组，我需要将其保存到本地存储中，然后再检索。这是我的数据：

```
var content_array = [
    ["0","Mobile Application Development","CT5006","01/14/2013","Note"],
    ["1","Java Programming","CT5005","01/16/2013","Note"],
    ["2","Multimeida Application Development","CT5011","02/13/2013","Note"]
]; 
```

有什么简单的方法可以把它变成一个字符串然后再变成一个二维数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T16:32:29.913

使用本机[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)方法：

```
var str = JSON.stringify(content_array); 
```

然后，您可以使用该[`JSON.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)方法将其返回到实际数组中：

```
var content_array = JSON.parse(str); 
```

# hbase - 失败：元数据错误：MetaException（消息：org.apache.hadoop.hbase.MasterNotRunningException：在 HBase+Hive 集成中

> ID：14219646
> 
> 赞同：1
> 
> 时间：2013-01-08T16:31:02.003
> 
> 标签：hbase, hive

使用的组件：--Ubuntu 12.04、hive(0.9.0)、hbase(0.94.3)、hadoop(0.20.2)-single-node、zookeeper-3.4.3、guava-11.0.2、hive-hbase-handler -0.9.0

教程：- [https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration](https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration)

步骤 1) 启动 hadoop，2) 启动 hbase-master 3) 启动 hiveserver 4) 使用教程中的 --auxpath 参数启动 hive shell（所有工作都没有错误 - JobTracker，HRegionServer，HMaster，DataNode，NameNode，SecondaryNameNode，TaskTracker，HQuorumPeer ,Jps)

```
hbase(main):001:0> status
1 servers, 0 dead, 2.0000 average load 
```

在我创建的蜂巢外壳上，我可以将表创建为

```
CREATE TABLE IF NOT EXISTS familia (id_familia INT,fk_veiculo INT,fk_cliente INT,nome STRING) ROW FORMAT delimited fields terminated by ',' STORED AS TEXTFILE;
load data local inpath '/home/trendwise/hive_data/tables_csv/familia.csv' overwrite into table familia; 
```

但是当我在下面进行查询时，没有显示，只是光标闪烁。我等了很长时间，然后显示错误

```
CREATE TABLE hbase_familia_1 (key int, id_familia int, fk_veiculo INT,fk_cliente INT,nome STRING)
STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'
WITH SERDEPROPERTIES("hbase.columns.mapping" = ":key, cf1:id_familia, cf2:fk_veiculo,cf3:fk_cliente, cf4:nome")
TBLPROPERTIES ("hbase.table.name" = "hbase_familia"); 
```

我`list`在 hbase shell 上做了，它没有显示我试过的任何表？

错误：-

```
FAILED: Error in metadata: MetaException(message:org.apache.hadoop.hbase.MasterNotRunningException: Retried 10 times
at org.apache.hadoop.hbase.client.HBaseAdmin.<init>(HBaseAdmin.java:127)
at org.apache.hadoop.hive.hbase.HBaseStorageHandler.getHBaseAdmin(HBaseStorageHandler.java:73)
at org.apache.hadoop.hive.hbase.HBaseStorageHandler.preCreateTable(HBaseStorageHandler.java:147)
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:398)
at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:538)
at org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:3305)
at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:242)
at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:134)
at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)
at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1326)
at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1118)
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:951)
at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:258)
at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:215)
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:406)
at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:689)
at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:557)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
) FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask 
```

hbase-site.xml

```
<property>
 <name>hbase.rootdir</name>
 <value>hdfs://localhost:54310/hbase</value>
</property>
<property>
 <name>dfs.replication</name>
 <value>1</value>
</property>
<property>
 <name>hbase.zookeeper.property.dataDir</name>
 <value>/home/trendwise/hadoop/hbase-0.94.3/hbase_dataDir</value>
</property>
<property>
 <name>hbase.zookeeper.property.clientPort</name>
 <value>2222</value>
 <description>Property from ZooKeeper's config zoo.cfg.
 </description>
</property>
<property>
 <name>hbase.zookeeper.quorum</name>
 <value>localhost</value>
 <description></description>
</property>
<property>
 <name>hbase.cluster.distributed</name>
 <value>true</value>
 <description></description>
</property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:59:56.390

Hbase 无法启动其所有守护进程...所以您可能会在 hbase 日志中找到线索...看看您是否可以在 hbase 日志中找到任何内容并报告该错误...希望这有效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:02:57.633

将 /etc/hosts 文件中包含“127.0.1.1”的行更改为“127.0.0.1”并重新启动所有内容。此外，将 hbase-site.xml 复制到 HIVE_HOME/conf 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T05:10:51.953

似乎 Hive 无法找到所需的 jar 文件

尝试使用所有命令执行命令

hive –auxpath /path-to-/hive-examples.jar；其他 jar 文件也用分号分隔

然后尝试将 hbase conf 文件放在 hive conf 目录中。

并在 hive-site.xml 或 hive-env.sh 中定义辅助路径并尝试

这些错误主要是由于 hive 无法连接到 hadoop 或 hbase。

并检查所有守护进程是否正在运行 hbase，您可以在 hbase shell 上执行所有操作。

# java - 如何将 bean:message 插入字符串？

> ID：14219650
> 
> 赞同：0
> 
> 时间：2013-01-08T16:31:06.123
> 
> 标签：java, jsp, struts

我想做以下

```
<div id="Grants the " + <bean:message key="label.foo/>/> 
```

如何才能做到这一点？基本上，它将一个 bean:message 连接到一个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:33:54.537

您可以在常规 HTML 标记中嵌入 Struts（和其他 JSP 标记库）标记：

```
<div id="Grants the <bean:message key="label.foo"/>"/> 
```

如果带有键的消息资源有`label.foo`文本“Foo”映射到它，那么结果将是：

```
<div id="Grants the Foo"/> 
```

尽管值得注意的是，这不是该`id`属性的有效值。

# javascript - 能够在使用 keyup 事件时用键盘移动光标

> ID：14219652
> 
> 赞同：1
> 
> 时间：2013-01-08T16:31:10.360
> 
> 标签：javascript, jquery, dom-events

我有一个功能可以将大写字母转换为小写字母，也可以替换小破折号的空格。

问题是，例如，当用户打错字并想要纠正它时，如果他尝试使用键盘将光标移回，他将无法这样做，因为光标将始终位于最后一个位置字符串。

在这里，我有 JS 小提琴与示例工作：http: [//jsfiddle.net/R8N8F/7/](http://jsfiddle.net/R8N8F/7/)

在示例中，我使用的是 jQuery，因为我无法使用 jsfiddle 的 Javascript 运行它，但这是我正在使用的当前函数：

```
function replaze(obj){
    obj.value = obj.value.toLowerCase().replace(/ /g, '-');
} 
```

这是我的 HTML：

```
<input name="demo" autofocus="autofocus" onkeyup="replaze(this);" type="text" id="UserUsername"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:01:54.940

您可以使用以下答案保留选择：

[https://stackoverflow.com/a/3288215/96100](https://stackoverflow.com/a/3288215/96100)

您可以改用我的[jQuery 插件](http://code.google.com/p/rangyinputs/)，它使用相同的代码。例子：

```
var $input = $("#UserUsername");
$input.keyup(function() {
    var sel = $input.getSelection();
    replaze(this);
    $input.setSelection(sel.start, sel.end);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-02T06:09:43.467

看看这个这个例子帮助你通过箭头键移动光标 [https://jsfiddle.net/RaviMakwana/a5ts0emr/](https://jsfiddle.net/RaviMakwana/a5ts0emr/)

```
<script async src="//jsfiddle.net/RaviMakwana/a5ts0emr/embed/"></script>
```

# php - PHP - 解析错误：意外的 EOF / 目录

> ID：14219660
> 
> 赞同：0
> 
> 时间：2013-01-08T16:31:46.047
> 
> 标签：php, mysql, eof, mkdir

我收到此错误：

```
Parse error: syntax error, unexpected end of file in C:\xampp\htdocs\Task2PHP\final\upload.php on line 205 
```

我找不到导致问题的原因，因为所有 PHP 块都已打开和关闭

```
 <?php
    include("login.php");

?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>FileStore - Upload Files</title>
    <link rel="stylesheet" href="./CSS/style.css" type="text/css" media="screen, projection" />
</head>

<body>

<div id="wrapper">

    <header id="header">

    <div id="header-content">
        <strong><h1>FileStore</h1></strong> Upload multiple files at once!
    </div>

    <div class="login-info" >

<?php

    if ($isLoggedin === false) {
        echo '  <form action="" method="POST">
                    Username: <input name="username" > 
                    Password: <input type="password" name="password" size="8">
                              <input type="submit" name="submit" value="Login">
                </form>';
        echo "<p align='right'>You are not logged in.</p>";
        echo "<b><a href='registration.php'>Register</a></b>";

    }else{  
        echo $welcomeMsg;
    }   
?>

    </div>

    </header><!-- #header-->

    <section id="middle" align="center">

        <div id="container">

        <br><br>
            <div id="content">
                <strong><h1>Upload files</h1></strong><br><br>

                <div id="upload-file" >

<?php 

                    include("dbConfig.php");

                    $Username = $_SESSION["username"];

                    global $userid;

                    $Password = $_SESSION["password"];

                    $Password = md5($Password);

                    $sql = "SELECT UserID FROM users WHERE Username = '".$Username."'";

                    $result = mysql_query($sql) or die(mysql_error());

                    while($row = mysql_fetch_assoc($result)) {

                            $userid = $row['UserID'];

                    }

                    echo $userid;

                    $dirname = (string)$userid;

                    $filename = ("/folder/" . "$dirname" . "/");

                    if (!file_exists($filename))

                    {

                                mkdir("files/$dirname", 0777);

                                if (isset($_FILES['files'])) {

                                echo "<div id='files_table'><table class='center'.><tr><td>";

                                $dest = ("files/" . $dirname . "{$_FILES['files']['name'][$key]}");

                                foreach($_FILES['files']['tmp_name'] as $key => $tmp_name){

                                move_uploaded_file($tmp_name, $dest );

                                echo $_FILES['files']['name'][$key], " uploaded.", "<br>";

                                }

                    } else {

                            if (isset($_FILES['files'])) {

                            echo "<div id='files_table'><table class='center'.><tr><td>";

                                $dest = ("files/" . $dirname . "{$_FILES['files']['name'][$key]}");

                                foreach($_FILES['files']['tmp_name'] as $key => $tmp_name){

                                move_uploaded_file($tmp_name, $dest );

                                echo $_FILES['files']['name'][$key], " uploaded.", "<br>";

                        }
                        echo "</td></tr></table></div><br><br>";
                        }

                    // }

                        // if (isset($_FILES['files'])) {

                        // echo "<div id='files_table'><table class='center'.><tr><td>";

                                // foreach($_FILES['files']['tmp_name'] as $key => $tmp_name){

                                // move_uploaded_file($tmp_name, "files/'".$userid."'{$_FILES['files']['name'][$key]}");

                                // echo $_FILES['files']['name'][$key], " uploaded.", "<br>";

                        // }
                        // echo "</td></tr></table></div><br><br>";
                        // }

?>
                    <form action="" method="post" enctype="multipart/form-data">

                            <h1> Select files to upload:</h1>
                            <br>
                            <p>
                                <input type="file" name ="files[]" multiple min="1" /> 
                                <input type="submit" value="Upload" />
                            </p>
                            <br>
                            <h2> You can select multiple files for upload. </h2>

                    </form>

        </div>

            </div><!-- #content-->
        </div><!-- #container-->

        <aside id="sideLeft">

            <div id="menu-x" align="center"><br>
            <strong>Menu</strong><br><br>

                    <div class="menu">
                        <ul>
                        <li><a href="index.php">Home</a></li>
                        <li><a href="upload.php">Upload</a></li>
                        <li><a href="files.php">Files</a></li>
                        <li><a href="about.php">About</a></li>
                        <li><a href="help.php">Help</a></li>
                        <li><a href="#">Logout</a></li>
                        </ul>
                        <br style="clear:left"/>
                    </div>

            </div>

        </aside><!-- #sideLeft -->

    </section><!-- #middle-->

    <footer id="footer">
        <strong>FileStore:</strong> A CMT 3315 Project by Brian Livori
    </footer><!-- #footer -->

</div><!-- #wrapper -->

</body>
</html> 
```

另外，我正在尝试使用 mkdir 创建一个链接到用户的用户 ID (MySQL) 的目录。目录已创建，但文件不会上传到新目录中。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:35:49.343

您的最后一个`else`块没有关闭（右大括号被注释掉）：

```
else {
    if (isset($_FILES['files'])) {

        foreach($_FILES['files']['tmp_name'] as $key => $tmp_name){

        }
        echo "</td></tr></table></div><br><br>";
    } 
```

正确格式化您的代码，您会看到此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:35:59.873

您有一个未关闭`{`的导致此错误的。如果您正确缩进代码，则不会发生这种情况。

# asp.net - Azure 网站和 Azure 云服务的区别

> ID：14219664
> 
> 赞同：4
> 
> 时间：2013-01-08T16:32:10.027
> 
> 标签：asp.net, azure, sql-server-2008-r2, webforms, azure-web-app-service

我即将将几个单独的 ASP.NET 4.0 Web 窗体应用程序迁移到 Azure。有几个是使用 SQL Server 2008 的应用程序。我看到了“冲突”的教程：

[将 ASP.NET Web 应用程序部署到 Windows Azure 网站和 SQL 数据库](http://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)

对比

[将 ASP.NET Web 应用程序部署到 Windows Azure 云服务和 SQL 数据库](http://www.windowsazure.com/en-us/develop/net/tutorials/cloud-service-with-sql-database/)

[这个 StackOverflow 问题](https://stackoverflow.com/questions/10941488/what-is-the-difference-between-an-azure-web-site-and-an-azure-web-role)在某种程度上解释了这一点。但是，最近几个月 Azure 发生了一些变化，我不确定这些信息的最新情况。

由于我必须迁移的站点数量众多，我希望迁移过程尽可能简单。是否存在我*必须*使用云服务路由的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:34:44.837

除了链接到的答案提供的内容之外：如果有需要安装的应用程序（例如 MSI、COM 对象等），您*必须走云服务路线。*网站根本无法做到这一点。在网站中，您根本无法更改 VM 实例。使用云服务，您可以灵活地安装软件、更改 IIS 行为以及您需要做的几乎任何事情（只要安装可以自动化）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T16:40:46.510

如果您考虑迁移 ASP.NET 4.0 Web 表单应用程序，这一点可能非常有价值 - Microsoft Azure 网站尚不支持自定义域的 SSL。这可能会阻碍您将工作迁移到网站服务。

请注意，Windows Azure 是一个非常动态的环境，每个新版本都会提供大量新功能。**为了保持最新状态，我建议关注[ScottGu 的博客](http://weblogs.asp.net/scottgu/)以了解新功能及其发布日期**。

**编辑**

Windows Azure 网站现在支持自定义域的 SSL。SSL 证书和 SSL 绑定可以在**配置**选项卡中配置。

![Windows Azure SSL 支持](../Images/823373953076839bbbb171b6b748f4b7.png)

[您还可以在为 Windows Azure 网站配置 SSL 证书中](http://www.windowsazure.com/en-us/documentation/articles/web-sites-configure-ssl-certificate/)阅读有关 Azure 网站 SSL 配置的更多信息。

# matlab - 如何转置 Mx1 细胞和载体的细胞？

> ID：14219665
> 
> 赞同：2
> 
> 时间：2013-01-08T16:32:09.773
> 
> 标签：matlab

我有一个 1x *N*单元格，称为它`X`，其组件`X{i}`（对于`i`{1, 2, ..., *N* } 中的）是*M* *x1*个字符串单元格*或* *M* x1 个数字向量。

注意：`X`包含文本单元格和数字向量的事实排除*了*`cell2mat`在此处使用：

```
>> tmp = cell2mat(X);
Error using cell2mat (line 46)
All contents of the input cell array must be of the same data type. 
```

我的问题是：

> MATLAB 将这些数据转换为*M* 1x *N*单元数组的“惯用”方式是什么？

编辑：要清楚，我想要到达的数据结构，我们称之为它`Y`，是一个*M*长的 1x *N*单元格数组（每个单元格由数字和字符串的混合组成）。例如，如果*N* = 2，并且如果`X{1}`是*M* x1 字符串单元，并且`X{2}`是*M* x1 双精度向量，则所需的数据结构`Y`是这样的，对于任何 1 ≤ `i`≤ *M*，`Y(i,:)`是一个 1x2 单元，其第一个元素是中的`i`第 - 个字符串，`X{1}`其第二个元素是 中的`i`第 - 个双精度值`X{2}`。即与定义如下`Y(i,:)`的 1x2 单元格相同`Yi`

```
xi1 = X(i, 1);
xi2 = X(i, 2);
Yi = {xi1{1} xi2{1}}; 
```

（对不起，尴尬！ *我只是找不到*`Yi`直接用`X`和表示的 MATLAB 表达式`i`，而不必创建中间变量`xi1`和`xi2`。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:43:16.840

首先，据我所知，在 Matlab 中没有“惯用”的方式来做到这一点。请记住，我们谈论的是具有嵌套单元格和不同类型的复杂数据结构。

我试图根据 cellfun 编写一个解决方案。它很快变得复杂，我什至没有成功。因此，我建议做一个简单的 double for 循环和一个 if，如下所示：

```
for a=1:size(X,2),
    for b=1:size(X{a},1),
        if iscell(X{a}),
            Y{a,b} = X{a}{b};
        else
            Y{a,b} = X{a}(b);
        end
    end
end 
```

如果`X = {{'s1';'s2'} [3; 4]}`那么这个解决方案会给`Y = {'s1' 3 ;'s2' 4}`.

如您所见，我已将单元格压平到一个深度。要获取您的`1xN`向量，请执行`Y{1,:}`

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:21:54.827

如果 X 中的每个单元格都包含一个相同大小的向量，请将其转换为矩阵，转置该矩阵，然后将其转换回单元格数组？

```
tmp = cell2mat(X);
Y = mat2cell(tmp', ...); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T20:23:37.337

这是功能：

```
feval(@(y) feval(@(x) cellfun(@(varargin)[varargin],x{:},'un',0), cellfun(@(x) feval(@(varargin) varargin{3-varargin{1}}(), iscell(x),x,num2cell(x)),y,'un',0)), {{'1','2','3'},[4 5 6],{7,8,9}}) 
```

或存储为函数名：

```
transpose_nest = @(cell_nest) feval(@(y) feval(@(x) cellfun(@(varargin)[varargin],x{:},'un',0), cellfun(@(x) feval(@(varargin) varargin{3-varargin{1}}(),iscell(x),x,num2cell(x)),y,'un',0)), cell_nest);

transpose_nest({{'1','2','3'},[4 5 6],{7,8,9}})

{{'1',4,7},{'2',5,8},{'3',6,9}} 
```

它基于仅适用于子单元格的 Scheme 的 Matlab 等效项（应用映射列表 '(("1" "2" "3") (4 5 6) (7 8 9))）：

```
feval(@(x) cellfun(@(varargin)[varargin],x{:},'un',0), {{'1','2','3'},{4,5,6},{7,8,9}})

{{'1',4,7},{'2',5,8},{'3',6,9}} 
```

额外的部分：

```
@(x) feval(@(varargin) varargin{3-varargin{1}}(), iscell(x), x, num2cell(x)) 
```

是匿名函数中的 if 语句，如果任何子元素是向量，则调用 num2cell

# matlab - parfor 不打印

> ID：14219676
> 
> 赞同：4
> 
> 时间：2013-01-08T16:32:47.317
> 
> 标签：matlab, parfor

我正在运行一个带有 parfor 循环的小脚本。该脚本以以下行开头：

```
parfor i=1:length(vX)
    fprintf('%d/%d\n',i,length(X));
    ... 
```

所以显然我应该马上看到打印输出。当我使用由 启动的两个工人池运行它时`matlabpool(2)`，我看不到**任何**打印输出。当我关闭工作人员并保持 parfor 循环时，我会看到打印输出，但只有在我按 ctrl-c 时才会看到。当我将其更改`parfor`为常规时`for`，我会看到输出。请注意，我从未见过循环运行完成，因为它很长，但打印输出是脚本的第二行，应该立即发生，除非在 matlab 中存在一些我不知道的缓冲区刷新问题。怎么了？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T17:30:36.913

我怀疑延迟是由于设置`parfor`循环的开销造成的。

根据我的经验，初始化循环可能需要几秒钟，最多 15 秒钟。当我的 a 循环中的代码使用具有大内存占用的变量时尤其如此，因为必须将变量复制到工作人员。

工作人员之间的数据复制是通过网络完成的，基本的网络活动监视器应该显示此活动。我发现确定我有多少`parfor`执行时间被用于初始化工作程序很有用。

我`fprintf`一直在`parfor`循环中使用；但是，由于循环迭代不是按顺序进行的，因此我尝试对生成的输出进行创新。

如果您正在寻找的只是一个进度指示器，请查看： http: [//www.mathworks.com/matlabcentral/fileexchange/32101-progress-monitor-progress-bar-that-works-with-parfor](http://www.mathworks.com/matlabcentral/fileexchange/32101-progress-monitor-progress-bar-that-works-with-parfor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-15T13:07:53.327

我遇到了同样的问题，并尝试了几个月来找到解决方案。但最后我只是诉诸使用

```
disp(['text ',num2str(variable)); 
```

# excel - 从excel列表中显示下一个可用日期？

> ID：14219678
> 
> 赞同：1
> 
> 时间：2013-01-08T16:33:03.597
> 
> 标签：excel

我有一个动态日期列表，如下所示。假设这是 L 列

```
01-Jan-12   
01-Apr-12   
01-Jul-12   
01-Oct-12   
01-Jan-13 
```

基本上，我想做的是显示即将到来的下一个日期，或者如果将来没有日期，则显示最后一个日期。IE。由于现在是 1 月 8 日，因此它将显示 01-Jan-13。如果我们在 2012 年 5 月，它将显示 01-July-12

我目前正在使用：

```
=MIN(IF($L$4:$L$19>TODAY(),!$L$4:$L$19)) 
```

只要有未来的日期，哪个有效。否则失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:43:52.270

哪个版本的 Excel？在 Excel **2007**或更高版本中，您可以使用`IFERROR`，例如

`=IFERROR(SMALL(IF($L$4:$L$19>TODAY(),$L$4:$L$19),1),MAX($L$4:$L$19))`

确认`CTRL+SHIFT+ENTER`

或“非数组”版本

`=IFERROR(INDEX($L$4:$L$19,MATCH(TODAY(),$L$4:$L$19)+1),MAX($L$4:$L$19))`

# reporting-services - 将时间智能过滤器连接到记分卡的当前日期——这可能吗？

> ID：14219682
> 
> 赞同：0
> 
> 时间：2013-01-08T16:33:18.537
> 
> 标签：reporting-services, performancepoint, kpi, dashboard-designer

在 PerformancePoint 2013 中，有两种类型的时间过滤器 - 时间智能和时间智能连接公式。后者让我可以将过滤器的“当前时间”属性与记分卡的“当前时间”联系起来，而时间智能过滤器没有该选项。

我想连接到 KPI/记分卡的当前时间的原因是因为我已经在 KPI 的数据映射中应用了时间智能过滤器。基本上，我将一组数字与前一年的数字进行比较。我已经尝试将时间智能过滤器的公式属性连接到 KPI 的公式属性，但它只是覆盖了它。

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:10:16.787

在您可以使用的公式中，即。`day`, 对于当前日期和`day-1`昨天的比较值

有关完整的语法，请参见：

[PerformancePoint 时间智能快速参考](http://technet.microsoft.com/en-us/library/ff701696.aspx)

# android - 如何在可声明样式中定义整数数组？

> ID：14219685
> 
> 赞同：18
> 
> 时间：2013-01-08T16:33:24.523
> 
> 标签：android, android-xml, android-resources, typed-arrays, declare-styleable

我正在为自定义视图实现自己`<declare-styleable>`的视图（按照[此处](http://developer.android.com/training/custom-views/create-view.html)的说明进行操作）。我希望能够将整数数组指定为可能的 XML 属性之一。我如何：

1.  `attrs.xml`在?中将整数数组指定为 XML 属性
2.  调用我的自定义视图后从[TypedArray](http://developer.android.com/reference/android/content/res/TypedArray.html)中获取它`obtainStyledAttributes()`？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-08T17:20:25.167

1.  您可以将其声明为参考。

    ```
    <declare-styleable name="MyView">
        <attr name="array" format="reference"/>
    </declare-styleable> 
    ```

2.  看起来`TypeArray`没有`getIntArray`方法，所以你必须直接从资源中获取它。

    ```
    final TypedArray array = context.obtainStyledAttributes(attrs, R.styleable.MyView);
    final int id = array.getResourceId(R.styleable.MyView_array, 0);

    if (id != 0) {
        final int[] values = getResources().getIntArray(id);
    }

    array.recycle() 
    ```

# visual-studio-2012 - 在 VS2012 中添加服务引用不会更新 web.config

> ID：14219689
> 
> 赞同：4
> 
> 时间：2013-01-08T16:33:43.777
> 
> 标签：visual-studio-2012

当我在 Visual Studio 2012 中添加服务引用时，我的 Web.config 没有任何反应。System.ServiceModel 如果不存在则不添加，如果存在则更新。我必须从服务器端手动复制/粘贴设置才能将它们放入我的 web.config。有谁知道为什么当我添加服务引用时我的 wcf 配置没有被拉入 web.config 中？在以前版本的 Visual Studio 中，它总是为我这样做。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T19:51:40.447

我遇到了类似的问题，但后来发现这篇博文并有所帮助：[http ://thomashundley.com/post/2011/12/07/WCF-Service-References-not-generating-webconfig-client-endpoints-and-bindings .aspx](http://thomashundley.com/post/2011/12/07/WCF-Service-References-not-generating-webconfig-client-endpoints-and-bindings.aspx) - 基本上，在服务参考高级配置中，清理已检查的程序集列表 - 只留下您确定服务中使用的类型需要的程序集。

# php - Laravel 使用 Artisan 设置迁移失败

> ID：14219692
> 
> 赞同：9
> 
> 时间：2013-01-08T16:33:49.347
> 
> 标签：php, migration, laravel

我正在尝试第一次设置迁移以及运行时

```
php artisan migrate:install 
```

从我的项目的根文件夹中，我收到以下 SQLSTATE 错误：

```
SQLSTATE[HY000] [2002] No such file or directory 
```

我已经测试了运行`mysql`以确保它正在工作并被引用，并且我已经运行`php artisan help:commands`以确保工匠正在工作（它是）。

该网站本身运行良好，并且可以正常读取数据库。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-08T17:14:48.220

如果您使用 MAMP 或 XAMPP，这可能是套接字的问题。

来自[http://forums.laravel.io/viewtopic.php?id=980](http://forums.laravel.io/viewtopic.php?id=980) ...

```
'connections' => array(
    'mysql' => array(
        'driver'   => 'mysql',
        'host'     => 'localhost',
        'unix_socket'   => '/Applications/MAMP/tmp/mysql/mysql.sock',
        'database' => 'database',
        'username' => 'user',
        'password' => 'pass',
        'charset'  => 'utf8',
        'prefix'   => '',
    ),

), 
```

您可以将可选的“unix_socket”传递给数组并指定 MAMP 套接字而不是默认位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-03T21:10:05.140

Also, try and change 'host' => 'localhost', to 'host'=> '127.0.0.1', because unix does not recognise 'localhost'

# algorithm - 将点拟合到网格的算法

> ID：14219700
> 
> 赞同：8
> 
> 时间：2013-01-08T16:34:18.163
> 
> 标签：algorithm

我有一个二维空间中形成（不完美）网格的点列表：

```
x     x        x         x

 x    x       x           x

                 x
x      x                x

 x     x      x           x 
```

将这些拟合到刚性网格的最佳方法是什么（即创建一个二维数组并计算出每个点在该数组中的位置）？

网格中没有孔，但我事先不知道它的尺寸是多少。

编辑：网格不一定是规则的（甚至行/列之间的间距）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-11T14:08:08.883

一点图像处理方法：如果您将所拥有的图像视为 X 为 1 其余为 0 的二进制图像，您可以总结行和列，并使用峰值查找算法来识别峰值对应于网格的 x 和 y 线：

您作为二进制图像的点：

![在此处输入图像描述](../Images/0b7b3d4d8e735516c8f12a8f0d1ec085.png)

行/列的总和

![在此处输入图像描述](../Images/1e054006a3f57881a141b423bb0ae13a.png)

现在对信号应用一些平滑技术（例如lowess）：

![在此处输入图像描述](../Images/b5e76728397c09edfa8279c1f748631a.png)

我相信你明白了:-)

祝你好运

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T01:50:59.870

我能想到的最好的方法是计算网格尺寸的蛮力解决方案，以最小化点与其最近网格交点之间的欧几里得距离的平方误差。

这假设点的数量 p 正好等于列数乘以行数，并且每个网格交叉点上正好有一个点。它还假设任何点的最小 x/y 值为零。如果最小值大于零，只需从每个点的 x 坐标减去最小 x 值，从每个点的 y 坐标减去最小 y 值。

这个想法是在给定点数的情况下创建所有可能的网格尺寸。在上面有 16 个点的示例中，我们将制作尺寸为 1x16、2x8、4x4、8x2 和 16x1 的网格。对于这些网格中的每一个，我们通过将点的最大宽度除以列数减 1 并将点的最大高度除以行数减 1 来计算网格交叉点的位置。然后我们将每个点拟合到它最近的网格交点并找到该点和交点之间的误差（距离的平方）。（请注意，这仅在每个点更接近其预期的网格交叉点而不是任何其他交叉点时才有效。）

在分别对每个网格配置的误差求和后（例如，为 1x16 配置获取一个误差值，为 2x8 配置获取另一个误差值等等），我们选择具有最低误差的配置。

初始化：

```
 P is the set of points such that P[i][0] is the x-coordinate and
                                   P[i][1] is the y-coordinate
  Let p = |P| or the number of points in P
  Let max_x = the maximum x-coordinate in P
  Let max_y = the maximum y-coordinate in P
     (minimum values are assumed to be zero)

  Initialize min_error_dist = +infinity
  Initialize min_error_cols = -1 
```

算法：

```
 for (col_count = 1; col_count <= n; col_count++) {
     // only compute for integer # of rows and cols
     if ((p % col_count) == 0) {   
        row_count = n/col_count;

        // Compute the width of the columns and height of the rows
        // If the number of columns is 1, let the column width be max_x
        // (and similarly for rows)
        if (col_count > 1) col_width = max_x/(col_count-1);
        else col_width=max_x;
        if (row_count > 1) row_height = max_y/(row_count-1);
        else row_height=max_y;

        // reset the error for the new configuration
        error_dist = 0.0;
        for (i = 0; i < n; i++) {
           // For the current point, normalize the x- and y-coordinates
           // so that it's in the range 0..(col_count-1)
           //                       and 0..(row_count-1)
           normalized_x = P[i][0]/col_width;
           normalized_y = P[i][1]/row_height;

           // Error is the sum of the squares of the distances between 
           // the current point and the nearest grid point 
           // (in both the x and y direction)
           error_dist += (normalized_x - round(normalized_x))^2 +
                         (normalized_y - round(normalized_y))^2;
        }

        if (error_dist < min_error_dist) {
           min_error_dist = error_dist;
           min_error_cols = col_count;
        }
     }
  }
  return min_error_cols; 
```

一旦获得了列数（以及行数），您就可以重新计算每个点的归一化值并将它们四舍五入以获得它们所属的网格交点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T15:22:41.830

最后我使用了这个算法，灵感来自烧杯：

1.  给定点的总数，计算网格的所有可能维度
2.  对于每个可能的维度，将点拟合到该维度并计算对齐的方差：
    *   按 x 值对点进行排序
    *   将点分组为列：前 r 个点构成第一列，其中 r 是行数
    *   在每一列中，按 y 值对点进行排序以确定它们在哪一行
    *   对于每一行/列，计算 y 值/x 值的范围
    *   对齐的方差是找到的最大范围
3.  选择对齐偏差最小的尺寸

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-25T23:16:42.137

我写了这个算法来解释丢失的坐标以及有错误的坐标。

## Python代码

```
# Input [x, y] coordinates of a 'sparse' grid with errors
xys = [[103,101],
       [198,103],
       [300, 99],
       [ 97,205],
       [304,202],
       [102,295],
       [200,303],
       [104,405],
       [205,394],
       [298,401]]

def row_col_avgs(num_list, ratio):
    # Finds the average of each row and column. Coordinates are
    # assigned to a row and column by specifying an error ratio.
    last_num = 0
    sum_nums = 0
    count_nums = 0
    avgs = []
    num_list.sort()
    for num in num_list:
        if num > (1 + ratio) * last_num and count_nums != 0:
            avgs.append(int(round(sum_nums/count_nums,0)))
            sum_nums = num
            count_nums = 1
        else:
            sum_nums = sum_nums + num
            count_nums = count_nums + 1
        last_num = num
    avgs.append(int(round(sum_nums/count_nums,0)))
    return avgs

# Split coordinates into two lists of x's and y's
xs, ys = map(list, zip(*xys))

# Find averages of each row and column within a specified error.
x_avgs = row_col_avgs(xs, 0.1)
y_avgs = row_col_avgs(ys, 0.1)

# Return Completed Averaged Grid
avg_grid = []
for y_avg in y_avgs:
    avg_row = []
    for x_avg in x_avgs:
        avg_row.append([int(x_avg), int(y_avg)])
    avg_grid.append(avg_row)

print(avg_grid) 
```

## 代码输出

```
[[[102, 101], [201, 101], [301, 101]], 
 [[102, 204], [201, 204], [301, 204]], 
 [[102, 299], [201, 299], [301, 299]], 
 [[102, 400], [201, 400], [301, 400]]] 
```

我也在寻找使用线性代数的另一种解决方案。[在这里](https://stackoverflow.com/questions/62946604/fitting-coordinates-to-a-grid)查看我的问题。

# ruby-on-rails - 未找到阻止模型保存的地址 | gmaps4rails

> ID：14219701
> 
> 赞同：2
> 
> 时间：2013-01-08T16:34:24.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我试图将一个新对象保存到我的数据库中，并意识到 gmaps4rails 正在阻止保存，因为地理编码器没有找到该地址：

在我的日志中：

```
The address you passed seems invalid, status was: ZERO_RESULTS. 
```

发生这种情况时，有没有办法在不设置 lat/lng 的情况下保存对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:13:30.680

答案[在 wiki 中](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Model-Customization)：

```
 acts_as_gmappable validation: false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:09:26.330

把它改成这个为我解决了同样的问题

```
 #gmaps for rails
  acts_as_gmappable :validation => false 
```

# c# - 复杂的 Linq 表达式生成器

> ID：14219703
> 
> 赞同：0
> 
> 时间：2013-01-08T16:34:27.730
> 
> 标签：c#, linq, linq-expressions

我需要构建一个可配置的查询构建器，允许用户组合任意数量的可能条件。例如，假设我们有`Customer`、`Order`和`OrderItem`的经典案例`Product`。用户希望能够为所有超过 3 个项目的订单绘制报告。或者可能只有一件商品的订单。应该是基本相同的查询，只是比较器会不同。

用户可能还想附加一个条件，即客户居住在区号 10024。或者订单包括至少/大多数/正好 2 件产品 ID 14。显然，每个条件都需要用自己的方法进行硬编码，但每个条件的基本签名将是：

```
private static Expression<Func<Order, bool>> SomePredicate(object someParameters) 
```

到目前为止，这是我所描述的最后一个情况：

```
private static Expression<Func<Order, bool>> CountProductItems(int productID, int count, Comparator comparator) {
  Expression<Func<Order, int>> productOrderItems = 
    order => order.Items.Where(i => i.ProductID == productID)
                  .Sum(i => i.Quantity);
  switch (comparator) {
    case Comparator.Equals:
      // return... uh... now what?
    case Comparator.GreaterThan:
      // you get the picture....
  }
} 
```

我只是错过了最后一个语法步骤：如何使用该表达式`productOrderItems`并返回该表达式等于/小于/大于/等的顺序。提供的值`count`。

你怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:53:48.420

不要`Expression`使用方法内的对象，而是使用`Func`：

```
Func<Order, int> productOrderItems =
    (Order o) => o.Items.Where(i => i.ProductID == productID)
                        .Sum(i => i.Quantity); 
```

然后在您的内部`switch`，您可以在其上编写另一个 Lambda 表达式`productOrderItems`作为您的返回值。它将自动转换为`Expression`,`Expression`并且`Func`在技术上是可互换的：

```
switch (comparator) {
    case Comparator.Equals:
        return (Order o) => productOrderItems(o) == count;
        break;
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:51:39.340

我已经成功使用了 ScottGu 的[Dynamic LINQ Query](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。

在我们的例子中，我们需要在运行时定义我们的 Where 子句，它就像一个魅力。

[此处](http://blogs.msdn.com/b/marcinon/archive/2010/01/14/building-custom-linq-expressions-made-easy-with-dynamicqueryable_2e00_.aspx)还附有附加信息。

有了这个，您可以执行以下操作：

```
var query = Northwind.Products.Where("CategoryID=2 And UnitPrice>3"); 
```

# javascript - 如何运行单个 Testacular 单元测试？

> ID：14219705
> 
> 赞同：2
> 
> 时间：2013-01-08T16:34:34.993
> 
> 标签：javascript, jasmine, karma-runner

[这篇文章](https://stackoverflow.com/questions/13913684/how-to-run-a-single-e2e-test-with-testacular)询问如何运行单个 E2E 测试但没有接受的答案。在那里，作者提到他可以通过将光标保持在他想要运行的测试顶部来运行单个单元测试，但这对我来说不起作用，而且由于进行了检测，所以没有太大意义当文件发生更改时（检测使用修改日期而不是内容）。

我对一个类进行了很多测试，并且运行所有这些测试很难找出一些错误。Testacular 还有其他更好的替代方案可以手动进行交互式调试和运行测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:18:42.190

我发现通过在测试按我想要的方式工作之前添加一个“i”，但调试问题仍然存在。在[Joseph Eames](https://stackoverflow.com/users/165048/joseph-eames)回答的[这个](https://stackoverflow.com/questions/14412437/how-do-i-debug-a-jasmine-spec-run-with-testacular)问题中，很多问题都得到了解答，我将检查有关调试和其他测试运行器的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T12:52:33.657

我已经写了我对这个相关问题的方法：

[https://stackoverflow.com/a/33302720/501870](https://stackoverflow.com/a/33302720/501870)

简短的回答是我使用 Karma 和这个插件，它可以让你直接从浏览器运行单个 Jasmine 测试：

[https://www.npmjs.com/package/karma-jasmine-html-reporter](https://www.npmjs.com/package/karma-jasmine-html-reporter)

然后，您可以使用浏览器的开发人员工具设置断点、评估表达式等。

# ios - 在 iOS 6 中使用 SLRequest 发布到 Facebook

> ID：14219706
> 
> 赞同：3
> 
> 时间：2013-01-08T16:34:36.660
> 
> 标签：ios, facebook, social-framework

试图让我的应用使用 SLRequest 向 Facebook 发布一个简单的帖子，但遇到了问题。权限被授予很好，它只是不会发布。

```
-(void)requestPermissions
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    __block ACAccount *facebookAccount = nil;

    ACAccountType *facebookAccountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    // Specify App ID and permissions
    NSDictionary *options = @{
ACFacebookAppIdKey: @"MYAPPID",
ACFacebookPermissionsKey: @[@"email", @"user_about_me", @"user_likes"],
ACFacebookAudienceKey: ACFacebookAudienceFriends
    };

    [accountStore requestAccessToAccountsWithType:facebookAccountType
                                          options:options completion:^(BOOL granted, NSError *e)
     {
         if (granted) {

             NSDictionary *options2 = @{
         ACFacebookAppIdKey: @"MYAPPID",
         ACFacebookPermissionsKey: @[@"publish_stream", @"publish_actions"],
         ACFacebookAudienceKey: ACFacebookAudienceFriends
             };
             [accountStore requestAccessToAccountsWithType:facebookAccountType options:options2 completion:^(BOOL granted, NSError *error) {
                 if (granted) {
                     NSArray *accounts = [accountStore accountsWithAccountType:facebookAccountType];

                     facebookAccount = [accounts lastObject];                 }
                 else {
                     NSLog(@"Access denied 2");
                     NSLog(@"%@", [error description]);
                 }
             }];
         } else {
             NSLog(@"Error: %@", [e description]);
             NSLog(@"Access denied");
         }
     }];

    NSDictionary *parameters = @{@"message": @"This is a test"};

    NSURL *feedURL = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];

    SLRequest *feedRequest = [SLRequest
                              requestForServiceType:SLServiceTypeFacebook
                              requestMethod:SLRequestMethodPOST
                              URL:feedURL
                              parameters:parameters];
    NSLog(@"AnythingHere?");
    feedRequest.account = facebookAccount;

    [feedRequest performRequestWithHandler:^(NSData *responseData,
                                             NSHTTPURLResponse *urlResponse, NSError *error)
     {
         // Handle response
         NSLog(@"%@%@%@", error, responseData, urlResponse);
     }];
} 
```

日志中的错误在最后部分返回 null。对此有什么想法吗？

更新：所以问题是 HTTP 响应返回 400。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T10:22:11.053

也许有点晚了......但是，看起来您必须将 feedRequest 放入您请求发布权限的块中。像这样的东西：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    __block ACAccount *facebookAccount = nil;

    ACAccountType *facebookAccountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    // Specify App ID and permissions
    NSDictionary *options = @{
                              ACFacebookAppIdKey: @"yourAppId",

                              ACFacebookPermissionsKey: @[@"email"]
                              ACFacebookAudienceKey: ACFacebookAudienceEveryone
                              }; // basic read permissions

    [accountStore requestAccessToAccountsWithType:facebookAccountType
                                          options:options completion:^(BOOL granted, NSError *e)
     {
         if (granted) {
             // Now that you have publish permissions execute the request 
             NSDictionary *options2 = @{
                                        ACFacebookAppIdKey: @"yourAppId",
                                        ACFacebookPermissionsKey: @[@"publish_stream", @"publish_actions"],
                                        ACFacebookAudienceKey: ACFacebookAudienceFriends
                                        };
             [accountStore requestAccessToAccountsWithType:facebookAccountType options:options2 completion:^(BOOL granted, NSError *error) {
                 if (granted) {
                     NSArray *accounts = [accountStore accountsWithAccountType:facebookAccountType];

                     facebookAccount = [accounts lastObject];

                     NSDictionary *parameters = @{@"message": @"This is a test"};

                     NSURL *feedURL = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];

                     SLRequest *feedRequest = [SLRequest
                                               requestForServiceType:SLServiceTypeFacebook
                                               requestMethod:SLRequestMethodPOST
                                               URL:feedURL
                                               parameters:parameters];
                     NSLog(@"AnythingHere?");

                     [feedRequest setAccount:facebookAccount];

                     [feedRequest performRequestWithHandler:^(NSData *responseData,
                                                              NSHTTPURLResponse *urlResponse, NSError *error)
                      {
                          // Handle response
                          NSLog(@"%@%@", error,urlResponse);

                          NSDictionary *response = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:nil];

                          NSLog(@"Facebook Response : %@",response);

                      }];

                 }
                 else {
                     NSLog(@"Access denied 2");
                     NSLog(@"%@", [error description]);
                 }
             }];
         } else {
             NSLog(@"Error: %@", [e description]);
             NSLog(@"Access denied");
         }
     }]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:15:45.567

您应该犯了复制/粘贴错误。

选项已经实例化了两次以及`requestAccessToAccountsWithType`您联锁的两种方法。

这看起来非常频繁且不太可能：

```
NSDictionary *options = @{...};
[accountStore requestAccessToAccountsWithType:facebookAccountType options:options completion:^(BOOL granted, NSError *e) {
    if (granted) {
         NSDictionary *options2 = @{...};
         [accountStore requestAccessToAccountsWithType:facebookAccountType options:options2 completion:^(BOOL granted, NSError *error) {
             if (granted)
                 ...
             else
                ...
        }];
    } else {
        ...
    }
}]; 
```

你应该从头再来[。](https://stackoverflow.com/q/12757449/1515819)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-04T13:42:54.383

斯威夫特 3

```
let account = ACAccountStore()
let accountType = account.accountType(withAccountTypeIdentifier: ACAccountTypeIdentifierFacebook)
let options: [AnyHashable : Any] = [ACFacebookAppIdKey: "Your App ID on FB", ACFacebookPermissionsKey: ["publish_stream", "publish_actions"], ACFacebookAudienceKey: ACFacebookAudienceEveryone]

account.requestAccessToAccounts(with: accountType, options: options) { (success, error)  in
  if success {
    if let accounts = account.accounts(with: accountType) {
      if accounts.isEmpty {
        print("No facebook account found, please add your facebook account in phone settings")
      } else {
        let facebookAccount = accounts.first as! ACAccount

        let message = ["status": "My first Facebook posting "]
        let requestURL = URL(string: "https://graph.facebook.com/me/feed")

        let postRequest = SLRequest(forServiceType: SLServiceTypeFacebook,
                                    requestMethod: SLRequestMethod.POST,
                                    url: requestURL,
                                    parameters: message)
        postRequest?.account = facebookAccount

        postRequest?.perform(handler: {(_, urlResponse,
          error) in

          if let err = error {
            print("Error : \(err.localizedDescription)")
          }
          print("Facebook HTTP response \(String(describing: urlResponse?.statusCode))")
        })
      }
    }
  } else {
    print("Facebook account error: \(String(describing: error))")
  }
} 
```

# python - tkFileDialog.askopenfilename 在文件名上添加垃圾

> ID：14219707
> 
> 赞同：1
> 
> 时间：2013-01-08T16:34:37.500
> 
> 标签：python, windows

我有以下代码：

```
csv_path = tkFileDialog.askdirectory(title="Select csv directory",initialdir=default_initial_dir)
print csv_path 
```

我在不同的计算机上有以下行为：

在一台计算机上，使用 Python 2.7.3 和 Windows XP 32 位，我得到以下输出，选择 2 个文件：

*   {C:/Temp/MMA/Run_A1/V4.0/Geoflow-2b_Run1a_DOY353_aa1hfaa_csv/MMA_OPS_1039899108851.csv}
*   {C:/Temp/MMA/Run_A1/V4.0/Geoflow-2b_Run1a_DOY353_aa1hfaa_csv/MMA_OPS_1039899108852.csv}

在另一台装有 Windows 7 64 位和 Python 2.7.2 的计算机上，我得到以下信息：

*   C:/Temp/MMA/Run_A1/V4.0/Geoflow-2b_Run1a_DOY353_aa1hfaa_csv/MMA_OPS_1039899108851.csv
*   C:/Temp/MMA/Run_A1/V4.0/Geoflow-2b_Run1a_DOY353_aa1hfaa_csv/MMA_OPS_1039899108852.csv

如您所见，在 XP 机器上，我在字符串上多了一个 {}，例如，如果我在该机器上运行以下代码

```
csv_path = tkFileDialog.askdirectory(title="Select csv directory",initialdir=default_initial_dir).split()
for f in csv_list:
    file = open(f,'r')
    calculate_column_numbers(file)
    process_tm_file(file)
    log("%s\r" % (str(i)+' of '+str(len(csv_list))),False)
    file.close() 
```

我会收到以下错误：

```
IOError: [Errno 22] invalid mode ('r') or filename: u'{C:/Temp/MMA/Run_A1/V4.0/Geoflow-2b_Run1a_DOY353_aa1hfaa_csv/MMA_OPS_1039899108851.csv}' 
```

由于 askdirectory 方法向我添加了额外的 {}

为什么我会得到那个 {}？

# ios - iOS UI 自动化：在测试执行期间从测试中切换网络设置

> ID：14219708
> 
> 赞同：0
> 
> 时间：2013-01-08T16:34:43.663
> 
> 标签：ios, networking, automation, disconnect

我需要测试在测试流程的各个点断开网络时出现的各种警报。所以我需要断开 iPad/模拟器与网络的连接。有什么方法可以在测试执行期间从测试中切换网络设置？

我搜索并发现这是不可能的：[是否可以在 iOS 模拟器中禁用网络？](https://stackoverflow.com/questions/4808433/is-it-possible-to-disable-the-network-in-ios-simulator) 但是，这里的反应很旧，想知道我们现在有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:05:15.350

使用函数你可以在你的计算机`performTaskWithPathArgumentsTimeout`上`UIAHost`运行任何程序（如果你知道绝对路径）。

如果您可以编写一个程序或脚本（例如使用 osascript）来关闭您的互联网连接，那么这是可能的。

我实际上是在使用此功能在模拟器中打开一个网页，该网页重定向到我的应用程序处理的链接，从而测试从浏览器打开应用程序时的行为。

# java - 将 SwingWorker 的泛型类型设置为 void？

> ID：14219710
> 
> 赞同：8
> 
> 时间：2013-01-08T16:34:46.237
> 
> 标签：java, swing, generics, void, swingworker

> **可能重复：**
> [java.lang.Void 和 void 有什么区别？](https://stackoverflow.com/questions/10839042/what-is-the-difference-between-java-lang-void-and-void)

我想为`SwingWorker`最终和中间结果类型创建一个具体的类`void`。我写了以下代码：

```
class AnswerWorker extends SwingWorker<void, void> {
    protected void doInBackGround() {
        System.out.println("what is your problem!!");
    }
} 
```

这给了我以下错误：

```
Multiple markers at this line-
    Syntax error on token "void", Dimensions expected after this token.
    Syntax error on token "void", Dimensions expected after this token. 
```

然而，当我将代码从 更改`void`为`Void`（即 small`v`更改为 capital `V`）时，它工作得很好，尽管我仍然被迫`return null;`在方法结束时这样做`doInBackground()`。

为什么是这样？我知道`Void`是`java.lang`包中的一个类，但文档并没有说明太多（至少不是我可以遵循的：p）

提前谢谢！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T17:02:41.853

`class AnswerWorker extends SwingWorker<Void, Void>`
应该做的伎俩。那是因为泛型总是需要对象作为参数。他们也不能采用原语。[Void](http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html)就像一个包装器来摆脱这个问题。

现在你仍然需要返回一些东西的原因：
正如文档所说，`Void`仍然是一个类。所以你仍然需要返回一个对象。由于无法实例化，因此只有返回的可能性`null`。所以`Void`并不完全像`void`关键字。仍然需要返回对对象的引用（在这种情况下为空引用）。

有一件重要的事情：**泛型迫使你使用对象。** `void`和原始类型一样，不是对象。这就是 Java 的纯 oop 特性；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T17:18:45.690

早在泛型之前就引入了该类`java.lang.Void`，作为放置常量的地方`Void.TYPE`，该`Class`对象表示`void`类型，并由`java.lang.reflect.Method.getReturnType()`for`void`方法返回（类似于表示 , , ... 的 ,`Integer.TYPE`等）。`Character.TYPE``int``char`

该类`Void`无法实例化（因此您可以分配给类型变量的唯一有效值`Void`是`null`），但自从引入泛型以来，它已被选为一个有用的标记，用于语法需要类名的情况但你真的不想使用一个。

# .net - .net 4 和实体框架 5.0

> ID：14219714
> 
> 赞同：2
> 
> 时间：2013-01-08T16:35:00.817
> 
> 标签：.net, entity-framework, entity-framework-4, entity-framework-5

我在 .net 4 中使用 Entity Framework 4.0。目前计划升级到 Entity Framework 5.0。就谷歌搜索而言，我可以看到实体框架 5.0 的 .net 4.0 仅支持非常少的功能。

我对升级到 EF5.0 的期望是实现运行时性能改进。在 .net 4\. 中升级到 EF5.0 时，我会实现这些改进吗？

我将在不久的将来开始使用 .net 4.5 框架。那么，我现在是否值得现在在 .net 4 中升级到 EF5.0/在迁移到 .net 4.5 时会顺理成章吗？还是在迁移到 .net 4.5 时升级到 EF5.0 更好？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:40:00.390

如果您使用的是 EF 4.0，并且`ObjectContext`只有在升级到 .NET 4.5 时才能获得任何好处。EF 4.1 - EF 4.4（.NET 4.0 的 EF 5.0）主要是关于新的 API 和 DbContext API，所以除非你想改变 API，否则你不会有任何好处。所有性能改进都依赖于当前属于 .NET Framework 的类库，因此如果不升级到 .NET 4.5，您将无法获得这些改进。这将随着 EF 6 改变（它将是所有 EF 库发布的第一个版本）。

# php - 使用 PHP 将 PNG 转换为 JPEG

> ID：14219719
> 
> 赞同：0
> 
> 时间：2013-01-08T16:35:12.067
> 
> 标签：php

我有一个网站，用户上传了一堆高质量的 PNG 文件。我想使用 PHP 将它们转换为 JPEG 并重新调整它们的大小以使它们的文件大小更小。

他们上传文件时我该怎么做？这样做的过程是什么？是创建了新图像还是对其进行了编辑？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:40:09.750

你可以使用这样的东西：

```
function pngTojpg($pngImage, $outputPngFile, $outputJpgFile, $quality) {
    $image = imagecreatefrompng($pngImage);

    //Save the png image
    imagepng($image, $outputPngFile);         

    //Save the jpeg image
    imagejpeg($image, $outputJpgFile, $quality);

    // Free up memory
    imagedestroy($image);
} 
```

“质量是可选的，范围从 0（最差质量，较小文件）到 100（最佳质量，最大文件）。默认为默认 IJG 质量值（约 75）”

php 文档：[imagejpeg](http://php.net/manual/en/function.imagejpeg.php)，[imagecreatefrompng](http://php.net/manual/en/function.imagecreatefrompng.php)

这些函数来自 GD 库，这里是安装说明：[Php GD](http://php.net/manual/en/image.installation.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:38:23.427

使用 ImageMagick 进行各种转换。您应该能够在此链接中找到示例：

*   [http://www.php.net/manual/en/book.imagick.php](http://www.php.net/manual/en/book.imagick.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:38:49.373

试试 ImageMagick： [http ://www.imagemagick.org/script/convert.php](http://www.imagemagick.org/script/convert.php)

我想，这就是你要找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T16:39:00.823

好吧，你可以使用简单的 php 代码来做到这一点，但我使用并推荐这个库来处理图像：

Verot - 类上传[http://www.verot.net/php_class_upload.htm](http://www.verot.net/php_class_upload.htm)

您可以将图像转换为其他格式、缩小尺寸、转换和做很多其他事情。

# c++ - remove_if 中的否定谓词

> ID：14219724
> 
> 赞同：1
> 
> 时间：2013-01-08T16:35:21.840
> 
> 标签：c++, algorithm, stl

我尝试使用 vector::erase 和 std::remove_if 从向量中删除对象。我有一个外部命名空间，可以进行选择：

```
template<unsigned int value, someType collection>
bool Namespace::isValid(const Foo* object){

   do something
} 
```

现在我有一个向量，其中包含一些我想要过滤的元素，如果它们是有效的。为了做到这一点，我这样做：

```
 std::vector<foo*> myVector;
 //fill it
 myVector.erase( std::remove_if(myVector.begin(), myVector.end(), Namespace::isValid<myValue, myCollectionType>), myVector.end()); 
```

现在这工作正常并删除了所有有效的候选人，但实际上我想保留并删除所有其他人。因此，我需要否定谓词。有什么办法吗？不幸的是，目前在这种情况下不支持 C++11。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:45:15.380

使用[`std::not1`](http://en.cppreference.com/w/cpp/utility/functional/not1)适配器来否定函数返回的值`isValid`。请注意，它`std::not1`需要一个函数*对象*（C++ 将其称为“函子”），因此如果您在名称空间中有一个普通函数，您还需要[`std::ptr_fun`](http://en.cppreference.com/w/cpp/utility/functional/ptr_fun)从您的函数中创建一个函数对象。

所以，

```
myVector.erase( std::remove_if( myVector.begin(),
                                myVector.end(),
                                Namespace::isValid<myValue, myCollectionType> ),
                myVector.end() ); 
```

变成

```
myVector.erase( std::remove_if( myVector.begin(),
                                myVector.end(),
                                std::not1( std::ptr_fun( Namespace::isValid<myValue, myCollectionType> ) ) ),
                myVector.end() ); 
```

# join - 简单的左连接？

> ID：14219726
> 
> 赞同：0
> 
> 时间：2013-01-08T16:35:30.623
> 
> 标签：join, left-join, cross-reference

我有 3 张表，其中包含每栋建筑物过去 5 年的几笔交易。这些表位于建筑物级别，并且每个建筑物都有一个唯一的 building_code，也可用作键。

这些表是费用、收入和资产负债表。这些表还链接到额外的外键fund_code、function_code、object_code、receipt_code。三者之间是多对多的关系。表格设计示例如下。

```
**Sample data**
Revenue_table:  
building_code - 1234, 1234, 1235   
function_code – 01, 02, 02  
fund_code - 001, 001, 002   
receipt_code – 11, 11, 12

Expense_table:  
building_code - 1234, 1234, 1334  
function_code – 01, 02, 02  
fund_code - 001, 001, 002   
object_code – 111, 111, 112  
receipt_code – 11, 11, 12

Balance_table:  
building_code - 1234, 1234, 1240  
fund_code - 001, 001, 005  
revenue – 2345.00, 456.00, 765.00

**Expected results:**  
building_code - 1234, 1234, 1240, 1235, 1334  
fund_code – 001, 001, 002, 005, 002  
function_code  - 01, 02, null, 02, 02  
receipt_code – 11, 11, null, null, 12  
object_code – 111, 111, null, null, 112  
revenue – 2345.00, 456.00, 765.00, null, null 
```

我想将所有三个表合并在一起，保留所有事务，同时加入三个表之间每年匹配的事务，并保留每年不匹配的事务。

# java - cometd 客户端连接到多个服务器

> ID：14219735
> 
> 赞同：1
> 
> 时间：2013-01-08T16:35:59.923
> 
> 标签：java, dojo, cometd

我们正在使用dojo 1.7.2 和cometd 2.5 开发一个应用程序。我们想让客户端连接到两台服务器（不是同时）。客户端必须连接到第一台服务器来执行一些业务逻辑，并且根据逻辑的成功，它必须连接到第二台服务器。

现在我可以连接到一台服务器，但我不知道如何连接到第二台服务器。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:23:11.463

如果你想用 CometD 连接到多个服务器，你需要实例化多个 JavaScript CometD 对象。

通常，您会默认实例化一个，以函数的形式`dojox.cometd`或作为参数传递给`require()`函数。

要创建多个对象，[请遵循文档](http://docs.cometd.org/reference/#javascript_configure_multiple_objects)。

# java - 使用 NetBeans GUI builder 使用 Java MVC 方法进行编程

> ID：14219737
> 
> 赞同：1
> 
> 时间：2013-01-08T16:36:06.117
> 
> 标签：java, swing, model-view-controller, netbeans

我的任务是制作一个 GUI，它基本上需要一些用户输入，并在运行程序的机器可以访问的各种驱动器上进行一些文件夹/文件操作。在设计这个 GUI 时，我开始意识到 MVC 将使我的生活和其他决定修改代码的人变得更轻松，但我真的不知道如何通过 NetBeans 来完成。

我已经阅读了有关此主题的一些内容，但对于这是否可以在 NetBeans 上完成，我真的看不到任何明确的答案。如果我以编程方式构建 GUI，当然可以做到这一点，但这在某种程度上违背了我选择使用 NetBeans 的目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:23:36.423

Netbeans 可以做到这一点。

要意识到的关键是，虽然所有基本的 Swing 组件都是 MVC，但在大多数情况下，您不会以这种方式与它们交互。一个简单的文本字段具有它的内部模型，但该模型不是您的模型，文本字段更像是一个原始模型。

您的模型处理更高级别的事件（按钮操作等），而不是按钮按下、箭头移动和鼠标点击。

因此，对于高级 MVC，主要的通信机制是通过 PropertyChangeListeners。构建应用程序的基本任务是将各种数据元素的 PCL 及其 GUI 组件连接在一起。

例如，一个简单的案例是您有一个项目列表。该列表通过 JTable 呈现在屏幕上，并且该表位于 JPanel 上。

您的列表有它自己的模型，即它不仅仅是一个Java 列表。它不是一个列表，因为标准 Java 列表不支持 PCL 通知。但是您的模型显然会包装这样的列表。

现在，下一个问题是如何连接 JTable 以与您的 List 模型相关联。

一，您可以继承 JTable 并将其绑定到您的模型。或者，更简单地说，您将 JTable 用作原语，并让封闭的 JPanel 管理您的模型和 JTable 之间的交互。

这意味着让您的 JPanel 实现 PropertyChangeListener，然后，在连接所有内容时，您可以执行以下操作：

```
ListModel myModel = new ListModel();
ListPanel myPanel = new ListPanel();
myModel.addPropertyChangeListener(myPanel); 
```

现在，每当您的 ListModel 发生更改时，都会通知 ListPanel。

在您的 ListPanel 上，您可以使用以下内容：

```
@Override
public void propertyChange(PropertyChangeEvent evt) {
    if (evt.getPropertyName().equals(ListModel.CHANGED)) {
        ListModel model = (ListModel) evt.getSource();
        DefaultTableModel tm = (DefaultTableModel) listTable.getModel();
        tm.setRowCount(0);
        for (String s : model.getList()) {
            tm.addRow(new Object[]{s});
        }
    }
} 
```

现在，您可以看到这只是重新加载整个表模型，但您可以根据需要对属性进行细粒度更改。您还可以看到，如果这是其他模型（例如 Person 或其他模型），您可以在面板上填充单个文本字段等。

这是一个非常简单的 GUI，但它显示了所有这些连接在一起的基本原理。我认为这在 Swing 示例中丢失了一些，这些示例非常适合一个面板屏幕，但当您开始添加其他视图时根本不会缩放。

你的 JPanel 基本上变成了组合的 VC，随着你的 GUI 变得复杂，你可以把这些东西排除在外，但它对于合理数量的屏幕等来说效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:47:38.690

Netbeans 可以通过两种方式帮助您利用其代码库：GUI Builder (1) 和 NB Platform (2)。

(1) Netbeans 曾经是 Java 世界中更好的拖放式 GUI 构建器之一，代号为[Matisse](http://netbeans.org/features/java/swing.html)。

也就是说，我已经很长时间没有使用它了——而且我从来没有真正喜欢过生成的代码，它不是很容易理解（这当然不是自动生成代码的目的）。对于更复杂的 UI，我们手动编写了布局，而且工作还算可以接受，即使不是最令人愉快的。对于简单的 UI，我会再次尝试 GUI Builder，对于具有大量有线逻辑的复杂 UI，我可能仍然会手动编写它。

要了解 GUI Builder 的工作原理，请观看众多教程视频之一，例如：

*   [NetBeans GUI 构建器：添加组件](https://www.youtube.com/watch?v=mziXnCv1Z00)

(2) Netbeans Platform之于Netbeans，RCP之于Eclipse。为 IDE 开发的一组丰富的组件，可以重用。我简要研究了[NB 平台](http://netbeans.org/features/platform/showcase.html)，如果项目没有改变方向，我们会使用它。也许这个 SO 问题可以更清楚地说明这一点：[使用哪个富客户端平台？](https://stackoverflow.com/questions/579109/which-rich-client-platform-to-use).

* * *

关于MVC。有 JSR 296，一个通用的 Swing 应用程序框架，看起来很有希望，但[在 2011 年被撤回](http://jcp.org/en/jsr/detail?id=296)。这并没有阻止人们对它进行分叉并对其进行工作，正如这个项目所示：[更好的 Swing 应用程序框架](http://kenai.com/projects/bsaf/pages/Home)，于 2012 年年中发布。即使你不使用这样的框架，**也请不要将所有代码放在一个类中**（正如您在评论中提到的那样），但创建一个简单的模型/控制器并将 UI 组件分开。对于一个简单的应用程序来说，它不需要花哨，最小的 MVC-ish[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)可能就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:36:28.807

我也遇到了这个问题，我找到了一个链接，它提供了一个很好的例子，如何使用 NetBeans GUI 构建器将控制器与视图分离。

这是[链接](https://web.archive.org/web/20131228060247/http://www.cs.wcupa.edu/~rkline/java/mvc-example.html)。

# c# - 使用生成的方法

> ID：14219743
> 
> 赞同：0
> 
> 时间：2013-01-08T16:36:16.317
> 
> 标签：c#, entity-framework, entity-framework-4

我有一个用于 C# 和 VS2010 的数据库的 EF 实体模型。该模型有一个名为 的实体`tblPendingMessages`，我用它来创建由我的 SQL Server 代理定期发送的消息。这很简单。

EF 似乎已经生成了一个`tblPendingMessages`名为`CreatetblPendingMessage`. 该方法看起来非常适合添加新的待处理消息，但它的参数包括主键，它是一个标识列。通常，我会使用`null`，但 Intellisense 不允许它，它想要一个`int`...

我该怎么做呢？

- - - - 编辑

我做了更多的研究。EF 似乎不是很受欢迎，但由于我才刚刚起步，似乎与最新的浪潮一起走是有道理的。

无论如何，'CreatetblPendingMessage' 方法是一个工厂方法，用于创建单个 'tblPendingMessage' “row” 实例。新的“行”仍然必须添加到 tblPendingMessages 对象，然后保存更改。我找到了一些代码示例，这就是我最终要做的事情（请客气，我仍然是 ac# newby ....）：

```
 private void NotifyWorkbookError(List<string> MsgLst)
    {            
        string msgs = string.Join(@"<br />",MsgLst.Select(i=>i.ToArray()));
        string finalHTML = GetHTML(3).Replace("#WBMessage#",msgs);
        using (CPASEntities ctx=new CPASEntities())
        {
            tblPendingMessage m = new tblPendingMessage 
            {   
                Recipient=@"jamesshaffer@n.com",
                MessageBody=finalHTML,
                MessageGenerated=DateTime.Now,
                MessageFormat="HTML",
                MessageCC=@"CPAS_TIMESHEET_AUDITOR@N.COM"
            };
            ctx.tblPendingMessages.AddObject(m);
            ctx.SaveChanges();
        }
    }
    private string GetHTML(int MessageID)
    {
        string htMsg;
        using (CPASEntities ctx = new CPASEntities())
        {
            tblHTML h = (from ht in ctx.tblHTMLs
                         where ht.HTMLID == MessageID
                         select ht).FirstOrDefault();
            htMsg = h.HTMLCode;
        }
        htMsg = htMsg.Replace("#ID#", TimesheetID.ToString());
        htMsg = htMsg.Replace("#VendorName#", VendorFullName);
        htMsg = htMsg.Replace("#WeekStart#", WeekStartDate.ToShortDateString());
        htMsg = htMsg.Replace("#SubmittedBy#", Creator);
        htMsg = htMsg.Replace("#SubmittedOnDate#", DateTime.Parse(CreateDate).ToShortDateString());
        htMsg = htMsg.Replace("#ModifiedBy#", Modifier);
        htMsg = htMsg.Replace("#ModifiedOnDate#", DateTime.Parse(ModDate).ToShortDateString());
        htMsg = htMsg.Replace("#WorkbookStatus#", CurrentStatus);
        htMsg = htMsg.Replace("#NewWorkbookStatus#", CurrentStatus);
        htMsg = htMsg.Replace("#AbsoluteURL#", link);
        return htMsg;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:48:38.500

您可以传递`-1`或`0`作为实体的主键值`tblPendingMessages`（实体不会提交到数据库 - 它将在内存中创建）。您还可以创建自己的更方便的方法，该方法将使用默认主键值，因为实体是在部分类中声明的：

```
public partial class tblPendingMessages
{
    public static tblPendingMessages CreatetblPendingMessage(string foo, int bar)
    {
        return CreatetblPendingMessage(-1, foo, bar);
    }
} 
```

# java - 创建 Java 应用程序，但每当我在 Eclipse 上运行时，它都会减慢我的系统。为什么？

> ID：14219744
> 
> 赞同：-2
> 
> 时间：2013-01-08T16:36:18.267
> 
> 标签：java, eclipse

我正在使用核心 Java 语言创建应用程序。我几乎完成了，但我注意到每当我在 Eclipse 中运行此应用程序 3-4 次后运行。我的系统变得太慢了我也在其他系统中尝试过。这个应用程序也会影响那些系统。请给我一些建议我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:40:34.537

这可能意味着您的应用程序不会终止。`Debug`检查 Eclipse 当前在透视图中运行了多少进程。当您的应用程序结束时，您将`<terminated>`在“调试”视图中看到前面的进程条目。

如果您的应用程序仍在运行，Eclipse 将启动一个新进程，但正在运行的应用程序将占用 CPU 和内存。如果您的计算机开始交换，它将变得（非常）慢。

此外，您可能给 Eclipse 提供了太多内存。与您的操作系统的任务管理器检查您有多少内存以及 Eclipse 使用了多少。

# java - servlet会话，注销后，当按下浏览器的后退按钮时，再次显示安全页面

> ID：14219749
> 
> 赞同：6
> 
> 时间：2013-01-08T16:36:41.153
> 
> 标签：java, servlets, servlet-filters, servlet-3.0, servlet-listeners

我有一个 servlet 和一个 HTML 页面。如何防止用户在注销后点击浏览器的后退按钮？我在 stackoverflow 中阅读了相同的问题，但答案是使用 java 脚本禁用浏览器历史记录或使用页面 - http 标头中没有缓存。我们如何使用防止返回操作的 servlet 来实现它，http-header no cache 是无用的，因为 Firefox 表示当再次刷新两次安全页面时页面已过期。

我以某种方式完成了示例方法，只是为了尝试（不是真实的）我的用户名和密码从 HTML 页面发布到 servlet，如果密码和用户名正确，则 servlet 将其存储在会话中。当再次请求安全页面时，如果会话存在，则显示安全页面，并且用户从会话中注销登录页面显示所有正在工作，除非用户点击浏览器的后退按钮注销失败。

**我们如何防止安全 servlet 在注销后显示内容，然后在浏览器中按下返回按钮？**

Welcome.html 的源代码

```
<html>
<body>

<form method="POST" action="Sessionexample">
<div align="center">
<table border="1"   style="border-collapse: collapse">
    <tr>
        <td>Username</td>
        <td><input type="text" name="username" size="20"></td>
    </tr>
    <tr>
        <td>Password</td>
        <td><input type="text" name="password" size="20"></td>
    </tr>
    <tr>
        <td height="24">&nbsp;</td>
        <td height="24">&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><input type="submit" value="Submit" name="B1"></td>
    </tr>
</table>
</div>
</form>
</body>
</html> 
```

servlet 的 src

```
public class Sessionexample extends HttpServlet implements Servlet , Filter {
    private static final long serialVersionUID = 1L;
    public String username =null, password=null;
    public HttpSession session ;
    public PrintWriter pw;
    int do_get =0 ;
    /**
     * Default constructor. 
     */

    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;

        HttpSession session = request.getSession(false);         
        if (session == null || session.getAttribute("username") == null) {
            response.sendRedirect("welcome.html"); // No logged-in user found, so redirect to login page.
            response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
            response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
            response.setDateHeader("Expires", 0);
        } else {
            chain.doFilter(req, res);  
        }
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {

        do_get=1;
        pw = response.getWriter();
        session=request.getSession(false);
        try
        {
            if(request.getParameter("action")!=null)
            {
                if(request.getParameter("action").equals("logout"))
                {

                    session = request.getSession(true);
                    session.setAttribute("username", "");
                    session.setAttribute("password", "");
                    session.invalidate();
                     response.sendRedirect("welcome.html");
                    return; 
                }
            }
            else
            if(session !=null)
                {
                 if( (String)session.getAttribute(username)!=null)
                username = (String)session.getAttribute("username").toString();
                if( (String)session.getAttribute("password") !=null)
                 password =session.getAttribute("password").toString();
                pw.write("not new-");
                serviced(request,response);
                }

        }
        catch(Exception ex)
        {
            pw.write("Error-"+ex.getMessage());
        } 

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {

        if(request.getParameter("username")!=null && request.getParameter("password")!=null )
        {
             username = request.getParameter("username").toString();
             password =  request.getParameter("password").toString(); 
        } 

        serviced(request,response);

    }

    protected void serviced(HttpServletRequest request, HttpServletResponse response) throws IOException
    {

            response.setContentType("text/html");

            pw = response.getWriter();  
        if( username !=null && password !=null)
            if( username.equals("admin") && password.equals("a"))
            {

                try
                {

                    if(do_get==0)
                    {
                session = request.getSession(true);
                session.setAttribute("username", "admin");
                session.setAttribute("password", "a");
                    }               
                pw.write("You are logged in : "+username+"  <br/> "+"<a href='?action=logout'><h1>   Logout </h1> </a>");

                }
                catch(Exception ex)
                {
                                        response.sendRedirect("welcome.html");

                }

            }
            else
            {
            response.sendRedirect("welcome.html");
            }
            else
                response.sendRedirect("welcome.html");
    }

    @Override
    public boolean accept(Object arg0) throws IOException {
        // TODO Auto-generated method stub
        return false;
    }       

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T15:32:55.803

您的过滤器仅在受限页面上设置无缓存标题`welcome.html`，而不是在受限页面上。因此，每当浏览器通过后退按钮请求任何这些受限页面时，它都可能会显示缓存版本。您的过滤器需要在所有受限页面上设置无缓存标头。

所以，你需要改变

```
 if (session == null || session.getAttribute("username") == null) {
        response.sendRedirect("welcome.html"); // No logged-in user found, so redirect to login page.
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        response.setDateHeader("Expires", 0);
    } else {
        chain.doFilter(req, res);  
    } 
```

至

```
 if (session == null || session.getAttribute("username") == null) {
        response.sendRedirect("welcome.html"); // No logged-in user found, so redirect to login page.
    } else {
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        response.setDateHeader("Expires", 0);
        chain.doFilter(req, res);  
    } 
```

# jruby - 向我展示 JRuby 的配置文件的方法或类是什么？

> ID：14219750
> 
> 赞同：1
> 
> 时间：2013-01-08T16:36:42.780
> 
> 标签：jruby, configuration-files

我是 JRuby 的新手，我在 Windows 8 上安装了它，我正在关注它的 wiki。当 wiki 说要更改配置选项时，它并没有确切说明我在哪里可以找到该选项所在的文件，它只给出了它的名称而不是完整路径。他们的方法也是如此，我可以在 jirb 上运行以查找任何配置路径的路径。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:40:01.867

该`.jrubyrc`文件在您的当前目录（`user.dir`Java 属性）、您的主目录`user.home`（`HOMEDRIVE\HOMEPATH`

# java - Android：当我为 logoImage 设置 OnClickListener() 时出现错误

> ID：14219751
> 
> 赞同：-2
> 
> 时间：2013-01-08T16:36:43.680
> 
> 标签：java, android

当我在 android 上运行此应用程序时出现错误：

错误：->>“不幸的是 exampleapp 已停止”

请帮帮我..当我删除线时：

```
logoImage.setOnClickListener(this); 
```

没问题，它工作正常.. 我想我在 setOnClickListener() 上犯了一些错误。

谢谢你 ！

```
 package com.hightrax.mrgod;
    import android.os.Bundle;
    import android.app.Activity;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.ImageView;

    public class Main extends Activity implements OnClickListener
    {

    ImageView logoImage;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        logoImage = (ImageView) findViewById(R.drawable.logo);
        logoImage.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:39:23.520

`findViewById`必须有一个资源 ID 参数。你已经添加了一个可绘制的 ID。

如果您的 ImageView 的 ID 为“imageView1”，那么您应该这样做： `logoImage = (ImageView) findViewById(R.id.imageView1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:39:01.007

这：

```
logoImage = (ImageView) findViewById(R.drawable.logo); 
```

...应该是这样的：

```
logoImage = (ImageView) findViewById(R.id.logo); 
```

...这也希望您`<ImageView />`在布局 XML 中有一个 id `@+id/logo`，类似于：

```
<ImageView
    android:id="@+id/logo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
/> 
```

如果您`ImageView`没有使用 id `@+id/logo`，那么只需将`R.id.logo`上面的内容更改为您选择的任何内容。:-)

TLDR：您正在尝试根据`Drawable`. 这与您提供的标识符不同`ImageView`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:39:44.737

改变

`logoImage = (ImageView) findViewById(R.drawable.logo);`

到

`logoImage = (ImageView) findViewById(R.id.logo);`

# java - 如何使用 Java Swing 应用程序开始在 NetBeans 中运行 JavaFX 程序？

> ID：14219754
> 
> 赞同：0
> 
> 时间：2013-01-08T16:36:52.537
> 
> 标签：java, swing, netbeans, javafx

我是 Java 新手，但正在取得进步。我创建了一个 JavaFX 应用程序，当我单独“运行文件”时它运行良好。但是，如果我将它拖到 Netbeans 中与现有 Java 应用程序相同的项目（和源包）中，我将无法启动它。

网豆是 7.2.1

`AdvMedia` JavaFX 应用程序在我拥有的 JavaFx 应用程序的 main 中有一个类`launch(args)` 我添加了`System.out`代码以显示它通过`start`并且`init`确定

在 Java 程序中，我使用以下代码附加到按钮事件

```
AdvMedia am = new AdvMedia(); 
```

知道我缺少什么吗？

# jquery - 使用 jquery ajax 在 asp 中加载内容时显示加载消息

> ID：14219755
> 
> 赞同：0
> 
> 时间：2013-01-08T16:37:06.017
> 
> 标签：jquery, asp-classic, loading, message

在我的 asp 站点中，我试图在页面加载时从 Active Directory 中获取用户详细信息。我喜欢显示“loading.gif”图像，直到我得到详细信息。可以帮助我，因为我是 jquery 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:40:49.110

你可以这样做：

```
$(function(){
    $('body').addClass('loading');
    $(window).load(function(){
      $('body').removeClass('loading');
      $('#wrapper').show(); // make display:none in the css.
    });
}); 
```

如果您使用的是 ajax，那么您可以使用`.ajaxStart()`and`.ajaxComplete()`

把它放在ajax调用之前：

```
$('#yourElem').ajaxStart(function() {
   $(this).addClass('loading');
}); 
```

将其放在 ajax Call 之后：

```
$('#yourElem').ajaxComplete(function() {
   $(this).removeClass('loading');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:31:03.173

AJAX 的简单形式`.get()`应该足以满足您的需求。

首先，在您的 HTML 中添加一个占位符，其中将显示加载图像，然后当您加载内容时，将放置这些内容而不是图像。

例如：

```
<div id="ContentsPlaceholder"></div> 
```

jQuery 代码现在是：

```
$(function() {
    $("#ContentsPlaceholder").html("<img src='Loading.gif' />");
    $.get("GetData.asp", function(contents) {
        $("#ContentsPlaceholder").html(contents);
    });
}); 
```

这会将“Loading.gif”图像放在占位符中，然后从名为“GetData.asp”的页面加载数据，当数据可用时，它将放置它而不是图像。

# java - 在泛型方法中使用 instanceof

> ID：14219759
> 
> 赞同：1
> 
> 时间：2013-01-08T16:37:40.087
> 
> 标签：java, generics, instanceof

我今天开始学习泛型，但这对我来说有点奇怪：

我有一个通用方法：

```
 public<T> HashMap<String, T> getAllEntitySameType(T type) {

        System.out.println(type.getClass());
        HashMap<String, T> result = null;

        if(type instanceof Project)
        {
            System.out.println(type.toString());
            System.out.println("Yes, instance of Project;");
        }

        if(type instanceof String)
        {
            System.out.println(type.toString());
            System.out.println("Yes, instance of String;");
        }
        this.getProjects();
        return result;
    } 
```

我可以很容易地确定 T 类型的类

```
 Project<Double> project = new Project<Double>();
    company2.getAllEntitySameType(project);
    company2.getAllEntitySameType("TestString"); 
```

输出将是：

```
class Project
Yes, instance of Project;
class java.lang.String
TestString
Yes, instance of String; 
```

我认为在泛型中我们不能使用实例。据我所知，有些事情并不完整。谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T16:42:09.340

您可以使用`instanceof`检查对象的*原始类型*，例如`Project`：

```
if (type instanceof Project) 
```

`Project`或者对某种未知类型使用适当的泛型语法：

```
if (type instanceof Project<?>) 
```

但是由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，您不能像 with 那样具体化参数化[类型](http://en.wikipedia.org/wiki/Reification_%28computer_science%29)：`Project<Double>``instanceof`

```
if (type instanceof Project<Double>) //compile error 
```

正如 Peter Lawrey[指出的那样](https://stackoverflow.com/questions/14219759/usage-of-instanceof-in-a-generic-method#comment19722898_14219759)，您也无法检查类型变量：

```
if (type instanceof T) //compile error 
```

# java - 解析 html 代码或在 java 中使用正则表达式？

> ID：14219760
> 
> 赞同：2
> 
> 时间：2013-01-08T16:37:47.597
> 
> 标签：java, html, regex, parsing

我正在尝试提取这段 html 代码的值：

```
<ul id="tree-dotlrn_class_instance">
<li>
      <a href="/dotlrn/classes/c033/13000/c12c033a13000gA/">**2011-12 Ampl.Arquit.Computadors Gr.A  (13000)**</a>
<ul>
    <li>
        <a href="/dotlrn/classes/c033/13022/c12c033a13022gA/c12c033a13022gAsT00/">**2011-12 Entorns d'Usuari Gr.A  Sgr.T00 (13022)** </a>
    </li>
    <li>
      <a href="/dotlrn/classes/c033/13036/c12c033a13036gA/c12c033a13036gAsT00/">**2011-12 Eng.Serv.Telemàtics Gr.A  Sgr.T00 (13036)** </a>
    </li>
</ul>
</li>

<li>
      <a href="/dotlrn/classes/c033/13038/c12c033a13038gA/">**2011-12 Intel·lig.Artif.Enginyer.Coneixem. Gr.A  (13038)**</a>
</li>

<li>
      <a href="/dotlrn/classes/c033/13048/c12c033a13048gA/">**2011-12 Processad.Llenguatge Gr.A  (13048)**</a>
<ul>
    <li>
        <a href="/dotlrn/classes/c033/13048/c12c033a13048gA/c12c033a13048gAsL01/">**2011-12 Processad.Llenguatge Gr.A  Sgr.L01 (13048)** </a>
    </li>
    <li>
      <a href="/dotlrn/classes/c033/13048/c12c033a13048gA/c12c033a13048gAsT00/">**2011-12 Processad.Llenguatge Gr.A  Sgr.T00 (13048)** </a>
    </li>
    <li>
      <a href="/dotlrn/classes/c033/13052/c12c033a13052gA/c12c033a13052gAsL02/">**2011-12 Sist.Basats Microprocessadors Gr.A  Sgr.L02 (13052)** </a>
    </li>
</ul>
</li>

<li>
      <a href="/dotlrn/classes/c033/13055/c12c033a13055gAA/">**2011-12 Sist.Informàtics Gr.AA (13055)**</a>
</li>

<li>
      <a href="/dotlrn/classes/c033/14009/c12c033a14009gA/">**2011-12 Administrac. Gestió de Xarxes Gr.A  (14009)**</a>
</li>

<li>
      <a href="/dotlrn/classes/c033/15656/c12c033a15656gA/">**2011-12 Transmissió de Dades Gr.A**  (15656)</a>        
</li>
</ul> 
```

所有这一切都是在**强烈的黑色**（**之间）与他的href值进入一个HashMap。首先我尝试使用 jericho html 解析器，但我认为它很复杂，然后我尝试使用 Regex，但我不知道该怎么做。你能帮助我吗 ？？

谢谢！

更新：我正在尝试这个，但这不是正确的方法。

```
Source s = new Source(answer);
    List<Element> Form1 = s.getAllElements(HTMLElementName.UL);
    int tam1 = Form1.size();
        for(int j = 0; j < tam1; j++){
            Element e1 = Form1.get(j);
            if("tree-dotlrn_class_instance".equals(e1.getAttributeValue("id"))){
                List<Element> L1 = e1.getAllElements(HTMLElementName.UL);
                for (int k = 0; k < L1.size(); k++){
                    Element e2 = L1.get(k);
                    System.out.println("Elemento de la lista L1: "+e2.getContent());
                    List<Element> L2 = e2.getAllElements(HTMLElementName.LI);
                    for(int m = 0; m < L2.size(); m++){
                        Element e3 = L2.get(m);
                        System.out.println("Elemento de la lista L2: "+e3.getContent());
                        asignaturas.add(e3.getContent().toString());
                        System.out.println("Lista de asignaturas "+m+" "+asignaturas.get(0));
                    }
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:39:55.677

看看[JSoup 的选择器语法](http://jsoup.org/cookbook/extracting-data/selector-syntax)。

如果您正在寻找所有`a`具有`href`属性的元素，您可以像这样找到它们：

```
String theHtmlInYourExample = "...";
Document doc = Jsoup.parse(theHtmlInYourExample);
Elements links = doc.select("a[href]"); 
```

从那里，您应该能够提取元素的文本和`href`属性的值来创建您的`HashMap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:57:51.013

鉴于输入的 HTML 格式正确，您当然可以尝试使用[XML Pull Parsing或 DOM。](http://www.extreme.indiana.edu/xgws/xsoap/xpp/mxp1/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:54:58.547

为什么不使用 DOM API？你可以用它相当简单地获得属性和值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T16:52:57.487

正则表达式：

```
\<a\s+href\s*\=\s*["']/dotlrn/classes/c033.+\>(.*)\(\d+\)\</a\> 
```

Java字符串：

```
"\\<a\\s+href\\s*\\=\\s*[\"']/dotlrn/classes/c033.+\\>(.*)\\(\\d+\\)\\</a\\>" 
```

您可能不会发现它可靠，但如果页面与您提供的匹配，第一个匹配组将是您想要的字符串。

[这里是测试Java正则表达式的地方](http://www.regexplanet.com/advanced/java/index.html)

# c++ - std::promise 通知多个客户端

> ID：14219763
> 
> 赞同：1
> 
> 时间：2013-01-08T16:38:06.980
> 
> 标签：c++, multithreading, c++11, future

我有一个 API 必须将未来的结果（future/shared_future）返回给客户端。在某些情况下，我知道我可以多次返回“相同的未来”对象，因为我有一个关联的 std::promise 可以/应该将结果传递给多个客户端（伪代码）。

```
std::future<int> getVal()
{
   //I have a list of promises kept
   if (promiseExists)
   {
     //this throws an exception because get_future() can be called only one time, unfortunately
     return existingPromise.get_future();
   }
   ....
} 
```

问题是你不能在同一个实例上多次调用 get_future() ，或者以某种方式从同一个 Promise 中获取一个 shared_future 对象。

getVal 有一个解决方法来返回一个 shared_future （通过从 existingPromise.get_future() 构造 shared_future 获得），但在这种情况下，我必须使用 promise 对象缓存 shared_future 对象，并且只拥有一个 promise 对象会更简单以某种方式能够将未来多次返回给不同的客户。有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T17:03:33.847

不。

为什么你需要信守承诺？只有结果的提供者需要承诺，结果的所有消费者只需要（共享的）未来。

# ruby - 将图像保存在 watir-webdriver 中

> ID：14219768
> 
> 赞同：6
> 
> 时间：2013-01-08T16:38:20.950
> 
> 标签：ruby, watir, watir-webdriver

我需要将图像从 recaptcha 保存到 localhost 磁盘，我正在使用 watir-webdriver 获取图像 dom 元素，但它不支持保存方法，就像 watir 一样。那么如何将图像保存到我的磁盘？html:

```
<div id="recaptcha_image" style="width: 300px; height: 57px;">
  <img style="display:block;" alt="Проверка по слову reCAPTCHA" height="57" width="300" src="https://www.google.com/recaptcha/api/image?c=03AHJ_VusSUxF0IYURRcVTVTjJJnUk92j-hXYsuwqvu0m5tvKFzAnwvrHlz-j_Gfqg-sUrHLj3D2DrUYNNg4uvr2BNgZqlK5vpJUJVYkkWo36I4RRmRGkYZru5kBYhzPCCn49KlH6wW_iLw6vIzv7vnhpu6ndqxb-9SkIRrVYyBwN39kg18Lov7Hc">
</div> 
```

和红宝石代码：

```
cap = @browsers[i].div(:id => 'recaptcha_image').image 
```

如何将图像文件保存到磁盘？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T16:48:33.077

```
require 'watir-webdriver'    
require 'open-uri'

image_src = @browsers[i].div(:id => 'recaptcha_image').image.src

File.open("/path/", 'wb') do |f|
  f.write open(image_src).read
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:48:23.543

您可以按如下方式使用 Ruby 的[open-uri](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)：

```
require 'open-uri'

url = "the image url" #https://www.google.com/recaptcha/api/image?c=03A....

File.open("./image.jpg", "wb") do |file_write|
  open(url, 'rb') do |file_read|
    file_write.write(file_read.read)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-04T01:28:08.200

```
 require 'watir-get-image-content'
    def save_captcha(@browser)      
        img = @browser.image(xpath: '//*[@id="ctl00_captcha"]/td[2]/div[1]/span[1]/img')        
        filename = "#{@path}/tmp/current_captcha.jpg"
        File.open(filename, 'wb'){|file| file.write( img.to_jpg) }          
    end 
```

# angularjs - 在 AngularJS 指令中，如何设置父控制器的属性？

> ID：14219770
> 
> 赞同：2
> 
> 时间：2013-01-08T16:38:23.333
> 
> 标签：angularjs

这是一个 jsFiddle，它显示了我正在尝试做的事情：http: [//jsfiddle.net/P3c7c](http://jsfiddle.net/P3c7c)

我正在使用 Google Places AutoComplete 小部件来获取纬度/经度坐标，然后我希望将其用于后续搜索功能。考虑到需要向元素添加事件侦听器，似乎实现这一点的正确方法是使用指令，并使用指令的链接函数附加侦听器。但是，在这个监听器内部，我需要它来设置 SearchForm 控制器的 location 属性，它是它的父级。而且我还没有弄清楚如何建立这种联系。这是相关的代码块：

```
 /* Controllers */
    function SearchForm($scope){
        $scope.location = ''; // <-- this is the prop I wish to update from within the directive

        $scope.doSearch = function(){
            if($scope.location === ''){
                alert('Directive did not update the location property in parent controller.');
            } else {
                alert('Yay. Location: ' + $scope.location);
            }
        };
    }

    /* Directives */
    angular.module('OtdDirectives', []).
        directive('googlePlaces', function(){
            return {
                restrict:'E',
                replace:true,
                transclude:true,
                scope: {location:'=location'}, // <--prob something wrong here? i tried @/& too, no luck
                template: '<input id="google_places_ac" name="google_places_ac" type="text" class="input-block-level"/>',
                link: function($scope, elm, attrs, ctrl){
                    var autocomplete = new google.maps.places.Autocomplete($("#google_places_ac")[0], {});
                    google.maps.event.addListener(autocomplete, 'place_changed', function() {
                        var place = autocomplete.getPlace();
                        // THIS IS THE STRING I WANT TO SAVE TO THE PARENT CONTROLLER
                        var location = place.geometry.location.lat() + ',' + place.geometry.location.lng();
                        // THIS IS NOT DOING WHAT I EXPECT IT TO DO:
                        $scope.location = location;
                    });
                }
            }
        }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T17:02:39.933

两个小的更正，它应该工作：

```
<google-places location="location"></google-places> 
```

当你在指令中设置位置时，你还需要做`$scope.$apply()`

```
$scope.$apply(function() {
    $scope.location = location;
}); 
```

你必须这样做，`$apply()`因为事件发生在角度摘要循环之外，所以你必须让角度知道范围内发生了一些变化，它需要“消化”它的双向绑定和其他内部异步内容。

另外，我认为您不需要`transclude:true`.

[http://jsfiddle.net/P3c7c/1/](http://jsfiddle.net/P3c7c/1/)

# redirect - nginx负载平衡一直重定向我错误

> ID：14219773
> 
> 赞同：2
> 
> 时间：2013-01-08T16:38:43.870
> 
> 标签：redirect, url-rewriting, nginx, load-balancing

嗨，我有 nginx 服务器和其他网络服务器，我想从公共直接访问中隐藏它们。但是当我尝试在 root 上访问该服务器时，我向客户端发送重定向响应到 url，如下所示：server/test/spring/main。当我尝试从 nginx 服务器访问它时，我得到了服务器 url 重定向而不是 nginx url。

例子：

my-nginx.com my-server.com

如果我想从 nginx 服务器访问 myserver.com/test/spring/main 我想我必须访问 my-nginx.com/test/spring/main 但是当我这样做时，我会重定向到 url myserver.com ...

我的配置：

```
upstream my-server {
    server my-server.com;
}

server {
   listen 80;
   server_name my-nginx;
   location / {
       proxy_pass http://my-server/;
   }
} 
```

另一个想法是当我访问 my-server.com 上的根页面时，我将客户端重定向到“https://my-server.com/test/spring/main”。

为什么我从 my-nginx.com url 重定向到 my-server.com？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T03:36:13.040

这个配置好像问题不大，我也是用proxy_pass来访问我们生产环境中的其他域，不重定向。

您应该注意“”中的最后一个“/ `http://my-server/`”，使用“ `http://my-server`”代替，或者只使用“”而不使用`http://my-server.com`上游。

带有“/”或不带有“/”的行为略有不同。

# python - 使用 SQLAlchemy 更新 PostgreSQL 数组

> ID：14219775
> 
> 赞同：15
> 
> 时间：2013-01-08T16:38:48.593
> 
> 标签：python, postgresql, sqlalchemy

我正在尝试使用 SQLAlchemy Core 中的 SQL 语句更新 PostgreSQL 表上的整数数组。我第一次尝试使用查询生成器，但也不知道该怎么做。我相信我使用的方言 Psycopg2 可以自动将数组形成 PostgreSQL 可以接受的格式。

这是表架构：

```
CREATE TABLE surveys (
    survey_id serial PRIMARY KEY,
    question_ids_ordered INTEGER[],
    created_at TIMESTAMP NOT NULL DEFAULT now(),
); 
```

和 SQLAlchemy 语句：

```
survey_id = 46
question_ids_ordered = [237, 238, 239, 240, 241, 242, 243]

with engine.begin() as conn:
    conn.execute("""UPDATE surveys
                    SET question_ids_ordered = %s
                    WHERE survey_id = %s""",
                    question_ids_ordered, survey_id) 
```

我收到的回溯是：

```
Traceback (most recent call last):
  File "foo.py", line 16, in <module>
    res = add_question_to_group(current_user, 46, 358, question_ids_ordered, new_group_name="Jellyfish?")
  File "/vagrant/workspace/panel/panel/survey.py", line 80, in add_question_to_group
    question_ids_ordered, survey_id)
  File "/home/vagrant/.virtualenvs/project/lib/python2.6/site-packages/sqlalchemy/engine/base.py", line 664, in execute
    params)
  File "/home/vagrant/.virtualenvs/project/lib/python2.6/site-packages/sqlalchemy/engine/base.py", line 808, in _execute_text
    statement, parameters
  File "/home/vagrant/.virtualenvs/project/lib/python2.6/site-packages/sqlalchemy/engine/base.py", line 831, in _execute_context
    None, None)
  File "/home/vagrant/.virtualenvs/project/lib/python2.6/site-packages/sqlalchemy/engine/base.py", line 827, in _execute_context
    context = constructor(dialect, self, conn, *args)
  File "/home/vagrant/.virtualenvs/project/lib/python2.6/site-packages/sqlalchemy/engine/default.py", line 513, in _init_statement
    for p in parameters]
sqlalchemy.exc.StatementError: 'int' object is not iterable (original cause: TypeError: 'int' object is not iterable) 'UPDATE surveys\n                        SET question_ids_ordered = %s\n                        WHERE survey_id = %s' ([237, 238, 239, 240, 241, 242, 243], 46) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T18:33:19.197

如果你的表是这样定义的：

```
from datetime import datetime
from sqlalchemy import *
from sqlalchemy.dialects.postgresql import ARRAY

meta = MetaData()
surveys_table = Table('surveys', meta,
    Column('surveys_id', Integer, primary_key=True),
    Column('questions_ids_ordered', ARRAY(Integer)),
    Column('created_at', DateTime, nullable=False, default=datetime.utcnow)
) 
```

然后您可以通过以下方式简单地更新您的数组（与 psycopg2 一起使用）：

```
engine = create_engine('postgresql://localhost')
conn = engine.connect()
u = surveys_table.update().where(surveys_table.c.id == 46).\
     values(questions_ids_ordered=[237, 238, 239, 240, 241, 242, 243])
conn.execute(u)
conn.close() 
```

或者，如果您愿意，可以使用`text()`构造编写原始 SQL：

```
from sqlalchemy.sql import text
with engine.connect() as conn:
    u = text('UPDATE surveys SET questions_ids_ordered = :q WHERE id = :id')
    conn.execute(u, q=[237, 238, 239, 240, 241, 242, 243], id=46) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-01T21:12:13.780

在 Flask 中，您的调查表的模型将如下所示：

```
class Survey(UserMixin, db.Model):
    __tablename__ = 'surveys'
    id = db.Column(db.Integer, primary_key=True)
    question_ids_ordered = db.Column('question_ids_ordered', db.ARRAY(db.Integer)) 
```

并且您想更新*question_ids_ordered*字段，您可以像这样使用 ORM：

```
from sqlalchemy.orm.attributes import flag_modified

survery = (Survey
           .query
           .filter(Survey.id == 46)).first()

survery.question_ids_ordered.remove(237)
flag_modified(survery, "question_ids_ordered")
db.session.merge(survery)
db.session.flush()
db.session.commit() 
```

# svn - Subversion 恢复到以前的版本而不添加到头部

> ID：14219781
> 
> 赞同：0
> 
> 时间：2013-01-08T16:39:02.097
> 
> 标签：svn

我正在与多个合作者一起开展一个项目。其中一位程序员通过复制文件并粘贴来覆盖了多个文件。文件已提交。

问题是文件的注释从具有不同的注释器变为只有那个程序员。

我想恢复到他/她修改文件之前，以便注释返回。

合并不起作用，因为它添加到头部，结果会导致所有注释从那个程序员变为我。

有没有办法恢复这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:41:45.300

分支最新的 GOOD 修订版，什么都不做，用选项合并分支 `--accept 'theirs-full'`（他们的将是“来自分支”）

顺便说一句：如果您的公司依靠`blame`结果来做某事，那么您就处于**非常**糟糕的方式（tm）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:27:26.870

是的，您可以还原已提交的文件。希望它们都在一次提交中提交，因为您可以恢复提交，而不是提交的特定文件。

在 Eclipse 中，您可以转到 Team，Show History - 选择包含您不想要的更改的提交，然后选择上下文菜单 - 选择“Revert Changes from Revision ???”。

这会将修订版带回您的工作区，然后您可以提交。

至于注释，我们在构建服务器上更新了它，所以无论谁提交它......所以你会不走运。除非，您自己以特定用户身份登录并提交。;-) 或者让开发人员去做。

# windows - PowerShell，不包含方法“项目”

> ID：14219783
> 
> 赞同：1
> 
> 时间：2013-01-08T16:39:13.143
> 
> 标签：windows, string, file, powershell, io

执行此代码时，我收到以下错误：

```
$filesExist = Test-Path($file)
if ($filesExist) {
    $shell_app=new-object -com shell.application
    $zip_file = Get-Item "$mindCrackFolder\files.zip"
    $destination = Get-Item $mindCrackFolder

    $destination.Copyhere($zip_file.items(), 0x14)
    #Remove-Item "$zip_file"
    #Remove-Item "install.ps1"
} 
```

错误：

```
Method invocation failed because [System.IO.FileInfo] doesn't contain a method named 'items'.
At C:\Users\User1\Desktop\ps install\install.ps1:33 char:5
+     $destination.Copyhere($zip_file.items(), 0x14)
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : MethodNotFound 
```

但是我已经将 $destination 转换为要操作的 IO 对象了？我可以得到任何帮助，这是我第一次尝试PS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:28:47.453

这与 $destination 无关。 `$zip_file.items()`首先进行评估，错误消息告诉您返回的 .NET System.IO.FileInfo 对象`Get-Item`没有`Items()`方法。 `Get-Item`仅返回一个提供有关文件信息的对象 - 大小、上次写入时间、只读与否等。您不能使用 Get-Item 访问 ZIP 文件的内容。

如果您需要提取 ZIP 文件的内容，请考虑使用[PowerShell Community Exensions 的](http://pscx.codeplex.com) `Expand-Archive`cmdlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:28:54.083

错误是在谈论您`items()`在 = 上使用该方法的对象`$zip_file`。Powershell 没有内置的 zip 支持，你必须创建它（使用 shell.application com-object，谷歌它）或添加一个 .net 库。`$zip_file`只是一个简单的 FileInfo 对象，就像您从`dir`(Get-ChildItem) 获得的对象一样。它不包含`items()`方法。

解决方案：如前所述，谷歌`powershell zip files`阅读有关如何在 powershell 中使用 zip 文件的信息。我的建议是[DotNetZip](http://dotnetzip.codeplex.com/wikipage?title=PS-Examples)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:35:22.160

我不知道您在哪里学到了什么，但您似乎错误地复制了一些代码并临时进行了更改。尝试以下脚本，它可以满足您的需求：

```
$shell_app=new-object -com shell.application
$filename = "test.zip"
$zip_file = $shell_app.namespace((Get-Location).Path + "\$filename")
$destination = $shell_app.namespace((Get-Location).Path)
$destination.Copyhere($zip_file.items(), 0x14) 
```

`items`and方法在对象`copyHere`上不可用`FileInfo`，这是您从`Get-Item`. 如上所示使用它们。

# django - django-registration：如何在显示页面之前检查用户是否登录

> ID：14219784
> 
> 赞同：11
> 
> 时间：2013-01-08T16:39:13.137
> 
> 标签：django, django-authentication, django-registration

我按照[这个页面](http://www.michelepasin.org/blog/2011/01/14/setting-up-django-registration/)设置了一个 django 注册站点。它非常棒，并且注册和身份验证都包装得很好。

但是，它没有告诉我，在显示网页之前如何检查用户是否已登录，该用户是谁？登录后如何将用户引导到新页面？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-08T18:09:58.943

在一个视图中，您可以使用`if request.user.is_authenticated():`并且当前用户的变量是`request.user`

在模板中，您可以使用`{% if user.is_authenticated %}`当前用户的变量是`user`

为了在登录后重定向用户，您可以在中设置`LOGIN_REDIRECT_URL`变量`settings.py`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-25T12:30:26.693

**在 .py 文件中**

您可以在每个视图中使用它

```
if not request.user.is_authenticated:
   #do something 
```

或者这个就在每个视图之前

```
@login_required 
```

请记住，这需要导入，您可能还希望在您的文件`from django.contrib.auth.decorators import login_required`
中写入以将未登录用户重定向到特定 URL 而不是默认 URL ）`LOGIN_URL = "/loginurl/"``settings.py``accounts/login`

**在 .html 文档中**

```
{% if not user.is_authenticated %}
Login is required
{% endif %} 
```

* * *

**登录后重定向**

您可以`LOGIN_REDIRECT_URL`在`settings.py`

或`redirect("/indexpage")`在用户登录后。
最后一个需要导入`from django.shortcuts import redirect`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T10:17:52.733

您还可以在视图之前使用登录所需的装饰器：

```
@login_required() 
```

如果未登录的用户尝试访问您的视图，它会将用户重定向到登录页面

您将在此页面上找到更多信息： [https ://docs.djangoproject.com/en/dev/topics/auth/default/#topic-authorization](https://docs.djangoproject.com/en/dev/topics/auth/default/#topic-authorization)

# javascript - 样式化 HTML / CSS / javascript 播放器 - 幻像填充？

> ID：14219787
> 
> 赞同：0
> 
> 时间：2013-01-08T16:39:21.093
> 
> 标签：javascript, html, css

我一生都无法弄清楚为什么我不能将页面中间“样本”选项卡中的这个播放器中的歌曲标签向上移动，这样它们看起来更苗条和平衡。我需要一个更熟悉 css 的人来找出导致顶部和文本之间的空间的原因。我确信这是一个非常容易解决的问题。

[http://www.remedyaudio.com](http://www.remedyaudio.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:44:24.043

如果你给你`<img>`的 a`style="float:left"`它将删除顶部高度。

将`float:left`图像向左`<span>`对齐，允许从图像顶部而不是底部对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:42:37.677

# 纯 CSS

```
#nice2Tab ul li img
{
    float:left;
} 
```

# jQuery

```
$('#nice2Tab ul li img').each(function (){

  $(this).css('float','left');

}); 
```

# node.js - node.js 应用程序找不到 socket.io

> ID：14219791
> 
> 赞同：1
> 
> 时间：2013-01-08T16:39:24.073
> 
> 标签：node.js, socket.io

我在 app 目录（连同 express）中安装了 socket.io，并在`index.html`文件中以这种方式链接到它：

```
<script src="http://localhost:8080/node_modules/socket.io/lib/socket.io.js"></script> 
```

我收到此请求的 404。我仔细检查了链接，没关系。node.js 应用程序在端口 8080 上运行，我不知道为什么它不起作用

更新：显然这与 Express 有关。不使用它时，我没有这个问题，socket.io 工作正常。这是我的服务器文件的设置：

```
var express = require('express'),
    http = require('http');

var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);

app.listen(8000); 
```

这是前端：

```
<script src="/socket.io/socket.io.js"></script>
<script src="js/vendor/jquery-1.8.3.min.js"></script>
<script>
  var socket = io.connect('http://localhost:8000'); 
```

另外，我将 jQuery 从谷歌 CDN 切换到本地，它也没有找到它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T09:16:12.560

确保您已`socket.io`在后端监听外部连接。基本上 socket.io 有提供`socket.io.js`文件的内部方法，所以你应该`require ('socket.io').listen(app)`在定义任何到你的应用程序的路由之前放置你的文件。

正确的网址是：

`<script src="/socket.io/socket.io.js"></script>`

正如兰杜内尔所说。

因此，您的配置应如下所示：

为 express 3.x 更新：

```
var express = require('express'),
    http = require('http');

var app = express();
var server = http.createServer(app).listen(8000);

require('socket.io').listen(server);  // Your app passed to socket.io 
```

服务器端

```
<script src="http://localhost:8000/socket.io/socket.io.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:47:58.197

不要使用整个路径，它与您项目的目录结构不对应。只需使用

```
<script src="http://localhost:8080/socket.io/socket.io.js"></script> 
```

顺便说一句，确保 socket.io 也在监听 8080，而不仅仅是项目中的其他服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:47:37.863

尝试将您的 JS 文件放入`http://localhost:8080/javascripts/socket.io.js`，基本上是您`public`文件夹的 JavaScript 目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T00:35:35.113

路是从兰杜内尔来的。

```
<script src="http://localhost:8080/socket.io/socket.io.js"></script> 
```

如果你直接链接文件，你会得到一个“Welcome to socket.io”消息而不是文件。还有一个 CDN socket.io.js 文件可用于链接，但它已经过时并且不能在新项目上正常工作，因此不推荐。

# java - Spring xml ioc 与 Java 实例化相比有什么好处？

> ID：14219799
> 
> 赞同：2
> 
> 时间：2013-01-08T16:39:43.710
> 
> 标签：java, xml, spring, inversion-of-control

好吧，这个问题会得到很多反对...

我刚刚看到[这个问题](https://stackoverflow.com/questions/14219059/error-with-spring-bean)，其中一个人面临一些关于 spring xml beanfactory 的问题。

我想了解为什么会这样：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="namingStrategy">
        <ref bean="namingStrategy"/>
    </property>
    <property name="mappingResources">
        <list>
            <!--<value>genericdaotest/domain/Person.hbm.xml</value>-->
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
    <property name="dataSource">
        <ref bean="dataSource"/>
    </property>
</bean> 
```

无论如何应该比这更好：

```
public class BeanFactory {
    public LocalSessionFactoryBean getSessionFactory() {
        LocalSessionFactoryBean bean = new LocalSessionFactoryBean();
        bean.setNamingStrategy(getNamingStrategy());
        bean.setMappingResources(Arrays.asList(getPerson());
        bean.setHibernateProperties(new Properties() {{ 
           setProperty("hibernate.dialect", "org.hibernate.dialect.HSQLDialect");
           setProperty("hibernate.show_sql", "true")
           setProperty("hibernate.hbm2ddl.auto", "create");
        }});
        bean.setDataSource(getDataSource());
        return bean;
    }
} 
```

它更短，更容易理解，它没有 Spring 怪癖，它不需要运行外部库（可能会与其他库发生冲突），它是可逐步调试的，它是“可单元测试的，它没有”不需要反射，它具有 OOP 的潜在好处，从 IDE 中重构更容易，它在编译时进行类型检查，它是 Java - 而不是 xml - 并且不需要在运行时解析，当它编译时你已经知道它形式上是正确的（并且不会在运行时发现异常），如果您需要外部化某些配置参数，则使用属性文件（将包含**真实配置**）。

最重要的是：我的代码中不需要一个名为“BeanFactory”的巨大单例类，它的职责是实例化各种对象（例如与 IoC 原则无关的巨大而丑陋的服务定位器）。

所以，问题是：

> **为什么我应该更喜欢创建一个巨大的 XML 而不是创建我的对象来用 Java 组合和聚合它们？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:51:31.400

使用相对现代的 Spring 版本，您根本不需要使用 xml。只需如下注释您的类...

```
@Configuration
public class BeanFactory {
     @Bean
     public LocalSessionFactoryBean sessionFactory() {
         LocalSessionFactoryBean bean = new LocalSessionFactoryBean();
        bean.setNamingStrategy(getNamingStrategy());
        bean.setMappingResources(Arrays.asList(getPerson());
        bean.setHibernateProperties(new Properties() {{ 
           setProperty("hibernate.dialect", "org.hibernate.dialect.HSQLDialect");
           setProperty("hibernate.show_sql", "true")
           setProperty("hibernate.hbm2ddl.auto", "create");
        }});
        bean.setDataSource(dataSource());
        return bean;
    }

    @Bean
    public DataSource dataSource() { 
    ....
} 
```

依赖注入的真正好处在于使用您的 bean 的类。您的代码没有杂乱无章的管道代码，它专注于解决业务问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:03:05.473

一个更好的问题可能是“依赖注入的优点是什么？” 毕竟，还有其他使用纯 java 而非 XML 的依赖注入框架。（见[谷歌Guice](http://code.google.com/p/google-guice/)）

这一切都归结为找到有用的技术来解耦您的代码，然后将其“连接”到其他地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T13:51:46.347

> 为什么我应该更喜欢创建一个巨大的 XML 而不是创建我的对象来用 Java 组合和聚合它们？

我对收到的答案的理解是，许多人认为 XML 不是源代码而是*配置*。因此，修改 XML 被认为比更改 Java 类风险更小或更方便。

与修改 Java 源代码相比，修改 XML 的一个*好处*是您不需要重新编译应用程序。因此可以在测试/生产中更轻松地推动这些更改，而无需参与正常的开发活动（和测试）。而这——在我个人看来——是故事中最糟糕的部分。

我得到了关于 IoC 有什么好处的答案，这不是我问的。我的意图是/是要了解为什么这么多开发人员更喜欢拥有这样的 XML 文件，而不是依赖 Java 源代码来编程对象的构造。
幸运的是，我看到这种方法正在被摒弃（或至少减少），有利于 Spring 注释和/或其他基于 Java 源代码的框架（如已经提到的 Guice）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T16:56:31.160

控制反转或依赖注入将帮助您在不接触源代码的情况下控制依赖。您可以在 XML 中执行此操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T17:01:15.730

IOC xml 实例化为您的应用程序提供了模块化。通过使用自动装配，您不必在类中显式设置成员变量/服务。这样想，许多使用 1..2..3..n 服务的类可能需要多个构造函数或一个工厂类，或者是获取和设置该类使用的服务的最差方法。通过使用 Spring，您可以在一个类中定义它，并且该类的使用者不需要知道或调用特殊方法。您可以使用带注释的符号定义该 bean 组件，现在只需在必要时自动装配它，无需编写工厂代码。

就 XML 驱动而言，我认为 hyness 说得最好，如果您可以升级 Spring 版本，通过注释自动装配可以大大减轻维护 xml 文档的负担。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T17:09:00.820

尽管使用 XML 文件来配置您的应用程序可能会通过增加您必须满足的文件数量来增加更多复杂性。它们确实为您提供了保持代码完整并避免在您可能想要使用不同的 Hibernate 方言等情况下进行更改的优势。

# iphone - NSArray - 查找对象索引以了解描述的快速方法

> ID：14219804
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:39:56.820
> 
> 标签：iphone, cocoa

嗨，我有 NSArray 的 id 对象。我知道对象描述 NSString。我怎样才能找到对象并避免数组枚举？ps 我不喜欢使用 NSDictionary，因为这样做代码更难

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:45:28.367

如果这是您计划更频繁地执行的查找并且速度是一个问题，那么您可能不应该将对象存储在 NSArray 中，而是首先存储在 NSDictionary 中，其中键是对象的描述字符串，值是对象本身。然后，您可以使用`objectForKey:`描述字符串作为参数，这是一个 O(1) 查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:42:50.107

试试这个：

```
[myArray containsObject:yourObject]; 
```

或者你可以过滤它：

```
[myArray filterUsingPredicate:predicate]; 
```

# jquery - 按数据属性选择对象

> ID：14219813
> 
> 赞同：0
> 
> 时间：2013-01-08T16:40:32.247
> 
> 标签：jquery

如何通过数据选择对象？我找到了很多例子，但没有一个对我有用：

```
$('div').data('name', 'foo'); 
```

我试过了：

```
$('div').find('[data-name]="foo"').hide();
$('div[data-name]="foo"').hide();
$('div[name]="foo"').hide(); 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:41:33.483

尝试`filter()`：

```
var $div = $('div').filter(function() {
    return $(this).data('name') === 'foo'; 
});
$div.hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:44:08.580

试试这个

```
$('div[data-name=foo]').hide() 
```

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:58:27.820

改用`.attr`：

```
$('div').attr('data-name', 'foo');
$('div[data-name="foo"]').hide(); 
```

[这篇文章](http://lookfirst.com/2011/12/dont-use-jquery-data-method-use-attr.html)可能会很有趣。

# c# - 使用 C# MVC4 并将 DbContext 类名称与 ConnectionString 名称匹配以使用正确的数据库？

> ID：14219817
> 
> 赞同：2
> 
> 时间：2013-01-08T16:40:44.723
> 
> 标签：c#, asp.net-mvc, entity-framework

使用 EF Code First，我知道我必须将我的`DbContext`类名与数据库的连接字符串`name`属性匹配，以使它们一起工作。但是下面的代码不起作用：

```
 public class UserDbContext : DbContext
         {
             public DbSet<Users> Users { get; set; }
         } 
```

连同这个连接字符串：

```
<add name="UserDbContext" 
 connectionString="Data Source=(LocalDB)\v11.0;
 AttachDbFilename=|DataDirectory|\Users.mdf;
 Integrated Security=True" 
 providerName="System.Data.SqlClient" /> 
```

但是我最终不得不改用这个连接字符串，它直接指向模型以及`DbContext`名称

```
<add name="NextFlicksMVC4.Models.userAccount.Users+UserDbContext"     
 connectionString="Data Source=(LocalDB)\v11.0;
 AttachDbFilename=|DataDirectory|\Users.mdf;
 Integrated Security=True"
 providerName="System.Data.SqlClient" /> 
```

它按预期工作，我连接到 App_Data 文件夹中的 LocalDB。

谁能向我解释为什么它只在我将它指向 DbContext 类的完整路径时才有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:52:14.617

像这样在 UserDbContext 类中指定一个构造函数，将解决问题

```
 public UserDbContext() : base("UserDbContext") {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T18:15:26.263

默认构造函数，来自[文档](http://msdn.microsoft.com/en-us/library/gg679577%28v=vs.103%29.aspx)：

> 使用约定构造一个新的上下文实例，以创建将与之建立连接的数据库的名称。按照约定，名称是派生上下文类的全名（命名空间 + 类名）。有关如何使用它来创建连接的更多信息，请参阅 DbContext 的备注部分。

从 DbContext 的备注部分：

> 如果从派生上下文调用无参数 DbContext 构造函数，则派生上下文的名称用于在 app.config 或 web.config 文件中查找连接字符串。

如果您使用反编译器查看默认构造函数的代码`DbContext`，您会看到它调用实例并使用`GetType().ToString()`该`DbContext`值来查找连接字符串。`DbContext`因此，为什么您的完全限定类型名称是用于命名连接字符串的有效约定是完全有道理的。

在您的示例中，`UserDbContext`这不是正确的名称，因为它是一个嵌套类。您可以不使用名称空间，但至少必须命名您的连接字符串`Users+UserDbContext`。如果您想让连接字符串与类名单独匹配，则不能将其嵌套在模型中。

# java - 在 applicaionContext 中为 sessionFactory 创建 bean

> ID：14219823
> 
> 赞同：-1
> 
> 时间：2013-01-08T16:40:57.593
> 
> 标签：java, spring, hibernate, javabeans

**更新：显示完整的应用程序上下文**

再会。我尝试将spring和hibernate以及tapestry集成在一起，但是application-context.xml中的一些bean有问题这里我的pom.xml部分带有hibernate和spring。我使用IDE：Idea 12，支持spring、tapestry和hibernate框架，所以在lib目录下有一些jar文件。

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>2.0.6</version>
        </dependency>

      <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.2.Final</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency> 
```

这是我的 applicationcontext.xml，是 sessionFactory bean 的一部分

```
 <beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName">
            <value>com.mysql.jdbc.Driver</value>
        </property>
        <property name="url">
            <value>jdbc:mysql://localhost:3306/reframework</value>
        </property>
        <property name="username">
            <value>root</value>
        </property>
        <property name="password">
            <value>root</value>
        </property>
    </bean>

    <bean id="namingStrategy"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
        <property name="staticField">
            <value>org.hibernate.cfg.ImprovedNamingStrategy.INSTANCE</value>
        </property>
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="namingStrategy">
            <ref bean="namingStrategy"/>
        </property>
        <property name="mappingResources">
            <list>
                <!--<value>genericdaotest/domain/Person.hbm.xml</value>-->
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLMyISAMDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
            </props>
        </property>
        <property name="dataSource">
            <ref bean="dataSource"/>
        </property>
    </bean>

    <bean id="transactionManager"
          class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="extendedFinderNamingStrategy"
          class="com.packtpub.domain.finder.classes.ExtendedFinderNamingStrategy" />

    <!--  Dao Layer generic config-->
    <bean id="finderIntroductionAdvisor" class="com.packtpub.domain.finder.classes.FinderIntroductionAdvisor"/>
    <bean id="abstractDaoTarget"
          class="com.packtpub.domain.dao.ReDAO" abstract="true">
        <property name="sessionFactory">
            <ref bean="sessionFactory"/>
        </property>
        <property name="namingStrategy">
            <ref bean="extendedFinderNamingStrategy" />
        </property>
    </bean>
    <bean id="abstractDao"
          class="org.springframework.aop.framework.ProxyFactoryBean" abstract="true">
        <property name="interceptorNames">
            <list>
                <value>finderIntroductionAdvisor</value>
            </list>
        </property>
    </bean>

    <!--  Dao Layer instances -->
    <bean id="objectDao" parent="abstractDao">
        <property name="proxyInterfaces">
            <value>com.packtpub.domain.dao.objects.IObjectDAO</value>
        </property>
        <property name="target">
            <bean parent="abstractDaoTarget">
                <constructor-arg>
                    <value>com.packtpub.domain.entities.ObjectEntity</value>
                </constructor-arg>
            </bean>
        </property>
    </bean>
</beans> 
```

但是，当我启动我的应用程序时，它给了我一个例外

```
Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider 
```

正如我在hibernate 4中搜索后所了解的那样，没有这样的课程，但我需要做些什么来解决它？

这里完整的堆栈跟踪

```
[DEBUG] AppModule.IObjectService Loading class com.packtpub.services.ObjectService.
[DEBUG] AppModule.IObjectService Marking class com.packtpub.services.ObjectService to be (re-)loaded
[DEBUG] AppModule.IObjectService BEGIN Analyzing com.packtpub.services.ObjectService
[DEBUG] AppModule.IObjectService   END Analyzing com.packtpub.services.ObjectService
[DEBUG] AppModule.IObjectService Invoking constructor public com.packtpub.services.ObjectService() (for service 'IObjectService')
[INFO] support.ClassPathXmlApplicationContext Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@5b905255: startup date [Tue Jan 08 21:05:19 MSK 2013]; root of context hierarchy
[INFO] xml.XmlBeanDefinitionReader Loading XML bean definitions from class path resource [WEB-INF/applicationContext.xml]
[INFO] support.DefaultListableBeanFactory Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@989472: defining beans [dataSource,namingStrategy,sessionFactory,extendedFinderNamingStrategy,finderIntroductionAdvisor,abstractDaoTarget,abstractDao,objectDao]; root of factory hierarchy
[INFO] datasource.DriverManagerDataSource Loaded JDBC driver: com.mysql.jdbc.Driver
[INFO] support.DefaultListableBeanFactory Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@989472: defining beans [dataSource,namingStrategy,sessionFactory,extendedFinderNamingStrategy,finderIntroductionAdvisor,abstractDaoTarget,abstractDao,objectDao]; root of factory hierarchy
[ERROR] ioc.Registry Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider
[ERROR] ioc.Registry Operations trace:
[ERROR] ioc.Registry [ 1] Triggering event 'action' on Index:increment
[ERROR] TapestryModule.RequestExceptionHandler Processing of request failed with uncaught exception: Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider
org.apache.tapestry5.ioc.internal.OperationException: Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider [at classpath:com/packtpub/pages/Index.tml, line 19]
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.logAndRethrow(OperationTrackerImpl.java:121)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:88)
    at org.apache.tapestry5.ioc.internal.PerThreadOperationTracker.invoke(PerThreadOperationTracker.java:87)
    at org.apache.tapestry5.ioc.internal.RegistryImpl.invoke(RegistryImpl.java:1124)
    at org.apache.tapestry5.internal.structure.ComponentPageElementResourcesImpl.invoke(ComponentPageElementResourcesImpl.java:146)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl.triggerContextEvent(ComponentPageElementImpl.java:1053)
    at org.apache.tapestry5.internal.services.ComponentEventRequestHandlerImpl.handle(ComponentEventRequestHandlerImpl.java:81)
    at org.apache.tapestry5.internal.services.ImmediateActionRenderResponseFilter.handle(ImmediateActionRenderResponseFilter.java:42)
    at $ComponentEventRequestHandler_11e927111127.handle(Unknown Source)
    at org.apache.tapestry5.internal.services.AjaxFilter.handle(AjaxFilter.java:42)
    at $ComponentEventRequestHandler_11e927111127.handle(Unknown Source)
    at org.apache.tapestry5.services.TapestryModule$41.handle(TapestryModule.java:2476)
    at $ComponentEventRequestHandler_11e927111127.handle(Unknown Source)
    at $ComponentEventRequestHandler_11e9271110ae.handle(Unknown Source)
    at org.apache.tapestry5.internal.services.ComponentRequestHandlerTerminator.handleComponentEvent(ComponentRequestHandlerTerminator.java:43)
    at org.apache.tapestry5.services.InitializeActivePageName.handleComponentEvent(InitializeActivePageName.java:39)
    at $ComponentRequestHandler_11e9271110b0.handleComponentEvent(Unknown Source)
    at $ComponentRequestHandler_11e92711107b.handleComponentEvent(Unknown Source)
    at org.apache.tapestry5.internal.services.ComponentEventDispatcher.dispatch(ComponentEventDispatcher.java:46)
    at $Dispatcher_11e92711107e.dispatch(Unknown Source)
    at $Dispatcher_11e927111078.dispatch(Unknown Source)
    at org.apache.tapestry5.services.TapestryModule$RequestHandlerTerminator.service(TapestryModule.java:302)
    at org.apache.tapestry5.internal.services.RequestErrorFilter.service(RequestErrorFilter.java:26)
    at $RequestHandler_11e927111079.service(Unknown Source)
    at org.apache.tapestry5.services.TapestryModule$3.service(TapestryModule.java:902)
    at $RequestHandler_11e927111079.service(Unknown Source)
    at org.apache.tapestry5.services.TapestryModule$2.service(TapestryModule.java:892)
    at $RequestHandler_11e927111079.service(Unknown Source)
    at org.apache.tapestry5.internal.services.StaticFilesFilter.service(StaticFilesFilter.java:90)
    at $RequestHandler_11e927111079.service(Unknown Source)
    at com.packtpub.services.AppModule$1.service(AppModule.java:98)
    at $RequestFilter_11e927111074.service(Unknown Source)
    at $RequestHandler_11e927111079.service(Unknown Source)
    at $RequestHandler_11e92711106d.service(Unknown Source)
    at org.apache.tapestry5.services.TapestryModule$HttpServletRequestHandlerTerminator.service(TapestryModule.java:253)
    at org.apache.tapestry5.internal.gzip.GZipFilter.service(GZipFilter.java:53)
    at $HttpServletRequestHandler_11e92711106f.service(Unknown Source)
    at org.apache.tapestry5.internal.services.IgnoredPathsFilter.service(IgnoredPathsFilter.java:62)
    at $HttpServletRequestFilter_11e92711106b.service(Unknown Source)
    at $HttpServletRequestHandler_11e92711106f.service(Unknown Source)
    at org.apache.tapestry5.services.TapestryModule$1.service(TapestryModule.java:852)
    at $HttpServletRequestHandler_11e92711106f.service(Unknown Source)
    at $HttpServletRequestHandler_11e92711106a.service(Unknown Source)
    at org.apache.tapestry5.TapestryFilter.doFilter(TapestryFilter.java:171)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.tapestry5.runtime.ComponentEventException: Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider [at classpath:com/packtpub/pages/Index.tml, line 19]
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl.processEventTriggering(ComponentPageElementImpl.java:1136)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl.access$3100(ComponentPageElementImpl.java:61)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl$5.invoke(ComponentPageElementImpl.java:1057)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl$5.invoke(ComponentPageElementImpl.java:1054)
    at org.apache.tapestry5.ioc.internal.OperationTrackerImpl.invoke(OperationTrackerImpl.java:74)
    ... 58 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.packtpub.services.ObjectService.AddObject(ObjectService.java:27)
    at $IObjectService_11e92711112a.AddObject(Unknown Source)
    at $IObjectService_11e9271110ab.AddObject(Unknown Source)
    at com.packtpub.pages.Index.onActionFromIncrement(Index.java:61)
    at com.packtpub.pages.Index.dispatchComponentEvent(Index.java)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl.dispatchEvent(ComponentPageElementImpl.java:927)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl.processEventTriggering(ComponentPageElementImpl.java:1112)
    ... 62 more
Caused by: java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.privateGetPublicMethods(Class.java:2562)
    at java.lang.Class.getMethods(Class.java:1427)
    at java.beans.Introspector.getPublicDeclaredMethods(Introspector.java:1261)
    at java.beans.Introspector.getTargetMethodInfo(Introspector.java:1122)
    at java.beans.Introspector.getBeanInfo(Introspector.java:414)
    at java.beans.Introspector.getBeanInfo(Introspector.java:161)
    at org.springframework.beans.CachedIntrospectionResults.<init>(CachedIntrospectionResults.java:224)
    at org.springframework.beans.CachedIntrospectionResults.forClass(CachedIntrospectionResults.java:149)
    at org.springframework.beans.BeanWrapperImpl.getCachedIntrospectionResults(BeanWrapperImpl.java:324)
    at org.springframework.beans.BeanWrapperImpl.getPropertyDescriptorInternal(BeanWrapperImpl.java:354)
    at org.springframework.beans.BeanWrapperImpl.isWritableProperty(BeanWrapperImpl.java:430)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1362)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 79 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 95 more
[INFO] AppModule.TimingFilter Request time: 714 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:02:54.813

基于那个例外，你有冲突的罐子。您尚未发布完整的 pom，但我看到您将 spring 2.0 (spring-jdbc) 与 spring 3.1.1 jar 混合在一起。您需要查看整个依赖关系树并找出冲突的休眠 jar 来自何处。使用以下 maven 命令查看依赖关系树：**`mvn dependency:tree`**

# objective-c - Objective-c 如何在运行时处理方法解析？

> ID：14219840
> 
> 赞同：3
> 
> 时间：2013-01-08T16:41:48.450
> 
> 标签：objective-c, ios, cocoa, objective-c-runtime

我最近在这里读到，objective-c 对象作为结构存储在堆上。该结构包含对象 iVar、继承的 iVar 和 isa 指针。

我试图弄清楚当我向这个对象发送消息时，运行时如何找出要运行的代码？

我知道每个类都有一个类对象。这也存储在堆上吗？

我认为它的工作方式是运行时从结构中获取 isa 指针，使用它来调用类对象上的消息。它是否正确？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T17:06:31.450

简而言之，每个 Objective-C 实例都有一个指向其类的指针。该类包含一个元数据清单，其中包括该类实现的所有方法。当消息被发送到对象时——当调用方法时——运行时使用指向类的指针按名称查找方法并调用它（如果可以找到）。如果没有找到，运行时会在继承链上查找超类（它是每个类元数据的一部分）到 NSObject。如果最终找不到该方法，则运行时会进行一系列最后的努力，以查看它们是否是替代处理程序，并最终引发异常，如果不是。

如果你想了解更多细节，我写了一个[关于 Objective-C 方法调度工作原理的多部分教程。](http://www.friday.com/bbum/2009/12/18/objc_msgsend-part-1-the-road-map/) 它有点过时了——不处理 ARC、标记指针或块作为 IMP——但仍然完全适用。

* * *

是的，类存储在堆中，但通常不在 malloc()d 内存中。类通常作为只读的共享内存加载。也就是说，*对于系统上运行的所有应用程序*`NSString`，内存中只有一个类的副本。您可以动态创建类，这些类将在常规堆中，但它是非典型的。

# sql - Postgres Full Outer Join Headscratcher

> ID：14219841
> 
> 赞同：0
> 
> 时间：2013-01-08T16:41:50.963
> 
> 标签：sql, postgresql, join

如果我写这样的查询：

```
with foo as (
    select
        'foo' as name,
        1 as value
    union all select
        'foo', 2
    union all select
        'foo', 3
    union all select
        'foo', 4
), bar as (
    select
        'bar' as name,
        3 as value
    union all select
        'bar', 4
    union all select
        'bar', 5
    union all select
        'bar', 6
)
select
    f.name,
    b.value,
    b.name
from
    foo as f
full outer join
    bar as b
    on b.value = f.value; 
```

我明白了：

```
name        value    name
foo         (null)  (null)
foo         (null)  (null)
foo         3       bar
foo         4       bar
(null)      5       bar
(null)      6       bar 
```

这是我所期望的。但是，如果我尝试使用像这样的表值函数做类似的事情：

```
with allSizes as (
        select cast('120X60' as character varying) as size
        union all select '160X600'
        union all select '1X1'
        union all select '300X250'
        union all select '728X90'
        union all select '88X32'
        union all select 'PEEL'
)
select
        msd.region,
        msd.market,
        s.size,
        msd.target,
        msd.actual
from 
        marketdata('2013-01-05') as msd
full outer join
        allSizes as s
        on s.size = msd.size
where
        msd.market = 'Foo, USA'; 
```

where`marketdata()`是一个表值函数，我没有得到与函数`size`中不存在的列相对应的空行`marketdata()`。为什么不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:50:52.523

这是因为：

```
where
        msd.market = 'Foo, USA'; 
```

它产生`full outer join`然后过滤掉不存在于的行`marketdata()`（因为它们有`msd.market`= `NULL`）

您可以将查询更改为：

```
with allSizes as (
        select cast('120X60' as character varying) as size
        union all select '160X600'
        union all select '1X1'
        union all select '300X250'
        union all select '728X90'
        union all select '88X32'
        union all select 'PEEL'
)
select
        msd.region,
        msd.market,
        s.size,
        msd.target,
        msd.actual
from 
        (select marketdata('2013-01-05')
         where  market = 'Foo, USA') as msd
full outer join
        allSizes as s
        on s.size = msd.size; 
```

或者干脆重写

```
where
        msd.market = 'Foo, USA' OR msd.market IS NULL; 
```

如果`marketdata()`不返回任何行`msd.market IS NULL`。

# windows - 在 Windows 上使用 MinGW 编译 Glew git 代码

> ID：14219842
> 
> 赞同：0
> 
> 时间：2013-01-08T16:41:57.367
> 
> 标签：windows, git, mingw, msysgit, glew

在 glew 项目页面上查看时，有一个带有最新代码的 git 存储库。

克隆存储库我看到我需要下载扩展。Makefile 有一个名为*extensions*的目标，它负责从 Internet 下载所有内容。

问题是这个 Makefile 是 Unix 系统的默认文件。当我尝试在 Windows 上构建 glew 时，使用*msysgit*和*mingw*我收到以下错误：

```
mingw32-make.exe extensions
mingw32-make -C auto
mingw32-make[1]: Entering directory `glew/auto'

--------------------------------------------------------------------
Creating descriptors
--------------------------------------------------------------------
rm -rf extensions/gl
bin/update_ext.sh extensions/gl registry/gl blacklist
Integer overflow in hexadecimal number at bin/parse_spec.pl line 337.
Hexadecimal number > 0xffffffff non-portable at bin/parse_spec.pl line 337.
Integer overflow in hexadecimal number at bin/parse_spec.pl line 337.
Hexadecimal number > 0xffffffff non-portable at bin/parse_spec.pl line 337.
Integer overflow in hexadecimal number at bin/parse_spec.pl line 337.
Hexadecimal number > 0xffffffff non-portable at bin/parse_spec.pl line 337.
Integer overflow in hexadecimal number at bin/parse_spec.pl line 337.
Hexadecimal number > 0xffffffff non-portable at bin/parse_spec.pl line 337.
Integer overflow in hexadecimal number at bin/parse_spec.pl line 337.
Hexadecimal number > 0xffffffff non-portable at bin/parse_spec.pl line 337.
bin/filter_gl_ext.sh     extensions/gl
Can't do inplace edit on extensions/gl/GL_HP_occlusion_test: Permission denied.
Can't open extensions/gl/GL_HP_occlusion_test: No such file or directory.
Can't do inplace edit on extensions/gl/GL_ARB_vertex_buffer_object: Permission d
enied.
Can't do inplace edit on extensions/gl/GL_ARB_vertex_shader: Permission denied.
Can't open extensions/gl/GL_ARB_vertex_shader: No such file or directory.
Can't open extensions/gl/GL_ARB_vertex_shader: No such file or directory.
Can't open extensions/gl/GL_ARB_vertex_shader: No such file or directory.
grep: extensions/gl/GL_ARB_vertex_shader: No such file or directory
mingw32-make[1]: *** [extensions/gl/.dummy] Error 2
mingw32-make[1]: Leaving directory `glew/auto'
mingw32-make: *** [extensions] Error 2 
```

我知道这来自*perl*，但是如何在 Windows 中使用 MinGW 和 msysgit 解决它？我首先考虑其他环境设置，例如*cygwin*，但我已经有一个设置，可以使用我当前的设置构建十几个其他项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T09:18:25.040

问题可能来自您使用`make`MinGW（您的`mingw32-make`）但`perl`来自 MSYS（随*Git for Windows*一起提供）的事实。所以你需要的是一个 MSYS `make`。

在继续之前，让我指出一个常见的误解：*msysgit*是创建*Git for Windows*安装程序的开发环境的名称（另请参阅[此答案](https://stackoverflow.com/a/3672312/1127485)）。所以通常只想在 Windows 上使用 Git 的人应该下载*Git for Windows*，而不是*msysgit*。*msysgit*附带了各种通常不需要的开发内容，例如`gcc`and (tadaa) `make`。所以在你的情况下，你真的需要*msysgit*，我建议从[这里](http://msysgit.googlecode.com/files/msysGit-netinstall-1.8.4-preview20130916.exe)安装网络安装程序。安装后你应该能够启动`C:\msysgit\msys.bat`，切换到你的*glew*目录，然后运行`make extensions`​​.

# linux - 有没有办法在 Linux 上将二进制文件从 x86 重新编译到 ARM？

> ID：14219843
> 
> 赞同：8
> 
> 时间：2013-01-08T16:42:02.230
> 
> 标签：linux, compilation, x86, arm

我想收集一些关于解决以下问题的想法。我有一个 TOF 相机，它的驱动程序适用于 linux x86/64。它工作正常。但事实上，如果可能的话，相机将用于基于 ARM 的嵌入式设备。

问题：

*   我是否必须反编译驱动程序二进制文件并使用 ARM 编译器重新编译？有没有可用的反编译工具？
*   有没有可用的 ARM>>x86 模拟器？
*   还有其他想法吗？

ps：纯源很贵，反正我也不喜欢买：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:50:07.830

1.  AFAIK，截至今天，没有这样的反编译器可以从机器代码生成可编译代码。您将不得不手动修复（通常是很多修复）生成的代码。您可以检查[这个](https://stackoverflow.com/questions/193896/whats-a-good-c-decompiler)问题以了解 Linux 反编译器。
2.  检查[QEmu](http://wiki.qemu.org/Main_Page)。只要您可以执行底层架构，它就无关紧要；）
3.  除了你说的以外，没有太多。

您正在尝试的是（部分）[逆向工程](http://en.wikipedia.org/wiki/Reverse_engineering)。RE 是一个复杂的过程，需要对你试图扭转的*事情有丰富的知识；*在您的情况下，相机驱动程序。如果您有这方面的知识，请继续。如果你不这样做，我不会浪费我的时间（或先获得知识;））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T02:41:17.147

最近创建[的 Eltechs ExaGear Server](http://www.prlog.org/12200999-bios-it-boston-and-eltechs-bring-x86-apps-to-arm-as-service-cloud-platform.html)可在[ARM as A Service](http://www.armasaservice.com/)上使用，可在 ARM 设备上运行 x86 应用程序。

它是新的和专有的，但它确实存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T13:11:05.673

如果您的驱动程序是内核对象，则没有模拟器（据我所知）能够在 ARM 内核中运行 x86 内核代码。如果您的“驱动程序”实际上是在通用驱动程序（v4l2 等）之上入侵的用户空间库，那么您可能对这里提到的 QEMU 或 Exagear 感到幸运。附带说明一下，您可能最终也会使用 x86 应用程序软件，因为 QEMU 或 Exagear 开箱即用不支持从 ARM 代码调用 x86 库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T21:04:01.733

有关详细信息，请参阅以下答案。它列出了尝试自动执行此类翻译时可能遇到的一些问题：

[将目标文件转换为另一个架构](https://stackoverflow.com/questions/14091579/convert-object-file-to-another-architecture/14114498#14114498)

# php - 将来自 Latin1_General_CI_AI 的 PHP MSSQL 查询的结果转换为可读字符串

> ID：14219844
> 
> 赞同：0
> 
> 时间：2013-01-08T16:42:02.203
> 
> 标签：php, sql-server, select, encoding, collation

我正在从 apache 服务器查询 MS 服务器上的 CRM2008 数据库。

我正在尝试从我在数据库上创建的视图中获取联系人 ID。

我返回结果很好，但它不是？编码的？我想要的方式。

如何将查询的结果转换为可读的内容（由我和我的代码）。

```
<?php

ini_set('mssql.charset', 'UTF-8');

//connect
$dbconn = mssql_connect($Server, $User, $Pass)
or die("Couldn't connect to SQL Server on $Server");

//select
$selected = mssql_select_db($DB)
or die("Couldn't open database $myDB");

$query = " select contactid from V_UserDetails where emailaddress1 =
'me@you.com' ";

$result = mssql_query($query);

//grab it
while ($row = mssql_fetch_array($result)) 
{
$user_custid = ($row['contactid']);
}

echo "<b>customer ID:</b> " . $user_custid . "<br />"; 
```

输出：

```
customer ID: &<Ǆ���h���" 
```

而不是必需的：

```
customer ID: 234554345jhg54j34hg54jhg43jh5g34jhg5jhg3jhg34jg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T21:00:27.347

$data=iconv("UTF-8", "ISO-8859-9", $data);

ISO-8859-9//改变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:06:12.173

该字段是唯一标识符。在选择查询中，我将其更改为

```
$query = " select CONVERT(VARCHAR(36), contactid) from V_UserDetails where emailaddress1 =
'me@you.com' "; 
```

这就像预期的那样从数据库中拉出来！排序！

# css - Bootstrap 将跨度分配给自定义 CSS id/class？

> ID：14219849
> 
> 赞同：0
> 
> 时间：2013-01-08T16:42:28.890
> 
> 标签：css, twitter-bootstrap

如何创建一个等于 span4 的 CSS ID #sidebar？我的意思是我可以这样做`<div id="sidebar" class="span4">`，但我更愿意通过不键入 span4 将其抽象到#sidebar 中，也不必在#sidebar 中手动指定宽度尺寸。

仅使用纯 CSS 是否可能？

**编辑**：在这个问题上找到了一篇很棒的文章：[请停止在 HTML 中嵌入 Bootstrap 类](http://ruby.bvision.com/blog/please-stop-embedding-bootstrap-classes-in-your-html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:53:47.713

不，仅使用 css 是不可能的。

另一种解决方案是自定义构建引导程序。您可以添加自定义`less`样式并从中构建引导 css。
前任

```
#sidebar {
    .span4;
} 
```

您需要做的是
1\. 克隆引导存储库
2.`custom.less`在`less`目录下
添加文件 3.`custom.less`在文件底部添加`bootstrap.less`文件
4.使用[Cruch](http://crunchapp.net/)`bootstrap.less`之类的工具编译文件！ 5.代替默认文件使用自定义文件
`bootstrap.css`

# kendo-ui - Kendo-ui 模板语法产生大写文本

> ID：14219851
> 
> 赞同：0
> 
> 时间：2013-01-08T16:42:32.587
> 
> 标签：kendo-ui

当使用 Kendo UI 模板语法插入 JavaScript 文字值时，它会生成大写文本。例如，以下内容：

```
#= "Time" # 
```

在呈现 HTML 时将“时间”转换为“时间”。

为什么会这样？如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:20:44.523

我无法使用以下代码重现此类行为：

```
kendo.template('#= "time test" #')({}) 
```

无论如何，您不需要将这些字符串放在 #= # 表达式中 - 通常您想要评估变量。

这是您的代码的[jsbin](http://jsbin.com/ixenik/2/edit)。

# ruby - XSLT：将嵌套的 XML 转换为 Ruby 代码

> ID：14219852
> 
> 赞同：0
> 
> 时间：2013-01-08T16:42:35.127
> 
> 标签：ruby, xml, xslt, code-generation

我有几个 XML 文件需要为其生成 Ruby 代码。我拥有的XML结构如下：

```
<acronym_list> 
   xmlns="http://www.example.com/xsds" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
   xsi:schemaLocation="http://www.example.com/xsds           
                       http://www.example.com/xsds/acronyms.xsd">
 <item>
   <metadata>
     <release>...</release>
     <id>...</id>
     <checkdigit>...<checkdigit>
     <status>...</status>
     <date_added>...</date_added>
     <date_modified>...</date_modified>
     <language>...</language>
     <license_url>...</license_url>
   </metadata>
   <info>
     <name>...</name>
   </info>
 </item>
</acronym_list> 
```

在这种情况下，我们谈论的是首字母缩略词。对于`item`列表中的每个首字母缩写词，元素（及其子元素）都会重复。我也有几个具有相似结构的文件，其中`info`元素有更多的孩子。

我试图摆脱的 Ruby 代码如下所示：

```
Module acronym_list
    def self.included(other)
        include SAXMachine
        SAXMachine.configure(other) do |c|
          c.element :metadata, :class => metadata
          c.element :info, :class => info
        end
    end

    class metadata
       include SAXMachine
       c.element :release
       c.element :id
       c.element :checkdigit
       c.element :status
       c.element :date_added
       c.element :date_modified
       c.element :language
       c.element :license_url
    end

    class info
       include SAXMachine
       c.element :name
    end           
end 
```

我尝试解析的其他 XML 文件也遵循相同的模式。我已经设法让第一部分使用模块声明，但我不知道足够的 XSLT 来获得其余部分。

有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:56:57.107

我不知道 ruby​​ 语法，所以我不确定缩进或空格是否重要，但与样式表有关

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:acs="http://www.example.com/xsds"
  exclude-result-prefixes="acs">

<xsl:output method="text"/>
<xsl:strip-space elements="*"/>

<xsl:template match="acs:acronym_list">
Module <xsl:value-of select="local-name()"/>
  def self.included(other)
     include SAXMachine
     SAXMachine.configure(other) do |c|
       <xsl:apply-templates select="acs:item/acs:*" mode="config"/>
     end
  end

  <xsl:apply-templates select="acs:item/acs:*" mode="class"/>
end
</xsl:template>

<xsl:template match="acs:item/acs:*" mode="config">
        c.element :<xsl:value-of select="local-name()"/>, :class => <xsl:value-of select="local-name()"/>
</xsl:template>  

<xsl:template match="acs:item/acs:*" mode="class">
  class <xsl:value-of select="local-name()"/>
    include SAXMachine
    <xsl:apply-templates mode="class"/>
  end
</xsl:template>

<xsl:template match="acs:item/acs:*/acs:*" mode="class">
    c.element :<xsl:value-of select="local-name()"/>
</xsl:template>

</xsl:stylesheet> 
```

Saxon 6.5.5 转换输入

```
<acronym_list
   xmlns="http://www.example.com/xsds" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
   xsi:schemaLocation="http://www.example.com/xsds           
                       http://www.example.com/xsds/acronyms.xsd">
 <item>
   <metadata>
     <release>...</release>
     <id>...</id>
     <checkdigit>...</checkdigit>
     <status>...</status>
     <date_added>...</date_added>
     <date_modified>...</date_modified>
     <language>...</language>
     <license_url>...</license_url>
   </metadata>
   <info>
     <name>...</name>
   </info>
 </item>
</acronym_list> 
```

进入输出

```
Module acronym_list
  def self.included(other)
     include SAXMachine
     SAXMachine.configure(other) do |c|

        c.element :metadata, :class => metadata
        c.element :info, :class => info
     end
  end

  class metadata
    include SAXMachine

    c.element :release
    c.element :id
    c.element :checkdigit
    c.element :status
    c.element :date_added
    c.element :date_modified
    c.element :language
    c.element :license_url
  end

  class info
    include SAXMachine

    c.element :name
  end

end 
```

# c# - 使用自定义 IComparer 对 DataGridView 进行排序时出现 ArgumentOutOfRangeException

> ID：14219859
> 
> 赞同：0
> 
> 时间：2013-01-08T16:42:50.110
> 
> 标签：c#, sorting, datagridview, indexoutofboundsexception

## 设置

我有一段代码使用自定义 IComparer 对 DataGridView 进行排序：

```
public class CustomComparer: IComparer
{
    public int Compare(object x, object y)
    {
        DataGridViewRow row1 = (DataGridViewRow)x;
        DataGridViewRow row2 = (DataGridViewRow)y;

        if (row1.ReadOnly && row2.ReadOnly)
        {
            return 0;
        }
        else if (row1.ReadOnly && !row2.ReadOnly)
        {
            return 1;
        }
        else
        {
            return -1;
        }
} 
```

## 问题

奇怪的是，当我执行以下行时（填充行之后）：

```
grid.Sort(new CustomComparer()); 
```

我收到 ArgumentOutOfRangeException 消息“索引超出范围。参数：索引”。

## 更多事实

进一步调查发现：

*   我正在排序的 DataGridView*上没有*BindingSource - 已手动添加行。
*   错误的堆栈跟踪只有一级深 - 它发生在 mscorlib 的 InternalDictionary 上
*   奇怪的事实 #1 - 只有在任何时候，我的自定义比较器对其任何比较都返回 -1 时才会发生这种情况
*   如果我将 Sort 方法更改为不再使用我的 CustomComparer，则不会引发异常。

## 解决方法

最后一个事实导致我重写了 Compare() 方法以遵循 .NET 的 CompareTo 方法：

```
DataGridViewRow row1 = (DataGridViewRow)x;
DataGridViewRow row2 = (DataGridViewRow)y;

return row1.ReadOnly.CompareTo(row2.ReadOnly); 
```

这神秘地**起作用了**。不再抛出异常。

因此，尽管我有一个解决方法，但我想知道是否有人知道为什么这可能是一个修复，以及问题可能是什么。我查看了 CompareTo 的实现，*它还*返回 -1 ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:02:29.510

juharr 是对的，但这就是*为什么*他是对的：

您的实现`Compare`不是对称的，这意味着如果`row1.ReadOnly == false`并且`row2.ReadOnly == false`您返回，*则*`-1`意味着“`row1`小于”。如果您使用相同的值进行比较，则变为*小于*。这可能会混淆需要对称的排序算法。 *`row2``row2` *`row1``Compare`**

 **正确的比较应该是：

```
 if (row1.ReadOnly == row2.ReadOnly)  // change && to ==
    {
        return 0;
    }
    else if (row1.ReadOnly && !row2.ReadOnly)
    {
        return 1;
    }
    else
    {
        return -1;
    } 
```

这很可能`bool.CompareTo(bool)`会返回，这就是为什么您的“解决方法”（我认为这是一个更好的解决方案）有效的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:51:42.167

问题是`-1`当两者都有时`ReadOnly`你正在返回`false`。在这种情况下你应该返回`0`。

只需将您的第一个 if 语句更改为

```
 if((row1.ReadOnly && row2.ReadOnly) || !(row1.ReadOnly || row2.ReadOnly)) 
```**

# java - JPanel：无法获取 JPanel 的宽度

> ID：14219862
> 
> 赞同：1
> 
> 时间：2013-01-08T16:43:04.453
> 
> 标签：java, swing, jpanel, gridbaglayout

请看下面的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TestForm extends JFrame
{
    private JLabel firstLabel, secondLabel;

    private JTextField firstTxt, secondTxt;

    private GridBagLayout mainLayout = new GridBagLayout();
    private GridBagConstraints mainCons = new GridBagConstraints();
    private JPanel centerPanel;

      public TestForm()
      {
          this.setLayout(mainLayout);
        //Declaring instance variables  
        firstLabel = new JLabel("First: ");
        secondLabel = new JLabel("Second: ");

        firstTxt = new JTextField(7);
        secondTxt = new JTextField(7);

        mainCons.anchor = GridBagConstraints.WEST;
        mainCons.weightx = 1;
        mainCons.gridy = 2;
        mainCons.gridx = 1;
        mainCons.insets = new Insets(15, 0, 0, 0);
        this.add(createCenterPanel(), mainCons);

        System.out.println("Center Panel Width: "+centerPanel.getWidth());        
        this.setTitle("The Test Form");
        this.pack();
        this.setLocationRelativeTo(null);
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    private JPanel createCenterPanel()
    {
        centerPanel = new JPanel();

        GridBagLayout gbl = new GridBagLayout();
        GridBagConstraints gbc = new GridBagConstraints();

        centerPanel.setLayout(gbl);

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(firstLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(firstTxt,gbc);

        gbc.gridx = 3;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,10,0,0);
        centerPanel.add(secondLabel,gbc);

        gbc.gridx = 4;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,-10,0,0);
        centerPanel.add(secondTxt,gbc);

        centerPanel.setBorder(BorderFactory.createTitledBorder("The Testing Form"));
        centerPanel.setPreferredSize(centerPanel.getPreferredSize());
        centerPanel.validate();

        System.out.println("Width is: "+centerPanel.getWidth());
        System.out.println("Width is: "+centerPanel.getHeight());

        return centerPanel;

    }

    public static void main(String[]args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            new TestForm();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

我正在尝试获取`centerPanel`2 个位置的宽度。但在这两种情况下，我都得到 0 作为答案！我必须以某种方式获取宽度和高度，因为 southPanel（此处未包括）将使用这些值，其中一些会降低到高度。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:48:05.107

`pack()`在或被`setSize()`调用之前宽度为0 。`pack()`您可以在调用后获取宽度并使用它

或者

定义你自己的`LayoutManager`使用宽度作为另一个布局部分的高度（southPanel）

# python - multiprocessing.manager 问题 sys.args

> ID：14219864
> 
> 赞同：3
> 
> 时间：2013-01-08T16:43:22.060
> 
> 标签：python, windows, windows-services, multiprocessing, python-multiprocessing

我在一个多处理的小型 Windows 服务应用程序中运行以下 python 代码行。

```
multiprocessing.Manager() 
```

问题是在运行 Windows 服务时模块 sys 设置中似乎没有属性 argv。因此，我在 python 多处理分叉库中出现以下错误。我希望有人能够对这个问题有所了解。

问题的堆栈跟踪（在 Windows 服务中运行 multiprocessing.Manager 时）：

```
 File "C:\python27\lib\multiprocessing\__init__.py", line 99, in Manager
    m.start()
  File "C:\python27\lib\multiprocessing\managers.py", line 524, in start
    self._process.start()
  File "C:\python27\lib\multiprocessing\process.py", line 130, in start
    self._popen = Popen(self)
  File "C:\python27\lib\multiprocessing\forking.py", line 252, in __init__
    cmd = get_command_line() + [rhandle]
  File "C:\python27\lib\multiprocessing\forking.py", line 339, in get_command_line
    if process.current_process()._identity==() and is_forking(sys.argv):
AttributeError: 'module' object has no attribute 'argv 
```

**更新**

我的问题的一种可能的解决方案是，`sys.argv`如果在运行时未设置该值，则我手动设置该值，但这似乎非常不合pythonic。但可能是唯一的解决方案。stackoverflow 的人是怎么想的？

```
if not hastattr(sys, 'argv'):
    sys.argv = [] 
```

但是，这导致我遇到了 multiprocessing.manager 的一个新问题，其中代码中出现了意外的 EOFError。

```
 File "C:\python27\lib\multiprocessing\__init__.py", line 99, in Manager
    m.start()
  File "C:\python27\lib\multiprocessing\managers.py", line 528, in start
    self._address = reader.recv()
  EOFError 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:25:04.890

由于设置`sys.argv = []`不起作用，如果有脚本名称，您可能可以使用 do`sys.argv = ['scriptname']`或 just `sys.argv = ['']`。`sys`如果您运行 python，导入然后查看，则后者是您得到的`sys.argv`，例如，

```
~$ python
>>> import sys
>>> sys.argv
[''] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:33:33.480

在 Python 初始化之后调用这个函数：

```
PySys_SetArgv(argc, argv); 
```

解释器无法以其他方式访问 argc/argv，而是从 main() 显式传递它们。

# scala - 这种尾递归方法是如何迭代的？

> ID：14219867
> 
> 赞同：2
> 
> 时间：2013-01-08T16:43:28.917
> 
> 标签：scala, recursion, tail-recursion

在下面的 Scala 方法中，List 是如何被`xs`方法遍历的`nth`？`xs.tail`被递归调用，但为什么尾部并不总是相同的值，因为`def tail`在 trait 中`List`只返回参数化类型的列表？

```
object nth {

  def nth[T](n: Int, xs: List[T]): T =
    if (xs.isEmpty) throw new IndexOutOfBoundsException
    else if (n == 0) xs.head
    else {
        nth(n - 1, xs.tail)
        }                                 //> nth: [T](n: Int, xs: week4.List[T])T
  val list = new Cons(1, new Cons(2, new Cons(3, new Nil)))
  nth(2 , list)   > res0: Int=3   
}

trait List[T] {
  def isEmpty: Boolean
  def head: T
  def tail: List[T]
}
class Cons[T](val head: T, val tail: List[T]) extends List[T]{
  def isEmpty = false
}
class Nil[T] extends List[T]{
  def isEmpty = true
  def head : Nothing = throw new NoSuchElementException("Nil.head")
  def tail : Nothing = throw new NoSuchElementException("Nil.tail")
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T17:18:59.783

是`List`递归结构。请参阅[关于 Cons 的 Wikipedia 文章](http://en.wikipedia.org/wiki/Cons)。这是来自那篇文章：

![在此处输入图像描述](../Images/c08fafe974b4ff344d135de30ab94d79.png)

您要开始的结构是`new Cons(42, new Cons(69, new Cons(613, new Nil)))`. 尽管该`tail`方法还返回 的实例`List[Int]`，但它*不是同一个列表*，而是指向右箭头之一的子列表。

因此，如果在您的示例中，您将从`Cons(1, Cons(2, Cons(3, Nil)))`, let `n`be开始`2`。

*   在函数的**第**一次迭代中`nth`，我们问：是`Cons(1, Cons(2, Cons(3, Nil)))`空的吗？不！是`n == 0`吗？不，所以用尾巴递归并`n`递减。
*   在**第二**次迭代中，我们问：是`Cons(2, Cons(3, Nil))`空的（这又是 a `List[Int]`）？不，是`n == 0`吗？不（`1`现在是）。进入下一个递归。
*   在**第三**次迭代中，我们问：是`Cons(3, Nil)`空的吗？不，是`n == 0`。是的！因此，返回其头部`Cons(3, Nil)`为`3`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T18:36:51.410

您已经递归地定义了 List 类型。这意味着，您正在使用另一个列表来创建新列表。自然你必须以某种方式创建第一个 List，这就是你定义 Nil 的原因。

因此，您可以创建一个没有其他列表的空列表：

```
val empty = new Nil[Int]                  //> empty  : Nil[Int] = Nil@1f93f8 
```

并且您可以使用已创建的列表创建非空列表，如果您有一个 n-1 大小的列表，您可以创建一个 n 大小的列表，即新列表与旧列表（尾部）相同，加上新列表元素（头部）：

```
val oneSize = new Cons(1, empty)          //> oneSize  : Cons[Int] = Cons@b159eb 
```

如果你检查 oneSize 的尾巴，结果证明它是同一个对象`empty`

```
oneSize.tail                              //> res0: List[Int] = Nil@1f93f8 
```

让我们使用 oneSize 列表定义一个包含 2 个元素的列表：

```
val twoSize = new Cons(2, oneSize)        //> twoSize  : Cons[Int] = Cons@18654ae 
```

检查尾部，我们得到 oneSize 列表：

```
twoSize.tail                              //> res1: List[Int] = Cons@b159eb 
```

所以再次使用 tail 我们必须像以前一样再次获取空列表，实际上：

```
twoSize.tail.tail                         //> res2: List[Int] = Nil@1f93f8 
```

等等，我们刚刚迭代了列表，就像你的第 n 个函数一样。

# math - 给定太阳的位置（方位角和仰角）以及纬度和经度，计算日期和时间

> ID：14219868
> 
> 赞同：7
> 
> 时间：2013-01-08T16:43:34.400
> 
> 标签：math, astronomy, azimuth

与这个关于查找给定日期和坐标的太阳方位角和仰角的非常有用的[问题相关。](https://stackoverflow.com/questions/8708048/position-of-the-sun-given-time-of-day-latitude-and-longitude)我希望找到相反的：时间和日期太阳将在天空的那个位置。

因此，我想知道是否有人可以帮助解决现有公式或修改链接到的公式。

我目前的想法是采用两个范围，两者都有几度的变化，一个用于方位角（120-123 度）和仰角（18-21 度）。然后编写一个算法来遍历所有天/时间，并检查给定范围是否存在于当天的某个时间。循环这些天并使用附加的算法并不能完全保持大 O 小，也不会是最好的性能。

任何帮助或提示，请。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-29T16:31:34.203

这里有一些有用的东西（请参阅链接 - 特别是 [12]-[15]）

[https://en.wikipedia.org/wiki/Position_of_the_Sun](https://en.wikipedia.org/wiki/Position_of_the_Sun)

一个问题是，如果您使用它来确定诸如“哪几天太阳会直接在公元前千山巨石阵的‘脚后石’上方”之类的事情，那么除了岁差和/或之外，还会有很多错误来源章动（地震改变了地球的自转周期，当太阳接近地平线时，你会得到一些显着的折射）。还有[http://www.stargazing.net/kepler/sun.html](http://www.stargazing.net/kepler/sun.html)。但是，由于太阳处于特定位置的日子和时间很多，因此猜测日期和时间窗口然后迭代地进行牛顿式近似的方法可能是最好的。也许如果你能提供更多关于你为什么试图找到答案的信息（即“橡树的影子什么时候落在埋藏的宝藏上......”），

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T09:16:02.460

经过一番思考，你可以得到这样的日期：

```
if (ang>=0.0) date = (21.March)    +ang*(21.June    -21.March    )/(23.4 degrees);
else          date = (21.September)-ang*(21.December-21.September)/(23.4 degrees); 
```

*   日期非常简单
*   ang 是黄道平面和地球赤道平面之间的当前角度
*   **必须在白天测量！！！**
*   **如果您在天文中午**测量太阳高度（在您的纬度），那么：

    ```
    ang = height - (90 degrees - your latitude) 
    ```

*   转换任何时候测量的高度，您需要应用矢量数学
*   参见计算两个平面之间的角度
*   看图片更清楚

![年内黄道](../Images/9a4ae6595836966edd95802fcd085a54.png) 要计算白天的时间，您需要寻找

*   标准 (UTC) 时间和恒星时间之间的转换
*   还有一个好主意是寻找太阳能时钟设计，其中包括以几何方式进行的所有计算。

不要忘记这种方法不包括岁差，章动......

*   如果你考虑到这一点，那么这个任务将变得无法解决，因为太阳天穹路径交叉导致任何给定太阳位置的多个解决方案
*   幸运的是岁差太慢，我们可以跳过几千年
*   章动半径小（仅影响精度）

# c# - 一种 ; 在 C# 中没有声明

> ID：14219869
> 
> 赞同：6
> 
> 时间：2013-01-08T16:43:35.273
> 
> 标签：c#, .net, visual-studio-2010

我正在查看 C# 中的代码示例。前面没有`;`任何声明。我以为是错字。我试图用`;`. 它编译得很好。`;`没有任何代码语句有什么用？

我正在使用 VS 2010、C# 和 .Net 4.0

```
 private void CheckSmcOverride(PatLiverSmc smc)
  {
     ;
     if (smc.SmcOverride && smc.Smc != null 
              && smc.Smc.Value < LiverSmcConst.SMC_OVERRIDE_POINT)
     {
          smc.Smc = 10;
          _logger.DebugFormat("CheckSmcOverride: Override SMC {0}", smc.Smc);
     }
  } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T16:47:21.363

C# 中的分号只是表示语句结束。空语句或仅 a`;`本身是有效的。

您可以在 C# 中的任何函数内单独一行包含以下内容，它应该可以正常编译：

```
; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; ; 
```

在同一主题上，但与手头的问题半不同的是，是一组空的花括号，`{ }`. 这些表示“代码块”，但在代码中几乎任何地方都有效。同样，您可以在一行中包含类似以下内容，它仍然可以正常编译：

```
{ } { ;;;;;;;;;; } { } 
```

最后，空语句和空代码块都编译为“没什么可看的，伙计们，继续前进”，并且*在大多数情况下*，可以从代码中删除而不会产生任何后果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T16:47:07.183

作为 ac# 开发人员，我使用“空语句”

```
; 
```

（作为评论请求的有用案例）

当我有一个多行 lambda 并且我想检查评估的最后一行时，即

```
list.ForEach(x=>
              {
                x.result = x.Value * x.AnotherValue;
                ; // otherwise I can't ever see these as you can't break on the end brace of an anonymous function
              }) 
```

作为一种在评估之前的行之后在某些代码中断点的方法，即

```
void SomeFunct()
{
    int a = someOtherFunct();
    ; //I want a breakpoint here but...
    //there is some huge code segment that will get skipped before I can breakpoint
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-08T16:46:10.307

这是一个什么都不做的声明。通常这是没有意义的，可以直接删除，但有时需要声明，而你真的不希望发生任何事情。

有时你会看到循环会导致副作用，因此不需要正文：

```
int count = 0;
while(isTheRightNumber(count++))
    ; 
```

就我个人而言，我不喜欢这样的代码示例并且不鼓励这种做法，因为它们往往比具有无副作用条件的循环更难理解。使用一组空括号会更清楚一些，包括相关注释，例如：

```
int count = 0;
while(isTheRightNumber(count++)) 
    { } //empty by design 
```

另一个例子是将`for`循环用于无限循环的模式：

```
for(;;)
{
    //stuff
} 
```

本质上是一样的：

```
while(true)
{
    //stuff
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T16:47:00.600

这是[一句空话](http://msdn.microsoft.com/en-us/library/aa664739%28v=vs.71%29.aspx)。我从未使用过它，但它存在于多种语言中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-08T16:48:42.997

分号(;) 表示语句的结束。因此，如果您只添加一个分号而没有任何内容...这意味着它是空语句

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T16:50:25.567

当语句需要一个块但您不希望它做任何事情时，有时会使用空语句。

例如：

```
for(i=0; array[i]!=null; i++)
    ; 
```

或者对于没有大括号的嵌套 if then elses：

```
// don't really do this kids
if(cond1)
  if(cond2)
    doit();
  else
    ;
else
  dont(); 
```

有时用于“如果”清晰：

```
if(somecomplicatedconditionisnotfalseinverted()) // <-- this is already complicated enough, let's not ! that.
  ; // do nothing
else {
  ohnoes();
} 
```

但是在您的示例中，它在为发布而构建时完全没有任何作用，而在为调试而构建时只是添加了一个 nop，因此您可以在其上放置一个断点。

# php - 在相对容器中绝对定位时如何避免div重叠

> ID：14219874
> 
> 赞同：0
> 
> 时间：2013-01-08T16:43:56.010
> 
> 标签：php, jquery, css, css-position

HTML

```
<td title='10:00 AM-wed 09-01-2013'><div style="position:relative;height:60px">
        <div style="position:absolute;top:00px;" class='entry'>Demo patient</div>
        <div style="position:absolute;top:20px;" class='entry'>New patient</div>
        <div style="position:absolute;top:40px;" class='entry'>fool patient</div>
</div></td> 
```

图片

![在此处输入图像描述](../Images/cc83726b066c66ad9f2122737c1f65ce.png)

用于生成条目的 PHP

```
echo"<div style='position:absolute;top:".date("i", strtotime($data['time_booked']))."px;'>{$data['name']}</div>"; 
```

我做了一个简单的 jquery/php 日程安排（日历），如上所示。

如您所见，我有父 div 高度：60px（每分钟 1px）和相对位置，然后我根据其最小值定位子 div 绝对值（例如：演示患者是 10:00 所以顶部：00px，傻瓜患者是 10:40 所以它的顶部：40px）。这工作正常，除非有重叠的时间。例如，如果我同时有 2 个条目，那么两者将被放置在彼此之上。

**问题**我怎样才能避免这种情况？像谷歌日历一样，如果存在 2 个预订，它们会并排移动，而不是彼此重叠。

## 谢谢

**问题解决了：**

使用[这个插件](http://brandonaaron.net/code/overlaps/demos)和下面的代码

```
var n=$('div.entry').overlaps().length;var vol=(100/n);var round=0;
    $('div.entry').overlaps().each(function(){
        $(this).css('left',((vol-1)*round)+'%');
        $(this).css('width',(vol-n)+'%')
        round=round+1;
    }); 
```

现在它可以完美地作为谷歌日历工作：D .. 谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:57:34.417

我会将您的输出更改为以下内容：

```
<td title='10:00 AM-wed 09-01-2013'><div style="position:relative;height:60px">
    <div style="position:absolute;top:00px;"><span>Demo patient</span></div>
    <div style="position:absolute;top:20px;"><span>New patient</span><span>2nd patient at this time</span></div>
    <div style="position:absolute;top:40px;"><span>fool patient</span></div>
</div></td> 
```

然后它们会并排漂浮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:57:42.353

如果你想要一个 jquery 解决方案来检查是否有任何元素重叠，那么你可以使用这个插件[brandonaaron/jquery-overlaps](https://github.com/brandonaaron/jquery-overlaps)。您可以对每个元素进行检查以检查是否有任何重叠，然后执行将在父元素中重新定位事件的功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:52:12.197

您希望解决方案是什么？您希望这些项目彼此*紧挨**着*放置还是相邻放置？无论如何，您可能只需要稍微调整一下您的位置，以考虑重叠的可能性。

 *不要使用原始时间来定位它们，而是先做重叠分辨率，看看哪些元素重叠，给它们一个相对位置，即：

```
(0,0)
(1,0)   (1,1)  // overlap here
(2,0) 
```

然后将相对位置转换为像素坐标。您现在还应该知道您的列应该有多高以适合所有元素。*

# c# - LINQ 中的连接/联合表

> ID：14219880
> 
> 赞同：5
> 
> 时间：2013-01-08T16:44:05.673
> 
> 标签：c#, linq

当前的这个项目更像是一个更大项目的概念证明。我有两个“表”（表示为下面的列表），`CatList`并且`DogList`，它们具有相同的列结构。我希望能够`Concat`或`Union`两者并使用对结果集执行查询`LINQ`。有人告诉我，通过实施，`interfaces`我将能够取得这些成果。

这是我到目前为止所拥有的：

```
 static void Main(string[] args)
    {
        System.Console.Write("Hello World\n");
        Dog Dog1 = new Dog { name = "A", age = 1 };
        Dog Dog2 = new Dog { name = "B", age = 2 };
        Cat Cat1 = new Cat { name = "C", age = 3 };
        Cat Cat2 = new Cat { name = "D", age = 4 };

        List<Dog> DogList = new List<Dog>();
        List<Cat> CatList = new List<Cat>();
        DogList.Add(Dog1);
        DogList.Add(Dog2);
        CatList.Add(Cat1);
        CatList.Add(Cat2);

        var result = DogList
                .Concat(CatList);

    }
}

public interface iAnimal
{
    string name { get; set; }
    int age { get; set; }
}
public class Dog :iAnimal
{
    public string name { get; set; }
    public int age { get; set; }
}
public class Cat:iAnimal
{
    public string name { get; set; }
    public int age { get; set; }
} 
```

我可以使用类似的东西访问我创建的任何对象的任何数据成员`System.Console.Write(Dog1.name);`，所以我认为我的接口实现是正确的。为了有效地合并/合并我的列表，我的 LINQ 语句中需要更改的内容。

`C#`一般来说，我对面向对象编程相当陌生，所以请根据我的知识水平提供您的答案。

谢谢

**编辑** 我很抱歉，因为我忘记在当前代码中包含我收到的错误消息。

```
Error   1   'System.Collections.Generic.List<InterfaceTest.Dog>' does not contain a definition for 'Concat' and the best extension method overload 'System.Linq.ParallelEnumerable.Concat<TSource>(System.Linq.ParallelQuery<TSource>, System.Collections.Generic.IEnumerable<TSource>)' has some invalid arguments

Error   2   Instance argument: cannot convert from 'System.Collections.Generic.List<InterfaceTest.Dog>' to 'System.Linq.ParallelQuery<InterfaceTest.Cat>' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T16:49:13.973

问题是编译器无法通过连接 a`List<Dog>`和 a来确定`List<Cat>`它应该生成`iAnimal`s 的集合。默认情况下，它会看到 a`List<Dog>`并期望以下集合也是 of 的集合`Dog`。

`iAnimal`您可以通过向 提供通用参数来明确告诉将所有内容视为this `Concat`，即

```
var result = DogList.Concat<iAnimal>(CatList); 
```

然后你会得到一个`result`type `IEnumerable<iAnimal>`。

编辑：如果你被困在 .NET 3.5 上，你需要类似的东西

```
var result = DogList.Cast<IAnimal>().Concat(CatList.Cast<IAnimal>()); 
```

由于 3.5 无法自动转换`collection of something that inherits iAnimal`为`collection of iAnimal`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:48:32.957

通用列表来自不同的类型（狗和猫），您必须在连接之前将它们“转换”到目标接口：

```
var list1 = DogList.Cast<IAnimal>();
var list2 = CatList.Cast<IAnimal>();

var bothLists = list1.Concat(list2); //optional .ToList() 
```

# ruby - 从 Ruby 类返回对象

> ID：14219882
> 
> 赞同：1
> 
> 时间：2013-01-08T16:44:09.233
> 
> 标签：ruby, class

我确信我以前做过这个工作！

我有以下课程。标题字符串在类中创建，fname 和 lname 字符串作为参数传入。但是，我似乎永远无法让@title 对象返回 nil 以外的任何内容。

我在这里做错了什么？

```
class Person
  attr_accessor :fname, :lname, :title

  def initialize(fname, lname)
    @fname = fname
    @lname = lname
    @title = title
  end

  def string1
    @lname + ", " + @fname
  end

  @title = "Director"

  def string2
    @title
  end

end

p = Person.new("Yukihiro", "Matsumoto")

p p.string1
p p.string2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:50:16.770

在您的类的上下文中，`@title`指的是类实例变量。在实例方法的上下文中，`@title`指的是实例变量。你把这两个弄混了。

如果您需要应用某种默认值，那么您需要的是一个惰性初始化器：

```
def title
  @title ||= "Director"
end 
```

或者更好的是，首先填充它。解决此问题的一种方法是增加您的初始化方法：

```
def initialize(fname, lname, title = nil)
  @fname = fname
  @lname = lname
  @title = title || "Director"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:47:41.753

您没有传递`title`给构造函数。你需要有一些类似的东西

```
def initialize(fname, lname, title)
    @fname = fname
    @lname = lname
    @title = title
end 
```

并调用它

```
p = Person.new("Yukihiro", "Matsumoto", "sensei") 
```

该行在`@title = "Director"`类定义期间执行，它在类`Person`本身上设置变量，而不是在构造类的实例期间执行，这就是为什么在`@title`您创建的新对象中没有将实例变量设置为“Director”的原因与`Person.new`.

事实上，这里是如何表明这是正在发生的事情。添加此方法

```
class Person
    def self.string3
        @title
    end
end 
```

添加一个类方法来`Person`获取在类定义期间设置的类的实例变量：

```
>> p Person.string3
"Director" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:51:04.757

以下代码：

```
class Person
  attr_accessor :fname, :lname

  def initialize(fname, lname)
    @fname = fname
    @lname = lname
  end

  def string1
    @lname + ", " + @fname
  end

  def title
    @@title
  end

  @@title = "Director"

  def string2
    @@title
  end

end

p = Person.new("Yukihiro", "Matsumoto")

p p.string1
p p.string2 
```

使用 Ruby 1.9.3 运行时给出以下输出：

```
"Matsumoto, Yukihiro"
"Director" 
```

我假设您希望为您创建的所有对象保持相同的标题。如果不是，那么[iamnotmaynard](https://stackoverflow.com/users/1735262/iamnotmaynard)的答案就是您所追求的。

# ios - IOS中的HTML 5设计屏幕

> ID：14219883
> 
> 赞同：0
> 
> 时间：2013-01-08T16:44:10.767
> 
> 标签：ios, objective-c, xcode, html

是否可以将 HTML 5 与我的本机应用程序混合使用？我想用 Objective-c 制作一个页面，用 HTML 5 制作另一个页面。如果是这样，有人可以指导正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:56:14.230

对的，这是可能的。几周前我做了一个测试。在您的故事板上，您只需拖动一个`WebView`组件，并将其与您的`ViewController.h`界面链接。这是一个混合故事板的示例。首先将`UIToolbar`带有按钮的 拖到上面，然后是`WebView`：

![在此处输入图像描述](../Images/5af1b355699276fcc79cbb52f2dfa8b8.png)

当视图加载（`viewDidLoad`）时，您需要初始化 WebView：

```
- (void) viewDidLoad {
    [super viewDidLoad];

    self.webView.delegate = self;

    NSURL *url = [NSURL URLWithString:@"http://localhost:8080"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    [self.webView loadRequest:request];
} 
```

您可以在 WebView 和 iOS 之间进行通信。[我在这里做了解释](https://stackoverflow.com/a/14182048/1916258)。

此外，如果需要，您可以设置内部 HTTP 服务器。我使用过[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)，它很容易与[CocoaPods](http://cocoapods.org/)一起安装。只需创建一个`Podfile`：

```
platform :ios
pod 'CocoaHTTPServer',  '~> 2.2.1' 
```

和`pod install`项目目录中的命令。

# typescript - 实现大量语言服务

> ID：14219884
> 
> 赞同：4
> 
> 时间：2013-01-08T16:44:10.827
> 
> 标签：typescript, languageservice

阅读*src\services*代码后，似乎这是任何语言服务主机必须满足的接口：

```
//
// Public interface of the host of a language service instance.
//
export interface ILanguageServiceHost extends TypeScript.ILogger {
    getCompilationSettings(): TypeScript.CompilationSettings;
    getScriptCount(): number;
    getScriptId(scriptIndex: number): string;
    getScriptSourceText(scriptIndex: number, start: number, end: number): string;
    getScriptSourceLength(scriptIndex: number): number;
    getScriptIsResident(scriptIndex: number): bool;
    getScriptVersion(scriptIndex: number): number;
    getScriptEditRangeSinceVersion(scriptIndex: number, scriptVersion: number): TypeScript.ScriptEditRange;
} 
```

我找不到任何文档或示例，虽然有些方法是不言自明的，但有些方法不是，特别是：

```
getScriptId()
getScriptIsResident()
getScriptVersion()
getScriptEditRangeSinceVersion() 
```

语言服务 API 是否可以使用？有人可以简要解释上述方法的目的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T18:18:26.727

免责声明：语言服务托管 API 将在未来版本中更改。我不确定变化的全部范围是什么——我预计事情会大体相同，但几乎肯定会有重大变化。

`src\harness\harness.ts`此外，还有用于语言服务单元测试的托管 API 的完整 TypeScript 实现，您可以参考。这是您列出的功能的概念细分：

`getScriptId()`

您需要为每个文件（脚本）返回一个唯一的字符串，但不会因调用而改变。返回脚本的文件名会很好。

`getScriptIsResident()`

编译器有一个不可变的“驻留”文件的概念（例如，lib.d.ts）。常驻状态用于性能原因 - 例如，来自常驻文件的类型被认为是不可变的（这就是为什么当您尝试扩展 lib.d.ts 中定义的类型时在 Visual Studio 中看到奇怪的原因）。你可以在这里安全地返回`false`所有文件，或者如果你知道一个文件是不可变的，你可以返回`true`. 一旦改进的类型检查器上线，“驻留”文件的概念将在编译器的某些未来版本中消失。

`getScriptVersion()`

在这里，您需要返回一个单调递增的数字，只要脚本的源文本发生更改，该数字就会递增。语言服务使用这个数字来确定它是否应该对文件进行重新解析/重新类型检查。

`getScriptEditRangeSinceVersion()`

此函数应返回从现在到指定的先前版本号（见上文）之间发生的编辑范围列表（希望不言自明`getScriptVersion`）。显然这实现起来有点麻烦，但这里允许 return `TypeScript.ScriptEditRange.unknown()`，此时语言服务将对文件进行完全重新解析（显着的性能影响，所以尽量在交互式上下文中谨慎地执行此操作）。

# objective-c - UIImagePickerControllerMediaURL 对于照片总是 nil

> ID：14219885
> 
> 赞同：0
> 
> 时间：2013-01-08T16:44:12.273
> 
> 标签：objective-c, ios, xcode

我无法获取我的应用使用`UIImagePickerController`. 如果捕获了视频，则返回的字典对象`didFinishPickingMediaWithInfo`包含一个`UIImagePickerControllerMediaURL`指向视频文件的值。

如果我拍照，字典对象不包含`UIImagePickerControllerMediaURL`值或`UIImagePickerControllerReferenceURL`值。

谷歌搜索引发了不同的事情，我尝试过但没有成功，包括：

*   将allowEditing设置为YES（也试过NO）
*   在访问信息字典之前关闭模态图像选择器。
*   将 .... 的 info objectForKey 转换`MediaURL`为`NSURL`. 失败了`nil`。
*   将图像选择器上的 mediaTypes 设置为包含`(NSString*)` `kUTTypeImage`和`(NSString*)` `kUTTypeMovie`。

但是信息字典从不包含图像的 URL。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:29:08.560

如文档中所述，`info`是：

> 如果选择了图像，则包含原始图像和编辑图像的字典；或电影的文件系统 URL（如果选择了电影）。该词典还包含任何相关的编辑信息。

因此，如果选择了图像，您将不会获得 URL。您将图像作为 UIImage 获取。

`// Get picked image from info dictionary`

`UIImage *image = info[UIImagePickerControllerOriginalImage];`

`[save the image]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T23:38:03.430

与您的问题有关的一些额外信息：

`UIImagePickerControllerReferenceURL`仅当编辑图像时才设置该值。然后，此键保存原始图像的 URL。从文档中：

> 所选项目的原始版本的资产库 URL。在用户编辑选取的项目后——例如通过裁剪图像或修剪电影——URL 继续指向选取项目的原始版本。

# r - 如何用 R 删除文件？

> ID：14219887
> 
> 赞同：64
> 
> 时间：2013-01-08T16:44:19.597
> 
> 标签：r, file, file-manipulation

> **可能重复：**
> [自动删除 R 中的文件/文件夹](https://stackoverflow.com/questions/9296377/automatically-delete-files-folders-in-r)

我想知道R中是否有办法检查文件是否在我的当前目录中，如果存在则程序将其删除？

我知道其他语言可以直接访问操作系统功能来完成这项任务，但我有点怀疑 R 是否有这种能力。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-01-08T16:54:51.270

怎么样：

```
#Define the file name that will be deleted
fn <- "foo.txt"
#Check its existence
if (file.exists(fn)) {
  #Delete file if it exists
  file.remove(fn)
} 
```

据我所知，这是所有平台上永久的、不可恢复的（即不是“移动到回收站”）......

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-08T16:50:47.047

R 不能安全地暴露给外部用户的原因之一是它提供了对系统设施的完全访问。除了`list.files`,`list.dirs`和`file.remove`函数之外，该`system`函数还允许访问几乎任何可以想象的漏洞利用。

# c++ - 什么是均匀填充不同大小的“桶”的未排序列表的最有效方法

> ID：14219889
> 
> 赞同：6
> 
> 时间：2013-01-08T16:44:24.527
> 
> 标签：c++, algorithm

假设我有一个*未排序*的 s 列表`bucket`。（每个桶都有一个`size`属性。）假设我有一个数量`Q`，我必须尽可能均匀地分布在桶列表中（*即*最小化最大值）。

如果桶*按*递增大小排序，那么解决方案将很明显：完全填满每个桶，比如`buckets[i]`，直到`Q/(buckets.length-i) <= buckets[i]->size`，然后用相同数量填充剩余的桶`Q/(buckets.length-i)`，如图所示：

![灌装桶。](../Images/d87cf3ecbbc947529264bb2ade3838f5.png)

**如果*未对桶进行*排序，解决此问题的最有效方法是什么？**

我只能想到这样的迭代（伪代码）：

```
while Q > 0
    for i in 0..buckets.length-1
        q = Q/(buckets.length-i)
        if q > buckets[i]->size
            q = buckets[i]->size
        buckets[i]->fill(q)
        Q -= q 
```

但我不确定是否有更好的方法，或者对列表进行排序是否会更有效。

（我面临的实际问题还有更多，*例如*，这个“未排序”列表实际上是由一个单独的属性“rank”排序的，它决定了当数量不均匀时哪些桶会得到额外的填充等等。所以，对于例如，要使用*sort-then-fill*方法，我会按存储桶大小和排名对列表进行排序。但是知道这个问题的答案将帮助我找出其余的。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:56:30.753

在许多情况下，如果对数据进行排序，解决方案“如此简单”或“如此有效”，但如果不是，则非常复杂或无效，最好的解决方案通常是先对数据进行排序，然后再执行为简单、有效的解决方案。尽管这意味着您将首先对数据进行排序，但有很多非常好的排序算法可用于几乎任何目的，并且在许多情况下，“首先对数据进行排序，然后应用简单、有效的算法”的总开销to it”仍然低于“不对数据进行排序并对其应用非常复杂、无效的算法”。

您需要按不同键排序的数据这一事实对我来说仅意味着您需要两个列表，每个列表都按不同的标准排序。除非我们在这里谈论几千个桶，否则第二个列表的内存开销很可能不是问题（毕竟两个列表都只包含指向您的桶对象的指针，这意味着每个指针 4/8 个字节，具体取决于如果您有 32 位或 64 位代码）。一个列表具有按大小排序的存储桶，另一个列表具有按“排名”排序的存储桶，当添加问题中描述的新项目时，您使用“按大小排序列表”，同时使用“按排名排序”列表就像你现在已经在使用它一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T17:05:19.570

我认为这可能在线性时间内是可能的，但是我被困在某个点上。也许你可以解决问题，也许不能这样解决。

考虑以下算法。

基于二分查找，我们希望找到未满的*最小桶*。在一个桶列表中找到这样一个桶可能在线性时间内是可能的，但正如我所说，我被困在这里。一旦我们找到那个桶，剩下的就变得微不足道了，因为对于所有较小的桶，我们将它们的大小相加，从要放置的项目总数中减去它，然后除以大于或等于我们刚刚找到的桶的数量.

所以下面是解决这个问题的一个尝试：*没有完全装满的最小桶是多少？*该算法由 QuickSelect 驱动。

选择一个枢轴桶。看看它比我们要找的桶小还是大。（这一步很简单。）

*   如果它更小，则将所有小于或等于该值的桶的大小相加，从项目总数中减去该总和，然后继续搜索包含所有较大桶的集合。

*   如果它更大，我们将不得不做类似的事情，但现在减去放置在所有比这个大的桶中的项目数。*我们不知道要放置在这些桶中的项目数量。这就是问题所在……*但如果我们知道，我们将继续在包含所有较小存储桶的集合上进行搜索。

如果此算法有效，它将在随机枢轴元素的*预期线性时间内*运行（请参阅 QuickSelect）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T17:32:46.363

如果您可以确定 q，填充每个桶的适当最小水平，使总数为 Q，则线性解决方案是明确的：

```
for (bucket b : buckets)
{
    int f = max(b.capacity(), q);
    b.fill(f);
} 
```

所以问题是确定水平 q。

您可以对 q 进行二分搜索。也就是说，我们知道 q 是 和 之间的`min(b.capacity)`整数`max(b.capacity)`。IE：

1.  `q'`从最小（容量）和最大（容量）之间的候选人开始
2.  `Q'`通过桶计算使用产生的总量`q'`
3.  if ( `Q' > Q`) 比重复`q'`减半
4.  if ( `Q' < Q`) 比重复`q'`增加一半
5.  返回`q = q'`

步骤 2 的每一遍都是 O(N)，并且会有 log(L) 遍，其中`L = max(capacity) - min(capacity)`

这比排序时更好`L << N`

一个足够的统计数据是将桶简化为直方图：

```
unordered_set<int,int> bucket_capacity;

for (bucket b : buckets)
    bucket_capacity[b.capacity]++; 
```

这仍然是线性的，但是在最坏的情况下并没有给我们带来太多好处，因为桶可能有不同的大小，但是它限制了通过，`L`所以现在的效率是`O(min(L,N) * logL)`

`L << N`当效率变为 O(LlogL)时，这再次运行良好

**我怀疑以下是正确的，但不是 100%**：在`L >> N`可以证明没有线性解决方案的情况下。首先我们假设我们有一个线性解决方案。然后，我们使用这个解决方案作为一种工具，在线性时间内进行比较排序。已经证明比较排序在线性时间内是不可能的，因此我们的假设一定是错误的，并且没有线性解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T16:54:16.590

另一种想法如下。确定每个桶的平均项目数。然后尝试用该数字填充所有存储桶（通常，并非所有存储桶都可以容纳该数量的项目）。

之后，您有一些剩余的项目要放置在存储桶中（因为并非所有项目都适合上一次迭代）以及一个存储桶列表，其中可以容纳比当前包含的项目更多的项目（在上一次迭代中计算）。

同样，根据要分配的剩余项目数计算要在剩余存储桶上分配的平均项目数。

重复，直到您放置所有项目。

我预计运行时间为`O(n * log n)`，但没有分析它。*它与您的sort-then-fill*方法的运行时间相同，但是，如果您的存储桶只有有限数量的不同尺寸，则预计会更低，例如：有些小，有些很大，有些很大。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T19:43:36.963

在一个步骤中，您从 n 个未排序的有限容量桶、k 个无限桶（您存储 k，而不是这些桶的列表，并且在第一次迭代时 k=0）和一定量的水 w 开始。在 O(n) 时间内，我们将把问题简化为具有 n', k', w' 的另一个实例，其中 n' < c * n 对于常数 c < 1。迭代此过程将解决问题（一旦 n是一个常数，你可以在常数时间内求解它）在线性时间内：n+c*n+c^2*n+...=O(n)。

在所有 n 个有限容量中，选择中位数（即选择一个使得一半容量较高而一半容量较低）。这可以在 O(n) 时间内完成（选择算法）。计算 1) 较低容量和 2) 中值容量乘以较高容量桶的数量（包括无限桶）的总和。

如果它小于 w，您知道您需要将桶装得更高，因此特别是所有容量较低的桶都将被装满。删除它们，从 w 中删除它们的容量总和，您就完成了这次迭代，n'=n/2。

另一方面，如果总和大于 w，则您知道没有桶将被填充到中位容量或更高容量。因此，可以移除所有更高容量的存储桶，并将它们的数量添加到无限存储桶的数量中。w 保持不变。同样，n'=n/2，我们就完成了。

一些简单的细节被跳过（特别是如何处理许多桶具有完全相同容量的情况）以保持简短。最后，您还需要进行一些清理，一旦您知道正确的水位，为每个“无限”（即非满）桶设置它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-08T16:49:33.917

为什么需要对存储桶列表进行排序？只需遍历桶两次。

第一次计算所有尺寸。从那你可以说，“我想要每个桶里有 K 个项目”

不过第二次，把桶装满。

# c# - C# 自定义验证 - 更改 div 边框颜色

> ID：14219893
> 
> 赞同：0
> 
> 时间：2013-01-08T16:44:41.480
> 
> 标签：c#, html, customvalidator

我有一组自定义验证器，可以更改每个文本框或下拉列表的边框颜色。一切都很好。我也在使用 HtmlEditorExtender。我用一个 div 元素包围了它，使它的样式与其他文本框相同（一个 2px 纯灰色）。

如果 HtmlEditorExtender 为空，我的困难是触发自定义验证器以更改 div 的边框。

这是我为文本框调用自定义验证器的方式

```
protected void CustomValidatorNewsText_ServerValidate(object sender, ServerValidateEventArgs args)
    {
        args.IsValid = isValid(tbNewsStandFirst);
    }

protected bool isValid(System.Web.UI.WebControls.TextBox MyBox)
    {
        bool is_valid = MyBox.Text != "";
        MyBox.BorderColor = is_valid ? System.Drawing.Color.LightSlateGray : System.Drawing.Color.Crimson;
        return is_valid;
    } 
```

我想要做的是将 Mybox.BorderColor 替换为 div 的 ID，但我似乎找不到正确的语法（我已将 runat 添加到 div）。

有什么建议么？

干杯，麻木

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:03:44.677

如果您已经将 div 设置为 runat（并且还给了它一个 id），那么类似以下的内容应该可以工作：

```
this.divId.Style.Add(HtmlTextWriterStyle.BorderColor, System.Drawing.ColorTranslator.ToHtml(is_valid ? System.Drawing.Color.LightSlateGray : System.Drawing.Color.Crimson)); 
```

# c# - Windows 和控制台应用程序中缺少 program.cs 文件

> ID：14219899
> 
> 赞同：0
> 
> 时间：2013-01-08T16:44:48.810
> 
> 标签：c#, visual-studio-2010

最近安装了 Microsoft Visual Studio 2010 express。问题是，如果我打开 Windows 应用程序或控制台应用程序，它不会显示 program.cs（默认）文件。请一些机构帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:27:12.967

在 Visual Studio (2005/ 2008/ 2010/ 2012) 中，当您创建新的 winforms 应用程序或控制台应用程序时，Visual Studio 会自动添加一个名为`Program`(的类`Program.cs)`。但如果您在 Visual Studio 中打开现有项目，则**不必**a `Program.cs`. 现有项目不必是一个名为`Program`.

我认为某些操作会破坏您`Winforms`和`Console`Visual Studio 中的模板。对于这种情况，重新安装和安装看起来是最适合您的解决方案。

# eclipse - 我无法选择 eclipse Qvga 240x320

> ID：14219905
> 
> 赞同：2
> 
> 时间：2013-01-08T16:45:06.473
> 
> 标签：eclipse, layout

我无法在 eclipse Qvga 240x320 2.7 中选择小型布局。图形布局不起作用...我有消息在渲染过程中引发异常：索引：1，大小：1 异常详细信息记录在窗口 > 显示视图 > 错误日志为什么？如何我修好了？Avd 管理器有虚拟设备 qvga。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:44:27.220

我有同样的问题。这是SDK 16.2 或 avobe[中的渲染库中的一个错误。](http://code.google.com/p/android/issues/detail?id=37472)您必须安装 SDK 16.2 或更高版本并在布局编辑器中选择它。

# svg - SVG 崩溃 Safari

> ID：14219909
> 
> 赞同：0
> 
> 时间：2013-01-08T16:45:27.210
> 
> 标签：svg, safari, crash, svg-filters

我正在开发一个投资组合（[http://www.chloémorillon.com/](http://chlo%C3%A9morillon.com/)）网站，当我通过所有网络浏览器检查它时遇到了问题。它在 chrome 上运行良好，但是当我用 Safari 检查它时，浏览器会不断刷新页面，直到它确实崩溃。

我使用 SVG 来渲染平行六面体，所以我认为问题来自那里......

这是每个形状框的代码：

```
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" height="485" width="305" class="svg-graphic">
         <filter id="grayscale">
              <feColorMatrix values="0" type="saturate"/>
         </filter>
         <g>
         <clipPath id="hex-mask">
         <polygon points="200, 0  200,284 0,384  0, 100"/>
         </clipPath>
         </g>
         <a xlink:href="http://xn--chlomorillon-eeb.com/projets/">
         <polygon transform="translate(2, 6)" points="200, 0  200,284 0,384  0, 100" stroke-width="10" stroke="#1a171b" fill="#1a171b"/>
         <polygon transform="translate(2, 6)" points="200, 0  200,284 0,384  0, 100" stroke-width="10" stroke="#75ffba" fill="#75ffba" id="bandw"/>
         <image preserveAspectRatio="xMidYMin slice" transform="translate(3, 6)" xlink:href="http://xn--chlomorillon-eeb.com/wp-content/themes/culotte/images/accueil1.jpg" width="100%" height="100%" clip-path="url(#hex-mask)" id="color"/>
        <image preserveAspectRatio="xMidYMin slice" transform="translate(3, 6)" xlink:href="http://xn--chlomorillon-eeb.com/wp-content/themes/culotte/images/accueil1.jpg" width="100%" height="100%" filter="url(#grayscale)" clip-path="url(#hex-mask)" id="bandw"/>
         </a>
     </svg> 
```

你对我的问题有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:49:15.603

只是一些一般的调试帮助：当事情失败时，尝试删除代码，直到找到有问题的代码。我会先删除过滤器，因为 Safari 5 不支持 SVG 过滤器。这不应该导致崩溃（它应该只是忽略过滤器）但你永远不知道。

另一个可能的故障点是 utf-8 域`http://xn--chlomorillon-eeb.com`，尝试相对路径（只是`<a xlink:href="/projets">`）。

一旦您确定了导致崩溃的代码片段，您就可以设计一个解决方法，使用 javascript 或 Safari 5 的后备。

# html - 悬停时如何使头部容器的一部分改变颜色

> ID：14219914
> 
> 赞同：0
> 
> 时间：2013-01-08T16:45:55.277
> 
> 标签：html, css

所以这是我现在正在使用的头部容器。

```
 <header>
<div class ="headcontainer">

<nav class ="links">
<a href="index.html">Home</a>
<a href="#">Page1</a>
<a href="#">page2</a>
</nav>

<nav class ="login">
<a href="login.html">Login</a>
<a href="#">page4</a>
</nav>
</div>
</header> 
```

这是CSS部分：

```
.headcontainer {
    width: 960px;
    margin: auto;

header {

    width: 100%;
    height: 35px;
    z-index: 10;
    position: fixed;
    top: 0;
    left: 0;
    background: #A7A7A7;

}

.links {
    float: left;
    text-align: left;
}

.links a {
float: left;
width: auto;
height: auto;
font-size: 16px;
color: #FFF;
font-weight: 600;
margin: 10px 0 0 15px;

} 
```

基本上我可以在网站顶部点击不同的词，基本上充当导航标题。所以基本上我有一条线，灰色作为背景，文本上有白色。像这样：

![标题](../Images/f44d354d3f0ef84aaa00d753a3626127.png)

我想要做的是，当我将鼠标悬停在其中一个单词上时，它会将背景变为白色，并使文本变为灰色，而不是仅用于正方形中的那个单词。像这样：

![标题悬停](../Images/d1f0cbea4e6ed73e1b9ec62f77b95a52.png)

我尝试了很多方法，但我无法让它发挥作用。将不胜感激我能得到的任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:52:20.713

将此添加到您的CSS：

```
.links a:hover {
    background: white;
    color: gray;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:51:38.327

[您可以在元素上使用 CSS :hover 选择器，然后将颜色和背景更改为您](http://www.w3schools.com/cssref/sel_hover.asp)想要的任何内容

或者你可以使用 jQuery 的 .hover() 函数。[看这里](http://api.jquery.com/hover/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:54:27.870

您可以使用 jQuery 完成此操作。

您的链接容器将需要一个 ID。
当您将鼠标悬停在所选链接上时，需要应用 onhover 动作，这将触发 jQuery 动作来修改 CSS。

一个很好的起点是[div 背景颜色，改变 onhover](https://stackoverflow.com/questions/676324/div-background-color-to-change-onhover)伴随着一个简短的 jQuery 函数来改变链接颜色。

# php - 带有字符“¡”的奇怪字符串行为

> ID：14219915
> 
> 赞同：4
> 
> 时间：2013-01-08T16:45:56.290
> 
> 标签：php, string, character

请看看这个：

```
$str = '¡hola!'; // '¡' is the spanish opening exclamation mark

echo $str{0}; // prints nothing
echo $str{1}; // prints �
echo $str{2}; // prints h 
```

php 脚本具有 UTF-8 编码，我得到与 apache 模块或 CLI 相同的结果。PHP版本：5.4.6

为什么我会得到这个奇怪的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:50:52.507

`[]`按or索引字符串`{}`不是多字节安全的。

改用多字节函数，例如[mb_substr](http://php.net/mb_substr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:54:56.653

这是因为¡实际上是 UTF 中的多字节字符，PHP 无法通过数组访问 ( `[0]`) 正确处理该字符。您需要查看多字节函数：http: [//php.net/manual/en/book.mbstring.php](http://php.net/manual/en/book.mbstring.php)

这应该可以按您的预期工作：

```
$str = '¡hola!';

echo mb_substr($str, 0, 1, 'UTF-8'); // prints ¡
echo mb_substr($str, 1, 1, 'UTF-8'); // prints h
echo mb_substr($str, 2, 1, 'UTF-8'); // prints o 
```

# vb.net - 如何获取所有文本文件资源名称和文件内容

> ID：14219919
> 
> 赞同：0
> 
> 时间：2013-01-08T16:46:01.887
> 
> 标签：vb.net, visual-studio, visual-studio-2012, text-files, my.resources

我需要做这样的事情：

```
 Private Sub SearchInResources(ByVal PatternSTR As String)
       For Each ResourceFile In My.Resources ' Obviously this don't works
           If ResourceFile.EndsWith(".txt") Then
               Dim fileContent As String = ResourceFile
               Dim stringStream As New System.IO.StringReader(fileContent)
               If stringStream.contains(PatternSTR) Then
                   ' Things...
               End If
           End If
       Next
   End Sub 
```

我已经尝试过这种方法，但对我不起作用！:[如何获取资源文件中所有资源的名称](https://stackoverflow.com/questions/1000510/how-to-get-the-names-of-all-resources-in-a-resource-file)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:48:14.583

这是这样的：

```
 For Each ResourceFile As DictionaryEntry In My.Resources.ResourceManager.GetResourceSet(Globalization.CultureInfo.CurrentCulture, True, True).OfType(Of Object)()
        If TypeOf (ResourceFile.Value) Is String Then
            MsgBox(My.Resources.ResourceManager.GetObject(ResourceFile.Key))
            'MsgBox(ResourceFile.Key)   ' Resource Name
            'MsgBox(ResourceFile.Value) ' Resource FileContent
        End If
    Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:00:28.633

您可以将文件存储在文件夹中并通过

```
For Each Content As String In My.Computer.FileSystem.GetFiles("D:\Resources", FileIO.SearchOption.SearchTopLevelOnly, "*.txt")
    ListBox1.Items.Add(Content)
Next 
```

只是您问题的替代解决方案

# oracle - 需要帮助来微调 SQL 内连接查询 - Oracle

> ID：14219921
> 
> 赞同：0
> 
> 时间：2013-01-08T16:46:07.103
> 
> 标签：oracle

我需要帮助来微调运行长时间的 Oracle SQL 查询。

```
 SELECT 
     MIN( E.MKT_PRC),
     MAX( E.MKT_PRC)
 FROM 
     GL_VESTINGPRIME_RPT VP 
     INNER JOIN GRANTZ G 
         ON G.GRANT_NUM = VP.GRANT_NUM 
         OR G.XFER_ORIG = VP.GRANT_NUM 
     INNER JOIN EXERCISE E 
         ON E.GRANT_NUM = G.GRANT_NUM
 WHERE 
     VP.RUNTIME_ID = :B4 
     AND VP.PLAN_NUM = NVL(:B3, VP.PLAN_NUM) 
     AND E.EXER_DT BETWEEN :B2 + 1 
     AND :B1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:09:25.430

问题可能是连接条件中的“或”。这往往优化得很差。

这个版本对两个结果进行了明确的联合：

```
SELECT MIN( E.MKT_PRC), MAX( E.MKT_PRC)
from ((select E.MKT_PRC, E.MKT_PRC
       FROM GL_VESTINGPRIME_RPT VP INNER JOIN GRANTZ G 
            ON G.GRANT_NUM = VP.GRANT_NUM OR
            EXERCISE E
            ON E.GRANT_NUM = G.GRANT_NUM
       WHERE VP.RUNTIME_ID = :B4 AND
             VP.PLAN_NUM = NVL(:B3, VP.PLAN_NUM) AND
             E.EXER_DT BETWEEN :B2 + 1 AND :B1
     ) union all
     (select E.MKT_PRC, E.MKT_PRC
       FROM GL_VESTINGPRIME_RPT VP INNER JOIN GRANTZ G 
            ON G.XFER_ORIG = VP.GRANT_NUM OR
            EXERCISE E
            ON E.GRANT_NUM = G.GRANT_NUM
       WHERE VP.RUNTIME_ID = :B4 AND
             VP.PLAN_NUM = NVL(:B3, VP.PLAN_NUM) AND
             E.EXER_DT BETWEEN :B2 + 1 AND :B1
     )) t 
```

如果您的表上有适当的索引，这应该很快。

# netty - Java小程序中的Netty通过代理服务器

> ID：14219925
> 
> 赞同：2
> 
> 时间：2013-01-08T16:46:16.160
> 
> 标签：netty

我们在 Java 小程序中使用 Netty 与 tomcat 服务器通信。这完美地工作。

我们有一个用户在 Internet Explorer 中配置了代理服务器。网页和 Java 小程序得到了服务，但是当 Netty 尝试连接时，绕过代理服务器并进行直接连接；这失败了，因为用户设置了防火墙以防止直接连接；所有客户端连接都必须通过代理服务器。

有没有办法让 Netty 使用浏览器中配置的代理服务器？

# c# - ConfigurationManager.Read 从未知来源读取

> ID：14219927
> 
> 赞同：1
> 
> 时间：2013-01-08T16:46:21.767
> 
> 标签：c#, visual-studio-2003, configurationmanager, application-blocks

我继承了一些最初用 VS .NET 2003 编写的遗留代码。我熟悉 ConfigurationManager 在较新版本的 .NET 中的工作方式，并已成功使用它从 web.config 中获取连接字符串。我的问题是这段代码似乎根本没有从 web.config 中提取，并且使用了我不熟悉的命名空间。

以下是相关代码：

```
using Microsoft.ApplicationBlocks.ConfigurationManagement;

public class ConfigurationBlock
{
    private static Hashtable GetSection()
    {
        HashTable configBlock = ConfigurationManager.Read();
        return configBlock;
    }
} 
```

当我遵循此代码时，它成功地从...某处提取了大量数据。有没有办法以编程方式或通过 VS2003 界面设置我不知道的 ConfigurationManager 指向的位置？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:53:15.923

命名空间是指 Microsoft 应用程序块（一组实用程序），因此如果您必须使用 Microsoft 应用程序块，则必须下载并安装它，然后引用 dll。但是，为了从 web config 或 app config 中读取值，您可以使用

```
class:      ConfigurationManager 
Namespace:  System.Configuration
Assembly:  System.Configuration (in System.Configuration.dll) 
```

# javascript - chrome临时存储未重置

> ID：14219928
> 
> 赞同：1
> 
> 时间：2013-01-08T16:46:24.197
> 
> 标签：javascript, html, google-chrome, chromium

查找[存储](https://developers.google.com/chrome/whitepapers/storage)后，我想尝试重置临时存储以进行测试。

```
window.webkitStorageInfo.requestQuota(webkitStorageInfo.TEMPORARY, 5*1024*1024,  
    function( bytes ) {
        console.log( "Quota is available: " + bytes );
    },
    function( e ) {
        console.log( "Error allocating quota: " + e );
    }); 

window.webkitStorageInfo.queryUsageAndQuota(webkitStorageInfo.TEMPORARY, 
    //the type can be either TEMPORARY or PERSISTENT
    function(used, remaining) {
        console.log("Used quota: " + used + ", current quota: " + remaining);
    }, function(e) {
         console.log('Error', e); 
    }); 
```

requestQuota() 设置临时存储大小，而 queryUsageAndQuota() 告诉我当前配额是多少。但是，当我在 chrome 浏览器中查看控制台日志时，虽然设置了新配额，但`queryUsageAndQuota()`. 我得到的东西看起来像：

```
Quota is available: 5242880
Used quota: 0, current quota: 214748364 
```

即使我预计什么是可用的和当前的配额是相同的。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:10:39.693

比较这两个输出

# 代码 1

```
window.webkitStorageInfo.requestQuota(webkitStorageInfo.TEMPORARY, 
             5188955171*1024*1024,  
    function( bytes ) {
        console.log( "Quota is available: " + bytes );
    },
    function( e ) {
        console.log( "Error allocating quota: " + e );
    }); 

window.webkitStorageInfo.queryUsageAndQuota(webkitStorageInfo.TEMPORARY, 
    //the type can be either TEMPORARY or PERSISTENT
    function(used, remaining) {
        console.log("Used quota: " + used + ", current quota: " + remaining);
    }, function(e) {
         console.log('Error', e); 
    }); 
```

# 输出 1

```
Quota is available: 5188982205
Used quota: 492, current quota: 5188982205 
```

# 代码 2

```
window.webkitStorageInfo.requestQuota(webkitStorageInfo.TEMPORARY, 5*1024*1024,  
    function( bytes ) {
        console.log( "Quota is available: " + bytes );
    },
    function( e ) {
        console.log( "Error allocating quota: " + e );
    }); 
window.webkitStorageInfo.queryUsageAndQuota(webkitStorageInfo.TEMPORARY, 
    //the type can be either TEMPORARY or PERSISTENT
    function(used, remaining) {
        console.log("Used quota: " + used + ", current quota: " + remaining);
    }, function(e) {
         console.log('Error', e); 
    }); 
```

# 输出 2

```
Quota is available: 5242880
Used quota: 0, current quota: 214748364 
```

在您的情况下，您请求了一个`5242880`已经可用且小于可用数量的次要配额，因此它返回一个`successCallback`请求配额！通过请求大量重置配额！

[window.webkitStorageInfo.requestQuota](https://developers.google.com/chrome/whitepapers/storage#requestQuota)用于请求**比可用**存储更多的存储空间，但是 Chrome 会自动为您的应用提供临时存储空间，因此您不需要请求分配**（最多 20% 的共享池）**

# 参考

*   [贮存](https://developers.google.com/chrome/whitepapers/storage)

# c# - 事件驱动的消息路由和隐藏实现

> ID：14219929
> 
> 赞同：1
> 
> 时间：2013-01-08T16:46:25.713
> 
> 标签：c#, multithreading, events

我需要围绕我的程序将消息发送到不同的类库。所以我认为这样做的方式是拥有一个所有不同库订阅的消息路由器类，所有消息都通过路由器。

为了发送消息，消息路由器正在侦听的发送方异步引发事件。所以我已经将消息发送到消息路由器。然后消息路由器在接收器上异步引发另一个事件。

a）这是做这件事的正确方法吗？

b）我怎样才能隐藏实现，使类只有一个`MessageReceived(string message)`和`SendMessage(string message)`方法。

现在我可以创建一个抽象类，但要“隐藏”事件的实现，我必须实现我试图避免的添加和删除。如果这是唯一的方法，我如何以线程安全的方式实现添加/删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:59:17.173

这种听起来像一个事件聚合器。这个问题可能会对您有所帮助 -[事件聚合器实施示例/最佳实践](https://stackoverflow.com/questions/2343980/event-aggregator-implementation-sample-best-practices)。

# plot - 如何在八度音阶中制作虚线/点线/点划线？

> ID：14219930
> 
> 赞同：4
> 
> 时间：2013-01-08T16:46:25.943
> 
> 标签：plot, octave

我想使用`plot`命令以八度音阶创建单色图/图形。这就是为什么我想使用线条样式制作不同的图形线条，例如虚线/点线/点划线样式。**标准`plot`建议了几种线条样式，但没有一个看起来像列出的变体。**

* * *

**EDIT-1：** 标准绘图样式不适用于我的情况：`":"`, `"-."`,等样式`"--"`不起作用，八度在任何情况下都会绘制实线。此外，菱形和正方形（`d`和`s`选项）丑陋且不成比例。可能是有用的信息：我在 Windows 下使用 Octave。

* * *

**EDIT-2：**例如，这样的命令`plot(A(:,1),A(:,2),"-.dk")`给了我这样的（**不适用的！！！**）图

![在此处输入图像描述](../Images/c19333036701e92ab99553ddf8da9ede.png)

* * *

更具体地说，我想要这样的东西（部分线条样式） ![xxx](../Images/95a0ff05d1b7d40f5f111fec0dd6dbaf.png)

（图片来自文章：McCallum 和 K. Nigam。1998。朴素贝叶斯文本分类的事件模型比较。在 AAAI-98 文本分类学习研讨会论文集上）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T05:06:45.760

这些可以用 的`FMT`参数设置`plot`。基本上，这些似乎是您的选择（请参阅[线条样式的手册条目](http://www.gnu.org/software/octave/doc/interpreter/Line-Styles.html)）：

*   `"-"`实线
*   `":"`积分
*   `"-."`破折号后跟点
*   `"--"`虚线
*   `"none"`没有线（只有标记）

还有`"."`点选项，但这是针对实际数据点，而不是线。因此，要重新创建您的图片，应该可以使用以下内容

```
plot (multinominal, "-dk", "MarkerFaceColor", "k")
hold on;
plot (mv-bernoulli, ":sk", "MarkerFaceColor", "k") 
```

语法可能看起来有点奇怪，但这里是如何阅读它。对于`-dk`,`-`是实线，`d`菱形标记和`k`黑色（`b`将是蓝色）。在 上`:sk`，它是黑色的虚线和方形标记。

请参阅手册上的[高级绘图](http://www.gnu.org/software/octave/doc/interpreter/Advanced-Plotting.html)部分。

**编辑：**请参阅下面的评论。这可能不适用于非常旧的 Octave 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:08:56.260

好吧，我自己找到了一个简单的解决方案（使用 Google ;)）为了在 Octave 中获得具有不同线条样式的单色图表/图形，我们不需要使用类似or`plot`的样式（因为它们不起作用）。`"--"``"-."`

我们只需要一件事就是 command `print`。例如，可以按以下`eps`格式创建单色图形：

`print -deps "diagram.eps"`

这给了我一个很好的画面：

![在此处输入图像描述](../Images/0b0c6154adcb978ebc5bcd36250cbd48.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-23T22:45:11.760

我遇到了同样的问题，我认为使线条样式可见的解决方案是改变线宽。使用默认线宽值（即 1）时，许多线型无法区分。

试试下面的代码，看看它是否有效：

```
x = ( 0:0.4:10 );
f = sin(x) .* exp(-4 .* x);
g = sin(x);
plot(x,f,'r:','linewidth',5,x,g,'-.','linewidth',2)
print(gcf,"PlotSimple.pdf") 
```

# model-view-controller - Zend 2 - 默认控制器路由 (ZF2)

> ID：14219932
> 
> 赞同：1
> 
> 时间：2013-01-08T16:46:45.193
> 
> 标签：model-view-controller, controller, zend-framework2, zend-route

我正在开发一个具有虚拟主机的网站，例如 xyz.com、asd.com 等。

我使用像“：controller.com”这样的主机名路由，所以它将我路由到特定的控制器。我为默认行为创建了一个 defaultController，并从中扩展了 xyzController 和 asdController，所以我只修改我真正想要的。

问题是，我怎样才能将我的 DefaultController 创建为真正的默认值 :) 我的意思是，如果我没有为特定路由创建控制器（例如：xyz.com 的 xyzController），那么我不想得到像这样的致命错误

```
"Fatal error: Class 'aaaa\Controller\asdController' not found in /var/www/samba/aaaa/www/src/site/vendor/ZF2/library/Zend/ServiceManager/AbstractPluginManager.php on line 177" 
```

如果它立即将我路由到 defaultController 会更好。

我在考虑 view_manager 的模板，比如“not_found_template”。如果 not_found_controller 存在那就太好了:)

有可能以某种方式做吗？

# python - Search not exists in Django

> ID：14219934
> 
> 赞同：1
> 
> 时间：2013-01-08T16:46:56.103
> 
> 标签：python, database, django, list, filter

I'm really new to django programming, and I'm facing a problem I don't really know how to solve:

I want to get a list of users who have many string attributes, but only the users whom none of it's attributes is equal to a given one.

I have this piece of code

```
all_users = list(UserProfile.objects.attribute.filter(type=given).exists()) 
```

but this code will return me the users who have that attribute, **so here's the question**: How I can modify this line (or what lines do I need to add) in order to get the list of users without this attribute

Ps: Maybe I didn't explained myself clearly as I don't really know how to specify my problem in english, but, if you don't know what I'm asking I can try again

Thanks all

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T16:50:01.287

You can use [`exclude`](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-specific-objects-with-filters):

```
all_users = list(UserProfile.objects.attribute.exclude(type=given).exists()) 
```

To quote the docs:

> To create such a subset, you refine the initial QuerySet, adding filter conditions. The two most common ways to refine a QuerySet are:
> 
> `filter(**kwargs)`
> Returns a new QuerySet containing objects that match the given lookup parameters.
> 
> `exclude`(**kwargs)
> Returns a new QuerySet containing objects that do not match the given lookup parameters.

# html - 如何为屏幕阅读器的 HTML5 时间元素添加标题？

> ID：14219936
> 
> 赞同：0
> 
> 时间：2013-01-08T16:46:57.387
> 
> 标签：html, timestamp, screen-readers

我有两个`time`元素指示某些电视列表的开始时间和结束时间。这些时间的设计不需要任何标题，因为在屏幕上它们看起来非常不言自明。但是，我想为屏幕阅读器添加一些东西，也许是某种属性？或者也许我创建了一个标题但用 CSS 隐藏它？

处理这个问题的最佳方法是什么？

```
<time datetime="{{ start_time }}">{{ start_time|time:"H:i" }}</time> -
<time datetime="{{ end_time }}">{{ end_time|time:"H:i" }}</time> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:04:07.777

您可以将它们放在 a中，并对非屏幕阅读器`<dl>`隐藏s。`<dt>`

例如，HTML：

```
<dl>
    <dt>Start time</dt>
    <dd><time datetime="{{ start_time }}">{{ start_time|time:"H:i" }}</time></dd>

    <dt>End time</dt>
    <dd><time datetime="{{ end_time }}">{{ end_time|time:"H:i" }}</time></dd>
</dl> 
```

CSS（来自[HTML5 样板](https://github.com/h5bp/html5-boilerplate/) `.visuallyhidden`）

```
/*
 * Hide only visually, but have it available for screenreaders: h5bp.com/v
 */

dt {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}

dd {
    display: inline; 
}

dt:first-child + dd::after {
    content: ' \2013 '
} 
```

更新：[jsFiddle](http://jsfiddle.net/PMfSL/)、`dd`style 和 en-dash 而不是连字符

# php - 上传 PDF 文件并将其转换为文本

> ID：14219940
> 
> 赞同：0
> 
> 时间：2013-01-08T16:47:04.047
> 
> 标签：php, pdf

> **可能重复：**
> [如何从 PDF 文档中提取文本？](https://stackoverflow.com/questions/6999889/how-to-extract-text-from-the-pdf-document)

我是 php 的新手。我正在处理文件。问题是，我知道上传 pdf 文件的方法，并且还有一个将其转换为文本的代码。

问题是我想链接它们，即，当我上传 pdf 文件时，它应该将上传的文件作为输入并生成相应的转换后的文本文件。任何人都可以解释这个问题的方式或提供任何有用的链接吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:51:44.103

如果有兴趣，这里有一个免费的脚本。

[从 PDF 中提取 PHP](http://www.phpclasses.org/package/6155-PHP-Extract-text-from-PDF-files.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:55:31.923

该网站[http://php.net/](http://php.net/)

应该是你的朋友。就像我了解您需要创建一个包含文本内容的文件。此任务最简单的功能是`file_put_contents`. 另请查看其他文件功能。[http://php.net/manual/de/function.file-put-contents.php](http://php.net/manual/de/function.file-put-contents.php)

# android - Json 元素在 AsyncTask 中返回 null

> ID：14219941
> 
> 赞同：0
> 
> 时间：2013-01-08T16:47:06.293
> 
> 标签：android, android-asynctask

当我只调用`wpCategories = JsonToElement.getllAllCategory();`按钮`onClick`方法时，它工作正常。（`wpCategories`填满数据）。但是当我把它放在 a 中时`asynctask`， `wpCategories`返回 null。（`doInBackground`不是被调用吗？）

这是我关于点击方法的按钮：

```
public void onImageGridClick(View view) {       
    new GetJsonElementTask().execute();
    Intent intent = new Intent(this, CategoryGridActivity.class);       
    intent.putParcelableArrayListExtra(Extra.IMAGES, wpCategories);
    startActivity(intent);
} 
```

和异步任务：

```
private class GetJsonElementTask extends AsyncTask<Void, Integer, String> {
    @Override
    protected void onPreExecute() {
        progressDialog = ProgressDialog.show(HomeActivity.this, "",
                "Loading...");          
    }
    @Override
    protected String doInBackground(Void... arg0) {
        wpCategories = JsonToElement.getllAllCategory();
        return null;
    }

    @Override
    protected void onPostExecute(String value) {
        progressDialog.dismiss();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        Log.v("DEBUG_LOG", "In onProgressUpdate");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:49:50.153

在里面启动你的活动，`onPostExecute`因为这个方法在`doInBackground`执行完成后执行：

```
 @Override
    protected String doInBackground(Void... arg0) {
        wpCategories = JsonToElement.getllAllCategory();

        return wpCategories;  //<<< return value from here
    }
 @Override
    protected void onPostExecute(String value) {
        progressDialog.dismiss();

        Intent intent = new Intent(this, CategoryGridActivity.class);       
        intent.putParcelableArrayListExtra(Extra.IMAGES, value);
        startActivity(intent);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:54:18.843

尝试关注

```
public void onImageGridClick(View view) {       
    new GetJsonElementTask().execute();
}

    public void startCategoryGridActivity(){
           Intent intent = new Intent(this, CategoryGridActivity.class);        
       intent.putParcelableArrayListExtra(Extra.IMAGES, wpCategories);
       startActivity(intent);
    } 
```

和异步任务：

```
private class GetJsonElementTask extends AsyncTask<Void, Integer, String> {
    @Override
    protected void onPreExecute() {
        progressDialog = ProgressDialog.show(HomeActivity.this, "",
                "Loading...");          
    }
    @Override
    protected String doInBackground(Void... arg0) {
        wpCategories = JsonToElement.getllAllCategory();
        return null;
    }

    @Override
    protected void onPostExecute(String value) {
        progressDialog.dismiss();
            startCategoryGridActivity();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        Log.v("DEBUG_LOG", "In onProgressUpdate");
    }

} 
```

# javascript - 为什么着色器必须在 webgl 程序的 html 文件中？

> ID：14219947
> 
> 赞同：27
> 
> 时间：2013-01-08T16:47:33.203
> 
> 标签：javascript, three.js, glsl, webgl

我看到了以下问题，有人问如何从 html 中删除着色器： [WebGL - 是否有在 HTML 中嵌入着色器的替代方法？](https://stackoverflow.com/questions/5878703/webgl-is-there-an-alternative-to-embedding-shaders-in-html)

有详细的解决方法可以加载到包含问题答案中建议的着色器的文件中。

在我看到的教程中，着色器代码是直接嵌入到 html 中的。javascript 代码使用 getElementById 引用它。但是由于许多原因，将着色器直接嵌入到 html 中是很难看的。为什么我不能只使用 src= 属性在外部引用它？

```
<script type="x-shader/x-fragment" id="shader-fs" src="util/fs"></script> 
```

以上不工作，我只是想知道为什么不。这显然与脚本本身的限制有关，但我不明白。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-10T08:43:07.050

您根本不必使用`<script>`标签来加载着色器程序。大多数教程和示例只是将它们用作在网页的 DOM 中存储字符串的容器。脚本类型`"x-shader/x-fragment"`对 Web 浏览器没有意义，因此它们不执行脚本。但是，它们确实将该标记的内容作为字符串存储在 DOM 中，以后可以通过“真实”脚本访问。这仅在脚本内容在 HTML 文件中时有效。**当您通过 src 属性加载脚本时，内容不会成为脚本标签的文本子节点，因此无法通过 DOM 树访问**。

您也可以将着色器的源代码作为字符串存储在 Javascript 文件中：

```
// myVertextShader.glsl.js
var myVertexShaderSrc =         
        "attribute vec3 pos;"+      
        "void main() {"+        
        "   gl_Position = vec4(pos, 1.0);"+     
        "}"
    ; 
```

然后，您将像这样编译着色器：

```
var vertexShader = gl.createShader(gl.VERTEX_SHADER);
gl.shaderSource(vertexShader, myVertexShaderSrc);
gl.compileShader(vertexShader);

gl.attachShader(program, vertexShader); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-10T00:23:16.667

# 2018 年更新

在 2018 年，我建议使用多行模板文字，如用反引号围绕着色器，它可以跨越多行

```
const someShaderSource = `
attribute vec4 position;
uniform mat4 matrix;
void main() {
  gl_Position = matrix * position;
}
`; 
```

如果您想将着色器放在单独的文件中，您可以在 2018 年使用 JavaScript 模块轻松做到这一点。着色器文件可能如下所示

```
// someshader.glsl.js
export default `
attribute vec4 position;
uniform mat4 matrix;
void main() {
  gl_Position = matrix * position;
}
`; 
```

要使用 JavaScript 模块，您的主要 JavaScript 必须位于单独的文件中。您可以通过导入来访问着色器源

```
// main.js

import someShaderSource from './someshader.glsl.js';

// use someShadeSource 
```

然后你将它包含在你的 HTML 中

```
<script src="main.js" type="module"></script> 
```

或者您可以像这样从页面本身的脚本标签中使用它

```
<script type="module">
import someShaderSource from './someshader.glsl.js';

// use someShadeSource
</script> 
```

如果您想支持较旧的浏览器，您可以使用[汇总](https://github.com/rollup/rollup)之类的工具，该工具将读取所有`import`语句并生成一个大型 JavaScript 文件。这就是three.js 所做的。

如果需要支持 IE11，可以使用[babel](http://babeljs.io)转换多行模板。多年来，所有其他浏览器都支持多行模板。

# 原始答案

> 为什么着色器必须在 webgl 程序的 html 文件中？

他们不

您可以将着色器放在外部 javascript 中。例如

```
// --myshader.js--
var myFragmentShader = 
  "void main() {\n" +
  "  gl_FragColor = vec4(1,0,0,1);\n" +
  "}n\"; 
```

或者另一种常见的格式

```
// --myshader.js--
var myFragmentShader = [
  "void main() {",
  "  gl_FragColor = vec4(1,0,0,1);", 
  "}",
].join("\n"); 
```

在所有支持 WebGL 的浏览器中，您都可以使用[模板文字](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals)

```
// --myshader.js--
var myFragmentShader = `
  void main() {
    gl_FragColor = vec4(1,0,0,1); 
  }
`; 
```

否则，您可以将它们放在文本文件中并使用 XMLHTTPRequest 加载它们

```
// --myshader.txt
  void main() {
    gl_FragColor = vec4(1,0,0,1); 
  } 
```

然后在 JavaScript 中执行以下操作

```
function loadTextFile(url, callback) {
  var request = new XMLHttpRequest();
  request.open('GET', url, true);
  request.addEventListener('load', function() {
     callback(request.responseText);
  });
  request.send();
}

loadTextFile("myshader.txt", function(text) {
  // use text...
}); 
```

人们将它们放在 HTML 中的原因是因为它简单、高效且同步。

**easy**：与 JS 文件版本不同，您不必在每一行都用引号和其他标点符号括起来。尽管现在使用 es6 不再是问题。每个支持 WebGL 的浏览器都支持 es6 模板字符串。

**高效**：与文本和 js 文件不同，服务器只有一个请求。当然，有些人可能会在他们的 js 文件上运行连接器来修复其中的一些问题。

**同步**：与文本文件不同，它们的用法是同步的。无需回调或承诺或以其他方式处理下载文件的异步问题。

至于为什么您的示例不起作用，我很确定原因是它允许跨源资源访问。该`<script>`标签是在人们发现跨源访问是一个问题之前设计的，因此他们无法在不破坏一堆站点的情况下关闭跨源脚本。他们可以使其他一切变得更加严格。

例如，XMLHttpRequest 不允许跨源访问，除非您联系的服务器给予许可。如果脚本标签允许您访问该内容，您可以使用脚本标签来解决该限制。换句话说，`request.responseText`您只需以编程方式制作一个脚本标记，而不是制作 XMLHttpRequest 并读取结果，而是将其设置`src`为您想要的 URL，然后`text`在完成时读取其字段。为了确保您不能这样做，您不允许读取具有属性`text`的脚本标签的字段`src`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T08:40:15.153

*着色器语言脚本只是文本。* 可以从任何地方抓取或生成文本（您可以阅读或生成文本）。许多教程只是跳过了魔法发生的部分，并且 WebGL 着色器实例是从获得的字符串中创建的。您没有理由不能像您建议的那样在外部引用脚本，但您需要额外的 JavaScript 来加载内容，*而不是浏览器*。教程中可能会使用脚本标签，主要是因为如果您为脚本标签提供浏览器不理解的类型，浏览器会*跳过标签内容的执行~~或脚本源的检索~~*，因此可以使用标签的内容和属性不管你想要什么。

编辑：好吧，我必须收回一些东西。我决定通过四种浏览器（Chrome、Firefox、IE9、Opera），看看当你有一条线时会发生什么

```
<script type="x-shader/x-fragment" id="shader-fs" src="util/fs"></script> 
```

在你的 html 中。事实证明，浏览器*确实会*在我尝试过的每个浏览器中加载文件，所以我错了。但是，这并不意味着浏览器除了缓存文件之外还知道如何处理文件。我不知道“为什么 src="util/fs" 不起作用？？？”是什么意思。在我尝试过的每个浏览器中，

```
alert(document.getElementById('shader-fs').src); 
```

给定部分路径时警告文件的完整路径。（也许这是您的问题？当浏览器为您提供完整路径时，您期望的是部分路径？）除此之外，我不确定如何解释您的问题。

# mysql - 在任何三天休息后，使用 mysql 按日期计算不间断的连续记录

> ID：14219950
> 
> 赞同：3
> 
> 时间：2013-01-08T16:47:40.437
> 
> 标签：mysql

我有一个数据库表，我可以在其中跟踪使用我的应用程序的人。每个用户每天可能有多次使用。因此，给定单个用户的示例记录集可能如下所示：

```
userId  dateOfUsage
1       2012-12-01
1       2012-12-02
1       2012-12-02
1       2012-12-03
1       2012-12-06
1       2012-12-07
1       2012-12-07
1       2012-12-08 
```

假设今天是 2012-12-08。我想在三天或更长时间没有条目后获取今天和最后一条记录之间的天数。在上面的示例中，2012-12-03 和 2012-12-06 之间有一个休息时间，所以我想计算 2012-12-06 和今天（2012-12-08）之间的天数。答案将是 6 日至 8 日的“连续 3 天”。

是否可以仅在 MySQL 中执行此操作？如何为 MySQL 中的给定用户执行此操作？是否可以一次为所有用户执行此操作？

我发现了有关条纹的其他问题，但没有任何运气来调整它们来解决我的请求。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:23:31.010

您可以使用带有[游标](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)的存储过程来创建临时表。

或者你可以做类似的事情

```
set @dateOfUsage = NULL;
SELECT * FROM (
  SELECT IF(@dateOfUsage IS NULL, 0, datediff(dateOfUsage, @dateOfUsage)) as gap, @dateOfUsage:=dateOfUsage AS dateOfUsage FROM (
    SELECT * FROM `usage` WHERE userID = 1 ORDER BY dateOfUsage
  ) `usage`
) `t` WHERE gap >= 3; 
```

[http://sqlfiddle.com/#!2/22228/2](http://sqlfiddle.com/#!2/22228/2)

请注意，您需要使用子查询，因为不保证表中行的顺序。

我需要另一个子查询来过滤（尽管我不明白为什么`HAVING`不这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:19:12.810

如果您愿意，请过滤用户...

```
DROP TABLE IF EXISTS my_table;

CREATE TABLE my_table 
(id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
,userId  INT NOT NULL
,dateOfUsage DATE NOT NULL
);

INSERT INTO my_table (userid,dateofusage) VALUES
(1       ,'2012-12-01'),
(1       ,'2012-12-02'),
(1       ,'2012-12-02'),
(1       ,'2012-12-03'),
(2       ,'2012-12-04'),
(2       ,'2012-12-05'),
(1       ,'2012-12-06'),
(1       ,'2012-12-07'),
(1       ,'2012-12-07'),
(1       ,'2012-12-08');

SELECT DATEDIFF('2012-12-08',MAX(b.dateofusage))+1 streak  
  FROM ( SELECT x.*, COUNT(*) rank FROM my_table x JOIN my_table y ON y.userid = x.userid AND y.id <= x.id GROUP BY x.id) a
  JOIN ( SELECT x.*, COUNT(*) rank FROM my_table x JOIN my_table y ON y.userid = x.userid AND y.id <= x.id GROUP BY x.id) b
    ON b.dateofusage >= a.dateofusage + INTERVAL 3 DAY
   AND b.rank = a.rank + 1
   AND b.userid = a.userid
 GROUP
    BY a.userid; 
```

# asp.net - 发生重定向时不会触发 Unload 事件

> ID：14219952
> 
> 赞同：0
> 
> 时间：2013-01-08T16:47:43.237
> 
> 标签：asp.net, c#-4.0, event-handling

我的页面中有一个卸载事件，当我导航到下一页时它不会触发？在导航到下一页之前，是否有任何选项可以显式调用此事件？我已经尝试过“window.onbeforeunload”，但在离开当前页面之前它会显示一条带有消息的提示。我不想显示提示？有没有可能实现这一目标？

 ``[ASPX]

```
<asp:TreeView ID="TreeView1" runat="server" OnUnload="TreeView_Unload">
<Nodes>
<asp:TreeNode Text="Node1" NavigateUrl="http://www.google.com"></asp:TreeNode>
</Nodes>
</asp:TreeView> 
```

[C#] protected void TreeView_Unload(object sender, EventArgs e) {` 

```
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:12:28.480

您如何将用户引导至下一页？

如果您使用的是**Response.Redirect(URL, True)**则响应将在该点结束并且页面处理将不会完成（至少，我认为卸载事件不会触发）。如果您要强制立即重定向，那么您可以尝试将重定向更改为**Response.Redirect(URL, False)**，这将允许您的代码完成处理，然后在完成后重定向用户。`

# java - Model structure in many to many relationship

> ID：14219954
> 
> 赞同：1
> 
> 时间：2013-01-08T16:47:49.600
> 
> 标签：java, model-view-controller

For example if i have following tables in my database and Student and Course has many to many relationship.

```
Student
-------
Id (Primary Key)
FirstName
LastName

Course
------
Id (Primary Key)
Title

StudentCourse
-------------
StudentId (Foreign Key -> Student)
CourseId (Foreign Key -> Course) 
```

Now if my model is as follows

```
public class Student
{
  private int ID;
  private String firstName;
  private String lastName;

  //getter and setter
} 
```

and

```
public class Course
{
private int ID;
pirvate String title;
//getter and setter
} 
```

So my question is if i create only these two beans what sort of problem will i encounter?What sort of problem will i face and in which condition?And please specify the correct bean structure for such many to many relationship.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T17:13:58.613

What problems will you encounter:

*   You won't be able to see the Student - Course associations
*   You won't be able to navigate from a Course to the Students on the Course (and vice-versa)
*   You will have problems deleting a Student/Course, if its in the StudentCourse table (foregin key violation)

Generally: you don't want it like this.

Possible solution: use an ORM system, like Hibernate, EclipseLink or OpenJPA. Then you can have a `private List<Student> students;` in your `Course` entity (entity is a better name here than bean, imho), and/or a `private List<Course> courses;` in the `Student` entity.

To make the actual association between the List<> fields and the connecting table in the database, you need to configure the mapping (which is the configuration the ORM uses to bridge the gap between the database schema and the entities).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:46:14.333

[http://docs.oracle.com/javaee/1.4/tutorial/doc/BMP3.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/BMP3.html)

This might be useful to you. As I have similar type of problem few days ago..

# delphi - 在 Delphi 中调试时如何可视化指针的值？

> ID：14219955
> 
> 赞同：7
> 
> 时间：2013-01-08T16:47:49.533
> 
> 标签：delphi, delphi-7

所以，我有一个变量 buffPtr：TPointer 它的大小为 16，包含一系列数字，大部分以 0 开头，比如 013854351387365。我确定它包含值，因为应用程序可以正常工作。

我想在调试时看到这个值。

如果我将“PAnsiChar(buffPtr)^”添加到手表中，我只会看到第一个字节。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T18:04:39.490

只需输入监视表达式`PAnsiChar(buffPtr)^,16`，或者`PByte(buffPtr)^,16`如果您想要序数/字节值。

这里的技巧是在逗号之后添加模式重复的数量，例如`,16`.

恕我直言，它比更改 Watch Properties 更方便，并且它与 IDE 的 F7 评估命令一起使用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-08T17:26:19.507

我在 PAnsiChar(buffPtr)^ 中添加了一块手表

观察属性为

重复计数 = 16 十进制

![在此处输入图像描述](../Images/f62e4e9284eb831ad2fe9bee101deca9.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T17:26:33.083

您是否设置手表转储内存区域？对于一些有帮助的结构。

如果你可以重新编译你的应用程序，那么定义这个：

```
type
  T16Values = array[0..15] of Byte;
  P16Values = ^T16Values; 
```

然后将您的指针转换为`P16Values`，并查看它。

如果它是另一种数据类型`Byte`，则相应地更改上面的代码。

# ruby-on-rails - 在 Rails 应用程序的控制器/视图中访问特定页面

> ID：14219956
> 
> 赞同：0
> 
> 时间：2013-01-08T16:47:51.077
> 
> 标签：ruby-on-rails, ruby, controller

我正在尝试将单个元描述和标题设置为 Ruby on Rails 应用程序中的单个页面。这是以前的开发人员应用程序，我被赋予了编辑任务。另外，我是 Rails 和 Ruby 的新手。

该应用程序有一个`controllers/pages_controller.rb`地方，我可以在某些页面（任务和免责声明）上设置唯一变量`@descriptionX`，`@title`但不能为其他页面设置唯一变量，例如 pet_planning。

```
class PagesController < ApplicationController
  def index
    @title = params[:page].humanize
    render params[:page]
  end

  def pet_planning
    @descriptionX = 'pet planning'
    @title = 'pet planning title'
    render :pet_planning
  end        

  def mission
    @title = 'Our Mission Statement'
    @descriptionX = 'Mission Description'
    render :mission
  end

  def disclaimer
    @title = 'Our Disclaimer'
    render :disclaimer
  end

end 
```

我认为那`render params[:page]`是我迷路的地方。我不是 100% 确定这是做什么的，或者如何使用它。

我不明白为什么我能够控制`@title`and `@description`，`mission`但不能控制`pet_planning`它们`views`都在同一个`/views/pages/`目录中。而且我似乎在应用程序的其他任何地方都找不到两者之间的任何区别。

另外，尝试`= @title = 'Pet Planning'`在`/views/pages/pet_planning.html.haml`文件中添加。它确实更改了标题，但它也意外地显示在页面内容的顶部。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:45:45.333

我建议阅读[ActionController 指南](http://guides.rubyonrails.org/action_controller_overview.html)，它解释了 Rails 如何将来自用户的请求转换为要呈现的页面。

基本上，例如，当您发送请求时

```
GET http://www.example.com/pages/?page=pet_planning 
```

然后 Rails 使用路由器计算出如何处理它（[路由指南](http://guides.rubyonrails.org/routing.html)对此进行了更详细的解释）。我想您的应用程序已设置为使`/pages`路线与`PagesController#index`操作相匹配。您可以查看您的`config/routes.rb`文件和/或`rake routes`在终端输入以查看您的路线是如何设置的。

请求中问号后面的位是“查询字符串”，Rails 将其转换为`params`哈希，对于我上面的示例，看起来像`{:page => "pet_planning"}`. 您的`index`操作着眼于获取要呈现的页面的名称 - 这就是`render params[:page]`正在做的事情。

我猜您可以修改某些页面而不是其他页面的变量的原因是它们中的一些有自己的路由 -例如`/pages/mission`使用`PagesController#mission`操作 - 而某些页面是通过`index`使用`page`参数的操作访问的 -`/pages/?page=pet_planning`或者可能是`/pages/index.html?page=pet_planning`.

**更新**：您现有的路线

```
match 'practice_areas/:page' => 'pages#index', :as => :pages 
```

可以分解成

```
match 'practice_areas/pet_planning' => 'pages#pet_planning' :as => :pet_planning
# etc ... 
```

这将对应于一个看起来像这样的控制器

```
class PagesController < ApplicationController
  def pet_planning
    @title = "Pet planning!"
    @description = "Whatever..."
  end
end 
```

您的建议很接近，但是因为路由格式是`"controller_name#action_name"`，所以您需要多个看起来像这样的控制器

```
class PetPlanningController < ApplicationController
  def index
    @title = "Pet planning!"
    @description = "..."
  end
end 
```

并且您必须将您的视图从`app/views/pages/pet_planning.html.haml`移至`app/views/pet_planning/index.html.haml`. 所以它可能不是你想要的。

请注意，如果您在每个操作中所做的不同之处在于自定义标题和描述，则可能有比将所有内容拆分为单独操作更好的方法来解决问题。例如，您可以使用将您的页面名称映射到其相应信息的哈希：

```
class PagesController < ApplicationController
  PAGE_INFO = {
    "pet_planning" => ["Pet planning!", "Whatever..."],
    "other_page" => ["Title", "Description"],
    # ...
  }

  def index
    page_name = params[:page]
    @title, @description = PAGE_INFO[page_name]
    render page_name 
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:02:45.750

pet_planning、任务和免责声明中的渲染调用与默认行为相同，因此可以删除这些调用。他们告诉 Rails 使用具有给定文件名的页面。对于 index 方法，这是基于参数呈现页面。

标题和描述可能在布局中设置。查看 /views/layouts/application.html.haml 或 /views/layouts/pages.html.haml。

# jquery - 允许使用 jQuery.Wipetouch 缩放缩放

> ID：14219958
> 
> 赞同：2
> 
> 时间：2013-01-08T16:47:55.257
> 
> 标签：jquery, ipad, zooming, gestures

我正在使用 jQuery.Wipetouch 插件来允许滑动手势来浏览幻灯片。

但是，iPad 的原生捏合缩放功能现在被破坏了，因为任何滑动手势（显然包括捏合/缩放）都被绑定元素捕获。

有什么方法可以在保持新的滑动手势的同时启用捏合缩放？是否有我可以监听的多点触控事件来临时禁用滑动绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:04:31.580

我找到了解决我的问题的方法。该插件有一个名为“preventDefault”的属性，默认为 TRUE。此设置禁用默认事件功能，例如捏合缩放。

将 preventDefault 设置为 false 修复了 jQuery.Wipetouch 无法识别我的捏到缩放手势的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:51:10.213

最好的解决方案是重新考虑更改刷卡插件本身。

您可以考虑为您提供[捏合事件的](http://labs.skinkers.com/touchSwipe/demo/Pinch.html)[touchSwipe](http://labs.skinkers.com/touchSwipe/demo/index.html)插件，以及应该执行@RobGibbons 提到的技巧的选项。`excludedElements`

显然，根据[插件网站](http://labs.skinkers.com/touchSwipe/demo/index.html)，它支持 ipad 和 iphone。

另外，它是开源的（[Github](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin)）

# r - 使用 ggplot2 仅绘制时间

> ID：14219964
> 
> 赞同：8
> 
> 时间：2013-01-08T16:48:07.290
> 
> 标签：r, ggplot2

我有一个这样的数据框：

```
 head(yy)
    Team       Date STime ETime
1    A 2012-03-06 07:03 10:13
2    A 2012-03-06 07:03 10:13
3    A 2012-03-06 07:03 10:13
4    A 2012-03-06 07:03 10:13
5    A 2012-03-06 07:03 10:13
6    A 2012-03-06 07:03 10:13 
```

输出(yy)

```
dput(yy)
structure(list(Team = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "A", class = "factor"), 
Date = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "2012-03-06", class = "factor"), 
STime = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "07:03", class = "factor"), 
ETime = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "10:13", class = "factor")), .Names = c("Team", 
"Date", "STime", "ETime"), class = "data.frame", row.names = c(NA, 
-50L)) 
```

我喜欢以 2 小时为增量从 00:00 23:59 看到 y 轴，并且能够在 STime 值上绘制一条红线。

我有这样的东西，但它看起来不正确：

```
ggplot(yy, aes(Date, ETime, group="Team")) + geom_jitter(size=0.05) + facet_wrap( ~ Team) + geom_hline(yintercept=yy$Stime, colour="red", size=2) 
```

![在此处输入图像描述](../Images/1ca6bb06876f2bc666db55307e27c91c.png) 您将如何在 ggplot2 中执行此操作？有人可以给我指点/让我朝着正确的方向前进吗？

问候，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-06T01:10:36.903

您必须将时间格式化为实际时间。现在它们是因素（检查您的数据框`str(yy)`）。绘制 ETime 时，将单个时间绘制为 1 并标记为“10:13”。因此，下面的解决方案首先将字符串“10:13”转换为时间（`strptime`），然后将其转换为`POSIXct`，或自原点（1970 年 1 月 1 日）以来的秒数。

```
library(ggplot2); library(scales)

#Convert date string into POSIXct format
yy$STime <- as.POSIXct(strptime(yy$STime, format = "%H:%M", tz = "UTC"))
yy$ETime <- as.POSIXct(strptime(yy$ETime, format = "%H:%M", tz = "UTC"))

#Define y-axis limits
lims <- as.POSIXct(strptime(c("0:00","23:59"), format = "%H:%M", tz= "UTC"))    

ggplot(yy, aes(Date, ETime, group="Team")) + geom_jitter(size=1) + facet_wrap( ~ Team) + 
  geom_hline(data = yy, aes(yintercept= as.numeric(STime)), colour="red", size=2) + 
  scale_y_datetime(limits =lims, breaks=date_breaks("2 hour"),
                   labels=date_format("%H:%M", tz = "UTC") ) 
```

[![日期时间 y 轴](../Images/4f09e36a53d19b1c155e85eec1bcf047.png)](https://i.stack.imgur.com/7CX3Z.png) 注意[geom_line 到日期轴](https://stackoverflow.com/a/30970521/4718512)。

也要注意你的时区。否则 R/ggplot 将根据您当地的时区格式化。

# iphone - 日历 Kal：如何动态刷新 tableview？

> ID：14219965
> 
> 赞同：0
> 
> 时间：2013-01-08T16:48:08.287
> 
> 标签：iphone, objective-c, xcode, calendar, kal

大家好，我正在开发一个标签栏应用程序，其中一个标签是 Kal 库 (http://github.com/klazuka/Kal) 中的日历。

我使用 CoreData 作为 Kal 的数据源。它工作得很好，但 Cal 下面的表格视图永远不会“刷新”。

我的意思是，表格视图是用一个月的第一天和一个月的最后一天之间的事件初始化的。

但是，我希望表格视图“动态”更改的事件列表。

例子：

我创建了两个事件：一个在 1 月 4 日，一个在 1 月 8 日。

表格视图始终显示两个事件，并且不关心月份中选择的日期。我的意思是，即使选择的日期是 1 月 22 日，这两个事件仍然会显示。

我怎样才能加载包含本月所有事件的日历和仅包含当天事件的表格视图？

提前致谢，

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:26:02.383

要重新加载已插入的数据：

`[self.tableView reloadData];`

# php - 在构造函数中使用“new”关键字

> ID：14219966
> 
> 赞同：4
> 
> 时间：2013-01-08T16:48:12.113
> 
> 标签：php, oop

我最近读到在构造函数中使用关键字“new”是非常不受欢迎的，但我不确定我明白为什么？例如，如何：

```
class A {
    public $foo;

    function __construct() {
        $this->foo = new Bar();
    }
} 
```

任何不同于：

```
class A {
    public function someMethod() {
        $foo = new Bar();
    }
} 
```

？？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-08T17:01:15.767

这确实是依赖注入背后的理论。

这并不是说使用“新”本身就是一个坏主意。相反，通过在类中实例化对象，您正在创建硬依赖项，如果不更改类本身，就永远无法更改或切换这些依赖项。

它也违反了“编码到接口，而不是实现”的范式

例子：

```
class Phone {
    protected $network;

    public function __construct() {
        $this->network = new Verizon();
        $this->network->distinctiveRing();
    }
}

class Verizon {
    public function call($number) {
        ....
    }

    public function distinctiveRing() {

    }
} 
```

现在，假设有一天您想创建一部 ATT、TMobile 和 Sprint 手机？当然，他们都可以拨打电话，而且只需一个电话号码即可。此外，电话类不应该关心运营商是谁，因为它的工作是方便输入号码 - 而不是实际建立网络连接，对吗？

所以，话虽如此，我们不应该创建一个`SprintPhone`可以实例化另一个 Sprint 网络对象的新类，对吧？对。

那么更好的方法是什么？

```
class Phone {
    protected $network;

    public function __construct(NetworkInterface $network) {
        $this->network = $network;
    }
}

interface NetworkInterface {
    public function call($number);
}

class Verizon implements NetworkInterface {
    ...
}

class Sprint implements NetworkInterface {
    ...
} 
```

现在好了，你可以说：`$phone = new Phone(new Sprint())`或者`$phone = new Phone(new Verizon())`

另请注意，我们的调用`distinctiveRing`已消失。为什么？好吧，因为我们不知道任何实现 NetworkInterface 的对象都必然支持独特的环。**但这很好**，因为现在我们`Phone`可以支持**ANY** `Network`而无需更改代码。

如果你想支持独特的铃声，你总是可以创建一个支持该`distinctiveRing`方法的新接口。在您的`Phone`对象中，您可以检查您的`Network` *工具* `DistinctiveRingerInterface`是否，如果是，则制作您独特的戒指。但是通过这种方法，您不再依赖于特定的网络。更好的是，您被迫这样做，因为您从一开始就采取了正确的方法。

并且，任何其他可以在以后创建的网络。更重要的是，你的类不再需要关心它给出了什么样的 Network 对象。它知道，（因为它接收到一个实现 NetworkInterface 的对象），该`Network`对象能够`call`使用 a 来制作 a `$number`。

这也往往会导致更好的代码，更好地分离关注点。

最后：测试。

对于第一个示例，如果您尝试测试 Phone 对象，它将在 Verizon 网络上进行呼叫。因为你正在运行单元测试，所以整天被打电话的人很糟糕，对吧？对。

好吧，只需创建一个实现 NetworkInterface 的 TestNetwork 类，并将其传递给您的手机对象。您的 TestNetwork 类可以在它的`call`方法中做任何您想做的事情 - 或者什么也不做。

此外，您可以使用 创建一个模拟对象`PHPUnit`，并确保`call`您的 TestNetwork 上的方法实际被调用。你以前不能这样做，因为在`Network`你的`Phone`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:53:44.757

看来您的问题和您的代码示例并没有分享太多？

您的第一个代码示例应该可以工作，因为您分配给一个类变量：

```
class A {
    public $foo;

    function __construct() {
        $this->foo = new Bar();
    }
} 
```

您的第二个示例将其分配给 __construct() 方法的本地变量，因此您以后将没有机会检索该值：

```
class A {
    public function someMethod() {
        $foo = new Bar();
    }
} 
```

此外：使用 new 通常没问题。但是，您可能已经阅读过有关控制反转或 IOC 的信息，这是一种避免依赖关系的技术，因此您会尝试避免直接在构造函数中创建类，例如参见[http://ralphschindler.com/2011/05 /18/learning-about-dependency-injection-and-php](http://ralphschindler.com/2011/05/18/learning-about-dependency-injection-and-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:52:17.220

在第一个示例中， $foo 可用于此类中的任何方法以及对象之外，
因此您可以执行以下操作：

```
$a = new A();
$a->foo->sth; 
```

在第二个示例中，$foo 仅在 someMethod 中可用。

# c - Printf 在完成命令之前打印功能中的所有内容？

> ID：14219967
> 
> 赞同：1
> 
> 时间：2013-01-08T16:48:15.063
> 
> 标签：c, printf

我这里有一段代码：

```
Tree *rangeprint(Tree *t) {
  char first[20];
  char last[20];
  int f = 0;
  int l = 0;

  printf("First Entry?\n");

  while(1) {
    first[f] = getchar();
    if(first[f] == '\n') {
      first[f] = '\0';
      break;
    }
    f++;
  }

  printf("Last Entry?\n");

  while(1) {
    last[l] = getchar();
    if(last[l] == '\n') {
      last[l] = '\0';
      break;
    }
    l++;
  }

  printf("%s %s\n", first, last);
} 
```

当我运行此代码时，我在控制台中得到的输出是：

```
First Entry?
Last Entry? 
```

为什么它会跳过 while 循环并在执行之前打印所有内容？

更新 - 我将终止条件更改为 'x' 而不是 '\n' 并且确实可以正确打印。

在循环开始之前添加一个随机 getchar() 可以解决问题，因为 '\n' 被读入那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:00:49.960

它正在打印它们，只是它们是空字符串！（提示：`f`并`l`没有改变 - 我假设最后一个循环使用`f`是一个错字！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:02:43.680

`f`从输入中读取字符时，您没有前进指针。您一直在覆盖位置 0 的 chatacter 并且最终位置 0 包含`\0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:09:42.150

尝试在末尾添加 \n

```
 printf("First Entry?\n");
 printf("Last Entry?\n"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T17:11:08.477

从`getchar`std in 读取。如果先前输入中有任何换行符，则可能导致问题。就说吧，

`fflush(stdin);`

后

```
printf("First Entry?"); 
```

# sql-server - rank() 在蜂巢中

> ID：14219969
> 
> 赞同：2
> 
> 时间：2013-01-08T16:48:18.600
> 
> 标签：sql-server, hadoop, hive

我正在将 SQL Server 存储过程转换为 HiveQL。

我怎样才能转换类似的东西：

```
SELECT 
    p.FirstName, p.LastName,
    RANK() OVER (ORDER BY a.PostalCode) AS Rank 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:57:31.630

我已经看过这个用例几次了，有一种方法可以`RANK()`在 Hive 中使用 UDF 做类似的事情。

基本上有几个步骤：

*   将数据分组为`DISTRIBUTE BY`
*   对每组中的数据进行排序`SORT BY`

实际上[有一篇关于这个主题的好文章](http://www.edwardcapriolo.com/roller/edwardcapriolo/entry/doing_rank_with_hive)，你也可以[在这里](https://github.com/edwardcapriolo/hive-rank)找到 Edward Capriolo 的一些代码。

这是在 Hive 中进行排名的示例查询：

```
ADD JAR p-rank-demo.jar;
CREATE TEMPORARY FUNCTION p_rank AS 'demo.PsuedoRank';

SELECT
 category,country,product,sales,rank
FROM (
 SELECT
   category,country,product,sales,
   p_rank(category, country) rank
 FROM (
   SELECT
     category,country,product,
     sales
   FROM p_rank_demo
   DISTRIBUTE BY
     category,country
   SORT BY
     category,country,sales desc) t1) t2
WHERE rank <= 3 
```

这相当于 MySQL 中的以下查询：

```
SELECT
 category,country,product,sales,rank
FROM (
 SELECT
   category,country,product, sales,
   rank() over (PARTITION BY category, country ORDER BY sales DESC) rank
 FROM p_rank_demo) t
WHERE rank <= 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-16T23:15:22.910

对于遇到此问题的任何人，Hive 现在支持 rank() 和其他分析函数。 [https://cwiki.apache.org/confluence/display/Hive/LanguageManual+WindowingAndAnalytics](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+WindowingAndAnalytics)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T18:34:05.993

没什么大不了的，在 Hive 0.13.1 中，逗号不起作用:-(

所以我不用逗号就可以正常工作

（PARTITION BY category country ORDER BY sales DESC）

# core-data - 从 NSMangedObject 子类类对象中获取实体名称

> ID：14219970
> 
> 赞同：15
> 
> 时间：2013-01-08T16:48:19.147
> 
> 标签：core-data, nsmanagedobject

是否有一种内置方法可以从 NSManagedObjectSubclass 的类对象中获取实体名称？我知道这可以很容易地从子类的实例中确定，但我想问类本身。我可以编写一个类函数，但我宁愿自省地这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-03-09T22:16:15.773

您现在可以通过执行`NSManagedObject.entity().name`where `NSManagedObject()`is your subclass 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T17:20:08.163

如果您还没有，请查看 mogenerator。 [http://raptureinvenice.com/getting-started-with-mogenerator/](http://raptureinvenice.com/getting-started-with-mogenerator/)

它为核心数据添加了许多缺失的功能。特别是它使您不必重新生成实体类。

您可以遍历上下文中实体的键值：

[managedObjectContext 注册对象];

# hgsubversion - 使用 hgsubversion、svn 和 mercurial 创建新项目的正确方法是什么？

> ID：14219973
> 
> 赞同：0
> 
> 时间：2013-01-08T16:48:25.943
> 
> 标签：hgsubversion

我已将我的开发切换到 mercurial，但我仍然必须使用 hgsubversion 与 subversion 服务器交谈。对于 subversion 中已经存在的所有项目，我已经在本地使用 hg 启动并运行。

我的问题是：创建一个最终将存在于颠覆中的新项目的最佳工作流程是什么？

我尝试使用 hg init 启动一个新项目，然后推动颠覆。但我只是迷路了，无法让它工作。我决定最好的工作流程是将项目直接创建到 subversion 中，完全不知道 mercurial 的存在，然后用 hgsubversion 克隆。但我想知道是否有更好的方法。

对于它的价值，我们在 subversion 中使用了经典的 trunk/tags/branches 目录结构。其他开发者还在直接使用svn。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:43:25.097

> 我决定最好的工作流程是将项目直接创建到 subversion 中，完全不知道 mercurial 的存在，然后用 hgsubversion 克隆。

这不仅是最好的，而且只有一种可能。Init'ed hg repo with added later extension and Subversion repo in [path]**将不适**用于拉/推

* * *

## 补充（回复@bigh_29的评论）

是的，从 Mercurial 开始使用空的 Subversion 存储库（仅创建默认 dirmap）也会给我带来意想不到和不可预测的结果。

初始状态：

*   使用 TSVN 创建本地 (file:///) SVN-repo 和trunk/branches/tags 树（工具无关紧要）

`svn log file:///Z:/SVN`

`------------------------------------------------------------------------`

`r1 | Badger | 2013-01-09 12:00:10 +0600 (Ср, 09 янв 2013) | 1 line`

`Imported folder structure`

`------------------------------------------------------------------------`

*   克隆 repo（从 repo-root）到 Mercurial

`hg clone file:///Z:/SVN z:\HG`

```
[r1] Badger: Imported folder structure
no changes found
updating to branch default
0 files updated, 0 files merged, 0 files removed, 0 files unresolved 
```

（好的，Mercurial 不跟踪空目录，所以我们没有任何东西可以存储在变更集中）

`hg log -R z:\hg`产生空输出

*   常规工作流程测试 - 添加、提交、推送（TortoiseHG 最新）

    `% hg add --repository Z:\HG Z:\HG\Intro.txt`

    `[command completed successfully Wed Jan 09 12:17:31 2013]`

    `% hg commit ...`

    `Intro.txt`

    `committed changeset 0:0a3fc4a9213d`

    `[command completed successfully Wed Jan 09 12:17:31 2013]`

    `% hg --repository Z:\HG push file:///Z:/SVN`

    `pushing to file:///Z:/SVN`

    `searching for changes`

    `no changes found`

    `[command completed successfully Wed Jan 09 12:18:02 2013]`

“没有发现变化” - 坏消息，非常坏的消息。在 Mercurial 和上游 Subversion 中有不同的历史

```
>hg log

changeset:   0:0a3fc4a9213d
summary:     Added file

svn log file:///Z:/SVN
------------------------------------------------------------------------
r1 | Badger | 2013-01-09 12:00:10 +0600 (Ср, 09 янв 2013) | 1 line

Imported folder structure
------------------------------------------------------------------------ 
```

*   尝试将文件从 SVN WC 添加到 Subversion，添加

`>svn log file:///Z:/SVN`

`------------------------------------------------------------------------`

`r2 | Badger | 2013-01-09 12:22:38 +0600 (Ср, 09 янв 2013) | 1 line`

`Added main file`

`------------------------------------------------------------------------`

`r1 | Badger | 2013-01-09 12:00:10 +0600 (Ср, 09 янв 2013) | 1 line`

`Imported folder structure`

`------------------------------------------------------------------------`

*   从 SVN 拉取（真正获取）

`hg --repository Z:\HG fetch --verbose file:///Z:/SVN`

`pulling from file:///Z:/SVN`

`[r2] Badger: Added main file`

`A trunk/Topic.txt`

`Topic.txt`

`committed to "default" as fc8bf55ea98f`

`pulled 1 revisions`

`updating to 1:fc8bf55ea98f`

`resolving manifests`

`removing Intro.txt`

`getting Topic.txt`

`1 files updated, 0 files merged, 1 files removed, 0 files unresolved`

`merging with 0:0a3fc4a9213d`

`resolving manifests`

`getting Intro.txt`

`1 files updated, 0 files merged, 0 files removed, 0 files unresolved`

`Intro.txt`

`new changeset 2:98c16d1829d8 merges remote changes with local`

*   有丑陋的当地历史

![拉取后记录](../Images/cf07c6b3c3694cd90c6f89f7a415bce0.png)

并且仍然无法推送（“抱歉，找不到合并修订的 svn 父级。”）：我们的 0 在原点上没有父级

**但是，如果我将文件添加到 SVN 中的树**（空 .hgignore，无论如何它必须出现在 Mercurial repo 中）

```
> svn log file:///Z:/SVN -q -v
------------------------------------------------------------------------
r2 | Badger | 2013-01-09 13:44:47 +0600 (Ср, 09 янв 2013)
Changed paths:
   A /trunk/.hgignore
------------------------------------------------------------------------
r1 | Badger | 2013-01-09 13:43:27 +0600 (Ср, 09 янв 2013)
Changed paths:
   A /branches
   A /tags
   A /trunk
------------------------------------------------------------------------ 
```

克隆后我得到

```
>hg log
changeset:   0:71c7bc7bce68
tag:         tip
user:        Badger@1d57b098-00df-af47-a2e3-c1451e4b2f8d
date:        Wed Jan 09 07:44:47 2013 +0000
summary:     Added needed for successful cloning hgignore 
```

并且添加|提交的文件被推送到 Subversion 没有任何头痛

```
% hg --repository Z:\HG push file:///Z:/SVN
pushing to file:///Z:/SVN
searching for changes
[r3] Badger: File from Mercurial
pulled 1 revisions
nothing to rebase
0 files updated, 0 files merged, 0 files removed, 0 files unresolved

svn log file:///Z:/SVN -q -v -r "HEAD"
------------------------------------------------------------------------
r3 | Badger | 2013-01-09 13:59:15 +0600 (Ср, 09 янв 2013)
Changed paths:
   A /trunk/Test.txt
------------------------------------------------------------------------ 
```

**注意：**我在使用带有 SVN 来源的 Mercurial 分支的测试中失败：创建的（命名的）分支保存在这个分支变更集中在推送到 Subversion 后消失了（变更集出现在主干而不是预期的 /branches/BRANCHNAME）

# node.js - Express.js 注入中间件输出错误

> ID：14219974
> 
> 赞同：0
> 
> 时间：2013-01-08T16:48:29.193
> 
> 标签：node.js, express, connect, middleware

我正在使用 express.js 服务器并尝试将中间件注入应用程序实例。

```
app.configure(function() {
 app.use(express.bodyParser());
 app.use(express.methodOverride());
 app.use(app.router);
 app.use(express["static"](PUBLIC_PATH));
});

hello = function(req, res, next) {
 console.log("hello world");
 next();
};

app.configure('development', function() {
 app.use(hello());
 app.use(express.errorHandler({
 dumpExceptions: true,
 showStack: true
 }));
}); 
```

我正在尝试将`Hello()`函数注入到当前`app`实例中。但是当我从控制台运行代码时，它会返回“hello world”，但控制台中也会出现一些错误。我哪里做错了。

```
hello world

/Users/mma/Desktop/mustdelete/aaron/server/app.coffee:13
  return next();
         ^
TypeError: undefined is not a function
at Object.module.exports.exports.hello (/Users/mma/Desktop/mustdelete/aaron/server/app.coffee:13:14)
at Function.module.exports.app.configure.app.set.layout (/Users/mma/Desktop/mustdelete/aaron/server/app.coffee:16:30)
at Function.app.configure (/Users/mma/Desktop/mustdelete/aaron/node_modules/express/lib/application.js:395:61)
at module.exports (/Users/mma/Desktop/mustdelete/aaron/server/app.coffee:15:9)
at Object.<anonymous> (/Users/mma/Desktop/mustdelete/aaron/server/index.js:2:34)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:54:52.527

您不必传递函数的返回值（带括号）`hello()`，只需传递函数的名称（不带括号）`app.use(hello)`。

# c# - 插入段落时禁用自动编号列表

> ID：14219986
> 
> 赞同：0
> 
> 时间：2013-01-08T16:49:15.100
> 
> 标签：c#, .net, ms-word, office-interop

我有带编号列表的word文档。

1.  静态文本 1.
2.  **已添加书签的项目。**
3.  静态文本 3.

其中一项已添加书签，我需要将书签替换为包含多个段落的文本。

当我用包含几个段落的文本替换书签项目时，我会为添加的每个段落获得自动编号项目：

```
bookmark1.Range.Text = "Replaced P1."+Environment.NewLine
                      +"Replaced P2."+Environment.NewLine 
```

1.  静态文本 1.
2.  **更换P1。**
3.  **替换 P2。**
4.  静态文本 3.

如何跳过自动编号并将所有文本添加到单个列表项？

**UPD：** 编号列表样式也左对齐，并且每个插入的段落必须具有相同的左对齐。

像这样：

__ *1\. 静态文本 1\. 更多文本
更多文本
_* _2\. **更换P1。**
__**更换 P2。更多文字
更多文字** __3。静态文本 3.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:07:13.627

根据[这个 MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en/worddev/thread/60315605-717c-4397-84d5-96586a8b88e7)中接受的答案，这里的关键是使用`\v`转义字符作为`Shift`+`Enter`组合键（插入垂直制表符）。所以，基本上，你可以这样做：

```
// Get bookmark
var bookmark = myDocument.Bookmarks["myBookmark"];

// Get the list item
var listItem = bookmark.Range.ListParagraphs[1];

// Change the text using "Shift+Enter" escaped using "\v"
listItem.Range.Text = "Replacement Line 1\vReplacement Line 2\r"; 
```

（在 Word 2013 和 Word 互操作 API 版本 15 上成功测试）

# c# - 将字符串传递给用户控件

> ID：14219989
> 
> 赞同：0
> 
> 时间：2013-01-08T16:49:29.800
> 
> 标签：c#, string, parameters, user-controls, microsoft-metro

这几天我正在接近Metro App世界，请温柔。这是问题所在：

一个页面从另一个页面接收一个字符串

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    Title.Text = e.Parameter.ToString();
} 
```

我需要将此字符串传递给接收页面的用户控件。

如何将一个页面的参数传递给另一个页面的 UserControl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:41:15.497

像这样：

向您的用户控件添加一个属性：

```
public string MyText { get; set; } 
```

为您的用户控件命名。

```
<src:TopBarControl x:Name="MyTopBarControl" /> 
```

然后使用您的 NavigatedTo 方法：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    var _TextParam = e.Parameter.ToString();
    this.MyTopBarControl.MyText = _TextParam;
} 
```

这将为您的用户控件提供所需的内容。

您还可以通过将参数设置为页面的某些公共属性来绑定它。如果您尝试这种方法，请记住将用户控件的属性设置为依赖属性而不是 CLR 属性。如果您想要更好的解释，我写了一篇关于绑定的文章[http://blog.jerrynixon.com/2012/10/xaml-binding-basics-101.html](http://blog.jerrynixon.com/2012/10/xaml-binding-basics-101.html)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:18:06.767

假设用户控件是导航页面的一部分，您必须在 `OnNavigatedTo`覆盖时设置用户控件的属性。

例子：

```
 class MyUserControl : UserControl
 {
    public object Parameter {get;set;}
 } 
```

假设这个用户控件是`MyPage`

```
 class MyPage : Page
  {
    private MyUserControl myUserControl; // It is only for illustrations, Otherwise it goes to .designer.cs

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
       Title.Text = e.Parameter.ToString();
       myUserControl.Parameter = e.Parameter; // This is how to set the parameter in usercontrol.
     }
   } 
```

# vba - 如何判断插入点在“幻灯片”窗格中的位置？

> ID：14219990
> 
> 赞同：0
> 
> 时间：2013-01-08T16:49:32.453
> 
> 标签：vba, vsto, powerpoint, powerpoint-2007

在 PowerPoint 中，在“正常”视图中，窗口分为两个窗格，左侧是显示幻灯片缩略图的窗格，右侧是显示当前幻灯片的窗格。您可以在左侧面板中选择多张幻灯片，这在您想要复制、移动或删除幻灯片时很有用。

要判断当前在左侧面板中选择了哪些幻灯片，您可以使用`ActiveWindow.Selection.SlideRange`. 但是，如果您在左侧（缩略图）面板中的幻灯片*之间单击，您最终会得到一个插入点，并且：*

*   `ActiveWindow.Selection.Type`为零 ( `ppSelectionNone`)。
*   `ActiveWindow.Selection.SlideRange`给出一个错误。

我有一个问题分为两半：

1.  我怎样才能发现这种情况？（大概还有其他选择类型为“无”的情况）。
2.  如何知道插入点*在哪里*，以便在该点插入新幻灯片？

VBA 或 VSTO 代码都可以:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2022-01-27T00:22:01.647

回答第一个问题：

```
' The mouse cursor can be placed between slide thumbnails in the following views:
' - Normal View / Thumbnail Pane
' - Slide Sorter View
' - Slide Master View / Thumbnail Pane
' Returns true if the cursor is in the slide gap in these cases.
Function IsSlideGap() As Boolean
    On Error Resume Next

    With ActiveWindow

        Select Case .View.Type
            Case ppViewNormal, ppViewSlideMaster
                ' If the thumbnail pane (ViewType 11 or 12 ) is active but                                       
                ' nothing is selected, we must be in the slide gap
                If .Panes(1).Active And .Selection.Type = ppSelectionNone Then IsSlideGap = True
            Case ppViewSlideSorter
                If .Selection.Type = ppSelectionNone Then IsSlideGap = True
        End Select

    End With
End Function 
```

回答第二个问题：

```
' Note: used by slide/gap context menus only so assumes
' either thumbnail pane or sorter view active
Function GetSlideCursorIndex() As Long
    Dim lSlides As Long ' Track the number of slides in order
                        ' to check if the temporary slide was deleted.
    Dim oSld As Slide

    lSlides = ActivePresentation.Slides.Count

    ' Insert a temporary new slide
    CommandBars.ExecuteMso "SlideNew"

    DoEvents

    Set oSld = ActiveWindow.View.Slide

    With oSld
        GetSlideCursorIndex = .SlideIndex
        .Delete
    End With

    If ActivePresentation.Slides.Count <> lSlides Then Debug.Print "Something went wrong!"
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:00:40.637

我刚刚发现这个：[http ://skp.mvps.org/pptxp020.htm](http://skp.mvps.org/pptxp020.htm)

摘要：切换到`ppViewSlide`视图然后再返回，PowerPoint 将选择插入点之前的幻灯片（或第一张幻灯片，如果 IP 位于开头）。

我仍然对避免这种方法固有的屏幕闪烁的更好方法感兴趣（并且理想情况下不会改变选择）。

# javascript - 防止 touchmove 事件与 jquery UI 对话框的滚动冲突

> ID：14219992
> 
> 赞同：1
> 
> 时间：2013-01-08T16:49:34.213
> 
> 标签：javascript, jquery, jquery-ui, safari, touchmove

由于在 safari 等移动设备浏览器上，当用户拖动屏幕时，整个网站会随着手指一起移动。所以常见的解决方案是：

```
addEventListener('touchmove', function(e) { e.preventDefault(); }, true); 
```

这将阻止任何 touchmove 事件。但是，由于移动设备上的浏览器没有滚动条，当用户想要滚动 jquery ui 的对话框时，需要允许 touchmove 事件。该语句将阻止该事件。

```
addEventListener('touchmove', function(e) { 
if (e.target.id != 'dialog' ) 
e.preventDefault(); 
return false;
}, true); 
```

然后我添加此语句以允许对话框滚动。但是，该解决方案存在缺陷，因为背景将可拖动并再次与用户手指一起移动。如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:48:51.063

整天都在处理这个问题并找到了这个解决方案。当您希望它在 ipad/iphone/ipod 上滚动 safari mobile 上的对话框时，您需要使用以下命令：

```
if (/iPhone|iPod|iPad/.test(navigator.userAgent)) {
            $('iframe').wrap(function () {
                var $this = $(this);
                return $('<div />').css({
                    width: $this.attr('width'),
                    height: $this.attr('height'),
                    overflow: 'auto',
                    '-webkit-overflow-scrolling': 'touch'
                });
            });
        } 
```

# backbone.js - 如何将 URL 传递给 Backbone 中的集合

> ID：14219994
> 
> 赞同：2
> 
> 时间：2013-01-08T16:49:36.540
> 
> 标签：backbone.js

我需要在 Backbone 中构建几个仅通过 URL 不同的集合。这是我的模型：

```
App.Models.Main = Backbone.Model.extend({}); 
```

这是我的收藏：

```
App.Collections.Mains = Backbone.Collection.extend({
        model: App.Models.Main,
        initialize: function() {
            this.fetch({
                success: function(data) {
                    //console.log(data.models);
                }
            });
        },
    url: this.url
}); 
```

在我的路由器中，我尝试了：

```
mc = new App.Collections.Mains({ url: 'main-contact'});
mains = new App.Views.Mains({ collection: mc});
$('#web-leads').append(mains.el); 
```

但我收到一个错误：`Error: A "url" property or function must be specified`

如何将 URL 传递到集合中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:55:45.990

构造`Backbone.Collection`函数如下所示：

```
Backbone.Collection = function(models, options) { ... 
```

它期望选项作为第二个参数。第一个参数是用于初始化集合的模型列表。

您需要使用以下命令初始化集合：

```
mc = new App.Collections.Mains(null, { url: 'main-contact'}) 
```

此外，当您定义您的集合时，您没有`url`正确设置属性。表达式`this.url`是在定义模型时计算的，而不是在初始化时计算的。的上下文`this`不指向集合的任何实例，而是定义模型时的范围，可能是`window`. Javascript 允许您尝试将其设置为`window.url`，但由于`window`没有此类属性，因此将其设置为`undefined`。

代替：

```
App.Collections.Mains = Backbone.Collection.extend({
   url: this.url
}); 
```

您需要在`initialize`方法中设置url：

```
App.Collections.Mains = Backbone.Collection.extend({
    initialize: function(models, options) {
       if(options && options.url) {
           this.url = options.url;
       }   
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:01:11.293

这应该可行，但有点难看：

```
 mc = new (App.Collections.Mains.extend({ url: 'main-contact'}));
 mains = new App.Views.Mains({ collection: mc}); 
```

您基本上扩展了您的基本集合并在其上调用了一个新集合。展开它会是这样的：

```
MainContantCollection = App.Collections.Mains.extend({ url: 'main-contact'});
mc = new MainContactCollection();
mains = new App.Views.Mains({ collection: mc}); 
```