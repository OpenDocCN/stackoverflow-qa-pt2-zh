# StackOverflow 问答 16097000-16097999

# android - 消耗性的listView ui设计？

> ID：16097001
> 
> 赞同：0
> 
> 时间：2013-04-19T04:04:34.907
> 
> 标签：android, expandablelistview

我面临一个问题。

我需要设计一个 UI，基本上我已经完成了，但是有人建议我用`ExpandableListView`.

我没有任何想法来设计`ExpandableListView`。

1-是否可以使用`ExpandableListView`.

如果是，请指导我按照我的愿望设计它。

![在此处输入图像描述](https://i.stack.imgur.com/deg5N.jpg)

**问题：** - 在我的列表项中，两个包含按钮，其他只是文本。这就是为什么我想知道这种设计的可能性，它可以做或不做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:09:30.167

查看文档和这些教程

[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)

[ANDROID 中的可扩展 ListView](http://www.coderzheaven.com/expandable-listview-android-simpleexpandablelistadapter-simple-example/)

[android中的可扩展ListView简单示例](http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html.)

您可以使用此扩展列表项

```
ExpandableListView.setOnChildClickListener(new OnChildClickListener() 
{               
   public boolean onChildClick(ExpandableListView parent, View v,int groupPosition, int childPosition, long id) 
   { 
       // your code...
   }
} 
```

# axis2 - 肥皂/JMS Tibco 集成？

> ID：16097006
> 
> 赞同：0
> 
> 时间：2013-04-19T04:05:44.560
> 
> 标签：axis2, tibco-ems

是否有任何机构有任何示例，示例博客..设置soap/jms 与 tibco EMS 集成的说明

我已经使用 Active MQ 成功测试了 soap/jms，但使用相同的设置说明，无法与 tibco EMS 集成。

尽管 Axis2 通过初始化消息连接到 Tibco，但默认情况下，已部署的基于 soap wsdl 的队列不会出现在 Tibco EMS 中。

过去 3 天已经用谷歌搜索了 /yahooed.... 但没有成功

关于卡尔提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:58:21.793

好的 经过 3 天的 Slogging 找到了答案

队列的快速通道（类似于主题）

1) 登录 Tibco EMS 服务器，创建用户/密码并授予队列或主题的完全权限。

2) 在 Tibco EMS 上创建一个队列（与在 Axis2 的服务屏幕中看到的 Soap 服务的名称相同），并且用户应该有权访问创建的队列。

3）使用与用户具有相似权限的任何其他名称创建另一个临时队列[此队列将用于侦听设置到第一个队列中的 Soap 消息的响应]。

4) 从 Axis2 设置中删除标签 /Version.aar，或者还需要在 Tibco EMS-JMS 上创建版本所需的额外队列

5) 在axis2.xml 中的Axis2 服务器上搜索“transportReceiver & transportSender 添加如下定义的标签

```
<transportReceiver name="jms" class="org.apache.axis2.transport.jms.JMSListener">
<parameter name="tibQueueConnectionFactory">    
<parameter name="java.naming.factory.initial" locked="false">com.tibco.tibjms.naming.TibjmsInitialContextFactory</parameter>    
<parameter name="java.naming.provider.url" locked="false">tcp://<IP of JMS SERVER>:<PORT of JMS SERVER></parameter> 
<parameter name="transport.jms.ConnectionFactoryJNDIName" locked="false">QueueConnectionFactory</parameter>
<parameter name="transport.jms.ConnectionFactoryType" locked="false">queue</parameter>
<parameter locked="false" name="transport.jms.UserName"><userid as per JMS Queue proivelages></parameter>
<parameter locked="false" name="transport.jms.Password"><password as per JMS Queue privelages></parameter>
<parameter locked="false" name="transport.jms.CacheLevel">session</parameter>   
</parameter>
<parameter name="default">
<parameter name="java.naming.factory.initial" locked="false">com.tibco.tibjms.naming.TibjmsInitialContextFactory</parameter>
<parameter name="java.naming.provider.url" locked="false">tcp://<IP of JMS SERVER>:<PORT of JMS SERVER></parameter>
<parameter name="transport.jms.ConnectionFactoryJNDIName" locked="false">QueueConnectionFactory</parameter>
<parameter name="transport.jms.ConnectionFactoryType" locked="false">queue</parameter>
<parameter locked="false" name="transport.jms.UserName"><userid as per JMS Queue proivelages></parameter>
<parameter locked="false" name="transport.jms.Password"><password as per JMS Queue privelages></parameter>
<parameter locked="false" name="transport.jms.CacheLevel">session</parameter>
</parameter>
</transportReceiver> 

<transportSender name="jms" class="org.apache.axis2.transport.jms.JMSSender"/> 
```

重启 Tibco 服务器，然后重启 Axis2（独立/Tomcat）

下载并使用“Tibco UI - Gems”，连接到 Tibco EMS，打开 Axis2 指定队列并将回复设置为 Temp 队列并触发 Soap XML，然后观看魔术。

如果您没有 Gems，则编写 Java 代码以在 Axis2 指定的队列上生成消息，将回复设置为 TempQueue。触发 Soap XML 并验证临时队列中的答案。

关于 karthik

# actionscript-3 - AS3：添加 2 个正整数产生负整数

> ID：16097007
> 
> 赞同：0
> 
> 时间：2013-04-19T04:05:50.003
> 
> 标签：actionscript-3, int, addition, integer-overflow

我在 AS3 中制作了帕斯卡三角形。

在结果中，我发现 1037158320 和 1166803110 相加得到 -2091005866，一个负整数！

这很奇怪。我首先认为数量级太大而`int`无法容纳，但总和的数量级甚至大于两个加数。

此外，当一个数字接近帕斯卡三角形的一条线的中心时，它应该会增加，但 -2091005866 旁边的数字是 -1961361076，它更接近中心但幅度会减小！

任何可能的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T04:22:31.020

引用[ActionScript 3.0 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/int.html)：

> int 类允许您使用表示 32 位有符号整数的数据类型。int 类表示的值的范围是 -2,147,483,648 (-2^31) 到 2,147,483,647 (2^31-1)。

1037158320 + 1166803110 = 2203961430 大于 2147483647。

考虑使用[uint](http://www.adobe.com/livedocs/flash/9.0/ActionScriptLangRefV3/uint.html)或[Number](http://www.adobe.com/livedocs/flash/9.0/ActionScriptLangRefV3/Number.html)。

# mysql - MySQL查询以获取基于动态数据的列

> ID：16097009
> 
> 赞同：1
> 
> 时间：2013-04-19T04:06:11.420
> 
> 标签：mysql, sql

如何获得 MySQL 返回的“利润”值。totalCost 和 totalSell 从数据库中获取。

```
select 
  sum(cost) as totalCost
  , sum(sell) as totalSell
  , (totalSell-totalCost) as profit 
from orders 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T04:07:33.297

您为什么不尝试直接计算利润而不是使用*别名*？

试试这个：

```
Select SUM(cost) AS totalCost
     , SUM(sell) AS totalSell
     , (SUM(sell) - SUM(cost)) AS profit
FROM orders 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/f22ed/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:07:15.410

您不能在`select`声明它们的查询部分中使用别名：

```
select sum(cost) as totalCost, 
       sum(sell) as totalSell, 
       sum(sell) - sum(cost) as profit
from orders 
```

如果您想使用别名来执行此操作（出于某种原因），您可以在子查询中定义它们时这样做：

```
select *, totalCost - totalSell as profit
from ( select sum(cost) as totalCost, 
              sum(sell) as totalSell, 
       from orders ) t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T04:07:57.833

不要对别名执行操作。您需要更改`(totalSell-totalCost)` 为 `(sum(cost)-sum(sell))`

```
 Select sum(cost) as totalCost  , sum(sell) as totalSell, (sum(cost)-sum(sell)) as profit
     from orders 
```

# android - Android 上的 libgdx 文本字段语言

> ID：16097011
> 
> 赞同：1
> 
> 时间：2013-04-19T04:06:18.880
> 
> 标签：android, input, textfield, libgdx

如何在Android上以本机语言输入libgdx TextField？例如，我的意思是输入登录名或密码的能力。是的，我可以调用 smth like`Gdx.input.getTextInput`或原生 Android 对话框，但这真的很糟糕。

我的代码示例：

```
TextField loginField = new TextField("",getSkin());
loginField.setText("sdfdfsdаыва"); 
```

字段中的文本用 很好地绘制`setText()`，即皮肤字体包含所有必需的字形。但在 Android（模拟器和物理）上，我无法输入任何本机字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-12T10:36:41.973

对于使用拉丁文和西里尔文等短字母的用户文本输入，您可以使用 LibGDX FreeTypeFontGenerator & FreeTypeFontParameter ：

```
private BitmapFont yourCustomFont;
private FreeTypeFontGenerator generator;
private FreeTypeFontParameter parameter;
private TextFieldStyle textFieldStyle;
private TextField textField;

...

public void show(){

    ...

    // Font generating

    yourCustomFont = new BitmapFont();
    generator = new FreeTypeFontGenerator(
            Gdx.files.internal("yourFont.ttf"));
    parameter = new FreeTypeFontParameter();

    // Complete the following sequence with the letters you need(each only once)
    parameter.characters =
    "БбДдЄєabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUXYZ/&1234567890()[]#'\"";

    parameter.size = (Gdx.graphics.getHeight() / 20);
    yourCustomFont = generator.generateFont(parameter);
    generator.dispose(); //Don't forget to dispose the generator

    // TextFieldStyle
    textFieldStyle = new TextFieldStyle();
    textFieldStyle.font = yourCustomFont;
    textFieldStyle.fontColor = Color.BLACK;

    // TextField
    textField = new textField("",textFieldStyle);
    textField.setTextFieldListener(new TextFieldListener() {

         public void keyTyped(TextField textField, char key) {

        }
    });

    ...

} 
```

对于使用中文、韩文或日文等复杂字母的用户文本输入，您可能需要使用 .fnt + .png 格式的预渲染字体。为此，您可以使用 Hiero 或 BMFont 等软件。

[http://www.angelcode.com/products/bmfont/](http://www.angelcode.com/products/bmfont/)

[http://github.com/libgdx/libgdx/wiki/Hiero](http://github.com/libgdx/libgdx/wiki/Hiero)

使用 Hiero 或 BMFont 生成的复杂字母（韩文、日文、中文...）是大文件，因此您可能需要使用 LibGdx AssetManager 加载它们。然后将字体与您的 TextFieldStyle 一起使用，方法与前面描述的相同。

希望能帮助到你。

**编辑：** 现在，LibGDX 可以即时渲染复杂的字形： [https ://github.com/libgdx/libgdx/wiki/Gdx-freetype](https://github.com/libgdx/libgdx/wiki/Gdx-freetype)

# erlang - 如何处理通过 Erlang gen_server 打开的文件？

> ID：16097012
> 
> 赞同：1
> 
> 时间：2013-04-19T04:06:24.537
> 
> 标签：erlang, gen-server

我创建了一个模块，它以完全不同的方式透明地处理某些文件，作为 Erlang`file:open/2`和它返回的 IoDevice/文件描述符的替代品。在许多情况下，它只是简单地返回 Erlang 的结果`file:open/2`，而在其他情况下，它返回一个通过 HTTP API（CloudFiles 或 AWS S3）读写的自定义 IoDevice。

最近这是一个普通的模块，但我一直在尝试将其转换`gen_server`为更好地处理异步 HTTP 调用（以及其他原因）。这些自定义位运行良好，但我无法简单地`file:open/2`从 a调用`gen_server:handle_call/3`并返回生成的 IoDevice。问题是在我`gen_server`打开文件以使用 IoDevice 回复后，`gen_server:handle_info/2`我的`gen_server`.

```
...
handle_call({open, Path, Flags}, _From, State) ->
    Reply = case handle_external_file(Path) of
                false -> file:open(Path, Flags);
                true -> external_file:open(Path)
            end,
    %%
    %% Reply is {ok,{file_descriptor,prim_file,{#Port<0.1896>,14}}}
    %%
    {reply, Reply, State};
...
handle_info(Message, State) ->
    %%
    %% Message is {#Port<0.1896>,{data,[3,0,0,0,0,0,0,0,0]}}
    %%
    io:format("UNEXPECTED MESSAGE: ~p~n", [Message]),
    {noreply, State}
... 
```

我认为这与文档中的以下内容有关：

> IoDevice 实际上是处理文件的进程的 pid。此进程链接到最初打开文件的进程。如果与 IoDevice 链接的任何进程终止，则文件将被关闭并且进程本身将被终止。从此调用返回的 IoDevice 可用作 IO 函数的参数（请参阅 io(3)）。

有没有办法从 a 打开文件`gen_server`，将其 IoDevice 交给另一个进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:07:22.417

问题不在于文件：打开问题在于在 external_file:open(Path) 中打开的端口驱动程序。IoDevice 可以被任何进程使用，但只有在创建进程存在之前它才可用。而创建端口驱动程序的进程成为端口驱动程序的所有者，并且只有该进程才能与端口驱动程序通信。如果返回 Port ref 并且任何其他进程访问它，则程序可能会崩溃。

更好的方法是您不返回端口。而是将数据作为消息获取并使用相同的 gen_server 读取/写入端口。

# android - Android Sqlite 字符串的最大长度？

> ID：16097015
> 
> 赞同：14
> 
> 时间：2013-04-19T04:07:02.817
> 
> 标签：android, sqlite, max

关于这个问题：

[Android 上的 SQLite 如何处理长字符串？](https://stackoverflow.com/questions/3068180/how-sqlite-on-android-handles-long-strings)

它说默认 SQLite 存储在 10 亿个。这与实际站点相同。

但是，正如该人所说，它可能会更少。我想知道他们是否可以检查/这个值是多少？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T04:12:59.807

> **字符串或 BLOB 的最大长度**
> 
> SQLite 中字符串或 BLOB 中的最大字节数由预处理器宏 SQLITE_MAX_LENGTH 定义。该宏的默认值为 10 亿（1 亿或 1,000,000,000）。您可以使用如下命令行选项在编译时提高或降低此值：
> 
> ```
> -DSQLITE_MAX_LENGTH=123456789 
> ```
> 
> 当前的实现只支持长度为 231-1 或 2147483647 的字符串或 BLOB。一些内置函数，如 hex() 在此之前可能会失败。在对安全敏感的应用程序中，最好不要尝试增加最大字符串和 blob 长度。事实上，如果可能的话，最好将最大字符串和 blob 长度降低到几百万的范围内。
> 
> 在 SQLite 的部分 INSERT 和 SELECT 处理期间，数据库中每一行的完整内容被编码为单个 BLOB。所以 SQLITE_MAX_LENGTH 参数也决定了一行的最大字节数。

来自[http://www.sqlite.org/limits.html](http://www.sqlite.org/limits.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T18:55:47.620

无法在运行时读取 Android 中的 SQLite 限制。（SQLite在其 C API[中为此提供了一个函数](http://www.sqlite.org/c3ref/limit.html)，但 Android 并未公开此函数。）

无论如何，我不知道有哪个 Android 供应商降低了 SQLite 的任何限制。（通常，当他们在自己的应用程序中需要它或尝试优化时，他们会增加一些限制或启用某些选项，但他们从不费心去改变一些东西。）

# css - 寻找生成文本内容的 CSS？

> ID：16097016
> 
> 赞同：0
> 
> 时间：2013-04-19T04:07:05.493
> 
> 标签：css, localization, internationalization

我正在开发一个国际化/本地化 Web 应用程序的项目。我正在研究什么 CSS 构造可以插入或生成文本内容。

我知道[::before 和 ::after 伪元素](http://dev.w3.org/csswg/selectors3/#gen-content)，并且基于 MDN[内容 CSS 属性](https://developer.mozilla.org/en-US/docs/CSS/content)文档，我认为这就是全部。还有其他我应该注意的结构吗？

```
element:after  { style properties }  /* CSS2 syntax */

element::after { style properties }  /* CSS3 syntax */ 
```

另外，我知道我有一些图像（和图像精灵），其中包含用于`background-url`构造的英文单词。

**编辑：**我最初的问题并不清楚，但我正在重构整个应用程序中的硬编码语言字符串，并试图在 CSS 中找到它可能存在的位置。我对服务器和客户端生成的视图充满信心，对带有文本内容的图像不太有信心，并且不清楚 CSS 构造可能包含英文可显示文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:09:32.027

您在问题中提到的是 CSS 必须生成文本内容，如果我们不计算[CSS3 Generated and Replaced Content Module](http://www.w3.org/TR/css3-content/)，这是 2003 年的工作草案。草案使该`content`属性也适用于普通元素，因此您可以*替换*元素内容，而不仅仅是添加内容（这样您就可以拥有`.greeting:lang(en) { content: "Hello world!" } .greeting:lang(es) { content: "¡Hola, mundo!" }`）。但这仅在 Opera 中实现。

使用 CSS 进行本地化的一种更现实的方法是将 HTML 文档中的所有语言变体作为具有`lang`属性的不同元素放置，并在 CSS 中在它们之间进行选择，例如

```
<style>
[lang=es] [lang=en], 
[lang=en] [lang=es] 
  { display: none; }
</style>
<body lang=en>
<p lang=en>Hello world!</p>
<p lang=es>¡Hola, mundo!</p> 
```

然后，您只需更改元素`lang`上的属性值即可更改可见文本的语言。`body`

这种方法有本质的缺陷，所以我描述这个基本上是为了表明**CSS 不是本地化的答案。**这是你能得到的最好的方式，但它并不好。对于网页，您不希望为搜索引擎提供内容中包含如此多种语言的页面。对于应用程序，JavaScript 是一个更好的工具。

另一方面，本地化对样式提出了一些特定的[挑战](http://www.cs.tut.fi/~jkorpela/www/multicss.html)，例如文本用完它们的框，因为某些翻译比视觉设计师预期的时间长两倍。

# ajax - 字符串内的jQuery循环？

> ID：16097018
> 
> 赞同：0
> 
> 时间：2013-04-19T04:07:28.713
> 
> 标签：ajax, jquery

在这里，我在一个 jQuery 循环中，我所做的只是创建一个字符串并将其附加到一个 div 中。到目前为止很简单吧？

好吧，我也在循环内循环。问题是我的循环内的循环正在生成完全相同的结果。

所以我的第一个循环是循环播放一些电视频道，第二个循环是循环播放一些电视节目。问题是我的电视节目对于每个频道都是一样的。相当愚蠢的有线网络对吧？

如何循环播放所有电视节目并将它们附加到正确的电视频道？

```
shows='';
// loop through the tv channels
$(playlist).each(function(i,value){

// loop through the tv shows
$(value.videos).each(function(i,value){
    shows += '<div class="show"><a href="#"><p>'+tv show+'</p></a></div>';
}); end tv show loop

string = '<div class="channel">'+
            '<h1>value.name</h1>'+
            '<div class="shows">'+shows+'</div>'+
        '</div>';

$(string).appendTo('#streams');

}); // end tv chanel loop 
```

我希望 html 输出看起来像什么

```
<div class="channel">
<h1>channel name</h1>
<div class="shows">
    <div class="show"><a href="#"><p>show name</p></a></div>
    <div class="show"><a href="#"><p>show name</p></a></div>
    <div class="show"><a href="#"><p>show name</p></a></div>
</div> 
```

```
<!-- repeat again --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:12:41.477

你需要`shows='';`在第一个循环中使用

```
// loop through the tv channels
$(playlist).each(function(i,value){
shows='';
........
}); 
```

您需要`shows`为新频道清空字符串。但您没有这样做。所以它不断地附加到前一个字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:14:40.180

有多个问题

1.  变量`shows`需要在每个`playlist`循环中重置
2.  `value.name`是一个变量值，因此不能作为字符串添加
3.  `tv show`可能必须更改为`tv.show`

尝试

```
// loop through the tv channels
$(playlist).each(function(i, value) {
    var shows = '';

    // loop through the tv shows
    $(value.videos).each(function(i, tv) {
        shows += '<div class="show"><a href="#"><p>' + tv.show
                + '</p></a></div>';
    }); // end tv show loop

    string = '<div class="channel">' + '<h1>' + value.name + '</h1>'
            + '<div class="shows">' + shows + '</div>' + '</div>';

    $(string).appendTo('#streams');

}); // end tv chanel loop 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/8mQpX/1/)

# ios - 向 ios 发送推送通知以与离线用户聊天，openfire xmpp

> ID：16097020
> 
> 赞同：17
> 
> 时间：2013-04-19T04:07:36.830
> 
> 标签：ios, push-notification, xmpp, chat, openfire

我有一个使用 openfire 的 ios 聊天应用程序，我需要做的是在消息 (1) 因任何原因无法传递时发送推送通知，(2) 应用程序处于挂起状态，即无法生成通知在其自己的。

我已经阅读了有关 stackoverflow 和其他地方的大多数相关问题/建议，并且我对我的问题的解决方案很少。我不是ios开发人员，前几天对openfire或xmpp一无所知，所以我担心我对事物的理解可能不完整，我的解决方案可能存在缺陷。

请确认我对它的理解，并建议我是否遗漏了什么或者是否有更好的方法。还请就实施下面列出的特定解决方案的复杂程度提出建议。

这里的挑战是确定何时需要推送以及在何处启动流程，因此

1) 一种方法是使用 xmpp 的 xep-0184 实现来检查消息是否已传递。为此，我们应该在 ios 数据库中有一些带有消息的传递标志，当从另一端接收到传递的响应时，它会更新。所以我们需要在一段时间后检查这个标志，如果交付状态为假，则使用消息启动推送过程。看起来是一个复杂的解决方案（等待响应..检查标志有一些时间延迟..不是很令人印象深刻）

2）更直接的方法是在openfire中做一些事情，当openfire无法传递消息时将其存储在离线表中，我们可以对该部分进行一些拦截并使用消息启动推送过程。这看起来是正确的方法，但我真的很害怕在 openfire 中得到那么多东西并改变一些东西（这也可能很容易，用过 openfire 的人可以告诉我吗？）

3) 这是我最后的手段，这不是解决方案.. 但如果我不能在预期的时间范围内（从现在起一周）内正确完成，我们计划为所有消息发送推送通知。oppenfire 会处理正常的聊天，而我们的服务器会为每条消息发送一个推送，但是当应用程序处于前台时，我们会做一些事情来处理不需要显示的额外推送消息，否则只要有一个推送就会收到信息。你们如何看待这种临时的方法（我们当然必须尽快改变它），这是可行的（或者我在这里也遗漏了一些东西）。

PS谁能告诉Whatsapp和其他流行的应用程序如何处理这个？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T07:26:09.573

XMPP 在整个 XMPP 会话期间需要持久的套接字连接或“持久的”BOSH 连接。我认为您的挑战是 iOS 不允许您在后台运行您的应用程序和套接字。每当您的 iOS 应用程序进入后台时，iOS 都会终止您的套接字连接，并且您的 Openfire 服务器会终止您的 XMPP 会话。这意味着用户**离线**。这也是该用户的传入消息进入离线存储的原因。

很抱歉这个回复，但你建议的所有 3 个解决方案都是可怕的黑客 ;-)。如果你想提出一个好的解决方案，你必须深入研究 XMPP 和 iOS。1 周是一个非常短的时间框架。

> 谁能告诉 Whatsapp 和其他流行的应用程序如何处理这个问题？

它们使 XMPP 会话保持活动状态。这仅适用于经过高度修改的 XMPP 服务器，它们之间的一些“XMPP 客户端代理”可以在您的应用程序处于后台时保持会话运行，或者两者兼而有之。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T02:00:40.797

我有一个解决方案给你。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.ary_UserStatus = [NSMutableArray array];
    NSMutableArray *ary_TempFromUserDefaults = [NSMutableArray array];
    ary_TempFromUserDefaults = [[NSUserDefaults standardUserDefaults] valueForKey:@"KejdoUserStatus"];

    if ([ary_TempFromUserDefaults count]>0)
    {
         self.ary_UserStatus = [[NSUserDefaults standardUserDefaults]    valueForKey:@"KejdoUserStatus"];
       }

      self.df_UserStatus = [[NSDateFormatter alloc] init];
      [self.df_UserStatus setDateFormat: @"hh:mm a MM/dd/yyyy"];
}

- (void)xmppStream:(XMPPStream *)sender didReceivePresence:(XMPPPresence *)presence
{
    DDLogVerbose(@"%@: %@ - %@", THIS_FILE, THIS_METHOD, [presence fromStr]);

    NSString *str_UserName = [[presence from] user];
    NSString *str_LastSeenDate = [self.df_UserStatus stringFromDate:[NSDate date]];
    NSMutableDictionary *mdic_UserPresence = [[NSMutableDictionary alloc] init];

    [mdic_UserPresence setValue:str_UserName forKey:@"Name"];
    [mdic_UserPresence setValue:str_LastSeenDate forKey:@"Date"];
    [mdic_UserPresence setValue:[presence type] forKey:@"Type"];

    if ([self.ary_UserStatus count]>0)
    {
        int index;
        BOOL IS_exist=FALSE;
        for (int i=0; i<[self.ary_UserStatus count]; i++)
        {
            NSString *str_UserFromArray = [[self.ary_UserStatus objectAtIndex:i] valueForKey:@"Name"];
            if ([str_UserName isEqualToString:str_UserFromArray])
            {
                IS_exist = TRUE;
                index = i;
                [[NSUserDefaults standardUserDefaults] setObject:str_UserName forKey:@"Status"];
            }
            else
            {
            }

        }
        if (IS_exist) {
            [self.ary_UserStatus replaceObjectAtIndex:index withObject:mdic_UserPresence];
        }
        else
        {
            [self.ary_UserStatus addObject:mdic_UserPresence];
        }
    }
    else
    {
        [self.ary_UserStatus addObject:mdic_UserPresence];
    }

    [[NSUserDefaults standardUserDefaults] setObject:self.ary_UserStatus forKey:@"KejdoUserStatus"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"UserStatusChangeNotification" object:self];

} 
```

以及在聊天中向其他用户发送消息的任何地方。做这个

```
 if(appDelegate.ary_UserStatus.count>0)
    {
     for (int i=0; i<[appDelegate.ary_UserStatus count]; i++)
     {
      if ([jid.user isEqualToString:[NSString stringWithFormat:@"%@",[[appDelegate.ary_UserStatus objectAtIndex:i] valueForKey:@"Name"]]])
        {
         if ([[[appDelegate.ary_UserStatus objectAtIndex:i] valueForKey:@"Type"] isEqualToString:@"available"])
           {
                                // Do something like table reload.
                                break;
             }
               else
                    [self sendPushNotification];
           }
         }
       }
        else
            [self sendPushNotification]; 
```

# php - php文件未正确加载显示空白页

> ID：16097027
> 
> 赞同：0
> 
> 时间：2013-04-19T04:08:08.397
> 
> 标签：php, html, linux

我有一个名为 Choice.php 的 php 文件，它应该显示 html 内容。我在linux服务器上运行它。我将权限设置为 700，当我尝试通过 url 访问choice.php 文件时，我得到一个空白页。我似乎无法弄清楚为什么会这样。有什么建议么？

```
<?php
echo "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n"; 
echo "    \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n"; 
echo "\n"; 
echo "<html xmlns=\"http://www.w3.org/1999/xhtml\">\n"; 
echo "<head>\n"; 
echo "  <meta http-equiv=\"Content-Type\" content=\n"; 
echo "  \"text/html; charset=us-ascii\" />\n"; 
echo "\n"; 
echo "  <title>Choose</title>\n"; 
echo "</head>\n"; 
echo "\n"; 
echo "<body>\n"; 
echo "  <form action=\"index.php\" method=\"post\" enctype=\n"; 
echo "  \"application/x-www-form-urlencoded\">\n"; 
echo "    <h1>Choose</h1>\n"; 
echo "\n"; 
echo "    <p><input type=\"radio\" name=\"Radio\" value=\"1\" /><font size=\"5\"\n"; 
echo "    color=\"#0033CC\">Instant Psychology</font><br />\n"; 
echo "    <br />\n"; 
echo "    <input type=\"radio\" name=\"Radio\" value=\"2\" /><font size=\"5\"\n"; 
echo "    color=\"#CC0000\">Instant Geography</font><br />\n"; 
echo "    <br />\n"; 
echo "    <input type=\"radio\" name=\"Radio\" value=\"3\" /><font size=\"5\"\n"; 
echo "    color=\"#660033\">Instant Gastronomy</font><br />\n"; 
echo "    <br />\n"; 
echo "    <input type=\"submit\" name=\"Submit\" value=\"Go\" /></p>\n"; 
echo "  </form>\n"; 
echo "</body>\n";   
echo "</html>\n"; 
echo "\n";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:11:23.353

一个文件需要对`other`/具有读取权限`world`才能通过网络服务器访问（即通过使用 url）。这样做的原因既是为了让网络服务器可以读取给定的文件，又是为了让网络可以访问它。使用`700`时，只有文件的所有者才能访问它。`644`是您想要的（大多数）文件和`755`目录。

正确的权利是（`tim`作为我的用户名）：

```
$ ls -l Choice.php
-rw-r--r-- 1 tim tim    0 19.04.13 06:14 Choice.php 
```

查看Tuxfiles.org上的[Linux 文件权限](http://www.tuxfiles.org/linuxhelp/filepermissions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:12:34.837

您可能需要检查 Linux 服务器上的 Apache 和 PHP 配置，因为它似乎很糟糕。它在我的 Debian LAMP 安装上可以 100% 正常工作。检查您的错误日志文件，看看它是否显示有关访问的页面和时间的任何内容。尝试更改权限，直到它适合您。

# php - 根据特定条件在 MySQL 数据库中选择随机条目

> ID：16097031
> 
> 赞同：1
> 
> 时间：2013-04-19T04:08:17.320
> 
> 标签：php, mysql

好吧，假设我的 MySQL 表设置了类似于以下内容的条目：

```
id  code            sold
1   JKDA983J1KZMN49  0
2   JZMA093KANZB481  1
3   KZLMMA98309Z874  0 
```

我希望它在数据库中已经存在的范围内选择一个随机 ID（或者只是从 1-X 开始），然后将它分配给一个变量，以便我自己采取行动。因此，假设我们要选择**一个**未售出的代码（标记为 0 而不是 1），然后我们会选择它。

现在，它不必是 100% 随机的，它可以检查第一个是否已售出，如果没有，请继续。但我不能 100% 确定如何去做。片段将不胜感激，因为我可以自己轻松解决问题，我只需要一个例子来看看我要去哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:10:42.360

如何使用 WHERE 和 ORDER BY RAND()

```
SELECT id, code
FROM tablename
WHERE sold = 0
ORDER BY RAND()
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:14:02.610

如果您不需要随机数，请不要使用它。它会对性能产生非常负面的影响。由于您在帖子中提到没有必要，因此我建议您使用上面 Ezequiel 的答案并放弃兰特。有关更多信息，请参阅[以 PHP 随机顺序检索 MYSQL 数据的最有效方法](https://stackoverflow.com/questions/2564780/most-efficient-way-to-retrieve-mysql-data-in-random-order-php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T04:20:42.393

看来您的代码已经是随机的了，为什么不直接取第一项呢？如果您的数据库中有许多未售出的记录，则执行典型`ORDER BY RAND()`操作会损害数据库性能。

```
SELECT *
FROM codes
WHERE sold = 0
LIMIT 1
FOR UPDATE; 
```

我还添加了`FOR UPDATE`以避免竞争条件，假设您正在使用交易，因为您稍后会更新记录（以实际出售它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T04:11:26.303

你有没有尝试过

```
SELECT * FROM myTable WHERE sold = 0 ORDER BY RAND() LIMIT 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T04:13:54.067

添加`ORDER BY RAND()`到`SELECT`查询的其余部分是完成此操作的最直接方法。

# javascript - 当我包含 jquery.validate.js 时，为什么“Uncaught TypeError: Object [object Object] has no method 'validate'”

> ID：16097036
> 
> 赞同：-1
> 
> 时间：2013-04-19T04:09:15.507
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-validate

我的代码：

```
@model ColumnVM
@{
    ViewBag.Title = "AddColumn3";
    Layout = "../Shared/_layout2.cshtml";
}
<script type="text/javascript">
    $(function () {
        $("form").validate().settings.submitHandler = function (form) {
            alert('valid form');
            form.submit();
        };
    });

</script>
@using (Html.BeginForm("addcolumn3", "Course", FormMethod.Post))
{

    <fieldset>
        <legend>ColumnVM</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

在 _Layout2.cshtml

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Layout.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

</head>
<body>
            @RenderBody()

</body>
</html> 
```

现在浏览器显示错误：Uncaught TypeError: Object [object Object] has no method 'validate'。如果我更改 Layout=null，并在代码中手动添加

```
<script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

它有效！我不知道为什么。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:59:43.460

尝试为您的布局页面指定完整的虚拟路径：

```
@model ColumnVM
@{
    ViewBag.Title = "AddColumn3";
    Layout = "~/Views/Shared/_layout2.cshtml";
} 
```

就像@Tats_innit 所说，这可能是路径解析错误。如果它是唯一的，您也可以只使用布局的名称，因为 MVC 最终会在 Shared 文件夹中查找不合格的视图/布局。

# list - 删除具有相同元素但顺序不同的元组列表的功能

> ID：16097038
> 
> 赞同：2
> 
> 时间：2013-04-19T04:09:19.370
> 
> 标签：list, haskell, tuples

假设我有元组列表，例如

`[(1,2),(2,1),(3,5)]`

我将如何定义一个函数，以便删除具有相似元素但顺序不同的元组？所以列表变成了

`[(1,2),(3,5)]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T04:11:06.110

与相等函数一起使用[`nubBy`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3anubBy)，该函数将两个元组与交换或未交换的相等元素进行比较。[该`swap`功能](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Tuple.html#v%3aswap)使这更容易：

```
nubSwapped :: (Eq a) => [(a, a)] -> [(a, a)]
nubSwapped = nubBy $ \a b -> a == b || swap a == b 
```

# netlogo - 如何在 NetLogo 中更改绘图背景颜色

> ID：16097041
> 
> 赞同：1
> 
> 时间：2013-04-19T04:09:26.330
> 
> 标签：netlogo

有没有办法改变 NetLogo 中绘图窗口的背景颜色？

（我希望乌龟是黑色和白色的，我想用绘图笔来统计这两种乌龟的颜色，以匹配它们的颜色。显然，白色的笔在白色背景上是不可见的。）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:20:54.360

NetLogo 没有内置方法来更改绘图的背景颜色。可以说，这是它应该有的东西。如果您对此感觉足够强烈，我建议您向 GitHub 发送功能请求，`feedback@ccl.northwestern.edu`甚至[直接在 GitHub 上打开问题](https://github.com/NetLogo/NetLogo/issues?state=open)。

现在，与此同时，有没有办法解决它？好吧，我什至觉得它几乎是肮脏的，但你*可以*这样做：

创建一个您希望背景颜色的新绘图笔，并将其设置为“线条模式”。这支笔必须是绘图笔列表中的第一个，因此它在其他笔之前绘制。（这可能需要删除您的其他笔并重新创建它们，因为我认为 NetLogo 没有简单的方法来重新排序绘图笔。）

现在将以下内容放入笔的**更新命令**中：

```
plot-pen-reset
let y plot-y-min
while [ y <= plot-y-max ] [
   plotxy plot-x-min y
   plotxy plot-x-max y
   set y y + 0.05
] 
```

这将一条一条地绘制线条以填充您的背景。根据屏幕上绘图的大小，您可能希望使用“间隔”（`0.05`此处）来找到不留下白线的最大值。

请注意：这会减慢您的模型速度。但是，如果您的绘图轴从未重新缩放，也许您可​​以将代码放在笔的**设置命令**中，这样它只执行一次。

# .net - 在 unityscript 中格式化 .NET TimeSpan

> ID：16097043
> 
> 赞同：0
> 
> 时间：2013-04-19T04:09:40.707
> 
> 标签：.net, datetime, unity3d, unityscript

我正在尝试使用 unityscript 在 Unity 中格式化 .NET TimeSpan。

我已经导入`System`了，我正在尝试这样做：

```
c.timeLeft = (now - c.endTime).ToString("HH:mm:ss.f"); 
```

`c.timeLeft`是一个字符串。

`now`是`DateTime.Now`

`c.endTime`是一个`DateTime`

`now -c.endTime`返回一个时间跨度

团结告诉我

```
No appropriate version of 'System.TimeSpan.ToString' for the argument list '(String)'        was found. 
```

但是 .NET 文档告诉我这`String.ToString(String)`是[有效的。](http://msdn.microsoft.com/en-us/library/dd992632.aspx)

这是怎么回事？我怎样才能像我期望的那样使用 .NET 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:15:03.323

等一下

[http://msdn.microsoft.com/en-us/library/dd992632.aspx](http://msdn.microsoft.com/en-us/library/dd992632.aspx)

支持：4.5、4

Unity 使用 .NET 2.0

这就是我不能使用的原因`TimeSpan.ToString(String)`，因为我的 .NET 版本不存在它

# python - Drive-SDK Python 代码未通过选定的标题词获取驱动器文件

> ID：16097050
> 
> 赞同：2
> 
> 时间：2013-04-19T04:10:31.390
> 
> 标签：python, get, google-drive-api

我需要将查询传递给函数。应该很简单！这是代码：

```
def get_file_ID(q):
  dump = drive_service.files().list(q=q, fields = 'items(mimeType,id,title,downloadUrl)').execute()
  fileItems = dump['items']
  for item in fileItems:
    try:
        if item['mimeType'] == "application/octet-stream":
          return item['id']
    except KeyError:
        print "No item of the required type, or item has been deleted"
        return None

def lets_go_get(file_Id):
  f = drive_service.files().get(fileId=file_Id).execute()
  resp, content = drive_service._http.request(f.get('id'))
  if resp.status == 200:
      #print 'Status: %s' % resp
      return content
  else:
      print 'An error occurred: %s' % resp
      return None

text = raw_input('Enter title search text: ')
query = "title contains '" + text +"'"
selectedFile = "'" + get_file_ID(query) +"'"

print lets_go_get(selectedFile) 
```

我收到以下错误：

```
 HttpError: <HttpError 404 when requesting https://www.googleapis.com/drive/v2/files/%270BxDfMkL6x0wjMS03Nz.....Tk%27?alt=json returned "File not found: '0BxDfMkL6x0wjMS03.....MTU5NjQ0ZjdhOTk'"> 
```

但是，当我用 DIRECT fileID 代替对“lets_go_get”的最后一次调用时，如下所示：

```
print lets_go_get('0BxDfMkL6x0wjMS03.....MTU5NjQ0ZjdhOTk') 
```

然后它工作。

我看不出两者有什么区别。谁能解释我错过了什么？？？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:54:34.877

用于`downloadUrl`下载内容：

```
f = drive_service.files().get(fileId=file_Id).execute()
resp, content = drive_service._http.request(f.get('downloadUrl')) 
```

文档在“Python”选项卡上有一个工作示例：[https ://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)

# python - 在文本中查找对称词

> ID：16097051
> 
> 赞同：1
> 
> 时间：2013-04-19T04:10:35.203
> 
> 标签：python, function

我必须编写一个函数，它接受一个参数 text，其中包含一个 str 形式的文本块，并返回一个“对称”单词的排序列表。对称词被定义为一个词，其中对于所有值 i，字母 i 位置距单词开头的位置和字母 i 位置距单词末尾的位置与字母表的各个末端的距离相等。例如，bevy 是一个对称单词：b（从单词开头的 1 个位置）是字母表的第二个字母，y（从单词末尾的 1 个位置）是字母表的倒数第二个字母；e（距单词开头的 2 个位置）是字母表的第五个字母，而 v（距单词末尾的 2 个位置）是字母表的倒数第五个字母。

例如：

```
>>> symmetrics("boy bread aloz bray")
['aloz','boy']
>>> symmetrics("There is a car and a book;")
['a'] 
```

我能想到的解决方案就是这个，但我不能运行它，因为它是错误的：

```
def symmetrics(text):
    func_char= ",.?!:'\/"
    for letter in text:
        if letter in func_char:
          text = text.replace(letter, ' ') 
    alpha1 = 'abcdefghijklmnopqrstuvwxyz'
    alpha2 = 'zyxwvutsrqponmlkjihgfedcba'
    sym = []
    for word in text.lower().split():
        n = range(0,len(word))
        if word[n] == word[len(word)-1-n]:
            sym.append(word)
        return sym 
```

上面的代码没有考虑到 alpha1 和 alpha2 的位置，因为我不知道怎么写。有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:12:57.830

这里有一个提示：

```
In [16]: alpha1.index('b')
Out[16]: 1

In [17]: alpha2.index('y')
Out[17]: 1 
```

解决问题的另一种方法是使用以下[`str.translate()`](http://docs.python.org/2/library/stdtypes.html#str.translate)方法：

```
import string

def is_sym(word):
    alpha1 = 'abcdefghijklmnopqrstuvwxyz'
    alpha2 = 'zyxwvutsrqponmlkjihgfedcba'
    tr = string.maketrans(alpha1, alpha2)
    n = len(word) // 2
    return word[:n] == word[::-1][:n].translate(tr)

print(is_sym('aloz'))
print(is_sym('boy'))
print(is_sym('bread')) 
```

（翻译表的构建可以很容易地分解出来。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:27:34.573

for循环可以修改为：

```
for word in text.lower().split():
    for n in range(0,len(word)//2):
        if alpha1.index(word[n]) != alpha2.index(word[len(word)-1-n]):
            break
    else:
        sym.append(word)
return sym 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T04:40:35.260

根据您的对称规则，我们可以使用以下`is_symmetric_word`函数验证对称词：

```
def is_symmetric_word(word):
    alpha1 = 'abcdefghijklmnopqrstuvwxyz'
    alpha2 = 'zyxwvutsrqponmlkjihgfedcba'
    length = len(word)
    for i in range(length / 2):
        if alpha1.index(word[i]) != alpha2.index(word[length - 1 - i]):
            return False

    return True 
```

然后从文本中获取所有唯一对称词的整个函数可以定义为：

```
def is_symmetrics(text):
    func_char= ",.?!:'\/;"
    for letter in text:
        if letter in func_char:
          text = text.replace(letter, ' ') 
    sym = []
    for word in text.lower().split():
        if is_symmetric_word(word) and not (word in sym):
            sym.append(word)

    return sym 
```

以下是您提供的两个测试用例：

```
is_symmetrics("boy bread aloz bray")           #['boy', 'aloz']
is_symmetrics("There is a car and a book;")    #['a'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T04:47:41.023

先上代码。代码下方讨论。

```
import string

# get alphabet and reversed alphabet
try:
    # Python 2.x
    alpha1 = string.lowercase
except AttributeError:
    # Python 3.x and newer
    alpha1 = string.ascii_lowercase

alpha2 = alpha1[::-1]  # use slicing to reverse alpha1

# make a dictionary where the key, value pairs are symmetric
# for example symd['a'] == 'z', symd['b'] == 'y', and so on
_symd = dict(zip(alpha1, alpha2))

def is_symmetric_word(word):
    if not word:
        return False  # zero-length word is not symmetric
    i1 = 0
    i2 = len(word) - 1
    while True:
        if i1 >= i2:
            return True  # we have checked the whole string
        # get a pair of chars
        c1 = word[i1]
        c2 = word[i2]
        if _symd[c1] != c2:
            return False # the pair wasn't symmetric
        i1 += 1
        i2 -= 1

# note, added a space to list of chars to filter to a space
_filter_to_space = ",.?!:'\/ "
def _filter_ch(ch):
    if ch in _filter_to_space:
        return ' '  # return a space 
    elif ch in alpha1:
        return ch # it's an alphabet letter so return it
    else:
        # It's something we don't want.  Return empty string.
        return ''

def clean(text):
    return ''.join(_filter_ch(ch) for ch in text.lower())

def symmetrics(text):
    # filter text: keep only chars in the alphabet or spaces
    for word in clean(text).split():
        if is_symmetric_word(word):
            # use of yield makes this a generator.
            yield word

lst = list(symmetrics("The boy...is a yob."))
print(lst)  # prints: ['boy', 'a', 'yob'] 
```

*   无需输入两次字母；我们可以反转第一个。

*   我们可以制作一个字典，将每个字母与其对称字母配对。这将使测试任何给定的字母对是否是对称对变得非常容易。该函数`zip()`将两个序列配对；它们需要具有相同的长度，但由于我们使用的是字符串和字符串的反向副本，因此它们的长度将相同。

*   最好写一个做一件事的简单函数，所以我们写一个函数，只检查字符串是否对称。如果你给它一个长度为零的字符串，它返回`False`，否则它设置`i1`为字符串中的第一个字符和`i2`最后一个字符。只要字符继续对称，它就会比较字符，并`i1`在递减时递增`i2`。如果两者相遇或相互通过，我们知道我们已经看到了整个字符串并且它必须是对称的，在这种情况下我们返回`True`; 如果它找到任何不对称的字符对，它会返回`False`. 我们必须检查是否`i1`和`i2`在循环的顶部遇到或通过，所以它不会尝试检查一个字符是否是它自己的对称字符。（一个角色不能同时是两个`'a'`，`'z'`所以一个角色永远不是它自己的对称角色！）

*   现在我们编写一个包装器来过滤掉垃圾，将字符串拆分为单词，并测试每个单词。它不仅将选定的标点字符转换为空格，而且还去除任何意外字符（任何不是批准的标点字符、空格或字母的字符）。这样我们就知道没有什么意外会进入内部函数。包装器是“懒惰的”......它是一个一次产生一个单词的生成器，而不是构建整个列表并返回它。`list()`将生成器的结果强制到列表中很容易使用。如果需要，您可以轻松地修改此函数以仅构建一个列表并返回它。

如果您对此有任何疑问，请询问。

编辑：代码的原始版本没有用标点符号做正确的事情；这个版本可以。另外，正如@heltonbiker 所建议的那样，当Python 有可以使用的副本时，为什么还要输入字母呢？所以我也做了这个改变。

编辑：@heltonbiker 的更改引入了对 Python 版本的依赖！我把它留了一个合适的`try:`/`except`块来处理这个问题。看来 Python 3.x 已将小写 ASCII 字母的名称改进为`string.ascii_lowercase`代替 plain `string.lowercase`。

# php - Zend Framework 2 中没有正确解析路由 mit 特殊字符

> ID：16097053
> 
> 赞同：2
> 
> 时间：2013-04-19T04:10:53.383
> 
> 标签：php, zend-framework2, http-status-code-404, zend-route, zend-router

带有德语特殊字符的 URI 不起作用（错误 404）。我已经遇到过这个问题（[here](https://stackoverflow.com/questions/15634913/uris-with-german-special-characters-dont-work-error-404-in-zend-framework-2)），并且已经通过使用它的[unicode 修饰符](https://stackoverflow.com/a/15636028/2019043)和[自定义视图助手](https://stackoverflow.com/a/15660197/2019043)解决了这个问题。

现在我对子路由也有同样的问题`Segment`，但是这次使用 unicode 标识符和自定义视图助手的方法不起作用。

所有请求都喜欢`sld.tld/sport/sportäöüÄÖÜß/cityäöüÄÖÜß`或`sld.tld/sport/sportäöüÄÖÜß/cityäöüÄÖÜß/page/123`以`404`错误结束。

**/module/Catalog/config/module.config.php**

```
<?php
return array(
    ...
    'router' => array(
        'routes' => array(
            'catalog' => array(
                ...
            ),
            'city' => array(
                ...
            ),
            // works correctly, if I remove the child route
            'sport' => array(
                'type'  => 'MyNamespace\Mvc\Router\Http\UnicodeRegex',
                'options' => array(
                    'regex' => '/catalog/(?<city>[\p{L}\p{Zs}]*)/(?<sport>[\p{L}\p{Zs}]*)',
                    'defaults' => array(
                        'controller' => 'Catalog\Controller\Catalog',
                        'action'     => 'list-courses',
                    ),
                    'spec'  => '/catalog/%city%/%sport%',
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'courses' => array(
                        'type'  => 'segment',
                        'options' => array(
                            'route' => '[/page/:page]',
                            'defaults' => array(
                                'controller' => 'Catalog\Controller\Catalog',
                                'action'     => 'list-courses',
                            ),
                        ),
                        'may_terminate' => true,
                    ),
                )
            ),
        ),
    ),
    ...
); 
```

我也尝试过使用`UnicodeRegex`子路由：

```
 'sport' => array(
            'type'  => 'MyNamespace\Mvc\Router\Http\UnicodeRegex',
            'options' => array(
                'regex' => '/catalog/(?<city>[\p{L}\p{Zs}]*)/(?<sport>[\p{L}\p{Zs}]*)',
                'defaults' => array(
                    'controller' => 'Catalog\Controller\Catalog',
                    'action'     => 'list-courses',
                ),
                'spec'  => '/catalog/%city%/%sport%',
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'courses' => array(
                    'type'  => 'MyNamespace\Mvc\Router\Http\UnicodeRegex',
                    'options' => array(
                        'regex' => '/page/(?<page>[\p{N}]*)',
                        'defaults' => array(
                            'controller' => 'Catalog\Controller\Catalog',
                            'action'     => 'list-courses',
                        ),
                        'spec'  => '/page/%page%',
                    ),
                    'may_terminate' => true,
                ),
            )
        ), 
```

**Unicode正则表达式**

看[这里](https://stackoverflow.com/a/15660197/2019043)

**UnicodeSegment**

扩展`Zend\Mvc\Router\Http\Segment`并完成所有`preg_match(...)`调用的输入`u`：

*   [`'((\G(?P<literal>[^:{\[\]]*)(?P<token>[:{\[\]]|$)))u'`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Segment.php#L157)
*   [`'(\G\{(?P<name>[^}]+)\}:?)u'`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Segment.php#L167)
*   [`'((\G(?P<name>[^:/{\[\]]+)(?:{(?P<delimiters>[^}]+)})?:?))u'`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Segment.php#L173)
*   [`'(\G(?P<literal>[^}]+)\})u'`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Segment.php#L182)
*   [`'(\G' . $this->regex . ')u'`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Segment.php#L353)
*   [`'(^' . $this->regex . '$)u'`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Segment.php#L355)

如何让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:31:04.270

刚刚看了一下，您需要更改`UnicodeRegex`match 方法，以便它为它匹配的部分 url 返回正确的长度，这是一个解决这个问题的尝试，这似乎与您的工作（至少对我来说）设置

```
public function match(Request $request, $pathOffset = null)
{
    if (!method_exists($request, 'getUri')) {
        return null;
    }

    $uri  = $request->getUri();
    $path = rawurldecode($uri->getPath());

    if ($pathOffset !== null) {
        $result = preg_match('(\G' . $this->regex . ')u', $path, $matches, null, $pathOffset);
    } else {
        $result = preg_match('(^' . $this->regex . '$)u', $path, $matches);
    }

    if (!$result) {
        return null;
    }

    foreach ($matches as $key => $value) {
        if (is_numeric($key) || is_int($key) || $value === '') {
            unset($matches[$key]);
        } else {
            $matches[$key] = rawurldecode($value);
        }
    }

    // at this point there's a mismatch between the length of the rawurlencoded path
    // that all other route helpers use, so we need to match their expectations
    // to do that we build the matched part from the spec, using the matched params 
    $url = $this->spec;
    $mergedParams = array_merge($this->defaults, $matches);
    foreach ($mergedParams as $key => $value) {
        $spec = '%' . $key . '%';
        if (strpos($url, $spec) !== false) {
            $url = str_replace($spec, rawurlencode($value), $url);
        }
    }
    // make sure the url we built from spec exists in the original uri path
    if (false === strpos($uri->getPath(), $url)) {
        return null;
    }
    // now we can get the matchedLength
    $matchedLength = strlen($url);

    return new RouteMatch($mergedParams, $matchedLength);
} 
```

# vbscript - 仅将 jpg 文件从文件夹和子文件夹移动到另一个文件夹而不复制

> ID：16097057
> 
> 赞同：1
> 
> 时间：2013-04-19T04:11:09.283
> 
> 标签：vbscript, move, filesystemobject

我使用以下脚本将所有特定文件移动到目标文件夹。我想将文件复制到目标文件夹而不复制。

因为我计划每 10 分钟运行一次 VBS，所以它不应该再次复制文件夹中已经存在的相同文件。

```
Set fso = CreateObject("Scripting.FileSystemObject")

testfolder = "D:\env"
'fso.CreateFolder(testfolder)

MoveFiles fso.GetFolder("D:\Movie Keys\License\2013_Apr_19")

Sub MoveFiles(fldr)
    For Each f In fldr.Files
        basename  = fso.GetBaseName(f)
        extension = fso.GetExtensionName(f)

        If LCase(extension) = "env" Then
            dest  = fso.BuildPath(testfolder, f.Name)
            count = 0
            Do While fso.FileExists(dest)
                count = count + 1
                dest  = fso.BuildPath(testfolder, basename & "_" & count & "." _
                        & extension)
            Loop
            f.Move dest
        End If
    Next

    For Each sf In fldr.SubFolders
        MoveFiles sf
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:08:09.110

这里的问题是您要将所有源文件（包括子文件夹中的源文件）复制到 1 个目标文件夹中。此时，文件有可能具有相同的文件名，并且您可能在复制过程中覆盖了文件，或者文件将被跳过，因为它会将其视为重复。

您正在尝试使用以下代码实现此目的

```
 count = 0
        Do While fso.FileExists(dest)
            count = count + 1
            dest  = fso.BuildPath(testfolder, basename & "_" & count & "." & extension)
        Loop 
```

问题是，您不知道哪个文件对应于哪个源文件。

我建议您将文件重命名为完整路径。因此，假设您的源文件夹如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/WgjKv.png)

在 FolderExample 和 sub01 中都有一个名为 image01.jpg 的文件。

我在这里使用了下划线来分隔每个文件夹（这对您来说可能是现实的，也可能是不现实的）。但是通过创建这个新文件名，这意味着您不能覆盖任何其他同名文件！

![在此处输入图像描述](https://i.stack.imgur.com/HmCK2.png)

现在，如果您需要再次使用该文件，问题是文件名已更改。在这里使用下划线的好处是您可以编写另一个应用程序来复制文件，用下划线分割，然后创建完整路径，获取文件名并相应地复制文件。

这意味着，您可以更换

```
 If LCase(extension) = "env" Then
        dest  = fso.BuildPath(testfolder, f.Name)
        count = 0
        Do While fso.FileExists(dest)
            count = count + 1
            dest  = fso.BuildPath(testfolder, basename & "_" & count & "." _
                    & extension)
        Loop
        f.Move dest
    End If 
```

和

```
 If LCase(extension) = "env" Then
        dest  = fso.BuildPath(testfolder, f.Name)
        if not (fso.FileExists(dest)) then
            f.Move dest
        end if
    End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:46:42.280

如果您想同步文件夹而不创建重复项并且不复制目标中已存在的文件，只需使用`robocopy`：

```
robocopy "D:\Movie Keys\License\2013_Apr_19" "D:\env" *.env 
```

或在[批处理](/questions/tagged/batch "显示标记为“批次”的问题")脚本中：

```
@echo off

set dst=D:\env
set src=D:\Movie Keys\License\2013_Apr_19

robocopy "%src%" "%dst%" *.env 
```

* * *

**编辑：**由于您想将源树破坏到目标文件夹中，`robocopy`因此不适用于您的情况。您现有的代码接近您想要的，但由于您不想覆盖现有文件并且也不想创建“版本化”副本，因此您需要更改：

```
count = 0
Do While fso.FileExists(dest)
    count = count + 1
    dest  = fso.BuildPath(testfolder, basename & "_" & count & "." _
            & extension)
Loop
f.Move dest 
```

进入这个：

```
If Not fso.FileExists(dest) Then f.Move dest 
```

* * *

要根据扩展名使用各种目标文件夹，您可以使用字典来存储目标路径：

```
Set testfolder = CreateObject("Scripting.Dictionary")
testfolder.CompareMode = vbTextCompare  'case-insensitive
testfolder.Add "env", "D:\env"
testfolder.Add "key", "D:\key" 
```

并像这样更改您的代码：

```
If testfolder.Exists(extension) Then
  dest  = fso.BuildPath(testfolder(extension), f.Name)
  If Not fso.FileExists(dest) Then f.Move dest
End If 
```

# java - JVM 如何表示一个具有一个值与多个值的枚举？（打破单例规则？）

> ID：16097060
> 
> 赞同：0
> 
> 时间：2013-04-19T04:11:13.533
> 
> 标签：java, unit-testing, enums, singleton

具体来说，我正在使用一个使用枚举的单例模型。我有一个枚举单例服务（业务逻辑）调用一个枚举单例 dao。我想为我的服务编写单元测试，但我不能模拟我的 enum dao，因为它是一个 enum 和 final。是的，我看到了关于用反射来做的文章，但如果可能的话，我宁愿避免这样做。

所以我的想法是，为什么不在我的枚举中添加另一个值 TEST_INSTANCE 呢？（这确实是核心问题。）

```
 public enum MyDao {
      INSTANCE,
      TEST_INSTANCE;

      public boolean methodIWouldMockIfICould()
      {
        if(this == TEST_INSTANCE) { return true; }
        ... //method code here
      }
    } 
```

尝试这个似乎最初有效，但我很犹豫。

1.  这对我来说有难闻的气味。
2.  *假设*部署到我的 Web 应用程序的代码仅使用 INSTANCE 并且唯一使用 TEST_INSTANCE 的地方是在测试中，这个枚举是否仍然遵循单例模型？
3.  这还有什么我没有考虑的不好的地方吗？

非常感谢你，-马特

**编辑**我很想将 Spring 用于 DI，但我不允许这样做。遗留系统和上级只是简单地说“不，还没有”。我希望它会来，但我还不允许，所以这是我在此期间的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:02:51.257

我不会费心使用枚举在您的代码中强制执行单例模式。相反，只需创建一个 DAO 接口和相应的具体实现。

在你的单元测试中，模拟你的 DAO 接口。在您的生产代码中，使用依赖注入 (DI) 将您的具体实现填充到您的其他类中。大多数 DI 框架将允许您通过配置设置强制执行单例属性。

# java - 如何使用editext在输入文本中显示url中的数据

> ID：16097064
> 
> 赞同：2
> 
> 时间：2013-04-19T04:11:32.097
> 
> 标签：java, android, url, android-edittext

我想在我的应用程序中先输入一些文本，然后，当用户单击屏幕键盘上的完成按钮（使用 android:imeOptions="actionSearch"）时，Isome 数据将从此 url 显示：

```
("http://www.aaaa.com/selectAgent.htm?n="+cari_agen); 
```

但是当我进行一些处理时，什么也没有发生，我的代码仍然加载所有数据，而不是具体为 cari_agen，这是我的源代码：

```
public class MainActivity extends Activity {
GridView gridView;
private static final String ATASAN = "atasan";
private static final String KODE_AGEN = "kode_agen";
private static final String JENIS = "jenis";
private static final String NO_AAJI = "no_aaji";
private static final String NAMA_AGEN = "nama_agen";

List AgenList = new ArrayList();
boolean boolStatusKoneksi=true;
private ProgressDialog Dialog;
protected Context applicationContext;
EditText cari;
SearchView search;

@Override
public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);     
    setContentView(R.layout.mainmenu);

    search=(SearchView) findViewById(R.id.searchView1);
    cari=(EditText) findViewById(R.id.search);

    cari.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
    if (actionId == EditorInfo.IME_ACTION_SEARCH) {
        new AgenAsyncTask().execute();
        return true;
    }
    return false;
     }
   });

}

public class AgenAsyncTask extends AsyncTask<String, String, String>
{
    String cari_agen = cari.getText().toString();
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Dialog = new ProgressDialog(MainActivity.this);
        Dialog.setMessage("Mohon Tunggu sebentar...");
        Dialog.setIndeterminate(false);
        Dialog.setCancelable(true);
        Dialog.show();
    }

    protected String doInBackground(String... args) {
    String url =("http://www.aaaa.com/selectAgent.htm?n="+cari_agen);
              try{
                  JSONParser j=new JSONParser();
                    JSONArray jsonArray = j.takeJson(url);

                  for(int i =0; i<jsonArray.length(); i++)
                  {
                  JSONObject c  = jsonArray.getJSONObject(i);
                        HashMap<String, String> map = new HashMap<String, String>();
                        if (c.has("nama_agen")) 
                        Log.v(NAMA_AGEN,"Nama agen=") ;
                        map.put("nama_agen", c.get("nama_agen").toString());
                        if (c.has("atasan")) 
                            map.put("atasan", c.get("atasan").toString());
                        if (c.has("jenis")) 
                            map.put("jenis", c.get("jenis").toString());
                          AgenList.add(map);
                            if (c.has("no_aaji")) 
                                map.put("no_aaji", c.get("no_aaji").toString());
                     }
                } catch (JSONException e) {
                    e.printStackTrace();
                    }
              return null;
                }

@Override
protected void onPostExecute(String arg)
{
Dialog.dismiss();
GridView gridview = (GridView) findViewById(R.id.gridview);
ListAdapter adapter = new SimpleAdapter(
    MainActivity.this, AgenList, R.layout.list_item,
    new String[] { NAMA_AGEN, ATASAN, JENIS,NO_AAJI }, new int [] {R.id.nama_agen, R.id.atasan, R.id.jenis,R.id.no_aaji});
gridview.setAdapter(adapter);   } 
```

我希望有人能帮我解决这个问题，谢谢你

# java - 我无法以 200 的间隔进行图像更新

> ID：16097068
> 
> 赞同：1
> 
> 时间：2013-04-19T04:11:45.037
> 
> 标签：java, image, jframe, jpanel, screen-capture

我正在尝试创建一个读取屏幕并将其显示在帧中的线程，此代码旨在以 5fps 运行，到目前为止它读取屏幕，但我无法让 JFrame 显示每个“帧”的更新图像或 200 毫秒。当我使用重绘（）时；或重新验证（）；

```
public static void startScreenRecorder() 
{
    Thread screenThread = new Thread()
    {
        public synchronized void run()
        {
            long time;
            long lastFrameTime = 0;
            JFrame frame = new JFrame("Screen capture");
            ImagePanel panel = new ImagePanel(captureScreen());
            frame.add(panel);
            frame.setSize(300, 400);
            frame.setVisible(true);

            while (true) 
            {
                time = System.currentTimeMillis();
                while (time - lastFrameTime < 190) 
                {
                    try {
                        Thread.sleep(10);
                    } catch (Exception e) {
                    }

                    time = System.currentTimeMillis();
                }                
                lastFrameTime = time;

                panel = new ImagePanel(captureScreen());
                panel.revalidate();
                panel.repaint();
                frame.revalidate();
                frame.repaint();
            }
        }
    };
    screenThread.start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:19:37.890

不要使用 Thread.sleep() 来尝试控制动画。

动画应该使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来完成。当您使用计时器时，EDT 上的 GUI 会自动更新。

```
panel = new ImagePanel(captureScreen()); 
```

上面的代码没有做任何事情。它只是在内存中创建一个面板。您实际上无处将面板添加到 GUI。更改变量的引用不会更新 GUI。

相反，您可能应该将 JLabel 添加到框架（当您最初创建框架时）。然后，当您有一个新图像时，您只需执行以下操作：

```
label.setIcon( new ImageIcon( your screen capture ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:18:29.990

如果您的代码根本没有显示任何图像，我不会感到惊讶，因为它忽略了 Swing 线程规则：

*   所有 Swing 代码只需要在 Swing 事件调度线程 (EDT) 上调用。
*   所有其他长时间运行的代码都需要在后台线程中调用。我认为这意味着`captureScreen()`.
*   `Thread.sleep(...)`除非您想让整个应用程序进入睡眠状态，否则您永远不应该调用Swing 事件线程。
*   也许最好使用摆动计时器。
*   您创建了新的 ImagePanel，但对它们什么也不做——例如，除了第一个 JPanel 之外，您从不将它们添加到 GUI 中。请注意，如果您更改变量引用的对象，此处为面板变量，这将绝对不会影响在其他地方使用的对象实例，即在 GUI 中显示的 JPanel。
*   与其创建新的 JPanel，不如用您的图像创建 ImageIcons 并将可视化的 JLabel 的图标替换为`setIcon(...)`?
*   由于您有很多背景资料，请考虑使用 a`SwingWorker<Void, Icon>`来完成您的工作，并让它发布 ImageIcon，然后将其显示在 GUI 的 JLabel 中。如果你这样做了，那么你可能不会使用 Swing Timer，因为计时将在 SwingWorker 的后台线程中完成。

例如：

```
import java.awt.AWTException;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.image.BufferedImage;
import java.util.List;
import java.util.Timer;
import java.util.TimerTask;

import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;

@SuppressWarnings("serial")
public class SwingWorkerEg extends JPanel {
   private static final int PREF_W = 600;
   private static final int PREF_H = 400;
   private JLabel displayedLabel = new JLabel();

   public SwingWorkerEg() {
      setLayout(new BorderLayout());
      add(displayedLabel);
      try {
         MySwingWorker mySwingWorker = new MySwingWorker();
         mySwingWorker.execute();
      } catch (AWTException e) {
         e.printStackTrace();
      }
   }

   public void setLabelIcon(Icon icon) {
      displayedLabel.setIcon(icon);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private class MySwingWorker extends SwingWorker<Void, Icon> {
      private final Rectangle SCREEN_RECT = new Rectangle(0, 0, PREF_W,
            PREF_H);
      private Robot robot = null;

      public MySwingWorker() throws AWTException {
         robot = new Robot();
      }

      @Override
      protected Void doInBackground() throws Exception {
         Timer utilTimer = new Timer();
         TimerTask task = new TimerTask() {

            @Override
            public void run() {
               BufferedImage capturedImage = captureScreen();
               publish(new ImageIcon(capturedImage));
            }

         };
         long delay = 200;
         utilTimer.scheduleAtFixedRate(task, delay, delay);
         return null;
      }

      @Override
      protected void process(List<Icon> chunks) {
         for (Icon icon : chunks) {
            setLabelIcon(icon);
         }
      }

      private BufferedImage captureScreen() {
         BufferedImage img = robot.createScreenCapture(SCREEN_RECT);
         return img;
      }

   }

   private static void createAndShowGui() {
      SwingWorkerEg mainPanel = new SwingWorkerEg();

      JFrame frame = new JFrame("SwingWorker Eg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

哪个会显示...

![在此处输入图像描述](https://i.stack.imgur.com/ya5Pv.jpg)

# ffmpeg - ffmpeg 在 CentOS 6.4 上输出空白图像文件

> ID：16097069
> 
> 赞同：0
> 
> 时间：2013-04-19T04:11:49.527
> 
> 标签：ffmpeg, thumbnails, capture

0我正在尝试使用 ffmpeg 从视频中捕获缩略图。

所以我输入了如下命令。

```
ffmpeg -i MyVideo.mp4 -s 480x270 -f image2 -vf fps=fps=1/600 thumb%03d.png 
```

就像 ffmpeg 官方网站建议的那样。

的长度`MyVideo.mp4`是`01:46:03`，所以我预计总共有 10 张图片。

（因为`fps=fps=1/600`部分意味着 10 分钟 1 件。）

但是产量是 12 件，尤其是第一件坏了。

当我在 GUI 中检查它的信息时，它显示“未能加载信息”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:15:42.997

```
because fps=fps=1/600 part means 1minute 1piece. 
```

这意味着`1/600`每秒帧数，或每 600 秒一帧。

你可能想要`fps=fps=1/60`

# java - ArrayList get 方法越界

> ID：16097070
> 
> 赞同：0
> 
> 时间：2013-04-19T04:11:52.410
> 
> 标签：java, arraylist

我一直在努力创建一个小阴影方法，但不断出现同样的`IndexOutOfBoundsException`错误。我不会认为我错过了很多吗？

```
import java.util.ArrayList;

public class Shades {

    public static String shades(String hex, int offset) {
        hex = hex.replace("#", "");
        String[] rgb_hex = hex.split(".{2}");
        ArrayList<Integer> rgb_int = new ArrayList<>();
        for (String i : rgb_hex) {
            int intg = Math.min(255, Math.max(
                    0, Integer.parseInt(i, 16) + offset));
            rgb_int.add(intg);
        }
        return String.format("%02x%02x%02x", rgb_int.get(0), 
            rgb_int.get(1), rgb_int.get(2));
    }
    public static void main(String[] args) {
        System.out.println(shades("#000000", 20));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:52:00.160

格雷是对的。 在任意两个字符上`hex.split(".{2}")`分割。`hex`如果 x 的长度是偶数，比如 10，那么它会在前两个字符之后分割，在字符 2 和 4 之后等等。测试给出一个空数组。

您需要遍历字符串中的字符。Java 8 可能`Iterator`对此有帮助，但在那之前，您需要：

```
public class Shades {
    public String shades(String hex, int offset) {
        hex = hex.replace("#", "");
        if (hex.length() != 6) {
            throw new IllegalArgumentException("Can only handle 6-hex " + 
                "character RGB strings.");
        }
        List<String> rgbHex = splitIntoPairs(hex);
        List<Integer> rgbInt = convertToInt(rgbHex, offset);

        return String.format("%02x%02x%02x", rgbInt.get(0), 
            rgbInt.get(1), rgbInt.get(2));
    }

    public List<String> splitIntoPairs(String s) {
        List<String> pairs = new ArrayList<>();
        pairs.add(s.substring(0, 2));
        pairs.add(s.substring(2, 4));
        pairs.add(s.substring(4, 6));
        return pairs;
    }

    public List<Integer> convertToInts(List<String> s, int offset) {
        List<Integer> ints = new ArrayList<();
        for (String pair: s) {
            ints.add(bound(0, Integer.parseInt(s, 16) + offset, 255);
        }
        return ints;
    }

    public int bound(int lower, int x, int upper) {
        if (x < lower) {
            return lower;
        } else if (x > upper) {
            return upper;
        } else {
            return x;
        }
    }

    public static void main(String[] args) {
        Shades shades = new Shades();
        System.out.println(shades.shades("#000000", 20));
    }
} 
```

请注意方法的拆分方式和更好的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:15:35.707

您正在假设`hex.split(".{2}");`返回一个包含 3 个元素的数组。我怀疑情况并非如此。如果您调试到该行，您应该会看到数组列表的元素少于 3 个。我相信没有句点的字符串会对您执行此操作。`IllegalArgumentExceprtion`如果发现少于 3 个元素，也许你需要抛出一个或其他东西。

那么当你这样做时：

```
 return String.format("%02x%02x%02x", rgb_int.get(0), 
        rgb_int.get(1), rgb_int.get(2)); 
```

`rgb_int`如果没有 3 个元素，这将生成异常。异常中的行号应该为您提供线索。

将来，至少在您的 SO 帖子中显示异常的相关行并显示与它对应的行总是一个好主意。

# 3d - Gnuplot：如何获得z值为最大值的点的坐标（x，y，z）？

> ID：16097075
> 
> 赞同：0
> 
> 时间：2013-04-19T04:12:15.577
> 
> 标签：3d, gnuplot, max

数据文件有3列，对应(x,y,z)，样式设置为能够绘制3D曲面。

我发现命令 GPVAL_DATA_Z_MAX 可以给出最大 z 值，并且我想找到最大点的左侧 x,y，尽管可能有多个点拥有最大 z。

所以，我使用了 GPVAL_DATA_X_MAX，GPVAL_DATA_Y_MAX，但是我得到了错误的位置，因为这三列是无关紧要的，这两个命令的功能就像 GPVAL_DATA_Z_MAX。**那么如何找到z值为最大值的点的（x，y，z）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:16:05.077

您可以做另一个（临时）绘图，它只显示 z 最大的点。

我这样做：

```
plot "Datafile" using ($3==GPVAL_DATA_Z_MAX?$1:NaN):($3==GPVAL_DATA_Z_MAX?$2:NaN):3 
```

这只会绘制 z=GPVAL_DATA_Z_MAX 的点。

在此图之后，GPVAL_DATA_X_MAX 和 GPVAL_DATA_Y_MAX 将具有属于 () 的值。

# php - PDO：未选择数据库

> ID：16097076
> 
> 赞同：1
> 
> 时间：2013-04-19T04:12:16.593
> 
> 标签：php, mysql, pdo, dojo

以下是按顺序排列的文本：

登录 -> 选择数据库 -> 从给定的卡片列表中选择 -> mysql-process 以生成测试列表 -> 选择一个测试 -> mysql-process 以根据所选卡片和测试生成批号。

一个脚本“mysql-process to generate a list of tests”正在工作，我可以选择其中一个测试。

然后错误弹出`exception 'PDOException' with message 'SQLSTATE[3D000]: Invalid catalog name: 1046 No database selected'`。

为什么该错误表明已选择数据库但未选择数据库。

有 2 个 php 文件：（`gathertests2.php`工作）和`gatherbatches.php`（不工作）。

**main.php（摘录1）**

```
on(selPCBA, 'change', function(value)
{console.debug('value = '+value);
var selectedPCBA = this.get('displayedValue');
console.debug('Contents of "selected" variable ='+selectedPCBA);
var selTest = registry.byId('ID_selTest');
    if (selectedPCBA.indexOf("class='inUse'")!==-1)
         {request.post('gathertests2.php',
    {data:{testDB : value},
    handleAs: "json"}).then
    (
         function(response)
        {var memoStore1 = new Memory({data:response});
                selTest.set('store', memoStore1);
            selTest.set('value','');
        },
     function(error)
            {alert("Test's Error:"+error);
    });
         selTest.startup();
    }
   else
     {console.debug('Error:- Attempting to select the unavailable card');
      alert('Please select the only highlighted card');
}
}); 
```

**收集测试2.php**

```
<?php
    require_once($_SERVER['DOCUMENT_ROOT'] . '/firephp_include.php');
$firephp->setEnabled(TRUE);
$firephp->info('Start debugging in gathertest2.php');
require_once '../scripts/login.php';
    $db = $_POST['testDB'];
$stmt_use = $dbh->prepare("use $db");//ok
$firephp->fb($stmt_use);

    try //PDO Driver is used in PHP for working with MySQL!!!!
    {
        $stmt_use  -> execute();//ok
        $firephp->log("Successfully executed!");
    }

    catch (PDOException $err) //PDOException is declared in login.php
    {
        $alertmsg = $err->getMessage();
        include 'alertmessage.php';
        $firephp->error("Unsuccessfully executing: $err");
    }
    $stmt_call1 = $dbh->prepare('call listmfg_codes()');
$firephp->fb($stmt_call1);

    try //PDO Driver is used in PHP for working with MySQL!!!!
    {
        $stmt_call1->execute();
        $firephp->log("Successfully executed!");
    }

    catch (PDOException $err) //PDOException is declared in login.php
    {
        $alertmsg = $err->getMessage();
        include 'alertmessage.php';
        $firephp->error("Unsuccessfully executing: $err");
    }

$result = $stmt_call1->fetchAll(PDO::FETCH_ASSOC); //ok
$output = json_encode($result); 
echo $output;
$firephp -> fb($result);
$firephp -> info("End"); 
```

`call listmfg_codes()`在哪里

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `testdata2060_03`.`listmfg_codes` $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `listmfg_codes`()
BEGIN
select distinct(mfg_code) from test order by mfg_code asc;
END $$
DELIMITER ; 
```

**main.php（摘录2）**

```
on(selTest, 'change', function(value)
    {var selectedTest = this.get('displayedValue');
 var selBatch = registry.byId('ID_selBatch');
 request.post('gatherbatches.php',
    {data:{testCard : value},
     handleAs: "json"}).then
(
    function(response)
    {var memoStore2 = new Memory({data:response});
     selBatch.set('store', memoStore2);
    selBatch.set('value','');
    },
   function(error)
       {alert("Batch's Error:"+error);
    }
);
       selBatch.startup();
 }); 
```

**收集批处理.php**

```
<?php
require_once($_SERVER['DOCUMENT_ROOT'] . '/firephp_include.php');
$firephp->setEnabled(TRUE);
$firephp->warn('Start debugging in gatherbatches.php');
require_once '../scripts/login.php';
    $card = $_POST['testCard'];//must add '' in "" bracket for call command to work
$stmt_call2 = $dbh->prepare("call listbatch('$card')");
$firephp->fb($stmt_call2);
try //PDO Driver is used in PHP for working with MySQL!!!!
    {
        $stmt_call2->execute();
        $firephp->log("Successfully executed!");
    }

catch (PDOException $err) //PDOException is declared in login.php
    {
        $alertmsg = $err->getMessage();
        include 'alertmessage.php';
        $firephp->error("Unsuccessfully executing: $err");  
        }

$result = $stmt_call2->fetchAll(PDO::FETCH_ASSOC); //ok
    $output = json_encode($result); 
echo $output;
$firephp -> fb($result);
$firephp -> warn("End"); 
```

`call listbatch()`在哪里

```
 DELIMITER $$
 DROP PROCEDURE IF EXISTS `testdata2060_03`.`listbatch` $$
 CREATE DEFINER=`root`@`localhost` PROCEDURE `listbatch`(mfgnum VARCHAR(24))
 BEGIN
     SELECT batch FROM test WHERE mfg_code = mfgnum group by batch order by batch desc;
 END $$
 DELIMITER ; 
```

好的，完成了。请告知我哪里出错了。请参阅下面的附件：

![在此处输入图像描述](https://i.stack.imgur.com/fZpXJ.png)

//添加login.php

```
<?php 
   $dsn = 'mysql:host=localhost;Port=3306';
   $user = 'root'; $pswd = '';
   $dbh = new PDO($dsn, $user, $pswd, array(PDO::ATTR_PERSISTENT, TRUE));     
   $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);    
   $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:16:53.520

我没有阅读所有代码，但我感觉你对 PHP 工作原理的想法是错误的。

您很可能会想象一个客户端-服务器应用程序，例如桌面应用程序 - 可靠且独立。这是错误的。所有这些 AJAX 调用都是为了*分离和清理*PHP 实例，而对以前的执行一无所知。因此，您在之前的调用中选择的任何数据库都不会在当前调用中为您提供帮助——**您必须再次初始化所有资源。**

还有一件**非常奇怪的事情**：您**从客户端传递了一个数据库名称**！从架构和安全的角度来看，我称之为奇怪的行为。此外，对于像多个测试这样的本地化案例，没有一个理由需要多个数据库。

因此，使其成为常规和正确的方式：

*   使用**一个**数据库
*   在 login.php 中选择一次
*   可能会重新排列您的测试，使用**一张**表来保存**所有**相似的数据

你永远不会有任何麻烦。

# ruby-on-rails - 我是否过度使用 Rails 测试

> ID：16097081
> 
> 赞同：1
> 
> 时间：2013-04-19T04:12:48.343
> 
> 标签：ruby-on-rails, unit-testing, testunit

我的模型中有一个成员具有这些验证

```
validates :status, :presence => true, :numericality => {:only_integer => true} 
```

为了测试它，我的计划是制作一个只有一个完全有效的模型实例的夹具，然后做一个测试以确保它是有效的，另一个测试以确保将 game_status 设置为 nil 是无效的，然后 3测试数字性：一个测试如果我将其设置为字符串是否无效，一个测试如果我将其设置为小数则它无效，以及一个测试如果我将其设置为整数是否有效。

总的来说，5 次测试来测试 2 条简单的 Rails 验证感觉我可能会过火，尤其是当我添加另一个成员时，就像需要几乎相同验证的状态一样。我知道 rspec 有类似 should_validate_presence_of 的东西，但是对于我的第一个项目，我想使用 test::unit。

如果这是在 Rails 中做事的正常方式，我很好。但如果有更简单的方法，我宁愿这样做。或者你通常不会测试这些简单的东西？

我不是在寻找一个可以为此抽象一切的宝石，除非这样做几乎是公认的标准。否则，我只想以符合一般 Rails 最佳实践的方式使用基本 test::unit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:37:07.747

我会说，如果您希望这些功能正常工作，那么您应该测试它们。例如，考虑一下 Rails 的实现是否会在未来发生变化。失败的单元测试将是立即让您知道“嘿！我的应用程序的行为发生了变化！”的好方法。

也就是说，只测试您关心的应用程序用例——无需复制整个 Rails 测试套件。绝对要对您的“快乐”案例进行测试，其中输入应该被认为是有效的。如果您认为有可能/很可能会出现小数或字符串，那么也要测试在这些情况下会发生什么。如果您发现自己在其他地方这样做，请为自己创建一些共享的辅助方法`check_doesnt_allow_decimals`，例如 等。

# iphone - 数据未通过 ios 中的 webservice json 发布

> ID：16097092
> 
> 赞同：0
> 
> 时间：2013-04-19T04:14:01.893
> 
> 标签：iphone

我正在使用 webservie 发布数据，但数据没有发布到数据库中。`

```
 NSURL *url = [NSURL URLWithString:@"some url"];
    NSArray *res=[[NSArray alloc] initWithObjects:txtname.text, nil];
    NSError *jsonError;
    //NSJSONSerialization is Apple's new json serialization class so we can use it to convert to and from json and foundation objects
    NSData *requestdata = [NSJSONSerialization dataWithJSONObject:res options:0 error:&jsonError];

    NSMutableURLRequest *request;
    request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:[NSString stringWithFormat:@"%d", [requestdata length]] forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:requestdata];

    //this kicks off the request asynchronously
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:47:30.740

```
NSString *parameter1=@"";
NSString *parameter2=@"";  

NSString *urlString = [NSString stringWithFormat:@"your URL"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSMutableData *body = [NSMutableData data];

NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

//  parameter parameter1
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"parameter_1\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:parameter1
 dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

//  parameter parameter2
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"parameter_2\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:parameter2 dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

// close form
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

// setting the body of the post to the reqeust
[request setHTTPBody:body];

// now lets make the connection to the web
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

NSLog(@"returnString %@",returnString); 
```

以类似的方式，您可以根据需要添加任意数量的参数。

# c - 不确定如何使用这些作为原型给出的未命名结构。C

> ID：16097097
> 
> 赞同：0
> 
> 时间：2013-04-19T04:14:24.100
> 
> 标签：c, struct

编辑：这些结构定义是给我的，不能以任何方式改变。

假设`struct DB`我想访问 db 中第三个元素的名称。我该怎么做呢？我想我可以做到这一点：

```
DB->db[2].name; 
```

但这不起作用。

另外，我如何将这些结构之一定义为函数内的参数？

```
typedef struct {
    char name[MAX_NAME + 1];
    unsigned long pass;
} DBEntry;

typedef struct {
    DBEntry db[MAX_ENTRIES];
    int size;
} DB; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:18:54.713

首先，您必须为 struct 创建对象`DB`。然后你可以访问它的成员。

```
DB obj;
strcpy(obj.db[2].name, "abc"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T04:19:05.513

这些是*类型*，而不是*变量*。

要使用它们：

```
DB db;
db.size = 1;
strcpy(db.db[0].name, "name");
db.db[0].pass = 0xdeadbeef;
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T05:50:47.617

首先，没有`struct DB`; 有一个类型名称`DB`标识未标记的结构类型，但它与`struct DB`.

如何访问元素取决于变量声明：

```
DB  db1 = ...;
DB *db2 = ...; 
```

使用 variable `db1`，您可以使用以下方式访问第三个元素的名称：

```
printf("%s\n", db1.db[2].name); 
```

使用 variable `db2`，您可以使用以下方式访问第三个元素的名称：

```
printf("%s\n", db2->db[2].name); 
```

您可以使用以下方法定义一个采用这些类型的函数：

```
void magic_function(DB db1, DB *db2, DBEntry de1, DBEntry *de2)
{
    printf("%s\n", db1.db[0].name);
    printf("%s\n", db2->db[0].name);
    printf("%s\n", de1.name);
    printf("%s\n", de2->name);
} 
```

您可以使用以下方法在标头中声明它：

```
extern void magic_function(DB db1, DB *db2, DBEntry de1, DBEntry *de2); 
```

就个人而言，我更喜欢`extern`那里与在同一个标​​头中声明的那些罕见的全局变量的声明对称`extern`，但它实际上不是必需的（`extern`如果省略则假定）。如果该函数仅从单个源文件中引用，那么它`static`当然应该是 （并且没有在任何头文件中声明）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T04:20:52.567

首先，您必须像这样声明为对象..

```
DB db1;
db1.db[0].pass = 35; 
```

我认为，在您的代码中，您必须尝试存储名称数量并访问这些元素。如果您尝试这样做，您的`DBEntry`结构应该是

```
typedef struct {
    char *name[MAX_NAME + 1];
    unsigned long pass;
} DBEntry; 
```

# javascript - 如何将EventListener添加到所有IMG标签

> ID：16097098
> 
> 赞同：2
> 
> 时间：2013-04-19T04:14:27.297
> 
> 标签：javascript

我有一个 ContentEditable div 元素（编辑器）。我想将 EventListener 添加到编辑器中的所有图像标签。我怎么能这样做。对于现有图像，我可以使用

```
var imageNodes = document.getElementsByTagName('IMG');
        for(var i=0;i<imageNodes.length;i++) {          
            imageNodes[i].addEventListener('DOMNodeRemoved',getRemovedNodeDetails,false);
        } 
```

对于新输入的图像，我该怎么做。我可以为所有 IMG 标签添加样式，这样每当输入新图像时，监听器就会被添加到标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:29:13.337

发这个，不是因为wong的回答错了，只是有点太简短了。。

```
// Warning: Typed on the fly

document.body.addEventListener('DOMNodeRemoved',getRemovedNodeDetails,false);

function getRemovedNodeDetails(e) {
  e = e || window.event;
  var target = e.target || e.srcElement;

  // Yea, there are times tagName returns a lowercase value.
  // I always normalize it for my own sanity.
  if (target.tagName.toUpperCase() === "IMG") {
    // Now, do something with target
  }
} 
```

更多详情： [http ://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/](http://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T04:22:50.060

您可以使用事件委托在父节点上添加事件侦听器，而不是在每个 img 标签上添加事件侦听器。这将提供更好的性能，更重要的是，您可以自然地以这种方式处理新添加的图像。

# svn - 使用 SVN，如果分支中的提交直到稍后才合并并提交到 TRUNK，或者如果另一个人 svn up、merge 和 commit 怎么办？

> ID：16097101
> 
> 赞同：-2
> 
> 时间：2013-04-19T04:14:48.320
> 
> 标签：svn

如果我在一个名为“R08”的分支上工作，并且有一个主分支“TRUNK”，我提交到“R08”，然后

1.  永远不要提交更改，但是第二天我在分支中的`TRUNK`同事，然后合并并提交到，我的提交也会合并到吗？`svn up``R08``TRUNK``TRUNK`

2.  我不合并并提交到 TRUNK，因为我可能会在第二天进行更多更改或使用不同的解决方案，我做了（比如它是否是不同的文件），并提交到`R08`，这次合并并提交到`TRUNK`, 两个提交都会去`TRUNK`吗？

我看到的一些例子是`TRUNK`加一个分支，但只有 1 人在分支上工作，1 人在`TRUNK`. 我想知道如果有 5 个人在分支上工作，而 6 个人同时在工作会发生什么`TRUNK`？（有些是同一个人）。

请给出答案，而不是给出手册的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:21:32.257

To 1.：是的，如果不排除形式合并，它会。

To 2.：这更多是组织问题。通常认为完成后会提交到主干。所以你必须在你的团队中明确何时合并。但这适用于所有团队。在我工作的项目中，这从来都不是真正的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:02:43.533

正如其他评论所提到的，在分支/主干上工作的人数与行为无关。合并只是基于两个分支的更改。无论是其他人进行更改还是同一用户进行更改，都与整个过程无关。

1.  它会（我假设您所说的“我的提交”是您在 R08 中所做的更改，并且在您的同事进行合并之前提交，对吧）？

2.  您的问题不清楚：“两者都提交”是什么意思？

这是一种简化的方法来告诉您合并将做什么：

B1 从主干分支出来

```
 r10  
----+--->    (trunk)
     \-->    (B1) 
```

有人在 r15 将更改 A 提交到分支 B1

```
 r10   r15
----+--->        (trunk)
     \----X->    (B1) 
```

在主干上进行了一些其他更改，并且有人更新到最新的转接并准备将 B1 合并到主干：

```
 r10   r15 r16 r17
----+---------Y---Z->  (trunk)
     \----X->          (B1) 
```

当它尝试将 B1 合并到主干时，它会找出 B1 从分支到最近所做的更改，即在 r15 中所做的更改 X，并将更改应用到主干：

```
 r10   r15 r16 r17     r18
----+---------Y---Z------X'-->    (trunk)
     \----X-------------/         (B1) 
```

所有的逻辑都与谁在每个分支上工作以及有多少人工作无关。

# javascript - 有没有干的方法来做到这一点？

> ID：16097109
> 
> 赞同：0
> 
> 时间：2013-04-19T04:15:53.083
> 
> 标签：javascript

我有以下[大量剪断]代码：

```
data = {};
data['someradio'] = '2';

for(key in data)
{
    if(data.hasOwnProperty(key))
    {
        if(key == 'someradio')
        {
            document.getElementById(key + '1').checked = data[key] == '1' ? true : false;
            document.getElementById(key + '2').checked = data[key] == '2' ? true : false;
            document.getElementById(key + '3').checked = data[key] == '3' ? true : false;
        }
    }
} 
```

有没有办法将 3`document.`行压缩为 1？

这条线实际上有 12 次（不是 3 次）重复出现，只是数量发生了变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:18:45.823

```
var counter = 13;

while ( --counter ) {
    document.getElementById(key + counter).checked = data[key] == counter;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T04:19:21.690

```
data = {};
data['someradio'] = '2';

for(key in data)
{
    if(data.hasOwnProperty(key))
    {
        if(key == 'someradio')
        { 
            for (var i = 1; i <= 3 /*put desired value there */; i++) {
               document.getElementById(key + i).checked = data[key] == i ? true : false;            
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T04:25:51.073

那么这是一种更便宜的方法：

```
data = {};
data['someradio'] = '2';

var key = 'someradio';
var p;
if (p = data[key]) {
    for(var i = 1; i < 4; i++) {
        document.getElementById(key + i).checked = (i == p);
    }
} 
```

[http://jsfiddle.net/JbpBx/](http://jsfiddle.net/JbpBx/)

# jpgraph - 当鼠标在图形线或刻度点上时如何显示 LinePlot JPGraph 的值

> ID：16097118
> 
> 赞同：0
> 
> 时间：2013-04-19T04:16:38.610
> 
> 标签：jpgraph, line-plot

我有一个项目要制作一个具有许多 x 轴值的图形，它不能通过显示值类中的 show() 函数显示，因为它会相互重叠。所以我只想在鼠标悬停在线或刻度点时显示图形值。有可能这样做吗？如果有可能如何做到这一点。（如果它有其他不是 JPGraph 的方式，请告诉我。）
谢谢。:)
我不知道你是否理解我。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T22:17:57.843

试试这个例子。甚至可以添加指向另一个页面的链接。

```
 require_once ('jpgraph/jpgraph.php'); // change to your libraries
  require_once ('jpgraph/jpgraph_bar.php'); // change to your libraries

 // Some random data to plot
 $datay=array(12,26,9,17,31);

 // Create the graph. 
 $graph = new Graph(400,250);
$graph->SetScale("textlin");

// Create a bar pot
$bplot = new BarPlot($datay);

// Create targets for the image maps so that the details are opened in a separate window
$fmtStr = "javascript:window.open('barcsim_details.php?id=%d','_new','width=500,height=300');void(0)";
$n = count($datay);
$targ=array();
$alts=array();
for($i=0; $i < $n; ++$i) {
    $targ[$i] = sprintf($fmtStr,$i+1);
    $alts[$i] = '%d'; 
    // Note: The format placeholder val=%d will be replaced by the actual value in the ouput HTML by the 
    // library so that when the user hoovers the mouse over the bar the actual numerical value of the bar 
    // will be dísplayed
}
$bplot->SetCSIMTargets($targ,$alts);

// Add plot to graph
$graph->Add($bplot);

// Setup the title, also wih a CSIM area
$graph->title->Set("CSIM with popup windows");
$graph->title->SetFont(FF_FONT2,FS_BOLD);
// Assume we can give more details on the graph
$graph->title->SetCSIMTarget(sprintf($fmtStr,-1),'Title for Bar'); 

// Send back the HTML page which will call this script again to retrieve the image.
$graph->StrokeCSIM(); 
```

[http://fossies.org/dox/jpgraph-3.0.7/barcsim__popup_8php_source.html](http://fossies.org/dox/jpgraph-3.0.7/barcsim__popup_8php_source.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T00:49:17.760

这是不可能的，因为 JPGraph 正在渲染平面图像，这与添加任何平面图像相同，因此无法知道鼠标悬停在哪个数据块上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T22:37:41.647

$线图->值->显示（）；

查看价值方法和一些选项

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-19T04:35:37.300

以下功能可能会使用您的项目。例如

```
clearviewport(); 
```

用于 trubo c

# mysql - MySQL 的 Profiler 程序，如 MSSQL

> ID：16097119
> 
> 赞同：1
> 
> 时间：2013-04-19T04:17:07.957
> 
> 标签：mysql, sql, profiler

是否有像 T-SQL 中的 Profiler 即 SQL Server 来跟踪 MYSQL 的查询。

我正在使用 Windows，XAMPP MySQL。我有这个简单的 PHP 命令，但它没有正确更新。我想看看它是否运行正常，所以我想像在 MSSQL 中一样跟踪它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:23:46.330

MySQL 有一个内置分析器，它允许您非常详细地查看查询的哪一部分花费了多少时间。

要启用它，请使用以下语句：

```
SET profiling = 1; 
```

然后这些步骤：

(1) 执行您的查询。

(2) 找出用于分析的查询 id：

```
SHOW PROFILES; 
```

它会返回给你这样的东西：

```
Query_ID |  Duration | Query
---------+-----------+-----------------------
   2     | 0.0006200 | SHOW STATUS
   3     | 0.3600000 | (your query here)
  ...    | ...       | ... 
```

现在您知道查询 id 是 (3)。

(3) 分析查询。

```
SHOW PROFILE FOR QUERY 3;   // example 
```

这将返回您的详细信息，可能如下所示：

```
Status                          | Duration
--------------------------------+-------------------
starting                        | 0.000010
checking query cache for query  | 0.000078
Opening tables                  | 0.000051
System lock                     | 0.000003
Table lock                      | 0.000008
init                            | 0.000036
optimizing                      | 0.000020
statistics                      | 0.000013
preparing                       | 0.000015
Creating tmp table              | 0.000028
executing                       | 0.000602
Copying to tmp table            | 0.000176
Sorting result                  | 0.000043
Sending data                    | 0.080032
end                             | 0.000004
removing tmp table              | 0.000024
end                             | 0.000006
query end                       | 0.000003
freeing items                   | 0.000148
removing tmp table              | 0.000019
closing tables                  | 0.000005
logging slow query              | 0.000003
cleaning up                     | 0.000004 
```

在这个例子中，大部分时间实际上是花在将数据从服务器发送回客户端。

# javascript - 移动到外部文件时找不到 Javascript 函数

> ID：16097127
> 
> 赞同：0
> 
> 时间：2013-04-19T04:17:35.057
> 
> 标签：javascript, asp.net

我对 ASP.NET 很陌生，对 Javascript 也很陌生。我正在编写一个 ASP.NET 用户控件。我有以下内容：

```
<head>
<title>Select Asset </title>
<script src="../Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    function CheckThenCloseActiveToolTip(supplierID) {
        var radGrid = $find('ctl00_MainContent_SelectAssetGrid1_gridAssetList_ctl00');
        var selectedItems = radGrid.get_masterTableView().get_selectedItems()
        if (selectedItems == null || selectedItems.length == 0) return 'You must select an asset first';
        else {
            DoPartialPostBack('selectasset', selectedItems[0]._dataItem.Id);
            CloseActiveToolTip();
        }
    }

    function PopulateRooms(e) {
        var idx = e.selectedIndex;
        if (idx > -1) {
            var dcId = JSON.stringify({ dataCenterId: e.options[idx].value });
            var pageUrl = '/WebService/AVWebService.asmx';

            $.ajax({
                url: pageUrl + '/GetRooms',
                type: 'post',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                data: dcId,
                success: OnRoomsReceived,
                error: OnErrorCall
            });
        }
        else {
            var ddlRooms = document.getElementById('MainContent_SelectAssetGrid1_ddlRooms');
            ddlRooms.disabled = true;
            $('#ddlRooms').empty();
            ddlRooms.options[0] = new Option('', '-1');
            getAssets(0);
        }
    }

    function OnRoomsReceived(result) {
        var ddlRooms = document.getElementById('MainContent_SelectAssetGrid1_ddlRooms');
        if (result.d.length > 0) {
            ddlRooms.disabled = false;
            $('#ddlRooms').empty();
            ddlRooms.options[0] = new Option('', '-1');
            for (var i = 0; i < result.d.length; i++) {
                ddlRooms.options[i + 1] = new Option(result.d[i].Name, result.d[i].Id);
            }
        }

        if (result.d.length = 1)
            ddlRooms.selectedIndex = 1;

        getAssets(0);
    }

    function resetGridData() {
        getAssets(0);
    }

    function getAssets(startAt) {
        var cpId = document.getElementById('hfldCompanyId').value;
        var pageUrl = '/WebService/AVWebService.asmx';
        var tableView = $find('ctl00_MainContent_SelectAssetGrid1_gridAssetList').get_masterTableView();
        var ddldc = document.getElementById('MainContent_SelectAssetGrid1_ddlDataCenter');
        var dcIdx = ddldc.selectedIndex;
        var dcId = '';
        if (dcIdx > -1)
            dcId = ddldc.options[dcIdx].value;

        var ddlrm = document.getElementById('MainContent_SelectAssetGrid1_ddlRooms');
        var rmIdx = ddlrm.selectedIndex;
        var rmId = '';
        if (rmIdx > -1)
            rmId = ddlrm.options[rmIdx].value;

        var ddlStatuses = $find('ctl00_MainContent_SelectAssetGrid1_ddlStatuses';

        var rbgAssetClass = document.getElementById('MainContent_SelectAssetGrid1_rbgAssetClass');
        var ac = 0;
        var rbgInputs = rbgAssetClass.getElementsByTagName('input');
        for (var i = 0; i < rbgInputs.length; i++) {
            if (rbgInputs[i].checked) {
                ac = i;
            }
        }

        var filters = [];
        var fbs = document.getElementsByClassName('rgFilterBox');
        for (var i = 0; i < fbs.length; i++)
            if (fbs[i].value != '')
                filters[filters.length] = { field: fbs[i].alt, value: fbs[i].value };

        var params = JSON.stringify({ companyId: cpId,
            startIndex: startAt,
            maximumRows: tableView.get_pageSize(),
            filterExpressions: filters,
            dataCenterId: ddldc.options[ddldc.selectedIndex].value,
            roomId: rmId,
            Statuses: ddlStatuses._checkedIndices,
            assetClass: ac
        });

        $.ajax({
            url: pageUrl + '/GetSelectAssetData',
            type: 'post',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: params,
            success: updateGrid,
            error: OnErrorCall
        });
    }

    function updateGrid(result) {
        var tableView = $find('ctl00_MainContent_SelectAssetGrid1_gridAssetList').get_masterTableView();
        tableView.set_dataSource(result.d.gridData);
        tableView.dataBind();
        tableView.set_virtualItemCount(result.d.count);
    }

    function gridAssetList_Command(sender, args) {
        args.set_cancel(true);

        var pageSize = sender.get_masterTableView().get_pageSize();
        var currentPageIndex = sender.get_masterTableView().get_currentPageIndex();
        if (args.get_commandName() == 'Filter')
            currentPageIndex = 0;

        getAssets(pageSize * currentPageIndex);
    }

    function gridAssetList_Created(sender, args) {
        var fbtns = document.getElementsByClassName('rgFilter');
        for (var i = 0; i < fbtns.length; i++)
            fbtns[i].style.visibility = 'hidden';

        var fbs = document.getElementsByClassName('rgFilterBox');
        for (var i = 0; i < fbs.length; i++)
            fbs[i].onkeypress = applyFilter;
    }

    function applyFilter(args) {
        if (args.keyCode == 13)
            resetGridData();
    }

</script> 
```

这在大多数情况下都有效，但如果我使用 Page.LoadControl() 加载 UserControl，它并不总是正确加载脚本。出于几个原因（可能是糟糕的原因），我想我会将脚本移动到外部文件中。

```
<script src="../Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="../Scripts/SelectAsset.js" type="text/javascript"></script> 
```

.js 文件中没有额外的代码或设置，只是

```
function CheckThenCloseActiveToolTip(supplierID) {
    var radGrid = $find('ctl00_MainContent_SelectAssetGrid1_gridAssetList_ctl00');
    var selectedItems = radGrid.get_masterTableView().get_selectedItems()
    if (selectedItems == null || selectedItems.length == 0) return 'You must select an asset first';

... 
```

但现在我得到一个运行时错误，即“function gridAssetList_Command”我们未定义。该函数绑定到页面中网格的 OnCommand 事件。

当我在 Firebug 中检查页面时，它没有在脚本文件列表中列出我的 .js 文件。

我正在将我的脚本加载到 . 我没有改变它们，只是移动了它们。我错过了什么？

更多信息：

* * *

将功能添加到控件时，它似乎使用了不同的 ClientId。我得到的错误是动态资源中的以下内容：

```
Sys.Application.add_init(function() {
$create(Telerik.Web.UI.RadGrid, {"ClientID":"ctl00_MainContent_ctl03_gridAssetList","ClientSettings": ... 
```

我将尝试将引用更改为 getElementByClass()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:33:25.363

在 asp.net web 表单上添加 javascript 引用的最佳方法是在父元素或父页面（如母版页）上使用 ScriptManager，并[在](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx)内容页面和用户控件上使用[ScriptManagerProxy 。](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanagerproxy.aspx)

尝试使用 ScriptManager 或两者结合来解决您的问题。还使用根应用程序别名 (~) 来引用文件 ex。`src="~/Scripts/jquery-1.9.1.min.js"`

因此，对于简单的方法，将您的脚本引用更改为：

```
<asp:ScriptManager ID="ScriptManagerProxy1" runat="server">
    <Scripts>
        <asp:ScriptReference Path="~/Scripts/jquery-1.9.1.min.js" />
        <asp:ScriptReference Path="~/Scripts/SelectAsset.js" />
    </Scripts>
</asp:ScriptManager> 
```

# 更新：

使用例如：

*   `$('table[id*="gridAssetList"]')`对于 id = 的表`ctl00_gridAssetList_xx`
*   `$('input[id*="inputTxt"]')`对于 id = 的输入`ctl100_inputTxt`
*   ETC

[使用 jquery选择器](http://api.jquery.com/category/selectors/)调用由 asp.net 组件呈现的 html 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:43:19.030

嗨史蒂夫我认为它显示错误由于脚本源路径请先检查然后验证脚本加载或不试试下面的代码

> if(typeof(yourfunction_name=='function') { // 此代码将确保该函数存在于页面中 //function exits do your functions. }else { alert('Script not loaded'); }

# ios - 从头开始的 iOS Amazon S3 图像上传

> ID：16097128
> 
> 赞同：1
> 
> 时间：2013-04-19T04:17:46.887
> 
> 标签：ios, image, upload, amazon-s3

在过去的一周里，我一直在努力让它发挥作用。我正在尝试做的是将图像上传到 S3 服务，作为我正在使用的这个 API 用于上传图像的非常hacky方式的一部分。API 记录在这里：[http](http://www.thingiverse.com/developers/upload-guide) ://www.thingiverse.com/developers/upload-guide 。我在第 2 步遇到问题。他们希望您上传到 S3，然后告诉他们的其他服务器该文件已上传到 S3，而不是为您完成。无论如何，这是我用来上传图片的代码：

```
+ (NSString *)uploadPictureWithParameters:(NSDictionary *)parameters toURL:(NSString *)actionURL withImage:(UIImage *)sourceImage {
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[request setHTTPShouldHandleCookies:NO];
[request setTimeoutInterval:30];
[request setHTTPMethod:@"POST"];

NSString *boundaryConstant = @"-------------------------acebdf13572468";

NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundaryConstant];
[request setValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];

NSLog(@"%@", [parameters allKeys]);

if ([parameters objectForKey:@"AWSAccessKeyId"]) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"AWSAccessKeyId\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:@"AWSAccessKeyId"]] dataUsingEncoding:NSUTF8StringEncoding]];
}
if ([parameters objectForKey:@"bucket"]) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"bucket\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:@"bucket"]] dataUsingEncoding:NSUTF8StringEncoding]];
}

if ([parameters objectForKey:@"key"]) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"key\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:@"key"]] dataUsingEncoding:NSUTF8StringEncoding]];
}
if ([parameters objectForKey:@"acl"]) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"acl\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:@"acl"]] dataUsingEncoding:NSUTF8StringEncoding]];
}
if ([parameters objectForKey:@"success_action_redirect"]) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"success_action_redirect\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:@"success_action_redirect"]] dataUsingEncoding:NSUTF8StringEncoding]];
}
if ([parameters objectForKey:@"policy"]) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"policy\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:@"policy"]] dataUsingEncoding:NSUTF8StringEncoding]];
}
if ([parameters objectForKey:@"signature"]) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"signature\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:@"signature"]] dataUsingEncoding:NSUTF8StringEncoding]];
}
if ([parameters objectForKey:@"Content-Type"]) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"Content-Type\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:@"Content-Type"]] dataUsingEncoding:NSUTF8StringEncoding]];
}

if ([parameters objectForKey:@"Content-Disposition"]) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"Content-Disposition\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-disposition: attachment; filename=photo.png\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
}

// This would put them in the wrong order:
/*for (NSString *param in [parameters allKeys]) {
 [body appendData:[[NSString stringWithFormat:@"---------------------------%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
 [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", param] dataUsingEncoding:NSUTF8StringEncoding]];
 [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parameters objectForKey:param]] dataUsingEncoding:NSUTF8StringEncoding]];
 }*/

NSLog(@"%d", body.length);

UIImage *resizedImage = [sourceImage resizedImageToFitInSize:CGSizeMake(700, 700) scaleIfSmaller:NO];
NSData *imageData = UIImagePNGRepresentation(resizedImage);
if (imageData) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"photo.png\"\r\n", @"file"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Type: image/png\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    NSString *requestBody = [[NSString alloc] initWithData:body encoding:NSUTF8StringEncoding];
    NSLog(@"Request Body: %@", requestBody);
    [body appendData:imageData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
}

[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];

NSLog(@"%d", body.length);

NSString *requestBody = [[NSString alloc] initWithData:body encoding:NSUTF8StringEncoding];
NSLog(@"Request Body After Image: %@", requestBody);

[request setHTTPBody:body];

NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];

NSString * urlString = [NSString stringWithFormat:@"%@", actionURL];
NSLog(@"%@", urlString);
NSURL *aUrl = [NSURL URLWithString: urlString];
[request setURL:aUrl];

NSError * error = nil;
NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: &error];
NSLog(@"%p, %@", error, error.localizedDescription);

NSString *responseString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

//NSDictionary *JSONDictionary = [NSJSONSerialization JSONObjectWithData:returnData options:kNilOptions error:&error];

return responseString;
} 
```

我从中得到的错误是：

> 根据策略无效：策略条件失败：["eq"、"$Content-Disposition"、""]

我一直在网上对此进行研究，似乎 S3 产生的错误通常与错误没有太大关系。那么，谁能告诉我我在这里做错了什么？

谢谢

# jakarta-ee - 如果存在具有不同签名的方法，则来自 EL 的方法调用失败 - JSF2

> ID：16097133
> 
> 赞同：1
> 
> 时间：2013-04-19T04:18:30.200
> 
> 标签：jakarta-ee, jsf-2, glassfish, el

我有一个支持 bean，其中包含一些共享相同名称但具有不同签名的方法，例如：

```
public void voteUp( Member member, ObjectA object ) { ... }
public void voteUp( Member member, ObjectB object ) { ... } 
```

在示例中，`ObjectA`和`ObjectB`类型不共享任何共同点。

在我的 Facelet 中，我这样称呼动作：

```
<h:form>
    <h:commandButton action="#{backingBean.voteUp(membre, objectA)}" ... />
</h:form>
...
<h:form>
    <h:commandButton action="#{backingBean.voteUp(membre, objectB)}" ... />
</h:form> 
```

但似乎有时（不是随机的，但可能取决于在我的支持 bean 中首先定义的签名），这些 EL 之一调用的方法是错误的，我得到了这些异常之一：

> serverError: class javax.faces.el.E​​valuationException 无法将 com.test.ObjectA 类型的 com.test.ObjectA@116c1800 转换为 com.test.ObjectB 类

既然我给了我的 EL 一个 type 的对象`ObjectA`，为什么它仍然调用带有`ObjectB`签名的方法呢？我是不是在这里忘记了一些关于 Java 基础的东西，还是我的 EL 解释器搞砸了？

我使用 GlassFish 3.1.2。

[编辑]只是为了明确我的代码中的其他一切都正常，当我重命名此示例中的两种方法之一时，一切正常。

# regex - Grep - 使用获取“匹配”到文本文件的末尾。*不起作用

> ID：16097136
> 
> 赞同：3
> 
> 时间：2013-04-19T04:18:49.410
> 
> 标签：regex, bash, grep

我在 ascii 中有一个长文本文件。每隔一段时间，它就会`Page: #####`排成一行。我想从“页面：25141”开始匹配，之后的每一行都匹配到文档的末尾。

我尝试过的一些组合是：

```
grep -E ^["Page: 25141".*] document.txt
grep  "Page: 25141.*" document.txt
grep  "Page: 25141\.\*" document.txt
grep -E "Page: 25141"[.*] document.txt
grep -E "Page: 25141"{.*} document.txt
grep -E {"Page: 25141".*} document.txt 
```

无法让这个工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T04:25:38.260

如果 sed 解决方案适合您：

```
sed -n '/Page: 25141/,$p' file 
```

上面的 sed 将匹配从包含模式 'Page 25141 的行开始到文件末尾（$）之间的所有行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T04:25:01.217

由于`grep`是面向行的，用正则表达式匹配多行并不容易。但是，该`-A`选项将在任何匹配项之后打印上下文：

```
grep -A 1000000000 'Page: 25141' 
```

你也可以用`ed`or来做`sed`：

```
echo '/Page: 25141/,$p' | ed -s filename 
```

`.*`根据[nenoopera](https://stackoverflow.com/a/7167115)对类似问题的回答，我几乎可以使用它。唯一的问题是它在最后打印了一个额外的换行符：

```
grep -Pzo '(?s)Page: 25141.*' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:09:28.520

您可以考虑一下 awk，它是为此类工作而构建的。`awk 'BEGIN{i=0;} /pattern/ {i=1;} {if(i==1) print}' file`会很好地完成你的工作，如果你想做更多。

# regex - 禁止外域访问

> ID：16097139
> 
> 赞同：0
> 
> 时间：2013-04-19T04:18:57.483
> 
> 标签：regex, apache, .htaccess, http, mod-rewrite

**问题**：我想只允许我网站的表格；`<form action="link"`提交我的表单后导航到 www.domain.com/link。但要拒绝直接访问 URL www.domain.com/link。

**尝试**：到目前为止，我知道如何使用 mod_rewrite 禁止访问：

```
Options -Multiviews
RewriteEngine on

RewriteCond %{REQUEST_URI} link
RewriteRule ^.*/?link/? - [F] 
```

但我不知道如何允许表单提交访问该页面。如果通过这样做提交表单，我探索了使用带有秘密值的输入标签以允许访问的可能性

```
Options -Multiviews
RewriteEngine on

RewriteCond %{REQUEST_URI} link
RewriteCond %{QUERY_STRING} !secret_key
RewriteRule ^.*/?link/? - [F] 
```

**替代方案**：但用户只要想直接访问页面，就可以将该键复制并粘贴为查询字符串。即使我使用 mod_rewrite 隐藏了查询字符串，更聪明的用户仍然可以通过检查输入标签来访问页面。保护这样的页面的可靠方法是什么？不污染查询字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:09:55.127

这对于 mod_rewrite 是不可靠的。

只需检查表单值是否正确填写，无论如何您都必须这样做。如果未填写值，请使用重定向

```
header('Location: elsewhere.html'); 
```

或者干脆返回另一个视图。

# c# - 使用 Ioniz.Zip DLL 压缩具有相同名称但扩展名不同的文件

> ID：16097140
> 
> 赞同：0
> 
> 时间：2013-04-19T04:18:58.027
> 
> 标签：c#, zipfile, dotnetzip, compact-framework2.0

我需要帮助编写一个函数来压缩文件夹中所有具有相同名称但扩展名不同的文件。我正在使用**Ionic.Zip dll**来实现这一点。我正在使用**.Net compact framework 2.0,VS2005**。我的代码如下所示：

```
 public void zipFiles()
   {
                string path = "somepath";
                string[] fileNames = Directory.GetFiles(path);
                Array.Sort(fileNames);//sort the filename in ascending order
                string lastFileName = string.Empty;
                string zipFileName = null;
                using (ZipFile zip = new ZipFile())
                    {
                        zip.AlternateEncodingUsage = ZipOption.AsNecessary;
                        zip.AddDirectoryByName("Files");

                        for (int i = 0; i < fileNames.Length; i++)
                        {
                            string baseFileName = fileNames[i];
                            if (baseFileName != lastFileName)
                            {
                                zipFileName=String.Format("Zip_{0}.zip",DateTime.Now.ToString("yyyy-MMM-dd-HHmmss"));
                                zip.AddFile(baseFileName, "Files");
                                lastFileName = baseFileName;
                            }
                        }
                        zip.Save(zipFileName);
                    }
    } 
```

**问题**：该文件夹将有 3 个同名的文件，但它们的扩展名会不同。现在，这些文件正在由设备通过 FTP 传输，因此文件名是由它自动生成的，我无法控制它。所以，例如，文件夹中有6个文件："ABC123.DON","ABC123.TGZ","ABC123.TSY","XYZ456.DON","XYZ456.TGZ","XYZ456.TSY"。我必须将 3 个名称为“ABC123”的文件和其他 3 个名称为“XYZ456”的文件压缩在一起。正如我所说，我不知道文件的名称，我的函数必须在后台运行。我当前的代码压缩所有单个 zip 文件夹中的文件。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:41:41.397

试试下面的代码

```
 string path = @"d:\test";

 //First find all the unique file name i.e. ABC123 & XYZ456 as per your example                
 List<string> uniqueFiles=new List<string>();
 foreach (string file in Directory.GetFiles(path))
 {
     if (!uniqueFiles.Contains(Path.GetFileNameWithoutExtension(file)))
         uniqueFiles.Add(Path.GetFileNameWithoutExtension(file));
 }

 foreach (string file in uniqueFiles)
 {
      string[] filesToBeZipped = Directory.GetFiles(@"d:\test",string.Format("{0}.*",file));

      //Zip all the files in filesToBeZipped 
 } 
```

# django - 在添加表单上将选项“self”添加到自引用外键

> ID：16097142
> 
> 赞同：0
> 
> 时间：2013-04-19T04:19:06.293
> 
> 标签：django, django-forms, foreign-keys, self-reference

我有一个自引用 ForeignKey 字段：

```
class Thing(models.Model)
    special_thing = models.ForeignKey(
        'self',
        blank=True,
        null=True
    ) 
```

在“添加事物”表单上，除了其他现有事物外，我还需要提供一个选择“事物本身”，即尚未添加的事物。告诉用户添加然后重新访问该字段不是一种选择。

我该怎么办？

我目前的想法是覆盖表单：

*   将“special_thing”从默认的 ModelChoiceField 更改为 ChoiceField
*   将新的特殊（“标记”）选项“*** THIS THING ***”添加到 __init__() 中的字段选项
*   提供 clean_special_thing() ，它允许 "*** THIS THING ***" 或可以从查询集中查找的事物的 id。
*   在 save() 中，如果选择“*** THIS THING ***”，则使用 special_thing=None 保存 Thing，然后将其设置为自身并再次保存。否则，通过给定的 id 查找 Thing 并照常保存。

我正在为 ModelAdmin 的 ModelForm 执行此操作。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:56:07.877

另一种可能的解决方案是使用 jQuery（[示例](https://stackoverflow.com/questions/317095/how-do-i-add-options-to-a-dropdownlist-using-jquery)）将另一个添加`***THIS THING***`到模板中的表单域。

提交表单后，您可以在`clean`表单的 -method 或视图中检查所选选项以存储它。

例如：

```
if request.POST:
    if request.POST['special_thing'] == 'myself':
        # do whatever should be done
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:41:52.697

我已经按照这些想法进行了，最后一步是不必要的。相反， clean 方法可以将选项设置为表单的实例，并且整体工作保持非常合理：

```
from django.contrib import admin
from django import forms

from mdoels import Thing

MARKER_THIS_THING = '*** THIS THING ***'

class ThingAdmin(admin.ModelAdmin):

    def get_form(self, request, obj=None, **kwargs):
        """
        Return the Thing ModelForm with an additional choice for the
        'special_thing' field (FK to self) that allows the Add Thing form
        to refer to the newly added instance itself.
        """

        form = super(ThingAdmin, self).get_form(request, obj, **kwargs)

        # The form still has a ModelChoiceField for special_thing, construct
        # new non-model choices from that so we can add the 'this thing' choice
        thing_choices = [c for c in form.base_fields['special_thing'].choices]

        if not obj:
            # Only the Add form needs the special choice
            thing_choices = [(MARKER_THIS_THING, MARKER_THIS_THING)] + thing_choices

        form.base_fields['special_thing'] = forms.ChoiceField(
            choices=thing_choices
        )

        def clean_special_thing(form):
            """
            Now just a simple ChoiceField, convert posted values to
            model instances like a ModelChoiceField does.
            Convert special new 'this thing' choice to be the newly added
            instance.
            """

            data = form.cleaned_data['special_thing']
            instance = getattr(form, 'instance', None)

            if data==MARKER_THIS_THING and not (instance and instance.pk):
                # Referring to new instance itself on Add form
                return instance

            # Return selected model like a ModelChoiceField does
            try:
                data = Thing.objects.get(pk=data)
            except Thing.DoesNotExist:
                raise forms.ValidationError('Invalid choice')
            return data

        # clean_* are not part of ModelAdmin, just of forms and models.
        # So we attach it to the form:
        form.clean_special_thing = clean_special_thing

        return form 
```

# android - Google Maps Android API v2 检测长按地图并添加标记不起作用

> ID：16097143
> 
> 赞同：12
> 
> 时间：2013-04-19T04:19:16.153
> 
> 标签：android, google-maps-markers, latitude-longitude, google-maps-android-api-2, supportmapfragment

我想用长按在地图上添加一个标记。

`Toast`in`onMapClick()`是通过正常点击显示的。但是长按不起作用。长按不显示`Toast`in 。`onMapLongClick()`地图上也不会显示标记。

我正在使用`SupportMapFragment`，因为我想在 Android 2.x 设备上使用我的应用程序。我已经在 Android 版本 2.3.7 的 Nexus One 上测试了我的应用程序。

这是我的代码。

```
public class MainActivity extends FragmentActivity implements
        OnMapClickListener, OnMapLongClickListener {

    final int RQS_GooglePlayServices = 1;
    private GoogleMap myMap;

    Location myLocation;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        FragmentManager myFragmentManager = getSupportFragmentManager();
        SupportMapFragment mySupportMapFragment = (SupportMapFragment) myFragmentManager
                .findFragmentById(R.id.map);
        myMap = mySupportMapFragment.getMap();

        myMap.setMyLocationEnabled(true);

        myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
        // myMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        // myMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
        // myMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);

        myMap.setOnMapClickListener(this);
        myMap.setOnMapLongClickListener(this);

    }

    @Override
    protected void onResume() {
        super.onResume();

        int resultCode = GooglePlayServicesUtil
                .isGooglePlayServicesAvailable(getApplicationContext());

        if (resultCode == ConnectionResult.SUCCESS) {
            Toast.makeText(getApplicationContext(),
                    "isGooglePlayServicesAvailable SUCCESS", Toast.LENGTH_LONG)
                    .show();
        } else {
            GooglePlayServicesUtil.getErrorDialog(resultCode, this,
                    RQS_GooglePlayServices);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onMapClick(LatLng point) {

        myMap.animateCamera(CameraUpdateFactory.newLatLng(point));

        Toast.makeText(getApplicationContext(), point.toString(),
                Toast.LENGTH_LONG).show();

    }

    @Override
    public void onMapLongClick(LatLng point) {

        myMap.addMarker(new MarkerOptions().position(point).title(
                point.toString()));

        Toast.makeText(getApplicationContext(),
                "New marker added@" + point.toString(), Toast.LENGTH_LONG)
                .show();

    }

} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-19T04:23:21.580

我用过这个。有效。

```
GoogleMap gm;

gm.setOnMapLongClickListener(this); 

@Override    
public void onMapLongClick(LatLng point) {
    gm.addMarker(new MarkerOptions()
        .position(point)
        .title("You are here")           
        .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED)));  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-08T12:51:30.140

```
googleMap = supportMapFragment.getMap();

    // Setting a click event handler for the map
    googleMap.setOnMapClickListener(new OnMapClickListener() {

        @Override
        public void onMapClick(LatLng latLng) {

            // Creating a marker
            MarkerOptions markerOptions = new MarkerOptions();

            // Setting the position for the marker
            markerOptions.position(latLng);

            // Setting the title for the marker.
            // This will be displayed on taping the marker
            markerOptions.title(latLng.latitude + " : " + latLng.longitude);

            // Clears the previously touched position
            googleMap.clear();

            // Animating to the touched position
            googleMap.animateCamera(CameraUpdateFactory.newLatLng(latLng));

            // Placing a marker on the touched position
            googleMap.addMarker(markerOptions);
        }
    }); 
```

**或者**

```
mMap.setOnMapLongClickListener(new
           GoogleMap.OnMapLongClickListener() {
        @Override
        public void onMapLongClick (LatLng latLng){
           Geocoder geocoder =
              new Geocoder(MapMarkerActivity.this);
           List<Address> list;
           try {
              list = geocoder.getFromLocation(latLng.latitude,
                 latLng.longitude, 1);
           } catch (IOException e) {
              return;
           }
           Address address = list.get(0);
           if (marker != null) {
              marker.remove();
           }

           MarkerOptions options = new MarkerOptions()
              .title(address.getLocality())
              .position(new LatLng(latLng.latitude,
                 latLng.longitude));

           marker = mMap.addMarker(options);
        }
     }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-20T12:31:54.953

您没有设置图标。尝试：

```
 @Override
    public void onMapLongClick(LatLng point) {

        myMap.addMarker(new MarkerOptions()
            .position(point)
            .title(point.toString())
            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED))); 

         Toast.makeText(getApplicationContext(),
            "New marker added@" + point.toString(), Toast.LENGTH_LONG)
            .show();

} 
```

# vba - 两个范围之间的差异

> ID：16097144
> 
> 赞同：8
> 
> 时间：2013-04-19T04:19:18.060
> 
> 标签：vba, excel, set, theory, range

我可以找到很多关于“Union”和“Intersect”VBA 方法的问题和示例，但我找不到关于“Set Difference”方法的任何内容？这是否存在（除了使用联合和相交的组合）？

我试图找到一种简单的方法来获取所有 range1，不包括与 range2 重叠的任何 range1，而不知道任一范围的大小或形状。

任何帮助将不胜感激。

编辑。

![在此处输入图像描述](https://i.stack.imgur.com/SmykM.jpg)

尝试解决方案，其中 rng1 是红色部分， rng2 是蓝色部分（已调试以检查这些是否正确）：

```
rng = SetDifference(rng, highlightedColumns)

Function SetDifference(Rng1 As Range, Rng2 As Range) As Range
On Error Resume Next
If Application.Intersect(Rng1, Rng2).Address <> Rng2.Address Then
    Exit Function
On Error GoTo 0
Dim aCell As Range
For Each aCell In Rng1
    Dim Result As Range
    If Application.Intersect(aCell, Rng2) Is Nothing Then
        Set Result = Union(Result, aCell)
        End If
    Next aCell
Set SetDifference = Result
End If
End Function 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T07:12:32.057

在我稍微改进后试试这个功能：

```
Function SetDifference(Rng1 As Range, Rng2 As Range) As Range
On Error Resume Next

If Intersect(Rng1, Rng2) Is Nothing Then
    'if there is no common area then we will set both areas as result
    Set SetDifference = Union(Rng1, Rng2)
    'alternatively
    'set SetDifference = Nothing
    Exit Function
End If

On Error GoTo 0
Dim aCell As Range
For Each aCell In Rng1
    Dim Result As Range
    If Application.Intersect(aCell, Rng2) Is Nothing Then
        If Result Is Nothing Then
            Set Result = aCell
        Else
            Set Result = Union(Result, aCell)
        End If
    End If
Next aCell
Set SetDifference = Result

End Function 
```

记得这样称呼它：

```
Set Rng = SetDifference(Rng, highlightedColumns) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-07T07:49:51.547

^每个单元格的迭代对于像这样的调用非常慢

SetDifference(ActiveSheet.Cells, ActiveSheet.Range("A1")) '除 A1 以外的所有单元格

所以：

```
'(needed by the 2nd function)
Public Function Union(ByRef rng1 As Range, _
                      ByRef rng2 As Range) As Range
    If rng1 Is Nothing Then
        Set Union = rng2
        Exit Function
    End If
    If rng2 Is Nothing Then
        Set Union = rng1
        Exit Function
    End If
    If Not rng1.Worksheet Is rng2.Worksheet Then
        Exit Function
    End If
    Set Union = Application.Union(rng1, rng2)
End Function

Public Function Complement(ByRef rngA As Range, _
                           ByRef rngB As Range) As Range
    Dim rngResult As Range
    Dim rngResultCopy As Range
    Dim rngAreaA As Range
    Dim rngAreaB As Range
    Dim lngX1 As Long
    Dim lngY1 As Long
    Dim lngX2 As Long
    Dim lngY2 As Long
    Dim lngX3 As Long
    Dim lngY3 As Long
    Dim lngX4 As Long
    Dim lngY4 As Long
    Dim lngX5 As Long
    Dim lngY5 As Long
    Dim lngX6 As Long
    Dim lngY6 As Long

    If rngA Is Nothing Then
        Exit Function
    End If
    If rngB Is Nothing Then
        Set Complement = rngA
        Exit Function
    End If
    If Not rngA.Worksheet Is rngB.Worksheet Then
        Exit Function
    End If
    Set rngResult = rngA
    With rngA.Worksheet
        For Each rngAreaB In rngB.Areas
            If rngResult Is Nothing Then
                Exit For
            End If
            lngX3 = rngAreaB.Row
            lngY3 = rngAreaB.Column
            lngX4 = lngX3 + rngAreaB.Rows.Count - 1
            lngY4 = lngY3 + rngAreaB.Columns.Count - 1
            Set rngResultCopy = rngResult
            Set rngResult = Nothing
            For Each rngAreaA In rngResultCopy.Areas
                lngX1 = rngAreaA.Row
                lngY1 = rngAreaA.Column
                lngX2 = lngX1 + rngAreaA.Rows.Count - 1
                lngY2 = lngY1 + rngAreaA.Columns.Count - 1
                If lngX3 > lngX1 Then lngX5 = lngX3 Else lngX5 = lngX1
                If lngY3 > lngY1 Then lngY5 = lngY3 Else lngY5 = lngY1
                If lngX4 > lngX2 Then lngX6 = lngX2 Else lngX6 = lngX4
                If lngY4 > lngY2 Then lngY6 = lngY2 Else lngY6 = lngY4
                If lngX5 <= lngX6 And lngY5 <= lngY6 Then
                    If lngX5 > lngX1 Then
                        Set rngResult = Union(rngResult, .Range(.Cells(lngX1, lngY1), .Cells(lngX5 - 1, lngY2)))
                    End If
                    If lngY5 > lngY1 Then
                        Set rngResult = Union(rngResult, .Range(.Cells(lngX5, lngY1), .Cells(lngX6, lngY5 - 1)))
                    End If
                    If lngY2 > lngY6 Then
                        Set rngResult = Union(rngResult, .Range(.Cells(lngX5, lngY6 + 1), .Cells(lngX6, lngY2)))
                    End If
                    If lngX2 > lngX6 Then
                        Set rngResult = Union(rngResult, .Range(.Cells(lngX6 + 1, lngY1), .Cells(lngX2, lngY2)))
                    End If
                Else
                    Set rngResult = Union(rngResult, rngAreaA)
                End If
            Next rngAreaA
        Next rngAreaB
    End With
    Set Complement = rngResult
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-07T01:08:54.687

当范围同时具有多个区域时，您将需要不同的方法。我没有编造这个例子的核心思想，也不记得我在哪里找到了这个想法（使用`xlCellTypeConstants`）。我对其进行了调整以使其适用于具有以下区域的范围：

```
' Range operator that was missing
Public Function rngDifference(rn1 As Range, rn2 As Range) As Range
Dim rnAreaIntersect As Range, varFormulas As Variant
Dim rnAreaS As Range, rnAreaR As Range, rnAreaDiff As Range
Dim rnAreaModified As Range, rnOut As Range
 On Error Resume Next
 Set rngDifference = Nothing
 If rn1 Is Nothing Then Exit Function
 If rn2 Is Nothing Then Set rngDifference = rn1: Exit Function

 Set rnOut = Nothing
 For Each rnAreaS In rn1.Areas
    Set rnAreaModified = rnAreaS

    For Each rnAreaR In rn2.Areas
        Set rnAreaIntersect = Intersect(rnAreaModified, rnAreaR)
        If rnAreaIntersect Is Nothing Then
            Set rnAreaDiff = rnAreaModified
        Else ' there is interesection
            'save
            varFormulas = rnAreaS.Formula

            rnAreaS.Value = 0:  rnAreaIntersect.ClearContents
            If rnAreaS.Cells.Count = 1 Then
               Set rnAreaDiff = Intersect(rnAreaS.SpecialCells(xlCellTypeConstants), rnAreaS)
            Else
               Set rnAreaDiff = rnAreaS.SpecialCells(xlCellTypeConstants)
            End If
            'restore
            rnAreaS.Formula = varFormulas
        End If
        If Not (rnAreaModified Is Nothing) Then
            Set rnAreaModified = Intersect(rnAreaModified, rnAreaDiff)
        End If
    Next
    If Not (rnAreaModified Is Nothing) Then
        If rnOut Is Nothing Then
            Set rnOut = rnAreaModified
        Else
            Set rnOut = Union(rnOut, rnAreaModified)
        End If
    End If
 Next
 Set rngDifference = rnOut
End Function 
```

希望这可以帮助

# sqlite - 在不可为空的列中忽略默认值

> ID：16097149
> 
> 赞同：12
> 
> 时间：2013-04-19T04:20:02.367
> 
> 标签：sqlite, sqlalchemy, sqlalchemy-migrate

我正在尝试使用以下 SQL alchemy 脚本在表中创建一个新的布尔型、不可为空的列（默认值=True）：

```
from sqlalchemy import MetaData, Table, Boolean, Column

def upgrade(migrate_engine):
    meta = MetaData(bind=migrate_engine)
    message_table = Table('message', meta, autoload=True)
    col = Column('include_signature', Boolean(), default=True, nullable=False)
    col.create(message_table) 
```

这导致了一个相当令人费解的错误：

```
 File "src/adhocracy/migration/versions/061_optional_massmessage_signature.py", line 7, in upgrade
    col.create(message_table)
  File "eggs/sqlalchemy_migrate-0.7.2-py2.6.egg/migrate/changeset/schema.py", line 528, in create
    engine._run_visitor(visitorcallable, self, connection, **kwargs)
  File "eggs/SQLAlchemy-0.7.10-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 2302, in _run_visitor
    conn._run_visitor(visitorcallable, element, **kwargs)
  File "eggs/SQLAlchemy-0.7.10-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 1972, in _run_visitor
    **kwargs).traverse_single(element)
  File "eggs/sqlalchemy_migrate-0.7.2-py2.6.egg/migrate/changeset/ansisql.py", line 53, in traverse_single
    ret = super(AlterTableVisitor, self).traverse_single(elem)
  File "eggs/SQLAlchemy-0.7.10-py2.6-linux-x86_64.egg/sqlalchemy/sql/visitors.py", line 106, in traverse_single
    return meth(obj, **kw)
  File "eggs/sqlalchemy_migrate-0.7.2-py2.6.egg/migrate/changeset/databases/sqlite.py", line 75, in visit_column
    super(SQLiteColumnGenerator,self).visit_column(column)
  File "eggs/sqlalchemy_migrate-0.7.2-py2.6.egg/migrate/changeset/ansisql.py", line 101, in visit_column
    self.execute()
  File "eggs/sqlalchemy_migrate-0.7.2-py2.6.egg/migrate/changeset/ansisql.py", line 42, in execute
    return self.connection.execute(self.buffer.getvalue())
  File "eggs/SQLAlchemy-0.7.10-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 1449, in execute
    params)
  File "eggs/SQLAlchemy-0.7.10-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 1628, in _execute_text
    statement, parameters
  File "eggs/SQLAlchemy-0.7.10-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 1698, in _execute_context
    context)
  File "eggs/SQLAlchemy-0.7.10-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 1691, in _execute_context
    context)
  File "eggs/SQLAlchemy-0.7.10-py2.6-linux-x86_64.egg/sqlalchemy/engine/default.py", line 331, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (OperationalError) Cannot add a NOT NULL column
with default value NULL '\nALTER TABLE message ADD include_signature BOOLEAN NOT NULL' () 
```

据我了解，sqlalchemy 缺少默认值，但我确实包含了`default=True`！这里有什么问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T08:28:46.450

像这样使用`server_default="true"`：

```
col = Column('include_signature', Boolean(), default=True,
             server_default="true", nullable=False) 
```

where`default`用于类实例，`server_default`用于数据库列定义。

# python - 在 python 中运行测试脚本场景

> ID：16097150
> 
> 赞同：0
> 
> 时间：2013-04-19T04:20:07.633
> 
> 标签：python

我正在开发一个脚本来测试另一个程序。基本上，我复制了一个类，其中包含我正在测试的程序所具有的所有功能。为简单起见，假设我只有 2 个函数：set(value) 和 add(value)。set(value) 设置一个累加器值， add(value) 向它添加值；我正在测试一个应该做同样事情的程序。

我还有一个 check() 函数，它验证 set(value) 和 add(value) 操作的累加器值是否与我正在测试的程序检索到的值具有相同的值；所以，在每次操作之后，我想运行这个 check() 函数并确保它们匹配。

为了说明这一点，这里有一个（未经测试的）示例：

```
def set(self, value):
    self.acc = value
    sendCommandToMyProgram('set', value)

def add(self, value):
    self.acc += value
    sendCommandToMyProgram('add', value)

def check(self):
    return self.acc == sendCommandToMyProgram('check', value) 
```

我想做“测试场景”，比如：

```
set(1)
check()
add(2)
check()
add(-2)
check()
add(3) 
```

和许多其他人

制作这个“测试场景”脚本的最佳方法是什么？如果它可以与接受不同参数的函数一起工作，那就太好了（在这个例子中，set() 和 add() 都只接收一个参数 - value -，但情况并非总是如此）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:48:17.690

假设您不想在正常操作期间一直检查该值，那么*首先*想到的就是内置的[单元测试模块](http://docs.python.org/2/library/unittest.html)。

如果您需要做更复杂的事情，而您无法像下面所示那样干净地隔离测试，请查看我必须解决的一些[问题](https://stackoverflow.com/q/5834872/157744)。值得注意的是，我最终推出了自己的测试运行器，其行为与单元测试非常相似，但具有更大的控制力。我将在下个月左右将其推向 py-pi。

**工作单元测试示例**

```
import unittest

class RealAccumlator(object):
    def __init__(self):
        self.acc = 0

    def add(self, val):
        self.acc += val

    def set(self, val):
        self.acc = val

    def get(self):
        return self.acc

# Using a global variable as I dont know how "sendCommandToMyProgram"
# is used
real_acc = RealAccumlator()

# Test Script

class MyAccumlator(object):
    def __init__(self):
        self.acc = 0

    def add(self, val):
        self.acc += val
        real_acc.add(val)

    def set(self, val):
        self.acc = val
        real_acc.set(val)

    def check(self):
        return self.acc == real_acc.get()

class MockedAccumlatorTests(unittest.TestCase):

    def setUp(self):
        self.acc = MyAccumlator()

    def test_SetFunction(self):
        test_values = range(-10,10)

        # Test the set commands
        for val in test_values:
            self.acc.set(val)
            self.assertTrue(self.acc.check())

    def test_AddFunction(self):
        test_values = range(-10,10)

        # Set the acc to a known value and to a quick test
        self.acc.set(0) 
        self.assertTrue(self.acc.check())

        # Test the add commands
        for val in test_values:
            self.acc.add(val)
            self.assertTrue(self.acc.check())

class RealAccumlatorTests(unittest.TestCase):

    def test_SetFunction(self):
        test_values = range(-10,10)

        # Test the set commands
        for val in test_values:
            real_acc.set(val)
            self.assertEqual(val, real_acc.get())

    def test_AddFunction(self):
        test_values = range(-10,10)

        # Set the acc to a known value and to a quick test
        real_acc.set(0) 
        self.assertEqual(0, real_acc.get())

        # Test the add commands
        expected_value = 0
        for val in test_values:
            expected_value += val
            real_acc.add(val)
            self.assertEqual(expected_value, real_acc.get())

if __name__ == '__main__':
    unittest.main() 
```

**根据接受的答案更新**

如果这只是一个测试脚本并且你的模拟累加器没有在外面使用，那么这个测试考虑以下模块。 *从长远来看，我仍然相信编写单元测试会更好地为您服务*

```
class MyAccumlator(object):
    def __init__(self):
        self.acc = 0

    def add(self, val):
        self.acc += val
        real_acc.add(val)
        assert(self.check())
        return self.check()

    def set(self, val):
        self.acc = val
        real_acc.set(val)
        assert(self.check())
        return self.check()

    def check(self):
        return self.acc == real_acc.get() 
```

这将允许您遍历您想要的任何列表，而无需考虑调用检查函数。提供了两种方法，您可以检查。

1.  `assert`如果它们不匹配，则 离开调用将引发异常（仅在假设这将作为测试脚本存在的情况下建议）。

2.  从调用脚本中删除`assert`并检查返回状态（而不是显式调用也`check()`可能会清理内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:30:12.707

我需要在每次操作后运行“check()”。

我最终创建了“测试场景”，例如：

```
test_scenarios =
    [
        [
            (obj.set, {1}),
            (obj.add, {5}),
            (obj.add, {-2})
        ],
        [
            (obj.set, {-2}),
            (obj.add, {3}),
            (obj.add, {-5})
            (obj.add, {1})
        ]
    ] 
```

然后我迭代测试场景，基本上调用 test[0](**test[1]) 然后 check()

也许不是最好的解决方案，但我能想到的最好的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:03:40.610

设置值。创建一个包含要添加的值的列表。然后，遍历该列表，运行`check`并`add`使用每个循环。IE：`numlist = [1, 2, -2, 3]; for num in numlist: obj.check(); obj.add(num)`

# excel - 如何忽略错误并继续循环？

> ID：16097154
> 
> 赞同：0
> 
> 时间：2013-04-19T04:20:48.003
> 
> 标签：excel, vba

我得到运行时错误 53：找不到第 27-28 个项目的文件。知道有什么问题吗？

错误在于：

“FileCopy 源：=SourcePath，目标：=DestinationPath”

```
Option Base 1
Sub LoopThroughFolder()

    Const FileSpec As String = "*.xls"
    Dim y As Integer
    Dim MyFolder As String
    Dim MyFile As String
    Dim iDot As Integer
    Dim FileRoot As String
    Dim FileExt As String

    Dim SourcePath As String
    Dim DestinationPath As String

    Dim ArrayData() As Variant
    Dim Series() As Integer

    'Capture the filename information
    For y = 2009 To 2030
        ReDim Preserve ArrayData(12, y)
        ReDim Preserve Series(12, y)
        MyFolder = ActiveWorkbook.Path & "\" & y & "\"

        i = 1
        MyFile = Dir(MyFolder & FileSpec)
        Do While Len(MyFile) > 0
            iDot = InStrRev(MyFile, ".")

            If iDot = 0 Then
                FileRoot = MyFile
                FileExt = ""
            Else
                FileRoot = Left(MyFile, iDot - 1)
                FileExt = Mid(MyFile, iDot - 1)
            End If

            MyFile = Dir
            ArrayData(i, y) = FileRoot
            i = i + 1
        Loop
    Next y

    'Conversion from MMMYY to numerical sequence
    a = 1
    BasicPath = ActiveWorkbook.Path
    For y = 2009 To 2030
        For i = 1 To 12
            If Not IsEmpty(ArrayData(i, y)) Then
                Series(i, y) = a
                a = a + 1

                SourcePath = BasicPath & "\" & y & "\" & ArrayData(i, y) & ".xls"
                DestinationPath = BasicPath & "\output\" & "Bill_Summary_Report_" & Series(i, y) & ".xls"

                FileCopy Source:=SourcePath, Destination:=DestinationPath

            Else
                x = 0
            End If
        Next i
    Next y

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:25:50.607

尝试

```
Sub LoopThroughFolder()
  on error resume next
  ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:33:06.297

我添加了一个函数**fileExist**，如果路径存在，它将为真。在调用此行“FileCopy Source:=SourcePath, Destination:=DestinationPath”之前，最好检查它们是否存在，如果存在则继续进行文件复制。

Option Base 1 Sub LoopThroughFolder()

```
 Const FileSpec As String = "*.xlsm"
    Dim y As Integer
    Dim MyFolder As String
    Dim MyFile As String
    Dim iDot As Integer
    Dim FileRoot As String
    Dim FileExt As String

    Dim SourcePath As String
    Dim DestinationPath As String

    Dim ArrayData() As Variant
    Dim Series() As Integer

    'Capture the filename information
    For y = 2009 To 2030
        ReDim Preserve ArrayData(12, y)
        ReDim Preserve Series(12, y)
        MyFolder = ActiveWorkbook.path & "\" & y & "\"

        i = 1
        MyFile = Dir(MyFolder & FileSpec)
        Do While Len(MyFile) > 0
            iDot = InStrRev(MyFile, ".")

            If iDot = 0 Then
                FileRoot = MyFile
                FileExt = ""
            Else
                FileRoot = Left(MyFile, iDot - 1)
                FileExt = Mid(MyFile, iDot - 1)
            End If

            MyFile = Dir
            ArrayData(i, y) = FileRoot
            i = i + 1
        Loop
    Next y

    'Conversion from MMMYY to numerical sequence
    a = 1
    BasicPath = ActiveWorkbook.path
    For y = 2009 To 2030
        For i = 1 To 12
            If Not IsEmpty(ArrayData(i, y)) Then
                Series(i, y) = a
                a = a + 1

                SourcePath = BasicPath & "\" & y & "\" & ArrayData(i, y) & ".xls"
                DestinationPath = BasicPath & "\output\" & "Bill_Summary_Report_" & Series(i, y) & ".xls"

                If fileExist(SourcePath) And fileExist(DestinationPath) Then
                    FileCopy Source:=SourcePath, Destination:=DestinationPath
                End If

            Else
                x = 0
            End If
        Next i
    Next y

End Sub

Function fileExist(path As String) As Boolean
    On Error Resume Next

    Dim file As String
    file = Dir(path)

    If file <> "" Then fileExist = True

    On Error GoTo 0
End Function 
```

# javascript - Java 脚本：复选框中的 onclick 事件在使用 CSS 类作为复选框时在 IE 8 中不起作用

> ID：16097159
> 
> 赞同：1
> 
> 时间：2013-04-19T04:21:28.320
> 
> 标签：javascript, html, internet-explorer-8

我在使用 IE 8 时遇到了问题。因为我的代码可以在 mozila、chrome 甚至 IE 9 等主流浏览器上成功运行。但我无法触发 IE 8 中复选框的 onclick 事件。我的代码示例是，

```
function checkboxcheck(index){
    alert('select');

} 
```

在这里，我通过替换复选框使用了不同的图像。我的 HTML 代码是，

```
<input type='checkbox' class='rating'  id="sample"    onclick='checkboxcheck(parameters)'  />
                    <label for="sample"></label> 
```

CSS：

```
.rating {
    display:none;
}
input[type="checkbox"] + label {
    width: 15px;
    height: 15px;
    display: inline-block;
    background-image:url('../images/white_small.png') ;
}

input[type="checkbox"] + label:hover {
    width: 15px;
    height: 15px;
    display: inline-block;
    background-image:url('../images/golden_small.png') ;

}

input[type=checkbox]:checked + label {
    width: 15px;
    height: 15px;
    display: inline-block;
    background-image:url('../images/golden_small.png') ;
} 
```

我的问题是当我单击其他图像形式的复选框时，不会触发 checkboxcheck(index) 功能。

**如果我删除`class`属性，则会触发 onclick 函数**
***我不知道为什么在为复选框放置类属性时不调用 onclick***

请指导我。提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:22:43.947

我在我的应用程序中遇到了同样的问题。我刚刚更改了文档类型并且它起作用了......试试这个

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:55:41.287

你可以尝试这样的事情：

您可以在 javascript 文件中分配它，而不是在 html 中调用该方法。例如使用 jQuery：

HTML

```
<input type='checkbox'  id="sample"   class="myclass"  />
<label for="sample"></label> 
```

jQuery

```
$('.myclass').click(checkboxcheck(parameters)); 
```

我不知道这段代码是否能解决您的问题，但也许可以

祝你好运

# java - 从一个类获取 MouseListener 结果到另一个 Java

> ID：16097160
> 
> 赞同：0
> 
> 时间：2013-04-19T04:21:38.297
> 
> 标签：java, class, transfer

我有一个带有 panelC 的类，其中包含一个填充有客户信息、一些文本字段和按钮的表。然后我还有另一个类 panelP，它包含与 panelC 几乎相同的内容，但包含产品信息。然后在我的主类中，我创建一个带有 tabbedPane 的窗口，并将上面的面板添加为选项卡。我的问题是，每当我在 panelC 表中选择一行时，值都会在文本字段中传输，但我无法在 panelP 类中获取这些值。

关于如何处理这个问题的任何想法？:(

# sql-server - 查询给出错误

> ID：16097169
> 
> 赞同：0
> 
> 时间：2013-04-19T04:23:23.347
> 
> 标签：sql-server, runtime-error

以下查询给出错误，请帮助我。

```
declare     @dateScorecard datetime
set @dateScorecard = convert(varchar, 4)+'/1/'+ convert(varchar,2013)
select @dateScorecard
select top 1 i_CurrentMonthColor from AK_ScoreCardDetails scr
where datediff(m, convert(Datetime, convert(varchar, 4)+'/1/'+ convert(varchar,2013)), @dateScorecard) 
```

错误详情：

```
Msg 4145, Level 15, State 1, Line 5
An expression of non-boolean type specified in a context where a condition is expected, near ')'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:33:51.740

两个快速评论：

首先，您不需要对这些数字使用转换 - 只需将它们直接放入您的查询中，即

```
set @dateScoreCard = convert('4/1/2013'); 
```

此外，在“where”子句中，您没有将 datediff 的结果与任何内容进行比较 datediff 子句之后应该有一个部分，即：

```
where datediff(.....) > 2 
```

例如。你的`datediff`函数只给你一个数字，它是你给它的两个日期的差，用你定义的术语来说，这里是几个月。使用该数字与您希望使 sql 语句为您工作的某个值进行比较。

# r - rdata：某种方法来遍历数据框的列名？

> ID：16097172
> 
> 赞同：3
> 
> 时间：2013-04-19T04:23:49.163
> 
> 标签：r, rdata

我有大约 30 行代码可以做到这一点（获得 Z 分数）：

```
data$z_col1 <- (data$col1 - mean(data$col1, na.rm = TRUE)) / sd(data$col1, na.rm = TRUE)
data$z_col2 <- (data$col2 - mean(data$col2, na.rm = TRUE)) / sd(data$col2, na.rm = TRUE)
data$z_col3 <- (data$col3 - mean(data$col3, na.rm = TRUE)) / sd(data$col3, na.rm = TRUE)
data$z_col4 <- (data$col4 - mean(data$col4, na.rm = TRUE)) / sd(data$col4, na.rm = TRUE)
data$z_col5 <- (data$col5 - mean(data$col5, na.rm = TRUE)) / sd(data$col5, na.rm = TRUE) 
```

有什么方法，也许是使用`apply()`什么，我基本上可以做（python）：

```
for col in ['col1', 'col2', 'col3']:
    data{col} = ... z score code here 
```

谢谢R朋友。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T01:05:38.953

A`data.frame`是一个列表，因此您可以使用`lapply`. 不要`apply`在 a 上使用，`data.frame`因为这会强制到 a `matrix`。

```
lapply(data, function(x) (x - mean(x,na.rm = TRUE))/sd(x, na.rm = TRUE)) 
```

或者您可以使用`scale`which 在向量上执行此计算。

```
lapply(data, scale) 
```

* * *

您可以直接翻译`python`样式方法

```
for(col in names(data)){
   data[[col]] <- scale(data[[col]])
} 
```

请注意，这种方法在 R 中的内存效率不高，因为`[[<.data.frame`每次都复制整个 data.frame。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T20:54:48.377

我认为你是对的， apply() 可能是这里的方式。

例如：

```
data <- array(1:20, dim=c(4, 5))

data.zscores <- apply(data, 2, function(x)
    (x-mean(x, na.rm = TRUE))/sd(x, na.rm = TRUE)) 
```

函数 apply() 将矩阵或数组作为它的第一个参数。“2”指的是函数迭代的维度——在我们的例子中是列。如果我们想按行执行，我们会选择“1”。最后，我们有了要应用于每一列的函数。请参阅？申请以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-29T13:16:12.837

检查一下我遍历数据框以识别 NA 行

```
for(i in names(houseDF)){
  print(i)
  print(nrow(houseDF[is.na(houseDF[i]),]))
  print("---------------------")
} 
```

# assembly - 从 x86-64 打印浮点数似乎需要保存 %rbp

> ID：16097173
> 
> 赞同：9
> 
> 时间：2013-04-19T04:23:56.540
> 
> 标签：assembly, floating-point, x86-64

当我在 Ubuntu 上使用 gcc 4.6.1 编写一个与 C 库链接的简单汇编语言程序并尝试打印一个整数时，它工作正常：

```
 .global main
        .text
main:
        mov     $format, %rdi
        mov     $5, %rsi
        mov     $0, %rax
        call    printf
        ret
format:
        .asciz  "%10d\n" 
```

正如预期的那样，这将打印 5。

但是现在如果我做一个小改动，并尝试打印一个浮点值：

```
 .global main
        .text
main:
        mov     $format, %rdi
        movsd   x, %xmm0
        mov     $1, %rax
        call    printf
        ret
format:
        .asciz  "%10.4f\n"
x:
        .double 15.5 
```

这个程序段错误*而不打印任何东西*。只是一个可悲的段错误。

但我可以通过 push 和 pop 来解决这个问题`%rbp`。

```
 .global main
        .text
main:
        push    %rbp
        mov     $format, %rdi
        movsd   x, %xmm0
        mov     $1, %rax
        call    printf
        pop     %rbp
        ret
format:
        .asciz  "%10.4f\n"
x:
        .double 15.5 
```

现在它可以工作了，并打印 15.5000。

我的问题是：为什么推送和弹出`%rbp`使应用程序工作？根据 ABI，`%rbp`是被调用者*必须*保留的寄存器之一，因此`printf`不能搞砸。事实上，`printf`在第一个程序中工作，当只有一个整数被传递给`printf`. 那么问题一定出在其他地方吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T04:40:19.883

我怀疑这个问题与 没有任何关系`%rbp`，而是与堆栈对齐有关。引用 ABI：

> ABI 要求堆栈帧在 16 字节边界上对齐。具体来说，参数区域的结尾 (%rbp+16) 必须是 16 的倍数。此要求意味着帧大小应填充为 16 字节的倍数。

输入时堆栈对齐`main()`。调用`printf()`将返回地址压入堆栈，将堆栈指针移动 8 个字节。您可以通过将另外 8 个字节压入堆栈来恢复对齐（这恰好是`%rbp`但也可以很容易地成为其他东西）。

这是`gcc`生成的代码（也在[Godbolt 编译器资源管理器上](https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:'%23include+%3Cstdio.h%3E%0Aint+main(void)+%7B%0A++++printf(%22%2510.4f%5Cn%22,+1.234)%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g464,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'1',trim:'1'),lang:c%2B%2B,libs:!(),options:'-xc+-std%3Dgnu99+-Wall+-O3',source:1),l:'5',n:'0',o:'x86-64+gcc+4.6.4+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4)）：

```
.LC1:
        .ascii "%10.4f\12\0"
main:
        leaq    .LC1(%rip), %rdi   # format string address
        subq    $8, %rsp           ### align the stack by 16 before a CALL
        movl    $1, %eax           ### 1 FP arg being passed in a register to a variadic function
        movsd   .LC0(%rip), %xmm0  # load the double itself
        call    printf
        xorl    %eax, %eax         # return 0 from main
        addq    $8, %rsp
        ret 
```

如您所见，它通过从`%rsp`开头减去 8 并在末尾添加回来来处理对齐要求。

您可以改为对您喜欢的任何寄存器进行虚拟推送/弹出，而不是`%rsp`直接操作；[一些编译器确实使用虚拟推送来对齐堆栈](https://stackoverflow.com/questions/37773787/why-does-this-function-push-rax-to-the-stack-as-the-first-operation)，因为[这实际上](https://stackoverflow.com/questions/36631576/what-is-the-stack-engine-in-the-sandybridge-microarchitecture)在现代 CPU 上更便宜，并且节省了代码大小。

# java - 在Java中转换为pdf期间没有此类方法错误

> ID：16097175
> 
> 赞同：0
> 
> 时间：2013-04-19T04:23:58.197
> 
> 标签：java, pdf, apache-fop

在 java 中将 xslt 转换为 pdf 时遇到问题，我遵循此链接中发布的相同过程

“ [Java 转换为 PDF](https://stackoverflow.com/questions/8049546/java-transformation-to-pdf) ”。

错误：

`

```
Caused by: java.lang.NoSuchMethodError: org.apache.xmlgraphics.java2d.GraphicContext.<init>(Lorg/apache/xmlgraphics/java2d/GraphicContext;)V
    at org.apache.fop.render.intermediate.IFGraphicContext.<init>(IFGraphicContext.java:50)
    at org.apache.fop.render.intermediate.IFGraphicContext.clone(IFGraphicContext.java:56)
    at org.apache.fop.render.intermediate.IFRenderer.saveGraphicsState(IFRenderer.java:632)
    at org.apache.fop.render.intermediate.IFRenderer.startViewport(IFRenderer.java:885)
    at org.apache.fop.render.intermediate.IFRenderer.startVParea(IFRenderer.java:878)
    at org.apache.fop.render.AbstractRenderer.renderRegionViewport(AbstractRenderer.java:289)
    at org.apache.fop.render.intermediate.IFRenderer.renderRegionViewport(IFRenderer.java:731)
    at org.apache.fop.render.AbstractRenderer.renderPageAreas(AbstractRenderer.java:249)
    at org.apache.fop.render.AbstractRenderer.renderPage(AbstractRenderer.java:230)
    at org.apache.fop.render.intermediate.IFRenderer.renderPage(IFRenderer.java:580)
    at org.apache.fop.area.RenderPagesModel.addPage(RenderPagesModel.java:114)
    at org.apache.fop.layoutmgr.AbstractPageSequenceLayoutManager.finishPage(AbstractPageSequenceLayoutManager.java:312)
    at org.apache.fop.layoutmgr.PageSequenceLayoutManager.finishPage(PageSequenceLayoutManager.java:167)
    at org.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:109)
    at org.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:238)
    at org.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:120)
    at org.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:349)
    at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:177)
    at net.sf.saxon.event.ContentHandlerProxy.endElement(ContentHandlerProxy.java:391)
    at net.sf.saxon.event.ProxyReceiver.endElement(ProxyReceiver.java:174)
    at net.sf.saxon.event.NamespaceReducer.endElement(NamespaceReducer.java:213)
    at net.sf.saxon.event.ComplexContentOutputter.endElement(ComplexContentOutputter.java:417)
    at net.sf.saxon.instruct.ElementCreator.processLeavingTail(ElementCreator.java:301)
    at net.sf.saxon.instruct.Block.processLeavingTail(Block.java:409)
    at net.sf.saxon.instruct.Instruction.process(Instruction.java:94)
    at net.sf.saxon.instruct.ElementCreator.processLeavingTail(ElementCreator.java:298)
    at net.sf.saxon.instruct.Template.applyLeavingTail(Template.java:175)
    at net.sf.saxon.instruct.ApplyTemplates.applyTemplates(ApplyTemplates.java:343)
    at net.sf.saxon.Controller.transformDocument(Controller.java:1736)
    at net.sf.saxon.Controller.transform(Controller.java:1560)
    at mypackage.v2.business.pdf.XMLtoPDF.convertXMLPDF(XMLtoPDF.java:103)
    ... 51 more
java.lang.ClassCastException: java.lang.NoSuchMethodError cannot be cast to java.lang.Exception 
```

` 请让我知道可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:30:48.540

如[文档中所述](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NoSuchMethodError.html)

> 如果应用程序尝试调用类的指定方法（静态或实例），并且该类不再具有该方法的定义，则抛出该异常。

这是如何发生的。想象一下，您构建了一些代码，该代码使用了一个名为`foo()`. 您编译了项目，然后决定升级库。为此，您可以用新的 jar 文件覆盖旧的 jar 文件。你**不需要**重新编译你的代码。

但是您不知道的是新库删除了该`foo()`方法。现在如果你运行你的代码，它会抛出这个异常，因为你的编译代码调用了这个方法并且它不再存在。

在您的特定情况下，这不一定是*您的*代码有问题。可能是您有一个使用另一个库的库并且问题就在那里（例如，库 X 使用库 Y 的版本 2，但您的类路径中只有库 Y 版本 1）。如果发生这种情况，您需要确保库使用的是他们期望的版本。

对于您的特定问题，您需要找到其中包含的 jar 的版本，`org.apache.xmlgraphics.java2d.GraphicContext`并且它需要有一个构造函数，该构造函数需要一个`org/apache/xmlgraphics/java2d/GraphicContext`......也许......列表。我忘了什么`(L...;)V`意思。

# php - 尝试使用面向对象的代码来显示数据库信息

> ID：16097176
> 
> 赞同：0
> 
> 时间：2013-04-19T04:24:06.647
> 
> 标签：php, mysqli

我正在尝试使用面向对象的代码在数据库中显示用户（管理），变量加载了正确的连接信息，我的数据库代码是

```
/* Code to Connect to the Database */
$mysqli = new mysqli($host, $username, $password);
if($mysqli->connect_errno){
    echo "Failed to connect to the Database: " . $mysql->connect_error;
} 
```

我用来显示用户的代码是

```
$query = ("SELECT m_username, m_email, m_fname, m_sname, m_mccode, m_mobile FROM management");

if ($result = $mysqli->query($query)) {

/* fetch associative array */
while ($row = $result->fetch_assoc()) {
printf ($row["m_username"], $row["m_email"], $row["m_fname"], $row["m_sname"],               $row["m_mccode"], $row["m_mobile"]);
}
/* Frees the result set */
$result->close();
/* Close the Connection */
$mysqli->close();
} 
```

当我转到包含此代码的页面时，我什么也没有显示，并且数据库中有用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:29:48.887

您尚未提供数据库名称，因此未选择数据库。改变`mysqli_connect()`论点：

```
$db = 'mydbname';

$mysqli = new mysqli($host, $username, $password, $db); 
```

*此外，您可以在测试*脚本时尝试添加 MySQL 调试消息：

```
if ($result = $mysqli->query($query)) {

    /* fetch associative array */
    while ($row = $result->fetch_assoc()) {
        printf ($row["m_username"], $row["m_email"], $row["m_fname"], $row["m_sname"], $row["m_mccode"], $row["m_mobile"]);
    }

    /* Frees the result set */
    $result->close();
} else {
    /* Show error message */
    echo $mysqli->error;
}

/* Close the Connection */
$mysqli->close(); 
```

# javascript - requestAnimationFrame - 浏览器支持问题

> ID：16097178
> 
> 赞同：2
> 
> 时间：2013-04-19T04:24:17.833
> 
> 标签：javascript, requestanimationframe

[http://jsfiddle.net/xwF6E/14/](http://jsfiddle.net/xwF6E/14/)

以上是我正在尝试创建的动画的 JSfiddle。它在 Chrome 中 100% 可以正常工作，但在其他浏览器中存在各种问题。

似乎在Firefox中它不会渲染动画。根据 Mozilla Dev Network docs @ [https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)，我相信我已经添加了跨浏览器支持，但也许我做错了什么。

在 IE（至少 8 + 10）中，它不会渲染动画，也不会渲染我的径向渐变（如果有人能提供帮助，这也是一个附带问题）。

IE 在这行代码上给了我一个 IndexSizeError 错误

```
var imageData = context.createImageData(context.canvas.width, context.canvas.height); 
```

但我不确定这具体意味着什么，而且我找不到太多关于该错误/该方法的信息。

任何人都可以启发我吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T02:34:56.497

我猜你现在已经弄清楚了，但是对于其他可能感兴趣的人来说，原因是这段代码试图获取窗口大小：

```
context.canvas.width = document.width;
context.canvas.height = document.height; 
```

你会想做更多这样的事情：

```
context.canvas.width = document.body.clientWidth;
context.canvas.height = document.body.clientHeight; 
```

虽然它实际上可能比这更复杂一些。有关查找窗口高度和宽度的更多信息，请参阅此内容：http: [//www.howtocreate.co.uk/tutorials/javascript/browserwindow](http://www.howtocreate.co.uk/tutorials/javascript/browserwindow)

这是修改后的小提琴：http: [//jsfiddle.net/shaunwest/MALN2/](http://jsfiddle.net/shaunwest/MALN2/)

# javascript - javascript中的开始和结束函数

> ID：16097179
> 
> 赞同：2
> 
> 时间：2013-04-19T04:24:20.693
> 
> 标签：javascript, jquery

我正在玩一个简短的小代码，看看我是否可以在用户按下鼠标时启动一个功能，然后在他们抬起鼠标时结束它。对于这个例子，我试图增加我在屏幕上显示的数字，因为用户在按住按钮的同时移动鼠标。我希望它在释放按钮后冻结并停止，但是即使没有按下按钮，计数器也会重置并且计数从 0 继续...

```
function dragInit(state, e) {
    var i = 0;
    $(document).on("mousemove", function() {
        if (state) {
            i+=1;
            $('#debug').text(i); //Show the value in a div
        }
    });
}

$(document).ready(function() {

$(document).on(
    {mousedown: function(e) {
        var state = true;
        dragInit(e, state);
    },
    mouseup: function(e) {
        var state = false;
        dragInit(e, state);
    }
    });
}); 
```

顺便说一句，有没有办法可以在屏幕上显示变量是真还是假？当我尝试时，它只会说 [object Object]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:38:54.330

您的代码中有很多错误。我建议您在开始使用 jQuery 之前阅读更多基本概念。

传递给的参数顺序在事件绑定和事件绑定`dragInit()`上都是错误的。`mouseup``mousedown`

您的计数器重新启动的原因是因为您的变量`i`是本地变量，因此它仅在声明它的函数上下文期间存在。

您对状态变量犯了同样的错误，但在这种情况下，完全没有必要声明它。

考虑将您的计数器设为全局（即使这不是一个好习惯）。

我无法为您提供代码，因为我正在通过手机接听电话。一个解决方案是创建一个`mousemove`事件，在增加计数器之前检查鼠标按钮是否被按下。

希望我有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T04:32:20.973

你可以这样做：

```
function dragInit() {
    $(document).on("mousemove", function () {
        if (eventState.state) {
            eventState.count += 1;
            $('#debug').text(eventState.count); //Show the value in a div
        }
    });
}

// Create an object to track event variables
var eventState = {
    count:0, //replaces your previous 'i' variable
    state: false //keeps track of mouseup or mousedown
};

$(document).ready(function () {

    $(document).on({
        mousedown: function (e) {
            eventState.state = true;
            dragInit(); //don't need to pass anything anymore
        },
        mouseup: function (e) {
            eventState.state = false;
            dragInit(); //don't need to pass anything anymore
        }
    });
}); 
```

[jsFiddle](http://jsfiddle.net/mmADP/)

### 或者将所有东西放在一起作为一个对象

```
var dragInit = function () {
    var count = 0;
    var state = false;
    var action = function () {
        $(document).on("mousemove", function () {
            if (state) {
                count += 1;
                $('#debug').text(count); //Show the value in a div
            }
        })
    };

    $(document).on({
        mousedown: function (e) {
            state = true;
            action(); //don't need to pass anything anymore
        },
        mouseup: function (e) {
            state = false;
            action(); //don't need to pass anything anymore
        }
    });
}

$(document).ready(function () {
    var obj = new dragInit();
}); 
```

[jsFiddle 2](http://jsfiddle.net/mmADP/1/)

### 回应评论的例子

[jsFiddle](http://jsfiddle.net/xpfwW/)：这说明了为什么以下代码片段在执行上有所不同。

```
// Works
$(document).on("mousemove", function () {
    if (state) {

    }
})

// Doesn't
if (state) {
    $(document).on("mousemove", function () {

    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T04:38:21.033

更少的代码，你只需要这个。

使用 jquery on 和[Off](http://api.jquery.com/off/)打开和关闭 mousemove 事件。

### 计数器重置[http://jsfiddle.net/kRtEk/](http://jsfiddle.net/kRtEk/)

```
$(document).ready(function () {
    var i = 0;
    $(document).on({
        mousedown: function (e) {

            $(document).on("mousemove", function () {

                $('#debug').text(i++); //Show the value in a div
            });

        },
        mouseup: function (e) {
            i = 0;
            $('#debug').text(i);
            $(document).off("mousemove");
        }
    });
}); 
```

### 无重置[http://jsfiddle.net/gumwj/](http://jsfiddle.net/gumwj/)

```
$(document).ready(function () {
    var i = 0;
    $(document).on({
        mousedown: function (e) {
             $(document).on("mousemove", function () {
                 $('#debug').text(i++); //Show the value in a div
            });

        },
        mouseup: function (e) {
            $(document).off("mousemove");
        }
    });
}); 
```

### WithNoCounter [http://jsfiddle.net/F3ESx/](http://jsfiddle.net/F3ESx/)

```
$(document).ready(function () {

    $(document).on({
        mousedown: function (e) {
             $(document).on("mousemove", function () {
              $('#debug').data('idx',parseInt($('#debug').data('idx')|0)+1).text($('#debug').data('idx')); //Show the value in a div
            });

        },
        mouseup: function (e) {
            $(document).off("mousemove");
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T04:29:02.490

假设您已与 Jquery 结婚（这没有错） - 检查并考虑完全重新考虑您利用“.one()”（[http://api.jquery.com/one/](http://api.jquery.com/one/)）方法的方法。

编辑：如果这种味道不适合 - 熟悉“延迟”对象（[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)）

有很多方法可以通过 jquery 来解决这个问题——你最终决定什么取决于你真正打算用这个做什么。

# c# - 如何从 json URL 中获取数据并放置在表单上？

> ID：16097184
> 
> 赞同：1
> 
> 时间：2013-04-19T04:25:19.770
> 
> 标签：c#, json, winforms, system.net

以下 URL 代表一长串数据：[http ://api.bitcoincharts.com/v1/markets.json](http://api.bitcoincharts.com/v1/markets.json)

我注意到在 url 的末尾它是一个 .json 扩展名，所以我已经对此进行了研究。

我已经下载了 JSON.NET 并在我的 c#.net 源代码中引用了它。

在这个长字符串中，我需要从“符号”中获取以下数据：“mtgoxUSD”并将其放在我的表单上；

1）“出价” 2）“高” 3）“要价” 4）“平均” 5）“低”

我真的很困惑如何正确提取这些数据，因为 URL 是一个巨大的字符串。

下面的代码片段是我目前所编写的代码，因为我不知道如何继续。

```
public void Grab()
    {
        using (var tradeClient = new System.Net.WebClient())
        {
            var json = tradeClient.DownloadString("http://api.bitcoincharts.com/v1/markets.json");
        }
    } 
```

请指导我或参考我如何开始，因为我以前从未处理过 json 扩展名或文件！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:29:02.870

您可以使用`JArray array = (JArray) JsonConvert.DeserializeObject(json);`Newtonsoft.Json.Linq 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:34:24.890

尝试这个：

```
using (WebClient wc = new WebClient())
{
    var json = wc.DownloadString("http://coderwall.com/mdeiters.json");
    var arrJson = JsonConvert.DeserializeObject<string[][]>(json);
} 
```

或者您可以创建一个对象/类并将此 json 转换为该对象。请参阅此[链接](https://stackoverflow.com/a/11127428/1129189)以供参考。请参阅下面的示例代码和类：

```
using (WebClient wc = new WebClient())
{
    var json = wc.DownloadString("http://coderwall.com/mdeiters.json");
    var jsonMarket = JsonConvert.DeserializeObject<Market>(json);
}

public class Market
{
    [JsonProperty("high")]
    public string High{ get; set; }

    [JsonProperty("latest_trade")]
    public string LatestTrade { get; set; }

    [JsonProperty("bid")]
    public string Bid{ get; set; }

    [JsonProperty("volume")]
    public string Volume{ get; set; }

    [JsonProperty("currency")]
    public string Currency{ get; set; }

    [JsonProperty("currency_volume")]
    public string CurrencyVolume{ get; set; }

    [JsonProperty("ask")]
    public string Ask { get; set; }

    [JsonProperty("close")]
    public string Close { get; set; }

    [JsonProperty("avg")]
    public string AVG { get; set; }

    [JsonProperty("symbol")]
    public string Symbol { get; set; }

    [JsonProperty("low")]
    public string Low { get; set; }
} 
```

# python - Python 日期时间格式为“1/1/1990”

> ID：16097185
> 
> 赞同：0
> 
> 时间：2013-04-19T04:25:21.647
> 
> 标签：python, datetime

在 python 中，我如何将日期格式化为 1990 年 1 月 1 日？

> dayToday = datetime.date(1990,1,1) 打印 dayToday

这将返回 1990-01-01，但我希望它看起来像 1/1/1990。（1990 年 1 月 1 日）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:28:04.490

尝试查看 python [datetime.strftime](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)

```
dayToday = datetime.date(1990,1,1) 
print dayToday.strftime('%Y/%m/%d')
>>> 1990/01/01
print dayToday.strftime('%Y/%b/%d')
>>> 1990/Jan/01 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:31:56.370

其他人已经展示了如何获取输出`1990/01/01`，但假设您不希望在其中使用前导零，我所知道的唯一方法是自己进行字符串格式化：

```
>>> '{dt.year}/{dt.month}/{dt.day}'.format(dt = dt.datetime.now())
'2013/4/19' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T04:32:19.223

使用正确的格式**和**不带前导的`0`：

```
>>> import datetime
>>> now = datetime.datetime.now()
>>> now.strftime("%-m/%-d/%Y")
'4/19/2013' 
```

据报道[仅适用于 Linux](https://stackoverflow.com/questions/904928/python-strftime-date-without-leading-0)，但我没有亲自测试过其他任何东西。在 Linux x64 上测试和
工作。`2.7.3``3.2.3`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T04:28:20.887

使用[`datetime.strftime`](http://docs.python.org/2/library/datetime.html#datetime.datetime.strftime)具有适当[格式字符串](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)的函数：

```
>>> now = datetime.datetime.now()
>>> print now.strftime('%Y/%m/%d')
2013/04/19 
```

# ios - 适用于 iOS 的 Google Drive Realtime API

> ID：16097187
> 
> 赞同：7
> 
> 时间：2013-04-19T04:25:29.930
> 
> 标签：ios, objective-c, google-drive-api, google-drive-realtime-api

我想使用 Google Drive 和新的实时 API 在我的 iOS 应用程序中实现实时协作。我知道我可以在 Objective-C 中设置 web 视图并在 web 视图和我的本机应用程序之间设置双向通信，因此使用 javascript 库，但我担心这对于大容量来说效率低下的数据流量。我希望可能会有一个本地解决方案即将出现。关于 Objective-C 的 Google API 客户端库是否会更新以包含 Google Drive Realtime API 的任何消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:49:20.267

我不知道谷歌实时 api，但对于谷歌驱动器集成，[这](https://developers.google.com/drive/quickstart-ios)会起作用。[这里](https://github.com/googledrive/dredit)有一个名为 Dr.Edit 的示例应用程序。

不建议使用 UIWebView 来做所有这些事情。

# artificial-intelligence - Quinlan的C4.5算法中如何计算数值属性的阈值？

> ID：16097189
> 
> 赞同：5
> 
> 时间：2013-04-19T04:25:37.190
> 
> 标签：artificial-intelligence, weka, decision-tree

我试图找出 C4.5 算法如何确定数字属性的阈值。我已经研究过并且无法理解，在大多数地方我都找到了这些信息：

> 训练样本首先根据所考虑的属性 Y 的值进行排序。这些值的数量是有限的，所以让我们按排序顺序将它们表示为 {v1,v2, ...,vm}。任何介于 vi 和 vi+1 之间的阈值都将具有相同的效果，将案例分为属性 Y 的值在 {v1, v2, ..., vi} 中的案例和属性 Y 的值在 {vi+1, vi} 中的案例+2，……，vm}。因此在 Y 上只有 m-1 个可能的分裂，所有这些都应该系统地检查以获得最佳分裂。
> 
> 通常选择每个区间的中点：(vi +vi+1)/2 作为代表阈值。C4.5 为每个区间 {vi, vi+1} 选择一个较小的值 vi 作为阈值，而不是中点本身。

我正在研究 Play/Dont Play（[值表](http://goo.gl/XDjzK)）的示例，但不明白当状态晴天时如何获得属性湿度的数字 75（[树生成](http://goo.gl/7whlx)），因为晴天状态下的湿度值是 { 70,85,90,95}。

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:15:57.210

正如您生成的树图像所暗示的那样，您按顺序考虑属性。您的 75 示例属于 Outlook = Sunny 分支。如果根据 Outlook = Sunny 过滤数据，则会得到下表。

```
outlook temperature humidity    windy   play
sunny   69           70         FALSE   yes
sunny   75           70         TRUE    yes
sunny   85           85         FALSE   no
sunny   80           90         TRUE    no
sunny   72           95         FALSE   no 
```

如您所见，在这种情况下，湿度阈值为“< 75”。

j4.8 是[ID3 算法](http://en.wikipedia.org/wiki/ID3_algorithm)的继承者。它使用信息增益和熵来决定最佳分割。根据维基百科

```
The attribute with the smallest entropy 
is used to split the set on this iteration. 
The higher the entropy, 
the higher the potential to improve the classification here. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-25T04:47:48.417

我不完全确定 J48，但假设它基于 C4.5，它将计算所有可能拆分的增益（即，基于功能的可能值）。对于每个拆分，它计算信息增益并选择具有最多信息增益的拆分。在 {70,85,90,95} 的情况下，它将计算 {70|85,90,95} vs {70,85|90,95} vs {70,85,90|95} 的信息增益和选择最好的。

Quinlan 关于 C4.5 的书是一个很好的起点（[https://goo.gl/J2SsPf](https://goo.gl/J2SsPf)）。具体参见第 25 页。

# ios - 自定义字体作为缺少字形的后备字体

> ID：16097197
> 
> 赞同：4
> 
> 时间：2013-04-19T04:26:38.487
> 
> 标签：ios, uikit, uifont, ctfont

我目前正在开发一个显示一些时髦字符的应用程序。它们是正确的 unicode 字符 iOS 上没有包含这些字形的系统字体，所以我制作了一个只包含这些字形的自定义字体。

现在，**我不想**用我的自定义字体替换系统字体，但我想让 iOS 从我的自定义字体中加载任何丢失的字形。iOS 可以回退到自定义字体吗？

![在此处输入图像描述](https://i.stack.imgur.com/BNaVU.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T10:04:30.973

希望您现在已经收到回复，但是使用自定义字体可能的唯一方法是通过用您的 U+2615（热饮）等字符替换非字母字符来自定义“普通”字体非字母字符自定义字形。因此，您可以为所有 UI 使用自定义字体，但您需要与现在使用不同的字符来显示自定义字形

# iphone - 点击 UITabbar 按钮上的手势

> ID：16097199
> 
> 赞同：1
> 
> 时间：2013-04-19T04:27:08.420
> 
> 标签：iphone, ios, uitabbarcontroller, uigesturerecognizer, uitapgesturerecognizer

我用标签栏控制器创建了一个项目。我的标签上有 5 个按钮，现在我想在我的第一个标签上做双击手势识别器

我已经实现了在标签栏上做手势，但是当我双击标签栏上的任何按钮时，该方法被调用。如何使其仅适用于单个 tabbarbutton ？

```
 -(void)createTab{

     Array = [[NSMutableArray alloc] initWithCapacity:5];

    myhomeVC = [[MyHomeViewController alloc] initWithNibName:@"MyHomeViewController" bundle:nil];
 homeNavBar=[[UINavigationController alloc]initWithRootViewController:myhomeVC];

     groupVC = [[GroupSearchViewController alloc] initWithNibName:@"GroupSearchViewController" bundle:nil];
    groupNavBar=[[UINavigationController alloc]initWithRootViewController:groupVC];

    uploadVC = [[UploadFoodImageViewController alloc] initWithNibName:@"UploadFoodImageViewController" bundle:nil];
    uploadNavBar=[[UINavigationController alloc]initWithRootViewController:uploadVC];

    searchVC = [[SearchViewController alloc] initWithNibName:@"SearchViewController" bundle:nil];
    searchNavBar=[[UINavigationController alloc]initWithRootViewController:searchVC];

    nearbyVC = [[NearByViewController alloc] initWithNibName:@"NearByViewController" bundle:nil];
    nearbyNavBar=[[UINavigationController alloc]initWithRootViewController:nearbyVC];

    [Array addObject:homeNavBar];
    [Array addObject:groupNavBar];
    [Array addObject:uploadNavBar];
    [Array addObject:searchNavBar];
    [Array addObject:nearbyNavBar];

    appDelegate.tabBarController.viewControllers =Array;

     UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    [doubleTap setNumberOfTapsRequired:2];
    [appDelegate.tabBarController.view addGestureRecognizer:doubleTap];

}

 -(void)handleDoubleTap:(UIGestureRecognizer *)gestureRecognizer {
    NSLog(@"Tab tpped");
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-18T07:56:00.097

我有一个技巧可以做到这一点。你也试试，也许有用。我仍在努力。

转到`shouldSelectViewController`委托方法。每次点击项目时都会触发此方法。所有这些 switch 语句的情况都是应用程序的不同选项卡单击。

```
-(BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    DBGS;
    switch (viewController.tabBarItem.tag)
    {
        case 0:
        {
            _tapCounter++; // Here I am increasing a NSInteger count to check how many times it increaed
            if(_tapCounter == 2) // it is tapped twice, so select this case
            {
                DBG(@"Double Tap done");
                [[(AppDelegate *)[[UIApplication sharedApplication] delegate] fvc] getFeeds]; // write your code that you want on double tap
                _tapCounter = 0; // making it zero again
            }
            [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(tapZero) userInfo:self repeats:NO]; // this timer waits for 1 sec (bacause 1 sec is long and double tap should be in few miliseconds), then again makes _tapCounter to zero.
        }
            break;
        case 1:
        {

        }
            break;
        case 2:
        {

        }
            break;
        case 3:
        {

        }
        case 4:
        {

        }
            break;
        default:
            break;
    }
    return YES;
}

- (void)tapZero
{
    _tapCounter = 0; // _tapCounter is zero here
} 
```

# asp.net - 仅触发 UpdatePanel 中的多个 UpdateProgress 之一

> ID：16097200
> 
> 赞同：0
> 
> 时间：2013-04-19T04:27:33.980
> 
> 标签：asp.net, vb.net, performance, updatepanel, updateprogress

我有一个带有asp:UpdatePanel 的页面内容区域，里面是一个gridview。在该gridview 中，每一行都有一个按钮和一个UpdateProgress，该UpdateProgress 链接到页面内容区域的UpdatePanel。

它按预期工作，如果您单击任何按钮，所有 UpdateProgress 都会触发，因为它们都链接到同一个 UpdatePanel，但是我只想触发按钮旁边的那个。

例子：

```
<asp:UpdatePanel ID="upnlContent" runat="server" UpdateMode="Conditional"> 
```

然后每个gridview行都有一个：

```
<asp:UpdateProgress ID="uprogrow" runat="server" AssociatedUpdatePanelID="unplContent" 
     DisplayAfter="0"> 
```

# java - 警告：不支持请求方法“GET”

> ID：16097202
> 
> 赞同：3
> 
> 时间：2013-04-19T04:27:36.840
> 
> 标签：java, javascript, spring, jsp

在我的 Spring Application 中，我正在这样做..

我的 Jsp 表单点击超链接表单将被发送..

```
<form:form action="user" modelAttribute="NAME">

   <a href="href_form1" onclick="onClick_Save()" class="save">Save</a>

</fomr:form>
<script>
  function onClick_Save() {
    $("#NAME").attr("action", $('.save').attr("href"));
    $("#NAME").submit();
     });
</script> 
```

在我的 Controller 类中，我编写了方法。

```
@RequestMapping(value = "href_form1", method = RequestMethod.POST)
public @ResponseBody String href_form1(UserForm userForm,Model model)throws Exception {
    //Database code here.       
    model.addAttribute("NAME", userForm);
    return "User Updated";
} 
```

**编辑1：**

```
WARNING: Request method 'GET' not supported 
```

我收到错误页面。

```
HTTP Status 405 - Request method 'GET' not supported 
```

**编辑：**修改如下代码后

```
 <script>
  $(function() {
   $('.save').on("click",function(e) {
     e.preventDefault();
     $("#NAME").attr("action", $(this).attr("href")).attr("method","POST");
     $("#NAME").submit();
   });
  });
</script> 
```

但是我的表单不会到达我的控制器方法。

我的代码有什么问题吗？我也尝试`method="POST"`过使用表单标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:32:08.877

这是您收到错误的原因

链接的 href 在单击时调用控制器，因为您没有取消链接的默认操作

所以代码执行以下操作

1.  尝试将表单的操作设置为链接的 href
2.  尝试使用 POST 提交所述表单 - 这就是我理解您想要实现的目标。
3.  无论这是否成功，浏览器都会立即跟随链接的 href，它将尝试使用 GET 调用控制器，因为如果 onclick 没有停止该操作，则链接将执行此操作。即使代码成功发布表单，该请求也会被最终执行 GET 的新请求杀死

在我看来，你有以下几种可能性——其中一些被认为是比其他更好的做法。

**非javascript**

1.  有一个参数来标识您要保存的内容 - 以及每个参数的表单
2.  将您的 spring 方法更改为
    `method = { RequestMethod.GET, RequestMethod.POST}`or
    `method = RequestMethod.GET`- GET 将允许您摆脱表单并仅具有以下链接（当然在更新 spring 代码之后）

```
 <a href="href_link?user=user1">Save User1</a> 
```

如果你愿意

**JavaScript 辅助**

在表单中有一个参数，用于保存您要保存的标识，通过 JavaScript 设置 THAT 并执行**MANDATORY** `return false`或`preventDefault` 取消链接：

```
<!-- this is an example of the rendered form -->
<form action="href_form1" id="NAME" method="POST">
  <input type="hidden" name="saveItem" id="saveItem" value="" />
</form>  

<a href="#" class="saveLink" data-save="save item 1">Save item 1</a>
<a href="#" class="saveLink" data-save="save item 2">Save item 2</a>
<a href="#" class="saveLink" data-save="save item 3">Save item 3</a> 
```

请注意，我在 href 中没有链接以避免请求某些内容

与此过程一起使用的 jQuery：

```
$(function() {
  // assuming form ID="NAME"
  $(".saveLink").on("click",function(e) { 
     e.preventDefault(); // do not follow link
     $("#saveItem").val($(this).data("save")); // set the hidden field
     $("#NAME").submit();
  });
}); 
```

* * *

假设您的弹簧控制器已连接以处理您的请求，这可能是一种更有趣的方式：

[演示](http://jsfiddle.net/mplungjan/ptDXy/)

```
 $(function() {
   $('.save').on("click",function(e) { // passing event
     e.preventDefault(); // jQuery will normalise it for all modern browsers
     // post the href of the link to the server and return the result in a 
     // container with ID result
     $.post($(this).attr("href"), function(data) { // or $.get if you want
       $('#result').html(data);
     });
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T19:53:18.173

请尝试这样的事情

```
<form:form action="href_form1" modelAttribute="NAME" method="POST">
  <input type="submit"/>
</form:form>

@RequestMapping(value = "href_form1", method = RequestMethod.POST)
public @ResponseBody String href_form1(UserForm userForm,Model model)throws Exception {
    //Database code here.       
    model.addAttribute("NAME", userForm);
    return "User Updated";
} 
```

基本上是一个非常简单的表单提交。一旦你得到这个工作，你就知道你的表单和控制器已经正确设置了。在此之后，如果您想使用锚标记提交表单，请返回之前的建议，`preventDefault`然后提交表单。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T04:34:11.577

您需要`method`在`form`标签中指定。是的，您的超链接忽略了表单。因此`action`，将表单上的属性设置为`href_form1`并将您的超链接更改为提交输入，或者（我真的不推荐这样做）更改您的超链接以进行 JavaScript 提交。目前，您已经在链接中进行了设置`onclick` *。* `href`下面是最佳实践。

```
<form:form action="href_form1" modelAttribute="NAME" method="POST">
    <input type="submit" value="Save" /> 
```

此外，您的 jQuery 选择器`$("#NAME")`没有找到任何东西，因为您没有`id`在要获取的表单上设置属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T04:32:18.457

表单提交的默认 http 方法是 GET。既然你想要 POST 请指定它，它会起作用`method="POST"`

此外，我在代码中看不到正确的 url 映射。你能否确认它是否正确。

# c++ - 从终端访问数据

> ID：16097213
> 
> 赞同：0
> 
> 时间：2013-04-19T04:29:06.813
> 
> 标签：c++, bash, unix, terminal, gnome-terminal

我必须编写一个程序来拦截来自终端的数据，并且我必须解析它。在处理完数据后，我必须在它进入标准输出之前对其进行解析。

我不能使用`tee`或像`prog > file 2>&1`程序将是交互式的命令。

例如：如果用户`ls`在终端中输入我必须解析它，那么它应该进入操作系统，然后当我得到处理后的结果时，我必须在它显示在终端之前再次解析它。

我做了我的研究，我认为我可以通过伪终端接口（ pty ）来实现它。

请让我知道是否有更好的方法来实现它。我正在使用`cpp`and`bash`平台是`*nix`.

更新：我也可以使用`libexpect`from `expect`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:46:57.953

我不确定你在这里是什么意思 - 你的意思是交互式程序“在另一个终端与用户通信”甚至显示 GUI？

它如何指定终端？这里的程序布局可能很重要（哪个程序启动哪个）。

如果您的应用程序使用 GUI 与用户通信，那么我会简单地这样做：启动 bash，将 sdtin 和 stdout 附加到管道，您的程序读取和写入这些管道的末端，解析数据，并在其上读取/写入自己的标准输入和标准输出 - 所以它出现在它的终端上。

如果您的意思是控制与您的应用程序不同的终端，那么它会得到解决，因为系统通常不期望程序在多个终端上运行。我认为不可能过滤终端和附加到它的已经工作的应用程序之间的通信。启动另一个进程产生另一个终端可能是一种选择 - 基本上让两个终端同步工作。但随后您将不得不通过其他方式（命名管道、网络连接或其他 IPC）同步这两个进程。

如果您提供有关您的程序的更多详细信息，我可能会提供更多有针对性的帮助。

PS不要告诉我你正在写一些终端键盘记录器'）

**编辑：**

您的程序可能是基于 GUI 的 - 我会推荐类似于 banuj 链接的答案。

最好的选择可能是创建三个管道，然后分叉，并在子进程中将管道的相应端分配给标准输入、标准输出和标准错误。然后子进程应该执行到 shell - 可能是 bash，尽管我不确定如果大声读出其他 shell 是否听起来更好；）主进程将能够读/写提到的管道的其他端，将输入和输出解析为 bash和它运行的程序。您也可以直接执行用户指定的命令，但这会迫使您接管 shell 的繁琐工作——管理当前目录、环境变量、作业控制等。

然而，使用上述方法可能会导致一些麻烦 - 一些程序（通常在与安全相关的上下文中 - 例如 su(do) 要求输入密码）无论如何都会尝试绕过 stdin/stdout 并直接从终端设备读取。我不确定在这种情况下你能做什么——编写你自己的终端仿真器是一种选择，但我不知道你是否想为此深入研究系统编程。

如果你想要一些代码片段，如果你不知道上面怎么做，请问;）

# wordpress - 通过子主题更改自定义帖子类型的标签

> ID：16097216
> 
> 赞同：1
> 
> 时间：2013-04-19T04:29:16.887
> 
> 标签：wordpress, wordpress-theming, custom-post-type

我有一个使用自定义帖子类型“投资组合”的父 wordpress 主题，但我想将其更改为“属性”。我希望将所有上下文元素更改为显示“属性”，例如“显示属性”、“添加新属性”、“删除属性”等。我知道我可以通过更新父主题来做到这一点，但是如果可以避免的话，我宁愿不这样做。

我找到了这个帖子：[https ://wordpress.stackexchange.com/questions/19240/can-i-change-a-custom-post-type-label-from-a-child-theme](https://wordpress.stackexchange.com/questions/19240/can-i-change-a-custom-post-type-label-from-a-child-theme)

不幸的是，我对 PHP 不够了解，无法编写自己的函数并更改它。有人可以帮我解决这个问题吗？我有点卡住了。

我觉得这对于 php 开发人员来说很简单。我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:11:27.893

要重命名帖子类型标签，我们需要操作全局`$wp_post_types`. 请注意，帖子类型是`portfolio`并且标签只是虚拟文本。

```
add_action( 'init', 'object_label_so_16097216', 0 );

function object_label_so_16097216()
{
    global $wp_post_types;
    $labels = &$wp_post_types['portfolio']->labels; // <-- adjust CPT

    $labels->name = 'name'; // <-- adjust from here on
    $labels->singular_name = 'singular_name';
    $labels->add_new      = 'add_new';
    $labels->add_new_item = 'add_new';
    $labels->edit_item = 'edit_item';
    $labels->new_item = 'name';
    $labels->view_item = 'view_item';
    $labels->search_items = 'search_items';
    $labels->not_found = 'not_found';
    $labels->not_found_in_trash = 'not_found_in_trash';
} 
```

之后，我们仍然需要更改菜单项标签。在这里，我使用了一个辅助函数来获取 CPT 菜单项的确切位置。标签又是虚拟文本。

```
add_action( 'admin_menu', 'menu_label_so_16097216' , 0 );

function menu_label_so_16097216()
{
    global $menu, $submenu;

    $cpt_link = 'edit.php?post_type=portfolio'; // <-- adjust CPT
    $position = b5f_recursive_array_search( $cpt_link, $menu );

    $menu[$position][0] = 'name'; // <-- adjust from here on
    $submenu[$cpt_link][5][0] = 'name';
    $submenu[$cpt_link][10][0] = 'add_new';       
}

function b5f_recursive_array_search( $needle, $haystack ) 
{
    foreach( $haystack as $key => $value ) 
    {
        $current_key = $key;
        if( 
            $needle === $value 
            OR ( 
                is_array( $value )
                && b5f_recursive_array_search( $needle, $value ) !== false 
            )
        ) 
        {
            return $current_key;
        }
    }
    return false;
} 
```

只需将所有这些代码放在孩子的`functions.php`中，调整 CPT 和标签，就可以了。

*基于[此 WordPress 答案](https://wordpress.stackexchange.com/a/66520/12615)。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T15:36:36.993

在回复 Jeremy Miller 的回答时，您不必循环通过管理菜单来更改标签。标签的完整列表实际上是：

```
'name'
'singular_name'
'menu_name'
'name_admin_bar'
'all_items'
'add_new'
'add_new_item'
'edit_item'
'new_item'
'view_item'
'search_items'
'not_found'
'not_found_in_trash'
'parent_item_colon' 
```

看看[https://codex.wordpress.org/Function_Reference/register_post_type#Arguments](https://codex.wordpress.org/Function_Reference/register_post_type#Arguments)

由于您可以指定“menu_name”，因此在 Jeremy 指定的菜单项中添加额外的钩子和循环是没有用的。

# python - 用于写入文件的 UnicodeDecodeError

> ID：16097217
> 
> 赞同：2
> 
> 时间：2013-04-19T04:29:28.133
> 
> 标签：python, networkx, gml

我知道这是一个非常常见的错误，但这是我在尝试写入文件时第一次遇到它。

我正在使用`networkx`图形进行网络分析，当我尝试写入任何格式时：

```
nx.write_gml(G, "Graph.gml")
nx.write_pajek(G, "Graph.net")
nx.write_gexf(G, "graph.gexf") 
```

我得到：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 2, in write_pajek
  File "/Library/Python/2.7/site-packages/networkx/utils/decorators.py", line 263, in _open_file
    result = func(*new_args, **kwargs)
  File "/Library/Python/2.7/site-packages/networkx/readwrite/pajek.py", line 100, in write_pajek
    path.write(line.encode(encoding))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 19: ordinal not in range(128) 
```

我还没有找到这方面的文档，所以很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:17:09.047

想知道您是否可以使用**编解码器**模块来解决它。在馈送到 networkx 之前，只需按如下方式通过**编解码器**创建一个文件对象。

前任，

```
import codecs
f = codecs.open("graph.gml", "w", "utf-8") 
```

# android - Android - 应用程序意外崩溃

> ID：16097224
> 
> 赞同：0
> 
> 时间：2013-04-19T04:30:26.223
> 
> 标签：android, xml, class, manifest

所以我的问题是我的应用程序中有两个功能。第一个是列表视图，它生成鸡尾酒列表并允许您从列表中选择一个。这是我的程序意外崩溃的地方。随机函数完美运行。谁能解释为什么我的应用程序没有加载列表视图？鸡尾酒菜单类

```
package com.drunktxtapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.app.ListActivity;

public class CocktailMenu extends Activity {

    String classes[] = {"Bloody_Mary", "Capirinha", "Cosmopolitan", "Cuba_Libre", "Daiquiri", "Mai_Tai", "Manhattan", "Margarita", "Martini", "Mint_Julep", "Mojito", "Old_Fashoned", "Pina_Colada", "Screwdriver", "Singapore_Sling", "Tom_Collins", "Whiskey_Sour", "White_Russian"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cocktail_menu);
        Button b1 = (Button) findViewById(R.id.bByList);
        Button b2 = (Button) findViewById(R.id.bRandomCocktail);

        b1.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                Intent ourIntent = new Intent(CocktailMenu.this, Menu.class);
                ourIntent.putExtra("cocktail_name", classes);
                startActivity(ourIntent);
                }
            }
        );
        b2.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                int random = (int) (Math.random() * classes.length);
                Intent i = new Intent(CocktailMenu.this, CocktailDetail.class);
                i.putExtra("cocktail_name", classes[random]);
                startActivity(i);
            }
        }
            );
    }
} 
```

菜单类

```
package com.drunktxtapp;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Menu extends ListActivity {

    String classes[] = { "Bloody_Mary", "Capirinha", "Cosmopolitan",
            "Cuba_Libre", "Daiquiri", "Mai_Tai", "Manhattan", "Margarita",
            "Martini", "Mint_Julep", "Mojito", "Old_Fashoned", "Pina_Colada",
            "Screwdriver", "Singapore_Sling", "Tom_Collins", "Whiskey_Sour",
            "White_Russian" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Menu.this,
                android.R.layout.simple_list_item_1, classes));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        ;
        Intent ourIntent = new Intent(Menu.this, CocktailDetail.class);
        ourIntent.putExtra("cocktail_name",classes);
        startActivity(ourIntent);

    };
} 
```

鸡尾酒细节课

```
package com.drunktxtapp;

import android.net.Uri;
import android.os.Bundle;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.ImageView;
import android.view.View.OnClickListener;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.widget.TextView;
import android.view.View;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

    public class CocktailDetail extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.cocktaildetail);
            Button b1 = (Button) findViewById(R.id.buttonYoutube);
            String cocktailName = getIntent().getStringExtra("cocktail_name");
            TextView t1 = (TextView)findViewById(R.id.textCocktailName);
            t1.setText(cocktailName);
            ImageView imageView1 = (ImageView)findViewById(R.id.imageCocktail);
            //imageView1.setImageResource(R.drawable.cocktailName);
            b1.setOnClickListener(new Button.OnClickListener() {

                public void onClick(View v) {
                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=Alt-ehDc3fc")));
                    }
            });
        }
    } 
```

鸡尾酒菜单 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/beer"
    android:orientation="vertical" >

    <Button
        android:id="@+id/bByList"
        android:layout_width="250dp"
        android:layout_height="125dp"
        android:layout_gravity="center"
        android:layout_marginBottom="100dp"
        android:layout_marginTop="25dp"
        android:padding="25dp"
        android:text="Cocktail List"
        android:textSize="20dp" />

    <Button
        android:id="@+id/bRandomCocktail"
        android:layout_width="250dp"
        android:layout_height="125dp"
        android:layout_gravity="center"
        android:layout_marginTop="25dp"
        android:padding="2dp"
        android:text="Random Cocktail"
        android:textSize="20dp" />

</LinearLayout> 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.drunktxtapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".CocktailMenu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.CocktailMenu" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Menu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Menu" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".CocktailDetail"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.CocktailDetail" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Capirinha"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Capirinha" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Cosmopolitan"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Cosmopolitan" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Cuba_Libre"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Cuba_Libre" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Daiquiri"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Daiquiri" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Mai_Tai"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Mai_Tai" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Manhattan"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Manhattan" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Margarita"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Margarita" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Martini"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Martini" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Mint_Julep"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Mint_Julep" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Mojito"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Mojito" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Old_Fashoned"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Old_Fashoned" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Pina_Colada"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Pina_Colada" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Screwdriver"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Screwdriver" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Singapore_Sling"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Singapore_Sling" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Tom_Collins"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Tom_Collins" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Whiskey_Sour"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.Whiskey_Sour" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".White_Russian"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.drunktxtapp.White_Russian" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

日志猫

```
04-19 05:28:41.374: D/dalvikvm(20672): GC_FOR_ALLOC freed 64K, 7% free 12379K/13191K, paused 18ms, total 18ms
04-19 05:28:41.374: I/dalvikvm-heap(20672): Grow heap (frag case) to 12.992MB for 358208-byte allocation
04-19 05:28:41.399: D/dalvikvm(20672): GC_FOR_ALLOC freed 1K, 7% free 12727K/13575K, paused 11ms, total 11ms
04-19 05:28:41.409: V/MediaPlayer-JNI(20672): native_setup
04-19 05:28:41.409: V/MediaPlayer(20672): constructor
04-19 05:28:41.409: V/MediaPlayer(20672): setListener
04-19 05:28:41.409: V/MediaPlayer-JNI(20672): setDataSourceFD: fd 44
04-19 05:28:41.409: V/MediaPlayer(20672): setDataSource(44, 18199, 64493)
04-19 05:28:41.474: V/MediaPlayer(20672): setVideoSurfaceTexture
04-19 05:28:41.474: V/MediaPlayer(20672): prepare
04-19 05:28:41.479: V/MediaPlayer(20672): message received msg=5, ext1=0, ext2=0
04-19 05:28:41.479: V/MediaPlayer(20672): New video size 0 x 0
04-19 05:28:41.479: V/MediaPlayer(20672): callback application
04-19 05:28:41.479: V/MediaPlayer(20672): back from callback
04-19 05:28:41.479: V/MediaPlayer(20672): message received msg=1, ext1=0, ext2=0
04-19 05:28:41.479: V/MediaPlayer(20672): prepared
04-19 05:28:41.479: V/MediaPlayer(20672): signal application thread
04-19 05:28:41.479: V/MediaPlayer(20672): callback application
04-19 05:28:41.479: V/MediaPlayer(20672): prepare complete - status=0
04-19 05:28:41.479: V/MediaPlayer-JNI(20672): start
04-19 05:28:41.479: V/MediaPlayer(20672): start
04-19 05:28:41.479: V/MediaPlayer(20672): back from callback
04-19 05:28:41.549: V/MediaPlayer-JNI(20672): release
04-19 05:28:41.549: V/MediaPlayer(20672): setListener
04-19 05:28:41.549: V/MediaPlayer(20672): disconnect
04-19 05:28:41.554: V/MediaPlayer(20672): destructor
04-19 05:28:41.554: V/MediaPlayer(20672): disconnect
04-19 05:28:41.559: W/MediaPlayer(20672): mediaplayer went away with unhandled events
04-19 05:28:41.559: W/MediaPlayer(20672): mediaplayer went away with unhandled events
04-19 05:28:48.609: D/AndroidRuntime(20672): Shutting down VM
04-19 05:28:48.609: W/dalvikvm(20672): threadid=1: thread exiting with uncaught exception (group=0x40d3c2a0)
04-19 05:28:48.619: E/AndroidRuntime(20672): FATAL EXCEPTION: main
04-19 05:28:48.619: E/AndroidRuntime(20672): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.drunktxtapp/android.view.Menu}; have you declared this activity in your AndroidManifest.xml?
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1420)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.app.Activity.startActivityForResult(Activity.java:3446)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.app.Activity.startActivityForResult(Activity.java:3407)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.app.Activity.startActivity(Activity.java:3617)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.app.Activity.startActivity(Activity.java:3585)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at com.drunktxtapp.CocktailMenu$1.onClick(CocktailMenu.java:29)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.view.View.performClick(View.java:4211)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.view.View$PerformClick.run(View.java:17267)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.os.Handler.handleCallback(Handler.java:615)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.os.Looper.loop(Looper.java:137)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at java.lang.reflect.Method.invokeNative(Native Method)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at java.lang.reflect.Method.invoke(Method.java:511)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
04-19 05:28:48.619: E/AndroidRuntime(20672):    at dalvik.system.NativeStart.main(Native Method)
04-19 05:28:58.679: I/Process(20672): Sending signal. PID: 20672 SIG: 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T04:35:29.207

```
The word "Menu" is the error!!!! 
```

android中有一个默认类菜单。所以建议不要把这个名字给其他类或活动..

将调用的活动重命名为`Menu`其他内容，例如`MyMenu`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T04:32:46.210

嗨，您是否在 Logcat 中看到过这一行？

找不到明确的活动类 {com.drunktxtapp/android.view.Menu}；您是否在 AndroidManifest.xml 中声明了此活动？

# maven - 构建 hadoop 1.0.1 时出错 - 缺少 pom.xml

> ID：16097228
> 
> 赞同：0
> 
> 时间：2013-04-19T04:31:20.017
> 
> 标签：maven, ubuntu, hadoop

我按照[这里](http://wiki.apache.org/hadoop/HowToContribute)给出的说明从这个[存储库](http://svn.apache.org/repos/asf/hadoop/common/tags/release-X.Y.Z)下载并构建了 hadoop 1.0.1 。我已经安装了 JDK、Maven、cmake、autoconf 等。当我从 hadoop 顶级目录运行以下命令时

```
 mvn -e package -Pdist -Pdoc -Psrc -Dtar -DskipTests 
```

mvn 报错说没有找到 pom.xml。文件夹或任何子文件夹中没有 pom.xml 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:10:24.003

据我调查[Hadoop Common tags](http://svn.apache.org/viewvc/hadoop/common/tags/)，只有 version`0.23.x`和`2.0.x`是一个`Maven`项目。其余的是一个`Ant`和/或`Ivy`项目。请注意，如果没有`pom.xml`，则不是`Maven`项目。

如果您想构建版本`1.0.1`，请改用[Apache Ant](http://ant.apache.org/)或[Apache Ivy](http://ant.apache.org/ivy/)。

# android - 未能找到 com.talkingoa.coperator.prefs 的提供者信息

> ID：16097230
> 
> 赞同：0
> 
> 时间：2013-04-19T04:31:27.290
> 
> 标签：android, uri, android-contentprovider

复制program1到粘贴program2

AndroidManifest.xml：</p>

程序1：</p>

```
<provider android:name="com.coperator.service.PreferenceProvider"
                    android:authorities="com.coperator.prefs" /> 
```

程序2：

```
<provider android:name="com.coperator.service.PreferenceProvider"
                    android:authorities="com.program2.coperator.prefs" /> 
```

爪哇代码：

```
 program1: public static final String AUTHORITY= "com.coperator.prefs";
  program2: public static final String AUTHORITY = "com.program2.coperator.prefs";

  public static final Uri RAZ_URI = Uri.parse(ContentResolver.SCHEME_CONTENT+ "://" +           AUTHORITY + "/" + RESET_TABLE_NAME);     
  Uri uri = SipConfigManager.RAZ_URI;
  resolver.update(uri, new ContentValues(), null, null); 
```

先运行program1正常，运行program2报错：

```
04-19 11:05:05.965: E/ActivityThread(5197): Failed to find provider info for com.talkingoa.coperator.prefs
04-19 11:05:05.965: E/ActivityThread(5197): Failed to find provider info for com.talkingoa.coperator.prefs04-19 11:05:05.975: E/AndroidRuntime(5197): FATAL EXCEPTION: main
04-19 11:05:05.975: E/AndroidRuntime(5197): java.lang.RuntimeException: Unable to create service com.coperator.service.SipService: java.lang.IllegalArgumentException: Unknown URI content://com.program2.coperator.prefs/raz
04-19 11:05:05.975: E/AndroidRuntime(5197):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2323)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at android.app.ActivityThread.access$2500(ActivityThread.java:135)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1118)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at android.os.Looper.loop(Looper.java:150)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at android.app.ActivityThread.main(ActivityThread.java:4385)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at java.lang.reflect.Method.invokeNative(Native Method)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at java.lang.reflect.Method.invoke(Method.java:507)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at dalvik.system.NativeStart.main(Native Method)
04-19 11:05:05.975: E/AndroidRuntime(5197): Caused by: java.lang.IllegalArgumentException: Unknown URI content://com.talkingoa.coperator.prefs/raz
04-19 11:05:05.975: E/AndroidRuntime(5197):  at android.content.ContentResolver.update(ContentResolver.java:722)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at com.coperator.utils.PreferencesProviderWrapper.resetAllDefaultValues(PreferencesProviderWrapper.java:53)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at com.coperator.service.SipService.onCreate(SipService.java:798)
04-19 11:05:05.975: E/AndroidRuntime(5197):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2309)
04-19 11:05:05.975: E/AndroidRuntime(5197):  ... 10 more 
```

我不知道怎么错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T00:11:00.937

在我的应用程序开发过程中，我遇到了同样的错误。对我来说，在调用 Content Provider 时，只需使用正确的 Uri 即可解决该错误。

在我的内容提供者中，我添加了一些 Uri，例如：

```
String AUTHORITY = "com.package.example";
static Uri CONTENT_URI = Uri.parse(AUTHORITY);

(...)

URIMatcher.addURI(AUTHORITY, "entry", 1); 
```

之后，当调用 ContentProvider 时，我做了

```
getContentResolver().getType(Uri.withAppendedPath(MyContentProvider.CONTENT_URI, "entry/1")); 
```

而且这个问题没有再发生。

# html - 单击时更改按钮颜色并将其他按钮更改回原始颜色

> ID：16097236
> 
> 赞同：0
> 
> 时间：2013-04-19T04:32:02.240
> 
> 标签：html, button, colors, back

我有一个带有 11 个按钮的按钮栏，它们会导致 iframe 中显示的页面中的页面跳转。

我希望这些按钮在单击时改变颜色，以便它们指示正在显示的页面。

这很容易。但问题是：

假设您单击按钮 4 - 发生页面跳转，显示第 4 页，按钮 4 变为紫色，一切正常。

但是，如果您然后单击第 7 页，则显示第 7 页，按钮 7 变为紫色，但按钮 4 仍为紫色，不会返回原始颜色（灰色）。

**这就是我需要的脚本，它可以在单击按钮时将按钮的颜色更改为紫色，同时在单击按钮栏中的另一个按钮时将其颜色更改回灰色。**

这是按钮代码：

`<div id="btn1" title="página 1" style="position: absolute; top: 0px; left: 0px; height:25px; width: 25px; border: 0px ridge white; background-color: transparent; padding: 0px; text-align: center; font-size:10px; font-weight: bold; font-family: arial; olor: white; z-index:10100;`

`<input type=button name="1" value="1" style="width: 20px; height: 20px; font-size: 11px; text-align: left; background-color: "eeeeee"; -webkit-border-radius: 3px;" onclick="this.style.cursor='hand', this.style.backgroundColor='purple'; this.style.color='white'; document.getElementById('licao').src='lesson1/l1d.htm#l1pg1'" /> </div>`

不得不留下一些括号，否则代码不会出现在这里......

所以你看到onclick按钮改变了颜色，但是我如何让其他按钮恢复到原来的颜色呢？还有 11 个其他按钮（用于 11 个页面），每个按钮都会跳转。

非常感谢您的帮助。

莱昂纳多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T22:06:32.483

使用 jQuery，这非常容易做到。您只需要包含 jquery 库并将 $('a') 替换为您的 html 标记或类（带有 . 前缀的符号，如 CSS 中的类）。

[http://jsbin.com/apitih/2/edit](http://jsbin.com/apitih/2/edit)

参考代码：

的HTML：

```
<body>
  <a href="#">Page 1</a>
  <a href="#">Page 2</a>
  <a href="#">Page 3</a>
  <a href="#">Page 4</a>
  <a href="#">Page 5</a>
</body> 
```

CSS：

```
a {
  background: grey;
  color: white;
  text-decoration: none;
  padding: 5px;
} 
```

jQuery

```
var links = $('a');
links.click(function() {
  links.css('background-color', 'grey');
  $(this).css('background-color', 'purple');
}); 
```

# matlab - MATLAB变量在加法运算中饱和

> ID：16097237
> 
> 赞同：1
> 
> 时间：2013-04-19T04:32:04.130
> 
> 标签：matlab, add

我在***MATLAB***中编写了下面的代码。循环之后，`dSumH`当我知道它的值应该超过这个值时，它总是在 255 处饱和。但是，当我用任意值替换 d 时，它不会饱和。有什么线索可以解决吗？

```
dTh = 127;
dSumH = zeros(w,1);

for(c = 1:w)

    for(r = 2:h)

        d = abs(img(r,c) - img(r-1,c));
        if(d >= dTh)
            dSumH(c) = dSumH(c) + d;
        end

    end

end
dSumH
figure, plot([1:w],dSumH); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:32:04.130

好，我知道了。变量 d 属于 uint8 类，因此加法运算也将 dSumH 隐式定义为 uint8。通过更改`d = abs(img(r,c) - img(r-1,c));`为`d = double(abs(img(r,c) - img(r-1,c)));`它按预期工作。

# apache - 如何获取 apache 使用的 wsgi_mod 版本？

> ID：16097244
> 
> 赞同：25
> 
> 时间：2013-04-19T04:32:47.867
> 
> 标签：apache, mod-wsgi, wsgi

我正在使用 ubuntu 12.041 并通过 apt-get 安装了 apache。

我不知道我使用的是什么版本的 mod_wsgi，尽管我在谷歌上搜索过。我发现你可以使用 apachctl 重新启动你的 apache，你会得到类似“Apache/2.2.2 (Unix) mod_wsgi/1.0 Python/2.3 configured”的东西。但这并没有发生在我身上。

有什么方法可以知道我使用的是什么版本？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-06-05T18:00:26.750

如果您重新启动 Apache 并检查日志：

```
sudo apachectl -k restart
tail -n 5 /var/log/apache2/error.log 
```

...您应该看到以下版本：

> [Fri Jun 05 15:13:46.546029 2015] [mpm_prefork:notice] [pid 2245] AH00163: Apache/2.4.7 (Ubuntu) PHP/5.5.9-1ubuntu4.9 ***mod_wsgi/3.4*** Python/3.4.0 已配置 --恢复正常运营

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-19T05:37:09.787

在您的 WSGI 应用程序中查看`mod_wsgi.version`WSGI 环境字典中的值。`import mod_wsgi`在 mod_wsgi（不是命令行 Python）下运行的 WSGI 应用程序中的那个或模块，并`mod_wsgi.version`从该模块打印出来。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-08T11:58:18.220

我用这个

```
dpkg -l | grep wsgi 
```

我不知道它在做什么，但它是一个版本？

顺便说一句，这可能是不对的，我拥有的版本 -

```
libapache2-mod-wsgi  (on ubuntu 10.04) 
```

不兼容 python *3.x。*我怎么知道这是一个谜——一些随机的网络论坛。此外，您实际上如何确定 libapache2 版本中的哪个版本*超出*了我的理解范围。

但是，啊，上面那个unix脚本会为你得到版本。在那之后你就靠自己了，水手。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-04-08T18:41:26.187

移动到 mod_wsgi.so 所在的 apache 模块目录。

运行以下命令。

```
$ strings mod_wsgi.so | grep -w -A 1 "wsgi_init"
wsgi_init
4.5.7 
```

*请注意*，可能需要`-A`在`1`出现`wsgi_init`. 例如，对于 mod_wsgi 版本 2.7.5，您需要`-A 2`查看版本号：

```
$ strings mod_wsgi.so | grep -w -A 2 "wsgi_init"
wsgi_init
mod_wsgi/%s
2.7.5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-15T15:17:58.433

一个附带问题是关于`mod_wsgi`. 为此，只需检查`mod_wsgi.so`模块`ldd`：

```
➜  / cd usr/lib/apache2/modules 
➜  modules ldd mod_wsgi.so
        linux-vdso.so.1 =>  (0x00007ffcaabf3000)
        libpython2.7.so.1.0 => /usr/lib/x86_64-linux-gnu/libpython2.7.so.1.0 (0x00007f4e29c62000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f4e29a45000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f4e2967b000)
        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f4e29461000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f4e2925d000)
        libutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007f4e2905a000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f4e28d51000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f4e2a423000)
➜  modules 
```

就我而言，它显然是用`python2.7`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-22T01:01:31.450

这已经很老了，但我没有看到我找到的答案：

```
yum list installed '*mod_wsgi*' 
```

或者更好

```
yum list '*mod_wsgi*' 
```

查看您已安装的内容以及可用的（可能）更高版本。

# postgresql - PostgreSQL：影子表

> ID：16097250
> 
> 赞同：1
> 
> 时间：2013-04-19T04:33:32.150
> 
> 标签：postgresql, web2py

我正在使用 Web2Py 智能网格在 Web 上显示内容。

由于在数据库中有一些重复的条目，我想将它隐藏在一些网络上。我相信没有办法配置智能电网。我需要为该表创建一个影子表，删除重复的条目。

但是，我想将影子表用作原始表的子集 - 所有修改都将在原始表上进行。影子表为原始表提供了一个视图。但不幸的是，影子表不能以这种方式工作。

如何使影子表有效地获取原始表的子集？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:06:18.683

`distinct`消除重复

```
create view my_view as
select distinct *
from t

select *
from my_view 
```

# python - 在 Mac OS X 10.6.8 上安装 pycurl 时遇到问题

> ID：16097257
> 
> 赞同：0
> 
> 时间：2013-04-19T04:33:59.920
> 
> 标签：python, python-2.7, installation, libcurl, pycurl

我正在开发一个使用此处找到的 eBay SDK 模块的 python 项目（我有 python 2.7）：[https ://github.com/timotheus/ebaysdk-python](https://github.com/timotheus/ebaysdk-python)

我能够安装`ebaysdk`，但在运行导入它的程序时遇到了问题：

```
Nicole-MacBook-Air:python nicole$ python ebayToHTML.py 
Traceback (most recent call last):
  File "ebayToHTML.py", line 2, in <module>
    from ebaysdk import finding 
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ebaysdk-0.1.7-py2.7.egg/ebaysdk/__init__.py", line 3, in <module>
    import yaml, pycurl, urllib
ImportError: No module named pycurl 
```

在遇到这个问题之前，我必须安装`yaml`，这需要一点研究但最终解决了。但是，现在我无法`pycurl`安装。我已经尝试了许多命令，例如`sudo easy_install pycurl`,`sudo pip install pycurl`和，来自另一个发布的问题，`sudo env ARCHFLAGS="-arch x86_64" easy_install setuptools pycurl==7.19.0`.

所有这些都显示了大量`...undeclared`错误，这似乎归结为以下消息：

`src/pycurl.c:61:4: error: src/pycurl.c:61:4: error: #error "Need libcurl version 7.19.0 or greater to compile pycurl."`

但似乎我有这个`libcurl`必要（假设这是检查它的方法？）：

```
Nicole-MacBook-Air:python nicole$  curl-config --version
libcurl 7.19.7 
```

其他人似乎在这里有类似的问题：[pycurl install :( 已经有 min.libcurl 版本](https://stackoverflow.com/questions/2279014/pycurl-install-already-have-min-libcurl-version)

...但是答案有点超出我的想象，我没有运气尝试其中一些给出的不同命令。

我不知道现在该怎么办；这只是一个雪豹问题，可以通过升级我的操作系统（对不起，如果这是一个愚蠢的概括）更好地避免？我对此不是很了解，也不知道与这些依赖关系争论是否值得。

编辑：这是我得到的长追溯`sudo easy_install pycurl`：

```
Nicole-MacBook-Air:python nicole$ sudo easy_install pycurl
Searching for pycurl
Reading http://pypi.python.org/simple/pycurl/
Reading http://pycurl.sourceforge.net/
Reading http://pycurl.sourceforge.net/download/
Best match: pycurl 7.19.0
Downloading http://pycurl.sourceforge.net/download/pycurl-7.19.0.tar.gz
Processing pycurl-7.19.0.tar.gz
Writing /tmp/easy_install-k4bkjB/pycurl-7.19.0/setup.cfg
Running pycurl-7.19.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-k4bkjB/pycurl-7.19.0/egg-dist-tmp-EB2TOP
Using curl-config (libcurl 7.19.7)
src/pycurl.c:61:4: error: src/pycurl.c:61:4: error: #error "Need libcurl version 7.19.0 or greater to compile pycurl."
src/pycurl.c:85:4: warning: #warning "libcurl was compiled with SSL support, but configure could not determine which " "library was used; thus no SSL crypto locking callbacks will be set, which may " "cause random crashes on SSL requests"
#error "Need libcurl version 7.19.0 or greater to compile pycurl."
src/pycurl.c:85:4: warning: #warning "libcurl was compiled with SSL support, but configure could not determine which " "library was used; thus no SSL crypto locking callbacks will be set, which may " "cause random crashes on SSL requests"
src/pycurl.c:1134: error: syntax error before ‘opensocket_callback’
src/pycurl.c:1134: error: syntax error before ‘curlsocktype’
src/pycurl.c: In function ‘opensocket_callback’:src/pycurl.c:1134: error: syntax error before ‘opensocket_callback’
src/pycurl.c:1134: error: syntax error before ‘curlsocktype’
src/pycurl.c: In function ‘opensocket_callback’:
src/pycurl.c:1142: error: ‘CURL_SOCKET_BAD’ undeclared (first use in this function)
src/pycurl.c:1142: error: (Each undeclared identifier is reported only once
src/pycurl.c:1142: error: for each function it appears in.)
src/pycurl.c:1144: error: ‘clientp’ undeclared (first use in this function)
src/pycurl.c:1148: error: ‘address’ undeclared (first use in this function)

src/pycurl.c:1142: error: ‘CURL_SOCKET_BAD’ undeclared (first use in this function)
src/pycurl.c:1142: error: (Each undeclared identifier is reported only once
src/pycurl.c:1142: error: for each function it appears in.)
src/pycurl.c:1144: error: ‘clientp’ undeclared (first use in this function)
src/pycurl.c:1148: error: ‘address’ undeclared (first use in this function)
src/pycurl.c: In function ‘do_curl_setopt’:
src/pycurl.c:1599: error: ‘CURLOPT_COOKIELIST’ undeclared (first use in this function)
src/pycurl.c:1623: error: ‘CURLOPT_FTP_ALTERNATIVE_TO_USER’ undeclared (first use in this function)
src/pycurl.c:1624: error: ‘CURLOPT_SSH_PUBLIC_KEYFILE’ undeclared (first use in this function)
src/pycurl.c:1625: error: ‘CURLOPT_SSH_PRIVATE_KEYFILE’ undeclared (first use in this function)
src/pycurl.c:1626: error: ‘CURLOPT_COPYPOSTFIELDS’ undeclared (first use in this function)
src/pycurl.c:1627: error: ‘CURLOPT_SSH_HOST_PUBLIC_KEY_MD5’ undeclared (first use in this function)
src/pycurl.c:1628: error: ‘CURLOPT_CRLFILE’ undeclared (first use in this function)
src/pycurl.c:1629: error: ‘CURLOPT_ISSUERCERT’ undeclared (first use in this function)
src/pycurl.c: In function ‘do_curl_setopt’:
src/pycurl.c:1599: error: ‘CURLOPT_COOKIELIST’ undeclared (first use in this function)
src/pycurl.c:1623: error: ‘CURLOPT_FTP_ALTERNATIVE_TO_USER’ undeclared (first use in this function)
src/pycurl.c:1624: error: ‘CURLOPT_SSH_PUBLIC_KEYFILE’ undeclared (first use in this function)
src/pycurl.c:1625: error: ‘CURLOPT_SSH_PRIVATE_KEYFILE’ undeclared (first use in this function)
src/pycurl.c:1626: error: ‘CURLOPT_COPYPOSTFIELDS’ undeclared (first use in this function)
src/pycurl.c:1627: error: ‘CURLOPT_SSH_HOST_PUBLIC_KEY_MD5’ undeclared (first use in this function)
src/pycurl.c:1628: error: ‘CURLOPT_CRLFILE’ undeclared (first use in this function)
src/pycurl.c:1629: error: ‘CURLOPT_ISSUERCERT’ undeclared (first use in this function)
src/pycurl.c:2020: error: nested functions are disabled, use -fnested-functions to re-enable
src/pycurl.c:2020: error: syntax error before ‘opensocket_cb’
src/pycurl.c:2071: error: ‘CURLOPT_OPENSOCKETFUNCTION’ undeclared (first use in this function)
src/pycurl.c:2075: error: ‘opensocket_cb’ undeclared (first use in this function)
src/pycurl.c:2076: error: ‘CURLOPT_OPENSOCKETDATA’ undeclared (first use in this function)
src/pycurl.c:2020: error: nested functions are disabled, use -fnested-functions to re-enable
src/pycurl.c:2020: error: syntax error before ‘opensocket_cb’
src/pycurl.c:2071: error: ‘CURLOPT_OPENSOCKETFUNCTION’ undeclared (first use in this function)
src/pycurl.c:2075: error: ‘opensocket_cb’ undeclared (first use in this function)
src/pycurl.c:2076: error: ‘CURLOPT_OPENSOCKETDATA’ undeclared (first use in this function)
src/pycurl.c: In function ‘do_curl_getinfo’:
src/pycurl.c:2159: error: ‘CURLINFO_LASTSOCKET’ undeclared (first use in this function)
src/pycurl.c:2174: error: ‘CURLINFO_FTP_ENTRY_PATH’ undeclared (first use in this function)
src/pycurl.c:2175: error: ‘CURLINFO_REDIRECT_URL’ undeclared (first use in this function)
src/pycurl.c:2176: error: ‘CURLINFO_PRIMARY_IP’ undeclared (first use in this function)
src/pycurl.c:2194: error: ‘CURLINFO_APPCONNECT_TIME’ undeclared (first use in this function)
src/pycurl.c:2218: error: ‘CURLINFO_COOKIELIST’ undeclared (first use in this function)
src/pycurl.c: At top level:
src/pycurl.c:2341: error: syntax error before ‘curl_socket_t’
src/pycurl.c: In function ‘multi_socket_callback’:
src/pycurl.c:2354: error: ‘userp’ undeclared (first use in this function)
src/pycurl.c:2355: error: ‘easy’ undeclared (first use in this function)
src/pycurl.c:2365: error: ‘socketp’ undeclared (first use in this function)
src/pycurl.c:2371: error: ‘what’ undeclared (first use in this function)
src/pycurl.c:2371: error: ‘s’ undeclared (first use in this function)
src/pycurl.c: In function ‘do_multi_setopt’:
src/pycurl.c:2452: error: ‘CURLMOPT_LASTENTRY’ undeclared (first use in this function)
src/pycurl.c:2461: error: ‘CURLMOPT_PIPELINING’ undeclared (first use in this function)
src/pycurl.c:2464: error: ‘CURLMOPT_MAXCONNECTS’ undeclared (first use in this function)
src/pycurl.c:2479: error: nested functions are disabled, use -fnested-functions to re-enable
src/pycurl.c:2479: error: syntax error before ‘t_cb’
src/pycurl.c:2480: error: nested functions are disabled, use -fnested-functions to re-enable
src/pycurl.c:2480: error: syntax error before ‘s_cb’
src/pycurl.c:2483: error: ‘CURLMOPT_SOCKETFUNCTION’ undeclared (first use in this function)
src/pycurl.c:2484: error: ‘s_cb’ undeclared (first use in this function)
src/pycurl.c:2485: error: ‘CURLMOPT_SOCKETDATA’ undeclared (first use in this function)
src/pycurl.c:2489: error: ‘CURLMOPT_TIMERFUNCTION’ undeclared (first use in this function)
src/pycurl.c:2490: error: ‘t_cb’ undeclared (first use in this function)
src/pycurl.c:2491: error: ‘CURLMOPT_TIMERDATA’ undeclared (first use in this function)
src/pycurl.c: In function ‘do_multi_assign’:
src/pycurl.c:2537: error: ‘curl_socket_t’ undeclared (first use in this function)
src/pycurl.c:2537: error: syntax error before ‘socket’
src/pycurl.c: In function ‘do_multi_socket_action’:
src/pycurl.c:2562: error: ‘curl_socket_t’ undeclared (first use in this function)
src/pycurl.c:2562: error: syntax error before ‘socket’
src/pycurl.c: In function ‘do_curl_getinfo’:
src/pycurl.c:2159: error: ‘CURLINFO_LASTSOCKET’ undeclared (first use in this function)
src/pycurl.c:2174: error: ‘CURLINFO_FTP_ENTRY_PATH’ undeclared (first use in this function)
src/pycurl.c:2175: error: ‘CURLINFO_REDIRECT_URL’ undeclared (first use in this function)
src/pycurl.c:2176: error: ‘CURLINFO_PRIMARY_IP’ undeclared (first use in this function)
src/pycurl.c:2194: error: ‘CURLINFO_APPCONNECT_TIME’ undeclared (first use in this function)
src/pycurl.c:2218: error: ‘CURLINFO_COOKIELIST’ undeclared (first use in this function)
src/pycurl.c: At top level:
src/pycurl.c:2341: error: syntax error before ‘curl_socket_t’
src/pycurl.c: In function ‘multi_socket_callback’:
src/pycurl.c:2354: error: ‘userp’ undeclared (first use in this function)
src/pycurl.c:2355: error: ‘easy’ undeclared (first use in this function)
src/pycurl.c:2365: error: ‘socketp’ undeclared (first use in this function)
src/pycurl.c:2371: error: ‘what’ undeclared (first use in this function)
src/pycurl.c:2371: error: ‘s’ undeclared (first use in this function)
src/pycurl.c: In function ‘do_multi_setopt’:
src/pycurl.c:2452: error: ‘CURLMOPT_LASTENTRY’ undeclared (first use in this function)
src/pycurl.c:2461: error: ‘CURLMOPT_PIPELINING’ undeclared (first use in this function)
src/pycurl.c:2464: error: ‘CURLMOPT_MAXCONNECTS’ undeclared (first use in this function)
src/pycurl.c:2479: error: nested functions are disabled, use -fnested-functions to re-enable
src/pycurl.c:2479: error: syntax error before ‘t_cb’
src/pycurl.c:2480: error: nested functions are disabled, use -fnested-functions to re-enable
src/pycurl.c:2480: error: syntax error before ‘s_cb’
src/pycurl.c:2483: error: ‘CURLMOPT_SOCKETFUNCTION’ undeclared (first use in this function)
src/pycurl.c:2484: error: ‘s_cb’ undeclared (first use in this function)
src/pycurl.c:2485: error: ‘CURLMOPT_SOCKETDATA’ undeclared (first use in this function)
src/pycurl.c:2489: error: ‘CURLMOPT_TIMERFUNCTION’ undeclared (first use in this function)
src/pycurl.c:2490: error: ‘t_cb’ undeclared (first use in this function)
src/pycurl.c:2491: error: ‘CURLMOPT_TIMERDATA’ undeclared (first use in this function)
src/pycurl.c: In function ‘do_multi_assign’:
src/pycurl.c:2537: error: ‘curl_socket_t’ undeclared (first use in this function)
src/pycurl.c:2537: error: syntax error before ‘socket’
src/pycurl.c: In function ‘do_multi_socket_action’:
src/pycurl.c:2562: error: ‘curl_socket_t’ undeclared (first use in this function)
src/pycurl.c:2562: error: syntax error before ‘socket’
src/pycurl.c: In function ‘initpycurl’:
src/pycurl.c:3546: error: ‘CURLE_TFTP_NOTFOUND’ undeclared (first use in this function)
src/pycurl.c:3547: error: ‘CURLE_TFTP_PERM’ undeclared (first use in this function)
src/pycurl.c:3548: error: ‘CURLE_TFTP_DISKFULL’ undeclared (first use in this function)
src/pycurl.c:3549: error: ‘CURLE_TFTP_ILLEGAL’ undeclared (first use in this function)
src/pycurl.c:3550: error: ‘CURLE_TFTP_UNKNOWNID’ undeclared (first use in this function)
src/pycurl.c:3551: error: ‘CURLE_TFTP_EXISTS’ undeclared (first use in this function)
src/pycurl.c:3552: error: ‘CURLE_TFTP_NOSUCHUSER’ undeclared (first use in this function)
src/pycurl.c:3553: error: ‘CURLE_CONV_FAILED’ undeclared (first use in this function)
src/pycurl.c:3554: error: ‘CURLE_CONV_REQD’ undeclared (first use in this function)
src/pycurl.c:3555: error: ‘CURLE_SSL_CACERT_BADFILE’ undeclared (first use in this function)
src/pycurl.c:3556: error: ‘CURLE_REMOTE_FILE_NOT_FOUND’ undeclared (first use in this function)
src/pycurl.c:3557: error: ‘CURLE_SSH’ undeclared (first use in this function)
src/pycurl.c:3558: error: ‘CURLE_SSL_SHUTDOWN_FAILED’ undeclared (first use in this function)
src/pycurl.c:3592: error: ‘CURLFTPMETHOD_DEFAULT’ undeclared (first use in this function)
src/pycurl.c:3593: error: ‘CURLFTPMETHOD_MULTICWD’ undeclared (first use in this function)
src/pycurl.c:3594: error: ‘CURLFTPMETHOD_NOCWD’ undeclared (first use in this function)
src/pycurl.c:3595: error: ‘CURLFTPMETHOD_SINGLECWD’ undeclared (first use in this function)
src/pycurl.c:3707: error: ‘CURLOPT_OPENSOCKETFUNCTION’ undeclared (first use in this function)
src/pycurl.c:3709: error: ‘CURLOPT_IGNORE_CONTENT_LENGTH’ undeclared (first use in this function)
src/pycurl.c:3710: error: ‘CURLOPT_COOKIELIST’ undeclared (first use in this function)
src/pycurl.c:3711: error: ‘CURLOPT_FTP_SKIP_PASV_IP’ undeclared (first use in this function)
src/pycurl.c:3712: error: ‘CURLOPT_FTP_FILEMETHOD’ undeclared (first use in this function)
src/pycurl.c:3713: error: ‘CURLOPT_CONNECT_ONLY’ undeclared (first use in this function)
src/pycurl.c:3714: error: ‘CURLOPT_LOCALPORT’ undeclared (first use in this function)
src/pycurl.c:3715: error: ‘CURLOPT_LOCALPORTRANGE’ undeclared (first use in this function)
src/pycurl.c:3716: error: ‘CURLOPT_FTP_ALTERNATIVE_TO_USER’ undeclared (first use in this function)
src/pycurl.c:3717: error: ‘CURLOPT_MAX_SEND_SPEED_LARGE’ undeclared (first use in this function)
src/pycurl.c:3718: error: ‘CURLOPT_MAX_RECV_SPEED_LARGE’ undeclared (first use in this function)
src/pycurl.c:3719: error: ‘CURLOPT_SSL_SESSIONID_CACHE’ undeclared (first use in this function)
src/pycurl.c:3720: error: ‘CURLOPT_SSH_AUTH_TYPES’ undeclared (first use in this function)
src/pycurl.c:3721: error: ‘CURLOPT_SSH_PUBLIC_KEYFILE’ undeclared (first use in this function)
src/pycurl.c:3722: error: ‘CURLOPT_SSH_PRIVATE_KEYFILE’ undeclared (first use in this function)
src/pycurl.c:3723: error: ‘CURLOPT_FTP_SSL_CCC’ undeclared (first use in this function)
src/pycurl.c:3724: error: ‘CURLOPT_TIMEOUT_MS’ undeclared (first use in this function)
src/pycurl.c:3725: error: ‘CURLOPT_CONNECTTIMEOUT_MS’ undeclared (first use in this function)
src/pycurl.c:3726: error: ‘CURLOPT_HTTP_TRANSFER_DECODING’ undeclared (first use in this function)
src/pycurl.c:3727: error: ‘CURLOPT_HTTP_CONTENT_DECODING’ undeclared (first use in this function)
src/pycurl.c:3728: error: ‘CURLOPT_NEW_FILE_PERMS’ undeclared (first use in this function)
src/pycurl.c:3729: error: ‘CURLOPT_NEW_DIRECTORY_PERMS’ undeclared (first use in this function)
src/pycurl.c:3730: error: ‘CURLOPT_POST301’ undeclared (first use in this function)
src/pycurl.c:3731: error: ‘CURLOPT_PROXY_TRANSFER_MODE’ undeclared (first use in this function)
src/pycurl.c:3732: error: ‘CURLOPT_COPYPOSTFIELDS’ undeclared (first use in this function)
src/pycurl.c:3733: error: ‘CURLOPT_SSH_HOST_PUBLIC_KEY_MD5’ undeclared (first use in this function)
src/pycurl.c:3735: error: ‘CURLOPT_CRLFILE’ undeclared (first use in this function)
src/pycurl.c:3736: error: ‘CURLOPT_ISSUERCERT’ undeclared (first use in this function)
src/pycurl.c:3737: error: ‘CURLOPT_ADDRESS_SCOPE’ undeclared (first use in this function)
src/pycurl.c:3739: error: ‘CURLMOPT_TIMERFUNCTION’ undeclared (first use in this function)
src/pycurl.c:3740: error: ‘CURLMOPT_SOCKETFUNCTION’ undeclared (first use in this function)
src/pycurl.c:3741: error: ‘CURLMOPT_PIPELINING’ undeclared (first use in this function)
src/pycurl.c:3742: error: ‘CURLMOPT_MAXCONNECTS’ undeclared (first use in this function)
src/pycurl.c:3773: error: ‘CURLSSH_AUTH_ANY’ undeclared (first use in this function)
src/pycurl.c:3774: error: ‘CURLSSH_AUTH_NONE’ undeclared (first use in this function)
src/pycurl.c:3775: error: ‘CURLSSH_AUTH_PUBLICKEY’ undeclared (first use in this function)
src/pycurl.c:3776: error: ‘CURLSSH_AUTH_PASSWORD’ undeclared (first use in this function)
src/pycurl.c:3777: error: ‘CURLSSH_AUTH_HOST’ undeclared (first use in this function)
src/pycurl.c:3778: error: ‘CURLSSH_AUTH_KEYBOARD’ undeclared (first use in this function)
src/pycurl.c:3779: error: ‘CURLSSH_AUTH_DEFAULT’ undeclared (first use in this function)
src/pycurl.c:3788: error: ‘CURLINFO_APPCONNECT_TIME’ undeclared (first use in this function)
src/pycurl.c:3804: error: ‘CURLINFO_REDIRECT_URL’ undeclared (first use in this function)
src/pycurl.c:3805: error: ‘CURLINFO_PRIMARY_IP’ undeclared (first use in this function)
src/pycurl.c:3812: error: ‘CURLINFO_COOKIELIST’ undeclared (first use in this function)
src/pycurl.c:3813: error: ‘CURLINFO_LASTSOCKET’ undeclared (first use in this function)
src/pycurl.c:3814: error: ‘CURLINFO_FTP_ENTRY_PATH’ undeclared (first use in this function)
src/pycurl.c:3825: error: ‘CURL_CSELECT_IN’ undeclared (first use in this function)
src/pycurl.c:3826: error: ‘CURL_CSELECT_OUT’ undeclared (first use in this function)
src/pycurl.c:3827: error: ‘CURL_CSELECT_ERR’ undeclared (first use in this function)
src/pycurl.c:3828: error: ‘CURL_SOCKET_TIMEOUT’ undeclared (first use in this function)
src/pycurl.c:3829: error: ‘CURL_POLL_NONE’ undeclared (first use in this function)
src/pycurl.c:3830: error: ‘CURL_POLL_IN’ undeclared (first use in this function)
src/pycurl.c:3831: error: ‘CURL_POLL_OUT’ undeclared (first use in this function)
src/pycurl.c:3832: error: ‘CURL_POLL_INOUT’ undeclared (first use in this function)
src/pycurl.c:3833: error: ‘CURL_POLL_REMOVE’ undeclared (first use in this function)
src/pycurl.c: In function ‘initpycurl’:
src/pycurl.c:3546: error: ‘CURLE_TFTP_NOTFOUND’ undeclared (first use in this function)
src/pycurl.c:3547: error: ‘CURLE_TFTP_PERM’ undeclared (first use in this function)
src/pycurl.c:3548: error: ‘CURLE_TFTP_DISKFULL’ undeclared (first use in this function)
src/pycurl.c:3549: error: ‘CURLE_TFTP_ILLEGAL’ undeclared (first use in this function)
src/pycurl.c:3550: error: ‘CURLE_TFTP_UNKNOWNID’ undeclared (first use in this function)
src/pycurl.c:3551: error: ‘CURLE_TFTP_EXISTS’ undeclared (first use in this function)
src/pycurl.c:3552: error: ‘CURLE_TFTP_NOSUCHUSER’ undeclared (first use in this function)
src/pycurl.c:3553: error: ‘CURLE_CONV_FAILED’ undeclared (first use in this function)
src/pycurl.c:3554: error: ‘CURLE_CONV_REQD’ undeclared (first use in this function)
src/pycurl.c:3555: error: ‘CURLE_SSL_CACERT_BADFILE’ undeclared (first use in this function)
src/pycurl.c:3556: error: ‘CURLE_REMOTE_FILE_NOT_FOUND’ undeclared (first use in this function)
src/pycurl.c:3557: error: ‘CURLE_SSH’ undeclared (first use in this function)
src/pycurl.c:3558: error: ‘CURLE_SSL_SHUTDOWN_FAILED’ undeclared (first use in this function)
src/pycurl.c:3592: error: ‘CURLFTPMETHOD_DEFAULT’ undeclared (first use in this function)
src/pycurl.c:3593: error: ‘CURLFTPMETHOD_MULTICWD’ undeclared (first use in this function)
src/pycurl.c:3594: error: ‘CURLFTPMETHOD_NOCWD’ undeclared (first use in this function)
src/pycurl.c:3595: error: ‘CURLFTPMETHOD_SINGLECWD’ undeclared (first use in this function)
src/pycurl.c:3707: error: ‘CURLOPT_OPENSOCKETFUNCTION’ undeclared (first use in this function)
src/pycurl.c:3709: error: ‘CURLOPT_IGNORE_CONTENT_LENGTH’ undeclared (first use in this function)
src/pycurl.c:3710: error: ‘CURLOPT_COOKIELIST’ undeclared (first use in this function)
src/pycurl.c:3711: error: ‘CURLOPT_FTP_SKIP_PASV_IP’ undeclared (first use in this function)
src/pycurl.c:3712: error: ‘CURLOPT_FTP_FILEMETHOD’ undeclared (first use in this function)
src/pycurl.c:3713: error: ‘CURLOPT_CONNECT_ONLY’ undeclared (first use in this function)
src/pycurl.c:3714: error: ‘CURLOPT_LOCALPORT’ undeclared (first use in this function)
src/pycurl.c:3715: error: ‘CURLOPT_LOCALPORTRANGE’ undeclared (first use in this function)
src/pycurl.c:3716: error: ‘CURLOPT_FTP_ALTERNATIVE_TO_USER’ undeclared (first use in this function)
src/pycurl.c:3717: error: ‘CURLOPT_MAX_SEND_SPEED_LARGE’ undeclared (first use in this function)
src/pycurl.c:3718: error: ‘CURLOPT_MAX_RECV_SPEED_LARGE’ undeclared (first use in this function)
src/pycurl.c:3719: error: ‘CURLOPT_SSL_SESSIONID_CACHE’ undeclared (first use in this function)
src/pycurl.c:3720: error: ‘CURLOPT_SSH_AUTH_TYPES’ undeclared (first use in this function)
src/pycurl.c:3721: error: ‘CURLOPT_SSH_PUBLIC_KEYFILE’ undeclared (first use in this function)
src/pycurl.c:3722: error: ‘CURLOPT_SSH_PRIVATE_KEYFILE’ undeclared (first use in this function)
src/pycurl.c:3723: error: ‘CURLOPT_FTP_SSL_CCC’ undeclared (first use in this function)
src/pycurl.c:3724: error: ‘CURLOPT_TIMEOUT_MS’ undeclared (first use in this function)
src/pycurl.c:3725: error: ‘CURLOPT_CONNECTTIMEOUT_MS’ undeclared (first use in this function)
src/pycurl.c:3726: error: ‘CURLOPT_HTTP_TRANSFER_DECODING’ undeclared (first use in this function)
src/pycurl.c:3727: error: ‘CURLOPT_HTTP_CONTENT_DECODING’ undeclared (first use in this function)
src/pycurl.c:3728: error: ‘CURLOPT_NEW_FILE_PERMS’ undeclared (first use in this function)
src/pycurl.c:3729: error: ‘CURLOPT_NEW_DIRECTORY_PERMS’ undeclared (first use in this function)
src/pycurl.c:3730: error: ‘CURLOPT_POST301’ undeclared (first use in this function)
src/pycurl.c:3731: error: ‘CURLOPT_PROXY_TRANSFER_MODE’ undeclared (first use in this function)
src/pycurl.c:3732: error: ‘CURLOPT_COPYPOSTFIELDS’ undeclared (first use in this function)
src/pycurl.c:3733: error: ‘CURLOPT_SSH_HOST_PUBLIC_KEY_MD5’ undeclared (first use in this function)
src/pycurl.c:3735: error: ‘CURLOPT_CRLFILE’ undeclared (first use in this function)
src/pycurl.c:3736: error: ‘CURLOPT_ISSUERCERT’ undeclared (first use in this function)
src/pycurl.c:3737: error: ‘CURLOPT_ADDRESS_SCOPE’ undeclared (first use in this function)
src/pycurl.c:3739: error: ‘CURLMOPT_TIMERFUNCTION’ undeclared (first use in this function)
src/pycurl.c:3740: error: ‘CURLMOPT_SOCKETFUNCTION’ undeclared (first use in this function)
src/pycurl.c:3741: error: ‘CURLMOPT_PIPELINING’ undeclared (first use in this function)
src/pycurl.c:3742: error: ‘CURLMOPT_MAXCONNECTS’ undeclared (first use in this function)
src/pycurl.c:3773: error: ‘CURLSSH_AUTH_ANY’ undeclared (first use in this function)
src/pycurl.c:3774: error: ‘CURLSSH_AUTH_NONE’ undeclared (first use in this function)
src/pycurl.c:3775: error: ‘CURLSSH_AUTH_PUBLICKEY’ undeclared (first use in this function)
src/pycurl.c:3776: error: ‘CURLSSH_AUTH_PASSWORD’ undeclared (first use in this function)
src/pycurl.c:3777: error: ‘CURLSSH_AUTH_HOST’ undeclared (first use in this function)
src/pycurl.c:3778: error: ‘CURLSSH_AUTH_KEYBOARD’ undeclared (first use in this function)
src/pycurl.c:3779: error: ‘CURLSSH_AUTH_DEFAULT’ undeclared (first use in this function)
src/pycurl.c:3788: error: ‘CURLINFO_APPCONNECT_TIME’ undeclared (first use in this function)
src/pycurl.c:3804: error: ‘CURLINFO_REDIRECT_URL’ undeclared (first use in this function)
src/pycurl.c:3805: error: ‘CURLINFO_PRIMARY_IP’ undeclared (first use in this function)
src/pycurl.c:3812: error: ‘CURLINFO_COOKIELIST’ undeclared (first use in this function)
src/pycurl.c:3813: error: ‘CURLINFO_LASTSOCKET’ undeclared (first use in this function)
src/pycurl.c:3814: error: ‘CURLINFO_FTP_ENTRY_PATH’ undeclared (first use in this function)
src/pycurl.c:3825: error: ‘CURL_CSELECT_IN’ undeclared (first use in this function)
src/pycurl.c:3826: error: ‘CURL_CSELECT_OUT’ undeclared (first use in this function)
src/pycurl.c:3827: error: ‘CURL_CSELECT_ERR’ undeclared (first use in this function)
src/pycurl.c:3828: error: ‘CURL_SOCKET_TIMEOUT’ undeclared (first use in this function)
src/pycurl.c:3829: error: ‘CURL_POLL_NONE’ undeclared (first use in this function)
src/pycurl.c:3830: error: ‘CURL_POLL_IN’ undeclared (first use in this function)
src/pycurl.c:3831: error: ‘CURL_POLL_OUT’ undeclared (first use in this function)
src/pycurl.c:3832: error: ‘CURL_POLL_INOUT’ undeclared (first use in this function)
src/pycurl.c:3833: error: ‘CURL_POLL_REMOVE’ undeclared (first use in this function)
lipo: can't figure out the architecture type of: /var/tmp//cc1gGI6G.out
error: Setup script exited with error: command 'gcc-4.0' failed with exit status 1 
```

如果它有帮助，这也是。它说它找不到它，仅此而已:(:

```
Nicole-MacBook-Air:python nicole$ sudo port install py27-curl
Error: Port py27-curl not found 
```

编辑2：最后，我应该成功安装了pycurl：

```
Nicole-MacBook-Air:python nicole$ sudo port install py27-curl
Password:
--->  Computing dependencies for py27-curl
--->  Dependencies to be installed: curl curl-ca-bundle
--->  Fetching archive for curl-ca-bundle
--->  Attempting to fetch curl-ca-bundle-7.30.0_0.darwin_10.noarch.tbz2 from http://packages.macports.org/curl-ca-bundle
--->  Attempting to fetch curl-ca-bundle-7.30.0_0.darwin_10.noarch.tbz2.rmd160 from http://packages.macports.org/curl-ca-bundle
--->  Installing curl-ca-bundle @7.30.0_0
--->  Activating curl-ca-bundle @7.30.0_0
--->  Cleaning curl-ca-bundle
--->  Fetching archive for curl
--->  Attempting to fetch curl-7.30.0_0+ssl.darwin_10.x86_64.tbz2 from http://packages.macports.org/curl
--->  Attempting to fetch curl-7.30.0_0+ssl.darwin_10.x86_64.tbz2.rmd160 from http://packages.macports.org/curl
--->  Installing curl @7.30.0_0+ssl
--->  Activating curl @7.30.0_0+ssl
--->  Cleaning curl
--->  Fetching archive for py27-curl
--->  Attempting to fetch py27-curl-7.19.0_0.darwin_10.x86_64.tbz2 from http://packages.macports.org/py27-curl
--->  Attempting to fetch py27-curl-7.19.0_0.darwin_10.x86_64.tbz2.rmd160 from http://packages.macports.org/py27-curl
--->  Installing py27-curl @7.19.0_0
--->  Activating py27-curl @7.19.0_0
--->  Cleaning py27-curl
--->  Updating database of binaries: 100.0%
--->  Scanning binaries for linking errors: 100.0%
--->  No broken files found. 
```

但后来这个！：

```
Nicole-MacBook-Air:python nicole$ python
Python 2.7.4 (v2.7.4:026ee0057e2d, Apr  6 2013, 10:15:50) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pycurl
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named pycurl 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:33:05.700

你可能有两个 python 安装，一个在 /usr/bin/python 中随 MacBookPro 一起安装，另一个由 macports 默认安装到 /opt/local/bin/python。

如果可行，试试这个：

```
sudo port install py27-yaml
sudo port install py27-curl
/opt/local/bin/python2.7
import pycurl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:05:44.010

在安装`pycurl`时`easy_install`我遇到了[这里](https://github.com/facebook/tornado/wiki/Installation-Troubleshooting)发布的错误，所以我尝试[了 macports](http://www.macports.org/) .. .on 10.6.8 .. 并且它已成功安装并工作::

```
Namit-Kewats-MacBook:~ namitkewat$ sudo port install py27-curl
Warning: port definitions are more than two weeks old, consider using selfupdate
--->  Computing dependencies for py27-curl
--->  Fetching archive for py27-curl
--->  Attempting to fetch py27-curl-7.19.0_0.darwin_10.x86_64.tbz2 from http://lil.fr.packages.macports.org/py27-curl
--->  Attempting to fetch py27-curl-7.19.0_0.darwin_10.x86_64.tbz2.rmd160 from http://lil.fr.packages.macports.org/py27-curl
--->  Installing py27-curl @7.19.0_0
--->  Activating py27-curl @7.19.0_0
--->  Cleaning py27-curl
--->  Updating database of binaries: 100.0%
--->  Scanning binaries for linking errors: 100.0%
--->  No broken files found.
Namit-Kewats-MacBook:~ namitkewat$ python
Python 2.7.3 (default, Oct 22 2012, 06:12:28) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pycurl
>>> 
```

`yaml`使用 macports 也很容易安装，只需`sudo port install py27-yaml`在终端中运行...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T01:30:08.517

这在 OSX 10.8.3 上对我有用，这与 pycurl 文档相反

```
sudo python setup.py install --with-ssl --curl-config=/usr/bin/curl-config 
```

# css - CSS：我似乎总是需要多个相同的媒体查询

> ID：16097265
> 
> 赞同：1
> 
> 时间：2013-04-19T04:34:52.217
> 
> 标签：css, responsive-design, media-queries, device-width

所以我似乎总是对智能手机做两个相同的媒体查询，一个是最小或最大宽度，另一个是最小或最大设备宽度（针对 iPhone 和其他东西）......

```
 @media only screen 
 and (min-device-width : 320px)
 and (max-device-width : 480px){

     // Some awesome phone-specific CSS

 }
 @media only screen 
 and (min-width : 320px)
 and (max-width : 480px){

     // THE SAME awesome phone-specific CSS as above

 } 
```

现在我不禁觉得这不是最有效的做事方式......特别是如果我要移动很多东西/重新设计我的网站/应用程序以特定于手机。尤其是当我必须为平板电脑尺寸再做两个时。

现在我真的需要两者吗？这有关系吗，到底有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:40:50.350

`width`和之间的区别`device-width`可能有点不清楚。我会尽力解释。

`device-width`指的是*设备本身*的宽度，也就是设备的屏幕分辨率。假设您的屏幕分辨率为 1280x800。这意味着屏幕是 1280 像素，所以它有`device-width`1280 像素。

相反，`width`宽度是指浏览器的视口大小。

在大多数情况下`width`，在创建响应式网页时更加通用（这是我建议您使用的方法），`device-width`但当您希望专门针对移动设备（而不是浏览器窗口非常小的桌面）时可能会很有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:41:41.187

设备宽度将仅针对设备而不是台式机，您不会使用任何宽度为 320x480 的台式机/笔记本电脑，因此您可以使用设备宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:37:50.173

您可能只是使用`max-width: 767px`这种方式来定位 iPad 下方的所有内容。

我也会指定动态宽度，这样您就不必区分单个设备。

# android - 如何在我的布局中将 2 个按钮放在同一位置

> ID：16097267
> 
> 赞同：5
> 
> 时间：2013-04-19T04:35:04.033
> 
> 标签：android, android-layout, android-intent, android-widget

我的 xml 布局中有如下所示的 My Table 行：

```
<TableRow 
          android:layout_marginTop="10dp"
            >

            <SeekBar
                android:id="@+id/seekBar1"
                android:layout_width="256dp"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/titlename"
                android:layout_="@+id/playbtn"
                android:layout_marginTop="4dp"
               />
             <Button
            android:id="@+id/playbtn"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_alignParentBottom="true"
            android:background="@drawable/play"
            android:layout_marginBottom="3dp"/>

        <Button
            android:id="@+id/pausebtn"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_toTopOf="@+id/playbtn"
            android:layout_alignParentBottom="true"
            android:background="@drawable/pause"
            android:layout_marginBottom="3dp"/>
        </TableRow> 
```

我的输出如下，

> ![在此处输入图像描述](https://i.stack.imgur.com/MhXX6.png)

我的要求是在我的布局中的相同位置显示播放暂停按钮？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T04:37:53.787

使用`FrameLayout`并将一个按钮放在另一个按钮上

像这样

```
<FrameLayout ... >
      <Button
            android:id="@+id/playbtn"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:background="@drawable/play"/>

        <Button
            android:id="@+id/pausebtn"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:background="@drawable/pause"/>

</FrameLayout> 
```

这会将暂停按钮放在播放按钮上。制作必要的按钮`visible`并`invisible`根据您的需要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:47:46.713

一次试试这个：

```
<TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <SeekBar
            android:id="@+id/seekBar1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".8" />

        <Button
            android:id="@+id/play"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".2"
           />
    </TableRow> 
```

主要活动

```
private boolean playing = false;
    Button play;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        play=(Button) findViewById(R.id.play);
        play.setBackgroundResource(R.drawable.pause);

        play.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                if(playing){
                    playing = false;
                    play.setBackgroundResource(R.drawable.pause);
                }
                else {
                    playing = true;
                    play.setBackgroundResource(R.drawable.play);
                }
            }
        });

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T05:09:17.083

尝试使用此布局。使用 LinearLayout 和 FrameLayout 的组合来实现所需的结果。

```
<TableRow 
      android:layout_marginTop="10dp">
<LinearLayout 
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal">
        <SeekBar
            android:id="@+id/seekBar1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:weight="1"
            android:layout_alignLeft="@+id/titlename"
            android:layout_="@+id/playbtn"
            android:layout_marginTop="4dp"
           />

 <FrameLayout 
  android:layout_width="wrap_content"
  android:layout_height="wrap_content" >
    <Button
        android:id="@+id/playbtn"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:background="@drawable/play"/>
    <Button
        android:id="@+id/pausebtn"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:background="@drawable/pause"/>

  </FrameLayout>
</LinearLayout>
</TableRow> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T04:59:41.177

为什么不能尝试合并？

看看这个。

[http://android-developers.blogspot.in/2009/03/android-layout-tricks-3-optimize-by.html](http://android-developers.blogspot.in/2009/03/android-layout-tricks-3-optimize-by.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T06:04:55.690

您不需要为它创建两个按钮。你可以用单身做到这一点。我创建了一个示例程序。我发现这是一种更清洁的方法。

MainActivity 的布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center">

    <Button
        android:id="@+id/buttonPlayPause"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

这是 MainActivity

```
package in.live.homam.imagebuttonexample;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

    private Button buttonPlayPause;

    private static final int resourceIdPlay = R.drawable.play;
    private static final int resourceIdPause = R.drawable.pause;
    private int resourceIdButton = resourceIdPlay;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        buttonPlayPause = (Button) findViewById(R.id.buttonPlayPause);
        buttonPlayPause.setBackgroundResource(resourceIdButton);
        buttonPlayPause.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if(resourceIdButton == resourceIdPlay) {
                    resourceIdButton = resourceIdPause;
                    Log.d("Tag", "Playing");
                }
                else {
                    resourceIdButton = resourceIdPlay;
                    Log.d("Tag", "Paused");
                }
                buttonPlayPause.setBackgroundResource(resourceIdButton);

            }
        });
    }

} 
```

# java - Servlet 将空数组传递给 JSP？

> ID：16097269
> 
> 赞同：0
> 
> 时间：2013-04-19T04:35:11.403
> 
> 标签：java, jsp, servlets, javabeans

我创建了一个使用登录页面、servlet、托管 bean 和 jsp 页面的 Web 应用程序。无论我尝试过什么，我都无法让 JSP 页面显示来自我的 servlet 的项目名称数组，这些项目名称是使用 bean 对象的数组列表获取的。我什至尝试在 servlet 中创建一个 bean 对象，然后只传递一个字符串变量。我已经尝试同时使用会话和请求，但无法使其正常工作，这是我的代码：

小服务程序：

```
package xxxx;

import java.io.IOException;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class ItemServlet extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
 ItemInventory iI = new ItemInventory();
 String[] itemNames = iI.getNames();
 HttpSession session = request.getSession();
 session.setAttribute("itemNames", itemNames);
 request.setAttribute("itemNames", itemNames);
 RequestDispatcher rd = request.getRequestDispatcher("/secureApps/ItemsCatalog.jsp");

 rd.forward(request, response);

}

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);

}

@Override
public String getServletInfo() {
    return "Short description";
}
} 
```

JSP：

```
<%@page import="xxxx.ItemInventory"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>

<%

String[] itemName = (String[])session.getAttribute("itemNames");

%>

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Item Catalog</title>
</head>
<body>
    <h1>Item Catalog</h1>
    <Select Name="itemNames">
        <% for(int i=0;i < itemName.length; i++){
         %>
         <option value ="<%= itemName[i]%>"><%= itemName[i]%></option>

         <%
         }
        %>

    </select> 
         ${itemBean.itemID}
</body>
</html> 
```

豆子

```
package xxxx;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class ItemBean {

String itemName;
String itemID;
String itemDescription;
String itemPrice;
String itemQuantity;

public ItemBean(){}

public ItemBean(String iD, String name, String description, String price, String quantity){

    this.itemID = iD;
    this.itemName = name;
    this.itemDescription = description;
    this.itemPrice = price;
    this.itemQuantity = quantity;

}
public String getItemName(){
    return itemName;
}

} 
```

ItemInventory 类：

```
package xxxx;

import java.io.BufferedReader;

import java.io.FileReader;
import java.io.IOException;

import java.util.ArrayList;

public class ItemInventory {

ArrayList <ItemBean> items = new ArrayList<ItemBean>();

public static void main(String[] args){}

public void ItemInventory() throws IOException{

  BufferedReader br = new BufferedReader(new FileReader("/catalog.txt")); 
  String text = null;

      while ((text=br.readLine())!=null){
          String[] itemArray = text.split(",");
          items.add(new ItemBean (itemArray[0], itemArray[1], itemArray[2], itemArray[3], itemArray[4]));

  }

   br.close();

} 

public Integer getSize(){
    Integer x = items.size();
    return x;
}

public String[] getNames(){
    int y = items.size();
    String[] itemNames = new String[y];
    for (int i = items.size() - 1; i >=0; i--){

        itemNames[i] = items.get(i).getItemName();
    }
    return itemNames;
}

} 
```

请帮忙，我已经在这几个小时了....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:51:56.887

您的 Servlet / JSP 代码没有任何问题。

在这里，`int y = items.size();`这将始终返回`0`，因为您之前已对其进行了初始化。

您误解了这里的一些概念。当你创建一个Class的对象时`main()`不会被直接执行。因此，在您的情况下，它返回空数组。

您应该从中删除代码，`main()`并且可能会编写一个单独的方法来执行此操作。此外，在构造函数中包含业务逻辑是不好的做法

示例：ItemInventory.java

```
public void fillItems(){
    try{
        BufferedReader br = new BufferedReader(new FileReader("/catalog.txt")); 
        String text = null;
        while ((text=br.readLine())!=null){
           String[] itemArray = text.split(","); 
           // you might want to check array size
           items.add(new ItemBean (itemArray[0], itemArray[1], itemArray[2], itemArray[3], itemArray[4]));

        }

        br.close();
    }catch(Exception e){
      e.printStackTrace();
    }
} 
```

在 Servlet 中

```
ItemInventory iI = new ItemInventory();
iI.fillItems();
String[] itemNames = iI.getNames(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:43:09.417

您没有提供`ItemInventory`很难确认是否`iI.getNames()`真的返回包含数据的数组的代码。

代码对我来说看起来是正确的，所以如果`iI.getNames()`返回数据它应该可以工作。

检查数组的长度。

我还看到您期望`itemBean`在会话或请求范围内提供但未提供。

也`itemBean`没有在 servlet 上使用。

我错过了什么吗？

# javascript - 在javascript中向右移动数组

> ID：16097271
> 
> 赞同：20
> 
> 时间：2013-04-19T04:35:27.330
> 
> 标签：javascript

我有这个数组：

```
var arr1 = ['a1', 'a2', 'a3', 'a4', 'a5']; 
```

我需要将它向右移动 2 个位置，例如

```
arr1 = ['a4', 'a5', 'a1', 'a2', 'a3']; 
```

这适用于左移：

```
arr1 = arr1.concat(arr1.splice(0,2)); // shift left by 2 
```

我得到：

```
arr1 = ['a3', 'a4', 'a5', 'a1', 'a2']; 
```

但是我不知道怎么做右移...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-19T04:38:25.517

向右移动到`N`位置 == 向左移动到`array.length - N`位置。

因此，要为您的阵列向右移动 2 个位置 - 只需将其向左移动 3 个位置。

一旦你已经有了另一个功能，就没有理由去实现另一个功能。加上`shift/unshift/pop`循环中的解决方案几乎不会像`splice + concat`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-19T04:38:42.097

您可以使用`.pop()`获取最后一项并将`.unshift()`其放在前面：

```
function shiftArrayToRight(arr, places) {
    for (var i = 0; i < places; i++) {
        arr.unshift(arr.pop());
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-19T05:14:43.353

使用`.concat()`您正在构建一个新数组，并替换旧数组。这样做的问题是，如果您对 Array 有其他引用，它们将不会被更新，因此它们仍将保留未移位的版本。

要进行右移并实际改变现有数组，您可以这样做：

```
arr1.unshift.apply(arr1, arr1.splice(3,2)); 
```

* * *

该`unshift()`方法是可变参数的，`.apply`允许您传递存储在类似数组的集合中的多个参数。

因此，`.splice()`通过删除最后两个并返回它们来`.unshift()`改变数组，并通过将返回的添加`.splice()`到开头来改变数组。

* * *

左移将被重写，类似于右移，因为`.push()`它也是可变参数：

```
arr1.push.apply(arr1, arr1.splice(0,2)); 
```

# python - 使用 line.rfind 查找变化的变量

> ID：16097273
> 
> 赞同：0
> 
> 时间：2013-04-19T04:35:34.783
> 
> 标签：python, datetime

我正在使用 line.rfind 来查找星期几。我每天运行的脚本，我总是需要在一些html脚本中找到第二天。例如，如果今天是星期五，我需要使用 line.rfind 在 html 代码中查找“星期六”。我尝试了下面的脚本......但由于明显的原因它没有工作，因为它试图在单引号内找到所有内容。

```
#!usr/bin/env python

import urllib
from datetime import datetime
from datetime import timedelta

date = datetime.now()
date1 = date + timedelta(days=1)

class city :
        def __init__(self, city_name, link, latitude, longitude) :
                self.name = city_name
                self.url = link
                self.low0 = 0
                self.high1 = 0
                self.high2 = 0
                self.low1 = 0
                self.low2 = 0
                self.lat = latitude
                self.long = longitude

        def retrieveTemps(self) :
                filehandle = urllib.urlopen(self.url)

                # get lines from result into array
                lines = filehandle.readlines()

                # (for each) loop through each line in lines
                line_number = 0 # a counter for line number
                for line in lines:
                        line_number = line_number + 1 # increment counter

                        # find string, position otherwise position is -1

                        position0 = line.rfind('title="%(x)" % {"x": date1.strftime("%A")}') 
```

我试图从中提取一天的 html 代码中的确切行是......

```
<abbr title="Saturday">Sat</abbr> 
```

我需要找到 'title="Saturday"' 而不是 "Saturday"，因为有时会在这一行之前提到星期几。有人对如何解决这个问题有任何想法吗？任何帮助将非常感激！！谢谢！

编辑——添加接下来的几行代码。

```
# string is found in line
if position0 > 0 :
        self.low0 = lines[line_number + 4].split('&')[0].split('>')[-1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:43:45.520

我猜你的问题是你的字符串替换不是正确的python语法。

```
>>> from datetime import datetime
>>> date1 = datetime.now()
>>> 'title="%(x)" % {"x": date1.strftime("%A")}'
'title="%(x)" % {"x": date1.strftime("%A")}'
>>> 'title="{}"'.format(date1.strftime("%A"))
'title="Friday"' 
```

无关，但我注意到的另一件事是：

```
line_number = 0 # a counter for line number
for line in lines:
  line_number = line_number + 1 # increment counter 
```

你应该更喜欢：`for line_number, line in enumerate(lines):`

# playframework-2.0 - 播放框架路由文件有问题

> ID：16097276
> 
> 赞同：0
> 
> 时间：2013-04-19T04:35:50.377
> 
> 标签：playframework-2.0

我正在关注在线播放框架教程，但路由有一些问题

```
GET  /                  controllers.Application.index()` 
```

我对此没有任何问题，因为它并不复杂。但是当我看到以下内容时，它变得复杂了

```
GET  /assets/*file      controllers.Assets.at(path="/public", file) 
```

我因为那`Assets.at(path="/public", file)` 部分而感到困惑。这两个路由有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:09:33.523

一切都在[HTTP routing **doc**](http://www.playframework.com/documentation/2.1.1/JavaRouting)中进行了描述，都`routes`指向`actions`first 不带任何参数，这很清楚。

第二个有两个参数：`path`is `parameter with fixed value`(according to the doc) 和`file`is (doc again) `dynamic part spanning several /`。

提示：创建用于学习目的的小项目并使用不同类型的参数（ 、 等）测试路由`fixed`以`default`获得`spanning`更多经验 - 理解路由非常重要。

# php - 如何在 PHP 函数中将 While 循环中的 mysqli_fetch_assoc 作为变量返回？

> ID：16097281
> 
> 赞同：1
> 
> 时间：2013-04-19T04:36:37.423
> 
> 标签：php, mysql

我有这个 PHP 函数：

```
function userParent($Username)
{
global $con;
$Result = mysqli_query($con, "SELECT Username FROM Family WHERE Parent = '$Username' LIMIT 10");
$row = mysqli_fetch_assoc($Result);
return $row; 
} 
```

该函数应该给我10行数组，但为什么我只有一个数组值？我试图测试函数括号外的代码并尝试像这样添加 WHILE 循环：

```
while ($row = mysqli_fetch_assoc($Result)){
    print_r($row);
} 
```

它有效。我得到了数组格式的 10 行。但它会将结果打印到屏幕上。如何使其成为变量，以便可以在函数中返回？

谢谢。

更新：根据菲尔的回答，现在这是我的完整代码：

```
<?php
function userParent(mysqli $con, $username) {
    $stmt = $con->prepare('SELECT Username FROM Family WHERE Parent = ? LIMIT 10');
    $stmt->bind_param('s', $username);
    $stmt->execute();
    $res = $stmt->get_result();
    return $res->fetch_all(MYSQLI_ASSOC);
}

$DbServer = 'localhost';
$DbUser = 'username';
$DbPassword = 'password';
$DbName = 'dbname';
$mysqli = new mysqli($DbServer, $DbUser, $DbPassword, $DbName);

$arrayParent = userParent($mysqli, 'root');
print_r($arrayParent);

?> 
```

但我收到此错误消息：

> 致命错误：在第 6 行的 /home/myhome/public_html/test.php 中调用未定义的方法 mysqli_stmt::get_result()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:41:55.417

使用`return`：

```
function userParent(mysqli &$dbms, $username){
    // You need to "escape" strings, which you would use in direct queries.
    // OR BETTER: use mysqli prepared statements with parameter binding.
    $username = mysqli_real_escape_string($dbms, $username);

    $result = mysqli_query($dbms, "SELECT Username FROM Family WHERE Parent = '$username' LIMIT 10");

    // Create temporary array for resultset:
    $buffer = array();

    // Fetch data to temporary buffer:
    while ($row = mysqli_fetch_assoc($result)){
        $buffer[] = $row;
    }

    // Free result set:
    $result->free();

    // Return buffer to global scope:
    return $buffer;
}

$users = userParent($con, 'John');

var_dump($users); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T04:43:50.300

试试[`mysqli_result::fetch_all`](http://www.php.net/manual/en/mysqli-result.fetch-all.php)吧

```
function userParent(mysqli $con, $username) {
    $stmt = $con->prepare('SELECT Username FROM Family WHERE Parent = ? LIMIT 10');
    if ($stmt === false) {
        throw new Exception($con->error, $con->errno);
    }
    $stmt->bind_param('s', $username);
    $stmt->execute();
    $res = $stmt->get_result();
    return $res->fetch_all(MYSQLI_ASSOC);
} 
```

然后像这样调用它

```
$parents = userParent($mysqli, 'some username'); 
```

如果您不知道准备好的语句和参数绑定，请阅读这些

*   [http://www.php.net/manual/en/mysqli.prepare.php](http://www.php.net/manual/en/mysqli.prepare.php)
*   [http://www.php.net/manual/en/mysqli-stmt.bind-param.php](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)

## 更新

显然（未记录），该`mysqli_stmt::get_result()`方法仅在使用`mysqlnd`驱动程序时可用。如果您无法使用此驱动程序，请尝试此替代方法

```
function userParent(mysqli $con, $username) {
    $stmt = $con->prepare('SELECT Username FROM Family WHERE Parent = ? LIMIT 10');
    if ($stmt === false) {
        throw new Exception($con->error, $con->errno);
    }

    $stmt->bind_param('s', $username);
    $stmt->execute();

    $parent = null;
    $parents = array();
    $stmt->bind_result($parent);
    while($stmt->fetch()) {
        $parents[] = $parent;
    }
    return $parents;
} 
```

# jquery - jQuery - 将 .js 文件的结果放入 html 中的特定位置

> ID：16097282
> 
> 赞同：1
> 
> 时间：2013-04-19T04:36:58.557
> 
> 标签：jquery, getscript, insertafter

我希望在我的网站上放置一个具有嵌入代码的小部件，例如

`<script src="http://www.external-site.com/widget.js?id=123" type="text/javascript" language="javascript"></script>`

在特定的 div 之后。

我只希望小部件出现在与其他页面使用相同模板的某个 url 上，所以我想使用 jQuery 检查某个 url，然后在特定位置呈现小部件。

为什么这不起作用？

```
 $(function() {
        if ( document.location.href.indexOf('/url-to-check/') > -1 ) {
         $('#myDiv').after('<script src="http://www.external-site.com/widget.js?id=123" type="text/javascript" language="javascript"></script>');
       }    
                }); 
```

换句话说，为什么我不能在 after 语句中使用 script 标签？我还能如何实现这一目标？

谢谢

# c# - CheckBoxList 项之间的行

> ID：16097283
> 
> 赞同：0
> 
> 时间：2013-04-19T04:36:59.467
> 
> 标签：c#, asp.net, css, checkboxlist

我正在寻找用于在项目之间添加行的 CSS 代码。`CheckBoxList`有人可以帮我如何在 a 的项目之间添加分隔线`CheckBoxList`吗？

下面是我正在寻找的格式的示例图像。

![在此处输入图像描述](https://i.stack.imgur.com/3Wv5U.jpg)

下面是我的`aspx`代码`CheckBoxList`：

```
<td colspan="5" id="Field_Referral_Codes">
  <asp:Panel ID="Panel1" runat="server"  BorderWidth="1" Width="330px" Height="150px" ScrollBars="Vertical">
  <asp:CheckBoxList ID="chklistReferralCodes" runat="server">
  </asp:CheckBoxList>
 </asp:Panel>
  </td> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:40:42.213

要在行之间添加行，您可以在后面的代码中`CssClass`为项目指定一个，如下所示：`CheckBoxList`

```
ListItem me = new ListItem("majid");
me.Attributes["class"] = "checks";
chklistReferralCodes.Items.Add(me); 
```

然后在 CSS 中：

```
.checks 
{
border-bottom: 1px solid #BDBDBD;
} 
```

# java - 当我创建具有不同类名和不同构造函数名称的对象时如何调用方法

> ID：16097288
> 
> 赞同：1
> 
> 时间：2013-04-19T04:37:14.180
> 
> 标签：java

```
package override;

class Super
{
    public void dosomething()
    {
        System.out.println("hello Super");
    }
}

class sub 
    extends Super
{
    @Override
    public void dosomething()
    {
        System.out.println("hello sub");
    }
}

public class Main 
{
    public static void main(String[] args) 
    {
        Super p1=new Super();
        Super p2=new sub();  // Please explain why this line is correct as constructor and //class name should be same
        p1.dosomething();
        p2.dosomething();
    }
} 
```

当我创建具有不同类名和不同构造函数名称的对象时，如何调用方法。就像上面突出显示的语句有不同的调用构造函数的方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:51:29.063

```
 Super p2=new sub();
 p2.doSomething(); 
```

这称为运行时多态性（方法覆盖）。

**编译器不调用由变量类型定义的方法（即本例中的 super）。这种行为被称为虚拟方法调用，并展示了 Java 语言中重要的多态特性的一个方面。**

[http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)

对象 p2 是 Super 类型。但是 p2 指的是 sub。所以编译器在运行时运行子类中的 doSomething() 。超类有方法 doSomething()。

但是如果你在 sub 中说 eat()

```
Super p2=new sub();
p2.eat(); // not possible 
```

超类没有方法eat()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:05:20.347

p2 只是引用对象 new sub() 对象。现在 p2 只能调用 Super 类中存在的那些方法，而 Sub 已经覆盖了它们。这是运行时多态性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T04:41:46.270

多态性是您正在使用的。

如果我们将 Super 更改为 Animal 并将 Sub 更改为 Cat 那么您有：

```
Animal p1 = new Cat(); 
```

你能把猫当作动物吗？当然，因为猫是动物（因为猫扩展了动物）。

当您调用`doSomething`方法时，VM 会查看您使用的类型并在`new`那里查找方法。如果找到它，那么它会调用那个，否则它会查看它的父类。这称为方法覆盖，这就是多态性的工作方式。

# ruby-on-rails - Ruby：运行多个线程的问题？

> ID：16097289
> 
> 赞同：0
> 
> 时间：2013-04-19T04:37:23.700
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, multithreading, thread-safety

运行多个线程有什么问题吗？

当我使用 action1 加载页面时，它可以工作。

**家庭控制器**

```
def action1
    threads = []
    threads << Thread.new {@lub = client.tag_recent_media('tag1')}
    Thread.new{@tags = client.tag_recent_media('encorebeach')}
    Thread.new{@location = client.location_recent_media('16565')}

    threads.each(&:join)  
end 
```

**主页视图**

```
<% (@lub+@tags+@location).each do |media| %>
<%= media %>
<% end %> 
```

这是另一个具有不同视图的控制器

**另一个控制器**

```
def action1
    threads2 = []
    threads2 << Thread.new {@lub2 = client.tag_recent_media('tag1')}
    Thread.new{@tags2 = client.tag_recent_media('encorebeach')}
    Thread.new{@location2 = client.location_recent_media('16565')}

    threads2.each(&:join)  
end 
```

**另一种观点**

```
<% (@lub2+@tags2+@location2).each do |media| %>
<%= media %>
<% end %> 
```

对于第二个输出，我得到一个错误

```
undefined method `+' for nil:NilClass 
```

我认为线程有问题。有人可以帮助我了解为什么会这样吗？是不是因为我已经在首页执行了一个线程，然后当我想转到另一个页面时，它又运行了一个线程，它不起作用？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:59:20.823

`threads`仅包含您的第一个线程。在您使用视图中的实例变量之前，您的第一个方法的线程已完成，这纯属幸运。

```
threads = []
threads << Thread.new {@lub = client.tag_recent_media('tag1')}
threads << Thread.new{@tags = client.tag_recent_media('encorebeach')}
threads << Thread.new{@location = client.location_recent_media('16565')} 
```

甚至更简单：

```
threads = [
  Thread.new{@lub = client.tag_recent_media('tag1')},
  Thread.new{@tags = client.tag_recent_media('encorebeach')},
  Thread.new{@location = client.location_recent_media('16565')}
] 
```

会完成你想要的。

与仅在控制器线程中运行它们相比，您很可能不会从中获得太多性能。您甚至可能会破坏数据库服务器，反而会降低它的速度。一定要衡量线程是否能给你带来任何性能，并记住使用线程时有很多陷阱。

# android - 智能手机长时间睡眠后 GPS 未启用

> ID：16097290
> 
> 赞同：0
> 
> 时间：2013-04-19T04:37:31.230
> 
> 标签：android, gps, wakelock

我的应用程序设计为大约每 30 分钟记录一次 GPS 位置。这是作为后台服务完成的，我还包括一个唤醒锁，即使在屏幕关闭或用户按下电源按钮进入睡眠模式时也能保持应用程序运行。

该应用程序似乎在大多数情况下都可以工作，但我注意到在很多情况下它无法记录设备长时间关闭的时间，比如一个小时。如果我在很长一段时间后打开设备然后启动谷歌地图，似乎 GPS 会被激活，然后在我的应用程序中开始记录。

会不会有什么东西会在长时间的睡眠期间禁用 GPS？在这个延长的睡眠期之后，我如何判断我的应用程序是否真的在运行？即使启用了唤醒锁，Android 是否会在很长一段时间后关闭应用程序？

我在 Android 2.3 上运行它

# javascript - Twitter bootstrap：单击按钮时使用 span12 展开

> ID：16097291
> 
> 赞同：0
> 
> 时间：2013-04-19T04:37:31.383
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在为我的项目使用引导程序。

这是我设计布局所遵循的结构-

```
<div class="row-fluid">
<div class="expand-this">
<div class="span8">
<div class="row-fluid">
<div class="span6 pull-left">
<b>Display Name</b>
</div>
<div class="span6 pull-right">
<input type="text"/>
</div>
</div>
</div>
</div>
<div class="hide-accordion">
<div class="span4">
<div class="block">
...some information..
</div>
</div>
</div>
<button class="button-hiding"></button> 
```

在这里你可以看到我连续对齐两个块。`row-fluid`使用`span4`动态值的第二个跨度。所以我试图用按钮隐藏它。

**jQuery-**

```
$('.hide-accordion').hide();
$(function () {
    $('.button-hiding').click(function () {
        $('.hide-accordion').toggle(this);
    });
}); 
```

这就是工作正常。我在窗口加载时隐藏了这个手风琴。

**我想要的是-**

当手风琴被隐藏时，我希望 span8 采用全宽，`span12`一旦我点击按钮，手风琴就会出现。那么它应该采用原始`span8`宽度。

我也用 jQuery 试过这个-

```
$('.hide-accordion').hide();
$(function () {
    $('.button-hiding').click(function () {
        $('.hide-accordion').toggle(this);
        $('.Expand-this>div .span8').removeClass('span8');
        $(this).addClass('span12');
    });
}); 
```

但没有运气，救命？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:20:49.360

试试这个，

HTML:-

```
 <div class="row-fluid">
    <div class="span8 expand-this">
        <div class="row-fluid">
            <div class="span6 pull-left">
                <b>Display Name</b>
            </div>
            <div class="span6 pull-right">
                <input type="text"/>
            </div>
        </div>
    </div>
    <div class="span4 hide-accordion">
        <div class="block">
            ...some information..
        </div>
    </div>
<div>
<button class="button-hiding"></button> 
```

和jQuery： -

```
$(function () {
    $('.hide-accordion').hide();
    $(".expand-this").removeClass("span8").addClass("span12")
    $('.button-hiding').click(function () {
        if($(".expand-this").hasClass('span8')){
            $(".expand-this").removeClass("span8").addClass("span12")
        }else{
            $(".expand-this").removeClass("span12").addClass("span8")
        }
        $('.hide-accordion').toggle();
    });
}); 
```

# jquery - Jquery 迷你图在 Jquery 移动可折叠集中无法正确呈现

> ID：16097292
> 
> 赞同：0
> 
> 时间：2013-04-19T04:37:39.047
> 
> 标签：jquery, jquery-mobile, sparklines, jquery-mobile-pageshow, jquery-mobile-collapsible

我想在 Jquery 移动可折叠集中显示一些迷你图，但是这些图未正确呈现：

大多数 html 代码是由 jquery 函数构建的，包括那些生成迷你图的函数。

它不会在第一时间显示“图形”，而是显示绘制迷你图的文字序列，然后如果再次执行该函数，迷你图将正确地用图形呈现。为“listview”ul 生成“li”元素的函数设置为 10 秒间隔。

请参阅下面的附加代码和屏幕截图：

```
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js"></script>
    <script src="jquery.sparkline.min.js"></script>
    <script type="text/javascript">
        //set repeating time
        setInterval(populateList, 10000);

        $(document).on('pageinit',function(){ 
            //build the basic html structure
            buildHtml();
            $('#domain').trigger("create");
            populateList();
        });

        function buildHtml(){
            var domain_list = "";
            domain_list += "<div id=\""+ "this.domain" +"\" data-role=\"collapsible\" data-collapsed=\"false\" data-mini=\"true\" data-collapsed-icon=\"arrow-r\" data-expanded-icon=\"arrow-d\" data-theme=\"a\">";
            domain_list += "<h2>"+ "this.domain" +"</h2>";
            domain_list += "<div data-role=\"collapsible-set\" data-theme=\"d\">";
            domain_list += "<div data-role=\"collapsible\" data-collapsed=\"false\" data-mini=\"true\">";
            domain_list += "<h2>Queueing</h2>";
            domain_list += "<ul data-role=\"listview\"  id=\""+ "domainqueueing"+"\" data-inset=\"false\">";
            domain_list += "</ul></div>";

            var show_all_queues = "";
            show_all_queues +=  "<div data-role=\"collapsible\" data-mini=\"true\">";
            show_all_queues += "<h2>Show all queues</h2>";
            show_all_queues +=  "<ul data-role=\"listview\"  id=\"domainallqueues\" data-filter=\"true\" data-filter-theme=\"c\" data-divider-theme=\"d\" >";
            show_all_queues += "</ul></div>";

            domain_list += show_all_queues+ "</div></div>";

            $('#domain').html(domain_list);

        }

        function populateList(){

            //build "li"s
            var str = "<li data-theme = \"c\"><h3>" + "this.queue1" + "</h3><p>Last Enqueue Time: " + "this.timeOnQueue1" + " ago</p><p class=\"dynasparkline\">"+historyCounts()+"</p><span class=\"ui-li-count\">" + 123 + "</span></li>"
            var str1 = "<li data-theme = \"d\"><h3>" + "this.queue1" + "</h3><p>Last Enqueue Time: " + "this.timeOnQueue1" + " ago</p><p class=\"dynasparkline\">"+historyCounts()+"</p><span class=\"ui-li-count\">" + 123 + "</span></li>"
            //just for repetition
            var doubble = str+str1;//just for repetition
            var triple = str+str1+str;

            $('#domainqueueing').html(doubble);
            $('#domainallqueues').html(triple);
            //update jquery mobile listview
            $('#domainqueueing').listview('refresh');
            $('#domainallqueues').listview('refresh');
            //trigger the sparklines
            $('.dynasparkline').sparkline();
        }
        //random generate some numbers for hisotry graph
        function historyCounts(){
            var str = "";
            for(var i=0; i<60; i++){
                var num = Math.floor((Math.random()*100)+1); //Return a random number between 1 and 100

                str += num;
                if(i != 59){
                    str+=",";
                }
            }
            return str;
        }
    </script>
</head>
<body>
    <div data-role="page" id="indexPage">
        <div data-role="header" id="queueheader">
            <h1>Queues</h1>
        </div>
        <br/>
        <div data-role="content" id="domain">

        </div>
        <div data-role="footer" id="statusbar">
            <h4>Last Update: <span id="lastupdate"></span></h4>
        </div>
    </div>
</body> 
```

![没有图表显示，而是一堆数字](https://i.stack.imgur.com/DWb4u.jpg) ![正确显示](https://i.stack.imgur.com/OHGxa.jpg)

任何建议表示赞赏！在此先感谢！

另外两个显示可折叠 div 的屏幕截图显示数字而不是图形： ![在此处输入图像描述](https://i.stack.imgur.com/6kG93.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/dVNAF.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:54:52.257

您唯一的问题是**[pageinit](http://api.jquerymobile.com/pageinit/)**事件。

jQuery Mobile 在页面初始化期间运行图形 jQuery 插件时出现问题。在页面初始化期间，页面高度通常为 0 或一些较小的值，这会影响插件。所以通常只有可用的页面事件是**[pageshow](http://api.jquerymobile.com/pageshow/)**。

这是您的代码的一个工作示例：http: [//jsfiddle.net/Gajotres/23ccn/](http://jsfiddle.net/Gajotres/23ccn/)

**HTML：**

```
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.css" />
    <script src="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js"></script>
    <script src="http://omnipotent.net/jquery.sparkline/2.1.1/jquery.sparkline.min.js"></script>
</head>
<body>
    <div data-role="page" id="indexPage">
        <div data-role="header" id="queueheader">
            <h1>Queues</h1>
        </div>
        <br/>
        <div data-role="content" id="domain">

        </div>
        <div data-role="footer" id="statusbar">
            <h4>Last Update: <span id="lastupdate"></span></h4>
        </div>
    </div>
</body> 
```

**Javascript：**

```
$(document).on('pageshow', '#indexPage', function(){       
    //build the basic html structure
    buildHtml();
    populateList();  
});

//set repeating time
setInterval(populateList, 2000);

function buildHtml(){
    var domain_list = "";
    domain_list += "<div id=\""+ "this.domain" +"\" data-role=\"collapsible\" data-collapsed=\"false\" data-mini=\"true\" data-collapsed-icon=\"arrow-r\" data-expanded-icon=\"arrow-d\" data-theme=\"a\">";
    domain_list += "<h2>"+ "this.domain" +"</h2>";
    domain_list += "<div data-role=\"collapsible-set\" data-theme=\"d\">";
    domain_list += "<div data-role=\"collapsible\" data-collapsed=\"false\" data-mini=\"true\">";
    domain_list += "<h2>Queueing</h2>";
    domain_list += "<ul data-role=\"listview\"  id=\""+ "domainqueueing"+"\" data-inset=\"false\">";
    domain_list += "</ul></div>";

    var show_all_queues = "";
    show_all_queues +=  "<div data-role=\"collapsible\" data-mini=\"true\">";
    show_all_queues += "<h2>Show all queues</h2>";
    show_all_queues +=  "<ul data-role=\"listview\"  id=\"domainallqueues\" data-filter=\"true\" data-filter-theme=\"c\" data-divider-theme=\"d\" >";
    show_all_queues += "</ul></div>";

    domain_list += show_all_queues+ "</div></div>";

    $('#domain').html(domain_list).trigger("create");    
}

function populateList(){

    //build "li"s
    var str = "<li data-theme = \"c\"><h3>" + "this.queue1" + "</h3><p>Last Enqueue Time: " + "this.timeOnQueue1" + " ago</p><p class=\"dynasparkline\">"+historyCounts()+"</p><span class=\"ui-li-count\">" + 123 + "</span></li>"
    var str1 = "<li data-theme = \"d\"><h3>" + "this.queue1" + "</h3><p>Last Enqueue Time: " + "this.timeOnQueue1" + " ago</p><p class=\"dynasparkline\">"+historyCounts()+"</p><span class=\"ui-li-count\">" + 123 + "</span></li>"
    //just for repetition
    var doubble = str+str1;//just for repetition
    var triple = str+str1+str;

    $('#domainqueueing').html(doubble);
    $('#domainallqueues').html(triple);
    //update jquery mobile listview
    $('#domainqueueing').listview('refresh');
    $('#domainallqueues').listview('refresh');
    //trigger the sparklines
    $('.dynasparkline').sparkline();
}
//random generate some numbers for hisotry graph
function historyCounts(){
    var str = "";
    for(var i=0; i<60; i++){
        var num = Math.floor((Math.random()*100)+1); //Return a random number between 1 and 100

        str += num;
        if(i != 59){
            str+=",";
        }
    }
    return str;
} 
```

# c# - log4net 自定义属性不适用于多线程应用程序

> ID：16097294
> 
> 赞同：1
> 
> 时间：2013-04-19T04:37:54.450
> 
> 标签：c#, log4net

我有一个使用 log4net AdoNetAppender (DB appender) 将我的日志写入数据库的应用程序。它正在将记录写入数据库，但自定义字段均为 NULL。它们在我的单元测试中使用相同的代码可以正常工作，但在应用程序运行时调用它们时却不行。它是一个多线程应用程序，用于处理来自消息队列的消息。

关于具有多线程应用程序的 DB appender 的自定义属性，是否存在任何已知问题（任何人都知道）？这是我对为什么在启动应用程序时它们不工作的唯一猜测，因为我无法在单元测试等中重现。

默认的 log4net 字段很好。

我在单例中设置自定义属性值：

```
 public sealed class Logger
    {
        private static readonly Logger instance = new Logger();
        public static readonly ILog Log = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

        /// <summary>
        /// Static constructor which sets the properties for the database logging using log4net. This enables analysts to view the log events
        /// inside the database as well as in the local application log file. 
        /// </summary>
        static Logger()
        {
            GlobalContext.Properties["Application"] = "MyApp";
            GlobalContext.Properties["ApplicationVersion"] = Utility.GetApplicationVersion();
            var windowsHost = System.Net.Dns.GetHostName();
            if (!String.IsNullOrEmpty(windowsHost))
                LogicalThreadContext.Properties["Host"] = windowsHost;
            //ThreadContext.Properties["LogTime"] = DateTime.Now;
            var windowsIdentity = System.Security.Principal.WindowsIdentity.GetCurrent();
            if (windowsIdentity != null)
                GlobalContext.Properties["CreatedBy"] = windowsIdentity.Name;
        }

        private Logger()
        {

        }

        public static Logger Instance
        {
            get { return instance; }
        }
    } 
```

编辑：

发现这将尝试添加额外的 log4net 调试。

```
http://logging.apache.org/log4net/release/faq.html#internalDebug 
```

在 log4nets 内部日志中没有看到任何错误，所以仍然不清楚发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:09:42.363

我终于弄明白了。这就是我们尝试全局设置自定义属性的方式。相反，我在我的任何实例绑定到队列和处理消息之前在应用程序启动时设置属性。这似乎做到了....不知道为什么我一开始没有想到这一点。只需使用 log4net GlobalContext 并像魅力一样工作。

--S

# android - Android的查询建议

> ID：16097296
> 
> 赞同：0
> 
> 时间：2013-04-19T04:38:06.090
> 
> 标签：android, algorithm, autocomplete

有谁知道谷歌在 android 的查询建议中使用什么算法（当您开始输入时从数据库或数组中检索文本的自动完成功能）？

我真的很想知道实现这一目标所使用的算法，但我还无法从任何地方找到有关它的信息！

谢谢

# python - Numpy 在计算归一化马氏距离时指出该无效值

> ID：16097298
> 
> 赞同：3
> 
> 时间：2013-04-19T04:38:18.983
> 
> 标签：python, numpy, scipy

## **注意**：

这是我的数据挖掘课上的家庭作业。

我将在此 SO 帖子中放置相关代码片段，但您可以在[http://pastebin.com/CzNFbLJ2找到我的整个程序](http://pastebin.com/CzNFbLJ2)

我用于这个程序的数据集可以在[http://archive.ics.uci.edu/ml/datasets/Iris找到](http://archive.ics.uci.edu/ml/datasets/Iris)

* * *

所以我得到：RuntimeWarning：sqrt return np.sqrt(m) 中遇到的无效值

我试图找到给定虹膜数据集的平均马氏距离（对于原始数据集和标准化数据集）。该错误仅发生在数据集的规范化版本上，这让我想知道我是否错误地理解了规范化的含义（无论是在代码中还是在数学上）。

我认为归一化意味着向量的每个分量都除以它的向量长度（导致向量加起来为 1）。我发现了这个 SO question [How to normalize a 2-dimensional numpy array in python less verbose？](https://stackoverflow.com/questions/8904694/how-to-normalize-a-2-dimensional-numpy-array-in-python-less-verbose)并认为它符合我的规范化概念。但是现在我的代码报告说标准化数据集上的马氏距离是 NAN

```
def mahalanobis(data):
   import numpy as np;
   import scipy.spatial.distance;
   avg   = 0
   count = 0

   covar = np.cov(data, rowvar=0);
   invcovar = np.linalg.inv(covar)

   for i in range(len(data)):
      for j in range(i + 1, len(data)):
         if(j == len(data)):
            break
         avg += scipy.spatial.distance.mahalanobis(data[i], data[j], invcovar)
         count += 1
   return avg / count

def normalize(data):
   import numpy as np
   row_sums = data.sum(axis=1)
   norm_data = np.zeros((50, 4))
   for i, (row, row_sum) in enumerate(zip(data, row_sums)):
      norm_data[i,:] = row / row_sum
   return norm_data 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:47:02.630

可能为时已晚，但请查看我们的教科书“数据挖掘简介”中的第 64-65 页。有一个名为“标准化或标准化”的部分，它解释了 Hearne 正在寻找的标准化数据的概念。

基本上，标准化数据集 x' = (x - mean(x)) / standardDeviation(x)

既然我看到您使用的是 python，以下是使用 SciPy 的方法：

```
normalizedData = (data - data.mean(axis=0)) / data.std(axis=0, ddof=1) 
```

来源： http: [//mail.scipy.org/pipermail/numpy-discussion/2011-April/056023.html](http://mail.scipy.org/pipermail/numpy-discussion/2011-April/056023.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T07:54:54.180

您可以在不使用`pdist()`for 循环的情况下进行距离计算：

```
from sklearn import datasets
iris = datasets.load_iris()
from scipy.spatial.distance import pdist, squareform
print squareform(pdist(iris.data, 'mahalanobis')) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T14:04:16.623

在这种情况下，归一化可能确实意味着减去均值和缩放，因此数据具有单位协方差矩阵。

但是，要将数据集中的每个向量缩放到单位范数，请使用：`norm_data=data/np.sqrt(np.sum(data*data,1))[:,None]`.

您需要除以每个向量的 L2 范数，这意味着将每个元素的值平方，然后取和的平方根。广播允许您避免显式编码循环（请参阅您引用的问题的答案：[https](https://stackoverflow.com/a/8904762/1149913) ://stackoverflow.com/a/8904762/1149913 ）。

# python - 为python脚本创建可执行文件时出错

> ID：16097310
> 
> 赞同：0
> 
> 时间：2013-04-19T04:39:12.267
> 
> 标签：python, py2exe, pyinstaller, cx-freeze, pybel

我已经使用 python2.7 创建了一个应用程序，也使用了 pyqt for gui。我还使用 pybel 模块进行计算。

我的应用程序 python 文件正常工作。但是当我尝试从该 python 文件创建可执行文件时，它给了我错误。

![在此处输入图像描述](https://i.stack.imgur.com/Fzit2.jpg)

我也尝试过使用 py2eye、cx_freeze 和 pyinstaller。

我想知道在命令提示符下键入“python ui_MolecularTest.py”后python文件是否运行良好，为什么我无法从中创建可执行文件？

谢谢

# php - 除非勾选复选框，否则php表单将不会提交

> ID：16097312
> 
> 赞同：0
> 
> 时间：2013-04-19T04:39:15.973
> 
> 标签：php, mysql

除非勾选复选框，否则我的表单无法提交，我真的不确定这是为什么。

此外，如果选中该复选框，则无法更新数据库，则我正在使用的功能或查询没有问题，因为我已直接在数据库上检查过。

任何帮助将不胜感激，如果我可以提供更多信息，请随时提出任何问题

```
<?php
include 'core/init.php';
protect_page();
include 'includes/overall/header.php';
$page = $_GET['page'];
$email = $_GET['user'];
$p_id = project_id_from_project_name($page);
$supervisor = supervisor_from_email($email, $p_id);
$user_id = user_id_from_email($email);
?>
<h1>Add A User to the Project</h1>

<?php
if (isset($_GET['form_submit']) === true && empty($_GET['form_submit']) === false) {
    echo 'You\'re user has been added successfully!<br /><br />';
    echo '<a href="projects.php">Please click here to return to Your Projects</a>';
} else {
    if (empty($_POST) === false && empty($errors) === true) {
        $page = $_GET['page'];  
        $p_id = project_id_from_project_name($page);
        $supervisor_update = ($_POST['supervisor'] == 1) ? 1 : 0;

        $update_project_member_data = array(
            'project_id'            => "$p_id",
            'project_name'          => "$page",
            'project_member_id'     => "$user_id",
            'supervisor'            => "$supervisor_update"
        );

        update_project_member_data($p_id, $update_project_member_data);

        header('Location: update_user.php?page=' . $page .'&user=' . $email .'&form_submit=1');
        exit();

    } else if (empty($errors) === false) {
        echo output_errors($errors);
    }
?>
    <form action="" method="post">
        <ul>
            <li>
                Email Address: &nbsp; <?php echo $email ?>
            </li>
            <li>
                Set user as Supervisor?<br />
                <input name="supervisor" type="checkbox" <?php if ($supervisor == 1) {?> checked="checked"<?php }?>/>
            </li>
            <li>
                <input type="submit" value="Update User">
            </li>
        </ul>
    </form>

<?php 
}
include 'includes/overall/footer.php'; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:52:46.627

我认为问题出在您的条件上：

```
empty($_POST) === false 
```

由于您的表单非常基本，并且只有一个输入。$_POST 数组仅在检查该输入时才填充值。未选中它不会传递 $_POST 数组中的任何值。通常，提交按钮会传递一个值，但由于您没有“名称”属性，所以它没有。

您可以尝试将 name 属性添加到提交按钮，也可以在 FORM 元素中添加一个隐藏值，例如：

```
<input type="hidden" name="action" value="submitted" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:50:04.777

我认为这里发生的情况是，如果您不选中该框，则没有可发布的数据。您可以检查请求方法，$_SERVER['REQUEST_METHOD'] 而不是 empty($_POST)。

编辑：澄清一下，帖子发生了，但如果条件评估为假

# android - Expandeble 列表视图始终滚动到底部问题

> ID：16097313
> 
> 赞同：5
> 
> 时间：2013-04-19T04:39:17.507
> 
> 标签：android, layout, expandablelistview

我创建了简单的应用程序，我有显示字典单词的可扩展列表视图。

这个可扩展的列表视图几乎可以正常工作，但是当我触摸任何单词时，它会滚动到底部。任何帮助将不胜感激。

**这是我的 XML 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:id="@+id/dicrellis"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true">

        <ExpandableListView
            android:id="@+id/expandable_list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:cacheColorHint="#00000000"           
            android:transcriptMode="alwaysScroll"/>

    </RelativeLayout>

</RelativeLayout> 
```

**这是我的java代码......**

```
mExpandableList = (ExpandableListView)findViewById(R.id.expandable_list);
mExpandableList.setAdapter(new MyCustomAdapter(Dictionary.this,arrayParents));
mExpandableList.setOnItemClickListener(this); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T04:48:05.113

试试这个解决方案。

```
 <ExpandableListView
  android:id="@+id/expandable_list"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:cacheColorHint="#00000000"           
  android:transcriptMode="normal"/> 
```

只需`android:transcriptMode="alwaysScroll"`从此替换`android:transcriptMode="normal"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T04:43:59.187

`android:transcriptMode="alwaysScroll"`使用它时，无论当前可见哪些项目，列表都会自动滚动到底部。

有关其他选项，请参阅[transcriptMode](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3atranscriptMode)

# apache - 使 WAMP 可以通过 localhost 而不是 localhost:8080 （或特定端口）访问

> ID：16097315
> 
> 赞同：0
> 
> 时间：2013-04-19T04:39:24.987
> 
> 标签：apache, port, wamp

我已经安装了 wamp，它运行良好，除非我想访问它，否则我*必须*输入 localhost:8080（8080 是它监听的端口）。

我可以使它仅与 localhost 一起使用而无需输入端口号，如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:50:23.840

查看此站点以获取更多信息：http: [//forum.wampserver.com/read.php?2,13744](http://forum.wampserver.com/read.php?2,13744)。

您将要编辑您的 http.conf 文件，搜索 8080，并在适用的情况下将其替换为 80。我知道这是通用的，但这是我在没有实际看到您的 http.conf 文件的情况下能做的最好的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:51:55.143

您需要更改 Apache 正在侦听的端口。

访问 WAMP 目录下的 apache/conf/httpd.conf。

在这个文件中，会有一个“Listen 8080”，把它改成你想要的任何端口。

在此之后您必须重新启动 Apache。它可以使用 Windows 中的服务来实现。

如果服务没有重新启动（并且您没有弄乱配置文件），那是因为您选择的端口已经在使用中，您将无法使用它。

如果您想为每个项目使用多个端口，请考虑阅读 Apache Virtual Hosting。

希望我有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T11:17:11.960

其他东西已经抢占了 80 端口，这就是它无法工作的原因。

运行 wampmanager->Apache->Service->测试端口 80

这将启动一个命令窗口并告诉你什么正在使用端口 80。

无论它是什么都需要重新配置以使用另一个端口，或者例如，如果它的 IIS 并且您不使用 IIS，则应该卸载它。

# javascript - onClick - 隐藏/显示分区

> ID：16097316
> 
> 赞同：0
> 
> 时间：2013-04-19T04:39:26.897
> 
> 标签：javascript

在此我想要一个功能，当用户单击“**按钮 01** ”时，它应该使 DIVid“ **01** ”可见。在此之后，当单击其他按钮时，它应该隐藏以前的 *DIVid*并使相关的*DIVid*可见。

我创造了一个[小提琴](http://jsfiddle.net/aki_shaitan/ruDek/)。

```
function Visibility() {
    var har_element = document.getElementById('C');
    var meth_element = document.getElementById('D');
    var main_element = document.getElementById('E');

    var vis = har_element.style;    

    if(vis.display == 'block') {vis.display = 'block';
        meth_element.style.display='block';
        main_element.style.display='block';
    } else {
        vis.display = 'block';
        meth_element.style.display='block';
        main_element.style.display='block';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:40:55.227

尝试这个

```
window.onload = function(){
hideSomeDivs(); 
```

}

```
function showHide(showHidebuttonId)
{
   hideAll();

if(showHidebuttonId == "1")
  document.getElementById("first").style.display = 'block';
else if(showHidebuttonId == "2")
  document.getElementById("second").style.display = 'block';
else if(showHidebuttonId == "3")
 document.getElementById("third").style.display = 'block';
else if(showHidebuttonId == "4")
  document.getElementById("fourth").style.display = 'block';
 else if(showHidebuttonId == "5")
  document.getElementById("fifth").style.display = 'block';
}

  function hideAll(){
    document.getElementById("first").style.display = 'none';
    document.getElementById("second").style.display = 'none';
    document.getElementById("third").style.display = 'none';
    document.getElementById("fourth").style.display = 'none';
    document.getElementById("fifth").style.display = 'none';
  }
  function hideSomeDivs()
  {
   document.getElementById("second").style.display = 'none';
    document.getElementById("third").style.display = 'none';
  } 
```

# python - subprocess.call() 没有等待

> ID：16097318
> 
> 赞同：3
> 
> 时间：2013-04-19T04:39:44.490
> 
> 标签：python, time, subprocess

我正在使用 subprocess.call ，我需要跟踪执行所需的时间。文档说 subprocess.call 应该在子进程运行时阻止执行，但是即使 vlc 已经运行了几分钟，打印的 time() 值也只有几毫秒。

```
print time.time()
vlc = ['vlc', '--play-and-exit', 'http://www.youtube.com/watch?v=E8Egrmm0GeE&list=PLRQGRBgN_EnrgJvnfr-q6zcPdvhBmjLRB']
subprocess.call(vlc)
print time.time() 
```

我正在使用 Cygwin 在 Windows 上运行它。有任何想法吗？

# ruby-on-rails - 尝试通过嵌套路由过滤数据

> ID：16097319
> 
> 赞同：1
> 
> 时间：2013-04-19T04:39:55.157
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序，可以让用户提出问题并由专业人员回答。除了问答模型，应用程序还通过以下方式跟踪类别

```
Question.rb

 has_many :categorizations
 has_many :categories, through: :categorizations 
```

类别.rb

```
 has_many :categorizations
  has_many :questions, through: :categorizations 
```

分类.rb

```
 belongs_to :question
 belongs_to :category 
```

现在，我可以访问 localhost:3000/categories 并查看包含问题的所有类别的列表。但是，尽管类别很重要，但它并不是很实用，因为由于所问问题的性质，加利福尼亚州的人不太可能回答有关纽约的问题。因此，我也希望按位置过滤问题。我猜设置 URL 的最佳方式是这样的

```
localhost:3000/state/ny/categories 
```

我知道我可以通过创建嵌套路由来做到这一点（例如，如果我创建了一个位置资源）

```
resources :states do
    resources :categories 
end 
```

因此，虽然我最初将位置存储为问题模型上的字段，但我现在创建了一个位置模型（如果“状态”是保留字，我不确定）。我做了

```
Location.rb

has_many :questions

Question.rb

belongs_to :locations 
```

并且还做了嵌套路由，所以我可以按状态过滤类别

```
 resources :locations do
        resources :categories 
  end 
```

但是，您会注意到我没有在位置和类别之间创建关联，所以如果我去这条路线

```
http://localhost:3000/locations/ny/categories 
```

如果 index.html.erb 视图页面显示每个类别存在多少问题

```
<% @categories.each do |category| %>
  <div class="category">
    <h5><%= link_to category.name, category %></h5>
    <%= pluralize category.questions.size, "question" %>
  </div>
<% end %> 
```

它没有按位置过滤。例如，无论位置如何，它仍然会计算所有问题。除非我在过滤位置的视图中添加一些逻辑，否则拥有这样的路线没有任何好处。

除了类别，我还尝试了嵌套问题，但这显然也没有改变任何东西。

```
 resources :locations do
        resources :questions
  end 
```

我想你可以看到我想要做什么。你能建议我应该怎么做吗？

例如，我是否应该在位置和类别之间创建关联，如果是，它将如何与我有分类的那个连接模型一起工作 - 它是否可以属于其他三个模型。或者我应该如何过滤按位置分类的问题或问题。

谢谢，如果你能提供一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:47:43.183

过滤不会在嵌套路由到位时自动发生，您仍然需要手动进行。嵌套路由的存在是为了让事情更容易管理，并增强用户的体验，而不是为你做繁重的工作。因此，就您而言，在您看来，您需要将获取计数的代码更改为如下所示：

```
category.questions.where(location_id: params[:location_id]).size 
```

您在哪里使用`:location_id`通过 URL 传入的来过滤它。不过，这里还有一些其他问题：首先，这种逻辑实际上不应该出现在视图中，而可能出现在您的模型中；更严重的是，默认情况下，rails 需要使用`:id`url 中的位置，而不是名称/缩写，所以你需要路由`/location/1/categories`而不是`/locations/ny/categories`（尽管有一些 gem 可以让你绕过这个要求）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:20:28.413

当您有独特的要求时，我认为您不应该使用嵌套资源进行路由。我会像这样设置路由

```
get locations/:state/categories => "categories#index"
get locations/categories => "categories#index" 
```

在里面`categories#index`我会`if params[:state].nil?`根据这个检查你可以决定是否在你的检索查询中按状态过滤，并且视图将保持不变

# java - 与缺失类相关的 Logica SMPP 错误

> ID：16097320
> 
> 赞同：1
> 
> 时间：2013-04-19T04:40:09.367
> 
> 标签：java, runtime-error, smpp

我正在开发将通过简码功能与短信交互的移动应用程序。

由于我买不起简码，我决定使用 Logica SMPP 服务器

因此，我首先尝试运行**Logica SMPP**测试应用程序，以了解发送和处理文本消息的一些想法。

但是我在屏幕截图中看到了错误

![逻辑 SMPP 错误](https://i.stack.imgur.com/Uw0tW.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T07:56:24.040

我知道这已经得到解答，但我建议使用 SMPPSim，因为它比 Logica 更易于使用，并且具有可用于与 smpp 模拟器交互的 Web 界面。看一看。在过去的几天里，它对我很有帮助。[http://www.seleniumsoftware.com/downloads.html](http://www.seleniumsoftware.com/downloads.html)

过去几周我一直在学习 smpp，并最终设法让我的大部分应用程序正常工作^^

祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:22:47.620

从屏幕截图中不清楚您使用了什么完整的命令。我假设以下内容：

```
java -cp smpp.jar:smpptest.jar:smscsim.jar com.logica.smpp.test.SMPPTest 
```

由于您在 Windows 上，分号 (;) 是正确的 jar 文件分隔符，而不是在 Linux 上工作的冒号 (:)。

所以，正确的命令是：

```
java -cp smpp.jar;smpptest.jar;smscsim.jar com.logica.smpp.test.SMPPTest 
```

# sage - 在 Site + SAGE 中嵌入单元格

> ID：16097322
> 
> 赞同：1
> 
> 时间：2013-04-19T04:40:12.057
> 
> 标签：sage

我喜欢使用 SAGE 嵌入任何代码（下面的示例）。但我想使用此指令链接两个单元格，但这不起作用。我将如何解决这个问题？例如，我尝试从“计算”单元格中调用单元格“mycell”中的函数 Hola()。

```
<script>
$(function () {
// Make the div with id 'mycell' a Sage cell
sagecell.makeSagecell({inputLocation: '#mycell',

                       evalButtonText: 'Evaluate'});
// Make *any* div with class 'compute' a Sage cell
sagecell.makeSagecell({inputLocation: 'div.compute',
                       linked: true,
                       evalButtonText: 'Evaluate'});
});
</script>
<div id="mycell">
<script type="text/x-sage">
def Hola():
    print "Hola"
</script>
</div> 
<div class="compute"><script type="text/x-sage">
Hola()
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:41:10.150

你的问题是你有两种不同的类型。如果我没记错的话，它只会在每个调用 div 类型中起作用`linked:true`。`makeSagecell`我没有尝试过其他任何方法，但是您的示例不起作用似乎是合理的-并且*肯定可以*`linked:true`与同一班级中的所有人一起使用，否则我今天的讲义将不起作用！

 *编辑：这就是我所做的，或者至少是一个例子。这似乎工作正常。

```
$(function () {
    // Make *any* div with class 'compute' a Sage cell
    sagecell.makeSagecell({inputLocation: 'div.compute',
                           evalButtonText: 'Evaluate',
                           linked:true});
});

[snip]
<div class="compute"><script type="text/x-sage">
def r2(n):
    n = prime_to_m_part(n,2)
    F = factor(n)
    ret = 4
    for a,b in F:
        if a%4==3:
            if b%2==1:
                return 0
            else:
                n = prime_to_m_part(n,a)
        else:
            ret = ret * (b+1)
    return ret

def L(n):
    ls = []
    out = 0
    for i in range(1,n+1):
        out += r2(i)
        ls.append((i,out/i))
    return ls
</script></div>

<div class="compute"><script type="text/x-sage">
@interact
def _(n=100):
    P = line(L(n))
    P += plot(pi+pi*sqrt(2)/sqrt(x),x,3,n,color='red')
    P += plot(pi-pi*sqrt(2)/sqrt(x),x,3,n,color='red')
    P += plot(pi,x,3,n,color='red',linestyle='--')
    show(P)
</script></div> 
```

如果您仍然遇到问题，我也会在 ask.sagemath.org 上询问。*

# javascript - Javascript 语句全部被评估

> ID：16097332
> 
> 赞同：0
> 
> 时间：2013-04-19T04:41:20.533
> 
> 标签：javascript, jquery, if-statement

嗨，我希望评估每个 if 语句（java 脚本）。这不会发生，当一两个为真时，剩余的语句不会被评估。它们都是独立的问题。我应该使用什么来代替 if 和 else？谢谢。

```
//Side-Vent-Even
if (SideVent == "Side-Vent-Even" && Canvas=="Base-Shirt") {
// do this
}

//Side-Vent-Uneven
else if (SideVent2 == "Side-Vent-Uneven" && Canvas=="Base-Shirt") {
// do this
}

//Golf-Tee-Right
else if (GolfTee == "Golf-Tee-Right" && Canvas=="Base-Shirt") {
// do this
}

//Golf-Tee-Left
else if (GolfTee2 == "Golf-Tee-Left" && Canvas=="Base-Shirt") {
// do this
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:43:38.147

将它们转换为常规 if，这将使它们彼此独立运行

```
if(){
}
....
if(){
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:45:43.773

当您希望从其中任何一个而不是全部或全部执行条件时使用 if else ，在您的情况下，您希望执行所有这些条件，因此对所有人使用 if 条件语句，例如

```
//Side-Vent-Even
if (SideVent == "Side-Vent-Even" && Canvas=="Base-Shirt") {
  // do this
}

//Side-Vent-Uneven
 if (SideVent2 == "Side-Vent-Uneven" && Canvas=="Base-Shirt") {
  // do this
} 
```

# java - 从对象中删除键和值

> ID：16097337
> 
> 赞同：0
> 
> 时间：2013-04-19T04:41:47.970
> 
> 标签：java, object

我的数据模型如下：

```
public class CustomerObject implements Serializable
{
public Integer pkid;
public String code;
public String name;

    public CustomerObject()
{
    pkid = new Integer(0);
    code = "";
            name = "";
    }
} 
```

现在我从另一个类中调用它：

```
public CustomerObject getCustObj() {
    CustomerObject custObj = new CustomerObject();
    custObj.pkid = new Integer(1001);
    custObj.code = "CUST1001";

    return custObj;
} 
```

现在在`getCustObj()`函数中我只想传递`pkid`and `code`。我的意思是我想`name`从对象中删除变量“”然后通过。所以我的传递对象看起来像：

```
 CustomerObject()
    {
        pkid = 1000;
        code = CUST1001;
    } 
```

请帮助我如何做到这一点。

实际上我有一个 200 变量的数据模型。我将使用网络服务传递它。但是在通过网络服务传递期间，我可能只需要 20 就可以通过。所以我想减少数据大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:55:03.283

在 CustomerObject 类中使用另一个构造函数，如下所示。

```
public class CustomerObject implements Serializable
{
    public Integer pkid;
    public String code;
    public String name;

    public CustomerObject()
    {
        pkid = new Integer(0);
        code = "";
        name = "";
    }
    public CustomerObject(int inPkid, String inCode)
    {
        this.pkid = inPkid;
        code = inCode; 
    }
} 
```

当您从另一个类调用 getCustomerObject 方法时，使用如下

```
public CustomerObject getCustObj() {
    CustomerObject custObj = new CustomerObject(new Integer(1001),"CUST1001");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:00:13.810

如果您没有在对象中设置名称，那么它与没有名称的对象一样好，因为名称为空。您不能从对象中删除名称变量。但是如果你真的想这样做，你可以使用继承。创建一个具有除名称以外的所有属性的类，其他类扩展第一个类并为其添加名称属性。所以现在你可以在不需要 name 属性时使用 first class。

# grails - withRest 闭包中有什么可用的？

> ID：16097339
> 
> 赞同：0
> 
> 时间：2013-04-19T04:42:06.750
> 
> 标签：grails, groovy, httpbuilder

[HTTP Builder](http://groovy.codehaus.org/modules/http-builder/)的[REST Client](http://groovy.codehaus.org/modules/http-builder/doc/rest.html)有一个闭包。我怎样才能知道这个闭包中有什么可用的：`withRest`

```
 withRest(uri: domainName) { what,parameters,are,available,here ->
    } 
```

源代码在[这里](https://github.com/berngp/grails-rest/blob/master/RestGrailsPlugin.groovy)（第 80 行似乎是一个不错的起点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:59:18.523

看看`groovyx.net.http.RESTClient`课堂。JavaDoc 应该让您对可以使用的操作有所了解`withRest`

*   [Grails - 休息插件](http://grails.org/plugin/rest)
*   [Groovy - RestClient JavaDoc](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/RESTClient.html)

# iphone - 从 url UIWEBVIEW +iphone 加载图片

> ID：16097342
> 
> 赞同：3
> 
> 时间：2013-04-19T04:42:29.783
> 
> 标签：iphone, ios, uiwebview, uiscrollview, uiimageview

我正在尝试显示图像`UIWebView`并将 uiwebiview 添加到 uiscrollview 中，因为我想赋予页面控制器效果：-

```
UIWebView *webview_obj=[[UIWebView alloc] initWithFrame:CGRectMake(xcorrd,0,200,320)];
NSString *html = [NSString stringWithFormat:@"<html><body><img src='%@' width='100%' height='100%'></body></html>",imageStr];
[webview_obj loadHTMLString:html baseURL:nil];
webview_obj.scalesPageToFit=YES;
[scroll_views addSubview:webview_obj]; 
```

我的问题是：- 当我尝试加载 sizd 200X320 的图像时。图像尺寸完美。但一些白色部分（大约 30-40 像素）将添加到 webview 的底部和侧面。并自动增加内容大小并滚动。

我正在上传我得到的输出的屏幕截图：-

![在此处输入图像描述](https://i.stack.imgur.com/fDlzm.png)

webview部分中的黑色药水。白色是一些会自动添加到图像中的东西。我使用的图像尺寸是：- 200 :- 和 320 :- 高度 谢谢和问候 shweta

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:47:14.537

`CSS STYLE`在标签中添加`HEAD`..

```
NSString *html = [NSString stringWithFormat:@"<html><head><style>body{padding:0; margin:0;}</style></head><body><img src='%@' width='100%' height='100%'></body></html>",imageStr]; 
```

# javascript - 如何在一页中运行多个 javascript？

> ID：16097344
> 
> 赞同：0
> 
> 时间：2013-04-19T04:42:39.140
> 
> 标签：javascript, jquery, multiple-instances

我的网站有这个问题。我正在尝试让 2 个脚本在同一页面上运行，但除非我删除其中一个，否则其中一个将无法工作：

```
<script src="js/jquery.op.loc.min.js"></script> 
```

或者

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

这是我插入页面部分的 javascript 代码：

```
 <script src="js/jquery.op.loc.min.js"></script>
  <link type="text/css" rel="stylesheet" href="css/jquery.op.loc.min.css" />

   <script>
   jQuery(document).ready(function ($) {
        $("#default-usage .to-lock").loc({
            text: {
                header: "How are you today?",
                message: "Hello!"
            },
            theme: "secrets",
            buttons: {
                order: ["twitter-tweet", "facebook-like", "google-plus"]
            },
            twitter: {
                tweet: {
                    url: "http://twitter.com",
                    text: "tweet!"
                }
            },
            facebook: {
                like: {
                    url: "http://facebook.com"
                },
                appId: "427542137301809"
            },
            google: {
                plus: {
                    url: "http://google.com"
                }
            }
        });
    });
  </script>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="<?php if($network == "") {echo '';} elseif($network == "") {echo '';} echo $account_id; ?>"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      $("div.process").fadeOut(0);
      $("input.button").click(function() {
        $('div.process div.bar').css("width", "0%");
        $("div.process").fadeOut(0);
        $("span.status span").empty();
        $("span.status span").append("On hold");
        $("span.status").css("color", "#FF0000");
        var urlform = $("input.profile").val();
        $.post("<?php echo $filename; ?>?post=1", {url:urlform}, function(data) {
          var exploded = data.split('||');
          var profileimage = exploded[0];
          var profilename = exploded[1];
          if(profilename !== "") {
            $("img.profileimg").attr("src", profileimage);
            $("span.profilename span").empty();
            $("span.profilename span").append(profilename);
            $("span.status span").empty();
            $("span.status span").append("Searching for account");
            $("span.status").css("color", "#FFFF00");
            $("div.process").fadeIn("2000");
            $('div.process div.bar').animate({
              width: "200px"
            }, 14000, function() {
              $("span.status span").empty();
              $("span.status span").append("Account found");
              $("span.status").css("color", "#33FF00");
              setTimeout(function() {startGateway('<?php echo $widget_id; ?>');}, 500);
            });
          } else {
            $("span.status span").empty();
            $("span.status span").append("Account not found!");
            $("span.status").css("color", "#FF0000");
            $("img.profileimg").attr("src", "img/blank.jpg");
          }
        });
      });
    });
  </script> 
```

当谈到 javascript 时，我是一个完整的新手，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:57:01.920

您可以尝试做一些事情来使其正常工作。

1.  确保您的脚本被拉入页面，一种检查方法是使用 Chrome 调试器中的“源”选项卡并在 html 头部分中搜索其他文件

2.  确保在包含 jQuery 之后包含了其他脚本，因为它肯定依赖于它。

3.  检查是否正确包含 jQuery，并且只包含一次。

4.  注意 jQuery 冲突。还有一些其他库覆盖了 $，因此您的代码无法正常工作，因为 $ 不再是 jQuery 的别名。您可以使用它`jQuery.noConflict()`来避免与页面上使用相同变量 $ 的其他库发生冲突。

# javascript - 卡片布局面板在 Sencha Touch 2.2 中不呈现

> ID：16097355
> 
> 赞同：2
> 
> 时间：2013-04-19T04:43:55.853
> 
> 标签：javascript, cordova, extjs, sencha-touch, sencha-touch-2

我已经使用 sencha touch 2.0 开发了一个应用程序，现在我将应用程序升级到了 sencha touch 2.2。它不工作。我有一个容器（布局=卡片），如下所示：

```
Ext.define("InfoImage.view.viewWorkitem.ViewWorkitemView", {
extend:'Ext.Container',
requires:[
    'Ext.TitleBar',
    'Ext.List'
],
xtype:'workitems',
layout:'card',
cardSwitchAnimation:'slide',
config:{
    fullscreen:true,
    cls:'hboxpanel',
    items:[

       {
            xtype:'workItemPanel',
            flex:3
       } 
    ]
} }); 
```

**workItemPanel 如下：**

```
Ext.define("InfoImage.view.viewWorkitem.WorkitemPanel", {
extend:'Ext.navigation.View',
requires:[
    'Ext.TitleBar',
    'Ext.List'
],
xtype:'workItemPanel',
id:'workItemId',
config:{

    layout : 'card',
    style:'border-radius: 10px;',
    navigationBar:{
        hidden:'true'
    },

    items:[ ]
}  }); 
```

这在 sencha tocuh 2.0 中运行良好，它不在 2.2 中引发错误**Uncaught TypeError: Object card has no method 'onItemAdd'**

使用 sencha touch 2.2 需要进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:42:58.883

您需要将您的配置，例如`layout:'card'`，`cardSwitchAnimation:'slide'`放在`config`块内：

```
config:{
    layout:'card',
    cardSwitchAnimation:'slide',
    fullscreen:true,
    cls:'hboxpanel',
    items:[

       {
            xtype:'workItemPanel',
            flex:3
       } 
    ]
} 
```

`id:'workItemId'`在第二个视图中您的方式相同：

```
config:{
    id:'workItemId',
    layout : 'card',
    style:'border-radius: 10px;',
    navigationBar:{
         hidden:'true'
    },

    items:[ ]
} 
```

# php - dompdf特殊字符转换为问号

> ID：16097360
> 
> 赞同：1
> 
> 时间：2013-04-19T04:44:24.450
> 
> 标签：php, pdf, character-encoding, special-characters, dompdf

我有下面的 html 来解析 dompdf 并生成一个 pdf 文件：-

```
 <html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style type="text/css">
    td {
        margin-left: 15px;
        padding-left: 15px;
        border: none;
    }

    table {
        border: none;
    }
    </style>

    <style type="text/css">
    @font-face {
        font-family: "nmsyms";
        src: url("customfonts/nmsyms.eot");
    }

    @font-face {
        font-family: nmsyms;
        src: url(customfonts/NMSYMS__.TTF)
    }

    table {
        bgcolor: none
    }

    ;
    tr {
        bgcolor: none
    }

    ;
    td {
        bgcolor: none
    }
    ;
    </style></head><body><table align='center' width='100%' border='0' cellspacing='0'
            cellpadding='2'>
            <tr>
                <th colspan=5 align='left' height=35>
                <h3>Temporary Corrections &nbsp;</h3>
                </th>
            </tr>
            <tr>
                <th colspan=5 align='left'><b>
                1569(T)/13&nbsp;&nbsp;&nbsp;&nbsp; JAPAN - Hokkaidō West Coast. Kamui
                Misaki - Light.&nbsp;</b></th>
            </tr>
            <tr>
                <td colspan=4 align='left'>Source: <authority>Japanese
                Notice 11/5141(T)/13</authority>&nbsp;</td>
            </tr>
            <tr>
                <td align='left' colspan=4></td>
            </tr>
        </table></body></html> 
```

您可以在上表的第二个 tr 中看到`JAPAN - Hokkaidō West Coast. Kamui Misaki - Light.`。有一个特殊的字符`ō`。这个字符正在转换为生成的 pdf 文件中的问号符号，但我不想要那个。它应该是这样的。

在网页上它按原样显示。

下面是我使用 dompdf 库的 php 代码：-

```
 $file= "files/2012_Week_40_info.html";
                 $NMtextpdfFile = 'nmtext.pdf';
                    $content = file_get_contents($file);
                    $dompdf = new DOMPDF();
                $dompdf->load_html($content, 'UTF-8');

                $dompdf->set_paper('A4', 'portrait'); //portrait,landscape
                $dompdf->render();
                $output = $dompdf->output();
                file_put_contents($NMtextpdfFile, $output); 
```

我还有一些其他特殊字符，例如重音符号，但它们在生成的 pdf 中看起来不错

**我认为这是字体系列问题。谁能告诉我我必须应用哪种字体来解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:31:46.717

首先，您的 CSS 中有一些语法错误。分号 (;) 不应位于大括号之外。分号终止样式定义中的各个声明。因此，您的样式表中的以下内容是错误的：

```
table {
  bgcolor: none
}

;
tr {
  bgcolor: none
} 
```

它应该是这样的：

```
table {
  bgcolor: none;
}

tr {
  bgcolor: none;
} 
```

我不确定（我必须做一些测试），但那些放错位置的分号可能会导致 CSS 解析错误。

此外，您似乎正在尝试使用@font-face 包含“nmsyms”字体。但是你实际上并没有在任何地方使用它。要使用字体（无论是来自您的系统还是使用@font-face 引用），您应该应用它，例如

```
body { font-family: nmsyms; } 
```

但是对于您想要的字符，包含的 DejaVu 字体（在 dompdf 0.6.0 中）工作得很好。因此，您可以轻松删除 @font-face 并使用以下内容：

```
body { font-family: "DejaVu Sans", sans; } 
```

# php - 应用程序/控制台资产：使用流包装器错误安装到 S3

> ID：16097361
> 
> 赞同：3
> 
> 时间：2013-04-19T04:44:34.917
> 
> 标签：php, symfony, amazon-s3, amazon, symfony-2.1

我有一个流包装器，配置为使用[Gaufrette](https://github.com/KnpLabs/KnpGaufretteBundle)包与 amazon s3 一起管理文件系统。我可以使用assetic成功转储资产，我当前的配置如下：

```
knp_gaufrette:
    adapters:
        amazon:
            amazon_s3: 
                amazon_s3_id: site_store.s3
                bucket_name: %site_store.bucket_name%
                create: true

    filesystems:
        amazon:
            adapter: amazon

    stream_wrapper:
        protocol: s3
        filesystems:
            - amazon

assetic:
    read_from:      %cdn_path_prod%
    write_to:       %cdn_path_prod% 
```

和我的参数：

```
 cdn_url_prod: "http://images.site.com/"
    cdn_path_prod: "s3://amazon" 
```

我能够执行应用程序/控制台资产：转储 --env=dev。然后它将资产成功上传到我的 s3 存储桶。但是，当我尝试通过执行以下操作对资产安装执行相同操作时：

```
app/console assets:install s3://amazon 
```

它给了我这个错误：

```
[InvalidArgumentException]  
The specified path (s3://amazon) is invalid. 
```

我查看了网络，有人能够按照他[在此处](https://github.com/symfony/symfony/issues/4014)的描述进行操作。我的蒸汽包装机有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:54:57.100

您确定任何流包装器都已注册以处理“s3://”方案吗？

在[https://github.com/Cyber​​nox](https://github.com/Cybernox/AmazonWebServicesBundle/blob/master/Resources/doc/cdn.md#dump-assets-to-the-s3-bucket) /AmazonWebServicesBundle/blob/master/Resources/ doc/cdn.md#dump-assets-to-the-s3-bucket 中，您将看到他们如何注册流包装器以便能够将资产转储到“s3://”目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-01T16:59:15.123

所以我做了什么，它正在工作。

添加`composer.json`并安装它

```
"aws/aws-sdk-php": "2.6.16", 
```

创建类：

```
<?php

namespace My\AcmeBundle\Amazon;

use Aws\Common\Aws;

class StreamWrapperS3 {

    protected $s3;

    public function __construct($key, $secret, $region) {

        $aws = array(
            'key'    => $key,
            'secret' => $secret,
            'region' => $region
        );

        $this->s3 = Aws::factory($aws)->get('s3');

    }

    public function registerStreamWrapper() {
        $this->s3->registerStreamWrapper();
    }

} 
```

添加参数：`aws_key`, `aws_secret_key`, `aws_region`in`parameters.yml`

覆盖`boot()`方法在`AppKernel.php`：

```
public function boot() {
    parent::boot();
    $s3client = new \Path\to\Amazon\StreamWrapperS3($this->container->getParameter('aws_key'), $this->container->getParameter('aws_secret_key'), $this->container->getParameter('aws_region'));
    $s3client->registerStreamWrapper();
} 
```

在`config_prod.yml`添加：

```
framework:
    templating:
        assets_base_url: https://sa-east-1.amazonaws.com/your-bucket-name
assetic:
    write_to: 's3://your-bucket-name' 
```

最后将过滤器与您的资产一起添加以正确重写您的路径：

```
{% stylesheets filter='cssrewrite'
    'bundles/...' %}
    <link rel="stylesheet" href="{{ asset(asset_url) }}" /> {# asset just to be sure that url will be right #}
{% endstylesheets %} 
```

因此，每次您更改某些内容时都需要运行：

```
php app/console cache:clear --env=prod
php app/console assets:install s3://<your-bucket-name> --env=prod
php app/console assetic:dump --env=prod 
```

一个非常重要的细节花了我将近 2 天的时间，您需要更新 Amazon S3 的 CORS 以访问一些文件，例如在 twitter bootstrap css 中添加的字体。我的 CORS 权限是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>DELETE</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

# java - 删除/弃用子类中的方法

> ID：16097366
> 
> 赞同：0
> 
> 时间：2013-04-19T04:45:39.763
> 
> 标签：java, deprecated, overriding

我想从一个存在于它的超类中的类中删除一个方法。我可以使用注释弃用超类方法`@Deprecated`，但它仍然可以在子类中访问。

例如：

```
public class Sample {

    void one() {}

    void two() {}

    @Deprecated
    void three() {}
}

class Sample2 extends Sample {
    @Override
    void one() {}

    public static void main() {
        Sample2 obj = new Sample2();
        obj.one();
        obj.two();
        obj.three();// I do not want to access this method through the sample 2 object.
    }
} 
```

在使用`Sample2`对象时，我只想要方法`one`并且`two`可用。请就如何做到这一点提出建议。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:46:59.207

覆盖 Sample2 中的 three() 并在访问该方法时抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:52:18.883

在编译时您无能为力。子类的方法不能少于超类。你能做的最好的就是像@Sudhanshu 建议的那样做一个运行时错误，也许还有一些工具（比如自定义 FindBugs 规则）在你的 IDE 中将它标记为错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T12:04:30.090

`private`在只能在自己的类中访问的方法前使用访问级别修饰符。

```
public class Sample {

    void one() {}

    void two() {}

    @Deprecated
    private void three() {}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-24T17:27:23.513

隐藏另一个类的接口同时仍然使用它的一个想法是用您自己的对象包装它（即不要子类化）。

```
class MySample {
    private Sample sample;
    //maybe other stuff

    public MySample(){ 
        sample = new Sample();
    }

    void one(){
        return sample.one();
    }
} 
```

这可能是不令人满意的：不想`Sample`完全按照预期的方式使用它，同时又想劫持和扩展它的行为。它解决了永远需要`three()`你的支持的问题`Sample`。

# javascript - 如何将内容添加到模态，例如通过 ajax 加载的 div

> ID：16097368
> 
> 赞同：0
> 
> 时间：2013-04-19T04:45:47.467
> 
> 标签：javascript, jquery, ajax, web-applications, modal-dialog

我有一个页面，其中有一个缩略图库。单击一个时，我想显示更大的图像，然后以类似模式的方式显示有关图片的更多信息，就像[这里所做](http://westlands.olx.co.ke/samsung-s3-iid-502891970)的那样 单击图像以了解我的意思。内容将通过 ajax 加载。我还想预加载更大的图像，这样当用户单击缩略图时，他们将能够在等待加载附加信息时查看更大的图像。我是模态的新手，所以我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:26:01.693

通过 ajax 动态加载内容只是附加到 dom（或显示模式对话框的 div/container）。通过在 ajax 请求到达时附加它，您实际上将刷新模态对话框的外观以反映新内容。

我认为您不会找到“支持 ajax”的模式对话框。相反，您正在寻找一个在渲染之前或在对话框打开时触发事件的事件，以便您可以创建您的 ajax 调用。jQuery UI 模态对话框支持此功能。

```
$( ".selector" ).dialog({                          //open the dialog
      open: function( event, ui ) {                //fire function before rendering
          $.ajax({                                 //make your ajax call to get content
               url: "test.html",                   
               type: "POST",
               data: "name=value&name=value",
               success: function(html){
                    $(this).append(html);          //append your content to the dialog
               }
          });
      }
  }); 
```

# javascript - 关于javascript中的“this”

> ID：16097369
> 
> 赞同：4
> 
> 时间：2013-04-19T04:45:50.253
> 
> 标签：javascript

```
var name = "the Window.";
var object = {
    name:"Object",
    getName: function(){
        return this.name;
    }
}
(object.getName)(); //"Object"
(object.getName = object.getName)(); //"the Window" 
```

我运行这段代码，它返回“窗口”，而我认为它应该是“对象”。请告诉我为什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:53:36.627

```
var name = "the Window."; 
```

全局声明创建全局/窗口对象的属性。这相当于（或多或少）：

```
var global = this;
global.name = 'the Window'; 
```

表达方式：

```
(object.getName = object.getName) 
```

返回 引用的函数`object.getName`。下面的空参数列表（即`()`）导致它被调用。

由于*this*值不是由调用设置的，它默认为 global/window 对象，因此该函数返回*global.name*的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:00:39.493

混乱的底线是我们正在尝试执行

```
(object.getName = object.getName)(); 
```

我们认为它应该打印“对象”。

实际上，它不会。这是一个简单的原因。如果你把这个语句分成 2 个语句，你会得到它。

*   分配：object.getName 被分配了一些处理程序。在这种情况下，它被分配给它自己。
*   处理程序的执行。现在，处理程序已执行，但这次我们没有上下文。处理程序由窗口执行。所以你得到了 window.name ，它是“窗口”。

尝试这个

```
var x = object.getName;
x(); 
```

它与您的情况有些相似，它提供了“窗口”。也是出于同样的原因 x 由 window 执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:09:54.303

与其以`this`您习惯的经典 OOP 方式思考，`this`不如将其视为调用函数的上下文。

在您的示例代码中，`window`是`getName`调用的上下文，无论该函数在何处声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T16:41:20.007

```
var x = object.getName;
x(); 
```

不太一样。“=”只确保x引用与object.getName相同的内存地址，但x属于window而object.getName属于object。我认为问题来自赋值表达式的返回值。也许有一个临时变量来接收（object.getName = object.getName）的值，即

```
var temp = (object.getName = object.getName);
temp();//"the Window" 
```

因此可能是有道理的。

# jquery - 在单击时添加多选元素

> ID：16097373
> 
> 赞同：-1
> 
> 时间：2013-04-19T04:46:36.297
> 
> 标签：jquery, html

我有 2 个 div 并排对齐，还有一个 ADD 按钮。下面是 html

```
<div class="_25">
    <label for="25">Mode</label>
    <select name="mode">
        <option value="0">Select One</option>
        <option value="fcl/fcl">FCL/FCL</option>
   </select>
</div> 
```

单击添加按钮，我想附加另一个`<select></select>`具有相同名称但在数组中的元素。我尝试了各种方法，但在尝试附加它们时无济于事。例如：第一个选择元素应该有`name=mode[0]`，第二个`mode[1]`等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:08:36.057

无需以这种方式创建名称属性，您可以将`mode[]`名称属性添加到您的选择元素，并且在服务器端您将拥有一个数组。但是，如果您想创建具有不同名称的选择元素，您可以尝试：

```
$('#add').click(function(e) {
    $('select').last().clone().prop('name', function(_, name){
        return name.replace(/\d+/, function(num) {
            return +num + 1;
        }); 
    }).appendTo('#hell');
}); 
```

[http://jsfiddle.net/vSZ79/](http://jsfiddle.net/vSZ79/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:01:47.083

您是否尝试过使用内部 html？一种方法是拥有另一个可以附加所有动态选择元素的 div。然后在 javascript 中，您可以使用 innerHTML 并为其指定样式/名称/id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:14:20.150

尝试这个 ：

```
 <input type="button" onclick="add_s();" value="ADD select" />

function add_s() {
        var ttl_slcts = $('._25 select').length;
        var a = "<select name=mode[" + ttl_slcts + "] ><option>a</option>     <option>b</option></select>";
        $('._25').append(a);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T05:10:29.660

添加按钮并将选择名称更改为`mode[]`

```
<div class="_25">
    <label for="25">Mode</label>
    <select name="mode[]">
        <option value="0">Select One</option>
        <option value="fcl/fcl">FCL/FCL</option>
   </select>
    <input type="button" id="add" value="ADD" />
</div> 
```

jQuery：

```
$('#add').click(function() {
    var elem = $(this).closest('div').find('select:last');
    elem.clone(true).insertAfter(elem);
}); 
```

[http://jsfiddle.net/samliew/FkrkH/](http://jsfiddle.net/samliew/FkrkH/)

在服务器端，您的变量`mode`是一个数组。您可以使用`mode[0]`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T05:19:12.657

您可以使用 jQuery 循环遍历每个元素，并在正则表达式的帮助下增加值。您还应该从 mode[0] 开始，以保​​持一致性。

```
$('.add').click(function(){
   var currentName = $('select:last').attr('name'); // starting name should be mode[0]
   var pattern =  /^mode\[(\d)\]$/; 
   var newName = pattern.exec(currentName)[1];
   newName++;
   newName = "mode["+newName+"]";
   $('select').attr('name', newName).appendTo('div._25');
}); 
```

# jquery - jQuery单击与angularjs绑定

> ID：16097374
> 
> 赞同：0
> 
> 时间：2013-04-19T04:46:39.727
> 
> 标签：jquery, html, angularjs, bind

我正在使用 jQuery click bind 来进行平滑缩放图像缩放插件。但是使用 angularjs 实现时绑定不起作用。我是 Angular 和 jQuery 的新手。所以请帮忙。

这是我用于缩放的 jQuery 函数。它实际上是在尝试从 href 中检索 image_url。

```
jQuery(function($){
    $('.zoom_thumbnails').find('li a').each(function (){
        $(this).bind('click', {src: $(this).attr('href')}, function (e){
              $('#zoom_container').smoothZoom('destroy').css('background-image', 'url(css/zoom_assets/preloader.gif)').smoothZoom({
                     image_url: e.data.src,
                      width: '100%',
                      height: '300%',
                   });
               return false;
           });
       }).eq(0).trigger('click');
     }); 
```

我的html代码如下。

```
<div id="zoom_container"></div>
<ul class="zoom_thumbnails">
    <div  ng-repeat="image in zoomImages">
        <li><a href={{image.img}} data-size="500,400">
            <img src={{image.img}} style="height: 15%">
            </a></li>
      </div>
</ul> 
```

我正在使用一个控制器，其中图像存储在数组 zoomImage 中。当我尝试对图像 url 进行硬编码时，它工作正常。但是在使用 ng-repeat 时，绑定不会在 jQuery 中发生。有人请帮我解决这个问题。我尝试将 jQuery 函数放在 html 页面和控制器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:13:38.253

您必须等到 ng-repeat 完成后才能使用 jQuery 来 $('.zoom_thumbnails')。

这是执行此操作的指令（[http://jsfiddle.net/tQw6w/](http://jsfiddle.net/tQw6w/)）；它在 true 时调用指定的函数：

```
.directive('repeatDone', function() {
    return function(scope, element, attrs) {
        if (scope.$last) { // all are rendered
            scope.$eval(attrs.repeatDone);
        }
    }
}) 
```

和html：

```
<ul>
    <li ng-repeat="feed in feedList" repeat-done="layoutDone()" ng-cloak>
        <a href="{{feed}}" title="view at {{feed | hostName}}" data-toggle="tooltip">{{feed | strip_http}}</a>
    </li>
</ul> 
```

和控制器中的功能：

```
$scope.layoutDone = function() {
    $timeout(function() { $('a[data-toggle="tooltip"]').tooltip(); }, 0); // wait...
} 
```

我发现在进行 DOM 操作之前需要使用间隔 = 0 的 $timeout，例如在小提琴中初始化工具提示或缩略图。

顺便说一句，jQuery 与 Angular 配合得很好，只要确保 jQuery 脚本标签出现在 Angular 脚本标签之前：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:27:02.050

我不知道你的平滑缩放功能，但你可以看一下这个演示，以获得从缩略图图像切换容器背景图像的指令示例。

链接：[Plunker 演示](http://plnkr.co/edit/CVnp9FKcIMr7GoSpfcoX?p=preview)

# spring - eclipse indigo 3.7 需要 STS 的 url

> ID：16097383
> 
> 赞同：0
> 
> 时间：2013-04-19T04:47:44.697
> 
> 标签：spring, spring-tool-suite

我需要在我的 eclipse indigo 中安装 STS（Spring Tool Suite），请告诉我哪个 url 可以工作，我可以在广告新软件选项中输入，我刚刚尝试过 eclipse 市场，但同时它解决了错误并更新没有成功申请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:51:22.927

如果您拥有最新/最好的 Eclipse（坦率地说，我鼓励您获得它），您可以直接从 STS 网站拖放到您正在运行的 Eclipse 中：

*   [http://www.springsource.org/sts](http://www.springsource.org/sts)

# javascript - 引导程序中的折叠元素

> ID：16097387
> 
> 赞同：1
> 
> 时间：2013-04-19T04:48:06.940
> 
> 标签：javascript, jquery, css, twitter-bootstrap

```
<div >
 <div>
  <h3 style="display:inline-block;">Comments</h3>
  <button id="add_button" style="display:inline-block;margin-left:240px;" type="button" class="btn btn-primary" onClick="$('#add_button').hide()" data-toggle="collapse" data-target="#comments">Add</button>
 </div>
 <div id="comments" class="collapse in">
  <textarea style="resize:none;width:90%;" class="input xlarge" rows="4" id="comment-box" name="comment-box" placeholder="Type your comment here..."></textarea>
  <button style="margin-right:30px;" id="submit_comment" class="btn btn-primary pull-right" name="submit_comment" type="submit" onClick="">Submit</button>
 </div>
</div> 
```

所以这是我的代码。我有一个来自引导程序的可折叠元素，我试图让它在页面中开始折叠，但尝试了多种不同的方法，但我不能。我使用了几个 jQuery 命令，例如**hide()**和 collapse，但它们似乎都不起作用。关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:31:28.420

正如我在此 JSFiddle 中所示，只需从 div 中删除`in`类，即可在单击按钮时显示评论文本区域：`id='comments'``add`

[http://jsfiddle.net/JHkHE/1/](http://jsfiddle.net/JHkHE/1/)

# javascript - 转义序列编码不正确时如何解决Javascript转义

> ID：16097391
> 
> 赞同：0
> 
> 时间：2013-04-19T04:48:21.307
> 
> 标签：javascript, string, unicode

我有一个包含转义序列的文本字符串，例如`\u00f1`. 当我在 JS 中摄取并尝试将字符串附加到 div 时，它实际上是在渲染`\u00f1`而不是`ñ`.

我已经尝试过`en/decodeURIComponent`，`un/escape()`但无济于事。

关于如何让转义序列`UTF-8`在 JS 中呈现正确字符的任何技巧？

**PS**页面已经编码`UTF-8`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:55:41.343

唯一明智的解决方案是确保正确编码 HTML。尝试“解码”内容可能很容易带来跨站点脚本 (XSS) 问题（未完成的修复尝试可能是您看到过度编码文本的原因）。

否则，您可以尝试使用 innerHTML 和 content 属性对其进行多次解码（为了更好的衡量标准）...

# java - 在从 Ant 运行的 javascript 中，如何获取参数值？

> ID：16097392
> 
> 赞同：9
> 
> 时间：2013-04-19T04:48:29.930
> 
> 标签：java, javascript, ant

我在 中定义了一个宏定义`Ant`，并使用`javascript`它来完成这项工作。在这种情况下，我正在验证一个`timezone`.

```
<macrodef name="validateTimeZone">
    <attribute name="zone" />
    <sequential>
        <echo>result: ${envTZResult}</echo>
        <echo>  validating timezone: @{zone}</echo>
        <script language="javascript"><![CDATA[
            importClass(java.util.TimeZone);
            importClass(java.util.Arrays);
            var tz = project.getProperty("zone");
            println("    got attribute: " + tz);
            var result = Arrays.asList(TimeZone.getAvailableIDs()).contains(tz); //testing if timezone is known
            project.setProperty("zoneIsValid", result);
        ]]> 
        </script>
    </sequential>
</macrodef> 
```

问题是`project.getProperty()`不检索传递属性的值。有人知道如何从 javascript 中获取属性的值吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T22:18:09.670

原来我使用了错误类型的标签。对于使用脚本来定义 ant 任务，我应该使用`scriptdef`而不是`macrodef`. 有`scriptdef`预定义的对象可以访问任务中的属性和嵌套元素。

这适用于从 Ant 中的 javascript 访问属性：

```
<scriptdef name="validateTimeZone" language="javascript">
    <attribute name="zone" />
    <![CDATA[
        importClass(java.util.TimeZone);
        importClass(java.util.Arrays);
        var tz = attributes.get("zone"); //get attribute defined for scriptdef
        println("    got attribute: " + tz);
        var result = Arrays.asList(TimeZone.getAvailableIDs()).contains(tz); //testing if timezone is known
        project.setProperty("zoneIsValid", result);
    ]]> 
</scriptdef> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T07:42:26.910

最好是创建一个属性为值的属性，即

```
<macrodef name="validateTimeZone">
    <attribute name="zone" />
    <sequential>
        <echo>result: ${envTZResult}</echo>
        <echo>  validating timezone: @{zone}</echo>
        <!-- edit use local with ant 1.8.x -->
        <local name="zone"/>
        <property name="zone" value="@{zone}"/>
        <script language="javascript"><![CDATA[
            importClass(java.util.TimeZone);
            importClass(java.util.Arrays);
            var tz = project.getProperty("zone");
            println("    got attribute: " + tz);
            var result = Arrays.asList(TimeZone.getAvailableIDs()).contains(tz); //testing if timezone is known
            project.setProperty("zoneIsValid", result);
        ]]> 
        </script>
    </sequential>
</macrodef> 
```

# php - 邮件主题引用

> ID：16097397
> 
> 赞同：0
> 
> 时间：2013-04-19T04:49:40.903
> 
> 标签：php, javascript, html

我修改了一个内部错误页面，一旦 URL 被 SquidGuard 阻止，该页面就会显示给用户。以下是我需要一些帮助的脚本部分：

```
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# IE displayed self-page, if them size > 1024
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
function get_error_page($er_code_id, $err_msg='') {
    global $err_code;
    global $cl;
    $str = Array();

    header("HTTP/1.1 " . $err_code[$er_code_id]);
    $str[] = '<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">';
    $str[] = '<html>';
    $str[] = '<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title></title></head>';
    $str[] = '<body style="background-color:#FFFFFF; font-family:verdana, arial, sans serif;">';

    $str[] = '<div style="padding:5px; background-color:#FFFFFF; text-align:center; font-weight:bold; font-family:verdana,arial,sans serif; color:#2F93D1; font-size:70%;"> <p>';
      if ($cl['n'])        $str[] = "Your Node Name: {$cl['n']} </p><p> ";
      if ($cl['a'])        $str[] = "Your Node IP: {$cl['a']} </p><p> ";
      if ($cl['i'])        $str[] = "Node User: {$cl['i']} </p><p> ";
      if ($cl['s'])        $str[] = "Group: {$cl['s']} </p><p> ";
      if ($cl['t'])        $str[] = "Blacklist Category: {$cl['t']} ";
    $str[] = '</p></div><div style="background-color:#FFFFFF; text-align:center; padding:20px;">';
    $str[] = '<p><img style="padding-top:20px;display: block;margin: 0px auto" src="https://lh4.googleusercontent.com/_aRy3rhrUl64/TaOzVHF01fI/AAAAAAAACVw/H__Us1P5ghc/s800/Untitled.jpg" alt="geblockt"></p></div></div>';
    $str[] = '<div style="padding:20px; margin-top:20px; background-color:#FFFFFF; text-align:center; color:#000000; font-family:verdana, arial, sans serif; font-size:80%;">';
            if ($err_msg) $str[] = '<p style="font-weight:bold; font-size:150%;"> '. $err_msg.' </p>';
            if ($cl['u']) $str[] = "<p><strong>URL: {$cl['u']}</strong></p>";
    $str[] = '<p>Because of access restrictions, your request to the above address is not allowed. </p>
    <p>Please contact <a href="mailto:firewall_support@iuass.org?subject=[HELP IS NEEDED HERE]&body=Please unblock this URL, thanks">IUASS firewall support</a> if you are of the opinion that this is not correct.</p><p>';
    $str[] = '</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p><img src="http://iuass.org/system/cms/themes/default/img/logo.gif" alt="geblockt" width="315" height="44" style="padding-top:20px;display: block;margin: 0px auto"></p></div></div>';
    $str[] = '<div style="width:70%; margin:20px auto; background-color:#FFFFFF; text-align:center; color:#000000; font-size:60%; font-family:verdana,arial,sans serif;">Web Filtering by <a style="color:#000000;">IUASS Firewall implementing pfSense with Squid and SquidGuard</div></div>';
    $str[] = "</body>";
    $str[] = "</html>";

    return implode("\n", $str);
} 
```

我需要做的是将被阻止的 url 添加到 mailto 主题中

```
<a href="mailto:firewall_support@iuass.org?subject=[HELP IS NEEDED HERE]&body=Please unblock this URL, thanks"> 
```

据我了解，该 url 由 {$cl['u']} 指针引用。如果我在 "?subject=" 之后添加它，由于语法错误，它不起作用。因此，有没有一种方法可以通过 html 或 php 或任何其他脚本使用户在单击 firewall_support@iuass.org 链接后打开一个新的电子邮件消息，其中主题字段已经填写了请求中的 url ?

非常感谢这方面的任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:56:27.653

怎么样：

```
<?php echo "<a href='mailto:firewall_support@iuass.org?subject=" . $cl['u'] . "&body=Please unblock this URL, thanks'" ?> 
```

这将使用您提到的插入 $cl['u'] 的内容的 mailto URI 创建一个超链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:11:01.167

您是否尝试过类似的方法：

```
if ($cl['u']) $str[] = "<p>Because of access restrictions, your request to the above address is not allowed. </p><p>Please contact <a href=\"mailto:firewall_support@iuass.org?subject={$cl['u']}&body=Please unblock this URL, thanks\">IUASS firewall support</a> if you are of the opinion that this is not correct.</p>"; 
```

粘贴代码总是很有用的，例如粘贴到 pastebin 上，这样我们就可以查看它，尤其是在语法错误的情况下。

此外请注意，如果您按照我建议的简单方式进行操作，您将遇到麻烦，因为 url 将包含 & 之类的字符。您必须首先将所有出现的 & 替换为它们的 htmlentities。

# build - 如何从 Jenkins 作业更改 Artifactory 中的现有构建状态

> ID：16097401
> 
> 赞同：3
> 
> 时间：2013-04-19T04:50:06.107
> 
> 标签：build, jenkins, continuous-integration, release-management, artifactory

嗨，我有一个像这样的 Jenkins 构建管道： 1\. 构建应用程序并部署到 Artifactory；2\. 在测试服务器（远程）上运行 SSH exec 命令以下载工件并将它们部署到正确的目录中；3\. 针对测试服务器运行 Web 测试，如果通过，将 Artifactory 中的构建状态更改为类似于 pre-staging 的状态，以进行进一步的手动 UAT 测试。我的问题是，如何从 Jenkins 工作中更改 Artifactory 中的构建状态。如果需要使用 Artifactory 的 RESTAPI，有人可以分享一个例子吗？非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T08:36:30.070

是的，REST API 是最简单的方法。您需要执行[Build Promotion](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API#Artifactory%27sRESTAPI-BuildPromotion)电话。请注意，它需要**Artifactory Pro**。
这是一个 POST 请求，接受简单的 json 字符串，其中只有两个属性是必需的：status 和 ciUser。

调用应如下所示：

```
curl -X POST -u admin:password -H "Content-Type: application/json" -d '{"status":"tests passed","ciUser":"jenkinsAdmin"}' "http://localhost:8081/artifactory/api/build/promote/buildName/buildNumber" 
```

# c# - Excel 列与 C# 中的数据字段映射

> ID：16097402
> 
> 赞同：0
> 
> 时间：2013-04-19T04:50:21.123
> 
> 标签：c#, database, excel

我正在将 Excel 工作表插入数据库。其中我在文本框中显示了 Excel 工作表列名。在这里，我需要将用户选择的数据库表列映射到 Excel 工作表列。

如何映射这些？

我的意思是用户从下拉列表中选择工作表和列的字段名称。

我的代码：

```
private void cmbBox1_SelectedIndexChanged(object sender, EventArgs e)
{
        if (cmbBox1.SelectedIndex == 0)
        {
            System.Data.DataTable dt = new System.Data.DataTable();
            cmbBox1.DataSource = dt;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:14:02.567

您必须使用 OledbConnection 连接到 Excel。

下面这篇文章可以帮助你

*   [将数据从 Excel 导入 SQL Server](http://www.codeproject.com/Articles/32581/Import-Data-from-Excel-to-SQL-Server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:56:44.540

您需要先读取 excel 文件，这可以通过使用**oledb**来完成，这篇代码项目[文章](http://www.codeproject.com/Articles/8500/Reading-and-Writing-Excel-using-OLEDB)向您展示了如何做到这一点。您还可以使用**excel interop**或**open xml**来读取 excel 文件。

您无法使用 oledb 读取*图像*，但 excel interop 和 open xml 会让您做到这一点。这篇[excel interop](http://www.codeproject.com/Articles/9992/Faster-MS-Excel-Reading-using-Office-Interop-Assem)和[open xml](http://www.codeproject.com/Articles/371203/Creating-basic-Excel-workbook-with-Open-XML)文章将帮助您。

# ios - NSURL 的 URLWithString 和 fileURLWithPath 有什么区别？

> ID：16097404
> 
> 赞同：18
> 
> 时间：2013-04-19T04:50:33.390
> 
> 标签：ios, objective-c, path, nsstring, nsurl

在我的代码中，我必须使用`URLWithString`来播放流（`HLS`）视频和`fileURLWithPath`播放本地视频。

这两种方法有什么区别？我应该如何使用单一方法播放两个视频。

我还需要在`HSL`视频结束时将最后一帧显示为静止图像。它现在结束时显示空白屏幕。我应该如何实现这一目标？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-19T04:53:51.877

`+URLWithString:`产生一个`NSURL`表示给定字符串的一个。所以字符串可能是`@"http://www.google.com"`并且 URL 代表`http://www.google.com`.

`+fileURLWithPath:`接受路径，而不是 URL，并`NSURL`使用 URL 生成表示路径的`file://`。因此，如果你给它`/foo/bar/baz`URL 将代表`file:///foo/bar/baz`.

您当然可以手动构造一个文件 URL 字符串并将其传递给`+URLWithString:`，但是`+fileURLWithPath:`当您已经有路径时使用起来更简单，因为您不必处理转义字符串并将其强制转换为 URL 格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-14T16:53:51.037

类似的事情发生在我使用 AVAudioPlayer 的应用程序中。我试过了`[NSURL URLWithString:path]`，发现它无法打开某些 mp3 文件。我通过类似的行查看了错误`[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL URLWithString:path] fileTypeHint:AVFileTypeMPEGLayer3 error:&error]`，但错误很简单`nil`

但是，通过将 url 替换为`[NSURL fileURLWithPath:path]`.

在这两种情况下，路径`path NSString * @"/var/mobile/Containers/Data/Application/4D96D4AE-2ED4-40B0-85D2-230E1AFA90E7/Documents/01-AudioTrack 01.mp3" 0x1457a8f0`我仍然不知道原因，但现在我应该小心使用`[NSURL URLWithString:]`.

PS。在 NSURL Reference 文档中，Apple 表示如下：

> 重要要为文件系统路径创建 NSURL 对象，请改用 fileURLWithPath:isDirectory:。

这清楚地表明`[NSURL fileURLWithPath:]`应该用于打开文件，但`[NSURL URLWithString]`也适用于某些情况。

# django - 如何覆盖默认的 django 忘记密码模板？

> ID：16097407
> 
> 赞同：2
> 
> 时间：2013-04-19T04:51:08.360
> 
> 标签：django, templates, django-templates, forgot-password

密码重置模板存储在：

```
/usr/local/lib/python2.7/dist-packages/django/contrib/admin/templates/registration 
```

但是，我想覆盖我的 Django 提供的默认模板。我不想直接进入该目录并编辑模板。因此，我在目录中创建了同名的密码重置模板`templates/registration`。但是，我仍然得到相同的内置 django 模板。我的一个模板 password_reset_form.html 如下所示：

```
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">

<title>ATS | Password Reset Form</title>

<!--google web font-->
<link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,400italic,700|Lato:700,300,400' rel='stylesheet' type='text/css'>

<!--style sheets-->
<link rel="stylesheet" media="screen" href="{{ STATIC_URL }}bootstrap/css/bootstrap.css"/>
<link rel="stylesheet" media="screen" href="{{ STATIC_URL }}bootstrap/css/style.css"/>
<link rel="stylesheet" media="screen" href="{{ STATIC_URL }}bootstrap/css/static.css"/>
<style>
li
{
list-style-type: none;
padding: 0px;
margin: 0px;
}
#footer {
margin-top: 40px;
}

</style>
<!--jquery libraries / others are at the bottom-->
<script src="{{ STATIC_URL }}bootstrap/js/jquery-1.7.1.min.js" type="text/javascript"></script>
</head>
<body>
<!-- Header starts
================================================== -->
<header id="header">
  <div class="container">
    <div class="row"> 

      <!--logo starts-->
      <div class="span4"> <a href="/login/"><img src="{{ STATIC_URL }}bootstrap/img/auto.png"></a> </div>
      <!--logo ends--> 

  </div>
</header>
<div class="container">
<h2 class="lead text-center">Password Reset</h2><br /> <br />

<form action="" class="well span10" method="post">
{% csrf_token %}
{% block content %}
<p class="text-info text-center"><strong>Forgotten your password? Enter your e-mail address below, and we'll e-mail instructions for setting a new one.</strong></p>
<span class="text-error text-center"><strong> {{ form.email.errors }}</strong></span><br/>
<p class="text-center"><label for="id_email">Enter your E-mail address:</label> {{ form.email }}</p> 
<p class="text-center"><button class="btn btn-success">Reset my Password</button></p>
</form>
{% endblock %}
</div>
<footer id="footer">
  <div class="container">
    <div class="row"> 

      <!--small intro and copyright starts-->
      <div class="span7">
        <a data-toggle="tab" href="/how_it_works/">How it works? &nbsp; &nbsp;</a> 
        <a data-toggle="tab" href="/how_it_works/">Terms and Conditions &nbsp; &nbsp;</a> 
        <a data-toggle="tab" href="/how_it_works/">How to use? </a> <br /><br />
        <p class="copyright"> ©2013 Automatic Text Summarization(ATS) </p>
      </div> 
```

模板中是否缺少我的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T05:05:46.683

您是否将模板放在您的应用程序目录中？如果是这样，请`django.contrib.admin`在`INSTALLED_APP`设置之前指定您的应用程序。

如果您已将模板放在其他文件夹中，请确认您已`TEMPLATE_DIRS`在*文件系统加载器*中的 _app_directories _loader 之前适当地添加了目录`TEMPLATE_LOADERS`。

所以应该是

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    ) 
```

更多参考[模板加载器](https://docs.djangoproject.com/en/dev/ref/templates/api/#loader-types)

# jquery - 如何为 HTML 视频标签应用 onEnded 事件

> ID：16097413
> 
> 赞同：0
> 
> 时间：2013-04-19T04:51:49.503
> 
> 标签：jquery, html, video, flowplayer

我已经尝试使用 flowplayer 的视频标签。代码如下：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js">
</script>

<!-- 2\. flowplayer -->
<script src="http://releases.flowplayer.org/5.4.0/flowplayer.min.js"></script>

<!-- 3\. skin -->
<link rel="stylesheet" type="text/css" href="http://releases.flowplayer.org/5.4.0/skin/minimalist.css" />
<div class="player" data-engine="flash"  style="position: absolute; top: 0px; left: 0px; width: 200px; height: 150px; " >

<video preload="none" poster="images.jpeg" id="vid">
  <source type="video/webm" src="file4.webm"/>
  <source type="video/mp4" src="file2.mp4"/>
  <source type="video/ogg" src="file2.ogv"/>
</video>
</div>

 <script>
 // run script after document is ready
 $(function () {

// install flowplayer to an element with CSS class "player"
  var player=  $(".player").flowplayer({
   swf: "flowplayer-5.4.0.swf"
       });

});

player.load(function() {
    alert("player was loaded programmatically");
});
</script> 
```

如果视频播放完毕，如何将页面重定向到[http://google.com ？](http://google.com)如何触发结束事件以检测视频结束？提前致谢！

更新

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

    <script src="http://releases.flowplayer.org/5.4.0/flowplayer.min.js"></script>
    <script type="text/javascript">
        // Master function, encapsulates all functions
        function init() {
            var video = document.getElementById("vid");

     video.onended = function(e) {

    alert('ok');
    // code to navigate page
    }
   }
    </script>
<script>
 $(function () {

   // install flowplayer to an element with CSS class "player"
  var player=  $(".player").flowplayer({
   swf: "flowplayer-5.4.0.swf"
       });

 });

  </script>

  <a class="player" data-engine="flash"  style="position: absolute; top: 0px; left: 0px; width: 200px; height: 150px; " >

 <video preload="none" poster="images.jpeg" id="vid">
  <source type="video/webm" src="file4.webm"/>
  <source type="video/mp4" src="file2.mp4"/>
  <source type="video/ogg" src="file2.ogv"/>
 </video>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:04:57.540

```
// make a server call each time a clip starts or finishes
$f("#myPlayer").onStart(function(clip) {
    $.get("statistics.php?action=start&clip=" + clip.url);
}).onFinish(function(clip) {
    $.get("statistics.php?action=finish&clip=" + clip.url);
}); 
```

检查[此](http://flash.flowplayer.org/documentation/scripting.html)以获取更多信息

**更新**

```
 <script type="text/javascript">
            // Master function, encapsulates all functions
            function init() {
                var video = document.getElementById("vid");   

    video.onended = function(e) {

        alert('ok');
        // code to navigate page
        } 
}
        <script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:05:59.310

你检查过这个答案吗？ [HTML 5 Video OnEnded 事件未触发](https://stackoverflow.com/questions/2925851/html-5-video-onended-event-not-firing)

您也可以尝试每隔几毫秒检查一次视频的“结束”属性 [http://www.w3schools.com/tags/av_prop_ended.asp](http://www.w3schools.com/tags/av_prop_ended.asp)

```
function checkIfEnded( )
{
  myVid=document.getElementById("video1");
  //alert(myVid.ended);
  if ( !myVid.ended )
  {
    setTimeout( "checkIfEnded( )", 1000);
  }
  else
  {
    //goto google.com
  }
} 
```

# haskell - 并行 Repa 代码不会产生火花

> ID：16097418
> 
> 赞同：3
> 
> 时间：2013-04-19T04:52:05.880
> 
> 标签：haskell, parallel-processing, monads, repa, data-parallel-haskell

我正在编写代码来做一个子集产品：它需要一个元素列表和一个指标变量列表（长度相同）。产品是在树中计算的，这对我们的应用程序至关重要。每个产品都很昂贵，所以我的目标是并行计算树的每个级别，按顺序评估连续的级别。因此没有任何嵌套的并行性正在发生。

我只有一个函数中的 repa 代码，靠近我的整体代码的顶层。请注意，subsetProd*不是*一元的。

步骤：

1.  将列表分块成对（无并行性）
2.  压缩分块列表（无并行性）
3.  将乘积函数映射到此列表（使用 Repa 映射），创建延迟数组
4.  调用 computeP 并行评估地图
5.  将 Repa 结果转换回列表
6.  进行递归调用（在输入大小一半的列表上）

编码：

```
{-# LANGUAGE TypeOperators, FlexibleContexts, BangPatterns #-}

import System.Random
import System.Environment (getArgs)
import Control.Monad.State
import Control.Monad.Identity (runIdentity)

import Data.Array.Repa as Repa
import Data.Array.Repa.Eval as Eval
import Data.Array.Repa.Repr.Vector

force :: (Shape sh) => Array D sh e -> Array V sh e
force = runIdentity . computeP

chunk :: [a] -> [(a,a)]
chunk [] = []
chunk (x1:x2:xs) = (x1,x2):(chunk xs)

slow_fib :: Int -> Integer
slow_fib 0 = 0
slow_fib 1 = 1
slow_fib n = slow_fib (n-2) + slow_fib (n-1) 

testSubsetProd :: Int -> Int -> IO ()
testSubsetProd size seed = do
    let work = do
            !flags <- replicateM size (state random)
            !values <- replicateM size (state $ randomR (1,10))
            return $ subsetProd values flags
        value = evalState work (mkStdGen seed)
    print value

subsetProd :: [Int] -> [Bool] -> Int
subsetProd [!x] _ = x
subsetProd !vals !flags = 
    let len = (length vals) `div` 2
        !valpairs = Eval.fromList (Z :. len) $ chunk vals :: (Array V (Z :. Int) (Int, Int))
        !flagpairs = Eval.fromList (Z :. len) $ chunk flags :: (Array V (Z :. Int) (Bool, Bool))
        !prods = force $ Repa.zipWith mul valpairs flagpairs
        mul (!v0,!v1) (!f0,!f1)
            | (not f0) && (not f1) = 1
            | (not f0) = v0+1
            | (not f1) = v1+1
            | otherwise = fromInteger $ slow_fib ((v0*v1) `mod` 35)
    in subsetProd (toList prods) (Prelude.map (uncurry (||)) (toList flagpairs))

main :: IO ()
main = do
  args <- getArgs
  let [numleaves, seed] = Prelude.map read args :: [Int]
  testSubsetProd numleaves seed 
```

整个程序是用

```
ghc -Odph -rtsopts -threaded -fno-liberate-case -funfolding-use-threshold1000 -funfolding-keeness-factor1000 -fllvm -optlo-O3 
```

根据[这些说明](http://hackage.haskell.org/packages/archive/repa/3.2.3.2/doc/html/Data-Array-Repa.html)，在 GHC 7.6.2 x64 上。

我运行我的程序（子集）使用

```
$> time ./Test 4096 4 +RTS -sstderr -N4 
```

8 秒后：

```
672,725,819,784 bytes allocated in the heap
 11,312,267,200 bytes copied during GC
   866,787,872 bytes maximum residency (49 sample(s))
   433,225,376 bytes maximum slop
        2360 MB total memory in use (0 MB lost due to fragmentation)

                                Tot time (elapsed)  Avg pause  Max pause

  Gen  0     1284212 colls, 1284212 par   174.17s   53.20s     0.0000s    0.0116s
  Gen  1        49 colls,    48 par   13.76s    4.63s     0.0946s    0.6412s

  Parallel GC work balance: 16.88% (serial 0%, perfect 100%)

  TASKS: 6 (1 bound, 5 peak workers (5 total), using -N4)

  SPARKS: 0 (0 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time  497.80s  (448.38s elapsed)
  GC      time  187.93s  ( 57.84s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time  685.73s  (506.21s elapsed)

  Alloc rate    1,351,400,138 bytes per MUT second

  Productivity  72.6% of total user, 98.3% of total elapsed

gc_alloc_block_sync: 8670031
whitehole_spin: 0
gen[0].sync: 0
gen[1].sync: 571398 
```

当我增加 -N 参数时，我的代码确实变慢了（-N1 为 7.628 秒，-N2 为 7.891 秒，-N4 为 8.659 秒）但我创建了 0 个火花，这似乎是为什么我没有得到任何并行性。此外，使用大量优化进行编译有助于运行时，但对并行性没有帮助。

Threadscope 确认没有对三个 HEC 进行任何认真的工作，但垃圾收集器似乎正在使用所有 4 个 HEC。

![上面 -sstderr 块的线程范围](https://i.stack.imgur.com/bzfeC.png)

那么，为什么 Repa 不产生任何火花呢？我的产品树有 64 个叶子，所以即使 Repa 为*每个*内部节点制作了一个火花，也应该有大约 63 个火花。我觉得这可能与我使用封装并行性的 ST monad 有关，尽管我不太确定为什么这会导致问题。也许火花只能在 IO monad 中创建？

如果是这种情况，是否有人知道我如何执行这个树产品，其中每个级别都是并行完成的（不会导致嵌套并行，这对我的任务来说似乎是不必要的）。一般来说，也许有更好的方法来并行化树产品或更好地利用 Repa。

解释为什么运行时间随着我增加 -N 参数而增加的加分点，即使没有创建火花也是如此。

**编辑** 我将上面的代码示例更改为我的问题的编译示例。程序流程几乎与我的真实代码完美匹配：我随机选择一些输入，然后对它们进行子集乘积。我现在正在使用[身份单子](https://stackoverflow.com/questions/10747079/what-are-the-key-differences-between-the-repa-2-and-3-apis)。我已经尝试对我的代码进行许多小的更改：是否内联，是否使用爆炸模式，使用两个 Repa 列表和一个 Repa zipWith 与按顺序压缩列表并使用 Repa 映射等的变化，等等，这些都没有帮助。

即使我在示例代码中遇到了[这个](https://stackoverflow.com/questions/9024672/writing-fib-to-run-in-parallel-n2-is-slower?rq=1)问题，我的实际程序*也要大得多*。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T06:31:35.360

### 为什么没有并行性？

没有并行性的主要原因（至少对于您现在简化和工作的程序）是您在表示`computeP`数组上使用`V`，并且法线向量的元素类型并不严格。所以你实际上并没有并行地做任何真正的工作。最简单的解决方法是使用未装箱的`U`数组作为结果，方法是更改`force`​​为以下定义：

```
force :: (Shape sh, Unbox e) => Array D sh e -> Array U sh e
force a = runIdentity (computeP a) 
```

我确实记得在您的原始代码中，您声称您正在使用未拆箱的复杂数据类型。但真的不可能做到吗？也许您可以将您实际需要的数据提取到一些不可装箱的表示中？或者使类型成为类的实例`Unbox`？如果没有，那么您还可以使用以下变体来`force`处理`V`-array：

```
import Control.DeepSeq (NFData(..))

...

force :: (Shape sh, NFData e) => Array D sh e -> Array V sh e
force a = runIdentity $ do
  r  <- computeP a
  !b <- computeUnboxedP (Repa.map rnf r)
  return r 
```

这里的想法是我们首先计算`V`-array 结构，然后我们通过在数组上的映射从它计算一个类型的`U`-array 。生成的数组是无趣的，但是-array 的每个元素都将在进程¹中强制执行。`()``rnf``V`

在我的机器上，这些更改中的任何一个都会使问题大小的运行时间`4096`从 ~9 秒降低到 ~3 秒。`-N4`

另外，我觉得每一步都在列表和数组之间进行转换很奇怪。为什么不`subsetProd`采取两个数组？此外，至少对于值而言，`V`似乎没有必要使用中间数组来表示对，您也可以使用`D`数组。但在我的实验中，这些更改对运行时没有显着的有益影响。

### 为什么没有火花？

Repa*从不*产生火花。Haskell 有许多不同的并行方法，而 spark 是一种在运行时系统中具有特殊支持的特殊机制。但是，只有一些库，例如`parallel`包和包的一个特定调度`monad-par`程序，实际上使用了该机制。然而，Repa 没有。它在内部使用`forkIO`，即线程，但向外部提供纯接口。所以没有火花本身就没什么好担心的。

* * *

[1\. 我本来不知道怎么做，所以我问了 Repa 的作者 Ben Lippmeier。非常感谢 Ben 指出了映射以生成不同数组的选项，以及对我来说存在 , 的实例`rnf`这一事实。 `Unbox``()`]

# network-programming - Unity3D多人游戏中的同步

> ID：16097421
> 
> 赞同：1
> 
> 时间：2013-04-19T04:52:21.917
> 
> 标签：network-programming, unity3d, unityscript

我正在开发一个 Unity Network 游戏，其中有两个玩家有一些基本动作。一个玩家由服务器控制，另一个玩家由客户端控制。

为此，我建立了一个客户端/服务器连接。建立连接后，我可以在屏幕两侧看到两个玩家。我使用了 RPC 方法。

现在，如果我在服务器上移动，我可以看到服务器玩家也在客户端移动。这意味着它们是同步的。但是当我在客户端移动时，只有客户端玩家移动。我看不到服务器端的移动。为什么这不起作用？

我已经用 UnityScript 编写了代码。

```
#pragma strict
var farword:boolean=false;
var backword:boolean=false;

var FirstPlayer:GameObject;
var SecondPlayer:GameObject;

var isFarword=false;
var isBackword=false;
function Update () {

    if(isFarword)
    { 
        networkView.RPC("ChangePos",RPCMode.All);
        isFarword=false;
    }
}

@RPC
function ChangePos()
{
    if(isFarword)
    {
        if(Network.isServer)
        {
            FirstPlayer.transform.Translate(0,0,1);
            isFarword=false;
        }
        if(Network.isClient)
        {
            SecondPlayer.transform.Translate(0,0,1);
            isFarword=false;
        }
    }
    else if(isBackword)
    {
        if(Network.isServer)
        {
            FirstPlayer.transform.Translate(0,0,-1);
            isBackword=false;
        }
        if(Network.isClient)
        {
            SecondPlayer.transform.Translate(0,0,-1);
            isBackword=false;
        }
    }
}

function OnGUI()
{
    if(GUI.RepeatButton(new Rect(1000,100,80,70),"Farword"))
    {
        isFarword=true;
    }
    if(GUI.RepeatButton(new Rect(850,100,80,70),"second"))
    {
        isBackword=true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:42:09.413

问题可能出在你实例化玩家的地方..

使用网络事件来创建玩家，例如..

**Network.OnPlayerConnected**是您应该 Network.Instantiate 客户端播放器的地方，而**Network.OnServerInitialized**是您应该 Network.Instantiate 服务器播放器的地方。这将导致他们每个人都是所有者。

此外，网络游戏有一些心理逻辑需要思考，尽量总是使用 NetworkView.isMine 来确定谁是对象的所有者，谁不是。请记住，只有所有者才能移动对象，其他玩家正在监听坐标。

祝你好运！

# c# - 应用程序作为新项目时 继承 App_Code 文件夹中的 .cs 文件中的页面类

> ID：16097425
> 
> 赞同：0
> 
> 时间：2013-04-19T04:53:11.717
> 
> 标签：c#, asp.net, .net

这是我在 cs 文件中的代码并放置在 App_Code 文件夹中。

```
public class ABC: System.Web.UI.Page
{
    /// <summary>
    /// Default constructor
    /// </summary>
    public ABC()
    {
        //
        // TODO: Add constructor logic here
        //
    }
} 
```

在这里，当解决方案被视为“新网站”时，我能够将“页面类”继承到“ABC 类”，而当解决方案被视为“新项目”时，我无法继承。

这是由于解决方案类型（新项目/新网站）造成的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:05:21.887

网站和 Web 应用程序之间的区别（至少就 Visual Studio 而言）在于 Web 应用程序包含一个 DLL，其中作为网站获取 App_Code 中的代码并动态编译它。

底线是，如果您创建一个 Web 应用程序，则不应使用 App_Code。如果您创建一个网站，那么您应该这样做。

# oracle - 从soap响应中提取xml节点

> ID：16097427
> 
> 赞同：0
> 
> 时间：2013-04-19T04:53:14.447
> 
> 标签：oracle, plsql, xml-parsing

以下是肥皂响应的一部分，

```
<?xml version="1.0" encoding="utf-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Body>
<idc:QuickSearchResponse xmlns:idc="http://www.stellent.com/Search/">
<idc:QuickSearchResult>
<idc:SearchResults>
<idc:dID>127649</idc:dID>
<idc:dRevisionID>1</idc:dRevisionID>
<idc:dDocName>10026726</idc:dDocName>
<idc:dDocTitle>approved Milestone fpr Porject 4176</idc:dDocTitle>
<idc:dDocType>IT</idc:dDocType>
<idc:dDocAuthor>Portfolio</idc:dDocAuthor> 
```

我想从中提取节点`dID`。我尝试使用`extractValue`如下功能，

```
select extractValue(xml1, '//idc:dID', 'xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:idc="http://www.stellent.com/Search/"') AS l_value from dual; 
```

但它不起作用。如何提取节点`dID`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:40:14.503

使用[`XMLTable`](http://docs.oracle.com/cd/E11882_01/server.112/e41084/functions253.htm#CIHGGHFB)：

```
SQL> WITH DATA AS (SELECT '<?xml version="1.0" encoding="utf-8"?>
  2  <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
  3     <SOAP-ENV:Body>
  4     <idc:QuickSearchResponse xmlns:idc="http://www.stellent.com/Search/">
  5        <idc:QuickSearchResult>
  6           <idc:SearchResults>
  7              <idc:dID>127649</idc:dID>
  8              <idc:dRevisionID>1</idc:dRevisionID>
  9              <idc:dDocName>10026726</idc:dDocName>
 10              <idc:dDocTitle>approved Milestone fpr Porject 4176</idc:dDocTitle>
 11              <idc:dDocType>IT</idc:dDocType>
 12              <idc:dDocAuthor>Portfolio</idc:dDocAuthor>
 13           </idc:SearchResults>
 14        </idc:QuickSearchResult>
 15     </idc:QuickSearchResponse>
 16     </SOAP-ENV:Body>
 17  </SOAP-ENV:Envelope>' xml FROM dual)
 18  SELECT did
 19    FROM data,
 20         xmltable(XMLNamespaces ('http://schemas.xmlsoap.org/soap/envelope/'
 21                                  AS "SOAP-ENV",
 22                                 'http://www.stellent.com/Search/' AS "idc"),
 23                  '/SOAP-ENV:Envelope/SOAP-ENV:Body/idc:QuickSearchResponse/idc:QuickSearchResult/idc:SearchResults'
 24                  PASSING XMLTYPE(xml)
 25                  COLUMNS
 26                    did NUMBER PATH 'idc:dID');

       DID
----------
    127649 
```

[`ExtractValue`](http://docs.oracle.com/cd/E11882_01/server.112/e41084/functions061.htm#SQLRF06173)和在11g[`EXTRACT`](http://docs.oracle.com/cd/E11882_01/server.112/e41084/functions060.htm#SQLRF00640)中都已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T11:43:47.220

如果您想在 Pl/SQL 中执行此操作，则从您的 CLOB 或 BLOB XML 消息构造一个 DBMS_XMLDOM.DomDocument。您可以使用以下方法。

> DBMS_XMLPARSER.getDocument()

然后您可以使用以下方法从 SOAP 响应中获取节点值

```
FUNCTION Get_Node_Value_From_Doc(
   v_Doc         IN DBMS_XMLDOM.DomDocument) RETURN VARCHAR2
IS
   v_Clob CLOB;
   v_RootNode DBMS_XMLDOM.DomNode;
   v_Value VARCHAR2(2000);
BEGIN       
   v_RootNode := DBMS_XMLDOM.MakeNode(XmlDom.GetDocumentElement(v_Doc));
   v_Value := DBMS_XMLDOM.GetNodeValue(XslProcessor.SelectSingleNode(v_RootNode,
   '/soap:Envelope/soap:Body/GetLiveAnalysisIDSResponse[1]/AnalysisIDs[1]/guid[1]/text()'
   ,'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns="https://www.testkid.net/"'));  
   RETURN v_Value;
END Get_Node_Value_From_Doc; 
```

您可以使用 DBMS_XMLDOM 包中的其他方法，但提供正确的命名空间很重要。还要注意 XPATH 的构造方式。有关创建 XPATH 的更多信息，请单击[此处](https://docs.oracle.com/html/E16659_03/xdb04cre.htm)。

# python - 在 Mac 上将 Elaphe 与 GhostScript 一起使用时出错

> ID：16097429
> 
> 赞同：0
> 
> 时间：2013-04-19T04:53:25.683
> 
> 标签：python, macos, apache, python-imaging-library, ghostscript

我正在尝试在 Mac 上设置 elaphe。当我尝试使用终端生成一些条形码时，使用命令`python + /.../file.py`elaphe 可以正常工作并正确生成条形码。但是当我尝试通过 web *(php)*执行时，我在 Apache 的错误日志中收到以下错误：

```
Traceback (most recent call last):
  File "lib/barcode_generator/generator.py", line 19, in <module>
    code_39_image.save(str(random)+'.tif')
  File "/Users/x/Library/Python/2.7/lib/python/site-packages/PIL/Image.py", line 1406, in save
    self.load()
  File "/Users/x/Library/Python/2.7/lib/python/site-packages/PIL/EpsImagePlugin.py", line 283, in load
    self.im = Ghostscript(self.tile, self.size, self.fp)
  **File "/Users/x/Library/Python/2.7/lib/python/site-packages/PIL/EpsImagePlugin.py", line 72, in Ghostscript
    gs.write(s)** 
```

如果我在 Windows 中，我会说这是路径问题，程序找不到“gs.write”，但在 Mac 中我是菜鸟，我不知道是否相同，但我已经包含了这两条路径：

```
export PATH=/Users/x/Library/Python/2.7/bin:$PATH
export PATH=/usr/local/bin:$PATH 
```

我很感激能就这个错误给出一些想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:43:33.083

Fixed via a symbolic link. Clearly was a PATH issue or hardcoded reference to the gs binary.

sudo ln -s /usr/local/bin/gs /usr/bin/gs

# google-maps - 谷歌地图与 Mapquest

> ID：16097430
> 
> 赞同：0
> 
> 时间：2013-04-19T04:53:25.720
> 
> 标签：google-maps, curl, mapquest

我想我会把这个问题放在这里。

我编写了一个 curl 脚本，该脚本使用 google maps API 获取地址的经度和纬度。

效果很好！

我遇到的问题是，当我检查我的脚本生成的坐标时......在谷歌地图和 Mapquest 上，地图在同一坐标上显示不同的位置。

在这种情况下，坐标是：41.461754，-74.443577

试一试。你会明白我的意思。

有没有其他人遇到过这个问题？任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T21:14:44.450

我不依赖mapquest。他们有我家 1 块从它的正确位置。他们向我展示了我的家，位于西街 1 号的一栋空置房屋中。需要联系信息，以便可以告知他们他们的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:05:59.963

我将它与[openstreetview进行了比较，结果与](http://openstreetview.org/?lat=41.461754&lon=-74.443577&zoom=18)[谷歌地图](https://maps.google.de/maps?ll=41.461754,-74.443577&z=18)中的结果相同。似乎只是[mapquest](http://mapq.st/14ALqUK)不知道您所在位置附近的街道。如果你滚动出街道似乎是一样的，但我住在另一个大陆到目前为止我不知道那个环境。

# wif - .NET 4.5 的 JWT 处理程序抛出错误：不支持带有单个参数的 GetIssuerName

> ID：16097436
> 
> 赞同：1
> 
> 时间：2013-04-19T04:54:25.540
> 
> 标签：wif, saml, acs, jwt

我刚刚为此处描述的 .Net 4.5 库实现了这个 JSON Web 令牌处理程序：

[http://www.cloudidentity.com/blog/2012/11/20/introducing-the-developer-preview-of-the-json-web-token-handler-for-the-microsoft-net-framework-4- 5-2/](http://www.cloudidentity.com/blog/2012/11/20/introducing-the-developer-preview-of-the-json-web-token-handler-for-the-microsoft-net-framework-4-5-2/)

我有一个应该向我的应用程序返回 JWT 令牌的 ACS 服务。但是，当我应该将令牌返回到我的应用程序时（当浏览器重定向到我的依赖方的返回 uri 时），我得到了这个异常：

> WIF10200：不支持带有单个参数的 GetIssuerName。调用：'GetIssuerName(SecurityToken securityToken, string issuer)'。

我认为这不是我的代码直接的问题；因为如果我进行解决方案范围的搜索，“GetIssuerName”不在我的解决方案中。我认为这可能与 WIF 想要信任的证书颁发者有关，但我已按照上面链接的文章中的说明从 ACS 站点的 FederationMetadata 导入证书......我对此完全感到困惑一。

奇怪的是，当我将我的依赖方令牌类型从 JWT 更改为 SAML 1 或 2 时，我的依赖方的 Return Uri 永远不会被命中，我只是被无误地重定向回我的领域。我希望最终能降落在我的 Return Uri 上。如果有人可以向我解释这两种现象，那将有很大帮助！

更新

.NET 4.5 中的 GetIssuerName 方法是 System.IdentityModel.Tokens.ValidatingIssuerNameRegistry 类的一部分（还有一个具有相同方法的 System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry 类，但这不是我正在使用的方法）。

通过查看元数据，类中有 2 个具有此名称的重写方法：

```
public override string GetIssuerName(SecurityToken securityToken);
public override string GetIssuerName(SecurityToken securityToken, string requestedIssuerName); 
```

我从 WIF 得到的错误似乎直接来自那里列出的第一个方法，正如您从下面的堆栈跟踪中看到的那样。随着我的依赖方返回 JWT，某个地方应该调用第二个方法，其签名有第二个参数，但调用的是第一个。我希望我知道如何改变它。

> [NotSupportedException：WIF10200：不支持带有单个参数的 GetIssuerName。调用：'GetIssuerName(SecurityToken securityToken, string issuer)'。]
> System.IdentityModel.Tokens.ValidatingIssuerNameRegistry.GetIssuerName(SecurityToken securityToken) +156
> Microsoft.IdentityModel.Tokens.JWT.JWTSecurityTokenHandler.ValidateIssuer(JWTSecurityToken jwt, TokenValidationParameters validationParameters) +1303
> Microsoft .IdentityModel.Tokens.JWT.JWTSecurityTokenHandler.ValidateToken(JWTSecurityToken jwt, TokenValidationParameters 验证参数) +278
> Microsoft.IdentityModel.Tokens.JWT.JWTSecurityTokenHandler.ValidateToken(SecurityToken token) +2248
> System.IdentityModel.Tokens.SecurityTokenHandlerCollection.ValidateToken(SecurityToken token) +135
> System.IdentityModel.Services.TokenReceiver.AuthenticateToken(SecurityToken token, Boolean ensureBearerToken, String endpointUri) +502
> System.IdentityModel.Services.WSFederationAuthenticationModule.SignInWithResponseMessage(HttpRequestBase request) + 1508
> System.IdentityModel.Services.WSFederationAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs args) +700
> System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&同步完成）+165

# unix - UNIX - 将已删除的文件移回其原始目录

> ID：16097437
> 
> 赞同：0
> 
> 时间：2013-04-19T04:54:32.753
> 
> 标签：unix, if-statement, rm, mv

我要做的就是将文件从我创建的回收站移动到它自己的原始路径。

我的代码如下：

```
#!/bin/bash

restore ()
{
  base=`basename $restore_file | cut -d"_" -f1`
  echo "Your file $base has been restored"
  mv deleted/$restore_file /$HOME/$base
}

restore_file=$1

if [ $# -eq 0 ]
then
  echo "You have not entered a file"
elif [ -e deleted/$restore_file ]
then
  restore
  grep -v $(basename $restore_file) $HOME/.restore.info >> $HOME/.restore.inf o.tmp
  cp $HOME/.restore.info.tmp $HOME/.restore.info
  rm $HOME/.restore.info.tmp
else
  echo "Your file "$restore_file" does not exist"
fi 
```

我确定错误在第 7 行，只是不知道如何重写。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:57:24.027

您是否需要在之前输入完整路径`deleted`？

你不需要斜线 before `$HOME`，但这不应该是一个问题。

# javascript - 如何在 WinJS.UI.ListView 中列出我的 Twitter 关注者列表

> ID：16097441
> 
> 赞同：0
> 
> 时间：2013-04-19T04:54:46.263
> 
> 标签：javascript, windows-8, winjs

我想在我的 WinJS.UI.ListView 中列出我所有的 Twitter 关注者。

```
 WinJS.xhr({
            url: "https://api.twitter.com/1/followers/ids.json?cursor=-1&screen_name=" + twitterusername,
            responseType: "json"
        }).then(
                function (xhr) {
                    var json = JSON.parse(xhr.responseText);
                    var a = [];
                    a = json.ids;
                    //
                    // now what next?
                    //
                },
                function (error) {
                    myListView.textContent = error;
                }
            ); 
```

我得到了我所有的 twitter 粉丝 id `json.ids`。但接下来如何找到他们的屏幕名称和头像以及如何将它们与我的 ListView 控件绑定的主要内容。因为我已经将简单的静态数据绑定到 ListView 但对于这个例子我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:26:37.153

您必须为每个 id 再次调用`api.twitter.com/1/users/show.json?user_id=json.ids[i]`.

收到所有回调后，您必须创建一个包含具有标题、文本和图片属性的对象的数组。之后只需将其与您的列表绑定即可。

以下代码是一个示例（未经测试，不知道它是否可以正常工作，但它应该为您指明正确的方向）

```
var followersCallback = function(xhr){

          var json = JSON.parse(xhr.responseText);
          var promises = [];

          // make promises for each user id (call to twitter to get picture/name/description)
          for (var i = 0; i < json.ids.length; i++){

            var promise = WinJS.xhr({
                url: "https://api.twitter.com/1/users/show.json?user_id=" + json.ids[i],
                responseType: "json"
            });

            promises.push(promise);

        }

        var dataArray = [];

        // join those promises
        WinJs.Promise.join(promises)
                     .then(function(args){
                        //when you get callback from all those promises
                        for (var j = 0; j < args.length; j++){

                            //not sure if parse is needed
                            args[j]=JSON.parse(args[j].responseText);

                            //populate your data array
                            var obj = {};
                            obj.title = args[j].name;
                            obj.picture = args[j].profile_image_url;
                            obj.text = args[j].description;
                            dataArray.push(obj);
                        }
                        //bind your data to the list
                        var dataList = new WinJS.Binding.List(dataArray);

                     });
    };

    WinJS.xhr({
                url: "https://api.twitter.com/1/followers/ids.json?cursor=-1&screen_name=" + twitterusername,
                responseType: "json"
            }).then(
                    followersCallback,
                    function (error) {
                        myListView.textContent = error;
                    }
            ); 
```

# java - 输入字符串中的格式异常（Java）

> ID：16097443
> 
> 赞同：1
> 
> 时间：2013-04-19T04:54:59.503
> 
> 标签：java, numberformatexception

我正在用 Java 编写一个约会程序，遇到一个错误，即“线程“main”java.lang.NumberFormatException 中的异常：对于输入字符串：“quit””对于以下几行：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "quit"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
at java.lang.Integer.parseInt(Integer.java:449)
at java.lang.Integer.parseInt(Integer.java:499)
at AppointmentNew.main(AppointmentNew.java:24) 
```

此外，当我在打印用户在程序中输入的日期范围的代码中进行选择时，它什么也没有打印出来，它只是转到“进行**选择”的下一行（1：新建，2：打印范围, 3: Print All, quit):** " 它应该打印出用户输入的日期范围...

这是我的代码：

```
import java.util.*;
import java.text.SimpleDateFormat;
import java.util.Date;

public class AppointmentNew 
{
public static void main (String[] args)
{
  ArrayList<String> list = new ArrayList<String>();
  Scanner stdin = new Scanner(System.in);
  String choice = "";
  int choiceNum = 0;
  String date = "";
  String descrip = "";
  int type = 0;
  String typeChose = "";

  System.out.println("Welcome to Appointment App!\n");
  System.out.println("\t============================");

  do
  {
     System.out.print("\n\tMake Choice (1: New, 2: Print Range, 3: Print All, 4: Quit) ");
     choice = stdin.nextLine();
     choiceNum = Integer.parseInt(choice);

     if (choiceNum == 1)
     {
        System.out.print("\n\n\tEnter New Appointment Date in mm/dd/yyyy format: ");
        date = stdin.nextLine();

        System.out.print("\n\n\tEnter New Appointment Description: ");
        descrip = stdin.nextLine();

        System.out.print("\n\n\tEnter Type (1 = Once, 2 = Daily, 3 = Monthly): ");
        type = stdin.nextInt();
        stdin.nextLine();

        if (type == 1)
        {
           Once once = new Once(date, descrip);
           typeChose = "One-Time";
        }
        else if (type == 2)
        {
           Daily daily = new Daily(date, descrip);
           typeChose = "Daily";
        }
        else
        {
           Monthly monthly = new Monthly(date, descrip);
           typeChose = "Monthly";
        }
        String stringToAdd = "";
        stringToAdd = (date + " : \"" + descrip + "\", " + typeChose);
        list.add(stringToAdd);

        System.out.println("\n\n\tNew " + typeChose + " Appointment Added for " + date + "\n");
        System.out.println("\t============================\n");

     }

     if (choiceNum == 2)
     {
        System.out.print("\n\n\tEnter START Date in mm/dd/yyyy format: ");
        SimpleDateFormat sdf = new SimpleDateFormat("mm/dd/yyyy");
        Date lowDate = sdf.parse(stdin.nextLine());
        System.out.print("\n\n\tEnter END Date in mm/dd/yyyy format: ");
        Date highDate = sdf.parse(stdin.nextLine());  

        for(int i = 0; i < list.size(); i++)
        {
           int dateSpot = list.get(i).indexOf(" ");
           String currentDate = list.get(i);
           currentDate.substring(0, dateSpot);  

           if (currentDate.compareTo(lowDate) >= 0 && currentDate.compareTo(highDate) <= 0)
           {
              System.out.println("\n\t" + list.get(i));   
           }
        }
     }

     if (choiceNum == 3)
     {
        for(int i = 0; i < list.size(); i++)
        {
           System.out.println("\n\t" + list.get(i));     
        }
     }

  }while (choiceNum != 4);      
 }
} 
```

提前感谢您提供的任何建议或帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:16:11.377

你需要做的是改变你获得输入的方式。我不会更改代码中的逻辑，所以只需使用此方法即可。

```
 public static Integer getNextInteger(Scanner stdin) {
    String line = null;
    int parsed = 0;
    while ((line = stdin.nextLine()) != null) {
      try {
        parsed = Integer.parseInt(line);
        break;
      } catch (NumberFormatException e) {
        // Throw error message to user.
      }
    }
    return parsed;
  } 
```

您还可以将整个菜单外部化为一个函数，并将返回值用于其余代码。

```
public int generateMenuAndGetChoice(Scanner stdin) {
  System.out.println("Make Choice ( 1: New, 2: Print Range, 3: Print All, quit): ");
  while (true) { //Keep trying until we get correct input.
    String input = stdin.nextLine().trim(); // To deal with extra spaces.
    if (input.equals("1") || input.equalsIgnoreCase("new")) {
      return 1;
    } else if (input.equals("2") || input.equalsIgnoreCase("print range")) {
      return 2;
    } else if (input.equals("3") || input.equalsIgnoreCase("quit")) {
      return 3;
    } else {
      //Throw error to user possibly reshow menu options as well after error.
    }
  }
} 
```

您正在将一个巨大的字符串添加到列表中，然后尝试从中获取日期。此外，您正在与“日期”进行字符串比较，而不是日期比较。这可能就是您没有输出的原因。

替换任何你得到日期的地方，如下所示：

```
System.out.print("\n\n\tEnter START Date in mm/dd/yyyy format: ");
String lowDate = stdin.nextLine(); 
```

有了这个：

```
System.out.print("\n\n\tEnter START Date in mm/dd/yyyy format: ");
SimpleDateFormat sdf = new SimpleDateFormat("mm/dd/yyyy");
Date lowDate = sdf.parse(stdin.nextLine()); 
```

然后使用[Dates.compareTo()](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#compareTo%28java.util.Date%29)比较日期。

**注意：**您的整个程序依赖于用户的正确输入。绝对不会是这种情况。使用 try-catch 和 Scanners hasNextInt() 等方法来确保您始终从用户那里获得正确的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:18:36.793

这是我的想法，你应该修改这里提到的代码：

```
System.out.print("\n\tMake Choice ( 1: New, 2: Print Range, 3: Print All, **4: quit**): ");
choice = stdin.nextLine();
choiceNum = Integer.parseInt(choice); 
```

现在检查 while 循环条件：

```
while (choiceNum != 4); 
```

这是解决您的问题的方法之一。当您尝试将字符串转换为数字类型时发生 java.lang.NumberFormatException，但字符串格式不正确。

[Java API](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NumberFormatException.html)

更新：如果用户以适当的格式提供输入，上述解决方案将正常工作。如果用户提供了任何其他格式不正确的字符串，它将抛出 NumberFormatException。要使代码无错误，您可以执行以下操作：

```
try{
    choiceNum = Integer.parseInt(choice);
   }catch(NumberFormatException e){
        System.out.println("Please provide correct input");
   } 
```

然后您将能够避免 NumberFormatException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:00:23.983

```
choiceNum = Integer.parseInt(choice); 
```

在这里，您将 quit 作为输入字符串传递。所以它在这条线上抛出数字格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T05:00:54.917

对于输入字符串：“退出”

```
choiceNum = Integer.parseInt(choice); 
```

会给

```
java.lang.NumberFormatException 
```

因为choice(="quit") 不是整数

# android-ndk - android ndk 没有地图

> ID：16097446
> 
> 赞同：0
> 
> 时间：2013-04-19T04:55:12.677
> 
> 标签：android-ndk, android-ndk-r7

我正在将我的一些遗留源代码交叉编译为 android，我在源代码中使用 c++ 映射。

我正在使用地图来存储一些带有 ID 的对象

```
 map<string, object> ; 
 map<"ls/1/uri/2", test> ; 
```

由于我在 android ndk 中没有地图支持，因此有人可以建议 Ndk 中的哪个源库将有助于利用相同的功能..

# c# - 需要澄清一些类关系的概念。编程新手

> ID：16097448
> 
> 赞同：1
> 
> 时间：2013-04-19T04:55:20.833
> 
> 标签：c#, class, subclass, inheritance

这是示例：

```
class A{
    class AA{}
}
class B:A{
} 
```

对于 A 类，我们可以说 AA 是 A 的子类。但是，对于 AA 类，A 是 ???? 机管局？

对于A类，B是A的子类我可以说A是???? 乙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T04:59:51.380

`AA`是**嵌套**或**内部**类型。它不是子类。`A`是**包含**或**外部**类型。

`B`源自`A`。它是一个**派生**类。`A`是**基**类。

*也可以看看：*

*   [继承（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173149.aspx)
*   [嵌套类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173120.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:00:15.913

`AA`被称为“嵌套”类。Class`A`将是 class 的容器`AA`。除非它被标记为公共，否则类`AA`在课堂外是不可见的。`A`班级`B`是班级的孩子`A`。Class`A`是 class 的基类`B`。

# ruby-on-rails - 初始化程序中未定义的方法“配置”？添加了一个新的红宝石

> ID：16097451
> 
> 赞同：0
> 
> 时间：2013-04-19T04:55:27.630
> 
> 标签：ruby-on-rails, ruby, rubygems

我将 gem Bitly 安装到我的 rails 应用程序中

我通过跑步做到了`gem install bitly`

然后我手动添加`gem 'bitly'`到我的 gemfile

我在 `config\initializers\bitly.rb

```
Bitly.configure do |config|
  config.api_version = 3
  config.login = "myusername"
  config.api_key = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
end 
```

我正在尝试让我的 Rails 服务器运行，但我收到了这个我以前从未见过的错误

```
Exiting
C:/app/config/initializers/bitly.rb:1:in `<top (
required)>': undefined method `configure' for Bitly:Module (NoMethodError) 
```

我该如何解决这个问题并让这个 gem 工作？

我正在尝试在我的一个模型中使用 gem

```
bitly.shorten("http://mydomain.com/article/#{id}") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:26:39.500

Bitly 目前在 ruby​​gems 上的 0.8.1 版本中可用。此版本不支持`Bitly.configure`。我建议您使用来自 github 的 gem，直到有人在 ruby​​gems 上发布更新版本。

您的 bitly 行`Gemfile`应如下所示：

```
gem "bitly", :git => 'https://github.com/philnash/bitly/' 
```

然后`bundle install`按照您期望的方式做一个并且有点应该工作。

编辑：该错误甚至[存在github问题](https://github.com/philnash/bitly/issues/40):)

# r - 如何从 R 的 cor() 的相关分析中计算 P 值和标准误差

> ID：16097453
> 
> 赞同：14
> 
> 时间：2013-04-19T04:55:35.990
> 
> 标签：r, correlation

我的[数据](http://dpaste.com/1064360/plain/)包含每个条件（x 和 y）的 54 个样本。我通过以下方式计算了相关性：

```
> dat <- read.table("http://dpaste.com/1064360/plain/",header=TRUE)
> cor(dat$x,dat$y)
[1] 0.2870823 
```

是否有一种本地方法可以在上述 R 的 cor() 函数中产生相关 SE 以及来自 T 检验的 p 值？

如本[网站](http://www.sjsu.edu/faculty/gerstman/StatPrimer/correlation.pdf)所述（第 14.6 页）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-19T05:27:05.857

我认为您正在寻找的只是`cor.test()`函数，它将返回您正在寻找的所有内容，除了相关的标准错误。但是，正如您所看到的，该公式非常简单，如果您使用`cor.test`，则您拥有计算它所需的所有输入。

使用示例中的数据（因此您可以自己将其与第 14.6 页上的结果进行比较）：

```
> cor.test(mydf$X, mydf$Y)

    Pearson's product-moment correlation

data:  mydf$X and mydf$Y
t = -5.0867, df = 10, p-value = 0.0004731
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.9568189 -0.5371871
sample estimates:
       cor 
-0.8492663 
```

如果您愿意，您还可以创建如下所示的函数来包含相关系数的标准误差。

为方便起见，这是等式：

![在此处输入图像描述](https://i.stack.imgur.com/l7Sqn.png)

*r* = 相关估计和*n* - 2 = 自由度，这两者都可以在上面的输出中轻松获得。因此，一个简单的函数可以是：

```
cor.test.plus <- function(x) {
  list(x, 
       Standard.Error = unname(sqrt((1 - x$estimate^2)/x$parameter)))
} 
```

并按如下方式使用它：

```
cor.test.plus(cor.test(mydf$X, mydf$Y)) 
```

这里，“mydf”定义为：

```
mydf <- structure(list(Neighborhood = c("Fair Oaks", "Strandwood", "Walnut Acres",
  "Discov. Bay", "Belshaw", "Kennedy", "Cassell", "Miner", "Sedgewick", 
  "Sakamoto", "Toyon", "Lietz"), X = c(50L, 11L, 2L, 19L, 26L, 
  73L, 81L, 51L, 11L, 2L, 19L, 25L), Y = c(22.1, 35.9, 57.9, 22.2, 
  42.4, 5.8, 3.6, 21.4, 55.2, 33.3, 32.4, 38.4)), .Names = c("Neighborhood", 
  "X", "Y"), class = "data.frame", row.names = c(NA, -12L)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-02T22:43:13.483

您不能简单地从返回值中获取测试统计信息吗？当然，测试统计量是估计值/se，因此您可以通过将估计值除以 tstat 来计算 se：

`mydf`在上面的答案中使用：

```
r = cor.test(mydf$X, mydf$Y)
tstat = r$statistic
estimate = r$estimate
estimate; tstat

       cor 
-0.8492663 
        t 
-5.086732 
```

# ruby-on-rails - 从外部视图触发创建时验证不起作用

> ID：16097455
> 
> 赞同：0
> 
> 时间：2013-04-19T04:55:48.943
> 
> 标签：ruby-on-rails, haml

我在and模型`user.html.haml`之外的视图 ( ) 中有以下内容：`apps_controller``App`

```
#myModal.modal.hide.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
            .modal-header
              %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"} ×
              %h3#myModalLabel Add Mobile App
              = form_for @app, class: 'modal-body' do |f|
                = f.label :name, class: 'pull-left'
                = f.text_field :name, style: 'width: 500px;'

                .modal-footer
                  %button.btn{"aria-hidden" => "true", "data-dismiss" => "modal"} Close
                  = f.submit "Save App", class: "btn btn-primary" 
```

这当前成功地将数据保存到`App`模型中，但它没有触发我在`App`模型中的验证。

当在与模型不同的视图中生成记录时，验证不起作用是否有原因？

# php - PHP 和 MySQL 中的多个 SQL 命令

> ID：16097457
> 
> 赞同：0
> 
> 时间：2013-04-19T04:56:07.333
> 
> 标签：php, mysql, mysqli

在 MySQL 中，我可以一次执行多个命令，例如：

```
Select * from Users; Select * from Classes; 
```

从 PHP 调用命令时，我该如何做同样的事情，例如：

```
$sql=mysqli_query($link, "select * from Users;");
while($rows=mysqli_fetch_array($sql)){
    echo "<div>$rows[0]</div><div>$rows[1]</div>";
} 
```

但是，它不起作用：

```
$sql=mysqli_query($link, "select * from Users; Select * from Classes");
while($rows=mysqli_fetch_array($sql)){
    echo "<div>$rows[0]</div><div>$rows[1]</div>";
} 
```

我知道在实践中这可能没有必要。考虑一下我需要这个特定的问题来模拟或开发我自己的接口版本，使用 PHP 来管理 MySQL 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:00:16.687

您可以通过“multi_query”选项来实现这一点。

```
$query = "select * from Users;";
$query .= "Select * from Classes";

if (mysqli_multi_query($link, $query)) {
    do {
        /* store first result set */
        if ($result = mysqli_store_result($link)) {
            while ($row = mysqli_fetch_row($result)) {
                printf("%s\n", $row[0]);
            }
            mysqli_free_result($result);
        }
        /* print divider */
        if (mysqli_more_results($link)) {
            printf("-----------------\n");
        }
    } while (mysqli_next_result($link));
}
mysqli_close($link); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:31:09.690

> 在 MySQL`[console]`中，我可以一次执行多个命令

是的你可以。

但从*技术上讲*，它们无论如何都是**单独执行的。**

因此，随后的 2 次调用`mysqli_query()`将完全一样。

因此，拨打 2 个电话而不是 1 个电话是没有问题的。特别是因为一次做所有事情没有一点。

尽管您*可以*使用任何多查询解决方案，但这并没有多大意义，只会让您的代码无缘无故地过于复杂和容易出错。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T05:44:53.717

您不能同时运行两个查询，默认情况下，mysql 总是在半列 i 之后进行最后一个查询。它将运行 Select * from Classes。而不是更好地执行这两个查询的联合。

# google-app-engine - 谷歌应用脚 本编辑另一个脚本

> ID：16097458
> 
> 赞同：-1
> 
> 时间：2013-04-19T04:56:15.903
> 
> 标签：google-app-engine, google-apps-script, google-api

我有一个应用程序脚本，它是一个 MCQ 测验，它会询问用户问题并对它们进行评分等。它会从池（电子表格）中随机抽取一定数量的问题。

我正在尝试为教师构建一个后端界面，用于制作他们自己的测验，并且我在考虑对于每个测验它都会制作模板脚本的副本，但它需要编辑模板脚本中的属性。如果这甚至是可能的，我会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:54:12.017

如果您使用独立脚本来呈现多项选择项，那么您可以与其他人共享该脚本，他们可以在自己的配额下运行它。我偶然发现了[这个演示文稿](https://docs.google.com/presentation/d/15ChisW--HBA4jNgnO3O0T3w4SpqRm3WEGGdwZGFZuhw/edit#slide=id.p18)，它很好地解释了它......太糟糕了，没有任何音频，我敢打赌再多说几句会有所帮助。特别注意部署讨论，从幻灯片 51 开始。

[脚本可以简单地使用用户属性](https://developers.google.com/apps-script/reference/properties/user-properties)来存储特定教师的信息，包括包含他们问题的文档的 ID，而不是在脚本中编辑属性。这样，您无需为不同的用户定制脚本。

这个先前的问题也可能有帮助：[如何为域部署 Google Apps 脚本？](https://stackoverflow.com/questions/15079581/how-to-deploy-google-apps-script-for-domain).

由于独立脚本是`[type:application/vnd.google-apps.script][3]`，因此可以想象一个脚本可以编辑另一个脚本。我希望其他人为此提出一个答案。

# sitecore - 反序列化到另一个版本的 Sitecore

> ID：16097459
> 
> 赞同：2
> 
> 时间：2013-04-19T04:56:27.260
> 
> 标签：sitecore

我正在查看 Sitecore v6.1 中的序列化对象并反序列化到 Sitecore v6.6，我发现了很多关于序列化的信息，但没有找到不同版本的 Sitecore。以前有没有人有过这方面的经验，如果有，有什么问题吗？

如果所需格式有任何变化，我正在考虑编写一个脚本来更新各个序列化的 Sitecore 项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:54:48.353

我没有尝试过，但我认为从 6.1 到 6.6 的序列化应该可以。尽管您可能会遇到 6.6 中不存在的自定义字段类型的问题。除此之外，我认为它应该工作。

但是，如果在将内容序列化回 V6.6 的过程中出现问题，您不会收到明确的错误消息，如果有任何问题，您必须检查 Sitecore 日志。

我仍然更喜欢在 6.1 中创建一个包，其中包含您的模板、布局和内容，并将其安装在 6.6 上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T17:04:58.207

据我所知，序列化格式自 Sitecore 6.0（2008 年）引入以来一直没有改变。不过，序列化/反序列化过程在整个 Sitecore 版本中都发生了变化。我有一篇博客文章非正式地记录了这里的[序列化格式](http://seankearney.com/post/Sitecore-Serialization-Format.aspx)。

[Sitecore 团队开发](http://teamdevelopmentforsitecore.com)使用 Sitecore 序列化 API，我们已使用该工具在 Sitecore 版本之间成功迁移实施。（这在技术上不是 TDS 支持的功能）。所以我会说你应该能够做你想做的事。

如果 Sitecore 更改了系统级字段的共享/未版本化标志并且您的一个 .item 文件具有该字段的值，那么我可能会遇到的一个潜在问题。在这种情况下，.item 文件将描述一个不可反序列化的项目。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-28T05:18:39.527

我发现这是更好的 [链接](http://briancaos.wordpress.com/2012/10/02/migrating-huge-amounts-of-sitecore-content-use-the-sitecore-serializer/)。希望这会有所帮助

# php - 使用 fgetcsv 的起始位置

> ID：16097470
> 
> 赞同：1
> 
> 时间：2013-04-19T04:57:48.027
> 
> 标签：php, handle, fgetcsv

我有一个每 20 分钟运行一次的脚本，它将日志数据从 CSV 导入我的数据库。有些日志文件可能有 20 个条目，有些可能超过 400,000 个。我的挑战是......日志文件可能会在我的例程运行的时间间隔内更改或增长。在下一次导入时，我想从上次例行运行期间导入的最后一个日志条目中提取，而不必从我的表中删除数据并重新导入整个日志文件。这甚至可能吗？

目前，我的代码是：

```
if (($handle = fopen("/STORAGE/logfile.txt", "r")) !== FALSE)
    {
        while (($columnsUser = fgetcsv($handle, 1000, ",")) !== FALSE)
            {
                etc 
```

因此，例如，如果在 12:20，日志文件有 1000 个整体，我将它们全部导入。12:40，如果还有更多，我想从 1001 行开始。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:59:24.887

您可以使用 ftell 和 fseek 完成此操作。 [http://php.net/manual/en/function.ftell.php](http://php.net/manual/en/function.ftell.php) [http://php.net/manual/en/function.fseek.php](http://php.net/manual/en/function.fseek.php) 将位置存储在数据库中以供以后参考。

# iphone - 启用 UITextView 的复制粘贴选项

> ID：16097472
> 
> 赞同：0
> 
> 时间：2013-04-19T04:58:29.920
> 
> 标签：iphone, ios6

我已经启用了 UItextview 的 set editable property yes 并且我能够在模拟器中运行时复制文本。但我无法在 iPhone 设备中复制粘贴文本..请有人解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:03:19.930

您能否通过双击 UITextView 进行复制和粘贴来尝试一次。还要检查此链接[在 UITextField 上启用复制和粘贴而不使其可编辑](https://stackoverflow.com/questions/1920541/enable-copy-and-paste-on-uitextfield-without-making-it-editable) 希望这可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:09:37.757

您是否尝试过使用“粘贴”方法？这是 iOS 指南中的一个示例：http: [//developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/UsingCopy,Cut,andPasteOperations/UsingCopy,Cut,andPasteOperations.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/UsingCopy,Cut,andPasteOperations/UsingCopy,Cut,andPasteOperations.html)

```
- (void)paste:(id)sender {
    UIPasteboard *gpBoard = [UIPasteboard generalPasteboard];
    NSArray *pbType = [NSArray arrayWithObject:ColorTileUTI];
    ColorTile *theTile = [self colorTileForOrigin:currentSelection];
    if (theTile == nil && [gpBoard containsPasteboardTypes:pbType]) {
        NSData *tileData = [gpBoard dataForPasteboardType:ColorTileUTI];
        ColorTile *theTile = (ColorTile *)[NSKeyedUnarchiver     unarchiveObjectWithData:tileData];
        if (theTile) {
            theTile.tileOrigin = self.currentSelection;
            [tiles addObject:theTile];
            CGRect tileRect = [self rectFromOrigin:currentSelection inset:TILE_INSET];
            [self setNeedsDisplayInRect:tileRect];
        }
    }
} 
```

# java - 一次从地图中检索所有列及其数据

> ID：16097476
> 
> 赞同：0
> 
> 时间：2013-04-19T04:59:09.567
> 
> 标签：java, map

**问题陈述：-**

我有一张名为的地图`attributes`，它将在该地图中具有`column names`和它的名称`corresponding values`。

假设我有`col1 to coln`in`attributes map`及其对应的值。

然后我将使用所有列名及其值编写这样的代码 -

```
MutationBatch m = CassandraAstyanaxConnection.getInstance().getKeyspace().prepareMutationBatch();
 m.withRow(CassandraAstyanaxConnection.getInstance().getEmp_cf(), userId)
.putColumn("col1", value1, null)
.putColumn("col2", value2, null)
.
.
.
.putColumn("coln", valuen, null)
; 
```

现在我需要在下面的方法中做同样的事情，它有两个参数 -

```
userId and attributes 
```

现在我不确定如何以这样一种方式编写上述代码，以便一次性检索所有列及其值。

下面是方法——

```
 public void upsertAttributes(final String userId, final Map<String, String> attributes) {

        MutationBatch m = CassandraAstyanaxConnection.getInstance().getKeyspace().prepareMutationBatch();

        m.withRow(CassandraAstyanaxConnection.getInstance().getEmp_cf(), userId)
        .putColumn(attributeName from attributesMap, attributeValue from attributesMap, null)
        .putColumn(attributeName from attributesMap, attributeValue from attributesMap, null)   
        .putColumn(attributeName from attributesMap, attributeValue from attributesMap, null)
        .
        .
        .
        .putColumn(attributeName from attributesMap, attributeValue from attributesMap, null)
;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:23:49.440

我不确定我是否理解您想要的内容，但您似乎只想遍历地图的条目：

```
MutationBatch m = 
    CassandraAstyanaxConnection.getInstance().getKeyspace().prepareMutationBatch();
ColumnListMutation<String> mutation = 
    m.withRow(CassandraAstyanaxConnection.getInstance().getEmp_cf(), userId);
for (Map.Entry<String, String> entry : attributes.entrySet()) {
    mutation = mutation.putColumn(entry.getKey(), entry.getValue(), null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:05:12.577

> 现在我不确定如何以这样一种方式编写上述代码，以便一次性检索所有列及其值。

你不能。相反，您将使用这样的循环：

```
import java.util.*;

class Row {

    String[] data = new String[10];
    int pos = 0;

    public Row putColumn(String x, String y) {
        data[pos++] = x;
        data[pos++] = y;

        return this;
    }

    public void show() {
        for (int i=0; i<data.length; ++i) {
            System.out.println(data[i]);
        }
    }

}

public class MyProg {
    public static void main(String[] args) {
        Map<String, String> attributes = new HashMap<String, String>();
        attributes.put("col1", "val1");
        attributes.put("col2", "val2");
        attributes.put("col3", "val3");
        attributes.put("col4", "val4");

        upsertAttributes(attributes);
    }

    public static void upsertAttributes(final Map<String, String> attributes) {
        Row r = new Row();
        Iterator<String> keyIterator = attributes.keySet().iterator();

        while (keyIterator.hasNext()) {
            String key = keyIterator.next();
            String val = attributes.get(key);
            r.putColumn(key, val);
        }

        r.show();
    }

}

--output:--
col4
val4
col1
val1
col3
val3
col2
val2
null
null 
```

想象一下，如果您的地图有 10,000,000 个条目。你真的要打印出map中的所有值，然后查看键和值，写出10,000,000行这样的代码：

```
.putColumn('a key I see', 'its value', null)
.putColumn('another key I see', 'its value', null)
...
...
...
.putcolumn('key10,000,000', 'val10,000,000', null) 
```

# linux - 如何使用 Cython 从 dlfcn.h 加载 dlsym 函数

> ID：16097481
> 
> 赞同：0
> 
> 时间：2013-04-19T04:59:43.447
> 
> 标签：linux, cython, dlsym

我很困惑如何加载共享对象库函数并将其与 Cython 一起使用。我创建了一个 dlfnc.pxd 文件，如下所示：

```
#dlfcn.pxd
cdef extern from *:
    ctypedef char const_char "const char"

cdef extern from 'dlfcn.h' nogil:
    void* dlopen(const_char *filename, int flag)
    char *dlerror()
    void *dlsym(void *handle, const_char *symbol)
    int dlclose(void *handle)

    unsigned int RTLD_LAZY
    unsigned int RTLD_NOW
    unsigned int RTLD_GLOBAL
    unsigned int RTLD_LOCAL
    unsigned int RTLD_NODELETE
    unsigned int RTLD_NOLOAD
    unsigned int RTLD_DEEPBIND

    unsigned int RTLD_DEFAULT
    long unsigned int RTLD_NEXT 
```

和一个测试文件如下

```
#test.pyx
cimport dlfcn

#load shared object
cdef void *handle = dlfcn.dlopen("/usr/local/lib/librefprop.so",
                                 dlfcn.RTLD_NOW | dlfcn.RTLD_GLOBAL)
if handle == NULL:
    print dlfcn.dlerror()
    1/0 #raise error still need to implement exception.....

#load function
cdef void *setup_FOR = dlfcn.dlsym(handle, "setup0_")
if setup_FOR == NULL:
    print dlfcn.dlerror()
    1/0 #raise error and still need to implement exception

#some variables
cdef int nc = 2
cdef char *hfld = "/usr/local/lib/refprop/fluids/WATER.FLD|/usr/local/lib/refprop/fluids/AMMONIA.FLD|"
cdef char *hfmix = '/usr/local/lib/refprop/fluids/HMX.BNC'
cdef char *hrf = 'DEF'
cdef long ierr = 0
cdef char *herr = ''
cdef long lhfld = 10000
cdef long lhfmix = 255
cdef long lhrf = 3
cdef long lherr = 255

#call function
setup_FOR(nc, hfld, hfmix, hrf, ierr, herr, lhfld, lhfmix, lhrf, lherr) 
```

这导致以下屏幕输出错误 test.pyx:29:9: Calling non-function type 'void'

如果有人能就如何继续进行建议，我已经为此困惑了整整一个星期。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:47:43.813

您需要将其`void *`转换为函数指针才能调用它。

您可以使用 Cython 函数指针强制转换来做到这一点：

```
(<void (*)(int, char*, char*, char*, long, char*, long, long, long, long)> setup_FOR)(nc, hfld, hfmix, hrf, ierr, herr, lhfld, lhfmix, lhrf, lherr) 
```

# android - Android - 在类中动态更改 ImageView

> ID：16097495
> 
> 赞同：0
> 
> 时间：2013-04-19T05:00:56.463
> 
> 标签：android, xml, class, android-manifest

所以我的问题是我目前正在尝试在从列表视图中选择项目时动态更改 ImageView。它给了我一个`"cocktailName cannot be resolved or is not a field"`错误
CocktailMenu 类

```
package com.drunktxtapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.app.ListActivity;

public class CocktailMenu extends Activity {

    String classes[] = {"Bloody_Mary", "Capirinha", "Cosmopolitan", "Cuba_Libre", "Daiquiri", "Mai_Tai", "Manhattan", "Margarita", "Martini", "Mint_Julep", "Mojito", "Old_Fashoned", "Pina_Colada", "Screwdriver", "Singapore_Sling", "Tom_Collins", "Whiskey_Sour", "White_Russian"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cocktail_menu);
        Button b1 = (Button) findViewById(R.id.bByList);
        Button b2 = (Button) findViewById(R.id.bRandomCocktail);

        b1.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                Intent ourIntent = new Intent(CocktailMenu.this, Menu.class);
                ourIntent.putExtra("cocktail_name", classes);
                startActivity(ourIntent);
                }
            }
        );
        b2.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                int random = (int) (Math.random() * classes.length);
                Intent i = new Intent(CocktailMenu.this, CocktailDetail.class);
                i.putExtra("cocktail_name", classes[random]);
                startActivity(i);
            }
        }
            );
    }
} 
```

菜单类

```
package com.drunktxtapp;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Menu extends ListActivity {

    String classes[] = { "Bloody_Mary", "Capirinha", "Cosmopolitan",
            "Cuba_Libre", "Daiquiri", "Mai_Tai", "Manhattan", "Margarita",
            "Martini", "Mint_Julep", "Mojito", "Old_Fashoned", "Pina_Colada",
            "Screwdriver", "Singapore_Sling", "Tom_Collins", "Whiskey_Sour",
            "White_Russian" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Menu.this,
                android.R.layout.simple_list_item_1, classes));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        ;
        Intent ourIntent = new Intent(Menu.this, CocktailDetail.class);
        ourIntent.putExtra("cocktail_name",classes);
        startActivity(ourIntent);

    };
} 
```

鸡尾酒细节课

```
package com.drunktxtapp;

import android.net.Uri;
import android.os.Bundle;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.ImageView;
import android.view.View.OnClickListener;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.widget.TextView;
import android.view.View;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

    public class CocktailDetail extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.cocktaildetail);
            Button b1 = (Button) findViewById(R.id.buttonYoutube);
            String cocktailName = getIntent().getStringExtra("cocktail_name");
            TextView t1 = (TextView)findViewById(R.id.textCocktailName);
            t1.setText(cocktailName);
            ImageView imageView1 = (ImageView)findViewById(R.id.imageCocktail);
            //imageView1.setImageResource(R.drawable.cocktailName);
            b1.setOnClickListener(new Button.OnClickListener() {

                public void onClick(View v) {
                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=Alt-ehDc3fc")));
                    }
            });
        }
    } 
```

鸡尾酒菜单 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/beer"
    android:orientation="vertical" >

    <Button
        android:id="@+id/bByList"
        android:layout_width="250dp"
        android:layout_height="125dp"
        android:layout_gravity="center"
        android:layout_marginBottom="100dp"
        android:layout_marginTop="25dp"
        android:padding="25dp"
        android:text="Cocktail List"
        android:textSize="20dp" />

    <Button
        android:id="@+id/bRandomCocktail"
        android:layout_width="250dp"
        android:layout_height="125dp"
        android:layout_gravity="center"
        android:layout_marginTop="25dp"
        android:padding="2dp"
        android:text="Random Cocktail"
        android:textSize="20dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:21:42.620

你必须做一个if语句

```
int resourceId;
if (cocktailName.equals(Bloody_Mary)
{
   resourceId = R.drawable.name_for_bloody_mary;
}
else if (cocktailName.equals(Capirinha)
{
   resourceId = R.drawable.name_for_Capirinha;
}
else if ......

imageView1.setImageResource(resourceId); 
```

# android - 如何在android中将一个字符串arraylist值添加到另一个整数arraylist中而不重复

> ID：16097497
> 
> 赞同：0
> 
> 时间：2013-04-19T05:01:20.480
> 
> 标签：android, android-emulator

我正在处理一个字符串数组列表值另一个整数数组列表，我想复制没有重复我尝试使用下面的代码但它没有复制所有值......哪里有错误提示我......

ShootAndCropActivity.class:

```
public class ShootAndCropActivity extends Activity  {

/** Called when the activity is first created. */
static Vector<Integer> genrated4=new Vector<Integer>();
static ArrayList<String> genratednew=new ArrayList<String>();
static ArrayList<String> multimeaning=new ArrayList<String>();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    multimeaning.add("radha");
    multimeaning.add("swathi");
    multimeaning.add("sudha");
    multimeaning.add("sai");
    multimeaning.add("jyothi");
    multimeaning.add("radha");

    Random random4 = new Random();        
    for (int i4 = 0; i4<multimeaning.size(); i4++){ 
        int randomNumber4 = random4.nextInt(multimeaning.size());
        String mn1=String.valueOf(multimeaning.get(randomNumber4));

        if(!genratednew.contains(mn1)) {
            genratednew.add(mn1);
            genrated4.add(randomNumber4);
        }
     }
 }
 } 
```

在上面的多义数组列表中，我有 6 个名字。在列表中，一个值“radha”出现了 2 次。所以我想将所有这些多义数组列表元素添加到另一个整数数组列表中。但它没有复制所有这些值，我不急于，因为我要遵循订单我要订单...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:07:26.100

您可以使用设置。集合是项目的唯一集合。没有重复项。您可以使用以下内容删除数组列表中的重复项。然后相应地复制。

```
static ArrayList<String> multimeaning=new ArrayList<String>();
Set<String> hs = new LinkedHashSet<String>();
// maintains insertion order and will have unique collection of items
hs.addAll(multimeaning);
multimeaning.clear();
multimeaning.addAll(hs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:35:52.750

您希望一切井井有条，只想跳过重复的值，然后不要使用`Random`.

只需替换以下代码

```
Random random4 = new Random();        
for (int i4 = 0; i4<multimeaning.size(); i4++){ 
    int randomNumber4 = random4.nextInt(multimeaning.size());
    String mn1=String.valueOf(multimeaning.get(randomNumber4));

    if(!genratednew.contains(mn1)) {
        genratednew.add(mn1);
        genrated4.add(randomNumber4);
    }
 } 
```

和

```
for (int i4 = 0; i4<multimeaning.size(); i4++){ 
    String mn1=String.valueOf(multimeaning.get(i4));

    if(!genratednew.contains(mn1)) {
        genratednew.add(mn1);
        genrated4.add(i4);
    }
 } 
```

我希望它会有所帮助！

# php - Zend2 致命错误：找不到类 'Album\ResultSet'

> ID：16097498
> 
> 赞同：3
> 
> 时间：2013-04-19T05:01:40.357
> 
> 标签：php, zend-framework2

我是 Zend2 的新手，我正在关注 Zend 上的专辑教程。我收到以下错误：

```
Fatal error: Class 'Album\ResultSet' not found in C:\websites\Zend2\module\Album\Module.php on line 51 
```

我找不到什么问题，我做错了什么？我错过了一些代码吗？还是我错过了教程中的一些规则？

```
Module.php
<?php
namespace Album;

use Zend\Mvc\ModuleRouteListener;
use Zend\Mvc\MvcEvent;

class Module
{
public function onBootstrap(MvcEvent $e)
{
    $e->getApplication()->getServiceManager()->get('translator');
    $eventManager        = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);
}

public function getConfig()
{
    return include __DIR__ . '/config/module.config.php';
}

public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
}
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'Album\Model\AlbumTable' =>  function($sm) {
                $tableGateway = $sm->get('AlbumTableGateway');
                $table = new AlbumTable($tableGateway);
                return $table;
            },
            'AlbumTableGateway' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $resultSetPrototype = new ResultSet();
                $resultSetPrototype->setArrayObjectPrototype(new Album());
                return new TableGateway('album', $dbAdapter, null, $resultSetPrototype);
            },
        ),
    );
}

}

AlbumController.php
<?php
namespace Album\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class AlbumController extends AbstractActionController
{
protected $albumTable;
public function indexAction()
{
    return new ViewModel(array(
        'albums' => $this->getAlbumTable()->fetchAll(),
    ));
}

public function addAction()
{
}

public function editAction()
{
}

public function deleteAction()
{
}

public function getAlbumTable()
{
    if (!$this->albumTable) {
        $sm = $this->getServiceLocator();
        $this->albumTable = $sm->get('Album\Model\AlbumTable');
    }
    return $this->albumTable;
}    
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T05:07:13.020

您尚未在 module.php 文件中添加 ResultSet 类。在那里添加它。

```
<?php
namespace Album;

use Zend\Mvc\ModuleRouteListener;
use Zend\Mvc\MvcEvent;
use Album\Model\Album;
use Album\Model\AlbumTable;
use Zend\Db\ResultSet\ResultSet;
use Zend\Db\TableGateway\TableGateway; 
```

这是在文件中添加类以使用它的强制性要求。

# django - 如何减轻 2 个应用程序之间的相关名称冲突？

> ID：16097501
> 
> 赞同：1
> 
> 时间：2013-04-19T05:01:54.390
> 
> 标签：django, django-models

我正在尝试`django-generic-ratings`和`django-reviews`一起使用。但是，它们都有命名的模型`Vote`，并且这两个模型都为用户定义了一个具有相同相关名称的字段`votes`

从这个类似的问题[Django: Model name conflict](https://stackoverflow.com/questions/1036506/django-model-name-clash)看来，缓解这种情况的一种方法是更改​​一个应用程序的源代码并让它使用不同的相关名称。有没有办法协调这个related_name 与这两个应用程序之外的代码冲突（无需修改任何一个应用程序的代码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:24:10.840

您可以对其中一个模型进行[猴子补丁](https://stackoverflow.com/questions/5626193/what-is-monkey-patching)，但依赖于相关属性的代码仍会中断，因此您可能希望分叉存储库并更改这些部分，然后使用 git upstream 使您的包与 master 分支保持最新未来

# java - 数据列表作为 Struts 复选框

> ID：16097503
> 
> 赞同：0
> 
> 时间：2013-04-19T05:02:07.967
> 
> 标签：java, jsp, dictionary, checkbox, struts

我的 Struts 模型 Bean 中有`Map<String,boolean>`属性。我希望它们在 jsp 页面中显示为复选框列表

因此，当用户选择任何复选框时，应在操作类中选择相应的属性。

我如何实现这一目标？

在jsp中

```
<s:iterator value="myMap">
    <s:checkbox id='<s:property value="key" />' name='<s:property value="key" />' />
</siterator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:19:17.520

尝试这个...

```
 <s:iterator value="myMap">
        <s:checkbox name='<s:property value="key" />' value='<s:property value="value" />' />
    </siterator> 
```

# php - 行与表的关系——mySQL

> ID：16097504
> 
> 赞同：2
> 
> 时间：2013-04-19T05:02:36.230
> 
> 标签：php, mysql, sql

我正在开发一个 PHP + MySQL 项目，需要知道如何进行 SQL 查询。下面有一个表格草图：

[http://s24.postimg.org/na86w4do4/a_1.jpg](http://s24.postimg.org/na86w4do4/a_1.jpg)

该`ms_diseases`表存储疾病名称。`ms_characteristics`存储可能来自某种疾病的特征。该`ms_diseases_characteristics`表交叉疾病和特征之间的关系

这是一个例子：

[http://s21.postimg.org/sg1f7kfti/b_1.jpg](http://s21.postimg.org/sg1f7kfti/b_1.jpg)

“偏头痛”病 ( `ms_diseases`) 具有`ms_diseases_characteristics`表中相关的 1 号和 2 号特征。

现在的问题是：如何使用值 1 和 2 进行查询，只返回具有 1 和 2 特征的疾病？那在具体情况下是“偏头痛”？

**例子：**

```
Characteristics – 1, 2 – return -> MIGRAINE
Characteristics – 1 – return > NOTHING
Characteristics – 1, 4, 5 – return > FLU
Characteristics – 1, 4 – return > NOTHING 
```

如何进行查询以返回具有此类特征的疾病？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:07:24.567

```
SELECT disease_name
FROM
(
    SELECT  a.disease_name, c.totalCount
    FROM    ms_diseases a
            INNER JOIN ms_diseases_characteristics b
                ON  a.ID = b.disease_ID 
            INNER JOIN 
            (
                SELECT  disease_ID, COUNT(*) totalCount
                FROM    ms_diseases_characteristics
                GROUP   BY disease_ID
            ) c ON  b.disease_ID  = c.disease_ID 
    WHERE   b.characteristic_id IN (1,4,5)         -- <<== list of charateristics
    GROUP   BY a.disease_name                                       ^^
    HAVING  COUNT(*) = c.totalCount AND                             ^^
            COUNT(DISTINCT b.characteristic_id) = 3 -- << # of parameters
) s 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/79dba4/40)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:30:27.023

```
SELECT disease_name
FROM ms_diseases
WHERE id = (SELECT disease_id FROM (
  SELECT disease_id, count(disease_id) CT
  FROM 
      ms_diseases_characteristics AS dc,
      ms_characteristics AS c 
  WHERE
      c.id = dc.characteristic_id AND
      c.id IN (1, 2)
  GROUP BY disease_id
  ORDER BY CT DESC) temp LIMIT 1); 
```

或者，如果您想改用特征名称：

```
SELECT disease_name
FROM ms_diseases
WHERE id = (SELECT disease_id FROM (
  SELECT disease_id, count(disease_id) CT
  FROM 
      ms_diseases_characteristics AS dc,
      ms_characteristics AS c 
  WHERE
      c.id = dc.characteristic_id AND
      c.characteristic_name IN ('Headache','Frequent pain')
  GROUP BY disease_id
  ORDER BY CT DESC) temp LIMIT 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:39:38.917

```
SELECT CASE WHEN A.COUNT = B.FOUND_DISES THEN M.DISEASE_NAME ELSE 'NOT FOUND' END AS     DISEASE
FROM
(
SELECT COUNT(*) AS COUNT, DISEASE_ID
FROM MS_DISEASES_CHARACTERISTICS
GROUP BY DISEASE_ID
) A
JOIN
(
SELECT COUNT(*) AS FOUND_DISES, DISEASE_ID
FROM MS_DISEASES_CHARACTERISTICS
WHERE CHARACTERISTIC_ID IN (<VALUE YOU PASS>)
GROUP BY DISEASE_ID
) B
ON WHERE A.DISEASE_ID = B.DISEASE_ID
JOIN MS_DISEASES AS M
ON D.ID = A.DISEASE_ID 
```

# java - 可运行的 jar 文件找不到 log4j.xml

> ID：16097506
> 
> 赞同：0
> 
> 时间：2013-04-19T05:02:58.767
> 
> 标签：java, eclipse, maven, log4j

我编写了一个可运行的 java 应用程序（命令行应用程序）。我把它放进去`log4j.xml`，`src/main/resources`当我在eclipse中调试应用程序时，它运行良好。

但是当我将它导出到一个可运行的 jar 文件（排除所有必需的库和资源），并在命令行中运行它时。 `java -jar myapp.jar`，应用程序找不到`log4j.xml`. 警告是：

```
log4j:WARN No appenders could be found for logger.
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more in
fo. 
```

当我将 放入放置`log4j.xml`的文件夹时`myapp.jar`，它又可以工作了！

我怎样才能使用`log4j.xml`包装中的`myapp.jar`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:50:57.597

问题是您的`log4j.xml`文件最终位于`resources`jar 内的文件夹中。这意味着要么您的源代码结构错误，要么 Eclipse 不关心它。您的文件夹结构类似于 Maven 项目。如果是，请尝试使用 Maven 创建 har 文件。这会将 log4j 配置文件放在类路径根目录中。否则，您可以尝试通过添加系统属性来启动 jar 文件`-Dlog4j.configuration=resources/log4j.xml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:36:20.410

我找到了我的问题！~我使用了maven，但是通过eclipse扩展了项目。当我使用`mvn assembly:assembly`时，它运作良好

# php - 单击提交按钮时更新数据库

> ID：16097507
> 
> 赞同：-3
> 
> 时间：2013-04-19T05:02:59.130
> 
> 标签：php, html

嗨，我是 php 新手，我已经在 stackoverflow 中搜索了答案，但不占优势。我的问题是如何使用提交按钮更新数据库。下面是我提交按钮的代码。

```
<?php
if (isset($_POST['action'])) {
$sql="UPDATE leaveapp SET status = Approve WHERE leaveappid = '13'";
        }               
?>
<form action="approve.php" method="post">
<input type="submit" id='approve' value="Yes" name="action" class="approve" />
</form> 
```

提交按钮是假设更新表 leaveapp 并设置状态以批准 leaveappid = 13 但每当我点击提交按钮时，它并没有更新数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:07:08.790

```
 <?php
     $link = mysqli_connect("HOSTNAME", "USERNAME", "PASS", "DBNAME");
    if($_SERVER['REQUEST_METHOD']=='POST'){
    $sql="UPDATE leaveapp SET status = 'Approve' WHERE leaveappid = 13";
    mysqli_query($link,$sql);
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:03:49.730

将您的 sql 更改为此

```
$sql="UPDATE leaveapp SET status = 'Approve' WHERE leaveappid = '13'"; 
```

您需要在 Approve 周围放置单个 qoutes。然后使用执行它

```
mysqli_query($link, $sql); 
```

# c# - 更改方法中的矩阵参数会更改原始矩阵

> ID：16097509
> 
> 赞同：1
> 
> 时间：2013-04-19T05:03:03.417
> 
> 标签：c#, matrix

当我调用名为 Vyměň 的方法时（它具有矩阵“matice”作为形式参数），但是当方法结束时，实际矩阵“a”（不应更改）a 被覆盖。为什么？

```
static int[,] Vyměň(int sloupec, int[,] matice, int [] vektor)
    {
        for (int i = 0; i < matice.GetLength(0); i++)
        {
            matice[i, sloupec] = vektor[i];
        }
        return matice;
    }

    static void Main(string[] args)
    {
        int[,] a = new int[3,4];
        int[] b = new int[3];

        a = Čti(); //Method Čti works fine
        for( int i = 0; i <3; i++)
        {
            b[i] = a[i, 3];
        }

        int detA = determinanty.det3(a);
        Vypis(a);
        int detX = determinanty.det3(Vyměň(0, a, b));
        Vypis(a);
        int detY = determinanty.det3(Vyměň(1, a,b));
        Vypis(a);
        int detZ = determinanty.det3(Vyměň(2, a,b));
        Vypis(a);

        double x = detX / detA;
        double y = detY / detA;
        double z = detZ / detA;
        Console.WriteLine("kořen x = {0}", x);
        Console.WriteLine("kořen y = {0}", y);
        Console.WriteLine("kořen z = {0}", z);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:08:16.220

数组在 C# 中通过引用传递，您正在更改方法内矩阵的值。

如果您不想这样做，请使用数组的克隆来传递方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:09:13.387

我猜你的形式参数是指值类型。
但由于你使用的是数组（引用类型），它们被作为引用类型传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:09:25.453

数组是引用类型 - 因此将这种类型的变量放入方法中不会创建值的副本，而是让方法修改该值。

如果您需要数组/矩阵类型的真正“值”语义，则需要创建自己的类型，强制您创建副本以修改值（类似于`string`）。

# c++ - 如何使用 DEV C++ 构建发布 exe？

> ID：16097513
> 
> 赞同：5
> 
> 时间：2013-04-19T05:03:39.747
> 
> 标签：c++, release, dev-c++

我想构建 exe 以在另一台计算机上工作。我相信我已经找到了程序所需的 dll，并将它们与应用程序以及应用程序在运行时加载的所有文件一起包含在同一目录中。将文件夹放入 USB 中，首先在我的 PC 上对其进行测试，然后运行，将 USB 插入另一台计算机，应用程序在另一台计算机上执行时立即终止。没有丢失 dll 或任何类型的错误，只是打开和关闭。所以我想尝试在发布模式下构建 exe，就像我过去使用 Visual Studio 所做的那样，但我似乎无法在 DEV c++ 中找到任何这样的构建选项。也许那不是我的问题，对我有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:30:48.547

如果您只需要 gpsvc.dll 的 32 位副本，您可以尝试从实际的 32 位版本的 Windows 获取它，然后将它与您的应用程序使用的所有其他 dll 一起放置。但是，它是 Windows 提供的 dll，所以我不认为你真的应该这样做，而且它可能最终无法正常工作。也就是说，64 位 Windows 可能会注意到这一点，并且不允许您加载 DLL。

至于构建“发布 exe”，我认为 Dev C++ 不像 Visual Studio 和许多其他 IDE 那样具有发布或调试构建配置的概念。您可以做的是转到项目选项，然后是编译器选项卡，然后是下面列表中的链接器标题。如果“生成调试信息”设置为“是”，请将其更改为“否”。如果需要，您还可以将“剥离可执行文件”设置为“是”，以及在“链接器”下方的“优化”标题下打开各种优化设置。

或者，您可以使用 Dev C++ 自动生成的 makefile 并对其进行更改，将其保存在不同的文件名下，例如“my_project_release.win”。你要做的是改变它以删除命令行开关，如 -g、-g3 或其他类似的标志，这些标志允许在编译的二进制文件中包含调试信息。要从编译后的二进制文件中去除符号，请将 -s 添加到 CXXFLAGS 和 CFLAGS 生成文件变量中，方法与从生成文件中删除调试信息标志的方式相同。创建这个新的 makefile 后，再次进入 Project Options 对话框，然后转到 Makefile 选项卡。选中“使用自定义 Makefile...”，然后在此处指定此新 makefile 的位置，您现在应该正在构建可执行文件的发布版本。要切换回调试转换，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-25T21:22:30.630

只需按`Ctrl`+ `h`（或单击项目栏中的对象属性，图标就像一个盾牌）。

然后转到：

编译器 > 链接器 > 生成调试信息 (-g3)

并将其设置为“否”。

只需使用 devc++ 并享受！

# ruby-on-rails - 升级了 Capybara 2，我所有的 has_selector 测试都失败了

> ID：16097516
> 
> 赞同：1
> 
> 时间：2013-04-19T05:03:45.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, capybara

我升级到 Rails 3.2 和 Capybara 2.1，我的 700 个测试中有大约 30% 失败了。一堆失败的测试是这样的：

```
require 'spec_helper'

describe BooksController do
  render_views
  let(:page)  { Capybara::Node::Simple.new(@response.body) }

      describe "new" do

        it "should get new" do
          get :new, :author_id => author_token, :publish_action => "Publish"
          response.should be_success
          page.should have_selector "h1", text:"Transition" 
        end
   end
 end 
```

失败的测试输出是：

```
BooksController should get new content
     Failure/Error: page.should have_selector 'h1', text:'Preview'
     Capybara::ExpectationNotMet:
       expected to find css "h1" with text "Preview" but there were no matches
     # ./spec/controllers/books_controller_spec.rb:46:in `block (5 levels) in <top (required)>' 
```

当我使用 print page.html、save_and_open_page 等时，我得到一个空白或没有输出。但是很多其他的测试都通过了。这似乎与检查 h1 标签有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:15:40.413

查看[升级到 Capybara 2](http://rubydoc.info/gems/rspec-rails/file/Capybara.md)部分下的 rspec-rails 文档。我承认这个信息有些隐藏，我花了一段时间才找到。

基本上，为了使用 Capybara DSL（页面和访问），您必须将您的规范移动到`spec/features`目录中。所以你只能`page & visit`在验收测试中使用。控制器规格中没有更多页面和访问。`(get|post|put|delete|head/response.body)`控制器规格中只允许使用机架测试 DSL 。

**不**建议这样做，但有一种方法可以让您的规格保持原样：

```
RSpec.configure do |c|
  c.include Capybara::DSL, :example_group => {
    :file_path => "spec/requests"
  }
end 
```

文档指出，如果您走这条路，那么您将覆盖预期的行为并且您正在承担风险。

希望这能让你走上正确的道路

# jquery - jQuery如何将索引号动态添加到表中

> ID：16097519
> 
> 赞同：3
> 
> 时间：2013-04-19T05:03:50.230
> 
> 标签：jquery, html-table, auto-increment

我已经创建了一个表，可以在检查复选框时使用jQuery添加和删除行。我的问题是，如何在第一列动态添加索引号？

我的桌子：

```
 <div>
       <table class="config" id="status_table">
            <thead>
                <tr>
                    <th colspan="4"; style= "padding-bottom: 20px; color:#6666FF; text-align:left; font-size: 1.5em">Output Status</th>
                </tr>
                <tr>
                    <th>Index</th>
                    <th>Output Type</th>
                    <th>Output Number</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td >1</td>
                    <td ><p id="type_row_one"></p></td>
                    <td ><p id="number_row_one"></p></td>
                    <td>
                        <img class="image" id = "off" style="margin-left:20px" src="static/OffLamp-icon.png" >
                        <img class="image" id = "on" style="margin-left:20px" src="static/OnLamp-icon.png" >
                    </td>
                </tr>
            </tbody>       
       </table>                     
    </div> 
```

我的 jQuery：

```
$('#outputCB').change(function(){
                   if($('#outputCB_1').is(':checked')){
                       $('#status_table tr:last').after('<tr id="output_newrow_1"><td>index+1</td><td>testing</td></tr>');}
                    else{
                        $('#status_table').find("#output_newrow_1").remove();
                    }

                }); 
```

因此，`"index+1"`我不希望它能够从先前的索引号增加，并在删除该行时减少。我该怎么做呢？我可以在 Javascript 中分配一个变量和 ++1 或 --1 吗？我真的不知道从哪里开始......

更新：
我试过这个但失败了：

```
 var index=1;
           $('#outputCB').change(function(){
               if($('#outputCB_1' ||'#outputCB_2').is(':checked')){
                   index++;
                   $('#status_table tr:last').after('<tr id="output_newrow_'+index+'"><td>'+index+'</td><td id="type_row_'+index+'">type_row_'+index+'</td><td id="num_row_'+index+'">num row '+index+'</td><td><img class="image" src="static/OffLamp-icon.png" style="height:64px; width=64px"/></td></tr>');
                   }
                else{
                    index--;
                    $('#status_table').find("#output_newrow_'+index+'").remove();
                }

            }); 
```

它永远不会删除任何东西，并且在再次检查 #outputCB_1 时一次添加 2 行。：/ 为什么这样？（抱歉，评论太长了。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:09:27.123

每次添加或删除行时只需调用此代码

```
function updateIndex() 
{ 
    $("#status_table tr").each(function(){
      $( this ).find( "td" ).first().html( $(this).index() + 1 );
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T18:07:04.727

如果您想从正在递增的计数器中跳过 <th> 行：

```
var th_rows_counter = 0;
var all_rows_counter = 0;
$("#icontable tr").each(function() {
    all_rows_counter++;
    $( this ).find( "td" ).first().html( all_rows_counter - th_rows_counter ); // replace <td> content with the counter
    $( this ).find( "th" ).first().each(function(){th_rows_counter++;}); // increment the counter of <th> rows
}); 
```

或跳过具有不同 CSS 样式的 <td> ，您可以使用 not() 函数：$( this ).find( "td" ).not(".otherstyle")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:32:22.987

尝试这样的事情，[小提琴](http://jsfiddle.net/rajesh007/Etu9r/1/)

```
 $(function(){
            $('#outputCB').change(function () {
                if (this.checked) {
                    var index = $('#status_table tbody tr').length + 1
                    $('#status_table tr:last').after('<tr id="output_newrow_1"><td>'+index+'</td><td>testing</td></tr>');
                } else {
                    $('#status_table').find("#output_newrow_1").remove();
                }

            });
        }) 
```

# python - 通过删除换行符将一些连续的行合并为一个

> ID：16097522
> 
> 赞同：0
> 
> 时间：2013-04-19T05:04:11.873
> 
> 标签：python, sed, awk, grep

我有一个带有随机换行符的文本文件。所有新行都以“客户”一词开头。如何删除第二行和第三行末尾的多余换行符？

```
client | This is first row | 2013-02-01 23:45:59 | last column
clientd | second row with a line break
third line part of row 2 | 2013-01-31 12:44:00 | last column
client xyz | some text here | 2013-12-21 
12:54:12 | last column 
```

预期结果：

```
client | This is first row | 2013-02-01 23:45:59 | last column
clientd | second row with a line break third line part of row 2 | 2013-01-31 12:44:00 | last column
client xyz | some text here | 2013-12-21 12:54:12 | last column 
```

sed 命令有效，但如果可能的话，我正在寻找任何改进。

```
cat test.txt | tr '\n' ' ' | sed 's/client/\nclient/g' 
```

还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:29:53.683

这是另一个 awk 单行代码：

```
awk -vRS='(^|\n)client' 'NR>1{print "client"gensub("\n"," ","g",$0)}' file 
```

它通过将记录分隔符 ( `RS`) 设置为与行首匹配的正则表达式来`client`工作。

也可以编写一个正则表达式来匹配换行符后跟除 之外的其他`client`内容，但这并不漂亮：

```
\n([^c]|c[^l]|cl[^i]|cli[^e]|clie[^n]|clien[^t]) 
```

如果您的数据文件不是太大而无法将整个文件读入内存，则可以将上述内容与 perl 一起使用，例如：

```
perl -0777pe "s/\n([^c]|c[^l]|cl[^i]|cli[^e]|clie[^n]|clien[^t])/ \1/g" file 
```

（以上是不完美的，因为每个替代项中的“不匹配”字符可能是换行符，在这种情况下它不会更改为空格。可以通过更改 to 的每个实例来修复它`[^X]`，`(?:$|[^X])`如果你应该这样做你真的想使用它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:48:34.507

Python

```
>>> with open('test.txt') as fin:
        print fin.readline().rstrip(), # don't prepend \n to first line
        for line in fin:
            print line.rstrip().replace('client', '\nclient'),

client | This is first row | 2013-02-01 23:45:59 | last column 
clientd | second row with a line break third line part of row 2 | 2013-01-31 12:44:00 | last column 
client xyz | some text here | 2013-12-21 12:54:12 | last column 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:11:18.297

单程：

```
awk '/^client/{if (x)print x;x=$0;next}{x=x FS $0;}END{print x}' file 
```

每次遇到客户记录时，打印上一条记录并开始在变量 x 中累积当前记录，直到检索到下一条客户记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T06:39:58.420

这可能对您有用（GNU sed）：

```
sed -r ':a;$!N;/^(client).*\n\1/!{s/\n/ /;ta};P;D' file 
```

如果不需要空格，这将用空格替换额外的换行符：

```
sed -r ':a;$!N;/^(client).*\n\1/!{s/\n//;ta};P;D' file 
```

# google-app-engine - 如何限制对域别名电子邮件别名的访问

> ID：16097525
> 
> 赞同：0
> 
> 时间：2013-04-19T05:04:44.037
> 
> 标签：google-app-engine, email, google-apps

我有一个使用 bob@A.com 设置的 Google Apps 帐户

我有两家公司 A 和 B。

我有两个关联的域名 A.com 和 B.com

我为 A.com 启动并运行了谷歌应用引擎。

现在我需要为 B.com 启动并运行 Google App Engine。我需要 B.com 的员工拥有电子邮件地址 jack@B.com 和 jill@B.com 我还需要应用引擎来发送电子邮件，例如来自 no-reply@B.com

但是我不希望杰克可以访问 jack@A.com（只有 jack@B.com）。由于杰克只为 B 公司工作。

所以我认为有一个电子邮件别名是行不通的（因为这会让杰克访问 jack@A.com）。

显然 Google App Engine 只能连接到“域别名”：

![域别名](https://i.stack.imgur.com/eH4Js.png)

是我创建其他 Google Apps 帐户的唯一选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:53:18.240

是的，您需要创建一个新的 Google Apps 帐户。但是，为了 AppEngine 的目的，您可以创建一个[免费的 Google Apps 帐户](http://lifehacker.com/5967336/use-google-app-engine-to-get-google-apps-for-your-domain-for-free)（几周前检查过，此过程有效）。

# mongodb - 修改内核代码后有没有更快的方法（< 16mins）编译mongodb源代码？

> ID：16097526
> 
> 赞同：3
> 
> 时间：2013-04-19T05:04:56.007
> 
> 标签：mongodb

这是我第一次尝试处理 mongodb 补丁。

**在 Ubuntu 上启用 cacheDir() 的内核代码修改“time scons --mute=MUTE --dd mongod”需要大约 16 分钟。修改内核代码（在 my_repo/src/mongo/ 中）后，有没有办法更快地编译 mongod 和“all”？**

**细节：**

当每次编译都需要这么长时间时，目前为 mongodb jira 补丁修复内核代码非常耗时。仅包含修改后的 .h 和 .cpp 文件的源目录的初始编译已经完成，这相当快，但随着我的增量开发，我最终需要编译 mongod 和 'all' 以运行一些小测试。我浏览了 mongodb 文档。和其他来源。任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:01:19.150

一些一般提示：

*   建立一个[比](http://www.mongodb.org/about/contributors/scons/). `all`例如，如果您只更改 mongod，则：`scons mongod`.

*   如果您的系统中有多个处理器，请使用 -j numprocs 运行 scons，例如：`scons -j4`对于四核系统。这将并行运行更多作业（默认值为 1）。

*   使用`--d`（调试构建）；这是在优化关闭的情况下构建的。

*   不要使用`--dd`（使用 _DEBUG 和额外断言调试构建），除非您真的需要它并了解额外的开销。

*   如果您有多台计算机可用，您还可以设置[`distcc`](https://code.google.com/p/distcc/)跨多台计算机的分布式构建。

因此，将上述选项放在一起，一个更好的命令行（假设有 4 个内核可用）应该是：`scons -j4 --d mongod`.

您还没有提到硬件规格，但 SSD 也让事情变得更快。

刚刚使用上述选项快速检查了 Macbook Air（2.0ghz 核心 i7，2012 年 6 月后型号）的时间。完整构建为 8 分钟 15 秒；对 src/mongo/db/ 中的 cpp 文件进行小幅更改后的增量构建耗时约 30 秒。

# android - 滚动列表视图并检测结束 - android

> ID：16097529
> 
> 赞同：0
> 
> 时间：2013-04-19T05:05:11.700
> 
> 标签：android, android-scrollview, android-scroll, android-scrollbar

我有一个列表视图，里面有很多项目的线性布局。现在我想在按钮上有一个图像视图，说明向下滚动，直到到达滚动视图的末尾，一旦到达末尾就隐藏它自己。再次，一旦用户向上滚动，图像视图应该重新出现。谁能告诉如何检测滚动视图的结束？搜索了几个论坛，但他们给出了列表视图，但我非常需要滚动视图。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T16:49:18.270

您可以通过以下代码检测滚动的结束

```
if (yourListView.getLastVisiblePosition() == yourListView.getAdapter().getCount() -1 &&
    yourListView.getChildAt(yourListView.getChildCount() - 1).getBottom() <= yourListView.getHeight())
{
    //It is scrolled all the way down here

} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:25:34.400

您必须检查 `getView(int position, View convertView, ViewGroup parent)`BaseAdapter 类中的方法的数组列表计数

```
 public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.rowlayout, parent, false);

    ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);

    // Change the visibility here

     if(list.size >= position)
        imageView.setVisibility(View.Gone);
     else
        imageView.setVisibility(View.Visible);

    return rowView;
  } 
```

# css - div溢出不会水平滚动？

> ID：16097532
> 
> 赞同：0
> 
> 时间：2013-04-19T05:05:33.813
> 
> 标签：css, scroll

我正在尝试使 div 溢出水平滚动而不是垂直滚动，但由于某种原因，即使我尝试 overflow-x:scroll 它也只会垂直滚动。

谁能告诉我我哪里出错了，谢谢

```
<div class="profile_photos_area">
 <?php include('includes/mod_profile/mod_photos/photos.php'); ?>
</div> 
```

照片.php：

```
<?php
$profile_bits = get_profile_bits();
while ($profile = mysql_fetch_array($profile_bits)) { 
$dirname = "./data/photos/".$profile_id."/";
$images = scandir($dirname);
$ignore = Array("_cover.jpg", "_default.jpg", "_starlight.jpg", "_starlight_thumb.jpg", "thumb_pic1.jpg", "thumb_pic2.jpg", "thumb_pic3.jpg", "thumb_pic4.jpg", "thumb_pic5.jpg", "thumb_pic6.jpg", "thumb_pic7.jpg", "thumb_pic8.jpg", "thumb_pic9.jpg", "thumb_pic10.jpg", "thumb_pic11.jpg", "thumb_pic12.jpg", "thumb_pic13.jpg", "thumb_pic14.jpg", "thumb_pic15.jpg", "thumb_pic16.jpg");
foreach($images as $curimg){
if(!in_array($curimg, $ignore) && preg_match("/\.jpg$/i", $curimg)) {
echo "<a href=\"".$dirname.$curimg."\" rel=\"shadowbox\" title=\"<strong>{$profile['display_name']}'s Photo's</strong>\"><img src='".$dirname.$curimg."' class=\"profile_photos\" width=\"170\" height=\"150\" ></a>";
};
} 
}
?> 
```

CSS：

```
.profile_photos_area{
    width:82%;
    height:92px;
    margin-right:16px;
    margin-top:50px;
    position:absolute;
    float:left;
    text-align:left;
    padding-left:18px;
    padding-top:10px;
    -ms-overflow-x: scroll; /* IE8 */
    overflow-x: scroll;
    display:inline-block;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:25:11.977

如果包含的 div 有一个设定的宽度（你的宽度是这样的），那么它会尽可能宽，溢出的文本会换行。

您需要使用的是`white-space:nowrap`停止换行，然后正确设置溢出：

**小提琴：http:**
[//jsfiddle.net/PwVS3/4/](http://jsfiddle.net/PwVS3/4/)

```
.profile_photos_area{
    width:82%;
    height:92px;
    margin-right:16px;
    margin-top:50px;
    position:absolute;
    float:left;
    text-align:left;
    padding-left:18px;
    padding-top:10px;
    display:inline-block;

    /* relevant stuff */
    -ms-overflow-x: auto; /* IE8 */
    overflow-x: auto;
    -ms-overflow-y: hidden; /* IE8 */
    overflow-y: hidden;
    white-space:nowrap;
} 
```

此解决方案适用于您希望在照片区域中使用的任意数量的照片。但是，您需要自己处理换行符，但这可能不适用于您的情况。

附带说明，`overflow:auto`除非内容溢出，否则不会显示滚动条。而`overflow:scroll`无论内容是否溢出，都会显示滚动条。选择你需要的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:26:07.270

[http://jsfiddle.net/dolours/CQ8YN/](http://jsfiddle.net/dolours/CQ8YN/) 像这样修改你的html

```
.inner
{
    width:200%;
}
.profile_photos_area{
    width:100%;
    height:150px;
    margin-right:16px;
    margin-top:50px;
    position:absolute;
    float:left;
    text-align:left;
    padding-left:18px;
    padding-top:10px;
    -ms-overflow-x: scroll; /* IE8 */
    overflow-x: scroll;
    display:inline-block;

} 
```

我希望这能解决你的问题

# c# - 错误：捕获异常 [错误：不支持的命令 [addSelection |]

> ID：16097534
> 
> 赞同：2
> 
> 时间：2013-04-19T05:05:53.847
> 
> 标签：c#, selenium, webdriver, selenium-webdriver, nunit-2.5

我正在使用带有 C# 的 selenium Web 驱动程序，并尝试在可用列表中选择一个项目时收到错误消息：

> 错误：捕获异常 [错误：不支持的命令 [addSelection |

有人可以帮我弄这个吗？任何解决方法？

我正在尝试从左侧的列表中选择一个项目，然后单击按钮（>）将其移动到右侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:40:33.173

您收到错误是因为并非IDE 中的*所有内容都*可以转换为 WebDriver API。

您必须从逻辑上考虑这一点，而不是依赖 IDE 开始为您生成此代码。

C# 绑定有一个`SelectElement`类，在`OpenQA.Selenium.Support`命名空间内，您需要添加对`WebDriver.Support.dll`程序集的引用。

它包含`select`元素的“常见”用例。有了这个，你可能可以模仿`addSelection`. 我没有使用过 IDE，所以不确定该命令的用途，但您可以简单地执行以下操作：

```
IWebElement element = driver.FindElement(By.Id("a"));
SelectElement select = new SelectElement(element);
select.SelectByValue("2");
select.SelectByText("George");
select.SelectByIndex(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T06:08:52.857

Select selectbox= new Select(driver.findElement(By.id("MY ID"))); selectbox.selectByIndex(2);

# python-2.7 - 将字符串输入附加到列表

> ID：16097535
> 
> 赞同：1
> 
> 时间：2013-04-19T05:05:56.147
> 
> 标签：python-2.7, append

我正在使用 Python 2.7 并在 Ubuntu 和 Windows 中开发应用程序。在 Windows 上它工作正常——没有问题。但在 Ubuntu 上，它似乎在这方面做了一些奇怪的事情：

```
numberoffiles = raw_input('\nHow many files would you like to compare? ')
numberoffiles = int(numberoffiles)

filelist = []
for i in range(numberoffiles):
    myfilename = raw_input('\nEnter a file path: ')
    filelist.append(myfilename)
print filelist 
```

我期待一个格式的文件名列表：

```
['path/to/file1.ext','path/to/file2.ext',...] 
```

但是 Python 正在添加双引号和空格，所以我得到：

```
["'/path/to/file1.ext' ", "'/path/to/file2.ext' ",...] 
```

如果这是一个怪癖，我可以绕过它，但我想了解我做错了什么或者这里到底发生了什么。任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:04:30.917

您将需要检查您的输入。如果您将输入作为**“/路径/文件名”提供，**那么即使在 Windows 上，您也会添加双引号。确保在提供输入时不添加引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:29:46.777

我的钱是额外的引号（和尾随空格），这些引号是您提供给脚本的输入的一部分。

# sql - 在这种情况下，设计这个具有 3 个唯一列的简单表的最佳方法是什么？

> ID：16097542
> 
> 赞同：0
> 
> 时间：2013-04-19T05:07:06.220
> 
> 标签：sql, database-design, query-optimization

说，我有一个 3 列（varchar 类型）的表，唯一键 = 3 列的组合。我是否应该再创建 1 个列（int 类型）并为其设置主键，当然我们仍然设置唯一的（column1、column2、column3）？

那么哪个更好呢？3 个唯一列或 4 个列（1 个主键 + 3 个唯一列），为什么您认为该选项更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:08:56.453

额外的伪键列的​​一个优点是更容易为您的表创建 FK，因为您只有一列要引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:26:25.930

构建该表有三种合理的方法。基本的关系原则是所有已知的约束都*必须*声明给 dbms，因此 dbms 可以强制执行它们。在所有情况下，可能必须将包含真实数据的三列声明为 NOT NULL。

```
create table wibble (
  column_1 data-type not null,
  column_2 data-type not null,
  column_3 data-type not null,
  primary key (column_1, column_2, column_3)
);

create table wibble (
  surrogate_id_number integer primary key,
  column_1 data-type not null,
  column_2 data-type not null,
  column_3 data-type not null,
  unique (column_1, column_2, column_3)
);

create table wibble (
  surrogate_id_number integer not null unique,
  column_1 data-type not null,
  column_2 data-type not null,
  column_3 data-type not null,
  primary key (column_1, column_2, column_3)
); 
```

很明显，仅在 ID 号列上的主键约束不可能起作用。*这*将允许这样的重复数据。

```
1  Value1  Value2  Value3
2  Value1  Value2  Value3
3  Value1  Value2  Value3
4  Value1  Value2  Value3
5  Value1  Value2  Value3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:25:22.950

按照我的说法，您应该将所有列设为主键，因为它永远不允许空值，并且主键索引是表的最有效访问路径。相反，这取决于您的要求是否需要 int 类型 id。

# html - 如何像 Google 页面一样将我的徽标图像和搜索字段居中？（引导程序）

> ID：16097551
> 
> 赞同：0
> 
> 时间：2013-04-19T05:08:11.640
> 
> 标签：html, css, twitter-bootstrap

我很难设计这个。我只希望我的徽标和搜索栏居中，并在上方和下方留出更多空间来填充页面。（这是在 NE1UP dot com）

这只是一个谷歌式的页面，这就是我想要的，但我很难让这个徽标和搜索栏正确对齐和显示，基本上就像谷歌页面一样。我不确定这是否是视觉上的最佳选择，但这是我现在所能想象的，只是想弄清楚我做错了什么。

谢谢你的帮助！

这是 index.htm 中的代码

```
<div class="row">

            <div class="span12">
            <img src="soos.png" width="208px" height="72px">
            <div class="span2">
            </div>
            <div class="span8">

               <form action="search.php" method="get"> 
```

```
<input id="name" style="width:90%;height:50px;margin-top:0px" type="text" name="q" class="input-xxlarge" id="q" placeholder="Enter Search Term Here"/> 
```

搜索

以及来自 main.css 的代码：

```
.span8 input {display: block; margin-left: auto; margin-right: auto;} 
```

.span8 按钮 {margin-left:4.8%}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T05:16:26.397

您可以在 CSS 中添加以下样式：

```
.span12 {text-align: center;}

.span12 img {margin: 20px 0;} 
```

**[小提琴](http://jsfiddle.net/NegYA/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T05:11:39.357

我不知道引导方式，但如果你坚持传统的 CSS，你可以使用`position: absolute;`它

```
.logo {
   position: absolute;
   left: 50%;
   top: 50%;
   width: 300px;
   height: 100px;
   margin-top: -50px; /* Half of total height */
   margin-left: -150px; /* Half of total width */

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-23T16:03:30.930

如果要居中的元素已应用 display:inline，则可以使用边距居中。将此应用于要居中的元素：

```
div.centerthis {
    display:inline;
    margin-left:auto;
    margin-right:auto;
} 
```

这假设该元素的父元素有足够的空间让子元素居中。需要将父级设置为 display:block; 和/或有 width:100% 或类似的东西，以确保有空间让孩子居中。

在 JSfiddle 或 Codepen 上使用一些东西会很有帮助。

# java - 在 Android 应用程序中使用 Gson 反序列化 JSON（错误：NullPointer）

> ID：16097552
> 
> 赞同：0
> 
> 时间：2013-04-19T05:08:15.000
> 
> 标签：java, android, performance, gson, json

在我的 android 应用程序中，我收到来自服务器的 Json 响应：

```
[
   {
    "sm": [
      {
        "tbico": "b43-jeep.png",
        "t": "Welcome!",
        "w": "http://google.com/start",
        "st": "w",
        "wTBL": "wTBLN"
      }, {
        "t": "Content screen title",
        "f": "Eltec%20Spec%20sheet%20Gim%20RD30W.pdf",
        "st": "f"
      }, {
        "tbico": "109-chicken.png",
        "t": "Sub menu",
        "sm": [
          {
            "t": "Screen 1",
            "st": "f"
          }, {
            "t": "Screen 2",
            "w": "Http://google.com",
            "st": "w",
            "wTBL": "wTBLT"
          }
        ],
        "st": "sm"
      }, {
        "st": "f"
      }
    ],
    "st": "tbm"
  }
] 
```

现在我使用 Gson 来解析这个 JSON 文件，例如：

```
//USING GSON In Parse.java
public class Parse {
    public class Setting {
        String sett;
        int[] clorBG;
        int[] colrTR;
        int[] colrTRT;
        int fntIcoGrd;
        boolean statBr;
        //List<Share> shrMnuPrest;   //Place name that matches to json from json-file element
        List<SM> sm;
        List<Share> shrMnuPrest;
        /*
        public boolean getStatbar(){
            return statBr;
        }
        public boolean setStatbar(){
            return this.statBr;
        }*/
    }
    public class Share {
        String shrFBLnk;
        String shrTwtBdy;
        String shrTxtMsgBdy;
        String shrFBBdy;
        String sndEmlBtn;
    }
    public class Screen {
        String tbico;
        String t;
        String st;
        List<SM> sm;
        //List<SM2> sm2; should auto load from <SM> List
    }
    public class SM { //for Table View
        String bgFile;
        String icoSz;
        String t;
        boolean gvHIT;
        int gvNR;
        int gvNC;
        String st;
        List<SM2> sm2;
        List<Share> share;
    }
    static class SM2 { //Sub-menu screen type
        String st;
        String t;
        String f;
        String cusico;
        String bgFile;
        String icoSz;
        String fb;
        String wTBL;
        String w;
    }
    public static void main(String[] args) throws Exception {
        Log.i("RUNNING", "Running Main call");
        String jsonLink = readUrl("http://10.0.2.2/" + "json/config.json");
        JsonElement json = new JsonParser().parse(jsonLink);
        JsonArray array = json.getAsJsonArray();
        Iterator iterator = array.iterator();
        while (iterator.hasNext()) {
            JsonElement json2 = (JsonElement) iterator.next();
            Gson gson = new Gson();
            Setting sett = gson.fromJson(json2, Setting.class);
            //prints entire class
            System.out.println(sett.toString());
            //print WHAT you want!!
            System.out.println(sett.statBr);
            System.out.println(sett.clorBG);
            //System.out.println(sett.colrTRT);
            System.out.println(sett.colrTRT);
        }
        //Gson gson = new Gson();
        //Setting sett = gson.fromJson(json, Setting.class);
        //System.out.println(sett.toString());
    }
} 
```

现在，当我运行函数时，我在 gson 中得到一个 NullPointer 错误；我想要的只是解析这个 JSON，以便我可以在我的应用程序中使用这个文件的值。（我不能更改 JSON 文件，因为我无法控制主服务器，是 android 和 JSON 的新手，谢谢你的帮助。）我在这里发布了代码以及[http://pastebin.com/TJMuG67b](http://pastebin.com/TJMuG67b) 错误：[http ://cl.ly/image/2q0Z0Q0m3F26](http://cl.ly/image/2q0Z0Q0m3F26)

# java - ArrayDeque 的堆栈实现中的 NullPointerException

> ID：16097557
> 
> 赞同：0
> 
> 时间：2013-04-19T05:09:00.840
> 
> 标签：java, nullpointerexception, stack

嘿伙计们，我正在编写一个程序来使用堆栈将中缀表达式转换为后缀表达式，其中输入是从用户那里读取的。问题是堆栈为空的情况下，我在一段调用 peek() 的代码上不断收到空指针异常。令人困惑的是，我有一个 if 语句应该通过调用 isEmpty() 来防止这种情况发生。有任何想法吗？具体来说，输入“A+BC”给我带来了问题，尽管“（A+BC）”工作得很好

```
import java.util.*;
/**
 *
 * @author Adam
 */
public class PostfixConversion
{
    static Deque<Character> stack = new ArrayDeque<>();

    public static boolean precedence(char first, char second)
    {
        if(first == '+' || first == '-')
            return false;
        else if(first == '*' || first == '/')
        {
            if(second == '*' || second == '/')
                return false;
            else
                return true;
        }
        else
            return false;
    }

    public static String convertToPostfix(String infixExp)
    {
        int leftCount = 0;
        int rightCount = 0;
        Character item;

        String rightError = "There is no matching left parenthesis.";
        String leftError = "There is no matching right parenthesis.";
        String postFix = "";

        if(infixExp.indexOf(")") < infixExp.indexOf("("))
            return rightError;
        if(infixExp.lastIndexOf(")") < infixExp.lastIndexOf("("))
            return leftError;

        for(int i = 0; i < infixExp.length(); i++)
        {
            if(Character.isLetter(infixExp.charAt(i)))
                postFix += infixExp.charAt(i);

            if(infixExp.charAt(i) == '(')
            {
                item = infixExp.charAt(i);
                stack.push(item);
                leftCount++;
            }

            if(infixExp.charAt(i) == ')')
            {
                while(stack.peek() != '(')
                    postFix += stack.pop().charValue();
                stack.pop();
                rightCount++;
            }

            if(infixExp.charAt(i) == '+' ||
                infixExp.charAt(i) == '-' ||
                 infixExp.charAt(i) == '*' ||
                  infixExp.charAt(i) == '/')
            {
                if(stack.isEmpty() == false)
                {
                    while(PostfixConversion.precedence(infixExp.charAt(i), stack.peek().charValue()) == false)
                    {
                        if(stack.peek().charValue() == '(')
                            break;
                        postFix += stack.pop().charValue();
                    }
                }

                item = infixExp.charAt(i);
                stack.push(item);
            }
        }

        if(leftCount > rightCount)
            return leftError;
        if(rightCount > leftCount)
            return rightError;

        return postFix;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:11:48.060

在以下循环中：

```
 while(stack.peek() != '(')
            postFix += stack.pop().charValue(); 
```

您不检查堆栈是否为空。

以下循环也是如此：

```
 while(PostfixConversion.precedence(infixExp.charAt(i), stack.peek().charValue()) == false)
            {
                if(stack.peek().charValue() == '(')
                    break;
                postFix += stack.pop().charValue();
            } 
```

一旦堆栈变空，`peek()`将返回`null`，您将从自动拆箱中获得 NPE。

请注意，仅在进入循环*之前*`if`检查您在第二个左右的时间。它不会在任何后续迭代中进行检查，因此不会阻止我上面描述的场景。`while`

# c# - 实现 oauth、动态与显式类型变量

> ID：16097558
> 
> 赞同：2
> 
> 时间：2013-04-19T05:09:05.300
> 
> 标签：c#, .net, asp.net-mvc

我正在尝试在[这些博客](https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Security-scenarios)之后的项目中实施`OAuth`，但我坚持这两行`asp.net-mvc`

```
var response = hc.GetAsync(userInfoUrl).Result;
dynamic userInfo = response.Content.ReadAsAsync().Result; 
```

这给了我以下错误

> 无法从用法中推断方法“System.Net.Http.HttpContentExtensions.ReadAsAsync(System.Net.Http.HttpContent)”的类型参数。尝试明确指定类型参数。

如果我将`userInfo`变量更改为显式类型，此实现是否会中断，如果不是，如何解决这些问题以及为什么使用动态类型？

谢谢。

# java - Hibernate hql inner join eager fetch on one to many, 获取冗余父对象

> ID：16097565
> 
> 赞同：5
> 
> 时间：2013-04-19T05:09:16.263
> 
> 标签：java, hibernate

我有以下实体

**课堂进度笔记**

```
@Entity
public class ProgressNote implements Serializable{

    @Id
    private NotesKey notesKey = new NotesKey();

    private Set<PatientObjective> patientObjectives;

    public NotesKey getNotesKey() {
        return notesKey;
    }
    public void setNotesKey(NotesKey notesKey) {
        this.notesKey = notesKey;
    }

    @OneToMany(fetch=FetchType.LAZY)
    @Access(AccessType.PROPERTY)
    @JoinColumns({
        @JoinColumn(name="noteNumber",referencedColumnName="noteNumber"),
        @JoinColumn(name="ddate",referencedColumnName="ddate"),
        @JoinColumn(name="patient_id",referencedColumnName="patient_id")
    })
    public Set<PatientObjective> getPatientObjectives() {
        return patientObjectives;
    }
    public void setPatientObjectives(Set<PatientObjective> patientObjectives) {
        this.patientObjectives = patientObjectives;
    }

} 
```

**课堂笔记Key**

```
@Embeddable
public class NotesKey implements Serializable{

    private Byte noteNumber;

    @Temporal(javax.persistence.TemporalType.DATE)
    @Column(name="ddate")
    private Date noteDate;

    private Patient patient;

    public Byte getNoteNumber() {
        return noteNumber;
    }

    public void setNoteNumber(Byte noteNumber) {
        this.noteNumber = noteNumber;
    }

    public Date getNoteDate() {
        return noteDate;
    }

    public void setNoteDate(Date noteDate) {
        this.noteDate = noteDate;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @Access(AccessType.PROPERTY)
    public Patient getPatient() {
        return patient;
    }

    public void setPatient(Patient patient) {
        this.patient = patient;
    }

    @Override
    public int hashCode() {
        ........
    }

    @Override
    public boolean equals(Object obj) {
        ........
    }

} 
```

**类 PatientObjective**

```
@Entity
public class PatientObjective implements Serializable{

    @Id
    private PatientObjectiveKey patientObjectiveKey;

    public PatientObjectiveKey getPatientObjectiveKey() {
        return patientObjectiveKey;
    }
    public void setPatientObjectiveKey(PatientObjectiveKey patientObjectiveKey) {
        this.patientObjectiveKey = patientObjectiveKey;
    }

} 
```

**类 PatientObjectiveKey**

```
@Embeddable
public class PatientObjectiveKey implements Serializable{

    private Objective objective;

    private Byte noteNumber;

    @Temporal(javax.persistence.TemporalType.DATE)
    @Column(name="ddate")
    private Date noteDate;

    private Patient patient;

    @ManyToOne(fetch=FetchType.LAZY)
    @Access(AccessType.PROPERTY)
    public Objective getObjective() {
        return objective;
    }

    public void setObjective(Objective objective) {
        this.objective = objective;
    }

    public Byte getNoteNumber() {
        return noteNumber;
    }

    public void setNoteNumber(Byte noteNumber) {
        this.noteNumber = noteNumber;
    }

    public Date getNoteDate() {
        return noteDate;
    }

    public void setNoteDate(Date noteDate) {
        this.noteDate = noteDate;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @Access(AccessType.PROPERTY)
    public Patient getPatient() {
        return patient;
    }

    public void setPatient(Patient patient) {
        this.patient = patient;
    }

    @Override
    public int hashCode() {
        .......
    }

    @Override
    public boolean equals(Object obj) {
        ........
    }

} 
```

***在我使用这个命名查询之后***

> @NamedQuery(name = "findAllProgressNoteWithObjective", query = "from ProgressNote p inner join fetch p.patientObjectives as o where p.notesKey.patient.id = :patientId)") 使用 spring hibernate 模板 findByNamedQueryAndNamedParam

在表中，我有 2 个 ProgressNotes，其中一个具有单个目标，另一个具有 17 个目标。我在Java中得到如下结果。

![来自 Eclipse 的调试信息](https://i.stack.imgur.com/cSvWg.png)

**查询生成为**

```
select progressno0_.ddate as ddate46_0_, progressno0_.noteNumber as noteNumber46_0_, progressno0_.patient_id as patient17_46_0_, patientobj1_.ddate as ddate36_1_, patientobj1_.noteNumber as noteNumber36_1_, patientobj1_.objective_id as objective5_36_1_, patientobj1_.patient_id as patient6_36_1_, progressno0_.assessment as assessment46_0_, progressno0_.bloodPressure1 as bloodPre4_46_0_, progressno0_.bloodPressure2 as bloodPre5_46_0_, progressno0_.creationDate as creation6_46_0_, progressno0_.height as height46_0_, progressno0_.lastUpdatedDate as lastUpda8_46_0_, progressno0_.plans as plans46_0_, progressno0_.status as status46_0_, progressno0_.subject as subject46_0_, progressno0_.temprature as temprature46_0_, progressno0_.tempratureUnit as temprat13_46_0_, progressno0_.lastid as lastid46_0_, progressno0_.waist as waist46_0_, progressno0_.weight as weight46_0_, progressno0_.weightUnit as weightUnit46_0_, patientobj1_.remark as remark36_1_, patientobj1_.value as value36_1_, patientobj1_.ddate as ddate46_0__, patientobj1_.noteNumber as noteNumber46_0__, patientobj1_.patient_id as patient6_46_0__, patientobj1_.ddate as ddate0__, patientobj1_.noteNumber as noteNumber0__, patientobj1_.objective_id as objective5_0__, patientobj1_.patient_id as patient6_0__ from pnheader progressno0_ inner join pnobjremark patientobj1_ on progressno0_.ddate=patientobj1_.ddate and progressno0_.noteNumber=patientobj1_.noteNumber and progressno0_.patient_id=patientobj1_.patient_id where progressno0_.patient_id=? 
```

**问题**

***我看到的问题是为什么我得到多个 ProgressNote(id=152) 的单个实例。有没有办法可以避免这种重复？***

如果有人解释或指出我正确的方向，我将不胜感激。

使用休眠 3.6、Mysql 5.6.10

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T05:30:25.357

使用不同的：

```
select distinct p from ProgressNote p 
inner join fetch p.patientObjectives as o 
where p.notesKey.patient.id = :patientId) 
```

# netsuite - Netsuite：EntitySearhBasic 教程/示例

> ID：16097570
> 
> 赞同：0
> 
> 时间：2013-04-19T05:09:43.530
> 
> 标签：netsuite

我们正在开发 C#.Net4.0 桌面应用程序，用户输入 Netsuite CRM Credtianls 并点击登录按钮。我们能够使用护照身份验证验证用户登录详细信息。有什么方法或 api 可用，我们可以检索列表成功登录后来自 Netsuite CRM 的对象（联系人、客户等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:49:59.927

为了让客户使用 CustomerSearchBasic

[http://tellsaqib.github.io/NSPHP-Doc/dd/d21/class_customer_search_basic.html](http://tellsaqib.github.io/NSPHP-Doc/dd/d21/class_customer_search_basic.html)

同样对于联系人使用 ContactSearchBasic

[http://tellsaqib.github.io/NSPHP-Doc/dc/d48/class_contact_search_basic.html](http://tellsaqib.github.io/NSPHP-Doc/dc/d48/class_contact_search_basic.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T05:33:42.460

您需要使用搜索来获取这些 Customer、Contact 等。这是**Customer Search的示例代码**

```
 CustomerSearch custSearch = new CustomerSearch();
            CustomerSearchBasic custSearchBasic = new CustomerSearchBasic();
            SearchStringField entityId = null;
            if (!customerEmailId.Equals(""))
            {
                entityId = new SearchStringField();
                entityId.@operator = SearchStringFieldOperator.contains;
                entityId.operatorSpecified = true;
                entityId.searchValue = "abc";
                custSearchBasic.email = entityId;
            }                
            custSearch.basic = custSearchBasic;

            SearchPreferences preferences = new SearchPreferences();
            preferences.bodyFieldsOnly = false;
            NetsuiteSession.session.searchPreferences = preferences;

            SearchResult result = NetsuiteSession.session.search(custSearch); 
```

同样，您可以使用搜索来搜索您想要的联系人和其他记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T13:57:53.113

看看[SuiteTalk Schema Browser](https://system.na1.netsuite.com/help/helpcenter/en_US/SchemaBrowser/indexv2013_1_0.html)。

在 Schema 浏览器中，您可以找到 NetSuite API 的完整定义。

UI 不是那么漂亮，但您会在那里找到所有可能的 API 内容。

例如要查找联系人或客户搜索，请在记录下找到Relationship.xsd 并将其展开。

# sip - SIP 用户不能通过星号中的分机号码互相呼叫

> ID：16097571
> 
> 赞同：1
> 
> 时间：2013-04-19T05:09:48.140
> 
> 标签：sip, asterisk

我在 sip.conf 文件中注册了两个 sip 客户端。他们可以从 XLite 客户端互相调用。但是当我想使用分机号码给他们打电话时，它会显示用户未找到错误。以下是 sip.conf 文件中的条目：

```
[ivan]
type=friend 
username=ivan
regexten=1234
secret=pwd_ivan
host=dynamic
context=default

[test]
type=friend 
username=test
secret=pwd_test
regexten=4321
host=dynamic
context=default 
```

在 extensions.conf 文件中，拨号方案如下：

```
[default]
exten => 1234,1,Dial(SIP/ivan)
exten => 4321,1,Dial(SIP/test) 
```

请帮忙在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:53:10.097

一个常见的问题是“iptables”防火墙。如果您运行的是 CentOS 或 Redhat，请尝试

> 服务 iptables 关闭

...然后再试一次。如果它有效，那么只需将适当的规则添加到您的 IPTables 配置中。（有关示例，请参见[http://www.voip-info.org/wiki/view/Asterisk+firewall+rules ）](http://www.voip-info.org/wiki/view/Asterisk+firewall+rules)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:43:05.427

我想你已经设置

```
qualify=yes 
```

在每个同行。

看看会发生什么

```
asterisk -r
core set verbose 4
sip set debug peer ivan
sip set debug peer test 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T08:14:57.873

连接到星号`$ asterisk -rvvvv`以查看会发生什么。

验证您的对等点和通道是否已加载：

```
*CLI> sip show peers
*CLI> sip show users 
```

# java - 从文本文件中提取数据以制作公历

> ID：16097573
> 
> 赞同：0
> 
> 时间：2013-04-19T05:10:14.430
> 
> 标签：java, text-files, text-extraction, gregorian-calendar

我在网上上 Java 课，正在为一项作业苦苦挣扎，我不知道该怎么做，我的教学特别问我们：
“创建一个名为 dteDate 的 GregorianCalendar 对象。对于年、月、日、小时、分钟和秒，从使用 parseInt() 将文件转换为单独的整数变量。然后创建您的 GregorianCalendar 对象。最后，使用 SimpleDateFormat 创建一个名为 strDate 的字符串，其中包含“2013 年 4 月 28 日 12:41”。换句话说，我希望您了解如何从文件中提取一系列字符串，将它们转换为整数，创建一个 GregorianCalendar 对象，然后将其转换回格式化字符串。当然不是最有效的方法，但它会测试你创建日期变量的能力。
我不知道如何从文本文件中提取特定行，以及如何提取整个内容，并且希望我的程序看起来像这样的指导。

```
import java.io.*;
import java.nio.file.*;
import java.util.GregorianCalendar;
public class a19010
{

public static void main(String[] args) 
  {
    Path objPath = Paths.get("dirsize.txt");  
    if (Files.exists(objPath))

    {
        File objFile = objPath.toFile();
        try(BufferedReader in = new BufferedReader(
                                new FileReader(objFile)))
        {
            String line = in.readLine();

            while(line != null)
            {
                System.out.println(line);
                line = in.readLine();
            }

        }    
      catch (IOException e)
      {
        System.out.println(e);  
      }
    }
    else
    {
     System.out.println(
             objPath.toAbsolutePath() + " doesn't exists");   
    }   

    GregorianCalendar dteDate = new GregorianCalendar();
  }
} 
```

这会将整个文本文件打印到控制台，这是 assinment 的第一步，然后我创建了 GregorianCalendar dteDate。我不确定如何提取我需要为我的日历提供相关信息的行，以及在这个程序的这一点上做什么。我不想在这篇文章中说太多话，让我的问题更难回答，所以我会从文本文件中发布相关行，如果我需要在我的问题中添加更多信息或取出一些信息或澄清让我知道我会编辑它。文本文件中带有日期和时间的行是其中的前4行，如下所示：（放入类似的代码以使其清楚）

```
The current date is: Thu 03/28/2013    
Enter the new date: (mm-dd-yy)  
The current time is: 12:41:26.31
Enter the new time: 
```

如果有人知道该怎么做，或者甚至可以为我指明正确的方向，我将不胜感激。

这是我在 Bhushan Bhangale 的帮助下获得的代码，但我无法导入我的日历。

```
String line = in.readLine();
        int lineNum = 1;
        //extract the month
        String monthSubstring = line.substring(25,27);
        int month = Integer.parseInt(monthSubstring) -1 ;
        //extact the year
        String yearSubstring = line.substring(31,35);
        int year = (Integer.parseInt(yearSubstring));
        //extract the date
        String daySubstring = line.substring(28,30);
        int day = Integer.parseInt(daySubstring);

        while(line != null)
        {
            System.out.println(line);
            line = in.readLine();
            lineNum ++;

         if (lineNum == 3)
         {
           //extract the hour
            String hourSubstring = line.substring(21,23);
            int hour = Integer.parseInt(hourSubstring); 
            //extract the minute
            String minuteSubstring = line.substring(24,26);
            int minute = Integer.parseInt(minuteSubstring);
            //extract the second
            String secondSubstring = line.substring(27,29);
            int second= Integer.parseInt(secondSubstring);
           }
       } 
     GregorianCalendar dteDate = new GregorianCalendar(year, month, day, hour, minute, second);
        System.out.println(dteDate.getTime()); 
```

问题是日历看不到小时分钟或秒，我不知道如何让它导入它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:38:56.850

由于它的课堂作业，我将为您提供进一步的提示。

首先让我们假设文件格式是固定的。

第一行有日期，第三行有时间。在 while 循环中，因为您正在逐行阅读，所以您肯定可以处理哪一个是第一行或第三行。

然后从第一行使用 regex (preferable) 或 StringTokenizer 取出日期、月份和年份。忽略这一天，因为它无关紧要。

然后从第三行再次使用正则表达式或标记器取出小时、分钟和秒。

检查 GregorianCalendar api 以设置此信息并创建对象。

使用 SimpleDateFormat 定义所需的日期格式并传递日期以获取格式化日期。

# c++ - C++ 如何将发送消息音量调高？

> ID：16097574
> 
> 赞同：1
> 
> 时间：2013-04-19T05:10:20.173
> 
> 标签：c++, console, volume, sendmessage

如何提高消息音量？我尝试了下面的代码，但它不起作用。请帮我。非常感谢！

```
void main()
{
    HWND hwnd = GetConsoleWindow();
    SendMessage(hwnd, WM_APPCOMMAND, 0, APPCOMMAND_VOLUME_UP);
} 
```

# ios - Resize the carousel view during a screen orientation in ios

> ID：16097577
> 
> 赞同：1
> 
> 时间：2013-04-19T05:10:35.137
> 
> 标签：ios, objective-c, user-interface, icarousel

I have a problem with `iCarousel` view to resizing the item placed in carousel view during screen orientation changes.How can i fix this?

Here is my code

```
- ( void ) handleOrientation:(UIInterfaceOrientation )toInterfaceOrientation {

    if (toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) {

        orient = YES;

        _deptCarousel.center = CGPointMake(390, 628);

    }else {

        orient = NO;

        _deptCarousel.center = CGPointMake(512, 455);

    }

}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index
{

    //create a numbered view
    UIView *viewBG = nil;
    viewBG = [[UIImageView alloc]initWithImage:[UIImage imageNamed:IS_IPAD?@"Scroll_Placeholder_ImageiPad.png":@"Carousel_Placeholder_Image.png"]];
    if (IS_IPAD) {
        if (orient) {
            viewBG.frame = CGRectMake(0, 0, 420, 350);
        }else{
            viewBG.frame = CGRectMake(0, 0, 380, 280);
        }
    } else {
        viewBG.frame = CGRectMake(0, 0, 210, 170);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:23:56.540

well for changing the frame you should reload your carousel in your Orientation method otherwise it won't effect it.

```
- ( void ) handleOrientation:(UIInterfaceOrientation )toInterfaceOrientation {

    if (toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) {

        orient = YES;

        _deptCarousel.center = CGPointMake(390, 628);

        //reload your Carousel

    }else {

        orient = NO;

        _deptCarousel.center = CGPointMake(512, 455);

         //reload your Carousel

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:25:30.027

I think you have checked your device orientation when the `iCarousel` loads for the first time.You have to check and resize your `Carousel` View whenever your orientation changes. So try to check it in the orientation delegate like below.

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  UIInterfaceOrientation statusBarOrientation = [[UIApplication sharedApplication] statusBarOrientation];

    if (IS_IPAD) {
       if (orient) {
            viewBG.frame = CGRectMake(0, 0, 420, 350);
         }else{
            viewBG.frame = CGRectMake(0, 0, 380, 280);
         }
    }

    [_deptCarousel reloadData];

  return YES;
} 
```

I think it may help you. Please let me know if you have any queries in this.

Thank you.

# java - BufferedWriter 用 MSB 1 写入 char

> ID：16097579
> 
> 赞同：1
> 
> 时间：2013-04-19T05:11:00.023
> 
> 标签：java, hex, bufferedreader

```
writer = new BufferedWriter(new OutputStreamWriter(System.out));
char[] test = new char[1];
test[0]=(char)128;
writer.write(test,0,1);
writer.flush(); 
```

使用此命令调用；java文件>输出

然后用十六进制编辑器检查“输出”，我希望在文件开头得到字节 0x80，后面什么都没有。相反，我得到 0x3F。通过使用不同的代码（即 64）执行相同的代码，我得到了预期的十六进制 0x40。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:22:07.447

`BufferedWriter`是一个面向字符的流，所以你写的字节被编码成你在文件中看到的不同的东西。使用`BufferedOutputStream`旨在处理此类二进制数据的 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:27:52.677

在这种情况下，OutputStreamWriter 使用平台的默认字符编码将字符转换为字节。如果您想在文件中看到 0x80 (128)，请使用`new OutputStreamWriter(System.out, "ISO-8859-1");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:28:38.007

根据 BufferedWriter 的 Java 6 API，它说：“如果没有缓冲，每次调用 print() 方法都会导致字符转换为字节，然后立即写入文件，这可能非常低效。”

有关相同的更多信息，您可以访问[链接](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html)

# javascript - Three.js 在 Azure 中加载 .OBJ 错误但不是在本地

> ID：16097580
> 
> 赞同：2
> 
> 时间：2013-04-19T05:11:05.047
> 
> 标签：javascript, html, azure, three.js, webgl

我正在使用three.js for webGL来加载.obj，但是在运行Windows Server 2008的Windows Azure中加载.obj时出现问题我使用Google chrome浏览器，它给出了以下错误：

获取[http://websiteaddress.net/webGL/obj/test.mtl](http://websiteaddress.net/webGL/obj/test.mtl) 404（未找到）

甚至，我使用他们的原始源代码来加载 .obj 文件它有同样的错误

当我尝试在服务器中导航其他图像文件时，我可以预览它，例如：（website.net/images/test.gif） - 我可以在浏览器中看到 test.gif 图像

但是当我导航到 .obj 时，我在浏览器中收到错误消息：（例如：website.net/obg/test.obj）

404 - 找不到文件或目录。您要查找的资源可能已被删除、名称已更改或暂时不可用。

我可以在本地查看我的 .obj，但当我将它放在 Azure 中时却不能！谁能帮助我？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-25T05:26:40.637

[已解决] 在 WINDOWS 主机中加载 .OBJ (Wavefront) 文件返回 404 错误 [已解决]

当我使用 Three.js 并加载 .obj 文件时，在 localhost 中对我来说效果很好，但是当从 Windows Hosting 运行文件时，它会为 .obj 文件返回 404。

因此，我们需要将此行添加到项目根文件夹的**web.config**文件中（如果您的项目根文件夹中没有该文件，请继续创建一个。）

**网络配置**

```
 <?xml version="1.0" encoding="UTF-8"?>
        <configuration>
            <system.webServer>
                 <staticContent>
                        <mimeMap fileExtension=".obj" mimeType="application/octet-stream" />
                 </staticContent>
            </system.webServer>
        </configuration> 
```

将 web.config 放置到正确的位置并享受:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:27:27.483

您需要在您的应用程序中添加一个 mime 类型定义，以告诉 IIS 应该如何提供该文件。错误消息中提到的 mime 映射应在 web.config 文件中定义。这是一个例子。

```
<system.webServer>
     <staticContent>
            <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
            <mimeMap fileExtension=".m4v" mimeType="video/m4v" />
     </staticContent>
 </system.webServer> 
```

单击下面的链接以获取 mime 类型的完整列表：

[mime 类型的完整列表](http://reference.sitepoint.com/html/mime-types-full)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:45:13.160

我找到了问题的答案，因为文件扩展名 .obj 尚未映射到我的 Azure 服务器中的 MIME 类型：

检查以下链接以了解如何添加它：

[http://technet.microsoft.com/en-us/library/cc725608(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc725608(v=ws.10).aspx)

您可以在此处查看 MIME 类型：

[http://fileext.com/file-extension/OBJ](http://filext.com/file-extension/OBJ)

将 .obj 映射到 MIME 后，加载它就没有问题了！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-04T21:18:13.437

我想我应该在找到这篇文章后添加我最终做的事情。我将 .mtl 文件用于三个 JS 项目的材料（除了 .obj 之外）。由于我也使用 MTLLoader 来获取材料（我的模型不仅仅是纯色），因此我必须添加以下行：

**网络配置**

```
 <!-- Instruct IISNODE to treate .obj+.mtl models as application/octet data -->
<configuration>
    <system.webServer>
        <staticContent>
            <mimeMap fileExtension=".obj" mimeType="application/octet-stream" />
            <mimeMap fileExtension=".mtl" mimeType="application/octet-stream" />
        </staticContent>
    </system.webServer>
</configuration> 
```

# c - 在C中获取数组的大小

> ID：16097583
> 
> 赞同：1
> 
> 时间：2013-04-19T05:11:14.580
> 
> 标签：c, arrays, pointers, sizeof

我有一个例子如下：

我有一个结构：

```
typedef struct e{

    int *(array[2]); <---in my case this array is a [2][69]

}Example; 
```

然后如果我有这样的功能：

```
int funct(Example *e); 
```

如何获得数组的大小？

我试过了：

```
int size =(sizeof(e->array[0])/sizeof(int)); 
```

但它不返回 69 的值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:13:41.797

您不能，因为您不能将数组传递给函数（或就此返回它们）。当您将数组作为参数传递时，它会衰减为指向第一个元素的指针。您还必须传递大小。

想想看；如果您实际上可以传递一个*数组*（不是指针！它们是不同的动物。），为什么所有这些标准库函数都需要一个指针和大小？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:15:01.643

你必须通过尺寸..没有这个你找不到尺寸..

# java - Android Java - 如何嵌入在线视频

> ID：16097588
> 
> 赞同：0
> 
> 时间：2013-04-19T05:11:39.633
> 
> 标签：java, android, video, embed

我环顾四周，想知道我是否可以使用默认视频播放器/webview 或视频视图在我的 android 应用程序中嵌入和播放这样的视频。

```
< script type = " text/javascript" src="http://URLHERE" > < / script > 
```

我要么希望应用程序在默认视频播放器中播放此视频，要么在应用程序内的 WebView 中播放它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:14:31.917

您可以在示例中使用 VideoView。

```
VideoView videoView = (VideoView) findViewById(R.id.videoView);
//Use a media controller so that you can scroll the video contents
//and also to pause, start the video.
MediaController mediaController = new MediaController(this); 
mediaController.setAnchorView(videoView);
videoView.setMediaController(mediaController);
videoView.setVideoURI(Uri.parse(videoUrl));
videoView.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:21:43.523

为此，您可以使用[MediPlayer.setDataSource](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.lang.String%29)或[VideoView.setVideoURI](http://developer.android.com/reference/android/widget/VideoView.html#setVideoURI%28android.net.Uri%29)。

如果您想通过 android 的媒体播放器播放在线流，`MediaPlayer`并且如果您想在应用程序中显示视图，请使用`VideoView`

# css - 工具提示跟随元素/点

> ID：16097592
> 
> 赞同：0
> 
> 时间：2013-04-19T05:11:48.673
> 
> 标签：css, position, tooltip

我对 CSS 工具提示有一些问题。好的，让我解释一下，假设我必须图片。一张图片在浏览器的左上角和另一个右上角。

当我将鼠标指向左角图片时，工具提示打开图片的右侧位置，这是正确的位置，但是当我将鼠标指向右侧的图片时，它仍然打开图片的右侧位置，这是错误的位置。

我需要的是当我将鼠标指向右上角图片时，工具提示会在图片左侧自动打开。

CSS可以做到这一点或更好地使用javascript打开工具提示？因为我尝试使用相对位置或绝对位置，结果仍然相同。

例如，请转到此链接：[示例](http://www.chandaka.com/wp-content/uploads/2013/04/sample.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:16:58.160

我认为使用 javascript 会有更好的运气。这是一个非常漂亮的 jQuery Tootip 插件示例，它允许您设置相对于元素的位置。

[提示](http://craigsworks.com/projects/qtip/demos/position/corner)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:35:42.327

use data-tooltip attribute with pseudo elements `:before` and `:after`

here is the [demo](http://jsbin.com/owupil/611/edit)

# c++ - 如何在 C++ 的单独文件中定义全局变量？

> ID：16097597
> 
> 赞同：1
> 
> 时间：2013-04-19T05:12:15.210
> 
> 标签：c++, global-variables, header-files

我正在写一个学校项目。在我的项目中，有几个函数可以处理 20-30 个变量。有没有办法可以在一个单独的文件中声明和初始化这些全局变量，这样我的主要代码就可以保持简短和整洁？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T05:17:13.477

您可以将它们创建为单独的全局变量，`extern`在头文件中声明它们，并在一个 C 文件中定义它们。

您还可以在 a 中收集相关变量`struct`，并以相同的方式处理这些变量。

然而，最好的办法是减少对全局变量的需求。如果变量是相关的，你可以传递`struct`s 吗？它们是用来做什么的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T05:16:36.247

将这些变量包装在一个结构中并将这个结构传递给这些函数。保留全局变量通常不是一个好主意。

进一步阅读：[http ://c2.com/cgi/wiki?GlobalVariablesAreBad](http://c2.com/cgi/wiki?GlobalVariablesAreBad)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T06:35:47.847

通常，您不必使用全局变量。

```
// Data.h
#ifndef AMIN_PROJECT0_DATA_H_INCLUDED
#define AMIN_PROJECT0_DATA_H_INCLUDED

#include <string>

struct Data {
    int age;
    std::string surname;
    std::string firstname;
};

#endif // AMIN_PROJECT0_DATA_H_INCLUDED 
```

现在，您可以在源文件中包含该标头，它们将能够使用`Data`. 因此，您可以声明`Data`以参数为参数的函数：

```
void checkName(Data const& d) {
    if (d.surname.empty()) { std::cerr << "What, no surname!\n"; }
    if (d.firstname.empty()) { std::cerr << "What, no first name!\n"; }
} 
```

# php - mySQLi 查询产生空值，尽管查询在函数之外工作

> ID：16097599
> 
> 赞同：0
> 
> 时间：2013-04-19T05:12:25.697
> 
> 标签：php, mysql, mysqli

这个让我在拐弯处开车，只是无法解决。该脚本工作正常，直到我尝试回显最终的 mysqli 查询（zen_id）。我已经在 if 和 while 语句之外测试了查询，它工作正常。它之前的查询也没有任何问题可以检索`$model_array['model']`并完美地回显它。我没有收到任何错误，只是没有输出任何内容。一个 vardump`$id_array['zen_system_id']`给我 null ，同样`$id_array`，`$result_2`也会产生大量这种格式的 null 值：`object(mysqli_result)#5 (5) { ["current_field"]=> int(0) ["field_count"]=> int(1) ["lengths"]=> NULL ["num_rows"]=> int(0) ["type"]=> int(0) }`我想我可能在这里遗漏了一些非常明显的东西我现在只是迷路了，可能与 while 函数有关或者其他的东西？？

```
//Connect to Database
$mysqli = mysqli_connect("localhost", "login", "user", "database");
//Check Connection
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

$result_1 = mysqli_query($mysqli,"SELECT `product_id` FROM oc_product");

while ($rows_1 = mysqli_fetch_array($result_1))
{ 

    $product_id = $rows_1['product_id'];

    $result = mysqli_query($mysqli,"SELECT `product_id` FROM `oc_product_option_value` WHERE `product_id`=$product_id");

    $rows = mysqli_fetch_array($result);

    //echo $product_id . " " . $rows['product_id'] . "</br>";

    if($rows['product_id'] == null) 
    {

        $result = mysqli_query($mysqli,"SELECT `model` FROM `oc_product` WHERE `product_id`=$product_id");
        $model_array = mysqli_fetch_array($result);
        $model = $model_array['model'] . "</br>";

        //echo $model;

        $result_2 = mysqli_query($mysqli,"SELECT `zen_system_id` FROM `oc_wholesale_link` WHERE `model_id`='" . $model . "'");
        $id_array = mysqli_fetch_array($result_2);
        echo $zen_id = $id_array['zen_system_id'];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:38:25.717

尝试封装您传递给第二个查询的数据，此外，为了检查查询是否会返回结果，您可以`if`对 fetch 本身设置一个条件

```
$result = mysqli_query($mysqli,"SELECT `product_id` FROM `oc_product_option_value` WHERE `product_id`= '".$product_id."'");
if($rows = mysqli_fetch_array($result))
{
    $result = mysqli_query($mysqli,"SELECT `model` FROM `oc_product` WHERE `product_id`=  '".$product_id."'");
    $model_array = mysqli_fetch_array($result);
    $model = $model_array['model'];

    //echo $model;

    $result_2 = mysqli_query($mysqli,"SELECT `zen_system_id` FROM `oc_wholesale_link` WHERE `model_id`='" . $model . "'");
    $id_array = mysqli_fetch_array($result_2);
    echo $zen_id = $id_array['zen_system_id'];
}
else
{
    echo 'Product Not Found';
} 
```

我已经改变了这条线`$model = $model_array['model'] . "</br>";`，我只是`<br>`为了调试目的。

`UPDATE`

由于您只需要获取其中不存在的产品 ID，因此`oc_product_option_value`您可以将查询更改为此

```
$result = mysqli_query($mysqli,"SELECT `product_id` FROM `oc_product_option_value` WHERE `product_id`= '".$product_id."'");
if($rows = mysqli_fetch_array($result))
{
    $result = mysqli_query($mysqli,"SELECT `model` FROM `oc_product` WHERE `product_id`=  '".$product_id."'");
    $model_array = mysqli_fetch_array($result);
    $model = $model_array['model'];

    //echo $model;

    $result_2 = mysqli_query($mysqli,"SELECT `zen_system_id` FROM `oc_wholesale_link` WHERE `model_id`='" . $model . "'");
    $id_array = mysqli_fetch_array($result_2);
    echo $zen_id = $id_array['zen_system_id'];
}
else
{
    echo $product_id . '<br>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T13:03:17.647

避免此类失败的简单示例：

```
/* Select queries return a resultset */
$result = mysqli_query($link, "SELECT Name FROM City LIMIT 10")
if (!is_null($result)) {
    printf("Select returned %d rows.\n", mysqli_num_rows($result));

    /* free result set */
    mysqli_free_result($result);
} else {
    echo "Mysqli query failed: " . mysqli_error();
} 
```

# c++ - 通过C中的套接字发送IP地址

> ID：16097601
> 
> 赞同：0
> 
> 时间：2013-04-19T05:12:53.283
> 
> 标签：c++, sockets, winapi, winsock

我目前有一个工作客户端（用 C++ 编写）和一个工作服务器（用 C 编写）。我目前正在尝试弄清楚如何从服务器向客户端发送一条消息，上面写着“你好，（客户端 IP 地址）”，我也想在客户端说“你好”时回复一条消息我的选择。此外，当客户端发送“退出”时，我想断开客户端，但不关闭服务器。下面是我的代码。

```
 while(true)     // loop forever
 {
  client = accept(sock,(struct sockaddr*)&from,&fromlen);      // accept connections

  unsigned long ulAddr = from.sin_addr.s_addr;

  char *client_ip;
  client_ip = inet_ntoa(from.sin_addr);

  cout << "Welcome, " << client_ip << endl; // usually prints hello %s
  // cout << "client before thread:" << (int) client << endl;
  // create our recv_cmds thread and pass client socket as a parameter
  CreateThread(NULL, 0,receive_cmds,(LPVOID)client, 0, &thread);
 }

 WSACleanup(); 
```

更新的代码*我当前的问题是它只是打印`Welcome %s`，而不是实际的 IPv4 地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:26:16.337

> char welcome[90] = "欢迎 %s",inet_ntoa(addr_remote.sin_addr);

您不能在这样的声明中格式化字符串缓冲区。您需要使用`sprintf()`或类似的功能，例如：

```
char welcome[90];
sprintf(welcome, "Welcome %s", inet_ntoa(addr_remote.sin_addr)); 
```

或者使用 a`std::string`代替：

```
std::string welcome = "Welcome " + std::string(inet_ntoa(addr_remote.sin_addr));
...
write(nsockfd , welcome.c_str() , welcome.length()); 
```

# c# - 发布到另一台服务器时控制对齐不正确

> ID：16097606
> 
> 赞同：0
> 
> 时间：2013-04-19T05:13:36.753
> 
> 标签：c#, asp.net, css, visual-studio-2010, controls

我一直在开发服务器上工作。在我的页面上，我有许多控件，例如 RadiobuttonList。

在我的开发服务器上看起来一切正常，但是当我发布到另一台服务器上时，所有控件的对齐都是错误的。例如，对于我的**复选框**：

![在此处输入图像描述](https://i.stack.imgur.com/bR77C.png)

**单选按钮列表**：

![在此处输入图像描述](https://i.stack.imgur.com/6PlpL.png)

并且在表格中的同一单元格上使用**标签+文本框：**

![在此处输入图像描述](https://i.stack.imgur.com/aZkG2.png)

如您所见，框/按钮未与文本对齐。

就代码而言，没有什么特别之处。例如对于 RadiobuttonList：

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server" AutoPostBack="true" RepeatDirection="Horizontal" DataSourceID="SqlDataSource1" DataValueField="Answer_NO" DataTextField="Answer_TEXT">
</asp:RadioButtonList> 
```

和其他控件类似。

我最初使用的是 VS2012 Express，但由于遇到这些问题，我更改为 VS2010，但问题仍然存在。

有任何想法吗？

# visual-studio-2010 - 错误：找不到 Web 服务器“http://dnndev/Website/DesktopModules/DNNSample/”

> ID：16097609
> 
> 赞同：2
> 
> 时间：2013-04-19T05:13:51.767
> 
> 标签：visual-studio-2010, c#-4.0, iis-7.5, dotnetnuke-5

我在[http://www.youtube.com/watch?v=yKW97CqVb1Y](http://www.youtube.com/watch?v=yKW97CqVb1Y)观看了视频教程。

但是当我创建项目时出现错误

**“Web 应用程序项目 DNNSample 配置为 IIS。找不到 Web 服务器“http//dnndev/Website/DesktopModules/DNNSample/”。**

我尝试通过谷歌搜索重新启动 IIS 等。但没有帮助。（[Satck](https://stackoverflow.com/questions/10889421/the-web-application-project-is-configured-to-use-iis-the-web-server)）

我正在使用 VS10。IIS 为 7.5。我下载的 C# 模板。

任何帮助..我被卡住了。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-07T10:18:30.887

我有同样的问题，我解决了在主机名“dnndev”到 IIS 7.5 的绑定。您可以打开 Internet 信息服务 (IIS) 管理器并右键单击您的网站，然后单击编辑绑定...然后添加名称为“dnndev”的新绑定。

# php - 为多个分支使用加载器类的 PHP 配置文件

> ID：16097615
> 
> 赞同：0
> 
> 时间：2013-04-19T05:14:07.180
> 
> 标签：php, symfony, build, release

我有多个分支，需要根据分支进行不同的配置。我正在使用 prepend loader 类进行配置。我想知道最好的方法。我有 2 个选项，请提供重新评分的建议。

`1\. Give the branch name as argument in the loader.`

`2\. Check the PWD and similar parameters in the loader class`

对此上下文的任何建议表示赞赏。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:53:23.720

看一下`AppKernel.php`文件到 symfony2 中。进入这个文件将是这个函数

```
public function registerContainerConfiguration(LoaderInterface $loader)
{
  $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
} 
```

您可以根据需要“破解”此功能。

显然，您必须“导入”（`use`声明）一个文件，在该文件中指定“规则”以加载正确的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T08:54:02.200

可以使用以下 php 函数：

```
 realpath($_SERVER['PHP_SELF']); 
```

这将提供路径，然后可以展开该路径以获得分支名称。几周以来，该解决方案运行良好，因此我确信这是最简单和最安全的方法。

# python - 在交互式 python shell 中如何进行搜索

> ID：16097616
> 
> 赞同：-1
> 
> 时间：2013-04-19T05:14:09.617
> 
> 标签：python, search, dir

有时，我需要使用 dir(obj) 来查找哪些成员和方法属于 obj。然后我得到了很多方法，即一个像下面这样的大列表：

```
['__class__', '__delattr__', '__delitem__', '__dict__', '__doc__', '__eq__', '__format__', '__getattribute__', '__hash__', '__init__', '__iter__', '__javaclass__', '__javaobject__', '__len__', '__metaclass__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_addAll', '_removeAll', '_retainAll', 'add', 'addAll', 'addChild', 'ancestor', 'cCommands', 'children', 'childrenAsList', 'clear', 'constituents', 'contains', 'containsAll', 'daughterTrees', 'deepCopy', 'deeperCopy', 'dependencies', 'depth', 'dominates', 'dominationPath', 'equals', 'factory', 'firstChild', 'flatten', 'getChild', 'getChildrenAsList', 'getClass', 'getLeaves', 'getNodeNumber', 'getSpan', 'hashCode', 'headPreTerminal', 'headTerminal', 'indentedListPrint', 'indexLeaves', 'indexOf', 'indexSpans', 'insertDtr', 'isEmpty', 'isLeaf', 'isPhrasal', 'isPrePreTerminal', 'isPreTerminal', 'isUnaryRewrite', 'iterator', 'joinNode', 'label', 'labelFactory', 'labeledYield', 'labels', 'lastChild', 'leaves', 'leftCharEdge', 'localTree', 'localTrees', 'mapDependencies', 'nodeNumber', 'nodeString', 'notify', 'notifyAll', 'numChildren', 'parent', 'pathNodeToNode', 'pennPrint', 'pennString', 'percolateHeads', 'postOrderNodeList', 'preOrderNodeList', 'preTerminalYield', 'printLocalTree', 'prune', 'remove', 'removeAll', 'removeChild', 'retainAll', 'rightCharEdge', 'score', 'setChild', 'setChildren', 'setFromString', 'setLabel', 'setLabels', 'setScore', 'setSpans', 'setValue', 'siblings', 'size', 'skipRoot', 'span', 'spliceOut', 'subTreeList', 'subTrees', 'taggedDependencies', 'taggedYield', 'toArray', 'toString', 'toStringBuilder', 'toStructureDebugString', 'transform', 'treeFactory', 'upperMostUnary', 'value', 'valueOf', 'wait', 'yield_'] 
```

如果我想查找所有方法名称包含“值”，谁能告诉我如何搜索这些结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T05:14:53.453

```
[x for x in dir(obj) if 'value' in x] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:24:59.057

以下语句将测试对象是否具有属性“值”：

```
if hasattr(obj, 'value'): 
```

其中 obj 是您正在搜索其属性的对象。

# django - 带有 django-stage 和 Amazon S3 的 Django 1.4 应用程序，使用不同的服务器提供管理媒体文件

> ID：16097619
> 
> 赞同：0
> 
> 时间：2013-04-19T05:14:21.060
> 
> 标签：django

我正在使用 django-stage、boto 和 Amazon S3 开发 django 1.4 应用程序。我的管理员文件位于不同的服务器中。

在 django 1.3 中，我可以使用 ADMIN_MEDIA_PREFIX，但现在它已被弃用。

你知道如何通过不同的服务器使用管理媒体文件吗？

# sqlite - 在phonegap sqlite中插入动态数据？

> ID：16097621
> 
> 赞同：2
> 
> 时间：2013-04-19T05:14:35.133
> 
> 标签：sqlite, cordova

我已经使用 phonegap 开发了一个应用程序。我想使用 phonegap sqlite 插入数据。我使用 Web 服务从服务器获取了大量数据。现在我想将服务响应数据插入本地数据库。

```
for(var i=0;i<serviceResponse.length;i++) 
{   
    var insertQuery = "";
    insertQuery = "INSERT INTO PREFERENCE(ID,NAME,TYPE,VALUE,ISFAVORITE,RANK) VALUES (" + "'" + serviceResponse[i].prefid + "','" + serviceResponse[i].name + "','" + serviceResponse[i].type+ "','" + serviceResponse[i].ispreference+ "','" +serviceResponse[i].isfavorite+ "','"+serviceResponse[i].rank + "')" ;
    dbinsert.transaction(function insertUserPrefDB(tx){ 
    tx.executeSql(insertQuery);     
      },errorCB);   
    if(i==(serviceResponse.length-1))   
    { 
        alert("Pref Inserted Successfully");                
    }
} 
```

我的问题是，

此代码将在本地数据库中插入最后一条记录。如果服务响应有 10 条记录，那么本地数据库也有 10 条记录，但所有记录都相同（即从服务返回的最后一条记录）。请帮我。

# asp.net - 无法加载文件或程序集“Interop.MODI”或其依赖项之一。试图加载格式不正确的程序

> ID：16097625
> 
> 赞同：0
> 
> 时间：2013-04-19T05:14:54.733
> 
> 标签：asp.net, iis-7

我有一个 Web 应用程序，我将它托管在 IIS 7 上。当我浏览该站点时，它给了我以下错误：

```
Could not load file or assembly 'Interop.MODI' or one of its dependencies. An attempt was made to load a program with an incorrect format.

**Description:** An unhanded exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

**Exception Details:** System.BadImageFormatException: Could not load file or assembly 'Interop.MODI' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
```

我尝试了几件事，但没有任何结果。请给我一些相关的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:33:00.520

Most likely 32 vs. 64 bit mismatch. You are likely trying to load 32 bit Microsoft Office native code into 64bit IIS AppPool. To hack it working - try to change AppPool to 32 bit.

See related [Using Interop.MODI Throws 0x80040154 Exception](https://stackoverflow.com/questions/8213894/using-interop-modi-throws-0x80040154-exception)

Note: using Microsoft Office application/tools on the server is bad idea. Not supported/unlikely to work - enjoy issues at your own risk.

# video - 如何在 Drupal 7 中将 zencoderfetcher 与视频合并和工作

> ID：16097631
> 
> 赞同：0
> 
> 时间：2013-04-19T05:15:29.187
> 
> 标签：video, drupal-7, zencoder

安装的模块：视频、Video.js、Zencoder API

安装的版本：-

Zencoder库-2.1.2，Video.js--3.2.0，视频转码器：Zencoder--1.2

在 Zencoder 中创建帐户后，我成功获得了 Zencoder API 密钥。回发 URL 显示为 localhost/VideoSample/postback/jobs。

我上传了视频内容类型的 mp4 视频，但出现以下错误：

“转码 big_buck_bunny.mp4 出现问题。请检查您最近的日志条目以进行进一步调试。”

当我访问最近的日志条目时，我发现了以下错误：-

*   通知 url (localhost/VideoSample/postback/jobs) 的主机无效：localhost/VideoSample/postback/jobs
*   r10k 不是受支持的视频编解码器。选项包括 h264、mpeg4、theora、vp6、vp8 和 wmv。

在 Internet 上进行了一些研究后，我发现 Zencoder 需要一些公共托管 IP 或公共服务器来发送转码视频。就我而言，该站点不是公开的，因为我在本地主机上工作。基本上经过研究，我发现了两种完成ob的选择。

*   下载 Amazon s3 模块并在其中创建一个存储桶。将 Amazon 的地址提供给 Zencoder API。但这需要在亚马逊上托管视频的费用。我为我的实验放弃了这个选项

Zencoder 提供了一个名为 Zencoder Fetcher 的工具来免费对视频进行转码。它需要在 Windows 7 上安装 Ruby 和 Ruby Gems。我下载了 Ruby 和 RubyuGems 并按照此资源安装材料。

[http://blog.zencoder.com/2011/08/25/fetcher-making-it-even-easier-to-integrate-with-zencoder/](http://blog.zencoder.com/2011/08/25/fetcher-making-it-even-easier-to-integrate-with-zencoder/)

当我提供我的 API 密钥时，我收到以下消息。检索到的通知：0。

我给出了 admin/config/media/video/transcoders 中“Zencoder 的回发 URL”中提到的 url“zencoderfetcher”。但是我在保存选项后收到以下消息。

“无法检索回发 URL：php_network_getaddresses：getaddrinfo 失败：不知道这样的主机。（0）。”

然后我在同一个地方提供 url “localhost/zencoder/notifications_handler”，我再次收到如下消息：-

“无法检索回发 URL：缺少架构 (-1002)。”

我的项目中非常需要转码。请让我知道是否可以将 zencoderfetcher 与视频模块合并和工作。如果是，那么如果您为此提供任何参考或步骤，那将是非常友好的。

注意：- 所有 url 都以 http 作为前缀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:34:40.530

I already answered this in the Drupal forums, but I'll answer here as well in case anyone else finds this.

Essentially all Fetcher does is query the notifications API to get the most recent notifications, and then POSTS those to localhost:3000 (or whatever you set as the local address). This only applies to the notification, and the video must still be uploaded somewhere, so I'm not quite sure what you mean when you say, "Zencoder provides a tool called Zencoder Fetcher to transcode the video free of cost."

It sounds like what's happening here is the module is trying to validate the address, so zencoderfetcher as the notification url won't work. There are other projects that do similar things, such as localtunnel that might solve the issue. With localtunnel you get a valid URI to post your notifications to, but it also requires Ruby / RubyGems.

# r - 创建两个连续数字相乘向量的最快方法

> ID：16097635
> 
> 赞同：1
> 
> 时间：2013-04-19T05:15:51.057
> 
> 标签：r

在 R中`i * (i-1)`为`i = 1`to创建元素向量的最快方法是什么？`i = n`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T05:21:12.493

我确信使用 可能会有更快的解决方案`Rcpp`，但为简单起见，使用 base R

```
n <- 5
x <- seq_len(n)
x[-1] * x[-n]
## [1]  2  6 12 20 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T05:21:13.320

或许像这样：

```
x = 1:10
x[-1] * x[-length(x)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:26:08.133

已经有一个基本功能可以做到这一点：

```
cumprod(x) 
```

# c# - 如何检查行是否存在？

> ID：16097636
> 
> 赞同：7
> 
> 时间：2013-04-19T05:15:58.307
> 
> 标签：c#, sql-server, database

这是我在数据库表中显示/搜索记录的代码。如何验证 roecord 是否存在？它正在搜索成员的 ID。如果记录不存在，我应该如何显示消息？

```
 string connectionstring = "Server=Momal-PC\\MOMAL;Database=Project;Trusted_Connection=True;";
 SqlConnection conn = new SqlConnection();
 conn.ConnectionString = connectionstring;
 conn.Open();

  SqlDataAdapter sda = new SqlDataAdapter("Select * from Members where Number = '" + SearchID.Text + "'", conn);
  DataTable dtStock = new DataTable();

  sda.Fill(dtStock);
  dataGridView1.DataSource = dtStock;

  conn.Close(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T05:18:09.870

```
if( 0 == dtStock.Rows.Count ) // does not exist 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T05:22:27.030

你可以这样使用：

```
If(dtStock.Rows.Count > 0) // If dtStock.Rows.Count == 0 then there is no rows exists.
{
    // Your Logic
} 
```

请参阅[此处](http://www.dotnetperls.com/datatable)和[此处](http://msdn.microsoft.com/en-us/library/system.data.datatable.rows.aspx)。如何使用`Dataset`和`DataTables.`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T05:24:28.660

你可以使用[`DataRowCollection.Count`](http://msdn.microsoft.com/en-us/library/ms135388.aspx)属性。

> 获取此集合中 DataRow 对象的总数。

```
If(0 == dtStock.Rows.Count)
  Console.WriteLine("There are no rows in that datatable") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T05:26:58.867

你可以做这样的事情

```
 If(dtStock.Rows.Count > 0) 
    {
    //code goes here
    dataGridView1.DataSource = dtStock;
    }
    else
    {
    //Record not exists
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T06:23:29.350

此 SQL 可能会快得多，因为它只会向客户端返回 0 或 1 行，而不是每个匹配的行和每一列。改掉使用*的习惯

```
SELECT  1 As X WHERE EXISTS (
    Select 1 from Members where Number = '" + SearchID.Text + "')" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-13T16:15:32.237

```
 public static int RowCount()
        {

            string sqlConnectionString = @" Your connection string";
            SqlConnection con = new SqlConnection(sqlConnectionString);
            con.Open();
            SqlCommand cmd = new SqlCommand("SELECT COUNT(*) AS Expr1 FROM Tablename", con);
            int result = ((int)cmd.ExecuteScalar());
            con.Close();
            return result;
    } 
```

# php - 将表单值插入 MySQL 表的 SQL 查询

> ID：16097637
> 
> 赞同：0
> 
> 时间：2013-04-19T05:16:02.410
> 
> 标签：php, mysql, forms, sql-insert

我正在尝试创建一个 php 表单，将邮政编码插入到我的数据库中，并将其与用户选择的城市和州相关联，但我已经使用它将近两天了，我束手无策。任何帮助是极大的赞赏。

我有三张桌子：

```
|state            |
|state_id INT     | PK
|state VARCHAR(25)|

|city             |
|city_id INT      | PK
|city VARCHAR(45) |
|state_id INT     | PK FK

|zip_code         |
|zip_code_id INT  |
|zip_code VARCHAR(10) |
|city_id INT      | PK FK
|city_state_id INT| PK 
```

我有一个 php 表单，其中输入了邮政编码并选择了城市和州的框（城市选项根据州选择级联）：

```
<form action="address.php" method="post">
<h3>Add ZIP Code</h3>
Zip Code:<br />
<input type="text" name="zipCode" id="zipCode" value="" /><br /><br />
City:<br />
<select name="city" id="cityName">
</select>
<select name="state">
<?php foreach($rows as $row): ?>
<option value="<?php echo htmlentities($row['state'],ENT_QUOTES,'UTF-8');?>"><?php echo htmlentities($row['state'],ENT_QUOTES,'UTF-8');?>
</option>
<?php endforeach; ?>
</select>
<input type="submit" name="zipCode_submit" id="" value="Add Zip Code" />
</form> 
```

这是处理表单的php：

```
if (!empty($_POST['zipCode_submit'])){
if(empty($_POST['zipCode'])){
    die("Please enter a ZIP Code.");
}

if (empty($_POST['city']) || empty($_POST['state'])){
    die("Please select a city and a state.");
}

//Check if zip code is already in database
    $query = "SELECT 1 FROM zip_code WHERE zip_code = :zip_code";
    $query_params = array(':zip_code' => $_POST['zipCode']);

    $stmt = DB\query($query, $query_params, $db);

    if($stmt){
        die("This ZIP code is already entered.");
    }

//Insert zip code into database
    $query = "SOME Magical SQL query that I cannot seem to figure out...";
    $query_params = array(':zipCode' => $_POST['zipCode'], ':city' => $_POST['city'], ':state' => $_POST['state']);

    $stmt = DB\query($query, $query_params, $db);
} 
```

这是我必须处理查询的代码：

```
function query($query, $query_params, $db){
try{
$stmt = $db->prepare($query);
$stmt->execute($query_params);
return ($stmt->rowCount() > 0) ? $stmt : false;
}catch(PDOException $ex){
    //On production remove .getMessage().
    die("Failed to run query: " . $ex->getMessage());
}
} 
```

至于我似乎无法弄清楚的神奇 SQL 查询，我尝试了几个不同的查询（我对 MySQL 比较陌生，所以我没有尝试过任何太高级的东西）。但这是我认为我得到的最接近的：

```
INSERT INTO zip_code (zip_code, city_city_id, city_state_state_id) SELECT zip_code, city_city_id, city_state_state_id
FROM zip_code 
JOIN (city, state)
ON zip_code.city_city_id = city.city_id
AND zip_code.city_state_state_id = state.state_id
WHERE zip_code.zip_code = :zipCode
AND city.city = :city
AND state.state = :state 
```

同样，我正在尝试创建 INSERT 查询，该查询使用来自邮政编码输入字段的数据以及用户选择的城市名称和状态。我似乎无法理解如何将城市和州的名称与从其他表中选择它们的查询中的城市和州 ID 配对......

再次，非常感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:24:59.727

与其给出状态名称`<option value="">`，不如给出**state_id**。然后就完成了。

```
<select name="state">
   <?php foreach($rows as $row): ?>
      <option value="<?php echo $row['state_id']; ?>"><?php echo htmlentities($row['state'],ENT_QUOTES,'UTF-8');?>
      </option>
   <?php endforeach; ?>
</select> 
```

在您提交时，表单会将所选州的 ID 发布到该页面。所以你不需要比较州名并再次获取州ID。您可以直接使用它。在城市的情况下也是如此

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:35:45.433

试试这个

```
$city=$_POST["CITY_ID"];
$state_id=$_POST["STATE_ID"] 
```

将选择的邮政编码值直接放在选择命令中，例如如果邮政编码为 8 则

```
INSERT INTO zip_code (zip_code, city_city_id, city_state_state_id)
(SELECT 8,city.city_id,state.state_id FROM city,state where city.state_id=state.state_id and city.city_id='$city'and state_id='$state_id') 
```

# csv - 如何使用awk从一个csv中删除行，其中一列中的某些值与另一个csv列匹配？

> ID：16097639
> 
> 赞同：1
> 
> 时间：2013-04-19T05:16:07.930
> 
> 标签：csv, awk

我一直在尝试从 csv 中删除行（记录），其中特定列中的条目与其他 csv 中的条目匹配。

csv结构大致是这样的：

1.csv

```
Col1,Col2,Col3,Col4,Col5
sasdf,3432,fjkdk,fjjof,1234
efvr,4565,fhjs,dihi,9999
asa,234,rgs,fkjf,0102
aaa,456,jfvv,dofh,4565
ths,7865,fhjf,fhks,3212 
```

2.csv

```
Col1    
1234
3212    
0102
4565 
```

如您所见，1.csv 的 col5 中有一些值出现在 2.csv 的 col1 我想使用 awk 从 1.csv 中删除与 2.csv 的 col1 匹配的行（记录）

所以输出看起来像这样：

3.csv

```
Col1,Col2,Col3,Col4,Col5
efvr,4565,fhjs,dihi,9999 
```

这是我使用的 awk 脚本：

```
awk -F"," 'NR==FNR{array1[FNR]=$1};NR>FNR{array1[FNR]!~$5}' 2.csv 1.csv > 3.csv 
```

那没起效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:28:30.170

这可以解决问题：

```
$ awk -F, 'NR==FNR{a[$1];next}!($5 in a)' 2.csv 1.csv
Col1,Col2,Col3,Col4,Col5
efvr,4565,fhjs,dihi,9999

$ awk -F, 'NR==FNR{a[$1];next}!($5 in a)' 2.csv 1.csv > 3.csv 
```

# php - 将 SQL 转换为 Kendo UI 列表视图

> ID：16097648
> 
> 赞同：0
> 
> 时间：2013-04-19T05:16:50.020
> 
> 标签：php, sql, kendo-ui, kendo-mobile

我面临的问题是，我有一个事件列表，这些事件会经常更改，并且每次打开时都需要在我的 Kendo UI Mobile Listview 中更新它们。SQL 表以这种格式存在。

```
Item        Type                Description

eventID     Integer (Unique)    A unique ID for the event
name        String (30chars)    The name of the event
time        Time Date           A DTG of the event
category    String(enum values) Category for initial disambiguation
subcategory String(enum values) Further disambiguation category
description String (100chars)   The description that appears for the event.
locationID  Integer(Referenced) A unique ID for the location of the event.
pictureID   Integer(Referenced) A ID for the picture file of the event. 
```

我需要把这个 SQL 数据库变成 Listview，所以我做了一个 PHP 查询，因为我认为这是最好的方法。从那里我在我的脚本文件中创建了一个函数，该函数使用这个 php 文件作为数据源。然后我试图将它绑定到列表视图并失败了。

我的问题是我从这里去哪里？/ 谁能告诉我怎么了？/ 我错过了什么？顺便说一句，我对编码很陌生，这是迄今为止我尝试过的最复杂的事情，所以如果存在大量的错误，请原谅。所有三件事的代码都可以在下面找到：

# PHP 脚本

```
<?php
    $con = mysql_connect("mysql://serverlURL","USERNAME","PASSWORD");
    if (!$con){ die('Could not connect: '.mysqlerror()); }

    mysql_select_db("DBNAME", $con);
    $q = mysql_query("Select * from events;");
    $res = json_encode(mysql_fetch_assoc($q));
    echo $res;

    mysql_close($con);
?> 
```

然后我有这是我的 main.js：

# JavaScript 文件

```
function dataInit(){
    var eventdata = new kendo.data.Datasource({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "/SQLRequests/getevents.php",
        endlessScroll: true,
        dataType: "json",
        success: function (data) {
            $("#flat-listview").kendoMobileListView({
                dataSource: data.d,
                template: $("#ListViewTemplate").html()
                });
            }
        })
    } 
```

然后我的页面在标题中启动脚本，并具有 listview 元素。

# 网页

```
<div data-role="view" data-title="Events" data-style="inset" data-init="datainit">
    <header data-role="header" data-id="default-header">
        <div data-role="navbar">
            <a class="nav-button" data-align="left" data-role="backbutton">Back</a>            
            <span data-role="view-title"></span>
        </div>
    </header>    
    <ul id="eventfeed"></ul>            
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:18:31.463

问题是您混合了 jQuery ajax 方法和 DataSource。这是一个关于如何使用数据源做你想做的事情的小提琴示例：http: [//jsfiddle.net/whizkid747/rDESU/](http://jsfiddle.net/whizkid747/rDESU/)

在这个示例中，我使用 jsFiddle 的 echo 服务来返回发布到 url 的数据。对您来说，您只需要提供您的网址并执行“获取”即可。

像这样的东西：

```
var dataSource = new kendo.data.DataSource({

    transport: {
        read: {

            url: "/SQLRequests/getevents.php",
            dataType: "json",
            type: "GET",            
        }
    }
}); 
```

# javascript - 在简单的函数循环中设置 style.display 时的奇怪行为

> ID：16097649
> 
> 赞同：1
> 
> 时间：2013-04-19T05:16:55.367
> 
> 标签：javascript

考虑以下 JavaScript：

```
function step(show)
{
    for(var i = 1; i <= 5; i++)
    {
        document.getElementById('step' + show).style.display = show == i ? 'block' : 'none';
    }
}

step(2); 
```

结合此 HTML：

```
<div id="step1">1</div>
<div id="step2">2</div>
<div id="step3">3</div>
<div id="step4">4</div>
<div id="step5">5</div> 
```

我希望只`#step2`显示，但我看到相反的结果：

```
1
3
4
5 
```

这是一个[JSFiddle](http://jsfiddle.net/3REbr/)。是什么导致了这种奇怪的行为，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T05:20:06.583

我想你想要：

```
document.getElementById('step' + i).style.display = show == i ? 'block' : 'none'; 
```

注意这里的变化------------^

**演示：http:** [//jsfiddle.net/5DNjc/2/](http://jsfiddle.net/5DNjc/2/)

如果没有更改，您总是`id`使用传入的参数（静态）修改元素。所以从技术上讲，你总是`display`根据最后一个元素是否通过条件来设置（目标元素的）。变化值为`i`。

对我来说，如果你将逻辑分开，它会更易读，并且可能会帮助你一开始就没有遇到问题:) 类似的东西：

```
function step(show) {
    for(var i = 1; i <= 5; i++) {
        var curDiv = document.getElementById('step' + i);
        var shouldBeShown = (i === show);
        var newDisplay = shouldBeShown ? 'block' : 'none';
        curDiv.style.display = newDisplay;
    }
} 
```

**演示：http:** [//jsfiddle.net/5DNjc/3/](http://jsfiddle.net/5DNjc/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:21:39.010

```
document.getElementById('step' + i).style.display = show == i ? 'block' : 'none'; 
```

[http://jsfiddle.net/3REbr/2/](http://jsfiddle.net/3REbr/2/)

# javascript - Touchmove 不适用于 Google 应用脚本 html 服务

> ID：16097651
> 
> 赞同：0
> 
> 时间：2013-04-19T05:17:12.727
> 
> 标签：javascript, ios, google-apps-script, dom-events, touchmove

我试图让`touchmove`事件注册到一个使用 Google 应用脚本 html 服务编写的简单网络应用程序，以便我可以制作在 iPad 和桌面上运行的简单网络应用程序。

我所做的只是首先加载一个网页，它按预期工作：

```
function doGet() {
  return HtmlService.createHtmlOutputFromFile('test page');
} 
```

然后我在 html 页面上创建了一个简单的画布：

```
<html>
 <canvas id="canvas" width="200" height="200" style="border:1px solid #000000;">
 </canvas>
  <script> 
   var canvas=document.getElementById("canvas");
   var ctx=canvas.getContext("2d");
   ctx.font = "bold 12px sans-serif";
   ctx.fillStyle="black";
   ctx.fillText("TEST",50,50);
   canvas.addEventListener("touchmove",testme,false);

   function testme(e) {
     e.preventDefault();
     alert("testme");
   }

 </script>
</html> 
```

这只是我尝试过的最新变体。在此示例中，绑定`click`或全部在桌面上正常工作。但是，在 iPad 上尝试 或不做任何事情。我已经在 iPad 上使用 Chrome 和 Safari 进行了测试。`mousedown``mousemove``touchstart``touchmove`

我也尝试过添加类似的东西：

```
document.addEventListener("touchmove",doPreventDefault,false); 
```

并有一个调用 的简单函数`preventDefault()`，但这也无济于事。

我做错了什么，还是因为它是谷歌应用程序脚本 html 服务而必须做一些不同的事情？

我现在已经尝试过使用 jQuery（刚刚阅读了如何做），但它似乎仍然无法在 iPad 上正常工作：

```
<html>

<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  </head>

<body>
 <p>Test</p>
 <br><br>
 </body>
 <canvas id="canvas" width="200" height="200" style="border:1px solid #000000;">
 </canvas>
  <script> 
   $(document).ready(function() {
   $("#canvas").bind('touchstart',function(e) {
     alert("Hello world!");
   });
   $("p").mousedown(stuff);
   $('#canvas').touchmove(onMove);
 });

   var canvas=document.getElementById("canvas");
   var ctx=canvas.getContext("2d");
   ctx.font = "bold 12px sans-serif";
   ctx.fillStyle="black";
   ctx.fillText("TEST",50,50);

   function onMove(e) {
     alert("testing");
   }

   function stuff(e) {
     alert("Stuff");
   }

 </script>
</html> 
```

该`mousedown`事件运行良好，并且它可以通过触摸来工作 - 事实上，它似乎`mousedown`与`mouseup`iPad 上的触摸相关联。但是`mousemove`不起作用，`touchmove`or `touchstart`or也不起作用`touchend`。如上所示，我已经尝试过使用 bind 和更直接的方法。

我做错了什么来完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:20:39.593

[您可以在 Caja 问题跟踪器上](https://code.google.com/p/google-caja/issues/entry)添加功能请求以将这些事件列入白名单。他们目前不在白名单上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:46:30.223

阅读 htmlservice 文档。除非您使用像 jquery 这样与 caja 兼容的方式，否则您无法操作 dom。

# html - 侧面带有流体背景图像的标题，中间没有背景

> ID：16097653
> 
> 赞同：0
> 
> 时间：2013-04-19T05:17:17.270
> 
> 标签：html, css

我需要一个宽度为 100% 的标题，并且在第 1 列和第 3 列中有 3 列背景图像：

此解决方案需要跨浏览器兼容。

*   第一列是背景图片，宽度为 50%（不包括标题宽度）
*   第二列是标题。这没有背景（透明）。它的宽度不应大于其内容。
*   第三列与第一列相同。

使用表格需要 2 秒：http: [//jsfiddle.net/aLeyS/](http://jsfiddle.net/aLeyS/)

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td></td>
        <td>Caption</td>
        <td></td>
    </tr> 
```

```
table {
    width: 100%;
}
table td:first-child, table td:last-child {
    width: 50%;
    background-image: url(http://fc01.deviantart.net/fs16/i/2007/132/9/4/BW_Striped_Background_Texture_by_Enchantedgal_Stock.jpg);
}
table td:nth-child(2) {
    padding: 0 10px;
    font-size: 30px;
} 
```

如果没有桌子，这似乎要棘手得多。

我尝试在父 div 内的 DIV 上使用设置百分比宽度，但它总是最终使中心列的宽度超过它需要的宽度，或者如果百分比不足，则强制标题换行。

同样，中心栏（标题）的宽度不应大于其内容，并且其背景必须是透明的（不是白色）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:34:08.310

You can fix this by setting `display:table-cell` on the divs. I've updated your [jsFiddle](http://jsfiddle.net/aLeyS/2/).

HTML

```
<div class='bg'></div>
<div class='caption'>Caption</div>
<div class='bg'></div> 
```

CSS

```
div {
  display: table-cell;
}
div.bg {
  width: 50%;
  background-image: url(http://fc01.deviantart.net/fs16/i/2007/132/9/4/BW_Striped_Background_Texture_by_Enchantedgal_Stock.jpg);
}
div.caption {
  padding: 0 10px;
  font-size: 30px;
  text-transform: uppercase;
} 
```

# javascript - 基于浏览器代理设置样式属性

> ID：16097656
> 
> 赞同：1
> 
> 时间：2013-04-19T05:17:43.090
> 
> 标签：javascript, css

我有一个问题正在破坏我的网站外观。我的标头在 Chrome 中运行良好，但在 Firefox 中中断。我修复了它，然后它运行良好 Firefox 并打破了 chrome。

我想知道是否有一种方法可以检测哪个浏览器正在查看该站点并基于该应用适当的样式代码。我一点都不擅长 javascript，所以非常感谢您的支持。

铬的代码：

```
 <table id="mini-login" cellpadding="10" cellspacing="10" style="margin-top:0px; float:left; margin-left:80px;"> 
```

火狐的代码：

```
 <table id="mini-login" cellpadding="10" cellspacing="10" style=" margin-top:-95px; float:left; margin-left:40px;" 
```

![在此处输入图像描述](https://i.stack.imgur.com/BkNX5.png)

![在此处输入图像描述](https://i.stack.imgur.com/vhWUp.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:21:41.273

您可以使用[Modernizr](http://modernizr.com/)，特别是[加载功能](http://modernizr.com/docs/#load)，根据浏览器功能加载资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:23:36.790

首先你应该避免在`<tables>`. 您可以将 div 用于此类布局。

尝试`position:relative`调整`top`, `left`, `right`,`bottom`以便在两个浏览器中运行相同的代码。

# css - 父元素的 CSS 选择器

> ID：16097658
> 
> 赞同：-2
> 
> 时间：2013-04-19T05:17:52.993
> 
> 标签：css

我目前正在阅读 Charles Wyke-Smith 的书“Stylin' With CSS”。

他有一个部分，其中有 nav.menu > ul {} 以及 nav.menu ul {}。

> 选择器的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:19:27.283

[http://www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

**快速说明：**

> E > F 匹配作为元素 E 的子元素的任何 F 元素。

**来自同一来源的更多详细信息：**

> 当元素是某个元素的子元素时，子选择器匹配。子选择器由两个或多个以“>”分隔的选择器组成。
> 
> 以下规则设置作为 BODY 子级的所有 P 元素的样式：
> 
> body > P { line-height: 1.3 } 下面的例子结合了后代选择器和子选择器：
> 
> div ol>li p 它匹配一个 P 元素，它是一个 LI 的后代；LI 元素必须是 OL 元素的子元素；OL 元素必须是 DIV 的后代。请注意，“>”组合符周围的可选空格已被省略。
> 
> 有关选择元素的第一个子元素的信息，请参阅下面的 :first-child 伪类部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:19:46.003

它选择直接子代，而不是层次结构中任何点的后代。

# sql - PostgreSQL：从小到小

> ID：16097659
> 
> 赞同：3
> 
> 时间：2013-04-19T05:18:00.197
> 
> 标签：sql, postgresql, bit-manipulation, 16-bit

据我在 PostgreSQL 中的理解，您无法从十六进制或位转换为 smallint 或其他方式。

要将 int2 转换为 bit16，可以执行以下操作：

```
select ((((-32768)::int2)::int4)::bit(32)<<16)::bit(16)
    Result: 1000000000000000 
```

但是我们怎么能反过来呢？

我有一个 int2 标志，我想在其中设置最高位。但由于我不能将我的位操作与 int2 一起使用，我必须先将其转换为 int4，所以我可以这样做。像这样的东西：

```
SELECT flags, 
       (flags | x'8000'::integer) myInt2Result 
  FROM MyTable; 
```

然后我会使用 myInt2Result 来调用其他进程。为了更容易尝试，让我们想象 flags 是一个值为 2560 的 smallint：

```
SELECT 2560::int2, (2560::int2 | x'8000'::integer)
    RESULT: 35328 
```

由于这大于 +32767 并且我在 PostgreSQL 中没有无符号 smallint，因此我无法将其直接转换为 int2（smallint 超出范围）。

另外：在 PostgreSQL 中我们不能这样做

```
x'8000'::int2 (it would be really handy) 
OR
x'8000'::integer::int2 (smallint out of range) 
```

有没有办法在 PostgreSQL 中做到这一点，或者我必须自己将我的 int4 转换为 int2 （考虑到这些位）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T21:13:43.003

以下表达式在 PostgreSQL 9.1 中适用于我：

```
select ((-32768)::int2)::int4::bit(16);
==>  X'8000'

select ((('X8000'::bit(16))::bit(32)::int4) >> 16)::int2;
==> -32768 
```

编辑：一些证据表明这有效：

```
-- int2 to bit16 and back
create temp table test1 (x int2);
insert into test1 select generate_series(-32768,32767)::int2;
select x from test1 where x != ((x::int4::bit(16) ::bit(32)::int4) >> 16)::int2;
==> no rows selected

-- bit16 to int2 and back
create temp table test2 (x bit(16));
insert into test2 select generate_series(0,65536)::bit(16);
select x from test2 where x != (((x::bit(32)::int4)>>16)::int2) ::int4::bit(16);
==> no rows selected 
```

# jquery - 上一个 + 下一个 div 交换更好的方法

> ID：16097660
> 
> 赞同：1
> 
> 时间：2013-04-19T05:18:03.793
> 
> 标签：jquery, html, swap

我在这里和其他地方整天都在寻找一种方法来使我最初认为很简单的东西工作起来。我想我终于让它工作了，但知道必须有一个更简单的方法。在将我的头撞到墙上之后，我放弃了我的搜索，只是乞求有人告诉我如何以简单的方式做到这一点。

这是我需要做的。在网站的几个页面上，我有一个“上一个”和“下一个”按钮，用于交换在我的页面的另一部分上哪个“div”处于活动状态。无论哪个 div 在给定时间变为“活动”，都需要赋予“活动”类以触发其他事件，如视频开始播放、声音效果、动画等。相同的脚本需要能够从任意数量的页面之一调用，并且“可交换” div 的总数将根据页面而变化。如果在“第一个”div 处于活动状态时按下了上一个按钮，或者在“最后一个”div 处于活动状态时按下了下一个按钮，则不应执行任何操作。

下面是我的javascript

```
function swap(what) {
"use strict";
var theDivs = [], i;
$(".PortSwap").each(function() {
    var cid = $(this).attr("id");
    theDivs.push(cid);
});
for (i = 0; i < theDivs.length; i+=1) {
    if ($("#" + theDivs[i]).hasClass('active')) {
        var curDiv = i;
    } 
    $("#" + theDivs[i]).removeClass('active');
    $("#" + theDivs[i]).hide();
}
if (what === 1) {
    if ((curDiv + 1) < theDivs.length){
        $("#" + theDivs[curDiv + 1]).addClass('active');
        $("#" + theDivs[curDiv + 1]).show();
    } else {
        $("#" + theDivs[curDiv]).addClass('active');
        $("#" + theDivs[curDiv]).show();
    }           
} else {
    if ((curDiv - 1) >= 0){
        $("#" + theDivs[curDiv - 1]).addClass('active');
        $("#" + theDivs[curDiv - 1]).show();
    } else {
        $("#" + theDivs[curDiv]).addClass('active');
        $("#" + theDivs[curDiv]).show();
    }
}
}
window.onload = function () {
    "use strict";
    var pDivs = $(".PortSwap"), k;
    for (k = 0; k < pDivs.length; k += 1) {
        if (pDivs[k] !== -1) {
            $(".PortSwap").hide();
        }
    }
    $('#swap0').show();
    $('#swap0').addClass("active"); 
}; 
```

下面是我的html

```
 <div id="content">
  <div id="ncholder">
    <div id="ncframe"></div>
    <div class="PortSwap" id="swap0"><img src="img/nvc1.jpg" alt="Web Screen 1"></div>
    <div class="PortSwap" id="swap1"><img src="img/nvc2.jpg" alt="Web Screen 2"></div>
    <div class="PortSwap" id="swap2"><img src="img/nvc3.jpg" alt="Web Screen 3"></div>
  </div>
  <div id="ncnav">
    <img src="img/backward.gif" alt="Previous" onClick="swap(0)">
    <img src="img/forward.gif" alt="Next" onClick="swap(1)">
  </div>
</div>
</div> 
```

我的印象是css在这里并不重要，我尝试为此创建一个jsFiddle，但即使它目前似乎正在我的测试服务器上工作，也无法让它工作。

请帮忙！我对javascript并不陌生，尽管已经有一段时间了。我是 jQuery 的新手。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:34:56.813

Try

```
<div id="content">
    <div id="ncholder">
        <div id="ncframe"></div>
        <div class="PortSwap" id="swap0">1<img src="img/nvc1.jpg" alt="Web Screen 1"/></div>
        <div class="PortSwap" id="swap1">2<img src="img/nvc2.jpg" alt="Web Screen 2"/></div>
        <div class="PortSwap" id="swap2">3<img src="img/nvc3.jpg" alt="Web Screen 3"/></div>
     </div>
    <div id="ncnav">
        <img src="img/backward.gif" alt="Previous" onClick="prev()"/>
        <img src="img/forward.gif" alt="Next" onClick="next()"/>
    </div>
</div> 
```

JS

```
$(function(){
    "use strict";
    $('.PortSwap').hide().eq(0).addClass('active').show();
});

function prev(){
    var current = $('.PortSwap.active'), prev = current.prev('.PortSwap');
    console.log(prev.length, prev)
    if(prev.length){
        current.hide().removeClass('active');
        prev.addClass('active').show();
    }
}
function next(){
    var current = $('.PortSwap.active'), next = current.next('.PortSwap');
    if(next.length){
        current.hide().removeClass('active');
        next.addClass('active').show();
    }
} 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/A7Pce/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:44:56.327

**您的解决方案：**

**html代码**

```
<div id="content">
    <div id="ncholder">
        <div id="ncframe"></div>
        <div class="PortSwap" id="swap_0">1<img src="img/nvc1.jpg" alt="Web Screen 1"/></div>
        <div class="PortSwap" id="swap_1">2<img src="img/nvc2.jpg" alt="Web Screen 2"/></div>
        <div class="PortSwap" id="swap_2">3<img src="img/nvc3.jpg" alt="Web Screen 3"/></div>
     </div>
    <div id="ncnav">
        <img src="img/backward.gif" alt="Previous"/>
        <img src="img/forward.gif" alt="Next"/>
    </div>
</div> 
```

**仅 jQuery 代码：**

```
$(function(){
    //this will hide all elements with the class 'portswap';
    //Recommend you set the style (CSS) of PortSwap to 'display: none',
    //so as to avoid flash of unstyled content;
    $(".PortSwap").not('#swap_0').hide();
    $('#swap_0').addClass("active");

    $('.btn_nav').on('click',function(){
        var activediv = $('.PortSwap.active').first();
        var activediv_id = parseInt(activediv[0].id.split('_')[1]);
        switch(this.id){
            //execute code when backward button is pressed
            case 'btn_backward':
                if(activediv_id-1 >= 0){
                    //previous iteration of div is present, show it
                    activediv.removeClass('active').hide();                                
                    $('#swap_'+(activediv_id-1)).show().addClass('active');
                } else {
                    //No previous div is present, remain on same page.
                }
                break;
            //execute code when forward button is pressed
            case 'btn_forward':
                if(activediv_id+1 < $('.PortSwap').length){
                    //Next iteration of div is present, show it
                    activediv.removeClass('active').hide();                                
                    $('#swap_'+(activediv_id+1)).show().addClass('active');
                } else {
                    //No next div is present, remain on same page.
                }                            
                break;
        }
    }); 
}); 
```

**注意：经过测试和工作** **演示：http: [//jsfiddle.net/FPhsm/](http://jsfiddle.net/FPhsm/)* *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:16:48.370

在这个轮播演示中，您可以在页面的任何位置使用上一个和下一个控件（请参阅此[plunker](http://plnkr.co/edit/ze7DeIdk3KqSFZzRA1Of?p=preview)）。您还可以通过使用轮播选择器在控件上指定自定义属性 data-carousel 来同时控制多个轮播。

**Html**（部分代码，完整demo见plunker）

```
<div id="my-carousel" class="carousel">
    <div class="buttons">
        <a class="prev" href="#" data-carousel="#my-carousel"><</a>
        <a class="next" href="#" data-carousel="#my-carousel">></a>
    </div>
    <div class="items">
        <div class="item active">Item #1</div>
        <div class="item">Item #2</div>
        <div class="item">Item #3</div>
    </div>
</div> 
```

**Javascript**

```
// executed on document ready
$(function(){

  // get the active item, if it is not the first, set previous as active
  function prev() {
    var $item = $($(this).data('carousel')).find('.item.active');
    if (!$item.is(':first-child')) {
      $item.removeClass('active').prev('.item').addClass('active');
    }
  }

  // get the active item, if it is not the last, set next as active
  function next() {
    var $item = $($(this).data('carousel')).find('.item.active');
    if (!$item.is(':last-child')) {
      $item.removeClass('active').next('.item').addClass('active');
    }
  }

  // bind the controls to the actions
  $('a.prev').on('click', prev);
  $('a.next').on('click', next);

}); 
```

**CSS**

```
/* make all items hidden by default */
.carousel > .items > .item {
  display: none;
}

/* make active item shown */
.carousel > .items > .item.active {
  display: block;
} 
```

# zend-framework - 使用 zend 模块时处理 Zend Auth 数据

> ID：16097662
> 
> 赞同：0
> 
> 时间：2013-04-19T05:18:15.073
> 
> 标签：zend-framework, zend-auth, zend-session, zend-session-namespace

我正在为我的项目开发基于 zend 模块的结构。作为`Zend_Auth`类的默认会话存储是`Zend_Auth`. 我根据被调用的模块进行了更改。说管理员我使用 auth 命名空间`Admin_Auth`和默认模块我使用命名空间名称`Default_Auth`。

```
$auth = Zend_Auth::getInstance();
$auth->setStorage(new Zend_Auth_Storage_Session('Admin_Auth')); 
```

我这样做是因为，如果我这样做`Zend_Session::destroy()`，即使是默认模块也会破坏完整的会话。所以在注销时使用命名空间等等`Zend_Session::namespaceUnset('Admin_Auth');`

每次在不同的控制器中我都必须使用

```
$auth = Zend_Auth::getInstance();
$auth->setStorage(new Zend_Auth_Storage_Session('Admin_Auth')); 
```

只是指向相应的会话数据。

我正在考虑将它移动到模块`Bootstrap.php`中

```
protected function _initAuth(){

    $auth = Zend_Auth::getInstance();
    $auth->setStorage(new Zend_Auth_Storage_Session('Admin_Auth'));

    return $auth;
} 
```

首先，这是正确的方法吗？其次，如果是，那么我如何访问每个控制器中`$auth`的返回值？`_initAuth()`请

# java - Jelastic 的 Cron 任务

> ID：16097665
> 
> 赞同：1
> 
> 时间：2013-04-19T05:18:44.563
> 
> 标签：java, mysql, cloud, web-hosting, jelastic

我有一个使用 Timer 类用 Java 编写的 cron 作业。此 cron 作业将每隔一小时查询外部 API 并填充 mysql 数据库。我还有一个 Web 应用程序，它将查询填充的数据库并检索结果（基于用户的查询）。这在本地 apache 网络服务器中运行良好。

现在我想将 webapp 和支持的 cron 作业部署到 jelastic - 基于 java 的云网络托管服务。我尝试过部署简单的 webapp 并且工作正常。现在我的下一个任务是让 cron 作业填充数据库。任何人都可以帮助我如何实现这一目标。我不仅限于jelastic 本身，而且很乐意转向任何可以为我的工作服务的服务。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:12:14.513

我来自 Jelastic，我会尽力为您的情况找到最佳解决方案。

您可以尝试使用 Quartz 库，直接从您的代码中安排任务非常容易。

自 Jelastic vesrion 1.9.1 起，就有可能制作和执行 cronjobs (*/1 * * * * java -jar test.jar)。因此，您将有机会运行自己的 .jar 文件，其中可能包含一些代码来填充数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:58:25.600

我得到了我的问题的解决方案。

我已经用控制器和 jsp 页面包装了 cron 作业（使用 TimerTask 用 Ja​​va 编写）。我为*请求映射值*提供了长字符串，这样应用程序的用户将无法访问它（因为每次访问*请求映射值*时都会重新触发 cron 作业）。

希望这会帮助其他有同样问题的人。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T11:00:57.877

Jelastic 现在提供本机 cron 支持，可能对遇到此问题的任何人有用：http: [//docs.jelastic.com/cron-job](http://docs.jelastic.com/cron-job)

Quartz 也记录在 Jelastic 文档中（对于寻求更多帮助以了解如何以这种方式在 Java 中运行计划任务的人）：[http ://docs.jelastic.com/quartz](http://docs.jelastic.com/quartz)

# javascript - 当 Iphone 进入睡眠状态时，Websync 会中断

> ID：16097667
> 
> 赞同：0
> 
> 时间：2013-04-19T05:18:49.763
> 
> 标签：javascript, iphone, cordova, websync

我已经使用 phoneGap 创建了一个 iPhone 应用程序，并且我已经使用 javascript 实现了 Websync 功能，所有功能都运行良好，但我的问题是当 Iphone 进入睡眠模式时，应用程序仍然打开并且当你唤醒手机时 websync 不起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T16:03:45.273

iOS（和其他移动设备）不允许 JavaScript 在设备休眠时在后台运行。如果这样做，电池寿命将受到极大影响。

但是，WebSync 4 应该会在唤醒后自动重新连接到服务器。如果您使用的是 WebSync 3，则必须设置一个标志 (stayConnected) 以获得相同的行为：

```
client.connect({ stayConnected: true }); // WebSync 3 only 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:06:11.907

一般来说，iOS 应用程序不允许在后台保持永久连接。

[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

请记住以下有关非活动应用程序的信息：

> 非活动应用程序在前台运行，但当前未接收事件。（虽然它可能正在执行其他代码。）应用程序通常仅在转换到不同状态时短暂停留在此状态。

![在此处输入图像描述](https://i.stack.imgur.com/AV3td.png)

# javascript - 在javascript中编写这个if语句的正确方法是什么？DOM

> ID：16097669
> 
> 赞同：-1
> 
> 时间：2013-04-19T05:19:10.657
> 
> 标签：javascript, html, dom, if-statement, children

你好我有一个问题，我试图删除所有的孩子，如果孩子存在于一个元素中。我认为一个语句可以写成“如果子节点 > 1 删除所有子节点”，但我不知道格式化它的正确方法。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:21:46.013

应该直截了当。看着[`hasChildNodes()`](https://developer.mozilla.org/en-US/docs/DOM/Node.hasChildNodes)

```
if(node.hasChildNodes()) {
    // insert logic here
} else {
    // something else instead
} 
```

### 直接来自 MDN：

```
var foo = document.getElementById("foo");

if ( foo.hasChildNodes() ) { 
  foo.removeChild( foo.childNodes[0] );
} 
```

在这种情况下，`childNodes`是一个数组。意味着它有一个`length`属性**提示，眨眼眨眼，轻推轻推**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:57:56.167

```
var myNode = document.getElementById("Your ID");
    while (myNode.firstChild) {
        myNode.removeChild(myNode.firstChild);
    } 
```

# c# - Xsd.exe 使用 SubstitutionGroup/anytype 生成不可用的代码

> ID：16097675
> 
> 赞同：5
> 
> 时间：2013-04-19T05:19:30.670
> 
> 标签：c#, xml, xsd, xsd.exe, xbrl

好的。我正在尝试从以下位置生成 c# 类： [http](http://www.xbrl.org/2003/xbrl-instance-2003-12-31.xsd) ://www.xbrl.org/2003/xbrl-instance-2003-12-31.xsd（基本上是 xbrl 模式）。

我对元组和项目有问题。

这是 xsd 的样子：

```
 <element name="tuple" type="anyType" abstract="true">
    <annotation>
      <documentation>
      Abstract tuple element used as head of tuple substitution group
      </documentation>
    </annotation>
  </element>

  <element name="xbrl">
    <annotation>
      <documentation>
      XBRL instance root element.
      </documentation>
    </annotation>
    <complexType>
      <sequence>
        <element ref="link:schemaRef" minOccurs="1" maxOccurs="unbounded" />
        <element ref="link:linkbaseRef" minOccurs="0" maxOccurs="unbounded" />
        <element ref="link:roleRef" minOccurs="0" maxOccurs="unbounded" />
        <element ref="link:arcroleRef" minOccurs="0" maxOccurs="unbounded" />
        <choice minOccurs="0" maxOccurs="unbounded">
          <element ref="xbrli:item"/>
          <element ref="xbrli:tuple"/>
          <element ref="xbrli:context"/>
          <element ref="xbrli:unit"/>
          <element ref="link:footnoteLink"/>
        </choice>
      </sequence>
      <attribute name="id" type="ID" use="optional" />
      <anyAttribute namespace="http://www.w3.org/XML/1998/namespace"
                    processContents="lax" />
    </complexType>
  </element> 
```

序列的生成属性如下所示：

```
[System.Xml.Serialization.XmlElementAttribute("context", typeof(context))]
[System.Xml.Serialization.XmlElementAttribute("item", typeof(object))]
[System.Xml.Serialization.XmlElementAttribute("tuple", typeof(object))]
[System.Xml.Serialization.XmlElementAttribute("unit", typeof(unit))]
[System.Xml.Serialization.XmlElementAttribute("footnoteLink", typeof(footnoteLink),
                             Namespace="http://www.xbrl.org/2003/linkbase")]
public object[] Items {
  get {
    return this.itemsField;
  }
  set {
    this.itemsField = value;
  }
} 
```

基本上不会生成元组和项抽象基类。所以即使其他模式有替代组=“元组”我也不能把它放进去。（我可以，但它不会序列化）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-20T06:28:14.020

Xsd.exe 无法处理 W3C XSD 标准中的一些更复杂的结构。因此，您可能不得不寻找第三方数据绑定产品。

可以在此处找到产品列表（但它们都有些过时了）

*   [http://www.rpbourret.com/xml/XMLDataBinding.htm#designtime](http://www.rpbourret.com/xml/XMLDataBinding.htm#designtime)
*   [http://xmldatabinding.org/](http://xmldatabinding.org/)

我们使用[Liquid XML Data Binder](http://www.liquid-technologies.com/Xml-Data-Binding.aspx)取得了不错的效果。

# ios - UITableView 编辑样式可能不显示删除按钮

> ID：16097676
> 
> 赞同：1
> 
> 时间：2013-04-19T05:19:31.733
> 
> 标签：ios, uitableview, edit

有时，当 UITableView 处于编辑风格时，当您触发删除按钮时，该按钮可能不会显示。这种情况很少发生，但有人也遇到过同样的问题吗？

贴一些代码：

在 viewDidLoad 中，

```
[[self tableView] setEditing:YES animated:YES]; 
```

表视图委托：

```
 - (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        //do sth.
    }
} 
```

# jsf - 如何在单行中显示和选择嵌套对象图

> ID：16097677
> 
> 赞同：0
> 
> 时间：2013-04-19T05:19:42.997
> 
> 标签：jsf, primefaces

我有两个模型如下。

`Country`

```
public class Country{
    private String countryName;
    private List<State> states;

    // Getters/setters.
} 
```

`State`

```
public class State{
    private String stateName;
    private String stateCode;

    // Getters/setters.
} 
```

在我的支持 bean 中，我有一个`List<Country>`属性。

如何在我`<p:dataTable>`的如下显示它？

![在此处输入图像描述](https://i.stack.imgur.com/wFKme.png)

一旦用户选择一行，我如何同时获得国家和州？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:24:27.690

有两种选择：

1.  嵌套数据表：只需在外部数据表的每一行的列中删除另一个数据表：

    ```
    <p:dataTable var="country" value="#{myBean.countries}">
       <p:column>
            <h:outputText value="#{country.name}"/>
         </p:column>
         <p:column>
            <p:dataTable var="state" value="#{country.states}">
                <p:column>
                   <p:outputText value="#{state.name}"/>
                </p:column>
                <p:column>
                   <p:commandButton value="select">
                     <f:param name="state" value="#{state}"/>
                     <f:param name="country" value="#{country}"/>
                   </p:commmandButton>
                </p:column>
            </p:dataTable>
         </p:column>
    </p:dataTable> 
    ```

2.  Primefaces[可扩展行](http://www.primefaces.org/showcase/ui/datatableExpandableRows.jsf)：这个 IMO 可以缩放并且看起来更好

    ```
     <p:dataTable var="country" value="#{myBean.countries}">
         <p:column>
            <h:outputText value="#{country.name}"/>
         </p:column>
         <p:row expansion>
            <p:datalist value ="#{country.states} var="state">
                #{state.name}
            </p:datalist>
         </p:row expansion>
      </p:dataTable> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:47:23.197

Kolossus 提出了非常好的建议，但实际上很有可能它们都不会为您提供所需的数据表示。所以我提出第三种方法：稍微修改模型以适应您的视图需求。这样做是必要的，因为其中的每一行`<p:dataTable>`都由列表中*当前迭代*的元素组成，并且该迭代是唯一的迭代。因此，为了实现您的功能，您应该通过基本上修改模型表示来在迭代元素中提供您需要的所有行信息。

其中一种方法是创建一个包含`Country`和`State`对象的附加类（或者您需要显示的字符串属性）：

```
public class CountryState {
    private Country country;
    private State state;
} 
```

为“即时”（或预先）迭代创建一个列表：

```
public List<CountryState> getCountryStates(List<Country> countries) {
    List<CountryState> lst = new ArrayList<CountryState>();
    for(Country country : countries) {
        for(State state : country.getState()) {
            lst.add(new CountryState(country, state);
        }
    }
    return lst;
} 
```

并在您的数据表中使用它：

```
<p:dataTable value="#{bean.countryStates}" var="cs">
    <p:column headerText="Country name">  
        <h:outputText value="#{cs.country.name}" />  
    </p:column> 
    <p:column headerText="State name">  
        <h:outputText value="#{cs.state.name}" />  
    </p:column> 
    <p:column headerText="State code">  
        <h:outputText value="#{cs.state.code}" />  
    </p:column> 
</p:dataTable> 
```

[`<p:panelGrid>`](http://www.primefaces.org/showcase/ui/panelGrid.jsf)或者，如果您想合并行/列，您可以考虑使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T05:52:54.120

我可以建议您创建一个包含 Country 和 State 对象的第三个 Bean 的一种方法..但是这里的问题是您如何在同一行显示 Country 然后状态，因为这里的问题是 A Country 有很多州..如何有人知道哪个国家有哪个州？另一种方式是您可以显示 Country 然后显示该国家/地区的所有州，但它的外观和感觉会太奇怪，因为您在这里使用 DataTable。如果你也用你的问题解释你的想法，你为什么要这样做，那将是很好的。

# xml - 如何将响应解析为xml

> ID：16097685
> 
> 赞同：-1
> 
> 时间：2013-04-19T05:20:16.140
> 
> 标签：xml, google-app-engine

我在 GAE for java 上使用 URL Fetch 服务，响应返回 XML 类型

```
<?xml version="1.0" encoding="UTF-8"?>
<stories type="array" count="0" total="0" filter="'blawblaw'">
</stories> 
```

我可以将其打印为字符串

```
log.info(new String(response.getContent(),"UTF-8")); 
```

但是，在这里将其转换为字符串并不是正确的事情，因为我需要阅读故事数，然后阅读它下面的故事。请告知如何在 GAE 上执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:04:51.213

Peter 的参考[Best XML parser for Java](https://stackoverflow.com/questions/373833/best-xml-parser-for-java)的回复帮助我得到了它。我终于使用了谷歌应用引擎支持的 SAX 解析器

# java - 是否可以从一个应用程序向另一个应用程序发送消息？

> ID：16097686
> 
> 赞同：0
> 
> 时间：2013-04-19T05:20:21.177
> 
> 标签：java, android, eclipse, messaging

我有一个短信应用程序，我希望用户能够在其他人的手机上向我的另一个应用程序发送短信，该应用程序将显示在该应用程序中。打印在屏幕上。我有一个将发送消息的应用程序和一个在接收设备上将显示消息的应用程序。我该怎么做呢？

接收应用程序是一个 opengl 应用程序，它将在来自发送应用程序的 3d 模型前面显示消息。

如果有人可以帮助我或让我朝着正确的方向前进，我将不胜感激。感谢您的时间。

编辑：这就是我正在做的事情。我正在制作一个女性可以放在手机上的动态壁纸，一个单独的“常规”应用程序将允许丈夫、未婚夫等在重要的其他手机上向 lwp 发送消息，该消息将显示在上半部分lwp屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:25:29.743

```
public void sendSMS(String phoneNumber, String message) 
{ 
PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, 
new Intent(SENT), 0); 

PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0, 
new Intent(DELIVERED), 0); 

SmsManager sms = SmsManager.getDefault(); 
sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI); 
} 
```

你可以做这样的事情来发送短信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:25:17.573

是的，这是可能的。

将[SMSPopup](https://code.google.com/p/android-smspopup/)用作您可以使用的工作 Android 项目。它有你需要的两个部分：发送部分和接收部分，而且它是开源的。这是在[Google Play](https://play.google.com/store/apps/details?id=net.everythingandroid.smspopup)上。

唯一的问题是用户可能不希望这些应用程序消息与他的正常 SMS 消息混合在一起。

因此，您需要使用唯一关键字标记您的应用程序文本消息，以便接收应用程序知道它是给自己的消息，而不是其他人的消息。通过标记，我只是想在其主题行的开头插入一个唯一的关键字。

并且您的接收应用程序必须注册一个优先级为 100 的 BroadcastReceiver，这样如果它检测到一条发给自己的消息，它就可以从内容提供者中删除它并执行 AbortBroadcast，这样其他短信应用程序就不会哔哔声以获取原本不适合他们的消息。

从这个意义上说，SMSPopup 可能已经完成了您需要的 90%。SMSPopup 不会自动删除它收到的短信，也不会根据特定关键字过滤它们，但它必须默默地吞下它们，以免触发正常的短信通知系统（因为 SMSPopup 提供了自己的通知弹出界面代替）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:29:38.087

嗨史蒂夫，我们有 RabbitMQServer 在应用程序之间发送消息。我们应该配置服务器并且需要实现发送和接收消息的功能。[您可以在http://www.rabbitmq.com/](http://www.rabbitmq.com/)获得有关 RabbitMQ 服务器的详细信息。

# ruby - 将哈希插入特定的数组位置

> ID：16097690
> 
> 赞同：1
> 
> 时间：2013-04-19T05:20:30.773
> 
> 标签：ruby, hash

我想将哈希插入数组中的特定位置。我有这个：

```
arr = [
  {:key1=>"one", :key2=>"two", :key3=>"three"},
  {:key1=>"four", :key2=>"five", :key3=>"six"},
  {:key1=>"seven", :key2=>"eight", :key3=>"nine"}
] 
```

并想将此哈希插入数组

```
{:key1=>"---", :key2=>"---", :key3=>"---"} 
```

所以结果是

```
arr = [
  {:key1=>"one", :key2=>"two", :key3=>"three"},
  {:key1=>"---", :key2=>"---", :key3=>"---"},  
  {:key1=>"four", :key2=>"five", :key3=>"six"},
  {:key1=>"seven", :key2=>"eight", :key3=>"nine"}
] 
```

任何人都可以帮忙吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T05:29:37.137

我认为您应该使用数组插入方法。

`arr.insert(1, {:key1=>"---", :key2=>"---", :key3=>"---"} )`

在此处查看示例 [http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-insert](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-insert)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:29:45.227

`arr.insert(1,{:key1=>"---", :key2=>"---", :key3=>"---"})`

# sql - 需要帮助加快此查询

> ID：16097694
> 
> 赞同：0
> 
> 时间：2013-04-19T05:20:43.657
> 
> 标签：sql, sql-server, tsql, sql-server-2012

这是我的查询，大约需要 5 秒来获取 50 条记录。DB 中的总行数约为 100K。

```
exec sp_executesql N'
set arithabort off;
set transaction isolation level read uncommitted;
With cte 
as (
    Select 
        ROW_NUMBER() OVER (Order By  d.LastStatusChangedDateTime  desc ) peta_rn,
        d.DocumentID
    From Documents d
        Inner Join Users u on d.UserID = u.UserID
        Inner Join IGroupes ig on ig.IGroupID = d.IGroupID
        Inner Join ITypes it on it.ITypeID = d.ITypeID 
    Where 1=1  
        And DateDiff(day, @0, d.LastStatusChangedDateTime ) >= 0  
        And DateDiff(day, d.LastStatusChangedDateTime, @1) >= 0  
        And (d.JurisdictionID = @2 
            Or DocumentStatusID = @3 
            Or DocumentStatusID = @4
            Or DocumentStatusID = @5 
            Or DocumentStatusID = @6) 
) 
Select 
    d.DocumentID, 
    d.IsReEfiled, 
    d.IGroupID, 
    d.ITypeID, 
    d.RecordingDateTime, 
    d.CreatedByAccountID, 
    d.JurisdictionID, 
    d.LastStatusChangedDateTime as LastStatusChangedDateTime,  
    d.IDate, 
    d.InstrumentID, 
    d.DocumentStatusID,
    ig.Abbreviation as IGroupAbbreviation, 
    u.Username, 
    j.JDAbbreviation, 
    inf.DocumentName,
    it.Abbreviation as ITypeAbbreviation, 
    d.DocumentDate, 
    ds.Abbreviation as DocumentStatusAbbreviation,  
    ds.Name as DocumentStatusName,
    (Select 
        Cast(
            Case 
                When d.DocumentID = (   Select  Top 1 doc.DocumentID 
                                        From    Documents doc 
                                        Where   doc.JurisdictionID = d.JurisdictionID 
                                                And doc.DocumentStatusID = d.DocumentStatusID
                                        Order By LastStatusChangedDateTime) 
                Then 1 
                Else 0 
            End as bit))
        as CanChangeStatus,
    Upper((
        Select  Top 1 Stuff((
                        Select  ''='' + dbo.GetDocumentNameFromParams(Business, FirstName, MiddleName, LastName, Abbreviation, NameTypeID)  
                        From    DocumentNames dn
                                Left Join Titles t on dn.TitleID = t.TitleID               
                        Where   DocumentID = d.DocumentID
                        For     XML PATH('''')),1,1,''''))) 
    as FlatDocumentName 
From    
    Documents d 
    Left Join IGroupes ig On d.IGroupID = ig.IGroupID 
    Left Join ITypes it On d.ITypeID = it.ITypeID 
    Left Join Users u On u.UserID = d.UserID 
    Left Join DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID 
    Left Join InstrumentFiles inf On d.DocumentID = inf.DocumentID
    Left Join Jurisdictions j on j.JurisdictionID = d.JurisdictionID 
    Inner Join cte on cte.DocumentID = d.DocumentID 
Where   
    1=1 
    And peta_rn>=@13 
    AND peta_rn<=@14 
Order   
    by peta_rn
',N'@0 datetime,@1 datetime,@2 int,@3 int,@4 int,@5 int,@6 int,@7 int,@8 int,@9 int,@10 int,@11 int,@12 int,@13 int,@14 int',
@0='2013-03-01 00:00:00',@1='2013-04-30 00:00:00',@2=1,@3=5,@4=9,@5=4,@6=1,@7=1,@8=5,@9=9,@10=4,@11=1,@12=1,@13=0,@14=50 
```

我确认需要时间的部分是这个罪魁祸首子查询：

```
(Select 
        Cast(
            Case 
                When d.DocumentID = (   Select  Top 1 doc.DocumentID 
                                        From    Documents doc 
                                        Where   doc.JurisdictionID = d.JurisdictionID 
                                                And doc.DocumentStatusID = d.DocumentStatusID
                                        Order By LastStatusChangedDateTime) 
                Then 1 
                Else 0 
            End as bit)) 
```

作为替代方案，我尝试使用此解决方案：

```
exec sp_executesql N'
set arithabort off;
set transaction isolation level read uncommitted;
With cte 
as (
    Select  ROW_NUMBER() OVER (Order By  d.LastStatusChangedDateTime  desc ) peta_rn,
            CASE    WHEN ROW_NUMBER() OVER ( 
                        PARTITION BY d.JurisdictionID, d.DocumentStatusID ORDER BY LastStatusChangedDateTime ) = 1 
                    THEN 1 
                    ELSE 0 
            END 
            AS  CanChangeStatus,
            d.DocumentID
    From    Documents d
            Inner Join Users u on d.UserID = u.UserID
            Inner Join IGroupes ig on ig.IGroupID = d.IGroupID
            Inner Join ITypes it on it.ITypeID = d.ITypeID 
    Where   1=1   
            And (d.JurisdictionID = @2 
                Or DocumentStatusID = @3 
                Or DocumentStatusID = @4
                Or DocumentStatusID = @5 
                Or DocumentStatusID = @6) 
) 
Select 
    d.DocumentID, 
    d.IsReEfiled, 
    d.IGroupID, 
    d.ITypeID, 
    d.RecordingDateTime, 
    d.CreatedByAccountID, 
    d.JurisdictionID, 
    d.LastStatusChangedDateTime as LastStatusChangedDateTime,  
    d.IDate, 
    d.InstrumentID, 
    d.DocumentStatusID,
    ig.Abbreviation as IGroupAbbreviation, 
    u.Username, 
    j.JDAbbreviation, 
    inf.DocumentName,
    it.Abbreviation as ITypeAbbreviation, 
    d.DocumentDate, 
    ds.Abbreviation as DocumentStatusAbbreviation,  
    ds.Name as DocumentStatusName,
    cte.CanChangeStatus,  
    Upper((
        Select  Top 1 Stuff((
                        Select  ''='' + dbo.GetDocumentNameFromParams(Business, FirstName, MiddleName, LastName, Abbreviation, NameTypeID)  
                        From    DocumentNames dn
                                Left Join Titles t on dn.TitleID = t.TitleID               
                        Where   DocumentID = d.DocumentID
                        For     XML PATH('''')),1,1,''''))) 
    as FlatDocumentName                                
From 
    Documents d 
    Left Join IGroupes ig On d.IGroupID = ig.IGroupID 
    Left Join ITypes it On d.ITypeID = it.ITypeID 
    Left Join Users u On u.UserID = d.UserID 
    Left Join DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID
    Left Join InstrumentFiles inf On d.DocumentID = inf.DocumentID 
    Left Join Jurisdictions j on j.JurisdictionID = d.JurisdictionID 
    Inner Join cte on cte.DocumentID = d.DocumentID 
Where 
    1=1 
    And peta_rn>=@13 
    AND peta_rn<=@14 
Order 
    by peta_rn
',N'@0 datetime,@1 datetime,@2 int,@3 int,@4 int,@5 int,@6 int,@7 int,@8 int,@9 int,@10 int,@11 int,@12 int,@13 int,@14 int',
@0='2010-03-01 00:00:00',@1='2013-04-30 00:00:00',@2=1,@3=5,@4=9,@5=4,@6=1,@7=1,@8=5,@9=9,@10=4,@11=1,@12=1,@13=0,@14=50 
```

但它仍然需要超过 4 秒。理想情况下，我希望在 1 秒内得到结果。有什么办法可以加快这个速度吗？我已经在所有搜索列上都有索引，其中包括`JurisdictionID`和`DocumentStatusID`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:38:57.077

试试这个——

```
exec sp_executesql N'
SET arithabort OFF;
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

WITH cte AS 
( 
    SELECT  
          peta_rn = ROW_NUMBER() OVER (ORDER BY d.LastStatusChangedDateTime DESC)  
        , d.DocumentID
        , u.Username
        , it.Abbreviation AS ITypeAbbreviation
        , ig.Abbreviation AS IGroupAbbreviation
        , d.IsReEfiled 
        , d.IGroupID 
        , d.ITypeID 
        , d.RecordingDateTime 
        , d.CreatedByAccountID 
        , d.JurisdictionID
        , d.LastStatusChangedDateTime AS LastStatusChangedDateTime 
        , d.IDate 
        , d.InstrumentID 
        , d.DocumentStatusID
        , d.DocumentDate

    FROM dbo.Documents d
    JOIN dbo.Users u ON d.UserID = u.UserID
    JOIN dbo.IGroupes ig ON ig.IGroupID = d.IGroupID
    JOIN dbo.ITypes it ON it.ITypeID = d.ITypeID
    WHERE DATEDIFF(DAY, @0, d.LastStatusChangedDateTime) >= 0
        AND DATEDIFF(DAY, d.LastStatusChangedDateTime, @1) >= 0
        AND ( 
              d.JurisdictionID = @2
            OR 
              DocumentStatusID IN (@3, @4, @5, @6)
            )
)
SELECT  cte.DocumentID ,
        cte.IsReEfiled ,
        cte.IGroupID ,
        cte.ITypeID ,
        cte.RecordingDateTime ,
        cte.CreatedByAccountID ,
        cte.JurisdictionID ,
        cte.LastStatusChangedDateTime,
        cte.IDate ,
        cte.InstrumentID ,
        cte.DocumentStatusID ,
        cte.IGroupAbbreviation ,
        cte.Username ,
        j.JDAbbreviation ,
        inf.DocumentName ,
        cte.ITypeAbbreviation ,
        cte.DocumentDate ,
        ds.Abbreviation AS DocumentStatusAbbreviation ,
        ds.Name AS DocumentStatusName ,
        ( SELECT CAST(CASE WHEN cte.DocumentID = (
                SELECT TOP 1 doc.DocumentID
                FROM  Documents doc
                WHERE doc.JurisdictionID = cte.JurisdictionID
                        AND doc.DocumentStatusID = cte.DocumentStatusID
                ORDER BY LastStatusChangedDateTime) 
            THEN 1
            ELSE 0
        END AS BIT)
        ) AS CanChangeStatus ,
        UPPER(( SELECT TOP 1
                STUFF(( SELECT '' = ''
                                + dbo.GetDocumentNameFromParams(Business,
                                                    FirstName,
                                                    MiddleName,
                                                    LastName,
                                                    Abbreviation,
                                                    NameTypeID)
                        FROM dbo.DocumentNames dn
                        LEFT JOIN dbo.Titles t ON dn.TitleID = t.TitleID
                        WHERE DocumentID = cte.DocumentID
                        FOR XML PATH('''')), 1, 1, '''')
        )) AS FlatDocumentName
FROM cte
LEFT JOIN dbo.DocumentStatuses ds ON cte.DocumentStatusID = ds.DocumentStatusID
LEFT JOIN dbo.InstrumentFiles inf ON cte.DocumentID = inf.DocumentID
LEFT JOIN dbo.Jurisdictions j ON j.JurisdictionID = cte.JurisdictionID
WHERE peta_rn BETWEEN @13 AND @14
ORDER BY peta_rn',N'@0 datetime,@1 datetime,@2 int,@3 int,@4 int,@5 int,@6 int,@7 int,@8 int,@9 int,@10 int,@11 int,@12 int,@13 int,@14 int',
@0='2013-03-01 00:00:00',@1='2013-04-30 00:00:00',@2=1,@3=5,@4=9,@5=4,@6=1,@7=1,@8=5,@9=9,@10=4,@11=1,@12=1,@13=0,@14=50 
```

# reporting-services - 在部署机器上查看 rdl 报告时出错。报告''的定义无效

> ID：16097699
> 
> 赞同：1
> 
> 时间：2013-04-19T05:21:30.663
> 
> 标签：reporting-services, report-builder2.0

**我有一些适用于Report Builder 2**的 rdl 报告。但是，当我在 Windows 8 机器上部署我的 wpf 应用程序（并使用它进行报告）时，我收到报告定义错误。错误消息说**报告''的定义无效。**即使在 VS 2010 下的开发机器上，报告也能正常工作。报告在 Processing Mode **Local**下运行。以下是我试图解决此问题的几件事。

*   检查 ReportViewer dll 是否在部署机器的 bin 目录中
*   通过在报表生成器 2 和 SQLServer 2008R2 中成功运行它们来检查报表定义是否正确。

有一个我不确定的疑问。windows 8部署机器在控制面板中有一个程序入口“ **Microsoft Report Viewer Redistributable 2008 SP1 ”。**这可能是一个问题。我认为，由于我在部署机器的 bin（可执行）目录中复制了 ReportViewer dll，因此应该加载这些 dll 而不是 GAC。在这个阶段，我不知道为什么我无法在已部署的机器上生成报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:48:44.637

我没有将“ **Microsoft.ReportViewer.ProcessingObjectModel.dll**复制到 bin 目录中，认为报告查看器的 winforms 版本不需要它。在我的开发机器中，此文件位于 GAC 中，因此我没有收到任何错误一样。这让我觉得dll不是必需的。但它是必需的，所以不得不将它复制到我的wpf应用程序的可执行目录中。

涅槃。

# python - Python清理键盘中断

> ID：16097700
> 
> 赞同：2
> 
> 时间：2013-04-19T05:21:33.230
> 
> 标签：python, multithreading, keyboardinterrupt

我有一个 python 脚本，我在其中使用线程来等待我的树莓派上的输入。这是我第一次使用线程，我在处理键盘中断时遇到了一些困难。这不是一个真正的问题，但如果用户提前按下 control-c，就像程序一启动，python 就会吓坏并喷出一个充满导入错误的控制台。我尝试将导入包装在 try - excepts 中，但这似乎不起作用。我感觉它与线程有关，因为我以前从未遇到过这个问题。

除了将所有内容包装在 try-excepts 中，我还尝试了：

```
from threading import Thread
cond = threading.Condition(threading.Lock())
cond.acquire()
cond.wait(None) 
```

我听说在加载之前不允许键盘中断？

反正有没有让python在键盘中断上做任何事情？

任何帮助，将不胜感激。谢谢！

我的代码：

```
import RPi.GPIO as GPIO
import pymysql as mysql
import time
import urllib.request
from threading import Thread

GPIO.setmode(GPIO.BOARD)
GPIO.cleanup()

class table():
    __slots__ = ['pin','num','time']

    def __init__(self, pin, num, time=0):
        self.pin = pin
        self.num = num
        self.time = time

# Room ID
room = 6

# time (minutes)
thetime = 38

# table Setup
tableList = [ \
    table(11,6), \
    table(13,2), \
    table(15,4), \
    table(19,5), \
    table(21,3), \
    table(23,1), \
    ]

def settable(table):
    with urllib.request.urlopen("http://time.zyphox.com") as url:
        curtime = int(url.read())+(thetime*60)

    con = mysql.connect(host="345", user="435", passwd="345435", db="34534543")
    cur = con.cursor()
    cur.execute("UPDATE tables SET time='"+str(curtime)+"' WHERE number='"+str(table)+"' AND id_room='"+str(room)+"'")
    cur.close()
    con.close()
    print("Setting table " + str(table) + " to " + str(thetime) + " minutes...")

def watchtable(table):
    GPIO.setup(table.pin, GPIO.IN)  
    while True:
        if(GPIO.input(table.pin)!=1 and table.time <= time.time()):
            settable(table.num)
            table.time = time.time() + 10

def main():
    print("Loading kitchen System...")
    for table in tableList:
            t = Thread(target=watchtable,args=(table,))
            t.daemon=True
            t.start()
    time.sleep(1)
    print("Successful!")

    while True:
        time.sleep(300)
        print("- Pinging MYSQL database.")

main() 
```

# c# - 使用字符串函数，我如何在 C# 中从 html 属性中获取值？

> ID：16097701
> 
> 赞同：1
> 
> 时间：2013-04-19T05:21:36.243
> 
> 标签：c#, asp.net, html

我有这样的html代码：

```
<div class="topright">
    <a href="" TARGET="_parent" title="News Letter" >
       <img border="none" src="/images/newsletter-button.gif' alt="News Letter" />
     </a>
</div> 
```

我正在 C# 中开发函数 findvalue：

```
if (line.Contains("title"))
{
    sTitle = findvalue("title", line);
} 
```

`findvalue`函数是简单的字符串操作函数，其工作方式类似于此行`<a href="" TARGET="_parent" title="News Letter" >` find 函数将返回 News Letter 值，同样我将获取其他属性的值，如 href、src atc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:37:05.663

您可以使用与 XML 模式相关的类。

```
using System;
using System.IO;
using System.Xml;

public class Sample
{

    public static void Main()
    {

        XmlDocument doc = new XmlDocument();
        doc.LoadXml("<input title='Meluha' Value='1-861001-75-7'>" +
                    "<title>The Imortals of Meluha</title>" +
                    "</input>");

        XmlNode root = doc.DocumentElement;

        XmlNode value = doc.SelectNodes("//input/@value")[0];

        Console.WriteLine("Inner text: " + value.InnerText);

    XmlNode value = doc.SelectNodes("//title/@value")[0];

    Console.WriteLine("Title text: " + value.InnerText);
     } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:55:12.007

更好的是尝试使用 HtmlAgilityPack 而不浪费时间和精力，谢谢你们......

# matlab - 在simulink中以矩阵格式存储数据

> ID：16097708
> 
> 赞同：0
> 
> 时间：2013-04-19T05:21:53.953
> 
> 标签：matlab, function, matrix, simulink

是否可以在模拟过程中以表格或矩阵格式存储数据？我创建了一个启用的子系统，其中是一个嵌入式功能块。每当子系统启用（满足条件）时，两个值说 A 和 B 被输入到嵌入式 matlab 函数中。我要求 A 分别存储在 (1,1) 和 B 中 (1,2)。如果系统再次启用，则新的 A & B 必须存储在 (2,1) 和 (2,2)分别。简而言之，我需要的是

AB

新_A 新_B

再次_新_A 再次_新_B

……

我面临的问题是：

1) 需要将矩阵赋值给mat = zeros(10,2)；在使用它之前。第一次启用子系统时，使用 mat(i,1) = A 在第一列和第二列中输入 A 和 B；垫（我，2）=乙；

当系统在执行期间第二次启用时，先前存储的 A 和 B 的值将被擦除并重置为零。

第一次启用：

AB

0 0

0 0

...

第二种启用：

0 0

新_A 新_B

0 0

...

先前存储的值被重置。

2）不能将mat设置为mat = []；因为它会引发一个错误，即无法将 mat 初始化为空值。

3）我尝试将新行附加到矩阵的末尾，但它再次引发超出预定义尺寸的错误。

请让我知道是否有任何方法可以得到我所期望的。

谢谢你-Shruthi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:39:58.547

要在 MATLAB Function 模块中的不同时间步之间存储数据，您应该使用以下模式。

```
persistent mat
if isempty(mat)
  mat = zeros(10,2);
  cnt = 1; % Counter to count number of times enabled
end

if cnt <= 10
  mat(cnt,1) = A;
  mat(cnt,2) = B;
end
cnt = cnt + 1; 
```

使用持久属性使您能够在不同调用之间存储数据。

# php - 使用特定的正则表达式规则将单个字符串拆分为数组

> ID：16097711
> 
> 赞同：2
> 
> 时间：2013-04-19T05:22:04.200
> 
> 标签：php, regex

我正在处理一个包含多对数据的字符串。每对由一个`;` 符号分隔。`=` 每对包含一个数字和一个字符串，用符号分隔。

我认为这很容易处理，但我发现这对字符串的一半可以包含`=` and`;`符号，使得简单的拆分不可靠。

以下是有问题的字符串的示例：

```
123=one; two;45=three=four;6=five; 
```

为了正确处理它，我需要将其拆分为如下所示的数组：

```
'123', 'one; two'
'45',  'three=four'
'6',   'five' 
```

我处于死胡同，因此不胜感激。

**更新：**

感谢大家的帮助，这是我到目前为止的地方：

```
$input = '123=east; 456=west';

// split matches into array
preg_match_all('~(\d+)=(.*?);(?=\s*(?:\d|$))~', $input, $matches);

$newArray = array();

// extract the relevant data
for ($i = 0; $i < count($matches[2]); $i++) {
    $type   = $matches[2][$i];
    $price  = $matches[1][$i];

    // add each key-value pair to the new array
    $newArray[$i] = array(
        'type'      => "$type",
        'price'     => "$price"
    );
} 
```

哪个输出

```
Array
(
    [0] => Array
        (
            [type] => east
            [price] => 123
        )

) 
```

第二项丢失，因为它最后没有分号，我不知道如何解决这个问题。

我现在意识到这对的数字部分有时包含一个小数点，并且最后一个字符串对后面没有分号。任何提示将不胜感激，因为我运气不佳。

这是考虑到我在最初的问题中遗漏的内容的更新字符串（对不起）：

```
12.30=one; two;45=three=four;600.00=five 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:35:05.957

我认为这是您想要的正则表达式：

```
\s*(\d+)\s*=(.*?);(?=\s*(?:\d|$)) 
```

诀窍是仅将后跟数字的分号视为匹配的结尾。这就是最后的前瞻性。

您可以在[www.debuggex.com](http://www.debuggex.com/?re=%5Cs%2a%28%5Cd%2b%29%5Cs%2a=%28.%2a?%29;%28?=%5Cs%2a%28?%3a%5Cd%7C%24%29%29&flags=&str=123=one;%20two;45=three=four;6=five;)上查看详细的可视化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:49:01.263

您可以使用以下`preg_match_all`代码来捕获它：

```
$str = '123=one; two;45=three=four;6=five;';
if (preg_match_all('~(\d+)=(.+?);(?=\d|$)~', $str, $arr))
   print_r($arr); 
```

### 现场演示：http: [//ideone.com/MG3BaO](http://ideone.com/MG3BaO)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T06:19:34.090

```
$str = '123=one; two;45=three=four;6=five;';

preg_match_all('/(\d+)=([a-zA-z ;=]+)/', $str,$matches);
echo '<pre>';
print_r($matches);
echo '</pre>'; 
```

o/p：

```
Array
(
    [0] => Array
        (
            [0] => 123=one; two;
            [1] => 45=three=four;
            [2] => 6=five;
        )

    [1] => Array
        (
            [0] => 123
            [1] => 45
            [2] => 6
        )

    [2] => Array
        (
            [0] => one; two;
            [1] => three=four;
            [2] => five;
        )

) 
```

然后你可以结合

```
echo '<pre>';
print_r(array_combine($matches[1],$matches[2]));
echo '</pre>'; 
```

o/p：

```
Array
(
    [123] => one; two;
    [45] => three=four;
    [6] => five;
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T08:55:37.520

为此，您需要一个前瞻断言；如果 a`;`后跟一个数字或字符串的结尾，则前瞻匹配：

```
$s = '12.30=one; two;45=three=four;600.00=five';

preg_match_all('/(\d+(?:.\d+)?)=(.+?)(?=(;\d|$))/', $s, $matches);

print_r(array_combine($matches[1], $matches[2])); 
```

输出：

```
Array
(
    [12.30] => one; two
    [45] => three=four
    [600.00] => five
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T05:43:15.110

试试这个，但是这段代码是用c#写的，你可以把它改成php

```
 string[] res = Regex.Split("123=one; two;45=three=four;6=five;", @";(?=\d)"); 
```

--SJ

# matlab - 如何在matlab中施加创建矩阵的条件

> ID：16097713
> 
> 赞同：0
> 
> 时间：2013-04-19T05:22:09.010
> 
> 标签：matlab, matrix, combinations

我想创建一个矩阵，其中包含 0 到 100 之间的 10 个数字的所有可能组合，间隔为 5，其总和等于 100。我的意思是这样的：

```
(0 0 0 0 0 0 0 0 0 10 90; 10 10 10 10 10 10 10 10 20 0;...) 
```

我使用“allcomb.m”来创建介于 0 和 100 之间的所有可能数字，间隔为 5。但是，这个矩阵太大了，这意味着 Matlab 不会创建它。我在想，如果我有那个矩阵，我可以使用条件来减少它，但这是不可能的，因为我从来没有得到矩阵。因此，问题是我如何使用相同代码中的条件修改 allcomb 的代码，或者更好的是，另一种创建我想要的矩阵的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:44:53.827

请注意，即使结果矩阵非常大 - 准确地说，它有 10,015,005 行和 10 列，并且（如果存储为双精度）占用大约 1GB 的空间。在我的机器上计算大约需要十分钟。然而，它是可计算的，下面的函数会计算它。

```
function w = allconstrainedcombinations(n,k)
    if n == 1
        w = k;
    else
        t = nchoosek(n+k-1,k);  # Total number of rows
        w = zeros(t,n);         # Pre-allocate
        r = 1;                  # Current row
        for v = 0:k
            u = allconstrainedcombinations(n-1,k-v);
            m = size(u,1);
            w(r:r+m-1,1) = v;
            w(r:r+m-1,2:end) = u;
            r = r + m;
        end
    end
end 
```

为了得到你想要的结果，你应该打电话

```
>> x = allconstrainedcombinations(10,20) * 5; 
```

这是一个小例子的结果：

```
>> allconstrainedcombinations(3,2)
ans =
     0     0     2
     0     1     1
     0     2     0
     1     0     1
     1     1     0
     2     0     0 
```

# php - mod_rewrite 的问题做单个 php 文件

> ID：16097714
> 
> 赞同：0
> 
> 时间：2013-04-19T05:22:13.743
> 
> 标签：php, apache, mod-rewrite

我在将所有请求定向到一个 php 文件时遇到问题。我以前用过这个设置。

C:/path/app/.htaccess 中的配置

```
DirectoryIndex  disabled

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ web/index.php    [QSA,L] 
```

错误日志

```
[Fri Apr 19 07:04:04.582078 2013] [rewrite:trace3] [pid 4804:tid 1284] mod_rewrite.c(466): [client 127.0.0.1:65174] 127.0.0.1 - - [127.0.0.1/sid#238bf48][rid#2d9e170/initial] [perdir C:/path/app/] strip per-dir prefix: C:/path/app/ -> 
[Fri Apr 19 07:04:04.582078 2013] [rewrite:trace3] [pid 4804:tid 1284] mod_rewrite.c(466): [client 127.0.0.1:65174] 127.0.0.1 - - [127.0.0.1/sid#238bf48][rid#2d9e170/initial] [perdir C:/path/app/] applying pattern '^(.*)$' to uri ''
[Fri Apr 19 07:04:04.582078 2013] [rewrite:trace2] [pid 4804:tid 1284] mod_rewrite.c(466): [client 127.0.0.1:65174] 127.0.0.1 - - [127.0.0.1/sid#238bf48][rid#2d9e170/initial] [perdir C:/path/app/] rewrite '' -> 'web/index.php'
[Fri Apr 19 07:04:04.582078 2013] [rewrite:trace3] [pid 4804:tid 1284] mod_rewrite.c(466): [client 127.0.0.1:65174] 127.0.0.1 - - [127.0.0.1/sid#238bf48][rid#2d9e170/initial] [perdir C:/path/app/] add per-dir prefix: web/index.php -> C:/path/app/web/index.php
[Fri Apr 19 07:04:04.582078 2013] [rewrite:trace1] [pid 4804:tid 1284] mod_rewrite.c(466): [client 127.0.0.1:65174] 127.0.0.1 - - [127.0.0.1/sid#238bf48][rid#2d9e170/initial] [perdir C:/path/app/] internal redirect with C:/path/app/web/index.php [INTERNAL REDIRECT] 
```

并且文件 C:/path/app/web/index.php 存在并且只是 phpinfo()。

```
<?php

phpinfo(); 
```

如果我获得了日志权限，则重定向按预期工作，但我仍然得到 404。

**有什么想法可能是这里的问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:01:04.723

您的重写规则需要知道文件夹库（默认为 Web 服务器根目录）。

所以你需要在`RewriteBase /app/`之后设置`RewriteEngine on`

```
RewriteEngine on
RewriteBase /app/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ web/index.php    [QSA,L] 
```

# python - 与 line.rfind 相关的 SyntaxError

> ID：16097715
> 
> 赞同：1
> 
> 时间：2013-04-19T05:22:19.683
> 
> 标签：python

过去，我使用 line.rfind 来查找固定变量，并且我的脚本运行良好。但是，现在我正在尝试使用 line.rfind 来查找一个变化的变量，我收到了一个曾经可以工作的代码行的语法错误。这是我的代码。

```
#!usr/bin/env python

import urllib
from datetime import datetime
from datetime import timedelta

date = datetime.now()
date1 = date + timedelta(days=1)

class city :
    def __init__(self, city_name, link, latitude, longitude) :
            self.name = city_name
            self.url = link
            self.low0 = 0
            self.high1 = 0
            self.high2 = 0
            self.low1 = 0
            self.low2 = 0
            self.lat = latitude
            self.long = longitude

    def retrieveTemps(self) :
            filehandle = urllib.urlopen(self.url)

            # get lines from result into array
            lines = filehandle.readlines()

            # (for each) loop through each line in lines
            line_number = 0 # a counter for line number
            for line in lines:
                    line_number = line_number + 1 # increment counter

                    # find string, position otherwise position is -1

                    position0 = line.rfind('title="{}"'.format(date1.strftime("%A"))

                    # string is found in line
                    if position0 > 0 :
                         self.low0 = lines[line_number + 4].split('&')[0].split('>')[-1] 
```

我得到的错误说......

```
if position0 > 0 :
                 ^
SyntaxError: invalid syntax 
```

关于什么是错的任何想法？我认为这与我在这一行中所做的更改有关...

```
position0 = line.rfind('title="{}"'.format(date1.strftime("%A")) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:23:21.690

您只是忘记使用右括号')'。改成：

```
position0 = line.rfind('title="{}"'.format(date1.strftime("%A"))) 
```

# string - ksh - var = $var + 1 返回 1+1 字符串

> ID：16097716
> 
> 赞同：1
> 
> 时间：2013-04-19T05:22:25.133
> 
> 标签：string, shell, integer, increment, ksh

我的代码：

```
RETVAL1=-1
if [ $RETVAL1 -le 0 ] ; then
  RETVAL1=$RETVAL1+1
  print "RETVAL1: $RETVAL1"
fi 
```

它打印`RETVAL1: -1+1` 任何想法如何修复它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T05:27:04.730

要执行算术运算，请使用以下`let`命令：`let RETVAL1=RETVAL1+1`

此外，将表达式括在`$((`and之间`))`也会将其解释为算术运算。 `echo $((RETVAL+1))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T05:25:54.823

使用[`let`](http://ss64.com/bash/let.html)命令。此命令执行算术运算。`+`运算符执行字符串加法。

像这样使用它：

```
let RETVAL1=RETVAL1+1 
```

您还可以使用[expr](http://ss64.com/bash/expr.html)命令来获得更通用的表达式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T05:26:16.903

单程：

```
((RETVAL1=RETVAL1+1)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T05:28:11.267

Shell 变量不像大多数编程语言中的变量那样工作。如果要将 1 加到存储在变量中的整数，则需要一个算术表达式。我不是`ksh`巫师，但通常的 Bourne-derived-shell 算术表达式语法是：

```
RETVAL1=$((RETVAL1 + 1)) 
```

或者

```
((RETVAL1 = RETVAL1 + 1)) 
```

# vim - 显示相对于项目/目录的 NERDTree 书签

> ID：16097721
> 
> 赞同：0
> 
> 时间：2013-04-19T05:22:56.530
> 
> 标签：vim, nerdtree

[NERDTree](https://github.com/scrooloose/nerdtree)保留文件中所有书签的列表`$HOME/.NERDTreeBookmarks`。当我点击`B`它时，会显示该文件中的所有条目。所以我尝试使用该文件的本地副本和项目特定的书签，但这不起作用:(

有没有办法在 NERDTree 中只查看与项目相关的书签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-10T19:51:15.753

这是我用于 git repo 特定 NERDTree 书签的内容。

```
 if isdirectory(expand(".git"))
      let g:NERDTreeBookmarksFile = '.git/.nerdtree-bookmarks'
    endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:48:46.527

由于无法判断项目目录的结构，因此使用 shell 环境变量似乎是最简单的解决方案。

首先，为您的书签添加路径：

```
export NERDTREE_BOOKMARKS="/full/path/.NERDTreeBookmarks" 
```

然后将此添加到您的`~/.vimrc`或类似的：

```
if !empty($NERDTREE_BOOKMARKS)
    if filereadable($NERDTREE_BOOKMARKS)
        let g:NERDTreeBookmarksFile = $NERDTREE_BOOKMARKS
    endif
endif 
```

根据您的开发方式，使用环境变量可能是也可能不是合适的解决方案。即，如果您一直打开/关闭外壳，或者一次打开多个外壳。

一个更简单的替代方案可能是这样的，但只有在书签所在的目录中使用 vim 打开 vim/a 文件时它才会起作用。

```
if filereadable(".NERDTreeBookmarks")
    let g:NERDTreeBookmarksFile = ".NERDTreeBookmarks"
endif 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T06:15:01.887

正如 timss 已经指出的那样，关键设置是`g:NERDTreeBookmarksFile`config 变量。您需要找到一种方法来根据当前打开的项目来操纵该（全局）设置。使用外部环境变量是一种解决方案；我宁愿使用[vim.org上提供的](http://www.vim.org/)*本地 vimrc*插件之一来解决这个问题；我使用[localrc.vim - 自己启用每个目录的配置文件](http://www.vim.org/scripts/script.php?script_id=3393)。

在每个不同的项目目录中，您创建一个`.local.vimrc`脚本，将上述变量设置为项目的书签文件。（这只有在你在 Vim 中一次只打开一个项目时才能可靠地工作。）

# jquery - 如何在不打开窗口弹出窗口的情况下打印 iframe 的内容

> ID：16097723
> 
> 赞同：1
> 
> 时间：2013-04-19T05:23:02.580
> 
> 标签：jquery

在我的应用程序中，我想打印驻留在 iframe 中的 PDF 文件。这是我的代码..

```
<iframe src="pdf/output.pdf" id="pdfFrame"></iframe> 
```

这是打印pdf的脚本..

```
document.getElementById("pdfFrame").focus();
document.getElementById("pdfFrame").contentWindow.print(); 
```

上面的代码工作正常，但它会在打印之前打开一个窗口弹出窗口。但根据我的要求，我想要直接激光打印而不打开弹出窗口。

有没有办法做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:16:03.107

The only way to bypass the print dialog is to tweak settings in IE and to write some VBScript.

See [Bypass Printdialog in IE9](https://stackoverflow.com/questions/11036074/bypass-printdialog-in-ie9)

It only works in IE9, if you can change every client's ActiveX settings. Really should only be used in an intranet scenario where you control the clients.

```
<script language="VBScript">
    sub Print()
        OLECMDID_PRINT = 6
        OLECMDEXECOPT_DONTPROMPTUSER = 2
        OLECMDEXECOPT_PROMPTUSER = 1
        call WB.ExecWB(OLECMDID_PRINT, OLECMDEXECOPT_DONTPROMPTUSER,1)
    End Sub
    document.write "<object id='WB' width='0' height='0' classid='CLSID:8856F961-340A-11D0-A96B-00C04FD705A2'></object>"
</script>

<object id="WebBrowser1" width="0" height="0" classid="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2"> </object>
<a href="#" onclick="Print()">Click Here to Print</a> 
```

# magento - 警告：您的 Magento 文件夹没有足够的写入权限

> ID：16097724
> 
> 赞同：16
> 
> 时间：2013-04-19T05:23:04.253
> 
> 标签：magento

我是 Magento 的新手，我正在尝试通过 magento 连接管理器安装主题，我复制并粘贴扩展密钥，然后单击安装，然后继续。我收到错误“警告：您的 Magento 文件夹没有足够的写入权限。”

请给出一些解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-19T05:30:35.030

转到 Magento 主目录，然后为您的 webroot 授予权限。

```
e.g. (in ubuntu) : sudo chown -R www-data . 
```

您还可以更改权限

```
chmod 777  -R downloader/* 
```

我希望它有所帮助。

[编辑]

在您的 magento 目录中怎么样（`sudo`如果需要，请用于以下命令。）：

```
find . -type d -exec chmod 775 {} \;
find . -type f -exec chmod 664 {} \; 
```

对于 Magento 商店的正常运行或安装，只需要可写 2 个文件夹：

```
/media - for web accessible files, such as product images
/var - for temporary (cache, session) and import/export files 
```

[来源在这里](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/magento_filesystem_permissions)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-06T11:49:43.493

要重置文件权限，请运行：

```
find . -type d -exec chmod 775 {} \;
find . -type f -exec chmod 664 {} \;
chmod 777 -R downloader var media 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-21T10:58:45.063

就我而言，这还不够。我还必须将 777 权限设置为父文件夹 - public_html（非递归）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-24T17:41:55.800

这是我编写的一个完整的 shell 脚本，可帮助您设置 Magento 安装的权限/所有权： [mage-set-perms](https://gist.github.com/amineasli/8bde97270d20ffe790f1)

shell 脚本基于 Magento 官方文章的推荐在[这里找到](http://devdocs.magento.com/guides/m1x/install/installer-privileges_after.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-08T12:32:26.413

与我一起使用此重置权限：

```
chmod -R 777 media/
chmod -R 755 var/ 
```

我遵循此网址中的一些说明：http: [//www.magentocommerce.com/wiki/groups/227/resetting_file_permissions](http://www.magentocommerce.com/wiki/groups/227/resetting_file_permissions)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-16T00:23:11.880

我使用了列出的其他解决方案，例如：

```
cd /var/www/html
find . -type d -exec chmod 775 {} \;
find . -type f -exec chmod 664 {} \; 
chmod -R 777 downloader var media 
```

但我也必须这样做：

```
chown apache:apache /var/www/html 
```

由于 web 根目录仍归 'root:root' 所有并导致问题（通过继续显示 Magento 错误消息）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-17T21:28:33.040

在所有这些中，有效的是 `public_html# find . -type d -exec chmod 775 {} \;` 和 `chgrp -R www-data`

这将返回使用本地文件系统而不是 FTP 的能力

755 没有组创建和删除权限，所以 775 工作

将 /media 和 /var 权限返回给`/public_html/media# find . -type d -exec chmod 777 {} \;` `/public_html/var# find . -type d -exec chmod 777 {} \;`

# sorting - Powershell：按日期重新排序文件中的行

> ID：16097725
> 
> 赞同：1
> 
> 时间：2013-04-19T05:23:12.563
> 
> 标签：sorting, powershell

我有一个这样的输入文件：

Peter,Melbourne,30.5.1982
Simon,Sydney,21.2.1990
Tom,Adelaide,22.9.1980

我想做的是按日期列重新排序文件的内容并将其保存到文件中。
喜欢：

汤姆，阿德莱德，22.9.1980
彼得，墨尔本，30.5.1982
西蒙，悉尼，21.2.1990

整个事情应该在Powershell中完成..

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T07:20:43.783

@vonPryz 给出了一个很好的答案，你可以做得更短一点。

```
# Read input data
$c = Import-Csv -Header @("Name","City","Date") c:\temp\data.txt -Delimiter ","

# Get the good globalization info
$oz = new-object Globalization.CultureInfo("en-AU")

#
$c | Sort-Object {[System.DateTime]::Parse($_.date, $oz)}

# Write output data
$d | Export-Csv c:\temp\datasSortedVyDate.csv -NoTypeInformation 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T06:31:02.417

用于`Import-CSV`读取数据。然后将每个日期转换为 DateTime 对象，因此排序将比较日期，而不是字符串。最后，按日期列对 CSV 数据进行排序。像这样，

```
# Read input data
$c = Import-Csv -Header @("Name","City","Date") c:\temp\data.txt -Delimiter ","

# Print the data. This looks just like what we have read from the file
$c

Name  City      Date
Peter Melbourne 30.5.1982
Simon Sydney    21.2.1990
Tom   Adelaide  22.9.1980 
```

让我们对数据进行排序

```
$c | sort -Property Date
Name  City      Date
Simon Sydney    21.2.1990
Tom   Adelaide  22.9.1980
Peter Melbourne 30.5.1982 
```

嗯？排序不起作用。这是因为 Date 列包含字符串值。在字符串排序中，排序不关心年份部分，因为两个前字符足以对字符串进行排序。这是一个常见的警告。

如何克服这一点？需要将日期转换为日期对象，这些对象也可以通过比较年份和月份部分来很好地排序。首先，创建一个文化信息，用于判断您使用的是 mm-dd-yyyy、dd-mm-yyyy 还是其他格式。

```
# Eh, mate, Melbourne is down under
$oz = new-object Globalization.CultureInfo("en-AU")

# Loop through each row and convert the date member to date, using Aussie culture.
for($i=0;$i -ne $c.count; $i++) {
    $c[$i].Date = [Convert]::ToDateTime($c[$i].Date, $oz)
}

# Now the sort works as expected:
$c | sort -Property Date
Name  City      Date
Tom   Adelaide  22.9.1980 0:00:00
Peter Melbourne 30.5.1982 0:00:00
Simon Sydney    21.2.1990 0:00:00 
```

# jquery - 如果单击时的数据不存在，则禁用该按钮。这应该发生在准备好的文件上

> ID：16097728
> 
> 赞同：1
> 
> 时间：2013-04-19T05:23:28.173
> 
> 标签：jquery, html

我有一个简单的问题，我试图在页面加载时禁用 jQuery 按钮

```
<body>    
    <div id="inDetialContainer" style="display:none;">
       <div id="detailText">Detailed Information</div> 
         <button id="overviewDiv" class="nesteIndtText" href="#"   onClick="loadInnerOfChildPage(1);">Overview</button>    // this button should be disabled when data does not exist  
         <button id="proceduresDiv" class="nesteIndtText" href="#" onClick="loadInnerOfChildPage(2);">Procedures</button> // this button should be disabled when data does not exist  
         <button id="equipmentDiv" class="nesteIndtText" href="#" onClick="loadInnerOfChildPage(3);">Equipment</button>   // this button should be disabled when data does not exist  
         <button id="backgroundDiv" class="nesteIndtText" href="#" onClick="loadInnerOfChildPage(4);">Background</button>  // this button should be disabled when data does not exist  
         <button id="safetyDiv" class="nesteIndtText" href="#" onClick="loadInnerOfChildPage(5);">Safety</button>   // this button should be disabled when data does not exist  
         <button id="examQuestionsDiv" class="nesteIndtText" href="#" onClick="loadInnerOfChildPage(6);">Exam Questions</button>    // this button should be disabled when data does not exist  
   </div>         
    <div id="subContent3" style="display:none;">    
      <div id="normalTextHeader">Equipment Details</div>
          <p class="noData">Content not available.</p>
    </div>
      <script>

      $(document).ready(function()
        {
          parent.parent.loadInnerOfChildPage = loadInner; 
         function loadInner(arg)
        {

        var flag = false;
            var parentId;
        flag = ( $("#subContent"+arg).children('p').hasClass('noData'));

            if(flag == false)
            {
              $("#subContent"+arg).css("display","block");  
              $("#subContent"+arg).siblings(this).css("display","none");
              $("#backToNav").css("display","block");   
              }
             else
              {
             parent.parent.$("#inDetialContainer button #").parent().attr("disabled","disabled"); 
             $("#subContent"+arg).css("display","none");
             $("#subContent"+arg).siblings(this).css("display","none");
             $("#backToNav").css("display","none"); 
                }
             }  
     });
   </script> 
```

加载页面时，如果数据不存在，则应在文档就绪时禁用单击。谁能解释这怎么可能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:45:48.447

`p`所有带有类的孩子的按钮`noData`都是可点击的，而那些没有的将被禁用，对吧？

```
$(document).ready(function() {
  $(".nesteIndtText").filter(function() {
    return $(this).children("p.noData").length == 0;
  }).prop("disabled", true);

  $(".nesteIndtText").click(function() {
    // do something when a clickable button is clicked
  });
}); 
```

上面使用的`.filter()`函数将返回其子级中没有 a 的按钮，`p.noData`然后使用 禁用它们`.prop()`。

而且我看到您在单击按钮时传递了一个参数，这可能是您使用`onClick`属性的原因。这可以通过这种方式完成：

```
<button id="overviewDiv" class="nesteIndtText" href="#" data-arg="1">Overview</button>
<button id="proceduresDiv" class="nesteIndtText" href="#" data-arg="2">Procedures</button> 
```

如您所见，我添加了一个新属性`data-arg`. 单击按钮时，可以使用处理程序`$(this).attr("data-arg")`内部获取此值`click`。

# android - 从字符串中删除垃圾字符

> ID：16097734
> 
> 赞同：1
> 
> 时间：2013-04-19T05:23:58.133
> 
> 标签：android, regex

在我的 Android 应用程序中，当我从 NFC 芯片读取特定数据时，它给出的垃圾值如下所示，打印在 Log

����������������

我使用以下行来删除垃圾值

```
str.replaceAll("[^\\p{ASCII}]", "") 
```

但它不工作。

请给我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:32:40.897

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:17:19.703

最好以 UTF-8 格式检索数据，这样会有所帮助。试试看。

或将字符串转换为 UTF-8 格式

IE，`String _data=new String(str.getBytes(),"UTF-8");`

它以 UTF-8 格式返回数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T03:08:25.123

使用此方法的一种解决方案`.replaceAll("[^\\x00-\\x7F]", "")`

```
String str = "jorgesys���������������� was here!";
str = str.replaceAll("[^\\x00-\\x7F]", "")); 
```

所以结果`str`是：

```
jorgesys was here! 
```

# html - 将文本附加到 html 的 Nawk 脚本

> ID：16097736
> 
> 赞同：0
> 
> 时间：2013-04-19T05:24:18.260
> 
> 标签：html, unix, nawk

所以，我已经在自己的事情上工作了一个星期，但一无所获。我正在参加一个非常先进的 CIS 课程，到目前为止我做得很好，但到最后我正在处理我还没有学过的东西。我应该等几个学期才能讲这门课，因为我对我现在正在做的事情毫无准备。我的主要问题是不了解 HTML（我从来没有理由学习它）。

我有一个我发现需要使用的 nawk 脚本模板的任何方式。它源自颜色生成器脚本，如下所示：

```
#!/bin/nawk -f

#-----------------------------------------------------------------------------
#YOUR COMMENTS HERE
#-----------------------------------------------------------------------------

BEGIN {
    print "<html>"
    print "<body>"
    print "  <table border=2>"
    print "    <tr>"
    print "      <th>$first $last</th>"                ###Change this
    print "      <th>$username</th>"               ###Change this
    print "      <th>Color</th>"                    ###Change this
    print "    </tr>"
}

{
    print "    <tr>"
    print "      <td>" $1 "</td>"                   ###Change this
    print "      <td>" $2 "</td>"                   ###Change this
    print "      <td>" $3 "</td>"                   ###Change this
    print "    </tr>"
}

END {
    print "</table>"
    print "</body>"
    print "</html>"
} 
```

正如你在第 12 行和第 13 行看到的，我分别添加了 $first $last 和 $username。我这样做对吗。因为我不懂 HTML，所以每次看它时，都会把我的 !@#$ 搞糊涂。

以下应该是输出：

```
<html>
<body>
<table border=2>
<tr><th>Name</th><th>Username</th><th>Email</th></tr>
  <tr>
    <td>Michael Raby</td>
    <td>mraby</td>
    <td><a href="mailto:mike1071@yahoo.com">mike1071@yahoo.com</a></td>
  </tr>
  <tr>
    <td>Hajar Alaoui</td>
    <td>halaoui</td>
    <td><a href="mailto:hajar6@hotmail.com">hajar6@hotmail.com</a></td>
  </tr>
  <tr>
    <td>Anne Lemar</td>
    <td>alemar</td>
    <td><a href="mailto:anne.lemar@asu.edu">anne.lemar@asu.edu</a></td>
  </tr>
  <tr>
    <td>Russell Crotts</td>
    <td>rcrotts</td>
    <td><a href="mailto:Russell.Crotts@asu.edu">Russell.Crotts@asu.edu</a></td>
  </tr>
  <tr>
    <td>Dan Mazzola</td>
    <td>dmazzola</td>
    <td><a href="mailto:dan.mazzola@sun.com">dan.mazzola@sun.com</a></td>
  </tr>
  <tr>
    <td>Bill Boyton</td>
    <td>bboyton</td>
    <td><a href="mailto:boytonb@earthlink.net">boytonb@earthlink.net</a></td>
  </tr>
</table>
</body>
</html> 
```

以下是 HTML 表格应该是什么样子的示例：

```
Raby    Michael mike1071@yahoo.com
Alaoui  Hajar   hajar6@hotmail.com
Lemar   Anne    anne.lemar@asu.edu
Crotts  Russell Russell.Crotts@asu.edu
Mazzola Dan     dan.mazzola@sun.com
Boyton  Bill    boytonb@earthlink.net 
```

有人可以帮帮我吗？一个星期以来，我一直在尝试自己解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:56:49.830

看起来下面会做你想做的事：

```
#!/bin/nawk -f

#-----------------------------------------------------------------------------
#YOUR COMMENTS HERE
#-----------------------------------------------------------------------------

BEGIN {
    print "<html>"
    print "<body>"
    print "  <table border=2>"
    print "    <tr>"
    print "      <th>Name</th>"                          ###Change this
    print "      <th>Username</th>"                      ###Change this
    print "      <th>Email</th>"                         ###Change this
    print "    </tr>"
}

{
    print "    <tr>"
    print "      <td>" $1 "</td>"                        ###Change this
    print "      <td>" $2 "</td>"                        ###Change this
    print "      <td><a href=\"" $3 "\">" $3 "</a></td>" ###Change this
    print "    </tr>"
}

END {
    print "</table>"
    print "</body>"
    print "</html>"
} 
```

# ios6 - 动态生成通行证

> ID：16097738
> 
> 赞同：3
> 
> 时间：2013-04-19T05:24:29.117
> 
> 标签：ios6, passbook, passkit

为了创建 pass.pkpass，我通过键入命令行静态创建了一个 pass。我还在 MAMP 中使用 Web 服务。如何动态生成通行证？pass.pkpass 存储在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T03:19:52.753

要动态生成通行证，您将需要以下代码：

*   检索要放入通行证的所有动态数据
*   创建一个`pass.json`包含动态传递数据的文件并计算其 SHA1 哈希
*   收集通行证资产（图像、区域设置字符串等）并计算它们的 SHA1 哈希
*   组装清单文件（.pkpass 包中的文件列表及其 SHA1 哈希值）
*   使用您的 PassID 证书签署清单文件并包含 Apple WWDR 证书
*   将所有资产压缩到一个 .pkpass 包中
*   使用正确的 MIME 类型提供 .pkpass 包
*   清理您在上述过程中使用的任何临时文件夹/文件

您可能还需要以下代码：

*   `serialNumber`为and生成随机标记`authenticationToken`
*   在数据库中记录通行证详细信息

至于 .pkpass 文件的去向，这完全取决于您。一旦它们被提供给设备，您可以存储或删除它们。由于您需要的代码可以重新创建 .pkpass 包，并且由于您的 Web 服务将向`304`已具有最新版本通行证的设备发送响应，因此将这些文件保留在您的服务器上几乎没有价值。

如果您使用的是 MAMP，那么[这个 PHP 库](https://github.com/tschoffelen/PHP-Passkit)是一个很好的起点。

# android - 如何优化 couchdb 中的视图？

> ID：16097739
> 
> 赞同：0
> 
> 时间：2013-04-19T05:24:31.927
> 
> 标签：android, couchdb

我正在使用 couchdb 编写 android。我有大约 1000 个文件。每个数据库操作都会调用一个视图，我的视图需要很多时间。有没有办法优化沙发数据库中的视图？如果文档较少，则获取文档的速度很快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:56:13.417

视图需要注意的主要事项是 map 和 reduce 值都缓存在视图索引中（有关详细信息，请参见[http://horicky.blogspot.co.uk/2008/10/couchdb-implementation.html](http://horicky.blogspot.co.uk/2008/10/couchdb-implementation.html)），视图是只有在您查看它们时才重新构建，并且 CouchDB JavaScript 引擎并不是特别快。

有几个选项可以将所有这些用于实际的性能改进：

*   接受视图中的陈旧数据，并定期异步重建视图索引。您可以使用 ?stale=ok 查询视图以立即返回当前缓存的视图索引，从上次构建视图开始，然后使用 stale != ok 进行一些其他后台任务查询以实际进行重建。典型的策略是每 X 分钟重建一次视图，或者观察 /db/_changes 在每次 Y 更改后重建视图。取决于您的应用程序。

*   接受过时的数据，然后总是立即异步重建视图。这使用 ?stale=update_after，我相信它会立即返回一个值，然后在后台重建视图。是执行此操作还是执行上述操作取决于您的用例以及最新值对您的重要性；这最终可能会导致您重建视图远远超过真正需要的程度，从而实际上减慢您的查询速度。不过，这似乎比前一个选项更容易。

*   将尽可能多的代码推送到地图函数中。这应该会提高快速更改数据库的性能，因为映射值被缓存并且在基础文档更改之前不需要更新，而当大量文档中的一个更改时减少重新计算的需要。我不确定如何在 CouchDB 中精确地调整减少重新计算，即需要重新计算的集合有多大，但它肯定会发生更多的地图重新计算，并且可能更多。

*   使用内置的 reduce 函数（参见[http://wiki.apache.org/couchdb/Built-In_Reduce_Functions](http://wiki.apache.org/couchdb/Built-In_Reduce_Functions)）而不是用 JavaScript 重写它们。它们满足了许多标准的 reduce 情况，并且比自己编写等效函数要快得多。

*   用 Erlang 重写你的 map/reduce。请参阅[http://wiki.apache.org/couchdb/EnableErlangViews](http://wiki.apache.org/couchdb/EnableErlangViews)。这确实需要您学习 Erlang，但应该会占用您大部分视图重建时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:07:09.997

*每个文档*只执行一次视图中的地图功能（加上更新文档的次数）。这发生在您第一次查询视图时。之后不再需要计算 map 函数的结果，因此对视图的查询应该非常快。由于视图已经很有效，因此没有进一步优化它们的通用方法。

临时视图不是这种情况。如果您正在使用这些，请将它们存储在设计文档中以将它们转换为常规视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:48:19.217

在 map 函数的文档中发出尽可能少的数据。如果您确实需要整个文档，可以使用`include_docs=true`url 参数访问整个文档

## 好的

```
{
  map: function(doc) {
    emit(doc._id, null)
  }
} 
```

## 坏的

```
{
  map: function(doc) {
    emit(doc._id, doc)
  }
} 
```

# jquery - 在jquery mobile中更改文本框的宽度

> ID：16097741
> 
> 赞同：0
> 
> 时间：2013-04-19T05:24:42.693
> 
> 标签：jquery, mobile

知道如何控制 jquery mobile 中文本框的大小吗？我以百分比使用 CSS，例如 20% 似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:27:23.150

像这样试试

```
.ui-input-text    
{
    width: 20% !important;

} 
```

# mysql - 如何检查mysql sum中的两个条件

> ID：16097748
> 
> 赞同：0
> 
> 时间：2013-04-19T05:25:25.823
> 
> 标签：mysql, sql

```
select cust_code,occu_name
, SUM(CASE WHEN VoucherType = 'S' THEN Amount ELSE 0 END) AS salesSum
,SUM(CASE WHEN VoucherType = 'I' THEN Amount ELSE 0 END) AS interestSum
,SUM(CASE WHEN VoucherType = '' THEN Amount ELSE 0 END) AS interest_sum
,SUM(CASE WHEN VoucherType = 'P' THEN Amount ELSE 0 END) AS chequereturn_sum
,SUM(CASE WHEN VoucherType = 'R' THEN Amount ELSE 0 END) AS receipt_sum
,SUM(CASE WHEN VoucherType = 'R' THEN Amount ELSE 0 END) AS receipt_sum
,SUM(CASE WHEN VoucherType = 'N' THEN Amount ELSE 0 END) AS credit_sum
,SUM(CASE WHEN (DrCrType = 'DR' and VoucherDate <= '2012-04-01') THEN Amount ELSE (Amount*-1)) AS opening_sum
from bmwregistration, ledger_transactions
where bmwregistration.ledger_id = ledger_transactions.OccupierID and
  VoucherDate >= '2012-04-01' and
  VoucherDate <= '2013-02-01'
group by cust_code 
```

如何检查 sum 函数中的两个条件`SUM(CASE WHEN (DrCrType = 'DR' and VoucherDate <= '2012-04-01') THEN Amount ELSE (Amount*-1)) AS opening_sum`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:36:50.537

您正在以正确的方式进行操作。

### [请参阅此示例](http://sqlfiddle.com/#!9/5ad53/2)

你只是犯了一个小错误。您只需要`END`在此之后添加如下条件：

```
SUM(CASE WHEN DrCrType = 'DR' 
          and VoucherDate <= '2012-04-01' 
         THEN Amount 
         ELSE (Amount*-1) END) AS opening_sum
                          ^^^ 
```

所以你的整个查询应该是这样的：

```
select cust_code,occu_name
, SUM(CASE WHEN VoucherType = 'S' THEN Amount ELSE 0 END) AS salesSum
,SUM(CASE WHEN VoucherType = 'I' THEN Amount ELSE 0 END) AS interestSum
,SUM(CASE WHEN VoucherType = '' THEN Amount ELSE 0 END) AS interest_sum
,SUM(CASE WHEN VoucherType = 'P' THEN Amount ELSE 0 END) AS chequereturn_sum
,SUM(CASE WHEN VoucherType = 'R' THEN Amount ELSE 0 END) AS receipt_sum
,SUM(CASE WHEN VoucherType = 'R' THEN Amount ELSE 0 END) AS receipt_sum
,SUM(CASE WHEN VoucherType = 'N' THEN Amount ELSE 0 END) AS credit_sum
SUM(CASE WHEN DrCrType = 'DR' 
          and VoucherDate <= '2012-04-01' 
         THEN Amount 
         ELSE (Amount*-1) END) AS opening_sum
from bmwregistration, ledger_transactions
where bmwregistration.ledger_id = ledger_transactions.OccupierID and
  VoucherDate >= '2012-04-01' and
  VoucherDate <= '2013-02-01'
group by cust_code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:35:41.613

```
 WHEN PAT_DrCrType = 'DR' and VoucherDate <= '2012-04-01' THEN Amount ELSE (Amount-1)) AS opening_sum 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T05:38:22.207

试试这个方法

```
SUM(CASE WHEN DrCrType = 'DR' AND VoucherDate <= '2012-04-01' THEN Amount ELSE (Amount-1) END) 
```

# javascript - HTML页面调用JSP文件

> ID：16097754
> 
> 赞同：-1
> 
> 时间：2013-04-19T05:25:43.213
> 
> 标签：javascript, html, ajax, jsp

我的计算机上有一个 HTML 页面，远程服务器上有一个 JSP 文件。

现在我该怎么做，

**将 JSP 文件中的内容显示到 HTML 页面中。**

HTML 页面必须是严格的 HTML（非服务器端语言），但可以使用 AJAX/JavaScript。

是否甚至可以通过 JSP 页面从服务器获取信息，而无需将 HTML 页面转换为 JSP 文件本身？我将如何实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:42:58.803

```
<script type="text/javascript" src="js/jquery.min.js"></script> 
// I have jquery.js under js directory in my webapp
<script type="text/javascript">
  var url = "my.jsp";
  $(function(){
        $.ajax({
            url : url, // Pass you Servlet/ JSP Url
            dataType : 'html',
            success : function(response) {
                alert('Success');
                $('#output').html(response);
            },
            error : function(request, textStatus, errorThrown) {
                alert(request.status + ', Error: ' + request.statusText);
                           // perform tasks for error 
            }
        });
});
</script> 
```

JSP

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%

out.println("<h1>Hello World</h1>"); // Write html values here
%> 
```

你的 HTML

…… `<div id="output"></div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:44:55.773

使用 Ajax：

```
function ClickMe_Click()
{
    $.ajax({
        type:       "post",
        url:        "path/your.jsp",
        data:       {"param":"val"},
        success:    function(msg) {
                            alert(msg.data);//your info from jsp
            },
            error:function (xhr, ajaxOptions, thrownError){
                alert(thrownError);
            }  
    });

} 
```

# iphone - 标题未显示在导航栏 iphone 应用程序中

> ID：16097761
> 
> 赞同：1
> 
> 时间：2013-04-19T05:26:05.603
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller, title

主屏幕后不显示标题。我已经放`UITabBarController`了第一个屏幕之后。第一个屏幕没有`UITabBarController`. 我不确定我实现选项卡的方式。

我在每个视图控制器中设置了标题`self.title = @"title"`。标题正确显示在选项卡项目中。

AppDelegate.m:

```
 UIViewController *loginView= [[[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil] autorelease];

UINavigationController *loginViewNavController = [[UINavigationController alloc] initWithRootViewController:loginView ];

self.navigationController = loginViewNavController;

self.window.rootViewController = self.navigationController;
[self.window makeKeyAndVisible]; 
```

登录视图控制器.m：

```
-(IBAction)navigateMainMenu:(id)sender{

tabBarController = [[UITabBarController alloc] init];

MyAccountsViewController *vc1 = [[MyAccountsViewController alloc] initWithNibName:@"MyAccountsViewController" bundle:nil];
DepositsViewController *vc2 = [[DepositsViewController alloc] initWithNibName:@"DepositsViewController" bundle:nil];
MoreViewController *vc3 = [[MoreViewController alloc] initWithNibName:@"MoreViewController" bundle:nil];
PayTransViewController *vc4 = [[PayTransViewController alloc]init];

NSArray* controllers = [NSArray arrayWithObjects:vc1,vc4, vc2, vc3, nil];
tabBarController.viewControllers = controllers;

[self.navigationController pushViewController:tabBarController animated:YES];

[mainMenuViewController release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:31:35.373

主要显示带有波纹管技巧的标题：-

```
1\. Self.title=@"Your Titile";

2\. self.navigationItem.title=@"your Title";

3\. when you using UItabBarController you can set Particular Viewcontroller as par your code Title like:- 

  vc1.title=@"your Title";
  vc2.title=@"your Title";
  vc3.title=@"your Title";
  vc4.title=@"your Title"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:32:30.677

如果你设置 self.title = @"Title"。该标题将在 navController 标题中设置。但是在您的 TabBarController 中，每个项目都是 ViewController。不是导航控制器。

问题：您在此行中发布的内容 `[mainMenuViewController release];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-31T09:18:27.010

我建议你不要在导航控制器中使用 tabbarcontroller。如果您使用的是 tabbarcontroller，它应该是 rootViewcontroller。

# javascript - JSONP回调函数

> ID：16097763
> 
> 赞同：3
> 
> 时间：2013-04-19T05:26:11.230
> 
> 标签：javascript, ajax, jsonp

我正在研究 JSONP 回调函数的概念。我阅读了一些关于此的文章，并希望很好地掌握 JSONP 的概念。

于是，我上传了一个json文件到服务器[——json文件](http://abhishekprakash.com/script/example.json)

这是我为检索数据而编写的 js 代码。呼叫是从 localhost 向 abhishekprakash.com 发出的。

```
var xhr;
var dataList;
xhr = new XMLHttpRequest();

xhr.open('GET', 'http://abhishekprakash.com/script/example.json?callback=func_callbk',  true);
xhr.send();

func_callback = function(data){
    alert(data.data.people[0].id);
}

xhr.onreadystatechange = function(){
if(xhr.readyState == 4){
            console.log(dataList);
    }
}; 
```

这是我在控制台中得到的响应：

![控制台快照](https://i.stack.imgur.com/FPbyP.png)

回调函数被调用，但它不包含 Json 数据。我错过了什么？

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T05:34:33.720

That example service returns JSON, not JSONP.

The point of JSONP is that due to Same Origin Policy security restrictions, Javascript from domain A cannot make a GET request to resources on domain B; in other words a script cannot retrieve data cross-domain.

JSONP solves this by making domain B explicitly cooperate in the cross-domain data sharing. The script from domain A specifies the name of a callback function and embeds the URL of domain B in the document as if it were including a regular external Javascript file. Domain B then outputs data like this:

```
callbackFuncName({ data : foo, ... }); 
```

That means domain B explicitly outputs a *Javascript snippet* which calls the specified callback function with the data.

So, unless domain B explicitly cooperates in this, you cannot simply get a JSONP response from it.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-19T05:31:28.063

XHR 受跨域规则约束；要使用 JSONP，您需要添加一个脚本元素：

```
function func_callbk()
{
    console.log(arguments);
}

var s = document.createElement('script');
s.type = 'text/javascript';
s.src = 'http://abhishekprakash.com/script/example.json?callback=func_callbk';
var h = document.getElementsByTagName('script')[0];
h.parentNode.insertBefore(s, h); 
```

正如 Ian 在评论中指出的那样，您的服务器的正确响应应该是这样的：

```
func_callbk('hello world') 
```

**更新**

如果您希望在没有 JSONP 的情况下进行这项工作（例如，如果响应应始终为 JSON），则需要按照[此答案](https://stackoverflow.com/questions/15962196/how-to-process-json-response-from-ajax-call/15962224#15962224)中的说明查看 CORS 。

# c# - 如何以编程方式从动态 JObject 获取属性

> ID：16097768
> 
> 赞同：24
> 
> 时间：2013-04-19T05:26:29.153
> 
> 标签：c#, .net, json, json.net, deserialization

我正在使用 NewtonSoft JObject 解析 JSON 字符串。如何以编程方式从动态对象中获取值？我想简化代码，不要为每个对象重复自己。

```
public ExampleObject GetExampleObject(string jsonString)
{
ExampleObject returnObject = new ExampleObject();
dynamic dynamicResult = JObject.Parse(jsonString);
if (!ReferenceEquals(dynamicResult.album, null))
   {
       //code block to extract to another method if possible
       returnObject.Id = dynamicResult.album.id; 
       returnObject.Name = dynamicResult.album.name;
       returnObject.Description = dynamicResult.albumsdescription;
       //etc..
   }
else if(!ReferenceEquals(dynamicResult.photo, null))
   {
       //duplicated here
       returnObject.Id = dynamicResult.photo.id;
       returnObject.Name = dynamicResult.photo.name;
       returnObject.Description = dynamicResult.photo.description;
       //etc..
   }
else if..
//etc..

return returnObject;
} 
```

有什么方法可以将“if”语句中的代码块提取到单独的方法中，例如：

```
private void ExampleObject GetExampleObject([string of desired type goes here? album/photo/etc])
{
  ExampleObject returnObject = new ExampleObject();
  returnObject.Id = dynamicResult.[something goes here?].id;
  returnObject.Name = dynamicResult.[something goes here?].name;
  //etc..
  return returnObject;
} 
```

是否有可能，因为我们不能对动态对象使用反射。或者我是否正确使用了 JObject？

谢谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-30T15:44:21.110

假设您使用的是 Newtonsoft.Json.Linq.JObject，则不需要使用动态。JObject 类可以采用字符串索引器，就像字典一样：

```
JObject myResult = GetMyResult();
returnObject.Id = myResult["string here"]["id"]; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-23T15:53:45.013

另一种针对此的方法是使用`SelectToken`（假设您正在使用`Newtonsoft.Json`）：

```
JObject json = GetResponse();
var name = json.SelectToken("items[0].name"); 
```

如需完整文档：[https ://www.newtonsoft.com/json/help/html/SelectToken.htm](https://www.newtonsoft.com/json/help/html/SelectToken.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T15:22:41.097

使用如下动态关键字：

```
private static JsonSerializerSettings jsonSettings;

private static T Deserialize<T>(string jsonData)
{
   return JsonConvert.DeserializeObject<T>(jsonData, jsonSettings);
} 
```

//如果你知道会返回什么

```
var jresponse = Deserialize<SearchedData>(testJsonString); 
```

//如果您知道返回对象类型，您应该使用 json 属性对其进行签名，例如

```
[JsonObject(MemberSerialization = MemberSerialization.OptIn)]
public class SearchedData
{
    [JsonProperty(PropertyName = "Currency")]
    public string Currency { get; set; }
    [JsonProperty(PropertyName = "Routes")]
    public List<List<Route>> Routes { get; set; }
} 
```

// 如果您不知道返回类型，请使用动态作为泛型类型

```
var jresponse = Deserialize<dynamic>(testJsonString); 
```

# c++ - 在 Eclipse Windows 中链接 OpenCV 静态库

> ID：16097769
> 
> 赞同：0
> 
> 时间：2013-04-19T05:26:32.397
> 
> 标签：c++, eclipse, opencv, static-libraries

我想创建一个可执行文件，我可以将它移动到另一台没有安装 OpenCV 的计算机上。

因此，我试图将所有需要的库静态链接到可执行文件中（这就是它所谓的对吗？）。该程序编译得很好，可以在我的本地计算机上运行，​​但是当我将它复制到另一台计算机时，它抱怨它缺少 .dll 文件并且不会执行。

我在 Windows 7 上使用 eclipse juno 和 mingw 作为编译器。

到目前为止我的进展：我已将 opencv\build\x86\mingw\lib 所需的库包含到 MinGW C++ 链接器 -> 项目属性中的库中。

```
opencv_core244.dll
opencv_highgui244.dll
opencv_imgproc244.dll 
```

在原始文件夹中，这些被称为：

```
libopencv_core244.dll.a
libopencv_highgui244.dll.a
libopencv_imgproc244.dll.a 
```

我已将 MinGW C++ Linker -> miscellaneous 中的链接器标志设置为 -static。

我一直在寻找答案并尝试了一些不同的东西，但我真的被这个难住了。

您如何强制 Eclipse 中的编译器（在本例中为 MinGW）将库链接为静态库而不是像它显然正在做的动态库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:41:15.710

1) 如果 OpenCV 已编译为用作 DLL，则不能静态链接。

2) 请记住，当您为 DLL 输出编译项目时，您有一个 .lib 文件。这个 .lib 文件实际上不是带有代码的静态库。编译器使用它来了解类/函数定义的 DLL 名称。这将在运行时需要 DLL。

3) 对于静态链接，您需要编译为静态库的 .lib 文件。在这样的编译中，只有一个输出是 .lib 文件。此 .lib 文件可用于静态链接，并且 .lib 文件中的代码将添加到您的应用程序中。

4) 我刚刚用 VStudio 编译了一个项目，它是一个只有一个功能的 DLL。我得到一个 DLL 和一个 .lib 作为输出。.lib 的大小为 2kb。

5）当我编译与静态库相同的项目时，我只得到一个输出，即 .lib 文件。它的大小是 133kb。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T19:59:43.700

澄清/答案已经晚了将近一年，但希望它对您或遇到相同问题的任何其他人有所帮助。

虽然 Pruthviraj 没有清楚地解释他的答案，但他的想法是正确的。默认情况下，cmake 的配置文件将“BUILD_SHARED_LIBRARY”标志设置为 true。创建的 .a 文件只是重定向到 dll 文件，本质上对于在程序中进行静态链接毫无用处。

最简单的方法是使用 cmake 重建 OpenCV，但要确保标志“BUILD_SHARED_LIBRARY”设置为 false。如果您使用它，它位于 cmake GUI 中的 Build 子类别下。

新生成的 make 文件应该只在 lib 文件夹中生成静态库，并且应该在您的程序中正确地静态链接 opencv。希望能帮助到你！

# arrays - 所有对象都可以按顺序配对吗？

> ID：16097772
> 
> 赞同：4
> 
> 时间：2013-04-19T05:26:47.420
> 
> 标签：arrays, algorithm

首先，这不是一个家庭作业或类似的东西，这是我最后一个问题[Candidate in find major element in an array 中的](https://stackoverflow.com/questions/16087547/candidate-in-finding-majority-element-in-an-array)一个暗示性问题。

对象有O [1] , O [2] , ..., O [n的]`n` **种类**，还有一个数组，是Oi的个数（即有O [i] s，数组给定），每一个> 。[[[`F[1...n]``F[i]``F[i]`[`F[1...n]``F[i]``0`]]]]

现在使用以下规则来配对对象：

如果`i != j`，O [i]可以与 O [j]配对，
否则如果`i == j`，O [i]不能与 O [j]配对。

即，只有两种不同类型的对象可以相互配对。

1.  输入数组是否存在有效的配对方法`F[1...n]`？给出一个时间复杂度最好的算法来判断真假并证明其正确性。

2.  如果存在，则输出一个有效的配对序列。给出你的算法和时间/空间复杂度分析。

例如， **输入** `F[] = {10, 2, 4, 4};`

那么至少存在一种有效的配对方法：

2 O [1] s 和 2 O [2] s 配对，4 O [1] s 和 4 O [3] s 配对，4 O [1] s 和 4 O [4] s 配对。

一种有效的配对顺序是：

(1,2) (1,2) (1,3) (1,3) (1,3) (1,3) (1,4) (1,4) (1,4) (1,4)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:17:47.170

### 检查 O(n) 中是否存在解决方案

设`s`为 的总和`F`。

*   如果`s`是奇数，则没有解决方案（直观）
*   如果存在没有解决方案的情况（直观`i`）`F[i] > s/2`
*   否则，存在解决方案（以下是构造证明）

### 在 O(n) 中找到解决方案

```
# Find s
s = 0
for i in 1..n:
    s += F[i]

# Find m such that F[m] is maximal
m = 1
for i in 1..n:
    if F[i] > F[m]:
         m = i

if s % 2 != 0 or F[m] > s/2:
    fail

a = 1
b = 1

# Pair off arbitrary objects (except those of type m) until F[m] = s/2    
while s/2 > F[m]:
    # Find a type with a non-zero frequency
    until F[a] > 0 and a != m:
        a = a + 1
    # Find another type with a non-zero frequency
    until F[b] > 0 and b != m and b != a:
        b = b + 1

    count = min(F[a], F[b], s/2 - F[m])
    pair(a, b, count)

# Pair off objects of type m with objects of different types
while F[m] > 0:
    # Find a type with a non-zero frequency
    until F[a] > 0 and a != m:
        a = a + 1
    pair(a, m, F[a])

end of algorithm

def pair(a, b, count):
    # Pairs off 'count' pairs of types a and b
    F[a] = F[a] - count
    F[b] = F[b] - count
    s = s - (2 * count)
    output "Pairing off $a and $b ($count times)" 
```

这两个`while`循环都是线性的。第一个 while 循环在每次迭代时增加一个`a`或`b`至少一个，因为在匹配`count`对之后，要么`F[a]`为零，要么`F[b]`为零，要么`s/2 = F[m]`循环终止。`a`并且`b`可以在`n`访问所有元素之前每次递增。第二个 while 循环也是线性的，因为它`a`在每次迭代期间至少递增 1。

关键不变量是
**(1)** `F[m]`是`F`
**(2)** `F[m] <= s/2`
的最大元素， 我认为两者在检查时都相当明显。

使用内部循环，只要`s/2 > F[m]`必须至少有两个非零频率的其他对象类型。如果只有一个，比如说`a`，那么
`F[a] + F[m] = s`
`F[a] = s - F[m] > s - s/2`（从循环条件）
`F[a] > s/2`
`F[a] > F[m]`
这是不变量**(1)**的矛盾。

由于至少有两种具有非零频率的类型（除了`m`），循环将能够找到类型`a`并`b`配对对象直到`s/2 = F[m]`。

第二个循环是微不足道的。由于恰好有一半的对象是 type `m`，因此每个 type 对象`m`都可以与不同类型的对象配对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:58:30.413

这是一个建议。不过，我不确定它是否适用于所有可能的情况，或者它是否是最有效的算法。

设为`n`索引的总数。构造对象类型数量的最高值优先级队列，其中每个对象类型是它的索引`i`。换句话说，创建一个优先队列，其中队列中的排序值是 的值`F`。将每个节点与该类型的所有对象的列表相关联。这需要`O(n log(n))`时间。

对于每种对象类型，从具有最多重复项的类型开始，然后到具有最少重复项的类型，将该对象“类”中的一个对象与仍然有对象的其他每个类的一个对象配对，并从队列中的该节点中删除该对象。由于除了顶部的每个队列项都会少一个对象，因此大部分队列仍将按优先级队列顺序排列；然而，顶部节点将有`n-1`更少的项目（或者它将是空的），因此向下堆以维护队列。此外，删除没有剩余对象的节点。使用新的最高队列值重复此过程，直到所有节点都配对。这需要`O(n log(n) + k)`时间，`k`项目总数在哪里。假设`k`显着大于`n`，总时间复杂度为`O(k)`。

同样，我不太确定如果可能的话，这是否总能找到解决方案。**我的直觉是，如果您在每次配对后重新堆放（如有必要），您将**确保如果可以找到完整配对，但（1）效率会低得多，并且（2）我'我不确定原始算法不会在哪些情况下成功，并且（3）我不完全确定即使每次都能奏效。

至于哪些值`F`没有解，显然如果存在一类对象的元素比所有其他类组合的元素多，则不可能配对。除此之外......我不太确定。调查我的“改进”算法是否正确评估每个案例会很有趣。

# javascript - cubism.js 中的 serverDelay 有什么作用？

> ID：16097775
> 
> 赞同：1
> 
> 时间：2013-04-19T05:26:59.510
> 
> 标签：javascript, d3.js, cubism.js

在[http://bost.ocks.org/mike/cubism/intro/demo-stocks.html](http://bost.ocks.org/mike/cubism/intro/demo-stocks.html)的介绍性示例中，创建上下文的行是：

```
var context = cubism.context()
                    .serverDelay(new Date(2012, 4, 2) - Date.now())
                    .step(864e5)
                    .size(1280)
                    .stop(); 
```

我理解了除了 serverDelay() 部分之外的行，但是在使用里面的值之后，它似乎正在改变比例。

在[https://github.com/square/cubism/wiki/Context#wiki-serverDelay](https://github.com/square/cubism/wiki/Context#wiki-serverDelay)的官方文档中，serverDelay 定义如下：

> 服务器延迟是上下文等待服务器计算或收集指标的时间量。

然而，这个定义对于理解它是如何改变尺度的并不是很有帮助。

我还搜索了类似的 stackoverflow 线程，并且 [d3.js 中立体主义上下文中的这个链接轴比例](https://stackoverflow.com/questions/11285781/axis-scale-in-cubism-context-in-d3-js) 是我能找到的最接近的。

有人可以帮我揭开这个函数调用的神秘面纱吗？

非常感谢所有帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:09:04.490

I found the answer myself. Cubism auto-advances one tick at a time, but this method allows you to advance many ticks at once.

# cakephp - CakePHP 站点从 1.3.3 升级到 2.3.2

> ID：16097776
> 
> 赞同：0
> 
> 时间：2013-04-19T05:27:04.360
> 
> 标签：cakephp, cakephp-1.3, upgrade, cakephp-2.3

**更新：**

通过`cake/VERSION.txt`发现它实际上是 1.3.3

* * *

我的网站在 2008 年构建的 cakePHP v 0.2.9 上运行。但现在在 PHP 5 中，一些功能和功能已被弃用。我的网站停止运行。

谁能告诉我更好更简单的方法，我可以在不影响我的网站并使其运行的情况下升级我的 cakePHP 版本。

我在根文件夹上的 index.php 的标题如下（让你们更好地了解我网站的 cakephp 版本）

```
/**    
 * Requests collector.    
 *    
 *  This file collects requests if:    
 *  - no mod_rewrite is avilable or .htaccess files are not supported    
 *  -/public is not set as a web root.    
 *    
 * PHP versions 4 and 5    
 *    
 * CakePHP(tm) : Rapid Development Framework (http://www.cakephp.org)    
 * Copyright 2005-2008, Cake Software Foundation, Inc. (http://www.cakefoundation.org)    
 *    
 * Licensed under The MIT License    
 * Redistributions of files must retain the above copyright notice.    
 *    
 * @filesource    
 * @copyright     Copyright 2005-2008, Cake Software Foundation, Inc. (http://www.cakefoundation.org)    
 * @link          http://www.cakefoundation.org/projects/info/cakephp CakePHP(tm) Project    
 * @package       cake    
 * @since         CakePHP(tm) v 0.2.9    
 * @version       $Revision: 7945 $    
 * @modifiedby    $LastChangedBy: gwoo $    
 * @lastmodified  $Date: 2008-12-18 20:16:01 -0600 (Thu, 18 Dec 2008) $    
 * @license       http://www.opensource.org/licenses/mit-license.php The MIT License    
 */    
/** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:33:16.290

**Update**

[CakePHP Migration guide from 1.3 - 2.0](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)

(You'll then see the rest of the migration guides for 2.1, 2.2...etc on the left rail)

* * *

You might want to just install the latest CakePHP fresh, then copy over all YOUR files (controllers, models, views, plugins, webroot files (css, js..etc) to it and test/fix from there. If nothing else, the most recent CakePHP will give you better/more specific error reporting, so hopefully you can just fix one error at a time until there aren't any left.

The other option would be to go through all the migration notes and change line-by-line, but going from 0.2.9 .... bottom line, there is likely no easy way.

(I hope for your sake the commenters are right that you have 1.3 or something instead.)

# c - 使用带有数组的 typedef 结构创建函数

> ID：16097783
> 
> 赞同：0
> 
> 时间：2013-04-19T05:27:33.063
> 
> 标签：c, arrays, typedef, structure

我只是想知道我在这里做错了什么？错误主要来自我的第一个函数，我说错了吗？

```
typedef struct{ //typedef and function prototype
     int x, y, radius;
}circle;
int intersect(circle c1, circle c2); 
```

我的功能所需的主要功能的一部分

```
circle c1 = {5, 6, 3.2};
circle c2 = {6, 8, 1.2}; 
```

如果它的两个圆参数相交，则返回 1。如何正确使用 struct 调用数组？我不断收到错误

```
int intersect(circle c1, circle c2){

    float cx, cy, r, distance;
    cx = (circle c1[0].x - circle c2[0].x) * (circle c1[0].x - circle c2[0].x);
    cy = (circle c1[1].x - circle c2[1].x) * (circle c1[1].x - circle c2[1].x);
    r = (circle c1[2].x - circle c2[2].x);
    distance = sqrt(cx + cy);
    if (r <= distance){
        return 1;
    }else{
    return 0;
    }
} 
```

我正在为决赛做准备，因此将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:32:28.633

您的代码中没有数组，所以不要尝试使用数组表示法。另外，不要声明与函数参数同名的局部变量。

```
int intersect(circle c1, circle c2)
{
    float dx, dy, r, distance;
    dx = (c1.x - c2.x) * (c1.x - c2.x);
    dy = (c1.y - c2.y) * (c1.y - c2.y);  // x changed to y throughout
    r  = (c1.r + c2.r);                  // rewritten too
    distance = sqrt(cx + cy);
    if (r <= distance)
        return 1;
    else
        return 0;
} 
```

# visual-studio-2012 - 在 VS 2012 / TFS 2012 中查看构建定义时出错

> ID：16097791
> 
> 赞同：3
> 
> 时间：2013-04-19T05:28:24.127
> 
> 标签：visual-studio-2012

我最近安装了 VS 2012 更新 2，现在当我单击团队资源管理器下的“构建”时出现错误。我已经尝试修复更新 2。除非必须，否则我宁愿不进行完全重新安装，所以我希望之前有人遇到过这种情况。任何帮助表示赞赏。

```
 System.Exception: The component 'Microsoft.TeamFoundation.Build.Controls.BuildsPageView' does not have a resource identified by the URI '/Microsoft.TeamFoundation.Build.Controls;component/buildspage/buildspageview.xaml'.
    at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
    at Microsoft.TeamFoundation.Build.Controls.BuildsPageView.InitializeComponent()
    at Microsoft.TeamFoundation.Build.Controls.BuildsPage.CreateView(PageInitializeEventArgs e)
    at Microsoft.TeamFoundation.Controls.WPF.TeamExplorer.TeamExplorerPageBase.Initialize(Object sender, PageInitializeEventArgs e)
    at Microsoft.VisualStudio.TeamFoundation.Build.BuildsPageVs.Initialize(Object sender, PageInitializeEventArgs e)
    at Microsoft.TeamFoundation.Controls.WPF.TeamExplorer.Framework.TeamExplorerPageHost.Initialize(TeamExplorerPageContext context) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:32:21.247

您是否还安装了 TFS Power Tools 和 Coderush 12.2.8？如果是这样，这些版本之间似乎存在冲突。

查看此错误报告以获取更多详细信息：http: [//www.devexpress.com/Support/Center/Question/Details/Q488684](http://www.devexpress.com/Support/Center/Question/Details/Q488684)

安装 4 月 18 日发布的最新版本的 TFS 电动工具为我解决了这个问题。

# java - 如何在我的自定义工具提示中获得气球？

> ID：16097797
> 
> 赞同：3
> 
> 时间：2013-04-19T05:29:03.883
> 
> 标签：java, swt, jface

我正在创建一个自定义工具提示，其中有一个文本框。我能够做到这一点，但我无法获得如附图中所示的气球状图标。任何人都可以帮助我解决这个问题。

我的工具提示类：

```
public class MyToolTip extends ToolTip {
    private Shell parentShell;

    public MyToolTip(Control control) {
        super(control,SWT.BALLOON,false);
        this.parentShell = control.getShell();
    }

    @Override
    protected Composite createToolTipContentArea(Event event, Composite parent) {
        // TODO Auto-generated method stub
        Composite comp = new Composite(parent,SWT.NONE);
        comp.setLayout(new FillLayout());

        Text text = new Text(comp,SWT.BORDER);
        text.setText("");

        return comp;
    }
} 
```

使用工具提示类：

```
public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new RowLayout(SWT.VERTICAL));
    Text text = new Text(shell, SWT.BORDER);
    text.setText("sample text field");

    MyToolTip myTooltipLabel = new MyToolTip(text);
    myTooltipLabel.setShift(new Point(-5, -5));
    myTooltipLabel.setHideOnMouseDown(false);
    myTooltipLabel.activate();

    myTooltipLabel.setRespectDisplayBounds(false);

    myTooltipLabel.setRespectMonitorBounds(false); 
```

![气球图像](https://i.stack.imgur.com/r0Jvv.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:16:59.553

问题是，您正在使用`org.eclipse.jface.window.ToolTip`，而用于创建该屏幕截图的代码使用`org.eclipse.swt.widgets.ToolTip`.

SWT 工具提示可以通过`SWT.BALLOON`作为样式位传递而具有气球外观。

JFace 工具提示不支持`SWT.BALLOON`，仅支持`ToolTip.NO_RECREATE`和`ToolTip.RECREATE`。

所以这是结论：您不能将 swt 工具提示子类化以使其可编辑。您不能使 JFace 工具提示看起来像您想要的那样。`Widget`剩下的唯一解决方案是根据自己的想法创建自己的解决方案，`Composite`或者`Canvas`按照您的要求创建自己的解决方案。

# jquery - jPlayer 未在 iOS click/touchstart 上启动

> ID：16097800
> 
> 赞同：0
> 
> 时间：2013-04-19T05:29:33.600
> 
> 标签：jquery, ios, jplayer, autoplay

嘿，我遇到了 iOS 无法在我的移动网站上启动音频的问题。

我了解 iOS 需要用户“单击”才能启动 HTML5 - 音频和视频，因此我将 jPlayer 设置为在用户单击“播放”后启动...

```
$(document).ready(function () {

    var AudioPlayer = null; //null on initial page load (init it on click);

    function initPlayer() {
        AudioPlayer = {
            mySlider: $("#slider").slider(),
            currentTime: 0,
            duration: 0,
            my_jPlayer: $('#jquery_jplayer').jPlayer({
                swfPath: "js",
                cssSelectorAncestor: "#jp_container",
                supplied: "mp3",
                wmode: "window",
                ready: function () {
                    console.log('ready');
                    $(this).jPlayer("setMedia", {
                      mp3: audioFile
                    });
                },
                //preload: 'auto'                
              }),
            init: function () {
                // Change the time format
                $.jPlayer.timeFormat.padMin = false;
                $.jPlayer.timeFormat.padSec = true;
                $.jPlayer.timeFormat.sepMin = ":";
                $.jPlayer.timeFormat.sepSec = "";
            },
            bindEvent: function () {

                    var self = this;

                    this.my_jPlayer.bind($.jPlayer.event.timeupdate, function (event) {

                    $.mobile.loading('hide');

                    self.currentTime = $('#jquery_jplayer').data('jPlayer').status.currentTime;
                    self.duration = $('#jquery_jplayer').data('jPlayer').status.duration;

                    if ($.jPlayer.convertTime(self.duration) != '0:00') {
                        $('#currentTimeDiv').html($.jPlayer.convertTime(self.currentTime));
                        $('#durationDiv').html($.jPlayer.convertTime(self.duration));
                        if ($('#slider').attr('max') != parseInt(self.duration)) {
                            $('#slider').attr('max', parseInt(self.duration));
                            //$slide.slider('max', parseInt(duration));
                        }
                        if (self.currentTime > 0) {
                            $("#slider").val(parseInt(self.currentTime));
                            //this.mySlider.slider('refresh');
                        }
                        //$slide.slider("value",$slide.slider("value")).slider('refresh');
                    } else {
                        $('#currentTimeDiv').html('0:00');
                        $('#durationDiv').html('0:00');
                    }
                });

                this.my_jPlayer.bind($.jPlayer.event.play,function (event) {
                    //$.mobile.loading('hide'); //only hide this on time update.
                    console.log('played');
                });

                this.my_jPlayer.bind($.jPlayer.event.stalled,function (event) {
                    $.mobile.loading('show');
                    console.log('stalled');
                });
            },
            startAudioTrack: function () {
                var trackClass = $("#track1").attr('class');
                console.log(trackClass);
                if ((typeof trackClass === "undefined") || (trackClass == 'jp-play')) {
                    this.my_jPlayer.jPlayer("play", parseInt(this.currentTime));
                    this.ready2Pause();
                } else {
                    this.ready2Play();
                    this.my_jPlayer.jPlayer("pause", parseInt(this.currentTime));
                }

                return false;
            },
            ready2Play: function () {
                //$("#track1").text('Play');
                $('#track1').removeClass('jp-pause');
                $('#track1').addClass('jp-play');
            },
            ready2Pause: function () {
                //$("#track1").text('Pause');
                $('#track1').removeClass('jp-play');
                $('#track1').addClass('jp-pause');
            }
        } //audioPlayer

        //start the audio player
        AudioPlayer.init();
        AudioPlayer.bindEvent();
        setTimeout(function() { AudioPlayer.my_jPlayer.jPlayer("play"); }, 5000);
        AudioPlayer.ready2Pause();

    } //initPlayer;

    $(document).on("click touchstart", "#play-overlay a.bt", function () {
        initPlayer();  //create the player (and play)
        togglePlayOverlay(0); //hide the play button overlay
    }); 
```

});

该代码有一个 startAudioTrack 函数。出于某种原因，当播放器已经初始化（第一次单击后）时，我可以单击第二个触发器，然后开始播放。此代码可在普通网络浏览器中运行，但不能在 safari mobile 上运行。

音频文件是 ajax 调用后设置的变量。

# javascript - onkeyup 或 onclick JavaScript 自动提交表单

> ID：16097811
> 
> 赞同：-2
> 
> 时间：2013-04-19T05:29:48.523
> 
> 标签：javascript, html

任何有助于我在 9 个字符后提交表单的 onkeyup 或 onclick javascript 代码。

我的 HTML 代码。我正在使用 AJAX 获取数据。我尝试了很多脚本。没有一个对我有用:'(

```
Enter Your Car No : <input type="text" name="car"  maxlength="9" id="carno" value="<?php echo $_REQUEST["carno"]; ?>"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:49:36.040

尝试这个 ：

```
Enter Your Car No : <input type="text" name="car"  maxlength="9" id="carno" value="<?php echo $_REQUEST["carno"]; ?>" onkeypress="submitForm()" onclick="submitForm()"/>
<script>
   function submitForm(){
       var len = document.getElementById("carno").value.length;
       if(len >= 9 ){
           //submit form code
       }else{
           return false;
       }
   }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:39:22.760

```
Enter Your Car No : <input type="text" name="car"  maxlength="9" id="carno" onkeypress="yourFunction()" value="<?php echo $_REQUEST["carno"]; ?>"/>

<script>
function yourFunction(){
  var textValue = document.getElementById('carno').value;
  if(textValue.length >= 9){
       //implement your ajax code
  }
}
</script>

Hai here i am calling function on each key press in that text field and i am getting the value using id and checking that length if its >=9 (ur requirement) so write ajax code 
```

# javascript - 在 getElementByID 中获取动态 id（来自 AngularJS）

> ID：16097812
> 
> 赞同：3
> 
> 时间：2013-04-19T05:29:49.090
> 
> 标签：javascript, angularjs, getelementbyid, angularjs-ng-repeat

我有一个可点击的下拉列表，如下所示：

```
<ul class="dropdown">
    <li ng-repeat="item in items" ng-controller="ListCtrl">
        <a href="#" onclick="addWidget();">{{item.name}}</a>
    </li>
</ul> 
```

我在同一个 html 页面中有以下 AngularJS 代码：

```
<li ng-repeat="item in items" ng-controller="ListCtrl">
    <div id="{{item.itemIndex}}">
     Some Code Here
    </div>
</li> 
```

现在我想在每次单击列表项时将每个 div 添加到我的页面中。我这样调用 addWidget() 函数：

```
<script type="text/javascript">
    function addWidget(){
    document.getElementById('').style.display='block';
    }
</script> 
```

现在我的问题是，如果我将静态 id 分配给 div 并将其传递给 getElementByID 那么它可以正常工作，但在动态情况下我如何传递 id 以便在每种情况下都能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T15:08:58.747

你不想像那样添加javascript。以下是如何执行此操作的示例：

```
<body ng-app="myApp">
      <div ng-controller="ListCtrl">
          <ul class="dropdown">
              <li ng-repeat="item in items">
                  <a href="#" ng-click="addWidget(item)">{{item.name}}</a>
              </li>
          </ul>

          <ul>
              <li ng-repeat="item in items" ng-show="item.show">
                  <div>Some Code Here</div>
              </li>
          </ul>
      </div>
</body> 
```

和你的控制器：

```
function ListCtrl($scope){
      $scope.items = [{name: 'one'}, {name: 'two'}];
      $scope.addWidget = function(item){
          item.show = !item.show;
      };
}; 
```

最后一个工作示例[在 jsfiddle 上](http://jsfiddle.net/2AWZk/)

# selenium - 如何在 selenium webdriver 中识别带有标签的按钮？

> ID：16097813
> 
> 赞同：1
> 
> 时间：2013-04-19T05:29:52.257
> 
> 标签：selenium, webdriver

我有一个应用程序，其中按钮 ID 不断变化。唯一一致的是标签。EG：按钮的“登录”标签。如何找到标签为“登录”的按钮？有人请帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:31:29.967

你可以使用xpath吗？

```
//button[text()='EG'] 
```

# mysql - 使用Mysql作为数据库时如何在asp.net c#中查找或解决此DBNull

> ID：16097815
> 
> 赞同：0
> 
> 时间：2013-04-19T05:30:05.510
> 
> 标签：mysql, asp.net-mvc-3, c#-4.0

我使用 ASP.Net MVC3 (c#) 和 Mysql 5.5 作为我最后一年项目的数据库时遇到了这个问题。问题是我刚刚将我的数据库添加到我的项目并使用服务器资源管理器，我使用了“添加连接”并获得了一个表列表。但是当我右键单击任何表并执行时，`Refresh`它会显示一个错误框，上面写着**“无法将'System.Dbnull'类型的对象转换为'System.string'”**。

请注意，我还没有写一行代码。

*   这个 DbNull 是什么？
*   我怎样才能摆脱困境并开始编码？

这是图像..

![在此处输入图像描述](https://i.stack.imgur.com/drnjO.jpg)

这是我创建表的方式：

```
CREATE TABLE admintable
( 
emailid varchar(45) NOT NULL Primary Key, 
password varchar(45) NOT NULL); 
```

# android - 如何在不解压缩android中的任何zip文件的情况下访问所有文件？

> ID：16097819
> 
> 赞同：1
> 
> 时间：2013-04-19T05:30:27.073
> 
> 标签：android, zip, epub3

我正在阅读 epub3 文件，我想访问所有用于创建 epub3 的文件，**而无需 **解压缩它****。**

任何建议或解决方案将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:37:32.847

虽然您可以在技术上从 zip 存档中读取字节而无需解压缩它们，但这对您没有帮助，因为数据将无法在任何 epub 显示中使用。

压缩文件时，使用压缩表对其进行压缩。这会改变文件的数据，要取回原始数据，您必须先解压缩或解压缩它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:47:15.007

这实际上是没有解压缩访问文件的方法。但是，有一种定向解压缩的方法，即解压缩特定文件而不是整个压缩文件夹。如果这听起来不错，您可能会选择[Objective zip](https://github.com/AgileBits/objective-zip)项目。

PS：即使我正在使用 epub3 阅读器，我也不得不解压缩整个文件夹。如果您找到更好的解决方法，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T13:05:13.757

我试图解决这个问题，我得到了以下解决方案。

Zip是一种文件类型，其中包含许多目录和文件，因此我们无法以目录和文件格式获取它。我们只能以字节为单位。哪个未使用。所以我们必须解压缩它......

因为每当我们解压它时，它本身就会产生一种子目录和文件的目录，所以我们可以以目录和文件格式访问它。

# android - Android设计方法说明

> ID：16097822
> 
> 赞同：4
> 
> 时间：2013-04-19T05:30:38.137
> 
> 标签：android, android-layout, android-drawable

我正在开发一个 android 应用程序。我必须使我的应用程序与所有设备兼容。我知道两种方法。那是

1.  为设备和选项卡创建单独的布局。例如 layout-small、layout-normal、large 等和 layout-sw600dp、layout-sw360dp 和 layout-sw720dp
2.  使用一种布局并使用不同的绘图资源，例如用于设备的 drawble-ldpi、mdpi、hdpi、xhdpi 和用于平板电脑的 drawable-large-mdpi 和 xlarge-mdpi。

哪种方式更好。请给我一个理由的答复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:40:13.913

这两者是完全不同的方法。

*   仅当您想为不同的屏幕尺寸制作不同的视图时，才应使用不同的布局文件。如果您的核心视图保持不变，则制作单独的布局文件是没有意义的。
*   如果您的视图保持不变并且资源文件仅发生变化，那么为您想要定位的设备创建单独的可绘制文件夹会更聪明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:43:36.673

第二个选项是最好的，否则如果您需要更改布局，则必须在多个文件中进行更改。此外，您可能必须为各种设备配置使用不同的样式。即使您使用第一个选项，您也必须将单独的图像保存在 drawble 资源中，例如 drawble-ldpi、mdpi、hdpi、xhdpi。使用一种布局并保留多个可绘制对象和样式以支持所有设备配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T05:45:42.687

如果所有屏幕的布局设计结构和方向都相同，那么最好使用单一布局。我希望你已经读过[这个](http://developer.android.com/training/multiscreen/screensizes.html)。但是如果你的布局结构不同，那就没有别的办法了。

即使您可以为多个屏幕使用单个可绘制资源，那么我认为使用单个资源文件夹也是一种选择。说对于某些图像，如果 android 自动调整到屏幕大小（例如全屏图像或压力不成问题的图像），它不会对您造成任何伤害。在这些情况下，您只能在 xhdpi 文件夹中使用这些图像

# android - 空指针异常：HTTP 实体

> ID：16097824
> 
> 赞同：3
> 
> 时间：2013-04-19T05:31:08.107
> 
> 标签：android, json, http, httprequest

我在以下代码中收到空指针异常，知道为什么吗？

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";
    static int GET = '1';
    static int POST ='2';

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params, int method) throws URISyntaxException {

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpResponse httpResponse = null;
        HttpEntity httpentity = null;
        HttpPost postrequest = null;

        try {
            switch (method) {
            case 1: 
                if(params!=null){
                    String paramString = URLEncodedUtils.format(params, "utf-8");
                    url += "?" + paramString;   
                }

                Log.e("URL", url);
                HttpGet httpGet = new HttpGet(url);
                httpResponse = httpClient.execute(httpGet);
                httpentity = httpResponse.getEntity();          

                break;
            case 2: 
                postrequest = new HttpPost(url);
                postrequest.setEntity(new UrlEncodedFormEntity(params,HTTP.UTF_8));
                httpResponse = httpClient.execute(postrequest);
                httpentity = httpResponse.getEntity();
                if(httpentity !=null)
                {
                    Log.i("RESPONSE", EntityUtils.toString(httpentity));
                }
                else{
                    Log.i("NULL", EntityUtils.toString(httpentity));
                }
                break;
            }
            is = httpentity.getContent();
        } 
        catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);            
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;
    }

} 
```

发生在该`NPE`行

```
is = httpentity.getContent(); 
```

基本上，我使用函数类访问这个类，最后通过另一个主类实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:37:22.533

问题是您`httpentity`在`null`要检索其内容的位置。您应该确保您的`method`is`1`或`2`，因为您可能会错误地忽略整个 switch 语句并直接运行到`is = httpentity.getContent();`.

此外，如果您查看 Android 文档，您可以阅读：

> public abstract HttpEntity getEntity () 在 API 级别 1 中添加
> 
> 获取此响应的消息实体（如果有）。实体是通过调用 setEntity 来提供的。
> 
> 返回响应实体，如果没有则返回 null

这意味着如果没有响应实体，`getEntity()`方法将返回`null`。而且您仅在第二种情况下进行了空检查。您还应该在要检索内容的地方检查它，因此您的整个 try 块应如下所示：

```
try {
    switch (method) {
    case 1: 
        if(params!=null){
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;   
        }

        Log.e("URL", url);
        HttpGet httpGet = new HttpGet(url);
        httpResponse = httpClient.execute(httpGet);
        httpentity = httpResponse.getEntity();          

        break;
    case 2: 
        postrequest = new HttpPost(url);
        postrequest.setEntity(new UrlEncodedFormEntity(params,HTTP.UTF_8));
        httpResponse = httpClient.execute(postrequest);
        httpentity = httpResponse.getEntity();
        if(httpentity !=null)
        {
            Log.i("RESPONSE", EntityUtils.toString(httpentity));
        }
        else{
            Log.i("NULL", EntityUtils.toString(httpentity));
        }
        break;
    }
    if(httpentity != null)
    {
        is = httpentity.getContent();
        Log.i("RESPONSE", EntityUtils.toString(httpentity));
    } else {
        Log.i("NULL", EntityUtils.toString(httpentity));
    }
} 
catch (UnsupportedEncodingException e) {
    e.printStackTrace();
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

# jquery - SelectBoxIt 和隐藏层

> ID：16097825
> 
> 赞同：1
> 
> 时间：2013-04-19T05:31:16.343
> 
> 标签：jquery

我正在尝试使用 Greg Franko 的 SelectBoxIt。我希望隐藏选择框，直到用户单击“更多选项”，然后才会出现这些选择框。这就是问题所在。当Selectbox出现时，宽度都会缩小。但是，当我在“更多选项”图层打开的情况下加载页面时，选择框以正确的宽度显示。知道如何让选择框以正确的宽度出现吗？

```
<!doctype html>
    <html>
    <head>
      <meta charset=utf-8>
      <title>SelectBoxIt demo</title>
      <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" />
      <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/base/jquery-ui.css" />
      <link type="text/css" rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
      <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/jquery.selectboxit/3.3.0/jquery.selectBoxIt.css" />
    </head>
    <body>
      <div id="btn_moreoptions2">MORE OPTIONS <img src="images/ic_arrow_down.gif" border="0"></div>
      <div id="moreoptions2"  style="display:none;">
        234
      <select name="test">
        <option value="SelectBoxIt is:">SelectBoxIt is:</option>
        <option value="a jQuery Plugin">a jQuery Plugin</option>
        <option value="a Select Box Replacement">a Select Box Replacement</option>
        <option value="a Stateful UI Widget">a Stateful UI Widget</option>
      </select>
      </div>

      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
      <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.selectboxit/3.3.0/jquery.selectBoxIt.min.js"></script>
      <script>
        $(function() {
          $("#btn_moreoptions2").click(function(){
            $("#moreoptions2").slideToggle();

    });
          var selectBox = $("select").selectBoxIt();

        });
      </script>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:54:01.670

其他人也报告了这个问题：[https ://github.com/gfranko/jquery.selectBoxIt.js/issues/149](https://github.com/gfranko/jquery.selectBoxIt.js/issues/149)

以下是两种可能的解决方案：

1.  当您使 SelectBoxIt 下拉菜单可见时，调用 SelectBoxIt`refresh()`方法来重建下拉菜单。由于元素现在可见，尺寸逻辑将正常工作。你可以看到它在[这里工作](http://jsfiddle.net/dJzhV/2/)

2.  使用静态宽度（可以在 CSS 中设置）而不是依赖 SelectBoxIt 的动态*自动宽度*。要设置静态宽度，请将`autoWidth`选项设置为 false。像这样： `$("select").selectBoxIt({ autoWidth: false });` 你可以看到它在[这里](http://jsfiddle.net/dJzhV/3/)工作。

# java - 带有 lambda 表达式的 PROLOG

> ID：16097826
> 
> 赞同：7
> 
> 时间：2013-04-19T05:31:16.593
> 
> 标签：java, lambda, prolog

是否有任何支持 lambda 表达式的 Java PROLOG 实现？我知道有其他语言的 Java 实现支持 lambda 表达式，例如 LISP 和 Clojure，但我确实需要一个 PROLOG 实现。

[http://en.wikipedia.org/wiki/Comparison_of_Prolog_implementations](http://en.wikipedia.org/wiki/Comparison_of_Prolog_implementations)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T01:50:08.640

Lean Prolog 是用 Java 实现的，可以运行 Logtalk，这使得 lambda 表达式可用于所有[支持的后端 Prolog 编译器](http://logtalk.org/compatibility.html)。有关 Logtalk 的 lambda 表达式语法的概述，请参见：

[https://logtalk.org/2009/12/08/lambda-expressions-in-logtalk.html/](https://logtalk.org/2009/12/08/lambda-expressions-in-logtalk.html)

有关使用示例，请参见：

[https://github.com/LogtalkDotOrg/logtalk3/tree/master/examples/lambdas](https://github.com/LogtalkDotOrg/logtalk3/tree/master/examples/lambdas)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T07:28:30.357

Ulrich Neumerkel 有一个 Prolog lambda 实现。例如 SWI-Prolog 就支持它。如果您在 Stackoverflow 中进行了搜索：

```
[swi-prolog] lambda 
```

您还可以使用它找到很多答案作为解决方案。

[此外，解释这一切](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/ISO-Hiord)的网页

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-05T09:54:47.040

Prolog 中的 lambda 表达式基本上有两种方法，它们只处理 lambda 表达式的调用，而 **不是**高阶统一：

*   **global-by-default：** lambda 表达式主体中的变量默认是全局的，如果它们没有被额外的绑定器提及。

*   **local-by-default：** lambda 表达式主体中的变量在默认情况下是本地的，如果它们没有被额外的绑定器提及。

local-by-default 的代表例如 Ulrich Neumerkel 的库 (lambda) 或 Logtalk 中的 lambda 表达式。Jekejeke Prolog 中的 lambda 表达式目前遵循 global-by-default 方法。

这两种方法都允许对相同的数学 lambda 表达式进行建模，并通过一些进一步的语法解决以下问题：

*   控制跨多个调用共享或不共享变量。

*   强制 lambda 表达式主体中的活页夹和局部变量的 alpha 转换。

这是一个示例，通过 Y 组合器进行阶乘：

*   默认全局：Jekejeke Prolog [API](http://www.jekejeke.ch/idatab/doclet/prod/en/docs/05_run/10_docu/05_frequent/07_theories/13_experiment/03_abstract.html) [源](http://www.jekejeke.ch/idatab/doclet/blog/en/docs/05_run/05_frequent/experiment/abstract.html)

```
    ?- Y = F\X^call(X\call(F,call(X,X)),X\call(F,call(X,X))),
       事实 = F\J^H^M^N^N\J^H^M^M\J^H^(N=0,M=1;N>0,H 为 N-1,调用(F,H ,J),M 是 N*J),
       呼叫（Y，事实，10，R）。
    R = 3628800。

```

*   默认本地：[Ulrich Neumerkel 的库（lambda）](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)

```
    ?- Y = \F^call([F]+\X^call(F,call(X,X)),[F]+\X^call(F,call(X,X))),
       事实 = \F^([F]+\N^([N,F]+\M^(N=0,M=1;N>0,H 是 N-1,call(F,H,J) ,M 是 N*J))),
       呼叫（Y，事实，10，R）。
    R = 3628800。

```

再见

PS：global-by-default 和 local-by-default 的区别借自第 10 页：
**The Language Features and Architecture of B-Prolog**
Neng-Fa Zhou, Theory and Practice of Logic Programming, 2011
[http://www. sci.brooklyn.cuny.edu/~zhou/papers/tplp11sips.pdf](http://www.sci.brooklyn.cuny.edu/%7Ezhou/papers/tplp11sips.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-30T11:01:15.150

在 SWI-Prolog 中有`library(yall)`（[https://www.swi-prolog.org/pldoc/man?section=yall](https://www.swi-prolog.org/pldoc/man?section=yall)），它甚至支持柯里化：

```
?- use_module(library(yall)).

?- maplist([X,Y]>>(Y #= 2*X), [1,2,3], Ys).
Ys = [2, 4, 6].

?- maplist([X,Y]>>([Z]>>(Z #= X * Y)), [1,2,3], [3,4,5], Ys).
Ys = [3, 8, 15].

?- maplist([X,Y,Z]>>(Z #= X * Y), [1,2,3], [3,4,5], Ys).
Ys = [3, 8, 15].

?- maplist([X]>>([Y]>>([Z]>>(Z #= X * Y))), [1,2,3], [3,4,5], Ys).
Ys = [3, 8, 15]. 
```

与`library(lambda)`：

```
?- maplist(\X^(\Y^(Y #= 2*X)), [1,2,3], Ys).
Ys = [2, 4, 6].

?- maplist(\X^Y^(\Z^(Z #= X * Y)), [1,2,3], [3,4,5], Ys).
Ys = [3, 8, 15].

?- maplist(\X^Y^Z^(Z #= X * Y), [1,2,3], [3,4,5], Ys).
Ys = [3, 8, 15].

?- maplist(\X^(\Y^(\Z^(Z #= X * Y))), [1,2,3], [3,4,5], Ys).
Ys = [3, 8, 15]. 
```

然而，lambdas`library(lambda)`也可以用于“提取”查询的某些变量的值：

```
?- Xs = [1,2,3,4,5,6,7], member(X, Xs), 0 #= X mod 2, Y #= X * 2.
Xs = [1, 2, 3, 4, 5, 6, 7],
X = 2,
Y = 4 ;
Xs = [1, 2, 3, 4, 5, 6, 7],
X = 4,
Y = 8 ;
Xs = [1, 2, 3, 4, 5, 6, 7],
X = 6,
Y = 12 ;
false.

?- Y+\(Xs = [1,2,3,4,5,6,7], member(X, Xs), 0 #= X mod 2 Y #= X * 2).
Y = 4 ;
Y = 8 ;
Y = 12 ;
false. 
```

# automation - AHK 用于选择上下文菜单选项 - 不工作

> ID：16097831
> 
> 赞同：0
> 
> 时间：2013-04-19T05:31:29.970
> 
> 标签：automation, contextmenu, autohotkey

我正在尝试创建一个热键（`Ctrl`+ `l`）来执行以下操作：

1.  **右键单击**当前鼠标位置。（调出上下文菜单）
2.  在**上下文菜单中**转到**第二个选项**。（或任何其他选项）
3.  在该选项上单击**Enter 。**

    > ```
    > ^l::MouseClick, right
    > Sleep, 1000
    > Send, {DOWN  2}{ENTER} 
    > ```

**问题：**
问题是只有右键单击命令有效并成功调出上下文菜单，但**向下**根本不起作用，因此从菜单中选择了 NO OPTION。

**附加信息：**
我发现如果上下文菜单已经存在，然后如果我运行以下脚本：

> 发送，{DOWN 2}{ENTER}

它选择选项成功。但是我需要通过单个热键完成右键单击和选项选择。

*我究竟做错了什么 ？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:40:50.873

你写`MouseClick, Right`在同一行`^l::`，这样只执行第一行。

```
^l::
MouseClick, right
Sleep, 100
Send, {DOWN 2}{ENTER}
Return 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:41:24.133

如果您在同一行中使用命令声明热键，则只会执行该行

```
^l::MouseClick, right  ; only this line is executed
Sleep, 1000
Send, {DOWN  2}{ENTER} 
```

与此相比：

```
^l::
MouseClick, right
Sleep, 1000
Send, {DOWN  2}{ENTER}
return 
```

所有行都被执行。

# ios6 - 在 iOS 拆分视图控制器上推送新的视图控制器

> ID：16097833
> 
> 赞同：1
> 
> 时间：2013-04-19T05:31:33.360
> 
> 标签：ios6, xcode4.3, ipad

我正在使用 splitviewcontroller 模板。从详细视图中，我使用 SEGUE 导航到不同的视图控制器。问题是新视图仅显示在拆分视图的详细视图部分。我希望新视图覆盖整个屏幕或完全删除主视图（当新视图被推送时）并稍后推回主视图的方法。我怎样才能做到这一点 ？

一些代码示例会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T17:13:18.890

您可以实现此委托方法以有条件地隐藏主视图：

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController (UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation
{
    return YES;
} 
```

# ssis - 如何将 2 行视为使用 SSIS 将 excel 导入 sql server 的列名

> ID：16097846
> 
> 赞同：1
> 
> 时间：2013-04-19T05:32:41.503
> 
> 标签：ssis, sql-server-2008-r2, excel-2007, bids

我正在使用**SSIS**包将 Excel 数据导入数据库。

问题是我想考虑**第二行，即 A2:Z2 作为列名。**

我**不想**考虑**A1:Z1**。

我怎样才能实现它。

**我研究的[Link 1](https://stackoverflow.com/questions/12415838/ssis-excel-to-sql-import-first-6-rows-of-the-file-contains-header-related-inf) [Link 2](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/66379b0e-4cab-476e-bbb8-c8640c8c0c03/)**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T06:01:24.570

我有一个示例 excel 文件，其中包含如下数据

![在此处输入图像描述](https://i.stack.imgur.com/cD01s.png)

在 excel 源中使用`SQL Command`并`Data access mode`编写查询以跳过初始行

```
SELECT * FROM [Sheet1$A2:B]
--In your case it will be [Sheet1$A2:Z] 
```

并在 excel 连接管理器中选择选项`First Rows as Column name`

![在此处输入图像描述](https://i.stack.imgur.com/kiiaY.png)

当我尝试预览它时，我从第二行开始获取数据

![在此处输入图像描述](https://i.stack.imgur.com/drWme.png)

# php - Body background images not shown on iPad and iPhone

> ID：16097848
> 
> 赞同：0
> 
> 时间：2013-04-19T05:32:56.023
> 
> 标签：php, iphone, html, css, ipad

I have created a website which works well on the desktop, but on iPhone and iPad background images are not shown.

I have tried deleting the php script that chooses the image and re-written the code to use javascript to set the background and in this case the background is showed correctly.

This is the php code that chooses the image:

```
<?php
//if  doesn't exist, open the session
if(!isset($_SESSION))
{
    session_start();
}
//set coockie
setcookie("allweb","connected", time()+3600);
//if doesn' exist yet, I create a new array
if(!isset($_SESSION['arrayImage'])){
    $arrayImage = array(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15);
}else{// else I get from sessiom
    $arrayImage = $_SESSION['arrayImage'];  
}
//if already exist variable $picture, increment it
if(isset($_SESSION['picture']) && isset($arrayImage)){
    $picture=$_SESSION['picture'];
    $picture = $picture + 1;
    $_SESSION['picture'] = $picture;//save picture
}else{// else I create it
    $picture = 1;
    $_SESSION['picture'] = $picture;// save it
    shuffle($arrayImage);// I shuffle the array
    $_SESSION['arrayImage'] = $arrayImage;//save array to the session
}
?> 
```

and in the php pages i have this code between the style tags:

```
<style type="text/css">
<?php 
if($picture < 15){//if I'm not out fo bound I continue
    echo 'body {background-image:url("images/bg'.$arrayImage[$picture].'hq.jpg");}';
}
else{// else I set picture to default value and restar the loop.
    $picture = 0;
    $_SESSION['picture'] = $picture;// save it
    echo 'body {background-image:url("images/bg'.$arrayImage[$picture].'hq.jpg");}';
}       
?>      
</style> 
```

The problem is that the images are not showed immediately but I have to zoom the pages then they appear.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:06:22.833

我假设您已经检查了输出并且它是正确的。如果是这种情况，请尝试从背景 url 中删除引号：

```
body {background-image:url("images/bg'.$arrayImage[$picture].'hq.jpg");} 
```

至

```
body {background-image:url(images/bg'.$arrayImage[$picture].'hq.jpg);} 
```

顺便说一句，使用它们是绝对有效的，但这种情况很少见，即使使用有效的标记，iOS 的 Webkit 渲染器有时也会产生一些非常错误的结果。不幸的是，它不同于 Android 的 Webkit 渲染器或任何 x86 Webkit 引擎，因此如果没有非常昂贵的 Apple 设备，这些问题就无法重现和深入检查。

使用 JS 完成的 CSS 修改，特别是框架（例如 jQuery）通常会智能解析，从而在需要时进行语法更正，所以这就是为什么那些引号是我的主要嫌疑人。

# c# - How to call method in button onclick event mvc4?

> ID：16097853
> 
> 赞同：2
> 
> 时间：2013-04-19T05:33:39.113
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

I have one method in Inside of Razor view.

```
<div style="height: 50px; padding-left: 10%; width: 100%">
                                <b style="font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: xx-large">                                        
                                @functions {      
                                    public string schoolname()
                                    {
                                        if (Request.IsAuthenticated && !User.IsInRole("SuperAdmin"))
                                        {
                                            string currentUserName = User.Identity.Name;
                                            return GetHeaderSchoolName(currentUserName);
                                        }
                                        return string.Empty;
                                    }

                                    public string GetHeaderSchoolName(string userName)
                                    {
                                        Guid userId = SchoolBreifcase.Utilities.Common.GetUserId(userName);
                                        SchoolBreifcase.Repositories.AdminRepository adminRepository = new SchoolBreifcase.Repositories.AdminRepository();
                                        SchoolBreifcase.Models.Edmx.UserProfile userProfile = adminRepository.GetUserProfileByUserId(userId);
                                        string CurrentSchoolName = userProfile.School.SchoolName;
                                        return CurrentSchoolName + "xxx";
                                    }
                                                }
                            </div> 
```

I have one button in inside of same razor view.And I called that method(`schoolname()`) in my below button onclick event (`onclick="schoolname()"`) please see below

```
<div class="logoHeader" style="float: right; width: 15%; padding-top: 5%;">                            
                             **<button onclick="schoolname()"> xx</button>**   
                        </div> 
```

But .Its Not working . My method is does not called .I have no idea for this task . You have Any idea here? and how to do solve this ?

```
Updated: 
```

I know the procedure are threw controller ,action result,get ,post, java script,jquery,etc ,all . My question is What is use of `@functions` ? in razor view . I know its helping to write server side code in inside of razor view . but i can't call this method in just one button click event . So what is the use it ? Its only used only for when page load .

**Finished my self :**

**See below my Razor View Function :**

```
<div style="height: 50px; padding-left: 10%; width: 100%">
                                    <b style="font-family: Arial, Helvetica, sans-serif; font-weight: normal; font-size: xx-large">                                        
                                    @functions {      
                                        public string schoolname()
                                        {
                                            if (Request.IsAuthenticated && !User.IsInRole("SuperAdmin"))
                                            {
                                                string currentUserName = User.Identity.Name;
                                                return GetHeaderSchoolName(currentUserName);
                                            }
                                            return string.Empty;
                                        }

                                        public string GetHeaderSchoolName(string userName)
                                        {
                                            Guid userId = SchoolBreifcase.Utilities.Common.GetUserId(userName);
                                            SchoolBreifcase.Repositories.AdminRepository adminRepository = new SchoolBreifcase.Repositories.AdminRepository();
                                            SchoolBreifcase.Models.Edmx.UserProfile userProfile = adminRepository.GetUserProfileByUserId(userId);
                                            string CurrentSchoolName = userProfile.School.SchoolName;
                                            return CurrentSchoolName + "xxx";
                                        }
                                                    }
                                </div> 
```

**And I am used `javascript:window.location.href="schoolname"` for call my function** .Its working now .

```
<div class="logoHeader" style="float: right; width: 15%; padding-top: 5%;">                            
                                 **<button onclick='javascript:window.location.href="schoolname"'> xx</button>**   
                            </div> 
```

Thanks Guy's .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:51:01.927

我的朋友，你这样做完全错了，因为 Asp.net Mvc 不像经典的 Asp.net Web 表单。我建议你看看[这本书](https://rads.stackoverflow.com/amzn/click/com/1430257520)以获取更多信息。但是，要解决您的问题，您可以在 CShtml 中轻松执行此操作：

```
@{
var result = Request["YourButtonSpecialName"];   
 }
@if (result=="xx")
{
   <div>
button clicked
</div>    
}
<div class="logoHeader" style="float: right; width: 15%; padding-top:5%;">
<form action="YOUR CURRENT PATH">
<button type="submit" name="YourButtonSpecialName" value="xx"/>
</form>
</div> 
```

# java - Identifier required when invoking a private method

> ID：16097856
> 
> 赞同：-2
> 
> 时间：2013-04-19T05:33:43.963
> 
> 标签：java

I am calling a private method for testing and for that I am using the following code to invoke private method. repeat() is the private method of class Diamond

```
import org.junit.Test;
import static org.junit.Assert.*;
import java.lang.StringBuilder;
import java.lang.reflect.Method;
public class DiamondUnit {
        StringBuilder expect = new StringBuilder();
        Diamond test = new Diamond();
        Method m = test.getClass().getDeclaredMethod("repeat");
        m.setAccessible(true);
        m.invoke(test);

    @Test
        public void testRepeatNeg() {
            assertEquals("", test.repeat(expect,"a",-1));
        }
} 
```

While compiling it is giving error

```
DiamondUnit.java:11: error: expected
m.setAccessible(true);
^
DiamondUnit.java:11: error: illegal start of type
m.setAccessible(true);
^
DiamondUnit.java:12: error: expected
m.invoke(test);
^
DiamondUnit.java:12: error: expected
m.invoke(test);
^ 
```

I had cop pasted the exact error message which I am getting

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:53:27.530

您不能在方法块之外有语句。将代码放入适当的方法中。

```
import org.junit.Test;
import org.junt.SetUp;
import static org.junit.Assert.*;
import java.lang.StringBuilder;
import java.lang.reflect.Method;
public class DiamondUnit {
    public void method() {
        StringBuilder expect = new StringBuilder();
        Diamond test = new Diamond();
        Method m = test.getClass().getDeclaredMethod("repeat");
        m.setAccessible(true);
        m.invoke(test);
    }

    @Test
        public void testRepeatNeg() {
            assertEquals("", test.repeat(expect,"a",-1));
        }
} 
```

# javascript - clear timeout when second settimeout called

> ID：16097858
> 
> 赞同：-2
> 
> 时间：2013-04-19T05:34:02.287
> 
> 标签：javascript, jquery, html

i have 5 settimeouts. i want to clear the firstone when second one is called. and so on... help me guys???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:36:58.887

尝试类似：

```
var timeout1 = setTimeout(animate5, 1000);
var timeout2 = setTimeout(function() {
    clearTimeout(timeout1);
    animate4();
}, 11000);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:37:19.743

尝试这个

```
 var timeout1 = setTimeout(animate5, 1000);
var timeout2 = setTimeout(function() {
    clearTimeout(timeout1);
    animate4();
}, 11000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:38:00.607

尝试

```
var t5 = setTimeout(animate5, 1000);
var t4 = setTimeout(animate4, 11000);
var t3 = setTimeout(animate3, 21000);
var t2 = setTimeout(function() {
    clearTimeout(t1);
    animate2();
}, 31000);
var t1 = setTimeout(animate1, 41000); 
```

# azure - Azure 上的 NServiceBus 使用哪个传输绑定？

> ID：16097862
> 
> 赞同：1
> 
> 时间：2013-04-19T05:34:17.407
> 
> 标签：azure, nservicebus, servicebus

`AzureServiceBusMessageQueue`使用vs.的优缺点是`AzureMessageQueue`什么？

我知道这两个传输绑定仅在 Azure 上存在差异，例如消息大小、并发性、重复行为等。但是其中大部分已经由 NServiceBus 协调（或者我认为 - 因为 NServiceBus 文档在学科）。NServiceBus 本身允许您将有效负载存储在 blob 存储中。

那么，使用其中一种与另一种相比有什么优缺点呢？我最关心的是：性能、可扩展性、有效负载限制、在内部和外部移动解决方案的灵活性和成本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:08:53.177

我会说 Azure 服务总线队列/主题通常提供更多的灵活性和功能。如果您查看 Microsoft 的投资，我还声称与存储队列相比，他们在服务总线消息传递上投入了更多投资。
我同意 NServiceBus 提供了这些服务总线队列通常也提供的一些功能，但是您是否使用它们取决于您。您可能会查看定价差异，但服务总线实体的好处是您可以在侦听消息时有（非常）长时间的超时，这减少了您支付的交易数量。据我记得（自从我使用存储队列以来已经有一段时间了）存储队列并非如此

高温高压

# android - 在mono中为android动态选择api

> ID：16097865
> 
> 赞同：0
> 
> 时间：2013-04-19T05:34:45.547
> 
> 标签：android, mono, xamarin.android

有没有办法检测当前版本的android并为一个版本使用一个代码路径，为更高版本使用另一个代码路径？

像 ClipboardManager 这样的东西，API 级别 11 中有一个新版本，但访问这个新类的唯一方法是告诉 mono for android 最低要求是 API 级别 11。

我“认为”你可以使用 java 反射来解决这个问题，但我想这在使用 Mono for Android 时是行不通的。有没有人对如何使用两个 ClipboardManager 有任何建议，早期版本的早期版本，后期版本的后期版本，而不将 API 级别设置为 11 或更高。

这是一个通用示例，不限于 ClipboardManager。我相信我会遇到更多的类，如果可用的话，我可以选择使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:10:52.310

当然有。只需确保在清单中设置您的目标 API 级别。

例如，当想要使用 API 11 时，您可以执行以下操作：

```
if ((int)Build.VERSION.SdkInt >= 11)
{
    //Execute API 11 and up code here
} 
```

但是，如果您使用的方法和类仅存在于 API 11 中，VS 可能会抱怨找不到它们，因此您可以在它们周围加上预处理器符号，例如：

```
#if __ANDROID_11__
    // your API 11 and up code here
#endif 
```

# django - 如何在应用程序启动时预加载 django 的视图？

> ID：16097869
> 
> 赞同：1
> 
> 时间：2013-04-19T05:35:05.690
> 
> 标签：django, global-variables

我在views.py 中写了一些需要一些时间来初始化的全局变量。我不想在请求后响应，而是想在服务器启动时初始化这些变量。有什么办法吗？我已经尝试谷歌但徒劳无功。我想我不可能是第一个有这种需求的人。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:24:53.567

您似乎在谈论 settigs，这意味着在开始时固定的变量。

您可以在其中设置此类变量`settigs.py` 并访问它们导入设置：

**设置.py**

```
MYSETTING = some expression 
```

**视图.py**

```
from django.conf import settings
...
mycalc = ... MYSETTINGS ... 
```

# java - 如何为基于 Eclipse 表单的插件编辑器的多个实例设置单独的全局操作处理程序

> ID：16097872
> 
> 赞同：0
> 
> 时间：2013-04-19T05:35:10.903
> 
> 标签：java, eclipse, plugins, eclipse-plugin, eclipse-rcp

我正在研究基于 Eclipse 表单的编辑器。我已经向我的编辑器提供了对 Undo Redo 和脏标志处理的支持。这两个功能都适用于单个插件实例。当我用 2 个或更多文件（2 个或更多 eclipse 插件实例）打开它时，问题就来了。现在，撤消重做开始变得奇怪。它们仅适用于最后打开的实例。

例如：假设我的编辑器支持“.xeb”文件。如果我使用编辑器一一打开 test1.xeb 和 test2.xeb 文件。然后撤消重做仅适用于为 test2.xeb 文件打开的实例。如果我切换回其他实例，则会出现第一个实例的撤消重做。

我的编辑器的 plugin.xml 中有以下条目：

```
 <plugin><extension
     point="org.eclipse.ui.editors">
  <editor
        class="Testeditor"
        default="true"
        extensions="xeb"
        icon="icons/sample.gif"
        id="testeditor"
        name="editor">
  </editor>
 </plugin> 
```

我调试了代码，发现这种奇怪的行为是由于以错误的方式处理全局动作而发生的。我使用下面的代码来设置全局动作处理程序：

```
public void setUndoRedoActionHandlers() {

    final IActionBars actionBars = getEditorSite().getActionBars();
    actionBars.setGlobalActionHandler(ActionFactory.UNDO.getId(),
            mUndoAction);
    actionBars.setGlobalActionHandler(ActionFactory.REDO.getId(),
            mRedoAction);
    actionBars.updateActionBars();
} 
```

我浏览了一些与此问题相关的链接。但无法理解实现此行为的概念。

```
http://wiki.eclipse.org/FAQ_How_do_I_find_out_what_view_or_editor_is_selected%3F
http://wiki.eclipse.org/FAQ_How_do_I_hook_into_global_actions,_such_as_Copy_and_Delete%3F 
```

任何人都可以研究这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T11:05:38.433

仅在编辑器类中覆盖 MultiPageEditorPart 的 setFocus() 方法并调用设置全局动作处理程序的适当方法，如下所示：

```
@Override
    public void setFocus() {
        switch (getActivePage()) {
        case 0:
            pageOne.setUndoRedoActionHandlers();
            break;
        case 1:
            pageTwo.setUndoRedoActionHandlers();
            break;
        }   
        super.setFocus();
    } 
```

# objective-c - _OBJC_CLASS_$_GDataEntryBase”，引用自：GDataServiceGoogle.o 中的 objc-class-ref

> ID：16097873
> 
> 赞同：0
> 
> 时间：2013-04-19T05:35:33.813
> 
> 标签：objective-c

我想在 iphone 应用程序中集成 yahoo api，但我得到这个“_OBJC_CLASS_$_GDataEntryBase”，引用自：GDataServiceGoogle.o 错误中的 objc-class-ref，请帮助我如何摆脱这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:41:40.097

一旦检查您的项目该框架是否存在，请检查此框架，

确保您确实将框架链接到您的目标应用程序。在 xcode 中，单击项目文件，单击所需的目标，选择构建阶段选项卡，使用库展开链接二进制文件。如果您没有看到您尝试使用的框架，请单击该部分底部的加号导航到该框架并添加。

# java - Start and then pause animation in android

> ID：16097874
> 
> 赞同：0
> 
> 时间：2013-04-19T05:35:36.533
> 
> 标签：java, android, animation

I have a circular layout and there are "n" buttons in this layout. I start the animation on that layout when the activity starts.

When I click on any button the animation should stop and a dialog appear with the message, "You have clicked this 'XYZ' button".

The code I am using:

```
 animation = AnimationUtils.loadAnimation(this, R.anim.rotate);
    animation.setFillEnabled(true);
    animation.setFillAfter(true);
    findViewById(R.id.circle_layout).startAnimation(animation); 
```

and the animation XML:

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="15000"
android:fromDegrees="0"
android:pivotX="50%"
android:pivotY="50%"
android:repeatCount="infinite"
android:toDegrees="360" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-03T21:32:28.420

There is no pause as posted. But you can mimic it.

This answer worked for me: [How do I pause frame animation using AnimationDrawable?](https://stackoverflow.com/questions/2864488/how-do-i-pause-frame-animation-using-animationdrawable/2864503#2864503)

```
public class PausableAlphaAnimation extends AlphaAnimation {

    private long mElapsedAtPause=0;
    private boolean mPaused=false;

    public PausableAlphaAnimation(float fromAlpha, float toAlpha) {
        super(fromAlpha, toAlpha);
    }

    @Override
    public boolean getTransformation(long currentTime, Transformation outTransformation) { 
        if(mPaused && mElapsedAtPause==0) {
            mElapsedAtPause=currentTime-getStartTime();
        }
        if(mPaused)
            setStartTime(currentTime-mElapsedAtPause);
        return super.getTransformation(currentTime, outTransformation);
    }

    public void pause() {
        mElapsedAtPause=0;
        mPaused=true;
    }

    public void resume() {
        mPaused=false;
    }
} 
```

Please note: this does not technically 'pause' the animation because it keeps continuously calling the transformation. But can keeps a persistent transformation that 'mimics' the same functionality.

I tried this with a RotateAnimation and worked just fine. But it will not lower the CPU/framerate when it is 'paused' as it does when you cancel the animation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:00:35.710

android中没有`pause`动画。我在 StackOverflow 上检查了许多与此相关的问题，但没有运气。您仍然可以尝试使用此[链接](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)`Activity`暂停自身，这可能会有所帮助。该链接指出以下内容：

**暂停您的活动**

当系统为您的 Activity 调用 onPause() 时，从技术上讲，这意味着您的 Activity 仍然部分可见，但通常表明用户正在离开该 Activity，并且它很快就会进入“已停止”状态。您通常应该使用 onPause() 回调来：

1.  停止可能消耗 CPU 的动画或其他正在进行的操作。
2.  提交未保存的更改，但前提是用户希望在他们离开时永久保存此类更改（例如草稿电子邮件）。
3.  释放系统资源，例如广播接收器、传感器句柄（如 GPS），或在您的活动暂停且用户不需要它们时可能影响电池寿命的任何资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:21:54.667

没有很好的方法可以在周期中暂停动画。

您可以继承 RotateAnimation 并拦截 currentTime 值，`getTransformation`并在您希望动画暂停时同时输入它。

如果你负担得起只支持 HC+，那么你应该考虑使用属性动画而不是视图动画。

# javascript - Kendo UI：无法使用 MVVM 将数据绑定到列表视图

> ID：16097878
> 
> 赞同：2
> 
> 时间：2013-04-19T05:35:46.707
> 
> 标签：javascript, mvvm, kendo-ui

我是 kendo ui mvvm 的新手，面临以下问题：

**场景** 我需要使用 MVVM 格式填充角色为列表视图的 div 中的几个字段。

数据来自数据源，我收到一个不寻常的错误。我无法将数据源中的字段绑定到 div。

以下是我的 JSBin 示例：http: [//jsbin.com/ajoyug/6/edit](http://jsbin.com/ajoyug/6/edit)

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.rtl.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.default.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.dataviz.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.dataviz.default.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://cdn.kendostatic.com/2013.1.319/js/kendo.all.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div id="myListView" data-role="listView" data-bind="source:dataSource">
    <span data-bind="text:prodName"></span>
    <span data-bind="text:qty"></span>
    <span data-bind="text:total"></span>
    <span data-bind="text:price"></span>
  </div>
</body>
</html> 
```

**JavaScript：**

```
$(document).ready(function(){
var data = [
    {
    "Id":1,
    "img":"../public/images/product/shoes.png",
    "code":"00021543",
    "fullProdName":"Jimmy Choo - Simone Pump Shoes",
    "prodName":"Simone Pump Shoes",
    "description":"A perfect Red carpet companion. Jimmy Choo shoes spells success and glamour. Be the talk of the town...",
    "price":"1500.0",
    "total":"1500.0",
    "qty":"1",
    "discount":"0.00",
    "brand":"Jimmy Choo",
    "category":"Shoes",
    "points":"100",
    "tax":"0.00" }
];

  var dataSource = new kendo.data.DataSource({
    data: data, 
    pagesize: 10,
    schema: {
      model: {
        id: "Id",
        fields: {
          prodName: { editable: false},
          qty: { editable: true},
          price: { editable: false},
          total : {editable :false}
        }
      }
    }
  });

dataSource.read();

  var listViewModel = kendo.observable({
    dataSource:dataSource
  });
  kendo.bind($("#myListView"), listViewModel);
}); 
```

请帮帮我。我在网上看到了很多示例，但是他们使用模板来绑定多个值，或者它们不适合我的要求..因此我想创建自己的 JSBin 示例并询问我在哪里卡住了...

**问题** 我应该如何绑定来自数据源的字段？

我的最终动机是将 div 与 dataSource 中的值绑定。如果不将其设置为列表视图，是否还有其他方法可以做到这一点？

谢谢！！

哈迪克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:05:47.040

你的 JavaScript 看起来不错。不过，您的 HTML 存在一些问题。属性`data-role`必须是. `"listview"`而不是在您的 listview 中放置 4 个跨度`div`，您应该真正使用模板，并通过 ID 引用它。

同样重要的是要注意您的模板必须有一个根元素，因为 kendo 只对模板中的第一个元素执行绑定。

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.rtl.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.default.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.dataviz.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.dataviz.default.min.css" rel="stylesheet" type="text/css" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://cdn.kendostatic.com/2013.1.319/js/kendo.all.min.js"></script>
<script id="tmp" type="text/x-kendo-template">
  <div>
    <span data-bind="text:prodName"></span><br/>
    <span data-bind="text:qty"></span><br/>
    <span data-bind="text:total"></span><br/>
    <span data-bind="text:price"></span>
  </div>
</script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div
    id="myListView"
    data-role="listview"
    data-bind="source: dataSource"
    data-template="tmp">
  </div>
</body>
</html> 
```

**JavaScript：**

```
$(document).ready(function(){
var data = [
    {
    "Id":1,
    "img":"../public/images/product/shoes.png",
    "code":"00021543",
    "fullProdName":"Jimmy Choo - Simone Pump Shoes",
    "prodName":"Simone Pump Shoes",
    "description":"A perfect Red carpet companion. Jimmy Choo shoes spells success and glamour. Be the talk of the town...",
    "price":"1500.0",
    "total":"1500.0",
    "qty":"1",
    "discount":"0.00",
    "brand":"Jimmy Choo",
    "category":"Shoes",
    "points":"100",
    "tax":"0.00" }
];

  var dataSource = new kendo.data.DataSource({
    data: data, 
    pagesize: 10,
    schema: {
      model: {
        id: "Id",
        fields: {
          prodName: { editable: false},
          qty: { editable: true},
          price: { editable: false},
          total : {editable :false}
        }
      }
    }
  });

  var listViewModel = kendo.observable({
    dataSource:dataSource
  });
  kendo.bind($("#myListView"), listViewModel);
}); 
```

# sparql - SPARQL 查询没有给出 dbpedia 上的所有结果

> ID：16097880
> 
> 赞同：3
> 
> 时间：2013-04-19T05:35:53.430
> 
> 标签：sparql, dbpedia

我在[http://dbpedia.org/snorql/](http://dbpedia.org/snorql/)中执行这个查询：

询问：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>        
PREFIX type: <http://dbpedia.org/class/yago/>
PREFIX prop: <http://dbpedia.org/property/>
SELECT ?country_name ?population
WHERE {
    ?country a type:LandlockedCountries ;
             rdfs:label ?country_name ;
             prop:populationEstimate ?population .
} 
```

该查询查找所有陆地国家。

我不明白为什么结果中没有一些国家被归类为“/dbpedia.org/class/yago/LandlockedCountries”。例如，巴拉圭 (/dbpedia.org/page/ParaguAy) 已分类但未出现在查询结果集中。有人可以解释一下为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:42:24.953

不幸的是，有少数内陆国家没有`country_name`和`populationEstimate`属性中的至少一个。这就是为什么它们不会在您的查询中返回的原因。如果您运行以下查询，则会出现这些国家/地区（这两个属性设置为`OPTIONAL`）。

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>        
PREFIX type: <http://dbpedia.org/class/yago/>
PREFIX prop: <http://dbpedia.org/property/>
SELECT ?country ?country_name ?population
WHERE {
    ?country a type:LandlockedCountries .
    OPTIONAL {?country rdfs:label ?country_name Filter(lang(?country_name) = 'en')} .
    OPTIONAL {?country prop:populationEstimate ?population} .
} 
```

[运行查询](http://dbpedia.org/snorql/?query=PREFIX%20rdfs%3a%20%3Chttp://www.w3.org/2000/01/rdf-schema#%3E%20%20%20%20%20%20%20%20%0D%0APREFIX%20type%3a%20%3Chttp://dbpedia.org/class/yago/%3E%0D%0APREFIX%20prop%3a%20%3Chttp://dbpedia.org/property/%3E%0D%0ASELECT%20?country%20?country_name%20?population%0D%0AWHERE%20%7B%0D%0A%20%20%20%20?country%20a%20type%3aLandlockedCountries%20.%0D%0A%20%20%20%20OPTIONAL%20%7B?country%20rdfs%3alabel%20?country_name%20Filter%28lang%28?country_name%29%20=%20%27en%27%29%7D%20.%0D%0A%20%20%20%20OPTIONAL%20%7B?country%20prop%3apopulationEstimate%20?population%7D%20.%0D%0A%7D%20)

为了（稍微）更好的结果，由于某些国家似乎与错误的大写重复（例如*ParaguAy*和*Paraguay*），以下查询使用 `?country dcterms:subject category:Landlocked_countries`而不是 yago 类。

[运行查询](http://dbpedia.org/snorql/?query=PREFIX+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E++++++++%0D%0APREFIX+type%3A+%3Chttp%3A%2F%2Fdbpedia.org%2Fclass%2Fyago%2F%3E%0D%0APREFIX+prop%3A+%3Chttp%3A%2F%2Fdbpedia.org%2Fproperty%2F%3E%0D%0APREFIX+dcterms%3A+%3Chttp%3A%2F%2Fpurl.org%2Fdc%2Fterms%2F%3E%0D%0APREFIX+category%3A+%3Chttp%3A%2F%2Fdbpedia.org%2Fresource%2FCategory%3A%3E%0D%0ASELECT+%3Fcountry+%3Fcountry_name+%3Fpopulation%0D%0AWHERE+%7B%0D%0A++++%3Fcountry+dcterms%3Asubject+category%3ALandlocked_countries+.%0D%0A++++OPTIONAL+%7B%3Fcountry+rdfs%3Alabel+%3Fcountry_name+Filter%28lang%28%3Fcountry_name%29+%3D+%27en%27%29%7D+.%0D%0A++++OPTIONAL+%7B%3Fcountry+prop%3ApopulationEstimate+%3Fpopulation%7D+.%0D%0A%7D+)

# magento - Magento 重定向 301 主页

> ID：16097889
> 
> 赞同：1
> 
> 时间：2013-04-19T05:37:09.147
> 
> 标签：magento, redirect

我遇到了谷歌的问题。它用这样的非友好网址为我的网站编制了索引， `**mydomain.com/home?param=22**`但我有友好的网址。

我想将（301）重定向`**mydomain.com/home?param=22**`到`**mydomain.com/**`使用 htaccess

ps：我正在使用Magento。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:54:56.523

在您的 Magento 的 .htaccess 中，将这一行添加到以下`RewriteBase`行：

```
RewriteRule ^home/?$ /? [R=301,L,NC] 
```

# iphone - Objective-C：从单独的类中更改图像

> ID：16097895
> 
> 赞同：0
> 
> 时间：2013-04-19T05:37:43.743
> 
> 标签：iphone, ios, objective-c, xcode

我四处寻找答案但无济于事，所以我希望我不是在问一个已回答的问题。

我有两个类（ClassA 和 ClassB），它们都连接到通过 segue 链接的 UIViewController。ClassA 包含一个名为 backgroundImage 的 UIImage。我的目标是从 ClassB 中更改 ClassA 的背景图像。

在 ClassB.h 中，我尝试过：

```
@property (nonatomic, retain) ClassA *mainView; 
```

在 ClassB.m 中，我尝试通过以下方式更改背景图像：

```
@synthesize mainView;
//Then inside button click I tried:
[mainView.backgroundImage setImage:[UIImage imageNamed:@"newImage.jpg"]]; 
```

显然这不起作用，因为我没有将图像设置为应用程序中使用的同一个 ClassA。我知道我遗漏了一些明显的东西，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:25:33.707

请使用**协议机制**来满足您的要求

实现如下

在项目的**AppDelegate.h**文件中

```
@protocol ImageChangeDelegate <NSObject>
@optional
    -(void)ChangeImage;
@end

@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
}
@property (nonatomic,strong) id<ImageChangeDelegate> delegateImageChange; 
```

在项目的**AppDelegate.m**文件中

```
@synthesize delegateImageChange; 
```

现在在**B 类的 .h 文件中**

```
#import "AppDelegate.h"

@interface EventGuestListViewController : UIViewController
{
   AppDelegate* appDelegate;
}
-(void)ChangeBackgroundOfClassA; 
```

现在在**B 类的 .m 文件中**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
} 
```

现在在改变BG的方法中

```
 -(void)ChangeBackgroundOfClassA
 {
     [appDelegate.delegateImageChange ChangeImage];
 } 
```

现在在 A 类中实现协议以更改背景。

现在在**A 类的 .h 文件中**

```
 #import "AppDelegate.h"

 @interface EventGuestListViewController : UIViewController <ImageChangeDelegate>
 {
    IBOutlet UIImageView* imageBGClassA;
    AppDelegate* appDelegate;
 } 
```

现在在**A 类的 .m 文件中**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    appDelegate.delegateImageChange = self; //Here you need to set the delegate to 'self' to call then Custom Protocol method
}

-(void)ChangeImage
{
     imageBGClassA.image = [UIImage imageNamed:@"newImage.jpg"];
} 
```

在 B 类中，一旦`-(void)ChangeBackgroundOfClassA`调用在 A 类上实现的委托方法调用，背景图像就会发生变化

这是和我一起工作

可能对你有帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:32:09.050

您可以使用自定义委托或通知轻松完成此任务。我将使用 Notification 向您解释。假设有两个类 - A 类和 B 类

在 A 类中添加这样的通知

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(changeImage)
                                             name:@"ImageChangeNotification"
                                           object:nil]; 
```

还在 Class-A 中创建选择器

```
 -(void)changeImage
   {
       [yourImageView setImage:[UIImage imageNamed:@"YouImageName.png"]];
   } 
```

剩下的就是从整个项目中的任何地方发布此通知。在我们的例子中，让它成为 B 类

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"ImageChangeNotification" object:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:24:26.143

您可以尝试以下两种方法中的任何一种：1）使用委托。在加载 ClassB 时传递委托。2) 使用 NotificationCenter 并通过调用 B 类的通知来更改主视图图像。

哈利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T05:45:21.477

应该尝试委托机制。它将允许您从 classB 调用 classA 中的方法。在该方法中，将 classA 的背景图像从 classB 的调用更改为委托

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T05:44:04.817

使用 ClassA 的相同“mainView”实例导航到`ClassA View Controller`.

# iphone - 如何从通讯簿编辑 ABPersonSetImageData

> ID：16097897
> 
> 赞同：3
> 
> 时间：2013-04-19T05:37:57.807
> 
> 标签：iphone, ios, objective-c, abaddressbook

我正在开发一个与 AddressBook 联系人一起使用的 iPhone 应用程序。我正在尝试从通讯簿中获取图像并编辑然后保存该图像。

但我不知道如何更新和保存该图像。如果有人知道这一点，请给我一个解决方案。

提前谢谢。

这是.h文件

```
ABAddressBookRef addressBook;
IBOutlet UILabel *lblName;
IBOutlet UIImageView *imgGet;
UIImage *imgContact;
NSString* name; 
```

.m 文件

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {
    name = [(NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty) autorelease];
    lblName.text = name;
    if(ABPersonHasImageData(person)) {
        CFDataRef imageData = ABPersonCopyImageData(person);
        imgContact = [UIImage imageWithData:(NSData *)imageData];
        imgGet.image = imgContact;
        CFRelease(imageData);
    } else {
        imgGet.image = [UIImage imageNamed:@"ABPicturePerson@2x.png"];
    }

    [self.navigationController dismissViewControllerAnimated:(YES) completion:nil];

return NO;
} 
```

在这里，从上述方法获取图像和名称后，我打开图库并选择图像，然后单击下面的方法按钮，但图像未保存或更新在地址簿中

```
-(IBAction)btnSaveClicked {
ABRecordRef person = ABPersonCreate();
    NSData *dataRef = UIImagePNGRepresentation(imgGet.image);
    CFDataRef cfdata = CFDataCreate(NULL, [dataRef bytes], [dataRef length]);
 ABPersonSetImageData(person, (CFDataRef)dataRef, nil);
    CFErrorRef error;

    ABPersonRemoveImageData(person, &error); // <-- clean any image first from ref
    //ABAddressBookSave(addressBook, &error);

    ABPersonSetImageData(person, cfdata, &error);

    ABAddressBookSave(addressBook, &error);
    CFRelease(cfdata); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T12:39:54.100

此链接提示我如何更新您的图像..

[http://davidbits.blogspot.in/2010/01/iphone-update-addressbook-contact.html](http://davidbits.blogspot.in/2010/01/iphone-update-addressbook-contact.html)

在 .h 文件中声明 1 个对象

```
NSInteger recordID; 
```

然后打开联系人列表并获取联系人，我们使用此方法

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController     *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {
   recordID  =  ABRecordGetRecordID(person);
    name = [(NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty) autorelease];
    lblName.text = name;
    if(ABPersonHasImageData(person)) {
    CFDataRef imageData = ABPersonCopyImageData(person);
    your uiimage = [UIImage imageWithData:(NSData *)imageData];
    you uiimageview.image = your uiimage;
    CFRelease(imageData);
   } else {
    you uiimageview.image = [UIImage imageNamed:@"ABPicturePerson@2x.png"];
   }

    [self.navigationController dismissViewControllerAnimated:(YES) completion:nil];
    //[self.navigationController dismissModalViewControllerAnimated:YES];
return NO;
} 
```

然后为保存详细信息或更新详细信息编写操作

```
-(IBAction)btnSaveClicked
{
CFErrorRef *aberror = NULL;    
ABRecordRef aRecord = ABAddressBookGetPersonWithRecordID(addressBook, recordID);
if (aRecord) {
    NSData *dataRef = UIImagePNGRepresentation(your uiimage);
    ABPersonSetImageData(aRecord, (CFDataRef)dataRef, nil);
}
ABAddressBookSave(addressBook, aberror);
//BOOL didAdd = ABAddressBookSave(addressBook, nil);
CFRelease(addressBook);
} 
```

确定你会得到结果..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:03:45.110

`ABRecordRef person`要更新时使用：

首先`create` `ABAddressBookRef`：

```
// Request authorization to Address Book
ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL); 
```

现在`check` `person`有`image`：

```
if(ABPersonHasImageData(person)) 
{
   //remove image as we want to update to new image
   NSError *anError;
   if(ABPersonRemoveImageData(person, &anError))
      NSLog(@"removed");
   else
      NSLog(@"%@",[anError description]);
} 
```

`Update`

```
 UIImage *image = image here;
 NSData *picData = UIImageJPEGRepresentation(image, 0.9f);
 ABPersonSetImageData(person, (CFDataRef)picData, nil); 
```

致电`saving function`：

```
 ABAddressBookSave(addressBookRef, nil); 
```

# java - Spring Web 应用程序未在码头服务器中启动

> ID：16097900
> 
> 赞同：0
> 
> 时间：2013-04-19T05:37:59.527
> 
> 标签：java, web-applications, spring-mvc, jetty

我有一个使用 Eclipse IDE 开发的简单 Spring Web 应用程序项目。当我使用码头服务器运行项目时，服务器启动。然后我尝试使用详细信息转到上下文，它显示以下错误 404。

![在此处输入图像描述](https://i.stack.imgur.com/gJw4N.png)

这是我定义起始屏幕的 web.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>TouchPOS</display-name>
  <servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.html</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>layout.html</welcome-file>
  </welcome-file-list>
</web-app> 
```

这就是项目资源。

![在此处输入图像描述](https://i.stack.imgur.com/xsALb.png)

我在这里做错了什么？启动服务器时没有异常。请帮我！

我查看了控制台并给出了以下错误！我该如何解决这个问题！

```
 WARNING: No mapping found for HTTP request with URI [/TouchPOSApplication/layout.html] in DispatcherServlet with name 'dispatcher'
Apr 19, 2013 10:53:48 AM org.springframework.web.servlet.PageNotFound noHandlerFound 
```

mvc 配置文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:37:32.780

您确定您的应用程序在您希望它运行的 webapp 上下文路径中运行吗？你的战争文件的名称是什么，你是否为配置上下文路径的那个 web 应用程序提供了一个 jetty context.xml 文件？

如果没有，请尝试使用 war 文件的名称作为上下文路径：

例如：

如果战争的名称是“webapps/touchpos.war”，请尝试`"http://localhost:8080/touchpos/"`。

# sql - 输入字符串的格式不正确

> ID：16097910
> 
> 赞同：0
> 
> 时间：2013-04-19T05:38:40.267
> 
> 标签：sql, string, winforms, format

我有一门课，我在其中计算剩余的信用额度。并通过 DataTable 返回值。但是在 IF 条件下，它会抛出错误“输入字符串的格式不正确。”，代码有什么问题。

请帮助，在此先感谢

```
 string cmd2 = "select sum(FacilityAmountINR),sum(LCAmountPaid) from FacilityIssueDetails where Status='open' AND LCType = 'Inland LC'";
        DataTable a = DbRdRw.SqlDbRead(cmd2, "FacilityIssueDetails");
        decimal AvailInlandLC = 0;
        string totcred = Convert.ToString(a.Rows[0]["Column1"]);
        string totpaid = Convert.ToString(a.Rows[0]["Column2"]);
        if (totcred != null && totpaid != null)
        {
            decimal TotalAmountCredit = Convert.ToDecimal(totcred);// error here
            decimal TotalAmountpaid = Convert.ToDecimal(totpaid); // error here
            AvailInlandLC = InlandLC - TotalAmountCredit + TotalAmountpaid;
        }
        //*************************************************************************
        DataTable AvailableLimitTable = new DataTable();
        AvailableLimitTable.Columns.Add("LCType",typeof (string));
        AvailableLimitTable.Columns.Add("TotalLimit",typeof (decimal));
        AvailableLimitTable.Columns.Add("AvailableLimit",typeof (decimal));

        DataRow dr = AvailableLimitTable.NewRow();
        dr["LCType"] = "Inland LC";
        dr["TotalLimit"] = InlandLC;
        dr["AvailableLimit"] = AvailInlandLC;
        AvailableLimitTable.Rows.InsertAt(dr, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:59:05.297

如果您从数据库中获取 NULL 值，请尝试更改 if 循环条件...

```
if (totcred != null && totpaid != null && totcred != "Null" && totpaid != "Null" )
        {
            decimal TotalAmountCredit = Convert.ToDecimal(totcred);// error here
            decimal TotalAmountpaid = Convert.ToDecimal(totpaid); // error here
            AvailInlandLC = InlandLC - TotalAmountCredit + TotalAmountpaid;
        } 
```

# html - 将css中的内容与浮动不对齐

> ID：16097911
> 
> 赞同：1
> 
> 时间：2013-04-19T05:38:45.377
> 
> 标签：html, css, css-float, alignment

我认为我的浮动有问题，它们没有正确对齐，我觉得这与我设置盒子的方式有关。我尝试使用左右边距更改对齐方式，但没有得到想要的外观，我希望所有这些都排列整齐。这是html和css。

HTML

```
<div id="service1">
    <center>
    <h1>Savings <br />Strategies</h1>
    <img src="images/eg1.png" class="alignleft" height="150" width="200" alt="" />
    </center>
</div>

<div id="service2">
    <center>
    <h1>Vendor <br />Management</h1>
    <img src="images/eg2.png" class="alignleft" height="150" width="200" alt="" />
    </center>
</div>

<div id="service3">
    <center>
    <h1>Environmental<br /> Stewardship</h1>
    <img src="images/eg3.png" class="alignleft" height="150" width="200" alt="" />
    </center>
</div> 
```

CSS

```
#service1 {
float:left;
width:360px;
height:280px;
padding:15px;
}

#service2 {
margin-left:auto;
margin-right:auto;
width:360px;
height:280px;
padding:15px;
}

#service3 {
float:right;
width:360px;
height:280px;
padding 15px; 
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T05:52:24.763

为什么不尝试将每个 div 显示为内联块。删除所有的浮动和边距。

> div {显示：内联块；}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:02:07.540

您可以设置`display`并`inline`删除所有边距：http:
[//jsfiddle.net/ABVJd/2/](http://jsfiddle.net/ABVJd/2/)
结果：http: [//jsfiddle.net/ABVJd/2/embedded/result](http://jsfiddle.net/ABVJd/2/embedded/result)

要么，或者您可以删除所有边距和浮动并添加内联块，如建议的那样：http:
[//jsfiddle.net/ABVJd/3/](http://jsfiddle.net/ABVJd/3/)
结果：http: [//jsfiddle.net/ABVJd/3/](http://jsfiddle.net/ABVJd/3/embedded/result)

# c# - 将数据存储在 Thread Local Storage / HttpContext Current Items

> ID：16097913
> 
> 赞同：2
> 
> 时间：2013-04-19T05:38:49.537
> 
> 标签：c#, asp.net, httprequest, thread-local-storage

将数据存储在 Thread-Local Storage 中，或者`HttpContext.Current.Items`，哪个更有效......？
这是用于在 Web 应用程序中存储主数据/参数。
在这两种方法中放置数据的代码是：

**1\. System.Web.HttpContext.Current.Items**

```
public static void Add(string pName, object pValue)
{
    System.Web.HttpContext.Current.Items.Add(pName, pValue);
} 
```

**2.TLS**

```
public static void Add(string pName, object pValue)
{
    Thread.SetData(Thread.GetNamedDataSlot(pName), pValue);
} 
```

谢谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:24:29.543

如果您正在考虑线程安全，请使用 Thread-Local Storage。如果不需要线程安全，则 HttpContext.Current 选项很有用。

# c# - selenium chrome 驱动程序显式等待不起作用

> ID：16097918
> 
> 赞同：1
> 
> 时间：2013-04-19T05:39:02.937
> 
> 标签：c#, selenium, webdriver

我正在使用 selenium 2 和 chrome 驱动程序，无论我做什么，似乎都无法明确等待工作。我正在尝试单击一个通过 ajax 动态生成一些数据的元素（不重新加载），然后在页面上出现该元素时搜索它。

这是我的代码

```
 leagueNameItem.Click();

        IList<IWebElement> outerTables_forEachLeague = new List<IWebElement>();

        var wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
        outerTables_forEachLeague = wait.Until<IList<IWebElement>>((d) =>
        {
            return d.FindElements(By.ClassName("boxVerde"));
        }); 
```

未找到该元素（并且它肯定在页面上）。等待函数实际上并没有“等待”指定的 10 秒 ut 只是什么都不返回。有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T12:56:46.243

问题是`FindElements`立即返回，如果未找到元素，则返回有效的空列表对象。你有两个选择。您可以在等待中使用单个`FindElement`，如果元素不存在，则会引发异常。该`WebDriverWait`对象将捕获该异常并重试，直到可以找到该元素。

但是，由于您想从等待中返回一个列表，因此您需要更聪明一点，这会导致您的第二个选择。将您的等待更改为如下所示：

```
leagueNameItem.Click();

IList<IWebElement> outerTables_forEachLeague = new List<IWebElement>();

var wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
outerTables_forEachLeague = wait.Until<IList<IWebElement>>((d) =>
{
    var elements = d.FindElements(By.ClassName("boxVerde"));
    if (elements.Count == 0)
    {
        return null;
    }

    return elements;
}); 
```

# air - 如何清除控制台/跟踪？

> ID：16097920
> 
> 赞同：1
> 
> 时间：2013-04-19T05:39:23.657
> 
> 标签：air

以下 JavaScript 代码在使用 ADL 时向控制台写入一行：

```
air.trace("Hello world!"); 
```

但是当跟踪大量数据时，控制台很快就会填满。

如何清除控制台？

我试过谷歌搜索但没有运气！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:01:12.783

这就是我最终做的事情：

```
function clearDebug()
{
    for(var i = 0; i < 56; i++)
        air.trace();
} 
```

如果有人有这样做的“标准”方式，请随时发布答案，我会接受！

但是，如果失败了，这可行（尽管您可能必须编辑`56`一些适合您的屏幕分辨率的控制台行）。

# java - 如何将数组复制到phonegap中的文件中？

> ID：16097927
> 
> 赞同：0
> 
> 时间：2013-04-19T05:40:27.040
> 
> 标签：java, javascript, android, cordova

我有如下图像数组：

```
var imageArray = new Array(10);

function onCameraPicSuccess (imgData)  {
  imageArray.push("data:image/jpeg;base64," + imgData);
} 
```

我正在将捕获的图像复制到这个数组中。

现在如何将此数组复制到文件中？我正在使用phonegap。我想复制到本地的特定文件夹中，例如 myPhotos。有什么帮助吗？

是否可以在javascript中做到这一点？或者我应该从 javascript 调用 JAVA 小程序来写入文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:44:15.167

您可以使用[FileWriter API](http://docs.phonegap.com/en/edge/cordova_file_file.md.html#FileWriter)将数据的字符串版本写入磁盘。

**快速示例**

```
function win(writer) {
    writer.onwrite = function(evt) {
        console.log("write success");
    };
    writer.write(JSON.stringify(imageArray));
};

var fail = function(evt) {
    console.log(error.code);
};

entry.createWriter(win, fail); 
```

有关整个上下文，请参阅[此处](http://docs.phonegap.com/en/edge/cordova_file_file.md.html#FileWriter)的 FileWriter API 下的完整示例。

您可以使用[FileReader API](http://docs.phonegap.com/en/edge/cordova_file_file.md.html#FileReader)读回数据。请记住调用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)将其转回 JavaScript 对象。

# jquery - 浏览器没有重定向到使用 cors 的 ajax 请求中的重定向 url

> ID：16097929
> 
> 赞同：2
> 
> 时间：2013-04-19T05:40:43.947
> 
> 标签：jquery, ajax, amazon-s3, cors, ajaxform

大家好，我正在使用[ajaxForm](https://github.com/malsup/form/) jQuery 插件将图像直接上传到 s3。由于它是一个 ajax 提交，我在阅读了他们的[参考](http://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html)后在 s3中配置了[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。因此上传正常进行，服务器将重定向 url 返回到我的浏览器，状态码为 303。我可以在我的 firebug 中看到响应标头。在那里我可以看到 Location 标头，它也包含我的重定向 url。当我将此网址复制粘贴到位置栏时，一切正常。

但是浏览器不会对此重定向采取任何行动。据我所知，它应该重定向到重定向网址。从这个帖子

[jQuery 和 AJAX 响应标头](https://stackoverflow.com/questions/1557602/jquery-and-ajax-response-header)

我的理解是浏览器不会给我这个重定向网址。我想不出任何解决此问题的方法，如果有人知道任何解决方案，请提供帮助。

这是我上传的代码。

```
$(document).ready(function(){
   var upload_form = $("#img-upload-form");
   var submit_button = $("#img-upload-form input[type=submit]");
   var progress = $("#progressbar");
   var url      = window.location.href;
   if(upload_form != undefined){
      upload_form.ajaxForm({
           beforeSend: function(){
               submit_button.attr("disabled", "disabled");
           },
           uploadProgress: function(event, position, total, percentComplete){
               progress.html("Uploading " + percentComplete + " %");
           },
           complete: function(response){
               progress.html("");
               submit_button.removeAttr("disabled");
               //window.location.href
           }
       });
    }
 }); 
```

# mysql - mysql的for循环替代

> ID：16097930
> 
> 赞同：1
> 
> 时间：2013-04-19T05:40:48.020
> 
> 标签：mysql, sql, database, sql-function

假设我有一个税收生成模块，在该模块上，特定金额范围的税收是动态的。范围存储在如下表中：

```
+---------------+---------------+-----------+
|   range_from  |   range_to    |   rate    |
+---------------+---------------+-----------+   
|        0          1000            25      |
|       1001        5000            30      |
|       5001        8000            40      |
|       8000          -             50      |
+-------------------------------------------+ 
```

此范围表可以有任意数量的行。

那么，如何使用 MySQL 上的函数从上表中获得税额？

如果我提供 20000，它应该像这样计算

```
 1000 * 0.25 + 4000 * 0.30 + 3000 * 0.40 + 12000 * 0.50 
```

我尝试使用，

```
 set @remaining_amount = @provided_amount;
  for x in (select * from range_table)
  loop
      if(@provided_amount > x.range_to) 
        set @tax_amt+=(x.range_to-x.range_from)* x.rate/100;
        set @remaining_amt-= x.range_to-x.range_from; 
      end if;
      if(@provided_amount > x.range_from and x.range_to = '-') 
        set @tax_amt+=(@remaining_amount)* x.rate/100;
      end if;
  end loop; 
```

但我没有找到在 MySQL 上工作的“for loop”。

有什么建议/帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:46:01.917

试试这个：

```
SUM(IF(x < range_from, 0, 
        IF(x < range_to OR range_to IS NULL, (x - range_from)*rate*0.01, 
                                             (range_to - range_from)*rate*0.01)) 
```

# android - 使用textview android数组创建一个段落

> ID：16097936
> 
> 赞同：1
> 
> 时间：2013-04-19T05:41:15.857
> 
> 标签：android

```
String[] textArray={"one","two","three", "four", "five", "six"};

int length=textArray.length;

TextView[] textViewArray = new TextView[length];
LinearLayout layout = (LinearLayout) findViewById(R.id.linear);

for(int i=0;i<length;i++){
   textViewArray[i] = new TextView(this);
   textViewArray[i].setText(textArray[i]);
   layout.addView(textViewArray[i]);
} 
```

我需要做类似的事情..所以它会显示为

一二三四五六

不能固定一行只显示四个字，只想适合屏幕，看起来像一个段落。请给我建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:45:38.400

您可以将字符串附加到 textview 并为添加的每个字符串附加空间，如下所示。您不需要文本视图数组。只需将字符串附加到相同的位置即可。

```
TextView tv= new TextView(MainActivtiy.this);
tv.setText(""); 
for(int i=0;i<textArray.length;i++)
{
    tv.append(textArray[i]);
    tv.append(" "); 
}
layout.addView(tv); 
```

编辑：

```
TextView tv= new TextView(MainActivtiy.this);
tv.setText(""); 
for(int i=0;i<textArray.length;i++)
{
     SpannableString ss1=  new SpannableString(textArray[i]); 
     ss1.setSpan(new MyClickableSpan(textArray[i]), 0, ss1.length(),  
     tv.append(ss1);
     tv.append(" "); 
}
layout.addView(tv); 
```

MyClickableSpan 类

```
 class MyClickableSpan extends ClickableSpan{   

String clicked;
    public MyClickableSpan(String string) {
    // TODO Auto-generated constructor stub
super();
clicked =string;    
}

public void onClick(View tv) {

   Toast.makeText(MainActivity.this,clicked ,Toast.LENGTH_SHORT).show();
    //do what is required
}

public void updateDrawState(TextPaint ds) {
   ds.setColor(Color.BLUE);//set text color 
   //ds.setStrokeWidth(15f);
   ds.setUnderlineText(true); // set to false to remove underline
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:54:38.433

可以如下实现

```
String text = "";
for(int i=0;i<length;i++){
    text += text + " " + textArray[i];
}

tv = new TextView(this);
tv.setText(text);
tv.setSingleLine(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:46:33.607

你可以做这样的事情

```
StringBuffer text = new StringBuffer();    
for(int i=0;i<length;i++){
    text.append(textArray[i]);
}

textViewArray = new TextView(this);
textViewArray.setText(text.toString().trim());
textViewArray.setSingleLine(false);
layout.addView(textViewArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T05:48:49.163

声明一个字符串对象并继续向其附加数组值，并在字符串完成后将值设置为 textview。

```
String para = "";
for(int i=0;i<length;i++){
 para += textArray[i] + " ";
}
textViewArray[i] = new TextView(this);
textViewArray[i].setText(para);
layout.addView(textViewArray[i]); 
```

# tree - 在 Ada 中构建二元表达式树

> ID：16097943
> 
> 赞同：3
> 
> 时间：2013-04-19T05:41:52.413
> 
> 标签：tree, expression, binary-tree, ada

我正在尝试从 Ada 中完全带括号的中缀符号构建表达式树。我正在递归地构建树。每个节点都有一个数据字段，以及一个指向左右子节点的指针。以下是我为实施而整理的内容。

```
WITH Ada.Integer_Text_IO, Ada.Text_IO;
USE Ada.Text_IO;

PACKAGE BODY Tree_Expression IS
   FUNCTION To_String (
         Input : Tree_String)
     RETURN String IS
      Last : Natural := 0;
   BEGIN
      FOR I IN Input'RANGE LOOP
         IF Input(I) /= ' ' THEN
            Last := Last + 1;
         END IF;
      END LOOP;
      RETURN Input(Input'First .. Last);
   END To_String;

   FUNCTION To_Number (
         Input : String)
     RETURN Float IS
      Output : Integer;
      First  : Integer  := - 1;
      Last   : Positive;
   BEGIN
      FOR I IN Input'RANGE LOOP
         IF Input(I) IN '0'..'9' THEN
            First := I;
            EXIT;
         END IF;
      END LOOP;
      IF First = -1 THEN
         RAISE Number_Error;
      END IF;
      IF First = Input'First THEN
         Ada.Integer_Text_IO.Get(
            From => Input,
            Item => Output,
            Last => Last);
         RETURN Float(Output);
      ELSE
         Ada.Integer_Text_IO.Get(Input(First .. Input'Last), Output, Last);
         RETURN Float(Output);
      END IF;
   END To_Number;

   FUNCTION To_Char (
         Input : String)
     RETURN Character IS
   BEGIN
      FOR I IN Input'RANGE LOOP
         IF Input(I) = '*' OR Input(I) = '/' OR Input(I) = '+' OR Input(I) = '-' OR Input(I) = '^' THEN
            RETURN Input(I);
         END IF;
      END LOOP;
      RAISE Operator_Error;
   END To_Char;

   FUNCTION Construct_ExpressionTree (
         Expression_String : String;
         First,
         Last              : Natural)
     RETURN Expression_Node_Ptr IS
      Depth           : Natural     := 0;
      Pos             : Natural     := 0;
      Operator        : Character   := ' ';
      Number_String   : Tree_String;
      Operator_String : Tree_String;
      Build_Num_Str   : Natural     := Number_String'First;
   BEGIN
      FOR I IN First..Last LOOP
         CASE(Expression_String(I)) IS
            WHEN '(' =>
               Depth := Depth + 1;
            WHEN ')' =>
               Depth := Depth - 1;
            WHEN '+'|'-'|'*'|'/'|'^' =>
               IF Depth = 1 THEN
                  Pos := I;
                  Operator := Expression_String(I);
                  EXIT;
               END IF;
            WHEN OTHERS =>
               NULL;
         END CASE;
      END LOOP;
      IF Operator = '+' OR Operator = '-' OR Operator = '*' OR Operator = '/' OR Operator = '^' THEN
         Operator_String(Operator_String'First) := Operator;
         FOR I IN Operator_String'RANGE LOOP
            IF I > Operator_String'First THEN
               Operator_String(I) := ' ';
            END IF;
         END LOOP;
         RETURN Binary_Expression_Tree.Create_Node(Operator_String, Construct_ExpressionTree(Expression_String, 
            Expression_String'First+1, Pos-1), Construct_ExpressionTree(Expression_String, Pos+1, Expression_String'Last-1));
      ELSE
         FOR I IN First..Last LOOP
            IF Expression_String(I) IN '0'..'9' THEN
               Number_String(Build_Num_Str) := Expression_String(I);
               Build_Num_Str := Build_Num_Str +1;
            ELSIF Expression_String(I) = ')' THEN
               EXIT;
            ELSE
               NULL;
            END IF;
         END LOOP;
         IF Build_Num_Str = Number_String'First THEN
            RAISE Number_Error;
         END IF;
         FOR I IN Build_Num_Str..Number_String'Last LOOP
            Number_String(I) := ' ';
         END LOOP;
         RETURN Binary_Expression_Tree.Create_Node(Number_String, NULL, NULL);
      END IF;

   END Construct_ExpressionTree;

   FUNCTION Evaluate_Expression (
         Node : Expression_Node_Ptr)
     RETURN Float IS
      FUNCTION Eval (
            Node : Expression_Node_Ptr)
        RETURN Float IS
         Data     : Tree_String := Binary_Expression_Tree.Get_Data (Node);
         Operator : Character;
      BEGIN
         Operator := To_Char(Data);
         CASE Operator IS
            WHEN '+' =>
               RETURN Eval(Binary_Expression_Tree.Get_Left_Child(Node)) + Eval(Binary_Expression_Tree.Get_Right_Child(Node));
            WHEN '-' =>
               RETURN Eval(Binary_Expression_Tree.Get_Left_Child(Node)) - Eval(Binary_Expression_Tree.Get_Right_Child(Node));
            WHEN '*' =>
               RETURN Eval(Binary_Expression_Tree.Get_Left_Child(Node)) * Eval(Binary_Expression_Tree.Get_Right_Child(Node));
            WHEN '/' =>
               RETURN Eval(Binary_Expression_Tree.Get_Left_Child(Node)) / Eval(Binary_Expression_Tree.Get_Right_Child(Node));
            WHEN '^' =>
               RETURN Eval(Binary_Expression_Tree.Get_Left_Child(Node)) ** Natural(Eval(Binary_Expression_Tree.Get_Right_Child(Node)));
            WHEN OTHERS =>
               RAISE Expression_Error;
         END CASE;
      EXCEPTION
         WHEN Operator_Error =>
            RETURN To_Number(Data);
      END Eval;
   BEGIN
      RETURN Eval (Node);
   END Evaluate_Expression;

   FUNCTION Infix_Notation (
         Node : Expression_Node_Ptr)
     RETURN String IS
   BEGIN
      RETURN Binary_Expression_Tree.Inorder_Traversal(Node);

   END Infix_Notation;

   FUNCTION Prefix_Notation (
         Node : Expression_Node_Ptr)
     RETURN String IS
   BEGIN
      RETURN Binary_Expression_Tree.Preorder_Traversal(Node);
   END Prefix_Notation;

   FUNCTION Postfix_Notation (
         Node : Expression_Node_Ptr)
     RETURN String IS
   BEGIN
      RETURN Binary_Expression_Tree.Postorder_Traversal(Node);
   END Postfix_Notation;

END Tree_Expression; 
```

我的问题是，当我输入表达式时，例如 ((5+6)*(1-3))，树的构建不正确。我从该表达式构建的树的按顺序遍历的输出是 5+6*5+6-3 而不是 5+6*1-3。基本上，根的右孩子 (1) 的左孩子没有被添加到树中，并且 (5+6) 被再次添加到它的位置。

Create_Node，这是一个在构造函数中调用的函数，看起来像：

```
FUNCTION Create_Node (
         Data        : Item_Type;
         Left_Child,
         Right_Child : Node_Ptr)
     RETURN Node_Ptr IS
   BEGIN
      RETURN NEW Node_Type'(Data, Left_Child, Right_Child);
   END Create_Node; 
```

这是做作业的——我只是在寻找关于一般问题的指针，以及我的代码中可以查看的部分。提前致谢。

反馈后编辑：这是我的思考过程，希望它跟踪：
- 首先找到深度 = 1 的运算符，这将是树的根节点。
- 一旦我有了这个，我创建一个节点，左边的所有东西都作为左孩子送回构造函数，右边的所有东西都作为右孩子送回。据我了解，这是构建树的递归方法。
- 每次调用该函数时，它应该在深度 1 处找到运算符，这将是下一个节点。如果没有找到运算符，它应该使叶子节点带有数字。那里有一个循环来解析输入并构建一个数字字符串以存储在节点中，因此多个数字应该可以工作。我一直在考虑它，我在想第一个和最后一个被送回 Construct_ExpressionTree 可能有些可疑。

我只是在玩它并得到一个测试用例。我将错误的信息发送回函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:24:41.657

正如 Trashgod 提到的递归体面是你的答案，我确信他的链接提供了很多信息（它们通常是），但他可能忘记了关于这个问题的最容易理解的文本之一：Jack Crenshaw 的[Let's Build a Compiler](http://compilers.iecc.com/crenshaw/)。

除此之外，还有 Niklaus Wirth [Algorithms + Data Structures = Programs](http://cdn.preterhuman.net/texts/math/Data_Structure_And_Algorithms/Algorithms%20and%20Data%20Structures%20-%20Niklaus%20Wirth.pdf)的经典书籍，其中有一章介绍了递归（以及何时不使用它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:20:14.223

尽管不是特定于 Ada，但您正在尝试构建[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，正如 @NWS 所指出的，这“本质上是一个递归问题”。由于您只需要`expression`,`term`和的产生式`factor`，因此[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)将隐式构造树。实际上，调用树*就是*解析树，正如[这里](http://www.cs.utexas.edu/~pingali/CS380C/2013/lectures/Recursive-descent.pdf)所建议的那样。另请参阅[此处](https://stackoverflow.com/q/2419972/230513)概述的方法。

# javascript - 试图找出一种调整背景图像大小并包含具有窗口宽度比率的元素的方法

> ID：16097945
> 
> 赞同：0
> 
> 时间：2013-04-19T05:41:58.170
> 
> 标签：javascript, jquery, html, css, dom

所以我有这个导航菜单设置，尽管目前有 CSS 代码。背景颜色目前主要用于苦行者。我需要在这个设置上有一个背景图像。不幸的是，由于所提出的设计规范，它也不是真正的流动背景。所以就这样。

我需要制作这个背景和包含的元素，以使导航按照我希望根据整体窗口大小调整大小的方式工作。从桌面浏览器到移动设备。

有没有人知道单独使用 CSS 或结合 jQuery 之类的东西来实现这一点？我在某些平台上看到过类似的做法，但不知道他们是如何解决解决方案的

```
/* wrapper and master settings for over all containers */
#menu_bottom{position:absolute;bottom:0;left:0;z-index:999999;background-color:#F00;width:320px;height:172px;}
#menu_bottom > ul{list-style:none;margin:0;padding:0;}
#menu_bottom > ul > li{list-style:none;margin:0;padding:0;float:left;width:50px;height:172px;background-color:#000;}
/* inactive state (position) */
#menu_bottom > ul > li.fans{background-color:#0F0;}
#menu_bottom > ul > li.gameplan{background-color:#0F0;}
#menu_bottom > ul > li.dashboard{background-color:#0F0;}
#menu_bottom > ul > li.myteams{background-color:#0F0;}
#menu_bottom > ul > li.settings{background-color:#0F0;}

/* active state (position) */
#menu_bottom > ul > li.fans.active{background-color:#00F;}
#menu_bottom > ul > li.gameplan.active{background-color:#00F;}
#menu_bottom > ul > li.dashboard.active{background-color:#00F;}
#menu_bottom > ul > li.myteams.active{background-color:#00F;}
#menu_bottom > ul > li.settings.active{background-color:#00F;}

<div id="menu_bottom">
    <ul>
        <li rel="/" class="f<?php if($activeNav == "c"){echo ' active';} ?>"></li>
        <li rel="/" class="g<?php if($activeNav == "n"){echo ' active';} ?>"></li>
        <li rel="/" class="d<?php if($activeNav == "d"){echo ' active';} ?>"></li>
        <li rel="/" class="m<?php if($activeNav == "f"){echo ' active';} ?>"></li>
        <li rel="/" class="s<?php if($activeNav == "s"){echo ' active';} ?>"></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:46:36.473

您必须为所有内容设置一个整体包装器，并在 CSS 中将其设置为 100% 宽度

# ruby - 如何在方法中传递嵌套哈希？

> ID：16097946
> 
> 赞同：0
> 
> 时间：2013-04-19T05:42:03.737
> 
> 标签：ruby

如何在方法中传递嵌套哈希？这是一个示例代码

```
MONOPOLY_GAME = { 
  deeds: 
  { 
    boardwalk: 
    {  
      price: 400,
      rent: 50
    },
    atlantic: 
    { 
      price: 260, 
      rent: 22 
    },
    baltic:
    {
      price: 60, 
      rent: 4 
    }
  }
}
def rent_for(p)
  return MONOPOLY_GAME[:deeds][:p][:rent]
end

rent_for(:boardwalk)
rent_for(:atlantic)
rent_for(:baltic) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T05:48:51.977

您的方法似乎是正确的，除了您必须从 p 中删除冒号

```
def rent_for(p)
  MONOPOLY_GAME[:deeds][p][:rent]
end 
```

# excel - 复制特定单元格的值并将其粘贴到下一行的单元格

> ID：16097952
> 
> 赞同：1
> 
> 时间：2013-04-19T05:42:56.403
> 
> 标签：excel, vba

我想复制一行特定单元格的值并将其粘贴到下一行的另一个单元格中。这是我到目前为止所拥有的。

```
for i= 2 to 26160
    If (Cells(i, 3) >= 99) Then

        Cells(i, 3).Select
        Selection.copy
        Cells(i, 4).Select 'error
        Selection.Paste    'error    
    end if    
next i 
```

但是我的代码无法在第 4 行和第 5 行出现错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:45:10.117

您可以组合线条。试试下面的代码。避免在代码中使用 select。[为什么？](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select/10718179#10718179)

```
 'at beginning of proc
With Excel.Application
    .ScreenUpdating = False
    .Calculation = Excel.xlCalculationManual
    .EnableEvents = False
End With

'''
'your code

' updated as per comment
j = 1
For i = 2 To 26160
    If (Sheets("sheet2").Cells(i, 3) >= 99) Then
        Sheets("sheet2").Cells(i, 3).Copy Sheets("sheet3").Cells(j, 4)
        j = j + 1
    End If
Next i

'at end of proc
With Excel.Application
    .ScreenUpdating = True
    .Calculation = Excel.xlAutomatic
    .EnableEvents = True
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:09:07.693

为什么不使用直接复制并通过以下方法避免剪贴板？

```
set NewSheet = Sheets("Sheet1") 'New sheet name
j = 1 'start pasting in this row on new sheet
for i= 2 to 26160   
    If ActiveSheet.Cells(i, 3) >= 99 Then 
        NewSheet.Cells(j, 4) = ActiveSheet.Cells(i, 3)
        j = j + 1
    end if 
next i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:35:36.097

这应该是简单而快速的：

```
Sub test()
    Dim c As Range
    Debug.Print Timer,
    For Each c In Range("C2:C26160")
        If c.Value >= 99 Then
            'copy to next cell
            c.Copy c.Offset(0, 1)
            'or copy to next col in other sheet
            c.Copy Sheet3.Range(c.Offset(0, 1).Address)
        End If
    Next c
    Debug.Print Timer

End Sub 
```

# objective-c - google map 怎样才能一致显示需要显示位置？

> ID：16097954
> 
> 赞同：0
> 
> 时间：2013-04-19T05:42:58.873
> 
> 标签：objective-c, xcode4.5

每次我们去谷歌地图时都会出现通知。如果我们按取消，然后再次转到谷歌地图，该通知会再次出现。

这是我的代码：

```
 while (false);
    static NSDate * lastSearched = nil;

    NSDate * dNow=[NSDate date];
    NSTimeInterval ti = [dNow timeIntervalSinceDate:lastSearched];
    if (ti<60) {
        return;
    }
    lastSearched =dNow;
    CLAuthorizationStatus  clAuth= [CLLocationManager authorizationStatus];
    if (clAuth ==kCLAuthorizationStatusAuthorized)
    {

    }
    else
    {
    } 
```

该通知仅显示一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:44:28.773

我的错误是我检查位置是否被授权，如果没有被授权就不要寻找位置。

我应该做的是要求位置开始搜索。这就是警报出现的时候。

`[singleton.locationManager startUpdatingLocation];` **触发警报**

如果位置未被授权，那么我根本不应该等待永远不会被调用的更新。

我之前做的：

```
CLAuthorizationStatus  clAuth= [CLLocationManager authorizationStatus];
if (clAuth ==kCLAuthorizationStatusAuthorized)
{

}
else
{
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        UIAlertView * aV= [[UIAlertView alloc]initWithTitle:@"Can't Get Location" message:@"Update your settings to allow location update. Isikota cannot work without user location." delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles: nil];
        [aV show];
    }];
    return;
} 
```

应该是什么：与授权状态无关，直接到这里。使用授权状态来决定我们是否应该等待更新位置

```
 [BGLoadingView vPermaToastTillFinish:@"Getting Location" inView:
        [BGHelperForAllApplication window] doWhat:^{
        [self vStartUpdatingLocation];

        CLLocationHandler * clhHandler=[self singleton];//This one is a singleton anyway
        //[[NSNotificationCenter defaultCenter]addObserver:clhHandler selector:@selector(vLocationFound) name:NotificationManageToGetCurrentLocation object:nil];
            CLAuthorizationStatus  clAuth= [CLLocationManager authorizationStatus];
            PO(clhHandler.operation);
            if (clAuth ==kCLAuthorizationStatusAuthorized)
            {
                [clhHandler haltThisThreadTillUnsuspended];//if not authorized then it'll never finish so don't bother halting
            }
            while (false);
    }]; 
```

vStartUpdatingLocation 的内容

```
+(void) vStartUpdatingLocation
{
    while (false);
    AssertNonMainThread
    [[NSOperationQueue mainQueue]addOperationWithBlock:^{
        CLLocationHandler * singleton = [CLLocationHandler singleton];
        [singleton.locationManager startUpdatingLocation]; //This one pulls the alert
        PO(singleton.locationManager);
        while(false);
    }];
} 
```

# android - 如何在布局上使用资源限定符来区分 HTC Desire 和三星 Galaxy Nexus 等智能手机

> ID：16097955
> 
> 赞同：2
> 
> 时间：2013-04-19T05:43:02.213
> 
> 标签：android, layout, resources

我制作了一个具有多种布局的应用程序，以针对智能手机和平板电脑等多种设备。

目前，我有以下文件夹来区分这些设备：

*   res/layout # 适用于三星 Galaxy Nexus、S III 等普通设备...
*   res/layout-large # 适用于 Android < 3.2 上的 7 英寸平板电脑
*   res/layout-sw600dp # 用于 7 英寸平板电脑
*   res/layout-xlarge # 适用于 Android < 3.2 的 10 英寸平板电脑
*   res/layout-sw720dp # 用于 10 英寸平板电脑

解决方案很好，但我对仍然在 Android 2.2 或 2.3 中的旧智能手机（如 HTC Desire）有疑问。

它们的屏幕尺寸类别是正常的，密度是 hdpi，因此与三星 Galaxy Nexus 有任何区别，例如资源限定符。

由于 Android 的版本是 2.2 或 2.3，我不能使用新的资源限定符来确定屏幕尺寸。所以，我不知道如何专门针对这些带有限定符的设备，以便在屏幕为 4 英寸及以上的智能手机与其他屏幕小于 4 英寸的智能手机之间具有不同的布局。

有人对解决方案有任何想法吗？

提前谢谢。

西尔万。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:05:10.013

提供几种布局的一些要点

*   不要根据具体设备区分资源文件夹。您制作的文件夹越少越好...
*   在比较设备的尺寸时也要比较设备及其分辨率（例如 Nexus *7。Nexus 7*的分辨率为**1280 * 800**，其他类似的 7 英寸平板电脑（如*三星 Galaxy Tab* ）的分辨率为**1024 * 600**）。

更好的做法是放置以下可绘制对象

```
// for Phones
drawable-ldpi
drawable-mdpi
drawable-hdpi
drawable-xhdpi

//for 7 inch tablets
drawable-large-mdpi
drawable-large-hdpi(for Nexus 7)

// for 10 inch tablets
drawable-xlarge-mdpi 
```

IMO 支持 Android 平板电脑是一项艰巨的任务。因为有这么多的设备，每个都有自己的分辨率和密度。您不能针对所有设备。

**Nexus 7 外壳**：尽管 Nexus 7 是 7 英寸平板电脑，但它的分辨率为**1280 * 800**。所以它是一个`hdpi`设备。但普通 7 英寸设备的分辨率较低，为**1024 * 600**。所以它们是`mdpi`设备，drawable 限定符可以改变。（根据我自己的经验，首先`drawable-large-mdpi`为 7 英寸设备放一个文件夹，然后在 Nexus 7 上检查。如果图像没有问题，您不必再放一个文件夹。因为如果特定文件夹不存在，Android 会检查最近的可能文件夹并针对设备屏幕对其进行优化）。

现在赋予`layout-sw<>dp`属性的问题是

*   仅在 API 级别 13 中添加。因此无法支持早期设备。
*   由于它在[限定符列表](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)中的高优先级，我们不能给出以较低优先级限定符开头的其他布局。因为 Android 总是优先考虑更高优先级的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T23:28:59.253

最后（也是有价值的）提示：

按尺寸组织布局，而不是密度。使用 dp 和 sp 单位，从不使用像素。

按 DENSITY 组织您的 drawables，而不是 SIZE。如果您使用 9-pacthes，请提供 mdpi、hdpi、xhdpi、xxhdpi 的替代密度。

# php - php 显示资源 id 和错误

> ID：16097960
> 
> 赞同：0
> 
> 时间：2013-04-19T05:43:23.233
> 
> 标签：php, mysql

每当我运行这段代码时，我都会得到一个资源 ID。我该如何解决：

```
function ct()
{
    $result = mysql_query("SELECT `Quantity` FROM `shopping cart` WHERE `Customer_id`=1") or die(mysql_error());
    mysql_fetch_array($result);   
    echo "$result";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T05:43:47.150

您需要通过`mysql_fetch_array`or获取结果`mysql_fetch_assoc`

```
$row = mysql_fetch_array($result); 
```

和

> 什么是[**`mysql_query`**](http://php.net/manual/en/function.mysql-query.php)回报
> 
> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://www.brightmeup.info/article.php?a_id=2)。

* * *

有问题的编辑后

这将`mysql_fetch_array($result);`返回一个与获取的行相对应的数组，并将内部数据指针向前移动。所以你必须将该数组分配给任何变量才能使用

```
while($row = mysql_fetch_array($result)){   
 echo $row ['field_name'];
} 
```

或者

```
$row = mysql_fetch_array($result); // want to fetch only one row 
 echo $row ['field_name']; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T05:45:33.687

```
$link = mysqli_connect("HOSTNAME", "USERNAME", "PASS", "DBNAME");    
$result = mysqli_query($link,"SELECT `Quantity` FROM `shopping cart` WHERE `Customer_id`=1") or die(mysql_error());
while($row = mysqli_fetch_array($result))
{
    echo $row['Quantity'];
    echo "<br />";
}
mysqli_close($con); 
```

# compression - 在 Mule 中的系统之间传输压缩/解压缩 + 编码/解码文件

> ID：16097967
> 
> 赞同：0
> 
> 时间：2013-04-19T05:43:45.273
> 
> 标签：compression, base64, sftp, mule

我正在使用 mule sftp 端点在系统之间传输文件。涉及的系统已安装并运行 ftp/sftp 服务器。但我想要实现的是使用 Mule 中的转换器传输压缩/未压缩 + 编码/解码文件。到目前为止，我所拥有的内容如下，但它不起作用：

```
<flow name="flow1">
    <sftp:inbound-endpoint address="sftp://username:password@ip_address:22/path/to/dir1"
        responseTimeout="1000" />
    <string-to-byte-array-transformer doc:name="String to Byte Array"/>
    <base64-encoder-transformer /> 
    <gzip-compress-transformer/>
    <logger level="INFO" message="#[message.payloadAs(java.lang.String)]" />
    <file:outbound-endpoint path="/path/to/Output" />
</flow>

<flow name="flow2">
    <file:inbound-endpoint path="/path/to/Output" />
    <gzip-compress-transformer/>
    <base64-encoder-transformer /> 
    <string-to-byte-array-transformer doc:name="String to Byte Array"/>
    <logger level="INFO" message="#[message.payloadAs(java.lang.String)]" />
    <sftp:outbound-endpoint address="sftp://username:password@ip_address:22/path/to
    /dir2" responseTimeout="1000" />
</flow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:52:21.440

我让它工作了。我的解决方案是将编码添加到编码/解码标签中，如下所示：

```
<base64-encoder-transformer encoding="utf8"/> 
...
<base64-decoder-transformer encoding="utf8"/> 
```

还将上面的编码标记声明在以下标记之前：

```
<string-to-byte-array-transformer doc:name="String to Byte Array"/> 
```

# java - 在 Java 中我应该用什么替换小型结构？

> ID：16097971
> 
> 赞同：1
> 
> 时间：2013-04-19T05:43:54.150
> 
> 标签：java, oop, struct, maps, idioms

我正在用 Java 构建一个地图应用程序，我有一个关于传递小对象的问题。假设我想将窗口显示为矩形的区域表示，并且我想查询该矩形内的哪些图块，以便知道要加载哪些图块。在 C++ 中，我会创建一个`Rect`结构并包含一个`tileInRect`方法。最直接的 Java 翻译是这样的：

```
class Rect {
    float x, y, width, height;

    public boolean tileInRect(Tile t) {
        // yada yada
    }
}

class MyProgram {
    public void main(String[] args) {
        while (windowIsOpen()) {
            // event loop
            // render map
            Rect r = getVisibleRect();
            for (Tile t : tiles) {
                if (r.tileInRect(t)) {
                    // etc.
                }
            }
        }
    }
} 
```

但这对我来说有点恶心，因为我大概每帧都会制作一个新的 Rect。有没有更好、更规范的方式来用 Java 表示这些轻量级对象？我真的不想写这样的辅助方法，`tileInRect(Tile t, int rect_x, int rect_y, int ...`因为这似乎只是一个荒谬的参数传递量。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:20:36.830

Rect 类是不错的选择。

如果你必须创建很多这样的对象但你只需要它们一次，只需通过更新他的属性来为每次调用重用相同的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:15:45.587

可以使用不可变类类型或可变类类型。.NET 中的理想表示将是一个暴露字段结构（它在应该的大多数上下文中表现得是可变的，并且在应该应该的大多数上下文中表现得不可变），但是因为 Java 不支持任何这样的概念一个人必须选择可变类或不可变类，认识到每个类的优缺点。

可变类的优点是，如果一个对象只有一个现存的引用，一个人希望有一个在某种程度上不同的对象，并且不再需要该对象的旧版本，则可以简单地更改适当的对象的一部分，而不必创建新对象，也不必复制或以其他方式对对象中不想更改的部分进行任何操作。可变类有一个缺点，因为这种突变只有在一个对象唯一现存的引用时才是安全的，所以不能安全地与其他代码共享对对象的引用；相反，必须创建新对象并将其提供给其他代码，或者将数据从自己的对象复制到其他代码提供的对象中。

不可变类的优点是可以与外部代码自由共享对对象的引用，而不必担心该代码可能对对象做什么（因为对象是不可变的，外部代码*不能*对它做任何事情！）。不幸的是，虽然外部不能对对象做任何事情很好，但不变性也意味着即使是对象的逻辑“所有者”也不能对它做任何事情。如果一个人有一个对象并希望有一个在某些方面有所不同的对象，则必须生成一个在该方面有所不同的全新对象。即使实际上宇宙中没有人会关心旧对象是否被修改，但代码通常无法知道这一点。

如果代码生成对象的修改形式比与其他代码交换它们的频率更高，那么可变类类型可能是首选。如果对象将被大量传递，但新形式的生成相对较少，则可能首选不可变类类型。请注意，可以（并且很常见）将可变类类型包装在不可变类类型中，该类类型包含对宇宙中任何地方的“可变”对象的唯一引用，并且既不改变该对象也不公开对可能做的任何事情的引用所以。我不知道是否有一个术语表示可变类型的对象实际上永远不会发生变异，但它通常是一种有用的模式（一个典型的例子是`String`；Java 中的数组是可变的，但是因为`String`永远不会改变它的字符数组并且永远不会将它暴露给外部代码，`String`对象中的字符序列永远不会改变。

# c# - 为什么先决条件不显示框架 2.0？

> ID：16097972
> 
> 赞同：0
> 
> 时间：2013-04-19T05:43:56.907
> 
> 标签：c#, winforms, visual-studio-2010, setup-deployment

在控制面板> 添加或删除程序中，它显示 microsoft framework 2.0 service pack 2，但是当我创建安装程序然后在先决条件中它没有显示选择 framework 2.0 的选项。

我也尝试再次安装框架 2.0，但它向我显示了错误

```
Setup cannot continue because this version of .NET Framework is incompatible with a previously installed one. 
```

它的解决方案是什么？

# mysql - MARKER 常量覆盖 Symfony2 错误

> ID：16097973
> 
> 赞同：2
> 
> 时间：2013-04-19T05:44:02.033
> 
> 标签：mysql, symfony, doctrine-orm

所以，我有一个类别实体设置了一个`parent_id`存在自引用。但是由于某种原因，当我在表单中保存条目时，我收到了这个错误。

```
Fatal error: Cannot inherit previously-inherited or override constant MARKER from interface Doctrine\Common\Persistence\Proxy in /var/www/html/project/vendor/doctrine/orm/lib/Doctrine/ORM/Proxy/Proxy.php on line 30 
```

无法弄清楚它可能是什么。我根据 Doctrine 文档建立了关系。

```
/**
 * Set parent
 *
 * @param string $parent
 * @return Category
 */
public function setParent($parent)
{
    $this->parent = $parent;

    return $this;
}

/**
 * Get parent
 *
 * @return string 
 */
public function getParent()
{
    return $this->parent;
} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-15T11:27:50.950

在做了一个不应该以任何方式影响 Doctrine 的更改之后，我今天遇到了完全相同的问题（我更改了*Twig* 模板）。一段时间后，我意识到，由于这是一个奇怪的时刻出现的奇怪编译错误，可能`restarting php-fpm`会成功。它确实做到了。

如果您在`mod_php`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-18T16:52:37.797

重新启动服务器为我解决了这个问题。

（使用 PHP 5.4.15、APC 3.1.13、Apache2.4.4、Doctrine2.2）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-30T20:10:12.223

我在 Centos6-64 上的 php-fpm 5.4.19、nginx 1.4 和 APC 3.1.15（？）也遇到过这个问题。正如 Mark 还提到的，我也使用了 Remi 存储库。好像 3.1.15 还没有正式发布。pecl 页面上甚至没有它的标签！看起来 Remi 正在尝试修复某些东西以使其正常工作并将其命名为 3.1.15，但无法弄清楚他正在尝试修复的确切内容。

无论如何，我 yum 删除了该软件包并使用 pecl 命令（现在为 @ 3.1.13）安装了当前版本，这解决了我的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T12:28:50.080

显然这是一个错误`Doctrine-bundle`。将其更新到版本 1.2.*（并随后更新依赖包）修复了该问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-04T11:36:25.813

请理解 APC 已死、无人维护，没有 PHP 5.4（或更高版本）的稳定版本。

我建议你切换到：

*   opcache (php-pecl-zenopcache) 用于操作码缓存
*   APCu (php-pecl-apcu) 用于用户数据缓存（提供与旧 APC 相同的 API，没有操作码缓存）

# asp.net - 是否可以从 Sharepoint 列表的选择列中获取数据，而不是从 Asp.Net 中的 Sharepoint 列表中的数据？

> ID：16097977
> 
> 赞同：0
> 
> 时间：2013-04-19T05:44:41.833
> 
> 标签：asp.net, c#-4.0, sharepoint-2010, multiple-choice

我在共享点中有一个“通知”列表，其中包含“ID、名称、区域（MultiChoice Column）”列。`I want to get Choices from 'Areas' Column and not from the DATA in Notifications List`. 可能吗。因为我想在表单加载时将其绑定到 ASP.NET CheckBoxList Items。

注意：我没有在 ASp.Net 帮助中使用 Microsoft.Sharepoint 命名空间 感谢！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:03:05.107

您可以使用 SPServices 或 SharePoint 的内置 Web 服务，特别是 Lists 服务来获取特定列表的架构，在您的示例中是通知。

调用 Lists 服务的 GetList 方法将为您提供包含每个字段详细信息的列表的 XML 模式。从那里您可以序列化或解析它以从您的特定列中获取可用的选项列表。

如何使用 GetList 方法可以在[这里](http://msdn.microsoft.com/en-us/library/lists.lists.getlist%28v=office.12%29.aspx)找到。

# python - 拟合任意高斯函数，python中的大量内存消耗

> ID：16097984
> 
> 赞同：0
> 
> 时间：2013-04-19T05:45:05.967
> 
> 标签：python, numpy, scipy

我正在尝试（在 python 中）将一系列任意数量的高斯函数（由仍在改进的简单算法确定）拟合到数据集。对于我当前的样本数据集，我有 174 个高斯函数。我有一个适合的程序，但它基本上是复杂的猜测和检查，并且消耗了所有 4GB 的可用内存。

有没有办法使用 scipy 或 numpy 中的东西来实现这一点？

这是我要使用的，其中波长 [] 是 x 坐标列表，而通量c [] 是 y 坐标列表：

```
#选择一个高斯
在范围（0,2）中重复：
    对于范围内的 f（0，len（质心））：
        #遍历所有其他高斯
        对于我在范围内（0，len（质心））：
            如果我！= f：
                #对于每个波长，
                对于 w 波长：
                    #将每个的值附加到一个列表中，称为其他
                    others.append(height[i]*math.exp(-(w-centroid[i])**2/(2*width[i]**2)))

    #优化当前高斯的质心
        上一页 = 质心 [f]
        最佳 = 质心 [f]
        #选择一个数量级
        对于范围内的 p (int(round(math.log10(centroid[i]))-3-repeat),int(round(math.log10(centroid[i])))-6-repeat,-1)：
            #选择那个数量级的值
            对于范围内的 m (-5,9)：
                #改变当前项的值
                质心[f] = prev + m * 10 **(p)
                #在所有波长上递增，列出新值
                变异 = 0
                残差 = 0
                测试 = []
                #在每个波长上增加并评估此变化是否使 R^2 更大
                对于范围内的k（0，len（波长））：
                    test.append(height[i]*math.exp(-(wavelength[k]-centroid[f])**2/(2*width[i]**2)))
                    残差 += (test[k]+others[k]-cflux[k])**2
                    变异性 += (test[k]+others[k]-avgcflux)**2
                rsquare = 1-（残差/变异）
                #检查这个新拟合的 R^2 值
                如果 rsquare > bestr：
                    bestr = rsquare
                    最佳 = 质心 [f]
        质心[f] = 最佳

    #优化当前高斯的高度
        上一页 = 高度[f]
        最佳 = 高度 [f]
        #选择一个数量级
        对于范围内的 p (int(round(math.log10(height[i]))-repeat),int(round(math.log10(height[i])))-3-repeat,-1)：
            #选择那个数量级的值
            对于范围内的 m (-5,9)：
                #改变当前项的值
                高度[f] = prev + m * 10 **(p)
                #在所有波长上递增，列出新值
                变异 = 0
                残差 = 0
                测试 = []
                #在每个波长上增加并评估此变化是否使 R^2 更大
                对于范围内的k（0，len（波长））：
                    test.append(height[f]*math.exp(-(wavelength[k]-centroid[i])**2/(2*width[i]**2)))
                    残差 += (test[k]+others[k]-cflux[k])**2
                    变异性 += (test[k]+others[k]-avgcflux)**2
                rsquare = 1-（残差/变异）
                #检查这个新拟合的 R^2 值
                如果 rsquare > bestr：
                    bestr = rsquare
                    最佳 = 高度 [f]
        高度[f] = 最佳

    #优化当前高斯的宽度
        上一页 = 宽度[f]
        最佳 = 宽度 [f]
        #选择一个数量级
        对于范围内的 p (int(round(math.log10(width[i]))-repeat),int(round(math.log10(width[i])))-3-repeat,-1)：
            #选择那个数量级的值
            对于范围内的 m (-5,9)：
                如果 prev + m * 10**(p) == 0：
                    m+=1
                #改变当前项的值
                宽度[f] = prev + m * 10 **(p)
                #在所有波长上递增，列出新值
                变异 = 0
                残差 = 0
                测试 = []
                #在每个波长上增加并评估此变化是否使 R^2 更大
                对于范围内的k（0，len（波长））：
                    test.append(height[i]*math.exp(-(wavelength[k]-centroid[i])**2/(2*width[f]**2)))
                    残差 += (test[k]+others[k]-cflux[k])**2
                    变异性 += (test[k]+others[k]-avgcflux)**2
                rsquare = 1-（残差/变异）
                #检查这个新拟合的 R^2 值
                如果 rsquare > bestr：
                    bestr = rsquare
                    最佳 = 宽度 [f]
        宽度[f] = 最佳
        计数 += 1
        #print '{} of {} peaks 优化，迭代 {} of {}'.format(f+1,len(centroid),repeat+1,2)
        完成=圆形（100 *（计数/（浮点数（len（质心））* 2）），2）
        print '{}% 完成'.format（完成）
    print 'New R^2 = {}'.format(bestr)

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:28:38.437

是的，使用 scipy 可能会做得更好（更容易）。但首先，将您的代码重构为更小的函数；它只是让阅读和理解正在发生的事情变得更加容易。

至于内存消耗：你可能在某个地方过度扩展了一个列表（`others`是一个候选者：我从来没有看到它被清除（或初始化！），而它被填充在一个四重循环中）。那，或者你的数据就是那么大（在这种情况下，你真的应该使用 numpy 数组，只是为了加快速度）。我不知道，因为您在不知道大小的情况下引入了各种变量（有多大`wavelengths`？`others`得到多大？数据数组的所有初始化是什么以及在哪里？）

此外，拟合 174 个高斯函数有点疯狂。要么寻找另一种方法来确定你想从数据中得到什么，要么把事情分开。从`wavelengths`变量来看，您似乎正在尝试在高分辨率光谱中拟合线；也许隔离大部分线并分别拟合这些孤立的组会更好。如果它们都重叠，我怀疑任何正常的拟合技术都会对你有所帮助。

最后，也许像[pandas](http://pandas.pydata.org/)这样的包可以提供帮助（例如，[计算](http://pandas.pydata.org/pandas-docs/stable/computation.html)子包）。

也许最后一点，因为我看到代码中有很多可以改进的地方。在某些时候，[codereview](https://codereview.stackexchange.com/)也可能有用。虽然现在我猜你的内存使用是最有问题的部分。

# matlab - 在 Matlab 中循环遍历 3d 矢量

> ID：16097986
> 
> 赞同：0
> 
> 时间：2013-04-19T05:45:08.647
> 
> 标签：matlab, matrix

我有一个 3D 矢量在 Matlab 中保存图像，它的 480x640x1400。我想循环浏览 1400 张图像。因为我想获取前 10 张图像的中位数（从 1-->10）并将其保存为一个 480x640 图像，然后从 2-->11 中获取图像并获取中位数并将其另存为另一张图像等等on (3-->12).... 例如：images 是包含大小为 480x640x1400 的图像的 3D 向量 images2 是所需的 3D 向量，包含大小为 480x640x1400 的图像的中值。这是我正在使用的脚本：

```
l=dir('*.mat');
filenames={l.name}';
nfiles=length(filenames)
idx=1;
strtidx=1;
endidx=nfiles;
step=1;
waitbar(0);
for i=strtidx:step:1
    tmp = load(filenames{i},'images');
    idx=1;
    for j=strtidx:step:1000
        for k=j:step:j+9
            tmp2(k)=tmp(:,:,k);
        end
        mm=median(tmp2,3);
        images2(j)=mm;
    end
    save(filenames{i}, 'images2', '-append');
    waitbar(i/nfiles);
    close all;
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:20:04.767

假设您有一个具有您所描述的维度的矩阵，称为`Images`. 首先，它可以是正常的图像矩阵，也可以是单元矩阵。这些是彩色图像吗？其次，您只有 1400 张图像，而不是 1401，Matlab 索引从 1 而不是从 0。

如果它是单通道图像的普通数组（即灰度），那么你想要这个：

```
for imageNumber = 1:size(Images,3)-9 %loop along the third dimension
    NewImages(:, :, imageNumber) = findMedian(Images(:,:,imageNumber:imageNumber + 9)) %findMedian is your own function that you must write that outputs the median of 10 images as a 480 x 640 matrix.
end 
```

# css - 使用 amazon s3 托管静态图像并从 css 引用

> ID：16097992
> 
> 赞同：0
> 
> 时间：2013-04-19T05:45:24.780
> 
> 标签：css, amazon-s3, amazon

所以我正在尝试使用 s3 上传我拥有的所有静态图像/css/js。在我的 css 文件夹中的一个 css 文件中，我有以下内容：

```
background: url('../bundles/sitemain/img/bg-storefront.png') no-repeat center top; 
```

在我的 s3 存储桶中，我已经有了 bundles 文件夹：

![在此处输入图像描述](https://i.stack.imgur.com/CCTOd.png)

在相应的子目录中使用文件 bg-storefront.png。但是，这甚至可能在 amazon s3 上实现，以至于它没有文件夹是什么的概念。那么在这种情况下，我是否必须使用图像的绝对路径才能使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:49:54.217

使用相对路径应该可以工作：当浏览器解释父目录`..`时，它只是通过 URL 的外观来完成。浏览器/网站访问者通常对大多数网页背后的实际文件结构一无所知，S3 也不例外。如果您的 CSS 文件被命名`css/style.css`并且您引用`../bundles/images/a.png`了 ，那么（对于浏览器）该 URL`bundles/images/a.png`是否存在才重要：真实的文件系统或目录结构是否支持这些 URL 并不重要。

# php - 使用 SimpleXML 获取第一个 XML 元素

> ID：16097999
> 
> 赞同：2
> 
> 时间：2013-04-19T05:45:38.397
> 
> 标签：php, xml, xpath, simplexml

好的，这可能是一个愚蠢的问题，但是如何从 XML 文档中获取单个元素？

我有这个 XML

```
$element = $response['linkedin'];

SimpleXMLElement Object
( 
    [id] => 575677478478
    [first-name] => John
    [last-name] => Doe
    [email-address] => john@doe.com
    [picture-url] => http://m3.licdn.com/mpr/mprx/123
    [headline] => Headline goes here
    [industry] => Internet
    [num-connections] => 71 
```

我只想分配`first-name`为`$firstName`

我可以使用 xPath 循环它，但这似乎有点过头了。

前任：

```
$fName = $element->xpath('first-name');
foreach ($fName as $name) 
{
    $firstName = $name;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:07:32.263

如果您将 SimpleXML 中的（一个或多个）元素节点列表作为单个元素访问，它将返回第一个元素。这是默认情况下（在[SimpleXML Basic Usage](http://php.net/simplexml.examples-basic)中也有概述）：

```
$first = $element->{'first-name'}; 
```

如果有多个元素，您可以通过使用它的从零开始的索引来指定您的意思，在方括号（数组访问）或花括号（属性访问）中：

```
$first = $element->{'first-name'}[0];
$first = $element->{'first-name'}{0}; 
```

这也允许您创建一个所谓的 SimpleXML 自引用来访问元素本身，例如删除它：

```
unset($first[0]);  # removes the element node from the document.

unset($first);     # unsets the variable $first 
```

您可能会认为您的 Xpath 将是矫枉过正。但在 SimpleXML 中并没有那么昂贵。有时访问元素的唯一方法就是*使用*Xpath。因此，了解您也可以通过 xpath 轻松访问第一个元素可能对您很有用。例如 SimpleXML 中的父元素：

```
list($parent) $element->xpath('..'); # PHP < 5.4

$parent = $element->xpath('..')[0];  # PHP >= 5.4 
```

如您所见，真正了解事物的工作原理以更多地使用 SimpleXML 是值得的。如果您已经从*SimpleXML Basic Usage*页面了解了所有内容，您可能希望通过

*   [*SimpleXML 类型备忘单*](http://hakre.wordpress.com/2013/02/12/simplexml-type-cheatsheet/)
*   [*如何区分表示元素和属性的 SimpleXML 对象？*](https://stackoverflow.com/a/14829309/367456)
*   [*SimpleXMLElement 实现 JsonSerializable*](https://stackoverflow.com/a/16093864/367456)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:06:06.897

您可以使用 XPath 查找匹配元素的第一个实例。

/root/firstname[1] 将为您提供文档中 firstname 的第一个实例。

```
$res=$response['linkedin']->xpath('/first-name[1]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:59:58.643

每个请求的答复表格。^^

如果这`SimpleXMLElement`是其中包含的唯一一个`$resource['linkedin']`，则可以使用以下命令对其进行更改：

```
$resource['linkedin']->{'first-name'} = $name; 
```

这允许您直接访问元素而无需对其进行操作`xpath`。^^