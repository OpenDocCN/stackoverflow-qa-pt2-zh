# StackOverflow 问答 14833000-14833999

# java - 带有符号的拉丁正则表达式

> ID：14833001
> 
> 赞同：4
> 
> 时间：2013-02-12T12:51:16.830
> 
> 标签：java, regex, split, symbols, latin

我需要拆分文本并仅获取单词、数字和带连字符的组合词。我还需要获取拉丁词，然后我使用`\p{L}`了 é，ú ü ã 等等。例子是：

```
String myText = "Some latin text with symbols, ? 987 (A la pointe sud-est de l'île se dresse la cathédrale Notre-Dame qui fut lors de son achèvement en 1330 l'une des plus grandes cathédrales d'occident) : ! @ # $ % ^& * ( ) + - _ #$% "  ' : ; > < / \  | ,  here some is wrong… * + () e -"

Pattern pattern = Pattern.compile("[^\\p{L}+(\\-\\p{L}+)*\\d]+");
String words[] = pattern.split( myText ); 
```

这个正则表达式有什么问题？为什么它匹配`"("`, `"+"`, `"-"`,`"*"`和`"|"`?

一些结果是：

```
dresse     // OK
sud-est    // OK
occident)  // WRONG
987        // OK
()         // WRONG
(a         // WRONG
*          // WRONG
-          // WRONG
+          // WRONG
(          // WRONG
|          // WRONG 
```

正则表达式的解释是：

```
[^\p{L}+(\-\p{L}+)*\d]+

 * Word separator will be:
 *     [^  ...  ]  No sequence in:
 *     \p{L}+        Any latin letter
 *     (\-\p{L}+)*   Optionally hyphenated
 *     \d            or numbers
 *     [ ... ]+      once or more. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:01:47.707

如果我对您的要求的理解是正确的，则此正则表达式将符合您的要求：

```
"\\p{IsLatin}+(?:-\\p{IsLatin}+)*|\\d+" 
```

它将匹配：

*   [Unicode拉丁脚本](http://en.wikipedia.org/wiki/Latin_script_in_Unicode)字符的连续序列。我将其限制为拉丁文字，因为`\p{L}`它将匹配**任何**文字中的字母。如果您的 Java 版本不支持该语法，请更改`\\p{IsLatin}`为。`\\pL`
*   或几个这样的序列，连字符
*   或连续的十进制数字序列 (0-9)

上面的正则表达式是通过调用来使用的`Pattern.compile`，调用`matcher(String input)`来获取`Matcher`对象，并使用循环来查找匹配项。

```
Pattern pattern = Pattern.compile("\\p{IsLatin}+(?:-\\p{IsLatin}+)*|\\d+");
Matcher matcher = pattern.matcher(inputString);

while (matcher.find()) {
    System.out.println(matcher.group());
} 
```

如果您想允许带有撇号的单词`'`：

```
"\\p{IsLatin}+(?:['\\-]\\p{IsLatin}+)*|\\d+" 
```

我也在`-`字符类中转义，`['\\-]`以防万一你想添加更多。如果它是角色类中的第一个或最后一个，实际上`-`不需要转义，但为了安全起见，我无论如何都会转义它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:06:05.193

如果字符类的左括号后面跟着 a，`^`那么类中列出的字符是不允许的。因此，您的正则表达式允许**除**unicode 字母、、 、 、`+`和`(`digit`-`出现一次或多次之外的任何内容。`)``*`

请注意，像`+`, `(`,`)`等`*`这样的字符在字符类中没有任何特殊含义。

pattern.split 所做的是将字符串拆分为与正则表达式匹配的模式。您的正则表达式匹配空格，因此每次出现一个或多个空格时都会发生拆分。所以结果会是这样。

例如考虑这个

```
Pattern pattern = Pattern.compile("a");
    for (String s : pattern.split("sda  a  f  g")) {
        System.out.println("==>"+s);
    } 
```

输出将是

> ==>sd
> 
> ==>
> 
> ==> fg

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:01:54.503

正则表达式集描述`[]`只能包含字母、类 ( `\p{...}`)、序列 (eg `a-z`) 和补码符号 ( `^`)。您必须将您正在使用的其他魔法字符 ( )`+*()`放在*块之外*`[ ]`。

# vb.net - 从数据集和 sql server 中删除记录

> ID：14833006
> 
> 赞同：0
> 
> 时间：2013-02-12T12:51:33.640
> 
> 标签：vb.net, sql-server-2008, visual-studio-2008

我正在尝试从 DataTable 中删除一条记录，然后更新它附加到的数据库。

我删除了我的 DataGridView 的一行，然后使用以下方法更新我的数据集：

```
 Me.Tab2_DGVDuty.Rows.RemoveAt(Me.Tab2_DGVDuty.CurrentRow.Index)
                ds1.AcceptChanges()
                Tab2_DGVDuty.Refresh() 
```

然后我调用我的 adapter.update 如下：

```
 Dim adapter As New SqlDataAdapter
            Dim cmdBuilder As New SqlCommandBuilder(adapter)
            Dim DutyDetails As String = "SELECT * from MyTable"

            adapter.SelectCommand = New SqlCommand(DutyDetails, SQLConn)
            adapter.UpdateCommand = cmdBuilder.GetUpdateCommand
            adapter.DeleteCommand = cmdBuilder.GetDeleteCommand

            Dim cb As SqlCommandBuilder = New SqlCommandBuilder(adapter)

            adapter.Update(ds1.Tables("DT_Table")) 
```

但是当我重新加载数据时，我的记录仍然存在。如果我更改一个值并更新它可以正常工作，但由于某种原因删除不会。

非常感谢任何帮助。

编辑：好的，我将删除更改为以下建议：

```
ds1.Tables("DT_Table").Rows(Tab2_DGVDuty.CurrentRow.Index).Delete() 
```

这是附加到一个按钮，它第一次删除很好，但在第二次按下删除另一条记录时没有任何反应。如果我使用

```
ds1.AcceptChanges() 
```

然后它工作正常。但是，如果我使用上面的代码，那么下面的代码不会从数据库中删除任何内容：

```
 Dim adapter As New SqlDataAdapter
            Dim cmdBuilder As New SqlCommandBuilder(adapter)
            Dim DutyDetails As String = "SELECT * from MyTable"

            adapter.SelectCommand = New SqlCommand(DutyDetails, SQLConn)
            adapter.UpdateCommand = cmdBuilder.GetUpdateCommand
            adapter.DeleteCommand = cmdBuilder.GetDeleteCommand

            Dim cb As SqlCommandBuilder = New SqlCommandBuilder(adapter)

            adapter.Update(ds1.Tables("DT_Table")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:55:40.663

1.  你不想`DataRow`从中删除`DataTable`，你想要[`Delete`](http://msdn.microsoft.com/en-us/library/system.data.datarow.delete.aspx)它

    ```
    ds1.Tables("DT_Table").Rows(Tab2_DGVDuty.CurrentRow.Index).Delete() 
    ```

2.  之后不要打电话`ds1.AcceptChanges()`，因为`Update`它将无法识别该行已更改，因为它将更改`RowState`为`Unchanged`。 `DataAdapter.Update`隐含地调用`AcceptChanges`作为最后一步，而不是你。

3.  我认为那`Tab2_DGVDuty`是 a`DataGridView`而不是`DataTable`，我在上面已经考虑到了这一点。

# java - Java 字符串用“.”分割 （点）

> ID：14833008
> 
> 赞同：448
> 
> 时间：2013-02-12T12:51:35.277
> 
> 标签：java, regex, string, split, indexoutofboundsexception

为什么这段代码的第二行会抛出`ArrayIndexOutOfBoundsException`？

```
String filename = "D:/some folder/001.docx";
String extensionRemoved = filename.split(".")[0]; 
```

虽然这有效：

```
String driveLetter = filename.split("/")[0]; 
```

我使用 Java 7。

* * *

## 回答 #1

> 赞同：883
> 
> 时间：2013-02-12T12:53:44.817

如果要在*文字*点上拆分，则需要转义该点：

```
String extensionRemoved = filename.split("\\.")[0]; 
```

否则，您将在 regex 上进行拆分`.`，这意味着“任何字符”。
请注意在正则表达式中创建单个反斜杠所需的双反斜杠。

* * *

你得到一个，`ArrayIndexOutOfBoundsException`因为你的输入字符串只是一个点，即`"."`，这是一个边缘情况，当在点上分割时会产生一个空数组；[`split(regex)`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-)从结果中删除所有尾随空格，但是由于在一个点上拆分一个点只留下两个空格，因此在删除尾随空格后，您将得到一个空数组。

为避免出现`ArrayIndexOutOfBoundsException`这种极端情况，请使用 的重载版本[`split(regex, limit)`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-)，它有第二个参数，即结果数组的大小限制。当`limit`为*负数*时，从结果数组中删除尾随空格的行为被禁用：

```
".".split("\\.", -1) // returns an array of two blanks, ie ["", ""] 
```

即，当`filename`只是一个点时`"."`，调用`filename.split("\\.", -1)[0]`将返回一个空白，但调用`filename.split("\\.")[0]`将抛出一个`ArrayIndexOutOfBoundsException`.

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2013-02-12T12:56:08.347

点“。” 是java正则表达式引擎中的一个特殊字符，所以你必须使用“\\。” 转义这个字符：

```
final String extensionRemoved = filename.split("\\.")[0]; 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-02-12T12:54:01.633

这是因为`.`是正则表达式中的保留字符，代表任意字符。相反，我们应该使用以下语句：

```
String extensionRemoved = filename.split("\\.")[0]; 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-02-12T12:54:05.503

我相信你应该逃避这个点。尝试：

```
String filename = "D:/some folder/001.docx";
String extensionRemoved = filename.split("\\.")[0]; 
```

否则点被解释为正则表达式中的任何字符。

# ios - iOS蓝牙：写入特征时出现未知错误

> ID：14833009
> 
> 赞同：3
> 
> 时间：2013-02-12T12:51:37.223
> 
> 标签：ios, objective-c, core-bluetooth, bluetooth-lowenergy

在我的应用程序中，我发现我的外围设备具有给定的服务。然后，我在继续之前检查是否存在所有想要的特征。

当我向我的特征写入值时，回调`didWriteValueForCharacteristic:`触发：

```
- (void) peripheral:(CBPeripheral *)peripheral didWriteValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error{

    NSLog(@"Did write characteristic value : %@ with ID %@", characteristic.value, characteristic.UUID);
    NSLog(@"With error: %@", [error localizedDescription]);
} 
```

并产生这个输出：

```
Did write characteristic value : <005c> with ID Unknown (<00005004 1212efde 1523785f eabcd123>)
With error: Unknown error. 
```

该值是正确的，特征的 128 位 UUID 也是如此，但在我的外围设备中，我从未真正得到写入的值。

有什么建议可能是错的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T07:25:55.263

我最初发送了 a `WriteWithoutResponse`，将其更改为 @Larme 在评论中提到的`WriteWithResponse`给了我 a 。`CoreBluetooth[WARNING] error 13`这个值[对应于](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Constants/Reference/reference.html)Invalid Attribute Value Length，意味着我发送了错误的数字格式，即我发送了一个16bit的值，而外设期望的是8bit。

更改外设以接受 16 位数据解决了该问题。

# reporting-services - Reporting Services：本地报告未将其数据呈现 为 CSV

> ID：14833011
> 
> 赞同：1
> 
> 时间：2013-02-12T12:51:39.937
> 
> 标签：reporting-services, asp.net-4.0, export-to-csv, localreport

我正在尝试让我的本地 SQL Server 2005 Reporting Services RDLC 文件将其原始数据呈现为 CSV 格式 - 不成功:-( 我有一个 ASP.NET 4.0 应用程序，我正在尝试将原始数据导出为 CSV。

我可以很好地将我的报告呈现为 PDF 或 Excel (XLS) - 就像一个魅力。

但是当我尝试使用这行代码将数据呈现为 CSV 格式时：

```
byte[] bytes = _reportViewer.LocalReport.Render(renderType);

// renderType is set to "CSV", _reportViewer is my local ReportViewer instance 
```

而不是让我的 CSV 文件被下载，我得到这个例外：

> *System.ArgumentOutOfRangeException
> 消息：参数超出其有效范围。参数名称：格式*
> 
> *在 Microsoft.Reporting.WebForms.LocalReport.InternalRender（字符串格式，布尔 allowInternalRenderers，字符串 deviceInfo，PageCountMode pageCountMode，CreateAndRegisterStream createStreamCallback，警告 []& 警告）*
> *在 Microsoft.Reporting.WebForms.LocalReport.InternalRender（字符串格式，布尔 allowInternalRenderers，字符串deviceInfo、PageCountMode pageCountMode、String& mimeType、String& 编码、String& fileNameExtension、String[]& 流、Warning[]& 警告）*
> *在 Microsoft.Reporting.WebForms.LocalReport.Render（字符串格式、String deviceInfo、PageCountMode pageCountMode、String& mimeType、String&编码，字符串和文件名扩展，字符串[]&流，警告[]&警告）*
> *在 Microsoft.Reporting.WebForms.Report.Render（字符串格式、字符串 deviceInfo、字符串和 mimeType、字符串和编码、字符串和文件名扩展、字符串 [] 和流、警告 [] 和警告）*
> *在 Microsoft.Reporting.WebForms.Report.Render（字符串格式，字符串 deviceInfo）*
> *在 Microsoft.Reporting.WebForms.Report.Render（字符串格式）*
> *在 MyCode.reports.ReportBasePage.RenderReport（字符串渲染类型，字符串内容类型，字符串扩展）*

我确实在我的本地`RSReportServer.config`文件中配置了 CSV 渲染器：

```
<Extensions>
   <Render>
      <Extension Name="CSV"
                 Type="Microsoft.ReportingServices.Rendering.DataRenderer.CsvReport,
                       Microsoft.ReportingServices.DataRendering" /> 
```

以及一大堆其他渲染扩展......

我现在有点不知所措 - 有什么想法吗？到目前为止，似乎在任何文档或博客文章中都找不到任何提示:-(（大多数人说你需要注册 CSV 渲染扩展——但这对我来说已经到位了！）

# java - 正则表达式匹配引号内的模式

> ID：14833012
> 
> 赞同：0
> 
> 时间：2013-02-12T12:51:49.233
> 
> 标签：java, regex

我有一些输入数据，例如

> '和里面'里面有'hello'的一些字符串

如何编写正则表达式以便返回引用的文本（无论重复多少次）（所有出现）。

我有一个返回单引号的代码，但我想让它返回多次出现：

```
String mydata = "some string with 'hello' inside 'and inside'";
Pattern pattern = Pattern.compile("'(.*?)+'");
Matcher matcher = pattern.matcher(mydata);
while (matcher.find())
{
    System.out.println(matcher.group());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:55:49.607

为我找到所有出现的事件：

```
String mydata = "some '' string with 'hello' inside 'and inside'";
Pattern pattern = Pattern.compile("'[^']*'");
Matcher matcher = pattern.matcher(mydata);
while(matcher.find())
{
    System.out.println(matcher.group());
} 
```

输出：

> ```
> ''
> 'hello'
> 'and inside' 
> ```

图案说明：

> ```
> '          // start quoting text
> [^']       // all characters not single quote
> *          // 0 or infinite count of not quote characters
> '          // end quote 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:53:35.723

我相信这应该符合您的要求：

```
\'\w+\' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:00:39.617

`\'.*?'`是您正在寻找的正则表达式。

# python - 在python中将矩阵转换为数组

> ID：14833013
> 
> 赞同：1
> 
> 时间：2013-02-12T12:51:52.183
> 
> 标签：python

我在python中有一个数组数组。在 python 中将其转换为数组的最佳方法是什么？例如：

```
m = [[1,2],[3,4]]
# convert to [1,2,3,4] 
```

我是 python 新手，所以我不知道它的任何解决方案比编写循环更好。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:53:09.380

使用`itertools.chain`或`list comprehension`：

```
from itertools import chain

list(chain(*m))  # shortest
# or:
list(chain.from_iterable(m)) # more efficient 
```

* * *

较小的列表`comprehension`更快，较长的列表`chain.from_iterable`更合适。

```
[item for subl in m for item in subl] 
```

为了理解嵌套推导，您可以将其拆分为多行并将其与常规 for 循环进行比较：

```
[item                         #result = []
    for subl in m             #for subl in m:  
        for item in subl]     #    for item in subl:
                              #        result.append(item) 
```

# javascript - 如何在jquery数据表的“sAjaxSource”中添加两个以上的paasing值

> ID：14833014
> 
> 赞同：0
> 
> 时间：2013-02-12T12:51:54.460
> 
> 标签：javascript, jquery

我需要在 jquery sAjaxSource 中传递两个直接值，我尝试了这种类型但不起作用。当通过单曲时

成功：

```
"sAjaxSource": "/controller/action?" + "Id=" + $('#Ddl1').val(), 
```

失败：

> "sAjaxSource": "/controller/action?" + "Id=" + $('#Ddl1').val(), + "nameId=" + $('#Ddl2').val(),

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:10:49.773

这看起来像一个查询字符串。您可能只是错过了`&`前面`nameId`并添加了不必要的逗号，请尝试将其更改为：

```
"sAjaxSource": "/controller/action?" + "Id=" + $('#Ddl1').val() + "&nameId=" + $('#Ddl2').val(), 
```

# android - 带有 android maven 插件的核心库

> ID：14833015
> 
> 赞同：2
> 
> 时间：2013-02-12T12:51:56.050
> 
> 标签：android, maven, maven-plugin, java

我想将 nativ 库与 android 一起使用。当我尝试遵守我的项目时

```
mvn clean install 
```

我收到一个错误

```
[INFO] If you really intend to build a core library -- which is only
[INFO] appropriate as part of creating a full virtual machine
[INFO] distribution, as opposed to compiling an application -- then use
[INFO] the "--core-library" option to suppress this error message. 
```

如何将 --core-library 参数添加到 pom.xml ？

我的 pom 看起来像

http://maven.apache.org/maven-v4_0_0.xsd">4.0.0

```
<parent>
    <groupId>com.temp</groupId>
    <artifactId>SipAndroidClient</artifactId>
    <version>0.1</version>
</parent>

<artifactId>android-di</artifactId>
<packaging>apk</packaging>
<name>android-di - Application</name>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.hamcrest</groupId>
        <artifactId>hamcrest-all</artifactId>
        <version>1.3</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.9.5</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.pivotallabs</groupId>
        <artifactId>robolectric</artifactId>
        <version>1.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
    </dependency>
    <dependency>
        <groupId>org.roboguice</groupId>
        <artifactId>roboguice</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>de.mindpipe.android</groupId>
        <artifactId>android-logging-log4j</artifactId>
        <version>1.0.3</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.2</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.7.2</version>
    </dependency>
    <dependency>
        <groupId>javax.sip</groupId>
        <artifactId>jain-sip-api</artifactId>
        <version>1.2.1.4</version>
    </dependency>
    <dependency>
        <groupId>javax.sip</groupId>
        <artifactId>jain-sip-ri</artifactId>
        <version>1.2.167</version>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                <sdk>
                    <platform>10</platform>
                    <path>/home/damian/.android-sdk</path>
                </sdk>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
            <extensions>true</extensions>
        </plugin>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:19:06.190

我相信这就是你正在寻找的[http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html](http://maven-android-plugin-m2site.googlecode.com/svn/dex-mojo.html)

查看 dex 部分，将 CoreLibrary 设置为 true 会将“--core-library”发送到 dex。

# r - 如何从“summary.glht”中提取 p 值

> ID：14833019
> 
> 赞同：5
> 
> 时间：2013-02-12T12:52:13.630
> 
> 标签：r

我想从 Pr(>|t|) 列中提取值

```
library(lsmeans)    
warp.lm = lm(breaks ~ wool * tension, data = warpbreaks)
toP<-lsmeans(warp.lm, pairwise ~ wool | tension, glhargs=list())
toP[[2]]

         Simultaneous Tests for General Linear Hypotheses

Fit: lm(formula = breaks ~ wool * tension, data = warpbreaks)

Linear Hypotheses:
               Estimate Std. Error t value Pr(>|t|)   
A - B | L == 0   16.333      5.157   3.167  0.00797 **
A - B | M == 0   -4.778      5.157  -0.926  0.73187   
A - B | H == 0    5.778      5.157   1.120  0.60282   
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
(Adjusted p values reported -- single-step method) 
```

这该怎么做？`class(toP[[2]])`说吧`"summary.glht" "glht"`。toP[[2]][9] 中有 $pvalues 但 toP[[2]][9]$pvalues 给出 NULL

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:00:07.803

如果您想知道可以访问给定对象的“元素”，请不要使用`class`，请使用`names`：

```
R> names(toP[[2]])
[1] "model"       "linfct"      "rhs"         "coef"        "vcov"       
[6] "df"          "alternative" "type"        "test" 
```

在这里，您可以看到有一个名为 的元素`test`。让我们看一下：

```
R> names(toP[[2]]$test)
[1] "pfunction"    "qfunction"    "coefficients" "sigma"       
[5] "tstat"        "pvalues"      "type" 
```

嗯，有一个元素叫做`pvalues`. 听起来不错。您可以通过以下方式访问它：

```
R> toP[[2]]$test$pvalues
[1] 0.007954354 0.731843623 0.602840958
attr(,"error")
[1] 7.579683e-05 
```

在这里你得到你的p值......

获取对象结构的另一种方法是使用`str()`. 应用于您的案例 ( `str(toP[[2]])`) 它会导致输出有点长，但可以让您直接确定访问 p 值的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T12:56:16.687

你试过了吗：

```
 toP[[2]]$test$pvalues 
```

# crystal-reports - 如何在 2008 年水晶报表中抑制子报表的钻取

> ID：14833021
> 
> 赞同：0
> 
> 时间：2013-02-12T12:52:20.297
> 
> 标签：crystal-reports, crystal-reports-2008

我有一个主报告，在组页脚包含一个子报告。在运行时双击子报表时，子报表会向下钻取并在新选项卡中打开。我想禁用向下钻取功能。我无法将子报告放在文本框中来实现这一点。随着子报告动态增长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:59:51.663

不能禁用向下钻取功能。此外，您将无法在文本对象中嵌入子报告。但是，您可以禁用子报告垂直扩展的能力——清除“可以增长”复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T15:31:48.220

您可以将一个`EnableDrillDown`属性设置为`false`，但这会将其应用于***整个***报表（而不仅仅是子报表）。我在 ASP.NET WebForms 中工作，所以对我来说只是：

```
CrystalReportViewer1.EnableDrillDown = false; 
```

如果您在 WinForms 中执行它应该是相同的，但我不是 100% 确定。

# php - $request->getPathInfo() 为 'prod' 和 'dev' 环境返回相同的字符串

> ID：14833023
> 
> 赞同：0
> 
> 时间：2013-02-12T12:52:22.493
> 
> 标签：php, symfony1, symfony-1.4

我正在使用`$request->getPathInfo()`. 但是，检索到的 url 始终是 prod 环境的 url，这意味着我在测试期间无意中从 dev 环境移动到了 prod 环境。

有没有办法确保返回正确的 URI（即与浏览器窗口中显示的相同）？

我的操作代码如下所示：

```
public function executeSomeAction(sfWebRequest $request)
{
    $this->url = $request->getPathInfo();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:58:13.313

正如你在里面看到的`sfWebRequest.class.php`，从 url中`getPathInfo()`删除了：`$relativeUrlRoot`

```
$pathInfo = $pathArray[$sf_path_info_key];
if ($relativeUrlRoot = $this->getRelativeUrlRoot())
{
  $pathInfo = preg_replace('/^'.str_replace('/', '\\/', $relativeUrlRoot).'\//', '', $pathInfo);
} 
```

`$relativeUrlRoot`来自这个函数，它从 url 中删除控制器名称。

```
public function getRelativeUrlRoot()
{
  if (null === $this->relativeUrlRoot)
  {
    if (!($this->relativeUrlRoot = $this->getOption('relative_url_root')))
    {
      $this->relativeUrlRoot = preg_replace('#/[^/]+\.php5?$#', '', $this->getScriptName());
    }
  }

  return $this->relativeUrlRoot;
} 
```

所以如果你有`myapp_dev.php/main`或`index.php/main`，你总会得到`/main`。

如果您想要**之前**的完整路径`/main`，您还必须调用`$this->request->getScriptName()`.

小心，`getScriptName()`将返回域和路径信息之间的**所有内容。**如果有`http://exemple.com/somepath/app_dev.php/main`，`getScriptName()`将返回：`/somepath/app_dev.php`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:42:38.640

如果您想要完整的 URI 以及地址可能具有的任何查询字符串，您可以使用

```
$request->getUri(); 
```

这将返回浏览器地址栏中可见的整个地址。

# ios - 通过 iOS 的不受信任的 https 请求进行 WSDL 访问

> ID：14833024
> 
> 赞同：2
> 
> 时间：2013-02-12T12:52:26.543
> 
> 标签：ios, soap, https, wsdl, keychain

所以场景是我想使用 WSDL 连接到服务器，并且访问点以“https”开头，这阻止了我。

现在我被困在最后一步，即**检索 secTrustRef 并将其保存到钥匙串**

**一些预先设置**

我使用了 sudze 服务来生成 WSDL 包装器，它在 http 下运行良好。

我遵循本教程，直到我发现 keychainmanager 类不是该类的一部分。

[http://blog.exadel.com/working-with-ios-and-soap/](http://blog.exadel.com/working-with-ios-and-soap/)

所以我需要做一些逆向工程来实现将服务器信任对象保存到钥匙串中的方法，它应该实现类似的功能来替换

```
[[KeyChainManager sharedManager] isSavedTrust:confirmNeed.protectionSpace.serverTrust] 
```

和

```
[[KeyChainManager sharedManager] saveCertificatesFromTrust:confirmNeed.protectionSpace.serverTrust]; 
```

通过使用这个示例代码，我似乎非常接近我想要实现的目标，但我对安全框架很陌生......

[http://developer.apple.com/library/ios/#samplecode/AdvancedURLConnections/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/AdvancedURLConnections/Introduction/Intro.html)

任何熟悉安全框架工作的人都可以帮助我吗？

# ember.js - 应用程序模板中未正确定义助手？

> ID：14833027
> 
> 赞同：0
> 
> 时间：2013-02-12T12:52:33.757
> 
> 标签：ember.js

我对 ember.js 非常陌生，并且正在碰壁。我正在使用 ember.js 1.0.0-pre4

我的 app.js 具有以下设置：

```
window.App = Ember.Application.create();

App.Router.map(function() {
    this.route("dashboard", {path: "/"});
});

App.DashboardRoute = Ember.Route.extend({
}) 
```

`Ember.TEMPLATES['application']`我尝试在应用程序模板（ ）上做这样的事情

```
{{#linkTo "dashboard"}}Dashboard{{/linkTo}} 
```

它给了我`Uncaught Error: Could not find property 'linkTo'`。我和其他助手一样尝试过`{{view}}`，但都给了我同样的找不到属性错误。

jsfiddle：http: [//jsfiddle.net/gBf42/](http://jsfiddle.net/gBf42/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:49:40.360

啊哈，我发现了问题！当您使用`Handlebars.compile`它时，它使用车把脚本而不是 Ember 脚本。Ember 有自己的车把对象，它使用额外的模板扩展了原始的车把对象。一个这样的模板是`{{#linkTo ...}}`模板。

所以要修复，你所要做的就是使用 Ember.Handlebars 代替：

```
Ember.TEMPLATES["application"] = Ember.Handlebars.compile("{{#linkTo 'dashboard'}}Dashboard{{/linkTo}}") 
```

# macos - 如何获取应用程序的静默安装状态

> ID：14833028
> 
> 赞同：2
> 
> 时间：2013-02-12T12:52:42.047
> 
> 标签：macos, installation, silent

我正在使用静默安装在 Mac 上安装应用程序。这里的问题是我想读取/获取应用程序安装的状态，我的意思是它是否安装成功。尝试将控制台输出重定向到某个文本文件，但它不起作用。

我试过了，

```
./installer -s -v > logfile 
```

它在控制台上显示输出，但不重定向到日志文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:04:01.547

Try `./installer -s -v &> logfile` or `./installer -s -v 2> logfile`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:13:36.867

您需要重定向`stderr`到`stdout`：

```
./installer -s -v 2>&1 logfile 
```

# jquery - 提交无效

> ID：14833032
> 
> 赞同：0
> 
> 时间：2013-02-12T12:52:55.847
> 
> 标签：jquery, triggers, internet-explorer-9, submit

我有这个代码。它适用于谷歌浏览器，`firefox`但我不明白为什么它在 IE 9 中失败。我认为`jquery`提交或触发器存在问题。我在网上搜索了很多，但没有找到解决方案。似乎很难显示问题，因为有时它有效但很少。

```
$(function() {
$("#dialog").dialog("destroy");

$("#dialog").dialog({
    autoOpen: false,
    height: 200,
    width: 300,
    modal: false,
    buttons: {
        'Se connecter': function() {
            $(".ajax").trigger('submit');
        },
        Retour: function() {
            $("#dialog").dialog('close');
        }
    },
    close: function() {

    }
});

$(".ajax").submit(
    function(e) {
        var login_username = $("#login_username").val(),
         login_password = $("#login_password").val();

    //alert(login_username + " pass  " + login_password+ " domaine " +domaine_apside);

    $.post('Login',{login_username:login_username,login_password:login_password});
    location.reload();
    return false; // Pour empêcher le submit vers la page 'action'
});

$('#connect')
    .button()
    .click(function() {

    $('#dialog').dialog('open');
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:14:37.397

尝试：

```
$('#connect').click(function(e) {
    e.preventDefault();
    $('#dialog').dialog('open');
}); 
```

# com - 将“null”参数从 jscript 传递到 COM 接口？

> ID：14833034
> 
> 赞同：0
> 
> 时间：2013-02-12T12:52:59.617
> 
> 标签：com, null, jscript

考虑以下接口定义：

```
[
    //...
    dual,
    //...
]
interface IFoo : IDispatch{
}

[
    //...
    dual,
    //...
]
interface IBar : IDispatch{
  [propput, id(1)] HRESULT foo([in] IFoo* newVal);
}; 
```

我正在使用`IBar`在 JScript 中实现的对象：

`myBar.foo = someFoo;`// 到目前为止，一切都很好

`foo`我该如何设置`null`？

`myBar.foo = null;`// “类型不匹配”

`myBar.foo = 0;`// “类型不匹配”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T11:30:00.047

答案是：这是不可能的。

# c# - Should I try to amalgamate static bodies as much as possible?

> ID：14833037
> 
> 赞同：1
> 
> 时间：2013-02-12T12:53:07.897
> 
> 标签：c#, xna, farseer, 2d-games

Im making a roguelike game, using XNA and farseer physics. Some rooms will have a procedurally generated cave like layout made from blocks. ![](../Images/274e98d7aa04f17267a89e9d05da7108.png)

At the moment every block is a seperate body. created thusly:

```
 _floor = BodyFactory.CreateRectangle(_world,   ConvertUnits.ToSimUnits(Globals.SmallGridSize.X), ConvertUnits.ToSimUnits(Globals.SmallGridSize.Y), 30f);
        _floor.Position = ConvertUnits.ToSimUnits(_position.X + _centerVect.X, _position.Y + _centerVect.Y);
        _floor.IsStatic = true;
        _floor.Restitution = 0.2f;
        _floor.Friction = 0.2f; 
```

Should I Just have one body per room and add all the rectangle shapes for each block to the body? Will this give me a performance boost? Also will it be possible to add and remove block shapes to this body (in order to be able to destroy a block and then "add" the exposed one behind it)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:07:59.833

您很可能希望保留每个块有 1 个 Body，因为在破坏块时管理碰撞会容易得多。考虑在块被破坏后必须重新计算 1 Body 的形状。这将是相当费力的。

这与我放弃的游戏非常相似。我最初对每个块都有一个 Body，这很慢：

[http://www.jgallant.com/images/uranus/land2.png](http://www.jgallant.com/images/uranus/land2.png)

我的第一个优化只是将身体设置在生成世界的边缘：

[http://www.jgallant.com/images/uranus/chunk.png](http://www.jgallant.com/images/uranus/chunk.png)

这导致了更快的代码，但仍然存在屏幕上有太多主体的问题。我后来的优化根据玩家在世界上的位置将身体添加到边缘。尸体从可用尸体池中拉出，并移动到适当的位置。实体从未被破坏，只是在不使用时移动到 Vector2(Int.Min, Int.Min)。当需要使用它们时，它们被移动到位置：

[http://www.jgallant.com/images/collision2.jpg](http://www.jgallant.com/images/collision2.jpg)

这提供了三种方法中最快的代码。如果您正在寻找动态销毁/创建身体，这是一个非常糟糕的主意。您最好将可用的尸体存储在池中，然后重新使用它们。

这也有一些复杂性。目前我手头没有我的代码，但如果您有其他问题，我可以发布我的一些代码来提供帮助。

# visual-c++ - failed to create d2d device in c++

> ID：14833039
> 
> 赞同：1
> 
> 时间：2013-02-12T12:53:18.890
> 
> 标签：visual-c++

I am new to working with windows applications and c++. I am trying to create a D2D device from Dxgi surface of d3d11 device following this code "[http://msdn.microsoft.com/en-us/library/windows/desktop/hh404272(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh404272(v=vs.85).aspx)" .

But HRESULT gr ( creating d2d device) gives me an error "E_INVALIDARG" though I followed the same steps as given.

Here is the code snippet. //m_device is already initialized

// Get DXGI device

```
 IDXGIDevice* DxgiDevice = nullptr;
HRESULT hr = m_Device->QueryInterface(__uuidof(IDXGIDevice), reinterpret_cast<void**>(&DxgiDevice));
// create id2d21factory
ID2D1Factory1* m_d2dFactory=nullptr;
D2D1_FACTORY_OPTIONS options;
    options.debugLevel=  D2D1_DEBUG_LEVEL_NONE;
D2D1_FACTORY_TYPE factoryType = D2D1_FACTORY_TYPE_SINGLE_THREADED;
 hr = D2D1CreateFactory(factoryType, __uuidof(ID2D1Factory1),&options, reinterpret_cast<void **>                       (&m_d2dFactory));
HRESULT gr= m_d2dFactory->CreateDevice(DxgiDevice, &m_d2dDevice ); 
```

This code doesn't give any errors while compiling or building solution in visual studio 2012. But giving me error while debugging. I am trying to insert this code in microsoft's desktop duplication sample code. I need to create a d2dbitmap source for my project

please help me with this.

Please let me know if further details are required.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-21T13:56:07.883

我建议您将其设置`options`为定义的`D2D1_DEBUG_LEVEL_INFORMATION`时间`_DEBUG`，然后您可能会在输出窗口中看到一些错误消息。例如，输出告诉我

> D2D 调试警告 - Direct3D 设备不是使用 D3D11_CREATE_DEVICE_BGRA_SUPPORT 创建的，因此与 Direct2D 不兼容。

这真的很有帮助。

# java - Error to export an android app

> ID：14833042
> 
> 赞同：3
> 
> 时间：2013-02-12T12:53:25.077
> 
> 标签：java, android, google-play

I am trying to export my android application in order to publish on Google play.

My project includes some library dependencies that may cause this problem, because it is perfectly working for my other apps which do not have dependencies.

I set the keystore, password, alias and etc. At the end when I click on the finish button, it generates this error in the console:

```
[2013-02-12 13:48:25 - WorkOrder] Proguard returned with error code 1\. See console
[2013-02-12 13:48:25 - WorkOrder] Note: there were 5 duplicate class definitions.
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.content.res.XmlResourceParser extends or implements program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: org.ksoap2.transport.ServiceConnectionMidp: can't find referenced class javax.microedition.io.Connector
[2013-02-12 13:48:25 - WorkOrder] Warning: org.ksoap2.transport.ServiceConnectionMidp: can't find referenced class javax.microedition.io.HttpConnection
[2013-02-12 13:48:25 - WorkOrder] Warning: org.ksoap2.transport.ServiceConnectionMidp: can't find referenced class javax.microedition.io.HttpConnection
[2013-02-12 13:48:25 - WorkOrder] Warning: org.ksoap2.transport.ServiceConnectionMidp: can't find referenced class javax.microedition.io.HttpConnection
[2013-02-12 13:48:25 - WorkOrder] Warning: org.ksoap2.transport.ServiceConnectionMidp: can't find referenced class javax.microedition.io.HttpConnection
[2013-02-12 13:48:25 - WorkOrder] Warning: org.ksoap2.transport.ServiceConnectionMidp: can't find referenced class javax.microedition.io.HttpConnection
[2013-02-12 13:48:25 - WorkOrder] Warning: org.ksoap2.transport.ServiceConnectionMidp: can't find referenced class javax.microedition.io.HttpConnection
[2013-02-12 13:48:25 - WorkOrder] Warning: org.ksoap2.transport.ServiceConnectionMidp: can't find referenced class javax.microedition.io.Connector
[2013-02-12 13:48:25 - WorkOrder] Warning: org.ksoap2.transport.ServiceConnectionMidp: can't find referenced class javax.microedition.io.HttpConnection
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.content.Intent depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.content.IntentFilter depends on program class org.xmlpull.v1.XmlSerializer
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.content.IntentFilter depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.content.res.ColorStateList depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.AnimationDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.BitmapDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.ClipDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.ColorDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.Drawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.Drawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.Drawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.LayerDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.ShapeDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.graphics.drawable.ShapeDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.util.Xml depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.util.Xml depends on program class org.xmlpull.v1.XmlSerializer
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.util.Xml depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.view.LayoutInflater depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: library class android.view.LayoutInflater depends on program class org.xmlpull.v1.XmlPullParser
[2013-02-12 13:48:25 - WorkOrder] Warning: there were 9 unresolved references to classes or interfaces.
[2013-02-12 13:48:25 - WorkOrder]          You may need to specify additional library jars (using '-libraryjars').
[2013-02-12 13:48:25 - WorkOrder] Warning: there were 20 instances of library classes depending on program classes.
[2013-02-12 13:48:25 - WorkOrder]          You must avoid such dependencies, since the program classes will
[2013-02-12 13:48:25 - WorkOrder]          be processed, while the library classes will remain unchanged.
[2013-02-12 13:48:25 - WorkOrder] java.io.IOException: Please correct the above warnings first.
[2013-02-12 13:48:25 - WorkOrder]   at proguard.Initializer.execute(Initializer.java:321)
[2013-02-12 13:48:25 - WorkOrder]   at proguard.ProGuard.initialize(ProGuard.java:211)
[2013-02-12 13:48:25 - WorkOrder]   at proguard.ProGuard.execute(ProGuard.java:86)
[2013-02-12 13:48:25 - WorkOrder]   at proguard.ProGuard.main(ProGuard.java:492) 
```

this is the proguard.cfg:

```
##---------------Begin: proguard configuration common for all Android apps ----------
-dontoptimize
#-dontobfuscate
-dontwarn sun.misc.Unsafe, org.mockito.**, org.junit.**, org.objenesis.instantiator.sun.**, org.mockito.stubbing.Answer, org.mockito.invocation.InvocationOnMock, com.google.common.collect.MinMaxPriorityQueue, org.apache.**

#Use 5 step of optimization 
-optimizationpasses 5

#When not preverifing in a case-insensitive filing system, such as Windows. This tool will unpack your processed jars,(if using windows you should then use):
-dontusemixedcaseclassnames

#Specifies not to ignore non-public library classes. As of version 4.5, this is the default setting
-dontskipnonpubliclibraryclasses
-dontskipnonpubliclibraryclassmembers

#Preverification is irrelevant for the dex compiler and the Dalvik VM, so we can switch it off with the -dontpreverify option.
-dontpreverify

#Specifies to write out some more information during processing. If the program terminates with an exception, this option will print out the entire stack trace, instead of just the exception message.
-verbose

#The -optimizations option disables some arithmetic simplifications that Dalvik 1.0 and 1.5 can't handle. Note that the Dalvik VM also can't handle aggressive overloading (of static fields).
#To understand or change this check http://proguard.sourceforge.net/index.html#/manual/optimizations.html
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

#To repackage classes on a single package
#-repackageclasses ''

#Uncomment if using annotations to keep them.
#-keepattributes *Annotation*

#Keep classes that are referenced on the AndroidManifest
-keep public class * extends android.app.Activity
#-keep public class * extends android.app.TabActivity { *; }
#-keep public class * extends android.widget.TabHost  { *; }
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

#To maintain custom components names that are used on layouts XML.
#Uncomment if having any problem with the approach below
#-keep public class custom.components.package.and.name.**

#To remove debug logs:
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** v(...);
    public static *** w(...);
}

#To avoid changing names of methods invoked on layout's onClick.
# Uncomment and add specific method names if using onClick on layouts
#-keepclassmembers class * {
# public void onClickButton(android.view.View);
#}

#Maintain java native methods 
-keepclasseswithmembernames class * {
    native <methods>;
}

#To maintain custom components names that are used on layouts XML:
-keep public class * extends android.view.View {
    public <init>(android.content.Context);
}
-keep public class * extends android.view.View {
    public <init>(android.content.Context, android.util.AttributeSet);
}
-keep public class * extends android.view.View {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

#Maintain enums
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

#To keep parcelable classes (to serialize - deserialize objects to sent through Intents)
-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

#Keep the R
-keepclassmembers class **.R$* {
    public static <fields>;
}

###### ADDITIONAL OPTIONS NOT USED NORMALLY

#To keep callback calls. Uncomment if using any
#http://proguard.sourceforge.net/index.html#/manual/examples.html#callback
#-keep class mypackage.MyCallbackClass {
#   void myCallbackMethod(java.lang.String);
#}

#Uncomment if using Serializable 
#-keepclassmembers class * implements java.io.Serializable {
#    private static final java.io.ObjectStreamField[] serialPersistentFields;
#    private void writeObject(java.io.ObjectOutputStream);
#    private void readObject(java.io.ObjectInputStream);
#    java.lang.Object writeReplace();
#    java.lang.Object readResolve();
#}
##---------------End: proguard configuration common for all Android apps ----------

#Keep classes that are sent across the wire as JSON
-keep public class se.speedup.provider.sync.authentication.CustomerAuthentication  { *; }
-keep public class se.speedup.demo.workorder.model.ObjectEntries { *; }
-keep public class se.speedup.demo.workorder.model.ObjectPropertyValue { *; }
-keep public class se.speedup.demo.workorder.model.FileInfo { *; }
-keep public class se.speedup.demo.workorder.model.PhotoInfo { *; }

-keep public class se.speedup.demo.workorder.model.** { *; }
-keep public class * implements se.speedup.util.market.NonObfuscatable

#-keep public class se.speedup.fastinspec.authentication.AccountActivity { *; }
#-keep public class se.speedup.errorreport.utils.GsonUserInfo { *; }
#-keep public class se.speedup.errorreport.utils.GsonPhotoInfo { *; }
#-keep public class se.speedup.provider.masterdata.MasterdataDataProvider { *; }
#-keep public class se.speedup.util.accounts.CoreAccountConstants { *; }
#-keep public class se.speedup.util.accounts.** { *; }
#-keep public class se.speedup.provider.masterdata.** { *; }
#-keep public class se.speedup.fastinspec.authentication.** { *; }
#-keep public class se.speedup.errorreport.utils.** { *; }
#-keep public class se.speedup.util.networkoperations.** { *; }

#===
#-keep public class se.speedup.demo.workorder.model.*
#-keep public class se.speedup.provider.sync.*
#-keep public class se.speedup.provider.sync.gson.*
#-keep public class se.speedup.provider.sync.account.*
#-keep public class se.speedup.provider.sync.authentication.*
#-keep public class se.speedup.errorreport.utils.gson.*
#-keep public class se.speedup.fastinspec.authentication.*
#=== 
#-keep public class se.speedup.demo.workorder.model.** { *; }
#-keep public class se.speedup.provider.sync.** { *; }
#-keep public class se.speedup.provider.sync.gson.** { *; }
#-keep public class se.speedup.provider.sync.account.** { *; }
#-keep public class se.speedup.provider.sync.authentication.** { *; }
#-keep public class se.speedup.errorreport.utils.gson.** { *; }
#-keep public class se.speedup.fastinspec.authentication.** { *; }

##---------------Begin: used in stack trace  ----------
-printmapping out.map
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable
##---------------End: used in stack trace  ----------

##---------------Begin: proguard configuration for Gson  ----------
# Gson uses generic type information stored in a class file when working with fields. Proguard
# removes such information by default, so configure it to keep all of it.
-keepattributes Signature

# Gson specific classes
-keep class sun.misc.Unsafe { *; }
#-keep class com.google.gson.stream.** { *; }

# Application classes that will be serialized/deserialized over Gson
-keep class com.google.gson.examples.android.model.** { *; }

##---------------End: proguard configuration for Gson  ---------- 
```

and the project.properties:

```
android.library.reference.1=..\\ObjectModuleDataProvider
proguard.config=proguard.cfg
# Project target.
target=Google Inc.:Google APIs:17
android.library.reference.2=../SherlockLibrary 
```

Can you figure out what the problem is?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:02:22.327

这是一个 ProGuard 错误，未链接到您的密钥库。

[ProGuard](http://developer.android.com/tools/help/proguard.html)是一种在编译后对代码进行压缩、混淆和优化的工具，但可能难以正确配置

从您的 logcat 看来，您使用的库似乎不适合 Android，因为它使用 Android 未提供的类 ( `javax.microedition.io.*`) 并复制了框架 ( `org.xmlpull.v1.*`)已经提供的一些类

检查您的应用程序是否在没有 proguard 的情况下打包运行。如果是，您将需要更正`proguard-project.txt`文件中的 proguard 配置。如果没有，您需要找到另一个库，或者修改您正在使用的库以使其与 android 兼容

# javascript - Ember.js get nested resources attributes from parent

> ID：14833044
> 
> 赞同：2
> 
> 时间：2013-02-12T12:53:33.087
> 
> 标签：javascript, ember.js, ember-data

I have these models:

```
TravelClient.Tour = DS.Model.extend({
  title: DS.attr('string'),
  description: DS.attr('string'),
  seats: DS.attr('number'),
  takenSeats: DS.hasMany('TravelClient.TakenSeat', {embedded:'always'})

  TakenSeats: function() {
    console.log(this.get('takenSeats').toArray())
  }.property('takenSeats')
});

TravelClient.TakenSeat = DS.Model.extend({
  tour: DS.belongsTo('TravelClient.Tour'),
  number: DS.attr('number')
}); 
```

JSON looks like this:

```
{
  "tours": [
    {
      "id": "5110e8b5a8fefe71e0000197",
      "title": "qui deserunt dolores",
      "description": "Id velit nihil.",
      "seats": 12,
      "taken_seats": [
        {
          "id": "5110e8b5a8fefe71e0000196",
          "number": "5"
        },
        {
          "id": "5110e8b5a8feffffe0000196",
          "number": "2"
        }]
} 
```

But yeah, when I do `console.log(this.get('takenSeats').toArray()` in Tour model's method, it returns `Uncaught TypeError: Cannot call method '_create' of undefined`, so, it seems that takenSeats did not load with parent model. What's wrong?

**UPDATE**

added tour_id to JSON, but now, when I want to use calculated property:

```
 freeSeats: function() {
    var seats = this.get('seats');
    var takenSeats = this.get('takenSeats');
    if (takenSeats) {
      return (seats - takenSeats.length);
    }
    else {
      return seats;
    }
  }.property('seats', 'takenSeats') 
```

takenSeats is undefined.

**UPDATE 2:**

```
TravelClient.RESTSerializer = DS.RESTSerializer.extend({
  init: function() {
    this._super();

    this.map('TravelClient.Tour',{
      images:{embedded:'always'},
      options:{embedded:'always'},
      takenSeats:{embedded:'always'}
    });
  }
});

TravelClient.CUSTOMAdapter = DS.RESTAdapter.extend({
  bulkCommit: false,
  serializer: TravelClient.RESTSerializer.create(),
  url: "http://192.168.1.27:3000",    
  buildURL: function(record, suffix) {
    var s = this._super(record, suffix);
    return s + ".json";
  }
});

TravelClient.Store = DS.Store.extend({
  revision: 11,
  adapter: TravelClient.CUSTOMAdapter.create()
});

TravelClient.store = TravelClient.Store.create(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:41:18.283

计算`TakenSeats`属性被视为一个类，因为它是大写的。在嵌入式加载旁边，必须进行不同的配置。像这样：这样`dirty`当 a`takenseat`改变时，旅游对象就变成了。

```
DS.RESTAdapter.map('TravelClient.Tour', {
    takenSeats: { embedded: 'always' },
}); 
```

或者：这样旅游就不会变成`dirty`.

```
DS.RESTAdapter.map('TravelClient.Tour', {
    takenSeats: { embedded: 'load' },
}); 
```

在初始化 Store 和 Adapter 之前执行此操作。这将使计算属性变得不必要。你可以这样做`tour.get('takenSeats')`；

哦，您不必再指定该类型是嵌入的。数组中的 id`taken_seats`链接回`tour`被调用的需要`tour_id`。

```
{
  "tours": [{
    "id": "5110e8b5a8fefe71e0000197",
    "taken_seats": [{
      "id": "5110e8b5a8fefe71e0000196",
      "tour_id": "5110e8b5a8fefe71e0000197"
      "number": "5"
    }]
  }]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T06:05:00.637

我有一个类似的问题。ember-model 不映射嵌套对象。

您的 JSON 输出当前包含嵌套在`tours`根目录下的所有数据。

如果您可以访问 API，那么我建议您尝试删除根，否则考虑使用您的作为主要对象，然后从那里抓取所有嵌套对象。

而不是这个：

```
"tours": [{
    "id": "5110e8b5a8fefe71e0000197",
    "taken_seats": [{
      "id": "5110e8b5a8fefe71e0000196",
      "tour_id": "5110e8b5a8fefe71e0000197"
      "number": "5"
    }]
  }] 
```

让它看起来像这样：

```
 [{
    "id": "5110e8b5a8fefe71e0000197",
    "taken_seats": [{
      "id": "5110e8b5a8fefe71e0000196",
      "tour_id": "5110e8b5a8fefe71e0000197"
      "number": "5"
    }]
  }] 
```

可能我的语法不正确，但是这个类似的想法对我有用。

# opencv - How to estimate 2D similarity transformation (linear conformal, nonreflective similarity) in OpenCV?

> ID：14833049
> 
> 赞同：4
> 
> 时间：2013-02-12T12:53:46.977
> 
> 标签：opencv, image-processing, computer-vision, affinetransform, homography

I'm trying to search a specific object in input images by matching SIFT descriptors and finding the transformation matrix by RANSAC. The object can only be modified in scene by similarity transform in 2D space (scaled, rotated, translated), so I need to estimate 2x2 transform matrix instead of 3x3 homography matrix in 3D space. How can I achieve this in OpenCV?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T13:44:34.593

可以使用[estimateRigidTransform](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=estimaterigidtransform#Mat%20estimateRigidTransform%28InputArray%20src,%20InputArray%20dst,%20bool%20fullAffine%29)（不知道是不是RANSAC，代码在[http://code.opencv.org/projects/opencv/repository/revisions/2.4.4/entry/modules/video/src/lkpyramid.cpp](http://code.opencv.org/projects/opencv/repository/revisions/2.4.4/entry/modules/video/src/lkpyramid.cpp) RANSAC 在其评论中说），第三个参数设置为`false`以获得缩放+旋转+平移：

```
#include <vector>
#include <iostream>
#include "opencv2/video/tracking.hpp"

int main( int argc, char** argv )
{
    std::vector<cv::Point2f> p1s,p2s;

    p1s.push_back(cv::Point2f( 1, 0));
    p1s.push_back(cv::Point2f( 0, 1));
    p1s.push_back(cv::Point2f(-1, 0));
    p1s.push_back(cv::Point2f( 0,-1));

    p2s.push_back(cv::Point2f(1+sqrt(2)/2, 1+sqrt(2)/2));
    p2s.push_back(cv::Point2f(1-sqrt(2)/2, 1+sqrt(2)/2));
    p2s.push_back(cv::Point2f(1-sqrt(2)/2, 1-sqrt(2)/2));
    p2s.push_back(cv::Point2f(1+sqrt(2)/2, 1-sqrt(2)/2));

    cv::Mat t = cv::estimateRigidTransform(p1s,p2s,false);

    std::cout << t << "\n";

    return 0;
} 
```

使用 OpenCV 2.4.4 编译和测试。输出是：

```
[0.7071067988872528, -0.7071067988872528, 1.000000029802322;
  0.7071067988872528, 0.7071067988872528, 1.000000029802322] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T16:40:10.893

您可以使用 opencv 查找点集之间的仿射变换，这比您描述的情况（称为相似变换）稍微更一般，因为它也描述了形状的剪切变换。

可以使用函数来执行`getAffineTransform(InputArray src, InputArray dst)`。这需要两组三个点并计算它们之间的仿射变换。

# android - Android webview screenshot white border

> ID：14833051
> 
> 赞同：1
> 
> 时间：2013-02-12T12:53:57.110
> 
> 标签：android, webview, bitmap, png, android-webview

i followed this link to screenshot my webview completely. It works fine. But I have an issue. The screenhot that I get from the webview contains white spaces on the top and bottom of the picture? How do I get rid of this? Kindly let me know.

This is the code that I've used for capturing from webview. IF YOU LOOK PROPERLY THERE IS WHITESPACE BOTH AT THE BOTTOM AND TOP PARTS OF THE IMAGE.

```
 public static String saveCapturedImageToSdCard() {

        Picture picture = WebViewActivity.sWebViewEx.capturePicture();
        Bitmap  b = Bitmap.createBitmap( picture.getWidth(),
        picture.getHeight(), Bitmap.Config.ARGB_8888);
        File file = null;
        Canvas c = new Canvas( b );

        picture.draw( c );
//        FileOutputStream fos = null;
        try {
            file = new File(Environment.getExternalStorageDirectory()+"/"+"temp.png");
            if(file != null && !file.exists())
                file.createNewFile();
            // write the bytes in file
            FileOutputStream fos = new FileOutputStream(file);
            fos = new FileOutputStream(file);
                if ( fos != null )
                {
                    b.compress(Bitmap.CompressFormat.PNG, 100, fos);

                    fos.close();
                }
            }
       catch( Exception e )
       {

       }
        return file.getPath().toString();
} 
```

This is the image that I get from the webview:

![Screenshot image](../Images/2d801f996257d1df0a7aba7bb20dc615.png)

My XML is:

```
<WebView
        android:id="@+id/webview"
        android:layout_below="@id/linearlayout_topbuttons"
        android:layout_above="@id/gallery_webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:overScrollMode="never"
        android:fitsSystemWindows="true"
        android:background="@android:color/transparent"
        android:layout_centerInParent="true"
        /> 
```

# html - How to make an HTML grid which resizes to fit page width?

> ID：14833056
> 
> 赞同：0
> 
> 时间：2013-02-12T12:54:06.873
> 
> 标签：html, css

I have a variable number of links I want to write to a page programatically. I would rather not have a single long list, but tabulate the links in one or more columns. However I don't want to force a table with a specific number of columns... rather I want to specify the column width (or let each column auto-fit to the widest element).

Is this achievable using regular HTML/CSS? For reference I'm doing this in C# (.NET2) but if anyone wants a bash at code, any pseudo is fine - input is simply an array/list of strings I want to write to the page.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:07:35.057

您可以使用*内联*列表。考虑一个水平列表，其中每个项目都有固定的宽度。

```
link1.....link2.....link3.....link4.....
link5.....link6.....link7.....link8.....
link9.....link10....link11.... 
```

等等。您只需将列表 ( `ul`) 内联，然后将每个项目 ( `li`) 设置为固定宽度。

这是一个使用 Twitter Bootstrap 的工作演示（概念相同）：http: [//jsfiddle.net/FXkYr/](http://jsfiddle.net/FXkYr/)

**如果您不想使用 Twitter Bootstrap**，这里是您需要使用的相关 HTML 和 CSS：

HTML：

```
<ul>
    <li><a href="#">link1</a></li>
    <li><a href="#">link2</a></li>
    <li><a href="#">link3</a></li>
</ul> 
```

CSS：

```
ul {
  margin-left: 0;
  list-style: none;
}

li {
  width: 100px;
  display: inline-block;
  padding-left: 5px;
  padding-right: 5px;
  /* The following two lines is because IE is funny... */
  *display: inline;
  *zoom: 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:05:08.117

这是您可以做到的一种方法：http: [//jsfiddle.net/vYtBM/](http://jsfiddle.net/vYtBM/)

公平起见，有很多不同的方法可以做到。通过每个 LI 内带有锚标记的无序列表将是另一种方式。

```
<div class="container">
    <a href="#">Link #1</a>
    <a href="#">Link #2</a>
    <a href="#">Link #3</a>
    <a href="#">Link #4</a>
    <a href="#">Link #5</a>
    <a href="#">Link #6</a>
    <a href="#">Link #7</a>
    <a href="#">Link #8</a>
    <a href="#">Link #9</a>
</div>

.container {
    overflow: hidden;
    width:960px;
}

.container a {
    display: inline-block;
    width: 440px;
    padding: 10px;
    background: #ccc;
    margin: 0 20px 20px 0;
    float: left;
} 
```

# php - Facebook app that posts to all its users in a specific time (php)

> ID：14833060
> 
> 赞同：1
> 
> 时间：2013-02-12T12:54:11.890
> 
> 标签：php, mysql, facebook, facebook-graph-api

It's my first question on stackoverflow. I made this application and it works fine for posting a photo to a user's wall once he visit the app page, **But what I really want is to post many photos in a scheduled way (at a specific time like 12 Feb 2013 10:00 pm) to his wall and all users wall**

I made a MySQL database that contains a table for users' ID, and a table for posts' info and time.

What can I do next?

```
include ("../facebook/facebook.php") ; 

$facebook = new Facebook(array(
  'appId'  =>  APP_ID ,
  'secret' =>  APP_SECRET ,
  'fileUpload' => true,
));
$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if ($user) {
    $facebook->setFileUploadSupport(true);

            $photo ="images/image1.jpg" ; 
        $message= "My message ";
            $ret_obj = $facebook->api('/me/photos', 'post', array(
                                             'source' => '@' . $photo,
                                             'message' => $message,
                                             )
                                          );

  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(array(
  'scope' => 'read_stream, publish_stream, photo_upload')  
  );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:10:51.977

@kareem：简单来说，您可以有一个循环语句。

```
 for($i=0;$i<$upperLimit;$i++)
 {
   $photo ="images/image".$i."jpg" ; 
    $message= "My message ";
        $ret_obj = $facebook->api('/me/photos', 'post', array(
                                         'source' => '@' . $photo,
                                         'message' => $message,
                                         )
                                      );
  } 
```

$upperLimit 是 limit ，直到您计划将图像发布到用户墙上。

注意：您可以在某个位置拥有一组图像**image1...imagen**，这样您就可以在用户墙上发布时循环图像

如果需要，您可以在 for 循环中添加一个计时器以延迟一些时间

# ssrs-2008 - SSRS 按可用的最后日期排序

> ID：14833063
> 
> 赞同：2
> 
> 时间：2013-02-12T12:54:18.627
> 
> 标签：ssrs-2008, reporting-services

我有包含名称、描述和消息的列。为了在 ssrs 中查看这些列，应用了日期过滤器。但是，当日期很短时，我会收到错误消息。错误：由于达到资源限制，提供程序终止了执行。我的问题是：是否可以将数据过滤器减少到数据库中存在的最后日期。这样，数据过滤器可以应用于数据库中最后一个存在的日期，然后将消除错误。

提前致谢。

## 编辑1：

时间戳 | 姓名 | 说明 | 留言 |

2011 年 11 月 12 日上午 10:50:51 | EBKBH 2349| 泵|功能性|

2012 年 1 月 8 日上午 10:50:51 | ZDFWH 2989| 传感器 | 关闭 |

假设 1/08/12 是数据库中的最后一个日期，但在过滤器中我选择了 01/01/13 - 02/02/13 之间的日期，然后应用程序运行了很长时间，然后它给了我我之前提到的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:06:18.070

当您可以在 SSRS 中选择多个数据源时，我不明白您为什么要执行 Openquery。

我会做一些比这更简单的事情。

1.  为您的表格日期设置一个数据源，如果您的实际数据在其他地方，则设置另一个数据源。
2.  设置一个数据集，将其称为“MaxDate”，用于最后一个日期，例如：

    ```
    Select Max(Date) as MaxDate
    From (tableName) 
    ```

    这为您提供了听起来像您想要的整个表格的最大日期。

3.  在 2 中设置获取此数据集的参数。通过选择参数以使用“从查询中获取值”。选择它以使用 MaxDate 作为 id 和标签。

4.  现在为您的主查询设置一个数据集，但是您喜欢并执行如下谓词：

    ```
    Where dt between @Start and @MaxDate 
    ```

5.  You can set up the @Start parameter with whatever you want for the date values but the @MaxDate is bound to a max date you specified.

** Optional: You set another Date field as @End and just default the value of the @MaxDate to it if you want the flexibility to not HAVE TO use the @MaxDate. You would simply create a third variable, @End, and then in the 'Default Values' pane choose 'specify values'. Hit the 'Fx' (expression) button, and then choose Parameters!MaxDate.Value and this would DEFAULT it to the max date. But you could choose a prior date as well.

I usually set up most of my reports up with defaults for dates from a shared dataset to keep them all running on set date ranges.

# php - var_dump($_FILES) result in blank ["type"] for specific image fiile

> ID：14833065
> 
> 赞同：3
> 
> 时间：2013-02-12T12:54:32.947
> 
> 标签：php, file-upload

I have an image taken from an older digital camera, around 4MB in size and type "image/jpeg".

When I submit it through a form and look at `var_dump($_FILES);` the array is as follows:

```
array(1) { 
    ["userfile"]=> array(5) { 
        ["name"]=> string(12) "IMGP0004.JPG" 
        ["type"]=> string(0) "" 
        ["tmp_name"]=> string(0) "" 
        ["error"]=> int(1) 
        ["size"]=> int(0) 
    }
} 
```

I'm wondering if there is a reason it isn't picking up the file type and also detecting file size as 0\. Other files echo out all correct information.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T12:56:58.367

该`error`属性设置为`1`，这意味着

> 值：1；上传的文件超过了 php.ini 中的 upload_max_filesize 指令。

错误代码在[这里](http://www.php.net/manual/en/features.file-upload.errors.php)解释。

# android - autofocus in android jellybean

> ID：14833067
> 
> 赞同：0
> 
> 时间：2013-02-12T12:54:35.300
> 
> 标签：android, camera, autofocus

I am working on a small android image processing project.

Earlier I was testing my code on Samsung Galaxy Ace and the code was fine.

Now I have got a new phone Samsung Galaxy grand which has 8 megapixel camera and Android jellybean.

The image quality has reduced very much. It seems the camera isn't autofoccsing.

I tried many tutorials on auto focus but the image quality remains the same

Screenshot: [http://wikisend.com/download/527870/device-2013-02-12-181021.png](http://wikisend.com/download/527870/device-2013-02-12-181021.png)

```
public class TrackLaser extends Activity {
      private Preview mPreview;
        private DrawOnTop mDrawOnTop;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.onCreate(savedInstanceState);

        // Hide the window title.
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        // Create our Preview view and set it as the content of our activity.
        // Create our DrawOnTop view.
        mDrawOnTop = new DrawOnTop(this);
        mPreview = new Preview(this, mDrawOnTop);
                setContentView(mPreview);
        addContentView(mDrawOnTop, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    }

}
@SuppressLint("DrawAllocation")
class DrawOnTop extends View {
    Bitmap mBitmap;
    Paint mPaintBlack;
    Paint mPaintYellow;
    Paint mPaintRed;
    Paint mPaintWhite;
    Paint mPaintGreen;
    Paint mPaintBlue;
    byte[] mYUVData;
    int[] mRGBData;
    int x,y;
    int mImageWidth, mImageHeight;

    public DrawOnTop(Context context) {
        super(context);

                mBitmap = null;
        mYUVData = null;
        mRGBData = null;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        //
        }  
    // end onDraw method

    static public void decodeYUV420SP(int[] rgb, byte[] yuv420sp, int width, int height) {
        //    
    } 

// ----------------------------------------------------------------------

class Preview extends SurfaceView implements SurfaceHolder.Callback {
    SurfaceHolder mHolder;
    Camera mCamera;
    DrawOnTop mDrawOnTop;
    boolean mFinished;

    Preview(Context context, DrawOnTop drawOnTop) {
        super(context);

        mDrawOnTop = drawOnTop;
        mFinished = false;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);

    }

    public void surfaceCreated(SurfaceHolder holder) {
        mCamera = Camera.open();

        try {
           mCamera.setPreviewDisplay(holder);

           mCamera.autoFocus(myAutoFocusCallback);  
           // Preview callback used whenever new viewfinder frame is available
           mCamera.setPreviewCallback(new PreviewCallback() {
              public void onPreviewFrame(byte[] data, Camera camera)
              {
                  if ( (mDrawOnTop == null) || mFinished )
                      return;

                  if (mDrawOnTop.mBitmap == null)
                  {
                      // Initialize the draw-on-top companion
                        Camera.Parameters params = camera.getParameters();
                      mDrawOnTop.mImageWidth = params.getPreviewSize().width;
                      mDrawOnTop.mImageHeight = params.getPreviewSize().height;
                      mDrawOnTop.mBitmap = Bitmap.createBitmap(mDrawOnTop.mImageWidth, 
                      mDrawOnTop.mImageHeight, Bitmap.Config.RGB_565);
                      mDrawOnTop.mRGBData = new int[mDrawOnTop.mImageWidth * mDrawOnTop.mImageHeight]; 
                      mDrawOnTop.mYUVData = new byte[data.length];                    
                  }

                  // Pass YUV data to draw-on-top companion
                  System.arraycopy(data, 0, mDrawOnTop.mYUVData, 0, data.length);
                  mDrawOnTop.invalidate();
              }
           });
        } 
        catch (IOException exception) {
            mCamera.release();
            mCamera = null;
        }
    }       

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        // Because the CameraDevice object is not a shared resource, it's very
        // important to release it when the activity is paused.
        mFinished = true;
        mCamera.setPreviewCallback(null);
        mCamera.stopPreview();
        mCamera.release();
        mCamera = null;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);

        mCamera.setParameters(parameters);
       mCamera.startPreview();
       mCamera.autoFocus(myAutoFocusCallback);

    }
    AutoFocusCallback myAutoFocusCallback = new AutoFocusCallback(){

          public void onAutoFocus(boolean arg0, Camera arg1) {
              Log.w("myApp", "AUTOFOCUSSED");
          }};

} 
```

# c# - Why doesn't C# allow implicit reference conversions from an interface-type to class-type?

> ID：14833069
> 
> 赞同：3
> 
> 时间：2013-02-11T20:02:23.363
> 
> 标签：c#

Given:

```
public class T 
{
    public static implicit operator T(R r)
    {
        return new T();
    }
}

public class S: R { }
public class R { } 
```

If R were an interface, the code would not compile:

> user-defined conversions to or from an interface are not allowed

Interfaces are essentially public/internal classes with all public members and no implementation. So what is the purpose of having this restriction?

# iphone - NSGenericException'，原因：'无法在视图上安装约束

> ID：14833070
> 
> 赞同：29
> 
> 时间：2013-02-12T12:54:44.347
> 
> 标签：iphone, objective-c, ios6, xcode4.5

由于未捕获的异常“NSGenericException”而终止应用程序

> 由于未捕获的异常“NSGenericException”而终止应用程序，原因：“无法在视图上安装约束。约束是否引用了视图子树之外的内容？那是违法的。约束：视图：；层 = ; 内容偏移：{0, 0}>'

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-12T13:12:25.840

您需要在两个视图的“更高”上安装约束。一个好的，一般的方法是这样的：

```
NSLayoutConstraint* constraint = ...;
NSView* firstView = constraint.firstItem;
NSView* secondView = constraint.secondItem;    
[[firstView ancestorSharedWithView: secondView] addConstraint: constraint]; 
```

请注意：这里最好记住约束属性是在添加它们的视图的上下文中评估的。例如，viewA 的 NSLayoutAttributeLeft 的值，对于安装在 viewB 上的约束，在 viewB 的坐标空间中被解释。对于仅引用兄弟视图或其父视图的约束，这一事实在很大程度上无关紧要，但没有限制约束不能引用不是兄弟视图或直接父视图的两个视图。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-31T04:34:08.373

与neoneye类似，由于删除了带有约束的子视图，我得到了这个。但是，我有一个定位父视图的约束，如果我调用它就会被删除，`[self.view removeConstraints:self.view.constraints];`而是我做了这个更改，

原始代码：

```
for (UIView *subview in [view subviews]) {
    [subview removeFromSuperview];
} 
```

已修复以删除对子视图的约束：

```
NSMutableArray * constraints_to_remove = [ @[] mutableCopy] ;
for( NSLayoutConstraint * constraint in view.constraints) {
    if( [view.subviews containsObject:constraint.firstItem] ||
       [view.subviews containsObject:constraint.secondItem] ) {
        [constraints_to_remove addObject:constraint];
    }
}
[view removeConstraints:constraints_to_remove];

for (UIView *subview in [view subviews]) {
    [subview removeFromSuperview];
} 
```

**更新**：所以我再次遇到这个错误 - 这是由于这次删除了一个视图。添加了一个功能以干净地删除视图：

```
void cleanRemoveFromSuperview( UIView * view ) {
  if(!view || !view.superview) return;

  //First remove any constraints on the superview
  NSMutableArray * constraints_to_remove = [NSMutableArray new];
  UIView * superview = view.superview;

  for( NSLayoutConstraint * constraint in superview.constraints) {
    if( constraint.firstItem == view ||constraint.secondItem == view ) {
      [constraints_to_remove addObject:constraint];
    }
  }
  [superview removeConstraints:constraints_to_remove];

  //Then remove the view itself.
  [view removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-29T16:42:40.237

我在 iOS6 上遇到了这个错误。就我而言，这是因为我在没有首先删除约束的情况下开始删除子视图。

```
// I had forgotten to remove constraints first. This caused the crash.
[self.view removeConstraints:self.view.constraints];

NSArray *subviews = self.view.subviews;
for (UIView *subview in subviews) {
    [subview removeFromSuperview];
}

[self addYourSubviewsHere]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-24T18:45:50.253

我使用 UIPickerView 遇到了这个问题，比如 UITextField 的输入（使用 Autolayout）。当我推送另一个视图控制器并因此使用选择器将其弹出到视图控制器时，应用程序崩溃。我在 UIPickerViewController 中找到了以下解决方案：

```
-(void)viewWillAppear:(BOOL)animated{

    [self.pickerView removeFromSuperview];
    [self.pickerView setTranslateAutoresizingMaskIntoContraints:YES];
    [self.view addSubview];

} 
```

您还可以在从超级视图中删除后设置 UIPickerViewPosition。我希望这可以帮助你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-18T01:09:39.570

我发现添加这一行代码解决了可可 ScrollView 的这个问题。

```
[scrollView setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

我认为某些视图会在运行时添加约束，因此当您通过目标 c 添加自己的视图时会发生冲突，因此您需要禁用此行为...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-04T08:44:28.740

同样的错误，这里有不同的解决方案：

在添加新视图并忘记在界面构建器中关闭`Use Auto Layout`它后，我在 iOS 6 上启动我的应用程序时遇到此错误...我讨厌它没有标准设置默认情况下**不**使用自动布局新视图.. .

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-21T12:44:13.603

我遇到了同样的崩溃，结果证明这是一个带有约束乘子值的浮点精度问题。我将所有约束乘数转换为不错的浮点值（例如 0.375 而不是 0.35）并修复了崩溃。

[AutoLayout：removeFromSuperview / removeConstraints 抛出异常并严重崩溃](https://stackoverflow.com/questions/17688370/autolayout-removefromsuperview-removeconstraints-throws-exception-and-crashes)

# perl - Perl 将行添加到多维散列中

> ID：14833074
> 
> 赞同：1
> 
> 时间：2013-02-12T12:55:01.787
> 
> 标签：perl, hashmap

您好，我想拆分一条线并将值添加到多维哈希中。这就是线条的样子：

```
__DATA__
49839382;Test1;bgsae;npvxs
49839384;Test2;bgsae;npvxs
49839387;Test3;bgsae;npvxs 
```

所以我现在要做的是：

```
my %prefix = map { chomp; split ';' } <DATA>; 
```

但现在我只能通过以下方式访问 Test1：

```
print $prefix{"49839382"} 
```

但是我怎样才能将 bgsae 添加到哈希中以便我可以访问

```
$prefix{"49839382"}{"Test1"} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:18:10.927

你想建立什么结构？

```
use Data::Dumper;
my %prefix = map { chomp (my @fields = split /;/); $fields[0] => { @fields[1 .. $#fields] }  } <DATA>;
print Dumper \%prefix; 
```

输出：

```
$VAR1 = {
          '49839384' => {
                          'Test2' => 'bgsae',
                          'npvxs' => undef
                        },
          '49839382' => {
                          'Test1' => 'bgsae',
                          'npvxs' => undef
                        },
          '49839387' => {
                          'npvxs' => undef,
                          'Test3' => 'bgsae'
                        }
        }; 
```

还是您需要更深的哈希？

```
my %prefix;
for (<DATA>) {
    chomp;
    my $ref = \%prefix;
    for (split /;/) {
        warn "[$_]";
        $ref->{$_} = {};
        $ref = $ref->{$_};
    }
} 
```

回报：

```
$VAR1 = {
      '49839384' => {
                      'Test2' => {
                                   'bgsae' => {
                                                'npvxs' => {}
                                              }
                                 }
                    },
      '49839382' => {
                      'Test1' => {
                                   'bgsae' => {
                                                'npvxs' => {}
                                              }
                                 }
                    },
      '49839387' => {
                      'Test3' => {
                                   'bgsae' => {
                                                'npvxs' => {}
                                              }
                                 }
                    }
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:58:38.573

我不知道你需要这些数据做什么，但猜测你想要更多这样的东西。

它构建了一个数组散列，使用第一个字段作为数据的键，其余三个在一个数组中作为值。因此，您可以访问测试编号`$data{'49839382'}[0]`等。

```
use strict;
use warnings;

my %data = map {
  chomp;
  my @fields = split /;/;
  shift @fields => \@fields;
} <DATA>;

use Data::Dumper;
print Data::Dumper->Dump([\%data], ['*data']);

__DATA__
49839382;Test1;bgsae;npvxs
49839384;Test2;bgsae;npvxs
49839387;Test3;bgsae;npvxs 
```

**输出**

```
%data = (
      '49839384' => [
                      'Test2',
                      'bgsae',
                      'npvxs'
                    ],
      '49839382' => [
                      'Test1',
                      'bgsae',
                      'npvxs'
                    ],
      '49839387' => [
                      'Test3',
                      'bgsae',
                      'npvxs'
                    ]
    ); 
```

# c# - 为什么通过 WinNT 协议删除本地组会导致 NotImplementedException？

> ID：14833078
> 
> 赞同：1
> 
> 时间：2013-02-12T12:55:14.310
> 
> 标签：c#, .net, directoryservices, directoryentry

想象以下代码示例：

```
void RemoveGroup(string groupName)
{
    string path = string.Format("WinNT://domain/myServer/{0}", groupName);
    using (DirectoryEntry entry = new DirectoryEntry(path, @"domain\serviceAccount", @"********"))
    {
        using (DirectoryEntry parent = rootEntry.Parent)
        {
            parent.Children.Remove(entry);

            // Save changes.
            parent.CommitChanges();
        }
    }
} 
```

为什么此代码示例在 LDAP 协议上工作，但在 WinNT 上抛出 NotImplementedException？在“CommitChanges”行上引发异常。

有人有线索吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:42:29.923

显然我做错了...... CommitChanges 可以安全地省略，更改保存在处置中。为了将来参考，这是适当的解决方案：

```
void RemoveGroup(string groupName)
{
    string path = string.Format("WinNT://domain/myServer/{0}", groupName);
    using (DirectoryEntry entry = new DirectoryEntry(path, @"domain\serviceAccount", @"********"))
    {
        using (DirectoryEntry parent = rootEntry.Parent)
        {
            parent.Children.Remove(entry);
        }
    }
} 
```

# css - 根据孩子的状态将样式应用于父块

> ID：14833079
> 
> 赞同：1
> 
> 时间：2013-02-12T12:55:15.587
> 
> 标签：css, hide, selector, parent-child, is-empty

具有以下块结构：

```
<div class="container">
    <div class="title"></div>
    <div class="subject"></div>
</div> 
```

`.container`如果它的孩子`.subject`是空的，是否可以隐藏（显示：无）a ？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:05:49.553

好吧...您可以尝试伪造它...使标题`position: absolute`和容器集`overflow: hidden;`容器本身只有在您将某些内容放入 .subject 标记时才可见。像这样： [jsfiddle示例](http://jsfiddle.net/EbMZP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:00:14.803

我相信你必须使用javascript来做到这一点。在 jQuery 中：

```
$(".container").each( function() {
    if ( $(this).children('.subject').html() == '' ) {
           $(this).hide();
    }
} ); 
```

示例在：http: [//jsfiddle.net/m5jjs/](http://jsfiddle.net/m5jjs/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:58:45.227

`:empty`如果元素没有节点但你有，则可以使用伪类。不过需要JS。

```
$(".container *") {
   if($.trim($(this).html()).length == 0 && $.trim($(this).text()).length == 0 ) {
     $(".container").css({ "display" : "none" });
   }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:00:59.850

目前在我所知道的任何浏览器中都无法使用纯 CSS。

如果您在项目中已经有 jQuery 依赖项，那么在[CSS 选择器级别 4](http://coding.smashingmagazine.com/2013/01/21/sneak-peek-future-selectors-level-4/)中有一个 jQuery 插件[cssParentSelector polyfill](https://github.com/Idered/cssParentSelector)用于即将到来的*父*选择器。

# android - Amount of Shake on Android phone. I want to detect Amount of shake using Javascript ( As I am using Phonegap)

> ID：14833080
> 
> 赞同：0
> 
> 时间：2013-02-12T12:55:16.510
> 
> 标签：android, jquery, iphone, cordova

I want to grade shaking. eg. Slow shaking Medium Shaking , Fast Shaking. This is to trigger 3 different events.

I want to do this using Javascript as I am using Phonegap.

Is it possible to know frequency of Shake?

Thanks

VP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:29:54.400

PhoneGap 的文档准确地告诉您如何访问加速度计：

[http://docs.phonegap.com/en/1.0.0/phonegap_accelerometer_accelerometer.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_accelerometer_accelerometer.md.html)

使用本网站提供的代码片段，您可以定义不同的偏移量，这些偏移量可分为慢速、中速和快速抖动。通过使用演示代码和您的设备来调整数字，以感受您认为不同 x、y 和 z 轴的加速度是否足以满足您的目的。

# tfs - 以编程方式删除 TFS 分支

> ID：14833083
> 
> 赞同：1
> 
> 时间：2013-02-12T12:55:19.897
> 
> 标签：tfs, tfs-sdk

我想以编程方式删除 TFS 中自动创建的分支。

有一个现有的方法“ICommonStructureService.DeleteBranches”应该可以完成这项工作。我的问题是该方法需要一个参数“string[] nodeUris”，该参数指定要使用“vstfs://...” URI 删除的分支，而我只是不知道如何为我的分支获取它。

我需要的是这样的：

```
var projectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri <myCollectionUrl>));
var cssService = projectCollection.GetService<ICommonStructureService3>();
var project = cssService.GetProjectFromName(<myProjectName>); 
```

但是我怎样才能从那里得到 Branch Uri？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:49:10.483

同时，我找到了解决方案。删除我正在使用的分支

```
versionControl.Destroy(new ItemSpec(myBranchPath, RecursionType.Full), VersionSpec.Latest,  null, DestroyFlags.KeepHistory); 
```

这正是我需要的。versionControl 是 VersionControlServer 类型，必须使用 Team Collection 进行初始化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:34:53.287

删除版本控制中的分支就像删除任何其他版本控制项。您将需要[`Workspace.PendDelete`](http://msdn.microsoft.com/en-us/library/bb139358.aspx)在`Item`.

[您引用](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.server.icommonstructureservice.deletebranches%28v=vs.110%29.aspx)的方法与版本控制完全无关，它是 TFS[通用结构服务](http://msdn.microsoft.com/en-us/library/bb169225.aspx)的一部分，它控制TFS 工作项可以分配到的“[区域和迭代”。](http://msdn.microsoft.com/en-us/library/vstudio/ms181692.aspx)

简而言之，没有办法对通用结构服务执行任何类型的版本控制操作。您可以通过创建 a 来删除分支`Workspace`，`VersionControlServer`挂起删除，然后签入待处理的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T15:01:02.850

我同意 Edward Thomson 使用 Destroy 命令。所以我听从了他的建议，想出了以下方法，

```
public void DeleteBranch(string path)
{
    var vcs = GetVersionControlServer();
    var itemSpec = new ItemSpec(path, RecursionType.Full);
    var itemSpecs = new[] {itemSpec};
    var workSpace = GetOrCreateWorkSpace(vcs);
    try
    {
        workSpace.Map(path, @"c:\Temp\tfs");
        var request = new GetRequest(itemSpec, VersionSpec.Latest);
        workSpace.Get(request, GetOptions.GetAll | GetOptions.Overwrite);
        workSpace.PendDelete(path, RecursionType.Full);
        var pendingchanges = workSpace.GetPendingChanges(itemSpecs);
        workSpace.CheckIn(pendingchanges, "Deleting The Branch");
    }
    finally
    {
        if (workSpace != null)
        {
            workSpace.Delete();
        }
    }
} 
```

如果有一种巧妙的方法来做同样的事情，我很期待。这有点慢，因为它做了太多的事情，

*   创建临时工作区
*   获取所有更改
*   对整个变更集执行删除
*   检查它
*   清理工作区

# c# - 将来自链接的图像存储在 csv 文件 c#

> ID：14833101
> 
> 赞同：0
> 
> 时间：2013-02-12T12:56:20.283
> 
> 标签：c#, image, csv

我有一个 CSV 文件，我正在使用 C# 和我们服务器上的 WSI 服务导入该文件。

该文件包含图像的网址，例如`http://www.website.com/345366.png`等`http://www.website.com/125_dfg676.png`。

如何存储从 CSV 中读取的图像文件 CSV 的第 7 列和第 8 列包含图像 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:02:08.130

您只需要通过一个简单的调用来下载文件。

你会在堆栈上找到很多答案。这正是您需要的：

[在 c# windows 窗体中从 url 下载文件](https://stackoverflow.com/questions/9734305/downloading-a-file-from-url-in-c-sharp-windows-forms)

# scala - PlayFramework 中的控制器内存泄漏？

> ID：14833110
> 
> 赞同：3
> 
> 时间：2013-02-12T12:56:49.640
> 
> 标签：scala, playframework-2.0, playframework-2.1

我有这个非常简单的控制器。

```
package controllers.WebService

import play.api.mvc.{Action, Controller}

object TestLeak extends Controller {
  def index = Action {
    Ok((1 to 100000).mkString)
  }
} 
```

我用浏览器打开它，我系统中的内存消耗为 2516MB。每次我刷新页面内存时，每次刷新都会增加 1-2MB。您可能会说这是浏览器的错，但我从另一台 PC 上点击它并得到相同的结果。ab bench 也证实了这一点。-c 100 -n 1000 以 600mb 启动内存消耗。

**而且内存分配永远不会下降**

使用 System.gc() 解决了这个问题，但是我的性能真的很低。到底是怎么回事？

Akka.future 和 scala.future 和异步也有同样的问题。不包括其他进口或特征。就是你所看到的。

我有这个问题有一段时间了，没有 System.gc() 就无法部署到 Heroku。有什么解决办法吗？

更新实际上 JAVA_OPTS 不被 heroku 使用（我很傻）你必须将它声明给 Procfile

```
web: target/start -Dhttp.port=${PORT} ${JAVA_OPTS} ... 

JAVA_OPTS: -Xmx384m -Xss512k -XX:+UseCompressedOops -Dfile.encoding=UTF8 
```

不是内存消耗永远不会超过 500（heroku 限制）

谢谢大家的时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:54:39.797

我不认为这与游戏有关。在我看来，这似乎是正常行为。JVM 不会在请求后直接收集垃圾，它会自行决定（基于 gc 设置，可以修改）何时收集。您的应用程序是否因为内存不足而崩溃？您应该将 jconsole 附加到它，然后使用大量请求运行 ab，您将看到内存最终被释放。

# java - .switchTo().frame(<'frameId'>); 不使用 HtmlUnit 驱动程序

> ID：14833114
> 
> 赞同：2
> 
> 时间：2013-02-12T12:57:02.340
> 
> 标签：java, selenium, selenium-webdriver, htmlunit

我有点陌生，并且在获取 位于框架中`HtmlUnit`的菜单项时遇到了一些麻烦。 下面的代码对于 FireFox 驱动程序非常有效，而**对于 HtmlUnitDriver 则失败**，`"Setup"`

 **```
 HtmlUnitDriver driver = new HtmlUnitDriver();
   driver.get(fleetWorkURL);

   WebElement usernameElement = driver.findElement(By.name("j_username"));
   usernameElement.sendKeys(username);

   WebElement passwordElement = driver.findElement(By.name("j_password"));
   passwordElement.sendKeys(password);

   WebElement logInButton = driver.findElement(By.className("button_acunia"));
   logInButton.click();

   driver.switchTo().frame("headerFrame");
   WebElement setupMenuItemElement = driver.findElement(By.id("setup"));
   setupMenuItemElement.click();

   // Check the title of the page, should be Fleet Works Setup
   System.out.println("Page title is: " + driver.getTitle());
   driver.close(); 
```

**使用 HtmlUnit 驱动程序时**出错-****

 **```
 Exception in thread "main" org.openqa.selenium.NoSuchFrameException: Unable to locate        frame with name or ID: headerFrame
  Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 15:53:30'
 System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version:  '1.7.0_13'
 Driver info: driver.version: unknown
at org.openqa.selenium.htmlunit.HtmlUnitDriver$HtmlUnitTargetLocator.frame(HtmlUnitDriver.java:908)
at com.yukon.qasetup.xmlService.Example.main(Example.java:46)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

**框架：**

```
 <frameset border="0" rows="0,0,0,0,0,90,*" onunload="leave()"   onload="initMainWindow()">
<frame src="/fleet/html/empty.html" name="refreshTerminalsFrame" style="visibility: hidden; width: 0px; height: 0px; border: 0px;">
    <frame src="/fleet/html/empty.html" name="refreshDriversFrame" style="visibility: hidden; width: 0px; height: 0px; border: 0px;">
<frame src="/fleet/html/empty.html" name="refreshExternalDevicesFrame" style="visibility: hidden; width: 0px; height: 0px; border: 0px;">
<frame src="/fleet/html/empty.html" name="refreshUsersFrame" style="visibility: hidden; width: 0px; height: 0px; border: 0px;">
<frame src="/fleet/html/empty.html" name="refreshCustomersFrame" style="visibility: hidden; width: 0px; height: 0px; border: 0px;">
    <frame src="/fleet/jsp/header/headerFrame.jsp" name="headerFrame" frameborder="0" scrolling="no">   
    <frame src="/fleet/home.do" name="displayFrame" frameborder="0" scrolling="yes">
     </frameset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T10:21:33.757

尝试以下操作：

```
HtmlUnitDriver driver = new HtmlUnitDriver(true); // enable javascript 
```****

# excel - Excel 查找单元格显示######

> ID：14833115
> 
> 赞同：0
> 
> 时间：2013-02-12T12:57:02.357
> 
> 标签：excel, vba

我想找到值溢出其列宽的任何单元格。

查看单元格的属性，我可以看到单元格文本值为####，但 Excel 查找方法似乎不允许我搜索单元格值和单元格公式以外的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:45:53.887

我终于明白了——

```
Set hashrange = .Cells.Find(What:="##", After:=.Cells(.Cells.Count), LookIn:=xlValues, LookAt:= _
xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False _
, SearchFormat:=False)
If Not hashrange Is Nothing Then  
    hashrange.Columns.AutoFit
End If 
```

这不是建议的重复帖子，我所追求的解决方案是在不迭代 vba 中的行或列的情况下查找溢出单元格的最快方法 - 这在大表中太慢（对我来说）。

希望有人觉得这很有用 - 现在在我的应用程序中使用它[Excel 数据库任务](http://leansoftware.net)

非常感谢您的所有回复。

# c++ - 一种存储函数及其（任意类型、任意数量）参数的简洁方法

> ID：14833129
> 
> 赞同：6
> 
> 时间：2013-02-12T12:57:36.407
> 
> 标签：c++, c++11, variadic

对于一个库，我想要一个函数来接受另一个函数及其参数，然后将它们全部存储起来以供以后调用。参数必须允许任何类型的混合，但函数只需要返回 void。像这样的东西：

```
void myFunc1(int arg1, float arg2);
void myFunc2(const char *arg1);
class DelayedCaller
{ ...
public:
    static DelayedCaller *setup(Function func, …);
};

...
DelayedCaller* caller1 = DelayedCaller::setup(&myFunc1, 123, 45.6);
DelayedCaller* caller2 = DelayedCaller::setup(&myFunc2, "A string");

caller1->call(); // Calls myFunc1(), with arguments 123 and 45.6
caller2->call(); // Calls myFunc2(), with argument "A string" 
```

一种方法是让 DelayedCaller::setup() 接受 std::function，并让我的库用户在调用 setup() 之前使用 std::bind()。但是，有没有办法实现 setup() 以便用户不需要自己进行绑定？

**编辑**：DelayedCaller 是一个现有的类。setup() 是我想添加的一个新的静态方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T13:35:36.790

一种可能是使用可变参数模板并[`std::bind()`](http://en.cppreference.com/w/cpp/utility/functional/bind)从`setup()`函数内部调用：

```
#include <iostream>
#include <string>
#include <functional>
#include <memory>

void myFunc1(int arg1, float arg2)
{
    std::cout << arg1 << ", " << arg2 << '\n';
}
void myFunc2(const char *arg1)
{
    std::cout << arg1 << '\n';
}

class DelayedCaller
{
public:
    template <typename TFunction, typename... TArgs>
    static std::unique_ptr<DelayedCaller> setup(TFunction&& a_func,
                                                TArgs&&... a_args)
    {
        return std::unique_ptr<DelayedCaller>(new DelayedCaller(
            std::bind(std::forward<TFunction>(a_func),
                      std::forward<TArgs>(a_args)...)));
    }
    void call() const { func_(); }

private:
    using func_type = std::function<void()>;
    DelayedCaller(func_type&& a_ft) : func_(std::forward<func_type>(a_ft)) {}
    func_type func_;
};

int main()
{
    auto caller1(DelayedCaller::setup(&myFunc1, 123, 45.6));
    auto caller2(DelayedCaller::setup(&myFunc2, "A string"));

    caller1->call();
    caller2->call();

    return 0;
} 
```

输出：

```
123, 45.6
一个字符串

```

返回一个智能指针，例如[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)，而不是返回一个原始指针（或按值返回并避免动态分配。`func_type`如果参数是可移动的，则它是可移动的，或者无论如何复制它可能非常便宜。您可能需要定义移动构造函数和移动赋值运算符，它们是在特定条件下生成的）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T13:08:41.253

您可以使用 lambda 函数来隐藏绑定：

```
#include <functional>

class DelayedCaller : public std::function< void(void) > {
public:
    DelayedCaller(std::function< void(void) > fn)
      : std::function< void(void) >(fn) {}
};

DelayedCaller caller1([]() { myFunc1(123, 45.6); });
DelayedCaller caller2([]() { myFunc2("A string"); });

caller1(); // Calls myFunc1(), with arguments 123 and 45.6
caller2(); // Calls myFunc2(), with argument "A string" 
```

这也为您图书馆的用户提供了更大的灵活性。它们不限于单个函数调用，并且函数可以访问它们在其中创建的原始环境：

```
int x;

DelayedCaller caller3 = [&x]() {
    if (x == 0)
        DoSomething();
    else
        DoSomethingElse();
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:07:50.553

如果您想/能够使用 C++11**未来**库，您可以使用`std::async`

```
#include <future>

auto caller = std::async(myFunc1, 123, 45.6); // Creates a future object.

caller.get(); // Waits for the function to get executed and returns result. 
```

要强制延迟评估，请使用：

```
auto caller = std::async(std::launch::deferred, myFunc1, 123, 45.6); 
```

还有一个优点是函数调用可以在使用多核硬件的不同线程上执行。然而，这可能并不适用于所有情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:29:05.530

如果您唯一关心的是在保留界面的同时隐藏调用站点的参数绑定，请使用可变参数模板

```
class DelayedCaller
{
public:
  template<typename... Args>
  static DelayedCaller* setup(void (functionPtr*)(Args...), Args&&... args)
  {
    return new DelayedCaller(std::bind(functionPtr, std::forward<Args>(args)...));
  }

  DelayedCaller(const std::function<void()>& f) : f(f) {}

private:
  std::function<void()> f;
}; 
```

公共构造函数仍然为您的用户提供了使用 lambda 对其进行初始化的可能性，如果他们愿意的话。

# cmd - Unable to get nircmd's setdisplay command to work on windows system

> ID：14833130
> 
> 赞同：1
> 
> 时间：2013-02-12T12:57:36.953
> 
> 标签：cmd

I have run into a windows exe called nircmd which allows you to do some pretty cool stuff through the command line. I have a project I am assisting in, and am needing to resize a Windows environment on the fly, taking whatever is maximized and making it maximized after the resize. When searching the internet, I stumble upon nircmd a lot, but I can not seem to get the function I need working, to work on it. It is:

```
setdisplay 800 600 24 
```

I have tried every different option with this function within nircmd, and it does nothing on both a Windows 7 environment, nor a Windows Server where it needs to go. I have googled for "nircmd setdisplay not working" or "nircmd setdisplay error" etc, and can find nothing regarding it on the internet. I find this weird, because I have tested this on my desktop, laptop, and a windows server, and all 3 do nothing.

Can anyone assist me in what I may be doing wrong? Or point me in a direction of a command line driven, on the fly resolution changing program? (I have tried QRes as well, with the same results, though the Windows Server gives me an error (which I don't recall at the moment). It must be command line driven, as this is a simple function that will be inside a php file and only accessed by a few in the end.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-30T14:08:04.227

尝试：

```
nircmd.exe setdisplay 800 600 32 
```

或者

```
nircmd.exe setdisplay 800 600 16 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-20T10:05:57.157

为了完善 Matthew 的答案，关键是许多最近的视频卡在某些分辨率下不接受 24 位的色深，其中大多数使用 32 位。这将解释为什么`nircmd.exe setdisplay 800 600 32`会起作用但`nircmd.exe setdisplay 800 600 24`不会。在这种情况下，Nircmd 不回复错误代码，命令被接受，但显示屏上没有任何变化。

此外，Nircmd 文档中的所有示例都指的是 24 位或 8 位，这可能会导致一些挫败感，直到您尝试使用 32 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:01:56.723

您可以尝试其他一些命令行桌面分辨率切换器。其中之一一定会为您工作。

*   [多分辨率](http://entechtaiwan.com/util/multires.shtm)
*   [分辨率转换器](http://www.myitforum.com/inc/upload/1365Vidchng.zip)（vidchng /？寻求帮助）
*   [视频](http://www.jddesign.co.uk/products/vidres/vidres.htm)

（[来源](https://groups.google.com/forum/?fromgroups=#!msg/microsoft.public.scripting.wsh/Xwrq5SgwAxU/3eObLot6hOkJ)，但我不得不谷歌更新链接。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-19T17:31:47.227

这适用于 Windows 10：[https ://12noon.com/](https://12noon.com/)

命令示例：

1.  将“活动”监视器设置创建为 XML：

    dc2.exe -create="DefaultSettings.xml" -active

2.  加载设置：

    开始 /wait "" dc2.exe -configure="DefaultSettings.xml"

^^ 这将 1) 将您当前的监视器配置写入 XML 文件并 2) 立即加载相同的设置。将命令 2) 放入批处理文件并按需运行确实很有帮助。

# jquery - Why don't these $.getJSON calls return in parallel?

> ID：14833131
> 
> 赞同：0
> 
> 时间：2013-02-12T12:57:42.257
> 
> 标签：jquery, asp.net, json

```
<script type="text/javascript">
    var sourceData = {sites:[{ name: "London" , Id: "0"}, { name: "Bath", Id: "1"}, { name: "Cambridge", Id: "2"}]};
    $(document).ready(function () {
    $(sourceData.sites).each(function (index, data) { var objName = "<div class='bold' id = place" + data.Id + ">" + data.name + "</div>"; $('#results').append(objName); });

    $(sourceData.sites).each(function (index, data) {
    $.getJSON("GenerateData.aspx?place=" + data.name, function (retData) {
            $('#place' + data.Id)
                .wrap("<a href=GenerateData.aspx?place=" + data.name + "></a>")
                .append(retData.Wait); });
        });
    });
</script> 
```

So basically generateData just returns a json which looks like:

```
{"name": "(place parameter passed back)", "Wait": 5000} 
```

Except 5000 is actually Rand(0,5000) and also corresponds to a thread.sleep that executes before the request is returned.

What I can't understand is that while I'm getting some parallelisation (the order in which results are returned is random), the order in which they return is not from lowest to highest, and also the total return time is equal to the total wait times.

So there's no actual parallelisation of the requests against GenerateData, even though the requests seem to be sent out in parallel.

I've seen [Asynchronous Controller is blocking requests in ASP.NET MVC through jQuery](https://stackoverflow.com/questions/2927726/asynchronous-controller-is-blocking-requests-in-asp-net-mvc-through-jquery) but that seems specific to MVC which I'm not using (yet).

Am I doing anything wrong from the jquery side, or is this another case of ASP.net sessions messing parallelisation up?

![look at the latencies in the javascript console](../Images/da3ed887212399c762db7ddcec2c6a1b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:07:01.080

`$.getJSON()`异步操作并非巧合。请求响应不会以与请求相同的方式排序，或者至少很少会这样排序。如果您希望您的请求按照您发送它们的顺序返回，那么您需要创建一个 Ajax 队列，然后请求将在之前的请求完成后发送。您可以使用[`jQuery.queue()`](http://api.jquery.com/jQuery.queue/).

# delphi - 在delphi中使用两个exe文件时相对路径和绝对路径之间的冲突

> ID：14833134
> 
> 赞同：1
> 
> 时间：2013-02-12T12:57:50.057
> 
> 标签：delphi, delphi-xe2, delphi-7

我在 C:\MyProject 文件夹中有一个 exe 说 myApp.exe。它在日志文件中写入日志，比如 tracefile.log，它也在 C:\MyProject 中。

现在我必须创建一个计划任务，比如 Schedule1.exe，它也将写入位于 C:\MyProject 的日志文件 tracefile.log 中。

好的，我创建了 Schedule1.exe 并将其保存在同一文件夹 C:\MyProject 文件夹中，并使用此 exe 进行了日程安排。

问题：当我将日志文件的相对路径指定为“.\tracefile.log”时，Schedule1.exe 无法选择日志文件的路径。但是当我给出像“C:\MyProject”这样的完整路径时，它会选择日志文件路径并在上面写入。

请建议可能是什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:00:03.130

相对路径是相对于进程的工作目录的。进程的工作目录是在进程启动时确定的，可能不是可执行文件所在的目录。更重要的是，工作目录可以在进程生命周期中改变。

在我看来，您应该提供这些文件的完整路径。您需要掌握可执行文件所在的目录。那是

```
ExtractFilePath(ParamStr(0)); 
```

所以你应该使用这个代码来命名你的文件：

```
ExtractFilePath(ParamStr(0)) + 'tracefile.log' 
```

# msbuild - Force GenerateApplicationManifest to run in MSBUILD

> ID：14833135
> 
> 赞同：0
> 
> 时间：2013-02-12T12:57:50.333
> 
> 标签：msbuild, clickonce, manifest, publish

My requirement is to change the ProductName in the application manifest file. I did the solution mentioned [here](https://stackoverflow.com/questions/6595304/changing-product-name-with-mage-exe), but for me, the product name still doesn't change. In the log, I can see that the `GenerateApplicationManifest` task is not getting executed. The log says:

```
Skipping target "GenerateApplicationManifest" because all output files are up-to-date with respect to the input files. 
```

But I want this task to run, so that the product name is changed. This is the code.

```
<DeployEXE>The application .exe file</DeployEXE>
<DeployManifest>The .exe.manifest file</DeployManifest>
<AppManifest>The .application file</AppManifest>

Line 1: <Exec Command="$(Msbuild) $(ClientAppProject) /t:Clean;Publish /p:BootstrapperEnabled=true;UpdateRequired=true;MinimumRequiredVersion=$(Version);UpdateEnabled=true;UpdateMode=Foreground;UpdateInterval=7;UpdateIntervalUnits=Days;UpdatePeriodically=false;PublishDir=$(PublishDir);ApplicationVersion=$(Version);PublisherName=&quot;$(PublisherName)&quot;;ProductName=&quot;$(ClickOnceAppTitle)&quot;;PublishUrl=$(ClickOnceUrl);GenerateManifests=true;Install=true;Configuration=Release;Platform=AnyCPU"/>

Line 2: <Exec Command="$(SN) -R $(DeployEXE) $(SNKFile)"/>

Line 3: <Exec Command="$(MAGE) -UPDATE $(DeployManifest) -CertFile $(CertFile) -Password $(Password) -pub &quot;$(PublisherName)&quot; -UseManifestForTrust t" />

Line 4: <Exec Command="$(MAGE) -UPDATE $(AppManifest) -AppManifest $(DeployManifest) -CertFile $(CertFile) -Password $(Password) -pub &quot;$(PublisherName)&quot; -UseManifestForTrust t"/>

Line 5: <GenerateApplicationManifest
            AssemblyName="$(EXEName).exe"
            Product="$(ClickOnceAppTitle)"
            EntryPoint="$(EXEName).exe"
            OutputManifest="$(EXEName).exe.manifest">
            <Output
                ItemName="ApplicationManifest"
                TaskParameter="OutputManifest"/>
        </GenerateApplicationManifest> 
```

After `Line 1`, I can see the correct publisher & product names set in the .application & .exe.manifet files (eg: PublisherName is set to `MyCompany`, ProductName is set to `My Company Software`). After `Line 4` is executed, the publisher name stays correct, but the product name is then replaced with the assembly name (eg: ProductName changes to `My.Company.Software`). For correcting this, I've added `Line 5`, which ideally should have corrected the ProductName, but it doesn't happen.

What could be the problem here? Why is this task ignored by MSBUILD?

# d3.js - d3.js categorical time series (evolustrip)

> ID：14833149
> 
> 赞同：1
> 
> 时间：2013-02-12T12:58:31.660
> 
> 标签：d3.js, time-series

Working in *d3.js*, I am looking for a good way to display categorical time series data. The data values cannot co-occur, and are not evenly spaced, so I've data exactly like:

```
location = [[time1: home], [time4: work], [time5: cafe], [time7: home]] 
```

and so on. My ideal resulting graph is something like what might be called an [evolustrip](http://tecfa.unige.ch/~lemay/thesis/THX-Doctorat/node82.html) - one way of seeing this chart is as a time series chart with variable width bars, bar color corresponding to category (e.g. 'home').

Can anyone point me in the right direction? Thank you so much!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:52:34.183

所以我最终制作了自己的 d3.js 解决方案：

我使用 d3.time.scale 刻度作为时间维度，然后使用 d3.scale.category20 刻度为类别提供颜色。然后，我按开始时间将分类数据绘制为时间轴上相同高度的矩形，并使用 d3.time.scale 比例计算每个矩形的适当 bin 宽度。

可以在这里看到一个可重用的组件（遵循[http://bost.ocks.org/mike/chart/中的模式）示例：](http://bost.ocks.org/mike/chart/)

```
function timeSeriesCategorical() {
    var w = 860,
        h = 70,
        margin = {top: 20, right: 80, bottom: 30, left: 50},
        width = w - margin.left - margin.right,
        height = h - margin.top - margin.bottom;
    var xValue = function(d) { return d[0]; },
        yValue = function(d) { return d[1]; };
    var yDomain = null;
    var xScale = d3.time.scale()
        .range([0, width]);
    var yScale = d3.scale.category20();
    var xAxis = d3.svg.axis()
        .scale(xScale)
        .tickSubdivide(1)
        .tickSize(-height)
        .orient('bottom');
    var yAxis = d3.svg.axis()
        .scale(yScale)
        .ticks(5)
        .orient('left');
    var binwidth = 20;

    function chart(selection) {
        selection.each(function(data) {

            // convert data to standard representation
            data = data.map(function(d, i) {
                return [xValue.call(data, d, i), yValue.call(data, d, i)];
                //return d;
            });

            // scale the x and y domains based on the actual data
            xScale.domain(d3.extent(data, function(d) { return d[0]; }));
            if (!yDomain) {
                yScale.domain(d3.extent(data, function(d) { return d[1]; }));
            } else {
                yScale.domain(yDomain);
            }

            // compute binwidths for TODO better comment
            // d looks like {timestamp, category}
            data.forEach(function(d, i) {
                if (data[i+1]) {
                    w_current = xScale(data[i][0]);
                    w_next = xScale(data[i+1][0]);
                    binwidth = w_next - w_current;
                }
                d.binwidth = binwidth;
            });

            // create chart space as svg
            // note: 'this' el should not contain svg already
            var svg = d3.select(this).append('svg').data(data);

            // external dimensions
            svg.attr('width', w)
                .attr('height', h);

            // internal dimensions
            svg = svg.append('g')
                .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

            // x axis
            svg.append('g')
                .attr('class', 'x axis')
                .attr('transform', 'translate(0,' + height + ')')
                .call(xAxis);

            // TODO bars legend

            // bars
            svg.selectAll('rect')
                .data(data)
              .enter().append('rect')
                .attr('x', function(d, i) { return xScale(d[0]); })
                .attr('width', function(d, i) { return d.binwidth; })
                .attr('height', height)
                .attr('fill', function(d, i) { return yScale(d[1]); })
                .attr('stroke', function(d, i) { return yScale(d[1]); });

        });
    }

    chart.x = function(_) {
        if (!arguments.length) return xValue;
        xValue = _;
        return chart;
    };

    chart.y = function(_) {
        if (!arguments.length) return yValue;
        yValue = _;
        return chart;
    };

    chart.yDomain = function(_) {
        if (!arguments.length) return yDomain;
        yDomain = _;
        return chart;
    };

    return chart;
} 
```

并且可以通过以下方式调用：

```
d3.csv('./data.csv', function(data) {
     var chartActivity = timeSeriesCategorical()
        .x(function(d) { return d.when; })
        .y(function(d) { return d.activity; })
        .yDomain([0,1]);
     d3.select('#chart-activity')
        .datum(data)
        .call(chartActivity);
}); 
```

希望这对某人有帮助！该项目位于[https://github.com/interaction-design-lab/stress-sense-portal](https://github.com/interaction-design-lab/stress-sense-portal)

# python - Strange behavior redirecting to a file while using runuser

> ID：14833153
> 
> 赞同：1
> 
> 时间：2013-02-12T12:58:56.130
> 
> 标签：python, linux, bash, sh

I'm currently executing a python file with runuser and redirecting the output to a file. This is the command:

```
runuser -l "user" -c "/path/python-script.py parameter1 > /path/file.log &" 
```

This run correctly the python script but creates an empty log file. If I run without the redirect:

```
runuser -l "user" -c "/path/python-script.py parameter1 &" 
```

runs correctly the python script and make all output from python script to flow the screen. The output from the python script are done with **print** which output to stdout.

I don't understand why the output from the python script is not dumped to the file. File permissions are correct. The log files is created, but not filled.

But, if I remove the "parameter1", then the error message reported by the python script is correctly dumped to the log file:

```
runuser -l "user" -c "/path/python-script.py > /path/file.log &" 
```

The error message is done with **print** too, so I don't understand why one message are dumped and others not.

Maybe runuser interprets the "parameter1" as a command or something. But, the parameter is correctly passed to the script, as I can see with ps:

```
/usr/bin/python /path/python-script.py connect 
```

I've tried adding 2>&1 but still don't work.

Any idea ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T08:37:35.757

在启动脚本中遇到了类似的问题，我需要记录输出。最后我想出了以下内容：

```
USR=myuser    
PRG=myprogrog
WKD="/path/to/workdir"
BIN="/path/to/binary"
ARG="--my arguments"
PID="/var/run/myapp/myprog.pid"

su -l $USR -s /bin/bash -c "exec > >( logger -t $PRG ) 2>&1 ; cd $WKD; { $BIN $ARG & }; echo \$! > $PID " 
```

方便，因为您还可以拥有可用进程的 PID。示例写入 syslog，但如果要写入文件，请使用 cat：

```
LOG="/path/to/file.log"

su -l $USR -s /bin/bash -c "exec > >( cat > $LOG ) 2>&1 ; cd $WKD; { $BIN $ARG & }; echo \$! > $PID " 
```

它启动一个新的 shell 并将所有输出绑定到 exec 中的命令。

# php - 使用 XML 通过 PHP 计算费率

> ID：14833154
> 
> 赞同：0
> 
> 时间：2013-02-12T12:59:08.877
> 
> 标签：php, xml, class

我有点卡住了，我希望更熟悉 PHP 的人能够帮助我。基本上，我正在编写一个 PHP 应用程序，它允许您通过 XML 文件插入产品。当我说产品时，我的意思是汽车租赁或保险类产品，其中有要填写的表格和要计算的费率。我选择了 XML 结构，以便将来在没有任何编码知识的情况下轻松添加或调整它们，因为底层类将完成所有工作。然而，我现在正努力寻找最安全和最好的方法，将费率计算包含在 XML 文件结构中并在 PHP 中评估它们，而不会有任何被利用的风险。因此，例如，我将用于费率计算区域的 xml 文件结构可能看起来像

```
<rates>
  <rate name="variable1" type="forminput" relative="form['input1']"></rate>
  <rate name="variable2" type="forminput" relative="form['input2']"></rate>
  <rate name="calculatedvariable1" type="calculation">[variable1] * [variable2]</rate>
</rates> 
```

好的，所以这是一个非常基本的示例，但想法是我的类然后读取名称，使用 xml 解析器基于此创建一个 php 变量，并在表单中给出值（或任何相关的引用），然后当它找到了一种计算类型，它将正确命名的变量（用方括号或其他东西注明）插入计算并对其进行评估。所以在这个例子中，通过解析计算给出的输出将是：

```
$variable1 * $variable2 
```

然后需要作为计算运行以获得计算变量1的值。现在我知道我可以使用 eval() 来实现这一点，但我不相信这是唯一的选择，也许我错过了我可以在我的 xml 结构或我的 php 解析它的方式中做的其他事情。无论如何，我希望我已经正确解释了它，并提前感谢任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:31:03.820

考虑到您已经解决了从基于`relative`属性的字符串形式的表单中检索值的问题 - 在此处命名实现`resolve_variable($relative)`。

然后，您可以将值分配给元素本身，并以标准 xpath 1.0 表达式的形式制定您的计算，例如：

```
rate[@name="variable1"] * rate[@name="variable2"] 
```

XML 中的那个表达式：

```
<rates>
  <rate name="variable1" type="forminput" relative="form['input1']"></rate>
  <rate name="variable2" type="forminput" relative="form['input2']"></rate>
  <rate name="calculatedvariable1" type="calculation">
    rate[@name="variable1"] * rate[@name="variable2"]
  </rate>
</rates> 
```

在 PHP 中，您只需要使用该[`DOMXPath`](http://php.net/DOMXPath)对象即可[`DOMDocument`](http://php.net/DOMDocument)：

```
$dom = new DOMDocument();
$dom->loadXML($xml); 
$xpath = new DOMXPath($dom); 
```

然后，您可以将值分配给节点：

```
// assign values
foreach ($xpath->query('rate/@relative') as $relative) {
    $relative->ownerElement->nodeValue = resolve_variable($relative);
} 
```

然后执行所有计算：

```
// do calculations
$results = array();
foreach ($xpath->query('rate[@type="calculation"]') as $calculation) {
    $results[$calculation->getAttribute('name')]
        = $xpath->evaluate($calculation->nodeValue);
} 
```

然后它们以数组的形式很好地出现`$results`（在我的示例中，我有 3 和 5 作为值）：

```
Array
(
    [calculatedvariable1] => 15
) 
```

也许这对你有帮助。

请注意，如果您需要精确计算，浮点运算可能会妨碍您[http://www.validlab.com/goldberg/paper.pdf](http://www.validlab.com/goldberg/paper.pdf)

一个工作示例一目了然整个图片/上面的视图： http: [//eval.in/9595](http://eval.in/9595)

您也可以[使用 XSL](http://php.net/book.xsl)来做到这一点。

# wcf - serviceDebug includeExceptionDetailInFaults="true" - On live site

> ID：14833155
> 
> 赞同：1
> 
> 时间：2013-02-12T12:59:13.510
> 
> 标签：wcf, security, faultexception

I am using a WCF service that sits under an ASP.NET website.

I want to keep service debug / exeption details on when I go live as it is convenient for catching errors in the global.asax file without having to throw fault exceptions.

```
 <serviceDebug includeExceptionDetailInFaults="true" /> 
```

Is there any reason why I should not do this. I have an error handler in place in the ASP.NET site.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:38:06.367

您将向客户公开内部细节——这当然可以被视为安全问题。但是，如果您控制客户端并信任您在 ASP.NET 站点上的错误处理，那么您可能就不是这样了。SOAP 消息也会更大。

我认为将其留在生产中通常被认为是一个坏主意。

# ios - IOS FacebookSDK apprequests dialog error

> ID：14833161
> 
> 赞同：1
> 
> 时间：2013-02-12T12:59:37.300
> 
> 标签：ios, facebook, apprequests

I'm trying to find solution for my problem during two days. And I want to say what I'm sure what I've read all resource where you could give me a links =) The problem is. I'm using FacebookSDK 3.1 for iOS. And trying to make apprequests dialog... The code is simple

```
session =[[FBSession alloc]initWithAppID:@"XXXXXXXXXXXX" permissions:nil urlSchemeSuffix:@"xxxxxxxxxxxx" tokenCacheStrategy:nil];
    [FBSession setActiveSession:session];
      [self ShowSessionState:session.state];
      NSLog(@"Acces token data: %@",[session accessToken]);  

      [session openWithCompletionHandler:^(FBSession *psession, FBSessionState status, NSError *error) {
         // NSLog(@"I'm in");

         Facebook * facebook = [[Facebook alloc] initWithAppId:@"XXXXXXXXXXXX" urlSchemeSuffix:@"xxxxxxxxx" andDelegate:nil];

                 [facebook setAccessToken:FBSession.activeSession.accessToken];
                 [facebook setExpirationDate:FBSession.activeSession.expirationDate];

                 [facebook dialog:@"apprequests" andDelegate:nil];

           }]; 
```

And all what I see.. just Frame with error - Api Error Code:110; Api Error Description: invalid user Id; Error message: Missing user cookie (to validate session user). But the authorization is successful... I have a valid accessToken.. can get my friends or my own FB data.

As I said I've read a lot of resources.... And really the many people have same problem, but I don't found any useful solution for this problem. So help me, please.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:19:00.933

我找到了一个解决方案，**也许它会帮助别人**。实际上它看起来像驱魔但有效）所以问题是：如果你从 safary 或 Facebook 应用程序登录 facebook，webview 不会保存任何 cookie ......所以你需要让你从 webview 登录。您可以使用 FBConnect 包来实现（在 google 中阅读更多内容）。在 Facebook.m 文件中，您需要像这样更改代码：

```
[self authorizeWithFBAppAuth:YES safariAuth:YES]; 
```

至

```
[self authorizeWithFBAppAuth:NO safariAuth:NO]; 
```

在这种情况下，当您将使用

```
[facebook authorize:permissions]; 
```

登录始终出现在 webview 中，您可以使用任何对话框，如 apprequests 等。还有一个问题））**登录对话框不出现？**这是另一个 Facebook 错误））要解决这个问题，您只需要在调用它时进行延迟：

```
[self performSelector:@selector(showFBLoginDialog) withObject:nil afterDelay:1];

- (void)showFBLoginDialog {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"offline_access",
                            @"publish_actions",
                            @"read_stream",
                            @"user_photos",
                            @"email",
                            @"publish_stream",
                            @"user_likes",
                            @"user_about_me", nil];
    [facebook authorize:permissions];    
} 
```

# oracle - 在Oracle中通过游标迭代

> ID：14833166
> 
> 赞同：0
> 
> 时间：2013-02-12T12:59:52.910
> 
> 标签：oracle, cursor

我在[https://dba.stackexchange.com/questions/3587/oracle-automate-export-unload-of-data](https://dba.stackexchange.com/questions/3587/oracle-automate-export-unload-of-data)找到了一个很好的问题。使用这样的结构是否有效：

```
FOR r IN (SELECT * FROM table) LOOP
   UTL_FILE.PUT_LINE(lfFilelog, r.row);
END LOOP; 
```

我正在尝试使用这样的东西：

```
CREATE OR REPLACE PROCEDURE p_name(DESTFOLDER in varchar2, FILENAME in varchar2)
IS
    V_FILEHANDLE UTL_FILE.FILE_TYPE;
    CURSOR dataset IS 
        SELECT 
            field1, 
            field2, 
            fieldN 
        FROM 
            table1, 
            table2, 
            (SELECT field3 from table3);
        -- WHERE CLAUSE ... and so on..
BEGIN
    V_FILEHANDLE := UTL_FILE.FOPEN(DESTFOLDER, FILENAME, 'w');
    FOR R IN dataset LOOP
        UTL_FILE.PUT_LINE(V_FILEHANDLE, R.ROW);
    END LOOP;
END;
/ 
```

并得到`pls-00302`错误，指出我应该定义`ROW`组件。因此，据我所知，该字段应该已经存在于查询中。我对吗？

我可以简单地从光标写一行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:17:20.957

提到的答案并不完整，我认为它是作为一个示例（伪代码）给出的，它缺乏实现细节。

因为它是：

*   您的`SELECT`条款无效，您没有选择任何内容。你想选择什么？
*   `XX.row`游标所在的构造`xx`不存在
*   此外，该[`UTL_FILE.get_line`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm#i997640)过程接受 a`VARCHAR2`作为其第二个参数，而不是任何类型的`rowtype`
*   你不能命名一个表`table`（尽管你可以命名它`"table"`）。

给定一张表`mytable(col1, col2, ... , colN)`，你可以写：

```
CREATE OR REPLACE PROCEDURE p_name()
IS
    V_FILEHANDLE UTL_FILE.FILE_TYPE;
    CURSOR dataset IS SELECT col1, col2, /*...*/ coln FROM mytable;
BEGIN
    /*utl_file.fopen maybe?*/
    FOR R IN dataset LOOP
        UTL_FILE.PUT_LINE(V_FILEHANDLE, R.col1 ||';'|| r.col2 /*...*/ || r.coln);
    END LOOP;
END; 
```

# codeigniter - 如何在codeigniter HMVC（MX）中调用模块时传递两个或多个参数

> ID：14833168
> 
> 赞同：0
> 
> 时间：2013-02-12T12:59:55.953
> 
> 标签：codeigniter, codeigniter-2, hmvc

我正在为 CodeIgniter [https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)使用 HMVC 模块化扩展。

在您的站点视图中轻松调用它

```
Modules::run('modulename/controller/method') 
```

我们可以传递单个参数，例如

```
Modules::run('modulename/controller/method',$parameter) 
```

我怎样才能通过这个传递两个或多个参数？

Codeigniter 版本：2.1.3

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:59:55.953

我们可以传递两个或多个变量，如下所示

```
Modules::run('modulename/controller/method',$parameter1,$parameter2,$parameter3) 
```

您可以传递更多以逗号分隔的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T20:53:55.667

如果你想将参数传递给 _construct

```
$modulo = array('programas'=>array('cxcxc','todo'));
$programas = Modules::load($modulo); 
```

# grails - 如何使用 Grails 从 LDAP 获取用户数据？

> ID：14833175
> 
> 赞同：1
> 
> 时间：2013-02-12T13:00:17.097
> 
> 标签：grails, ldap

我有一个使用 GormAuthorization 的遗留 Grails 项目。我需要做的是让应用程序从 LDAP 服务器获取一些数据并将其存储在数据库中。

我尝试使用该`spring-security-ldap`插件，但未能使其与现有授权方法一起使用。是否有任何方便的方法可以使用 Grails 获取 LDAP 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:16:47.227

无法使用 Grails 或 groovy 找到任何合适的解决方案，因此最终决定坚持使用这个 Java 库：[https](https://www.unboundid.com/products/ldapsdk/) ://www.unboundid.com/products/ldapsdk/ 。

# android - android 区域总是一个矩形区域还是可能是多边形或弯曲的？

> ID：14833188
> 
> 赞同：2
> 
> 时间：2013-02-12T13:00:48.967
> 
> 标签：android, graphics, region

Android 区域 ( [android.graphics.Region](http://developer.android.com/reference/android/graphics/Region.html) ) 是否总是有一个矩形区域，还是可以是多边形或圆形（弯曲）？

实际上，我必须对多个区域进行一些`Region.Op.UNION`操作`Region.Op.INTERSECTION`。我想知道Ultimate Output Region的形状，是否还有矩形区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:42:34.577

它可以是复杂的 ( `isComplex()`)，即它由多个矩形组成。不确定“弯曲”是什么意思，但它可以是多边形的。如果我理解正确，您可以使用`getBoundaryPath()`来获取描述结果形状的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-29T21:47:11.910

文档中的任何内容都不会导致人们得出结论，区域可以不是*矩形*，它是由矩形、x、y 坐标加上宽度和高度构成的，或者由另一个区域构成。

可以从路径描述矩形，因此 getBoundaryPath() 不一定得出非矩形是可能的结论。可以替代地暗示包含矩形边界。

isComplex() 属性仅表示它由多个矩形组成。它们是否都被一个外部定义的矩形所束缚？如果是这样，我们如何将它们分开？在没有足够的文档的情况下，没有实验就无法判断：

以下代码描述了一条路径并创建了一个多边形区域。我们从任意数量的坐标对的数组开始。然后：

```
 //describe a path corresponding to the transformed polygon
    Path transformPath;
    transformPath = new Path();

    //starting point
    transformPath.moveTo(getTransformedPolygon()[0], getTransformedPolygon()[1]);

    //draw a line from one point to the next
    for(int i = 2; i < arrayCoordinates.length; i = i + 2)
    {
        transformPath.lineTo(arrayCoordinates[i], arrayCoordinates[i + 1]);
    }

    //then end at the starting point to close the polygon
    transformPath.lineTo(arrayCoordinates[0], arrayCoordinates[1]);

    //describe a region (clip area) corresponding to the game area (my example is a game app)
    Region clip = new Region(0, 0, gameSurfaceWidth, gameSurfaceHeight);

    //describe a region corresponding to the transformed polygon path
    transformRegion = new Region();
    transformRegion.setPath(transformPath, clip); 
```

如果将区域显示为字符串，您将看到构成多边形的几对坐标。

# android - android Activity 在 Manifest 上被删除，但异常说它不是

> ID：14833193
> 
> 赞同：1
> 
> 时间：2013-02-12T13:01:00.943
> 
> 标签：android, android-activity

我曾多次使用活动，但我不知道为什么会发生此异常，我想在用户单击按钮时启动活动，但我收到异常说我没有声明此活动`Manifest`但我做了,

### 主祭

```
 <activity
            android:name=".Address"
            android:label="@string/app_name" >
        </activity> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:13:55.800

尝试这个：

使用完整的包名尝试一次

```
 <activity
        android:name="com.package_name.file_name "
        android:label="@string/app_name" >
    </activity> 
```

# c# - 自定义绑定代码表达式中的 Sql 查询？

> ID：14833194
> 
> 赞同：1
> 
> 时间：2013-02-12T13:01:03.113
> 
> 标签：c#, asp.net, sql

我在 GridView 中有一个标签，我想用这样的查询绑定它..

```
select COUNT(*) 
from tbl_like 
inner join Scrap on tbl_like.scrapid=Scrap.Id 
where tbl_like.likestatus=1 and tbl_like.scrapid='DataBinder.Eval(Container.DataItem,"ScrapId")' 
```

我知道上面的代码不起作用，我该怎么做才能使它起作用？

源代码：

```
<ItemTemplate>
    <asp:Label ID="Label1" runat="server" Text='<%# "Id of Scrap:"+DataBinder.Eval(Container.DataItem,"ScrapId") %>'></asp:Label>
</ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:35:08.020

以下是如何使它工作：

1.  在后面的代码中创建受保护的静态方法，该方法将返回您想要的值并接受您提供的参数
2.  将您的项目模板更新为如下所示

    ```
    <ItemTemplate>
          <asp:Label ID="Label1" runat="server" Text='<%# WebPageName.StaticMethodName((int)Eval("ScrapId")) %>' />
    </ItemTemplate> 
    ```

# c# - 在c#中使用命名管道在两个进程之间进行双工操作

> ID：14833202
> 
> 赞同：7
> 
> 时间：2013-02-12T13:01:28.213
> 
> 标签：c#, named-pipes, duplex

我正在尝试使用命名管道在同一台机器上的服务器和客户端进程之间进行通信。服务器向客户端发送消息，客户端对其进行处理并返回结果，服务器应该得到结果。

这是服务器的代码：

```
using System;
using System.IO;
using System.IO.Pipes;

class PipeServer
{
    static void Main()
    {
        using (NamedPipeServerStream pipeServer =
            new NamedPipeServerStream("testpipe", PipeDirection.InOut))
        {
            Console.WriteLine("NamedPipeServerStream object created.");

            // Wait for a client to connect
            Console.Write("Waiting for client connection...");
            pipeServer.WaitForConnection();

            Console.WriteLine("Client connected.");
            try
            {
                // Read user input and send that to the client process.
                using (StreamWriter sw = new StreamWriter(pipeServer))
                {
                    sw.AutoFlush = true;
                    Console.Write("Enter text: ");
                    sw.WriteLine(Console.ReadLine());
                }

                pipeServer.WaitForPipeDrain();

                using (StreamReader sr = new StreamReader(pipeServer))
                {
                    // Display the read text to the console 
                    string temp;

                    // Wait for result from the client. 
                    while ((temp = sr.ReadLine()) != null)
                    {
                        Console.WriteLine("[CLIENT] Echo: " + temp);
                    }
                }

            }
            // Catch the IOException that is raised if the pipe is 
            // broken or disconnected.
            catch (IOException e)
            {
                Console.WriteLine("ERROR: {0}", e.Message);
            }
        }
    }
} 
```

这是客户端的代码：

```
using System;
using System.IO;
using System.IO.Pipes;

class PipeClient
{
    static void Main(string[] args)
    {
        using (NamedPipeClientStream pipeClient =
            new NamedPipeClientStream(".", "testpipe", PipeDirection.InOut))
        {

            // Connect to the pipe or wait until the pipe is available.
            Console.Write("Attempting to connect to pipe...");
            pipeClient.Connect();

            Console.WriteLine("Connected to pipe.");
            Console.WriteLine("There are currently {0} pipe server instances open.",
               pipeClient.NumberOfServerInstances);
            using (StreamReader sr = new StreamReader(pipeClient))
            {
                // Display the read text to the console
                string temp;
                while ((temp = sr.ReadLine()) != null)
                {
                    Console.WriteLine("Received from server: {0}", temp);
                }
            }

            // send the "result" back to the Parent process.
            using (StreamWriter sw = new StreamWriter(pipeClient))
            {
                sw.AutoFlush = true;
                sw.WriteLine("Result");
            }

            pipeClient.WaitForPipeDrain();

        }
        Console.Write("Press Enter to continue...");
        Console.ReadLine();
    }
} 
```

但是在服务器代码中，在线 pipeServer.WaitForPipeDrain(); 我得到一个 ObjectDisposedException，它说“无法访问封闭的管道”。

将 sw.AutoFlush 设置为 true 时，客户端代码中也会出现相同的错误。

基本上我在 c# 中找不到双工命名管道的示例。我要么需要它，要么需要一个匿名管道的示例，其中有两个管道，一个用于读取，一个用于在父进程和子进程之间写入。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:08:16.653

问题是 using 块`StreamWriter`，它将关闭底层 Stream （这是你的管道）。如果您不使用该块，它应该可以工作。

您可以执行以下操作：

```
using (var pipeServer = new NamedPipeServerStream("testpipe", PipeDirection.InOut))
using (var streamReader = new StreamReader(pipeServer))
using (var streamWriter = new StreamWriter(pipeServer))
{
   // ... Your code ..
} 
```

正如 Johannes Egger 所指出的，`StreamWriter`将流刷新到`Dispose()`，因此`StreamWriter`应该首先处理 ，因此是要处理的最里面的对象。

# c - 分段错误结果

> ID：14833203
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:01:30.557
> 
> 标签：c, linux

我试图在桌面上安装的 Linux 以及虚拟机中安装的相同 linux 上执行以下代码。

```
#include <stdio.h>

int main()
{
  int *ptr;
  printf("%d\n",*ptr);
  return 0;
} 
```

我很惊讶地看到直接安装在桌面上的 linux 上的结果会给出“分段错误”，而在虚拟机上安装的 linux 上它会打印一些垃圾值。谁能帮我理解为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:02:28.790

您的指针未初始化。像下面这样初始化它：

```
int a = 42;
int *ptr = &a; 
```

取消引用未初始化的指针会调用未定义的行为，您的`printf` 调用可能会打印一些垃圾或只是崩溃。

我可以建议你读一本关于 C 编程的书吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:05:21.193

因为您正在处理“未定义的行为”。究竟发生了什么没有定义。它可能会崩溃，它可能会燃烧，或者它可能会做其他预期或意想不到的事情。

在这种特殊情况下，它可能与`ptr`从堆栈中获得的值有关——它将在虚拟机上具有有效的内存地址，因此您会获得一些您不知道它是什么的随机内存位。在非虚拟机上，该值不同[或内存位置不同]，并且您会因访问无效内存位置而出现段错误。

访问一个没有被设置为任何东西的指针并没有什么用处，但它远不能保证崩溃。它也可以打印该内存地址处的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:07:04.870

您有未初始化的指针。指针就像整数一样，带有指向的地址。由于它未初始化，它可能包含*任何*值。因此，在您的 VPS 上，它可能指向您的进程可以访问的某个有效地址，而在您的计算机上，它可能指向该进程无法访问的未知地址。

# sql-server - MS SQL Server 第三方事务阻塞监控工具

> ID：14833204
> 
> 赞同：1
> 
> 时间：2013-02-12T13:01:33.557
> 
> 标签：sql-server, alert, database-deadlocks

有没有好的开源或其他免费的 MS SQL Server 事务阻塞监控工具？一种可以检测到持续时间超过 X 的阻塞事务，然后在某处通过电子邮件发送警报的方法是理想的。

一台服务器很简单。特别适用于 MS SQL Express 2008，但应该适用于所有真正的或所有最近的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:26:00.273

是的，实际上 SQL Server 提供了这样一个开箱即用的选项，但很少有人知道它，甚至更少知道如何使用它。它被称为[`blocked process threshold`](http://msdn.microsoft.com/en-us/library/ms181150.aspx)：

> 使用阻塞进程阈值选项指定生成阻塞进程报告的阈值（以秒为单位）。阈值可以设置为 0 到 86,400。默认情况下，不会生成阻塞进程报告。不会为系统任务或正在等待资源且不会生成可检测死锁的任务生成此事件。
> 
> 您可以定义在生成此事件时要执行的警报。因此，例如，您可以选择寻呼管理员以采取适当的措施来处理阻塞情况。

启用此选项后，系统将生成[Blocked Process Report Event Class](http://msdn.microsoft.com/en-us/library/ms191168.aspx)的分析器事件。[下一个难题是可以使用DDL Event Notifications](http://msdn.microsoft.com/en-us/library/ms189453.aspx)捕获这个（以及更多）Profiler 事件。这是一个实际的例子：

```
use msdb;
go

create queue events;
go

create service events on queue [events] (
    [http://schemas.microsoft.com/SQL/Notifications/PostEventNotification]);
go

create event notification [blocked_threshold_exceeded]
    on server for BLOCKED_PROCESS_REPORT
    to service N'events', N'current database';
go

exec sp_configure 'show advanced options', 1;
reconfigure
go

exec sp_configure 'blocked process threshold', 10;
reconfigure
go

-- simulate blocking
use tempdb;
go

begin transaction;
create table x (a int);
go 
```

现在，在另一个会话上，运行阻止上面启动的未提交事务的查询：

```
select * from tempdb..x 
```

果然，在 10 秒内（我们配置的阈值）我们会收到通知：

```
use msdb;
receive cast(message_body as xml) from [events];

<EVENT_INSTANCE>
  <EventType>BLOCKED_PROCESS_REPORT</EventType>
  <PostTime>2013-02-12T16:19:55.610</PostTime>
  <SPID>5</SPID>
  <TextData>
    <blocked-process-report monitorLoop="104441">
      <blocked-process>
        <process id="process47b946cf8" 
             waitresource="OBJECT: 2:373576369:0 " 
             waittime="18952" ...>
          <executionStack>
            <frame line="1" stmtstart="-1" ... />
          </executionStack>
          <inputbuf>
select * from x   </inputbuf>
        </process>
      </blocked-process>
      <blocking-process>
        <process status="sleeping" ....>
          <executionStack />
          <inputbuf>
create table x (a int)   </inputbuf>
        </process>
      </blocking-process>
    </blocked-process-report>
  </TextData>
...
</EVENT_INSTANCE> 
```

您可以看到阻塞器最后执行的语句、阻塞的当前执行语句，以及等待时间等等。

连接事件通知以激活发送邮件的过程[`sp_send_db_mail`](http://msdn.microsoft.com/en-us/library/ms190307.aspx)留给读者作为练习。是的，上面提到的**所有内容都**可以在 Express Edition 中使用。

# php - PHPUnit 在终端上运行，但不在 NetBeans 中

> ID：14833206
> 
> 赞同：0
> 
> 时间：2013-02-12T13:01:35.443
> 
> 标签：php, unix, netbeans, terminal, mamp

我正在运行 Mac OS X 10.6 w/bitnami mampstack 5.4.11 (PHP 5.4.11) 和 NetBeans 7.2.1。由于我已经从带有 PHP 5.3.x 的 XAMPP（用于 Mac）切换到 5.4+ NB 不能使用 PHPUnit 或任何其他 bash 脚本。PHPUnit 已启动并运行，并通过终端像魅力一样工作。但在NB我得到这个：

```
/Applications/mampstack-5.4.11/php/bin/phpunit: line 2: ?php: No such file or directory 
```

看起来 php 没有解释实际的 php 代码......我不知道为什么会发生这种情况以及如何解决这个问题。

一些设置细节：

*   我的 mampstack 位于 /Applications/mampstack-5.4.11/
*   php解释器在NB配置中设置为/Applications/mampstack-5.4.11/php/bin/php
*   包含路径已设置并在 php 和 NB 中工作
*   PHPUnit bash 脚本中 php 二进制文件的路径正确（/Applications/mampstack-5.4.11/php/bin/php）
*   像 #!/path/to/php/executable \n 这样的脚本都不再在 NB 中工作了

有想法该怎么解决这个吗？

还在[NetBeans 论坛](http://forums.netbeans.org/viewtopic.php?p=143120)上发布此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:12:31.893

通过在 [...]/php/bin 中创建 phpunit.sh 和 phpunit-skelgen.sh 来修复它

```
#!/bin/sh
/Applications/mampstack-5.4.11/php/bin/php /Applications/mampstack-5.4.11/php/bin/phpunit "$@" 
```

和

```
#!/bin/sh
/Applications/mampstack-5.4.11/php/bin/php /Applications/mampstack-5.4.11/php/bin/phpunit-skelgen "$@" 
```

并在 NetBeans 配置中指向它。

感谢来自 bitnami 的 victor ♦♦ 答案。

# c# - 离线时在 asp.net 项目中使用 GoogleMap

> ID：14833209
> 
> 赞同：1
> 
> 时间：2013-02-12T13:01:39.567
> 
> 标签：c#, asp.net, google-maps

我有一个 asp.net 网络项目，我想使用 googleMap 在其上显示我的位置，问题是：它仅在我在线时有效，但我想缓存图像并在我无法访问时使用它互联网，我搜索了很多关于离线使用 googlemap 的信息，但找不到有用的东西。如何缓存谷歌地图图像以供离线使用？还是那样的？

谢谢

# azure - 是否可以将自定义域与 Windows Azure 服务总线一起使用？

> ID：14833213
> 
> 赞同：4
> 
> 时间：2013-02-12T13:01:52.187
> 
> 标签：azure, azureservicebus

我们有一个复杂的 Azure 设置......云服务、网站、存储帐户、VM ......整个shebang。

我们对所有这些东西都有自定义域，它们工作得很好，但我找不到任何关于设置 A 记录或 CNAME 以使用其服务总线功能的文档。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:11:31.577

大卫，感谢您分享您的要求。当前不支持将自定义域与 Windows Azure 服务总线一起使用。但是，它是服务总线团队正在考虑在不久的将来启用的功能之一。当该功能可供使用时，我们将提供有关此的更多信息。

-桑托什

# c# - 如何将fixed 与Array 或T[] 类型的变量一起使用？

> ID：14833218
> 
> 赞同：5
> 
> 时间：2013-02-12T13:02:07.357
> 
> 标签：c#, fixed, unsafe

我正在研究一个`IEqualityComparer`应该非常快速地比较原始类型数组的方法。我的计划是获取指向数组和`memcmp`它们的指针。像这样：

```
 public unsafe override bool Equals(T[] x, T[] y)
    {
        if (ReferenceEquals(x, y)) return true;
        if (x == null || y == null) return false;
        if (x.Length != y.Length) return false;

        var xArray = (Array)x;
        var yArray = (Array)y;
        fixed (void* xPtr = xArray) //compiler error 1
        fixed (T* yPtr = y) //compiler error 2
        {
            return memcmp(xPtr, yPtr, x.Length * this.elementSize);
        }
    } 
```

固定语句不允许我固定`Array`或`T[]`。

有错误信息是：

```
1\. Cannot implicitly convert type 'System.Array' to 'void*'
2\. Cannot take the address of, get the size of, or declare a pointer to a managed type ('T') 
```

现在，我实际上并不关心我是如何完成这项工作的（我并不致力于这种确切的方法）。我怎么能知道那是原始/ blittable 类型的`memcmp`两个？`T[]``T`

我真的很想避免打开类型并为每个有趣的类型创建一个专门的（和重复的）代码版本。由于性能限制，任何类型的反射解决方案都不可行（是的，我真的需要这里的性能 - 没有过早的优化警告适用，因为它在 Stack Overflow 上是惯例）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:48:09.550

> 我知道 T 是原始/blittable 类型

你知道的，编译器不知道。CLR 要求垃圾收集器不能再移动固定对象中的*所有内容。*对于一个数组，它包括它的数组元素。唯一符合条件的 T 是一种简单的值类型，即*blittable*。泛型没有给您一种将 T 限制为 blittable 类型的方法。

您通常会将 memcmp() 的参数声明为 byte[]。然后 pinvoke 编组器已经做了正确的事情，并将在调用 memcmp() 之前固定 byte[] 数组。但是，这也不起作用，因为您也无法轻松地将 T[] 转换为 byte[] 。您必须使用 GCHandle 固定自己。相应地将 memcmp() 参数声明为 IntPtr 而不是 byte[]。

实际上，可以工作的类型子集足够小，可以考虑简单地编写方法重载而不是泛​​型方法。现在，它使 pinvoke 编组器能够处理固定，相应地重载 memcmp() 函数声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:47:55.273

您可以为要比较的每种数组编写单独的 P/Invoke 前端。我知道您并不是真的想专攻 T，但我认为开销并不算太大。

这有点小技巧，因为我为同一个 API 函数定义了多个具有不同签名的 P/Invoke 方法，但是通过这样做，我可以利用 P/Invoke 编组支持。

（请注意，只有当源数据确实是一个字节数组时，memcmp 的返回值的符号才有意义。如果给它一个整数数组，则应该只将返回值与零进行比较而忽略它的符号。它所暗示的顺序对整数没有意义。）

例如，以下代码为我打印以下内容（RELEASE 构建，而不是调试构建）：

```
MemCmp with ints took 00:00:08.0768666
ManagedMemCmp with ints took 00:00:10.3750453
MemCmp with bytes took 00:00:01.8740001
ManagedMemCmp with bytes took 00:00:09.2885763 
```

请注意，byte[] 测试使用字节，因此比较的字节数是 int[] 测试使用的四分之一。托管代码进行相同数量的比较，因此相对要慢很多。

比较整数数组的时间之间并没有太大的差异，但是比较字节数组的时间差异很大。这向我表明，可能有一个托管优化，它使用*fixed*从字节数组中获取指向整数的指针，以便一次比较 4 个字节（对最后可能不适合的额外字节进行一些摆弄成一个整数）。

我还认为您可以编写一个多线程托管版本（使用“int *”优化来比较字节数组），这将比非托管 memcmp() 快得多，后者当然不是多线程的（据我所知）。

无论如何，这是我的测试代码。请记住，发布构建，而不是调试！

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            int[] a1 = new int[1000000];
            int[] a2 = new int[1000000];

            for (int i = 0; i < a1.Length-1; ++i)
            {
                a1[i] = i;
                a2[i] = i;
            }

            a1[a1.Length-1] = 1;
            a2[a1.Length-1] = 2;

            byte[] b1 = new byte[1000000];
            byte[] b2 = new byte[1000000];

            for (int i = 0; i < b1.Length-1; ++i)
            {
                b1[i] = (byte)i;
                b2[i] = (byte)i;
            }

            b1[a1.Length-1] = 1;
            b2[a1.Length-1] = 2;

            Stopwatch sw = Stopwatch.StartNew();
            testWithMemCmp(a1, a2);
            sw.Stop();
            Console.WriteLine("MemCmp with ints took " + sw.Elapsed);

            sw.Restart();
            testWithManagedMemCmp(a1, a2);
            sw.Stop();
            Console.WriteLine("ManagedMemCmp with ints took " + sw.Elapsed);

            sw.Restart();
            testWithMemCmp(b1, b2);
            sw.Stop();
            Console.WriteLine("MemCmp with bytes took " + sw.Elapsed);

            sw.Restart();
            testWithManagedMemCmp(b1, b2);
            sw.Stop();
            Console.WriteLine("ManagedMemCmp with bytes took " + sw.Elapsed);
        }

        private static void testWithMemCmp(int[] a1, int[] a2)
        {
            for (int j = 0; j < COUNT; ++j)
            {
                MemCmp(a1, a2);
            }
        }

        private static void testWithMemCmp(byte[] a1, byte[] a2)
        {
            for (int j = 0; j < COUNT; ++j)
            {
                MemCmp(a1, a2);
            }
        }

        private static void testWithManagedMemCmp(int[] a1, int[] a2)
        {
            for (int j = 0; j < COUNT; ++j)
            {
                ManagedMemCmp(a1, a2);
            }
        }

        private static void testWithManagedMemCmp(byte[] a1, byte[] a2)
        {
            for (int j = 0; j < COUNT; ++j)
            {
                ManagedMemCmp(a1, a2);
            }
        }

        public static bool ManagedMemCmp(int[] a1, int[] a2)
        {
            if (a1 == null || a2 == null || a1.Length != a2.Length)
            {
                throw new InvalidOperationException("Arrays are null or different lengths.");
            }

            for (int i = 0; i < a1.Length; ++i)
            {
                if (a1[i] != a2[i])
                {
                    return false;
                }
            }

            return true;
        }

        public static bool ManagedMemCmp(byte[] a1, byte[] a2)
        {
            if (a1 == null || a2 == null || a1.Length != a2.Length)
            {
                throw new InvalidOperationException("Arrays are null or different lengths.");
            }

            for (int i = 0; i < a1.Length; ++i)
            {
                if (a1[i] != a2[i])
                {
                    return false;
                }
            }

            return true;
        }

        public static bool MemCmp(byte[] a1, byte[] a2)
        {
            if (a1 == null || a2 == null || a1.Length != a2.Length)
            {
                throw new InvalidOperationException("Arrays are null or different lengths.");
            }

            return memcmp(a1, a2, new UIntPtr((uint)a1.Length)) == 0;
        }

        public static bool MemCmp(int[] a1, int[] a2)
        {
            if (a1 == null || a2 == null || a1.Length != a2.Length)
            {
                throw new InvalidOperationException("Arrays are null or different lengths.");
            }

            return memcmp(a1, a2, new UIntPtr((uint)(a1.Length * sizeof(int)))) == 0;
        }

        [DllImport("msvcrt.dll")]
        private static extern int memcmp(byte[] a1, byte[] a2, UIntPtr count);

        [DllImport("msvcrt.dll")]
        private static extern int memcmp(int[] a1, int[] a2, UIntPtr count);

        private const int COUNT = 10000;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:19:41.637

我同意 Daniel A. White 的评论，告诉您它可能不会导致性能提升，但会因为编组到非托管代码等的开销而导致性能下降。

话虽如此，您应该能够使用[`GCHandle.Alloc`](http://msdn.microsoft.com/en-us/library/1246yz8f.aspx)：

```
public unsafe bool Equals(T[] x, T[] y)
{
    if (ReferenceEquals(x, y)) return true;
    if (x == null || y == null) return false;
    if (x.Length != y.Length) return false;

    GCHandle handleOfX = default(GCHandle);
    GCHandle handleOfY = default(GCHandle);
    handleOfX = GCHandle.Alloc(x, GCHandleType.Pinned);
    handleOfY = GCHandle.Alloc(y, GCHandleType.Pinned);
    try
    {
        return memcmp(handleOfX.AddrOfPinnedObject(),
                      handleOfY.AddrOfPinnedObject(),
                      x.Length * this.elementSize);
    }
    finally
    {
        if(handleOfX != default(GCHandle)) handleOfX.Free();
        if(handleOfY != default(GCHandle)) handleOfY.Free();
    }
} 
```

# javascript - 要将我的事件处理程序绑定到哪个事件？

> ID：14833226
> 
> 赞同：0
> 
> 时间：2013-02-12T13:02:35.003
> 
> 标签：javascript, jquery, event-handling

在我的 HTML 中，我有一个这样的表格骨架：

```
<table>
    <thead id="table-headings"></thead>
    <tbody id="table-body"></tbody>
</table> 
```

另外，我有一个`<div id="content"></div>`稍后会用到的。

`$.ajax()`我使用请求以动态方式用行和列填充表格主体。表格中的每个单元格都填充了一个`<a href="#">some link here</a>`. 通过单击其中一个链接，`$.ajax()`将完成对服务器的另一个请求，并且应该将更多数据放入`div#content`. 由于链接是动态加载的，因此我使用事件委托，如下所示：

```
$('#table-body').on('click', 'a', function(event) {
    $.ajax({
        // some settings here
        success: function(response) {
            // Append some data to the content div
            $('#content').append(...);
        }
    });    
}); 
```

所有这一切都很好。现在，问题来了：我附加的一些数据`div#content`是被标签包围的 html 源代码`<pre></pre>`。我想使用[片段 jQuery 语法突出显示插件](http://www.steamdev.com/snippet/)突出显示此源代码。根据事件委托规则，这在理论上应该通过以下方式起作用：

```
$('#content').on('...', 'pre', function(event) {
    $(this).snippet('html');
}); 
```

我的问题是，我不知道应该将事件处理程序绑定到哪个 JavaScript 事件。基本上，我只想在加载代码片段后突出显示它们，但似乎没有适合这里的 JavaScript 事件，因为 jQuery`load()`和`ready()`方法用于不同的目的。如何突出显示动态加载的 html 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:07:12.337

你有没有尝试过：

```
$('#table-body').on('click', 'a', function(event) {
    $.ajax({
        // some settings here
        success: function(response) {
            // Append some data to the content div
            $('#content').append(...);
            $('#content').find('pre').snippet('html');
        }
    });    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:11:10.940

您不需要任何事件...只需`<pre>`在追加内容后使用 find 获取 ajax 成功函数中的标签..这种方式.. DOM 元素将已经添加到文档中.. 并且能够发现

```
success:function(response){
  ....//your stuff;
  $('#content').find('pre').snippet('html');
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:07:17.553

你为什么不试试：

```
$('#table-body').on('click', 'a', function(event) {
    $.ajax({
        // some settings here
        success: function(response) {
            // Append some data to the content div
            $newElemement=$(response)
            $('pre',$newElement).snippet('html')
            $('#content').append($newElement);
        }
    });    
}); 
```

# java - 具有 List 中对象的运行时类型的 List 的 toArray 方法

> ID：14833227
> 
> 赞同：1
> 
> 时间：2013-02-12T13:02:36.437
> 
> 标签：java, list, toarray

使用时`javax.mail.Message#setRecipeints`，我第一次注意到一个东西，想进一步了解它。

这是我的代码：

```
List<InternetAddress> ccRecipients = new ArrayList<InternetAddress>();
// have a valid and working 
// method that fills the list with the data (InternetAddress objects)
message.setRecipients(
         RecipientType.CC, ccRecipients.toArray(new InternetAddress[0])); 
```

在这里，我不明白为什么我们需要创建一个新`InternetAddress`数组并在`toArray`方法中的第 0 个索引处传递元素？

谁能解释为什么我们需要这样做？

我认为这与这种特殊的`toArray`方法有关。

我从 API 文档中阅读了以下内容，但没有得到最后一部分（粗体）：

*与 toArray() 方法一样，此方法充当基于数组的 API 和基于集合的 API 之间的桥梁。此外，**此方法允许对输出数组的运行时类型进行精确控制，并且在某些情况下可用于节省分配成本**。*

它如何节省分配成本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:17:35.337

`toArray()`没有参数返回类型，`Object`但`toArray(T[] a)`返回类型`T[]`。这是 List 的通用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:19:00.630

这是您正在使用的方法的[来源：](http://www.docjar.com/html/api/java/util/ArrayList.java.html)`ArrayList.toArray()`

```
public <T> T[] toArray(T[] a) {
  if (a.length < size)
    // Make a new array of a's runtime type, but my contents:
    return (T[]) Arrays.copyOf(elementData, size, a.getClass());
  System.arraycopy(elementData, 0, a, 0, size);
  if (a.length > size)
    a[size] = null;
  return a;
} 
```

首先，您没有传入对索引 0 的引用，而是一个长度为 0 的新数组。假设您的列表不为空，则新的零长度数组将太小而无法容纳它，而新的数组创建了正确的类型：`Arrays.copyOf(elementData, size, a.getClass());`

你可以传入一个足够大的数组来保存整个列表，然后将列表复制到你提供的数组中：`System.arraycopy(elementData, 0, a, 0, size);`至于这是否会节省你的分配成本，很难说。`System.arraycopy()`是本机方法，即平台相关。在没有看到它使用的代码的情况下，您只需要依赖一个事实，即本机实现通常应该更高效，并相信 JVM 编写者知道他们在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:19:09.070

该方法的参数是一个数组，如果它足够大，则可以接收 Collection 的内容。我认为这种情况是，如果您已经分配了一个足够大以容纳集合的数组，则可以使用相同的数组而不是分配一个新数组。

请注意，您的代码正在传递一个长度为 0 的数组——只有当集合为空时才会返回该数组。如果 List 中有任何项目，将分配并返回一个新数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:22:25.627

要使用它来节省分配成本，数组参数必须至少与 List 一样长。在这种情况下，数据被复制到参数引用的数组中。假设 List 总是相同的大小，你总是希望它是相同的元素类型，并且一次只需要一个数组。您可以重用相同的数组，而不是每次调用 toArray 时都创建一个新数组。

在实践中，更通常的做法是每次都创建一个新数组，但如果使用 List 大小而不是 0，则 toArray 将能够使用它。

# excel - 在工作簿之间共享一个模块？

> ID：14833228
> 
> 赞同：2
> 
> 时间：2013-02-12T13:02:41.747
> 
> 标签：excel, vba

在不编写插件的情况下，通过模块在不同的工作簿中共享 VBA 代码的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:59:42.490

您可以将其保存到您的个人宏工作簿中。

单击“记录宏”，然后从“将宏存储在：”下拉列表中选择“个人宏工作簿”。

# extjs4.1 - 如何在extjs4.1中使用rest webservice

> ID：14833231
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:02:58.800
> 
> 标签：extjs4.1

我是extjs的新手。我想学习如何在extjs4.1中使用rest webservice。有人可以提供好的教程吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:16:25.293

这是一个很好的起点：[http ://docs.sencha.com/ext-js/4-1/#!/guide](http://docs.sencha.com/ext-js/4-1/#!/guide)

# ember.js - 如何手动创建 ember-data 对象数组？

> ID：14833232
> 
> 赞同：1
> 
> 时间：2013-02-12T13:02:59.110
> 
> 标签：ember.js, ember-data

我需要在我的 ember.js 应用程序中覆盖对特定对象的查找。如果我打算返回一个“单个” ember-data 对象，那么我下面的内容非常有用，但是我将如何修改它以返回一个对象数组（这样我返回一个`AdapterPopulatedRecordArray`或`RecordArray`（说实话不确定区别）） .

```
App.Foo = DS.Model.extend({
  name: DS.attr('string')
}).reopenClass({                                                                                                                       
    find: function() {
        var result = Ember.Object.create({
          isLoaded: false
        });

        $.getJSON('/api/foos/', function(data) {
          result.setProperties(data);
          result.set('isLoaded', true);
        });

        return result;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:18:45.280

您可以返回一个数组，如下所示：

```
App.Foo = DS.Model.extend({
    name: DS.attr('string')
}).reopenClass({
    records: [],
    find: function() {
        var self = this;
        $.getJSON('/api/foos/', function(response) {
            response.forEach(function(record){
                self.records.addObject(App.Foo.createRecord(record))                                                           
            }, this)
        });
        return this.records;
    }
}); 
```

这个例子（改编自[http://trek.github.com/](http://trek.github.com/)）返回一个简单的数组。返回一个记录数组（或适配器填充的记录数组）需要更多的工作，但它是相同的基本模式。查看此测试以了解所需内容的详细信息：

[https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/record_array_test.js](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/record_array_test.js)

# web-services - Jndi 名称连接/Restful webservice

> ID：14833235
> 
> 赞同：0
> 
> 时间：2013-02-12T13:03:13.950
> 
> 标签：web-services, rest, websphere, jndi

我必须编写一个非常简单的 RESTful Web 服务，它必须将数据库与 jndi 连接起来

名称连接，服务将上传到 websphere 应用服务器。

我不知道如何用 jndi 名称连接数据库，请帮助我。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:21:25.007

类似于以下内容：`Context ctx = new InitialContext(); DataSource ds = (DataSource)ctx.lookup("<jndi-name>"); Connection conn = ds.getConnection();`

# php - 将当前时间与 php 中的 00:00:00 进行比较

> ID：14833241
> 
> 赞同：-3
> 
> 时间：2013-02-12T13:03:41.473
> 
> 标签：php, time

我想在午夜时在我的 php web 服务中执行一些操作，即当前时间是 24:00:00 / 00:00:00

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:08:33.273

创建一个在特定时间运行的计划任务并将您的脚本运行为：

```
php -f o/script.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:09:38.343

将 PHP [Cron 作业](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)与 cPanel 一起使用

cPanel 简单的 Cron

您可以开始使用 cPanel 中内置的简单 cron 工具。

1) 前往 Cpanel

2）单击cron作业选项卡

3）设置时间和页面网址为： https: [//www.yoursite.com/page.php](https://www.yoursite.com/page.php)

要运行的命令：

```
 /usr/local/bin/php -f /home/(username)/public_html/page.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:15:31.613

您可以使用[localtime()](http://www.php.net/manual/en/function.localtime.php)来获取当前时间，然后使用 if 语句进行处理。

例如。

```
$localtime = localtime();
if ($localtime[2] == 0) {
    code;
} 
```

请记住，这仅适用于持续执行的脚本（例如 index.php），如果您希望脚本执行而不管它当前是否在所需时间执行，则需要使用 chron 作业。

# java - Facebook登录重定向到本地主机

> ID：14833244
> 
> 赞同：1
> 
> 时间：2013-02-12T13:03:52.763
> 
> 标签：java, facebook, spring-social

我正在一个网站上工作，该网站使用 Spring Social 的 Facebook 登录。目前我正在玩版本 3 的[示例](https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-quickstart-3.0.x)。

在 localhost 上，这按预期工作。但是，在线时，我收到重定向 URI 无效的错误消息。Facebook 应用程序中的`Site URL`定义为`http://subdomain.domain.net/myapp/`。Facebook 发送的 redirect_uri 是`http://localhost:8080/myapp/signin`（取自 URL 错误页面参数）。这是我第一次使用的配置。

我已经尝试创建一个新的 Facebook 应用程序，以防 Facebook 没有正确更新配置。我还尝试将`ConnectController`应用程序 URL 添加到 Spring Social。每次我得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:34:24.203

原来我犯了一个简单的配置错误。我认为配置 . 就足够了`ConnectController`，但我错过了`ProviderSignInController`. 就像[文档中的这里](http://static.springsource.org/spring-social/docs/1.0.x/reference/htmlsingle/#signin_using)

# scripting - 将操作结果保存到 .BAT 文件中的变量中

> ID：14833245
> 
> 赞同：0
> 
> 时间：2013-02-12T13:03:58.513
> 
> 标签：scripting, batch-file, return-value

我有以下 BAT 文件工作正常：它连接到特定的 sql 服务器并选择 getdate()

我真正想要的是测试服务器是否可连接。

我想要类似的东西：

```
set is_connectable  = call sqlcmd.exe %%SERVITORE%% 
```

有什么办法可以做到这一点？

谢谢和问候马塞洛

```
@echo off
color fc
cls
echo.
@ECHO --- BEGIN THE SCRIPT 1 ----
echo.
@echo the SERVITORE is "%1"
echo.
echo.

if "%1"=="" GOTO USAGE

set SERVITORE=-Stcp:%1% -Q " USE MASTER select getdate() "

call sqlcmd.exe %%SERVITORE%%

color 6
GOTO THE_END

:USAGE
echo.
echo USAGE:
echo. 
ECHO the first parameter is the SERVITORE server.
echo example 1 SERVITORE108
echo.
ECHO the second parameter is optional 
echo but if not supplied the default is \\SERVITORE\folder2$
echo.

echo ATB
echo.

:THE_END
color 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:20:56.237

运行查询并将结果设置为 DOS 环境变量很容易。例如，您可以执行以下操作以从 SQL Server 实例获取日期/时间（SQL Server 在我的实例中本地运行）：

```
for /f "skip=2 delims=" %%i in ('sqlcmd -S localhost -E -Q "set nocount on; select getdate() as [Now]"') do set is_connectable=%%i 
```

但是，`is_connectable`此示例中设置的环境变量将具有任意值，这将使其难以评估。由于您只是试图验证 SQL Server 是否存在、活动且响应迅速，因此您应该运行一个查询来创建更可预测的输出，如下所示：

```
@echo off

:: Make sure the variable is undefined to start with
set is_connectable=

:: Make the connection and run a query that should always return '1'
for /f "skip=2 delims= " %%i in ('sqlcmd -S localhost -E -Q "set nocount on; select 1 as [Rows] into #temp; select @@rowcount as [Rows]; drop table #temp"') do set is_connectable=%%i

:: Verify if SQL Server is avaialble
if not defined is_connectable goto NotFound
if "%is_connectable%"=="1" goto Found
goto UnknownError

:Found
echo SQL Server was found and returned '1' as expected...
goto TheEnd

:NotFound
echo SQL Server was not found...
goto TheEnd

:UnknownError
echo SQLServer was found, but the return value was '%is_connectable%' instead of '1'...
goto TheEnd

:TheEnd 
```

# java - 使用曼哈顿距离启发式的滑动拼图求解器

> ID：14833248
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:04:05.510
> 
> 标签：java, artificial-intelligence

我和我的朋友创建了一个[滑动拼图程序](http://www.uploadmb.com/dw.php?id=1360672499)。然后我们编写了曼哈顿距离的方法，并在每次移动后显示 MD 结果。我们首先认为下一步的最佳棋子是 MD 结果最少的棋子。问题是我们有时在至少两个方向（左、右、上、下）上得到相同的曼哈顿距离。所以我们认为我们需要其他条件和算法来选择最佳移动。所以请告诉我们需要哪些要求以及程序有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:48:24.210

你必须考虑**状态**而不是**瓷砖**。您需要考虑一个状态的所有 MD，而不仅仅是一个图块。在这种情况下，如果您有两个具有相同 MD 和的状态，则可以采用 FIFO 方法，但必须查找已访问状态以避免循环。

# servicestack - ServiceStack 基本认证

> ID：14833250
> 
> 赞同：3
> 
> 时间：2013-02-12T13:04:12.630
> 
> 标签：servicestack

我对 ServiceStack 身份验证位相当陌生。首先我配置了基本身份验证：

```
private void ConfigureAuth(Funq.Container container)
{
    var authFeature = new AuthFeature(() => new AuthUserSession(),
        new IAuthProvider[] { new BasicAuthProvider() }
    );
    authFeature.IncludeAssignRoleServices = false;

    // Default route: /auth/{provider}
    Plugins.Add(authFeature);

    container.Register<ICacheClient>(new MemoryCacheClient());
    container.Register<IUserAuthRepository>(GetAuthRepository());
} 
```

1.  如何使用服务请求进行身份验证？例如：
    `myweb/api/auth/basic?Userid=test@Password=234`

2.  受保护的身份验证服务端点。呼叫`myweb/api/auth/basic?Userid=test@Password=234`将重定向`/Account/LogOn`

我需要一个非常简单的身份验证机制。客户端可以简单地通过发送 JSON 请求进行身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:30:54.443

有关如何使用 Basic Auth 进行身份验证的示例，请参阅[ServiceStack AuthTests 。](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/AuthTests.cs)

# javascript - 同时执行javascript和asp.net渲染

> ID：14833252
> 
> 赞同：1
> 
> 时间：2013-02-12T13:04:36.083
> 
> 标签：javascript, asp.net

假设我有一个`.gif`：

```
<img alt="" src="./wait.gif" /> 
```

我有一个标签：

```
<asp:Label ID="tbnotif" runat="server" ReadOnly="True" Text="" ></asp:Label> 
```

还有一个按钮：

```
<asp:Button ID="Button1" runat="server" Text="Pubblica" OnClientClick="show_table();add_gif();" OnCommand="Button1_Click" /> 
```

我正在使用aspx页面，问题是：

我可以单击按钮并同时`.gif`使用 JavaScript 显示并从后面的代码中更改标签吗？或者事情永远不会同时显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:19:15.263

在我看来，您想在回发之间显示一个忙碌的动画 gif，对吗？

这是我的做法（除非我使用具有自己的进度指示器服务器控件的更新面板）

```
<script type="text/javascript">
    window.onbeforeunload = function(){showGif();};
</script> 
```

当页面因为回发而卸载时（单击 POST 到服务器的按钮），显示 gif 图像。当新页面从服务器返回时，图像将消失，因为它现在是一个新页面。

更改标签是一个小操作，因此您可能永远看不到图像，因为请求/响应会很快转过来。为了进行测试，您可以在按钮处理程序中添加 System.Threading.Thread.Sleep(3000) 以模拟更长的运行过程。

编辑

AJAX 是你唯一的选择，但有很多方法。一种可能的解决方案：

将标签放在 UpdatePanel 服务器控件中，将按钮放在更新面板之外，但在更新面板的 aspx 页面中的声明性标记中将其设置为 AsyncPostbackTrigger。使用 OnClientClick 处理程序客户端或使用 JQuery 将客户端单击处理程序附加到按钮显示 gif。

aspx

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="Default.aspx.vb" Inherits="AjaxLabel._Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager runat="server" ID="ScriptManager1"></asp:ScriptManager>
    <div>
        <asp:UpdatePanel runat="server">
            <ContentTemplate>
                <asp:Label runat="server" ID="ajaxLabel">Initial value</asp:Label>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="asyncButton" EventName="Click" />
            </Triggers>
        </asp:UpdatePanel>

        <img id="theImage" src="img/success.png" style="display: none;" />

        <asp:Button runat="server" ID="asyncButton" Text="Client & Server Click" OnClientClick="showImage();" OnClick="asyncButton_Click" />

    </div>
    </form>

    <script type="text/javascript">

        function showImage() {

            document.getElementById('theImage').style.display = "block";
        }

    </script>

</body>
</html> 
```

aspx.cs

```
using System;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace AjaxLabel
{
    public partial class Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void asyncButton_Click(object sender, EventArgs e)
        {
            ajaxLabel.Text = "Server-side value";
        }
    }
} 
```

# c# - 在xml文件中用特殊字符<替换什么

> ID：14833253
> 
> 赞同：-2
> 
> 时间：2013-02-12T13:04:44.673
> 
> 标签：c#, xml, xml-parsing, linq-to-xml

我发现我们可以`&lt;`用 the替换，`<`但它不起作用。有没有我需要替换的其他字符`<`

我替换`&`了`&amp;`它，它工作正常。

我在以下元素标签中遇到问题。

```
<city>north<eastcity</city> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T06:19:06.483

**尝试这个：**

```
 String newText = System.Security.SecurityElement.Escape(rawText); 
```

**有关这方面的更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.security.securityelement.escape.aspx)。希望这可以帮助。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:07:12.333

尝试更换

> `<`

和

> `&amp;lt;`

和

> `>`

和

> `&amp;gt;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:08:10.313

为什么需要替换那些字符？

XML的序列化/反序列化为您处理。您可以使用`XmlTextReader`As for special chars，检查堆栈上的现有答案： [XML Special Character Handling](https://stackoverflow.com/questions/11229524/xml-special-character-handling)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:08:45.300

你必须更换

```
< 
```

经过

```
&lt; 
```

（而不是相反）。

请查看 XML 定义（例如 wikipedia 页面）以了解转义设施。

# javascript - jquery将侦听器添加到附加内容

> ID：14833261
> 
> 赞同：6
> 
> 时间：2013-02-12T13:05:10.590
> 
> 标签：javascript, jquery, jquery-append

我有一些这样的 jQuery 代码：

```
$("#add").click(function(event){
    $("#list").append('<a class="remove" href="#">x</a>');

    return false;
});

$('.remove').live('click', function(){
    alert("123");
}); 
```

如果单击 class=remove，我希望它发出警报 123。但这不会发生。我认为这是一个简单的想法，但我必须遗漏一些东西。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T13:06:18.960

Live 已弃用，请继续使用

```
$(document).on('click','.remove',function(){
alert("123");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:07:37.727

无需委托即可添加元素和绑定事件的另一种方法：

```
$("#add").click(function(event){
    $("<a />", {
        "class": "remove",
        href: "#",
        text: "x"
    }).on("click", function() {
        alert("123");
        return false;
    }).appendTo("#list");

    return false;
}); 
```

避免使用`live`方法，因为它已被弃用并最终在 jQuery 的最后一个版本中被删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T13:16:53.517

尝试委托功能..因为您将其附加到`list`...您可以使用`#list`性能更好的`document`

```
 $('#list').on('click','.remove', function(){
     alert("123");
}); 
```

您可以通过链接阅读有关[on()](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)事件的更多信息

# java - Guice：怎么做后期绑定？

> ID：14833263
> 
> 赞同：5
> 
> 时间：2013-02-12T13:05:28.990
> 
> 标签：java, guice

我正在尝试使用 Google Guice 进行一些后期绑定。

```
public class MyClassProvider implements Provider<MyClass>{
    private DependencyClass dep;
    private WebService webservice;

    @Inject
    MyClassProvider(DependencyClass dep, WebService webservice){
        this.dep = dep;
        this.webservice = webservice;
    }

    public MyClass get() {
        MyClass myclass = webservice.call(dep);
    }
} 
```

我在模块中有一个绑定：

```
 bind(MyClass.class).toProvider(MyClassProvider.class).in(ServletScopes.REQUEST); 
```

我有另一个类 ConsumerClass，它需要使用 MyClass。问题来了，因为 dep 直到某个点都为空，我将无法将 MyClass 注入 ConsumerClass，因此我注入了 Provider。

```
public class ConsumerClass {
    private MyClassProvider myClassProvider;

    @Inject
    public ConsumerClass(Provider<MyClass> myClassProvider){
       this.myClassProvider = myClassProvider;
    }

    ......

    public void myfunction() {
        // Here dep is initialized and become non-null here.

        // Then, I call
        MyClass myClass = myClassProvider.get();

    }
} 
```

我遇到的问题是，当我将 MyClassProvider 注入 ConsumerClass 时，它试图创建 MyClassProvider 的实例，因为当时 dep 为空，它失败了。将其注释为 @Nullable 并不能解决我的问题，因为无论如何我都需要在提供程序的 get() 方法中使用 dep。

有什么方法可以让 Guice 仅在调用 get() 方法时创建提供程序实例？或者在这个问题上还有其他解决方法吗？

非常感谢。

* * *

杰夫：谢谢你的回复。

你的意思是我可以将我的代码更改为：

```
public class MyClassProvider implements Provider<MyClass>{
        private Provider<DependencyClass> depProvider;
        private WebService webservice;

        @Inject
        MyClassProvider(Provider<DependencyClass> depProvider, WebService webservice){
            this.depProvider = depProvider;
            this.webservice = webservice;
        }

        public MyClass get() {
            DependencyClass dep = depProvider.get(); 
            MyClass myclass = webservice.call(dep);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:00:21.077

替换`DependencyClass`为`Provider<DependencyClass>`。Guice 不需要`toProvider`或`@Provides`方法来访问 Guice 可以提供的任何类型的 Provider。

这种方式`dep`只需要在调用 MyProvider 时提供，而不是实例化。

# android - 如何从android的默认资源中获取位图？

> ID：14833268
> 
> 赞同：9
> 
> 时间：2013-02-12T13:05:41.667
> 
> 标签：android, bitmap

嗨，我正在使用这种方式

```
Bitmap bm = BitmapFactory.decodeResource(getResources(), android.R.drawable.list_selector_background);

int c = bm.getPixel(bm.getWidth()/2, bm.getHeight()/2); 
```

但 bm在第二行`null`给出`NullPointerException`。

错误：

```
02-12 18:29:57.568: E/AndroidRuntime(5086):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at android.os.Looper.loop(Looper.java:137)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at java.lang.reflect.Method.invokeNative(Native Method)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at java.lang.reflect.Method.invoke(Method.java:511)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at dalvik.system.NativeStart.main(Native Method)
02-12 18:29:57.568: E/AndroidRuntime(5086): Caused by: java.lang.NullPointerException
02-12 18:29:57.568: E/AndroidRuntime(5086):     at com.example.showhide.MainActivity.onCreate(MainActivity.java:38)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at android.app.Activity.performCreate(Activity.java:4465)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-12 18:29:57.568: E/AndroidRuntime(5086):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T14:02:26.083

这是因为这个资源是 StateListDrawable，而不是 Bitmap。你应该使用：

```
 Drawable d = getResources().getDrawable(android.R.drawable.list_selector_background); 
```

如果您确定它是位图，请将可绘制对象转换为 BitmapDrawable 并从那里获取位图：

```
Drawable currentState = d.getCurrent();
if(currentState instanceof BitmapDrawable)
    Bitmap b = ((BitmapDrawable)currentState).getBitmap(); 
```

位图也可能为空。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T13:25:31.033

你应该使用`Resources.getSystem()`而不是`getResources`

```
Bitmap bm = BitmapFactory.decodeResource(Resources.getSystem(), android.R.drawable.list_selector_background); 
```

因为您尝试访问的资源不在您自己的资源中，而是在系统的资源中。

编辑：

在错误的资源旁边，您试图从作为选择器（xml 文件）的资源中获取可绘制对象。请获取正确的可绘制资源:) [http://androidxref.com/4.1.1/xref/frameworks/base/core/res/res/drawable/list_selector_background.xml](http://androidxref.com/4.1.1/xref/frameworks/base/core/res/res/drawable/list_selector_background.xml)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-06T08:41:45.417

Without using BitmapFactory:

```
Bitmap bmp = ((BitmapDrawable) context.getResources()
             .getDrawable(R.drawable.list_selector_background)).getBitmap(); 
```

# .net - 数据库中损坏的 PDF 数据

> ID：14833270
> 
> 赞同：0
> 
> 时间：2013-02-12T13:05:52.113
> 
> 标签：.net, sql, sql-server-2008, devexpress, xaf

我正在使用 MS SQL 2008 我有一个带有 varbinary(max) 类型列的
表 该表有许多上传的 pdf 文件（字节数组）
我正在
通过以下代码将此字节转换为 pdf 文件：

```
using (FileStream fs = new FileStream
                (@"D:\EIFiles\test.pdf", FileMode.Create))
        {
            fs.Write(byte, 0, byte.Length);
        } 
```

许多 pdf 文件可以打开，但其中一些无法打开，因为 adobe reader 警告“损坏的文件”消息。注意：所有这些都可以通过使用该数据库的程序（用 Devexpress XAF 编写）打开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:03:56.483

默认类型的 DevExpress XAF 实现`FileData`在保存之前压缩流 (Gzip)。如果不先解压缩流，您将无法读取内容。您可以使用`CompressionUtils.Decompress()`DevExpress.Persistent.Base 程序集中的哪个。

或者，您可以实现自己的版本`FileData`并更改此行为。查看源代码（或使用反编译器）并`[ValueConverter(typeof(CompressionConverter))]`从属性中删除`Content`属性。

# java - 将 int 传递给 spring 属性

> ID：14833272
> 
> 赞同：6
> 
> 时间：2013-02-12T13:05:56.130
> 
> 标签：java, spring

我想传递**int**而不是spring **PropertyPlaceholderConfigurer**默认的**字符串**。

 **```
<property name="mailServerPort" value="${mail.port}" /> 
```

这给了我错误，因为 mailServerPort 是 int 类型，而 ${mail.port} 是字符串类型。

如何将 ${mail.port} 转换为 int？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T13:25:37.960

根据我的说法，如果端口的值是正确的整数，则转换应该可以正常工作。

不过，如果您遇到问题，您可以尝试使用 SpringExpressionLanguage(SpEL) 进行转换。

```
<property name="mailServerPort" value="#{ T(java.lang.Integer).parseInt(mail.port) }"/> 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T13:09:33.593

如果可能，Spring 会根据目标类型处理转换。

你确定你设置

```
mail.port 
```

int 的值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-05T08:47:41.607

Spring 应该自动处理它，尽管如果它给出错误，您可以使用*type*属性属性标记并提供和指定要求类型。对于前。

```
<property name="mailServerPort" type="int" value="${mail.port}" /> 
```

希望这可以帮助.. ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-24T09:54:18.870

如果提供了属性值，上述所有答案都可以正常工作。如果它是空的，你可以使用 SpringExpressionLanguage 来处理这种情况并提供一个默认值：

```
<property name="mailServerPort" value="#{ '${mail.port}'.isEmpty() ? '8080' : '${mail.port}' }"/> 
```**

# visual-studio-2010 - ADO.NET EF - 无法连接到我的数据库（使用 Visual Studio 2010）

> ID：14833276
> 
> 赞同：0
> 
> 时间：2013-02-12T13:06:13.600
> 
> 标签：visual-studio-2010, ado.net-entity-data-model

所以我在这个问题上苦苦挣扎了 4 个多小时，我不知道再去哪里看。我为绝对初学者遵循本教程`ADO.NET Entity Framework`- [参见教程][1] [1]：http: [//msdn.microsoft.com/en-us/data/jj193542](http://msdn.microsoft.com/en-us/data/jj193542) 我正在使用`Microsoft SQL Server 2012`并且我正在使用这个`App.Config`文件我的项目 ：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=sqlserver2012; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

但是我不断收到错误，当我使用此代码时，错误是：`**An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string.**`

我完全是新手，`ADO.NET Entity Framework`但正如我所见，问题可能出在`defaultConnectionFactory`配置中。但无论如何，我不知道如何继续以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:08:11.987

如果您实际上在本地主机上有名为 sqlserver2012 的 SQL Server 实例 zour connectionString 应该如下所示

```
<parameter value="Data Source=localhost\sqlserver2012; Integrated Security=True; MultipleActiveResultSets=True" /> 
```

干杯，T。

# javascript - 主干破坏没有服务器通信

> ID：14833277
> 
> 赞同：1
> 
> 时间：2013-02-12T13:06:14.013
> 
> 标签：javascript, rest, backbone.js, coffeescript, slim

这是我的注销点击事件：

```
logoutClicked: (event) ->
  event.preventDefault()
  console.log 'userPanel.logoutClicked -> event', event
  console.info App.session
  App.session.destroy
    wait: true

    success: (model, res) ->
      console.log 'session.destroy.success -> model/res', model, res

    error: (model, res) ->
      console.log 'session.destroy.error -> model/res', model, res 
```

这是我的会话模型：

```
class App.Model.Session extends Backbone.Model

  initialize: ->
    console.log 'Session.init'

  urlRoot: '/session' 
```

这是我的苗条后端路线：

```
$app->delete('/session', function () {
  session_unset();
  exit(true);
}); 
```

当我触发 logoutClicked 事件时，一切正常，但我无法通过我的萤火虫看到任何服务器通信（没有 DELETE 或 GET 到 /session ...）。

萤火虫输出：

```
userPanel.logoutClicked -> event Object { originalEvent=Event click, type="click", timeStamp=18807379, altri elementi...}
Session { cid="c1", attributes={...}, _changing=false, altri elementi...}
session.destroy.success -> model/res Session { cid="c1", attributes={...}, _changing=false, altri elementi...} null 
```

正如您所见，没有触发 DELETE 请求...并且我从 session.destroy 成功回调中收到空 res...我是 Backbone 的新手，有什么建议吗？也许我必须设置 Backbone.sync？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:12:47.483

如果您在新模型上调用 Model.destroy(...)（其中 Model.isNew() === true）。.destroy(...) 不会做任何事情。

参考：

*   Model.isNew() [http://backbonejs.org/docs/backbone.html#section-67](http://backbonejs.org/docs/backbone.html#section-67)
*   Model.destroy() [http://backbonejs.org/docs/backbone.html#section-63](http://backbonejs.org/docs/backbone.html#section-63)

“强制”销毁的一种方法是手动将模型的 ID 设置为非 NULL，例如...

```
App.Session.set('id', '_session_id_'); 
```

但是，当您检索 App.Session 时，它的 ID 应该已经设置为会话 ID。在这种情况下，从服务器检索会话时，您可能需要手动执行此步骤。

* * *

边注

如果你想调用你的 ID 属性`sessionID`而不仅仅是 id，你也可以覆盖默认`idAttribute`的 on `Backbone.Model`。

```
App.Session.Model
  idAttribute: 'sessionId' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:22:51.453

App.session 有ID吗？

只有具有 id 属性的模型才能被销毁。

换句话说，您需要先保存。

# c# - .NET 中的数组分配

> ID：14833279
> 
> 赞同：2
> 
> 时间：2013-02-12T13:06:15.037
> 
> 标签：c#, .net, gcallowverylargeobjects

问题是关于.net 中数组的分配。我在下面有一个示例程序，其中我可以获得的最大数组是长度。我将长度增加到 +1，它给出了 outofMemory 异常。但是如果我保持长度并删除注释，我可以分配 2 个不同的大数组。两个数组都小于 .net 允许的 2 GB 对象大小，总内存也小于虚拟内存。有人可以提出任何想法吗？

```
 class Program
    {
        static int length = 203423225;
        static double[] d = new double[length];
        //static int[] i = new int[15000000];
        static void Main(string[] args)
        {

            Console.WriteLine((sizeof(double)*(double)length)/(1024*1024));

            Console.WriteLine(d.Length);
            //Console.WriteLine(i.Length);
            Console.WriteLine(Process.GetCurrentProcess().VirtualMemorySize64.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T14:52:38.053

32 位进程必须从可用的地址空间为数组分配虚拟内存。默认为 2 GB。其中包含代码和数据的混合。分配是根据现有分配之间的漏洞进行的。

这样的分配总是失败不是因为没有更多的虚拟内存，而是因为可用的空洞不够大而失败。你要求一个大洞，获得 1.6 吉字节是非常罕见的，并且只能在不加载任何额外 DLL 的非常简单的程序上工作。基础差的 DLL 是一种将大洞一分为二的好方法，从而大大降低了这种分配成功的几率。更典型的首次尝试工作分配约为 650 兆字节。第二次分配没有失败，因为还有另一个可用的孔。在程序运行一段时间并且地址空间变得碎片化之后，几率会大大降低。90 MB 分配可能会失败。

您可以了解如何使用 SysInternals 的 VMMap 实用程序为程序划分虚拟内存地址空间。

一个简单的解决方法是将 EXE 项目的 Platform target 设置为 AnyCPU 并在 64 位操作系统上运行程序。它将有大量可用的可寻址虚拟内存空间，您只会受到页面文件的最大允许大小和 .NET 2 GB 对象大小限制的限制。.NET 4.5 中使用新配​​置`<gcAllowVeryLargeObjects>`元素解决的限制。即使是 32 位程序也可以通过 editbin.exe 的 /LARGEADDRESSAWARE 选项在 64 位操作系统上利用可用的 4 GB 32 位地址空间，您必须在构建后事件中运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:34:56.160

这是因为在为数组分配内存时，内存必须是连续的（即数组必须作为一大块内存分配）。即使总共有足够的空间来分配数组，如果空闲地址空间被分割，那么内存分配仍然会失败，除非这些空闲空间中最大的空间足以容纳整个数组。

# algorithm - 允许共享开始/结束顶点的定向最大加权二分匹配

> ID：14833281
> 
> 赞同：21
> 
> 时间：2013-02-12T13:06:23.083
> 
> 标签：algorithm, graph, complexity-theory, matching

令 G (U u V, E) 为加权有向二部图（即 U 和 V 是二部图的两组节点，E 包含从 U 到 V 或从 V 到 U 的有向加权边）。这是一个例子：

![二部有向加权图](../Images/e1731fd148c5ef4508a376f024ae7752.png)

在这种情况下：

```
U = {A,B,C} 
V = {D,E,F} 
E = {(A->E,7), (B->D,1), (C->E,3), (F->A,9)} 
```

**定义：** *DirectionalMatching*（我创造了这个术语只是为了让事情更清楚）：一组可以共享开始或结束顶点的有向边。也就是说，如果 U->V 和 U'->V' 都属于*DirectionalMatching*，则 V /= U' 和 V' /= U 但可能是 U = U' 或 V = V'。

**我的问题：**如何有效地找到一个*DirectionalMatching*，如上所述，用于最大化其边权重总和的双向加权图？

*高效*，我的意思是多项式复杂性或更快，我已经知道如何实现一种天真的蛮力方法。

在上面的示例中，最大加权*DirectionalMatching*为：{F->A,C->E,B->D}，值为 13。

正式证明这个问题与图论中任何其他众所周知的问题的等价性也是有价值的。

谢谢！

**注 1：** 此问题基于[最大加权二分匹配 _with_ 有向边](https://stackoverflow.com/questions/14824320/maximum-weighted-bipartite-matching-with-directed-edges)，但额外放松允许匹配中的边共享起点或终点。由于这种放松有很大的不同，我创建了一个独立的问题。

**注2：**这是一个最大**重量**匹配。基数（存在多少边）和匹配覆盖的顶点数与正确结果无关。只有最大重量很重要。

**注2：**在我研究解决问题的过程中，我发现了这篇论文，我认为这对试图找到解决方案的其他人会有所帮助：[Alternating cycles and paths in edge-colored multigraphs: a survey](http://www.cs.rhul.ac.uk/~gutin/paperstsp/alt.pdf)

**注意 3：**如果有帮助，您也可以将图视为等效的 2 边彩色无向二部多重图。然后问题公式将变成：*找到具有最大权重和的没有颜色交替路径或循环的边集。*

**注 4：**我怀疑这个问题可能是 NP 难的，但我对减少没有那么经验，所以我还没有设法证明它。

**又一个例子**：

想象一下你有

4个顶点：`{u1, u2}` `{v1, v2}`

4条边：`{u1->v1, u1->v2, u2->v1, v2->u2}`

那么，不管它们的权重如何，`u1->v2`和`v2->u2`不能在同一个*DirectionalMatching*`v2->u2`中，和也不能`u2->v1`。但是`u1->v1`and `u1->v2`can, and so can `u1->v1`and `u2->v1`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T22:13:11.600

`G'`从`G`如下定义一个新的无向图。

1.  `G'`每个有向边都有一个权重的节点`(A, B)`，权重为`w``(A, B)``w``G`
2.  `G'``((A, B),(B, C))`如果 (A, B) 和 (B, C) 都是 G 中的有向边，则具有无向边

[http://en.wikipedia.org/wiki/Line_graph#Line_digraphs](http://en.wikipedia.org/wiki/Line_graph#Line_digraphs)

现在在 中找到一个最大（加权）独立顶点集`G'`。

[http://en.wikipedia.org/wiki/Vertex_independent_set](http://en.wikipedia.org/wiki/Vertex_independent_set)

## 编辑：这一点之后的东西只有在所有边权重都相同的情况下才有效——当边权重有不同的值时，这是一个更困难的问题（谷歌“最大权重独立顶点集”可能的算法）

通常这将是一个 NP-hard 问题。然而，`G'`它是一个二分图——它只包含偶数循环。在二分图中找到最大（加权）独立顶点集*不是*NP 难的。

您将运行的算法`G'`如下。

1.  找到 的连通分量`G'`，比如说`H_1, H_2, ..., H_k`
2.  对每个`H_i`节点进行 2 种着色（比如红色和蓝色）。这里的食谱方法是对`H_i`交替颜色进行深度优先搜索。一种简单的方法是`H_i`根据相应的边`G`是从`U`到`V`（红色）还是从`V`到`U`（蓝色）来为每个顶点着色。
3.  可供选择的节点的两个选项`H_i`是所有红色节点或所有蓝色节点。选择权重较高的彩色节点集。例如，红色节点集的权重等于`H_i.nodes.where(node => node.color == red).sum(node => node.w)`。调用权重较高的节点集`N_i`。
4.  您的最大加权独立顶点集现在是`union(N_1, N_2, ..., N_k)`。

由于 中的每个顶点`G'`对应于 中的一个有向边`G`，因此您拥有最大的 DirectionalMatching。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-19T19:02:25.697

这个问题可以使用[匈牙利算法](http://en.wikipedia.org/wiki/Hungarian_algorithm)在多项式时间内解决。上面 Vor 的“证明”是错误的。

上述示例的问题结构化方法如下：

```
 D E F
A  # 7 9  
B  1 # #
C  # 3 # 
```

其中“#”表示负无穷大。然后，您使用匈牙利算法解析矩阵以确定最大匹配。如果要找到最小匹配，可以将数字乘以 -1。

# python - 使用python将pid号附加到unix文件名

> ID：14833282
> 
> 赞同：1
> 
> 时间：2013-02-12T13:06:24.780
> 
> 标签：python

在 shell 脚本中，我创建了一个带有 $$ 扩展名的文件名，如 filename.$$ 以附加 pid 号。我想在 python 中实现同样的目标。

如何在 python 中创建文件名.$$？

```
try:
    os.remove('/tmp/update_pid.ksh')
except OSError:
    pass

try:
    os.remove('/tmp/rollbackfile_pid.ksh')
except OSError:
    pass

fo = open('/tmp/update_pid.ksh','a')
fi = open('/tmp/rollback_pid.ksh','a') 
```

代替“pid”，我想要 pid 号。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:09:50.997

像这样：

```
os.remove('/tmp/update_%d.ksh' % os.getpid()) 
```

# android - 拍摄相机返回后，ActionBar 被剪切

> ID：14833283
> 
> 赞同：1
> 
> 时间：2013-02-12T13:06:32.843
> 
> 标签：android, actionbarsherlock

索尼爱立信手机存在问题。在 4.0.3、4.0.4、4.1.1 上测试。

Actionbarsherlock 4.2.0

试图做

```
activity.getSupportActionBar().hide(); 
activity.getSupportActionBar().show(); 
```

没有帮助！:(

![在此处输入图像描述](../Images/9e5d550eaf7bcdc73cf8ff5cec9891a6.png)

# java - 为什么在 JPA 实体关系中使用 @Many-to-one？

> ID：14833284
> 
> 赞同：1
> 
> 时间：2013-02-12T13:06:35.053
> 
> 标签：java, jakarta-ee, jpa, javabeans

我的问题可能看起来很傻。我是 JPA 的新手，并试图理解它的基本概念。我发现那里可以使用@Many-to-one 实体关系。我的问题是为什么有人想要在有@One-to-many 关系时使用它？我的意思是，拥有后者就足以了解关系并发送查询对吗？如果不是请解释。也许我对这两种关系的看法是完全错误的。请提供一个场景作为示例，以便我更好地理解。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:14:30.440

`@ManyToOne`并且`@OneToMany`都是用于描述单个双向关系的两侧的同一概念的一部分。

如果您希望关系是单向的 - 即其中一个实体不能遍历到另一个，您可以使用其中一个注释。要决定哪一个，您必须决定哪个实体应该知道关系，哪个不应该。

但通常你想要一个双向关系——然后你同时使用两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:44:58.210

`OneToMany`用于映射集合。如果您希望此关系是双向的，则需要`ManyToOne`在另一侧添加映射。

使用 Hibernate 映射：Person N <---> 1 地址

```
<class name="Person">
    <id name="id" column="personId"/>
    <many-to-one name="address" column="addressId"/>
</class>

<class name="Address">
    <id name="id" column="addressId"/>
    <set name="people">
        <key column="addressId"/>
        <one-to-many class="Person"/>
    </set>
</class> 
```

`ManyToOne`也可用于映射 2 个对象之间的依赖关系。在这种情况下，如果您希望关系是双向的，那么您需要`OneToOne`在另一侧添加映射。

使用休眠映射：Person 1 <---> 1 Address

```
<class name="Person">
    <id name="id" column="personId"/>
    <many-to-one name="address" column="addressId" unique="true"/>
</class>

<class name="Address">
    <id name="id" column="addressId"/>
   <one-to-one name="person" property-ref="address"/>
</class> 
```

# r - r中绘图区域内的子图

> ID：14833285
> 
> 赞同：2
> 
> 时间：2013-02-12T13:06:45.243
> 
> 标签：r, plot, voronoi, tessellation

```
> d
         [,1]        [,2]
1  -0.5561835  1.49947588
2  -2.3985544  3.07130217
3  -3.8833659 -4.29331711
4   3.1025836  5.45359160
5   0.7438354 -2.80116065
6   7.0787294 -2.78121213
7  -1.6633598 -1.17898157
8  -0.6751930  0.03466162
9   1.4633841  0.50173157
10 -3.2118758  0.49390863 
```

上表给出了我想要绘制的绘图的 x（第 1 列）和 y（第 2 列）坐标。

```
require(MASS)               # for sammon using which i generated the above coordinates
require(deldir)             # for voronoi tessellations
dd <- deldir(d[,1], d[,2])  # voronoi tessellations
plot(dd,wlines="tess")      # This will give me tessellations 
```

我希望将我的下一个细分绘制在上述细分的一个区域中。我可以使用 dd$dirsgs 获得形成镶嵌的线条。在此，镶嵌中的每条线都给出了它们的端点。前四列分别给出 x1,y1 和 x2,y2 坐标。这些坐标是线的端点。使用此数据，我可以在上述细分中的这一区域内绘制下一个子细分。

对于下一个子细分，您可以生成您选择的坐标。但我只希望它们位于上面绘制的曲面细分的一个区域中。

dd$dirsgs 中的 ind 1 和 ind2 给出了 'd' 中的点，它们由 dd$dirsgs 的前 4 列表示的线分隔。

例如，如果我们要在包含 d 中的第一个点的图中绘制子细分，那么第 1、2、9、12、17 行是形成 d 中第一个点的边界的行。使用这些信息，我们可以绘制该区域内的子细分吗？——</p>

我想我已经涵盖了理解我的问题所需的所有内容。如果还有我没有包含的更多数据，请告诉我。我会提供资料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:25:57.423

我理解它的方式（我的意思是如果我理解正确你的问题），因为`plot.deldir`允许传递一个参数`add=TRUE`，它可以直接完成。

```
d<-structure(list(V1 = c(-0.5561835, -2.3985544, -3.8833659, 3.1025836, 0.7438354, 
                  7.0787294, -1.6633598, -0.675193, 1.4633841, -3.2118758), V2 = 
                  c(1.49947588, 3.07130217, -4.29331711, 5.4535916, -2.80116065, 
                  -2.78121213, -1.17898157, 0.03466162, 0.50173157, 0.49390863)), .Names =        
                  c("V1","V2"), class = "data.frame", row.names = c(NA, -10L))

library(MASS)
library(deldir)
dd <- deldir(d[,1], d[,2])
plot(dd, wlines="tess") 
```

![在此处输入图像描述](../Images/87ee3ba98e539f9c9aff48f9a5b09d67.png)

首先让我们提取多边形的数据：正如您在评论中注意到的那样，它需要更多的处理，这是我之前认为的，因为其中的多边形`plot.deldir`是逐行绘制的，而不是一个接一个的多边形，因此线的顺序被打乱了`dd$dirsgs`。

```
ddd <- as.matrix(dd$dirsgs[dd$dirsgs$ind2==1,1:4])
d1poly <- rbind(ddd[1,1:2],ddd[1,3:4])
for( i in 2:nrow(ddd)){
    x <- ddd[ddd[,1]==d1poly[i,1], 3:4]
    d1poly <- rbind(d1poly, x)
    }
d1poly
         x2       y2
  -2.096990 1.559118
   0.303986 4.373353
x  1.550185 3.220238
x  0.301414 0.692558
x -1.834581 0.866098
x -2.096990 1.559118 
```

让我们使用 package 在感兴趣的多边形中创建一些随机数据`splancs`：

```
library(splancs)
rd <- csr(as.matrix(d1poly),10) # For 10 random points in the polygon containing point 1
rd
              xc        yc
 [1,] -1.6904093 1.9281052
 [2,] -1.1321334 1.7363064
 [3,]  0.2264649 1.3986126
 [4,] -1.1883844 2.5996515
 [5,] -0.6929208 0.8745020
 [6,] -0.8348241 2.3318222
 [7,]  0.9101748 1.9439797
 [8,]  0.1665160 1.8754703
 [9,] -1.1100710 1.3517257
[10,] -1.5691826 0.8782223

rdd <- deldir(c(rd[,1],d[1,1]),c(rd[,2],d[1,2])) 
# don't forget to add the coordinates of your point 1 so it s part of the sub-tessellation
plot(dd, wlines="tess")
plot(rdd, add=TRUE, wlines="tess") 
```

![在此处输入图像描述](../Images/2512ff9db7fe872926cb6b414ad40e9e.png)

**编辑**
关于限制边界内的线，我能想到的唯一解决方案是一个非常丑陋的解决方法：首先绘制子细分，然后隐藏感兴趣的多边形的外部，然后绘制全局细分。

```
plot(dd, wlines="tess", col="white", wpoints="none")
plot(rdd, wlines="tess", add=TRUE)

plotlim <- cbind(par()$usr[c(1,2,2,1)],par()$usr[c(3,3,4,4)])
extpoly <- rbind(plotlim, d1poly) 
#Here the first point of d1poly is oriented toward the upper left corner: if it is oriented otherwise the order of plotlim has to be changed accordingly

polygon(extpoly, border=NA, col="white")

plot(dd, wlines="tess", add=TRUE) 
```

![在此处输入图像描述](../Images/57f0169d6e943f4fa7099d0dfec892b0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T15:31:45.743

相反，您可能要考虑为此使用该`spatstat`包，因为它可以大大简化将新细分约束到现有细分的图块的过程。您的设置将如下所示：

```
library(spatstat)
# Plot the main tessellation and points
d<-structure(list(V1 = c(-0.5561835, -2.3985544, -3.8833659, 3.1025836, 0.7438354, 
                  7.0787294, -1.6633598, -0.675193, 1.4633841, -3.2118758), V2 = 
                  c(1.49947588, 3.07130217, -4.29331711, 5.4535916, -2.80116065, 
                  -2.78121213, -1.17898157, 0.03466162, 0.50173157, 0.49390863)), .Names =        
                  c("V1","V2"), class = "data.frame", row.names = c(NA, -10L))

d_points <- ppp(d$V1, d$V2, window=owin(c(-5, 8), c(-6, 6)))
main_tessellation <- dirichlet(d_points)
plot(main_tessellation, lty=3) # plot the tessellation
plot(d_points, add=TRUE) # add the points

# Plot the interior tessellation and points (color=red so the difference is clear)
# Arbitrarily choosing the 9th tile from the above tessellation:
target_poly <- owin(poly=main_tessellation$tiles[[9]]$bdry[[1]])

# Generate random set of points within the boundaries of the polygon chosen above
new_points <- runifpoint(6, win=target_poly)
# Generate and plot the new tessellation and points
new_tessellation <- dirichlet(new_points)
plot(new_tessellation, add=TRUE, col='red')
plot(new_points, add=TRUE, col='red') 
```

这将产生： ![在此处输入图像描述](../Images/4d1ecfbcdafdbaa5661dfb229ab5cfea.png)

请参阅这个密切相关的问题：[Voronoi 图多边形封闭在地理边界中](https://stackoverflow.com/questions/24236698/voronoi-diagram-polygons-enclosed-in-geographic-borders)

# amazon-ses - 亚马逊 ses 在 hotmail 中发送垃圾邮件

> ID：14833295
> 
> 赞同：2
> 
> 时间：2013-02-12T13:07:19.633
> 
> 标签：amazon-ses

我最近设置了我的亚马逊 ses。我有一个经过验证的 DKIM，并从我的 DNS 发布了 SPF 和 senderid 记录。当我从 SES 的管理控制台发送样本邮件时，邮件落在 hotmail.infact 的垃圾邮件中，因为我仍在沙箱中，所以它是经过验证的发件人。我也无法从 aws 团队获得太多帮助..

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T07:31:56.667

我看到当 html 格式错误时，hotmail 会将一封电子邮件放入垃圾邮件文件夹中。确保您的 html 是有效的，并且没有未闭合的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T02:03:44.727

这不是 Amazon SES 问题。您必须与 Microsoft 核实为什么他们的 Hotmail 垃圾邮件过滤器将您的域电子邮件分类为垃圾邮件。请注意，他们可能还会查看邮件的内容并将其分类为垃圾邮件，而不是根据发件人，而是根据正文包含的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T23:01:05.203

亚马逊在黑名单方面也存在间歇性问题。明智的做法是检查 SES 论坛，以确保您发送的 SES IP 一切正常，并且您的电子邮件本身不在黑名单上

在此处查看 SES 论坛 [https://forums.aws.amazon.com/forum.jspa?forumID=90](https://forums.aws.amazon.com/forum.jspa?forumID=90)

# vb6 - 从 vb6 代码自动删除错误处理程序代码

> ID：14833296
> 
> 赞同：0
> 
> 时间：2013-02-12T13:07:21.100
> 
> 标签：vb6

我在所有 vb6 项目中都使用了一个错误处理程序代码，
现在我必须删除所有子过程、函数中的错误处理程序代码。我必须一直手动删除它可以自动删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:20:41.417

有一次我通过编写一个小程序来完成一项类似的任务

1) 读取项目的vbp文件，获取一个项目中所有文件的名字

和

2) 然后将编辑每个文件并进行所需的更改。

# php - PHP 从 url 获取值并将其传递给文本字段

> ID：14833297
> 
> 赞同：0
> 
> 时间：2013-02-12T13:07:26.130
> 
> 标签：php

嗨，我是一名 jsf 程序员，想在我的 jsf 应用程序中集成使用 php 开发的文档存储库。所以我正在做的是，当用户从我的 jsf 屏幕单击链接时，它会获取链接的值，将其传递给 php url 并打开一个用户可以添加文档的页面。我从 url 获取值并将其显示在页面中。但我想要的不是用户输入 *number 字段（请看屏幕截图），来自 URL 的值应该作为数字自动传递到数据库，并且应该删除数字字段。请看屏幕截图。

![在此处输入图像描述](../Images/21be2c1d0687f82b3541588c47e36003.png) ![在此处输入图像描述](../Images/6c991f74779a1d1ff6d78dac448df316.png)

和代码片段

```
<td class="ThRows">*Number</td>
$cellvalue = "";
if ((!isset($_GET["add_fd9"])) && (!isset($_POST["add_fd9"]))) {
$itemvalue = "";
} else {
$itemvalue = qsrequest($_GET["add_fd9"); 
```

然后

fieldPrompts[_No] = "*Number";

pgitm_No=document.getElementsByName("add_fd9")[0];

我不明白在哪里传递 url 值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:13:32.500

使用 $_REQUEST

作为

```
<input type="text" name="text1" value="<?php echo isset($_REQUEST['add_fd9'])?$_REQUEST['add_fd9']:'';?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:12:18.123

试试看 ：

```
$cellvalue = "";
if (!isset($_REQUEST["add_fd9"])) {
$itemvalue = "";
} else {
$itemvalue = qsrequest($_REQUEST["add_fd9"]);
} 
```

# java - Java：异常、继承概念不清楚

> ID：14833304
> 
> 赞同：-6
> 
> 时间：2013-02-12T13:07:39.863
> 
> 标签：java, exception, inheritance

```
class X extends Exception {
}

class Y extends X {
}

class Z extends Y {
}

public class Test {

    static void aMethod() throws Z {
        throw new Z();
    }

    public static void main(String[] args){
    int x = 10;
    try { 
        aMethod(); 
    }
    catch(X e) { 
        System.out.println(“Error X”);
        }
    catch(Y e) { 
        System.out.println(“Error Y”);
        }
   }
} 
```

输出是什么？

(A) 两个 catch 块都不会捕获异常

(B) 它将打印“错误 X”</p>

(C) 它将打印“错误 Y”</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:17:00.020

(D) 它不编译；-)

第二个 catch 块无法访问。

如果你把它转过来，`Y`先捕获，你仍然应该得到一个编译器警告，因为 Z 是一个检查异常，编译器会检测到只能到达第一个 catch 子句。但是该示例将起作用，并且将打印“错误 Y”。

Java 总是按照定义的顺序评估 catch 子句，这就是你应该首先定义最具体的异常的原因，在这种情况下`catch (Y y)`应该在之前`catch (X x)`。

编辑：在第一个版本中，我假设编译器错误“无法访问的代码”可以通过特殊的编译器设置关闭。感谢 Marko Topolnik 的澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:17:25.157

它不会编译，因为方法 aMethod 抛出“Z”异常，并且在 main 方法中您正在捕获“X”和“Y”，其中“Y”的捕获是无法访问的，因为“X”是“Y”和“Z”的超类.

要使其编译和运行，请尝试捕获“Z”和“Y”

# html - HTML5 - 拖放画布（或 div）切换两者

> ID：14833308
> 
> 赞同：0
> 
> 时间：2013-02-12T13:07:57.830
> 
> 标签：html, canvas

我是 html5 的新手，我正在尝试使用拖放功能。

这是**场景**：两个不同的 div（或画布）并排。

我想要**做**的：拖动第一个 div（或画布）并放在第二个 div 上。

我期望哪个**结果**：第一个 div 内容现在位于第二个 div 位置，第二个 div 内容位于第一个 div 位置。和普通开关一样。

我很确定这是可能的，但到目前为止我唯一的想法是将第一个 div 附加到第二个 div 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:23:12.027

是的，当然可以，但是答案取决于目的是什么……如果您想了解拖放在 HTML5 中的工作原理，请根据您提到的[教程编写自己的实现。](http://html5rocks.com/en/tutorials/dnd/basics)但是，如果您想在合理的时间内为生产构建一些东西，请使用库 - 有很多。使用哪一个还取决于您的目标平台。如果您的目标是移动设备，则需要触控支持，并且您需要在实现中考虑多点触控效果 - 这不再只是鼠标点击和拖动，而是可能同时使用很多手指！

可以在此处找到使用[hammer.js](http://eightmedia.github.com/hammer.js/)的一个很好的演示：http: [//riagora.com/mobile/hammer/index2.html](http://riagora.com/mobile/hammer/index2.html)。拖放可同时使用鼠标和触摸，但您需要触摸屏来缩放（通过捏合）和旋转图像。

另一个演示，一个使用[scriptaculous的](http://script.aculo.us/)[谜题](http://madrobby.github.com/scriptaculous/puzzle-demo/)，它几乎可以满足您的要求。但是，当前版本 1.9.0 是从 2010 年 12 月 23 日开始的，因此似乎不再积极开发。

# ruby - WebSocket 不是一个类 (TypeError)

> ID：14833310
> 
> 赞同：2
> 
> 时间：2013-02-12T13:08:01.420
> 
> 标签：ruby, ruby-on-rails-3.2, websocket, ruby-1.9.3

我在一个文件中维护了一些类来运行守护进程。但我收到 `lib/web_socket.rb:4:in <top (required)>: WebSocket is not a class (TypeError)`错误

我已经配置了像这样的文件

```
require 'rubygems'
require 'daemons'
require_relative 'lib/web_socket.rb'
require_relative 'app/models/global' 
```

而 lib web_socket.rb 是

```
require "socket"
require 'libwebsocket'

class WebSocket
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:12:47.633

Websocket 是一个模块

```
irb(main):001:0> module Websocket
irb(main):002:1> end
=> nil
irb(main):003:0> class Websocket
irb(main):004:1> end
TypeError: Websocket is not a class
    from (irb):3
    from /home/nicco/.rbenv/versions/1.9.3-p194/bin/irb:12:in `<main>' 
```

要么你写`module WebSocket`要么你写

```
module MyModule
  class WebSocket
    include ::WebSocket
  end
end 
```

或者这可能是你的情况

```
class MyWebSocket
   include WebSocket
end 
```

# android - 将 Android 项目导入 Eclipse/Gen 文件夹、库、多个 dex 文件时出现问题

> ID：14833319
> 
> 赞同：0
> 
> 时间：2013-02-12T13:08:36.227
> 
> 标签：android, eclipse, import

所以我试图将一个项目导入 Eclipse。我需要一些库，我导入它们，没问题。然后我导入项目本身，对库进行引用。Eclipse 然后说：

```
The declared package "de.xy.ui" does not match the expected package "main.java.de.xy.ui" 
```

我通过从构建路径中删除 src 文件夹来解决这个问题（至少我认为它已经解决了），Eclipse 不再显示任何问题。

我尝试运行该项目并获得：

```
[2013-02-12 14:06:18 - Dex Loader] Unable to execute dex: Multiple dex files define Landroid/support/v4/app/_ActionBarSherlockTrojanHorse$OnCreateOptionsMenuListener;
[2013-02-12 14:06:18 - MainActivity] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Landroid/support/v4/app/_ActionBarSherlockTrojanHorse$OnCreateOptionsMenuListener; 
```

我认为这是因为我在项目和项目的 /gen 文件夹中引用了这些库。当我删除 /gen 文件夹时，它会在我尝试运行项目时再次创建。gen 文件夹也在项目的构建路径中，但从那里删除它会导致相同的结果（它被再次添加）。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:16:54.430

此处转换为 dalvik 格式失败的原因是您在项目中多次包含 android-support-v4.jar。

尝试删除一份副本或提供 Android Dependencies 和 libs 文件夹的屏幕截图。

# angularjs - 如何在输入字段上设置焦点？

> ID：14833326
> 
> 赞同：770
> 
> 时间：2013-02-12T13:08:52.773
> 
> 标签：angularjs, angularjs-directive

在AngularJS中设置焦点输入字段的“角度方式”是什么？

更具体的要求：

1.  [打开模态框](http://angular-ui.github.com/bootstrap/#modal)时，将焦点设置`<input>`在此模态框内的预定义上。
2.  每次`<input>`变得可见（例如，通过单击某个按钮），将焦点放在它上面。

[我试图用 来实现第一个要求](http://plnkr.co/edit/XL1NP0?p=preview)，`autofocus`但这仅在第一次打开 Modal 时有效，并且仅在某些浏览器中有效（例如，在 Firefox 中它不起作用）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：591
> 
> 时间：2013-02-12T16:23:14.677

> 1.  打开 Modal 时，将焦点设置在此 Modal 内预定义的 <input> 上。

定义一个指令并让它 $watch 一个属性/触发器，以便它知道何时聚焦元素：

```
Name: <input type="text" focus-me="shouldBeOpen"> 
```

```
app.directive('focusMe', ['$timeout', '$parse', function ($timeout, $parse) {
    return {
        //scope: true,   // optionally create a child scope
        link: function (scope, element, attrs) {
            var model = $parse(attrs.focusMe);
            scope.$watch(model, function (value) {
                console.log('value=', value);
                if (value === true) {
                    $timeout(function () {
                        element[0].focus();
                    });
                }
            });
            // to address @blesh's comment, set attribute value to 'false'
            // on blur event:
            element.bind('blur', function () {
                console.log('blur');
                scope.$apply(model.assign(scope, false));
            });
        }
    };
}]); 
```

[普朗克](http://plnkr.co/edit/LbHRBB?p=preview)

似乎需要 $timeout 来给模态时间渲染。

> “2。” 每次 <input> 变得可见时（例如通过单击某个按钮），将焦点设置在它上面。

创建一个基本上像上面那样的指令。观察一些范围属性，当它变为真时（在你的 ng-click 处理程序中设置它），执行`element[0].focus()`. 根据您的用例，您可能需要也可能不需要 $timeout ：

```
<button class="btn" ng-click="showForm=true; focusInput=true">show form and
 focus input</button>
<div ng-show="showForm">
  <input type="text" ng-model="myInput" focus-me="focusInput"> {{ myInput }}
  <button class="btn" ng-click="showForm=false">hide form</button>
</div> 
```

```
app.directive('focusMe', function($timeout) {
  return {
    link: function(scope, element, attrs) {
      scope.$watch(attrs.focusMe, function(value) {
        if(value === true) { 
          console.log('value=',value);
          //$timeout(function() {
            element[0].focus();
            scope[attrs.focusMe] = false;
          //});
        }
      });
    }
  };
}); 
```

[普朗克](http://plnkr.co/edit/V8PSie?p=preview)

* * *

**7/2013 更新**：我看到一些人使用我原来的隔离范围指令，然后遇到嵌入式输入字段（即模式中的输入字段）的问题。没有新范围（或可能有新子范围）的指令应该可以减轻一些痛苦。所以上面我更新了不使用隔离范围的答案。以下是原答案：

1\. 的原始答案，使用隔离范围：

```
Name: <input type="text" focus-me="{{shouldBeOpen}}"> 
```

```
app.directive('focusMe', function($timeout) {
  return {
    scope: { trigger: '@focusMe' },
    link: function(scope, element) {
      scope.$watch('trigger', function(value) {
        if(value === "true") { 
          $timeout(function() {
            element[0].focus(); 
          });
        }
      });
    }
  };
}); 
```

[笨蛋](http://plnkr.co/edit/6kHuj0?p=preview)。

2\. 的原始答案，使用隔离范围：

```
<button class="btn" ng-click="showForm=true; focusInput=true">show form and
 focus input</button>
<div ng-show="showForm">
  <input type="text" focus-me="focusInput">
  <button class="btn" ng-click="showForm=false">hide form</button>
</div> 
```

```
app.directive('focusMe', function($timeout) {
  return {
    scope: { trigger: '=focusMe' },
    link: function(scope, element) {
      scope.$watch('trigger', function(value) {
        if(value === true) { 
          //console.log('trigger',value);
          //$timeout(function() {
            element[0].focus();
            scope.trigger = false;
          //});
        }
      });
    }
  };
}); 
```

[笨蛋](http://plnkr.co/edit/gmaQCl?p=preview)。

由于我们需要在指令中重置 trigger/focusInput 属性，因此 '=' 用于双向数据绑定。在第一个指令中，“@”就足够了。另请注意，当使用“@”时，我们将触发器值与“true”进行比较，因为@ 总是产生一个字符串。

* * *

## 回答 #2

> 赞同：268
> 
> 时间：2013-08-18T03:30:45.823

##（编辑：我在这个解释下面添加了一个更新的解决方案）

Mark Rajcok 就是那个人......他的回答是一个有效的答案，但它~~有~~一个缺陷（对不起，马克）......

~~...尝试使用布尔值关注输入，然后模糊输入，然后尝试使用它再次关注输入。除非您将布尔值重置为 false，然后 $digest，然后将其重置为 true，否则它将不起作用。即使您在表达式中使用字符串比较，您也将被迫将字符串更改为其他内容，$digest，然后再将其更改回来。~~（这已通过 blur 事件处理程序解决。）

所以我提出了这个替代解决方案：

### 使用事件，Angular 被遗忘的特性。

JavaScript 毕竟喜欢事件。事件本质上是松耦合的，甚至更好的是，您避免在 $digest 中添加另一个 $watch。

```
app.directive('focusOn', function() {
   return function(scope, elem, attr) {
      scope.$on(attr.focusOn, function(e) {
          elem[0].focus();
      });
   };
}); 
```

所以现在你可以像这样使用它：

```
<input type="text" focus-on="newItemAdded" /> 
```

然后在您的应用程序中的任何位置...

```
$scope.addNewItem = function () {
    /* stuff here to add a new item... */

    $scope.$broadcast('newItemAdded');
}; 
```

这太棒了，因为你可以用这样的东西做各种各样的事情。一方面，您可以与已经存在的事件联系起来。另一方面，您可以通过让应用程序的不同部分发布应用程序的其他部分可以订阅的事件来开始做一些聪明的事情。

无论如何，这类事情对我来说是“事件驱动”的。我认为作为 Angular 开发人员，我们非常努力地将 $scope 形状的钉子钉入事件形状的孔中。

这是最好的解决方案吗？我不知道。这是*一个*解决方案。

* * *

## 更新的解决方案

在@ShimonRachlenko 在下面发表评论之后，我稍微改变了这样做的方法。现在我使用服务和指令的组合来处理“幕后”事件：

除此之外，它与上面概述的原理相同。

[这是一个快速演示 Plunk](http://plnkr.co/edit/teMQoV3pQGj7BHp3oNCz?p=preview)

＃＃＃用法

```
<input type="text" focus-on="focusMe"/> 
```

```
app.controller('MyCtrl', function($scope, focus) {
    focus('focusMe');
}); 
```

＃＃＃来源

```
app.directive('focusOn', function() {
   return function(scope, elem, attr) {
      scope.$on('focusOn', function(e, name) {
        if(name === attr.focusOn) {
          elem[0].focus();
        }
      });
   };
});

app.factory('focus', function ($rootScope, $timeout) {
  return function(name) {
    $timeout(function (){
      $rootScope.$broadcast('focusOn', name);
    });
  }
}); 
```

* * *

## 回答 #3

> 赞同：244
> 
> 时间：2014-01-01T02:25:22.713

当您真正需要的只是这个时，我发现其他一些答案过于复杂

```
app.directive('autoFocus', function($timeout) {
    return {
        restrict: 'AC',
        link: function(_scope, _element) {
            $timeout(function(){
                _element[0].focus();
            }, 0);
        }
    };
}); 
```

用法是

```
<input name="theInput" auto-focus> 
```

我们使用超时来让 dom 中的东西渲染，即使它是零，它至少会等待它 - 这样这在模态和其他东西中也有效

* * *

## 回答 #4

> 赞同：92
> 
> 时间：2015-09-29T12:43:52.480

HTML 有一个属性`autofocus`。

```
<input type="text" name="fname" autofocus> 
```

[http://www.w3schools.com/tags/att_input_autofocus.asp](http://www.w3schools.com/tags/att_input_autofocus.asp)

* * *

## 回答 #5

> 赞同：63
> 
> 时间：2013-12-11T08:35:10.387

您还可以使用 angular 内置的 jqlite 功能。

`angular.element('.selector').trigger('focus');`

* * *

## 回答 #6

> 赞同：56
> 
> 时间：2014-08-11T07:10:43.753

这很好用，并且是一种集中输入控制的角度方式

```
angular.element('#elementId').focus() 
```

这虽然不是完成任务的纯角度方式，但语法遵循角度风格。Jquery 使用 Angular (jQLite => JQuery Light) 间接和直接访问 DOM。

如果需要，这个代码可以很容易地放在一个简单的角度指令中，元素可以直接访问。

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2014-05-28T19:07:48.753

我不认为 $timeout 是将元素集中在创建上的好方法。这是一种使用内置角度功能的方法，从角度文档的模糊深度中挖掘出来。请注意“链接”属性如何拆分为“前”和“后”，用于前链接和后链接功能。

[工作示例：http://plnkr.co/edit/Fj59GB](http://plnkr.co/edit/Fj59GB)

```
// this is the directive you add to any element you want to highlight after creation
Guest.directive('autoFocus', function() {
    return {
        link: {
            pre: function preLink(scope, element, attr) {
                console.debug('prelink called');
                // this fails since the element hasn't rendered
                //element[0].focus();
            },
            post: function postLink(scope, element, attr) {
                console.debug('postlink called');
                // this succeeds since the element has been rendered
                element[0].focus();
            }
        }
    }
}); 
```

```
<input value="hello" />
<!-- this input automatically gets focus on creation -->
<input value="world" auto-focus /> 
```

[完整的 AngularJS 指令文档：https://docs.angularjs.org/api/ng/service/$compile](https://docs.angularjs.org/api/ng/service/$compile)

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2013-07-19T06:49:14.940

我写了一个双向绑定焦点指令，就像最近的模型一样。

您可以像这样使用焦点指令：

```
<input focus="someFocusVariable"> 
```

如果您在控制器的任何位置创建 someFocusVariable 范围变量`true`，则输入将获得焦点。如果你想“模糊”你的输入，那么 someFocusVariable 可以设置为 false。这就像 Mark Rajcok 的第一个答案，但具有双向绑定。

这是指令：

```
function Ctrl($scope) {
  $scope.model = "ahaha"
  $scope.someFocusVariable = true; // If you want to focus initially, set this to true. Else you don't need to define this at all.
}

angular.module('experiement', [])
  .directive('focus', function($timeout, $parse) {
    return {
      restrict: 'A',
      link: function(scope, element, attrs) {
          scope.$watch(attrs.focus, function(newValue, oldValue) {
              if (newValue) { element[0].focus(); }
          });
          element.bind("blur", function(e) {
              $timeout(function() {
                  scope.$apply(attrs.focus + "=false"); 
              }, 0);
          });
          element.bind("focus", function(e) {
              $timeout(function() {
                  scope.$apply(attrs.focus + "=true");
              }, 0);
          })
      }
    }
  }); 
```

用法：

```
<div ng-app="experiement">
  <div ng-controller="Ctrl">
    An Input: <input ng-model="model" focus="someFocusVariable">
    <hr>
        <div ng-click="someFocusVariable=true">Focus!</div>  
        <pre>someFocusVariable: {{ someFocusVariable }}</pre>
        <pre>content: {{ model }}</pre>
  </div>
</div> 
```

**这是小提琴：**

[http://fiddle.jshell.net/ubenzer/9FSL4/8/](http://fiddle.jshell.net/ubenzer/9FSL4/8/)

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2014-06-11T20:58:50.740

这是我原来的解决方案：

[笨蛋](http://plnkr.co/edit/SgRVM6OIBOUV0hhia70X?p=preview)

```
var app = angular.module('plunker', []);
app.directive('autoFocus', function($timeout) {
    return {
        link: function (scope, element, attrs) {
            attrs.$observe("autoFocus", function(newValue){
                if (newValue === "true")
                    $timeout(function(){element[0].focus()});
            });
        }
    };
}); 
```

和 HTML：

```
<button ng-click="isVisible = !isVisible">Toggle input</button>
<input ng-show="isVisible" auto-focus="{{ isVisible }}" value="auto-focus on" /> 
```

## 它能做什么：

当输入通过 ng-show 变得可见时，它会聚焦输入。这里没有使用 $watch 或 $on。

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2015-03-03T15:32:25.840

对于那些使用 Angular 和 Bootstrap 插件的人：

[http://angular-ui.github.io/bootstrap/#/modal](http://angular-ui.github.io/bootstrap/#/modal)

您可以挂钩`opened`模态实例的承诺：

```
modalInstance.opened.then(function() {
        $timeout(function() {
            angular.element('#title_input').trigger('focus');
        });
    });

modalInstance.result.then(function ( etc... 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2015-04-30T09:15:27.673

我发现使用通用表达式很有用。这样你就可以在输入文本有效时自动移动焦点

```
<button type="button" moo-focus-expression="form.phone.$valid"> 
```

或者当用户完成一个固定长度的字段时自动聚焦

```
<button type="submit" moo-focus-expression="smsconfirm.length == 6"> 
```

当然在加载后关注

```
<input type="text" moo-focus-expression="true"> 
```

该指令的代码：

```
.directive('mooFocusExpression', function ($timeout) {
    return {
        restrict: 'A',
        link: {
            post: function postLink(scope, element, attrs) {
                scope.$watch(attrs.mooFocusExpression, function (value) {

                    if (attrs.mooFocusExpression) {
                        if (scope.$eval(attrs.mooFocusExpression)) {
                            $timeout(function () {
                                element[0].focus();
                            }, 100); //need some delay to work with ng-disabled
                        }
                    }
                });
            }
        }
    };
}); 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2015-02-23T00:12:38.970

不要复活僵尸或插入我自己的指令（好吧，这正是我正在做的）：

[https://github.com/hiebj/ng-focus-if](https://github.com/hiebj/ng-focus-if)

[http://plnkr.co/edit/MJS3zRk079Mu72o5A9l6?p=preview](http://plnkr.co/edit/MJS3zRk079Mu72o5A9l6?p=preview)

```
<input focus-if />

(function() {
    'use strict';
    angular
        .module('focus-if', [])
        .directive('focusIf', focusIf);

    function focusIf($timeout) {
        function link($scope, $element, $attrs) {
            var dom = $element[0];
            if ($attrs.focusIf) {
                $scope.$watch($attrs.focusIf, focus);
            } else {
                focus(true);
            }
            function focus(condition) {
                if (condition) {
                    $timeout(function() {
                        dom.focus();
                    }, $scope.$eval($attrs.focusDelay) || 0);
                }
            }
        }
        return {
            restrict: 'A',
            link: link
        };
    }
})(); 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2013-02-13T07:26:48.107

首先，官方关注的方式是[1.1 的路线图](http://blog.angularjs.org/2012/07/angularjs-10-12-roadmap.html)。同时，您可以编写指令来实现设置焦点。

其次，在项目变得可见后将焦点设置在项目上，目前需要一种解决方法。只需使用 . 延迟对元素 focus() 的调用`$timeout`。

因为焦点，模糊和选择存在相同的控制器修改DOM问题，我建议有一个`ng-target`指令：

```
<input type="text" x-ng-model="form.color" x-ng-target="form.colorTarget">
<button class="btn" x-ng-click="form.colorTarget.focus()">do focus</button> 
```

角线程在这里：http: [//goo.gl/ipsx4](http://goo.gl/ipsx4)，更多详细信息在这里博客：http: [//goo.gl/4rdZa](http://goo.gl/4rdZa)

以下指令将`.focus()`在您的控制器内创建一个由您的`ng-target`属性指定的函数。（它也创建了一个`.blur()`和一个`.select()`。）演示：http: [//jsfiddle.net/bseib/WUcQX/](http://jsfiddle.net/bseib/WUcQX/)

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2014-06-20T14:56:35.807

可以简单地使用 javascript 函数来完成焦点，而不是创建自己的指令。

这是一个例子。

在 html 文件中：

```
<input type="text" id="myInputId" /> 
```

在文件 javascript 中，例如在控制器中，您想要激活焦点：

```
document.getElementById("myInputId").focus(); 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2014-02-17T18:06:26.853

如果您只想要一个由 ng-click 控制的简单焦点。

html:

```
<input ut-focus="focusTigger">

<button ng-click="focusTrigger=!focusTrigger" ng-init="focusTrigger=false"></button> 
```

指示：

```
'use strict'

angular.module('focus',['ng'])
.directive('utFocus',function($timeout){
    return {
        link:function(scope,elem,attr){
            var focusTarget = attr['utFocus'];
            scope.$watch(focusTarget,function(value){
                $timeout(function(){
                    elem[0].focus();
                });
            });
        }
    }
}); 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2016-01-13T15:35:47.657

一个适用于模态的简单方法：

```
.directive('focusMeNow', ['$timeout', function ($timeout)
{
    return {
        restrict: 'A',

        link: function (scope, element, attrs)
        {

            $timeout(function ()
            {
                element[0].focus();
            });

        }
    };
}]) 
```

例子

```
<input ng-model="your.value" focus-me-now /> 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2013-12-26T16:25:20.510

您可以只创建一个指令，强制关注 postLinking 上的装饰元素：

```
angular.module('directives')
.directive('autoFocus', function() {
    return {
        restrict: 'AC',
        link: function(_scope, _element) {
            _element[0].focus();
        }
    };
}); 
```

然后在你的html中：

```
<input type="text" name="first" auto-focus/> <!-- this will get the focus -->
<input type="text" name="second"/> 
```

这适用于模态和 ng-if 切换元素，不适用于 ng-show，因为 postLinking 仅发生在 HTML 处理上。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2014-02-18T23:14:30.600

Mark 和 Blesh 有很好的答案；然而，Mark 有一个 Blesh 指出的缺陷（除了实现起来很复杂），我觉得 Blesh 的答案在创建一个专门关于向前端发送焦点请求的服务时存在语义错误，而他真正需要的只是一种方法延迟事件，直到所有指令都在监听。

所以这就是我最终做的事情，它从 Blesh 的回答中窃取了很多内容，但将控制器事件的​​语义和“加载后”服务分开。

这允许控制器事件很容易地被挂钩，而不是仅仅关注特定元素，并且还允许仅在需要时才产生“加载后”功能的开销，在许多情况下可能不会。

### 用法

```
<input type="text" focus-on="controllerEvent"/> 
```

```
app.controller('MyCtrl', function($scope, afterLoad) {
  function notifyControllerEvent() {
      $scope.$broadcast('controllerEvent');
  }

  afterLoad(notifyControllerEvent);
}); 
```

### 来源

```
app.directive('focusOn', function() {
   return function(scope, elem, attr) {
      scope.$on(attr.focusOn, function(e, name) {
        elem[0].focus();
      });
   };
});

app.factory('afterLoad', function ($rootScope, $timeout) {
  return function(func) {
    $timeout(func);
  }
}); 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2017-02-21T13:59:46.333

这也是可以使用的`ngModelController`。使用 1.6+（不知道旧版本）。

**HTML**

```
<form name="myForm">
    <input type="text" name="myText" ng-model="myText">
</form> 
```

**JS**

```
$scope.myForm.myText.$$element.focus(); 
```

--

注意：根据上下文，您可能必须包含一个超时函数。

NB²：使用 时`controllerAs`，几乎相同。只需在 JS`name="myForm"`中用and 替换， .`name="vm.myForm"``vm.myForm.myText.$$element.focus();`

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2017-06-15T07:58:19.100

可能是 ES6 时代最简单的解决方案。

添加以下一个 liner 指令使 HTML 'autofocus' 属性在 Angular.js 上有效。

```
.directive('autofocus', ($timeout) => ({link: (_, e) => $timeout(() => e[0].focus())})) 
```

现在，您可以使用 HTML5 自动对焦语法，例如：

```
<input type="text" autofocus> 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-02-14T12:57:05.077

这里只是一个新手，但我能够使用以下指令使其在[ui.bootstrap.modal中工作：](http://angular-ui.github.io/bootstrap/#/modal)

```
directives.directive('focus', function($timeout) {
    return {
        link : function(scope, element) {
            scope.$watch('idToFocus', function(value) {
                if (value === element[0].id) {
                    $timeout(function() {
                        element[0].focus();
                    });
                }
            });
        }
    };
}); 
```

在 $modal.open 方法中，我使用以下内容来指示应将焦点放在哪里的元素：

```
var d = $modal.open({
        controller : function($scope, $modalInstance) {
            ...
            $scope.idToFocus = "cancelaAteste";
    }
        ...
    }); 
```

在模板上我有这个：

```
<input id="myInputId" focus /> 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2014-07-21T11:53:15.963

我编辑 Mark Rajcok 的 focusMe 指令以在一个元素中实现多个焦点。

HTML：

```
<input  focus-me="myInputFocus"  type="text"> 
```

在 AngularJs 控制器中：

```
$scope.myInputFocus= true; 
```

AngulaJS 指令：

```
app.directive('focusMe', function ($timeout, $parse) {
    return {
        link: function (scope, element, attrs) {
            var model = $parse(attrs.focusMe);
            scope.$watch(model, function (value) {
                if (value === true) {
                    $timeout(function () {
                        scope.$apply(model.assign(scope, false));
                        element[0].focus();
                    }, 30);
                }
            });
        }
    };
}); 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2015-08-06T03:41:17.050

以下指令对我有用。使用相同的 autofocus html 属性进行输入。

```
.directive('autofocus', [function () {
    return {
        require : 'ngModel',
        restrict: 'A',
        link: function (scope, element, attrs) {
            element.focus();
        }
    };
}]) 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2015-09-21T14:35:14.130

如果您正在使用 modalInstance 并拥有对象，则可以在打开模式后使用“then”执行操作。如果你没有使用modalInstance，并且硬编码打开modal，你可以使用事件。$timeout 不是一个好的解决方案。

你可以这样做（Bootstrap3）：

```
$("#" + modalId).on("shown.bs.modal", function() {
    angular.element("[name='name']").focus();
}); 
```

在 modalInstance 中，您可以查看库以了解打开模式后如何执行代码。

不要像这样使用 $timeout，$timeout 可以是 0、1、10、30、50、200 或更多，这取决于客户端计算机，以及打开 modal 的过程。

不要使用 $timeout 让方法告诉你什么时候可以集中注意力；）

我希望这有帮助！:)

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2016-03-09T09:26:08.590

如果将所需的焦点元素注入指令模板中，则所有先前的答案都不起作用。以下指令适用于简单元素或指令注入元素（我在**typescript**中编写）。它接受内部可聚焦元素的选择器。如果您只需要关注 self 元素 - 不要将任何选择器参数发送到指令：

```
module APP.Directives {

export class FocusOnLoadDirective implements ng.IDirective {
    priority = 0;
    restrict = 'A';

    constructor(private $interval:any, private $timeout:any) {

    }

    link = (scope:ng.IScope, element:JQuery, attrs:any) => {
        var _self = this;
        var intervalId:number = 0;

        var clearInterval = function () {
            if (intervalId != 0) {
                _self.$interval.cancel(intervalId);
                intervalId = 0;
            }
        };

        _self.$timeout(function(){

                intervalId = _self.$interval(function () {
                    let focusableElement = null;
                    if (attrs.focusOnLoad != '') {
                        focusableElement = element.find(attrs.focusOnLoad);
                    }
                    else {
                        focusableElement = element;
                    }
                    console.debug('focusOnLoad directive: trying to focus');
                    focusableElement.focus();
                    if (document.activeElement === focusableElement[0]) {
                        clearInterval();
                    }
                }, 100);

                scope.$on('$destroy', function () {
                    // Make sure that the interval is destroyed too
                    clearInterval();
                });

        });
    };

    public static factory = ():ng.IDirectiveFactory => {
        let directive = ($interval:any, $timeout:any) => new FocusOnLoadDirective($interval, $timeout);
        directive.$inject = ['$interval', '$timeout'];
        return directive;
    };
}

angular.module('common').directive('focusOnLoad', FocusOnLoadDirective.factory()); 
```

}

简单元素的用法示例：

```
<button tabindex="0" focus-on-load /> 
```

内部元素的使用示例（通常用于动态注入元素，例如带有模板的指令）：

```
<my-directive focus-on-load="input" /> 
```

您可以使用任何 jQuery 选择器而不是“输入”

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2018-02-13T11:52:08.353

如果您希望将重点放在特定元素上，可以使用以下方法。

1.  创建一个名为`focus`.

    ```
    angular.module('application')
    .factory('focus', function ($timeout, $window) {
        return function (id) {
            $timeout(function () {
                var element = $window.document.getElementById(id);
                if (element)
                    element.focus();
            });
        };
    }); 
    ```

2.  将其注入您希望调用的控制器中。

3.  调用此服务。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2015-02-18T13:10:00.713

在寻找更好的解决方案但没有找到它，不得不创建它之后，我想为这个讨论做出贡献。

标准： 1\. 解决方案应该独立于父控制器范围以增加可重用性。2\. 避免使用 $watch 来监视某些条件，这既慢又增加了摘要循环的大小并使测试更加困难。3\. 避免使用 $timeout 或 $scope.$apply() 来触发摘要循环。4\. 输入元素存在于使用指令的元素中打开。

这是我最喜欢的解决方案：

指示：

```
.directive('focusInput', [ function () {
    return {
        scope: {},
        restrict: 'A',
        compile: function(elem, attr) {
            elem.bind('click', function() {
                elem.find('input').focus();                
            });
        }        
    };
}]); 
```

html:

```
 <div focus-input>
     <input/>
 </div> 
```

我希望这会帮助那里的人！

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2017-07-28T08:20:08.877

这很容易..试试这个

*html*

```
<select id="ddl00">  
 <option>"test 01"</option>  
</select> 
```

*javascript*

```
document.getElementById("ddl00").focus(); 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2014-03-30T23:37:48.897

我认为该指令是不必要的。使用 HTML id 和 class 属性来选择所需的元素，并让服务使用 document.getElementById 或 document.querySelector 来应用焦点（或 jQuery 等效项）。

标记是标准的 HTML/angular 指令，添加了 id/classes 以供选择

```
<input id="myInput" type="text" ng-model="myInputModel" /> 
```

控制器广播事件

```
$scope.$emit('ui:focus', '#myInput'); 
```

在 UI 服务中使用 querySelector - 如果有多个匹配项（比如由于类），它将只返回第一个

```
$rootScope.$on('ui:focus', function($event, selector){
  var elem = document.querySelector(selector);
  if (elem) {
    elem.focus();
  }
}); 
```

您可能希望使用 $timeout() 强制执行摘要循环

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2014-06-10T22:16:38.027

只是扔了一些咖啡。

```
app.directive 'ngAltFocus', ->
    restrict: 'A'
    scope: ngAltFocus: '='
    link: (scope, el, attrs) ->
        scope.$watch 'ngAltFocus', (nv) -> el[0].focus() if nv 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2015-02-06T20:40:40.107

不确定依赖超时是否是一个好主意，但这适用于 ng-repeat，因为此代码在 angularjs 更新 DOM 之后运行，因此您确保所有对象都在那里：

```
myApp.directive('onLastRepeat', [function () {
        return function (scope, element, attrs) {
            if (scope.$last) setTimeout(function () {
                scope.$emit('onRepeatLast', element, attrs);
            }, 1);
        };
    }]);
    //controller for grid
    myApp.controller('SimpleController', ['$scope', '$timeout', '$http', function ($scope, $timeout, $http)
    {
        var newItemRemoved = false;
        var requiredAlert = false;
        //this event fires up when angular updates the dom for the last item
        //it's observed, so here, we stop the progress bar
        $scope.$on('onRepeatLast', function (scope, element, attrs) {
            //$scope.complete();
            console.log('done done!');
            $("#txtFirstName").focus();
        });
    }]); 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2016-12-29T13:10:42.887

您可以使用以下指令在 html 输入中获取 bool 值以专注于它...

```
//js file
angular.module("appName").directive("ngFocus", function () {
       return function (scope, elem, attrs, ctrl) {
             if (attrs.ngFocus === "true") {
                 $(elem).focus();
             }
             if (!ctrl) {
                 return;
             }
       elem.on("focus", function () {
            elem.addClass("has-focus");
            scope.$apply(function () {
                ctrl.hasFocus = true;
            });
        });
    };
});

<!-- html file -->
<input type="text" ng-focus="boolValue" /> 
```

您甚至可以在控制器中将函数设置为 ngFocus 指令值，注意下面的代码...

```
<!-- html file -->
<input type="text" ng-focus="myFunc()" />

//controller file
$scope.myFunc=function(){
      if(condition){
          return true;
      }else{
          return false;
      }
} 
```

该指令在 html 页面呈现时发生。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2018-10-19T12:43:55.803

**以编程方式调用元素上的任何操作：click()、focus()、select()...**

用法：

```
<a href="google.com" auto-action="{'click': $scope.autoclick, 'focus': $scope.autofocus}">Link</a> 
```

指示：

```
/**
 * Programatically Triggers given function on the element
 * Syntax: the same as for ng-class="object"
 * Example: <a href="google.com" auto-action="{'click': autoclick_boolean, 'focus': autofocus_boolean}">Link</a>
 */
app.directive('focusMe', function ($timeout) {
    return {
        restrict: 'A',
        scope: {
            autoAction: '<',
        },
        link: function (scope, element, attr) {
            const _el = element[0];
            for (const func in scope.autoAction) {
                if (!scope.autoAction.hasOwnProperty(func)) {
                    continue;
                }
                scope.$watch(`autoAction['${func}']`, (newVal, oldVal) => {
                    if (newVal !== oldVal) {
                        $timeout(() => {
                            _el[func]();
                        });
                    }
                });
            }

        }
    }
}); 
```

要解决这个问题，请在控制器中（最好）在初始化时设置变量或设置为 ng-init：

```
 <input ng-init="autofocus=true" auto-action="{'focus': autofocus}"> 
```

# android - 使用 Spring Android 框架通过 HTTP GET 检索 JSON 数据

> ID：14833327
> 
> 赞同：2
> 
> 时间：2013-02-12T13:09:01.413
> 
> 标签：android

我正在使用 spring android 框架通过 Http GET 检索 json 数据。我得到以下相同的异常：

**- 无法读取 JSON：无法从 START_OBJECT 令牌中反序列化 com.springandroidjsondemo.beans.LoginBean[] 的实例**

**bean (LoginBean) 正在关注**

```
 package com.springandroidjsondemo.beans;

public class LoginBean {

    private String status;

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }
} 
```

安卓代码如下：

```
 HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setAccept(Collections.singletonList(new MediaType("application", "json")));

HttpEntity<?> requestEntity = new HttpEntity<Object>(requestHeaders);
// Create a new RestTemplate instance
RestTemplate restTemplate = new RestTemplate();
// Add the Jackson message converters
restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());

// Make the HTTP GET request, marshaling the response from JSON to an array of Events
ResponseEntity<LoginBean[]> responseEntity = restTemplate.exchange(url, HttpMethod.GET, requestEntity,LoginBean[].class); // getting exception here

LoginBean[] loginBean = responseEntity.getBody();
String status = loginBean[0].getStatus(); 
```

来自服务器的 json 响应如下：

```
{"emp-data":[{"status":"true"}]} 
```

我不确定 Jackson Marshalling 是否需要任何注释

请提出解决方案

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:03:53.557

这是杰克逊反序列化问题。如果将 JSON 响应与 LoginBean 进行比较，则状态数组包含在元素“emp-data”中。但是，您的 RestTemplate 请求需要如下所示的 JSON。

```
[{"status":"true"},{"status":"false"}] 
```

你有几个选择。您可以围绕 LoginBean 创建一个包装器对象。或者您可以尝试如下注释 LoginBean：

```
@JsonRootName(value = "emp-data")
public class LoginBean {

    ...
} 
```

为了使其工作，您可能需要配置 Jackson ObjactMapper。

```
ObjectMapper objectMapper = new ObjectMapper();
objectMapper.configure(DeserializationFeature.UNWRAP_ROOT_VALUE, true);
MappingJackson2HttpMessageConverter jackson = new MappingJackson2HttpMessageConverter();
jackson.setObjectMapper(objectMapper);
RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(jackson); 
```

# c++ - 为什么这段代码编译时没有警告？

> ID：14833339
> 
> 赞同：2
> 
> 时间：2013-02-12T13:10:14.717
> 
> 标签：c++, visual-c++

我不知道为什么这段代码符合：

```
int array[100];
array[-50] = 100; // Crash!! 
```

...编译器仍然可以正确编译，没有编译错误和警告。

那么为什么它会编译呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:13:32.593

```
array[-50] = 100; 
```

其实这里的意思：

```
*(array - 50) = 100; 
```

考虑以下代码：

```
int array[100];
int *b = &(a[50]);
b[-20] = 5; 
```

此代码有效且不会崩溃。编译器无法知道代码是否会崩溃以及程序员想要对数组做什么。所以它不会抱怨。

最后，请注意，在查找代码中的错误时*不应依赖*编译器警告。编译器*不会*找到您的大部分错误，他们几乎不会尝试为您提供一些提示以简化错误修复过程（有时他们甚至可能会出错并指出，有效代码有错误）。此外，该标准实际上从不*要求*编译器发出警告，因此这些只是编译器实现者的善意行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T13:13:13.613

它编译是因为表达式`array[-50]`被转换为等价的

```
*(&array[0] + (-50)) 
```

根据通常的指针算术规则，这是另一种说法，即“取内存地址`&array[0]`并将其添加 -50 次`sizeof(array[0])`，然后将结果内存地址的内容及其后面的内容解释为”。`int`这是一个完全有效的表达式，`-50`它实际上可能是任何整数（当然它不需要是编译时常量）。

现在可以肯定的是，因为这里`-50` *是*一个编译时常量，并且由于访问数组的第 50 个元素几乎总是一个错误，所以编译器可以（也许应该）为此产生警告。

但是，我们还应该考虑到检测这种特定条件（静态索引到具有明显无效索引的数组）是您不希望在实际代码中看到的东西。因此，编译器团队的资源可能会更好地用于其他事情。

`if (answer = 42)`将此与您希望在实际代码中看到的其他构造*进行*对比（如果只是因为它很容易打错字）并且难以调试（眼睛可以很容易地阅读`=`为`==`，而这会`-50`立即突出）。在这些情况下，编译器警告会更有效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:13:06.243

[真正的编译器可以](http://liveworkspace.org/code/KhrBw%241)（注意：需要将编译器切换到 clang 3.2，gcc 对用户不友好）

```
Compilation finished with warnings:
source.cpp:3:4: warning: array index -50 is before the beginning of the array [-Warray-bounds]
array[-50] = 100;
^ ~~~
source.cpp:2:4: note: array 'array' declared here
int array[100];
^
1 warning generated. 
```

如果你有一个较小的 (*) 编译器，你可能必须手动设置警告。

(*) 即用户友好性较低

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:16:37.480

编译器不需要在编译时捕获所有潜在问题。C 标准允许在运行时出现未定义的行为（这是执行该程序时发生的情况）。您可以将其视为不捕获此类错误的合法借口。

不过，有些编译器和静态程序分析器可以捕捉到这样的微不足道的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T13:15:21.207

括号内的数字只是一个索引。它告诉您要在内存中执行多少步才能找到您请求的数字。 `array[2]`表示从数组的开头开始，向前跳转两次。

你只是告诉它向后跳 50 次，这是一个有效的声明。但是，我无法想象这样做有充分的理由......

# javascript - 从输入文本框中获取值并将值显示到另一个文本框中

> ID：14833340
> 
> 赞同：0
> 
> 时间：2013-02-12T13:10:24.180
> 
> 标签：javascript

我正在尝试从第一个输入中获取值并在第二个输入中显示相同的值但是值未显示在第二个税收框中。我哪里错了？

非常感谢。

```
<div class="rowElem"><label>COGS:<span class="req">*</span></label><div class="formRight"><input type="text" name="cogs" id="cogs" value="<?=$_POST[cogs]?>" onchange="run(cogs)/></div><div class="fix"></div></div>

    <script>
                    function cogs(sel) {
                        var name=document.form1.cogs.value;
                    }
            </script>

<div class="rowElem"><label>COGS:<span class="req">*</span></label><div class="formRight"><input type="text" name="cogs" id="cogs" value="cogs"/></div><div class="fix"></div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:15:24.567

这里有一个关于如何将输入的值分配给另一个的示例

```
<input type="text" name="cogs1" id="cogs1" value="<?=$_POST[cogs]?>" 
     onchange="cogs(this.value)"/>
<input type="text" name="cogs2" id="cogs2" value="cogs"/>

<script>
    function cogs(value) {
        document.getElementById("cogs2").value = value;
    }
</script> 
```

# cppcheck - 静态代码分析中的智能指针

> ID：14833344
> 
> 赞同：2
> 
> 时间：2013-02-12T13:10:41.213
> 
> 标签：cppcheck

在我们的代码中，我们广泛使用智能指针进行内存管理。我们还使用 CPPCheck 进行静态分析。

我注意到 CPPCheck 永远无法找到是否存在任何与智能指针相关的错误，例如空指针检查。无论如何，我们是否可以强制 CPPCheck 在使用我们自己的本地定义的智能指针时查找此类错误？

# javascript - 如何在表单中转义html标签

> ID：14833352
> 
> 赞同：0
> 
> 时间：2013-02-12T13:11:22.163
> 
> 标签：javascript, jquery, html

我有不同数量的字段的表格。用户可以输入 html 标签，我需要转义它们。我需要遍历所有输入元素并将 encodeURIComponent 应用于每个元素值，然后使用 $.param() 发送数据。怎么做？或者可能有人知道更优雅的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:34:57.370

通常，`$(form).serialize()`就足够了。如果这不起作用，您可以先将`$(form).serializeArray()`表单元素编码为名称和值的数组，然后应用于`encodeURIComponent`需要转义的某些字段。最后，打电话`$.param()`。

顺便说一句，事实上，`serialize`由`$.param`和`$(form).serializeArray`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:28:23.987

你试过jquery序列化吗？

```
$(form).serialize(); 
```

[http://jsfiddle.net/KvYa8/](http://jsfiddle.net/KvYa8/)

# jsf - JSF 页面拆分

> ID：14833353
> 
> 赞同：0
> 
> 时间：2013-02-12T13:11:27.167
> 
> 标签：jsf, jsf-1.2

在使用 JSF 1.2 期间，一页代码太大，JDeveloper在服务方法异常中给出了*太大的代码。*现在我想将我的 JSF 文件拆分为更小的文件。在拆分过程中，我需要一些帮助和建议。

因为整个页面都绑定一个bean，是不是也需要拆分bean？如果没有，那么如何克服呢？拆分 JSF 文件并包含在主页中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:19:50.123

您不需要拆分 bean。您可以将页面片段拆分为您包含的多个文件`<jsp:include>`（而不是`@include`像在编译时发生的那样，您最终仍然会遇到相同的异常！）。请注意，您应该将这些包含文件存储在`/WEB-INF`文件夹中，以防止最终用户直接访问。

所以给出这个“超大”页面的例子，

```
<%@taglib prefix="f" uri="http://java.sun.com/jsf/core" %>
<%@taglib prefix="h" uri="http://java.sun.com/jsf/html" %>
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <div>
            large chunk 1
        </div>
        <div>
            large chunk 2
        </div>
        <div>
            large chunk 3
        </div>
    </body>
</html> 
```

您可以在保留 bean 的同时将其拆分如下：

```
<%@taglib prefix="f" uri="http://java.sun.com/jsf/core" %>
<%@taglib prefix="h" uri="http://java.sun.com/jsf/html" %>
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <jsp:include page="/WEB-INF/includes/include1.jsp" />
        <jsp:include page="/WEB-INF/includes/include2.jsp" />
        <jsp:include page="/WEB-INF/includes/include3.jsp" />
    </body>
</html> 
```

和`/WEB-INF/includes/include1.jsp`：

```
<%@taglib prefix="f" uri="http://java.sun.com/jsf/core" %>
<%@taglib prefix="h" uri="http://java.sun.com/jsf/html" %>
<div>
    large chunk 1
</div> 
```

和`/WEB-INF/includes/include2.jsp`：

```
<%@taglib prefix="f" uri="http://java.sun.com/jsf/core" %>
<%@taglib prefix="h" uri="http://java.sun.com/jsf/html" %>
<div>
    large chunk 2
</div> 
```

和`/WEB-INF/includes/include3.jsp`：

```
<%@taglib prefix="f" uri="http://java.sun.com/jsf/core" %>
<%@taglib prefix="h" uri="http://java.sun.com/jsf/html" %>
<div>
    large chunk 3
</div> 
```

# php - 从数组获取数据的问题

> ID：14833354
> 
> 赞同：0
> 
> 时间：2013-02-12T13:11:29.233
> 
> 标签：php

PHP 从下面的 xml 文件中，我必须获取 2 个购买价格，包括 2 个数量，并将它们放入一个表中。您在下面看到的 xml。我无法从数组中获取所需的变量。

```
<?xml version="1.0" encoding="UTF-8"?><products>
<Product>
    <ParentName>22.01.14.10</ParentName>
    <Name>3040-100</Name>
    <Prices>
      <Price min-qty="1" currency="EUR">6,3200</Price>
      <Price min-qty="12" currency="EUR">5,3200</Price>
      <Price min-qty="24" currency="EUR">4,7200</Price>
   </Prices>
</Product>
<Product>
   <ParentName>22.01.10</ParentName>
   <Name>PDS1C</Name>
   <Prices>
      <Price min-qty="1" currency="EUR">1,9565</Price>
      <Price min-qty="10" currency="EUR">1,6828</Price>
      <Price min-qty="20" currency="EUR">1,4828</Price>
   </Prices>
</Product>
<Product>
   <ParentName>22.01.14</ParentName>
   <Name>P1017</Name>
   <Prices>
      <Price min-qty="1" currency="EUR">4,9337</Price>
      <Price min-qty="20" currency="EUR">3,9699</Price>
  </Prices>
</Product>
</products> 
```

有了这个，我填充了价格数组：

```
foreach($product->{'Prices'}->children() as $key => $price)
{
$prices[ "" . $price->attributes()->{'min-qty'}] = mysql_real_escape_string(str_replace(',','.',"" . $price[0]));
}
ksort($prices); // sort array 
```

结果如下：

```
Array
(
[1] => 6.3200
[12] => 5.3200
[24] => 4.7200
)
Array
(
[1] => 1.9565
[10] => 1.6828
[20] => 1.4828
)
Array
(
[1] => 4.9337
[20] => 3.9699
) 
```

现在我必须填充变量以将变量放入表中：

```
$qfirst = ''; // should be 1
$pfirst = ''; // should be 6.3200
$qsec = ''; // should be 12
$psec = ''; // should be 5.3200 
```

我尝试什么我没有将数据放入 4 个变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:32:47.287

改变

```
$prices[ "" . $price->attributes()->{'min-qty'}] = mysql_real_escape_string(str_replace(',','.',"" . $price[0])); 
```

至

```
$prices[] = array($price->attributes()->{'min-qty'},mysql_real_escape_string(str_replace(',', '.', "" . $price[0]))); 
```

然后

```
foreach(array_map(null,array("first","sec","third"),$prices) as $blend)
{
    ${"q". $blend[0]} = $blend[1][0];
    ${"p". $blend[0]} = $blend[1][1];
}

var_dump($qfirst,$pfirst,$qsec,$psec) ; // it would create this variables 
```

或者

```
reset($prices);
foreach(array("first","sec","third") as $blend)
{
    ${"q". $blend} = key($prices);
    ${"p". $blend} = current($prices);
    next($prices);
}
var_dump($qfirst,$pfirst,$qsec,$psec) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:35:09.720

这模拟了前两轮`foreach`循环并给出了预期的结果：

```
reset($prices);
$qfirst = key($prices);
$pfirst = current($prices);

next($prices);
$qsec = key($prices);
$psec = current($prices); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:25:10.173

您可以使用

用于打印所有键值。=>`print_r(array_keys($array));`

用于打印值 => print_r(array_values($array));

# java - 使用 iPOJO 发布非@Instantiate OSGi 服务

> ID：14833356
> 
> 赞同：2
> 
> 时间：2013-02-12T13:11:42.343
> 
> 标签：java, osgi, ipojo

我有 OSGi 模块化系统，其中有以下组件：

*   一些特定的协议实例实现，表示通过特定协议到特定服务器的连接（每个连接服务实例化）
*   一些特定的协议实例管理器服务，按需创建和预配置实例（通常来自不同捆绑包的多个单例服务）
*   连接管理器，它聚合协议管理器服务并在需要时要求它们提供协议实例（单一单调服务）

它们被打包到 OSGi 包中，如下所示：

```
`-ConnectionManager
      `-ConnectionManager.class
`-IrcProtocol
      `-IrcProtocolManagerService.class
      `-IrcProtocolInstance.class
`-XMPPProtocol
      `-XMPPProtocolManagerService.class
      `-XMPPProtocolInstance.class 
```

* * *

`ConnectionManager`注释为

```
@Provides
@Instantiate
@Component 
```

并实现`Subscriber`接口，使其能够发送和侦听通过某种类型传递的消息`Event Admin`。

* * *

每个`*ProtocolManager`都标注有

```
@Provides
@Instantiate
@Component 
```

并实现`ProtocolManager`接口，使其能够被`ConnectionManager`服务侦听器发现。

* * *

每个`*ProtocolInstance`都标注有

```
@Provides
@Component 
```

并实现`Subscriber`接口。它还实现了接口，该接口提供了和`ProtocolInstance`等通用连接操作。`connect()``disconnect()`

* * *

这里的问题是`ProtocolInstance`s 是手动创建的，使用`new`操作符，在内部`ProtocolManager`，而不是通过注释触发器，因此 - 尽管它是注释`@Instantiate`，但不要参与 iPOJO 服务发布。`@Provides`

* * *

问题：如何正确地（最好是声明式地，使用注释）发布这个以编程方式创建的`ProtocolListener`服务，而不需要手动潜入原始 OSGi 服务发布（至少在某种工厂之外，也许）？或者，可能，如何重新构建我的系统，以使其更好地配合未说出口的 iPOJO 指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T07:08:25.580

iPOJO 不支持使用“new”创建对象。事实上，一个 iPOJO 实例不仅是 this 对象，也是包装它的容器。

但是，您有两种解决方案：

*   使用 BundleContext ( [http://felix.apache.org/documentation/subprojects/apache-felix-ipojo/apache-felix-ipojo-userguide/ipojo-faq.html#injecting-the-bundle-context-in-a- pojo](http://felix.apache.org/documentation/subprojects/apache-felix-ipojo/apache-felix-ipojo-userguide/ipojo-faq.html#injecting-the-bundle-context-in-a-pojo) ) 来注册你的对象
*   use the Factory service to create instances on the fly ([http://felix.apache.org/documentation/subprojects/apache-felix-ipojo/apache-felix-ipojo-userguide/ipojo-advanced-topics/ipojo-factory-service.html](http://felix.apache.org/documentation/subprojects/apache-felix-ipojo/apache-felix-ipojo-userguide/ipojo-advanced-topics/ipojo-factory-service.html))

# c# - 运行 Windows Phone 8 应用程序时出现 System.IO.FileNotFoundException 错误

> ID：14833357
> 
> 赞同：4
> 
> 时间：2013-02-12T13:11:49.770
> 
> 标签：c#, c++, windows-phone-8, native, windows-phone

我有一个使用一些本机库（[PJSIP 库](http://www.pjsip.org/)）的 Windows 运行时组件。此组件在 Windows Phone 8 应用程序中使用，当我尝试从本机组件调用函数时，我收到以下错误：

```
An exception of type 'System.IO.FileNotFoundException' occurred in TestingApp.DLL but was not handled in user code 
```

与 mscorlib 中的源（在异常详细信息中）。

谁能指出可能导致此错误的原因以及我如何找出实际缺少的内容？当我尝试在我的 Windows 运行时组件中放置断点时，在运行时，断点显示为已禁用。

问候， 塔马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:24:14.973

将缺少的内容添加`dll`到项目中（如添加新文件）并将其标记为内容。然后从此位置引用 dll。这可能会解决您的问题。

我猜它不起作用，因为它没有部署在您的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:53:16.810

在 Visual Studio 中，在调试菜单下选择“异常”，然后在出现的对话框中为“公共语言运行时异常”启用“抛出”

然后重新运行您的应用程序，Visual Studio 现在应该在导致 Null 异常的代码行处中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T05:03:36.677

检查您链接的库文件，它应该是 DLL 文件的导入库。

导入库 (.lib) 文件包含链接器解析导出的 DLL 函数的外部引用所需的信息，因此系统可以在运行时定位指定的 DLL 和导出的 DLL 函数。

应用启动时根据导入库查找DLL文件，但是没有DLL文件，所以C#抛出FileNotFoundException。确保链接到静态库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-24T02:27:37.530

如果您引用本机库，请仔细检查您是否还引用了 C++ 运行时。在解决方案资源管理器中的项目下，右键单击引用 > 添加引用... 转到扩展并检查 Visual C++ 运行时包。

# android - 选择列表项时出现 java.lang.NullPointerException 错误

> ID：14833361
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:12:09.833
> 
> 标签：android

当我尝试将活动连接到片段类时收到空指针错误..活动类是一个列表活动，当单击特定列表时，片段类应该打开..任何主体都有示例代码或解决方案可以提供给我..my片段类名是 Termfragment..

我在我的 listactivity 类中使​​用了这段代码：

```
 public class HelpActivity extends ListActivity {

Context myContext=this;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    String[] helplist = getResources().getStringArray(R.array.helplist);
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_view, R.id.label, helplist));
    ListView lv = getListView();
    lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {
              TermFragment mytermfragment = new TermFragment(myContext);
               getSupportFragmentManager().beginTransaction().add(R.id.mytermfragment_container, mytermfragment).commit();
              mytermfragment.show(getSupportFragmentManager(),"mytermfragment");

          }
        });

}
} 
```

TermFragment 类：

```
 public class TermFragment extends DialogFragment implements DialogInterface.OnClickListener {
private Context termContext;
private AlertDialogListener mListener;

public TermFragment(Context context) {
    termContext=context;
}

public interface AlertDialogListener
{
    public void onDialogPositiveClick(DialogFragment dialogFragment);
        }

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    Log.i("help","onCreateDialog");
    AlertDialog.Builder builder = new AlertDialog.Builder(termContext);

    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setTitle("Terms");

    builder.setView(inflater.inflate(R.layout.terms_view, null));

    builder.setPositiveButton("I AGREE", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            mListener.onDialogPositiveClick(TermFragment.this);
        }
    });

    AlertDialog alertDialog = builder.create();
    Log.i("alert","alertDialog Created");
    return alertDialog;
}
@Override
public void onClick(DialogInterface dialog, int which) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:38:11.753

You cannot start a fragment like starting a Activity , you have few options you can display/add it in a view or show it as a dialogFragment, Add a fragment in a view in your layout as

```
 ExampleFragment mFragment = new ExampleFragment();  // ExampleFragment is your fragment
        FragmentTransaction ft = getFragmentManager().beginTransaction();
        ft.add(R.id.fragmentContainer, mFragment).commit(); // fragmentContainer is id of your view in your layout 
```

Execute above task in your onitemClickListener

In order to use DialogFragments check this [http://android-developers.blogspot.com/2012/05/using-dialogfragments.html](http://android-developers.blogspot.com/2012/05/using-dialogfragments.html)

```
 TermFragment frag= new TermFragment ();  
    frag.show(fm, "fragment_tag"); 
```

# android - Android：如何获取微调器值并检查条件

> ID：14833364
> 
> 赞同：0
> 
> 时间：2013-02-12T13:12:21.597
> 
> 标签：android, android-spinner

在我的应用程序中，我有一个带有两个项目的微调器..我必须选择项目并相应地执行操作

```
 dialogButton.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {

                        String Comment = edittext.getText().toString();
                           String choose = spinner.getSelectedItem()
                                    .toString();
                             if (Comment != null && Comment.equalsIgnoreCase("")){
                            post(Comment,choose);
                            getActivity().finish();

                             }else{
                                 showToast("Please enter you comment!");

                             }  
                    }
                });
                dialog.show();
                dialog.getWindow().setAttributes(lp);

            } catch (Exception e) {
                e.printStackTrace();
                getActivity().finish();
            }
        }

        private void post(String comments, String choose) throws Exception{

            StringBuffer finalMessage = new StringBuffer("\nRecomends " + Data.getfName());
            if(Data.getAddress() != null && !Data.getAddress().isEmpty()){
                finalMessage.append("\n" + Data.getAddress());
            }

----------------->      if(spinner.getSelectedItem().toString().equals("Post to personal directory &#38; FB")){
        Bundle params = new Bundle();
        params.putString("message",finalMessage.toString() );
        publishStory(params,comments);

    }else {
         try {
                new FBUtils(activity).sharePlaces(attractionData, comments, null);
            } catch (Exception e) {
                Log.e(TAG,"sharePlaces error ",e);
            }
    }
        }

        private void publishStory(Bundle postParams,final String comments,final String choose) {
            Session session = Session.getActiveSession();

            if (session != null){
        List<String> permissions = session.getPermissions();
                    if (!isSubsetOf(PERMISSIONS, permissions)) {
                        Session.NewPermissionsRequest newPermissionsRequest = new Session
                                .NewPermissionsRequest(this, PERMISSIONS);
                    session.requestNewPublishPermissions(newPermissionsRequest);

                    }
                    Request.Callback callbackRequest= new Request.Callback() {
                        public void onCompleted(Response response) {
                            if (response == null || response.equals("")
                                    || response.equals("false")) {
                                showToast("Blank response.");
                            } else  

                                new fbUtils(activity).share(Data, comments, response.getError(),choose);
                            } catch (Exception e) {
                                Log.e(TAG,"sharePlaces error ",e);
                            }
                            }

                    };
                    Request request = new Request(session, Constants.fb.fbId + "/comments", postParams, 
                                          HttpMethod.POST, callbackRequest);

                    RequestAsyncTask task = new RequestAsyncTask(request);
                    task.execute();

                } 
```

问题是`post()`单击dailogbutton时没有执行它进入else部分，我想在`post()`方法中执行if条件，感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:29:35.730

当您从微调器中获得价值时。该值可能不会更新一个。

您应该使用项目选择的侦听器。

字符串结果="";

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
                @Override
               public void onItemSelected(AdapterView<?> parent,
        View view, int pos, long id) {
      Toast.makeText(parent.getContext()), "The planet is " +
          parent.getItemAtPosition(pos).toString(), Toast.LENGTH_LONG).show();
// Your variable should update here 
result = parent.getItemAtPosition(pos).toString();
    }

                @Override
                public void onNothingSelected(AdapterView<?> parentView) {
                    // your code here
                }

            }); 
```

现在在 onPost 方法中使用该值：

```
private void post(String comments, String choose) throws Exception{

            StringBuffer finalMessage = new StringBuffer("\nRecomends " + Data.getfName());
            if(Data.getAddress() != null && !Data.getAddress().isEmpty()){
                finalMessage.append("\n" + Data.getAddress());
            }
Log.v("TEST",spinner.getSelectedItem().toString());
----------------->      if(result.equals("Post to personal directory &#38; FB")){
        Bundle params = new Bundle();
        params.putString("message",finalMessage.toString() );
        publishStory(params,comments);

    }else {
         try {
                new FBUtils(activity).sharePlaces(attractionData, comments, null);
            } catch (Exception e) {
                Log.e(TAG,"sharePlaces error ",e);
            }
    }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:32:22.897

试试这样：

```
private Spinner status;

status = (Spinner) findViewById(R.id.status);
final ArrayList<Simplestatus> statusList = new ArrayList<Simplestatus>();

        Simplestatus tempstatus = new Simplestatus();
        tempstatus.setSimpleStatusName("ZERO");
        tempstatus.setSimpleStatusValue("0");

        Simplestatus tempstatus1 = new Simplestatus();
        tempstatus1.setSimpleStatusName("ONE");
        tempstatus1.setSimpleStatusValue("1");

        statusList.add(tempstatus);
        statusList.add(tempstatus1);

SpinnerAdapter stateAdaptor = new SpinnerAdapter(SettingActivity.this,statusList);
        // stateList.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        status.setAdapter(stateAdaptor);
        status.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long arg3) {
                changeStatus(statusList.get(position));
                selected = statusList.get(position).getsimpleStatusName();
                System.out.println("selected"+selected);
            }

            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });

public class Simplestatus 
{
    private String simpleStatusName;
    private String simpleStatusValue;

    public String getSimpleStatusName() 
    {
        return simpleStatusName;
    }

    public void setSimpleStatusName(String simpleStatusName) 
    {
        this.simpleStatusName = simpleStatusName;
    }

    public String getsimpleStatusValue() 
    {
        return simpleStatusValue;
    }

    public void setsimpleStatusValue(String simpleStatusValue) 
    {
        this.simpleStatusValue = simpleStatusValue;
    }
} 
```

# java - 有没有办法在 JComponent 不再可见时获得通知，因为父级已从集合中删除？

> ID：14833368
> 
> 赞同：4
> 
> 时间：2013-02-12T13:12:25.240
> 
> 标签：java, swing, ancestor, componentlistener

假设我有一个简单的 JFrame，其 JTabbedPane 包含 3 个面板，第二个面板包含一个 JComponent。当从容器中删除“Tab 2”面板时，是否有办法通知 JComponent？我的问题是 JComponent 可能在层次结构中很深。

显然，我在这里寻找 SWING 解决方案...... :)

```
 ,'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''`.
 |                                                                |
 | ,----------Y.......................                            |
 | | Tab 1    | Tab 2     | Tab 3    |                            |
 | :..........:           :.....................................  |
 | |                                                           |  |
 | |                                                           |  |
 | |                                                           |  |
 | |               +--------------------+                      |  |
 | |               |Some JComponent here|                      |  |
 | |               +--------------------+                      |  |
 | |                                                           |  |
 | |                                                           |  |
 | |                                                           |  |
 | |                                                           |  |
 | |                                                           |  |
 | |                                                           |  |
 | |                                                           |  |
 | |                                                           |  |
 | |                                                           |  |
 | |                                                           |  |
 | `-----------------------------------------------------------'  |
 `----------------------------------------------------------------- 
```

我试图用[祖先Removed](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/AncestorListener.html#ancestorRemoved%28javax.swing.event.AncestorEvent%29)（）来做到这一点，但没有运气......我显然做错了什么......

PS。ASCII 艺术是用[JavE 制作](http://www.jave.de)的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:05:32.437

我将`ComponentListener`用于这项工作（`CardLayout`非常接近，与比较相似`JTabbedPane`），代码示例包含所有相关的侦听器（免责声明 --> 通知阻塞 EDT 仅作为代码示例且仅在此表单中工作）

`Ancesor & HierarchyListener`有点异步，也许你有问题要从中捕获正确的事件`AncestorListener`

[我关于类似问题的问题](https://stackoverflow.com/questions/10880326/jpanel-which-one-of-listeners-is-proper-for-visibility-is-changed)

```
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.event.HierarchyEvent;
import java.awt.event.HierarchyListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.event.AncestorEvent;
import javax.swing.event.AncestorListener;

public class CardlayoutTest extends JFrame {

    private static final long serialVersionUID = 1L;
    public CardLayout card = new CardLayout();

    public CardlayoutTest() {
        JPanel pnlA = new JPanel(new BorderLayout());
        pnlA.add(new JButton("A"), BorderLayout.CENTER);
        JPanel pnlB = new JPanel(new BorderLayout());
        pnlB.add(new JButton("B"), BorderLayout.CENTER);
        JPanel pnlC = new JPanel(new BorderLayout());
        pnlC.add(new JButton("C"), BorderLayout.CENTER);

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(card);
        add(pnlA, "A");
        add(pnlB, "B");
        add(pnlC, "C");

        pnlA.addAncestorListener(new EventHandler());
        pnlB.addAncestorListener(new EventHandler());
        pnlC.addAncestorListener(new EventHandler());

        pnlA.addHierarchyListener(new EventHandler());
        pnlB.addHierarchyListener(new EventHandler());
        pnlB.addHierarchyListener(new EventHandler());

        pnlA.addComponentListener(new EventHandler());
        pnlB.addComponentListener(new EventHandler());
        pnlB.addComponentListener(new EventHandler());
    }

    class EventHandler implements AncestorListener, ComponentListener, HierarchyListener {

        @Override
        public void ancestorAdded(AncestorEvent event) {
            System.out.println("CardlayoutTest.EventHandler.ancestorAdded()");
        }

        @Override
        public void ancestorMoved(AncestorEvent event) {
            System.out.println("CardlayoutTest.EventHandler.ancestorMoved()");
        }

        @Override
        public void ancestorRemoved(AncestorEvent event) {
            System.out.println("CardlayoutTest.EventHandler.ancestorRemoved()");
        }

        @Override
        public void hierarchyChanged(HierarchyEvent e) {
            System.out.println("Components Change: " + e.getChanged());
            if ((e.getChangeFlags() & HierarchyEvent.DISPLAYABILITY_CHANGED) != 0) {
                if (e.getComponent().isDisplayable()) {
                    System.out.println("Components DISPLAYABILITY_CHANGED : " + e.getChanged());
                } else {
                    System.out.println("Components DISPLAYABILITY_CHANGED : " + e.getChanged());
                }
            }
            if ((e.getChangeFlags() & HierarchyEvent.SHOWING_CHANGED) != 0) {
                if (e.getComponent().isDisplayable()) {
                    System.out.println("Components SHOWING_CHANGED : " + e.getChanged());
                } else {
                    System.out.println("Components SHOWING_CHANGED : " + e.getChanged());
                }
            }
        }

        public void componentHidden(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Hidden");
        }

        public void componentMoved(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Moved");
        }

        public void componentResized(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Resized ");
        }

        public void componentShown(ComponentEvent e) {
            System.out.println(e.getComponent().getClass().getName() + " --- Shown");
        }
    }

    public static void main(String[] args) {
        CardlayoutTest t = new CardlayoutTest();
        t.setSize(500, 500);
        System.out.println("CardlayoutTest.main()------------------------ FIRST");
        t.card.show(t.getContentPane(), "A");
        t.setVisible(true);
        System.out.print("\n");
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
        }
        System.out.println("CardlayoutTest.main()------------------------ SECOND");
        t.card.show(t.getContentPane(), "B");
        System.out.print("\n");
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
        }
        System.out.println("CardlayoutTest.main()------------------------ THIRD");
        t.card.show(t.getContentPane(), "C");
        System.out.print("\n");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T16:07:00.110

如果是组件本身需要做某事，你也可以覆盖 add/removeNotify （不过不要忘记调用 super 。

```
import java.awt.*;
import java.awt.event.*;
import java.util.Date;
import javax.swing.*;

public class LabelWithTimer extends JLabel {

    private final Timer timer;

    public LabelWithTimer() {
        timer = new Timer(1000, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                setText(new Date().toString());
            }
        });
    }

    @Override
    public void addNotify() {
        super.addNotify();
        timer.start();
        System.out.println("Clock started");
    }

    @Override
    public void removeNotify() {
        System.out.println("Clock stopped");
        timer.stop();
        super.removeNotify();
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                final JPanel clock = new JPanel(new GridBagLayout());
                clock.add(new LabelWithTimer());

                final JTabbedPane tabs = new JTabbedPane();
                tabs.addTab("Empty", new JLabel());
                tabs.setPreferredSize(new Dimension(400, 300));

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.getContentPane().add(tabs);
                frame.getContentPane().add(new JButton(new AbstractAction("Add/remove clock") {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        if(tabs.getTabCount() == 2) {
                            tabs.removeTabAt(1);
                        }
                        else {
                            tabs.addTab("Clock", clock);
                            tabs.setSelectedIndex(1);
                        }

                    }
                }), BorderLayout.PAGE_END);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T15:17:53.833

感谢 mKorbel 发布了一个很好的例子，他使用 HierarchyListener 我想出了我认为可以满足我需求的解决方案。在这种情况下，我将`JLabel`其用作需要通知的组件。

我会接受 mKorbel 的回答，因为他为我节省了很多时间。

这是代码：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.event.AncestorEvent;
import javax.swing.event.AncestorListener;
import javax.swing.JTabbedPane;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.HierarchyEvent;
import java.awt.event.HierarchyListener;

public class TestFrame extends JFrame {
    private static final long serialVersionUID = 8388031406846751884L;
    private JPanel contentPane;
    private JTabbedPane tabbedPane;
    private JLabel label; /// The component that needs to be notified when it should save its states.

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    TestFrame frame = new TestFrame();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Adds necessary listeners.
     * @param argLabel
     */
    private void install(JLabel argLabel) {
        // ::::: HierarchyListener ::::::::::::::::::::::::::::::::::::::::::::::::::::::::
        argLabel.addHierarchyListener(new HierarchyListener() {
            @Override
            public void hierarchyChanged(HierarchyEvent arg0) {
                if ((arg0.getChangeFlags() & HierarchyEvent.DISPLAYABILITY_CHANGED) != 0) {
                    if (!arg0.getComponent().isDisplayable()) {
                        // component is not displayable due to the panel being removed
                        doSomething();
                    }
                }
            } 
        });

        // ::::: AncestorListener :::::::::::::::::::::::::::::::::::::::::::::::::::::::::
        argLabel.addAncestorListener(new AncestorListener() {

            @Override
            public void ancestorAdded(AncestorEvent arg0) {
                // not interested in this one
            }

            @Override
            public void ancestorMoved(AncestorEvent arg0) {
                // not interested in this one
            }

            @Override
            public void ancestorRemoved(AncestorEvent arg0) {
                // ancestorRemoved() is useful when user navigates between tabs, and causes
                // component to become invisible.
                doSomething();
            } 
        });
    }

    public void doSomething() {
        System.out.println("Saving some state(s)...");
    }

    /**
     * Create the frame.
     */
    public TestFrame() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 693, 376);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        tabbedPane = new JTabbedPane(JTabbedPane.TOP);
        // first panel
        tabbedPane.add(new JPanel()); 
        // second panel
        JPanel panelWithComponents = new JPanel();
        JPanel childPanel = new JPanel();
        label = new JLabel("Test label");
        install(label);
        childPanel.add(label);
        panelWithComponents.add(childPanel);
        tabbedPane.add(childPanel);
        // third panel
        tabbedPane.add(new JPanel());

        contentPane.add(tabbedPane, BorderLayout.CENTER);

        JButton btnRemove = new JButton("Remove second");
        btnRemove.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                tabbedPane.remove(1);
            }
        });
        contentPane.add(btnRemove, BorderLayout.SOUTH);
    } // main() method

} // TestFrame class 
```

# r - R Studio 使用时间序列数据中止

> ID：14833370
> 
> 赞同：0
> 
> 时间：2013-02-12T13:12:33.817
> 
> 标签：r

我在处理 R 中的一些时间序列数据时遇到了问题。

```
a <- c(1:6)
b <- c("05/12/2012 05:00","05/12/2012 06:00","06/12/2012 05:00",
       "06/12/2012 06:00", "07/12/2012 09:00","07/12/2012 07:00")
c <-c("0","0","0","1","1","1")
df1 <- data.frame(a,b,c,stringsAsFactors = FALSE)
df1$b <- strptime(df1$b, "%d/%m/%Y %H:%M") 
```

我正在使用 R Studio（版本 0.97.314）。当我运行最后一行代码，将 b 转换为日期变量，然后尝试在工作区窗口中查看此数据框时，R Studio 中止。

我[在这里](https://stackoverflow.com/questions/14735689/subsetting-dataframe-by-day-according-to-most-non-zero-data)报告了这个问题，并被告知它是 R 的损坏版本。但是，我在另一台 Windows 电脑上运行了相同的代码，我遇到了同样的问题。我还向 R Studio 的支持人员发送了电子邮件，他们告诉我会话由于我使用的 R 代码而中止。我已经重新安装了 R 和 R Studio（并更新到 R Studio 的最新版本），但仍然遇到同样的问题。任何人都可以建议任何其他解决方案吗？

当我尝试使用我的真实数据时，我遇到了一个稍微不同的问题。当我运行代码以正确格式化日期时，我的日期列已转换为许多零。其他八行只是数字列表。当我使用 dput() 输出我的数据帧的前四行时，我得到了这个：

```
structure(list(Date = structure(list(sec = c(0, 0, 0, 0), min = c(40L, 
42L, 44L, 46L), hour = c(18L, 18L, 18L, 18L), mday = c(14L, 14L, 
14L, 14L), mon = c(11L, 11L, 11L, 11L), year = c(112L, 112L, 
112L, 112L), wday = c(5L, 5L, 5L, 5L), yday = c(348L, 348L, 348L, 
348L), isdst = c(0L, 0L, 0L, 0L)), .Names = c("sec", "min", "hour", 
"mday", "mon", "year", "wday", "yday", "isdst"), class = c("POSIXlt", 
"POSIXt")), LATITUDE = c(54.77769505, 54.77700313, 54.77770803, 
54.77830731), LONGITUDE = c(-1.56627049, -1.57128976, -1.57544758, 
-1.58108564), HEIGHT = c(" 173.911 M", " 94.833 M", " 137.995 M", 
" 101.871 M"), SPEED = c(" 0.465 km/h", " 10.164 km/h", " 9.129 km/h", 
" 6.340 km/h")), .Names = c("Date", "LATITUDE", "LONGITUDE", 
"HEIGHT", "SPEED"), row.names = c(1L, 13L, 25L, 37L), class = "data.frame") 
```

我希望确保日期格式正确的唯一原因是因为我希望使用以下代码摆脱某个时间点之后的观察：

```
gps <- subset(gps, Date > strptime("14/12/2012 19:00", "%d/%m/%Y %H:%M")) 
```

我之前使用以下格式格式化了本地时间和日期列：

```
gps <- transform(gps, Date=format(as.POSIXct(paste(LOCAL.DATE, LOCAL.TIME)), "%d/%m/%Y %H:%M")) 
```

但是我收到错误消息：

Date > strptime("14/12/2012 19:00", "%d/%m/%Y %H:%M") 中的错误：未实现这些类型的比较另外：警告消息：1：在eval(expr, envir, enclos) : 不兼容的方法 ("Ops.factor", "Ops.POSIXt") for ">" 2: In Date > strptime("14/12/2012 19:00", "%d/ %m/%Y %H:%M") : 较长的对象长度不是较短对象长度的倍数

非常感谢。

# jquery - 帮助器修改 handlebarsJS 中的 each 的行为

> ID：14833373
> 
> 赞同：1
> 
> 时间：2013-02-12T13:12:38.630
> 
> 标签：jquery, handlebars.js

我的问题是如何访问模板中的参数“样式”和“内容”？，我通过创建另一个助手修改了助手（基础与官方网站中的相同），但我无法访问它们。

**模板**

```
<div id=emoticons class="change_profile">
    {{#each all_avatars.images_male}}//this is an array['m1', 'm2, ...]'
        <img src="domain.com/{{this.content}}.png" style="{{this.style}}">
    {{/each}}
</div> 
```

**帮手**

```
<script>
     Handlebars.registerHelper('each', function(icons_list) {
         var icons=[];
         var single={
             content:'',
             style:''
         }      
         for(var i=0, j=icons_list.length; i<j; i++) {
                    single.content = icons_list[i];
                    single.style='<something>';             
                    icons[i]=single; 
          }     
          return icons;
        });
</script> 
```

**结果**

```
<div id=emoticons class="change_profile">

[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]                             

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:39:52.273

根据 Handlebars.js 文档（请参阅[Simple Iterators](http://handlebarsjs.com/block_helpers.html)），您的助手应该返回一个直接呈现到文档中的字符串。当您返回一个数组 ( `icons`) 时，它会被转换为字符串并按原样呈现。

帮助器的以下声明应该会产生更好的结果，特别是考虑到调用`options.fn(single)`应该让 Handlebars.js 将您`img`标记的模板转换为正确的图像。

```
<script>
    Handlebars.registerHelper('each', function(icons_list, options) {
        var icons="";
        var single={ content:'', style:'' };

        for(var i=0, j=icons_list.length; i<j; i++) {
            single.content = icons_list[i];
            single.style='<something>';             
            icons += options.fn(single); 
        }       
        return icons;
    });
</script> 
```

话虽如此，将这种逻辑放入名为 的助手中并不是一个好主意`each`，这很快就会变得混乱。我宁愿使用与`each`文档中声明的相同并替换模板：

```
<div id=emoticons class="change_profile">
    {{#each all_avatars.images_male}}
        <img src="domain.com/{{this}}.png" style="<something>">
    {{/each}}
</div> 
```

# hibernate - 如何在运行时通过 Hibernate 扫描 @Entity？

> ID：14833379
> 
> 赞同：0
> 
> 时间：2013-02-12T13:12:49.667
> 
> 标签：hibernate

Hibernate (JPA) 是否有任何内置机制在启动时扫描 @Entity 注释的 bean。我试图避免为每个持久对象维护特定的“hbm”文件。

现在我有以下内容：

测试.java

```
@Entity
public class Test {
 ...
} 
```

测试.hbm.xml

```
<hibernate-mapping package="domain">
    <class name="Test" table="test">
    ...
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:22:04.800

您可以为每个 hbm 文件创建所有 @Entity bean，然后您可以删除所有 hbm 文件，因为休眠 JPA 将在启动时将每个 bean 映射到特定表

是的，它会在启动时映射，不用担心。

你可以做这样的事情

```
<persistence-unit name="myPetStorePU">
    <description>Petstore Persistence Unit</description>
    <provider>oracle.toplink.essentials.ejb.cmp3.EntityManagerFactoryProvider</provider>

  <class>com.sun.javaee.blueprints.petstore.model.Tag</class>
  <class>com.sun.javaee.blueprints.petstore.model.SellerContactInfo</class>
  <class>com.sun.javaee.blueprints.petstore.model.Product</class>
  <class>com.sun.javaee.blueprints.petstore.model.Item</class>
  <class>com.sun.javaee.blueprints.petstore.model.Category</class>
  <class>com.sun.javaee.blueprints.petstore.model.Address</class>
  <class>com.sun.javaee.blueprints.petstore.model.ZipLocation</class>
    <properties>
        <property name="toplink.jdbc.driver" value="oracle.jdbc.driver.OracleDriver"/>
        <property name="toplink.jdbc.url" value="jdbc:oracle:thin:@#############"/>
        <property name="toplink.jdbc.user" value="####"/>
        <property name="toplink.jdbc.password" value="#####"/>
        <property name="toplink.logging.level" value="INFO"/>
    </properties>

</persistence-unit> 
```

所有模型都是@Entity 类。

# ruby-on-rails-3 - Rails 的 Web 服务器选择

> ID：14833380
> 
> 赞同：2
> 
> 时间：2013-02-12T13:12:56.480
> 
> 标签：ruby-on-rails-3, apache2, passenger, mongrel

我的问题与在一台服务器上运行几个不同的 Web 应用程序（PHP 和 Rails）有关，并决定为 Rails 使用哪个服务器，因为它将与当前在 apache2 上运行的几个 PHP 应用程序共存，并且当它出现时有一些选择用于服务 Rails 应用程序。

我们设置了一个运行 Apache2 的新 Debian“Squeeze”服务器。该服务器托管 PHP 应用程序，我们被要求提供一个 Ruby on Rails 项目并在此机器上运行它。

Rails 应用程序不会获得太多流量，因为它是我们一些业务合作伙伴的微型站点。

在这种环境下，知道 Apache2 已经在为 PHP 应用程序提供服务，Rails 应用程序的最佳应用服务器选择是什么？

[1) 带有Phusion 乘客](https://www.phusionpassenger.com/)的 Apache2

2)[杂种](http://mongrel2.org/)

3)[韦布里克](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/webrick/rdoc/WEBrick.html)

4) 别的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:47:06.977

看看[瘦](http://code.macournoyer.com/thin/)。它具有原生 SSL 支持，非常轻量级且易于设置（gemfile 中的一行），并且不会与主机上运行的任何其他服务器交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:48:25.777

> Rails 应用程序不会获得太多流量，因为它是我们一些业务合作伙伴的微型站点。

似乎乘客很适合，因为它很容易配置为根据当前流量生成/杀死工作人员，因此您可以在大多数情况下节省一些资源。

# c# - 开关不能识别超过 1 个字符

> ID：14833385
> 
> 赞同：0
> 
> 时间：2013-02-12T13:13:17.903
> 
> 标签：c#, switch-statement

我一定很累，因为这应该很简单。我试图找到从命令行传递到我的程序中的值。

这是代码：

```
private static bool ParseParms(IEnumerable<string> parms)
{

  try
  {
  foreach (var s in parms)
  {
    if (!s.Contains(":")) continue;
    var split = s.Split(Convert.ToChar(":"));
    if (split.Count() != 2) continue;
    Console.WriteLine("split[0]: " + split[0]);
    Console.WriteLine("split[1]: " + split[1]);
    switch (s[0].ToString())
    {
        // branch
      case "b":
        CustomerInfo.Branch = split[1];
        break;

        // account
      case "a":
        CustomerInfo.AccountNumber = split[1];
        break;

        //name
      case "n":
        CustomerInfo.Name = split[1];
        break;

        //street
      case "str":
        CustomerInfo.Street = split[1];
        break;

        // city
      case "c":
        CustomerInfo.City = split[1];
        break;

        // state
      case "st":
        CustomerInfo.State = split[1];
        break;

        // street
      case "z":
        CustomerInfo.Zip = split[1];
        break;

    }

  }

  Console.WriteLine("=======================");
  Console.WriteLine("name: " + CustomerInfo.Name);
  Console.WriteLine("br: " + CustomerInfo.Branch);
  Console.WriteLine("acctno: " + CustomerInfo.AccountNumber);
  Console.WriteLine("street: " + CustomerInfo.Street);
  Console.WriteLine("city: " + CustomerInfo.City);
  Console.WriteLine("state: " + CustomerInfo.State);
  Console.WriteLine("zip: " + CustomerInfo.Zip);
  Console.WriteLine("=======================");

  if(string.IsNullOrWhiteSpace(CustomerInfo.Branch) || string.IsNullOrWhiteSpace(CustomerInfo.AccountNumber))
  {
    return false;
  }
  return true;
  }
  catch (Exception ex)
  {
    Console.WriteLine("Error: " + ex.Message);
    return false;
  }
} 
```

这就是我要传递的内容：

"b:01" "a:012345" "n:John Doe" "str:123 Street" "st:AL" "c:Bessemer" "z:35020"

这是调试中的控制台：

```
split[0]: b
split[1]: 01
split[0]: a
split[1]: 012345
split[0]: n
split[1]: John Doe
split[0]: str
split[1]: 123 Street
split[0]: st
split[1]: AL
split[0]: c
split[1]: Bessemer
split[0]: z
split[1]: 35020 
```

这是结果：

```
=======================
name: John Doe
br: 01
acctno: 012345
street: 
city: Bessemer
state: 
zip: 35020
======================= 
```

如您所见，街道和州是空白的，我不知道为什么...

哈！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:29:41.487

问题只是一个错字。你输入了

```
switch (s[0].ToString()) 
```

代替

```
switch (split[0].ToString()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:16:46.530

在你的 switch 语句中更改`switch (s[0].ToString())`为。`switch (split[0])`

`split[0]`包含您要测试的字符串。
`s[0].Tostring()`只是字符串的第一个字符。

您的代码适用于某些但并非所有情况，因为您的某些情况是单字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T13:17:24.907

你的问题是你只得到你的第一个字符`string`。

```
switch (s[0].ToString()) 
```

根据您可能更愿意使用的代码`split[0]`，而不是`s[0]`.

```
switch (split[0]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:17:07.460

```
switch (split[0].ToString()) 
```

不是，

```
switch (s[0].ToString()) 
```

某些 case 语句有效，因为`s[0]`它返回字符串的第一个字符`s`（例如 b 表示“b:01”）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T13:17:20.070

当你这样做时，`s[0].ToString()`你只取字符串的第一个字符。

`s`已经是字符串类型，实际上是一个字符数组。所以你取该数组的第 [0] 个元素

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-12T13:21:40.243

改变：

```
switch (s[0].ToString()) 
```

到

```
switch (split[0].ToString()) 
```

啊，如果我能快几分钟就好了……

# file - 如果为空，则允许 Symfony 2 文件约束的表单验证

> ID：14833386
> 
> 赞同：1
> 
> 时间：2013-02-12T13:13:19.137
> 
> 标签：file, symfony, validation

我正在尝试基于此示例实现以下目标： [http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html) 我有一个虚拟文件，将用于上传文件。一切都非常适合上传过程。但是，表单中的文件字段始终是必需的，可能是因为

```
/**
 * @Assert\Image(maxSize="1000000")
 */
public $image_virtual; 
```

有没有办法只有在 $image_virtual 被填满时才有文件或图像要求？即使用户没有输入图像，我也希望能够保存表单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:54:04.537

基本上它应该像那样工作得很好，只要你不插入

```
/**
 * @Assert\NotBlank
 */ 
```

进入你的实体。

您必须检查您的表单构建器中是否不需要您的字段，如下所示：

```
$builder->add('image_virtual', 'file', 
    array(
        'required' => false
    )
); 
```

# linux - Linux top 中的进程和线程 CPU 使用率

> ID：14833387
> 
> 赞同：3
> 
> 时间：2013-02-12T13:13:26.743
> 
> 标签：linux, multithreading, process, cpu-usage, linuxthreads

我们刚刚发现了 Linux“顶级”工具的独特功能。

特点是所有线程的汇总cpu时间**小于**整个进程显示的时间。当我们的应用程序产生超过 50 个线程并工作几分钟时，就会观察到这种情况。

所以问题是：不是由任何线程而是由进程本身消耗的额外时间是多少？这怎么可能？

据我了解，有关进程和线程 CPU 使用率的信息取自`/proc/<pid>/stat`&`/proc/<pid>/task/<tid>/stat`文件。谁填写这些文件，为什么时间`<pid>/stat`不是所有`<tid>/stat`时间的总和？

# javascript - 获取用于 if/else 条件语句的 tag() 的值

> ID：14833392
> 
> 赞同：-2
> 
> 时间：2013-02-12T13:13:43.293
> 
> 标签：javascript, jquery

这是一个代码：

```
<span id="dpos">30</span>

<script>
var pxwidth;

$( "#id" )

.bind( "keydown", function( event ) {
 pxwidth = $("#dpos").text();

 if (pxwidth === 0)
 {
 // do something
 }

});

</script> 
```

在这里，我试图获取条件（if/else 语句）中使用的 span 元素的值。但该语句不执行。的正确用法是`if (pxwidth === ?)`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:17:06.967

存在语法错误，您没有关闭绑定函数：

```
var pxwidth;

$( "#id" ).bind( "keydown", function( event ) {
    pxwidth = $("#dpos").text();

    if (pxwidth == 0) // <-- a double, not triple equal
    {
        // do something
    }
}); // <-- remember to include this 
```

同样正如@Cerbrus 指出的那样，您需要使用相等比较运算符`==`，因为您正在将字符串与 int 进行比较。三等号`===`进行相同的比较，检查相等性和数据类型。为了证明差异：

```
console.log( "0" == 0 ); // true
console.log( 0 == 0 ); // true
console.log( "0" === 0 ); // false
console.log( 0 === 0 ); // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:18:19.587

您的代码至少有两个问题：

**1.语法错误：**

如果这是您的所有代码，您将收到语法错误。它应该在浏览器的控制台中可见。

**2\. 比较字符串和整数：**

`.text()`返回一个字符串，但您试图将其与整数进行比较（使用三等式，同时检查数据类型）。在进行比较之前，您必须将该字符串解析为整数。

尝试这样的事情：

```
$(function() {
    $("#id").on("keydown", function(event) {
        var pxwidth = parseInt($("#dpos").text(), 10);

        if (pxwidth === 0)
        {
        // do something
        }
    });
}); 
```

**其他可能的问题：**

1.  您正在绑定到 keydown 事件。具有 ID`id`的元素是输入元素吗？否则用户将无法触发事件。

2.  您是否尝试在 DOM 准备好之前绑定事件？在 DOM-ready 回调中运行您的代码（参见我的示例），或将您的代码移动到`<body>`元素的末尾。

**旁注：**

`.bind()``.on()`从 jQuery 1.7 开始，不推荐使用.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:19:47.213

不要`===`用于将字符串与数字进行比较。

代替：

```
if (pxwidth === 0) 
```

采用：

```
if (pxwidth == 0) /* or */ if (pxwidth === "0") 
```

`===`只返回`true`两个值在值*和*类型上相等。
`$("#dpos").text()`返回 a `String`，
`0`是 a `Number`。
导致您像这样比较它们：`0 === "0"`，这是错误的。

**[有关比较运算符的更多信息在这里。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:19:58.063

[在小提琴上](http://jsfiddle.net/3Q5fB/)工作正常

```
var pxwidth = $("#dpos").text();
alert(pxwidth);
if (pxwidth === "30") {
    alert('hi');
} 
```

您的 span 包含`30`在其中，因此检查 with`0`将始终返回 false。

## 编辑

> 该`.text()`函数将数据作为字符串变量获取。因此，在`if`声明中，我使用了`"`for 比较。

# api - Youtube api 上传视频不起作用“错误：NoLinkedYouTubeAccount”

> ID：14833393
> 
> 赞同：0
> 
> 时间：2013-02-12T13:13:44.060
> 
> 标签：api, codeigniter, video, upload, youtube

我正在使用 youtube api 从我的网站上传视频，这是我第一次使用我的 google 帐户。我给了 youtube 帐户用户名、密码和开发人员密钥，我收到错误“NoLinkedYouTubeAccount”。

有人帮我解决这个问题。

```
 /**
    *  developerKey
    */
    public $developerKey;

    /**
    *  accessToken - authorization access taken 
    */
    public $accessToken;

    /**
    *  next_index - used to track short results
    */
    public $next_index;

    /**
    *  authType - authentication type GoogleLogin or  AuthSub
    */
    public $authType;

    /**
     *  initializes the token and API key information for API methods which requires authentication information
     *  @param developerKey - String 
     *  @param accessToken - array
     *  @return void
     *  @access public
     *  Modified: Sandip
    */

    public function __construct($params){
        $this->accessToken = $params['accessToken'];
        $this->authType = $params['authType']; 
        $this->developerKey=$params['developerKey'];
    }

    /**
     *  client login authentication
     *  @param username - String 
     *  @param pass - String
     *  @return array
     *  @access public
     *  Modified: Sandip
    */

    public function clientLoginAuth($username,$pass){
        $this->authType = 'GoogleLogin'; 
        $url = 'https://www.google.com/youtube/accounts/ClientLogin';
        $data = 'Email='.urlencode($username).'&Passwd='.urlencode($pass).'&service=youtube&source=Test';
        $result = array();
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $curlheader[0] = "Content-Type:application/x-www-form-urlencoded";
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
        curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, false );    
        curl_setopt($ch, CURLOPT_HTTPHEADER, $curlheader);
        $result['output'] = curl_exec($ch);
        $result['err'] = curl_errno( $ch );
        $result['errmsg']  = curl_error( $ch );
        $result['header']  = curl_getinfo( $ch );
        $temp = explode("YouTubeUser=",$result['output']);
        $result['username'] = trim($temp[1]);
        $temp2 = explode("=",trim($temp[0]));
        $result['token'] = trim($temp2[1]);
        $this->accessToken = $result['token'];
        curl_close($ch);
        return $result;
    }

    public function uploadVideo($filename,$fullFilePath,$title,$description,$tags)
    {

        $fdata = file_get_contents($fullFilePath);  
        $tmpdata = '<?xml version="1.0"?>
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yt="http://gdata.youtube.com/schemas/2007">
<media:group>
<media:title type="plain">'.$title.'</media:title>
<media:description type="plain">'.$description.'</media:description> 
<media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">People</media:category>    <media:keywords>'.$tags.'</media:keywords>
</media:group>
</entry> 
';
        $url = 'http://gdata.youtube.com/feeds/api/users/default/uploads';
        $data = '--f93dcbA3 
```

内容类型：application/atom+xml；字符集=UTF-8

'.$tmpdata.' --f93dcbA3 内容类型：视频/快速时间内容传输编码：二进制

'.$fdata.' --f93dcbA3--';

```
 $token = $this->accessToken;
        $developerKey = $this->developerKey;
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $curlheader[0] = "Host: uploads.gdata.youtube.com";
        if($this->authType == 'GoogleLogin')
            $curlheader[1] = "Authorization: ".$this->authType." auth=\"$token\"";
        else
            $curlheader[1] = "Authorization: ".$this->authType." token=\"$token\"";
        $curlheader[2] = "GData-Version: 2";
        $curlheader[3] = "X-GData-Key: key=\"$developerKey\"";
        $curlheader[4] = "Slug: ".$filename;    
        $curlheader[5] = "Content-Type: multipart/related; boundary=\"f93dcbA3\"";
        $curlheader[6] = "Content-Length: ".strlen($data);
        $curlheader[7] = "Connection: close";

        curl_setopt($ch, CURLOPT_HTTPHEADER, $curlheader);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

        $output = curl_exec($ch);
        $info = curl_getinfo($ch);
        //print_r($info);

        curl_close($ch);

        unset($fdata);
        $validresult = $this->checkErrors($output);

        if($validresult['is_error'] == 'No')
        {

            $xml = $validresult['xml'];

            $webSite = 'http://www.youtube.com/';
            $criteria = 'uploads';
            $mediaInfo = array();
            $gdMedia = $xml->children('http://schemas.google.com/g/2005');
            $media = $xml->children('http://search.yahoo.com/mrss/');
            $ytMedia = $xml->children('http://gdata.youtube.com/schemas/2007');
            $georssMedia = $xml->children('http://www.georss.org/georss');

            if($media->group->title){
                $mediaInfo['title'] = sprintf("%s",$media->group->title[0]);
            }else{
                $mediaInfo['title'] = '';
            }
            if($media->group->description){
                $mediaInfo['description'] = sprintf("%s",$media->group->description[0]);
            }else{
                $mediaInfo['description'] = '';
            }
            if($media->group->player){

                $video = $media->group->player[0]->attributes()->url;
                $vLink = preg_replace('/=/', "/", $video);
                $videoLink = preg_replace('/\?/', "/", $vLink);
                $mediaInfo['contentUrl'] = $videoLink."&hl=en&fs=1";
                $test_str = preg_split('/\/v\//', $videoLink, 2);
                $video_id_array = preg_split('/&/', $test_str[1],2);
                $mediaInfo['videoId'] = $video_id_array[0];
            }else{
                if($entry->link[0]->attributes()->href){
                    $video = $entry->link[0]->attributes()->href;
                    $vLink = preg_replace('/=/', "/", $video);
                    $videoLink = preg_replace('/\?/', "/", $vLink);
                    $mediaInfo['contentUrl'] = $videoLink."&hl=en&fs=1";
                    $test_str = preg_split('/\/v\//', $videoLink, 2);
                    $video_id_array = preg_split('/&/', $test_str[1],2);
                    $mediaInfo['videoId'] = $video_id_array[0];

                }else{
                    return "video not found.";

                }
            }
                $mediaInfo['path_url'] = $mediaInfo['contentUrl'];
                $mediaInfo['webSite'] = $webSite;
                $mediaInfo['genre'] = sprintf("%s",@$media->group->category[0]);
                $mediaInfo['criteria'] = $criteria;

                unset($xml);
                unset($gdMedia);
                unset($media);
                unset($ytMedia);
                unset($georssMedia);

                return $mediaInfo;
        }
        else
        {
            $result = array();
            $result['is_error'] = $validresult['is_error'];
            $result['error'] = $validresult['error'];
            unset($validresult);
            return $result;

        }           

    }

    public function getUploadedVideos($username='default',$startIndex=1,$limit=10,$location='',$location_radius='',$safeSearch='strict',$strict='true'){

        $url = 'http://gdata.youtube.com/feeds/api/users/'.$username.'/uploads?start-index='.$startIndex.'&max-results='.$limit.'&strict='.$strict;
        if($location !='')
        {
            $url .= '&location='.$location;
            $url .= '&location-radius='.$location_radius;
        }
        //echo "<br>".$url;
        $criteria = 'uploads';
        if($username == 'default')
            $output = $this->make_api_call($url);
        else
        {
            $response = $this->make_get_call($url);
            $output = $response['output'];
        }

        $result = array();

        $validresult = $this->checkErrors($output);

        if($validresult['is_error'] == 'No')
        {
            $xml = $validresult['xml'];

            $tmp = $xml->xpath("openSearch:totalResults");
            $tmp_totalresults = (string)$tmp[0];

            $tmp = $xml->xpath("openSearch:startIndex");
            $result['startindex'] = (string)$tmp[0];

            //$tmp = $xml->xpath("openSearch:itemsPerPage");
            //$result['itemsPerPage'] = (string)$tmp[0];

            $res = $this->getFormatedVideoresult($xml,$criteria);

            //Pagination logic
            $shortCnt = $this->getShortCount();
            //

            if($shortCnt > 0 && $tmp_totalresults > $limit)
            {
                $newStartIndex = $startIndex + $limit;
                $newmaxresults = $shortCnt;

                $iteration = 1;
                while($shortCnt > 0 && $tmp_totalresults >= $newStartIndex){            
                    if($iteration !=1){
                        $newStartIndex = $newStartIndex + $newmaxresults;
                        $newmaxresults = $shortCnt;
                    }
                        $iteration++;

                    $url = 'http://gdata.youtube.com/feeds/api/users/'.$username.'/uploads?start-index='.$newStartIndex.'&max-results='.$newmaxresults.'&strict='.$strict;
                    if($location !='')
                    {
                        $url .= '&location='.$location;
                        $url .= '&location-radius='.$location_radius;
                    }

                    $shortResult = $this->getShortResult($url,$criteria);

                    if(@$shortResult['is_error']=='No'){
                        if(!empty($shortResult['result']))
                        {
                            ////echo "<br>INSIDE";  
                            foreach($shortResult['result'] as $shortkey => $shortItem)
                                $res[] = $shortItem;        
                                $shortCnt = $this->getShortCount();
                        }
                        else
                        {
                            continue;
                        }                           
                    }
                    else
                    {
                        break;
                    }                       
                }//while

                $result['nextPageIndex'] = @(isset($shortResult['nextPageIndex'])?$shortResult['nextPageIndex']:0);
            }
            else
            {
                $result['nextPageIndex'] = $result['startindex'] + count($this->next_index);
            }
            if($tmp_totalresults < $result['nextPageIndex'])    
            {
                $result['nextPageIndex'] = 0;
            }

            //pagination logic

            $result['itemsPerPage'] = $limit;               
            $result['totalresults'] = count($res);

            $result['result'] = $res;

            unset($res);
            unset($xml);
        }
        else
        {
            $result['is_error'] = $validresult['is_error'];
            $result['error'] = $validresult['error'];

        }
        unset($validresult);

        return $result;
    }
    public function checkErrors($response){

        $result = array();
        $result['is_error'] = 'No';
        $reg_ex = '/<H1>Bad Request<\/H1>/';
        $res = preg_match_all($reg_ex,$response,$matches);          

        if(!empty($matches[0])) {
            $result['is_error'] = 'Yes';
            $result['error'] = "Bad Request";
        } 
        else {

            $xml = @simplexml_load_string($response);
            if($xml === FALSE && $response !=''){
                $result['error'] = $response;
                $result['is_error'] = 'Yes';
            }
            else{

                if(@$xml->error){

                    $msg = @(string)$xml->error->code.':'.@(string)$xml->error->internalReason;
                    unset($xml);
                    $result['error'] = $msg;
                    $result['is_error'] = 'Yes';
                }
                else{
                     $result['xml'] = $xml;
                }
            }
        }
        unset($xml);
        unset($response);
        return $result;
    }
    public function getContentURL($url){
        $output = $this->make_api_call($url);
        $result = array();
        $validresult = $this->checkErrors($output);
        if($validresult['is_error'] == 'No')
        {
            $xml = $validresult['xml'];
            $ytMedia = $xml->children('http://gdata.youtube.com/schemas/2007');
            $result['term'] = $xml->category[1]->attributes()->term;
            $result['title'] = (string)$xml->title;
            $result['username'] = (string)$ytMedia->username;
            $result['contentURL'] = (string)$xml->content->attributes()->src;
            if(stristr($result['title'],'Activity of'))
            {
                $result['contentURL'] = 'http://gdata.youtube.com/feeds/api/users/'.$result['username'].'/uploads?v=2';

            }           
        }
        else
        {
            $result['is_error'] = $validresult['is_error'];
            $result['error'] = $validresult['error'];
        }
        unset($validresult);
        return $result;
    }

public function getRecentUploadedVideos($xml){
        $i = 0;
        $res = array();         
        foreach($xml->entry as $fentry){
            $i++;
            $term = $fentry->category[1]->attributes()->term;               
            if($term == 'video_uploaded')
            {       
                    $mediaInfo = array();
                    $entry = $fentry->link[1]->entry;                       
                    $gdMedia = $entry->children('http://schemas.google.com/g/2005');
                    $media = $entry->children('http://search.yahoo.com/mrss/');
                    $ytMedia = $entry->children('http://gdata.youtube.com/schemas/2007');
                    $georssMedia = $entry->children('http://www.georss.org/georss');
                    if($gdMedia->rating){
                        $rating = (string)$gdMedia->rating->attributes();
                        $mediaInfo['rating'] = $rating['average'];
                    }else{
                        $mediaInfo['rating'] = 0;
                    }
                    if($media->group->thumbnail){
                        $mediaInfo['iconImage'] = sprintf("%s",$media->group->thumbnail[0]->attributes()->url);
                    }else{
                        $mediaInfo['iconImage'] = '';
                    }
                    if($media->group->title){
                        $mediaInfo['title'] = sprintf("%s",$media->group->title[0]);
                    }else{
                        $mediaInfo['title'] = '';
                    }
                    if($media->group->description){
                        $mediaInfo['description'] = sprintf("%s",$media->group->description[0]);
                    }else{
                        $mediaInfo['description'] = '';
                    }
                    if($media->group->player){
                        $video = $media->group->player[0]->attributes()->url;
                        $vLink = preg_replace('/=/', "/", $video);
                        $videoLink = preg_replace('/\?/', "/", $vLink);
                        $mediaInfo['contentUrl'] = $videoLink."&hl=en&fs=1";
                        $test_str = preg_split('/\/v\//', $videoLink, 2);
                        $video_id_array = preg_split('/&/', @$test_str[1],2);
                        $mediaInfo['videoId'] = $video_id_array[0];
                    }                       
                    else{
                         $tmp = @$entry->xpath("app:control");
                         $tmp2 = @$tmp[0]->xpath("yt:state");

                        if(@$tmp2[0]->attributes()->name == 'restricted')
                        {
                            //echo "<br>INSIDE ".$mediaInfo['title'];
                            $this->next_index[$i] = 'n';
                            continue;
                        }
                        if(isset($entry->link) && $entry->link[0]->attributes()->href !=''){
                            $video = $entry->link[0]->attributes()->href;
                            $vLink = preg_replace('/=/', "/", $video);
                            $videoLink = preg_replace('/\?/', "/", $vLink);
                            $mediaInfo['contentUrl'] = $videoLink."&hl=en&fs=1";
                            $test_str = preg_split('/\/v\//', $videoLink, 2);
                            $video_id_array = preg_split('/&/', $test_str[1],2);
                            $mediaInfo['videoId'] = $video_id_array[0];
                            if(!$mediaInfo['videoId'])
                            {
                                $this->next_index[$i] = 'n';
                                //echo "video Skipped.";
                                continue;
                            }
                        }
                        else{

                            $this->next_index[$i] = 'n';
                            continue;
                        }
                    }   
                    $this->next_index[$i] = 'y';
                    $res[] = $mediaInfo;    
            }
            else
            {
                $this->next_index[$i] = 'n';
            }
        }   // foreach
    return $res;
}

     public function getRecentShortResult($url){
            $token = $this->accessToken;
            $developerKey = $this->developerKey;
            if($token !='' && $developerKey !='')
                $output = $this->make_api_call($url);
            else
            {
                $response = $this->make_get_call($url);
                $output = $response['output'];
            }
            $result = array();
            $validresult = $this->checkErrors($output);
            if($validresult['is_error'] == 'No')
            {
                $xml = $validresult['xml'];
                $tmp = $xml->xpath("openSearch:totalResults");
                $tmp_totalresults = (string)$tmp[0];
                $tmp = $xml->xpath("openSearch:startIndex");
                $result['startindex'] = (string)$tmp[0];
                $tmp = $xml->xpath("openSearch:itemsPerPage");
                $result['itemsPerPage'] = (string)$tmp[0];
                //$result['itemsPerPage'] = $maxresults;
                if($tmp_totalresults > $result['startindex']){
                    $res = $this->getRecentUploadedVideos($xml);
                    $result['nextPageIndex'] = $result['startindex'] + count($this->next_index);
                }
                else
                    $result['nextPageIndex'] = 0;
                $result['result'] = @$res;
            }
            else
            {
                $result['error'] = $validresult['error'];
            }
            $result['is_error'] = $validresult['is_error'];
            unset($validresult);
            unset($output);
            unset($response);
            return $result;
    }
    public function getVideosBysubscriptionID($subscriptionID,$startIndex=1,$limit=10,$safeSearch='strict',$strict='true'){
        $url = 'http://gdata.youtube.com/feeds/api/users/default/subscriptions/'.$subscriptionID.'?v=2';
        $feedResponse = $this->getContentURL($url);
        $contentURL = @$feedResponse['contentURL'];
        $tempcontentURL = $contentURL;
        $contentURL .= '&start-index='.$startIndex.'&max-results='.$limit.'&strict='.$strict;
        $result = array();
        if($contentURL !=''){
        $output = $this->make_api_call($contentURL);
        $validresult = $this->checkErrors($output);
        if($validresult['is_error'] == 'No'){
                    $xml = $validresult['xml'];
                    $tmp = $xml->xpath("openSearch:totalResults");
                    $tmp_totalresults = (string)$tmp[0];
                    $tmp = $xml->xpath("openSearch:startIndex");
                    $result['startindex'] = (string)$tmp[0];
        if(@$feedResponse['recentUpload'] == 1){
                    $res = $this->getRecentUploadedVideos($validresult['xml']);                     

                    $shortCnt = $this->getShortCount();
                    if($shortCnt > 0 && $tmp_totalresults > $limit)
                    {
                        $newStartIndex = $startIndex + $limit;
                        $newmaxresults = $shortCnt;
                        $iteration = 1;
                        while($shortCnt > 0 && $tmp_totalresults >= $newStartIndex){            
                            if($iteration !=1){
                                $newStartIndex = $newStartIndex + $newmaxresults;
                                $newmaxresults = $shortCnt;                                 
                            }
                            $iteration++;
                            $url = $tempcontentURL.'&start-index='.$newStartIndex.'&max-results='.$newmaxresults.'&strict='.$strict;
                            $shortResult = $this->getRecentShortResult($url);
                            if(@$shortResult['is_error']=='No'){
                                if(!empty($shortResult['result']) && count($res) <= $limit)
                                {
                                    foreach($shortResult['result'] as $shortkey => $shortItem)
                                        $res[] = $shortItem;    
                                    $shortCnt = $this->getShortCount();
                                }
                                else
                                {
                                    continue;
                                }                           
                            }
                            else
                            {
                                break;
                            }                                   
                        }//WHILE
                        $result['nextPageIndex'] = @(isset($shortResult['nextPageIndex'])?$shortResult['nextPageIndex']:0);
                    }
                    else
                    {
                        $result['nextPageIndex'] = @$result['startindex'] + count($this->next_index);
                    }
                    if($tmp_totalresults < $result['nextPageIndex'])    
                    {
                        $result['nextPageIndex'] = 0;
                    }
                    $result['itemsPerPage'] = $limit;               
                    $result['totalresults'] = count($res);
                    $result['result'] = $res;
                    unset($res);
                    unset($xml);
            }
        else
        {
        $criteria = $feedResponse['title'];

            $xml = $validresult['xml'];
            $res = $this->getFormatedVideoresult($xml,$criteria);
            //Pagination logic
            $shortCnt = $this->getShortCount();
            if($shortCnt > 0 && $tmp_totalresults > $limit)
            {
                $newStartIndex = $startIndex + $limit;
                $newmaxresults = $shortCnt;
                $iteration = 1;
                while($shortCnt > 0 && $tmp_totalresults >= $newStartIndex){            
                    if($iteration !=1){
                        $newStartIndex = $newStartIndex + $newmaxresults;
                        $newmaxresults = $shortCnt;                         
                    }
                    $iteration++;
                    $url = $tempcontentURL.'&start-index='.$newStartIndex.'&max-results='.$newmaxresults.'&strict='.$strict;
                    $shortResult = $this->getShortResult($url,$criteria);
                    if(@$shortResult['is_error']=='No'){
                        if(!empty($shortResult['result']))
                        {

                            foreach($shortResult['result'] as $shortkey => $shortItem)
                                $res[] = $shortItem;        
                                $shortCnt = $this->getShortCount();
                        }
                        else
                        {
                            continue;
                        }                           
                    }
                    else
                    {
                        break;
                    }                       
                }//while
                $result['nextPageIndex'] = @(isset($shortResult['nextPageIndex'])?$shortResult['nextPageIndex']:0);
            }
            else
            {
                $result['nextPageIndex'] = $result['startindex'] + count($this->next_index);
            }
            if($tmp_totalresults < $result['nextPageIndex'])    
            {
                $result['nextPageIndex'] = 0;
            }
            //pagination logic
            $result['itemsPerPage'] = $limit;               
            $result['totalresults'] = count($res);
            $result['result'] = $res;
            unset($res);
            unset($xml);

        }
        }// NO
        else
            {
                $result['is_error'] = $validresult['is_error'];
                $result['error'] = $validresult['error'];
            }
    }
    else
    {
        $result['is_error'] = $feedResponse['is_error'];
        $result['error'] = $feedResponse['error'];
    }
        unset($validresult);
        unset($feedResponse);
        return $result;
    } 
```

} /* 文件结束 Someclass.php */

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-24T23:05:59.677

对于遇到此问题的任何人，我都遇到了此错误，并通过以主要用户身份登录 YouTube，转到右上角并单击“YouTube 设置”来修复它。然后我点击“创建频道”。错误消失了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:30:16.513

这与您的代码或程序没有任何关系。这只是意味着您没有将您的 Google 帐户与 Youtube 相关联，反之亦然。

我也遇到了同样的问题。但对我来说，我最初创建了一个 Google 帐户，尽管当我访问 Youtube.com 时我可以看到我已登录，但这并不意味着我的 Google 帐户实际上已链接到 YouTube。所以就我而言，当我在 youtube.com 上时，实际上我点击了右上角的用户名并做了一些事情……但基本上它只是提示我将 YouTube 链接到我的 Google 帐户。当这一切都完成后，它终于把我带到了我的 YouTube 个人资料页面。然后当我再次运行我的程序时，“NoLinkedYoutubeAccount”错误消息消失了。

试试看。对你来说，可能适得其反。希望这可以帮助！

# content-management-system - 如何手动更改 Umbraco 中文档的链接

> ID：14833394
> 
> 赞同：7
> 
> 时间：2013-02-12T13:13:45.330
> 
> 标签：content-management-system, umbraco

由于到主页的链接不正确，我的面包屑已损坏。请告诉我，如何手动更改“链接到文档”参数。我使用 umbraco 4.7.2 我只需要主页上的域名和内部页面上的完整绝对路径。谢谢。

![在此处输入图像描述](../Images/95cc8f1ab94b31845aca001f2ac431df.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-23T14:23:15.963

右键单击主页内容并选择管理主机。

![在此处输入图像描述](../Images/0d5c5f5dff2f96bc840f44863eb8f613.png)

输入域名并选择语言，然后单击添加新域/更新按钮。

![在此处输入图像描述](../Images/673836d0491030cc2558634a2046a857.png)

![在此处输入图像描述](../Images/a8fd539e18bd81def91e1581425126f4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:23:56.017

您的“文档链接”字段设置为“/”，您的问题听起来像您想要的吗？如果没有，你有几个选择。

查看可用于为页面提供替代 URL 或名称的这些设置：

[http://our.umbraco.org/wiki/reference/umbraco-best-practices/umbracourlname](http://our.umbraco.org/wiki/reference/umbraco-best-practices/umbracourlname)

其中之一可能最适合您的问题。umbracoUrlAlias 允许您选择可用于呈现同一页面的不同 url（便于更正不正确的 url）。

我强烈建议安装 301 重定向包以避免将来出现这些问题：http: [//our.umbraco.org/projects/developer-tools/301-url-tracker](http://our.umbraco.org/projects/developer-tools/301-url-tracker)

干杯

皮特

# cuda - 当我尝试在内核中使用 printf() 时出现错误

> ID：14833395
> 
> 赞同：1
> 
> 时间：2013-02-12T13:13:48.723
> 
> 标签：cuda

我正在使用 Visual Studio 2010 和具有计算能力 2.0 的 GTX480。

我尝试将 sm 设置为 2.0，但是当我尝试在内核中使用 printf() 时，我得到：

> 错误：不允许从 __device__/__global__ 函数（“test”）调用主机函数（“printf”）

这是我的代码：

```
#include "util\cuPrintf.cu"
#include <cuda.h>
#include <iostream>
#include <stdio.h>
#include <conio.h>
#include <cuda_runtime.h>

__global__ void test (void)
{
  printf("Hello, world from the device!\n");
}

void main(void)
{
    test<<<1,1>>>();
    getch();
} 
```

我在这里找到了一个例子：“CUDA_C_Programming_Guide”'page _106'“B.16.4 Examples”最后，它对我有用：D 谢谢。

```
#include "stdio.h"
#include <conio.h>

// printf() is only supported
// for devices of compute capability 2.0 and higher

  #if defined(__CUDA_ARCH__) && (__CUDA_ARCH__ < 200)
      #define printf(f, ...) ((void)(f, __VA_ARGS__),0)
  #endif

__global__ void helloCUDA(float f)
{
    printf("Hello thread %d, f=%f\n", threadIdx.x, f);
}

int main()
{
    helloCUDA<<<1, 5>>>(1.2345f);
    cudaDeviceSynchronize();
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:08:15.893

要`printf`在内核代码中使用，您必须做三件事：

1.  确保`cstdio`或`stdio.h`包含在内核编译单元中。CUDA通过重载实现内核`printf`，所以你必须包含那个文件
2.  为计算能力 2.x 或 3.x 编译代码并在支持的 GPU 上运行它（因此将类似的东西传递`-arch=sm_20`给 nvcc 或 Visual Studio 或 Nsight Eclipse 版本中的 IDE 等效项）
3.  通过在主机代码中包含显式或隐式同步点来确保内核已完成运行（`cudaDeviceSynchronize`例如）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:50:29.923

您可能正在为不支持 printf() 的体系结构进行编译。默认情况下，该项目针对计算架构 1.0 进行编译。要更改此设置，请在 VS 中打开项目属性 -> CUDA C/C++ -> 设备并将“代码生成”属性更改为“compute_20,sm_20”。

你不需要`#include "util\cuPrintf.cu"`。有关如何使用 printf 以及如何刷新输出以便您实际看到结果的详细信息，请参阅[此内容。](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#formatted-output)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:37:11.380

如果您收到该错误，则可能意味着您的 GPU 没有计算能力 2.x 或更高版本。 [该线程](https://stackoverflow.com/questions/13315787/not-able-to-use-printf-in-cuda-kernel-function)更详细地介绍了在内核函数中打印的选项。

# big-o - 不执行时的时间复杂度

> ID：14833396
> 
> 赞同：-4
> 
> 时间：2013-02-12T13:13:50.117
> 
> 标签：big-o, time-complexity

以下程序段的“最佳情况”时间复杂度是多少？

```
n=0
sum=0
input(x)
while x!=-999 do
  n=n+1
  sum=sum+x
  input(x)
end {while}
mean=sum/n 
```

当用户第一次输入“-999”时，“最佳情况”是否可能是 O(1) 注意：当用户第一次输入 -999 时，“均值”将为 0/0，函数结果未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:25:08.993

最坏的情况是无穷大，这意味着这个程序永远不会停止。我什至不会称它为算法，因为“算法”的某些定义需要一组有限的输入，而另一些则要求它在给定数量的计算步骤之前终止。

这意味着`O()`在这里不适用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T13:21:25.597

算法的复杂性通常是根据某种数据来定义的。它可以是输入数据，就像你的情况一样。

想象一下，数据不是手动输入的，而是在应用程序中以数组的形式提供的。那么复杂度会是多少呢？

在这种情况下，处理的数字数量为 N，每个 N 循环运行一次，因此您可以假设复杂度为 O(N)。

# r - 从动物园时间序列对象替换采样

> ID：14833402
> 
> 赞同：0
> 
> 时间：2013-02-12T13:14:06.943
> 
> 标签：r, random, time-series, zoo

我正在尝试创建一个装袋算法。为此，我需要从整个时间序列中绘制随机块。我创建了一个包含随机块绘制的索引向量，但是当我想将它应用于我的动物园时间序列时，我得到了

```
In zoo(rval, index(x)[i]) :
  some methods for “zoo” objects do not work if the index entries in ‘order.by’ are not unique 
```

错误。因为采样使用替换，我得到多个具有相同时间戳的条目。我以某种方式尝试将数据转换为不包含时间戳的矩阵，但它并没有真正奏效。我也在控制台中手动尝试了同样的事情，我没有从动物园对象那里得到警告，但我真的不想解决抑制错误消息或类似的事情。

这将是相关代码的一部分：n = 样本大小，m = 块大小，b = 块数（因此 m*b=n）。Ypretest 和 Xpretest 被初始化为 zoo（但我也尝试了各种其他类型，也没有成功）

```
if (n%%m == 0) {
  b <- n/m

  while(tail(blockvector,n=1)+m < n) {
  blockvector <- c(blockvector,tail(blockvector,n=1)+m)  
}

randomvector <- sample(blockvector, b, replace=T)        

for(i in 1:b) {
  blockindex <- c(blockindex, randomvector[i]:(randomvector[i]+m-1))  
}

Ypretest <- Y[blockindex]
Xpretest <- X[blockindex] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:30:09.577

这种带替换的重采样与 R 中的时间序列对象不完全兼容，在这种情况下，具有相同时间戳的观察可能会导致问题。鉴于您的机器学习算法适用于向量和矩阵，我会使用它们。您可以完全删除 zoo 对象，或者在 bagging 之前对其进行转换。

# sql - 如何从嵌套表中选择特定行？

> ID：14833406
> 
> 赞同：0
> 
> 时间：2013-02-12T13:14:12.457
> 
> 标签：sql, oracle, select, oracle11g, nested-table

我有一个看起来像这样的表：

```
 CREATE
     OR
REPLACE
   TYPE subaccount_nt 
     IS TABLE OF VARCHAR2(30);

 CREATE
   TABLE my_table
       ( contract_id   NUMBER(38,0)
       , subaccount    SUBACCOUNT_NT ); 
```

以下是一些示例数据：

```
 100          [1000, 1, 2]
   200          [2000, NULL, 999]
   300          [3000] 
```

如果第三行存在，我如何编写查询以从嵌套表中返回第三行？这是我想要得到的输出：

```
 100          1
   200          NULL
   300          NULL 
```

以前从未使用过嵌套表，我发现很难对我的查询进行论坛。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:47:26.470

您可以使用带有横向连接的分析（[取消嵌套集合](http://docs.oracle.com/cd/E11882_01/appdev.112/e11822/adobjcol.htm#sthref478)）：

```
SQL> SELECT contract_id, CASE WHEN rn = 2 THEN val END val
  2    FROM (SELECT t.contract_id, column_value val,
  3                 row_number() over(PARTITION BY t.contract_id ORDER BY 1) rn,
  4                 COUNT(*) over (PARTITION BY t.contract_id) cnt
  5            FROM my_table t,
  6                 TABLE(t.subaccount))
  7   WHERE rn = 2 OR cnt = 1;

   CONTRACT_ID VAL
-------------- ---
           100 1
           200 
           300 
```

这不会列出具有空的行`subaccount`。

顺便说一句，由于嵌套表存储为*无序*的行集，因此无法保证顺序。

# java - 在 Java 传递对象方面需要帮助

> ID：14833409
> 
> 赞同：0
> 
> 时间：2013-02-12T13:14:18.150
> 
> 标签：java

更新：我修改了 hashCode，现在好多了。:) 但问题仍然存在...... :(

所以，也修改了我的方法：

```
private Node getMinNode()
{

    int min = 9999999;   //value
    Node minNode = new Node(); //key,index

    for (Node key : this.distances.keySet()) {

        int minOfNode= this.distances.get(key);

        System.out.println("Key "+ key +", Value = " + minOfNode);

        if(minOfNode<min)
        {
           min= minOfNode;
           minNode= key;
           System.out.println("Key minNode = " + minNode + ", Value minNode = " + minOfNode);

        }
    }

    return minNode;

} 
```

并且有输出：（行中的空格（，，）将是一个空字符）这不是结束......这只是前几行......

```
 Key 66601, 3546492, 3546493, 228, f, Value = 9999999
   Key 77393, 3628185, 3628186, 64, t, Value = 9999999
   Key 0, 0, 0, 0, , Value = 0 
   Key minNode = 0, 0, 0, 0, , Value minNode = 0
   Key 66601, 3546492, 3546493, 228, f, Value = 9999999 
   Key 77393, 3628185, 3628186, 64, t, Value = 9999999 
```

（注意：具有'Key 0, 0, 0, 0, , Value = 0' 的元素确实存在，这是 startNode）在该构造函数中，属性用零初始化，我知道，所以我的主要问题是，为什么是这样吗？它们是从 if() 中传递出来的，但是在 if() 中它们不是我希望更清楚我的问题是什么。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:05:08.887

首先，@StrekoZ 部分正确。如果您遍历 entrySet，则无需调用`get(key)`.

但我不确定是什么导致了你的问题。几个理论：

*   存储在地图中的距离值实际上为零；即问题在于创建条目的任何内容。

*   您的课程`Key`没有正确实施。`equals(Object)``hashCode()`

*   您的`Key`对象是可变的，并且某些东西正在以某种方式改变它们，即*在它们位于 map 时*更改它们的哈希码值。

最后两个都可能导致键出现在 keySet 中，但在您`get`使用它们时会丢失。

**更新**- 您更新的问题中的输出与我的第一个理论最一致；即地图中的距离值不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:36:50.287

首先存储 min 和 minNode - 不是很好的做法，它们不是必需的。
接下来，将整个 Map 传递给方法比使用全局变量更好（当然，如果你真的不需要它）
Map.keySet() - 返回一个键列表，看起来你需要 Map.getEntrySet() 方法检索所有“节点”（在通常的地图中，它们被称为条目）

你的代码应该是这样的：

```
 private Map.Entry getMinNode(Map<String, Integer> distances) {
    Map.Entry minNode = null;

    for (Map.Entry node : distances.entrySet()) {
        System.out.println("Key = " + node.getKey()+ ", Value = " + node.getValue());

        if (minNode == null || node.getValue() < minNode.getValue()) {
           minNode = node;
        }
    }
    return minNode;
} 
```

你应该看看 JavaDoc [http://docs.oracle.com/javase/6/docs/api/java/util/Map.html](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

# r - 数据框与数据表

> ID：14833410
> 
> 赞同：13
> 
> 时间：2013-02-12T13:14:26.867
> 
> 标签：r, dataframe, data.table

我听说到处都有人说使用 data.table 而不是 data.frame 或者您可以在使用数据框的任何地方使用 data.table，但我仍然看到很多像这样的差异

```
> myDF <- data.frame(x = rnorm(3), y = rnorm(3))                                                                                                                        
> myDT <- data.table(myDF)
> myDT[,1]                                                                                                                                                              
[1] 1
> myDF[,1]                                                                                                                                                              
[1] 0.6621419 0.8494085 0.6490634
> myDF[,c("x","y")]
          x          y
1 0.6621419 -1.8987699
2 0.8494085 -0.6273099
3 0.6490634  0.4566892
> myDT[,c("x","y")]
[1] "x" "y"
> myDT[,x,y]
            y         x
1: -1.8987699 0.6621419
2: -0.6273099 0.8494085
3:  0.4566892 0.6490634
> myDF[,x,y]
Error in `[.data.frame`(myDF, , x, y) : object 'y' not found
> 
```

它们到底有什么不同，我应该使用哪一个？

# java - Java 正则表达式问题

> ID：14833412
> 
> 赞同：0
> 
> 时间：2013-02-12T13:14:35.883
> 
> 标签：java, xml, regex

使用此正则表达式时会引发以下异常`[0-9]+_[0-9]+_[0-9]+(_[0-9]+){0,1}`。

```
Caused by: java.util.regex.PatternSyntaxException: Unclosed counted closure near index 31
[0-9]+_[0-9]+_[0-9]+(_[0-9]+){0
                               ^
    at java.util.regex.Pattern.error(Pattern.java:1713)
    at java.util.regex.Pattern.closure(Pattern.java:2759)
    at java.util.regex.Pattern.group0(Pattern.java:2537)
    at java.util.regex.Pattern.sequence(Pattern.java:1806)
    at java.util.regex.Pattern.expr(Pattern.java:1752)
    at java.util.regex.Pattern.compile(Pattern.java:1460)
    at java.util.regex.Pattern.<init>(Pattern.java:1133)
    at java.util.regex.Pattern.compile(Pattern.java:823) 
```

我正在从 XML 文件中读取此内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:17:07.787

你可能想要这个：

```
[0-9]+_[0-9]+_[0-9]+(_[0-9]+)? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T15:14:29.800

你必须用反斜杠转义逗号：

```
[0-9]+_[0-9]+_[0-9]+(_[0-9]+){0\,1} 
```

# spring - Spring数据绑定器重用

> ID：14833417
> 
> 赞同：0
> 
> 时间：2013-02-12T13:15:11.583
> 
> 标签：spring, databinder

我正在使用 DataBinder 循环创建几个对象。我想知道是否可以重用 DataBinder 对象而不是每次都创建它。

可能吗？

我现在有：

```
while (condition) {
    obj = new MyObj();
    DataBinder db = new DataBinder(obj,"my obj");
    db.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat(dateFormatParam), false));
    // set up binder with some editors etc.
    objectvalues = getValues();
    MutablePropertyValues mpv = new MutablePropertyValues();
    for (int i=0;i<fieldNames.length;i++){
        mpv.add(StringUtils.trim(fieldNames[i]), objectvalues[i]);
    }
    db.bind(mpv);
    // do something with obj...
} 
```

我想要（*这只是想象......*）：

```
obj = new MyObj();
DataBinder db = new DataBinder(obj,"my obj");
db.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat(dateFormatParam), false));
// set up binder with some editors etc.
MutablePropertyValues mpv = new MutablePropertyValues();
for (int i=0;i<fieldNames.length;i++){
    mpv.add(StringUtils.trim(fieldNames[i]), "empty value");
}
while (condition) {
    objectvalues = getValues();
    for (int i=0;i<fieldNames.length;i++){
        mpv.setPropertyValueAt(objectvalues[i], i);
    }
    db.bind(mpv);
    objCopy = obj.clone();
    // do something with objCopy...
} 
```

有什么安全的方法可以做到这一点，不浪费内存和时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:24:27.167

不，目标对象`DataBinder`是最终的，如果你想绑定另一个对象，你必须`DataBinder`为它创建一个新对象。

# iphone - BringSubViewToFront 没有按预期工作

> ID：14833419
> 
> 赞同：1
> 
> 时间：2013-02-12T13:15:17.560
> 
> 标签：iphone, objective-c, uikit

我有一组视图，它们基本上定义了 5x5 网格上的颜色方块。每个视图负责自己的触摸事件，并在触摸时执行动画。

这一切都很好，但有时动画会被视图的邻居剪辑。我尝试使用以下代码解决此问题，但有时仍会出现剪辑；它似乎是随机发生的。有什么我想念的吗？

```
- (void)handleTap:(UITapGestureRecognizer *)recognizer {
    [recognizer.view.superview bringSubviewToFront:recognizer.view];
    [recognizer.view setNeedsDisplay];

    //do animation to the view here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:17:22.347

将其用作，

```
[self.View bringSubviewToFront:recognizer.view];
[recognizer.view setNeedsDisplay]; 
```

# smtp - Javamail - 如何处理大附件？

> ID：14833423
> 
> 赞同：2
> 
> 时间：2013-02-12T13:15:27.507
> 
> 标签：smtp, imap, jakarta-mail, attachment, large-files

在 imap 上，我试图从多条消息中获取附件。它工作正常，但如果有一个大约 20 兆字节的附件，那么它似乎卡住了，java 没有继续。

这就是问题发生的地方：我想获取附件的内容并将其保存到字符串中：

```
...
MimeBodyPart attachment = (MimeBodyPart) multipart.getBodyPart(1);  
if(!Part.ATTACHMENT.equalsIgnoreCase(attachment.getDisposition())) {
    log.error("Part is not an attachment!");
} else {
    log.debug("Checking " + localFile.getName() + " with " + attachment.getFileName() + ". Attachment-Size: " + (attachment.getSize()/(1024*1024)) + " mega-bytes.");
    InputStream remoteFileIs = attachment.getInputStream();
    remoteFileContent = IOUtils.toString(remoteFileIs);  //stucked here, when attachment is large
    remoteFileIs.close();
    ...
}
... 
```

有什么解决办法吗？

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:49:47.407

IOUtils.toString 有什么作用？由于您只是给它一个 InputStream，没有字符集信息，因此它不可能正确地将字节流转换为字符。无论它在做什么，对于大数据，它都可能效率低下。

您可以打开[JavaMail Session 调试并在它获取附件时查看协议跟踪](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)，以确定它是真的“卡住”还是很慢。

您还可以通过设置[mail.imap.fetchsize 属性](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/package-summary.html)来控制从 IMAP 服务器提取的缓冲区大小。

但也许你应该质疑你是否**真的**想要一个 20MB 的字符串附件。拥有该字符串后，您将如何处理它？

# php - php 使用 cookie 设置会话

> ID：14833426
> 
> 赞同：4
> 
> 时间：2013-02-12T13:15:30.640
> 
> 标签：php, session, cookies

```
$_SESSION['user_id'] = $login;  
setcookie('user_id', '$login' , time()+86000);
header('Location: userindex.php');

function logged_in() {
return (isset($_SESSION['user_id']) || isset($_COOKIE['user_id']) ? true : false;
} 
```

我有 SESSION，但我也不想包含 COOKIE，但我不知道如何使用 COOKIE 重新启动 SESSION。我不知道我怎么能得到那个。我创建了 COOKIE，但无法注销并且遇到了 SESSION 问题，有人可以帮我解决我的问题？？？？在顶部的每个页面中，我都有 login_in 函数来检查用户是否已登录，我不会使用这些 logged_in 函数来检查用户是否有 cookie 来自动登录到用户 cookie。我认为它在logged_in函数中必须编写一些代码并且......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:28:24.570

我会注意到这是不安全的，因为任何人都可以使用 firebug 之类的东西创建 cookie。

```
@session_start();

function logged_in() {
    if(!isset($_SESSION['user_id']) && isset($_COOKIE['user_id'])) {
        $_SESSION['user_id'] = $_COOKIE['user_id'];
    }
    return isset($_SESSION['user_id']);
}

function logout() {
    unset($_SESSION['user_id']);
    setcookie("user_id", "", time() - 3600);
    header("Location: http://".$_SERVER['HTTP_HOST']);
    exit;
} 
```

编辑：添加 logout() - 将删除会话和 cookie 'user_id'，然后重定向到主页

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:29:18.983

首先：你应该设置它：

```
setcookie('user_id', $login , time()+86000); 
```

所以 $login 不带引号。如果应该在不同的页面中看到这个 cookie，也可以设置路径变量。

通过设置负时间值来删除 cookie：

```
setcookie('user_id', '' , time()-86000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:41:50.310

```
session_start();

function logged_in() {

    if(!isset($_SESSION['user_id']) && isset($_COOKIE['user_id'])) {

        $_SESSION['user_id'] = $_COOKIE['user_id'];
    }

    return (isset($_SESSION['user_id'])) && isset($_COOKIE['user_id'])));
} 
```

# ruby-on-rails - Rails -- 根据定义的属性选择记录

> ID：14833435
> 
> 赞同：0
> 
> 时间：2013-02-12T13:16:13.033
> 
> 标签：ruby-on-rails, records

我想根据定义的属性为模型选择记录。

我有一个 Docket 模型。案卷有许多状态。（我想记录每个状态变化，以维护状态变化历史和每次状态变化的一些元数据。）每个状态都有一个代码属性。

每个 Docket 都有一个定义的属性：currentstatus (self.Statuses.last.code)。我想选择所有具有 currentstatus == 1 的 Docket。因为它是一个已定义的属性，所以我不能使用 Dockets.where(:currentstatus => 1)。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:46:56.783

你可以试试sql方法

```
Docket.where('(SELECT statuses.currentstatus FROM statuses WHERE statuses.docket_id = dockets.id ORDER BY statuses.created_at DESC LIMIT 1) = ?', 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:34:53.177

您可以在**docket.rb**中使用 named_scope：

```
named_scope :find_by_currentstatus, lambda {|currentstatus| 
  {:conditions => {:currentstatus => 1}}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:21:46.947

尝试这个：

```
Docket.joins(:statuses).where("statuses.currentstatus = 1") 
```

### 更新

尝试以下操作：

```
Docket.includes(:statuses).where("(statuses.id = (select max(statuses2.id) from statuses statuses2 where statuses2.docket_id = dockets.id)) AND (statuses.currenstatus = 1)") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:22:00.557

这是一个棘手的问题，因为您只有两个非常丑陋的选择，一个有点笨拙：

a）加载所有内容并将其过滤到内存中（不要那样做！）

b) 将方法中的逻辑`current_status`转换为 SQL 查询，并在`current_status`方法和`search_for_current_status`方法中复制逻辑。

c) 复制数据（意思是，当 current_status 更改时，您在 Docket 上设置一个标志，然后您可以使用`where`.

永远不要做 a - 如果 current_status 方法很简单，请考虑 b（你可以像这样在 Docket 模型的范围方法中定义它）

```
class Docket < ActiveRecord::Base
  def self.open
    # so some magic here with joins on the statuses table
  end
end 
```

c 基本上只是出于查询目的对数据进行非规范化。您可以将其放入原始模型中，或者您可以创建一个特殊表（您甚至可以通过 cron-job 或其他触发器自动刷新该表 - 可能是`Status`模型中的 ActiveRecord after_save 回调）

# oop - 元表在 Lua (5.2) 中用于 OOP 的目的是什么？

> ID：14833437
> 
> 赞同：4
> 
> 时间：2013-02-12T13:16:21.643
> 
> 标签：oop, class, inheritance, lua, metatable

我正在努力理解元表是如何工作的，以及为什么在 Lua 中需要它们来创建类和继承。我为 Lua 找到的每个 OOP 示例都与上一个有所不同，但它们总是使用元表，特别是针对`__index`属性。以下是我如何实现一些简单的继承：

```
Animal = {}

function Animal.New()
  local self = {}
  self.sName = "Generic Animal"

  self.GetName = function(self)
    return self.sName
  end

  self.Speak = function(self)
    -- Do nothing, abstract function
  end

  return self
end

Dog = {}

function Dog.New()
  local self = Animal.New()
  self.sName = "Dog"

  self.Speak = function(self)
    print("Bark!")
  end

  return self
end

Labrador = {}

function Labrador.New()
  local self = Dog.New()
  self.sName = "Labrador"
  return self
end

Chihuahua = {}

function Chihuahua.New()
  local self = Dog.New()
  self.sName = "Chihuahua"

  self.Speak = function(self)
    print("Yap yap!")
  end

  return self
end

-- Test --

l = Labrador.New()
print(l:GetName())
l:Speak()

c = Chihuahua.New()
print(c:GetName())
c:Speak()

d = Dog.New()
print(d:GetName())
d:Speak()

a = Animal.New()
print(a:GetName())
a:Speak() 
```

输出：

```
Labrador
Bark!
Chihuahua
Yap yap!
Dog
Bark!
Generic Animal 
```

据我所知，这很好用。使用元表将如何改进我的设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:34:40.800

没有人说OOP*需要*元表。它们是*有用*的，不是必需的。

元表允许您隐藏数据。我可以很容易地破坏你所有仔细的编码：

```
local dog = Chihuahua.New()
dog.sName = nil --Oops.
dog.GetName = nil --Oops. 
```

它还允许其他可疑的构造，例如在对象中存储其他数据：`dog.newVar = foo`.

OOP 不仅仅是继承。好的 OOP 还应该包含[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)，以防止意外误用对象的完整性。`__index`元表允许您通过对主表使用空表并过滤所有设置和通过元方法来执行此`__newindex`操作。这样，只有对象才能在实际表中存储数据。除非您提供显式访问权限，否则只有对象可以检索它。

# mysql - 在 Rails 3.2.11 的 postgresql 中，Mysql 查询不起作用

> ID：14833438
> 
> 赞同：0
> 
> 时间：2013-02-12T13:16:29.067
> 
> 标签：mysql, ruby-on-rails-3, postgresql, activerecord

我在 Rails 中使用以下查询

```
grouped_link_counters = uattachment).link_counters.group("year(created_at), month(created_at)").count("created_at") 
```

它使用mysql适配器在rails控制台中给出以下结果。

```
 UserAttachment Load (0.2ms)  SELECT `user_attachments`.* FROM `user_attachments` WHERE `user_attachments`.`id` = 132 LIMIT 1
   (0.2ms)  SELECT COUNT(`link_counters`.`created_at`) AS count_created_at, year(created_at), month(created_at) AS year_created_at_month_created_at FROM `link_counters` WHERE `link_counters`.`user_attachment_id` = 132 GROUP BY year(created_at), month(created_at)
 => {11=>9, 12=>15, 1=>1, 2=>1} 
```

但是当我使用 postgresql 时，相同的命令会引发以下错误：-

```
SELECT COUNT("link_counters"."created_at") AS count_created_at, year(created_at), month(created_at) AS year_created_at_month_created_at FROM "link_counters" WHERE "link_counters"."user_attachment_id" = 1 GROUP BY year(created_at), month(created_at)
ActiveRecord::StatementInvalid: PG::Error: ERROR:  function year(timestamp without time zone) does not exist
LINE 1: ...link_counters"."created_at") AS count_created_at, year(creat...
                                                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: SELECT COUNT("link_counters"."created_at") AS count_created_at, year(created_at), month(created_at) AS year_created_at_month_created_at FROM "link_counters"  WHERE "link_counters"."user_attachment_id" = 1 GROUP BY year(created_at), month(created_at)
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1153:in `async_exec'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1153:in `exec_no_cache'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:662:in `block in exec_query'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activesupport-3.2.11/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:661:in `exec_query'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1248:in `select'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:18:in `select_all'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/relation/calculations.rb:289:in `execute_grouped_calculation'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/relation/calculations.rb:206:in `perform_calculation'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/relation/calculations.rb:159:in `calculate'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/activerecord-3.2.11/lib/active_record/relation/calculations.rb:58:in `count'
    from (irb):63
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in `start'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
    from /home/nishutosh/.rvm/gems/ruby-1.9.3-p194@cdrop/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'1.9.3p194 :064 > 
```

谁能告诉我可以做些什么来从 postgresql 获得相同的响应。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:48:33.520

在 PostgreSQL 中，我们没有像 等这样的辅助函数`YEAR`。`MONTH`取而代之的是，您可以`date_part`在 PostgreSQL 中使用与 MySQL 相同的结果。

例如

```
grouped_link_counters = uattachment.link_counters.group("date_part('year', created_at), date_part('month', created_at)").count("created_at") 
```

# html - 使 HTML 水平列表不可破坏

> ID：14833442
> 
> 赞同：0
> 
> 时间：2013-02-12T13:16:38.090
> 
> 标签：html, css, list

我有一个用 HTML 和 CSS 制作的水平列表，但我想让它牢不可破。

HTML：

```
<div id="wrap">  
    <ul data-role="listview" class="tilelist">
        <li class="box" id="10" data-icon="false">
            <div class="tit">Element1</div>
        </li>
        <li class="box" id="20" data-icon="false">
            <div class="tit">Element2</div>
        </li>
        <li class="box" id="30" data-icon="false">
            <div class="tit">Element3</div>
        </li>
        <li class="box" id="40" data-icon="false">
            <div class="tit">Element4</div>
        </li>
        <li class="box" id="50" data-icon="false">
            <div class="tit">Element5</div>
        </li>
        <li class="box" id="60" data-icon="false">
            <div class="tit">Element6</div>
        </li>
        <li class="box" id="70" data-icon="false">
            <div class="tit">Element7</div>
        </li>
        <li class="box" id="80" data-icon="false">
            <div class="tit">Element8</div>
        </li>
        <li class="box" id="90" data-icon="false">
            <div class="tit">Element9</div>
        </li>
    </ul>
</div> 
```

CSS：

```
#wrap{
    margin: 3%;
    width: auto;
    overflow: auto;
}
ul.tilelist {
    white-space: nowrap;
    margin: 0;
    padding: 0;
}
ul.tilelist li {
    display: inline;
    list-style-type: none;
    border: 1px solid;
    border-radius: 8px;
    -moz-box-shadow: 1px 1px 3px #000;
    -webkit-box-shadow: 1px 1px 3px #000;
    margin: 8px;
    width: 200px;
    min-height: 80px;
    float: left;
}
.tit {
    background-color: #d3d3d3;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    width: 100%;
    height: 36px;
    padding-top: 13px;
    font-size: 20px;
    text-align: center;
} 
```

jsFiddle 上的代码：http: [//jsfiddle.net/9eSMD/1/](http://jsfiddle.net/9eSMD/1/)

我要感谢所有愿意花时间和帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:33:21.300

```
ul.tilelist li {
    display: inline-block; /*change inline to inline-block */
    list-style-type: none;
    border: 1px solid;
    border-radius: 8px;
    -moz-box-shadow: 1px 1px 3px #000;
    -webkit-box-shadow: 1px 1px 3px #000;
    margin: 8px;
    width: 200px;
    min-height: 80px;
    /* float: left */
} 
```

# sql - 在利用 JDBC 时，XPage 中的 SQL 参数如何工作？

> ID：14833445
> 
> 赞同：2
> 
> 时间：2013-02-12T13:16:46.687
> 
> 标签：sql, jdbc, db2, xpages, xpages-extlib

我正在使用 jdbcRowSet 数据源并有一个简单的 sqlQuery：

```
SELECT * FROM MYSCHEMA.MYTABLE WHERE KEYCOLUMN=? 
```

我想将此 SQL 与一个参数一起使用来指示我想检索哪些行。为此，我正在尝试计算 INTEGER 类型的 sqlParameter。每当我尝试这样做时，我都会收到一条错误消息

DB2 SQL 错误：SQLCODE=-313，SQLSTATE=07004，SQLERRMC=null，DRIVER=4.7.85

即使我将一个简单的单个数字放入 sqlParameter value 属性中，我最终也会遇到此错误。

每当我将参数直接硬编码到 sqlQuery 中时，一切正常。这里发生了什么？任何帮助是极大的赞赏。

（IBM Lotus Domino 8.5.3、IBM DB2 10.1、xpages 的最新 extlib）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-18T09:39:22.047

很抱歉错过了这么久，但实际上您在使用参数时发现了 jdbcRowSet 数据源中的错误。如前所述，它适用于 jdbcQuery 但不适用于 jdbcRowSet。

错误代码表明这一点：`SQLCODE = -313, ERROR: THE NUMBER OF HOST VARIABLES SPECIFIED IS NOT EQUAL TO THE NUMBER OF PARAMETER MARKERS`

该问题现在被跟踪为 SPR#BGLN9N4CZU。如果找到了解决方法，我将在这里更新，让您知道它将在哪个版本的 ExtLib 中

**更新**：此问题的修复包含在 OpenNTF 上的 XPages 扩展库的最新版本 [v901 Release 9](http://openntf.org/main.nsf/project.xsp?r=project/XPages%20Extension%20Library/releases/FC420BE9BF48AE3C86257D4D0033007F)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:38:04.580

我会发表评论，但我还没有完全享有声誉。我假设您将查询写入控制台，然后剪切并粘贴到 SQL 工具（如 Tora）中。

我最近刚刚完成了一个使用 JDBC 从 Oracle 中提取数据的项目。我在我的博客上记录了它，包括这里的代码：http: [//notesspeak.blogspot.com/2013/02/notes-to-oracle-using-jdbc-end-result.html](http://notesspeak.blogspot.com/2013/02/notes-to-oracle-using-jdbc-end-result.html) 也许这有助于了解我是如何处理它的，代码就在那里。我不使用 RowSet，而是将动态 SQL 查询构建为字符串，然后执行查询。注意：顶部的 SELECT 不是动态的，更下方的 UPDATE 是动态构建的。

# .net - .NET 控制台应用程序：是否可以获得位于控制台窗口特定坐标处的字符串？

> ID：14833453
> 
> 赞同：0
> 
> 时间：2013-02-12T13:17:07.527
> 
> 标签：.net, console-application

我想从控制台窗口上特定位置的任何字符串中获取字符串值。例如，如果我在控制台屏幕上有这个：

```
abcdefgh
ijklmnop
qrstuvwx 
```

我希望能够做类似的事情：

`string s = Console.GetString(1,2,4);`

这将返回`klmn`。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:09:47.397

使用[`ReadConsoleOutputCharacter`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684969%28v=vs.85%29.aspx)：

> 从控制台屏幕缓冲区的连续单元格中复制多个字符，从指定位置开始。

* * *

**例子：**

```
private const int STD_OUTPUT_HANDLE = -11;

public static string GetString(Int16 y, Int16 x, uint length)
{
    var characters = new StringBuilder(1);
    uint numberOfCharactersRead;

    if (ReadConsoleOutputCharacter(GetStdHandle(STD_OUTPUT_HANDLE), characters, length,  new Coord(x, y), out numberOfCharactersRead))
        return characters.ToString();

    throw new InvalidOperationException("Could not get chars");
}

[DllImport("kernel32.dll", SetLastError = true)]
static extern IntPtr GetStdHandle(int nStdHandle);

[DllImport("kernel32.dll", SetLastError = true)]
static extern bool ReadConsoleOutputCharacter(IntPtr hConsoleOutput, [Out] StringBuilder lpCharacter, uint length, Coord bufferCoord, out uint lpNumberOfCharactersRead);

[StructLayout(LayoutKind.Sequential)]
public struct Coord
{
    public short X;
    public short Y;

    public Coord(short x, short y)
    {
        X = x;
        Y = y;
    }
} 
```

**用法：**

```
static void Main(string[] args)
{
    Console.WriteLine("abcdefgh");
    Console.WriteLine("ijklmnop");
    Console.WriteLine("qrstuvwx");

    string s = GetString(1, 2, 4);
    // 's' is now 'klmn'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:48:50.817

您可以使用[ReadConsoleOutput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684965%28v=vs.85%29.aspx)，它允许您指定读取的坐标。

C# 定义可以在这里找到（包括一个例子）：[http ://www.pinvoke.net/default.aspx/kernel32.readconsoleoutput](http://www.pinvoke.net/default.aspx/kernel32.readconsoleoutput)

# xml - 使用c#的xml空白问题

> ID：14833457
> 
> 赞同：0
> 
> 时间：2013-02-12T13:17:10.453
> 
> 标签：xml, xmltextwriter

我正在使用下面的代码创建 xml 文件问题是当句子或内容中有额外的空格时，此代码将其转换为单个空格如何处理

```
 using System;
using System.IO;
using System.Xml;

public class Sample
{
    public static void Main()
    {
        // Create the writer.
        XmlTextWriter writer = null;
        writer = new XmlTextWriter("c:\\ws.html", null);

        // Write an element (this one is the root).
        writer.WriteStartElement("p");

        // Write the xml:space attribute.
        writer.WriteAttributeString("xml", "space", null, "preserve");

        // Verify that xml:space is set properly. 
        if (writer.XmlSpace == XmlSpace.Preserve)
            Console.WriteLine("xmlspace is correct!");

        // Write out the HTML elements.  Insert white space 
        // between 'something' and 'Big'
        writer.WriteString("something    extra spacess in this line but not     coming in xml    i want this extra spaces");
        writer.WriteWhitespace("  ");
        writer.WriteElementString("b", "B");
        writer.WriteString("ig");

        // Write the root end element.
        writer.WriteEndElement();

        // Write the XML to file and close the writer.
        writer.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:22:33.433

你试过`writer.WriteCData()`吗？这将用一个`<![CDATA[...]]>`可以保留空间的块包围它（我自己没有尝试过，所以不能说）。

显然，如果您不希望它作为数据块，那就不好了。

# java - MVC REST API 中带有 Jackson 的动态 JSON 类型

> ID：14833466
> 
> 赞同：1
> 
> 时间：2013-02-12T13:17:30.443
> 
> 标签：java, json, rest, spring-mvc, jackson

### 场景

我需要构建一个 API，为客户端提供对存储在数据库中的多种对象的访问权限（我的 DAO 是基于 Hibernate 的今天）。这些可以`GET`ted 或`POST`ed。

目前`GET`签名如下：

```
@RequestMapping(value = "/rest/{datatype}", method = RequestMethod.GET, produces = { "application/json" })
    public @ResponseBody
    Object[] getData(@PathVariable("datatype") String dataType,
            WebRequest request) throws HttpException { 
```

这意味着根据 URL 中的数据类型，我将访问给定的存储库并返回我的业务域的对象。到目前为止它工作正常。

对于`POST`，我必须能够提交 JSON 格式的对象，将其转换为类并将其存储到数据库中。

显然，如果我使用`postFunfData(SpecificDataType object)`Jackson 成功将 JSON 转换为对象，但我在编译时不知道对象类型。

另一个要求是灵活性：当一个新类被添加到域中时，需要做*很少的*代码工作来支持新的数据类型。在`GET`第三节中，我只是添加了一个开关来支持新的数据类型，使用 Spring 实例化正确的存储库并查询数据库。

### 问题

如何编写一个 Spring MVC REST API 接受“任何东西”作为请求主体并允许我从 JSON 转换为正确的对象？就像是：

```
public void postData(@RequestBody Object objData){
    if (objData instanceof Class1) {
        Class1 obj = (Class1) objData;
        Class1Repository.store(obj);
    }
    [...]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:20:22.970

### 可能的答案

（如果您找到更好的解决方案，请提供您的）

基于同一个骨架创建几个简单的 API

```
@RequestMapping(value = "/rest/class1", method = RequestMethod.POST, consumes = { "application/json" })
public void postData(@RequestBody Class1 objOfClass1){
    store(objOfClass1)
}

@RequestMapping(value = "/rest/class2", method = RequestMethod.POST, consumes = { "application/json" })
public void postData(@RequestBody Class2 objOfClass2){
    store(objOfClass2)
} 
```

这样，当 Spring MVC 分析路径时，它会找到处理请求的正确控制器方法。然后它要求 Jackson 将请求正文转换为反射检测到的参数类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T10:24:43.967

通过路径变量或请求参数获取类名。查找名称的类。使用对象映射器将作为链接哈希图的请求主体转换为正确的类。

# linux-kernel - linux中主要和次要数字的最大值

> ID：14833467
> 
> 赞同：2
> 
> 时间：2013-02-12T13:17:31.597
> 
> 标签：linux-kernel, linux-device-driver

我正在学习 linux 设备驱动程序开发并创建了一个基本内核模块的代码，该模块创建了一个伪 char 设备。那个模块也被编译和插入了。当我做*lsmod*结果是这样的

```
 Module                 Size   Used by
modeldriver             2540    0 
```

这个数字表示什么？模块的大小是什么意思？linux中主要和次要数字的最大值是多少？我在哪里可以了解 linux kernel 2.6.37 的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:32:02.297

1.“大小”是内核模块占用的内存量，即加载到内存中的代码、数据和可能模块的一些特殊部分的大小。请注意，模块本身动态分配的内存不包括在内。

2.关于主次编号，最好不要依赖特定的限制。例如，如果您需要为您的字符设备保留这些号码，您可以使用[`alloc_chrdev_region()`](http://lxr.free-electrons.com/ident?i=alloc_chrdev_region).

从和in的定义可以看出`MAJOR()`，12 位用于编码主要数字（似乎是 0..4095），20 位用于次要数字。“The Linux Device Drivers”一书（第 3 版）第 3 章的“设备编号的内部表示”部分也证实了这一点：`MINOR()``MKDEV()`[`<linux/kdev_t.h>`](http://lxr.free-electrons.com/source/include/linux/kdev_t.h)

> 从内核版本 2.6.0 开始，dev_t 是一个 32 位的数量，其中 12 位用于主编号，20 位用于次编号。当然，您的代码不应该对设备编号的内部组织做出任何假设；相反，它应该使用 linux/kdev_t.h 中的一组宏

如果您还没有这样做，我建议您看一下上面提到的[Linux 设备驱动程序书](http://lwn.net/Kernel/LDD3/)。虽然在某些地方有点过时，但它仍然非常有用。

# php - CKEditor - 内联编辑：浏览器 POST 不是完整内容

> ID：14833468
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:17:35.250
> 
> 标签：php, javascript, ajax, ckeditor, inline-editing

**这是保存“edit_body”字段的浏览器脚本：**

```
<script>
$(document).ready(function(){
 $("#save_editable").click(function(){
  var edit_body = $("#edit_body").html();
  setTimeout(function(){
   $.ajax({
    url:'http://my-url.com/my_editor.php?id_to_update=123',
    type:'POST',
    data:{edit_body:edit_body},
    success:function(data){
     if(data=='1'){
      alert('Saved');
     }
    }
   });
  },5000);
 });
});
</script> 
```

**服务器接下来执行：**

```
if(@$_POST["edit_body"]){
 $id_to_update=intval($_GET['id_to_update']);
 $edit_body=iconv('UTF-8', 'windows-1251', html_entity_decode($_POST["edit_body"], ENT_QUOTES, "utf-8"));
 if(mysql_query(sprintf('update my_table set body="%s" where id="%s";',$edit_body,$id_to_update)){
  print '1';
 }
} 
```

**问题是：** 当“edit_body”包含大量文本时，它成功保存但**不是全部**内容。浏览器越弱，保存的文本就越少。在这种情况下，我制作了延迟 5 秒的 setTimeout 函数。但有时也无济于事。。

我怎么能告诉浏览器在 Ajax 发布之前等待处理变量“edit_body”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:49:43.057

使用 CKEditor 的 getData() 方法而不是 jQuery 的 html() 方法来获取文档解决的问题：

```
var edit_body = CKEDITOR.instances["edit_body"].getData(); 
```

# jquery - 为 jquery 选择器选择标签

> ID：14833470
> 
> 赞同：1
> 
> 时间：2013-02-12T13:17:42.490
> 
> 标签：jquery, css, asp.net-mvc-2

```
<%: Html.CompleteEditorFor(m => m.PetSitterRestrictionPermission.OffLimitAreas)%> 
```

上面生成的代码如下

```
<label for="PetSitterRestrictionPermission_OffLimitAreas">Off-limit areas</label>
<input id="PetSitterRestrictionPermission_OffLimitAreas" class="text-box single-line" type="text" value="area" name="PetSitterRestrictionPermission.OffLimitAreas" style="display: none;">
<span id="PetSitterRestrictionPermission_OffLimitAreas_validationMessage" class="field-validation-message"></span> 
```

如何`label`从上面的代码中进行选择以提供一些 jquery 效果（作为选择器）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T13:19:31.503

您可以使用..

```
$('label')  // to select all label

$('label[for="PetSitterRestrictionPermission_OffLimitAreas"]') //to select particular label by for.. 
```

例子..

```
$('label').hide();  //hides all label
$('label[for="PetSitterRestrictionPermission_OffLimitAreas"]').show('slow'). //for particualr level with effect 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:23:46.530

你可以试试这个：

```
$("label[for='PetSitterRestrictionPermission_OffLimitAreas']").text('what ever you want'); 
```

# php - 调用太多行时PHP XML列表崩溃

> ID：14833474
> 
> 赞同：0
> 
> 时间：2013-02-12T13:17:57.400
> 
> 标签：php

我试图编写一些从 MySQL 数据库中获取数据并以 XML 格式呈现的 php 代码。目前数据库中有11行数据。我使用来自 URL (domain.com/?Num=5) 的 $_Get，其中 5 是返回给用户的行数。

进行格式化的代码是：

```
for ($i = 0 ; $i < mysql_num_rows($result) ; $i++){
$row = mysql_fetch_assoc($result);
$output .= "<recipe> \n";
$output .= "<recipe_id>" . $row['recipe_id'] . "</recipe_id> \n";
$output .= "<recipe_name>" . $row['title'] . "</recipe_name> \n";
$output .= "<recipe_img_small>" . $row['thumbnail_photo_url'] . "</recipe_img_small> \n";
$output .= "<recipe_link>http://www.domain.com/recipes/recipe_detail.php?=" . $row['recipe_id'] . "</recipe_link> \n";
$output .= "</recipe> \n"; 
```

当我调用多达 5 行数据时，它加载并工作得非常好，但是当我到达第 6 行时，它崩溃告诉我问题出在以下行：

```
$output .= "<recipe> \n"; 
```

我看不出它失败的任何原因，但暗示它与**for**语句有关。

我应该从哪里着手解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:32:42.117

> 我应该从哪里着手解决这个问题？

您应该研究错误消息并完全理解它。它通常会告诉您接下来要查看的内容。但首先研究错误信息。

给定的行可能不是错误的确切位置 BTW。它也可以在该行周围和/或该行之前。

这是因为并非所有错误都可以定位到特定的行（大多数可以，但有些解析器错误不能）。

# ruby-on-rails - 我得到这个“运行转换时出错：sh：转换：找不到命令”

> ID：14833479
> 
> 赞同：2
> 
> 时间：2013-02-12T13:18:11.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3, imagemagick, captcha

我正在尝试使用名为`Simple Captcha`

这需要在机器上安装 ImageMagick。我已经安装了它并`convert --version`显示了这个

```
Version: ImageMagick 6.8.2-10 2013-02-12 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2013 ImageMagick Studio LLC
Features: DPC OpenMP
Delegates: bzlib freetype jng jpeg lcms png ps tiff x xml zlib 
```

但是，当 SimpleCaptcha 工作时，它不会显示生成的图像。
所以我看了一下日志。它说这个

```
 StandardError (Error while running convert: sh: convert: command not found):
  galetahub-simple_captcha (0.1.3) lib/simple_captcha/utils.rb:17:in `run'
  galetahub-simple_captcha (0.1.3) lib/simple_captcha/image.rb:76:in `generate_simple_captcha_image'
  galetahub-simple_captcha (0.1.3) lib/simple_captcha/middleware.rb:36:in `make_image'
  galetahub-simple_captcha (0.1.3) lib/simple_captcha/middleware.rb:18:in `call'
  ... 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-04T11:12:31.867

似乎`imagemagick`错过了。尝试安装它：

```
sudo apt-get update 
```

并输入您的密码，然后

```
sudo apt-get install imagemagick php5-imagick 
```

然后按*Return*确认安装。

# batch-file - 如何在 cmd 批处理文件中将路径子集替换为另一个路径？

> ID：14833480
> 
> 赞同：0
> 
> 时间：2013-02-12T13:18:14.523
> 
> 标签：batch-file, cmd

如果我有一个路径 `C:\folder1\folder2\folder3\keyfolder\folder4\file.ext`和一个`keyfolder`与路径中的子文件夹之一相对应的字符串，我该如何更改路径根目录，直到`keyfolder`字符串得到结果，例如`C:\newfolder1\newfolder2\keyfolder\folder4\file.ext`？基本上我想要做的是将文件的文件夹结构更改为一个文件`keyfolder`夹。

```
SET OLD=C:\folder1\folder2\folder3\keyfolder\folder4\file.ext
SET KEY=keyfolder
SET NEW=C:\newfolder1\newfolder2 
```

现在我只需要替换`OLD`为`NEW`up until `KEY`。

谢谢！

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:05:20.280

只要密钥文件夹名称不包含`=`.

```
@echo off
setlocal enableDelayedExpansion
set "OLD=C:\folder1\folder2\folder3\keyfolder\folder4\file.ext"
set "KEY=keyfolder"
set "NEW=C:\newfolder1\newfolder2"

set "MOD=%NEW%\%KEY%\!OLD:*\%KEY%\=!"
echo MOD=!MOD! 
```

# xml - 使用 XSLT 根据 XSD 转换 XML

> ID：14833486
> 
> 赞同：3
> 
> 时间：2013-02-12T13:18:27.217
> 
> 标签：xml, xslt, xsd

我想创建一个可以转换 XML 的 XSLT，以便在输出 XML（来自 XSLT）中排除 XSD 中未定义的所有元素和属性。

假设你有这个 XSD。

```
<xs:element name="parent">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="keptElement1" />
            <xs:element name="keptElement2" />
        </xs:sequence>

        <xs:attribute name="keptAttribute1" />
        <xs:attribute name="keptAttribute2" />
    </complexType>
</xsd:element> 
```

你有这个输入 XML

```
<parent keptAttribute1="kept" 
    keptAttribute2="kept" 
    notKeptAttribute3="not kept" 
    notKeptAttribute4="not kept">

    <notKeptElement0>not kept</notKeptElement0>
    <keptElement1>kept</keptElement1>
    <keptElement2>kept</keptElement2>
    <notKeptElement3>not kept</notKeptElement3>
</parent> 
```

然后我想让输出 Xml 看起来像这样。

```
<parent keptAttribute1="kept" 
    keptAttribute2="kept">

    <keptElement1>kept</keptElement1>
    <keptElement2>kept</keptElement2>
</parent> 
```

我可以通过指定元素来做到这一点，但这大约是我的 xslt 技能所能达到的。我通常对所有元素和所有属性执行此操作时遇到问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T16:53:29.330

这里有两个挑战：(1) 识别模式中声明的元素名称和属性集，以及本地声明的适当上下文信息，以及 (2) 编写 XSLT 以保留与这些名称或名称匹配的元素和属性 - 并且 -上下文。

还有第三个问题，即明确指定“在 XSD 模式中定义（或未定义）的元素和属性”的含义。出于讨论的目的，我假设您的意思是元素和属性，这些元素和属性可以绑定到模式中的元素或属性声明，在验证集 (a) 植根于输入文档树中的任意点和 (b) 以 a 开头顶级元素声明或属性声明。这个假设意味着几件事。(a) 本地元素声明只会匹配上下文中的东西——在你的例子中，`keptElement1`并且`keptElement2`只有当它们是`parent`，否则不是。(b) 不能保证输入中的元素实际上会绑定到所讨论的元素声明：如果它们的祖先之一在本地无效，那么在 XSD 1.0 和 1.1 中，事情都会变得非常复杂。(c) 我们不允许从命名类型定义开始验证；我们可以，但听起来好像您不感兴趣。 (d) 我们不允许从本地元素或属性声明开始验证。

有了这些明确的假设，我们就可以转向您的问题。

第一个任务要求您列出 (a) 架构中具有顶级声明的所有元素和属性，以及 (b) 可从它们访问的所有元素和属性。对于顶级声明，我们只需要记录对象（元素或属性）的种类和扩展名称。对于本地对象，我们需要对象的种类和顶级元素声明的完整路径。对于您的示例架构，列表 (a) 包括

*   元素{}父

（我使用的是用大括号中的命名空间名称编写扩展名称的约定；有些人称之为克拉克表示法，为詹姆斯克拉克。）

清单 (b) 包括

*   元素 {}parent/{}keptElement1
*   元素 {}parent/{}keptElement2
*   属性 {}parent/{}keptAttribute1
*   属性 {}parent/{}keptAttribute2

在更复杂的模式中，当您完成生成此列表的过程时，将会有一定数量的簿记。

您的第二个任务是编写一个 XSLT 样式表，将元素和属性保留在列表中并删除其余部分。（我在这里假设当你删除一个元素时，你也会删除它的所有内容；你的问题是关于元素，而不是标签。）

对于列表中的每个元素，使用列表中给出的上下文编写适当的身份转换：

```
<xsl:template match="parent">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template> 
```

您可以为每个元素编写单独的模板，也可以将多个元素写入匹配模式：

```
<xsl:template match="parent
                    | parent/keptElement1 
                    | parent/keptElement2">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template> 
```

对于列表中的每个属性，执行相同的操作：

```
<xsl:template match="parent/@keptAttribute1">
  <xsl:copy/>
</xsl:template> 
```

覆盖元素和属性的默认模板，以抑制所有其他元素和属性：

```
<xsl:template match="*|@*"/> 
```

[或者，正如 DrMacro 所建议的，您可以在 XSLT 中编写一个函数或命名模板来查阅您在任务 1 中生成的列表，而不是将其写入具有显式匹配模式的重复模板中。根据您的背景，您可能会发现这种方法更容易或更难理解样式表的作用。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T15:54:44.740

这不能通过通用 XSLT 处理来完成，因为 XSLT 引擎不了解 XSD。

这留下了几个选择：

1.  使用 XSLT 直接处理 XSD 文档以确定哪些元素类型是实际声明的和未实际声明的，然后在转换中使用该信息。例如，如果一个元素位于不受 XSD 架构管理的命名空间中，那么您就知道它没有定义，或者如果元素的命名空间由 xs:any 元素指定，并且具有“宽松”验证，那么您就知道它是未声明。

2.  使用 Saxon 的商业版本，它提供 XSD 解析和验证，并提供对 XSD 处理添加到元素的附加属性的访问。有关详细信息，请参阅撒克逊文档。

Apache xerces 项目包含一个 Java 中的 XSD 解析器，可用于处理复杂的 XSD 以执行您需要的任何操作，例如构建元素类型或名称空间的列表，这些元素类型或名称空间受或不受给定模式管理。因此，如果您的模式是相对静态的，那么预处理模式以构建一个简单的数据文件可能是最有效的，您的 XSLT 可以在处理文档时使用该文件。

您没有说是否可以使用 XSLT 2，但如果可以，一般的解决方案是定义一个函数来确定是否声明了给定的元素或属性，然后将该函数用作标准身份转换的一部分。使用 XSLT 1，您可以使用命名模板获得相同的效果。

例如：

```
<xsl:function name="local:isGoverned" as="xs:boolean">
   <xsl:param name="context" as="node()"/>
   <xsl:variable name="isGoverned" as="xs:boolean">
   <!-- Do whatever you do to determine governedness,
        whether this is to look at your collected data
        or use Saxon-provide info or whatever.
    -->
  </xsl:variable>
  <xsl:sequence select="$isGoverned"/>
</xsl:function> 
```

然后在你的身份转换中：

```
<xsl:template match="*">
  <xsl:copy>
    <xsl:apply-templates 
      select="
         @*[local:isGoverned(.)], 
         (*[local:isGoverned(.)] | 
          node())"
    />
  </xsl:copy>
</xsl:copy>

<xsl:template match="@* | text() | comment() | processing-instruction()">
  <xsl:sequence select="."/>
</xsl:template> 
```

这将产生仅通过由 XSD 管理的那些元素和属性的效果，但是您可以弄清楚。

艾略特

# python - Django makemessages 将翻译的字符串标记为模糊

> ID：14833487
> 
> 赞同：2
> 
> 时间：2013-02-12T13:18:28.350
> 
> 标签：python, django, internationalization, translation

我在使用 Django makemessages 管理命令时遇到问题。似乎它在 .po 文件中随机将消息标记为模糊，即使它们已经被翻译。例如....

```
#: templates/profile/edit.html:21
msgid "Save Changes"
msgstr "Save Changes DE" 
```

会成为...

```
#: templates/profile/edit.html:21
#, fuzzy,
msgid "Save Changes"
msgstr "Save Changes DE" 
```

该行为非常间歇性且难以重新创建，因此调试并不简单。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:13:57.480

我猜字符串中有一些变化 - 可能是一些不可打印的字符，它被翻译器删除，然后字符串不匹配。

如果您可以将这两个完整的文件放在某个地方，则可以给出明确的答案...

# objective-c - 如何在我的应用程序中显示来自 mysql 的文本？

> ID：14833489
> 
> 赞同：-2
> 
> 时间：2013-02-12T13:18:36.613
> 
> 标签：objective-c, textview, uitextview

这是我的数据在我的数据库中的样子：

```
Baseball cap by adidas Originals 
-   Made from cotton
-   Embroidered brand logo to the front
-   Five panel styling
-   Ventilation holes to the side 
```

如果我想`UITextView`在我的应用程序中呈现它。我怎样才能做到这一点？有没有办法可以在 UITextView 中呈现它并且文本的空格和缩进仍然存在？

任何帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:46:27.720

看看这个页面[MWFeedParser](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)

来源：[Objective-C：如何替换 HTML 实体？](https://stackoverflow.com/questions/2364797/objective-c-how-to-replace-html-entities)

# javascript - 当我选择单选按钮时如何禁用多个复选框？

> ID：14833491
> 
> 赞同：0
> 
> 时间：2013-02-12T13:18:44.097
> 
> 标签：javascript

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <%@ page isELIgnored="false" %>
<%@ page import="java.util.*"%>

<%@page import="com.ba.RetrieveDetails"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script type="text/javascript">
history.forward();
function validate(logFile){

    var count=0;

    for (var i=0; i<logFile.length; i++) {
        if (logFile[i].checked) {

            count++;
        }

    }

    if (count < 1) 
    {
    alert("please select Log Fille(s)");
    return false;
    }

    }

</script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Log Files</title>

</head>
<body>
<form name="LogFiles" action="RetrieveLogFiles" method="get" onsubmit="">
<%
HashMap hs=new HashMap();
hs=(HashMap)session.getAttribute("key");

session.getAttribute("key");

String hosts[]=(String[])session.getAttribute("hosts");
%>
<br>
<br>
<img src="BA_Logo1.bmp" align="right" alt="British Airways">
<table>
<tr>
<%
if(hs.size()== 0)
{%>
    <td><h3>Authentication fail OR Does not have access to UnixBox.Click <a href="Login.jsp">Here</a> to Login</h3></td>
<%
}
else
{
for(int i=0;i<hosts.length;i++)
{
    %>

    <h3><p><%out.println(hosts[i]+"\n");%></p></h3>

    <%

    ArrayList al=new ArrayList();
    al=(ArrayList)hs.get(hosts[i]);
    int flag=al.size();

    %>
    <td>
    <table border="2" cellpadding="4">  

    <%
    if(flag==0)
    {%>

    <td>
    <h3><p style="color:#FF0000">No Log Files to display</p></h3>
    </td>

    <%

    }else{
    for(int j=0;j<al.size();j++)
    {

        String lines[]=al.get(j).toString().split("\\r?\\n");

        for(int len=0;len<lines.length;len++)
        {

            %>

        <tr>
        <td><%out.println(lines[len]);%></td>

    <td><input type="checkbox" name="logFile" id="logFile" value="<%=hosts[i]+"$"+lines[len]%>"></td>
    <td><input type="radio" name="logFileView" id="logFileView" value="<%=hosts[i]+"$"+lines[len]%>"></td>
    </tr>

        <%
        }%>

        </table>
        </td>
        </tr>
        </table>
<%  }

}   

    }%>
<input type="submit" name="Get Logs" align="middle" value="Get Logs" onclick="return validate(logFile)" >
<%
}

%>

</form>
</body>
</html> 
```

在这里，当我按下 logFileView 中的任何单选按钮时，它必须禁用所有 logFile 复选框？反之亦然。请帮忙

logFileView 是单选按钮，logFile 是复选框。我正在使用多个复选框和多个单选按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:12:57.417

您可以使用这些[JavaScript 代码](http://jsfiddle.net/xTzNa/)
来实现它 首先，它循环获取所有元素（例如：复选框），然后向它们添加 onclick 事件侦听器。然后内部循环是在单击复选框时禁用所有单选按钮，相同的逻辑应用于单选按钮：

```
var logFiles = document.getElementsByName("logFile");
var logFileViews = document.getElementsByName("logFileView");

//To disable all radio buttons when click on any check box
for (var i=0, count=logFiles.length; i < count; i++) {
    logFiles[i].onclick = function() {
        for (var j=0, count=logFileViews.length; j < count; j++) {
            logFileViews[j].disabled = true;
        }
    };
}

//To disable all check boxes when click on any radio button
for (var i=0, count=logFileViews.length; i < count; i++) {
    logFileViews[i].onclick = function() {
        logFiles.disabled = true;
        for (var j=0, count=logFiles.length; j < count; j++) {
            logFiles[j].disabled = true;
        }
    };
} 
```

# php - 在magento中的可配置产品上显示相关产品的图像

> ID：14833503
> 
> 赞同：0
> 
> 时间：2013-02-12T13:19:17.853
> 
> 标签：php, javascript, jquery, magento

我已经使用[本教程](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/catalog/change_product_image_on_view_page_to_associated_product_s_image)来实现这一点。但是当我更改选项时，我遇到了这个错误：

```
Uncaught TypeError: Cannot set property 'src' of null configurable.js:159
Product.Config.configureElement configurable.js:159
Product.Config.configure configurable.js:127
(anonymous function) prototype.js:391
_createResponder.responder prototype.js:5598 
```

有人可以帮我吗？Magento 版本。1.7.0.2

或者你能告诉我任何其他解决方案来实现这一点吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:43:25.820

假设您的大多数产品都有与之关联的图像，并且您的图像有一个 id

```
 <img id="image" .. /> 
```

使用chrome调试工具或firebug for firefox试试

```
console.log(assocIMG); // should return all products image url
console.log(assocIMG[productNo]);  // should return image url 
```

（围绕行 $('image').src = assocIMG[productNo];）

# java - 如何创建弹簧参数化事务测试

> ID：14833504
> 
> 赞同：4
> 
> 时间：2013-02-12T13:19:23.360
> 
> 标签：java, spring, junit

在我的测试中，我需要使用 spring 依赖注入事务和参数。我找到了如何使用参数化和 DI 的示例：

```
@RunWith(value = Parameterized.class)
@ContextConfiguration(locations = { "classpath:applicationContextTest-business.xml" })
public class TournamentServiceTest {

@Autowired
TournamentService tournamentService;

    public TournamentServiceTest(int playerCount) {
        this.playerCount = playerCount;
    }

    @Parameters
    public static List<Object[]> data() {
        final List<Object[]> parametry = new ArrayList<Object[]>();
        parametry.add(new Object[] { 19 });
        parametry.add(new Object[] { 20 });
        return parametry;
    }

    @Before
    public void vytvorTurnaj() throws Exception {
        testContextManager = new TestContextManager(getClass());
        testContextManager.prepareTestInstance(this);
    }

@Test
public void test1() {
     Assert.assertFalse(false);
}

} 
```

这个例子有效。现在我需要向这个类添加事务：

```
@RunWith(value = Parameterized.class)
@ContextConfiguration(locations = { "classpath:applicationContextTest-business.xml" })
@Transactional
@TransactionConfiguration(defaultRollback = true)
public class TournamentServiceTest ... 
```

当我添加这两个新行时，此测试引发异常：

```
org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class org.toursys.processor.service.TournamentServiceTest]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given 
```

因为他想添加空构造函数：

```
public TournamentServiceTest() {
    this.playerCount = 20;
} 
```

但我不能添加这个，因为然后参数化不能运行这个测试。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:23:38.270

~~Spring TestContext 框架当前[不支持参数化测试](https://jira.springsource.org/browse/SPR-7731)。为此，您需要一个自定义规则或运行器。有一个 open [pull request](https://github.com/SpringSource/spring-framework/pull/222)，您可以从那里获取代码。~~

从 Spring [4.2](https://jira.spring.io/browse/SPR-7731)开始，您可以使用

```
@ClassRule
public static final SpringClassRule SPRING_CLASS_RULE = new SpringClassRule();

@Rule
public final SpringMethodRule springMethodRule = new SpringMethodRule(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T13:06:48.320

我有这个 CallbackParams 的 JUnit-runner - [http://callbackparams.org](http://callbackparams.org)

它提供参数化，但它也可以将实际的测试执行传递给您选择的 JUnit-runner。如果您传递给 SpringJUnit4ClassRunner，您将获得“spring 参数化事务测试”，以及事务支持等......

```
@RunWith(CallbackParamsRunner.class)
@WrappedRunner(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:applicationContextTest-business.xml"})
@Transactional
@TransactionConfiguration(defaultRollback = true)
public class TestTournamentService {

    enum PlayerCountData {
        _19, _20;

        final int value = Integer.parseInt(name().substring(1));
    }

    @ParameterizedValue PlayerCountData playerCount;

    @Autowired TournamentService tournamentService;

    @Test
    public void test1() {
        Assert.assertNotNull(
                "TournamentService should have been autowired",
                tournamentService);
        Assert.assertTrue("Player-count value greater than 18",
                18 < playerCount.value);
        Assert.assertTrue("Player-count value less than 21",
                playerCount.value < 21);
    }
} 
```

如您所见，参数化解决方案有点不同。这是因为CallbackParams没有优先考虑原始数据的参数化，原因在教程中解释： http: [//callbackparams.org/index.html#articles](http://callbackparams.org/index.html#articles)

使用 CallbackParams，参数值由参数类型确定，因此不能直接使用 int 参数器。- 上面的示例使用参数类型 PlayerCountData 并从枚举常量的名称中解析 int 值。

运行测试类会产生两个具有以下名称的测试运行：

*   test1[playerCount=_19]
*   test1[playerCount=_20]

也许这就是你要找的。

# php - 哪个更快，序列化，ini或XML

> ID：14833505
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:19:24.053
> 
> 标签：php

我正在尝试将一维数组读/写到文件中。哪种读取/替换方法更快？

*   将数组序列化到文件中，然后再次加载
*   使用 XML
*   使用 INI

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:56:55.550

我认为，这取决于数据类型以及您如何使用它。
您还没有提到另一种方法：JSON（如果您不必保存数据类型，则比序列化数组占用更少的空间）。
这可能会有所帮助： [存储 PHP 数组的首选方法（json_encode 与序列化）](https://stackoverflow.com/questions/804045/preferred-method-to-store-php-arrays-json-encode-vs-serialize)

# nullpointerexception - 部署 HttpCalloutMock 时出现异常

> ID：14833509
> 
> 赞同：2
> 
> 时间：2013-02-12T13:19:28.790
> 
> 标签：nullpointerexception, salesforce, httprequest, apex-code

我开发了一个利用`HttpRequest`类的功能。为了测试它，我使用了`HttpCalloutMock`. 此功能在`@future (callout=true)`方法中。我按照`HttpCalloutMock`. 测试 (2) 在沙盒中通过，但在部署到生产环境时，它们都在断言行中给出错误`System.NullPointerException`（显然`HttpResponse`是 null）。`HttpCalloutMock`以下是同一 Test 类中的测试代码和实现：

```
@isTest
global class TrustCalloutTest {

    global class TrustCalloutMockBasicCallout implements HttpCalloutMock {

        global HTTPResponse respond(HTTPRequest req) {

            HttpResponse res = new HttpResponse();
            res.setBody('TEST');
            res.setStatusCode(200);
            return res;
        }
    }

    global class TrustCalloutMockRequestKey implements HttpCalloutMock {

        global HTTPResponse respond(HTTPRequest req) {

            HttpResponse res = new HttpResponse();
            res.setBody('RECEIVED');
            res.setStatusCode(200);
            return res;
        }
    }

    static testmethod void testCalloutRequireKey() {

        HttpResponse res; 
        Test.setMock(HttpCalloutMock.class, new TrustCalloutMockRequestKey());
        res = TrustCallout.requestTransferKey('BLAH','https://beta2.trustpoint.fi/API/requirekey.php');
        System.assertEquals(200, res.getStatusCode());
    }
    static testmethod void testCalloutBasicCallout(){

        HttpResponse res;
        Test.setMock(HttpCalloutMock.class, new TrustCalloutMockBasicCallout()); 
        res = TrustCallout.basicCallout('BLAH','https://beta2.trustpoint.fi/API/committransfer.php');
        System.assertEquals(200, res.getStatusCode());    
    }
} 
```

实际的标注工作正常，它也遵循文档。你能看出哪里不对吗？

谢谢。

MGA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:31:01.390

看起来很奇怪，并且会指出您的沙盒和生产环境之间的不同之处。

您的方法是否可能由于某种原因`TrustCallout.requestTransferKey()`实际上没有调用并返回？`Http.send()``Null`

您是否查看了测试运行中的调试日志以遵循执行路径？您可以添加`System.debug()`呼叫`requestTransferKey()`并确认它仍在呼叫`Http.send()`吗？并且您的代码`TrustCalloutMockRequestKey.respond()`实际上正在运行？

# r - sqldf - sqliteExecStatement：语句中的错误：没有这样的表

> ID：14833513
> 
> 赞同：1
> 
> 时间：2013-02-12T13:19:36.830
> 
> 标签：r, sqldf

我最近开始使用 sqldf 包，所以我可能错过了这里的重点。
我正在尝试制作“选择案例”而不是嵌套的 ifelse()。我第一次做了一个，它工作。

```
 cohort$activite = 
sqldf("select case activite when 1 then 'actif a plein temps'  
                            when 2 then 'actif a temps partiel'  
                            when 3 then 'actif en milieu'  
                            ELSE 'Données manquantes' END   
        from cohort") 
```

然后在我的脚本中运行另一个，我收到了这个错误：

```
 cohort$motifs_ini=
sqldf("select case motifs_ini when 1 then 'contre indication medicale'  
                              when 2 then 'refus du patient'   
                              when 4 then 'bilan en cours'   
                              when 3 then 'autre motif'  
                              when 99 then 'Non precise'  
                              ELSE 'Données Manquantes' END  
      from cohort") 

Erreur dans sqliteExecStatement(con, statement, bind.data) :   
RS-DBI driver: (error in statement: no such table: cohort)  
De plus : Message d'avis :  
In value[[3L]](cond) :  
RAW() can only be applied to a 'raw', not a 'character' 
```

我不明白为什么我有这个错误。数据框存在，并且我已经使用相同类型的命令修改了一个 viariable。是因为我试图攻击同一个 data.frame 吗？
任何帮助将不胜感激。

编辑：这是我的 9213 行数据框的前 6 行。

```
structure(list(dure_ttt = c(1402L, 556L, 778L, 30L, 123L, 241L
), sexe = c(1L, 2L, 1L, 1L, 2L, 1L), nephro_ini1 = structure(c(68L, 
68L, 68L, 68L, 68L, 68L), .Label = c("0108NL", "0401NL", "0404NL", 
"0405NL", "0406NL", "0407NL", "0408NL", "0409NL", "0410NL", "0411NL", 
"0412NL", "0413NL", "0415NL", "0416NL", "0417NL", "0418NL", "0419NL", 
"0420NL", "0421NL", "0422NL", "0423NL", "0424NL", "0425NL", "0441NL", 
"0442NL", "0443NL", "0446NL", "0447NL", "0448NL", "0449NL", "0450NL", 
"0455NL", "0456NL", "0457NL", "0458NL", "0502NL", "0521NL", "0522NL", 
"0523NL", "0524NL", "0525NL", "0526NL", "0527NL", "0528NL", "0529NL", 
"0530NL", "0531NL", "0532NL", "0533NL", "0534NL", "0535NL", "0536NL", 
"0537NL", "0601NL", "0602NL", "0603NL", "0604NL", "0605NL", "0606NL", 
"0607NL", "0608NL", "0701NL", "0702NL", "0703NL", "0801NL", "0802NL", 
"0804NL", "0NL", "1107NL", "1108NL", "1141NL", "1145NL", "1308NL", 
"1337NL", "1352NL", "1414NL", "1415NL", "1416NL", "1417NL", "1435NL", 
"1501NL", "1502NL", "1503NL", "1505NL", "1506NL", "1507NL", "1521NL", 
"1522NL", "1523NL", "1531NL", "1535NL", "1536NL", "1540NL", "1542NL", 
"1551NL", "1552NL", "1554NL", "1558NL", "1749NL", "1801NL", "1804NL", 
"1805NL", "1806NL", "1812NL", "1813NL", "1814NL", "1817NL", "1823NL", 
"2213NL", "2215NL", "2216NL", "2307NL", "2311NL", "2314NL", "2318NL", 
"3202NL"), class = "factor"), catheter = c(1L, 1L, 1L, 0L, 1L, 
0L), urgence = c(0L, 0L, 1L, 0L, 0L, 0L), activite = c(8L, 4L, 
4L, 10L, 10L, 0L), nb_comorbidite_ini = c(2L, 6L, 6L, 3L, 2L, 
1L), presence_comorbidite_ini = c(1L, 1L, 1L, 1L, 1L, 1L), nb_acv_ini = c(1L, 
1L, 3L, 3L, 0L, 0L), presence_acv_ini = c(1L, 1L, 1L, 1L, 0L, 
0L), diabete_ini = c(0L, 0L, 0L, 0L, 0L, 0L), type_diabete_ini = c(99L, 
99L, 99L, 99L, 99L, 99L), insuline_ini = c(0L, 0L, 0L, 0L, 0L, 
0L), hta_ini = c(1L, 1L, 1L, 0L, 0L, 1L), hypercholesterolemie_ini = c(0L, 
1L, 0L, 0L, 1L, 0L), fumeur_ini = c(0L, 1L, 1L, 0L, 0L, 0L), 
    ex_fumeur_ini = c(0L, 0L, 0L, 0L, 0L, 0L), insuff_respiratoire_ini = c(0L, 
    1L, 0L, 0L, 0L, 0L), oxygenotherapie_ini = c(0L, 0L, 0L, 
    0L, 0L, 0L), insuffisance_cardiaque_ini = c(0L, 0L, 1L, 1L, 
    0L, 0L), stade_IC_ini = c(99L, 99L, 1L, 3L, 99L, 99L), infarctus_ini = c(0L, 
    0L, 1L, 1L, 0L, 0L), angor_ini = c(0L, 0L, 0L, 0L, 0L, 0L
    ), arythmie_ini = c(1L, 0L, 0L, 1L, 0L, 0L), arterite_MI_ini = c(0L, 
    1L, 1L, 0L, 0L, 0L), stade_arterite_MI_ini = c(99L, 1L, 3L, 
    99L, 99L, 99L), avc_ini = c(0L, 0L, 0L, 0L, 0L, 0L), ait_ini = c(0L, 
    0L, 0L, 0L, 0L, 0L), cancer_ini = c(0L, 0L, 0L, 0L, 1L, 0L
    ), cirrhose_ini = c(0L, 0L, 0L, 0L, 0L, 0L), cirrhose_A_ini = c(0L, 
    0L, 0L, 0L, 0L, 0L), cirrhose_BC_ini = c(0L, 0L, 0L, 0L, 
    0L, 0L), hepatite_ini = c(0L, 0L, 0L, 0L, 0L, 0L), hepatite_B_ini = c(0L, 
    0L, 0L, 0L, 0L, 0L), hepatite_C_ini = c(0L, 0L, 0L, 0L, 0L, 
    0L), VIH_ini = c(0L, 0L, 0L, 0L, 0L, 0L), sida_ini = c(0L, 
    0L, 0L, 0L, 0L, 0L), transpl_ini = c(0L, 0L, 0L, 0L, 0L, 
    0L), nb_handicap_ini = c(0L, 1L, 1L, 0L, 0L, 0L), amputat_ini = c(0L, 
    0L, 0L, 0L, 0L, 0L), hemipl_ini = c(0L, 0L, 0L, 0L, 0L, 0L
    ), cecite_ini = c(0L, 0L, 0L, 0L, 0L, 0L), compor_ini = c(0L, 
    1L, 1L, 0L, 0L, 0L), inscri_ini = c(0L, 0L, 0L, 0L, 0L, 0L
    ), motifs_ini = c(1L, 1L, 1L, 1L, 3L, 99L), hospit_ini = c(0L, 
    1L, 0L, 1L, 1L, 0L), nbr_hospit_ini = c(0, 2, 0, 1, 1, 0), 
    duree_hospit_ini = c(99L, 2L, 99L, 2L, 2L, 99L), marche_ini = c(3L, 
    3L, 99L, 1L, 3L, 99L), structure_ini = c(1L, 1L, 1L, 1L, 
    1L, 1L), methode_ini = c(1L, 1L, 1L, 1L, 1L, 1L), voie_abord_ini = c(1L, 
    3L, NA, 4L, 3L, 1L), nb_seances_ini = c(3L, 3L, NA, 3L, 3L, 
    3L), erythropoietine_ini = c(0L, 1L, 0L, 0L, 0L, 0L)), .Names = c("dure_ttt", 
"sexe", "nephro_ini1", "catheter", "urgence", "activite", "nb_comorbidite_ini", 
"presence_comorbidite_ini", "nb_acv_ini", "presence_acv_ini", 
"diabete_ini", "type_diabete_ini", "insuline_ini", "hta_ini", 
"hypercholesterolemie_ini", "fumeur_ini", "ex_fumeur_ini", "insuff_respiratoire_ini", 
"oxygenotherapie_ini", "insuffisance_cardiaque_ini", "stade_IC_ini", 
"infarctus_ini", "angor_ini", "arythmie_ini", "arterite_MI_ini", 
"stade_arterite_MI_ini", "avc_ini", "ait_ini", "cancer_ini", 
"cirrhose_ini", "cirrhose_A_ini", "cirrhose_BC_ini", "hepatite_ini", 
"hepatite_B_ini", "hepatite_C_ini", "VIH_ini", "sida_ini", "transpl_ini", 
"nb_handicap_ini", "amputat_ini", "hemipl_ini", "cecite_ini", 
"compor_ini", "inscri_ini", "motifs_ini", "hospit_ini", "nbr_hospit_ini", 
"duree_hospit_ini", "marche_ini", "structure_ini", "methode_ini", 
"voie_abord_ini", "nb_seances_ini", "erythropoietine_ini"), row.names = c(NA, 
6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:00:19.747

嗯，我从来没有使用过 sqldf，但只要它返回一个数据框，将第一个查询的结果分配给原始数据框的列，就会破坏其结构并且不允许其他查询。我尝试不分配整个结果，而只分配第一列并且它有效：

```
df2$activite<- sqldf("SELECT CASE activite 
                         WHEN 1 TEHN 'actif a plein temps'  
                         WHEN 2 TEHN 'actif a temps partiel'  
                         WHEN 3 TEHN 'actif en milieu'  
                         ELSE 'Données manquantes' END   
                      from df2")[[1]] 
```

（其中 df2 是您的群组），然后其他查询起作用。也许有一种更规范的方式来获得你需要的东西......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:21:31.867

@vodka 答案是很好的答案。sqldf 返回一个 data.frame。因此，直接分配它会损坏您的初始 data.frame （成为列表列表）。

这里只是一种返回更漂亮结果的方法。你可以用`AS`它来分配新的列名，然后用它来分配旧的列。

```
cohort <- data.frame(motifs_ini=c(1,2,3,4,99,100))
cohort$motifs_ini <- sqldf("SELECT CASE  motifs_ini
                               WHEN 1 THEN 'contre indication medicale'  
                               WHEN 2 THEN 'refus du patient'   
                               WHEN 4 THEN 'bilan en cours'   
                               WHEN 3 THEN 'autre motif'  
                               WHEN 99 THEN 'Non precise'  
                               ELSE 'Données Manquantes' 
                          END AS newcol
                          FROM cohort")$newcol

cohort
                  motifs_ini
1 contre indication medicale
2           refus du patient
3                autre motif
4             bilan en cours
5                Non precise
6         Données Manquantes 
```

# asp.net - 字符串未在VB中以正确格式分配给另一个字符串

> ID：14833515
> 
> 赞同：0
> 
> 时间：2013-02-12T13:19:42.047
> 
> 标签：asp.net, vb.net, date

以下是使用的代码

```
Dim FilterExpression As string
Dim oDate as DateTime

oDate=System.DateTime.Now
 FilterExpression = " quot_date >= '" + oDate.ToString() + "'" 
```

在分配 oDate 之前包含`#2/10/2013 6:10:35 PM#`此内容，但当它分配给 FilterExpression 时，它变为`quot_date >= '10/02/2013 6:10:35 PM'` 日期正在更改他的格式

知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:22:59.907

首先，这是 VB 而不是 C#。

其次， 的值`oDate`是 type 的值`DateTime`。而`#2/10/2013 6:10:35 PM`VB*字面*量是 类型`DateTime`，这不是`DateTime.ToString`. 它使用当前文化的默认格式 - 这显然是一种`dd/MM/yyyy hh:mm:ss tt`有效的 using 。

如果您需要特定的字符串表示形式，可以使用[标准](http://msdn.microsoft.com/en-gb/library/az4se3k1.aspx)或[自定义](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)字符串格式作为 的参数`DateTime.ToString`，还可以指定要使用的区域性。（例如，对于自定义字符串格式，您可能希望使用不变的文化。）

但是，如果您尝试将其用作*值*- 例如在 SQL 查询中 - 最好不需要将其转换为字符串开始。你没有告诉我们你想要达到的目标，但我会*尽量*避免将其转换为字符串，除非你真的必须这样做。

# expressionengine - 未定义索引：表达式引擎 2.2.1 中的上传位置错误

> ID：14833526
> 
> 赞同：1
> 
> 时间：2013-02-12T13:20:38.397
> 
> 标签：expressionengine

我是表达式引擎的新手。我的任务是将一些图片上传到已经使用表达式引擎创建的实时网站，同时尝试通过“创建新条目”页面中的上传图片上传新图片我收到错误上传失败：之后我发现所有我应该输入新条目的频道下的前几页都变成空白

我将调试设置为 1，并收到此错误：

*“遇到 PHP 错误严重性：通知消息：未定义索引：位置文件名：channel_images/mod.channel_images.php 行号：426 遇到 PHP 错误严重性：警告消息：require(/www/eh16395/public_html/ *** * /expressionengine/third_party/channel_images/locations//.php)：打开流失败：没有这样的文件或目录文件名：channel_images/mod.channel_images.php 行号：435"*

现在我很困惑，因为这些页面之前工作得很好：

**我的观察结果是**：指向的上传位置目录不包含任何图像，我也没有以任何方式篡改它，（如果没有上传位置中的图像，它以前怎么能正常工作）

**我做了什么：**我将相同的图像上传到该位置并同步，我开始在文件管理器中看到图像，但在特定条目中看不到。我在条目中看到的只是图像的 alt 标签，单击它们时，它们会将我带到错误：

*遇到 PHP 错误严重性：通知消息：未定义索引：位置文件名：channel_images/mod.channel_images.php 行号：426*

我已经尽可能多地解释了，我希望我能找到人来帮助我。谢谢你。

# emacs - 在 emacs 中显示最近的击键

> ID：14833530
> 
> 赞同：16
> 
> 时间：2013-02-12T13:20:46.260
> 
> 标签：emacs

如何恢复我刚刚在 Emacs 中键入的最新击键？我是 Emacs 的长期用户（30 年），但我经常打错一个键序列，会发生一些奇怪的事情，我想知道我输入的字符序列与我认为我输入的序列相比。我知道有一个命令可以显示我最近输入的几十个字符，但我不记得它是什么，而且我似乎也找不到它。例如，有时在 中`dired-mode`，我将光标移动到一个文件上，然后键入`!`以在该文件上运行命令，但我错误地键入了其他序列，突然我看到我已经选择了`dired`缓冲区中的所有文件——所有文件标有`*`。我正在尝试在这种情况下调试我的打字。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-12T13:23:46.520

类型`C-h``l`，它调用`view-lossage`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T13:23:40.533

使用`M-x` `view-lossage` `RET`.

> view-lossage 是 `help.el' 中的一个交互式编译 Lisp 函数。它必然是`C-h l`, `<f1> l`, `<help> l`。
> 
> （视图损失）
> 
> 显示最后 300 次输入击键。

# go - 如何在 go 中从 [][]byte 转换为 **char

> ID：14833531
> 
> 赞同：5
> 
> 时间：2013-02-12T13:20:50.723
> 
> 标签：go, type-conversion, cgo

我想从 go [][]byte 转换为 C **char。换句话说，我在 go 中有一个字节矩阵，我想在 C 中将其转换为 char 双指针。

请假设我必须有一个 [][]byte 作为输入和一个 **char 作为输出。

我知道可以通过执行以下操作将 []byte 转换为 *char：

```
((*C.char)(unsafe.Pointer(&data[0]))) 
```

但似乎不可能将这种情况扩展到第二维。我已经尝试了一些非常精细的方法，我将一个 [][]byte 打包到一个新的 []byte 中。然后我将该 []byte 发送到一个 C 函数，该函数使用指针算法创建一个 **char 以指向正确位置的新 []byte。

这种转换给了我奇怪的行为，我的数据在几次迭代中是正确的，但在函数调用之间似乎被破坏了。

如果有人有任何想法，我将不胜感激。

从我看到的回复中，声明我正在使用原始数据而不是字符串也很重要。因此是 go 字节类型。因此，如果添加 C 字符串终止符，原始数据将被破坏。我只是使用 C **char，因为 char 的大小是一个字节。也就是说，感谢您的回复。我能够根据自己的需要调整接受的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:56:08.290

未经测试的骨架：

```
func foo(b [][]byte) {
        outer := make([]*C.char, len(b)+1)
        for i, inner := range b {
                outer[i] = C.CString(string(inner))
        }
        C.bar(unsafe.Pointer(&outer[0])) // void bar(**char) {...}
} 
```

编辑：完整示例（经过测试）：

```
package main

/*
#include <stdlib.h>
#include <stdio.h>

void bar(char **a) {
        char *s        ;
        for (;(s = *a++);)
                printf("\"%s\"\n", s);
}
*/
import "C"
import "unsafe"

func foo(b [][]byte) {
        outer := make([]*C.char, len(b)+1)
        for i, inner := range b {
                outer[i] = C.CString(string(inner))
        }
        C.bar((**C.char)(unsafe.Pointer(&outer[0]))) // void bar(**char) {...}
}

func main() {
        foo([][]byte{[]byte("Hello"), []byte("world")})
} 
```

* * *

```
(15:24) jnml@fsc-r550:~/src/tmp/SO/14833531$ go run main.go 
"Hello"
"world"
(15:25) jnml@fsc-r550:~/src/tmp/SO/14833531$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:05:44.137

这必须手动完成。您必须分配一个新`**C.char`类型并遍历`[][]byte`切片中的每个元素以将其分配给新列表。`**C.char`这涉及为每次迭代将指针偏移正确的大小。

这是一个执行此操作的示例程序。

正如下面的评论所暗示的，如果您打算`char *`使用类似 C 的东西打印列表`printf`，请确保输入字符串以 NULL 结尾。理想情况下，通过使用`C.CString()`函数转换它们。这假设它们将被视为字符串。否则，您可能还需要提供一种将每个单独`char *`列表的长度传递给 C 函数的方法。

```
package main

/*
#include <stdlib.h>
#include <stdio.h>

void test(char **list, size_t len)
{
    size_t i;

    for (i = 0; i < len; i++) {
        //printf("%ld: %s\n", i, list[i]);
    }
}
*/
import "C"
import "unsafe"

func main() {
    list := [][]byte{
        []byte("foo"),
        []byte("bar"),
        []byte("baz"),
    }

    test(list)
}

func test(list [][]byte) {
    // Determine the size of a pointer on the current system.
    var b *C.char
    ptrSize := unsafe.Sizeof(b)

    // Allocate the char** list.
    ptr := C.malloc(C.size_t(len(list)) * C.size_t(ptrSize))
    defer C.free(ptr)

    // Assign each byte slice to its appropriate offset.
    for i := 0; i < len(list); i++ {
        element := (**C.char)(unsafe.Pointer(uintptr(ptr) + uintptr(i)*ptrSize))
        *element = (*C.char)(unsafe.Pointer(&list[i][0]))
    }

    // Call our C function.
    C.test((**C.char)(ptr), C.size_t(len(list)))
} 
```

输出如下：

```
$ go run charlist.go 
0: foo
1: bar
2: baz 
```

# css - 溢出：自动；效果但没有滚动？

> ID：14833533
> 
> 赞同：1
> 
> 时间：2013-02-12T13:20:54.743
> 
> 标签：css, html, scroll

我通过设置填充了一个div的高度

```
position: absolute;
bottom: 0px; 
top: 0px; 
```

只要页面不超过视口的高度，它就可以正常工作。如果页面滚动到屏幕外，则 div 不会随之扩展。

一种解决方案是使用 overflow: auto;，它为 div 提供滚动条并将内容保留在屏幕上。

有什么方法可以让 div 随着页面高度的增加而“扩展”它的高度？

**编辑：JS Fiddle（原始问题）：http: [//jsfiddle.net/GxvuM/](http://jsfiddle.net/GxvuM/) JS Fiddle（溢出'修复'）：http: [//jsfiddle.net/BenMagee/y8Y97/1/](http://jsfiddle.net/BenMagee/y8Y97/1/)**

问候，本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:41:23.030

怎么样`min-height: 100%`？ [http://jsfiddle.net/GxvuM/3/](http://jsfiddle.net/GxvuM/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:35:41.113

您可以使用 jquery，但我认为这不是一个好的解决方案。

[http://jsfiddle.net/GxvuM/2/](http://jsfiddle.net/GxvuM/2/)

```
var height = $(document).height();
$("#container").height(height); 
```

如果有人知道纯 CSS 的更好解决方案，欢迎。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:40:53.890

您可以使用：

```
$(window).resize(function() {

 // then add your js code
 var container = $("#container");
 var pageWidth = $(window).width();
 var pageHeight = $(window).height();
 var containerWidth = container.width();
 var margin = (pageWidth - containerWidth)/2
 container.css("left",margin);
 container.css("height",pageHeight);
}); 
```

它将根据页面大小的变化改变容器高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:49:38.880

[http://jsfiddle.net/GxvuM/4/](http://jsfiddle.net/GxvuM/4/)

```
<!DOCTYPE html>
<html>
<head>
    <style>
        body{
            position:relative;
            margin:0;
            padding:0;
        }
        .container,  .container-text{
            width:50%;
            padding:20px;
            margin-left:25%; /* Half of with remaining space = 50% */

        }

        .container{
            position:absolute;
            top:0px;
            bottom:0px;
            background:#666;
            z-index:-1;
        }

    </style>
</head>
<body>
<div class="container"></div>
<p class="container-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean sagittis lobortis ipsum, ullamcorper aliquam lacus euismod sed. Vivamus gravida nunc nec lacus sagittis blandit vel vel lacus. Nunc sed ligula at enim posuere cursus at eget velit. Aenean ut mauris a quam tempus imperdiet. Nulla volutpat, ante rhoncus gravida rutrum, dolor ipsum pretium lorem, ac laoreet mi justo id mi. Cras a urna non ante rutrum interdum. Duis id iaculis ante. Nullam molestie libero eu massa condimentum scelerisque. Cras fringilla, dui eu malesuada mattis, orci lorem faucibus mi, nec tincidunt mauris lectus vel est. Aliquam nunc felis, vestibulum id aliquet eget, pulvinar et turpis. Sed sapien nisi, convallis eu molestie accumsan, sagittis ut ligula. Donec volutpat mollis ullamcorper. Duis rhoncus, orci eu commodo tincidunt, ante neque consequat nisl, quis aliquam sapien nibh non enim. Proin sapien erat, convallis eu euismod non, iaculis et lorem. Nulla a molestie magna. Curabitur auctor, neque eget vulputate euismod, odio mi mattis velit, ac volutpat eros mauris ut metus.

Donec posuere nisi accumsan risus auctor malesuada. Morbi aliquam lectus id sem convallis vitae varius dui lobortis. Phasellus a nulla at dolor consequat tristique. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam enim mi, malesuada at 
imperdiet non, posuere nec ipsum. Aliquam sed mi mi. Quisque eleifend lacus eget massa cursus scelerisque. Nam congue neque eget orci hendrerit vitae rhoncus nisl bibendum. Vivamus vestibulum lorem quam, quis accumsan quam. Ut quis ipsum vitae arcu accumsan pulvinar sit amet eget ligula. Nam eget enim ligula, sed tincidunt mi.

Pellentesque euismod nulla at magna luctus sed porttitor tellus vehicula. Nullam id sapien mauris, sit amet adipiscing quam. Ut vehicula viverra sem bibendum condimentum. Morbi egestas sem sed justo consequat pretium. Duis eu lorem sed nibh malesuada imperdiet vel ac neque. Quisque leo lorem, sollicitudin a euismod ac, consequat tempor ipsum. Proin in libero lorem. Proin eu purus ac elit fringilla consequat ut id nisi. Suspendisse sit amet tortor mauris, nec iaculis lacus.

Pellentesque lobortis pharetra luctus. Curabitur tincidunt, odio a ullamcorper fermentum, leo risus malesuada diam, ultrices elementum magna turpis ac metus. Nam ut vehicula magna. Vestibulum porttitor eleifend nisi a mollis. Integer ante justo, condimentum quis vulputate non, interdum vitae lacus. Vestibulum nec enim risus. Pellentesque varius, nisi sit amet auctor gravida, lacus nibh tincidunt diam, in auctor erat nulla iaculis magna. Nullam mattis viverra gravida. Mauris quis arcu quis metus molestie lacinia. Phasellus accumsan sem a ligula fringilla adipiscing. Phasellus enim erat, pellentesque eu consectetur eu, tempus sed purus. Praesent vitae nibh sem, in semper nisl. In hendrerit porta ligula nec mattis. Morbi placerat ante dapibus mi facilisis lacinia. Phasellus dapibus sagittis tortor et aliquet. Maecenas commodo justo nec dolor imperdiet non convallis purus tincidunt.

        Vestibulum in ante orci. Etiam in dolor elit, eget luctus arcu. Pellentesque pellentesque sapien in nibh accumsan id gravida ipsum vulputate. Nulla neque metus, sagittis et tempus sed, tempor ut risus. Curabitur vitae elit nec ante pretium malesuada id quis urna. Morbi pulvinar molestie leo, tincidunt sodales justo feugiat at. Maecenas sollicitudin luctus libero eu posuere. Proin vitae enim at est luctus fringilla quis quis justo. Pellentesque interdum, quam a imperdiet auctor, libero erat tristique augue, vel viverra dui mauris nec est. Vestibulum nec mi augue. Cras dapibus, risus at hendrerit consectetur, risus dui porttitor risus, sed lobortis nisi dui ac metus. Donec cursus sollicitudin ipsum, vel aliquet est porta eget. Integer fermentum, mauris quis tincidunt placerat, justo magna scelerisque neque, vel venenatis arcu felis sit amet turpis. Vestibulum eros augue, tincidunt sit amet placerat a, pharetra eget lectus. Proin vel leo et ante auctor elementum. Nam fermentum hendrerit ipsum, vitae posuere magna suscipit nec.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean sagittis lobortis ipsum, ullamcorper aliquam lacus euismod sed. Vivamus gravida nunc nec lacus sagittis blandit vel vel lacus. Nunc sed ligula at enim posuere cursus at eget velit. Aenean ut mauris a quam tempus imperdiet. Nulla volutpat, ante rhoncus gravida rutrum, dolor ipsum pretium lorem, ac laoreet mi justo id mi. Cras a urna non ante rutrum interdum. Duis id iaculis ante. Nullam molestie libero eu massa condimentum scelerisque. Cras fringilla, dui eu malesuada mattis, orci lorem faucibus mi, nec tincidunt mauris lectus vel est. Aliquam nunc felis, vestibulum id aliquet eget, pulvinar et turpis. Sed sapien nisi, convallis eu molestie accumsan, sagittis ut ligula. Donec volutpat mollis ullamcorper. Duis rhoncus, orci eu commodo tincidunt, ante neque consequat nisl, quis aliquam sapien nibh non enim. Proin sapien erat, convallis eu euismod non, iaculis et lorem. Nulla a molestie magna. Curabitur auctor, neque eget vulputate euismod, odio mi mattis velit, ac volutpat eros mauris ut metus.

Donec posuere nisi accumsan risus auctor malesuada. Morbi aliquam lectus id sem convallis vitae varius dui lobortis. Phasellus a nulla at dolor consequat tristique. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam enim mi, malesuada at 
imperdiet non, posuere nec ipsum. Aliquam sed mi mi. Quisque eleifend lacus eget massa cursus scelerisque. Nam congue neque eget orci hendrerit vitae rhoncus nisl bibendum. Vivamus vestibulum lorem quam, quis accumsan quam. Ut quis ipsum vitae arcu accumsan pulvinar sit amet eget ligula. Nam eget enim ligula, sed tincidunt mi.

Pellentesque euismod nulla at magna luctus sed porttitor tellus vehicula. Nullam id sapien mauris, sit amet adipiscing quam. Ut vehicula viverra sem bibendum condimentum. Morbi egestas sem sed justo consequat pretium. Duis eu lorem sed nibh malesuada imperdiet vel ac neque. Quisque leo lorem, sollicitudin a euismod ac, consequat tempor ipsum. Proin in libero lorem. Proin eu purus ac elit fringilla consequat ut id nisi. Suspendisse sit amet tortor mauris, nec iaculis lacus.

Pellentesque lobortis pharetra luctus. Curabitur tincidunt, odio a ullamcorper fermentum, leo risus malesuada diam, ultrices elementum magna turpis ac metus. Nam ut vehicula magna. Vestibulum porttitor eleifend nisi a mollis. Integer ante justo, condimentum quis vulputate non, interdum vitae lacus. Vestibulum nec enim risus. Pellentesque varius, nisi sit amet auctor gravida, lacus nibh tincidunt diam, in auctor erat nulla iaculis magna. Nullam mattis viverra gravida. Mauris quis arcu quis metus molestie lacinia. Phasellus accumsan sem a ligula fringilla adipiscing. Phasellus enim erat, pellentesque eu consectetur eu, tempus sed purus. Praesent vitae nibh sem, in semper nisl. In hendrerit porta ligula nec mattis. Morbi placerat ante dapibus mi facilisis lacinia. Phasellus dapibus sagittis tortor et aliquet. Maecenas commodo justo nec dolor imperdiet non convallis purus tincidunt.

        Vestibulum in ante orci. Etiam in dolor elit, eget luctus arcu. Pellentesque pellentesque sapien in nibh accumsan id gravida ipsum vulputate. Nulla neque metus, sagittis et tempus sed, tempor ut risus. Curabitur vitae elit nec ante pretium malesuada id quis urna. Morbi pulvinar molestie leo, tincidunt sodales justo feugiat at. Maecenas sollicitudin luctus libero eu posuere. Proin vitae enim at est luctus fringilla quis quis justo. Pellentesque interdum, quam a imperdiet auctor, libero erat tristique augue, vel viverra dui mauris nec est. Vestibulum nec mi augue. Cras dapibus, risus at hendrerit consectetur, risus dui porttitor risus, sed lobortis nisi dui ac metus. Donec cursus sollicitudin ipsum, vel aliquet est porta eget. Integer fermentum, mauris quis tincidunt placerat, justo magna scelerisque neque, vel venenatis arcu felis sit amet turpis. Vestibulum eros augue, tincidunt sit amet placerat a, pharetra eget lectus. Proin vel leo et ante auctor elementum. Nam fermentum hendrerit ipsum, vitae posuere magna suscipit nec.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean sagittis lobortis ipsum, ullamcorper aliquam lacus euismod sed. Vivamus gravida nunc nec lacus sagittis blandit vel vel lacus. Nunc sed ligula at enim posuere cursus at eget velit. Aenean ut mauris a quam tempus imperdiet. Nulla volutpat, ante rhoncus gravida rutrum, dolor ipsum pretium lorem, ac laoreet mi justo id mi. Cras a urna non ante rutrum interdum. Duis id iaculis ante. Nullam molestie libero eu massa condimentum scelerisque. Cras fringilla, dui eu malesuada mattis, orci lorem faucibus mi, nec tincidunt mauris lectus vel est. Aliquam nunc felis, vestibulum id aliquet eget, pulvinar et turpis. Sed sapien nisi, convallis eu molestie accumsan, sagittis ut ligula. Donec volutpat mollis ullamcorper. Duis rhoncus, orci eu commodo tincidunt, ante neque consequat nisl, quis aliquam sapien nibh non enim. Proin sapien erat, convallis eu euismod non, iaculis et lorem. Nulla a molestie magna. Curabitur auctor, neque eget vulputate euismod, odio mi mattis velit, ac volutpat eros mauris ut metus.

Donec posuere nisi accumsan risus auctor malesuada. Morbi aliquam lectus id sem convallis vitae varius dui lobortis. Phasellus a nulla at dolor consequat tristique. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam enim mi, malesuada at 
imperdiet non, posuere nec ipsum. Aliquam sed mi mi. Quisque eleifend lacus eget massa cursus scelerisque. Nam congue neque eget orci hendrerit vitae rhoncus nisl bibendum. Vivamus vestibulum lorem quam, quis accumsan quam. Ut quis ipsum vitae arcu accumsan pulvinar sit amet eget ligula. Nam eget enim ligula, sed tincidunt mi.

Pellentesque euismod nulla at magna luctus sed porttitor tellus vehicula. Nullam id sapien mauris, sit amet adipiscing quam. Ut vehicula viverra sem bibendum condimentum. Morbi egestas sem sed justo consequat pretium. Duis eu lorem sed nibh malesuada imperdiet vel ac neque. Quisque leo lorem, sollicitudin a euismod ac, consequat tempor ipsum. Proin in libero lorem. Proin eu purus ac elit fringilla consequat ut id nisi. Suspendisse sit amet tortor mauris, nec iaculis lacus.

Pellentesque lobortis pharetra luctus. Curabitur tincidunt, odio a ullamcorper fermentum, leo risus malesuada diam, ultrices elementum magna turpis ac metus. Nam ut vehicula magna. Vestibulum porttitor eleifend nisi a mollis. Integer ante justo, condimentum quis vulputate non, interdum vitae lacus. Vestibulum nec enim risus. Pellentesque varius, nisi sit amet auctor gravida, lacus nibh tincidunt diam, in auctor erat nulla iaculis magna. Nullam mattis viverra gravida. Mauris quis arcu quis metus molestie lacinia. Phasellus accumsan sem a ligula fringilla adipiscing. Phasellus enim erat, pellentesque eu consectetur eu, tempus sed purus. Praesent vitae nibh sem, in semper nisl. In hendrerit porta ligula nec mattis. Morbi placerat ante dapibus mi facilisis lacinia. Phasellus dapibus sagittis tortor et aliquet. Maecenas commodo justo nec dolor imperdiet non convallis purus tincidunt.

        Vestibulum in ante orci. Etiam in dolor elit, eget luctus arcu. Pellentesque pellentesque sapien in nibh accumsan id gravida ipsum vulputate. Nulla neque metus, sagittis et tempus sed, tempor ut risus. Curabitur vitae elit nec ante pretium malesuada id quis urna. Morbi pulvinar molestie leo, tincidunt sodales justo feugiat at. Maecenas sollicitudin luctus libero eu posuere. Proin vitae enim at est luctus fringilla quis quis justo. Pellentesque interdum, quam a imperdiet auctor, libero erat tristique augue, vel viverra dui mauris nec est. Vestibulum nec mi augue. Cras dapibus, risus at hendrerit consectetur, risus dui porttitor risus, sed lobortis nisi dui ac metus. Donec cursus sollicitudin ipsum, vel aliquet est porta eget. Integer fermentum, mauris quis tincidunt placerat, justo magna scelerisque neque, vel venenatis arcu felis sit amet turpis. Vestibulum eros augue, tincidunt sit amet placerat a, pharetra eget lectus. Proin vel leo et ante auctor elementum. Nam fermentum hendrerit ipsum, vitae posuere magna suscipit nec.</p>
</body>
</html> 
```

# css - IE9 不适用于 span 元素

> ID：14833543
> 
> 赞同：0
> 
> 时间：2013-02-12T13:21:29.960
> 
> 标签：css, internet-explorer-9

我有两段代码

```
.modal-body p {
    word-wrap: break-word;
    -ms-word-wrap: break-word;
}

div.clickable_edit span {
    word-wrap: break-word;
    -ms-word-wrap: break-word;
} 
```

第一个 css 规则连续破坏了单词，但第二个没有。据我了解，这是因为 IE9 不适用于`span`.

解决此问题的方法是什么？我应该将 span 元素重命名为其他名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:39:47.950

[http://msdn.microsoft.com/en-us/library/ms531186%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms531186%28VS.85%29.aspx)

您需要使跨度获得“hasLayout”。p 标签，是块级的，已经有了它，但是 span 默认情况下只是一个内联元素，所以它需要一些额外的东西：

> 元素在绝对定位、块元素或具有指定高度或宽度的内联元素时具有布局。

# jquery - 如何绘制具有透明度的png图像轮廓（边框）

> ID：14833544
> 
> 赞同：0
> 
> 时间：2013-02-12T13:21:30.557
> 
> 标签：jquery, html, css

如何绘制具有透明度的 png 图像轮廓（边框）。

就像我们有这张图片：![在此处输入图像描述](../Images/0d6689655fa8bcf2d2276f2c9469b545.png)

我们想要这个：![在此处输入图像描述](../Images/d9a5adbedb7399ce2511467f9772e821.png)

我正在通过 HTML5 创建图像阴影，但无法获得我想要的。我想使用 HTML5 或 jquery 或两者来绘制它，如果有人有其他想法，请告诉我。

```
<img id="scream" src="images/apple/Tool.png" alt="The Scream" style="display:none">
<p>Canvas:</p>
<canvas id="myCanvas" width="500" height="500" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>
<script>
    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");
    var img=document.getElementById("scream");

    ctx.shadowColor="#000000";
    ctx.shadowOffsetX = 0;
    ctx.shadowOffsetY = 0;
    ctx.shadowBlur = 15;
    ctx.drawImage( img, 25, 25 );
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:24:36.760

我认为[这个](https://stackoverflow.com/questions/10514154/png-transparency-issue-faded-images-with-black-shadows-border-in-ie)问题很有用，也许这段代码

```
<div id="fadeMe">
    <img src="transparent.png" alt="" />
</div> 
```

解决这个问题的另一种方法是我使用这个简单的 jQuery 插件，因为我无法更改结构。我会给出归属，但老实说我不记得我在哪里找到它。

```
/* IE PNG fix multiple filters */
(function ($) {
    if (!$) return;
    $.fn.extend({
        fixPNG: function(sizingMethod, forceBG) {
            if (!($.browser.msie)) return this;
            var emptyimg = "empty.gif"; //Path to empty 1x1px GIF goes here
            sizingMethod = sizingMethod || "scale"; //sizingMethod, defaults to scale (matches image dimensions)
            this.each(function() {
                var isImg = (forceBG) ? false : jQuery.nodeName(this, "img"),
                    imgname = (isImg) ? this.src : this.currentStyle.backgroundImage,
                    src = (isImg) ? imgname : imgname.substring(5,imgname.length-2);
                this.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + src + "', sizingMethod='" + sizingMethod + "')";
                if (isImg) this.src = emptyimg;
                else this.style.backgroundImage = "url(" + emptyimg + ")";
            });
            return this;
        }
    });
})(jQuery); 
```

# asp.net-mvc - 带有 MEF 的 ASP.NET MVC 中的应用程序范围部分

> ID：14833551
> 
> 赞同：1
> 
> 时间：2013-02-12T13:22:06.833
> 
> 标签：asp.net-mvc, mef

我是 MEF 的新手，在弄清楚它时遇到了一些麻烦。我想创建动态支持多个用户存储的 ASP.NET MVC 应用程序。我想我可以为此使用 MEF。我定义了以下合同。

```
public interface IUserProvider
{
    List<ConfigurationOption> SupportedConfigurationKeys { get; }

    void Start(List<ConfigurationOption> configuration);

    List<UserInfo> GetUsers(UserInfo userInfo);

    UserInfo GetUser(string id);

    UserInfo Save(UserInfo userInfo);

    bool Delete(UserInfo userInfo);

    List<UserProperty> SupportedUserProperties { get; }
} 
```

我实施了两次。创建目录并像这样组成

```
[ImportMany(typeof(IUserProvider))]
public IEnumerable<Lazy<IUserProvider, IDictionary<string, object>>> UserProviders { get; set; }
ApplicationCatalog userProviderCatalog = new ApplicationCatalog();
CompositionContainer container new CompositionContainer(userProviderCatalog);
container.ComposeParts(this); 
```

我可以像这样创建一个实例：

```
UserProviders.Where(x => x.Metadata.ContainsKey("SystemName") && x.Metadata["SystemName"].ToString() == "ActiveDirectory").FirstOrDefault(); 
```

创建后，我将配置提供程序并使用它。但我不想为每个请求重复这些步骤。所以问题来了。

您如何制作目录容器和所有可用的应用程序？我能找到的只是控制器示例，其中引用由控制器工厂保存，但这次不相关。另一个用例是用于处理不同文件类型的内容插件。我也不想为每个请求编写它们。我想在 application_start 执行此操作并保留它们。我想过一个静态类，但如何将它与 container.compose 结合起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:52:30.283

我也在学习 MEF 的过程中，你的问题让我很感兴趣，以至于我弄乱了一些示例代码。我为自己制作了一个控制台应用程序和一个 Dll 项目，如下所示：

**DLL项目：**

```
namespace ClassLibrary1
{
    [Export(typeof(IPlugIn))]
    [ExportMetadata("Name", "TestPlugIn")]
    public class PlugIn : IPlugIn
    {
        private string _myStringVal;

        public string GetStringVal()
        {
            return _myStringVal;
        }

        public void SetStringVal(string val)
        {
            _myStringVal = val;
        }
    }
} 
```

**控制台应用程序：**

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var holder1 = new PlugInHolder();
            var plugInInstance1 = holder1.PlugIns.FirstOrDefault().Value;
            plugInInstance1.SetStringVal("blarg");

            var holder2 = new PlugInHolder();
            var plugInInstance2 = holder2.PlugIns.FirstOrDefault().Value;
            var stringVal = plugInInstance2.GetStringVal();
        }
    }

    public class PlugInHolder
    {
        [ImportMany(RequiredCreationPolicy = CreationPolicy.Shared)]
        public IEnumerable<Lazy<IPlugIn, IPlugInMetadata>> PlugIns;

        private static CompositionContainer _container;

        private void ComposeMe()
        {
            if (_container == null)
            {
                var catalog = new AggregateCatalog();
                catalog.Catalogs.Add(new DirectoryCatalog(System.AppDomain.CurrentDomain.BaseDirectory));
                _container = new CompositionContainer(catalog);
            }

            _container.ComposeParts(this);
        }

        public PlugInHolder()
        {
            ComposeMe();
        }
    }

    public interface IPlugIn
    {
        string GetStringVal();
        void SetStringVal(string val);
    }

    public interface IPlugInMetadata
    {
        string Name { get; }
    }
} 
```

当我运行它时，两个“持有者”对象最终都持有同一个插件实例，因为使用同一个容器来制作两者，并且 CreationPolicy 设置为共享，这意味着它在编写时总是使用单个实例班级。这意味着我理论上可以在一个持有者类中“设置”插件并在另一个类中再次使用它（如您所见，我使用笨拙的字符串 getter/setter 作为建立会员数据库连接或无论你想做什么）。

我在另一篇文章（[线程安全和 MEF CompositionContainer](https://stackoverflow.com/questions/3246581/thread-safety-and-the-mef-compositioncontainer)）中读到容器不是线程安全的，所以我尝试了使用静态*目录*和每个实例 CompositionContainer 的解决方案，但这导致“持有人”之间的插件的单独实例" 类实例。我认为这是意料之中的，因为尽管使用了相同的目录，但容器不会以任何方式连接。

不过，在我看来，您可以使用静态 CompositionContainer 构建控制器基类，您已经使用某种类型的锁定机制使线程安全。然后，此容器可用于通过共享创建策略将单个控制器与成员服务的相同实例组合在一起。

当然，我不知道这是否违反了 MEF 架构的一个或多个原则，所以人们应该随时纠正我。

# c++ - 使用 openCV 阅读视频

> ID：14833553
> 
> 赞同：8
> 
> 时间：2013-02-12T13:22:11.813
> 
> 标签：c++, opencv, video-streaming, directshow, video-processing

我有一个视频**engine2.avi**，我想用 openCV 阅读和展示。这是我的代码：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;

int main(int argc, char** argv)
{
    string filename = "D:\\BMDvideos\\engine2.avi";
    VideoCapture capture(filename);
    Mat frame;

    if( !capture.isOpened() )
        throw "Error when reading steam_avi";

    namedWindow("w", 1);
    for( ; ; )
    {
        capture >> frame;
        //if(!frame)
        //    break;
        imshow("w", frame);
        waitKey(20); // waits to display frame
    }
    waitKey(0);
} 
```

如果我的文件具有编解码器（我使用 Direct-Show 录制了视频），则此代码不起作用`YUV 4:2:2 (UYVY)`，但当我使用我通过 openCV 抓取的视频时，此代码有效！

有没有人知道这如何工作？

**更新：**

在阅读了一些链接后，提示捕获异常会解决问题，我修改了我的代码。它没有帮助，但这里是修改后的代码：

```
cv::VideoCapture cap("d:\\BMDvideos\\engine2.avi");
cv::Mat frame;

try
{
    cap >> frame;
}
catch(cv::Exception ex)
{
    std::cout << ex.what() << std::endl;
}
catch(...)
{
    std::cout << "Unknown exception" << std::endl;  
} 
```

程序在`cap>>frame`. 我读过类似的问题，但他们在 YUV (4:2:0) 中使用帧，而我的视频有 UYVY (4:2:2)。如何将其转换为 RGB 颜色模型？

**更新 2：**

在karlphillip的建议之后，我使用了OpenCV2.4.3，但是使用下面的代码我仍然得到了同样的错误：

```
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>
#include <opencv2\opencv.hpp>
using namespace cv;
using namespace std;

int main(){
    cv::Mat frame;
    cv::VideoCapture cap("d:\\BMDvideos\\B\\Aufnahme.avi");
    if(!cap.isOpened())
    {
        cout << "Error can't find the file"<<endl;
    }

    while(1){
        if(!cap.read(frame))
            imshow("",frame);

        cv::waitKey(33);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T18:12:34.647

以下是一些可能对您有所帮助的链接：

*   [加载、保存和显示 YUV 420 图像](http://tech.groups.yahoo.com/group/OpenCV/message/59027)
*   [如何从 OpenCV 中的 YUV 文件中读取帧？](https://stackoverflow.com/q/2231518/176769)
*   [在 OpenCV 中将 YUV 转换为 BGR 或 RGB](https://stackoverflow.com/q/7954416/176769)

**编辑**：

我必须首先澄清一些事情：**OpenCV 能够从视频文件中读取 YUV 帧，**因为它是完成这项工作的底层库（FFmpeg/GStreamer）。OpenCV 还支持通过with或在特定类型的[YUV 和 RGB](https://stackoverflow.com/a/2906294/176769)之间进行转换。`cvCvtColor()``CV_YCrCb2RGB``CV_RGBYCrCb`

再次检查您的问题后，我注意到您没有指定发生的错误类型。您可以通过将消息打印到屏幕而不是ing 来[更好地](https://stackoverflow.com/a/14713072/176769)处理[捕获界面](https://stackoverflow.com/a/8919567/176769)[可能出现的](https://stackoverflow.com/a/14505372/176769) 故障[。](https://stackoverflow.com/a/12588520/176769)`throw`

我测试了您共享的视频文件，并且使用以下代码在窗口上播放它没有问题：

```
#include <cv.h>
#include <highgui.h>

#include <iostream>

int main(int argc, char* argv[])
{
    cv::VideoCapture cap(argv[1]);
    if (!cap.isOpened())
    {
        std::cout << "!!! Failed to open file: " << argv[1] << std::endl;
        return -1;
    }

    cv::Mat frame;
    for(;;)
    {

        if (!cap.read(frame))             
            break;

        cv::imshow("window", frame);

        char key = cvWaitKey(10);
        if (key == 27) // ESC
            break;
    }

    return 0;
} 
```

如果由于某种原因，捕获界面无法打开文件，它将立即退出应用程序，而不是进一步崩溃`cap.read(frame)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T10:27:34.243

如果您只是想显示视频，这是对我有用的代码，请检查它是否对您有任何帮助。

```
#include <stdio.h>
#include <opencv2/opencv.hpp>
int main(){
CvCapture *camera=cvCaptureFromFile("C:\\test.avi");
if (camera==NULL)
    printf("camera is null\n");
else
    printf("camera is not null");

cvNamedWindow("img");
while (cvWaitKey(10)!=atoi("q")){
    double t1=(double)cvGetTickCount();
    IplImage *img=cvQueryFrame(camera);
    /*if(img){
        cvSaveImage("C:/opencv.jpg",img);
    }*/
    double t2=(double)cvGetTickCount();
    printf("time: %gms  fps: %.2g\n",(t2-t1)/(cvGetTickFrequency()*1000.), 1000./((t2-t1)/(cvGetTickFrequency()*1000.)));
    cvShowImage("img",img);
}
cvReleaseCapture(&camera);
} 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-03-10T17:58:41.910

我意识到，VideoCapture 对象需要 opencv_ffmpeg310_64.dll。将此 dll 复制到二进制文件夹后，您的 VideoCapture 对象应该能够读取视频文件。

# android - Android 如何在 IntentService 上排队多个意图

> ID：14833555
> 
> 赞同：15
> 
> 时间：2013-02-12T13:22:22.747
> 
> 标签：android, service, intentservice

我对 IntentService 的使用有点困惑。

1.  文档说 IntentService 将发送给它的所有意图排队并一次处理它们。
2.  我查看了[IntentService 的代码，](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/app/IntentService.java/)我看到*onStartCommand()*接收到意图，调用*onStart()*将其作为消息发送到意图队列

我很确定我在文档中*读到 onStartCommand()*只被系统调用一次，如果你发出两次*startService()*，第二次调用不会导致*onStartCommand()*被调用。
我在这里可能错了，因为我一直在寻找这段文档，但似乎找不到。
这与之前的概念相矛盾，即您可以通过 onStartCommand() 在 IntentService 中对许多意图进行排队。

**所以我在这里需要帮助，如何在 IntentService 上排队多个意图？**

我只看到两个选项：

*   只需以不同的意图每次调用*startService()*

*   直接*调用 onStart()*或*onStartCommand()*（绕过*startService()*）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T13:28:24.887

您发送`Intent`with`Context.startService()`并且 Intent 由您的服务在`onHandleIntent()`.

第一次调用`startService()`将导致服务`onStartCommand()`被调用。将其视为构造函数。后续调用`startService()`不需要再次启动服务，因为它已经在运行；它们只会导致对服务的更多调用`onHandleIntent()`。

# android-intent - 活动之间的意图标志

> ID：14833557
> 
> 赞同：0
> 
> 时间：2013-02-12T13:22:25.870
> 
> 标签：android-intent

我创建了我的第一个 android 应用程序。我有一个包含 2 个活动 A 和 B 的应用程序。我的活动 A 创建一个 HTTP 连接并接收数据。然后，此活动将数据发送到活动 B。我的活动 B 显示结果，如果用户想要进行修改，则会向活动 A 发送意图以修改服务器上的数据。完成此修改后，我想返回活动 B。

我希望在活动 A 上加载数据期间有一个进度条，之后查看活动 B。当活动 B 发送意图以修改数据时，我希望用户可以看到活动 A 的界面。

目前，我使用 Intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 所以我看到：活动 A，活动 B，但之后我再也看不到我的活动 A。

我想我不明白每一件事，如果有人可以帮助我吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:13:23.143

这是使用 Fragments 的完美场景。通过 FragmentManager 可以很容易地选择显示哪个片段。

请在这里阅读，

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# java - 是否可以为 Java 中的 C 程序打印诊断信息？

> ID：14833558
> 
> 赞同：2
> 
> 时间：2013-02-12T13:22:30.613
> 
> 标签：java, c, eclipse, compiler-construction, mingw

我想从java程序编译以下C代码（故意留下语法错误）：

```
/* Hello World program */

#include<stdio.h>

main()
{
    printf("Hello World")

} 
```

我希望我的 java 程序编译 C 文件并在控制台中给出诊断。示例：第 4 行；预期和第 5 行无效语法...

我已经安装了 CodeBlock MinGW 编译器，并且能够编译代码并打印出错误。

看看我做了什么：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class C_Compile {
    public static void main(String args[]){

        String ret = compile();
        System.out.println(ret);

    }
    public static String compile()
    {
        String log="";
        String myDirectory = "C:\\";
        try {
            String s= null;
            //change this string to your compilers location
            Process p = Runtime.getRuntime().exec("cmd /C gcc hello.c", null, new java.io.File(myDirectory));

            BufferedReader stdError = new BufferedReader(new
                    InputStreamReader(p.getErrorStream()));
            boolean error=false;

            log+="\n....\n";
            while ((s = stdError.readLine()) != null) {
                log+=s;
                error=true;
                log+="\n";
            }
            if(error==false) log+="Compilation Successful !!!";

        } catch (IOException e) {
            e.printStackTrace();
        }
        return log;
    }

    public int runProgram()
    {
        int ret = -1;
        try
        {
            Runtime rt = Runtime.getRuntime();
            Process proc = rt.exec("cmd.exe /c start a.exe");
            proc.waitFor();
            ret = proc.exitValue();
        } catch (Throwable t)
        {
            t.printStackTrace();
            return ret;
        }
        return ret;
    }
} 
```

我得到以下结果：

```
 ....
hello.c: In function 'main':
hello.c:9:1: error: expected ';' before '}' token 
```

但我想知道是否有可能从听众那里得到诊断。我想获取行号、位置、语法错误的类型，这些错误将稍后输入到数组中以进行进一步处理。

以下是我想在 Java 中拥有的东西：

[http://prntscr.com/sgvya](http://prntscr.com/sgvya)

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    List<CaptureErrors> myerrors = new ArrayList<CaptureErrors>();
    MyDiagnosticListener listener = new MyDiagnosticListener(); 
    StandardJavaFileManager fileManager  = compiler.getStandardFileManager(listener, null, null); 

    String fileToCompile = "C:\\Users\\User\\Desktop\\MyC.java";

    Iterable fileObjects = fileManager.getJavaFileObjectsFromStrings(Arrays.asList(fileToCompile));  
    CompilationTask task = compiler.getTask(null, fileManager, listener, null, null, fileObjects); 
    Boolean result = task.call();
    if(result == true){
        System.out.println("Compilation has succeeded");
    }
    myerrors = listener.getlistofErrors();
    for (CaptureErrors e : myerrors)
    {
        System.out.println("Code: " + e.getCode());
        System.out.println("Kind: " + e.getKind());
        System.out.println("Line Number: " + e.getLinenumber());
       // System.out.println("Message: "+ e.getMessage(Locale.ENGLISH));
        //System.out.println("Source: " + e.getSource());
        System.out.println("End position: "+ e.getEndposition());
        System.out.println("Position: "+ e.getPosition());
        System.out.println("\n");

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:42:21.063

而不是`Runtime.exec()`使用`ProcessBuilder`和`redirectErrorStream(true)`就可以了。这样，您将能够从编译器输出中捕获**stdout**和**stderr 。**而不是通过直接从`cmd /c`调用**gcc**可执行文件来调用`ProcessBuilder`. 检查`exit code`子进程的状态。非 0 退出代码通常意味着子进程中的一些错误。然后使用一些正则表达式从输出流（也将包含 gcc.exe 的 stderr 输出）中提取错误消息和行号。

# jsf - 从 JSF 1.1 迁移到 JSF 1.2

> ID：14833560
> 
> 赞同：1
> 
> 时间：2013-02-12T13:22:33.870
> 
> 标签：jsf, migration, jsf-1.2

谁能告诉我在将应用程序从 JSF 1.1 迁移到 JSF 1.2 之前我需要记住什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:39:11.743

不多，真的。JSF 1.2 100% 向后兼容 JSF 1.1。唯一需要考虑的是 JSF 1.2 修复了许多非常多的错误。因此，如果您曾经错误地将某些特定的 JSF 1.1 应用程序行为假定为“正常”行为，但实际上这是由错误引起的，那么它似乎会崩溃。

无论如何，只需在升级前后运行单元测试并单独修复问题。

它只是从 JSF 1.x 迁移到 2.x，这需要更多的工作，当然，如果您还需要将视图技术从 JSP 更改为 Facelets。为此，请参考以下答案：[从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)。

# sql - 如何将数据从 ASCII 转换为 Unicode（正确排序）？

> ID：14833562
> 
> 赞同：0
> 
> 时间：2013-02-12T13:22:37.743
> 
> 标签：sql, sql-server, string, ssis, ascii

嗨，我有问题，我第一次处理。我有带排序规则的 MS SQL Server 数据库`Latin1_General_CS_AS`（代码 1252）。但数据实际上是立陶宛语“Lithuanian_CS_AS”（代码 1257）。我需要获取数据并写入另一个数据库，转换为“普通”字符串 - 可能是 unicode。如果这可以帮助解决问题，我也在使用 SSIS。

**资料**：

`B×kÑiÖ g. 11-12`：

```
 print ASCII(SUBSTRING(@string, @position, 1)) 
   print CHAR(ASCII(SUBSTRING(@string, @position, 1)))

66  B | 215 × | 107 k | 209 Ñ | 105 i | 214 Ö | 32  | 103 g | 46  . | 32  | 49  1 | 49  1 | 45  - | 49  1 | 50  2 
```

使用此 ASCII 码页面[http://www.ascii-codes.com/cp775.html](http://www.ascii-codes.com/cp775.html)必须将其转换为：

**结果**：

```
Būkčių g. 11-12 
```

也许有可以转换的sql查询`B×kÑiÖ g. 11-12 --> Būkčių g. 11-12`？

一些[**SQLFIDDLESampleData**](http://sqlfiddle.com/#!3/80aec/1)，如果你可以用立陶宛语转换它。我想轻松解决这个问题，而不用“立陶宛语”语言转换每个字符，因为这太疯狂了:)

**更多信息**

带有校对`Latin1_General_CS_AS`用户的数据库使用软件（报告、表格），在立陶宛语中一切正常（我不知道他们如何才能看到正确的字母）。我正在使用 MS SQL Server 2008 r2。

我不能总是靠近电脑，但我会尽量回答你所有的问题。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:38:25.673

[COLLATE](http://msdn.microsoft.com/en-us/library/ms184391.aspx)子句怎么样？

来自 MSDN：

在选择期间指定排序规则

下面的示例创建一个简单的表并插入 4 行。然后，该示例在从表中选择数据时应用了两个排序规则，展示了恰帕斯州是如何以不同方式排序的。

```
CREATE TABLE Locations
(Place varchar(15) NOT NULL);
GO
INSERT Locations(Place) VALUES ('Chiapas'),('Colima')
                         , ('Cinco Rios'), ('California');
GO
--Apply an typical collation
SELECT Place FROM Locations
ORDER BY Place
COLLATE Latin1_General_CS_AS_KS_WS ASC;
GO
-- Apply a Spanish collation
SELECT Place FROM Locations
ORDER BY Place
COLLATE Traditional_Spanish_ci_ai ASC;
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:03:42.867

我已经决定使用函数：[REPLACE](http://msdn.microsoft.com/en-us/library/ms186862%28v=sql.105%29.aspx) [CHAR](http://msdn.microsoft.com/en-us/library/ms187323%28v=sql.105%29.aspx)

在我的情况下`varchar`是列的数据类型。`nvarchar`因此，要在 unicode ( ) 步骤中转换为正确的语言单词：

1.  使用select 语句中的`CS`和属性转换 unicode 中的列：`AS`

`SELECT cast(column Collate Latin1_General_CS_AS as nvarchar(22))`

2.并使用replace语句转换成真正的字母代码::

```
REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(cast(column Collate Latin1_General_CS_AS as nvarchar(22)),CHAR(181),N'Ą'), CHAR(208), N'ą'),CHAR(182),N'Č'), CHAR(209), N'č'), CHAR(183), N'Ę'), CHAR(210), N'ę'),CHAR(184), N'Ė'), CHAR(211), N'ė'),CHAR(189), N'Į'),CHAR(212), N'į'), CHAR(190), N'Š'), CHAR(213), N'š'), CHAR(198), N'Ų'), CHAR(214), N'ų'),CHAR(199), N'Ū'), CHAR(215), N'ū'), CHAR(207), N'Ž'), CHAR(216), N'ž') 
```

结果：

```
|       ¾ilutÓs pl. 83 |       Šilutės pl. 83 |
|         B×kÑiÖ g. 11 |         Būkčių g. 11 |
|          Seni×kÖ km. |          Seniūkų km. | 
```

# sql - SQL 查询添加计算的临时列

> ID：14833564
> 
> 赞同：1
> 
> 时间：2013-02-12T13:22:45.597
> 
> 标签：sql

我在查询（`date`和`total`）中返回两列。

例如

```
date1, 11231

date2, 11239

date3, 11341 
```

我想知道是否可以在查询中创建另一列来显示与上一个总数的差异？

我根本无法更改 sql 表的结构，这是否最适合视图？

谢谢你的帮助。

问候

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:03:24.677

In SQL Server 2012 you could use [LAST_VALUE over partitions](http://msdn.microsoft.com/en-us/library/hh231517.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:38:46.433

Use LAG() Analytic function if available in your version of SQL-you did not specify. There is also LEAD() function available...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:48:59.560

我正在尝试一些东西，也许会有所帮助：

**表创建**

```
create table Demo (TotalDate date, Total int);

insert into Demo(TotalDate, Total) 
values ('2012-01-01', 11000);

insert into Demo(TotalDate, Total) 
values ('2012-02-02', 12000);

insert into Demo(TotalDate, Total) 
values ('2012-03-03', 14000); 
```

**选择查询**

```
SELECT
  TotalDate ,
  Total,
  (SELECT TOP 1 d.Total - d1.Total 
     FROM Demo d1 WHERE d1.TotalDate < d.TotalDate ORDER BY d.TotalDate ASC) AS SubTotal
FROM
  Demo d 
```

# ms-access - 访问 Visual Basic 代码以连接多个字段（文本和数字在一起）

> ID：14833565
> 
> 赞同：1
> 
> 时间：2013-02-12T13:22:49.397
> 
> 标签：ms-access

我的任务是创建一个 Microsoft Access 数据库来存储客户反馈并在记录负面反馈时生成可打印的报告。

在用户可以记录反馈详细信息的反馈表单上，我正在尝试开发代码来连接从反馈表（表单的记录源设置为）中获取的字段。我的目标是开发一个唯一编号，该编号由反馈表中的以下字段组成：

*   公司名称（这实际上是反馈表中的一个查找字段，它在公司表中查找公司名称，因此是表单上的一个组合框 - 显示为表单上的下拉菜单）
*   产品名称
*   周数的 2 位数字
*   2 位数的月份
*   年份的 2 位数字（这三个日期项是从反馈表中称为反馈日期的字段中提取的）。
*   一个从 1 开始递增的序列号，因此如果同一公司在同一产品上记录另一条反馈，则该编号将更改为 2，依此类推。

基本上，我要复制的示例如下所示： Company Name_Product Name_0712131

这些连接字段的输出将存储在反馈表中名为 CF# 的另一个字段中。

我应该编写什么样的代码，以便将我想要连接的信息保存到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:04:47.063

添加记录有许多不同的方法（CurrentDB.Execute({SQL code})、ADO 命令、DAO 命令、DoCmd.OpenQuery），但我怀疑您想知道如何创建要添加的表达式：

```
Dim strCustomerRef As String

'Add the Company Name (assumes the name is in the second column)
strCustomerRef = Me.cboYourComboBox.Column(1)

'Add the Product Name (assumes you have a text box bound to the product)
strCustomerRef = strCustomerRef & "_" & Me.txtTheProductNameTextBox

'Add the date info (assumes you have a text box bound to the date)
strCustomerRef = strCustomerRef & "_" & Format(Me.txtFeedbackDate, "wwmmyy")

'Add the sequence number
strCustomerRef = strCustomerRef & "_" & DCount("CustomerRef", "CF#", "[CustomerRef] Like '" & strCustomerRef & "*'") + 1

'Code to append record here
CurrentDB.Execute "INSERT INTO [CF#] ([CustomerRef], [MoreData]) VALUES ('" & strCustomerRef & "', '" & Me.txtMoreData & "') 
```

# php - 如何读取从 php 中的 PDF 文件转换而来的 XML 文件？

> ID：14833568
> 
> 赞同：0
> 
> 时间：2013-02-12T13:22:59.233
> 
> 标签：php

我正在做 php 代码来读取从 pdf 文件生成的 xml 文件...但是我无法获取节点，这是我使用过的代码...

```
$xml = simplexml_load_file("sample.xml"); 
echo $xml->getName();
echo $xml->children(); 
```

我想得到 $xml->children() 的任何值，这里缺少什么...

# javascript - Jquery将选定的类添加到li

> ID：14833570
> 
> 赞同：4
> 
> 时间：2013-02-12T13:23:05.727
> 
> 标签：javascript, jquery, html

嗨，我有以下`ul li`显示类别名称：

```
<ul>
<li class="selected" data-tab-id="0"></li>
<li data-tab-id="12">...</li>
<li data-tab-id="3">...</li>
<li data-tab-id="15">...</li>
<li data-tab-id="7">...</li>
</ul> 
```

javascript脚本如下：

```
<script type="text/javascript">
var cat_id = '<?=$this->catid?>'

$(document).ready(function () {

});
</script> 
```

目前，索引处的页面`li data-tab-id="0"`将首先被选中，也`var cat_id`将不返回任何内容。现在，当用户导航到另一个选项卡时，例如`data-tab-id="12"`，`var cat_id`将返回值 12，我如何删除从默认 li 中选择的类并将其替换为`data-tab-id="12"`. 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:31:34.567

假设`list`为 UL 的 ID——只是为了避免在页面周围有多个 UL 时出现问题：

```
$("ul#list")
    .find(".selected").removeClass("selected")
    .end()
    .find("[data-tab-id=" + cat_id + "]").addClass("selected"); 
```

当然，你也可以在两个 jQuery 调用中做到这一点：

```
$("ul#list .selected").removeClass("selected");
$("ul#list [data-tab-id=" + cat_id + "]").addClass("selected"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:29:18.137

使用`addClass()`和`removeClass()`分别添加和删除类。尝试这个

**更新**

```
var cat_id = '<?=$this->catid?>';
$('li').removeClass('selected'); 
 $('li').each(function(){
   if($(this).attr('data-tab-id')==cat_id){
    $(this).addClass('selected'); 
  }
}) 
```

**不使用循环更新** ..

```
var cat_id = '<?=$this->catid?>';
$('li').removeClass('selected');
$('li[data-tab-id='+cat_id+']').addClass('selected'); 
```

[在这里摆弄](http://jsfiddle.net/bipen/LnB73/)

[更新的小提琴](http://jsfiddle.net/bipen/LnB73/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:26:20.487

使用此示例

```
$('ul li').click(function() {
    $('ul li.selected').removeClass('selected');
    $(this).closest('li').addClass('selected');
}) 
```

# php - 正则表达式看过去的字符

> ID：14833574
> 
> 赞同：0
> 
> 时间：2013-02-12T13:23:13.893
> 
> 标签：php, regex

我正在尝试匹配 fx。这个字符串

“dfsdfsdf 100.200,00”

这就是我得到的

```
[0-9\.]+ 
```

那返回

```
100.200 
```

反正有 REGEX 我可以看看粘贴点。所以我会得到：

```
100200 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:30:02.383

怎么样：

```
$str = 'dfsdfsdf 100.200,00';
preg_match('/(\d+)\.(\d+)/', $str, $m);
$res = $m[1] . $m[2];
echo $res,"\n"; 
```

**输出：**

```
100200 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:31:30.877

那这个呢：

```
preg_replace("/^.*?(\d+)\.(\d+).*?$/", '$1$2', "dfsdfsdf 100.200,00"); 
```

它将用匹配的数字替换整个字符串

[phpfiddle](http://phpfiddle.org/lite/code/tx8-uck)中的工作示例

# mercurial - Mercurial 书签 - 用于开发和稳定版本

> ID：14833575
> 
> 赞同：0
> 
> 时间：2013-02-12T13:23:22.253
> 
> 标签：mercurial, branch, bookmarks, branching-and-merging

这不是另一个什么是书签/什么是分支的问题——我已经阅读了所有这些帖子，现在想澄清一些关于正确使用的事情。

我正在开发一个网站。我想要一个稳定版和一个开发版。

所以我创建了两个书签“稳定”和“发展”。

如果我想创建一个新功能，我会更新到开发书签，然后创建我的功能。

如果我想更正错字，我会直接在稳定版本中进行。

我的困惑如下。我在 bitbucket 有一个中央存储库。

如果我使用 hg push 我的书签数据不会被传递。如果我分别进行 hg push -B stable 或 hg push -B development，则推送我的书签数据。

然后我有两台服务器，一个测试服务器和一个实时服务器。如果我 ssh 到服务器并从 bitbucket 执行 hg pull，因为服务器上不存在书签，则拉出什么，然后当我使用 hg update 时工作副本更新到什么？

我想要的正确用法如下。带有我的两个书签“稳定”和“开发”的本地存储库。我根据需要在两者之间切换并使用 hg push -B 书签名称将它们推送到 bitbucket。然后我分别登录到我的测试/实时服务器并提取正确的书签版本。

一旦我测试了我的开发书签，我就可以将它与我的稳定书签合并并将其拉到实时服务器上。

我担心，因此我的问题是如果我在拉到实时服务器时不小心忘记指定书签会发生什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:45:10.567

# 拉

从 Mercurial 2.3 开始，[pull 也会获取远程存储库的书签](http://mercurial.aragost.com/kick-start/en/bookmarks/#working-with-a-published-bookmark)。以前，您必须指定`-B <bookmark>`获取书签和变更集。因此，您的服务器存储库在拉取后将具有正确的书签。

如果您使用的是早期版本，则还必须`pull -B <bookmark>`获取书签。当然，如果您不想将所有`development`变更集拉到您的实时服务器上，您无论如何都可以这样做。

# 更新

不带参数使用`hg update`会得到你`tip`，它总是添加到存储库的最后一个变更集，无论是`stable`，`development`还是意外取消书签（实际上，它会让你得到添加到当前分支的最后一个变更集，但听起来像你'不使用命名分支）。为了在更新时获得一致的结果，我建议您明确说明您希望每个服务器存储库更新到哪个书签。如果您担心忘记指定，请使用脚本自动执行更新过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T17:10:16.010

恕我直言，正确的用法是使用命名分支而不是书签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:32:47.570

我将书签视为本地标签，仅此而已。因此，如果我想推送标记信息，那么我会使用实际标记来标记稳定版本。每次发布时，我都会将其标记为“rel-2.4”。

然后在现场我可以更新到最新版本并且知道那是最后一个好的版本。我的“开发”只是默认分支的负责人，我不断向其中添加新的开发内容。这样，您只需推送即可，而不必担心书签。

这可能不是您想要的或您设想的，但它是您描述的情况的可行解决方案。

如果我们需要修复（您的示例中的错字），我可以更新到上一个版本，更正类型，测试，如果满意，将其标记为下一个版本（rel-2.41）。将该新分支合并回默认分支，以便我的开发分支也有修复。跳转到实时服务器并拉取/更新到 rel-2.41

这对你有好处吗？

# c - 如何在 ANSI C 中正确锁定文件

> ID：14833576
> 
> 赞同：-2
> 
> 时间：2013-02-12T13:23:24.123
> 
> 标签：c, file, locking

我正在编写一个 ANSI C cgi-bin 服务器程序。每个程序实例可以同时访问相同的文件。我这样做：

```
handle = fopen(name,type);
fd = fileno(handle);
MyLockFile(fd)  //I use fcntl
..... 
```

问题是我用“fopen”打开文件，而不是用“open”。“锁定”会以这种方式工作吗？我可以锁定“fd”，而不是“句柄”。

原因是我无法编写可行的“fd=open...”代码。我下面的代码创建了可执行文件，没有设置写权限。我不知道为什么

```
fd = open(name,O_CREAT|O_WRONLY|S_IREAD|S_IWRITE|S_IRGRP|
     S_IWGRP|S_IROTH|S_IWOTH);
write(fd,data,strlen(data));
close(fd); 
```

我既不能写入也不能附加到这个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:37:32.183

您的 open() 函数错误，当您指定 O_CREAT 时，权限位需要是 3\. 参数，例如

```
 open(name,O_CREAT|O_WRONLY, 
      S_IREAD|S_IWRITE|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH); 
```

# postgresql - 使用 UNION ALL 从多个表中获取行或在生产中使用一个表？

> ID：14833577
> 
> 赞同：2
> 
> 时间：2013-02-12T13:23:26.217
> 
> 标签：postgresql, database-design, relational-database, rdbms

我知道对于像 Postgresql 这样的关系数据库，使用分隔表会更有效，但我担心性能问题，因为执行次数最多的查询将使用`UNION ALL`.

我必须选择处理这个问题。第一个是：

```
table1 -> column1, column2
table2 -> column1, column2
table3 -> column1, column2, column3 
```

在这个解决方案中，我必须在生产中使用 3 个不同的查询合并，`UNION ALL`这个查询将由登录系统的用户执行（系统中执行次数最多的查询）

另一个是：

```
table -> column1, column2, typeColumn, extraColumnForTable3 
```

在这个解决方案中，我必须创建一个额外的列`typeColumn`来区分该行是哪种类型。而且我还必须`extraColumnForTable3`为该类型创建一个列，并且类型`table3`为 NULL 。在此解决方案中，执行次数最多的查询将仅包含一条语句。`table2``table1``SELECT`

生产中将有数百万行，所以我担心性能。`NULL`值可能会在数据库中占用额外的空间，但我认为它可以忽略不计。我将使用部分索引来消除 NULL 值，因此我认为它不会影响获取特定类型的其他查询。您认为哪一种在生产中更有效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:13:40.797

一般来说，我发现大量使用`UNION`表明数据库设计不好。在某些情况下，`UNION`它们`UNION ALL`是有意义的，但在递归公用表表达式之外它们应该是相对少见的。

PostgreSQL 提供了相当多的选项来保持单个表的性能可管理，并且正如您所指出的，部分索引是管理此问题的非常好的方法。

分解表以使此类`UNION`语句很常见的主要问题是它使主键和外键管理非常成问题。一般来说，首先确保您的数据结构清晰且易于管理，然后再考虑优化，这几乎总是比担心优化然后尝试使优化后的解决方案易于管理要好得多。

# android - 为android应用程序创建数据库

> ID：14833580
> 
> 赞同：0
> 
> 时间：2013-02-12T13:23:38.707
> 
> 标签：android, database

我正在开发一个 android 应用程序，它可以帮助公众获取有关孟买公交路线的信息。

我面临一个问题，我应该如何创建数据库（设计），以便当用户输入源站和目的地站时，它应该返回该路线的相应巴士号码。大约有 2000 个巴士站和 750 辆巴士运行，......

我有.csv文件中的所有数据..就像每辆公共汽车的整个路线一样..但我仍然对我应该如何去做感到困惑......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:00:09.040

你可以有喜欢

```
 Bus_details:
   bus_id
   other_bus _details
   .....
 station_details:
    station_id
    station
    ....
 route_details:
   route_id 
   route (stationid1,stationid2,...,stationidn) //separated by character

 schedule_details:
   Bus_id
   route_id
   day
   month
   time 
```

你也可以有车站和时间之间的距离

# jquery - 展开类似于 google 搜索图像布局的内容？

> ID：14833587
> 
> 赞同：2
> 
> 时间：2013-02-12T13:23:56.010
> 
> 标签：jquery, image, wordpress

在我的 wordpress 博客中，这些帖子仅使用每个帖子的特征图像（作为图像网格或墙）显示。布局与谷歌搜索图像非常相似。

单击后，它会转到帖子本身，在其单个页面中显示内容。

有人可以告诉我如何像新的谷歌搜索图像那样扩展内容吗？

在简历中，内容如何出现在图像下方（并根据滚动页面）并带有 X 以关闭该新 div？

我了解必须完成的 ajax 调用，但我对如何在 jquery 中实现它有点迷茫。

我想它必须遵循以下步骤：

1）一旦单击图像，“墙”就会滚动到顶部并关闭可能打开的其他内容 div 2）它会在下面打开一个新 div 3）ajax 调用帖子内容并放入这个新 div

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T11:51:37.143

这可以使用 css 和 jquery 来完成。解释整个过程有点困难，但给你一个想法。使用 css 选择器正确定位新的 div。并使用 ajax 加载内容。

# php - 使用 $_GET 数据自动填充插入表单

> ID：14833590
> 
> 赞同：0
> 
> 时间：2013-02-12T13:24:01.970
> 
> 标签：php, html, cakephp-1.2

我有一个搜索表单，用户可以在其中插入一个或多个作者的姓名。
我有这个代码：

```
Author<br /><input type="text" name="autore" value=<?php echo $_GET['autore'] ?> ><br/> 
```

自动填写下一页上的作者字段。

我的问题是，如果用户写例如：

```
san, gli, tro 
```

在 Author 字段中，我只会得到 'san,' ，而我想要 'san, gli, tro' 。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:27:02.040

如果你这样做会发生什么：

```
Author<br /><input type="text" name="autore" value="<?php echo $_GET['autore'] ?>" ><br/> 
```

*（注意value*属性周围的引号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:33:34.057

您需要在 php.ini 的值周围加上引号。像这样：

```
Author<br /><input type="text" name="autore" value="<?php echo $_GET['autore'] ?>" ><br/> 
```

在您的情况下，最终的 html 将是

```
Author<br /><input type="text" name="autore" value=san gli tro ><br/> 
```

所以属性的值`value`是`san`，另一个是空的属性名称。

加上引号，最终的 html 将是

```
Author<br /><input type="text" name="autore" value="san, gli, tro" ><br/> 
```

这就是你需要的。

# c# - 从数据库表中选择一个字段

> ID：14833591
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:24:04.840
> 
> 标签：c#, asp.net-mvc-4

我正在使用 MVC4。

我创建了一个 LINQ 语句来检查数据库表中是否存在 2 个输入值，即登录名和 Skype 名称。

现在我想从数据库中提取第三个字段并将其显示在屏幕上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:59:18.613

如果你给我们代码你尝试过的东西会让我们更好地理解。据我了解，您可以使用此示例并根据您的需要进行更改。

```
var field = from item  in db.xyz
            where item.firstfields == firstinputfields &&  item.secondfields == secondinputfields
 select item.thirdfields; 
```

# java - 我无法从 java 发送电子邮件

> ID：14833593
> 
> 赞同：0
> 
> 时间：2013-02-12T13:24:07.513
> 
> 标签：java, email, gmail

我正在使用如下代码中的代码用户名用户名用户名和密码给出了我要发送邮件的邮件密码

```
Properties props = System.getProperties(); 
props.put("mail.smtp.starttls.enable", "true"); 
props.put("mail.smtp.host", host); 
props.setProperty("mail.transport.protocol", "smtps");
props.put("mail.smtp.user", userid); 
props.put("mail.smtp.password", password); 
props.put("mail.smtp.port", "465"); 
props.put("mail.smtps.auth", "true"); 
Session session = Session.getDefaultInstance(props, null); 
MimeMessage message = new MimeMessage(session); 
InternetAddress fromAddress = null;
InternetAddress toAddress = null;

try {
fromAddress = new InternetAddress(from);
toAddress = new InternetAddress(to);
} catch (AddressException e) {

e.printStackTrace();
}

message.setFrom(fromAddress);
message.setRecipient(RecipientType.TO, toAddress);
message.setSubject(subject);
message.setText(text); 

//SMTPSSLTransport transport =(SMTPSSLTransport)session.getTransport("smtps");

Transport transport = session.getTransport("smtps"); 
transport.connect(host, userid, password); 
transport.sendMessage(message, message.getAllRecipients()); 
transport.close(); 
```

但它给了我这样的错误

```
 javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 465;
  nested exception is:
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1972)
at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:642) 
```

任何人都可以建议我的代码有什么问题.....提前谢谢你.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:36:01.017

```
Properties props = new Properties();
            props.put("mail.smtp.auth", "true");
            props.put("mail.smtp.starttls.enable", "true");
            props.put("mail.smtp.host", "smtp.gmail.com");
            props.put("mail.smtp.port", "587"); 
```

这是我用来使用 gmail 帐户成功发送电子邮件的属性设置。然后，您可以使用以下方法创建会话：

```
Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(emailAddress, password);
                }
              }); 
```

这是一种略有不同的方法，但它在我使用的代码中有效。

# angularjs - 监听 $scope 上的多个事件

> ID：14833597
> 
> 赞同：21
> 
> 时间：2013-02-12T13:24:30.400
> 
> 标签：angularjs, angularjs-directive

我有一个指令将一些函数绑定到本地范围`$scope.$on`。

是否可以在一次调用中将相同的函数绑定到多个事件？

理想情况下，我可以做这样的事情：

```
app.directive('multipleSadness', function() {
    return {
        restrict: 'C',
        link: function(scope, elem, attrs) {
            scope.$on('event:auth-loginRequired event:auth-loginSuccessful', function() {
                console.log('The Ferrari is to a Mini what AngularJS is to ... other JavaScript frameworks');
            });
        }
    };
}); 
```

但这不起作用。用逗号分隔的事件名称字符串替换为的相同示例`['event:auth-loginRequired', 'event:auth-loginConfirmed']`也不起作用。

什么工作是这样的：

```
app.directive('multipleSadness', function() {
    return {
        restrict: 'C',
        link: function(scope, elem, attrs) {

            scope.$on('event:auth-loginRequired', function() {
                console.log('The Ferrari is to a Mini what AngularJS is to ... other JavaScript frameworks');
            });
            scope.$on('event:auth-loginConfirmed', function() {
                console.log('The Ferrari is to a Mini what AngularJS is to ... other JavaScript frameworks');
            });
        }
    };
}); 
```

但这并不理想。

是否可以一次将多个事件绑定到同一个函数？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-12T16:15:15.173

**其他答案（Anders Ekdahl）是 100% 正确的......选择其中一个......但是......**

除此之外，你总是可以自己动手：

```
// a hack to extend the $rootScope 
app.run(function($rootScope) {
   $rootScope.$onMany = function(events, fn) {
      for(var i = 0; i < events.length; i++) {
         this.$on(events[i], fn);
      }
   }
});

app.directive('multipleSadness', function() {
    return {
        restrict: 'C',
        link: function(scope, elem, attrs) {
            scope.$onMany(['event:auth-loginRequired', 'event:auth-loginSuccessful'], function() {
                console.log('The Ferrari is to a Mini what AngularJS is to ... other JavaScript frameworks');
            });
        }
    };
}); 
```

我想如果你真的想这样做，`.split(',')`你可以，但这是一个实现细节。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-12T14:16:13.550

AngularJS 不支持多事件绑定，但你可以这样做：

```
var handler = function () { ... }
angular.forEach("event:auth-loginRequired event:auth-loginConfirmed".split(" "), function (event) {
    scope.$on(event, handler);
}); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-12T14:17:14.193

是的。像这样：

```
app.directive('multipleSadness', function() {
    return {
        restrict: 'C',
        link: function(scope, elem, attrs) {

            function sameFunction(eventId) {
                console.log('Event: ' + eventId + '. The Ferrari is to a Mini what AngularJS is to ... other JavaScript frameworks.');
            }

            scope.$on('event:auth-loginRequired', function() {sameFunction('auth-loginRequired');});
            scope.$on('event:auth-loginConfirmed', function () {sameFunction('auth-loginConfirmed');});
        }
    };
}); 
```

但仅仅因为你可以，并不意味着你应该:)。如果事件继续传播到另一个侦听器并且在那里以不同的方式处理它们，那么也许有这样做的理由。如果这将是唯一的侦听器，那么您应该只发出（或广播）相同的事件。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-12T13:47:01.580

我认为这是不可能的，因为事件可能会将数据发送到回调，并且如果您侦听多个事件，您将不知道哪些数据来自哪个事件。

我会做这样的事情：

```
function listener() {
    console.log('event fired');
}
scope.$on('event:auth-loginRequired', listener);
scope.$on('event:auth-loginConfirmed', listener); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-07T19:51:46.123

也与 $rootScope.$onMany （来自@ben-lesh 的解决方案）一样，可以扩展 $on 方法：

```
var $onOrigin = $rootScope.$on;

$rootScope.$on = function(names, listener) {
  var self = this;

  if (!angular.isArray(names)) {
    names = [names];
  }

  names.forEach(function(name) {
    $onOrigin.call(self, name, listener);
  });

}; 
```

取自[这里](http://stepansuvorov.com/blog/2015/06/angular-scope-on-listen-to-several-events/)。

# javascript - 在 Ruby on Rails 中淡出新闻代码。示例代码有问题

> ID：14833602
> 
> 赞同：0
> 
> 时间：2013-02-12T13:24:42.753
> 
> 标签：javascript, ruby-on-rails, ruby

我想做一个淡出的新闻行情。代码似乎没问题，但它不起作用。现在我已经将样式和脚本放在 html.erb 中（它是一个 ruby​​ on rails 部分）

```
<ol>
 <li class="divider">Company Pulse</li>
</ol>
  <ol id="scrollable" style="height:90px; overflow:hidden;">
    <% @tweets.each do |tweet| %>
       <li>
          <%= link_to "
            <div id=\"twitter_presence\" style=\"vertical-align: middle;\">
            <img src=\"#{tweet.user.profile_image_url}\" style=\"vertical-align:middle;\"/>
            <span style=\"vertical-align: middle;\">#{tweet.user.name}</span>
           </div>
            <span id=\"twitter_text\">
            <h3 style=\"text-align: center\">\" #{tweet.text} \"</h3>
            <h3 style=\"text-align:right\">#{tweet.created_at}</h3>
            </span>
          ".html_safe, 'employees/twitter' %>
      </li>
    <% end %>
  </ol>

<script type="text/javascript">
 var aniSpd01 = 1000;
 var fadeSpd01 = 1000;

 $(function()
 {
    var startIndex = 0;
    var endIndex = $('#scrollable li').length;
    $('#scrollable li:first').fadeIn(fadeSpd01);

    window.setInterval(function()
    {
        $('#scrollable li:eq(' + startIndex + ')').delay(fadeSpd01).fadeOut(fadeSpd01);
        startIndex++;
        $('#scrollable li:eq(' + startIndex + ')').fadeIn(fadeSpd01);

        if (endIndex == startIndex) startIndex = 0;
     }, aniSpd01);
 });
</script> 
```

可能出了什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:34:41.477

抱歉，我推出了自己的 js。你能试试这个吗？

```
var fadeOutSpeed = 1000,
    transitionSpeed = 1000,
    idx = 0;

function showNews() {
  $('#scrollable li').fadeOut(fadeOutSpeed, function() {
    $('#scrollable li:eql(' + idx + ')').fadeIn();
  });

  idx += 1;
  if (idx == $('#scrollable li').length) idx = 0;
  setTimeout('showNews()', transitionSpeed); 
}

function() { showNews() } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:48:34.160

好的。这里有几件事不对劲。这个ticker脚本需要jQuery，重要的是应用程序中的所有javascripts都按顺序加载，通过./app/assets/javascripts/application.js

首先要做的是将脚本放在 ./app/assets/javascripts 的单独文件中，我将文件命名为 scroll.js

接下来，转到 application.js 并添加一行：

```
//= require scroll 
```

它应该放在 require 列表的末尾，在 jquery 之后，一个 jvnill 建议。之后，确保视图中的类被相应地命名。如果此时该函数不起作用，请为其命名并添加一行：

```
name(); 
```

在 scroll.js 文件的末尾。（其中 name 是函数的名称）

# gwt - 设置要在 GWT MVP 中查看的数据

> ID：14833603
> 
> 赞同：0
> 
> 时间：2013-02-12T13:24:43.457
> 
> 标签：gwt, gwt-mvp

我有一个遵循 MVP 模式的 GWT 应用程序。

我们有多个视图来在 UI 上显示数据。

我们将数据设置为通过 Activity 查看。像这样的东西

```
 public class SomeActivityImpl extends AbstractActivity implements SomeView.Presenter {

       public SomeActivityImpl{
            //some initialization goes here.
       }       

 public void start(AcceptsOneWidget containerWidget, EventBus eventBus) {
          //presenter is set here
          loadDetails();
 }

 private void loadDetails(){
        SomeRequestFactory.context().findSomeEntity().fire(new Receiver<SomeProxy>() {

        @Override
        public void onSuccess(SomeProxy proxyObject) {

          someView.setName("name");
          someview.setSurname("surname");
          someview.setMothersName("mothers name");
        }

 )
 } 
```

现在我的问题是如何确保 View 的所有设置器都已设置并且没有遗漏任何内容？

是否有任何特定于 GWT 的解决方案，或者有人可以提出设计模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-30T07:59:11.837

您应该使用编辑器框架。它有一个 Request Factory 驱动程序来帮助您将它与 request Factory 一起使用。[这是一个很好的教程](http://www.gwtproject.org/doc/latest/DevGuideUiEditors.html)

如果您不喜欢该教程，请考虑查看 GWT 的实际应用

# xml - Eclipse - XML 模式定义

> ID：14833604
> 
> 赞同：2
> 
> 时间：2013-02-12T13:24:44.897
> 
> 标签：xml, eclipse

查看[http://www.eclipse.org/modeling/mdt/?project=xsd#xsd](http://www.eclipse.org/modeling/mdt/?project=xsd#xsd)。我们有文字：

“XML Schema Definition 是一个参考库，它提供了一个 API，用于检查、创建或修改 W3C XML Schema（独立或作为其他工件的一部分，例如 XForms 或 WSDL 文档）的任何代码。”

由此，我了解到我可以编写一个使用“XML Schema Definition”API 来创建 XML 文件的 java 类，并且这个创建的 XML 文件是我可以将其输入到 EMF 等工具中的文件。假设我的理解是正确的（如果不是，请告诉我怎么做），我该去哪里找到这样一个 java 类的“hello world”类型的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:10:18.297

XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
     xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
     jxb:version="2.0">

  <xsd:element name="Greetings" type="GreetingListType"/>
  <xsd:complexType name="GreetingListType">
     <xsd:sequence>
       <xsd:element name="Greeting" type="GreetingType"
             maxOccurs="unbounded"/>
     </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="GreetingType">
    <xsd:sequence>
      <xsd:element name="Text" type="xsd:string"/>
    </xsd:sequence>
    <xsd:attribute name="language" type="xsd:language"/>
  </xsd:complexType>

</xsd:schema> 
```

Java类：

```
import java.util.*;
import javax.xml.bind.*;
import hello.*;

public class Hello {

private ObjectFactory of;
private GreetingListType grList;

public Hello(){
    of = new ObjectFactory();
    grList = of.createGreetingListType();
}

public void make( String t, String l ){
    GreetingType g = of.createGreetingType();
    g.setText( t );
    g.setLanguage( l );
    grList.getGreeting().add( g );
}

public void marshal() {
    try {
        JAXBElement<GreetingListType> gl =
            of.createGreetings( grList );
        JAXBContext jc = JAXBContext.newInstance( "hello" );
        Marshaller m = jc.createMarshaller();
        m.marshal( gl, System.out );
    } catch( JAXBException jbe ){
        // ...
    }
} 
```

}

例子：

```
Hello h = new Hello();
h.make( "Bonjour, madame", "fr" ); 
h.make( "Hey, you", "en" ); 
h.marshal(); 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Greetings>
<Greeting language="fr">
<Text>Bonjour, madame</Text>
</Greeting>
<Greeting language="en">
<Text>Hey, you</Text> 
```

# java - 在 JTable 中显示列表的下一行

> ID：14833607
> 
> 赞同：0
> 
> 时间：2013-02-12T13:24:54.383
> 
> 标签：java, swing, list, user-interface, jtable

我将尝试尽可能彻底地解释我正在尝试做的事情，因为我是 UI 的新手。我有一个字符串列表，我们称之为 user_decide，它包含不同数量的元素。例如

```
1st Row [192, 495, 393, 399]
2nd Row [384, 493, 945, 559, 485] 
```

这些数字代表一些数组的索引，例如

```
Name[192] = "John", Name[495] = "Mary" 
Surname[192] = "Pap", Surname[495] = "Black" 
```

我正在尝试制作一个具有上一个和下一个按钮以及一个 JTable 的 UI。

第一次，我的 UI 会显示

```
1st Column 2nd Column 3rd Column 4th Column 5th Column
Name       John       Mary       etc..
Surname    Pap        Black 
```

当我按下 Next 时，它将显示下一行：

```
1st Column 2nd Column    3rd Column    4th Column    5th Column 6th Column
Name       Name[384]     Name[493]     Name[945]     etc... 
Surname    Surname[384]  Surname[493]  Surname[945] 
```

到目前为止，我所做的是一个包含许多 JTable 的框架。

```
JPanel panel = new JPanel();
int cols = 0;
Iterator<String> iterator = user_decide.iterator();
while (iterator.hasNext())
    {
        String con = iterator.next();
        con = con.replaceAll("\\s", "").replaceAll("\\[", "").replaceAll("\\]", "");
        String conv [] = con.split("\\,");
        // It can be used for the "for-statement"
        cols = conv.length;

        List<String> column = new ArrayList<String>();
        // Giving the name of the columns
        for(int i = 0; i < cols + 1; i ++)
        {
            if (i == 0) column.add("");
            else column.add("Column #" + i);    
        }
        // Setting the jtable with a specific number of columns
        String[] column_names = column.toArray(new String[column.size()]);
        tableModel = new DefaultTableModel( 17, cols);
        tableModel.setColumnIdentifiers(column_names);
            JTable table = new JTable(tableModel);
            // HERE I AM GOING TO PLACE MY DATA AFTERWARDS
            SetData(table, "Name",0,0);
            SetData(table, "Surname",1,0);

                panel.add(new JScrollPane(table,
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS));
                }
    JFrame frame = new JFrame("Results");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBounds(200, 200, 600, 400);
    frame.add(new JScrollPane(panel,
            JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
            JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS));

    frame.add(panel, BorderLayout.CENTER);
    frame.setVisible(true);
}

public void SetData(JTable table, Object obj, int row_index, int col_index){
      table.getModel().setValueAt(obj,row_index,col_index);
      } 
```

当我尝试使用将所有数据存储在一行中的表时，我有这个下一个按钮。

```
JPanel navigation = new JPanel(
new FlowLayout(FlowLayout.CENTER));
JButton next = new JButton("NEXT");
next.addActionListener( new ActionListener(){
        public void actionPerformed(ActionEvent ae) {
        int height = table.getRowHeight()*(rows-1);
        JScrollBar bar = scrollPane.getVerticalScrollBar();
        bar.setValue( bar.getValue()+height );
        }
} ); 
```

我将不胜感激任何帮助。非常感谢您阅读本文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:02:45.783

```
public class SwitchTableModel extends AbstractTableModel {
    private final String [] name = new String [] {"Alice", "Bob", "John", "Mary"};
    private final String [] surname = new String [] {"Green", "Red", "Brown", "Grey"};

    private final int [][] data = new int [][] {
        new int [] {1, 3, 2},
        new int [] {0, 2, 1, 3},
        new int [] {0, 3},
        new int [] {0, 1, 2, 3}
    };

    private int position = 0;

    @Override
    public int getRowCount() {
        return 2;
    }

    @Override
    public int getColumnCount() {
        return data [position].length + 1;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        switch (rowIndex)
        {
        case 0:
            return columnIndex == 0 ? "Name" : name [data [position][columnIndex - 1]];
        case 1:
            return columnIndex == 0 ? "Surname" : surname [data [position][columnIndex - 1]];
        default:
            throw new Error ();
        }
    }

    public void previous ()
    {
        position -= 1;
        if (position < 0) position = data.length - 1;

        fireTableStructureChanged();
    }

    public void next ()
    {
        position += 1;
        if (position >= data.length) position = 0;

        fireTableStructureChanged();
    }

    public static void main(String[] args) {
        final SwitchTableModel model = new SwitchTableModel();

        Box toolbar = Box.createHorizontalBox();
        toolbar.add (new JButton (new AbstractAction("Previous") {
            @Override
            public void actionPerformed(ActionEvent e) {
                model.previous ();
            }
        }));
        toolbar.add (Box.createHorizontalGlue());
        toolbar.add (new JButton (new AbstractAction("Next") {

            @Override
            public void actionPerformed(ActionEvent e) {
                model.next ();
            }
        }));

        JTable table = new JTable(model);

        JFrame frame = new JFrame ();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(new BorderLayout());
        frame.getContentPane().add (toolbar, BorderLayout.NORTH);
        frame.getContentPane().add (
            new JScrollPane(
                table, 
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, 
                JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED),    
            BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# sockets - 为套接字编程捕获 Web 音频 API 数据

> ID：14833609
> 
> 赞同：1
> 
> 时间：2013-02-12T13:24:57.850
> 
> 标签：sockets, udp, webrtc, web-audio-api

我正在制作一个使用 C# 套接字编程来传输数据的视频聊天 Web 应用程序。我想使用 Web Audio API 在我的视图页面中捕获音频和视频，但我不知道如何使用套接字（在控制器类中定义）传输音频。如果我可以捕获，API 可以用于套接字编程吗API 的原始数据？

（我也尝试过使用 WEB RTC，但我无法创建多个对等连接。由于我的应用程序涉及多个对等点，我更喜欢普通的套接字编程。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:38:01.323

如果您的意思是，您是否可以从 getUserMedia 访问原始音频/视频位 - 是的，您可以。（对于音频，请查看 webaudiodemos.appspot.com 上的任何输入演示 - 特别是 AudioRecorder 显示了如何从 ScriptProcessor 节点获取位。）但我要提醒的是，通过网络流式传输音频和视频并非易事。您实际上不能只是将比特推过线路而不考虑缓冲（或自适应功能，除非您只能保证高速本地网络）。

# c# - 节点类型 EndElement 不支持 ReadElementContentAsString 方法

> ID：14833610
> 
> 赞同：1
> 
> 时间：2013-02-12T13:25:01.020
> 
> 标签：c#, xml, winforms

我正在尝试使用 XmlTextReader 类读取 xml 文件，我的 xml 文件是

```
<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<AppXmlLogWritter>
<LogData><LogID>999992013021213232800001</LogID><LogDateTime>20130212132328</LogDateTime><LogType>Message</LogType><LogFlag>Flag</LogFlag><LogApplication>Application</LogApplication><LogModule>Module</LogModule><LogLocation>Location</LogLocation><LogText>Text</LogText><LogStackTrace>Stacktrace</LogStackTrace></LogData>
</AppXmlLogWritter> 
```

使用以下代码

```
FileStream fileStream = File.Open(txtBrowseFilePath.Text, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);
             using (XmlTextReader objXmlReader = new XmlTextReader(fileStream))
{
                IEnumerable<LogData> data = LogData.GetLogData(objXmlReader);

                using(var item = data.GetEnumerator())
                {
                    while (item.MoveNext())
                    {
                        DataRow dataRow;
                        dataRow = dataTable.NewRow();

                        dataRow[0] = item.Current.LogID;
                        dataRow[1] = item.Current.LogDateTime;
                        dataRow[2] = item.Current.LogType;
                        dataRow[3] = item.Current.LogFlag;
                        dataRow[4] = item.Current.LogApplication;
                        dataRow[5] = item.Current.LogModule;
                        dataRow[6] = item.Current.LogLocation;
                        dataRow[7] = item.Current.LogText;
                        dataRow[8] = item.Current.LogStackTrace;

                        dataTable.Rows.Add(dataRow);
                    }
                }}
public static IEnumerable<LogData> GetLogData(XmlTextReader objXmlReader)
        {
            LogData objLogData = null;
            IXmlLineInfo xmlInfo = (IXmlLineInfo)objXmlReader;
            while(objXmlReader.Read())
            {

                if(objXmlReader.IsStartElement("LogData"))
                {
                    objLogData = new LogData();
                }
                if(objXmlReader.Name == "LogData" && objXmlReader.NodeType == XmlNodeType.EndElement)
                {
                    yield return objLogData;
                }
                if(objXmlReader.Name == "LogID")
                {
                    objLogData.LogID = objXmlReader.ReadElementContentAsString();
                }
                else if (objXmlReader.Name == "LogDateTime")
                {          
                    objLogData.LogDateTime = objXmlReader.ReadElementContentAsString();                   
                }
                else if(objXmlReader.Name == "LogType")
                {
                    objLogData.LogType = objXmlReader.ReadElementContentAsString();
                }
                else if(objXmlReader.Name == "LogFlag")
                {
                    objLogData.LogFlag = objXmlReader.ReadElementContentAsString();
                }
                else if(objXmlReader.Name == "LogApplication")
                {
                    objLogData.LogApplication = objXmlReader.ReadElementContentAsString();
                }
                else if(objXmlReader.Name == "LogModule")
                {
                    objLogData.LogModule = objXmlReader.ReadElementContentAsString();
                }
                else if(objXmlReader.Name == "LogLocation")
                {
                    objLogData.LogLocation = objXmlReader.ReadElementContentAsString();
                }
                else if(objXmlReader.Name == "LogText")
                {
                    objLogData.LogText = objXmlReader.ReadElementContentAsString();
                }
                else if(objXmlReader.Name == "LogStackTrace")
                {
                    objLogData.LogStackTrace = objXmlReader.ReadElementContentAsString();
                }
            }
        } 
```

但它给了我一个错误**“节点类型 EndElement 不支持 ReadElementContentAsString 方法”** 但是当我的 xml 文件为

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<AppXmlLogWritter>
<LogData>
<LogID>999992013021110381000001</LogID>
<LogDateTime>20130211103810</LogDateTime>
<LogType>Message</LogType>
<LogFlag>Flag</LogFlag>
<LogApplication>Application</LogApplication>
<LogModule>Module</LogModule>
<LogLocation>Location</LogLocation>
<LogText>Text</LogText>
<LogStackTrace>Stacktrace</LogStackTrace>
</LogData>
</AppXmlLogWritter> 
```

它工作正常，但我还没有得到关于 xml 文件的实际问题，为什么它在我提到时给我一个错误。此行发生错误

```
 objLogData.LogDateTime = objXmlReader.ReadElementContentAsString(); 
```

谢谢你的回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:07:04.053

Well, the main cause of the problem is that you're using `ReadElementContentAsString` which moves the "cursor" to *after* the element you're reading - but you're then calling `Read()` again.

So when the XML data is like this:

```
<first>Foo</first><second>Bar</second> 
```

... if you're positioned on the `first` element opening, then `ReadElementContentAsString` will move the reader onto the start of the `second` element. You then call `Read()` which moves into the text node ("Bar"). When you then call `ReadElementContentAsString` a second time, that will fail - because you're not on an element start node. However, I'd expect to get an exception of:

```
Unhandled Exception: System.InvalidOperationException:
The ReadElementContentAsString method is not supported on node type Text. 
```

... whereas you've got a node type of `EndElement`, for some reason.

You should dig into exactly why that's happening (did you call `Read` manually while debugging, for example?) but the underlying problem you need to fix is calling `Read()` when you don't need to.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:46:20.113

您正在使用`IXmlLineInfo`并来自[msdn 页面](http://msdn.microsoft.com/en-us/library/system.xml.ixmllineinfo.aspx)：

> 提供一个接口以使类能够返回行和位置信息。

这可能是导致此错误的原因。我猜使用`yield return`（因为它从未被调用）并使用`item.MoveNext()`结果不会返回任何内容，从而`objXmlReader`移动到导致异常的 xml 的最后一个元素。

请注意，这只是基于您提供的数据的猜测。

# ruby-on-rails - 充当可标记的上下文名称复数还是单数？

> ID：14833613
> 
> 赞同：2
> 
> 时间：2013-02-12T13:25:09.193
> 
> 标签：ruby-on-rails, acts-as-taggable-on

假设 act-as-taggable-on 上下文名称必须是复数是否正确？“技能”与“技能”？该文档没有明确说明命名约定。

```
class User < ActiveRecord::Base
  acts_as_taggable
  acts_as_taggable_on :*skills*, :interests
end

@user = User.new(:name => "Bobby")
@user.tag_list = "awesome, slick, hefty"  
@user.skill_list = "joking, clowning, boxing" 

@user.tags # => [<Tag name:"awesome">,<Tag name:"slick">,<Tag name:"hefty">]
@user.skills # => [<Tag name:"joking">,<Tag name:"clowning">,<Tag name:"boxing">] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:12:28.460

您现在可能已经想通了，但是是的，您是对的。上下文是复数。

# javascript - 像 devtools 一样更改 document.width 吗？

> ID：14833616
> 
> 赞同：1
> 
> 时间：2013-02-12T13:25:13.997
> 
> 标签：javascript, google-chrome-extension, responsive-design

在开发者工具中有一个设备指标设置，允许您更改浏览器中的视口以模拟不同的屏幕尺寸。它似乎改变了 document.width 属性来这样做。这在 JS 中是只读的。有没有办法在扩展中实现同样的事情？我目前必须调整浏览器窗口的大小，这不是很优雅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:34:11.357

您应该尝试[分辨率测试](https://chrome.google.com/webstore/detail/resolution-test/idhfcdbheobinplaamokffboaccidbal)插件。

# c++ - 使用 Poco 和 Qt Creator 构建错误 C++

> ID：14833617
> 
> 赞同：2
> 
> 时间：2013-02-12T13:25:16.003
> 
> 标签：c++, mingw, static-libraries, qt-creator

尝试在 Poco 库中构建示例时，我在 Qt Creator 中遇到构建错误。我使用[这些说明](https://stackoverflow.com/a/14647307/2030199 "这些")使用 MinGW 构建 poco。

这是我尝试使用的示例：

```
// httpget.cpp
//
// $Id: //poco/1.4/Net/samples/httpget/src/httpget.cpp#3 $
//
// This sample demonstrates the HTTPClientSession and the HTTPCredentials classes.
//
// Copyright (c) 2005-2012, Applied Informatics Software Engineering GmbH.
// and Contributors.
//
// Permission is hereby granted, free of charge, to any person or organization
// obtaining a copy of the software and accompanying documentation covered by
// this license (the "Software") to use, reproduce, display, distribute,
// execute, and transmit the Software, and to prepare derivative works of the
// Software, and to permit third-parties to whom the Software is furnished to
// do so, all subject to the following:
//
// The copyright notices in the Software and this entire statement, including
// the above license grant, this restriction and the following disclaimer,
// must be included in all copies of the Software, in whole or in part, and
// all derivative works of the Software, unless such copies or derivative
// works are solely in the form of machine-executable object code generated by
// a source language processor.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
// SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
// FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
// ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
// DEALINGS IN THE SOFTWARE.
//

#include "Poco/Net/HTTPClientSession.h"
#include "Poco/Net/HTTPRequest.h"
#include "Poco/Net/HTTPResponse.h"
#include <Poco/Net/HTTPCredentials.h>
#include "Poco/StreamCopier.h"
#include "Poco/NullStream.h"
#include "Poco/Path.h"
#include "Poco/URI.h"
#include "Poco/Exception.h"
#include <iostream>

using Poco::Net::HTTPClientSession;
using Poco::Net::HTTPRequest;
using Poco::Net::HTTPResponse;
using Poco::Net::HTTPMessage;
using Poco::StreamCopier;
using Poco::Path;
using Poco::URI;
using Poco::Exception;

bool doRequest(Poco::Net::HTTPClientSession& session, Poco::Net::HTTPRequest& request, Poco::Net::HTTPResponse& response)
{
    session.sendRequest(request);
    std::istream& rs = session.receiveResponse(response);
    std::cout << response.getStatus() << " " << response.getReason() << std::endl;
    if (response.getStatus() != Poco::Net::HTTPResponse::HTTP_UNAUTHORIZED)
    {
        StreamCopier::copyStream(rs, std::cout);
        return true;
    }
    else
    {
        Poco::NullOutputStream null;
        StreamCopier::copyStream(rs, null);
        return false;
    }
}

int main(int argc, char** argv)
{
//    if (argc != 2)
//    {
//        Path p(argv[0]);
//        std::cout << "usage: " << p.getBaseName() << " <uri>" << std::endl;
//        std::cout << "       fetches the resource identified by <uri> and print it to the standard output" << std::endl;
//        return 1;
//    }

    try
    {
        URI uri("http://reddit.com");
        std::string path(uri.getPathAndQuery());
        if (path.empty()) path = "/";

        std::string username;
        std::string password;
        Poco::Net::HTTPCredentials::extractCredentials(uri, username, password);
        Poco::Net::HTTPCredentials credentials(username, password);

        HTTPClientSession session(uri.getHost(), uri.getPort());
        HTTPRequest request(HTTPRequest::HTTP_GET, path, HTTPMessage::HTTP_1_1);
        HTTPResponse response;
        if (!doRequest(session, request, response))
        {
            credentials.authenticate(request, response);
            if (!doRequest(session, request, response))
            {
                std::cerr << "Invalid username or password" << std::endl;
                return 1;
            }
        }
    }
    catch (Exception& exc)
    {
        std::cerr << exc.displayText() << std::endl;
        return 1;
    }
    return 0;
} 
```

我的简历：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

SOURCES += main.cpp

POCO_HOME = "C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL"

# SEE http://www.qtcentre.org/threads/23655-Does-Qt-Creator-understand-debug-release-scopes-in-pro-files
# OR http://www.qtcentre.org/threads/30430-How-to-set-pro-file-about-debug-and-release
####
CONFIG(debug, debug|release) {
CONFIG -= debug release
CONFIG += debug
}

CONFIG(release, debug|release) {
CONFIG -= debug release
CONFIG += release
}
####

debug {
POCO_DEBUG = d
}

release {
POCO_DEBUG =
}

INCLUDEPATH += "$${POCO_HOME}\include"
INCLUDEPATH += "$${POCO_HOME}"
LIBS += $${POCO_HOME}\lib\libPocoNetd.a $${POCO_HOME}\lib\libPocoFoundationd.a $${POCO_HOME}\lib\libPocoUtild.a 
```

和构建错误：

```
05:21:46: Running build steps for project download...
05:21:46: Configuration unchanged, skipping qmake step.
05:21:46: Starting: "C:\QtSDK\mingw\bin\mingw32-make.exe" 
C:/QtSDK/mingw/bin/mingw32-make.exe -f Makefile.Debug
mingw32-make.exe[1]: Entering directory `C:/Users/justin/Documents/Qt/download-build-desktop-Qt_4_8_0_for_Desktop_-_MinGW__Qt_SDK__Debug'
g++ -Wl,-subsystem,console -mthreads -o debug\download.exe debug/main.o  C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoFoundationd.a C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoUtild.a 
mingw32-make.exe[1]: Leaving directory `C:/Users/justin/Documents/Qt/download-build-desktop-Qt_4_8_0_for_Desktop_-_MinGW__Qt_SDK__Debug'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: Offset (893751156) greater than or equal to (null) size (4954657).
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketAddress.o):SocketAddress.cpp:(.text+0x743): undefined reference to `ntohs@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '13637', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketAddress.o):SocketAddress.cpp:(.text+0x956): undefined reference to `htons@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketAddress.o):SocketAddress.cpp:(.text+0xc5e): undefined reference to `getservbyname@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11075', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketAddress.o):SocketAddress.cpp:(.text+0xc7b): undefined reference to `ntohs@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: Offset (3968946036) greater than or equal to (null) size (4954657).
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(IPAddress.o):IPAddress.cpp:(.text$_ZNK4Poco3Net15IPv4AddressImpl10isLoopbackEv[Poco::Net::IPv4AddressImpl::isLoopback() const]+0x13): undefined reference to `ntohl@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '60561', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(IPAddress.o):IPAddress.cpp:(.text$_ZNK4Poco3Net15IPv4AddressImpl11isMulticastEv[Poco::Net::IPv4AddressImpl::isMulticast() const]+0x13): undefined reference to `ntohl@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(IPAddress.o):IPAddress.cpp:(.text$_ZNK4Poco3Net15IPv4AddressImpl11isLinkLocalEv[Poco::Net::IPv4AddressImpl::isLinkLocal() const]+0x13): undefined reference to `ntohl@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11075', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(IPAddress.o):IPAddress.cpp:(.text$_ZNK4Poco3Net15IPv4AddressImpl11isSiteLocalEv[Poco::Net::IPv4AddressImpl::isSiteLocal() const]+0x13): undefined reference to `ntohl@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11828', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(IPAddress.o):IPAddress.cpp:(.text$_ZNK4Poco3Net15IPv4AddressImpl13isWellKnownMCEv[Poco::Net::IPv4AddressImpl::isWellKnownMC() const]+0x13): undefined reference to `ntohl@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '50', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(IPAddress.o):IPAddress.cpp:(.text$_ZNK4Poco3Net15IPv4AddressImpl13isLinkLocalMCEv[Poco::Net::IPv4AddressImpl::isLinkLocalMC() const]+0x13): more undefined references to `ntohl@4' follow
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '25458', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(IPAddress.o):IPAddress.cpp:(.text$_ZN4Poco3Net15IPv4AddressImpl5parseERKSs[Poco::Net::IPv4AddressImpl::parse(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)]+0x27): undefined reference to `inet_addr@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: Offset (2427096948) greater than or equal to (null) size (4954657).
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x198): undefined reference to `accept@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '37034', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x2c2): undefined reference to `connect@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x3c1): undefined reference to `connect@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11075', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x641): undefined reference to `connect@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11828', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x74c): undefined reference to `bind@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '50', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x8bc): undefined reference to `listen@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '25458', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x910): undefined reference to `closesocket@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '25455', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x983): undefined reference to `shutdown@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '18804', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0xa15): undefined reference to `shutdown@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11884', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0xaa7): undefined reference to `shutdown@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '112', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0xb46): undefined reference to `send@16'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '19804', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0xc0a): undefined reference to `recv@16'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '22343', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0xd58): undefined reference to `sendto@24'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '31091', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0xe37): undefined reference to `recvfrom@24'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11825', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0xfb2): undefined reference to `send@16'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '28520', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x1237): undefined reference to `select@20'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '27228', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x1672): undefined reference to `getsockname@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '26996', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x1744): undefined reference to `getpeername@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '28528', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x199f): undefined reference to `setsockopt@20'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '12589', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x1c41): undefined reference to `getsockopt@20'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '13870', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x2167): undefined reference to `socket@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '29797', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x21ab): undefined reference to `ioctlsocket@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '21700', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text+0x21e5): undefined reference to `ioctlsocket@12'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '0', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(SocketImpl.o):SocketImpl.cpp:(.text$_ZN4Poco3Net10SocketImpl9lastErrorEv[Poco::Net::SocketImpl::lastError()]+0x7): undefined reference to `WSAGetLastError@0'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: Offset (2639866316) greater than or equal to (null) size (4954657).
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(Socket.o):Socket.cpp:(.text+0x4ee): undefined reference to `select@20'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '40281', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(Socket.o):Socket.cpp:(.text+0x64e): undefined reference to `__WSAFDIsSet@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(Socket.o):Socket.cpp:(.text+0x722): undefined reference to `__WSAFDIsSet@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11075', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(Socket.o):Socket.cpp:(.text+0x7fe): undefined reference to `__WSAFDIsSet@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: Offset (1197756532) greater than or equal to (null) size (4954657).
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(DNS.o):DNS.cpp:(.text+0x78): undefined reference to `getaddrinfo@16'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '18276', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(DNS.o):DNS.cpp:(.text+0xa2): undefined reference to `freeaddrinfo@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(DNS.o):DNS.cpp:(.text+0x1e7): undefined reference to `getnameinfo@28'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11075', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(DNS.o):DNS.cpp:(.text+0x23b): undefined reference to `getaddrinfo@16'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '11828', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(DNS.o):DNS.cpp:(.text+0x265): undefined reference to `freeaddrinfo@4'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '50', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(DNS.o):DNS.cpp:(.text+0x5eb): undefined reference to `gethostname@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '25458', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(DNS.o):DNS.cpp:(.text+0xb50): undefined reference to `WSAStartup@8'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: Dwarf Error: found dwarf version '21326', this reader only handles version 2 and 3 information.
C:\MinGW\msys\1.0\home\justin\poco-1.4.6\_INSTALL\lib\libPocoNetd.a(DNS.o):DNS.cpp:(.text+0xc18): undefined reference to `WSACleanup@0'
collect2: ld returned 1 exit status
mingw32-make.exe[1]: *** [debug\download.exe] Error 1
mingw32-make.exe: *** [debug] Error 2
05:21:47: The process "C:\QtSDK\mingw\bin\mingw32-make.exe" exited with code 2.
Error while building project download (target: Desktop)
When executing build step 'Make' 
```

# azure - 生成一次性使用的 SharedAccessSignature

> ID：14833623
> 
> 赞同：0
> 
> 时间：2013-02-12T13:25:31.650
> 
> 标签：azure, azure-blob-storage

是否可以生成一个**SharedAccessKey**在第一次请求后而不是在一定时间后过期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:08:45.400

不，这是不可能的。您需要自己的一些机制来跟踪共享访问签名的使用情况。

# java - java代码中的NullPointerException。？在活动参数中使用科尔多瓦活动时。？

> ID：14833624
> 
> 赞同：0
> 
> 时间：2013-02-12T13:25:37.973
> 
> 标签：java, android, cordova, phonegap-plugins

`NullPointerException`我正在尝试使用出现在这一行 的 andorid 代码在科尔多瓦制作一个 pdf 阅读器插件`svScroll.setPDFViewer(this);` 有不同的类是第一个我调用 thia`PDFViewer`类

```
 PDFViewer m_PDFViewer = new PDFViewer(cordova.getActivity()); 
```

所以任何机构都可以帮助我解决这个问题

```
 public class PDFViewer implements IPassword
    {
        private LinearLayout llPagePane;
        private QScrollView svScroll;

        private float m_CurrentScale;
        private PDFDocument m_Document;
        private float m_FitToWidth;
        private LRUCache m_PageContentsCache;
        private Vector<PDFPageView> m_PageViews;
        private Activity m_ParentActivity;
        private TouchHandlerView m_TouchHandler;

        public PDFViewer(Activity parentActivity)
        {
            m_ParentActivity = parentActivity;

            StandardFontTF.mAssetMgr = m_ParentActivity.getAssets();

            llPagePane = (LinearLayout) parentActivity.findViewById(R.id.pagepane);
            svScroll = (QScrollView) parentActivity.findViewById(R.id.scrollview);
            svScroll.setPDFViewer(this);

            m_PageContentsCache = new LRUCache(20);
            m_PageViews = new Vector<PDFPageView>();
            m_TouchHandler = new TouchHandlerView(this);
        } 
```

```
 java.lang.NullPointerException
    at com.pdfplugin.PDFViewer.<init>(PDFViewer.java:55)
    at com.pdfplugin.pdfreader$1.run(pdfreader.java:69) 
```

```
 public void setPDFViewer(PDFViewer viewer)
        {
            m_PDFViewer = viewer;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:28:04.253

```
svScroll = (QScrollView) parentActivity.findViewById(R.id.scrollview); 
```

这可能会回归`null`，这就是为什么

```
 svScroll.setPDFViewer(this); 
```

正在抛出 NullPointerException。调试并检查它是否返回 null 并相应地更新您的逻辑。一种`R.id.scrollview`不存在的可能性。（对安卓了解不多。）

# php - 如何注释掉 php 以在 php 打印中添加 HTML 表单？

> ID：14833631
> 
> 赞同：0
> 
> 时间：2013-02-12T13:26:08.910
> 
> 标签：php, html, sql

这是我的代码，可以正常工作并打印出我想要的所有内容。但是在每个单元格的末尾，我想要一个制作一个按钮的表单，该按钮将允许用户配置表中的行描述的项目。我想知道如何摆脱 php 以再次使用 html，我尝试过双引号，但这不起作用，我想知道是否有人可以向我解释如何做到这一点。

```
<?php
    $data = mysql_query("SELECT * FROM basestation WHERE email_address ='$email'") 
     or die(mysql_error()); 
     Print "<table border = 1>"; 
     while( $info = mysql_fetch_array( $data ) ) { 
       Print "<tr>"; 
       Print "<th>Name:</th> <td>".$info['base_station_id'] . "</td>";
       Print "</tr>"; 
       Print "<tr>";  
       Print "<th>Serial Number:</th> <td>".$info['serial_no'] . "</td> "; 
       Print "</tr>"; 
     } 
     Print "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:28:35.770

PHP 代码只会在开始`<?php`和结束`?>`php 标记之间执行。但是，您可以自由地在每个文件中使用多个 php 部分。

因此，您可以使用`?>`. 然后在编写 HTML 内容后，您可以`<?php`再次打开。

这里有一个小例子。`<a>`它从一个 imaginal 数组中创建了几个achors `$links`：

```
<?php

foreach($links as $link) { ?>
    <a href="<?php echo $link['href']; ?>"><?php echo $link['title'];?></a>
<?php } 
```

请注意，这主要会导致代码不可读。但这是可能的并且可以使用。

也不是说有短的语法可用于较短的回显语法。但是您必须确保在您的 php 配置中启用它。使用较短的语法，上面的示例可能如下所示：

```
foreach($links as $link) { ?>
    <a href="<?=$link['href']?>"><?=$link['title'];?></a>
<? } 
```

你会在[PHP 网站上找到一个很好的文档](http://www.php.net/manual/en/language.basic-syntax.phpmode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:29:57.603

您已经在使用 PHP 分隔符`<?php`和`?>`. 使用这些也可以在文档中切换回 HTML。

```
<?php
  function foo(bar) {
    return bar == 1 ? 'bar' : 'nobar';
  }

?>
<h1>Heading with just HTML</h1>
<div class="<?php print foo(1); ?>">This is a div with a dynamic class.</div>
<?php
  // and php again
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:30:17.873

`id`只需使用中的 链接到页面`url`

```
Print "<tr>";  
Print "<th>Edit:</th><td><a href='edit.php?id='".$info['id'].">Edit</a></td> "; 
Print "</tr>"; 
```

然后就`edit.php`可以获取 id ( `$_GET['id']`) 并查询数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:30:54.033

```
<?php
    $data = mysql_query("SELECT * FROM basestation WHERE email_address ='$email'") 
     or die(mysql_error()); 
     Print "<table border = 1>"; 
     while( $info = mysql_fetch_array( $data ) ) { 
       Print "<tr>"; 
       Print "<th>Name:</th> <td>".$info['base_station_id'] . "</td>";
       Print "</tr>"; 
       Print "<tr>";  
       Print "<th>Serial Number:</th> <td>".$info['serial_no'] . "</td> ";
 ?> 
       <-- form here --->
 <?php
       Print "</tr>"; 
 } 
 Print "</table>";
?> 
```

# asp.net-mvc-3 - 从控制器方法返回帮助程序的内容

> ID：14833644
> 
> 赞同：0
> 
> 时间：2013-02-12T13:26:32.717
> 
> 标签：asp.net-mvc-3

我创建了一个名为 ManagementHierarchy 的助手。

现在经过一些处理，我想再次将结果从控制器返回到视图以更新特定的 div。

就像我们返回部分视图一样

```
return PartialView("~/Views/Hr/_ReviewersListForSpecifiedJobApplication.cshtml", listCorporateHierarchy); 
```

我们如何从助手返回结果？

我怎样才能做到这一点？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:30:40.903

利用

```
return PartialView("ReviewersListForSpecifiedJobApplication",model); 
```

其中，`model`是从助手返回的数据。

或者

您可以将助手中的数据保存在 中`Viewbag`，然后在`View`下面使用它：

**控制器：**

```
public ActionResult ReviewersListForSpecifiedJobApplication()
{
   //some helper returning data in "data" variable
   ViewBag.datafromhelper= data;
   return PartialView();
} 
```

如果您没有返回视图的单独方法，则只需传递视图名称，如下所示：

```
 return PartialView("ReviewersListForSpecifiedJobApplication"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:28:29.617

你应该只写部分视图的名称而不是写你写的所有东西..

例如，如果局部视图的名称是“partial.cshtml”，那么

```
return PartialView("partial",objectName); 
```

所以在你的情况下

```
return PartialView("ReviewersListForSpecifiedJobApplication",listCorporateHierarchy); 
```

# java - 从数据库 Java 中获取记录

> ID：14833655
> 
> 赞同：2
> 
> 时间：2013-02-12T13:27:19.350
> 
> 标签：java, jsp, jdbc

我有一个如下表

![在此处输入图像描述](../Images/adf8c855a673b8ac7f62c93975a65960.png)

我运行查询以获取表中的值，如下所示

```
SELECT Id, UserName, UserId, Password, 
       CASE Status WHEN 1 THEN 'Active' ELSE 'Inactive' END AS Status 
  FROM users 
```

现在我上面查询的Java代码如下。

```
 String[] arrUsersList[] = new String[100][5];
    String[] arrUsersTem    =  new String[5];

    pstmt = conn.createStatement(rs.TYPE_FORWARD_ONLY, rs.CONCUR_READ_ONLY);
    rs    = pstmt.executeQuery(strSQL);

    while(rs.next())
    {   
        arrUsersTem[0] = rs.getString("Id");
        arrUsersTem[1] = rs.getString("UserName");
        arrUsersTem[2] = rs.getString("UserId");
        arrUsersTem[3] = rs.getString("Password");
        arrUsersTem[4] = rs.getString("Status");

        arrUsersList.add(arrUsersTem);
    } 
```

我的问题是

我知道我应该使用二维数组从 Recordset 中获取值。我也知道我做错了。从上述结果集中获取记录的正确方法是什么。

是数组正确选项还是我应该使用 ArrayList 或其他东西。

谢谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:29:10.463

Java 是 OOP 语言，所以常用的方法是创建描述表实体的类，并[`Collection`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html)使用此类对象形成表单

```
class Account {

    private long id;
    private String userName;
    private String userId;
    private String password;
    private boolean status;

    // getters, setters
} 
```

* * *

```
List<Account> accountList = new ArrayList();
Account account;

while(rs.next()) {   

    account = new Account();
    account.setId(rs.getLong("Id"));
    account.setUserName(rs.getString("UserName"));
    account.setUserId(rs.getString("UserId"));
    account.setPassword(rs.getString("Password"));
    account.setStatus(rs.getBoolean("Status"));

    accountList.add(account);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T13:31:06.610

您应该创建一个包含每个数据库列的字段的用户 bean。然后创建一个用户 bean 列表并执行以下操作：

```
List<User> users = new ArrayList<User>();
while(rs.next()) {   
        User user = new User();
        user.setId(rs.getString("Id"));
        user.setUsername(rs.getString("UserName"));
        //More fields here

        users.add(user);
    } 
```

然后，您将得到一个用户列表，而不是一个令人困惑的二维数组

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T13:36:32.090

由于结果集可以是任意大小，因此不应使用 Array，而应使用 Collection（或任何派生实现）。

首先，您应该创建一个代表您正在检索的元组的类：

```
public class User {

  // fields
  private int id;
  private int userId;
  private String username;
  private String password;
  private String status;

  // constructor
  public User(ResultSet rs) {
    id = rs.getInt("Id");
    // the same for the other fields...
  }
} 
```

第二个也是最后一个，迭代时只需为每个行/元组创建一个新实例，并将生成的对象添加到将根据需要增长的集合中。

```
List<User> users = new ArrayList<User>();
while(rs.next())
{   
   users.add(new User(rs));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T13:39:00.193

我会创建一个类用户：

```
public class User {
   private int id;
   private String userName;
   private String userId;
   private String password;
   private boolean active;
   // getters & setters...
} 
```

然后像这样创建用户：

SQL：

```
SELECT Id, UserName, UserId, Password, Status FROM users 
```

爪哇：

```
List<User> users = new ArrayList<User>();

while (rs.next()) {
   User user = new User();
   user.setId(rs.getInt(1));
   user.setUserName(rs.getString(2));
   user.setUserId(rs.getString(3));
   user.setPassword(rs.getString(4));
   user.setActive(rs.getInt(5)>0);
   users.add(user);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T11:43:02.523

试试这个：

```
while(rs.next()) {   

   account = new Account();
   account.setId(rs.getLong("Id"));
   account.setUserName(rs.getString("UserName"));
   account.setUserId(rs.getString("UserId"));
   account.setPassword(rs.getString("Password"));
   account.setStatus(rs.getBoolean("Status"));

   accountList.add(account);
} 
```

# python - 具有 utf-8 代码格式的 Python CSV 编写器

> ID：14833660
> 
> 赞同：3
> 
> 时间：2013-02-12T13:27:48.643
> 
> 标签：python, csv, utf-8

我正在尝试用荷兰语将一些东西写到 CSV 文件中，这就是发生的情况

在下面的节目中，理想情况下，“Eéntalige affiche in Halle !!” 应该写在csv文件中。然而，它写的是“EÃ©ntalige affiche in Halle !!”

```
# -*- encoding: utf-8 -*-
import csv
S="Eéntalige affiche in Halle !!".encode("utf-8")
file=c = csv.writer(open("Test.csv","wb"))
file.writerow([S]) 
```

在 CSV 文件中==？“在哈雷的 Eéntalige affiche ！！”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:31:15.673

您正在正确写入数据。问题在于*读取*数据的任何内容。它正在将 UTF-8 数据解释为拉丁语 1：

```
>>> print('E\xe9ntalige affiche in Halle !!')
Eéntalige affiche in Halle !!
>>> 'E\xe9ntalige affiche in Halle !!'.encode('utf8')
b'E\xc3\xa9ntalige affiche in Halle !!'
>>> print('E\xe9ntalige affiche in Halle !!'.encode('utf8').decode('latin1'))
EÃ©ntalige affiche in Halle !! 
```

U+00E9 代码点（é，带尖音的拉丁小写字母 E）以 UTF-8、C3 和 A9 十六进制编码为两个字节。如果您将这两个字节视为 Latin1，其中每个字符始终只有*一个*字节，您会得到`Ã`and `©`。

如何处理 CSV 文件和编码没有标准，您需要将编码调整为预期的目标应用程序才能读取此信息。例如，Microsoft Excel 根据当前代码页读取 CSV 文件。

如果您的 CSV 阅读器期待拉丁语 1，请务必编码为拉丁语 1。

# php - 用通配符选择器调用fancybox时不会弹出

> ID：14833662
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:27:56.967
> 
> 标签：php, jquery, fancybox

我有一个循环我的 li 元素的 foreach。在这个元素中，我将 href 属性设置为 #Sendbox，这是调用 div 元素的 id。但是fancybox将无法正常工作。

如果我从 li 元素中删除 id-attribute 它会按预期工作，但这对我来说不是解决方案，因为我需要 id-attribute 来获取其中的其他数据值。

这是我的代码：
HTML + PHP：

```
<ul>
<?php foreach($arrTags as $key => $value) { ?>
<li><a href="#SendBox" class="TheBox" id="setTag_<?php echo $value['userID']; ?>" data-tagid="<?php echo $value['tagID']; ?>"><?php echo $value['userName']; ?></a></li>
<?php } ?>
</ul>  
<div id="SendBox" style="display:none"><h2>Box was sent..</h2></div> 
```

这是我的幻想代码：

```
$('[id^=setTag_]').click(function() {
$('.TheBox').click(function(){  
    $(".TheBox").fancybox({
        width   : 350,
        height  : 400,
    });
});
}); 
```

我试图找到锻炼，但仍然没有运气。
也许有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:21:46.080

您的逻辑没有意义，因为您可以使用元素的 ID ( `setTag_*`) 或类 ( `TheBox`) 调用 fancybox，否则是多余的并且可能会产生意想不到的结果。此外，您不需要该`.click()`方法，除非您想在手动模式下调用 fancybox。

这些脚本中的任何一个都可以工作：

```
$(".TheBox").fancybox({
    width: 350,
    height: 400 //<-- No trial comma on the last option
}); 
```

... 或者

```
$('[id^=setTag_]').fancybox({
    width: 350,
    height: 400 //<-- No trial comma on the last option
}); 
```

...**是**的，fancybox 支持通配符选择器。见**[JSFIDDLE](http://jsfiddle.net/M9JHY/)**

# google-analytics - 谷歌分析没有跟踪某些交易

> ID：14833665
> 
> 赞同：3
> 
> 时间：2013-02-12T13:28:06.520
> 
> 标签：google-analytics, e-commerce

我在使用谷歌分析电子商务报告时遇到问题：我发现大约三分之一的交易没有被跟踪，包括我的个人订单。我使用[ga_debugger](https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna?hl=en)来查找问题。在 ga_debugger 控制台中，报告：“Aborting cookie write: User has opted out of tracking”。我只是不知道这份报告。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:54:02.657

这意味着访问者选择不被跟踪。阅读 Google Analytics[隐私政策](http://www.google.com/analytics/learn/privacy.html)，了解访问者如何执行此操作的详细信息，尤其是**隐私控制**部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T17:21:28.860

检查是否启用了**Google Analytics Opt-out Add-on**。

*在 Chrome 中，转到 Settings... ， Extensions...*

如果您看到此加载项，请取消选中启用框或完全删除加载项。[![在此处输入图像描述](../Images/ac7a42ca5c010abfcc07f05e825791b2.png)](https://i.stack.imgur.com/VZaIa.png)

# java - 更改 JSON 字符串中的键

> ID：14833666
> 
> 赞同：0
> 
> 时间：2013-02-12T13:28:12.417
> 
> 标签：java, json, key

我有一个 JSON 字符串，但我需要更改键的名称。我怎样才能做到这一点？是否可以直接更改它们而不将 JSON 解析为 HashMap 或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:13:24.713

只能通过一个可能不太成功的丑陋正则表达式 -

```
{ "foo" : "bar", "bar" : "foo"} 
```

会给你带来麻烦。

我会解析为对象格式（如您建议的 hashmap） - 然后进行搜索和替换 - 我认为它会更准确。

# jquery - jQuery 悬停和鼠标悬停 .animate

> ID：14833671
> 
> 赞同：2
> 
> 时间：2013-02-12T13:28:23.550
> 
> 标签：jquery, hover

这是我的代码：http: [//jsfiddle.net/FUnhK/](http://jsfiddle.net/FUnhK/)

```
$(document).ready(function(){
    $("img").hover(function(){
        var text = $(this).attr("alt");
        $("h2").text(text);
    });
    $("img").mouseout(function(){
        $("h2").html("Basic Text");
    });

}); 
```

我需要的是 hover() 和 mouseout() 函数的动画，所以每当我将鼠标悬停在其中一个图像上时，它就会显示文本，每当鼠标离开图像区域时，它就会显示“基本文本”（如上述代码）。它应该看起来像这样： http: [//jsfiddle.net/xgyaQ/](http://jsfiddle.net/xgyaQ/) 但正如你所见，我附加了 animate({ opacity: 'toggle' }) 函数仅用于演示目的，它没有按应有的方式运行。

我只需要第一个代码的功能和第二个代码的动画效果，我不知道我应该如何编写 javascript 来实现这一点。

还有一件事 - 知道我应该改变什么，所以当悬停在图像之间的空白区域时基本文本不会显示，因为当你将一个图像悬停到另一个图像时，它看起来并不酷。

谢谢！

PS好的，多亏了Liquinaut，我使它与fadeIn效果一起工作，但首先隐藏了元素：

```
$(document).ready(function () {
    $("img").mouseenter(function () {
        var text = $(this).attr("alt");
        $("h2").text(text).hide().fadeIn(400);
    });
    $("ul").mouseleave(function() {
        $("h2").text('Basic Text').hide().fadeIn(400);
    });
}); 
```

[http://jsfiddle.net/FUnhK/3](http://jsfiddle.net/FUnhK/3)

这就是我想要的效果。有没有更好的方法来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:34:24.677

我认为这个样本很好

```
$(item).hover(function() { ... }, function() { ... });
In your case:

    $("a.button").hover(
       function() {
          $(this).animate({"marginTop": "0px"}, "fast");
       },
       function() {
          $(this).animate({"marginTop": "16px"}, "fast");
       }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:48:34.040

根据您的 HTML/CSS，这可能是您需要的：

```
$(document).ready(function () {
    $("img").mouseenter(function () {
        var text = $(this).attr("alt");
        $("h2").text(text);
    });
    $("ul").mouseleave(function() {
        $("h2").text('Basic Text');
    });
}); 
```

尽管如此，您还是应该考虑重建 CSS 的一部分，因为内部带有绝对定位图像元素的浮动列表元素没有任何意义。

cya, 利奎那

# jquery - 使用一个滚动条（滑块）修复多个网格视图的标题

> ID：14833674
> 
> 赞同：1
> 
> 时间：2013-02-12T13:28:26.800
> 
> 标签：jquery, asp.net, css

我在一页上有四个 asp.net gridviews。我使用 Jquery 滑块同时滚动所有这些（仅垂直）。**如何在滚动时冻结标题行？**

我所有的网格都在更新面板中。

每个 gridview 都在 Div 中。这是 div 样式的示例：

```
<div id="grid1Div" style="overflow-y:hidden;" class="gridHeight">

.gridHeight
{
    height:430px;
} 
```

这是网格样式的示例（所有样式都几乎相似）

```
<asp:GridView ID="grid1" runat="server" CssClass="exGrid1" AutoGenerateColumns="False" OnRowCreated="grid1_RowCreated" meta:resourcekey="grid1Resource1"  >

.exGrid1 { 
    width: 100%; 
    background-color: #DDE8EE; 
    margin: 0 0 0 0; 
    border: solid 1px #FFFFFF; 
    border-collapse:collapse; 
    color: #666666;
}
.exGrid1 td { 
    padding: 2px; 
    border: solid 1px #FFFFFF; 
    color: #666666/*#000000*/; 
    font-size: 0.8em; 
}
.exGrid1 th { 
    padding: 4px 2px; 
    color: #FFFFFF; 
    background: #76B7E2 url(grd_head.png) repeat-x top; 
    border-left: solid 1px #FFFFFF; 
    font-size: 0.8em; 
}
.exGrid1 .alt { background: #fcfcfc url(grd_alt.png) repeat-x top; }
.exGrid1 .pgr { background: #424242 url(grd_pgr.png) repeat-x top; }
.exGrid1 .pgr table { margin: 5px 0; }
.exGrid1 .pgr td { 
    border-width: 0; 
    padding: 0 6px; 
    border-left: solid 1px #666; 
    font-weight: bold; 
    color: #FFFFFF; 
    line-height: 12px; 
 }   
.exGrid1 .pgr a { color: #666; text-decoration: none; }
.exGrid1 .pgr a:hover { color: #000; text-decoration: none; } 
```

这是我为所有网格设置滚动高度的 Jquery 部分。

```
function setGridScroll() {
    var scrollPane = $('#divScroll');
    var scrollGrid1 = $('#grid1');
    var scrollGrid2 = $('#grid2');
    var scrollGrid3 = $('#grid3');
    var scrollGrid4 = $('#grid4');

    var scrollMaxHei = $('#grid1')[0].scrollHeight - 230;
    scrollPane.slider({
        orientation: "vertical",
        value: scrollMaxHei-200,
        min: 200,
        max: scrollMaxHei,
        slide: function (event, ui) {
            var setValue = scrollMaxHei - ui.value-200;
            scrollGrid1.scrollTop(setValue);
            scrollGrid3.scrollTop(setValue);
            scrollGrid4.scrollTop(setValue);
            scrollGrid2.scrollTop(setValue);

        }
    });
} 
```

我可以通过在gridview（s）上为我的fixedheader类设置一些东西来冻结标题吗？

```
<HeaderStyle CssClass="fixedHeader" />

.fixedHeader
    {
     position: relative;
    } 
```

有没有更简单的方法来做到这一点？我需要将所有网格视图分开，并且不能对所有网格视图使用滚动条。此外，滚动条需要位于其自己的 div 上，因为用户可以根据需要隐藏网格视图。

# c# - 如何从 XHTML 文件创建 XSL FO？如何将 XHTML 转换为 XSLFO？

> ID：14833683
> 
> 赞同：0
> 
> 时间：2013-02-12T13:29:09.953
> 
> 标签：c#, xslt, xsl-fo

我有一个 XHTML 模板。我想从 XHTML 模板创建一个 XSL FO。如何将 XHTML 转换为 XSLFO？我通过使用 XHTML 文件的字符串替换来创建 XSL FO。是否可以在不使用字符串替换的情况下为模板创建 XSL FO？下面是我的 XHTML 模板。

```
< div>

{:header:}{:date:}

< p>

{:mailingattn:} < br />

{:facilityname:}  < br />

{:facilitystreet:} < br />

{:facilitystreet2:} <br />

{:facilitycity:}, {:facilitystate:}  {:facilityzip:} < br />

{:facilitycountry:}

< /p>

< br />

< p>abcd,</p>

< p>The Department of abcd:< /p>

< p>{:checkreturnreason:}< /p>

< p>{:message:}< /p>

< pnext>If you have any questions or need assistance, please feel free to abcd:< /pnext>

< pnext>Sincerely, <br />

{:signature:}

< /pnext>

{:footer:}

< /div> 
```

预定义的 XSL FO 模板

```
< xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns:fo="http://www.w3.org/1999/XSL/Format">

  < xsl:output method="xml"/>

  < !--
  expects a rootpath attribute in one of the tags. this should correspond to the
  physical path of the apps folder without the ending slash
  -->
  < xsl:variable name="rootpath"
                select="//@rootpath" />

  < xsl:template match="/">
      < xsl:apply-templates/>
  < /xsl:template>

  < xsl:template match="div">
      < xsl:apply-templates/>
  < /xsl:template>

 < xsl:template match="img">
    < fo:external-graphic height="auto" width="auto">
      < xsl:attribute name="src">
        < xsl:value-of select="concat($rootpath, substring-after(@src,'../..'))" />
      < /xsl:attribute>
    < /fo:external-graphic>
  < /xsl:template>

  < xsl:template match="xsl:value-of">
    < xsl:copy-of select="." />
  < /xsl:template>

  < xsl:template match="br">
    < fo:block>
    < /fo:block>
  < /xsl:template>

  < xsl:template match="p">
    < fo:block space-before="8pt" space-after="4pt">
       < xsl:apply-templates/>
    < /fo:block>
  < /xsl:template>

  < xsl:template match="pnext">
    < fo:block keep-with-next="always" space-before="8pt" space-after="4pt">
       < xsl:apply-templates/>
    < /fo:block>
  < /xsl:template>

  < xsl:template match="table">
    < fo:table width="100%" font-family="Arial">
      < fo:table-body>
        < xsl:for-each select="tr">
          < fo:table-row>
            < xsl:for-each select="td">
              < xsl:variable name="width">
                < xsl:value-of select="@width"/>
              < /xsl:variable>
              < fo:table-cell padding-top='4pt' width="{$width}">
                < xsl:for-each select="span">
                  < xsl:variable name="fsize">
                    < xsl:value-of select="@size"/>
                  < /xsl:variable>
                  < fo:block font-size="{$fsize}pt" text-align="right">
                    < xsl:apply-templates/>
                  < /fo:block>
                < /xsl:for-each>
              < /fo:table-cell>
            < /xsl:for-each>
          < /fo:table-row>
        < /xsl:for-each>
        < fo:table-row>
          < fo:table-cell border=".2pt solid black">
          < /fo:table-cell>
          < fo:table-cell border=".2pt solid black">
          < /fo:table-cell>
        < /fo:table-row>
      < /fo:table-body>
    < /fo:table>
  < /xsl:template>

< /xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:12:17.190

[http://www.ibm.com/developerworks/xml/library/x-xslfo2app/index.html](http://www.ibm.com/developerworks/xml/library/x-xslfo2app/index.html)

有一个全面的 XSLT 将 XHTML 转换为 XSL-FO

摘要： 需要帮助将 HTML 文档转换为 PDF？本参考指南通过示例展示了如何使用 XSLT 模板将 45 个常用 HTML 元素转换为格式化对象（来自 XSL-FO 词汇表），以便使用 XSLT 轻松转换为 PDF。这些示例假设您使用的是 Apache XML Project 的 FOP 工具，但大多数方法都可以与其他 XSL-FO 工具一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:03:25.613

This has worked for me:

```
 //
        // Transform well-stuctured XHTML into XSL-FO.
        //
        var trans = new XslCompiledTransform();
        var xml = new MemoryStream();
        XmlWriter writer = new XmlTextWriter(xml, System.Text.Encoding.Default);

        var converterStream = File.Open("YourXsl.xsl");

        trans.Load(new XmlTextReader(converterStream));           

        // Load XHTML
        var html = File.Open("YourHtml.html");

        var outputStream = new MemoryStream(Encoding.ASCII.GetBytes(viewOutput));

        outputStream.Position = 0;

        using (var input = new XmlTextReader(outputStream)) {
            // Transform XHTML to XSL-FO
            trans.Transform(input, writer);
            writer.Flush();
            xml.Position = 0;

            // Do something with your XSL-FO
        } 
```

# javascript - % 基于高度，动态转换为像素

> ID：14833687
> 
> 赞同：0
> 
> 时间：2013-02-12T13:29:18.747
> 
> 标签：javascript, jquery, css, responsive-design, percentage

**我正在寻找一种简单的方法来执行以下操作：**

我正在建立一个网站，我有一个 .content 类，它的高度是 = height:auto; 并且它的宽度=宽度：80%；但是当我缩放它时，我不希望 div 垂直变成“TOO”位。

**问题：**

是否有一个 javascript 'if' 语句检查 div 的高度，然后能够放置 overflow-y:scroll; 如果元素太大，比如垂直400px？

请注意，div 在 css 中没有高度。它设置为自动。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:36:21.543

如果您不想通过 CSS 执行此操作，那么您正在寻找的 jQuery 函数是：

```
$("#element").outerHeight() and $("#element").outerWidth() 
```

它们返回元素的计算高度和宽度，而不是显式设置的高度和宽度。
所以，

```
if ($("#element").outerWidth() > 400) {
    $("#element").width(400);
    $("#element").css('overflow-y', 'scroll');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:51:07.210

如果您采用 jQuery 方式，添加到 @ieeehh，首先包含 jQuery。然后假设元素的 id 为`#element`

```
$(function(){
      if ($("#element").outerHeight() > 400) {
           $("#element").width(400).css('overflow-y', 'scroll');
      }
}); 
```

# css - ：在 IE 9 上没有为 input[type=button] 触发活动伪类

> ID：14833688
> 
> 赞同：2
> 
> 时间：2013-02-12T13:29:23.957
> 
> 标签：css, internet-explorer-9

我正在尝试设置样式`input[type="button"]`，似乎当我单击标签 IE（在我的情况下为 9；我不关心较低版本）时不会应用该`:active`样式。如果我在标签之外单击，一切都可以在 Chrome 和 Firefox 以及 IE 上正常运行。我没有找到任何可能是问题的线索。

A`<button>`没有这个问题，所以我猜另一个按钮的标签有什么特别之处，但是什么？有什么解决方法吗？

该问题在[http://jsfiddle.net/Kmved/1/中得到了演示](http://jsfiddle.net/Kmved/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:41:45.913

有趣的发现在那里。要回答第一个问题，“为什么？”：不幸的是，CSS 规范将语义`:active` [完全留给了浏览器供应商](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)：

> CSS 没有定义哪些元素可能处于上述状态，或者状态如何进入和离开。脚本可能会改变元素是否对用户事件做出反应，并且不同的设备和 UA 可能有不同的指向或激活元素的方式。

现在我会认为这是 IE 中的一个错误（并希望它可能会在 IE10 中修复），但法律条文说这对你来说是完全可以接受的，但运气不好。

回答第二个问题（解决方法？）：好吧，你自己说的。使用 a`<button>`代替；作为奖励，除了简单的文本之外，您还可以选择在按钮内放置任何类型的内容。

# java - 当网站链接收到点击时，如何增加数据库中的点击次数？

> ID：14833689
> 
> 赞同：2
> 
> 时间：2013-02-12T13:29:31.010
> 
> 标签：java, seo

我正在开发一个显示不同网站链接的链接交换目录。我想显示网站链接针对每个链接收到的点击次数。数据库中有一个表“网站链接”，其中一列是 NumOfHits。它的初始值为'0'，它也显示在每个链接的前面。

现在我希望当任何用户单击任何链接时，numOfHits 会在数据库中自动增加。如何接收 numOfHits 以及如何在任何用户单击链接时增加点击次数？

我正在使用 netbeans 和 mysql 在 java 中开发应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:32:01.367

你是这个意思吗？

```
update websitehits set
numofhits = numofhits + 1
where url = ? 
```

由 Web 服务代码执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:39:13.220

您需要链接上的 onclick 事件，该事件使用已单击的 url 回调服务器，或者需要通过服务器发送链接的重定向器。示例如下。

```
<a href="http://othersite.example.com/" onclick="pingMySite(this.href);return true;"> 
```

或者

```
<a href="http://mysite.example.com/clickthrough?url=http%3A//othersite.example.com"> 
```

# javascript - 如何从jquery中的数组中删除一个项目？

> ID：14833698
> 
> 赞同：-3
> 
> 时间：2013-02-12T13:30:07.453
> 
> 标签：javascript, jquery

我有一个数组：

```
var menu_items = []; 
```

我像这样在其中推两个元素：

```
 menu_items.push({
                    order: menu_items.length + 1, // value= 1
                    title: 'Label',
                    url: '',
                    IsSystemMenuItem: true
                });

 menu_items.push({
                    order: menu_items.length + 1, // value =2
                    title: 'grid',
                    url: '',
                    IsSystemMenuItem: true
                }); 
```

现在我想删除第二个项目（即 order: menu_items.length + 1, // value =2 and title: 'grid'）

我怎样才能删除这个项目？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:30:56.567

使用[delete](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)删除项目：

```
delete menu_items[1]; 
```

但请注意，它会在您的阵列中留下一个洞。

如果您想要一个没有孔的数组，请使用[splice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)：

```
menu_items.splice(1, 1); 
```

如果您想要根据属性删除元素，那么您可以使用[filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
menu_items = menu_items.filter(function(v) { return v.title!='grid' }); 
```

如果您想更加兼容，并且在使用 jQuery 时，您也可以使用[grep](http://api.jquery.com/jQuery.grep/)：

```
menu_items = $.grep(menu_items, function(v) { return v.title!='grid' }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:33:54.097

你可以用`splice()`这个。

```
menu_items.splice(1, 1); 
```

第一个参数是要删除的元素的索引。第二个参数是要删除的元素数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:37:35.333

If you want to remove an item by title, I'd suggest doing something like this:

```
function deleteItemByTitle(array, title){
    for(var i = 0, l = array.length; i < l; i++){ // Loop through the array,
        if(array[i].title == title){              // If the correct element is found,
            array.splice(i, 1);                   // Remove the found element.
            break;
        }
    }
} 
```

Then, you can just call the function:

```
deleteItemByTitle(myArray, "grid"); 
```

Replace `title` with `order`, if you want that to be the property to search for.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:40:04.513

如果要根据订单号或类似删除。这是如何完成的基本示例：

```
function DeleteFromArray(orderId)
{
    for ( var i = 0; i < menu_items.length; i++)
    {
        if(menu_items[i].order === orderId) return menu_items.splice(i, 1);
    }
} 
```

当然`menu_items[i].order === orderId`可以用类似的东西代替`menu_items[i].title === orderId`，然后只是改变`orderId`或`orderTitle`任何你喜欢的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T13:31:48.187

您可以使用[splice()](http://www.w3schools.com/jsref/jsref_splice.asp)方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T13:32:48.480

使用此代码

```
delete Your_items[1]; 
```

# entity-framework-4 - 在 TFS 中分支后实体上没有键定义错误

> ID：14833699
> 
> 赞同：0
> 
> 时间：2013-02-12T13:30:12.117
> 
> 标签：entity-framework-4, wcf-ria-services

在 TFS 中分支团队项目后，我们一直收到以下 RIA 错误消息：

> DomainService 'MyDomainService' 中的实体 'abc' 没有定义键。DomainService 操作公开的实体类型必须至少具有一个标有 KeyAttribute 的公共属性。

一切都在源分支中工作，比较两个分支时绝对没有区别。

我还尝试在虚拟机上安装 TFS 2012，将项目导入那里，然后将其分支出来。源项目再次正常工作，但分支版本失败。

有谁知道在哪里可以解决这个问题？

更新

这并不一致，因为我刚刚成功创建了一个新分支。但是我发现重命名项目会导致相同的行为。一个（相当麻烦的）修复似乎是创建新的工作区，直到它成功......

# ios - 为标准应用添加自定义 UIActivity

> ID：14833700
> 
> 赞同：2
> 
> 时间：2013-02-12T13:30:17.650
> 
> 标签：ios, uiactivity

亲爱的社区，

一个简单的问题，但还没有明确的答案。

我可以将我的按钮添加到标准 UIActivityController 以便当用户转到照片/笔记/Safari 时，他还可以与 twitter/facebook 一起将其发布到我的目的地吗？

![照片应用程序的活动控制器](../Images/4b1d2216a4fd62c7fa6d2f52d42ae6ba.png)

我确信我可以在我的应用程序中调用 UIActivityViewController 时做到这一点。看起来有一种方法可以为邮件附件做到这一点。Box 应用程序可以在此处执行此操作，可能通过 plist 中的 CFBundleDocumentTypes。但是有没有办法用例如照片来做到这一点？

![盒子提供打开邮件附件](../Images/ab7e5fd64b6ab906ff1cfb34d369081d.png)

希望任何人都可以给我任何有用的链接以及此类实现的示例。

非常感谢

——丹尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:02:34.053

从 iOS 6 开始，无法将自定义`UIActivity`项目添加到照片、便笺或 Safari 等内置应用程序中。

自定义`UIActivity`项目只能添加到第三方应用程序。

# java - 如何使通配符的不同捕获兼容？

> ID：14833705
> 
> 赞同：1
> 
> 时间：2013-02-12T13:30:30.307
> 
> 标签：java, generics

我正在尝试使用一个类型参数创建一个泛型类`class MyClass<E>`，它具有一个具有两个类型参数的第二个泛型类的类变量，`SecondClass<V, E>`。因为对于我的代码来说，类型是什么并不重要`V`，所以我将该变量的类型声明为`SecondClass<?, E> var`. 在 MyClass 的实现中，我在 var 上调用一个返回 V, 的方法`public V foo(E e)`，然后将此 V 类型的对象传递给 var, 的另一个方法`public int bar(V v)`。但是，由于我只是模糊理解的原因，这并没有编译，但我相信它已在[此处](https://stackoverflow.com/questions/7557316)进行了解释。

显然，捕获-？foo 返回的与捕获的不同？酒吧要求。但为什么？无论 V 的实际类型是什么，这两种方法都*必须*相同，因为它们是在同一个实例上调用的。我在这里想念什么？

最终，我想知道的是：为了使代码编译，我需要更改什么，而不在 MyClass 的类型参数中添加 V？（我不想强制 MyClass 的用户指定 V 的类型，因为这无关紧要）

* * *

为了给你一个更具体的例子，这是我正在做的一个简化版本。正如您可能已经通过类型参数猜到的那样，它涉及图形。`MyClass`转换为`EdgePainter`并`SecondClass`转换为`Graph`。使用此代码，编译错误位于`EdgePainter.getColor(E)`.

```
class Graph<V, E>
{

    public V getTarget(E edge)
    {
        return null;
    }

    public int getInDegree(V vertex)
    {
        return 0;
    }

}

class EdgePainter<E>
{

    private static final Color COLOR_FOR_MANY_EDGES = Color.RED;
    private static final Color COLOR_FOR_FEW_EDGES = Color.BLUE;

    private Graph<?, E> graph;

    public EdgePainter(Graph<?, E> aGraph)
    {
        graph = aGraph;
    }

    public Color getColor(E edge)
    {
        // My compiler says:
        // The method getInDegree(capture#3-of ?) in the type
        // Graph<capture#3-of ?,E> is not applicable for the arguments
        // (capture#4-of ?)
        int degree = graph.getInDegree(graph.getTarget(edge));
        if (degree > 10)
            return COLOR_FOR_MANY_EDGES;
        else
            return COLOR_FOR_FEW_EDGES;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:40:31.110

您可以通过调用通用方法来捕获通配符。

```
public Color getColor(E edge) {
    return getColorInternal(graph, edge);
}
private <X> Color getColorInternal(Graph<X, E> g, E e) {
    int degree = g.getInDegree(g.getTarget(e));
    // ...
} 
```

这是一个典型的场景。您需要一个类型参数来实现，但希望对 API 用户隐藏它。如果许多方法受到影响，定义一个单独的（可能是嵌套的）类会很有帮助`EdgePainterInternal`。此内部实现具有第二个类型参数`G`，并且公开可见的实现`EdgePainter`将*所有*调用委托给`EdgePainterInternal`.

# mysql - 基于某些特定任务的数据库表更新

> ID：14833709
> 
> 赞同：0
> 
> 时间：2013-02-12T13:30:44.927
> 
> 标签：mysql, sql-update, sql-delete

我有一个数据库表产品

```
Prod_id Prod_name
1   Pen
2   Pencil
3   Eraser
4   book 
```

当我删除产品时`id =2`，产品 3 和 4 的 id*应该减 1，*即现在应该是 2 和 3，如下所示

```
Prod_id Prod_name
1   Pen
2   Eraser
3   book 
```

有什么想法可以解决这个问题..？？我正在使用 mySql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:37:01.433

为什么你需要这样做？如果是`PRIMARY KEY`，请保持原样。但无论如何，为了回答你的问题，我建议你为此创建一个存储过程，

```
DELIMITER $$
CREATE PROCEDURE DeleteItem(IN _id INT)
BEGIN
    DELETE FROM product WHERE Prod_ID = _id;

    UPDATE  product a
            INNER JOIN 
            (
                SELECT  @row:=@row+1 NewID,
                        Prod_Name,
                        Prod_ID
                FROM    product a, (SELECT @row:=0) b
                ORDER   BY Prod_ID ASC
            ) c ON a.Prod_Name = c.Prod_Name
    SET     a.Prod_ID = c.NewID;
END $$
DELIMITER ; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/a1ca6/2)

要调用程序，

```
CALL DeleteItem(3); 
```

要获得更快的性能，请添加`INDEX`on 列`Prod_Name`。

```
ALTER TABLE product ADD INDEX (Prod_Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:39:55.300

您可以将`prod_id`s 保留原样，并使用您的编号动态生成一个新列：

```
SET @row=0; 

SELECT @row := @row + 1 AS row, 
       * 
FROM   product 
ORDER  BY prod_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:42:02.170

如果你真的需要它

[SQLFiddle 演示](http://sqlfiddle.com/#!2/92df2/1)

```
update product,
(select Prod_id,@row:=@Row+1 as rn 
   from product,(select @row:=0) tm 
 order by Prod_id) t1
set product.Prod_id=t1.rn
where product.Prod_id=t1.Prod_id 
```

# regex - 在字符串内容上创建新变量

> ID：14833712
> 
> 赞同：1
> 
> 时间：2013-02-12T13:30:54.783
> 
> 标签：regex, r

如果我有这些字符串：

```
dat <- data.frame(xxs = c("PElookx.PElookxstd","POaftGx.POlookGxstd")) 
```

我如何创建一个新变量，例如，如果字符串包含`PE`我想要的`NOW`或者`PO`我会得到`LATER`

```
newxxs <- (`NOW`,`LATER`) 
```

我有点知道如何使用 grep 来做到这一点：

```
dat$newxss <- NA
dat$newxss[grep("PE",dat$xxs)] <- "NOW"
dat$newxss[grep("PO",dat$xxs)] <- "LATER" 
```

有没有比很多`grep`s 更简单的方法？因为我将不得不为同一新列和许多新列的多个字符串位执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:45:46.687

如果您有不同的替换要做，您可以创建一个自定义函数来一次完成所有替换，例如：

```
subst <- function(var, corresp) {
  sapply(corresp, function(elem) {
    var[grep(elem[1],var)] <- elem[2]
  })
}

var <- c("PEfoo", "PObar", "PAfoofoo", "PUbarbar")
corresp <- list(c("PE","NOW"),
                c("PO","LATER"),
                c("PA", "MAYBE"),
                c("PU", "THE IPHONE IS IN THE BLENDER"))
subst(var, corresp) 
```

会给 ：

```
[1] "NOW"                          "LATER"                       
[3] "MAYBE"                        "THE IPHONE IS IN THE BLENDER" 
```

因此，您可以重复将函数应用于数据框的不同列：

```
dat$new1 <- subst(dat$old1, corresp1)
dat$new2 <- subst(dat$old2, corresp2)
dat$new3 <- subst(dat$old3, corresp3)
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:35:15.953

如果你所有的字符串**肯定**有一个`PE`或`PO`在其中，你可以使用`ifelse`：

```
ifelse(grepl("PE", dat$xxs), "NOW", "LATER") 
```

**例子：**

```
set.seed(45)

x <- sample(c("PEx", "POy"), 20, replace=T)
# [1] "POy" "PEx" "PEx" "PEx" "PEx" "PEx" "PEx" "POy" "PEx" "PEx" 
#         "PEx" "POy" "PEx" "PEx" "PEx" "PEx" "POy" "PEx" "PEx" "PEx"

ifelse(grepl("PE", x), "NOW", "LATER")

# [1] "LATER" "NOW"   "NOW"   "NOW"   "NOW"   "NOW"   "NOW"   "LATER" "NOW"   
#         "NOW"   "NOW"   "LATER" "NOW"   "NOW"   "NOW"  
# [16] "NOW"   "LATER" "NOW"   "NOW"   "NOW" 
```

# android - 如何更改 Spinner 的文本颜色

> ID：14833714
> 
> 赞同：2
> 
> 时间：2013-02-12T13:30:55.877
> 
> 标签：android, spinner

请帮助我更改微调器的文本颜色。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T13:33:26.597

试试这个：

```
 Spinner spinner = (Spinner)findViewById(R.id.my_spinner);
    TextView tv = (TextView) spinner.getSelectedView();
    tv.setTextColor(Color.BLACK); 
```

否则在 spinner_xml 中更改：

```
 <?xml version="1.0" encoding="utf-8"?>

<TextView  
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content"
     android:textSize="20dip"
     android:gravity="left"  
     android:textColor="#FF0000"         
     android:padding="5dip"
/> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T13:37:23.050

试试这个

**custom_spinner_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="top"
    android:singleLine="true"
    android:textColor="@color/iphone_text" /> 
```

在 Java 代码中

```
Spinner spnCategory= (Spinner)findViewById(R.id.my_spinner); 
```

..

```
ArrayAdapter<String> adptSpnCategory = new ArrayAdapter<String>this,R.layout.custom_spinner_item, alCategoryName);
adptSpnCategory.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spnCategory.setAdapter(adptSpnCategory);
spnCategory.setOnItemSelectedListener(new OnItemSelectedListener() 
{
 public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
 {
 }
 public void onNothingSelected(AdapterView<?> arg0) 
 {
 }
}); 
```

# c++ - C 中的链接器错误：未定义对“方法”c 的引用

> ID：14833719
> 
> 赞同：-7
> 
> 时间：2013-02-12T13:31:24.963
> 
> 标签：c++, c, linker-errors, undefined-reference

我有一个我正在尝试构建的 C 文件，但它给了我链接器错误。原因是它找不到在其他源文件中定义的方法定义。
我在这里要做的就是定义这个源文件所在的方法。我给出的代码是我正在尝试构建的主程序。任何建议都是最受欢迎的，我们将不胜感激。

```
#include<stdio.h>
#include<jni.h>
#include<windows.h>
#include <stdbool.h>
#include "RunnerClass.h"
#include "unistd.h"
#include "apr_getopt.h"
#include "apr_portable.h"
#include "C:\JNItest\src\common\error_debug.h"
#include "C:\JNItest\src\common\event.h"
#include "C:\JNItest\src\common\context.h"
#include "C:\JNItest\src\common\alloc.h"
#include "C:\JNItest\src\core\nxlog.h"
#include "C:\JNItest\src\core\modules.h"
#include "C:\JNItest\src\core\router.h"
#include "C:\JNItest\src\core\ctx.h"
#include "C:\JNItest\src\core\core.h"
#define NX_LOGMODULE NX_LOGMODULE_CORE

static nxlog_t nxlog;
static apr_os_thread_t _nxlog_initializer = 0;
static void WINAPI nx_win32_svc_main(DWORD argc, LPTSTR * argv);
static void WINAPI nx_win32_svc_change(DWORD);
extern void nx_logger_disable_foreground();
static void print_usage();
static void set_configfile();

static bool do_install = FALSE;
static bool do_uninstall = FALSE;
static SERVICE_STATUS svc_status;
static SERVICE_STATUS_HANDLE *svc_status_handle = NULL;

JNIEXPORT void JNICALL Java_RunnerClass_parse_1cmd_1line
  (JNIEnv * env, jobject jobj, jint argc, const jstring * const *argv){
        char *opt_arg;
        int rv;
        apr_getopt_t *opt;
        int ch;

        static apr_getopt_option_t options[] = {
        { "help", 'h', 0, "print help" }, 
        { "foreground", 'f', 0, "run in foreground" },
        { "stop", 's', 0, "stop a running instance" },
//      { "reload", 'r', 0, "reload configuration of a running instance" },
        { "conf", 'c', 1, "configuration file" }, 
        { "verify", 'v', 0, "verify configuration file syntax" },
        { "install", 'i', 0, "install service available to service manager" },
        { "uninstall", 'u', 0, "uninstall service" },
        { NULL, 0, 1, NULL }, 
        };

        apr_getopt_init(&opt, nxlog.pool, argc,(void *) argv);
        while ( (rv = apr_getopt_long(opt, options, &ch,(void *) &opt_arg)) == APR_SUCCESS )
        {
        switch ( ch )
        {
            case 'c':   /* configuration file */
            nxlog.cfgfile = apr_pstrdup(nxlog.pool, opt_arg);
            break;
            case 'f':   /* foreground */
            nxlog.foreground = TRUE;
            break;
            case 'h':   /* help */
            print_usage();
            exit(-1);
            case 's':   /* stop */
            nxlog.do_stop = TRUE;
            break;
    /*
            case 'r':   // reload
            nxlog.do_restart = true;
            break;
    */
            case 'v':   /* verify */
            nxlog.verify_conf = TRUE;
            nxlog.ctx->ignoreerrors = FALSE;
            break;
            case 'i':   /* install */
            do_install = TRUE;
            break;
            case 'u':   /* uninstall */
            do_uninstall = TRUE;
            break;
            default:
            print_usage();
            exit(-1);
        }
        }

        set_configfile();
        if ( (rv != APR_SUCCESS) && (rv !=APR_EOF) )
        {
            throw(rv ,"Could not parse options");///////////
        }       
  }

  JNIEXPORT void JNICALL Java_RunnerClass_nx_1win32_1svc_1stop
  (JNIEnv * env, jobject jobj){
        SC_HANDLE service_manager = NULL;
        SC_HANDLE service_handle = NULL;
        SERVICE_STATUS status;
        nx_exception_t e;

        // Connect to service manager
        service_manager = OpenSCManager(NULL, NULL, SC_MANAGER_ALL_ACCESS);
        if ( service_manager == NULL )
        {
        nx_win32_error("Cannot initialize access to the service manager");
        }
        try
        {
        service_handle = OpenService(service_manager, "nxlog", SERVICE_ALL_ACCESS);
        if ( service_handle == NULL )
        {
            nx_win32_error("Couldn't open nxlog service");
        }
        else
        {
            if ( QueryServiceStatus(service_handle, &status) )
            {
            if ( status.dwCurrentState != SERVICE_STOPPED )
            {
                log_info("Service currenty active - stopping service...");
                if ( !ControlService(service_handle, SERVICE_CONTROL_STOP, &status) )
                {
                nx_win32_error("Couldn't stop service");
                }
                else
                {
                Sleep(500);
                }
            }
            else
            {
                log_error("Service is already stopped");
            }
            }
            // Close connection to service
            CloseServiceHandle(service_handle);
        }
        // Close connection to service manager
        CloseServiceHandle(service_manager);
        }
        catch(e)
        {
        if ( service_handle != NULL )
        {
            CloseServiceHandle(service_handle);

        }
        if ( service_manager != NULL )
        {
            CloseServiceHandle(service_manager);

        }
        rethrow(e);
        }
  }

  JNIEXPORT void JNICALL Java_RunnerClass_nx_1win32_1svc_1install
  (JNIEnv * env, jobject jobj){
    SC_HANDLE service_manager;
    SC_HANDLE new_service = NULL;
    HKEY regkey;
    uint32_t regtype = 0;
    char regvalbuf[1024];
    uint32_t regvalbufsize = 1024;
    char servicename[1024];

    // Connect to service manager
    service_manager = OpenSCManager(NULL, NULL, SC_MANAGER_ALL_ACCESS);
    if ( service_manager == NULL )
    {
    nx_win32_error("Cannot initialize access to the service manager");
    }

    //FIXME use nxlog.ctx.user to invoke service in CreateService

    // default in case registry lookup would fail
    apr_cpystrn(servicename, 
        "\"c:\\Program Files\\nxlog\\nxlog.exe\" -c \"c:\\Program Files\\nxlog\\nxlog.conf\"",
        sizeof(servicename));

    if ( RegOpenKey(HKEY_LOCAL_MACHINE, "SOFTWARE\\nxlog", &regkey) == ERROR_SUCCESS )
    {
    if ( RegQueryValueEx(regkey, "installdir", 0,(void *) &regtype,(unsigned char *) regvalbuf,(void *) &regvalbufsize) == ERROR_SUCCESS )
    {
        if ( regtype == REG_SZ )
        {
        apr_snprintf(servicename, sizeof(servicename), "\"%snxlog.exe\"", regvalbuf);
        }
    }
    RegCloseKey(regkey);
    }

    // Install the new service
    new_service = CreateService(service_manager, "nxlog", "nxlog",
                SERVICE_ALL_ACCESS, SERVICE_WIN32_OWN_PROCESS,
                SERVICE_AUTO_START, SERVICE_ERROR_IGNORE,
                servicename, NULL, NULL,
                "eventlog\0", NULL, NULL);
    if ( new_service == NULL )
    {
    nx_win32_error("Couldn't create service");
    }
    else
    {
    CloseServiceHandle(new_service);
    log_info("Service successfully installed");
    }

    // Close the connection to service manager
    CloseServiceHandle(service_manager);        
  }

  JNIEXPORT void JNICALL Java_RunnerClass_nx_1win32_1svc_1uninstall
  (JNIEnv * env, jobject jobj){
          SC_HANDLE service_manager = NULL;
        SC_HANDLE service_handle = NULL;
        SERVICE_STATUS query_status;
        nx_exception_t e;

        // Connect to service manager
        service_manager = OpenSCManager(NULL, NULL, SC_MANAGER_ALL_ACCESS);
        if ( service_manager == NULL )
        {
        nx_win32_error("Cannot initialize access to the service manager");
        }

        try
        {
        // Connect to service
        service_handle = OpenService(service_manager, "nxlog", SERVICE_ALL_ACCESS | DELETE);
        if ( service_handle == NULL )
        {
            nx_win32_error("Couldn't open nxlog service");
        }
        else
        {
            // Check that the service is stopped
            if ( QueryServiceStatus(service_handle, &query_status) &&
             (query_status.dwCurrentState == SERVICE_RUNNING) )
            {
            throw_msg("Service is running, please stop it first.");
            }
            else
            { // we can remove
            if ( DeleteService(service_handle) == FALSE )
            {
                nx_win32_error("Couldn't delete service");
            }
            else
            {
                log_info("Service successfully uninstalled");
            }
            }
            // Close connection to service
            CloseServiceHandle(service_handle);
        }
        // Close connection to service manager
        CloseServiceHandle(service_manager);
        }
        catch(e)
        {
        if ( service_handle != NULL )
        {
            CloseServiceHandle(service_handle);

        }
        if ( service_manager != NULL )
        {
            CloseServiceHandle(service_manager);

        }
        rethrow(e);
        }
  }

  JNIEXPORT void JNICALL Java_RunnerClass_nx_1win32_1svc_1main
  (JNIEnv * env, jobject jobj, jint argc, jstring *argv){
          nx_context_t thread_context;
          nx_exception_t e;

    if ( _nxlog_initializer == 0 )
    { // running from service manager
    ASSERT(nx_init((void *)&argc, (void *)&argv, NULL) == TRUE);

    nxlog_init(&nxlog);
    nx_logger_disable_foreground();
    }
    else if ( _nxlog_initializer != apr_os_thread_current() )
    {
    // service dispatcher runs in a new thread, we need
    // to initialize the exception context.
    _nxlog_initializer = apr_os_thread_current();
    memset(&thread_context, 0, sizeof(nx_context_t));
    init_exception_context(&thread_context.exception_context);
    apr_threadkey_private_set(&thread_context, nx_get_context_key());
    }

    log_debug("nx_win32_svc_main");

    try
    {
    // read config cache
    nx_config_cache_read();
    log_debug("nxlog cache read");

    // load DSO and read and verify module config
    nx_ctx_config_modules(nxlog.ctx);
    log_debug("nxlog config OK");

    // initialize modules
    nx_ctx_init_modules(nxlog.ctx);

    // initialize log routes
    nx_ctx_init_routes(nxlog.ctx);
    nx_ctx_init_jobs(nxlog.ctx);

    nx_ctx_restore_queues(nxlog.ctx);

    // setup threadpool
    nxlog_create_threads(&nxlog);

    // start modules
    nx_ctx_start_modules(nxlog.ctx);

    if ( nxlog.foreground != TRUE )
    {
        // register to service manager
        svc_status_handle = (void *)RegisterServiceCtrlHandler("nxlog", nx_win32_svc_change);
        if ( svc_status_handle == 0 )
        {
        nx_win32_error("RegisterServiceCtrlHandler() failed, couldn't register the service control handler");
        }

        // Signal to svc manager that we are running
        svc_status.dwWin32ExitCode = 0;
        svc_status.dwServiceSpecificExitCode = 0;
        svc_status.dwCheckPoint = 0;
        svc_status.dwWaitHint = 0; 
        svc_status.dwServiceType = SERVICE_WIN32;
        svc_status.dwCurrentState = SERVICE_RUNNING;
        svc_status.dwControlsAccepted = SERVICE_ACCEPT_STOP;
        if ( SetServiceStatus(*svc_status_handle, &svc_status) == FALSE )
        {
        nx_win32_error("Cannot send start service status update");
        }
    }

    //log_info(PACKAGE"-"VERSION_STRING" started");
    }
    catch(e)
    {
    log_exception(e);
    log_error("exiting...");
    svc_status.dwCurrentState = SERVICE_STOPPED;
    SetServiceStatus(*svc_status_handle, &svc_status);
    exit(e.code);
    }

    // mainloop
    nxlog_mainloop(&nxlog, FALSE);

    nxlog_shutdown(&nxlog);

    if ( nxlog.foreground != TRUE )
    {
    // Signal back that we are stopped
    svc_status.dwCurrentState = SERVICE_STOPPED;
    SetServiceStatus(*svc_status_handle, &svc_status);
    }

    nxlog_exit_function();
  }

  JNIEXPORT void JNICALL Java_RunnerClass_nx_1win32_1svc_1dispatch
  (JNIEnv * env, jobject jobj){
         static SERVICE_TABLE_ENTRY svc_dispatch_table[] = 
    {
    { "nxlog", NULL },
    { NULL, NULL }
    };

    if ( StartServiceCtrlDispatcher(svc_dispatch_table) == FALSE )
    {
    nx_win32_error("Cannot start service dispatcher");
    } 
  }

  JNIEXPORT void JNICALL Java_RunnerClass_nx_1win32_1svc_1start
  (JNIEnv * env, jobject jobj, jint argc, jstring argv){
          SC_HANDLE service_manager = NULL;
    SC_HANDLE service_handle = NULL;
    SERVICE_STATUS status;
    nx_exception_t e;

    // Connect to service manager
    service_manager = OpenSCManager(NULL, NULL, SC_MANAGER_ALL_ACCESS);
    if ( service_manager == NULL )
    {
    nx_win32_error("Cannot initialize access to the service manager");
    }
    try
    {
    service_handle = OpenService(service_manager, "nxlog", SERVICE_ALL_ACCESS);
    if ( service_handle == NULL )
    {
        nx_win32_error("Couldn't open nxlog service");
    }
    else
    {
        if ( QueryServiceStatus(service_handle, &status) )
        {
        if ( status.dwCurrentState != SERVICE_RUNNING )
        {
            log_info("Service not running - starting service...");
            if ( StartService(service_handle, argc,(void *) argv) == 0 )
            {
            nx_win32_error("Failed to start nxlog service");
            }
        }
        else
        {
            log_error("Service is already running");
        }
        }

        // Close connection to service
        CloseServiceHandle(service_handle);
    }
    // Close connection to service manager
    CloseServiceHandle(service_manager);
    }
    catch(e)
    {
    if ( service_handle != NULL )
    {
        CloseServiceHandle(service_handle);

    }
    if ( service_manager != NULL )
    {
        CloseServiceHandle(service_manager);

    }
    rethrow(e);
    }
  }

JNIEXPORT void JNICALL Java_RunnerClass_nxlog_1exit_1function
  (JNIEnv * env, jobject jbobj){
  static bool exited = FALSE;

    if ( exited == TRUE )
    {
    return;
    }
    exited = TRUE;

    if ( _nxlog_initializer == 0 )
    {
    return;
    }

    if ( nxlog.pid != (int) getpid() )
    {
    return;
    }

    nx_ctx_free(nxlog.ctx);
    apr_pool_destroy(nxlog.pool);
    apr_terminate();      
  }

  /* Callback for service changes */
static void WINAPI nx_win32_svc_change(DWORD cmd)
{
    // Only STOP command is handled
    switch ( cmd )
    {
    case SERVICE_CONTROL_STOP:
        log_warn("stopping nxlog service");
        nxlog.terminate_request = TRUE;
        // Wait until service stops
        while ( svc_status.dwCurrentState != SERVICE_STOPPED )
        {
        Sleep(500);
        }
        break;
    case SERVICE_CONTROL_INTERROGATE:
        // ignore
        log_debug("ignoring unsupported service change request: SERVICE_CONTROL_INTERROGATE");
        break;
    case SERVICE_CONTROL_PAUSE:
        log_warn("ignoring unsupported service change request: SERVICE_CONTROL_PAUSE");
        break;
    case SERVICE_CONTROL_CONTINUE:
        log_warn("ignoring unsupported service change request: SERVICE_CONTROL_CONTINUE");
        break;
    case SERVICE_CONTROL_PARAMCHANGE:
        log_warn("ignoring unsupported service change request: SERVICE_CONTROL_PARAMCHANGE");
        break;
    case 200:
        nxlog_dump_info();
            break;
    case 201:
    {
        nx_ctx_t *ctx;

        log_info("got user control signal, switching to debug loglevel");
        ctx = nx_ctx_get();
        ctx->loglevel = NX_LOGLEVEL_DEBUG;
    }
    break;
    default:
        log_warn("ignoring unsupported service change request (%d)", cmd);
    }
}

static void print_usage()
{
    printf(/*PACKAGE*/ "-" /*ERSION_STRING*/ "\n"
       " usage: "
       " nxlog.exe [OPTIONS]\n"
       "   [-h] print help\n"
       "   [-f] run in foreground, otherwise try to start the nxlog service\n"
       "   [-c conffile] specify an alternate config file\n"
       "   [-i] install service available to service manager\n"
       "   [-u] uninstall service\n"
       "   [-s] stop running nxlog service\n"
       "   [-v] verify configuration file syntax\n"
       );
//     "   [-r] reload configuration of a running instance\n"
}

static void set_configfile()
{
    HKEY regkey;
    uint32_t regtype = 0;
    char regvalbuf[1024];
    uint32_t regvalbufsize = 1024;

    if ( nxlog.cfgfile != NULL )
    {
    return;
    }

    if ( RegOpenKey(HKEY_LOCAL_MACHINE, "SOFTWARE\\nxlog", &regkey) == ERROR_SUCCESS )
    {
    if ( RegQueryValueEx(regkey, "installdir", 0, (void *)&regtype,
                 (unsigned char *) regvalbuf,(void *) &regvalbufsize) == ERROR_SUCCESS )
    {
        if ( regtype == REG_SZ )
        {
        nxlog.cfgfile = apr_psprintf(nxlog.pool, "%sconf\\nxlog.conf", regvalbuf);
        }
    }
    RegCloseKey(regkey);
    }

    if ( nxlog.cfgfile == NULL )
    {
    //nxlog.cfgfile = apr_pstrdup(nxlog.pool, NX_CONFIGFILE);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:58:23.717

可能“方法”已声明但从未定义。

IE

```
void method(void); 
```

在某处（希望是头文件），但是

```
void method(void)
{
    //do stuff
} 
```

没有找到。确保定义了“方法”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:37:56.600

您收到的确切错误消息是什么？？？

从内存中，JNIEXPORT 不包含' extern "C" ' - 因此，如果您的源文件是 C++，您的函数名称将被破坏（并且链接器将找不到它们）。

# javascript - document.cookie 的排序顺序是什么？

> ID：14833727
> 
> 赞同：1
> 
> 时间：2013-02-12T13:31:51.523
> 
> 标签：javascript, cookies

cookie 在 document.cookie 中的排序顺序是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:44:15.027

这完全取决于设置 cookie 的站点如何设置它们。

# iphone - 将 JSON 提取到 iOS 应用程序中

> ID：14833729
> 
> 赞同：1
> 
> 时间：2013-02-12T13:31:56.750
> 
> 标签：iphone, ios, json, parsing

[http://xtremeinspection.com/new2you4kids/app/android/get_category_brand.php](http://xtremeinspection.com/new2you4kids/app/android/get_category_brand.php)

上面是 JSON 的 URL。

我想在“PARENT_CATEGORY_ID”=“0”的 xcode 上显示数据。

我使用了以下编码：

```
-(void) loadJSON
{
loadJSONData = [NSURL URLWithString:mainURL];

    NSLog(@"Fetch JSON URL : %@",loadJSONData);

    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        loadJSONData];
        [self performSelectorOnMainThread:@selector(fetchedData:)
                               withObject:data waitUntilDone:YES];
    });
}

- (void)fetchedData:(NSData *)responseData
{
    NSError* error;
    json = [NSJSONSerialization
            JSONObjectWithData:responseData
            options:kNilOptions
            error:&error];
    adultJSON = [json objectForKey:@"category"];
    NSLog(@"Data: %@", adultJSON);

    NSDictionary *typeData = [json objectForKey:@"category"];
    categTypeArray = [[NSMutableArray alloc] initWithCapacity:0];
    for (NSDictionary *types in typeData)
    {
        if([[NSString stringWithFormat:@"%@",[adultJSON valueForKey:@"PARENT_CATEGORY_ID"]] isEqualToString:@"0"])
        {
            [categTypeArray addObject:[types valueForKey:@"PARENT_CATEGORY_ID"]];
        }
    }
    NSLog(@"Data: %@", adultJSON);
    NSLog(@"Category Data: %@", categTypeArray);
} 
```

但是categTypeArray 返回null。

我应该使用哪种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:53:51.483

错误在于以下代码：

```
if([[NSString stringWithFormat:@"%@",[adultJSON valueForKey:@"PARENT_CATEGORY_ID"]] isEqualToString:@"0"]) 
```

你写`adultJSON`而不是`types`.

将该代码更改为：

```
if([[NSString stringWithFormat:@"%@",[types valueForKey:@"PARENT_CATEGORY_ID"]] isEqualToString:@"0"]) 
```

# r - 如何创建具有高斯分布的随机 (x,y) 点？

> ID：14833730
> 
> 赞同：2
> 
> 时间：2013-02-12T13:32:00.650
> 
> 标签：r, random

我需要在 R 中创建一组 100 个高斯随机 (x,y) 点。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:33:25.487

看看`mvrnorm`MASS 包中的功能

```
library(MASS)
Sigma <- matrix(c(10,3,3,2),2,2)  # Covariance Matrix
set.seed(1)  # For the example to be reproducible
Random_XY <- mvrnorm(n=100, c(0, 0), Sigma) # Random (x,y) from a Gaussian distr.
head(Random_XY) 

           [,1]       [,2]
[1,]  2.3299984 -0.4196921
[2,] -0.2261965 -1.2474779
[3,]  2.3538800  1.7025069
[4,] -4.9527947 -1.8730622
[5,] -1.0148272 -0.4114252
[6,]  2.0557678  2.4378417 
```

**编辑**

由于高斯过程的均值为 0，方差为 1，相关性为零，因此正确答案应该是：

```
mvrnorm(n=100, c(0, 0), diag(c(1,1))) 
```

其中均值向量是`c(0,0)`和酉协方差矩阵`diag(c(1,1))`

正如@Ben Bolker 指出的那样，最快的方法（使用R Base 函数）是：

```
data.frame(x=rnorm(100),y=rnorm(100)) 
```

# java - 匹配包含重复字符的单词

> ID：14833732
> 
> 赞同：0
> 
> 时间：2013-02-12T13:32:01.387
> 
> 标签：java, regex

这是我的正则表达式：`"(?<=^|\\s)([a-z])\\1{3,}(?=\\s|$)"`。

我正在尝试匹配具有连续重复字符 > 2 的单词。

所以`wwhhaaaat bananas ffffuuuuuu this is a test`应该抓住`wwhhaaaat`and `ffffuuuuuu`。

当我在 java 中运行这个正则表达式时，它没有捕获任何东西。当我运行`([a-z])\\1{3,}`它时，它只捕获重复的字符。所以我弄乱了部分以匹配包含字符的单词。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:44:03.420

尝试

```
 Matcher m = Pattern.compile("[a-z]*([a-z])\\1{3,}[a-z]*").matcher("So wwhhaaaat bananas ffffuuuuuu this is a test");
    while(m.find()) {
        System.out.println(m.group());
    } 
```

印刷

```
wwhhaaaat
ffffuuuuuu 
```

# c++ - 使用链表复制堆栈的构造函数

> ID：14833733
> 
> 赞同：-5
> 
> 时间：2013-02-12T13:32:06.217
> 
> 标签：c++

```
template <class T>
Stack<T>::Stack(const Stack<T>& otherStack)
{
        List<T> the=otherStack.list;
        ListItem<T> *temp=the.getHead();
        while(temp!=NULL)
        {
                push(temp->value);
                temp=temp->next;
        }
} 
```

我正在使用链表制作堆栈，但我的复制构造函数不起作用。请有人帮忙。

的复制构造函数`List<T>`定义为：

```
template <class T>
List<T>::List(const List<T>& otherList)
{
    head=NULL;
    ListItem<T> *temp=otherList.head;

    while (temp!=NULL)
    {
        insertAtTail(temp->value);
        temp=temp->next;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:05:28.643

如果`List`并且`Stack`具有它们通常的语义，则您的构造函数会反转构造对象中项目的顺序。因此，您应该以相反的顺序遍历列表或进行两次这样的复制以恢复原始顺序。也`List`可以只用赋值运算符复制

```
this.list = otherStack.list 
```

足够的。但是没有看到`List`我无法分辨的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:37:30.490

假设`list`是`Stack`（因为它足够了）的唯一成员，并且`List`已经实现了正确的复制构造函数，您当前正在复制具有第一个赋值的列表：

```
template <class T>
Stack<T>::Stack(const Stack<T>& otherStack)
{
        List<T> the=otherStack.list;        // <-- list is copied
        ListItem<T> *temp=the.getHead();
        while(temp!=NULL)
        {
                push(temp->value);
                temp=temp->next;
        }
} 
```

在获取整个列表的副本后，您将该副本的元素推送到您的堆栈中。但是只需将列表复制到成员中（或者更好地说：使用 的列表进行`list`初始化）就足以复制整个堆栈：`list``otherStack`

```
template <class T>
Stack<T>::Stack(const Stack<T>& otherStack) :
    list (otherStack.list)  // <--- list is copied
{
} 
```

这很可能只是将问题“转移”到`List`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T13:37:30.567

代码片段不足以识别问题。例如行：

```
List<T> the=otherStack.list; 
```

制作列表的副本，如果链表实现是自定义的，则它的复制构造函数可能有问题。尝试

```
List<T> &the=otherStack.list; 
```

# mysql - MySQL 列 POINT 与 2x DECIMAL (lat & lng) 性能

> ID：14833734
> 
> 赞同：0
> 
> 时间：2013-02-12T13:32:13.363
> 
> 标签：mysql

我正在为一个将很快包含许多行的项目创建一个新的数据模型。在这方面，我正在考虑是否应该使用 MySQL`POINT`或`DECIMAL`存储 lat/lng 位置指示。

我知道不选择`POINT`会使我更难进行地理计算，因为我没有获得可用于字段的新内置地理功能`DECIMAL`，但我可以没有它们 - 因为地理选择将只与外盒模型`WHERE (lat BETWEEN 1 AND 2) AND (lng BETWEEN 0 AND 5)`

然而，我担心数据库的大小——**更重要的是：查询时间/性能**。

1.  POINT 是像 DECIMAL 这样的固定长度字段吗？
2.  将 POINT 或 2x DECIMAL 用于 lat/lng 会更有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:37:22.100

我使用 VARCHAR 来存储 lat/lng。MySql 对数学函数不是很好，所以我像 VARCHAR 和 php 脚本（或 java 脚本或 perl 脚本或你想要的）一样存储 lat/lng 进行计算......

# python - 在 PyDev 中打印到控制台

> ID：14833737
> 
> 赞同：2
> 
> 时间：2013-02-12T13:32:16.390
> 
> 标签：python, eclipse, console, pydev

我是 Eclipse 中 PyDev 的新手。在编写简单程序时，我经常使用 print() 语句来跟踪变量的值。我希望将这些值打印到控制台，但到目前为止我无法在控制台中打印任何值。

这是一段简单的代码来演示我正在尝试做的事情。

```
class MyClass(object):

  def __init__(self):

    myClassObject= MyClass()
    myClassObject.greet()

    def greet(self):
       print("stackoverflow is the best !!!") 
```

我希望在控制台中看到字符串“ *stackoverflow is the best !!!* ”，但是当我运行代码时，我什么也得不到。我应该做些什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:40:48.167

您尚未实例化该类。为了从您所拥有的内容中产生输出，请尝试以下操作：

```
if __name__ == '__main__':
  instance = MyClass() 
```

- 修改 -

根据您重写的代码，您应该具有以下内容：

```
class MyClass(object):
    def __init__(self):
        #myClassObject= MyClass() # Causes recursion error.
        #myClassObject.greet() # You should not be accessing your instance method this way
        self.greet()

    def greet(self):
        print("stackoverflow is the best !!!")

if __name__ == '__main__':
    instance = MyClass() 
```

您的示例似乎过于复杂。您最好回顾一下 Python 中的类使用情况，以用于[Python 2.7](http://docs.python.org/2.7/tutorial/classes.html)或[Python 3.3](http://docs.python.org/3.3/tutorial/classes.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:43:54.307

`__init__`在实例化类时调用（参见[this question](https://stackoverflow.com/questions/625083/python-init-and-self-what-do-they-do)）。`my_instance = MyClass()`在代码段末尾添加将创建`MyClass`该类的一个实例，并应打印出您想要的内容：

```
class MyClass(object):

  def __init__(self):
    print("stackoverflow is the best !!!")

my_instance = MyClass() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T18:49:19.417

我刚刚了解到我在问题中的代码部分毫无意义，因为我已经在`__init__(self)`. 所以必须在 a 中创建对象`if __name__ == '__main__':`。

我编写了一个完整的模块来演示这一点。（观察 Classes.py 模块中有多个类，然后在代码的第二部分导入）

```
'''
Classes.py
'''

class MyClass(object):  

    def greet(self):
        print("Hello World")

class MyNextClass(object):

        def greetAgain(self):
            print("Hello again") 
```

* * *

```
'''
MyMain.py
'''
import Classes

if __name__ == '__main__':

    a=Classes.MyClass()
    a.greet()

    b=Classes.MyNextClass();
    b.greetAgain() 
```

上面的代码很有意义，它会毫无问题地输出到控制台。

# javascript - 运行任何报告时，MS CRM 2011 汇总 12“语法错误”

> ID：14833738
> 
> 赞同：2
> 
> 时间：2013-02-12T13:32:17.623
> 
> 标签：javascript, dynamics-crm-2011, syntax-error

运行任何报告时，MS CRM 2011 汇总 12 显示“语法错误”

**表格 IE9：**

```
Microsoft Dynamics CRM Error Report Contents

<CrmScriptErrorReport>
 <ReportVersion>1.0</ReportVersion>
  <ScriptErrorDetails>
   <Message>Syntax error</Message>
   <Line>243</Line>
   <URL>/crmreports/viewer/viewer.aspx?action=filter&helpID=Account%20Distribution.rdl&id=%7b5E8B4D88-D520-E111-9657-00155DFEFD04%7d</URL>
   <PageURL>/crmreports/viewer/viewer.aspx?action=filter&helpID=Account%20Distribution.rdl&id=%7b5E8B4D88-D520-E111-9657-00155DFEFD04%7d</PageURL>
   <Function></Function>
   <CallStack>
   </CallStack>
  </ScriptErrorDetails>
  <ClientInformation>
   <ClientName>Web</ClientName>
   <ClientTime>2013-02-12T21:05:09</ClientTime>
  </ClientInformation>
  <ServerInformation>
    <CRMVersion>5.0.9690.3236</CRMVersion>
  </ServerInformation>
</CrmScriptErrorReport> 
```

**从铬：**

```
Microsoft Dynamics CRM Error Report Contents

<CrmScriptErrorReport>
  <ReportVersion>1.0</ReportVersion>
  <ScriptErrorDetails>
   <Message>Uncaught SyntaxError: Unexpected token .</Message>
   <Line>243</Line>
   <URL>/crmreports/viewer/viewer.aspx?action=filter&helpID=Account%20Distribution.rdl&id=%7b5E8B4D88-D520-E111-9657-00155DFEFD04%7d</URL>
   <PageURL>/crmreports/viewer/viewer.aspx?action=filter&helpID=Account%20Distribution.rdl&id=%7b5E8B4D88-D520-E111-9657-00155DFEFD04%7d</PageURL>
   <Function></Function>
   <CallStack>
   </CallStack>
  </ScriptErrorDetails>
  <ClientInformation>
   <ClientName>Web</ClientName>
   <ClientTime>2013-02-12T21:13:40</ClientTime>
  </ClientInformation>
  <ServerInformation>
    <CRMVersion>5.0.9690.3236</CRMVersion>
  </ServerInformation>
</CrmScriptErrorReport> 
```

在更新前工作（在汇总 11 上）。更新后立即停止工作（汇总 12）。

*   本地单服务器部署。
*   视窗服务器 2008 R2
*   SQL Server 2008 R2 SP2

在管理员用户下运行

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:13:46.250

问题解决了。

我已经手动更改了 viewer.aspx 文件，并且它没有被 rollup12 更新。所以我只是删除了这个文件并再次运行更新。它现在有效。

# c - 任何人都知道以下 C 代码中的错误是什么

> ID：14833741
> 
> 赞同：0
> 
> 时间：2013-02-12T13:32:21.383
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>
main()
{
    typedef struct
    {
        int info;
        struct strc* next_ptr;
    }strc;
    strc* strcVar[5];
    strcVar = malloc(sizeof(strc) * 5);
    strcVar[0]->info = 1;
    printf(" All is well ");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:34:44.020

`strcVar`是一个（本地）数组名称，您不能为其分配指针。你可能想要：

```
 strc* strcVar;
 ... /* and  later */
 strcVar[0].info = 1; 
```

也许您想要一个指向 的指针数组`struct strc`，那么 Vaughn Cato 的回答会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:34:44.357

此行是错误且不必要的：

```
strcVar = malloc(sizeof(strc) * 5); 
```

相反，您可以使用：

```
{
  int i=0;
  for (;i!=5; ++i) {
    strcVar[i] = malloc(sizeof(strc));
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T13:35:11.613

您不能从其中分配一个数组`malloc`- 它是一个或另一个。如果您声明了一个包含五个指针的数组，则它们的内存已经分配。如果必须使用`malloc`，请使用指向指针的指针而不是数组。否则，用 分配单个项目`malloc`，而不是数组：

```
strc* strcVar[5];
strcVar[0] = malloc(sizeof(strc)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T13:37:45.920

Change

```
 strc* strcVar[5]; 
```

to

```
 strc* strcVar;
 strcVar = malloc(sizeof(strc) * 5);
 strcVar[0].info = 1; 
```

**OR**

Change

```
strc* strcVar[5];
strcVar = malloc(sizeof(strc) * 5);
strcVar[0]->info = 1; 
```

to

```
strc strcVar[5];
strcVar[0].info = 1; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T13:37:31.253

**修复代码：**

```
#include<stdio.h>
#include<stdlib.h>
void main()
{
    typedef struct
    {
        int info;
        struct strc* next_ptr;
    }strc;
    strc* strcVar;
    strcVar = malloc(sizeof(strc) * 5);
    strcVar[0].info = 1;
    printf(" All is well ");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T15:37:55.633

在任何数组中，基地址都是一个 const 指针。你不能改变它。

假设如果你有 int a[5];

这里 a 是整个数组的基指针，你不能改变它。

这适用于所有数组。

# git - Git-shell: git-shell-commands 应该存在而不是“你认为我是什么？一个外壳？”

> ID：14833746
> 
> 赞同：6
> 
> 时间：2013-02-12T13:32:32.023
> 
> 标签：git, ubuntu, repository

[我正在尝试按照本文档](http://git-scm.com/book/ch4-4.html)中的描述在 Ubuntu 12.04 上设置我的 git 服务器。我的 ssh 密钥工作正常，并且我已将 git 帐户的外壳更改为使用`/usr/bin/git-shell`.

根据该文件，我现在应该期望看到“你认为我是什么？一个外壳？”，但实际上我看到了 ubuntu 通常的外壳介绍，然后是以下内容：

```
fatal: Interactive git shell is not enabled.
hint: ~/git-shell-commands should exist and have read and execute access. 
```

据我了解，如果我要在那里解决目录问题，我只会得到一些 git 提示而不是我正在寻找的消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T23:10:09.493

Git 1.7.4 只是改进了 git-shell 的功能，所以现在它以不同的方式呈现。另请参阅[https://github.com/git/git/commit/e69164ddb9d6092a94915bb984749d48f598cea8](https://github.com/git/git/commit/e69164ddb9d6092a94915bb984749d48f598cea8)

如文档中所述，您已正确设置服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-21T11:05:10.367

在源代码目录中有一个 /contrib 目录，在里面你会找到一个 /git-shell-commands/* 将该目录复制到 git 用户的主页并更改该目录和其中文件的所有者。

它应该可以正常工作。

# javascript - 如果 div 空附加不起作用

> ID：14833757
> 
> 赞同：0
> 
> 时间：2013-02-12T13:33:09.440
> 
> 标签：javascript, jquery

我有一个 div，其中可以包含 n 个 div，但也可以为空。如果 div 为空，则可以在其中没有项目时加载，或者当用户通过单击关闭删除其中的项目时，应该会出现诸如“您已选择 0 个项目”之类的消息。

我的想法是尝试这个：

```
if ($('.container').length == 0) {
    $(this).append('<p class="empty">You have selected 0 items</p>');
}; 
```

但这不起作用？我究竟做错了什么？

代码：http: [//jsfiddle.net/Nj5vx/1/](http://jsfiddle.net/Nj5vx/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:36:28.137

当你这样做时`$('.container')`，它会选择上面`<div>`带有类的元素`container`，并返回一个包含该元素的 jQuery 对象。当您访问其`length`属性时，您将获得匹配的元素数量，而不是这些元素中的元素数量。

你想要的是：

```
$('.container .item').length 
```

这将在具有 class`item`的元素内选择具有 class 的元素`container`。如果`.container`元素为空（没有`.item`元素），则`length`属性将为`0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:39:52.743

Check my jsFiddle of the solution [http://jsfiddle.net/Nj5vx/4/](http://jsfiddle.net/Nj5vx/4/)

What i did is to call a function to remove items then count how many they exists, if zero then show the message:

```
$(".close").click(function(){
    $(this).parents('.item').fadeOut(200, function(){
        $(this).remove();
        if ($('.container .item').length == 0) {
            $('.container').append('<p class="empty">You have selected 0 items</p>');
        };    
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T13:43:53.700

试试这个：http: [//jsfiddle.net/5Yftg/](http://jsfiddle.net/5Yftg/)

```
$(".close").click(function () {
    $(this).parents('.item').fadeOut(200, function () {
        if ($('.container > .item :visible').length == 0) {
            $('.container').append('<p class="empty">You have selected 0 items</p>');
        };
    });
}); 
```

由于您要隐藏 div，因此请寻找可见的 div...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:38:32.487

*   fadeOut is asynchronous
*   you need to update the list each time am item is removed

[http://jsfiddle.net/charlesbourasseau/Nj5vx/3/](http://jsfiddle.net/charlesbourasseau/Nj5vx/3/)

```
$(".close").click(function(){
    $(this).parents('.item').fadeOut(200, function() {
        $(this).remove();
        update();
    });

});

var update = function() {
    if ($('.container div').length == 0) {
        $('.container').append('<p class="empty">You have selected 0 items</p>');
    };
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T13:37:17.347

您正在检查 div 容器的长度。它总是存在的不是吗？据我了解，您需要检查里面物品的长度。像这样：

```
if ($('.container .item').length == 0) {
    $(this).append('<p class="empty">You have selected 0 items</p>');
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T13:39:17.197

The length in this case is referring to a property on the returned `jQuery` object. It tells you how many elements on the page matched your, for lack of a better phrase search criteria:

```
I.E.
'.container .item' 
```

In this case, you code is telling jQuery to search the DOM and when you find no elements, append to that no element.

# java - 如何从 DAO 数组列表中获取数据？

> ID：14833761
> 
> 赞同：0
> 
> 时间：2013-02-12T13:33:22.327
> 
> 标签：java, arraylist, dao

我正在尝试创建一种方法来从我的 DAO arraylist 类中读取数据。我希望当前索引位置的数据显示在某些文本字段中。我的问题是我不知道如何创建我的方法来从我的 DAO arraylist 类中获取数据。顺便说一句，我是瑞典人，这就是 wied 方法名称的原因。

```
private void visaBil() {

    DTOBil[] bilar = dao.getAllDTOBil();

    for(DTOBil bil : bilar){
        text1.setText(bil.get(index).regnr);
        text2.setText(bil.get(index).marke);
        text3.setText(bil.get(index).modell);
        text4.setText(bil.get(index).sokVag);

        String source = text4.getText();

        try {

            jlBilder.setIcon(new ImageIcon(new URL(source)));

        } catch (MalformedURLException mue) {}
    }
} 
```

我的 DAOArarylist 类（不是全部）

```
public class DAOBilArrayList implements DAOBil{
private ArrayList<DTOBil> dtoBilar;

public DAOBilArrayList(){

    dtoBilar = new ArrayList<DTOBil>();

    dtoBilar.add(new DTOBil("ABC123", "Citroen", "C4", "http://www.carsuk.net/wp-content/uploads/2011/09/Citroen-C4-Aircross-100x100.jpg"));
    dtoBilar.add(new DTOBil("DEF456", "Audi", "RS4", "http://www.carsuk.net/wp-content/uploads/2011/09/Audi-RS4-Avant-2013-Spy-Video-100x100.jpg"));
    dtoBilar.add(new DTOBil("GHH123", "BMW", "730Ld", "http://www.carsuk.net/wp-content/uploads/2011/09/BMW-730Ld-Chauffeur-100x100.jpg"));

}

@Override
public void create(DTOBil dtobil) {
    dtoBilar.add(dtobil);
}    

@Override
public DTOBil[] getAllDTOBil() {
    return dtoBilar.toArray(new DTOBil[dtoBilar.size()]);
} 
```

我该怎么做才能让我的签证方法从我的 DAO 类中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:14:25.793

我想我看到了你的问题。

使用时`for(DTOBil bil : bilar) {}`，您不需要索引变量。`bil`已经指向数组的一个元素，并且会自行递增。

尝试使用`bil.regnr`or `bil.getRegnr()`，就像 Windle 说的那样。

# asp.net-mvc - Asp.net Mvc 内置控件

> ID：14833763
> 
> 赞同：0
> 
> 时间：2013-02-12T13:33:24.867
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

Asp.net Mvc 是否有任何内置控件，例如**Tab、DatePicker、Listbox、Combobox、Menu、Treeview**？我应该在项目中使用它们，但似乎找不到它们。不，我不是指 jQueryUi 控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:16:17.790

直接回答你的问题，不，没有。

# linux - 使用 linux 终端执行 sublime 时遇到麻烦

> ID：14833771
> 
> 赞同：0
> 
> 时间：2013-02-12T13:33:49.270
> 
> 标签：linux, unix, ubuntu, terminal, sublimetext2

我知道有人问了一些类似的问题，但似乎没有一个对我有帮助，所以就这样吧。当我在 Linux 终端中使用“subl”时，我试图让 sublime 运行，但我就是无法让它工作。我试过

```
sudo ln -s /Applications/Sublime\ Text\ 2/sublime_text usr/bin/subl 
```

并且确实正确地创建了文件，所以看起来，但是当我使用 subl 命令时，它说“没有找到命令 'subl'。” 现在我已经安装了 rvm，所以这可能会有所不同。我也试过'usr/local/bin/subl'，结果是一样的。之后我什至在上面的命令中使用了 rvmsudo，它说文件已经创建，但是 subl 命令仍然不起作用。我在这里想念什么？请记住，我 a) 是 linux 的新手 b) 是 sublime 的新手。如果重要，请运行 ubuntu 12.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:45:14.330

我使用的是 Linux Mint 13，但对你来说应该是类似的。`cd`进入*/usr/bin*。应该有一个名为*sublime-text-2*的文件。复制该文件并命名为*subl*。然后`subl`命令应该可以在终端中使用。

```
cd /usr/bin
sudo cp sublime-text-2 subl 
```

以防万一，这是文件的内容：

```
#!/bin/bash

/usr/lib/sublime-text-2/sublime_text --class=sublime-text-2 "$@" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:19:34.827

兄弟，你必须更新你的路径。这可能比使用软链接更容易`ln -s`。进入您的`~/.bashrc`并在底部某处添加`export PATH=$PATH:/path/to/your/binary`.

那么你所要做的就是`. ~/.bashrc`瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:21:39.673

我想你有一个错字。它应该是

```
sudo ln -s /Applications/Sublime\ Text\ 2/sublime_text /usr/bin/subl 
```

注意`/`前面的`usr`。如果您告诉终端`usr/bin/subl`，它会将其作为相对路径，并参考您执行此命令时所在的目录创建它。

# math - 为什么我们需要在做 2 的补码时加 1

> ID：14833773
> 
> 赞同：5
> 
> 时间：2013-02-12T13:33:56.870
> 
> 标签：math, bit-manipulation, twos-complement

由 N 位表示的数字的 2 的补码是 2^N 数。
例如：如果数字是 7 (0111) 并且我使用 4 位来表示它，那么它的 2 的补码将是 (2^N-number) 即 (2^4 -7)=9(1001)

```
7==> 0111
1's compliment of 7==> 1000
1000
+  1
-------------
1001 =====> (9) 
```

在计算数字的 2 的补码时，我们执行以下步骤： 1\. 对数字 2\. 进行反码 2\. 将步骤 1 的结果加 1。

我知道我们需要对数字进行补码，因为我们正在进行求反操作。但是为什么我们要加 1 呢？

这可能是一个愚蠢的问题，但我很难理解其中的逻辑。用上面的例子来解释（对于数字 7），我们做一个补码得到 -7 然后加 +1，所以 -7+1=-6，但我们仍然得到正确的答案，即 +9

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T13:43:17.863

您的错误在于“我们恭维并得到-7”。要了解为什么这是错误的，请取 7 的补码并在其上加 7。如果是 -7，你应该得到零，因为 -7 + 7 = 0。你不会。

7 的反码是`1000`. 再加上 7，你得到`1111`. 绝对不是零。你需要再加一个才能得到零！

数字的负数是您需要添加到它以得到零的数字。

如果你`1`加到`...11111`，你得到零。因此，-1 表示为全 1 位。

如果您将一个数字（例如`x`）添加到其 1 的补码`~x`中，您将得到所有 1 位。

因此：
~x + x = -1

两边加 1：
~x + x + 1 = 0

从两边减去 x：
~x + 1 = -x

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T13:51:34.960

添加 +1 以便处理技术中的结转。

以 7 和 -7 为例。

如果您将 7 表示为`00000111`

为了找到-7：

反转所有位并加一

`11111000 -> 11111001`

现在您可以添加以下标准数学规则：

```
 00000111
+ 11111001
 -----------
  00000000 
```

对于计算机来说，这个操作相对容易，因为它基本上涉及到逐位比较和携带一个。

相反，如果您将 -7 表示为 10000111，这将没有意义：

```
 00000111
+  10000111
  -----------
   10001110 (-14) 
```

要添加它们，您将涉及更复杂的规则，例如分析第一位和转换值。

[更详细的解释可以在这里找到。](http://www.cs.cornell.edu/~tomf/notes/cps104/twoscomp.html#whyworks)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-12T22:23:03.887

**简短的回答：**如果你不添加`1`，那么你有两个不同的数字表示`0`。

**更长的答案：**在一个互补

*   从到的值表示从`0000`到`0111`的数字`0``7`

*   从到的值表示从`1111`到`1000`的数字`0``-7`

    *   因为它们的倒数是`0000`和`0111`。

**有问题**，现在你有两种不同的方式来写相同的数字，两者`0000`都`1111`代表`0`。

如果您将 1 加到这些倒数上，它们将变为`0001`并`1000`表示从`-1`to的数字，`-8`因此您可以避免重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-15T20:54:49.143

我将直接回答标题所要求的内容（抱歉，细节对每个人来说并不像理解翻转位+加一个来自何处那样普遍）。

首先让我们回顾一下我们可以用它们进行标准（小学）算术（即添加数字和进行结转等）的事实来激发[二进制补码。](https://stackoverflow.com/questions/1049722/what-is-2s-complement)易于计算是这种表示的动机（我假设这意味着我们只有 1 个硬件来做加法而不是 2 如果我们以不同的方式实现减法而不是加法，并且我们在小学加法中以不同的方式做和减法）。

现在回想一下二进制补码中每个数字的含义以及这种形式的一些二进制数作为示例（[幻灯片来自麻省理工学院的 6.004 课程](https://www.youtube.com/watch?v=RbJV-g9Lob8)）：

[![在此处输入图像描述](../Images/a1cdbd3fd2705d9fcec4b849c40d7c1b.png)](https://i.stack.imgur.com/JyNeR.png)

现在请注意，算术在这里正常工作，符号包含在二进制补码本身的二进制数中。特别注意：

`1111....1111 + 0000....1 = 000....000` IE `-1 + 1 = 0`

利用这个事实，让我们尝试推导出两个补码表示`-A`应该是什么。所以要解决的问题是：

问：给定二进制补码表示，二进制补码表示`A`什么`-A`？

为此，让我们使用我们知道的值做一些代数：

`A + (-A) = 0 = 1 + (-1) = 11...1 + 00000...1 = 000...0` 现在让我们`-A`用二进制补码表示的数字表示主题： `-A = 1 + (-1 - A) = 000.....1 + (111....1 - A)` where `A`is in two's补码。所以我们需要计算的是二进制补码格式中-1和A的减法。为此，我们注意到数字如何表示为其基数的线性组合（即`2^i`）：

`1*-2^N-1 + 1 * 2^N-1 + ... 1 = -1`

`a_N * -2^N-1 + a_N-1 * 2^N-1 + ... + a_0 = A`

`--------------------------------------------- (subtract them)`

`a_N-1 * -2^N-1 + a_N-1 -1 * 2^N-1 + ... + a_0 -1 = A`

这实质上意味着我们减去每个数字的对应值。这最终只是简单地翻转位，导致以下结果：

`-A = 1 + (-1 - A) = 1 + ~ A`

`~`位翻转在哪里。这就是为什么您需要位翻转并加 1。

* * *

评论：

我认为对我有帮助的评论是补码类似于逆，但不是给`0`它`2^N`（根据定义），例如，`A`我们想要的数字是`A+~A=2^N`3位。至少这澄清了“补语”这个词在这里的含义，因为它不仅仅是和的含义的反转。`010 + 110 = 1000 = 8``2^3``0``1`

* * *

如果您忘记了二进制补码是什么，这可能会有所帮助：[什么是“2 的补码”？](https://stackoverflow.com/questions/1049722/what-is-2s-complement)

* * *

我希望在某个时候阅读康奈尔的答案：[https ://www.cs.cornell.edu/~tomf/notes/cps104/twoscomp.html#whyworks](https://www.cs.cornell.edu/%7Etomf/notes/cps104/twoscomp.html#whyworks)

# ios - 显示呈现部分卷曲的视图控制器

> ID：14833775
> 
> 赞同：1
> 
> 时间：2013-02-12T13:34:03.103
> 
> 标签：ios, uiviewcontroller, uistoryboardsegue

我有一个带有多个文本字段/文本视图的视图控制器，并希望允许用户使用他们在网络上找到的内容填充这些字段。为此，我以模态方式呈现了不同的 Web 视图。我的问题是我想使用部分页面卷曲来显示第一个视图控制器（带有任何填充信息）。但是，您不能再次显示实时视图控制器，并且新实例不会预先填充文本字段中已放置的任何信息。

似乎我可以来回传递该信息（从第一个实例到第二个视图控制器，然后将信息复制到第二个实例中，然后在我关闭第二个实例时复制回来，等等）但似乎在那里应该是更好的方法。

我也可以将 Web 视图控制器添加为子视图，但我错过了我非常喜欢的部分卷曲的功能。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:06:10.190

> 但是，您不能再次显示实时视图控制器，并且新实例不会预先填充文本字段中已放置的任何信息。

您不需要每次都创建一个新的视图控制器。只需将该视图控制器对象存储为实例变量，在用户完成之前不要释放它。

```
if (myViewController == nil) {
    myViewController = [UIViewController alloc] init];
}
[self presentViewController:myViewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:15:35.497

因此，我将评论和发布的答案结合在一起。

首先：我将 vc 的实例与 web 视图一起存储，并将其视图添加到第一个视图控制器，然后隐藏视图：

```
self.webVC = [self.storyboard instantiateViewControllerWithIdentifier:@"webView"];
self.webVC.delegate = self;
self.webVC.view.frame = self.view.bounds;
[self.view addSubview:self.webVC.view];

[self.webVC.view didMoveToSuperview];
self.findPoemVC.view.hidden = YES; 
```

然后我在 UIView 上使用了一个类别来展开和卷曲视图。[我在这里](http://pushchen.com/partial-curl-on-uiview-not-uiviewcontroller/)找到了代码：

为了显示视图，我执行了一个 CurlDown 动画，如下所示：

```
 self.findPoemVC.view.hidden = NO;
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlDown
                       forView:self.webVC.view
                         cache:YES];

self.webVC.view.hidden = NO;
[UIView commitAnimations]; 
```

在 webVC 上，我实现了一个协议并在第一个视图控制器中实现了委托方法：

在 webVC 中：

```
@protocol PoemFinderDelegate <NSObject>
    -(void)shouldUncurl;
    -(void)doneWasPressed;
@end 
```

较早地设置了委托（见上文），并且在第一个视图控制器中完成了部分展开和完全展开 webview 的委托方法的实现：

```
-(void)shouldUncurl{
    [self.webVC.view animationPartialCurlUp];
}
-(void)doneWasPressed{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.50];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp
                           forView:self.webVC.view
                             cache:YES];

    self.webVC.view.hidden = YES;
    [UIView commitAnimations];
} 
```

# guice - 带有 Providers 的 guice multibinder

> ID：14833777
> 
> 赞同：1
> 
> 时间：2013-02-12T13:34:09.820
> 
> 标签：guice

我试图能够在我的代码中有这个

```
@Inject
private Map<String, Provider<Processor>> providers; 
```

我正在尝试，但这段代码无法编译

```
MapBinder<String, Provider<Processor>> mapbinder = MapBinder.newMapBinder(binder, String.class, Provider<Processor>.class);
mapbinder.addBinding("splineV1Beta").to(SplineProcessor.class);
mapbinder.addBinding("invertV1Beta").to(InvertProcessor.class); 
```

此代码在启动时失败，因为它无法绑定我的地图

```
MapBinder<String,Processor> mapbinder = MapBinder.newMapBinder(binder, String.class, Processor.class);
mapbinder.addBinding("splineV1Beta").to(SplineProcessor.class);
mapbinder.addBinding("invertV1Beta").to(InvertProcessor.class); 
```

如何在此处正确设置绑定？

注意：我也在寻找简单的东西，所以每次我们有一个新处理器时开发人员只需添加一行。（我希望我不必添加一行+一些工厂接口......应该是一种方式，但我除了上面的 TypeLiteral 和 toProvider() 方法之外，还尝试了其他方法）。

更多信息：好的，我发现我是否有以下行（但根本不调用 addBinding）Guice 实际上会启动，这很好，但是所有 addBinding().to 方法签名现在都是错误的，因为他们想要一个

```
Provider<? extends Provider<Processor>>
//This below line ends up with mabbinder2.addBinder().to() wanting the above param type?
MapBinder<String, Provider<Processor>> mapbinder2 = MapBinder.newMapBinder(binder, stringLit, list); 
```

从根本上改变我的想法，我尝试注入这样的东西（希望 map.get("xxx") 每次都会创建新实例......

```
@Inject
private Map<String, Processor> providers; 
```

我像这样绑定它，但不幸的是，地图总是返回相同的实例:(...

```
MapBinder<String, Processor> mapbinder = MapBinder.newMapBinder(binder, String.class, Processor.class);
mapbinder.addBinding("splineV1Beta").toProvider(new TypeLiteral<Provider<SplineProcessor>>() {;});
mapbinder.addBinding("invertV1Beta").toProvider(new TypeLiteral<Provider<InvertProcessor>>() {;}); 
```

编辑：根据这个文档[http://google-guice.googlecode.com/svn/trunk/latest-javadoc/com/google/inject/multibindings/MapBinder.html](http://google-guice.googlecode.com/svn/trunk/latest-javadoc/com/google/inject/multibindings/MapBinder.html)你可以有一个

```
 MapBinder<String, Snack> and inject a Map<String, Provider<Snack>> 
```

但是当我这样做（使用私有字段）时，我得到以下内容......（而当我更改为我的其他解决方案但不调用 mapbinder.addBinding 时，它绑定并工作得很好）......

```
1) No implementation for java.util.Map<java.lang.String,    
javax.inject.Provider<controllers.modules2.framework.Processor>> was bound. 
```

我是否必须使用构造函数注入才能像他们的示例一样工作？我在一个抽象类中，因此更改 10 个类会非常不方便:(。

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:56:25.147

尽管 Guice 似乎非常擅长交替使用 JSR-330 注释，但 Multibindings 似乎将`Provider`类型隐藏在 a 中`Map`，因此可能希望注入 a `java.util.Map<java.lang.String, com.google.inject.Provider<...>>`。我无法重现您的问题，但请尝试一下，看看它是否有帮助。

旁注：如果您想避免在任何地方的代码中更改它，您可以将提供者绑定`Map<String, javax.inject.Provider<Foo>>`到接受 multibinder-created 的东西`Map<String, com.google.inject.Provider<Foo>>`。如果我是对的并且这就是问题所在，那么您可以在一个地方修复它，而不是在各处之间`javax.inject`弹跳`com.google.inject`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T22:32:20.240

如果你想`Map<String, Provider<Processor>>`在注入点，绑定它的方法是：

`MapBinder<String, Processor> mapbinder = MapBinder.newMapBinder(binder, String.class, Processor.class); mapbinder.addBinding("splineV1Beta").to(SplineProcessor.class); mapbinder.addBinding("invertV1Beta").to(InvertProcessor.class);`

如果您提供自定义提供程序，您将使用`toProvider()`，但您不是，即您只是尝试使用隐式底层提供程序。

# android - 不同风格的导航 - 手机与平板电脑？

> ID：14833781
> 
> 赞同：0
> 
> 时间：2013-02-12T13:34:25.507
> 
> 标签：android, android-fragments

我在 Fragments API 方面相当出色，我知道如何在手机/平板电脑上创建主/细节模式。 **但是我如何在手机和平​​板电脑中创建不同风格的导航呢？**

最明显的例子是手机上的滑动标签和某种平板电脑布局，所有片段都放在里面，没有滑动标签。

除了巨大的 if 语句之外，还有其他优雅的方法吗？

![在此处输入图像描述](../Images/fdf69a341fadb9944efed71ab2e651d1.png)

**//编辑**

所以你会做什么，正如我推测的那样，创建两个布局（手机 - 查看寻呼机/平板电脑 - 三个静态片段）并在活动的 onCreate 检查布局中的某些内容以确定你是在手机还是平板电脑中。**如果您在平板电脑中，则只需初始化标签导航/或不初始化。**那应该行得通。

*来自 IO 2012 应用程序的代码片段*

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_home);
    FragmentManager fm = getSupportFragmentManager();

    mViewPager = (ViewPager) findViewById(R.id.pager);
    if (mViewPager != null) {
        // Phone setup
        mViewPager.setAdapter(new HomePagerAdapter(getSupportFragmentManager()));
        mViewPager.setOnPageChangeListener(this);

        final ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.addTab(actionBar.newTab()
                .setText(R.string.title_my_schedule)
                .setTabListener(this));
        actionBar.addTab(actionBar.newTab()
                .setText(R.string.title_explore)
                .setTabListener(this));
        actionBar.addTab(actionBar.newTab()
                .setText(R.string.title_stream)
                .setTabListener(this));

        homeScreenLabel = getString(R.string.title_my_schedule);

    } else {
        //Tablet setup
        mExploreFragment = (ExploreFragment) fm.findFragmentById(R.id.fragment_tracks);
        mMyScheduleFragment = (MyScheduleFragment) fm.findFragmentById(R.id.fragment_my_schedule);
        mSocialStreamFragment = (SocialStreamFragment) fm.findFragmentById(R.id.fragment_stream);
    }
} 
```

任何在手机上已经有标签导航的人，请考虑在平板电脑上实现它，如果它适合你的设计。你已经准备好了 Fragments api，所以真的没有任何借口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:57:52.617

你可以看看 Roman Nurik 的 2012 I/O 应用程序，它几乎可以根据大小和方向的所有可能组合来切换导航/布局；

[http://code.google.com/p/iosched/](http://code.google.com/p/iosched/)

# javascript - 适用于各种应用的 Javascript 或 RoR？

> ID：14833783
> 
> 赞同：2
> 
> 时间：2013-02-12T13:34:28.760
> 
> 标签：javascript, ruby, web

我对 Web 开发相当陌生，但渴望开始学习如何构建 Web 应用程序。我的计划是现在我可以完全专注于一种语言，以便在未来 6 个月内，我将有足够的能力构建“广泛”的网络应用程序。

这些应用程序可以是简单的计算器或交互式构建器，例如；

> [http://www.extreme.outervision.com/psucalculatorlite.jsp](http://www.extreme.outervision.com/psucalculatorlite.jsp)
> [Apple Store 产品构建器](http://store.apple.com/au/configure/MD104X/A?)

到像 Groupon 这样的成熟服务。

经过一些研究（而不是 Python/Django），我选择了**Ruby on Rails 。**但后来意识到它不是最适合我想要完成的小型应用程序。

另一方面，我注意到*可以*使用**Javascript**构建许多更大、更复杂的服务。这让我想到我可以全身心地投入到 Javascript 中，并有能力在几个月内开发出我上面提到的所有类型的应用程序。不过，与其浪费我生命中接下来的 6 个月（也许与其说是浪费不如说是分配不当），我想我会问一些专家。

**那么，学习纯 Javascript 是否可以让我创建大小范围从小型计算器到 Groupon/Twitter 大小的服务的应用程序，还是我需要学习 RoR？**

提前感谢您的帮助！如果我也没有正确地表达这个问题，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:40:45.063

### 学习 JavaScript 和 Ruby on Rails。

它们是互补的技术。

对于“小型计算器”，您可能希望使用 JavaScript，因为一切都可能在客户端（在 Web 浏览器中）完成，而不是往返于服务器。

对于需要持久性数据库、与第三方 API 通信、专门计算等的任何后端工作（在 Web 服务器上），您将需要使用 RoR。

通过熟练掌握前端技术（HTML/CSS/JavaScript）和后端（Ruby on Rails），您将在“有能力构建‘广泛’范围的网络应用程序”的计划方面取得良好进展。

# git - 如何在Git中递归删除指定文件夹中的某些文件扩展名

> ID：14833784
> 
> 赞同：0
> 
> 时间：2013-02-12T13:34:29.730
> 
> 标签：git, recursion

有谁知道 git 命令窗口中的替代命令行？

```
del *.orig /s 
```

（所以删除所有扩展名为 .orig recursive 的文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:40:46.203

您不必使用 xargs 来完成此操作...

`find . -name *.orig -exec git rm -r --cached {} \;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T13:37:47.750

Looks like you're running in windows? If you're using git bash, you can do:

```
find -name *.orig | xargs rm 
```

# php - 如何从 php 注册 ejabberd 用户？

> ID：14833785
> 
> 赞同：3
> 
> 时间：2013-02-12T13:34:30.007
> 
> 标签：php, linux, ubuntu, ejabberd

我从堆栈中找到了一个代码，用于使用 php 在 ejabberd xmpp 聊天服务器中执行注册命令。（[从 PHP 创建 ejabberd 用户](https://stackoverflow.com/questions/1626897/create-ejabberd-user-from-php)）

我还在 ubuntu linux server 12.0 的“/etc/sudoers”文件中添加了“www-data ALL=NOPASSWD:/usr/sbin/ejabberdctl”行

但是当我执行文件时出现错误：

“read_passphrase：无法打开/dev/tty：没有这样的设备或地址主机密钥验证失败。”

我使用的php代码如下：

```
`<?php
$username = 'tester';
$password = 'testerspassword';
$node = 'myserver.com';
exec('sudo /usr/sbin/ejabberdctl register '.$username.' '.$node.' '.$password.' 2>&1',$output,$status);
if($output == 0)
{
    // Success!
}
else
{
    // Failure, $output has the details
    echo '<pre>';
    foreach($output as $o)
    {
        echo $o."\n";
    }
    echo '</pre>';
}
?>` 
```

请帮我！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-08T13:38:41.303

嗨以下代码对我有用..

只需更改上述代码中的一行

`exec('sudo -u ejabberd ejabberdctl register '.$username.' '.$node.' '.$password.' 2>&1',$output,$status);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-10T19:01:42.787

该部分`sudo -u ejabberd`表示命令应在拥有您的`ejabberd`进程的用户内执行。通常这应该是一个非特权用户，但也许你的用户被称为不同的，或者你甚至可能使用 root。在后一种情况下，命令应如下所示：

```
exec('sudo -u root ejabberdctl register '.$username.' '.$node.' '.$password.' 2>&1',$output,$status); 
```

请注意，出于安全原因，外部网络（如互联网）可访问的运行服务不应以 root 身份运行！

# jsp - 试图获取 JSF 支持 bean 的 URL 参数

> ID：14833786
> 
> 赞同：0
> 
> 时间：2013-02-12T13:34:34.423
> 
> 标签：jsp, jsf, url, xhtml, parameter-passing

我正在输入以下网址并添加以下内容

?用户ID=XBBBB

我试图通过 index.jsp 到 proauth.xhtml 并进入我的 ProfileAuthorizationBean.java 的支持 bean 的 XBBBB 的用户 ID。

代码一直通过，但是在 index.jsp 之后 UserID=XBBBB 参数丢失了。IOW，index.jsp 中的 System.out 正在将 XBBBB 打印到控制台，我相信正在转发到 proauth.xhtml。当我在 ProfileAuthorizationBean 中使用 HttpServletRequest 时，UserID 的参数不存在。

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="ISO-8859-1" %>
<html>
<head></head>
<body></body>
<%
request.setCharacterEncoding("UTF-8");
String UserID = request.getParameter("UserID");
if (UserID != null) {
   System.out.println(UserID);
   response.sendRedirect("proauth.xhtml?UserID=" + UserID);
}
%>
</html>

<!DOCTYPE html>
<html xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:c="http://java.sun.com/jsp/jstl/core">
 <h:head>
  <link rel="stylesheet" type="text/css" href="themes/local/tinstyle.css"/>
 </h:head>
 <script type="text/javascript">
 function doSubmit() {
  document.getElementById('proAuthForm:proAuthBtn').click();
 }
 </script>
 <h:body onload="doSubmit()">
 <h:form id="proAuthForm">
<p:commandButton id="proAuthBtn" value="" action="#{profileAuthorizationBean.doProfileAuth}" ajax="false" />  
 </h:form>
 </h:body>
</html>

public String doProfileAuth() {
 String retValue = "landingPage";
 try {

   HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
   System.out.println(request.getParameter("UserID"));
.
.
.
} catch (Exception e) {
}
} 
```

# sql - 如何使用 ASP 经典连接到本地数据库 :(

> ID：14833787
> 
> 赞同：0
> 
> 时间：2013-02-12T13:34:35.900
> 
> 标签：sql, asp-classic

我已使用字符串 (LocalDb)\v11.0 通过 SQLSMS 连接到本地数据库

它打开了一个连接，我可以添加一个数据库。

在我的 ASP 经典代码中（不要问：（C#.NET FTW！.. 该死的客户端）我有以下代码：

```
objConn.ConnectionString = "Provider=SQLOLEDB;Persist Security Info=True;Data Source=(LocalDb)\v11.0;Initial Catalog=databasename" 
```

它返回此错误：无效的授权规范

我不知道要为 User Id 和 Password 参数输入什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:00:15.047

为此，您需要使用 SQL 服务器身份验证：

```
objConn.ConnectionString = "User ID=<sql server user id>;Password=<password for sql server user>;Initial Catalog=<database>;Data Source=<database server\instance name>;Provider=SQLOLEDB" 
```

实际上看起来有一个以前的问题['SQL Server 2012 classic asp connection string'](https://stackoverflow.com/questions/10972481/sql-server-2012-classic-asp-connection-string)可能会更详细地介绍这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-12-01T11:52:12.577

这是一个示例连接字符串（SQL Server 2014 on `localhost`）：

```
cnstring = "Provider=SQLOLEDB.1;Data Source=.\sqlexpress;Initial Catalog=dATABASEnAME;UID=sqlsERVERUser;PWD=yourPassword;" 
```

# c# - 用 dll 中的实体框架聚合异常

> ID：14833788
> 
> 赞同：0
> 
> 时间：2013-02-12T13:34:39.620
> 
> 标签：c#, entity-framework, validation, dll

在工作中，我们希望迁移到 ORM（仍在使用 ADO 的 access 数据库！）我开始使用实体框架进行构建，一切进展顺利，直到我将其分离到自己的 .dll 中（这样我们就可以拥有网站/crm /production/barcoding 系统都使用相同的数据库逻辑）。

问题来自处理 DbEntityValidationExceptions，我的初始测试代码（有效）

```
public override int SaveChanges(System.Data.Objects.SaveOptions options)
        {
            try{return base.SaveChanges(options);}
            catch (DbEntityValidationException dbEx)
            {
                foreach (var validationErrors in dbEx.EntityValidationErrors)
                {
                    foreach (var validationError in validationErrors.ValidationErrors)
                    {
                        Trace.TraceInformation("Class: {0}, Property: {1}, Error: {2}",
                            validationErrors.Entry.Entity.GetType().FullName,
                            validationError.PropertyName,
                            validationError.ErrorMessage);
                    }
                }
                //handle here
                throw;
            } 
        } 
```

但这现在没有被抓住，我要处理一个通用的线程异常。有什么方法可以访问原始数据（强制转换 threadException？）或者我应该采取不同的方法。我想我只需要朝着正确的方向前进，我就能想出办法。

问候，皮特

更新：

嗯，调用 GetValidationErrors 有点问题。我注意到我的数据库上下文具有 ObjectContext 的基类而不是 DbContext（所以我不能调用 ValidateEntity）。我正在使用启用了默认代码生成的 Entity Framework 5 - 如果有帮助，请使用数据库优先方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:46:38.017

在调用之前检查验证错误`SaveChanges`。就像是...

```
var errors = context.GetValidationErrors();
if(errors.Any())
{
   //handle validation errors
}
else
{
    context.SaveChanges();
} 
```

来自内存，因此确切的语法可能不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:47:28.163

这就是我最终的结果（随着我对 EF 的了解更多，我可能最终会充实它）

```
 public List<DbEntityValidationException> vErrors = new List<DbEntityValidationException>();
        public int DbChanges = 0;      

        public bool SaveChanges()
        {
            try
            {
                this.vErrors = (List<DbEntityValidationException>)base.GetValidationErrors();
                if (this.vErrors.Count == 0)
                {
                    this.DbChanges = base.SaveChanges();
                    return true;
                }
            }
            catch (Exception Ex)
            {
                this.vErrors.Add(new DbEntityValidationException(string.Format("General Error: {0}", Ex.GetType().ToString())));
            }
            return false;
        } 
```

并从代码

```
using(Db db = new Db())
{
//changes
if(db.SaveChanges)
{
   //some message using db.DbChanges 
}
else
{
    //handle errors in db.vErrors
} 
```

# dynamics-crm-2011 - CRM 2011 文本字段“智能感知”

> ID：14833793
> 
> 赞同：1
> 
> 时间：2013-02-12T13:34:52.180
> 
> 标签：dynamics-crm-2011

如何赋予文本字段“智能感知”的感觉？
用户将开始输入并获得类似选项的列表以供选择。

监听字段的 OnChange
并将字段文本与实体记录进行比较的 JavaScript 怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:36:15.630

有一个很好的工具可以实现这一点：jquery autocomplete，见这里：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

有关在 CRM 2011 中使用 JQuery 的信息，请参阅此帖子：

[http://crmconsultancy.wordpress.com/2011/06/13/using-jquery-in-crm-2011/](http://crmconsultancy.wordpress.com/2011/06/13/using-jquery-in-crm-2011/)

[http://www.crmnerd.com/customizations/using-jquery-in-crm2011/](http://www.crmnerd.com/customizations/using-jquery-in-crm2011/)

# .htaccess - 仅删除一个目录的 .htaccess 的 .php 扩展名？

> ID：14833805
> 
> 赞同：2
> 
> 时间：2013-02-12T13:35:14.097
> 
> 标签：.htaccess, url-rewriting

我只需要重写 url 一个名为`gallery`. 我想拥有`abc.com/photos/gallery/picture/`而不是`abc.com/photos/gallery/picture.php`

```
.htaccess
index.php
/photos
    /gallery 
        index.php
        picture.php
        functions.php
/videos 
```

这是我的代码，`.htaccess`但它不起作用。

```
RewriteEngine on
RewriteRule ^/[.*]/?$ photos/gallery/$1.php#{QUERY_STRING} [NC,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:56:58.687

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension
# To externally redirect /gallery/foo.php to /gallery/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s(/+gallery/[^.]+)\.php [NC]
RewriteRule ^ %1 [R=302,L]

## To internally forward /gallery/foo to /gallery/foo.php
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(gallery/.*?)/?$ $1.php [L,NC] 
```

# diff - 补丁语义

> ID：14833818
> 
> 赞同：0
> 
> 时间：2013-02-12T13:36:06.400
> 
> 标签：diff, semantics, patch

我使用以下方法制作了一个补丁`diff`：

```
diff -u /home/user/onderzoeksstage/omf/Rakefile /home/user/onderzoeksstage/Rakefile > rakefile2.patch 
```

我已将此 rakefile2.patch 放在另一个目录中：`/home/user/onderzoeksstage/omf/confine/patches`. 现在，我假设我可以转到收集所有补丁的目录，调用`patch < rakefile2.patch`并通过读取 rakefile2.patch 标头`patch`知道在哪里找到要修补的文件（原始文件）。`/home/user/onderzoeksstage/omf/Rakefile`

但是这样做时，`patch`它说它没有找到要修补的文件：

```
[user@localhost patches]$ patch < rakefile2.patch 
can't find file to patch at input line 3
Perhaps you should have used the -p or --strip option?
The text leading up to this was:
--------------------------
|--- /home/user/onderzoeksstage/omf/Rakefile    2013-02-12 14:11:49.809792527 +0100
|+++ /home/user/onderzoeksstage/Rakefile    2013-02-12 12:17:50.314831492 +0100
--------------------------
File to patch: ...
... 
```

所以我的假设显然是错误的，那么它是如何`patch`工作的呢？去`/home/user/onderzoeksstage/omf/`和打电话时`patch < rakefile2.patch`确实有效。是否`patch`只查看路径末尾的文件名标题而不考虑目录？所以我试图完成的事情永远不会奏效？为什么是这样; 这是因为这样可以将补丁应用于任何名为 Rakefile 的文件（例如在我的情况下），从而使其成为更“通用”的补丁？

谢谢，格伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:41:10.783

> 补丁是否只查看路径末尾的文件名标题而不考虑目录？

这就是它默认的作用。参见`-p`选项中的描述[`man patch`](http://linux.die.net/man/1/patch)。看起来`-p0`就是你想要的。

# javascript - 使用 jquery 显示选定的复选框数据

> ID：14833820
> 
> 赞同：0
> 
> 时间：2013-02-12T13:36:13.423
> 
> 标签：javascript, html, cordova

```
Here i want to display selected check-box text. Help me how to do this   

 <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    <script type="text/javascript" src="../js/jquery_1.9.0.js"></script>
      <script type="text/javascript" language="javascript" src="http://code.jquery.com/jquery-latest.js"></script>  
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
       <script>
       var counter = 1;
       var cars = new Array("Paul","Catherine","Steve","Paul","Catherine","Steve","Paul","Catherine","Steve","Paul","Catherine","Steve");

        $(document).ready( function() {
            $("#checkall").click(function() {
                if ($(this).is(':checked')){
                    $(":checkbox").attr("checked", true);
                  }
                  else{

                    $(":checkbox").attr("checked", false);
                  }
            }); 

            // Uncheck All

            for (var i=0;i<cars.length;i++){
            var newTextBoxDiv = $(document.createElement('div'))
            .attr("id", 'TextBoxDiv' + counter);
             newTextBoxDiv.after().html('<input type="checkbox" />'+cars[i]+'</br>');
            newTextBoxDiv.appendTo("#TextBoxesGroup");
            }
        });

        function checkState(){

        var isChecked = $('#checkall').is(':checked');

        if(isChecked){

        // here i  want to display all check-boxes data

        } else{

        // here i  want to display Selected Check-boxes data

        }

        }

    </script>

    </head>
    <body>

    </br>

        <div id="TextBoxesGroup">
                                        <div id="TextBoxDiv1">
                                        <input type="checkbox" id="checkall" value="check" />select</br>
                                            <br />
                                        </div>
                                    </div>
    <input type = "button" onClick = "checkState()" value = "GetName" id = "button" />  
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:44:27.617

执行此操作以获取名称

更改将复选框功能添加到（**否则您将没有任何值**）：

```
newTextBoxDiv.after().html('<input type="checkbox" value="' + cars[i] + '" />'+cars[i]+'</br>'); 
```

更新您的 if else：

```
 var isChecked = $('[type=checkbox]:checked');
       var names = "";
         isChecked.each(function(){
             names += $(this).val();
         });
       alert(names); 
```

现场小提琴：http: [//jsfiddle.net/nyu5T/](http://jsfiddle.net/nyu5T/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:42:49.827

看看 jQuery 的[serialize()](http://api.jquery.com/serialize/)

```
console.log($(":checked").serialize()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:48:53.500

我知道你有一个答案，但这解决了几个问题：小提琴显示它工作：http: [//jsfiddle.net/WGKuX/](http://jsfiddle.net/WGKuX/)

标记：修复错误的 html`</br>`并从标记中删除 onclick（稍后在代码中）

```
<br />
<div id="TextBoxesGroup">
    <div id="TextBoxDiv1">
        <input type="checkbox" id="checkall" value="check" />select
        <br />
    </div>
</div>
<input type="button" value="GetName" id="button" /> 
```

现在看一些代码：每个部分的注释

```
var counter = 1;
var cars = ["Paul", "Catherine", "Steve", "Paul", "Catherine", "Steve", "Paul", "Catherine", "Steve", "Paul", "Catherine", "Steve"]; //change to simpler declaration

$(document).ready(function () {
    $("#checkall").click(function () {
        $(".myCars").prop("checked", $(this).is(':checked'));
    }); // simplify
    $("#TextBoxesGroup").on("change", ".myCars", function () {
        $("#checkall:checkbox").prop("checked", ($(".myCars").length == $(".myCars:checked").length));
    }); // assume "select" means "select all", if all are checked, check the select otherwise uncheck
    var mylist = "";
    var i = 0;
    for (i = 0; i < cars.length; i++) {
        mylist += "<div id='TextBoxDiv" + (counter + i) + "'><input class='myCars' type='checkbox' value='" + cars[i] + "' />" + cars[i] + '<br /></div>';

    }// note the class added to the checkboxes
    $(mylist).appendTo("#TextBoxesGroup"); // simplify the insertion, only hit DOM once
});

$('#button').click(checkState); //event handler moved from markup

function checkState() {
    var names = "";
    // build list based on the seleck all check state
    var checkslist = $('#checkall').prop('checked') ? $('.myCars[type=checkbox]') : $('.myCars[type=checkbox]:checked');
    checkslist.each(function () {
        names += $(this).val();
    });
    alert(names);
} 
```

# c# - 电子邮件 #2 的正则表达式

> ID：14833824
> 
> 赞同：2
> 
> 时间：2013-02-12T13:36:16.303
> 
> 标签：c#, asp.net, regex

我有一个正则表达式，用于检查字符串是否为电子邮件地址：

```
@"^((([\w]+\.[\w]+)+)|([\w]+))@(([\w]+\.)+)([A-Za-z]{1,3})$" 
```

这适用于我测试过的所有电子邮件地址，前提是“@”之前的位至少有四个字符长。

作品：

```
web1@domain.co.uk 
```

不起作用：

```
web@domain.co.uk 
```

如何更改正则表达式以允许少于 4 个字符的前缀？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:42:11.467

在 asp.net mvc 帐户模型中用于电子邮件验证的“标准”正则表达式如下：

```
@"^[\w-]+(\.[\w-]+)*@([a-z0-9-]+(\.[a-z0-9-]+)*?\.[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})(:\d{4})?$" 
```

它允许在 @ 之前有 1+ 个字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:57:48.927

我认为检查有效电子邮件地址的最佳方法是让用户输入两次，然后向他发送一封电子邮件，并质疑他使用验证链接收到它的事实。

再次检查你的正则表达式，看看奇怪的有效电子邮件[地址](http://en.wikipedia.org/wiki/Email_address#Valid_email_addresses)列表，你会发现正则表达式并不适合电子邮件验证任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:41:13.800

您可以使用此正则表达式作为替代：

```
^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$ 
```

它的描述可以在[这里](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)找到。

关于您的正则表达式，开始部分`(([\w]+\.[\w]+)+)`强制电子邮件地址在开头有四个字符。修改这部分将为您完成工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T18:59:26.500

我建议不要使用正则表达式来验证电子邮件（出于此处列出的原因）[http://davidcel.is/blog/2012/09/06/stop-validating-email-addresses-with-regex/](http://davidcel.is/blog/2012/09/06/stop-validating-email-addresses-with-regex/)

如果您无法发送确认电子邮件，C# 中的一个不错的替代方法是尝试创建 MailAddress 并检查它是否失败。

如果您使用的是 ASP.NET，则可以使用 CustomValidator 来调用此验证方法。

```
 bool isValidEmail(string email)
    {
        try
        {
            MailAddress m = new MailAddress(email);
            return true;
        }
        catch
        {
            return false;
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-13T13:02:05.243

验证答案中使用的小技巧，即捕获异常

```
new MailAddress(email); 
```

看起来不是很令人满意，因为它认为“a@a”是一个有效的地址，事实上它不会为几乎任何匹配正则表达式“*.@.*”的字符串引发异常，这显然是太宽松了例如

```
new MailAddress("¦#°§¬|¢@¢¬|") 
```

不会引发异常。

因此，我显然会去进行正则表达式匹配

这个例子很满意

[https://msdn.microsoft.com/en-us/library/01escwtf%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/01escwtf%28v=vs.110%29.aspx)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-12T13:42:50.023

你也可以试试这个

```
^[a-zA-Z0-9._-]*@[a-z0-9._-]{2,}\.[a-z]{2,4}$ 
```

# android - 为什么我的应用与 Nexus 4 不兼容？

> ID：14833830
> 
> 赞同：1
> 
> 时间：2013-02-12T13:36:31.120
> 
> 标签：android, nexus-4

我的应用与 Google Nexus 4 不兼容。为什么？这是我的清单（除`<application/>`部分之外的所有内容）：

```
<uses-feature
    android:name="android.hardware.location.gps"
    android:required="false" />
<uses-feature
    android:name="android.hardware.location"
    android:required="false" />
<uses-feature
    android:name="android.hardware.wifi"
    android:required="false" />

<uses-feature
    android:name="android.hardware.usb.host"
    android:required="true" /> 
```

PS 我有报道称三星 Galaxy S3 在更新到 Jelly Bean 后停止检测 USB 设备。我想知道它是否相关。另一方面，Nexus 10 也运行 Jelly Bean 并且运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:54:13.167

```
<uses-feature
    android:name="android.hardware.usb.host"
    android:required="true" /> 
```

将此设置为 false ，它应该可以工作。并非总是如此，但通常 USB 主机需要有完整的 USB 端口，而不是微型端口。

# php - 分页错误第二页没有记录

> ID：14833832
> 
> 赞同：0
> 
> 时间：2013-02-12T13:36:34.787
> 
> 标签：php, mysql, phpmyadmin

我搜索了有关 php 分页的信息，发现一个很好地解释了代码的网站，我的问题是关于代码的，每次我点击“下一步”链接时，第 2 页都必须得到结果。我不明白为什么第 2 页没有结果。这是代码：

```
 <?php 
 mysql_connect("localhost", "root", "") or die(mysql_error()); 

 mysql_select_db("kp_and_harang") or die(mysql_error()); 

 if (!(isset($pagenum))) 

 { 

 $pagenum = 1; 

 } 
 $data = mysql_query("SELECT * FROM students") or die(mysql_error()); 

 $rows = mysql_num_rows($data); 

 $page_rows = 4; 

 $last = ceil($rows/$page_rows); 

 if ($pagenum < 1) 

 { 

 $pagenum = 1; 

 } 

 elseif ($pagenum > $last) 

 { 

 $pagenum = $last; 

 } 

 $max = 'limit ' .($pagenum - 1) * $page_rows .',' .$page_rows; 

 $data_p = mysql_query("SELECT * FROM students $max") or die(mysql_error()); 

 while($info = mysql_fetch_array( $data_p )) 

 { 

 Print $info['surname']; 

 echo "<br>";

 } 

 echo "<p>";

 echo " --Page $pagenum of $last-- <p>";
 if ($pagenum == 1) 

 {

 } 

 else 

 {

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=1'> <<-First</a> ";

 echo " ";

 $previous = $pagenum-1;

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$previous'> <-Previous</a> ";

 } 

 echo " ---- ";

 if ($pagenum == $last) 

 {

 } 

 else {

 $next = $pagenum+1;

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$next'>Next -></a> ";

 echo " ";

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$last'>Last ->></a> ";

 } 

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:24:19.230

您将页码放在 url 中，但您从未从 url 中检索它？

我改变了这部分：

```
if (!(isset($pagenum))) 
{ 
   $pagenum = 1; 
} 
```

对此：

```
 if (!(isset($_GET['pagenum']))) 
 { 
    $pagenum = 1; 
 } else {
    $pagenum = $_GET['pagenum'];
 } 
```

它似乎工作得很好。

**编辑**

要获取总行数，您不必获取所有内容。您可以执行以下操作：

```
$result = mysql_query("SELECT count(*) FROM students") or die(mysql_error());
$rows = mysql_fetch_row($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:53:43.720

首先，除非绝对必要，否则不建议使用`SELECT *`您应该使用特定字段。现在，您正在对同一张表进行两次完整搜索。仅当您只想计算行数时才选择一个字段。

您还应该使用不*推荐*`PDO`使用的函数。`mysql_*`

 *你确定应该有第二页吗？表中有多少条记录`students`？

调试您的代码转储查询结果并检查`"SELECT * FROM students $max"`查询。*

# asp.net - String.Join 不适用于 vbCrLf

> ID：14833833
> 
> 赞同：1
> 
> 时间：2013-02-12T13:36:40.770
> 
> 标签：asp.net, vb.net, webforms

我有以下程序，效果很好。我遇到的唯一问题是**CompNames 列表**有超过 1 条记录。我正在尝试将**String.Join**与 vbCrLf 一起使用，但它不起作用。

任何人都有任何想法或我可以使用的替代方案。

```
Public Sub gvTeamList_OnRowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs)
    Dim TeamID As Integer

    If e.Row.RowType = DataControlRowType.DataRow Then
        TeamID = DataBinder.Eval(e.Row.DataItem, "TeamID")
        Dim sSQL As String
        sSQL = "SELECT C.CompetitionName, CTT.TeamID " & _
                "FROM tblCompetition C " & _
                "left join  tblCompetitionToTeam CTT on C.CompetitionID = CTT.CompetitionID " & _
                "left join  tblTeam T on CTT.TeamID = T.TeamID " & _
                "where CTT.TeamID = " & TeamID
        Dim dr = DataClass.GetDataReader(sSQL)
        Dim bRows As Boolean = dr.HasRows
        Dim CompNames As New List(Of String)
        While dr.Read
            CompNames.Add(dr("CompetitionName"))
        End While
        Dim Name As String
        If CompNames.Count > 0 Then
            For Each Name In CompNames
                e.Row.Cells(5).Text = String.Join(vbCrLf, CompNames.ToArray)
            Next
        End If
        'e.Row.Cells(5).Text = 
        e.Row.Cells(5).ForeColor = Drawing.Color.Yellow
        e.Row.Cells(5).BackColor = Drawing.Color.DarkBlue
        dr.Close()
    End If

End Sub 
```

我也尝试过**Environment.NewLine**但这也不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:40:32.953

看来您正在使用 WebForms 应用程序。在 HTML 中，换行通常无效，因为空格被忽略（除非它嵌入在某些标签中）。您想用来`<br />`生成换行符：

```
e.Row.Cells(5).Text = String.Join("<br />", CompNames.ToArray) 
```

此外，您不需要`For Each`循环，因为`String.Join`在一次调用中枚举整个数组。为每个名称运行一次是多余的`CompNames`。

# android - send data from activity to another without start it

> ID：14833840
> 
> 赞同：11
> 
> 时间：2013-02-12T13:37:05.043
> 
> 标签：android, android-intent, android-activity, bundle

If I have two activities Activity1 and Activity2 and I want to send data from Activity1 to Activity2 without Start Activity2

I know if I want to start Activity2 I use this code in Activity1.java

```
Intent intent ;
Bundle bundle = new Bundle();

bundle.putString(BG_SELECT, hexColor);

intent = new Intent(getApplicationContext(), Activity2.class);

intent.putExtras(bundle);

// this is to start but I want just refresh Activity2 not start it
startActivityForResult(intent, uniqueNo); 
```

and in Activity2.java

```
bundle = getIntent().getExtras();

if (bundle != null) {
   bgColor = bundle.getString(SebhaActivity.BG_SELECT);
   System.out.println("in Activity2, selected BG: "+bgColor);

} 
```

How to refresh Activity2 to find data in it without Start it? Thanks in Advance.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-11-04T10:38:02.227

您可以使用[`LocalBroadcastManager`](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html). 对于您的场景，即 Activity1 向 Activity2 发送内容，您将执行以下操作。

```
# Activity1

Intent intent = new Intent("INTENT_NAME").putExtra(BG_SELECT, hexColor);
LocalBroadcastManager.getInstance(Activity1.this).sendBroadcast(intent); 
```

在 Activity2 上，您需要首先注册接收器，例如，在其 onCreate 方法上，然后使用 BroadcastReceiver 获取意图，如下所示

```
# Activity2

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LocalBroadcastManager.getInstance(this).registerReceiver(mReceiver, new IntentFilter("INTENT_NAME"));
} 
```

然后，注册`mReceiver`以检索该`BG_SELECT`字段

```
# Activity2

private BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String receivedHexColor = intent.getStringExtra(BG_SELECT);
    }
}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T13:42:26.727

if the next activity (where you need data, Activity2 i.e) wont start from here you can save the data in SharedPreferences in Activity 1 and access it in activity2 when you get there

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:43:27.767

Try this,

Create one non activity class.

```
 public class Datas {
  public static String name;
  } 
```

Declare this non activity class in your activity class.

```
Data  mData = new Data();
String str = mData.name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:46:30.483

If you want to share data between 2 activities while both are running, you should using some storage available for both.

检查`Shared Preferences`，或创建一个可以在两个活动中访问的全局存储类。没有真正的“方法”来做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-05T11:59:28.900

我认为这里 SharedPreferences 变得无与伦比。

> SharedPreferences 是特定于应用程序的，即执行以下选项之一时数据会丢失： PREFS_NAME 是文件的名称。mode 是操作模式。editor.commit() 用于保存对共享首选项的更改

**你的代码是这样的**

在您共享数据的第一个活动中

```
 SharedPreferences preferences=getSharedPreferences("PhoneBook",MODE_PRIVATE);
    SharedPreferences.Editor editor=preferences.edit();

    editor.putInt("registration_id",c.getInt(c.getColumnIndex("db_regiser_id")));
    editor.putBoolean("IsLogin",true);
    editor.commit(); 
```

在第二个活动中获取这样的数据

```
SharedPreferences preferences=getSharedPreferences("PhoneBook",MODE_PRIVATE);
 int registration_id = preferences.getInt("registration_id", 0); 
```

> 使用 SharedPreferences 是相当安全的。

**也访问**

[https://developer.android.com/training/data-storage/shared-preferences.html](https://developer.android.com/training/data-storage/shared-preferences.html)

希望这个会有所帮助。

# php - 我尝试使用 php 代码生成随机（3 个数字）数字，但是当我尝试返回该值时它不起作用

> ID：14833843
> 
> 赞同：-3
> 
> 时间：2013-02-12T13:37:08.977
> 
> 标签：php, function, recursion, return

这是我的 php 脚本：当我尝试将值返回到 $total 并随后回显函数 generate_random_3 时，在某些情况下它不会生成任何数字，请帮忙

```
<?php
    function generate_random_3(){

        for($x=0; $x<3; $x++){
            $random[] = rand(1, 9);
        }
        list($first, $second, $third) = $random;

        if($first!=$second AND $first!=$third AND $second!=$third AND $first!=0){
            $total = $first.$second.$third;
            return $total;
            }else{
            generate_random_3();
            }
    }
    echo generate_random_3();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:40:08.427

```
function generate_random_3() {
  return rand(100,999);
}

echo generate_random_3(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:39:51.647

either way....

```
$number1 = rand(0,365);
$number2 = rand(0,365);
$number3 = rand(0,365);

echo $number1 . " " . $number2 . " " . $number3; 
```

# java - java gwt一个脚本导致浏览器运行缓慢

> ID：14833847
> 
> 赞同：3
> 
> 时间：2013-02-12T13:37:16.420
> 
> 标签：java, gwt

我有一个用 java gwt 编写的 Web 应用程序。在 IE8 中打开网站时，总是会弹出消息“此页面上的脚本导致您的 Web 浏览器运行缓慢” 该消息仅出现在 IE8 中，没有更高版本，在 FF 或 Chrome 中不出现！

由于应用程序是用 java gwt 编写的，因此很难调试 javascript 代码，是否还有另一种可能来确定问题？

该应用程序还有许多异步调用数据库可能是问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T17:05:06.160

此消息意味着 JavaScript 会长时间阻塞浏览器线程。

它在 IE8 中的实现真的很傻。它计算它执行的 JavaScript 代码行数（指令），如果达到某个阈值，则会显示此消息。

实际上这个限制是在 Windows 注册表中配置的，默认为 5000000 或类似的值。它可以增加，这当然不是推荐的解决方案。

避免此消息的方法之一是使用 GWT DeferredCommand。如果您可以将正在完成的工作拆分为足够小的块而不会触发 IE8 保护约束，那么您会没事的。还尝试将多个异步请求合并为尽可能少的数量并改进渲染逻辑，可能会从 Widget 转移到 UI Binder 或普通 DOM。

这是相关问题（[禁用 Internet Explorer 中的长时间运行脚本消息](https://stackoverflow.com/questions/4460263/disabling-the-long-running-script-message-in-internet-explorer)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:23:40.147

我稍微不同意- **“java gwt很难调试javascript代码”**

## **用于禁用慢速脚本警告的[MSDN 文章仅隐藏了该问题。](http://support.microsoft.com/kb/175500)**

当您有大量的 for 循环或深度递归调用时，会出现慢速脚本警告。这可能发生在两种情况下 -

```
1) Poorly coded client side processing logic - example tree navigation
2) Deep object graph in rpc. 
```

**如果您熟悉，您可以快速隔离故障点**

1) 使用 Speed Tracer - [https://developers.google.com/web-toolkit/speedtracer/](https://developers.google.com/web-toolkit/speedtracer/)

2) 使用 GWT 日志记录 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)

3) 使用 Chrome 开发工具和 Firebug 来捕获时间线、分析等

4) IE8 有 profiling ，但是非常缓慢和麻烦。

5) 分析时使用 GWT Pretty 模式而不是 OBF 模式。

一旦您确定代码的哪一部分导致了缓慢的脚本警告**，只需 FIX it**即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:50:09.450

由于某些脚本可能需要很长时间才能运行，因此 Internet Explorer 会提示用户决定是否要继续运行慢速脚本。

如果生成的 Cache.js Javascript 文件有些大，则该消息可能会出现。

因此 Internet Explorer 4.0、5.0、6、7 和 8 版的消息框带有一条消息

在 MS 博客上阅读[这篇](http://support.microsoft.com/kb/175500)文章

并参考以下问题

[此页面上的脚本导致 ie 运行缓慢](https://stackoverflow.com/questions/212550/a-script-on-this-page-is-causing-ie-to-run-slowly)

# authentication - LinkedIn + 电子邮件的这个 Oauth 流程有什么问题？

> ID：14833850
> 
> 赞同：2
> 
> 时间：2013-02-12T13:37:21.880
> 
> 标签：authentication, oauth, linkedin, laravel

我相信，我在 laravel 中使用 oneAuth 捆绑包，基于 Phil Sturgeon 的 Fuel 的 NinjAuth，并试图获取用户的电子邮件地址。

我已经为我的请求添加了适当的范围，LinkedIn auth 屏幕成功地请求用户对基本个人资料和电子邮件地址的许可.. 到目前为止，一切都很好..

一个可能的问题是：电子邮件字段的正确名称是什么？我找到了对`email-address`, `emailAddress`, 'emailaddress` 的引用...

[文档表明`email-address`](http://developer.linkedin.com/documents/profile-fields#email)，但它不适合我:)

我正在使用 URL：[https ://api.linkedin.com/v1/people/~:(id,first-name,last-name,headline,member-url-resources,picture-url,location,public-个人资料网址，电子邮件地址）？格式=json](https://api.linkedin.com/v1/people/%7E:(id,first-name,last-name,headline,member-url-resources,picture-url,location,public-profile-url,email-address)?format=json)

这是来自 /bundles/oneauth/libraries/oauth/provider/linkedin.php 的有问题的片段

```
// Create a response from the request
return array(
    'uid'         => array_get($user, 'id'),
    // 'email'       => array_get($user, 'email-address)',
            // 'email'       => array_get($user, 'emailAddress)',
    'name'        => array_get($user, 'firstName').' '.array_get($user, 'lastName'),
    'image'       => array_get($user, 'pictureUrl'),
    'nickname'    => $nickname,
    'description' => array_get($user, 'headline'),
    'location'    => array_get($user, 'location.name'),
    'urls'        => array(
        'linkedin' => $linked_url,
    ),
); 
```

如果我取消注释电子邮件字段，请求会以某种方式失败（URL 仍然显示 mysite.com/connect/callback 但网站图标显示linkedin，我在 chrome 中得到空白页面：“ `Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data.`”）

如果上面代码中的 email 行被注释掉，我成功接收到所有其他详细信息，并且一条新记录被添加到我的 users 表和表 oneauth_clients 中，但 email 自然是空白的。

我一定错过了一些简单的东西！

* * *

## 更新

请求 URL 与电子邮件地址一起使用，但返回一个包含电子邮件地址的 json 对象！

如果上面的返回数组代码包含`emailAddress`...

* * *

这是[某人的成功故事](https://developer.linkedin.com/comment/18171#comment-18171)：

> “我分别对库和 demo.php 进行了这两项更改：
> 
> `const _URL_REQUEST = 'https://api.linkedin.com/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress';`
> 
> `$response = $OBJ_linkedin->profile('~:(id,first-name,last-name,picture-url,email-address)');`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:16:11.473

问题是请求令牌调用是：

`https://api.linkedin.com/v1/people/~:(id,first-name,last-name,headline,member-url-resources,picture-url,location,public-profile-url,email-address)?format=json`

但json响应是：

```
array(8) {
  ["emailAddress"]=>
  string(18) "email@email.com"
  ["firstName"]=>
  string(3) "Tim"
  ... 
```

请注意，在第一种情况下，电子邮件在第二个**emailAddress中被命名为****email-address**。

 **第二个问题是我的代码的一个缺点——现在可以正常工作了！**

# c++ - 将跨平台 C++ 库移植到 Windows Phone 8 平台

> ID：14833852
> 
> 赞同：15
> 
> 时间：2013-02-12T13:37:22.430
> 
> 标签：c++, windows-runtime, cross-platform, windows-phone-8, static-libraries

我已经搜索了很多网络和 StackOverflow，但似乎无法为我的以下问题找到明确的答案。

**语境：**

我希望移植一组用于 Windows Phone 8 (WP8) 平台的 C++ 帮助程序库。从历史上看，这些库是作为静态库（而不是 DLL）构建的。

我已经成功编写了特定于 WP8 的代码，因此这些库兼容并针对 ARM 构建，使用 WP8 可用的 API（使用 WP API 快速入门文档作为参考点）。由于必须用 WinRT 的 ThreadPool 替换经典的 Win32 线程调用，因此只有一个库（例如 Lib1）需要使用 WinRT 扩展（/ZW 标志）。

在构建 Lib1 时，我收到以下警告：警告 1 警告 LNK4264：将使用 /ZW 编译的目标文件归档到静态库中；请注意，在创作 Windows 运行时类型时，不建议与包含 Windows 运行时元数据的静态库链接。

— 搜索此警告时，我发现[了这篇文章](http://msdn.microsoft.com/en-us/library/windows/apps/hh771041.aspx)，指出：“如果您使用创建公共 ref 类、公共接口类或公共值类的静态库，链接器会引发此警告。您可以放心地忽略该警告如果静态库不会生成在库本身之外使用的 Windows 运行时组件。静态库中的公共组件将编译，但不会在运行时激活。任何旨在供其他组件或应用使用的 Windows 运行时组件必须在动态中实现-链接库（DLL）。”

在 Lib1 中，ClassA 包含使用 WinRT ThreadPool 调用的函数。ClassA 函数由 ClassB 调用，它们只是将常规 HANDLE 和 DWORD 返回给 ClassB。

**代码示例：**

```
// ClassA.cpp
HANDLE WINAPI ClassA::CreateThread(/* Params that are usually passed to Win32 CreateThread */)
{
    // Do WinRTThreadPool stuff to create WorkItem
    auto workItem = ref new Windows::System::Threading::WorkItemHandler([=](Windows::Foundation::IAsyncAction^)
    // More code that eventually results in a Win32 Handle

    return handle;
}

// ClassB.cpp
Handle handle = ClassA::CreateThread(/* Params that are usually passed to Win32 CreateThread */); 
```

ClassA 的函数只能由 ClassB 从 Lib1 中调用，然后 ClassB 可以由链接 Lib1 的应用程序使用。

**最后，对于我的问题：**

1.  *不*使用 WinRT 扩展 (/ZW)的 C++ 库在构建为静态库时是否可以被 Windows Phone 8 应用程序使用？

2.  使用 WinRT 扩展 (/ZW)的 C++ 库 (Lib1)在构建为静态库时*是否*可以被 Windows Phone 8 应用程序使用，尽管有警告？

3.  如果两个问题的答案都是否定的，我是否必须为相应库中的所有类创建 WinRT 组件包装器，就像[本文](http://www.silverlightshow.net/items/Windows-Phone-8-Native-Code-Support.aspx)使用 Mandelbrot 算法演示的那样？还是我还缺少其他东西？

提前感谢您提供的任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T06:11:59.497

**问题1** 是的，只要您不使用手机上不允许使用的任何API，例如Win32、MFC 等。一些标准的c 功能对其有一些限制；例如，您只能在应用程序本地区域中的文件上调用 fopen。当然，您只能从 C++ 代码访问静态库中的功能。这个场景就是我喜欢称之为“Plain Old C++”的场景。它工作正常。

**问题 2** 是的，只要您在该静态库中定义的任何引用类仅打算在该静态库中使用。因此，在您的示例中，只要 A 类是常规的旧 C++ 类，就可以了。本质上，您不能拥有与 .NET 程序集中的公共类具有相同意义的公共 ref 类，因为这需要一些 COM-on-steroids 魔术，并且只会编译到 Windows 运行时组件中。如果你有普通的旧 C++ 代码，它包含对任何 ref 类代码的调用，并且使用你的静态库的代码以普通的旧 C++ 方式使用它，那么你很好。逻辑表明您将无法将 WinRT 类型从静态库中传递出去，尽管我还没有测试过这个假设。

**问题 3** 我相信您引用的文章忽略了静态库中的代码可以访问引用类等这一事实，所以不用担心，您不必围绕静态库编写 Windows 运行时组件包装器。如果您希望静态库中的代码通过“公共类”（在 .NET 程序集意义上）可用，您只想这样做。

要记住的是，您仍在为“Windows 商店”构建静态库。它是本机代码，但它仍然可以完成所有 C++/CX 的工作，它只是不包含 COM 激活内容，以允许在静态链接的 C++ 场景之外访问其中定义的类型。

# css - Add background image to paragraph in rich text editor tiny mce

> ID：14833857
> 
> 赞同：0
> 
> 时间：2013-02-12T13:37:34.287
> 
> 标签：css, tinymce, umbraco

I have spent hours to think how to get this thing working without any success , what I want to add background image to selected paragraph in tiny mce, I can do that using style dropdown in rich text editor but I want to extend that image dynamically when the selected paragraph text extend. This can be done using 3 divs like:

```
<div id="top"></div>
<div id="center"><p></p></div>
<div id="bottom"></div> 
```

But the issue is I can't do that using rich text editor tiny mce, and I want to give that ability to front end user who can just select the paragaraph and set the styling from dropdown in order to show the background image to that paragraph on the website, I have included the background image just for guidance, can any one provide any assistance or suggestions on how to get this thing working. Here's the background image: ![enter image description here](../Images/7f1ba4bda40f0b8ccb515f3eda7d215a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:26:29.880

您可以使用[TinyMCE 的“模板”插件](http://our.umbraco.org/wiki/how-tos/enabling-the-%27template%27-plugin-for-tinymce)

或[TinyMCE 的“MySnippets”包](http://our.umbraco.org/projects/developer-tools/mysnippets-for-tinymce)

希望这可以帮助

# ajax - jquery 文档就绪函数中的 GET 方法是否会导致页面等待 GET 响应？

> ID：14833859
> 
> 赞同：0
> 
> 时间：2013-02-12T13:37:36.860
> 
> 标签：ajax, jquery

我在我的文档准备功能中有这个

```
 <script type="text/javascript">
    $(document).ready(function () {
        if ($("[rel=tooltip]").length) $('[rel=tooltip]').tooltip();
        var path = "@Url.Content("~/Contents/Users/" + HttpContext.Current.User.Identity.Name + "/images/")";
        $.vegas({
            src: path + Preferences.GetBackground(),
            fade: 2000
        })@*('overlay', {
            src: "@Url.Content("~/Contents/css/images/01.png")"
        })*@;
    });
</script> 
```

我正在使用插件 vegas 作为网站中的全屏背景图像。所以 $.vegas 实际上向服务器发送了一个 GET 请求。我的问题是，这会导致浏览器等待响应然后只向用户显示内容还是在显示内容时在幕后完成？我问这个是因为背景图像通常超过 150kb，所以我想确保这不会增加响应时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:41:43.747

如果 vegas 插件使用[`$.ajax`](http://api.jquery.com/jQuery.ajax/)标准配置（即`async`is `true`）发出请求，则页面将不会等待请求完成，因为操作是异步的。通常，在发出 AJAX 请求时会传递一个回调函数，以在返回响应时执行。

但是，如果`async`设置为`false`，则页面将等待响应返回。

# java - trying to read data from textfile - It is already opened exclusively by another user, or you need permission to view its data

> ID：14833860
> 
> 赞同：-3
> 
> 时间：2013-02-12T13:37:37.870
> 
> 标签：java, jdbc

```
public class Txt {

     public static void main(String[] args) throws Exception {

         Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
         Connection con=DriverManager.getConnection("jdbc:odbc:txt");
         Statement st=con.createStatement();
         ResultSet rs=st.executeQuery("select eno,ename from emp");
         System.out.println(rs.getInt(1)+"   "+rs.getString(2));
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:42:16.517

您应该在代码末尾**关闭连接**；

```
con.close(); 
```

使用这个例子：

```
public static void main(String[] args) throws Exception {

  try {
       Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
       Connection con=DriverManager.getConnection("jdbc:odbc:txt");
       Statement st=con.createStatement();
       ResultSet rs=st.executeQuery("select eno,ename from emp");
       System.out.println(rs.getInt(1)+"   "+rs.getString(2));
      }
  catch (SQLException e) {
       e.printStackTrace();
      }
  catch (Exception e) {
       e.printStackTrace();
      }
  finally {
       // Close the connection
       con.close();
      } 
} 
```

祝你好运！

# jquery - How to navigate this carousel smooth two ways?

> ID：14833862
> 
> 赞同：0
> 
> 时间：2013-02-12T13:37:39.020
> 
> 标签：jquery, 3d, navigation, carousel

I have the following carousel, it navigates to the right just like I want but I can't get the same animation to the left. Anyone willing to help me crack this problem?

[http://jsfiddle.net/kaisersoze/QDUea/5/](http://jsfiddle.net/kaisersoze/QDUea/5/)

fullscreen:

[http://jsfiddle.net/kaisersoze/QDUea/5/embedded/result/](http://jsfiddle.net/kaisersoze/QDUea/5/embedded/result/)

```
function initCarousel() {
    var _center = {
        width: 210,
        height: 120,
        marginLeft: 0,
        marginTop: 0,
        marginRight: 10
    };
    var _left = {
        width: 178,
        height: 100,
        marginLeft: 0,
        marginTop: 9,
        marginRight: -118
    };
    var _right = {
        width: 178,
        height: 100,
        marginLeft: -119,
        marginTop: 9,
        marginRight: 0
    };
    var _outLeft = {
        width: 133,
        height: 75,
        marginLeft: 210,
        marginTop: 9,
        marginRight: -250
    };
    var _outRight = {
        width: 133,
        height: 75,
        marginLeft: 0,
        marginTop: 9,
        marginRight: 210
    };

    var i = 0;

    $('#carousel ul').carouFredSel({
        debug: true,
        width: 600,
        height: 135,
        align: false,
        auto: false,
        items: {
            visible: 5,
            width: 100
        },
        next: {
            button: '#btn-go-right',
            items: 1,
            duration: 600,
            onBefore: function(data) {

                if(i > 1){
                    i = 1;
                }

                data.items.old.eq( 0 ).animate(_outLeft);
                    data.items.visible.eq( 0 ).animate(_left).removeClass('active');
                    data.items.visible.eq( 1 ).animate(_center).addClass('active' );
                    data.items.visible.eq( 2 ).animate(_center).addClass('active');
                    data.items.visible.eq( 3 ).animate(_right).css({ zIndex: 1 }).removeClass('active');
                    data.items.visible.eq( 4 ).next().css(_outRight).css({ zIndex: 0 });

                setTimeout(function () {
                    data.items.old.eq( 0 ).css({ zIndex: 1 });
                    data.items.visible.eq( 0 ).css({ zIndex: 2 });
                    data.items.visible.eq( 1 ).css({ zIndex: 3 });
                    data.items.visible.eq( 2 ).css({ zIndex: 3 });
                    data.items.visible.eq( 3 ).css({ zIndex: 2 });
                    data.items.visible.eq( 4 ).css({ zIndex: 1 });
                }, 300);
            }
        },
        prev: {
            button: '#btn-go-left',
            items: 1,
            duration: 600,
            onBefore: function(data) {

                $('#carousel ul').children().eq( 4 ).css(_outRight).css({ zIndex: -1 });

                if(i < 4){
                    $('#carousel ul').children().eq( 0 ).css(_left).css({ zIndex: 2 });
                    $('#carousel ul').children().eq( 4 ).css(_right).css({ zIndex: 2 });
                    // $('#carousel ul').children().eq( 0 ).animate(_outLeft).css({ zIndex: 3 });
                    // $('#carousel ul').children().eq( 1 ).animate(_left).css({ zIndex: 3 });
                    // $('#carousel ul').children().eq( 2 ).animate(_center).css({ zIndex: 3 });
                    // $('#carousel ul').children().eq( 3 ).animate(_center).css({ zIndex: 2 });
                    $('#carousel ul').css({'position':'relative','left':'10px'});
                    i++;
                }

                data.items.old.eq( 0 ).animate(_center);
                    data.items.visible.eq( 0 ).animate(_left).removeClass('active');
                    data.items.visible.eq( 1 ).animate(_center).addClass('active');
                    data.items.visible.eq( 2 ).animate(_center).addClass('active');
                    data.items.visible.eq( 3 ).animate(_right).css({ zIndex: 1 }).removeClass('active');
                    data.items.visible.eq( 4 ).next().css(_outLeft).css({ zIndex: 0 });

                setTimeout(function () {
                    data.items.old.eq( 0 ).css({ zIndex: 3 });
                    data.items.visible.eq( 0 ).css({ zIndex: 2 });
                    data.items.visible.eq( 1 ).css({ zIndex: 3 });
                    data.items.visible.eq( 2 ).css({ zIndex: 3 });
                    data.items.visible.eq( 3 ).css({ zIndex: 2 });
                    data.items.visible.eq( 4 ).css({ zIndex: 1 });
                }, 300);
            }
        }
    });

    $('#carousel ul').children().eq( 0 ).css(_left).css({ zIndex: 2 });
    $('#carousel ul').children().eq( 1 ).css(_center).css({ zIndex: 3 });
    $('#carousel ul').children().eq( 2 ).css(_center).css({ zIndex: 3 });
    $('#carousel ul').children().eq( 3 ).css(_right).css({ zIndex: 2 });
    $('#carousel ul').children().eq( 4 ).css(_outLeft).css({ zIndex: 1 });

}

$(document).ready( function(){

initCarousel();

}); 
```

PS. You can navigate by clicking on the right/left item in the carousel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:14:18.920

解决了，我快到了。唯一缺少的是 prev 按钮处理程序中的以下内容：

data.items.visible.first().css(_outLeft);

# c++ - 简单独特的 STL 容器

> ID：14833869
> 
> 赞同：1
> 
> 时间：2013-02-12T13:38:07.543
> 
> 标签：c++, stl

是否有一个独特的容器，例如`std::list`具有简单功能（`push`、、、`pop`等`clear`）并且不像排序顺序不同`std::set`，或者我可能需要扩展 `std::list`和添加我自己的`push_unique`方法））？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T13:48:22.073

STL 应该提供*高效*的容器。

不允许重复的容器需要支持快速查找以确定您想要的值是否已经存在于集合中。

`std::set`保持项目在红黑树中排序，这是允许 O(log(n)) 查找、插入和删除的原因。

`std::unsorted_set`允许恒定时间的查找、插入和删除，但是您需要为大多数 UDT 类型提供哈希函数，您需要处理诸如重新哈希之类的问题，这会导致迭代器失效，并且您没有为您的任何定义的顺序项目（甚至不是广告订单）。

如果您想使用简单的集合（例如`std::vector`不允许重复），则需要提供自己的适配器。

但是，我仍然无法弄清楚为什么您对排序容器有问题，例如`std::set`，正如您所说，顺序对您来说并不重要。

# javascript - How to group and apply class for specific within based on li:child?

> ID：14833875
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:38:38.100
> 
> 标签：javascript, jquery, html, html-lists

Please find my `ul li` here, This `li` is working for horizontal tab using a bootstrap tab. I'm trying to apply a class; when the 2nd and 3rd `li` have the class `active`, I want to apply a style class on the 1st `li`. simlarly for next 3 `li` and rest also. I've tried with jquery but didn't succeed.

```
<ul id="myTab" class="nav-tabs">
  <li class="side-menu-grp"><a href="#">Group One</a></li>
  <li><a href="#" data-toggle="tab">List One</a></li>
  <li><a href="#" data-toggle="tab">List Two</a></li>

  <li class="side-menu-grp"><a href="#">Group Two</a></li>
  <li><a href="#" data-toggle="tab">List One</a></li>
  <li><a href="#" data-toggle="tab">List Two</a></li>

  <li class="side-menu-grp"><a href="#">Group Three</a></li>
  <li><a href="#" data-toggle="tab">List One</a></li>
  <li><a href="#" data-toggle="tab">List Two</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:32:45.160

我认为这就是你想要的：

```
$('.active').prev('.side-menu-grp').addClass('class'); 
```

它选择带有 class 的元素`active`（`li`如果您不重用该类，则为 s）并找到带有 class 的第一个先前的兄弟元素`side-menu-grp`并将您想要的类添加到它。

# python - 创建图像后放大图像

> ID：14833877
> 
> 赞同：0
> 
> 时间：2013-02-12T13:38:47.470
> 
> 标签：python, image, python-imaging-library

这是我的代码

```
import Image
import ImageDraw

img = Image.new("RGB", (400,400), "white")
draw = ImageDraw.Draw(img)

coords = [(100,70), (220, 310), (200,200)]
dotSize = 2

for (x,y) in coords:
    draw.rectangle([x,y,x+dotSize-1,y+dotSize-1], fill="black")
im.save(contactMap,"JPEG") 
```

想要我想做的是。在我的图像上绘制坐标后，我想保存图像，然后增加该图像的大小 PIL 中有哪些功能可以用来实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:55:19.150

使用调整大小：

```
img.save("a.jpg","JPEG")

img2 = img.resize( (800, 800))
img2.save("b.jpg","JPEG") 
```

# sockets - Data is getting discarded in TCP/IP with boost::asio::read_some?

> ID：14833882
> 
> 赞同：3
> 
> 时间：2013-02-12T13:39:08.187
> 
> 标签：sockets, network-programming, boost-asio

I have implemented a TCP server using `boost::asio`. This server uses `basic_stream_socket::read_some` function to read data. I know that `read_some` does not guarantee that supplied buffer will be full before it returns.

In my project I am sending strings separated by a delimiter(if that matters). At client side I am using `WinSock::send()` function to send data. Now my problem is on server side I am not able to get all the strings which were sent from client side. My suspect is that `read_some` is receiving some data and discarding leftover data for some reason. Than again in next call its receiving another string.

Is it really possible in TCP/IP ?

I tried to use `async_receive` but that is eating up all my CPU, also since buffer has to be cleaned up by callback function its causing serious memory leak in my program. (I am using `IoService::poll()` to call handler. That handler is getting called at a very slow rate compared to calling rate of `async_read()`).

Again I tried to use free function `read` but that will not solve my purpose as it blocks for too much time with the buffer size I am supplying.

My previous implementation of the server was with `WinSock API` where I was able to receive all data using `WinSock::recv()`. Please give me some leads so that I can receive complete data using `boost::asio`.

here is my server side thread loop

```
void 
TCPObject::receive()
{
    if (!_asyncModeEnabled)
    {
        std::string recvString;
        if ( !_tcpSocket->receiveData( _maxBufferSize, recvString ) )
        {
            LOG_ERROR("Error Occurred while receiving data on socket.");
        }
        else
            _parseAndPopulateQueue ( recvString );
    }
    else
    {
        if ( !_tcpSocket->receiveDataAsync( _maxBufferSize ) )
        {
            LOG_ERROR("Error Occurred while receiving data on socket.");
        }
    }
} 
```

receiveData() in TCPSocket

```
bool 
TCPSocket::receiveData( unsigned int bufferSize, std::string& dataString )
{
   boost::system::error_code error;
   char *buf = new char[bufferSize + 1];
   size_t len = _tcpSocket->read_some( boost::asio::buffer((void*)buf, bufferSize),        error);
   if(error)
   {
       LOG_ERROR("Error in receiving data.");
       LOG_ERROR( error.message() );
       _tcpSocket->close();
       delete [] buf; 
       return false;
   }
   buf[len] ='\0';
   dataString.insert( 0, buf );
   delete [] buf;
   return true;
} 
```

receiveDataAsync in TCP Socket

```
bool 
TCPSocket::receiveDataAsync( unsigned int bufferSize )
{
    char *buf = new char[bufferSize + 1];

    try
    {
        _tcpSocket->async_read_some( boost::asio::buffer( (void*)buf, bufferSize ), 
                                     boost::bind(&TCPSocket::_handleAsyncReceive, 
                                                    this,
                                                    buf,
                                                    boost::asio::placeholders::error,
                                                    boost::asio::placeholders::bytes_transferred) );
        //! Asks io_service to execute callback
        _ioService->poll();
    }
    catch (std::exception& e)
    {
        LOG_ERROR("Error Receiving Data Asynchronously");
        LOG_ERROR( e.what() );
        delete [] buf;
        return false;
    }

    //we dont delete buf here as it will be deleted by callback _handleAsyncReceive
    return true;
} 
```

Asynch Receive handler

```
void 
TCPSocket::_handleAsyncReceive(char *buf, const boost::system::error_code& ec, size_t size)
{
    if(ec)
    {
        LOG_ERROR ("Error occurred while sending data Asynchronously.");
        LOG_ERROR ( ec.message() );
    }
    else if ( size > 0 )
    {
        buf[size] = '\0';
        emit _asyncDataReceivedSignal( QString::fromLocal8Bit( buf ) );
    }
    delete [] buf;
} 
```

Client Side sendData function.

```
sendData(std::string data)
{
    if(!_connected)
    {
        return;
    }

    const char *pBuffer = data.c_str();

    int bytes = data.length() + 1;

    int i = 0,j;
    while (i < bytes)
    {
        j = send(_connectSocket, pBuffer+i, bytes-i, 0);

        if(j == SOCKET_ERROR)
        {
            _connected = false;
            if(!_bNetworkErrNotified)
            {
                _bNetworkErrNotified=true;
                emit networkErrorSignal(j);
            }
            LOG_ERROR( "Unable to send Network Packet" );
            break;
        }
        i += j;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:29:06.877

Boost.Asio 的 TCP 功能使用得很好，所以我会犹豫是否怀疑它是问题的根源。在大多数数据丢失的情况下，问题是应用程序代码的结果。

在这种情况下，接收器代码存在问题。发件人用 分隔字符串`\0`。但是，在单个读取操作中读取多个字符串的情况下，接收器无法正确处理分隔符，因为这`string::insert()`将导致`char*`在到达第一个分隔符时截断。

例如，发送者写入两个字符串`"Test string\0"`和`"Another test string\0"`. 在`TCPSocket::receiveData()`中，接收器读`"Test string\0Another test string\0"`入`buf`。 `dataString`然后填充`dataString.insert(0, buf)`. 这个特定的重载将复制到分隔符，因此`dataString`将包含`"Test string"`. 要解决此问题，请考虑使用`string::insert()`需要插入字符数的重载：`dataString.insert(0, buf, len)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T20:26:59.450

我以前没有使用过轮询功能。我所做的是创建一个工作线程，该线程专用于使用 run 函数处理 ASIO 处理程序，该函数会阻塞。Boost 文档说每个可用于处理异步事件处理程序的线程必须首先调用 io_service:run 或 io_service:poll 方法。我不确定您对调用 poll 的线程还做了什么。

因此，我建议至少为异步 ASIO 事件处理程序指定一个工作线程，并使用 run 而不是 poll。如果您希望该工作线程继续处理所有异步消息而不返回和退出，则将工作对象添加到 io_service 对象。有关示例，请参见此[链接。](https://stackoverflow.com/questions/12095258/threadpool-with-boostasio-does-not-quit)

# ffmpeg - 使用 ffmpeg 保存多个不同的 rtsp 流

> ID：14833887
> 
> 赞同：1
> 
> 时间：2013-02-12T13:39:24.887
> 
> 标签：ffmpeg

我可以将 rtsp 流录制到单个文件中，如下所示：

```
ffmpeg -i rtsp://5.63.151.4:443/atv/atv2 c:\atv.flv 
```

如何通过一个命令将两个或多个 rtsp 流录制到单独的文件中，例如流 1 到文件 1 和流 2 到文件 2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:15:20.097

我找到了答案：

```
ffmpeg -i rtsp://5.63.151.4:443/atv/atv2 -map 0 c:\atv.flv -i rtsp://live.sabah.com.tr:443/ahaber/ahaber3 -map 1 c:\ahaber.flv 
```

# html - 画布 3d 图

> ID：14833889
> 
> 赞同：1
> 
> 时间：2013-02-12T13:39:26.587
> 
> 标签：html, canvas, 3d, html5-canvas

我已经做了一个 3d 图表来绘制其中的点。我已经绘制了 x、y 和 z 轴。您也可以通过按箭头键来旋转轴。现在我的问题将轴标记为 x、y 和 z。我尝试使用 filltext 在画布中添加文本。但是文本被添加到画布但它不旋转。这是因为我猜我没有设置旋转效果。所以我怎样才能将旋转设置为文本，以便当轴旋转时文本也一起旋转。下面是我的代码。

```
 <!DOCTYPE html>

  <html>

  <head>

 <title>Canvas Surface Rotation</title>

 <style>

  body {

    text-align: center;

  }

  canvas {

    border: 1px solid black;

  }

  </style>

  <script>   

  var constants = {

    canvasWidth: 600, // In pixels.

    canvasHeight: 600, // In pixels.

    leftArrow: 37,

    upArrow: 38,

    rightArrow: 39,

    downArrow: 40,

    xMin: -10, // These four max/min values define a square on the xy-plane that the surface will be plotted over.

    xMax: 10,

    yMin: -10,

    yMax: 10, 

    xDelta: 0.01, // Make smaller for more surface points. 

    yDelta: 0.01, // Make smaller for more surface points. 

    colorMap: ["#060"], // There are eleven possible "vertical" color values for the surface, based on the last row of http://www.cs.siena.edu/~lederman/truck/AdvanceDesignTrucks/html_color_chart.gif

    pointWidth: 2, // The size of a rendered surface point (i.e., rectangle width and height) in pixels.

    dTheta: 0.05, // The angle delta, in radians, by which to rotate the surface per key press.

    surfaceScale: 24 // An empirically derived constant that makes the surface a good size for the given canvas size.

  };

  // These are constants too but I've removed them from the above constants literal to ease typing and improve clarity.

  var X = 0;

  var Y = 1;

  var Z = 2;

  // -----------------------------------------------------------------------------------------------------  

  var controlKeyPressed = false; // Shared between processKeyDown() and processKeyUp().

  var surface = new Surface(); // A set of points (in vector format) representing the surface.

  // -----------------------------------------------------------------------------------------------------

  function point(x, y, z)

  /*

    Given a (x, y, z) surface point, returns the 3 x 1 vector form of the point.

  */

  {       

    return [x, y, z]; // Return a 3 x 1 vector representing a traditional (x, y, z) surface point. This vector form eases matrix multiplication.

  }

  // -----------------------------------------------------------------------------------------------------

  function Surface()

  /*

    A surface is a list of (x, y, z) points, in 3 x 1 vector format. This is a constructor function.

  */

  {

    this.points = []; // An array of surface points in vector format. That is, each element of this array is a 3 x 1 array, as in [ [x1, y1, z1], [x2, y2, z2], [x3, y3, z3], ... ]

  }

  // -----------------------------------------------------------------------------------------------------  

  Surface.prototype.equation = function(x, y)

  /*

    Given the point (x, y), returns the associated z-coordinate based on the provided surface equation, of the form z = f(x, y).

  */

  {

    var d = Math.sqrt(x*x + y*y); // The distance d of the xy-point from the z-axis.

    return 4*(Math.sin(d) / d); // Return the z-coordinate for the point (x, y, z). 

  }

  // -----------------------------------------------------------------------------------------------------  

  Surface.prototype.generate = function()

  /*

    Creates a list of (x, y, z) points (in 3 x 1 vector format) representing the surface.

  */

  {

    var i = 0;

    for (var x = constants.xMin; x <= constants.xMax; x += constants.xDelta)

    {

      for (var y = constants.yMin; y <= constants.yMax; y += constants.yDelta)

      {

        this.points[i] = point(x, y, this.equation(x, y)); // Store a surface point (in vector format) into the list of surface points.              

        ++i;

      }

    }

  }

  // -----------------------------------------------------------------------------------------------------

  Surface.prototype.color = function()

  /*

    The color of a surface point is a function of its z-coordinate height.

  */

  {

    var z; // The z-coordinate for a given surface point (x, y, z).

    this.zMin = this.zMax = this.points[0][Z]; // A starting value. Note that zMin and zMax are custom properties that could possibly be useful if this code is extended later.

    for (var i = 0; i < this.points.length; i++)

    {            

      z = this.points[i][Z];

      if (z < this.zMin) { this.zMin = z; }

      if (z > this.zMax) { this.zMax = z; }

    }   

    var zDelta = Math.abs(this.zMax - this.zMin) / constants.colorMap.length; 

    for (var i = 0; i < this.points.length; i++)

    {

      this.points[i].color = constants.colorMap[ Math.floor( (this.points[i][Z]-this.zMin)/zDelta ) ];

    }

    /* Note that the prior FOR loop is functionally equivalent to the follow (much less elegant) loop:       

    for (var i = 0; i < this.points.length; i++)

    {

      if (this.points[i][Z] <= this.zMin + zDelta) {this.points[i].color = "#060";}

      else if (this.points[i][Z] <= this.zMin + 2*zDelta) {this.points[i].color = "#090";}

      else if (this.points[i][Z] <= this.zMin + 3*zDelta) {this.points[i].color = "#0C0";}

      else if (this.points[i][Z] <= this.zMin + 4*zDelta) {this.points[i].color = "#0F0";}

      else if (this.points[i][Z] <= this.zMin + 5*zDelta) {this.points[i].color = "#9F0";}

      else if (this.points[i][Z] <= this.zMin + 6*zDelta) {this.points[i].color = "#9C0";}

      else if (this.points[i][Z] <= this.zMin + 7*zDelta) {this.points[i].color = "#990";}

      else if (this.points[i][Z] <= this.zMin + 8*zDelta) {this.points[i].color = "#960";}

      else if (this.points[i][Z] <= this.zMin + 9*zDelta) {this.points[i].color = "#930";}

      else if (this.points[i][Z] <= this.zMin + 10*zDelta) {this.points[i].color = "#900";}          

      else {this.points[i].color = "#C00";}

    }

    */

  }

  // -----------------------------------------------------------------------------------------------------

  function appendCanvasElement()

  /*

    Creates and then appends the "myCanvas" canvas element to the DOM.

  */

  {

    var canvasElement = document.createElement('canvas');

    canvasElement.width = constants.canvasWidth;

    canvasElement.height = constants.canvasHeight;

    canvasElement.id = "myCanvas";

    canvasElement.getContext('2d').translate(constants.canvasWidth/2, constants.canvasHeight/2); // Translate the surface's origin to the center of the canvas.

    document.body.appendChild(canvasElement); // Make the canvas element a child of the body element.

  }

  //------------------------------------------------------------------------------------------------------

  Surface.prototype.sortByZIndex = function(A, B) 

  {

    return A[Z] - B[Z]; // Determines if point A is behind, in front of, or at the same level as point B (with respect to the z-axis).

  }

  // -----------------------------------------------------------------------------------------------------

  Surface.prototype.draw = function()

  {

    var myCanvas = document.getElementById("myCanvas"); // Required for Firefox.

    var ctx = myCanvas.getContext("2d");

    this.points = surface.points.sort(surface.sortByZIndex); // Sort the set of points based on relative z-axis position. If the points are visibly small, you can sort of get away with removing this step.

  var c=document.getElementById("myCanvas");
 var ctx=c.getContext("2d");
  ctx.font="20px Arial";
  ctx.fillText("X",250,0);

    for (var i = 0; i < this.points.length; i++)

    {

      ctx.fillStyle = this.points[i].color; 

      ctx.fillRect(this.points[i][X] * constants.surfaceScale, this.points[i][Y] * constants.surfaceScale, constants.pointWidth, constants.pointWidth);  

    }    

  }

  // -----------------------------------------------------------------------------------------------------

  Surface.prototype.multi = function(R)

  /*

    Assumes that R is a 3 x 3 matrix and that this.points (i.e., P) is a 3 x n matrix. This method performs P = R * P.

  */

  {

    var Px = 0, Py = 0, Pz = 0; // Variables to hold temporary results.

    var P = this.points; // P is a pointer to the set of surface points (i.e., the set of 3 x 1 vectors).

    var sum; // The sum for each row/column matrix product.

    for (var V = 0; V < P.length; V++) // For all 3 x 1 vectors in the point list.

    {

      Px = P[V][X], Py = P[V][Y], Pz = P[V][Z];

      for (var Rrow = 0; Rrow < 3; Rrow++) // For each row in the R matrix.

      {

        sum = (R[Rrow][X] * Px) + (R[Rrow][Y] * Py) + (R[Rrow][Z] * Pz);

        P[V][Rrow] = sum;

      }

    }     

  }

  // -----------------------------------------------------------------------------------------------------

  Surface.prototype.erase = function()

  {

    var myCanvas = document.getElementById("myCanvas"); // Required for Firefox.

    var ctx = myCanvas.getContext("2d");

    ctx.clearRect(-constants.canvasWidth/2, -constants.canvasHeight/2, myCanvas.width, myCanvas.height);

  }

  // -----------------------------------------------------------------------------------------------------

  Surface.prototype.xRotate = function(sign)

  /*

    Assumes "sign" is either 1 or -1, which is used to rotate the surface "clockwise" or "counterclockwise".

  */

  {

    var Rx = [ [0, 0, 0],

               [0, 0, 0],

               [0, 0, 0] ]; // Create an initialized 3 x 3 rotation matrix.

    Rx[0][0] = 1;

    Rx[0][1] = 0; // Redundant but helps with clarity.

    Rx[0][2] = 0; 

    Rx[1][0] = 0; 

    Rx[1][1] = Math.cos( sign*constants.dTheta );

    Rx[1][2] = -Math.sin( sign*constants.dTheta );

    Rx[2][0] = 0; 

    Rx[2][1] = Math.sin( sign*constants.dTheta );

    Rx[2][2] = Math.cos( sign*constants.dTheta );

    this.multi(Rx); // If P is the set of surface points, then this method performs the matrix multiplcation: Rx * P

    this.erase(); // Note that one could use two canvases to speed things up, which also eliminates the need to erase.

    this.draw();

  }

  // -----------------------------------------------------------------------------------------------------

  Surface.prototype.yRotate = function(sign)

  /*

    Assumes "sign" is either 1 or -1, which is used to rotate the surface "clockwise" or "counterclockwise".

  */      

  {

    var Ry = [ [0, 0, 0],

               [0, 0, 0],

               [0, 0, 0] ]; // Create an initialized 3 x 3 rotation matrix.

    Ry[0][0] = Math.cos( sign*constants.dTheta );

    Ry[0][1] = 0; // Redundant but helps with clarity.

    Ry[0][2] = Math.sin( sign*constants.dTheta );

    Ry[1][0] = 0; 

    Ry[1][1] = 1;

    Ry[1][2] = 0; 

    Ry[2][0] = -Math.sin( sign*constants.dTheta );

    Ry[2][1] = 0; 

    Ry[2][2] = Math.cos( sign*constants.dTheta );

    this.multi(Ry); // If P is the set of surface points, then this method performs the matrix multiplcation: Rx * P

    this.erase(); // Note that one could use two canvases to speed things up, which also eliminates the need to erase.

    this.draw();

  }

  // -----------------------------------------------------------------------------------------------------

  Surface.prototype.zRotate = function(sign)

  /*

    Assumes "sign" is either 1 or -1, which is used to rotate the surface "clockwise" or "counterclockwise".

  */      

  {

    var Rz = [ [0, 0, 0],

               [0, 0, 0],

               [0, 0, 0] ]; // Create an initialized 3 x 3 rotation matrix.

    Rz[0][0] = Math.cos( sign*constants.dTheta );

    Rz[0][1] = -Math.sin( sign*constants.dTheta );        

    Rz[0][2] = 0; // Redundant but helps with clarity.

    Rz[1][0] = Math.sin( sign*constants.dTheta );

    Rz[1][1] = Math.cos( sign*constants.dTheta );

    Rz[1][2] = 0;

    Rz[2][0] = 0

    Rz[2][1] = 0;

    Rz[2][2] = 1;

    this.multi(Rz); // If P is the set of surface points, then this method performs the matrix multiplcation: Rx * P

    this.erase(); // Note that one could use two canvases to speed things up, which also eliminates the need to erase.

    this.draw();

  }

  // -----------------------------------------------------------------------------------------------------

  function processKeyDown(evt)

  {                    

    if (evt.ctrlKey)

    {

      switch (evt.keyCode)

      {

        case constants.upArrow: 

          // No operation other than preventing the default behavior of the arrow key.

          evt.preventDefault(); // This prevents the default behavior of the arrow keys, which is to scroll the browser window when scroll bars are present. The user can still scroll the window with the mouse.              

          break;

        case constants.downArrow:

          // No operation other than preventing the default behavior of the arrow key.

          evt.preventDefault();

          break;

        case constants.leftArrow:

          // console.log("ctrl+leftArrow");

          surface.zRotate(-1); // The sign determines if the surface rotates "clockwise" or "counterclockwise". 

          evt.preventDefault(); 

          break;

        case constants.rightArrow:

          // console.log("ctrl+rightArrow");

          surface.zRotate(1);

          evt.preventDefault(); 

          break;

      }

      return; // When the control key is pressed, only the left and right arrows have meaning, no need to process any other key strokes (i.e., bail now).

    }

    // Assert: The control key is not pressed.

    switch (evt.keyCode)

    {

      case constants.upArrow:

        // console.log("upArrow");

        surface.xRotate(1);

        evt.preventDefault(); 

        break;

      case constants.downArrow:

        // console.log("downArrow");

        surface.xRotate(-1); 

        evt.preventDefault(); 

        break;

      case constants.leftArrow:

        // console.log("leftArrow");

        surface.yRotate(-1);  

        evt.preventDefault(); 

        break;

      case constants.rightArrow:

        // console.log("rightArrow");

        surface.yRotate(1);   

        evt.preventDefault(); 

        break;

    }

  }

  // -----------------------------------------------------------------------------------------------------
  Surface.prototype.plot = function(x, y, z)
  /*
    add the point (x, y, z)  (in 3 x 1 vector format) to the surface.
  */
  {
        this.points.push(point(x, y, z)); // Store a surface point
        var x=0;
        for (var x = constants.xMin; x <= constants.xMax; x += constants.xDelta)
        {
        this.points.push(point(x, 0, 0));

        }

        /*for (var x = constants.xMax+1; x <= constants.xMax+2; x += constants.xDelta)
        {
        this.points.push(point(11, 0, 0))
        }*/
        for (var x = constants.xMin; x <= constants.xMax; x += constants.yDelta)
        {
        this.points.push(point(0, x, 0));   
        }
        for (var x = constants.xMin; x <= constants.xMax; x += constants.yDelta)
        {
        this.points.push(point(0,0,x)); 
        }
  }

  function onloadInit()

  {

    appendCanvasElement(); // Create and append the canvas element to the DOM.

    surface.draw(); // Draw the surface on the canvas.

    document.addEventListener('keydown', processKeyDown, false); // Used to detect if the control key has been pressed.

  }

  // -----------------------------------------------------------------------------------------------------

  //surface.generate(); // Creates the set of points reprsenting the surface. Must be called before color().
   surface.plot(1,1,1);
  surface.color(); // Based on the min and max z-coordinate values, chooses colors for each point based on the point's z-ccordinate value (i.e., height).

  window.addEventListener('load', onloadInit, false); // Perform processing that must occur after the page has fully loaded.

  </script>

  </head>

  <body>

  <p>The z-axis extends out from the center of the screen.<br>

    To rotate about the x-axis, press the up/down arrow keys.
    To rotate about the y-axis, press the left/right arrow keys.
    To rotate about the z-axis, press the ctrl+left/ctrl+down arrow keys.
     Note that pressing an arrow key down continuously will not rotate the surface. The surface is rotated once per key press.</p>

  <!-- The canvas element is append to the DOM here. -->

    </body>

  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:55:37.020

文本绘制在一个矩形平面上。让左上角的坐标为 (xtl,ytl,ztl) 到右上角的坐标为 (xtr,ytr,ztr)，左下角的坐标为 (xbl,ybl,zbl)，然后必须将任何变换应用于这些坐标，然后必须计算二维投影到画布上的坐标。这将产生一个平行四边形，可以将文本绘制成该平行四边形，但也需要对其进行转换。

最简单的方法是计算左上角变换并在该点绘制标准文本，可能会根据 z 减小文本大小。

# java - Java: when do we need to use setter methods

> ID：14833893
> 
> 赞同：2
> 
> 时间：2013-02-12T13:39:34.600
> 
> 标签：java

I am new to Java...My question is

To do not access the data members outside of the class we use Access modifier, And why we are using setter methods to modify them outside of the class. Ex:-

```
public class Test
{

       private int a=10;
       private int b=20;
       public void sum(int x, int y)
       {
           System.out.println("Sum is:"+(x+y));
       }
       public void setA(int a)
       {
           this.a=a;
       }
       public void setB(int b)
       {
           this.b=b;
       } 
} 
```

Like these type of cases why don't we use public members , instead of modifying them with the help of setter methods? And in which type situations we need to use setters...?

I'm unable to understand that..Somebody please help me

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:41:35.180

这叫做封装。Mutator 方法确保以*预期和受控*的方式修改字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T13:42:27.087

因为您的要求可能会改变。

```
public void setA(int a)
{
    if (a >= 0) {
        this.a=a;
    }
} 
```

如果您刚刚使用了公共成员，则必须在`a`设置了值的任何地方更改代码。如果您使用 setter 方法，您的代码只需在一个地方更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:43:52.107

**类的属性**（在您的情况下为 a 和 b ）描述了您的对象的状态。**因此，在 OOP 中将状态**设为私有并仅通过公共方法访问它们是一种很好的做法。

仅当有公共 setter/getter 时，您才能访问私有属性。因此，这为您提供了**灵活性**以及**限制访问**的选项（如果需要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:43:17.447

**封装的好处：**

1.  类的字段可以设置为只读或只写。
2.  一个类可以完全控制其字段中存储的内容。
3.  类的用户不知道该类如何存储其数据。一个类可以改变一个字段的数据类型，并且类的用户不需要改变他们的任何代码。

**一个简单的用例：**

您只想保持最低限度`a`：

```
private int a;

public void setA(int a) {
    if(this.a > a)
         this.a = a;
} 
```

然后你改变了主意，想保持最大`a`：

```
public void setA(int a) {
    if(this.a < a)
         this.a = a;
} 
```

如果您还没有使用`setA()`方法，那么您必须更新您尝试将新值设置为的每个位置`a`。但是如果你用过`setA()`，那么除了方法之外，你不需要接触任何其他地方`setter`。

请看类似的问题：

[Java中getter/setter的用途是什么？](https://stackoverflow.com/questions/1345753/what-are-the-uses-of-getter-setters-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T13:44:46.980

根据 OOP，您应该始终使用私有属性来封装信息，并确保另一个程序员或对象会由于对变量的错误操作而影响任何方法功能，例如：

```
 private int a=10;
   private int b=20;
     public void div()
          {
                  System.out.println("Div is:"+(a/b));
           }
      public void setA(int a)
             {
                         this.a=a;
            }
     public void setB(int b)
           {
                  if(b!=0)
                    this.b=b;
           } 
```

例如，在这种情况下，setter 验证（我应该抛出错误或其他东西）不会将 0 保存为属性，因为如果发生这种情况，它将损坏**div**方法。

因此，基本上，当您需要保护属性上的数据或者您想确保保存在属性中的任何值都不会影响对象内部的功能/方法时，您可以使用 setter。

pd：对不起我的英语。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T14:17:38.030

在一个[经典的生物学实验](https://erikbuys.files.wordpress.com/2012/04/monkeys-scapegoating-guilty-by-association.jpg?w=497&h=369)中，一群猴子很想抓一根香蕉，结果给每个人洗了个冷水澡。他们很快就会停止尝试。渐渐地，猴子被新人取代，每个新手都学会了不碰香蕉的艰难方法：接受老手的一轮踢和咬。很快就没有原来的成员了；在场的任何人都没有亲眼目睹过冷水淋浴，事实上该机制早已被关闭。然而，新手仍然会因为试图吃香蕉而遭到殴打。

在我们的故事中，香蕉是公共领域，猴子就在你身边。不加批判地回避公共领域不是最佳做法。这是一种**宗教习俗**。有一系列标准的“论据”来支持它，但没有一个是普遍适用的。仅举几例：

1.  “*需求可能会改变*”——对纯数据对象的设置器的需求永远不会改变；它是最纯粹的稳定 API 示例之一。在业务逻辑设置中，域模型上的 getter/setter 绝不能只做纯粹的获取/设置，因为它们在许多不同的上下文中使用，包括测试，并且不能有任何意外。除了保留设置值之外的所有问题都在 getter/setter 代码之外处理；

2.  “*内部表示可能会改变*”——存储 an 的最佳方式`int`是在 an 中`int`，a`String`在 a`String`中，依此类推。永远不会出现这样的真实情况。

3.  “*公共领域打破封装，OOP 的邮递*”——公共 getter 和 setter 没有有效的封装，这是一种形式，没有实际效果；

4.  “*公共字段防止通过框架代码进行检测/建议*”——看看 Hibernate：它允许公共字段与 getter/setter 处于同等地位。这是现代 Java 中一个已解决的问题。

在所讨论的类仅在本地使用且不作为公共 API 公开的每种情况下，您都可以使用直接字段访问。此外，如果一个类表示纯数据，在许多情况下，即使在公共 API 中也可以使用公共字段。例如，参见`GridBagConstraints`Java 标准库。

# jquery - 如何使用jquery将插入符号后的连续数字转换为上标？

> ID：14833895
> 
> 赞同：2
> 
> 时间：2013-02-12T13:39:37.717
> 
> 标签：jquery, text, superscript

这个问题与[如何使用 jquery 将插入符号后的数字转换为上标有关](https://stackoverflow.com/questions/14813023/how-to-convert-numbers-after-caret-to-superscript-with-jquery/14813395)，我得到了一个[很好的答案](https://stackoverflow.com/a/14813395/1066234)。

现在问题，我需要扩展[最近的脚本 | jsfiddle](http://jsfiddle.net/MBXTG/)，以便它考虑连续的数字。

最近的脚本接受一个字符串，并检查它的插入符号。然后：

1.  如果插入符号后面没有括号，则只为下一个字符上标。`x^2`变成`x<sup>2</sup>`
2.  如果有左括号，则上标直到右括号。`x^(2y+1)`变成`x<sup>2y+1</sup>`

但是，我需要扩展 n°1，因为可能有一个数字包含**几个数字**甚至**variables**。

所以我们需要一个新的n°1：

1.  如果插入符号后面没有括号，只要是数字或字符，就为**所有连续字符上标。**这样`x^12a`就变成了`x<sup>12a</sup>`

我试图实现它，包括一个变量`afternext = input[ (i+1) ])`并通过存储它来检查这个字符`if(afternext.match(/^[0-9a-zA-Z]+$/)) { ... }`，但我失败了:(

因此，如果今天有人感觉足够健康，我很高兴看到您的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:12:31.163

[给你，先生](http://jsfiddle.net/MBXTG/3/)。我对其进行了一些重构以使用内部循环而不是缓冲区数组，因为它与额外的缓冲条件有点混乱。

```
// transform carets, e.g. x^2 to x<sup>2</sup> and x^(2y) to x<sup>2y</sup>
function superify(input) {
    if(!input) return input;
    var output = [];
    var alphanumeric = /^[a-z0-9]+$/i;
    var i = 0;
    var parens;

    //outer loop for iterating string
    while(i < input.length) {
        var current = input[i++];
        var next    = input[i];

        if(current === '^' && next && ((parens = (next === '(')) || next.match(alphanumeric))) {

            var first = next;

            //start super
            output.push('<sup>');
            if(!parens) 
                output.push(first);

            //push chars to output until break or string end
            while(i++ < input.length) {
                current = input[i];
                if(parens && current === ')')
                    break;
                if(!parens && !current.match(alphanumeric))
                    break;
                output.push(current);
            }

            output.push('</sup>');
            if(!parens) 
                output.push(current);
            i++;
        }
        else {
            output.push(current);
        }
    }

    return output.join('');
} 
```

# javascript - JavaScript Onclick 下拉菜单不起作用

> ID：14833906
> 
> 赞同：1
> 
> 时间：2013-02-12T13:40:03.143
> 
> 标签：javascript, jquery, drop-down-menu, menu, onclick

我正在尝试为网站制作一个 onclick 下拉菜单。我希望我的 .sublink 元素在我单击 .dropdown 元素时向下滑动，然后在我单击页面上的其他任何位置时让 .sublink 向上滑动。

**菜单下拉，但当我单击网站上的其他位置时它不会滑回。**

以下是我目前拥有的菜单代码。有人可以帮我吗？谢谢！

```
$(function() {
$('.dropdown').click(function() {
    $('.sublinks').stop(false, true).hide();

    var submenu = $(this).parent().next();

    submenu.css({
        position: 'absolute',
        top: $(this).offset().top + $(this).height() + 'px',
        left: $(this).offset().left + 'px',
        zIndex: 1000
    });

    submenu.stop().slideDown(300);

   //click anywhere outside the menu
   $(document).click(function() {
        var $el = $(this);
        $el.not('.dropdown') && $el.slideUp(300);
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:45:37.290

尝试使用[模糊事件](http://docs.jquery.com/Events/blur)：

```
$('.dropdown').blur(function () {
     var $submenu = (...); // <- get submenu selector here
     $submenu.slideUp();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:45:35.947

看起来你的点击钩子在下拉点击钩子里面，试试这样的（未测试）；

```
$(function() {
//click on menu(dropdown div)
    $('.dropdown').click(function() {
        $('.sublinks').stop(false, true).hide();

        var submenu = $(this).parent().next();

        submenu.css({
            position: 'absolute',
            top: $(this).offset().top + $(this).height() + 'px',
            left: $(this).offset().left + 'px',
            zIndex: 1000
        });

        submenu.stop().slideDown(300);
    });

//click anywhere in document
   $(document).click(function() {
        var $el = $(this);
        $el.not('.dropdown') && $el.slideUp(300);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:51:56.817

在您的代码中，用于单击文档中的任意位置，这将指向一个文档，而不是事件发生的实际元素。您可以像下面这样修改您的代码（使用[e.target](http://api.jquery.com/event.target/)而不是`this`）：

```
 $(function() {
    $('.dropdown').click(function() {
        $('.sublinks').stop(false, true).hide();

        var submenu = $(this).parent().next();

        submenu.css({
            position: 'absolute',
            top: $(this).offset().top + $(this).height() + 'px',
            left: $(this).offset().left + 'px',
            zIndex: 1000
        });

        submenu.stop().slideDown(300);
    });
    //click anywhere outside the menu
    $(document).click(function(e) {        
            var $el = $(e.target);
            if(!$el.hasClass('.dropdown') && $el.closest(".dropdown").length == 0 && !$el.hasClass('.sublinks') && $el.closest(".sublinks").length == 0)
                $('.sublinks:visible').slideUp(300);
     });
}); 
```

另请参阅`$el.closest(".dropdown").length == 0`它是为了确保点击不会发生在的子元素中`.dropdown`

这是一个演示。单击不同位置并检查控制台：http: [//jsfiddle.net/2ryWF/](http://jsfiddle.net/2ryWF/)。你会发现这总是指向文档

# java - 来自 REST API 中可选 QueryString 参数的日历对象

> ID：14833909
> 
> 赞同：0
> 
> 时间：2013-02-12T13:40:06.253
> 
> 标签：java, spring-mvc, timestamp, query-string

我有一个 REST API，可以选择支持两个查询字符串参数：`starttime`和`endtime`，都是不言自明的。

目前我将`WebRequest`参数传递给我的控制器 API 并搜索时间戳（编码为`Long`），然后将其转换为`Calendar`.

我想知道是否有一种方法可以将`Calendar`参数自动传递给 API，而无需处理 queryString。就像是

```
public Object[] myApi([...], Calendar startTime, Calendar endTime) 
```

最重要的是，参数**必须**都是可选的（可以指定任何参数或为空）

我怎样才能在 Spring MVC 中做到这一点？

当前代码示例：

```
@RequestMapping(value = "/rest/{datatype}", method = RequestMethod.GET, produces = { "application/json" })
public @ResponseBody
Object[] getData(@PathVariable("datatype") String dataType,
        WebRequest request) throws HttpException {
    if (dataType == null || "".equals(dataType))
        throw new ClientException("Datatype cannot be empty");

    Calendar timestampInit = null;
    if (request.getParameter(PARAMETER_STARTTIME) != null) {
        try {
            timestampInit = Calendar.getInstance();
            timestampInit.setTimeInMillis(Long.valueOf(request
                    .getParameter(PARAMETER_STARTTIME)));
        } catch (NumberFormatException ex) {
            throw new ClientException("Invalid start time", ex);
        }
    }

    Calendar timestampEnd = null;
    if (request.getParameter(PARAMETER_ENDTIME) != null) {
        try {
            timestampEnd = Calendar.getInstance();
            timestampEnd.setTimeInMillis(Long.valueOf(request
                    .getParameter(PARAMETER_ENDTIME)));
        } catch (NumberFormatException ex) {
            throw new ClientException("Invalid end time", ex);
        }
    }
            [...]
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:48:36.240

看看 StringParamUnmarshaller [http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/StringConverter.html](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/StringConverter.html) 通常大多数 REST 框架都是 +- 相同，所以我相信你的配置应该有相同的东西

# java - 运行文件的Hadoop错误给出了错误

> ID：14833910
> 
> 赞同：0
> 
> 时间：2013-02-12T13:40:07.650
> 
> 标签：java, hadoop, mapreduce, sequential

我有一个 Hadoop java 文件用于在我的 Eclipse IDE 中运行它，当我运行这个 hadoop 以从输入文本文件生成序列文件时，我收到以下错误。

```
 Feb 12, 2013 6:33:02 PM org.apache.hadoop.fs.FileSystem$Cache$Key <init>
   WARNING: uri=file:///

   javax.security.auth.login.LoginException: Login failed: Cannot run program "whoami":        CreateProcess error=2, The system cannot find the file specified
at     
                    org.apache.hadoop.security.UnixUserGroupInformation.login(UnixUserGroupInformation.java:250       )
       at org.apache.hadoop.security.UnixUserGroupInformation.login(UnixUserGroupInformation.java:275)
at org.apache.hadoop.security.UnixUserGroupInformation.login(UnixUserGroupInformation.java:257)
at org.apache.hadoop.security.UserGroupInformation.login(UserGroupInformation.java:67)

at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:1438)

at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1376)

at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:215)

at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:120)

at org.apache.hadoop.mapred.JobConf.getWorkingDirectory(JobConf.java:319)

at org.apache.hadoop.mapred.FileInputFormat.addInputPath(FileInputFormat.java:313)

at main.LineIndexer.main(LineIndexer.java:81) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:24:28.090

在 Windows 上运行 IDE？

尝试安装[unxutils](http://sourceforge.net/projects/unxutils/)（将其解压缩到某处），并将 usr/local/wbin 文件夹放在您的 Windows $PATH 上，重新启动您的 IDE（或将路径添加到您的 IDE 运行时路径），然后重试

# sql - 两种类型的发票编号（2 个具有 0..1 关系的表）

> ID：14833913
> 
> 赞同：1
> 
> 时间：2013-02-12T13:40:13.647
> 
> 标签：sql, sql-server-2008, database-design

我有表格发票 - PK 是 year+document_type_id+number（这是当前编号，我无法更改）。所以，数据是这样的：

```
year    document_type_id   number
2013    351                1  
2013    351                2
2013    352                1 
```

现在，我需要开发第二种编号类型 - 表 invoices_2 - PK 是 year+market_id+cash_register_id+number（这是法律禁止的一些发票的编号），FK 是 invoices_year+invoices_document_type_id+invoices_number。

invoice - invoice_2 必须是 1 -> 0..1 关系。

问题是在 invoices_2 表中我可能有这个（我想消除它 - 使用一些 PK+FK 组合？）：

```
year  market_id  cash_register_id  number  invoices_year inovices_document_type invoices_number
2013     1              1            1         2013           351                    1
2013     1              1            2         2013           351                    1 
```

如您所见，使用的发票 2013-351-1 可以在 invoices_2 表中添加超过 1 次，必须禁止。

见[http://www.sqlfiddle.com/#!3/6b42c/1](http://www.sqlfiddle.com/#!3/6b42c/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:52:59.963

最好将第二个编号系统放在自己的表中。

```
Invoice
-------
year
document_type_id
number
invoice_2_fk
...

Invoice_2
---------
invoice_2 _id
year
market_id
cash_register_id
number 
```

Invoice 表中的 invoice 2 外键可以为空。当它为空时，没有发票 2。当它是有效 id 时，有发票 2。这是一对零/一的关系。

# django - django po文件中的换行符

> ID：14833917
> 
> 赞同：2
> 
> 时间：2013-02-12T13:40:31.930
> 
> 标签：django, django-templates, po

如何在**.po**文件内的翻译字符串中使用换行符？目前我添加了“ **\n** ”并`{{msg|linebreaks}}`在我的模板中使用，但字符串打印在一行中......我怎样才能在多行上打印它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:09:30.570

我假设你想要 HTML 输出。在这种情况下，最好在字符串中包含 HTML 标记：

```
{% blocktrans %}
First line<br/>
Second line
{% endblocktrans %} 
```

如果您正在寻找其他东西，请更好地描述您实际想要实现的目标。

更新：

如果这些线是独立的，那么实际上将它们分开可能会更好：

```
{% trans "First line" %}
<br/>
{% trans "Second line" %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T09:32:12.603

有点晚了，但也许对某人有帮助，像这样添加你的翻译：

文件

```
msgid "_your_msgid"
msgstr "first line\nsecond line" 
```

模板

```
{% trans '_your_msgid' as local_var %}
{{ local_var|linebreaksbr }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-21T11:09:27.677

您可以`&#10;`在 django 模板文件和`.po`文件中使用字符

像这样`.po`：

```
msgid "Psycological&#10;aid"
msgstr "Психологическая&#10;помощь" 
```

django模板：

```
{% trans 'Psycological&#10;aid' %} 
```

包含块应该有`white-space: pre-line;`css规则

# asp.net-mvc - MVC、ASP.NET 应用程序、无处链接和非标准标记

> ID：14833931
> 
> 赞同：2
> 
> 时间：2013-02-12T13:41:26.367
> 
> 标签：asp.net-mvc

对于 MVC、ASP.NET 应用程序，如何使用 HTML Helper 生成如下链接 -

```
<a class="myClass" gatag="myGatag" href="#">Link to nowhere!</a> 
```

在应用程序中的某些情况下，我希望有一个不会去任何地方的链接，这就是为什么我有`href="#"`.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:23:17.287

使用 MVC 4 这可以工作（可能是 2 和 3，但我没有使用这些的项目）

```
@Html.ActionLink("Link to nowhere!", "", "", new { href="#", @class="myClass", gatag="myGatag" }) 
```

呈现为

```
<a class="myClass" gatag="myGatag" href="#">Link to nowhere!</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:57:38.777

也可以使用自定义 html 助手来完成。

通常对于这类扩展，我将在 MVC Web 应用程序中创建一个名为“Infrastructure”的文件夹，并创建一个静态类“HtmlHelperExtensions”并放置以下方法。

```
public static MvcHtmlString ActionLink(this HtmlHelper htmlHelper, string text)
{
    TagBuilder aTag = new TagBuilder("a");

    aTag.MergeAttribute("gatag", "myGatag");
    aTag.MergeAttribute("href", "#");
    aTag.AddCssClass("myClass");

    aTag.SetInnerText(text);

    return MvcHtmlString.Create(aTag.ToString(TagRenderMode.Normal));
} 
```

可以使用 View 从 View 调用它

```
@Html.ActionLink("Link to nowhere!") 
```

# mongodb - WriteConcernResult 结果 null mongodb

> ID：14833932
> 
> 赞同：1
> 
> 时间：2013-02-12T13:41:28.103
> 
> 标签：mongodb

当尝试使用以下代码使用 mongodb 进行更新时，我的结果为空：在 C# 中

```
public bool UpdateContact(string id, Contact item)       
{
    IMongoQuery query = Query.EQ("_id", id);
    item.LastModified = DateTime.UtcNow;
    IMongoUpdate update = Update
        .Set("Email", item.Email)
        .Set("LastModified", DateTime.UtcNow)
        .Set("Name", item.Name)
        .Set("Phone", item.Phone);
    WriteConcernResult result = _contacts.Update(query, update);
    return result.UpdatedExisting;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:50:16.207

如果您没有为 C# 驱动程序（以及可能的其他驱动程序）使用新的连接样式，则您的连接可能被配置为[默认没有 WriteConcern](https://github.com/mongodb/mongo-csharp-driver/blob/master/Release%20Notes/Release%20Notes%20v1.7.md)。

如果没有配置 WriteConcern，C# API 将返回 a`null`作为您提供的代码的结果（有关更多信息，请参阅[更新）](http://api.mongodb.org/csharp/1.7/html/a2464e96-3ee4-b763-f549-0fab88b5aea0.htm)

例如，如果您的连接是这样的：

```
var connectionString = "mongodb://localhost";
var server = MongoServer.Create(connectionString); // deprecated
var database = server.GetDatabase("test"); // WriteConcern defaulted to Unacknowledged 
```

这将被配置为无写入问题。

您应该使用这种风格（从 C# 1.7 驱动程序开始）：

```
var connectionString = "mongodb://localhost";
var client = new MongoClient(connectionString);
var server = client.GetServer();
var database = server.GetDatabase("test"); // WriteConcern defaulted to Acknowledged 
```

不同之处在于您需要使用`MongoClient`类（并从该对象实例中获取和）`MongoServer`。`MongoDatabase`

# mysql - MYSQL 在子查询后插入计数

> ID：14833940
> 
> 赞同：4
> 
> 时间：2013-02-12T13:41:48.650
> 
> 标签：mysql, insert, subquery, nested-queries

我正在尝试将一些数据插入到表中，但仅当子查询 COUNT 大于 0 时。

这就是我到目前为止所拥有的。

```
INSERT INTO users_friends (userId, friendId) VALUES (77, 100) 
WHERE 
(SELECT COUNT(id) FROM users WHERE email = 'a@g.com') > 0 
```

两个查询都独立工作，仅供参考。

希望这应该是一个简单的修复。干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:47:29.277

[SQLFiddle 演示，如果有记录 'a@g.com'](http://sqlfiddle.com/#!2/5b15c/1)

[SQLFiddle 演示，如果没有记录 'a@g.com'](http://sqlfiddle.com/#!2/f5b2b/1)

```
INSERT INTO users_friends (userId, friendId) 
SELECT 77, 100 
FROM users WHERE email = 'a@g.com' LIMIT 1; 
```

另一种方法是：

```
INSERT INTO users_friends (userId, friendId) 
SELECT 77, 100 
FROM dual
WHERE EXISTS
      ( SELECT * FROM users WHERE email = 'a@g.com' ) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:48:18.717

试试这个：：

```
INSERT INTO users_friends (userId, friendId) 
(SELECT 77, 100  FROM users GROUP BY email HAVING email= 'a@g.com' and count(id)>0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:56:51.127

```
INSERT INTO users_friends (userId, friendId) 
SELECT 77, 100 FROM users WHERE email = 'a@g.com'
GROUP BY email
HAVING COUNT(id) > 0 
```

# android - ios opengl es在干净的C上渲染纹理

> ID：14833942
> 
> 赞同：0
> 
> 时间：2013-02-12T13:41:54.140
> 
> 标签：android, ios, c, opengl-es, textures

对不起我的英语我想在干净的 C 上绘制纹理，没有目标 c！有必要为ios / android编写一个库

我画

```
- (BOOL)createFramebuffer{
glGenFramebuffersOES(1, &viewFramebuffer);
glGenRenderbuffersOES(1, &viewRenderbuffer);

glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);

[context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(id<EAGLDrawable>)self.layer];//a string
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);

glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

if(glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES) != GL_FRAMEBUFFER_COMPLETE_OES) {
    NSLog(@"failed to make complete framebuffer object %x", glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES));
    return NO;
}

return YES;
}

- (void)drawView {

[EAGLContext setCurrentContext:context];//a string

glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, spriteTexture);

Byte *byteData = (Byte*)malloc(3686400);
memcpy(byteData, [texData bytes]+kon, 3686400);
glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, 1280, 720, GL_RGBA, GL_UNSIGNED_BYTE, byteData);
free(byteData);

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context presentRenderbuffer:GL_RENDERBUFFER_OES];//a string
} 
```

如何摆脱与目标 c 相关的这些行？

```
1 [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(id<EAGLDrawable>)self.layer];
2 [EAGLContext setCurrentContext:context];
3 [context presentRenderbuffer:GL_RENDERBUFFER_OES];</code> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:06:55.987

你不能，并且仍然在 iOS 中将这个渲染到屏幕上。EAGLContext 是一个 Objective-C 对象，用于管理您的 OpenGL ES 上下文，您需要与它交互才能渲染和显示您的场景。

但是，您可以将对此的访问包装在一个函数中，该函数根据您的目标平台更改其内容。编译器条件可以帮助您做到这一点。

# php - 在 PHP 中保存 $_POST['username'] 的状态

> ID：14833943
> 
> 赞同：0
> 
> 时间：2013-02-12T13:41:54.713
> 
> 标签：php, session

如何`$_POST['username']`在 PHP 中保存状态。我制作了一个登录表单，该表单发布到 MySql，但它也发布到用户页面，如何保存用户页面的状态，因此当用户转到另一个页面时，状态仍将保存，直到您登录再次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:44:07.703

使用 Sessions 来存储它。[在这里](http://php.net/manual/en/features.sessions.php)找到它。像下面这样使用它。

设置如下，

```
session_start();
$_SESSION['username'] = $_POST['username']; 
```

在另一页取回

```
session_start();
$username = $_SESSION['username']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:44:19.053

您想查看[会话](http://www.php.net/manual/en/features.sessions.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:44:02.350

使用会话。此链接将为您提供所需的所有信息：http: [//php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:44:50.050

一个很好的方法是在 PHP 中使用会话。您可以保存您想要的所有类型的信息，并且可以在会话期间访问

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T13:45:35.240

您可以使用：

1.  [PHP 会话](http://www.php.net/manual/en/features.sessions.php)或
2.  [饼干](http://php.net/manual/en/features.cookies.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-12T13:46:17.300

使用变量 $username = $_POST['username']; 在查询中插入值

您可以在另一个页面上使用 $_POST 和 $_REQUEST 获得价值。如果您将带有表单操作的数据发布到另一个页面，那么您不需要使用 session 。如果你想在页面 session_start() 上通过会话首先启动会话传递值。然后放入 $_SESSION['userName'] = $_POST['username']; 和另一个页面，您可以获得价值 .first start session session_start(); 然后 $userName = $_SESSION['userName'];

回声$用户名；它应该打印值。

# javascript - Adobe AIR HTML 应用程序白屏问题

> ID：14833955
> 
> 赞同：0
> 
> 时间：2013-02-12T13:42:49.240
> 
> 标签：javascript, air

我有这个问题很长一段时间，但找不到任何解决方案。

有时，当应用程序繁忙（或者应用程序中的 iframe 很忙）时，应用程序 UI 会变成白色，并且它只会在某些计算机上发生。（其实我自己的笔记本电脑上从来没有遇到过这种情况）

有谁知道为什么会发生这种情况或有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:01:04.283

Once possible cause could be the fact that Adobe Air is a single threaded environment.

If your application is having to undertake a particularly resource intensive task it will continue until it has finished the job and hence, won't update the UI until after this time often resulting in the appearance of the application 'hanging'.

# jsf - Jsf ui:repeat size 不获取 java bean 值

> ID：14833968
> 
> 赞同：1
> 
> 时间：2013-02-12T13:43:33.703
> 
> 标签：jsf, jsf-2, primefaces, datatable, uirepeat

JSF 2.0 的 ui:repeat 标记获取 java bean(arraylist) 的值，因为它是 value 属性，但 size 属性没有。我在数据表中使用 ui repeat 迭代地显示状态，ui repeat 显示每个状态的注释。我从 java 类中给出了 ui repeat 的 size 属性，因为每个状态都有不同数量的注释。因此大小应该动态决定。这是我所做的总结。模型类：

```
@ManagedBean
@RequestScoped
public class Comment {
     private String commentAuthorName;
//getter and setter
} 
```

这表示具有注释列表的 Status 类：

```
@ManagedBean
@RequestScoped
public class Status {
    private ArrayList<Comment> commentList;
    private int numOfComments;
//getter and setter
} 
```

这是关于 StatusBean 类的一个想法：

```
@ManagedBean
@SessionScoped
public class StatusBean {
    List<Status> panelList = new ArrayList<Status>();
    List<Comment> commentList = new ArrayList<Comment>();
    public static void process() {
        panelList = StatusService.getPersonalStatus(log.getLoggeduser());//means fill list
        commentList = StatusService.getPersonalComments(panelList);//gets comments via related statuses
        for (int i=0; i<panelList.size(); i++) { //for each status
             Status status = panelList.get(i);
             for(Comment comment : commentList) { //for each comment of each status
             status.setNumOfCommentsShown(1);
           }
        }
    }
} 
```

视图层如下所示。PrimeFaces DataTable 中包含的 UI 重复能够显示每个状态的每个评论。我正在使用数据表，因为它具有实时滚动功能，并且必须迭代地显示所有状态，并且 ui repeat 看起来最好显示每个状态的每个评论。

```
<p:dataTable liveScroll="true" value="#{StatusBean.panelList}" 
             var="Status" scrollable="true">
   <ui:repeat var="Comment" value="#{Status.commentList}" 
           size="#{Status.numOfComments}"></ui:repeat>
</p:dataTable> 
```

调试结果显示 #{Status.numOfComments} 正确填充了预期的整数，但仍然无法正常工作。但是如果我手动编写 size=3 ，它会给出预期的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:05:09.427

据我所知，直到今天还没有答案，所以我会回答你的问题，并就我肯定会在你的堆栈中改变的内容给你一些想法。

## 分析你的问题

`<ui:repeat>`关于托管 bean 属性指定的with属性的使用，我编写了与您类似的代码`size`，但它也不适用于我。无论我多么努力地尝试通过 EL 设置属性值，它都不起作用。此外，它也不适用于最简单的 EL `#{5}`。我不知道问题出在哪里，但我认为这里的经验会启发我们为什么会发生这种情况，对吗？

可能是JSF`<ui:repeat>`组件的故障，那么我们将提出一个关于它的问题。如果它是一个特性，那么完全理解它会很好。

## 据我了解，您的代码的一个工作示例

关于上面的代码，有很多简单的解决方法。如果您如此坚持使用该`<ui:repeat>`组件，我将为您提供基本的工作示例。您的视图层由一个 JSF 托管 bean 和两个模型类支持。我的解决方案使用`<ui:param>`和`<ui:fragment>`. 开始了。

风景：

```
<p:dataTable value="#{statusBean.statusesList}" var="status">
    <p:column headerText="Status name">
        <h:outputText value="#{status.statusName}"/>
    </p:column>
    <p:column headerText="Status comments">
        <ul>
            <ui:param name="max" value="#{status.numOfComments}"/>
            <ui:repeat var="comment" value="#{status.commentList}" varStatus="statusVar">
                <ui:fragment rendered="#{statusVar.index lt max}">
                    <li>
                        <h:outputText value="Author: #{comment.authorName}; comment: #{comment.description}"/>
                    </li>
                </ui:fragment>
            </ui:repeat>
        </ul>
    </p:column>
</p:dataTable> 
```

该模型：

```
public class Comment {

    private String authorName;
    private String description;

} 
```

和

```
public class Status {

    private List<Comment> commentList;
    private int numOfComments;
    private String statusName;

} 
```

托管bean：

```
@ManagedBean
@RequestScoped
public class StatusBean {

    private List<Status> statusesList;

    public StatusBean() {
        Status status;
        List<Status> statusesList = new ArrayList<Status>();
        Comment comment;
        List<Comment> commentList;
        for(int s = 0; s < 10; s++) {
            commentList = new ArrayList<Comment>();
            for(int c = 0; c < 20; c++) {
                commentList.add(new Comment("User " + (s + 1) + "-" + (c + 1), "Description for comment " + (s + 1) + "-" + (c + 1)));
            }
            statusesList.add(new Status(commentList, (s + 1), "Status " + (s + 1)));
        }
        this.statusesList = statusesList;
    }

} 
```

## 我肯定会在你的代码中改变的事情

代码运行后，我想说明我会做的一些改进。

1.  使您的模型成为**模型**：摆脱`@ManagedBean`和`@...Scoped`注释，并将它们（分离的）`@Entity`类改为，由您的服务 bean 钻研；
2.  尝试使模型尽可能简单，同时保留应用程序的功能。我的示例仅使用状态列表作为 bean 中的数据持有者：您不需要重复的注释列表，因为它已经存在于`Status`对象中；
3.  不要在 bean 中使用静态方法，而是在页面操作方法 (Servlet 3.0)、`preRenderView`侦听器 (Servlet 2.5) 或方法中（预）加载必要的数据`@PostConstruct`。好好选择 bean 范围。咨询[BalusC 的出色概述](http://balusc.blogspot.ru/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)将是一个很好的起点。
4.  使用服务方法调用仅从数据源预加载您需要的数据：如果您愿意显示有限数量的评论，为什么要从您的数据源中获取它们？根据您的需要限制结果集（请记住，如果您想实现“查看全部”功能，您可以使用 ajax 更新您的元素并加载其余部分）。让它以这种方式工作就不需要使用`size="..."`;
5.  使用标准 UI 组件或您选择的组件库的组件，即 Primefaces，因此请尝试遵循 Luiggi Mendoza 的建议。

托管 bean 的示例启动示例如下：

```
@ManagedBean
@RequestScoped
public class StatusBean {

    private List<Status> statusesList;

    @EJB
    private StatusService statusService;

    @ManagedProperty(value="#{user}")
    private User user;

    @PostConstruct
    public void init() {
        statusesList = statusService.getStatuses(user);
    }

    public List<Status> getStatusesList() {
        return statusesList;
    }

} 
```

# java - 使用 Eclipse 或 NetBeans 等 IDE 时如何在 Java 中获取系统控制台？

> ID：14833973
> 
> 赞同：1
> 
> 时间：2013-02-12T13:43:55.040
> 
> 标签：java, eclipse

我正在尝试使用 Eclipse 或 NetBeans 等 IDE 在 Java 开发中获取系统控制台。但我无法得到同样的结果。

如果我 jar 程序并通过命令提示符运行它，它可以正常工作，但在 IDE 中运行时并非如此。

如何获取与 IDE 控制台一起使用的系统控制台对象？

# android - Android：FrameAnimation 和 Bitmap 大小超过

> ID：14833974
> 
> 赞同：0
> 
> 时间：2013-02-12T13:43:58.687
> 
> 标签：android, animation, memory, bitmap

在阅读了 stackoverflow 站点中的一些帖子后，我尝试使用 Frame 动画来构建动画

```
private void startAnimation(){
    fireAnimation = new AnimationDrawable();
    fireAnimation.addFrame(getResources().getDrawable(R.drawable.fire1), 100);
    fireAnimation.addFrame(getResources().getDrawable(R.drawable.fire2), 100);
    fireAnimation.addFrame(getResources().getDrawable(R.drawable.fire3), 100);
    fireAnimation.addFrame(getResources().getDrawable(R.drawable.fire4), 100);
    ...
   fireAnimation.addFrame(getResources().getDrawable(R.drawable.fire16), 100);

} 
```

然后在 onCreate() 我做 startActivity();

```
But I have an error
02-12 13:31:31.909: E/dalvikvm-heap(4902): 1535664-byte external allocation too large for this process.
02-12 13:31:31.909: E/GraphicsJNI(4902): VM won't let us allocate 1535664 bytes
02-12 13:31:31.939: W/dalvikvm(4902): threadid=1: thread exiting with uncaught exception (group=0x40018560)
02-12 13:31:31.959: E/AndroidRuntime(4902): FATAL EXCEPTION: main
02-12 13:31:31.959: E/AndroidRuntime(4902): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.content.res.Resources.getDrawable(Resources.java:581)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at com.example.kersplatt.GameActivity.startAnimation(GameActivity.java:244)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at com.example.kersplatt.GameActivity.access$0(GameActivity.java:237)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at com.example.kersplatt.GameActivity$1.onTouch(GameActivity.java:80)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.view.View.dispatchTouchEvent(View.java:3881)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1738)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1127)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1722)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2196)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1880)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.os.Looper.loop(Looper.java:130)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at java.lang.reflect.Method.invokeNative(Native Method)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at java.lang.reflect.Method.invoke(Method.java:507)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
02-12 13:31:31.959: E/AndroidRuntime(4902):     at dalvik.system.NativeStart.main(Native Method) 
```

我有 16 张图片，当我只放 4 张时它可以工作。我能做些什么来减轻图像的重量？我应该减小尺寸 (600*650)m 什么才足以拥有良好的品质？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:12:50.270

您可以减小映像大小，也可以尝试增加 VM 堆。

尝试在 adb shell 中设置以下内容。

**setprop dalvik.vm.heapsize "12m"**

# iphone - 在不播放音乐的情况下更改应用内的音量

> ID：14833975
> 
> 赞同：0
> 
> 时间：2013-02-12T13:43:59.503
> 
> 标签：iphone, ios, objective-c, core-audio, system-sounds

我的问题是：

1）我在 iOS 应用程序中 2）我在没有播放应用程序声音的情况下更改音量（单击音量按钮）-> 系统音量已更改。

有没有办法改变应用程序声音的音量而不播放它们？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:17:27.290

这样您就可以设置设备音量。

```
MPMusicPlayerController *player = [[MPMusicPlayerController alloc] init];
player.volume = 0.25;
[player release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:51:54.993

尝试这个

```
MPMusicPlayerController *musicPlayer = [MPMusicPlayerController applicationMusicPlayer];
musicPlayer.volume = 1; 
```

[MPMusicPlayerController 类参考](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMusicPlayerController_ClassReference/Reference/Reference.html)

# android - 如何在 android 的 facebook 朋友墙上发布消息

> ID：14833979
> 
> 赞同：0
> 
> 时间：2013-02-12T13:44:07.810
> 
> 标签：android, facebook

我正在使用以下代码通过我的 android 应用程序在 facebook 朋友墙上发布消息。它在 2013 年 2 月 6 日之前工作。但是从 2013 年 2 月 7 日开始，它给了我一个错误，例如，得到了响应：

`{"error":{"message":"(#200) Feed story publishing to other users is disabled for this application","type":"OAuthException","code":200}}`

我的代码是，

```
public void postToWall(String message){
    Bundle parameters = new Bundle();
    parameters.putString("message", message);  
    parameters.putString("description", "topic share"); 
    try {
        facebook.request("me");
        //              String response = facebook.request("Mrunal.Junghare/feed", parameters, "POST");
        String response = facebook.request(""+frienduser_id+""+"/feed", parameters, "POST");
        //          System.out.println("name111111========"+""+ListActivity.user_name+"/feed");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") ||
                response.equals("false")) {
            Toast.makeText(getApplicationContext(), "Blank response.", Toast.LENGTH_SHORT).show();  
        }
        else {

            Toast.makeText(getApplicationContext(),"Message posted to facebook wall!",Toast.LENGTH_SHORT).show();
        }
        finish();
    } catch (Exception e) {

        Toast.makeText(getApplicationContext(),"Failed to post to wall!", Toast.LENGTH_SHORT).show();
        e.printStackTrace();
        finish();
    }
} 
```

如何解决 2013 年 2 月重大变化的问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:55:44.167

尝试这个，

```
 private void postToFacebook(String review) {
    mProgress.setMessage("Posting ...");
    mProgress.show();

    AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(mFacebook);

    Bundle params = new Bundle();

    params.putString("message", review);
    params.putString("name", "Message");

    mAsyncFbRunner.request("me/feed", params, "POST",
            new WallPostListener());
}

private final class WallPostListener extends BaseRequestListener {
    public void onComplete(final String response) {
        mRunOnUi.post(new Runnable() {
            @Override
            public void run() {
                mProgress.cancel();

                Toast.makeText(Mainactivity.this, "Posted to Facebook",
                        Toast.LENGTH_SHORT).show();
            }
        });

    }
} 
```

这里有示例代码使用这个 [点击这里](http://www.londatiga.net/it/how-to-use-facebook-sdk-to-post-status-from-android/)

# python - 所有集群计算库都兼容starcluster吗？

> ID：14833983
> 
> 赞同：0
> 
> 时间：2013-02-12T13:44:26.050
> 
> 标签：python, parallel-processing, cluster-computing, starcluster

我有一个在亚马逊 EC2 上运行的高度线程化的应用程序。我想将此应用程序转换为 EC2 上的集群。我想为此使用starcluster，因为它易于管理集群。

但是我是集群/分布式计算的新手。谷歌搜索后，我发现以下用于集群计算的 python 库列表：

[http://wiki.python.org/moin/ParallelProcessing](http://wiki.python.org/moin/ParallelProcessing)（看集群计算部分）

我想知道是否所有的库都可以与 starcluster 一起使用。因为我希望应用程序与starcluster一起使用，所以在选择库时我需要记住什么，比如依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:04:37.930

基本上，StarCluster 是一个帮助您管理集群的工具。它可以添加/删除节点，在放置和安全组中设置它们，将它们注册到 Open Grid Scheduler 等等。您还可以轻松创建命令和插件来帮助您的工作。

您打算如何使用 StarCluster？

1.  如果它是作为负载平衡集群的观察者，那么应该没有任何问题。
2.  如果它是作为一个参与者（通过使用您自己制作的命令启动它并在集群中并行执行它来使其直接进行计算），那么我不知道。这可能是可能的，但 StarCluster 并不是为此而设计的。我们可以从[网站上](http://star.mit.edu/cluster/docs/latest/overview.html)阅读：

    > StarCluster 旨在简化在 Amazon 的 EC2 云上构建、配置和管理虚拟机集群的过程。

# ruby - Ruby：实例方法的命名空间

> ID：14833986
> 
> 赞同：0
> 
> 时间：2013-02-12T13:44:30.583
> 
> 标签：ruby, namespaces, instance-variables, instance-methods

我有很多实例方法，它们都共享相同的实例变量。由于这个类变得很大，我将这些方法分成大约 50 个模块。然后剩下的课程包括所有这 50 个模块。

我最终得到了一个令人难以置信的丑陋代码，其中充满了诸如“module_name_method_name”之类的实例方法，以避免方法名称的冲突。问题是每个模块可能具有相似（相似，不同）的功能（进而相似的方法名称）。

我当前的代码如下所示：

模块：

```
module Toyota
  def toyota_method1;@foo...;end
  def toyota_method2;@foo...;end
  ....
end

module Ford
  def ford_method1;@foo...;end
  def ford_method2;@foo...;end
  ....
end 
```

.... 大约 50 个这样的模块

```
class Cars
  include Toyota
  include Ford
  include ...

  def foo
    @foo = "bar"
    @bar = "foo"
    ...

    toyota_method1
    ford_method2
    toyota_method2
    ...
  end
end 
```

我怎样才能更好地设计我的代码？最重要的是所有实例方法都需要共享相同的实例变量……或者至少以某种方式可以访问相同的数据！

编辑：我自己想出了这个：

```
class Toyota
  attr_accessor :foo

  def method1
    puts @foo
  end
end

class Ford
  attr_accessor :foo

  def method1
    puts @foo
  end
end

class Cars
  def foo
    @foo = "bar"

    toyota = Toyota.new
    toyota.foo = @foo
    toyota.method1

    ford = Ford.new
    ford.foo = @foo
    ford.method1
  end
end

cars = Cars.new
cars.foo 
```

事实上，它解决了丑陋的方法名称问题，但现在我正在处理新问题：变量 @foo 可能非常大，它会将自身复制 50 次（或更多）到内存中（因为我有 50 个这样的类）。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:50:03.593

它不仅重复 50 次或更多，而且每个实例都重复，因为它是一个实例变量。根据我对您的代码的了解，如果我错了，您必须纠正我，您最好在类级别使用[继承](http://rubylearning.com/satishtalim/ruby_inheritance.html)和变量共享。如果您的汽车课程确实需要了解所有可能是所有类型的模型的所有不同方法，这可能行不通，但是我会说您从一开始就做错了。那么让我们看一下继承：

```
class Car
  attr_accessor :foo

  # lets you initialize attributes via a hash
  #
  def initialize attrs={}
    super()

    attrs.each do |att, value|
      self.send(:"#{att}=", value)
    end
  end

end 
```

继承`Toyota`自`Car`：

```
class Toyota < Car

  def method1
    # do what you want to do in this method
  end

end 
```

同样适用于`Ford`：

```
class Ford < Car

  def method1
    # do what you want to do in this method
  end

end 
```

像这样，您不必将命名空间放在您的方法前面：

```
Ford.new(:foo => 'fordfoo').foo #=> will put out «fordfoo»
Toyota.new(:foo => 'toyotafoo').foo #=> will put out «toyotafoo» 
```

## 跨班级分享

现在，如果`foo`在所有汽车之间共享，您可以将其设为 a) 汽车类的[常量](http://rubylearning.com/satishtalim/ruby_constants.html)（如果它是静态的）：

```
class Car
  FOO = 'bar'

  def put_foo
    puts FOO
  end
end 
```

像这样，所有`Car`, `Toyota`or的实例`Ford`都可以访问静态常量`FOO`，它只会在内存中存在一次：

```
Toyota.new.put_foo #=> 'bar' 
```

如果`foo`必须是可分配的并且整个继承树只需要存在一次，请使用[类变量](http://blog.codegram.com/2011/4/understanding-class-instance-variables-in-ruby)：

```
 class Car

   class << self
     def foo= data
       @@foo = data
     end
   end

   def foo= data
     self.class.foo = data
   end

   def foo
     @@foo
   end

 end 
```

现在`@@foo`继承树只存在一次，所以如果你这样做：

```
 car    = Car.new
 toyota = Toyota.new

 toyota.foo = 'toyota'
 car.foo #=> 'toyota' 
```

如果你不注意，这可能会导致严重的问题，但如果`foo`所有课程都必须相同，那么这是要走的路。[线程安全](https://stackoverflow.com/questions/9558192/thread-safety-class-variables-in-ruby)也存在​​一些问题，您必须[`Mutex`](http://www.ruby-doc.org/core-1.9.3/Mutex.html)使用类变量来解决（使用 ）。

如果`Car`, `Toyota`and `Ford`all 有不同`foo`的 , 但是每个类的实例需要共享同一个 foo (所以总共是 3 个 foo), 使用[类实例变量](http://blog.codegram.com/2011/4/understanding-class-instance-variables-in-ruby):

```
class Car
  class << self
    def foo= data
      @foo = data
    end

    def foo
      @foo
    end
  end

  def foo= data
    self.class.foo = data
  end

  def foo
    self.class.foo
  end
end 
```

像这样你会得到：

```
car = Car.new
car.foo = 'bla'

toyota = Toyota.new
toyota.foo #=> is nil
toyota.foo = 'bar'

car.foo #=> still 'bla'
toyota.foo #=> is 'bar' 
```

这些是跨实例共享相同数据的方法。

# ruby - 在 Ruby 中扩展模块时内部会发生什么？

> ID：14833991
> 
> 赞同：2
> 
> 时间：2013-02-12T13:44:51.453
> 
> 标签：ruby

```
Foo = Module.new

class MyClass
  include Foo
end 
```

当一个模块包含在一个类中时，会创建一个匿名代理类并将其设置为 MyClass 的超类。

```
MyClass.ancestors => [MyClass, Foo, ...] 
```

但是当一个模块被扩展时，**内部会发生什么呢？**Ruby 是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T05:09:36.010

我想你问的是`Object#extend`

因此`extend`，我可以**将**任何模块的方法包含到该对象中。例如，我有一个名为 HelperModule 的模块：

```
module HelperModule
  def foo
    puts "from module helper"
  end
end 
```

### 使用示例 1：

```
obj = Object.new
obj.extend HelperModule
obj.foo                  # => "from module helper" 
```

### 使用示例 2：

```
class MyClass
  extend HelperModule
end
MyClass.foo              # => "from module helper" 
```

**在内部**，根据[元编程 Ruby](https://rads.stackoverflow.com/amzn/click/com/B00A376YAK)：

> **Object#extend() 只是一个快捷方式，它在接收器的特征类中包含一个模块。**

* * *

ruby 方法调用的简要说明：

1.  找到对象的类，看看那里定义的方法
2.  找到那个类的超类，看看那里定义的方法

* * *

```
obj 
 |
 | class
 |                     superclass                  superclass
 --->  ObjectClass  --------------> SuperClass1 --------------> SuperClass2 .... 
```

关于eigenclass和方法调用路径的详细解释，请参考这本很棒的书[Metaprogramming Ruby](https://rads.stackoverflow.com/amzn/click/com/B00A376YAK)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:15:40.577

> 当一个模块在 Ruby 中扩展时，内部会发生什么？

当一个模块`M`包含在一个类`C`中时，会创建一个匿名代理类`⟦M′⟧`（称为*包含类*），使其方法表指针指向`M`的方法表。（对于常量表和模块变量也是如此。）`⟦M′⟧`的超类设置为`C`的超类，`C`的超类设置为`⟦M′⟧`。

此外，如果`M`包含其他模块，则递归应用该过程。

实际上，这只是默认行为。*真正*发生的是`include`调用`M.append_features(C)`，您可以通过覆盖该方法来自定义所有这些行为。

我发现[Rubinius](https://GitHub.Com/Rubinius/Rubinius/blob/master/kernel/delta/module.rb#L89-174)[的源代码`Module#append_features`](https://GitHub.Com/Rubinius/Rubinius/blob/master/kernel/delta/module.rb#L89-174)非常易读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T07:34:36.877

`obj.extend SomeModule`与`obj.eigenclass.include SomeModule`（*注意*：这只是伪代码，但你会明白的......）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T14:25:34.357

简而言之，Ruby 的`include`方法将模拟继承：它将允许包含类访问被包含模块的实例方法、变量和常量，就好像它们已在包含类本身中定义一样。正如您所提到的，Ruby 通过创建一个匿名代理类（称为 eigenclass 或单例类）来做到这一点，它引用包含的模块，并将其作为直接超类插入到包含类的祖先中。这就是 Ruby 中所谓的*mixin*。

`extend`但是，使用 与单例类交互更多一点：

```
module Foo
  def baz
    'baz'
  end
end

module Blah
  def blah
    'blah'
  end
end

class Bar
  extend Foo
  include Blah
  def self.magic
    'magic'
  end
end 
```

扩展`Foo`与`Bar`说是相同的（一直到它在 C 中的实现）

```
Bar.singleton_class.send( :include, Foo ) 
```

这意味着它是`Bar`其中的方法和常量`Foo`本质上嵌入的单例类，因此`Bar`作为其单例类的实例的 class 将继承这个新功能作为所谓的“类”方法。在 Ruby 中，模块和类只能有实例方法，因此“类”方法的创建实际上只是在类的单例类中创建一个实例方法，以这种方式被继承。

```
Bar.baz
# => 'baz'
Bar.magic
# => 'magic'
Bar.blah
# => NoMethodError
Bar.new.baz
# => NoMethodError
Bar.new.magic
# => NoMethodError
Bar.new.blah
# => 'blah' 
```

在这里您可以看到 和 的行为`include`差异`extend`。要验证他们关于类祖先的行为，您可以询问其祖先`Bar`及其单例类，它会告诉您模块`Blah`是 的直接父级`Bar`，但模块`Foo`是单例类的直接父级。

```
Bar.ancestors
# => [Bar, Blah, Object, Kernel, BasicObject]
Bar.singleton_class.ancestors
# => [Foo, Class, Module, Object, Kernel, BasicObject] 
```

从这些结果中，您可以看到包含如何模拟包含类中的继承，以及扩展如何仅包含在单例类中。

您可以尝试查看我不久前为[这个问题](https://stackoverflow.com/questions/17552915/ruby-mixins-extend-and-include)得到的答案；`include`他们在解释和`extend`功能 的行为方面做得非常出色。[这篇文章](http://erniemiller.org/2012/11/29/ruby-tidbit-include-vs-extend-with-module-class-variables/)也帮助我理解了他们的不同之处。

# erlang - 在erlang中将数据从表传输到另一个表

> ID：14833992
> 
> 赞同：1
> 
> 时间：2013-02-12T13:44:51.740
> 
> 标签：erlang, mnesia

我在我的数据库 mnesia 中有两个具有以下语法的表：

```
-record(person, {firstname, lastname,adress}).
-record(personBackup, {firstname, lastname,adress}). 
```

我想将数据从表**person**传输到表**personBackup**

我认为我应该用这种语法创建两个表（我同意你的想法）

```
mnesia:create_table(person,
   [{disc_copies, [node()]},
    {attributes, record_info(fields, person)}]),
mnesia:create_table(person_backup,
   [{disc_copies, [node()]},
    {attributes, record_info(fields, person)},
    {record_name, person}]), 
```

现在我有一个名为 **verify的函数**

在这个函数中，我将做一个测试，如果测试得到验证，我应该将数据从**person**传输到**person_backup**，然后我应该**重置**

这是我的功能

```
verify(Form)->

if Form =:= 40 ->

%%here I should transert data from person to person_backup  : read all lines from person and write this lines into person_backup

reset();

Form =/= 40 ->
io:format("it is ok")
end. 
```

这是功能**重置**：

```
reset() ->
    stop(),
    destroy(),
    create(),
    start(),
    {ok}. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:07:28.073

You don't have to use a separate record definition for each table. [mnesia:create_table](http://www.erlang.org/doc/man/mnesia.html#create_table-2) takes a `record_name` option, so you could create your tables like this:

```
mnesia:create_table(person,
   [{disc_copies, [node()]},
    {attributes, record_info(fields, person)}]),
mnesia:create_table(person_backup,
   [{disc_copies, [node()]},
    {attributes, record_info(fields, person)},
    {record_name, person}]), 
```

The value for `record_name` defaults to the name of the table, so there's no need to specify it for `person`. (I changed `personBackup` to `person_backup`, as Erlang atoms are usually written without camel case, unlike variables.)

Then you can put the same kind of records in both tables. Read or select from `person`, and write to `person_backup`, no conversion necessary.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:50:46.123

不需要为每个表单独定义记录。变量 90 和 80 可以解决问题。如果你想选择recod_name，你可以使用mnesia:create_table

@legoscia，除了第6行之外，您对所有内容都是正确的。

mnesia:create_table(person, if player value = 1

> 这样，结果可以光盘所有副本和节点。

# arduino - Arduino - 开关控制

> ID：14833999
> 
> 赞同：0
> 
> 时间：2013-02-12T13:45:01.177
> 
> 标签：arduino

我正在使用 Arduino 制作气球切断机制。Arduino 使用 GPS 数据来查找气球的高度。因此，当达到一定高度时，它必须让电流通过镍铬合金线以烧毁尼龙绳。

如何使用 Arduino 充当开关？也就是说，当达到某个条件时，Arduino 必须允许电流通过。可以使用 Arduino 完成吗？

有没有我可以通过 Arduino 购买和控制的数字开关？我的搜索给了我使用三端双向可控硅开关的建议。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:54:20.567

不是一个真正的问题......但我已经在许多成功的项目中使用了这个[TIP-120](http://bildr.org/2011/03/high-power-control-with-arduino-and-tip120/)电路。它可以容忍滥用（处理大电流等），并且易于与 Radio Shack 的几美元零件组装在一起。（对于您的使用，二极管不是必需的）。

开启它很简单`digitalWrite(pinNum, HIGH);`

就个人而言，我会使用机械解决方案作为[释放机制](http://diydrones.com/forum/topics/release-mechanism)，而不是相信高海拔加热的变幻莫测和更高的功率需求。

![在此处输入图像描述](../Images/70b04993afff873290a2d26388aba701.png)